# StackOverflow 问答 13415000-13415999

# ios - 语音激活

> ID：13415006
> 
> 赞同：0
> 
> 时间：2012-11-16T10:45:12.680
> 
> 标签：ios, audio

我正在寻找一种让手机聆听环境的方法，当用户说话或尖叫时，我喜欢在我的应用程序中对此做出反应。我想我需要分析音频并设置一些触发事件的阈值级别。

我猜这有很多样本，但我不确定正确的术语，所以在谷歌搜索时我找不到任何相关的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:56:08.263

看看[张开耳朵](http://www.politepix.com/openears/)。这是此类任务的最佳 3rd 方库之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:00:06.670

您可以使用下面的代码来设置我正在使用 AVAudiorecorder 的录音机的阈值

```
inputPower = [aRecoreder averagePowerForChannel:0];
if (inputPower > threshold ) {

   [aRecoreder record];
} 
else if (inputPower < threshold )
{
  //Do something

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:43:37.763

感谢spider1983的回答，我发现这个很棒的教程在一些调整后可以满足我的需要。谢谢！

[http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

# c# - 时间跨度到 int 预订工具

> ID：13415008
> 
> 赞同：0
> 
> 时间：2012-11-16T10:45:18.463
> 
> 标签：c#, visual-studio-2010, datetime, timespan

嗨，我正在尝试在 Visual Studio 中创建一个简单的预订表格，该表格需要一个到达日期和离开日期，获取持续时间并通过将持续时间乘以 115 英镑来计算住宿费用，这是我的代码（错误在线弹出开始“ int nights = dateDiff”并说“Timespan 无法转换为 int) 提前感谢您的帮助：

```
 String arrival, departure;
        arrival = textBox1.Text;
        departure = textBox2.Text;

        DateTime aDate, dDate;
        aDate = new DateTime();
        aDate = DateTime.ParseExact(arrival, "dd/mm/yyyy", null);
        dDate = new DateTime();
        dDate = DateTime.ParseExact(arrival, "dd/mm/yyyy", null);

        TimeSpan dateDiff;
        dateDiff = dDate.Subtract(aDate);
        int nights = dateDiff;

        textBox3.Text = ("" + nights);
        textBox5.Text = ("£" + (nights * 115)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:46:51.333

尝试

```
int nights = (int) dateDiff.TotalDays; 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.timespan.totaldays.aspx)。这可能会有所帮助（即`(int) Math.Round(dateDiff.TotalDays)`- 请参阅[此处](http://msdn.microsoft.com/en-us/library/wyk4d9cy.aspx)。

# sql - 使用拆分在 where 子句中加入列

> ID：13415009
> 
> 赞同：1
> 
> 时间：2012-11-16T10:45:20.387
> 
> 标签：sql, sql-server, sql-server-2008

我的存储过程接受具有以下值的参数

```
Declare @Temp VarChar(Max)
Set @Temp = 'S1CW3733|1050105000224,S1CW4923|1050105000009' 
```

价值观就像

```
Column1|Column2,Column1|Column2,Column1|Column2, 
```

我想在 SQL 查询中应用相同的

```
Select * 
From ATMStatus 
Where ATM + '|' + Fault IN (@Temp) 
```

我怎样才能做到这一点？

数据库是 SQL Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:48:15.293

对于小表，可以使用表扫描方案，假设 ATM 和 Fault 永远不能包含逗号 ( `,`) 或竖线 ( `|`)：

```
Select *
  From ATMStatus
 Where ',' + @Temp + ',' LIKE '%,' + ATM + '|' + Fault + ',%'; 
```

对于大型表，您需要使用拆分函数将变量转换为多行 2 列表，然后将其用作以下内容：

```
Select a.*
  From ATMStatus a
  join dbo.SplitVarTo2ColumnTable(@Temp) b
       on b.Column1 = a.ATM and b.Column2 = a.Fault; 
```

# c++ - 为什么是 boost::call_traits ::param_type 枚举类型的引用？

> ID：13415010
> 
> 赞同：8
> 
> 时间：2012-11-16T10:45:33.897
> 
> 标签：c++, templates, boost

基本的 C++ 03 枚举类型只是一个具有花哨名称的整数值，因此我希望按值传递它......

`boost::call_traits<T>::param_type`出于这个原因，我还希望`T=SomeEnum`确定最有效的传递方式`T`是按值。

从 boost 文档中，请参阅[Call Traits](http://www.boost.org/doc/libs/1_51_0/libs/utility/call_traits.htm)：

> 定义一个类型，表示将 T 类型的参数传递给函数的“最佳”方式。

当我使用它时`boost::call_traits<T>::param_type`，`T=SomeEnum`它确定 SomeEnum 应该通过引用传递。

我也希望`C++11 class enums`通过值传递。

测试代码：

```
#include <string>
#include <typeinfo>
#include <boost/call_traits.hpp>
#include <boost/type_traits/is_reference.hpp>

enum SomeEnum
{
    EN1_ZERO = 0,
    EN1_ONE,
    EN1_TWO,
    EN1_THREE
};

struct SomeStruct
{};

template<typename T>
void DisplayCallTraits( const std::string& desc )
{
    typedef typename boost::call_traits<T>::param_type param_type;
    std::cout << "-----------------------------------------------------\n";
    std::cout << "Call traits for: " << desc << "\n";
    std::cout << "\ttypeof T : " << typeid(T).name() << "\n";
    std::cout << "\ttypeof param_type : " << typeid(param_type).name() << "\n";
    std::cout << "\tis_reference<param_type> : " << std::boolalpha 
              << boost::is_reference<param_type>::value << "\n";
}

int main( int, char** )
{
    DisplayCallTraits< unsigned >( "unsigned" );     // pass by value, as expected
    DisplayCallTraits< SomeStruct >( "struct" );     // pass by reference, as expected
    DisplayCallTraits< SomeEnum >( "enumeration" );  // pass by reference - why?

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:31:59.167

这已更新为`is_enum`在实施中包含检查。请参阅此错误报告，2 个月前关闭：[https ://svn.boost.org/trac/boost/ticket/5790](https://svn.boost.org/trac/boost/ticket/5790)

# javascript - Jquery Javascript 语法

> ID：13415011
> 
> 赞同：1
> 
> 时间：2012-11-16T10:45:42.540
> 
> 标签：javascript, jquery

有人可以解释以下语法吗

```
$(function(){
    $(".myPage").live("click", myHandler);  // NOT THIS BIT!!
}); 
```

它看起来是全局定义的，如果这有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:48:10.690

```
$(function(){}); 
```

是[jQuery.fn.ready](http://api.jquery.com/ready/)的缩写。

如果您正在使用乘法框架，`$`那么它非常聪明，它会将 jQuery 作为第一个参数发送给回调：

```
jQuery(function($) {
    // $ is here 100% synonym for jQuery. 
}); 
```

* * *

在回调中，您将事件绑定到选择器`.myPage`。但事实上，您正在将选择器绑定到文档，然后检查 event.target 或 event.target.parentN 是否与选择器匹配：

伪代码：

```
$(document).on("click", function(event) {
    if ( $(event.target).is(".myPage") || $(event.target).closest(".myPage") ) {
        // call my original callback (myHandler)
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:47:34.437

`$(somefunction)`要求 jQuery 在 DOM 准备好后执行该`somefunction`函数。

从[文档中](http://api.jquery.com/jQuery/#jQuery3)：

> 这个函数的行为就像 $(document).ready()，因为它应该用于包装页面上依赖于准备好的 DOM 的其他 $() 操作。虽然从技术上讲，这个函数是可链接的，但链接它并没有太多用处。

它确保您不会在 DOM 对象可用之前尝试访问它们。将主代码嵌入到这样的回调中，在正文末尾的脚本元素中是一种很好的做法。

请注意，您可能有不同的脚本添加此类块。所有回调都将按照插入的顺序执行。当您拥有包含许多脚本的大型应用程序时，了解这一点尤其重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:48:35.013

此函数正在为现在和将来匹配当前选择器 (.myPage) 的所有元素附加一个事件处理程序 (myhandler)。[在http://api.jquery.com/live/](http://api.jquery.com/live/)上阅读更多关于 live 的信息

# android - 如何在 Parcel 中读取和写入 SoundPool 对象？

> ID：13415013
> 
> 赞同：1
> 
> 时间：2012-11-16T10:45:49.167
> 
> 标签：android, android-activity, parcelable, soundpool

初学者在这里。我有一个带有 SoundPool 对象的类。我想让这个类实现 Parcelable 以便它的实例可以在活动之间传递（这样我只加载一次声音）。

但是我在将 SoundPool 对象写入包裹时遇到了问题。我可以知道这是否可能吗？（也许 SoundPool 没有实现 Parcelable？）

```
public class SoundSamples { // implements Parcelable{

SoundPool sound;
AudioManager am;
int soundId[] = new int[4];
Context ctxt;

public SoundSamples(Context context) {
    ctxt = context;
}

public void makeSound() {
    Context context = ctxt;

    sound = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
    soundId[0] = sound.load(context, R.raw.c4, 0);
    soundId[1] = sound.load(context, R.raw.cs4, 0);
    soundId[2] = sound.load(context, R.raw.d4, 0);
    soundId[3] = sound.load(context, R.raw.ds4, 0);
}

public SoundPool getSound() {
    return sound;
}

public int[] getSoundId() {
    return soundId;
}

/*
private SoundSamples(Parcel in) {

    // STUCK HERE
    sound = in.readParcelable(null);
    soundId = in.readArray(Integer);
}

public static final Parcelable.Creator<SoundSamples> CREATOR
= new Parcelable.Creator<SoundSamples>() {
    public SoundSamples createFromParcel(Parcel in) {
        return new SoundSamples(in);
    }

    public SoundSamples[] newArray(int size) {
        return new SoundSamples[size];
    }
};

public void writeToParcel(Parcel out, int flags) {

        // AND STUCK HERE 
    out.writeIntArray(soundId);
    out.writeParcelable((Parcelable)sound,0);
}
*/
} 
```

任何帮助表示赞赏。请指出这是否是正确的做事方式。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:06:53.860

您绝对**不想**将 a 转换`SoundPool`为 a`Parcel`并在活动之间发送它。这是完全低效的。

只需将`SoundPool`对象存储在`public static`变量中，您就可以从所有活动中访问它。

[有关更多信息，请参阅我对Intent 和 Parcelable 对象 Android](https://stackoverflow.com/questions/12264678/intent-and-parcelable-object-android/12266509#12266509)的回答

# jsf - 表达式错误：命名对象：未找到 ch.foo.EnitityConverter@f163464

> ID：13415016
> 
> 赞同：1
> 
> 时间：2012-11-16T10:46:10.087
> 
> 标签：jsf, jsf-2, converter

[根据下面列出的stackoverflow](http://stackoverflow.com)`Converter`问题中描述的相同问题在托管Bean中拥有一个实例后，我收到一个异常，即找不到该对象。

```
Expression Error: Named Object: ch.foo.EnitityConverter@f163464 not found 
```

堆栈溢出问题：

*   [ManagedProperty 未注入 @FacesConverter](https://stackoverflow.com/questions/6135942/managedproperty-not-injected-in-facesconverter)
*   [在转换器中注入 managedBean](https://stackoverflow.com/questions/13101081/injecting-a-managedbean-in-a-converter)

我的 xhtml 代码：

```
<h:selectManyCheckbox value="#{bean.selectedEmployees}">
  <f:converter converterId="#{bean.entityConverter}" />
  <f:selectItems value="#{bean.allEmployees}" var="e" itemLabel="#{e.name}" />    
</h:selectManyCheckbox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:31:34.183

该`converterId`属性需要转换器 ID（转换器名称）。任何 EL 表达式值都被评估为`String`. 您基本上`toString()`是将转换器实例的结果传递给它，即`ch.foo.EnitityConverter@f163464`. 该转换器 ID 又不被识别为任何已注册的转换器。但是..您不想传递转换器 ID，而只是引用整个转换器实例。

`converterId`每当您想引用整个具体实例时，该属性都是错误的属性。改用`binding`属性，或输入组件的`converter`属性。

因此，所以

```
<h:selectManyCheckbox value="#{bean.selectedEmployees}">
  <f:converter binding="#{bean.entityConverter}" />
  <f:selectItems value="#{bean.allEmployees}" var="e" itemLabel="#{e.name}" />    
</h:selectManyCheckbox> 
```

或者

```
<h:selectManyCheckbox value="#{bean.selectedEmployees}" converter="#{bean.entityConverter}">
  <f:selectItems value="#{bean.allEmployees}" var="e" itemLabel="#{e.name}" />    
</h:selectManyCheckbox> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-16T10:52:54.623

它缺少`converter`名称。你的名字可能是这样的`entityConverter`。默认为课程名称。如下使用；

```
 <f:converter converterId="#{entityConverter}" /> 
```

# vb.net - 更新查询需要太多时间

> ID：13415021
> 
> 赞同：0
> 
> 时间：2012-11-16T10:46:19.670
> 
> 标签：vb.net, oracle, ado.net

我有包含 1000 万个数据的数据集，我正在遍历它并使用数据集的值来更新计数为 2500 万的基表。

where 子句中使用的字段是主键。

但我仍然没有获得性能，只有 100k 记录在 1 小时内更新。

如何优化和加快在 oracle 中执行查询的时间。

我在 vb.net 中使用命令对象、连接对象

以下函数执行了 1000 万次更新查询。

```
public cmd_obj as new oledb.oledbcommand
Strquery="update Table1 set field1='Value from dataset' where field2='value from dataset'" ' where field2 is primary key in base table
Public Function Executenonquery(ByVal Strquery As String) As Int32
  Dim intUpdated As Int32 = 0
  Try
    If VerifyOracleLogin() = True Then ' check oracle connection
      cmd_obj.Connection = dbconn
      cmd_obj.CommandText = Strquery 'strquery has update query
      intUpdated = cmd_obj.ExecuteNonQuery()
      return intUpdated
    End If   
  Catch ex As Exception
    WriteToErrorLog("Query Execution Error : " & Strquery, ex.Message)
    Return -1
  End Try
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:12:00.137

正如你所提到的：

> 我有包含 1 千万数据的数据集，我正在循环遍历它

我建议尝试使用 OpenXML 插入。看看[这个](http://support.microsoft.com/kb/315968?wa=wsignin1.0)样本。

**编辑：**

也看[这个](https://stackoverflow.com/questions/1602820/how-to-open-xml-data-in-oracle)。这里 SQL`OpenXml`在 Oracle 中使用`openedXml`.

另外，如果您正在使用`DataSet`，为什么不使用[DataSet.Update](http://msdn.microsoft.com/en-us/library/system.data.common.dbdataadapter.update%28v=vs.71%29.aspx)方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T05:10:14.077

查看您的查询：

> “更新表 1 设置字段 1='来自数据集的值'其中字段 2='来自数据集的值'”

我首先想知道你是如何替换这些数据库值的......如果我不得不猜测，我敢打赌你这样做的方式很容易受到 sql 注入的影响。但后来我意识到这并不重要，因为您很可能根本没有使用数据集的业务。我敢打赌，您将逐一检查数据集中的每一行并运行基本相同的更新查询，如果这是真的，那么我们几乎可以肯定会为您编写一个查询，该查询将输出到数据库并更新您的每条记录希望在一个语句中，这样您就永远不会将数据集拉回您的计算机。这样的查询将在您现在需要的时间的一小部分内运行......但要做到这一点，我们需要先查看更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T04:50:14.860

有多种方法可以处理这种情况：-

1.  创建一个存储过程并传递主键列表和要设置为数组的值。在存储过程中，循环遍历数组并使用异常处理执行更新语句。这样，即使一条记录失败，也可以执行其余的更新语句。
2.  另一种方法是按照“NeverHopeless”的建议执行脚本（附加查询）。但是在每个更新语句之后也要使用 Log Error 语句。有用的文档：- [http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php](http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php)

这里的瓶颈可能是 .Net 代码打开 Oracle 连接所花费的时间。因此，建议一次性发送尽可能多的数据，而不是一一发送。

# php - 将私有属性动态添加到对象

> ID：13415023
> 
> 赞同：5
> 
> 时间：2012-11-16T10:46:25.173
> 
> 标签：php, oop

我有一堂课：

```
class Foo {
    // Accept an assoc array and appends its indexes to the object as property
    public function extend($values){
        foreach($values as $var=>$value){
            if(!isset($this->$var))
                $this->$var = $value;
        }
    }
}

$Foo = new Foo;
$Foo->extend(array('name' => 'Bee')); 
```

现在该`$Foo`对象有一个`name`带有 value 的公共属性`Bee`。

如何更改`extend`函数以使变量私有？

**编辑** 使用私有数组是另一种方式，绝对不是我的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:53:00.290

你可以做这样的事情。

该`__get`函数将检查给定的密钥是否设置在私有属性中。

```
class Foo {

private $data = array();

// Accept an array and appends its indexes to the object as property
public function extend($values){
    foreach($values as $i=>$v){
        if(!isset($this->$i))
            $this->data[$i] = $v;
    }
}

public function __get($key) {
    if (isset($this->data[$key])) {
        return $this->data[$key];
    }
}

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T10:56:21.780

只是简单，糟糕的设计。

在运行时添加私有 [!] 字段的目的是什么？现有的方法不能依赖这些添加的字段，并且您会弄乱对象功能。

如果你想让你的对象表现得像一个 hashmap [即你可以调用`$obj -> newField = $newValue`]，考虑使用魔法`__get`和`__set`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:53:37.913

我会使用整个数组：

```
$Foo = new Foo;
$Foo->setOptions(array('name' => 'Bee'));

class Foo {
    private $options = array();

    public function setOptions(array $options) {
        $this->options = $options;
    }

    public function getOption($value = false) {
        if($value) {
            return $this->options[$value];    
        } else {
            return $this->options;
        }
    }
} 
```

然后，当您需要其他值时，您有更多选择，您可以遍历数组并使用它们。在大多数情况下，当您有单个变量时，它有点复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:10:55.863

这是一种基于访问器的方法：

```
class Extendible
{
    private $properties;

    public function extend(array $properties)
    {
        foreach ($properties as $name => $value) {
            $this->properties[$name] = $value;
        }
    }

    public function __call($method, $parameters)
    {
        $accessor = substr($method, 0, 3);
        $property = lcfirst(substr($method, 3));
        if (($accessor !== 'get' && $accessor !== 'set')
                || !isset($this->properties[$property])) {
            throw new Exception('No such method!');
        }
        switch ($accessor) {
            case 'get':
                return $this->getProperty($property);
                break;
            case 'set':
                return $this->setProperty($property, $parameters[0]);
                break;
        }
    }

    private function getProperty($name)
    {
        return $this->properties[$name];
    }

    private function setProperty($name, $value)
    {
        $this->properties[$name] = $value;
        return $this;
    }
} 
```

演示：

```
try {
    $x = new Extendible();
    $x->extend(array('foo' => 'bar'));
    echo $x->getFoo(), PHP_EOL; // Shows 'bar'
    $x->setFoo('baz');
    echo $x->getFoo(), PHP_EOL; // Shows 'baz'
    echo $x->getQuux(), PHP_EOL; // Throws Exception
} catch (Exception $e) {
    echo 'Error: ', $e->getMessage(), PHP_EOL;
} 
```

# scala - scala - 不变性表现

> ID：13415024
> 
> 赞同：3
> 
> 时间：2012-11-16T10:46:34.490
> 
> 标签：scala

**注意：**尽管我将使用 Akka 教程代码作为测试用例，但我的问题是关于 Scala 的一般不变性性能，以及如何调整 JVM

我正在接近 Akka，我正在尝试它的教程代码[Akka getting started](http://doc.akka.io/docs/akka/2.0/intro/getting-started-first-scala.html)；我将教程中的源代码原样粘贴到我自己的项目中并运行它，获得以下输出：

```
Calculation time:       660 milliseconds 
```

在此之后，我尝试在代码上做一些工作，重写这个函数

```
def calculatePiFor(start: Int, nrOfElements: Int): Double = {
  var acc = 0.0
  for (i <- start until (start + nrOfElements))
    acc += 4.0 * (1 - (i % 2) * 2) / (2 * i + 1)
  acc
} 
```

不使用*var*累加器，像这样

```
def calculatePiFor(start: Int, nrOfElements: Int): Double = {
  val range = start until (start + nrOfElements)
  val computation = range.map(i => 4.0 * (1 - (i % 2) * 2) / (2 * i + 1))
  computation.sum
} 
```

好吧，它起作用了，但性能有点退化

```
Calculation time:       1737 milliseconds 
```

我的问题来了：我的功能是否有任何重大错误，或者毫无疑问会导致这些表现？如果没有，任何人都可以指出调整 JVM 以提高这些性能的好规则吗？

我在 Scala 2.9 上运行我的代码，使用 sbt 0.12.0 及其默认的 java 选项（捆绑在 sbt.bat 中）：

```
_JAVA_OPTS=-Xmx512M -XX:MaxPermSize=256m -XX:ReservedCodeCacheSize=128m 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:04:54.303

`foldLeft`通过使用which 将计算总和作为您展示的命令式示例，您将获得更好的性能：

```
val computation = range.foldLeft(0.0){
  case (sum,i) => sum + 4.0 * (1 - (i % 2) * 2) / (2 * i + 1))
} 
```

但是，它可能仍然比它的命令式对应物慢。如果它**确实是**您的应用程序的瓶颈，您应该使用最快的版本（带有 while 循环的命令式版本）。它对 Actor 来说是安全的，因为可变状态将被完全隔离。

在所有其他情况下，最好损失百分之几的性能（在整个应用程序上测量时）使用凌乱的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:31:04.203

我认为您程序中的问题是调用*严格*（非懒惰）的`range.map(..)`方法。这意味着 - 如果您的范围有 1000 个元素，则方法将为 1000 个新元素分配内存并立即计算它们。*`map`*

 *因此，我猜想改进代码的替代且非常简单的方法是使用范围视图：`range.view.map(..)`，以便延迟计算映射元素并分配恒定数量的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:17:04.680

您可以尝试使用 foldLeft 而不是 map/sum：

```
 def calculatePiFor(start: Int, nrOfElements: Int): Double = {
    val range = start until (start + nrOfElements)
    range.foldLeft(0.0) { (acc,i) => acc + 4.0 * (1 - (i % 2) * 2) / (2 * i + 1)}
  } 
```

我猜这将避免对中间集合的需要，因此可能运行得更快。*

# php - jQuery 序列化从 MySQL 动态创建的复选框

> ID：13415026
> 
> 赞同：0
> 
> 时间：2012-11-16T10:46:49.147
> 
> 标签：php, jquery, mysql, serialization, checkbox

我从循环中的值`HTML`动态创建表中的行。每行代表一个行，并由一个 id 标识。`MySQL``PHP``MySQL`

我希望能够`<input type='checkbox'>`在每一行上都有一个，并在底行有一个“删除选定的行”按钮。

我的问题是我应该如何`POST`选择复选框以及如何在`PHP`- 文件中识别它们。

我有这个脚本到`serialize` `<input type='text'>`字段：

```
function serealizeInputs (input)
    {
        var array = [];
        input.each(function(){ array.push($(this).val()) });
        return array;
    }
var value = serealizeInputs($('.my_input_field')); 
```

如何为复选框编写类似的内容？

如您所见，我对此很陌生。如果您需要查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:29:58.190

您可以使用[prop 属性](http://api.jquery.com/prop/)来检查复选框是否被选中。这是一个[现场演示](http://jsfiddle.net/KS5uz/7/)

```
function serializeCheckboxes(input)
    {
        var array = [];
        input.each(function(){ 
            if($(this).prop("checked"))
            {
                array.push($(this).attr("id"))  
            }                
        });
        alert(array);
        return array;

    }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:44:44.467

要检索所有复选框，请使用`:checked`选择器[http://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

* * *

管理此问题的常用技术是使用数组运算符将要删除的每一行的主键作为数组发布`[]`

```
<?php foreach ($rows as $id => $row) : ?>
    <input type="checkbox" name="to_delete[]" value="<?php echo $id ?>" />
<?php endforeach; ?> 
```

在管理删除的 PHP 代码中，`to_delete`条目将是一个字符串数组。

```
foreach ($_POST['to_delete'] as $rowId) {
    // Delete the row from database
} 
```

还有，不显眼！依靠`<form>`包装所有元素的标准`<input>`元素。这将真正简化您的 JavaScript 代码，因为您只需要调用[jQuery.serializeArray](http://api.jquery.com/serializeArray/ "jQuery.serializeArray")来检索选中框的数组。

```
$('#form').on('submit', function(e) {
    e.preventDefault();
    var data = $(this).serializeArray();
    // POST an AJAX request with data
    return false;
}); 
```

# c# - 查找动态添加的用户控件

> ID：13415027
> 
> 赞同：0
> 
> 时间：2012-11-16T10:46:51.070
> 
> 标签：c#, asp.net

我已经动态添加了用户控件。我的目的是找出哪些其他用户控件与单击的用户控件相关。

`imagesButtons`数据库中（部分用户控制）之间的关系。只需要找到整个用户控件或`Code behind`相关图像按钮的值，以便我可以找到相关的`ImageButtons`并对其进行操作。我可以用这个来做吗？

这是正在执行的代码

```
Control c = (Page.LoadControl("Product_UserControl.ascx"));
string id = (c.FindControl("imgBtn") as ImageButton).ID; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:18:17.417

您要加载控件，例如

```
ProductUserControl control = (ProductUserControl)Page.LoadControl("Product_UserControl.ascx"); 
```

然后给它一个ID，以便您以后找到它

```
control.ID = "MyProduct1"; 
```

然后找到它使用：

```
ProductUserControl clickedControl = (ProductUserControl)Page.FindControl("MyProduct1"); 
```

* * *

好的，从您的评论看来，您只想要类似的东西

```
string userControlID = this.ID 
```

如果 ImageClick 事件处理程序位于 UserControl 代码隐藏内部，则这将返回 UserControl 本身的 ID。

# css - Twitter bootstrap 2 - 自定义按钮样式不起作用

> ID：13415030
> 
> 赞同：2
> 
> 时间：2012-11-16T10:47:10.453
> 
> 标签：css, twitter-bootstrap

我正在使用 TB 2，并且正在尝试在 CSS 中创建新的按钮样式。这是我在 CSS 中使用的选择器模式：

```
.btn.btn-create { background-color: #D14836; color: #FFFFFF; } 
```

我的 HTML 如下所示：

```
 <div id="page-right-column" class="span4">
        <div class="row-fluid">
            <div class="span12">
                <a href="#display-popup" class="btn btn-create pull-right" data-toggle="modal">Create New</a> 
```

显示页面时，按钮颜色为灰色，仅当我将鼠标移到按钮上时才显示 CSS 中指定的颜色 - 我做错了什么？

如何使用 CSS 正确设置 TB 按钮颜色的样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:27:38.817

采用

```
.btn.btn-create { 
    background-color: #D14836;
    color: #FFFFFF; 
    background-image: none; /* the background-image needs to be reset */
} 
```

# ruby-on-rails-3 - Rails：无法连接到“localhost”上的 MySQL 服务器 (10061) (Mysql::Error)

> ID：13415031
> 
> 赞同：0
> 
> 时间：2012-11-16T10:47:11.017
> 
> 标签：ruby-on-rails-3

我有一个奇怪的问题。当我尝试 ro make`rails s`时，它​​说我：

```
C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/conne
ction_adapters/mysql_adapter.rb:411:in `real_connect': Can't connect to MySQL se
rver on '127.0.0.0' (10060) (Mysql::Error)
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/mysql_adapter.rb:411:in `connect'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/mysql_adapter.rb:131:in `initialize'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/mysql_adapter.rb:38:in `new'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/mysql_adapter.rb:38:in `mysql_connection'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_con
nection'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels)
 in checkout'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkou
t'
        from C:/Ruby/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connecti
on'
        from C:/Ruby/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connect
ion'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_specification.rb:170:in `retriev
e_connection'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/connection_adapters/abstract/connection_specification.rb:144:in `connect
ion'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/model_schema.rb:308:in `clear_cache!'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active
_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/callbacks.rb:418:in `_run__319095901__prepare__837475246__callbacks'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/callbacks.rb:405:in `__run_callback'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/callbacks.rb:385:in `_run_prepare_callbacks'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/callbacks.rb:81:in `run_callbacks'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_d
ispatch/middleware/reloader.rb:74:in `prepare!'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_d
ispatch/middleware/reloader.rb:48:in `prepare!'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/appl
ication/finisher.rb:47:in `block in <module:Finisher>'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/init
ializable.rb:30:in `instance_exec'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/init
ializable.rb:30:in `run'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/init
ializable.rb:55:in `block in run_initializers'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/init
ializable.rb:54:in `each'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/init
ializable.rb:54:in `run_initializers'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/appl
ication.rb:136:in `initialize!'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/rail
tie/configurable.rb:30:in `method_missing'
        from C:/Ruby/acturevue/config/environment.rb:5:in `<top (required)>'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/dependencies.rb:251:in `require'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/dependencies.rb:251:in `block in require'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/activ
e_support/dependencies.rb:251:in `require'
        from C:/Ruby/acturevue/config.ru:4:in `block in <main>'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.r
b:51:in `instance_eval'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.r
b:51:in `initialize'
        from C:/Ruby/acturevue/config.ru:1:in `new'
        from C:/Ruby/acturevue/config.ru:1:in `<main>'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.r
b:40:in `eval'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.r
b:40:in `parse_file'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb
:200:in `app'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comm
ands/server.rb:46:in `app'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb
:301:in `wrapped_app'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb
:252:in `start'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comm
ands/server.rb:70:in `start'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comm
ands.rb:55:in `block in <top (required)>'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comm
ands.rb:50:in `tap'
        from C:/Ruby/ruby/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comm
ands.rb:50:in `<top (required)>'
        from script/rails:6:in `require' 
```

我无法理解的是，昨天一切正常！今天早上，Windows 更新了，所以也许有一个链接，不是吗？

此外，我无法访问，`localhost:3000`但我可以连接到 PhpMyAdmin 的登录页面（在写入我的登录名/密码后它拒绝我的连接）：`localhost:81`

在写这篇文章之前我找到了一些解决方案，但没有人为我工作！

提前致谢。

**更新**

这是我的 db.yml ：

```
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
  adapter: mysql
  encoding: utf8
  reconnect: false
  database: acturevue_development
  pool: 5
  username: root
  password: password
  host: localhost 
```

**更新** Gemfile 以查看 gem 是否可能是问题所在：

```
 source 'http://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

gem 'geocoder'
gem 'gmaps4rails'
gem "bootstrap-sass", ">= 2.1.0.0"

gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.3"
gem "paperclip", "~> 3.0" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:12:46.017

您必须为 mysql 指定 sockect

```
development:
 adapter: mysql
 encoding: utf8
 reconnect: false
 database: acturevue_development
 pool: 5
 username: root
 password: password
 host: localhost
 socket: /opt/lampp/var/mysql/mysql.sock //this path must point to your mysql socket 
```

ps 你需要在Linux和Windows下都指定这个选项，在Mac OS下不完全确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:28:41.503

试试下面的。

在宝石文件中

> 宝石'mysql'，'2.8.1'

在数据库.yml

发展：

```
adapter: mysql
 encoding: utf8
  reconnect: false
  database: acturevue_development
  pool: 5
  username: root
 password: password
  host: 127.0.0.0 
```

希望它对你有用:)

# php - JQBARGRAPH php jquery

> ID：13415032
> 
> 赞同：0
> 
> 时间：2012-11-16T10:47:17.193
> 
> 标签：php, jquery, bar-chart

我想问为什么我的条形图没有渲染。该栏没有任何颜色..正如我从文档中发现的那样，它只需要 jquery 并且不需要任何 css 来设置它。任何想法？？

```
 <div id='barchart'></div>
    <script>
        arrayOfData = new Array(
             [<?php echo $notification->get_module_activity_count($user_id,'employee');?>,'Employee'],
             [<?php echo $notification->get_module_activity_count($user_id,'bulletin');?>,'Bulletin'],
             [<?php echo $notification->get_module_activity_count($user_id,'filesharing');?> ,'FileSharing'],
             [<?php echo $notification->get_module_activity_count($user_id,'login');?> ,'Login']
        );

        $('#barchart').jqbargraph({
             data: arrayOfData,
            colors: ['#666','#000']
        });
    </script> 
```

# bash - Bash：如何处理所有给定的参数并将它们存储到数组中

> ID：13415036
> 
> 赞同：3
> 
> 时间：2012-11-16T10:47:37.067
> 
> 标签：bash, arguments

我是 bash 脚本的初学者，但在使用以下脚本时遇到了麻烦。

我想处理来自标准输入的所有给定参数。然后我检查这些参数是否是普通的文本文件。如果是，我想将它们存储到数组中，然后我想遍历整个数组。但是我收到一个错误： *文件+ =（“$@”）*行上的单词未解释 我试图像这样写*文件=（“$@”）* 但随后我在行上收到以下错误：“（ " 意外（期待“fi”）

如果您有任何建议，我将不胜感激。先感谢您。

```
for file in "${argv[@]}"; do
    if [ -d "$file" ] 
    then
        echo "Error: '"$file"' is directory!" > /dev/stderr
    continue
    fi  

    if [[! -f "$file"] || [! -r "$file"]] 
    then
        echo "Error: '"$file"'!" > /dev/stderr
    continue
    fi  

    file "$file" | grep text >& /dev/null

    if [ ! $status ]
    then
    files+=("$@") 
    else
    echo "Error: '"$file"' not a text file!" > /dev/stderr
    fi
done

for file in "${files[@]}"; do
# .....
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:56:11.407

尝试这样做：

```
#!/bin/bash

files=( )

for file; do
    if ([[ -f "$file && -r "$file" ]] && file "$file" | grep -q -i "text"); then
        files+=( "$file" )
    fi
done

for f in ${files[@]}; do
    # something with "$f"
done 
```

另一个版本，带有错误处理：

```
#!/bin/bash

files=( )

for file; do
    if [[ ! -f "$file ]]; then
        echo >&2 "$file is not a regular file"
        continue
    fi

    if [[ ! -r "$file ]]; then
        echo >&2 "$file is not readable for $USER"
        continue
    fi

    if ! file "$file" | grep -q -i "text"; then
        echo >&2 "$file is not a text file"
        continue
    fi

    files+=( "$file" )
done

for f in ${files[@]}; do
    # something with "$f"
done 
```

**笔记**

*   `argv`字面上不存在`bash`， `for file`就足够了
*   而不是使用不存在的变量`$status`，而是使用预定义的变量`$?`
*   不需要测试最后状态，你可以做一些更短的事情，比如`grep -q pattern file && do_something`
*   `echo >&2`意味着重定向到`STDERR`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:53:09.970

这是我刚刚编写的脚本，似乎可以按照您的要求进行操作...只需将第三个测试中的 .. 替换为您需要的任何内容。不幸的是，我从来没有像你上面那样使用数组，所以我只是按照我的方式编写。我希望它有所帮助。只需将其作为 bash {scriptname}.sh 运行即可。任何进入标准的东西都会被处理。

```
#!/bin/bash

checkfile()
{

for i in $token
    do  

        if [ -f "${i}" ]; then
            {
            echo "It's a file"
            }   
        elif [ -d "${i}" ]; then
            {
            echo "It's a directory"
            }       
        elif [ -z "${i}" ]; then
            {
                :
            }
        fi

    done

}

while ( : )
do
    read token
    checkfile
    sleep 2
done 
```

这是 bash 中的调试输出：

```
+ read token
a
+ checkfile
+ for i in '$token'
+ '[' -f a ']'
+ '[' -d a ']'
+ echo 'It'\''s a directory'
It's a directory
+ sleep 2
+ :
+ read token
b
+ checkfile
+ for i in '$token'
+ '[' -f b ']'
+ echo 'It'\''s a file'
It's a file
+ sleep 2
+ :
+ read token
a
+ checkfile
+ for i in '$token'
+ '[' -f a ']'
+ '[' -d a ']'
+ echo 'It'\''s a directory'
It's a directory
+ sleep 2
+ :
+ read token 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T07:52:01.997

[Sputnick 的回答](https://stackoverflow.com/a/13415158/1933494)是一个很好的解决方案。万一您想坚持自己的实现，请确保更正以下行：

```
if [[! -f "$file"] || [! -r "$file"]] 
```

您应该始终在括号和测试表达式之间留有空格：`[[ ! -f "$file" ]]`. 此外，由于您使用的是`||`运算符，请使用双括号而不是单括号：

```
if [[ ! -f "$file" ]] || [[ ! -r "$file" ]] 
```

将行更改`files+=("$@")`为`files+=( "$file" )`或`files[${#files[@]}]="$file"`。

不确定你想用你的`status`变量做什么。对于未分配的、已分配的变量 like或 any ，测试`[ ! $status ]`将返回 True 。如果要针对命令的退出状态进行测试，请使用整数测试而不是字符串比较：或.`status``status=``status=$(command >& /dev/null)``file ...``if [ $? -eq 0 ]``if (($? == 0))`

# vim - 清除 VIM 中旧外部命令的输出

> ID：13415037
> 
> 赞同：4
> 
> 时间：2012-11-16T10:47:39.873
> 
> 标签：vim

使用时*！vim 中的{cmd}* ，默认不清除上一条命令的输出。例如，我在 vim 中执行了两个外部命令：*! 制作*和*！海湾合作委员会*。当我打字的时候*！gcc*，前一个命令的输出*！包括*：

```
 user@desktop:~$ vim 

make: *** No targets specified and no makefile found.  Stop.

shell returned 2

Press ENTER or type command to continue
gcc: fatal error: no input files
compilation terminated.

shell returned 4

Press ENTER or type command to continue 
```

我希望 vim 清除这些旧输出，以便我可以清楚地查看当前命令的输出，您能提供任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:50:56.783

你可以`/usr/bin/clear`先运行.eg

```
:!clear && make 
```

[或者，您可以使用此提示](http://vim.wikia.com/wiki/VimTip1599)打开一个新的暂存缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T00:28:34.107

`.vimrc`您可以通过将 shell 变量设置为您可以随意创建的脚本的路径，将 vim 对所有命令的执行包装在任意脚本中。要添加到的行`.vimrc`：

```
set shell=~/.vim/shell-wrapper.sh 
```

然后在命名脚本中，您可以`clear`在运行最初请求的命令之前调用。最少的内容`~/.vim/shell-wrapper.sh`：

```
#!/bin/bash
clear
shift # strip the -c that vim adds to bash from arguments to this script
eval $@ 
```

你可以在这里找到我的完整配置：[https](https://github.com/timabell/dotmatrix) ://github.com/timabell/dotmatrix （可能会随着时间的推移而改变；撰写本文时的最后一次提交是[https://github.com/timabell/dotmatrix/commit/1098fcbcbcefa67b7a59d7a946cda1730db8ad8b](https://github.com/timabell/dotmatrix/commit/1098fcbcbcefa67b7a59d7a946cda1730db8ad8b)）

# jquery-ui - jQuery滑块onChange自动提交表单

> ID：13415041
> 
> 赞同：4
> 
> 时间：2012-11-16T10:47:45.840
> 
> 标签：jquery-ui, form-submit

我在表单中使用 jQuery 滑块作为价格范围选择器。我希望在更改其中一个值时自动提交表单。我使用了我在 SO 上找到的几个示例，但它们不适用于我的代码。

```
<form action="itemlist.php" method="post" enctype="application/x-www-form-urlencoded" name="priceform" id="priceform" target="_self">    
  <div id="slider-holder">
    Prices: From <span id="pricefromlabel">100 &#8364;</span> 
              To <span id="pricetolabel">500 &#8364;</span>
    <input type="hidden" id="pricefrom" name="pricefrom" value="100" />
    <input type="hidden" id="priceto" name="priceto" value="500" />
    <div id="slider-range"></div>
    <input name="Search" type="submit" value="Search" />
  </div>
</form> 
```

这是显示滑块值并更新我用来存储价格以提交的 2 个隐藏表单字段的代码：

```
<script>

    $(function() {
            $("#slider-range" ).slider({
                range: true,
                min: 0,
                max: 1000,
                values: [ <?=$minprice?>, <?=$maxprice?> ],
            start: function (event, ui) {
                    event.stopPropagation();
                },
                slide: function( event, ui ) {
            $( "#pricefrom" ).val(ui.values[0]);
            $( "#priceto" ).val(ui.values[1]);
            $( "#pricefromlabel" ).html(ui.values[0] + ' &euro;');
            $( "#pricetolabel" ).html(ui.values[1] + ' &euro;');
        }
            });
        return false;
        });

</script> 
```

我尝试将此代码以及 data-autosubmit="true" 属性添加到 div 但没有结果。

```
$(function() {
  $('[data-autosubmit="true"]').change(function() {        
    parentForm = $(this).('#priceform');
    clearTimeout(submitTimeout);
    submitTimeout = setTimeout(function() { parentForm.submit() }, 100);        
  }); 
```

我也尝试向滑块添加一个 $.post() 事件，但我对 jQuery 不是很好，所以我可能做错了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:57:55.753

jquery-ui 滑块上有一个更改事件。

试试这个 ：

```
$(document).ready(function() {
    $("#slider-range" ).slider({
        // options
        start: function (event, ui) {
            // code
        },
        slide: function( event, ui ) {
            // code
        },
        change: function(event, ui) {
            $("#priceform").submit();
        }
    });
}); 
```

# fonts - 关于多语言支持的字体和字符集我需要了解什么

> ID：13415045
> 
> 赞同：3
> 
> 时间：2012-11-16T10:47:59.973
> 
> 标签：fonts, internationalization, alphabet

注意：我接受了一个答案，因为它很有帮助，我不希望很快得到另一个答案，但这个问题仍然没有完全回答，所以我可能会奖励任何这样做的人。我想**我正在寻找的是一种流程图**，它决定给定字体是否支持给定语言。

我正在尝试将一组字体放在一起。我需要知道哪些字体可以用于哪些语言。

我对字符集（拉丁语、西里尔语、阿拉伯语）有粗略的了解，但不足以将例如波兰变音符号分类到事物的方案中。

我想有两种方法可以解决我的问题：

1.  为每种语言设置一个测试字符集。
2.  有一个备忘单，上面写着“某某语言需要拉丁扩展 B”和一个技术技巧来检查给定字体是否包含这些字形。

对于选项 2，我没有很好的资源。我正在寻找一种**节省劳动力的**解决方案。此时字体和语言的最终数量是未知的，我不想要 O(M*N) 任务。我可能必须执行选项 1 作为验证步骤，但我想首先减少搜索空间。

谁能告诉我如何按字符集对语言进行分组？

有什么我应该知道的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:29:59.327

很好的问题，虽然它有点笼统。

正如@Paweł Dylda 所说，要求编号 0 是对所有内容使用 UTF-8。如果您已经明白这些天必须这样做，那没关系；出于某种原因，很多人仍然没有。

另一个元提示是让您的应用程序非常清楚地知道它显示的是哪种语言。例如，在 HTML 中，到处使用 lang 和 dir 属性。如果不是 HTML，请创建某种全局变量，告诉应用程序它正在显示语言 X，首选字体是 Y。您可能还需要明确区分用户界面的语言和内容。（要查看示例，请访问英语维基百科，开设一个帐户，然后转到首选项并选择法语作为您的语言 - 您会看到英语文章和法语菜单。很多人觉得这很舒服，而且实现起来一点也不难。）

然后你需要了解你的目标语言。如果您想针对所有这些人，那真的很棒，尽管它可能具有挑战性。

对于拉丁语，您很可能不必费力地将语言分成“西方”、“东欧”、“南欧”、“土耳其语”、“越南语”等组。这是在常见的网络浏览器中完成的和文字处理器，但实际上这种方法已经过时了。你可以找到一个很好的字体，它涵盖了德语、法语、波兰语、土耳其语，甚至是越南语和非洲语，这些语言使用了很多变音符号。试试 SIL 的 Gentium 和 Doulos 以及 GNU Free Fonts。他们都是免费的。

从理论上讲，阿拉伯文字也可以这样说，但显然，阿拉伯文、波斯文和乌尔都文有一些不同的要求，尽管它们都使用相同的书写系统。通常，您可能必须为阿拉伯语使用通用阿拉伯语字体，并为乌尔都语提供不同的字体（例如，Nafees）。在这里，也可以使用母语人士进行测试。

对于西里尔文，尽量使用不仅包含俄语字母，还包含乌克兰语、塞尔维亚语和哈萨克语的字体，因为使用这些语言的国家/地区需要对它们提供良好的支持。这是西里尔文的最低要求，但您可以通过找到一种也支持俄罗斯其他语言（如萨哈语和阿布哈兹语）的字体来帮助自己和许多其他人。GNU Free Font 也可以在这里为您服务，但又一次 - 与人们一起测试它。

印度的语言是个大麻烦——那里有很多书写系统和字体。好消息是，Fedora 和 Ubuntu 等 Linux 发行版中的大多数都包含字体，并且它们可以免费在其他应用程序中重复使用。Lohit 家族涵盖了印度的大多数语言；看看马拉雅拉姆语的 Meera 和 Rachana。

我不太了解东南亚语言，如泰语、缅甸语、高棉语和老挝语，但也尝试支持这些语言。自 Windows NT 4 以来的大多数操作系统都很好地支持泰语，但对其他语言的支持非常不完整，因此假设操作系统在这里没有帮助您。

我的最后一个提示是查看 jquery.webfonts 库和相应的 MediaWiki 扩展“通用语言选择器”（又名 ULS）：* [https://github.com/wikimedia/jquery.webfonts](https://github.com/wikimedia/jquery.webfonts) * [https://www .mediawiki.org/wiki/Extension:UniversalLanguageSelector](https://www.mediawiki.org/wiki/Extension:UniversalLanguageSelector)

它提供了可移植的技术，可以轻松地将 webfonts 添加到您的 web 应用程序中。如果您不是在开发 Web 应用程序，或者由于其他原因无法使用该库，您仍然可以使用在存储库中找到的字体 - 它们涵盖了很多语言并且它们都是免费的。

（免责声明：我参与开发这些库。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T08:41:46.267

我发现 Cyber​​bit 字体涵盖了很多语言。

> Bitstream Cyber​​bit 是一种专业设计的大型 Unicode 字体，可覆盖多种主要文字，包括拉丁文、扩展拉丁文、希腊文、俄文、希伯来文、阿拉伯文、泰文、日文（平假名、片假名和汉字）、韩文和中文汉字（象形文字）。

这是链接：[cyberbit字体](ftp://ftp8.netscape.com/pub/communicator/extras/fonts/windows/)

# python - python中的动态函数

> ID：13415047
> 
> 赞同：0
> 
> 时间：2012-11-16T10:48:05.793
> 
> 标签：python

> **可能重复：**
> [Python 嵌套函数中的局部变量](https://stackoverflow.com/questions/12423614/local-variables-in-python-nested-functions)

这是我的问题，我需要在 python 中动态创建函数。我有一个参数列表，我需要为这个列表的每个元素创建一个函数。

这是一个例子：

```
list_func = []
list_param = ['foo','bar']

for param in list_param:
    def print_func():
        print(param)

    list_func += [print_func]

for func in list_func:
    func() 
```

使用此代码，第二个循环将仅打印最后一个参数。这是输出：

```
bar
bar 
```

我需要

```
foo
bar 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:51:03.363

用于`functools.partial`此。

```
>>> import functools
>>> def print_func(param):
...     print(param)
...     
>>> list_func = [functools.partial(print_func, x) for x in ["foo", "bar"]]
>>> list_func[0]()
foo
>>> list_func[1]()
bar 
```

或者，您可以定义一个可调用类：

```
class Printer(object):
    def __init__(self, param):
        self.param = param

    def __call__(self):
        print(self.param) 
```

然后`list_func = [Printer(x) for x in ["foo", "bar"]]`。当您的功能变得复杂时，这可能是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:00:37.573

```
list_func = []
list_param = ['foo', 'bar']

for param in list_param:
    def print_func(arg=param): #Look at this string
        print(arg)

    list_func.append(print_func)

for func in list_func:
    func() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:58:58.950

我刚刚修改了你的代码：

```
list_func = []
list_param = ['foo','bar']

def make_print_func(param):
    def print_func():
        print(param)
    return print_func

list_func += [make_print_func(param) for param in list_param]

for func in list_func:
    func() 
```

现在有一个函数`make_print_func`可以即时生成您需要的函数。

输出是这样的：

```
foo
bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T10:55:53.320

您可以使用`lambda`：

```
In [87]: list_func = []

In [88]: list_param = ['foo','bar']

In [89]: for param in list_param:
    list_func.append(lambda i=param:i)
   ....:     

In [91]: list_func[0]()
Out[91]: 'foo'

In [92]: list_func[1]()
Out[92]: 'bar' 
```

# c# - 我应该为任何方法结果执行 Contract.Ensures 吗？

> ID：13415055
> 
> 赞同：4
> 
> 时间：2012-11-16T10:48:39.893
> 
> 标签：c#, code-contracts

假设我有这个：

```
[Pure]
public static TimeSpan Seconds(this int i)
{
    Contract.Ensures(Contract.Result<TimeSpan>() == TimeSpan.FromSeconds(i));
    return TimeSpan.FromSeconds(i);
} 
```

我以如此严格的方式确保合同结果是正确的，还是不必要的？

* * *

在这种情况下？

```
[Pure]
public static T IfTrue<T>(this bool b, T value)
{
    Contract.Ensures(Contract.Result<T>().Equals(b ? value : default(T)));
    return b ? value : default(T);
} 
```

* * *

我的问题是：

1.  当我指出如此精确的合同保障时，我是对的吗？
2.  我有义务做出如此严格的合同保证吗？为什么？
3.  可以吗，我的合同保证重复（在我的申请中的许多情况下）`return`声明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T13:25:01.557

想想“合同”这个词——在编写代码时，您希望向调用者*保证*什么（或者`Requires`，您希望他们为您*保证*什么）。

对于诸如您展示的那些微不足道的示例，我想不出您想包含多少*合同*。也许对于第一个，我会去：

```
[Pure]
public static TimeSpan Seconds(this int i)
{
    Contract.Requires(i>0);
    Contract.Ensures(Contract.Result<TimeSpan>().TotalSeconds > 0.0);
    return TimeSpan.FromSeconds(i);
} 
```

我会向我的来电者保证我会产生积极的结果。显然，如果我在此方法中包含更复杂的数学，则可以给出类似的合同。我会保证范围，但我不会确切地保证结果是如何计算的（因为这可能会发生变化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:24:02.557

方法纯度意味着，该方法调用不会导致任何调用者对对象状态产生可见的副作用。*就是这样*。

当然，纯方法可以是公共的，并且可以定义自己的前置条件和后置条件。这取决于具体的方法用例。

# php - echo out mysql_real_escaped 引号在引号或双引号后截断字符串

> ID：13415056
> 
> 赞同：1
> 
> 时间：2012-11-16T10:48:40.903
> 
> 标签：php, mysql, quotes, mysql-real-escape-string

我正在为浏览器遇到这个奇怪但令人讨厌的语法问题。通过以下方式编码，我丢失了特殊字符之后的所有字符串：`"`

```
 echo '<td><input type=text style=width:100px name=itembrand value="' . $itembrand . ' " </td>';
    echo '<td><input type=text style=width:150px name=itemname value="' . $itemname . '" </td>';
    echo '<td><input type=text style=width:150 name=serialnr value="' . $serialnr . '" </td>';
    echo '<td><input type=text style=width:150px name=addinfo value="' . $addinfo . '" </td><td>'; 
```

如果我反过来编码，我会在以下内容之后丢失所有内容`'`：

```
 echo "<td><input type=text style=width:37px name=code value='" . $code ."' </td>";
    echo "<td><input type=text style=width:100px name=itembrand value='" . $itembrand . "' </td>";
    echo "<td><input type=text style=width:150px name=itemname value='" . $itemname . "' </td>";
    echo "<td><input type=text style=width:150 name=serialnr value='" . $serialnr . "' </td>";
    echo "<td><input type=text style=width:150px name=addinfo value='" . $addinfo . "' </td><td>"; 
```

什么是正确的语法，即使与后面的字符串一起回显数据库`'`项目`"`？

注意：
我正在使用`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`并且数据库条目是正确的，所以这一定是语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:48:40.903

好的，我`htmlspecialchars()`以前做对了。代码将如下所示：

```
 echo '<td><input type=text style=width:100px name=itembrand value="' . htmlspecialchars($itembrand) . ' " </td>';
    echo '<td><input type=text style=width:150px name=itemname value="' . htmlspecialchars($itemname) . '" </td>';
    echo '<td><input type=text style=width:150 name=serialnr value="' . htmlspecialchars($serialnr) . '" </td>';
    echo '<td><input type=text style=width:150px name=addinfo value="' . htmlspecialchars($addinfo) . '" </td><td>'; 
```

# perl - perl 无法获取所有数组元素。在 for （或类似 foreach 的循环中，...）它

> ID：13415057
> 
> 赞同：-4
> 
> 时间：2012-11-16T10:48:43.403
> 
> 标签：perl

这是我的脚本的一部分，它在文件中找到包含 $j[1] 和 $tt 的特定行。在 foreach 块中，循环变量只取@pdb 文件的前四个元素！

这是文件：

```
REMARK   4
REMARK   4
ATOM      1  N   UNK     1      12.964  -9.630   0.000  1.00  0.00
ATOM      2  N   UNK     1      16.585  -9.566   0.000  1.00  0.00
ATOM      3  C   UNK     1      17.270 -10.706   0.000  1.00  0.00
ATOM      4  N   UNK     1      20.927 -10.960   0.000  1.00  0.00
ATOM      5  C   UNK     1      22.257 -10.919   0.000  1.00  0.00
ATOM      6  C   UNK     1      22.886  -9.747   0.000  1.00  0.00
ATOM      7  C   UNK     1      24.215  -9.706   0.000  1.00  0.00
ATOM      8  O   UNK     1      24.992  -8.627   0.000  1.00  0.00
ATOM      9  N   UNK     1      25.815 -10.400   0.000  1.00  0.00
ATOM     10  C   UNK     1      27.131 -10.205   0.000  1.00  0.00
ATOM     11  C   UNK     1      27.620  -8.968   0.000  1.00  0.00
ATOM     12  N   UNK     1      29.548  -8.236   0.000  1.00  0.00
ATOM     13  C   UNK     1      21.133 -12.275   0.000  1.00  0.00
ATOM     14  C   UNK     1      22.373 -12.754   0.000  1.00  0.00
ATOM     15  C   UNK     1      22.579 -14.068   0.000  1.00  0.00
ATOM     16  O   UNK     1      23.819 -14.547   0.000  1.00  0.00
ATOM     17  N   UNK     1      21.284 -14.374   0.000  1.00  0.00
ATOM     18  C   UNK     1      20.304 -15.273   0.000  1.00  0.00
ATOM     19  C   UNK     1      20.593 -16.571   0.000  1.00  0.00
ATOM     20  N   UNK     1      19.612 -17.470   0.000  1.00  0.00
ATOM     21  C   UNK     1      12.355  -8.448   0.000  1.00  0.00
ATOM     22  C   UNK     1      11.027  -8.383   0.000  1.00  0.00
ATOM     23  C   UNK     1      10.418  -7.201   0.000  1.00  0.00
ATOM     24  O   UNK     1       9.090  -7.136   0.000  1.00  0.00
ATOM     25  N   UNK     1      11.131  -6.078   0.000  1.00  0.00
ATOM     26  C   UNK     1      11.870  -4.972   0.000  1.00  0.00
ATOM     27  C   UNK     1      11.282  -3.779   0.000  1.00  0.00
ATOM     28  N   UNK     1      12.020  -2.673   0.000  1.00  0.00
ATOM     29  C   UNK     1      11.794 -10.263   0.000  1.00  0.00
ATOM     30  C   UNK     1      11.757 -11.593   0.000  1.00  0.00
ATOM     31  C   UNK     1      10.587 -12.226   0.000  1.00  0.00
ATOM     32  O   UNK     1      10.550 -13.555   0.000  1.00  0.00
ATOM     33  N   UNK     1       9.563 -11.377   0.000  1.00  0.00
ATOM     34  C   UNK     1       8.238 -11.495   0.000  1.00  0.00
ATOM     35  C   UNK     1       7.678 -12.701   0.000  1.00  0.00
ATOM     36  N   UNK     1       6.353 -12.819   0.000  1.00  0.00
TER      37      UNK     1
CONECT    1    2   21   29
CONECT    2    1    3
CONECT    3    2    4
CONECT    4    3    5   13
CONECT    5    4    6
CONECT    6    5    7
CONECT    7    6    8    9
CONECT    8    7
CONECT    9    7   10
CONECT   10    9   11
CONECT   11   10   12
CONECT   12   11
CONECT   13    4   14
CONECT   14   13   15
CONECT   15   14   16   17
CONECT   16   15
CONECT   17   15   18
CONECT   18   17   19
CONECT   19   18   20
CONECT   20   19
CONECT   21    1   22
CONECT   22   21   23
CONECT   23   22   24   25
CONECT   24   23
CONECT   25   23   26
CONECT   26   25   27
CONECT   27   26   28
CONECT   28   27
CONECT   29    1   30
CONECT   30   29   31
CONECT   31   30   32   33
CONECT   32   31
CONECT   33   31   34
CONECT   34   33   35
CONECT   35   34   36
CONECT   36   35
MASTER        3    0    0    0    0    0    0    0   36    1   36    0
END 
```

和 perl 脚本：

```
#!/bin/perl
use strict;
open(pdb,"den.pdb") or die "$!";

my @pdb=<pdb>;
my $n0="N";
my @aa;
my $temp;
my @n1_find;
foreach (@pdb) {
    #$_ as selected line in file
    print $_;
    my @j=split(/\s{1,}/,$_);
    #j : array that contain line elements> eg. j[0] REMARK, ATOM ,...
    if ($j[0] eq "HETATM" or $j[0] eq "ATOM") {
        #print @pdb;
        @aa=grep {/CONECT/ && /\s$j[1]\s/} @pdb ; # pattern that search for CONECT that first N involve in it
        if ($j[2] eq $n0) { # get another N ATOM
            foreach my $ii (splice(@pdb, $temp, $#pdb)) {
                if ($ii=~/$j[0]\s{1,}(\d+)\s{1,}$n0/i) { #search for lines that contain ATOM id "First N" and the second
                    my $tt=$1;
                    if (grep {/CONECT/ && /\s$tt\s/} @aa) { #save both N and exit
                        $n1_find[0]=$j[1];
                        $n1_find[1]=$tt;
                        #$temp=-1;
                    }
                }
            }
        }
    }
    #last if ($temp==-1) ;
    #print $temp+=1;
} 
```

我为退出设置了一个循环条件，但即使我将它从脚本中删除，它也不会得到所有数组变量。比X。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:23:27.893

您的脚本中有几个问题。我不会详细列出所有这些：错误的变量名称，没有注释，奇怪的逻辑，没有`use strict;use warnings;`，使用不安全的 2 参数形式`open()`和全局文件句柄；未使用正确的 CPAN 模块（`File::Slurp`用于文件读取）。

*   **主要**的是您的主循环使用`$_`默认变量进行循环，该变量在内部被覆盖而不被本地化（例如 by `grep`）。

    使用显式循环变量：`foreach my $line (@pdb) {`

*   第二个是您正在遍历`@pdb`数组，并在循环中遍历同一数组（再次使用`grep`）。它很可能会摆脱循环。

    尝试遍历数组的副本。

    ```
    my @pdb2 = @pdb;
    foreach my $line (@pdb2) { 
    ```

一旦你做了这两个小修复，至少你的脚本将遍历外循环中的所有行。然后您可以开始调试循环内的实际逻辑。

# f# - 在 F# 中初始化自动实现的属性

> ID：13415062
> 
> 赞同：2
> 
> 时间：2012-11-16T10:48:59.593
> 
> 标签：f#

[“自动实现的属性是类型初始化的一部分，因此它们必须包含在任何其他成员定义之前，就像类型定义中的 let 绑定和 do 绑定一样”](http://msdn.microsoft.com/en-us/library/dd483467.aspx)

`member val`但是如果我在类型声明中放在其他普通`member this.`属性之后，编译器不会抱怨。没关系？

我是否正确地说在初始化对象时初始化属性，而不是在第一次调用属性时？

例如

```
 member val = let printf "%A" "initializing"
                3 with get, set 
```

所以每次我创建一个对象时，它都会打印“正在初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:06:03.187

是的，自动实现的初始化代码`member`作为对象构造的一部分运行（即使您`member x.Bar = ...`在 之前放置了一些其他声明`member val`）：

```
type Test() =
  do printfn "constructor"
  member x.Bar = 
    printfn "calling Bar"
    10
  member val Foo = 
    printfn "initializing Foo" 
    3 with get, set

let t = Test()
printfn "constructed"
t.Foo 
```

构造函数中的代码首先运行，然后是`Foo`初始化（`Bar`另一方面，在您实际调用之前不会调用中的代码`t.Bar`），因此会打印：

> 构造函数
> 初始化 Foo
> 构造

# kohana - 如何在 Kohana 中获取当前请求的完整地址？

> ID：13415065
> 
> 赞同：2
> 
> 时间：2012-11-16T10:49:09.047
> 
> 标签：kohana

如果我在页面上，`https://www.example.com/test?page=123`如何使用 Kohana 获取此完整路径（原型 + 主机 + URI + 查询）？

我试过了`Request::uri()`，`Request::url()`：他们没有给我完整的地址字符串。只有 URI 部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T10:53:43.060

有一个[URL 帮助](http://kohanaframework.org/3.0/guide/api/URL "网址助手")程序，其中包含将实现您的目标的方法...

```
URL::base(); 
```

如果你把它贴在你的`Request::uri()`. 如果你需要`http://`在前面，添加`true`作为第一个参数。然后有...

```
URL::query(); 
```

您可以使用它来获取查询字符串（并在必要时添加其他参数）。

所以像...

```
$current_url = URL::base(true).Request::uri().URL::query(); 
```

应该生成完整的 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-22T08:30:21.667

我正在使用 Kohana 3.3.2，这对我有用：

```
$current_url = URL::site(Request::detect_uri(), TRUE) . URL::query(); 
```

# iphone - 将 JSON 转换为可用的 NSDictionary

> ID：13415069
> 
> 赞同：0
> 
> 时间：2012-11-16T10:49:18.077
> 
> 标签：iphone, objective-c, ios, json

我是 iOS 世界的新手，我在玩从 node.js 服务器中提取数据。我正在寻找一种方法来获取这样的输出：我构建和记录只是为了玩。

```
 2012-11-16 10:18:31.244 Freshly[4952:11603] key: vendor, value: (
       "vendor_of_1",
       "vendor_of_2",
       "vendore_of_3",
       "vendore_of_4"
    ) 
    2012-11-16 10:18:31.245 Freshly[4952:11603] key: messages, value: (
       message1,
       message2,
       Message3,
       message4
    ) 
```

我可能做错了，但我认为这是基于希望在 UItable 中命名供应商和消息来填充单元格的最佳方式。

我关闭服务器的是：

```
 [{"content":"Message close","vendor":{"name":"Starbucks","_id":"509f9148c154050200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509f9148c154050200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-11T11:41:36.752Z","end":"2012-11-11T12:01:36.752Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"509f9148c154050200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509f9148c154050200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-11T10:11:36.754Z","end":"2012-11-11T12:01:36.754Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"509f918ff89e240200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509f918ff89e240200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-11T11:42:47.828Z","end":"2012-11-11T12:02:47.828Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"509f918ff89e240200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509f918ff89e240200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-11T10:12:47.830Z","end":"2012-11-11T12:02:47.830Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"509fbb99c888e40200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509fbb99c888e40200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-11T14:42:09.939Z","end":"2012-11-11T15:02:09.939Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"509fbb99c888e40200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509fbb99c888e40200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-11T13:12:09.941Z","end":"2012-11-11T15:02:09.941Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"509fcafa4550af0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509fcafa4550af0200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-11T15:47:46.751Z","end":"2012-11-11T16:07:46.751Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"509fcafa4550af0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509fcafa4550af0200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-11T14:17:46.753Z","end":"2012-11-11T16:07:46.753Z"},"loc":[5,5]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"509ff452ed9fdd0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509ff452ed9fdd0200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-11T17:14:10.082Z","end":"2012-11-11T19:04:10.082Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"509ff452ed9fdd0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"509ff452ed9fdd0200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-11T18:44:10.080Z","end":"2012-11-11T19:04:10.080Z"},"loc":[22.27977,114.156715]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a004620deba40200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a004620deba40200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-11T19:52:42.412Z","end":"2012-11-11T20:12:42.412Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a004620deba40200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a004620deba40200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-11T18:22:42.413Z","end":"2012-11-11T20:12:42.413Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a39413be8c8b0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a39413be8c8b0200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-14T12:42:35.885Z","end":"2012-11-14T13:02:35.885Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a39413be8c8b0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a39413be8c8b0200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-14T11:12:35.894Z","end":"2012-11-14T13:02:35.894Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a3a59762628e0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3a59762628e0200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-14T13:57:19.647Z","end":"2012-11-14T14:17:19.647Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a3a59762628e0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3a59762628e0200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-14T12:27:19.649Z","end":"2012-11-14T14:17:19.649Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a3b5f7f8eb510200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3b5f7f8eb510200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-14T15:07:11.412Z","end":"2012-11-14T15:27:11.412Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a3b5f7f8eb510200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3b5f7f8eb510200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-14T13:37:11.413Z","end":"2012-11-14T15:27:11.413Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a3c514273d070200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3c514273d070200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-14T16:11:40.930Z","end":"2012-11-14T16:31:40.930Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a3c514273d070200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3c514273d070200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-14T14:41:40.932Z","end":"2012-11-14T16:31:40.932Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a3d5e7c947720200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3d5e7c947720200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-14T17:23:27.443Z","end":"2012-11-14T17:43:27.443Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a3d5e7c947720200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a3d5e7c947720200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-14T15:53:27.445Z","end":"2012-11-14T17:43:27.445Z"},"loc":[5,5]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a56aa80253600200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a56aa80253600200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-15T20:40:24.971Z","end":"2012-11-15T22:30:24.971Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a56aa80253600200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a56aa80253600200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-15T22:10:24.970Z","end":"2012-11-15T22:30:24.970Z"},"loc":[22.27977,114.156715]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a5860700033d0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a5860700033d0200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-16T00:07:11.060Z","end":"2012-11-16T00:27:11.060Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a5860700033d0200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a5860700033d0200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-15T22:37:11.067Z","end":"2012-11-16T00:27:11.067Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a5f96f43fc550200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a5f96f43fc550200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-16T08:19:35.698Z","end":"2012-11-16T08:39:35.698Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a5f96f43fc550200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a5f96f43fc550200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-16T06:49:35.700Z","end":"2012-11-16T08:39:35.700Z"},"loc":[5,5]},{"content":"Message close","vendor":{"name":"Starbucks","_id":"50a60a38959fc90200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a60a38959fc90200000002","__v":0,"tags":["Specials","Drink"],"lifespan":{"start":"2012-11-16T09:31:12.497Z","end":"2012-11-16T09:51:12.497Z"},"loc":[22.27977,114.156715]},{"content":"Message loin","vendor":{"name":"Starbucks","_id":"50a60a38959fc90200000001","__v":0,"loc":[22.27977,114.156715]},"_id":"50a60a38959fc90200000003","__v":0,"tags":["Food"],"lifespan":{"start":"2012-11-16T08:01:12.499Z","end":"2012-11-16T09:51:12.499Z"},"loc":[5,5]}] 
```

我像这样解析：

```
 NSString *cachedPath = @"/Users/masonedwards/Documents/Developer/Freshly/Freshly/cached_data.txt";

    NSData *data = [NSData dataWithContentsOfURL:url];
    if (data){
        NSError *error;
        self.updates  =  [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    NSLog(@"udpates %@", self.updates);
    }else {
         self.updates = [NSDictionary dictionaryWithContentsOfFile:cachedPath];
    }
    NSLog(@"The Data is %@", self.updates); 
```

想要得到这样的细胞

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"updatesCell";
    UITableViewCell *cell = [self.updatesTV dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
     }  

    NSString *message = [self.updates objectForKey:@"content"];  
    NSString *vendor =  [[self.updates objectForKey:@"vendor"] objectAtIndex:indexPath.row];

   cell.textLabel.text = vendor;
   cell.detailTextLabel.text = message;

   return cell;
} 
```

我可能完全错了，第一个应用程序。但是任何形式的帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:53:59.847

您应该寻找的关键字是 NSJSONSerialization：这是 Google 显示的内容：[https ://www.google.de/search?q=nsjsonserialization&aq=0&oq=NSJSONSeri&aqs=chrome.0.0j57j0l2j62l2.4211&sugexp=chrome,mod=9&sourceid=铬&ie=UTF-8](https://www.google.de/search?q=nsjsonserialization&aq=0&oq=NSJSONSeri&aqs=chrome.0.0j57j0l2j62l2.4211&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8)

苹果为此任务有自己的类：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

阅读此内容，您应该进入下一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:18:25.597

试试下面的代码希望它有帮助。

```
 NSData *jsonData = [NSData dataWithContentsOfURL:url];

            NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&error];

          self.allData= [jsonArray mutableCopy];  

//Then Access All the data individually

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"updatesCell";
    UITableViewCell *cell = [self.updatesTV dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
     }  

NSString *message =[ [self.allData  objectAtIndex:indexPath.row] objectForKey:@"content"]];
NSDictionary *jsonDictionary =[ [self.allData  objectAtIndex:indexPath.row] objectForKey:@"vendor"]];

   NSString *vendor = [jsonDictionary  objectForKey:@"name"];

   cell.textLabel.text = vendor;
   cell.detailTextLabel.text = message;

   return cell;
} 
```

# css - 在 IE CSS font-face 仅在通过内部链接导航时有效

> ID：13415073
> 
> 赞同：31
> 
> 时间：2012-11-16T10:49:53.000
> 
> 标签：css, internet-explorer, https, font-face

我们的网页设计师创建了一个具有以下字体的 CSS：

```
@font-face {
    font-family: 'oxygenregular';
    src: url('oxygen-regular-webfont.eot');
    src: url('oxygen-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('oxygen-regular-webfont.woff') format('woff'),
         url('oxygen-regular-webfont.ttf') format('truetype'),
         url('oxygen-regular-webfont.svg#oxygenregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

它在 IE 和 Firefix 上运行良好。但是有一个问题：在 IE 上，只有当我使用内部网页链接导航页面时，字体才会正确呈现。如果我点击 Refresh 或 Back 按钮，字体将被默认字体（Times New Roman）替换。

目前该网站使用的是 HTTPS，但在使用 HTTP 时也出现了同样的问题。

当我使用内部网站链接导航时，在 IE 开发人员工具 (Shift - F12) 的网络选项卡中，我看到以下内容：

```
/Content/oxygen-regular-webfont.eot?    GET 200 application/vnd.ms-fontobject 
```

当我使用刷新/返回按钮时，其他字体还有两个条目：

```
/Content/oxygen-regular-webfont.woff    GET 200 application/x-font-woff
/Content/oxygen-regular-webfont.ttf GET 200 application/octet-stream 
```

CSS 文件本身正在以下列方式加载：

```
/Content/site.css   GET 200 text/css 
```

我试图同时删除 woff 和 ttf 所以我有以下内容：

```
@font-face {
    font-family: 'oxygenregular';
    src: url('oxygen-regular-webfont.eot');
    src: url('oxygen-regular-webfont.eot?#iefix') format('embedded-opentype');
    font-weight: normal;
    font-style: normal;
} 
```

但 IE 的行为仍然相同（除了它不再下载 woff 和 ttf 之外）：在通过 Back/Refresh 导航时显示不正确的后备字体。

**如何让 IE 在刷新/返回操作时加载正确的字体？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-16T21:39:47.150

我找到了一个解决方案，但我看不到它起作用的原因（嗯，只有一个原因 - 它是 IE :D）。

我所做的是将同一个站点放在 Apache 上并再次测试。在 Apache 上，即使使用刷新按钮，字体也能正常工作。然后在网络检查器中，我看到 Apache 为 eot 文件返回 304 而不是 200，它击中了我 - 所以这是缓存问题。我去了我的 ASP.NET 应用程序，果然 - 出于安全原因（也为了避免缓存 AJAX 请求）有人禁用了你可以想象的每个缓存：

```
 // prevent caching for security reasons
        HttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(false);
        HttpContext.Current.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        HttpContext.Current.Response.Cache.SetValidUntilExpires(false);
        HttpContext.Current.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        HttpContext.Current.Response.Cache.SetNoServerCaching();

        // do not use any of the following two - they break CSS fonts on IE
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore(); 
```

当我注释掉最后两行代码时，字体突然开始在 IE 上正常工作。所以我猜答案是：如果没有缓存，IE 无法加载字体。不过，我不知道为什么只有在刷新/导航回来时才会出现问题。

**编辑 - 替代解决方案**

而不是评论最后两行

> ```
>  // do not use any of the following two - they break CSS fonts on IE
>     HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
>     HttpContext.Current.Response.Cache.SetNoStore(); 
> ```

改为：`SetAllowResponseInBrowserHistory`_`true`

```
HttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(true); 
```

据我了解，这应该仍然允许无缓存，除了向后和向前导航。 [MSDN - SetAllowResponseInBrowserHistory 方法](https://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setallowresponseinbrowserhistory(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-12T21:33:16.803

我遇到了同样的问题。

如果*.eot*文件的标头包含**Cache-Control: no-cache**值，*IE9*将无法正确加载字体。开发工具显示***Result*** - 200，但***Received***列显示 400B，同时*Content-Length*为 70Kb。我使用了以下值***Cache-Control: max-age=0***来解决问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-17T07:44:42.493

我只是有同样的错误，对于那些想要一个纯粹的解决方案（非精确技术相关）的人：你需要确保你发送的字体标题不是`no-cache`. 除了之前写的内容之外，实际上还有两个标题可以做到这一点：

```
"cache-control: no-cache" 
```

和

```
"pragma: no-cache" 
```

两者都说浏览器相同，第一个是 HTTP1.1 的一部分，第二个是较旧的（HTTP1.0）。

现在，解决方案：

*   如果您真的想在没有客户端缓存的情况下提供字体（和其他文件？），请设置`"cache-control" to "max-age=0"`；您可以删除 pragma 标头，它已过时（或将其设置为`"pragma: cache"`）。
*   如果你真的想要缓存：删除`no-cache`值，并设置适当的 max-age（例如`"cache-control: max-age=3600"`- 一小时缓存）。Pragma 可以完全设置`"pragma: cache"`或删除。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-03T15:07:31.260

我找到了解决此问题的替代解决方案。

我已将字体直接嵌入样式表中，而不是作为单独的字体文件加载。这在包括 Windows、Mac、IOS、Android 等在内的所有浏览器中都可以正常工作，并有助于减少网页中的 HTTP 请求数量。

这将不需要对标头 Cache-Control 进行任何更改。

`@font-face { font-family: '<FONT NAME>'; src: url(data:application/x-font-woff;charset=utf-8;base64,<BASE64_ENCODED>) format('woff'), url(data:application/x-font-ttf;charset=utf-8;base64,,<BASE64_ENCODED>) format('truetype'); font-weight: normal; font-style: normal; }`

您可以在 OS X 或 Linux 中使用内置的 base64 命令进行字体编码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-18T10:23:21.477

[JustAMartin](https://stackoverflow.com/users/217823/justamartin)的[回答](https://stackoverflow.com/a/13424799/3325104)让我们找到了不同的解决方案：

而不是评论最后两行

> ```
>  // do not use any of the following two - they break CSS fonts on IE
>     HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
>     HttpContext.Current.Response.Cache.SetNoStore(); 
> ```

我们添加了以下行：

```
HttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(true); 
```

据我了解，这应该仍然允许无缓存，除了向后和向前导航。 [MSDN - SetAllowResponseInBrowserHistory 方法](https://msdn.microsoft.com/en-us/library/system.web.httpcachepolicy.setallowresponseinbrowserhistory(v=vs.110).aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-07T23:30:14.593

删除全局响应 NoCache 和 NoStore 设置将修复字体，但如果您需要这些设置，那么显然这不是答案。

我的理解是，仅将缓存设置为过期不会始终阻止缓存页面的显示；它会强制检查服务器，但如果页面未修改（304 响应）可能（通常？）仍显示缓存版本。

（实际上，现在阅读本文时，我想到将客户端缓存设置为立即过期并结合 SetNoServerCaching 可能会强制客户端页面始终更新？似乎它可能会对性能产生影响。）

我发现在 ASP.NET MVC 中使用控制器上的 OutputCacheAttribute 属性来禁用缓存不会破坏 IE 字体。

```
[OutputCacheAttribute(VaryByParam = "*", Duration = 0, NoStore = true)]
public class FooController : Controller
{
    ...
} 
```

我意识到 NoStore 与 SetCacheability(HttpCacheability.NoCache) 不同，但它似乎适用于此目的。

您可以创建一个具有要继承的属性的基本控制器，以使代码更清晰。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-16T10:56:36.740

确保它不是路径问题，即您的 CSS 文件与字体所在的位置相关。在您的情况下，您需要将 CSS 文件与字体文件放在同一文件夹中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-30T14:17:44.277

不要将 Vary Request Header 设置为 https

**没有字体加载**

```
Vary:Accept-Encoding,https 
```

**作品**

```
Vary:Accept-Encoding 
```

[设置缓存头对于避免延迟字体加载](https://stackoverflow.com/questions/11711641/avoid-delayed-load-of-font-face)是必要的。

# javascript - 单击照片时如何将一些数据插入MySQL

> ID：13415076
> 
> 赞同：-1
> 
> 时间：2012-11-16T10:50:09.640
> 
> 标签：javascript, jquery, html, mysql, ajax

是否可以在单击图像时在数据库（例如 MySQL）中插入一些值或信息，例如 alt 属性？我怎么能那样做？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T10:54:48.413

看看给定的例子：

```
// Your Images With Click Event
$('img').click(function(){
   var altData = $(this).attr('alt');

   // Use Ajax request to insert data into database
   $.ajax({
     url: 'your_url_here', 
     data: 'alt='+altData, 
     success: function(data){ /* response by your url */ }
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:58:03.597

是的，您可以使用 Jquery 和一些服务器端处理轻松地做到这一点。

```
$("#myimage").click(function() {
   var $myimage=$(this);
   $.ajax({
       type: 'POST',
       url: 'myserverpage.php',
       data: { img_url: $myimage).attr('href'), 'img_alt': $myimage.attr('alt') },
       success: function(){
            console.log("OK!");
       }
   });
}); 
```

在您的页面`myserverpage.php`中，您可以找到您在 Ajax 请求中设置的值的 POST 数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:53:06.843

使用 ajax 和更好的 jQuery：

[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)

使用 .click() 来捕捉点击事件，然后调用一个函数对 php 文件执行 ajax 请求，从而将数据插入到您的数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:56:16.943

希望此链接对您有用... [jQuery ajax 调用](http://api.jquery.com/jQuery.ajax/)

您可以在特定图像的“onClick”事件中进行 ajax 调用:)

# windows-phone-7 - 可以从我的应用程序将 windows phone 7 设备切换到锁屏模式吗？

> ID：13415077
> 
> 赞同：0
> 
> 时间：2012-11-16T10:50:11.250
> 
> 标签：windows-phone-7

> **可能重复：**
> [您可以在 wp7 中以编程方式锁定屏幕吗](https://stackoverflow.com/questions/4857757/can-you-lock-screen-programmatically-in-wp7)

可以从我的应用程序将 windows phone 7 设备切换到锁屏模式吗？我知道 ApplicationIdleDetectionMode，但我不需要在后台模式下运行应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:00:35.920

没有。Windows Phone 7 API 没有这样的选项。[请参阅此处](https://stackoverflow.com/a/4857764/925202)的讨论。

# resize - 剑道 UI 拆分器调整大小

> ID：13415080
> 
> 赞同：1
> 
> 时间：2012-11-16T10:50:21.620
> 
> 标签：resize, kendo-ui, splitter

我有一个 Tabstrip，其中一个选项卡包含一个拆分器。问题是当我单击选项卡时拆分器没有正常显示 - 左窗格的大小为零，右窗格为空白。如果我展开左窗格，它会正常显示。

我在这里也发现了这个问题：[Kendo UI Forum](http://www.kendoui.com/forums/ui/splitter/splitter-within-tab-not-sizing-properly.aspx)

所以我使用了提供的代码：

```
$("#tabstrip").kendoTabStrip({
animation: false,
select: function(e) {
    setTimeout(function() {
        $(e.contentElement).find(".k-splitter").each(function() {
            $(this).data("kendoSplitter").trigger("resize");
        });
    });
}
}); 
```

对于过去的一些剑道版本，它甚至可以使用`animation:true`！

然而，在我开始使用 Q3 beta 之后，现在是完整的 Q3，上面的代码只有`alert("")`在触发命令之前才有效！有了警报，它工作正常，没有它，我又得到了旧的混乱结果。

我目前的代码是：

```
$("#tabstrip").kendoTabStrip({
    animation : {
        open : {
            duration : 200,
            effects : "fadeIn"
        }
    },
    select : function(e) {
        setTimeout(function() {
            $(e.contentElement).find(".k-splitter").each(function() {
                $(this).show(500, function() {
                    alert("");
                    $(this).data("kendoSplitter").trigger("resize");
                });
            });
        });
    }
});

$("#splitter").kendoSplitter({
    panes : [
        {
            collapsible : true,
            size : "17%",
            scrollable: false
        },
        {
            collapsible : false,
            resizable: false,
            scrollable: false
        },
        {
            collapsible : true,
            size : "20%",
            scrollable: false
        },
    ],
}); 
```

我是不是忘记了什么？整个事情`alert("")`并没有真正的意义，当然我不希望每次选择选项卡时都会发出警报。

PS：如果我放`animation:false`，那么代码可以在没有 的情况下工作`alert("")`，但我想保持动画原样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:10:51.610

给**setTimeout**函数一个比动画更长的持续时间（第二个参数）。

```
$("#tabstrip").kendoTabStrip({
    animation : {
        open : {
            duration : 200,
            effects : "fadeIn"
        }
    },
    select: function(e) {
        setTimeout(function() {
            $(e.contentElement).find(".k-splitter").each(function() {
                $(this).data("kendoSplitter").trigger("resize");
            });
        }, 300);
    }          
}); 
```

这是示例小提琴：

[http://jsfiddle.net/FLLJv/53/](http://jsfiddle.net/FLLJv/53/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T13:29:41.603

您可以将`activate`事件用于 TabStrip：

```
$("#tabstrip").kendoTabStrip({
  activate: function(e) {
    $(e.contentElement).find('.k-splitter').trigger('resize');
  }
}); 
```

就动画而言，可能存在一些缺点，但它似乎比使用`setTimeout`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T10:56:59.757

您应该将`resize`代码放在[激活](http://docs.telerik.com/kendo-ui/api/javascript/ui/tabstrip#events-activate)事件处理程序中，而不是`select`在动画结束后触发的事件处理程序中。然后你可以完全删除`setTimeout`：

```
$("#tabstrip").kendoTabStrip({
    animation : {
        open : {
            duration : 200,
            effects : "fadeIn"
        }
    },
    activate: function(e) {
        $(e.contentElement).find(".k-splitter").each(function() {
            $(this).data("kendoSplitter").trigger("resize");
        });
    }          
}); 
```

# c# - 使用 .Zip C# 将函数应用于列表

> ID：13415083
> 
> 赞同：1
> 
> 时间：2012-11-16T10:50:28.253
> 
> 标签：c#

我有三个长度相同的数组，我想使用 .Zip 可选性从中提取最大值/最小值（或应用任何其他函数**Fct**），谁能帮我以一种干净的方式做到这一点？

```
double [] x = new  double []  {1,3,5,6,6};
double [] y = new  double [] {5,6,8,3,4} ;
double [] z = new  double  [] {9,4,10,0,8} ;
double []  result = z.Zip(x.Zip(y, (a, b) => Math.Max(a, b)).ToList(), (c, maxab) => Math.Max(c, maxab)).ToArray();

{double[5]}
[0]: 9.0
[1]: 6.0
[2]: 10.0
[3]: 6.0
[4]: 8.0 
```

我的问题是：有没有办法做一个**Fct (a,b,c)**而不是做两次：**Fct (a,b)** then **Fct ( Fct (a,b),c)**当 Fct 不一定可以拆分时那感觉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:01:19.400

**改进的答案（为了语法上的乐趣）：**

```
static IEnumerable<T> Map<T>(Func<IEnumerable<T>, T> f, 
                             params IEnumerable<T>[] arr)
{
  var enums = Array.ConvertAll(arr, x => x.GetEnumerator());
  try
  {
    while (enums.All(x => x.MoveNext()))
    {
      yield return f(enums.Select(x => x.Current));
    }
  }
  finally
  {
    foreach (var e in enums) e.Dispose();
  }
}

static void Main(string[] args)
{
  double[] w = { 1, 2, 3, 4, 5 };
  double[] x = { 1, 3, 5, 6, 6 };
  double[] y = { 5, 6, 8, 3, 4 };
  double[] z = { 9, 4, 10, 0, 8 };

  var r = Map(Enumerable.Max, w, x, y, z).ToArray();

  ...
} 
```

玩得开心 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:54:27.407

以下函数是 Zip 函数的测试版本，它运行三个集合，它不会一次计算所有结果，而是像 Linq 的 Zip 函数一样使用延迟执行。

```
static class ThreeWayZip
{
  public static IEnumerable<TResult> Zip3<TFirst, TSecond, TThird, TResult>(
      this IEnumerable<TFirst> first,
      IEnumerable<TSecond> second,
      IEnumerable<TThird> third,
      Func<TFirst, TSecond, TThird, TResult> resultSelector)
  {
    if(first == null || second == null || third == null) 
    { throw new ArgumentNullException(); }

    using (var iterator1 = first.GetEnumerator())
    using (var iterator2 = second.GetEnumerator())
    using (var iterator3 = third.GetEnumerator())
    {
      while(iterator1.MoveNext() 
        && iterator2.MoveNext()
        && iterator3.MoveNext())
      {
        yield return resultSelector(
          iterator1.Current, iterator2.Current, iterator3.Current);
      }

    }
  }
} 
```

以下是我运行的测试：

```
int Min3(int x, int y, int z) 
{
      if(x<=y)
      {
        if(x<=z)
        { //x<=z && x<=y
          return x;
        }
        //z<x && x<=y 
        return z;
      }
      //y<x
      if(z<=y) return z;
      //y<z && y<x
      return y;
}

[TestMethod]
public void Test_Zip3()
{
  int[] a = { 2, 3, 5 };
  int[] b = { 3, 2, 5 };
  int[] c = { 5, 1, 5 };

  IEnumerable<int> result = a.Zip3(b, c, Min3);
  CollectionAssert.AreEqual(new[] {2, 1, 5}, result.ToArray());
}

[TestMethod]
public void Zip_With_Different_ArrayLength()
{
  int[] a = { 2, 3, };
  int[] b = { 3, 2, 5 };
  int[] c = { 5, 1, 5, 8 };

  var result = a.Zip3(b, c, Min3);
  CollectionAssert.AreEqual(new[] {2, 1}, result.ToArray());
}

[TestMethod]
public void Zip_With_EmptyArray()
{
  int[] a = { 2, 3, };
  int[] b = { 3, 2, 5 };
  int[] c = { };

  var result = a.Zip3(b, c, Min3);
  CollectionAssert.AreEqual(new int[0], result.ToArray());
}

[TestMethod]
public void Zip_With_First_ArrayEmpty()
{
  int[] a = { };
  int[] b = { 3, 2, 5 };
  int[] c = { 1, 8, };

  var result = a.Zip3(b, c, Min3);
  CollectionAssert.AreEqual(new int[0], result.ToArray());
}

[TestMethod]
public void Zip_With_All_Arrays_Empty()
{
  int[] a = { };
  int[] b = { };
  int[] c = { };

  var result = a.Zip3(b, c, Min3);
  CollectionAssert.AreEqual(new int[0], result.ToArray());
} 
```

# jquery - ajaxSubmit 选项成功和错误功能不会被触发（Wordpress）

> ID：13415094
> 
> 赞同：1
> 
> 时间：2012-11-16T10:51:12.177
> 
> 标签：jquery, wordpress, forms

*   jQuery 1.7.2
*   jQuery 验证 1.1.0
*   jQuery 表单 3.18
*   WordPress 3.4.2

我正在尝试在上面的环境中/使用上面的 jQuery 库编写联系人/邮件表单。现在我遇到了 jQuery Form JS 的问题：

我已经从开发人员页面获取了原始代码，`ajaxSubmit`并且仅将目标选项更改为我的 HTML 源代码中存在的 ID，并`$`在 function 中替换为 jQuery `showRequest`。

问题是，以命名的函数`success:`不会触发。我尝试了同样的方法`error:`，但又没有被解雇。

只做`complete:`了，我放在那里的功能`responseText`从接收脚本发出警报。

有谁知道出了什么问题？

### 代码：

```
jQuery(document).ready(function() {
var options = { 
    target:        '#mail-status',   // target element(s) to be updated with server response 
    beforeSubmit:  showRequest,  // pre-submit callback 
    success:       showResponse,  // post-submit callback 

    // other available options: 
    //url:       url         // override for form's 'action' attribute 
    //type:      type        // 'get' or 'post', override for form's 'method' attribute 
    //dataType:  null        // 'xml', 'script', or 'json' (expected server response type) 
    //clearForm: true        // clear all form fields after successful submit 
    //resetForm: true        // reset the form after successful submit 

    // $.ajax options can be used here too, for example: 
    //timeout:   3000 
};
jQuery("#mailform").validate(
{
    submitHandler: function(form)   { jQuery(form).ajaxSubmit(options); },
    errorPlacement: function(error, element) { },
    rules: {
        author: {
            minlength: 2,
            required: true
        },
        email: {
            required: true,
            email: true
        },
        comment: {
            minlength: 2,
            required: true
        }
    },
    highlight: function(element) 
    {
        jQuery(element).addClass("e");
        jQuery(element.form).find("label[for=" + element.id + "]").addClass("e");
    },
    unhighlight: function(element) 
    {
        jQuery(element).removeClass("e");
        jQuery(element.form).find("label[for=" + element.id + "]").removeClass("e");
    }
});
});
// pre-submit callback 
function showRequest(formData, jqForm, options) { 
// formData is an array; here we use $.param to convert it to a string to display it 
// but the form plugin does this for you automatically when it submits the data 
var queryString = jQuery.param(formData); 

// jqForm is a jQuery object encapsulating the form element.  To access the 
// DOM element for the form do this: 
// var formElement = jqForm[0]; 

alert('About to submit: \n\n' + queryString); 

// here we could return false to prevent the form from being submitted; 
// returning anything other than false will allow the form submit to continue 
return true; 
} 
// post-submit callback 
function showResponse(responseText, statusText, xhr, $form)  { 
// for normal html responses, the first argument to the success callback 
// is the XMLHttpRequest object's responseText property 

// if the ajaxSubmit method was passed an Options Object with the dataType 
// property set to 'xml' then the first argument to the success callback 
// is the XMLHttpRequest object's responseXML property 

// if the ajaxSubmit method was passed an Options Object with the dataType 
// property set to 'json' then the first argument to the success callback 
// is the json data object returned by the server 

alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + 
    '\n\nThe output div should have already been updated with the responseText.'); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:57:36.573

查看验证是否成功并被`jQuery(form).ajaxSubmit(options);`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-22T19:49:17.193

[这是原始提问者作为编辑添加的，我已将其转换为社区 wiki 答案，因为它应该是答案，而不是编辑。]

找到原因/错误。这是由我将 jquery.form.js 排队的方式引起的，我将其存储在主题的子目录中。

我将“jquery-form”作为 wp_enqueue_script 中的句柄传递。“jquery-form”已由 WP 分配并连接到包含 jquery.form.js 的 WP。包含的版本（2.x）不支持我通过的选项。

我必须取消注册分配的脚本并将句柄注册到存储在我的主题中的当前 jquery.form.js。

# java - 分布式缓存架构

> ID：13415098
> 
> 赞同：0
> 
> 时间：2012-11-16T10:51:42.290
> 
> 标签：java, architecture, memcached

在我的应用程序中，我正在获取提要（以 XML 的形式）。我需要将这些提要推送到 memcached。饲料预计将持续 24 小时。原因是，需要在此缓存上进行一些匹配过程。我的问题是如果缓存服务器崩溃，我的所有数据都会丢失。我无法找回它。我正在考虑有一个消息队列，以便提要首先进入消息队列，然后流向 Memcached 服务器。这样即使缓存服务器崩溃，数据仍然在消息队列中。

这是一个更好的解决方案，并且可以有更好的解决方案。

问候， Debasish

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:22:08.727

一般来说，消息队列保证按 FIFO 顺序传递消息。一旦客户端以成功状态响应，队列将丢弃消息（并且应该）。因此，它不能用作持久存储。

您需要像数据库这样的持久存储来备份消息并在故障恢复阶段将它们加载到缓存中。

# php - mercadopago 支付网关中的 md5 无效？

> ID：13415106
> 
> 赞同：0
> 
> 时间：2012-11-16T10:52:46.673
> 
> 标签：php, json, sdk, payment-gateway

我在 mercedopago 支付网关有问题。我正在使用以下代码进行付款

```
<?php
 $data = array (
// Required
"item_title" => "item name",
"item_quantity" => "1",
"item_unit_price" => "1.00",
"item_currency_id" => "BsF", //Argentina: ARS, Brasil: BRL

// Optional
"item_id" => "CODE_012",
"item_description" => "item description",
"item_picture_url" => "item image",
"external_reference" => "BILL_001",
"payer_name" => "name",
"payer_surname" => "surname",
"payer_email" => "aaa@gmail.com",
"back_url_success" => "www.website.com?success",
"back_url_pending" => "www.website.com?pending");

$md5String = "client_id".                    
        "client_secret".                
        $data["item_quantity"].                 // item_quantity
        $data["item_currency_id"].              // item_currency_id
        $data["item_unit_price"].               // item_unit_price
        $data["item_id"].                       // item_id
        $data["external_reference"];            // external_reference
$md5 = md5($md5String);
?> 
```

如果我使用 currency_code 作为 ARS 或 BRL，它可以正常工作。但是当我使用 BsF(venezuelan bolivar) 它不应该正常运行它显示为无效 md5 如下，

> 操作，algo deu errado 无效 md5。Feche etente novamente。

我还为委内瑞拉创建了个人账户。但它不起作用。付款方式如下

```
<form action="https://www.mercadopago.com/checkout/init" method="post" enctype="application/x-www-form-urlencoded" target="">

        <input type="hidden" name="client_id" value="client_id"/>

        <!-- Hash MD5 -->
        <input type="hidden" name="md5" value="<?php echo $md5 ?>"/>

        <!-- Required -->
        <input type="hidden" name="item_title" value="<?php echo $data["item_title"]?> "/>
        <input type="hidden" name="item_quantity" value="<?php echo $data["item_quantity"]?>"/>
        <input type="hidden" name="item_currency_id" value="<?php echo $data["item_currency_id"]?>"/>
        <input type="hidden" name="item_unit_price" value="<?php echo $data["item_unit_price"]?>"/>

        <!-- Optional -->
        <input type="hidden" name="item_id" value="<?php echo $data["item_id"]?>"/>
        <input type="hidden" name="external_reference" value="<?php echo $data["external_reference"]?>"/>
        <input type="hidden" name="item_picture_url" value="<?php echo $data["item_picture_url"]?>"/>
        <input type="hidden" name="payer_name" value="<?php echo $data["payer_name"]?>"/>
        <input type="hidden" name="payer_surname" value="<?php echo $data["payer_surname"]?>"/>
        <input type="hidden" name="payer_email" value="<?php echo $data["payer_email"]?>"/>
        <input type="hidden" name="back_url_success" value="<?php echo $data["back_url_success"]?>"/>
        <input type="hidden" name="back_url_pending" value="<?php echo $data["back_url_pending"]?>"/>

        <!-- Checkout Button -->
        <button type="submit" class="lightblue-rn-m-tr-arall" name="MP-Checkout">Pagar</button>
    </form> 
```

上述表格应用于付款。请任何人帮助我如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:56:24.410

委内瑞拉目前不提供与 md5 的集成。很有可能从一月份开始供货。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:05:55.300

您必须编辑该字段：

```
<input type="hidden" name="client_id" value="client_id"/> 
```

使用您的 client_id

# css - 输出screen.css

> ID：13415107
> 
> 赞同：2
> 
> 时间：2012-11-16T10:52:47.807
> 
> 标签：css, sass, susy-compass

我已经用 Susy 配置了我的第一个指南针项目。

在我的**`screen.scss`**，我有以下代码：

```
// container([$<media-layout>]*)
.page { @include container; 
        @include susy-grid-background; //use it for background-image to see width all columns 
}

// span-columns(<$columns> [<omega> , <$context>, <$padding>, <$from>])
nav { @include span-columns(5,5); //span 5 from 5 columns
    li{float:left;padding:0 1em 0 0;}
}
article { @include span-columns(5 omega,5); //span 5 from 5 columns , <omega>: Optional flag to signal the last element in a row.
} 
```

输出**`screen.css`**结果为：

```
nav {
  width: 100%;
  float: left;
  margin-right: 4.16667%;
  display: inline;
}
/* line 24, ../sass/screen.scss */
nav li {
  float: left;
  padding: 0 1em 0 0;
}

/* line 26, ../sass/screen.scss */
article {
  width: 100%;
  float: right;
  margin-right: 0;
  #margin-left: -1em;
  display: inline;
} 
```

问题1：在文章块中省略omega属性时**`screen.scss`**，我没有这个' **`#margin-left: -1em;`**'。这是什么意思？

问题2：所有元素都设置了一个width属性。由于所有块都内联显示，因此此处是否允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:59:45.623

当您跨越网格的整个宽度 (5/5) 时，您根本不需要使用任何 mixin - 因为这是所有块 html 元素（导航、文章等）默认执行的操作。因此，在您的情况下，您可以完全删除导航/文章代码（尽管您可能需要导航的 clearfix）。

您的其他问题与 Internet Explorer 旧版支持黑客有关，您可以使用 Compass 设置`$legacy-support-for-ie6`和`$legacy-support-for-ie7`.

1.  灵活的布局迫使浏览器偶尔进行亚像素舍入。IE6 和 7 在这种舍入方面存在问题，有时它们会破坏布局，因此我们为那些带有隐藏负边距的浏览器腾出额外空间：`#margin-left: -1em;`. 这`#`是一个只有 IE6 和 IE7 才能看穿的 hack。

2.  `display: inline;`对浮动元素没有影响，这就是为什么我们仍然可以应用宽度和其他块样式。但是在 IE6 中，设置一个浮点数来`inline`修复双倍边距错误。

# wpf - WPF：用复选框绑定标志

> ID：13415108
> 
> 赞同：2
> 
> 时间：2012-11-16T10:52:48.607
> 
> 标签：wpf, binding

我写了这个枚举（**标志**）：

```
using System;
namespace AndreyBushman.AutoCAD {
    // Specifies, how and when .NET application will load. 
    // It is a flag.
    [Flags]
    public enum LoadCtrls {
        // Load application upon detection of proxy object
        AtProxyFound = 1,
        // Load the application at startup
        AtAutoCADStart = 2,
        // Load the application at start of a command
        AtCommandStart = 4,
        // Load the application at the request of a user 
        // or another application
        AtUserOrApplicationRequirement = 8,
        // Do not load the application
        NotLoad = 16,
        // Load the application transparently
        TransparencyLoad = 32,
    }
} 
```

现在我已经创建`StackPanel`了`CheckBox`项目：

```
<StackPanel x:Name="stackAllUsersLoadCtrls">
    <CheckBox Margin="2">At proxy found</CheckBox>
    <CheckBox Margin="2">At AutoCAD start</CheckBox>
    <CheckBox Margin="2">At command start</CheckBox>
    <CheckBox Margin="2">At user or application requirement</CheckBox>
    <CheckBox Margin="2">Not load</CheckBox>
    <CheckBox Margin="2">Transparency load</CheckBox>
</StackPanel> 
```

结果画面：

![在此处输入图像描述](../Images/49f147132ac79fd5827d8de031b4463d.png)

如何将`LoadCtrls`（它是一个**标志**）的实例与`CheckBox`项目绑定？

**UPD** 我已经重写了我的代码（添加了包装器、重写了转换器和 XAML）：

包装：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using ab = AndreyBushman.AutoCAD;
using System.ComponentModel;

namespace AcadLoadManaged {

    public sealed class LoadCtrlsWrapper : INotifyPropertyChanged {
        ab.LoadCtrls loadCtrls;

        public ab.LoadCtrls GetloadCtrls() {
            return loadCtrls;
        }
        public LoadCtrlsWrapper() {
            loadCtrls = default(ab.LoadCtrls);
        }
        public LoadCtrlsWrapper(ab.LoadCtrls loadCtrls) {
            this.loadCtrls = loadCtrls;
        }

        public Boolean AtAutoCADStart {
            get {
                return (loadCtrls & ab.LoadCtrls.AtAutoCADStart) != 0;
            }
            set {
                if (value)
                    loadCtrls |= ab.LoadCtrls.AtAutoCADStart;
                else
                    loadCtrls &= ~ab.LoadCtrls.AtAutoCADStart;
                OnPropertyChanged("AtAutoCADStart");
            }
        }

        public Boolean AtCommandStart {
            get {
                return (loadCtrls & ab.LoadCtrls.AtCommandStart) != 0;
            }
            set {
                if (value)
                    loadCtrls |= ab.LoadCtrls.AtCommandStart;
                else
                    loadCtrls &= ~ab.LoadCtrls.AtCommandStart;
                OnPropertyChanged("AtCommandStart");
            }
        }

        public Boolean AtProxyFound {
            get {
                return (loadCtrls & ab.LoadCtrls.AtProxyFound) != 0;
            }
            set {
                if (value)
                    loadCtrls |= ab.LoadCtrls.AtProxyFound;
                else
                    loadCtrls &= ~ab.LoadCtrls.AtProxyFound;
                OnPropertyChanged("AtProxyFound");
            }
        }

        public Boolean AtUserOrApplicationRequirement {
            get {
                return (loadCtrls & ab.LoadCtrls.AtUserOrApplicationRequirement) != 0;
            }
            set {
                if (value)
                    loadCtrls |= ab.LoadCtrls.AtUserOrApplicationRequirement;
                else
                    loadCtrls &= ~ab.LoadCtrls.AtUserOrApplicationRequirement;
                OnPropertyChanged("AtUserOrApplicationRequirement");
            }
        }

        public Boolean NotLoad {
            get {
                return (loadCtrls & ab.LoadCtrls.NotLoad) != 0;
            }
            set {
                if (value)
                    loadCtrls |= ab.LoadCtrls.NotLoad;
                else
                    loadCtrls &= ~ab.LoadCtrls.NotLoad;
                OnPropertyChanged("NotLoad");
            }
        }

        public Boolean TransparencyLoad {
            get {
                return (loadCtrls & ab.LoadCtrls.TransparencyLoad) != 0;
            }
            set {
                if (value)
                    loadCtrls |= ab.LoadCtrls.TransparencyLoad;
                else
                    loadCtrls &= ~ab.LoadCtrls.TransparencyLoad;
                OnPropertyChanged("TransparencyLoad");
            }
        }

        void OnPropertyChanged(String propertyName) {
            PropertyChangedEventHandler temp = PropertyChanged;
            if (null != temp)
                temp(this, new PropertyChangedEventArgs(propertyName));
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

转换器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Data;
using ab = AndreyBushman.AutoCAD;

namespace AcadLoadManaged {

    public sealed class LoadCtrlsConverter : IValueConverter {

        public object Convert(object value, Type targetType, object parameter, 
            System.Globalization.CultureInfo culture) {
            ab.LoadCtrls x = (ab.LoadCtrls)value;
            return new LoadCtrlsWrapper(x);
        }

        public object ConvertBack(object value, Type targetType, object parameter, 
            System.Globalization.CultureInfo culture) {
            LoadCtrlsWrapper x = (LoadCtrlsWrapper)value;
            return x.GetloadCtrls();
        }
    }
} 
```

XAML：

```
<GroupBox Grid.Row="4" Header="Load this plugin, when...:" Grid.Column="0" 
          Grid.ColumnSpan="2" Padding="3">
    <GroupBox.DataContext>
        <Binding ElementName="lstAllUsers" Path="SelectedItem.LoadCtrls" Mode="TwoWay">
            <Binding.Converter>
                <local:LoadCtrlsConverter/>
            </Binding.Converter>
        </Binding>
    </GroupBox.DataContext>
    <StackPanel>
        <CheckBox Margin="2" Content="At proxy found" IsChecked="{Binding Path=AtProxyFound}"/>
        <CheckBox Margin="2" Content="At AutoCAD start" IsChecked="{Binding Path=AtAutoCADStart}"/>
        <CheckBox Margin="2" Content="At command start" IsChecked="{Binding Path=AtCommandStart}"/>
        <CheckBox Margin="2" Content="At user or application requirement" 
                  IsChecked="{Binding Path=AtUserOrApplicationRequirement}"/>
        <CheckBox Margin="2" Content="Not load" IsChecked="{Binding Path=NotLoad}"/>
        <CheckBox Margin="2" Content="Transparency load" IsChecked="{Binding Path=TransparencyLoad}"/>
    </StackPanel>
</GroupBox> 
```

但我的绑定只有一种方式。如果我修改`CheckBox`值 - 它们不会保存。我已经在`ConvertBack`方法上尝试过断点，但它没有发生。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-13T11:24:06.220

有类似的需求，这是我的双向标志绑定方法。没有硬编码的枚举类型或任何类型的值。只需设置 TargetType 和 Flags。非常适合设置窗口。

用法：

```
<TextBox Text="{Binding ElementName=flagsCtrl, Path=Flags, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
<local:FlagsControl x:Name="flagsCtrl" TargetType="{x:Type local:TestFlags}" SelectionMode="Multiple"/> 
```

标志控制：

```
using System;
using System.Collections.ObjectModel;
using System.Reflection;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace FlagsControlDemoApplication
{
    public class FlagsControl : ItemsControl
    {
        public FlagsControl()
        {
            DataProvider = new ObservableCollection<Model>();

            Loaded += OnControlLoaded;
        }

        private void OnControlLoaded(object sender, RoutedEventArgs e)
        {
            Loaded -= OnControlLoaded;

            Binding isCheckedBinding = new Binding();
            isCheckedBinding.Path = new PropertyPath(Model.IsCheckedProperty);
            isCheckedBinding.Mode = BindingMode.TwoWay;
            isCheckedBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

            Binding nameBinding = new Binding();
            nameBinding.Path = new PropertyPath(Model.NameProperty);
            nameBinding.Mode = BindingMode.TwoWay;
            nameBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;

            var checkBoxFactory = new FrameworkElementFactory(typeof(CheckBox));
            checkBoxFactory.SetValue(CheckBox.IsCheckedProperty, isCheckedBinding);
            checkBoxFactory.SetValue(CheckBox.ContentProperty, nameBinding);
            checkBoxFactory.AddHandler(CheckBox.CheckedEvent, new RoutedEventHandler(OnCheckBoxChecked));
            checkBoxFactory.AddHandler(CheckBox.UncheckedEvent, new RoutedEventHandler(OnCheckBoxUnchecked));

            ItemTemplate = new DataTemplate(typeof(CheckBox));
            ItemTemplate.VisualTree = checkBoxFactory;
            ItemsSource = DataProvider;
        }

        public FlagSelectionMode SelectionMode
        {
            get { return (FlagSelectionMode)GetValue(SelectionModeProperty); }
            set { SetValue(SelectionModeProperty, value); }
        }
        public static readonly DependencyProperty SelectionModeProperty =
            DependencyProperty.Register(nameof(SelectionMode), typeof(FlagSelectionMode), typeof(FlagsControl), new PropertyMetadata(FlagSelectionMode.Multiple));

        public ObservableCollection<Model> DataProvider
        {
            get { return (ObservableCollection<Model>)GetValue(DataProviderProperty); }
            set { SetValue(DataProviderProperty, value); }
        }
        public static readonly DependencyProperty DataProviderProperty =
            DependencyProperty.Register(nameof(DataProvider), typeof(ObservableCollection<Model>), typeof(FlagsControl), new PropertyMetadata(null));

        public uint Flags
        {
            get { return (uint)GetValue(ValueProperty); }
            set { SetValue(ValueProperty, value); }
        }
        public static readonly DependencyProperty ValueProperty =
            DependencyProperty.Register(nameof(Flags), typeof(uint), typeof(FlagsControl), new PropertyMetadata(OnValuePropertyChanged));

        private static void OnValuePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            foreach (var model in ((FlagsControl)d).DataProvider)
            {
                var val = (uint)Convert.ChangeType(e.NewValue, typeof(uint));

                if (Exists(val, model.Value) != model.IsChecked)
                {
                    model.IsChecked = !model.IsChecked;
                }
            }
        }

        public Type TargetType
        {
            get { return (Type)GetValue(TargetTypeProperty); }
            set { SetValue(TargetTypeProperty, value); }
        }
        public static readonly DependencyProperty TargetTypeProperty =
            DependencyProperty.Register(nameof(TargetType), typeof(Type), typeof(FlagsControl), new PropertyMetadata(null, new PropertyChangedCallback(OnTargetTypePropertyChanged)));

        private static void OnTargetTypePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var provider = ((FlagsControl)d).DataProvider;

            FieldInfo[] fields = ((Type)e.NewValue).GetFields(BindingFlags.Public | BindingFlags.Static);

            provider.Clear();

            foreach (var field in fields)
            {
                var fieldValue = (uint)Convert.ChangeType(field.GetValue(null), typeof(uint));

                provider.Add(new Model() { Name = field.Name, IsChecked = Exists(((FlagsControl)d).Flags, fieldValue), Value = fieldValue });
            }

            ((FlagsControl)d).DataProvider = provider;
        }

        private void OnCheckBoxChecked(object sender, RoutedEventArgs e)
        {
            if (SelectionMode == FlagSelectionMode.Multiple)
                Flags = Add(Flags, ((Model)((CheckBox)sender).DataContext).Value);
            else Flags = ((Model)((CheckBox)sender).DataContext).Value;
        }
        private void OnCheckBoxUnchecked(object sender, RoutedEventArgs e)
        {
            Flags = Remove(Flags, ((Model)((CheckBox)sender).DataContext).Value);
        }

        public static bool Exists(uint flags, uint flag) => (flags & flag) == flag;
        public static uint Add(uint flags, uint flag) => flags |= flag;
        public static uint Remove(uint flags, uint flag) => Exists(flags, flag) ? flags ^ flag : flags;
    }

    public enum FlagSelectionMode
    {
        Multiple, Single
    }

    public class Model : DependencyObject
    {
        public bool IsChecked
        {
            get { return (bool)GetValue(IsCheckedProperty); }
            set { SetValue(IsCheckedProperty, value); }
        }
        public static readonly DependencyProperty IsCheckedProperty =
            DependencyProperty.Register(nameof(IsChecked), typeof(bool), typeof(Model));

        public string Name
        {
            get { return (string)GetValue(NameProperty); }
            set { SetValue(NameProperty, value); }
        }
        public static readonly DependencyProperty NameProperty =
            DependencyProperty.Register(nameof(Name), typeof(string), typeof(Model));

        public uint Value
        {
            get { return (uint)GetValue(ValueProperty); }
            set { SetValue(ValueProperty, value); }
        }
        public static readonly DependencyProperty ValueProperty =
            DependencyProperty.Register(nameof(Value), typeof(uint), typeof(Model));
    }
} 
```

[DemoApp & 源代码](http://1drv.ms/1MvGWD6 "演示应用")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:31:14.437

要使`Model`(LoadCtrls)适应`View`(XAML)，请使用`ViewModel`.

```
public class ApplicationSettingsViewModel :
    MyViewModelBaseImplementingINotifyPropertyChanged {

    public ApplicationSettingsViewModel(ApplicationSettings model)
    {
      m_model = model;
      m_model.PropertyChanged += OnModelPropertyChanged;
    }

    ... OnModelPropertyChanged(object sender, WhateverArgs e)
    {
      switch(e.PropertyName)
      {
        ...
        case "Load":
          RaisePropertyChanged("IsAtProxyFoundSet");
          RaisePropertyChanged("IsAtAutoCADStartSet");
          ...
          break;
        ...
      }
    }

    ...
    public bool IsAtProxyFoundSet
    {
       get { return m_model.Load & LoadCtrls.AtProxyFound; }
       set { m_model.Load |= LoadCtrls.AtProxyFound; }
    }

    public bool IsAtAutoCADStartSet
    {
       get { return m_model.Load & LoadCtrls.AtAutoCADStart; }
       set { m_model.Load |= LoadCtrls.AtAutoCADStart; }
    }

    ...
} 
```

**更新**

这是一个更新的示例：

```
public sealed class UserWrapper {

    private User m_user;

    public UserWrapper(User user) {
        m_user = user;
    }

    public Boolean AtAutoCADStart {
        get {
            return (m_user.loadCtrls & ab.LoadCtrls.AtAutoCADStart) != 0;
        }
        set {
            if (value)
                m_user.loadCtrls |= ab.LoadCtrls.AtAutoCADStart;
            else
                m_user.loadCtrls &= ~ab.LoadCtrls.AtAutoCADStart;
        }
    }

    public Boolean AtCommandStart {
        get {
            return (m_user.loadCtrls & ab.LoadCtrls.AtCommandStart) != 0;
        }
        set {
            if (value)
                m_user.loadCtrls |= ab.LoadCtrls.AtCommandStart;
            else
                m_user.loadCtrls &= ~ab.LoadCtrls.AtCommandStart;
        }
    }

    public Boolean AtProxyFound {
        get {
            return (m_user.loadCtrls & ab.LoadCtrls.AtProxyFound) != 0;
        }
        set {
            if (value)
                m_user.loadCtrls |= ab.LoadCtrls.AtProxyFound;
            else
                m_user.loadCtrls &= ~ab.LoadCtrls.AtProxyFound;
        }
    }

    public Boolean AtUserOrApplicationRequirement {
        get {
            return (m_user.loadCtrls & ab.LoadCtrls.AtUserOrApplicationRequirement) != 0;
        }
        set {
            if (value)
                m_user.loadCtrls |= ab.LoadCtrls.AtUserOrApplicationRequirement;
            else
                m_user.loadCtrls &= ~ab.LoadCtrls.AtUserOrApplicationRequirement;
        }
    }

    public Boolean NotLoad {
        get {
            return (m_user.loadCtrls & ab.LoadCtrls.NotLoad) != 0;
        }
        set {
            if (value)
                m_user.loadCtrls |= ab.LoadCtrls.NotLoad;
            else
                m_user.loadCtrls &= ~ab.LoadCtrls.NotLoad;
        }
    }

    public Boolean TransparencyLoad {
        get {
            return (m_user.loadCtrls & ab.LoadCtrls.TransparencyLoad) != 0;
        }
        set {
            if (value)
                m_user.loadCtrls |= ab.LoadCtrls.TransparencyLoad;
            else
                m_user.loadCtrls &= ~ab.LoadCtrls.TransparencyLoad;
        }
    }

} 
```

转换器：

```
 public sealed class UserToUserWrapperConverter : IValueConverter {

        public object Convert(object value, Type targetType, object parameter, 
            System.Globalization.CultureInfo culture) {
              return new UserWrapper((User)value);
        }

        public object ConvertBack(object value, Type targetType, object parameter, 
            throw new Exception(); // never called
        }
    }
} 
```

XAML：

```
<GroupBox Grid.Row="4" Header="Load this plugin, when...:" Grid.Column="0" 
          Grid.ColumnSpan="2" Padding="3">
    <GroupBox.DataContext>
        <Binding ElementName="lstAllUsers" Path="SelectedItem">
            <Binding.Converter>
                <local:UserToUserWrapperConverter/>
            </Binding.Converter>
        </Binding>
    </GroupBox.DataContext>
    <StackPanel>
        <CheckBox Margin="2" Content="At proxy found" IsChecked="{Binding Path=AtProxyFound}"/>
        <CheckBox Margin="2" Content="At AutoCAD start" IsChecked="{Binding Path=AtAutoCADStart}"/>
        <CheckBox Margin="2" Content="At command start" IsChecked="{Binding Path=AtCommandStart}"/>
        <CheckBox Margin="2" Content="At user or application requirement" 
                  IsChecked="{Binding Path=AtUserOrApplicationRequirement}"/>
        <CheckBox Margin="2" Content="Not load" IsChecked="{Binding Path=NotLoad}"/>
        <CheckBox Margin="2" Content="Transparency load" IsChecked="{Binding Path=TransparencyLoad}"/>
    </StackPanel>
</GroupBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T19:11:03.107

由于枚举标志与其枚举值之间的依赖关系，我使用自定义复选框并绑定 2 个属性。

这是我的代码（我在生产中成功使用它，并且使用起来非常简单 - 请参阅课程顶部的评论）。

你喜欢它吗 ？

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace HQ.Wpf.Util.MyControl
{
    /// <summary>
    /// Usage: Bind on EnumFlag and Two way binding on EnumValue instead of IsChecked
    /// Example: <myControl:CheckBoxForEnumWithFlagAttribute 
    ///                 EnumValue="{Binding SimulationNatureTypeToCreateStatsCacheAtEndOfSimulation, Mode=TwoWay}" 
    ///                 EnumFlag="{x:Static Core:SimulationNatureType.LoadFlow }">Load Flow results</myControl:CheckBoxForEnumWithFlagAttribute>
    /// </summary>
    public class CheckBoxForEnumWithFlagAttribute : CheckBox
    {
        // ************************************************************************
        public static DependencyProperty EnumValueProperty =
            DependencyProperty.Register("EnumValue", typeof(object), typeof(CheckBoxForEnumWithFlagAttribute), new PropertyMetadata(EnumValueChangedCallback));

        public static DependencyProperty EnumFlagProperty =
            DependencyProperty.Register("EnumFlag", typeof(object), typeof(CheckBoxForEnumWithFlagAttribute), new PropertyMetadata(EnumFlagChangedCallback));

        // ************************************************************************
        public CheckBoxForEnumWithFlagAttribute()
        {
            base.Checked += CheckBoxForEnumWithFlag_Checked;
            base.Unchecked += CheckBoxForEnumWithFlag_Unchecked;
        }

        // ************************************************************************
        private static void EnumValueChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
        {
            var checkBoxForEnumWithFlag = dependencyObject as CheckBoxForEnumWithFlagAttribute;
            if (checkBoxForEnumWithFlag != null)
            {
                checkBoxForEnumWithFlag.RefreshCheckBoxState();
            }
        }

        // ************************************************************************
        private static void EnumFlagChangedCallback(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
        {
            var checkBoxForEnumWithFlag = dependencyObject as CheckBoxForEnumWithFlagAttribute;
            if (checkBoxForEnumWithFlag != null)
            {
                checkBoxForEnumWithFlag.RefreshCheckBoxState();
            }
        }

        // ************************************************************************
        public object EnumValue
        {
            get { return GetValue(EnumValueProperty); }
            set { SetValue(EnumValueProperty, value); }
        }

        // ************************************************************************
        public object EnumFlag
        {
            get { return GetValue(EnumFlagProperty); }
            set { SetValue(EnumFlagProperty, value); }
        }

        // ************************************************************************
        private void RefreshCheckBoxState()
        {
            if (EnumValue != null)
            {
                if (EnumValue is Enum)
                {
                    Type underlyingType = Enum.GetUnderlyingType(EnumValue.GetType());
                    dynamic valueAsInt = Convert.ChangeType(EnumValue, underlyingType);
                    dynamic flagAsInt = Convert.ChangeType(EnumFlag, underlyingType);

                    base.IsChecked = ((valueAsInt & flagAsInt) > 0);
                }
            }
        }

        // ************************************************************************
        private void CheckBoxForEnumWithFlag_Checked(object sender, RoutedEventArgs e)
        {
            RefreshEnumValue();
        }

        // ************************************************************************
        void CheckBoxForEnumWithFlag_Unchecked(object sender, RoutedEventArgs e)
        {
            RefreshEnumValue();
        }

        // ************************************************************************
        private void RefreshEnumValue()
        {
            if (EnumValue != null)
            {
                if (EnumValue is Enum)
                {
                    Type underlyingType = Enum.GetUnderlyingType(EnumValue.GetType());
                    dynamic valueAsInt = Convert.ChangeType(EnumValue, underlyingType);
                    dynamic flagAsInt = Convert.ChangeType(EnumFlag, underlyingType);

                    dynamic newValueAsInt = valueAsInt;
                    if (base.IsChecked == true)
                    {
                        newValueAsInt = valueAsInt | flagAsInt;
                    }
                    else
                    {
                        newValueAsInt = valueAsInt & ~flagAsInt;
                    }

                    if (newValueAsInt != valueAsInt)
                    {
                        object o = Enum.ToObject(EnumValue.GetType(), newValueAsInt);

                        EnumValue = o;
                    }
                }
            }
        }

        // ************************************************************************
    }
} 
```

# c# - 多因素处理的设计模式

> ID：13415116
> 
> 赞同：1
> 
> 时间：2012-11-16T10:53:12.583
> 
> 标签：c#, design-patterns

我正在尝试为这个问题获得更好的模式/技术：

我有一组标准枚举，比如 X、Y、Z，我有一个过程应该根据给定标准的给定组合产生不同的输出/结果。

这些组合被定义为一组规则，例如：

```
rule_B = new Rule(X.Value1, Y.Value3, z.Value2);
rule_A = new Rule(X.Value2, Y.Value1, z.Value3); 
```

每个规则都定义了唯一的条件组合，并不是所有的组合都有规则（因为有些组合可能没有意义）。规则实例不起作用，它们只是将每个因素存储到唯一组合中的容器。

我的问题是如何使用单个公共接口类执行一组特定的进程，例如：

```
class RuleExecutor {
    public void ExecuteBasedOnRule(Rule rule) {
        // Here is where I am stuck!!!!!!
    }
} 
```

我可以使用哪种设计模式/技术来执行 3 个步骤：1 用于 X 的值，1 用于 Y 的值，1 用于在 RuleExecutor 内的 Z，每个步骤都根据其步骤值执行不同的过程。在 C++ 中，我可能会使用模板专业化，但 C# 似乎对我没有帮助。

*注意：在这个复杂的例子中，有 3 个因素和一小部分可能的值，在我想要做的项目中，这些因素非常大，为每个可能的组合创建一个具体的类并不是我会轻易考虑的事情！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:08:45.240

命令模式似乎很合适。您可以有 2 个执行步骤：

1.  `RuleExecutor`使用所需的`Rule`.
2.  运行`ExecuteBasedOnRule`方法`RuleExecutor`。该方法应该解析存储的配置并根据数据采取行动。

Thus, I would define an interface with 2 methods: `config(Rule)` and `execute()`.

# sql - sqlite3，按索引检索行元素的最佳方法？

> ID：13415121
> 
> 赞同：0
> 
> 时间：2012-11-16T10:53:16.263
> 
> 标签：sql, c, sqlite

我正在使用 sqlite3，表有 25 个条目。我执行：

```
select * from mytable; 
```

并使用 sqlite3_step 检索每一行，并获取列，

```
sqlite3_column_int(stmt, 5); 
```

我将索引值用作硬编码整数。我面临的问题是，如果添加了任何新表条目 [即前缀]，那么我还需要更改索引。

这不是问题，而是可维护性问题。是否有任何最佳方法/模式来实现不同的目标？好心劝告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:52:14.393

而不是`select *`使用`select col1, col2, col3...`

这样，无论表发生什么，结果列的顺序和位置都是相同的（只要所有这些列都存在......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:05:54.313

啊...

像这样的东西：

```
enum {

 COLUMN_NAME,

 COLUMN_AGE,

 COLUMN_ID,

 COLUMN_END

};

char *arr[COLUMN_END];

for (i=0; i<COLUMN_END; i++)
    arr[i] = malloc(50);

strcpy (arr[COLUMN_NAME] = "name");

strcpy (arr[COLUMN_AGE] = "age"); 
```

准备 SQL 语句：

```
sqlite_mprintf (" insert into mytable ('%s', '%s' , '%s') values ('%s',%d,%d)", arr[COLUMN_NAME], arr[COLUMN_AGE], arr[COLUMN_ID], "whoami", 10, 2323)"); 
```

检索时：

sqlite3_stmt_text（stmt，COLUMN_NAME）；

这足够了吗？

# jquery - 用于多行省略号文本的 Jquery 函数

> ID：13415131
> 
> 赞同：2
> 
> 时间：2012-11-16T10:54:04.313
> 
> 标签：jquery, html, css

我在这里创建了一个小提琴：http: [//jsfiddle.net/mupersan82/JYuSY/](http://jsfiddle.net/mupersan82/JYuSY/)

多行省略号函数：

```
$(function() {
var ellipsisText = $('.multilineEllipseText');
var textContainer = $('.incidentCellBottomRight').height();
while ($(ellipsisText).outerHeight(true) > textContainer) {
    $(ellipsisText).text(function(index, text) {
        return text.replace(/\W*\s(\S)*$/, '...');
    });
} 
```

});

该功能取自这里：[Cross browsers multi-lines text overflow with ellipsis added within a width&height fixed div?](https://stackoverflow.com/questions/3404508/cross-browsers-mult-lines-text-overflow-with-ellipsis-appended-within-a-widthhe)

该功能适用​​于多行内容，但不允许内容扩展到边缘。对于单行内容，省略号仅在一个单词之后添加。

它应该允许文本达到其父 div 的最大高度，即 100px。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T11:16:44.260

在您的代码中，您有：

```
var $ellipsisText = $('.multilineEllipseText'); 
```

这将选择所有`.multilineEllipseText`元素。但是您[`.outerHeight(true)`](http://api.jquery.com/outerHeight/)稍后会使用它，它将**仅**返回给定集合中**第一个**元素的高度。

 **所以它适用于第一个元素，但对于之后的每个元素，你都在比较错误的高度（从第一个元素开始）。

* * *

以下是您可以解决的方法：

```
var textContainerHeight= $('.incidentCellBottomRight').height();

$('.multilineEllipseText').each(function () {
  var $ellipsisText = $(this);

  while ($ellipsisText.outerHeight(true) > textContainerHeight) {
    $ellipsisText.text(function(index, text) {
      return text.replace(/\W*\s(\S)*$/, '...');
    });
  }
}); 
```

演示：http: [//jsfiddle.net/JYuSY/1/](http://jsfiddle.net/JYuSY/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:02:23.093

希望这会帮助你。( `dotdotdot`)

[http://dotdotdot.frebsite.nl/](http://dotdotdot.frebsite.nl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T16:24:05.130

我知道这个答案很老，但我想我会分享一个类似的问题和解决方案，因为它非常相关。

我有一个响应式网站，其中有一些段落需要在 3 行后截断，并添加一个链接，该链接在单击时基本上会暴露剩余的文本，出于美学原因。

因此，我将所有文本放在手边，而不是在每次屏幕尺寸发生变化时刷新页面（这是响应式的目的），这一点至关重要。

无论如何，这是我优雅的解决方案：

```
/** 
  * @name   - Ellipsify
  * @desc   - trims and adds ellipsis to element when element text height is greater than element height
  * @param  - [required] (string)identity - string containing jquery selector used to create object group (array) based on selector
  * @function : _init - calculates each element and determines need for ellipsis, then truncates text as needed
*/
var Ellipsify = function(identity) {
    if (identity) {
        this.identity = identity;
        this.group = $(this.identity);
        if (this.group.length > 0) {
            this._init();
        }
    }
};
Ellipsify.prototype = {
    _init : function() {
        var that = this;
        that.group.each(function() {
            if ($(this).children('.hidden').length > 0) {
                $(this).children(':not(.hidden)').text($(this).children(':not(.hidden)').text().replace('...',' ') + $(this).children('.hidden').text());
                $(this).children('.hidden').remove();
            }
            if ($(this).children().outerHeight() > $(this).innerHeight()) {
                $(this).append('<span class="hidden"></span>');
                while ($(this).children(':not(.hidden)').outerHeight() > $(this).innerHeight()) {
                    var paragraph = $(this).children(':not(.hidden)').text().replace('...', '');
                    var lastword = paragraph.substring(paragraph.lastIndexOf(' '));
                    $(this).children(':not(.hidden)').text(paragraph.substring(0, paragraph.lastIndexOf(' ')) + '...');
                    $(this).children('.hidden').text(lastword + $(this).children('.hidden').text());
                }
            }
        });
    },
}; 
```

HTML 如下所示：

```
<p><span>Big paragraph of text goes here.</span></p> 
```

CSS很简单：

```
p {
    font-size:1em;
    line-height:1.5em;
    height:4.5em;
    width:100%;
    overflow:hidden;
}
.hidden {
    display:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T21:09:42.770

带省略号的全字多行自动换行：http: [//jsfiddle.net/tdpLdqpo/4/](http://jsfiddle.net/tdpLdqpo/4/)

查看 JSFiddle。只需设置这两个属性：

```
var maxWidth = 300;
var maxLines = 3; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-04T07:19:21.610

```
$(".jsgrid-cell").each(function(i,v){
    var txt=$(v).text();
    if(txt.length>100){
        var shortText=txt.substring(0, 100)+
        "<span onclick='$(this).hide();$(this).next().toggle();'>"+
            "..."+
        "</span>"+
        "<span  style='display:none'>"+
            txt.substring(100, txt.length)+
        "</span>";

        $(v).html(shortText );
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-08T00:18:07.733

用于单行省略号文本的 Jquery 函数。您也可以在文本框、跨度或任何其他 DOM 元素中使用此函数进行字符计数。你只需要传递 Text (String) (DOM element Value) 和 Size (Int) (In number)

```
// Character Count Ellipsis
function EllipsisChar(text, size) {
    var len = text.length;
    if (len >= size) {
        // if text length is equal to or more than given size then add ...
        text = text.substring(0, size) + "...";
    }
    else {
        // if text length is less then do something
    }
    return text;
}; 
```

以下是如何使用的示例：

```
var EllipsisReturnText = EllipsisChar("Sample text goes here", 10); 
```

结果：

```
"Sample tex..." 
```**

# email - 使用 RallyDev - 如何通过电子邮件将缺陷记录发送给其他用户？

> ID：13415132
> 
> 赞同：1
> 
> 时间：2012-11-16T10:54:10.927
> 
> 标签：email

我们正在使用 Rally Dev - 一种敏捷的管理工具。当我提出一个缺陷时，我可以设置一个自动触发器来通知接收者已经提出了一个缺陷。但是，如果我希望将缺陷作为一次性请求发送给另一个用户，我该怎么做？

谢谢，杰米

# json - 调用 REST 服务的 JSON 格式

> ID：13415134
> 
> 赞同：0
> 
> 时间：2012-11-16T10:54:17.683
> 
> 标签：json, wcf, rest

我有一个 wcf REST 服务，它正在调用一个更新数据库中某些内容的方法。该方法接受一个参数。

让我说我是`void MarkMobileAppApplicationAsCancelled(string applicationId);`

现在我正在尝试使用来自 chrome 应用商店的一个名为 CREST 的应用来调用该服务。但我不知道如何以 Json 格式调用该方法。

有什么帮助吗？？

我有类似的东西

```
[OperationContract]
        [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "/MarkMobileAppApplicationAsConfirmed/")]
        void MarkMobileAppApplicationAsConfirmed(string applicationId); 
```

我正在尝试初始化此方法，该方法将通过设置应用程序的 application_confirmed = true 来更新我的数据库，

我在请求生成器中写了以下内容

```
https://local.blaSys.com/MobileAppWCF.svc/MarkMobileAppApplicationAsCancelled/ 
```

以及标题中的以下内容

```
content-type:application/json 
```

现在，我会在请求实体中写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:03:59.463

很可能你不想在请求中写任何东西，而是`applicationID`从 url 中获取。

您可以通过稍作修改来获得它

```
 [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped, UriTemplate = "/MarkMobileAppApplicationAsConfirmed/{applicationID}")]
    void MarkMobileAppApplicationAsConfirmed(string applicationId); 
```

Now you can simply make a standard http request (using curl/fiddler for testing and WebClient/WebRequest) in the proxy against the endpoint

[https://local.blaSys.com/MobileAppWCF.svc/MarkMobileAppApplicationAsCancelled/someApplicationId](https://local.blaSys.com/MobileAppWCF.svc/MarkMobileAppApplicationAsCancelled/someApplicationId)

Remember that the method given to the request must be `POST` as indicated in the `WebInvoke` attribute. (I guess a `PUT` would be more idiomatically correct since you must be updating a method, but that is another discussion.)

Hope this helps!

# ios - IOS：未分配类的属性

> ID：13415136
> 
> 赞同：0
> 
> 时间：2012-11-16T10:54:27.753
> 
> 标签：ios, class, uiview

我在另一个名为“one”的 UIView 中有一个 UIView，我称之为“second”。在“第二”处，我在 Inspector 身份（自定义类）中分配了一个类（类“Home.h”）。该课程在“第二”视图上工作正常，我没有问题。

我现在的问题是如何通过外部类访问 Home 的元素。如果在 Home 内我设置了一些变量（使用属性和综合）我无法从另一个类控制它们，因为它说我没有分配 Home 类......我该如何解决这种情况？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:12:44.263

我对 Objective-C 和 Xcode 也很陌生，但我相信您所要做的就是将“Home”类 (Home.h) 的头文件导入到您想要使用它的外部类中。在这个外部类，您必须实例化家庭类的对象。可能看起来像这样的东西：

```
/* File: "ExternalClass.h"
* This is the Super-View class of the "Home" class
*/

/* An example using Cocoa rather than Cocoa Touch */
#import <Cocoa/Cocoa.h>

// Imports a quick reference to the class without loading the classes methods
@class Home;

@interface ExternalClass : NSView {

/* This creates an object of class "Home" in which a pointer for the "Home" class can be stored
 * From here all you would have to do is import the 'Home.h' file to the 'ExternalClass.m' file
 * and instantiate home objects and call methods of the 'home' class within the 'ExternalClass.m' files methods
 */
Home *homeObject;

} 
```

这为要在 ExternalClass.m 中使用的“Home”类的对象声明内存......然后您必须为 HomeObject 实例变量分配 Home 类的类 'aloc' 方法，如下所示：

```
homeObject = [[alloc Home] initWithSomeProperties:var1 andMoreProperties:varEtc]; 
```

# jquery - Backbone.js on()，最后一个 this 指的是什么？

> ID：13415138
> 
> 赞同：2
> 
> 时间：2012-11-16T10:54:35.387
> 
> 标签：jquery, backbone.js

我正在学习 Backbone，我试图弄清楚我从哪个库中获取“on”功能。我以为是 jQuery，但如果是这样，我不了解 API。有人可以解释一下'on'功能或将我链接到一些文档。第一个参数是事件。第二个参数是被调用的函数。最后一个“this”指的是什么（我假设是调用类），为什么需要它？这是我直接来自 Addy Osmani 的代码，这是 AppView：

```
 initialize : function() {
        this.input = this.$('#new-todo');
        this.allCheckbox = this.$('#toggle-all')[0];
        this.$footer = this.$('#footer');
        this.$main = this.$('#main');

        window.app.Todos.on('add', this.addOne, this);
        window.app.Todos.on('reset', this.addAll, this);
        window.app.Todos.on('change:completed', this.filterOne, this);
        window.app.Todos.on("filter", this.filterAll, this);

        window.app.Todos.on('all', this.render, this);

        app.Todos.fetch();
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:12:23.670

本例中的 on 方法来自 Backbone 的 Event 模块。它接受三个参数——事件名称、函数和上下文。上下文决定了函数内部“this”的值。

`Todos.on("filter", this.filterAll, this);`你只是问在函数 filterAll 'this' 的值应该是你的视图实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:16:22.397

```
object.on(event, callback, [context]) 
```

根据[backbone.js doc](http://backbonejs.org/#Events-on)，最后一个**[context]**参数是将传递给回调函数的可选上下文。

在 Addy 的 ToDo 示例中，**this**传递了对单击的**todo视图的引用：**

```
// Add a single todo item to the list by creating a view for it, and
// appending its element to the `<ul>`.
addOne: function( todo ) {
    var view = new app.TodoView({ model: todo });
    $('#todo-list').append( view.render().el );
}, 
```

# google-maps - 黑莓 - 谷歌地图（抱歉，我们这里没有图像）

> ID：13415140
> 
> 赞同：0
> 
> 时间：2012-11-16T10:54:41.957
> 
> 标签：google-maps, blackberry, java-me

请在下面找到我在 BlackBerry 应用程序（操作系统版本 6 和 7）中使用的标记，以在谷歌地图上显示位置。

```
private String getHTMLText() {
    String HTMLText = null;
    HTMLText = "<script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=false&libraries=drawing\"></script>" + 
               "<body onload=\"initialize();\" topmargin=\"0\" leftmargin=\"0\">" + 
               "<div id=\"map_canvas\" style=\"width:" + Display.getWidth() + "px; height:" + Display.getHeight() + "px;\">" + 
               "</body>" + 
               "<script type=\"text/javascript\">" + 
               "var Coordinates= [];" + 
               "var locations = [" + getLocatinText() + 
               "];" + 
               "var map = new google.maps.Map(document.getElementById('map_canvas'), {" + 
               "zoom: " + iZoom + "," +
               "center: new google.maps.LatLng" + getCenterLocationText() + "," + 
               "mapTypeId: google.maps.MapTypeId.ROADMAP" + 
               "});" + 
               "var marker, i;" + 
               "marker = new google.maps.Marker({position: new google.maps.LatLng" + getCenterLocationText() + 
               ", map: map,icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|ff0084|ffffff'});" + 
               "for (i = 0; i < 1; i++) {" + 
               "marker = new google.maps.Marker({" + 
               "position: new google.maps.LatLng(locations[i][0], locations[i][1])," + 
               "map: map" + 
               "});" + 
               "Coordinates.push( new google.maps.LatLng(locations[i][0], locations[i][1]) );" + 
               "}" + 
               /*"var flightPath = new google.maps.Polyline({" + 
               "path: Coordinates," + 
               "strokeColor: \"#FF0000\"," + 
               "strokeOpacity: 0.7," + 
               "strokeWeight: 1" + 
               "});" +*/

               "</script>";

    return HTMLText;

} 
```

在每张图片上，虽然地图加载正确，但它会在顶部显示文字**“对不起，我们这里没有图像”**。

但是，在任何浏览器中使用的相同代码都会正确显示。

![在此处输入图像描述](../Images/5e018f402e55546a6d5170a9c24d69fb.png)

我将非常感谢任何反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:18:44.197

尝试这个 -

```
StringBuffer html;
                String initial = "<!DOCTYPE html>\r\n" +
                "<html> \r\n" +
                "<head> \r\n" +
                "  <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\" /> \r\n" +
                "  <title>Google Maps Multiple Markers</title> \r\n" +
                "  <script src=\"http://maps.google.com/maps/api/js?sensor=true\" \r\n" +
                "          type=\"text/javascript\"></script>\r\n" +
                "</head> \r\n" +
                "<body>\r\n" +
                "  <div id=\"map\" style=\"width: 620px; height: 358px;\"></div>\r\n" +
                "\r\n" +
                "  <script type=\"text/javascript\">\r\n" +
                "    var locations = [";
        String second= " ];\r\n" +
                "\r\n" +
                "    var map = new google.maps.Map(document.getElementById('map'), {\r\n" +
                "      zoom: 8,";
        String centerPoint ="";
        String finalpart = " mapTypeId: google.maps.MapTypeId.ROADMAP\r\n" +
                "    });\r\n" +
                "\r\n" +
                "    var infowindow = new google.maps.InfoWindow();\r\n" +
                "\r\n" +
                "    var marker, i;\r\n" +
                "\r\n" +
                "    for (i = 0; i < locations.length; i++) {  \r\n" +
                "      marker = new google.maps.Marker({\r\n" +
                "        position: new google.maps.LatLng(locations[i][1], locations[i][2]),\r\n" +
                "        map: map\r\n" +
                "      });\r\n" +
                "\r\n" +
                "      google.maps.event.addListener(marker, 'click', (function(marker, i) {\r\n" +
                "        return function() {\r\n" +
                "          infowindow.setContent(locations[i][0]);\r\n" +
                "         \r\n" +
                "        }\r\n" +
                "      })(marker, i));\r\n" +
                "    }\r\n" +
                "  </script>\r\n" +
                "</body>\r\n" +
                "</html>";

            html=new StringBuffer();
            html.append(initial);
            String point = "['"+""+"',"+lattitude+","+longitude+","+""+"],";
            html.append(point);
            centerPoint = "  center: new google.maps.LatLng("+lattitude+","+longitude+"),";

               html.append(second);
               html.append(centerPoint);
               html.append(finalpart);
               //System.out.println("Plot is"+html.toString());
               BrowserFieldConfig _bfConfig = new BrowserFieldConfig();        
              _bfConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
              _bfConfig.setProperty( BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE );
              _bfConfig.setProperty(BrowserFieldConfig.USER_AGENT, "MyApplication 1.0");
              BrowserField myBrowserField = new BrowserField(_bfConfig);
              myBrowserField.displayContent(html.toString(), "");
              add(myBrowserField); 
```

# sql - 表格中的数据驱动单元格

> ID：13415145
> 
> 赞同：1
> 
> 时间：2012-11-16T10:54:57.923
> 
> 标签：sql, asp.net, vb.net, html-table

我对 ASP.net 相当陌生，这是我的第一篇文章，如果我做错了什么，请见谅。
我目前正在尝试创建一个有 8 行和 2 列的表。
我遇到的主要问题是，我需要使用特定的 sql 查询从 sql 数据库中检索第二列中的数据。

我已经通过使用单独的 sqldatasources 并在第二列中为每个 sqldatasources 添加一个详细信息视图进行了尝试，这很有效，但是因为 asp.net 在您使用详细信息视图时会创建另一个表，所以它不允许我保持与之前相同的高度我有行。设计空间相当有限，所以保持原样很重要。

任何人都可以提出一个相当简单的方法来完成这项工作吗？
我正在尝试使用 VBscript 复制在经典 asp 中完成的操作，然后看起来要简单得多。

抱歉，如果这是我缺少的一个非常基本的东西，但是我已经寻找了很长时间，但仍然找不到任何可以使用的东西。

这就是我要复制的内容（仅用于顶部单元格）

```
lngNumRecs=0    
    rst.Open "SELECT COUNT(tblProject.Project_ID) AS NumRecs FROM tblProject INNER JOIN tblProject_Customer ON tblProject.Project_ID=tblProject_Customer.Project_ID WHERE (Type_ID=1 OR Type_ID=3 OR Type_ID=4) AND Status_ID=51", conn
    if rst.BOF or rst.EOF then

    else
        if isnull(rst("NumRecs"))=false then lngNumRecs=rst("NumRecs")
    end if  
    rst.Close
    .Write "<TR>"
        .Write "<TD>"
        .Write "<A href=/Orderbook/OrderSummary.asp?ListNo=1 target=_OrderSummary>"
        .Write "To be scheduled"
        .Write "</A>"
        .Write "</TD>"

        .Write "<TD>"
        .Write lngNumRecs
        .Write "</TD>"
    .Write "</TR>" 
```

我试图通过在表格单元格中放置带有自己的 sqldatasource 的详细信息视图来做到这一点。

如果我可以简单地将 sql 查询的结果链接到标签或类似的东西，那就太好了，但我想不通。

# javascript - 带有可拖动数据的 Javascript/jQuery 条形图插件

> ID：13415146
> 
> 赞同：0
> 
> 时间：2012-11-16T10:55:00.857
> 
> 标签：javascript, jquery, charts

我的任务是创建具有以下要求的条形图生成器：

*   输入值以生成图表的字段
*   生成图表后，可以拖动条形图/调整其大小

我已经很好地搜索并找到了一些选项，例如 JS Charts，但我找不到免费的插件，或者提供我需要的拖动。如果有人有任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:34:34.853

如果您要在图表中绘制时间数据，那么您将需要像**RadiantQ jQuery Gantt** Package 这样的甘特图。它支持非常交互式的拖动和调整大小等。它不是免费的，但它提供的功能完全值得。

有关更多详细信息，请访问它的功能页面[http://radiantq.com/jquery-gantt-package-features/](http://radiantq.com/jquery-gantt-package-features/)。并在[现场演示](http://demos.radiantq.com/jQueryGanttDemo/demo.htm)中查看它的实际效果。

# c - 如何在linux中计算两个二进制文件（即两个可执行文件）之间的差异

> ID：13415147
> 
> 赞同：6
> 
> 时间：2012-11-16T10:55:04.630
> 
> 标签：c, linux, unix, embedded-linux

在 Linux 中有没有办法计算两个二进制文件（即两个可执行文件）之间的差异？

让我更具体一点：我想知道如何计算 Linux 中两个版本的可执行文件或应用程序或软件之间的差异（差异差异）。例如，如果我必须只下载和安装现有应用程序或二进制文件的更新部分（最新版本和旧版本之间的差异），我该如何在 Linux 中执行此操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T11:04:14.413

您可以使用工具[bsdiff](http://www.daemonology.net/bsdiff/)和它的配套 bspatch 来进行有效的二进制文件差异和补丁。

如果你想获得更小的补丁，你可以看看谷歌浏览器中的[Courgette](http://dev.chromium.org/developers/design-documents/software-updates-courgette)。它建立在 bsdiff 之上，但它们通过在执行 diff 之前实际反汇编它们来提供更有效的可执行文件 diff。它不是作为一个单独的项目分发的，但是您可以从[Chromium 源代码库](http://src.chromium.org/viewvc/chrome/trunk/src/courgette/)中获取它（如何[签出代码](http://dev.chromium.org/developers/how-tos/get-the-code)）。

还有[xdelta](http://xdelta.org/)工具，它的使用时间比 bsdiff 长。根据 bsdiff 的作者的说法，它的效率要低得多；补丁出来更大。它的优点是它支持标准的 VCDIFF 格式 ( [RFC 3284](https://www.rfc-editor.org/rfc/rfc3284) )，其他几个工具也支持该格式，因此如果您需要使用此类其他工具，它会更有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T10:59:19.357

[diff](http://linux.die.net/man/1/diff)会告诉你二进制文件是否不同：

```
diff bin1 bin2
Binary files bin1 and bin2 differ 
```

如果您想要差异，请使用[cmp](http://linux.die.net/man/1/cmp)：

```
cmp -l bin1 bin2 
  25  20 320
  26   4   3
  41 270 160
 209   4 264
 210   7   6 
```

该`-l`选项打印字节数和差异：

> ```
> -l  --verbose
>       Output byte numbers and values of all differing bytes. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:01:22.983

尝试[cksum](http://linux.die.net/man/1/cksum) - 表明它们是相同的

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T11:05:09.700

您可以使用[diff](http://unixhelp.ed.ac.uk/CGI/man-cgi?diff)：

```
diff old_file new_file 
```

您也可以使用[md5](http://linux.die.net/man/1/md5sum)但您必须比较结果。如果 md5 校验和可用，它也可用于检查下载文件的总和。

# java - Java Swing 表单，无法在新添加的 jtextfield 中键入文本

> ID：13415150
> 
> 赞同：0
> 
> 时间：2012-11-16T10:55:11.200
> 
> 标签：java, swing, focus, jtextfield

我被要求更改以前制作的 java swing 表单以添加一个`JTextField`可以响应击键的表单。我将文本字段添加到表单中，试图强制关注它但没有成功，即使我点击它，它也没有获得焦点，也让我在上面输入任何文本。我尝试向`JPanel`（这是表单的基础）添加一个键侦听器，以便当我键入文本时，它将把它保存在一个字符串变量中，并在我按下回车后立即将其转储到方法中。

我需要帮助来弄清楚发生了什么。没有发布任何代码，因为该表格完全受版权保护。真的需要一些关于如何解决这个问题的想法。

这是我尝试添加侦听器的代码部分。

```
public void actionPerformed(ActionEvent e) {
    MyButton jb = (MyButton) e.getSource();
    String buttonGetName = jb.getName();

    /* MÉTODO PARA CAPTURA DE ENTRADAS POR TECLADO / LEITOR DE COD BARRAS */
    back.addKeyListener(new KeyAdapter() {
        @Override
        public void keyReleased(KeyEvent e) {
            if (e.getKeyCode() == KeyEvent.VK_ENTER) {
                barcode.setText(sBarcode);
                System.out.println("sBarcode");
                sBarcode = null;
            } else {
                System.out.println(e.getKeyChar());
                sBarcode = sBarcode + e.getKeyChar();
            }
        }
    }); 
```

...这里还有一些代码可以读取在按钮数组中按下了哪个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:17:34.053

*   不要使用[`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)for [`JTextComponents`](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html), 使用`Document`, `DocumentFilter`,[`DocumentListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)代替（取决于实际要求）

*   [`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)不是指定用于监听的，而是`Swing JComponents`使用正确的[`Listener`](http://docs.oracle.com/javase/tutorial/uiswing/events/eventsandcomponents.html)

*   任何类型的`short_cuts`使用[`KeyBindings`](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

# javascript - 在 IE8 中输入密码的 jQuery 输入占位符

> ID：13415151
> 
> 赞同：4
> 
> 时间：2012-11-16T10:55:13.383
> 
> 标签：javascript, jquery, css, html

我正在使用 jQuery 而不是 HTML5 占位符属性

```
<input type="text" name="email" value="Email" onfocus="if (this.value == 'Email') { this.value = ''; }" onblur="if (this.value == '') { this.value = 'Email'; }" onclick="if (this.value == 'Email') { this.value = ''; }"  /> 
```

这很好用，`type="text"`但`type="password"`它只显示*******

我将如何使用占位符作为密码字段？在 IE8 中需要

提前感谢您的回答...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T11:06:59.690

我创建了一个普通输入，然后`focus`将其切换到密码字段，如果值为空 on `blur`，则将其切换回普通输入，否则将其保留为密码字段。

[这是一个有效的 JSFiddle：http:](http://jsfiddle.net/q8ajJ/) [//jsfiddle.net/q8ajJ/](http://jsfiddle.net/q8ajJ/)

**的HTML**

```
<!-- Style = display none for people who dont have javascript -->
<input type="text" name="fake_pass" id="fake_pass" value="Enter Password:" style="display:none"/>
<input type="password" name="real_pass" id="real_pass"/>​ 
```

**Javascript (jQuery)**

```
// On DOM ready, hide the real password
$('#real_pass').hide();

// Show the fake pass (because JS is enabled)
$('#fake_pass').show();

// On focus of the fake password field
$('#fake_pass').focus(function(){
    $(this).hide(); //  hide the fake password input text
    $('#real_pass').show().focus(); // and show the real password input password
});

// On blur of the real pass
$('#real_pass').blur(function(){
    if($(this).val() == ""){ // if the value is empty, 
        $(this).hide(); // hide the real password field
        $('#fake_pass').show(); // show the fake password
    }
    // otherwise, a password has been entered,
    // so do nothing (leave the real password showing)
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-16T12:34:13.567

[这](http://jsfiddle.net/zAJLF/1/)是另一个肮脏的技巧 - 您可以使用 JS 在焦点和模糊上创建和显示/隐藏它`label`。`position: absolute`

据我所知，它适用于任何浏览器。此外，验证表单提交更简单。

HTML

```
<div class="wrapper">
    <input class="withPlaceholder" type="password" id="pass" />
    <label class="placeholder" for="pass">Password</label>
</div>
<br />
<div class="wrapper">
    <input class="withPlaceholder" type="password" id="pass2" />
    <label class="placeholder" for="pass2">Password2</label>
</div> 
```

CSS

```
div.wrapper {position: relative}
label.placeholder {position: absolute; color: #CCC; left: 2px; top: 0} 
```

JS

```
$("input.withPlaceholder").on({
    focus: function() {
        $("label[for=" + $(this).prop("id") + "]").hide();
    },
    blur: function() {
        if ($(this).val().length == 0) {
            $("label[for=" + $(this).prop("id") + "]").show();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-12T11:54:49.003

根据 JustAnil 的回答，并寻找一种方法来避免必须为每个密码字段手动添加每个对应项，我想出了 JustAnil 解决方案的这种改编：

```
function ManagePasswords(root) {
    root.find('input[type=password][placeholder]').each(function (index, current) {
        var $current = $(current),
            $fake = $current.clone().attr('type', 'text');

        $fake.val($fake.attr('placeholder'));

        $fake.insertBefore($current);
        $current.hide();

        $fake.focusin(function () {
            $(this).hide();
            $(this).next().show().focus();
        });

        $current.blur(function () {
            if ($(this).val() == '') {
                $(this).hide();
                $(this).prev().show();
            }
        });
    });
} 
```

然后你所要做的就是打电话

```
ManagePasswords($('#rootElement')); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T17:04:40.830

`input`为占位符添加另一个元素可能会在`form`验证和提交期间产生问题。我以不同的方式解决了这个问题。

**的HTML**

```
<form id="test">
    <input type="text" id="name" name="name" placeholder="Name"  />
    <input type="password" id="password" name="password" placeholder="Password" />
</form> 
```

**jQuery 函数**

```
function placeholder(form) {
    form.wrapInner('<ul style="list-style: none; list-style-type:none; padding:0; margin: 0;">');
    form.find('input[placeholder]').each(function (index, current) {
        $(current).css('padding', 0).wrap('<li style="position: relative; list-style: none; list-style-type:none; padding:0; margin: 0;">');            
        var height = $(current).parent('li').height();
        var $current = $(current),
            $placeholder = $('<div class="placeholder">'+$current.attr('placeholder')+'</div>');
        $placeholder.css({'color': '#AAA', 'position':'absolute', 'top': 0, 'left': 0, 'line-height': height+'px', 'margin': '0 0 0 5px', 'border': '0 none', 'outline': '0 none', 'padding': 0});
        $placeholder.insertAfter($current);
        $current.removeAttr('placeholder');
        $placeholder.click(function(){
            $current.focus()
        });
        $current.keypress(function(){
            if($(this).val().length >= 0) {
                $placeholder.hide();
            } 
        });
        $current.blur(function(){
            if($(this).val().length == 0) {
                $placeholder.show();
            } else {
                $placeholder.hide();
            }
        });                 
    });         
} 
```

现在只需为您的表单调用函数。

```
placeholder($("#test")); 
```

这适用于所有类型的带占位符的输入字段，包括`type="password"`在 IE8、IE9、IE10、Google Chrome、FireFox、Safari 和 Opera 中测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-19T00:14:03.637

使用此代码，jQuery 将完成剩下的工作......

html标签替换

```
<!--[if IE 8]><html class="ie8"><![endif]-->
<!--[if gt IE 8]><html><![endif]--> 
```

jQuery 天...

```
$(document).ready(function(){

$('.ie8 [placeholder][type="password"]').each(function(){
        $(this).wrap('<div style="position: relative;"></div>');
        $('<span style=" position: absolute;top: 5px;left:14px;" class="ie8Lbls">'+$(this).attr('placeholder')+'</span>').insertAfter($(this));
        $(this).attr('placeholder','');
        if($(this).val() == "") {$(this).parent().find('.ie8Lbls').show();}
    }).on('focus',function(){
        $(this).parent().find('.ie8Lbls').hide();
    }).on('blur',function(){
        if($(this).val() == "") {$(this).parent().find('.ie8Lbls').show();}
    });
    $(document).on('click','.ie8Lbls',function(){
        $(this).parent().find('input').focus();
    });

}); 
```

更改新占位符外观的样式

```
<style>
.ie8Lbls {
    font-size:10px;
}
</style> 
```

# php - 从 url 提交 POST 表单

> ID：13415152
> 
> 赞同：-4
> 
> 时间：2012-11-16T10:55:15.310
> 
> 标签：php, html, forms, post, get

网站：www.example.com

```
<form method="POSt" action="" >
    <input type="hidden" name="test1"  value="test11" />
    <input type="hidden" name="test2"  value="" /> 
    <input type="hidden" name="test3"  value="test33" /> 
    <input type="submit" value="Submit">
</form> 
```

我想通过在 URL 中添加正确的参数来汇总此表单。使用 GET，我可以简单地使用 :`http://ww.example.com/?test1=test11&test2=&test3=test33`并且表单将被提交。我可以为 POST 做同样的事情吗？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T10:57:59.540

您不能`POST`从 中发送参数，`URL`因为它们是在 中发送的`header`。

形式：

```
<form method="POSt" action="" >
    <input type="hidden" name="test1"  value="test11" />
    <input type="hidden" name="test2"  value="" /> 
    <input type="hidden" name="test3"  value="test33" /> 
    <input type="submit" value="Submit">
</form> 
```

提交表单后，您可以在下一页轻松检索这些值，如下所示：

```
<?php echo $_POST["test1"]; ?>
<?php echo $_POST["test2"]; ?>
<?php echo $_POST["test3"]; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:00:33.953

您可以像这样尝试 jquery ajax POST：

```
 $.ajax({
            url: 'http://ww.example.com/',
            data: { test1: $('#test1').val(), test2: $('#test2').val(), test3: $('#test3').val() },
            success: function (response) { alert(respone); },
            error: function (xhr, ajaxOptions, thrownError) { alert(xhr.responseText); }
        }); 
```

但它不会在查询字符串中发送，因为 POST 不会在 URL 中发送数据，它用于将数据安全地发送到服务器，如密码等。

# java - java.util.Properties 多个值 ArrayIndexOutOfBoundsException

> ID：13415153
> 
> 赞同：0
> 
> 时间：2012-11-16T10:55:30.170
> 
> 标签：java, arrays, exception, properties

我有一个存储服务器名称和端口的属性文件。这些值将在 中使用`Enum`，以便能够在不接触代码的情况下更改值。

该属性的内容如下所示：

```
PROD=FTPROD01:1122 
```

问题是我必须拆分服务器和端口号，因为我使用这些值作为方法的参数：

```
server = properties.getProperty(this.name(), "").split(":")[0];
try {
port = Integer.valueOf(properties.getProperty(this.name(), "").split(":")[1]);
} catch (ArrayIndexOutOfBoundsException e) {
System.err.println("error");
} 
```

如您所见，我`ArrayIndexOutOfBoundsException`正在捕获运行时异常，以检测是否缺少第二个值，因为如果属性文件“损坏”，程序将崩溃。

这是获得多个值的好方法，还是有其他更优雅的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T10:58:42.377

> 这是获得多个值的好方法，还是有其他更优雅的方法？

当然 - 不要*尝试*访问无效长度的数组 - 在你做任何其他事情之前检测它。

```
String[] bits = properties.getProperty(this.name(), "").split(":");
if (bits.length == 2) {
  server = bits[0];
  port = Integer.valueOf(bits[1]); 
} else {
  // Log the corruption or whatever...
} 
```

请注意，如果`valueOf`抛出`NumberFormatException`.

基本上你应该避免捕获异常，你可以避免一开始就被激怒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:00:07.907

**经验法则：不要将异常用于正常流程。**

您可以使用数组`length`来查找是否`port`存在，如下所示：

```
String[] arr = String.valueOf(properties.getProperty(this.name(), "").split(":");

server = arr[0];
if(arr.length > 1)
{
    port = Integer.valueOf(arr[1]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T10:59:15.143

当然，如果它对您有用，这是一个不错的选择:-)

不过，当有人给你一个看起来像这样的属性文件时，你会怎么做：

```
PROD= 
```

提示：扩展 try/catch 并可能为 PROD 丢失时准备一个默认值:-)

干杯，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T11:02:34.047

您可以在此之前进行检查以确保属性值
`if(properties.getProperty(this.name(), "").split(":").length > 1)`
通过这种方式，您可以删除您的异常处理代码:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T11:00:27.377

只需拥有像

```
PROD.SERVER=FTPROD01
PROD.PORT=1122 
```

属性主要用于键和值。

# ajax - 页面加载后开始长时间的任务

> ID：13415157
> 
> 赞同：2
> 
> 时间：2012-11-16T10:56:08.770
> 
> 标签：ajax, jsf-2, primefaces, servlet-3.0

我目前正在开发一个基于 jsf 的 webapp。我正在使用 jsf 2.0、servlet 3 和 primefaces。

这个想法是：

用户登录后，他会看到一个信息面板。此面板显示加载标志。在后端执行一个相当长的数据库查询，生成他的交易总和。任务完成后，应更新面板以显示结果。

首先，我尝试在页面加载后进行 ajax 调用（隐藏按钮由 javascript 和 f:event 触发），但页面只加载了一半，任务从未完成（我只做了一个计数为 10 的虚拟循环）。

我还尝试使用隐藏的进度条解决问题，但遇到了同样的问题：已完成的侦听器不会在页面加载后立即执行。

我拥有或打算使用的内容：面板本身由 sessionScoped Bean“控制”。这个 bean 还应该处理长任务。最初，面板应显示正常文本（加载符号不必更新，简单的 gif 就足够了）。在长时间的任务之后，结果应该显示在面板中。

你会如何解决这个问题，或者你认为我解决这个问题是完全错误的？

先感谢您。

# .net - 将外键映射到主键以外的东西

> ID：13415160
> 
> 赞同：6
> 
> 时间：2012-11-16T10:56:11.977
> 
> 标签：.net, nhibernate, fluent-nhibernate

在我的数据库中，有表*Assignment*和*Workplace*，从概念上讲，每项任务都发生在一个工作场所。*Assignment*表包含一个*Workplace*列，它是引用*Workplace*表的*WorkplaceName*列的外键。

这是架构：

```
table Workplace (
  ID int primary key,
  WorkplaceName int
)

table Assignment (
  Workplace int
) 
```

还有我的映射：

```
class Workplace
{
  public virtual int ID { get; set; }
  public virtual int WorkplaceName { get; set; }
} 

class Assignment 
{
  public virtual Workplace { get; set; }
}

class AssignmentMap : ClassMap<Assignment>
{
  public AssignmentMap()
  {
    References(a => a.Workplace);
  }
} 
```

在运行时我得到异常

> 不存在具有给定标识符的行[MyProject.Workplace#2001]

这里的问题似乎是 FH在*Workplace.ID列中查找**Assignment.Workplace*属性的值，即表的主键；正确的位置是*Workplace.WorkplaceName*列。我尝试使用该方法，认为我可以通过这种方式指定*WorkplaceName*。如何告诉 FH 如何加入正确的列？**`ForeignName`**

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:24:20.010

我在这里找到了答案：[FluentNHibernate Many-To-One References where Foreign Key is not to Primary Key and column names are different](https://stackoverflow.com/questions/2890359/fluentnhibernate-many-to-one-references-where-foreign-key-is-not-to-primary-key)

解决方案是使用`PropertyRef`; 该行现在显示：

```
References(x => x.Workplace).PropertyRef(x => x.WorkplaceName).Fetch.Join(); 
```

我没有意识到我需要提供对客户端对象属性*WorkplaceName*的引用，而不是尝试指示映射使用服务器端列*WorkplaceName*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:06:10.813

我想它一定是这样的

`References(x => x.Workplace).Column("WorkplaceName")`***

# imagemagick - 使用过渡将静止图像转换为视频

> ID：13415165
> 
> 赞同：7
> 
> 时间：2012-11-16T10:56:19.987
> 
> 标签：imagemagick

我想从静止图像创建视频，最好使用 ImageMagick 和/或 ffmpeg。我找到的最好的指南在这里：[http ://www.itforeveryone.co.uk/image-to-video.html](http://www.itforeveryone.co.uk/image-to-video.html)

这种工作，但这个命令

```
convert *.JPG -delay 10 -morph 10 %05d.morph.jpg 
```

对我不起作用，因为延迟设置了静止图像和变形图像的时间。

我为一组四张图片（1.jpg ... 4.jpg）和一张额外的黑色图片 0.jpg 提出了这个解决方案：

```
convert -size 800x600 xc:'rgba(0,0,0,1)' 0.jpg
convert \
\( -set delay 1 0.jpg 1.jpg -morph 10 \) \
\( -set delay 60 1.jpg \) \
\( -set delay 1 1.jpg 2.jpg -morph 10 \) \
\( -set delay 60 2.jpg  \) \
\( -set delay 1 2.jpg 3.jpg -morph 10 \) \
\( -set delay 60 3.jpg         \) \
\( -set delay 1 3.jpg 4.jpg -morph 10 \) \
\( -set delay 60 4.jpg         \) \
\( -set delay 1 4.jpg 0.jpg -morph 10 \) \
 output.mpg 
```

这做了我想要的，除了它

1.  看起来很复杂
2.  我显然不能在其中放置“*.jpg”，以便它适用于目录中的任何图像集。

现在我可以用 python 或 bash 自己的方式编写一个为我自动执行此操作的脚本，但我的直觉是我监督了一些明显的事情，可以将上述脚本变成一个漂亮的单行脚本？或者至少是不那么难看的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T20:29:52.513

我没有找到允许在其中扔“*.jpg”的解决方案。但是使用 -duplicate 可以稍微清理一下。我使用的常量与您不同，但这里是：

```
convert \
\( 0.png 1.png -morph 23 -duplicate 25,-1 \) \
\( 1.png 2.png -morph 23 -duplicate 25,-1 \) \
\( 2.png 3.png -morph 23 -duplicate 25,-1 \) \
\( 3.png 4.png -morph 23 -duplicate 25,-1 \) \
\( 4.png 0.png -morph 23 \) \
output.mpg 
```

我知道这个问题现在有点老了。如果，自从您发布以来，您找到了一个允许在其中抛出“*.jpg”的解决方案，我很乐意看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T06:42:34.397

我在阅读同一篇文章后发现了这篇文章。我能够让它与黑客一起工作，而不是你可以可靠地自动化的东西。但它对我有用，有一次我将使用这些说明。

我无法让我的这批 205 张按顺序编号且尺寸相同的图像进行转换。我会等待 10-15 分钟，输出文件夹中不会出现任何内容。我将处理分成 100 批，它会在 2-3 分钟后处理。我猜 205 张图像对它的大脑来说太多了。

这需要我使用 -scene 参数调整输出命名顺序

```
convert 00*.jpg -delay 10 -morph 10 frames/%05d.morph.jpg
convert 01*.jpg -delay 10 -morph 10 -scene 1079 frames/%05d.morph.jpg
convert 02*.jpg -delay 10 -morph 10 -scene 2169 frames/%05d.morph.jpg
ffmpeg -i frames/%05d.morph.jpg -c:v libx264 -vf fps=25 -pix_fmt yuv420p output.mp4 
```

# java - android在使用外部java lib时得到java lang验证错误

> ID：13415167
> 
> 赞同：2
> 
> 时间：2012-11-16T10:56:25.120
> 
> 标签：java, android, verifyerror, lang

我在我的 android 项目中使用一个外部库，在调用该库导入的类时出现 javalang 验证错误，它是 java.jxl 库

任何帮助，我在我的库项目中创建了一个名为 lib 的目录，然后在库中引用它。这个库与原始的 android 应用程序链接。

我也得到以下信息

```
11-16 18:12:40.230: W/dalvikvm(14253): VFY: unable to resolve static method 260: Ljxl/Workbook;.getWorkbook (Ljava/io/InputStream;)Ljxl/Workbook;
11-16 18:12:40.230: D/dalvikvm(14253): VFY: replacing opcode 0x71 at 0x000c
11-16 18:12:40.230: W/dalvikvm(14253): VFY: unable to resolve exception class 124 (Ljxl/read/biff/BiffException;)
11-16 18:12:40.230: W/dalvikvm(14253): VFY: unable to find exception handler at addr 0x11
11-16 18:12:40.230: W/dalvikvm(14253): VFY:  rejected Lcom/kd/hockymain/Kdexcel;.getfile ()V
11-16 18:12:40.230: W/dalvikvm(14253): VFY:  rejecting opcode 0x0d at 0x0011
11-16 18:12:40.230: W/dalvikvm(14253): VFY:  rejected Lcom/kd/hockymain/Kdexcel;.getfile ()V
11-16 18:12:40.230: W/dalvikvm(14253): Verifier rejected class Lcom/kd/hockymain/Kdexcel; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:49:48.810

库应该放在`libs/`目录中（不是`lib/`，注意尾部的斜杠）。看到[这个答案](https://stackoverflow.com/a/3643015/315306)。

这会将编译后的库代码转换为 Dalvik 格式，并为 Eclipse 工作提供符号定义。

# azure - Azure 移动服务 - RESTquery 返回 500 错误

> ID：13415168
> 
> 赞同：0
> 
> 时间：2012-11-16T10:56:28.783
> 
> 标签：azure, azure-mobile-services

我正在尝试通过 HTTP 请求从 Azure 移动服务中的数据库中查询一些数据。当我尝试这样的事情时：

```
http://MYAPPLICATION.azure-mobile.net/tables/RoutesTrip?$filter=(route_id%20eq%202) 
```

我得到了很好的回应。但是当我尝试得到这个时：

```
http://MYAPPLICATION.azure-mobile.net/tables/RoutesTrip?$filter=(route_short_name%20eq%2063) 
```

我得到错误代码 500：“错误=错误：内部服务器错误”

一开始我在本专栏中有非 ASCII 字母，所以我认为这是问题所在，但我更改了它，但它仍然无法正常工作。

此列是 varchar(50) 和 route_id，所以我认为这不是问题所在。

有谁知道我为什么会收到这个回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:23:14.177

尝试将值括在单引号中：

```
http://MYAPPLICATION.azure-mobile.net/tables/RoutesTrip?$filter=(route_short_name%20eq%20'63') 
```

希望这可以帮助。

# c# - 应用程序信任级别

> ID：13415171
> 
> 赞同：4
> 
> 时间：2012-11-16T10:56:31.127
> 
> 标签：c#, winforms, permissions, oledb, trust

如何更改信任级别？
我用 oledb 编写 c# windows 窗体应用程序并且不能使用附加查询，因为访问禁用模式会阻止这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:13:28.090

在 Visual Studio 中打开您的项目 > 转到项目菜单 > 属性 > 安全 > 检查启用 ClickOnce 安全设置 > 这是一个完全信任的应用程序。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-01T04:50:32.587

您可能还需要使用代码签名证书对 ClickOnce 清单和程序集进行签名，以使其在 Windows 10 中工作。我不必在 Windows 7 中签署我部署的应用程序并在 Windows 8 中侥幸逃脱，但在 10 中则没有.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T11:09:18.937

使用 .NET Framework 配置工具[来增加程序集信任](http://msdn.microsoft.com/en-us/library/2bc0cxhc%28v=vs.100%29.aspx)：

*   单击控制台树的**运行时安全策略**节点。
*   单击“**操作”**菜单，然后从可用命令中进行选择。
*   或者，您可以右键单击“**运行时安全策略”**节点并从快捷菜单上的相同命令列表中进行选择，或者单击右侧窗格中的“**增加程序集信任”链接。**该工具会显示相应的向导。
*   按照向导中显示的说明提高授予您指定的程序集的信任级别。
*   该向导允许您根据有关程序集证据的可用信息修改安全策略。有关常见证据类型的列表和描述，请参阅[证据](http://msdn.microsoft.com/en-us/library/7y5x1hcd%28v=vs.100%29.aspx)主题。

# excel - 禁止用户在 Excel 中取消隐藏列

> ID：13415174
> 
> 赞同：0
> 
> 时间：2012-11-16T10:56:44.183
> 
> 标签：excel, excel-2007

我有一个 Excel 文件，需要发送给另一家公司进行处理。Excel 文件包含我需要隐藏的客户个人数据。是否可以隐藏这些数据，以便处理文件的人无法取消隐藏该列（当然，一旦我收到处理过的文件，我必须能够取消隐藏它）。处理过程将 2 个新列添加到文件并对其进行排序（因此这些功能需要保持启用）。如果这是不可能的，有没有办法加密特定列中的数据，以便不显示其中的数据。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:31:20.010

您可以隐藏一列然后保护工作表，但是聪明的人可以在另一列中创建一个引用该列的公式：

假设您隐藏 A:A，然后一个人将放入 B1:`=A1`并将其复制到 B:B 中的所有单元格。

现在最好的方法是在您的所有记录中添加一个具有唯一 ID 的列，然后创建该文件的第二个副本，在其中删除您不想共享的列。

当您取回文件时，您可以从本地文件中复制粘贴已删除的列，或者您可以使用例如`VLOOKUP()`匹配 ID 的函数来返回已删除的数据。

祝你好运

# c# - 如何拖动单张卡片

> ID：13415175
> 
> 赞同：2
> 
> 时间：2012-11-16T10:56:47.007
> 
> 标签：c#, drag-and-drop, 2d, unity3d

嗨，我正在制作单人纸牌游戏。现在我在屏幕上显示我所有的卡片 13 x 4。我可以拖动卡片，但不知何故，从上到下的整行都被选中了。如果我向左或向右移动拖动，它会选择它旁边的卡片和整行。

所以我的问题是：我怎样才能选择 1 张卡然后拖动它而不用我拖动其他卡？

```
using UnityEngine;
using System.Collections;

public class SetupCards : MonoBehaviour 
{
    int numberOfCards = 52;
    int numberOfCardSorts = 4;
    public float verticalSize = 1.4f;

void OnGUI()
{
    int currentSort = 0;
    int cardNumber = 0;

    for (int i = 0; i < numberOfCards; ++i)
    {
        int numberOfCardsPerSort = numberOfCards / numberOfCardSorts;
        float cardSizeX = Screen.width / numberOfCardsPerSort;

            if (cardNumber == numberOfCardsPerSort)
            {
                ++currentSort;
               cardNumber = 0;
            }

            Vector2 cardSize = new Vector2(cardSizeX, cardSizeX * verticalSize);

            Rect rect = new Rect(
                cardSize.x * cardNumber,
                cardSize.y * currentSort,
                cardSize.x,
                cardSize.y);

                string texturePath = "Textures/cards/";

                switch (currentSort)
                {
                    case 0:
                    texturePath += "diamond/diamond_";
                    break;

                case 1:
                    texturePath += "clover/clover_";
                    break;

                case 2:
                    texturePath += "heart/heart_";
                    break;

                case 3:
                    texturePath += "spade/spade_";
                    break;
            }

            texturePath += cardNumber.ToString();

            Texture texture = Resources.Load(texturePath) as Texture;

            if (Input.GetMouseButton(0))
            {
                if (Input.mousePosition.x <= rect.x + rect.width &&
                    Input.mousePosition.x >= rect.x) 
                {                                        
                    if(-Input.mousePosition.y <= rect.y + rect.height &&
                        -Input.mousePosition.y >= rect.y) 
                        rect.x = Input.mousePosition.x;
                    {
                        rect.y = -Input.mousePosition.y + Screen.height;
                    }                    
                }
            }

            GUI.Label(rect, texture);

            ++cardNumber;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:08:03.653

你的问题在这里：

```
 if (Input.GetMouseButton(0))
        {
            if (Input.mousePosition.x <= rect.x + rect.width &&
                Input.mousePosition.x >= rect.x) 
            {                                        
                if(-Input.mousePosition.y <= rect.y + rect.height &&
                    -Input.mousePosition.y >= rect.y) 
                    rect.x = Input.mousePosition.x;  // THIS LINE IS THE PROBLEM
                {
                    rect.y = -Input.mousePosition.y + Screen.height;
                }                    
            }
        } 
```

发生的事情是您的行`rect.x = Input.mousePosition.x;`紧跟在`if`语句之后，并有条件地执行。然后，包含的代码块`rect.y =`将运行通过外部语句的*每个* 代码块- 即该垂直行中的所有卡片。`rect``if`

我怀疑您需要将内部支撑向上移动一行，如下所示：

```
 if (Input.GetMouseButton(0))
        {
            if (Input.mousePosition.x <= rect.x + rect.width &&
                Input.mousePosition.x >= rect.x) 
            {                                        
                if(-Input.mousePosition.y <= rect.y + rect.height &&
                    -Input.mousePosition.y >= rect.y) 
                {  // THIS BRACE IS MOVED UP
                    rect.x = Input.mousePosition.x;
                    rect.y = -Input.mousePosition.y + Screen.height;
                }                    
            }
        } 
```

# ios - UITabBarItem 不完全在底部

> ID：13415176
> 
> 赞同：0
> 
> 时间：2012-11-16T10:56:58.430
> 
> 标签：ios, xcode, uitabbarcontroller, uitabbar, uitabbaritem

我创建了一个自定义标签栏，但我的标签栏并不完全位于屏幕底部。我不知道错误可能出在哪里...但是在屏幕底部 2-3 像素的高度上，我看到了标准标签栏（您可以在活动的 tabbaritem 上看到突出显示的曲线）...有什么想法吗？

在所有设备上都相同。

这里截图： ![在此处输入图像描述](../Images/be61a4c3f20ed9b67f2116ebe9db1e1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:05:36.580

也许您的背景图片大小不正确！？您无法更改标签栏的高度。它总是 49 点高（纵向）。在 Retina 中表示 98px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:02:14.383

如果“Y”位置和高度正常，请检查您正在使用的自定义标签栏类。iPhone 和 iPad 的 Y 位置应为 431px 纵向：975 像素和横向：718 像素

还要检查您用于在标签栏中显示的图像，对于没有视网膜的设备，高度为 49px，对于有视网膜显示的设备，高度为 98px

# javascript - “如果”中的问号

> ID：13415178
> 
> 赞同：0
> 
> 时间：2012-11-16T10:57:07.800
> 
> 标签：javascript, if-statement

我如何在 If 子句中编写此代码？

```
$('#message').removeClass().addClass((data.error === true) ? 'error' : 'success').text(data.msg).show(500); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:00:26.393

```
var message = $('#message').removeClass();
if (data.error === true)
{
    message.addClass('error');
}
else
{
    message.addClass('success');
}
message.text(data.msg).show(500); 
```

您也可以将所有这些调用放在 if-case 中，但是您必须一直重复代码，因此我将其拆分并使用了局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:01:48.007

这是javascript中的条件运算符。

```
(data.error === true) ? 'error' : 'success' 
```

表示如果第一部分为真 `data.error === true`，则返回“错误”，否则返回“成功”

[你可以在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)找到更多信息

# c# - 我可以获得最小（最大）处理器状态的值吗

> ID：13415179
> 
> 赞同：1
> 
> 时间：2012-11-16T10:57:14.853
> 
> 标签：c#, windows-7

在 Win7 下，打开`Control Panel -> Power Options -> Advanced Settings->Processor power management`.

你可以看到最小处理器状态，最大处理器状态。
我想通过 C# 获取处理器状态的值。例如 5%,100%。我在c#中使用命令“powercfg”，我不能得到“monitor-timeout-ac”的值等等。
我无法获得处理器
状态的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T22:33:55.460

您需要dllimport powrprof.dll，并使用ReadProcessorPwrScheme API，然后访问processorPolicyInfoAc.DemotePercent 和ProcessorPolicyInfoAc.PromotePercent

请参阅下面的代码。未经测试，但它会向您展示方式（我使用此代码获取 DynamicThrottle 信息并且它有效）。

```
    结构 PROCESSOR_POWER_POLICY_INFO
        {
            公共单位时间检查；
            公共单位 DemoteLimit;
            公共单位PromoteLimit；
            公共字节降级百分比；
            公共字节PromotePercent；
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 2)]
            公共字节[] 备用；
            公共单位 AllowBits;
        }

        结构 PROCESSOR_POWER_POLICY
        {
            公共单位修订；
            公共字节DynamicThrottle；
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
            公共字节[] 备用；
            公共 uint 保留；
            公共单位政策计数；
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 3)]
            公共 PROCESSOR_POWER_POLICY_INFO[] 政策；
        }

        结构 MACHINE_PROCESSOR_POWER_POLICY
        {
            公共单位修订；// 超长
            公共 PROCESSOR_POWER_POLICY ProcessorPolicyAc；
            公共 PROCESSOR_POWER_POLICY ProcessorPolicyDc；
        }

        [DllImport("powrprof.dll", SetLastError = true)]
        static extern bool ReadProcessorPwrScheme(uint uiID, out MACHINE_PROCESSOR_POWER_POLICY pMachineProcessorPowerPolicy);
        公共无效ReadProcessorPowerScheme（）
        {
            MACHINE_PROCESSOR_POWER_POLICY machinep = new MACHINE_PROCESSOR_POWER_POLICY();
            uint 方案 = 0;

            if (ReadProcessorPwrScheme(scheme, out machinep))
            {

                //然后循环遍历 machinep.ProcessorPolicyAc.Policy[]; 大批
                //使用：PROCESSOR_POWER_POLICY_INFO processorPolicyInfoAc = mppp.ProcessorPolicyAc.Policy[i];
                //使用：processorPolicyInfoAc.DemotePercent;
                //使用：processorPolicyInfoAc.PromotePercent;

                //并且不要忘记对Dc做同样的事情（Dc是电池）
            }
        }

```

埃德加·罗查·卡瓦略

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T05:42:23.583

利用

```
PowerReadACValueIndex()/PowerReadDCValueIndex() 
```

1.  第一个参数是`NULL`
2.  第二个参数——`GUID`用于所需的电源方案（`GUID_MAX_POWER_SAVINGS`// `GUID_MIN_POWER_SAVINGS`）`GUID_TYPICAL_POWER_SAVINGS`
3.  第三个参数——`GUID_PROCESSOR_SETTINGS_SUBGROUP`
4.  第四个参数——`GUID_PROCESSOR_THROTTLE_MAXIMUM`或`GUID_PROCESSOR_THROTTLE_MINIMUM`
5.  第 5 个参数是值接收器。

所有`GUID`描述都可以在**winnt.h中找到**

# emacs - telnet 模式的 ansi-color 在 emacs 中出错

> ID：13415180
> 
> 赞同：2
> 
> 时间：2012-11-16T10:57:19.610
> 
> 标签：emacs, telnet

我正在使用最新`emacs24.2`的 .

我已将 (add-hook '<code>telnet-mode-hook 'ansi-color-for-comint-mode-on) 添加到我的`.emacs`. 但是`emacs`拒绝让我最新的命令输出变得丰富多彩；

**它的意思是：**

```
 # ls 

    [01;34mMC[0m/ 
```

然后在下一个`ls`旧的将是`MC`蓝色的，但当前的`ls`输出仍然被打乱。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-25T20:01:06.843

这困扰了我一段时间，直到我通过添加以下行来编辑 telnet.el 文件中的 telnet-filter 函数：

```
(and telnet-replace-c-g
    (subst-char-in-region last-insertion (point) ?\C-g
        telnet-replace-c-g t))

;; Following line inserted for ansi-color.
(ansi-color-apply-on-region last-insertion (point)) 

;; If point is after the insertion place, move it
;; along with the text.
(if (> delta 0)
    (goto-char (+ (process-mark proc) delta)))))) 
```

# python - python中打印的括号

> ID：13415181
> 
> 赞同：6
> 
> 时间：2012-11-16T10:57:33.140
> 
> 标签：python, printing

我在python中有这行代码

```
print 'hello world' 
```

反对

```
print ('hello world') 
```

有人可以告诉我两者之间的区别吗？

我在一个简单的代码中使用它

```
var = 3
if var > 2: 
    print 'hello' 
```

它无法严格检查 var 的所有值。但是如果我将代码定义为

```
var = 3
if var > 2: 
    print ('hello') 
```

有用！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-16T11:04:12.170

对于 Python 2，它没有任何区别。那里，`print`是一个陈述，`'hello'`并且`('hello')`是它的论点。后者被简化为just `'hello'`，因此它是相同的。

在 Python 3 中，删除了 print 语句，取而代之的是 print 函数。函数是使用大括号调用的，因此实际上需要它们。在这种情况下，`print 'hello'`是一个语法错误，而`print('hello')`调用函数`'hello'`作为它的第一个参数。

您可以通过显式导入将 print 函数反向移植到 Python 2。为此，将以下内容添加为模块的第一个导入：

```
from __future__ import print_function 
```

然后，您将在 Python 2 中获得与 Python 3 相同的行为，并且再次需要括号。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-16T11:01:23.353

您应该阅读[python 3.0 中的新功能](http://docs.python.org/3.0/whatsnew/3.0.html#what-s-new-in-python-3-0)：

> print 语句已被一个函数替换，使用关键字参数替换旧 print 语句 ( [PEP 3105](http://www.python.org/dev/peps/pep-3105/) )`print()`的大部分特殊语法。

[**向后兼容性**](http://www.python.org/dev/peps/pep-3105/#backwards-compatibility)：

> 本 PEP 中提议的更改将使今天的大多数印刷声明无效。在 3.0 版中，只有那些偶然在所有参数周围加上括号的语法才会继续是有效的 Python 语法，而其中只有打印单个括号值的语法才会继续做同样的事情。例如，在 2.x 中：

```
>>> print ("Hello", "world")  # without import
('Hello', 'world')

>>> from __future__ import print_function  

>>> print ("Hello", "world")       # after import 
Hello world 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-24T21:51:55.090

我在这里搜索正则表达式来转换这些语法。这是我对其他人的解决方案：

在旧的 Python2 示例脚本中运行良好。否则使用 2to3.py 进行额外的转换。

在 Regexr.com 上尝试一下（由于某种原因在 NP++ 中不起作用）：

```
find:     (?<=print)( ')(.*)(')
replace: ('$2') 
```

对于变量：

```
(?<=print)( )(.*)(\n)
('$2')\n 
```

对于标签和变量：

```
(?<=print)( ')(.*)(',)(.*)(\n)
('$2',$4)\n 
```

[如何用 Python3 的 print("string") 替换 Python2 中的所有 print"string"？](https://stackoverflow.com/questions/53917898/how-to-replace-all-print-string-in-python2-with-printstring-for-python3/53917912#53917912)

# cakephp - Cakephp 更新只有在将调试模式更改为 2 后才会生效

> ID：13415182
> 
> 赞同：2
> 
> 时间：2012-11-16T10:57:35.053
> 
> 标签：cakephp

我遇到过一些情况，在将更新的代码提交到生产服务器后，只有视觉更改才会生效（在我的情况下，它是在数据库中保存一个值），但应用程序的行为就像根本没有代码更新一样。

将调试模式提交为 2 然后返回 0 后，它开始工作。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:54:09.030

当调试模式设置为 1 或 2 时，CakePHP 缓存在每次请求时都会刷新。这使得例如模型更新可见。

当调试模式设置为 0 时，Cake 不会刷新缓存，并且某些更新可能不可用。

在生产中进行一些代码更新时，您应该始终删除`app/tmp`文件夹的内容。（但不是`app/tmp`子文件夹，因为它们不会自动重新创建）

来自食谱：[http](http://book.cakephp.org/2.0/en/deployment.html#update-core-php) ://book.cakephp.org/2.0/en/deployment.html#update-core-php ，当调试设置为 0 时：

> 核心 CakePHP 缓存每 99 年刷新一次，而不是开发中的每 10 秒刷新一次。

# c# - 时间：2019-05-10 标签：c#combobox autocomplete like method

> ID：13415194
> 
> 赞同：0
> 
> 时间：2012-11-16T10:58:10.190
> 
> 标签：c#, winforms, autocomplete, combobox

我一直在寻找 LIKE`autocompletion`模式。谁能帮我这个。

当我在 中输入文本时`ComboBox`，应要求数据库提供数据。一切顺利。但后来我希望我`ComboBox`的行为像建议模式，但它不起作用。

我试过这个：

```
cursorPosition = txtNaam.SelectionStart;
string query = "SELECT bedr_naam FROM tblbedrijf WHERE bedr_naam LIKE '%" + txtNaam.Text + "%'";
DataTable table = Global.db.Select(query);
txtNaam.Items.Clear();
for (int i = 0; i < table.Rows.Count; i++)
{
    txtNaam.Items.Add(table.Rows[i][0].ToString());
}
Cursor.Current = Cursors.Default;

txtNaam.Select(cursorPosition, 0); 
```

但是这个函数创建的行为是关闭的，它不像建议模式那样工作，它有点错误。

谁能帮我让它正常工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-16T11:11:38.040

我的这个概念可能不正确，但您可以在`TextChanged`活动中这样做：-

```
DataTable.DefaultView.RowFilter = "SearchField LIKE '*" + Combobox1.Text + "*'"; 
```

如果您将 DataTable 绑定到绑定源，并将绑定源用作您的数据源`ComboBox`，则每次按键都会优化列表。

# iphone - 在页面控制器中访问多个视图控制器

> ID：13415198
> 
> 赞同：0
> 
> 时间：2012-11-16T10:58:23.630
> 
> 标签：iphone, ipad

我在 ipad 中显示视图，就像一本书一样，单个视图显示两个视图。我想添加更多视图，以便在视图翻转时出现第三个和第四个视图并进一步显示。我正在使用下面的代码来做到这一点。我正在将 ViewControllers 添加到数组中，它在“ContentViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];”这一行的方向方法中被杀死。

```
- (void)viewDidLoad
{
[super viewDidLoad];

//Instantiate the model array
self.modelArray = [[NSMutableArray alloc] init];
for (int index = 1; index <= 12 ; index++)
{
    [self.modelArray addObject:[NSString stringWithFormat:@"Page %d",index]];
}

//Step 1
//Instantiate the UIPageViewController.
self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl 
                                                          navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];

//Step 2:
//Assign the delegate and datasource as self.
self.pageViewController.delegate = self;
self.pageViewController.dataSource = self;

//Step 3:
//Set the initial view controllers.

ViewOne *one = [[ViewOne alloc]initWithNibName:@"ViewOne" bundle:nil];
viewTwo *two = [[viewTwo alloc]initWithNibName:@"ViewTwo" bundle:nil];

ContentViewController *contentViewController = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
contentViewController.labelContents = [self.modelArray objectAtIndex:0];

// NSArray *viewControllers = [NSArray arrayWithObject:contentViewController];
 viewControllers = [NSArray arrayWithObjects:contentViewController,one,two,nil];

[self.pageViewController setViewControllers:viewControllers
                                  direction:UIPageViewControllerNavigationDirectionForward
                                   animated:NO 
                                 completion:nil];

//Step 4:
//ViewController containment steps
//Add the pageViewController as the childViewController
[self addChildViewController:self.pageViewController];

//Add the view of the pageViewController to the current view
[self.view addSubview:self.pageViewController.view];

//Call didMoveToParentViewController: of the childViewController, the UIPageViewController instance in our case.
[self.pageViewController didMoveToParentViewController:self];    

//Step 5:
// set the pageViewController's frame as an inset rect.
CGRect pageViewRect = self.view.bounds;
pageViewRect = CGRectInset(pageViewRect, 40.0, 40.0);
self.pageViewController.view.frame = pageViewRect;

//Step 6:
//Assign the gestureRecognizers property of our pageViewController to our view's gestureRecognizers property.
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;

}

 - (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
 {
if(UIInterfaceOrientationIsPortrait(orientation))
{
    //Set the array with only 1 view controller
    UIViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    //Important- Set the doubleSided property to NO.
    self.pageViewController.doubleSided = NO;
    //Return the spine location
    return UIPageViewControllerSpineLocationMin;
}
else
{

   // NSArray *viewControllers = nil;

    ContentViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];

    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)currentViewController labelContents]];
    if(currentIndex == 0 || currentIndex %2 == 0)
    {
        UIViewController *nextViewController = [self pageViewController:self.pageViewController viewControllerAfterViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
    }
    else
    {
        UIViewController *previousViewController = [self pageViewController:self.pageViewController viewControllerBeforeViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
    }
    //Now, set the viewControllers property of UIPageViewController
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    return UIPageViewControllerSpineLocationMid;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:27:48.730

您不能在一开始就使用您想要的所有视图控制器来设置 的`viewControllers`属性。`UIPageViewController`

您必须为数据源实现以下方法：`- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController`和`- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController`. 这提供了在更改页面时显示的视图控制器。当没有更多页面可显示时，您必须返回 nil。

因此，当`viewDidLoad`您`viewControllers`使用 3 个元素设置属性时，您实际上应该只使用两个元素设置它们，因为您一次只能显示两个页面。

# r - 从比较两列的数据框中删除列交叉信息的行

> ID：13415199
> 
> 赞同：0
> 
> 时间：2012-11-16T10:58:32.820
> 
> 标签：r, dataframe, specular

当我试图根据配对基因条件合并不同的基因表达结果时，这是我特别的噩梦之一，这是我合并的数据框：

```
knowngene1   Logfold1        Gene1   knowngene2   Logfold2        Gene2
uc001ezv.3  5.1167021111    NA  uc001ezu.1  5.6262305191    FLG
uc001ihe.4  4.1338871783    LOC100216001    uc001ihg.3  3.9475325801    NA
uc001iki.4  9.9902455211    CELF2   uc001ikn.2  9.3321964303    NA
uc001ikk.2  10.3059806111   CELF2   uc001ikn.2  9.3321964303    NA
uc001ikl.4  9.9890468379    CELF2   uc001ikn.2  9.3321964303    NA
uc001ikn.2  9.8293484977    NA  uc001iki.4  9.4401488053    CELF2
uc001ikn.2  9.8293484977    NA  uc001ikk.2  9.2887954663    CELF2
uc001ikn.2  9.8293484977    NA  uc001ikl.4  9.4401488053    CELF2
uc001ikn.2  9.8293484977    NA  uc010qbi.2  8.6399349792    CELF2
uc001ikn.2  9.8293484977    NA  uc010qbj.1  9.2887954663    CELF2
uc001ezu.1  5.6262305191    FLG uc001ezv.3  5.1167021111    NA
uc001ihg.3  3.9475325801    NA  uc001ihe.4  4.1338871783    LOC100216001
uc001iki.4  9.4401488053    CELF2   uc001ikn.2  9.8293484977    NA
uc001ikk.2  9.2887954663    CELF2   uc001ikn.2  9.8293484977    NA
uc001ikl.4  9.4401488053    CELF2   uc001ikn.2  9.8293484977    NA
uc001ikn.2  9.3321964303    NA  uc001iki.4  9.9902455211    CELF2
uc001ikn.2  9.3321964303    NA  uc001ikk.2  10.3059806111   CELF2
uc001ikn.2  9.3321964303    NA  uc001ikl.4  9.9890468379    CELF2
uc001ikn.2  9.3321964303    NA  uc010qbi.2  10.3865530025   CELF2
uc001ikn.2  9.3321964303    NA  uc010qbj.1  10.3072927485   CELF2
uc001iot.1  6.9068905956    NA  uc001iou.2  8.4040043896    VIM
uc001iou.2  10.4420548632   VIM uc001iot.1  5.8235197903    NA
uc001ipd.3  4.4693510978    ST8SIA6 uc001ipf.1  5.1931857169    NA
uc001kgd.3  3.5469561781    NA  uc009xts.3  4.0607448636    IFIT2
uc001kgf.3  3.3975573789    IFIT3   uc001kgd.3  3.2512633588    NA 
```

关键是我不想删除重复的行，当然没有，我想删除那些在 knowngene1 和 knongene2 中也改变了 knowngene 访问器的行。让我举个例子，第一个是我要保留的行

```
uc001ikn.2  9.8293484977    NA  uc001iki.4  9.4401488053    CELF2 
```

这些下一行对我来说是相同的，实际上第一行是我想要保留的那个的镜面图像，尽管它的表达式值或多或少在相同的范围内

```
uc001iki.4  9.4401488053    CELF2   uc001ikn.2  9.8293484977    NA
uc001ikn.2  9.3321964303    NA  uc001ikl.4  9.9890468379    CELF2 
```

所以这个想法是只保留我看到的第一个并删除下一个。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:36:19.480

所以你想删除所有`uc001ikn.2`出现的行？如果是这样，我认为这将起作用：

```
Rgames> foo
     [,1] [,2]
[1,]    1    7
[2,]    2    8
[3,]    3    9
[4,]    2    3
[5,]    4    1
[6,]    3   10
[7,]    5   11
[8,]    6   12
Rgames> foo[!duplicated(foo[,1])&!(foo[,2]%in%duplicated(foo[,1])),]
     [,1] [,2]
[1,]    1    7
[2,]    2    8
[3,]    3    9
[4,]    5   11
[5,]    6   12 
```

在您的情况下，您将在`df$knowngene1`和`df$knowngene2`列上进行操作。

# asp.net-mvc - .net MVC 搜索查询连接表

> ID：13415200
> 
> 赞同：0
> 
> 时间：2012-11-16T10:58:37.850
> 
> 标签：asp.net-mvc

我有一个搜索功能，可以查找客户姓名、邮政编码、电话号码。我还想要查找连接表 CustomerContact 以搜索名字和姓氏的功能。

我有以下内容：

```
var customer = from c in db.Customer.Include(c => c.CustomerContact)
                select c;

if (!String.IsNullOrEmpty(searchString))
{
    customer = customer.Where(c => c.CustomerName.ToUpper().Contains(searchString.ToUpper())
                        || c.Postcode.ToUpper().Contains(searchString.ToUpper())
                        || c.CustomerContact.FirstName.ToUpper().Contains(searchString.ToUpper())
                        || c.CustomerContact.Surname.ToUpper().Contains(searchString.ToUpper())
                        || c.Telephone.ToUpper().Contains(searchString.ToUpper()));
} 
```

我没有收到任何错误。当我搜索名字和姓氏时，它只是没有返回任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:10:39.933

客户 = customer.Include("CustomerContact").Where(...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T11:21:00.380

在做其他事情时遇到了这个问题的答案。

这是我的最终代码。希望它对某人有用。

```
var customer = from c in db.Customer
               select c;

if (!String.IsNullOrEmpty(searchString))
{
    customer = customer.Where(c => SqlFunctions.StringConvert((double)c.CustomerID).Trim().Equals(searchString)
                        || c.CustomerName.ToUpper().Contains(searchString.ToUpper())
                        || c.Postcode.ToUpper().Replace(" ", "").Equals(searchString.ToUpper().Replace(" ", ""))
                        || c.Telephone.ToUpper().Replace(" ", "").Equals(searchString.ToUpper().Replace(" ", ""))
                        || c.CustomerContact.Where(x => x.FirstName.ToUpper().Contains(searchString.ToUpper())).Any()
                        || c.CustomerContact.Where(x => x.Surname.ToUpper().Contains(searchString.ToUpper())).Any()
                        || c.CustomerContact.Where(x => (x.FirstName.ToUpper() + " " + x.Surname.ToUpper()).Contains(searchString.ToUpper())).Any());
        } 
```

# installation - NSIS 静默安装程序 - 未观察到跳转

> ID：13415202
> 
> 赞同：0
> 
> 时间：2012-11-16T10:58:42.977
> 
> 标签：installation, nsis, silent, silent-installer

我正在为静默安装程序尝试 NSIS 文档示例，[here](http://nsis.sourceforge.net/Examples/silent.nsi)。取消注释该行

```
; SilentInstall silent 
```

那么是的，我的安装程序是沉默的。但是，它会显示消息框。即使安装程序处于静默状态，预计也会出现消息框。为了使消息框也静音，必须为每个消息框使用 /SD 选项。示例脚本在这里提出：

```
MessageBox MB_OK|MB_ICONINFORMATION "This is not a silent installer" /SD IDOK 
```

使消息框静音的另一种方法是公开的：它检查是否静音。如果不显示，则向前跳两行（所以不显示消息框）

```
IfSilent 0 +2
    MessageBox MB_OK|MB_ICONINFORMATION 'This is a "silent" installer' 
```

第二个解决方案对我不起作用。如果我将安装程序设置为静默，则会出现带有“这是静默安装程序”的框。如果我改变它

```
MessageBox MB_OK|MB_ICONINFORMATION 'This is a "silent" installer' /SD IDOK 
```

该消息未出现。

为什么会跳进去

```
IfSilent 0 +2 
```

不工作？`+3`也没有成功。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T16:48:45.867

就像 zbynour 说的那样，你把参数弄混了。

为避免相对跳转问题，请使用 logiclib：

```
!include LogicLib.nsh

...

${IfNot} ${Silent}
  MessageBox ...
${EndIf} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:45:51.583

*因为在静默安装的情况下，*第一个参数偏移跳转（第二个为非静默）。

试试这个：

```
IfSilent +2 0 
```

# xml - 是什么导致 Eclipse 检查（或不检查）xml 文件？

> ID：13415209
> 
> 赞同：0
> 
> 时间：2012-11-16T10:58:59.927
> 
> 标签：xml, eclipse, validation

我有同一个项目的两个版本。在一个项目中，Java 源代码的一部分位于库中，这使得测试变得困难。所以我创建了同一个项目的第二个版本，其中包含了所有源代码。
两个项目在 WebContent 的数据部分中都有相同的 xml 文件。在项目的库版本中，eclipse 抱怨一些 xml 文件：“根元素之后的文档中的标记必须格式正确”，因为它没有根节点。我们可能需要解决的问题。
但令我惊讶的是，在该项目的非库版本中存在相同的文件，并且这里 Eclipse 不会抱怨。怎么可能？
两个项目都使用工作区设置，因此没有项目特定的设置。我比较了许多设置，但它们都是相同的。这些文件没有 xml 模式。
有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:14:37.970

将 Eclipse->Preferences->Validation->XML-> Validating file : 设置为“Ignore”（两个下拉菜单），如果来自同一工作区的项目具有不同的配置，还请检查此区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:43:44.290

我终于自己找到了解决方案。我认为这两个项目是相同的，但事实并非如此。在检查 .project 文件时，我发现显示 xml 错误的项目有

```
<buildCommand>
 <name>org.eclipse.wst.validation.validationbuilder</name>
 <arguments>
 </arguments>
</buildCommand> 
```

而另一个项目没有。在互联网上搜索validationbuilder后，我发现这确实是xml检查器。将它存在于 .profile 中，会强制在每次构建和/或更改后验证所有 xml 文件，从而导致错误文件出现红叉。在另一个项目中，相同的文件有相同的错误，当手动对此类文件执行“验证”时，该文件将显示相同的错误。但它不会在每次构建后自动显示。
从 .project 中删除此构建命令不会删除红十字，因为它们已经被检测到。它们只能通过修复错误并手动运行验证来清除。另一种方法是从工作区中删除文件：.metadata.plugins\org.eclipse.core.resources.projects\myproject.markers
这将重置所有红叉，直到下一次显式验证。

# javascript - jQuery 显示隐藏元素 - 在 ie7 中跳转

> ID：13415210
> 
> 赞同：0
> 
> 时间：2012-11-16T10:59:03.657
> 
> 标签：javascript, jquery, css, internet-explorer-7

我正在尝试制作一个简单的幻灯片，并且在使用 internet explorer 7 时遇到了一些困难。

导航默认隐藏，以防用户没有 js。如果它们滑动，那么一个箭头会淡入淡出，它在除 ie7 之外的所有浏览器中都能完美运行。在 ie7 中，整个幻灯片会跳下几个像素 - 我相信这与显示有关：没有设置，然后在淡入淡出时更改，但我不太明白。

HTML：

```
<div class="wrap">

        <nav class="home-slideshow">
            <a href="#" onclick="return false"><img src="img/arrow-left.gif" class="arrow-left" height="22" width="13"></a>
            <a href="#" onclick="return false"><img src="img/arrow-right.gif" class="arrow-right" height="22" width="13"></a>
        </nav>

        <ul class="home-slideshow">
            <li>
                <a href="#"><img src="img/slide.jpg" alt="slide" title="slide" height="302" width="960"></a>
            </li>
            <li>
                <a href="#"><img src="img/slide.jpg" alt="slide" title="slide" height="302" width="960"></a>
            </li>
            <li>
                <a href="#"><img src="img/slide.jpg" alt="slide" title="slide" height="302" width="960"></a>
            </li>
        </ul>

    </div> <!-- end wrap --> 
```

JS：

```
// home feature slideshow

    // add navigation
    $('.arrow-right').show();

    // navigation
    $('.arrow-right').on('click', (function() {

        if ($(':animated').length) {
            return false;
        }

        ul = $('ul.home-slideshow');

        noOfSlides = 3;
        width = noOfSlides * 960;
        lastSlide = width - 960;
        currentPos = parseInt(ul.css('margin-left'));

        ul.css('width', width);

        ul.animate({
            "margin-left": currentPos - 960
        }, 1500, "easeInOutQuint", function() {

            if (ul.css('margin-left') == '-' + lastSlide + 'px') {
                $('.arrow-right').fadeOut();
            } else {
                $('.arrow-left').fadeIn();
            } // end if

        }); // end animate

    })); // end arrow-right click

    $('.arrow-left').on('click', (function() {

        if ($(':animated').length) {
            return false;
        }

        ul = $('ul.home-slideshow');

        noOfSlides = 3;
        width = noOfSlides * 960;
        lastSlide = width + 960;
        currentPos = parseInt($(ul).css('margin-left'));

        ul.css('width', width);

        ul.animate({
            "margin-left": currentPos + 960
        }, 1500, "easeInOutQuint", function() {

            if (ul.css('margin-left') == '0px') {
                $('.arrow-left').fadeOut();
            } else {
                $('.arrow-right').fadeIn();
            } // end if

        }); // end animate

    })); // end arrow-left click 
```

CSS：

```
/* Feature Slideshow */
ul.home-slideshow {
    height: 302px;
    overflow: hidden;
}

    ul.home-slideshow li {
        float: left;
    }

    /* Navigation */
    nav.home-slideshow {
        position: relative;
        width: 960px;
    }

    .arrow-left, .arrow-right {
        background: #003592;
        -moz-box-sizing: content-box;
        box-sizing: content-box;
        display: none;
        height: 22px;
        padding: 6px;
        top: 126px;
        position: absolute;
        width: 13px;
        z-index: 1;
    }
        .arrow-right {
            right: 0px;
        }
        .arrow-left {
            left: 0px;
        } 
```

任何人都可以建议解决此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:13:11.437

可能是这样的：（尽管一切看起来都很完美）

尝试将 Ul home-slideshow 向上移动并将 nav 移动到其下方，看看这是否有效：

```
<div class="wrap">

    <ul class="home-slideshow">
        <li>
            <a href="#"><img src="img/slide.jpg" alt="slide" title="slide" height="302" width="960"></a>
        </li>
        <li>
            <a href="#"><img src="img/slide.jpg" alt="slide" title="slide" height="302" width="960"></a>
        </li>
        <li>
            <a href="#"><img src="img/slide.jpg" alt="slide" title="slide" height="302" width="960"></a>
        </li>
    </ul>

    <nav class="home-slideshow">
        <a href="#" onclick="return false"><img src="img/arrow-left.gif" class="arrow-left" height="22" width="13"></a>
        <a href="#" onclick="return false"><img src="img/arrow-right.gif" class="arrow-right" height="22" width="13"></a>
    </nav>

</div> <!-- end wrap --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:42:32.373

嗨，0Neji，我在我的一个项目中遇到了一些 z-index 问题，我使用此代码片段来解决 ie z-index 问题：

看看这是否有效，或者你可以在这里玩这些数字：（我也玩过为我做这项工作）

```
var zIndexNumber = 1000;
$('li').each(function() {
  $(this).css('zIndex', zIndexNumber);
      zIndexNumber -= 10;
}); 
```

# android - 数据库未存储在 Android 手机设备上

> ID：13415211
> 
> 赞同：2
> 
> 时间：2012-11-16T10:59:08.060
> 
> 标签：android, database, cordova, storage, android-sqlite

我正在使用 PhoneGap (Cordova 2.2.0) 开发一个 Android 应用程序 (Android 4.1.2)。

我正在使用[Cordova 存储 API](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)：

我正在关注互联网上的不同示例，以了解如何在 Android 上操作数据库，例如[使用 Phonegap + Jquery mobile 使用 SQLite 创建 Android 应用程序](http://luthfihariz.wordpress.com/2011/10/23/android-sqlite-phonegap-jquerymobile/)

事实上，我的问题是我不确定数据库是否是在真实设备上物理创建的（我正在运行 Android 2.3 的真实设备上进行测试）：

*   我使用文件资源管理器签入文件夹 /data/ 但它已折叠并且无法展开（可能是一些系统管理员问题？！如果是这种情况，我怎样才能成为 root？）
*   我直接在手机上查了下，竟然连Application目录都没有找到！（正常吗？）

=> 所以我不确定是否创建了数据库。

为什么我认为没有创建数据库？

事实上，每次我启动我的应用程序时，表都是空的，尽管我之前已经填充了它。

我在 LogCat 中也有这个错误：

```
sqlite returned error code = 14 msg = cannot open file at source line 25467 
```

我做了一些研究，发现 onCreate 函数中的这段代码可以解决这个问题：

```
 WebSettings settings = super.appView.getSettings(); 
    settings.setJavaScriptEnabled(true); 
    settings.setDatabaseEnabled(true); 
    String databasePath = this.getApplicationContext().getDir("database", 
                           Context.MODE_PRIVATE).getPath(); 
    settings.setDatabasePath(databasePath); 
```

但它并没有解决它。

我的代码很简单，我阅读了一个二维码并将其保存在一个表格中，其中包含以下位置：

```
var scanCode = function() {
    window.plugins.barcodeScanner.scan(
        function(result) {  
        alert("Scanned Code: " + result.text 
                + ". Format: " + result.format
                + ". Cancelled: " + result.cancelled);
        getPosition(result.text);
    }, function(error) {
        alert("Scan failed: " + error);
    });
}

function getPosition(data) {
    navigator.geolocation.getCurrentPosition(
            function(position, result){
                launchDB();
                latitude = position.coords.latitude;
                longitude = position.coords.longitude;
                db.transaction(function(tx) {
                    tx.executeSql("insert into DEMO(code,updated, latitude, longitude) values(?,?,?,?)",[data, new Date(),latitude, longitude]);
                },errorCB,successInsert);
            }, positionError);
}

function launchDB() {
    console.log("launchDB()");
    db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(setupDB, errorCB);
}

function setupDB(tx) {
    console.log("setupDB()");
    tx.executeSql('DROP TABLE IF EXISTS DEMO');
    tx.executeSql("CREATE TABLE IF NOT EXISTS DEMO(id INTEGER PRIMARY KEY,code,updated, latitude, longitude)");
}

function errorCB(err) {
    console.log("Error processing SQL: "+err.code);
}

function successInsert() {
    console.log("successInsert()");
} 
```

我尝试在另一个页面中显示行：

```
function showCode() {
    console.log("showCode()");
    db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(parseDB, errorCB);
}

function parseDB(tx) {
    console.log("parseDB()");
    tx.executeSql('SELECT * FROM DEMO', [], writeEntries, errorCB);
}

function writeEntries(tx, results) {
    console.log("writeEntries()");
    var len = results.rows.length;
    document.write("DEMO table: " + len + " rows found.");
    console.log("DEMO table: " + len + " rows found.");
    for (var i=0; i<len; i++){
        document.write("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).code + " Latitude =  " + results.rows.item(i).latitude+ " Longitude =  " + results.rows.item(i).longitude );
        console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).code + " Latitude =  " + results.rows.item(i).latitude+ " Longitude =  " + results.rows.item(i).longitude);
    }
} 
```

在日志中，我可以看到创建的行。但在 html 页面中没有（但这是另一个问题：JQuery 问题）。但是当我尝试添加另一行时，第一行不再存在。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:53:45.870

每次调用launchDB并删除表（如果存在）时，似乎都会调用setupDB。

文件访问也可能存在一些单独的问题，但该删除表将是首先要解决的问题。

# php - yii：点击cgridview按钮时如何显示CJuiDialog？

> ID：13415212
> 
> 赞同：0
> 
> 时间：2012-11-16T10:59:07.847
> 
> 标签：php

Q：点击cgridview的按钮时如何显示CJuiDialog？

当用户单击 cgridview 的按钮时，我想显示弹出窗口。

这是cgridview的按钮

```
'buttons'=>array(
    'history'=>array(
        'visible'=>'Yii::app()->user->checkAccess("Reviewer") && $data->status == "Reviewing"',
        'url'=>'Yii::app()->createUrl("/history/view", array("id"=>$data->id))',
        'imageUrl'=>Yii::app()->request->baseUrl.'/images/assets/history.png',   
                ), 
```

但我真的不知道该怎么做。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:10:43.073

首先你设置 CJuiDialog：

```
$this->beginWidget('zii.widgets.jui.CJuiDialog', array(
    'id'=>'mydialog',
    // additional javascript options for the dialog plugin
    'options'=>array(
        'title'=>'Dialog box 1',
        'autoOpen'=>false,
    ),
));

echo 'dialog content here';

$this->endWidget('zii.widgets.jui.CJuiDialog'); 
```

然后使用 $buttons 的元素“点击”：

```
'click'=>'$("#mydialog").dialog("open"); return false;', 
```

# r - 如何从 r 中的邻接矩阵中为节点和边缘着色？

> ID：13415215
> 
> 赞同：6
> 
> 时间：2012-11-16T10:59:11.213
> 
> 标签：r, igraph

我在文本文件中有两个动态网络的邻接矩阵，R（igraph）中的周期1和2。我想将第二个网络中的新顶点和边涂成绿色。

例如，第一个网络可能如下所示：

```
 1   3   6   10  11 
1   NA  NA  NA  NA  NA

3   NA  NA  NA  NA  NA

6   NA  NA  NA  8.695652174 13.04347826

10  NA  NA  2.586206897 NA  3.448275862

11  NA  NA  NA  2.919708029 NA 
```

然后更改为第二个网络：

```
 1   2   3   6   10
1   NA  NA  NA  NA  NA

2   NA  NA  NA  NA  NA

3   NA  NA  NA  NA  NA

6   NA  NA  NA  12.32091691 8.022922636

10  NA  NA  7.228915663 NA  NA 
```

在 R 中读取的代码：

```
t1 <- structure(matrix(c(NA,NA,NA,NA,NA, 
                         NA,NA,NA,NA,NA, 
                         NA,NA,NA,8.695652174,13.04347826, 
                         NA,NA,2.586206897,NA,3.448275862,
                         NA,NA,NA,2.919708029,NA),nrow=5, ncol=5, byrow=TRUE),
                dimnames=list(c(1,3,6,10,11), c(1,3,6,10,11)))

t2 <- structure(matrix(c(NA,NA,NA,NA,NA, 
                         NA,NA,NA,NA,NA, 
                         NA,NA,NA,NA,NA, 
                         NA,NA,12.32091691,8.022922636,NA, 
                         NA,NA,7.228915663,NA,NA),nrow=5, ncol=5, byrow=TRUE),
                dimnames=list(c(1,2,3,6,10), c(1,2,3,6,10))) 
```

t3 <-结构（矩阵（c（NA，NA，NA，NA，NA，NA，NA，7.2289，NA，NA，NA，10.4798，NA，NA，NA，NA，NA，8.1364，NA，3.8762，NA ,NA,NA,NA,NA),nrow=5, ncol=5, byrow=TRUE), dimnames=list(c(1,3,4,6,10), c(1,3,4,6, 10)))

如何在 R 中链接这些网络，以便 R 知道哪些顶点是新的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T15:08:04.280

理想情况下，解决方案是调用`graph.union`，但在当前版本中有一些错误，所以这里有一个解决方法。

您正在使用`NA`标记缺失的边缘，这有点奇怪，因为`NA`意味着您不知道边缘是否缺失。我将`NA`用零替换 s 。

```
t1[is.na(t1)] <- 0
t2[is.na(t2)] <- 0

g1 <- graph.adjacency(t1, weighted=TRUE)
g2 <- graph.adjacency(t2, weighted=TRUE)

## Vertices are easy
V(g2)$color <- ifelse(V(g2)$name %in% V(g1)$name, "black", "darkgreen")

## Edges are a bit trickier
el1 <- apply(get.edgelist(g1), 1, paste, collapse="-")
el2 <- apply(get.edgelist(g2), 1, paste, collapse="-")
E(g2)$color <- ifelse(el2 %in% el1, "black", "green")

plot(g2, vertex.label.color="white", vertex.label=V(g2)$name) 
```

![在此处输入图像描述](../Images/be2838ea1edf4fef1f344db253911158.png)

# oracle - Oracle 转储 (.dmp) 文件格式

> ID：13415219
> 
> 赞同：2
> 
> 时间：2012-11-16T10:59:26.427
> 
> 标签：oracle, format, rdbms, dmp

我想知道 Oracle RBMS 使用的 .dmp 文件（转储文件或备份和恢复文件）的内部格式如何。

它遵循任何标准吗？它是否以任何方式优化？

谢谢。

**编辑：**

甲骨文版本：11g

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:37:19.623

> *它是否遵循任何标准。*

是的——Oracle 为其导出格式定义的一种。

> *它以任何方式优化*

如果这就是您的意思，您可以压缩数据。
有关详细信息，请参阅手册：http: [//docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm#BABCAJHC](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm#BABCAJHC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-16T09:26:44.247

首先，有两种不同的格式

> 尽管数据泵导出 (expdp) 功能与原始导出实用程序 (exp) 的功能相似，但它们是完全独立的实用程序，并且它们的文件不兼容。

它遵循任何标准吗？: 文件格式是专有的。我没有在网上找到任何有关格式的流氓文档...

> 转储文件集由一个或多个包含表数据、数据库对象元数据和控制信息的磁盘文件组成。这些文件以专有的二进制格式编写。

优化了吗？
由 a_horse_with_no_name 回答。

**来源：** [https ://docs.oracle.com/html/B28319_02/dp_export.htm](https://docs.oracle.com/html/B28319_02/dp_export.htm)

# wordpress - 仅显示当前图库中的内容

> ID：13415220
> 
> 赞同：0
> 
> 时间：2012-11-16T10:59:37.107
> 
> 标签：wordpress

我想修改以下脚本以发布/显示我当前永久链接的画廊的内容 - 尽管它显示所有画廊的所有图像，但在当前阶段。我怎样才能改变这个？

```
 <?php 
        $wp_query = new WP_Query();
        $wp_query->query( array( 'post_type' => 'galleries', 'posts_per_page' => of_get_option('le_gallery_items'), 'paged' => $paged, 'orderby' => 'menu_order', 'order' => 'ASC') );
        $mod = 1;
        while ( $wp_query->have_posts() ) : $wp_query->the_post(); 
        $attachments = get_children( array('post_parent' => $id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => 'ASC', 'orderby' => 'menu_order') );
        if(has_post_thumbnail()) {
            $src = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full');
            $src = $src[0];
        }
        else{
            foreach ( $attachments as $id => $attachment ) {
                $src = wp_get_attachment_url( $id );
            }
        }
         if ($mod % 3 == 0) {
            echo ' <div class="gallery-entry-img-last">';
         }
         else{
            echo ' <div class="gallery-entry-img">';
         }
         ?> 
```

一些专家的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:39:37.053

如果您只想获取当前页面的所有图像，请使用此代码

```
if ( $images = get_posts(array(
   'post_parent' => $post->ID,
   'post_type' => 'attachment',
   'numberposts' => -1,
   'post_mime_type' => 'image',)))
{
 foreach( $images as $image ) {
 $attachmenturl=wp_get_attachment_url($image->ID);
 $attachmentimage=wp_get_attachment_image_src( $image->ID, full );
 $imageDescription = apply_filters( 'the_description' , $image->post_content );
 $imageTitle = apply_filters( 'the_title' , $image->post_title );

 //echoing the attachment  
 echo '<img src="' . $attachmentimage[0] . '" alt="" />';
 }
}     
else {
     echo "No Image";
}

//to exclude feature image use this
get_post_thumbnail_id( $post->ID );
$thumb_ID = get_post_thumbnail_id( $post->ID );

if ( $images = get_posts(array(
    'post_parent' => $post->ID,
    'post_type' => 'attachment',
    'numberposts' => -1,
    'post_mime_type' => 'image',
    'exclude' => $thumb_ID))) //exluding feature image by its ID 
```

# cmake - CMake 脚本中带尖括号的变量

> ID：13415222
> 
> 赞同：9
> 
> 时间：2012-11-16T10:59:43.533
> 
> 标签：cmake

我注意到 CMake 不仅可以在`${VAR_NAME}`语法中使用变量，还可以在`<VAR_NAME>`语法中使用变量。例如，以下代码：

```
IF(NOT CMAKE_CXX_LINK_EXECUTABLE)
  SET(CMAKE_CXX_LINK_EXECUTABLE
    "<CMAKE_CXX_COMPILER>  <FLAGS> <CMAKE_CXX_LINK_FLAGS> <LINK_FLAGS> <OBJECTS>  -o <TARGET> <LINK_LIBRARIES>")
ENDIF(NOT CMAKE_CXX_LINK_EXECUTABLE) 
```

在名为`CMakeCXXInformation.cmake`.

我没有在文档中找到关于使用尖括号的语法的任何解释。有没有人使用过这样的语法来解释它的含义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:43:41.323

可以使用通常的`${FOO}`语法取消引用常规 CMake 变量。这些取消引用发生在 CMake 运行期间。

在某些时候，CMake 引入了[生成器表达式](https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.htm)，其形式为`$<FOO>`. 从 CMake 的角度来看，这样的表达式是纯字符串。但是，当生成器代码正在运行时（例如，当您运行`make`或时`ninja`），它们会被取消引用。

最后，还有`<FOO>`表达式。这些也是纯字符串，主要用于内部 CMake 代码中，作为后来被命令替换的替代品`string(REPLACE ...)`。例如，在 CMake 中添加对新语言的支持时，此类表达式被广泛使用，`share/cmake/Modules/CMakeAddNewLanguage.txt`有关此的更多信息，请参阅。

[ExternalProject](https://cmake.org/cmake/help/latest/module/ExternalProject.html)命令的文档提到了一些`<FOO>`样式变量。`<SOURCE_DIR>`并且`<BINARY_DIR>`显然会被给定外部项目（不是调用的项目`${CMAKE_SOURCE_DIR}`）的真实源代码和构建目录替换，但我无法找到这组命令的可用替换的完整列表。`${CMAKE_BINARY_DIR}``ExternalProject_*()`

# apache - 如何使用 .htacces 禁用脚本执行

> ID：13415225
> 
> 赞同：1
> 
> 时间：2012-11-16T10:59:49.213
> 
> 标签：apache, .htaccess, security, addhandler

这是我的虚拟主机配置文件

```
<VirtualHost *:80>
    ServerAdmin yo@my-domain.tld

    ServerName my-domain.tld
    ServerAlias www.my-domain.tld

    DocumentRoot /home/my-domain/public_html
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /home/my-domain/public_html>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit, alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined 
</VirtualHost> 
```

我想使用 .htaccess 在 /home/my-domain/public_html/uploads 文件夹中禁用脚本执行；已经尝试过

```
AddHandler cgi-script .php .pl .py .jsp .asp .htm .shtml .sh .cgi
Options -ExecCGI 
```

然后

```
AddType text/plain .html .htm .shtml .php .php3 .phtml .phtm .pl .py .cgi .js 
```

然后

```
<Files ^(*.jpeg|*.jpg|*.png|*.gif)>
order deny,allow
deny from all
</Files> 
```

以及我发现的所有其他指令，但它们都不能阻止脚本执行。

`apachectl -t -D DUMP_MODULES`说 mime_module 已启用并加载

`php_flag engine off`是停止执行 php 文件的唯一指令，但其他类型呢？以及为什么其他 apache 指令不起作用。任何想法... ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:05:11.137

设置：AllowOverride None 在所有目录中

# email - Joomla Jmail addRecipient with name

> ID：13415238
> 
> 赞同：1
> 
> 时间：2012-11-16T11:00:33.500
> 
> 标签：email, joomla, jmail

我开始使用 Jmail 方法通过扩展发送电子邮件：http: [//docs.joomla.org/Sending_email_from_extensions](http://docs.joomla.org/Sending_email_from_extensions)

但是该方法似乎不允许为收件人指定名称，至少我还没有找到方法。

```
$mailer->addRecipient($recipient); 
```

[文档](http://api.joomla.org/1.5/__filesource/fsource_Joomla-Framework_Mail_joomlamailmail.php.html#a156)说：“混合*$recipient：字符串或字符串数​​组 [e-mail address(es)]* ”

任何人都知道如何将名称添加到收件人？

我正在使用 Joomla 2.5，1.5 方法有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:36:49.123

在 Joomla！2.5（或从平台版本 11.1 开始）该函数接受两个参数：

`public function addRecipient($recipient, $name = '')`

在哪里

**$recipient** - 字符串或字符串数​​组 [电子邮件地址]

**$name** - 字符串或字符串数​​组 [name(s)]

用法：

`$mailer = JFactory::getMailer();`

`$mailer->addRecipient('john.doe@example.com', 'John Doe');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:12:53.430

**那是一个BUG。**

我只是面临同样的问题，无论我如何传递参数，它都无法指定名称。

在 Joomla！源代码 /libraries/joomla/mail/mail.php，从第 167 行开始，文档注释说：

```
/**
 * Add recipients to the email
 *
 * @param   mixed  $recipient  Either a string or array of strings [email address(es)]
 * @param   mixed  $name       Either a string or array of strings [name(s)]
 *
 * @return  JMail  Returns this object for chaining.
 *
 * @since   11.1
 */ 
```

很好，但变量 $name**永远不要**在函数中使用：

```
public function addRecipient($recipient, $name = '')
{
    // If the recipient is an array, add each recipient... otherwise just add the one
    if (is_array($recipient))
    {
        foreach ($recipient as $to)
        {
            $to = JMailHelper::cleanLine($to);
            $this->AddAddress($to);
        }
    }
    else
    {
        $recipient = JMailHelper::cleanLine($recipient);
        $this->AddAddress($recipient);
    }

    return $this;
} 
```

# java - 使用枚举值而不使用枚举类名

> ID：13415243
> 
> 赞同：15
> 
> 时间：2012-11-16T11:00:38.737
> 
> 标签：java, class, inheritance, enums

我在接口中使用静态枚举，并希望在扩展类中使用它。

我有以下接口：

```
public interface StateSupport {
    public static enum State {
        NEW,
        UNCHANGED,
        UPDATED;
    }
} 
```

和

```
public interface Support extends StateSupport  {
    public void do(Context arg0);
} 
```

最后是一堂课

```
public class MyClassUtil implements Support {
    public void do(Context arg0){ 
        MyClass obj = new MyClass(NEW);
    } 
```

}

关键是我不想写“State.NEW”，只是“NEW”:-)

那么如何在不使用枚举名称的情况下做到这一点。有办法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-16T11:03:06.663

您可以使用静态导入：

```
import static com.yourpackage.StateSupport.State.NEW;
import static com.yourpackage.StateSupport.State.UNCHANGED;
import static com.yourpackage.StateSupport.State.UPDATED; 
```

或简而言之（不鼓励）：

```
import static com.yourpackage.StateSupport.State.*; 
```

# android - android Edittext提示问题

> ID：13415244
> 
> 赞同：6
> 
> 时间：2012-11-16T11:00:50.233
> 
> 标签：android, android-layout, android-edittext

我的布局文件如下：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/page_background"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/label_background" >

        <com.olacabs.customer.model.TextViewPlus
            android:id="@+id/header"
            android:layout_width="fill_parent"
            android:layout_height="54dp"
            android:background="@color/label_background"
            android:gravity="center"
            android:text="@string/invite_email"
            android:textColor="@color/white"
            android:textSize="22dp"
            android:textStyle="bold"
            custom:customFont="Roboto-Regular.ttf" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:descendantFocusability="beforeDescendants"
        android:focusableInTouchMode="true"
        android:gravity="top"
        android:orientation="vertical"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" >

        <com.olacabs.customer.model.TextViewPlus
            android:id="@+id/emailHint"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_marginBottom="10dp"
            android:layout_marginTop="15dp"
            android:text="@string/enter_your_friend_s_email_address"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/heading_text_color"
            custom:customFont="Roboto-Regular.ttf" />

        <TextView
            android:id="@+id/errorText"
            style="@style/errorText"
            android:layout_marginBottom="10dp"
            android:visibility="gone" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="100dp"
            android:background="@drawable/round_corners"
            android:descendantFocusability="beforeDescendants"
            android:focusableInTouchMode="true"
            android:padding="10dp" >

            <EditText
                android:id="@+id/emailText"
                style="@style/emailText"
                android:layout_height="fill_parent"
                android:background="@android:color/transparent"
                android:hint="@string/email_ids_separated_by_commas"
                android:imeOptions="actionGo" />

        </LinearLayout>

        <com.olacabs.customer.model.ButtonPlus
            android:id="@+id/inviteButton"
            style="@style/button_1"
            android:layout_width="fill_parent"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:paddingBottom="10dp"
            android:paddingTop="10dp"
            android:text="@string/invite"
            android:textStyle="normal"
            custom:customFontButtonText="Roboto-Regular.ttf" />
    </LinearLayout>
</LinearLayout> 
```

活动看起来像这样 ![布局显示](../Images/6b925b89f2124e82e5192f77f5cc6154.png)

但是，我希望文本`Use comma....`显示在编辑文本的顶部而不是中心。我尝试设置`gravity:top`，但没有帮助。此外，如您所见，整个提示没有显示，其中一些被隐藏（我希望其余的出现在下一行）。我该如何纠正这两个问题？

我的`emailText`风格是：

```
<style name="emailText" parent="android:Widget.EditText">
    <item name="android:ems">10</item>
    <item name="android:inputType">textEmailAddress</item>
    <item name="android:layout_width">fill_parent</item>
    <item name="android:hint">Email</item>
    <item name="android:textColorHint">#B8B8B8</item>
    <item name="android:textSize">15dp</item>
    <item name="android:layout_height">45dp</item>
    <item name="android:shadowColor">@color/white</item>
</style> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:20:10.453

看来您忘记了`android:layout_width`标签。你添加这个，`android:gravity`它应该可以工作。

试试这个代码：

```
 <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="100dp"
                    android:descendantFocusability="beforeDescendants"
                    android:focusableInTouchMode="true"
                    android:background="@drawable/round_corners" >

                    <EditText
                        android:id="@+id/emailText"
                        style="@style/emailText"
                        android:layout_height="fill_parent"
                        android:layout_width="fill_parent"
                        android:background="@android:color/white"
                        android:hint="@string/email_ids_separated_by_commas"
                        android:gravity="top"
                        android:imeOptions="actionGo"
                        android:layout_margin="10dp" />

                </LinearLayout> 
```

结果：

![在此处输入图像描述](../Images/9c3f344f026d00b7c13505960bc5f677.png)

编辑：

`android:padding="10dp"`从 wrapper更改`android:layout_margin="10dp"`为 edittext

# c++ - boost::interprocess - 在共享内存中分配对齐？

> ID：13415245
> 
> 赞同：1
> 
> 时间：2012-11-16T11:00:52.293
> 
> 标签：c++, boost, shared-memory, memory-alignment, boost-interprocess

如果我使用`allocate_aligned`在一块共享内存中分配一个对齐的内存块，那么我如何在另一个进程中识别同一个块？例如

```
managed_shared_memory managed_shm(open_or_create, "SharedMemory", 65536);
void *ptr = managed_shm.allocate_aligned(256, 16); 
```

然后我如何`ptr`从另一个进程中找到？

对于我只是使用的非对齐分配`find_or_construct`，然后显然有一个与分配相关联的名称，这使得可以从另一个进程中找到分配。然而，似乎没有任何方法可以进行对齐分配，`find_or_construct`显然我必须错过一些关于如何识别匿名分配的基本点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:20:06.160

[下面包含的文档](http://www.boost.org/doc/libs/1_47_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_memory_segment_features)中的示例。这适用于指向内存返回的 allocate_aligned 方法以及 vanilla allocate 方法的指针。

```
//Process A obtains the offset of the address
managed_shared_memory::handle handle = 
   segment.get_handle_from_address(processA_address);

//Process A sends this address using any mechanism to process B

//Process B obtains the handle and transforms it again to an address
managed_shared_memory::handle handle = ...
void * processB_address = segment.get_address_from_handle(handle) 
```

# http - gstreamer/libsoup 无法在 eth1 上连接？

> ID：13415253
> 
> 赞同：0
> 
> 时间：2012-11-16T11:01:21.333
> 
> 标签：http, networking, gstreamer

我在具有两个网络接口 eth0 和 eth1 的嵌入式 Linux 环境中运行 gstreamer，使用类似这样的管道：

```
gst-launch souphttpsrc location=http://something.com/something.mp4 ! filesink location=./something.mp4 
```

eth0 在我的开发 LAN 上，而 eth1 在带有 Internet 网关的 LAN 上。wget 可以通过 http 从中检索文件，但 gstreamer/libsoup 设置仅适用于 eth0 子网上的 URL。对于 eth1，它就像无法连接一样坐在那里。

我是否需要在 gst/libsoup 中设置一些东西才能通过 eth1 访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:24:15.270

归结为一些 DNS 配置错误，与接口无关。

# database - 如何在 oracle 11g 中仅导出和导入数据？

> ID：13415257
> 
> 赞同：4
> 
> 时间：2012-11-16T11:01:26.837
> 
> 标签：database, oracle, database-administration

我只想导出我的主表上的数据，然后将其导入到同一 oracle 11g 上的其他服务器。有没有可能做到这一点。使用 exp 命令它会转储完整的数据以及我不想要的模式。我只想将数据转储并导入到其他位置。

请帮帮我。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:38:42.687

您不能使用[原始的 export ( `exp`) 实用程序](http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_export.htm#BABBHCIE)，但使用较新的数据泵`expdp`，您可以使用[`content`参数](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_export.htm#sthref61)仅导出数据：

```
expdp content=data_only ... 
```

我`exp`认为最接近的等价物是设置[`ignore=y`](http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_import.htm#sthref2201)导入；它会尝试重新创建模式对象，但不会抱怨它们已经存在。但是由于不推荐使用原始实用程序，因此无论如何您都应该使用数据泵。

# visual-studio-2010 - 无法附加到应用程序“iisexpress.exe”

> ID：13415258
> 
> 赞同：7
> 
> 时间：2012-11-16T11:01:35.350
> 
> 标签：visual-studio-2010

我正在尝试运行我的 Web 应用程序并收到此错误

```
Unable to attach to application 'iisexpress.exe' (PID 708) using '<my machine name>'.  The version of clr.dll in the target does not match the one mscordacwks.dll was built for.  Do you want to continue anyway? 
```

这是昨天的工作。我有一种感觉，有些东西在某处损坏了。

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T15:51:18.417

我刚刚遇到同样的问题，我偶然发现了你的问题。但后来我也偶然发现了这些：

[clr.dll 的版本与为 mscordacwks.dll 构建的版本不匹配](https://stackoverflow.com/questions/5768138/the-version-of-clr-dll-does-not-match-the-one-mscordacwks-dll-was-built-for)

[目标中 clr.dll 的版本与为 mscordacwks.dll 构建的版本不匹配](https://stackoverflow.com/questions/5784310/the-version-of-clr-dll-in-the-target-does-not-match-the-one-mscordacwks-dll-was)

三件事中的一件似乎对每个人都有效。

1.  重新启动 Visual Studio。
2.  如果您最近进行了 Windows 更新，但仍需重新启动，请重新启动计算机。
3.  安装此服务包[http://www.microsoft.com/en-us/download/details.aspx?id=23691](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T14:33:53.430

您可以打开任务管理器并结束名为“iisexpress.exe”的进程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T08:48:58.263

如果无法终止进程，请重新启动“IIS Express 进程”，然后重新启动 Visual Studio。![在此处输入图像描述](../Images/ed7be9fd2b6ca06084e63b7de3725807.png)

# java - wicket：返回按钮上一页

> ID：13415264
> 
> 赞同：1
> 
> 时间：2012-11-16T11:01:56.510
> 
> 标签：java, javascript, html, wicket

首先，我不得不说我是 Wicket 的新手。我想实现一个后退按钮，以便当有人点击它时，他属于上一页。

有人可以给我第一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:48:59.250

一个快速的解决方案是使用 JavaScript 来完成。

```
window.history.back(); 
```

在这里查看：http: [//www.w3schools.com/jsref/met_his_back.asp](http://www.w3schools.com/jsref/met_his_back.asp)

# c++ - 无符号/有符号不匹配

> ID：13415266
> 
> 赞同：0
> 
> 时间：2012-11-16T11:02:00.253
> 
> 标签：c++, visual-c++

我无法修复此警告消息。

警告 C4018：“<”：有符号/无符号不匹配

谁能帮我找出问题所在？它位于 bool 函数中`while (i < bin.length())`

```
#include<iostream>
#include<string>
#include<math.h>
using namespace std;

void intro();
bool isBinary(string);
void decToBin();
string getBin();
void binToDec(string);
char getChoice();
char getContinue();

int main()
{
    char choice, cont;
    string bin;

    intro();

    do{
        choice = getChoice();
            if(choice == 'b' || choice == 'B')
            {
                bin = getBin();
                bool binIsBinary = isBinary(bin);
                if(binIsBinary)
                    binToDec(bin);
            }
            else
            {
                    cout<<"Error!!! Your Number is Not Binary."<<endl;
                    cin.clear();

            }
            if(choice == 'd' || choice == 'B')
                decToBin();

        cont = getContinue();
      }
    while(cont == 'y' || cont == 'Y');
}

void intro()
{ 
    cout << "This program coverts decimal numbers to binary and vice versa."<<endl;
}

bool isBinary(string bin)
{
   int i=0;
   bool binIsBinary = true;

   while (i < bin.length())
   {
      if( bin.at(i) != '1' && bin.at(i) != '0' )
          {
          binIsBinary = false;
          }
          i++;
   }

   return binIsBinary;
}

void decToBin()
{
   int dec;
   string bin;

   cout << endl << "Please enter a decimal number:"; 
   cin  >>  dec;
   bin = "";

   while (dec != 0)
   {
      if (dec % 2 == 0)
         bin.insert(0, "0");
      else
         bin.insert(0, "1");
      dec = dec / 2;
   }
   cout << "The equivalent binary number is: " << bin << endl << endl;

}

string getBin()
{   
    string bin;

    cout << endl << "Enter a binary number: ";
    cin  >>  bin;

    return bin;
}

void binToDec(string bin)
{
    double deci;
    double len;

   len = bin.length();

   deci = 0;
   for (int i=0; i<len; i++)
       if (bin.at(i) == '1')
           deci = deci + pow(2, len-i-1);

   cout << "The equivalent decimal number is: " << deci << endl    
        << endl;
}

char getChoice()
{
    char choice;

    cout << endl << "If you would like to convert a binary to a decimal then enter b."<<endl; 
    cout << "If you would like to convert a decimal to a binary then enter d. ";
    cin >> choice;

    return choice;
}

char getContinue()
{
    char cont;

    cout << "Would you like to convert another number(Y/N)? ";

    cin >> cont;

    return cont;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:03:55.023

好吧，`i`作为`int`, 并且`bin.length()`是`unsigned`，因此不匹配。要删除警告，请制作 i `unsigned`。

# arrays - 比较多维数组值

> ID：13415268
> 
> 赞同：1
> 
> 时间：2012-11-16T11:02:03.983
> 
> 标签：arrays, multidimensional-array

**我有一个数组：**

```
 array (
     [0] => Array (
         [host] => google.nl
         [class] => IN
         [ttl] => 279310
         [type] => NS
         [target] => ns3.google.com)
     [1] => Array (
         [host] => google.nl
         [class] => IN
         [ttl] => 279310
         [type] => NS
         [target] => ns4.google.com)
     [2] => Array (
         [host] => google.nl
         [class] => IN
         [ttl] => 279310
         [type] => NS
         [target] => ns2.google.com) 
```

这个数组是用`dns_get_record ()`函数制作的。这是每个域的不同数量的变量。我如何与其他目标进行比较`[0]['target']`，`[1]['target']`以及`[2]['target']`是否还有更多目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:27:53.820

我不知道这段代码是用什么语言写的，这是C#\Java中解决这个问题的一个例子，当然还有很多其他的方法。

使用一个简单的for循环，意思是：如果大数组的名字是“mainArray”，你需要做：

```
foreach (int i=0;i<mainArray.length();i++)
{
  if !(mainArray[i]["target"].Equals(mainArray[i+1]["target"]))
       return false;
}
return true; 
```

# c++ - 与 I/O 完成端口的“NumberOfConcurrentThreads”相关的“可运行线程”的定义是什么？

> ID：13415269
> 
> 赞同：2
> 
> 时间：2012-11-16T11:02:05.447
> 
> 标签：c++, winapi, boost, boost-asio

关于[CreateIoCompletionPort 中并发线程数](https://stackoverflow.com/questions/7016011/number-of-concurrent-threads-in-createiocompletionport)的选定答案，我对 I/O 完成端口文档中“可运行线程”的定义有疑问：

> 当与完成端口关联的可运行线程的总数达到并发值时，系统会阻止与该完成端口关联的任何后续线程的执行，直到可运行线程的数量下降到并发值以下。

我了解`GetQueuedCompletionStatus()`由于发布完成数据包而被唤醒的线程可能会由于其他原因而发现自己处于睡眠状态（即，它尚未完成其工作并且尚未返回调用`GetQueuedCompletionStatus()`，但正在睡眠，因此 - 如果我正确理解 -根据上述定义无法*运行）。*

我特别想知道的是：假设上面的线程在其处理过程中正在休眠，因为它产生了另一个线程并正在等待另一个线程完成？

如果线程的子线程处于可运行状态，该线程是否会被视为处于“可运行”状态？

如果没有，似乎无法从与完成端口关联的线程中生成工作线程，而不冒其他线程将被唤醒的危险，这样*运行*线程的总数就会超过`NumberOfConcurrentThreads`.

例如 - 假设我有 50 个线程在等待`GetQueuedCompletionStatus()`，并发线程数为 5，同时发布 20 个完成数据包触发非常长的任务，并且每次线程唤醒执行其中一个任务时，它立即产生一个新的线程完成工作并等待该线程完成长任务，然后再次返回调用`GetQueuedCompletionStatus()`。

在这个例子中，20 个线程会被唤醒并产生 20 个并行工作的子线程，还是只有 5 个线程？

（注意：附录：在我的特定情况下，我正在使用 Boost.Asio 实现一个工作线程池 - 它在内部利用 I/O 完成端口 - 我的工作线程使用 JNI 调用 Java；在内部，Java 代码产生了自己的工作线程 - 所以这是我关心的问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:27:11.407

寻找此类问题答案的地方始终是 Jeffrey Richter 和 Christophe Nasarre 的“ [Windows Via C/C++ (PRO-Developer)](http://www.microsoft.com/learning/en/us/book.aspx?id=11241&locale=en-us) ”。

在我的副本的第 327 页上，它清楚地解释了 I/O 完成端口跟踪它从调用（或等效）释放的线程的线程 id，`GetQueuedCompletionStatus()`并且只要它们不调用任何线程，就将这些线程计为“正在运行”使它们处于等待状态的功能。

因此，在您的示例中，假设调用的线程`GetQueuedCompletionStatus()`正在等待由 JNI 创建的线程，则该线程被视为“未运行”，因此 IOCP 可以释放另一个线程`GetQueuedCompletionStatus()`来服务请求。如果您的所有线程最终都将调用 JNI 并创建另一个线程，那么我认为您的设计存在问题，因为您基本上是在创建一个“每个事件线程”设计，该设计可能无法扩展，而 IOCP 设计则不能'不要创建外部线程...

它是生成线程的 JNI 层的函数，还是纯粹在您调用的 Java 代码中？如果是后者，那么我建议尽可能重新设计java代码......

# windows-8 - Esent 在 Windows 8 上崩溃

> ID：13415275
> 
> 赞同：0
> 
> 时间：2012-11-16T11:02:22.217
> 
> 标签：windows-8, esent, edb

我已经在我的项目中广泛使用 ESENT，我真的很喜欢它的简单和快速。也很稳定！！

**但是我对Windows 8**有一个巨大的问题！每当我调用 JetSetSystemParameter 以外的东西时，无论我如何链接到 esent.dll（动态或静态），dll 都会崩溃，将我的应用程序拖下悬崖。

事件查看器告诉我以下信息：异常代码：0xc0000090 错误偏移量：0x0003090e esent ver：6.2.8400.0

有人在 Windows 8 上遇到过类似的问题吗？

# c# - 如何在 Orchard 中创建表关系？

> ID：13415278
> 
> 赞同：2
> 
> 时间：2012-11-16T11:02:26.663
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model, orchardcms

我希望 MachineRecord 包含一个 GroupRecord Id，如下所示：

**机器记录**

Id
姓名
号码
GroupRecord

**集体记录**

标识
名称

我试过的：

我试图在模型 a
`public virtual GroupRecord GroupRecord { get; set; }`
和数据库列 name中创建属性`GroupRecord_Id`，但不知何故，这不起作用，尝试了其他一些方法，例如为属性提供 name`GroupRecordId`和 table 列`GroupRecord`等等，但都没有结果。

所以问题是，如何让它工作，以便 MachineRecord 表包含 GroupRecord Id？

*机器.cs*

```
namespace PowerAll.Voorraad.Models
{
  public class MachineRecord
  {
    public virtual int Id { get; set; }
    public virtual int MachineNumber { get; set; }
    public virtual string Title { get; set; }
    public virtual string Description1 { get; set; }
    public virtual string Description2 { get; set; }
    public virtual string Description3 { get; set; }
    public virtual string Description4 { get; set; }
    public virtual string Description5 { get; set; }
    public virtual string Description6 { get; set; }
    public virtual string SerialNumber { get; set; }
    public virtual GroupRecord GroupRecord { get; set; }
    public virtual char PriceType { get; set; }
    public virtual decimal Price { get; set; }
    public virtual int Year { get; set; }
  }
} 
```

*组.cs*

```
namespace PowerAll.Voorraad.Models
{
  public class GroupRecord
  {
    public virtual int Id { get; set; }
    public virtual string GroupName { get; set; }
  }
} 
```

*迁移.cs*

```
namespace PowerAll.Voorraad
{
  public class Migrations : DataMigrationImpl
  {
    public int Create()
    {
      SchemaBuilder.CreateTable("GroupRecord", table => table
        .Column<int>("Id", column => column.PrimaryKey().Identity())
        .Column<string>("GroupName", column => column.WithLength(100))
      );

      SchemaBuilder.CreateTable("MachineRecord", table => table
        .Column<int>("Id", column => column.PrimaryKey().Identity())
        .Column<int>("MachineNumber", column => column.NotNull())
        .Column<string>("Title", column => column.NotNull().WithLength(40))
        .Column<string>("Description1", column => column.WithLength(70))
        .Column<string>("Description2", column => column.WithLength(70))
        .Column<string>("Description3", column => column.WithLength(70))
        .Column<string>("Description4", column => column.WithLength(70))
        .Column<string>("Description5", column => column.WithLength(70))
        .Column<string>("Description6", column => column.WithLength(70))
        .Column<string>("SerialNumber", column => column.WithLength(20))
        .Column<int>("GroupRecord_id", column => column.NotNull())
        .Column<char>("PriceType", column => column.NotNull().WithLength(1))
        .Column<decimal>("Price", column => column.NotNull())
        .Column<int>("Year", column => column.WithLength(4))
      );

      // Return the version that this feature will be after this method completes
      return 1;
    }
  }
} 
```

*机器控制器.cs*

```
namespace PowerAll.Voorraad.Controllers
{
  [Themed]
  public class MachineController : Controller
  {
    private readonly IRepository<MachineRecord> machineRecords;

    public MachineController(IRepository<MachineRecord> MachineRecords) {
        machineRecords = MachineRecords;
    }

    public ActionResult List()
    {
        var items = machineRecords.Table;

        return View(items);
    }
  }
} 
```

编辑2：

多亏了内啡肽，我走到了这一步，但是当我尝试执行时，`AddDummyData()`我得到了这个错误：`could not insert: [PowerAll.Voorraad.Models.MachineRecord][SQL: INSERT INTO PowerAll_Voorraad_MachineRecord (MachineNumber, Title, Description1, Description2, Description3, Description4, Description5, Description6, SerialNumber, PriceType, Price, Year) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?); select SCOPE_IDENTITY()]`当我通过代码时，所有值都被正确发布。

这是我的 AddDummyData()：

```
public void AddDummyData()
{
  var GroupRecord = new GroupRecord { GroupName = "Oldtimers" };

  groupRecords.Create(GroupRecord);

  var MachineRecord = new MachineRecord
  {
    MachineNumber = 100001,
    Title = "Landini L25",
    Description1 = "Desc 1",
    Description2 = "Desc 2",
    Description3 = "Desc 3",
    Description4 = "Desc 4",
    Description5 = "Desc 5",
    Description6 = "Desc 6",
    SerialNumber = "100000",
    GroupRecord = GroupRecord,
    PriceType = 'I',
    Price = 7999.99m,
    Year = 1954
  };

  machineRecords.Create(MachineRecord);
} 
```

编辑 3：

现在它正在工作，这是我的工作代码（对于那些也在为此苦苦挣扎的人）

*迁移.cs*

```
 public class Migrations : DataMigrationImpl
  {
    public int Create()
    {
      SchemaBuilder.CreateTable("MachineRecord", table => table
        .Column<int>("Id", column => column.PrimaryKey().Identity())
        .Column<int>("GroupRecord_Id")
        .Column<int>("MachineNumber", column => column.NotNull())
        .Column<string>("Title", column => column.NotNull().WithLength(40))
        .Column<string>("Description", column => column.WithLength(70))
        .Column<char>("PriceType", column => column.NotNull().WithLength(1))
        .Column<decimal>("Price", column => column.NotNull())
        .Column<int>("Year", column => column.WithLength(4))
      );

      SchemaBuilder.CreateTable("GroupRecord", table => table
        .Column<int>("Id", column => column.PrimaryKey().Identity())
        .Column<string>("Name")
      );

      return 1;
    }
  } 
```

*机器记录.cs*

```
 public class MachineRecord
  {
    public virtual int Id { get; set; }
    public virtual int MachineNumber { get; set; }
    public virtual string Title { get; set; }
    public virtual string Description { get; set; }
    public virtual GroupRecord GroupRecord { get; set; }
    public virtual char PriceType { get; set; }
    public virtual decimal Price { get; set; }
    public virtual int Year { get; set; }
  } 
```

*GroupRecord.cs*

```
 public class GroupRecord
  {
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:51:04.377

问题的关键在于如何构建模型以及如何在 Migrations.cs 中定义它们的关系。

这是我过去使用过的解决方案。

首先，包含到第二个类的链接的类。

```
public class CaptureRecord : ContentPartRecord {
   public virtual string CaptureName { get; set; }
   public virtual OptionsRecord OptionsRecord { get; set; }   
} 
```

注意：继承自给`ContentPartRecord`你一个 ID。

然后是第二个类（在这种情况下我不需要继承，`ContentPartRecord`所以我自己添加了 ID）

```
public class OptionsRecord {
  public virtual int Id { get; set; }
  public virtual string Name { get; set; }
} 
```

在 Migrations.cs 中，在 CaptureRecord 表定义中添加 OptionRecord ID

```
public class Migrations : DataMigrationImpl
{
    SchemaBuilder.CreateTable("CaptureRecord",
            table => table
            .ContentPartRecord()
            .Column<string>("CaptureName")
            .Column<int>("OptionsRecord_id");

    SchemaBuilder.CreateTable("OptionsRecord",
            table => table
            .Column<int>("Id", column => column.PrimaryKey().Identity())
            .Column<string>("Name"));

    return 1;
} 
```

希望这将在如何构建两个表之间的关系方面为您提供正确的方向。

编辑：要将内容添加到这种结构中，您需要使用`IRepository`实例自己手动管理。

所以在你的控制器中`AddDummyData`给出了一个例子。

```
 public class MachineController : Controller {
   private readonly IRepository<MachineRecord> _machineRecords;
   private readonly IRepository<GroupRecord> _groupRecords;

   public MachineController(IRepository<MachineRecord> machineRecords, IRepository<GroupRecord> groupRecords) {
     _machineRecords = machineRecords;
     _groupRecords = groupRecords;
   }

   public void AddDummyData(){
     // create a grouprecord in the database
     _groupRecords.Create(new GroupRecord { Id = 1, GroupName = "One" });

     // get the groupRecord just created (annoying that Create doesnt return the instance, 
     // but I dont know a way around this
     var groupRecord = _groupRecords
        .Fetch(x => x.Id == 1)
        .Single();

     // create a machine return with the grouprecord assigned to the GroupRecord property 
     _machineRecords.Create(new MachineRecord { 
        Id = 1,
        ..
        GroupRecord = groupRecord
     });
   }
 } 
```

# c++ - 指向函数的指针不会编译

> ID：13415281
> 
> 赞同：0
> 
> 时间：2012-11-16T11:02:36.183
> 
> 标签：c++

```
//mediafactory.h

class MediaFactory{
public:
        typedef Media* (*funPointer)();
    funPointer somePointer;
}

//mediafactory.cpp

Media* MediaFactory::returnMedia(){

} 
```

当我尝试做

```
somePointer = returnMedia; 
```

我收到此错误：

```
1   IntelliSense: a value of type "Media *(MediaFactory::*)()" cannot be assigned to an entity of type "MediaFactory::funPointer"   c:\Users\...\mediafactory.cpp   37 
```

但是，如果我将函数更改为下面的代码，它将编译并工作

```
Media* returnMedia(){   //without scope

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:12:34.433

`MediaFactory::returnMedia()`是一个*非静态成员函数*，只能通过`MediaFactory`.

`typedef Media* (*funPointer)();`定义一个指向*静态*或非*成员*函数的指针，该函数在没有任何对象的情况下被调用。因此，它是一种不同的类型，与指向成员函数的指针不兼容。

如果您不需要它指向成员函数，则将其设为`returnMedia()`静态或非成员（正如您在问题末尾所指出的那样）。

如果你确实需要它指向一个成员函数，那么你需要一个指向成员的指针：

```
typedef Media* (MediaFactory::*funPointer)(); 
```

可以设置为指向成员函数：

```
somePointer = &MediaFactory::returnMedia; 
```

并且可以在工厂对象上调用：

```
Media * media = (someFactory.*somePointer)(); 
```

或者，您可能希望在设置指针时将函数指针绑定到对象，而不是在使用它时。在这种情况下，您可以使用`std::function`（或者`boost::function`如果您使用过时的编译器）来存储任意可调用对象：

```
typedef std::function<Media*()> function;
function someFunction;

someFunction = std::bind(&MediaFactory::returnMedia, &someFactory);

Media * media = someFunction(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:05:54.577

如果没有此类的实例，则无法将类的方法分配给全局函数指针。

# c# - 具有自定义格式的 C# XmlDocument

> ID：13415283
> 
> 赞同：0
> 
> 时间：2012-11-16T11:02:49.333
> 
> 标签：c#, .net, xml, xmldocument

这段代码：

```
XmlNode columnNode = null;                               
columnNode = xmlDoc.CreateElement("SYSID");
columnNode.InnerText = ""; // Empty string
newRowNode.AppendChild(columnNode); 
```

...做这个：

```
<SYSID>
</SYSID> 
```

我想要这个，当字符串为空时：

```
<SYSID></SYSID> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:47:44.710

如果您有另一个需要该格式的工具，那么另一个工具是错误的 - 它无法读取 XML。因此，如果您可以控制其他工具，我建议您修复它，而不是试图强迫您的代码匹配它。

如果您无法修复其他工具...

如果您只是构建一个 Document 以将其写入磁盘，那么您可以使用流并自己直接写入元素（作为简单文本）。这将比使用 XmlDoc 更快（并且可能更容易）。

作为对此的改进，您可以使用 XmlWriter 写入元素，但是当您写入空元素时，将原始文本写入流（即 writer.WriteRaw("<SYSID></SYSID>\n ")) 以便您控制这些特定元素的格式。

如果您需要构建内存中的 XmlDocument，那么在很大程度上，您必须忍受它在要求将其序列化到磁盘时使用的格式（除了 PreserveWhitespace 等基本设置，您要求文档处理存储信息，因此您对 XmlDocument 封装的功能失去了很多控制）。在这种情况下，我能想到的最佳建议是将 XmlDocument 写入 MemoryStream，然后对该内存流进行后处理以从空元素中删除换行符。（呸！）

# android - java.lang.illegalstateexception: 已经在这个 layoutinflater 上设置了一个工厂

> ID：13415284
> 
> 赞同：9
> 
> 时间：2012-11-16T11:02:57.583
> 
> 标签：android, background-color, options-menu, android-optionsmenu, oncreateoptionsmenu

我试图在我的 android 应用程序中更改选项菜单的背景颜色。我正在使用 ActionBarSherlock 库。我已经尝试使用此代码更改选项菜单的背景颜色

[https://stackoverflow.com/a/8475357/584095](https://stackoverflow.com/a/8475357/584095)

但我最终得到了一个例外“java.lang.illegalstateexception：一个工厂已经在这个layoutinflater上设置”在行

LayoutInflater.setFactory();

我不知道这段代码有什么问题。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-27T18:27:41.147

自版本 22.1.0 以来，支持库发生了[变化](http://developer.android.com/tools/support-library/index.html#)。

如果您尝试调用，您将收到 IllegalStateException`getLayoutInflater().setFactory()`

您应该使用新的 api

*   [LayoutInflaterCompat.setFactory()](http://developer.android.com/reference/android/support/v4/view/LayoutInflaterCompat.html)
*   [AppCompatActivity](http://developer.android.com/reference/android/support/v7/app/AppCompatActivity.html)而不是已弃用`ActionBarActivity`

或者干脆使用旧版本

*   `com.android.support:appcompat-v7:22.0.0`
*   `com.android.support:appcompat-v4:22.0.0`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T13:23:11.933

发生这种情况是因为您使用的是兼容性库。它设置了自己的工厂来处理特定于平台的布局。在调用 super.onCreate() 之前，您可以尝试在 onCreate() 方法中设置自己的工厂。这将不允许兼容性库覆盖工厂，并且您将无法从 xml 文件中扩充片段，但样式应该可以工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-04T05:51:26.947

要保持兼容性库正常工作并避免“java.lang.illegalstateexception：已在此 layoutinflater 上设置工厂”，您需要获取对已设置工厂的最终引用并在您自己的 Factory.onCreateView 中调用其 onCreateView。在此之前，必须使用自省技巧来允许您将工厂再设置一次 LayoutInflater ：

```
LayoutInflater layoutInflater = getLayoutInflater();
final Factory existingFactory = layoutInflater.getFactory();
// use introspection to allow a new Factory to be set
try {
    Field field = LayoutInflater.class.getDeclaredField("mFactorySet");
    field.setAccessible(true);
    field.setBoolean(layoutInflater, false);
    getLayoutInflater().setFactory(new Factory() {
        @Override
        public View onCreateView(String name, final Context context, AttributeSet attrs) {
            View view = null;
            // if a factory was already set, we use the returned view
            if (existingFactory != null) {
                view = existingFactory.onCreateView(name, context, attrs);
            }
            // do whatever you want with the null or non-null view
            // such as expanding 'IconMenuItemView' and changing its style
            // or anything else...
            // and return the view
            return view;
        }
    });
} catch (NoSuchFieldException e) {
    // ...
} catch (IllegalArgumentException e) {
    // ...
} catch (IllegalAccessException e) {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-29T02:37:33.623

这对我有用：

```
LayoutInflater inflater = LayoutInflater.from(context);
if (inflater.getFactory() != null) {
    inflater = inflater.cloneInContext(context);
}
inflater.setFactory(factory); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-01T11:18:33.357

我遇到了同样的问题，但没有答案帮助我。

就我而言：

*   我正在扩展 AppCompatActivity

*   项目定位 API 27

*   实现支持 lib 27.1.1

解决方案：显然，现在不需要将Factory设置为LayoutInflater，它会崩溃或被忽略。只需覆盖 AppCompatActivity 中的两个方法 onCreateView(...) （来自 android.support.v4.app.BaseFragmentActivityApi14）

```
public class myActivity extends AppCompatActivity  {
    ...
    @Override
    public View onCreateView(View parent, String name, Context context, AttributeSet attrs) {
        if (name.compareTo("EditText") == 0) {
            CustomEdit newEdit = new CustomEdit(this,attrs); 
            return newEdit;
        }
        return super.onCreateView(parent, name, context, attrs);
    }
    @Override
    public View onCreateView(String name, Context context, AttributeSet attrs) {
        return onCreateView(null, name, context, attrs);
    }
    ...
} 
```

# css - CSS：div位置错位

> ID：13415285
> 
> 赞同：0
> 
> 时间：2012-11-16T11:03:00.050
> 
> 标签：css

在我的电脑上，它看起来很完美，它是 17"

我在另一台计算机上查看我正在开发的网站 www.hrcprojectconsulting.com，我认为是 1080 x 600 的旧屏幕

并且右面板已经从它的位置脱臼并占据了中间的容器

我把它设想为一个包裹的主容器，一个左容器，一个中心容器和一个右容器。我将主容器定位为以 margin: 0 auto; 为中心 一切看起来都很好。然后我必须有横幅，你会看到的蓝色条纹：

这是我所有页面的蓝图：

```
<link rel="stylesheet" href= "<?php echo base_url() ?>css/style.css" />
<script type ="text/javascript" src="<?php echo base_url()?>js/1.8.js"></script>

    <div id = "contenedor_principal">

    main wrapper
    <div id = "left_container">
    content for left panel
    </div>

     <div id="container-center"><!-- 1 --> 
```

中心面板的内容

```
 </div> <!-- end of container center 1 -->

    <div id = "right_container">

    and for the right panel
    </div>
    </div> 
```

这是标题：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head profile="http://gmpg.org/xfn/11">
    <link rel="stylesheet" href= "<?php echo base_url() ?>css/main_style.css" />        
    <link rel="stylesheet" href= "<?php echo base_url() ?>css/webform.css" />
    <script type ="text/javascript" src="<?php echo base_url()?>js/1.8.js"></script>

</head>

<div id="header" class = "header"><h1 class="header">Real Estate Worldwide</h1>

<body> 
```

这是CSS：

```
#contenedor_principal
{

    background:orange;
    width:1040px;
    margin: 0 auto;

}   

    div.panel,p.flip
{
margin:0px;
padding:5px;
text-align:center;
background:#FFFFFF;

}

#container-center{

  width:635px; /*** Set to = center col width ***/
  height:500px;

  font-size:8px;
  display:inline;
  position:absolute;
    left:485px;
    top:80px;

/* \*/
  margin-left:-1px;
/* Hidden from IE-mac */
}

#left_container{
  width:200px; /*** Set to = center col width ***/

  height:500px;
  float:right;
  margin-right:0px;
  font-size:8px;
  display:inline;
  position:absolute;
    left:275px;
    top:80px;

/* \*/
  margin-left:-1px;
/* Hidden from IE-mac */
}

#right_container{
  width:202px; /*** Set to = center col width ***/
  margin-left:0px;
  height:600px;
  float:right;
  font-size:8px;
  display:inline;
  position:absolute;
  right:260px;
  background:url('../assets/uploads/miweb/bg_body.png');
        background-repeat:repeat-x;
  top:80px;

/* \*/
  margin-left:-1px;
/* Hidden from IE-mac */

}

#header {

    float:inherit;
    background: url("../jq185/css/start/images/ui-bg_gloss-wave_75_2191c0_500x100.png") repeat-x scroll 50% 50% #2191C0;
    font-family: 'trebuchet ms',geneva,arial,tahoma,sans-serif;
    font-size: 10px;
    margin: 0 auto;
    margin-top: 2px;
    padding: 0;
    width: 1050px;
    height:75px;
    h2 {color:#ffffff;}

} 
```

就像我说的那样，无论如何都可以在我的网络上看到。我使用的是 1660 x 900 和 17" 但它应该可以在任何分辨率和屏幕上查看。

关于为什么一切颠倒的任何线索？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:34:04.320

您使用的布局是错误的。无需`position: absolute`为每个 div 使用然后设置顶部和左侧。

而不是遵循以下结构。

**HTML**

```
<html>
    <head>
        <title>Website</title>
    </head>
    <body>
        <div id="container">
            <div id="header"></div>
            <div id="content">
                <div id="left_content"></div>
                <div id="middle_content"></div>
                <div id="right_content"></div>
            </div>
        </div>
    </body>
</html>​ 
```

**CSS**

```
#container  {
    width:960px;
    margin:0 auto;
}
#header {
    background: blue;
    height:50px;
    margin-bottom:20px;
}
#left_content {
    float: left;
    width:150px;
    background: red;
    min-height: 600px;
    margin-right:20px;
}
#middle_content {
    float: left;
    width:620px;
    background: green;
    min-height: 600px;
    margin-right:20px;
}
#right_content {
    float: right;
    width:150px;
    background: red;
    min-height: 600px;
}​ 
```

[**现场演示**](http://jsfiddle.net/libinvbabu/X4Hwm/) 希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:22:11.297

好吧，在您的 css 中，您清楚地编码了所有内容，以便它*仅*在您的屏幕上正确显示。

特别是出了什么问题是`#right_container`你说的`float:right`，而不是`right:260px`。

一个*快速*（但不好）的 CSS 解决方案是放置`float:left`而不是`float:right`定义左侧的像素数`left:1190px`（大约为 1190）

*更好*的解决方案是**正确学习 css 并在之后使用它**！

# clearcase - 签出文件时出错

> ID：13415288
> 
> 赞同：1
> 
> 时间：2012-11-16T11:03:17.070
> 
> 标签：clearcase

实际上我创建了一个视图，分支并为该视图设置了配置秒。它允许签出已经存在的文件，但不允许签出新创建的文件。它允许使用“mkelem”命令创建新元素，但不允许签出新创建的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:23:02.000

对于新创建的文件，您应该看到如下规则：

```
element * /main/0 -mkbranch newBrach 
```

请参阅“[子分支中元素的配置规范规则](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.tutorial.doc/a_config_rules_subbranch.htm)”的说明：

```
element * CHECKEDOUT
element * .../bug-fix/LATEST
element * BASELINE-X -mkbranch bug-fix
element * /main/0 -mkbranch bug-fix 
```

> 规则 4（第四行）确定当创建新元素时，该子句会导致在使用命令`mkbranch`自动创建的 bug-fix 子分支上检出新元素。 此外，如果现有元素没有错误修复分支或带有标签的版本，则在签出元素时会创建分支。`mkbranch`
> `BASELINE-X``bug-fix`

因此，请检查您的配置规范，并检查是否`/main/0 -mkbranch`存在：

```
cleartool catcs -tag yourViewTag 
```

在创建元素时，请参阅“[为什么我只得到一个 clearcase 版本 0？ ”以获取有关“版本 0”的更多信息。](https://stackoverflow.com/questions/5309333/why-i-only-get-a-clearcase-version-0/5309714#5309714)

# facebook-like - 喜欢按钮在我的网站上不起作用

> ID：13415289
> 
> 赞同：0
> 
> 时间：2012-11-16T11:03:19.160
> 
> 标签：facebook-like

我的网站有一个赞按钮，它不会在 facebook 上发布任何内容。

[http://www.abuze.com.br/cidade/7-florianopolis/oferta/2332-2-diarias-para-2-pessoas-na-pousada-timoteo-em-florianopolis-sc-com-33-de-德康托](http://www.abuze.com.br/cidade/7-florianopolis/oferta/2332-2-diarias-para-2-pessoas-na-pousada-timoteo-em-florianopolis-sc-com-33-de-desconto)

到底是怎么回事？

PS：这个like按钮以前也有用过。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:07:08.057

尝试添加

```
 xmlns:fb="http://ogp.me/ns/fb#" xmlns:og="http://ogp.me/ns#" 
```

上`<html>`

并使用 facebook 调试器工具进行测试：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.abuze.com.br%2Fcidade%2F7-florianopolis%2Foferta%2F2332-2-diarias-para- 2-比索阿斯-纳-普萨达-蒂莫特奥-埃姆-弗洛里亚诺波利斯-sc-com-33-de-desconto](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.abuze.com.br%2Fcidade%2F7-florianopolis%2Foferta%2F2332-2-diarias-para-2-pessoas-na-pousada-timoteo-em-florianopolis-sc-com-33-de-desconto)

# protocol-buffers - 在骆驼路线中重新编组protobuf

> ID：13415290
> 
> 赞同：0
> 
> 时间：2012-11-16T11:03:21.763
> 
> 标签：protocol-buffers, apache-camel

我希望有人能解释一下如何配置 Camel 来编组和解组数据。我有一个调用 bean 以确定收件人列表的路由。这是基于消息的内容（protobuf）。

路线配置如下所示：-

```
 <route id="Splitter">
        <from uri="activemq:notification.splitter" />
        <unmarshal ref="notificationProto" />
        <recipientList>
            <method bean="NotificationSplitter" method="splitNotification" />
        </recipientList>
    </route> 
```

bean 工作正常，但下游路由抱怨：-

```
org.apache.camel.RuntimeCamelException: java.lang.RuntimeException: Unable to find proto buffer class 
```

下游路由与上面的路由具有完全相同的 protobuf dataFormat 配置。如果我直接路由到下游队列（即绕过 bean 并对“to”队列进行硬编码），这意味着我也可以跳过解组步骤，它工作正常。

我想我需要在 Camel 将消息放入目标队列之前重新编组数据，但我不知道如何在 XML 中配置它。我试过简单地添加......

```
<marshal ref="notificationProto" /> 
```

...在确定了 recipientList 但它没有这样做之后（我假设因为 Camel 到那时已经发送了消息）。

另一种方法可能是从 bean 中进行解组，因为这样交换上的数据可能会保持不变。我不太确定该怎么做。它会起作用吗？

感谢您的任何提示。

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:57:35.563

是的，数据格式不是一个易于向其发送消息的端点，否则您可以改用路由单 EIP 模式，然后先将消息发送到数据格式，然后再发送到目的地。[http://camel.apache.org/routing-slip.html](http://camel.apache.org/routing-slip.html)

虽然你可以有一条小路

```
<route>
  <from uri="direct:marshalMe"/>
  <marshal ref="notificationProto" />
</route> 
```

然后使用路由单，设置为“direct:marshalMe,whereYouWannaGoNext”。

另一种方法是使用拦截器，并拦截发送到端点（您可以通过通配符或 reg exps 过滤），然后先进行封送处理。[http://camel.apache.org/intercept](http://camel.apache.org/intercept) 有关更多详细信息，请参阅该链接。

# matlab - 卸载已使用 CUDA 内存的 mex 文件时，MATLAB 崩溃

> ID：13415291
> 
> 赞同：4
> 
> 时间：2012-11-16T11:03:22.807
> 
> 标签：matlab, cuda, mex

很长一段时间以来，我一直试图弄清楚这一点。

我在使用 CUDA 的 matlab（Linux 64 位）中使用 MEX 文件。代码编译并执行得很好，但是当我想卸载 mex 时（例如重新编译它或 matlab 退出时），matlab 立即崩溃，没有任何消息并且转储为空。

我能够将其简化为一个最小的工作示例：

墨西哥 cpp 文件：

```
#include <stdint.h>
#include "mex.h"

extern "C" void cudaTest();

void mexFunction(
                int nlhs, mxArray *plhs[],
                int nrhs, const mxArray *prhs[])
{
    cudaTest();
} 
```

使用 NVCC 编译的 CUDA 文件：

```
void cudaTest() {

    float* d_test = NULL;
    cudaMalloc((void**) &d_test, 10000 * sizeof(float));

    cudaFree(d_test);
} 
```

虽然我的真实程序总是崩溃，但这个最小的例子并不总是可重现的。有时它会崩溃有时不会..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:30:59.763

我认为这解决了我的问题：

[http://www.mathworks.de/matlabcentral/answers/45307](http://www.mathworks.de/matlabcentral/answers/45307)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:50:51.270

嗯，可能是您忘记释放的内存问题。

一些建议可能有用：

*   不要使用 MATLAB 内存管理函数：mxalloc...，在 mexfunction 或 matlab wrap 之外，当 mex 函数与 matlab 同时调用内存管理函数时，您的 mex 函数可能会运行某些进程后台并可能导致 MATLAB 崩溃。

*   注册 mexAtExit(clearfunction) 函数（参见 MATLAB 帮助：mexAtExit） 清除你的 mex 内存和线程，它不是由 MATLAB 自动管理的，即这里的 cudaMalloc。当 mex 函数卸载或 matlab 退出时，MATLAB 会自动清除 mexfunction。因此，如果您的内存管理功能不是 MATLAB 内存管理功能，MATLAB 将不知道如何处理您的 mex 程序。

*   如下调试您的功能

跑：

```
clear your_mex_function 
```

MATLAB 会调用 your_mex_function 的 clearfunction（这个函数是一个 mexatexit 注册函数，见上面的步骤），你会发现你的 mex 函数有什么问题。

# javascript - 为什么我的函数未定义？

> ID：13415296
> 
> 赞同：2
> 
> 时间：2012-11-16T11:03:39.283
> 
> 标签：javascript

我是 JavaScript 新手。我编写了以下代码：

```
function Vec2(x_,y_)
{
    this.x = x_;
    this.y = y_;
} 
```

稍后在文件中我创建了一个这样的函数：

```
// Init game field array
var initGameField = function () {
    var screenCenter = vec2(canvas.width / 2, canvas.height / 2);
    var index = 0;

    // Init gamefieldArray
    for(var y = 0; y < maxVerticalBubbles; y++)
    {
        if(y%2)
        {
            for(var x = 0; x < maxHorizontalBubbles - 1; x++)
            {
                var initPoint = vec2(cellSize / 2 + (screenCenter.x - ((maxVerticalBubbles - 1) * cellSize / 2)) + (x * cellSize), 
                                 canvas.height / 2 + (cellSize / 2) + y * cellSize / 1.1);

                gameFieldArray[index] = initPoint;
            }
        }
        else
        {
            for(var x = 0; x < maxHorizontalBubbles; x++)
        {
                var initPoint = vec2(cellSize / 2 + (screenCenter.x - (maxVerticalBubbles * cellSize / 2)) + (x * cellSize), 
                                 canvas.height / 2 + (cellSize / 2) + y * cellSize / 1.1);

                gameFieldArray[index] = initPoint;
            }
        }
    }
} 
```

但是当我尝试在 javascript -file 的末尾运行 initGameField 函数时，我在“initGameField”内的“vec2 not defined”上出现错误......应该如何以正确的方式完成？为什么在 initGameField -function 之前和运行 initGameField -function 之前引入了函数 vec2？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:04:53.817

Javascript 区分大小写，您的函数定义为**Vec2**但您尝试使用**vec2调用它**

还要确保使用“new”关键字创建一个新实例。

```
var initPoint = new Vec2(cellSize / 2 + (screenCenter.x - ((maxVerticalBubbles - 1) * cellSize / 2)) + (x * cellSize), 
                             canvas.height / 2 + (cellSize / 2) + y * cellSize / 1.1); 
```

# asp.net-mvc - 在剑道网格中，如何知道ajax函数何时开始和结束？

> ID：13415297
> 
> 赞同：1
> 
> 时间：2012-11-16T11:03:43.200
> 
> 标签：asp.net-mvc, razor, kendo-ui

在我的网格中，当剑道网格触发 ajax 请求时，我想调用 javascript 函数。当 ajax 请求结束时，我需要触发另一个 javascript 函数。代码：

```
@(Html.Kendo()
    .Grid<Aditro.Foundation.Dashboard.Web.Models.Link>()
.Name("LinkGrid")
.Columns(columns =>
{
    columns.Bound(c => c.Text).Width(100);
    columns.Bound(c => c.Url).Width(250);
    columns.Command(command => { command.Edit(); command.Destroy(); }).Width(100);
})
.DataSource(source =>
{
    source.Ajax().Read(read => read.Action("GetLinks", "Settings").Data("Grid_OnComplete"))
        .Create(read => read.Action("LinkAddEdit", "Settings"))
        .Events(e => e.RequestStart("callloading"))
        .Update(read => read.Action("LinkAddEdit", "Settings"))
        .Destroy(read => read.Action("LinkDelete", "Settings"))
        .Model(model => { model.Id("LinkId"); model.Field(x => x.Genus_List_Action).Editable(true); model.Field(x => x.Genus_List_Select).Editable(false); });
})
.ToolBar(toolbar => toolbar.Create())
.Pageable(pageable =>
{
    pageable.Enabled(true);
    pageable.PageSizes(new[] { 5, 10, 15, 20, 25 });
})
.Editable(editable => editable.Mode(GridEditMode.InLine))
.Navigatable()
.Selectable(action => action.Mode(GridSelectionMode.Single))
//.Filterable()
.Sortable(sort => sort.SortMode(GridSortMode.MultipleColumn))
.Resizable(resizable => resizable.Columns(true))

) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:02:17.987

您需要升级到公开`RequestEnd`事件的较新版本。

# php - mongoDB认证错误

> ID：13415300
> 
> 赞同：2
> 
> 时间：2012-11-16T11:04:04.003
> 
> 标签：php, mongodb, codeigniter, driver, database

我是 mongoDB 的新手，正在尝试使用 php 驱动程序进行连接。

这是我的代码：

```
$this->connection = new Mongo("mongodb://tatao_user:tatao_pass@ds043047.mongolab.com:43047/tatao"); 
```

但它不起作用并导致以下错误：

致命错误：未捕获的异常“MongoConnectionException”，消息“无法使用数据库 tatao 进行身份验证：用户名 [tatao_user]”

我也尝试过使用 shell，但结果是一样的。

请帮忙....

谢谢 B4...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:07:09.017

首先，您需要检查 mongodb 是否正在运行并且您没有错误。

然后，如果您确定您的凭据（用户名和密码）正确，请尝试以下操作：

```
<?php

$mongo = new Mongo();

$db = $mongo->db_name; //replace db_name with your db name obviously

$username = "myuser";
$password = "mypassword";

$db->authenticate($username, $password);

?> 
```

您还应该查看手册： http: [//php.net/manual/en/mongo.connecting.php](http://php.net/manual/en/mongo.connecting.php)

然后，我也使用**Codeigniter**，并且有一个非常好的**mongodb 库**，简单快速，使用**Active Records**和所有人员作为 CI 的标准数据库库。我真的建议你使用它，你可以在这里检查：

[https://github.com/alexbilbie/codeigniter-mongodb-library](https://github.com/alexbilbie/codeigniter-mongodb-library)

# iphone - 格式化 NSDate 落后于我的 UITableVIew

> ID：13415302
> 
> 赞同：0
> 
> 时间：2012-11-16T11:04:07.560
> 
> 标签：iphone, objective-c, ios, ipad, nsdate

在调用期间，`tableView:cellForRowAtIndexPath:`我正在调用此函数将日期格式化为时间：

```
- (NSString *)_formatDate:(NSDate *)date withString:(NSString *)string {
    NSLocale *locale = [NSLocale currentLocale];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    NSString *dateFormat = [NSDateFormatter dateFormatFromTemplate:string options:0 locale:locale];
    [formatter setDateFormat:dateFormat];
    [formatter setLocale:locale];
    return [formatter stringFromDate:date];
} 
```

我正在传递行的日期以及字符串`@"HH:mm"`。

不幸的是，这似乎落后于我的表格视图。类似的事情发生在我正在格式化为完整日期的部分标题中。

有什么理由应该如此落后于我的应用程序吗？这些电话是否特别密集？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:09:15.697

[据说](https://stackoverflow.com/questions/4442074/how-to-minimize-the-costs-for-allocating-and-initializing-an-nsdateformatter)创建[日期格式化程序很昂贵](https://stackoverflow.com/questions/8832768/why-is-allocating-or-initializing-nsdateformatter-considered-expensive)。使用实例变量并在 中设置单个日期格式化程序`viewDidLoad`，然后在每次需要时重用相同的格式化程序。或根据需要延迟加载一个。

如果昂贵的不是创建，而是日期字符串的解析，请预先保存日期的解析副本并改用它。不过，您将不得不担心位置和语言环境的变化等事情，因此它变得更加复杂。

# php - 电子邮件正文出现多次

> ID：13415303
> 
> 赞同：1
> 
> 时间：2012-11-16T11:04:08.970
> 
> 标签：php, email

我正在尝试使用 PHP mail() 循环发送一小批电子邮件。发送电子邮件的脚本工作正常。但是，有一个小故障。虽然收件人都只收到一封电子邮件，但列表中的第一个人收到电子邮件正文 ($MESSAGE_BODY) 一次，第二个人收到正文两次，第三人收到 3 次（然后继续）。我一生都无法弄清楚它为什么会这样做。

发送电子邮件的形式是：

```
<p>Message Text:
<br />
<textarea name="thebody" id="thebody" cols="65" rows="12"><?php echo $row_email['emailtext'];?></textarea>
<script type="text/javascript">CKEDITOR.replace( 'thebody' );</script>
</p>
<table >
<tr>
<th>Site</th>
<th>Email Address</th>
<th colspan="2">Email Now?</th>
</tr>
<?php  
$b = 0;
$q = 1;
while ($row_selfdo = mysql_fetch_assoc($selfdo)) {  ?>
<tr>
<td><?php echo $row_seldo[‘sitename’];?></td>
<td><input type="text" name="emailto[]" style="font-size:9px;" size="20" value="<?php echo $row_selfdo['eaddress']; ?>"/></td>

<td valign="middle">Yes:<input type="radio" name="emailnow[<?php echo $b;?>]" value="Yes" <?php if (isset($mailed) && ($mailed=="Not Yet")) { echo ""; } else echo "disabled='disabled'"; ?> /></td>

<td>No:<input name="emailnow[<?php echo $b;?>]" type="radio" value="No" checked="checked"  <?php if (isset($mailed) && ($mailed=="Not Yet")) { echo ""; } else echo "disabled='disabled'"; ?>? /></td>

</tr>
<?php $b++; $q++; }  ?>
</table> 
```

这是发送邮件的脚本

```
$numb = count($_POST['emailto']);
$num = $numb -1;
$subject=$_POST['subject'];
$thisrecipient = $_POST['emailto'];
$sendtothemnow = $_POST['emailnow'];

for ($a=0;$a<=$num;$a++) {

$emailthemnow = $sendtothemnow[$a];

if ((isset($emailthemnow))&&(($emailthemnow)=="Yes")) {

$recipient = $thisrecipient[$a];
$ToEmail = $recipient; 
$EmailSubject = $subject; 
$mailheader = 'From: me@mydomain.com'."\r\n"; 
$mailheader .= 'Reply-To: me@mydomain.com'."\r\n";
$mailheader .= 'MIME-Version: 1.0'."\r\n";
$mailheader .= 'Content-type: text/html; charset=iso-8859-1'."\r\n"; 
$MESSAGE_BODY .= '<p>'.$_POST['thebody'].'</p>';
$MESSAGE_BODY .= '<p>Kind Regards</p>';
$MESSAGE_BODY .= '<p>The Environment Team</p>';
$MESSAGE_BODY .= 'email footer bits here ';
$MESSAGE_BODY .='<p style="color:#0C0;">Please consider the environment - do you really need to print this email?';

$MESSAGE_BODY=wordwrap($MESSAGE_BODY,70);

$mailsent=  mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Not Sent");

    if($mailsent){
    //update a table to record date email was sent
    }
}//end email send loop 
```

有什么建议么？？

提前谢谢了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:06:05.657

在您使用消息正文的第一行，设置它而不是附加它：

```
$MESSAGE_BODY = '<p>'.$_POST['thebody'].'</p>'; 
```

（点已被删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:58:58.257

只更改有冲突的变量名。

```
if ((isset($emailthemnow))&&(($emailthemnow)=="Yes")) {
$recipient = $thisrecipient[$a];
$ToEmail = $recipient; 
$EmailSubject = $subject; 
$mailheader = 'From: me@mydomain.com'."\r\n"; 
$mailheader .= 'Reply-To: me@mydomain.com'."\r\n";
$mailheader .= 'MIME-Version: 1.0'."\r\n";
$mailheader .= 'Content-type: text/html; charset=iso-8859-1'."\r\n"; 
$MESSAGE_BODY .= '<p>'.$_POST['thebody'].'</p>';
$MESSAGE_BODY .= '<p>Kind Regards</p>';
$MESSAGE_BODY .= '<p>The Environment Team</p>';
$MESSAGE_BODY .= 'email footer bits here ';
$MESSAGE_BODY .='<p style="color:#0C0;">Please consider the environment - do you really need to print this email?';
$MESSAGE_BODY_FINAL=wordwrap($MESSAGE_BODY,70);
$mailsent=  mail($ToEmail, $EmailSubject, $MESSAGE_BODY_FINAL, $mailheader) or die ("Not Sent");
if($mailsent){
//update a table to record date email was sent
}
} 
```

# android - 如何在 Android 中移动视图？

> ID：13415306
> 
> 赞同：8
> 
> 时间：2012-11-16T11:04:17.183
> 
> 标签：android, views, android-animation

我有一个项目，我有两个挑战：

第一的：

*   将图标移动到手指触摸屏幕的任何位置：

为此，我发现最好的方法是**`.layout()`**在视图上使用方法。

第二：

*   我有两个布局，在**RelativeLayout**上，都有屏幕宽度和高度（1 隐藏在另一个之后）。每次单击按钮时，我都想将上面的几个倾斜向右移动。

**有没有更好的方法在 Android 上移动视图？**

使用该方法可能有什么缺点**`.layout()`**？

```
public void layout (int l, int t, int r, int b) 
Since: API Level 1 
Assign a size and position to a view and all of its descendants 

Parameters:
l  Left position, relative to parent 
t  Top position, relative to parent 
r  Right position, relative to parent 
b  Bottom position, relative to parent 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:56:38.507

WindowManager 为每个视图维护至少两个`LayoutParams`类的实例，除了它`View`本身。

的检查`updateViewLayout`方法`WindowManager`，特别是这部分：

```
 view.setLayoutParams(wparams);

    synchronized (this) {
        int index = findViewLocked(view, true);
        ViewRoot root = mRoots[index];
        mParams[index] = wparams;
        root.setLayoutParams(wparams, false);
    } 
```

我相信你可以通过`layout`直接调用来制造一些混乱。改为使用`WindowManager.updateViewLayout`。它会更慢，但安全（只是 IMO）。

* * *

**更新**

[来自：[https](https://stackoverflow.com/a/11188273/327011) ://stackoverflow.com/a/11188273/327011 ]

```
WindowManager windowsManager = (WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE)

WindowManager.LayoutParams windowParams = new WindowManager.LayoutParams();
windowParams.x = <new X coord>;
windowParams.y = <new Y coord>
windowParams.height = myImageView.getHeight();
windowParams.width = myImageView.getWidth();
windowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                    | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
                    | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                    | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS;
windowParams.format = PixelFormat.TRANSLUCENT;
            windowParams.windowAnimations = 0;

windowManager.updateViewLayout(myImageView, windowParams); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T16:58:21.850

用手指移动视图的最简单方法是使用 View 类中的 setTranslationX 和 setTranslationY。

[http://developer.android.com/reference/android/view/View.html#setTranslationX(float](http://developer.android.com/reference/android/view/View.html#setTranslationX(float) )

如果您的目标是 api < 11，您还可以更改 View LayoutParams 上的边距以移动。

我认为在 onLayout 或 onDraw 函数上移动项目会更糟，因为视图已经具有上面的这些选项，并且随着您添加更多项目和不同视图，手动绘制视图可能会变得复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:47:04.910

您可以使用[对象动画](http://developer.android.com/reference/android/animation/ObjectAnimator.html)

```
/**
 * The java class is used to move the widgets to the region of the touch point from its original position
 * 
 * @author gfernandes
 *
 */
public class animate {

/**
 * Variable declaration
 * 
 */
    private ObjectAnimator animation1;
    private ObjectAnimator animation2;

/**
 * Function animate: Animates the widget Eg:Button from its position to the 
 *                   position of the touch point.
 *
 * @param[in] -The coordinates of the touch point (x, y)
 *            -The coordinates of the widget position (valx, valy)
 *            -The widget object id
 *                      
 */

public void animategroup1(int x, int y, Object val, int valx, int valy ){

    System.out.println("animategroup1 entered here");
    System.out.println("x:"+x);
    System.out.println("y"+y);
    System.out.println("valx"+valx);
    System.out.println("valy"+valy);

    animation1 = ObjectAnimator.ofFloat(val, "x", valx, x);

    animation2 = ObjectAnimator.ofFloat(val, "y", valy, y);

    AnimatorSet set = new AnimatorSet();

    set.playTogether(animation1, animation2);

    set.start();

 }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T09:59:53.480

您可以使用查看方法[http://developer.android.com/reference/android/view/View.html#offsetTopAndBottom(int)](http://developer.android.com/reference/android/view/View.html#offsetTopAndBottom(int))

或[http://developer.android.com/reference/android/view/View.html#offsetLeftAndRight(int)](http://developer.android.com/reference/android/view/View.html#offsetLeftAndRight(int))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-03T17:09:02.347

您可以使用动画使用`ObjectAnimatior`类移动视图。像下面

```
ObjectAnimator animator = ObjectAnimator.ofFloat(view, "translationY or translationX" , number in Float)
animator.setDuration(miliseconds).start(); 
```

视图将随您决定

# scala - 抑制“丢弃的非单位值”警告

> ID：13415307
> 
> 赞同：48
> 
> 时间：2012-11-16T11:04:21.653
> 
> 标签：scala, compiler-warnings

我已将 scalac 命令行参数添加`-Ywarn-value-discard`到我的构建中，因为这会发现我刚刚在我的代码中发现的一个细微错误。但是，我现在收到一些关于“丢弃的非单位值”的警告，这些警告是关于故意丢弃，而不是错误。如何抑制这些警告？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-16T11:09:05.803

您可以通过显式返回单位（即`()`）来抑制这些警告。例如转这个：

```
def method1() = {
   println("Hello")
   "Bye"
}
def method2() {
  method1() // Returns "Bye", which is implicitly discarded
} 
```

进入：

```
def method1() = {
   println("Hello")
   "Bye"
}
def method2() {
  method1()
  () // Explicitly return unit
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-06-10T06:01:55.733

根据[这个答案](https://stackoverflow.com/a/25779018/154770)，您也可以使用语法`val _`，即

```
def method2(): Unit = {
  val _ = method1()
} 
```

但是对于这个或@Régis 的答案是否是首选风格存在一些争议。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-08-09T14:56:54.360

[现在，您可以通过Scala 2.13](https://github.com/scala/scala/pull/7563)`Unit`中的类型归属来抑制值丢弃警告。

这是一个例子：

```
def suppressValueDiscard(): Unit =
  "": Unit 
```

# c# - 将结果添加到 linq 查询

> ID：13415310
> 
> 赞同：-2
> 
> 时间：2012-11-16T11:04:32.697
> 
> 标签：c#, asp.net

我正在使用 linq 查询数据表，然后查询结果以过滤掉我想要的内容，问题是我需要为数组的每个值查询它，这些值是这样的 ,2 或 ,22 或 , 21等

所以我通常这样做

```
results = from a in results
     where a.countryId.ToString().Contains(value)
     select a; 
```

我想做的是这个

```
foreach(string str in arrayval)
{
results += from a in results 
      where a.countryId.ToString().Contains(str)
} 
```

任何人都可以帮助或给我一些线索

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:06:43.657

看起来您想根据数组值的比较来选择结果。就像是。`Select * from table where ID in (1,2,3)`. 您可以尝试以下查询，而不是连接结果。

```
var result = from a in result
             where arrayval.Contains(a.CountryId.ToString())
             select a; 
```

如果你`arrayval`是一个 int 类型的数组，那么你可以`.ToString()`在末尾删除`a.CountryID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:13:49.923

我会创建一个数组值列表，例如

```
List<string> list = new List<string>()
{
    "2",
    "12",
    "20",
    //etc...
}; 
```

然后做

```
var result = results.Where(p => list.Contains(p.countryId.ToString())); 
```

基本上，您只是`countryId`列表中包含的 select 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:06:53.783

尝试这个

```
results.Where(a=> arrayval.Contains(a.CountryId.ToString()).Aggregate("", (a,b)=> a+b); 
```

# r - 在 R 中设置子集时保留重复的列名

> ID：13415312
> 
> 赞同：1
> 
> 时间：2012-11-16T11:04:50.520
> 
> 标签：r, duplicates, subset

我在 R 中有一个具有重复列名的数据框，当我使用子集从此数据框中选择特定列时，它会重命名重复项，使它们不同。当我使用函数 data.frame() 创建数据框时，我可以通过使用参数 check.names = FALSE 来阻止这种情况的发生，有没有办法我也可以使用子集（或任何其他选择名称列的方式）来做到这一点.

例如说我有数据框

```
data <- data.frame('sample' = 50, 'x_mean' = 1.5, 'Lower CI' = 1.0, 'Upper CI' = 2.0, 'sample' = 50, 'y_mean' = 0.6, 'Lower CI' = 0.3, 'Upper CI' = 0.9, check.names = FALSE)

selectVec <- c(TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE) 
```

使用代码

```
subset(data, select = selectVec) 
```

将重复的置信区间重命名为“Lower CI.1”和“Upper CI.1”，而我想将它们保留为“Lower CI”和“Upper CI”。有谁知道这样做的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:31:50.587

看起来你会得到相同的行为`[`。我能想到的唯一方法是事后重新分配名称：

```
subdata <- data[, selectVec, drop = FALSE]
names(subdata) <- names(data)[selectVec] 
```

但是，请注意，使用重复的列名是一种非常不自然、复杂（显然）且有风险的保存数据的格式。我会尝试理解为什么文件或 data.frame 首先有重复的列并在那里修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:43:46.760

此方法将避免传递它`[.data.frame`，然后需要重新分配名称。数据框是列表，逻辑索引与它们的工作方式与处理数据框列的方式相同。

```
 data.frame(as.list(data)[ selectVec ], check.names=FALSE )
#  sample x_mean Lower CI Upper CI y_mean Lower CI Upper CI
#1     50    1.5        1        2    0.6      0.3      0.9 
```

# javascript - 使用 Javascript 访问二维 JSON 数组

> ID：13415318
> 
> 赞同：2
> 
> 时间：2012-11-16T11:05:07.283
> 
> 标签：javascript, arrays, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我正在使用美国人口普查 API，并从 jQuery.get() 请求中得到一个二维 json 数组。我的结果（数据）如下所示：

`[["P0010001","NAME","state","county","tract"], ["2703","Census Tract 4001.01","17","119","400101"], ["5603","Census Tract 4001.02","17","119","400102"], ["4327","Census Tract 4002","17","119","400200"]]`

它看起来完全像一个二维 javascript 数组，但是当我尝试时我无法像访问它一样访问它：

```
var population = data;
alert(population[1][0]); 
```

有没有办法将 json 数组转换为 javascript 数组，或者将其转换为字符串，然后可以将其放入数组中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:09:13.663

使用`JSON.parse`：

```
var population = JSON.parse(data);
alert(population[1][0]); 
```

JsFiddle：http: [//jsfiddle.net/6CGh8/](http://jsfiddle.net/6CGh8/)

# c++ - c和c++上下文中静态、自动、全局和局部变量的区别

> ID：13415321
> 
> 赞同：48
> 
> 时间：2012-11-16T11:05:15.333
> 
> 标签：c++, c, variables

我对, 和`static`变量`auto`有点困惑。`global``local`

在某处我读到一个`static`变量只能在函数内访问，但在函数返回后它们仍然存在（保留在内存中）。

但是，我也知道一个`local`变量也一样，那有什么区别呢？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-16T11:26:35.477

这里有两个独立的概念：

*   *scope*，它确定可以访问名称的位置，以及
*   *storage duration*，它决定了变量的创建和销毁时间。

*局部*变量（学究式地，具有*块作用域*的变量）只能在声明它们的代码块内访问：

```
void f() {
    int i;
    i = 1; // OK: in scope
}
void g() {
    i = 2; // Error: not in scope
} 
```

*全局*变量（学究式地，具有*文件范围*（在 C 中）或*名称空间范围*（在 C++ 中）的变量）在声明后的任何时候都可以访问：

```
int i;
void f() {
    i = 1; // OK: in scope
}
void g() {
    i = 2; // OK: still in scope
} 
```

（在 C++ 中，情况更加复杂，因为命名空间可以关闭和重新打开，并且可以访问当前范围以外的范围，并且名称也可以具有类范围。但这变得非常离题。）

*自动*变量（学究式地，具有*自动存储持续时间*的变量）是局部变量，其生命周期在执行离开其范围时结束，并在重新进入范围时重新创建。

```
for (int i = 0; i < 5; ++i) {
    int n = 0;
    printf("%d ", ++n);  // prints 1 1 1 1 1  - the previous value is lost
} 
```

*静态*变量（学究式地，具有*静态存储持续时间*的变量）具有持续到程序结束的生命周期。如果它们是局部变量，那么当执行离开它们的范围时它们的值仍然存在。

```
for (int i = 0; i < 5; ++i) {
    static int n = 0;
    printf("%d ", ++n);  // prints 1 2 3 4 5  - the value persists
} 
```

请注意，`static`除了静态存储持续时间之外，该关键字还有多种含义。在全局变量或函数上，它为它提供*内部链接*，以便其他翻译单元无法访问它；在 C++ 类成员上，这意味着每个类有一个实例，而不是每个对象一个。此外，在 C++ 中，`auto`关键字不再意味着自动存储持续时间；它现在意味着自动类型，从变量的初始化程序推导出来。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-16T11:11:23.753

**首先我说你应该用谷歌搜索它，因为它在很多地方都有详细定义。**

**Local**
这些变量只存在于创建它们的特定函数中。它们对于其他功能和主程序是未知的。因此，它们通常使用堆栈来实现。一旦创建局部变量的函数完成，局部变量就不再存在。每次执行或调用函数时都会重新创建它们。

**全局**
这些变量可以被包含程序的任何函数访问（即已知）。它们是通过将内存位置与变量名称相关联来实现的。如果函数被调用，它们不会被重新创建。

```
/* Demonstrating Global variables  */
    #include <stdio.h>
    int add_numbers( void );                /* ANSI function prototype */

    /* These are global variables and can be accessed by functions from this point on */
    int  value1, value2, value3;

    int add_numbers( void )
    {
        auto int result;
        result = value1 + value2 + value3;
        return result;
    }

    main()
    {
        auto int result;
        value1 = 10;
        value2 = 20;
        value3 = 30;        
        result = add_numbers();
        printf("The sum of %d + %d + %d is %d\n",
            value1, value2, value3, final_result);
    }

    Sample Program Output
    The sum of 10 + 20 + 30 is 60 
```

可以通过仔细放置声明来限制全局变量的范围。它们从声明中可见，直到当前源文件结束。

```
#include <stdio.h>
void no_access( void ); /* ANSI function prototype */
void all_access( void );

static int n2;      /* n2 is known from this point onwards */

void no_access( void )
{
    n1 = 10;        /* illegal, n1 not yet known */
    n2 = 5;         /* valid */
}

static int n1;      /* n1 is known from this point onwards */

void all_access( void )
{
    n1 = 10;        /* valid */
    n2 = 3;         /* valid */
} 
```

**静态：**
静态对象是从构造到程序结束一直存在的对象。因此，堆栈和堆对象被排除在外。但是全局对象、命名空间范围内的对象、在类/函数中声明为静态的对象以及在文件范围内声明的对象都包含在静态对象中。当程序停止运行时，静态对象被销毁。
我建议你[看看这个教程列表](http://www.bogotobogo.com/cplusplus/statics.php)

**AUTO:**
C, C++

（称为自动变量。）

默认情况下，在代码块中声明的所有变量都是自动的，但这可以使用 auto 关键字明确说明。[注 1] 未初始化的自动变量在被分配其类型的有效值之前具有未定义的值。[1]

使用存储类寄存器而不是 auto 提示编译器将变量缓存在处理器寄存器中。除了不允许在变量或其任何子组件上使用引用运算符 (&) 之外，编译器可以自由地忽略该提示。

在 C++ 中，自动变量的构造函数在执行到达声明处时被调用。析构函数在到达给定程序块的末尾时被调用（程序块用大括号括起来）。此功能通常用于管理资源分配和释放，例如打开然后自动关闭文件或释放内存。[见维基百科](http://en.wikipedia.org/wiki/Automatic_variable)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-16T11:18:33.803

区别在于静态变量是那些变量：它允许从函数的一次调用到另一个函数的调用中保留一个值。但是在局部变量的情况下，范围是直到块/函数的生命周期。

例如：

```
#include <stdio.h>

void func() {
    static int x = 0; // x is initialized only once across three calls of func()
    printf("%d\n", x); // outputs the value of x
    x = x + 1;
}

int main(int argc, char * const argv[]) {
    func(); // prints 0
    func(); // prints 1
    func(); // prints 2
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-16T11:14:29.273

`static`在 C 和 C++ 中是一个重载的词。`static`函数上下文中的变量是在调用之间保存其值的变量。它们在程序期间存在。

局部变量仅在函数的生命周期内或它们的封闭范围内持续存在。例如：

```
void foo()
{
    int i, j, k;
    //initialize, do stuff
} //i, j, k fall out of scope, no longer exist 
```

有时，此范围是故意与`{ }`块一起使用的：

```
{ 
   int i, j, k;
   //...
} //i, j, k now out of scope 
```

全局变量在程序期间存在。

`auto`现在在 C 和 C++ 中有所不同。`auto`在 C 中是一种（多余的）指定局部变量的方法。在 C++11 中，`auto`现在用于自动派生值/表达式的类型。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-16T11:09:21.780

函数终止后，内存中**不存在**局部变量。
然而，`static`变量在程序的整个生命周期中**仍然分配在内存中，而与任何功能无关。**

此外，根据您的问题，`static`变量可以在本地`class`或函数范围内声明，也可以在全局范围内`namespace`或文件范围内声明。它们从头到尾都被分配了内存，这只是迟早发生的初始化。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-25T15:10:34.970

当一个变量在类中声明为静态时，它将成为该类的所有对象的共享变量，这意味着该变量不再特定于任何对象。例如： -

```
#include<iostream.h>
#include<conio.h>
class test
{
    void fun()
    {
        static int a=0;
        a++;
        cout<<"Value of a = "<<a<<"\n";
    }
};
void main()
{
    clrscr();
    test obj1;
    test obj2;
    test obj3;
    obj1.fun();
    obj2.fun();
    obj3.fun();
    getch();
} 
```

该程序将生成以下输出：-

```
Value of a = 1
Value of a = 2
Value of a = 3 
```

全局声明的静态变量也是如此。如果我们将变量声明为外部函数 void fun()，上述代码将生成相同的输出

而如果您删除关键字 static 并将 a 声明为非静态局部/全局变量，则输出将如下所示：-

```
Value of a = 1
Value of a = 1
Value of a = 1 
```

# .net - 如何在按钮单击时以编程方式添加控件？

> ID：13415322
> 
> 赞同：0
> 
> 时间：2012-11-16T11:05:23.297
> 
> 标签：.net, dynamic-controls, multiview

我有一个位于多视图控件内的网站表单 (c#)。muliview 控件有 4 个步骤，因此前 3 个步骤收集信息，如果有效，则单击按钮移动到下一个视图。

我想根据以前的答案动态构建表单，但从我目前所读的内容来看，我有点不确定如何实现这一点。

例如，在第 1 步中，用户完成了一些文本框控件并单击提交。

根据面板 1 中提交的数据，下一个面板需要动态创建一些控件——一些标签，一些文本框。

由于此单击是在 init 和 page_load 之后进行的，我不确定这将如何工作。

当然，我可以预先创建所有标签/文本框控件并根据需要禁用它们，但这似乎对资源的使用非常糟糕。

最重要的是，我在使用动态控件方面缺乏经验，因此任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T00:34:04.103

好的，下面我粘贴了工作示例。需要注意的事项：

*   为避免错误

`Message=Failed to load viewstate. The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request. For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request. Source=System.Web ErrorCode=-2147467259`

在动态控件上设置此属性

`EnableViewState = false`

此示例的数据如下所示

品牌发动机颜色成本
大众，1.2，黑色，72 000
大众，1.2，白色，70 000
大众，1.6 TDI，红色，79 500
大众，1.6 TDI，白色，78 800
福特，1.6，黑色，57 600
福特，1.6，绿色，57 100
福特，2.0 TDCi，黑色，87 300
福特，2.0 TDCi，白色，86 600

基本上这是这样的：

*   选择汽车品牌并选择按钮（按钮是我们生成控件的标准）当然您也可以使用下拉等进行逻辑。
*   在第二个屏幕上，根据您的选择，您有一个或两个下拉菜单
*   如果您有两个下拉菜单，则第二个取决于第一个下拉菜单的选择，因此您有依赖和回发的示例

页面代码：

```
<form id="form1" runat="server">
<div>
<asp:MultiView ID="mvPanels" runat="server">
    <asp:View ID="vPanel1" runat="server">
        <table>
            <tbody>
                <tr>
                    <td>Pick car</td>
                    <td><asp:DropDownList ID="ddlBrand" runat="server" /></td>
                    <td><asp:Button ID="btnPanel1Next" Text="Next" runat="server" 
                            onclick="btnPanel1Next_Click" /></td>
                    <td><asp:Button ID="btnPanel1NextEngineOnly" Text="Next (pick engine only)" runat="server" 
                            onclick="btnPanel1NextEngineOnly_Click" /></td>
                </tr>
            </tbody>
        </table>
    </asp:View>
    <asp:View ID="vPanel2" runat="server">
        <%--<table>
            <tbody>
                <tr>
                    <td>Pick engine</td>
                    <td><asp:DropDownList ID="ddlEngine" AutoPostBack="true" runat="server" 
                            onselectedindexchanged="ddlEngine_SelectedIndexChanged" /></td>
                    <td><asp:DropDownList ID="ddlColor" AutoPostBack="true" runat="server" 
                            onselectedindexchanged="ddlColor_SelectedIndexChanged" /></td>
                    <td><asp:Button ID="btnPanel2Prev" Text="Prev" runat="server" 
                            onclick="btnPanel2Prev_Click" /><asp:Button ID="btnPanel2Next" Text="Next" 
                            runat="server" Enabled="False" onclick="btnPanel2Next_Click" /></td>
                </tr>
            </tbody>
        </table>--%>
    </asp:View>
    <asp:View ID="vPanel3" runat="server">
        <table>
            <tbody>
                <tr>
                    <td><asp:Label ID="lblResult" runat="server" /></td>
                    <td><asp:Button ID="btnPanel3Prev" Text="Prev" runat="server" 
                            onclick="btnPanel3Prev_Click" /><asp:Button ID="btnPanel3Finish" 
                            Text="Confirm" runat="server" onclick="btnPanel3Finish_Click" /></td>
                </tr>
            </tbody>
        </table>
    </asp:View>
</asp:MultiView>
</div>
</form> 
```

后面的代码：

```
public partial class Default : System.Web.UI.Page
{
    public class CarConfiguration
    {
        public string Brand { get; set; }
        public string Engine { get; set; }
        public PaintColor Paint { get; set; }
        public string Cost { get; set; }
    }

    [Serializable]
    public class CarConfigurationFilter
    {
        public string Brand { get; set; }
        public string Engine { get; set; }
        public PaintColor? Paint { get; set; }
        public bool EngineOnly { get; set; }
    }

    public enum PaintColor
    {
        Black,
        Red,
        White,
        Green,
    }

    public List<CarConfiguration> availableCars = new List<CarConfiguration>
    {
        new CarConfiguration{
            Brand = "VW",
            Engine = "1.2",
            Paint = PaintColor.Black,
            Cost = "72 000",
        },
        new CarConfiguration{
            Brand = "VW",
            Engine = "1.2",
            Paint = PaintColor.White,
            Cost = "70 000",
        },
        new CarConfiguration{
            Brand = "VW",
            Engine = "1.6 TDI",
            Paint = PaintColor.Red,
            Cost = "79 500"
        },
        new CarConfiguration{
            Brand = "VW",
            Engine = "1.6 TDI",
            Paint = PaintColor.White,
            Cost = "78 800",
        },
        new CarConfiguration{
            Brand = "Ford",
            Engine = "1.6",
            Paint = PaintColor.Black,
            Cost = "57 600"
        },
        new CarConfiguration{
            Brand = "Ford",
            Engine = "1.6",
            Paint = PaintColor.Green,
            Cost = "57 100"
        },
        new CarConfiguration{
            Brand = "Ford",
            Engine = "2.0 TDCi",
            Paint = PaintColor.Black,
            Cost = "87 300"
        },
        new CarConfiguration{
            Brand = "Ford",
            Engine = "2.0 TDCi",
            Paint = PaintColor.White,
            Cost = "86 600"
        },
    };

    CarConfigurationFilter filter
    {
        get { return (CarConfigurationFilter)ViewState["Filter"]; }
        set { ViewState["Filter"] = value; }
    }

    //If you have multiview in control you need to create this in event before event PageLoad like  LoadViewState, LoadControlState, LoadControlState
    protected override void OnPreLoad(EventArgs e)
    {
        if (IsPostBack && mvPanels.ActiveViewIndex == 1)
        {
            CreateControlsOnPanel2(true, !filter.EngineOnly);
        }
        base.OnPreLoad(e);
    }

    protected override void OnLoad(EventArgs e)
    {
        if (!IsPostBack)
        {
            ddlBrand.DataSource = availableCars.Select(x => x.Brand).Distinct();
            ddlBrand.DataBind();
            filter = new CarConfigurationFilter();
            mvPanels.ActiveViewIndex = 0;
        }
        base.OnLoad(e);
    }

    protected void btnPanel1Next_Click(object sender, EventArgs e)
    {
        filter.Brand = ddlBrand.SelectedValue;
        filter.EngineOnly = false;

        CreateControlsOnPanel2(true, true);

        mvPanels.ActiveViewIndex++; 
    }

    protected void btnPanel1NextEngineOnly_Click(object sender, EventArgs e)
    {
        filter.Brand = ddlBrand.SelectedValue;
        filter.EngineOnly = true;
        CreateControlsOnPanel2(true, false);

        mvPanels.ActiveViewIndex++; 
    }

    void CreateControlsOnPanel2(bool enginePickerEnabled, bool colorPickerEnabled)
    {
        var btnPanel2Prev = new Button();
        btnPanel2Prev.ID = "btnPanel1Prev";
        btnPanel2Prev.EnableViewState = false;    
        btnPanel2Prev.Text = "Prev";
        btnPanel2Prev.Click += btnPanel2Prev_Click;

        var btnPanel2Next = new Button();
        btnPanel2Next.ID="btnPanel2Next";
        btnPanel2Next.Text = "Next";
        btnPanel2Next.EnableViewState = false;
        btnPanel2Next.Enabled = false;
        btnPanel2Next.Click += btnPanel2Next_Click;

        if (enginePickerEnabled)
        {
            var ddlEngine = new DropDownList();
            ddlEngine.ID = "ddlEngine";
            ddlEngine.AutoPostBack = true;
            ddlEngine.EnableViewState = false;

            var engines = availableCars.Where(x => x.Brand == filter.Brand).Select(found => found.Engine).Distinct().ToList();
            engines.Insert(0, String.Empty);
            ddlEngine.DataSource = engines;
            ddlEngine.DataBind();
            if (!String.IsNullOrEmpty(filter.Engine))
            {
                ddlEngine.SelectedValue = filter.Engine;
                if (!colorPickerEnabled)
                    btnPanel2Next.Enabled = true;
            }
            else
                ddlEngine.SelectedIndex = 0;
            ddlEngine.SelectedIndexChanged += ddlEngine_SelectedIndexChanged;
            vPanel2.Controls.Add(ddlEngine);
        }
        //remember to add ID to all dynamic controls or there might be an error on postback
        if (colorPickerEnabled)
        {
            var ddlColor = new DropDownList();
            ddlColor.ID = "ddlColor";
            ddlColor.AutoPostBack = true;
            ddlColor.EnableViewState = false;
            ddlColor.SelectedIndexChanged += ddlColor_SelectedIndexChanged;
            vPanel2.Controls.Add(ddlColor);

            if (!String.IsNullOrEmpty(filter.Engine))
            {
                var colors = availableCars.Where(x => x.Brand == filter.Brand && x.Engine == filter.Engine).Select(found => found.Paint.ToString()).Distinct().ToList();
                colors.Insert(0, String.Empty);
                ddlColor.DataSource = colors;
                if (filter.Paint.HasValue)
                {
                    ddlColor.SelectedValue = filter.Paint.Value.ToString();
                    btnPanel2Next.Enabled = true;
                }

            }
            else
            {
                ddlColor.DataSource = null;
                ddlColor.SelectedIndex = 0;
            }
            ddlColor.DataBind();
        }

        vPanel2.Controls.Add(btnPanel2Prev);
        vPanel2.Controls.Add(btnPanel2Next);
    }

    protected void ddlEngine_SelectedIndexChanged(object sender, EventArgs e)
    {
        var ddlEngine = sender as DropDownList;
        var btnPanel2Next = (Button)vPanel2.FindControl("btnPanel2Next");

        if (!String.IsNullOrEmpty(ddlEngine.SelectedValue))
        {
            filter.Engine = ddlEngine.SelectedValue;
            var colors = availableCars.Where(x => x.Brand == filter.Brand && x.Engine == filter.Engine).Select(found => found.Paint.ToString()).Distinct().ToList();
            colors.Insert(0, String.Empty);
            filter.Paint = null;

            var ddlColor = (DropDownList)vPanel2.FindControl("ddlColor");
            if (ddlColor != null)
            {
                ddlColor.DataSource = colors;
                ddlColor.DataBind();
                ddlColor.SelectedIndex = 0;

                btnPanel2Next.Enabled = false;
            }
            else
                btnPanel2Next.Enabled = true;
        }
        else
        {
            var ddlColor = (DropDownList)vPanel2.FindControl("ddlColor");
            if (ddlColor != null)
            {
                ddlColor.Items.Clear();
                ddlColor.SelectedIndex = -1;
            }
            filter.Engine = null;
            btnPanel2Next.Enabled = false;
        }
    }

    protected void ddlColor_SelectedIndexChanged(object sender, EventArgs e)
    {
        var ddlColor = (DropDownList)vPanel2.FindControl("ddlColor");
        var btnPanel2Next = (Button)vPanel2.FindControl("btnPanel2Next");

        if (!String.IsNullOrEmpty(ddlColor.SelectedValue))
        {
            filter.Paint = (PaintColor)Enum.Parse(typeof(PaintColor), ddlColor.SelectedValue);
            btnPanel2Next.Enabled = true;
        }
        else
        {
            filter.Paint = null;
            btnPanel2Next.Enabled = false;
        }
    }

    protected void btnPanel2Prev_Click(object sender, EventArgs e)
    {
        filter.Engine = null;
        filter.Paint = null;
        mvPanels.ActiveViewIndex--;
    }

    protected void btnPanel2Next_Click(object sender, EventArgs e)
    {
        mvPanels.ActiveViewIndex++;

        var selectedConfiguration = availableCars.Where(x => x.Brand == filter.Brand && x.Engine == filter.Engine
        && (!filter.Paint.HasValue || x.Paint == filter.Paint)).Distinct().FirstOrDefault();
        if (selectedConfiguration != null)
            lblResult.Text = String.Format("You have selected {0} {1} {2} for {3} PLN", selectedConfiguration.Brand,
                selectedConfiguration.Engine, selectedConfiguration.Paint, selectedConfiguration.Cost);
    }

    protected void btnPanel3Prev_Click(object sender, EventArgs e)
    {
        mvPanels.ActiveViewIndex--;
        CreateControlsOnPanel2(true, !filter.EngineOnly);

    }

    protected void btnPanel3Finish_Click(object sender, EventArgs e)
    {
    }
} 
```

如果您有任何其他问题，我很乐意为您提供帮助

# unix - 来自 Unix 的错误 make util: `then' unmatched

> ID：13415324
> 
> 赞同：0
> 
> 时间：2012-11-16T11:05:29.670
> 
> 标签：unix, makefile

尝试运行 makefile 后返回以下错误：

```
 @if [ ! -z "$(WL_BASE)" ]; then \
    $(DIR_JAVA_WEB_BUILD)/JavaWSWebLogicInstall! \
    fi
    @if [ ! -z "$(GF_HOME)" ]; then \
    $(DIR_JAVA_WEB_BUILD)/JavaWSGlassfishInstall! \
    fi 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:42:33.973

我会冒险并建议您缺少几个分号。尝试：

```
@if [ ! -z "$(WL_BASE)" ]; then \
$(DIR_JAVA_WEB_BUILD)/JavaWSWebLogicInstall! ; \
fi
@if [ ! -z "$(GF_HOME)" ]; then \
$(DIR_JAVA_WEB_BUILD)/JavaWSGlassfishInstall! ; \
fi 
```

如果这不起作用，请尝试更简单的方法。从命令行验证这是否有效：

```
@if [ ! -z "$(WL_BASE)" ]; then $(DIR_JAVA_WEB_BUILD)/JavaWSWebLogicInstall! fi 
```

并告诉我们结果（确保首先定义`$(DIR_JAVA_WEB_BUILD)`），我们将从那里开始。

# com - GUID/ProgId/CLSID 混淆

> ID：13415333
> 
> 赞同：0
> 
> 时间：2012-11-16T11:06:00.697
> 
> 标签：com, guid, uuid

试图追查 COM 问题，我正在调试我的代码，似乎看到相同的 GUID 代表不同的方式......

我的代码中有一行： `class __declspec(uuid("{D4F83347-E58E-11d1-9D47-006008098294}"))`

以及介于两者之间的各种注册表内容，然后调用：

```
CLSID clsid;
::CLSIDFromProgID("myProgId",&clsid); 
```

在调试器中，clsid 显示为`{000AFC9A-3347-D4F8-8EE5-D1119D470060}`. 对我来说，这太相似了，不正确，但这不是我可以自动检查的东西……我们有 D4F8 和 3347、9D47，但 E58E 变成了 8EE5 等。

有没有一种方法可以让我理解为什么会发生这种情况，并且有一种方法可以让它们看起来相同以进行比较？

**编辑** 为了清除一些侧向跟踪，我检查了 Windows 注册表中的 CLSID 和我们的注册脚本`{D4F83347-E58E-11d1-9D47-006008098294}`- 所以`uuid(...)`我认为我的问题不相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:05:47.850

当您已经拥有 guid 时使用 CLSIDFromProgID() 没有多大意义。该函数在注册表中查找以将“ProgId”字符串映射到 CLSID {guid}。这当然使得正确注册 progid 很重要。当然听起来不是。当您的类已经被装饰时，`__declspec(uuid)`只需使用[__uuidof() 运算符](http://msdn.microsoft.com/en-us/library/zaah6a61%28v=vs.100%29.aspx)来检索 guid。

字节值的相似性表明您的注册码已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:08:36.737

"__declspec(uuid" 只是标识符与您的类的关联，仅此而已。使用`CLSIDFromProgID`API，您使用系统注册表中的注册信息将 ProgID 解析为 CLSID。也就是说，两者不必匹配。它们通常匹配但是，如果您将所有事情都做得很好，并且您的 COM 类使用与源代码中附加到 C++ 类的标识符相同的标识符进行注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T16:48:44.230

经过一些测试，我发现问题只是可视化 C++ 调试器如何显示值，仅此而已。例如，注册表值为`{D4F83347-E58E-11d1-9D47-006008098294}`，调用给`::StringToCLSID()`定的结果- 但在调试器中 MSVC++将变量*显示*为。`CLSIDFromProgID()``{D4F83347-E58E-11d1-9D47-006008098294}`*`{000AFC9A-3347-D4F8-8EE5-D1119D470060}`*

 **为什么*会这样，是另一个问题！*

# javascript - 如何使用具有相同输入类型的两个 .siblings？

> ID：13415337
> 
> 赞同：2
> 
> 时间：2012-11-16T11:06:05.143
> 
> 标签：javascript, jquery

我也想得到“行尸走肉”，但它只会隐藏第一个。我可以在.this 上上课吗？或者我该怎么做？

```
$(".articel input[type='button']").click(function(){                    
        var price = $(this).siblings("input[type='hidden']").attr("value");
        var quantity =  $(this).siblings("input[type='number']").attr("value");
        var name = $(this).siblings("input[type='hidden']").attr("value");
        var ul = document.getElementById("buylist"); 
        var prod = name + " x " + quantity + " " + price + "$";

        var el = document.createElement("li"); 
        el.innerHTML = prod; 
        ul.appendChild(el);

<form class="articel">
        Quantity: <input type="number" style="width:25px;"><br>
        Add to cart: <input type="button" class="btn">
        <input type="hidden" value="30">
        <input type="hidden" value="The walking dead">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:12:26.547

我会在您的隐藏输入（价格、名称）中添加一个类名。这样html源代码更具可读性，js代码也将更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:09:30.000

识别表单字段的常规方法是通过`name`属性。

HTML：

```
<input type="hidden" name="title" value="The walking dead"> 
```

jQuery：

```
var name = $(this).siblings('input[name=title]').val(); 
```

您当前的选择器 ，`siblings("input[type='hidden']")`选择*所有*隐藏字段兄弟，但由于您无法辨别它们，`attr`将始终只产生第一个匹配项的值。

您也可以迭代您的元素集合，或者通过 index 或 访问它们`siblings('input[type=hidden]:eq(1)')`，`siblings('input[type=hidden]').eq(1)`但这是一个糟糕的设计，如果您为其他内容添加另一个隐藏字段，则会破坏您的代码。您确实应该更喜欢命名您的元素，以便您可以以有意义的方式访问它们并了解您的数据。这样您就可以根据新要求自由移动和修改您的标记，而不会破坏您的脚本。

顺便说一句，我在`.val()`上面使用，它是`.attr('value')`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T11:09:30.263

一种选择是使用特殊的选择器，例如`:first`and `:last`：

```
var price = $(this).siblings("input[type='hidden']:first").attr("value");
var name = $(this).siblings("input[type='hidden']:last").attr("value"); 
```

但是，您始终可以为元素设置类名：

```
<input type="hidden" class="price" value="30">
<input type="hidden" class="name" value="The walking dead">

var price = $(this).siblings(".price").attr("value");
var name = $(this).siblings(".name").attr("value"); 
```

# c++ - C++，帮助扩展这个类

> ID：13415343
> 
> 赞同：1
> 
> 时间：2012-11-16T11:06:29.650
> 
> 标签：c++, inheritance

我要扩展一个 C++ 类，但绝对没有该语言的背景。谷歌搜索并没有帮助我理解如何解决编译错误：

```
Constructor for 'JRB2World' must explicitly initialize the base class 'b2World' which does not have a default constructor 
```

所以，有这个 b2World.h

```
class b2World
{
public:
    b2World(const b2Vec2& gravity);
    ~b2World();

    // ... 
```

及其.cpp：

```
b2World::b2World(const b2Vec2& gravity)
{
    // ...
}

b2World::~b2World()
{
    // ...
} 
```

我的班级标题：

```
#import "Box2D.h"

class JRB2World : public b2World {

    float factor;

public:

    JRB2World(const b2Vec2& gravity);
    ~JRB2World();

    float getFactor();
    void setFactor(float f);
}; 
```

我的班级实现：

```
JRB2World::JRB2World(const b2Vec2& gravity) {

// Constructor for 'JRB2World' must explicitly initialize the base class 'b2World' which does not have a default constructor
}

JRB2World::~JRB2World() {
}

float JRB2World::getFactor(){

    return factor;
}

void JRB2World::setFactor(float f){

    factor = f;
} 
```

我想这与调用 java 或 objc 中的“超级构造函数”有关。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:10:20.733

只需将构造函数放入继承类的构造函数的初始化列表中即可：

```
JRB2World::JRB2World(const b2Vec2& gravity) : b2World(gravity) {
} 
```

根据您想要做什么，我不会在这里使用继承：将 Box2D 世界放入成员变量中。这应该更容易替换它，以防万一它的接口在版本上发生变化，或者您稍后决定使用另一个物理引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:10:02.367

您的基类没有默认（不带参数）构造函数。在派生类初始化列表中调用它：

```
JRB2World::JRB2World(const b2Vec2& gravity):b2World(gravity) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:15:23.560

对于这个例子，我更喜欢组合而不是继承。

使用组合，您始终可以选择定义自己的行为或简单地公开您的组合部分的行为。这样您就不会遇到继承层次结构（虚拟与非虚拟等）可能施加的任何限制。您可能不需要访问新类中的所有 b2World 方法

# bugzilla - 默认情况下，所有产品都对 bugzilla 中的所有用户可见

> ID：13415344
> 
> 赞同：1
> 
> 时间：2012-11-16T11:06:32.810
> 
> 标签：bugzilla

我正在使用 Bugzilla v 3.6.3，并且对于所有用户来说，每个人都可以看到产品如何限制某些用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T03:36:00.460

首先，如果我们需要为每个单独的产品设置产品组。之后为单个产品设置编辑组权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:59:54.870

您正在寻找的称为“安全组”，请参阅[http://www.bugzilla.org/docs/tip/en/html/groups.html](http://www.bugzilla.org/docs/tip/en/html/groups.html)

# javascript - JavaScript - 如何停止鼠标移动

> ID：13415345
> 
> 赞同：4
> 
> 时间：2012-11-16T11:06:33.643
> 
> 标签：javascript

*没有 jQuery 可能。*

**如何使用 JavaScript 禁用/停止鼠标移动？**

怎么做：如果鼠标被移动到，比方说，`position left < 300`禁用鼠标移动以防止进一步移动到这个方向。

那可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T11:12:58.633

Pointer Lock API 可能是您正在寻找的

[https://developer.mozilla.org/en-US/docs/API/Pointer_Lock_API](https://developer.mozilla.org/en-US/docs/API/Pointer_Lock_API)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-16T11:12:16.470

Javascript 可以读取鼠标位置但不能设置它。鼠标光标属性存在于 HTML 文档对象模型之外，因此超出了 Javascript 的范围。然而，鼠标事件被捕获，因此可读/事件修改也是允许的（鼠标悬停、鼠标悬停、鼠标移出、鼠标单击、dblclick）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T11:12:16.993

你不能用 JavaScript 做到这一点，我敢说你永远也做不到。

例如，如果您需要为某种游戏元素执行此操作，我建议您在鼠标下方放置一个页面元素，并防止页面元素移动到边界之外，即使鼠标移动也是如此。

# sql-server - 访问存储过程时出错

> ID：13415347
> 
> 赞同：2
> 
> 时间：2012-11-16T11:06:43.747
> 
> 标签：sql-server, sql-server-2005-express, database-permissions

我们有一个 .NET3.5 Windows 窗体应用程序，它调用同一服务器上的 ASP.NET SOAP Web 服务。然后，此 Web 服务将数据保存到 SQL Server Express 2005 数据库中，同样位于同一服务器上。

该应用程序已在内部以及我们的许多客户中部署，并且已按预期运行超过 18 个月。然而本周，在我们主要客户的站点上，该应用程序已开始在其部署的 10 台服务器中的 4 台上生成错误消息。所有 Web 服务方法都使用相同的连接字符串，但只有一种 Web 方法受到影响。

连接字符串具有以下格式：

```
Data Source=MYSERVER\SQLEXPRESS;Initial Catalog=MyDatabase;
Persist Security Info=True;User ID=MyUser;Password=MyPassword 
```

当应用程序调用一个特定的 Web 服务方法时，它会产生错误：

> *找不到用户“MyDatabase”，因为它不存在或您没有权限。*

没有对应用程序进行任何更改来导致此问题，但是客户的 IT 人员可能对这些服务器进行了更改。`MyUser`已被授予存储过程的权限，并且能够连接到所有其他 Web 服务接口。

让我感到困惑的主要事情是错误消息说不存在的用户是连接字符串`MyDatabase`中的`Initial Catalog`名称。

我已经在现场与客户一起验证了应用程序仍然设置正确，并且所有其他 Web 服务接口都正确连接到数据库。

任何可能的原因或我可以检查的其他事情的任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:43:07.190

我强烈建议不要删除 dbo。那是模式名称。简单地删除它意味着数据库使用默认模式，这可能是 dbo 反正。所以它什么也做不了。但是，如果在调用过程时不使用模式名称，您可能会遇到命名冲突。例如，如果您在 DB 中的两个不同模式中有一个同名的过程，并且您尝试在没有模式名称的情况下调用它，则 DB 将不知道该调用哪个，从而导致异常。

# android - Facebook 登录 3.0 与 LibGDX

> ID：13415348
> 
> 赞同：2
> 
> 时间：2012-11-16T11:06:47.167
> 
> 标签：android, facebook, login, libgdx

我想使用 LibGDX 制作游戏，但我不知道如何打开 Facebook 登录的新对话框。有人可以告诉我怎么做，或者上传一个示例项目。Facebook SDK 需要使用 Android 原生 UI 库，但 LibGDX 不需要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:13:19.517

您需要隔离 libGDX 应用程序的 Android 部分中的所有 Android 特定代码。通常，在 libGDX 应用程序中解决此问题的方法是定义一个新接口，该接口导出您的通用（独立于平台）代码所需的 API，然后使用特定于平台的代码在不同的后端实现该接口。

所以，创建一个这样的接口：

```
public interface FacebookLogin {
   public boolean tryToLogIn();
} 
```

然后在桌面后端，创建一个只返回 false 的虚拟实现，并在 Android 端创建一个实现您需要的实现（您可能需要使用 a`Handler`让事情在正确的线程上运行）。然后从每个后端的初始化代码中向下传递实现。

# c# - 日期验证酒店预订

> ID：13415349
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:06:50.050
> 
> 标签：c#, winforms, timespan

嗨，我正在创建一个酒店预订表格，并想按所住的夜数计算总住宿费用。它需要到达日期和出发日期，但我想添加验证，因此如果用户输入的格式不正确，则会显示一个消息框，要求他们重试。这是我的代码在转换时间跨度方面已经有了一些帮助，所以再一次任何帮助都会令人惊叹。错误出现在以“dateDiff = aDate”开头的行上，它表示变量 aDate 和 dDate 未分配，提前致谢：

```
 String arrival, departure;
        arrival = textBox1.Text;
        departure = textBox2.Text;

        DateTime aDate, dDate;

        try
        {
            aDate = DateTime.ParseExact(arrival, "dd/mm/yyyy", null);
            dDate = DateTime.ParseExact(departure, "dd/mm/yyyy", null);
            return;
        }
        catch
        {
            MessageBox.Show("Invalid input format please enter in format DD/MM/YYYY");
        }

        TimeSpan dateDiff;
        dateDiff = dDate.Subtract(aDate);
        int nights = (int)dateDiff.TotalDays;

        textBox3.Text = ("" + nights);
        textBox5.Text = ("£" + (nights * 115)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:14:24.827

编译器警告的原因是您没有为本地`DateTime`字段分配值。局部变量未使用默认值初始化，因此您必须手动执行此操作才能使用它们。由于您在 a 中分配了值，`Try/Catch`因此不能保证他们会得到一个。

相反，您可以使用[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)：

```
DateTime aDate, dDate;
if( DateTime.TryParseExact(arrival, "dd/mm/yyyy", null, DateTimeStyles.None, out aDate)
 && DateTime.TryParseExact(departure, "dd/mm/yyyy", null, DateTimeStyles.None, out dDate))
{
    // ...
}
else{
    MessageBox.Show("Invalid input format please enter in format DD/MM/YYYY");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:09:27.613

您的代码在您捕获后继续。使用 try 块中的日期放置代码。

```
 String arrival, departure;
        arrival = textBox1.Text;
        departure = textBox2.Text;

        DateTime aDate, dDate;

        try
        {
            aDate = DateTime.ParseExact(arrival, "dd/mm/yyyy", null);
            dDate = DateTime.ParseExact(departure, "dd/mm/yyyy", null);

            TimeSpan dateDiff;
            dateDiff = dDate.Subtract(aDate);
            int nights = (int)dateDiff.TotalDays;

            textBox3.Text = ("" + nights);
            textBox5.Text = ("£" + (nights * 115));
        }
        catch
        {
            MessageBox.Show("Invalid input format please enter in format DD/MM/YYYY");
        } 
```

如果它们解析成功，请不要返回，否则当您的输入验证时您将*没有结果。*

或者，将 return 放在您的 catch 块中，以便在失败时停止执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:12:29.333

你的代码应该是

```
 String arrival, departure;
    arrival = textBox1.Text;
    departure = textBox2.Text;

    DateTime aDate, dDate;

    try
    {
        aDate = DateTime.ParseExact(arrival, "dd/mm/yyyy", null);
        dDate = DateTime.ParseExact(departure, "dd/mm/yyyy", null);

        TimeSpan dateDiff;
        dateDiff = dDate.Subtract(aDate);
        int nights = (int)dateDiff.TotalDays;

        textBox3.Text = ("" + nights);
        textBox5.Text = ("£" + (nights * 115));

    }
    catch
    {
        MessageBox.Show("Invalid input format please enter in format DD/MM/YYYY");
        return;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:10:06.423

`aDate`为您的,分配一些默认值`dDate`，错误就会消失。原因是编译器无法确定它们是否会在 try 块中确定地被赋值。你可以做

```
DateTime aDate = default(DateTime);
DateTime dDate = default(DateTime); 
```

**但**

与其使用 try-catch 来验证日期，不如使用[DateTime.TryParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)

```
DateTime aDate, dDate;

if (DateTime.TryParseExact(arrival, 
                           "dd/MM/yyyy", 
                            CultureInfo.InvariantCulture,
                            DateTimeStyles.NoCurrentDateDefault, 
                            out aDate))
{
    MessageBox.Show("Invalid input format please enter in format DD/MM/YYYY");
} 
```

所以你的完整代码应该是：

```
String arrival, departure;
arrival = textBox1.Text;
departure = textBox2.Text;

DateTime aDate, dDate;

if (DateTime.TryParseExact(arrival, 
                            "dd/MM/yyyy", 
                            CultureInfo.InvariantCulture, 
                            DateTimeStyles.NoCurrentDateDefault, 
                            out aDate))
{
    MessageBox.Show("Invalid input format for Arrival Date - please enter in format DD/MM/YYYY");
}
if (DateTime.TryParseExact(departure, 
                            "dd/MM/yyyy", 
                            CultureInfo.InvariantCulture, 
                            DateTimeStyles.NoCurrentDateDefault, 
                            out dDate))
{
    MessageBox.Show("Invalid input format for Departure Date - please enter in format DD/MM/YYYY");
}

TimeSpan dateDiff;
dateDiff = dDate.Subtract(aDate);
int nights = (int)dateDiff.TotalDays;

textBox3.Text = ("" + nights);
textBox5.Text = ("£" + (nights * 115)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T11:18:04.567

使用不需要解析的 dateTimePicker 控件

# php - 将变量从一个函数发送到另一个函数

> ID：13415353
> 
> 赞同：0
> 
> 时间：2012-11-16T11:06:53.987
> 
> 标签：php

基本上，我有两个函数，如下所示，第一个函数检查接送是否是机场地址（通过 ajax 从 jquery 函数发送）。如果它是机场，基本上我想将变量 $fare 从 getAirportFare 函数发送到 getFinalFare 函数，这样如果它是机场地址，它就会增加费用。我只是想知道我将如何做到这一点？（还在努力学习PHP）

任何帮助将非常感激。

```
//DEBUG//

public function getAirportFare($fare, $fieldAirport) {

if ($fieldAirport == 'airport') {

    $fare = $fare + 50.00;

    return $fare;

    }

}

//END OF DEBUG//

private static function getFinalFare($fare) {

    $final_fare = ($fare * self::$fare_factor);

    if (self::$str_wait_return == "true") {
        $final_fare = $final_fare * 2;
    }

    if (self::$str_return == "true" && self::$return_date != "false" && self::$return_time != "false") {

        // We need to calc to fare based on the return date and time
        $return_fare = self::getFare(1);

        // Append to final fare
        $final_fare = $final_fare + $return_fare;

    }

    // Create new journey object with the info that we have so far

    /*$journey = new Journey($journey_id,$pickup,$dropoff,$vias,$distance,$vehicle,
                    $date_time,$return_journey,$meet_greet,$extras);*/

    return number_format($final_fare,2);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:11:58.557

要将变量从一个函数发送到另一个函数（或从实例方法发送到静态方法，就像您在此处所做的那样），请在第一个函数中调用第二个函数，并将变量作为参数传递给它，如下所示：

```
public function getAirportFare($fare, $fieldAirport) {

   if ($fieldAirport == 'airport') {

     $fare = $fare + 50.00;

     return self::getFinalFare($fare); 

    }

 } 
```

您的实例方法现在将返回您的静态方法的返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:10:15.803

如果我理解正确的话，就这么简单：

```
//DEBUG//

public function getAirportFare($fare, $fieldAirport) {

if ($fieldAirport == 'airport') {

    $fare = $fare + 50.00;

    // Send the fare to the getFinalFare function and assign it's result.
    $final_fare = self::getFinalFare($fare);
    return $final_fare;

    }

} 
```

如果我没有回答你的问题，请告诉我。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-16T11:11:14.827

我相信你必须`global $fare`在函数外部声明，在函数内部使用时，使用`$this->fare`.

# php - 简单的 MySQL 语法错误

> ID：13415356
> 
> 赞同：2
> 
> 时间：2012-11-16T11:06:59.430
> 
> 标签：php, mysql, sql, select

我正在运行以下代码，但找不到错误所在。谁能建议我应该检查的任何东西？

```
$result = mysql_query("SELECT * FROM table") or die (mysql_error()); 
```

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“表”附近使用正确的语法

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-16T11:08:00.707

`table`是保留关键字，您必须使用反引号对其进行转义。

```
SELECT * 
FROM `table` 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# java - hadoop CompositeInputFormat没有加入所有数据

> ID：13415359
> 
> 赞同：4
> 
> 时间：2012-11-16T11:07:11.940
> 
> 标签：java, input, hadoop, mapreduce

我目前正在使用 Hadoop 0.20.2 和旧 API。我想做一个地图侧连接。我有一个图形数据集，它由两个文件组成，一个带有边，另一个带有节点。边的格式为“目标源标签”，节点为“nodeID '-' label 0”，并按第一个值排序。

小型玩具示例（6 个节点和 8 个边）一切正常，但是当我扩大规模时，它只会加入输入文件的第一部分。我找不到原因，因为一切都应该是正确的格式和排序。我错过了什么吗？

对于“调试”，我只是打印了带有在地图上缩进的 TupleWritable 中的值的键。可以在这里看到，[http](http://pastebin.com/rcNx2r5c) ://pastebin.com/rcNx2r5c 。

节点文件为 9416 字节，边缘文件为 15797 字节，并在结果中完全输出。但是在键 98 之后连接停止。然后它首先输出边，然后输出节点，但是节点和边都有键 99。

我对 CompositeInputFormat 的工作设置：

```
conf.setInputFormat(CompositeInputFormat.class);

Path[] input = new Path[] { inputNodes, inputEdges};
conf.set("key.value.separator.in.input.line", "\t");
conf.set("mapred.join.expr", CompositeInputFormat.compose(
   "outer", KeyValueTextInputFormat.class,
   input )
); 
```

任何帮助将不胜感激，所以提前致谢！

**编辑**：我已经解决了这个问题。对于那些感兴趣的人；问题是 KeyValueTextInputFormat。它具有作为 Text 的键和值，我应该有 LongWritable 键和 Text 值。虽然我认为这不是问题，但它似乎失败了。所以我根据KeyValueTextInputFormat制作了自己的输入格式。

```
public class KeyValueLongInputFormat extends FileInputFormat<LongWritable, Text> implements JobConfigurable {

    private CompressionCodecFactory compressionCodecs = null;

    @Override
    public void configure(JobConf conf) {
        compressionCodecs = new CompressionCodecFactory(conf);
    }

    protected boolean isSplitable(FileSystem fs, Path file) {
        return compressionCodecs.getCodec(file) == null;
    }

    @Override
    public RecordReader<LongWritable, Text> getRecordReader(InputSplit genericSplit, JobConf job, Reporter reporter)
            throws IOException {

        reporter.setStatus(genericSplit.toString());
        return new KeyValueLongLineRecordReader(job, (FileSplit) genericSplit);
    }

} 
```

和

```
public class KeyValueLongLineRecordReader implements RecordReader<LongWritable, Text> {
    private final LineRecordReader lineRecordReader;

    private byte separator = (byte) '\t';

    private LongWritable dummyKey;

    private Text innerValue;

    public Class getKeyClass() {
        return LongWritable.class;
    }

    public LongWritable createKey() {
        return new LongWritable();
    }

    public Text createValue() {
        return new Text();
    }

    public KeyValueLongLineRecordReader(Configuration job, FileSplit split) throws IOException {

        lineRecordReader = new LineRecordReader(job, split);
        dummyKey = lineRecordReader.createKey();
        innerValue = lineRecordReader.createValue();
        String sepStr = job.get("key.value.separator.in.input.line", "\t");
        this.separator = (byte) sepStr.charAt(0);
    }

    public static int findSeparator(byte[] utf, int start, int length, byte sep) {
        for (int i = start; i < (start + length); i++) {
            if (utf[i] == sep) {
                return i;
            }
        }
        return -1;
    }

    /** Read key/value pair in a line. */
    public synchronized boolean next(LongWritable key, Text value) throws IOException {
        LongWritable tKey = key;
        Text tValue = value;
        byte[] line = null;
        int lineLen = -1;
        if (lineRecordReader.next(dummyKey, innerValue)) {
            line = innerValue.getBytes();
            lineLen = innerValue.getLength();
        } else {
            return false;
        }
        if (line == null)
            return false;
        int pos = findSeparator(line, 0, lineLen, this.separator);
        if (pos == -1) {
            tKey.set(Long.valueOf(new String(line, 0, lineLen)));
            tValue.set("");
        } else {
            int keyLen = pos;
            byte[] keyBytes = new byte[keyLen];
            System.arraycopy(line, 0, keyBytes, 0, keyLen);
            int valLen = lineLen - keyLen - 1;
            byte[] valBytes = new byte[valLen];
            System.arraycopy(line, pos + 1, valBytes, 0, valLen);
            tKey.set(Long.valueOf(new String(keyBytes)));
            tValue.set(valBytes);
        }
        return true;
    }

    public float getProgress() {
        return lineRecordReader.getProgress();
    }

    public synchronized long getPos() throws IOException {
        return lineRecordReader.getPos();
    }

    public synchronized void close() throws IOException {
        lineRecordReader.close();
    }
} 
```

解决了我的问题。

# android - 同时更新两个 UI

> ID：13415361
> 
> 赞同：1
> 
> 时间：2012-11-16T11:07:37.027
> 
> 标签：android, user-interface, ui-thread

嗨，我正在尝试构建像 Plus 新闻这样的 UI，

第一次尝试：我尝试将 ListView 用作垂直视图，每个新闻提要都是水平 ListView，但问题是“行重用”，列表视图重用视图，这使我的应用程序变慢，

第二次尝试：我使用大量布局构建了一个自定义 ui，主滚动视图和水平滚动视图，视图构建后非常流畅，但问题是 ui 需要 10-30 秒才能构建，并且活动处于黑暗视图直到建造过程完成，

所以对我来说没问题，但我需要显示对话框说“正在加载 Ui”，但我不能显示它，因为构建过程正在主线程中处理，并且对话框也将显示在主线程中，

那么如何实现呢？！

我尝试使用处理程序、线程，但出现 Looper.prepare 错误

谢谢

* * *

更新 ：

我对 listview 的问题是：

每次我像第一次一样滚动显示的新行，那又如何，我使用带有进度条的延迟加载图像，每次行显示显示的进度条并等到从 sd 加载图像时，它需要 1 秒，但是问题是 1 秒 100 图像是 100 秒，

所以如果这 100 秒只用了一次，那么所有的滚动条都会顺利工作，所以如果有任何方法可以停止重新使用 convertedView 这将是解决方案 - 我在 iphone 中使用了这个解决方案并且它有效 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:33:44.293

您可以尝试`onCreate(..)`在调用前显示 spinner `setContentView(..)`，但这不是一个好的解决方案，因为您可能会遇到其他问题，例如不同设备上的 OOM。

我建议你给`ListView`第二次机会，这是一个非常好的小部件，但你需要正确使用它。实际上，如果使用得当，“行重用”会更快（不是每次[`getView(..)`](http://developer.android.com/reference/android/widget/Adapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)都调用新视图，利用 ViewHolder-pattern）。

# delphi - 将位图存储在文本文件中

> ID：13415365
> 
> 赞同：4
> 
> 时间：2012-11-16T11:07:54.530
> 
> 标签：delphi, delphi-xe2

我想将小位图存储在一个文本文件中，类似于 Delphi 处理它的`dfm`文件的方式。

RTL 或 VCL 中是否有我可以用来执行此操作的函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:14:13.983

我建议您执行以下操作：

1.  保存到内存流。使用 TMemoryStream，并在位图上调用 SaveToStream。
2.  压缩流，可能使用 zlib 单元。此步骤是可选的。
3.  使用 base64 对流进行编码。例如，您可以使用 Soap.EncdDecd 提供的功能。

而在相反的方向，你只需颠倒这些步骤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T20:58:59.000

文本 DFM 使用该`BinToHex()`函数来格式化二进制数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:10:25.507

您可以简单地使用 Win32.WriteFile 将您的位图缓冲区写入文件。

# android - Android Web 应用程序中的 Google Analytics 在 4.0 或更高版本中不起作用

> ID：13415368
> 
> 赞同：3
> 
> 时间：2012-11-16T11:08:00.707
> 
> 标签：android, google-analytics, android-webview

我一直在使用 Google Analytics 来跟踪我的移动应用使用情况。我用 Rhomobile（类似于 Phonegap）构建了它，它使用 a`WebView`来显示 UI。我在第一页粘贴了 Google Analytics javascript 代码，它在 iOS4 到 6 和 Android 2.3 及更低版本上运行良好。但是，没有报告任何 Android 4+ 设备的统计信息。我的应用程序可以访问 Internet。有任何想法吗？Android 4 是否阻止了 Google Analytics 的这种使用？

```
 <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXXX-Y']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:58:59.290

我想到了。您需要添加：

```
_gaq.push(['_setDomainName', 'none']); 
```

前

```
_gaq.push(['_trackPageview']); 
```

它至少可以在 Android 4.1.1 上运行。

# javascript - 在 javascript 中禁用 Chrome 浏览器上的导航滑动

> ID：13415370
> 
> 赞同：6
> 
> 时间：2012-11-16T11:08:06.993
> 
> 标签：javascript, google-chrome, navigation, swipe

在 Chrome Mobile 上，Google 引入了带有向左/向右滑动事件的标签导航。

但我有一个 web 应用程序，我实现了向左滑动事件来打开我的导航菜单（如 facebook 或 spotify）

问题是，如果用户在第一个左侧像素（left：0）上开始滑动，浏览器将启动导航模式，并且不执行我的打开菜单功能。

有没有办法禁用或停止 Chrome 上的导航模式？

我已经尝试过`.preventDefault`, 和`stopPropagation`功能，但没有工作:(

谢谢你的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T12:54:21.013

您可以尝试使用以下组合：

*   按照[这个例子](http://www.hunlock.com/blogs/Mastering_The_Back_Button_With_Javascript)，使用拦截浏览器`Back`函数，以及`window.onbeforeunload`
*   [使用本例](http://www.aspsnippets.com/Articles/Disable-Browser-Back-Button-Functionality-using-JavaScript.aspx)中说明的技术禁用导航？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-16T11:13:24.190

此行为内置于 chrome 的 java 源代码中（可能），这就是为什么我认为仅使用 Javascript 无法禁用此行为的原因。如果这种行为是必要的，也许您可​​以使用 phonegap 分发您的应用程序。

# javascript - 用于标记循环的 Google Maps API V3 函数闭包

> ID：13415371
> 
> 赞同：0
> 
> 时间：2012-11-16T11:08:07.743
> 
> 标签：javascript, google-maps, closures

我一直在阅读stackoverflow的其他条目，但我真的无法理解它是如何工作的：

```
 for(a in elements){
                var address = elements[a].location;                       

                var contentString = '<table>';

                for(b in elements[a].other_fields){
                    var current = elements[a].other_fields[b];

                    switch(current.type){
                        case "text":
                            contentString += "<tr><td class = 'the_title'>" + current.label + ":</td><td class = 'the_value'>" + current.values[0].value + "</td></tr>";
                        break;
                        case "date":
                            if(!current.values[0].end){
                                var end_date_output_string = "";
                            }else{ 
                                var end_date_output_string = " -> " + current.values[0].end;
                            }
                            contentString += "<tr><td class = 'the_title'>" + current.label + ":</td><td class = 'the_value'>" + current.values[0].start + end_date_output_string + "</td></tr>";
                        break;
                    }
                }

                contentString += "</table>";  
                contentString += "<input type = 'button' onclick = 'window.open(\"" + elements[a].url + "\");' value = 'Open in Podio'>";

                geocoder.geocode( { 'address': address}, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        map.setCenter(results[0].geometry.location);
                        alert(contentString);
                        addMarker(results[0].geometry.location);    
                    } else {
                        alert("Geocode was not successful for the following reason: " + status);
                    }
                });      
                //open_info_window(a, contentString);  
            } 

                                function addMarker(location) {
                                    var marker_copy = new google.maps.Marker({
                                        position: location, 
                                        map: map 
                                    });   

                                    marker = marker_copy;

                                    markersArray.push({
                                        "marker": marker,
                                        "info_window": null
                                    });  

                                    alert("marker added: " + markersArray.lenght);  
                                }   

                                // Opens info windows
                                function open_info_window(key, contentString) { 
                                    var infowindow = new google.maps.InfoWindow({
                                        content: contentString
                                    });     

                                    alert(key);

                                    markersArray[key].info_window = infowindow;

                                    google.maps.event.addListener(markersArray[key].marker, "click", function() {
                                        markersArray[key].info_window.open(map, markersArray[key].marker);
                                    });
                                } 
```

我尝试**提醒（contentString）**的部分不会提醒我所期望的，这与闭包有关，但实际上我以前从未遇到过这样的代码。任何机会你都可以给我一点帮助。

我想为要添加的标记创建一个带有 contentString 的信息窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:08:23.180

是的，我想通了

```
 function codeAddress(){
            for(a in elements){ 
                (function(a){   
                    var address = elements[a].location;  

                    geocoder.geocode( { 'address': address}, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            map.setCenter(results[0].geometry.location);
                            addMarker(results[0].geometry.location); 
                            alert(a);
                            var the_string = generate_string(elements, a);

                            infowindow[a] = new google.maps.InfoWindow({
                                content: the_string
                            });     

                            google.maps.event.addListener(markersArray[a], "click", function() {
                                infowindow[a].open(map, markersArray[a]);
                            });
                        } else {
                            alert("Geocode was not successful for the following reason: " + status);
                        }
                    });       
                })(a);        
            } 
        } 
```

诀窍是这样做，我不知道它是如何工作的，但它是有效的：

```
(function(a){   
})(a); 
```

我假设 a 是函数的构造函数，因此它不是由变量引用创建的，而是由实际的迭代器本身创建的。天哪，我不知道。伊皮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:25:49.303

我假设你会在 中看到最后一次迭代的结果，这在[这篇博](http://www.mennovanslooten.nl/blog/post/62)`alert`文中有详细解释。

在您的情况下，我会切换执行顺序：您有一个外部循环，它调用`geocoder.geocode`：

```
for(a in elements) {
        var address = elements[a].location;                       
        (function (element) {
            geocoder.geocode( { 'address': address}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);
                    doAlert(element);
                    addMarker(results[0].geometry.location);    
                } else {
                    alert("Geocode was not successful for the following reason: " + status);
                }
            });
        })(elements[a]);
} 
```

带功能`doAlert`：

```
var doAlert = function(element) {
            var contentString = '<table>';

            for(b in element.other_fields){
                var current = element.other_fields[b];

                switch(current.type){
                    case "text":
                        contentString += "<tr><td class = 'the_title'>" + current.label + ":</td><td class = 'the_value'>" + current.values[0].value + "</td></tr>";
                    break;
                    case "date":
                        if(!current.values[0].end){
                            var end_date_output_string = "";
                        }else{ 
                            var end_date_output_string = " -> " + current.values[0].end;
                        }
                        contentString += "<tr><td class = 'the_title'>" + current.label + ":</td><td class = 'the_value'>" + current.values[0].start + end_date_output_string + "</td></tr>";
                    break;
                }
            }

            contentString += "</table>";  
            contentString += "<input type = 'button' onclick = 'window.open(\"" + elements[a].url + "\");' value = 'Open in Podio'>";

            alert(contentString);
      } 
```

# ruby-on-rails - 提交 ruby 表单后重置字段的值

> ID：13415374
> 
> 赞同：7
> 
> 时间：2012-11-16T11:08:16.213
> 
> 标签：ruby-on-rails

我有基于输入日期的搜索字段。

问题是每当我提交表单时，搜索结果就会很好，但是随着页面重新加载，搜索字符串会从字段中消失。

谁能告诉我如何在字段中保留搜索字符串。

我正在使用 ruby​​ 表单，下面是代码..

```
<%=form_for :messages, url: url_for( :controller => :time_sheets, :action => :late ), :html => { :id => "submitForm1" } do |f| %>
        <div class="field">
             <tr>   
                <td> From Date <%= f.text_field :leaveFrom, :id => 'datepicker2', :class => 'phcolor','data-validation' =>'required', :readonly => true %></td>
                <td> To Date <%= f.text_field :leaveTo, :id => 'datepicker7', :class => 'phcolor', :readonly => true %></td>
                <td >Late Time<%= f.text_field :on_duty, :id => 'timepicker5' %></td>
                <div class="actions">
                  <td style="position: absolute;right: 178px;"><input type="button"  class="btn btn-primary" id="submitid" tabindex="7" value="Go"></td>
                </div>
            </tr>
        </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:19:33.657

您的代码`form_for :messages`表明存在一个实例变量`@messages`，它保存表单中字段的数据。有有效的`@messages`吗？

如果您没有消息模型，我想一个简单的解决方法。您可以将其添加到操作中：

```
@messages = OpenStruct.new(params[:messages]) 
```

或者，只需替换`form_for`为`form_tag`, 并从参数中设置每个字段的值。`form_for`“围绕特定模型对象创建表单和范围，用作询问字段值的基础。”，这不适合这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:26:08.037

如果您的表单与任何模型无关，则使用`form_tag`助手等。然后您将执行以下操作：

```
<%= text_field_tag :leaveFrom, params[:leaveFrom], :id => 'datepicker2', :class => 'phcolor','data-validation' =>'required', :readonly => true %> 
```

# ruby-on-rails - 是否可以将 doodle (doodle.com) 与 Rails 应用程序集成？

> ID：13415376
> 
> 赞同：0
> 
> 时间：2012-11-16T11:08:34.497
> 
> 标签：ruby-on-rails, api, web-applications

我看到 doodle 没有维护 ruby​​-client 来访问 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:12:09.503

是的。doodle.com 提供了一个 REST API [http://www.doodle.com/about/APIs.html](http://www.doodle.com/about/APIs.html)

您可以在 ruby​​ 程序中使用此 REST Web 服务。您可以检查 rest-client 在您的 ruby​​/rails 程序中的使用情况。[https://github.com/archiloque/rest-client](https://github.com/archiloque/rest-client)

# emacs - 如何以编程方式在片段中包含 yasnippet 片段

> ID：13415377
> 
> 赞同：2
> 
> 时间：2012-11-16T11:08:36.277
> 
> 标签：emacs, yasnippet

我正在寻找一种方法来编写一个片段，让我包含另一个片段。以下是 Python 函数的片段示例：

```
def test(args):
    ${1:code here}
    $(insert-snippet "not_implemented_exception") 
```

在示例中，我想先在字段#1 中将一些内容写入python 函数，然后按TAB。点击 TAB 应该把我带到 lisp 位，我可以选择扩展名为“not_implemented_exception”的片段。

我尝试阅读源代码，但对 lisp 很陌生，所以我没有发现任何用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:32:28.320

我认为您可以将文本“not_implemented_exception”设置为最后一个制表位，这样您就可以再按一次 TAB 来展开它。

```
def test(args):
    ${1:code here}
    not_implemented_exception$0 
```

如果您不想将代码段放在末尾，您可以通过以下方式启用嵌套代码段

```
(setq yas-triggers-in-field t) 
```

# c# - 如何确定我服务器上上传的文件是否为pdf？

> ID：13415379
> 
> 赞同：-5
> 
> 时间：2012-11-16T11:08:44.617
> 
> 标签：c#, asp.net, pdf

我需要确定我服务器上上传的文件是否为pdf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:39:29.847

You can check the file type on the server side:

```
if (string.Equals(fileExt, ".pdf", StringComparison.OrdinalIgnoreCase)) {...} 
```

This counteracts input such as "pdf2", etc.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:18:12.237

首先，检查文件的扩展名:)
你应该检查[这个答案](https://stackoverflow.com/questions/3108201/detect-if-pdf-file-is-correct-header-pdf)。

> 1.  您可以简单地尝试使用此类库之一加载 PDF 文件。[iTextSharp](http://sourceforge.net/projects/itextsharp/)将是一个不错的选择。
> 2.  根据 PDF 参考，PDF 文件的标题通常具有 %PDF−1.X 格式（其中 X 是一个数字，目前从 0 到 7）。
> 
> 例如，标题可能出现在文件的前 1024 个字节内的某处，或者采用 %!PS-Adobe-Nn PDF-Mm 的形式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:18:49.277

检查文件扩展名是否为 .pdf

您可以在上传期间使用以下代码执行此操作：

```
<asp:CustomValidator ID="pdfUpload" runat="server" ClientValidationFunction="ValidateFilePDF"
      ErrorMessage="Please select valid pdf document"></asp:CustomValidator>

function ValidateFilePDF(Source, args) {
    var fuData = document.getElementById('<%= yourFileUploadInputBoxID.ClientID %>');
    var FileUploadPath = fuData.value;

    if (FileUploadPath == '') {

       args.IsValid = false;
    }
    else {
       var Extension = FileUploadPath.substring(FileUploadPath.lastIndexOf('.') + 1).toLowerCase();

       if (Extension == "pdf" {
           args.IsValid = true; 
       }
       else {
           args.IsValid = false;
       }
    }
 } 
```

# shader - 在显示器上更新一个对象并且只更新一个对象

> ID：13415380
> 
> 赞同：1
> 
> 时间：2012-11-16T11:08:46.167
> 
> 标签：shader, webgl, three.js, fragment-shader

我使用库three.js 在WebGL 中工作。就我而言，我的场景中有两个对象，我想独立更新显示器上的对象。我使用着色器来修改对象的颜色，我想修改片段着色器的统一参数的值，并将着色器仅应用于我的一个对象。我想在我的网格上应用“drawElements”并使用新参数绘制它。当我做“renderer.render（场景，相机）；” 我更新了所有对象，这不是我想要的。我怎样才能做到这一点 ？请问你能帮帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:27:34.003

如果你使用的是 r.53 之前的版本，你需要为你的第二个着色器克隆你的制服：

```
shaderB = shaderA.clone();
shaderB.uniforms = THREE.UniformsUtils.clone( shaderA.uniforms ); 
```

更好的选择是更新到当前版本 r.53。在这种情况下，制服克隆已为您完成，以下内容就足够了：

```
shaderB = shaderA.clone(); 
```

# c++ - boost::interprocess - allocate_aligned - 在所有进程中保证相同的对齐？

> ID：13415381
> 
> 赞同：0
> 
> 时间：2012-11-16T11:08:47.110
> 
> 标签：c++, boost, shared-memory, memory-alignment, boost-interprocess

如果我使用`allocate_aligned`在托管共享内存中分配一块对齐的内存，是否保证此分配在其他进程中共享时具有相同的对齐方式？文档清楚地表明基地址的映射方式当然可能不同，但它似乎没有说明对齐。

我已经进行了一个实验，似乎表明对齐方式是相同的，但这可能只是运气好，所以我希望得到关于预期行为的更可靠的确认。（常识说它应该是相同的对齐方式，否则会严重限制`allocate_aligned`在共享内存中的有用性，但我真的需要的不仅仅是诉诸常识。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:01:54.507

是的，除非出于某种奇怪的原因您需要的不仅仅是页面对齐。

基地址的映射方式可能不同，但这种映射是以页面粒度完成的。这意味着常见架构上的 4K 对齐。

# sql - 查询应该是什么？

> ID：13415382
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:08:48.817
> 
> 标签：sql, database, relational-database

我们有以下 4 个数据库表

**学校**

```
 School_ID,  School_Name 
```

**学生**

```
Student_id, School_ID, Student Name 
```

**课程**

```
Course_ID, Course_Name 
```

**课程_学生**

```
Course_Id, Student ID 
```

请提出一个查询，该查询返回每个学生至少注册 3 个科目的学校列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:12:21.473

给定模式

```
CREATE TABLE School
    (`School_ID` int, `School_Name` varchar(7))
;

INSERT INTO School
    (`School_ID`, `School_Name` )
VALUES
    (1, 'SchoolA'),
    (2, 'SchoolB'),
    (3, 'SchoolC')
;

CREATE TABLE Student
    (`Student_id` int, `School_ID` int, `Student_Name` varchar(4))
;

INSERT INTO Student
    (`Student_id`, `School_ID`, `Student_Name`)
VALUES
    (1, 1, 'John'),
    (2, 1, 'Alex'),
    (3, 2, 'Lex')
;

CREATE TABLE Course
    (`Course_ID` int, `Course_Name` varchar(9))
;

INSERT INTO Course
    (`Course_ID`, `Course_Name`)
VALUES
    (1, 'Math'),
    (2, 'Science'),
    (3, 'Chemistry'),
    (4, 'Physics'),
    (5, 'History')
;

CREATE TABLE Course_Student
    (`Course_ID` int, `Student_ID` int)
;

INSERT INTO Course_Student
    (`Course_ID`, `Student_ID`)
VALUES
    (1, 1),
    (2, 1),
    (3, 1),
    (1, 2),
    (1, 3),
    (2, 3),
    (4, 2),
    (5, 2)
; 
```

上述模式的预期输出将是`SchoolA`因为它是唯一一所所有学生都注册了至少三门课程的学校。

```
SELECT SCHOOL_ID, School_Name
FROM
(
    SELECT  d.SCHOOL_ID, e.School_Name,e.NoOfStudents
    FROM
        (
          SELECT  a.Student_ID, a.school_ID
          FROM    Student a
                  INNER JOIN Course_Student c
                      ON c.Student_ID = a.Student_ID
                  INNER JOIN Course d
                      ON c.Course_ID = d.Course_ID
          GROUP BY a.Student_ID, a.school_ID
          HAVING COUNT(*) >= 3
        ) d INNER JOIN
        (
          SELECT  b.School_ID, b.School_Name, COUNT(*) NoOfStudents
          FROM    Student a
                  INNER JOIN School b
                      ON a.School_ID = b.School_ID
          GROUP BY b.School_ID, b.School_Name
        ) e ON e.School_ID = d.School_ID
    GROUP BY d.SCHOOL_ID
    HAVING COUNT(*) = e.NoOfStudents
) s 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/6dacc/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:31:54.627

```
select School_name from School
where School_ID not in (
    select School_ID from Student 
    inner join Course_Student on Student.Student_id = Course_Student.[Student ID]
    group by Student_ID, School_ID, Course_Id
    having Count(Course_Id) < 3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:24:19.857

```
Select School_Name, Student_Name, count(Course_Student.Course_ID) as total from School
inner join Student
on Course_Student.School_ID = Student.School_ID
inner join Course
on Student.Student_Id = Course.Student_Id
where total > 3
group by School_Name, Student_Name 
```

# xamarin.android - 在 MonoForAndroid 中使用 IInputFilter

> ID：13415384
> 
> 赞同：2
> 
> 时间：2012-11-16T11:08:53.857
> 
> 标签：xamarin.android, input-filtering

我需要在 Mono for Android 中将 RegExpInputFilter 实现为 IInputFilter，但我不明白该怎么做。是否有一些关于如何在某处实现 Java 接口的指导来详细解释这一点？或者更好的是，有没有人在 Mono for Android 中编写了自己的 IInputFilter，可以共享代码或只是一些提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:33:44.530

IInputFilter 已经是 Mono for Android 框架的一部分

它是 Android.Text 命名空间的一部分

[http://androidapi.xamarin.com/?link=T:Android.Text.IInputFilter](http://androidapi.xamarin.com/?link=T:Android.Text.IInputFilter)

```
class RegExInputFilter : Java.Lang.Object, IInputFilter
{
    public Java.Lang.ICharSequence FilterFormatted(Java.Lang.ICharSequence source, int start, int end, ISpanned dest, int dstart, int dend)
    {
       //filter
    }

} 
```

# windows - 如何在使用 py2exe 时包含 ui 和图像文件？

> ID：13415385
> 
> 赞同：5
> 
> 时间：2012-11-16T11:09:02.607
> 
> 标签：windows, py2exe, pyside

我正在使用 Python 2.7 和 PySide 1.1.2 开发一个项目。我的代码在我的 GNU/Linux 上运行没有任何问题，但我也想为 Windows（7 和 8）分发。我不能指望用户安装 Python 和 PySide，所以我决定使用 py2exe（我也尝试了 cx_freeze 和 pyinstaller）。

首先，这是我的文件树：[我在 GitHub 上的项目](https://github.com/th0th/metusuite/tree/experimental)

我创建了一个 setup.py，它是：

```
# -*- coding: utf-8 -*-

from distutils.core import setup
import py2exe

setup(
    console=['bin/metusuite.py'],
    name='metusuite',
    version='0.1',
    author='H. Gökhan Sarı',
    author_email='me@th0th.me',
    packages=['metusuite_libs'],
    package_dir={'metusuite_libs': 'metusuite_libs'},
    package_data={'metusuite_libs': ['ui/*', 'images/*']},
    scripts=['bin/metusuite.py'],
    url='https://github.com/th0th/metusuite/',
    license='LICENSE.txt',
    description='METU Suite.',
    long_description=open('README.md').read(),
) 
```

当我跑

```
setup.py py2exe 
```

它成功地在“dist”文件夹中构建了 metusuite.exe，但是，由于应用程序依赖于外部用户界面文件-使用 Qt Designer 创建-并且找不到它们，因此出现错误：

```
Designer: An error has occurred while reading the UI file at line 1, column 0: Premature end of document.
Traceback (most recent call last):
  File "metusuite.py", line 38, in <module>
  File "metusuite_libs\msCafeteriaMenu.pyc", line 37, in __init__
  File "metusuite_libs\msCafeteriaMenu.pyc", line 17, in __init__
RuntimeError: Unable to open/read ui device 
```

而且我无法弄清楚我应该如何将 *.ui 文件（还有一些 .png 图标）添加到该结构中。我正在考虑将 .ui 文件转换为 Python 代码，然后当我需要添加一些图标时会遇到同样的问题。

因此，如何在 py2exe 结构中添加我的 ui 和 png 文件？或者有什么替代方法可以解决我想要完成的事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T19:00:11.463

好吧，我认为你可以做两件现实的事情之一：

1.  [使用pyside-uic](https://stackoverflow.com/questions/4442286/python-code-genration-with-pyside-uic)将您的 .ui 文件编译为 .py 文件并修改您的代码以对用户界面的 py 文件进行条件加载，并将 png 文件放在 Qt 资源文件中
2.  创建一个 Qt 资源文件，其中包含您的 ui 文件，使用 pyside-rcc 编译它，然后使用 QtUiTools 或类似的过程加载 ui 文件

# `pyside-uic`

我非常喜欢使用`pyside-uic`加载 ui 文件的方法，因为它是将 ui 文件加载到与我在 C++ 中的 Qt 知识相关的程序中最直接的方法。`pyside-uic`包含在 PySide 应用程序中，对我来说，它位于我的 Python 安装的 Scripts 目录中，例如`C:\Python27\Scripts\pyside-uic.exe`. 记下 C++ 编译如何处理 ui 文件，我通常将我的 ui 文件编译为具有类似 ui_[Name of the ui file].py 的名称：

```
C:\Python27\Scripts\pyside-uic mainwindow.ui > ui_mainwindow.py 
```

在生成的 .py 文件中，pyside-uic 创建了一个与 ui 文件的基类同名的类，并以 Ui_ 开头。因此，例如，如果您创建了一个包含名为 MainWindow 的类的定义的 mainwindow.ui，则创建的类将是 Ui_MainWindow。如果 ui 文件定义了一个名为 SourceWindow 的类，则 .py 文件中的类为 Ui_SourceWindow。在 Qt Designer 中，您可以通过在对象树的根元素中设置类名`objectName`（在窗口的右上角）。

使用您的文件 cafeteria_menu、ui 和 dialog_login.ui，您将获得派生类 Ui_cafeteria_menu 和 Ui_dialog_login。

生成 .py 文件后，可以通过将其导入小部件的定义文件来使用它，并使用 Ui 文件中类的 setupUi 方法使用它

```
from PySide import QtCore, QtGui
from ui_mainwindow import Ui_MainWindow

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        self.ui = Ui_MainWindow()
        self.ui.setupUi(self) 
```

为类定义 ui 后，需要通过 self.ui 访问小部件的所有连接和 ui 元素

```
 self.ui.lineEdit.textChanged[str].connect(self.processText) 
```

由于您必须将 .png 文件放在 Qt 资源文件中，因此我将在下一节中讨论它。

# `pyside-rcc`

像`pyside-uic`,`pyside-rcc`包含在 PySide 应用程序中，尽管我的位于 Python 的 site-packages 目录而不是 Scripts 中（如果它在同一个地方对您来说，您可以随时复制它）。

```
C:\Python27\lib\site-packages\PySide\pyside-rcc.exe 
```

在编译 Qt 资源文件之前，您必须首先使用其中一个 Qt 工具创建它。我使用 Qt Creator 因为它可以在一个应用程序中执行几乎所有与 Qt 相关的功能。[Qt 资源系统](http://doc.qt.nokia.com/qt/resources.html)的文档显示，资源文件实际上只是一个 XML 文件，它定义了资源系统的文件路径和内部路径。您可以根据需要设置和组织文件，但是在编译时，资源文件中定义的所有文件都必须位于文件的同一目录或子目录中。定义资源文件后，您需要使用 pyside-rcc.exe 将其编译为 .py 文件。我通常将资源文件命名为与项目相同的名称，并将所有内容保存在一个资源文件中，以便更简洁地处理资源。

```
C:\Python27\lib\site-packages\PySide\pyside-rcc.exe -py2 MyProject.qrc > MyProject_Resources.py 
```

-py2 开关定义文件的输出应针对 Python 2.x 进行格式化。如果您正在使用 Python 3.x 或计划将来使用它，您可以使用 -py3 开关，结果将与 Python 3.x 兼容。

# 把它们放在一起

由于您已经直接加载 ui 文件`QUiLoader`，您只需重构 QUiLoader 语句以加载从资源系统打开 ui 资源的 QFile。要使用资源系统中的文件，您只需将您的 Resource .py 文件（从 pyside-rcc 生成的文件）导入程序的主脚本文件，资源文件的最后一行是调用qInitResources() 初始化整个程序中要使用的资源。要使用 QFile 加载文件，请使用以“:”开头的路径，然后引用在资源文件中定义的路径。您可以创建一个文件 msResources.qrc，其中包含 ui 和将您的 ui 和 png 文件定义为子类别的图像。

所以，如果你的资源文件看起来像这样

```
/ui
    cafeteria_menu.ui
    dialog_login.ui
/images
    cafeteria-menu.png
    exit.png
    logo.png
    mail-fetch.ong 
```

而且，如果你想加载这些文件，你只需要像这样创建一个 QIcon 或 QFile ：

```
cafeteriaMenuIcon = QtGui.QIcon(":/images/cafeteria-menu.png")
cafeteriaMenuUi = QtCore.QFile(":/ui/cafeteria_menu.ui") 
```

在 msCafeteriaMenu 中的 GUICafeteriaMenu 代码中使用时，我将更改`__init__`GuiCafeteriaMenu 的方法以从资源中加载和使用 ui 文件：

```
uiFile = QFile(":/ui/cafeteria_menu.ui")
uiFile.open(QFile.ReadOnly)
UiLoader.load(uiFile, self)
uiFile.close() 
```

我可能会将 pyside-rcc 的输出放入 metsuite_libs 包中，放入类似 msResources.py 的文件中，并将文件中的 msResources`__init__.py`文件作为包的一部分导入。这样，一旦您创建了 .py 文件并将其导入您的程序，额外的文件将被封装在您的包中，您无需更改 setup.py 文件。在进行 py2exe 转换之前，运行重构的程序应该可以正常工作。此外，无论您如何处理 ui 文件，您总是需要使用资源文件才能将图标打包到程序中。出于可移植性的原因，使用资源文件作为图标可能是一个好习惯。

# python - python URL处理问题

> ID：13415386
> 
> 赞同：1
> 
> 时间：2012-11-16T11:09:04.743
> 
> 标签：python, string, url, web-applications

我正在尝试编写一个 python web 应用程序，它需要一些 sql 和一堆其他东西并返回一个 Json 文件，后半部分不是问题，我什至还没有把它放在脚本中，问题是正在传递的 url 是 utf-8 编码，然后是 url 编码

转动我们的榜样

```
query :SELECT + ;
test: 2 
```

进入

```
test=2&query=SELECT+%2B+%3B 
```

这似乎没问题

但接收 get 似乎认为它可以将代码扩展回字符

它收到

```
test=2&query=SELECT+++; 
```

然后这是 url 解码，它砍掉了分号，我想保留分号！它还将正确的空格 + 转换为空格，但之前的错误使真正的加号代码变为文字加号，从而将其转换为空格！

```
{'test': '2', 'query': 'SELECT   '} 
```

代码如下：

```
#!/usr/bin/python

import web
import psycopg2
import re
import urllib
import urlparse

urls = (
    '/query', 'query',
    '/data/(.*)', 'data'
)

app = web.application(urls, globals())
render = web.template.render('templates/')

class query:
    def GET(self):
        return render.query()

    def POST(self):
        i = web.input()
        data = {}
        data['query'] = i.sql.encode('utf-8')
        data['test'] = '2'

        murl = urllib.urlencode(data)
        return "<a href=\"http://localhost:8080/data/"+murl+"\">go!</a>"

class data:
    def GET(self, urlEncodedDict):

        print "raw type:", type(urlEncodedDict)
        print "raw:", urlEncodedDict

        urlEncodedDict = urlEncodedDict.encode('ascii', 'ignore')
        print "ascii type:", type(urlEncodedDict)
        print "ascii:", urlEncodedDict

        data = dict(urlparse.parse_qsl(urlEncodedDict, 1))    #bad bit
        print "dict:", data
        print "element:", data['query']

        if ( re.match('SELECT [^;]+ ;', data['query'])):
            return 'good::'+data['query']
        else:
            return 'Bad::'+data['query']

if __name__ == "__main__":
    app.run() 
```

从我的测试表单生成的 URL 是：

```
http://localhost:8080/data/test=2&query=SELECT+%2B+%3B 
```

输出如下：

```
raw type: <type 'unicode'>
raw: test=2&query=SELECT+++;
ascii type: <type 'str'>
ascii: test=2&query=SELECT+++;
dict: {'test': '2', 'query': 'SELECT   '}
element: SELECT   
127.0.0.1:53272 - - [16/Nov/2012 11:05:44] "HTTP/1.1 GET /data/test=2&query=SELECT+++;" - 200 OK
127.0.0.1:53272 - - [16/Nov/2012 11:05:44] "HTTP/1.1 GET /favicon.ico" - 404 Not Found 
```

我希望从我首先编码的get中得到相同的dict。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:06:27.800

如果要将数据传递到 GET 请求中，则需要使用[查询字符串](http://en.wikipedia.org/wiki/Query_string)语法，使用问号字符 [?] 作为分隔符。

网址应为：

```
http://localhost:8080/data/?test=2&query=SELECT+%2B+%3B 
```

之后，您只需要使用 web.input() 来获取所有参数都已解码的字典。

```
urls = (
    '/query', 'query',
    '/data/', 'data'
)

[...] 

class data:
    def GET(self):
        data = web.input()
        print "dict:", data
        print "element:", data['query']

        if ( re.match('SELECT [^;]+ ;', data['query'])):
            return 'good::'+data['query']
        else:
            return 'Bad::'+data['query'] 
```

结果：

```
dict: <Storage {'test': u'2', 'query': u'SELECT + ;'}>
element: SELECT + ;
127.0.0.1:44761 - - [16/Nov/2012 15:06:06] "HTTP/1.1 GET /data/" - 200 OK 
```

# css - Internet Explorer 10 中的 CSS 掩码

> ID：13415388
> 
> 赞同：8
> 
> 时间：2012-11-16T11:09:11.310
> 
> 标签：css, mask, internet-explorer-10

我需要`-webkit-mask-image`在 Internet Explorer 10 中获得效果。不幸的是，我在 google 中找到的唯一方法是将所有内容放入 SVG，这是不适用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T17:26:05.987

Webkit 浏览器中的实验性屏蔽功能就是这样，实验性的。在它们获得更广泛的采用或被 W3C 正式采用之前，我们不应该期望看到其他浏览器实现相同的功能。

考虑一个替代解决方案。例如，Martin Beeby 能够简单地通过使用 2D 变换来实现“遮蔽”效果，这意味着他的解决方案早在 IE9 就得到了支持。

# sql - SQLITE3：从命令行创建数据库需要很长时间

> ID：13415389
> 
> 赞同：0
> 
> 时间：2012-11-16T11:09:12.157
> 
> 标签：sql, linux, sqlite

我运行一个创建许多 SQLITE3 数据库的服务，然后再次删除它们，它们可能会存活大约一天。它们都具有相同的架构并开始为空。

我用它来创建一个新的空白 SQLITE3 数据库：

```
sqlite3 newDatabase.db < myschema.sql 
```

myschema.sql 文件包含三个表模式左右，没什么花哨的，没有数据。当我在我相当快的专用 linux 服务器上执行上述命令时，最多需要 5 分钟才能完成。有进程在后台运行，例如几个 PHP 脚本使用 CPU 时间，但其他一切都很快，例如其他命令或稍后将数据插入数据库。这只是需要永远的创造。

这太奇怪了，我完全不知道这里出了什么问题。所以我现在唯一的办法是创建一次空白.db，然后从中制作一个新副本，而不是从 SQL 模式中导入。

知道我搞砸了什么吗？我最初认为 linux 上的 noatime 设置搞砸了它，但不，禁用并没有改变任何东西。

愿意提供您需要的任何配置/数据。

**编辑：**

```
This is what strace hangs at:
12:29:45.460852 fcntl(3, F_SETLK, {type=F_WRLCK, whence=SEEK_SET, start=1073741824, len=1}) = 0
12:29:45.460965 fcntl(3, F_SETLK, {type=F_WRLCK, whence=SEEK_SET, start=1073741826, len=510}) = 0
12:29:45.461079 lseek(4, 512, SEEK_SET) = 512
12:29:45.461550 read(4, "", 8)          = 0
12:29:45.462639 fdatasync(4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:13:37.277

一种可能性是使用`strace`命令来查看发生了什么：

```
strace -f -s 1000 -tt sqlite3 newDatabase.db < myschema.sql 
```

如果它挂在某个地方，你会看到。

你的模式是巨大的吗？

**笔记**

*   `I/O`如果怀疑磁盘太高，试试这个命令`iotop -oPa`，你会看到“谁”把你的系统弄得一团糟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:35:58.210

好吧，我想我明白了这个问题。

服务器在后台运行了几个 PHP 脚本，这些脚本似乎与 CPU 负载有一定的关系，它经常以 100% 的速度飙升，但所有其他命令大部分都运行良好，除了通过 APT-GET 安装东西和安装新的 SQLITE3 数据库。架构。

可能导致问题的原因是繁重的磁盘访问（IO 操作）。我重新安装了 APC，升级到新版本，发现它已被 CLI 禁用（这是默认设置）但由于我有长时间运行的脚本而启用了它，还在这里和那里添加了一些 usleep(100)。

我停止了每一个 PHP 命令，基本上杀死了所有不需要的程序。通过 MYSQL Workbench 检查系统使用率，它似乎仍然很高，直到我意识到这是一个平均值。如果你再等 10 分钟，它会平均下来，在我的情况下接近 0% 负载。完美的。

然后我重新启动了脚本，现在它似乎正在抑制事情。

我尝试了上面提到的 SQLITE3 命令，它按预期立即工作。

所以，简单的原因：不仅是高 CPU 负载，还有 HEAVY IO，磁盘访问。

# apache-flex - 非结构化的 Actionscript 文件和 ActionScript 类？

> ID：13415399
> 
> 赞同：0
> 
> 时间：2012-11-16T11:09:32.883
> 
> 标签：apache-flex, actionscript, adobe

我是 ActionScript 的新手。我想知道什么时候应该使用非结构化 ActionScript 文件，什么时候应该制作 Class of ActionScript 文件？它会影响应用程序的性能吗？如果是，如何？？？请帮我找到上述问题的综合答案。谢谢！问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:29:11.337

我只能想到在 ActionScript 项目中使用非基于类的结构可能有意义的少数实例：

1.  您正在快速制作一个简单功能的原型（即便如此，假设您使用的是 ActionScript 3.0，将代码放入类中并将其设置为 Document 就像使用非类文件一样简单）包括）
2.  您正在处理基于非类的遗留代码
3.  您正在使用时间线来构建代码（对于比横幅复杂得多的东西，通常不是一个好主意）
4.  您正在使用 ActionScript 1.0 编写项目（在这种情况下，您真的应该考虑升级）

在所有其他情况下，基于类的系统的额外脚手架对性能的微小影响将被结构良好的优势所抵消。

如果您使用的是 Flex，我认为您必须非常努力才能不使用类。

# python - 如何使用 argparse 解析开/关（调试）标志？

> ID：13415400
> 
> 赞同：6
> 
> 时间：2012-11-16T11:09:33.103
> 
> 标签：python, argparse

我的 CLI 程序使用一个`--debug`标志来决定是否打印调试消息。指定时`--debug`，应打印调试消息；否则，它不应该打印调试消息。

我目前的做法是：

`parser.add_argument('--debug', help='print debug messages to stderr', nargs='?')`

但是，该`--help`消息表明这种方法无法实现我的目标：

```
optional arguments:
  -h, --help       show this help message and exit
  --debug [DEBUG]  print debug messages to stderr 
```

如您所见，它需要标志后面的值；但是，`--debug`是一个开/关参数。

我应该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T11:13:42.690

请改用该`store_true`操作：

```
parser.add_argument(
    '--debug',
    action='store_true', 
    help='print debug messages to stderr'
) 
```

`nargs='?'`应该只用于带有一个或多个参数的选项（回退到默认值）。

# javascript - 如何使用动画突出显示 HTML 块元素或淡出页面的其余部分

> ID：13415401
> 
> 赞同：0
> 
> 时间：2012-11-16T11:09:39.550
> 
> 标签：javascript, jquery, jquery-plugins, css-transitions

我刚刚开始构建一个网页帮助（突出显示 + 教程步骤）jQuery 插件。你可以在这里看到最新的结果。

[http://goo.gl/ZZ2xy](http://goo.gl/ZZ2xy)

我第一次尝试突出显示是有 4 个覆盖 div，它们只是通过 css 转换移动。这很简单，但并不完美。它至少在 Chrome 中创建覆盖元素之间的空间线。

制作此动画的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:14:07.887

我有更好的解决方案给你。这是一个概念证明，肯定需要调整，但总的来说它是有效的。这个想法是使用表 3x3 作为覆盖，对所有单元格使用半透明背景，除了一个假定作为窗口工作的单元格，通过它您正在查看目标 html 元素。

我想浏览器可能会有一些怪癖（可能是可修复的），但它仍然比您现在使用的更清洁和更好的选择。

示例代码可在此处获得[http://jsbin.com/ekijev/4](http://jsbin.com/ekijev/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:25:53.530

正确使用 jQuery .css() 方法改进了很多。有时还是一条白线，但对我来说没关系。它已经在 github 上更新了。

**老的：**

```
$elem.css({"left" : x})
   .css({"top" : y}) 
   .width(width)
   .height(height); 
```

**新的**

```
$elem.css({
            "left" : x,
            "top" : y,
            "width" : width,
            "height" : height
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T11:33:19.710

所以我有一个褪色解决方案给你。只是基础知识，但应该足以帮助你。

只需将代码粘贴到记事本文件中保存并运行

**代码更新**

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <style>
    DIV{
        width:200px;
        height:200px;
        display:inline-block;
    }
    .black{
        background:black;
    }
    .yellow{
        background:yellow;
    }
    .red{
        background:red;
    }
    .green{
        background:green;
    }
    </style>
</head>
<body>
    <div id="container">
        <div id="1" class="yellow"></div>
        <div id="2" class="black"></div>
        <div id="3" class="red"></div>
        <div id="4" class="green"></div>
    </div>
</body>
<script>
    $(document).ready( function (){
        var target = 2;//id of element we dont want faded
        var pageElements = $('#container').find('*').toArray();//get all elements in our container
        for(var counter = 0; counter < pageElements.length;counter++){//itterate through them
            if(pageElements[counter].id != target){//if element is not our target fade
                $(pageElements[counter]).fadeOut("slow",OnFadeComplete);//fade

            }
        }
    });

    function OnFadeComplete(){
        $(this).attr('style','visibility:hidden;');
    }
</script> 
```

# postgresql - 如何确定哪些存储过程在其查询中使用某个表？

> ID：13415404
> 
> 赞同：1
> 
> 时间：2012-11-16T11:09:45.397
> 
> 标签：postgresql, stored-procedures

我正在为 postgres 数据库做一些维护工作，一个特定的表有两个状态列，我想将它们转换为一个位掩码列。该数据库使用许多不同的存储过程进行数据操作，遗憾的是单元测试并未涵盖这些过程。

有没有办法判断这个表是否被任何存储过程在查询中使用？好吧，除了使用`\df+`内部的开关手动检查每个程序的主体`psql`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:21:15.573

可悲的是，没有。plpgsql 函数的主体只是一个在调用时保存和执行的字符串。当您创建一个函数时，只会对其运行表面的语法检查。

有时这是一种祝福。其他时候，这是一个诅咒。

在这种情况下我会做什么：转储模式并使用 vim（或 grep 或您选择的工具）搜索转储。

```
pg_dump $DB -p $PORT -s -f filename.pgsql 
```

如果您的所有函数都驻留在特定模式中（相同的词，不同的含义！），请添加：`-n $SCHEMA`

# hadoop - Hive 无法获取块

> ID：13415405
> 
> 赞同：0
> 
> 时间：2012-11-16T11:09:55.367
> 
> 标签：hadoop, block, hive

我遇到了问题

> 失败并出现异常 java.io.IOException:java.io.IOException: 无法获取块：blk_364919282277866885_1342 file=/user/hive/warehouse/invites/ds=2008-08-08/kv3.txt

我检查了文件实际上在那里。

```
hive>dfs -ls /user/hive/warehouse/invites/ds=2008-08-08/kv3.txt
Found 1 items
-rw-r--r--   2 root supergroup        216 2012-11-16 16:28 /user/hive/warehouse/invites/ds=2008-08-08/kv3.txt 
```

我该做什么？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T18:49:01.400

我在集群上遇到了这个问题，但是一旦我在具有更多可用节点的集群上重新启动任务，它就消失了。[正如该线程](https://forums.aws.amazon.com/thread.jspa?messageID=201849#201849)所指出的，根本原因似乎是内存不足错误。我在 AWS 上的原始集群运行 3 个 c1.xlarge 实例（每个 7 GB 内存），而新集群有 10 个 c3.4xlarge 实例（每个 30 GB 内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:54:29.870

试试`hadoop fsck /user/hive/warehouse/invites/ds=2008-08-08/kv3.txt`？

# java - 什么是或如何确定 ZK ViewModel 的生命周期

> ID：13415406
> 
> 赞同：2
> 
> 时间：2012-11-16T11:09:58.907
> 
> 标签：java, mvvm, zk

我试图弄清楚 ZK 应用程序中 ViewModel 的典型生命周期是什么，以及 ViewModel 不再有效的重要点。

我想知道的最重要的事情是，如果浏览器刷新，通过加载 zul 页面实例化的 ViewModel 是否会被垃圾收集。我可以看到 init 方法被执行了，但是我没有看到 finalize 方法被调用。

第二个是如果在 zk 导航中的某些重要点上有一个列表或任何文档，您肯定会丢失以前实例化的 ViewModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:22:16.923

除非您在某处缓存对 ViewModel 的引用，否则 ViewModel 绑定到页面生命周期（在 ZK 术语中也称为桌面）。

*   当您刷新页面时，ViewModel 会像 Desktop 一样重新创建，并且所有组件都会使用它重新创建。
*   如果您导航到另一个 URL，那么所有组件和关联的 ViewModel(s) 都有资格被垃圾收集。

但是，您不应依赖是否调用 finalize 方法来确定它们是否被清除，因为 JVM 不能保证何时调用 finalize。

# delphi - 在 Delphi 中存储配置数据有哪些选择？

> ID：13415410
> 
> 赞同：3
> 
> 时间：2012-11-16T11:10:06.547
> 
> 标签：delphi, storage

我想在 Delphi 项目中存储和加载各种程序数据。该数据范围从简单的字符串到更复杂的重复配置对象数据。

众所周知，ini 文件提供了一种快速简便的方式来存储程序数据，但仅限于键值表示。

当涉及到这样的需求时，XML 通常是首选武器，但我想知道是否有 XML 的替代品。

最近我发现了 Delphi 的[超级对象](http://code.google.com/p/superobject/)，它似乎比 XML 更容易处理。对于这种“非网络任务”使用 JSON 有什么要说的吗？

您是否知道在 Delphi 中支持数据存储和以纯文本（如 ini、xml、json）加载的其他选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T14:08:12.300

事实上，您选择哪种存储格式（ini、xml、json 等）都没有关系。构建一个满足您所有需求的抽象配置类，然后考虑具体类和具体存储格式，并根据实现的容易程度和人类可读性来决定

在某些情况下，您还希望拥有不同的配置方面（全局、机器、用户）。

使用您的配置类，您可以轻松地将它们混合在一起（如果不是用户定义，则使用全局），还可以混合存储格式（数据库中的全局配置，注册表中的机器配置，文件中的用户配置）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T20:11:30.690

与单元`INI`中的内置`TIniFile`和`TMemIniFile`类结合使用的好旧文件对我来说非常有用`IniFiles`

INI 文件的好处；

1.  不是二进制的。
2.  比注册表设置更容易在机器之间移动。
3.  易于检查和查看。
4.  与 XML 不同，它简单易读

5.  INI 文件很容易手动或使用工具修改，并且几乎是防弹的，而制作格式不正确的 JSON 或 XML 很容易，完全不可读，很难做的不仅仅是“损坏 INI 文件的一部分”。简单取胜。

缺点：

1.  与 XML 和 Registry 不同，它或多或少是“两个级别”，即部分和项目。

2.  `TMemIniFile`不会以任何可控的方式对结果进行排序。我经常希望我可以控制我的ini文件中项目的顺序，如果它们是由人类生成的，我希望保留顺序，而TMemIniFile不保留顺序，因此我发现我爱`TMemIniFile`不如爱平淡无奇`TIniFile`。

# android - 为什么 CSS 边框在 Android 上看起来不一样？

> ID：13415412
> 
> 赞同：14
> 
> 时间：2012-11-16T11:10:15.133
> 
> 标签：android, html, css, mobile

我有一个带边框的盒子。

```
border: 1px solid #000; 
```

我正在使用以下视口设置：

```
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" /> 
```

边界似乎是顶部和右侧的 2 个像素。这是什么原因？

[![http://i.imgur.com/7yHjy.png](../Images/aa7b71a5034eab152db72321812cb577.png)](https://i.stack.imgur.com/mPMMx.png)

* * *

附加：除了宽度和高度之外，没有其他 CSS 规则。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-03-14T06:38:19.663

专门针对像素密度的元标记已被贬值，现在 Android 和 iPhone 似乎都只使用一个元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

但是，如果你尝试制作一个 1px 的边框，根据移动设备的像素密度，它的不同边会越来越厚。

一些设备如何用多个像素渲染“1px”，它并不总是很漂亮，因为它们使用不同的像素比率 (dpr)，例如 1.5、2 和 3。有时，1px 边框的所有 4 个边都不匹配。

这是一些通过将 1px 除以一半来使 1px 在 2dpr iPhone 上正确显示的 CSS：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {

div {

border-width: 0.5px;

} 
```

此处显示了类似的技术：http: [//n12v.com/css-retina-and-physical-pixels/](http://n12v.com/css-retina-and-physical-pixels/) [https://developer.android.com/guide/webapps/targeting.html](https://developer.android.com/guide/webapps/targeting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T10:58:01.103

“您能否修改您的答案以使其适用于所有设备，无论 DPI 是多少？会非常有用！– Basj”

我不知道这有多大帮助我在这里添加了一个自定义函数来获取几乎所有 dpr 的边框大小

```
 <!doctype html>
    <html>
    <head>
    <meta charset="utf-8">
    <title>Pixel Ratio</title>
    <style>
    .bord {
        width: 300px;
        height: 300px;
        border: 10px solid #000;
    }
    </style>
    </head>

    <body>
    <div class="bord"> </div>
    <script>

    dprof("bord"); 
    function dprof(elmclass){
        var z =document.getElementsByClassName(elmclass).length;
        var dpr = window.devicePixelRatio;
        for(i=0;i<z;i++){
            document.getElementsByClassName(elmclass).item(i).classList.add("dpr-"+dpr);
            var bw =getComputedStyle(document.getElementsByClassName(elmclass).item(i),null).getPropertyValue('border-width');   
            var nw =bw.replace("px","");

            var nbw=nw/dpr;
            console.log(nbw);
            if(nbw!=0){
                document.getElementsByClassName(elmclass).item(i).style.borderWidth=nbw+"px";
            }

        }

    }

    </script>
    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T17:37:35.173

除非您有充分的理由（值得怀疑），否则禁用用户缩放是一个*非常*糟糕的主意。见[user-scalable=no ... 邪恶还是有点不邪恶？](https://codepen.io/absolutholz/post/user-scalable-no-evil-or-slightly-not-evil)例如为什么这很糟糕。它还给出了一些`user-scalable=no`完全可以接受的例子。

对于 1.5 像素比，请尝试

```
@media only screen and (-webkit-min-device-pixel-ratio: 1.5) {
  div {
    border-width: 0.75px;
  }
} 
```

# math - RSA 加密是否适用于小数字？

> ID：13415419
> 
> 赞同：3
> 
> 时间：2012-11-16T11:10:40.227
> 
> 标签：math, rsa, private-key

认为：

```
p = 3
q = 11
n = 33
phi = 20
e = 7
d = 3 
```

如果我想加密数字 123，我会这样做`(123^7) % 33`，它等于`18`. 现在，如果我想解密`18`，我会这样做`(18^3) % 33`，这给了我`24`。可以看到，输入的数字和解密的数字是不一样的。有人知道为什么吗？这是否也意味着我必须将数字分解为个位数，然后分别`123`加密？`1``2``3`

编辑：我知道由于 的价值`n`，我`mod`的任何东西`n`都会低于`n`。这是否意味着我必须首先为`p`and选择非常大的数字`q`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:18:58.043

从[RSA 的维基百科页面](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#Encryption)（我的重点）：

> 然后 Bob 希望将消息 M 发送给 Alice。
> 
> 他首先变成`M`一个整数`m`，**这样`0 <= m < n`**通过使用一种被称为填充方案的商定的可逆协议。然后他计算对应的密文c
> 
> ```
> c = m^e (mod n) 
> ```

你的`m`( `123`)**不**小于`n`( `33`)，所以它不起作用。所以是的，你需要从更大的开始`p`并`q`获得更大的`n`.

# eclipse - Eclipse 中使用 MAVEN 3.04 的动态 Web 应用程序

> ID：13415421
> 
> 赞同：0
> 
> 时间：2012-11-16T11:10:48.393
> 
> 标签：eclipse, jakarta-ee, maven, maven-3, m2eclipse

从过去的 90 小时开始，我一直在尝试了解如何在我的 Web 项目中使用 Maven，生成一个 war 文件并将其部署到我的 JBoss 4.2 服务器中。

我没有得到。我正在阅读各种博客，几乎所有时间都在谷歌搜索，尝试各种使用 maven 构建动态 Web 项目的方法，但尝试不同的方法会使简单的事情变得更加复杂。

很少有例子告诉我如何运行，很少有人告诉我改变文件夹结构，很少有人告诉我传输网页内容的内容，但没有什么符合我的要求。在一些示例中，war 文件正在生成，但名称很大，并且它不包含里面的 jars。呃。

我知道 maven 很简单，可以让我们的生活变得更好，但第一次学习它会使它变得复杂。

我的要求很简单。

```
1) Build a Dynamic web project in eclipse indigo. (Preferably in JAVA perspective )
2) Enable Maven dependencies, in eclipse.
3) Update pom.xml to add dependencies.
4) Finish the web application i want to do by writing classes, html pages, deployment descriptors.
5) Build the war file using maven "IN ECLIPSE ONLY". (the WAR file must have user specific name and not some name like "V1- Snapshot dash dash dash")
6) Deploy my war file in jboss 4.2 server deployment location. (Preferably  from eclipse )
7) Run my localhost server and my application from the browser. 
```

并做了。

通过花时间在上面，我了解 maven 是多么美丽，但我无法实现我想要的。

请通过给我一个关于如何使用 maven 来满足我上述要求的详细程序来帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:31:50.410

拳头我建议使用支持 Maven 的最新 Eclipse (Juno) (m2e 和 wtp-m2e)。

第一步是使用适当的依赖项和正确的包装类型来定义你的 pom，这在你的情况下是**war**。如果你真的需要一个不同的命名，你应该离开 Maven，因为 Maven 会假设你的工件的命名通常不是问题。[默认版本模式为 1.0.0-SNAPSHOT](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)等。

如果您不想将战争部署到 JBoss 中，则存在许多可能的事情来做这些事情，如果您想在本地运行您的应用程序，听起来您不想进行某种测试（[集成测试](http://khmarbaise.github.com/maui/)），这是由Maven（请参阅[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)）。

此外，如果您喜欢使用 Maven，您必须了解，Eclipse 不再是项目配置的领导者。该作业已移至 Maven 或换句话说移至 pom 文件中。如果您喜欢在 Eclipse 中使用该项目，您需要将该项目导入 Eclipse。除了上述之外，我建议去参加 Maven 培训，学习所有比自己学习更有效的东西。

# vim - Vim Omnicppcomplete - 部分工作

> ID：13415425
> 
> 赞同：1
> 
> 时间：2012-11-16T11:10:55.583
> 
> 标签：vim, ctags, omnicomplete, omnicppcomplete

我刚刚安装了omnicppcomplete，它正在“kindof”工作。

这种行为真的很奇怪，Omnicppcomplete 适用于某些文件，但不适用于其他文件。

例如：如果我打开 file1.cpp，如果我 push ，omnicppcomplete 正在工作。但是，如果我打开 file2.cpp，omnicppcomplete 不再工作并且我得到错误： -- Omni complete (^O^N^P) Pattern not found。

这是我完整的.vimrc：

```
" -------------------------------- PLUGINS ----------------------------"
"############### ctags

" build tags of your own project
map <C-c> :!ctags -R --sort=yes --c++-kinds=+p --fields=+iaS --extra=+q .<CR>

"############### OmniCppComplete
au BufNewFile,BufRead,BufEnter *.cpp,*.hpp set omnifunc=omni#cpp#complete#Main
filetype on

" configure tags - add additional tags here or comment out not-used ones
set tags+=~/.vim/tags/cpp
set tags+=~/.vim/tags/cuda

let OmniCpp_NamespaceSearch = 1
let OmniCpp_GlobalScopeSearch = 1
let OmniCpp_ShowAccess = 1
let OmniCpp_ShowPrototypeInAbbr = 1 " show function parameters
let OmniCpp_MayCompleteDot = 1 " autocomplete after .
let OmniCpp_MayCompleteArrow = 1 " autocomplete after ->
let OmniCpp_MayCompleteScope = 1 " autocomplete after ::
let OmniCpp_DefaultNamespaces = ["std", "_GLIBCXX_STD"]
" automatically open and close the popup menu / preview window
au CursorMovedI,InsertLeave * if pumvisible() == 0|silent! pclose|endif
set completeopt=menuone,menu,longest,preview 
```

此外，我使用的是 MacVim 7.3。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:20:46.867

第一件事：我建议你不要`ctags`手动处理，而是使用插件[索引器](http://goo.gl/VTAer)，它会自动完成所有工作。我使用 Indexer 和omnicppcomplete 很长一段时间，在大多数情况下omnicppcomplete 可以接受。

详细信息请看我的文章：[Vim：为您的项目提供方便的代码导航](http://dmitryfrank.com/articles/vim_project_code_navigation)，详细解释了 Indexer + Vimprj 的使用。

第二件事：Omnicppcomplete 可以接受，但并不完美。对于 C/C++ 自动补全，我建议您不要使用omnicppcomplete，而是使用[clang_complete](http://www.vim.org/scripts/script.php?script_id=3302)插件。它真的很强大，不是通过丑陋的标签方法完成的，而是使用真正的 C/C++/Objective-C 编译器（即 clang）完成的。

# magento - 致命错误：在第 146 行的 \lib\Varien\Data\Form\Abstract.php 中找不到类“Mage_Enterprise_Rma_Block_Adminhtml_Product_Renderer”

> ID：13415426
> 
> 赞同：0
> 
> 时间：2012-11-16T11:10:59.777
> 
> 标签：magento

我正在将 magento 企业版迁移到社区版。我马上就好。但是后端只有一个问题。如果我去管理产品并单击任何产品，我就会收到此错误。

**致命错误：在第 146 行的 magento\lib\Varien\Data\Form\Abstract.php 中找不到类“Mage_Enterprise_Rma_Block_Adminhtml_Product_Renderer”**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:32:00.473

在您的数据库中找到“eav_attribute”表并删除带有属性代码“is_returnable”的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T08:57:47.903

**解决方案：**

使用它进行降级，那么一切都会好起来的：

```
 DELETE FROM eav_attribute WHERE `attribute_code` = 'giftcard_amounts';
    DELETE FROM eav_attribute WHERE `attribute_code` = 'related_tgtr_position_limit';
    DELETE FROM eav_attribute WHERE `attribute_code` = 'related_tgtr_position_behavior';
    DELETE FROM eav_attribute WHERE `attribute_code` = 'upsell_tgtr_position_limit';
    DELETE FROM eav_attribute WHERE `attribute_code` = 'upsell_tgtr_position_behavior';
    DELETE FROM eav_attribute WHERE source_model LIKE 'enterprise_%';
    DELETE FROM eav_attribute WHERE backend_model LIKE 'enterprise_%';
    DELETE FROM eav_attribute WHERE attribute_code IN ('gift_wrapping_available', 'gift_wrapping_price'); 
```

# internationalization - 玩！框架 - 将我的视图模板呈现为 AsyncResult 时可以本地化吗？

> ID：13415428
> 
> 赞同：4
> 
> 时间：2012-11-16T11:11:15.350
> 
> 标签：internationalization, playframework-2.0

我最近开始使用 Play！用于编写 Java Web 应用程序的框架 (v2.0.4)。在我的大多数控制器中，我遵循暂停 HTTP 请求的范例，直到实现 Web 服务响应的承诺。一旦承诺兑现，我会返回一个`AsyncResult`. 这是我的大部分操作的样子（省略了一堆代码）：

```
public static Result myActionMethod() {

    Promise<MyWSResponse> wsResponse;
    // Perform a web service call that will return the promise of a MyWSResponse...

    return async(wsResponse.map(new Function<MyWSResponse, Result>() {
        @Override
        public Result apply(MyWSResponse response) {

            // Validate response...
            return ok(myScalaViewTemplate.render(response.data()));
        }
    }));
} 
```

我现在正在尝试使我的应用程序国际化，但是当我尝试从`async`方法呈现模板时遇到以下错误：

```
[error] play - Waiting for a promise, but got an error: There is no HTTP Context available from here.
java.lang.RuntimeException: There is no HTTP Context available from here.
    at play.mvc.Http$Context.current(Http.java:27) ~[play_2.9.1.jar:2.0.4]
    at play.mvc.Http$Context$Implicit.lang(Http.java:124) ~[play_2.9.1.jar:2.0.4]
    at play.i18n.Messages.get(Messages.java:38) ~[play_2.9.1.jar:2.0.4]
    at views.html.myScalaViewTemplate$.apply(myScalaViewTemplate.template.scala:40) ~[classes/:na]
    at views.html.myScalaViewTemplate$.render(myScalaViewTemplate.template.scala:87) ~[classes/:na]
    at views.html.myScalaViewTemplate.render(myScalaViewTemplate.template.scala) ~[classes/:na] 
```

简而言之，我在我的视图模板中有一个消息包查找，一些 Play！代码正在尝试访问原始 HTTP 请求并检索`accept-languages`标头，以便知道要使用哪个消息包。但似乎无法从异步方法访问 HTTP 请求。

我可以看到几种（不令人满意的）方法来解决这个问题：

1.  回到“每个请求一个线程”范例，让线程阻塞等待响应。
2.  找出在控制器级别使用哪种语言，并将该选择输入我的模板。

我也怀疑这可能不是主干上的问题。我知道 2.0.4 中存在类似的问题，即无法访问或修改`Session`最近修复的对象。但是我暂时停留在 2.0.4 上，那么有没有更好的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:02:05.473

会在这里回答我自己的问题。我的一位同事最终找到了一个简单的解决方案：

```
public static Result myActionMethod() {

    final Context ctx = ctx(); // (1)
    Promise<MyWSResponse> wsResponse;
    // Perform a web service call that will return the promise of a MyWSResponse...

    return async(wsResponse.map(new Function<MyWSResponse, Result>() {
        @Override
        public Result apply(MyWSResponse response) {

            Context.current.set(ctx); // (2)

            // Validate response...
            return ok(myScalaViewTemplate.render(response.data()));
        }
    }));
} 
```

1.  在操作开始时获取对 HTTP 上下文的引用
2.  `async`进入块后在 ThreadLocal 中恢复它

# c# - Scroll 事件和 Paint 事件之间的延迟，可能介于两者之间

> ID：13415431
> 
> 赞同：5
> 
> 时间：2012-11-16T11:11:24.717
> 
> 标签：c#, .net, panel, autoscroll, onpaint

我在表单上有一个简单的面板，我正在使用 AutoScrollMinSize 和 AutoScroll 在我的面板上获取一些滚动条，一切正常。

我还有一个 Scroll 事件，我用它来使整个面板区域无效，因为事实上它似乎只使左/右、上/下滚动时需要的位无效。除此之外，我正在使用与面板大小相同的 BufferedGraphics，然后执行 .Render(e.Graphics) 因为我希望它在整个面板上绘制，就好像滚动条不存在一样.

现在，我遇到的问题是滚动和绘制内容时似乎存在视觉延迟，我认为这是因为在滚动事件之前我不熟悉的地方有一个额外的绘制/设置阶段是调用或在调用 Paint 事件之间。

如果我在绘画方法中有一个无效面板，您看不到问题，但这更多与绘画事件被多次调用隐藏问题有关。

所以我想我理解的方式是，当你滚动时，引擎盖下的东西会做一个大矩形 blit 移动已经存在的内容，然后用需要填充的区域的矩形调用无效。

如果是这种情况，是否存在这种情况，例如抑制这个阶段或我缺少的其他设置来摆脱跟上滞后？

PS：我还覆盖了 OnPaintBackground 方法，它是一个空存根。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:34:29.083

好的，回答我自己的问题，以防它在极少数情况下帮助任何人。从有人提到 LockWindowUpdate 开始，我发现了 WM_SETREDRAW 和这篇文章[SuspendDrawing](https://stackoverflow.com/questions/487661/how-do-i-suspend-painting-for-a-control-and-its-children)，现在我可以平滑滚动并能够绘制整个面板。只需让 Scroll 事件执行以下操作。YMMV。

```
 [DllImport("user32.dll")]
    private static extern int SendMessage(IntPtr hwnd, int wMsg, int wParam, int lParam);
    private const int WM_SETREDRAW = 0xB;

    private void PanelView_Scroll(object sender, ScrollEventArgs e)
    {
        Control control = sender as Control;
        if (control!=null)
        {
            if (e.Type == ScrollEventType.ThumbTrack)
            {
                // Enable drawing
                SendMessage(control.Handle, WM_SETREDRAW, 1, 0);
                // Refresh the control 
                control.Refresh();
                // Disable drawing                            
                SendMessage(control.Handle, WM_SETREDRAW, 0, 0);
            }
            else
            {
                // Enable drawing
                SendMessage(control.Handle, WM_SETREDRAW, 1, 0);
                control.Invalidate();
            }
        }
    } 
```

# android - ListView 内 TextView 的自定义选择器

> ID：13415432
> 
> 赞同：1
> 
> 时间：2012-11-16T11:11:34.863
> 
> 标签：android, android-listview, textview

如何在自定义 ListView 中为 TextView 使用自定义 textColor？我需要的是我有深灰色背景的列表视图。如果我选择任何行。该行应变为白色，TextView 颜色应变为深灰色。任何人都可以给我片段或带我去一些不错的教程吗？我试过这个。下面是我的 ListView 自定义行

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/list_selector" >

    <TextView
        android:id="@+id/rowListTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:text="@string/app_name"
        android:textColor="@color/list_item_text"
        android:textSize="10sp"
        android:textStyle="bold" />

</RelativeLayout> 
```

这是来自 res/color/ 文件夹的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_selected="true" android:color="@color/dark_gray"/>
    <item android:state_focused="true" android:color="@color/dark_gray"/>
    <item android:state_pressed="true" android:color="@color/dark_gray"/>
    <item android:color="@color/white"/>

</selector> 
```

它不适合我。我可以将行颜色设置为白色，但无法将文本颜色设置为灰色！我是安卓新手。帮我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T18:07:37.530

试试这个 textColor 的颜色状态列表

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#fff"/>
    <item android:state_activated="true" android:color="#fff"/>
    <item android:color="#000" />
</selector> 
```

[Android指南](http://developer.android.com/guide/topics/resources/color-list-resource.html)没有提到`state_activated`属性，但它对我有用。

# sql - 如何创建带有用于存储多行文本的列的表

> ID：13415433
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:11:36.093
> 
> 标签：sql, sql-server

我是 sql 新手。我需要创建一个表来保存员工详细信息“员工 ID、姓名、出生日期、地址和电话”。

创建这样一个表的查询是什么。地址字段应该是多行文本

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:21:28.677

```
CREATE TABLE [dbo].[employee](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [name] [varchar](255) NOT NULL,
    [birth_date] [datetime2](7) NOT NULL,
    [phone] [varchar](17) NOT NULL,
    [address] [text] NOT NULL,
 CONSTRAINT [PK_employee] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

# php - MongoDB中的计数

> ID：13415445
> 
> 赞同：1
> 
> 时间：2012-11-16T11:12:33.177
> 
> 标签：php, mongodb, mapreduce, nosql

我在 SQL 中有这个查询：

```
"SELECT code, name, count(*) FROM table WHERE customer = "XXX" GROUP BY code ORDER BY count(*) DESC; 
```

我正在使用 PHP，我必须为 mongodb 翻译这个 SQL 查询。我知道我必须做这样的事情才能在 mongodb 中计数：

```
$array_where_condition = array("customer" => "XXX");
$db->find($array_where_condition)->count(); 
```

但我不明白如何编写像上面这样的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:06:02.283

如果您希望将 map reduce 用于此类查询，那么您已经做错了。

在这种情况下，MR 不会成为 SQL 聚合框架的高性能替代品，也不会实时内联到您自己的应用程序中运行。

但是，您可以使用聚合框架，这可能会提供您正在寻找的性能。我对聚合框架有点生疏，这写得很快，但这可能与您需要的很接近：

```
db.col.aggregate(
    {$match: {customer: XXX}}, 
    {$group: 
        {_id: "$code", name: "$name", count: {$sum: 1}}
    }
) 
```

这是参考：[http ://docs.mongodb.org/manual/reference/aggregation/](http://docs.mongodb.org/manual/reference/aggregation/)

当然，解决这个问题的最有效和最简单的方法是以 NoSQL 方式设计您的模式以避免这些类型的查询：[http](http://www.mongodb.org/display/DOCS/Schema+Design) ://www.mongodb.org/display/DOCS/Schema+Design我不知道您当前的模式，但如果您希望经常进行这样的查询，它可能不是面向 NoSQL 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:30:11.730

Mongo db不像 sql 那样有**计数。**

**mongodb 中的计数**更像是对*列表*或*数组进行的***计数**

 **我建议您小心使用mongodb 中的**计数**，因为它们操作缓慢。

我建议您不要像在 sql 中那样进行**计数**，而是保留一个字段，其中保存列表的元素数，而不是每次需要其中的元素数时在该列表上使用**计数**

**编辑：**

要获得您想要的结果，您需要使用**map/reduce**

[http://www.mongovue.com/2010/11/03/yet-another-mongodb-map-reduce-tutorial/](http://www.mongovue.com/2010/11/03/yet-another-mongodb-map-reduce-tutorial/)

但请记住，这是一个更慢的操作，不是为了实时使用，而是更多地用于周期性的后台运行任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:31:06.190

您需要在客户端使用 Map/Reduce 功能并对结果进行排序。看到这个问题：[Mongodb group and sort](https://stackoverflow.com/questions/6547441/mongodb-group-and-sort)**

# html - 格式化 Sinatra 表单中的日期字段

> ID：13415448
> 
> 赞同：4
> 
> 时间：2012-11-16T11:12:45.793
> 
> 标签：html, ruby, forms, date, sinatra

我在 Ruby/Sinatra 中有一个显示日期字段的表单：

```
%input{:type => "date", :name => "due_date", :value => @m.due_date} 
```

在屏幕上，表单域显示为`day-month-year`（例如 23-11-2012）。
我希望将字段内容显示为`year-month-day`（例如 2012-11-23）。

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:32:23.253

尝试：

```
@m.due_date.strftime("%Y-%m-%d") 
```

看看[http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)

# c++ - 应用程序在 C++ 中读取文件时冻结

> ID：13415458
> 
> 赞同：0
> 
> 时间：2012-11-16T11:13:30.553
> 
> 标签：c++, file

所以这是我的文本文件：

```
计算机科学
4
345848534
1
伊万·伊万诺夫
格奥尔基·格奥尔基耶夫
普拉门安杰洛夫
======
奥利利
伦敦第五大道
44384208434
*****************
生物学
2
58934673
0
格奥尔基·伊万诺夫
尼古拉·斯塔马托夫
杰克约翰逊
======
先头
Stanley Str 4, 曼彻斯特
449348344

```

这是我从文件中读取的函数：

```
void ApprovedBook::read_from_file() {
fstream file;
string heading; int edition; long ISBN = 0L; bool isApproved = 0; // temp values   for each book 
string name; string address; long telephone = 0L; // temp values for manufacturer of the book
vector<string> authors; // temp vector for authors of the book  
string line;

file.open("books.txt", ios::in | ios::app);

while (file.good()) {
    for (int i=1; i<=NUM_ITEMS; i++) { 
        getline(file, line);
        switch (i) {
        case 1: 
            heading = line; break;
        case 2:
            edition = atoi(line.c_str()); break;
        case 3:
            ISBN = atol(line.c_str()); break;
        case 4:
            isApproved = (bool) atoi(line.c_str()); break;
        }
    }

    getline(file, line);
    while (line != "======") {
        authors.push_back(line);
        getline(file,line);
    }

    int i = 1;
    getline(file, line);
    while (line != "*****************") {
        switch (i) {
        case 1: 
            name = line; break;
        case 2:
            address = line; break;
        case 3: 
            telephone = atol(line.c_str()); break;
        }

        getline(file, line);
        i++;
    }

    Manufacturer m(name, address, telephone);
    ApprovedBook a(heading, authors, edition, ISBN, m, isApproved);
    cout << a << endl;
    authors.clear();
}

file.close();
} 
```

因此，我将构造“ApprovedBook”对象所需的信息与***** ****行分开。“=====”和星号之间的线条需要构造一个“制造商”对象，该对象也是 ApprovedBook 的属性。所以我读取了第一条信息并使用 << 输出对象（我已经为类预定义了运算符）。但在那之后，应用程序冻结并且似乎没有读取星星下方的下一条信息。那有什么问题？file.good() 条件是否足够或者可能需要一些更高级的检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:26:17.443

`while (line != "*****************") {`最后一条记录将始终为真，除非您在输入文件的末尾添加星号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:06:12.360

在我看来，您还需要这一行来检查您的文件：

```
while (file.good() && line != "*****************") { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:43:07.333

我用 while (line != "") 替换了 file.good，这对我来说效果很好。

# ios - ios - 使用自定义委托时，responsToSelector 始终为 false

> ID：13415468
> 
> 赞同：1
> 
> 时间：2012-11-16T11:14:07.307
> 
> 标签：ios, delegates, protocols, respondstoselector

我在玩 MKMap 和一些自定义委托，它在这里不起作用，我真的不知道为什么：/

这是我的代码：

**位置视图控制器.h**

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@protocol LocationViewDelegate <NSObject>

@required
- (void)didReceiveLocation:(CLLocation *)location;

@end

@interface LocationViewController : UIViewController <CLLocationManagerDelegate>

@property (strong, nonatomic) IBOutlet UILabel *locationLabel;
@property (nonatomic, strong) id<LocationViewDelegate> delegate;

- (IBAction)sendLocation:(id)sender;

@end 
```

**位置视图控制器.m**

```
[...]
- (IBAction)sendLocation:(id)sender {
    if ([_delegate respondsToSelector:@selector(didReceiveLocation:)]) {
        [_delegate didReceiveLocation:_currentLocation];
    } else {
        NSLog(@"nope");
    }
}
[...] 
```

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "LocationViewController.h"

@interface MapViewController : UIViewController <LocationViewDelegate>

@end 
```

**MapViewController.m**

```
[...]
- (void)didReceiveLocation:(CLLocation *)location {
    _mapView.centerCoordinate = location.coordinate;
}
[...] 
```

我总是收到“nope”消息，这意味着`respondsToSelector`返回 NO。几天前我做了同样的例子，一切都很好。

有人可以看到这里的问题在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T18:22:35.100

将您的 MapViewController 设置为 LocationViewController 的代表，即在您的 MapViewController.m 中：

```
self.locationViewController.delegate = self; 
```

顺便说一句，我假设您的 MapViewController 拥有一个 LocationViewController 实例，如果是这样，最好将 LocationViewController 中的委托属性设置为“弱”以避免循环引用。@property (nonatomic, weak) id 代表；

# c# - BitmapImage - 图像下载问题

> ID：13415471
> 
> 赞同：2
> 
> 时间：2012-11-16T11:14:13.027
> 
> 标签：c#, wpf

我使用此代码从 Internet 获取图像

```
var image = new BitmapImage();
image.BeginInit();
image.CacheOption = BitmapCacheOption.OnLoad;
image.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
image.UriSource = new Uri(url, UriKind.Absolute);
image.EndInit();
RSSImage.Source = image; 
```

有时没有图像。

似乎是由于超时等原因而发生的。

无论如何，我使用了一些异步。及时获取图像的方法？

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:56:26.767

异步加载图像（C# 5.0 和 .NET Framework 4.5）：

```
using (var client = new WebClient()) {
  var bytes = await client.DownloadDataTaskAsync(url);

  var image = new BitmapImage();
  image.BeginInit();
  image.CacheOption = BitmapCacheOption.OnLoad;
  image.StreamSource = new MemoryStream(bytes);
  image.EndInit();
  RSSImage.Source = image;
} 
```

# jquery - 在多个文档 jQuery Mobile 站点上执行 JavaScript

> ID：13415478
> 
> 赞同：1
> 
> 时间：2012-11-16T11:14:35.117
> 
> 标签：jquery, jquery-mobile

我有一个网站，我通过 getJSON 加载所有内容。为了保持 DOM 的大小并保持文档的可读性，内容是从单独的 HTML 文档中加载的。问题是当使用 AJAX 加载页面时，在新页面加载时没有执行 JavaScript。如果我直接访问该页面，则会执行 JavaScript。

在使用 AJAX 导航到新页面和直接加载页面时，有什么方法可以执行一些 JavaScript？

我注意到如果它们是动态创建的，直接使用“index.html#page2”加载页面是行不通的。它只加载第一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:27:01.550

Jquery mobile 的标准行为是使用 AJAX 从子问题页面加载内容，仅加载文档的正文部分。后果是：

*   标题的内容未加载：仅在后续页面中链接的样式表的任何特定脚本都将被忽略
*   加载页面时没有`$(document).ready()`事件。

做事的正确方法是

1.  确保您的首页的标题链接到您需要的所有脚本和样式表
2.  将您的 javascript 绑定`$(document).bind('pageinit')`到`$(document).ready()`

[你可以在那里](http://jquerymobile.com/test/docs/api/events.html)找到更多信息

# eclipse - CUDA Nsight Eclipse 调试器错误 (Mac OS X)

> ID：13415480
> 
> 赞同：1
> 
> 时间：2012-11-16T11:14:40.253
> 
> 标签：eclipse, cuda, nsight, cuda-gdb

我在我的 MacBook PRO（OS X 10.8.2、山狮、CUDA 5.0、GT650M）上运行 Nsight Eclipse 版本，每次尝试在 Nsight 中启动调试器时都会遇到一个奇怪的错误。在控制台中我得到： CUDA 命令输出的合并已关闭。和错误屏幕。

这是错误的屏幕截图：

![http://img201.imageshack.us/img201/6857/screenbvm.png](../Images/db6f0626affdb299a0496b8f64740e40.png)

我浏览了 Nsight 文档并找到了这一行：

> 用于运行 X11（Linux 上）或 Aqua（Mac 上）的 GPU 不能用于调试 Nsight Eclipse 版中的 CUDA 应用程序。有关详细信息，请参阅 cuda-gdb 文档。

这是否意味着我不能从 Nsight 运行调试器，而只能从终端运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:17:03.160

1.  您看到的消息意味着调试器没有在您的系统上正确设置（例如，它甚至无法从控制台工作）。[请按照cuda-gdb 手册](http://docs.nvidia.com/cuda/cuda-gdb/index.html)的“设置调试器环境”中概述的步骤进行操作
2.  您将需要一个双 GPU 系统来使用可视化调试器调试 CUDA 代码。不幸的是，即使有英特尔显卡，也没有 Mac 笔记本电脑符合条件。问题是操作系统可以随时开始使用 NVIDIA GPU，如果设备在断点处暂停，则可能会挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:52:30.003

您的 cuda-gdb 未正确进行代码签名，这是 Darwin 内核调试应用程序所必需的。

按照此指南创建系统代码签名证书

```
http://www.noktec.be/archives/1251 
```

然后，对以下二进制文件进行代码签名（假设您创建的证书是 cuda_gdb）

```
sudo codesign -s cuda_gdb /usr/local/cuda/bin/cuda-gdb
sudo codesign -s cuda_gdb /usr/local/cuda/bin/cuda-binary-gdb 
```

此外，为了启动应用程序，您还需要确保 DYLD_LIBRARY_PATH 包含 cuda 运行时库路径 DYLB_LIBRARY_PATH /usr/local/cuda/lib

# mysql - #1146 - 表 'phpmyadmin.pma_recent' 不存在

> ID：13415482
> 
> 赞同：0
> 
> 时间：2012-11-16T11:14:55.370
> 
> 标签：mysql, phpmyadmin

与已提出的许多其他问题不同 - 我刚刚打开 PHPMYadmin，在我可以做任何事情之前，这条消息突然出现。

我没有改变任何东西，我没有删除任何文件。我只是有一段时间没有访问它。

如何返回我的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:49:23.143

如果您使用的是easyPHP，则包含必要文件的示例文件夹位于文件夹中，例如

> **EasyPHP\modules\phpmyadmin3522x130318184029\examples**

# ruby-on-rails - 从 Ruby on Rails 中的链接下载视频

> ID：13415483
> 
> 赞同：1
> 
> 时间：2012-11-16T11:14:56.573
> 
> 标签：ruby-on-rails

我正在开发一个使用 liveclicker 视频播放器的 Ruby on Rails 项目。为了能够向我的 web 应用程序添加下载功能，我已经实现了一个能够下载视频的链接。我想用 link_to 来做到这一点，并在相应的控制器中调用一个方法来下载视频。谁能帮我实现我的方法，以便能够从该 URL 将视频下载到我的本地计算机？

我在控制器索引方法中有这段代码。

```
def index
  send_file 'website', :type=>"video/mp4", :x_sendfile=>true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:04:17.383

请考虑插入您已有的代码。我的建议是在您引用链接的操作中使用[send_data 。](http://apidock.com/rails/ActionController/Streaming/send_data)尝试编写实现，如果您有更多问题，这里的人会很乐意再次帮助您...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:12:37.820

将[wget](http://www.gnu.org/software/wget/)安装到您的服务器

```
src = "http://example.com/video.avi"   
system %x{ wget -P ~/where/ever/you/want/folder #{src} } 
```

由于下载是一个漫长的过程，看一下[后台进程gem](https://www.ruby-toolbox.com/categories/Background_Jobs)

# ios - 在没有 Flash 的 HTML5 中添加 youtube 播放器

> ID：13415489
> 
> 赞同：1
> 
> 时间：2012-11-16T11:15:19.987
> 
> 标签：ios, html, youtube-javascript-api

我们可以在不使用 Flash 的情况下在 HTML5 和 javascript 页面中添加 Youtube 播放器吗？我需要制作一个使用 youtubeplayer 的应用程序，并且可以在不同的平台上播放，例如 ios、android

（iOS 不支持 flash）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:19:34.367

在这里，您可以为不支持 html5 的用户提供嵌入视频的代码。

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/embed/VIDEO_ID" frameborder="0">
</iframe> 
```

更多信息在这里[http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)

# awk - awk 嵌套花括号

> ID：13415497
> 
> 赞同：1
> 
> 时间：2012-11-16T11:16:02.850
> 
> 标签：awk, parentheses

我有以下 awk 脚本，我似乎需要下一个大括号。但这在 awk 中是不允许的。如何在我的脚本中解决此问题？

问题出在 if(inqueued == 1) 中。

```
BEGIN { 
   print "Log File Analysis Sequencing for " + FILENAME;
   inqueued=0;
   connidtext="";
   thisdntext="";
}

    /message EventQueued/ { 
     inqueued=1;
         print $0; 
    }

     if(inqueued == 1) {
          /AttributeConnID/ { connidtext = $0; }
          /AttributeThisDN / { thisdntext = $2; } #space removes DNRole
     }

    #if first chars are a timetamp we know we are out of queued text
     /\@?[0-9]+:[0-9}+:[0-9]+/ 
     {
     if(thisdntext != 0) {
         print connidtext;
             print thisdntext;
         }
       inqueued = 0; connidtext=""; thisdntext=""; 
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:44:14.407

尝试改变

```
 if(inqueued == 1) {
              /AttributeConnID/ { connidtext = $0; }
              /AttributeThisDN / { thisdntext = $2; } #space removes DNRole
         } 
```

到

```
 inqueued == 1 {
             if($0~ /AttributeConnID/) { connidtext = $0; }
              if($0~/AttributeThisDN /) { thisdntext = $2; } #space removes DNRole
         } 
```

或者

```
 inqueued == 1 && /AttributeConnID/{connidtext = $0;}
 inqueued == 1 && /AttributeThisDN /{ thisdntext = $2; } #space removes DNRole 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:42:52.120

awk 由`<condition> { <action> }`段组成。在 an中，`<action>`您可以像在 C 中使用`if`or`while`构造一样指定条件。您还有其他一些问题，只需将脚本重写为：

```
BEGIN { 
   print "Log File Analysis Sequencing for", FILENAME
}

/message EventQueued/ { 
    inqueued=1
    print 
}

inqueued == 1 {
    if (/AttributeConnID/) { connidtext = $0 }
    if (/AttributeThisDN/) { thisdntext = $2 } #space removes DNRole
}

#if first chars are a timetamp we know we are out of queued text
/\@?[0-9]+:[0-9}+:[0-9]+/ {
     if (thisdntext != 0) {
         print connidtext
         print thisdntext
     }
     inqueued=connidtext=thisdntext="" 
} 
```

我不知道这是否会做你想要的，但至少在语法上是正确的。

# c++ - 为什么即使我的类派生自 std::list，也不能从初始化列表中初始化它？

> ID：13415501
> 
> 赞同：1
> 
> 时间：2012-11-16T11:16:17.730
> 
> 标签：c++, c++11, initializer-list, list-initialization

我有以下代码。

```
#include <utility>
#include <list>
#include <iostream>

class Pair: public std::pair<unsigned int, unsigned int>{
    Pair (unsigned int h, unsigned int l) : pair(h,l){};
};
class PairList: public std::list<Pair>{};

int main(int argc, char** argv){

    PairList pl = {{800,400},{800,400}};
} 
```

我使用 v4.6 的 MinGW g++ 和命令行编译它
`g++ -std=c++0x Test.cpp -o test.exe`
并得到错误：
`error: could not convert '{{800, 400}, {800, 400}}' from '<brace-enclosed initializer list>' to 'PairList'`
但如果在 main() 中，我写的
`list<pair<unsigned int,unsigned int>> pl = {{800,400},{800,400}};`
一切都很好。
怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:22:19.507

有两种方法：

1.  不要从标准类继承，`typedef`而是使用：

    ```
    typedef std::pair<unsigned int, unsigned int> Pair;
    typedef std::list<Pair> PairList; 
    ```

2.  在继承的类中实现正确的构造函数（[`std::initializer_list`](http://en.cppreference.com/w/cpp/utility/initializer_list)作为参数），不能自动使用基类构造函数。

我推荐第一种选择，因为标准类（除了少数例外）*不是*为继承而设计的。

# c# - C# - 多线程 - 如何应用于具有读/写属性的对象

> ID：13415502
> 
> 赞同：0
> 
> 时间：2012-11-16T11:16:19.340
> 
> 标签：c#, multithreading, thread-safety

我是 C# 中多线程的新手。但是通过阅读 C# 书籍和教程中的各个章节。我知道开发用于多线程应用程序的类的最佳方法是创建不可变类。

但我不太确定如何处理暴露读/写属性的类。在我读过的一些文章中，作者在读/写属性周围放置了锁，例如

```
public class Test
{
  private string property1;

  public string ClassProperty
  {
   get
   {
     lock 
     {
       return Property1;
     }
   }
   set
   {
      lock 
      {
        Property1 = value;
      }
   }
 }
} 
```

我知道，在一个类中声明和使用的任何共享变量都需要在多线程应用程序中锁定。但是我读过的一些文章表明，如果暴露的属性是引用类型，则上述代码将不起作用。其他人建议您不能使具有公开属性的类成为线程安全的？有人对这个话题有明确的答案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:30:23.103

该代码示例除了增加开销之外什么都不做。C# String 对象本身是线程安全的，指针读/写总是原子的。该代码示例仅对双精度或结构有意义。

您不应该考虑使单个属性成为线程安全的，就像使更大的逻辑操作“原子”一样。例如，如果您有两个字段 foo 和 bar 并且必须始终是 bar == lowercase(foo) 那么您应该保护使用相同锁访问它们中的任何一个的操作。

一个更好的例子是一个对象，它必须同时包含在向量和散列中：

*   添加时，您应该锁定向量和散列并在锁定下更新两者。
*   查询时，您应该锁定哈希，获取值，解锁并返回它。
*   迭代时，您应该返回向量的副本或确保调用者理解您的锁定模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:19:44.663

引用类型的问题是您只是锁定获取引用。引用类型后，您可以以不安全的方式访问类型成员，除非该类型本身支持线程安全。

# ios - 无法将 NSData 转换为图像 iphone

> ID：13415505
> 
> 赞同：1
> 
> 时间：2012-11-16T11:16:32.137
> 
> 标签：ios, image, cocoa, nsdata, typeconverter

我真的不知道为什么它不转换`NSData`为`UIImage`. 被`NSData`保存了，但是当我调试程序时，想象用 imageData 转换时是 0X0000000000。

这是我的代码：

```
NSArray *pathArr = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                       NSUserDomainMask,
                                                       YES);
NSString *path = [[pathArr objectAtIndex:0]
                  stringByAppendingPathComponent:@"img.data" ];

NSData * imageData = [cerereIndemnizatie.fisier dataUsingEncoding: NSUTF8StringEncoding];
[imageData writeToFile:path atomically:YES];

NSData *retrievedData = [NSData dataWithContentsOfFile:path];

UIImage * imagine = [UIImage alloc] init];
UIImage * imagine = [UIImage imageWithData:retrievedData]; 
```

我从 Web 服务解析数据的代码。我叫`writeDataToFileSystem`我按下一个按钮

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL * url = [NSURL URLWithString:@"http://192.168.1.183:8002/iDocument.asmx"];

    NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url
                                                            cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                        timeoutInterval:15.0];

    NSString * parameters = [[NSString alloc] initWithString:[self XmlRequest]];
    NSLog(@"Request=%@", parameters);
    NSString * msgLength = [NSString stringWithFormat:@"%d", [parameters length]];

    [request addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request addValue:@"http://tempuri.org/GetDocumenteByIdXML"  forHTTPHeaderField:@"SOAPAction"];
    [request addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[parameters dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection * connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

    if (connection){
        self.responseData = [NSMutableData data];
    }
}

- (NSString *)XmlRequest
{
    NSString * xml = [[NSString alloc] initWithFormat:
                      @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                      "<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>"
                      "<soap:Body>"
                      "<GetDocumenteByIdXML  xmlns='http://tempuri.org/'>"
                      "<user>admin_document</user>"
                      "<password>123</password>"
                      "<id>%@</id>"
                      "</GetDocumenteByIdXML>"
                      "</soap:Body>"
                      "</soap:Envelope>",self.index];

    return xml;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"Response: %@", [response textEncodingName]);
    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"connection:DidReceiveData");
    [self.responseData appendData:data];
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString * responseString = [[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding];
    NSLog(@"Response string: %@", responseString);
    self.navigationItem.hidesBackButton = NO;

    //to do parseXML
    NSXMLParser * xmlParser = [[NSXMLParser alloc] initWithData:responseData];
    xmlParser.delegate = self;
    BOOL succes = [xmlParser parse];

    if (succes) {
        [self.tableView reloadData];
    }
    else {
    }
}

- (void) writeDataToFileSystem {
    NSArray *pathArr = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                           NSUserDomainMask,
                                                           YES);
    NSString *path = [[pathArr objectAtIndex:0]
                      stringByAppendingPathComponent:@"img.data" ];

    NSData * imageData = [cerereIndemnizatie.fisier dataUsingEncoding: NSUTF8StringEncoding];
    [imageData writeToFile:path atomically:YES];

    NSData *retrievedData = [NSData dataWithContentsOfFile:path];

    //UIImage * imagine = [[UIImage alloc] init];
    //UIImage * imagine = [UIImage imageWithData:retrievedData];

    UIImage * imagine = [[UIImage alloc] initWithData:retrievedData];

    //    UIImageView *imgv = [[UIImageView alloc]
    //                         initWithFrame:CGRectMake(100, 100, 200, 200)];
    //
    //    imgv.image = [UIImage imageWithData:retrievedData];
    //    [self.view addSubview:imgv];

}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName   namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

    if (![elementName isEqual:@"DetaliiDocument"])
        return;

    cerereIndemnizatie = [[CerereIndemnizatieDoc alloc] init];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ([elementName isEqualToString:@"Id"]) {
        cerereIndemnizatie.id = currentElementValue;
    }

    if ([elementName isEqualToString:@"Nume"]) {
        cerereIndemnizatie.nume = currentElementValue;
    }

    if ([elementName isEqualToString:@"TipDocument"]) {
        cerereIndemnizatie.tipDocument = currentElementValue;
    }

    if ([elementName isEqualToString:@"Fisier"]) {
        cerereIndemnizatie.fisier = currentElementValue;
    }

    else if ([elementName isEqualToString:@"FormatDocument"]) {
        cerereIndemnizatie.formatDocument = currentElementValue;
    }
    currentElementValue = nil;
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if(!currentElementValue) 
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"connection:didFailWithError:");
    NSLog(@"%@", [error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:23:30.243

`imageWithData:`不会获取一些任意数据并将其解释为 RGBA 未压缩纹理。

它获取包含已识别图像格式（如 JPG、PNG 或 TIFF）字节的数据，解析这些字节并适当地解压缩图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:28:38.017

图像在后端以某种方式（例如base64）编码，尝试发现使用哪种编码并在前端使用相同的算法对图像进行解码。NSUTF8StringEncoding 在这种情况下没有意义。

# java - 在嵌入式码头中找不到

> ID：13415507
> 
> 赞同：0
> 
> 时间：2012-11-16T11:16:47.090
> 
> 标签：java, rest, jetty, jersey, embedded-jetty

我在嵌入式码头中部署了休息网络服务（泽西岛）。

我的服务器：

```
 Map<String,Object> initMap = new HashMap<String, Object>();
    initMap.put("com.sun.jersey.api.json.POJOMappingFeature", "true");
    initMap.put("com.sun.jersey.config.property.packages", "com.extern.rest");
    ResourceConfig rc = new PackagesResourceConfig(initMap);
    restServer = HttpServerFactory.create("http://localhost:5555/core-gw-rs/", rc);
    restServer.start() 
```

我的客户：

```
 URL url = new URL(buildUrl(params, path));
        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.setDoInput(true);
        connection.connect(); 
```

当我从客户端进行查询时，作为响应，我收到状态 404。当浏览器向同一地址发出请求时，将获得所需的结果（200 状态）。

### 更新

方法：

```
@GET
@Path("{accountUuid}/domain/rfc822")
public Response fetchData(@PathParam("accountUuid") String accountUuid) { 
    return Response.ok().build();     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:26:03.923

问题是我在另一台服务器上启动了另一个soap服务（相同的端口，但不同的上下文）为什么我能够通过浏览器仍然是个谜。

# android - 阿拉伯字体比较

> ID：13415516
> 
> 赞同：2
> 
> 时间：2012-11-16T11:17:26.817
> 
> 标签：android, comparison, arabic

我有一个阿拉伯语数据库，我需要根据将术语作为输入的查询从数据库中检索一些行，如下代码所示。

```
String sqlSTRing = "SELECT term, termNT, definition FROM " + TABLE_Definitions + " WHERE termNT = ?";
Cursor mCursor2 = db.rawQuery(sqlSTRing, new String[] {"سلام"}); 
```

问题在于阿拉伯字体，当 SQL 字符串将给定的单词与数据库中的相同单词进行比较时，它没有找到它。我还注意到，Android 内部对阿拉伯字体的任何比较都是错误的。例如，使用选择工具，我从 webview 中得到了一个词。我取第一个字母，并将其与字母表进行比较，以了解单词的开头。

```
fistLetter.equals("ا"); 
```

即使`firstLetter`是`"ا"`，比较也会返回`false`。

我尝试使用`ArabicReshaper`该类，但它没有用。

# c# - 如何获取给定网址的所有aspx页面列表

> ID：13415519
> 
> 赞同：1
> 
> 时间：2012-11-16T11:17:31.263
> 
> 标签：c#, asp.net

我想创建一个包含在我的网站中的所有 aspx 页面的列表。

但我只有 40 页。但是有2000多页。

请告诉我如何获取所有 aspx 页面列表。我正在使用以下代码获取 url 页面列表。

```
private string[] GetAllUrls(string str) 
{ 
    string pattern = @"<a.*?href=[""'](?<url>.*?)[""'].*?>(?<name>.*?)</a>";

    System.Text.RegularExpressions.MatchCollection matches = System.Text.RegularExpressions.Regex.Matches(str, pattern, System.Text.RegularExpressions.RegexOptions.IgnoreCase); 
    string[] matchList = new string[matches.Count]; 
    int c = 0; 

    foreach (System.Text.RegularExpressions.Match match in matches) 
        matchList[c++] = match.Groups["url"].Value; return matchList; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:12:28.253

我不知道你是如何获得这 40 个文件的，但你可以这样做：

```
String[] Files = Directory.GetFiles("C:\\YourSorceCodeDirectory", "*.aspx", SearchOption.AllDirectories); 
```

# regex - 用空白替换'单引号的正则表达式

> ID：13415525
> 
> 赞同：0
> 
> 时间：2012-11-16T11:18:03.377
> 
> 标签：regex

```
insert into xpatjobs_area_city (area_id,type,name) values(143,'city','isola d'istria');
insert into xpatjobs_area_city (area_id,type,name) values(143,'city','d 'isria');
insert into xpatjobs_area_city (area_id,type,name) values(143,'city','ISO d'iuitria')
;
insert into xpatjobs_area_city (area_id,type,name) values(143,'city','ijuid'iskjitria');
insert into xpatjobs_area_city (area_id,type,name) values(143,'city','riad'istia'); 
```

我想`'`用空白替换我尝试使用文本编辑器使用常规 expsn 替换文本

```
([a-zA-Z])'([a-zA-Z]) 
```

但它为 'isola d'istria 选择了一个 d'i

我有一个完整的段落要替换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:30:30.900

试试这个：

```
.replace(/('[a-zA-Z]+)'([a-zA-Z]+')/g, '$1$2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:37:25.857

以下应该使用以下技巧`sed`：

```
sed -E "s/(.*[a-zA-Z ]+)'([a-zA-Z ]+.*)/\1 \2/g" file.txt 
```

如果要将更改保存回文件，请使用以下`-i`选项：

```
sed -Ei "s/(.*[a-zA-Z ]+)'([a-zA-Z ]+.*)/\1 \2/g" file.txt 
```

如果要将更改保存到新文件，则重定向输出：

```
sed -E "s/(.*[a-zA-Z ]+)'([a-zA-Z ]+.*)/\1 \2/g" file.txt > newfile.txt 
```

可以在[此处](http://gnuwin32.sourceforge.net/packages/sed.htm)找到适用于 Windows 的 Sed ，甚至更好的[cygwin](http://www.cygwin.com/)是一组工具，可为 Windows 提供 Linux 外观和感觉环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:48:47.270

此正则表达式将匹配`'`名称中的相关事件，但不匹配`'`周围的字符串

```
(?<=[\w\s])'(?=\w) 
```

（使用 Sublime Text 2 文本编辑器测试）

# html - CSS在具有可变高度的父项中居中文本

> ID：13415530
> 
> 赞同：1
> 
> 时间：2012-11-16T11:18:24.083
> 
> 标签：html, css

![看下面的图片，它解释了我的问题](../Images/024d59e755d9d2db4c41366afd6354e0.png)

所以基本上我需要居中（垂直）文本，但高度是可变的，因为它可以在多行上，我该怎么做？

我试过的：

```
.box {
  text-align: center;
  vertical-align: center;
}

.box {
  position: absolute;
  top: 50%;
  text-align: center;
  left: 50%;
}

.box {
  margin: 50% auto;
  text-align: center;
} 
```

我不知道这是否可能，或者我是否必须用 JS 来纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:23:46.863

采用`display:table-cell`

```
.box {
  text-align: center;
  vertical-align: middle;
    background:black;
    color:white;
    height:200px;
    display:table-cell;
    width:450px
} 
```

**[演示 - 单行](http://jsfiddle.net/essts/3/)**

**[演示 - 多行](http://jsfiddle.net/essts/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:21:08.413

给你，垂直和水平工作。

HTML：

```
<div class="area">
      <div class="bubble">
          <p>To look best, text should really be centered inside this bubble both vertically and horizontally.</p>
      </div>
</div>​ 
```

CSS：

```
 .area { 
      width: 300px; 
      height: 300px; 
      background: url(../images/abe-bg.png) no-repeat; 
      position: relative;
    }

    .bubble { 
      position: absolute; 
      left: 93px; 
      top: 21px; 
      width: 135px; 
      height: 84px; 
      display: table; 
    }

    .bubble p {
      display: table-cell; 
      vertical-align: middle; 
      text-align: center; 
    }​ 
```

[演示](http://jsfiddle.net/gjExY/)

# c - 将静态库链接到 Apache 模块

> ID：13415531
> 
> 赞同：1
> 
> 时间：2012-11-16T11:18:24.880
> 
> 标签：c, apache

我正在试验 Apache 模块开发，因此我想知道如何将静态库链接到模块（如果可能的话）。

自然地，它可以很好地编译和安装，并且在加载模块时 Apache 会失败。消息是：

`Cannot load /usr/lib/apache2/modules/mod_example.so into server: /usr/lib/apache2/modules/mod_example.so: undefined symbol: zmq_socket`

我要链接的库是 zeromq，我使用的是由`apxs2`. 在这里我添加了`-lzmq`. 如果我删除 zmq 相关代码，模块运行良好。

我的平台是 Ubuntu 12.04 64 位，gcc4.6.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:06:45.200

好吧，显然生成的makefile不是一个好主意。我用基本的编译命令替换了 makefile 引用，例如：

`apxs2 -c -lzmq mod_example.c`

alk 在问题评论中的建议也可以工作（将库位置添加到`LD_LIBRARY_PATH`），因为我正在链接另一个与 apache 相关的库（apreq），该库链接没有任何问题。

# javascript - 具有多个值的自动完成和自动替换

> ID：13415536
> 
> 赞同：1
> 
> 时间：2012-11-16T11:18:43.817
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-autocomplete

我正在使用具有多个远程值的自动完成功能。每次搜索只给我一个单词（输入文本中的单词用空格分隔）

我删除了 return false; 从焦点功能，现在当我关注自动完成结果时，它会自动更改输入文本，当我将焦点返回到输入文本时，它会显示我写的原始文本。

这是我想要的行为，但问题是当我搜索第二个单词时。然后，当我关注自动完成搜索时，它会覆盖输入文本中的第一个单词。

我希望第一个单词保持不变，只有第二个（3、4 ..）单词发生变化。当我返回输入文本时，我得到了我在关注搜索结果之前写的原始文本。

我的代码：

```
 $(function() {

    function split( val ) {
        return val.split( / \s*/ );
    }
    function extractLast( term ) {
        return split( term ).pop();
    }

    $( "#tags" )

         // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            source: function( request, response ) {
                $.getJSON( "http://test.dev/search.php", {
                    term: extractLast( request.term ),
                    complete: request.term,

                }, response );
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
            },
            focus: function(event, ui) {

            },
              select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( " " );

                return false;
            }
        });

}); 
```

# php - 全文搜索PHP单独

> ID：13415539
> 
> 赞同：1
> 
> 时间：2012-11-16T11:18:52.040
> 
> 标签：php, string, full-text-search, sorting

我有一个 InnoDB 表，从中检索值并将其存储在 PHP 的数组中。

现在我想按与搜索字符串中匹配项的相关性对数组进行排序。

eg：如果我搜索“hai how are you”，它会将字符串拆分为单独的单词，如“hai”“how”“are”“you”，搜索后的结果必须如下：

```
 [0] hai how are all people there

 [1] how are things going 

 [2] are you coming

 [3] how is sam 
```

...

有什么方法可以仅通过基本 PHP 函数中的相关性对数组进行排序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:38:39.870

```
$searchText = "hai how      are you"; //eg: if there are multiple spaces between words
$searchText = preg_replace("(\s+)", " ", $searchText );
$searchArray =& split( " ", $searchText );

$text = array(0 => 'hai how are all people there',
              1 => 'how are things going ',
              2 => 'are you coming',
              3 => 'how is sam',
              4 => 'testing ggg');

foreach($text as $key=>$elt){
    foreach($searchArray as $searchelt){
        if(strpos($elt,$searchelt)!== FALSE){
            $matches[] =  $key;  //just storing key to avoid memory wastage
            break;
        }                
    }            
}

//print the matched string with help of stored keys
echo '<pre>matched string are as follows: ';
foreach ($matches as $key){

  echo "<br>{$text[$key]}";    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:39:15.653

也许是这样的：

```
$arrayToSort=array(); //define your array here
$query="hai how are you";

function compare($arrayMember1,$arrayMember2){
     $a=similar_text($arrayMember1,$query);
     $b=similar_text($arrayMember2,$query);
     if($a>$b)return 1;
     else return -1;
}

usort($arrayToSort,"compare"); 
```

查看 php 手册以了解similar_text 和 usort 的作用。

# sql-server - 带有计数和总和的 SQL Server 数据透视表

> ID：13415540
> 
> 赞同：10
> 
> 时间：2012-11-16T11:18:52.687
> 
> 标签：sql-server, tsql, pivot, unpivot

我试图让一个 SQL Server Pivot 表工作，它允许我计算然后总结一些列（总共 6 个）。数据透视表的目的是汇总任意数量的生产站点的在线问卷调查结果。有 6 个问题可以有 3 个结果值 - Target、Action 和 Fail。我要做的是计算每个问题的目标、操作和失败的数量，然后对每个问题进行总结。因此，例如，生产站点 A 可能有 2 个目标、2 个操作和 2 个失败。

我的理解是 SQL Server Pivot 表可以传递这些信息，然后可以在 ASP.Net ReportViewer 中显示。下面是我的代码，但它不起作用，可以在专家的帮助下完成：

```
 SELECT PRODUCTION_Site,
     [Target],
     [Action],
     [Fail]
     FROM
     (SELECT Production_Site,
             SUM(Coding),
             SUM(Measurable),
             SUM(Appearance),
             SUM(Aroma),
             SUM(Flavour),
             SUM(Texture)
               FROM t_Pqe_Grocery
               GROUP BY Production_Site) AS T
          PIVOT
         (
           COUNT(Coding) FOR Grocery_Packaging_And_Coding IN ([Target],[Action],[Fail])
           COUNT(Measurable) FOR Grocery_Measurable IN ([Target],[Action],[Fail])
           COUNT(Appearance) FOR Grocery_Appearance IN ([Target],[Action],[Fail])
           COUNT(Aroma) FOR Grocery_Aroma IN ([Target],[Action],[Fail])
           COUNT(Flavour) FOR Grocery_Flavour IN ([Target],[Action],[Fail])
           COUNT(Texture) FOR Grocery_Texture IN ([Target],[Action],[Fail])) AS P 
```

有没有办法解决这个问题，或者数据透视表不是解决方案？

表是

```
Production_Site,
Grocery_Packaging_And_Coding,
Grocery_Measurable,
Grocery_Appearance,
Grocery_Aroma,
Grocery_Flavour,
Grocery_Texture 
```

表中的数据如下所示：

```
Site A, Target, Action, Fail, Target, Target, Target
Site B, Target, Action, Fail, Target, Target, Target
Site C, Target, Target, Target, Target, Target, Target
Site A, Target, Target, Target, Target, Target, Target 
```

我正在寻找的结果是

```
Production_Site | Target | Action | Fail
Site A              10       1       1
Site B               4       1       1
Site C               6       0       0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T13:13:45.337

执行此查询的一种更简单的方法是同时应用 the`UNPIVOT`和 then`PIVOT`函数：

```
select *
from
(
  select Production_Site, value 
  from t_Pqe_Grocery
  unpivot
  (
    value
    for col in (Grocery_Packaging_And_Coding, Grocery_Measurable,
                Grocery_Appearance, Grocery_Aroma, 
                Grocery_Flavour, Grocery_Texture)
  ) unp
) src
pivot
(
  count(value)
  for value in ([Target], [Action], [Fail])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/cd888/4)

获取您的`UNPIVOT`列列表并将其转换为多行，这使得计算变得更加容易：

```
select Production_Site, value 
from t_Pqe_Grocery
unpivot
(
  value
  for col in (Grocery_Packaging_And_Coding, Grocery_Measurable,
              Grocery_Appearance, Grocery_Aroma, 
              Grocery_Flavour, Grocery_Texture)
) unp 
```

反透视结果：

```
| PRODUCTION_SITE |  VALUE |
----------------------------
|          Site A | Target |
|          Site A | Action |
|          Site A |   Fail |
|          Site A | Target |
|          Site A | Target |
|          Site A | Target |
|          Site B | Target |
|          Site B | Action |
|          Site B |   Fail |
|          Site B | Target |
|          Site B | Target |
|          Site B | Target |
|          Site C | Target |
|          Site C | Target |
|          Site C | Target |
|          Site C | Target |
|          Site C | Target |
|          Site C | Target |
|          Site A | Target |
|          Site A | Target |
|          Site A | Target |
|          Site A | Target |
|          Site A | Target |
|          Site A | Target | 
```

然后将`PIVOT`应用于 this 将获得您想要的每个`PRODUCTION_SITE`s 的计数。添加后`PIVOT`的结果是：

```
| PRODUCTION_SITE | TARGET | ACTION | FAIL |
--------------------------------------------
|          Site A |     10 |      1 |    1 |
|          Site B |      4 |      1 |    1 |
|          Site C |      6 |      0 |    0 | 
```

# c# - FileOpenPicker + Facebook + OpenAsync 抛出 FileNotFoundException

> ID：13415543
> 
> 赞同：0
> 
> 时间：2012-11-16T11:18:56.857
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我对 FileOpenPicker (ModernUI xaml/c#) 有问题，因为如果从网络上挑选一些图片，它会返回“StorageFile”而没有错误，但是当我尝试使用 OpenAsync 打开它时，系统会抛出 FileNotFoundException。特别是我注意到，如果从 facebook 获取旧照片，这种情况总是会发生。

[使用SDK Sample app "XAML images sample"](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9)很容易重现该问题。只需启动应用程序并从“Facebook”获取一些图片，并确保获取一些旧图片，因为我注意到最新的图片可以正常打开。

更具体地说，请找到实际抛出该异常的代码的和平：

```
 // Open a stream for the selected file
    StorageFile file = await open.PickSingleFileAsync();

    // Ensure a file was selected
    if (file != null)
    {
        // Ensure the stream is disposed once the image is loaded
        // !!! Here exception is thrown if you pickup some old file from facebook !!!
        using (IRandomAccessStream fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read))
        {
            // Set the image source to the selected bitmap
            BitmapImage bitmapImage = new BitmapImage();
            bitmapImage.DecodePixelHeight = decodePixelHeight;
            bitmapImage.DecodePixelWidth = decodePixelWidth;

            await bitmapImage.SetSourceAsync(fileStream);
            Scenario2Image.Source = bitmapImage;
        }
    } 
```

提前感谢您的建议和帮助

亲切的问候

MG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:23:11.227

好的，就这样吧:)

当您下载文件并将其保存在光盘上的某个位置时，您将在关闭它后无法打开它，因为位置不在应用程序功能中，请记住 Windows 应用商店应用程序是沙盒化的，因此它们只能获取功能中的内容。

您可以通过 2 种方式来解决这个“问题”。

1) 将文件保存在您的应用程序可以访问的位置之一：-> 文档库-> 音乐库-> 视频库-> 图像库-> 本地应用程序目录

可以在功能中将库设置为您的应用程序始终可以访问的本地应用程序目录。从这些目录中，您可以轻松打开文件

2）在访问缓存中保存文件路径你可以这样做

```
StorageApplicationPermissions.FutureAccessList.AddOrReplace(fol.GetHashCode().ToString(), fol); 
```

之后，您可以访问该目录，即使它不在您的能力范围内，但请记住缓存可以包含 1000 个目录

# java - 每次在客户端聊天中按下按钮以在 servlet 中使用 ajax 检索消息和值时都会收到离开页面警报？

> ID：13415545
> 
> 赞同：0
> 
> 时间：2012-11-16T11:18:58.717
> 
> 标签：java, javascript, ajax, jsp, servlets

在我的jsp页面中，只有当我得到sessionId！=“null”时，我才显示包含文本区域、文本字段和发送按钮的div。

此外，我还有一个确认警报框，用于关闭窗口以注销会话...

但是，如果我尝试检索 sessionId、userId 等的值，或者在按下 startChat 或发送按钮时将消息发送到服务器，我每次都会收到相同的警报……在我的 Jsp 页面中，

```
<div id="login">
<form id="indexForm" name="indexForm" action="LoginAction" method="post">
<table>
    <tr>
        <td id="fname" class="fontStyle">First Name :</td>
        <td id="fvalue"><input type="text" id="firstname"
            name="firstname" /></td>
        <td id="lname" class="fontStyle">Last Name :</td>
        <td id="lvalue"><input type="text" id="lastname" name="lastname" /></td>
    </tr>
    <tr>
        <td colspan="4" id="err1" style="color: red">&nbsp;</td>

    </tr>
    <tr>
        <td id="email_id" class="fontStyle">Email Id&nbsp;&nbsp; &nbsp;:</td>
        <td><input type="text" id="email" name="email" /></td>
        <td id="sub" class="fontStyle">Subject
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</td>
        <td><input type="text" id="subject" name="subject" /></td>
    </tr>

    <tr>
        <td colspan="4">&nbsp;</td>
    </tr>

    <tr>
        <td colspan="4" id="err2" style="color: red">&nbsp;</td>
    </tr>

    <tr>
        <td colspan="4">&nbsp;</td>
    </tr>

    <tr>
        <td></td>
        <td>
        <center><a id="button" href="javascript:getValues();">Start
        chat</a></center>
        </td>
        <td>
        <center><a id="button" href="javascript:logout();">Stop
        chat</a></center>
        </td>
        <td></td>
    </tr>

</table>

</form>
</div>

<div style="display: none;" id="div">
<div><textarea id="textarea" rows="10"></textarea></div>
<div>
<table>
    <tr>
        <td id="msg" class="fontStyle">message :</td>
        <td id="msgvalue"><input size="40" type="text" id="message"
            onkeydown="enterKey()" /></td>
        <td style="width: 5%;"></td>
        <td><!-- <input type="button" value="send" onclick="sendMessage()" /> -->
        <a id="button3" href="javascript:sendMessage();">Send</a></td>
    </tr>
</table>
</div>
</div> 
```

在我的 JavaScript 中，

```
window.onbeforeunload = function () {

      return  "Are you Sure want to LOGOUT the session ?";
};

window.onunload = function () {

        if((sessionId != null)&&(sessionId!="null")&& (sessionId != ""))
            logout();
};

function sendMessage(){

    message = document.getElementById("message").value;
    document.getElementById("message").innerText = "";
    try
    {
        xmlhttp.onreadystatechange=function()
        {
            //alert("Status : "+xmlhttp.status+"\nreadyState : "+xmlhttp.readyState);
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {

                var checkMsg = decodeURIComponent(xmlhttp.responseText.toString());
                if(checkMsg != "null" && checkMsg != null){
                    //document.getElementById("textarea").innerHTML +=  checkMsg;
                    if(textarea.value == "")
                        textarea.value = checkMsg;
                    else
                        textarea.value += "\n"+ checkMsg  ;
                }
            }
        };
        xmlhttp.open("POST","SendMessageAction?sessionId="+sessionId+"&userId="+userId+"&securekey="+secureKey+"&message="+encodeURIComponent(message)+"&sid"+Math.random(),true);
        xmlhttp.send();
    }
    catch(err)
    {
        alert(err.description);
    }
} 
```

在我的 Servlet 中，

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        PrintWriter out = response.getWriter();
        msg = request.getParameter("message");
        //System.out.println("msg -----> : "+msg);
        seckey = request.getParameter("securekey");
        uid = request.getParameter("userId");
        sessionId = request.getParameter("sessionId");
        //counter =Integer.parseInt(request.getParameter("counter"));
        counter = 1;
        protocol = ApplicationInfo.flexProtocol;

        message = new SendMessage();
        message.send(msg, seckey, uid, sessionId, counter, protocol);

        CustomerInfo customer = ApplicationInfo.customerDetails.get(uid);

        out.print(customer.getMessage());
        //System.out.println("msgDecoded -----> : "+msg);

    } 
```

帮助我...我不需要每次都收到警报，除非我正在关闭浏览窗口...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:19:56.160

`onbeforeunload`当我们执行以下操作之一时会触发该事件。

```
Close the current window.
Navigate to another location by entering a new address or selecting a Favorite.
Click an anchor that refers to another document.
Invoke the anchor.click method.
Invoke the document.write method.
Invoke the document.close method.
Invoke the window.close method.
Invoke the window.navigate or NavigateAndFind method.
Invoke the location.replace method.
Invoke the location.reload method.
Specify a new value for the location.href property.
Submit a form to the address specified in the ACTION attribute via the INPUT type=submit control, or invoke the form.submit method.
Invoke the window.open method, providing the possible value _self for the window name.
Invoke the document.open method.
Click the Back, Forward, Refresh, or Home button. 
```

[onbeforeunload 的 MSDN 描述](http://msdn.microsoft.com/en-us/library/ie/ms536907%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:20:08.933

解决办法是，

我在 java 脚本中的事件中使用锚标记而不是按钮。因此“window.onbeforeunload”将该事件视为一个新地址。现在我将锚标签更改为按钮并且工作正常..

# android - 在android中使用gps安全定位

> ID：13415547
> 
> 赞同：0
> 
> 时间：2012-11-16T11:19:08.013
> 
> 标签：android, gps, location

我正在制作一个基于位置进行身份验证的应用程序。例如，您可以将特定位置（坐标）设置为“安全位置”，当手机到达该位置的一定距离内时，就称身份验证成功。我将为此使用 GPS。

我的问题是： 1\. GPS 是否足够可靠和准确来完成这项任务？2\. 如果 GPS 锁不可用，是否可以使用蜂窝或 3G 互联网获得大致坐标？如果是这样，它的准确性如何？3\. 你能看出这个想法还有其他问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:25:26.890

1.  这取决于您希望与该位置的距离有多准确。如果信号质量好且没有降级，GPS 可以精确到一米以内。
2.  如果 GPS 不可用，通常您将获得基于蜂窝网络的位置。精度各不相同，但对于 UMTS 网络，精度可达 200-300 米。对于农村 GSM 网络，由于蜂窝尺寸较大，精度可能低至几公里。

# java - Matcher.group() 声明局部变量不可用

> ID：13415548
> 
> 赞同：-2
> 
> 时间：2012-11-16T11:19:10.710
> 
> 标签：java

在尝试将 matcher.group() 作为字符串获取时，它告诉它不可用。为什么？

![在此处输入图像描述](../Images/ca8a143939f268aca6c331ae9fbbc50c.png)

代码：

```
private static ArrayList<String> validateList(List<String> listToProcess) {

        List<String> resultTemp = new ArrayList<String>();
        boolean listIsCorrectlyFormatted = true;

        String pattern = "";
        pattern = "(\\s)*(\\w\\w(\\w)*)((\\s)(\\w|-|\\.)+)?(((\\s)+|(\\s)+(,)*(\\s)*|(,)(\\s)*)+(\\+(\\d)+)+)?(((\\s)+|(\\s)+(,)*(\\s)*|(,)(\\s)*)+(\\w)+(\\w|\\s|-|,)*[^\\)|^\\(])?(((\\s)+|(\\s)+(,)*(\\s)*|(,)(\\s)*)+\\((\\w)+(\\w|\\s|-|,)*\\))?(\\s)*";
        // (\s)*(\w\w(\w)*)((\s)(\w|-|\.)+)?(((\s)+|(\s)+(,)*(\s)*|(,)(\s)*)+(\+(\d)+)+)?(((\s)+|(\s)+(,)*(\s)*|(,)(\s)*)+(\w)+(\w|\s|-|,)*[^\)|^\(])?(((\s)+|(\s)+(,)*(\s)*|(,)(\s)*)+\((\w)+(\w|\s|-|,)*\))?(\s)*

        String nameP = "(\\w\\w(\\w)*)((\\s)(\\w|-|\\.)+)?";
        String plussP = "(\\+(\\d)+)+";
        String commentP = "((\\w)+(\\w|\\s|-|,)*[^\\)|^\\(])|(\\((\\w)+(\\w|\\s|-|,)*\\))";
        String tmpStr = "";
        int counter = 1;
        Matcher matcher;

        Pattern generalPt = Pattern.compile(pattern);
        Pattern otherPattern = Pattern.compile(""); // *

        for (String str : listToProcess) {

            if (generalPt.matcher(str).find()) {
                // OK

                System.out.println("#"+counter+" :: OK ``"+str+"``");

                otherPattern = Pattern.compile(nameP); // name
                matcher = otherPattern.matcher(str);
                matcher.find();
                tmpStr +=  matcher.group(); // name
                System.out.println("@NAME@"+matcher.group()+"@");
                // -----------------------------------------------------
                matcher.reset();
                otherPattern = Pattern.compile(plussP); // plus
                matcher = otherPattern.matcher(str);
                matcher.find();

                 tmpMatcherGroup = matcher.group();
                tmpStr += tmpMatcherGroup;
                System.out.println("@PLUS@"+tmpMatcherGroup+"@");
                //--------------------------------------------------
                matcher.reset();
                otherPattern = Pattern.compile(commentP); // comment
                matcher = otherPattern.matcher(str);
                matcher.find();
                tmpStr +=  matcher.group();
                System.out.println("@COMMENT@"+matcher.group()+"@");
                //--------------------------------------------------
                resultTemp.add(tmpStr);

            } else {
                // NOK
                listIsCorrectlyFormatted = false;

                tmpStr = "ERROR at line: # " + counter;

                resultTemp.add(tmpStr);

                System.out.println("#"+counter+" :: NOT OK ``"+str+"``");
            }

            counter++;
        }

        List<String> result = new ArrayList<String>();
        result.add(Boolean.toString(listIsCorrectlyFormatted));
        result.addAll(resultTemp);

        return (ArrayList<String>) result;

    } 
```

堆栈跟踪：

```
Thread [main] (Suspended (exception IllegalStateException)) 
    Matcher.group(int) line: not available  
    Matcher.group() line: not available [local variables unavailable]   
    DataProcess.validateList(List<String>) line: 111    
    DataProcess.main(String[]) line: 15 
```

解决方案：

```
matcher.reset();
                otherPattern = Pattern.compile(plussP); // plus
                matcher = otherPattern.matcher(str);
                matcher.find();
                try {
                    if (matcher.groupCount() > 0) {
                        tmpMatcherGroup = matcher.group();
                    }
                } catch (IllegalStateException e) {
                    System.out.println(e);
                }
                tmpStr += tmpMatcherGroup;
                System.out.println("@PLUS@" + tmpMatcherGroup + "@"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:38:26.263

您需要首先检查[groupCount()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#groupCount%28%29)如果它大于 0，那么您需要分配您的变量。

```
 while(m.find()) {
      for(int i = 0; i<=m.groupCount() ; i++) {
           ...Your code
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:39:59.803

解释在[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group%28%29)中：

> 抛出：
> 
> IllegalStateException - 如果尚未尝试匹配，或者之前的匹配操作失败

# php - PHP MySQL 函数返回多个值

> ID：13415549
> 
> 赞同：-2
> 
> 时间：2012-11-16T11:19:23.783
> 
> 标签：php, mysql

我有这个功能：

```
function get_top_refs() 
{
global $db;
$top_refs = $db->EscapeString($top_refs);
$top_referers = $db->QueryFetchArray("SELECT login, COUNT(*) AS top_referers FROM users     WHERE ref > 0 GROUP BY ref ORDER BY top_referers DESC LIMIT 5");
return $top_referers['top_referers'];
} 
```

如果我手动查询数据库，它会返回 2 列：

```
login   top_referers
earl73      101
yadatoo     100
kamalancien 88
lolatyou    61
wesllys1as  51 
```

如何返回这两列，然后将它们显示在表格中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:25:04.130

将您的返回值从更改`return $top_referers['top_referers'];`为`return $top_referers`

然后使用它来获取您的值：

```
<?php
    $values = get_top_refs();
    foreach($values as $value) {
        echo $value['login']." ".$value['top_referers'];
    }
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-16T11:28:04.183

您应该使用 $db 作为函数的参数。globals 是个坏主意。

```
function get_top_refs($db) 
{
    /*...*/
} 
```

# excel - 使用小于的数据透视表列标题

> ID：13415553
> 
> 赞同：1
> 
> 时间：2012-11-16T11:19:37.683
> 
> 标签：excel, pivot, pivot-table

我目前有一个数据透视表，显示不同人工作的周数。我想创建一个带有列标题的累积表，显示工作 <2 周、<4 周、<6 周等的人数。

目前我只能让列标题显示独立计数，例如 2 人工作 2 周，1 人工作 4 周。我想显示 2 人工作 =<2 周，3 人工作 =< 4 周。这可能与枢轴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:58:51.153

您应该能够通过运行总计获得与您的要求相似的内容。我创建了一组非常简单的数据，两列包含名称和周数，用作数据透视表的源。然后，我使用 Weeks 作为列标签，使用 Name 作为行标签，使用 Count of Name 作为值。这最初给了我一个人工作了一定周数的值。然后，我更改了值的字段设置以显示周数的运行总计。

希望附上的图片能让这个更清楚。

![在此处输入图像描述](../Images/916119d6b5e1aa2c45e08ba88bfb331c.png)

# android - View.findViewById() 返回 null

> ID：13415556
> 
> 赞同：5
> 
> 时间：2012-11-16T11:19:49.400
> 
> 标签：android, nullpointerexception, findviewbyid

我有这个代码：

```
private void inflateMenu() {
    if (menu == null) {
        mFanView = (LinearLayout) findViewById(R.id.fanView);
        final View v = LayoutInflater.from(getContext()).inflate(
                R.layout.sidemenu, mFanView);
        menu = (MenuView) v.findViewById(R.id.listViewMenu);
    }
        menu.setColors(backgroundColor, selectedColor, unselectedColor);
} 
```

调试时， v 包含一个 id 等于 的 MenuView `R.id.listViewMenu + 1`。当然，这会在 menu.setColors 上抛出 NPE。

为什么 R.id.listViewMenu 包含的 ID 不会导致 XML 中具有该 ID 的视图？

我试图清理我的项目，但它仍然保持不变。

编辑：发布请求的文件。

边菜单.xml

```
<com.ui.library.slidingmenu.MenuView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/listViewMenu"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

编辑：问题解决了。

对于任何来这里的人，因为 findViewById 返回 null：清理项目。如果它不起作用，请再次清理项目。如果它不起作用，请清理所有项目。直到它起作用。如果它不起作用，请询问。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T11:22:52.543

试试这个：

（在 Eclipse 菜单栏中）项目 > 清洁

说明：有时在构建过程中，R.java 类会搞砸并导致对 id 的错误引用。有时当我编译时，图像会突然发生变化，因为与之关联的 id 也发生了变化。任何资源、布局、ID 等都可能发生这种情况。

重新生成 R.java 类并修复异常的一种方法是清理您的项目。

希望有帮助！

# c# - 奇怪的 C# 弱引用行为

> ID：13415557
> 
> 赞同：3
> 
> 时间：2012-11-16T11:19:49.820
> 
> 标签：c#, c#-4.0, weak-references

我正在花一些时间学习弱引用在 C# 中的工作原理，并且遇到了这种奇怪的行为。

在下面的示例代码中，第一个测试通过，第二个测试失败。似乎您无法在构造之后但在创建对它的弱引用之前修改对象的实例，而无需停止弱引用以预期方式工作。

```
private class Simple
{
    public Simple() { X = "Hello"; }
    public string X { get; set; }
}

[Test]
public void CreatingWeakReferenceBeforeModifying()
{
    var a = new Simple();
    var aRef = new WeakReference(a);
    a.X = "World";  // First modification to a after creating reference
    a = null;
    GC.Collect();
    Assert.That(aRef.IsAlive, Is.False);  // This assertion passes
}

[Test]
public void CreatingWeakReferenceAfterModifying()
{
    var b = new Simple {X = "World"};  // First mod to b before creating ref
    var bRef = new WeakReference(b);
    b = null;
    GC.Collect();
    Assert.That(bRef.IsAlive, Is.False);  // This assertion fails
} 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:25:28.367

我*怀疑*您只会在某些情况下看到这一点——尤其是在调试版本下，尤其是在调试器下。

这个说法：

```
var b = new Simple {X = "World"}; 
```

有效地：

```
var tmp = new Simple();
tmp.X = "World";
var b = tmp; 
```

因此，即使您设置`b`为 null，堆栈上仍然有一个局部变量引用该对象。

在优化的场景中运行时，我希望 GC 注意到本地变量将永远不会被再次*读取*，并将其作为 GC 根忽略 - 但可能您运行它的*方式不会*让 GC 成为那样挑衅的。

# ruby-on-rails - 为什么我在 heroku 上的 rails 应用程序没有自行重启？

> ID：13415559
> 
> 赞同：8
> 
> 时间：2012-11-16T11:19:53.830
> 
> 标签：ruby-on-rails, heroku

我为我的一个客户管理一个 Rails 应用程序，最近它出现了故障。在我注意到之前，该网站已关闭 9 小时。我检查了日志，过去 9 小时的每个请求都带有以下代码：

```
at=error code=H10 desc="App crashed" 
```

在此之前，我看到以下日志：

```
2012-11-16T00:55:46+00:00 heroku[web.1]: Idling
2012-11-16T00:55:50+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-11-16T00:55:51+00:00 app[web.1]: [2012-11-16 00:55:51] ERROR SignalException: SIGTERM
2012-11-16T00:55:51+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-11-16T00:56:00+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-11-16T00:56:00+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-11-16T00:56:02+00:00 heroku[web.1]: State changed from up to down
2012-11-16T00:56:02+00:00 heroku[web.1]: Process exited with status 137
2012-11-16T01:03:55+00:00 heroku[web.1]: Unidling
2012-11-16T01:03:55+00:00 heroku[web.1]: State changed from down to starting
2012-11-16T01:03:59+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 4303`
2012-11-16T01:04:00+00:00 heroku[nginx]: 98.139.241.251 - - [16/Nov/2012:01:04:00 +0000] "GET / HTTP/1.1" 499 0 "-" "YahooCacheSystem" domain.com
2012-11-16T01:04:22+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-11-16T01:04:22+00:00 app[web.1]: ** [NewRelic][11/16/12 01:04:21 +0000 b8af98a1-2246-4b34-9dfe-61b9d4b747bc (2)] INFO : Dispatcher: webrick
2012-11-16T01:04:22+00:00 app[web.1]: ** [NewRelic][11/16/12 01:04:21 +0000 b8af98a1-2246-4b34-9dfe-61b9d4b747bc (2)] INFO : Application: acsolar
2012-11-16T01:04:22+00:00 app[web.1]: ** [NewRelic][11/16/12 01:04:21 +0000 b8af98a1-2246-4b34-9dfe-61b9d4b747bc (2)] INFO : New Relic Ruby Agent 3.4.0.1 Initialized: pid = 2
2012-11-16T01:04:22+00:00 app[web.1]: => Booting WEBrick
2012-11-16T01:04:22+00:00 app[web.1]: => Rails 3.1.1 application starting in production on http://0.0.0.0:4303
2012-11-16T01:04:22+00:00 app[web.1]: => Call with -d to detach
2012-11-16T01:04:25+00:00 app[web.1]: [DEPRECATION] Your applications public directory contains an assets/products and/or assets/taxons subdirectory. 
2012-11-16T01:04:25+00:00 app[web.1]:     Run `rake spree:assets:relocate_images` to relocate the images.
2012-11-16T01:04:34+00:00 app[web.1]: ** [NewRelic][11/16/12 01:04:32 +0000 b8af98a1-2246-4b34-9dfe-61b9d4b747bc (2)] INFO : Reporting performance data every 60 seconds.
2012-11-16T01:04:34+00:00 app[web.1]: Connected to NewRelic Service at collector-5.newrelic.com
2012-11-16T01:05:00+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2012-11-16T01:05:00+00:00 heroku[web.1]: Stopping process with SIGKILL
2012-11-16T01:05:02+00:00 heroku[web.1]: Process exited with status 137
2012-11-16T01:05:02+00:00 heroku[web.1]: State changed from crashed to down
2012-11-16T01:05:02+00:00 heroku[web.1]: State changed from starting to crashed 
```

我猜它可能已经旋转并在启动备份时出错，但是它为什么会一直处于崩溃状态而没有重新启动呢？如果将来再次发生这种情况，我能做些什么让它自动重启？

我也让 NewRelic 在上面运行，它根本没有通知我，但这是我必须调查的另一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:09:32.567

Heroku 的支持答案建议使用`heroku restart`. 他们现在正在解决问题。

> 嗨，我们这边的进程管理错误导致一些崩溃的应用程序只运行 1 个 web dyno 被报告为“空闲”，即使它们实际上已经崩溃了。这意味着崩溃的测功机从未重新启动，导致后续请求失败。我们已发现此问题并正在实施修复。如果您的应用仍然没有响应，请尝试使用 heroku restart 命令重新启动它。如果您需要更多帮助，请告诉我们。谢谢，Heroku 支持

# java - 在 Clojure 中使用索引保持状态查找表的惯用方法

> ID：13415561
> 
> 赞同：7
> 
> 时间：2012-11-16T11:19:58.730
> 
> 标签：java, clojure, hashmap, state

我对 Clojure 和一般的函数式编程相当陌生，我一直在努力解决以下问题。我想为一系列标记（字符串）分配一个唯一且稳定的索引。由于查找比插入多得多，因此哈希映射似乎是要走的路。

在Java中，我会写一些类似的东西

```
int last = 0; 
HashMap<String, Integer> lut = new HashMap<String, Integer>();

function Integer getIndex(String token) {
   Integer index = lut.get(token); 
   if(index == null) 
      last++;
      lut.put(token, last);
      return last;
    else { 
      return index;
    }
} 
```

Clojure 中的音译版本类似于

```
(def last-index (atom 0))
(def lookup-table (atom {}))

(defn get-index [token]
  (if (nil? (get @lookup-table token))
    (do 
      (swap! last-index inc)
      (swap! lookup-table assoc token @last-index)
      @last-index)
    (get @lookup-table token))) 
```

但这似乎不是很典型，因为它基本上是副作用，甚至没有隐藏它。

那么如果没有两个原子来保持状态，你将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:32:09.823

Ankur 给出的答案不是线程安全的，尽管我不认为 seh 对原因的描述很有帮助，而且他的替代方案更糟。说“好吧，我现在不担心多个线程”是合理的，在这种情况下，这个答案很好。但是，即使您在任何特定情况下都不需要这种保证，也能够安全地编写这些东西是很有价值的，唯一安全的方法是在 内部执行所有逻辑`swap!`，如下所示：

```
(let [m (atom {})]
  (defn get-index [token]
    (get (swap! m
                #(assoc % token (or (% token) (count %))))
         token))) 
```

`swap!`如果在调用函数时已经有一个条目，`swap!`您可以通过避免 a*来*加快这一速度在分配它之前没有当前令牌的条目`(count %)`，因为其他一些线程可能在您开始之前`swap!`（但在您决定之后`swap!`）已经潜入，并为当前令牌分配了一个值，在这种情况下您必须尊重那个任务，而不是做一个新的。

编辑：顺便说一句，Java 版本当然有同样的线程安全问题，因为默认情况下，Java 中的所有内容都是可变的而不是线程安全的。至少在 Clojure 中，你必须`!`在其中添加一个，说“是的，我知道这很危险，我知道我在做什么。”

所以从某种意义上说，Ankur 的解决方案是对 Java 代码的*完美*翻译，但更好的是改进它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:31:34.440

atom 中的单个映射就足够了：

```
(def m (atom {}))
;adding new string to map
(swap! m #(assoc %1 "Hello" (count %)))
;get an index
(@m "Hello")

(defn get-index [token] 
    (or (@m token) 
        ((swap! m #(assoc %1 token (count %))) token))) 
```

您基本上尝试将 Java 命令式代码映射到 clojure，这就是您在问题中得到该解决方案的原因。尝试从组合表达式的角度进行思考，而不是逐步思考命令式风格。

# mysql - 在 SQL 中为排名 ID 创建“平均成绩列表”

> ID：13415563
> 
> 赞同：0
> 
> 时间：2012-11-16T11:20:10.723
> 
> 标签：mysql, sql, tsql, csv, average

**问题描述**

我正在尝试为每个推荐获取一个以逗号分隔的平均成绩列表，其中包含另一个以逗号分隔的推荐内容 ID 列表。推荐是一个对象，它由将接收推荐的内容 ( `ContentID`) 和将被推荐的其他内容的列表 ( `RecommendedContentIDs`) 组成。

**表结构、样本数据和其他限制**

~~我有一个两表数据库结构。第一个表包含保存为逗号分隔的排名列表的推荐内容 ID。第二个表包含每个推荐内容 ID 的等级。排名列表最多有 10 个逗号分隔值，等级范围从 0 到 5。~~

为了更好地说明问题，以下是表结构和一些示例数据：

```
Table Recommendations

|ID    |ContentID    |RecommendedContentIDs |Type |
+------+-------------+----------------------+-----+
|1     |2051         |9706,14801,13354,...  |a    |
+------+-------------+----------------------+-----+
|67    |2051         |8103,16366,8795,...   |b    |
+------+-------------+----------------------+-----+
|133   |2051         |8795,8070,15341,...   |c    |
+------+-------------+----------------------+-----+
|22    |1234         |4782,283,33,...       |a    |
+------+-------------+----------------------+-----+
...

Table Grades

|ID    |RecommendationID |RecommendedDocumentID |Grade |EvaluatorHash|
+------+-----------------+----------------------+------+-------------+
|1     |1                |9706                  |4     |123456789    |
+------+-----------------+----------------------+------+-------------+
|2     |1                |14801                 |5     |123456789    |
+------+-----------------+----------------------+------+-------------+
|3     |1                |13354                 |3     |987654321    |
+------+-----------------+----------------------+------+-------------+
|3     |1                |9706                  |3     |987654321    |
+------+-----------------+----------------------+------+-------------+
|4     |67               |8103                  |5     |123456789    |
+------+-----------------+----------------------+------+-------------+
|1     |67               |16366                 |4     |987654321    |
+------+-----------------+----------------------+------+-------------+
|1     |133              |8795                  |2     |123456789    |
+------+-----------------+----------------------+------+-------------+
... 
```

**我已将表 Recommendations 中的 RecommendedContentIDs 列转换为一个单独的表，如下所示：**

```
Table RecommendedContent

|ID    |RecommendationID |RecommendedContentID |Rank |
+------+-----------------+---------------------+-----+
|1     |1                |9706                 |1    |
+------+-----------------+---------------------+-----+
|2     |1                |14801                |2    |
+------+-----------------+---------------------+-----+
|3     |1                |13354                |3    |
+------+-----------------+---------------------+-----+
|4     |1                |12787                |4    |
+------+-----------------+---------------------+-----+
...

+------+-----------------+---------------------+-----+
|11    |2                |19042                |1    |
+------+-----------------+---------------------+-----+
|12    |2                |13376                |2    |
+------+-----------------+---------------------+-----+
|13    |2                |9853                 |3    |
+------+-----------------+---------------------+-----+ 
```

**预期结果**

我现在想进行一个查询，该查询将返回一个结果集，该结果集包含两个对应的逗号分隔列表，以便我能够显示每个推荐内容 ID 的平均成绩。它应该看起来像这样：

```
|ContentID    |RecommendedContentIDs    |RecommendedContentAverageGrades   |Type  |
+-------------+-------------------------+----------------------------------+------+
|2051         |9706,14801,13354,...     |3.5,5.0,3.0,...                   |a     |
+-------------+-------------------------+----------------------------------+------+
|2051         |8103,16366,8795,...      |5.0,4.0,0.0,...                   |b     |
+-------------+-------------------------+----------------------------------+------+
|2051         |8795,8070,15341,...      |2.0,0.0,0.0,...                   |c     |
+-------------+-------------------------+----------------------------------+------+
... 
```

如您所见，该`RecommendedContentAverageGrades`列包含该列中每个对应 ContentID的**平均**`RecommendedContentIDs`评分（ID 为 9706 的内容被评分了两次，一次为 4，一次为 3，因此平均值为 3.5）。如果内容没有被评分，平均评分应该是0。这里真正重要的是两个逗号分隔的列表是**对应**的，因为列表中的列表`RecommendedContentIDs`是**排名**列表。

我通常会在 C# 中实现类似的东西，但我想知道它是否可以用 SQL 来完成。我正在考虑使用`GROUP_CONCAT`，但我无法获得正确的结果集。如果有人能为 MySQL 和/或 T-SQL 提供一个有效的 SQL 查询，我将非常感激，但只是建议也可以。

**编辑**

**#1** - Laurence 提到使用单独的表格而不是逗号分隔的列表。由于旧设计，我正在使用它们，我无法更改。但是，我愿意接受假设逗号分隔列表中的数据存储在单独表中的答案。

**#2** - 像 Laurence 建议的那样改变结构（使用分隔表 - 请参阅更新的结构）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:15:23.000

这只是跟进@Laurence给出的答案：

[http://sqlfiddle.com/#!2/7d236/6](http://sqlfiddle.com/#!2/7d236/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:08:52.183

更新了 Akrigg 的修复和 sql fiddle，以及如何按推荐表中的值排序还根据 brozo 的修复在 group_concat 子句中使用 order by 进行了更新：

```
Table RecommendedContent

+-----------------+----------------------+
|RecommendationID | RecommendedContentID |
+-----------------+----------------------+
| 1               | 9706                 |
| 1               | 14801                |
| 1               | 13354                |
| 67              | 8103                 |
| ...             | ...                  |
+-----------------+----------------------+

Select
  a.RecommendationID,
  a.ContentID,
  Group_Concat(a.RecommendedContentId Order By a.Rank),
  Group_Concat(Trim(Trailing '.' From Trim(Trailing '0' From a.AverageGrade)) Order By a.Rank),
  a.Type
From (
  Select
    r.RecommendationID,
    r.ContentID,
    r.Type,
    rc.RecommendedContentID,
    rc.Rank,
    Coalesce(Avg(g.Grade), 0) As AverageGrade
  From
    Recommendations r
      Left Outer Join
    RecommendedContent rc
      On r.RecommendationID = rc.RecommendationID
      Left Outer Join
    Grades g
      On rc.RecommendedContentID = g.RecommendedDocumentID And
         rc.RecommendationID = g.RecommendationID
  Group By
    r.RecommendationID,
    r.ContentID,
    r.Type,
    rc.RecommendedContentID,
    rc.Rank
  ) as a
Group By
  a.RecommendationID,
  a.ContentID,
  a.Type
Order By
  a.ContentID, -- Or other way round if that's what you prefer
  a.RecommendationID 
```

[http://sqlfiddle.com/#!2/ca8b8/8](http://sqlfiddle.com/#!2/ca8b8/8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T14:20:25.330

这是在 oracle 中完成的

```
WITH count_number AS
  (SELECT 
    ContentID,
    ','
    ||RecommendedContentIDs
    ||',' new_ContentIDs,
    RecommendedContentIDs,
    type ,
    LENGTH(RECOMMENDEDCONTENTIDS )-LENGTH(REPLACE(RECOMMENDEDCONTENTIDS ,','))+1 COUNT_ID
  FROM Recommendations
  ) ,
  RecommendedContentIDs_postion AS
  (SELECT A1.*,
    B1.CONTENTIDS_OCCURANCE_POSITION ,
    SUBSTR(new_ContentIDs,instr(new_ContentIDs,',',1,ContentIDs_OCCURANCE_POSITION)+1 , INSTR(new_ContentIDs,',',1,ContentIDs_OCCURANCE_POSITION+1)-instr(new_ContentIDs,',',1,ContentIDs_OCCURANCE_POSITION)-1) ContentIDs
  FROM count_number a1,
    (SELECT I ContentIDs_OCCURANCE_POSITION
    FROM DUAL model dimension BY (1 i) measures (0 X) (X[FOR I
    FROM 2 TO 1000 increment 1] = 0)
    ) b1
  WHERE b1.ContentIDs_OCCURANCE_POSITION<=a1.count_id
  )
SELECT 
  CONTENTID,
  WM_CONCAT(CONTENTIDS) RECOMMENDEDCONTENTIDS ,
  WM_CONCAT(GRADE) avg_grade_contentid ,
  type
FROM RECOMMENDEDCONTENTIDS_POSTION RCI,
  (SELECT RECOMMENDEDDOCUMENTID,
    AVG(GRADE) GRADE
  FROM Grades
  GROUP BY RECOMMENDEDDOCUMENTID
  ) GRD
WHERE TRIM(RCI.CONTENTIDS)=TRIM(GRD.RECOMMENDEDDOCUMENTID)
GROUP BY 
  ContentID,
  type; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T12:09:36.347

您可以在 sql server 中[创建一个自定义聚合](http://msdn.microsoft.com/en-us/library/ms182741.aspx)来执行逗号分隔的字符串连接，然后像这样使用它：

```
SELECT ContentID, RecommendedContentIDs, CustomToCsv(AvgGrade), Type FROM
(
    SELECT ContentID, RecommendedContentIDs, AVG(Grade) AvgGrade, Type 
    FROM Recommendations r INNER JOIN  Grades g ON r.ID = g.RecommendationID
    GROUP BY ContentID, RecommendedContentIDs, RecommendedDocumentID, Type
) as t
GROUP BY ContentID, RecommendedContentIDs, Type 
```

# iphone - 倒数计时器从 4 到 1 开始

> ID：13415565
> 
> 赞同：0
> 
> 时间：2012-11-16T11:20:17.823
> 
> 标签：iphone, ios, ios5, ios6, ios-simulator

当我开始玩测验时，计时器开始倒计时“4…3…2…1…”。我想在测验的第一个问题中添加这个倒计时。倒计时后显示第一个问题。

任何人都可以帮助我吗

我正在尝试这样做，但我没有得到倒计时的格式。

```
NSTimer *timer_total = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];

- (void)updateTimer
{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate_total];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    self.df_total = [[NSDateFormatter alloc] init];
    [self.df_total  setDateFormat:@"mm:ss"];
    [self.df_total setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[self.df_total stringFromDate:timerDate];
    self.lbl_total_Timer.text = timeString;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:36:33.633

你可以这样做

```
int currentTime;
- (IBAction)start{

    currentTime = 5;
    lbl=[[UILabel alloc]init];
    //creates and fires timer every second
    myTimer = [[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showTime) userInfo:nil repeats:YES]retain];
}

-(void)showTime{

    if(currentTime==0)
    {
        [myTimer invalidate];
        myTimer = nil;
    }
    else{

    currentTime--;
    lbl.text = [NSString stringWithFormat:@"%.2d", currentTime];
    }
    NSLog(@"my lable == %@",lbl.text);

}

- (void)viewWillAppear:(BOOL)animated 
{
    [self start];
    [super viewWillAppear:YES];

} 
```

# ios - UINavigationController: pushViewController – 标题越界

> ID：13415569
> 
> 赞同：0
> 
> 时间：2012-11-16T11:20:36.577
> 
> 标签：ios, ipad, uinavigationcontroller, title, pushviewcontroller

我在 UIView 中有一个导航控制器。它更小，位于左侧。当我使用该控制器推送视图时，我可以看到来自右侧的新标题，这很好，但在动画期间，标题在 UINavigationView 的边界之外可见 - 越过该视图的右边界（因为它来自显然是正确的）！您可以使用更长的标题更好地看到它。看起来无法接受。

是因为导航视图应该只在全屏上使用还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T20:37:33.400

你在哪里设置你的标题？尝试在 viewDidAppear 而不是 viewDidLoad 或 viewWillApper 中设置你的标题，我认为你会得到预期的结果。

# c# - 如何从控制台应用程序启动 kdiff？

> ID：13415570
> 
> 赞同：4
> 
> 时间：2012-11-16T11:20:41.670
> 
> 标签：c#

更新...

我想从控制台应用程序调用 kdiff。所以我正在构建两个文件，并想在执行我的程序结束时比较它们：

```
string diffCmd = string.Format("{0} {1}", Logging.FileNames[0], Logging.FileNames[1]);
// diffCmd = D:\vdenisenko\DbHelper\DbHelper\bin\Debug\Reports\16_Nov 06_30_46_DiscussionThreads_ORIGIN.txt D:\vdenisenko\DbHelper\DbHelper\bin\Debug\Reports\16_Nov 06_30_46_DiscussionThreads_ORIGIN.txt
System.Diagnostics.Process.Start(@"C:\Program Files (x86)\KDiff3\kdiff3.exe", diffCmd);

//specification is here http://kdiff3.sourceforge.net/doc/documentation.html 
```

它运行 kdiff3 工具，但文件名或命令有问题...请您查看屏幕截图并说出问题所在？ ![在此处输入图像描述](../Images/cac99ae45d6261d9164f788462c0dfd9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:24:35.630

您需要使用`Process.Start()`：

```
string kdiffPath = @"c:\Program Files\Kdiff3.exe"; // here is full path to kdiff utility
string fileName = @"d:\file1.txt";
string fileName2 = @"d:\file2.txt";

Process.Start(kdiffPath,String.Format("\"{0}\" \"{1}\"",fileName,fileName2)); 
```

文档中描述的参数：`kdiff3 file1 file2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:26:15.857

```
var args = String.Format("{0} {1}", fileName, fileName2);
Process.Start(kdiffPath, args); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:22:41.840

这将从您的控制台应用程序运行程序

```
Process p = new Process();
p.StartInfo.FileName = kdiffPath;
p.StartInfo.Arguments = "\"" + fileName + "\" \"" + fileName2 + "\""; 
p.Start(); 
```

除非您尝试做其他事情，在这种情况下您需要提供更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:25:04.160

```
string kdiffPath = @"c:\Program Files\Kdiff3.exe"; // here is full path to kdiff    utility
string fileName = @"d:\file1.txt";
string fileName2 = @"d:\file2.txt";    

ProcessStartInfo psi = new ProcessStartInfo(kdiffPath);
psi.RedirectStandardOutput = true;
psi.WindowStyle = ProcessWindowStyle.Hidden;
psi.UseShellExecute = false;
psi.Arguments = fileName +  " " + fileName2;
Process app = Process.Start(psi);

StreamReader reader = app.StandardOutput;

//get reponse from console app in your app
do
{
    string line = reader.ReadLine();
}
while(!reader.EndOfStream);

app.WaitForExit(); 
```

# c++ - 删除动态数组但保留指针

> ID：13415572
> 
> 赞同：1
> 
> 时间：2012-11-16T11:20:47.640
> 
> 标签：c++, arrays, pointers

我做了一个扩展数组的函数，这个函数在一个类中。

因为这个函数创建`new_arr`并复制所有的数字`array`到`new_arr`最后设置指针`array`with `new_arr`，我想知道如何删除数字，`array`因为我不再需要它了

```
void Array::bigger() {
    int  new_size = size * 2;
    int *new_arr = new int[new_size];
    for (int f1=0; f1<last; f1++) {
        new_arr[f1] = array[f1];
    }
    this->size = new_size;
    array = new_arr;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:22:32.820

假设这是一个练习，然后在重新分配给新数组之前删除数组：

```
delete [] array;
array = new_arr; 
```

在实际代码中，使用 an`std::vector<int>`而不是动态分配的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:22:30.277

在丢失指向它的指针之前释放内存：

```
void Array::bigger() {
    int  new_size = size * 2;
    int *new_arr = new int[new_size];
    for (int f1=0; f1<last; f1++) {
        new_arr[f1] = array[f1];
    }
    this->size = new_size;
    delete[] array; //free memory
    array = new_arr;
} 
```

# java - 如何在Java中提取多项式系数？

> ID：13415573
> 
> 赞同：2
> 
> 时间：2012-11-16T11:20:54.163
> 
> 标签：java, string, text-parsing, polynomial-math

以字符串`-2x^2+3x^1+6`为例，如何提取`-2`，`3`并`6`从这个等式中存储到字符串中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T11:32:10.177

没有给出确切的答案，但有一些提示：

*   使用[替换](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replace)方法：

    全部替换`-`为`+-`.

*   使用[拆分](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replace)方法：

    ```
    // after replace effect
    String str = "+-2x^2+3x^1+6"
    String[] arr = str.split("+");
    // arr will contain: {-2x^2, 3x^1, 6} 
    ```

*   现在，每个索引值都可以单独拆分：

    ```
    String str2 = arr[0];
    // str2 = -2x^2;
    // split with x and get vale at index 0 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:30:57.560

```
 String polynomial= "-2x^2+3x^1+6";
    String[] parts = polynomial.split("x\\^\\d+\\+?");
    for (String part : parts) {
        System.out.println(part);
    } 
```

这应该有效。样本输出

```
polynomial= "-2x^2+3x^1+6"
Output:
-2
3
6 
polynomial = "-30x^6+20x^3+3"
Output:
-30
20
3 
```

# c# - 如何使用正则表达式将小写字母替换为大写字母？

> ID：13415576
> 
> 赞同：0
> 
> 时间：2012-11-16T11:21:03.243
> 
> 标签：c#, regex

我有一个全小写的字符串 a 。我尝试使用以下表达式将小写字母替换为大写字母，但它无法按我的意愿工作。如何将字符串a中的小写字母变成大写字母？

```
using System.Text.RegularExpressions;

string a = "pieter was a small boy";
a = Regex.Replace(a, @"\B[A-Z]", m => " " + m.ToString().ToUpper()); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T12:19:57.210

你在这里有两个问题：

1.  您的模式需要使用`\b`而不是`\B`. 有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/6664151/difference-between-b-and-b-in-regex)。
2.  由于您的字符串是小写的，并且您的模式只匹配大写 ( `[A-Z]`)，您需要使用它`RegexOptions.IgnoreCase`来使您的代码正常工作。

* * *

```
string a = "pieter was a small boy";
var regex = new Regex(@"\b[A-Z]", RegexOptions.IgnoreCase);
a = regex.Replace(a, m=>m.ToString().ToUpper()); 
```

上述代码的输出是：

```
Pieter Was A Small Boy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:22:52.890

如果您尝试将字符串中的所有字符转换为大写，那么只需执行[string.ToUpper()](http://msdn.microsoft.com/en-us/library/ewdd6aed.aspx)

```
string upperCasea = a.ToUpper(); 
```

如果要进行不区分大小写的替换，请使用[`Regex.Replace Method (String, String, MatchEvaluator, RegexOptions)`](https://msdn.microsoft.com/en-us/library/ms149475(v=vs.110).aspx)：

```
a = Regex.Replace(a, 
                  @"\b[A-Z]", 
                  m => " " + m.ToString().ToUpper(), 
                  RegexOptions.IgnoreCase); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:23:57.017

根据需要使用正则表达式，

```
a = Regex.Replace(a, @"\b[a-z]", m => m.ToString().ToUpper()); 
```

[资源](https://stackoverflow.com/a/3235446/1577396)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T11:24:30.027

```
Regex.Replace(inputStr, @"[^a-zA-Z0-9_\\]", "").ToUpperInvariant(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-16T11:25:11.517

它对你很好：

```
string a = "pieter was a small boy";
a = a.ToUpper(); 
```

# android - 使用 ServiceTestCase 访问 JUnit 的资源

> ID：13415582
> 
> 赞同：1
> 
> 时间：2012-11-16T11:21:49.000
> 
> 标签：android, service, junit

有谁知道从扩展时如何访问 JUnit 自己的项目`res/`文件夹编译`R`实例[`ServiceTestCase`](http://developer.android.com/reference/android/test/ServiceTestCase.html)？

通常的方法不起作用：

```
getInstrumentation().getContext().getResources()... 
```

因为事实证明`ServiceTestCase`没有一个`getInstrumentation()`因为它没有扩展[`InstrumentationTestCase`](http://developer.android.com/reference/android/test/InstrumentationTestCase.html)方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:43:57.230

这个*hack*适用于我的`ServiceTestCase`子类：

```
Context context = getContext().createPackageContext(this.getClass().getPackage().getName(),
                   Context.CONTEXT_IGNORE_SECURITY);
context.getResources()... 
```

尽管欢迎使用更标准的方法。

# java - 更改 JLabel 的文本 - 初学者

> ID：13415584
> 
> 赞同：3
> 
> 时间：2012-11-16T11:21:55.913
> 
> 标签：java, swing, jlabel

我的代码；

```
package com.test;

import java.awt.EventQueue;

public class TestGU {

    private JFrame frame;
    private JLabel la;

    /**
     * Launch the application.
     */
    public  void mainM() {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TestGU window = new TestGU();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public void redefine(String text){
         la.setText(text);
    frame.repaint(); 

    }

    /**
     * Create the application.
     */
    public TestGU() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 450, 300);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        la = new JLabel("New label");
        frame.getContentPane().add(null);
    }

} 
```

我正在尝试从如下所示的主要方法（这是一个单独的类）更改标签的文本；

```
public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {

        TestGU g = new TestGU();
        g.mainM();
        g.redefine("New Value");
}
} 
```

1.) 执行 main 方法时，我希望标签有文本“新值”，但它仍然包含文本`New label`。什么都没有改变，我该如何纠正这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:28:45.460

看起来您正在创建两个实例，`TestGU`并且您的`redefine`方法更改了未显示实例上标签的值。

现在只是检查我的理论....

编辑：
您不需要创建第二个实例；你的 mainM 方法应该是；

```
public void mainM() {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
} 
```

PS - 我假设你的初始化方法实际上有这条线，对吗？

```
frame.getContentPane().add(la); 
```

而不是`add(null)`因为那根本不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:38:37.773

看看这个例子的想法。

![测试GU](../Images/dfe443069d8818c9ce69ad0f067a0f94.png)

```
import java.awt.EventQueue;
import javax.swing.*;

public class AnotherClass {

   public static void main(String[] args) {

        Runnable r = new Runnable() {
            public void run() {
               TestGU g = new TestGU();
               g.redefine("New Value");
            }
        };
        EventQueue.invokeLater(r);
    }
}

class TestGU {

    private JFrame frame;
    private JLabel la;

    public void redefine(String text){
         la.setText(text);
    }

    /**
     * Create the application.
     */
    public TestGU() {
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        la = new JLabel("New label");
        frame.getContentPane().add(la);
        frame.pack();
        frame.setVisible(true);
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T13:22:00.147

永远不要将 JFrame 用作顶级容器。

添加到 JFrame 的组件未注册以供 AWTEvent 队列侦听。

因此，您的 setText() 不会为要重新绘制的组件创建适当的事件。

```
setContentPane( new JPanel(){{ add(la); }} ); 
```

它会按预期工作，无需调用任何绘制/重绘方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T11:33:36.567

您创建了 2 个实例`TestGU`（1 in`Test`和 1 in `mainM()`in `TestGU`），只有 1 个可见。`mainM()`将您的方法更改为：

```
/**
 * Launch the application.
 */
public void mainM() {
    this.frame.setVisible(true);
} 
```

# android - 如何处理左右滑动

> ID：13415585
> 
> 赞同：1
> 
> 时间：2012-11-16T11:22:02.607
> 
> 标签：android, events

我有一个列表视图，其中包含联系电话作为项目。

我希望当用户在联系人上执行左滑（向左交换）时，应用程序将开始呼叫该联系人。

我想知道如何处理/检测在联系人上向左滑动和向右滑动，以及如何检测在列表视图滑动事件的哪个项目上执行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:25:48.760

有一个关于[在 Android 中处理手势](http://misha.beshkin.lv/android-swipe-gesture-implementation/)的教程。核实！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:36:52.473

使用该`onFling()`方法来检测滑动，并且就检测到特定列表项的滑动而言，您必须提供自己的方法`adapter`并覆盖它的`getView()`方法。
例如

```
public class My_simple_adapter extends ArrayAdapter<String> //THIS IS THE CUSTOM ADAPTER
{
 private final Context context;
 private final String[] values;

 public My_simple_adapter(Context context,String[] values,int[] pos)
 {
  super(context,R.layout.list_item,values);
  this.context=context;
  this.values=values;

 }

 @Override
 public View getView(int position,View convert_view,ViewGroup parent)
 {
  LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View rowView = inflater.inflate(R.layout.MY_LAYTOUT, parent, false);
   // THE ABOVE MY_LAYOUT IS THE LAYOUT YOU WANT TO LOAD FOR EACH ROW OF THE LISTVIEW
  TextView textView = (TextView) rowView.findViewById(R.id.tv1);
  textView.setText(values[position]);

  //SUPPOSE rlt IS THE ID OF THE ABOVE MY_LAYOUT
  //then
  rlt.setOnTouchListener(new View.OnTouchListener()
         {
                public boolean onTouch(View view, MotionEvent event) {
                    Log.d("test", "clicked!");
                    if(gestureDetector.onTouchEvent(event))  {
                        Log.d("test", "gesture detected");
                        return true;
                    }

                    return false;
                }
            });

  return  rowView;
 }
} 
```

这是**手势检测器**：

```
 SimpleOnGestureListener simpleOnGestureListener
       = new SimpleOnGestureListener(){
  @Override
     public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
       float velocityY) {
                boolean result;
              //DECIDE UNDER WHAT SPEED OF SWIPING U WANT TO MAKE THE CALL
                ...
                ...
           return result;
     }

  @Override
  public boolean onDown(MotionEvent e)
  {

     return true;
  }

       };
//AND FINALLY

    final GestureDetector gestureDetector
           = new GestureDetector(simpleOnGestureListener); 
```

# python - 尝试编写“to_class”通用装饰器

> ID：13415592
> 
> 赞同：4
> 
> 时间：2012-11-16T11:22:21.517
> 
> 标签：python, decorator, python-decorators

假设我已经定义：

```
def to_class(cls):
  """ returns a decorator
  aimed to force the result to be of class cls. """
  def decorating_func(func):
    def wrapper(*args, **kwargs):
      return cls(func(*args, **kwargs))
    return wrapper
  return decorator(decorating_func) 
```

我希望用它来创建装饰器，将函数结果转换为给定类的对象。但是，这不起作用：

```
class TestClass(object):
  def __init__(self, value):
    self._value = (value, value)

  def __str__(self):
    return str(self._value)

  @staticmethod
  @to_test_class
  def test_func(value):
    return value

to_test_class = to_class(TestClass) 
```

因为 test_func 将寻找 to_test_class 并且不会找到它。另一方面，在类定义之前将赋值给 to_test_class 也会失败，因为尚未定义 TestClass。

尝试将 @to_class(TestClass) 放在 test_func 的定义之上也会失败，因为该方法是在类之前构造的（如果我没记错的话）。

我发现的唯一解决方法是将 to_test_class 手动定义为装饰器，而不是从一般的“to_class”定义返回。

值得一提的是，这只是一个基本示例，但我希望将 to_class 用于许多应用程序，例如在将返回值“插入”到类的构造函数之前对其进行修改；我也希望将它用作其他类方法的装饰器。

我相信有些人认为“to_class”装饰器毫无意义；相反，可以在装饰方法中进行操作。不过，我觉得它很方便，并且有助于提高可读性。

最后，我想补充一点，20% 是出于实际原因，80% 是出于学习原因，因为我发现这是我对 Python 中的装饰器一般不完全理解的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:33:17.290

事实上，在类构建时，类对象本身还没有被构建，因此你不能将它用作装饰器的基础。

我能想到的一种解决方法是*不*使用`staticmethod`装饰器。相反，在您自己的装饰器*内部*，重新使用`classmethod`装饰器。这样，您可以确保 Python 至少为您传递相关的类：

```
def to_class(func):
    """ returns a decorator
    aimed to force the result to be of class cls. """
    def wrapper(cls, *args, **kwargs):
        return cls(func(*args, **kwargs))
    return classmethod(wrapper) 
```

然后像这样使用它：

```
class TestClass(object):
    def __init__(self, value):
        self._value = (value, value)

    def __str__(self):
        return str(self._value)

    @to_class
    def test_func(value):
        return value 
```

示范：

```
>>> def to_class(func):
...     """ returns a decorator
...     aimed to force the result to be of class cls. """
...     def wrapper(cls, *args, **kwargs):
...         return cls(func(*args, **kwargs))
...     return classmethod(wrapper)
... 
>>> class TestClass(object):
...     def __init__(self, value):
...         self._value = (value, value)
...     def __str__(self):
...         return str(self._value)
...     @to_class
...     def test_func(value):
...         return value
... 
>>> TestClass.test_func('foo')
<__main__.TestClass object at 0x102a77210>
>>> print TestClass.test_func('foo')
('foo', 'foo') 
```

装饰器的通用版本并不容易；解决您的难题的唯一*其他*解决方法是使用元类黑客；请参阅我的[另一个答案，](https://stackoverflow.com/questions/13323146/how-does-the-function-that-is-called-inside-the-class-declaration/13330660#13330660)其中我更详细地描述了该方法。

您基本上需要进入类正在构建的命名空间，设置一个临时元类，然后在您的装饰器工作之前*依赖该类的至少一个实例*；临时元类方法与类创建机制挂钩，以便稍后检索构造的类。

但是，当您将此装饰器用作替代类工厂时，这可能*并不*理想；如果有人使用您的修饰函数专门创建类实例，则调用元类为时已晚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T11:35:54.313

好吧，你忘记了 class 是传递给使用 classmethod 修饰的方法的第一个参数，所以你可以这样写：

```
def to_this_class(func):
    def wrapped(cls, value):
        res = func(cls, value)
        return cls(res)
    return wrapped

class TestClass(object):
    def __init__(self, value):
        self._value = (value, value)

    def __str__(self):
        return str(self._value)

    @classmethod
    @to_this_class
    def test_func(cls, value):
        return value

x = TestClass('a')

print x.test_func('b') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:33:08.520

问题是装饰器在*定义*它所装饰的东西时被评估，所以在定义方法时`test_func()`，装饰器`to_test_class`被调用，即使它已经存在，它应该处理的东西（类`TestClass`）还不存在（因为这个在创建所有方法*之后创建）。*

也许您可以在使用类的位置使用占位符，然后（在创建类之后）在占位符处填充该值（类）。

例子：

```
lazyClasses = {}
def to_lazy_class(className):
  """ returns a decorator
  aimed to force the result to be of class cls. """
  def decorating_func(func):
    def wrapper(*args, **kwargs):
      return lazyClasses[className](func(*args, **kwargs))
    return wrapper
  return decorating_func 

class TestClass(object):
  def __init__(self, value):
    self._value = (value, value)

  def __str__(self):
    return str(self._value)

  @staticmethod
  @to_lazy_class('TestClass')
  def test_func(value):
    return value

lazyClasses['TestClass'] = TestClass

>>> TestClass.test_func('hallo')
<__main__.TestClass object at 0x7f76d8cba190> 
```

# mysql - 在没有子查询的情况下选择同一列中具有不同值和另一列中具有不同值的记录

> ID：13415608
> 
> 赞同：2
> 
> 时间：2012-11-16T11:23:23.650
> 
> 标签：mysql, sql, select

我有这张桌子：

```
item        year
----        ----
1           1999 
2           1999
3           1999 
2           2000 
4           2000 
2           2001
3           2001
4           2001
5           2001 
```

我需要这个结果（选择 1999）

```
item        year
----        ----
4           2000
4           2001
5           2001 
```

总而言之，我需要获取不在 1999 年但在另一个不同年份定义的新项目（这是为了稍后在另一个查询中添加它们）。

我使用的是旧的 MySQL 版本，我**无法使用 subqueries**。有没有兼容的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:34:40.830

这样的事情怎么办

```
SELECT t1.item, t1.year from table as t1
LEFT JOIN table as t2 ON t2.item = t1.item AND t2.year = 1999
WHERE t2.item IS NULL 
```

在“英语”中，它的意思是，从我的表中选择所有项目。然后为每个项目尝试查找它们是否在 1999 年的表中，否则设置为 NULL。然后你只需要说“将没有匹配元素的元素保留在 t2.

不确定我的解释是否更好

编辑：您当然需要替换`table`为您自己的表的名称。我在一个小例子上对其进行了测试，它似乎有效。

EDIT2：如果您查看 LEFT JOIN 的结果，您会得到这样的结果：

```
t1.item     t1.year    t2.item     t2.year
----        ----       ----        ----       
1           1999       1           1999
2           1999       2           1999
3           1999       3           1999
2           2000       2           1999
4           2000       NULL        NULL
2           2001       2           1999
3           2001       3           1999
4           2001       NULL        NULL
5           2001       NULL        NULL 
```

然后，如果您添加`WHERE t2.item IS NULL`，则只保留表中没有 1999 年的那些。这是更好的理解方式吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:46:27.557

```
select t2.item, t2.year
from mytable t1
left join mytable t2 
    on t2.year > t1.year 
    and t2.item != t1.item
where t1.year = 1999
and t2.item is null 
```

# iphone - 如何在iphone中使用'string'变量作为'objectForkey'

> ID：13415609
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:23:24.337
> 
> 标签：iphone, ios, xcode

我想使用字符串作为`objectForkey`. 我的代码行是这样的。

我想用“strend”作为一个`objectForkey`，但它没有用。

代码是：

```
NSString *strend = [[NSString alloc] initWithFormat:@"%@",[[detwec.arrdetails objectAtIndex:0]valueForKey:@"EndDate"]];

NSString *dateString = [[NSString alloc]initWithFormat:@"%@",[_currentItemValue objectForKey:@"strend" ]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:27:57.053

尝试替换此行

```
NSString *dateString = [[NSString alloc]initWithFormat:@"%@",[_currentItemValue objectForKey:@"strend" ]]; 
```

这样

```
NSString *dateString = [[NSString alloc]initWithFormat:@"%@",[_currentItemValue objectForKey:strend]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:30:23.463

你可以试试

```
NSString *strend = [NSString stringWithFormat:@"%@",[detwec.arrdetails objectAtIndex:0]valueForKey:@"EndDate"];

NSString *dateString = [NSString stringWithFormat:@"%@",[_currentItemValue objectForKey:@"strend" ]]; 
```

要不然

```
NSString *dateString = [_currentItemValue objectForKey:@"strend" ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:44:52.140

NSString *strend = [NSString stringWithFormat:@"%@",[detwec.arrdetails objectAtIndex:0]]; NSUserDefaults *storeData=[NSUserDefaults standardUserDefaults];
[storeData setObject:strend forKey:@"strend"];
NSString *dateString = [storeData objectForKey:@"strend"];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:28:50.283

如果要使用字符串作为键读取值，可以使用：

```
NSString *value = ["Your Dictionary" objectForKey:strend]; 
```

检查你的 NSString *strend 不应该是“nil”，否则不会给你任何价值。

# c# - 将子类列表合并到父类列表

> ID：13415613
> 
> 赞同：5
> 
> 时间：2012-11-16T11:23:39.017
> 
> 标签：c#, linq, c#-4.0

我有一个父类 X 和两个子类 X1 和 X2 的列表（X1 和 X2 派生自 X）。有没有一种简单的方法可以将 X1 和 X2 的列表组合成 Xs 的列表？
我可以遍历 X1 和 X2 的列表，然后将其添加到 X 的列表中，但这似乎有点麻烦。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:25:38.043

LINQ 可以方便地做到这一点

```
var both = list1.Cast<X>().Concat(list2.Cast<X>()).ToList(); 
```

或与

```
var both = ((IEnumerable<X>)list1).Concat((IEnumerable<X>)list2).ToList(); 
```

但它仍然在循环——就在幕后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:26:29.050

使用[Enumerable.Cast](http://msdn.microsoft.com/ru-ru/library/bb341406.aspx)方法，如下所示：

```
var list1 = new List<X1>();
var list2 = new List<X2>();
var result = list1.Cast<X>().Concat(list2.Cast<X>()).ToList(); 
```

# actionscript-3 - as3 如何创建 DropDownList（无 XML）

> ID：13415616
> 
> 赞同：-1
> 
> 时间：2012-11-16T11:23:48.640
> 
> 标签：actionscript-3

我是 AS3 的新手，我正在做一些简单的 UI。我想创建一个带有几个选项的下拉列表。我已经阅读了很多包含数百行用于制作下拉列表的教程。真的吗？一百行的下拉列表？我只想创建一种简单的 HTML SELECT。如果您知道也可以使用的教程。

对于这种问题，我真的很抱歉，但我真的找不到任何用 as3 写的东西。

我已经检查了 adobe 给出的那个是它的页面[adobe 参考 DropDownList](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/DropDownList.html)但该示例使用 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:43:57.323

基于纯 AS3 的类：

```
package
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.events.TimerEvent;
    import flash.utils.Timer;

    import com.greensock.*;
    import com.greensock.easing.*;

    public class MouseOverMenu extends MovieClip {

        public var _sMouseOver:MovieClip;
        public var _sMenu:MovieClip;

        private var _menuTimer:Timer;
        private var _menuOpen:Boolean = false;

        public function MouseOverMenu():void {
            addEventListener(Event.ADDED_TO_STAGE, init, false, 0, true);
        }

        private function init(e:Event):void {

            _sMouseOver.buttonMode = true;
            _sMouseOver.addEventListener(MouseEvent.MOUSE_OVER, showMenu, false, 0, true);
            _sMouseOver.addEventListener(MouseEvent.MOUSE_OUT, startClose, false, 0, true);
            _sMouseOver.addEventListener(MouseEvent.MOUSE_OVER, cancelClose, false, 0, true);

            _menuTimer = new Timer( 50 );
            _menuTimer.addEventListener ( TimerEvent.TIMER, doCloseMenu );

            _sMenu.visible = false;
            _sMenu.alpha = 0;
            _sMenu.addEventListener(MouseEvent.MOUSE_OUT, startClose, false, 0, true);
            _sMenu.addEventListener(MouseEvent.MOUSE_OVER, cancelClose, false, 0, true);
        }
        private function showMenu(e:MouseEvent):void {
            _menuOpen = true;
            _sMenu.visible = true;
            TweenLite.to(_sMenu, .5, {y:73, alpha:1});
        }
        private function startClose ( e:Event ):void {
            //trace('startClose ' + e.target);
            _menuTimer.start();
        }
        private function cancelClose ( e:Event ):void {
            //trace('cancelClose ' + e.target);
            _menuTimer.stop();
        }
        private function doCloseMenu ( e:Event ) {
            closeMenu();
        }
        private function closeMenu ():void {
            if ( _menuOpen ) {
                TweenLite.to(_sMenu, .5, {y:50, alpha:0, onComplete: hideMenu});
            }
            _menuTimer.stop();
            _menuOpen = false;
        }
        private function hideMenu():void {
            _sMenu.visible = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:44:49.107

我没有看到您提到的示例中使用了 XML，无论如何这是 Flex 中使用 arrayCollection 的 Dropdownlist 的简单代码。

```
 <?xml version="1.0" encoding="utf-8"?>
    <!-- http://blog.flexexamples.com/2009/03/07/using-the-dropdownlist-in-flex-gumbo/ -->
    <s:Application name="Spark_DropDownList_test"
            xmlns:fx="http://ns.adobe.com/mxml/2009"
            xmlns:s="library://ns.adobe.com/flex/spark"
            xmlns:mx="library://ns.adobe.com/flex/mx">
        <s:layout>
            <s:BasicLayout />
        </s:layout>

        <s:DropDownList id="dropDownLst"
                requireSelection="true"
                horizontalCenter="0" top="20">
            <s:dataProvider>
                <s:ArrayList source="[The,quick,brown,fox,jumps,over,the,lazy,dog]" />
            </s:dataProvider>
        </s:DropDownList>

    </s:Application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T13:42:13.283

如果您不想使用 MXML，可以通过代码来完成：

```
yourDropDownInstance.dataProvider = new ArrayCollection(["The","quick",
                                                         "brown","fox",
                                                         "jumps","over",
                                                         "the","lazy","dog"]); 
```

# iphone - 当您有不同屏幕尺寸的静态背景图像时，如何使用自动布局？

> ID：13415623
> 
> 赞同：0
> 
> 时间：2012-11-16T11:24:12.910
> 
> 标签：iphone, objective-c, cocoa-touch, interface-builder, autolayout

我有一个具有不同静态背景图像的通用应用程序

1.  iPhone 4,4S
2.  iphone 5
3.  iPad

这个静态背景图像非常具体（它不是纹理或纯色，有些视觉元素需要始终位于左侧等），但我所有位于其顶部的按钮和标签都可以灵活（因此我想使用自动布局）。

该应用程序仅支持横向。

当我有 3 个不同的 XIB 时，使用自动布局的最佳方式是什么？

我想巩固代码库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:41:47.870

如果这三种设备的布局唯一不同的是背景图像，那么您应该将它们全部放在一个使用自动布局正确响应屏幕大小的 xib 中。

然后给持有背景图片的UIImageView设置一个IBOutlet，或者给背景颜色为图片的UIView设置一个IBOutlet，在启动时检测屏幕尺寸后在代码中设置图片。

# python-2.7 - 如何在 Python 中连接基于 MAMP 的 MYSQL？

> ID：13415626
> 
> 赞同：2
> 
> 时间：2012-11-16T11:24:22.243
> 
> 标签：python-2.7, mamp, mysql-python

我最近通过 Macport 将我的 Macbook 上的 Python 升级到了 2.7，最终我也不得不升级 MySQL 驱动程序。我试图通过 Macport 安装它，但那个人也安装了另一个 MySQL 服务器副本。我想在 Python 中使用基于 MAMP 的 MYSQL。连接时出现错误：

**_mysql_exceptions.OperationalError: (2002, "Can't connect to local MySQL server through socket '/opt/local/var/run/mysql5/mysqld.sock'**

我如何指出基于 MAMP 的 MySQL？

谢谢

# .net - 时区转换问题.Net Dataset WebService

> ID：13415629
> 
> 赞同：1
> 
> 时间：2012-11-16T11:24:33.070
> 
> 标签：.net, web-services, dataset, data-conversion

我正在访问.net 中的 Web 服务，它返回一个数据集。

查看来自 web 服务的 xml，它显示的日期如下

```
2012-11-16T00:00:00-05:00 
```

我的电脑时区是 GMT+1，您可以从 XML 中看到日期为 -5

我在 VS2005 中使用了一个 webreference，它给了我一个数据集。

当我查看数据集中的日期时，它说它是 05:00

我期待 00:00 的值，但不确定转换的正确方法。

我可以简单地减去 5 小时，但不确定当夏令时再次更改时会保持不变。

我做了很多谷歌搜索，在使用 datareader 以及如何修复它时发现了类似的问题，但是没有人谈论当它被序列化为整个数据集时该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:29:08.280

XML 提供*本地*值，即 2012-11-16T05:00:00Z。听起来反序列化正在将其转换为`DateTime`UTC 格式...检查您所拥有的[`Kind`](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)属性`DateTime`...如果是，`Utc`那么这一切都是有道理的，并且您将获得XML*中表示的正确时间*.

目前尚不清楚您的期望是什么，或者发布的数据是什么，或者您真正需要从中获得什么价值。如果您可以将反序列化代码更改为使用`DateTimeOffset`而不是`DateTime`，那将保留这两条信息。

# ms-access-2007 - 如何在msaccess中按月份和年份的降序日期列排序？

> ID：13415631
> 
> 赞同：0
> 
> 时间：2012-11-16T11:24:43.040
> 
> 标签：ms-access-2007, ms-access-2003

我希望按月度新问题显示的顺序应该从列表的最新顶部到列表底部的最旧，例如 2049 年 11 月、2049 年 8 月、2046 年 12 月、2046 年 10 月、2046 年 3 月、2012 年 11 月、2012 年 10 月、2012 年 9 月……</p >

我尝试了以下查询：

```
select format(newissue,"yyyy"),newissue  from (SELECT distinct format(dateofissue,"mm/yyyy") as newissue from products order by format(dateofissue,"mm/yyyy") )order by format(newissue,"yyyy") desc 
```

并得到以下结果。

```
Query Result   Expected result what i need
------------   ----------------------------
November 2049   November 2049 
August 2049     August 2049
march 2046      December 2046
October 2046    October 2046
December 2046   March 2046 
```

请帮助我，以获得所需的查询输出。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:28:22.450

你的意思是：

```
select distinct format(dateofissue,"mmmm yyyy")
from products 
order by dateofissue desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:48:47.767

> 选择格式（新发行，'yyyy'）作为发行日期1，新发行作为发行日期2，格式（新发行，'mmmm yyyy'）作为发行日期3从（选择不同的格式（发行日期，'mm/yyyy'）作为新发行的产品订单按格式（发行日期,'mm/yyyy') ) 按格式排序(newissue,'yyyy') desc ,format(newissue,'MM') desc

# c# - 在 4 字节内存中存储 16 字节字符串数组，（压缩）在 RFID 标签中

> ID：13415633
> 
> 赞同：1
> 
> 时间：2012-11-16T11:24:55.800
> 
> 标签：c#, .net

我希望这个问题不会产生一些模糊性。实际上，我正在从事 RFID 项目，并且正在使用无源标签。这些标签仅存储 4 个字节的数据，32 位。我正在尝试将更多信息存储在 Tag 数据库中的 String 中。我在互联网上搜索了字符串压缩算法，但没有找到合适的。有人请指导我解决这个问题。我怎样才能在这个 4 字节的数据库中保存更多的数据，我应该使用其他一些策略来存储，如果是，那怎么办？此外，我在 Handheld Window CE 设备上使用 C#。

如果有人可以帮助我，我将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:52:48.237

这取决于您的标签，例如外星人标签[http://www.alientechnology.com/docs/products/Alien-Technology-Higgs-3-ALN-9662-Short.pdf](http://www.alientechnology.com/docs/products/Alien-Technology-Higgs-3-ALN-9662-Short.pdf) ，有 EPC 内存，我认为您使用 EPC内存，但您也可以在标签中使用用户内存。您不必压缩任何东西，只需使用您的用户内存。此外，从技术上讲，我宁愿不在我的标签上保存很多数据，我在 32 位上使用我自己的编码并将其关联（映射）到我的软件上的更多数据，并将我的数据保存在我的硬盘上。它也更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:28:01.797

压缩方案无法保证如此高的压缩比。

我能想到的使用 32 位的唯一方法是将 an 存储`int`在 32 位中，并从中构造一个**本地/远程 URL**，它指向实际数据。

您还可以指出设备上**本地查找表**`stored value`中的条目。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:28:14.963

显然没有压缩可以将任意 16 字节值减少到 4 字节值。这在数学上是不可能的，详情请查看[Pidgeonhole 原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)。

将实际数据存储在某种数据库中。让 4 个字节编码一个整数，作为您要引用的行的键。例如，通过使用自增主键或数组索引。适用于多达 40 亿行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:28:20.060

如果您的字符串少于 2^32 个，只需枚举它们，然后将字符串索引（在您的“字典”中）保存在 4 字节“数据库”中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T11:33:37.177

除非您对字符串的格式非常了解，否则不可能做到这一点。这从[鸽笼原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)中可以看出：理论上你有 2^128 个不同的 16 字节字符串，但只有 2^32 个不同的值可供选择。

换句话说，没有压缩算法可以保证您可能的输入集中的任意字符串将映射到输出集中的 4 字节值。

可以设计一种适用*于您的特定情况*的算法，但除非您的数据集受到足够的限制（最多 79,228,162,514,264,337,593,543,950,336 个可能的字符串中的 1 个可能是有效的）*并且*具有有意义的结构，那么您唯一的选择是存储一些对外映射。**

# jquery - jquery循环淡入淡出即jpg图像

> ID：13415636
> 
> 赞同：0
> 
> 时间：2012-11-16T11:25:03.880
> 
> 标签：jquery, jquery-cycle

jquery 循环插件的奇怪问题。在除 IE8 之外的所有浏览器中都能正常工作。图像在过渡期间消失。我已经看到 png 图像可能存在问题，但我的图像都是 jpg。它们在 html 中就像：`<div><div><img src="img1"></div><div><img src="img2"></div></div>` 也许是因为每个图像都在 div 中？我必须有这些 div，所以如果这导致了问题，有什么解决办法吗？

```
$('#mainFitScreenBack').cycle({
    timeout: 1000,
    speed:  1000,
    cleartypeNoBg:true,
    delay: -1000

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:43:23.907

虽然因为你给出了答案所以有些多余，但是对于IE你需要采取具体措施。

也就是IE8或更早的版本

```
width
height 
```

如果你想要一些灵活的东西，请使用 v2。

[http://jquery.malsup.com/cycle2/demo/basic.php](http://jquery.malsup.com/cycle2/demo/basic.php)

# codeigniter - Codeigniter 数据库结果实例类位置和类名

> ID：13415637
> 
> 赞同：0
> 
> 时间：2012-11-16T11:25:09.230
> 
> 标签：codeigniter

我最近了解到您可以为 提供一个类名，`Query->result()`它将使用它来实例化结果，而不是使用 plain `stdClass`。[更多在这里](http://codeigniter.com/user_guide/database/results.html#content)

我的第一次尝试是将`application/models/classes`它们命名为与模型相同的名称，但没有`_model`后缀。所以我会有一个从数据库`Posts_model`返回实例。`Post`但问题是我也有一个名为的控制器`Post`，显然 PHP 会引发致命错误。

*所以问题是*：对于将这些类放在哪里以及如何命名它们是否有约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:32:00.367

就 Codeigniter 而言，没有任何约定，内置的加载器有点不适合只包含文件而不实例化它们。我建议集成一些[psr-0 兼容的自动加载器。](http://www.php-fig.org/psr/psr-0/)

与大多数 mvc Web 框架一样，它们通常使用复数形式的控制器和单数形式的模型。例如：`Users`是控制器，`User`是模型。

# android - 在索尼 xperia 中获取相机实例

> ID：13415641
> 
> 赞同：2
> 
> 时间：2012-11-16T11:25:30.970
> 
> 标签：android, android-camera

我开发了一个应用程序，它使用表面视图通过前置摄像头捕获图像。它在索尼手机以外的其他手机上运行良好。
索尼手机的日志猫说

> *权限失败*：**com.sonyericsson.permission.CAMERA_EXTENDED**

我也包含了这个权限，但它不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:36:11.497

此权限失败只是一个警告；不过，它可能会阻止使用更高的分辨率。首先尝试 320x240，如果尝试失败，请发布更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T12:21:58.740

对于那些使用 API 21 中引入的新相机 HAL 的人：

我的索尼 Xperia Z4 平板电脑也遇到了同样的问题。对我来说问题是，我正在配置闪光灯（照亮场景）

`CaptureRequest.Builder.set(CaptureRequest.CONTROL_AE_MODE, CaptureRequest.CONTROL_AE_MODE_ON_AUTO_FLASH);`

该设备没有内置闪光灯，因此删除它后它工作正常。我得到了和你一样的 logcat 输出。

# c# - WPF 绑定到父 DataContext

> ID：13415643
> 
> 赞同：52
> 
> 时间：2012-11-16T11:25:34.817
> 
> 标签：c#, wpf, binding

我们有一个带有标准 MVVM 模式的 WPF 应用程序，利用 Cinch（以及因此 MefedMVVM）进行 View -> ViewModel 分辨率。这很好用，我可以将相关控件绑定到 ViewModel 上的属性。

在特定视图中，我们有一个 Infragistics XamGrid。此网格绑定到 ViewModel 上的 ObservableCollection，并显示相应的行。但是，然后我在此网格上有一个特定列，我试图将 TextBox 文本值绑定到父 DataContext 上的属性，而不是 ObservableCollection。此绑定失败。

我们在这里经历了几个选项，包括：

1.  使用 AncestorType 跟踪树并像这样绑定到父 UserControl 的 DataContext （来自这个问题的[好答案](https://stackoverflow.com/questions/84278/how-do-i-use-wpf-bindings-with-relativesource)，以及[这个](https://stackoverflow.com/questions/998092/using-the-parents-datacontext-wpf-dynamic-menu-command-binding)）......

    ```
    {Binding Path=PathToProperty, RelativeSource={RelativeSource AncestorType={x:Type typeOfAncestor}}} 
    ```

2.  指定 ElementName 并尝试直接定位顶级控件。如果您想了解如何使用 ElementName，请[查看此处。](http://www.codeproject.com/Articles/29054/WPF-Data-Binding-Part-1)

3.  使用在资源中为 UserControl 定义的“代理”FrameorkElement 尝试根据需要“传入”上下文。我们将元素定义如下，然后作为静态资源引用...

    ```
    <FrameworkElement x:Key="ProxyContext" DataContext="{Binding Path=DataContext, RelativeSource={RelativeSource Self}}"></FrameworkElement> 
    ```

在这种情况下，绑定会找到 FrameworkElement，但无法访问除此之外的任何内容（指定路径时）。

仔细阅读后，这很可能是由 Infragistics XamGrid 在树外构建列引起的。但是，即使是这种情况，至少选项 2 或 3 应该有效。

我们最后的想法是它与 V - VM 绑定有关，但即使使用 Snoop，我们还没有找到确切的问题。我绝不是 WPF 绑定方面的专家，所以任何指针都将不胜感激。

编辑：我在[这里](http://help.infragistics.com/Help/NetAdvantage/WPF/2012.1/CLR4.0/html/xamGrid_Custom_GroupBy_Row_Display.html)找到了一些来自 Infragistics 的模板示例，我将尝试。

编辑2：正如@Dtex 所指出的，模板是要走的路。以下是与 XamGrid 一起使用的相关代码段：

```
<ig:GroupColumn Key="CurrentDate">
                <ig:GroupColumn.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=DataContext.CurrentDateTest, RelativeSource={RelativeSource AncestorType=UserControl}}" />
                    </DataTemplate>
                </ig:GroupColumn.HeaderTemplate>
                <ig:GroupColumn.Columns> 
```

我已将 XML 保持打开状态...您只需添加所需的列，然后关闭相关标签。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-16T13:15:16.580

我不知道，`XamGrid`但这就是我将使用标准 wpf 做的事情`DataGrid`：

```
<DataGrid>
    <DataGrid.Columns>
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding DataContext.MyProperty, RelativeSource={RelativeSource AncestorType=MyUserControl}}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
            <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding DataContext.MyProperty, RelativeSource={RelativeSource AncestorType=MyUserControl}}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellEditingTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

由于单元格模板中指定的`TextBlock`和`TextBox`将成为可视化树的一部分，因此您可以向上找到所需的任何控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:39:54.670

由于这样的事情，作为一般的经验法则，我尽量避免 XAML 的“诡计”，并使 XAML 尽可能简单和简单，并在 ViewModel（或附加属性或 IValueConverters 等）中完成其余的工作。如果真的有必要）。

如果可能的话，我会给当前 DataContext 的 ViewModel 一个对相关父 ViewModel 的引用（即属性）

```
public class ThisViewModel : ViewModelBase
{
    TypeOfAncestorViewModel Parent { get; set; }
} 
```

并直接与之绑定。

`<TextBox Text="{Binding Parent}" />`

# css - webkit 动画不起作用，# 在 css 中的 @ 之前

> ID：13415645
> 
> 赞同：2
> 
> 时间：2012-11-16T11:25:47.513
> 
> 标签：css

我希望我的动画工作的网站在我的任何标签之前添加了#user-space。所以，我的动画是这样的：

```
 #user-space @-webkit-keyframes animation-name {
 from {
   style definition ["Before"-state]
 }
 to {
   style definition ["After"-state]
 } 
```

并且那个#user-space 声明破坏了css 语句并且动画不起作用。有没有办法，否则这样做？例如，把我的关键帧放在里面 -`webkit-animation: animation-name 1.1s ease infinite;`就像 `webkit-animation: from { style definition ["Before"-state] } to { style definition ["After"-state] } 1.1s ease infinite;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:11:21.767

我看到的解决方案是解决您的问题并使用 javascript 来解决。

只需`style`在您的 html 文件中（在标题中）添加一个新的并在其中添加`@-webkit-keyframes`动画。

有一个线程很好地解释了它（参见接受的解决方案）：[Set the webkit-keyframes from/to parameter with JavaScript](https://stackoverflow.com/questions/3328933/set-the-webkit-keyframes-from-to-parameter-with-javascript)

# plugins - IntelliJ Idea 的 BPEL 设计器

> ID：13415650
> 
> 赞同：5
> 
> 时间：2012-11-16T11:26:10.877
> 
> 标签：plugins, intellij-idea, designer, bpel

是否有 IntelliJ Idea 的 BPEL 设计器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:30:28.670

此功能尚不存在。欢迎您在[YouTrack](http://youtrack.jetbrains.net/issues/IDEA)中提出请求。

# javascript - 如何等待另一个回调的ajax回调结果？

> ID：13415654
> 
> 赞同：2
> 
> 时间：2012-11-16T11:26:17.650
> 
> 标签：javascript, jquery

我有一个方法如下：

```
 self.getOrAddCache = function (key, objectFactory) {
        var data = self.getFromCache(key);
        if (!data) {
            data = objectFactory();
            if (data && data != null)
                self.addToCache(key, data);
        }
        return data;
    }; 
```

我这样使用：

```
function getCities()
{
    var cities = getOrAddCache(CacheKeys.Cities, function() {
        var cityArray = new Array();
        // get city informations from service 
        $.ajax({
               type: "GET",
               async: true,
               url: "service/cities",
               success: function (response) {
                    $.each(response, function(index, value) {
                        cityArray.push({
                            name: value.name,
                            id: value.id
                        });
                    });
               }
           });

        if (cityArray.length > 0)
            return cityArray;
        else {
            return null;
        }
    });

    return cities;
} 
```

`getCities`函数总是返回`null`，因为`getCities`不等待完成异步 ajax 请求。

我该如何解决这个问题？（请求必须是异步的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:24:24.907

最好的解决方案是使用 Deferred 对象。由于您要求 AJAX 调用是异步的，因此您应该让您的`getCities`函数返回一个*承诺*，以便在将来的某个时间返回该数据。

您无需将原始数据存储在缓存中，而是存储这些承诺。

如果你请求一个已经解决的承诺，那将立即完成。如果缓存对象已经有一个挂起的请求，异步 AJAX 调用将被启动，所有等待该承诺的未完成回调将按顺序启动。

像这样的东西*应该可以*工作，尽管这当然是未经测试的，E&OE 等等等等。

```
self.getCached = function(key, objectFactory) {
    var def = self.getCache(key);
    if (!def) {
        def = objectFactory.call(self);
        self.addToCache(key, def);
    }
    return def;
}    

function getCities() {
    return getCached(CacheKeys.Cities, function() {
        return $.ajax({
            type: 'GET',
            url: 'service/cities'
        }).pipe(function(response) {
            return $.map(response, function(value) {
                 return { name: value.name, id: value.id };
            });
        });
    });
} 
```

`.pipe`请注意将 AJAX 响应后处理为所需格式的用法，结果是另一个延迟对象，实际上是后一个对象存储在缓存中。

现在的用法是：

```
getCities().done(function(cities) {
    // use the cities array
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:29:29.843

使用回调：

```
function getCities(callbackFunction)
{
    var cities = getOrAddCache(CacheKeys.Cities, function() {
        var cityArray = new Array();
        // get city informations from service 
        $.ajax({
               type: "GET",
               async: true,
               url: "service/cities",
               success: function (response) {
                    $.each(response, function(index, value) {
                        cityArray.push({
                            name: value.name,
                            id: value.id
                        });
                    });
                    callbackFunction(cityArray);
               }
           });
    });
}

getCities(function(cityArray){
  // do stuff
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:29:38.877

您不能从异步获取数据的函数返回结果。

将您的 getCities 函数更改为接受回调的函数：

```
function fetchCities(callback) {
    var cities = getOrAddCache(CacheKeys.Cities, function() {
        var cityArray = new Array();
        // get city informations from service 
        $.ajax({
               type: "GET",
               async: true,
               url: "service/cities",
               success: function (response) {
                    $.each(response, function(index, value) {
                        cityArray.push({
                            name: value.name,
                            id: value.id
                        });
                    });
                    if (callback) callback(cityArray);
               }
           });
    });
} 
```

并像这样使用它：

```
fetchCities(function(cities) {
   // use the cities array
}); 
```

请注意，使用`async:true`, 使代码等待响应但不使用它在技术上是可行的：这是一种糟糕的做法，它会锁定页面直到服务器响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:30:59.743

你好像在自相矛盾。

根据定义，异步的东西不会暂停脚本以等待其执行结束。如果它确实等待，它就不能是异步的。

解决此问题的最佳方法是在您的 ajax 成功函数中添加一个回调函数，将最终结果传递给另一个函数，该函数处理其余的执行。

# python - LLVM IR 到 Python 编译器

> ID：13415660
> 
> 赞同：6
> 
> 时间：2012-11-16T11:26:42.847
> 
> 标签：python, compiler-construction, code-generation, llvm, converter

是否有任何工具可以将 LLVM IR 代码转换为 Python 代码？我知道可以将其转换为 Javascript (https://github.com/kripken/emscripten/wiki)、Java (http://da.vidr.cc/projects/lljvm/)，我很想转换它也适用于 Python。

另外，如果不存在这样的工具，您能否提供任何信息，最好的工具是什么（也许我应该用其他语言扩展 emscripten - Javascript 和 Python 在某些方面彼此相似；））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:19:50.913

LLVM 到 3.0 提供了一个 C 后端（请参阅 参考资料`lib/Target/CBackend`），这应该是实现简单 Python 代码生成器的一个很好的起点。

# java - 多个面板彼此下方

> ID：13415662
> 
> 赞同：3
> 
> 时间：2012-11-16T11:26:48.790
> 
> 标签：java, swing, user-interface, layout-manager, gridbaglayout

是否有可能我可以有一个用于登录的顶部面板。然后是下面的中间和底部面板。我正在使用 gridbaglayout 并且分配了 2 个面板。一个面板具有链接到它的组件以获取登录详细信息，而另一个面板具有链接到它的其他组件。但是，它不会按计划进行。我试过使用 Box/Borderlayout 来做到这一点，但是我无法创建我想要的间距。

这是我想要的草图。

![http://s16.postimage.org/dtefn48qd/16_11_2012_11_24_40.png](../Images/aeb15d9dde1489cd4008be2b117b8369.png)

```
public class GUI extends JFrame{

    private JPanel myTopPL, myTopPL2;
    private JTextField myUsernameTF;
    private JTextField myPasswordTF;
    private JTextField myMessageTF;
    private JLabel myUsernameLBL;
    private JLabel myPasswordLBL;
    private JLabel myItemsLBL;
    private JTextArea myMainTA;
    private JButton myLoginBN;
    private JButton myConnectBN;
    private JButton mySendBN;
    private JComboBox myItemsCB;

    public GUI () {

        super("GUI ");

        setLayout(new GridBagLayout());
        myTopPL = new JPanel();
        myTopPL2 = new JPanel();
        myTopPL.setLayout(new GridBagLayout());
        myTopPL2.setLayout(new GridBagLayout());
        GridBagConstraints myTopPLGBC = new GridBagConstraints();
        myTopPLGBC.weightx = 1;
        myTopPLGBC.weighty = 1;
        GridBagConstraints myTopPLGBC2 = new GridBagConstraints();
        myTopPLGBC.weightx = 2;
        myTopPLGBC.weighty = 2;

        myUsernameLBL = new JLabel("Username: ");
        myUsernameLBL.setFont(new Font("Arial", Font.BOLD, 13));
        myTopPLGBC.gridx = 1;
        myTopPLGBC.gridy = 1;
        myTopPLGBC.insets = new Insets(5,5,5,5);
        myTopPL.add(myUsernameLBL, myTopPLGBC);

        myUsernameTF = new JTextField(10);
        myTopPLGBC.gridx = 2;
        myTopPLGBC.gridy = 1;
        myTopPLGBC.insets = new Insets(5,5,5,5);
        myTopPL.add(myUsernameTF,myTopPLGBC);

        myPasswordLBL = new JLabel("Password: ");
        myPasswordLBL.setFont(new Font("Arial", Font.BOLD, 13));
        myTopPLGBC.gridx = 3;
        myTopPLGBC.gridy = 1;
        myTopPLGBC.insets = new Insets(5,5,5,5);
        myTopPL.add(myPasswordLBL, myTopPLGBC);

        myPasswordTF = new JTextField(10);
        myTopPLGBC.gridx = 4;
        myTopPLGBC.gridy = 1;
        myTopPLGBC.insets = new Insets(5,5,5,5);
        myTopPL.add(myPasswordTF,myTopPLGBC);

        myLoginBN = new JButton("Login");
        myTopPLGBC.gridx = 5;
        myTopPLGBC.gridy = 1;
        myTopPLGBC.insets = new Insets(5,5,5,5);
        myTopPL.add(myLoginBN,myTopPLGBC);

        myItemsLBL = new JLabel("Items: ");
        myItemsLBL.setFont(new Font("Arial", Font.BOLD, 13));
        myTopPLGBC2.gridx = 1;
        myTopPLGBC2.gridy = 3;
        myTopPLGBC2.insets = new Insets(5,5,5,5);
        myTopPL2.add(myItemsLBL, myTopPLGBC2);

        myItemsCB = new JComboBox();
        myItemsCB.addItem("     Select an Item     ");
        myTopPLGBC2.gridx = 1;
        myTopPLGBC2.gridy = 4;
        myTopPLGBC2.insets = new Insets(5,5,5,5);
        myTopPL2.add(myItemsCB, myTopPLGBC2);

        myConnectBN = new JButton("Connect");
        myTopPLGBC2.gridx = 2;
        myTopPLGBC2.gridy = 4;
        myTopPLGBC2.insets = new Insets (5,5,5,5);
        myTopPL2.add(myConnectBN, myTopPLGBC2);

        GridBagConstraints GBC = new GridBagConstraints();
        GBC.anchor = GridBagConstraints.NORTHWEST;
        GBC.weightx = 1;
        GBC.weighty = 1; 
        this.add(myTopPL,GBC);  

        GridBagConstraints GBC2 = new GridBagConstraints();
        GBC2.anchor = GridBagConstraints.NORTHWEST;
        GBC2.weightx = 2;
        GBC2.weighty = 2; 
        this.add(myTopPL2,GBC2);    

    }

    public static void main(String[] args) {

        GUI GUI = new GUI ();
        GUI .setDefaultCloseOperation(RMIAuctionHouse.EXIT_ON_CLOSE);
        GUI .setSize(750,500);
        GUI .setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T12:05:26.437

我会将应用程序分解为各个职责领域，并专注于创建 UI 元素来支持它。这将使您可以专注于应用程序的每个部分的需求，还可以让您有机会根据需要更改布局

![在此处输入图像描述](../Images/b9bb8dc00b05bbab1243bfcd94e680d4.png)

```
public class TestLayout15 {

    public static void main(String[] args) {
        new TestLayout15();
    }

    public TestLayout15() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MainPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class MainPane extends JPanel {

        private JTextField messageField;
        private JButton sendButton;

        public MainPane() {
            setBorder(new EmptyBorder(4, 4, 4, 4));
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.weightx = 1;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            add(new LoginPane(), gbc);
            gbc.gridy++;
            add(new ConnectPane(), gbc);
            gbc.gridy++;
            gbc.weighty = 1;
            gbc.fill = GridBagConstraints.BOTH;
            add(new JScrollPane(new JTextArea(5, 20)), gbc);

            gbc.gridwidth = 1;

            messageField = new JTextField(10);
            sendButton = new JButton("Send");

            gbc.gridy++;
            gbc.weighty = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(messageField, gbc);
            gbc.gridx++;
            gbc.weightx = 0;
            add(sendButton, gbc);            
        }

    }

    public class ConnectPane extends JPanel {

        private JComboBox comboBox;
        private JButton connectButton;

        public ConnectPane() {
            comboBox = new JComboBox();
            connectButton = new JButton("Connect");

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            add(comboBox, gbc);

            gbc.gridx++;
            gbc.weightx = 1;
            add(connectButton, gbc);
        }

    }

    public class LoginPane extends JPanel {

        private JTextField userNameField;
        private JPasswordField passwordField;
        private JButton loginButton;

        public LoginPane() {

            userNameField = new JTextField(10);
            passwordField = new JPasswordField(10);
            loginButton = new JButton("Login");

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            add(new JLabel("User name:"), gbc);

            gbc.gridx++;
            add(userNameField, gbc);

            gbc.gridx++;
            add(new JLabel("Password:"), gbc);

            gbc.gridx++;
            add(passwordField, gbc);

            gbc.gridx++;
            gbc.weightx = 1;
            add(loginButton, gbc);

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T12:05:38.323

首先，将调用替换`GUI.setSize(750,500)`为`GUI.pack()`。这将调整窗口大小以适合您的内容。之后，您会看到第二个面板出现在第一个面板的右侧。这是因为你没有设置`gridx`/所以它默认放在`gridy`的右边，而不是它的下面。`GBC2``myTopPL2``myTopPL1`

我很少在使用时明确设置`gridx`/ 。对于显示的第一行，我将使用默认值，但我将设置为. 这告诉 GridBagLayout 这一行没有其他内容。使用默认 gbc 添加的下一个项目将放置在第二行的开头。`gridy``GridBagLayout``myLoginBN``gridwidth``GridBagConstraints.REMAINDER`

小尼特：

*   使用标准 Java 大写：
    *   类名是带有前导大写字符的驼峰式。所以，“GUI”，而不是“GUI”。
    *   实例名称是带有前导小写字符的驼峰式。所以，“gbc1”不是“GBC1”
*   使用 SwingUtilities.InvokeLater 在 EDT 上启动 Gui

    ```
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            GUI GUI = new GUI ();
            GUI .setDefaultCloseOperation(RMIAuctionHouse.EXIT_ON_CLOSE);
            GUI .setSize(750,500);
            GUI .setVisible(true);
        }}); 
    ```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-16T12:25:00.330

看来您对 Java 布局不熟悉，所以我建议您尝试 null(absolute) 布局：

```
setLayout(null);
...
component.setBounds( x, y, width, heigh );
add(component); 
```

这里的例子

```
package gui;

import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class GUI extends JFrame{

    private JTextField myUsernameTF;
    private JLabel myUsernameLBL;

    public GUI() {

        super("GUI ");
        setLayout(null);     

        myUsernameLBL = new JLabel("Username: ");
        myUsernameLBL.setFont(new Font("Arial", Font.BOLD, 13));
        myUsernameLBL.setBounds(50,30,80,20);
        add(myUsernameLBL);

        myUsernameTF = new JTextField(10);
        myUsernameTF.setBounds(190,30,80,20);
        add(myUsernameTF);

        // and so on ...

    }

    public static void main(String[] args) {
        GUI frame = new GUI();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(750,500);
        frame.setVisible(true);
    }
} 
```

祝你在处理java swing的棘手方法上好运=）

# vbscript - VB脚本删除子文件夹中的文件

> ID：13415663
> 
> 赞同：0
> 
> 时间：2012-11-16T11:26:59.427
> 
> 标签：vbscript

我需要 VB 脚本从子文件夹中删除不必要/不需要的文件（具有不同的扩展名，但文件的姓氏很常见，例如 ABC123DEF.pdf、ABC456DEF.pdf、QWE145_source.xml、QWE784_source.xml 等）

有人可以帮忙吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:04:00.230

从遍历文件夹树的骨架脚本开始：

```
Step00.vbs:

Option Explicit

Dim goFS : Set goFS = CreateObject("Scripting.FileSystemObject")

WScript.Quit Main()

Function Main()
  Dim sDir : sDir = "..\test"
  Dim oWorker : Set oWorker = New cWorker
  Main = traverseDir(goFS.GetFolder(sDir), oWorker)
End Function

Class cWorker
  Public Sub processFile(oFile)
    WScript.Echo oFile.Path
  End Sub
End Class

Function traverseDir(oDir, oWorker)
  traverseDir = 0
  Dim oF
  For Each oF In oDir.Files
      oWorker.processFile oF
  Next
  For Each oF In oDir.SubFolders
      traverseDir = traverseDir(oF, oWorker)
  Next
End Function 
```

输出：

```
cscript step00.vbs
E:\trials\SoTrials\answers\13415663\test\13415663.notes
E:\trials\SoTrials\answers\13415663\test\13415663.kpf
E:\trials\SoTrials\answers\13415663\test\13415663-UE15.prj
E:\trials\SoTrials\answers\13415663\test\vbs\step00.vbs 
```

Main 函数将文件夹和工作程序传递给 traverseDir 函数，并返回要传递给调用者 (OS) 的退出代码。traverseDir 函数将目录中的每个文件发送到 worker 的 processFile sub，为每个子文件夹递归调用自身，并向调用者返回错误代码（自身的主/前一个实例）。（微不足道的）工作人员只是回显文件的路径。

Step01.vbs 使用带有硬编码条件的工作程序来确定要删除哪些文件：

```
Class cWorker
  Public Sub processFile(oFile)
    If "notes" = goFS.GetExtensionName(oFile.Name) Then
       WScript.Echo "will delete", oFile.Path
       oFile.Delete
    End If
  End Sub
End Class 
```

输出：

```
cscript step01.vbs
will delete E:\trials\SoTrials\answers\13415663\test\13415663.notes 
```

基于此概念验证脚本，您可以增强 traverseDir 函数（对不可访问的文件夹进行错误处理，...）和/或 cWorker 类（更复杂的条件、错误处理、日志记录...）。

**更新：**

请参阅[此递归文件夹访问脚本](https://stackoverflow.com/a/13429422/603855)以获取进一步增强骨架的想法。

# ajax - 将 .load 的内容粘贴到变量中

> ID：13415666
> 
> 赞同：2
> 
> 时间：2012-11-16T11:27:21.690
> 
> 标签：ajax, jquery, jquery-load

是否可以使用 jQuery[`.load`](http://api.jquery.com/load/)并将加载的内容粘贴到变量中，以便我可以使用该变量并将其附加到其他内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:29:51.337

你可以，但这是不必要的。请改用该[`$.get`](http://api.jquery.com/jQuery.get/)方法直接访问响应。

```
$.get("foo.php",function(response){
    console.log(response);
}); 
```

如果你想两者都做（即将响应加载到 div 并使用返回的数据），你可以`$.load`类似地使用方法上的回调。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T11:29:55.330

根据[文档](http://api.jquery.com/load/)：

```
.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] ) 
```

因此，您可以创建函数来保存您的响应：

```
$('#result').load('ajax/test.html', function(responseText, textStatus, request) {
    alert(responseText);
}); 
```

其他方法是使用[$.get](http://api.jquery.com/jQuery.get/)或[$.post](http://api.jquery.com/jQuery.post/)方法：

```
$.get('ajax/test.html', function(data) {
    $('.result').html(data);
    alert(data);
});

$.post('ajax/test.html', function(data) {
    $('.result').html(data);
    alert(data);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T11:30:44.593

```
$(selector).load(url); 
```

只是以下的简写：

```
$.get(url, data, function(response) {
    $(selecton).replaceWith(response);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T11:31:01.870

你可以在 AJAX 中尝试这样的事情

```
$.post(yourfile,function(response) {
     //div hidden with the html of your page
      $("#hiddendiv").html(response);
}); 
```

或使用获取

```
$.get(yourfile,function(response) {
     //div hidden with the html of your page
      $("#hiddendiv").html(response);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T11:29:24.307

在这种情况下，请使用 jquery 的 GET、POST 或 AJAX 方法。
`.load`jquery 的方法在内部只使用异步 http 请求，所以上面提到的所有方法。

# ios - 在不越狱设备的情况下在 iOS 中模拟系统范围的触摸事件

> ID：13415669
> 
> 赞同：3
> 
> 时间：2012-11-16T11:27:32.247
> 
> 标签：ios

我想在 ios 非越狱设备中模拟系统范围内的触摸事件。当然，这个应用程序不适用于应用商店。

经过长时间的凝视后，我做了这样的事情。

```
-(void) SimulateTouchEvent
{
    float x = ((arc4random()%RAND_MAX)/(RAND_MAX*1.0))*(320.0-1.0)+1.0;
    float y = ((arc4random()%RAND_MAX)/(RAND_MAX*1.0))*(480.0-1.0)+1.0;
    static int click = 0;
    void *lib = dlopen(GSSERVPATH, RTLD_LAZY);
    uint64_t (*GSCurrentEventTimestamp)() = (uint64_t(*)())dlsym(lib, "GSCurrentEventTimestamp");
    mach_port_t (*GSGetPurpleApplicationPort)() = (mach_port_t(*)())dlsym(lib, "GSGetPurpleApplicationPort");
    //  void GSSendEvent(const GSEventRecord* record, mach_port_t port);
    void (*GSSendEvent)(const GSEventRecord* record, mach_port_t port) = (void(*)(const GSEventRecord* record, mach_port_t port)) dlsym(lib, "GSSendEvent");
    //void GSSendSystemEvent(const GSEventRecord* record);
    void (*GSSendSystemEvent)(const GSEventRecord* record) = (void(*)(const GSEventRecord* record)) dlsym(lib, "GSSendSystemEvent");

    static int prev_click = 5;

    CGPoint location = {x, y};

    // structure of touch GSEvent
    struct GSTouchEvent 
    {
        GSEventRecord record;
        GSHandInfo    handInfo;
    } * event = (struct GSTouchEvent*) &touchEvent;
    bzero(touchEvent, sizeof(touchEvent));

    // set up GSEvent
    event->record.type = kGSEventHand;
    event->record.windowLocation = location;
    event->record.timestamp = GSCurrentEventTimestamp();
    event->record.infoSize = sizeof(GSHandInfo) + sizeof(GSEventRecord /*GSPathInfo*/);
    event->handInfo.type = (GSHandInfoType)click; //getHandInfoType(prev_click, click);

    event->handInfo._0x44 = 0x1;
    event->handInfo._0x48 = 0x1;        

    event->handInfo.pathInfosCount = 1;
    bzero(&event->handInfo.pathInfos[0], sizeof(GSPathInfo));
    event->handInfo.pathInfos[0].pathIndex     = 2; //1;
    event->handInfo.pathInfos[0].pathIdentity  = 2;
    event->handInfo.pathInfos[0].pathProximity = click ? 0x02 /*0x03*/ : 0x01 /*0x00*/;
    event->handInfo.pathInfos[0].pathLocation  = location;

    // send GSEvent
    //sendGSEvent( (GSEventRecord*) event, location);    
    //mach_port_t pPort = GSGetPurpleApplicationPort();
    //GSSendEvent((GSEventRecord*) event, pPort);
    GSSendSystemEvent(&event->record);

    prev_click ^= click;
    click ^= prev_click;
    prev_click ^= click;

} 
```

我看不到任何所需的输出。请指导我在这里做错了什么。

我尝试添加 KennyTM 提供的框架，但它显示了架构问题。所以动态链接。

[我如何在此链接Simulating System Wide Touch Events on iOS](https://stackoverflow.com/questions/9221086/simulating-system-wide-touch-events-on-ios)中查看 George Aguirre 的回复。但不清楚他是否在不越狱设备的情况下实现了这一目标。

是否可以不越狱设备？

提前感谢您的帮助。

# python - Raspberry Pi 和 SPI 接口（Python）：如何传输数据？

> ID：13415670
> 
> 赞同：1
> 
> 时间：2012-11-16T11:27:37.010
> 
> 标签：python, c, raspberry-pi

我在我的 Raspberry Pi 上使用 SPI 接口。

我可以使用以下代码读取连接到 SPI0 的芯片寄存器（前 20 个寄存器）：

```
spi=spidev.SpiDev()
spi.open(0,0)

x=spi.readbytes(20)

k=0
for i in x:
        print(k,hex(i),i)
        k=k+1 
```

我的问题是：如何使用“spi.xfer”设置特定寄存器的值？我不知道 xfer(...) 函数需要什么参数。

如何使用“spi.xfer”从特定寄存器中读取值？

虽然我确实有原始的 C 代码；我仍然无法破译如何使用 xfer(...)。

这是C代码：

[https://github.com/doceme/py-spidev/blob/master/spidev_module.c](https://github.com/doceme/py-spidev/blob/master/spidev_module.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:50:05.667

我相信这行代码是关键：

```
PyArg_ParseTuple(args, "O|IHB:xfer", &list, &speed_hz,
                 &delay_usecs, &bits_per_word) 
```

[文档](http://docs.python.org/release/1.5.2p2/ext/parseTuple.html)告诉我们格式化字符串意味着：

*   `O`- 一个 Python 对象
*   `|`- 表示以下是可选的
*   `I`- 一个`int`
*   `H`- 一个`short`
*   `B`- 一个`char`
*   `:`- 函数名字符串的开始 ( `xfer`)

其中，假设`list`是要发送的数据似乎是明智的，实际上它似乎被解释为要发送的字节列表。

由于 SPI 倾向于并行发送和接收，进一步阅读代码让我相信其中的每个值都`list`将被发送特定字节时收到的字节替换。这很奇怪，但那是你的 SPI。

# objective-c - 从不兼容的类型'void *'分配给'uint8_t *'（又名'unsigned char *'）

> ID：13415672
> 
> 赞同：1
> 
> 时间：2012-11-16T11:27:52.187
> 
> 标签：objective-c, ios

```
 uint8_t *bufferPtr=NULL;
 size_t bufferPtrSize=0;
 bufferPtr=malloc(bufferPtrSize *  sizeof(uint8_t)) 
```

我在 File1.m 中使用了相同的代码，它工作正常。当我在 File2.mm 上使用它时，它给了我`assigning to 'uint8_t *' (aka 'unsigned char *' ) from incompatible type 'void *'`错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:51:03.453

这是因为`.mm`文件不被视为普通的 Objective-C 文件，而是被视为 Objective-C++ 文件，因此此处适用 C++ 的类型规则。在 C++ 中，如果您决定拥有一个类型（在这种情况下您有一个 void 指针）然后想要另一种类型（在您的情况下是一个 char 指针），那么您必须显式地转换它们。这样做的方法是目标类型`static_cast<T>()`在哪里。`T`IE：`uint8_t *bufferPtr = static_cast<uint8_t *>(malloc(bufferPtrSize * sizeof(uint8_t)));`

# android - Android 2.3 默认图标（姜饼）

> ID：13415674
> 
> 赞同：0
> 
> 时间：2012-11-16T11:27:59.350
> 
> 标签：android, icons, android-2.3-gingerbread

我已经在网上搜索了大约 2 天。我发现的所有东西都是自定义集。此外，我在那里发现了一些类似的主题，但所有答案都类似于“它们可以在源代码 (SDK) 中找到”。我下载了最新的 SDK，发现只有几个 Gingerbread 的图标。我真的被困住了。我想要的只是 Android 2.3 Gingerbread 的全套默认图标（菜单图标、状态栏图标、操作栏图标、选项卡图标、对话框图标等）（mdpi、hdpi、xhdpi）。例如，这就是菜单图标的样子[http://uploadpie.com/AZFJs](http://uploadpie.com/AZFJs)。

有没有为姜饼设计经验的设计师？我真的需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:33:23.737

您可以在以下文件夹下找到这些图标：

[android-安装目录]/platforms/android-10/data/res/drawable-hdpi

一旦有了 hdpi 图标，您就可以轻松地使用 GIMP 之类的工具将它们调整为较低的分辨率，例如 mdpi 和 ldpi。

希望这可以帮助。

最好的问候， 安娜

# iphone - 比较同一 UIViewController 类的实例或对象

> ID：13415677
> 
> 赞同：1
> 
> 时间：2012-11-16T11:28:03.793
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uitabbarcontroller

我创建了从 UIViewController 类派生的 MasterViewController 的两个实例

```
_masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController_iPhone" bundle:nil];

// second instance with same class and duplicate nib view
_favItemMasterVC = [[MasterViewController alloc] initWithNibName:@"favMasterViewController_iPhone" bundle:nil]; 
```

MasterViewController_iPhone 和 favMasterViewController_iPhone 视图都是相同的。现在我想检查当前选择了哪个 UIViewController（例如：在标签栏上）。我怎样才能找到两个对象之间的区别？

`- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {`

`if ([viewController isKindOfClass:[_favItemListMasterVC class]] { // it is always called in both cases}`

isMemberOfClass: // 也不工作

如何检查差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:32:19.957

不确定我是否了解您在做什么，但如果 _favItemListMasterVC 和 _masterViewController 指向添加到 UITabBar 的相同 VC，您可以简单地比较指针来检查它

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {

if (viewController == _favItemListMasterVC)
{
    //the visible view controller is _favItemListMasterVC
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:35:23.020

```
 - (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
if (viewController == _masterViewController)
{

}
else if (viewController == _favItemMasterVC)
{

}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:32:37.637

我认为您可以使用标签来检查哪个是哪个。标签是[UIView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView)的属性在两个 xib 文件中设置标签值。并使用代码检查标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T12:12:37.433

要比较对象，您还可以使用：

```
if([viewController isEqual:_favItemMasterVC]) 
```

# c#-4.0 - Google API Drive App 注销方法？

> ID：13415685
> 
> 赞同：1
> 
> 时间：2012-11-16T11:28:23.527
> 
> 标签：c#-4.0

`Drive API`有`Logout`方法吗？我需要调用一个`Logout`方法，然后让用户登录另一个帐户。

# java - 使用 rrd4j 绘制图形的问题

> ID：13415692
> 
> 赞同：0
> 
> 时间：2012-11-16T11:29:06.660
> 
> 标签：java, rrdtool, rrd

我正在使用 rrd4j 以循环方式（一小时周期）存储会话计数，查看 xml 似乎数据已成功更新，但是当我调用 RrdGraph 时，进程被触发。我的初始化、修改和创建代码如下

我将 nodeCount 设置为两个并使用 random 函数填充数据。

```
 import static org.rrd4j.ConsolFun.AVERAGE;
import static org.rrd4j.ConsolFun.MAX;

import java.awt.Color;
import java.io.IOException;
import java.util.Date;

import org.rrd4j.DsType;
import org.rrd4j.core.RrdDb;
import org.rrd4j.core.RrdDef;
import org.rrd4j.core.Sample;
import org.rrd4j.core.Util;
import org.rrd4j.graph.RrdGraph;
import org.rrd4j.graph.RrdGraphDef;

public class Add2RRD {

    static final String FILE = "sessionCount";

    static final Date currentDate = new Date();
    static final long SECINDAY = 24 * 3600;
    static final long MAX_STEP = 3600L;// one hour
    static final int IMG_WIDTH = 700;
    static final int IMG_HEIGHT = 500;
    private String rrdPath = null;
    private String xmlPath = null;
    private String imgPath = null;
    private String rrdRestoredPath = null;
    private long debugTimestamp = 0L;
    private int nodeCount;
    private int rows;

    private static Add2RRD add2rrd = null;

    private Add2RRD() {
        debugTimestamp = Util.getTimestamp();
        rrdPath = Util.getRrd4jDemoPath(FILE + ".rrd");
        xmlPath = Util.getRrd4jDemoPath(FILE + ".xml");
        imgPath = Util.getRrd4jDemoPath(FILE + ".png");
        rrdRestoredPath = Util.getRrd4jDemoPath(FILE + "_restored.rrd");

        rows = (int) ((JMXProbe.reportRange * 24 * 60 * 60) / MAX_STEP);
        // rows = 24;
    }

    public static Add2RRD getInstance() {
        if (null == add2rrd) {
            add2rrd = new Add2RRD();
        }
        return add2rrd;
    }

    public void initRRD() throws IOException {
        long start = Util.getTimestamp();

        RrdDef rrdDef = new RrdDef(rrdPath, start, MAX_STEP);

        for (int i = 1; i < nodeCount + 1; i++) {
            rrdDef.addDatasource("Node" + i, DsType.GAUGE, MAX_STEP * 2, 0,
                    Double.NaN);
        }

        rrdDef.addArchive(MAX, 0.5, 1, rows);

        println(rrdDef.dump());
        println("Estimated file size: " + rrdDef.getEstimatedSize());

        RrdDb rrdDb = new RrdDb(rrdDef);

        println("RRD file created.");

        rrdDb.close();
        println("RRD file closed.");
    }

    public void updateRRD(long timeStamp, Long[] values) throws IOException {

        RrdDb rrdDb = new RrdDb(rrdPath);
        Sample sample = rrdDb.createSample();
        debugTimestamp += MAX_STEP;
        // System.out.println(debugTimestamp);
        sample.setTime(debugTimestamp);
        for (int i = 0; i < values.length; i++) {
            sample.setValue("Node" + (i + 1), Math.round(values[i]));
        }
        println("Update dump" + sample.dump());
        sample.update();
        rrdDb.close();
        println("RRD file updated " + debugTimestamp);

    }

    public RrdDb createRRDRestorePoint() throws IOException {
        RrdDb rrdDb = new RrdDb(rrdPath);
        rrdDb.exportXml(xmlPath);
        println("Creating RRD file " + rrdRestoredPath + " from XML file "
                + xmlPath);
        RrdDb rrdRestoredDb = new RrdDb(rrdRestoredPath, xmlPath);
        println("== Closing both RRD files");
        rrdDb.close();
        return rrdRestoredDb;
    }

    public void createRRDGraph() throws IOException {
        RrdDb rrdRestoredDb = createRRDRestorePoint();
        RrdDef rrdDef = rrdRestoredDb.getRrdDef();
        int dsCount = rrdDef.getDsCount();

        System.out.println(" dsCount " + dsCount);
        RrdGraphDef gDef = new RrdGraphDef();
        gDef.setWidth(IMG_WIDTH);
        gDef.setHeight(IMG_HEIGHT);
        gDef.setFilename(imgPath);

        long start = Util.getTimestamp() + + (2 * 60 * 60), end = start + (18 * 60 * 60);

/*      FetchRequest request = rrdRestoredDb.createFetchRequest(AVERAGE, start, end);
        println(request.dump());
        FetchData fetchData = request.fetchData();
        println("Data fetched. " + fetchData.getRowCount()
                + " points obtained");

        println(fetchData.toString());*/

        rrdRestoredDb.close();
        //gDef.datasource("nodeName", fetchData);
        gDef.setStartTime(start);
        gDef.setEndTime(end);

        gDef.setTitle(" Session Count : " );//+ new Date().getMonth());
        gDef.setVerticalLabel("Session Count");

        for (int i = 0; i < dsCount; i++) {
            String nodeName = "Node" + (i + 1);
            System.out.println(" nodeName " + nodeName);
            gDef.datasource(nodeName, rrdPath, nodeName, AVERAGE);
            gDef.line(nodeName, Color.GREEN, nodeName + " count");
            gDef.gprint(nodeName, MAX, nodeName + " max = %.3f%s");
            gDef.gprint(nodeName, AVERAGE, nodeName + " avg = %.3f%S\\r");
            gDef.print(nodeName, MAX, nodeName +" max = %.3f%s");
            gDef.print(nodeName, AVERAGE, nodeName +" avg = %.3f%S\\r");
        }
        gDef.setImageInfo("");
        gDef.setPoolUsed(false);
        gDef.setImageFormat("png");
        println("Rendering graph " + Util.getLapTime());
        RrdGraph graph = new RrdGraph(gDef);
        println(graph.getRrdGraphInfo().dump());
        println("Graph created " + Util.getLapTime());
    }

    public void setNodeCount(int nodeCount) {
        this.nodeCount = nodeCount;
    }

    static void println(String msg) {
        System.out.println(msg);
    }

    static void print(String msg) {
        System.out.print(msg);
    }
} 
```

我生成的xml是：

```
 <rrd>
   <!-- RRD4J, version 0.1 -->
   <version>0003</version>
   <!-- Seconds -->
   <step>3600</step>
   <!-- Sat Nov 17 15:32:33 GMT+05:30 2012 -->
   <lastupdate>1353146553</lastupdate>
   <ds>
      <name>Node1</name>
      <type>GAUGE</type>
      <minimal_heartbeat>7200</minimal_heartbeat>
      <min>+0.0000000000E00</min>
      <max>NaN</max>
      <!-- PDP Status -->
      <last_ds>+9.4000000000E01</last_ds>
      <value>+1.4382000000E04</value>
      <unknown_sec>0</unknown_sec>
   </ds>
   <ds>
      <name>Node2</name>
      <type>GAUGE</type>
      <minimal_heartbeat>7200</minimal_heartbeat>
      <min>+0.0000000000E00</min>
      <max>NaN</max>
      <!-- PDP Status -->
      <last_ds>+2.9000000000E01</last_ds>
      <value>+4.4370000000E03</value>
      <unknown_sec>0</unknown_sec>
   </ds>
   <rra>
      <cf>MAX</cf>
      <!-- 3600 seconds -->
      <pdp_per_row>1</pdp_per_row>
      <xff>+5.0000000000E-01</xff>
      <cdp_prep>
         <ds>
            <value>NaN</value>
            <unknown_datapoints>0</unknown_datapoints>
         </ds>
         <ds>
            <value>NaN</value>
            <unknown_datapoints>0</unknown_datapoints>
         </ds>
      </cdp_prep>
            <database>
         <!-- Thu Nov 15 16:30:00 GMT+05:30 2012 / 1352977200 -->
         <row>
            <v>NaN</v>
            <v>NaN</v>
         </row>
         <!-- Thu Nov 15 17:30:00 GMT+05:30 2012 / 1352980800 -->
         <row>
            <v>NaN</v>
            <v>NaN</v>
         </row>
        .
        .
        .
        <!-- Sat Nov 17 14:30:00 GMT+05:30 2012 / 1353142800 -->
         <row>
            <v>+1.3317000000E02</v>
            <v>+5.5107500000E01</v>
         </row>
         <!-- Sat Nov 17 15:30:00 GMT+05:30 2012 / 1353146400 -->
         <row>
            <v>+9.5657500000E01</v>
            <v>+3.0147500000E01</v>
         </row>
      </database>
   </rra>
</rrd> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:14:29.307

最后我发现了我的错误在 createGraph 方法中，我使用 AVERAGE 添加数据源，但在创建时它被定义为 MAX 类型。我只是在 createGraph 中将数据源更改为 MAX 类型，它就可以了

# image - 在 Matlab 中加载卫星图像

> ID：13415699
> 
> 赞同：0
> 
> 时间：2012-11-16T11:29:42.273
> 
> 标签：image, matlab

我有一个关于如何在 Matlab 上加载 Landsat 图像的问题。我的图片格式为 .img 并包含以下信息：

```
Columns and rows= 9487 x 8543
Number of bands= 6
Cellsize= 25 x 25
Source Type= continuous
Píxel type= unsigned integer
Pixel Depth= 16 bit
Scale factor= 0,9996 
```

这是我的代码：

> IM= multibandread('2000.img',[9487, 8543, 6],'int16',0,'ieee-le',{'Row','Range',[9487 8543]);

但是有以下错误：

错误：不平衡或意外的括号或括号。

我试图改变，但它不起作用。我能做些什么？

提前致谢，

艾玛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:11:48.190

丹尼斯是对的，你缺少一个右花括号。它应该像这样插入到最后的括号和括号之间：

> IM= multibandread('2000.img',[9487, 8543, 6],'int16',0,'ieee-le',{'Row','Range',[9487 8543] **}** );

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:40:49.200

我认为您可能希望完全保留子集参数，除了使用 unsigned uint16 之外，请尝试以下操作：

```
multibandread('2000.img',[9487, 8543, 6],'uint16',0,'ieee-le') 
```

请注意，在您当前的通话中，您似乎正在尝试将第 9487 行提取到第 8543 行。

# arrays - MATLAB：比较数组中的元素

> ID：13415700
> 
> 赞同：1
> 
> 时间：2012-11-16T11:29:50.000
> 
> 标签：arrays, matlab, contains

假设有数组 A 和 B，它们都可以有任意数字和大小。例如

```
A=[1 2 3]
B=[4 8 52 7 10] 
```

我想知道是否有任何方法可以在不使用循环的情况下检查 A 中的任何元素是否包含在 B 中？再一次，数组的数量和大小将是任意的，所以我无法对其进行硬编码。任何帮助和输入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-16T11:39:00.750

你的意思是这样的：

```
A=[1 2 3]; B=[4 8 52 7 10] 
ismember(A,B) 
```

答案=

```
0     0     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T16:03:40.053

添加到@NasserM.Abbasi：无论形状和大小，ismember 都可以使用，它始终是元素方面的。所以如果你有`A=[1 2; 3 4]`and `B=[1 3; 4 2; 1 2]`，
那么 ismember 将返回：

```
ismember(A,B);         % -> [1 1; 1 1] due to element-wise membership check
ismember(A,B, 'rows'); % -> [1 0] since it checks row-wise. 
```

根据 和 中可能的形状仔细使用`A`ismember `B`。

# c# - 用于从任何类型的列表创建 html 表的通用 HtmlHelper

> ID：13415709
> 
> 赞同：13
> 
> 时间：2012-11-16T11:30:17.487
> 
> 标签：c#, .net, asp.net-mvc

我想创建一个 HtmlHelper 来创建一个 html 表。我希望助手能够获取任何类型的对象列表和对象属性列表以显示为列。像这样的东西：

```
public static HtmlString Table(this HtmlHelper helper, List<T> data, List<string> headers)
    {
        //Tags
        TagBuilder table = new TagBuilder("table");
        TagBuilder tr = new TagBuilder("tr");
        TagBuilder td = new TagBuilder("td");
        TagBuilder th = new TagBuilder("th");

        //Inner html of table
        StringBuilder sb = new StringBuilder();

        //Add headers
        foreach (var s in headers)
        {
            th.InnerHtml = s;
            tr.InnerHtml += th.ToString();
        }
        sb.Append(tr.ToString());

        //Add data
        foreach (var d in data)
        {
            tr.InnerHtml = "";
            foreach (var h in headers)
            {
                td.InnerHtml = d.h.ToString();
                tr.InnerHtml += td.ToString();
            }
            sb.Append(tr.ToString());
        }

        table.InnerHtml = sb.ToString();
        return new HtmlString(table.ToString());
    } 
```

这段代码当然行不通，但我想知道是否可以制作类似的东西？以及我将如何去做。

**编辑：**

我选择了以下解决方案，其想法是表格应该只包含标题列表中指定的元素，所以这就是我想出的：

```
public static HtmlString Table<T>(this HtmlHelper helper, List<T> data, List<string> headers)
{
    //Tags
    TagBuilder table = new TagBuilder("table");
    TagBuilder tr = new TagBuilder("tr");
    TagBuilder td = new TagBuilder("td");
    TagBuilder th = new TagBuilder("th");

    //Inner html of table
    StringBuilder sb = new StringBuilder();

    //Add headers
    foreach (var s in headers)
    {
        th.InnerHtml = s;
        tr.InnerHtml += th.ToString();
    }
    sb.Append(tr.ToString());

    //Add data
    foreach (var d in data)
    {
        tr.InnerHtml = "";
        foreach (var h in headers)
        {
            td.InnerHtml = d.GetType().GetProperty(h).GetValue(d, null).ToString();
            tr.InnerHtml += td.ToString();
        }
        sb.Append(tr.ToString());
    }

    table.InnerHtml = sb.ToString();
    return new HtmlString(table.ToString());
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-16T12:06:36.540

```
public HtmlTable BuildTable<T>(List<T> Data)
{
  HtmlTable ht = new HtmlTable();
  //Get the columns
  HtmlTableRow htColumnsRow = new HtmlTableRow();
  typeof(T).GetProperties().Select(prop =>
                                        {
                                          HtmlTableCell htCell = new HtmlTableCell();
                                          htCell.InnerText = prop.Name;
                                          return htCell;
                                        }).ToList().ForEach(cell => htColumnsRow.Cells.Add(cell));
  ht.Rows.Add(htColumnsRow);
  //Get the remaining rows
  Data.ForEach(delegate(T obj)
  {
    HtmlTableRow htRow = new HtmlTableRow();
    obj.GetType().GetProperties().ToList().ForEach(delegate(PropertyInfo prop)
    {
      HtmlTableCell htCell = new HtmlTableCell();
      htCell.InnerText = prop.GetValue(obj, null).ToString();
      htRow.Cells.Add(htCell);
    });
    ht.Rows.Add(htRow);
  });
  return ht;
} 
```

试试看。你需要打电话`BuildTable<YourType>(list)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-01T02:25:21.573

.NETStandard 2.0 可以使用[HtmlTableHelper](https://www.nuget.org/packages/HtmlTableHelper)

### 小提琴演示：

*   [HtmlTableHelper ConsoleDemo](https://dotnetfiddle.net/DzddCl)
*   [HtmlTableHelper ASP.NET MVC 演示（JQuery 数据表）](https://dotnetfiddle.net/u9Ia6M)

### 延期

**ASP.NET Core MVC：**
创建 IHtmlHelperExtension.cs

```
using System.Collections.Generic;
using HtmlTableHelper;
using Microsoft.AspNetCore.Mvc.Rendering;
using Microsoft.AspNetCore.Html;

public static class IHtmlHelperExtension
{
    public static HtmlString ToHtmlTable<T>(this IHtmlHelper htmlHelper, IEnumerable<T> enums
        , object tableAttributes = null, object trAttributes = null, object tdAttributes = null
        , HtmlTableSetting HTMLTableSetting = null)
    {
        var html = enums.ToHtmlTable(tableAttributes, trAttributes, tdAttributes, HTMLTableSetting);
        return new HtmlString(html);
    }

    public static HtmlString ToHtmlTable<T>(this IHtmlHelper htmlHelper, System.Data.DataTable datatable
        , object tableAttributes = null, object trAttributes = null, object tdAttributes = null
        , HtmlTableSetting HTMLTableSetting = null)
    {
        var html = datatable.ToHtmlTable(tableAttributes, trAttributes, tdAttributes, HTMLTableSetting);
        return new HtmlString(html);
    }
} 
```

razor.cshtml

```
@Html.ToHtmlTable(new[] { new { Name = "ITWeiHan", Age = "25", Gender = "M" } })
/*
Result:<table><thead><tr><th>Name</th><th>Age</th><th>Gender</th></tr></thead><tbody><tr><td>ITWeiHan</td><td>25</td><td>M</td></tr></tbody></table>
*/ 
```

**ASP.NET MVC 5：**
创建 HtmlHelperExtension.cs

```
using System.Collections.Generic;
using HtmlTableHelper;
using System.Web;
using System.Web.Mvc;

public static class HtmlHelperExtension
{
    public static HtmlString ToHtmlTable<T>(this HtmlHelper htmlHelper, IEnumerable<T> enums
        , object tableAttributes = null, object trAttributes = null, object tdAttributes = null
        , HtmlTableSetting HTMLTableSetting = null)
    {
        var html = enums.ToHtmlTable(tableAttributes, trAttributes, tdAttributes, HTMLTableSetting);
        return new HtmlString(html);
    }

    public static HtmlString ToHtmlTable<T>(this HtmlHelper htmlHelper, System.Data.DataTable datatable
        , object tableAttributes = null, object trAttributes = null, object tdAttributes = null
        , HtmlTableSetting HTMLTableSetting = null)
    {
        var html = datatable.ToHtmlTable(tableAttributes, trAttributes, tdAttributes, HTMLTableSetting);
        return new HtmlString(html);
    }
} 
```

### 演示

**ASP.NET MVC 5 JQuery 数据表演示：**

```
using HtmlTableHelper;
//..
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var datas = new[] { new { Name = "ITWeiHan", Age = "25",Gender = "M" } };
        ViewBag.Table = datas.ToHtmlTable();
        return View();
    }
} 
```

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>AspNetMvcDemo</title>
    <link href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
</head>
<body>
    <div>
        @Html.Raw(ViewBag.Table)
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function () {
            $('Table').DataTable();
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T14:59:16.137

嗨，我更新了 .NET 核心版本的代码。祝你好运

```
 public static IHtmlContent Table<T>(IList<T> data, IList<(string propertyName, string colName)> headers)
    {
        //Tags
        var table = new TagBuilder("table");
        var tr = new TagBuilder("tr");

        //Add headers
        foreach (var s in headers)
        {
            var th = new TagBuilder("th");
            th.InnerHtml.Append(s.colName);
            tr.InnerHtml.AppendHtml(th);
        }
        table.InnerHtml.AppendHtml(tr);

        //Add data
        foreach (var d in data)
        {
            tr = new TagBuilder("tr");
            foreach (var h in headers)
            {
                var td = new TagBuilder("td");
                td.InnerHtml.Append( d.GetType().GetProperty(h.propertyName).GetValue(d, null)?.ToString());
                tr.InnerHtml.AppendHtml(td);
            }

            table.InnerHtml.AppendHtml(tr);
        }

        return table;
    } 
```

# bash - 根据名称中的数值对文件列表进行排序

> ID：13415716
> 
> 赞同：0
> 
> 时间：2012-11-16T11:30:26.887
> 
> 标签：bash, sorting

我有这个文件列表，我想对它们进行排序并将它们的名称增加一个整数值，我的代码工作正常，直到列表达到 10。然后 linux 'sort' 命令解释 '10' 中的第一个 '1' 并认为它是一个小于 9 的数字。有什么办法可以做到这一点？

这是我编写的用于遍历文件夹并增加文件名的代码：

```
#!/bin/bash

#set -x
ROOT=~/testing/
FILE_COUNT=$(ls -1 $ROOT | wc -l | awk '{print $1}')
COUNT=5

if [[ ${FILE_COUNT} -eq $COUNT ]]; then
    echo $COUNT backup files are there

    FILE_LIST=$(ls -1 $ROOT | sort -n -r)

    for file in $FILE_LIST; do
        echo $file
        file_new=`basename $file .zip`
        if [[ -e $ROOT$file ]]; then
            #mv $ROOT$file $ROOT${file_new%?}$COUNT.zip
            FILENUM=${file_new:${#file_new}-1}
            #echo "This is file # $FILENUM" next one is $(( FILENUM + 1 ))
            echo mv $ROOT$file $ROOT${file_new%?}$(( FILENUM + 1 )).zip
            mv $ROOT$file $ROOT${file_new%?}$(( FILENUM + 1 )).zip
        fi
        ((COUNT--))
    done
else
    echo Not $COUNT files, there are $FILE_COUNT
    COUNT=$FILE_COUNT
fi 
```

这些是排序行的结果：

```
macbookair:~ ilium007$ ls -l testing/ | sort -n -r -t "_"
total 40
-rw-r--r--  1 ilium007  staff  15 16 Nov 21:24 backup_9.zip
-rw-r--r--  1 ilium007  staff  15 16 Nov 21:24 backup_8.zip
-rw-r--r--  1 ilium007  staff  15 16 Nov 21:24 backup_7.zip
-rw-r--r--  1 ilium007  staff  15 16 Nov 21:24 backup_6.zip
-rw-r--r--  1 ilium007  staff  15 16 Nov 21:24 backup_10.zip 
```

如何创建此文件列表：

```
backup_10.zip
backup_9.zip
backup_8.zip
backup_7.zip
backup_6.zip 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:36:42.807

您需要指定要排序的键，在这种情况下`-k2`：

```
ls | sort -n -r -t "_" -k2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:41:52.680

此代码最终工作：

```
#!/bin/bash

set -x
ROOT=~/testing/
FILE_COUNT=$(ls -1 $ROOT | wc -l | awk '{print $1}')
COUNT=5
FILENAME=("backup_19.zip"
"backup_2.zip
"backup_29.zip
"backup_38.zip")
for i in ${FILENAME[@]}; do
BASE_FILE_NAME=`basename $i .zip`
FILENUM=${BASE_FILE_NAME##*_}
NEW_FILE_NUM=$(( FILENUM + 1 ))
NEW_FILE_SUFFIX=$(( FILENUM + 1 )).zip
TEST=${BASE_FILE_NAME%%_*}_${NEW_FILE_SUFFIX}
done
exit 
```

# ruby - Ruby Gem 服务器不提供宝石？

> ID：13415718
> 
> 赞同：1
> 
> 时间：2012-11-16T11:30:29.913
> 
> 标签：ruby, gem, teamcity

我正在尝试为 teamcity 创建一个新的验收代理...我按照这篇文章[http://docs.rubygems.org/read/chapter/18](http://docs.rubygems.org/read/chapter/18) ...

我在 IIS 中创建了一个名为 gemserver 的网站，并拥有一个端口 910。它有 gems 文件夹，其中包含像 activerecord-sqlserver-adapter-1.0.0.9250 这样的古老宝石......

我不知道 .gem 扩展名的 mime 类型，所以我只放了 application/x-ruby-gem。虽然当我手动输入 machinename:910/gems/Gem_Name 我可以下载它。

但是当我使用捆绑安装时，它给出了以下错误

```
Fetching source index for http://gems.github.com/
Fetching source index for my server url
Could not reach rubygems repository http://gems.github.com/, my server url:
910/, http://rubygems.org/
Fetching source index for http://rubygems.org/
Could not find gem 'activerecord-sqlserver-adapter (= 1.0.0.9250, runtime)' in a
ny of the gem sources listed in your Gemfile. 
```

请在 Gemfile 下方找到。

```
source "http://computerName:910/"
source :gemcutter

gem 'rake', '0.8.7'
gem 'cucumber', '0.6.2'
gem 'watir', '1.6.5'
gem 'activerecord', '2.3.8'
gem 'activerecord-sqlserver-adapter', '1.0.0.9250'
gem 'rspec', '1.3.0'
gem 'parseexcel', '0.5.2'
gem 'win32-api', '1.4.5'
gem 'nokogiri', '1.4.1'
gem 'win32-eventlog', '0.5.2'
gem 'win32console' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:56:32.633

> 我不知道 .gem 扩展名的 mime 类型，所以我只放了 application/x-ruby-gem。虽然当我手动输入 machinename:910/gems/Gem_Name 我可以下载它。

您的 gem 客户抱怨无法访问**源索引**，而不是 gem 本身。

在您链接到的文章中，第 4.2.4 项指示：

> 运行`generate_index`gem 命令以生成RubyGems 客户端所需的`yaml`和文件。`yaml.Z`

确保在您的 gems 目录中`generate_index`创建了`yaml`和`yaml.Z`文件。检查它们是否可以访问。这是您的 Gems 客户正在寻找的源索引。

例如 GitHub 的 gem 源码索引文件位于：http: [//gems.github.com/gems/yaml](http://gems.github.com/gems/yaml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:25:58.150

1.  使用 ip 地址而不是计算机名，看看是否能解决您的 504 问题

2.  现在尝试更新您的 gem，如果您在尝试访问名为 /quick 的文件夹时遇到 404 错误，则使用 --legacy 选项运行 generate_index 命令

> ```
> gem generate_index --legacy 
> ```

1.  将 .rz mimetype 添加到您的 IIS，以便它可以提供 rzip 文件。在 IIS mime 类型中，添加以下映射：

> .rz -> 应用程序/x-rzip

# javascript - 什么是（这个）；在javascript中的类方法结束时的意思？

> ID：13415719
> 
> 赞同：3
> 
> 时间：2012-11-16T11:30:33.367
> 
> 标签：javascript

`(this);`JavaScript中函数结束是什么意思？

我有一个包含函数的类。我可以`this.outputSome`在那个班级内多次打电话和/或我什么时候可以打电话？

```
__construct = function(constructor){
    //some code
}(this);

this.outputSome = function(obj){
    //some
}(this); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:33:22.340

这意味着它以`this`作为参数执行自身。

当你把括号放在函数表达式的末尾时，它是自执行的，并在它被定义后执行。括号内的事实`this`表明它`this`作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:36:34.360

从语法上讲，您定义了一个变量：

```
var x = function(param) { /* do stuff */ }; 
```

该变量是一个函数，因此您可以使用参数调用该函数并将返回值保存在另一个变量中：

```
var y = x(my_current_param); 
```

压缩成一行：

```
var y = function(param) { /* do stuff */ }(my_current_param); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:34:45.543

尝试搜索自调用函数。它在加载 JS 后立即调用函数本身。

# visual-studio-2012 - VS Web Essentials 2012 在导入保存时编译大师 LESS

> ID：13415729
> 
> 赞同：9
> 
> 时间：2012-11-16T11:31:04.507
> 
> 标签：visual-studio-2012, less, web-essentials

我正在尝试维护一个全局 .less 文件，该文件 @imports 应用程序的其余部分 .less 文件。

我目前正在使用 Web Essentials 扩展在 Visual Studio 2012 中开发此项目，该扩展在保存时会自动生成 css 文件。

然而，它只编译刚刚保存的 .less 文件，它是子文件，我想要上游“主” .less 文件 @import 要编译的当前文件。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T17:53:10.473

在最新的夜间构建中，您现在可以选择在构建时编译所有 LESS 文件。在更新链接的 LESS 文件时，这会解决导入链问题。在这里获取最新的每晚：http: //madskristensen.net/custom/webessentials2012.vsix? [1.8.9.1](http://madskristensen.net/custom/webessentials2012.vsix?1.8.9.1)

# html - CSS - 背景颜色包括边距

> ID：13415733
> 
> 赞同：18
> 
> 时间：2012-11-16T11:31:28.353
> 
> 标签：html, css

我正在尝试创建一个水平导航菜单。菜单需要全屏宽度，边框底部也需要整个宽度。我或多或少地实现了这一点，除了我希望菜单下有大约 15px 的边距，并且为此使用我的菜单的背景颜色。此外，当一个项目悬停时，如果有意义的话，悬停颜色也应该在边框下方延伸。

到目前为止，这是我的菜单的一个小提琴 - [http://jsfiddle.net/J74eE/2/](http://jsfiddle.net/J74eE/2/)

```
Tried to insert my code here but the li items got converted to bullets 
```

我在容器导航下设置了一个边距，我也希望在边距区域使用边框颜色。我也想以某种方式让 li 项目的悬停颜色也延伸到边框下方，但我不知道如何实现这一点。如果我将边距和边框放在 li 项目上，则边框不会占据屏幕的整个宽度。

**更新**

更新了我的小提琴以包含我想要实现的模型 - [http://jsfiddle.net/J74eE/3/](http://jsfiddle.net/J74eE/3/)

我不能使用填充，因为它会将边框底部向下推，我希望在它下面有一个带有背景颜色的边框。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-16T11:37:30.963

尝试用填充替换您的边距。在盒子模型中查看更多信息：http: [//www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)

```
.nav-menu {
   background-color:#FEFFE5;  
   clear:both;
   float:left;
   padding:0px 0px 15px 0px;
   border-bottom: 1px solid #dbd7d4;
   width:100%;
   font-size:13px;  
   z-index:1000; /* This makes the dropdown menus appear above the page content below */
   position:relative;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-16T11:55:05.993

我希望你正在寻找这个：[DEMO](http://jsfiddle.net/J74eE/6/)

**CSS**

```
.nav-menu:after {
  background-color:#FEFFE5;
  position:absolute;
  content:"";
  left:0;
  right:0;
  height:15px;
  top:40px;
} 
```

您可以使用**伪类**`after`来获得所需的结果。`before`

# c# - 在 Mac 上的 Mono 中使用 DllImport 出现 DllNotFoundException

> ID：13415735
> 
> 赞同：3
> 
> 时间：2012-11-16T11:31:39.757
> 
> 标签：c#, mono, dllimport, dylib, monomac

我试图在我的 Mono Mac 项目中使用 DLLImport 以使用我自己的 .dylib，但我得到了 DllNotFoundException。我猜这与我的 .dylib 有关，因为我可以使用现有的 .dylib 文件（例如 libmojoshader.dylib）来执行此操作。

这是我使用 DLLImport 的方法

```
[DllImport("libtestDylib.dylib")]
static extern int libsum(int a, int b); 
```

然后我调用 libsum 函数以查看它是否有效。

我发现使用**MONO_LOG_LEVEL="debug" MONO_LOG_MASK="dll" mono myGame.exe**命令通过终端运行应用程序是调试此类问题的好方法，但是我无法让我的应用程序 .exe 运行. 我尝试使用 build 文件夹中的 .exe 和 .app/contents/MonoBundle 中的一个，我还尝试在 .app/contents/MacOs 中运行文件，因为在我发现的某些地方引用了这个文件研究。

最后一个文件抛出**“文件不包含有效的 CIL 图像”。**和另外两个**“应用程序包中没有 Info.plist 文件或 Info.plist 文件中没有 NSPrincipalClass”。**

所以，我猜第一步是设法通过终端运行应用程序，以获得正确的调试信息，了解为什么找不到我的 .dylib。

我制作的 .dylib 是用 XNA4 制作的空 BSD C 库。

**编辑**

我什至现在似乎都无法让现有的 dylib 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:46:45.383

我通过使用单个 c# 文件创建一个新的 Mono Mac 项目来发现问题，然后我通过终端编译该文件并使用调试命令运行它。通过终端反馈发现程序在哪里搜索 .dylib，并且我制作的 lib 是用错误的架构构建的，而这只是通过构建 32 位系统来解决。

# css - 编写 MVC 3 应用程序时的表单设计方法

> ID：13415741
> 
> 赞同：1
> 
> 时间：2012-11-16T11:31:57.390
> 
> 标签：css, asp.net-mvc, asp.net-mvc-3, user-interface

我最近开始编写 MVC 3 应用程序，我想知道你们用什么方法来制作 GUI。

显然没有设计视图，所以要使用 Dreamweaver 之类的所见即所得工具，还是只编写应用程序并在最后手工制作 CSS 样式？

任何想法/经验表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:41:22.520

我一直都是自己编写代码。我非常相信 Donald Knuth 关于 WYSIWYG 的那句老话 = 你所见即所得。我对所见即所得编辑器的一大问题是他们往往在幕后弄得一团糟，尤其是在样式方面。你会得到你想要的结果，但根据我的经验，你自己手工制作页面和样式会产生一个在可维护性和性能方面都非常出色的产品。

至于页面本身的编码，我必须说我最近搬到了 Razor，确实给我留下了深刻的印象。我相信这是使 ASP.NET 页面编码更容易做的最好的事情。与 ASP.NET 中使用的旧 <% 语法相比，该语法易于学习且干净得多。

如果您还没有使用过 Razor，有一点需要注意的是，像这样的某些代码......

```
<div>
<% if (something)
   { %>
       HelloWorld</div>
<% }
   else
   { %>
       GoodByeWorld</div>
<% } %> <!-- etc... --> 
```

...转换为 Razor 语法时将不起作用，因为 Razor 实际上会解析您的代码。在这里，Razor 会抱怨，因为 div 元素没有关闭。

此类问题的解决方案是使用`@helper`语法创建变量和页面内 HTML 帮助程序来管理逻辑创建的代码块。对我来说，这是对 ASP.NET 的**巨大**改进，无论是在可读性还是在减少错误方面。我事先构建了复杂的组件，然后将它们插入到 HTML 框架中。这使得页面结构更具可读性并且更易于调试。

所以，回到你的问题：对我来说，开发 MVC 应用程序的最佳方式是使用 Razor 语法手动编写页面并编写自己的 CSS。我发现智能感知非常好，尤其是在 VS2012 中所有与 JavaScript 无关的东西（包括 CSS），所以如果你没有大量的原始 Web 开发经验，它应该可以帮助你通过大部分粗糙的补丁，并且会教你很多同时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:56:56.310

在视图模型中做尽可能多的工作。如果你在视图中与视图模型作斗争，你只是为自己做了很多额外的工作。如果您发现您开始对视图模型进行大量操作以获取属性以在视图中显示您想要的方式，那么请考虑更改视图模型本身。

# ios - 在 iOS 中将图像添加到视频中

> ID：13415742
> 
> 赞同：0
> 
> 时间：2012-11-16T11:31:57.680
> 
> 标签：ios, video, uiimage, avfoundation, avassetexportsession

我正在开发一个视频应用程序，它允许合并从相机胶卷中选择的剪辑。但是，也允许用户包含图像。如果用户选择一个图像和剪辑，这个图像应该是视频的一部分，播放时间为 5 秒（假设用户选择一个 10 秒的视频，一个图像和另一个 20 秒的视频，那么最终的视频应该是35 秒，图像是视频的一部分）。我怎样才能做到这一点？

提前致谢。

# mysql - GROUP BY 一个键并选择另一个键上具有最高值的那个

> ID：13415743
> 
> 赞同：2
> 
> 时间：2012-11-16T11:31:57.607
> 
> 标签：mysql, sql, group-by

我有一个具有以下结构的 MySQL 表

```
+----+----------+---------+
| id | incident | message |
+----+----------+---------+
| 1  | 3        | 1       |
| 2  | 3        | 2       |
| 3  | 5        | 1       |
| 4  | 6        | 0       |
| 5  | 6        | 4       |
| 6  | 6        | 1       |
| 7  | 7        | 1       |
| 8  | 7        | 2       |
+----+----------+---------+ 
```

这是简化的数据，但它是同一件事。

我想要的是`GROUP BY` `incident`但只获取那些具有最高`message`价值的行。

所以采取上面的数据我想获取以下`id`s：`2, 3, 5, 8`

我做了一个`GROUP BY incident ORDER BY message`声明，但是没有用。我对 MySQL 中的分组内容不是很熟悉，所以如果你能在这里帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:34:03.133

查询有子查询，每个*查询*都获得*最大值* 。然后它的结果是根据两个条件与原始表本身进行连接，即它与 the和 the`message``incident``incident``message`

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT incident, MAX(message) maxM
            FROM tableName
            GROUP BY incident
        ) b ON a.incident = b.incident AND
                a.message = b.maxM 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/94314/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:58:44.790

试试这个：

```
SELECT * FROM 
(SELECT * FROM tablename ORDER BY message DESC) AS A 
GROUP BY incident 
```

# css - Less.css 类之间的相对链接

> ID：13415747
> 
> 赞同：0
> 
> 时间：2012-11-16T11:32:14.090
> 
> 标签：css, less

我正在编写某种供个人使用的 CSS 框架，但遇到了问题。如果您是一位经验丰富的 CSS 编写者，那么我很确定您熟悉 LESS.CSS。所以...

我有自己的调色板存储在 LESS 变量中，如下所示：

```
 @color-red: #...;
    @color-green: #...;
    @color-blue: #...; 
```

我将每种颜色分配给一个特定的类：

```
 .bg-red { background: @color-red; }
    .bg-green { background: @color-green; }
    .bg-blue { background: @color-blue; } 
```

然后我有一个名为`block`：

```
 .block {
         display: block;
         float: left;
         padding: 10px;
         margin: 10px;
    } 
```

这件事的目的`.block:hover`是改变当前`block`元素的背景，并增加它——比如说——#222。通常，这看起来像：

```
 .block:hover {
         background: @background + #222;
    } 
```

我唯一的问题是，我们不知道`@background`这里是什么，因为我们创建的 div`<div class="block bg-blue">`中的`bg-...`部分可以是调色板中的任何内容。

所以我认为我需要某种相对命名来定位当前背景。你能帮我解决这个问题吗？

PS：如果你认为我没有正确解释，想象一下这是不是 PHP 并且我们在 CSS/LESS 中这样做：

```
 $background += 222; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:46:26.573

根据我的研究和每天在工作中使用 LESS。我不相信有一种方法可以在仅使用 LESS 处理元素后获得它的颜色。我猜您将不得不使用 Jquery 或某种脚本来执行此操作。

这是一个有很多工具来操作颜色的插件。[jQuery 颜色插件 xcolor](http://www.xarg.org/project/jquery-color-plugin-xcolor/#meth_multiply)

您可能还需要另一个函数将找到的 RGB 元素颜色转换为十六进制，以便您可以添加其他颜色。[Jquery 将 RGB 转换为 HEX 颜色值](http://www.jquery4u.com/jquery-functions/jquery-convert-rgb-hex-color/#.T_aVsCITFow)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:31:53.467

编译 LESS 后，您无法“读取”实际颜色。但是，您可以使用颜色类而不是`.block`悬停，因为这是您控制颜色的依据。LESS 让这一切变得简单：

```
@color-red: #c00;
@color-green: #0c0;
@color-blue: #00c;

.makeHover(@color) {
   background: @color + #222;
}

.bg-red { 
    background: @color-red; 
    &:hover {.makeHover(@color-red)}
 }
.bg-green { 
    background: @color-green; 
    &:hover {.makeHover(@color-green)}
 }
.bg-blue { 
    background: @color-blue; 
    &:hover {.makeHover(@color-blue)}
 } 
```

这产生了这个CSS：

```
.bg-red {
  background: #cc0000;
}
.bg-red:hover {
  background: #ee2222;
}
.bg-green {
  background: #00cc00;
}
.bg-green:hover {
  background: #22ee22;
}
.bg-blue {
  background: #0000cc;
}
.bg-blue:hover {
  background: #2222ee;
} 
```

您还可以[使用内置的颜色功能进行变暗](http://lesscss.org/#-color-functions)。

如果你真的想要更通用的 css，那么用伪类做一些事情，[比如这个小提琴演示](http://jsfiddle.net/6Nzke/3/)。如果仅针对 CSS3 浏览器，那么您可以消除该`:before`小提琴中的元素并在元素上使用颜色`rgba()`格式。`background``.block`

# c++ - 开关中的条件初始化

> ID：13415752
> 
> 赞同：9
> 
> 时间：2012-11-16T11:32:53.433
> 
> 标签：c++, initialization, switch-statement

为什么这个代码片段运行良好

```
void foo(int i)
{
    switch(i) {
    case 1:
    {
        X x1;
        break;
    }
    case 2:
        X x2;
        break;
    }
} 
```

而下面给出了编译错误（'x1'的初始化被'case'标签跳过）？

```
void foo(int i)
{
    switch(i) {
    case 1:
        X x1;
        break;
    case 2:
        X x2;
        break;
    }
} 
```

我知道使用大括号会引入一个新的范围，因此在我们点击它的左大括号之前不会为 x1 分配存储空间。但是 x2 仍然在不带括号的情况下在标签内初始化。这也不应该是一个错误吗？

我认为在两个代码片段中都可以有条件地跳过 x2 的初始化

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T11:38:16.983

**1：有效**

```
 case 1:
        {
        X x1;
        break;
        } 
```

如果它没有达到条件，`x1` **则不能被任何进一步的语句使用**，因此不会出现运行时错误。`x1`不尝试存在于大括号之外。

* * *

**2：无效**

```
 switch(i) {
    case 1:
        X x1; //don't break
        i = 2;
        ...
        ...
        ...
     case 2:
        x1.someOperation()

 } 
```

在上面，如果`i`最初`2`是，你会 在构造对象`x1.someOperation()`之前命中。`X x1`

**如果**允许编译，它是否会抛出运行时错误，这取决于**case:1**是否在 2 之前执行（并且对象已被构造）。因此，编译器不允许这样做。

* * *

**不能**具有用户定义构造函数的普通旧数据类型也允许这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T11:38:40.680

请注意，只有在`X`非 POD 时才会出错。如果`X`是 POD，那么您将不会收到任何错误（当您不使用大括号时）。

在非 POD 的情况下，您**不能**跳过在同一范围内声明的变量的初始化。当你不使用大括号时，它会导致编译错误，因为它`switch`允许你**跳过**这些变量的初始化，但同时它使它们可以在`case`它下面的所有标签中使用。那很危险。

沿着这条线思考：如果`i`是`2`，那么控件将`case`直接跳转到第二个而不初始化`x1`，然后你将能够`x1`在第二种情况下使用，即使它没有初始化。那没有意义。因此，语言要求它是错误的。

* * *

顺便说一句，要了解 POD 和非 POD 是什么，请参阅以下主题：

*   [C++ POD 类型不能有任何构造函数吗？](https://stackoverflow.com/questions/5442717/cant-c-pod-type-have-any-constructor)
*   [什么叫通过花括号赋值？可以控制吗？](https://stackoverflow.com/questions/5666321/what-is-assignment-via-curly-braces-called-and-can-it-be-controlled)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T11:49:19.543

一般的想法是 each`case`不是一个孤立的范围：下面的代码`case 2`可以引用`x1`变量，因为它之前已经在同一范围内声明过（即：整个`switch`块）：当然，它不会被初始化，它会导致错误。

添加大括号实际上是在拆分每个`case`的范围，允许您在其中声明`case 1`不能在其外部引用的变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:37:35.427

在条件语句中创建变量不是一个好主意。我建议您在语句之外创建变量`switch`，然后根据条件为它赋值`i`：

```
void foo(int i) {

    X x1;

    switch(i) {
        case 1:
            x1 = ...;
            break;
        case 2:
            x1 = ...;
            break;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T16:51:54.703

在失败的版本中，声明直到标签`x1`后的几行才超出范围。`case 2:`那就是问题所在。的声明是可以的，因为在声明和它的范围结束之间`x2`没有标签。`case`

# entity-framework-5 - 使用 Windows 服务作为 ef 客户端的数据库连接问题

> ID：13415753
> 
> 赞同：1
> 
> 时间：2012-11-16T11:32:54.717
> 
> 标签：entity-framework-5

我是新手`Entity Framework`，经过速成课程和一些在我的雇主周围玩耍的人决定使用 ef 5，代码优先。

我已经将 dbcontext 派生词与存储库和连接字符串一起单独放在一个程序集中。这个想法是创建一个可以跨项目重用的程序集。

数据库程序集中的连接字符串如下所示：

```
<add name="LmsDb" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=LmsDb;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\LmsDb.mdf;;MultipleActiveResultSets=true" providerName="System.Data.SqlClient" /> 
```

虽然使用数据库项目（客户端）的程序集上的连接字符串如下所示：

```
<add name="LmsDb" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=LmsDb;Integrated Security=SSPI;MultipleActiveResultSets=true" providerName="System.Data.SqlClient" /> 
```

我创建了一个 MVC 项目，它可以很好地使用它，并且我的所有集成测试都可以很好地使用这个连接字符串。

当我必须创建某种调度程序逻辑以以某些可配置的时间间隔遍历数据库并根据那里的数据执行一些操作时，就会出现问题。我决定通过创建一个带有计时器的简单 Windows 服务来测试这一点，该计时器为某些查询执行 ef 5 代码。

计时器设置为每分钟执行一次全选查询，但是当发生这种情况时，尽管我知道数据库中有数据，但我的查询没有返回任何结果。

当我查看 时`DbContext.Connection.State`，它设置为已关闭。

我究竟做错了什么 ？

我尝试`((ObjectContextAdapter)my context).ObjectContext.Connection.Open()`根据 Julie Lerman 使用显式打开连接。

这似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:01:20.703

这得到了解决。请看我的评论。

# java - Maven 无法访问（现有的）pom 文件

> ID：13415756
> 
> 赞同：1
> 
> 时间：2012-11-16T11:33:09.563
> 
> 标签：java, eclipse, maven, maven-resources-plugin

我正在尝试`java`使用`maven`. 我已经用正确的`click on pom file` >> in (m2eclipse 连接器)`Maven`试过了`Maven Install``Eclipse`

```
Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.5:resources (default-resources) ... 
Could not transfer artifact org.apache.maven.shared:maven-filtering:pom:1.0 from/to maven-central (http://repo.maven.apache.org/maven2/) 
```

然后我在命令提示符下尝试了它`mvn clean compile`，但我得到了这个屏幕截图：

![在此处输入图像描述](../Images/1a8f7bf783223d76817bcebc4e1ef23a.png)

在我看来，即使我可以使用相同的 URL 在浏览器中访问 pom 文件，`maven`也无法访问。`maven-filtering-1.0 file`我是新手，`maven`不知道如何解决这个问题。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:46:52.097

我已经解决了这个问题。这就是我所做的。它可能有助于其他人面临同样的困难。

我只是删除了本地存储库（~/.m2/repository）中的所有内容。然后我跑了`mvn install`，一切正常。

同样，我没有代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:39:46.997

如果你在代理后面，你可以在你的`~/.m2/setting.xml`

```
<settings>
  ....
  <proxies>
    <proxy>
      <id>Proxy name</id>
      <active>true</active>
      <protocol>http</protocol>
      <host>your.proxy.hostname.or.IP</host>
      <port>8080</port>
      <!-- omit these auth params if not needed: -->
      <username>domain\\username</username>
      <password>123456</password>
      <nonProxyHosts>localhost|127.0.0.1|...</nonProxyHosts>
    </proxy>
  </proxies> 
```

如果没有，请尝试从命令行交谈`telnet`或POM：`wget`

```
wget http://repo.maven.apache.org/..../maven-filtering-1.0.pom 
```

并尝试从那里确定哪里出了问题。

干杯，

# c# - 如何从可执行文件设置项目文件的文件路径？

> ID：13415758
> 
> 赞同：0
> 
> 时间：2012-11-16T11:33:10.647
> 
> 标签：c#, winforms, filepath

我是 C# 的新手，如何设置项目文件的文件路径我已经尝试过这些，但它提供了默认的 Windows 文件路径，如何做到这一点？

```
 sfdlg.InitialDirectory = Application.StartupPath + @"..\..\";
    Application.StartupPath---> is my excutable file path. from this path to come back two `root folders` i use `@"..\..\"` 
```

有没有办法回到两个根文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:45:06.733

您已经反转了路径规范 -`..`应该在路径的*开头*（假设没有驱动器名称）。

使用路径的一种安全方法是将它们与[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)类一起使用：

```
Path.Combine(Path.Combine(Application.StartupPath, ".."), ".."); 
```

以上应该可以解决问题。

# python - 移动 Matplotlib 中绘制的列表的 x 值

> ID：13415759
> 
> 赞同：1
> 
> 时间：2012-11-16T11:33:15.077
> 
> 标签：python, matplotlib, fft

在列表（大小 1024）上执行 FFT 和 FFTShift 之后，我现在正在尝试绘制输出。我在尝试以我想要的方式显示数据时遇到了一些问题。

![http://i.imgur.com/HTpiX.png](../Images/85e8cd9a6ccdf52689914b1f486fb1a0.png)

目前 x 轴显示 bin 编号。在 FFT 移位之后，频率 0 Hz 位于 bin 编号 512 处，每个 bin 值额外增加 2000/1024 Hz，因此 bin 0 应为 -1000 Hz，bin 1023 应为 +1000 Hz；bin 1 应为 -998.05 Hz，bin 1022 应为 +998.05，以此类推。

我试过使用 xticks 来显示这个：

```
xlocs, xlabs = plt.xticks()
plt.xticks([0,(len(a)*0.25),(len(a))/2,(len(a)*0.75),len(a)],[(-1000),(-500),0,500,1000]) 
```

但是后来我无法实际读取图表上特定点的 x 值，而只显示 y 值和 x=。有什么办法可以解决这个问题吗？

此外，我还想将整个图表向左平移 302 个 bin。无论如何我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:16:10.530

您应该更改绘制图形的方式，即在绘制之前从箱中计算频率：

```
import numpy as np
import matplotlib.pyplot as plt

bins = np.arange(-512, 512)
x = 2000.*bins/1024
plt.plot(x, fft_data) 
```

然后，您可以使用调整显示的频率范围`plt.xlim`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T19:03:53.987

您还可以使用辅助函数[`fftfreq`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fft.fftfreq.html#numpy.fft.fftfreq)，它会为您提供适当缩放的频率。然后，您可以`fftshift`同时应用于`fft`和`freq`数组。如果你然后绘制为

```
plot(freq,fft_vals) 
```

你会得到你想要的结果。

`x`手动设置 xticks 时无法读取值的原因是您可以将*任何内容*作为刻度标签（例如字符串、非单调序列等）放入，因此 matplotlib 不知道如何确定`x`值画布上的任意点（请参阅[在 matplotlib 中设置 tickslabel 禁用鼠标光标位置](https://stackoverflow.com/questions/12605646/setting-tickslabel-in-matplotlib-disables-mouse-cursor-position/12607095#12607095)）。

# apache - 在 laravel 中出现 500 内部服务器错误

> ID：13415762
> 
> 赞同：2
> 
> 时间：2012-11-16T11:33:17.957
> 
> 标签：apache, laravel, laravel-3

我是新手`laravel`。我正在尝试`laravel`根据教程进行配置`https://github.com/jasonlewis/laravel-blog/wiki/Creating-a-simple-blog-in-Laravel-3`。我已经创建了`admin`文件夹，但是当我尝试运行`http://localhost/blog/admin`时，出现以下错误：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator at postmaster@localhost to inform them of the time this error occurred, and the actions you performed just before this error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request.

Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 Server at localhost Port 80 
```

上时`localhost/blog`。一切顺利，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T16:46:27.800

确保您的文件夹具有`755`权限。我经许可清除了这个问题。这是做任何其他人的第一件事。你可以得到成功的输出。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:09:08.350

确保您的文档根目录指向 localhost/blog/public/。如果 localhost/blog 拉出 Laravel 启动屏幕或您在主视图中设置的任何内容，那么这是一个 htaccess 问题。很可能是文档根目录没有朝着正确的方向前进。

# jquery - 分组数据时是否可以修改summaryType:'avg'函数？

> ID：13415766
> 
> 赞同：3
> 
> 时间：2012-11-16T11:33:29.647
> 
> 标签：jquery, jqgrid

我正在设计一个网格，它根据区域划分按月显示数据，然后使用 jqgrids 组将每个划分分解为团队。

我想将每个部门中所有团队的平均值显示为每个部门的组摘要。我为每一列设置了 summaryType:'avg' ，但是平均值似乎包含空白值，我希望它忽略它。

是否可以修改 avg 函数以排除空白甚至创建我自己的？

编辑：作为一个附带问题，可以从网格中提取汇总数据，因为我想为每个部门的汇总数据生成图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:24:22.093

我不确定我是否理解正确。你没有发布和 JavaScript 代码，所以我不得不猜测。

这很棘手，但可以定义`summaryType`为函数。通过这种方式，您可以实现任何自定义计算。

[答案](https://stackoverflow.com/a/7622718/315935)提供了一个如何实现`summaryType`为函数的示例。[在使用分组摘要的情况下，另一个答案](https://stackoverflow.com/a/9422170/315935)也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-27T11:05:37.640

这是 avg 函数示例：

```
function avgFunc(val, name, record){
var v = parseFloat((record[name]||0));
var cnt = 1, vsum = v;
if (val) {
    cnt += val.cnt;
    vsum += val.vsum;
    v = vsum/cnt;
}
val = new Number(v);
val.vsum = vsum;
val.cnt = cnt;
return val;
} 
```

# ios - 导出文本或 pdf

> ID：13415771
> 
> 赞同：0
> 
> 时间：2012-11-16T11:33:46.613
> 
> 标签：ios, xcode, pdf, text, export

在我的应用程序中，用户可以将一些信息添加到他的列表中，最后他想通过电子邮件将该列表发送给其他人。我只是想知道如何导出该列表？是否可以将其导出为 pdf 或 txt 文件？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:47:49.643

如果您正在搜索 iOS5，请检查[此链接](http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1)。

[http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1)

**编辑**：`UI` `elements`像这样使用：

```
 [yourView.layer renderInContext:UIGraphicsGetCurrentContext()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:49:12.183

好的，我使用了这段代码，不幸的是我丢失了找到答案的页面，很抱歉没有引用它。这是神奇的代码：

```
-(void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, mainView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [mainView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
//    NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
} 
```

# iphone - 从 NSString 中提取子字符串

> ID：13415776
> 
> 赞同：6
> 
> 时间：2012-11-16T11:34:07.430
> 
> 标签：iphone, objective-c, ios, nsstring

我想从 NSString 中提取子字符串。怎么可能。

示例：字符串是 **abcdefwww.google.comabcdef**

输出：**www.google.com**

在主字符串中，没有预定义来自哪个 url，可能是 google.com 或 yahoo.com 等。

所以我必须在 **www中找到 w 的 Start 位置和在****.com**中找到 m 的最后位置。

所以我的问题是如何找到**w**在**www**中的起始位置和**m**在**.com**中的位置，所以我提取了这部分

由于问题而编辑：

我们如何从这个字符串 asdfwww.mywebsite.co.ukasdfajsf 中提取 www.mywebsite.co.uk

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T11:39:58.903

来自字符串的子字符串，如下所示

```
 - (NSString *)extractString:(NSString *)fullString toLookFor:(NSString *)lookFor skipForwardX:(NSInteger)skipForward toStopBefore:(NSString *)stopBefore 
    {

        NSRange firstRange = [fullString rangeOfString:lookFor];
        NSRange secondRange = [[fullString substringFromIndex:firstRange.location + skipForward] rangeOfString:stopBefore];
        NSRange finalRange = NSMakeRange(firstRange.location + skipForward, secondRange.location + [stopBefore length]);

        return [fullString substringWithRange:finalRange];
    } 
```

使用这种方法，如下所示...

```
NSString *strTemp = [self extractString:@"abcdefwww.google.comabcdef" toLookFor:@"www" skipForwardX:0 toStopBefore:@".com"];
NSLog(@"\n\n Substring ==>> %@",strTemp); 
```

欲了解更多信息，请参阅下面的链接..

[需要帮助的函数提取字符串字符串](http://iphonedevsdk.com/forum/iphone-sdk-development/32341-help-needed-function-extract-string-string.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-16T12:26:02.277

您可以使用以下代码获取子字符串

```
-(NSString*)stringBetweenString:(NSString*)start andString:(NSString *)end withstring:(NSString*)str
{
    NSScanner* scanner = [NSScanner scannerWithString:str];
    [scanner setCharactersToBeSkipped:nil];
    [scanner scanUpToString:start intoString:NULL];
    if ([scanner scanString:start intoString:NULL]) {
        NSString* result = nil;
        if ([scanner scanUpToString:end intoString:&result]) {
            return result;
        }
    }
    return nil;
} 
```

要调用这个，

```
NSString *cURL=[self stringBetweenString:@"www." andString:@".com" withstring:@"abcdefwww.google.comabcdef"];

NSString *cAudiolink=[NSString stringWithFormat:@"www.%@.com",cURL]; 
```

cAudiolink 是结果字符串

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T12:39:24.373

您可以使用正则表达式。

使用这个类别：

```
@implementation NSString (MyRegex)

- (NSString *)firstMatchWithRegex:(NSString *)regex error:(NSError **)e {
    NSError *error = nil;
    NSRegularExpression *re = [NSRegularExpression regularExpressionWithPattern:regex options:NSRegularExpressionSearch error:&error];

    if(re == nil) {
        if(e) *e = error;
        return nil;
    }

    NSArray *matches = [re matchesInString:self options:0 range:NSMakeRange(0, [self length])];

    if([matches count] == 0) {            
        NSString *errorDescription = [NSString stringWithFormat:@"Can't find a match for regex: %@", regex];
        NSError *error = [NSError errorWithDomain:NSStringFromClass([self class]) code:0 userInfo:@{NSLocalizedDescriptionKey : errorDescription}];
        if(e) *e = error;
        return nil;
    }

    NSTextCheckingResult *match = [matches lastObject];
    NSRange matchRange = [match rangeAtIndex:1];
    return [self substringWithRange:matchRange];
}

@end 
```

您可以致电：

```
[@"abcdefwww.google.comabcdef" firstMatchWithRegex:@"(www.*\\.com)" error:nil] 
```

返回：

```
www.google.com 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-16T12:41:32.013

谷歌搜索后，我得到了问题的解决方案。我实现了下面的代码，它对我来说很好

```
 NSString *finalURL;
   NSString *string=@"abcdefwww.yahoomail.comabcdef";

   NSRange range = [string rangeOfString:@"www"];

   NSString  *tempUrl=[string substringFromIndex:range.location];

   NSRange range2 = [tempUrl rangeOfString:@".com"];

   finalURL=[tempUrl substringWithRange:NSMakeRange(0, range2.location+4)];

   NSLog(@"your URL is %@",finalURL); //prints www.yahoomail.com 
```

# c# - 在 DataGridView 中禁用 ContextMenuStrip 的右键单击

> ID：13415777
> 
> 赞同：0
> 
> 时间：2012-11-16T11:34:11.857
> 
> 标签：c#, winforms

我有一个带有 dgv1.CellClick 的 DataGridView。

使用鼠标左键单击单元格时会显示上下文菜单。发生这种情况时，它还会将位置设置为当前单元格，但是当我单击鼠标右键时，上下文菜单条也会显示出来。我想在单击鼠标右键时禁用或隐藏上下文菜单。

我试过了：

```
 private void dgv1_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == System.Windows.Forms.MouseButtons.Right)
            cms1.Hide();
    } 
```

这没有用。

有人有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T21:10:57.407

```
 private MouseButtons e_Button = new MouseButtons();
    private void dgv1_MouseDown(object sender, MouseEventArgs e)
    {
        e_Button = e.Button;
    }

    private void cms1_Opening(object sender, CancelEventArgs e)
    {
        if (e_Button == System.Windows.Forms.MouseButtons.Right)
            e.Cancel = true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:39:41.880

也许有了这个：

```
private void dgv1_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)  {
        if ((e.Button != Windows.Forms.MouseButtons.Right)) {
            cms1.Show(datagridview, e.Location);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:42:51.717

试试这个

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    e.Control.ContextMenu = new ContextMenu();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:44:18.577

```
private void dataGridViewExample_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    e.Control.ContextMenu = new ContextMenu();
} 
```

# c# - 验证 smtpHost:port 字符串

> ID：13415779
> 
> 赞同：0
> 
> 时间：2012-11-16T11:34:31.703
> 
> 标签：c#, regex

我无法编写正则表达式来验证和分组以下内容：

*   c1dev01 --> 有效
*   c1dev01:25 --> 有效
*   192.168.2.3 --> 有效
*   192.168.2.3:189 --> 有效
*   c1dev01: --> 有效
*   c1dev01:aa --> 无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:50:29.607

我想正确范围的验证最好不要在正则表达式中完成，而是在一个单独的步骤中完成。但是，正则表达式非常适合验证字符串格式并一次性提取端口号。对于格式，我们最多需要一个冒号，并且只需要它右边的数字（最多 5 个）。这对应于以下模式字符串：

```
@"^([^:]+)(?:[:](\d{0,5}))?$" 
```

其中 ^ 和 $ 将模式锚定到字符串的开头和结尾。如果在 Regex.Match() 中使用此模式，则可以在 match.Groups[1].Value 中找到主机名，在 match.Groups[2].Value 中找到端口号，以检查它是否不超过 65535。

当然，您可以进一步限制主机允许的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:03:20.810

^(?(\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3})|(\w+))(:(?\d{0 ,5}))*$

获取主机/IP 使用`match.Group["host"]`并获取端口使用`match.Group["posrt"]`。

# php - php以相同的方式对2个数组键进行排序

> ID：13415780
> 
> 赞同：1
> 
> 时间：2012-11-16T11:34:31.220
> 
> 标签：php, arrays, sorting, key

我正在为一个我无法解决的愚蠢问题而苦苦挣扎，可能是因为我的脑袋疯了。但真的，我想不通。这可能比我想象的要简单，但我也无法在网上找到解决方案。我有这个数组，按我想要的方式排序：

```
array (size=3)
  9 => float 124.58194
  2 => float 52.8428
  8 => float 25.041806 
```

然后，另一个数组具有相同的键，但顺序不同

```
array (size=3)
  8 => string '3' (length=1)
  9 => string '3' (length=1)
  2 => string '2' (length=1) 
```

我可以使用第一个的顺序按键对第二个进行排序吗？如果是这样，怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:43:18.267

试试这个，我测试过，但它会杀死门徒中没有主人的任何钥匙。

```
$master = array(
        9 => 999
    ,   2 => 222
    ,   8 => 888
);

$disciple = array(
        8 => 8989
    ,   9 => 9090
    ,   2 => 2020
);

$disciplined = discipline($master, $disciple);
var_dump($disciplined);

function discipline($master, $disciple) {
    $like_keys = array_intersect_key($master, $disciple);
    foreach($like_keys as $key => &$value) {
        $value = $disciple[$key];
    }
    return $like_keys;
} 
```

# php - print_r() 显示 sql 语句而不是打印 pdo 结果集？

> ID：13415781
> 
> 赞同：2
> 
> 时间：2012-11-16T11:34:37.460
> 
> 标签：php, pdo

我正在尝试调试为什么以下查询不返回结果集。当我尝试使用 print_r 调试它以查看此 sql 返回的内容时，我得到的是 sql 语句本身而不是结果集。有人可以帮我解释为什么这不返回结果集吗？

编辑：我正在使用 PHP 数据对象的查询功能

```
 $query = "select * from categories order by categoryID";

  $categories = $db->query($query);

  print_r($categories); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T11:40:17.607

因为该方法返回一个`PDOStatement`对象，如[手册中所述](http://php.net/manual/en/pdo.query.php)，而不是关联数组。您必须首先从该对象中获取结果集。

您可以使用[`fetchAll()`](http://www.php.net/manual/en/pdostatement.fetchall.php)在关联数组（或根据您的口味的任何其他 PDO 获取方法）中获取所有结果：

```
print_r($categories->fetchAll()); 
```

当您遇到此类问题时，始终建议您阅读手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:41:49.127

```
$sql = "select * from categories order by categoryID";

$query = $db->query($sql);

$categories = $query->fetchAll();

echo "<pre>";
print_r($categories);
echo "</pre>"; 
```

# redis - 有没有公 司为redis提供企业支持？

> ID：13415783
> 
> 赞同：0
> 
> 时间：2012-11-16T11:34:44.793
> 
> 标签：redis, jedis

我们组织中有一个用例，使用 redis 作为内存数据库最适合作为解决方案。但要使用它，我们需要有企业支持。我在谷歌上做了很多搜索，但找不到提供企业支持的。

如果您知道任何提供相同服务的公司，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:33:42.820

您可能需要与运行[Redis Cloud的](http://redis-cloud.com/)[Garantia Data](http://garantiadata.com/)或[RedisToGo](http://redistogo.com)等公司联系以获取企业支持选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T15:52:07.687

您可能想尝试托管 redis 提供商[http://openredis.com](http://openredis.com)，我不确定他们是否提供企业级支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T20:27:26.167

[http://www.gopivotal.com/big-data/redis](http://www.gopivotal.com/big-data/redis)

Pivotal 是该项目的主要支持者和作者的雇主。

# java - 合并多个事件流

> ID：13415785
> 
> 赞同：1
> 
> 时间：2012-11-16T11:34:45.197
> 
> 标签：java, algorithm, events

假设我有*N*个数据事件流，我想将它们组合成一个，使用一些排序（例如*时间戳*）。假设`EventStream`定义为：

```
class EventStream{

    Event peek();

    Event next();
} 
```

现在我想采用*N*个事件流，将它们包装在一个流中，这将强制排序。但是，我不想简单地遍历所有流并将它们添加到一个`priorityQueue`- 我不希望内存中的所有事件，因为我会很快耗尽堆空间。我想要一种动态方法，其中每个之后的组合流`next()`计算出下一个事件应该是什么。我可以每次扫描*N*个流并找出下一个值是什么，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:58:16.187

您可以避免缓存所有内容并通过只查看它们的头部来对流进行过多的查找，并且仅在需要时才这样做。我建议你写一个`MergedEventStream`类似的：

```
public class MergedEventStream implements EventStream {

    private ArrayList<EventStream> merged = new ArrayList<EventStream>();
    private int nextIndex = -1;

    public MergedEventStream(Collection<EventStream> toMerge) {
        merged.addAll(toMerge);
        findNext();
    }

    public Event peek() {
        if (nextIndex == -1 && findNext() == false) {
           throw new NoSuchElementException();
        } else {
           Event e = merged.get(nextIndex).peek();
           return e;
        }
    }

    public Event peek() {
        if (nextIndex == -1 && findNext() == false) {
           throw new NoSuchElementException();
        } else {
           Event e = merged.get(nextIndex).next();
           findNext();
           return e;
        }
    }

    /**
     * iterates over merged, and for each stream with an available event,
     * adds it to a sorted TreeMap<Event, Integer> (sorting by any event field; integer
     * is stream index in arrayList)
     * if set is not empty, returns 'true', and sets nextIndex to the stream index
     * otherwise, returns 'false', and sets nextIndex to -1
     */
    private boolean findNext() {
        // ...
    }
} 
```

您可以通过将 TreeMap 保留为实例属性并仅刷新您从中提取的那些流来提高效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:04:10.493

使用 MinHeap 存储每个事件流中的一个事件。

从`next()`堆中弹出顶部事件（最旧时间的值）。

然后从检索事件的同一 EventStream 中推送一个事件。

所以MinHeap中的每个EventStream只会有一个Event。

您需要将 EventStream 的引用与事件一起存储在 MinHeap 中。

此`next()`实现将使用 O(log n)，其中“n”是 EventStream 的数量。

注意：预计 EventStream 已经对事件进行了排序。Next() 总是返回最旧的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:55:24.587

你的方法很好。除非 N 很大，否则应该没问题。

如果 N 真的很大，你可以将每个流的第一个事件存储在一个排序集合中，与它来自的流相关联，每次你从这个排序集合中删除一个项目时，你都会从它的流中添加下一个来自。

# javascript - 是否有等效于 VB 的“LIKE #”的 javascript？

> ID：13415786
> 
> 赞同：2
> 
> 时间：2012-11-16T11:34:59.770
> 
> 标签：javascript, string, vb.net, hash, vb-like-operator

我需要编写一个函数来检测字符串输入是否是日期的有效格式。允许的格式是：

```
#### (e.g. 2003)
##/#### (e.g. 12/2003)
#/#### (e.g. 9/2003)
##/####-##/#### (e.g. 12/2003-04/2005) 
```

但我需要防止无效字符串（例如“20031”、“ABCD”、“200A”）。

我已经在 VB 中编写了一个函数来执行此操作（如下），但我需要在 Javascript 中执行此操作。

**VB**

```
Public Sub detectDateFormat(ByVal myDate As String)
    If myDate Like "####" Then
        'Do Stuff 1
    ElseIf myDate Like "##/####" Or myDate Like "#/####" Then
        'Do Stuff 2
    ElseIf myDate Like "##/####-##/####" Then
        'Do Stuff 3
    Else
        'Invalid date format
        Exit sub
    End If
End Function 
```

似乎 javascript 不等同于“Like”，并且很难检测字符是数字还是字母。谁能提出一个好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T11:36:33.407

最接近的可能是正则表达式。比 LIKE 强大得多，但也可能更复杂。

例如：

```
If myDate Like "####" Then 
```

将会：

```
if (/^\d{4}$/.test(myDate)) { ... } 
```

# grails - 用户在 grails 中注销后仍然可以查看之前的页面

> ID：13415789
> 
> 赞同：4
> 
> 时间：2012-11-16T11:35:02.047
> 
> 标签：grails

在我的 grails 项目中，我使用的是 spring security core 插件。我提供了注销链接为

```
<g:link controller="logout">Logout</g:link> in my gsp pages. 
```

LogoutController 中的代码为：

```
class LogoutController {

/**
 * Index action. Redirects to the Spring security logout uri.
 */
def index = {
    // TODO put any pre-logout code here
        session.invalidate()
        redirect uri: SpringSecurityUtils.securityConfig.logout.filterProcessesUrl // '/j_spring_security_logout'
 }
} 
```

当用户单击它时，它将用户重定向到登录页面。但是如果用户点击浏览器的后退按钮，用户可以看到之前的工作页面。我不想将他重定向到上一页，他应该留在登录页面。我能为它做些什么？

附加信息：我创建了一个标签库来检查登录用户的用户名。如果它是匿名的，它会重定向到登录页面或将其发送到主页。但是它的工作，用户必须点击一些东西。因为当前注销后，用户可以通过单击后退按钮查看上一页。我不想在上一页重定向他。他应该留在登录页面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-07T18:27:00.860

很简单，只需将此代码放入您的所有页面中：

```
<%
response.setHeader("Cache-Control","no-cache");  

response.setHeader("Cache-Control","no-store");     

response.setDateHeader("Expires", 0); 

response.setHeader("Pragma","no-cache");

%> 
```

# django - 创建一个基于数据库项的动态过滤的 django-manager

> ID：13415790
> 
> 赞同：1
> 
> 时间：2012-11-16T11:35:08.063
> 
> 标签：django, django-models, django-managers

标题有点粗略，让我更详细地解释一下：

我有一个表`Identity`，它是一个像这样的简单表：

```
class Identity(models.model):

    identity_name = models.CharField(max_length=20, db_index=True) # name of the ID
    service_name = models.CharField(max_length=50) 
```

数据库中的一个示例行是一个 Facebook 身份，其中`identity_name='FacebookID'`一个`service_name='Facebook'`.

现在，要将其链接到用户，我有下表：

```
class UserIdentity(models.Model):

    user = models.ForeignKey('django.contrib.auth.models.User', db_index=True)
    identity_type = models.ForeignKey('Identity', db_index=True)
    value = models.CharField(maxlength=50) # the ID value

    objects = models.Manager()
    identities = IdentitesManager() 
```

假设`Bob`是`django.contrib.auth.models.User`. 我想通过`Bob.identities.facebook`在.`facebook``IdentitiesManager`

现在您知道上下文了，问题来了：我如何从数据库中检索身份，以便在`IdentitiesManager`?

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:58:27.163

Finally, I found how to do that. I created a class inheriting from `dict` and made it create its attributes (with `setattr`) based on the data contained in the dict. The class code is :

```
class IdentityDictionary(dict):
    """ 
        Create a custom dict with the identities of a user.
        Identities are accessible via attributes or as normal dict's key/value.

    """

    def __init__(self, user, key='service_name'):

        identities = UserIdentity.objects.filter(user=user)
        dict_identities = dict([ (getattr(user_id.identity, key).replace(' ', '').lower(), user_id.identity) for user_id in identities ])

        super(IdentityDictionary, self).__init__(dict_identities)

        for id_name, id_value in dict_identities.items():
            setattr(self, id_name, id_value) 
```

Then I made a mixin to add to the user class:

```
class IdentitiesMixin(object):
""" 
    Mixin added to the user to retrieve identities 

"""
_identities_dict = {}
_is_identities_initialized = False

@property
def identities(self):
    if not self._is_identities_initialized :
        self._identities_dict = IdentityDictionary(self)
        self._is_identities_initialized = True

    return self._identities_dict 
```

One more point: the custom dict is not intended for reusability : attributes are not updated if the `dict` is (hopefully, it is not a problem with the class use cases).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T18:02:41.110

如果我理解了您的问题，您可以`queryset`在 as 中获取模型`Manager`：

```
class IdentitiesManager(models.Manager):
    def  some_func(self):
        qs = super(IdentitiesManager, self).get_query_set() 
```

# c# - 如何使用 C# 从 XML 文档中删除标签？

> ID：13415791
> 
> 赞同：0
> 
> 时间：2012-11-16T11:35:10.797
> 
> 标签：c#, xmldocument

```
<sg>
       <userdata>
            <data>
             <tag name="gf" description="fg" nodeid="                                                      {2F2CC6951E2B4EEA979F357164CB73E5}" controllerid="" keytype="" mask="" track="widthsegment"    numkey="" interpolator="" frame="" aindex="1" number="1">
              <![CDATA[  //sg/objects/object[@id="          {2F2CC6951E2B4EEA979F357164CB73E5}"]/params/param[@name="widthsegment"]
               ]]> 
               </tag>
              <tag name="gf" description="fg" nodeid="               {2F2CC6951E2B4EEA979F357164CB73E5}" controllerid="" keytype="" mask="" track="widthsegment"                       numkey="" interpolator="" frame="" aindex="1" number="2">
               <![CDATA[  //sg/objects/object[@id="                         {2F2CC6951E2B4EEA979F357164CB73E5}"]/params/param[@name="widthsegment"]
              ]]> 
              </tag>
                </data>
               </userdata>
                    </sg> 
```

我想从中删除“标签”-标签怎么做

我做了这样的

```
updatedData.SelectSingleNode("//tag[@name='" + 1 + "']").RemoveAll(); 
```

但是标签仍然出现在这个..我的意思是空标签..如何删除它

之后

```
 <sg>
                    <userdata>
                      <data>
                      <tag /> --- This is wat i want to remove... how to remove this
                       <tag name="gf" description="fg" nodeid="        {2F2CC6951E2B4EEA979F357164CB73E5}" controllerid="" keytype="" mask="" track="widthsegment"      numkey="" interpolator="" frame="" aindex="1" number="2">
                      <![CDATA[  //sg/objects/object[@id="           {2F2CC6951E2B4EEA979F357164CB73E5}"]/params/param[@name="widthsegment"]
                    ]]> 
                     </tag>
                      </data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:38:45.463

```
XmlNodeList nodes = updatedData.GetElementsByTagName("tagname");
foreach (XmlNode node in nodes)
{
    if (node.ChildNodes.Count == 0)
        node.RemoveAll();
    else
        UpdateDoc.InnerXml = node.OuterXml;
} 
```

我解决了这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:39:05.623

```
var xmlDoc = XDocument.Load("filename.xml");
var element = (
    from x in xmlDoc.Root.Elements("elemnt-name")
    where x.Element("tage-name").Value == "xxxx"
    select x
    ).FirstOrDefault();
element.Remove();
xmlDoc .Save("filename.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:40:14.407

你的 XPath 很奇怪：

```
"//tag[@name='" + 1 + "']" 
```

它将选择属性值为 1 的所有`tag`元素。您的示例中没有。`name`

您还使用`SelectSingleNode`which 只会选择一个节点。

`"//tag"`如果您希望全部选择XPath，则应该使用 XPath ，并且应该`SelectNodes`改用 XPath。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T12:11:38.293

这就是您将 xdocument 加载到 XmlNodeList 的方式

```
 XDocument doc = XDocument.Load(@"C:\Users\sghaida\Documents\Visual Studio 2008\Projects\testing-ws-1\XMLParser\config.xml");
                XmlDocument xmlDoc = new XmlDocument();
                XmlNodeReader nodeReader = (XmlNodeReader)doc.CreateReader();
                xmlDoc.ReadNode(nodeReader);
                XmlNodeList xmlnodeList = xmlDoc.SelectNodes("node"); 
```

# pdf - birt 查看器：导出为 pdf 时布局不同

> ID：13415792
> 
> 赞同：0
> 
> 时间：2012-11-16T11:35:18.170
> 
> 标签：pdf, layout, report, alignment, birt

我是Birt的新手。我正在使用 Eclipse“一体化版本”进行开发（报表设计器发布版本：4.2.1）。
当我开发报告并将其运行到 eclipse 中进行测试时，一切似乎都很好。
如果我在 Application Server Tomcat (6.0.32) 上的 Web 应用程序“Birt Report Viewer”下部署报告，问题就出现了。如果我启动它，所有标签似乎都设置为左对齐。如果我将报告导出为 PDF，一切正常。
因此，问题似乎仅在呈现报告时出现在“Birt Report Viewer”上。
任何想法 ？

谢谢

      GG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:25:28.293

通过将属性文本对齐方式设置为居中解决了该问题。似乎默认情况下是由“Center:Inherited”设置的，所以这里是正确解决方案的步骤：

1.  将属性文本对齐设置为另一个值（例如：对齐）
2.  保存报告
3.  使用正确的值“中心”再次设置属性文本对齐
4.  保存报告

只有按照这些步骤，才能正确设置属性。

# php - jquery 提交到数据库 1 回答一次

> ID：13415794
> 
> 赞同：0
> 
> 时间：2012-11-16T11:35:25.330
> 
> 标签：php, jquery

我已经使用 php 构建了一个测验，目前答案是一次显示的，我想知道是否可以使用 jquery 一次显示两个答案，并有一个提交按钮，可以将用户答案插入数据库？

目前我的代码如下所示：

```
<?php
//retreive questions from database and put into question box

$query2 = "SELECT `QuestionId`, `Question`, `Opt1`, `Opt2`, `Opt3`, `Opt4`,`Answer` FROM `pf_questions`";

$question2 = mysql_query($query2);

while($row = mysql_fetch_array($question2)){

    $id         = $row['QuestionId'];
    $question   = $row['Question'];
    $opt1       = $row['Opt1'];
    $opt2       = $row['Opt2'];
    $opt3       = $row['Opt3'];
    $opt4       = $row['Opt4'];
    $answer     = $row["Answer"];

?>
<div id="ContainerQuestion">
    <span class="Question">Question <?php echo $id; ?>. <?php echo $question; ?></span>

        <p><input type=radio name='q<?php echo $id; ?>' value="a" <?php if($opt1=='a') echo "checked='checked'"' ?>> <?php echo $opt1; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="b" <?php if($opt1=='b') echo "checked='checked'"' ?>> <?php echo $opt2; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="c" <?php if($opt1=='c') echo "checked='checked'"' ?>> <?php echo $opt3; ?> </p>
        <p><input type=radio name='q<?php echo $id; ?>' value="d" <?php if($opt1=='d') echo "checked='checked'"' ?>> <?php echo $opt4; ?> </p>

</div>
<?php
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:52:12.193

我构建了一个快速页面，其中包含一个简单的 javascript 结构，可让您走上正确的道路。只需将粘贴复制到记事本文件中，另存为 html 运行，然后单击提交。

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <style>
        .Question{
            display:none;
        }
    </style>
</head>
<body>
    <div id="container">
        <p id="1" class="Question">Question 1</p>
        <p id="2" class="Question">Question 2</p>
        <p id="3" class="Question">Question 3</p>
        <p id="4" class="Question">Question 4</p>
        <button id="submit">Submit</button>
    </div>
</body>
<script>
    var AmountToRevealPerItteration = 2;
    var currentIndex=0;
    var questions;
    $(document).ready( function (){
        questions = $("#container").find('.Question').toArray();
        $('#submit').click(function(e){
        for(var counter = 1;counter <= AmountToRevealPerItteration;counter++){
            revealQuestion();
        }
        });
    });

    function revealQuestion(){
        if(currentIndex == questions.length){
            return;
        }
        $(questions[currentIndex]).attr('style','display:block');
        currentIndex++;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:51:07.230

您需要使用 Ajax。首先根据您的标准提取 2 个问题。然后单击一个按钮以获取下一个问题（当然，在检查一个选项作为上一个问题的答案之后）。您需要传递一些数字来告诉 php 脚本需要获取哪些下一条记录。你可以使用[jQuery ajax](http://docs.jquery.com/Ajax/jQuery.ajax)。

# php - 将多个参数传递给 javascript 并根据两个参数 + php 循环更新 html 内容

> ID：13415795
> 
> 赞同：0
> 
> 时间：2012-11-16T11:35:25.740
> 
> 标签：php, javascript, parameters, return

我有使用 jquery 通过外部 php 页面获取 mysql 数据的表单。

该脚本本质上是输入字段的自动完成。问题是我在循环中有输入字段，字段ID由循环中的计数器'$ i'确定。

因此，我想将输入框的用户输入值与计数器值“$i”一起传递给 javascript，以便 javascript 可以将结果返回到循环中的正确输入框。

我希望这是有道理的。

单个输入框的原始代码和工作代码如下：

**Javascript**

```
<script type="text/javascript">
    function lookup(inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) {
        $('#inputString').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }
</script> 
```

**HTML**

```
<div>
    <input type="text" size="30" value="" id="inputString" onkeyup="lookup(this.value);" onblur="fill();" />
</div>
<div class="suggestionsBox" id="suggestions" style="display: none;">
    <img src="upArrow.png" style="position: relative; top: -12px; left: 20px;" alt="upArrow" />
    <div class="suggestionList" id="autoSuggestionsList">
        &nbsp;
    </div>
</div> 
```

所以我想做的是将行号（$i）也传递给javascript，以便它将值返回到正确的输入框。我在这方面的基本尝试如下[对我缺乏 javascript 技能表示歉意:-)]

**Javascript**

```
<script type="text/javascript">
    function lookup(rownumber, inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+(inputString+rownumber)+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) {
        $('#inputString'+'rownumber').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }
</script> 
```

**PHP/HTML**

```
<table>
<?  for ( $i = 1; $i <=50; $i++ ) { ?>
            <tr>
                <td>
                    <div>
                        <input type="text" size="30" value="" id="inputString<? echo  $i; ?>" onkeyup="lookup(<? echo  $i; ?>,this.value);" onblur="fill();" />
                    </div>
                    <div class="suggestionsBox" id="suggestions" style="display: none;">
                        <img src="upArrow.png" style="position: relative; top: -12px; left: 20px;" alt="upArrow" />
                        <div class="suggestionList" id="autoSuggestionsList">
                            &nbsp;
                        </div>
                    </div>  
                </td>
            </tr>
        <? } ?>
</table> 
```

问题的第二部分是让 div 建议框也出现在正确的位置。这同样适用于我希望建议框的名称附加行号“$i”的情况。

任何帮助，将不胜感激。

亲切的问候，

**更新代码**

**javascript**

```
<script type="text/javascript">
    function lookup(inputString) {
        if(inputString.length == 0) {
            // Hide the suggestion box.
            $('#suggestions').hide();
        } else {
            $.post("autocompleteperson.php", {queryString: ""+inputString+""}, function(data){
                if(data.length >0) {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

function fill(rownumber, thisValue) { // add the rownumber as a parameter
        $('#inputString'+rownumber).val(thisValue); // remove the quotation marks
        setTimeout("$('#suggestions').hide();", 200);
    }
</script> 
```

**HTML/PHP**

```
<table>
<?
    for ( $i = 1; $i <=50; $i++ ) { 
        ?>
            <tr>
                <td> Job <? echo  $i; ?></td>
                <td>
                    <SELECT NAME=job<? echo $i; ?> id=job<? echo $i; ?> style="width:150px;border: 1px solid #2608c3;color:red"> 
                    <OPTION VALUE=0 ></option>
                    <option>
                    <?=$optionjobs?> 
                    </option>
                    </SELECT>
                </td>
                <td> Person </td>
                <td>
                    <div>
                        <input type="text" size="30" value="" id="inputString<? echo  $i; ?>" onkeyup="lookup(<? echo  $i; ?>,this.value);" onblur="fill(<? echo  $i; ?>,this.value);" />
                    </div>
                    <div class="suggestionsBox" id="suggestions" style="display: none;">
                        <img src="upArrow.png" style="position: relative; top: -12px; left: 20px;" alt="upArrow" />
                        <div class="suggestionList" id="autoSuggestionsList">
                            &nbsp;
                        </div>
                    </div>  
                </td>
            </tr>
        <?
            }
        ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T13:44:03.780

首先，在有效的基本代码中，您在`fill()`不提供任何参数的情况下进行调用，而在 javascript 中，您正在等待`thisValue`.

现在对于您的问题，让我们使用您的`fill`功能并进行一些修改

```
 function fill(rownumber, thisValue) { // add the rownumber as a parameter
        $('#inputString'+rownumber).val(thisValue); // remove the quotation marks
        setTimeout("$('#suggestions').hide();", 200);
    } 
```

并在 HTML 文件中

```
[...]
<div>
<input type="text" size="30" value="" id="inputString<? echo  $i; ?>" onkeyup="lookup(<? echo  $i; ?>,this.value);" onblur="fill(<? echo  $i; ?>,this.value);" />
[...] 
```

只需在`fill()`函数中添加所需的参数。

# windows-7 - GetThreadContext 的嵌入式单声道崩溃失败（Windows 7）

> ID：13415798
> 
> 赞同：4
> 
> 时间：2012-11-16T11:35:34.410
> 
> 标签：windows-7, mono, embedded-language

我在 Windows 7 上使用 32 位和 64 位的 mono-2.11.4 嵌入到我的 C++ 应用程序中。由于从相当旧的 2.6.4 单声道更新，我不时从 GC 收到错误“GetThreadContext failed”（似乎没有模式）。对于 32 位和 64 位，mono-3.0.1 也会出现同样的错误。

任何想法是什么原因造成的以及如何恢复稳定运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:41:00.230

尝试禁用卡巴斯基防病毒软件。

# sql-server - 在更新期间锁定项目的最佳方式

> ID：13415801
> 
> 赞同：2
> 
> 时间：2012-11-16T11:35:58.857
> 
> 标签：sql-server, record-locking

我正在创建一个网站（c#/SQL Server 2008，.net），该网站需要允许更新用户可以共享的一些常见信息。

例如，我有 2 个用户和一个包含许多项目的表。很像一个审核队列。

假设它包含 ID 为 #1、#2、#3 的行

如果用户 1 首先选择 #1，则需要立即锁定，直到它被释放/可用。

我有几个问题，因为这对我来说是未知的领域。

*   在 SQL 中锁定这一行的最佳方法是什么？
*   作为无状态的，如何让用户 2 知道用户 1 声称 #1？使用“下一个可用”方法会更好吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:25:03.610

你有一种叫做乐观锁定的东西。但是，它并不能解决您“报告”该行被锁定的问题。在大多数情况下，报告是无用的，但可以通过编程方式解决。

如果您正在制作桌面应用程序或 Web 应用程序，那么锁定有点“有趣”，但大多数情况下它是通过使用额外的列（时间戳）并锁定一行一段时间来解决的。

我做了一个项目，我报告用户一行被锁定，我用 2 个字段（开始时间、结束时间）解决了它，因为我想给这个人可变的时间来更新行。

样本：

```
query: select a, b, c, d, start_time, end_time FROM table

Program : if ((datetime.now()-start time > 1min) or (end_time <> null))
{
update table
SET start_time = datetime.now()
set end_time = null
where A = a and B = b and C= c and D = d, and START_TIME = start_time 
--big caps is current value, small caps value from last select ( and that is OPTIMISTIC concurency).
}
else
{
messagebox.show ("You suck, cant be changed") --personal touch :-)
} 
```

更新行时，不要忘记放置 end_time。

OFC，检查时间，更新是可能的

编辑：我从 oracle 中的 row_scn 得到了这个想法，所以这不是什么革命性的东西

# java - Hibernate 将新元素保存在列表中而不删除旧元素

> ID：13415802
> 
> 赞同：2
> 
> 时间：2012-11-16T11:36:00.093
> 
> 标签：java, hibernate, list

我有两个对象；`Document`和`DocumentBatch`

*文档*

```
public class Document implements Serializable {

....
private String documentId;
private DocumentBatch documentBatch;
....} 
```

*文档批处理*

```
public class DocumentBatch implements Serializable {

private String batchId;

private List<Document> lDocuments = new LinkedList<Document>();
....} 
```

*休眠*映射：

```
<class name="Document" table="DOCUMENTS">
  .....
  <id name="documentID" column="DOCUMENT_ID" type="string" />
  <many-to-one name="documentBatch" class="DocumentBatch" not-null="false" 
  cascade="save-update" lazy="false" insert="false" update="false">
        <column name="BATCH_ID" not-null="true" />
    </many-to-one>
  ......
</class>

<class name="DocumentBatch" table="DOCUMENT_BATCHES">
     <id name="batchId" column="BATCH_ID" type="string" /> 
     <list name="lDocuments" table="DOCUMENTS" cascade="all"
        inverse="false" lazy="false" mutable="true">
        <key not-null="true">
            <column name="BATCH_ID" />
        </key>
        <list-index column="LIST_INDEX" base="0" />
        <one-to-many class="Document" />
       </list>
     ......
 </class> 
```

`DocumentBatch`有一个列表`Document`，每次我运行我的测试用例并使用相同的主键`session.saveOrUpdate(documentBatch)`更新`DocumentBatch`对象，但使用新生成的文档对象列表（所有对象都是新生成的。）。

Hibernate 将`DocumentBatch`通过保存带有索引的全新文档列表进行更新，但不会删除列表中的旧元素。

所以当我运行我的测试用例两次并且每次*文档*列表都有 5 个 Obj 时，我最后会有 10 个 objs。两个索引=0，两个索引=1，等等。

所以它不会更新列表，而只会保存新列表。旧列表的元素可以在数据库中找到。当我尝试获取`DocumentBatch, DocumentBatch`旧对象列表时。

我怎么解决这个问题？哪里出错了？非常感谢。

**更新 1：UnitTestCase**

```
 @Test
public void testSaveDocumentBatch() throws Throwable {
....
String batchId = "500700";
DocumentBatch documentBatch = new DocumentBatch(batchId, name);
    ....
    for (int i = 0; i < 5; i++) {
    String documentID = SessionIdentfierGenerator.nextSessionId();//generatting Id
    Document document = new Document(documentID);
    documentBatch.insertDocument(document);
}
    ....
    session.saveOrUpdate(documentBatch);
    ....} 
```

以及类 DocumentBatch 中的方法 insertDocument(Document document)：

```
public class DocumentBath{
.....
private List<Document> lDocuments = new LinkedList<Document>();
.....
public void insertDocument(Document document) {
    lDocuments.add(document); // lDocuments is a list DocumentBatch
    document.setDocumentBatch(this);
}
.....} 
```

**更新 2：Oracle 数据库脚本：**

文件的

```
CREATE TABLE DOCUMENTS(
DOCUMENT_ID VARCHAR2(255 CHAR) NOT NULL,
BATCH_ID VARCHAR2(255 CHAR) NOT NULL,
...);  

CREATE UNIQUE INDEX PK_DOCUMENT ON DOCUMENTS (DOCUMENT_ID); 
ALTER TABLE DOCUMENTS ADD (CONSTRAINT PK_DOCUMENT PRIMARY KEY (DOCUMENT_ID) USING INDEX PK_DOCUMENT); 

ALTER TABLE DOCUMENTS ADD (CONSTRAINT FK_DOCUMENT_BATCH_ID FOREIGN KEY (BATCH_ID) REFERENCES DOCUMENT_BATCHES (BATCH_ID) ON DELETE CASCADE); 
```

DocumentBatch 的

```
CREATE TABLE DOCUMENT_BATCHES(
BATCH_ID VARCHAR2(255 CHAR)     NOT NULL
...);

ALTER TABLE DOCUMENT_BATCHES ADD (
PRIMARY KEY (BATCH_ID)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:42:35.567

你去吧。在您的测试用例中，您正在为数据库中已经存在的实体创建新的实体对象。这使休眠和休眠不适合删除现有文档。

```
String batchId = "500700";
    DocumentBatch documentBatch = new DocumentBatch(batchId, name); 
```

而不是这个“new DocumentBatch(batchId, name)”，首先使用 get() 或 load() 通过 id 500700 获取现有 DocumentBatch 对象。获取现有对象后，请执行以下步骤。

1) 创建一个方法，例如 clearExistingDocuments()。在此方法中，首先迭代文档列表并将 BATCH_ID 设为 null。一旦迭代完成，然后从列表中删除所有这些文档。

2) 现在在同一个空列表中添加新创建的文档。避免创建新的列表实例。使用相同的空列表实例并添加新文档。

这应该可以解决问题。由于这些步骤，hibernate 将知道最初存在一些现有值，现在这些值已被显式删除，因此 hibernate 将触发相关的删除查询。如果需要，也可以使用 orphan-delete。这将删除孤立的 DOcument 对象，而不是将它们保留在文档表中。

# javascript - jQuery标签内的谷歌地图问题

> ID：13415803
> 
> 赞同：0
> 
> 时间：2012-11-16T11:36:01.653
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在尝试在 jquery 选项卡中显示谷歌地图。我的代码可以工作，但不能在选项卡内渲染地图，我已经应用了 stackoverflow 上发布的各种问题中给出的所有技术，但它们似乎都没有工作。下面是我的代码

css

```
.tab_container { }
ul.tabs {
    margin: 0;
    padding: 0;
    float: left;
    list-style: none;
    height: 32px;
    border-bottom: 1px solid #CCC;
    border-left: 1px solid #CCC;
    width: 100%;}

    ul.tabs li  {
        float: left;
        margin: 0;
        padding: 0;
        height: 31px;
        line-height: 31px;
        border: 1px solid #CCC;
        border-left: none;
        margin-bottom: -1px;
        background: #e0e0e0 url(images/accordion_header.png) repeat-x top right;
        overflow: hidden;
        position: relative; }   
        ul.tabs li a        {
            text-decoration: none;
            color: #222;
            display: block;
            font-size: 1.2em;
            padding: 0 20px;
            border: 1px solid #fff;
            outline: none;  }
    ul.tabs li a:hover { background: #ccc; }    
            ul.tabs li.active, ul.tabs li.active a:hover  { background: #fff; border-bottom: 1px solid #fff; }

.tab_content_container {
    border: 1px solid #CCC;
    border-top: none;
    clear: both;
    float: left; 
    width: 100%;
    background: #fff;}
    .tab_content { font-size: 1.2em; padding: 20px 20px 10px; display: none; }  
    .tab_content:first-child { display: block; } 
```

jQuery 函数

```
(function($){
    $.fn.tabs = function(options) { 
        var defaults = {};  
        var options = $.extend(defaults, options);  
        return this.each( function() {          
            var $tabContainer = $(this);
            var $tabLi = $tabContainer.find ('.tabs li');
            var $tabContent = $tabContainer.find ('.tab_content');          
            $tabContent.hide ();
            $tabLi.eq (0).addClass ('active').show ();
            $tabContent.eq (0).show ();

            $tabLi.live ('click' , function () 
            {
                var activeTab = $(this).find ('a').attr ('href');

                $tabLi.removeClass("active");
                $(this).addClass("active");
                $tabContent.hide ();
                $(activeTab).css({'visibility':'visible'});                 
                $tabContainer.find (activeTab).fadeIn ('slow');
                if(activeTab == '#about') {
                        initialize();//google map
                      }
                return false;
            });         });         };

})(jQuery);
function initialize() {
      var myLatlng = new google.maps.LatLng(28.46583740, 77.03269809999999);
      var mapOptions = {
        center: myLatlng,
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var map = new google.maps.Map(document.getElementById("map_canvas"),
          mapOptions);
        var marker = new google.maps.Marker({
        position: myLatlng,
        });    
        google.maps.event.addListener(map, "idle", function(){
            marker.setMap(map);
        }); 
    } 
```

这是 HTML div

```
<div id="about" class="tab_content" style="display: none; "> 
                                        <div id="map_canvas" style="width:100%; height:100%"></div>
                                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:57:17.803

我认为问题在这里：

```
 var marker = new google.maps.Marker({
    position: myLatlng  //<----- remove the ' , '
 }); 
```

看看是否有效。

# android - Android进度没有相应地工作

> ID：13415804
> 
> 赞同：3
> 
> 时间：2012-11-16T11:36:20.743
> 
> 标签：android, android-asynctask, android-progressbar

我是 Android 和 Java 的新手。我一直在处理我的任务，即图像下载器。我必须在哪里下载带有进度条的图像并在网格中显示它们。我创建了两个类 1\. URLImageAdapter 2\. CacheActivity。一切正常，但是在我点击下载按钮之前开始下载，当我点击下载按钮时，进度条出现并且进度条消失，但仍然在下载。我想同步下载图像和进度条。

代码如下。任何帮助

```
 public class URLImageAdapter extends BaseAdapter {

private class Image {
    String url;
    Bitmap thumb;
}

private Image[] images;
private Context myContext;
private LoadThumbsTask thumbnailGen;
private Object previousList;

public URLImageAdapter(Context c) {
    myContext = c;
    thumbnailGen = new LoadThumbsTask();

    if (previousList != null) {
        images = (Image[]) previousList;
        thumbnailGen.execute(images);
        return;
    }

    images = new Image[imageURLs.length];

    for (int i = 0, j = imageURLs.length; i < j; i++) {
        images[i] = new Image();
        images[i].url = imageURLs[i];
    }

    thumbnailGen.execute(images);

}

public int getCount() {
    return images.length;
}

public Object getItem(int position) {
    return images[position].url;
}

public long getItemId(int position) {
    return position;
}

public Object getData() {
    if (thumbnailGen != null
            && thumbnailGen.getStatus() != AsyncTask.Status.FINISHED) {
        thumbnailGen.cancel(true);
    }

    return images;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imgView;

    Image cached = images[position];

    if (convertView == null) {

        imgView = new ImageView(myContext);
        imgView.setLayoutParams(new GridView.LayoutParams(100, 100));

    } else {

        imgView = (ImageView) convertView;

    }

    if (cached.thumb == null) {

        imgView.setImageResource(R.drawable.ic_action_search);
        imgView.setScaleType(ScaleType.CENTER);

    } else {

        imgView.setScaleType(ScaleType.FIT_CENTER);
        imgView.setImageBitmap(cached.thumb);

    }

    return imgView;
}

private void cacheUpdated() {
    this.notifyDataSetChanged();
}

private Bitmap loadThumb(String url) {

    Bitmap thumb = null;

    BitmapFactory.Options opts = new BitmapFactory.Options();
    opts.inSampleSize = 4;

    try {

        URL u = new URL(url);
        URLConnection c = u.openConnection();
        c.connect();

        BufferedInputStream stream = new BufferedInputStream(
                c.getInputStream());

        thumb = BitmapFactory.decodeStream(stream, null, opts);

        stream.close();

    } catch (MalformedURLException e) {
        Log.e("ERROR", "malformed url: " + url);
    } catch (IOException e) {
        Log.e("ERROR", "An error has occurred downloading the image: "
                + url);
    }

    return thumb;
}

private class LoadThumbsTask extends AsyncTask<Image, Void, Void> {

    @Override
    protected Void doInBackground(Image... cache) {

        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inSampleSize = 4;

        for (Image i : cache) {

            if (isCancelled())
                return null;

            if (i.thumb != null)
                continue;

            SystemClock.sleep(500);

            i.thumb = loadThumb(i.url);

            publishProgress();
        }

        return null;

    }

    @Override
    protected void onProgressUpdate(Void... param) {
        cacheUpdated();
    }
}

private String[] imageURLs = {
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2851.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2944.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_2989.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3005.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3012.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3034.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3047.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3092.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3110.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3113.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3128.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3160.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3226.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3228.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3251.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3268.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3275.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3346.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3365.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3374.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3385.jpg",
        "http://cdn.cs76.net/2011/spring/lectures/6/imgs/img_3392.jpg", };
  } 
```

> 缓存活动

```
public class CacheActivity extends Activity {

Button btnStartProgress;
ProgressDialog progressBar;
private int progressBarStatus = 0;
private Handler progressBarHandler = new Handler();

private long fileSize = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cache);
    GridView gridview = (GridView) findViewById(R.id.grid_view);
    gridview.setAdapter(new URLImageAdapter(this));
    addListenerOnButton();

    }

public void addListenerOnButton() {

    btnStartProgress = (Button) findViewById(R.id.btnStartProgress);
    btnStartProgress.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            progressBar = new ProgressDialog(v.getContext());
            progressBar.setCancelable(true);
            progressBar.setMessage("File downloading ...");
            progressBar.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressBar.setProgress(0);
            progressBar.setMax(100);
            progressBar.show();

            progressBarStatus = 0;

            fileSize = 0;

            new Thread(new Runnable() {
                public void run() {
                    while (progressBarStatus < 100) {

                        progressBarStatus = doInBackground();

                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        progressBarHandler.post(new Runnable() {
                            public void run() {
                                progressBar.setProgress(progressBarStatus);
                            }
                        });
                    }

                    if (progressBarStatus >= 100) {

                        try {
                            Thread.sleep(200);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        progressBar.dismiss();
                    }
                }
            }).start();

        }

    });

}

public int doInBackground() {

    while (fileSize <= 1000000) {

        fileSize++;

        if (fileSize == 100000) {
            return 10;
        } else if (fileSize == 200000) {
            return 20;
        } else if (fileSize == 300000) {
            return 30;
        }else if (fileSize == 400000) {
            return 40;
        }else if (fileSize == 500000) {
            return 50;
        }else if (fileSize == 600000) {
            return 60;
        }else if (fileSize == 700000) {
            return 70;
        }else if (fileSize == 800000) {
            return 80;
        }else if (fileSize == 900000) {
            return 90;
        }

    }

    return 100;

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:17:15.190

在使用中下载图像

```
public class LoginProgress extends AsyncTask<Object, Object, Object> {
       private ProgressDialog dialog;
          @Override
            protected void onPreExecute() {
            this.dialog = ProgressDialog.show(applicationContext, "Please wait down",
                "Loading .....", true);
                    }
                @Override
                protected Object doInBackground(Object... params) {
                    // TODO Auto-generated method stub
                    return null;
                }
                @Override
                protected void onPostExecute(Void unused) {
        //Intent for next activity
         this.dialog.dismiss();
        }

            } 
```

在按钮单击中为这些类创建对象

```
 LoginProgress task = new LoginProgress();
    task.execute(); 
```

在这些 doinbackground 方法中调用你的 doinbackground 方法

否则做以下两个

Thread.sleep(1000) 的增量时间；更改为 Thread.sleep(4000); 线程.sleep(200); 更改为 Thread.sleep(450);

你设置 gridview.setAdapter(new URLImageAdapter(CacheActivity.this)); 在 oncreate 中，在 oncreate 中删除此适配器并将其写入 on click 方法的末尾...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:52:02.817

```
public int doInBackground() {

while (fileSize <= 1000000) {

    fileSize++;

    if (fileSize == 100000) {
        return 10;
    } else if (fileSize == 200000) {
        return 20;
    } else if (fileSize == 300000) {
        return 30;
    }else if (fileSize == 400000) {
        return 40;
    }else if (fileSize == 500000) {
        return 50;
    }else if (fileSize == 600000) {
        return 60;
    }else if (fileSize == 700000) {
        return 70;
    }else if (fileSize == 800000) {
        return 80;
    }else if (fileSize == 900000) {
        return 90;
    }

}

return 100;

} 
```

它与实际文件大小无关。它应该是这样的

```
return (currentFilesize/totalFilesize)*100 
```

而不仅仅是像这样的原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T11:47:13.420

问题是您没有将任何值传递给`publishProgress()`您将`LoadThumbsTask` 某些值传递给此方法（例如，已下载的拇指数），然后根据此值`onProgressUpdate()`更新您的值。`ProgressDialog`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T11:41:36.617

根据我的经验，进度条在列表视图或网格视图中时会出现刷新问题，如果您只想指示进度，我建议您开发自己的控件，该控件看起来像带有 RelativeLayout 的进度条。

采用 relativelayout 并在其中添加 imageview。并增加图像视图的宽度以说明类似的进度。

如果您愿意，我可以发布代码，我已经为自己开发了一个这样的进展

更新：我找到了同样的好帖子，以下帖子指出了我描述的相同技术。

[http://blog.mediarain.com/2011/04/android-custom-progressbar-with-rounded-corners/](http://blog.mediarain.com/2011/04/android-custom-progressbar-with-rounded-corners/)

演示可下载：[http ://blog.mediarain.com/wp-content/uploads/2011/04/RoundedProgressSample.zip](http://blog.mediarain.com/wp-content/uploads/2011/04/RoundedProgressSample.zip)

# python - 将列表拆分为不同长度的块

> ID：13415805
> 
> 赞同：4
> 
> 时间：2012-11-16T11:36:21.893
> 
> 标签：python, list, iterator

给定一个项目序列和另一个块长度序列，如何将序列拆分为所需长度的块？

```
a = range(10)
l = [3, 5, 2]
split_lengths(a, l) == [[0, 1, 2], [3, 4, 5, 6, 7], [8, 9]] 
```

理想情况下，解决方案可以同时`a`与`l`通用迭代一起工作，而不仅仅是在列表上。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T11:39:06.647

[`itertools.islice`](http://docs.python.org/2/library/itertools.html#itertools.islice)在列表的迭代器上使用。

```
In [12]: a = range(10)

In [13]: b = iter(a)

In [14]: from itertools import islice

In [15]: l = [3, 5, 2]

In [16]: [list(islice(b, x)) for x in l]
Out[16]: [[0, 1, 2], [3, 4, 5, 6, 7], [8, 9]] 
```

或者 ：

```
In [17]: b = iter(a)

In [18]: [[next(b) for _ in range(x)] for x in l]
Out[18]: [[0, 1, 2], [3, 4, 5, 6, 7], [8, 9]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:14:50.363

```
def split_lengths(a,l):
    resultList = []
    index=0

    for length in l:
        resultList.append(a[index : index + length])
        index = index + length

    retun resultList 
```

# php - Mac 上的 Composer 下载已损坏

> ID：13415806
> 
> 赞同：3
> 
> 时间：2012-11-16T11:36:27.060
> 
> 标签：php, macos

我一直在尝试安装 Composer，以便可以升级到 Symfony 2.1，但是当我运行 curl -s [https://getcomposer.org/installer](https://getcomposer.org/installer) |时下载失败 php。错误信息是：

`Downloading... The download is corrupt, retrying... Downloading... The download is corrupt, retrying... Downloading... The download is corrupt (phar error: "/Users/andrew.tarry/composer.phar" is a corrupted tar file (checksum mismatch of file "#!/usr/bin/env php <?php /* * This file is part of Composer. * * (c) Nils Adermann <naderman@nade")), aborting.`

我在 OSX 10.8.2 和 PHP 5.4.8 上使用 Mac。有谁知道这个问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:40:46.583

然后直接从网站下载文件：[Composer](http://getcomposer.org/download/)

它只是一个**.phar**档案。你可以用 PHP 运行它

```
php /path/to/your/file/composer.phar options 
```

或者，如果您将文件放入`/usr/local/bin`（我希望它在 Mac 上相同），您可以直接运行它们。没有路径。

# php - php intl 更改字段长度但不更改位置

> ID：13415810
> 
> 赞同：2
> 
> 时间：2012-11-16T11:36:33.800
> 
> 标签：php, date, format, intl

关于日期格式，我有一个非常奇怪的问题`intl`关于扩展

我看到`date formatter`存在几个默认值，但没有一个符合我的需要。我需要具有以下字段长度的日期格式：**day 2 位**，**month 2 位**，**year 2 位**。

不幸的是，SHORT 格式返回 2 位数的年份输出。

所以我想知道是否可以在不修改默认设置给出的语言环境定位的情况下自定义字段长度；即我想设法返回：

```
11/16/2012 in en_US and 16/11/2012 in it_IT 
```

代替

```
11/16/12 in en_US and 16/11/12 in it_IT 
```

感谢您的回答。

# python - App Engine 应用程序中的 CORS (python)

> ID：13415817
> 
> 赞同：4
> 
> 时间：2012-11-16T11:37:08.627
> 
> 标签：python, ajax, google-app-engine, cross-domain, cors

我正在尝试在应用引擎中的 2 个应用程序之间进行 x 域请求。一方面，我有我的 API，另一方面我有我的“客户端应用程序”。我一直在阅读有关 CORS 的大量信息；我想我知道它是如何工作的，问题来了：它不起作用。简单请求有效，但是当我尝试执行非简单请求（使用凭据）时问题就来了。我有这段代码来处理标题并允许 CORS：

```
try:
    _origin = self.request.headers['Origin']
except:
    _origin = "http://myapp"
self.response.headers.add_header("Access-Control-Allow-Origin", _origin)
self.response.headers.add_header("Access-Control-Allow-Methods", "GET, POST, OPTIONS")
self.response.headers.add_header("Access-Control-Allow-Credentials", "true")
self.response.headers.add_header("Access-Control-Allow-Headers", "origin, x-requested-with, content-type, accept")
self.response.headers.add_header('Content-Type', 'application/json')
self.response.out.write( json.dumps( _response ) ) 
```

已编辑：我正在使用同一域下的两个应用程序（http://app1.domain.com 和[http://app2.domain.com](http://app2.domain.com)）。

由于我不能使用通配符进行凭据传输请求，因此我检测了 Origin 并在此域的每个请求中设置了 Allow-Origin。在我的客户端应用程序中，我有这个代码来发出 http 请求：

```
jQuery.extend( {
postJSON: function ( _url, _data, _callback) {
    $.ajax({
        cache: false,
        crossDomain: true,
        url: _url,
        data: _data,
        type: 'POST',
        dataType: 'json',
        xhrFields: {
           withCredentials: true
        },
        headers : {
            "x-requested-with" : "XMLHttpRequest"
        },
        success: _callback,
        error: function() {
            _msg = "<strong>Error: </strong> Error en la petición HTTP (nivel de protocolo).";
            _error( _msg );
        }
    });
} 
```

});

为了处理请求，我有这些方法：

```
@decorators.notAllowed
def get(self):
    pass

@decorators.isNotLogged
@decorators.language
def post(self):
    common._responseJSON( self, CU._doLogin( self ) )

def options(self):
    common._responseJSON( self, CU._doLogin( self ) ) 
```

这是 OPTIONS 请求和响应：

```
Request URL:http://myapi/method
Request Method:OPTIONS
Status Code:200 OK

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:es-ES,es;q=0.8
Access-Control-Request-Headers:origin, x-requested-with, content-type, accept
Access-Control-Request-Method:POST
Connection:keep-alive
Host:myapi
Origin:http://myapp
Referer:http://myapp/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11

Response Headersview source
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:origin, x-requested-with, content-type, accept
Access-Control-Allow-Methods:GET, POST, OPTIONS
Access-Control-Allow-Origin:http://myapp
Cache-Control:no-cache
Content-Encoding:gzip
Content-Length:114
Content-Type:application/json
Content-Type:text/html; charset=utf-8
Date:Fri, 16 Nov 2012 11:31:40 GMT
Server:Google Frontend
Vary:Accept-Encoding 
```

这是 HTTP POST 请求：

```
 Accept:application/json, text/javascript, */*; q=0.01
Content-Type:application/json; charset=UTF-8
Origin:http://myapp
Referer:http://myapp
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
x-requested-with:XMLHttpRequest 
```

但是当浏览器尝试执行 POST 请求时，它会失败：

```
XMLHttpRequest cannot load http://myapi/method/. Origin http://myapp is not allowed by Access-Control-Allow-Origin. 
```

任何想法？我被这个问题弄疯了......我必须在 OPTIONS http 请求中做什么？也许我没有以正确的方式处理它......：-/

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T23:42:33.790

我找到了解决方案！就这么简单；我觉得有点愚蠢......如果你看一下代码，你会在一些方法处理程序之前看到一些装饰器。这就是问题所在：有时我通过装饰器将内容发送到浏览器。并且此内容没有 Allow-Control-* 标头。这就是为什么有时会失败有时不会（装饰者回复时失败）的原因

我已经在所有发送内容的装饰器中配置了标题，它工作正常:-)。感谢大家的帮助，真的！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:31:43.460

我刚刚在使用 Google API 时遇到了同样的错误。由于只有 3 或 4 天，如果对 Google API 的所有 CORS 请求包含**x-requested-with:XMLHttpRequest**标头，则它们都会失败，从而导致“ *Origin [...] is not allowed by Access-Control-Allow-Origin* ”错误。它一直工作到最后几天。

您可能对 App Engine CORS 请求有同样的问题。尝试删除以下行：

```
headers : {
        "x-requested-with" : "XMLHttpRequest"
    }, 
```

# iphone - 翻页动画到多个 Xib

> ID：13415822
> 
> 赞同：0
> 
> 时间：2012-11-16T11:37:28.450
> 
> 标签：iphone, ios, xcode, ipad, animation

我正在开发一个带有许多视图控制器的项目，这些控制器在单独的 xib 中显示不同的控件和图像。我需要使用翻页动画浏览这些视图（Xibs）。任何帮助表示赞赏。

下面的代码给了我页面 CURL 动画，但我需要在叶子中看到的翻页效果。

-(void)swipeLeftGesture:(UISwipeGestureRecognizer *)sender{

```
pp2ViewController * viewController = [[pp2ViewController alloc] initWithNibName:@"pp2ViewController" bundle:nil];
[UIView transitionWithView:self.view.window
                  duration:1.0f
                   options:UIViewAnimationOptionTransitionCurlUp
                animations:^{
                    //[self.navigationController pushViewController:viewController animated:NO];

                    [self presentViewController:viewController animated:NO completion:nil];
                }
                completion:NULL]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:44:58.537

`UIPageViewController`通过使用`UIPageViewControllerTransitionStylePageCurl`过渡样式，您将获得最佳效果。

页面视图控制器有一个很好的 API，可以处理很多创建/销毁视图控制器和管理旋转、滚动/分页转换等的繁琐工作。

# http - Fiddler：我可以用特定的referrer拦截一个指定的请求，并返回一个本地文件吗？

> ID：13415825
> 
> 赞同：1
> 
> 时间：2012-11-16T11:37:36.607
> 
> 标签：http, fiddler

我希望添加一个 Fiddler 脚本，该脚本拦截与特定位置和特定引荐来源相匹配的 http 请求，并以本地替代方案进行响应。

想象一下，我们正在寻找以下标准：

**[IF]**请求是针对`www.domain.com/file.js` **[AND]**请求具有主机名的引用者`www.referrer.com` **[THEN]**以内容响应`C:\Your\File.txt`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:32:37.930

你可以在你的 FiddlerScript 中使用它，在`OnBeforeRequest()`：

```
if (oSession.oRequest.headers.ExistsAndContains("Referer","www.referrer.com")) {
    if (oSession.uriContains("www.domain.com/file.js")) {
        oSession.utilCreateResponseAndBypassServer();
        oSession.oResponse.headers.Add("Content-Type", "relevant/mime-type");
        oSession.ResponseBody = System.IO.File.ReadAllBytes("C:\\Your\\File.txt");              
    }
} 
```

# android - 连续媒体记录分成相同大小的不同文件

> ID：13415830
> 
> 赞同：0
> 
> 时间：2012-11-16T11:38:01.080
> 
> 标签：android

目前我正在使用 MediaRecorder API 进行录音。下面是使用的代码片段：

```
mRecorder = new MediaRecorder();
mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mRecorder.setOutputFile(filepath);
mRecorder.setMaxFileSize(5000);
try {
    mRecorder.prepare();
    mRecorder.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

使用上面我测试过的代码，可以录制一个大小为 5Kb 的音频文件，然后录制停止。

我想要做的是连续录制，它将被保存为 5Kb 文件，直到我调用以下代码：

```
mRecorder.stop();
mRecorder.reset();
mRecorder.release(); 
```

是否可以？目前，一旦达到 5Kb，录制将完全停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T03:51:04.573

@SubbaReddy PolamReddy 感谢您的提示。你说的有道理，使用 setMaxFileSize(filesizeInBytes) 设置文件限制会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T22:32:24.797

我使用不同的方法。每 1 分钟后，我重新启动录制过程，如下所示：

```
int RestartAfterSeconds=60;

Boolean recording =false;
private void Stop_Record(){
    if (recording) {
       recording=false;
       // ................
       // ................
       // ................
       // your codes here
       // ................
       // ................
       // ................
    }
}

public void Start_record(){
    if (!recording) {
       recording=true;
       // ................
       // ................
       // ................
       // your codes here
       // ................
       // ................
       // ................
       Sheduler_handler.postDelayed(new Runnable() { @Override  public void run() { Restarter_Recording();  } }, RestartAfterSeconds * 1000);  //1000 ms is 1 second
    }
}

public void Restarter_Recording(){      if(!recording) return;
    // Stop now
    Stop_Record();
    //and Fire start immediately
    Sheduler_handler.postDelayed(new Runnable() { @Override public void run() { Start_Record(); } }, 100);
} 
```

ps 视频文件之间只有很小的差距，但对我来说，此时并不重要。

# php - 大括号之间的正则表达式匹配会产生太多结果

> ID：13415832
> 
> 赞同：0
> 
> 时间：2012-11-16T11:38:07.600
> 
> 标签：php, regex, match, curly-brackets

我有一堆文字，例如：

```
foofoofooabcdefhjkldh389dn{pdf}images/1.pdf,100%,500{/pdf}hfnkjt8499duidjglkj 
```

我想提取以下内容：

```
{pdf}images/1.pdf,100%,500{/pdf} 
```

所以这是我制作的正则表达式：

```
#{pdf}(.*?){/pdf}# 
```

检查结果时，我回来了：

```
Array
(
[0] => {pdf}images/1.pdf,100%,500{/pdf}
[1] => images/1.pdf,100%,500
) 
```

我希望只得到数组中的第一项，但实际上有两项。我正在使用 PHP 并进行测试，我使用以下网站：[PHP Regex Tester](http://www.spaweditor.com/scripts/regex/index.php)

我怎样才能只获得`{pdf}...{/pdf}`文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:43:46.703

你在你的正则表达式中使用一个组。在您的情况下，该组是

```
(.*?) 
```

这会导致 PHP 为您提供完整的结果*{PDF}sometext{/PDF}*和在第一组中找到的 sometext。

只需尝试以下操作即可摆脱该组：

```
#{pdf}.*?{/pdf}# 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:40:16.677

使用非捕获组，以确保中心文本不会在数组中显示为反向引用，并使用零宽度断言来确保该`{pdf}`部分不是匹配的一部分：

```
#(?<={pdf})(?:.*?)(?={/pdf})# 
```

如果要保留`{pdf}`分隔符：

```
#{pdf}(?:.*?){/pdf}# 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:44:46.220

你没有两个结果。

这里的问题（虽然不是问题）可能[`preg_match`](http://php.net/preg_match)是使用了一个函数。此函数返回整个匹配查询，即`{pdf}images/1.pdf,100%,500{/pdf}`，以及最终结果，即`images/1.pdf,100%,500`。

所以你只需要使用`$result[1]`进行进一步的解析。

# c++ - 输出到文本文件时的 C++ 换行符

> ID：13415833
> 
> 赞同：2
> 
> 时间：2012-11-16T11:38:08.960
> 
> 标签：c++, file, newline, output

这只是一个快速的问题。但我正在尝试将数据输出到一个文件，它工作正常。但是，我也试图在适当的点实现一个新行，以便数据打印在单独的行上。

这是我的代码当前的样子：

主文件

```
Writer w("Output.txt");
    w.writeString("The number of words in the script are: ");
    w.writeInt(count);
    w.writeEol();
    w.writeString("The number of Officers in the script are: ");
    w.writeInt(ofCount);
    w.writeEol();
    w.writeString("The number of Courtiers in the script are: ");
    w.writeInt(cCount);
        w.close(); 
```

编写器.cpp

```
void Writer::writeEol()
{
    out << "\n" << endl;
} 
```

我的代码必须以这种方式实现，因为我的整个系统都是围绕它构建的。

所以我的问题是，我将如何调整我的 Writer::writeEol() 以在我的输出文件中添加一个新行？

我的输出文件目前是这样的：

```
 The number of words in the script are: 32339The number of Officers in the script are: 2The number of Courtiers in the script are: 9 
```

任何帮助是极大的赞赏。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T11:44:29.590

如果没有正确的问题，我只能猜测您要学习什么，因此请随时用实际问题更新您的“问题”：

您实际上是在文件中写入两个换行符，具体取决于编码（即 Windows 或 Unix 换行符），您不会看到区别：

`std::endl`将自动包含正确的字符以创建换行符。也没有必要写`"\n"`。

`std::endl`此外，除非您真的想在特定位置换行，否则您不必传递给流：

```
std::cout << "The result is: ";
std::cout << 50 << std::endl; 
```

请记住，根据您的编辑器，您可能不会看到所有的换行符，例如 Windows 记事本不会显示只有`\n`. 相反，它将显示为一个不可见的字符。对于被接受的实际换行符，你会 beed `\r\n`。相比之下，开源编辑器 Notepad++ 接受并显示这两种换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:46:41.113

在您的`writeEol()`方法中，您输出一个换行符 ( `\n`)，并写出一个`std::endl`. 这些都有写出换行符的效果，这就是你想要的。但是，它`std::endl`也会刷新流，这在某些情况下是不可取的（如果在每一行之后刷新流，可能会导致速度变慢）。

我认为你的代码会做你想做的事（尽管有两个换行符），但正如shuttle87所说，你只需要`\n`在每行的末尾加上a就可以达到预期的效果。

# android - Sencha Touch 2 Android 本地数据库性能

> ID：13415862
> 
> 赞同：1
> 
> 时间：2012-11-16T11:39:42.067
> 
> 标签：android, sqlite, sencha-touch-2

我目前正在开发一个移动应用程序，我需要为 Android 创建本地数据库。虽然我使用 Sencha Touch 2 进行开发，但我担心浏览器沙箱中的 SQLite 数据库。

哪一个更可靠、分配更多内存且速度更快：浏览器沙箱内的 SQLite 数据库或原生 SQLite 数据库。两者有什么区别？

我可以使用电话间隙使用 Native SQLite 数据库，但主要是我很困惑哪个更好用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:13:00.000

仅使用 sencha 的本地存储怎么样...对我来说似乎相当快并且与 WebView 配合得很好...此外，如果您选择仅适用于 android 的本机解决方案，那么您将不得不为 iOS 找到相应的解决方案... Localstorage 在这两个平台上都有效，因为它链接到 HTML5 而不是原生平台......

# android - Android“城市飞艇” - GCM - 未找到活动设备令牌

> ID：13415863
> 
> 赞同：1
> 
> 时间：2012-11-16T11:39:45.593
> 
> 标签：android, android-c2dm, google-cloud-messaging, urbanairship.com

好的，我最近将应用程序从 C2DM 升级到了 GCM。出于某种原因，我不断收到 - '没有为别名找到活动设备令牌' 间歇性地。我观察到当您离开手机一段时间或重新启动手机时会发生这种情况。当我连接 adb 时，我可以在进程列表中看到“com.zeebox.android.caa:com.urbanairship.push.process”。

另外，有没有限制。设备可以接收的消息？

任何帮助或指示都会很有用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:33:16.663

听起来像是 UrbanAirship 的一个错误，你应该和他们一起提出来。此外，您也没有解释“升级”到 GCM 时所做的事情。如果 UA 仍在使用 C2DM，那么您不能只切换到 GCM，需要在服务器端进行更改（在这种情况下由 UrbanAirship 控制）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:26:44.930

您需要实施 GCM 而不是 Arnoid Urban ship。由于 android 的政策发生变化，您收到了无效的令牌。您可以在以下链接的帮助下实施 GCM。它是我发现的与 GCM 相关的最好的教程. [http://androidmyway.wordpress.com/tag/android-gcm/](http://androidmyway.wordpress.com/tag/android-gcm/)

# php - 从 Zend InputFilter 检索错误消息

> ID：13415866
> 
> 赞同：2
> 
> 时间：2012-11-16T11:39:51.100
> 
> 标签：php, zend-form, zend-framework2, zend-inputfilter

```
$app->post('/', function () use ($app) {

    $email = new Input('email');
    $email->getValidatorChain()
          ->addValidator(new Validator\EmailAddress());

    $password = new Input('name');
    $password->getValidatorChain()
             ->addValidator(new Validator\StringLength(1));

    $inputFilter = new InputFilter();
    $inputFilter->add($email)
                ->add($password)
                ->setData($_POST);

    if ($inputFilter->isValid()) {

        // do stuff

        $app->redirect('/');

    } else {

        $field_errors = array();

        foreach ($inputFilter->getInvalidInput() as $field => $error) {
            foreach ($error->getMessages() as $message) {
                $field_errors[] = str_replace('Value', ucfirst($field), $message);
            }
        }

        $app->render('index.php', array('field_errors' => $field_errors));

    }
}); 
```

我目前使用 Slim 框架和 Zend InputFilter 使用上述代码。但是，我想检索错误消息。我不断得到“价值......”所以我`str_replace`对它们做了一个`Email is not a valid email`如下所示：

```
 $field_errors = array();

        foreach ($inputFilter->getInvalidInput() as $field => $error) {
            foreach ($error->getMessages() as $message) {
                $field_errors[] = str_replace('Value', ucfirst($field), $message);
            }
        } 
```

这是从 Zend InputFilter 获取错误消息的正确方法还是还有其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:03:54.597

你只需要调用 $inputFilter->getMessages() 来获取一个键控数组：

```
array(
    'input' -> 'message', 
    'inputtwo' => 'anothermessage',
); 
```

这在内部为您使用 getInvalidInput() ，因此不需要那些嵌套的 foreach 循环，对 getMessages() 的单个调用应该没问题。

# delphi - 在调试模式下运行的 Delphi 程序可以与 IDE 的文本编辑器交互吗？

> ID：13415870
> 
> 赞同：2
> 
> 时间：2012-11-16T11:40:02.407
> 
> 标签：delphi, plugins, vcl

我想要一个表单，我可以在其中输入一个数字并按下一个键，然后文本编辑器将向下滚动到与我输入的数字对应的代码行。这甚至可能吗？是否有某种 API 可以用来制作这样的应用程序？（我真的不想输入一个数字并向下滚动，我只想知道我是否可以：）如果是这样，这个插件是否适用于一个简单的代码库上的所有 Delphi 版本，或者我的代码是否必须包含一个很多`ifs`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:55:59.493

您可以编写专家并使用[ToolsAPI](http://www.gexperts.org/open-tools-api-faq/)来完成此任务。我不认为一个独立的应用程序可以很容易地实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:24:39.950

答案是：是的。它所需要的只是运行第二个 IDE。我们过去整天都在这样做开发 IDE 插件。但是不，你不能用你实际使用的 IDE 来做到这一点。

这就像狗追逐自己的尾巴。看起来很愚蠢，有点僵局。

# java - 如何在java中求解具有两个变量的两个线性方程..？

> ID：13415878
> 
> 赞同：1
> 
> 时间：2012-11-16T11:40:17.680
> 
> 标签：java, apache, math, geometry, linear-equation

我有以下等式：

```
 center_y -y1 = m * ( center_x - x1 );

  start_y - y1 = m * ( start_x - x1 ); 
```

`center_y,center_x,start_y,start_x`和的值`m`是已知的，我想得到和的`x1`值`y1`...

请在java中提供适当的解决方案.../

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:45:44.080

假设这些是方程（即 m 是标量，而不是方法），您可以首先重新排列方程以获得通常的 2 个变量/2 个方程模型：

```
m.x1 - y1 = m.center_x - center_y
m.x1 - y1 = m.start_x - start_y 
```

[然后用一般技术](http://en.wikipedia.org/wiki/System_of_linear_equations)求解线性系统。你会发现，因为这两个方程是共线的，所以这个系统要么没有解，要么有很多解……

# ruby - rbenv gem 的 rdoc 在哪里？

> ID：13415883
> 
> 赞同：3
> 
> 时间：2012-11-16T11:40:52.010
> 
> 标签：ruby, rubygems, rdoc, rbenv

我正在使用`rbenv`，并且正在尝试找出本地 gem 的 rdoc 所在的位置。

当我安装 gem 时，它说 rdoc 已正确生成，即：

```
% gem install rails -v "2.3.2"
Successfully installed rails-2.3.2
1 gem installed
Installing ri documentation for rails-2.3.2...
Installing RDoc documentation for rails-2.3.2... 
```

但是我无法弄清楚 rdoc 文件在哪里，在我的`~/.rbenv`目录中我找到了一个`doc`文件夹：`.rbenv/versions/ree-1.8.7-2012.02/lib/ruby/gems/1.8/doc`其中包含本地 gem 的文件夹，每个文件夹都包含`rdoc`和`ri`文件夹，但它们是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:02:24.923

运行`gem env gemdir`以查看安装 gem 的位置。文档应该在`$(gem env gemdir)/doc`.

您可能还想确保使用您认为的 gem 版本安装 gem。 `which gem`应该指向`~/.rbenv/shims/gem`（如果它不尝试`hash -r`清除 shell 的可执行位置缓存）。此外，`rbenv which gem`应该指向您当前 ruby​​ 版本的 gem 可执行文件（您可以使用 找到`rbenv version`）。如果没有，请确保您`rbenv rehash`在每次安装带有可执行文件的新 gem 时都必须这样做。

# php - 如何使用 WP_query 从多个表单输入中过滤 Wordpress 循环

> ID：13415885
> 
> 赞同：1
> 
> 时间：2012-11-16T11:41:00.703
> 
> 标签：php, wordpress

我正在尝试使用一系列下拉框过滤循环。我的一切都设置好了，但我坚持使用最佳/正确的方法来过滤表单值的任何组合的循环。

我目前拥有的是带有 2 个下拉框的表单 - job_type 和 job_cat 通过 $_GET 发布值 - 填充 WP_query：

```
<?php 
if (isset($_GET['action'])){
$jobtype = $_GET['type'];
$jobcat = $_GET['cat'];
}

$args = array(
'tax_query' => array(
        'relation' => 'AND',
    array(
        'taxonomy' => 'job_type',
        'field' => 'term_id',
        'terms' => $jobtype
    ),
        array(
        'taxonomy' => 'job_cat',
        'field' => 'slug',
        'terms' => $jobcat
    )
)
);

// The Query 
```

$the_query = new WP_Query($args);?>

使用这种方法，我可以过滤两个值的循环，但我希望能够过滤任何组合。我最终将在表单上有大约 5 个过滤器选项。

因此，用户可以只搜索 Job Type 或 Job cat 或两者兼而有之。

我希望这是有道理的...？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:41:45.237

Replace the 'term_id' with the 'id' if you are passing id of the job type in $jobtype variable. If you are passing slug then make it 'slug'. Source: [http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

# visual-studio-2010 - Web 部署打包失败：路径中有非法字符

> ID：13415886
> 
> 赞同：4
> 
> 时间：2012-11-16T11:41:01.830
> 
> 标签：visual-studio-2010, webdeploy

为网站构建部署包对我来说很好，但对团队的其他成员来说却失败了。

我的一位队友的错误输出：

> 打包到 C:\tfs-public\SLL - Tolkportalen\Main\Source\Deploy\SysTest\OrderPortal.SysTest.zip。C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3009,5)：错误：Web 部署任务失败。（“清单”类型的对象和路径'C:\tfs-public\SLL - Tolkportalen\Main\Source\Deploy\SysTest\OrderPortal.SysTest.SourceManifest.xml' 无法创建。）
> 
> 无法创建“清单”类型和路径“C:\tfs-public\SLL - Tolkportalen\Main\Source\Deploy\SysTest\OrderPortal.SysTest.SourceManifest.xml”的对象。清单“sitemanifest”中的一个或多个条目无效。路径中的非法字符。包失败。

检查时，OrderPortal.SysTest.SourceManifest.xml 文件确实已在上述路径中创建，尽管有错误消息。

其中一台故障机器的源代码与我的机器在完全相同的位置检出，因此它不应该是硬编码路径问题。

还有另一个看起来相似的 SO 问题，但错误消息并不相同，因为我正在构建一个包（将被复制到服务器进行部署），所以它不应该相同：[Package Publish Web - include IIS settings从 IIS 管理器中断部署包构建](https://stackoverflow.com/questions/3307501/package-publish-web-include-iis-settings-from-iis-manager-breaks-deployment-pa)

### 编辑

该包是使用 wpp.targets 文件定制的。如果删除，它也可以在其他机器上运行，因此它可能与自定义有关。

### 编辑

该错误现在已被隔离到 wpp.targets 中嵌入引号的 runCommand 语句：

```
<path>net start "Topsi Schedule Service $(Configuration)"</path> 
```

删除服务名称和引号中的空格可以解决问题。仍然不知道为什么它不会在我的机器上失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:45:57.687

您必须在您的机器上安装 web 部署工具：

[http://technet.microsoft.com/en-us/library/dd569059(v=WS.10).aspx](http://technet.microsoft.com/en-us/library/dd569059(v=WS.10).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T14:17:45.430

尝试监视它试图用[Sysinternals Procmon](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)做什么。

# javascript - 如何使用 javascript 提取 HTML 表单数据？

> ID：13415890
> 
> 赞同：3
> 
> 时间：2012-11-16T11:41:15.527
> 
> 标签：javascript, forms

我需要使用 javascript(+Mootools) 从 HTML 表单中提取数据，其嵌套对象格式与发布表单时 PHP 会看到的嵌套对象格式相同。

我只是不擅长谷歌搜索，还是真的没有本地或众所周知的方法来实现这一目标？我看到许多其他人在不同的论坛上问过同样的问题，但到目前为止，所有人都接受了 jQuery serializeArray 等解决方案。

[我用 jsFiddle http://jsfiddle.net/7quxe/](http://jsfiddle.net/7quxe/)尝试了 serializeArray，结果令人失望。

我之前自己为此编写了一个脚本，它工作得很好，除了当表单有重叠的混合键类型字段时它有一些问题（`<input name="foo[bar]" value="1"> and <input name="foo[]" value="2"`。我已经开始研究一个更好的版本，但是当我发现自己重新开始并且再次，我心想：有很多很棒的 js 库，旨在解决许多基本的日常问题。难道真的希望从格式正确的对象中提取数据并不常见吗？

这是我正在尝试的示例：

```
<form method="post" action="/">
    <input name="test" value="test">
    <input name="nested[a]" value="a">
    <input name="nested[b]" value="b">
    <input name="nested[c]" value="c">
    <input name="arraytest[]" value="foo">
    <input name="arraytest[]" value="foo">
    <input name="arraytest[]" value="foo">
</form> 
```

下面是 PHP 会如何看待这个：

```
$_POST = array(
    'test' => 'test',
    'nested' => array(
        'a' => 'a',
        'b' => 'b',
        'c' => 'c',
    ),
    'arraytest' => array(
        0 => 'foo1',
        1 => 'foo2',
        2 => 'foo3'
    )
) 
```

这就是我想在 js 中得到的：

```
{
    test : 'test',
    nested : {
        a : 'a',
        b : 'b',
        c : 'c'
    },
    arraytest : {       // This could also be an array ['foo1','foo2','foo3']
        0 : 'foo1',
        1 : 'foo2',
        2 : 'foo3'
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-27T10:39:34.397

```
FormData data= new FormData(); 
```

数据由您的所有表单数据组成如果您特别想要，那么您需要使用

```
data.get("fieldName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T16:13:43.110

从你的回答。我制作了 jquery 脚本来提取输入元素，它只适用于输入一维数组，如“input[string]”和“input[]”，欢呼
[jsfiddle](http://jsfiddle.net/A2XM6/)

**HTML**

```
<h2>Form</h2>
<form action="" name="form" method="post">
  <input name="test" value="test">
  <input name="nested[a]" value="a">
  <input name="nested[b]" value="b">
  <input name="nested[c]" value="c">
  <input name="arraytest[]" value="foo">
  <input name="arraytest[]" value="foo">
  <input name="arraytest[]" value="foo">
  <p><input type="submit" /></p>
</form>

<h2>JSON output</h2>
<pre id="result"></pre>​​​​​​ 
```

**jQuery**

```
 $.fn.serializeObject = function()
  {
    var o = {}, a = this.serializeArray();
    $.each(a, function() {

      if (/(\[\]$|\[.+\]$)/.test(this.name)) {

        var match = /(.+)(\[\]|\[(.+)\])/.exec(this.name);
        if (match[3] !== undefined)
        {
          var index = match[3];
          if (o[match[1]] === undefined)
            o[match[1]] = {};

          if (o[match[1]][index] === undefined)
            o[match[1]][index] = [o[match[1]][index]];

          o[match[1]][index] = this.value || '';

        } else {
          if (o[match[1]] === undefined)
            o[match[1]] = new Array;

          o[match[1]].push(this.value || '');
        }

      } else {
        if (o[this.name] !== undefined) {
          if (!o[this.name].push) {
            o[this.name] = [o[this.name]];
          }
          o[this.name].push(this.value || '');
        } else {
          o[this.name] = this.value || '';
        }
      }

    });

    return o;
  };

  $(function() {
    $('form').submit(function() {
      $('#result').text(JSON.stringify($('form').serializeObject()));
      return false;
    });
  });​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T11:56:41.290

您可以使用该`form.elements`对象直接使用 JavaScript 来执行此操作。这是一个将任何形式转换为 URL 参数字符串的示例：

```
function getParameters(form) {
  var parameters = "";
  for (var x=0, y=form.elements.length; x < y; x++) {
  var field = form.elements[x];
  if (field.name && field.type !== "submit") {
    parameters += "&" + encodeURIComponent(field.name) + "=" + (field.type == "radio" || field.type == "checkbox" ? (field.checked == "checked") : encodeURIComponent(field.value));
  }
  return parameters;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T17:27:12.540

dojo 有一个简洁的方法，称为[dojo.formToObject()](https://dojotoolkit.org/reference-guide/1.8/dojo/dom-form.html#dojo-dom-form-toobject)。顾名思义，它将所有表单元素（输入、选择、...）转换为对象。例如，您可以轻松地将其转换为 JSON 并通过 AJAX 通过网络发送。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-16T17:14:38.950

我对此很着迷，然后又迷上了：D

这是我的解决方案：http: [//jsfiddle.net/sLZZr/3/](http://jsfiddle.net/sLZZr/3/)

随意借用它。如果您觉得它有帮助，请告诉我（不是要求，只是好奇。我的电子邮件在源代码中：）

* * *

回答需要格式化的代码，所以这里是：

```
/**
 * FormAccess
 * 
 * @description Manipulate data in forms and element collections. Currently only reading supported.
 *
 * @version     0.8
 *
 * @license     MIT License
 * 
 * @author      Jani Peltoniemi <jani@olio-labs.fi>
 * 
 * @copyright   2012 Jani Peltoniemi
 */

/**
* FormAccess main class
* 
*/
FormAccess = new Class({
    formElm : null,                 // The form element this instance will be linked to
    /**
    * Constructs the class and adds the quick access method "extractData" to formElm
    * 
    * @param Form element
    */
    initialize:function(formElm) {
        this.formElm = document.id(formElm);
        this.formElm.extractData = this.extractData.bind(this);
    },
    /**
    * Calls the static extractData function with the linked form's inputs
    * 
    * @returns Extracted form data in nested object
    */
    extractData : function() {
        var inputElms = this.formElm.getElements('input,textarea,select');
        return this.$constructor.extractData(inputElms);    
    }

});

/**
* FormAccess static functions
* 
* Currently only reading available. Filling forms according to data in an object will come later.
* 
*/
FormAccess.extend({
    /**
    * Extracts the data from given elements
    * 
    * Notes :
    *   - Converts empty keys to numeric. If (non-converted)numeric keys are already present, empty key becomes <largest key>+1.
    *       - Elements are handled from top to bottom. When converting empty keys between other numeric keys the largest key means largest key _up to that point_.
    *   - Inputs with empty names are not included in results.
    *   - Checkboxes' value attribute is ignored and only their checked state is included in results.
    *   - Multi-selectboxes return the selected values in an array
    * 
    * @param Selector, element or element collection - everything that $$() takes in.
    * 
    * @returns Extracted form data in nested object
    */
    extractData : function(inputElms) {
        // Normalize the input / query DOM
        inputElms = $$(inputElms);

        var that = this;
        var result = {};

        // Data from input elements is collected here for easier handling
        var inputData = [];

        // Collect inputData
        inputElms.each(function(inputElm) {
            if (!inputElm.name)
                return;
            // Explode the input name into an array path
            var path = that.parseName(inputElm.name);

            inputData.push({
                path:path,
                value:inputElm.value ? inputElm.value : '',
                elm:inputElm
            });
        });
        // Index tracking variable. Used to find next free numeric keys
        var maxIndex;
        inputData.each(function(data,i) {
            var path = data.path;

            // Last element of the path needs special treatment. Pop it out.
            var last = path.pop();

            // Working var
            var current = result;

            path.each(function(part) {

                // Assign a numeric key if the key is empty
                if (part == '') {
                    // Reset the index tracker
                    maxIndex = -1;

                    // Loop through the current position in result set
                    Object.each(current,function(val,key) {
                        // Convert key to int and make sure it is a proper number
                        var intKey = key.toInt();
                        if (intKey == key && intKey > maxIndex) {
                            // Key is greater than known largest key.
                            maxIndex = intKey;
                        }
                    });
                    // Set the key to largest found key + 1
                    part = maxIndex + 1;
                }

                // If the next position is not defined or is not an object, overwrite it.
                if (typeOf(current[part]) != 'object')
                    current[part] = {};

                // Update the position
                current = current[part];
            });

            var lastWasEmpty = false;
            // Evaluate the last part separately
            if (last == '') {
                lastWasEmpty = true;
                // Reset the index tracker
                maxIndex = -1;

                // Loop through the current position in result set
                Object.each(current,function(val,key) {
                    // Convert key to int and make sure it is a proper number
                    var intKey = key.toInt();
                    if (intKey == key && intKey > maxIndex) {
                        // Key is greater than known largest key.
                        maxIndex = intKey;
                    }
                });
                // Set the key to largest found key + 1
                last = maxIndex + 1;
            }

            // Element-specific value handling
            switch (data.elm.tagName.toLowerCase()) {
                // Case for Select, since they allow multiple selections
                case 'select':
                    if (data.elm.multiple) {
                        // A <value> = <selected> format was considered here but rejected due to long values being bad keys
                        current[last] = data.elm.getSelected().get('value');
                    } else
                        current[last] = data.value; 
                break;

                // Inputs have a couple of special cases that need to be handled differently
                case 'input':
                    switch (data.elm.type) {
                        // Only the value of the checked radiobutton is included in results.
                        // If none is checked, the result will display null
                        case 'radio':
                            // Only set the value if radiobutton is checked
                            // Otherwise check if this key is not already in results and then set it to null
                            if (data.elm.checked)
                                current[last] = data.value; 
                            else if (current[last] == undefined)
                                current[last] = null;
                        break;

                        // Checkboxes' value attribute is ignored and the checked state is included in results
                        case 'checkbox':
                            current[last] = data.elm.checked;
                        break;

                        // All others
                        default:
                                current[last] = data.value; 
                        break;
                    }
                break;

                // All other elements are handled here. 
                default:
                    current[last] = data.value; 
                break;
            }
        });
        return result;
    },
    /**
    * Explodes the name attribute.
    * 
    * Example:
    *   name="testinput[foo][bar][]"  -> ['testinput','foo','bar','']
    * 
    * @param Input name
    * 
    * @returns Exploded input name
    */
    parseName : function(name) {
        var path = [name.match(/^[^\[]*/)[0]];
        var pathRegExp = /\[(.*?)\]/g;
        var part = '';
        while (true) {
            part = pathRegExp.exec(name);
            if (part !== null)
                path.push(part[1]);
            else
                break;
        }

        return path;
    },
    /**
    * Applies the FormData object to chosen form elements.
    * 
    * If falsy argument is given, FormData is applied to all forms
    * 
    * @param Selector, element or element collection - everything that $$() takes in.
    * 
    * @returns Element collection
    */
    apply : function(elements) {
        if (!elements)
            elements = 'form';
        elements = $$(elements);

        elements.each(function(element) {
            element.formAccess = new FormAccess(element);
        });

        return elements;
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-27T10:49:47.483

```
export default class Article extends Component{
    handlesubmit(e)
    {
        e.preventDefault();
        const data = new FormData(e.target);
        let userid=qs.parseUrl(window.location.search).query.id;
        data.append("userid",userid);
        if(document.cookie.split(';')[0]=='login=true')
        fetch('/api/medium/article',{
            method: 'POST',
            body:data
        })
        .then(Response=>{
            console.log(Response);
            return Response.json();
        })
        .then(Response=>{
            console.log(Response);
            window.location.pathname='/medium';
            return Response;
        })
        .catch(err=>{
            return err;
        });
        else{
            alert("please login again");
            window.location.pathname='/medium';
        }
    }
    render()
    {
        return (
            <div className="create-article">
                <form encType="multipart/form-data" className="articleCreating" onSubmit={this.handlesubmit} >

                    <div className="form-group">
                        <select className="custom-select" autoFocus required name='category'>
                            <option value="">Select Category</option>
                            <option value="TECHNOLOGY">Technology</option>
                            <option value="NATURE">Nature</option>
                            <option value="FOOD">Food</option>
                        </select>
                    </div>

                    <div className="input-group">
                        <input type="text" className="form-control" aria-label="Title" placeholder="Title"
                        maxLength="70" spellCheck="true" name="title" required />
                    </div>

                    <div className="input-group">
                        <input type="text" className="form-control" aria-label="Subtitle" placeholder="Subtitle" 
                        spellCheck="true" name="description" required />
                    </div>

                    <div className="input-group has-error">
                        <textarea className="form-control" aria-label="With textarea" placeholder="Description" cols="10"
                        rows="10" spellCheck="true" name="article" required>
                        </textarea>
                    </div>

                    <div className="fileinput">
                        <span><input type="file" name="image"/></span>
                    </div>
                    <div className="article-submit">
                       <button className="btn btn-raised btn-success" type='submit'>Create Article</button>
                    </div>
                </form>
            </div>

        )
    }
} 
```

这是反应我认为你也可以使用 js 实现同样的事情

# variables - Lisp 访问值（Lisp 的新手）

> ID：13415894
> 
> 赞同：0
> 
> 时间：2012-11-16T11:41:28.117
> 
> 标签：variables, lisp, common-lisp

我是 Lisp 新手，不知道如何访问该`:DIM`值！这是代码：

```
(defstruct peca 
  dim 
  val)

(setf exemple #S(PECA :DIM 2 :VAL 1)) 
```

我怎样才能得到`:DIM`from的价值`exemple`？当我尝试`exemple-dim`时，它说`variable -DIM has no value`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:56:12.833

`defstruct`除其他外，宏定义了阅读器功能。这些默认名称的格式为*structname-slotname*，在您的情况下给出`peca-dim`and `peca-val`。

[HyperSpec](http://www.lispworks.com/documentation/HyperSpec/Body/m_defstr.htm)中有更多信息，请点击此处。

# c# - 哪种字体类型将显示 O（字母）和 0（零）的差异？

> ID：13415896
> 
> 赞同：0
> 
> 时间：2012-11-16T11:41:43.007
> 
> 标签：c#, asp.net, fonts

在 c# 中，我使用**arial，times new roman，Curlz MT**字体类型**，它将显示 O(alphabet) AND 0(ZERO) As A same**，这意味着 string a=" **OT02O** " 它的显示如下所示。它们之间没有区别. 当我尝试以 arial 或其他方式显示时，它将显示**OTO2O**。所以我需要知道哪种字体会给出 O 和 0 之间的最大差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:53:42.183

我建议**Consolas**更好地展示 O(alphabet) 和 0(zero) 之间的差异

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:52:49.710

您是否对此进行了谷歌搜索，检查以下链接，我认为这些链接与您的问题相关：[零](http://www.google.co.in/search?q=font%20that%20differenciate%20zero%20and%20alphabet%20O&oq=font%20that%20differenciate%20zero%20and%20alphabet%20O&sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8)
[，斜线零，字母“O”，Alt-0216 Ø 和 Phi Φ](http://www.k8zt.com/zero.html)
[寻找最佳程序员的字体](http://www.kuro5hin.org/story/2004/12/6/11739/5249)

> '0'、'o' 和 'O' 很容易区分

使用斜线 0 来解决这个问题。

# c# - C# 中的 WPF 网格单元格无文本

> ID：13415897
> 
> 赞同：0
> 
> 时间：2012-11-16T11:41:44.407
> 
> 标签：c#, wpf, wpf-controls

我需要用彩色字母和背景颜色的行以结构化的方式显示一些数据。

我在 WPF 窗口中制作了一个网格。它显示文本框和一些标签，但不显示任何文本。列标题、最后一列、网格分隔符、网格机器人和左边缘也是不可见的。

![我的 WPF 窗口的当前状态](../Images/fd14216904075e4a22face4ed12e95e2.png)

我的网格称为 propertiesView。

添加标题元素（标签）的代码

```
 private void AddHeaderElement(string text, int row, int col)
    {
        Label headerElement = new Label();
        headerElement.Height = cellHeight;
        headerElement.Width = cellWidth;
        headerElement.DataContext = text;
        headerElement.Background = headerBackground;
        headerElement.BorderBrush = new SolidColorBrush(Color.FromRgb(120, 120, 120));
        headerElement.BorderThickness = new Thickness(3);

        propertiesView.Children.Add(headerElement);
        Grid.SetRow(headerElement, row);
        Grid.SetColumn(headerElement, col);
    } 
```

添加单元格的代码

```
RichTextBox cell = new RichTextBox();

cell.Height = cellHeight;
cell.Width = cellWidth;
cell.ToolTip = toolTip;
cell.DataContext = text;
cell.Background = rowDifferent;

propertiesView.Children.Add(cell);

//box.SetValue(Grid.RowProperty, rowCount);
//box.SetValue(Grid.ColumnProperty, columnCount);
Grid.SetRow(cell, rowCount);
Grid.SetColumn(cell, columnCount); 
```

添加网格分隔符的代码

```
GridSplitter colSeperator = new GridSplitter();
colSeperator.Margin = new Thickness(-2.5, 0, 0, 0);
colSeperator.Width = 5;
colSeperator.ResizeDirection = GridResizeDirection.Columns;
colSeperator.ResizeBehavior = GridResizeBehavior.CurrentAndNext;
colSeperator.VerticalAlignment = VerticalAlignment.Stretch;
colSeperator.HorizontalAlignment = HorizontalAlignment.Left;

propertiesView.Children.Add(colSeperator);
Grid.SetColumn(colSeperator, 0);
Grid.SetRowSpan(colSeperator, totalRows + 1); 
```

工具提示确实显示了正确的文本。我尝试使用 TextBox 而不是 RichTextBox 并在类构造函数中设置所有这些东西而不是单独的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:50:53.803

好吧，您似乎从未在标签或RichTextBoxes`Content`上设置依赖项属性。`Document`

对于您的标签，当您将`text`参数设置为 DataContext 时，您可以添加类似

```
headerElement.SetBinding(Label.ContentProperty, new Binding()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T11:12:05.000

原来我需要带有文本块、跨度和运行的标签。可以在跨度上添加样式（通过 Foreground、TextDecoration 或 FontWeight 等属性）。将文本添加到 Run 内的 span，然后将所有 span 添加到 textblock，通过标签显示。

```
Span span = new Span();
span.Foreground = Brushes.Black;
span.Inlines.Add(new Run("Text"));

textBlock.Inlines.Add(span);

Label cell = new Label();

cell.MinHeight = cellHeight;
cell.MaxWidth = cellWidth * 3;
cell.MinWidth = cellWidth;
cell.ToolTip = "toolTip";
cell.BorderThickness = new Thickness(2);

TextBlock cellText = new TextBlock();
cellText.HorizontalAlignment = HorizontalAlignment.Stretch;
cellText.TextWrapping = TextWrapping.WrapWithOverflow;

cell.Content = cellText; 
```

文本现在有效，我应该能够让网格分隔符工作。

# windows - 使用 VB.NET 像 CCleaner 一样进行浏览器清理

> ID：13415899
> 
> 赞同：0
> 
> 时间：2012-11-16T11:41:45.260
> 
> 标签：windows, vb.net, internet-explorer, browser, mozilla

我正在开发一个 VB.NET 应用程序，我需要**从系统中找到的所有浏览器**中删除所有 cookie、Internet 缓存和自动完成关键字。我应该从哪些文件夹中删除内容？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:02:09.833

在您的应用程序中安装您想要支持的任何浏览器，然后检查它存储您要删除的数据的位置。还要检查浏览器的文档（路径可能取决于操作系统，无论如何）。由于编写“自己的”浏览器（使用 3rd 方渲染引擎）很容易，因此您将永远无法支持**系统中找到的所有浏览器**。

# spring - 无法让 RestTemplate 正常工作。以 406 结尾不可接受

> ID：13415906
> 
> 赞同：1
> 
> 时间：2012-11-16T11:42:25.347
> 
> 标签：spring, http, rest, resttemplate, http-status-code-406

我正在尝试使用 Spring 的 RestTemplate 将支付提供商实施到我正在从事的项目中。从支付提供商返回的 XML 如下：

```
<?xml version="1.0" ?>
<response>
    <bank>
        <bank_id>0031</bank_id>
        <bank_name>ABN AMRO</bank_name>
    </bank>
    <bank>
        <bank_id>0761</bank_id>
        <bank_name>ASN Bank</bank_name>
    </bank>
    <bank>
        <bank_id>0091</bank_id>
        <bank_name>Friesland Bank</bank_name>
    </bank>
    <bank>
        <bank_id>0721</bank_id>
        <bank_name>ING</bank_name>
    </bank>
    <bank>
        <bank_id>0021</bank_id>
        <bank_name>Rabobank</bank_name>
    </bank>
    <bank>
        <bank_id>0771</bank_id>
        <bank_name>RegioBank</bank_name>
    </bank>
    <bank>
        <bank_id>0751</bank_id>
        <bank_name>SNS Bank</bank_name>
    </bank>
    <bank>
        <bank_id>0511</bank_id>
        <bank_name>Triodos Bank</bank_name>
    </bank>
    <bank>
        <bank_id>0161</bank_id>
        <bank_name>van Lanschot</bank_name>
    </bank>
<message>This is the current list of banks and their ID's that currently support iDEAL-payments</message>
</response> 
```

我为此 XML 创建的类是：

```
@XmlRootElement(name="response")
public class ResponseBanks {

    private List<Bank> banks;
    private String message;

    public void setBanks(List<Bank> banks) {
        this.banks = banks;
    }

    @XmlElement(name="bank")
    public List<Bank> getBanks() {
        return banks;
    }

    @XmlElement(name="message")
    public void setMessage(String message) {
        this.message = message;
    }

    public String getMessage() {
        return message;
    }
}

@XmlRootElement(name="bank")
public class Bank {

    private String bank_id;
    private String bank_name;

    @XmlElement(name="bank_id")
    public String getBank_id() {
        return bank_id;
    }

    public void setBank_id(String bank_id) {
        this.bank_id = bank_id;
    }

    @XmlElement(name="bank_name")
    public String getBank_name() {
        return bank_name;
    }

    public void setBank_name(String bank_name) {
        this.bank_name = bank_name;
    }
} 
```

如果我只是将 xml 请求为字符串并自己解组它们，它可以工作：

```
String banksAsString = restTemplate.getForObject("https://secure.mollie.nl/xml/ideal?a=banklist", String.class);

        try {
            JAXBContext jc = JAXBContext.newInstance(ResponseBanks.class);
            Unmarshaller um = jc.createUnmarshaller();
            ResponseBanks banks = (ResponseBanks) um.unmarshal(new StringReader(banksAsString));
        }
        catch (JAXBException e) {
            e.printStackTrace();
        } 
```

但是，如果我这样做：

```
ResponseBanks banksAsObject = restTemplate.getForObject("https://secure.mollie.nl/xml/ideal?a=banklist", ResponseBanks.class); 
```

或者

```
Source banksAsSource = restTemplate.getForObject("https://secure.mollie.nl/xml/ideal?a=banklist", Source.class); 
```

它以 406 Not Acceptable 告终。

我的restTemplate beanconfiguration（在控制器中是@Autowired）如下所示：

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">

        <property name="messageConverters">
            <list>
                <bean class="org.springframework.http.converter.StringHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
                    <property name="marshaller" ref="jaxbMarshaller"/>
                    <property name="unmarshaller" ref="jaxbMarshaller"/>
                </bean>
            </list>
        </property>

    </bean>

    <bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
            <list>
                <value>nl.mollie.api.ResponseBanks</value>
            </list>
        </property>
    </bean> 
```

有人知道是什么原因造成的以及如何解决吗？上面代码中的 URL 是可公开访问的，因此您可以自己尝试此代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T00:16:38.347

`406 Not Acceptable`看起来像 MIME 类型/内容协商的问题。

您尝试与之通信的 Web 服务未发送正确的`Content-type`. 如果此 Web 服务由您或您的同事实现，`@Produces("application/xml")`您的 JAX-RS Web 服务方法上是否有注释？

更多信息：[https ://cwiki.apache.org/WINK/jax-rs-request-and-response-entities.html](https://cwiki.apache.org/WINK/jax-rs-request-and-response-entities.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T15:22:06.517

添加作为答案，因为没有足够的声誉得分来发表评论。

@Maciej，您在上面发布的链接无效。您在其他任何地方都有此内容吗？请在发布链接时尝试从链接中放入关键内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T19:20:08.967

要使用`Content-type`as `application/xml`，您需要配置以下消息转换器：

```
public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
    converters.add(mappingJacksonHttpMessageConverter(objectMapper()));
}

private MappingJackson2XmlHttpMessageConverter createXmlHttpMessageConverter() {
    Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder.xml();
    builder.indentOutput(true);
    return new MappingJackson2XmlHttpMessageConverter(builder.build());
} 
```

并将其添加到您的`pom.xml`文件中：

```
 <dependency>
            <groupId>com.fasterxml.jackson.dataformat</groupId>
            <artifactId>jackson-dataformat-xml</artifactId>
            <version>${jackson-dataformat-xml.version}</version>
        </dependency> 
```

# c - 在c中将摩尔斯电码转换为英语

> ID：13415907
> 
> 赞同：0
> 
> 时间：2012-11-16T11:42:27.053
> 
> 标签：c, pointers, loops, malloc, morse-code

我已经做了一些代码，但它没有正确运行

到目前为止我做了什么

```
void keyread1(void)
{
    char *string1= (char*) malloc (20);//char pointer pointing to allocated memory
    char *string2= (char*) malloc (20);
    char *string3= (char*) malloc (20);
    char *string4= (char*) malloc (20);
    string4[0]='\0';
    printf("Enter word to convert to morse code: \n");
    scanf("%s", string1);
    while (string1!='\0')
    {
        int z=0,a=0;
        strncpy(string2+a, string1+z,4 );
        string3=morse2english(string2);
        strncat(string4+a,string3,1);
        z=z+4;
    }
    printf("morse code string: %s\n",string4);
    free(string1);
    return;
}

char *morse2english(char *morsecode)
{
    int j=0;
    int a=0;
    char *azarray=(char*)malloc(26);
    strcpy(azarray, "abcdefghijklmnopqrstuvwxyz");
    char *morsearray=(char*)malloc(104*sizeof(char));
    strcpy(morsearray, ".-  -...-.-.-.. .   ..-.--. ......  .----.- .-..--  -.  --- .--.--.-.-. ... -   ..- ...-.-- -..--.----..");
        for (int i = 0; i < 104; ++i )
    for(int j=0;j<4;j++)
    if((morsecode[j++] == morsearray[i++]))
    a =((morsearray[i-4])/4);
    char *ch =(char*)malloc(1*sizeof(char));
    ch=azarray+a;
    return ch;
} 
```

函数keyread应该将莫尔斯字符串分成4个字符并将其传递给`morse2english`应该找到莫尔斯电码的字母表示并将其返回给keyread函数并将其添加到的函数`string4`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:55:56.817

我将问题放在评论中，但是太多了！你真的需要回去学习更多——尤其是关于动态内存分配！

在 keyread1 中：

*   不需要所有带有 malloced 缓冲区的 strcpy 东西。例如：你为 string3 分配了 20 个字节，但在你使用它之前你说 string3=...，所以这是一个即时泄漏！
*   while(string1 != '\0') 没有比较苹果和苹果：字符串 1 是一个指针，\0 是一个字符。您可能的意思是 *string1，但是您永远不会修改 string1，因此循环不会结束。
*   您永远不会在循环中修改 a ，因此您不会附加到 string4
*   morse2english 的结果是动态分配的，但您永远不会释放它。

莫尔斯英语：

*   你 malloc 一个 26 的数组，（它不允许空终止符，所以你有一个缓冲区溢出）
*   你永远不会释放 azarray - 为什么 malloc 首先，你不修改它，所以字符串文字会起作用。
*   morsearray 同上（我没算，但你不改，所以不需要 malloc 和 strcpy）
*   for 循环似乎是乱码：对于所有莫尔斯电码中的每个单独的字符，查看输入（并修改 for 循环使用的索引）

# php - preg_replace 更改以“@”开头并以“@\n”结尾的文本

> ID：13415909
> 
> 赞同：0
> 
> 时间：2012-11-16T11:42:31.997
> 
> 标签：php, preg-replace

我有这样的字符串：

```
@
String mystr = "test@example.com"
String mystr = test@@@@::example.com;
@ 
```

我想将第一个“@”更改为 [code]，然后将最后一个“@”更改为 [/code]。

在第一个和最后一个'@'之后我们有空格或'\n'。

这段代码对我不起作用：

```
$text = preg_replace('#[@](.|)(.*?)[@\n]#',"'<pre>$2</pre>'",$text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:45:56.460

我想说最简单的方法是非正则表达式：

```
$splitted = str_split($your_string, "@");
$first = array_shift($splitted);
$last = array_pop($splitted);

$result = "[code]" . implode("@", $splitted) . "[/code]"; 
```

或类似的东西，无论你看到什么最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:32:01.893

如果您想考虑主题字符串中的换行符，您需要添加以将“m”[修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)添加到正则表达式，也可能添加“s”。

这个片段可以满足您的要求：

```
<?php
$test = <<<END
@
String mystr = "test@example.com"
String mystr = test@@@@::example.com;
@

END;

echo preg_replace('/@\s(.*)@\s/sm', "<code>\n$1</code>\n", $test);
?> 
```

输出：

```
<code>
String mystr = "test@example.com"
String mystr = test@@@@::example.com;
</code> 
```

如果输入字符串中有多个“@”，则正则表达式应包含“U”修饰符：

```
<?php
$test = <<<END
@
String mystr = "test@example.com"
String mystr = test@@@@::example.com;
@

@
String mystr2 = "test2@example.com"
String mystr2 = test@@@@2::example.com;
@

END;

echo preg_replace('/@\s(.*)@\s/smU', "<code>\n$1</code>\n", $test);
?> 
```

输出：

```
<code>
String mystr = "test@example.com"
String mystr = test@@@@::example.com;
</code>

<code>
String mystr2 = "test2@example.com"
String mystr2 = test@@@@2::example.com;
</code> 
```

# emacs - 为新的 emacs 命令找到一个好的热键

> ID：13415910
> 
> 赞同：2
> 
> 时间：2012-11-16T11:42:43.227
> 
> 标签：emacs, hotkeys, emacs24

在 Emacs 中，一切都与热键有关。创建新快捷方式的每个人都知道这个问题：

1.  应该使用哪些热键？
2.  哪些热键被最流行的 Emacs 扩展 ( `org-mode`...) 使用并且应该避免使用？
3.  是否有为“用户”保留的热键，这些热键永远不会被扩展使用？
4.  如果代码应该公开，应该避免哪些热键？（某些键，例如`right/left Win`有时在键盘上丢失，`M-TAB`将被窗口管理器捕获）

是否有所有保留热键的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T22:52:03.957

GNU Emacs Lisp 参考手册有一个关于键绑定约定的详细页面：

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Key-Binding-Conventions.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Key-Binding-Conventions.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T00:46:14.807

坚持使用保留的`C-c <letter>`序列就可以确保不会与任何其他代码冲突（尽管它仍然只是一种约定；有时您会看到人们提供使用这些序列之一的代码，但是您可以将这些情况作为错误报告给作者）。

我建议使用一些`C-c <letter>`序列作为*前缀绑定*来将相关功能分组在一起。例如，您可以将`C-c w <key>`其用作与窗口相关的功能的模式。这为您提供了大量的保留绑定，可能具有更好的助记符属性，当然后续`<key>`可以是任何东西，而不仅仅是一个字母。

这也让您可以`C-c <letter> C-h`用来列出您在该前缀下绑定的所有内容，这很方便。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T15:05:10.557

键`C-c <letter>`是为用户保留的，所以包通常不应该使用它们（注意“字母”实际上是字母表中的一个字母，而不是“任何键”或“任何字符”）。但是大多数用户只是使用他们喜欢的任何一个键，当该绑定与某个包发生冲突时，他们会以一种特别的方式处理冲突（通过使用另一个键，或者通过专门覆盖包的绑定）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T08:59:23.100

自动化键绑定检查评估表单，如

(键绑定 [(control c) (delete)])

# c# - 读取大 TXT 文件，内存不足异常

> ID：13415916
> 
> 赞同：17
> 
> 时间：2012-11-16T11:43:12.417
> 
> 标签：c#, .net, exception, .net-4.0, out-of-memory

我想读取大 TXT 文件大小为 500 MB，首先我使用

```
var file = new StreamReader(_filePath).ReadToEnd();  
var lines = file.Split(new[] { '\n' }); 
```

但它抛出了内存异常然后我尝试逐行读取，但是在读取了大约 150 万行之后它又抛出了内存异常

```
 using (StreamReader r = new StreamReader(_filePath))
         {            
             while ((line = r.ReadLine()) != null)            
                 _lines.Add(line);            
         } 
```

或者我用过

```
 foreach (var l in File.ReadLines(_filePath))
            {
                _lines.Add(l);
            } 
```

但我又收到了

> mscorlib.dll 中出现“System.OutOfMemoryException”类型的异常，但未在用户代码中处理

我的机器是具有 8GB 内存的强大机器，所以它不应该是我的机器问题。

ps：我尝试在 NotePadd++ 中打开此文件，但收到“文件太大无法打开”异常。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-16T12:02:00.643

只需使用[File.ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)它返回一个`IEnumerable<string>`并且不会一次将所有行加载到内存中。

```
foreach (var line in File.ReadLines(_filePath))
{
    //Don't put "line" into a list or collection.
    //Just make your processing on it.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T11:45:11.350

异常的原因似乎是增长 _lines 集合但没有读取大文件。你正在阅读线和`adding to some collection _lines which will be taking memory and causing out of memory execption`。您可以应用过滤器以仅将所需的行放入 _lines 集合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-07-30T15:43:29.560

我知道这是一篇旧帖子，但谷歌在 2021 年把我送到了这里。

只是为了强调上面igrimpe的评论：

我最近在 StreamReader.ReadLine() 上遇到了一个 OutOfMemoryException，它循环浏览了巨大的文本文件的文件夹。

正如igrimpe 提到的，您有时会遇到这种情况，您的输入文件在换行符中表现出缺乏一致性。如果您正在遍历文本文件并遇到这种情况，请仔细检查您的输入文件中是否存在意外字符/ascii 编码的十六进制或二进制字符串等。

就我而言，我将 60 GB 有问题的文件拆分为 256 MB 的块，让我的文件迭代器将有问题的文本文件存储为异常陷阱的一部分，然后通过删除有问题的行来修复有问题的文本文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T11:53:13.937

编辑：

将整个文件加载到内存中会导致对象增长，如果无法为对象分配足够的连续内存，.net 将引发 OOM 异常。

答案还是一样，你需要流式传输文件，而不是读取全部内容。这可能需要重新架构您的应用程序，但是使用`IEnumerable<>`可以在应用程序的不同区域堆叠业务流程并延迟处理的方法。

* * *

具有 8GB RAM 的“强大”机器将无法在内存中存储 500GB 文件，因为 500 大于 8。（另外，您不会得到 8，因为操作系统会保留一些，您可以'不要在.Net中分配所有内存，32位有2GB的限制，打开文件和存储行会保存两次数据，有一个对象大小开销......）

您无法将整个内容加载到内存中进行处理，您必须通过处理流式传输文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-29T06:37:36.440

您必须先计算行数。它速度较慢，但​​您最多可以读取 2,147,483,647 行。

```
int intNoOfLines = 0;
using (StreamReader oReader = new 
StreamReader(MyFilePath))
{
    while (oReader.ReadLine() != null) intNoOfLines++;
}
string[] strArrLines = new string[intNoOfLines];
int intIndex = 0;
using (StreamReader oReader = new 
StreamReader(MyFilePath))
{
    string strLine;
    while ((strLine = oReader.ReadLine()) != null)
    {
       strArrLines[intIndex++] = strLine;
    }
} 
```

# ios - 在注册阶段，iOS 上支持哪些设备属性？

> ID：13415918
> 
> 赞同：8
> 
> 时间：2012-11-16T11:43:20.323
> 
> 标签：ios, profile, mdm, ota, over-the-air

我正在使用无线 (OTA) 注册安装配置文件。在第一阶段有效负载期间，iOS 上支持哪些设备属性？我正在发送类似的东西：

```
<plist version="1.0">
    <dict>
        <key>PayloadContent</key>
        <dict>
            <key>Challenge</key>
            <string>challenge</string>

            <key>DeviceAttributes</key>
            <array>
                <string>UDID</string>
                <string>DEVICE_NAME</string>
                <string>VERSION</string>
                <string>PRODUCT</string>
                <string>MAC_ADDRESS_EN0</string>
                <string>IMEI</string>
                <string>ICCID</string>
            </array>

            <key>URL</key>
            <string>https://my-profile-server</string>
        </dict>
        <key>PayloadDescription</key>
        <string>Enter device into the encrypted profile service</string>
        <key>PayloadDisplayName</key>
        <string>Profile Service</string>
        <key>PayloadIdentifier</key>
        <string>com.xxx.mobileconfig.profile-service</string>
        <key>PayloadOrganization</key>
        <string>XXX</string>
        <key>PayloadType</key>
        <string>Profile Service</string>
        <key>PayloadUUID</key>
        <string>1a21d4dd-6723-45c5-a184-c3fe0075db14</string>
        <key>PayloadVersion</key>
        <integer>1</integer>
    </dict>
</plist> 
```

在此有效负载中，我还能从设备获得更多属性吗？例如序列号？是否有任何可能属性的官方列表？任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T17:32:41.297

我没有找到官方列表，但是，我知道您可以在 OTA 注册阶段获得以下设备属性：

*   设备名称
*   你做了
*   IMEI
*   MEID
*   串行
*   版本
*   产品

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:53:29.810

重要提示：较新版本的 iOS 支持的属性越来越少。iOS 6 几乎只有 DEVICE_NAME、UDID 和 VERSION。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T09:36:17.163

*   你做了
*   版本
*   产品（即 iPhone1,1 或 iPod2,1）
*   MAC_ADDRESS_EN0（WiFi MAC 地址）
*   DEVICE_NAME（给定设备名称“iPhone”）
*   IMEI（仅限 iPhone）
*   ICCID（仅限 iPhone）

来自：[https ://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/CompanionFiles.zip](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/CompanionFiles.zip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-26T16:23:01.563

我要补充一点，VERSION 不是字符串“8.3”（例如），而是操作系统的内部构建 ID。'8.3' 可能有多个这样的 VERSION （可能仍然被视为相同源树的微小更改。）

有一些在线服务提供 IPSW 下载，还提供内部名称以供查找。

访问：[https](https://api.ipsw.me/v2.1/firmwares.json) ://api.ipsw.me/v2.1/firmwares.json以获取构建 ID 列表。

# linux - 在多个目录中查找文件

> ID：13415920
> 
> 赞同：5
> 
> 时间：2012-11-16T11:43:29.157
> 
> 标签：linux, bash, find

我正在使用 RHEL。在我当前的文件夹中有子文件夹。我需要找到文件在子文件夹中的位置。这些文件可以是一个或多个。

我正在使用它，但它会无限迭代：

```
for f in ./{Failed,Loaded,ToLoad}; do find -name 'file';  done 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-16T11:44:34.627

尝试这样做：

```
find {Failed,Loaded,ToLoad} -name 'file' 
```

如果`{Failed,Loaded,ToLoad}`真的是一些目录。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-16T11:59:11.410

您的 for 循环的语法不正确。

它应该是：

```
for f in Failed Loaded ToLoad
do
    find "$f" -name 'file'
done 
```

但是你不需要循环。它可以像这样简单地完成：

```
find Failed Loaded ToLoad -name 'file' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-13T22:08:52.050

`find`可以为源目录采用多个参数。所以，你可以使用：

```
find Failed Loaded ToLoad -name 'file' ... 
```

你不需要循环。如果您想`find`查看子目录的子集，这会很方便。

# c# - 报告查看器设置参数 iList 参数错误

> ID：13415933
> 
> 赞同：0
> 
> 时间：2012-11-16T11:44:22.837
> 
> 标签：c#, visual-studio-2012, return, reportviewer, ilist

大家早，

使用 Visual Studio 2012 Ultimate 和 C#.NET 4.0。

```
IList<Microsoft.Reporting.WinForms.ReportParameter> param = new List<Microsoft.Reporting.WinForms.ReportParameter>();

param = repsetup.NewReportSetup(
    txtNewPart.Text.ToString(),
    txtBatch.Text.ToString(), 
    txtLocation.Text.ToString(), 
    txtWheel.Text.ToString(), 
    txtGear.Text.ToString(), 
    txtLength.Text.ToString(),
    txtFits.Text.ToString(), 
    txtNewBar.Text.ToString(), 
    txtNewBarNum.Text.ToString(), 
    txtABS.Text.ToString()
);

reportViewer1.LocalReport.SetParameters(new Microsoft.Reporting.WinForms.ReportParameter(param)); 
```

尝试设置报告参数时，它会抱怨列表。该列表填充在另一个表中并返回一个列表。

```
Error 2 - Argument 1: cannot convert from 'System.Collections.Generic.IList<Microsoft.Reporting.WinForms.ReportParameter>' to 'string' 
```

还有错误：

```
Error 1 - The best overloaded method match for 'Microsoft.Reporting.WinForms.ReportParameter.ReportParameter(string)' has some invalid arguments 
```

如何`IList`在`SetParameters`方法中使用？

非常感谢

这是`NewReportSetup`方法：

```
public IList<Microsoft.Reporting.WinForms.ReportParameter> NewReportSetup(string part, string batch, string locn, string wheel, string gear, string length,
                                string fits, string newbar, string newbarnum, string abs)
{
    IList<Microsoft.Reporting.WinForms.ReportParameter> parameters = new List<Microsoft.Reporting.WinForms.ReportParameter>();
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramPart", part));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBatch", batch));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramLocn", locn));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramWheel", wheel));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramGear", gear));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramLength", length));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramABS", abs));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBuyer", fits));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBarCode", newbar));
    parameters.Add( new Microsoft.Reporting.WinForms.ReportParameter("paramBartxt", newbarnum));
    return parameters;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:29:14.517

Report.SetParameters[方法](http://msdn.microsoft.com/en-us/library/ms252195%28v=vs.80%29.aspx)需要一个`IEnumerable<ReportParameter>`：

换句话说，将您的报告参数列表发送到此方法，而不是 a 的实例`ReportParameter`（您尝试从列表中创建）：

```
reportViewer1.LocalReport.SetParameters(param); 
```

# javascript - 动作元素的选择器：类与自定义 HTML5 属性

> ID：13415934
> 
> 赞同：2
> 
> 时间：2012-11-16T11:44:27.390
> 
> 标签：javascript, jquery, html

我认为有点主观的问题。我有一个动作元素，想在绑定事件的代码中引用它，我试图在声明此类事物的方式之间进行选择：

1）第一个选项在声明和使用上更简单直接：

```
<a class="play">Play</a>

('#menu .play').bind('click',...) 
```

2) 但第二个选项明确显示了属性的用途

```
<a data-action="play">Play</a>

('#menu [data-action="play"]').bind('click',...) 
```

我应该选择哪个（我不会在 CSS 中使用选择器，只在 JS 代码中使用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:50:14.710

如果您不将其用于样式，我会倾向于，`data-action="play"`因为它更好地描述了目的（动作就是游戏）。
但是，如果您打算获取多个这样的元素并循环它们，我会使用`class="play"`, 因为那样您又将它们视为同类事物的类.. 或者**同时**使用,*类*来获取它们和*data-action*来验证，那里不会出错。

# java - 如何使 tomcat 包含当前项目中的库？

> ID：13415937
> 
> 赞同：0
> 
> 时间：2012-11-16T11:44:33.710
> 
> 标签：java, eclipse, tomcat, classpath, libs

我在某处读过一个很好的做法，最好将所需的库包含在每个项目中，然后将您需要的所有库添加到 tomcat 文件夹中。好吧，现在 Tomcat 似乎需要将所有必需的库放在 Tomcat 的 lib 文件夹中。如何让它使用项目构建路径中的库？我正在通过 Eclipse 使用 tomcat 7.032。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:49:04.227

webapp 的库必须在`WEB-INF/lib`已部署的 web 应用程序目录或 war 文件的目录中。

此目录中的每个 jar 文件都将位于 webapp 的类路径中，而不会位于其他已部署 webapp 的类路径中。您确实不应该将 webapp 库放入 Tomcat 的类路径中。

# android - Android- twitter4j 2.2.6 中缺少 twitter.getFriendsStatuses

> ID：13415940
> 
> 赞同：0
> 
> 时间：2012-11-16T11:44:40.153
> 
> 标签：android, twitter, twitter4j

我目前正在从 twitter4j-core-2.1.11.jar 迁移到 2.2.6。

```
twitter.getFriendsStatuses(twitter.getScreenName()).toString(); 
```

我在 2.2.6 中没有看到任何这样的方法。令人惊讶的是，这些库不向后兼容。

2.2.6 中是否有等效方法或其他获取好友状态的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:37:42.813

我无法在 twitter4j-core-2.2.6.jar 中获得此方法

```
twitter.getFriendsStatuses(twitter.getScreenName()).toString(); 
```

所以必须坚持使用 2.1.11

如果有人有更好的选择，请在这里回复，它可能会帮助其他来搜索的人。

# xcode - 架构 i386 的未定义符号：“_OBJC_CLASS_$_SDZInfo”(sudzc)

> ID：13415942
> 
> 赞同：0
> 
> 时间：2012-11-16T11:44:44.530
> 
> 标签：xcode, sudzc, i386

我正在使用 XCode 4.1.1 开发应用程序

我从[http://sudzc.com/](http://sudzc.com/)添加了用于使用 Web 服务的库。

当我编译应用程序时，它给出了这个错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_SDZInfo", referenced from:
      objc-class-ref in SimpleTableViewAppDelegate.o
      objc-class-ref in RootViewController.o
  "_OBJC_CLASS_$_SoapFault", referenced from:
      objc-class-ref in RootViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

XCode 的配置是 Build 2.4 和 Deployment Target 5.1。

此解决方案对我不起作用，因为添加了 SimpleTableViewAppDelegate.m 和 RootViewController.m [“如果您的类的 .m 文件未在“构建阶段”选项卡的“编译源”步骤下列出，则可能会出现此类错误您的目标。通常 Xcode 会为您执行此操作，但有时它会丢失情节，您需要手动添加 .m 文件“](https://stackoverflow.com/questions/6984368/undefined-symbols-for-architecture-i386-objc-class-skpsmtpmessage-refere)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:18:21.270

错误是说丢失的文件是包含`SDZInfo`和的文件`SoapFault`。您提到的两个 .m 文件必须已经在项目中，因为它们被列为**需要**这些东西的地方。

# iphone - Objective-C 中的音频缓冲区修改

> ID：13415946
> 
> 赞同：0
> 
> 时间：2012-11-16T11:44:53.850
> 
> 标签：iphone, objective-c, ios, audio, core-audio

我想读取音频文件缓冲区并在修改后将它们保存到新文件中。获取数组中的缓冲区并修改它们的最佳方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:52:03.783

您可以在这里查看：http: [//www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html) 以更好地掌握音频操作概念。

# php - 如何使用 FPDF 和 PHP 进行静默打印

> ID：13415948
> 
> 赞同：1
> 
> 时间：2012-11-16T11:45:04.373
> 
> 标签：php, javascript, pdf, printing, fpdf

我有一个脚本，它使用[FPDF](http://www.fpdf.org/)动态地将字母创建为 PDF 。我已经能够使[AutoPrint 功能](http://www.fpdf.org/en/script/script36.php)正常工作，它会在加载时显示打印对话框。

上一个链接上还有另一个名为 AutoPrintToPrinter 的功能，它应该有条件地允许大声打印的静音。

```
function AutoPrintToPrinter($server, $printer, $dialog=false)
{
    //Print on a shared printer (requires at least Acrobat 6)
    $script = "var pp = getPrintParams();";
    if($dialog)
    $script .= "pp.interactive = pp.constants.interactionLevel.full;";
else
    $script .= "pp.interactive = pp.constants.interactionLevel.automatic;";
$script .= "pp.printerName = '\\\\\\\\".$server."\\\\".$printer."';";
$script .= "print(pp);";
$this->IncludeJS($script);
} 
```

我知道打印机和服务器名称，但没有任何反应。即使我要求“大声”打印，我什至没有得到对话框。

我还查看了有关此问题的[Adob​​e 教程](http://livedocs.adobe.com/acrobat_sdk/9.1/Acrobat9_1_HTMLHelp/wwhelp/wwhimpl/common/html/wwhelp.htm?context=Acrobat9_HTMLHelp&file=JS_API_AcroJS.88.981.html)，并尝试了以下修改后的代码

```
var pp = this.getPrintParams();
pp.interactive = pp.constants.interactionLevel.automatic;
pp.printerName = "Adobe PDF";
this.print(pp); 
```

一切都没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:33:05.057

基本上 PHP 不能轻易连接硬件。

您可以使用 shell 执行注释以在 php 中打印文件，如下所示

对于 Windows 服务器

```
shell_exec("'C:\Program Files\Adobe\Acrobat 6.0\Reader\acrord32.exe' /t c:\filename.pdf \\myserver\myprinter"); 
```

对于 linux 服务器

```
exec("lp file.pdf"); 
```

我不确定这一点。希望这会帮助你......试试这个。

# java - Poi 公式计算错误

> ID：13415954
> 
> 赞同：0
> 
> 时间：2012-11-16T11:45:20.067
> 
> 标签：java, excel, apache-poi

我正在使用`poi-3.8-20120326.jar`Excel 2007，试图在一个列表中收集所有单元格值。

我正在使用公式进行日期增量操作。例如：`=(i2+3)`对于 k2 单元。

通过我的 java 代码评估这个公式时返回`#VALUE!`（`i2`是一个日期单元格。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:34:16.723

没有来源很难猜出哪里出了问题，但我认为这是你可能会忘记的两件事。

1) 公式评估器

2) 数据格式化程序

看看例子。

```
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.DataFormatter;
import org.apache.poi.ss.usermodel.FormulaEvaluator;
import org.apache.poi.openxml4j.exceptions.InvalidFormatException;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.FileNotFoundException;

public class CellReader {

    private Workbook workbook;
    private DataFormatter formatter;
    private FormulaEvaluator evaluator;

    private void openWorkbook(String file) throws FileNotFoundException,
            IOException, InvalidFormatException {
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(file);

            workbook = WorkbookFactory.create(fis);
            evaluator = workbook.getCreationHelper().createFormulaEvaluator();
            formatter = new DataFormatter(true);
        } finally {
            if (fis != null) {
                fis.close();
            }
        }
    }

    private void printXLSX() {
        Sheet sheet = null;
        Row row = null;
        Cell cell = null;
        int lastRowNum;
        int lastCellNum;
        sheet = workbook.getSheetAt(0);

        lastRowNum = sheet.getLastRowNum();
        for (int j = 0; j <= lastRowNum; j++) {
            row = sheet.getRow(j);
            if (row == null) {
                continue;
            }
            lastCellNum = row.getLastCellNum();
            for (int k = 0; k <= lastCellNum; k++) {
                cell = row.getCell(k);
                if (cell == null) {
                    continue;
                }
                if (cell.getCellType() != Cell.CELL_TYPE_FORMULA) {
                    System.out.println(formatter.formatCellValue(cell));
                } else {
                    System.out.println(formatter.formatCellValue(cell,evaluator));
                }
            }

        }
    }

    public static void main(String[] args) {
        CellReader converter = null;
        try {
            converter = new CellReader();
            converter.openWorkbook("a.xlsx");
            converter.printXLSX();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

# php - Drupal：使用视图输出作为节点内容

> ID：13415956
> 
> 赞同：2
> 
> 时间：2012-11-16T11:45:21.040
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-views

我正在编写一个 Drupal 7 模块来在内容中显示模块的子节点。节点有一个字段`parent_nodes`（节点引用），其中一个或多个节点被选为父节点。

首先，我创建了一个`projects`带有块视图 display 的视图，显示带有上下文过滤器`subprojects`的类型节点。`project``field_parent_project`

这是我的模块：

```
<?php

function projects_preprocess_node(&$variables) {
  if ($variables['type'] == 'project') {
    if (isset($variables['view_mode']) && $variables['view_mode'] == 'full') {
      _projects_add_subprojects($variables);
    }
  }
}

function _projects_add_subprojects(&$variables) {
  $nid = $variables['nid'];
  $view = views_get_view('projects');
  $preview = $view->preview('subprojects', array($nid));
  $subprojects = array(
      '#title' => t('Subprojects'),
      '#label_display' => 'above',
      '#weight' => 10,
      //'#theme' => 'field',
      '#markup' => $preview,
  );
  if (!isset($variables['content']['subprojects'])) {
    $variables['content']['subprojects'] = array();
  }
  $variables['content']['subprojects'][] = $subprojects;
  dpm($variables['content']);
} 
```

这是可行的，将视图显示输出添加到节点的内容中。

只有一些事情不起作用：

*   标题（标签）
*   当与其他内容一起渲染时，重量不会改变显示位置（它始终是第一个，在正文之上）。

如果我取消注释该`'#theme' => 'field'`行，标题将显示为标签，但不会呈现任何内容。这是因为使用了字段主题，我猜它需要`#items`并且不使用该`#markup`元素。

**我不能使用子节点作为参考**，而只能使用父节点。

**解决方案必须独立于主题，所以不要回答“更改主题模板”或类似的问题**

**如何在节点中显示子节点？我正在寻找一种方法来获得可解释的东西，它是一个领域**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:59:20.947

如果您还不知道，[Viewfield 模块](http://drupal.org/project/viewfield)允许您将视图指定为内容类型中的字段。这可能会为您节省一些编码，但您可能不希望整个模块执行这样的特定任务，所以......

如果您想继续使用您编写的自定义代码，那么您需要将添加的内容重新构建为 Drupal 期望的正确[渲染数组结构。](http://drupal.org/node/930760)尝试这样的事情：

```
 $subprojects_view_output = array(
      '#type' => 'markup',
      '#markup' => $preview,
  );
  $subprojects = array(
      '#theme' => 'field',  
      '#weight' => 10,
      '#title' => t('Subprojects'),
      '#items' => $subprojects_view_output,
  ); 
```

有了上述内容，您的字段的标题/标签以及字段的内容（视图本身）应该会显示出来。该代码未经测试，因此在语法方面可能不是 100% 正确，但希望能为您提供解决方案的途径。

**编辑：**我测试了上述内容，但它**不起作用，**因为为了使用现有的[theme_field](http://api.drupal.org/api/drupal/modules!field!field.module/function/theme_field/7)函数，Drupal 似乎需要更多信息来呈现像`#field_name`, `#field_type`,`#entity_type`等这样的字段，正如您应该在警告消息中看到的那样。

本质上，您正在*伪造*一个字段，如果您想继续使用内置的[theme_field](http://api.drupal.org/api/drupal/modules!field!field.module/function/theme_field/7)函数，您需要向 Drupal 提供它期望的所有信息，包括[预处理](http://api.drupal.org/api/drupal/modules!field!field.module/function/template_preprocess_field/7)函数中预期的所有变量。

或者，您可以继续使用原始代码并添加 a`#prefix`以使您的标题/标签呈现如下：

```
 $subprojects = array(
      '#weight' => 10,
      '#prefix' => '<div id="subprojects-view">asdf:</div>',
      //'#theme' => 'field',
      '#markup' => $preview,
  ); 
```

然后相应地使用 CSS 设置标题/标签的样式。正如你所描述的，我对加权没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T16:13:42.170

感谢@nmc，这是我的最终解决方案。如果没有找到结果，则不显示标题。结果检查由 完成`if (count($view->result) == 0)`。重量在起作用。

```
<?php

function projects_preprocess_node(&$variables) {
  $type = $variables['type'];
  if ($type == 'project' || $type == 'customer') {
    if (isset($variables['view_mode']) && $variables['view_mode'] == 'full') {
      _projects_add_subprojects_markup($variables);
    }
  }
}

function _projects_add_subprojects_markup(&$variables) {
  $nid = $variables['nid'];
  $view = views_get_view('projects');
  $preview = $view->preview('subprojects', array($nid));
  if (count($view->result) == 0) {
    return;
  }
  $variables['content']['subprojects'] = array(
      '#weight' => 10,
      '#prefix' => '<h2>' . t('Subprojects') . '</h2>',
      '#markup' => $preview,
  );
} 
```

# ios - NSInvocationOperation 回调太快

> ID：13415957
> 
> 赞同：5
> 
> 时间：2012-11-16T11:45:25.953
> 
> 标签：ios, nsoperation, nsoperationqueue, nsinvocation, nsinvocationoperation

我知道类似的问题已经被问过几次，但我很难弄清楚如何解决这个特定的问题。到目前为止，我所做的一切都是在主踏板上进行的。我现在发现我需要执行一个需要一些时间的操作，并且我想在操作期间在我的显示器上添加一个 HUD，并在操作完成后将其淡出。

在阅读了很多关于 GCD 的内容（并且变得很困惑）之后，我决定最简单的方法是使用 NSInvocationOperation 调用我的耗时方法并将其添加到新创建的 NSOperationQueue 中。这就是我所拥有的：

```
 [self showLoadingConfirmation]; // puts HUD on screen

        // this bit takes a while to draw a large number of dots on a MKMapView            
        NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                                selector:@selector(timeConsumingOperation:)
                                                                                  object:[self lotsOfDataFromManagedObject]];

        // this fades the HUD away and removes it from the superview
        [operation setCompletionBlock:^{ [self performSelectorOnMainThread:@selector(fadeConfirmation:) withObject:loadingView waitUntilDone:YES]; }];

        NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];
        [operationQueue addOperation:operation]; 
```

我希望这会显示 HUD，开始在地图上绘制点，然后*一旦该操作完成*，淡出 HUD。

相反，它会显示 HUD，开始在地图上绘制点，然后在绘制点的同时淡出 HUD。根据我的 NSLogs，在调用该方法以淡化 HUD 之前大约有四分之一秒的延迟。与此同时，点的绘制又持续了几秒钟。

我该怎么做才能让它等到地图上的绘图完成后再消失 HUD？

谢谢

编辑添加：

进行以下更改后，我几乎取得了成功：

```
 NSInvocationOperation *showHud = [[NSInvocationOperation alloc] initWithTarget:self
                                                                              selector:@selector(showLoadingConfirmation)
                                                                                object:nil];

        NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                                selector:@selector(timeConsumingOperation:)
                                                                                  object:[self lotsOfDataFromManagedObject]];

        NSInvocationOperation *hideHud = [[NSInvocationOperation alloc] initWithTarget:self
                                                                              selector:@selector(fadeConfirmation:)
                                                                                object:loadingView];

        NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];

        NSArray *operations = [NSArray arrayWithObjects:showHud, operation, hideHud, nil];
        [operationQueue addOperations:operations waitUntilFinished:YES]; 
```

奇怪的是，好像是先调用timeConsumingOperation，再调用showLoadingConfirmation，再调用fadeConfirmation。这是根据我在这些方法中触发的 NSLogs 得出的。

我在屏幕上看到的行为是这样的：绘制点并且地图相应地调整它的缩放（部分时间ConsumingOperation），然后HUD出现在屏幕上，然后什么都没有。所有三个 NSLog 都会立即出现，即使 showLoadingConfirmation 在 timeConsumingOperation 完成之前不会发生，并且 fadeConfirmation 似乎根本没有发生。

这看起来很奇怪，但也似乎暗示有一种方法可以在 timeConsumingOperation 完成时使某些事情发生。

我试着添加这个：

```
[operationQueue setMaxConcurrentOperationCount:1]; 
```

还有这个：

```
[showHud setQueuePriority:NSOperationQueuePriorityVeryHigh];
[operation setQueuePriority:NSOperationQueuePriorityNormal];
[hideHud setQueuePriority:NSOperationQueuePriorityVeryLow]; 
```

但它们似乎没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:40:01.523

为 NSInvocationOperation 设置完成处理程序时，请注意您实际在做什么：当此类操作完成时，会发生以下情况（来自 NSOperation 类参考）：

> 无法保证完成块的确切执行上下文，但通常是辅助线程。因此，您不应使用此块来执行任何需要非常特定的执行上下文的工作。相反，您应该将该工作分流到应用程序的主线程或能够执行此操作的特定线程。例如，如果您有一个自定义线程来协调操作的完成，您可以使用完成块来 ping 该线程。

因此，首先，该块在辅助线程上执行（因此它将进入该线程的队列，当轮到它时，它只是将另一个作业发送到主线程的队列）。这意味着它将与其他待处理作业混合在此类队列中，例如从`timeConsumingOperation:`选择器发送到主队列的引脚的最后更新。

问题来了：**如果您不为不同的作业设置优先级，那么即使您知道它们之前及时发送，也无法确定最终处理这些作业的顺序**。此外，在您的情况下，您的 NSInvocationOperation 已完成这一事实**并不一定意味着在调用块时您的所有对象都已在屏幕上绘制，**这仅意味着它们已被发送到 UI 更新线程以进行处理轮到他们了。

考虑到这一点，并且考虑到您不想采用 GCD 方式，（我建议再试一次，因为我知道一开始并不容易，但是当您开始使用它时，您会意识到这是一个很棒的解决方案对于您想在 iPhone 上执行的几乎所有多线程操作）我将创建一个 NSOperationQueue 并将所有作业发送到那里（删除包含的 HUD 的作业，但优先级低于其他作业）。这样，您可以确保在完成所有“固定”作业后，在主队列中处理 HUD 的移除，这是您的第一个目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:50:41.820

如果 HUD 正在消失，则您的完成块被调用，这意味着您的`timeConsumingOperation:`方法返回。

如果您仍然看到正在绘制的点，这意味着动画或绘图事务仍在进行中或仍在排队，即使在`timeConsumingOperation:`返回之后也是如此。解决方案取决于您用于绘图的技术。你在使用核心动画吗？带有注释的 MapKit？

# ios - moveRowAtIndexPath – 删除单元格的动画？

> ID：13415958
> 
> 赞同：1
> 
> 时间：2012-11-16T11:45:29.103
> 
> 标签：ios, uitableview, animation

当我进入 canMoveRowAtIndexPath 模式时，一切都呈现出精美的动画效果（当我将单元格拖到它们上方时，其他单元格会滑动），直到我将单元格放到所需的位置。它很快就会弹出。如何为它设置动画（例如在提醒应用程序中）？

**maddy 的评论解决了问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:01:19.083

检查[此链接](https://github.com/beefon/TableView-Extended-Animations)可能对您有帮助。

UITableViewExtendedAnimations 类别允许执行新的动画，例如移动单元格、交换单元格以及从一个单元格转换到另一个单元格。UITableView 上新增了三个方法：

```
-moveRowAtIndexPath:toIndexPath:
-transitRowAtIndexPath:toRowIndexPath:
-exchangeRowAtIndexPath:withRowAtIndexPath: 
```

这是使用常规的 Objective-C 类别完成的。

为了执行这样的动画 UITableViewDelegate 协议进行了扩展。您必须实施一些新方法才能使这些动画成为可能。查看示例项目以查看该方法。

示例项目的视频： [http ://www.youtube.com/embed/bC-YTq9C0Sk](http://www.youtube.com/embed/bC-YTq9C0Sk)

# php - 贝宝 notify_url 和 return_url。使用 PHP 接收没有 IPN 的变量

> ID：13415964
> 
> 赞同：18
> 
> 时间：2012-11-16T11:45:45.180
> 
> 标签：php, paypal, paypal-ipn

我正在尝试为贝宝设置一个简单的付款选项，但在退货和通知 URLS 时遇到了一些麻烦/困惑。我对php相当陌生，以前在asp中已经完成了这项工作，但现在我迷路了。

所以我的基本贝宝表格：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="PayPalForm" name="PayPalForm"  target="_top">
 <input type="hidden" name="cmd" value="_xclick">
 <input type="hidden" name="business" value="email@hotmail.com">
 <input type="hidden" name="amount" value="0.01">
 <input type="hidden" name="item_name" value="Composite Door">
 <input type="hidden" name="item_number" value="<?php echo $orderID ?>">
 <input type="hidden" name="currency_code" value="GBP">
 <input type="hidden" name="cancel_return" value="http://www.mydomain.co.uk/paypal-notcompleted.php">
<input type="hidden" name="return" value="http://www.mydomain.co.uk/paypal-completed.php">
<input type="hidden" name="notify_url" value="http://www.mydomain.co.uk/paypal-completed.php"> 
</form>

  <script>
    document.PayPalForm.submit();
   </script> 
```

如您所见，表单发布到贝宝，然后根据结果返回，如果失败/取消，它将转到 paypal-notcompleted.php。

如果成功，它会转到 paypal-completed.php。这是我无法理解的地方，我还没有设置 IPN，我要做的就是将一些变量 paypal 发回给我，运行一个简单的插入查询并在确认消息中显示一些详细信息给客户。

我可以将 notify_url 和 return_url 作为同一页面吗？

为什么贝宝没有将完整的预期（如此处所示：[Paypal 的通知网址](https://stackoverflow.com/questions/2865970/notify-url-of-paypal)）发布回页面？

我知道与 XML 等有关，但我只是想我可以 $_GET 贝宝发回的变量。有没有人这样做过，他们能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-16T16:19:03.517

要将详细信息返回到您的返回 URL，您需要使用[PDT](https://www.paypal.com/pdt)。[它与IPN](https://www.paypal.com/ipn)非常相似，只是它旨在与您的返回 URL 一起使用，而[IPN](https://www.paypal.com/ipn)旨在与您服务器上的第 3 方[IPN](https://www.paypal.com/ipn)侦听器脚本一起使用。

[PDT可以简单地在返回 URL 页面上向用户显示交易，但不建议使用](https://www.paypal.com/pdt)[PDT](https://www.paypal.com/pdt)进行任何付款后处理（即数据库更新、发送电子邮件收据等），因为无法保证即使在您的 PayPal 帐户中启用了自动返回，用户也会返回此页面。

无论用户是否在完成付款后返回您的网站，每次交易发生时都会触发[IPN 。](https://www.paypal.com/ipn)

通知 URL 仅用于 IPN，它会覆盖您在 IPN 的 PayPal 配置文件中的任何设置。需要在您的 PayPal 帐户配置文件中配置 PDT，以便将数据返回到您的返回 URL。

您将希望使用不同的 URL 进行返回和通知，否则相同的代码将运行两次：一次是当用户返回您的站点时，另一次是来自 PayPal IPN POST。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-27T03:17:52.407

**支付数据传输 (PDT)**

和url 是一次性支付数据传输 ( [PDT](https://developer.paypal.com/docs/classic/products/payment-data-transfer/) ) 调用，主要是为了让`return`用户*在您的网站上完成交易*。它只是传递信息以合理地帮助您的站点完成该任务。无法保证买家在退货前不会退出，因此您不能依赖仅使用这些来进行*任何*交易后处理。`cancel_return`

 ****即时付款通知 (IPN)**

`notify_url`由即时支付通知 ( [IPN](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNIntro/) ) 流程使用，并在交易状态的*每次更改时调用。*它旨在完整记录交易生命周期中采取的*所有*操作，您可以依靠它来推动后端流程，例如会计、订单履行或取消。IPN 流程采取措施确保流程的完整性。

它们的目的不同，因此所涉及的信息和安全性也不同。对于[利弊](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNPDTAnAlternativetoIPN/)。

**IPN 消息可能会严重延迟，因此请使用所有三个变量**

请注意，虽然大多数 IPN 消息是在 PayPal 交易完成后的几秒钟内发送的，但我经历了长达几个小时的延迟，因此它们是可靠的，但不一定及时。

我建议使用所有`return`,`return_cancel`和`notify_url`, 因为前两个将立即返回，以便您可以立即向用户提供反馈，并更新后端数据/发起履行流程，但如果用户之前退出 PayPal，则使用后者作为备份被退回。指示您的买家返回您的网站，以确保及时处理他们的订单。

只需要管理订单状态，这样如果 PDT 已经这样做，IPN 就不会触发履行，这基本上是您必须做的，以确保重复的`Completed`IPN 消息不会在第一次之后重新触发履行。

**`Notify_url`继续用于同一事务的后续消息**

同一笔交易的 IPN 消息继续发送到同一`notify_url`地址。我查看了我们的 IPN 历史记录，一条`Refund`IPN 消息转到了原始`notify_url`.

即使您根据[https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNSetup/](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNSetup/)更改 IPN 首选项，这种情况也会继续：

*除非您禁用了接收 IPN 消息的首选项，否则 IPN 消息将始终发送到您的通知 URL。即使您没有在您的个人资料中启用接收 IPN 消息，或者您通过关闭 IPN 消息重置了您的偏好，**PayPal 仍会将 IPN 消息发送到您为特定付款指定的通知 URL。**当您启用接收 IPN 时，由于您在个人资料中禁用首选项而未发送的 IPN 消息将显示在 IPN 历史记录中。它们出现在历史记录中后，您可以选择是否重新发送它们。*

我不确定相关交易，如争议，或后续订阅付款，是否仍将使用原始`notify_url`. 也许真正知道的人可以提供答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-21T14:09:56.740

你的 notify-url 和 return url 都是不同的。成功付款后，您的退货网址会引导您的客户并提供一些退货信息。顺便说一下，通知 url 是为了获取您的客户购买的完整交易详情，您的客户无法访问这些交易详情，这是为了您的数据库或存储目的。**

# php - PHP登录脚本SQL错误

> ID：13415966
> 
> 赞同：0
> 
> 时间：2012-11-16T11:45:52.443
> 
> 标签：php, mysql, sql, login

我对 SQL 和 PHP 还很陌生。

我正在尝试编写一个简单的登录脚本。我在 HTML 文档中有一个表单，我已经证明将正确的数据发布到所需的 2 个变量中，但是我的脚本在执行 SQL 时失败了......

我还在 mysqlWorkbench 中测试了 SQL，得到了我想要的结果？？？

请帮忙。

这是我的脚本：

```
<?PHP

$odbc = mysql_connect('localhost', 'root', '') or die ("could not connect to database");
mysql_select_db('examresults', $odbc)  or die("Could not find database");

// username and password sent from form 
$username=$_POST['username']; 
$password=$_POST['password']; 

$sql='SELECT * FROM tuser where username = '.$username.' and password = '.$password.'';

$result = mysql_query($sql, $odbc) or die ("Error in SQL");

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

 //If result matched username and password, table row must only equal 1 row
if($count==1)
{   
    header("location:exammenu.php");
}
else 
{
    echo 'username and password do not match';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:48:33.010

查询应如下所示：

```
 $sql='SELECT * FROM tuser where username = "'.$username.'" and password = "'.$password.'"'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T11:56:08.813

如果你真的需要使用`mysql`，*至少清理*你的输入。还要注意 $sql 变量中的引号。这应该有效（尽管未经测试）：

```
<?PHP

$odbc = mysql_connect('localhost', 'root', '') or die ("could not connect to database");
mysql_select_db('examresults', $odbc)  or die("Could not find database");

// username and password sent from form 
$username=mysql_real_escape_string($_POST['username'], $odbc); 
$password=mysql_real_escape_string($_POST['password'], $odbc); 

$sql=sprintf('SELECT * FROM tuser where username = "%s" and password = "%s"', $username, $password);

$result = mysql_query($sql, $odbc) or die ("Error in SQL");

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

 //If result matched username and password, table row must only equal 1 row
if($count==1)
{   
    header("location:exammenu.php");
}
else 
{
    echo 'username and password do not match';
} 
```

我建议使用`sprintf`格式化您的 sql 语句，以便更容易发现此类错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T12:01:04.817

**注意**：`mysql_*`函数已弃用，您不应再使用它们。您的代码也容易受到 SQL 注入的攻击。

使用`[mysql_error](http://php.net/manual/de/function.mysql-error.php)`而不是仅仅打印出“SQL 中的错误”会给我们（和您）一个更详细的 sql 错误消息。但很可能它失败了，因为您忘记`" "`在查询中放置字符串。

```
$sql='SELECT * FROM tuser where username = "'.$username.'" and password = "'.$password.'"'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T12:30:29.543

你可以试试这段代码。我认为它会正常工作。

```
<?PHP

$odbc = mysql_connect('localhost', 'root', '') or die ("could not connect to database");
mysql_select_db('examresults', $odbc)  or die("Could not find database");

// username and password sent from form 
$username=$_POST['username']; 
$password=$_POST['password']; 

$sql="SELECT * FROM tuser where username = '".$username."' and password = '".$password."'";

$result = mysql_query($sql, $odbc) or die ("Error in SQL");

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

 //If result matched username and password, table row must only equal 1 row
if($count==1)
{   
    header("location:exammenu.php");
}
else 
{
    echo 'username and password do not match';
}
?> 
```

# java - Spring RestTemplate 不允许取消 / InterruptedException

> ID：13415969
> 
> 赞同：0
> 
> 时间：2012-11-16T11:46:02.817
> 
> 标签：java, spring, rest

我有一个`RestTemplate`用来调用`getForObject`. 这个任务被提交给一个执行器服务。在尝试取消它之前，我允许进程运行 x 秒。但是，当我调用`Future.cancel(true)`并且任务在方法中等待时`getForObject`，线程/任务不会被取消。

我已经测试了代码，如果我把 a`Thread.sleep`代替`getForObject`我得到一个`InterruptedException`. 但是，当任务在里面时`getForObject`不会发生中断。实际上，在 Restful 调用完成之前，该方法不会返回。

有没有办法取消休息电话？

我看到这篇文章[取消中止中断了一个 spring android resttemplate 请求](https://stackoverflow.com/questions/12415554/cancel-abort-interrupt-a-spring-android-resttemplate-request)，但唯一提出的解决方案似乎是一个 kludge。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:15:21.410

我不熟悉该`RestTemplate`课程，但听起来您有一个不可中断的阻塞呼叫。这意味着取消未来或中断线程不会有任何影响。在这种情况下，我知道的唯一解决方案是使用不推荐使用的`Thread.terminate()`方法来终止线程。请注意，您必须非常小心地执行此操作，因为它会使您的对象处于无效状态。

# python - 在python中打开一个lzo文件，无需解压文件

> ID：13415970
> 
> 赞同：4
> 
> 时间：2012-11-16T11:46:13.033
> 
> 标签：python, lzo

我目前正在从事一个涉及 Twitter 数据的第三年项目。该部门为我提供了价值一个月的 Twitter 的 .lzo。最小的是 4.9gb，解压后是 29gb，所以我正在尝试打开文件并阅读。这是可能的还是我需要以这种方式解压缩和处理数据？

编辑：已尝试逐行读取并解压缩读取的行

更新：找到了一个解决方案 - 阅读 lzop -dc 的 STDOUT 就像一个魅力

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T12:08:35.427

如何使用 switch 在子进程中启动[`lzop`二进制文件](http://www.lzop.org/lzop_man.php)`-c`，然后**逐行**读取其 STDOUT ？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-16T11:54:43.917

我只知道一个用于 LZO 的 Python 库——https: [//github.com/jd-boyd/python-lzo](https://github.com/jd-boyd/python-lzo)，它需要完全解压缩（此外——它解压缩内存中的内容）。

所以我认为你需要在使用它们之前解压缩文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-26T08:27:04.933

我知道这是一个非常古老的问题，答案非常好。我遇到了一个类似的问题，谷歌把我带到了这里。

我只是写下我对 lzo 压缩和 lzop 程序的经验。希望我能帮助像我这样的人遇到同样的问题。我写了一个简单的python模块来处理lzo文件，你可以在[https://github.com/ir193/python-lzo/上找到它](https://github.com/ir193/python-lzo/)

关于问题，可以通过一次读取一个块来完成就地读取lzo压缩文件（无需解压缩整个文件）。lzo 文件被分成若干块，块的最大大小约为若干 MB。在我的模块中，您可以只使用 read(4096) 左右。

实际上 *.lzo 是由 lzop 创建的，与另一个答案（[https://github.com/jd-boyd/python-lzo](https://github.com/jd-boyd/python-lzo)）提供的 python-lzo 几乎没有关系。该模块用于压缩/解压缩字符串，不处理 lzop 文件头和校验和。如果您想打开一些现有的 lzo 文件，请不要使用它。

# php - ob_start output_callback 不能访问全局变量

> ID：13415973
> 
> 赞同：0
> 
> 时间：2012-11-16T11:46:24.687
> 
> 标签：php, output-buffering

我目前正在使用输出缓冲来实现某种页眉和页脚自动化。但我需要访问 output_callback 函数中的全局变量。如果我不使用面向类的代码，就没有任何问题。但是，如果我尝试类似：

```
class AnotherClass{
    public $world = "world";
}

$anotherClass = new AnotherClass();

class TestClass{
    function __construct(){
        ob_start(array($this,"callback"));
    }

    function callback($input){
        global $anotherClass;
        return $input.$anotherClass->world;
    }
}

$tClass = new TestClass();

echo "hello"; 
```

虽然预期的输出是 helloworld，但它只是输出 hello，如果你能提供某种修复，让我可以访问回调函数中的全局变量，而无需先将它们设置为构造函数中的类变量，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:50:29.437

您的`ob_start`. 回调应如下所示：`array($this, 'callback')`像这样：

```
<?php

$x="world";

class testClass{
    function __construct(){
        ob_start(array($this,"callback"));
    }

    function callback($input){
        global $x;
        return $input.$x;
    }
}

$tClass = new testClass();

echo "hello"; 
```

**更改问题后的附加信息**：

php 的输出缓冲有点奇怪，它似乎在另一块堆栈或其他东西上。您可以通过将变量的新引用直接放入闭包中来解决此问题：

```
<?php

class AnotherClass{
    public $world = "world";
    public function __destruct()
    {
        // this would display in between "hello" and "world"
        // echo "\n".'destroying ' . get_called_class() . "\n";
    }
}

class TestClass
{
    function __construct()
    {
        global $anotherClass;

        // taking a new reference into the Closure
        $myReference = $anotherClass;
        ob_start(function($input) use (&$myReference) {
            return $input . $myReference->world;
        });
    }
}

// the order here is important
$anotherClass = new AnotherClass();
$tClass = new TestClass();

echo "hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:46:34.193

出现此问题的原因是没有引用的对象在执行 output_callback 之前被破坏。因此，您可以通过添加对要保存的对象的引用来解决问题。

固定示例：

```
<?php
class AnotherClass{
    public $world = "world";
}

$anotherClass = new AnotherClass();

class TestClass{
    private $globals;

    function __construct(){
        global $anotherClass;
        $this->globals[]=&$anotherClass;
        ob_start(array($this,"callback"));
    }

    function callback($input){
        global $anotherClass;
        return $input.$anotherClass->world;
    }
}

$tClass = new TestClass();

echo "hello";
?> 
```

# java - 作为 Upstart 服务启动时无法读取 UTF-8 文件名

> ID：13415975
> 
> 赞同：15
> 
> 时间：2012-11-16T11:46:38.347
> 
> 标签：java, ubuntu, service, special-characters

我的 Java 程序递归地读取目录的内容。这是一个示例树（注意非 ASCII 字符）：

```
./sviluppo
./sviluppo/ciaò
./sviluppo/ciaò/subdir
./sviluppo/pippo
./sviluppo/pippo/prova2.txt <-file
./sviluppo/così 
```

该程序作为 Upstart 服务启动，配置文件名为`/init/myservice.conf`

```
description "Private Service"
author "AD"
start on runlevel [2345]
stop on runlevel [! 2345]
exec java -jar /home/mainFind.jar >> /tmp/log.txt 
```

当我启动服务时：

```
root@mdr:/tmp#  service myservice start
myservice start/running, process 15344 
```

它不会记录名称中包含非 ASCII 字符的文件名：

```
root@mdr:/tmp#  cat /tmp/log.txt
Found dir: /mnt/sviluppo/pippo 
```

相反，当我运行命令（以 root 身份运行，以模仿它作为服务启动时发生的情况）时，它工作正常，有和没有`exec`：

```
root@mdr:/tmp# java -jar /home/mainFind.jar  >> /tmp/log.txt
root@mdr:/tmp# exec java -jar /home/mainFind.jar  >> /tmp/log.txt

root@mdr:/tmp#  cat /tmp/log.txt
Found dir: /mnt/sviluppo/ciaò
Found dir: /mnt/sviluppo/ciaò/subdir
Found dir: /mnt/sviluppo/pippo
Found dir: /mnt/sviluppo/così 
```

为什么由同一用户运行的同一程序在 Upstart 服务中不起作用，但在从命令行运行时正确处理所有文件名？这是Java代码

```
public static void aggiungiFileDir(File f){
  File[] lista= f.listFiles();
  for(int i=0;i<lista.length;i++){
    if(lista[i].isDirectory()){
      System.out.println("Found dir: "+lista[i]); 
    }
  }
} 
```

其中形式参数`f`是根目录。该函数将在每个子目录上递归调用。

编辑 2：发布 ls

```
root@mdr:/tmp# ls -al /mnt/sviluppo
totale 20
drwx------ 5 root root 4096 nov 15 15:10 .
drwxr-xr-x 7 root root 4096 nov  9 10:43 ..
drwxr-xr-x 2 root root 4096 nov 15 15:10 ciaò
drwxr-xr-x 2 root root 4096 nov 15 11:23 così
drwxr-xr-x 2 root root 4096 nov 15 17:57 pippo 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-16T21:57:42.057

Java 使用本机调用来列出目录的内容。底层 C 运行时依赖于*语言环境*`String`概念，从文件系统存储的字节 blob 作为文件名构建 Java 。

当您从 shell（作为特权用户或非特权用户）执行 Java 程序时，它带有一个由变量组成的*环境。*读取该变量`LANG`以将字节流转码为 Java 字符串，默认情况下在 Ubuntu 上它与 UTF-8 编码相关联。

请注意，进程不需要从任何 shell 运行，但从代码来看，Upstart 似乎足够聪明，可以理解何时打算从 shell 执行配置文件中的命令。因此，假设通过 shell 调用 JVM，问题在于`LANG`未设置变量，因此 C 运行时假定默认字符集，它恰好**不是**UTF-8。解决方案在 Upstart 节中：

```
description "List UTF-8 encoded filenames"
author "Raffaele Sgarro"
env LANG=en_US.UTF-8
script
  cd /workspace
  java -jar list.jar test > log.txt
end script 
```

我用作`en_US.UTF-8`语言环境，但任何支持 UTF-8 的语言环境都可以。测试的来源`list.jar`

```
public static void main(String[] args) {
    for (File file : new File(args[0]).listFiles()) {
        System.out.println(file.getName());
    }
} 
```

该目录`/workspace/test`包含文件名，如`ààà`，`èèè`等等。现在您可以转到数据库部分；）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-25T08:06:36.433

将此添加到 /etc/init.d/script 为我解决了这个问题（我从 /etc/init.d/tomcat7 复制了它）：

```
# Make sure script is started with system locale
if [ -r /etc/default/locale ]; then
    . /etc/default/locale
    export LANG
fi 
```

我机器上 /etc/default/locale 的内容：

```
LANGUAGE=en_US:en
LANG=en_US.UTF-8 
```

# c# - 在 GUI 上打印到屏幕

> ID：13415980
> 
> 赞同：3
> 
> 时间：2012-11-16T11:46:52.143
> 
> 标签：c#, visual-studio-2010, xna, console.writeline

我对编程非常陌生，特别是创建 GUI；我以前只用 C# 编写过控制台程序，现在正尝试用 XNA 构建游戏。任何人都可以通过让我知道如何在 GUI 中打印到屏幕来帮助我吗？我目前正在尝试 的变体`System.Console.WriteLine("");`，但不会打印到屏幕上。我正在使用的代码如下。谁能告诉我哪里出错了？

`ResourceCounter.cs`：

```
 public ResourceCounter(Vector2 pos, GameTime gameTime)`
       {
        position = pos;
        over = false;
        clicked = false;
        gameTime = new GameTime();`

        currentTime += (float)gameTime.ElapsedGameTime.TotalSeconds; 
        System.Console.WriteLine("Resources: ", pSourceCount);

        if (currentTime >= countDuration)
        {
            pSourceCount++;
            **System.Console.WriteLine("Resources: ", pSourceCount);**
        }
        if (pSourceCount >= limit)
        {
            pSourceCount = 0;//Reset the counter;

        }

    } 
```

在我的主要`GameScreen.cs`课程中：

```
 public override void Update(GameTime gameTime)
    {
        MouseState mState = Mouse.GetState();
        menu.Update(mState, cursor, gameTime);

        if (menu.currentstate == State.campaign)
        {
            campaign.Update(pTower);
            //campaign.Update(eTower);
            **System.Console.WriteLine("Resources: ", pSourceCount);**
        }
        base.Update(gameTime);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:07:54.940

使用[`SpriteBatch.DrawString`](http://msdn.microsoft.com/en-us/library/bb447673.aspx)XNA 渲染文本的方法。

当您使用它打印文本时，`System.Console.WriteLine`它会被写入标准输出流。然后通过控制台显示此流中的数据。您的游戏窗口根本不会注意到这一点。

* * *

## 文本渲染

公平地说，您绘制到游戏窗口的所有内容都由（纹理）三角形组成。文字也不例外。使用四边形（矩形）渲染单个字符，该四边形又由 2 个三角形组成。

文本`XNA!`将使用总共 4 个精灵（8 个三角形）绘制，每个字符一个精灵：

![呈现在的文本](../Images/02b25a45402fdc9e93861f1a3da3bdfb.png)

## 位图字体

常见的字体格式将字符存储为向量。对于[位图字体](http://en.wikipedia.org/wiki/Computer_font#Bitmap_fonts)（游戏中通常使用的那种字体），实际字体存储在一个或多个位图（纹理）中。这种方法要快得多，因为字符形状本身*已经被光栅化了*，只需要从纹理中采样。明显的缺点是，字符都是*固定大小*的。每个字体大小每个重量都需要一个位图字体。

这是 Arial 字体的精灵图，大小 20，标准粗细：

![](../Images/5ad2cac7a1178d6cd1d8914607229b89.png)

为了绘制某个字符，渲染器必须知道该字符在位图上的位置。如上图所示，每个字符占据一个不重叠的矩形区域。这些矩形的尺寸可以存储在附加的文本或 XML 文件中。

例如，这可能是`A`上面精灵图的字符定义：

```
<char id="65" x="235" y="47" width="12" height="13" xoffset="0" yoffset="3" xadvance="11" page="0" /> 
```

*   `id`是 ASCII 值 (A=65)
*   `x`并且`y`是左上角的位置
*   `width`并且`height`是矩形的大小
*   `xoffset`并且`yoffset`是屏幕上的偏移量
*   `xadvance`是到前一个字符的距离
*   `page`是包含字符的位图的索引

## 结论

游戏的文本渲染并不像人们想象的那么简单。XNA*极大地*简化了`SpriteBatch`类的过程。所涉及的步骤摘要：

*   将标准字体转换为位图字体
*   在您的游戏应用程序中加载字体文件
*   为给定的字符串创建精灵
*   将精灵渲染到屏幕上

* * *

字体示例是使用免费的[Bitmap Font Generator](http://www.angelcode.com/products/bmfont/)创建的。

# jquery - 重定向时能够看到所有页面上打开的对话框

> ID：13415981
> 
> 赞同：2
> 
> 时间：2012-11-16T11:46:55.090
> 
> 标签：jquery, html, css, jquery-ui

我有一个页面，其中有两个选项卡，即“人员配备”和“非人员配备”。当我单击“人员配备”选项卡时，我被重定向到第 1 页，当我单击“非人员配备”选项卡时，我被重定向到一个page2。我在page2中有一个按钮，当我点击那个按钮时，我得到一个对话框，即Iteration1假设如果我不关闭我的对话框，即Iteration1，它已在page2上打开，然后如果点击选项卡'Staffing'我可以看到相同的对话框，即在 page1 上打开的 Iteration1 也。那么如何隐藏带有导航到不同页面的对话框？

示例代码在这里（http://jsfiddle.net/CPtp4/18/）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:51:07.277

将事件处理程序附加到选项卡控件的事件，如果刚刚激活的选项卡不是包含对话框[`activate`](http://api.jqueryui.com/tabs/#event-activate)的选项卡，则从其中调用对话框的方法。[`close`](http://api.jqueryui.com/dialog/#method-close)

# ios - 将事件附加到接口但不使用具体类时，Monotouch 应用程序崩溃

> ID：13415985
> 
> 赞同：1
> 
> 时间：2012-11-16T11:47:08.023
> 
> 标签：ios, xamarin.ios

我有一个 MonoTouch 应用程序，它由许多视图组成，每个视图都有一个关联的界面和演示者。它看起来像这样：

```
class SomeView : UIView, ISomeView
{
    public event EventHandler PreviousClicked = delegate {};
    public event EventHandler NextClicked = delegate {};
    public event EventHandler Loaded = delegate {};

    public SomeView()
    {
        new SomePresenter(this);
    }
}

interface ISomeView
{
    event EventHandler PreviousClicked;
    event EventHandler NextClicked;
    event EventHandler Loaded;
    event EventHandler Unloaded;
}

class SomePresenter
{
    readonly ISomeView _view;

    public SomePresenter(ISomeView view)
    {
        _view = view;
        _view.Loaded += Loaded; 
        _view.NextClicked += NextClicked;
        _view.PreviousClicked += PreviousClicked;
        _view.Unloaded += Unloaded;
    }

    void Loaded (object sender, EventArgs e)
    {
        //Nothing special
    }

    void PreviousClicked (object sender, EventArgs e)
    {
        //Nothing special
    }

    void NextClicked (object sender, EventArgs e)
    {
        //Nothing special
    }
} 
```

此代码在模拟器中完美运行，但是在 iPad 上运行时，当演示者在其构造函数中将事件附加到视图时，它将崩溃。但它以一种非常非常奇怪的方式崩溃。

首先，它不会在附加第一个事件而是第二个事件时崩溃，即

```
_view = view;
_view.Loaded += Loaded; 
_view.NextClicked += NextClicked; //FAILS HERE 
```

它返回的堆栈跟踪是

```
0   SomeApp              0x008f8e01 mono_handle_native_sigsegv + 244
1   SomeApp              0x0092b511 sigabrt_signal_handler + 112
2   libsystem_c.dylib    0x321817ed _sigtramp + 48
3   libsystem_c.dylib    0x3217720f pthread_kill + 54
4   libsystem_c.dylib    0x3217029f abort + 94
5   SomeApp              0x008ceccb monoeg_g_log + 122
6   SomeApp              0x008d386b get_numerous_trampoline + 134
7   SomeApp              0x008d3b33 mono_aot_get_imt_thunk + 34
8   SomeApp              0x00921be5 initialize_imt_slot + 72
9   SomeApp              0x0092294f build_imt_slots + 642
10  SomeApp              0x00922a29 mono_vtable_build_imt_slot + 80
11  SomeApp              0x008fd90d mono_convert_imt_slot_to_vtable_slot + 212
12  SomeApp              0x008fdab9 common_call_trampoline + 180
13  SomeApp              0x008fc78b mono_vcall_trampoline + 158
14  SomeApp              0x005ec748 generic_trampoline_vcall + 136
... 
```

应该注意的是，这些视图中的每一个都被推送到 UINavigationController 中，并且演示者可以完美地将事件附加到视图，直到两个视图被推送到堆栈上。

我最初的假设是 GC 正在积极收集内存，但后来我尝试删除接口并将事件附加到具体类型上，即

```
public SomePresenter(SomeView view)
{
    _view = view;
    _view.Loaded += Loaded; 
    _view.NextClicked += NextClicked; 
    _view.PreviousClicked += PreviousClicked;
    _view.Unloaded += Unloaded;
} 
```

一切正常。*幽灵般的*

如果有人知道这里发生了什么，我真的很想听听！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T12:46:43.140

设备日志通常会显示一条消息，解释有关问题的更多信息。您可以从 MonoDevelop 访问设备（菜单 View -> Pads -> iOS Device Log）。

设备日志可能会说您需要增加特定类型的蹦床的数量，您可以在此处阅读：http: [//docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_0](http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_0)

# jasper-reports - 在 iReport 中使用条件格式

> ID：13415989
> 
> 赞同：3
> 
> 时间：2012-11-16T11:47:35.620
> 
> 标签：jasper-reports, ireport

我有一个提供数据表的报告。到目前为止，该报告效果很好。
现在我需要根据它们的内容值对一些单元格进行着色。
我曾经在文本字段表达式中包含配色方案，例如：

```
($F{MyBooleanValue}==true)?"<style backcolor='green'>PASS</style>":"<style backcolor='red'>FAIL</style>" 
```

这行得通，但它很脏，管理和重用是地狱。

所以我转向了*条件格式*功能。我定义了一个名为*Colourised*的基础样式。然后是两个非常基本的条件样式：

```
Colourised:  
    opaque = true  
pass:  
    opaque = true  
    Condition Expression = "true"  
    Backcolor = [51,255,51]
fail:  
    opaque = true  
    Condition Expression = "false"  
    Backcolor = [255,102,102] 
```

这通常应该将单元格的背景颜色更改为绿色（独立于单元格值）。

现在我尝试使用以下属性在我的单元格上使用这种格式，但单元格仍然是白色的。

```
MyCell:  
    opaque = true  
    Text Field Expression = "$F{MyBooleanValue}"  
    Style = "Colourised" 
```

我还设置了评估属性

```
<property name="net.sf.jasperreports.style.evaluation.time.enabled" value="true"/> 
```

有什么提示吗？有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T13:14:48.357

好的，经过一番挖掘，我发现了单元格属性：

```
MyCell:
    Markup = "styled" 
```

需要设置为：

```
MyCell:
    Markup = "none" 
```

然后背景显示正确的颜色。

# git - Git flow with github - 推送到中央仓库

> ID：13415990
> 
> 赞同：8
> 
> 时间：2012-11-16T11:47:38.537
> 
> 标签：git, github, git-flow

我已经在 Git hub 上设置了一个存储库，并且正在使用 git flow。我知道如何创建功能、发布和修补程序，但是从我目前所阅读的内容来看，您如何推送到中央存储库（github）似乎并不清楚，因此我有几个问题：

1.  一旦一个功能完成并且你已经运行`git flow feature finish`了，你如何将它推送到 github？
2.  一旦它被推送到 Github，我是否需要从 Github 中提取，或者我们是否永远不会触及中央存储库并简单地使用它以便其他开发人员/服务器可以从中提取？
3.  开发人员如何使用 git flow 从中央仓库拉取数据？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T12:07:38.927

要推回 github，git-flow 中没有真正的命令，因为它只是：
`git push origin develop`如果您刚刚触摸了开发分支并且`git push origin master`还触摸了 master 分支。*（我开始根据 git 2.0 使用分支名称，git push 的默认行为将更改为在执行 git push 时不推送所有分支）*

如果您与一组开发人员一起工作，您总是需要在工作之前从中央存储库中提取，因为其他人可能已经推送了更改，而您没有它们。您可以手动完成，也可以使用 git flow 标志。

如果您开始一项新功能：
`git flow feature start -F foo`

这将获取开发分支并检查您的分支是否等于远程分支，如果不是，则该功能将不会启动，您必须确保它们是。

在开始使用 git-flow 之前了解 git 的基础知识很重要。
我还建议阅读[分布式 Git - 分布式工作流](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)

# macos - 如何在不使用applescript打开弹出菜单的情况下获取弹出菜单中的项目数？

> ID：13415994
> 
> 赞同：0
> 
> 时间：2012-11-16T11:47:55.480
> 
> 标签：macos, automation, applescript

我想编写一个脚本，以几种格式保存图像。问题是格式是根据某些条件显示的。我的意思是有时会有 5 种格式，有时会有 8 种格式。我想完全自动化这些保存内容的工作。所以我决定写一个applescript。获得 UI 浏览器并使用它我可以访问每个弹出菜单。我正在使用循环来执行保存操作。问题是我没有得到结束的地方。所以我想出了一个想法，如果我可以在弹出菜单中获得项目的数量，那么我将很容易执行任务。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:49:42.163

嗯，这是可能的，但你不能直接计算菜单项。通信是在 GUI 端进行的，而不是直接与应用程序进行通信，这意味着需要先出现菜单，然后才能对其进行计数。

```
tell application "System Events"
    tell process "Your application"
        --we need to menu to appear first
        click pop up button 1 of window 1
        --now the menu appeared we can count the items in it
        count menu items of menu 1 of pop up button 1 of window 1
        --now hide the menu again by pressing escape
        key code 53
    end tell
end tell 
```

计数是检查菜单的一种方法，但另一种方法是获取其中的所有值，然后按其名称单击右侧的菜单项。这可能不是您的情况，通常是最好的解决方案。

```
set menuItemToSelect to "Title of menu item I prefer to check"

tell application "System Events"
    tell process "Your Application"
        tell pop up button 1 of window 1
            --Only continue if the menu item isn't already selected
            if value of it is not equal to menuItemToSelect then
                --we need to menu to appear first
                click it
                --now the menu appeared we can get the items
                set menuItemTitles to name of menu items of menu 1
                --check if the menu item exists
                if menuItemToSelect is in menuItemTitles then
                    --menu item exists; click on it
                    click menu item menuItemToSelect of menu 1
                else
                    --the menu item to select doesn't exist; hide the menu
                    key code 53
                end if
            end if
        end tell
    end tell
end tell 
```

# javascript - Javascript在浏览器中不起作用？（火狐、Chrome 和 Safari）

> ID：13415995
> 
> 赞同：0
> 
> 时间：2012-11-16T11:47:57.133
> 
> 标签：javascript

[http://pastebin.com/K2miHiAj](http://pastebin.com/K2miHiAj)

这就是代码所在的位置^

我同时使用 Coda 2 和 BBEdit 来运行代码并对其进行测试，它在它们上运行得非常好！但是，每当我尝试浏览器时，代码都无法正常运行。对于这个任务，代码必须在 Firefox 上运行。

[http://oi47.tinypic.com/2lk9yx4.jpg](http://oi47.tinypic.com/2lk9yx4.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:01:49.097

您在`myFunction`尝试将其附加到 之后定义了函数`onclick`，因此 in 中的`onclick="myFunction()"`内容是*undefined*。
解决方案：将 JavaScript 与 HTML 分开。

```
// attach listener to window.load
window.addEventListener('load',function () {
    // attach listener to your button
    document.getElementById('clickme')
        .addEventListener('click',
                          myFunction,
                          false);
}, false); 
```

看看[**这个小提琴**](http://jsfiddle.net/Bgb3F/1/)。

* * *

[**编辑：在这里**](http://pastebin.com/MmfbUzfK)完成最终代码。

# r - 在 sage 中更改 R 默认路径 (.libPaths)

> ID：13415996
> 
> 赞同：0
> 
> 时间：2012-11-16T11:48:00.080
> 
> 标签：r, startup, sage

我想为我在独立 R 中使用的插件 R 包使用相同的目录。以下在 sage 中工作：

```
r(".libPaths('/home/USERNAME/R/my-libraries')") 
```

但是，当我将这一行包括在内时，`~/.sage/sagerc`它就`~/.sage/sage.init`不起作用了。- 树中是否有`/opt/sage/`可以配置它的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:33:17.607

我认为执行此操作的正确位置是`~/.sage/init.sage`. 或者那是一个错字？（在这种情况下，我真的很惊讶它在 Sage 中有效但不在那里。）

# sublimetext2 - Sublime Text 2 在哪里存储编辑信息？

> ID：13415999
> 
> 赞同：19
> 
> 时间：2012-11-16T11:48:08.317
> 
> 标签：sublimetext2

当我执行这些步骤时：

1.  在 Sublime Text 2 中打开一个现有文件。
2.  在文件的任意位置键入任意文本。
3.  关闭 Sublime Text 2。

请注意，我没有保存更改。

1.  打开崇高文本 2。
2.  打开步骤 1 中的文件。

我看到文件中的更改。但是，如果我在记事本中查看文件，我看不到任何变化。

Sublime Text 2 在哪里保存对文件所做的更改？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-13T19:15:09.407

As far as I'm concerned the question isn't answered completely...

As *nnnn* explained, the unsaved changes of a project are saved in its sublime-workspace file.

But if you haven't created a project and you are just working on some files, sublime also does remember the unsaved changes. These were saved in 'Session.sublime_session'.

Where the session can be found, depends on your operating system:

*   **OS X**: `~/Library/Application Support/Sublime Text 2/Settings/`
*   **Windows**: `%APPDATA%\Sublime Text 2\Settings\`
*   **Linux**: `~/.config/sublime-text-2/Settings/`

(I just found this info some kind of accidentally in the [official sublime forum](https://www.sublimetext.com/forum/viewtopic.php?f=2&t=8221#p34438))

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-16T19:47:16.647

如果你创建了一个项目，神奇的文件恢复精灵将在你告诉 Sublime 存储项目的文件夹中，在一个名为 [yourprojectname].sublime-workspace 的文件中。

如果您在打开之前删除该工作区文件，Sublime 将取消您的更改并抱怨打开任何以前打开的文件。这一举动可能会让你有些悲伤，所以除非你已经保存了所有必要的更改，否则不要尝试。

除其他外，工作区保存您的窗口布局、打开的任何文件的所有内容以及您最后的查找/替换/自动完成条目。（这就是为什么您的自动完成功能会随着时间的推移变得“更智能”）。

注意通常有一个 x 来关闭选项卡的小符号。如果它是一个点而不是一个 x，则该文件被认为是未保存的，并且在您重新打开 Sublime 时将被带回也未保存。