# StackOverflow 问答 14157000-14157999

# c++ - ReadProcessMemory 找到一个模式 - 粒度？

> ID：14157001
> 
> 赞同：0
> 
> 时间：2013-01-04T12:13:10.913
> 
> 标签：c++, windows, memory, pattern-matching, readprocessmemory

我需要在另一个进程的内存中找到一个模式，我正在使用 ReadProcessMemory。由于我使用的是 rabin karp 或类似算法（模式匹配），并且由于 ReadProcessMemory 将内存（ram -> ram）复制到缓冲区，因此涉及到一些轻微的开销。我想知道读取每个的最佳内存量是多少是时候履行我的职责了

我的意思是：ReadProcessMemory(each_byte) 听起来很费时间，而 ReadProcessMemory(all_the_process_memory) 听起来很费空间。是否有最佳权衡或更好的方法来设置读数的粒度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-20T00:17:32.647

在外部存储器上进行模式扫描时，您应该一次读取一个区域。应使用 VirtualQueryEx() 检索区域和大小。您还应该过滤掉不是 MEM_COMMIT 或 PAGE_NOACCESS 区域的区域。

下面是一个逻辑示例：

```
char* buffer{ nullptr };
char* addr{ nullptr };
char* match{ nullptr };
SIZE_T bytesRead;

MEMORY_BASIC_INFORMATION mbi{ 0 };

while (VirtualQueryEx(hProc, addr, &mbi, sizeof(mbi)))
{
    if (mbi.State == MEM_COMMIT && mbi.Protect != PAGE_NOACCESS)
    {
        delete[] buffer;
        buffer = new char[mbi.RegionSize];

        ReadProcessMemory(hProc, mbi.BaseAddress, buffer, mbi.RegionSize, &bytesRead);

        char* internalAddr = Compare(pattern, mask, buffer, bytesRead);

        if (internalAddr != nullptr)
        {
            //calculate from internal relative buffer to external absolute
            match = mbi.BaseAddress + (internalAddr - buffer);
            break;
        }
    }
    addr += mbi.RegionSize;
}

return match; 
```

这个过程通常需要不到 2 秒，即使在非常大的过程中也不应该超过 10 秒。

# macos - 可以使用 calloc 或 malloc 在 OSX 中仅分配物理内存吗？

> ID：14157002
> 
> 赞同：2
> 
> 时间：2013-01-04T12:13:11.443
> 
> 标签：macos, memory, malloc, memory-address, calloc

我正在玩 c 函数 malloc 和 calloc ，我有一些问题。

我想看看我是否可以使用这两个函数只分配物理内存，我的 mac 有 4gb 或 ram，当我使用 malloc 时，我可以分配超过 4gb 的内存，这意味着 malloc 分配物理内存和虚拟内存。

我有一些问题：

1.  有什么我可以使用的功能，所以我只能分配物理内存（不分配虚拟内存）

2.  当调用 malloc 和 calloc 以及指针返回时，有什么方法可以使用指针来确定分配了多少物理内存和分配了多少虚拟内存？

一个简单的例子将不胜感激:)

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:47:40.913

简短的回答：不和不。

长答案：“虚拟内存”并不意味着它存储在磁盘上，它意味着它的实际位置被抽象出来，所以你的程序无法知道它实际存储在哪里。这意味着 VM 系统可以移动“相同”内存以优化计算机的整体内存使用。一页虚拟内存最初存储在 RAM 中是完全正常的，然后（如果有一段时间不使用）分页到磁盘为其他内容腾出空间，然后（当它实际被访问时）分页回 RAM ，然后返回到磁盘，然后返回到 RAM 等。

用户空间程序*总是*通过这个抽象层访问*所有内存；*也就是说，您的程序不能分配或访问除虚拟内存之外的任何内容。

有一类内存称为“有线”。它仍然是虚拟的，但分页策略不允许将其移出到磁盘。你的程序不能分配这个；只有内核可以。

我建议阅读 Apple 开发者网站[关于内存管理的讨论以](https://developer.apple.com/library/mac/#documentation/performance/conceptual/managingmemory/articles/aboutmemory.html)了解更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T09:58:09.123

是的，您可以使用 mlock() 将内存区域仅保留在 RAM 中，避免它被分页。它通常用于加密，以避免密钥在磁盘上继续存在被攻击者检索的危险。

当然，您可以锁定在 RAM 中的内存量是有限的。它仍然是虚拟内存，但不会进入磁盘，我想这就是你想要的。

malloc/calloc 是围绕操作系统实际调用分配内存的 libc 包装器（我不知道 OSX 上可能是什么），它们保留内部缓冲区以避免过于频繁的系统调用。您应该看到这些调用的 libc 实现，并查看它们将数据保存在哪里以及采用哪种格式，以便您可以访问它。

# jquery - 有多个 div 时如何正确应用 z-index

> ID：14157008
> 
> 赞同：0
> 
> 时间：2013-01-04T12:13:24.433
> 
> 标签：jquery, html, css

我正在制作一个网站，其中右侧有幻灯片和菜单。

我将尝试尽可能详细地解释这一点，并且还将提供代码和图片（如下所示）。

幻灯片有 4 张图片和一个带有 4 个段落的菜单，当幻灯片上的特定图片处于活动状态时，这些段落会被标记。

例子：

图片一显示--------->段落一活动 图片二显示--------->段落 2 活动等。

我还在每个幻灯片中都有一个小的矩形背景，其中包含一个文本：图片：

[http://imageshack.us/photo/my-images/198/mysiteq.jpg/](http://imageshack.us/photo/my-images/198/mysiteq.jpg/)

从上图中可以看出，我正在尝试添加一个箭头，当幻灯片更改时，该箭头将指向特定的段落。如您所见，我添加了箭头，但问题是它出现在菜单后面。

我希望一半箭头位于菜单顶部，但由于某种原因我无法让它工作。

我的html：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ProductsSectionHoverControl.ascx.cs" Inherits="TTLine.Templates.Units.ProductsSectionHoverControl" %>
<script type="text/javascript" src="/Scripts/JquerySlideShowPlugin.js"></script>
<script type="text/javascript">

$(document).ready(function()
{
    $("#showcase").awShowcase(
    {
        content_width:          430,
        content_height:         205,
        fit_to_parent:          false,
        auto:                   true,
        interval:               3000,
        continuous:             true,
        loading:                true,
        tooltip_width:          200,
        tooltip_icon_width:     32,
        tooltip_icon_height:    32,
        tooltip_offsetx:        18,
        tooltip_offsety:        0,
        arrows:                 true,
        buttons:                false,
        btn_numbers:            true,
        keybord_keys:           true,
        mousetrace:             false, /* Trace x and y coordinates for the mouse */
        pauseonover:            true,
        stoponclick:            true,
        transition:             'vslide', /* hslide/vslide/fade */
        transition_delay:       300,
        transition_speed:       500,
        show_caption:           'onhover', /* onload/onhover/show */
        thumbnails:             true,
        thumbnails_position:    'outside-last', /* outside-last/outside-first/inside-last/inside-first */
        thumbnails_direction:   'vertical', /* vertical/horizontal */
        thumbnails_slidex:      0, /* 0 = auto / 1 = slide one thumbnail / 2 = slide two thumbnails / etc. */
        dynamic_height:         false, /* For dynamic height to work in webkit you need to set the width and height of images in the source. Usually works to only set the dimension of the first slide in the showcase. */
        speed_change:           true, /* Set to true to prevent users from swithing more then one slide at once. */
        viewline:               false /* If set to true content_width, thumbnails, transition and dynamic_height will be disabled. As for dynamic height you need to set the width and height of images in the source. */
    });
});

</script>

    <div id="showcase" class="showcase">
        <!-- Each child div in #showcase with the class .showcase-slide represents a slide. -->
        <div class="showcase-slide">
            <!-- Put the slide content in a div with the class .showcase-content. -->
            <div class="showcase-content">
                <div class ="One">Unna er en kryssning till Travemunde</div>
                <div class="ArrowOne"><img src="/images/ArrowUse.png" alt="01" width="100" height="50" /></div>
                <img src="/images/TTlineFlying.jpg" alt="01" width="430" height="200" />

            </div>
            <!-- Put the thumbnail content in a div with the class .showcase-thumbnail -->
            <div class="showcase-thumbnail">
                <!-- <img src="images/01.jpg" alt="01" width="140px" /> -->
                <!-- The div below with the class .showcase-thumbnail-caption contains the thumbnail caption. -->
                <p class="showcase-thumbnail-content">Kortresor</p>
                <!-- The div below with the class .showcase-thumbnail-cover is used for the thumbnails active state. -->
                <!-- <div class="showcase-thumbnail-cover"></div> -->
            </div>
            <!-- Put the caption content in a div with the class .showcase-caption -->
            <%--<div class="showcase-caption">
                <h2>Be creative. Get Noticed!</h2>
            </div>--%>
        </div> 
        <div class="showcase-slide">
            <div class="showcase-content">
                        <!-- white image with low opacity-->
                    <div class ="Two">Unna er en kryssning till Travemunde</div>
                <img src="/images/TTLineTest2.gif" alt="02" width="430" height="200" />
            </div>
            <div class="showcase-thumbnail">

                <p class="showcase-thumbnail-content">Kryssningar</p>

                <!-- <div class="showcase-thumbnail-cover"></div> -->
            </div>
            <!-- Put the tooltips in a div with the class .showcase-tooltips. -->
            <div class="showcase-tooltips">
                <!-- Each anchor in .showcase-tooltips represents a tooltip. The coords attribute represents the position of the tooltip. -->
                <a href="http://www.awkward.se" coords="634,130">
                    <!-- The content of the anchor-tag is displayed in the tooltip. -->
                    This is a tooltip that displays the anchor html in a nice way.
                </a>
                <a href="http://www.awkward.se" coords="200,440">
                    This is a tooltip that displays the anchor html in a nice way.
                </a>
                <a href="http://www.awkward.se" coords="600,440">
                    This is a tooltip that displays the anchor html in a nice way.
                </a>
                <a href="http://www.awkward.se" coords="356, 172">
                    <!-- You can add multiple elements to the anchor-tag which are display in the tooltip. -->
                    <img src="images/glasses.png" />
                    <span style="display: block; font-weight: bold; padding: 3px 0 3px 0; text-align: center;">
                        White Glasses: 500$
                    </span>
                </a>
            </div>
        </div>
        <div class="showcase-slide">
            <div class="showcase-content">
                <div class ="Three">Boka konferens här!</div>
                <img src="/images/TTlineTest3.jpg" alt="03" width="430" height="200" />
            </div>
                <div class="showcase-thumbnail">
                <p class="showcase-thumbnail-content">Konferens</p>

                <!-- <div class="showcase-thumbnail-cover"></div> -->
            </div>  
        </div>
        <div class="showcase-slide">
            <div class="showcase-content">
                <div class ="Four">Unna er en kryssning till Travemunde</div>
                <img src="/images/TTLineTest4.jpg" alt="04" width="430" height="200" />
            </div>
            <div class="showcase-thumbnail">
                <p class="showcase-thumbnail-content">Shopping</p>
                <!-- <div class="showcase-thumbnail-content">Just some text<br/> I'm not <b>bold</b></div>
                <div class="showcase-thumbnail-cover"></div> -->
            </div>
        </div>      
    </div> 
```

我的CSS：

```
.showcase-thumbnail
    {
        width: 170px;
        height: 50px;
        /* cursor: pointer;
        border: solid 1px #333; */
        position: relative; 
        bottom:10px;
        right: 11px;
        background: url(/Images/Button.png);

    }

    .One
    {
        position: absolute;
        top: 0px;
        left: 0;
        padding: 14px 0 0 0 !important;
        font-size: 135% !important;
        font: bold 0.8em arial;
        width: 430px;
        height: 35px;
        background-color: White;
        opacity:0.85;
    }

    .Two
    {
        position: absolute;
        top: 50px;
        left: 0;
        padding: 14px 0 0 0 !important;
        font-size: 135% !important;
        font: bold 0.8em arial;
        width: 430px;
        height: 35px;
        background-color: White;

    }

    .Three
    {
        position: absolute;
        top: 100px;
        left: 0;
        padding: 14px 50px 0 0 !important;
        font-size: 135% !important;
        font: bold 0.8em arial;
        width: 430px;
        height: 35px;
        background-color: White;
    }

    .Four
    {
        position: absolute;
        top: 150px;
        left: 0;
        padding: 14px 0 0 0 !important;
        font-size: 135% !important;
        font: bold 0.8em arial;
        width: 430px;
        height: 36px;
        background-color: White;
    }

    .ArrowOne
    {
        border:1px black solid;
        position: absolute;
        /*background: url("/images/ArrowUse.png");
        background-repeat: no-repeat;
        width: 100px;
        height: 100px;*/
        left: 400px;
        top: 0px;
        opacity:100;
        z-index: 10000; 

    }

    .showcase-thumbnail p
    {
        text-align: left;
        padding: 5px 0 0 30px;
    }

    .showcase-thumbnail-caption
    {
        /*position: absolute;
        bottom: 2px;
        padding-left: 10px;
        padding-bottom: 5px;*/
    }

    .showcase-thumbnail-content
    {
        /* padding: 10px;
        text-align: center;
        padding-top: 25px; */

        padding: 0px 0px;
        /*border: 1px solid #dcdcdc;
        border-radius: 6px;*/
        color: #FBF8F8;
        text-decoration: none;
        font: bold 0.8em arial, sans-serif;
        width: 120px;
        font-size: 140%;
        cursor: hand; cursor: pointer; 
        } 
```

有更多的 css 和一个完整的 jquery 插件，但对于这个问题它是不相关的。

我最初从这个链接中获取了演示 2： http: [//showcase.awkwardgroup.com/index2.html](http://showcase.awkwardgroup.com/index2.html)并将其更改为您在图片中看到的内容。

我尝试添加`z-index: 1`to`".showcase-thumbnail"`但它没有用，我尝试添加`z-index: 10000`没有`showcase-content`结果，我还尝试了“showcase-thumbnail p”（当前css中未显示）但它没有给我我寻求的结果.

如果需要更多信息，请询问，我会尽力提供。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:26:37.400

当 z-index 不能正常工作时，通常是由于以下原因之一：

*   尚未设置定位。Z-index 仅适用于具有设置位置属性的元素。
*   堆叠上下文。z-index 为 5 的项目并不总是高于 z-index 1 的元素。原因是什么？堆叠上下文 - 我建议您阅读这篇文章以帮助您了解堆叠上下文 - [http://www.vanseodesign.com/css/css-stack-z-index/](http://www.vanseodesign.com/css/css-stack-z-index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:21:41.083

这是因为箭头和菜单按钮在 DOM 中不在同一级别。使用此 css，您的箭头将仅在具有类“showcase-content”的 DIV 中“越过”元素。（ .One 和 img ）。

```
 <div class="showcase-content">
                <div class ="One">Unna er en kryssning till Travemunde</div>
                <div class="ArrowOne"><img src="/images/ArrowUse.png" alt="01" width="100" height="50" /></div>
                <img src="/images/TTlineFlying.jpg" alt="01" width="430" height="200" />
            </div> 
```

因此，您需要在 DOM 中找到同一级别的“ArrowOne”和菜单按钮的父项。它们是：“展示内容”和“展示缩略图”。在“showcase-content”上设置比“showcase-thumbnail”更高的z-index，应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T14:03:24.760

这花了我一段时间，但我终于解决了。

如果您在 css 中有溢出属性，则需要使其可见，否则这将不起作用。

显然我在 jquery 插件中有将溢出属性设置为隐藏的代码。

我只是将展示柜内容溢出属性设置为可见，并对展示柜缩略图进行了一些更改，以便在我扩大容器时菜单不会掉落，这很有效。

谢谢你们的帮助！

# android - Android应用强制终止

> ID：14157010
> 
> 赞同：-3
> 
> 时间：2013-01-04T12:13:34.157
> 
> 标签：android, android-emulator

我写了简单的代码，但我不知道为什么我的模拟器总是向我显示这个`error:"the application has stopped unexpectedly android please try again"`。我试图摆脱它，但没有成功帮助我，谢谢。 [http://www.imageurlhost.com/images/msvwuxotq5fcpg63q8br_Logcat.png](http://www.imageurlhost.com/images/msvwuxotq5fcpg63q8br_Logcat.png)

```
 package com.tusway.BasicTutorial;
    import android.app.Activity;
    import android.os.Bundle;
    public class myMenu extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    }
    } 
```

**我的 xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tusway.BasicTutorial"
android:versionCode="1"
android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
<activity android:name=".MyMain"
android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 <activity android:name=".myMenu"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="com.tusway.BasicTutorial.CLEARSCREEN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-05T06:33:54.447

我没有尝试过，但请用这个编辑过的文件替换你的**清单文件**：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tusway.BasicTutorial"
android:versionCode="1"
android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />
<application android:icon="@drawable/icon" android:label="@string/app_name">
<activity android:name=".MyMain"
android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 <activity
            android:name="com.tusway.BasicTutorial.CLEARSCREEN"
             />

</application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-04T12:32:22.477

请更改包名称“com.tusway.BasicTutorial”

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tusway.BasicTutorial"
android:versionCode="1"
android:versionName="1.0"> 
```

请将其更改为“com.tusway.basictutorial”

# c# - 2 个模型选择字符串

> ID：14157013
> 
> 赞同：4
> 
> 时间：2013-01-04T12:13:48.643
> 
> 标签：c#, visual-studio-2010, viewmodel

我正在尝试使用 Visual Studio 2010 学习 C# MVC4。

我想要做的是在某人的用户名上选择的 1 个视图上获得 2 个模型的完整输出。

所以如果我去 /Teams/Details/1 我会从模型球员和球队那里得到所有的信息。

楷模：

```
 public class Players
{
    public int ID { get; set; }
    public string Name { get; set; }
    public int price { get; set; }
    public string coach { get; set; }
    public string Team { get; set; }
}

    public class Teams
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string coach { get; set; }
} 
```

控制器

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using voetbal.Models;

namespace voetbal.Controllers
{
    public class TeamsController : Controller
    {
        private TeamsDBContext db = new TeamsDBContext();

        //
        // GET: /Teams/

        public ActionResult Index()
        {
            return View(db.Teams.ToList());
        }

        //
        // GET: /Teams/Details/5

        public ActionResult Details(int id = 0)
        {
            Teams teams = db.Teams.Find(id);
            if (teams == null)
            {
                return HttpNotFound();
            }
            return View(teams);
        }

        //
        // GET: /Teams/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /Teams/Create

        [HttpPost]
        public ActionResult Create(Teams teams)
        {
            if (ModelState.IsValid)
            {
                teams.coach = User.Identity.Name;
                db.Teams.Add(teams);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(teams);
        }

        //
        // GET: /Teams/Edit/5

        public ActionResult Edit(int id = 0)
        {
            Teams teams = db.Teams.Find(id);
            if (teams == null)
            {
                return HttpNotFound();
            }
            return View(teams);
        }

        //
        // POST: /Teams/Edit/5

        [HttpPost]
        public ActionResult Edit(Teams teams)
        {
            if (ModelState.IsValid)
            {
                db.Entry(teams).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(teams);
        }

        //
        // GET: /Teams/Delete/5

        public ActionResult Delete(int id = 0)
        {
            Teams teams = db.Teams.Find(id);
            if (teams == null)
            {
                return HttpNotFound();
            }
            return View(teams);
        }

        //
        // POST: /Teams/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Teams teams = db.Teams.Find(id);
            db.Teams.Remove(teams);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

我绝对知道如何完成这项工作，我尝试了一个视图模型类，但我不知道如何获取有关某人教练姓名的信息。

我期待着您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:39:17.787

有很多方法可以给这只猫剥皮，但你必须首先看到的一件事是，你甚至没有发回这两种模型的一个实例。如果您检查`Details`操作的代码：

```
public ActionResult Details(int id = 0)
{
    Teams teams = db.Teams.Find(id);
    if (teams == null)
    {
        return HttpNotFound();
    }
    return View(teams);
} 
```

显然，我们发回的只是`Teams`模型的一个实例。因此，让我们检查一下我们拥有的**选项**。考虑以下代码：

```
public ActionResult Details(int id = 0)
{
    Teams teams = db.Teams.Find(id);
    if (teams == null)
    {
        return HttpNotFound();
    }

    // get the list of players into a List<Players>
    var players ...

    var model = new Tuple<Teams, List<Players>>(teams, players);

    return View(model);
} 
```

现在在视图中，我们可以将模型设置为此（**请注意，您需要完全限定`Teams`并`Players`在 @model 声明中**）：

```
@model Tuple<Teams, List<Players>> 
```

从那里我们可以做类似的事情：

```
Model.Item1.Name 
```

或者：

```
Model.Item2[0].Name; 
```

# c++ - 没有框架参考的 .net VS 2003 中的 C++ 应用程序是否可以在没有框架 1.1 的情况下工作？

> ID：14157014
> 
> 赞同：0
> 
> 时间：2013-01-04T12:13:50.187
> 
> 标签：c++, .net, frameworks

我有一个在**Visual Studio .net 2003**中开发的 C++ 应用程序。它**不**使用任何框架 dll 作为对其的引用。我现在的问题是，由于我的项目不引用任何框架 dll，如果从系统中卸载框架 1.1，它会起作用吗？. 我无法自己测试它，因为由于我的系统限制，我无法再次重新安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:20:18.553

您的意思是 C++ 应用程序，它没有使用 /CLR 选项编译？是的，它不需要任何 .NET 框架。

# c# - C# - Switch 语句中的 Is 语句

> ID：14157019
> 
> 赞同：3
> 
> 时间：2013-01-04T12:13:58.230
> 
> 标签：c#, .net, switch-statement

我需要检查大量控件是否包含值或它们是否留空。

我希望做这样的事情：

```
public static bool IsObjectEmpty(Control ctrlThis)
    {
        switch (ctrlThis)
        {
            case ctrlThis is TextBox:
                TextBox txtThis = (TextBox)ctrlThis;
                if (txtThis.Text == "" || txtThis.Text == null)
                { return false; }
                break;

            case (ctrlThis is ComboBox):
                ComboBox cboThis = (ComboBox)ctrlThis;
                if (cboThis.SelectedValue == -1)
                { return false; }
                break;

            case (ctrlThis is NumericUpDown):
                NumericUpDown numThis = (NumericUpDown)ctrlThis;
                if (numThis.Value == 0)
                { return false; }
                break;

            etc etc... 
```

但这不会编译：

```
 Error  3   A switch expression or case label must be a bool, char, string,    
 integral, enum, or corresponding nullable type 
```

有没有办法在 switch 语句中做到这一点，或者我只需要做一些 if / else if 的东西？谷歌和 StackOverflow 搜索并没有什么用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:16:08.903

`Case`标签只能包含*常量*表达式。

所以在你的回答中 is 不是一个 const 表达式。

它是一个评估值。

就像你不能做的一样

`public const int a=Enumerable.Range(0,2).First();`

您可以在切换案例之前计算这些值

然后将它们与一个值进行比较。

就像是

`var t=(ctrlThis is ComboBox)`

```
...
...

switch ( t) ...

case  true :... 
```

# 编辑：来自 CLS

```
switch-label:
    case constant-expression :
    default : 
```

如果你不这样做，编译器会尖叫：

> 预期值恒定

例子 ：

```
switch (myInt)
{
case (2+Enumerable.Range(0,2).First()):
    return true;
    default:
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:32:10.303

基于类型的条件（if/switch）大多是个坏主意。

这种方法怎么样：

```
public static bool IsObjectEmpty(TextBox ctrlThis)
{
    if (ctrlThis.Text == "" || ctrlThis.Text == null) {
        return false;
    }

    etc etc...
}            

public static bool IsObjectEmpty(ComboBox ctrlThis)
{
    if (ctrlThis.SelectedValue == -1) {
        return false;
    }

    etc etc...
}            

public static bool IsObjectEmpty(NumericUpDown ctrlThis)
{
    if (ctrlThis.Value == 0) {
        return false;
    }

    etc etc...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T15:07:43.963

我也可能会使用 if 语句，例如：

```
 public static bool IsObjectEmpty(Control ctrlThis)
    {
        if (ctrlThis is TextBox)
        {
            TextBox txtThis = (TextBox)ctrlThis;
            if (txtThis.Text == "" || txtThis.Text == null)
                return false;
        }
        else if (ctrlThis is ComboBox)
        {
            ComboBox cboThis = (ComboBox)ctrlThis;
            if (int.Parse(cboThis.SelectedValue.ToString()) == -1)
                return false;
        }
        else if (ctrlThis is NumericUpDown)
        {
            NumericUpDown numThis = (NumericUpDown)ctrlThis;
            if (numThis.Value == 0)
                return false;
        }
        else
        {
            //Serves as 'default' in the switch
        }
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T12:19:34.983

你可以做：

```
switch (ctrlThis.GetType().ToString())
{
    case "System.Windows.Forms.TextBox" :
            TextBox txtThis = (TextBox)ctrlThis;
                if (txtThis.Text == "" || txtThis.Text == null)
                { return false; }
                break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T14:50:29.740

据我所知，你可以这样做

```
public static bool IsObjectEmpty(Control ctrlThis)
{
    Type t = ctrlThis.GetType();
    switch (t)
    {
        case typeof(TextBox):
            TextBox txtThis = (TextBox)ctrlThis;
            if (txtThis.Text == "" || txtThis.Text == null)
            { return false; }
            break;
    }
} 
```

# android - 如何在 android 代码中包含 FFMPEG 函数

> ID：14157030
> 
> 赞同：4
> 
> 时间：2013-01-04T12:14:53.310
> 
> 标签：android, video, ffmpeg

我的目标是通过结合音频剪辑和Android图像来构建视频文件。

使用 cygwin，我能够通过组合图像和音频剪辑来创建视频，如下所示：

```
ffmpeg -i allmapeople.mp3 -i Penguins.jpg video_finale.mpg 
```

但我希望这发生在我的 eclipse 项目中的移动设备中。

请告诉我这应该怎么做......

# javascript - IE 带有 on .change() 表单 submit()

> ID：14157032
> 
> 赞同：2
> 
> 时间：2013-01-04T12:15:01.147
> 
> 标签：javascript, jquery, html

这是我的代码：

```
$('#button').click(function () {
    $('#file').click();
});
$('#file').change(function (){
    $('#form').submit();
});

 <form style="display:none;" id="form" method="post" target="upload_target" enctype="multipart/form-data" action="upload">

 <input id="file" name="file" id="file" type="file" /><br />        
  <input type="submit" name="action" value="Upload Image" /><br />      
  <iframe id="upload_target" name="upload_target" src="" style="width:100;height:100;border:00;"></iframe>   

</form>

  <span id="button" class="button def">upload</span> 
```

问题出在哪里？
这适用于 Firefox、Chrome 但不适用于 IE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:16:47.463

检查您的选择器，像这样从第二部分的选择器中删除该 #。

```
$('input[type=file]').change(function(){
    $('#form').submit();
}); 
```

这应该可以完美地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:18:25.063

`$('input[type=file]')``input`仅当您想按 tagName 选择时才应使用，`#`如果您想按 ID 选择元素，则应在选择器之前使用

**编辑：**

如果你检查了控制台，你会看到你在 IE 上出现了这个错误，`SCRIPT5: Access is denied.` 这是因为 IE 的安全规则

> 您无法在具有不同域名的页面中访问 iframe。

经过一番搜索，我发现了一些可能对您有所帮助的东西，您必须在父页面及其 iframe 上将 document.domain 设置为相同的内容，以便它们相互交谈。

```
document.domain = "yourdomain.com" 
```

来源：[http ://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/](http://www.tomhoppe.com/index.php/2008/03/cross-sub-domain-javascript-ajax-iframe-etc/)

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T16:21:49.620

Internet Explorer 不允许上传通过 Javascript 触发的文件。您正在做什么，即通过按钮触发文件浏览器的单击功能，然后尝试发送所选的任何文件在 IE 中不起作用。您将收到拒绝访问错误。

这不是代码中的错误，它只是 IE 工作方式的限制。

# ruby-on-rails - 使用范围检查相关模型是否在 Rails 中没有其他相关模型？

> ID：14157038
> 
> 赞同：0
> 
> 时间：2013-01-04T12:15:37.573
> 
> 标签：ruby-on-rails

我正在努力让范围工作。我概述了以下简单模型：

```
class User < ActiveRecord::Base
  has_many :authentications
  has_many :attendances
end

class Authentication < ActiveRecord::Base
  belongs_to :user
end

class Attendances  < ActiveRecord::Base
  belongs_to :user
end 
```

我正在尝试做的是在出勤上编写一个范围，以检查没有身份验证的用户。类似于以下内容：

```
scope :fulfilled_without_user_authentications, lambda { includes(:authentications).where('authentications.id' => nil) } 
```

但是，显然出席和认证之间的直接关系并不存在。

我应该创建这个链接（使用有很多通过），还是有办法在范围本身内指定它。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:00:37.300

也许您首先需要重新考虑您的关系。用户可以在未经身份验证的情况下出席吗？

如果没有，我会将您的关系重构为“有很多通过”：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:16:18.873

好的，所以我确定的可行的方法是：

```
class User
  scope :with_authentications, where("id IN (SELECT user_id FROM authentications)")
  scope :without_authentications, where("id NOT IN (SELECT user_id FROM authentications)")
end

class Attendance
  scope :with_user_authentications, lambda {
    joins "INNER JOIN users ON users.id = attendances.attendee_id" and User.with_authentications
  }
  scope :without_user_authentications, lambda { 
    joins "INNER JOIN users ON users.id = attendances.attendee_id" and User.without_authentications
  }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:33:58.887

**编辑**

尝试关注并让我知道它是否有效..

```
class Attendances  < ActiveRecord::Base
  belongs_to :user
  scope :fulfilled_without_user_authentications, lambda { joins(:user => :authentications).where('authentications.user_id != users.id') }
end 
```

# json - Scalatra 测试 RESTful JSON 对象

> ID：14157045
> 
> 赞同：4
> 
> 时间：2013-01-04T12:15:59.847
> 
> 标签：json, scala, rest, scalatest, scalatra

我正在使用 Scalatra 为一些 JSON RESTful API 编写测试，一个片段如下所示

```
class MyScalatraServletTests extends ScalatraSuite with FunSuite {

test("An valid request should return 200") {
    get ("/rest/json/accc/B1Q4K3/1") {
      status should equal (200)
      body should include ("TEST")
    }
  }
} 
```

预期的**主体**是 Scalatra 通过其 JSON 支持序列化的 JSON。我的问题是如何将**主体**转换回 scala 中的相同案例类实例，并大大简化测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:37:30.583

json4s 可以直接用于从 JSON 值中提取案例类。

```
import org.json4s._
import org.json4s.jackson.JsonMethods._
val parsedBody = parse(body)
parsedBody.extract[MyCaseClass] 
```

您还可以使用类似 XPath 的表达式来查询 JSON。

```
val parsedBody = parse(body)
val email = (parsedBody \ "user" \ "email").values
email should be ("example@example.org") 
```

您可以调用以从s（json4s 的 JSON 文档的内部表示）`.values`获取原始 Scala 值（`String`s、`Int`s 等）。`JValue`

有关所有这些示例，请参阅[json4s 介绍](https://github.com/json4s/json4s)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T05:29:19.547

我不确定您使用的是哪个 JSON 序列化程序或原始类的结构，但如果您想将 JSON 反序列化回 Scala，我建议您使用 Jackson Scala 模块：

[https://github.com/FasterXML/jackson-module-scala](https://github.com/FasterXML/jackson-module-scala)

# android - 隐藏活动的电池、信号和时间

> ID：14157049
> 
> 赞同：0
> 
> 时间：2013-01-04T12:16:13.083
> 
> 标签：android

如何隐藏活动中的所有内容，如电池、信号和时间。我正在使用以下代码隐藏标题：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

但是其余的东西隐藏呢？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:18:25.167

试试这个：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                     WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# android - setVideoUri(uri.parse(res)) 错误

> ID：14157051
> 
> 赞同：1
> 
> 时间：2013-01-04T12:16:27.547
> 
> 标签：android, resources, android-videoview

尝试播放位于 R.raw 中的视频。我有一个 xml 数组，我得到了要播放的文件。如果我对其进行硬编码，则视频效果很好，如下所示：

```
VideoView myVideoView = (VideoView)findViewById(R.id.videoview0);
myVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName()+"/"+R.raw.test));
myVideoView.setMediaController(new MediaController(this));
myVideoView.requestFocus();
myVideoView.start(); 
```

但是，如果我从我的数组中获取视频，我的错误侦听器集和视频不会播放。解析的字符串与上面的完全一样。这就是我的做法（为简单起见修改了代码）：

```
String uriParse = "android.resource://" + getPackageName() +"/R.raw." + getResources().getResourceEntryName(xmlArr.getResourceId(intVideoToPlay));
myVideoView.setVideoURI(Uri.parse(uriParse));
myVideoView.setMediaController(new MediaController(this));
myVideoView.requestFocus();
myVideoView.start(); 
```

我的 xml 数组如下所示：

```
string-array name="arrTest"
item>@raw/test1 /item
item>@raw/test2 /item
item>@raw/test3 /item
/string-array 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T20:58:02.827

扩展安迪·雷斯（非）的答案……他是对的，那行不通……但是“为什么”？

因为 R.raw.myvideo 是 R 类中的一个变量，它映射到某个数字（这是安迪正在谈论的你的 URI 正在寻找的整数）。

如果您想在运行时将该 String 转换为该 int ，请执行以下操作...

```
 @SuppressWarnings("rawtypes")
    public static int getResourceId(String name,  Class resType){       
        try {          
            return resType.getField(name).getInt(null);        
        }
        catch (Exception e) {
           // Log.d(TAG, "Failure to get drawable id.", e);
        }
        return 0;
    }

   int resId = getResourceId(
    getResources().getResourceEntryName(xmlArr.getResourceId(intVideoToPlay))
   , R.raw.class); //this will be 0 if it can't find the String in the raw class or the relevant id
  //keep in mind that I have no idea if your xmlArr method is valid... make sure to log what it's returning to verify that you're getting the String you're expecting from it
try{

   String uriParse = "android.resource://" + getPackageName() +"/" + resId;
   //... now you can use your uriParse as you do above.

}catch(Exception e){

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:35:45.690

因为`R.raw.test`实际上不是字符串，而是`int`您正在访问的资源的 id 的表示。（你可以在 LogCat 中打印它的值）
所以，`getPackageName() +"/R.raw." + getResources().....`不会工作。

# umbraco - 如何在 xslt 文件中使用 umbraco 字段

> ID：14157056
> 
> 赞同：0
> 
> 时间：2013-01-04T12:16:47.473
> 
> 标签：umbraco, umbraco5, umbraco-blog

我想在 xslt 文件中添加我的 umbraco 字段，我该怎么做。

我的 umbraco 领域是：

```
<umbraco:Item field="image" useIfEmpty="image" textIfEmpty="/css/images/dog.jpg" runat="server" /> 
```

我想在图像 src 字段的 XSLT 文件中使用此字段

```
 <div class="imgbox">
                        <xsl:variable name="image" select="$post/image"/>

                        <img src="/css/images/dog.jpg" alt="" />
</div> 
```

如何在图像 src 中添加此字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:40:54.453

我不确定你的意思，但是如果你想在你的图像源中显示变量“image”的值，你不需要额外的变量“image”，可以直接调用下面的代码：

```
<img src="{$post/image}" alt="" /> 
```

它还取决于 ImageField 是哪种字段类型。当您的图像字段是具有硬编码路径的文本框时，上面的示例很有用。如果使用 MediaPicker 字段，则只能取回图像的 ID，并且需要检索 MediaItem：

```
<xsl:variable name="media" select="umbraco.library:GetMedia($post/image, false)" />
<img src="{$media/umbracoFile}" alt="" /> 
```

# telerik - 基于 Telerik 报告表的布局的页面支持

> ID：14157060
> 
> 赞同：0
> 
> 时间：2013-01-04T12:17:04.813
> 
> 标签：telerik, telerik-reporting

我正在使用 Telerik Report Control，它在处理复杂的报告数据时解决了许多技术问题。然而，一段时间后，我们遇到了一个与数据布局和对齐相关的主要问题。当某些字段中的大量数据在 Web 浏览器中看起来非常混乱时，文本框会变得未对齐。

在 2012 年第三季度发布后，我们决定使用由 telerik 提供的基于表格的布局，我们希望它肯定能解决我们的问题。

参考： [http ://www.telerik.com/help/reporting/table-working-with-table-cross-table-list-items.html](http://www.telerik.com/help/reporting/table-working-with-table-cross-table-list-items.html)

在使用 Q3 的试用版时，我们假设基于表格的布局将解决问题，并且我们将能够从浏览器中的 Telerik 报告中获得对齐良好的数据。但是在这里我们遇到了另一个与分页有关的问题。由于表格将所有记录呈现在一页上，并且无论行数如何，都不会呈现多页的数据。我为报告正确设置了所有页面设置，但仍未获得预期结果。似乎telerik根据其中重复的详细信息部分呈现分页，但在我的情况下，我在它自己的详细信息部分添加了一个表格控件，并分配了表格控件的数据源属性。任何人都可以建议如何使其显示数据页面明智:) 或者如何摆脱报表查看器中的这个 Miss 对齐问题？

还有什么方法可以让我们控制为报告字段呈现 HTML？那么自定义渲染输出并在其中添加一些 Html 会很容易吗？

请查看与此问题相关的以下屏幕截图

[http://www.telerik.com/ClientsFiles/1feff8ee-5f4a-4f29-8993-9f1a176d4027_table-based-Trial.jpg](http://www.telerik.com/ClientsFiles/1feff8ee-5f4a-4f29-8993-9f1a176d4027_table-based-Trial.jpg) : 新版本报告呈现单页 100 多条记录

请帮忙，

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T15:19:52.797

这是由于[交互式视图](http://www.telerik.com/help/reporting/report-viewers-interactive-print-view.html)软分页机制，该机制针对基于屏幕的查看进行了优化。换句话说，您可以有一个两页长的表格，它以一个连续的形式出现在客户端上，带有一个垂直滚动条（逻辑布局）；打印时，表格将打印在两张单独的纸上（打印布局）。您可以将查看器 ViewMode 属性设置为[PrintPreview强制打印预览](http://www.telerik.com/help/reporting/t_telerik_reportviewer_silverlight_viewmode.html)

关于使用详细信息部分进行表格布局，您可以将所有文本框停靠属性设置为左侧。这将帮助您保持所有文本框的高度相同。

# c++ - 指针和引用运算符 (&)

> ID：14157064
> 
> 赞同：0
> 
> 时间：2013-01-04T12:17:21.473
> 
> 标签：c++, pointers

我正在学习 C++，我在一本书上找到了这个：

```
#include <iostream>
using namespace std;

int main()
{
int Age = 30;
int* pInteger = &Age; // pointer to an int, initialized to &Age

// Displaying the value of pointer
cout << “Integer Age is at: 0x” << hex << pInteger << endl;

return 0;
} 
```

书上说输出是内存中存储Age的地址。

但是这本书并没有谈到这一点：

```
*pInteger = &Age;
 pInteger = &Age; 
```

**这两个任务有什么区别？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T12:20:51.583

你似乎被这条线弄糊涂了

```
int* pInteger = &Age; // pointer to an int, initialized to &Age 
```

这里的`*`符号将 pInteger 声明为指向 int 的指针。这被初始化（未分配）到 Age 的地址，这是允许的，因为 Age 是一个 int。

你可以输入

```
*pInteger = 45; 
```

这将分配给 pInteger 指向的整数。

您也可以键入

```
int y = 35; 
pInteger = &y; 
```

这将重新分配指针以指向不同的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T12:22:16.177

如果你打破这个可能会更容易理解

```
 int* pInteger = &Age; 
```

分为两步

```
 int* pInteger; 
```

delares 一个指向 int 类型指针的变量，然后

```
 pInteger = &Age; 
```

将 Age 的地址分配给 pInteger，因此 pInteger 现在指向一个特定的整数。

如果你写

```
 *pInteger = 95; 
```

您将为 pInteger 当前指向的任何内容分配一个新值。

当你写

```
 int* pInteger = &Age; 
```

您正在声明变量并为其赋予初始值，因此这与明显相似的不同

```
 *pInteger = &Age; 
```

它正在使用 pInteger 但没有声明它，所以在这里你得到 Age 的地址，并有效地尝试将其分配给 pInteger 指向的东西，将地址分配给 int 不是一件好事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T12:19:04.037

`int* pInteger = &Age;`不是赋值，而是初始化。在这里，`*`是类型的一部分 - `int*`，而不是整数`*pInteger`，如下所示。

你问的两个是作业：

```
*pInteger = &Age;
 pInteger = &Age; 
```

不同的是，第一个是非法的，第二个是可以的。那是因为`&Age`has type `int*`，而`*pInteger`has type `int`，并且将 an 分配给 an 是非法`int*`的`int`。`pInteger`但是，有 type `int*`，所以赋值没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T12:19:14.657

`pInteger`是一个指向 int 的指针，它在第一种情况下被*初始化*为的地址（假设你的意思是），并在第二种情况下*被赋值。*`Age`**`int`**`*pInteger = &Age;`

 ** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T12:29:31.997

首先我们声明并初始化一个类型的变量`int*`

```
 int*     pInteger   =          &Age;
//| var type | var name |   | value of type "int*"  | 
```

接下来我们尝试使用赋值：

```
 pInteger       =         &Age;
//| var of type "int*" |   | value of type "int*"  |
         *pInteger      =         &Age;
//| var of type "int" |   | value of type "int*"  | 
```

最后一个是不正确的，直到我们`int*`转换为`int`（如果我们的目标是使用像整数值这样的地址）。一元运算符取消引用运算符`*`意味着我们需要位于指定地址的东西。*

# php - Yii 已加入表但未检索到所有选定数据

> ID：14157065
> 
> 赞同：2
> 
> 时间：2013-01-04T12:17:21.273
> 
> 标签：php, mysql, yii, return-value, yii-cmodel

我的控制器中有以下标准。

```
 $criteria = new CDbCriteria;
    $criteria->select = 't.*,b.*,c.*';
    $criteria->join = "INNER JOIN tbl_patient_chair b ON b.patient = '0005'
                        INNER JOIN tbl_chair c ON b.chair = c.Serial_No";
    $criteria->condition = "t.client_id = '0005'";

    $model = Patient::model()->findAll($criteria);

    $this->render('view', array(
        'model' => $model
    )); 
```

然后在我看来，我试图通过执行以下操作来检索所有选定的数据：

```
foreach ($model as $models)
  print_r($model); 
```

但在结果中，我可以看到第二个和第三个表中没有数据。第一个表的数据已成功检索，但是我无法显示另一个表的数据。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:38:45.287

在 Yii 中最好通过创建关系来使用连接，这样您就不需要编写复杂的查询

首先在你的 sql 表中添加外键（例如在椅子上添加外键 patientId）

接下来，如果您重新生成模型，您可以看到自动添加的关系（或者您可以手动添加关系）

```
public function relations()
{

    return array(
        'chairs' => array(self::HAS_MANY, 'chair', 'patientId'),
    );
} 
```

在椅子模型中，您将看到关系

```
'patient' => array(self::BELONGS_TO, 'patient', 'patientId'), 
```

单独定义关系允许您以 $model->relationName 的形式访问查询模型中的值，如果您想在“where”条件下使用列，请在模型函数中使用以下查询

```
$patients=Patient::model()->findAll(array(
                'condition' => "$field like '%$value%'",
                'with'=>array('chairs'),
                'select'=> "*",
                )); 
```

“with”关键字很重要，它可以采用关系列表的数组来包含在查询中。查询条件将适用于包含的所有表，如果您不想从另一个表中查询字段并且只需要链接输出数据，则可以跳过此处的“with”关键字。

您可以通过以下方式到达分配给患者的椅子

```
foreach($patients as $patient)print_r($patient->chairs); 
```

还有其他方法，就像[这里讨论的一样](http://www.yiiframework.com/wiki/285/accessing-data-in-a-join-table-with-the-related-models/)

要与关系取得更多联系，请转到[此处](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

# javascript - 在 ExpressJS 中运行多个应用程序

> ID：14157066
> 
> 赞同：2
> 
> 时间：2013-01-04T12:17:22.080
> 
> 标签：javascript, node.js, express, iisnode

我目前在 IIS7 上运行 iisnode。目前那里只有一个使用 MongoDB 的应用程序 (app.js)。澄清一下，当我说“应用程序”时，我指的是实际的 ExpressJS 应用程序。

我想做的是从同一个地方托管多个快速应用程序。因此，例如，如果您转到 /app2/，它将在该文件夹中加载 app.js。我认为重写规则是可行的，但我不太确定这是最好的方法。也许最好有某种控制器根据子域或路径切换到应用程序？

这是我想要的结构：

```
Site Root
|_ app1/
|  |___ app.js
|  |___ routes/
|  |___ models/
|  |___ public/
|
|_ app2/
   |___ app.js
   |___ routes/
   |___ models/
   |___ public/ 
```

只是把这个问题放在那里，以获得关于这种设置的最佳方法的一些建议。iisnode 通常只配置一个 app.js：

```
<handlers>
  <add name="iisnode" path="app.js" verb="*" modules="iisnode" />
</handlers> 
```

也许可以有不止一个，或者 app.js 可能像代理一样？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:26:55.777

我将创建一个包装器 express 应用程序并使用它来将路由转发到您的两个应用程序。这就是 Express 的作者 TJ Holowaychuk 推荐的方法。[有关详细信息，请参阅他的短截屏视频。](http://vimeo.com/56166857)

# javascript - Readonly false 后跟焦点在 ie 7 中不起作用

> ID：14157067
> 
> 赞同：0
> 
> 时间：2013-01-04T12:17:21.753
> 
> 标签：javascript, jquery, html

有人能帮我吗..

我有一个文本框，在页面加载时默认为只读。在此文本框的单击事件中，我必须做两件事。

*   使其可编辑
*   专注于文本框

为此，我编写了一个代码`removeAttr`以使其可编辑，然后`focus()`继续关注它。

它按预期在 IE8+、FF、Chrome 中运行。但我也需要让它在 IE7 中工作，因为我们在客户端的兼容浏览器列表中有 IE7。

注意：问题仅在于焦点，单击后文本框变为可编辑。但需要第二次点击才能保持专注。期望它只在第一次点击时完成。

```
<input name="testId" id="testId" size="25" maxlength="40"  tabindex="21" class="width250" readonly="true"/>

$("#testId").click(function(){
   $(this).removeAttr("readonly");
   $(this).focus();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:31:28.093

IE 的一个毛病是大多数事件不会自动更新 DOM。您所做的是取消焦点元素并再次将其聚焦以使其可编辑。

试试这个方法，它会解决你在 IE 上的问题

```
$("#testId").click(function () {
   $(this).removeAttr("readonly").blur().focus();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:38:42.200

尝试为`focus`.

```
$("#testId").click(function(){
   $(this).removeAttr("readonly");
   setTimeout(function() {$(this).focus(); }, 10);
}); 
```

（从[这里](https://stackoverflow.com/questions/2600186/focus-doesnt-work-in-ie)）

# python - python 谷歌 json api

> ID：14157071
> 
> 赞同：1
> 
> 时间：2013-01-04T12:17:32.087
> 
> 标签：python, api, simplejson

所以我现在运行这个我从[http://www.dcortesi.com/blog/2008/05/28/google-ajax-search-api-example-python-code/找到的脚本](http://www.dcortesi.com/blog/2008/05/28/google-ajax-search-api-example-python-code/)

```
import urllib
import simplejson
query = urllib.urlencode({'q' : 'the.hobbit.2012.imdb'})
url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&%s' \
 % (query)
search_results = urllib.urlopen(url)
json = simplejson.loads(search_results.read())
results = json['responseData']['results']
for i in results:
 if "imdb" in i['url']:
  print i['url']
  break 
```

我想要的只是从包含 imdb 的 google 获得第一个结果。（我需要电影ID号）

我的问题是，在进行了 4-6 次搜索后，我会持续大约 15 秒，然后我可以再次进行 1 次搜索。

```
Traceback (most recent call last):
  File "./g", line 9, in <module>
    results = json['responseData']['results']
TypeError: 'NoneType' object is unsubscriptable 
```

从我读过的内容来看，谷歌每天只允许一定数量的搜索等。但他们应该每分钟允许超过 10 次搜索？

这里还有什么问题？或者有没有其他更好的方法来搜索谷歌？我只需要链接到 imdb 的“最高”结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:06:51.100

[Google 的 Web Search API 已被弃用](http://googlecode.blogspot.com/2010/11/introducing-google-apis-console-and-our.html)（并且正在收紧速率限制执行），因此您有几个选择（按我的偏好排序）：

1.  完全放弃 Google 搜索并使用[imdbpy](https://bitbucket.org/alberanid/imdbpy/overview)。
2.  使用[Google 自定义搜索 API](https://developers.google.com/custom-search/v1/getting_started?hl=en)来避免速率限制。

## IMDbPY 示例

```
>>> import imdb    
>>> ia = imdb.IMDb()    
>>> movies = ia.search_movie(title='The Hobbit: An Unexpected Journey')    
>>> movies[0].movieID    
'0903624' 
```

# c# - 在 MVC4 问题中使用 RenderAction(actionname, values)

> ID：14157072
> 
> 赞同：22
> 
> 时间：2013-01-04T12:17:32.983
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

我需要显示`Items`一个实体的一些子对象 () `Request`。而不是请求，我发现传递一个包含比原始请求实体更多信息的视图更好。我调用的这个视图`RequestInfo`，它也包含原来的 Requests `Id`。

然后在 MVC 视图中我做了：

```
@model CAPS.RequestInfo
...    
@Html.RenderAction("Items", new { requestId = Model.Id }) 
```

渲染 ：

```
public PartialViewResult Items(int requestId)
{
    using (var db = new DbContext())
    {
        var items = db.Items.Where(x => x.Request.Id == requestId);
        return PartialView("_Items", items);
    }
} 
```

这将显示一个通用列表：

```
@model IEnumerable<CAPS.Item>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Code)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Qty)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Value)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Code)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Qty)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Value)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Type)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table> 
```

但是我在**“无法将类型'void'隐式转换为'object'”**`RenderAction`行上遇到编译器错误有什么想法吗？

 *** * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-04T12:26:54.533

调用 Render 方法时需要使用此语法：

```
@{ Html.RenderAction("Items", new { requestId = Model.Id }); } 
```

`@syntax`没有大括号的 ，需要一个返回到页面的返回类型。为了调用从页面返回 void 的方法，您必须将调用用大括号括起来。

请参阅以下链接以获得更深入的解释。

[http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-03T21:25:42.953

有用的替代方案：

```
@model CAPS.RequestInfo
...    
@Html.Action("Items", new { requestId = Model.Id }) 
```

此代码返回 MvcHtmlString。适用于部分视图和查看结果。不需要 {} 字符。**

# c# - 当 PostBack 发生时，特定的 JQuery 效果停止工作

> ID：14157073
> 
> 赞同：0
> 
> 时间：2013-01-04T12:17:37.637
> 
> 标签：c#, jquery

我有一个`<div>`动态创建的，我正在尝试产生`FadeIn` `FadeOut`效果。但是，当 PostBack 发生时，这些 Jquery 效果将停止工作。加载页面后，一切正常，但如果发生回发，它们就会停止。

**动态创建 DIV**

```
protected string CarregaLista()
{
    int credenciada_Id = Convert.ToInt32(tk.CarregaToken(1, Request.Cookies["token"].Value));
    int celula_Id = Convert.ToInt32(tk.CarregaToken(21, Request.Cookies["token"].Value));

    string select = "My Select";

    SqlConnection c = new SqlConnection(con.Con);
    SqlCommand cmd = new SqlCommand(select, c);
    c.Open();

    try
    {
        SqlDataReader r = cmd.ExecuteReader();
        montaTabela += "<ul id='sortable' class='" + cont + "' style='margin: 0 15px 15px !important; width: 637px !important;'>";

        while (r.Read())
        {   
            montaTabela += "<li class='ui-state-default linhaImovel' style='color:#777 !important;' id='" + r["Imovel_Id"].ToString() + "'>";                    
            montaTabela += "<span class='ui-icon ui-icon-arrowthick-2-n-s'></span>";

            montaTabela += "<div class='btn btn-mini btn-netimoveis botaoExcluir' style='float: right !important;' id='excluirDestaque_" + r["Imovel_id"].ToString() + "' OnClick='excluirDestaque(" + r["Imovel_Id"].ToString() + ")'><i class='icon-trash icon-white'></i>Excluir</div>";

            montaTabela += "<table>"; 
            montaTabela += "    <tr>"; 
            montaTabela += "        <td>";
            montaTabela += "            <img src='" + url + "' width='110' height='81' />"; 
            montaTabela += "        </td>";
            montaTabela += "        <td style='padding-left: 20px !important; padding-right: 20px !important; width: 111px !important;'>COD: " + r["Imovel_Id"].ToString() + "<br />" + r["TipoDsc1"].ToString();
            montaTabela += "        </td>";
            montaTabela += "        <td style='border-left: 1px dotted #CCC; padding-left: 20px !important; padding-right: 20px !important; width: 111px !important;'>" + r["BairroDsc1"].ToString(); 
            montaTabela += "        </td>";
            montaTabela += "        <td style='border-left: 1px dotted #CCC; padding-left: 20px !important; padding-right: 20px !important; width: 111px !important;'>R$ " + r["ValorImovel"].ToString(); 
            montaTabela += "        </td>";
            montaTabela += "        <td>";
            montaTabela += "            <span class='badge badge-warning'></span>";
            montaTabela += "        </td>";
            montaTabela += "    </tr>";
            montaTabela += "</table>";                    
            montaTabela += "</li>"; 
        }

        montaTabela += "</ul>";
        return montaTabela;
    }
    catch (Exception e)
    {
        return montaTabela;
    }
} 
```

**试图通过 JQuery 放置效果**

```
$(function () {            
            $(".linhaImovel").mouseenter(function () {
                $(this).find(".botaoExcluir").fadeIn();
            }).mouseleave(function () {
                $(this).find(".botaoExcluir").fadeOut();
           });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:22:26.080

如果您替换元素，则事件处理程序不再绑定到新元素（因为它们是全新的、独立的元素），即使它们在您最初执行代码以绑定它们时符合条件。您需要使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$(document).on({
     mouseenter: function(e) {
         $(this).find(".botaoExcluir").fadeIn();
     },
     mouseleave: function(e) {
         $(this).find(".botaoExcluir").fadeOut();
     }
}, '.linhaImovel'); 
```

# linux - 从第二个 bash 脚本获取变量的 bash 脚本

> ID：14157076
> 
> 赞同：-3
> 
> 时间：2013-01-04T12:17:44.003
> 
> 标签：linux, bash

> **可能重复：**
> [bash 将输出存储为变量](https://stackoverflow.com/questions/12704740/bash-store-output-as-a-variable)

我有一个脚本，它输出一个简单的整数，如“10”，然后我有第二个脚本，我想调用这个脚本并将整数作为变量。

```
#!/bin/bash

KBPS= ## NEED OUTPUT FROM /USR/LOCAL/BIN/ETH0TX.SH
THRESHOLD=50 #KBPS
if [ $KBPS -gt $THRESHOLD ]; then
   exit 1
fi 
```

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:19:33.853

像这样：

```
KBPS=$(/usr/local/bin/eth0tx.sh) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:19:49.053

```
KBPS=$(/usr/local/bin/eth0tx.sh) 
```

将设置`KBPS`为脚本的输出。大写已删除。您可以使用 . 检查退出代码`$?`。这可能值得做，而不是简单地填充`KBPS`无效/空白数据。

更多信息[在这里](http://tldp.org/LDP/abs/html/commandsub.html)，并注意评论。空格/换行符等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:19:50.453

是的：

```
KBPS=$(theotherbashscript) 
```

这称为命令替换。

注意：要求输出不包含空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:19:55.917

`KBPS=$(/usr/local/bin/eth0tx.sh)`

什么比赛！:D

# iphone - 从应用程序内的 uiwebview 拨打电话时避免警报

> ID：14157079
> 
> 赞同：0
> 
> 时间：2013-01-04T12:18:01.990
> 
> 标签：iphone, ios, uiwebview, call, uialertview

场景是我需要从我的应用程序拨打电话，并在通话结束时将控制权交还给应用程序，而无需用户进行任何输入。但是下面的代码不允许在没有响应警报的情况下拨打电话。任何人都可以在这个问题上帮助我吗？

这是我的代码：

```
NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@",phoneno]];
    UIWebView *mCallWebview = [[UIWebView alloc] init]  ;
    [self.view addSubview:mCallWebview];
    [mCallWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:46:37.157

我可能是错的，但出于安全原因是**不可能**的！允许在不询问用户的情况下直接拨打电话可能会为不必要的高收费服务呼叫打开大门......甚至是最严重的欺诈......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T14:09:27.363

不要使用网络视图。刚刚尝试过，它可以工作，而且更简单

```
NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel://%@",phoneno]];
[[UIApplication sharedApplication] openURL:telURL]; 
```

# haskell - Control.Monad.State API 最近是否发生了变化？

> ID：14157090
> 
> 赞同：14
> 
> 时间：2013-01-04T12:18:59.250
> 
> 标签：haskell, state-monad

作为学习练习，我正在尝试在 Haskell 中实现堆排序。我认为`State`monad 将是这样做的正确选择，因为堆非常依赖于在单个结构内移动数据（并且`do`符号会很有用）。此外，我希望总体上巩固我对单子的理解。

*Learn You A Haskell*（以及[许多](http://brandon.si/code/the-state-monad-a-tutorial-for-the-confused/)[其他](http://en.wikibooks.org/wiki/Haskell/Advanced_monads#The_State_monad)[教程](http://book.realworldhaskell.org/read/monads.html#id643643)）中关于[monad](http://learnyouahaskell.com/for-a-few-monads-more#state)的[示例，`State`](http://learnyouahaskell.com/for-a-few-monads-more#state)定义为： *`State`*

 *```
newtype State s a = State { runState :: s -> (a,s) } 
```

我应该将一个类型的函数`s -> (a,s)`（可能会或可能不会在其他参数中进行咖喱）传递给`State`值构造函数。所以我的函数看起来像这样：

```
pop :: Ord a => State (Heap a) a
pop = State pop'
pop' :: Ord a => Heap a -> (a, Heap a)
-- implementation of pop' goes here

push :: Ord a => a -> State (Heap a) ()
push item = State $ push' item
push' :: Ord a => a -> Heap a -> ((), Heap a)
-- implementation of push' goes here 
```

这不会编译，出现以下错误：

```
Not in scope: data constructor `State'
Perhaps you meant `StateT' (imported from Control.Monad.State) 
```

通过阅读[API 文档](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-State-Lazy.html)，`Control.Monad.State`似乎`State`自从编写了这些教程以来，值构造函数已从模块中删除。作为初学者，我发现文档远非一目了然。所以我的问题是：

1.  我是否相信`State`值构造函数已经消失了？
2.  我应该改用什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T12:22:10.107

1.  是的，它消失了，取而代之的是[`StateT`](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-State-Lazy.html#t:StateT). （`State`monad 现在是根据`StateT`monad 转换器定义的。）
2.  您应该改用该[`state`](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-State-Lazy.html#v:state)功能。

但是，我会质疑您的方法是否正确。与其担心如何`State`实现，不如考虑使用 do-notation 和`get`and`put`函数。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-23T04:54:58.127

以下是与 State Monad 相关的书中所示示例的正确实现：

一元堆栈：

```
-- MonadicStack.hs (Learn You a Haskell for Great Good!)

import Control.Monad.State  

type Stack = [Int]

pop :: State Stack Int
-- The following line was wrong in the book:
-- pop = State $ \(x:xs) -> (x,xs)  
pop = do
 x:xs <- get
 put xs
 return x

push :: Int -> State Stack ()  
-- The following line was wrong in the book:
-- push a = State $ \xs -> ((),a:xs)
push a = do
 xs <- get
 put (a:xs)
 return ()

pop1 = runState pop [1..5]
push1 = runState (push 1) [2..5]

stackManip :: State Stack Int  
stackManip = do  
 push 3  
 a <- pop  
 pop  

stackManip1 = runState stackManip [5,8,2,1]  
stackManip2 = runState stackManip [1,2,3,4]  

stackStuff :: State Stack ()  
stackStuff = do  
 a <- pop  
 if a == 5  
  then push 5  
  else do  
   push 3  
   push 8  

stackStuff1 = runState stackStuff [9,0,2,1,0]  
stackStuff2 = runState stackStuff [5,4,3,2,1]

moreStack :: State Stack ()  
moreStack = do  
 a <- stackManip  
 if a == 100  
  then stackStuff  
  else return ()  

moreStack1 = runState moreStack [100,9,0,2,1,0]
moreStack2 = runState moreStack [9,0,2,1,0]

stackyStack :: State Stack ()  
stackyStack = do  
 stackNow <- get  
 if stackNow == [1,2,3]  
  then put [8,3,1]  
  else put [9,2,1]  

stackyStack1 = runState stackyStack [1,2,3]
stackyStack2 = runState stackyStack [10,20,30,40] 
```

一元随机发生器：

```
-- MonadicRandomGenerator.hs (Learn You a Haskell for Great Good!)

import System.Random  
import Control.Monad.State  

randomSt :: (RandomGen g, Random a) => State g a  
-- The following line was wrong in the book:
-- randomSt = State random
randomSt = do
 gen <- get
 let (value,nextGen) = random gen
 put nextGen
 return value

randomSt1 = (runState randomSt (mkStdGen 1)) :: (Int,StdGen)
randomSt2 = (runState randomSt (mkStdGen 2)) :: (Float,StdGen)

threeCoins :: State StdGen (Bool,Bool,Bool)  
threeCoins = do  
 a <- randomSt  
 b <- randomSt  
 c <- randomSt  
 return (a,b,c)  

threeCoins1 = runState threeCoins (mkStdGen 33)
threeCoins2 = runState threeCoins (mkStdGen 2)

-- rollDie and rollNDice are not explained in the book LYAHFGG. 
-- But these functions are interesting and complementary:

rollDie :: State StdGen Int
rollDie = do 
 generator <- get
 let (value, newGenerator) = randomR (1,6) generator
 put newGenerator
 return value

rollDie1 = runState rollDie (mkStdGen 1)
rollDie2 = runState rollDie (mkStdGen 2)

rollNDice :: Int -> State StdGen [Int]
rollNDice 0 = do
 return []
rollNDice n = do
 value <- rollDie
 list <- rollNDice (n-1)
 return (value:list)

rollNDice1 = runState (rollNDice 10) (mkStdGen 1)
rollNDice2 = runState (rollNDice 20) (mkStdGen 2) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-23T15:10:50.487

我认为`state`可以简洁地实现`pop`，但`modify`更好的是，`push`因为它返回单位：

```
import Control.Monad.State  

type Stack a = [a]

pop :: State (Stack a) a
pop = state $ \(a:as) -> (a, as)

push :: a -> State (Stack a) ()  
push a = modify (a:) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-24T05:49:41.263

DESUGARED MONADIC 堆栈：

```
-- DesugaredMonadicStack.hs (Learn You a Haskell for Great Good!)

import Control.Monad.State  

type Stack = [Int]

pop :: State Stack Int  
pop = 
 get >>=
 \(x:xs) -> put xs >>
 return x

push :: Int -> State Stack ()
push a =
 get >>=
 \xs -> put (a:xs) >>
 return ()

pop1 = runState pop [1..5]
push1 = runState (push 1) [2..5]

stackManip :: State Stack Int  
stackManip =
 push 3 >>
 pop >>=
 \a -> pop

stackManip1 = runState stackManip [5,8,2,1]  
stackManip2 = runState stackManip [1,2,3,4]  

stackStuff :: State Stack ()  
stackStuff =
 pop >>=
 \a -> 
  if a == 5 then
   push 5
  else
   push 3 >>
   push 8

stackStuff1 = runState stackStuff [9,0,2,1,0]  
stackStuff2 = runState stackStuff [5,4,3,2,1]

moreStack :: State Stack ()  
moreStack =
 stackManip >>=
 \a ->
  if a == 100 then
   stackStuff
  else
   return ()

moreStack1 = runState moreStack [100,9,0,2,1,0]
moreStack2 = runState moreStack [9,0,2,1,0]
moreStack3 = runState moreStack [100,5,4,3,2,1]

stackyStack :: State Stack ()  
stackyStack =
 get >>=
 \stackNow ->
  if stackNow == [1,2,3] then
   put [8,3,1]
  else
   put [9,2,1]

stackyStack1 = runState stackyStack [1,2,3]
stackyStack2 = runState stackyStack [10,20,30,40] 
```

DESUGARED MONADIC RANDOM 生成器：

```
-- DesugaredMonadicRandomGenerator.hs (Learn You a Haskell for Great Good!)

import System.Random  
import Control.Monad.State  

randomSt :: (RandomGen g, Random a) => State g a  
randomSt =
 get >>=
 \gen -> 
  let (value,nextGen) = random gen
  in
   put nextGen >>
   return value

randomSt1 = (runState randomSt (mkStdGen 1)) :: (Int,StdGen)
randomSt2 = (runState randomSt (mkStdGen 2)) :: (Float,StdGen)

threeCoins :: State StdGen (Bool,Bool,Bool)
threeCoins =
 randomSt >>=
 \a -> randomSt >>=
 \b -> randomSt >>=
 \c -> return (a,b,c)

threeCoins1 = runState threeCoins (mkStdGen 33)
threeCoins2 = runState threeCoins (mkStdGen 2)

-- rollDie and rollNDice are not explained in the book LYAHFGG. 
-- But these functions are interesting and complementary:

rollDie :: State StdGen Int
rollDie =
 get >>=
 \generator -> 
  let (value, newGenerator) = randomR (1,6) generator
  in
   put newGenerator >>
   return value

rollDie1 = runState rollDie (mkStdGen 1)
rollDie2 = runState rollDie (mkStdGen 2)

rollNDice :: Int -> State StdGen [Int]
rollNDice 0 = return []
rollNDice n =
 rollDie >>=
 \value -> rollNDice (n-1) >>=
 \list -> return (value:list)

rollNDice1 = runState (rollNDice 10) (mkStdGen 1)
rollNDice2 = runState (rollNDice 20) (mkStdGen 2) 
```*

# python - subprocess.call 使用刚刚创建的文件；缺少一些行

> ID：14157096
> 
> 赞同：0
> 
> 时间：2013-01-04T12:19:19.507
> 
> 标签：python, shell, file-io

我是python开发的新手。我正在尝试在文件（tmp.addr2line）中写入一些内容并在此文件上运行 shell 命令。但是当我比较我的shell命令使用的文件和我刚刚创建的文件时，它们是不同的，使用的文件更小。

有我的代码（在 subprocess.call 中运行的命令不是最后一个）。

```
test = open("tmp.addr2line", "w") 
for i in __coverage_information__:
    test.write(i.address + "\n")
test.close
subprocess.call("wc tmp.addr2line", shell = True) 
```

返回

```
268697  268698 2686976 tmp.addr2line 
```

如果我在我的 python 脚本之后运行 wc tmp.addr2line，我得到：

```
271710  271710 2717100 tmp.addr2line 
```

所以缺少线条，不知道为什么。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:23:06.643

你没有关闭你的文件。您需要*调用*关闭函数：

```
test.close() 
```

如果没有，`()`您只是在引用该函数，而不是实际调用它。在您正确关闭文件之前，不会刷新写入缓冲区，您只会看到部分写入。

您可以将文件用作`with`语句中的上下文管理器。当语句下面的块`with`完成后，文件会自动关闭，而您根本不需要调用`close()`：

```
with open("tmp.addr2line", "w") as test:
    for i in __coverage_information__:
        test.write(i.address + "\n") 
```

最好尽可能避免使用该`shell=True`参数，而是使用此参数：

```
subprocess.call(["wc", "tmp.addr2line"]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:43:59.890

您应该使用 with 语句来确保您的文件已关闭：

```
with open(filename, 'w') as fd:
    fd.write(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:23:20.370

您在“关闭”之后错过了括号。这样做的效果是，当您在脚本中运行 wc 时，不会调用该函数并且文件不会完全写入磁盘。当脚本结束时，解释器会自动关闭文件并写入缓冲内容，因此之后您会看到 wc 的正确输出。

# android - 在手机和平 板电脑上设置字体大小

> ID：14157102
> 
> 赞同：0
> 
> 时间：2013-01-04T12:19:45.960
> 
> 标签：android, fonts, textview, android-fonts

如何在手机和平​​板电脑中设置 textview 的字体大小。我提到的帖子建议创建`dimen.xml`并将它们放置在不同的文件夹中，即`values-mdpi`, `values-hdpi`, `values-ldpi`. 平板电脑（1024x600）分辨率从`values-mdpi`文件夹中挑选，手机（320x480）也从`values-mdpi`文件夹中挑选，这使得字体在手机上看起来非常大并且变形，而在平板电脑上看起来很好。

有没有办法分别指定手机和平板电脑的字体大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T12:23:50.307

对于我使用的平板电脑：

*   `values-sw600dp`适用于 7 英寸</li>
*   `values-sw720dp`10 英寸</li>

此解决方案不仅可用于本地化尺寸，还可用于其他值（例如，样式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:24:19.710

看来您从参考资料中被误解了。您应该使用`values`,`values-large`文件夹以更改手机和平板电脑的字体。为了获得更好的结果，请继续使用`sp`单位而不是 dp 作为字体大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:22:37.327

您可以只使用 sp 单位。这要简单得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T04:49:43.683

我试过这将工作文本大小设置默认大小

创建：android/res/values/styles.xml

```
<style name="Widget.TextView">    
 <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>    
</style>
<style name="TextAppearance.Small">  
<item name="android:textSize">14sp</item>    
<item name="android:textStyle">normal</item>    
<item name="android:textColor">?textColorSecondary</item>    
</style> 
```

在哪里

```
<item name="textColorSecondary">@android:color/secondary_text_dark</item> 
```

这些颜色在/res/color/中定义，检查/res/color/secondary_text_dark.xml

# internet-explorer-10 - IE10 选择框问题

> ID：14157108
> 
> 赞同：10
> 
> 时间：2013-01-04T12:20:05.417
> 
> 标签：internet-explorer-10

我在 IE10 中测试我的应用程序，发现选择框有一个奇怪的行为。所选选项突出显示，上方/下方选项显示在所选选项上方/下方。下拉框被隐藏。

这仅在 IE10 中发生。在所有其他浏览器中，选项显示在选择框下方。

在 IE10 和 IE9 中尝试以下示例代码：

```
<!DOCTYPE html>
<html>
    <body>
        <select>
            <option value="volvo">Volvo</option>
            <option value="saab">Saab</option>
            <option value="opel">Opel</option>
            <option value="audi">Audi</option>
        </select>
    </body>
</html> 
```

有什么方法可以像往常一样使选择框下方的选项或 IE10 有任何 hack？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T12:58:12.110

这是 Internet Explorer 10 中此控件的默认行为。根据列表中的项目数量和屏幕大小，其他浏览器也会以不同方式显示菜单 - 尽管我认为 IE10 是唯一可以平衡的浏览器打开下拉列表时选择元素上方和下方的项目数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:50:39.067

用于 `<select size="1">`强制单行可见。这不是 IE10 特定的 hack，但可以全面发挥作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:22:08.823

IE10 中新行为的优点之一是它使触摸交互更加容易。此外，它与 Windows 其余部分的行为方式一致。目前没有办法改变这种行为。我已将反馈传递给 IE 团队。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T00:53:03.010

我正在寻找在一个站点中解决相同的问题...我发现最新的 Telerik 控件在 IE10 中“正确”或更正确地“以 IE9 方式”工作 .. :-)

我没有使用过这个最新版本，也没有为 Telerik 工作，所以如果它让你感到痛苦，请不要射击信使..

[http://demos.telerik.com/aspnet-ajax/dropdownlist/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/dropdownlist/examples/overview/defaultcs.aspx)

# c# - 使用 BINARY_CHECKSUM 是保持两个数据库同步的好方法吗？

> ID：14157122
> 
> 赞同：0
> 
> 时间：2013-01-04T12:20:58.103
> 
> 标签：c#, sql, sql-server, tsql

我必须使用一个数据库来跟踪网络上某些事件的实例。我希望能够将自己的副本保存在其他地方的另一个数据库中。

我遇到的问题是与更新保持同步。如果数据库 AI 上的记录发生更改，则希望使用更改更新数据库 B。很简单，但数据库 A 没有任何形式的修改时间戳字段，我根本无法更改数据库（甚至不能添加触发器）。我正在编写一个 C# 应用程序，它将每小时进行一次同步。（这对我的要求是可以接受的，数据不必一直都是新鲜的）。

我的问题是这样的：

如果我使用 BINARY_CHECKSUM，我大概可以在其他地方（内存/XML/其他）保留预期值的列表，然后定期检查它是否不同。如果它不同，我可以在代码中手动同步该行。

这是一个好主意吗？是否存在与 BINARY_CHECKSUM 相关的大量开销？有没有更好的方法来检测我无法更改的行的更改？

**编辑**：我完全了解 SQL 复制，但是我应该提到这两个数据库不在同一个网络上，它们之间的接口是通过 C# 访问的 Web 服务完成的。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:43:56.080

编辑：似乎有问题的表甚至没有 PK 我不会再考虑 BINARY_CHECKSUM 了。

我认为您必须在客户端代码中使用更好的函数（如 SHA256 甚至更高）来计算哈希。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T15:44:18.107

将此发布在对 Jobo 的[回答](https://stackoverflow.com/a/14157430/15498)的评论中：

```
declare @t table (
    ColA int not null,
    ColB int not null,
    ID int IDENTITY(1,1) not null primary key
)
insert into @t values (1,0)
select BINARY_CHECKSUM(*) from @t

update @t set ColA = 0,ColB = 16 where ID = 1
select BINARY_CHECKSUM(*) from @t 
```

结果：

```
-----------
257

-----------
257 
```

所以不，我不建议将`BINARY_CHECKSUM`其作为保持数据库同步的方法。

请记住，任何形式的散列都是确定两个输入肯定不同（如果散列的结果不同）的好方法，但如果结果相同，您通常必须检查所有特定值以确定是否输入实际上是相同的，或者只是具有相同的哈希值。

例外情况是，如果您使用的是足够长的平衡散列函数，那么冲突的可能性很小，以至于您一生都不会看到。`int`，在 32 位，不够长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:59:44.383

你甚至不能改变目标数据库？

如果任何 PK 是一个身份，那么您还需要映射 PK。

如果 PK 是数据，那么如果 PK 发生更改，您知道发生了更改，但是您将如何知道它映射到哪一行？

现在在评论中，我们发现多个没有 PK 和同步。

没有 PK，就没有“使用更改更新数据库 B”。
充其量您可以插入任何不匹配的行。
您不知道它是新行还是编辑行。
对于任何散列，您都有可能发生碰撞而错过一行。
如果您期望每小时同步，希望您没有太多行。

# linq - 使用 LINQ 和嵌套列表中的键创建字典

> ID：14157127
> 
> 赞同：0
> 
> 时间：2013-01-04T12:21:11.070
> 
> 标签：linq

我的代码如下所示：

```
class A {
public string Name {get;set;}
public IList<string> Keywords {get;set;}
} 
```

...

```
IList<A> a = new List<A>{
        new A{Name = "a1", Keywords = new List<string>{"k1", "k2"}},
        new A{Name = "a2", Keywords = new List<string>{"k1", "k3"}},
        new A{Name = "a3", Keywords = new List<string>{"k3", "k4"}},
        new A{Name = "a4", Keywords = new List<string>{"k1", "k3", "k4"}}
    }; 
```

有什么方法可以使用 LINQ 以以下形式创建字典：

```
{"k1", List<A> {a1, a2, a4}} 
{"k2", List<A> {a1}}
{"k3", List<A> {a2, a3, a4}}
{"k4", List<A> {a3, a4}} 
```

基本上将对象映射到关键字。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:27:41.637

那应该这样做：

```
var keywordsAndNames = a.SelectMany(anA => anA.Keywords.Select(kw => 
                           new { KeyWord = kw, Name = anA.Name }));
var lookup = keywordsAndNames.ToLookup(entry => entry.KeyWord, entry => entry.Name); 
```

请注意，此代码创建的是查找而不是字典，因为每个键都有多个名称。

`lookup["k1"]`例如，返回`IEnumerable<string>`产生的“a1”、“a2”和“a4”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:28:31.130

就像是

```
var dict = a
    .SelectMany(myA =>
        myA.Keywords.Select(kw => new { Name = myA.Name, Keyword = kw }))
    .GroupBy(pair => pair.Keyword)
    .ToDictionary(g => g.Key, g => g.Select(pair => pair.Name).ToList()); 
```

应该这样做。

# jsf - 如何在 JS 中处理 commandButton 的操作引发的错误消息

> ID：14157128
> 
> 赞同：2
> 
> 时间：2013-01-04T12:21:12.963
> 
> 标签：jsf, jsf-2, primefaces, facelets

在 JSF 2.1 wep 应用程序中，我有一列包含命令按钮的数据表。commandButton 触发的动作可能会引发错误。**如果没有抛出错误，我想打开一个对话框，或者在另一种情况下打开一个包含错误消息的框**。

**JSF**

```
<h:form>
    <p:dataTable var="foo" value="#{myBean.foos}" >
        <p:column>#{foo.id}</p:column>
        <p:column>
            <p:commandButton title="Action" action="#{myBean.action()}" onComplete="handleResult(xhr, status, args)" >
                <f:setPropertyActionListener value="#{foo}" target="#{myBean.selectedFoo}" />
            </p:commandButton>
        </p:column>
    </p:dataTable>
</h:form> 
```

**JavaScript**

```
function handleRequest(xhr, status, args) {
    if (!args.success) {
        displayBox(args.errorMsg);
    } else {
        displayDialog();
    }
} 
```

**豆豆**

```
@ManagedBean
@ViewScoped
public class MyBean {
    private List<Foo> foos;
    private Foo selectedFoo;

    public void action() {
        try {
            // business logic
        } catch (Exception ex) {
            RequestContext rContext = RequestContext.getCurrentInstance();
            rContext.addCallbackParam("success", false);
            rContext.addCallbackParam("errorMsg", ex.getMessage());
        }
    }
} 
```

我能想到的唯一解决方案是使用 PrimeFaces`RequestContext.callBackParam()`并编写一个 JS 函数来读取它并决定打开什么。

有没有更流畅的方法？如果可能的话，我会考虑利用验证的概念，但我找不到如何在 JS 中拦截错误的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:02:44.920

规范的方法是只添加一个全局面孔消息（因此，带有`null`客户端 ID）。

```
public void action() {
    try {
        // business logic
    } catch (Exception ex) {
        context.validationFailed();
        context.addMessage(null, new FacesMessage(
            FacesMessage.SEVERITY_ERROR, ex.getMessage(), null));
    }
} 
```

*（调用`FacesContext#validationFailed()`将导致`#{facesContext.validationFailed}`在 EL 中进行评估`true`；这通常在 的情况下设置`ValidatorException`）*

然后，要显示一个仅用于全局消息的框，只需使用`<p:messages globalOnly="true">`.

```
<p:messages globalOnly="true" autoUpdate="true" /> 
```

并显示一个关于成功结果的对话框，让它在执行[成功](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29) [回](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isPostback%28%29)发时呈现：

```
<p:outputPanel autoUpdate="true">
    <p:dialog visible="true" rendered="#{facesContext.postback and not facesContext.validationFailed}">
        A successful postback is performed!
    </p:dialog>
</p:outputPanel> 
```

如有必要`autoUpdate="true"`，将一个或两个组件替换为 ，`update="messagesId dialogPanelId"`以便仅在按下特定按钮时触发。

# c# - 以编程方式创建高质量的 ico 文件

> ID：14157134
> 
> 赞同：8
> 
> 时间：2013-01-04T12:21:22.767
> 
> 标签：c#, .net-4.0

我正在尝试在 C# 中以编程方式从 PNG 文件创建一个高质量的图标（意味着：[适用于 Win Vista/7/8](http://msdn.microsoft.com/en-us/library/aa511280.aspx "赢得 Vista/7/8")），以用作快捷方式图标。由于 Bitmap.GetHIcon() 函数不支持这些图标，并且我想避免外部依赖项或库，我目前正在使用我[在 SO 上](https://stackoverflow.com/a/11448060/368354%20%22%22)找到的稍微修改过的 ICO 编写器。我有工作代码，但在 Windows 显示这些图标的方式上遇到了一些故障。相关代码为：

```
// ImageFile contains the path to PNG file
public static String IcoFromImageFile(String ImageFile) {
    //...       
    Image iconfile = Image.FromFile(ImageFile);

    //Returns a correctly resized Bitmap        
    Bitmap bm = ResizeImage(256,256,iconfile);                
    SaveAsIcon(bm, NewIconFile);

    return NewIconFile;

}        

// From: https://stackoverflow.com/a/11448060/368354
public static void SaveAsIcon(Bitmap SourceBitmap, string FilePath) {
    FileStream FS = new FileStream(FilePath, FileMode.Create);
    // ICO header
    FS.WriteByte(0); FS.WriteByte(0);
    FS.WriteByte(1); FS.WriteByte(0);
    FS.WriteByte(1); FS.WriteByte(0);

    // Image size
    // Set to 0 for 256 px width/height
    FS.WriteByte(0);
    FS.WriteByte(0);
    // Palette
    FS.WriteByte(0);
    // Reserved
    FS.WriteByte(0);
    // Number of color planes
    FS.WriteByte(1); FS.WriteByte(0);
    // Bits per pixel
    FS.WriteByte(32); FS.WriteByte(0);

    // Data size, will be written after the data
    FS.WriteByte(0);
    FS.WriteByte(0);
    FS.WriteByte(0);
    FS.WriteByte(0);

    // Offset to image data, fixed at 22
    FS.WriteByte(22);
    FS.WriteByte(0);
    FS.WriteByte(0);
    FS.WriteByte(0);

    // Writing actual data
    SourceBitmap.Save(FS, System.Drawing.Imaging.ImageFormat.Png);

    // Getting data length (file length minus header)
    long Len = FS.Length - 22;

    // Write it in the correct place
    FS.Seek(14, SeekOrigin.Begin);
    FS.WriteByte((byte)Len);
    FS.WriteByte((byte)(Len >> 8));

    FS.Close();
} 
```

这可以编译并且可以工作，但是有一个问题。Windows 不正确地显示快捷方式上的图标。我也以编程方式执行此操作，但即使我手动执行此操作（通过文件属性、更改图标）也会发生。问题是图标被切断（图像本身正确显示）。这取决于图像，但通常只显示实际图标的 20% 左右。如果我在 XNView 之类的图像查看器中打开文件，它会完全正确地显示，但 MS Paint 不会。我制作了这个屏幕截图，以及一个正确显示的图标以供比较

![在此处输入图像描述](../Images/1887d696f32e379cbc1318dbf9327a38.png)

我怀疑错误在于 ICO 保存方法，但即使在将它们与 Hex 编辑器中正常显示的 ICO 进行比较之后，标题也会正确写入，但 PNG 图像部分本身似乎不同。有人有想法吗？我也欢迎更好、更简单的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T12:25:49.223

您的 ico 文件设置为仅以 16 位精度保存嵌入位图的长度，但 PNG 文件太大（大于 65535 字节），因此长度记录溢出。

即以下几行不完整：

```
// Write it in the correct place
FS.Seek(14, SeekOrigin.Begin);
FS.WriteByte((byte)Len);
FS.WriteByte((byte)(Len >> 8)); 
```

您可以添加这些行：

```
FS.WriteByte((byte)(Len >> 16));
FS.WriteByte((byte)(Len >> 24)); 
```

出于清洁和性能的考虑，我通常会避免所有这些单独的写入，而只使用带有字节数组参数的写入重载。此外，您可以考虑使用 Save-To-MemoryStream，然后对标头进行一次写入（现在可以使用 PNG 的字节长度）和一次写入来复制 PNG，而不是有点棘手的 Save-To-File 然后查找数据从内存流到文件。

您真正应该解决的另一点是**处置`IDisposable`资源**。即使你还不需要，因为你没有遇到任何问题，它总有一天会咬你，如果你有一个相当小的代码库和各种未处理的一次性用品，你将很难找到来源您的泄漏和/或僵局。一般来说：除非你真的无法避免，否则*永远不要*打电话- 而是将你包裹在一个块中。同样，并且是一次性的并分配本机资源，尽管至少您不会遇到任何锁定问题（AFAIK - 但安全总比抱歉好）。`Close``FileStream``using``Image``Bitmap`

# z3 - z3 可以读取 MathSAT 的输出文件作为其输入文件吗？

> ID：14157140
> 
> 赞同：0
> 
> 时间：2013-01-04T12:22:04.163
> 
> 标签：z3, smt, mathsat

我需要使用 z3 和 mathsat 进行一些实验。我已经完成了 mathsat 的实验。为 mathsat 编写输入文件需要很多时间，我不想再次为 z3 编写输入文件。Mathsat 支持从“msat”文件生成“smt”文件。转换命令如下图：

```
/home/xdb/mathsat/mathsat-4.2.17-linux-x86_64/bin/mathsat -input=msat -output=smt -logic=QF_LRA /home/xdb/satcase/sample/sample.msat>>/home/xdb/satcase/sample/sample.smt 
```

我的问题是z3可以识别这个'smt'文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:38:49.333

Z3 可以读取 SMT 1.0 和 2.0 文件。格式在[http://www.smtlib.org](http://www.smtlib.org)中定义。如果 MathSAT 生成的公式符合标准，那么您应该没有问题。您是否尝试过使用 Z3 读取生成的文件？如果它不起作用，Z3 产生的错误信息是什么？

# magento-1.7 - Magento 产品调整图片大小问题

> ID：14157141
> 
> 赞同：3
> 
> 时间：2013-01-04T12:22:06.100
> 
> 标签：magento-1.7, magento

由于 magento 的调整图像大小，我的服务器变得太慢了。我正在使用以下代码显示图像

```
echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(250,250) 
```

这是加载实际图像（如果我上传像 2mb,3mb 这样的 havy 图像），如果我不使用调整大小功能，但如果我使用此功能，那么它总是将其调整为 250x250，这使得服务器额外的调整图像大小的工作可以在上传图片我只是想避免这个调整大小的过程，所以每次图片不会调整大小时，我们在创建产品时在 magento 中上传时应该调整它的大小。请给我解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:33:40.340

只是跳过调整大小。一切都已完成，`__toString()`因此如果您删除 resize() 则不会调整大小并且文件只会复制到缓存中。

*编辑* 在后端上传正确的小图像很重要。您可以上传多张图片。并在后端设置三个（在标准安装图像中，small_image 和 thumbnail）。这些图像可以通过访问

```
$this->helper('catalog/image')->init($_product, 'IMAGE_TYPE') 
```

因此，如果您上传 250x250 像素的图像，将其标记为缩略图，然后您可以删除调整大小，一切正常。

你能做的——但不要问我怎么做——就是将调整大小的图像放入缓存中。但是有很多问题，插入它们后，例如刷新图像缓存->所有图像都被删除

# c++ - 下面的 QTcpSocket 延迟如何解释？

> ID：14157143
> 
> 赞同：1
> 
> 时间：2013-01-04T12:22:14.550
> 
> 标签：c++, qt

我有两个进程通过 TCP 套接字相互通信。进程 A 向进程 B 发送请求并等待响应。进程 B 处理请求，并发送响应。对于某些请求，不需要将响应发送回进程 A。

假设进程 A 首先发送一个不需要响应的请求 X，然后立即发送一个需要响应的请求 Y，当 A 在其套接字上等待数据时观察到明显的小延迟（约 0.04 秒）。这是控制流程：

```
A sends X
A sends Y
B handles X
B handles Y and writes response
(small delay in waitForReadyRead() in A of ~0.04s)
A receives response for Y 
```

当我也为 X 引入响应并让 A 等待该响应时，延迟消失了，控制流程如下所示：

```
A sends X
B handles X and writes response
A receives response for X
A sends Y
B handles Y and writes response
A receives response for Y 
```

这显然是某种同步问题，但我无法解释。谁能解释如果 B 没有为 X 发送响应而引起的小延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:28:47.830

这是答案：

[http://en.wikipedia.org/wiki/Nagle_algorithm](http://en.wikipedia.org/wiki/Nagle_algorithm)

您的数据已排队并没有发送出去。您需要设置一个套接字选项 (TCP_NODELAY) 来防止这种情况，或者使用其他一些传输协议，如 UDP。您可以在“man tcp”中获得更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:33:49.057

这可能是由[Naggle 算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)引起的。

# java - 如何将 ActionListeners 添加到模态 JDialog？

> ID：14157147
> 
> 赞同：0
> 
> 时间：2013-01-04T12:22:31.433
> 
> 标签：java, swing, jtable, modal-dialog, actionlistener

我想创建一个`JDialog`响应鼠标和键操作的。该对话框包含一个 jTable，我希望他在其中选择一条记录。他应该能够通过双击或按一个键（例如“2”）来选择它。

所以我从这个开始：

```
public showDialog(TableModel model) {
    super(new JFrame(), "Please select a record..."); 
    table = new JTable(model);

    //add JTable with ScrollPane
    JScrollPane scrollPane = new JScrollPane();
    scrollPane.setPreferredSize(new Dimension(800, Math.min(table.getPreferredSize().height+60, 800)));
    scrollPane.getViewport().add(table);
    add(scrollPane);

    //display
    setAlwaysOnTop(true);
    toFront();
    pack();
    setVisible(true);

    //mouse
    table.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            System.out.println("clicked");
        }
    });

    //keys
    table.addKeyListener(new KeyAdapter() {

        @Override
        public void keyTyped(java.awt.event.KeyEvent evt) {}

        @Override
        public void keyReleased(java.awt.event.KeyEvent evt) {}

        @Override
        public void keyPressed(java.awt.event.KeyEvent evt) {
            System.out.println(evt.getKeyChar() + " pressed");
        }
    });
} 
```

这完美无缺。

但是，如果我对语句做同样的事情`setModal(true);`，听众就会停止工作。

如何在不丢失听众功能的情况下制作 JDialog 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:58:37.710

简单的解决方法：当JDialog是modal时，setVisible()阻塞当前线程，即Dialog的Constructor。因此，永远不会添加侦听器（实际上仅在关闭对话框时）。因此没有事件。

解决方案：设置'setVisible(true);' 到 CTOR 结束

顺便说一句，您不应该在 CTOR 中进行模态锁定，而应使用像 'void showTheDialog();' 这样的额外方法 更好。如果你从一开始就这样做了，听众就会在那里，一切都会奏效;-) 编辑：或者使用类似工厂方法的东西，那就更好了。

顺便说一句，请遵守命名约定，我花了 10 秒钟才弄清楚使用 'public showDialog(TableModel model) {' 你没有忘记方法返回类型，但这实际上是 CTOR 本身:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:03:32.423

*   删除`MouseListener`对您的目标没有用

*   删除`KeyListener`对您的目标没有用

*   将正确的[ListSelectionMode](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)设置为`JTable`

*   将[ListSelectionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)添加到`JTable`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T12:47:55.743

我认为这可能会导致问题：

```
super(new JFrame(), "Please select a record..."); 
```

你为什么要创建一个新的`JFrame`，你必须指定一个现有的。

顺便说一句，您应该调用`super`扩展类的构造函数`JDialog`，而不是其他方法。

# c# - 将 csv 读取到网格的更快方法

> ID：14157153
> 
> 赞同：1
> 
> 时间：2013-01-04T12:22:50.730
> 
> 标签：c#, .net, winforms, csv, datagridview

我在 Windows Forms .NET 3.5 中有以下内容

它适用于记录少于 10,000 条记录的 csv，但对于超过 30,000 条记录的记录则较慢。输入 csv 文件可以包含 1 - 1,00,000 条记录之间的任何记录

当前使用的代码：

```
/// <summary>
        /// This will import file to the collection object
        /// </summary>
        private bool ImportFile()
        {
            try
            {

                String fName;
                String textLine = string.Empty;
                String[] splitLine;

                // clear the grid view

                accountsDataGridView.Rows.Clear();

                fName = openFileDialog1.FileName;

                if (System.IO.File.Exists(fName))
                {
                    System.IO.StreamReader objReader = new System.IO.StreamReader(fName);

                    do
                    {
                        textLine = objReader.ReadLine();
                        if (textLine != "")
                        {
                            splitLine = textLine.Split(',');
                            if (splitLine[0] != "" || splitLine[1] != "")
                            {
                                accountsDataGridView.Rows.Add(splitLine);
                            }
                        }
                    } while (objReader.Peek() != -1);
                }
                return true;
            }
            catch (Exception ex)
            {
                if (ex.Message.Contains("The process cannot access the file"))
                {
                    MessageBox.Show("The file you are importing is open.", "Import Account", MessageBoxButtons.OK, MessageBoxIcon.Warning);
                }
                else
                {
                    MessageBox.Show(ex.Message);
                }

                return false;
            }

        } 
```

样本输入文件：
18906,Y
18908,Y
18909,Y
18910,Y
18912,N
18913,N

需要一些关于优化此代码以在网格中快速读取和查看的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T12:30:41.387

```
List<string[]> rows = File.ReadAllLines("Path").Select(x => x.Split(',')).ToList();
DataTable dt = new DataTable();
dt.Columns.Add("1");
dt.Columns.Add("2");
rows.ForEach(x => {
  dt.Rows.Add(x);
});
dgv.DataSource = dt; 
```

试试看，我怀疑你在数据网格中有某种形式的列名，现在我只是将它们设为 1 和 2。

要根据您的原始代码进行过滤，请使用：

```
List<string[]> rows = File.ReadAllines("Path").Select(x => x.Split(',')).Where(x => x[0] != "" && x[1] != "").ToList(); 
```

从`DataGridView`

```
 dt.Columns.AddRange(dgv.Columns.Cast<DataGridViewColumn>().Select(x => new DataColumn(x.Name)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:36:14.037

与其将数据直接放入网格，不如查看[`VirtualMode`.`DataGridView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.virtualmode.aspx)

在您的代码中，您一次做两件事（读取文件，填充网格），这会导致您的 gui 冻结。相反，您应该将网格置于虚拟模式并将 a 中的文件读`BackgroundWorker`入包含网格数据的列表中。后台工作人员可以在每行读取后更新网格的虚拟大小，这允许在加载网格时已经看到数据。通过使用这种方法，您将获得一个平滑的工作网格。

下面您将找到一个示例，该示例只需要填写到使用 a 的表单中，该表单`DataGridView`具有两个文本列 a`BackgroundWorker`和 a `Button`：

```
public partial class FormDemo : Form
{
    private List<Element> _Elements;

    public FormDemo()
    {
        InitializeComponent();
        _Elements = new List<Element>();

        dataGridView.AllowUserToAddRows = false;
        dataGridView.AllowUserToDeleteRows = false;
        dataGridView.ReadOnly = true;
        dataGridView.VirtualMode = true;
        dataGridView.CellValueNeeded += OnDataGridViewCellValueNeeded;

        backgroundWorker.WorkerReportsProgress = true;
        backgroundWorker.DoWork += OnBackgroundWorkerDoWork;
        backgroundWorker.ProgressChanged += OnBackgroundWorkerProgressChanged;
        backgroundWorker.RunWorkerCompleted += OnBackgroundWorkerRunWorkerCompleted;
    }

    private void OnBackgroundWorkerDoWork(object sender, DoWorkEventArgs e)
    {
        var filename = (string)e.Argument;

        using (var reader = new StreamReader(filename))
        {
            string line = null;

            while ((line = reader.ReadLine()) != null)
            {
                var parts = line.Split(',');

                if (parts.Length >= 2)
                {
                    var element = new Element() { Number = parts[0], Available = parts[1] };
                    _Elements.Add(element);
                }

                if (_Elements.Count % 100 == 0)
                {
                    backgroundWorker.ReportProgress(0);
                }
            }
        }
    }

    private void OnBackgroundWorkerProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        dataGridView.RowCount = _Elements.Count;
    }

    private void OnBackgroundWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        dataGridView.RowCount = _Elements.Count;
        button.Enabled = true;
    }

    private void OnButtonLoadClick(object sender, System.EventArgs e)
    {
        if (!backgroundWorker.IsBusy
            && DialogResult.OK == openFileDialog.ShowDialog())
        {
            button.Enabled = false;
            backgroundWorker.RunWorkerAsync(openFileDialog.FileName);
        }
    }

    private void OnDataGridViewCellValueNeeded(object sender, DataGridViewCellValueEventArgs e)
    {
        var element = _Elements[e.RowIndex];

        switch (e.ColumnIndex)
        {
            case 0:
                e.Value = element.Number;
                break;

            case 1:
                e.Value = element.Available;
                break;
        }
    }

    private class Element
    {
        public string Available { get; set; }

        public string Number { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T12:52:32.727

在速度方面没有太多需要优化的地方，但以下内容更具可读性。如果太慢，可能不是*读取*文件的方法，而是您的 WinForm 需要显示 >30k 记录。

```
 accountsDataGridView.Rows.Clear();
    using (FileStream file = new FileStream(openFileDialog1.FileName, FileMode.Open, FileAccess.Read, FileShare.Read, 4096))
    using (StreamReader reader = new StreamReader(file))
    {
        while (!reader.EndOfStream)
        {
            var fields = reader.ReadLine().Split(',');
            if (fields.Length == 2 && (fields[0] != "" || fields[1] != ""))
            {
                accountsDataGridView.Rows.Add(fields);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T12:55:26.497

您可以尝试使用[SuspendLayout()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)和[ResumeLayout()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resumelayout.aspx)方法。

[来自 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx) “SuspendLayout 和 ResumeLayout 方法串联使用以在您调整控件的多个属性时抑制多个 Layout 事件。例如，您通常会调用 SuspendLayout 方法，然后设置 Size、Location、Anchor 或 Dock 属性控件，然后调用 ResumeLayout 方法使更改生效。”

```
accountsDataGridView.SuspendLayout();
accountsDataGridView.Rows.Clear();

// .....
// in the end after you finished populating your grid call

accountsDataGridView.ResumeLayout(); 
```

# java - 滑块与进度条 JavaFX 的混合体

> ID：14157161
> 
> 赞同：6
> 
> 时间：2013-01-04T12:23:12.867
> 
> 标签：java, user-interface, javafx, desktop

我想像在滑块上一样处理对 ProgressBar 的单击。并学习百分比的轨道。我会使用滑块而不是进度条，但在拇指之前它没有突出显示的轨道。

我需要在播放歌曲的音乐播放器中创建类似进度的东西，以及通过点击进度来寻找的可能性。

有没有人有提示我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-04T14:44:11.477

这是另一种方法。滑块和进度条的真正混合体:)。认识 SlidoProgressBar！

```
public class SlidoProgressBarDemo extends Application {

    @Override
    public void start(Stage stage) {
        Group root = new Group();
        Scene scene = new Scene(root);
        scene.getStylesheets().add(this.getClass().getResource("style.css").toExternalForm());
        stage.setScene(scene);
        stage.setTitle("Progress Controls");

        double sliderWidth = 200;

        final Slider slider = new Slider();
        slider.setMin(0);
        slider.setMax(50);
        slider.setMinWidth(sliderWidth);
        slider.setMaxWidth(sliderWidth);

        final ProgressBar pb = new ProgressBar(0);
        pb.setMinWidth(sliderWidth);
        pb.setMaxWidth(sliderWidth);

        final ProgressIndicator pi = new ProgressIndicator(0);

        slider.valueProperty().addListener(new ChangeListener<Number>() {
            public void changed(ObservableValue<? extends Number> ov,
                    Number old_val, Number new_val) {
                pb.setProgress(new_val.doubleValue() / 50);
                pi.setProgress(new_val.doubleValue() / 50);
            }
        });

        StackPane pane = new StackPane();

        pane.getChildren().addAll(pb, slider);

        final HBox hb = new HBox();
        hb.setSpacing(5);
        hb.setAlignment(Pos.CENTER);
        hb.getChildren().addAll(pane, pi);

        scene.setRoot(hb);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

使用 style.css：

```
.slider .track {
    -fx-background-color:null;  /* Hide the track */
    -fx-background-insets: 1 0 -1 0, 0, 1;
    -fx-background-radius: 2.5, 2.5, 1.5;
    -fx-padding: 0.208333em; /* 2.5 */
} 
```

基本逻辑是将滑块和进度放入堆栈窗格。给它们相同的宽度。绑定它们的进度值。隐藏滑块的轨迹。
输出：
![在此处输入图像描述](../Images/9596e45a202ffa366149541f9cad2282.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:12:23.050

我用代码解决了这个问题：

```
progress.setOnMouseClicked(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent event) {
            if (event.getButton() == MouseButton.PRIMARY){
                Bounds b1 = progress.getLayoutBounds();
                double mouseX = event.getSceneX();
                double percent = (((b1.getMinX() + mouseX ) * 100) / b1.getMaxX());
                //correcting a percent, i don't know when it need
                percent -= 2;
                progress.setProgress((percent) / 100);
                //do something with progress in percent
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T14:56:06.237

只是一个 tornadoFX 示例：

```
package bj

import javafx.application.Application
import javafx.geometry.Insets
import javafx.scene.control.ProgressBar
import javafx.scene.control.Slider
import javafx.scene.paint.Color
import tornadofx.*

/**
* Created by BaiJiFeiLong@gmail.com at 18-12-13 下午9:28
*/

class MainView : View() {

    private lateinit var progressBar: ProgressBar
    private lateinit var slider: Slider

    override val root = vbox {
        stackpane {
            padding = Insets(100.0)
            progressbar(initialValue = .0) {
                progressBar = this
                maxWidth = Double.MAX_VALUE
            }
            slider(max = 1, value = .0) {
                slider = this
            }
        }
    }

    init {
        progressBar.progressProperty().bind(slider.valueProperty())
        progressBar.paddingLeftProperty.bind(progressBar.heightProperty().divide(2))
        progressBar.paddingRightProperty.bind(progressBar.heightProperty().divide(2))
    }
}

class MainStylesheet : Stylesheet() {
    init {
        slider {
            track {
                backgroundColor = MultiValue(arrayOf(Color.TRANSPARENT))
            }
        }
    }

}

class App : tornadofx.App(MainView::class, MainStylesheet::class)

fun main(args: Array<String>) {
    Application.launch(App::class.java, *args)
} 
```

# perl - 崇高的语法突出显示 perl qw、qq、q 不能完全工作

> ID：14157165
> 
> 赞同：1
> 
> 时间：2013-01-04T12:23:27.970
> 
> 标签：perl, newline, sublimetext2, color-scheme

从 1 周开始，我使用 sublime。我很高兴。但我有一点问题。我用 sublime 写 perl。

这是问题所在：

![在此处输入图像描述](../Images/cdabc225e98617b3a8c7e14687b318d7.png)

Sublime 无法识别`'some string`被引用的内容，`$test_scalar`并且它之后的所有内容都像字符串一样。当我这样输入时：

![在此处输入图像描述](../Images/cca794aa099127121bdd80a6c4c606c8.png) 没有问题。

我尝试使用该`Perl.tmLanguage`文件，但我不明白。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T15:36:49.377

Perl 是为数不多的使用这种结构来引用字符串的编程语言之一，许多程序编辑器根本不理解它。

想象一下，你正在写一个语法高亮，你必须明白所有这些都是一样的：

```
my $string = "this is my string";
my $string = qq(This is my string);
my $string = qq/This is my string/;
my $string = qq@This is my string@;
my $string = qq
    (This is my string); 
```

您的语法荧光笔必须了解`q`,`qq`和`qx`是引用选项，并且它们后面的字符（在可能的空格之后）是正在引用的字符。哦，如果字符是 a `(`、 a`{`或 a `[`，则结束引号是 a `)`、`}`或 a `]`。而且，这可以在多条线上。而且，对于 Perl，你真的只需要这个。

我知道[vim](http://www.vim.org)可以处理 qq 引用问题，但是我尝试过的许多其他程序编辑器都失败了。甚至 Stackoverflow 的语法高亮（Google 的美化）也失败了。

如果您使用的是 Windows，请尝试使用[Notepad++](http://notepad-plus-plus.org)或[Textpad 。](http://www.textpad.com)或者，尝试使用 EPIC 编辑器的 Eclipse。我相信一个也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:33:01.240

因为 Perl5 不能被静态解析，编辑器不得不对语法进行猜测。在这种情况下他们能做得更好吗？可能，但请记住，不可能完美地做到这一点。

无论如何，最好的办法是与您的编辑器的 Perl 语法高亮插件的作者取得联系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T15:30:18.857

[Emacs 的cperl-mode.el](https://github.com/jrockway/cperl-mode)完成了这项工作：

![Emacs 截图](../Images/e67d5135149ecf21c72a617384be730b.png)

也许您可以查看它的源代码并尝试在 Sublime 中使用相同的规则，或者最后将其指向插件作者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:53:52.677

正如你所说，没有问题，也没有语法错误。这是 sublime 或 vim 编辑器的正常行为。当您继续在下一行写 qq 运算符时，突出显示字符串在任一编辑器上都不起作用。

# iphone - GKTurnBasedMatch matchData 的最大大小

> ID：14157171
> 
> 赞同：3
> 
> 时间：2013-01-04T12:23:44.857
> 
> 标签：iphone, objective-c, ios, game-center, gamekit

我一直在寻找一个明确的答案，但我得到了一些不一致的答案。Apple 文档声明 64k 字节。但是，在网上我发现多个来源说 4k 字节是最大值。这是 iOS 5 和 iOS 6 之间的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:00:30.603

原来是 4KB，现在是 64KB。

来源： [https ://developer.apple.com/news/index.php?id=02012012a](https://developer.apple.com/news/index.php?id=02012012a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T21:01:27.310

确定与否，但我认为以前的限制是 4 kB，现在该限制已提高到 64k。不过，也不是 100% 确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T13:56:25.773

`matchDataMaximumSize`有一个名为的只读属性： `GKTurnBasedMatch`实例将返回“ `[Returns the limit the Game Center servers place on the size of the match data. (read-only)][1]`”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T13:15:51.993

```
According to documentation following is data size limit
1\. Limit the size of unreliable messages to 1000 bytes or smaller in size.
2\. Limit the size of reliable messages to 87 kilobytes or smaller in size.

[ http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Matchmaking/Matchmaking.html ] 
```

# android - Android 构建一个加载许多图像的新闻应用程序，例如 Pulse、Google Currents

> ID：14157178
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:24:30.243
> 
> 标签：android, out-of-memory, android-image, pulse

我正在开发一个新闻应用程序，它可以获取大量带有图像的新闻文章，就像 Pulse 和 Google currents -> 许多类别包含非常多的带有图像的新闻文章。如何在不遇到内存不足错误的情况下实现这一目标。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T13:02:31.487

[Android 文档](http://developer.android.com/training/displaying-bitmaps/index.html)很好地解释了如何处理这个问题。

# java - 使用 ArrayList 在 Java 中实现同步队列

> ID：14157179
> 
> 赞同：1
> 
> 时间：2013-01-04T12:24:31.330
> 
> 标签：java, arraylist, synchronization, queue

我一直在做一个需要同步队列的项目，因为我的程序是多线程的，线程可以访问这个队列。我使用 arraylist 来做到这一点，但我似乎有一些问题并且线程陷入僵局。我不知道队列是否是原因，但我只是想检查一下：

```
public class URLQueue {
    private ArrayList<URL> urls;

    public URLQueue() {
        urls = new ArrayList<URL>();
    }

    public synchronized URL remove() throws InterruptedException {
        while (urls.isEmpty())
            wait();
        URL r = urls.remove(0);
        notifyAll();
        return r;
    }

    public synchronized void add(URL newURL) throws InterruptedException {
        urls.add(newURL);
        notifyAll();
    }

    public int getSize() {
        return urls.size();
    }
} 
```

编辑：即使在使用 LinkedBlockingQueue 时，我也会陷入与以前相同的循环中。我认为这是因为有一个线程正在等待队列被填充，但它从来没有因为其他功能已经完成运行......任何想法？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:38:36.377

最好在`LinkedBlockingQueue`这里使用，因为它是为此目的而设计的。在尝试删除元素时，它会一直等到某个元素可用。

[链接阻塞队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html#take%28%29)

它提供了一种`take()`方法

> 检索并删除此队列的头部，如有必要，等待元素可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:32:48.573

在您的代码中，`notifyAll()`不会抛出 InterruptedException 因此您应该删除`throws`from`add()`

该`remove()`方法不需要，`notifyAll()`因为它的操作不应该唤醒其他线程。

该`getSize()`方法应该是同步的。

否则，您的代码没有机会死锁，因为您需要*两个*锁来创建死锁。

# programming-languages - 为什么布尔变量的默认值往往是假的？

> ID：14157180
> 
> 赞同：5
> 
> 时间：2013-01-04T12:24:33.563
> 
> 标签：programming-languages, theory

据我所知，C#、VB、Java 和 JavaScript 中布尔变量的默认值是`false`（或者在 JavaScript 的情况下“表现得像假”更准确），我相信还有很多其他的属于这种情况的语言。

我想知道这是为什么？为什么语言设计者选择`false`默认值？对于数值，我可以看到零是一个合乎逻辑的选择，但我不认为它`false`比`true`.

顺便说一句，是否有任何语言默认为真？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:38:49.453

从语义的角度来看，布尔值表示一个条件或状态。许多语言假设，如果没有初始化，条件不满足（或者这种状态是空的，或者其他什么）。它就像一面旗帜。反过来想想。如果布尔值的默认值为 true，那么该语言的语义会告诉您最初满足任何条件，这是不合逻辑的。

从实际的角度来看，编程语言通常在内部将布尔值存储为位（0 表示假，1 表示真），因此在这种情况下，数字类型的相同规则适用于布尔值。

Java 的布尔实例变量的默认值始终为 false，但这不适用于局部变量，您需要对其进行初始化。

# android - 低 sdk 中的 ActionBarSherlock 高度属性

> ID：14157182
> 
> 赞同：2
> 
> 时间：2013-01-04T12:24:43.113
> 
> 标签：android, themes, height, actionbarsherlock

我对这个问题有点疯狂。我创建了大量主题，并阅读了几乎所有关于这个主题的主题。

上次我用动作栏样式生成器创建了一个主题并导入到我的项目中，但也没有运气。问题是在低于 4.0 的旧 sdk 版本中，我似乎无法定义我的 sherlock 操作栏大小。

我有这个：

```
<style name="final_solid_ActionBar" parent="@style/Widget.Sherlock.Light.ActionBar.Solid">
    <item name="background">@drawable/ab_solid_final</item>
    <item name="height">48dip</item>
    <item name="backgroundStacked">@drawable/ab_stacked_solid_final</item>
    <item name="backgroundSplit">@drawable/ab_bottom_solid_final</item>
    <item name="progressBarStyle">@style/final_ProgressBar</item>

    <item name="android:height">48dip</item>
    <item name="android:background">@drawable/ab_solid_final</item>
    <item name="android:backgroundStacked">@drawable/ab_stacked_solid_final</item>
    <item name="android:backgroundSplit">@drawable/ab_bottom_solid_final</item>
    <item name="android:progressBarStyle">@style/final_ProgressBar</item>
</style> 
```

但一直让我遇到几个主题配置错误，例如样式包含输入错误的键，并且条形大小没有任何变化。请任何人都可以帮助我，我快疯了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T13:14:12.230

要更改操作栏的大小，请`android:actionBarSize`在主题中设置项目：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="actionBarSize">48dip</item>
    <item name="android:actionBarSize">48dip</item>
</style> 
```

请注意，纵向 (48dp)、横向 (40dp) 和 sw600dp (56dp) 配置的默认操作栏大小不同。

# php - cURL - 传输表单很好，但是无法从其他服务器获取变量

> ID：14157186
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:25:06.973
> 
> 标签：php, curl, cross-server

标题可能有点误导，但我不确定如何以其他方式表述它。

我正在使用以下脚本跨服务器发送变量：

```
<?php

     if($_POST) {
        $ch = curl_init("http://jecom.nl/bank/mods/jecom/jecom.php");
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, 
                    array('description' => $_POST['description'], 'amount' => $_POST['amount'], 'receiver'=> $_POST['receiver']));
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false); 
        // set to false if you want to see what redirect header was sent       
        // snippet 1
        //execute post
        $result = curl_exec($ch);

        //close connection
        curl_close($ch);
    }                           
?> 
```

这有效，我将变量`jecom.php`放在另一台服务器上。

这是接收页面：

```
<?php

require_once 'jecom_req.php'; //Basic requirements file

$receiver = ($_POST["receiver"]);
$amount = ($_POST["amount"]);
$description = ($_POST["description"]);
$sender = $_SESSION['username']; //their username.
$balance = get_funds($sender, $server);
?>

<h1>Confirm payment</h1>
<p>Please be carefull to confirm your payment to the other party. All transactions are logged to prevent fraud.</p>

<form name="confirmation" method="post" action="jecom_send.php">
<table width="200" border="1">
  <tr>
    <td>Your account name:</td>
    <td><?php echo $sender; ?></td>
  </tr>
  <tr>
    <td>Current Balance:</td>
    <td><?php echo $balance; ?></td>
  </tr>
</table>
<hr>
<table width="200" border="1">
  <tr>
    <td>Receiving party:</td>
    <td><?php echo $receiver; ?></td>
  </tr>
  <tr>
    <td>Description:</td>
    <td><?php echo $description; ?></td>
  </tr>
    <tr>
    <td>Amount:</td>
    <td><?php echo $amount; ?></td>
  </tr>
</table>
<hr>
<table width="500" border="1">
  <tr>
    <td align="center">I hereby confirm this information is correct and want to transfer the money.</td>
  </tr>
    <tr>
    <td align="center"><input name="Submit" type="submit" value="Submit"></td>
  </tr>
</table>
<input name="receiver" type="hidden" value="<?php echo $receiver; ?>" />
<input name="description" type="hidden" value="<?php echo $description; ?>" />
<input name="amount" type="hidden" value="<?php echo $amount; ?>" />
<input name="confirmation" type="hidden" value="http://jecom.nl/bank/mods/jecom/confirmation.php" />
</form> 
```

我从表单中获取值（如预期的那样）但不是`$sender`and `$balance`，当我按下提交时，它不会将它们发送到正确的页面，而是希望`jecom_find.php`在表单服务器上找到。现在这并不让我感到惊讶，我想到了跟随位置，但目前这不起作用（`openbase_dir`并且`safe_mode`仍然是一个）。是否有可能绕过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:35:36.333

如果它的跨服务器 $_SESSION 变量不会设置在第二个服务器上。所以它永远是空的，所以你永远不会得到余额作为你的电话

```
$balance = get_funds( NULL , $server); 
```

# c - 如何从 OpenSSL BIO 对象中获取对等地址

> ID：14157187
> 
> 赞同：1
> 
> 时间：2013-01-04T12:25:10.290
> 
> 标签：c, cryptography, openssl

我正在使用 OpenSSL 1.0.0 库对 TLS 服务器进行编程，因此我使用的是 BIO* 对象，而不是 SSL* 对象（我使用的是 IBM 文档：[第 1](http://www.ibm.com/developerworks/linux/library/l-openssl/index.html)部分、[第 2](http://www.ibm.com/developerworks/linux/library/l-openssl2/index.html)部分和[第 3 部分](http://www.ibm.com/developerworks/linux/library/l-openssl3/index.html)）。

要获得远程客户端的套接字，我运行以下代码：

```
BIO *new_client;

while(1)
{
    if (BIO_do_accept(socket) <= 0)
        { handle error }
    new_client = BIO_pop(socket);
    BIO_do_handshake(new_client);

    // fire a thread and do rest of communication
} 
```

这没有问题，我可以向客户端发送数据，客户端可以响应。如果我不向客户端提供我的自定义 CA 证书文件，客户端会因为证书验证失败等原因拒绝连接。总之，一切看起来都很好。

问题是，我无法获得对等主机地址。

我找不到任何 OpenSSL 特定的 API 来做到这一点。然后我尝试获取套接字的文件描述符并`getpeername()`使用以下代码调用：

```
// get peer address
int sock_fd;
if (BIO_get_fd(socket, &sock_fd) == -1)
  {
    fprintf(stderr, "Uninitialized socket passed to worker");
    goto listen_cleanup;
  }
printf("socket fd: %i\n", sock_fd);
struct sockaddr addr;
socklen_t addr_len;
// make enough space for ipv6 address and few extra chars
ctx->hostname = malloc(sizeof(char) * 80);
if (!ctx->hostname)
  {
    fprintf(stderr, "Out of memory\n");
    goto internal_error;
  }

// ignore failures, as any problem will be caught in TLS handshake
getpeername(sock_fd, &addr, &addr_len);
if (addr.sa_family == AF_INET)
  inet_ntop(AF_INET, &((struct sockaddr_in *)&addr)->sin_addr,
      ctx->hostname, 40);
else if (addr.sa_family == AF_INET6)
  inet_ntop(AF_INET6, &((struct sockaddr_in6 *)&addr)->sin6_addr,
      ctx->hostname, 40);
else
  {
    fprintf(stderr, "Unknown socket type passed to worker(): %i\n",
        addr.sa_family);
    goto internal_error;
  } 
```

但是之前和之后`BIO_do_handshake()`，检查时都失败了`sa_family`，我明白了`Unknown socket type passed to worker(): 50576`。

**使用包装 TLS 的 OpenSSL BIO 对象时如何获取对等地址？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:07:16.437

原型是：

```
int getpeername(int sockfd, struct sockaddr *addr, socklen_t *addrlen) 
```

该`addrlen`参数实际上是一个输入/输出参数，这就是您的问题所在。您需要将其初始化为 sockaddr 参数的字节大小，即

```
addr_len = sizeof(addr);  // this is what's missing
getpeername(sock_fd, &addr, &addr_len); 
```

然后 getpeername 函数在 addr_len 中存储它想要写入的字节数`addr`。

在你的辩护中，文件在这一点上可能不清楚。当我在谷歌上搜索 getpeername 时，最上面的条目就是[这个](http://pubs.opengroup.org/onlinepubs/7908799/xns/getpeername.html)。在我看来，它未能充分解释这一`address_len`论点。然而，[下一个条目](http://www.kernel.org/doc/man-pages/online/pages/man2/getpeername.2.html)说明了一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T05:38:01.510

尽管最佳答案解决了初始化**addrlen**的问题，但您的代码不适用于 IPv6，因为没有足够的空间为**sockaddr_in6提供****getpeername**。运行此代码：

 **```
#include    <stdio.h>
#include    <netinet/in.h>

int main( int argc, char *argv[] ) {

printf("sizeof( struct sockaddr ) = %d\n", sizeof( struct sockaddr ));
printf("sizeof( struct sockaddr_in )  = %d\n", sizeof( struct sockaddr_in));
printf("sizeof( struct sockaddr_in6 ) = %d\n", sizeof( struct sockaddr_in6));
} 
```

结果是：

```
sizeof( struct sockaddr ) = 16
sizeof( struct sockaddr_in )  = 16
sizeof( struct sockaddr_in6 ) = 28 
```

恕我直言，以与协议无关的方式调用网络功能的最佳方法是使用联合：

```
union address {
    struct sockaddr     addr;
    struct sockaddr_in  addr4;
    struct sockaddr_in6 addr6;
}; 
```

然后通过以下方式调用**getpeername**：

```
union address peer;
socklen_t addrlen = sizeof( peer );
getpeername( sock_fd, &peer.addr, &addrlen ); 
```

完善您使用**addr.sa_family**作为家庭选择器的代码，这很棒，但简化了**inet_ntop**的使用：

```
if (peer.addr.sa_family == AF_INET)
  inet_ntop(AF_INET, peer.addr4.sin_addr, ctx->hostname, 80 );
else if (peer.addr.sa_family == AF_INET6)
  inet_ntop(AF_INET6, peer.addr6.sin6_addr, ctx->hostname, 80 );
else
  .... 
```**

# python - python 2中的未知输出unicode

> ID：14157189
> 
> 赞同：0
> 
> 时间：2013-01-04T12:25:19.273
> 
> 标签：python, netbeans, unicode, python-2.7, netbeans-7.2

我试图从[NLP UPC 研究组实现](http://nlp.lsi.upc.edu/web/index.php?option=com_contenttask=view&id=65)[这段代码](http://nlp.lsi.upc.edu/awn/AWNDatabaseManagement.py.gz)来检索一些输入单词的同义词。当我运行测试方法时

```
def test():
    "tests some functions"
    a=wn.get_words(True)
    print  'length of a: ', len(a)
    print 'a[0]: ', a[0].tostring().decode('utf-8') 
```

输出是未知编码

```
length of a:  16043
a[0]:  ����� 
```

在相同的代码中，Unicode 已经被声明为

```
def _encode(data):
    return data.encode('utf8') 
```

并且我使用的平台（net beans 7.2.1）配置为支持 utf-8 编码

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:28:47.583

如果您已将设置配置为处理 UTF-8，则无需将字符串解码为 Unicode 对象。然后会发生的是 Python 使用检测到的当前编码`sys.stdout`。

尝试*不*解码：

```
print 'a[0]: ', a[0].tostring() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T06:10:03.690

谢谢你的答案。我改用了这个命令，它对我有用

```
print 'a[0]: ', a[0].encode('utf-8') 
```

# sql - 刚刚启动 SQL，不知道我在做什么，创建和使用视图时遇到麻烦

> ID：14157190
> 
> 赞同：0
> 
> 时间：2013-01-04T12:25:19.893
> 
> 标签：sql, ssms, sql-view

我最近（今天）开始使用 SQL，我完全不知道自己在做什么。我创建了一个`Query.sql`文件并开始输入一些随机命令。我突出显示 a`SELECT`并执行它以查看会发生什么，我添加一个新的`SELECT`，突出显示它并查看它的作用。

但是，当我尝试创建视图时，它遇到了一些问题。我真的不明白为什么，但使用`GO`之前和之后似乎可以解决问题，但是现在当我从该视图中进行选择时，它无法识别它（也就是说，它有效，但它以红色突出显示，通常这意味着它不应该编译）。

有人可以用外行的话解释发生了什么吗？我该如何解决这个`SELECT * FROM METRIC_STATS`问题？（我尝试将它封装在同一个 go 中，其他 go，甚至不完全知道它应该是什么样子）

```
GO
CREATE VIEW METRIC_STATS (  ID, MONTH, TEMP_C, RAIN_C) 
AS SELECT   ID, 
            MONTH, 
            (TEMP_F - 32) * 5 /9, 
            RAIN_I * 0.3937 
            FROM STATS;
GO          
SELECT * FROM METRIC_STATS; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:30:43.850

> 现在，当我从该视图中进行选择时，它无法识别它（也就是说，它可以工作，但它以红色突出显示，通常这意味着它不应该编译）。

假设您使用的是 SQL Server Management Studio：您必须手动重置其视图列表。您可以通过右键单击视图然后刷新来做到这一点。

@AlexK 的建议如果存在也可以使用（在我的 SSMS 中，没有这样的菜单命令。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:38:37.453

[`GO`](http://msdn.microsoft.com/en-us/library/ms188037.aspx)是默认的[SQL 批处理分隔符](https://stackoverflow.com/questions/2299249/what-is-the-use-of-go-in-sql-server-management-studio)- 大多数 DDL 语句`CREATE VIEW`必须是批处理中的第一个语句，因此可能您的 SQL 失败了，因为您的`CREATE VIEW`.

此外，[CREATE VIEW](http://msdn.microsoft.com/en-us/library/ms187956.aspx)只能有一个 SELECT 语句，因此您需要在 CREATE VIEW 之后和从中 SELECT 之前使用 GO。

请注意，一旦创建了视图，它就在数据库中是“永久的”——您不需要为了使用它而不断地创建它吗？如果您需要更改视图，则需要`drop`在重新创建它或`alter`现有视图之前更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T12:46:09.903

> 我最近（今天）开始使用 SQL，**我完全不知道自己在做什么**。

我建议您在尝试使用 SQL 之前阅读一本有关 SQL 的书。

[http://msdn.microsoft.com/en-us/library/ms130214.aspx](http://msdn.microsoft.com/en-us/library/ms130214.aspx)

# xcode - 在不使用导航控制器堆栈的情况下切换视图控制器

> ID：14157192
> 
> 赞同：1
> 
> 时间：2013-01-04T12:25:22.390
> 
> 标签：xcode, uiviewcontroller

我正在创建我的第一个应用程序。我的应用程序中有多个视图控制器堆栈。我想切换视图控制器，所以我使用这种方法：

```
 wallViewController *dvc = [[wallViewController alloc] initWithNibName:@"wallViewController" bundle:nil];

        dvc.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;

        [self presentModalViewController:dvc animated:YES];

        [dvc release]; 
```

它工作正常。但它重新加载视图控制器，就像它每次调用 viewdidload 一样，但我想在导航控制器中显示父视图控制器的先前状态。请帮助我。

# wcf - 如何创建可直接访问的 SVC 页面

> ID：14157193
> 
> 赞同：0
> 
> 时间：2013-01-04T12:25:25.577
> 
> 标签：wcf, svc

根据我的文档，第 3 方设备连接到地址：

> `https://Enrollment.myweb.com/EnrollmentServer/Register.svc`

标题：

```
POST /EnrollmentServer/Register.svc HTTP/1.1 
Content-Type: application/soap+xml; charset=utf-8 
User-Agent: Windows Phone 8 Enrollment Client 
Host: Enrollment.myweb.com 
..    
<?xml version="1.0"?> 
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope"> 
... 
</s:Envelope> 
```

我见过的一些 SVC 示例都有一些额外的方法可以调用，比如 Service.svc/GetData 和直接调用 Service.svc 我会得到标准的响应：

> 您已经创建了一个服务。
> 要测试此服务，您需要创建一个客户端并使用它来调用该服务。

任何人都可以指出正确的文档，甚至更好 - C# 中的一个简单示例，说明如何创建可以直接访问并返回一些 XML 文本的 SVC 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:42:18.540

您可以使用 REST 服务。

看到这个：[http ://beyondrelational.com/blogs/dhananjaykumar/archive/2011/02/01/walkthrough-creating-rest-service-in-wcf-4-0.aspx](http://beyondrelational.com/blogs/dhananjaykumar/archive/2011/02/01/walkthrough-creating-rest-service-in-wcf-4-0.aspx)

Also, can use Web API. [http://www.asp.net/web-api](http://www.asp.net/web-api)

# prolog - 如何在prolog中获取文件行数？

> ID：14157195
> 
> 赞同：1
> 
> 时间：2013-01-04T12:25:42.867
> 
> 标签：prolog, swi-prolog

我知道有一个谓词：

```
line_count(Stream, LineCount) 
```

但是这个谓词得到你正在读取或写入多少个数字？，我需要附加一个文件，在附加它之前，我需要检查已插入的行数，那么有什么办法可以做到吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:39:51.367

如果 Stream 可以写入，那么它就是已写入的行。如果它是开放阅读的，那就是阅读的行。

您可以打开文件并阅读它。然后保存这些行，在你再次打开它进行写作后，你可以计算你写的行数。

[http://sicstus.sics.se/sicstus/docs/4.1.0/html/sicstus/mpg_002dref_002dline_005fcount.html](http://sicstus.sics.se/sicstus/docs/4.1.0/html/sicstus/mpg_002dref_002dline_005fcount.html)

# sql-server - 如何将我的 Android 应用程序连接到 sql server 数据库（sql server 2008）

> ID：14157198
> 
> 赞同：0
> 
> 时间：2013-01-04T12:25:50.583
> 
> 标签：sql-server, database, jdbc

我已经在数据库开发中连接了我的 sql sever 数据库，并且我能够 ping 并获得响应，但是我的代码从我的应用程序连接到数据库以进行数据检索和存储目的不断收到相同的错误消息。

这是我的代码：

```
package com.first.mainapp;

import java.sql.DriverManager;
import java.sql.ResultSet;

import com.microsoft.sqlserver.jdbc.SQLServerStatement;
import com.mysql.jdbc.Statement;

public class Connect {

    public static void main(String[] args) {

        java.sql.Connection conn = null;

        String dbName = "People_12";
        String serverip="192.168.0.1";
        String serverport="1433";

        String url = "jdbc:sqlserver://"+serverip+"\\SQLEXPRESS:"+serverport+";databaseName="+dbName+"";

     Statement stmt = null;
        ResultSet result = null;

        String driver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";

        String databaseUserName = "sa";
        String databasePassword = "1234";

        try {

            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url, databaseUserName, databasePassword);
            stmt = (Statement) conn.createStatement();

            result = null;
            String pa,us;

            result = stmt.executeQuery("select * from User_Table ");

            while (result.next()) {

                us=result.getString("uname");
                pa = result.getString("pass");              
                System.out.println(us+"  "+pa);
            }

            conn.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

这是我的错误信息：

```
java.lang.ClassCastException: com.microsoft.sqlserver.jdbc.SQLServerStatement cannot be cast to com.mysql.jdbc.Statement
    at com.first.mainapp.Connect.main(Connect.java:35) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:34:35.440

我认为错误在于您的导入。在此[示例](http://www.java-tips.org/other-api-tips/jdbc/how-to-connect-microsoft-sql-server-using-jdbc.html)中，他们使用`import java.sql.*;`（具体来说，java.sql.Statement 应该是您需要的 Statement 类型的导入）。当你使用 时`import com.mysql.jdbc.Statement;`，你会得到错误的 Statement 类型（对于 mysql）。

# telerik - radajax 更新控制问题

> ID：14157208
> 
> 赞同：3
> 
> 时间：2013-01-04T12:26:53.073
> 
> 标签：telerik, asp.net-ajax, radgrid, radajaxmanager, radajaxloadingpanel

我的页面中有两个 radgrids。我必须根据网格更改预览按钮的可见性。按钮的可见性在没有 ajax 的情况下处理得很好。但是，我需要用ajax 来做。我这样添加

```
<telerik:AjaxSetting AjaxControlID="ddlFinalAggScoreType">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="radGdFinalAggregateScore" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
        <telerik:AjaxSetting AjaxControlID="radGdFinalAggregateScore">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="radGdFinalAggregateScore" LoadingPanelID="RadAjaxLoadingPanel1" />
            </UpdatedControls>
        </telerik:AjaxSetting>
        <telerik:AjaxSetting AjaxControlID="radGdFinalAggregateScore">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="btnPreview"/>
            </UpdatedControls>
        </telerik:AjaxSetting>
        <telerik:AjaxSetting AjaxControlID="radAssetNomination">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="btnPreview"/>
            </UpdatedControls>
        </telerik:AjaxSetting> 
```

但这并不能解决问题。当 radAssetNomination 中的所有行都被删除时，我需要隐藏预览按钮。添加一项时也需要显示。radGdFinalAggregateScore 也和这个按钮有类似的联系

我从后面的代码中将 ajaxsetting 添加到 radAssetNomination 的另一件事（因为当我在 aspx 中添加它时它导致了一个 js 错误）作为

```
 RadAjaxManager1.AjaxSettings.AddAjaxSetting(radAssetNomination, radAssetNomination, RadAjaxLoadingPanel1) 
```

我也尝试像这样添加预览按钮 ajaxsetting。但它没有用

现在可见性工作如下。它第一次使用 radGdFinalAggregateScore 效果很好（我的意思是隐藏），但是当我更改应该使按钮可见的网格时，它不能按预期工作。谁能帮我解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:24:48.517

我通过只使用 radajaxmanager 而不是一起使用 radajaxmanager 和 radajaxpanel 解决了这个问题。此外，在 ajaxifying radtabstrip 和 multipage 时需要考虑一些事情。此外，radajax 对页面中的不可见控件也有限制。为了 ajaxify（即使将其添加为 ajaxsettings 中的更新控件），它们应该放置在始终可见的 asp 面板中，我们可以在 ajax 设置中使用该面板 id。

这些是帮助我解决页面问题的链接。

希望有人能从中受益。:)

[http://www.telerik.com/help/aspnet-ajax/ajax-tips-and-tricks.html](http://www.telerik.com/help/aspnet-ajax/ajax-tips-and-tricks.html)

[http://www.telerik.com/help/aspnet-ajax/ajax-limitations.html](http://www.telerik.com/help/aspnet-ajax/ajax-limitations.html)

[http://www.telerik.com/help/aspnet-ajax/ajax-common-issues.html](http://www.telerik.com/help/aspnet-ajax/ajax-common-issues.html)

[http://www.telerik.com/help/aspnet-ajax/ajax-control-not-updated.html](http://www.telerik.com/help/aspnet-ajax/ajax-control-not-updated.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:47:40.253

如果您使用 RadAjaxPanel 包装页面区域，您可能会获得更好的成功。这样，您就不必担心所有细节；相反，任何回发都会导致其所有子级更新。

# javascript - 计算jsf中数据表上输入文本字段的总数

> ID：14157216
> 
> 赞同：1
> 
> 时间：2013-01-04T12:27:26.730
> 
> 标签：javascript, html, jsf-2

我有一个`<h:datatable>`有两列的 JSF。

*   第 1 列：`<h:outputText>`，从 bean 数据中填充。
*   第2栏：`<h:inputText>`盒子。

表外有一个“总计”字段，我想让它实时显示在 column2 中输入的字段总数。所以我四处寻找，发现我需要一个 JavaScript 来做到这一点。然而，我对 JS 很陌生。

我感到困惑的是如何访问输入文本框的值。到目前为止我做了什么：

```
function totalFrom() {
    var element = document.getElementById('transferFundsForm:fundsFromTable:0:from_transferAmt');
    if(element != null){
        document.forms['transferFundsForm']['transferFundsForm:totalFrom'].value = document.forms['transferFundsForm']['transferFundsForm:totalFrom'].value+ element;
    }
} 
```

据我了解，`transferFundsForm:fundsFromTable:0`这里的 ,`0`代表第一行。如何引用正在编辑的列中的元素？

我已经`onblur`在列中文本框的事件上调用了这个函数。

另外我读到我也可以使用`<f:ajax>`它，但是我使用的是 JSP 而不是 Facelets，所以我不能使用`<f:ajax>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:38:14.160

element 的 HTML DOM 元素表示`<table>`具有一个[`rows`属性](https://developer.mozilla.org/en-US/docs/DOM/table.rows)`<tr>`，它为您提供所有元素的数组。该`<tr>`元素的 HTML DOM 表示具有一个[`cells`属性](https://developer.mozilla.org/en-US/docs/DOM/tableRow.cells)`<td>`，它为您提供所有元素的数组。

因此，如果表格的第二列仅包含一个包含`<input>`您想要总结的值的元素，并且这`totalFrom`是一个`<input>`元素（至少，您尝试设置`value`属性而不是`innerHTML`），您可以实现如下：

```
function totalFrom() {
    var table = document.getElementById('transferFundsForm:fundsFromTable');
    var total = 0;

    for (var i = 0; i < table.rows.length; i++) {
        var secondColumn = table.rows[i].cells[1];
        var input = secondColumn.getElementsByTagName('input')[0];
        var value = parseInt(input.value);

        if (!isNaN(value)) {
            total += value;
        }
    }

    document.getElementById('transferFundsForm:totalFrom').value = total;
} 
```

但是，如果`totalFrom`是 a `<h:outputText id="totalFrom">`，则将其设置如下：

```
 document.getElementById('transferFundsForm:totalFrom').innerHTML = total; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T12:54:28.373

为什么不使用 jsf 服务器端事件或用户 [http://livedemo.exadel.com/richfaces-demo/](http://livedemo.exadel.com/richfaces-demo/) 它还为您提供内置 ajax 功能

# iphone - Exchange 2007 Web 服务 (EWS) 的目标 c 类

> ID：14157218
> 
> 赞同：1
> 
> 时间：2013-01-04T12:27:38.380
> 
> 标签：iphone, web-services, exchange-server, exchangewebservices, exchange-server-2007

我使用 wsdltoobjc 工具为 EWS 创建目标 c 类，但是在构建应用程序时出现了很多错误。

我也**试过sudzc。我收到类似“客户端请求模式验证失败”的错误。**

如果有人知道这件事，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:18:15.667

检查以下链接。您可以找到与 Sudzc 和其他工具相关的问题。下面的网站帮助了我很多。**检查 Sudzc 可能出现的问题**

[http://blog.exadel.com/working-with-ios-and-soap/](http://blog.exadel.com/working-with-ios-and-soap/)

# android - 安卓地图不显示

> ID：14157219
> 
> 赞同：1
> 
> 时间：2013-01-04T12:27:41.200
> 
> 标签：android, google-maps

我正在努力将**谷歌地图**集成到我的安卓应用程序中。

它工作正常。

但是，几天后我的地图没有显示，我不知道为什么？

有人可以建议我为什么吗？

我没有更改代码中的任何内容。

提前致谢。

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey=""/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:28:25.210

只需生成一个新密钥并在您的 xml 中再次使用它。它*应该可以*解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:41:38.507

您是否刷新了您的 android 调试密钥？当您更改工作环境或只是从磁盘中删除 .android 文件夹时，就会发生这种情况。尝试为地图创建新键。为了您的方便，这里是命令：

C:\Program Files\Java\jdk1.7.0_07\jre\bin>keytool.exe -list -v -alias androiddebugkey -keystore C:\Users\User.android\debug.keystore -storepass android -keypass android

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:56:20.493

生成并添加您自己的密钥

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="Your Maps API Key goes here"
/> 
```

浏览这些链接，希望对您有所帮助

[地图介绍链接](https://developers.google.com/maps/documentation/android/v1/hello-mapview)

[链接到为地图生成密钥](https://developers.google.com/maps/documentation/android/v1/mapkey)

# android - 如何实现这个基于 Fragment 的布局？

> ID：14157221
> 
> 赞同：0
> 
> 时间：2013-01-04T12:27:41.207
> 
> 标签：android, android-fragments

我想为平板电脑做一个应用程序。将有一个主要活动，并将在其上包含一张地图。其他碎片将在其上。

例如，我认为，这个[数字](http://imageshack.us/scaled/landing/62/fragmentr.png "分段")说明了我想要什么。

[图 http://imageshack.us/scaled/landing/62/fragmentr.png](http://imageshack.us/scaled/landing/62/fragmentr.png)

地图将始终存在，例如，列表视图将在左侧。安卓上可以吗？我可以通过哪种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:10:26.093

是的，这是可能的。您可以创建一个描述屏幕上 UI 元素排列的 XML 文件，然后编写初始化和管理这些 UI 元素的代码。详细信息和示例可以在官方 API 指南中找到：

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

在这种情况下，您将创建一个`LinearLayout`包含三个元素的垂直：

*   一个`TextView`（标题），
*   `LinearLayout`具有两个元素 的水平（地图和地图列表）：
    *   a`MapView`用于地图
    *   a`TextView`为列表
*   `LinearLayout`具有各种`Button`元素的水平（菜单）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:34:19.583

更多的是一种伪方法，但希望它能让你走上正确的道路。

您可以使用 a`ActionBar`作为标题，使用 a`MapFragment`和 a`ListFragment`作为内容本身。菜单由您决定，具体取决于您想要它做什么。:)

# database - Heroku 中的负载平衡数据库

> ID：14157225
> 
> 赞同：0
> 
> 时间：2013-01-04T12:28:15.230
> 
> 标签：database, ruby-on-rails-3, postgresql, heroku, load-balancing

我在 Rails 中有一个向用户显示大量信息的应用程序。

使用新的遗物，我注意到数据库正在密集工作，这可能会限制我的扩展能力（现在假设 SQL 很好）

有没有一种方法可以让多个数据库同步，并且请求将在它们之间进行负载平衡？

是否`Heroku`提供这样的系统？也许更重要的是——我应该依赖 Heroku 来开发需要扩展的应用程序吗？（架构是一台 Web 服务器连接到一台数据库服务器还是可以做更多？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:02:43.877

查看 heroku 关注者数据库。

[https://devcenter.heroku.com/articles/heroku-postgres-follower-databases](https://devcenter.heroku.com/articles/heroku-postgres-follower-databases)

它将使您的数据库保持同步，并且为了负载平衡，您需要配置章鱼。

此外，关于可扩展性，它非常容易（应用程序级可扩展性只是增加了 dyno），并且在数据库上它们有多个模型（具有不同的缓存大小），并且在这些模型之间切换非常容易（停机时间可忽略不计）

谢谢

# google-analytics - 未获取 Google Analytics 的事件数据

> ID：14157236
> 
> 赞同：0
> 
> 时间：2013-01-04T12:29:10.130
> 
> 标签：google-analytics

我已经在我拥有的测试站点上设置了 GA 事件跟踪。我在页面中使用异步调用，然后在点击时发送事件。我使用的代码在这里：

```
<script type="text/javascript">

        var _gaq = _gaq || [];

        _gaq.push(['_setAccount', 'UA-XXXX-1']);  // This is where my real Analytics Account number would be

        _gaq.push(['_trackPageview']);
        _gaq.push(['_trackEvent', 'AdvertImpression', 'MEA','logged In']);
        _gaq.push(['_trackEvent', 'AdvertImpression', 'AN Other Advert','not logged in']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

        })(); 
```

我也有一个 onclick 事件。

```
 <A href="http://www.xxxyyy.com/ad/click/taHR"><IMG src="http://img.xxxyyy.com/banners/OPFME-20121211.jpg" width=468 height=60 border=0 alt="MEA"  onclick="_gaq.push(['_trackEvent', 'AdvertClicked', 'MEA','Logged In'])")></A> 
```

我看到出现了站点访问，并且我的帐户显示正在生成事件。当我选择“独特事件”时，我什至可以看到数量，但在向下钻取中看不到任何特定类别信息。

我已删除帐户上的所有过滤器并已等待 48 小时。有什么我想念的吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:09:31.860

谷歌分析通过跟踪图像请求来记录数据。如果您在跟踪请求完成之前在同一窗口中加载新页面，则不会记录任何数据。在点击链接之前，我运气不错，稍有延迟。

试试下面的代码：

```
<script type="text/javascript">
function trackLink(link, category, action, value) {
    _gaq.push(['_trackEvent', category , action, value ]);
    if (link.target == "_blank") return true;
    setTimeout(function(){ location.href = link.href; }, 150)
    return false;
}
</script> 
```

将其添加如下链接 - `return`onlick 中的 是必需的。

```
<a href="http://www.xxxyyy.com/ad/click/taHR" onclick="return trackLink('AdvertClicked', 'MEA','Logged In')">... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T20:15:36.200

添加`target="_blank"`到您的`<a>`标签。

如果您要添加跟踪的链接可以添加到新窗口中（例如，如果它们是广告或外部链接），那么您可以通过简单地添加`target="_blank"`到您的`<a>`标签以使外部链接在新窗口中打开来解决此问题。

这样您就不需要做任何延迟（原始页面继续运行并且 javascript 有足够的时间来完成）并且您将始终跟踪您的点击 - 取决于网络速度/谷歌负载/各种其他事情，150毫秒可能不足以跟踪点击，从而导致点击次数减少。

大多数情况下，这些类型的点击无论如何*都应该*指向外部链接，否则您已经在 Google Analytics 中对这些点击进行了跟踪，因为会在新页面上加载您的 Analytics 代码。

```
<a href="http://www.xxxyyy.com/ad/click/taHR" target="_blank"><img src="http://img.xxxyyy.com/banners/OPFME-20121211.jpg" width=468 height=60 border=0 alt="MEA"  onclick="_gaq.push(['_trackEvent', 'AdvertClicked', 'MEA','Logged In'])")></a> 
```

如果这仍然没有帮助，请打开浏览器的 javascript 控制台 - 在 Chrome 中按 CTRL+SHIFT+I 然后单击控制台选项卡 - 并检查是否有任何错误。

我在其他地方看到的一个问题是 _gaq 未定义，如果 Google Analytics 脚本未正确包含在页面上，可能会发生这种情况。

# java - android中的日期格式问题

> ID：14157240
> 
> 赞同：0
> 
> 时间：2013-01-04T12:29:25.593
> 
> 标签：java, simpledateformat

在 android 中获取日期为 **(date = "04-01-2013")**这种格式

但我想以 en.US 格式显示相同的日期，例如**`(date="Friday,January 04,2013")`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:36:52.653

使用[`SimpleDateFormat`](http://developer.android.com/reference/java/text/SimpleDateFormat.html).

设置输入模式匹配输入日期字符串：`"04-01-2013" -> "dd-MM-yyyy"`。

输出模式如输出：`"Friday, January 04, 2013" -> "EEEE, MMMM dd, yyyy"`

```
public String formatDate(String input){
    SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
    Date d = sdf.parse(input);
    sdf.applyPattern("EEEE, MMMM dd, yyyy");
    return sdf.format(d,new StringBuffer(),0).toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:38:34.123

```
 try {
      DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
      DateFormat df2 = new SimpleDateFormat("dd-MMM-yyyy");
      return df2.format(df1.parse(input));
    }
    catch (ParseException e) {
      return null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:32:16.670

你可以使用这样的东西

```
android.text.format.DateFormat.format("EEEE, MMMM dd, yyyy", new java.util.Date()); 
```

看看[DateFormat](http://developer.android.com/reference/android/text/format/DateFormat.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:32:56.827

这就是你在java中的做法

```
SimpleDateFormat df=new SimpleDateFormat("EEEE,MMMM dd,yyyy");
java.util.Date date=df.parse("04-01-2013"); 
```

参考[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# php - 为 SELECT...BETWEEN 查询创建正确的日期格式

> ID：14157241
> 
> 赞同：1
> 
> 时间：2013-01-04T12:29:29.167
> 
> 标签：php, mysql, date, select

我有 2 个变量组成一个日期范围，然后需要在 MySQL 数据库中进行搜索。

这些格式为“2011 年 4 月”和“2012 年 3 月”等。

我的 SELECT...BETWEEN 查询需要“2011-04-01”和“2012-03-31”，那么提供这个的最好方法是什么...

首先在 PHP 中转换日期？

或者有没有办法编写查询以使用原始格式进行搜索？我尝试使用 date_format (date, '%b, %Y') 但查询一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:09:07.300

试试这个：

```
SELECT * FROM tablename 
WHERE dateCol BETWEEN DATE_ADD(DATE(STR_TO_DATE('Apr, 2011', '%b, %Y')), INTERVAL 1 DAY) AND LAST_DAY(STR_TO_DATE('Mar, 2012', '%b, %Y')); 
```

检查[**SQL FIDDLE 演示**](http://www.sqlfiddle.com/#!2/cc200/1)

# python - 有没有办法用 PyGridTableBase 实现某种搜索？

> ID：14157246
> 
> 赞同：1
> 
> 时间：2013-01-04T12:29:45.747
> 
> 标签：python, user-interface, wxpython

基本上我希望我的网格滚动到包含我一直在搜索的内容的（第一行，下一行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:57:58.013

我的问题已在 Google Group wxPython-users 中得到解答，请参见此处： [https ://groups.google.com/d/topic/wxpython-users/Tm-EVR2DxMA/discussion](https://groups.google.com/d/topic/wxpython-users/Tm-EVR2DxMA/discussion)

在分析数据并确定要滚动到的行和列之后，grid.MakeCellVisible(row, col) 就可以解决问题。

# android - 使用 getActiveNetworkInfo() 作为已弃用的 ConnectivityManager.getBackgroundDataSetting() 的替代方法不符合它

> ID：14157247
> 
> 赞同：2
> 
> 时间：2013-01-04T12:29:46.423
> 
> 标签：android, background-process, android-4.0-ice-cream-sandwich, connectivity

用作 Android 4.0 及更高版本已弃用的`getActiveNetworkInfo()`替代方法`ConnectivityManager.getBackgroundDataSetting()` 在更改（受限）时不支持后台数据设置。还有其他选择吗？

**这是代码片段：**

```
 ConnectivityManager connectivityManager;
 connectivityManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

    if(connectivityManager != null) { 
        NetworkInfo info = connectivityManager.getActiveNetworkInfo();
        if (info.isConnected() == true) {
            System.out.println("running");
            Toast.makeText(context, "Background settings enabled", Toast.LENGTH_SHORT).show();

        } else {
            System.out.println("active network info null"); 
            System.out.println("enable background services");
            Toast.makeText(context, "background settings disabled", Toast.LENGTH_SHORT).show();
        }
    } else {
        LogUtil.w(getClass(), "Application does not have ACCESS_NETWORK_STATE Permission");
    } 
```

注意：" `if(connectivityManager.getBackgroundDataSetting()`" 适用于 2.3.3，但在 android 4.0+ 替换为 " `if (info.isConnected() == true)`" 时，即使后台数据设置受到限制，也始终返回 true。

[参考](http://developer.android.com/reference/android/net/ConnectivityManager.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T16:02:42.597

Android 4.x 仅在应用不在前台时进行检查时返回您未连接。看看您是否可以在其他应用程序处于前台时安排在服务中进行此检查。

# orchardcms - 可配置产品

> ID：14157249
> 
> 赞同：1
> 
> 时间：2013-01-04T12:30:01.277
> 
> 标签：orchardcms, orchardcms-1.6

我正在玩自定义模块购物车。我目前有一个包含价格和 sku 字段的产品部分。添加可配置产品的最佳方式是什么，例如衬衫有不同的颜色和尺寸。但现在所有产品都必须是可配置的。我想让用户从我的视图中的下拉列表中选择可用尺寸。

如果我创建一个新的内容部分并将枚举字段附加到我必须在从后端创建产品时选择一项。我想要的是在视图中呈现枚举字段中的所有项目并能够选择一个。

// 托马斯

# php - 如何使用具有自己唯一设备 ID 的记住我功能

> ID：14157250
> 
> 赞同：0
> 
> 时间：2013-01-04T12:30:00.343
> 
> 标签：php, security, login

在这个时代，我们拥有不同的机器、设备和电话，但有时我们希望以自己的名字被人们记住。

我有一个网站，一个人应该能够在他当前正在使用的设备上检查“记住我”，并且可以在家里的所有设备上使用它。

目前我正在使用一个记住我的函数，它创建一个散列键，将它保存在 cookie 和数据库中。但是 - 当使用同一用户登录但在其他设备上时，数据库中的散列键被覆盖，因此第一台设备上的记住我功能已关闭。

我正在考虑创建一个会话表来保存不同的会话，（尽管它也可能为一个用户保存不同的会话）

所以问题：

**如何使用 php.ini 为设备设置/生成唯一会话密钥。**

因为我在不同设备上使用相同的浏览器，所以浏览器指纹不起作用。

任何人的想法？

当然，我需要一个安全的解决方案，防止将 cookie 复制到另一台设备或更改 cookie 信息（从您的用户到管理员）很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:40:42.517

我会做会话表来存储所有会话。将用户 ID 和会话 ID 存储在 cookie 中，这样当用户回来时，您可以检查它们是否都在表中。如果是，他们不必重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:43:59.513

基本思想是存储来自不同设备的会话 ID 并将它们绑定到一个用户。在数据库级别，这意味着您的用户表中没有“session_id”字段，而是一个包含“session_id”和“user_id”列的单独表。

请考虑会话固定和会话劫持的安全隐患。有关更安全的“记住我”系统的描述，请阅读以下文章：

[http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)

[http://jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:33:50.727

首先，使用哈希键而不是用户名不会**增加**任何额外的安全性。

只需使用其中包含用户名的 cookie。密码在那里是为了安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-29T05:05:24.543

> 当然，我需要一个安全的解决方案，防止将 cookie 复制到另一台设备或更改 cookie 信息（从您的用户到管理员）很重要。

最终，这是在解决错误的问题。

防止这种情况的方法是：

1.  到处使用 HTTPS。
2.  通过 HTTPS 发送所有带有安全和 httpOnly 标志的 cookie。

而已。这与[客户端真实性](https://paragonie.com/blog/2016/03/client-authenticity-is-not-server-s-problem)的问题有关。有一些技术可以阻止*懒惰的攻击者*（例如用户代理），但是这些技术中的任何一个都可以轻易地被欺骗。

# java - 忙旋转以减少上下文切换延迟（java）

> ID：14157251
> 
> 赞同：11
> 
> 时间：2013-01-04T12:30:04.783
> 
> 标签：java, multithreading, performance, queue

在我的应用程序中，有几个服务在它们自己的线程上处理信息，当它们完成后，它们会将消息发布到下一个服务，然后继续在自己的线程上完成工作。消息的移交是通过 LinkedBlockingQueue 完成的。切换通常需要 50-80 us（从将消息放入队列直到消费者开始处理消息）。为了加快最重要服务的移交，我想使用繁忙的自旋而不是阻塞方法（我有 12 个处理器内核并希望将 3 个专用于这些重要服务）。所以..我将 LinkedBlockingQueue 更改为 ConcurrentLinkedQueue

并且做了

```
for(;;)
{
 Message m = queue.poll();
 if( m != null )
  ....
} 
```

现在..结果是第一个消息传递需要 1 我们，但随后延迟在接下来的 25 次切换中增加，直到达到 500 我们，然后延迟突然回到 1 我们并开始增加..所以我有延迟具有 25 次迭代的周期，其中延迟从 1 us 开始，到 500 us 结束。（消息每秒传递大约 100 次）

平均延迟为 250，这并不是我想要的性能提升。

我还尝试使用 LMAX Disruptor ringbuffer 而不是 ConcurrentLinkedQueue。该框架在繁忙的自旋实现中具有自己的构建和完全不同的队列实现，但结果是相同的。所以我很确定这不是队列的错，也不是我滥用某些东西..

问题是..这到底是怎么回事？为什么我会看到这种奇怪的延迟周期？

干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:04:30.273

据我所知，如果线程调度程序检测到该线程正在大量使用 CPU，它可以故意将线程暂停更长的时间——以便更公平地在不同线程之间分配 CPU 时间。尝试`LockSupport.park()`在队列为空后添加消费者，并`LockSupport.unpark()`在添加消息后添加生产者 - 这可能会使延迟变小；不过，与阻塞队列相比，它是否真的会更好是一个大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:09:07.427

如果您真的需要按照您描述的方式完成工作（而不是 Andrey Nudko 在 1 月 5 日 13:22 回复的方式），那么您肯定还需要从其他角度看待问题。

只是一些提示：

1.  尝试检查您的整体环境（在 JVM 之外）。例如：

    *   操作系统 CPU 调度程序对此有巨大影响..目前默认很可能是 [http://en.wikipedia.org/wiki/Completely_Fair_Scheduler](http://en.wikipedia.org/wiki/Completely_Fair_Scheduler)
    *   正在运行的进程数等
2.  JVM 内部的“问题”

    *   垃圾收集器（尝试不同的：[http](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html#1.1.%20Types%20of%20Collectors%7Coutline) ://www.oracle.com/technetwork/java/gc-tuning-5-138395.html#1.1.%20Types%20of%20Collectors%7Coutline ）
3.  尝试更改线程优先级：[设置 Java 线程的优先级](https://stackoverflow.com/questions/1617963/setting-priority-to-javas-threads)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T17:31:01.857

这只是疯狂的猜测（因为正如其他人所提到的，您没有收集有关队列长度、失败的轮询、空轮询等的任何信息）：

我使用了力量并阅读了[ConcurrentLinkedQueue 的来源](http://fuseyism.com/classpath/doc/java/util/concurrent/ConcurrentLinkedQueue-source.html)，或者更确切地说，简要地浏览了一两分钟。轮询并不是您微不足道的 O(1) 操作。可能是您正在遍历多个已过时的节点，保持为空；并且可能存在额外的临时状态，这些状态涉及连接到自身的节点作为下一个节点，作为队列陈旧/移除的指示。可能是由于线程调度，队列开始堆积垃圾。尝试按照代码中提到的抽象算法的链接：

[**Maged M. Michael 和 Michael L. Scott的简单、快速和实用的非阻塞和阻塞并发队列**](http://www.cs.rochester.edu/u/michael/PODC96.html)（链接有 PDF 和伪代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-12T23:56:11.220

这是我的 2 美分。如果您在基于 linux/unix 的系统上运行，则有一种方法可以将某个 cpu 专用于某个线程。本质上，您可以让操作系统忽略该 cpu 进行任何调度。检查 cpu 的隔离级别

# three.js - 三个 Js Object3D 按钮组检测单个对象单击而鼠标移动导致 Object3D 按钮组 Zoomi

> ID：14157252
> 
> 赞同：3
> 
> 时间：2013-01-04T12:30:12.917
> 
> 标签：three.js

我正在尝试检测 Object3D 多维数据集组中的多维数据集单击。我已经查看并尝试合并在以下位置找到的示例和教程：

[http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)

和

[http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html)

此外，我还查阅了本网站上的帖子：

[Three.js - 如何检测选择了什么形状？拖后](https://stackoverflow.com/questions/8292486/three-js-how-to-detect-what-shape-was-selected-after-drag)

和

[如何在 THREE.js 中获取 CLICKED 元素](https://stackoverflow.com/questions/7984471/how-to-get-clicked-element-in-three-js)

但由于某种原因，它仍然无法正常工作。谁能告诉我我做错了什么？这是我的代码，谢谢：

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Double Stamp It No Erasies</title>
<style>
html {
    background: url(Images/ComicBookExplosionBackground.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
body {
}
</style>
<script src="ThreeJs/build/three.min.js"></script>       
</head>

<body onLoad="onLoad();" style="">
<div id="container" style="width:100%; height:100%; position:absolute;"></div>
<script>
            var container, ButtonsCamera, ButtonsScene, ButtonsRenderer, ButtonsGeometry, ButtonsGroup;
            var mouseX = 0, mouseY = 0;
            var windowHalfX = window.innerWidth / 2;
            var windowHalfY = window.innerHeight / 2;   
            /****************************** CLICK START **********************************/
var mouse = { x: 0, y: 0 }, projector, INTERSECTED;
var objects = [];
    /****************************** CLICK END **********************************/

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            //document.addEventListener( 'mousedown', onDocumentMouseDown, false );
            init();
            animate();      

            function init() {
                container = document.createElement( 'div' );
                document.body.appendChild( container );         
                ButtonsCamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );
                ButtonsCamera.position.z = 500;
                ButtonsScene = new THREE.Scene();
                ButtonsScene.fog = new THREE.Fog( 0xffffff, 1, 10000 );
                /*************************** STACKOVERFLOW 1ST ANSWER START **********************************/ 
        var ButtonsGeometry = new THREE.CubeGeometry( 100, 100, 100 );
var ButtonsMaterial = new THREE.MeshFaceMaterial( [
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Images/Twitter.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Images/Twitter.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Images/Twitter.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Images/Twitter.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Images/Twitter.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'Images/Twitter.jpg' ) } )] );        
                /*************************** STACKOVERFLOW 1ST ANSWER END **********************************/   
                ButtonsGroup = new THREE.Object3D();
                for ( var i = 0; i < 100; i ++ ) {
                    var ButtonsMesh;
                    if(i == 0)
                    {
                    ButtonsMesh = new THREE.Mesh( ButtonsGeometry, ButtonsMaterial );
                    }
                    else
                    {
                    ButtonsMesh = new THREE.Mesh( ButtonsGeometry, ButtonsMaterial );
                    }
                    ButtonsMesh.position.x = Math.random() * 2000 - 1000;
                    ButtonsMesh.position.y = Math.random() * 2000 - 1000;
                    ButtonsMesh.position.z = Math.random() * 2000 - 1000;
                    ButtonsMesh.rotation.x = Math.random() * 360 * ( Math.PI / 180 );
                    ButtonsMesh.rotation.y = Math.random() * 360 * ( Math.PI / 180 );
                    ButtonsMesh.matrixAutoUpdate = false;
                    ButtonsMesh.updateMatrix();
                    ButtonsGroup.add( ButtonsMesh );
                }
                ButtonsScene.add( ButtonsGroup );

            /****************************** CLICK START **********************************/
            objects.push( ButtonsMesh );
projector = new THREE.Projector();  
/****************************** CLICK END **********************************/

                ButtonsRenderer = new THREE.WebGLRenderer();
                ButtonsRenderer.setSize( window.innerWidth, window.innerHeight );
                ButtonsRenderer.sortObjects = false;
                container.appendChild( ButtonsRenderer.domElement );
            window.addEventListener( 'resize', onWindowResize, false );
            /****************************** CLICK START **********************************/
document.addEventListener( 'mousedown', onDocumentMouseDown, false );
/****************************** CLICK END **********************************/

            }

            /****************************** CLICK START **********************************/
function onDocumentMouseDown( event ) {
//alert('clicky');
                event.preventDefault();

                var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );
                projector.unprojectVector( vector, ButtonsCamera );

                var raycaster = new THREE.Raycaster( ButtonsCamera.position, vector.subSelf( ButtonsCamera.position ).normalize() );

                var intersects = raycaster.intersectObjects( objects);

                if ( intersects.length > 0 ) {
                    intersects[ 0 ].object.material.color.setHex( Math.random() * 0xffffff );

                    var particle = new THREE.Particle( particleMaterial );
                    particle.position = intersects[ 0 ].point;
                    particle.scale.x = particle.scale.y = 8;
                    ButtonsScene.add( particle );

                }

                /*
                // Parse all the faces
                for ( var i in intersects ) {

                    intersects[ i ].face.material[ 0 ].color.setHex( Math.random() * 0xffffff | 0x80000000 );

                }
                */
            }
/****************************** CLICK END **********************************/

            function onWindowResize() {
                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;
                ButtonsCamera.aspect = window.innerWidth / window.innerHeight;
                ButtonsCamera.updateProjectionMatrix();
                ButtonsRenderer.setSize( window.innerWidth, window.innerHeight );
            }

            function onDocumentMouseMove(event) {
                mouseX = ( event.clientX - windowHalfX ) * 10;
                mouseY = ( event.clientY - windowHalfY ) * 10;
            }

            function animate() {                
                requestAnimationFrame( animate );
                render();
                ButtonsStats.update();
            }

            /****************************** CLICK START **********************************/
var radius = 100;
            var theta = 0;
            /****************************** CLICK END **********************************/

            function render() {

                var ButtonsTime = Date.now() * 0.001;
                var rx = Math.sin( ButtonsTime * 0.7 ) * 0.5,
                    ry = Math.sin( ButtonsTime * 0.3 ) * 0.5,
                    rz = Math.sin( ButtonsTime * 0.2 ) * 0.5;
                ButtonsCamera.position.x += ( mouseX - ButtonsCamera.position.x ) * .05;
                ButtonsCamera.position.y += ( - mouseY - ButtonsCamera.position.y ) * .05;
                ButtonsCamera.lookAt( ButtonsScene.position );
                ButtonsGroup.rotation.x = rx;
                ButtonsGroup.rotation.y = ry;
                ButtonsGroup.rotation.z = rz;
                ButtonsRenderer.render( ButtonsScene, ButtonsCamera );
            }
        </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T21:14:40.547

嘿，我希望我还不算太晚，但无论如何，您的问题的解决方案是错误的陈述和不推荐使用的方法。

您的对象数组中只有一个对象，这就是为什么当您单击随机框时，光线投射器不太可能检测到交叉点。将数组 push 调用移动到 for 循环中，以便将每个对象添加到数组中，而不是添加最后一个创建的对象。

```
for (var i = 0; i < 100; i++) {
    var ButtonsMesh;
    if (i == 0) 
    {
        ButtonsMesh = new THREE.Mesh(ButtonsGeometry, ButtonsMaterial);
    } 
    else 
    {
        ButtonsMesh = new THREE.Mesh(ButtonsGeometry, ButtonsMaterial);
    }
    ButtonsMesh.position.x = Math.random() * 2000 - 1000;
    ButtonsMesh.position.y = Math.random() * 2000 - 1000;
    ButtonsMesh.position.z = Math.random() * 2000 - 1000;
    ButtonsMesh.rotation.x = Math.random() * 360 * (Math.PI / 180);
    ButtonsMesh.rotation.y = Math.random() * 360 * (Math.PI / 180);
    ButtonsMesh.matrixAutoUpdate = false;
    ButtonsMesh.updateMatrix();
    ButtonsGroup.add(ButtonsMesh);
    objects.push(ButtonsMesh);
} 
```

第二个问题是较新版本的 THREE 不使用 subSelf()，而是用 sub() 代替。因此，对 Raycaster 定义进行更改。

```
var raycaster = new THREE.Raycaster(ButtonsCamera.position, 
                vector.sub(ButtonsCamera.position).normalize()); 
```

那应该可以解决您的问题，但是您的代码中有更多错误，但它们都是微不足道的。

我希望这会有所帮助，这是一个工作版本：http: [//jsbin.com/uhihoq/1/edit](http://jsbin.com/uhihoq/1/edit)

和平！

# html - 在 VBScript 中为 HTML 元素调用自定义事件函数

> ID：14157270
> 
> 赞同：0
> 
> 时间：2013-01-04T12:31:26.880
> 
> 标签：html, dom, vbscript

我只想在 VBscript 中调用自定义元素的函数。以下是我当前的脚本代码。但它使我的应用程序崩溃。（目标浏览器是Internet Explorer）

```
 Function SampleFunction()
  msgbox"samplemessage"
  End Function
  set ResponseFn = getRef("SampleFunction")
  set element = document.getElementById("elem id")
  element.addEventListener "OnResponse, ResponseFn , false
  set cEvent = document.createEvent("CustomEvent")
  cEvent.initCustomEvent "OnResponse", false, false, null
  element.dispatchEvent(cEvent)
  element.removeEventListener "OnResponse\", ResponseFn , false 
```

知道为什么上面的代码会崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:27:42.203

我发现上面的代码只支持 IE 9。其他版本的 IE 不支持这个。需要在 htm 文件中添加以下标记以支持上述代码

"meta http-equiv="X-UA-Compatible" 内容="IE=9" "

这解决了我的问题

# sql - 连接表以填充实体列表

> ID：14157273
> 
> 赞同：0
> 
> 时间：2013-01-04T12:31:56.463
> 
> 标签：sql, hibernate, jpa

我正在使用 JPA 和 Hibernate，但我的需求太复杂而无法构建 HQL，至少对我来说是这样。我决定使用原生 SQL。我需要用他们的子列表获取一些记录/实体，但是，我需要过滤孩子，我不想要所有的孩子。这可能吗？

例如我有三个表

对话表：id

邮件表：id、conversation_id、sender_id

user_table：id，married_bool

我需要具有由已婚用户发送的`conversation`由 s 填充的列表的实体。`mail`

我试过到目前为止

```
Select * from conversation_table join mail_table on ( mail_table.sender_id=user_table.id and user_table.married_bool=true) 
```

我收到如下错误：

```
user_table is unknown 
```

我试过了

```
Select * from (conversation_table, user_table, mail_table) join mail_table on ( mail_table.sender_id=user_table.id and user_table.married_bool=true) 
```

我正进入（状态

```
mail_table is non unique table/alias 
```

这只是一个简单的例子，还需要在其他表中填充邮件实体的一些实体列表，例如接收者表，我想我必须在本机查询中添加连接子句来填充这些，对吗？当尝试这个额外的连接子句时，我也会收到“未知”/“非唯一别名”错误。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:37:22.187

像这样的东西：

```
SELECT *
FROM conversation_table CT
   JOIN mail_table MT
      ON CT.Id = MT.conversation_id
   JOIN user_id UI
      ON MT.sender_id=UI.id
WHERE UT.married_bool = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:15:04.083

如果你真的想对这个查询使用 Hibernate ORM，那么 Criteria Query 是最好的方法。最近，我有同样的要求，只使用了 Criteria。

# str-replace - 替换图像替代文本中的特殊字符

> ID：14157276
> 
> 赞同：0
> 
> 时间：2013-01-04T12:32:07.357
> 
> 标签：str-replace, replace

我正在尝试为我的博客中的图像生成替代文本以使我的工作更容易，但我在执行此脚本时发现了一个错误。如果图像名称是“image_good_looking.jpg”，则输出将为“image_good_looking”。在某种程度上很好。如果上传前图片名称为“image goodlooking.jpg”，则上传前改为“image+good+looking.jpg”。我尝试了 filename.replace("+"," "),title.replace("+"," ") 但在输出中，图像的标题和替代文本没有变化。

此脚本必须放在节之后

var filename = $img.attr('src') $img.attr('title', filename.substring((filename.lastIndexOf('/'))+1, filename.lastIndexOf('.')));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:40:14.490

```
$img.attr('title',filename.replace(/\W/," ")); 
```

这将用空格替换所有非字母数字字符。这是你要找的吗？

# ruby - @current_user_sesssion) 正在工作，而不是 authlogic 中的 @current_user_session (ruby on rails)

> ID：14157281
> 
> 赞同：1
> 
> 时间：2013-01-04T12:32:28.463
> 
> 标签：ruby, ruby-on-rails-3.1

我是 Ruby on Rails 的新手，使用 authlogic 进行用户身份验证，并且使用下面的书面代码可以正常工作

```
def current_user_session
    return @current_user if defined?(@current_user_**sesssion**)

    @current_user_session = UserSession.find
end 
```

但不是代码

```
def current_user_session
    return @current_user if defined?(@current_user_session)
    @current_user_session = UserSession.find
end 
```

请注意会话的拼写（在@current_user_session 中）

任何人都可以对此提供帮助，无论这是逻辑错误还是其他任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:30:00.127

这是您代码中的一个小错误。你要：

```
def current_user_session
    return @current_user_session if defined?(@current_user_session)
    @current_user_session = UserSession.find
end 
```

即您要返回的变量是您检查过的变量是已定义的`@current_user_session`，而不是`@current_user`.

拼写错误使其正常工作的原因是因为`defined?(@current_user_sesssion)`将始终返回 false，因此该方法的版本将始终返回`UserSession.find`. `@current_user_session`在第一次调用 where定义正确的情况下，`@current_user_session`该方法将返回`@current_user`（可能是`nil`）。

# android - 使用 Matrix Android 进行翻译

> ID：14157282
> 
> 赞同：2
> 
> 时间：2013-01-04T12:32:29.307
> 
> 标签：android, android-layout, random

我正在尝试使用矩阵翻译图像我的代码是

```
Bitmap myImg = BitmapFactory.decodeResource(getResources(), R.drawable.calednder_c);

Matrix matrix = new Matrix();

matrix.setTranslate(500,300 );
Bitmap rotated = Bitmap.createBitmap(myImg, 0, 0, myImg.getWidth(), myImg.getHeight(),
        matrix, true);

circle.setImageBitmap(rotated); 
```

当我调用我的动画方法时，什么也没发生。虽然我写`preRotate(angle);`它旋转并且它也缩放但不能解释为什么我错过了什么

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:28:16.653

以下是`createBitmap`源代码中的相应片段：

```
final boolean transformed = !m.rectStaysRect();

RectF deviceR = new RectF();
m.mapRect(deviceR, dstR);

neww = Math.round(deviceR.width());
newh = Math.round(deviceR.height());

bitmap = createBitmap(neww, newh, transformed ? Config.ARGB_8888 : newConfig,
        transformed || source.hasAlpha());

canvas.translate(-deviceR.left, -deviceR.top);
canvas.concat(m);

paint = new Paint();
paint.setFilterBitmap(filter);
if (transformed) {
    paint.setAntiAlias(true);
} 
```

它使创建的位图大到足以容纳原始位图中的所有所需像素。这是由新的大小和`canvas.translate`调用引起的。

最终效果是矩阵中的平移被忽略了。

# svn - 将 SVN 项目与 TRAC 同步

> ID：14157283
> 
> 赞同：1
> 
> 时间：2013-01-04T12:32:31.233
> 
> 标签：svn, repository, trac

我的系统（Ubuntu 12.04）上安装了 TRAC（1.0 版）和 SVN 服务器（1.7.8 版）。存储库 (/var/lib/svn) 中有许多**svn 项目，trac 环境 (/var/lib/trac) 中也有相应的许多****trac 项目**。

现在我想*同步 SVN 的每个项目与它在 TRAC 中的相应项目。我知道有传统方法可以将 TRAC 项目与***完整***的svn 存储库同步。但是如何在项目之间实现相同？

提前致谢。

*sync - 使源可从 trac 页面浏览，还可以查看提交更改、修订号等。

# sql - 即使深度在 3 - 4 左右，MPTT 对于维护类似数据库的树是否是一种过度杀伤力？

> ID：14157296
> 
> 赞同：2
> 
> 时间：2013-01-04T12:33:17.043
> 
> 标签：sql, graph-databases, django-mptt, mptt

我打算在 MySQL 中存储一些类似树的数据。
主题可以有子主题，而它们又可以有更多的子主题。
即使最大深度在 3 - 4 左右，修改的预序树遍历 (MPTT) 是否也会过度杀伤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T15:19:27.477

无论如何，您必须编写模型方法，例如 get_children()、get_root()、is_root() 等。在某些情况下，django-mptt 会减少对数据库的查询。这不是矫枉过正，它将为您节省大量时间。django-mptt 代码比你的更可靠，所以你的代码会有更少的潜在错误。只需花几个小时阅读完整的文档=)

# ocean - 如何从 Petrel 启动 IvTune 窗口？

> ID：14157297
> 
> 赞同：2
> 
> 时间：2013-01-04T12:33:17.823
> 
> 标签：ocean

我想从 Petrel 启动 IvTune 工具来调试我的 OpenInventor 代码。有没有办法做到这一点？标准快捷键 Shift+F12 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:50:26.267

我们不会将 IvTune 打包到 Petrel 的发布版本中。我们实际上做不到。如果你想使用它，你需要获得一个单独的开放发明者许可证。

# php - 向控制器中的表单元素添加选项

> ID：14157298
> 
> 赞同：0
> 
> 时间：2013-01-04T12:33:20.507
> 
> 标签：php, annotations, zend-form, zend-framework2, zend-form-element

[与这篇文章](https://stackoverflow.com/q/14142488/1331671)相关，我想将手动添加表单元素转换`Annotations`为我的`Entity`.

代码如下所示：

```
$this->add(array(
    'name'       => 'formElementName',
    'type'       => 'DoctrineModule\Form\Element\ObjectSelect',
    'attributes' => array(
        'required' => true
    ),
    'options'    => array(
        'label'           => 'formElementLabel',
        'empty_option'    => '--- choose formElementName ---',
        'object_manager'  => $this->getEntityManager(),
        'target_class'    => 'Mynamespace\Entity\Entityname',
        'property'        => 'nameOfEntityPropertyAsSelect'
    )
)); 
```

作为注释，我有一个问题，`object_manager`即我不能传递给注释的变量。每个其他属性都没有问题，并且在被注释时应该可以工作。

我正在寻找正确的方法来做到这一点：

```
$form->get('formElementName').setOptions(array('object_manager'=>$entityManager) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:03:22.840

你必须试试这个它会正常工作。

```
<!-- language-all: lang-html -->
foreach($cityArr as $city){

  $city_ar[$city['id']] = $city['city'];

}

$form->user_city->setMultiOptions($city_ar);

$form->user_city->setValue($val["user_city"]); 
```

# c++ - 大型复杂的构造函数或私有方法？

> ID：14157301
> 
> 赞同：2
> 
> 时间：2013-01-04T12:33:27.580
> 
> 标签：c++, constructor

我正在实现一个类来表示旧文件。这些文件是二进制文件，需要大量解析。可能会有数千行代码来解析文件。我在类中有两个构造函数：

```
class CrmxFile {

public:
    CrmxFile(std::wstring filename);
    CrmxFile(std::ifstream& file);

...
} 
```

由于没有文件的内容，对象就没有意义，所有的解析都需要在构造对象时完成。我打算实现一个大型构造函数（带有流参数的构造函数），但我的一位同事认为拥有非常大的构造函数不是一个好习惯。相反，我应该创建一个私有方法来进行解析，并在检查流是否可读之后从构造函数调用此方法，并且可能读取文件头以验证流是否包含正确的数据。

是否有任何指导方针/规则/约定/等。管理这种情况？本质上（在伪代码中），这两种方法中的哪一种更好，

长构造函数：

```
CrmxFile::CrmxFile(std::ifstream& file) {
    if (file is not readable) {
        throw new CmrxException(read_error);
    }

    CmrxHeader header(file);
    if(!header.isValid()) {
        throw new CmrxException(invalid_file);
    }

    //now do all the reading/parsing of the file
    //constructor may end up being a thousand lines of code
    ...
} 
```

或简短的构造函数和辅助方法：

```
class CrmxFile {

public:
    CrmxFile(std::wstring filename);
    CrmxFile(std::ifstream& file);

private:
    ParseFile(std::ifstream& file);

...
}

CrmxFile::CrmxFile(std::ifstream& file) {
    if (file is not readable) {
        throw new CrmxException(read_error);
    }

    CrmxHeader header(file);
    if(!header.isValid()) {
        throw new CrmxException(invalid_file);
    }

    ParseFile(file);
}

void CrmxFile::ParseFile(std::ifstream& file) {
    //do all the reading/parsing of the file here
    ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:39:25.377

帮手在这里似乎可行..

但是，我不会将其设为私有：而是将其拆分为多个驻留在详细信息或解析器命名空间中的尽可能小的函数，以便您可以测试每个方法。由于您无论如何都使用流，这很容易：将您的方法更改为接受 an`istream`而不是，`ifstream`然后测试的输入可以是纯字符串，然后您将其输入到您用作方法参数的 istringstream 中。相信我，你会想要测试这个，正如你现在所说的那样，它将有数百行，你不可能从第一次就做对。

实际的辅助方法不是简单地组合较小的方法，或者根据您拥有的数量，组合较小的方法，然后再组合其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:37:27.937

如果您有多个构造函数，那么最好有一个私有方法来进行初始化。节省重复代码（从而有助于在进行任何更改时更易于维护并且更不容易出错）。

如果只有一个构造函数，就让它变得尽可能复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:44:47.823

我认为这并不重要，除非您想共享私有帮助方法以供其他用途或对象内的多个构造函数。

在构造函数内部解析的方法对我来说听起来有问题。这是构造和初始化角色的混合。您可能希望将解析公开为公共接口，并且构造函数只会将对象的状态设置为未初始化，以将对象标记为对客户端不可用。或者，您可能希望在此处尝试使用惰性评估应用单例模式：实现`getInstance`将调用私有的方法（`parse`如果尚未解析） - 从用户的角度来看，它将是透明的（不包括首次访问的开销）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T13:45:52.487

我会说“不要在构造函数中这样做，句号”。

构造函数是奇怪的野兽，构造过程中的失败只有抛出异常才有可能。并且损坏/无效的文件或解析错误（在我看来）太常见而无法抛出 - 另外，在构建过程中进行抛出和解析安全是具有挑战性的，而且人们经常会出错。

所以走一条更简单的路。

编写一个工厂函数，甚至是一个工厂对象，来生成你的对象。它维护解析状态，并具有解析对象的无数函数（或者，如果必须的话，一个大函数）。然后，一旦解析完成，对象就会返回，并且该对象没有一堆与从磁盘解析它相关联的代码（或状态）。

这意味着而不是

```
try {
  MyObject foo("file.blah");
  // ...
} catch (MyObject::ParseError err) {
  // ...
} 
```

您改为执行以下操作：

```
MyObjectParser parser;
parser.Load("file.blah");
if (parser.Error()) {
  // ...
} else {
  MyObject foo = parser.Get();
  // ...
} 
```

并且您的情况是，唯一`MyObject`存在的应该`MyObject`是已经加载的商品。

# symfony - symfony2 fosuserbundle remember_me cookie 注册后

> ID：14157303
> 
> 赞同：0
> 
> 时间：2013-01-04T12:33:33.127
> 
> 标签：symfony, fosuserbundle, remember-me

在我的 registerAction 中，我关闭了确认功能，因此如果用户正确填写表单，则它已通过身份验证。有谁知道如何创建 rememberme cookie 以便用户可以保持身份验证？

我的security.yml：

```
main:
    pattern: ^/
    form_login:
        provider: fos_userbundle
        success_handler: my.authentication.success_handler
        failure_handler: my.authentication.failure_handler
    logout:       true
    anonymous:    true
    remember_me:
        key:      %secret%
        path:     /
        domain:   ~            
        always_remember_me: true
        user_provider: fos_userbundle 
```

# java - Swing：在Jtable中当光标下移时JScroll bar也应该下移？

> ID：14157305
> 
> 赞同：2
> 
> 时间：2013-01-04T12:33:38.070
> 
> 标签：java, swing, jtable, mouselistener, awtrobot

当用户双击该行时，我正在使用 JTable，然后鼠标应该聚焦在下一行。-> ok 当时滚动条如何移动 Jscrollbar 和鼠标在同一位置

```
public void TableMouseListener implements MouseListener {

public void mouseClicked(MouseEvent e) {

            //if the double click is performed or left button
  if (SwingUtilities.isLeftMouseButton(e) && e.getClickCount() >= 2) {

    Robot r;
    Point p = e.getPoint();
    JTable table = (JTable) e.getSource();
    int rowNumber = table.rowAtPoint(p);
    PointerInfo a1 = MouseInfo.getPointerInfo();
    Point b1 = a1.getLocation();
    int x1 = (int) b1.getX();
    int y1 = (int) b1.getY();
    System.out.println(x1+" :X :  "+x1);
    System.out.println(y1+" : Y : "+y1);

    //Mouse move to next record based row height                
    r = new Robot();
    r.mouseMove(x1, y1 +table.getRowHeight());

    //Can any one suggest move the scrollbar based on the cursor move
    //Rectangle rect = viewport.getViewRect();
    //rect.y = rect.y + table.getRowHeight();
    //viewport.scrollRectToVisible(rect); -> IF scrollbar is used to move but not in next poistion
    } catch (Exception e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:46:27.793

*   将正确的[ListSelectionModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)设置为`JTable`

*   添加[ListSelectionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/listselectionlistener.html)而不是 using `AWT.Robot`，必须测试是否选择了任何行（.. >-1），

*   必须测试是否不是`1st.`或`last`在`JTables view`,

*   更改选择[table.setRowSelectionInterval(int index0, int index1)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setSelectionMode%28int%29)

# jquery-plugins - Twitter Bootstrap Popovers 在对数据表进行过滤后无法正常工作

> ID：14157307
> 
> 赞同：3
> 
> 时间：2013-01-04T12:33:48.120
> 
> 标签：jquery-plugins, twitter-bootstrap, datatables, popover

我有一个`datatable`分页，我有为每一行生成的带有弹出框的锚点，但弹出框只显示在第一个结果页面上。过滤结果或移动到另一个结果页面时，不会出现弹出框。

我想知道是否有人已经遇到了同样的问题，以及我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-26T19:37:53.310

ditscheri 解决方案的替代方法是使用[fnDrawCallback](http://datatables.net/usage/callbacks)：

```
"fnDrawCallback": function ( oSettings ) {
  $(".js_popover").popover({ html:true });
  // $("[data-toggle=popover]").popover({ html:true });
}, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T12:45:13.207

DataTables 插件在过滤/排序时破坏和重建 DOM 元素。你可能会遇到这样的事情：

```
var myTable = $('#myTable').dataTable();
/* Apply the popover using the API */
myTable.$("[id^=popover-]").popover(); 
```

这里有一些关于它的文档：[http ://www.datatables.net/release-datatables/examples/advanced_init/events_post_init.html](http://www.datatables.net/release-datatables/examples/advanced_init/events_post_init.html)

如果没有帮助，您可能需要提供代码的基本示例。

# jquery - 为什么我不能将可拖动功能添加到常规带有 JQuery UI 的元素？

> ID：14157311
> 
> 赞同：0
> 
> 时间：2013-01-04T12:34:30.283
> 
> 标签：jquery, jquery-ui

jquery ui 的 .draggable() 交互声明它“在任何 DOM 元素上启用可拖动功能”；但是，我不能让它为以下工作：

```
<button id="btnWTF">WTF</button> 
```

和

```
$(document).ready(function() {
    $("#btnWTF").draggable();    
}); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:38:43.403

试试这个..这会取消按钮的默认点击事件。

```
$('#btnWTF').draggable({cancel:false}); 
```

# objective-c - 从现在开始获取所有 NSDates 不需要的行为

> ID：14157312
> 
> 赞同：0
> 
> 时间：2013-01-04T12:34:32.920
> 
> 标签：objective-c, nsdate, nsdatecomponents

我想在 30 天后得到所有的 NSDate。但是它不能正常工作。

这是我正在使用的代码：

```
 for (int i = 0; i < days; i++) {

        NSDate *today = [self getToday];

        NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

        NSDateComponents *components = [[NSDateComponents alloc] init];
        components.day = i;
        NSDate *nextMonth = [gregorian dateByAddingComponents:components toDate:today options:0];

        NSDateComponents *nextMonthComponents = [gregorian components:NSYearCalendarUnit | NSMonthCalendarUnit fromDate:nextMonth];

        NSDateComponents *todayDayComponents = [gregorian components:NSDayCalendarUnit fromDate:today];

        nextMonthComponents.day = todayDayComponents.day+i;
        NSDate *nextMonthDay = [gregorian dateFromComponents:nextMonthComponents];
        DLog(@"nextMonthDay = %@",nextMonthDay);

        [months addObject:nextMonthDay];

    } 
```

我正在获取列表：

```
nextMonthDay = 2013-01-03 22:00:00 +0000
nextMonthDay = 2013-01-04 22:00:00 +0000
nextMonthDay = 2013-01-05 22:00:00 +0000
nextMonthDay = 2013-01-06 22:00:00 +0000
nextMonthDay = 2013-01-07 22:00:00 +0000
nextMonthDay = 2013-01-08 22:00:00 +0000
nextMonthDay = 2013-01-09 22:00:00 +0000
nextMonthDay = 2013-01-10 22:00:00 +0000
nextMonthDay = 2013-01-11 22:00:00 +0000
nextMonthDay = 2013-01-12 22:00:00 +0000
nextMonthDay = 2013-01-13 22:00:00 +0000
nextMonthDay = 2013-01-14 22:00:00 +0000
nextMonthDay = 2013-01-15 22:00:00 +0000
nextMonthDay = 2013-01-16 22:00:00 +0000
nextMonthDay = 2013-01-17 22:00:00 +0000
nextMonthDay = 2013-01-18 22:00:00 +0000
nextMonthDay = 2013-01-19 22:00:00 +0000
nextMonthDay = 2013-01-20 22:00:00 +0000
nextMonthDay = 2013-01-21 22:00:00 +0000
nextMonthDay = 2013-01-22 22:00:00 +0000
nextMonthDay = 2013-01-23 22:00:00 +0000
nextMonthDay = 2013-01-24 22:00:00 +0000
nextMonthDay = 2013-01-25 22:00:00 +0000
nextMonthDay = 2013-01-26 22:00:00 +0000
nextMonthDay = 2013-01-27 22:00:00 +0000
nextMonthDay = 2013-01-28 22:00:00 +0000
nextMonthDay = 2013-01-29 22:00:00 +0000
nextMonthDay = 2013-01-30 22:00:00 +0000
nextMonthDay = 2013-03-03 22:00:00 +0000
nextMonthDay = 2013-03-04 22:00:00 +0000 
```

列表末尾是：

```
nextMonthDay = 2013-01-29 22:00:00 +0000
nextMonthDay = 2013-01-30 22:00:00 +0000
nextMonthDay = 2013-03-03 22:00:00 +0000
nextMonthDay = 2013-03-04 22:00:00 +0000 
```

所以这是不正确的。应该有

```
2013-01-29 22:00:00 +0000
2013-01-30 22:00:00 +0000
2013-03-01 22:00:00 +0000
2013-03-02 22:00:00 +0000 
```

也许有人可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:37:34.837

您想查看日期和时间编程指南，尤其是：[将组件添加到日期

](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW1)

您需要在循环中使用 setDay: 方法来为您开始使用的参考 NSDate 的每一天偏移生成 NSDate 实例。

```
 NSLog(@"30 consecutive days!");// just hello.
                                   // Set up data outside the loop...
    NSDate *today = [[NSDate alloc] init];
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];
        // Surely you want to do something clever with these beyond logging them immediately, right? Let's put them in an array. They'll be in order and we can use them again later.
    NSMutableArray *thirtyConsecutiveDays = [[NSMutableArray alloc] initWithCapacity:30];
    int days = 30; // This is one less than thirty-one.
                   // Ok, let's loop!
    for (int i = 0; i < days; i++) {
            // We're going to want a new one of these each time through the loop.
        NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
            // We need to tell it how far to offset from the reference NSDate.
        [offsetComponents setDay:i]; // incrementing by i days.
                                     // We will have our current NSDateComponents friend tell our NSCalendar friend what NSDate we want next...
        NSDate *anotherDate = [gregorian dateByAddingComponents: offsetComponents
                                                         toDate:today options:0];
            // Now add our latest NSDate iteration to our array.
        [thirtyConsecutiveDays addObject:anotherDate];
    }
        // This is just logging results.
    for (NSDate *aDate in thirtyConsecutiveDays) {
        NSLog(@"%@",aDate);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:23:19.717

我有不同的解决方案给你

```
int min = 60*60*24;
for (int i = 0; i < days; i++) {

        NSDate *today = [self getToday];
        NSDate *newDate = [today dateByAddingTimeInterval:(min*i)];
} 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:38:12.947

怎么样：

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = 1;
NSDate *date = [self getToday];
for (int i = 1; i < 30 ; i++) {
    date = [calendar dateByAddingComponents:components toDate:date options:0];
    [months addObject:date];
} 
```

# in-app-purchase - Windows Phone 8 应用内购买的最低金额是多少？

> ID：14157314
> 
> 赞同：0
> 
> 时间：2013-01-04T12:34:53.800
> 
> 标签：in-app-purchase, windows-phone-8

我已经搜索和搜索，但看起来我的 Google-fu 很弱。

有谁知道 WP8 上 IAP 消耗品的**最低**购买价格是多少？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T23:51:06.050

目前，IAP 产品可以免费出售（0.0 美元），最高 499.99 美元。免费的 IAP 项目是可以的，甚至是用户体验的最佳实践，以便让消费者习惯在您的应用中进行应用内购买的想法。

![WP8 内购产品](../Images/750c009c43107492cdbb30ce9b4b325c.png)

以下是所有允许的 WP8 产品价格（以美元计）：0.00 美元、0.99 美元、1.29 美元、1.49 美元、1.99 美元、2.49 美元、2.99 美元、3.49 美元、3.99 美元、4.49 美元、4.99 美元、5.99 美元、6.99 美元, 7.99 美元, 8.99 美元, 9.99 美元, 10.99 美元, 11.99 美元, 12.99 美元, 13.99 美元, 14.99 美元, 15.99 美元, 16.99 美元, 17.99 美元, 18.99 美元, 19.99 美元, 20.99 美元, 21.99 美元, 22.99 美元, $, 24.99$, 25.99$, 26.99$, 27.99$, 28.99$, 29.99$, 30.99$, 31.99$, 32.99$, 33.99$, 34.99$, 35.99$, 36.99$, 37.99$, 38.99$, 39\. 40.99 美元、41.99 美元、42.99 美元、43.99 美元、44.99 美元、45.99 美元、46.99 美元、47.99 美元、48.99 美元、49.99 美元、50.99 美元、59.99 美元、69.99 美元、79.99 美元、89.99 美元、99.9 美元。 ，119.99 $，129.99 $，139.99 $，149.99 $，159.99 $，159.99 $，169.99 $，179.99 $，189.99 $，199.99 $，209.99 $，219.99 $，229.99 $，239.99 $，249.99 $，299.99 $，349.99 $，399.99 $ 349.99 $，399.99美元，449.99 美元，499.99 美元。

# java - 在tomcat下创建文件

> ID：14157318
> 
> 赞同：2
> 
> 时间：2013-01-04T12:35:21.283
> 
> 标签：java, tomcat

我想显示来自数据库的文件（存储为 Blob）。所以我想在调用显示文件的方法之后将它复制到 tomcat 服务器下。那么是否有可能在 tomcat 中创建一个临时文件夹。

任何帮助将不胜感激非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:09:21.710

tomcat 中已经存在一个临时文件夹。

```
tomcat/temp 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:36:24.053

你想要的是一个 Java Servlet，它：

1.  从数据库中检索数据 blob
2.  将数据流回浏览器，就像正在返回文件一样

这是Java Ranch上的一个例子，我认为它很好地总结了这个想法：http: [//www.coderanch.com/t/291337/JSP/java/Display-database-BLOB-jsp](http://www.coderanch.com/t/291337/JSP/java/Display-database-BLOB-jsp)

请记住，servlet 绑定到一个 URL，它通过 URL 末尾的查询参数接收一组参数，然后它将使用这些参数去获取数据并返回它。确保返回数据上的 MIME 类型是正确的，因为这是浏览器的线索，用于处理流向它的数据。也就是说，对于浏览器来说，响应只是一大堆数据，它看到的 MIME 类型有助于它确定应该采取什么行动。是否应将其保存到文件、显示等。

您可以在 Stack Overflow 问题中看到关于这部分内容的一些讨论：[Help getting image from Servlet to JSP page](https://stackoverflow.com/questions/1154254/help-getting-image-from-servlet-to-jsp-page)

# javascript - json在瓶子框架中的javascript中不起作用

> ID：14157324
> 
> 赞同：0
> 
> 时间：2013-01-04T12:35:39.503
> 
> 标签：javascript, jquery, python, bottle

我现在完全对瓶中数据结构的使用感到困惑......

现在我正在使用 Jquery 工具 ztree 在我的网页中构建一棵树。

索引.py：

```
data = [{'name':'1'},
        {'name':'2'}]
return template('index', data) 
```

但是，当我尝试在我的 JavaScript 代码中获取数据`{{data}}`，然后将其传递给 ztree 以构建我的树时，它什么也没有显示。

另一方面，如果我`[{'name':1'},{'name':2}]`直接传递给 ztree，就会按预期构建一棵树。那么两者有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:41:08.433

您正在传递一个*Python*结构，而 Javascript 框架对此一无所知。插入到模板中的字符串表示可能看起来很像 JavaScript 结构，但有（很多）差异。

使用模块将其转换为 Javascript*可以*读取的结构`json`：

```
import json

# ...
data = json.dumps(data) 
```

然后将其作为（未转义的）变量插入到您的 Javascript 代码中：

```
data = {{!data}}; 
```

# ajax - 如何在使用 ajax 时检查验证错误并做出反应

> ID：14157329
> 
> 赞同：1
> 
> 时间：2013-01-04T12:36:06.687
> 
> 标签：ajax, validation, jsf-2

我有一个`h:selectOneListbox`具有属性的`required="true"`. 客户端验证`a4j:ajax`工作正常。

如果完成了有效的选择，则会呈现另一个面板组。

**例子：**

```
<h:selectOneListbox 
....
id="first" 
....
 required="true"
>
<a4j:ajax event="valueChange"  render="secondGroup" listener="#{myController.anotherMethodINeed}"/>
</h:selectOneListbox>

<!-- the other panel -->

<h:panelGroup id="secondGroup" layout="none">
     <h:panelGroup id="secondGroupCheck" layout="none" rendered="#{not empty model.first}">

     </h:panelGroup>
</h:panelGroup> 
```

这也有效。

**这是问题所在：**

如果用户现在在第一个选择框上选择了一个非法值（比如一个空的），那么在客户端验证输入。因此，信息永远不会进入模型。在第一个有效输入之后，面板总是被渲染。没有办法让它再次消失，因为服务器不知道更改。

我知道的唯一解决方法是为这样的字段制作一个自定义验证器。如果需要渲染面板，验证器会设置一个标志。然后可以使用此标志来决定是否应呈现面板组。

有没有更聪明的方法来做到这一点？

我知道我可以使用类似`rendered="#{not facesContext.validationFailed}"`检查所有字段的方法，但我不知道只检查一个字段的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:49:24.547

如果组件在验证阶段[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)抛出 a ，那么 JSF 将自动调用with 。因此，这意味着您可以在视图中使用来检查特定组件是否已通过验证。`ValidatorException`[`UIInput#setValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#setValid%28boolean%29)`false`[`UIInput#isValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#isValid%28%29)

您可以使用该`binding`属性将`UIInput`组件绑定到视图，然后以通常的 EL 方式访问其所有属性。

```
<h:selectOneListbox id="first" binding="#{first}" ... required="true">
    ...
    <a4j:ajax listener="#{myController.anotherMethodINeed}" render="secondGroup" />
</h:selectOneListbox>

<h:panelGroup id="secondGroup">
    <h:panelGroup id="secondGroupCheck" rendered="#{not empty model.first and first.valid}">
        ...
    </h:panelGroup>
</h:panelGroup> 
```

顺便说一句，`layout="none"`是 的无效属性`<h:panelGroup>`，所以我省略了它。此外，内部组件`event="valueChange"`已经是默认设置，所以我省略了它。`<a4j|f:ajax>``UIInput`

# ruby-on-rails - 我们如何搜索任何单词都可以在 sunspot solr on rails 项目上搜索

> ID：14157332
> 
> 赞同：1
> 
> 时间：2013-01-04T12:36:32.637
> 
> 标签：ruby-on-rails, solr, ruby-on-rails-3.2, sunspot-solr

我如何用句子搜索全文并搜索任何匹配的单词。

前任：-

“我可以找到”在模型 ttle 中搜索

它必须显示匹配“may”、“i”、“find”这两个词的结果

```
test = Model.search do 
  fulltext key do
    fields(:title)
    query_phrase_slop 1
  end
  without(:field_disabled, true)
  facet(:obj_type)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:44:46.190

我得到的输出只是搜索键也接受单词数组，所以我们可以通过下面的代码得到这个

```
def custom_search
test = Model.search do 
 fulltext key do
  fields(:title)
  query_phrase_slop 1
 end
 without(:field_disabled, true)
 facet(:obj_type)
end
if test.hits.size==0 #check the condition for no result matched for full text and passing every word
test = Model.search do 
 fulltext key.split(' ') do # key.split(' ') code make total sentence into array of words
  fields(:title)
  query_phrase_slop 1
 end
 without(:field_disabled, true)
 facet(:obj_type)
end
end
return test
end 
```

# ajax - 如何让验证脚本与 Mootools 表单一起使用

> ID：14157333
> 
> 赞同：1
> 
> 时间：2013-01-04T12:36:38.873
> 
> 标签：ajax, forms, validation, mootools

我希望你能帮助，

我对 mootools 比较陌生

我一直在使用[http://zendold.lojcomm.com.br/fvalidator/](http://zendold.lojcomm.com.br/fvalidator/)来验证一些网络表单，我想尝试将它与 Ajax 表单一起使用。这是一个使用 Mootools 1.2.5 的旧网站。

[http://jsfiddle.net/jessicajet/gTqV8/](http://jsfiddle.net/jessicajet/gTqV8/)是我尝试使用它的形式。（此处不添加 fValidator 脚本）

这就是我用来提交表单的内容

```
formtostop.addEvent("submit", function(e) {
    e.stop();
    new Request({
        url: this.get("action"),
        method: "post",
        data: this,
        onRequest: function() {
            document.id("result").set("html", "sending...");
        },
        onComplete: function() {
            document.id("result").set({html: '<div class="response"><p>Thank you for completing our contact form, we will get back to you as soon as possible</p></div>', style: 'background:red'});
        }
    }).send();
}); 
```

当我点击提交验证并触发 ajax 表单时，这是意料之中的。

我可以让提交按钮在 e.stop() 之前查找验证脚本吗？new Request({ 还是我试图做一些不可能的事情？

我将不胜感激任何可以提供的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:42:23.287

[http://zendold.lojcomm.com.br/fvalidator/js/fValidator-full.js](http://zendold.lojcomm.com.br/fvalidator/js/fValidator-full.js)，看看 _onSubmit 函数。如果 isValid 语句为真，您应该扩展此类 (http://mootools.net/docs/core/Class/Class) 并修改 _onSubmit 函数以执行请求。

# highcharts - 如何在 HIGHCHARTS 中消除 x 轴和框架之间的间隙并将系列标签设置为单行

> ID：14157337
> 
> 赞同：0
> 
> 时间：2013-01-04T12:36:46.190
> 
> 标签：highcharts

我是这个论坛的新手，有两个问题。

*   我只是想知道我们是否可以消除高图表中轴后面的差距。我在 API 中没有找到任何选项。

*   如何在单行中获取系列标签。

我是新用户，无法发布图片。

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Highcharts Example</title>

    <script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'bar'
        },
        title: {
            text: ''
        },
        xAxis: {
            gridLineWidth: 0,
            categories: ['Deutsche-FR Bank', 'Barelays-LDN', 'HSBC-SG', 'Citi-NY'],
            minorTickLength: 0,
            tickLength: 0,
            labels: {
                align: 'left',
                x: 2,
                y: 7,           
                color: '#2257D6',
                style: {
                    color: '#000',
                    font: '11px Trebuchet MS, Verdana, sans-serif'
                }
            },
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            gridLineWidth: 0,
            title: {
                text: '',
                align: 'high',
                color: '#333'
            },
            labels: {
                 enabled: false,
                overflow: 'justify'
            }
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name +': '+ this.y +'';
            }
        },
        plotOptions: {
            bar: {
                borderWidth: 0.0,
                pointWidth: 22,
                dataLabels: {
                    enabled: false
                }                   
            },
            series: {
               shadow: false
            }
        },          
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -100,
            y: 100,
            floating: false,
            borderWidth: 1,
            backgroundColor: '#FFFFFF',
            shadow: true,
            visible : false,
            enabled: false
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'Count',
            data: [82,323,245,350],
            color: '#2AAA00',
            borderWidth: 0,
            plotShadow: false,
            plotBorderWidth: 0
        }]
    });
});

});
    </script>
</head>
<body>
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="container" style="width:220px;height:145px;overflow:auto"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:42:29.060

```
How to get the series label in single line 
```

为此，您需要将该属性`Rotation`用作

```
 rotation: 90 
```

检查**[API](http://api.highcharts.com/highcharts#xAxis.labels.rotation)。**

设置此属性也回答了您的问题 1。

在这里你可以找到**[演示](http://jsfiddle.net/gopinaghr/GkZrH/3/)**

# d3.js - 如何在D3中将矩形添加到指定轴

> ID：14157340
> 
> 赞同：0
> 
> 时间：2013-01-04T12:37:08.187
> 
> 标签：d3.js

我在 D3 中完成了一个可缩放的区域图，效果很好。现在我正在尝试在绘图中间沿 x 轴的指定位置添加一个矩形。但是，我似乎无法弄清楚如何做到这一点。“rect”元素是使用绘图的绝对 (x,y) 指定的，因此在使用缩放时它会保持在同一位置。

所以我想知道是否有办法在绘图时将“rect”与轴联系起来，以便它受益于所有缩放和平移行为，或者我是否需要手动编辑矩形的 x、y、宽度和长度翻译以及找出相应的 x 和 y 坐标在图上的位置？我正在尝试使用“rect”，因为它似乎是最灵活的元素。

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:01:36.827

我不确定您是如何进行缩放的，但我猜您正在更改与轴一起使用的比例的参数？您应该能够使用相同的比例来放置矩形。

如果您从绘图坐标开始，那么可能在比例尺上使用 invert 函数会有所帮助（至少可用于定量比例尺），例如[https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_invert](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-linear_invert)

您应该能够获取初始绘图坐标并将它们反转以确定可以随着比例变化而移动的数据坐标。

如果比例是线性的，您也可以反转长度和宽度，但如果您的域不包含 0，则必须计算偏移量。最简单的是计算矩形的端点，例如：

```
var dataX0 = xScale.invert(rect.x);
var dataX1 = xScale.invert(rect.x + rect.width);
var dataWidth = dataX1 - dataX0; 
```

如果您已经拥有轴坐标中的数据，您应该能够执行以下操作：

```
var rectData = [{x: 'April 1, 1999', y: 10000, width: 100, height:100}];
svg.selectAll('rect.boxy')
    .data(rectData)
    .enter().append('rect').classed('boxy', true)
    .style('fill','black');

svg.selectAll('rect.boxy')
    .attr('x', function(d) { return x(new Date(d.x));} )
    .attr('y', function(d) { return y(d.y);})
    .attr('width', function(d) { return d.width;} )
    .attr('height', function(d) { return d.height;} ); 
```

根据您分享的示例，其中 x 和 y（作为函数）是轴所基于的比例。

# javascript - 如何在 moment.js / javascript 中人性化这个完整的持续时间

> ID：14157341
> 
> 赞同：13
> 
> 时间：2013-01-04T12:37:13.107
> 
> 标签：javascript, momentjs

我有一个用于文件上传的“剩余时间”计数器。计算剩余持续时间并将其转换为毫秒，如下所示：

```
var elapsedTime = e.timeStamp - timestarted;
var speed = e.loaded / elapsedTime;
var estimatedTotalTime = e.totalSize / speed;
var timeLeftInSeconds = (estimatedTotalTime - elapsedTime) / 1000; 
```

然后我构建了一个数组，我打算将其构建为人性化的字符串。数组如下：

```
var time = {
              years : Math.round(moment.duration(timeLeftInSeconds, 'milliseconds').years()),
              months : Math.round(moment.duration(timeLeftInSeconds, 'milliseconds').months()),
              days : Math.round(moment.duration(timeLeftInSeconds, 'milliseconds').days()),
              hours : Math.round(moment.duration(timeLeftInSeconds, 'milliseconds').hours()),
              minutes : Math.round(moment.duration(timeLeftInSeconds, 'milliseconds').minutes()),
              seconds : Math.round(moment.duration(timeLeftInSeconds, 'milliseconds').seconds())
}; 
```

这一切都很完美，如果我像这样输出这个数据的字符串表示：

```
 console.log(time.years + ' years, ' + time.months + ' months, ' + time.days + ' days, ' + time.hours + ' hours, '+ time.minutes + ' minutes, ' + time.seconds + ' seconds'); 
```

我它返回一个很好的简单剩余时间流，如下所示：

```
0 years, 0 months, 0 days, 0 hours, 1 minutes, 7 seconds 
```

我现在需要做的是人性化这个输出，以便根据剩余时间构建字符串。例如

*   还剩2年3个月
*   还剩 1 小时 32 分 41 秒
*   还剩 7 秒
*   还剩 3 分 46 秒
*   还剩 6 秒

等等……等等……

现在我知道 moment.js 具有自动人性化持续时间的能力，这对单个值很好，但这可以有多个可能的值（小时/分钟/秒等）

如何使用 moment.js 或手动构建字符串来人性化这些数据？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-17T22:34:13.127

我的[HumanizeDuration.js](https://github.com/EvanHahn/HumanizeDuration.js)库听起来正是您想要的：

```
humanizeDuration(1);         // "1 millisecond"
humanizeDuration(3000);      // "3 seconds"
humanizeDuration(2012);      // "2 seconds, 12 milliseconds"
humanizeDuration(97320000);  // "1 day, 3 hours, 2 minutes" 
```

看起来我的回答有点晚了，但也许它会帮助其他人看到这个问题！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-04T12:44:35.643

我认为你最好的选择是这样的：

```
function humanize(time){
    if(time.years   > 0){   return time.years   + ' years and '     + time.months   + ' months remaining';}
    if(time.months  > 0){   return time.months  + ' months and '    + time.days     + ' days remaining';}
    if(time.days    > 0){   return time.days    + ' days and '      + time.hours    + ' hours remaining';}
    if(time.hours   > 0){   return time.hours   + ' hours and '     + time.minutes  + ' minutes and ' + time.seconds + ' seconds remaining';}
    if(time.minutes > 0){   return time.minutes + ' minutes and '   + time.seconds  + ' seconds remaining';}
    if(time.seconds > 0){   return time.seconds + ' seconds remaining';}
    return "Time's up!";
} 
```

或者，您可以使用此功能：

```
function humanize(time){
    var o = '';
    for(key in time){
        if(time[key] > 0){
            if(o === ''){
                o += time[key] + ' ' + key + ' ';
            }else{
                return o + 'and ' + time[key] + ' ' + key + ' remaining';
            }
        }
    }
    return o + 'remaining';
} 
```

它返回`"x <time> and y <time> remaining"`, 对于 2 个最大值。（或者在最后一种情况下只有几秒钟。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-12T04:02:30.890

你应该试试这个插件：[moment-duration-format](https://github.com/jsmreese/moment-duration-format)

它的语法非常方便：

```
var moment = require('moment');
require("moment-duration-format");
moment.duration(32832, "seconds").format("h [hrs]: m [min]: s [sec]")
// => 9 hrs: 7 min: 12 sec" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T09:24:37.360

我最终对 date-fns 的[formatDistanceToNow](https://date-fns.org/v2.9.0/docs/formatDistanceToNow)感到满意。您可以添加该函数，而无需添加像 moment.js 这样的整个库

# c# - 如何从php文件将值传递给请求对象

> ID：14157344
> 
> 赞同：1
> 
> 时间：2013-01-04T12:37:19.687
> 
> 标签：c#, php, asp.net

我有一个小问题。我开发了 ac# 文件，它接受请求对象中的数据。Request 对象包含一个字符串，然后我对该字符串执行各种操作，但问题是我需要从 PHP 文件调用这个 aspx 文件。

这就是我在 ASPX 文件中接受数据的方式

```
protected void Page_Load(object sender, EventArgs e)
    {
        try{
            byte[] byteArray;

            byteArray = Request.BinaryRead(Request.TotalBytes);

               // This bytes array to string method perfectly converts the request data into string.
            string xmlString = Utility.Utility.ByteArrayToString(byteArray); 
```

现在，如果我从 PHP 文件传递​​ JSON 字符串，那么请指导我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:40:33.270

如果它是 JSON 字符串，那么您可以使用 JSON 序列化程序来将此字符串反序列化为一个类。例如，您可以使用内置[`JavaScriptserializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类或[`Json.NET`](http://james.newtonking.com/projects/json-net.aspx).

假设 PHP 文件将以下 JSON 发送到 POST 请求的正文：

```
{"foo":"bar","baz":123} 
```

现在您可以定义一个与此 JSON 结构匹配的相应模型：

```
public class MyModel
{
    public string Foo { get; set; }
    public int Baz { get; set; }
} 
```

然后从请求中读取 JSON 有效负载并使用序列化程序将其反序列化回您的模型：

```
protected void Page_Load(object sender, EventArgs e)
{
    using (var reader = new StreamReader(Request.InputStream))
    {
        string json = reader.ReadToEnd();
        var serializer = new JavaScriptSerializer();
        MyModel model = serializer.Deserialize<MyModel>(json);
        // you could use the model here
    }
} 
```

# php - 未调用 trait 定义的构造函数/析构函数

> ID：14157347
> 
> 赞同：9
> 
> 时间：2013-01-04T12:37:28.990
> 
> 标签：php, traits

如何启动由 trait 定义的构造函数和析构函数以及类的构造函数和析构函数。例如，

```
trait Audit
{
    public function __construct()
    {
        parent::__construct(); // Doesn't work...

        $this->_name = __CLASS__;

        $this->AuditAction('Started');
    }

    public function __destruct()
    {
        parent::__destruct(); // Doesn't work...

        $this->AuditAction('Ended');

        echo $this->_log;        
    }

    public function AuditAction($n)
    {
        $this->_log .= $this->GetCurrentTimeStamp() . ' ' . $this->_name . ": $n" . PHP_EOL;
    }

    private function GetCurrentTimeStamp()
    {
        return (new DateTime())->format('[Y-m-d H:i:s]');
    }

    private $_name, $_log = '';
}

class C
{
    use Audit;

    public function __construct()
    {

    }

    public function __destruct()
    {

    }
}

$c = new C();
```

我应该得到几行文本，但我没有得到，因为 C 类的构造函数是显式调用的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T12:38:35.957

当类被组合时，C 的构造函数和析构函数将优先于 trait 构造函数和析构函数：

> 从基类继承的成员被由 Trait 插入的成员覆盖。**优先顺序是当前类中的成员覆盖 Trait 方法**，这反过来又覆盖继承的方法。

来源： http: [//php.net/traits](http://php.net/traits)

换句话说，从 C 中删除空的构造函数和析构函数，就会使用 trait 的构造函数和析构函数。无法同时使用 C 和特征，构造函数和析构函数，因为特征不像常规继承那样工作。

一般来说，我建议不要给 Traits 自己的构造函数或析构函数，因为你不能实例化 Traits。*您从具有*Trait的类进行实例化，并且该类应该处于控制之中。考虑将`onCreate()`or`onDestroy()`方法添加到特征中，并从 C 上适当的魔术方法调用这些方法。您可以通过在 C 中为特征 __construct 起别名来实现相同的目的，但我认为这会淡化语义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-02T19:21:08.600

您必须为`Trait`. 然后你可以从你的类中调用这些方法。

由于类的方法会覆盖 的方法，因此`Trait`您必须为 的方法分配不同的名称`Trait`：

```
class C
{
    use Audit {
        Audit::__construct as auditConstruct;
        Audit::__destruct as auditDestruct;
    }

    public function __construct()
    {
         $this->auditConstruct();
    }

    public function __destruct()
    {
         $this->auditDestruct();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-18T17:17:11.893

除了[Aeremdir](https://stackoverflow.com/users/1399706/aerendir)的答案：从基类和多个特征继承的构造函数......

```
<?php
  trait T1 {
    public function __construct() {
      $this->someval |= 0b0001;
      echo "T1::__construct() done\n";
    }
  }

  trait T2 {
    public function __construct() {
      $this->someval |= 0b0010;
      echo "T2::__construct() done\n";
    }
  }

  class C1 {
    protected $someval;

    public function __construct() {
      $this->someval = 0b10000000;
      echo "C1::__construct() done\n";
    }
  }

  class C2 extends C1 {
    use T1, T2 {
      T1::__construct as private T1__construct;
      T2::__construct as private T2__construct;
    }

    public function __construct() {
      parent::__construct();
      $this->T1__construct();
      $this->T2__construct();

      $this->someval |= 0b00100000;
      echo "C2::__construct() done\n";
    }

    public function someval() {
      $str = base_convert($this->someval, 10, 2);
      $len = strlen($str);
      if($len < 8)
          $str = str_repeat('0', 8 - $len) . $str;

      return '0b' . $str;
    }
  }

  $v1 = new C2();
  echo $v1->someval();
?> 
```

在 PHP 7.0.5 下，此代码导致...

> C1::__construct() 完成
> T1::__construct() 完成
> T2::__construct() 完成
> C2::__construct() 完成
> 0b10100011

# html - 用多行框填充容器（取决于滚动条）

> ID：14157348
> 
> 赞同：1
> 
> 时间：2013-01-04T12:37:30.353
> 
> 标签：html, css

如何以适用于所有浏览器的方式填充 500px 宽的容器，`overflow-y`设置为`scroll`2 行（例如）2 个框？

![我想要达到的目标](../Images/c218d8b468dda57b3492d26d79be61e1.png)

问题是不同的浏览器具有不同的滚动条宽度，并且滚动条可能会或可能不会占用容器中的空间。这就是为什么我不能只给盒子一个 250 像素的宽度。

我应该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:16:09.823

好的，结果是单个盒子上的填充搞砸了盒子的计算宽度（宽度设置为 50%）。删除盒子上的填充并创建一个带边距的内盒来模拟填充，解决了我的问题。

此外：

正如上面的用户 deiga 评论：使用`box-sizing: border-box`也将解决问题

# jquery - 空字段消息显示几秒钟

> ID：14157351
> 
> 赞同：0
> 
> 时间：2013-01-04T12:37:40.020
> 
> 标签：jquery

我是 jQuery 新手，我正在尝试使用教程来理解它。我从注册表单验证开始。我做了一个脚本，它工作正常，但消息显示了几秒钟。我希望在用户再次填写该字段之前显示消息。

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
  <style>
  p { color:red; margin:4px; }
  b { color:blue; }
  </style>
  <script src="jquery-latest.js"></script>
  <script src="jquery.js"></script>
</head>
<body>
  <p></p>

 <form id="form1"> 
  Name<input type="text" name="fname" id="fname">
  <input type="submit" value="submit" id="submit">
</form>
    <script>   
            $(document).ready(function(){
        //var msg=$("p").text("Are you sure?");
        $("#form1").click(function(){
            if ($('#fname').val()=="") {
            //$("#ms").show("slow");
            $("p").html("Are you sure?");
            //$(this).show("Are you sure?");

            }
        });
            });
    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:43:07.443

嗨，做一件事用您的代码替换下面的代码

```
 <script>   

     $(document).ready(function(){
        //var msg=$("p").text("Are you sure?");
           $("#submit").click(function(){
           if ($('#fname').val()=="")
           {
             //$("#ms").show("slow");
              $("p").html("Are you sure?");
             return false;
            //$(this).show("Are you sure?");
           }
        });
            });
        </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:43:28.093

### 最好使用`<form>`' 事件，而不是`onclick`for `submit`。

将您更改`script`为：

```
<script>
    $(document).ready(function(){
        //var msg=$("p").text("Are you sure?");
        $("#form1").submit(function(){
            if ($('#fname').val()=="") {
                //$("#ms").show("slow");
                $("p").html("Are you sure?");
                //$(this).show("Are you sure?");
            }
            return false;
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:50:25.550

`return false`在函数结束时使用

```
$("#form1").submit(function(){
    if ($('#fname').val()=="") {
        //$("#ms").show("slow");
        $("p").html("Are you sure?");
        //$(this).show("Are you sure?");
    }
    return false;
}); 
```

并为您的第二个问题使用`keyup`

```
$('#fname').keyup(function(){
  if(empty($(this).val()))
      $("p").show();
  else
     $("p").hide();
}); 
```

但是.. 我建议您使用一些 jquery[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，而不是自己编写...

# android - RelativeLayout 中不能存在循环依赖

> ID：14157358
> 
> 赞同：2
> 
> 时间：2013-01-04T12:38:10.560
> 
> 标签：android, android-relativelayout

我正在将 View 渲染为`Bitmap`. 我需要一个在顶部或底部带有指针的气球，具体取决于它是否适合屏幕。为此，我使用 a `RelativeLayout`，因为我需要指针部分位于气球上方：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

    <LinearLayout android:id="@+id/balloon_body"
        android:layout_width="@dimen/pins_details_balloon_width"
        android:layout_height="wrap_content"
        android:layout_marginTop="-1dp"
        android:layout_marginBottom="-1dp"
        android:layout_below="@+id/pointer_top"
        android:orientation="vertical"
        >

        <TextView android:id="@android:id/title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="4dp"
            />

        <TextView android:id="@android:id/text1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="4dp"
            />

    </LinearLayout>

    <ImageView android:id="@id/pointer_top"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />

    <ImageView android:id="@+id/pointer_bottom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/balloon_body"
        />

</RelativeLayout> 
```

我膨胀这个视图，然后我想测量和布局它，所以我可以把它渲染成一个位图：

```
view.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT));
//view.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT));
view.measure(View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED), View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
//view.measure(View.MeasureSpec.makeMeasureSpec(3000, View.MeasureSpec.AT_MOST), View.MeasureSpec.makeMeasureSpec(3000, View.MeasureSpec.AT_MOST));
view.layout(0, 0, s_View.getMeasuredWidth(), s_View.getMeasuredHeight()); 
```

此代码在*view.measure(...)*上崩溃，在 RelativeLayout错误**中不能存在循环依赖项。**我尝试了不同的*LayoutParams*（没有 setLayoutParams(...) *measure(...)*崩溃并出现空指针异常），不同的*View.MeasureSpec* -s 但没有成功。如果我在最后一个 ImageView 中删除**android:layout_below="@id/balloon_body"**，它可以工作，但底部指针位于顶部。

我不能使用 LinearLayout，因为我需要将这些指针放在气球体的上方，而使用 LinearLayout 时，顶部指针将位于它的下方。问题出在哪里，我怎样才能实现我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-29T00:46:49.380

问题是由于布局参​​数中存在循环引用引起的。

例如，当视图 B 是 layout_below 视图 A 时，视图 A 不能再在其下方引用视图 B，alignRight 等。这也可以存在于多个视图之间：A 引用 B 引用 C。在那种情况下，C 不能引用 A因为循环依赖。

有关更多信息，请转到：[RelativeLayout 中不能存在循环依赖项，android？](https://stackoverflow.com/questions/23904281/circular-dependencies-cannot-exist-in-relativelayout-android)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:41:16.230

尝试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
>

 <ImageView android:id="@id/pointer_top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
<LinearLayout android:id="@+id/balloon_body"
    android:layout_width="@dimen/pins_details_balloon_width"
    android:layout_height="wrap_content"
    android:layout_marginTop="-1dp"
    android:layout_marginBottom="-1dp"
    android:layout_below="@+id/pointer_top"
    android:orientation="vertical"
    >

    <TextView android:id="@android:id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        />

    <TextView android:id="@android:id/text1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        />

</LinearLayout>
<ImageView android:id="@+id/pointer_bottom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/balloon_body"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-03T09:10:37.957

**循环依赖**意味着两个连续的视图在位置上相互依赖。

例如：

```
 <android.support.v4.view.ViewPager
    android:id="@+id/viewPager"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tabs"
    android:layout_above="@id/orderpaylayout"
    />

<Button
    android:id="@+id/orderbutton"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_margin="20dp"
    android:layout_centerInParent="true"
    android:background="@drawable/orderbuttonstyle"
    android:text="@string/order"
    android:textSize="16sp"
    android:textStyle="bold"
    android:visibility="gone" />

<Button
    android:id="@+id/paybutton"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_centerInParent="true"
    android:text="@string/Pay"
    android:textColor="#ffffff"
    android:textSize="16sp"
    android:visibility="gone"
    android:layout_below="@id/viewPager
    android:textStyle="bold"
    android:layout_margin="20dp"
    android:background="@drawable/paybuttonstyle"
    /> 
```

在上面的 XML 中，有三个视图。第一个视图 ViewPager 取决于 order button as **layout_above = orderButton**。一旦顶视图或底视图依赖于其他视图，就不能发生反向/向后依赖，即**两个视图不能同时相互依赖**。

上述错误示例的正确 XML 代码是：

```
 <android.support.v4.view.ViewPager
    android:id="@+id/viewPager"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tabs"
    android:layout_above="@id/orderpaylayout"
    />

<RelativeLayout
    android:id="@+id/orderpaylayout"
    android:layout_width="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_height="wrap_content">

<Button
    android:id="@+id/orderbutton"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_margin="20dp"
    android:layout_centerInParent="true"
    android:background="@drawable/orderbuttonstyle"
    android:text="@string/order"
    android:textSize="16sp"
    android:textStyle="bold"
    android:visibility="gone" />

<Button
    android:id="@+id/paybutton"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_centerInParent="true"
    android:text="@string/Pay"
    android:textColor="#ffffff"
    android:textSize="16sp"
    android:visibility="gone"
    android:textStyle="bold"
    android:layout_margin="20dp"
    android:background="@drawable/paybuttonstyle"
    />
</RelativeLayout> 
```

希望，这个例子会对你有所帮助。如果您认为这是正确的，请为其他好处投票，或者如果它是错误的或不起作用，请发表您的评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-11T12:28:12.393

如果您在相对布局中使用圆形背景（可绘制形状），则会抛出该错误

删除该形状或更改布局

# yii - yii CGridView 在 many_many 关系中只显示登录用户的记录

> ID：14157359
> 
> 赞同：1
> 
> 时间：2013-01-04T12:38:13.007
> 
> 标签：yii

我有两个表：
`user`并且`asset`有一个`user_asset`表使 many_many 关系

现在我只想在 CGridView 中显示与登录用户相关的资产（`user_id`来自`Yii::app()->user->id`）

如何编写使其成为可能的标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:25:13.840

1）您需要在两个模型中定义您的关系

用户：

```
'assets' => array(self::MANY_MANY, 'Asset', 'user_asset(user_id, asset_id)'), 
```

资产：

```
'users' => array(self::MANY_MANY, 'Asset', 'user_asset(asset_id, user_id)'), 
```

2）您创建一个仅获取所需数据的dataProvider（在模型（最佳）或控制器中定义它而不是在视图中）：

```
$dataProvider=new CActiveDataProvider('Asset', array(
'criteria'=>array(
    'with'=>array(
        'users'=>array(
            'condition' => 'id = ' . Yii::app()->user->id
         ),
     ),
),
 ...
)); 
```

3）你给你的 CGridView 好的提供者：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    ...
)); 
```

该代码作为示例给出，您应该根据需要对其进行调整！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T06:48:47.400

我得到了它，在 Model 类的搜索方法中添加了这个：

```
 $criteria->with=array(
      'users'  
    );
    $criteria->together = true;
    $criteria->condition = "users_users.user_id='".Yii::app()->user->id."'"; 
```

...并在 CActiveDataProvider 声明中：

```
'criteria'=>array(
    'with' => 'users',
    'together'=>true,
    'condition'=>'users_users.user_id = '.Yii::app()->user->id,
), 
```

也许不是最好的方法，但做需要的。`users_users`是 Yii 的 sql 表别名，我从错误消息中得到提示 :)

# hibernate - 使用 Hibernate4 的 EnumType 支持时出现异常

> ID：14157362
> 
> 赞同：0
> 
> 时间：2013-01-04T12:38:22.183
> 
> 标签：hibernate

请让我知道此异常的修复方法。在使用上面的 fetch API 时，我得到了上面提到的异常。我使用的数据库是mysql。我已将 java Enumeration 映射到 mysql 的 varchar 并且它正在正确插入行。但是在从 db 获取值时，它给出了上述异常。我认为它无法将 mysql varchar 映射到 java 枚举。

例外：

```
ERROR: Unknown column 'FOLDER' in 'where clause'
org.hibernate.exception.SQLGrammarException: Unknown column 'FOLDER' in 'where clause'
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy5.executeQuery(Unknown Source)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:2031)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1832)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1811)
    at org.hibernate.loader.Loader.doQuery(Loader.java:899)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)
    at org.hibernate.loader.Loader.doList(Loader.java:2516)
    at org.hibernate.loader.Loader.doList(Loader.java:2502)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2332)
    at org.hibernate.loader.Loader.list(Loader.java:2327)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:490)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1247)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at doa.ActionDetailsDOA.fetchActionDetailsByCircleIdProfileIdElementTypeAndactionId(ActionDetailsDOA.java:24)
    at doa.ActionDetailsDOA.main(ActionDetailsDOA.java:41)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'FOLDER' in 'where clause'
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    at com.mysql.jdbc.Util.getInstance(Util.java:381)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 18 more 
```

数据模型示例是：

```
public class ActionDetails implements java.io.Serializable {

    private static final long serialVersionUID = 1L;

    private AId id; // containing composite primary key
    private int parentId;
}

public class AId implements Serializable{
        private int fldCircleId;
    private int fldProfileId;
    private ElementType elementType;
}

class Folder extends ActionDetails {
    // contains attributes provided in ActionDetails.hbm.xml
}

class Item extends ActionDetails {
   // contains attributes provided in ActionDetails.hbm.xml
} 
```

ActionDetails.hbm.xml 示例：

```
<hibernate-mapping>
    <class name="model.ActionDetails" table="action_details">
        <composite-id name="id" class="model.ActionDetailsId">
            <key-property name="fldCircleId" type="int">
                <column name="fld_circle_id" />
            </key-property>
            <key-property name="fldProfileId" type="int">
                <column name="fld_profile_id" />
            </key-property>
            <key-property name="elementType">
                <column name="element_type" length="7" />
                <type name="org.hibernate.type.EnumType">
                    <param name="enumClass">model.ElementType</param>
                    <param name="type">12</param> <!-- 12 corresponds to java.sql.Types.VARCHAR -->
                </type>
            </key-property>
        </composite-id>

        <discriminator column="element_type"  insert="false"/>

        <property name="parentId" type="int">
            <column name="parent_id" not-null="true" />
        </property>
        <property name="elementIndex" type="int">
            <column name="element_index" not-null="true" />
        </property>
        <property name="level" type="int">
            <column name="level" not-null="true" />
        </property>
        <property name="oldActionId" type="java.lang.Integer">
            <column name="old_action_id" />
        </property>
        <property name="elementDetails" type="string">
            <column name="element_details" length="1000" />
        </property>

        <set name="menuHighestActionIds" table="menu_highest_action_id" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="fld_circle_id" not-null="true" />
                <column name="fld_profile_id" not-null="true" />
                <column name="element_type" length="7" not-null="true" />
                <column name="highest_action_id" not-null="true" />
            </key>
            <one-to-many class="model.MenuHighestActionId" />
        </set>
        <!-- Attributes of Folder.java -->

        <subclass name="model.Folder" discriminator-value="FOLDER">
            <property name="folderId" type="java.lang.Integer">
                <column name="folder_id" />
            </property>
            <property name="title" type="string">
                <column name="title" length="20" />
            </property>
        </subclass>

        <!-- Attributes of Item.java -->
        <subclass name="model.Item" discriminator-value="ITEM"> 
            <property name="softId" type="java.lang.Integer">
                <column name="softid" />
            </property>
            <property name="title" type="string">
                <column name="title" length="20" />
            </property>
            <property name="description" type="string">
                <column name="description" length="50" />
            </property>
            <property name="subscriptionInfo">
                <column name="subscriptioninfo" length="35" />
                <type name="org.hibernate.type.EnumType">
                    <param name="enumClass">model.SubscriptionInfo</param>
                    <param name="type">12</param><!-- 12 corresponds to java.sql.Types.VARCHAR -->
                </type>
            </property>
            <property name="commandType">
                <column name="commandtype" length="13" />
                <type name="org.hibernate.type.EnumType">
                    <param name="enumClass">model.CommandType</param>
                    <param name="type">12</param> <!-- 12 corresponds to java.sql.Types.VARCHAR -->
                </type>
            </property>
            <property name="keyword" type="string">
                <column name="keyword" length="10" />
            </property>
            <property name="shortcode" type="java.lang.Integer">
                <column name="shortcode" />
            </property>
        </subclass>

    </class>
</hibernate-mapping> 
```

示例 od ActionDetailsDOA.java ：

```
public List<ActionDetails> fetchActionDetailsByCircleIdProfileIdElementTypeAndactionId(int circleId, int profileId, ElementType elementType, int actionId) throws Exception{
    try{
        hibSession = HibernateUtil.getSessionFactory().openSession();
        tx = hibSession.beginTransaction();
        Query query = hibSession.createQuery("from ActionDetails as ad where ad.id.fldCircleId="+circleId+" and ad.id.fldProfileId="+profileId+" and ad.id.elementType="+elementType+" and ad.id.actionId="+actionId);
        List list = query.list();
        System.out.println(list);
        tx.commit();
        return null;
    }catch(Exception exception){
        tx.rollback();
        throw exception;
    }finally{
        if(hibSession != null){
            hibSession.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:05:26.647

我解决了这个问题，这是由于在 where 子句中处理 EnumType 时的 HQL 行为。

我将 HQL 查询更新为

查询 query = hibSession.createQuery("from ActionDetails as ad where ad.id.fldCircleId="+circleId+" and ad.id.fldProfileId="+profileId+" and ad.id.elementType='"+elementType+"' and ad. id.actionId="+actionId);

from: Query query = hibSession.createQuery("from ActionDetails as ad where ad.id.fldCircleId="+circleId+" and ad.id.fldProfileId="+profileId+" and ad.id.elementType="+elementType+" and ad. id.actionId="+actionId);

这些事情都是为我完成的。

阿杰

# asp.net-mvc - 单击按钮时的 ASP.NET MVC 操作

> ID：14157374
> 
> 赞同：1
> 
> 时间：2013-01-04T12:38:50.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想对一个按钮采取一些行动，点击下面给出的代码--->

```
<% if(Model!=null && Model.Count>0){%>
<ul>
<% foreach(var Movie in Model)
        {
            %> <li> <%= Movie.Id %>  
            <%= Movie.Title %>  
            <%= Movie.ReleaseDate %> 

            <input type="button" value="edit" name="edit" onclick="EditMovie" /> 
            <input type="button" value="delete" name="delete" /> </li> 
            <% } %>
<% } %>
</ul> 
```

我有一些功能要做，但是如何将这些按钮链接到这些控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:05:16.370

您可以为每个按钮创建一个单独的表单：

```
<ul>
    <% foreach(var Movie in Model) { %> 
    <li> 
        <%: Movie.Id %>  
        <%: Movie.Title %>  
        <%: Movie.ReleaseDate %> 
        <%= Html.BeginForm("EditMovie", "Movies", new { id = Movie.Id }, FormMethod.Post) { %>
            <input type="submit" value="edit" name="edit" /> 
        <% } %>
        <%= Html.BeginForm("DeleteMovie", "Movies", new { id = Movie.Id }, FormMethod.Post) { %>
            <input type="submit" value="delete" name="delete" /> 
        <% } %>
    </li> 
    <% } %>
</ul> 
```

然后您将有 2 个相应的控制器操作：

```
[HttpPost]
public ActionResult EditMovie(int id)
{
    ...
}

[HttpPost]
public ActionResult DeleteMovie(int id)
{
    ...
} 
```

作为使用表单的替代方法，您可以使用 AJAX：

```
<ul>
    <% foreach(var Movie in Model) { %> 
    <li> 
        <%: Movie.Id %>  
        <%: Movie.Title %>  
        <%: Movie.ReleaseDate %> 

        <%= Ajax.ActionLink(
            "edit", 
            "EditMovie", 
            "Movies", 
            new { id = Movie.Id }, 
            new AjaxOptions { HttpMethod = "POST" }
        ) %>

        <%= Ajax.ActionLink(
            "delete", 
            "DeleteMovie", 
            "Movies", 
            new { id = Movie.Id }, 
            new AjaxOptions { HttpMethod = "POST" }
        ) %>
    </li> 
    <% } %>
</ul> 
```

如果您决定使用帮助程序，请不要忘记在您的页面中包含`jquery`和脚本。`jquery.unobtrusive-ajax.js``Ajax.ActionLink`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:08:19.070

最简单的方法？像这样的东西：

```
<% if(Model!=null && Model.Count>0){%>
<ul>
    <% foreach(var Movie in Model) { %> 
        <li>
            <%= Movie.Id %>  
            <%= Movie.Title %>  
            <%= Movie.ReleaseDate %> 
            <% using (Html.BeginForm("EditMovie")) { %>
                <%: Html.Hidden("Id", Movie.Id) %>
                <input type="submit" value="edit" name="edit" /> 
                <input type="submit" value="delete" name="delete" /> 
            <% } %>
        </li> 
    <% } %>
</ul>
<% } %> 
```

然后在你的代码后面：

```
public ActionResult EditMovie(int Id, string edit, string delete)
{
    if (delete != null)
    {
        // delete 
    }

    if (edit != null)
    {
        // edit
    }

    return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:13:06.493

连接处理程序的 jQuery 类似于；

```
 $(document).ready(function(){
    $('input[type="button"]').on('click', function(e){
        // etc
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:08:32.173

```
You can handle form action with Jquery.

$(document).ready(function(){
    $('.button-edit').on('click', function(e){
        $('#formMovie').attr('action','/edit/'+ someParameter)
    });
    $('.button-delete').on('click', function(e){
        $('#formMovie').attr('action','/edit/' + someParameter)
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T12:16:58.050

```
 foreach {
...
        <button type="button" class="btn btn-default editButton" id="movie_@Movie.Id">Edit</button>
...
    }

@section Scripts {
    <script type="text/javascript">
    $(document).ready(function () {
        $("editButton").click(function () {
            var id = this.id.split("_")[0];
            location.href = '@Url.Action("EditMovie", new RouteValueDictionary() { { "Controller", "Movie" } } )?id=' + id;
        });
    });
    </script>
} 
```

# razor - 为什么 Html Helper 为视图模型的子项的属性添加前缀？

> ID：14157376
> 
> 赞同：4
> 
> 时间：2013-01-04T12:39:02.107
> 
> 标签：razor

我有一个带有单个子实体和各种其他属性的视图模型。

在我看来，我想为子实体显示一个表单。使用以下代码：

```
@Html.HiddenFor(model => model.Item.ItemID) 
```

产生以下输出：

```
<input id="Item_ItemID" name="Item.ItemID" type="hidden" value="234" /> 
```

如您所见，Html 帮助程序以`id`and`name`属性为前缀，而我预计输出为

```
<input id="ItemID" name="ItemID" type="hidden" value="234" /> 
```

因此，前一个输出在提交表单时会导致错误，因为表单元素与子实体上的属性不对应。

我知道我可以通过硬编码隐藏字段来解决这个问题

```
<input id="ItemID" name="ItemID" type="hidden" value="@Model.Item.ItemID" /> 
```

哪一种打败了拥有 Html 助手或创建局部视图并传入子对象的原因

```
@{Html.RenderPartial("ItemForm", Model.Item);} 
```

我知道能够将 html 属性传递给该方法，并且还可以编写自己的扩展方法，但是当涉及数据验证和 jQuery 时，事情会变得更加复杂，即以下代码：

```
@Html.EditorFor(model => model.Item.Title)
@Html.ValidationMessageFor(model => model.Item.Title) 
```

产生这个代码：

```
<input class="text-box single-line" data-val="true" data-val-required="The Title field is required." id="Item_Title" name="Item.Title" type="text" value="Some text" />
<span class="field-validation-valid" data-valmsg-for="Item.Title" data-valmsg-replace="true"></span> 
```

所以需要一种优雅的方法来保持属性名称同步。

那么谁能回答为什么 HtmlHelper 会为视图模型的子项的属性添加前缀？作为后续问题，是否有任何其他巧妙的方法可以防止添加前缀？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T12:53:31.467

HTML 助手在构建时考虑了模型绑定约定。例如，我假设您有以下模型：

```
public class MyViewModel
{
    public ItemViewModel Item { get; set; }

    // ... other properties
}

public class ItemViewModel
{
    public int ItemID { get; set; }
} 
```

并且相应的视图被强类型化为`MyViewModel`.

所以当你使用：

```
@Html.HiddenFor(model => model.Item.ItemID) 
```

助手生成：

```
<input id="Item_ItemID" name="Item.ItemID" type="hidden" value="234" /> 
```

因为当表单被 POST 回服务器时，这将允许您在相应的控制器操作中正确绑定您的视图模型：

```
[HttpPost]
public ActionResult Process(MyViewModel model)
{
    // model.Item.ItemID will be correctly bound here from the hidden field value
} 
```

我想您的问题来自您的控制器操作采用`ItemViewModel`as 参数而不是`MyViewModel`：

```
[HttpPost]
public ActionResult Process(ItemViewModel model)
{
    // model.ItemID will not be correctly bound here from the hidden field value
} 
```

因此，您可以使用该`[Bind]`属性并指定一个前缀来帮助模型绑定器：

```
[HttpPost]
public ActionResult Process([Bind(Prefix="Item")] ItemViewModel model)
{
    // model.ItemID will be correctly bound here from the hidden field value
} 
```

或者简单地设计另一个视图模型，从中剥离所有不必要的属性，只留下`Item`属性。现在您的控制器操作可以采用这个专门设计的视图模型。

因此，正如您在一天结束时看到的那样，如果您正确设计视图模型，您可以完美地控制模型绑定。这都是关于 ASP.NET MVC 中的视图模型的。他们解决所有问题。

# wpf - 将一个充满控件的模板添加到另一个 WPF 控件

> ID：14157382
> 
> 赞同：2
> 
> 时间：2013-01-04T12:39:43.127
> 
> 标签：wpf, wpf-controls

所以我一直在做一个项目，该项目允许我将选项卡添加到选项卡控件以及每个新的`TabItem`. 我有一堆以编程方式生成的控件。有没有办法在 XAML 中创建一个模板，我可以简单地添加到新创建的模板中`TabItem`？

举个简单的例子，假设我有一个带有 TabPage 的 WPF 表单：

```
<Window>
 <Grid>
  <TabControl></Tabcontrol>
 </Grid> 
</Window> 
```

我想在我的每个 TabPages 中添加 3 个按钮。

```
<Window>
 <Grid>
  <TabControl>
   <TabItem>
    <Button/>
    <Button/>
    <Button/>
   </TabItem>
  </TabControl>
 </Grid> 
</Window> 
```

我希望能够在 XAML 编辑器（可能是 VS2012）中编辑这个包含 3 个按钮的模板，并且这些更改将反映在添加到每个`TabItem`.

我环顾四周，大多数 WPF 模板文章都是关于着色或样式模板的，这似乎不是我想要的。根据我目前的方法，以`TabItem`编程方式添加是可行的，但会使编辑模板更加麻烦，而且我认为这与 WPF 的理念相反：将代码与设计断开连接。

我对 WPF 相当陌生，但已经看到它相对于 WinForms 的强大功能和优势，所以我在这条路上被卖掉了，但因为我是新手，我的术语有时有点混乱，这也使我的搜索尝试失败，时。

任何帮助，将不胜感激。如果我解释得不够好，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:40:16.677

您应该尝试使用[UserControl](http://www.c-sharpcorner.com/uploadfile/mahesh/user-control-in-wpf/)。

它将允许您使用 - 例如 - 一组三个按钮作为简单控件。它是由一个 xaml 文件定义的，对这个 xaml 文件的更改将反映在添加用户控件的任何位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T11:28:03.883

正如@Olwaro 提到的，您可能想要使用[UserControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=vs.100%29.aspx)。

给定您的示例，您可以`UserControl`使用此 Xaml（其中用户控件称为 ThreeButtonStack 并驻留在命名空间 WpfApplication2 中）：

```
<UserControl x:Class="WpfApplication2.ThreeButtonStack"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <UserControl.Resources>
        <Style TargetType="Button">
            <Setter Property="Margin" Value="5" />
            <Setter Property="Width" Value="75" />
        </Style>
    </UserControl.Resources>
    <StackPanel Orientation="Horizontal">
        <Button Content="OK" />
        <Button Content="Cancel" />
        <Button Content="Retry" />
    </StackPanel>
</UserControl> 
```

然后你可以像这样在你的主应用程序中调用它：

```
<Window x:Class="WpfApplication2.TabPageWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:wpfApplication2="clr-namespace:WpfApplication2"
        Title="TabPageWindow" Height="300" Width="300">
    <TabControl>
        <TabItem Header="Tab 1">
            <DockPanel>
                <wpfApplication2:ThreeButtonStack DockPanel.Dock="Bottom" HorizontalAlignment="Right"/>
                <TextBlock>Custom Content</TextBlock>
            </DockPanel>
        </TabItem>
        <TabItem Header="Tab 2">
            <DockPanel>
                <wpfApplication2:ThreeButtonStack DockPanel.Dock="Bottom" HorizontalAlignment="Right"/>
                <TextBox>Editing custom stuff</TextBox>
            </DockPanel>
        </TabItem>
    </TabControl>
</Window> 
```

结果将是：

![截屏](../Images/0402ef9e68ee2710152e57dbbfbcdbe0.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T11:34:07.900

**TabItem**最终继承自**ContentControl**，这意味着您可以以一种可以装饰内容控件中显示的实际内容的方式对其进行模板化：

```
<Style TargetType="TabItem">
  <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type TabItem}">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ContentPresenter Grid.Row="0" />
            <StackPanel Grid.Row=1>
              <!-- Your buttons -->
            </StackPanel>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
  </Setter>
</Style> 
```

放置**ContentPresenter**的位置是放置 ContentControl（或在本例中为 TabItem）的内容的位置。

例如，我们使用它来为集合显示添加搜索/突出显示功能。您可能想要复制默认模板并从那里修改 - 这是丑陋的部分，因为在模板中练习标记重用是相当困难的。

或者，您将 TabItem 保持原样，并以您在 TabItems 中使用的所需方式设置 ContentControl 的样式...

```
<TabItem>
  <ContentControl Style="{StaticResource CommonButtons}">
    <!-- TabItem Contents -->
  </ContentControl>
</TabItem> 
```

当然，ContentControl 位可以在 DataTemplate 中结束，并且通过绑定到**ItemsSource**你最终得到

```
<TabControl 
   ItemTemplate="{StaticResource CommonButtonsTemplate}" 
   ItemsSource="{Binding MyTabItemsData}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:06:08.653

我不知道类 TabPage ，但要解决此类问题，最好创建一个继承 TabPage 并在其中工作的类，并在其中设置通用功能，而不是使用模板。我希望这会有所帮助。

# javascript - 重构 jQuery 插件

> ID：14157385
> 
> 赞同：1
> 
> 时间：2013-01-04T12:40:02.243
> 
> 标签：javascript, jquery, design-patterns, jquery-plugins

我正在编写一个 jQuery 插件来对表单字段进行正则表达式验证。这是我编写的第一个 jQuery 插件，我发现许多不同的教程和插件设计模式令人困惑。

我已经提出了我目前在这里的工作样本[http://jsfiddle.net/WpvMB/](http://jsfiddle.net/WpvMB/)

为了完整起见，这里是我的插件代码（尽管它确实有效，但我认为这是糟糕的设计决定）

```
(function( $ ){

  var settings = {}

  var methods = {
    init : function( options ) {

      settings = $.extend( {
        'error_class': 'error',
        'success_class': 'success',
        'regex': /.*/,
      }, options);

      this.bind('keyup focusout focusin', methods.doValidate);
    },

    valid : function( ) {
      if ( $(this).val().match( settings.regex ) ) {
        return true
      }
      return false
    },

    doValidate: function( ) {
      if ( $(this).regexField('valid') ) {
        $(this).addClass( settings.success_class )
        $(this).removeClass( settings.error_class )
      } else {
        $(this).removeClass( settings.success_class )
        $(this).addClass( settings.error_class )
      }
    },

  };

  $.fn.regexField = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.regexField' );
    }    

  };

})( jQuery ); 
```

理想情况下，我希望插件能够像现在一样运行，并且还能够在元素上调用有效方法并接收真/假结果，例如。

```
$('#textinput').regexField({'regex': /^[0-9]+$/})
$('#textinput').valid()
>>> true 
```

非常感谢有关哪种特定插件模式适合此类插件的任何输入，以及对现有代码的任何反馈，问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:01:24.693

将此添加到您的插件中，它将按您的意愿工作：

```
$.fn.valid = function() {
    return $(this).regexField("valid");
} 
```

# php - 表单中的动态变化：是否调用服务器？

> ID：14157386
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:40:08.227
> 
> 标签：php

我有一个带有 2 个选项的选择表单。根据所选值显示或隐藏复选框，

我的问题：我应该进行 ajax 调用来添加/删除该复选框，还是应该只使用 javascript 显示/隐藏它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:55:08.710

只需在SELECT更改时向JavaScript显示或隐藏它。除非您需要服务器端计算或服务器出于任何原因需要了解更改，否则您不应该进行 ajax 调用。

# php - 如何使 PHP Session GC Cron 静音

> ID：14157388
> 
> 赞同：2
> 
> 时间：2013-01-04T12:40:09.067
> 
> 标签：php, logging, cron, debian

我正在使用**PHP 5.3.3-7+squeeze14运行****Debian**。有几个 cronjobs 可以 gc 清理我的 php 会话：

 *** * *

```
(cron.d)09,39 *     * * *     root   [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -type f -cmin +$(/usr/lib/php5/maxlifetime) -delete
(crontab)47 * * * * root cd / && run-parts --report /etc/cron.hourly
(crontab)45 0 * * * root test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )
(crontab)34 1 * * 7 root test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )
(crontab)44 3 4 * * root test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly ) 
```

这些 Cron 抛出....

... **cron.log**行

```
Jan  4 11:47:01 flowl /USR/SBIN/CRON[3976]: (root) CMD (cd / && run-parts --report /etc/cron.hourly)
Jan  4 12:09:01 flowl /USR/SBIN/CRON[3983]: (root) CMD (  [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -type f -cmin +$(/usr/lib/php5/maxlifetime) -delete) 
```

... **auth.log**行

```
Jan  4 12:09:01 flowl CRON[3982]: pam_unix(cron:session): session opened for user root by (uid=0)`
Jan  4 12:09:01 flowl CRON[3982]: pam_unix(cron:session): session closed for user root` 
```

* * *

如何从（至少）auth.log 中删除（所有这些烦人的）cron 日志？我没有调查 cron.log，因为我经常可以用这些来生活。

提前致谢！担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T07:32:23.863

取自[http://blog.flowl.info/2013/reduce-syslog-logging-io-raspberrypi/](http://blog.flowl.info/2013/reduce-syslog-logging-io-raspberrypi/)：由于 rsyslog 替换了 syslog，我们可以执行以下操作：

在`/etc/rsyslogd.conf`：替换`auth,authpriv.* /var/log/auth.log`

经过：

```
:msg, contains, "pam_unix(cron:session)" ~
auth,authpriv.* /var/log/auth.log 
```

其他日志文件也是如此**

# c - 使用 strtok 的未定义行为

> ID：14157390
> 
> 赞同：-2
> 
> 时间：2013-01-04T12:40:18.927
> 
> 标签：c, strtok

我正在使用 strtok() 字符串标记器

输入就像说

```
"a,b,c,d|12,34,56,78" 
```

我在做

```
 char * cols;
      char * vals;
      $char col_val_temp[1024] = {0};
      $char col_val[1024] = {0};

      cols = strtok(input,"|");
      vals = strtok('\0',"|");
      // now vals will have "12,34,56,78"
      strcpy(col_val_temp,vals);
      strcpy(col_val,col_val_temp); 
```

在代码的后面部分，我再次使用`strtok`on`vals`但是，我在调试器中看到突然出现的情况，`col_val`当`col_val_temp`. 我没有对`col_val`字符串进行任何操作，所以我不明白为什么那里的数据会丢失。

有人可以解释为什么我会出现这种行为以及如何克服这个问题。我因此而陷入困境。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:23:14.420

您的代码中存在（至少）一个缓冲区溢出问题。

你做一个`strcpy`to `seqno`。`seqno`被声明为只有一个字符长，因此字符串终止符可能会覆盖 . 的指针值`cols`。

# wordpress - Wordpress - 使用 Walker 类动态注入菜单项

> ID：14157394
> 
> 赞同：1
> 
> 时间：2013-01-04T12:40:43.420
> 
> 标签：wordpress

我正在尝试引入一些动态（非 WP）内容来填充 Wordpress 中的菜单。为此，我扩展了 Walker 类，如下所示：

[http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output](http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output)

所以我的菜单看起来像

*   家
*   博客
*   消息
*   特征
*   比赛——
    *   比较1
    *   比较2

Comp1 和 Comp2 是从单独站点上的数据库中提取的。它们只是指向外部站点的链接，因此唯一相关的值是“Comp Title”和“Comp URL”

我班的主要方法是：

```
 function start_el(&$output, $item, $depth, $args)
    {

        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
        $class_names = ' class="'. esc_attr( $class_names ) . '"';

        $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

        $prepend = '<strong>';
        $append = '</strong>';
        $description  = ! empty( $item->description ) ? '<span>'.esc_attr( $item->description ).'</span>' : '';

        if($depth != 0)
        {
            $description = $append = $prepend = "";
        }

        if($item->title == 'Competitions')
        {
            $item_output = $args->before;
            $item_output .= '<a'. $attributes .'>';
            $item_output .= $args->link_before .$prepend.apply_filters(  'the_title', $item->title, $item->ID ).$append;
            $item_output .= $description.$args->link_after;
            $item_output .= '</a>';
            $item_output .= $args->after;

            $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );

            $this->loopComps($output , $args);

        }
        else
        {
            $item_output = $args->before;
            $item_output .= '<a'. $attributes .'>';
            $item_output .= $args->link_before .$prepend.apply_filters( 'the_title', $item->title, $item->ID ).$append;
            $item_output .= $description.$args->link_after;
            $item_output .= '</a>';
            $item_output .= $args->after;

            $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
        }
    } 
```

然后loopComps方法是：（getGalleryComps()拉入动态内容）

```
 function loopComps($output , $args)
    {
        $openComps = $this->getGalleryComps();
        foreach($openComps as $comp)
        {
            $item =  new StdClass;
            $item->ID = 9999;
            $item->post_author = 5;
            $item->post_date = '2012-11-16 10:48:44';
            $item->post_date_gmt = '2012-11-16 10:48:44';
            $item->title = $comp['competition_name'];
            $item->post_type = 'nav_menu_item';
            $item->post_name = $comp['competition_name'];
            $item->post_title = $comp['competition_name'];
            $item->post_excerpt = $comp['competition_name'];
            $item->guid = $comp['competition_name'];
            $item->url = 'http://www.mycomps';
            $item->post_status = 'publish';
            $item->post_parent = 0;
            $item->filter = 'raw';
            $item->menu_item_parent = '6845';
            $item->object_id = '99999';
            $item->object = 'custom';
            $item->type = 'custom';
            $item->classes = array(null , 'menu-item' , 'menu-item-type-custom' , 'menu-item-object-custom');
            $item->menu_order = 6;

            return $this->start_el($output, $item, 1, $args);

        }

    } 
```

这一切似乎都很好，希望 $item 永远不会附加到实际菜单上。如果我在导航菜单循环期间打印出 $items，我可以看到我创建的“伪帖子”的动态内容在那里，它永远不会附加到菜单上。

有没有更简单的注入菜单项的方法？

更新 1：

我已将 loopComps 方法调整为：

```
 function loopComps($output)
    {
        $openComps = $this->getGalleryComps();

        $output .= '<ul>';
        foreach( $openComps as $openComp )
        {
            $output .= '<li><a href='.$openComp->url.'>'.$openComp['competition_name]'].'</a></li>';
        }
        $output .= '</ul>';

        return $output;
  } 
```

由于这确实更有意义，但不能解决问题，因此数据在那里，但从未显示在菜单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:44:43.433

您应该只需要将比赛菜单项的 HTML 附加到`$output`，例如，

```
$output .= '<ul>';
foreach( $comps as $comp ) {
    $output .= '<li><a href='.$comp->url.'>.$comp->title.'</a></li>';
}
$output .= '</ul>'; 
```

这就是为什么 $output 通过引用 ('&') 传递给`start_el()`.

此示例可能过于简单，因为您必须将其调整为 WP 生成的菜单项遵循的任何原型，但它说明了原理。创建模拟 WordPress 项目并试图诱使 WordPress 为您完成工作，这似乎不是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:21:08.830

我不确定我是否正确理解了您的问题，但是既然您问了，所以我认为您可以使用钩子`Is there an easier way of injecting menu items?`轻松添加额外的菜单项，例如`wp_nav_menu_items`

```
add_filter( 'wp_nav_menu_items', 'your_custom_menu_item', 10, 2 );
function your_custom_menu_item ( $items, $args ) {
    // First get the data from your database and replace menu titles and links
    // then loop the result and add items
    $myMenu='<li><a href="#">External Links</a><ul>'; // parent
    $myMenu.='<li><a target="_blank" href="http://facebook.com">Facebook</a></li>';
    $myMenu.='<li><a target="_blank" href="http://google.com">Google</a></li></ul></li>';
    $items .= $myMenu;
    return $items;
} 
```

只需将代码粘贴到您的菜单中`functions.php`，然后将您的菜单标题和链接替换为您的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T07:32:47.987

在查看问题和答案后，我在“竞赛”父菜单下添加了“GOOGLE”子菜单项，因此这里是编辑菜单栏的完整解决方案。

*   1

    首先将此代码放在主要调用菜单栏的位置，它应该在 header.php 中并更改我在评论中提到的自定义菜单

    ```
    class description_walker extends Walker_Nav_Menu
    {
      function start_el(&$output, $item, $depth, $args){
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';
        $class_names = $value = '';
        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
        $class_names = ' class="'. esc_attr( $class_names ) . '"';
        $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';
        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';
        $prepend = '<strong>';
        $append = '</strong>';
        $description  = ! empty( $item->description ) ? '<span>'.esc_attr( $item->description ).'</span>' : '';
        if($depth != 0){
         $description = $append = $prepend = "";
        }
        if($item->title=='Competitions'){
          $item_output = $args->before;
          $item_output .= '<a'. $attributes .'>';
          $item_output .= $args->link_before .$prepend.apply_filters(  'the_title', $item->title, $item->ID ).$append;
          $item_output .= $description.$args->link_after;
          $item_output .= '</a>';
          $item_output .= $args->after;
          /* YOUR CUSTOM MENU OR SUBMENU -START- */
          $output .= '<ul class="sub-menu">';
          $output .= '<li><a href='.'http://www.google.com'.'>'.'GOOGLE'.'</a></li></ul>';
          /* YOUR CUSTOM MENU OR SUBMENU -END- */
          $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
        }else{
          $item_output = $args->before;
          $item_output .= '<a'. $attributes .'>';
          $item_output .= $args->link_before .$prepend.apply_filters( 'the_title', $item->title, $item->ID ).$append;
          $item_output .= $description.$args->link_after;
          $item_output .= '</a>';
          $item_output .= $args->after;
          $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
        }
      }
    } 
    ```

    *   2 调用 wp_nav_menu 并传递我们刚刚创建的自定义 walker 对象。

    `wp_nav_menu( array( 'container' =>false, 'menu_class' => 'menuPrincipal', 'echo' => true, 'before' => '', 'after' => '', 'link_before' => '', 'link_after' => '', 'depth' => 0, 'walker' => new description_walker()) );`

**它将在比赛菜单下添加 GOOGLE 子菜单**

*第一个答案是正确的，但类成员输出无法通过 loopComps 设置，而且我们不应该仅仅为了设置输出成员而返回输出，所以我们只需将直接子菜单设置为 walker。*

> 它工作正常。

# javascript - javascript: 这个关键字

> ID：14157399
> 
> 赞同：2
> 
> 时间：2013-01-04T12:41:06.383
> 
> 标签：javascript

我知道`this`指向函数在其上运行的当前对象。所以这里是根据定义的代码

```
function foo(){
    alert(this); //output==window
} 
```

所以，现在函数 foo 等于 window.foo() 但现在在这里

```
function foo(){
    function fo(){
        alert(this);
    }
    fo();
} 
```

那么，现在`foo`执行输出时又是窗口对象，为什么？因为嵌套`this`应该引用不同的对象。因为 fo() 现在不在窗口对象上操作，因为 foo()==window.foo() .所以嵌套函数现在应该指向不同的对象

详情见这里：

```
 function foo()
{
alert(this);
  function fo(){alert(this);}
as();
} 
```

如果现在，var x=new foo();than foo() 方法中的“this”指向对象对象，但嵌套的 this 指向全局对象，对吗？现在你应该清楚我的意思了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:50:08.150

正如[这里](http://henrycode.tumblr.com/post/37627169791/javascript-clarifying-the-keyword-this)所解释的，关键字`this`被动态绑定到“.”左侧的对象。在通话时间。上述三个例外。

1.  当没有`.`关键字时`this`，将绑定到全局对象窗口。
2.  当您使用 call 和 apply 时，您可以决定`this`绑定什么。
3.  当您使用关键字 new 从构造函数创建新实例时，关键字`this`指的是新生成的实例。

既然到了这里，你还在打电话只是`fo()`，`this`必然`window`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:51:39.147

两件事情....

首先，您应该考虑使用控制台。( `console.log(this);`)。

`this`其次，闭包和范围（ ）之间存在差异。

关闭：

```
function a() {
    function b() {
        // b is only available inside `a`
    } 
}
// so out here b will be undefined 
```

范围：

```
function a() {
    // in here the scope can be multiply things depending on how the function is called. See below
    console.log(this);
} 
```

范围是默认`window`的，如果函数是对象的方法，则范围指的是对象。

```
a(); // logs: window

var o = { 
    a: a
};
o.a(); // logs: { a: a } 
```

您可以使用 ether call 或 apply 覆盖此默认行为

```
var s = [1, 2, 3]
a.call(s); // logs: [1, 2, 3]
// or using apply
a.apply(s) // logs: [1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T12:50:00.573

该`this`值取决于函数的*调用*方式，而不是它的*定义*方式。如果你有以下功能：

```
var test = function() {
  console.log(this);
}; 
```

然后有很多方法可以调用它：

*   `test()`- 这将是`window`
*   `new test()`- 这将是实例
*   `({ foo: test }).foo()`- 这将是对象
*   `test.call(bar)`- 这将是`bar`

函数是否嵌套并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:49:51.383

编程，你做错了。

要使 fo 成为对象的功能，您应该这样做：

```
function foo(){
    this.fo = function(){
       alert(this);
    }
}
f = new foo();
f.fo(); 
```

看看 fo 函数是如何在对象声明中启动的？

现在，当`f.fo()`你得到`[object Object]`

# .net - Linq - 当“不支持带有本地集合的查询”时该怎么办

> ID：14157404
> 
> 赞同：3
> 
> 时间：2013-01-04T12:41:23.767
> 
> 标签：.net, linq

我正在尝试将 SQL 查询转换为 Linq，但出现异常：

*System.NotSupportedException ：不支持使用本地集合的查询。*

那么有没有办法以“合法”的方式重新表述查询？

感谢您的任何建议，

丹麦安德斯

## PS：在调用 .Contains() 之前，我已经看到在任何查询上调用 .ToList() 的“解决方案”——但这只会导致四个单独的查询，对吧？

底部是我执行失败的代码。

我试图解决的逻辑问题是找到用户可以访问的“结构”，无论是通过直接访问还是通过具有访问权限的组的成员身份。我们没有嵌套组。

换句话说，如果以下任何一项为真，则用户应该有权访问：

> *   用户创建了结构（id 被“标记”到结构记录中）。
> *   PermissionUsers 表中存在一个条目，将 Permissions 表与 users 表链接起来。
> *   PermissionGroups 表中存在一个条目，将 Permissions 表与 Groups 表链接，并且在 UsersGroups 表中引用了用户，将 Users 表与 Users 表链接。

将权限/限制结果应用于可访问的项目是一个相对较新的事情，我们希望数据库能够完成繁重的工作；）。

```
[TestFixture]
public class LinqTest : CommandBasedIntegrationTestBase
{
    [Test, Category("SuperIntegration"), RequiresSTAAttribute]
    public void TestThat()
    {
        DbIntegrationTestHelper.SetState();

        var dataContextProvider = ObjectFactory.GetInstance<IDataContextProvider>();

        const int userId = 1;

        var environment = ObjectFactory.GetInstance<IState>().DatabaseEnvironment;
        var dataClasses1DataContext = dataContextProvider.GetContext(environment);

        var idsByCreator = from r in dataClasses1DataContext.Structures where r.CreatedUserId == userId select r.StructureId;
        var idsByUserAccess = from r in dataClasses1DataContext.PermissionUsers where r.UserId == userId select r.StructureId;
        var idsOfGroupsContainingUser = from r in dataClasses1DataContext.UsersGroups where r.UserId == userId select r.GroupId;
        var idsByGroupAccess = from r in dataClasses1DataContext.PermissionGroups where idsOfGroupsContainingUser.Contains( r.GroupId ) select r.StructureId;

        var res = from s in dataClasses1DataContext.Structures
                  where
                      idsByCreator.Contains(s.StructureId) || 
                      idsByUserAccess.Contains(s.StructureId) ||
                      idsByGroupAccess.Contains(s.StructureId)
                  select s;

        foreach (var structure in res)
        {
            Debug.WriteLine(structure.Name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:38:19.877

试一试`JOIN`s, `UNION`s

**例子**

```
var ctx = dataContextProvider.GetContext(environment);

var byCreator = from r in ctx.Structures where r.CreatedUserId == userId select r;

var byUserAccess = from r in ctx.PermissionUsers 
                   join s in ctx.Structures on r.StructureId equals s.StructureId
                   where r.UserId == userId select s;

var byGroups = from ug in ctx.UsersGroups 
               join pg in ctx.PermissionGroups on ug.GroupId equals pg.GroupId
               join s in ctx.Structures on pg.StructureId equals s.StructureId
               where ug.UserId == userId select s;

var res = byCreator.Union(byUserAccess).Union(byGroups); 
```

*更新*

`Distinct()`根据@Magnus 的评论，我已经删除了不必要的调用。仅当使用代替`Distinct()`时才需要调用。`Concat()``Union()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:35:17.520

正如我所看到的，您正在尝试在数据库表中查找**s.StructureId**并将它们带到应用程序层。

也许您最好将所有登录信息推送到 SQL 函数或 SP 中，并仅将最终结果发送到应用程序层？

# objective-c - Urban Airship：我可以标记预定通知吗？

> ID：14157412
> 
> 赞同：1
> 
> 时间：2013-01-04T12:42:00.800
> 
> 标签：objective-c, ios, urbanairship.com

我正在使用 Urban Airship 来处理我的推送通知。在我的应用程序中，人们可以安排足球比赛的通知。可以说比赛已经取消了。然后我想为所有用户取消该比赛的所有预定通知。

如果我可以用“match id”标记计划的通知，我可以删除所有带有“match id”标记的通知。

但是，文档没有提到标记预定通知。可以做到吗，或者我可以用其他方式做到吗？我想这一定是一个相当普遍的情况。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:12:06.290

您如何首先触发通知？

我发现最好将 Urban Airship 视为一种三层推送系统：

1) 用户层（Iphone、Android、平板电脑） 2) Urban Airship 层（您在 Urban Airship 上的帐户，连接到 Apple 推送服务器或 GCM） 3) 服务器层（您保存来自第 1 层的用户信息的 Web 服务器）

在此系统中，您的 Web 服务器（第 3 层）负责存储有关每个用户的数据（第 1 层）。当您的用户登录您的应用程序时，您将该用户的 Urban Airship 应用程序 ID/令牌存储在您的服务器上。您的服务器层还负责向 Urban Airship 发起推送，并最终向设备发起推送。因为您控制服务器层，所以您可以控制何时启动推送以及何时不启动推送（例如，在取消匹配的情况下）。

1.  有一场比赛，是时候向所有注册了此特定比赛警报的用户发送通知

2.  您的服务器已经列出了对这个游戏感兴趣的所有个人用户的列表。

3.  对于每个用户，您的服务器都会告诉 Urban Airship 您要发送通知。

4.  Urban Airship 为您完成繁重的工作，并确保将通知发送到每台设备。

5.  您的用户很高兴，因为他们被提醒了有关游戏的信息。

我什至不确定这对您有帮助，您可能没有服务器层，并且正试图仅从设备或 Urban Airship 执行此操作。在这种情况下，我会说你可能在任何一个平台上都能做的事情受到限制。祝你好运！

# grails - Jenkins Grails 插件因 StackOverflowError 而失败

> ID：14157413
> 
> 赞同：1
> 
> 时间：2013-01-04T12:42:13.360
> 
> 标签：grails, jenkins

我有一个 Grails 项目，目前正在使用 Jenkins 和 Grails 插件构建。有时它似乎在启动 Grails 时抛出了 StackOverflowError。它似乎并没有一直这样做，如果我重新启动 Jenkins 网络应用程序，错误就会消失。

错误是

```
Exception: java.lang.StackOverflowError thrown from the UncaughtExceptionHandler in thread "main"
Build step 'Build With Grails' marked build as failure 
```

我能做些什么来找出这个错误的根源吗？不幸的是，这里的控制台输出不是很有用。

# 编辑

我添加了

```
--verbose --stacktrace 
```

到构建目标以尝试获得更多输出。问题是当它失败时我没有得到任何新东西。同样的错误，输出看起来像

```
/opt/local/grails/bin/grails clean --verbose --stacktrace --non-interactive

Exception: java.lang.StackOverflowError thrown from the UncaughtExceptionHandler in thread "main"
Build step 'Build With Grails' marked build as failure 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-15T14:38:29.773

由于用户主目录中缺少 .inputrc 文件，导致此问题的无限循环。

将 .inputrc 文件放在您的用户主目录中，您应该已准备就绪。

有关更多详细信息，请参阅[此电子邮件线程](http://grails.1312388.n4.nabble.com/StackOverflowError-when-starting-Grails-2-3-2-td4651274.html)。

注意：我已将此报告为Grails Jira 中的错误 ( [Grails-1162 )](https://jira.grails.org/browse/GRAILS-11662)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T23:08:36.657

您可以尝试禁用丑陋的 javascripts：

添加

```
grails.assets.minifyJs = false 
```

到你的 Config.groovy

这对我有帮助。以前的答案（添加 .inputrc）没有。

# vim - 如何在 VIM 中加载语法时突出显示命令？

> ID：14157417
> 
> 赞同：1
> 
> 时间：2013-01-04T12:42:23.000
> 
> 标签：vim, latex, syntax-highlighting

在 VIM (v7.2)`\foo`中加载默认语法方案后，如何突出显示一个特定 TeX 命令的所有实例？`tex`

如果没有预先加载语法方案，我可以轻松完成：

```
:syntax clear
:highlight myGroup ctermfg=blue
:syntax match myGroup "\\foo\>" 
```

但是我不知道在`tex`加载语法方案时该怎么做。这不起作用：

```
:syntax clear
:set syntax=tex
:highlight myGroup ctermfg=blue
:syntax match myGroup "\\foo\>" 
```

### 更新 1

实际上，它适用于序言中的命令，但不适用于`document`环境中的命令。

### 更新 2

一种解决方法是注释掉`/usr/share/vim/vim72/syntax/tex.vim`(v47) 中处理折叠的一些行：

```
" Sections, subsections, etc: {{{1
if g:tex_fold_enabled && has("folding")
 syn region texDocZone                  matchgroup=texSection start='\\begin\s*{\s*document\s*}' end='\\end\s*{\s*document\s*}'                                                     fold contains=@texFoldGroup,@texDocGroup,@Spell
 syn region texPartZone                 matchgroup=texSection start='\\part\>'                   end='\ze\s*\\\%(part\>\|end\s*{\s*document\s*}\)'                                  fold contains=@texFoldGroup,@texPartGroup,@Spell
 syn region texChapterZone              matchgroup=texSection start='\\chapter\>'                end='\ze\s*\\\%(chapter\>\|part\>\|end\s*{\s*document\s*}\)'                       fold contains=@texFoldGroup,@texChapterGroup,@Spell
 syn region texSectionZone              matchgroup=texSection start='\\section\>'                end='\ze\s*\\\%(section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'            fold contains=@texFoldGroup,@texSectionGroup,@Spell
 syn region texSubSectionZone           matchgroup=texSection start='\\subsection\>'             end='\ze\s*\\\%(\%(sub\)\=section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'  fold contains=@texFoldGroup,@texSubSectionGroup,@Spell
 syn region texSubSubSectionZone        matchgroup=texSection start='\\subsubsection\>'          end='\ze\s*\\\%(\%(sub\)\{,2}section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'fold contains=@texFoldGroup,@texSubSubSectionGroup,@Spell
 syn region texParaZone                 matchgroup=texSection start='\\paragraph\>'              end='\ze\s*\\\%(paragraph\>\|\%(sub\)*section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'                       fold contains=@texFoldGroup,@texParaGroup,@Spell
 syn region texSubParaZone              matchgroup=texSection start='\\subparagraph\>'           end='\ze\s*\\\%(\%(sub\)\=paragraph\>\|\%(sub\)*section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'     fold contains=@texFoldGroup,@Spell
 syn region texTitle                    matchgroup=texSection start='\\\%(author\|title\)\>\s*{' end='}'                                                                            fold contains=@texFoldGroup,@Spell
 syn region texAbstract                 matchgroup=texSection start='\\begin\s*{\s*abstract\s*}' end='\\end\s*{\s*abstract\s*}'                                                     fold contains=@texFoldGroup,@Spell
"else
" syn region texDocZone                 matchgroup=texSection start='\\begin\s*{\s*document\s*}' end='\\end\s*{\s*document\s*}'                                                     contains=@texFoldGroup,@texDocGroup,@Spell
" syn region texPartZone                        matchgroup=texSection start='\\part\>'                   end='\ze\s*\\\%(part\>\|end\s*{\s*document\s*}\)'                          contains=@texFoldGroup,@texPartGroup,@Spell
" syn region texChapterZone             matchgroup=texSection start='\\chapter\>'                end='\ze\s*\\\%(chapter\>\|part\>\|end\s*{\s*document\s*}\)'                       contains=@texFoldGroup,@texChapterGroup,@Spell
" syn region texSectionZone             matchgroup=texSection start='\\section\>'                end='\ze\s*\\\%(section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'            contains=@texFoldGroup,@texSectionGroup,@Spell
" syn region texSubSectionZone          matchgroup=texSection start='\\subsection\>'             end='\ze\s*\\\%(\%(sub\)\=section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'  contains=@texFoldGroup,@texSubSectionGroup,@Spell
" syn region texSubSubSectionZone       matchgroup=texSection start='\\subsubsection\>'          end='\ze\s*\\\%(\%(sub\)\{,2}section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'contains=@texFoldGroup,@texSubSubSectionGroup,@Spell
" syn region texParaZone                        matchgroup=texSection start='\\paragraph\>'              end='\ze\s*\\\%(paragraph\>\|\%(sub\)*section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'                       contains=@texFoldGroup,@texParaGroup,@Spell
" syn region texSubParaZone             matchgroup=texSection start='\\subparagraph\>'           end='\ze\s*\\\%(\%(sub\)\=paragraph\>\|\%(sub\)*section\>\|chapter\>\|part\>\|end\s*{\s*document\s*}\)'     contains=@texFoldGroup,@Spell
" syn region texTitle                   matchgroup=texSection start='\\\%(author\|title\)\>\s*{' end='}'                                                                            contains=@texFoldGroup,@Spell
" syn region texAbstract                        matchgroup=texSection start='\\begin\s*{\s*abstract\s*}' end='\\end\s*{\s*abstract\s*}'                                             contains=@texFoldGroup,@Spell
endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T12:18:05.160

问题是存在现有的语法突出显示，因此您`:syntax match`没有应用。您需要找出哪个原始语法组在其中突出显示了它`contain`。这对我有用：

```
:syntax match myGroup "\\foo\>" containedin=texStatement 
```

# java - 强制组件从顶部堆叠，而不是垂直居中

> ID：14157418
> 
> 赞同：2
> 
> 时间：2013-01-04T12:42:24.777
> 
> 标签：java, swing, layout, gridbaglayout

我目前正在为使用 Swing 的应用程序设计 GUI。如果您看一下图片，您会看到一个黄色的 JPanel，它位于 BorderLayout 内。此面板使用 GridBagLayout 在其中放置组件。如您所见，一行组件由一个标签、一个文本字段和一个按钮组成。目前，有两排组件，垂直居中。不过，我希望它们从面板顶部放置。我尝试设置`frame.setAlignmentY(TOP_ALIGNMENT)`以及`gridBagConstraints.anchor`属性，但没有结果。我认为我解决这个问题的方法是错误的，我没有挣扎几个小时，而是求助于 stackoverflow 的好人。

所以问题是，如何强制组件的网格不是垂直居中，而是在顶部？感谢您为我指明正确方向的任何建议。

![框架](../Images/3bee916df2c4934cc73257b6d9ce8fad.png)

编辑（代码）：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

/**
 * 
 * @author mt
 */
public class MainView extends JFrame {

    public MainView() {
        setPreferredSize(new Dimension(500, 500));
        getContentPane().setLayout(new BorderLayout());

        JPanel panel = new JPanel(new GridBagLayout());
        panel.setBackground(Color.YELLOW);
        GridBagConstraints c = new GridBagConstraints();
        c.insets = new Insets(4, 4, 4, 4);

        c.gridx = 0;
        c.gridy = 0;
        panel.add(new JLabel("PokerStars"), c);

        c.gridx = 1;
        c.gridy = 0;
        panel.add(new JTextField(20), c);

        c.gridx = 2;
        c.gridy = 0;
        panel.add(new JButton("btn"), c);

        c.gridx = 0;
        c.gridy = 1;
        panel.add(new JLabel("Full Tilt Poker"), c);

        c.gridx = 1;
        c.gridy = 1;
        panel.add(new JTextField(20), c);

        c.gridx = 2;
        c.gridy = 1;
        panel.add(new JButton("btn"), c);

        add(panel, BorderLayout.LINE_START);

        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MainView();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:44:41.160

好的，解决您的问题的一种方法是在您的末尾添加一个额外的“不可见”组件，`panel`并使其占用所有额外的可用垂直空间。您可以这样做：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

/**
 * 
 * @author mt
 */
public class MainView extends JFrame {

    public MainView() {
        setPreferredSize(new Dimension(500, 500));
        getContentPane().setLayout(new BorderLayout());
        JPanel panel = new JPanel(new GridBagLayout());
        panel.setBackground(Color.YELLOW);
        GridBagConstraints c = new GridBagConstraints();
        c.insets = new Insets(4, 4, 4, 4);
        panel.add(new JLabel("PokerStars"), c);

        panel.add(new JTextField(20), c);

        c.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(new JButton("btn"), c);
        c.gridwidth = 1;

        panel.add(new JLabel("Full Tilt Poker"), c);

        panel.add(new JTextField(20), c);

        c.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(new JButton("btn"), c);
        c.weighty = 1.0;
        panel.add(Box.createGlue(), c);

        add(panel, BorderLayout.LINE_START);

        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MainView();
            }
        });
    }
} 
```

虽然这不是我最喜欢的选项，但它会以可接受的方式解决您的问题。可能有一种更有趣的方法来解决这个问题，但它需要知道您所针对的 UI 类型以及您希望在调整窗口大小时各种组件的行为方式。

在大多数情况下，您应该尽量不要设置`gridx`/`gridy`并使用它们的默认值 ( `RELATIVE`)，这会使您的代码更短，并且如果您必须插入一个或多个组件，则维护起来会容易得多。

# php - 如何根据项目数组将字符串附加到 PHP 中的字符串

> ID：14157419
> 
> 赞同：0
> 
> 时间：2013-01-04T12:42:30.613
> 
> 标签：php, string, replace

我正在尝试编写一个脚本来扩展 Zend 返回的 SQL 视图并格式化此 SQL 代码，所以我想在 mysql 的保留字中插入“\n”和“\n”和“\t”到表名、字段名等...

eg（简而言之，我使用更多的保留字来匹配）：

```
$sql = "SELECT * FROM `table` WHERE `field` = 'value';"; 
```

输出：

```
选择
    *
从
    桌子
在哪里
    字段 = '值'
;

```

我可以对 str_replace 进行很多调用，但我需要类似的东西：

```
$sql = array('SELECT', 'FROM', 'WHERE', ... ); 
```

在 $sql 变量中返回“\nSELECT”、“\nFROM”、“\nWHERE”。

其他的字符我已经处理过了，问题是mysql的保留字

有什么线索吗？我尝试了 preg_replace 但它仍然删除了匹配项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:48:08.043

你可以试试这个

```
$keywords = array(
    "select",
    "update"
); //etc
$sql = SELECT * FROM`table`WHERE`field` = 'value';
$tokens = explode(" ", $sql);

foreach($tokens as $token)
    {

    // if token in $keywords print \n along with value else print as it is ..

    if (in_array($token, $keywords))
        {
        echo $token . "\n";
        }
      else
        {
        echo $token;
        }
    } 
```

希望这可以帮助 ..

# javascript - 正确使用 History.js 和 AJAX 动态加载

> ID：14157420
> 
> 赞同：1
> 
> 时间：2013-01-04T12:43:05.397
> 
> 标签：javascript, php, jquery, ajax, history.js

我正在创建一个网站，我想**通过 AJAX 动态加载页面**。我正在使用[History.js](https://github.com/balupton/History.js/)，但我认为我做得不太对。

基本上我有一个**index.php**页面和一些其他页面：**portfolio.php、contact.php**等等。这些额外的 php 文件包含一个简单的 HTML/PHP 代码，它必须动态替换索引页面中 DIV 的内容，称为**#post-content**。

当我单击索引页面中的菜单链接时，会通过**onClick**事件调用 JS 函数**showPage()**，该函数仅以不带“.php”的页面名称作为参数。该函数声明如下：

```
function showPage(page) {
    var History = window.History;
    History.pushState(null, page, "index.php?page=" +page);

    $("#post-content").load(page + ".php");
} 
```

在上面的函数中还实现了其他视觉效果，比如*fadeIn*或*fadeOut*，但我删除了它们以使代码在这里更具可读性。

该功能为我提供了我需要的一切，或者几乎。使用 Google Chrome 测试我的网站，如果我单击菜单中的特定链接，例如“ **portfolio** ”，我会正确访问**?page=portfolio.php**。如果我在浏览器中手动键入 URL（例如，如果其他人给了我指向该页面的直接链接），则不会发生这种情况。这是因为函数 showPage() 没有被调用。

所以我在 index.php 页面上方添加了一个外部代码：

```
<?php
if(isset($_GET['page'])) { // Checks if the url contains the "page" parameter.
?>

<script>
$(function() {
    showPage('<? echo htmlentities($_GET['page']); ?>');
});
</script>

<?
}
?> 
```

这给了我想要的结果。

在这一点上，我需要专家的建议。我做对了吗？这是在网站内实现 jQuery AJAX 的正确方法吗？我觉得我做错了，非常错误。网络上的 Coes 与我的非常不同，但是一切看起来都运行良好。我该怎么办？

在此讨论中的任何帮助将不胜感激:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:46:45.637

我想说的第一件事 - 我说更好的负载在客户端完成所有这些工作 - 所以你只支持一个代码（在客户端）。

但这会在页面加载后导致多次 ajax 调用。您可以通过在示例中将数据包含到 php 代码/模板中来防止这种情况，但在这种情况下，您还需要支持服务器端代码/更改（如果您想从头开始生成页面）

另一种方法不是生成页面，而是仅生成将通过 ajax 获取的数据，并将其包含到页面中，然后将这些数据与 js 一起使用，而不是进行不必要的 ajax 调用。

*所以在代码旁边：*

所以你可以检查这个fork：[https ://github.com/llamerr/history.js/commits/master](https://github.com/llamerr/history.js/commits/master)

如您所见，我只是在 init 中添加了帧加载

```
//simple function to load iframe (may be done with div and ajax)
function loadiframe() {
    $('#iframe').load('../index.php');
} 
```

和

```
// Log Initial State
History.log('initial:', State.data, State.title, State.url);
//check for state and load what we need
if (State.data.state == 666) {
    loadiframe();
} 
```

和

```
// Bind to State Change
History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
    // Log the State
    var State = History.getState(); // Note: We are using History.getState() instead of event.state
    if (State.data.state == 666) {
        loadiframe();
    }                    
    History.log('statechange:', State.data, State.title, State.url);
}); 
```

和

```
History.Adapter.onDomLoad(function(){
    console.log('loaded');
    $('#loadiframe').click(function(){
        History.pushState({state:666,rand:Math.random()}, "State 666", "?state=666");
    });
}); 
```

我还没有看过 Backbone，但似乎路线（或类似的东西）是你需要的

[http://backbonejs.org/#Router](http://backbonejs.org/#Router)

```
var Workspace = Backbone.Router.extend({

  routes: {
    "help":                 "help",    // #help
    "search/:query":        "search",  // #search/kiwis
    "search/:query/p:page": "search"   // #search/kiwis/p7
  },

  help: function() {
    ...
  },

  search: function(query, page) {
    ...
  }

}); 
```

我认为它很神奇，并自动检测必须加载的状态（在加载或历史更改等时）并执行所需的功能

或者也许你可以看看这个解决方案 - [http://haithembelhaj.github.com/RouterJs/](http://haithembelhaj.github.com/RouterJs/)

```
RouterJs is a simple router for your ajax web apps. It's build upon History.js 
```

因此，使用 RouterJs 您将拥有相同的 History.js，但具有更多功能。

# codeigniter - codeigniter 如何根据 uri 段的数量将路由设置为默认控制器

> ID：14157423
> 
> 赞同：1
> 
> 时间：2013-01-04T12:43:13.747
> 
> 标签：codeigniter, url-routing

我在我的项目中使用 codeigniter 作为模块来将信息显示为类别及其项目。

我想要的网址如下

1.  sitename.com/module/ 将以随机顺序显示所有项目。
2.  sitename.com/moduel/categoryname/ 将显示该特定类别中的所有项目
3.  sitename.com/module/categoryname/title-of-the-item/ 这将显示该特定项目的详细信息

这里 sitename.com/module/ 是 codeigniter 的根目录，默认控制器是 home。

我的问题是如何为一段或 uri 和两段 uri 设置路线

1.  sitename.com/module/ 应该加载默认控制器（在我的例子中是 home）
2.  sitename.com/module/categoryname/ 应该加载 home/category/categoryname
3.  sitename.com/module/categoryname/title-of-the-item 应该加载 index/title/title-of-the-item

我将定义我的功能如下

1.  函数索引() ...
2.  函数类别($categoryname) ....
3.  函数标题($title)....

所以，要么我想根据段数创建一个路由，要么如果有任何其他替代方案可以通过路由来完成这个，那很好。

我想使用路由而不是通过将 2 个段作为参数传递给 Index 函数来做到这一点。

所以， ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:58:30.027

将站点的基本 url 设置为*sitename.com/module*。

您可以尝试数据库驱动的路由。
这通过使用数据库表为您编写路线来工作。

示例数据库表；

```
CREATE TABLE IF NOT EXISTS `app_routes` (
  `id` bigint(20) NOT NULL auto_increment,
  `category` varchar(192) collate utf8_unicode_ci NOT NULL,
  `controller` varchar(64) collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `category` (`category`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1; 
```

示例路线；

```
$route[ 'default_controller' ]  = 'home';
$route[ '404_override' ]        = 'error404';

require_once( BASEPATH .'database/DB'. EXT );
$db =& DB();
$query = $db->get( 'app_routes' );
$result = $query->result();
foreach( $result as $row )
{
    $route[ $row->slug ]                 = 'home/category_lookup/'.$row->slug;
    $route[ $row->slug.'/:any' ]         = 'home/item_lookup/'$row->slug/$1;
    $route[ $row->controller ]           = 'error404';
    $route[ $row->controller.'/:any' ]   = 'error404';
} 
```

此[链接](http://osvaldas.info/smart-database-driven-routing-in-codeigniter)将为您提供完整的详细信息（这不是我的工作 - Google 只是我的朋友）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T14:08:39.783

```
$route['page/(:any)'] = "home/page/$1";
$route['page'] = "home/index";
$route['(:any)/page/(:any)'] = "home/category/$1/page/$2";
$route['(:any)/page'] = "home/category/$1";
$route['page'] = "home/index";

$route['(:any)/(:any)'] = "home/title/$2";
$route['(:any)'] = "home/category/$1"; 
```

**最后两行（7 和 8）是我需要的......这符合我的目的**

最后两行（1,2,3,4,5）之前的行是我对最后两行（7和8）使用分页的方式

只有 home/category 和 home/ 有分页，而没有 home/title 是结束页面。

同时，如果有人发现代码可能有问题或需要完善，请添加答案以便我更新。

# javascript - 如何从 iframe 重定向到另一个 url 并在 iframe 的父级上打开它？

> ID：14157427
> 
> 赞同：1
> 
> 时间：2013-01-04T12:43:34.790
> 
> 标签：javascript, jsp, scriptlet

我有一个名为 p1.jsp 的父 jsp。当我单击此 jsp 上的链接时，它会打开一个名为 iframe.jsp 的 iframe。现在 iframe.jsp 中有一个链接，单击该链接时必须在关闭 iframe 模态窗口后将用户导航到另一个 url，但该 url 必须在父会话上打开。这意味着 parent.jsp 将被 new.jsp 的内容替换。

我找出了这样的代码：

```
<script type="text/javascript">
function closeMyModal()
{
//Closing Iframe modal 
window.parent.parent.document.getElementById('ovr1').style.display = 'none';
window.parent.parent.document.getElementById('cnt1').style.display = 'none';
<%
String hamlistVal = request.getParameter("hamlistVal");
%>
//Open the new.jsp on the p1.jsp i.e. relace p1.jsp with new.jsp
window.location.href="<%=com.pack.href.getCamHref()%>&hamlistVal=<%=hamlistVal%>";

}
</script> 
```

我的 iframe 模式正在关闭，但它没有导航到 new.jsp。我在这里做错了什么？请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:54:12.163

出于安全目的，您的 iFrame 将不被允许访问父框架。不允许使用导航功能。如果我没记错的话，iFrame 可以读取其父窗口的位置，但不能设置它。

这个 JavaScript 函数是在 iFrame 还是父窗口中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:03:53.597

好的，我得到了解决方案。

我只需要在 iframe.jsp 的 href 中提供完整的 url：

```
<a href = "<%=com.pack.href.getCamHref()%>&hamlistVal=<%=hamlistVal%>"/> 
```

然后我需要将属性目标设置为“_parent”，如下所示：

```
<a href = "<%=com.pack.href.getCamHref()%>&hamlistVal=<%=hamlistVal%>" target="_parent"/> 
```

这使 iframe 消失并在 p1.jsp 上打开 new.jsp。

希望这对其他人有帮助。

当我提到这个线程时，我得到了这个：[Stack Thread](https://stackoverflow.com/questions/11530992/redirect-after-clicking-an-external-link-and-only-open-one-tab-window?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-08T08:43:11.897

还有另一种方法可以实现这一点。当您从多个来源重定向到特定页面时，我的解决方案会更好。

就我而言，我只想确保此页面（这是我的登录页面）不会在 iframe 中打开。如果您想从定义的 url 执行此操作，还可以添加更多条件。

```
<script>
    if(window.self !== window.top)
        window.top.location.href = "<%=request.getContextPath()%>";
</script> 
```

# php - 使以 $ 开头的字符串成为非变量

> ID：14157434
> 
> 赞同：-3
> 
> 时间：2013-01-04T12:44:05.307
> 
> 标签：php

> **可能重复：**
> [php中单引号和双引号字符串的区别](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

我有一些由随机字符组成的字符串，包括 $ 符号，如果字符串碰巧以 $ 开头，因为它被视为变量，这会成为一个问题，有没有办法解决这个问题？

```
<?php
$variable="$&%51a-notaVariable";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:45:36.330

使用单引号：

```
<?php
   $variable='$&%51a-notaVariable';
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:47:13.463

答案 1：使用单引号而不是双引号。

```
$variable = '$&%51a-notaVariable'; 
```

答案 2：如果您出于某种原因肯定需要使用双引号，您可以使用反斜杠转义美元符号。

```
$variable = "\$&%51a-notaVariable"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T12:45:49.000

简短的回答 - 是的。使用`'`而不是`"`因为它不会尝试解析字符串中的字符。:)

长答案 - 是的。请注意，您必须连接字符串而不是放置变量“$inline”（或使用`sprintf()`＆co）......但是，总而言之，这是一个有益的权衡。

# javascript - getElementById 和 onLoad

> ID：14157436
> 
> 赞同：0
> 
> 时间：2013-01-04T12:44:11.780
> 
> 标签：javascript, onload, getelementbyid

HTML 文件...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="src/myJS.js"></script>
</head>
<body onload="myJS.myFunction();">
<p id="p01"></p>
</body>
</html> 
```

外部 Javascript 文件（为方便起见称为 myJS.js）...

```
myJS = {
    myFunction: function()
    {
        //This works
        document.write("Hello world. ");

        //This does not work
        document.getElementById("p01").appendChild(document.createTextNode("Hello world, again"));
    }
}; 
```

我最好的猜测是节点在执行`p01`时尚未创建`myJS`，但我认为这`onload`会做正确的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:53:32.730

如果您的外部 js 确实包含您发布的两行代码，则问题在于`document.write`覆盖整个 HTML（一旦加载 DOM，它的行为就像那样）。然后`getElementById`找不到任何`#p01`，因为它不再存在。

如果您只是删除`document.write`调用，您的代码应该可以工作（请参阅一个[实时示例](http://jsbin.com/ohuqeq/1/edit)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:47:18.637

因为`p01`尚未添加到 DOM。

试试这样：

```
<body>
<p id="p01"></p>
<script type="text/javascript">
window.onload = myJS.myFunction;
</script>
</body> 
```

# ruby-on-rails - 如何在 Rails 2 中为这种情况添加验证

> ID：14157437
> 
> 赞同：0
> 
> 时间：2013-01-04T12:44:10.630
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我有名称 print run 的文本字段，必须以以下格式验证

打印运行字段的有效值为正整数、“无限制”和“无声”。

我添加了这样的验证

```
VALID_NAMES = %w(Unlimited silent  #k)
  validates_inclusion_of :print_run, :in => VALID_NAMES 
```

如何进行验证以接受正整数...

```
validates_numericality_of :print_run, :only_integer => true, :message => "can only be whole number." 
```

上述验证只接受数字

```
Integer(attributes_before_type_cast["print_run"])        
errors.add_to_base( "print_run must be a number") 
```

上面的语句只接受数字，但不接受正整数的验证

如何继续这个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:54:20.970

如果你只想要正整数，

```
validates_numericality_of :print_run, :only_integer => true,:greater_than_or_equal_to => 0, :message => "can only be whole number." 
```

如果你想要**无限**或**静默**或**正整数**

```
validates_format_of :print_run, :with => /\A(Unlimited|silent|\d*)\z/, :message => "your custom message" 
```

# android - 使用 StageText 时键重复且无法删除

> ID：14157439
> 
> 赞同：0
> 
> 时间：2013-01-04T12:44:21.810
> 
> 标签：android, actionscript-3, air, air-native-extension

我正在尝试为我的 AIR 应用程序实现 Stagetext 输入，但遇到了一个巨大的错误。

当我在输入框中键入时，例如“测试”字符开始重复自己，当我尝试删除它们时，它们不断重复。

有解决办法吗？我什至应该将 Stagetext 用于本机输入吗？

下面的代码

```
function login()
{
    var usernameBox = new Sprite();
    var passwordBox = new Sprite();
    var usernameInput:StageText = new StageText();
    var passwordInput:StageText = new StageText();

    usernameBox.graphics.lineStyle(4, 0x000000, 1);
    usernameBox.graphics.beginFill(0xFFFFFF, 1);
    usernameBox.graphics.drawRect(6, 44, stage.stageWidth-12, 70);
    this.addChild(usernameBox);

    passwordBox.graphics.lineStyle(4, 0x000000, 1);
    passwordBox.graphics.beginFill(0xFFFFFF, 1);
    passwordBox.graphics.drawRect(6, 130, stage.stageWidth-12, 70);
    this.addChild(passwordBox);

    usernameInput.returnKeyLabel = ReturnKeyLabel.DONE;
    usernameInput.autoCorrect = true;
    usernameInput.restrict = "a-zA-Z0-9_\\-";
    usernameInput.fontSize = 40;
    usernameInput.color = 0x440000;
    usernameInput.stage = stage;
    usernameInput.viewPort = new Rectangle(10,50,stage.stageWidth-20,70);

    passwordInput.returnKeyLabel = ReturnKeyLabel.DONE;
    passwordInput.autoCorrect = false;
    passwordInput.restrict = "a-zA-Z0-9_\\-";
    passwordInput.fontSize = 40;
    passwordInput.color = 0x440000;
    passwordInput.displayAsPassword = true;
    passwordInput.stage = stage;
    passwordInput.viewPort = new Rectangle(10,136,stage.stageWidth-20,70);
} 
```

# eclipse - Eclipse 产品或应用程序

> ID：14157448
> 
> 赞同：0
> 
> 时间：2013-01-04T12:45:07.887
> 
> 标签：eclipse

我想了解 Eclipse 产品和 Eclipse 应用程序之间的区别。举个例子——我想开发一个名为“Integration-Mapper”的工具。（它将为用户提供一个图形界面来在两个系统中绘制类，然后允许映射它们的属性。）我应该继续做什么？Eclipse 产品还是 Eclipse 应用程序？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:49:54.613

Eclipse 应用程序是可以在 Eclipse 插件环境中执行的程序。这可能使用也可能不使用富客户端平台 GUI，但可以重用来自 Eclipse 的扩展和 OSGi 服务。

另一方面，Eclipse 产品是一个更高级别的概念：它是一个 Eclipse 应用程序，(1) 可以单独安装（至少使用 p2 director 应用程序），(2) 可以包含品牌和启动信息，以及 (3 ) 可以打包为一个简单的可执行文件。安装到此类可执行文件（例如 Eclipse IDE）中的应用程序可以使用特定的命令行参数启动，而可执行文件默认启动选定的应用程序。

您应该同时使用两者，因为产品总是指应用程序；如果我正确理解您的需求，您希望为您的用户添加一个可部署的应用程序。那是产品提供的东西。

# powershell - Set-WindowsAzureLog 的替代品是什么？

> ID：14157453
> 
> 赞同：2
> 
> 时间：2013-01-04T12:45:36.763
> 
> 标签：powershell, azure, performancecounter

我正在考虑在 Azure azure Web 角色上安装性能计数器。

我希望这可以在 powershell 中完成，而不是直接在 web 角色中完成，因为它属于基础架构团队，而不是开发团队，他们需要自由地添加/删除他们认为合适的计数器。我目前没有自定义计数器。

我看到的所有参考资料/文章要么是硬编码的，要么依赖于`Set-WindowsAzureLog`似乎已被弃用的。

我正在使用来自[https://www.windowsazure.com/en-us/manage/downloads/](https://www.windowsazure.com/en-us/manage/downloads/)的 powershell cmdlet ，这似乎没有明显的等价物。

**更新：**我找到了代码[http://wappowershell.codeplex.com/releases/view/84058](http://wappowershell.codeplex.com/releases/view/84058)，这不是我最初预期的源浏览器中的下载。它似乎写入日志，但我不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:36:14.913

至于替换 cmdlet，`Set-WindowsAzureLog`我认为目前没有。

由于您在 PowerShell 中，因此您可以使用 .NET 类来实现您想要做的事情。这是有关日志记录配置的 MSDN 文章。

[如何远程更改诊断监视器配置](http://msdn.microsoft.com/en-us/library/windowsazure/gg432992.aspx)

如果您在脚本中包含 Azure SDK 程序集并将其加载到 PowerShell 中，您应该能够实现您的目标。

希望有帮助。

# model-view-controller - Ext JS 4 MVC 组合框

> ID：14157454
> 
> 赞同：0
> 
> 时间：2013-01-04T12:45:45.640
> 
> 标签：model-view-controller, extjs4

我是 Ext JS 的新手。在这里，我正在尝试使用 Store 填充 ComboBox。我可以看到呈现的组合框，但没有下拉值。有人可以查看并告诉我下面的代码有什么问题。

**app.js:-**

```
Ext.Loader.setConfig({
    enabled: true
    });

Ext.application({
    name: 'MVCCombo', 
    controllers: ['Skills'],
    autoCreateViewport: true

}); 
```

**控制器（Skills.js）：-**

```
Ext.define('MVCCombo.controller.Skills', {
            extend : 'Ext.app.Controller', 
            //define the stores
            stores : ['Skills'],
            //define the models
            models : ['Skill'],
            //define the views
            views : ['combo.Skill'],
            init: function() {
                alert("Controller Invoked");
            }
    }); 
```

**商店（Skills.js）：-**

```
Ext.define('MVCCombo.store.Skills', {
        extend:'Ext.data.Store', 
        model:'MVCCombo.model.Skill',
        data: [{
            "id": "1",
            "name": "Java"
        }, {
            "id": "2",
            "name": "J2EE"
        }, {
            "id": "3",
            "name": "Ext JS"
        }
        ]
    }); 
```

**型号：（Skill.js）：-**

```
Ext.define('MVCCombo.model.Skill', {
    extend: 'Ext.data.Model',
    fields: [{name:'id', type:'string'},{name:'name', type:'string'}]
}); 
```

**查看（ViewPort.js）：-**

```
Ext.define('MVCCombo.view.Viewport', {
    extend: 'Ext.Viewport',    
    layout: 'fit',
    requires: [
        'MVCCombo.view.combo.Skill'
    ],
    initComponent: function() {
        var me = this;

        Ext.apply(me, {
            items: [                
                {
                    xtype: 'cmbBox'
                }
            ]
        });

        me.callParent(arguments);
    }
}); 
```

**查看（Skill.js）：-**

```
Ext.define('MVCCombo.view.combo.Skill' ,{
    extend: 'Ext.form.ComboBox',
    alias : 'widget.cmbBox',    
    allowBlank: false,
    queryMode: 'local',
    valueField: 'id',
    displayField: 'name', 
    store: 'Skills' 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:42:54.103

更改您的小部件别名，别名/小部件必须小写：

别名：“widget.cmbbox”，别名：“widget.cmbbox”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:15:04.820

正如 dbrin 所建议的，我[对 jsFiddle 进行了快速测试](http://jsfiddle.net/dKT6L/)。我（偶然）发现`layout`您的视口上的选项是问题的根源。尝试以下解决方案之一：

*   删除`layout`选项
*   将组合包裹在面板内

# html - li 内的 div 不扩展

> ID：14157457
> 
> 赞同：0
> 
> 时间：2013-01-04T12:46:07.417
> 
> 标签：html, css, menu, menubar

我有一个用无序列表构建的水平菜单。将鼠标悬停在其中一个列表项上时，将显示一个包含在 div 中的子菜单。在内容正确显示的子菜单中，div 本身被限制为父列表项的宽度。这会导致内容溢出到 div 的右侧。我怎样才能使 div 随内容扩展。

[JSFiddle 上的 HTML 和 CSS](http://jsfiddle.net/85SrS/6/)

HTML：

```
<div>
<ul class="menu">
  <li class="menuTab menuTabFirst">
    Menu Bar Item 1
    <div class="menuDropDown">
      <h2><a href="#">Menu Heading Goes Here</a></h2>
      <ul>
        <li><a href="#">Menu Item 1 Goes Here</a></li>
        <li><a href="#">Menu Item 2 Goes Here</a></li>
        <li><a href="#">Menu Item 3 Goes Here</a></li>
        <li><a href="#">Menu Item 4 Goes Here</a></li>
      </ul>

      <h2><a href="#">Menu Heading Goes Here</a></h2>
      <ul>
        <li><a href="#">Menu Item 1 Goes Here</a></li>
        <li><a href="#">Menu Item 2 Goes Here</a></li>
        <li><a href="#">Menu Item 3 Goes Here</a></li>
        <li><a href="#">Menu Item 4 Goes Here</a></li>
      </ul>
    </div>
  </li>

  <li class="menuTab">
    Menu Bar Item 2
    <div class="menuDropDown">
      <h2><a href="#">Menu Heading Goes Here</a></h2>
      <ul>
        <li><a href="#">Menu Item 1 Goes Here</a></li>
        <li><a href="#">Menu Item 2 Goes Here</a></li>
        <li><a href="#">Menu Item 3 Goes Here</a></li>
        <li><a href="#">Menu Item 4 Goes Here</a></li>
      </ul>
    </div>
  </li>
</ul>
</div> 
```

CSS：

```
.menu {
    list-style-type: none;
    border-spacing:3px 0px;
    padding: 0px;
    display: table;
    margin: 5px 0px 0px;
    text-align:center;
    height: 26px;
    width: 300px;
}
.menuTab {
    background-color: #D2DCE0;
    display: table-cell;
    position: relative;
    margin:0px 5px 0px 0px;
    padding:6px 0px;
    font-size: 15px;
    width: auto;
    cursor: default;
    border-bottom: 0px;
    color: #002F68;
}
.menuTab:hover {
    background-color:#93B4D6;
    color: white;
}
.menuTab:hover .menuDropDown {
    left:0px; /* Shows the dropdown div */
}
.menuDropDown {
    background-color:#EBECEF;
    border:1px solid #6798CF;
    position: absolute;
    left:-999em; /* Hides the dropdown until menuTab mouseover */
    margin-top: 5px;
    z-index: 1;
    display: block;
}
.menuDropDown ul {
    list-style-type: none;
    margin:0px;
    padding:0px;
    margin-left: 20px;
    margin-bottom: 20px;
    text-align: left;
}
.menuDropDown h2 {
    font-size:14px;
    margin-left: 18px;
    margin-bottom: 5px;
    font-weight: normal;
    text-align: left;
}
.menuDropDown h2 a {
    color: black;
}
.menuDropDown li {
    font-size:14px;
    padding:0px;
    margin-left: 10px;
}
.menuDropDown li a {

}    
.menuDropDown li:hover {
        background-color: #EBECEF;
}
.menuLastTab {
    margin-right: 0px;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:51:05.207

试试这个来正确定位子菜单：

```
.menuTab:hover .menuDropDown {
    left: inherit; /* Shows the dropdown div positioned properly */
} 
```

这可以缩放菜单内的内容：

```
.menuDropDown ul {
    list-style-type: none;
    margin:0px;
    text-align: left;
    padding: 20px;
} 
```

问候。

# asp.net-mvc - 如何从 ASP.NET/Mono MVC 应用程序中的模板生成 pdf 调用

> ID：14157463
> 
> 赞同：1
> 
> 时间：2013-01-04T12:46:41.923
> 
> 标签：asp.net-mvc, asp.net-mvc-2, mono, pdf-generation, report

ASP.NET / Mono MVC2 应用程序用于以 PDF 格式创建和邮寄发票、订单和其他文档。

每个客户都需要不同的文档布局和文档中的徽标。

这种布局应该很容易定制。

如何使用免费软件实现这一点？应用程序中应该有报告生成器或其他东西，以及从设计的布局中创建带有徽标的 pdf 文件的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:19:28.537

我有同样的需求，并且一直在努力为此找到理想的解决方案。我目前正在使用[iTextSharp](http://itextpdf.com/)，这似乎是一个流行的选择。它使您可以将 html 页面呈现为 pdf。我发现它对 css 样式的支持有限，这会让你很难得到你想要的东西。以下是如何在 mvc 中使用它的一些示例代码：

```
 public ActionResult CreatePdfFromView(YourType yourViewData)
    {
        var htmlViewRenderer = new HtmlViewRenderer();
        string htmlText = htmlViewRenderer.RenderViewToString(this, "YourViewName", yourViewData);

        byte[] renderedBuffer;

        using (var outputMemoryStream = new MemoryStream())
        {
            using (Document document = new Document())
            {
                PdfWriter writer = PdfWriter.GetInstance(document, outputMemoryStream);
                writer.CloseStream = false;
                document.Open();

                iTextSharp.text.Image pic = iTextSharp.text.Image.GetInstance(Server.MapPath("/Content/img/Your_Logo.png"));
                pic.ScaleToFit(190, 95);
                pic.SetAbsolutePosition(200, 730);
                document.Add(pic);

                try
                {
                    StringReader sr = new StringReader(htmlText);
                    XMLWorkerHelper.GetInstance().ParseXHtml(writer, document, sr);
                }
                catch (Exception e)
                {
                    throw;
                }
            }

            renderedBuffer = new byte[outputMemoryStream.Position];
            outputMemoryStream.Position = 0;
            outputMemoryStream.Read(renderedBuffer, 0, renderedBuffer.Length);
        }

        return new BinaryContentResult(renderedBuffer, "application/pdf");
    } 
```

我会说确保使用 XMLWorkerHelper 而不是 HTMLWorker。我认为您必须单独下载 XML 工作程序。 [这是下载页面的链接。](http://sourceforge.net/projects/itextsharp/files/).

我用过的另一个，更用于创建 excel 报告的是[DoodleReport](http://doddlereport.codeplex.com/)。这要简单得多。基本上是表格数据转储。不知道你是否也可以做图标。

希望有帮助。好奇看看有没有人有更好的建议。

# java - Android 格式化日期与时区

> ID：14157476
> 
> 赞同：16
> 
> 时间：2013-01-04T12:47:15.267
> 
> 标签：java, android, calendar, google-calendar-api, simpledateformat

我需要将日期格式化为特定的字符串。

我使用`SimpleDateFormat`类使用模式“”来格式化日期，**`yyyy-MM-dd'T'HH:mm:ssZ`**它将当前日期返回为
“ `2013-01-04T15:51:45+0530`”，但我需要作为
“ `2013-01-04T15:51:45+05:30`”。

下面是使用的编码，

```
Calendar c = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ", Locale.ENGLISH);      
Log.e(C.TAG, "formatted string: "+sdf.format(c.getTime())); 
```

**输出**：格式化字符串：`2013-01-04T15:51:45+0530`

我需要的格式`2013-01-04T15:51:45+05:30`只是在 gmt 时间之间添加冒号。

因为我正在使用 Google 日历来插入事件，所以它只接受我提到的所需格式。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-08-05T11:03:07.203

您还可以在模式中使用“ZZZZZ”而不是“Z”（根据[文档](http://developer.android.com/reference/java/text/SimpleDateFormat.html)）。像这样的东西

```
 Calendar c = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZZZZZ", Locale.ENGLISH);      
    Log.e(C.TAG, "formatted string: "+sdf.format(c.getTime())); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-04T12:53:22.443

您可以改用[Joda Time](http://joda-time.sourceforge.net/)。它`DateTimeFormat`有一个`ZZ`格式属性，可以满足您的需求。

[关联](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)

大优势：不像`SimpleDateFormat`,`DateTimeFormatter`是线程安全的。用法：

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ssZZ")
    .withLocale(Locale.ENGLISH); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-13T19:27:32.177

# tl;博士

您可以使用该模式`yyyy-MM-dd'T'HH:mm:ssXXX`来获得所需的输出。

# *java.time*

日期时间 API`java.util`及其格式化 API`SimpleDateFormat`已过时且容易出错。建议完全停止使用它们并切换到[现代日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html)。

*   出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。
*   如果您正在为一个 Android 项目工作并且您的 Android API 级别仍然不符合 Java-8，请通过 desugaring和[How to use ThreeTenABP in Android Project检查](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)[Java 8+ APIs available](https://developer.android.com/studio/write/java8-support-table)。

## 使用现代日期时间 API：

**构建一个包含日期、时间和时区偏移信息并对其进行格式化的对象：**

```
import java.time.LocalDate;
import java.time.LocalTime;
import java.time.OffsetDateTime;
import java.time.ZoneOffset;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        OffsetDateTime odt = OffsetDateTime.of(LocalDate.of(2013, 1, 4), LocalTime.of(15, 51, 45),
                ZoneOffset.ofHoursMinutes(5, 30));

        // Print the default format i.e. the string returned by OffsetDateTime#toString
        System.out.println(odt);

        // Custom format
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("uuuu-MM-dd'T'HH:mm:ssXXX", Locale.ENGLISH);
        System.out.println(dtf.format(odt));
    }
} 
```

**输出：**

```
2013-01-04T15:51:45+05:30
2013-01-04T15:51:45+05:30 
```

如您所见，默认格式的输出和使用 a 的输出`DateTimeFormatter`是相同的。但是，这里有一个问题：如果是，则**省略**秒和秒的小数部分，即如果上面代码中的时间是，则默认格式的输出将是。如果您需要像这次这样的字符串，则必须使用带有所需模式的 a 。[`OffsetDateTime#toString`](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html#toString--) **`0``LocalTime.of(15, 0, 0)``2013-01-04T15:00+05:30``2013-01-04T15:00:00+05:30``DateTimeFormatter`**

 ****解析和格式化：**

```
import java.time.OffsetDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        DateTimeFormatter dtfForInputString = DateTimeFormatter.ofPattern("uuuu-MM-dd'T'HH:mm:ssZ", Locale.ENGLISH);
        OffsetDateTime odt = OffsetDateTime.parse("2013-01-04T15:51:45+0530", dtfForInputString);

        // Print the default format i.e. the string returned by OffsetDateTime#toString
        System.out.println(odt);

        // Custom format
        DateTimeFormatter dtfCustomOutput = DateTimeFormatter.ofPattern("uuuu-MM-dd'T'HH:mm:ssXXX", Locale.ENGLISH);
        System.out.println(dtfCustomOutput.format(odt));
    }
} 
```

**输出：**

```
2013-01-04T15:51:45+05:30
2013-01-04T15:51:45+05:30 
```

## 使用旧版 API：

**为给定的时区偏移量构建一个日期时间对象并对其进行格式化：**

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Locale;
import java.util.TimeZone;

public class Main {
    public static void main(String[] args) {
        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT+05:30"));
        calendar.set(2013, 0, 4, 15, 51, 45);
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssXXX", Locale.ENGLISH);
        sdf.setTimeZone(TimeZone.getTimeZone("GMT+05:30"));
        Date date = calendar.getTime();
        System.out.println(sdf.format(date));
    }
} 
```

**输出：**

```
2013-01-04T15:51:45+05:30 
```

该类`Calendar`使用`UTC`（或`GMT`）作为其默认时区，因此，除非您使用它指定时区，否则它将`java.util.Date`返回`UTC`.

同样，`SimpleDateFormat`该类也`UTC`用作其默认时区，因此，除非您使用它指定时区，否则它将`String`返回`UTC`.

**解析和格式化：**

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;
import java.util.TimeZone;

public class Main {
    public static void main(String[] args) throws ParseException {
        SimpleDateFormat sdfForInputString = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ", Locale.ENGLISH);
        Date date = sdfForInputString.parse("2013-01-04T15:51:45+0530");

        SimpleDateFormat sdfCustomOutput = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssXXX", Locale.ENGLISH);
        sdfCustomOutput.setTimeZone(TimeZone.getTimeZone("GMT+05:30"));
        System.out.println(sdfCustomOutput.format(date));
    }
} 
```

**输出：**

```
2013-01-04T15:51:45+05:30 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T12:56:31.923

您可以做的只是使用 substring() 手动添加“：”。我之前遇到过这个问题，这个解决方案有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T12:59:45.073

试试这个

```
Calendar c = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ", Locale.ENGLISH);   

System.out.println("formatted string: "+sdf.format(c.getTime()));

String text = sdf.format(c.getTime());  
String result = text.substring(0, 22) + ":" + text.substring(22);  
System.out.println("result = " + result); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-04T13:00:33.917

为什么不直接用正则表达式手动完成呢？

```
String oldDate = "2013-01-04T15:51:45+0530";
String newDate = oldDate.replaceAll("(\\+\\d\\d)(\\d\\d)", "$1:$2"); 
```

相同的结果，带有子字符串（如果性能是一个问题）。

```
String oldDate = "2013-01-04T15:51:45+0530";
int length = oldDate.length();
String newDate = oldDate.substring(0, length - 2) + ':' + oldDate.substring(length - 2); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-21T12:31:33.673

如果您想要不同时区的日期（标题建议）

```
 val nowMillsUTC = System.currentTimeMillis()

  val timeZoneID = "Australia/Perth"
  val tz = TimeZone.getTimeZone(timeZoneID)

  val simpleDateFormat = SimpleDateFormat("HH.mm  dd.MMM.yyyy", Locale.getDefault())
  simpleDateFormat.setTimeZone(tz)
  val resultTxt = simpleDateFormat.format(nowMillsUTC)

  print(timeZoneID + " -> " + resultTxt)
  //   Australia/Perth -> 19.59  21.Mar.2019 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-04T13:02:07.187

试试这个代码

```
Calendar c = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss Z", Locale.ENGLISH);
String s = sdf.format(c.getTime());
String fDate = s.substring(0, s.length()-2) +":"+s.substring(s.length()-2, s.length());
Log.e("check", "formatted string: "+fDate); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-13T15:23:23.973

这就是我在 android Build.VERSION.SDK_INT < 26 上的做法

```
int offset = TimeZone.getDefault().getRawOffset();
String str_date='20:30 12-01-2021';
DateFormat formatter = new SimpleDateFormat("HH:mm dd-MM-yyy",Locale.US);
Date date = formatter.parse(str_date);
long utcTime = date.getTime() + (3600000*3);
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm dd/MM/yyyy", Locale.US);
String dateStr = sdf.format(utcTime + offset);
System.out.println(dateStr); 
```

当我的服务器使用 -3 时区发送时间时，我必须将 (3600*3) 添加到 getTime 并将其保存到 utcTime，这样 utcTime 就是 UTC。然后我将手机当前时区的偏移量添加到 utcTime。在我的情况下，因为我的时区是 -3 它的打印：

```
20:30 12/01/2021 
```

但如果我改变我的时区，日期也会改变。

我已经在这里回答了： [Convert UTC into Local Time on Android](https://stackoverflow.com/questions/17677546/convert-utc-into-local-time-on-android/65687433#65687433)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-09-03T22:03:20.907

只需重构此代码并将“Locale.getDefault()”替换为您需要的语言环境

```
private SimpleDateFormat getDateFormat() {
    SimpleDateFormat dateFormat = (SimpleDateFormat) SimpleDateFormat.getDateTimeInstance(SimpleDateFormat.SHORT, SimpleDateFormat.DEFAULT, Locale.getDefault());
    String pattern = dateFormat.toLocalizedPattern();
    pattern = pattern.trim();
    dateFormat.applyLocalizedPattern(pattern);
    return dateFormat;
} 
```

//这里是用法

SimpleDateFormat sdf = getDateFormat();

sdf.format（新日期（））；**

# knockout.js - 单击行中的复选框在行敲除绑定上触发事件绑定

> ID：14157478
> 
> 赞同：13
> 
> 时间：2013-01-04T12:47:20.720
> 
> 标签：knockout.js, knockout-2.0

我有一个场景，其中 Click 事件被绑定到`<tr>`并且选中的值被绑定到内部的`<td?`复选框`<tr>`。现在的问题是当单击该行时，触发事件就可以了。但是如果我单击复选框，则行的可观察值也会更改并触发行单击事件。如何避免这种情况

```
<tbody data-bind="foreach:Mails">
    <tr data-bind="click:$root.navigateToMail">
        <td style="width: 15px">
            <input type="checkbox" data-bind="checked: isSelected">
            @*<input type="checkbox">*@
        </td>
        <td data-bind="text: From">
        </td>
        <td data-bind="text: To">
        </td>
        <td data-bind="text: Subject">
        </td>
        <td data-bind="text: MailDate">
        </td>
    </tr>
</tbody> 
```

事件是：

```
 ko.utils.arrayForEach(data.mails, function (mail) {
                    mail.isSelected = ko.observable(false);
                    mail.isSelected.subscribe(function (myvalue) {
                        console.log(myvalue);
                    });
                });
 self.navigateToMail = function (mail) {
        location.hash = mail.Folder() + '/' + mail.Id();
    }; 
```

我修剪了不必要的代码。只是把问题出现在哪里。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-04T14:31:01.767

您基本上需要取消单击时冒泡的事件。

这是一个如何做到这一点的示例：

```
<div data-bind="click: parentClick">
    <input type="checkbox" data-bind="checked: isSelected, click: function(){return true}, clickBubble: false">
</div>​ 
```

见这里：http: [//jsfiddle.net/2M9XP/1/](http://jsfiddle.net/2M9XP/1/)

# mysql - 使用 MySQL 计算字符串中字符的出现次数

> ID：14157480
> 
> 赞同：25
> 
> 时间：2013-01-04T12:47:27.187
> 
> 标签：mysql, sql, regex

例句：a, akkka, akokaa, kokoko, kakao, oooaooa, kkako, kakaoa

我需要正则表达式女巫给出带有 2 个或更少 'a' 的单词，但不是没有 'a' 的单词

结果：a, akka, kakao, oooaooa, kkako

好的，实际上我正在使用：

```
SELECT word FROM dictionary_gr WHERE word REGEXP 'λ{2,3}' LIMIT 0 , 30 
```

这将返回 0 行有 2 λ 和 3 λ 的单词

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-04T12:51:18.540

```
select *  
from table  
where  LENGTH(name) - LENGTH(REPLACE(name, 'a', '')) between 1 and 2 
```

更新为之间使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:57:54.120

我不知道 MySQL 在环视断言方面支持什么，但以下方法可以解决问题：

```
^(?=.*a.*a?.*)(?!.*a.*a.*a.*).*$ 
```

我们有一个前瞻断言，它匹配字符串中`a`的 1 或 2 个字符。然后我们有一个否定的前瞻，它忽略`a`字符串中任何位置的 3 个或更多 s。然后最终的模式只匹配整个字符串，前提是前两个断言得到满足。

如果 MySQL 不支持环视，那么@Woot4Moo 的答案将是可行的方法。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-04T15:33:44.297

又快又脏：

```
Select word, number_of_as From
(
 Select 'akkka' word, REGEXP_COUNT('akkka', 'a') number_of_as From dual
)
Where number_of_as <= 2
/ 
```

# windows-8 - Webview忽略在外部浏览器中打开链接的#(hash)参数

> ID：14157482
> 
> 赞同：4
> 
> 时间：2013-01-04T12:47:50.947
> 
> 标签：windows-8, webview, microsoft-metro

我有`webview`一个 html 文件，其中包含一个链接（`anchor tag`with `target="_blank"`），该链接将在`external browser`. 这是html的代码：

`"<html><body><a href='https://mail.google.com/mail/ca/u/0/?shva=1#sent' target='_blank'>Test</a></body></html>";`

单击链接时，当它在外部浏览器中打开时，`the hash part is removed`. 为什么会这样？

我怎样才能防止这种情况或克服这个缺陷？

**更新**

在进一步的实验中，我发现如果默认情况下浏览器不是 IE，外部浏览器会忽略 #fragment。( `Non-Metro`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:23:45.857

它是标准的一部分，但同样，它不是。阅读此问题以了解您所面临的问题 :) [URL 片段和 302 重定向](https://stackoverflow.com/questions/2286402/url-fragment-and-302-redirects)

# iphone - 如何仅以编程方式为一个特定的 ViewController 添加 IB 约束？

> ID：14157486
> 
> 赞同：0
> 
> 时间：2013-01-04T12:48:08.637
> 
> 标签：iphone, constraints, xcode4.5, uistoryboard

我正在创建一个 iPhone 应用程序。该应用程序已开发为适合 4 英寸屏幕。现在我必须添加对 3.5 英寸屏幕的支持。我有一些自动适应的视图，例如`UITableViews`. 但是，我也有一个视图，其中包含很多来自 Interface Builder 的对象。

通过这段代码，我检查屏幕是 3.5 英寸还是 4 英寸：

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
        NSLog(@"iPhone with 3.5 Inch screen");
    }
    if(result.height == 568)
    {
        // iPhone 5
        NSLog(@"iPhone with 4 Inch screen");
    }
} 
```

我可以在这个代码检查中**为这个特定的 ViewController添加故事板中的 IB 约束吗？**以编程方式创建这些约束的最简单方法是什么？

* * *

编辑：我想要实现的目标：

*   获取我的属性
*   在 Storyboard 中停用此特定 ViewController 的自动布局
*   在上面的检查中手动添加约束。

这是我在 ViewControllers .h 文件中定义的属性的列表：

```
@property (nonatomic, assign) NSInteger selectedIndex;
@property (nonatomic, retain) AbstractActionSheetPicker *actionSheetPicker;
@property (weak, nonatomic) IBOutlet UITextField *workerField;
@property (weak, nonatomic) IBOutlet UITextField *dateField;
@property (nonatomic, retain) NSMutableArray *workers;
@property (nonatomic, retain) NSDate *selectedDate;
@property (nonatomic, retain) IBOutlet UISwitch *cutSwitcher;
@property (nonatomic, retain) IBOutlet UISwitch *colorSwitcher;
@property (nonatomic, retain) IBOutlet UISwitch *waveSwitcher;
@property (nonatomic) BOOL internetActive;
@property (nonatomic) BOOL hostActive; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:56:58.403

为 Xib 文件中的所有对象设置 CGRect。为 iPhone 4 设置一个版本，为 iPhone 5 设置另一个版本。

```
 CGSize result = [[UIScreen mainScreen] bounds].size;
        CGRect master;
        if(result.height == 480)
        {
            // iPhone Classic
            NSLog(@"iPhone with 3.5 Inch screen");
            CGRect classic = CGRectMake(0,0,0,0);
            master = classic;
        }
        if(result.height == 568)
        {
            // iPhone 5
            NSLog(@"iPhone with 4 Inch screen");
            CGRect iPhone5 = CGRectMake(0,0,0,0);
            master = iPhone5;
        }

someView.frame = master; 
```

编辑：

首先，我认为您不能禁用特定视图控制器的自动布局。其次，如果你用方法逻辑替换我上面答案中的 rect 逻辑，它应该仍然可以工作。制作两个方法，每个视图一个，并将它们添加到 if (result.height ==) 中。是否要直接在 viewController 或单例类中执行此操作取决于您。

# php - 在 InfoWindows gmap 中查看所有 mysql 数据

> ID：14157488
> 
> 赞同：0
> 
> 时间：2013-01-04T12:48:17.197
> 
> 标签：php, mysql, ajax, gis

我对下面的脚本有疑问，如何将 mysql 中的数据显示到 infowindow 中？

显示的数据是 MySQL 中的所有数据。我可以使用以下脚本吗

```
$sql=mysql_query("SELECT * FROM map WHERE id='$_get[id]'");
while($sq=mysql_fetch_array($sql)){
echo " Name = $sq[name]";
echo " Address = $sq[address]";
} 
```

显示地图？

以上是我的问题脚本：

```
function ambildatabase(akhir){
if(akhir=="akhir"){
    url = "ambildata.php?akhir=1";
}else{
    url = "ambildata.php?akhir=0";
}
$.ajax({
    url: url,
    dataType: 'json',
    cache: false,
    success: function(msg){
        for(i=0;i<msg.wilayah.petak.length;i++){
            judulx[i] = msg.wilayah.petak[i].judul;
            desx[i] = msg.wilayah.petak[i].deskripsi;
            set_icon(msg.wilayah.petak[i].jenis);

            var point = new google.maps.LatLng(
                parseFloat(msg.wilayah.petak[i].x),
                parseFloat(msg.wilayah.petak[i].y));
            var tanda = new google.maps.Marker({
                position: point,
                animation: google.maps.Animation.BOUNCE,
                map: peta,
                icon: gambar_tanda
            });
            setinfo(tanda,i);

        }
    }
});
} 
```

这是内容的地方：

```
var infowindow = new google.maps.InfoWindow({
 content: "asdasdasd" 

});

function setinfo(petak, nomor){
google.maps.event.addListener(petak, 'click', function() {
        infowindow.open(peta,petak);
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:59:28.760

你有几个问题需要解决：

1.  您的 php 脚本没有返回有效的 json。您应该将所有数据收集在一个变量中，最后执行类似的操作`echo json_encode($your_data);`
2.  您从 mysql 获取的数据与您在 javascript 中使用的变量之间似乎没有关系：您的 javascript 变量名称暗示了您刚刚从数据库获取`Name`和`Address`从数据库获取的数组/对象的嵌套结构。如果你希望你的结果包含`msg.wilayah.petak[i].deskripsi`你需要首先在 php.ini 中生成正确结构的东西。

并且您有一个 sql 注入错误，您应该切换到 PDO（或 mysqli）并使用绑定变量准备语句。

# syntax - 链接 SPSS 语法文件

> ID：14157493
> 
> 赞同：2
> 
> 时间：2013-01-04T12:48:46.980
> 
> 标签：syntax, spss

我有一个非常大（5000 行）的语法文件，当我需要修改它时，SPSS 19 会阻塞。所以我想把文件分成多个子文件。但是如何做到这一点？简单地拆分它们是有风险的，因为我必须记住运行每个文件。是否有可能链接多个语法文件，以便我可以运行调用 BCDE 的文件 A？我读过“包含”，但有人提到它不能处理识别？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T14:02:38.923

请参阅（以及[此处](https://stackoverflow.com/a/13149477/604456)`INSERT`的类似讨论）。您无需担心批处理语法规则和缩进，因此您可以简单地将庞大的语法文件分成单独的文件并使用 include 。`INSERT`

IMO 我通常将我的语法分割成单独的逻辑步骤来处理长例程，而且我很少有超过 400~500 行的语法文件（最复杂的大约是 100~200 行）。你总是可以关闭语法高亮——但调试和导航如此庞大的代码仍然是非常困难的。

# graphviz - 是否可以在graphviz中将子图进一步分开

> ID：14157498
> 
> 赞同：4
> 
> 时间：2013-01-04T12:49:31.280
> 
> 标签：graphviz, dot, bipartite, graph-drawing

我在graphviz中绘制了一个二分图，我希望它有两列由直线连接的节点（以匹配其他地方使用的样式）。我基本上可以得到我想要的东西（见图），但是列太靠近了，这使得边缘不必要地难以遵循。

我试图在前两个节点之间添加一个非常低权重的连接，希望它将两个子图分开，但这不起作用（并且经常会弄乱布局的其余部分）。有没有办法将右侧的节点列进一步向右移动。

这是一个显示我看到的问题的示例

![两个子图靠得太近的有向图](../Images/1fa5b8ee3f222ff2cc8854472db14f3e.png)

这是我用来生成此图的代码

```
graph G {
      splines=false;
      node[shape=circle, style=filled]
      subgraph cluster_1 {
      subgraph cluster_1r {
         a12 [label="a",fillcolor=lightgrey]
         b12 [label="b",fillcolor=lightgrey]
         c12 [label="c",fillcolor=lightgrey]
         d12 [label="d",fillcolor=lightgrey]
         e12 [label="e",fillcolor=lightgrey]
         a12--b12--c12--d12--e12 [style=invis]
         }
      subgraph cluster_1l {
         a11 [label="a",fillcolor=white]
         b11 [label="b",fillcolor=white]
         c11 [label="c",fillcolor=white]
         d11 [label="d",fillcolor=white]
         e11 [label="e",fillcolor=white]
         a11--b11--c11--d11--e11 [style=invis]
         }
         c11--a12 [constraint=false]
         c11--b12 [constraint=false]
         d11--b12 [constraint=false]
         e11--a12 [constraint=false]
         e11--b12 [constraint=false]
     }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T18:27:10.347

在两列之间添加一个不可见的节点可以正常工作。基本上我添加了这个

```
subgraph cluster_1m {
   color=invis;          
   a12m [style=invisible]
   } 
```

在两个子图之间。虽然这感觉很粗糙，所以任何更优雅的解决方案都会受到欢迎。

# ios - iOS 的基于 XML 的布局

> ID：14157499
> 
> 赞同：5
> 
> 时间：2013-01-04T12:49:34.433
> 
> 标签：ios, xaml, android-layout, layout

在开发 iOS 应用程序（类似 CRUD，而不是游戏）时，基本上有两种选择：

*   使用 Interface Builder 进行布局
*   在代码中布局所有内容

假设出于多种原因我不想使用 Interface Builder。

在代码中布置所有内容都很好，除了经验不足的开发人员倾向于硬编码代码中所有内容的绝对位置和大小。将所有内容正确定位在屏幕上所需的代码量可能会令人沮丧。

最近我看了一下 Android 和 Windows Phone SDK，我真的更喜欢他们基于 XML 的布局引擎。

iOS 有没有类似 XAML 或 Android 布局的东西？

我听说过 iOS 6 的 Auto Layout。不幸的是，我无法使用它，因为大多数时候我必须支持 iOS 5.0 甚至 iOS 4.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:51:00.753

您可能想查看[WorkflowSchema](https://github.com/CRedit360/WorkflowSchema)。它的布局支持目前非常基本，但它是开源的，因此您可以添加您需要的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-30T18:26:03.880

我知道这个问题有点老了，但如果有人感兴趣的话——MarkupKit 是我专门为解决这种类型的用例而创建的一个开源项目：

[https://github.com/gk-brown/MarkupKit](https://github.com/gk-brown/MarkupKit)

它允许您使用类似于 XAML 或 Android 的标记来构建本机 iOS 用户界面。它需要 iOS 8，但也支持 Apple 在 iOS 9 中添加的新 UIStackView 类。希望对您有所帮助。

# css - 鼠标点击时隐藏/显示css动画

> ID：14157513
> 
> 赞同：0
> 
> 时间：2013-01-04T12:50:49.020
> 
> 标签：css, animation, hover, expand, mouseclick-event

一段时间以来，我一直在尝试各种让我发疯的方法！我一直在这个网站 (http://alex-humphries.com/NC6/) 上工作，并进行了设置，因此当您将鼠标悬停在“加入邮件列表”上时，下面的内容会展开。我希望它可以在单击时切换，或者保持展开直到再次单击（本质上，我不希望鼠标离开时内容消失）。这是HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Nina</title>
<link href="style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="http://stratus.sc/stratus.js"></script>

                    <script type="text/javascript">
                      $(document).ready(function(){
                          $.stratus({
                              links: 'http://soundcloud.com/ninaschofield/drifting',
                        theme: 'http://stratus.sc/themes/dark.css',
                              auto_play: false,
                              color : '805ffa'
                            });
                      });
                    </script>     

<style type="text/css">
body,td,th {
    font-family: Quicksand, Serif;
    color: #FFF;
    size: 0.7em;    
    }
h1 {
    text-shadow: 1px 1px 3px #aaa;
    font-family: "QuicksandBold", serif
    font-size:1.2em;
    font-weight: bold;

}
a:link {
    text-decoration: none;
}
a:visited {
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}
a:active {
    text-decoration: none;
}

p.style5 {font: 18px/27px 'QuicksandBold', Arial, sans-serif;}
p.style4 {font: 24px/27px 'QuicksandLight', Arial, sans-serif;}
p.style3 {font: 14px/27px 'QuicksandBook', Arial, sans-serif;}
p.style6 {font: 24px/27px 'QuicksandB', Arial, sans-serif; 
  background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9C6CD7));

  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

</style>
</head>

<body bgcolor="#000000" onload="MM_preloadImages('images/fbookmo.png','images/twittermo.png','images/youtubemo.png','images/soundcloudmo.png')">    <div id="social"><a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('facebook','','images/fbookmo.png',1)"> <img src="images/fbook.png" width="49" height="49" id="facebook" /></a><a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Twitter','','images/twittermo.png',1)"> <img src="images/twitter.png" alt="Twitter" width="49" height="49" id="Twitter" /></a> <a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('YouTube','','images/youtubemo.png',1)"><img src="images/youtube.png" alt="YouTube" width="49" height="49" id="YouTube" /></a> <a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('Soundcloud','','images/soundcloudmo.png',1)"><img src="images/soundcloud.png" alt="Soundcloud" width="49" height="49" id="Soundcloud" /></a></div><div id="nina"></div>
<div id="video"><iframe width="420" height="240" src="http://www.youtube.com/embed/zCCYZuqizns" frameborder="0" allowfullscreen></iframe></div>
<div id="text">To mix thoughtful and catchy songs with a uniquely arresting voice and breathtaking beauty is a classic recipe for pop success. But at 21, singer/songwriter Nina has also shown a mature determination to achieve an international career.
</br></br>

Classically trained and having successfully completed a Degree in Vocal Performance at the Academy of Contemporary Music she has done a great deal of professional work to widespread acclaim. Known as a singer from her early years she has performed in public since the age of 16\. In 2007 Nina was invited to perform at the Montreux Jazz Festival, sharing the bill with the likes of Tori Amos, Seal, Sly and The Family Stone, Jeff Beck, Beastie Boys and Ben's Brother. Since then, she has continued to perform live as well as working closely with internationally noted Producer Richard Niles (Sir Paul McCartney, Ray Charles, Mariah Carey, Kylie Minogue, Westlife, Tom Jones) with whom she has already produced two singles. She has worked in collaboration with musicians such as Richard Cottle (David Bowie, Seal, Tina Turner), the famous photographer Angelo Valentino (Kate Moss, Naomi Campbell, Usher) and one of America's hottest designers, Arianna Power (Kayne West, Estelle, Metro Station).
</br></br>
As well as supporting John Power (The La's/Cast) on two occasions, she has taken part in the semi-finals of the BBC Radio 2 Young Folk Awards 2008/9\. Radio airplay includes coverage by stations such as BFBS, and, in addition to recorded plays, live studio performances for BBC Southern Counties Radio on South Live (syndicated across the southern counties), BBC Solent Radio, Hampshire and Guildford University Radio, Surrey. As well as interviews on local TV, Nina has made appearances on BBC 2's show "Genius" and on Channel 5 for their "Don't Stop Believing" advert. 
</br></br>
Nina's recent release "Slow Down Soldier" in aid of Help For Heroes reached number 4 in the UK iTunes Singer/Songwriter chart, receiving extensive radio airplay and TV coverage. As well as supporting the forces, she is a proud ambassador for The Rose Road Association.
 </br></br>
Currently working with producers and writers in Los Angeles, Switzerland, Germany and the UK, Nina looks forward to releasing new material at the end of 2012 and performing across the country.</div>
<div id="scloud"></div>
<div id="mailing"><div class="menu-item"><p class="style4">JOIN THE MAILING LIST</h1></p>
<ul>
<li>
 Sign up today to get an free track
  <p></br></br>
  <strong>Name</strong>
  <input name="name" type="text" size="30" maxlength="30" />
  Email <input name="name" type="text" size="30" maxlength="30" />
  <a href="#" class="classname">Sign Up</a></p></br></p></br></br></li></ul></div>

  <p class="style4">&nbsp;</p>

   <div class="menu-item3"> <p class="style4">CONTACT NINA</p>
<ul>
  <li>
If you wish to contact Nina, please email her at contact@Ninaschofield.com</li></ul></div>

    <p class="style4">&nbsp;</p>

    <div class="menu-item4"> <p class="style4">VISIT THE BLOG</p>
<ul><li>
You can see what Nina is up to on her blog here</li></ul></div>

    <p class="style4">&nbsp;</p>

 <div class="menu-item2"> <p class="style6">NEW SINGLE: COLOURS OF THE WORLD</p>
<ul><li>
New single out now, listen <a href="http://soundcloud.com" target="new" class="white"><font color="#99CCFF" face="Quicksand">here</font></a>, or thorugh the soundcloud player below</li></ul></div></div>

</nav>

  <img alt="full screen background image" src="images/bground.jpg" id="full-screen-background-image" />  

  <div id="wrapper">

</div> <div id="credits">©2012 Nina Schofield. Design by <a href="http://alex-humphries.com" target="new"><font color="#FFFFFF" size="+2">Alex Humphries</font></a></div>
</body>
</html> 
```

这是CSS：

```
@charset "UTF-8";

@font-face {
    font-family: 'QuicksandLight';
    src: url('Quicksand-fontfacekit/Quicksand_Light-webfont.eot');
    src: url('Quicksand-fontfacekit/Quicksand_Light-webfont.eot?#iefix') format('embedded-opentype'),
         url('Quicksand-fontfacekit/Quicksand-fontfacekitQuicksand_Light-webfont.woff') format('woff'),
         url('Quicksand-fontfacekit/Quicksand_Light-webfont.ttf') format('truetype'),
         url('Quicksand-fontfacekit/Quicksand_Light-webfont.svg#QuicksandLight') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'QuicksandBook';
    src: url('Quicksand-fontfacekit/Quicksand_Book-webfont.eot');
    src: url('Quicksand-fontfacekit/Quicksand_Book-webfont.eot?#iefix') format('embedded-opentype'),
         url('Quicksand-fontfacekit/Quicksand_Book-webfont.woff') format('woff'),
         url('Quicksand-fontfacekit/Quicksand_Book-webfont.ttf') format('truetype'),
         url('Quicksand-fontfacekit/Quicksand_Book-webfont.svg#QuicksandBook') format('svg');
    font-weight: normal;
    font-style: normal;

}

@font-face {
    font-family: 'QuicksandBold';
    src: url('Quicksand-fontfacekit/Quicksand_Bold-webfont.eot');
    src: url('Quicksand-fontfacekit/Quicksand_Bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('Quicksand-fontfacekit/Quicksand_Bold-webfont.woff') format('woff'),
         url('Quicksand-fontfacekit/Quicksand_Bold-webfont.ttf') format('truetype'),
         url('Quicksand-fontfacekit/Quicksand_Bold-webfont.svg#QuicksandBold') format('svg');
    font-weight: normal;
    font-style: normal;

}

html, body {
  height: 80%;
  width: 100%;
  padding: 0;
  margin: 0;

}
#nina {
    background-image: url(images/nina.png);
    height: 53px;
    width: 418px;
    position: absolute;
    top: 40px;
    right: 50px;

}
#social {

    height: 51px;
    width: 237px;
    position: absolute;
    top: 40px;
    right: 500px;
}

#video {
    height: 241px;
    width: 420px;
    position: absolute;
    top: 130px;
    right: 50px;

}
#text {
    font-family: 'QuicksandBook', serif;
    font-weight:400;
    font-size: 1em;
    height: 240px;
    padding-right:5px;
    width: 25%;
    color: #FFF;
    position: absolute;
    top: 130px;
    right: 490px;
    overflow:scroll;
    overflow-x: hidden;
    z-index:4;
    background-color:rgba(0,0,0,0.5);
    border-radius:5px;

}

::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(4,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(4,0,0,0.5); 
    background: -webkit-gradient(linear, left top, left bottom, from(#FFF), to(#9C6CD7));
}   

#scloud {

    position:absolute;
    left:10px;
    bottom:50px;
    width:50%;
    font-family: 'QuicksandLight', serif;
    font-size: 1.9em;
    color:#FFF;
    text-align:left;

}
#mailing {
    width: 70%;
    height:50px;
    position:absolute;
    right:42px;
    bottom:35%;
    text-align:right;
    font-family: 'QuicksandLight', serif;
    font-size: 0.9em;
    font-weight:200;
}

.menu-item ul {

  height: 0px;
  list-style-type: none;
  overflow: hidden;
  padding: 0px;

  /*Animation*/
  -webkit-transition: height 1s ease;
     -moz-transition: height 1s ease;
       -o-transition: height 1s ease;
      -ms-transition: height 1s ease;
          transition: height 1s ease;
}

.menu-item:hover ul {
  height: 93px;
}

.menu-item2 ul {

  height: 0px;
  list-style-type: none;
  overflow: hidden;
  padding: 0px;

  /*Animation*/
  -webkit-transition: height 1s ease;
     -moz-transition: height 1s ease;
       -o-transition: height 1s ease;
      -ms-transition: height 1s ease;
          transition: height 1s ease;
}

.menu-item2:hover ul {
  height: 40px;
}

.menu-item3 ul {

  height: 0px;
  list-style-type: none;
  overflow: hidden;
  padding: 0px;

  /*Animation*/
  -webkit-transition: height 1s ease;
     -moz-transition: height 1s ease;
       -o-transition: height 1s ease;
      -ms-transition: height 1s ease;
          transition: height 1s ease;
}

.menu-item3:hover ul {
  height: 40px;
}

.menu-item4 ul {

  height: 0px;
  list-style-type: none;
  overflow: hidden;
  padding: 0px;

  /*Animation*/
  -webkit-transition: height 1s ease;
     -moz-transition: height 1s ease;
       -o-transition: height 1s ease;
      -ms-transition: height 1s ease;
          transition: height 1s ease;
}

.menu-item4:hover ul {
  height: 40px;
}

#credits {
    height:auto;
    width:auto;
    position:absolute;
    left:5px;
    bottom:35px;
    font-size:0.7em;
    color:#FFF;
    font-family:'QuicksandLight', serif;
}

#full-screen-background-image {
  z-index: -999;
  min-height: 100%;
  min-width: 400px;
  width: 100%;
  height: auto;
  position: fixed;
  background-attachment:fixed;
  top: 0;
  left: 0;
}

#wrapper {
  position: relative;
  width: 800px;
  min-height: 400px;
  margin: 100px auto;
  color: #333;
}

.classname {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
    -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
    box-shadow:inset 0px 1px 0px 0px #ffffff;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ededed), color-stop(1, #dfdfdf) );

    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ededed', endColorstr='#dfdfdf');
    background-color:#ededed;
    -moz-border-radius:2px;
    -webkit-border-radius:2px;
    border-radius:2px;
    border:1px solid #dcdcdc;
    display:inline-block;
    color:#777777;

    padding:2px 20px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ffffff;
}.classname:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #dfdfdf), color-stop(1, #ededed) );
    background:-moz-linear-gradient( center top, #dfdfdf 5%, #ededed 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#dfdfdf', endColorstr='#ededed');
    background-color:#dfdfdf;
}.classname:active {
    position:relative;
    top:1px;
}
.classname:white {
    color:#FFF
}

#iplayer {
    position:absolute;
    bottom:0px;
    width:100%;
}

element.style {
  visibility:visible;
}
#stratus iframe {
  visibility:hidden;
}
stratus.css (line 3)
#stratus, #stratus iframe {
  height:32px;
  width:100%;
}
stratus.css (line 2)
::selection, *::-moz-selection, *::-webkit-selection {
  background-color:#FF6600;
  background-position:initial initial;
  background-repeat:initial initial;
  color:#FFFFFF;
}
application.css
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
  border:0;
  font-family:'QuicksandLight';
  font-size:100%;
  font-style:inherit;
  font-weight:inherit;
  margin:0;
  outline:0;
  padding:0;
  vertical-align:baseline;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:00:43.803

这是来自[jQuery API](http://api.jquery.com/toggle/)的示例：

示例：切换所有段落。

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button>Toggle</button>
<p>Hello</p>
<p style="display: none">Good Bye</p>
<script>

$("button").click(function () {
$("p").toggle();
});
</script>

</body>
</html> 
```

调整到您的代码应该是这样的：

```
$("#join").click(function () {
   $("#form").toggle();
}); 
```

而您的链接应该有 id`join`和注册表单 id`form`

如果你想要一个带有滑动动作的动画切换，你可以使用[slideToggle()](http://api.jquery.com/slideToggle/)代替：

```
$("#join").click(function () {
   $("#form").slideToggle("slow");
}); 
```

# apache2 - Apache 2 的 mod_proxy 会在长轮询时等待并占用一个 worker 吗？

> ID：14157515
> 
> 赞同：3
> 
> 时间：2013-01-04T12:50:54.703
> 
> 标签：apache2, comet, long-polling, mod-proxy

或者：如何获得良好的 cgi + 长轮询设置？

我们有一个在 Apache 2 下运行的 (mod_perl) Web 应用程序。保持现有代码不变，我们现在还想做一些长轮询，但是我们会为每个正在进行的长轮询请求占用一个工作人员，这不会'不为我们工作。

我已经知道如何编写一个可以同时处理多个请求的应用程序来处理长轮询/彗星请求，但重要的是我们只有一个*对*外界开放的 IP 端口。

使用 mod-proxy 输入反向代理。我已经看到有关[mod-proxy 是否等待/阻止结果返回](https://stackoverflow.com/a/1141613/345716)、[不等待/阻止](https://stackoverflow.com/a/5781702/345716)或是否[取决于 "Transfer-Encoding: Chunked" 的相互矛盾的](http://www.java.net/node/678639#comment-722569)信息。这是真的，“传输编码”与什么有什么关系？

我还读到 nginx[在 reverse proxy 上比 Apache2 好](https://serverfault.com/questions/143238/nginx-vs-apache-as-reverse-proxy-which-one-to-choose)。我可以将 nginx 放在 apache 前面，但单独使用 Apache2 会更简单。我还阅读了有关文件下载/上传、错误页面、日志记录可能存在问题的报告。这里有什么陷阱吗？

假设我们处理彗星请求的服务器正在监听 localhost:8080。

那么我是否能够仅使用 Apache + mod_proxy 创建具有许多长轮询客户端的可扩展设置？在 Apache 和我们的彗星服务器前面使用 nginx？

这类似于[Understanding mod_proxy and Apache 2 for writing a comet-server](https://stackoverflow.com/questions/1092427/understanding-mod-proxy-and-apache-2-for-writing-a-comet-server)，但不是完全相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T14:01:05.540

Apache Httpd 使用每个连接的线程模型，并且在长轮询时会很快耗尽线程。我在生产中使用 httpd 作为反向代理时遇到了这个问题，而且似乎没有办法使用 httpd 进行长轮询。

考虑使用 nginx（用于非 java 服务器）或 jetty（作为 j2ee servlet 容器），它们都使用每个线程模型的多个请求，并且不受此问题的影响。

# ios - 如何模拟全新安装？

> ID：14157516
> 
> 赞同：0
> 
> 时间：2013-01-04T12:50:56.143
> 
> 标签：ios, xcode

我的应用程序在从 App Store 下载时崩溃，但在从 Xcode 执行时从未崩溃。一些背景知识......我正在开发一个访问用户联系人的应用程序。该应用程序从我的服务器下载电话号码并检查该联系人的姓名。我已经执行了应用程序十亿次并且它从未崩溃，但是我将它上传到苹果商店并且它崩溃了，我查看了崩溃日志，它在检查联系人姓名时崩溃了，在方法上`ABCMultiValueCopyValueAtIndex`，我不能在 Xcode 上复制它，我尝试卸载该应用程序，但它永远不会崩溃！这是相同的代码，毫无疑问。

所以问题是，当应用程序“新”安装在手机中时，情况会有所不同，但我无法复制那个“新”状态。

我怎么能那样做？它从不问我是否让应用程序访问我的联系人......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:57:59.103

唯一安全的方法 = 将您的设备重置为出厂设置。

但是，通常卸载应用程序并重新启动设备就足够了。在谈到推送通知时，卸载后需要 3 天才能将其删除。重置钥匙串可能很棘手，最好从应用程序内部完成。

另请注意，您通常可以通过更改保存数据的文件/钥匙串条目（等）的名称来模拟相同的行为，因此重新启动应用程序时不会加载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:01:02.390

如果您使用钥匙串存储任何内容，则删除应用程序不会清除这些条目。如果您的 Bundle Id 没有任何关联，即推送通知，您可以将 Bundle Id 更改为其他内容，以将其作为新应用程序运行

显然，一旦解决了问题，您就需要将其改回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:53:58.890

> 如何模拟全新安装？

为此，您只需从设备中删除您的应用程序，然后再次运行它。它将“全新”安装。另外，不要忘记清理您的项目，以便从头开始构建它。

在任何情况下，与您正在测试的版本相比，您的问题更有可能来自设备上的不同 iOS 版本。如果您围绕调用提供一些代码`ABCMultiValueCopyValueAtIndex`，这将有助于理解事情。

# c# - 发生碰撞时如何激活此代码？

> ID：14157519
> 
> 赞同：2
> 
> 时间：2013-01-04T12:50:58.070
> 
> 标签：c#, unity3d

此代码旨在触发碰撞：

```
public class Collision : MonoBehaviour {

  public CustomClass myObject;

  void onCollisionEnter(Collision crash){
    myObject.Slowdown();
  }
  void Start () {}
  void Update () {}
} 
```

我已将它附加到将与我的主要对象 (myObject) 发生碰撞的对象 (randomObject) 上，但它不起作用。

谁能告诉我我做错了什么？

编辑：它们都是刚体并且肯定会发生碰撞：如果 randomObject 落在 myObject 上，它会停止移动并躺在上面，但是当 myObject 移动时它会继续下降。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:01:18.767

您的类和作为参数的 UnityEngine 类[`OnCollisionEnter`](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnCollisionEnter.html)都被命名为`Collision`. 如果您更改类的名称以减少混淆（我的建议），或者将方法声明更改为以下内容，它应该可以工作：

```
void OnCollisionEnter(UnityEngine.Collision crash){ 
```

# scala - Rhino，使用 scriptableObject 包装器返回 Native DateTime

> ID：14157521
> 
> 赞同：2
> 
> 时间：2013-01-04T12:51:01.130
> 
> 标签：scala, rhino

我已经设法从一个可编写脚本的对象包装器返回一个 Native DateTime，但是它涉及到具有对范围和上下文的引用的包装器。有没有更好的方法来做到这一点，也许不需要通过这些参考？（这是在 Scala 中使用 JodaTime 库和 Sugar JS 实现的）

测试评估

```
import org.joda.time.DateTime
import org.mozilla.javascript._

object RhinoTest {

  val sugarScript = {
    val c= Context.enter
    val scope = c.initStandardObjects()
    c.compileString(FileUtil.readAllText("sugar-1.3.7.min.js"), "sugar", 1, null)
  }

  def main(args:Array[String]): Unit = {
    val cx = Context.enter
    val scope = cx.initStandardObjects()
    sugarScript.exec(c1, scope)

    val testDate = new DateTime(2010,10,10, 0, 0)
    val wrapper = Wrapper(Map("date" -> testDate),cx, scope)
    ScriptableObject.putProperty(scope, "map", wrapper)
    println(c1.evaluateString(scope,"Date.create('Tuesday').isBefore(map.date)", "Source", 1, null))
  }
} 
```

和包装类

```
case class Wrapper(map:Map[String,Any], cx:Context, scope:Scriptable) extends ScriptableObject {

  def getClassName() = "Wrapper"

  override def get(name:String, start:Scriptable):Object =
    (map.getOrElse(name, null) match {
      case d:DateTime => {
        val a = List[AnyRef](d.getMillis.asInstanceOf[java.lang.Long]).toArray
        cx.newObject(scope, "Date", a)
      }
      case a => a
    }).asInstanceOf[AnyRef]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-26T22:58:41.063

没有办法`Date`以原子方式转换`NativeDate`。您必须自己执行转换。

[在此处](http://dev-tech-js-engine.mozilla.narkive.com/YNCRCrSK/best-way-to-create-native-javascript-date-from-java-with-rhino)查看类似问题的答案

> 默认情况下，Rhino 不会将 Java Number 和 String 对象转换为相应的原始类型。相反，它将它们包装到一个特殊的脚本对象中，就像它通过 LiveConnect 将任何其他 JavaObject 暴露给脚本一样，它只将原始 Java 值转换为相应的脚本值。要覆盖它，您需要提供一个自定义 WrapHandler（即将推出的 Rhino 1.5R4 中的 WrapFactory）。
> 
> JavaScript 中的 java.util.Date 和 Date 对象的不同之处不仅在于它们的 API，还在于其内部表示。特别是，Script 中的 Date 可以保存 NaN 值，而 java.util.Date 不能。由于这些原因，最好留给应用程序来决定如何将一个转换为另一个。

要考虑的一件事是在运行脚本之前执行转换，避免任何包装器：

```
Object nativeDate = cx.newObject(scope, "Date", new Object[] {new Date().getTime()})
ScriptableObject.putProperty(scope, "date", nativeDate) 
```

# c# - 退出应用程序错误

> ID：14157522
> 
> 赞同：0
> 
> 时间：2013-01-04T12:51:04.100
> 
> 标签：c#

我在 .NET 4 上开发了一个简单的 Windows 应用程序。我想将一个参数传递给我的应用程序，如果此参数为空，则应用程序不应继续运行并退出。

我在 main 方法中添加了一个输入参数。当我在我的 Visual Studio 中调试它时它工作正常，但是当我直接执行我的应用程序时，Windows 给了我这个错误：

“应用程序已停止工作”

我该如何处理？我测试了一些代码，但它不起作用

```
 Application.ExitThread();
 Application.Exit(); 
```

这是可能的主要方法：

```
 [STAThread]
 static void Main(string[] args)
 {
     if(args.Count()==0)
      Thread.CurrentThread.Abort(); 

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.Run(new Form1());
 } 
```

我查看了 Windows 事件查看器，发现了这个错误事件

```
Application: WindowsFormsApplication1.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Threading.ThreadAbortException
Stack:
at System.Threading.Thread.AbortInternal()
at System.Threading.Thread.Abort()
at WindowsFormsApplication1.Program.Main() 
```

另一个：

```
Faulting application name: WindowsFormsApplication1.exe, version: 1.0.0.0, time 
stamp:    0x50e775e3
Faulting module name: KERNELBASE.dll, version: 6.1.7601.17514, time stamp: 0x4ce7c78c
Exception code: 0xe0434352
Fault offset: 0x000000000000a49d
Faulting process id: 0x15b4
Faulting application start time: 0x01cdeade1bdab018
Faulting application path: C:\WindowsFormsApplication1\WindowsFormsApplication1 
 \bin\Debug\WindowsFormsApplication1.exe
Faulting module path: C:\Windows\system32\KERNELBASE.dll
Report Id: 5a6d1a1f-56d1-11e2-8ffd-20cf30e7bd24 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:54:07.453

我希望您提供的代码能做到这一点。调用会在线程 ( ，这将是未被捕获的)`Thread.Abort()`上引发异常。`ThreadAbortException`

如果您只想停止不带参数的处理，只需返回：

```
[STAThread]
 static void Main(string[] args)
 {
     if(args.Length ==0) return; // Will leave and end the application

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.Run(new Form1());
 } 
```

你也可以`Count()`在数组上使用什么时候`Length`就可以了。不过小细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:55:28.510

我不明白你上面的代码的原因。

> 如果此参数为空应用程序不要继续运行并退出工作。

你可以很容易地用这种方式编码

```
 [STAThread]
 static void Main(string[] args)
 {
     if(args.Length > 0)
     {

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.Run(new Form1());
     }
 } 
```

# javascript - Javascript 保存本地数据

> ID：14157529
> 
> 赞同：2
> 
> 时间：2013-01-04T12:51:22.950
> 
> 标签：javascript, json, local

我使用 Javascript 和一个非常基本的 html 页面制作了一个本地网页游戏，所以我不需要也不想为我的游戏使用服务器！

但现在我想保存一些数据（例如记录）。所以我制作了一个我设法读取的 Json 文件，我`$.getJSON`想知道我是否可以只使用 Javascript 写入我的 json 文件？

我不想使用任何 php 脚本！

我期待着您的回复 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:54:05.517

假设您有一个名为 scores 的结构。

您可以对其进行字符串化并将其存储在[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)中：

```
function addScore(newScore) {
    scores.push(newScore);
    localStorage['scores'] = JSON.stringify(scores);
} 
```

然后在程序开始时恢复它：

```
var scores = localStorage['scores'] ? JSON.parse(localStorage['scores']) : []; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:54:03.963

使用 HTML5 [WebSQL](http://html5doctor.com/introducing-web-sql-databases/)作为 sql 数据库或 HTML5[本地存储](http://diveintohtml5.info/storage.html)作为非 sql 数据库。

# android - 如何为 google map api v2 设置默认位置和缩放级别？

> ID：14157536
> 
> 赞同：92
> 
> 时间：2013-01-04T12:52:09.517
> 
> 标签：android, google-maps, google-maps-api-3

当我的地图显示时，它总是从固定位置（非洲附近）开始。

然后，我使用以下代码将地图居中到我想要的位置。

```
mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(loc.getLatitude(), loc.getLongitude()), 14.0f)); 
```

我的问题是，我可以在地图显示之前设置默认位置和缩放级别吗？

因为我不希望我的用户在一开始就看到动画。

谢谢。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-01-04T13:39:42.280

您可以使用它直接缩放而不使用动画：

```
map.moveCamera( CameraUpdateFactory.newLatLngZoom(new LatLng(xxxx,xxxx) , 14.0f) ); 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-01-05T01:28:36.443

看看这里的文档：

[https://developers.google.com/maps/documentation/android-api/map#configure_initial_state](https://developers.google.com/maps/documentation/android-api/map#configure_initial_state)

根据您是通过 XML 还是以编程方式添加地图，执行此操作的方法略有不同。如果您使用的是 XML，则可以按如下方式进行：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:map="http://schemas.android.com/apk/res-auto"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"
  map:cameraBearing="112.5"
  map:cameraTargetLat="-33.796923"
  map:cameraTargetLng="150.922433"
  map:cameraTilt="30"
  map:cameraZoom="13"/> 
```

如果您以编程方式执行此操作，则可以执行以下操作：

```
CameraPosition cameraPosition = new CameraPosition.Builder()
    .target(new LatLng(-33, 150))
    .zoom(13)
    .build();
MapFragment.newInstance(new GoogleMapOptions()
    .camera(camera)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-10T07:24:30.583

万一你想以编程方式加载`Google Map`任何初始`Location`值，那么你可以使用这段代码，

```
FragmentManager fm = getFragmentManager(); // getChildFragmentManager inside fragments.
CameraPosition cp = new CameraPosition.Builder()
                    .target(initialLatLng) // your initial co-ordinates here. like, LatLng initialLatLng
                    .zoom(zoom_level)
                    .build();
SupportMapFragment mapFragment = SupportMapFragment.newInstance(new GoogleMapOptions().camera(cp));
fm.beginTransaction().replace(R.id.rl_map, mapFragment).commit(); 
```

添加这段代码`layout`

```
<RelativeLayout
       android:id="@+id/rl_map"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" /> 
```

这将直接加载`GoogleMap`，`Location`即initialLatLng。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-25T21:34:42.640

我创建了一个句柄`SupportMapFragment`并将其设置`visibility`为`View.INVISIBLE`using `SupportMapFragment.getView().setVisibility()`。然后，在`onLocationChanged`我的类实现的回调中，我检查 if`INVISIBLE`并设置为`VISIBLE`if true。这消除了您在加载时看到的跳跃，同时允许您动态初始化起始位置。在我的情况下，我将相机围绕用户的位置居中，因此`onLocationChanged`由于`setMyLocationEnabled(true)`.

您的要求可能会有所不同，但无论哪种方式，您只需将可见性设置为`INVISIBLE`，然后`VISIBLE`在加载适当的数据后找到一个好的设置位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-30T13:00:49.447

您可以使用静态 latlong 直接使用 CameraUpdate

```
 LatLong latlong = new LatLong(lat, long);
 CameraUpdate cameraPosition = CameraUpdateFactory.newLatLngZoom(latLong, 15);
                mGoogleMap.moveCamera(cameraPosition);
                mGoogleMap.animateCamera(cameraPosition); 
```

# api - 如何在多个（子）域之间共享身份验证？

> ID：14157537
> 
> 赞同：0
> 
> 时间：2013-01-04T12:52:12.487
> 
> 标签：api, sinatra, oauth-2.0, rack, warden

1.  未经身份验证的用户到达 www.example.com。

2.  用户登录：[https ://api.example.com/login](https://api.example.com/login)

3.  成功登录后，用户被重定向到：[https ://dashboard.example.com](https://dashboard.example.com)

4.  返回时：www.example.com - 会话被保留，用户现在可以从那里注销

Heroku 显示了一个示例，它在应用程序之间共享 cookie，如屏幕截图所示。

![Heroku 的饼干](../Images/fb8f0d5f0097e997a97133e90cf4d317.png)

此设置如何工作？如何使用 Rack 应用程序模仿此设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:53:47.380

使用 SSO/OpenID 风格的技术，例如通过表单重定向并在表单参数中来回传输身份验证质询令牌。

例如，看看 stackovervflow 和姐妹网站是如何做到的。您可以使用另一个登录，它是通过表单和重定向实现的。

对于严格的子域，您可以只使用发送到“*.domain.com”中的所有主机的单个会话 cookie

# pic18 - PIC 微型计算机 - 使用定时器 3 作为异步计数器 - 上拉

> ID：14157538
> 
> 赞同：0
> 
> 时间：2013-01-04T12:52:23.237
> 
> 标签：pic18

我正在使用 PIC18(L)F1XK22。我正在尝试使用计时器 3 作为同步计数器。

PIC 使用内部振荡器运行。

```
CONFIG  FOSC    = IRC       ; Internal oscillator 
```

这应该关闭引脚 RA5 作为外部振荡器的使用。

T1CON 中的 T1OSCEN 为 0，T3CON 中的 TMR3CS 为 1。我已设置 RA5 TRIS 位并清除 RA5 WPU 位。

我的问题是引脚 RA5 (T13CLKI) 看起来像是有源上拉或被某些东西驱动。

我在 RA5 前面有以下电阻网络。

+5---10K-----X-----24K----->RA5

X 点由霍尔效应传感器驱动。当 X 为 0 伏时，RA5 为 2.2 伏。将 24K 电阻减小到 10K 会将 X 减小到 1.1 伏。在计数器工作之前，我必须将电阻减小到大约 4K。

这是我用来设置计时器的代码...

```
#define TM3CK_TRIS    TRISA,TRISA5,A  
#define TM3CK_WPU     WPUA,WPUA5,A

        BCF         PIE2,TMR3IE,A       ; Disable Timer3 interrupt

        BSF         TM3CK_TRIS          ; set RA5 (T13CKI) as input

        BCF         TM3CK_WPU           ; disable weak pull up on RA5
                                        ;  pull up and isolation resistor are external

        CLRF        TMR3H,A             ; clear Timer 3
        CLRF        TMR3L,A

        MOVLW       0x8F                ; 1xxx xxxx RD16    16 bit read/write
                                        ; x0xx xxxx         unused bit
                                        ; xx00 xxxx T3CKPS  1:1 prescale
                                        ; xxxx 1xxx T3CCP1  something to do with comparators 
                                        ; xxxx x1xx T3SYNC  Do not sychronize with external clock
                                        ; xxxx xx1x TMR3CS  external clock from RA5 (T13CKI)
                                        ; xxxx xxx1 TMR3ON  enable timer
        MOVWF       T3CON,A

        BCF         TM3CK_WPU       
        BSF         INTCON2,RABPU,A     ; disable all pull ups 
```

添加最后两行是徒劳的，试图在计时器启动后关闭所有引体向上。

非常感谢任何帮助或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:05:20.573

原来我有一个损坏的 PIC 芯片，换了一个备用芯片，问题就消失了。

# java - 正则表达式与正斜杠不匹配

> ID：14157542
> 
> 赞同：0
> 
> 时间：2013-01-04T12:52:47.330
> 
> 标签：java, regex

我正在尝试匹配以下模式：

```
LOCAL1*.CRIT /var/log/messages 
```

使用正则表达式：

```
(^LOCAL[0-9]|^[\\*])[.]([\\*]{1}|[a-zA-Z]*)\\s*(/[/a-zA-Z]) 
```

它似乎匹配除了最后的路径之外的所有内容。关于为什么会发生这种情况的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:56:48.913

看起来您在最后一组末尾缺少一个星号：

```
(^LOCAL[0-9]|^[\\*])[.]([\\*]{1}|[a-zA-Z]*)\\s*(/[/a-zA-Z]*)
                                                          ^ THIS 
```

否则，您只会匹配第一个斜杠和一个字符。

此外，您的正则表达式和`LOCAL1*`. 在目前的形式中，正则表达式不会匹配最后一个字符（the `*`）。这很容易修复，但正确的修复取决于您的要求（`*`总是存在吗？它是可选的吗？等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:14:52.183

不应该是这样吗？

`(^LOCAL[0-9]\\*|^[\\*])[.]([\\*]{1}|[a-zA-Z]*)\\s*(/[/a-zA-Z]*)`

# javascript - 如何使用javascript从另一个数组的元素创建一个数组

> ID：14157543
> 
> 赞同：1
> 
> 时间：2013-01-04T12:52:47.177
> 
> 标签：javascript, jquery

我正在尝试过滤一个数组以使用我得到的结果构建另一个数组。但是到目前为止，我一直在使用 jQuery 的函数组合还没有起作用。所以我会很感激一些关于如何解决这个问题的建议。

这是我正在尝试实现的示例：

这是我的第一个数组：

```
var data =[salt.1200, salt.1100, salt.1000, salt.0900, salt.0800, salt.0700, current.1200, current.1100, current.1000, current.0900, current.0800, current.0700]; 
```

我想从这个数组中构建两个不同的数组，一个用于盐，一个用于当前。

我尝试使用带有 jQ​​uery grep 函数的 for 循环并进行拆分，但这没有用。

```
var plotsArray = [];
        for (var i=0; i<data.length; i++){
            plotsArray = jQuery.grep(data, function(a){
                return (a.split(".") == 'salt')
            });
        }
        console.log('plotsArray: '+plotsArray); 
```

另外，我一直在尝试做的是读取字符串的第一部分直到点，然后根据该结果构建一个数组。使用例如数组过滤器，但直到点为止我还没有弄清楚如何阅读。

我将不胜感激有关如何解决此问题的任何指导。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:00:54.240

我会沿着这条线做更多的事情。

```
var plotsArray = [];
        for (var i=0; i<data.length; i++){
            if(data[i].indexOf('salt') >= 0){
            plotsArray.push(data[i]);           
        }
        console.log('plotsArray: '+plotsArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:08:36.003

使用你的代码我会做：

```
var plotsArray = [];

plotsArray.push($.grep(data, function(n,i){
   return n.split(".")[0] !== "salt";
})); 
```

请确保数据数组包含字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T13:03:48.040

在这里做出改变——

```
return (a.split(".")[0] == 'salt') 
```

并且您的代码将起作用。工作小提琴 - [http://jsfiddle.net/Lh8Pt/](http://jsfiddle.net/Lh8Pt/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T13:04:55.663

我认为您的测试应该是：

```
return a.split(".")[0] == "salt"; 
```

或者

```
return a.indexOf("salt") == 0; 
```

后者可能会更好，因为在其中一个数组值不包含点的情况下它不会出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T13:05:05.823

```
var saltArray = [];
    var currentArray = [];
    for(var i=0;i<data.length;i++){

        if(data[i].split('.')[0]=='salt'){

            saltArray.push(data[i]);

        }else{
           currentArray.push(data[i]);
         }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T13:15:58.520

使用`filter/map`方法，您可以执行以下操作：

```
var current = [], 
    salt = data.filter(
            function(a){
              var x = a.split('.'); 
              if (/current/i.test(x[0])) { this.push(x[1]); } 
 //                                        ^ = current
              return /salt/i.test(x[0])
             }, current
 //             ^ context
           ).map(
             function(b){
               return b.split('.')[1]}
           ); 
```

[**MDN 关于 Array.filter**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T13:16:40.013

试试这个：http: [//jsfiddle.net/afEGC/](http://jsfiddle.net/afEGC/)

```
var data = ['salt.1200', 'salt.1100', 'salt.1000', 'salt.0900', 'salt.0800', 'salt.0700', 'current.1200', 'current.1100', 'current.1000', 'current.0900', 'current.0800', 'current.0700'];

var asplit = new Array();
asplit['salt'] = new Array();
asplit['current'] = new Array();

​jQuery.each(data, 
          function(index,value)
             {
                 var split_value = value.split('.');
                   asplit[split_value[0]].push(split_value[1]);                                 
             });

console.log('salt: ' + asplit['salt']);

console.log('current: ' +​​​​​​​​​​​​​​​​ asplit['current']);​​​​ 
```

# android - 滚动时更改 ExpandableList 子项的背景颜色

> ID：14157551
> 
> 赞同：0
> 
> 时间：2013-01-04T12:53:07.747
> 
> 标签：android, scroll, expandablelistview

我有一个包含 3 个项目的 ExpandableList，每个项目都有具有不同属性的不同项目，例如背景颜色、图像、...

单击它时，我想更改子项的颜色。我可以在不滚动时更改颜色，因为我在视图中保存了一个标签。但是当我滚动并单击其他孩子时出现问题。选择的最后一个孩子不会更改颜色背景。

```
expandableList.setOnClickListener(new OnChildClickListener(){
...
  View view =(View)parent.getTag();
  //Change last view colour
  view.setBackgroundResourece(R.drawable.background_noselect);
  ...
  parent.setTag(v);
} 
```

在适配器中：

```
getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent){
  ...
  if(isSelect()){
      convertView.setBackgroundResource(R.drawable.background_select);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:22:24.150

我已经解决了这个问题，当我滚动 expandableList 时，我无法更改视图的颜色。我做了两件事。首先是我在活动中添加了这段代码：

```
expandableList.setOnChildClickListener(new OnChildClickListener(){
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {

            View view= null ;   
                //Select's item     
            select  = expandableListInfo[groupPosition].get(childPosition);
                            //Get the last element visible in expandableList
            int lastVis =expandableList.getLastVisiblePosition();
                            //Get the first element vsible in the expandableList
            int firstVis = listadoPedidos.getFirstVisiblePosition();
            int count = firstVis;
            while (count <= lastVis) {
                int viewPosition=count-firstVis;
                long longposition = expandableList.getExpandableListPosition(count);
                int type = ExpandableListView.getPackedPositionType(longposition);
                if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
                   int groupPositionLast = ExpandableListView.getPackedPositionGroup(longposition); 
                   //Get the object selected before
                   //This tag is save in the adapter               
                   Object lastObject = (Object)parent.getTag(R.id.tag_select);
                   view =(View) parent.getChildAt(viewPosition);
                   Object ob=view.getTag(R.id.tag_select);
                   if(ob.equals(lastObject)){
                       //Change colour view
                   }
                }
            count++;
            }
           ...
            parent.setTag(R.id.tag_select, select);

            return false;
        }

    }); 
```

第二件事是在适配器中添加 getChildView 下一个代码：

```
convertView.setTag(R.id.tag_select, object);
if(parent.getTag(R.id.tag_select).equals.object){ 
 //// TODO 
} 
```

# jquery - jQuery Mobile 在链接到外部 html 页面时使用过渡。过渡不起作用

> ID：14157552
> 
> 赞同：5
> 
> 时间：2013-01-04T12:53:09.420
> 
> 标签：jquery, html, css, jquery-mobile, mobile

我正在使用 jQuery Mobile，并且对于每个页面，我都链接到单独的 html 文件。由于这样做，我的转换在更改页面时都不起作用，例如翻转不起作用：-

```
<a href="link-here.html" rel="external" class="sb small Grid ui-link" data-transition="flip"></a> 
```

当它们都在单独的 html 文件中时，如何让我的转换在页面之间工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:27:52.147

您的问题是***rel="external"***，它导致整个页面加载而没有过渡效果。如果您没有打开域外的页面，则不应使用它。***如果您使用data-ajax="false"***关闭 ajax，也会发生同样的事情。

> 指向其他域或具有 rel="external"、data-ajax="false" 或 target 属性的链接将不会被 Ajax 加载。相反，这些链接将导致整个页面刷新而没有动画过渡。两个属性（rel="external" 和 data-ajax="false"）具有相同的效果，但语义不同：链接到另一个站点或域时应使用 rel="external"，而 data-ajax=" false" 对于简单地选择域中的页面不通过 Ajax 加载很有用。由于安全限制，框架总是选择链接到外部域的 Ajax 行为。

更多相关信息可以在这里找到：http: [//jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:01:54.283

我认为这可以解决您的问题：

```
<a href="link-here.html" data-rel="dialog" class="sb small Grid ui-link" data-transition="flip"></a> 
```

# time - 如何合并 Teradata 中的时间字段？

> ID：14157554
> 
> 赞同：1
> 
> 时间：2013-01-04T12:53:13.883
> 
> 标签：time, teradata, coalesce

我正在尝试运行以下代码：

```
SELECT a.job_name
     , coalesce(b.target_time, cast('08:00:00' as time(2))) sla_time

FROM ud812.slarpt_job_level_info a
left outer join ( 
   select job_name, target_time
   from ud812.slarpt_job_target_times 
   qualify row_number() over (partition by job_name 
                              order by established_date desc) = 1
   ) b
on (a.job_name = b.job_name)
where  a.display_on_sla_report = 'Y' 
   and a.job_type = 'LD'
   and a.decom_date is null 
```

这样做时，我收到错误“选择失败 3800：THEN/ELSE 表达式中的数据类型不匹配。这与我对合并的使用有关。

当我检查我的数据类型时：从 ud812.slarpt_job_target_times 中选择 type(target_time) 合格...我得到 time(2)。我已经尝试了几件事来调整我的代码。

其中包括： 使用不同的数据类型 ex。时间（6）。我什至尝试了以下方法，但 sla_time 的类型返回为整数。

```
SELECT a.job_name
      , cast(coalesce(b.target_time, '08:00:00') as time(2)) sla_time

FROM ud812.slarpt_job_level_info a
left outer join ( 
   select job_name, cast(target_time as char(8)) as target_time
   from ud812.slarpt_job_target_times 
   qualify row_number() over (partition by job_name 
                              order by established_date desc) = 1
   ) b
on (a.job_name = b.job_name)
where  a.display_on_sla_report = 'Y' 
   and a.job_type = 'LD'
   and a.decom_date is null 
```

最后，我试图为每个工作名称设定一个默认时间为早上 8 点。想法？

我也尝试了以下方法，但是当我键入（）该列时，它返回一个整数，而不是时间（2）。

```
SELECT a.job_name
     , cast(coalesce(b.target_time, default_time) as time(2)) sla_time
FROM ( 
   select job_name, '08:00:00' as default_time
   from ud812.slarpt_job_level_info
   where  a.display_on_sla_report = 'Y' 
     and a.job_type = 'LD'
     and a.decom_date is null
   ) a
left outer join ( 
   select job_name, target_time
   from ud812.slarpt_job_target_times 
   qualify row_number() over (partition by job_name 
                              order by established_date desc) = 1
   ) b
on (a.job_name = b.job_name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:35:49.813

在下面的测试用例中，`COALESCE()`当您使用格式`TIME '00:00:01'`作为 NULL 的替换值时。

```
CREATE VOLATILE TABLE MyTable, NO FALLBACK
( MyID SMALLINT NOT NULL,
  MyTime TIME(2)
)
PRIMARY INDEX (MyID) 
ON COMMIT PRESERVE ROWS;

INSERT INTO MyTable VALUES (1, TIME '01:23:45');
INSERT INTO MyTable VALUES (2, NULL);

SELECT *
FROM MyTable;

SELECT MyID
     , COALESCE(MyTime, TIME '23:45:01')
 FROM MyTable; 
```

# javascript - 如何使用 jquery 将字符串数据替换为另一个字符串数据？

> ID：14157558
> 
> 赞同：0
> 
> 时间：2013-01-04T12:53:19.767
> 
> 标签：javascript, jquery, replace

我想用另一个字符串数据替换字符串数据。

我试图用下面的代码来做到这一点。

```
$('#btnchkProduct').click(function () {
    var  stringfirst="hi this is first data";
    var  stringsecound="this is another data";

    var finaldata = string.replace(stringfirst , stringsecound );
    alert(finaldata );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:55:52.033

Jquery 只是 javascript 的包装器。javascript核心中有字符串替换函数，你可以直接使用

```
var str="Visit Microsoft!";
var n=str.replace("Microsoft","W3Schools"); 
```

参考[参考](http://www.w3schools.com/jsref/jsref_replace.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:58:04.157

```
$('#btnchkProduct').click(function() {
  var stringfirst = "hi this is first data";
  var stringsecound = "this is another data";

  var finaldata = stringfirst.replace(stringfirst , stringsecound );
  alert(finaldata);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:12:10.090

你可以简单地使用

```
$('#btnchkProduct').click(function () {
    var  stringfirst="hi this is first data";
    var  stringsecound="this is another data";

    var finaldata = stringsecound.replace(stringsecound, stringfirst);
    alert(finaldata );
}); 
```

第二个字符串将被第一个字符串替换

# mysql - 如何在大型 sql.txt 文件中用 (|) 替换逗号分隔符

> ID：14157560
> 
> 赞同：0
> 
> 时间：2013-01-04T12:53:25.847
> 
> 标签：mysql, import, delimiter

我必须将大约 2500 万条记录从 2 GB 的 txt 文件导入 MySQL 数据库。

记录使用逗号（，）分隔符，问题是一列“地址”在数据中有逗号。IE

```
"John smith", "Engineer", "Street a, city b, 0090"
"Joel Kate" , "programmer", "USA" 
```

使用上面的示例，导入脚本将导入切割如下

```
"John smith", "Engineer", "Street a,
"Joel Kate" , "programmer", "USA" 
```

我需要有关如何用 (|) 替换真正的逗号分隔符的帮助，以便地址中的逗号保持不变。

笔记。我曾尝试使用 Java 运行脚本，但文件太大。请帮忙。我正在使用 dbForge 导入数据。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:57:46.350

你是`LOAD DATA INFILE`用来导入文件的吗？如果是这样，您可以使用

```
OPTIONALLY ENCLOSED BY '"' 
```

在进口。请注意，这是一个双引号 " 由单引号 ' 包围，因此引号中的任何内容都放在一个字段中。

所以`"Street a, city b, 0090"`都将被保存在一个领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:59:21.233

您可以使用 Notepad++ 或类似的查找和替换，搜索“，”并替换为 (|)

似乎您要替换的所有逗号前面都有一个撇号和一个空格，后面是一个撇号。

让我知道这是否适合您，或者我完全错过了重点。

# c# - MVCMailer smtp mailsettings 以编程方式设置配置设置

> ID：14157561
> 
> 赞同：5
> 
> 时间：2013-01-04T12:53:27.363
> 
> 标签：c#, asp.net, asp.net-mvc-3, smtpclient, mvcmailer

MVCMailer 使用 web.config 文件中的 smtp 设置，如下所示：

```
<system.net>
<mailSettings>
      <smtp from="some-email@gmail.com">
        <network enableSsl="true" host="smtp.gmail.com" port="587" userName="some-email@gmail.com" password="valid-password" />
      </smtp>
</mailSettings>
</system.net> 
```

控制器：

```
public virtual MvcMailMessage Welcome()
{
    //ViewBag.Data = someObject;
    return Populate(x => {
              x.ViewName = "Welcome";
              x.To.Add("some-email@example.com");
              x.Subject = "Welcome";
        });
} 
```

无论如何要在代码中设置 SMTP 设置吗？我想避免将密码保存在 web.config 文件中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T13:15:23.290

`SmtpClientWrapper`使用具有您需要的属性的 SmtpClient调用。

```
SmtpClient client = new SmtpClient("mail.example.com", 995);
SmtpClientWrapper wrapper = new SmtpClientWrapper(client); 
```

# r - 将类从“字符”更改为支持 r 中的 rowSums 的其他类型

> ID：14157562
> 
> 赞同：4
> 
> 时间：2013-01-04T12:53:30.497
> 
> 标签：r

我有一个矩阵：字符类条目。

```
sapply(mat,class)
"character" 
```

我想将 rowSums 应用于此矩阵，但出现错误：

```
Error in rowSums(mat) : 'x' must be numeric 
```

如果我做 as.numeric(mat) 那么我得到一个向量。

有没有办法从字符更改为数字但保持矩阵结构？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T12:59:58.117

您可以更改矩阵的存储模式：

```
mmat <- matrix(c("2","3","7","0"), ncol = 2)
storage.mode(mmat) <- "double"  # changed from "numeric"
rowSums(mmat)
# [1] 9 3 
```

# c# - 如何将文本添加到 webBrowser1 URL C# 的末尾

> ID：14157567
> 
> 赞同：0
> 
> 时间：2013-01-04T12:53:50.387
> 
> 标签：c#, javascript, url

我正在尝试禁用 javascript，但我发现可以添加到 URL 以防止它发生。

```
?no-script=true 
```

如何将其添加到加载的每个 URL 的末尾`webBrowser1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:57:21.187

我相信您可以简单地处理“导航”事件并适当地重定向浏览器。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx)

> 在 WebBrowser 控件导航到新文档之前发生。

如果 URL 不以 ?no-script=true' 结尾，则重定向它。

值得注意的是，'?no-script=true' 并不是你真正可以依赖的东西。许多（大多数）网站不会满足您的要求，您仍然会得到 javascript。

# jquery - 块上的 jQuery 弹出工具提示 ID

> ID：14157576
> 
> 赞同：0
> 
> 时间：2013-01-04T12:54:10.123
> 
> 标签：jquery, hover, tooltip

我使用了现成的[jQuery Script for Tooltip](http://www.htmldrive.net/items/show/681/jQuery-and-CSS3-Simple-Tooltip.html)（我不是 Javascript Coder）在我的网站上实现。

问题是代码只允许工具提示悬停如果文本在`<a></a>`. 把它拿出来不会显示效果。`<a></a>`与 DIV之间进行格式化并不是最好的方法。我如何运行效果也可以在外部运行的 Javascript`<a></a>`

Javascript

```
<script type="text/javascript">
$(document).ready(function() {
    //Tooltips
    $(".tip_trigger").hover(function(){
        tip = $(this).find('.tip');
        tip.show(); //Show tooltip
    }, function() {
        tip.hide(); //Hide tooltip        
    }).mousemove(function(e) {
        var mousex = e.pageX + 20; //Get X coodrinates
        var mousey = e.pageY + 20; //Get Y coordinates
        var tipWidth = tip.width(); //Find width of tooltip
        var tipHeight = tip.height(); //Find height of tooltip

        //Distance of element from the right edge of viewport
        var tipVisX = $(window).width() - (mousex + tipWidth);
        //Distance of element from the bottom of viewport
        var tipVisY = $(window).height() - (mousey + tipHeight);

        if ( tipVisX < 20 ) { //If tooltip exceeds the X coordinate of viewport
            mousex = e.pageX - tipWidth - 20;
        } if ( tipVisY < 20 ) { //If tooltip exceeds the Y coordinate of viewport
            mousey = e.pageY - tipHeight - 20;
        } 
        tip.css({  top: mousey, left: mousex });
    });
});

</script> 
```

CSS

```
.tip {
    color: #fff;
    background:#1d1d1d;
    display:none; /*--Hides by default--*/
    padding:10px;
    position:absolute;    z-index:1000;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
} 
```

的HTML

```
<p>Text<a class="tip_trigger" href="#">MouseOver<span class="tip">
<img src="image.jpg" />Show as MouseOver Effect</span></a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:04:40.630

例如，您可以使用`<span/>`.

从技术上讲，只要您将类名放在`tip_trigger`那里，它就会接受任何类型的元素。

```
<p>
    Text
    <span class="tip_trigger">MouseOver
        <span class="tip"><img src="image.jpg" />Show as MouseOver Effect</span>
    </span>
</p>​ 
```

[**看这里。**](http://jsfiddle.net/GZ5Pw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:07:26.383

我只是快速查看了您的代码，一切似乎都很好。告诉您工具提示是什么或不是什么的不是锚标记，而是以下结构：

类='tip_trigger' > 类='tip'。

您可能在 .tip 类中有一个 div .tip_trigger 和其他标签，它应该可以工作。

因此，以您为例，问题在于您在“a”标签内使用 .tip_trigger，但您可以在“p”标签内使用它，如下所示：

```
<p class="tip_trigger"><a href="#">MouseOver<span class="tip">
<img src="image.jpg" />Show as MouseOver Effect</span>Text</a></p> 
```

它应该可以正常工作。

# batch-file - 将解析的主机名输出到文件的脚本

> ID：14157580
> 
> 赞同：-3
> 
> 时间：2013-01-04T12:54:22.553
> 
> 标签：batch-file, ip, hostname, resolve

我正在寻找一个脚本（batch、perl、vb 或其他），它将解析我将提供给它的主机名到 IPS 并与它们一起输出一个文件（可选），就像 Windows 主机文件一样。

例如，当我给它时：www.stackoverflow.com

它将输出到文件（甚至在屏幕中，带有回声）这一行：

69.59.197.21 www.stackoverflow.com

提前致谢！新年快乐！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:43:34.563

干得好

```
@echo off
setlocal enabledelayedexpansion
set /p hostname=Enter hostname: 
for /f "tokens=3" %%a in ('ping %hostname% ^| find "Pinging"') do (
set ip=%%a
set ip=!ip:[=!
set ip=!ip:]=!
echo !ip! %hostname%
)
pause >nul 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:09:06.570

你可以在linux中试试这个

```
**print address and hostname**

    [user@server scripts]$ host www.stackoverflow.com | grep "has add" | awk '{print $1}{print $4}' 
    stackoverflow.com
    69.59.197.21

**Print address only**

    [user@server scripts]$ host www.stackoverflow.com | grep "has add" | awk '{print $4}' 
    69.59.197.21

**Append To File**

    [user@server scripts]$ host www.stackoverflow.com | grep "has add" | awk '{print $4}' >> hosts.list 
```

希望这会有所帮助（在 *nix 中）

# iphone - iOS - 强制键盘以横向显示

> ID：14157582
> 
> 赞同：2
> 
> 时间：2013-01-04T12:54:28.137
> 
> 标签：iphone, objective-c, ios, ipad, cocoa-touch

我的问题是我在横向模式下通过 CGAffineTransform 创建了视图。在我的应用程序中，我以纵向模式显示了每个视图。但正如我告诉你的那样，我已经通过 CGAffineTransform 在横向模式下创建了一个视图，因为我必须在横向模式下在该视图上显示一个电子表格。但我这样做是合乎逻辑的，键盘没有以横向模式显示。请给我代码以在横向模式下显示键盘。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T09:41:41.683

将此设置为有问题的视图：

```
(BOOL)shouldAutorotate
{
    return NO;
} 
```

这在 viewDidLoad

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft]; 
```

我知道这听起来很奇怪，但它确实有效。

# css - Twitter Bootstrap + Less：设置

> ID：14157585
> 
> 赞同：1
> 
> 时间：2013-01-04T12:54:40.057
> 
> 标签：css, twitter, twitter-bootstrap, less, font-awesome

如何使用 Less 设置 Twitter Bootstrap？我从[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)下载 了 Twitter Bootstrap 库，在 CSS 文件夹中有 4 个文件：

```
bootstrap.css
bootstrap.min.css
bootstrap-responsive.css
bootstrap-responsive.min.css 
```

然后我决定使用LESS。所以我去了 GitHub - [https://github.com/twbs/bootstrap](https://github.com/twbs/bootstrap)根目录中的文件夹名为`less`. 此文件夹包含 42 个 *.less 文件。我打开了`bootstrap.less`文件，其中包含了所有 *.less 文件，但我没有看到“响应式”less 文件。

第二件事 - 我必须下载所有这 42 个文件并将它们包含到一个文件中（bootstrap.less）？

没有更好的方法来安装**Twitter Bootstrap + Less (+ Font-Awesome)** 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:57:45.867

当我们想使用 less / bootstrap / 样板文件时，我们有一个启动 zip

您可以从 -> [http://rhino.welcomweb.se/html-less-bootstrap.zip下载它](http://rhino.welcomweb.se/html-less-bootstrap.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:51:02.217

这里还有一个 CDN 版本，带有 Twitter Bootstrap + Font Awesome： [http ://www.bootstrapcdn.com/?v=01042013155511#tab_fontawesome](http://www.bootstrapcdn.com/?v=01042013155511#tab_fontawesome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:21:43.810

**回答第二个问题**
有一个`less/responsive.less`包含响应代码的文件。

**要回答第一个问题**
，我认为在应用程序中包含较少的文件不是一个好主意，因为较少的文件解析会消耗客户端资源，并且会影响应用程序的性能。

如果您想自定义构建引导程序，可以使用引导程序站点中的[自定义](http://twitter.github.com/bootstrap/customize.html)选项。

如果您想始终进行更多自定义构建，您可以克隆 git 存储库并使用像[Crunch 这样的更少工具来构建它！](http://crunchapp.net/)如[这里](http://bootstrap.lesscss.ru/less.html)给出的。

# php - PHP 类型提示特征

> ID：14157586
> 
> 赞同：36
> 
> 时间：2013-01-04T12:54:42.880
> 
> 标签：php, traits, type-hinting

我有一个特质。为了创意起见，我们称这个 trait Trait：

```
trait Trait{    
    static function treat($instance){    
        // treat that trait instance with care
    }
} 
```

现在，我还有一个使用这个特性的类，用户。当尝试使用 User 实例调用 Treat 时，一切正常。但我想键入提示，只有使用 Trait 的类的实例才应该作为参数给出，如下所示：

```
static function treat(Trait $instance){...} 
```

遗憾的是，这导致了一个致命错误，表明该函数需要一个 Trait 实例，但给出了一个 User 实例。这种类型的类型提示非常适合继承和实现，但是我如何对特征进行类型提示呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-04T13:10:56.737

你不能像 DaveRandom 说的那样。你不应该。您可能希望在其上实现一个接口和类型提示。然后，您可以使用 trait 实现该接口。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-10-04T11:37:50.270

对于将来在这里结束的人，我想详细说明吠陀的答案。

1.  确实，您不能将特征视为 PHP 中的特征（具有讽刺意味），说您期望具有某些特征的对象只能通过接口（本质上是抽象特征的集合）实现
2.  其他语言（例如 Rust）实际上鼓励使用特征进行类型提示

综上所述; 你的想法不是一个疯狂的！实际上，将特征视为单词的常识是很有意义的，而其他语言就是这样做的。由于某种原因，PHP 似乎卡在了接口和特征之间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-12T13:06:22.923

如果您想在 trait 或使用该 trait 的类中创建函数，您可以将`self`其用作类型提示，以便您的函数看起来像这样。

```
static function treat(self $instance){...} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-30T09:07:02.987

试试这个：

```
 /**
     * @param Trait $instance
     */
    static function treat($instance){
    } 
```

这适用于 Intellij Idea，但是无论如何您的示例没有多大意义，特征不是类或接口，它只是代码的一部分，可以获取您使用它的地方，所以不要这样做，使用父类例如，使用这些特征可能是您正确的解决方案。

但是我上面写的那段代码可以工作，我得到了自动完成。

# java - JPA OneToMany - 删除最后一个子项时删除父项

> ID：14157590
> 
> 赞同：2
> 
> 时间：2013-01-04T12:55:01.993
> 
> 标签：java, hibernate, jpa

我和孩子有`@OneToMany`双向的关系。`@ManyToOne`孩子们站在主人一边。

我想根据用户命令通过父级单独删除子级，如果最后一个子级被删除，则删除父级。

**父类.java**

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "parent", cascade = CascadeType.ALL, orphanRemoval = true)
private List<Child> children;
... 
```

**子.java**

```
@ManyToOne(fetch = FetchType.EAGER)
private Parent parent;
...

void remove(Parent parent, Child child) {
    for(Child c : parent.getChildren()){
        if(c.equals(child)){
            parent.getChildren().remove(c);
            break;
        }
    }

    if(parent.getChildren().isEmpty()){
        parentService.remove(parent);    // *1
    } else {
        parentService.update(parent);    // *2
    }
} 
```

标记处的更新`*2`工作正常。但是当找到最后一条记录并且标有行的代码`*1`执行时，我得到了这个异常：

```
org.springframework.dao.InvalidDataAccessApiUsageException: Removing a detached instance com.package.etc.Parent#18374850; 

nested exception is java.lang.IllegalArgumentException: Removing a detached instance com.package.etc.Parent#18374850 at
org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:301) 
```

我试过在**remove**之前调用**update**，但得到了同样的异常。

 **有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:40:39.983

我设法解决了它。我没有注释@Transactional 方法。**

# maven - 通过单个 Maven 命令运行服务器和客户端

> ID：14157593
> 
> 赞同：0
> 
> 时间：2013-01-04T12:55:08.653
> 
> 标签：maven

我必须通过单个 Maven 命令运行服务器应用程序（在后台）和客户端应用程序。可能吗？

# django - django 在输入时搜索多个表

> ID：14157599
> 
> 赞同：2
> 
> 时间：2013-01-04T12:55:31.417
> 
> 标签：django, search, while-loop, typing, typeahead

我希望能够在输入字段中输入我的搜索查询，并在输入时获得一个下拉菜单，其中包含我的 Django 数据库中匹配对象的建议。

搜索应该只匹配一些特定的表并且只搜索特定的列，但是，返回的对象必须有整行的内容。

我目前唯一拥有的是 JQuery Chosen，它可以满足我的大部分需求。

1.  它在下拉列表中提供建议
2.  可能是搜索一个名字，然后得到一个 ID
3.  可以搜索任何数据列表

我对 Chosen 的问题是它只返回一个值，所以如果我用它从多个表中搜索 ID，它可能会返回相同的数据。

我正在考虑用 Json 和 Ajax 做一些魔术，但是，这两个是我的新朋友，所以我想知道，是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:09:42.613

简短的回答，不。

您应该像您自己建议的那样使用 Ajax 和 JSON 解决这个问题。

**提示**，术语叫做*`typeahead`*.

此外，听起来您正在尝试使用 Django ORM 实现基本搜索。尽管实践是个好​​老师，但您应该研究[django-haystack 之](http://haystacksearch.org/)类的库，可能使用易于设置的搜索引擎，例如[Whoosh](http://pypi.python.org/pypi/Whoosh/)。这将允许您设置不同的模型以便轻松搜索。

Haystack 有据可查，所以应该可以理解。您的问题相当广泛，因此我会尝试进行设置并相应地提出更详细的问题。

# alfresco - 我应该在哪里保存 Alfresco 中工作流程的元数据？

> ID：14157600
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:55:34.907
> 
> 标签：alfresco, alfresco-share

我想扩展 alfresco 将元数据添加到工作流，例如为每个工作流添加背景图像。请注意，我不想为每个实例再次输入数据，即它是工作流定义的一部分。

你建议我在哪里保存数据，我应该如何访问数据？我自己的想法是在repo数据库中创建一个新表，并将每个工作流的元数据放在那个表中，并直接在共享中访问该表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:52:55.697

似乎您想要每个工作流类型的背景图像？

我会把它放在配置中，哪种类型使用哪种背景图像。

然后，您需要在 share-webscript 中获取配置（也许修改现有的）（js 文件）。在相关的 ftl 中，您应该编写背景图像

首先，您可以只保留配置部分并将不同的背景图像硬编码到 JS 文件中

# php - 邮件未从收件箱中删除

> ID：14157602
> 
> 赞同：-2
> 
> 时间：2013-01-04T12:55:39.183
> 
> 标签：php, sql-server-2005

我尝试从收件箱中删除邮件并将其移动到垃圾文件夹，但我的代码不起作用。谁能给我一些建议。

```
 if($attachment!="")
    {            
         /*  $outputList .='' . $send. '&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp;' .$subject.'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;'.$time.'<hr/>';  */

        /* $outputList .='<table><tr><td><input type="checkbox" class="check"></td><td style="width:30%;text-align:left">' . $send. '</td><td style="width:42%; text-align:left">' .$subject. '</td><td style="width:3%">' . $attach . '</td><td style="width:30%">'.$time.'</td></tr></table>';  */

         $outputList .='<table><tr><td><input type="checkbox" class="check"></td><td style="width:30%;text-align:left">'.$sender.'</td><td style="width:45%;text-align:left">'.$subject.'</td><td style="width:3%" align="left" >' . $attach . '</td><td style="width:30%">'.$time.'</td></tr></table>';
        }
        else {
          $outputList .='<table><tr><td><input type="checkbox[]" value=" $row["topic_id"]" class="check"></td><td style="width:30%;text-align:left">'.$sender.'</td><td style="width:45%;text-align:left">' .$subject. '</td><td style="width:3%" align="left" ></td><td style="width:30%">'.$time.'</td></tr></table>';            
        }
    }

     <div class="delete">         
         <input name="del" type="button" value="delete" action=""/>
         <?php              
           include 'delete.php';

           if (isset($_POST['del']) && isset($_POST['check']))
       {               
             foreach($_POST['check'] as $del_id){
             $del_id = (int)$del_id;
             $result= odbc_exec($conn,"insert into trash (sender,cc,bcc,subject,message,attachment,filename,filesize,date) 
select sender,cc,bcc,subject,message,attachment,filename,filesize,date from inbox where ID=$del_id");

        if($result==true)
            {
              $result= odbc_exec($conn,"delete from sent where ID=$del_id"); 
               $move="message deleted";
            }else
              $move="cannot delect the mail";
            }
       }
     ?>         
     </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:13:00.060

根据您尝试从收件箱中删除邮件的标题，但是在您发布的代码中：

```
delete from sent where ID=$del_id
            ^^^^ sent != inbox 
```

您还应该添加错误处理，例如`echo odbc_errormsg();`（只是一个简单的示例），以查看数据库调用发生了什么。

# javascript - 为什么 Function.bind 快捷方式比传递参数慢？

> ID：14157610
> 
> 赞同：1
> 
> 时间：2013-01-04T12:56:23.727
> 
> 标签：javascript, performance

我目前正在写一些画布的东西，当然我使用`window.requestAnimationFrame`. 我通常有一些全局`draw`或`loop`方法来调用`draw`我要绘制的对象的适当方法，并将画布和上下文对象传递给它们。

现在我在问自己（因为我只有一个带有 draw 方法的对象）是否可以剥离该全局`draw`方法并将对象的 draw 方法直接传递给`window.requestAnimationFrame`. 当然，我必须使用`Function.bind`才能`this`正确使用 - 我还必须绑定`canvas`并`context`作为该快捷方式的参数。

想知道是否对性能有任何影响[，我在 jsperf 上编写了一个测试](http://jsperf.com/binding-vs-storing-reference)。

事实证明，捷径方法慢了大约 5-7%。

这是为什么？

# java - 在 MS ACCESS 中创建 jdbc odbc 连接而不创建 DSN

> ID：14157612
> 
> 赞同：1
> 
> 时间：2013-01-04T12:56:26.167
> 
> 标签：java, ms-access, jdbc, jdbc-odbc

我正在尝试在 java 和 ms 访问数据库之间建立连接。我想在不创建 DSN 的情况下建立连接。我正在使用以下代码，但它抛出异常“数据源名称未找到异常”

```
 try
     { 
     Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

     Connection con=DriverManager.getConnection("Jdbc:Odbc:Driver={Microsoft Access
     Driver(*.mdb)}; dbq=d:/newfolder/db11.mdb");
     Statement st=con.createStatement();
     }
     catch(Exception ex)
    {
     ex.printStackTrace();
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:12:35.410

它应该是这样的：

```
Connection con = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=/db.accdb"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T02:35:41.237

我也遇到了这个问题，并在这里和各种论坛上尝试了许多建议。最后，我从一个地方发现了一个片段，它导致成功连接，并解释了为什么其中许多帖子不起作用。请参阅[http://www.coderanch.com/t/295299/JDBC/databases/jdbc-odbc-DSN-connection-MS](http://www.coderanch.com/t/295299/JDBC/databases/jdbc-odbc-DSN-connection-MS)

问题是 odbc 末尾的冒号后必须有一个分号，如 jdbc:odbc:;Driver= 。在阅读了 JdbcOdbc 桥上的 Oracle 文档后，这是有道理的，该文档指出语法是 jdbc:odbc:dsn; attributes....... 由于我们不提供 DSN，所以我们需要以 ; 结尾 在添加属性之前。

我在下面显示了我在 Windows 7 Ultimate 32 位机器上使用不同的连接字符串运行的测试：

```
 driver= (Driver)Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
        //jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=  does lookup to ODBC.ini to find matching driver

            try {
            connstr= "jdbc:odbc:;Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" + fileURI;  //64 bit ?? (*.mdb,*.accdb)  
            conn= DriverManager.getConnection(connstr, "", ""); 
            stmt= conn.createStatement();
        }
        catch (Exception e){}
        try {
            connstr= "jdbc:odbc:;Driver={Microsoft Access Driver (*.mdb)};DBQ=" + fileURI;  //64 bit ?? (*.mdb,*.accdb)  
            conn1= DriverManager.getConnection(connstr, "", ""); 
            stmt1= conn1.createStatement();
            dbmeta1=conn1.getMetaData();
        }
        catch (Exception e){}
        try {
            connstr= "jdbc:odbc:MS Access Database;DBQ=" + fileURI;  //64 bit ?? (*.mdb,*.accdb)  
            conn2= DriverManager.getConnection(connstr, "", ""); 
            stmt2= conn2.createStatement();
            dbmeta2=conn2.getMetaData();
        }
        catch (Exception e){}
        try {
            connstr= "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=" + fileURI;  //64 bit ?? (*.mdb,*.accdb)  
            conn3= DriverManager.getConnection(connstr, "", ""); 
            stmt3= conn3.createStatement();
            dbmeta3=conn3.getMetaData();
        }
        catch (Exception e){} 
```

stmt1 和 stmt3 为空，因为连接为空。stmt 和 stmt2 工作。stmt2 使用我在 IBM Tivoli 的文档中找到的连接字符串。它之所以有效，是因为“MS Access Database”是 ODBC 注册表中的一个有效标题，作为我计算机上的用户 DSN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:03:46.150

JDBC 连接字符串以如下开头`jdbc:`：

```
jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=d:\\newfolder\\db11.mdb 
```

# c++ - 这是一个 VC11 编译错误吗？

> ID：14157614
> 
> 赞同：1
> 
> 时间：2013-01-04T12:56:30.567
> 
> 标签：c++, lambda, visual-studio-2012, visual-c++

我正在使用 vs2012(vc11) 编写一个 c++ 程序。当我尝试使用有点复杂的 lambda 表达式时。

```
 RasDial(NULL, NULL, 0, 0, &[=]()
    {
    RasDial(NULL, NULL, 0, 0, &[=](){}, 0);
    }, 0); 
```

然后编译给了我一个错误：C2101 & on constant。我改变了地方，然后是这样的代码：

```
RasDial(NULL, NULL, 0, 0, &[=](){
    auto func = [=](){};
    RasDial(NULL, NULL, 0, 0,&func, 0);
}, 0); 
```

通过比较，您可以成功编译以下表达式：

```
RasDial(NULL,NULL,0,0,&[](){},0); 
```

我推断 VC 编译不能很好地理解带有 & 的嵌套 lambda。

然后vc11就可以编译成功了。这是否意味着它是一个 vc11 编译错误？

# java - Solr 从索引中提取数据到 XML 文件

> ID：14157617
> 
> 赞同：1
> 
> 时间：2013-01-04T12:56:35.100
> 
> 标签：java, xml, csv, solr, lucene

我们有客户提供的索引文件，现在想通过删除重复的文档来重新索引它们

[Solr 重复数据删除](http://wiki.apache.org/solr/Deduplication)

为此，我必须从索引中读取数据，并且必须生成**XML**文件或**CSV**文件，然后对它们进行索引并消除重复项

（如果我错了，请纠正我，我没有找到任何其他方法来做到这一点）

我知道使用 Lucene 可以做到这一点，但我想知道如何使用 solr 来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:18:38.670

您可以通过在 Solr 查询中将`wt`参数设置为 xml 来更改导出格式。`...&wt=xml`

这会将结果导出到 xml。因此，如果您搜索 *，您将获得完整的内容 - 取决于`limit`参数。

[http://wiki.apache.org/solr/CoreQueryParameters#wt](http://wiki.apache.org/solr/CoreQueryParameters#wt)

这也适用于 csv：[http ://wiki.apache.org/solr/CSVResponseWriter](http://wiki.apache.org/solr/CSVResponseWriter)

# yii - 在 CGridView 中定义多个 CButtonColumn

> ID：14157618
> 
> 赞同：0
> 
> 时间：2013-01-04T12:56:40.687
> 
> 标签：yii, yii-components, cgridview, cbuttoncolumn

我一直在使用 Yii 的 CGridView，我想知道是否有任何方法可以分离 CButtonColumns，或者一次启动多个。这样每个 Button 都有一个带有特定标题的特定列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:25:25.117

```
array(
    'header'=>'View',    
    'class'=>'CButtonColumn',
    'template'=>'{view}'
),
array(
    'header'=>'Update',    
    'class'=>'CButtonColumn',
    'template'=>'{update}'
),
array(
    'header'=>'Delete',    
    'class'=>'CButtonColumn',
    'template'=>'{delete}'
), 
```

...如果那是你的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:26:12.963

如果我正确理解你的问题，你可以，只需添加两个数组并定义你的模板和配置如下：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'person-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'id',
        'firstName',
        'lastName',
        'language',
        'hours',
        array(
            'header'=>'View',
            'class'=>'CButtonColumn',
            'template'=>'{view}',
            'buttons'=>array(
                'view'=>
                    array(
                        'url'=>'Yii::app()->createUrl("person/view", array("id"=>$data->id))',
                    ),
            ),
        ),
        array(
            'header'=>'Update',
            'class'=>'CButtonColumn',
            'template'=>'{update}',
            'buttons'=>array(
                'update'=>
                    array(
                        'url'=>'Yii::app()->createUrl("person/update", array("id"=>$data->id))',
                    ),
            ),
        )
    ),
)); 
```

# spring - 检查 Apache Velocity 中的地图是否为空

> ID：14157623
> 
> 赞同：11
> 
> 时间：2013-01-04T12:56:50.117
> 
> 标签：spring, spring-mvc, velocity

在我的 java/spring 应用程序中，我有一个速度模板，我在其中创建了一个地图，该地图将保存也插入到模板中的值：

```
#set ($myMap = {}) 
```

我想要做的是有一个 if/else 检查地图是否为空。这似乎对我不起作用。我试过了：

```
#if ($myMap.empty)
...
#if ($myMap.size == 0) 
```

这些都不起作用。检查地图速度是否为空的正确方法是什么。我尝试搜索文档和 SO，但找不到示例。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T13:05:51.223

`isEmpty`和`size`是方法，所以它们应该像这样使用：

```
#if ($myMap.isEmpty())
...
#if ($myMap.size() == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T10:25:07.920

我在 .isEmpty() 之前添加了 .getRows() 以使其工作：

```
#if($!rows.getRows().isEmpty() ) 
```

# python - 遍历图形标签

> ID：14157624
> 
> 赞同：0
> 
> 时间：2013-01-04T12:56:51.917
> 
> 标签：python, mongodb, matplotlib

我正在绘制一个上面有几条线的图表，并希望为每条线分配一个特定的标签，该标签将显示在图例中。

这为每一行提供了相同的标签：

```
import pylab as P
connection = pymongo.Connection("mongodb://localhost", safe=True)
db = connection.stuff
data = stuff.collection

for i in data.find():
    a=[]
    for element in i["counts"]:
        a.append(element["total"])
    P.plot(a, label="first line")
    P.legend()

P.show() 
```

我有很多数据，我的文档是这样组织的：

```
{name:..., data:..., counts:[{total:...,...},{total:...,...}]} 
```

如何为该代码片段中的每一行分配不同的标签？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:01:15.763

如果你想从你的数据中获取你的属性，你可以做一些这样的事情：

```
for i in data.find():
    a=[]
    somename = i["name"][??]        #maybe you can extract your label from here ?
    for element in i["counts"]:
        a.append(element["total"])
    P.plot(a, label=somename)       # and use it here
P.legend()
P.show() 
```

此外，您应该`legend()`在所有情节完成后只调用一次。

虽然与您的问题无关，但请注意您也可以通过这种方式构建您的列表：

```
for i in data.find():
    a = [element['total'] for element in i['counts']]
    P.plot(a, label=somename)
P.legend()
P.show() 
```

# mysql - MySQL 子查询替代方案

> ID：14157625
> 
> 赞同：0
> 
> 时间：2013-01-04T12:56:52.467
> 
> 标签：mysql

我有一个包含 4 个子查询的查询。查询是这样的：

```
SELECT
  (SELECT
     COUNT(id)
   FROM timelog
   WHERE emp_id = 1
       AND am_in > GET_TIME_IN1(emp_id, DATE)) AS tardy1,
  (SELECT
     COUNT(id)
   FROM timelog
   WHERE emp_id = 1
       AND pm_in > GET_TIME_IN2(emp_id, DATE)) AS tardy2,
   (SELECT balance FROM leave_credit lc JOIN leave_type lt ON lc.leave_type_id = lt.id WHERE emp_id = 1 AND lt.active = TRUE) AS balance,
   (SELECT leave_type_id FROM leave_credit lc JOIN leave_type lt ON lc.leave_type_id = lt.id WHERE emp_id = 1 AND lt.active = TRUE) AS leave_type_id 
```

我这样做是为了让我只有 1 个从 PHP 到 SQL 服务器的查询字符串，并在一个实例中获取所有结果。我知道子查询会影响性能，但在我的情况下，有没有更好的方法来解决我的问题？

示例数据：时间日志表 ![时间记录表](../Images/8af0fd40af3f85aad011991599c5e495.png)

离开信用表

![留下信用](../Images/3bc406180f97f6bf5d617aff344e221b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:47:40.173

这是一个替代版本：

```
SELECT tardy1, tardy2, balance, leave_type_id
FROM (SELECT emp_id, SUM(case when GET_TIME_IN1(emp_id, DATE) then 1 else 0 end) as tardy1,
             SUM(case when pm_in > GET_TIME_IN2(emp_id, DATE) then 1 else 0 end) as tardy2
      FROM timelog
      WHERE emp_id = 1 
      group by emp_id
     ) tardy join
    (SELECT emp_id, balance, leave_type_id
     FROM leave_credit lc full outer JOIN
          leave_type lt
          ON lc.leave_type_id = lt.id
     WHERE emp_id = 1 AND lt.active = TRUE
    ) balance
    on tardy.emp_id = balance.emp_id
where tardy.emp_id = 1 
```

对于所有员工：

```
SELECT tardy1, tardy2, balance, leave_type_id
FROM (SELECT emp_id, SUM(case when GET_TIME_IN1(emp_id, DATE) then 1 else 0 end) as tardy1,
             SUM(case when pm_in > GET_TIME_IN2(emp_id, DATE) then 1 else 0 end) as tardy2
      FROM timelog
      group by emp_id
     ) tardy full outer join
    (SELECT emp_id, balance, leave_type_id
     FROM leave_credit lc JOIN
          leave_type lt
          ON lc.leave_type_id = lt.id
     WHERE lt.active = TRUE
    ) balance
    on tardy.emp_id = balance.emp_id 
```

如果您尝试组合这些子查询，则必须小心，因为 上有多个行`timelog`，并且员工可能在一个表中但不在另一个表中。

# javascript - jQuery 的点击事件不适用于动态生成的 li

> ID：14157626
> 
> 赞同：1
> 
> 时间：2013-01-04T12:56:58.367
> 
> 标签：javascript, jquery

有人可以看看这段[**代码**](http://ideone.com/R7jKAb)，其中每个功能都能完美运行，但只有点击事件（最后是代码）

```
 $('ul#showUsernames li').on('click', function () {
    selectedUsername = $(this).text();
    if (selectedUsername != chatUsername) {
        chatTitleName.text("Chat between " + chatUsername + " and " + selectedUsername);
    }
 }); 
```

我在这里使用过`.click`，`bind('click',function`它们也没有工作。

我在`on`这里使用是因为我通过 jQuery[动态](https://stackoverflow.com/a/6658774/1577396)`li`生成元素。

我不确定我在我的项目中使用 SignalR 是否重要。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:57:36.917

使用事件委托`on()`

```
$('#showUsernames').on('click', 'li', function () {
   ... 
```

这也适用于动态插入的列表项，并且性能更高（因为您在元素上附加了一个事件处理程序`ul`而不是*n 个*处理程序。`li`

作为旁注，只需使用`$('#showUsernames')`而不是`$('ul#showUsernames')`因为它更快（它就像一个直`getElementById`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:58:44.430

使用[on()](http://api.jquery.com/on/)

```
$('ul#showUsernames').on('click', 'li', function () { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:01:46.573

你可以使用[Jquery Live](http://api.jquery.com/live/)

```
$('li ul#showUsernames').live('click',function () { 
```

也可以在 live 上使用（感谢@Mr_Green）

```
$('ul#showUsernames').on('click', 'li', function () { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T13:01:55.563

采用`live()`

例子：

```
$(".button").live("click", function() {
}); 
```

确保也调用`die()`，如下所示：

```
$(".button").die(); 
```

die() 将阻止您的事件多次触发。如果您的内容被多次异步加载而没有同步重新加载整个页面，则会发生这种情况。这是因为旧的处理程序保留在浏览器内存中，并且它们也会被触发（简单解释）。

希望能帮助到你。

# android - 在android中使用facebook登录

> ID：14157627
> 
> 赞同：0
> 
> 时间：2013-01-04T12:57:07.603
> 
> 标签：android, facebook, authentication

我正在开发一个旨在使用 Facebook 登录的 android 应用程序。用户将使用他们的 Facebook 凭据登录该应用程序。当未安装 Facebook for android 应用程序时一切正常。但是，当设备具有 Facebook for android 应用程序时安装后，该应用程序没有超出登录界面。我该如何纠正？任何帮助将不胜感激。谢谢。下面是登录活动的代码。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.*;
import com.facebook.model.*;
import com.facebook.Session;

public class MokoActivity extends Activity implements OnClickListener{
    TextView create_account;
    EditText name;
    //private UiLifecycleHelper uiHelper;
    private boolean isResumed=false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        create_account=(TextView)findViewById(R.id.textView_createAccount);
        name=(EditText)findViewById(R.id.editText_name);
        create_account.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.textView_createAccount:
                String user_name=name.getText().toString();
                if(user_name.length()<4){
                    Toast toast=Toast.makeText(MokoActivity.this,"Invalid Name",Toast.LENGTH_LONG);
                    toast.show();
                }

                else{
            Session.openActiveSession(this, true,new Session.StatusCallback(){
                public void call(Session session,SessionState state,Exception exception){
                    if(state.isOpened()){
                        Intent intent=new Intent(MokoActivity.this,HomeActivity.class);
                        intent.putExtra("username",name.getText().toString());
                        startActivity(intent);
                    }
                }
            });
            }
            break;
        }
    }

    public void onResume(){
        Session session=Session.getActiveSession();
        if(session != null && (session.isOpened() || session.isClosed())){
            onSessionStateChange(session, session.getState(), null);
        }
        super.onResume();
         isResumed = true;
    }

    @Override
    public void onPause() {
        super.onPause();
        isResumed = false;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    private void onSessionStateChange(Session session, SessionState state, Exception exception) {
        if(isResumed){
        if (state.isOpened()) {
            Intent intent=new Intent(MokoActivity.this,HomeActivity.class);
            intent.putExtra("username",name.getText().toString());
            startActivity(intent);
        } 
        else if (state.isClosed()) {
            Toast toast=Toast.makeText(MokoActivity.this,"Logged out...",Toast.LENGTH_LONG);
            toast.show();
          }
        }
    }
    @Override
      public void onActivityResult(int requestCode, int resultCode, Intent data) {
          super.onActivityResult(requestCode, resultCode, data);
          Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:28:03.657

在您的 FACEBOOK SDK 库项目中。在**FACEBOOK.JAVA**中从 181 到 199 的行号替换为以下代码。

```
**public void authorize(Activity activity, String[] permissions,
            int activityCode, final DialogListener listener) {
       // boolean singleSignOnStarted = false;
        mAuthDialogListener = listener;
      /*  // Prefer single sign-on, where available.
        if (activityCode >= 0) {
            singleSignOnStarted = startSingleSignOn(activity, mAppId,
                    permissions, activityCode);
        }
        // Otherwise fall back to traditional dialog.
        if (!singleSignOnStarted) {
            startDialogAuth(activity, permissions);
        }*/

        startDialogAuth(activity, permissions);
    }** 
```

它只会在 api 中完美运行，不会与安装在移动设备中的 facebook 应用程序链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T05:50:32.360

如果您无法安装应用程序，那么您必须检查您的包名称，如果您的异常是错误的字符异常，如“_”或无法解析包名称，请检查异常。那么请务必更改您的包裹名称。它不能包含像 _(underscore) 这样的字符。并在 AndroidManifest.xml 中进行相同的更改。

# java - Java 标准注解

> ID：14157628
> 
> 赞同：0
> 
> 时间：2013-01-04T12:57:11.793
> 
> 标签：java, eclipse

我最近开始阅读注释。我在这里弃用了 armStrong() 方法，我需要抑制弃用警告，但无论我把它放在哪里，它都会说“不必要的@SuppressWarnings(“deprecation”)”。

谁能告诉我把它放在哪里，这样`method is deprecated`警告就不会再出现了？

```
import java.io.*;
import java.lang.annotation.*;
import java.lang.reflect.Method;

@Retention(RetentionPolicy.RUNTIME)

@interface number
{
String arm();
}

public class Ch10LU2Ex4
{  
@Deprecated
@number(arm = "Armstrong number")
public static void armStrong(int n)
 {
    int temp, x, sum = 0;
    temp = n;
    while(temp!=0)
     {
        x = temp%10;
        sum = sum+x*x*x;
        temp = temp/10;
     }
    if(sum==n)
     {
        System.out.println("It is an armstrong number");
     }
    else
    {
        System.out.println("It is not an armstrong number");
    }
 }

public static void main(String[] args) 
  {

    try
    {   
        Ch10LU2Ex4 obj = new Ch10LU2Ex4();
        obj.invokeDeprecatedMethod();
        Method method = obj.getClass().getMethod("armStrong", Integer.TYPE);
        Annotation[] annos = method.getAnnotations();
        for(int i = 0; i<annos.length; i++)
        {
            System.out.println(annos[i]);
        }
    }
    catch(Exception e)
     {
        e.printStackTrace();
     }
  } 
    @SuppressWarnings("deprecation")
    public void invokeDeprecatedMethod()
    {
        try
        {
        System.out.println("Enter a number between 100 and 999:");
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        int x = Integer.parseInt(br.readLine());
        Ch10LU2Ex4.armStrong(x);
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:07:29.540

****从另一种方法中****使用**不推荐使用的方法会导致警告。**

 **典型用法如下所示：

```
 @SuppressWarnings("deprecation")
 public void invokeDeprecatedMethod() {
     instanceofotherclass.armStrong(1);
 } 
```

在同一个类中，假定程序员知道他在做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T13:07:38.613

这是[一个特性，而不是一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=376425#c3)。您不需要*从该类本身*`@SuppressWarnings`中调用该类的已弃用方法，因为此类调用首先不会生成弃用警告。*从其他*类调用已弃用的方法将需要注释。**`@SuppressWarnings`****

# ios - 架构 i386 的未定义符号：“_OBJC_CLASS_$_ZipException”，引用自：错误

> ID：14157632
> 
> 赞同：4
> 
> 时间：2013-01-04T12:57:21.077
> 
> 标签：ios, objective-c, xcode, cocoa-touch, xcode4.5

我在我的项目中使用了一些“.o”文件，编译时显示以下错误，

```
error:linker command failed with exit code 1 (use -v to see invocation) 
```

我在下面发布了错误日志

```
Ld /Users/deepak/Library/Developer/Xcode/DerivedData/app-bnwpvhpbrfdurbdgxucyddqyfosh/Build/Products/Debug-iphonesimulator/app.app/app normal i386
    cd /Users/deepak/Workspace/iosDevelopement/PROJECTS/KML/app
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.3
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/deepak/Library/Developer/Xcode/DerivedData/app-bnwpvhpbrfdurbdgxucyddqyfosh/Build/Products/Debug-iphonesimulator -F/Users/deepak/Library/Developer/Xcode/DerivedData/app-bnwpvhpbrfdurbdgxucyddqyfosh/Build/Products/Debug-iphonesimulator -F/Users/deepak/Workspace/iosDevelopement/PROJECTS/KML/app -filelist /Users/deepak/Library/Developer/Xcode/DerivedData/app-bnwpvhpbrfdurbdgxucyddqyfosh/Build/Intermediates/app.build/Debug-iphonesimulator/app.build/Objects-normal/i386/app.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=4.3 -lstdc++ -licucore -lz -framework MapKit -framework CoreLocation -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -framework KML -o /Users/deepak/Library/Developer/Xcode/DerivedData/app-bnwpvhpbrfdurbdgxucyddqyfosh/Build/Products/Debug-iphonesimulator/app.app/app
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ZipException", referenced from:
      objc-class-ref in ZipFile.o
      objc-class-ref in ZipReadStream.o
      objc-class-ref in ZipWriteStream.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

最初，有更多错误并通过导入**libs.dylib**框架解决了它们，

但仍然存在 2 个错误。

编辑：我已经通过了流行的问题[Undefined symbols for architecture i386: _OBJC_CLASS_$_SKPSMTPMessage"，引用自：错误](https://stackoverflow.com/questions/6984368/undefined-symbols-for-architecture-i386-objc-class-skpsmtpmessage-refere)，但该解决方案对我不起作用

有谁知道我哪里出错了？我是 xcode 的问题，是否有任何缺少的库或链接失败？

提前致谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-07T07:43:45.197

错误消息说未定义的符号被`ZipFile.o`、`ZipReadStream.o`和引用`ZipWriteStream.o`。这意味着您正在尝试在应用程序中使用[Objective-Zip](https://github.com/AgileBits/objective-zip/tree/master/Objective-Zip)库。

未定义的符号是`_OBJC_CLASS_$_ZipException`. `@implemention ZipException`编译器在源文件中看到指令时会生成此符号。

Objective-Zip 库包含一个名为 的文件`ZipException.m`，其中包含该`@implementation ZipException`指令。

最可能的解释是您根本没有包含`ZipException.m`在您的目标中。检查您是否已这样做。如果您不知道如何，请查看[此答案](https://stackoverflow.com/a/14148008/77567)。

另一种可能的解释是，您`ZipException.m`可能不小心修改了文件，从而删除了`@implementation ZipException`指令或将其隐藏在编译器中。检查您是否没有修改该文件，并且它是否包含该`@implementation ZipException`指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T18:41:09.623

我提供的解决方案听起来很奇怪，我花了一段时间才真正尝试它，但它对我有用。这仅在您修复了所有框架链接问题时才有效。对我来说就是这种情况，但我仍然遇到很少的 Mach-O 错误。

我所做的是从链接的框架和库中删除所有库（在常规选项卡 iOSTarget 中），然后通过将它们从左窗格拖动到链接的框架和库空间来添加它们。

# javascript - 仅当我在对话框 jQuery 中按下调整大小角时才会出现垂直滚动条

> ID：14157642
> 
> 赞同：0
> 
> 时间：2013-01-04T12:58:07.490
> 
> 标签：javascript, jquery, dialog

我有一个 max-height=400px 的对话框，当内容高度超过 400px 时，没有出现垂直滚动条的问题，但是当我按下对话框的调整大小角并关闭它时，然后重新打开它垂直滚动条出现并且工作正常。任何建议或想法如何解决这个问题？这是 ui-dialog 和 ui-dialog-content：

```
.ui-dialog {
    max-height: 400px;
    overflow: hidden;
    padding: 0.2em;
    position: absolute;
    width: 300px;
}

.ui-dialog .ui-dialog-content {
    background: none repeat scroll 0 0 transparent;
    border: 0 none;
    overflow: auto;
    padding: 0.5em 1em;
    position: relative;
} 
```

这是我使用此对话框的代码片段：

```
<script type="text/javascript">
 function formatViewLink(cellvalue, options, rowObject) {
       return "<a onClick='openDialog("+cellvalue+")'>" + '<img src="images/view_detail.png" />' + "</a>";  
      } 

</script>
<script type="text/javascript">
function openDialog(isobolId) {
                $("#selected_structs").load("${viewUrl}?isobolId="+isobolId);
                $("#selected_structs").dialog('open');
        }
</script>
<@sj.dialog 
        id="selected_structs" 
        title="Version Structures" 
        autoOpen="false" 
        modal="true"
        width="400"
        height="auto"
        position="['center','top']"
>
</@sj.dialog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:41:22.053

我通过`jquery-ui.css`更改`struts2jquery-plugin-3.3.1.jar`. 在第**435**行`overfolw:hidden`to `overflow:auto`。然后我清空浏览器的缓存，它就像魅力一样工作:-)。

# java - 通过 Java 连接到 OpenOffice 时未发现任何 Office 可执行文件异常

> ID：14157644
> 
> 赞同：3
> 
> 时间：2013-01-04T12:58:09.527
> 
> 标签：java, openoffice.org, openoffice-writer

使用`XComponentContext xContext = Bootstrap.bootstrap()`，我试图通过 Java 获取 OpenOffice 的远程办公组件上下文。但它引发异常 `no office executable found`。

我已经在 CLASSPATH 中指定了 OpenOffice 程序目录的路径，但是我得到了这个异常。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-12-14T17:59:02.597

我知道已经晚了 7 年，但我在尝试解决同样的问题时遇到了这个问题；即编译并运行一个简短的 Java 程序来启动，然后使用 Bootstrap.bootstrap() 方法连接到一个无头 LibreOffice / OpenOffice 进程。如果在 Eclipse 中编译和运行它会起作用，但是当我尝试从命令行执行它时，我得到了“找不到办公室可执行文件！” 错误。最终对我有用的是将office可执行文件（/usr/lib/libreoffice/program/）的路径添加到除了库之外的类路径；juh.jar、jurt.jar、ridl.jar、unoil.jar 和 unoloader.jar。仅在运行程序时才需要这样做，而不是在编译时。那是：

编译：

```
javac -classpath '.:/usr/lib/libreoffice/program/classes/juh.jar:/usr/lib/libreoffice/program/classes/jurt.jar:/usr/lib/libreoffice/program/classes/ridl.jar:/usr/lib/libreoffice/program/classes/unoil.jar:/usr/lib/libreoffice/program/classes/unoloader.jar' MyProg.java 
```

跑步：

```
java -classpath '.:/usr/lib/libreoffice/program/:/usr/lib/libreoffice/program/classes/juh.jar:/usr/lib/libreoffice/program/classes/jurt.jar:/usr/lib/libreoffice/program/classes/ridl.jar:/usr/lib/libreoffice/program/classes/unoil.jar:/usr/lib/libreoffice/program/classes/unoloader.jar' MyProg 
```

这对我有用，无需使用任何其他工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:51:05.067

[1) 从http://forum.openoffice.org/en/forum/download/file.php?id=836](http://forum.openoffice.org/en/forum/download/file.php?id=836)下载 bootstrapconnector.jar

2) String oooExeFolder = "C:/Program Files/OpenOffice.org 2.3/program/";

3) XComponentContext xContext = BootstrapSocketConnector.bootstrap(oooExeFolder);

来源表格查看[http://forum.openoffice.org/en/forum/viewtopic.php?t=2520](http://forum.openoffice.org/en/forum/viewtopic.php?t=2520)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:20:20.440

您没有详细说明如何运行 openoffice/libreoffice，但我会试一试。

我最近也遇到了这个异常。我相信它与最新的 libreoffice（4.4？）和 java 7 一起使用。当我手动执行 libreoffice 然后与 Java 连接时，它起作用了。我们使用了一个脚本，该脚本首先运行 libreoffice，然后尝试多次连接。

原因： - 启动 libreoffice (writer) 时，它多次显示相同的错误消息，即找不到 java jre。当单击消息离开时，libreoffice 确实启动了，然后您可以通过 libreoffice 的菜单指定在哪里可以找到 jre。

另一个问题是 Windows 服务启动脚本的文件系统权限，它只是没有执行 libreoffice（在后台（我相信无头）），然后 JAVA 程序尝试连接。这是通过为 Windows 服务提供正确的凭据来解决的。

因此，在您可以连接到 libreoffice/openoffice 之前，您必须使用命令启动它。这可以在后台运行而无需在界面上显示 libreoffice。您必须查找 soffice.exe 的启动属性，并确保它由正确的用户启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T16:40:03.493

试试这个“var xContext = Bootstrap.bootstrap();” 如果您使用 C# 框架 4.0 的 api（libreoffice 4.0 和 sdk 4.0）存在一个已知问题。如果您的问题仍然存在，您可以使用 api（libreoffice 3.6.6 和 sdk 3.6.6）我不知道 java 中是否有类似的东西，但无论如何您都可以尝试 :)

# hotkeys - 热键命令——不能让它们工作

> ID：14157648
> 
> 赞同：-1
> 
> 时间：2013-01-04T12:58:31.157
> 
> 标签：hotkeys, autohotkey

我只是在学习使用 AHK，我对没有以 #、^ 或 ! 开头的热键命令感到非常沮丧。导致任何行动。首先，我尝试了 Andreas Borutta 的脚本，以便在脚本中简单地输入选定的字符串——没有反应。然后我尝试了一些其他的热键组合；仍然没有反应。

我已经检查了常见问题解答和文档，但看不到我应该做任何特别的事情来让这些命令工作。（“普通” ::x::y 脚本格式可以正常工作。）

问候，垫 Linder

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:35:44.997

我刚刚对它们进行了测试，它们都有效。也许如果您发布您的代码，我们可以找出问题所在。

# getselection - Google 代码可视化 - ChartWrapper 中的 setSelection

> ID：14157654
> 
> 赞同：1
> 
> 时间：2013-01-04T12:58:46.620
> 
> 标签：getselection, google-visualization

我正在尝试将 google ChartWrapper Table 选择与 google Chartwrapper BarChart 选择连接起来。侦听器正在工作，但停在：

```
orgchart.setSelection(table.getSelection()); 
```

（评论这一行运行下一个）。我将非常感谢任何线索！可以在[此处的 HTML 部分](https://code.google.com/apis/ajax/playground/?type=visualization#interaction_using_events)进行测试。我的代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>
  Google Visualization API Sample
</title>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {packages: ['orgchart', 'table']});
        google.load('visualization', '1', {packages: ['table']});
  google.load('visualization', '1.1', {packages: ['controls']});
  google.load('visualization', '1', {packages: ['barchart']});
  google.load('visualization', '1');
</script>
<script type="text/javascript">
var map;
var table;
var data;

function drawOrgChartAndTable() {
  var test = [
    ['Name',  'Manager'],
    ['Mike',  1],
    ['Jim',   3],
    ['Alice', 4],
    ['Bob',   1],
    ['Carol', 5]
  ];
  var data = google.visualization.arrayToDataTable(test);

  var orgchart = new google.visualization.ChartWrapper({
      chartType: 'BarChart',
    dataTable: test,
      options: {'title': 'Countries'},
      containerId: 'orgchart'
    });
  orgchart.draw();

  var table = new google.visualization.ChartWrapper({
      chartType: 'Table',
    dataTable: test,
      options: {'title': 'Countries'},
      containerId: 'table'
    });
  table.draw();

  // When the table is selected, update the orgchart.
  google.visualization.events.addListener(table, 'select', function() {
    orgchart.setSelection(table.getSelection());
    alert("Table event!");
  });

  // When the orgchart is selected, update the table visualization.
  google.visualization.events.addListener(orgchart, 'select', function() {
    table.setSelection(orgchart.getSelection());
    alert("Chart event!");
  });
}

google.setOnLoadCallback(drawOrgChartAndTable);
</script>
</head>

<body style="font-family: Arial;border: 0 none;">
    <table>
      <tr>
        <td>
          <div id="orgchart" style="width: 300px; height: 300px;"></div>
        </td>
        <td>
          <div id="table" style="width: 300px; height: 300px;"></div>
        </td>
      </tr>
    </table>
  </body>
</html>
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T15:16:58.483

（Uli 指向解决方案的指针是正确的。在这里总结一下，因此可以将这个有价值的问题标记为已回答。）

由于chartwrapper 图表中的“选择”事件不会冒泡到chartwrapper 本身，因此您需要用table.getChart() 和orgchart.getChart() 替换对表和orgchart 的引用。

而且由于您必须等待两个图表包装器都“准备好”，然后才能将事件侦听器添加到它们各自的其他图表中，因此您必须做一些诡计。将两个图表包装在仪表板中并在仪表板上使用一个“就绪”事件处理程序可能更简单。

# sql - BizTalk 从 SQL 数据库接收更新/新记录

> ID：14157655
> 
> 赞同：3
> 
> 时间：2013-01-04T12:58:46.837
> 
> 标签：sql, adapter, biztalk

我正在使用 BizTalk 从 SQL 数据库接收记录。我制作了一个 SQL 适配器并使用 select 语句从表中检索所有数据。现在我只想检索之后添加到表中的新记录。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:07:11.623

如果您不是从临时表中检索数据（即在成功检索记录后您将在其中删除记录），而是直接从“活动”表中检索，您通常需要在表上设置一个状态标志列来指示是否记录是否已处理。

在源数据库中创建一个存储过程来封装上述数据检索（即检索一批数据，然后更改该批中获取的记录的状态）通常也是一个好主意。

此外，如果您还没有这样做，请确保使用[WCF-SQL 适配器](https://stackoverflow.com/questions/11358357/the-difference-between-wcf-sql-adapter-and-sql-adapter)。

# javascript - Gmaps：需要同步调用 getDistanceMatrix

> ID：14157657
> 
> 赞同：2
> 
> 时间：2013-01-04T12:58:50.803
> 
> 标签：javascript, maps, synchronous

在我的应用程序中，我需要在隐藏字段中设置标记的坐标以及距离，然后通过表单提交这个隐藏字段（这是一个 bean 属性）。
现在为此，我在表单上添加了一个按钮，单击该按钮会调用一个脚本，该脚本会使用标记坐标填充字段，并且此按钮的操作会提交表单。
**这里的问题是当我的 javascript 被调用时，它会异步调用 DistanceService 并继续我的按钮的动作处理程序方法。在这个句柄方法中，我需要填充隐藏字段。因此，在控件到达我的处理程序方法后，隐藏字段会被填充，即。回调发生在我的表单提交后。**

我正在使用 ICEFaces JSF + Spring + Gmaps v3。

这是按钮：

```
<h:commandButton value="Add Markers" onclick="saveMarkersToBean(this.id);" action="#{myBean.saveMarkers}"/> 
```

任何帮助将不胜感激。
~尼莱什

# c++ - 如何使用带有向量和共享指针的派生类？

> ID：14157661
> 
> 赞同：2
> 
> 时间：2013-01-04T12:59:10.330
> 
> 标签：c++, oop, inheritance

我不熟悉继承的概念，我正在努力寻找解决以下问题的方法。

我有2个班，头和手。我主要将这些类的实例用作向量的元素。这两个类有共同的方法和只有它们特有的方法。

此外，我处理对象的共享指针。

我认为实现它的最佳方法是创建一个 BodyPart 类，像这样

```
class BodyPart
{
  public:
  typedef boost::shared_ptr<BodyPart> pointer;

  private:
  int commonMember1;
  double commonMember2;

  public:
  int commonMethod1();
  int CommonMethod2();
} 
```

和这样的两个派生类

```
class Hand : public BodyPart
{
  public:
  typedef boost::shared_ptr<Hand> pointer;

  private:
  int numFingers;

  public:
  int getNumFingers();
  void printInfo();
} 
```

最后，我想声明一个 BodyPart 元素的向量：

```
std::vector<BodyPart::pointer> cBodyParts; 
```

包含 Hand 或 Head 元素，并在需要时在向量元素上调用我的方法。

但这种方法似乎效果不佳。显然，当我尝试获取向量的元素时，编译器抱怨它无法从 BodyPart 共享指针转换为 Hand 共享指针。此外，如果向量像上面那样声明，我不能在其元素上调用特定于派生类的方法（如 getNumFinger() ），即使实际上来自该类。

有没有合适的方法来处理这个问题？还是我的方法完全错误？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:02:35.120

您的方法是正确的，但编译器也是如此。有一个指向基类的共享指针向量很好，但您需要转换为实际类型才能获得特定功能。

虽然`typedef boost::shared_ptr<Hand> pointer;`没用，你只需要`typedef`基类中的。您不会在智能指针之间进行转换。我将基类 typedef 重命名为

```
typedef boost::shared_ptr<BodyPart> BodyPartPtr; 
```

尽管。

Alan 在评论中的好点：您应该使基类的析构函数为虚拟以防止 UB，因为您将通过指向基类型的指针删除（间接）指向派生类型的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:11:37.327

您的方法是正确的（尽管您并不真正需要`typedef`），您只需要使用`boost::static_pointer_cast`（[Doc here](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm#static_pointer_cast)`shared_ptr<BodyPart>` ）在需要`shared_ptr<Hand>`时转换为 。

在您学习的某个阶段，您还可以查看[enable_shared_from_this 。](https://stackoverflow.com/questions/712279/what-is-the-usefulness-of-enable-shared-from-this)

# jstree - 在 OPEN_ALL 之后未选择 jsTree 子节点

> ID：14157663
> 
> 赞同：0
> 
> 时间：2013-01-04T12:59:20.873
> 
> 标签：jstree

我使用下面的代码行成功打开了一个 jsTree 节点分支。

```
$('#jsTree').jstree("open_all", currentNode); 
```

在这一行之后，我需要选择 currentNode 的第一个孩子。为此，我写了下面的代码行。

```
currentNode = currentNode.children("ul").children("li:first"); 
```

但是，它不起作用！

任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:20:06.303

这行代码只会**打开**指定节点的子节点（即currentNode）

```
$('#jsTree').jstree("open_all", currentNode); 
```

您正在使用的下一条语句**仅**将 currentNode 的引用从父节点更新到第一个子节点。

```
currentNode = currentNode.children("ul").children("li:first"); 
```

该语句与节点的选择无关。要选择第一个子节点，您必须显式调用 select 方法

```
$('#jsTree').jstree("select_node", currentNode); 
```

**注意：**根据您的数据源，您可能无法使用上述代码获得第一个孩子的参考。在我的测试用例中，具有 JSON 数据源，可以通过

```
currentNode = currentNode.children("ul").children("li")[0]; 
```

或者

```
currentNode = currentNode.children("ul").children("li:first")[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:29:34.103

您必须选择新的当前节点：`$('#jsTree').jstree("select_node", currentNode);`。

# java - 即使应用程序有子窗口也能保持焦点

> ID：14157665
> 
> 赞同：0
> 
> 时间：2013-01-04T12:59:39.907
> 
> 标签：java, swing, focus, focuslistener

我需要实现一个例程，以确保应用程序永远不会失去对其他应用程序的关注（但是当它被最小化时，我不应该强迫它回来）。所以我决定在主窗口中实现WindowFocusListener：

```
public class DialogoPrincipal extends JFrame implements WindowFocusListener {

    public DialogoPrincipal() {
        initComponents();
        this.addWindowFocusListener(this);
    }

    @Override
    public void windowGainedFocus(WindowEvent e) {
        //Do nothing
    }

    @Override
    public void windowLostFocus(WindowEvent e) {
        this.toFront();
    }

    /*hidden code*/
} 
```

当主窗口不显示任何子窗口时，它工作得很好。但是当打开一些子窗口时，我无法强制应用程序获得焦点。有没有一种方法可以强制应用程序中的焦点，即使应用程序有子窗口，或者我需要在所有对话框中实现 WindowFocusListener？如果我需要实现这个接口，我该怎么做才能让 JOptionPane.showMessageDialog(...) 不失去焦点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:27:20.827

*   无法正确维护[Focus、FocusRecycle、FocusSubSystem、ZOrder betweens JFrames](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)，脏 hack 必须添加`JFrames`到`two_dimmensional array`供应`FocusWhatever`和与`proper ordering`

*   `FocusWhatever`很简单`asynchronous`，因为是根据属性来的，得往里面`Native OS`拖，`FocusWhatever``invokeLater`

*   [@camickr](http://tips4java.wordpress.com/2010/03/14/dialog-focus/)的对话焦点（AncestorListener）的逻辑（必须在数组中保存祖先）对于正确的容器层次结构`JFrame`和`JDialog`

*   将[JDialog 与 Parent 和适当的 ModalityType 一起](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Dialog,%20boolean%29)使用，然后`focus`可以返回到`Parent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T18:05:45.107

我解决了它实现了一个由所有子窗口继承的抽象类：

```
public abstract class DialogoFocado extends JDialog implements WindowFocusListener {

    public DialogoFocado(Frame owner) {
        super(owner);
        this.addWindowFocusListener(this);
    }

    @Override
    public void windowGainedFocus(WindowEvent e) {
    }

    @Override
    public void windowLostFocus(WindowEvent e) {
        this.toFront();
    }
} 
```

# java - 操纵 AST 来改变输入文本

> ID：14157666
> 
> 赞同：0
> 
> 时间：2013-01-04T12:59:40.063
> 
> 标签：java, antlr, antlr3, abstract-syntax-tree

我有一个更一般的问题。

我目前正在使用 ANTLR v3.4 开发一个项目 - 这是我们的想法：

*   在此过程中解析一些输入并将其重要部分存储在 Map 中。
*   以表单形式显示解析后的输入（请参阅此[示例图片](http://img835.imageshack.us/img835/2968/pgform.png)）。表单字段由键命名并填充 Map 的值，而文本输入字段包含整个输入。

因此，如果用户输入/更改底部的文本，表单字段的内容也会因为构建 Map 的解析器语法中的代码操作（用作填写表单字段的输入）而改变。

但我们还想要另一个方向：如果用户更改了其中一个表单字段中的值，这些更改应该反映在底部的文本中。

我想使用 AST 创建然后操作来完成这个任务。我已经在我的语法中添加了树重写规则。但我不太确定如何在 Map、AST 和如何创建输出之间建立联系。

我什至走在正确的轨道上吗？还有其他想法吗？

**编辑**

所以我按照你的建议，把离开节点直接放到了一个可以更改的数据结构中，一切都很好。

但现在我还有另外两个问题：

1.  如何*添加*令牌？输入中有可选部分，因此某些表单字段可能为空。如果我将表单字段更改为给定值，我必须在树中创建新节点。我该怎么做？我必须确定将新节点放在哪里......
2.  如何*删除*令牌？因此，如果我将某个表单字段的值更改为“空”，则必须删除关联的节点，但这可能会影响周围的节点（例如，在列表中，每个标记后面都有逗号）。我真的不知道该怎么做。

这是我目前的语法：

```
parser grammar TestASTParser;

options {
  language = Java;
  tokenVocab = TestASTLexer;
  output = AST;
}

...

entry
:
lemma=phrase 

(lgrammatt=grammatts)? (lsemantic=semantics)? (lsubsemantic=subsemantics)?

SEP 

translat=phrase  

(tgrammatt=grammatts )? (tsemantic=semantics)? (tsubsemantic=subsemantics)?

EOF

  -> ^(ENTRY 
         ^(LEMMA ^(LEMMA_TEXT $lemma) ^(LEMMA_GRAMM $lgrammatt)? 
         ^(LEMMA_SEM $lsemantic)? ^(LEMMA_SUBSEM $lsubsemantic)?) 
      ^(SEPARATOR SEP)
       ^(TRANSLATION 
          ^(TRANSLAT_TEXT $translat) ^(TRANSLAT_GRAMM $tgrammatt)? 
          ^(TRANSLAT_SEM $tsemantic)? ^(TRANSLAT_SUBSEM $tsubsemantic)?)
       )

;

phrase
:
    t=((options{ greedy = false; }:.)+)

    -> PHRASE[$phrase.text]
;

grammatts
:
  OPEN_BRACKET grammlist CLOSE_BRACKET
;

semantics:
  LEFT_CURLY phrase RIGHT_CURLY
;

subsemantics:
  D_LEFT_CURLY phrase D_RIGHT_CURLY
;

grammlist
:
   grammatt (COMMA grammatt)*
;

grammatt:
    (GENUS | GRAMMATT)
; 
```

所以测试输入的结果树

`Angeber(in) [f] {Großkotz} {{xyz}} <> baterlunza(a) [m(f), refl] {boeser buba}`

看起来像[这样](http://img203.imageshack.us/img203/127/pgtree.png)（黄色节点将始终存在，其他一切都是可选的）。因此，如果我在表单字段中将“refl”更改为“”，节点“refl”应该消失，而且它之前的“，”也会消失。如果我删除下面的“f” `LEMMA_GRAMM`，整个子树必须消失（因为列表不能为空）。或者，如果我想向 中添加子语义`TRANSLATION`，我必须`TRANSLAT_SUBSEM`为花括号`{{`和. 创建相应的节点和子节点`}}`。

我真的不知道从哪里开始。我的树结构甚至对此有好处吗？我需要我自己的实现`BaseTree`吗？或者它只是普通的Java？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:18:20.620

我不知道这是否直接适合您的情况。但是当使用[Xtext](http://eclipse.org/Xtext/)时，您也会得到一个相应的[EMF Model](http://eclipse.org/modeling/emf/)。然后，您的用户界面基本上是视图上部的 EMF 模型的表单和视图下部的 EMF 模型的文本序列化部分的 Xtext 编辑器。由于视图的上下部分都基于同一个 EMF 模型实例，因此视图任一部分的更改都可以反映在任何其他部分。Xtext 将为您提供下表单部分中文本的必要解析和序列化。

由于您使用的是 ANTLR，因此您可以将 ANTLR 语法迁移到 Xtext。然而，这不是自动实现的，但不应该是一项太难的任务。

# database - 如何在不影响数据库的情况下测试我的服务？

> ID：14157672
> 
> 赞同：2
> 
> 时间：2013-01-04T12:59:58.460
> 
> 标签：database, spring, testing, rollback

我在 Spring 中为我的应用程序编写了一些集成测试。我想测试一些服务，但是它们可能会调用一些数据访问对象，并且新数据将保存在我的数据库中。我有两种方法可以在测试后清除数据库中的所有内容完全的：

1.  使用临时数据库在那里插入测试数据
2.  每次我做测试时清除我所有的桌子

但是我正在寻找一种*干净而前卫*的方式，这样我就可以在没有手动清理的情况下使用我的数据库。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:34:07.353

用答案回应对问题的评论，因为仅靠评论无法捕捉到它......

在每次测试之间建立和拆除数据库对于性能来说肯定是非常昂贵的。而你如何去做完全取决于数据库本身。（MS SQL、MySQL、PostgreSQL 等）如果您可以在使用相同代码的同时换掉一个完全在内存中的数据库，那么这将是每次测试设置和拆除的最快的一个。

例如，我曾经有一个项目需要针对 MS SQL 实例运行测试。设置和拆卸大大减慢了测试速度，但*我们*都认为扩大测试覆盖率是值得的。（我们每晚运行集成测试，而不是在签到时运行，所以这不是什么大问题。）为了完全刷新数据库，我们使用了以下代码（C#，抱歉）：

```
var procInfo = new ProcessStartInfo
{
    Arguments = string.Format(@"/Action:Publish /SourceFile:{0} /p:CreateNewDatabase=True /TargetConnectionString:""{1}""", ConfigurationManager.AppSettings["SQLPackageFile"], ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString),
    CreateNoWindow = true,
    ErrorDialog = false,
    FileName = ConfigurationManager.AppSettings["SQLPackageExecutable"],
    RedirectStandardOutput = true,
    UseShellExecute = false
};
var proc = new Process
{
    StartInfo = procInfo
};
proc.Start(); 
```

然后在测试的配置中，我们有三个值：

1.  数据库的连接字符串。
2.  MS SQL 执行安装/拆卸的命令行可执行文件。
3.  可执行文件用于执行设置的 SQL 包文件。

因此，在每次测试之前，我们将运行它以根据源代码控制中的 SQL 包将数据库完全刷新到已知的初始状态。同样，这*很慢*，但它起作用了。可能有更快的解决方案对您有用。（也许不是删除并重新创建数据库，而是截断并重新填充表，或者删除并重新创建表等。修补它以找到适合您需要的内容。）

此外，我们希望确保它适合我们的域模型，而不会污染 SQL 依赖项之外的任何内容。我们用于数据访问的模型是存储库模式。基本上，我们的中心域代码具有域模型（不与数据库表或任何其他依赖项耦合）和这些模型的存储库接口。然后一个数据访问项目实现了这些接口，并在域模型和数据库表/列之间进行了内部映射。

（我们还有两个相同接口的其他存储库实现项目。一个是用于域单元测试的内存中实现。它只是保留发送到存储库的模型的静态列表。另一个是每个使用 XML 文件的实现用于在没有 SQL 实例的情况下运行软件的数据持久性。应用程序的任何给定实例使用哪一个由依赖注入容器的配置设置确定。）

所以我们所做的是在域中添加另一个名为`DataResetter`. 然后每个数据访问实现（SQL、内存中、XML）都实现了该接口。SQL 使用了上面的代码和配置值，内存中的只是清除了它的静态列表，而 XML 只是删除了 XML 文件。

这允许测试使用域功能进行测试设置和拆卸，并允许依赖注入容器确定要使用的实现。这样，测试就不会与任何特定的实现相结合。这样做的另一个好处是可以将相同的测试用于单元和集成目的。它们之间的区别只不过是配置设置。

（首先测试整个域与内存中的模拟实现一起工作，然后用一个依赖实现再次测试该域，用另一个实现再次测试它，等等。我们最终每晚运行同一套测试十几次，持续十几次整个系统中不同的依赖实现。一次一个依赖。这让我们可以很容易地看到什么时候出了问题，因为在任何给定的测试运行中只有一个新变量。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:02:42.630

还有另一种选择：在测试服务时对 DAO 使用模拟。

单元测试不同于集成测试。单元测试应该只针对感兴趣的类，而不是它的所有依赖项。

我假设您已经以事务方式对 DAO 进行了单元测试，因此无需证明它们再次正常工作。

您未提及的集成测试的另一个选项是使服务中的所有数据库交互都具有事务性。执行这些操作，然后在完成后回滚它们。

临时数据库是一个有吸引力的选择。您可以使用小而轻的东西，例如 Hypersonic、Derby 或 SQLLite。缺点是您必须更新您的模式两次：一次在测试数据库中，另一次在生产实例中。如果你无论如何都必须这样做，那就是洗头了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T13:37:12.967

如果您使用的是 Spring 框架，那么我认为您应该已经检查了 Spring关于如何进行测试的[参考。](http://static.springsource.org/spring/docs/2.5.x/reference/testing.html)

你会看到 Spring 会让你变得如此简单，你不需要直接与事务交互。在你的测试顶部添加一个**@Transactionl**注释就是你需要做的，那么有什么好处使测试交易？是的！如前所述，其他答案将让您回滚事务，因此数据库中不会保留任何内容。看看这个示例代码：

```
 @Transactional
    public class FictitiousTransactionalTest {

        @Before
        public void setUpTestDataWithinTransaction() {
            // set up test data within the transaction
        }

        @Test
        @Rollback(true)
        public void modifyDatabaseWithinTransaction() {
            // logic which uses the test data and modifies database state
        }
    } 
```

需要注意的重要一点是您的数据库必须是 InnoDB，因此如果您使用默认为 myISAM 的 mySQL，请考虑事先更改您的表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T13:34:17.193

还有一个选项：事务回滚

根据您打开和提交事务的方式，可能不提交事务而是返回一个角色。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T13:43:37.423

只需`@Transactional`在您的测试方法上添加注释，spring 会自动进行回滚。

# heroku - Heroku 上 Sinatra 应用程序的错误绑定

> ID：14157673
> 
> 赞同：0
> 
> 时间：2013-01-04T13:00:02.093
> 
> 标签：heroku, sinatra

我的目标是查看在将小型 Sinatra 应用程序部署到 Heroku 并诊断端口错误出现的原因方面是否遗漏了一些明显的东西。

我正在向 Heroku 部署一个相当简单的应用程序。应用代码在这里：

[https://github.com/jnyman/symbiont-app](https://github.com/jnyman/symbiont-app)

应用程序本身是：

[http://symbiont-app.herokuapp.com/](http://symbiont-app.herokuapp.com/)

这是一个非常简单的测试应用程序。但是，当我部署到 Heroku 时，出现应用程序错误。日志中报告的错误是：

```
 Error R11 (Bad bind) -> Process bound to port 3000, should be 49668 (see environment variable PORT)
    heroku[web.1]: Process exited with status 137
    heroku[web.1]: State changed from starting to crashed 
```

这就是我的 Procfile 中的内容：

```
 web: bundle exec rackup config.ru -p $PORT 
```

根据我的调查，我的理解是没有“-p $PORT”是我看到的错误的最可能原因。但我显然有这条线。此外，当我运行时，在本地环境中一切正常：

```
 bundle exec rackup config.ru 
```

我可以毫无问题地测试我的应用程序。当我使用时同样适用：

```
 foreman start 
```

同样，应用程序工作得很好。我使用标准命令部署到 heroku：

```
 git push heroku master 
```

在这个过程中没有错误。更新的最后一部分是：

```
 -----> Discovering process types
       Procfile declares types     -> web
       Default types for Ruby/Rack -> console, rake
    -----> Compiled slug size: 15.7MB
    -----> Launching... done, v12
       http://symbiont-app.herokuapp.com deployed to Heroku 
```

所以在本地工作；仅在部署到 Heroku 时出现错误。唯一的错误似乎与端口有关。我找不到很多信息可以帮助我弄清楚如何诊断我所看到的。我觉得我可能在这个端口问题上遗漏了一些明显的东西，但我不知道那是什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:32:46.883

我确实得到了各种各样的答案。本质上，它归结为“有时”在部署到 Heroku 时，您可能会遇到这个“端口冲突”问题，除了从 Heroku 删除您的应用程序，重新创建应用程序，然后重新部署。

只是为了提供一些背景信息，对于上述问题，我什么也做不了。所以我尝试了核选项——我删除了几乎所有的文件，除了一个静态 HTML 文件和一个简单的路由。即使只是这样重新部署，我的应用程序仍然会出现端口冲突。

所以我删除了我的 Heroku 应用程序，重新创建它，然后重新发布了我的完整版本：果然，一切正常。我想答案不多，但我不能与证据争论。

# testing - WebServiceSampler：Jmeter 中的错误

> ID：14157674
> 
> 赞同：0
> 
> 时间：2013-01-04T13:00:05.697
> 
> 标签：testing, jmeter, performance-testing

我使用jmeter 2.8。
我已经使用 HTTP Request Sampler 发送了请求。我已经发送了 10 个 http 请求。我已经使用 XPath Extractor 解析了响应并将值存储在变量中。

我已经使用 Beanshell 预处理器在下一个 http 请求中替换了该值。
我使用了以下代码：

```
import org.apache.jmeter.protocol.http.sampler.WebServiceSampler;
WebServiceSampler wsSampler = (WebServiceSampler) sampler;
String requestWithCertif = wsSampler.getXmlData().replaceFirst("#variable to replace#", vars.get("${replacevalue}"));
wsSampler.setXmlData(requestWithCertif); 
```

但是出现了以下错误。
我已按照此[链接](http://theholyjava.wordpress.com/2010/06/04/webservice-testing-with-jmeter-passing-data-from-a-response-to-another-request/)了解如何解析响应：

> 错误 - jmeter.util.BeanShellInterpreter：调用 bsh 方法时出错：eval 源文件：内联评估：``import org.apache.jmeter.protocol.http.sampler.WebServiceSampler; 网络服务采样。. . '' : 类型变量声明

我希望错误似乎是关于这一行的变量声明

String requestWithCertif = wsSampler.getXmlData().replaceFirst("#variable to replace#", vars.get("${replacevalue}"));

有人可以解释一下如何在这个 beanshell 脚本中使用变量声明吗？

![在此处输入图像描述][2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:35:46.203

不要那样做。

将 HTTP Sampler 与 Raw Post Body 一起使用，并将带有变量的 XML 放入正文中的 ${} 中。

WebserviceSampler 将在即将到来的 2.9 版本中弃用。

# linux - 如何制作 Linux 调度器甘特图？

> ID：14157682
> 
> 赞同：0
> 
> 时间：2013-01-04T13:00:35.360
> 
> 标签：linux, operating-system, scheduling, gantt-chart

我正在研究 linux 进程调度程序，但我不知道如何为这种情况制作甘特图：

```
Process | Arrival | Burst Time | Sched. Class | RT Priority | RT Quantum | Nice
  P1    |    0    |     19     |      TS      |      0      |            |  -5
  P2    |    7    |      5     |     RT-RR    |      2      |      5     |
  P3    |   11    |     14     |     RT-FCFS  |      4      |            |
  P4    |   13    |      4     |      TS      |      0      |            |  -5 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:18:46.070

要在甘特图中显示表格中的此信息，您可以只使用 Excel。[这](http://www.youtube.com/watch?v=NrfOtqzz_wk)是如何使用 Excel 2010 的示例

# php - 回显 array_count_values 时 rsort

> ID：14157685
> 
> 赞同：0
> 
> 时间：2013-01-04T13:00:52.430
> 
> 标签：php, arrays

这是我的代码

```
rsort($count_bit);
foreach (array_count_values($count_bit) as $bit => $nums)
{
echo "<tr><td width='90%'>Version: " . $bit .  "</td><td>" . $nums . "</td></tr>";
} 
```

这呼应了一个随机顺序，我认为它是因为它对稍后通过 array_count_values 运行的 $count_bit 进行排序，所以实际上我需要排序：array_count_values($count_bit) 而不是 $count_bit，我试过了

```
foreach (rsort(array_count_values($count_bit)) as $bit => $nums) 
```

但这没用，我也想过做

```
$count_bit1 = new array($count_bit);
rsort($count_bit1); 
```

但是当我回应它时，$bit 只是显示为 1,2,3,4,5,6,7,8 并失去了它的独特价值。有任何想法吗

我处理的任何例子都是这样的：

```
 Version: 665   14
 Version: 645   1
 Version: 660   5
 Version: 651   1
 Version: 662   1
 Version: 649   1 
```

我希望它显示 14,5,1,1,1,1 而不是随机的

$bit 回显版本号， $nums 回显它在原始循环中找到的版本号的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:10:56.327

您的逻辑顺序是关闭的。

在您的第一个示例中，您对数组进行排序，然后使用`array_count_value`它创建一个新数组（未排序）。

`rsort`在您的第二个中，您使用`foreach`循环中的返回值。[`rsort`](http://php.net/rsort)返回一个布尔值。

您需要使用[`arsort`](http://php.net/arsort)它，因为它维护数组的索引，而`rsort`在进行排序时以数字方式重新键入您的数组。这就是为什么您的“版本”变成递增数字的原因。

**PHP**

```
$new_array = array_count_values($count_bit);
arsort($new_array);
foreach($new_array as $bit => $nums)
{
    // Output your html with your values here
    echo sprintf("Version: %s > Count: %s\n", $bit, $nums);
} 
```

**输出（我自己的数组示例）**

```
Version: 665 > Count: 11
Version: 660 > Count: 2
Version: 662 > Count: 1
Version: 645 > Count: 1
Version: 642 > Count: 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:08:15.270

试试这个函数来排序你的数组：

它需要 3 个参数：

1）要排序的数组。2）您要对该数组进行排序的索引。3) 排序顺序（SORT_ASC 或 SORT_DESC）

你可以这样称呼它：

```
array_sort($array, 'array_index', SORT_DESC);
```

不要将返回结果分配给任何变量或数组。它会自动对该数组进行排序，并将新排序的数组分配给同一个数组变量。

```
函数数组排序（$array，$sort_by，$order=SORT_ASC）
    {
        $new_array = 数组（）；
        $sortable_array = 数组（）；

        if (count($array) > 0) {
            foreach ($array as $k => $v) {
                if (is_array($v)) {
                    foreach ($v as $k2 => $v2) {
                        如果（$k2 == $on）{
                            $sortable_array[$k] = strtolower($v2);
                        }
                    }
                } 别的 {
                    $sortable_array[$k] = strtolower($v);
                }
            }

            开关（$订单）{
                案例 SORT_ASC：
                    asort($sortable_array);
                休息;
                案例 SORT_DESC：
                    arsort($sortable_array);
                休息;
            }

            foreach ($sortable_array as $k => $v) {
                $new_array[$k] = $array[$k];
            }
        }

        返回 $new_array;
    }

```

# sql - 带有计算字段的日期连接查询

> ID：14157687
> 
> 赞同：1
> 
> 时间：2013-01-04T13:00:55.747
> 
> 标签：sql, inner-join, outer-join, calculated-field

我正在创建一个 Access 2010 数据库来替换旧的 Paradox 数据库。刚刚开始查询，毫无疑问我是 SQL 新手。

我想要做的是设置一个供图表使用的查询。图表的 Y 轴是一个简单的通过百分比，X 轴是某一天。该图表将在表单加载和随后输入的新记录时创建，日期范围为“Between Date() And Date()-30”（30 天，滚动）。

我正在使用的数据库每天可以进行多次检查，多次通过和多次失败。每次检查都是单独的记录。

例如，2012 年 11 月 26 日进行了 7 次检查；5 次通过，2 次失败，接受率为 71% ((5/7)*100%)。“11/26/2012”和“71%”代表图表上的一个数据点。2012 年 11 月 27 日进行了 8 次检查；4 次通过，4 次失败，接受率为 50%。等等。

这是一个查询示例，其中包含日期范围“11/26/2012 - 11/27/2012”的“日期”和“处置”字段：

```
SELECT Inspection.Date, Inspection.Disposition
FROM Inspection
WHERE (((Inspection.Date) Between #11/26/2012# And #11/27/2012#) AND ((Inspection.Disposition)="PASS" Or (Inspection.Disposition)="FAIL"));

Date       | Disposition
11/26/2012 | PASS
11/26/2012 | FAIL
11/26/2012 | FAIL
11/26/2012 | PASS
11/26/2012 | PASS
11/26/2012 | PASS
11/26/2012 | PASS
11/27/2012 | PASS
11/27/2012 | PASS
11/27/2012 | FAIL
11/27/2012 | PASS
11/27/2012 | FAIL
11/27/2012 | PASS
11/27/2012 | FAIL
11/27/2012 | FAIL 
```

*注意 - 日期字段的类型为“日期”，处置字段的类型为“文本”。有些日子没有进行检查，这些日子不会出现在图表上。检查处置也可以列为“NA”，它指的是另一种不绘制图表的检查。

这是我想在另一个查询中创建的布局（再次，为简洁起见，范围内只有 2 天）：

```
Date       | # Insp | # Passed | # Failed | % Acceptance
11/26/2012 | 7      | 5        | 2        | 71 
11/27/2012 | 8      | 4        | 4        | 50 
```

我认为需要做的是对记录日期本身和其余查询结果中的“计算字段”进行某种类型的连接。问题是我还没有找到如何按日期“展平”记录并在一个查询中维护检查次数和通过/失败次数的计数。我需要为此进行多层查询吗？我不喜欢将任何查询存储为表格，因为这些数字的唯一用途是图形形式。

我正在考虑在数据库中创建新列，以通过分配 PASS“1”和 FAIL“0”来绕过“Disposition”字段为 Textual，但这似乎是一种逃避。必须有一种方法可以在 SQL 中完成这项工作，只是我还没有找到适用的示例。

谢谢你的帮助！任何意见或建议表示赞赏！带有表单、查询和图表的示例数据库也很有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:07:22.153

您可以按 分组`Date`，然后使用 和 之类的聚合`sum`来`count`计算该组的统计信息：

```
select  Date
,       count(*) as [# Insp]
,       sum(iif(Disposition = 'PASS',1,0)) as [# Passed]
,       sum(iif(Disposition = 'FAIL',1,0)) as [# Failed]
,       100.0 * sum(iif(Disposition = 'PASS',1,0)) / count(*) as [% Acceptance]
from    YourTable
where   Disposition in ('PASS', 'FAIL')
group by
        Date 
```

# android - Android 应用程序不会在低于 targetSDKVersion 的版本上启动

> ID：14157688
> 
> 赞同：5
> 
> 时间：2013-01-04T13:00:58.993
> 
> 标签：android, android-emulator, android-manifest, android-version

我刚刚从 Android SDK Manager 下载了最新的 SDK 版本，并将我的应用程序的项目构建目标设置为 Google API 级别 17，如下所示

![在此处输入图像描述](../Images/15b1052e5dedcff97c8e4ffa706418a8.png)

并添加到我的应用程序的 AndroidManifest.xml 中，如下所示

```
<uses-sdk 
   android:minSdkVersion="3" 
   android:targetSdkVersion="17" 
   android:maxSdkVersion="17" /> 
```

并用 Level 8, 2.2 加载了模拟器，然后尝试在这个模拟器上启动应用程序。每当我运行应用程序时，当我的 AndroidManifest.xml 中有 android:minSdkVersion="3" 时，它会显示“未找到兼容目标”（我知道我可以为级别 17 创建 AVD，但想在模拟器级别 8 上启动）。

我进行了很多研究，但没有找到正确的答案。

然后我将项目构建目标更改为 Android 4.2 级别 17，如下所示

![在此处输入图像描述](../Images/9db167991ce21584724098c44dd6bd10.png)

该应用程序开始在 17 级以下的所有模拟器上启动。

但是我仍然不知道当项目构建目标是 Google API 级别 17 时，是什么限制了应用程序在较低版本的模拟器上启动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:07:55.180

只需删除 targetSDKVersion 属性，然后尝试。

一个整数，指定应用程序所针对的 API 级别。

使用此属性集，应用程序表示它能够在旧版本上运行（低至 minSdkVersion），但已明确测试可与此处指定的版本一起使用。指定此目标版本允许平台禁用目标版本不需要的兼容性设置（否则可能会打开以保持向前兼容性）或启用旧应用程序不可用的新功能。这并不意味着您可以为平台的不同版本编写不同的功能——它只是通知平台您已经针对目标版本进行了测试，并且平台不应该执行任何额外的工作来保持与目标版本的前向兼容性。

[https://stackoverflow.com/a/4568358/760489](https://stackoverflow.com/a/4568358/760489)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:06:22.610

[Google APIs](https://developers.google.com/android/add-ons/google-apis/) Add-On 是 Android SDK 开发环境的扩展，可让您为包含 Google 的一组自定义应用程序、库和服务的设备开发应用程序。该插件的一个核心功能是 Maps 外部库，它允许您向 Android 应用程序添加强大的地图功能。

启用 Google API 可让您使用默认 Android 设备中不存在的功能。由于您`minSdkVersion`的设置为 3，因此如果您创建 API 版本大于 3 但启用了 Google API 的模拟器，您应该能够启动应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T09:01:03.017

尝试删除 android:maxSdkVersion

# javascript - nexus 10 上的 jQuery Mobile Splitview 插件分辨率修复

> ID：14157694
> 
> 赞同：1
> 
> 时间：2013-01-04T13:01:19.433
> 
> 标签：javascript, jquery, cordova, jquery-mobile

使用 jQuery Mobile Splitview 插件时遇到问题。splitview 插件可以在智能手机和平板电脑上创建，但它不适用于新的 google nexus 10，可能是因为高分辨率。在 nexus 10 上，它只显示智能手机的标准视图，而不是平板电脑视图。

有人可以告诉我如何解决这个问题吗？其他人是否也有这个问题，也许是 ipad 4 或 google nexus 10？

问候

# r - 绘图中的分页符（新页面）

> ID：14157698
> 
> 赞同：6
> 
> 时间：2013-01-04T13:01:29.113
> 
> 标签：r, plot, ggplot2

在将绘图的输出转移到 PDF（或其他）文件时，如何进行分页，以便强制在新页面上绘制新绘图？

使用普通`plot()`或`ggplot()`函数会自动在新页面上绘制新图。但是我正在使用包`VennDiagram`来绘制一些维恩图。问题是，当我尝试制作多个图表时，它们都绘制在同一页面上：

```
library("VennDiagram")
pdf("foo.pdf")
draw.pairwise.venn(area1 = 100, area2 = 100, cross.area = 20, 
    category = c("A", "B"), fill = c("blue", "red"), lty = "blank")

draw.pairwise.venn(area1 = 200, area2 = 200, cross.area = 100,
    category = c("C", "D"), fill = c("blue", "red"), lty = "blank")
dev.off() 
```

这是结果，而我想将不同页面上的图分开：

![在此处输入图像描述](../Images/459440934c1a4c7da3385233cead438a.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T13:08:14.537

您可以强制使用新页面`grid.newpage()`

```
pdf("foo.pdf")
draw.pairwise.venn(area1 = 100, area2 = 100, cross.area = 20, 
    category = c("A", "B"), fill = c("blue", "red"), lty = "blank")
grid::grid.newpage()
draw.pairwise.venn(area1 = 200, area2 = 200, cross.area = 100,
    category = c("C", "D"), fill = c("blue", "red"), lty = "blank", add=FALSE)
dev.off() 
```

本质上，`VennDiagram`使用网格图形来处理绘图方面。因此，我们只是强制使用`grid.newpage()`.

# jquery-ui - 我如何在选项卡中获得多个 jquery 可选择项

> ID：14157704
> 
> 赞同：0
> 
> 时间：2013-01-04T13:01:53.410
> 
> 标签：jquery-ui, jquery-ui-tabs, jquery-ui-selectable

我有两个用 jquery 制作的选项卡，其中包含单独的可选择项。默认打开的选项卡，可选择的工作正常。转到另一个选项卡时，使用套索进行选择将不起作用。将停止事件添加到可选择项时开始出现问题。

HTML：

```
<div id="tabs">
<ul>
    <li><a href="#div1" id="tab1">Div 1 (0)</a></li>
    <li><a href="#div2" id="tab2">Div 2 (0)</a></li>
</ul>
<div id="div1">
    <ul class="selectable" id="sel1">
      <li class="ui-state-default">1</li>
      <li class="ui-state-default">2</li>
      <li class="ui-state-default">3</li>
      <li class="ui-state-default">4</li>
      <li class="ui-state-default">5</li>
      <li class="ui-state-default">6</li>
      <li class="ui-state-default">7</li>
      <li class="ui-state-default">8</li>
      <li class="ui-state-default">9</li>
      <li class="ui-state-default">10</li>
      <li class="ui-state-default">11</li>
      <li class="ui-state-default">12</li>
      <li class="ui-state-default">13</li>
      <li class="ui-state-default">14</li>
      <li class="ui-state-default">15</li>
    </ul>
</div>
<div id="div2">
    <ul class="selectable" id="sel2">
        <li class="ui-state-default">1</li>
        <li class="ui-state-default">2</li>
        <li class="ui-state-default">3</li>
        <li class="ui-state-default">4</li>
        <li class="ui-state-default">5</li>
        <li class="ui-state-default">6</li>
        <li class="ui-state-default">7</li>
        <li class="ui-state-default">8</li>
        <li class="ui-state-default">9</li>
        <li class="ui-state-default">10</li>
        <li class="ui-state-default">11</li>
        <li class="ui-state-default">12</li>
        <li class="ui-state-default">13</li>
        <li class="ui-state-default">14</li>
        <li class="ui-state-default">15</li>
    </ul>
</div> 
```

JS：

```
$(function() {
$("#sel1").selectable( {
    autoRefresh: false,
    stop: function() {
        var count = 0;
        $( '.ui-selected', this).each(function() {
            count++;
        });
        $('#tab1').html('Div 1 (' + count + ')');
    }
});
$("#sel2").selectable( {
    autoRefresh: false,
    stop: function() {
        var count = 0;
        $( '.ui-selected', this).each(function() {
            count++;
        });
        $('#tab2').html('Div 2 (' + count + ')');
    }
});
$("#tabs").tabs();
}); 
```

见例子：http: [//jsfiddle.net/3pKQf/8/](http://jsfiddle.net/3pKQf/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:30:59.607

采用：

```
 autoRefresh: true, 
```

在第二个

# sql - 使用夏令时计算时间戳

> ID：14157708
> 
> 赞同：6
> 
> 时间：2013-01-04T13:02:08.697
> 
> 标签：sql, oracle, time, oracle11g, dst

中欧夏令时从三月的最后一个星期日开始。我们将时钟设置为 02:00 到 03:00。如果我在数据库请求中进行时间戳计算会发生什么 - 比如说在 01:59？

```
UPDATE sessions SET aliveuntil = (CURRENT_TIMESTAMP + INTERVAL '1' MINUTE) WHERE id = ? 
```

结果是 03:00 还是 02:00？

如果我们将时钟设置为 03:00 到 02:00，那么结束时间会怎样？

```
SELECT id FROM sessions WHERE aliveuntil < (CURRENT_TIMESTAMP - INTERVAL '1' MINUTE) 
```

时间从 03:00 更改为 02:00... 02:00 会发生什么`(CURRENT_TIMESTAMP - INTERVAL '1' MINUTE)`？是 02:59 还是 01:59？

这应该如何处理？最佳实践以及 Oracle Database 11g 版本 11.2.0.2.0 如何处理（在我的特定情况下）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T14:28:21.647

如果我正确理解他们的文档，则取决于数据库中表/列的设置方式。如果将列设置为使用 WITH TIME ZONE，则 Oracle 会自动确定正确/相关的值。在上面的示例中，如果aliveuntil 列具有此设置，那么如果您尝试在1:59 添加1 分钟，时间将更新为3:00。

这是我在该主题上找到的有用文章：

[http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm)

向下滚动到文章底部，您应该会看到要查找的内容。

这是我认为相关的文章的一部分：

> 例如，在美国东部地区，夏令时生效时，时间从凌晨 01:59:59 变为凌晨 3:00:00。02:00:00 和 02:59:59 am 之间的时间间隔不存在。该间隔中的值无效。

# joomla1.7 - 在 joomla 中贡献一个模块

> ID：14157710
> 
> 赞同：1
> 
> 时间：2013-01-04T13:02:27.107
> 
> 标签：joomla1.7

我已经完成了一个名为 mod_widget 的 joomla 模块，现在我想在 joomla 网站上部署给其他用户。用户下载并使用它。我如何上传这个请有人帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:26:44.437

首先，您需要一个 JED 帐户。[在这里](http://extensions.joomla.org)注册。然后浏览，直到您达到您需要上传的完美类别。到达后，您会找到一个按钮来提交您自己的扩展程序。[在](http://extensions.joomla.org/help2?showall=1)提交扩展下阅读更多信息。

# javascript - 读取 XML 文件并对其执行许多操作

> ID：14157719
> 
> 赞同：0
> 
> 时间：2013-01-04T13:02:43.190
> 
> 标签：javascript, xml, html

我想读取一个 XML 文件，然后我想通过在表格中对其进行排序来对其进行许多操作，并且如果有人想找到与任何其他字段相关的字段，比如我有一个客户，以及每个人，我也会做一些数学函数。有很多记录如果我写我的客户的名字我会显示与他有关的记录

我应该只使用 XML、javascript 和 html5 吗？或者我必须使用 PHP 之类的程序语言，...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:44:54.480

你可以用 javascript 做到这一点。

Jquery 也很简单：http: [//api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# core-data - NSFetchedResultsController：保持排序顺序与 IN 谓词相同

> ID：14157722
> 
> 赞同：0
> 
> 时间：2013-01-04T13:02:52.173
> 
> 标签：core-data, nsfetchedresultscontroller, nsfetchrequest

我有一个 uid 列表，我需要使用这些 uid 获取 Core Data 对象：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"uid IN %@", uids];
[request setPredicate:predicate]; 
```

现在，我想保持对象与列出的 uid 的顺序相同。因此，如果数组是 [3, 1, 2]，那么我希望返回的对象也按该顺序排列。

不设置排序描述符不是一个选项`NSFetchedResultsController`，那么我应该将排序描述符设置为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T06:05:35.453

持久存储中的对象是无序的。通常，您应该根据创建日期等属性在控制器或视图层施加顺序。如果您的数据中存在固有顺序，则需要对其进行显式建模。（[https://developer.apple.com/library/mac/documentation/cocoa/conceptual/coredata/articles/cdFAQ.html](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/coredata/articles/cdFAQ.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:50:46.600

可以在`NSFetchRequest`实例上设置排序描述符。

```
[request setSortDescriptors:descriptors]; 
```

where`descriptors`是一个[`NSSortDescriptor`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)实例数组。

A`NSSortDescriptor`可以如下创建：

```
NSSortDescriptor *sortDescriptorForKey = [[NSSortDescriptor alloc] initWithKey:@"someKey" ascending:YES]; // YES or NO based on your needs 
```

关于你的问题，顺序是`uids`什么？根据我的经验（直到现在我还没有想到这一点），你不能做你想要达到的目标。无论如何，您可以`uids`在`NSFetchRequest`.

也许有人可能有其他想法。

# asp.net-mvc - 瞥见和部分观点？

> ID：14157723
> 
> 赞同：0
> 
> 时间：2013-01-04T13:02:56.650
> 
> 标签：asp.net-mvc, glimpse

我正在尝试使用 glimpse.mvc 在 MVC-4 应用程序中调试我的路由

如果我只使用 _layout.cshtml 没有问题，但是如果这调用其他部分视图，页面的加载实际上需要几分钟并且浏览器 (IE) 仍然没有响应。

这是 Glimpse 的限制吗？其他人注意到这种行为了吗？

谢谢

# wordpress - Wordpress 404ing 一个存在的文件？

> ID：14157726
> 
> 赞同：0
> 
> 时间：2013-01-04T13:03:06.220
> 
> 标签：wordpress, .htaccess

我不知道这里发生了什么。我在一个看起来像这样的目录中有一个文件：`http://example.co.uk/admin/survey/index.php`

这是404ing。该目录中的所有其他 PHP 文件也是如此。但是 admin 中的每个 PHP 文件都可以完美运行。里面还有一个“.sql”文件`survey`。最初我认为这是一个权限问题，但从`.htaccess`根目录中删除文件可以访问，所以我猜是这样。虽然我不知道怎么做。这是文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>

# BEGIN W3TC Browser Cache
<IfModule mod_deflate.c>
    <IfModule mod_setenvif.c>
        BrowserMatch ^Mozilla/4 gzip-only-text/html
        BrowserMatch ^Mozilla/4\.0[678] no-gzip
        BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
        BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html
    </IfModule>
    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary
    </IfModule>
    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE text/css application/x-javascript text/x-component text/html text/richtext image/svg+xml text/plain text/xsd text/xsl text/xml image/x-icon
    </IfModule>
</IfModule>
<FilesMatch "\.(css|js|htc|CSS|JS|HTC)$">
    FileETag None
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(html|htm|rtf|rtx|svg|svgz|txt|xsd|xsl|xml|HTML|HTM|RTF|RTX|SVG|SVGZ|TXT|XSD|XSL|XML)$">
    FileETag None
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
<FilesMatch "\.(asf|asx|wax|wmv|wmx|avi|bmp|class|divx|doc|docx|eot|exe|gif|gz|gzip|ico|jpg|jpeg|jpe|mdb|mid|midi|mov|qt|mp3|m4a|mp4|m4v|mpeg|mpg|mpe|mpp|otf|odb|odc|odf|odg|odp|ods|odt|ogg|pdf|png|pot|pps|ppt|pptx|ra|ram|svg|svgz|swf|tar|tif|tiff|ttf|ttc|wav|wma|wri|xla|xls|xlsx|xlt|xlw|zip|ASF|ASX|WAX|WMV|WMX|AVI|BMP|CLASS|DIVX|DOC|DOCX|EOT|EXE|GIF|GZ|GZIP|ICO|JPG|JPEG|JPE|MDB|MID|MIDI|MOV|QT|MP3|M4A|MP4|M4V|MPEG|MPG|MPE|MPP|OTF|ODB|ODC|ODF|ODG|ODP|ODS|ODT|OGG|PDF|PNG|POT|PPS|PPT|PPTX|RA|RAM|SVG|SVGZ|SWF|TAR|TIF|TIFF|TTF|TTC|WAV|WMA|WRI|XLA|XLS|XLSX|XLT|XLW|ZIP)$">
    FileETag None
    <IfModule mod_headers.c>
         Header set X-Powered-By "W3 Total Cache/0.9.2.4"
    </IfModule>
</FilesMatch>
# END W3TC Browser Cache

# BEGIN W3TC Page Cache core
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^(.*\/)?w3tc_rewrite_test$ $1?w3tc_rewrite_test=1 [L]
    RewriteCond %{HTTP:Accept-Encoding} gzip
    RewriteRule .* - [E=W3TC_ENC:_gzip]
    RewriteCond %{REQUEST_METHOD} !=POST
    RewriteCond %{QUERY_STRING} =""
    RewriteCond %{HTTP_HOST} =www.example.co.uk
    RewriteCond %{REQUEST_URI} !(\/wp-admin\/|\/xmlrpc.php|\/wp-(app|cron|login|register|mail)\.php|wp-.*\.php|index\.php) [NC,OR]
    RewriteCond %{REQUEST_URI} (wp-comments-popup\.php|wp-links-opml\.php|wp-locations\.php) [NC]
    RewriteCond %{HTTP_COOKIE} !(comment_author|wp-postpass|wordpress_\[a-f0-9\]\+|wordpress_logged_in) [NC]
    RewriteCond %{HTTP_USER_AGENT} !(W3\ Total\ Cache/0\.9\.2\.4) [NC]
    RewriteCond "%{DOCUMENT_ROOT}/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" -f
    RewriteRule .* "/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.html%{ENV:W3TC_ENC}" [L]
    RewriteCond %{REQUEST_METHOD} !=POST
    RewriteCond %{QUERY_STRING} =""
    RewriteCond %{HTTP_HOST} =www.example.co.uk
    RewriteCond %{REQUEST_URI} !(\/wp-admin\/|\/xmlrpc.php|\/wp-(app|cron|login|register|mail)\.php|wp-.*\.php|index\.php) [NC,OR]
    RewriteCond %{REQUEST_URI} (wp-comments-popup\.php|wp-links-opml\.php|wp-locations\.php) [NC]
    RewriteCond %{HTTP_COOKIE} !(comment_author|wp-postpass|wordpress_\[a-f0-9\]\+|wordpress_logged_in) [NC]
    RewriteCond %{HTTP_USER_AGENT} !(W3\ Total\ Cache/0\.9\.2\.4) [NC]
    RewriteCond "%{DOCUMENT_ROOT}/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.xml%{ENV:W3TC_ENC}" -f
    RewriteRule .* "/wp-content/w3tc/pgcache/%{REQUEST_URI}/_index%{ENV:W3TC_UA}%{ENV:W3TC_REF}%{ENV:W3TC_SSL}.xml%{ENV:W3TC_ENC}" [L]
</IfModule>
# END W3TC Page Cache core 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:21:06.043

首先，您收到的是哪个 404，我假设它是服务器定义的 404，它位于 wordpress 目录之外。如果是这种情况，请检查您的 .htaccess 是否有错误，例如错误位置的条件或拼写错误。当服务器检测到 .htaccess 有问题时，只要指定出现，它将默认为 404 not found 错误。

我的建议将其剥离到以下内容，看看是否返回站点，然后单步执行 .htaccess 以发现导致问题的行。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END Wordpress 
```

# linux - FoxIt Reader在Linux上的默认后备字体是什么

> ID：14157729
> 
> 赞同：1
> 
> 时间：2013-01-04T13:03:27.203
> 
> 标签：linux, pdf, foxit-reader

我正在制作 PDF，我不想在其中嵌入字体。

当我使用 Tahoma Foxit Reader 时，将它替换为 linux 上的一些默认字体。

这是什么字体？我应该使用什么字体以便福昕阅读器不必替换字体？

安装字体不是一个选项，因为客户端应该能够在 linux 上查看此 PDF 而无需安装一些字体和东西。由于 PDF 从 100KB 增长到 1000KB，因此无法嵌入整个字体，也无法嵌入字体子集，因为使用的组件不允许这样做。

我想知道这种字体，因为我使用 EASTERN_EUROPEAN 字符集作为 PDF 中的特殊字符，当字体被替换时，它会回退到一些默认字符集并且特殊字符是垃圾。所以我想如果我将字体设置为默认后备一个+我的字符集，应该没问题。

请有人告诉我福昕阅读器中使用的默认字体。谢谢

# ios - pdf包含未知字符

> ID：14157732
> 
> 赞同：1
> 
> 时间：2013-01-04T13:03:36.997
> 
> 标签：ios, ios5, pdf, ios6, pdf-generation

我在我的应用程序中生成了 PDF，iOS 6 中存在问题（**显示了一些不相关的字符**），当我生成 PDF 时，相同的代码适用于 iOS 5 和 iOS 4.3 的早期版本我无法了解如何解决，如果有人知道请解决问题，如果您需要任何代码片段，请发表评论。该问题在所示图片中进行了描述。![在此处输入图像描述](../Images/1e2225e65491b010743ac2820b8a40bb.png)

谢谢 。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T00:46:16.130

正如您对问题的评论中已经提到的那样，您的`headers`定义中实际上有不相关的字符：

![在此处输入图像描述](../Images/4fd67a757c9d99628322d0f71a231abc.png)

另一方面，当我在一小时前在手机上查看这些评论时，我看到了：

![在此处输入图像描述](../Images/a71e1200cfe2a0a4b254fba00f7288f4.png)

因此，您可能在代码中也看不到这些字符。我建议在您的代码中重新输入整个字符串“Price/Bag (in $)”和“Total Price (in $)”并再次编译。

# linux - 没有管理员权限，如何找到 ld 搜索的目录？

> ID：14157733
> 
> 赞同：1
> 
> 时间：2013-01-04T13:03:37.247
> 
> 标签：linux, gcc, static-libraries, gnu, ld

在没有管理员权限 的情况下，如何找到[GNU 链接器搜索的目录？](http://linux.die.net/man/1/ld)

* * *

我可以通过以下方式获取列表：

```
$ sudo ldconfig -v 2>/dev/null | grep -v ^$'\t'
/lib/i386-linux-gnu:
/usr/lib/i386-linux-gnu:
/usr/local/lib:
/lib/x86_64-linux-gnu:
/usr/lib/x86_64-linux-gnu:
/usr/lib/fglrx:
/usr/lib32/fglrx:
/lib32:
/usr/lib32:
/lib:
/usr/lib:
/usr/lib/i386-linux-gnu/sse2: (hwcap: 0x0000000004000000) 
```

此解决方案来自： [How to print the ld(linker) search path](https://stackoverflow.com/questions/9922949/how-to-print-the-ldlinker-search-path)

* * *

但是，在我没有管理员权限的机器上，这将不起作用。我认为这是因为 ldconfig 位于 /sbin/ 中。我下载了[glibc](http://ftp.gnu.org/gnu/glibc/)并将其安装在本地以创建另一个版本的 ldconfig。我想这很愚蠢，因为本地版本给了我：

```
/usr/local/lib:
/usr/local/lib64: 
```

是否仍然可以以非管理员身份获取所有目录？
似乎没有任何有用的 ld 标志或环境变量来完成这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:11:01.600

仅仅因为`ldconfig`在`sbin`并不意味着它不能作为普通用户运行。只需使用该命令并指定完整路径`ldconfig`：

```
/sbin/ldconfig -v 2>/dev/null | grep -v ^$'\t' 
```

# date - 我可以按日期范围过滤 Typo3 中的 TT_NEWS 吗？

> ID：14157734
> 
> 赞同：1
> 
> 时间：2013-01-04T13:03:38.373
> 
> 标签：date, range, typo3, tt-news

我正在构建一个带有 TT_NEWS 扩展名的 Typo3 网站；现在我想创建一个具有特定日期范围的 TT_NEWS 列表/最新视图，但我找不到这样做的方法。

我不能使用 ARCHIVE 函数，因为我需要一个特定的数据范围。

我希望你们中的一个人知道神奇的答案:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:48:34.350

您可以尝试使用 TypoScript 为存档设置确切的日期范围：

```
plugin.tt_news.amenuStart = 1.2.2003
plugin.tt_news.amenuEnd = 4.5.2006 
```

这是假设您只需要一个日期范围。对于多个范围，也许新闻类别可以解决问题，但您需要手动分配它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T12:47:02.557

对于 tx_news，在 TypoScript 中使用：

```
1.settings.timeRestriction = 01.02.2003
1.settings.timeRestrictionHigh = 04.05.2006 
```

# video - 使用 h.264 主要概念优化 Adob e Premiere CS4 中的静止图像？

> ID：14157739
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:04:15.623
> 
> 标签：video, adobe, adobe-premiere

当 .mp4 视频 (656x369px) 出来时，它看起来很完美，只有 .psd 场景（静止图像/图像）看起来很失真。短期内没有抗锯齿。

这也包括视频剪辑中的静止画。

在通过这个很棒的编解码器导出之前，Adobe Encoder 没有给我优化静止图像（稳定图像）的选项。

仅当导出纯高清视频（如 720p）而不单击任何内容时，此问题才会自动得到妥善处理。

任何想法如何调整这个？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T14:55:02.823

找到解决方案（如果有人要求同样的事情）..

当您在创建项目时选择在刚开始时开发 PAL 视频时会发生这种情况，但您实际上使用的是以方形像素 (1.0) 创建的图像，这实际上是 NTSC 标准显示。

将新项目创建为 NTSC 显示器（并再次设置为自定义分辨率，显示 1.0 平方像素）解决了此问题。

现在，当最后创建视频时，带有图像的场景非常清晰。

# android - 如何以编程方式更改由 LayoutInflater 创建的小部件的属性？

> ID：14157743
> 
> 赞同：0
> 
> 时间：2013-01-04T13:04:44.237
> 
> 标签：android, android-layout, android-linearlayout, layout-inflater

我想访问由 LayoutInflater 创建的小部件的子级，以更改其中的 TextView 显示的文本。我怎么能这样做？我做了一个图表来解释。

```
LinearLayout
--->LayoutInflater

    ---->LinearLayout
         ---->LinearLayout
              ---->TextView
              ---->TextView
    ---->LinearLayout
         ---->LinearLayout
              ---->TextView
              ---->TextView
    ---->LinearLayout
         ---->LinearLayout
              ---->TextView
              ---->TextView
etc 
```

我希望能够访问每个单独的 TextView 并更改它的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:08:38.493

`View`您可以访问 TextViews 并通过充气器返回来 更改它的属性。

我假设你有这样的事情：

```
View view = inflater.inflate(R.layout.my_layout, null); 
```

然后你可以像这样访问资源：

```
TextView text = (TextView)view.findViewById(R.id.textView1);
text.setText("Hello"); 
```

# android - 我真的需要将 com.facebook.Settings.publishInstallAsync() 方法添加到我的所有活动中吗？

> ID：14157745
> 
> 赞同：2
> 
> 时间：2013-01-04T13:04:45.183
> 
> 标签：android, facebook

我目前正在尝试使带有 facebook 的移动广告适用于我的 android 应用程序。我完成了所有必需的步骤，除了需要添加方法的步骤：

```
com.facebook.Settings.publishInstallAsync(); 
```

我在`onResume()`方法中的所有活动。我的问题是——我真的必须在我所有的活动中使用这种方法吗？如果是的话——为什么？我担心如果我这样做 - 我的应用程序运行速度会变慢。也许如果我只把它放在第一个 Launching 活动中，它仍然可以工作？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:52:44.600

顾名思义，该方法在不同的线程上运行，因此除非您的应用程序非常受资源限制，否则不应影响性能。它还将处理跟踪重复调用以防止报告多次安装，因此一旦报告首次安装，它就不会再次报告。

# c# - 实体框架 - System.StackOverflowException

> ID：14157748
> 
> 赞同：3
> 
> 时间：2013-01-04T13:04:55.467
> 
> 标签：c#, asp.net, entity-framework, stack-overflow

我是实体框架的新手，在尝试将新项目插入查找表时遇到了问题。

错误是 -

> `System.StackOverflowException` “ mscorlib.dll中出现未处理的类型异常”

它被抛出到下面`DIEMEntities()`调用 public 的最终代码块中。

每当我添加新项目时都会发生这种情况，我可以更新项目。

任何帮助，将不胜感激。

代码是 -

```
protected void OnSave(object sender, EventArgs e)
    {
        ArrayList validationErrors = new ArrayList();
        ContactTypeEO contactType = new ContactTypeEO();

        if (uxID.Value.Length > 0)
        {
            //Updating
            contactType.Id = int.Parse(uxID.Value);
        }

        contactType.Name = uxName.Text;
        contactType.ExpressionValidator = uxExpression.Text;

        contactType.Save(ref validationErrors);

        if (validationErrors.Count > 0)
        {
            ShowValidationMessages(validationErrors);
        }
        else
        {
            this.RefreshUI();
        }
    } 

public bool Save(ref ArrayList validationErrors)
    {
        ValidateSave(ref validationErrors);

        if (validationErrors.Count == 0)
        {
            if (Id == 0)
            {
                ContactTypeData.Insert(Name, ExpressionValidator);
            }
            else
            {
                ContactTypeData.Update(Id, Name, ExpressionValidator);
            }
            return true;
        }
        else
        {
            return false;
        }
    } 

/// <summary>
    /// Inserts the new Contact Type.
    /// </summary>
    /// <param name="name">The name.</param>
    /// <param name="validator">The validator.</param>
    public static void Insert(string name, string validator)
    {
        using (DIEMEntities diemEntities = new DIEMEntities())
        {
            Insert(name, validator);
        }
    }

    /// <summary>
    /// Inserts the new Contact Type.
    /// </summary>
    /// <param name="diemEntities">The DIEM Entities.</param>
    /// <param name="name">The name.</param>
    /// <param name="validator">The validator.</param>
    public static void Insert(DIEMEntities diemEntities, string name, string validator)
    {
        diemEntities.usp_ContactTypes_Insert(name, validator);
    } 

public partial class DIEMEntities : DbContext
{
    public DIEMEntities()
        : base("name=DIEMEntities")
    {
    }

... OTHER CODE} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T13:07:06.653

你在这里有一个递归循环：

```
public static void Insert(string name, string validator)
{
    using (DIEMEntities diemEntities = new DIEMEntities())
    {
        Insert(name, validator);
    }
} 
```

这将连续执行，直到内存不足。

我相信你的意图是这样做：

```
public static void Insert(string name, string validator)
{
    using (DIEMEntities diemEntities = new DIEMEntities())
    {
        Insert(diemEntities, name, validator);
    }
} 
```

# php - 未定义的变量和未定义的索引

> ID：14157750
> 
> 赞同：1
> 
> 时间：2013-01-04T13:04:58.760
> 
> 标签：php

**步骤.php**

```
<?php        
    function allowed_in($steps){        
    $steps = array('Text1.php', 'Text2.php', 'Text3.php');                
    $latestStep = $_SESSION['latestStep'];            
    }        
?> 
```

**文本1.php：**

```
<?php
   if(allowed_in($steps)){      
      //all code in the create_session.php             
   }
?> 
```

我正在尝试将 php 变量存储到会话变量并访问另一个页面中的函数，但出现以下错误：

> 注意：未定义变量：第 28 行中的步骤
> 注意：未定义索引：第 49 行中的最新步骤

我只需要询问如何解决这些错误。我需要一个`if(isset())`变量`$_SESSION`吗？

**更新：**

以下是完整代码：

```
 <?php

    function allowed_in($steps){

    $steps = array('create_session.php', 'QandATable.php', 'individualmarks.php', 'penalty.php', 'penaltymarks', 'complete.php');

    // Track $latestStep in either a session variable
    // $currentStep will be dependent upon the page you're on

    if(isset($_SESSION['latestStep'])){
   $latestStep = $_SESSION['latestStep'];
}
else{
   $latestStep = "";
}
    $currentStep = basename(__FILE__); 

    $currentIdx = array_search($currentStep, $steps);
    $latestIdx = array_search($latestStep, $steps);

    if ($currentIdx - $latestIdx > 1 ) {

       return 1;

    } else {

        return 0;

    }

    }

    ?>

    create_session.php:
    if(allowed_in($steps)){

    //all code in the create_session.php

    }else{
    ?>

    <div class="boxed">
      <a href="<?= $pages[$currentPages+1] ?>">Continue</a>
    <br/>
    <a href="create_session.php" id="createLink">Create New</a>
    </div>

    <?php   

    }

    ?> 
```

我试图遵循的伪代码：

```
function allowed_in($pased_vars){

//your code

if($foo){
    return 1;
}else{
    return 0;
}

}

on included pages
<?php
//include file with code

if(allowed_in($vars)){
//allowed
}else{
//not
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:11:30.790

您有一个用作 as 的未定义变量`$steps`和一个用作 的未定义数组索引`$_SESSION['latestStep']`。

还有这个：

```
function allowed_in($steps) {
    $steps = array('Text1.php', 'Text2.php', 'Text3.php'); 
```

没有任何意义。您希望将一个变量`$steps`作为参数传递给函数，然后立即在函数范围内替换他的值？为什么要这么做？只是不要期望函数有任何参数并`$steps`在其中定义。

要解决索引问题，您可以使用`isset()`并处理未设置会话变量的情况：

```
if (!isset($_SESSION['latestStep'])) { /* what if not set? */ } 
```

并记住`session_start()`在尝试访问`$_SESSION`变量之前始终使用。

对于未定义的变量错误：

```
<?php
   if(allowed_in($steps)){      
      //all code in the create_session.php             
   }
?> 
```

表示`$steps`未定义。`$steps = ...`在将其作为参数传递给函数之前，我看不到您定义的任何地方`allowed_in`。那就是问题所在。

我建议您简单地定义`allowed_in`为`function allowed_in()`并将上面的代码称为：

```
if (allowed_in()) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:10:07.513

你想做什么？检查这些： -

1）首先，您没有向页面返回任何内容。那么如何检查条件？

2）您是否将该页面包含在另一个页面中？

3) 检查你在哪里定义了会话变量 $_SESSION['latestStep']

4) 检查是否启动了会话 session_start()。

5) 您在steps.php 中定义$steps 数组。那么你从 text1.php 传递给函数 allowed_in 的内容是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:12:00.523

采用`isset`

你可以这样做：

```
if(isset($_SESSION['latestStep'])){
   $latestStep = $_SESSION['latestStep'];
}
else{
   $latestStep = "";
} 
```

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

# java - 用于表单元素的 GWT 等效于 jQuery change()

> ID：14157751
> 
> 赞同：0
> 
> 时间：2013-01-04T13:05:00.393
> 
> 标签：java, jquery, gwt

谁能告诉我在 GWT`change`中是否有类似 jQuery 的等效方法，用于单选按钮、复选框等表单元素，在选中或取消选中任何此类按钮时触发该方法？如果是这样，我该如何使用它？我`addValueChangeHandler`在 Google 文档中找到了类似的方法，但除了提供原型之外，没有工作示例。

具体来说，如果我想要一个处理程序，它将等待复选框被选中或取消选中，并相应地弹出一个警报，如**A checkbox has been checked!** !，以及伴随文本的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:10:28.510

```
CheckBox newOption = new CheckBox();
newOption.setText("Check to see alert");
newOption.addValueChangeHandler(new ValueChangeHandler<Boolean>() {

    @Override
    public void onValueChange(ValueChangeEvent<Boolean> event) {
        if (event.getValue()) {
            Window.alert("Checkbox is checked!");
        } else {
            Window.alert("Checkbox is unchecked!");
        }
    }

}); 
```

# c# - StreamSocket DataReader ReadToEnd 扩展方法

> ID：14157754
> 
> 赞同：0
> 
> 时间：2013-01-04T13:05:12.253
> 
> 标签：c#, .net, windows-8, windows-runtime, .net-4.5

我想在类上实现一个名为 ReadToEnd 的扩展方法`Windows.Storage.Streams.DataReader`。这应该基本上读取流上的所有可用数据，如 System.IO.StreamReader。

尝试尽可能轻松地移植我的不兼容 WinRT 代码。

我不确定如何实现这一目标，或者是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:26:44.283

设法写了一些东西，给了我我需要的东西。

```
internal static string ReadLine(this DataReader stream, ref int maxLength, Encoding encoding, char? termChar)
{
    var maxLengthSpecified = maxLength > 0;
    int i;
    byte b = 0, b0;
    var read = false;
    using (var mem = new MemoryStream())
    {
        while (true)
        {
            b0 = b;
            i = stream.ReadByte();
            if (i == -1) break;
            else read = true;

            b = (byte)i;
            if (maxLengthSpecified) maxLength--;

            if (maxLengthSpecified && mem.Length == 1 && b == termChar && b0 == termChar)
            {
                maxLength++;
                continue;
            }

            if (b == 10 || b == 13)
            {
                if (mem.Length == 0 && b == 10)
                {
                    continue;
                }
                else break;
            }

            mem.WriteByte(b);
            if (maxLengthSpecified && maxLength == 0)
                break;
        }

        if (mem.Length == 0 && !read) return null;
        return encoding.GetString(mem.ToArray(), 0, (int)mem.Length);
    }
} 
```

# asp.net-mvc - Ajax.ActionLink 调用控制器时 ViewModel 不存储值

> ID：14157757
> 
> 赞同：0
> 
> 时间：2013-01-04T13:05:30.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-ajax

当我单击 ActionLink 并在控制器中设置 ViewModel 值时，我可以看到渲染视图时的变化。但是当我第二次单击 ActionLink 时，相同的值会作为 null 进入 Controller。

如何存储值，使其进入控制器？

看法：

```
 @Ajax.ActionLink("Click me", "AjaxTest", "Controller", new AjaxOptions() 
 { 
    UpdateTargetId = "updatePanel", 
    HttpMethod = "POST",
    OnSuccess = "A()" 
 })

<div id="updatePanel">
  @Html.Partial("~/Views/Shared/_UpdatableContent.cshtml", this.Model)
</div> 
```

控制器：

```
[HttpPost]
public ActionResult AjaxTest(MyViewModel model)
{
    model.A = "A"
    return PartialView("_UpdatableContent", model);
} 
```

部分视图_UpdatableContent：

```
@Html.HiddenFor(x => x.A)

@if (Model.A == "A")
{ 
    //Draw
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:18:29.717

尝试将**this.Model**添加到您的 ActionLink 中：

```
@Ajax.ActionLink("Click me", "AjaxTest", "Controller", this.Model, new AjaxOptions() { UpdateTargetId = "updatePanel" }) 
```

此方法将模型传回请求中，这**应该**允许更新发生。

可能我对 ASP.NET MVC 最大的抱怨是，各种“Helper”函数被重载到第 n 度，并且在参数出现的顺序方面并不总是一致......

希望有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T22:14:25.763

我遇到了同样的问题。`HttpMethod = "Post"`为我设置`AjaxOptions`修复它，谢谢 Sergejs。

我的最终工作代码如下

```
@{
    AjaxOptions ajaxOptions = new AjaxOptions
    {
        HttpMethod = "Post",
        LoadingElementId = "product-adding-" +@Model.Product.Id,
        LoadingElementDuration = 100,
        OnSuccess = "AddedToCart"
    };
}
<div>
    @Ajax.ActionLink("Add to cart",
        "AddToCart",
        "Cart",
        new { id = Model.Product.Id, returnUrl = Request.Url.PathAndQuery },
        ajaxOptions,
        new { @class = "button" })
<img id="product-adding-@Model.Product.Id" src="~/Images/ajax_loader.gif" />
</div> 
```

# asp.net-mvc-3 - 如何以更好的方式编写此 LINQ 查询

> ID：14157769
> 
> 赞同：3
> 
> 时间：2013-01-04T13:06:39.773
> 
> 标签：asp.net-mvc-3, linq, c#-4.0

我有一个 Linq 查询。当我运行查询时，只有 10 条记录需要 13 秒才能将数据提取到模型中。我需要知道我写的查询是否对性能有好处。请指导我做错了什么。

**代码**

```
 var stocktakelist = (from a in Db.Stocktakes
                             select new ExportStock
                                 {
                                     Id = a.Id,
                                     ItemNo = a.ItemNo,
                                     AdminId = (from admin in Db.AdminAccounts where admin.Id == a.Id select admin.Name).FirstOrDefault(),
                                     CreatedOn = a.CreatedOn,
                                     Status = (from items in Db.Items where items.ItemNo == a.ItemNo select items.ItemStatu.Description).FirstOrDefault(),
                                     Title = (from tit in Db.BibContents where tit.BibId == (from bibs in Db.Items where bibs.ItemNo == a.ItemNo select bibs.BibId).FirstOrDefault() && tit.TagNo == "245" && tit.Sfld == "a" select tit.Value).FirstOrDefault()   // This line of Query only makes the performance Issue
                                 }
            ).ToList(); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:20:03.577

之所以这么慢，是因为它为外部 LINQ 语句中的**每个**项目运行 3 个内部 LINQ 语句。使用 LINQ 连接将只运行 4 个查询，然后将它们链接在一起，这样更快。

要了解如何加入，Internet 上有大量资源，具体取决于您使用的 LINQ 类型。

如果您从 SQL 服务器检索这些数据，或许可以考虑在 SQL 中进行这项密集工作——这就是 SQL 的设计目的，它比 .NET 快得多。**编辑：**如下所示，如果使用 LINQ to SQL/Entities 并使用正确的连接语法，则工作*是在 SQL 中完成的。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:30:53.170

正如其他人所说，您应该在 LINQ 中使用[左外连接](http://msdn.microsoft.com/en-us/library/vstudio/bb397895.aspx)，就像在 SQL 中编写它一样。

转换后，您上面的查询最终看起来大致像这样（未经测试，但给出了基本想法）：

```
var a = from a in Db.Stocktakes
    join admin in Db.AdminAccounts on admin.Id equals a.Id into tmpAdmin
    from ad in tmpAdmin.DefaultIfEmpty()
    join item in Db.Items on item.ItemNo equals a.ItemNo into tmpItem

    from it in tmpItem.DefaultIfEmpty()
    join title in Db.BibContents on bib.BibId equals items.BibId into tmpTitle

    from ti in tmpTitle.DefaultIfEmpty()
    where ti.TagNo == "245" 
        && ti.Sfld == "a"
    select new ExportStock
    {
        Id = a.Id,
        ItemNo = a.ItemNo,
        AdminId = ad == null ? default(int?) : ad.Id,
        CreatedOn = a.CreatedOn,
        Status = it == null ? default(string) : it.ItemStatus.Description,
        Title = ti == null ? default(string) : ti.Value
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T13:33:42.537

我试图用一些连接来创建相应的查询以供练习。我无法对其进行测试，也不能 100% 确定此查询是否会得到您希望的结果，但也许至少它会提示您如何使用 linq 编写联接。

```
from a in Db.Stocktakes

join admin in Db.AdminAccounts
  on a.Id equals admin.Id
into adminJoinData
from adminJoinRecord in adminJoinData.DefaultIfEmpty( )

join items in Db.Items
  on a.ItemNo equals items.ItemNo
into itemsJoinData
from itemsJoinRecord in itemsJoinData.DefaultIfEmpty( )

join title in Db.BibContents
   (
       from subQuery in Db.BibContents
       where subQuery.TagNo == "245"
       where subQuery.Sfld == "a"
       select subquery
   )
  on title.BibId equals itemsJoinRecord.BidId
into titleJoinData
from titleJoinRecord in titleJoinData.DefaultIfEmpty( )

select new ExportStock( )
{
    Id = a.Id,
    ItemNo = a.ItemNo,
    AdminId = adminJoinRecord.Name,
    CreatedOn = a.CreatedOn,
    Status = itemsJoinRecord.ImemStatu.Description,
    Title = titleJoinRecord.Value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T13:51:32.620

使用 lambda 表达式，您的查询将如下所示：

```
 Db.Stocktakes
            .Join(Db.AdminAccounts, a => a.Id, b => b.Id, (a,b) => new { a, AdminId = b.Name })
            .Join(Db.Items, a => a.ItemNo, b => b.ItemNo, (a,b) => new { a, Status = b.ItemStatus.Description, BidId = b.BibId })
            .Join(Db.BibContents, a => a.BibId, b => b.BibId, (a,b) => new { a, Value = b.Value, TagNo = b.TagNo, Sfld = b.Sfld })
            .Where(a => a.TagNo == "245" && a.Sfld == "a")
            .Select(a => 
                new ExportStock { Id = a.Id, 
                                  ItemNo = a.ItemNo,
                                  AdminId = a.AdminId,
                                  CreatedOn = a.CreatedOn,
                                  Status = a.Status,
                                  Title = a.Value
                }
            ).ToList(); 
```

# responsive-design - 使用 Foundation 调整网格中列的大小

> ID：14157780
> 
> 赞同：0
> 
> 时间：2013-01-04T13:07:26.713
> 
> 标签：responsive-design, zurb-foundation

我一直在使用 Zurb Foundation 来评估它是否适合我的下一个项目。在调整浏览器的宽度时，我偶然发现了一个我不喜欢的特性，所以我想确认是否有任何方法可以做到这一点。

假设我有一个网格，每行有四个图像（“列”）。当我缩小浏览器窗口的宽度时，我的自然期望是图像的数量会缩小到前三个，然后是两个，最后是每行一个图像，因为宽度减小了。

但是Foundation似乎做的是尽可能地缩小div以保持每行四列，并且由于空间不足而无法容纳四列，因此它直接跳到每行一张图像。

这种行为对我来说是不合逻辑的，所以我认为必须有办法做到这一点，但是通过[http://foundation.zurb.com/docs/grid.php](http://foundation.zurb.com/docs/grid.php)我也找不到办法做到这一点使用 div 或块网格。

我有点假设这将是响应式网格的 101 个功能，但我对这些 css 框架没有太多经验。那么我是否必须开始编写自己的媒体查询来实现每行列数的逐渐减少？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T20:09:21.150

我也遇到了同样的问题，这就是我找到这个条目的方式。我知道这已经得到解答并解决了，但我只想分享我的答案。块网格对我有用。[http://foundation.zurb.com/docs/components/block_grid.html](http://foundation.zurb.com/docs/components/block_grid.html) 查看高级部分

在我的 HTML 中，我只是添加了类来指定在不同屏幕尺寸上每行需要多少个项目，如下所示：

```
<ul class="row portfolio small-block-grid-1 medium-block-grid-2 large-block-grid-3">
    <li>
        <img src="images/sample1.jpg" width="640" height="480">
    </li>
    <li>
      ...
    </li>
</ul> 
```

在这里，我希望每行在小型设备中显示 1 个项目，在中型设备中显示 2 个项目，在大型设备中显示 3 个项目。我在 _app.scss 中启用了“基础/组件/块网格”。它奏效了！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:50:40.323

Foundation 不会强制内容响应或流动，但网格本身就是。它会向下流动到 12 列网格塌陷到移动网格的某个点。（假设默认网格设置）

但是，您可以通过简单地使所有图像在列内浮动来获得您正在寻找的行为。

像：

```
img {float:left; width:24%;} 
```

然后尝试添加最小和最大宽度以满足您的需求。

```
img {float:left; width:24%; min-width:100px; max-width:300px;} 
```

# objective-c - 我们可以邀请人们使用我们的应用程序或通过 iOS 5 中的 Facebook 从应用程序发送好友请求吗？

> ID：14157784
> 
> 赞同：14
> 
> 时间：2013-01-04T13:07:37.400
> 
> 标签：objective-c, facebook, facebook-graph-api, ios5

假设**X**和**Y**是**Facebook**中的朋友，并且他们都在各自的手机中安装了应用程序。**但在该应用的好友列表**中，他们并不是彼此的好友。那么现在，**X** 是否可以从应用本身向**Y*****发送好友请求***，以便他们成为应用好友列表中的好友？

 **同样在另一种情况下，**X**在他的手机中安装了这个应用程序，而**Y**没有。再说一遍，**X可以** ***邀请*** **Y**使用该应用程序吗？

它通过人们在 Facebook 中注册的**电子邮件 ID**来跟踪他们。所以，**找朋友**是搜索“**已经应用的用户**”，他们不在应用的好友列表中，但在facebook上是好友，邀请好友是在**邀请非**应用的用户在Facebook上的好友。

我的问题是，这在**iOS5**中是否可行，即。不使用仅在**iOS6中引入的****Facebook sdk**？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:15:19.187

使用[Facebook-sdk 3.1](https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/)

当应用程序允许用户选择一个或多个朋友来发送请求时，就会启动用户生成的请求。

我们将引导您完成发送邀请或请求的步骤：

*   发送邀请或请求时触发
*   发送请求
*   随请求发送附加数据，例如虚拟礼物

您可以将您的应用设置为在用户使用该应用一定次数后提示用户发送邀请。您还应该让用户能够随时通过使用他们可以随时访问的菜单按钮来邀请朋友使用该应用程序。在这一步中，我们将向您展示一种触发邀请请求的简单方法。

有关不同类型的编码逻辑，请参阅[https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/#protip2](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/#protip2)。

也可以看看：

1.  [如何从 iOS 应用程序发送添加好友请求（给 facebook 用户）？](https://stackoverflow.com/questions/11521580/how-to-send-add-friend-request-to-facebook-user-from-ios-application)
2.  [可以从我自己的应用程序发送 Facebook 好友请求吗？](https://stackoverflow.com/questions/8360882/can-a-facebook-friend-request-be-sent-from-my-own-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T06:14:43.563

确保您的 facebook 应用程序 ID 在开发人员页面和 xcode 中的信息下相同，启用沙盒模式，并且必须在开发人员页面中填写画布 url [在 facebook 类别的应用程序下]。

```
NSString *facebookID = @"Your friend facebook id";
    NSMutableDictionary* params =
    [NSMutableDictionary dictionaryWithObject:facebookID forKey:@"to"];

    NSString *message = @"SOME_MESSAGE";
    NSString *title = @"TITLE";

    [FBWebDialogs presentRequestsDialogModallyWithSession:nil
                  message:message
                title:title
                parameters:params handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                        if (error)
                    {
                    // Case A: Error launching the dialog or sending request.
                        NSLog(@"Error sending request.");
                    }
                    else
                    {
                        if (result == FBWebDialogResultDialogNotCompleted)
                    {
                    // Case B: User clicked the "x" icon
                        NSLog(@"User canceled request.");
                    }
                    else
                    {
                        NSLog(@"Request Sent. %@", params);
                    }
        }}]; 
```****

# iphone - 来自 geocodeAddressString 的无法识别的选择器错误处理结果

> ID：14157785
> 
> 赞同：1
> 
> 时间：2013-01-04T13:07:43.383
> 
> 标签：iphone, ios, clgeocoder, mkmapitem

我正在尝试使用`MKMapItem`不使用坐标来创建多个地标。

我直接使用了位置名称，`geocodeAdressString:@"Mumbai"...`但我得到了单个位置的结果。

当我通过数组使用多个位置时，我收到了这个错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayI 长度]：无法识别的选择器发送到实例 0xab48380”

为什么会出现这个问题？

```
Class mapItemClass=[MKMapItem class];
if(mapItemClass &&[mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
{
NSArray *addr=[[NSArray alloc ]initWithObjects:@"Banglore",@"Mumbai",@"Delhi", nil];

    CLGeocoder *geocoder=[[CLGeocoder alloc]init];
    [geocoder geocodeAddressString:addr completionHandler:^(NSArray *placemarks, NSError *error) {
        CLPlacemark *geocodedPlacemark=[placemarks objectAtIndex:0];
        MKPlacemark *placemark=[[MKPlacemark alloc]initWithCoordinate:geocodedPlacemark.location.coordinate addressDictionary:geocodedPlacemark.addressDictionary];
        MKMapItem *mapItem=[[MKMapItem alloc]initWithPlacemark:placemark];
        [mapItem setName:geocodedPlacemark.name];

        [MKMapItem openMapsWithItems:@[mapItem] launchOptions:nil];

    }];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:15:46.333

`-[__NSArrayI length]: unrecognized selector sent to instance 0xab48380'` NSArray 没有属性长度的错误状态。所以找不到长度的选择器。因此，请检查您在哪里使用 NSArray 并保留断点以查找发生错误的位置。length 是的方法，`NSString`但是`NSData`NSArray 没有长度，它有计数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:18:09.907

我已经能够使用此代码复制它

```
id array = [[NSArray alloc] initWithObjects:@"Hello", @"World", nil];
NSLog(@"%d",[array length]); 
```

输出

```
-[__NSArrayI length]: unrecognized selector sent to instance 0x96bafe0 
```

注意我是如何使用`id`而不是`NSArray`使用的，`id`我可以调用`length`这是不允许的`NSArray`，但是在使用时会绕过编译器`id`。所以找出哪里出错的最好方法是添加一个异常来捕获所有异常。通过在项目导航器中选择异常选项卡来执行此操作风>>选择'+'>>'添加异常断点...'>>然后只需选择完成。这将在您的应用程序每次抛出异常时设置一个断点。

**编辑**

感谢您添加的代码，我怀疑您正在传递一个`NSArray`应该有`NSString`. 你创造

```
 NSArray *addr=[[NSArray alloc ]initWithObjects:@"Banglore",@"Mumbai",@"Delhi", nil]; 
```

然后将其传递给`geocodeAddressString:addr`

```
 [geocoder geocodeAddressString:addr completionHandler:^(NSArray *placemarks, NSError *error) { 
```

仅从这个参数的名称来看，我怀疑它应该是一个`NSString`而不是`NSArray`尝试将 addr 替换`[addr objectAtIndex:0]`为此将在 addr 数组的索引 0 处获得字符串对象。

**编辑 2**

这是您调用的方法，请注意它只允许`NSString`为 geocodeAddressString 传递一个。

```
 - (void)geocodeAddressString:(NSString *)addressString completionHandler:(CLGeocodeCompletionHandler)completionHandler; 
```

# javascript - 在 Javascript 中调度大量额外事件的效率如何？

> ID：14157786
> 
> 赞同：1
> 
> 时间：2013-01-04T13:07:53.730
> 
> 标签：javascript, html, events, touch, dom-events

我正在构建一个扩展标准 JS 输入事件的库。

这意味着在 ARM 设备的浏览器中以输入采样率 (60Hz) 触发大量的多次触摸事件。

我看过[这个 jsperf](http://jsperf.com/cross-browser-event/2)，它在我的 1.7Ghz Sandy Bridge i5 上产生了大约 250,000 次操作/秒，我很快就会在那里测试我的 iPhone5 和 Nexus7。

我的问题是是否会快速处理未收听的事件？

如果我知道事件没有被收听，还有没有办法跳过生成事件的处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:37:36.357

我认为 jsperf 在调度和处理事件时会搅浑水，因为每次测试循环迭代都会添加和删除事件侦听器。听起来您的用例调度和处理事件的频率很高，但对添加和删除事件处理程序的要求相对较低。

我整理了[一个 jsperf](http://jsperf.com/native-event-lifecycle)，它专注于用自定义事件包装原生事件，然后分发自定义事件。测试场景基于：

*   是否存在自定义事件的侦听器
*   与自定义事件关联的数据的立即初始化与延迟初始化
*   处理“轻”与“重”初始化需求时上述因素的影响

为了测试“重”与“轻”初始化需求，每个自定义事件都会创建一个包含 10 或 1000 个随机数的数组。

关于自定义事件数据的延迟初始化：

*   当听众在场时，惰性初始化事件通常会慢一些。对于“轻”数据，它有时低至立即启动事件的速度的 0.8 倍。
*   如果没有侦听器，对于“轻”和“重”数据，延迟初始化的数据通常更快。对于“重”数据，它通常快 2 到 10 倍。

> 我的问题是是否会快速处理未收听的事件？

在我所看到的一切中，未侦听事件的处理速度总是比具有关联处理程序的事件快。但是，我认为只有在事件处理程序本身相当缓慢且成本高昂的情况下，这才会产生很大的影响。此外，创建自定义事件的成本越高，如果以任何一种方式创建自定义事件，这将变得越不重要。

> 如果我知道事件没有被收听，还有没有办法跳过生成事件的处理？

想到两件事：

*   将事件是否被侦听的知识暴露给生成和调度事件的进程，然后让该进程在它不知道没有侦听的情况下跳过创建事件。

*   听起来生成自定义事件的代码会在某个时候或另一个地方侦听本机事件，然后根据本机事件创建自定义事件。在这种情况下，您可以在添加自定义事件的事件侦听器之前忽略本机事件，然后在删除自定义事件的所有侦听器后再次忽略本机事件。

# javascript - 在另一个图像上生成一个图像，给出一个坐标

> ID：14157790
> 
> 赞同：2
> 
> 时间：2013-01-04T13:08:05.540
> 
> 标签：javascript, html, css, xhtml

我有一些图像坐标，我想用它们在带有 javascript 的图像上放置一个小图像。这可以用javascript完成还是我需要创建div并修改它的css属性？顺便说一句：图像可以放在页面上的任何位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:18:04.107

这是一个完整的工作代码：[Live Demo](http://jsfiddle.net/yChyj/2/)

**CSS**

```
.overlays{
    position:absolute;
} 
```

**JS**

```
function showImage() {
    // myImage : ID of image on which to place new image

    var image = document.getElementById('myImage');

    console.log(image.width);

    margin = 20;

    l = image.offsetLeft;
    t = image.offsetTop;
    w = image.width;
    h = image.height;

    // Location inside the image
    offX = parseInt(Math.random() * w);
    offY = parseInt(Math.random() * h);

    if(offX > margin) offX -= margin;
    if(offY > margin) offY -= margin;

    l += offX;
    t += offY;

    var newImage = document.createElement("img");
    newImage.setAttribute('src', '1.jpg');
    newImage.setAttribute('class', 'overlays');
    newImage.style.left = l + "px";
    newImage.style.top = t + "px";
    document.body.appendChild(newImage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:20:12.627

试试这个把新图像放在`(X,Y)`父图像的坐标上：

```
var newImg = document.getElementById('newImg'), // your new (small) image
    img = document.getElementById('parentImg'); // parent image
document.body.insertBefore(newImg, img); // Insert the new image before the image
document.body.insertBefore(img, newImg); // Then switch places (So the small image is after the big one in the DOM)

newImg.style.position = 'relative';
newImg.style.left = X + "px";
newImg.style.top = (Y - img.height)+"px"; // Substract the height of the source image to get the position relative to the top left. 
```

双重`insertBefore`是在投标后插入新图像，首先将其插入大图像之前，然后将大图像移动到它前面。
然后，只需设置新图像相对于大图像的坐标即可。

**[工作示例](http://jsfiddle.net/Q5rBP/3/)**（设置为在 2 秒后显示覆盖以显示差异）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:11:36.423

CSS：

```
#yourId{
    position: absolute;
} 
```

js：

```
var img = document.getElementById('yourId'), // or any other selector
    x = x, // your data
    y = y; // your data
img.style.left = x+"px";
img.style.top = y+"px"; 
```

# jsf - JSF2 facelets 和 mvc

> ID：14157806
> 
> 赞同：0
> 
> 时间：2013-01-04T13:09:20.923
> 
> 标签：jsf, jsf-2

我正在尝试在我的 JSF2 facelets web 应用程序中使用 mvc。

这是我的登录控制器：

```
@ManagedBean
@ApplicationScoped
public class LoginControllerImpl implements LoginController{

    @ManagedProperty(value = "#{applicationBean}") 
    private ApplicationBean applicationBean;

    @Override
    public boolean checkLogin(String username, String password) {
        Store store = applicationBean.getStore(); //my model and my data are in this object

      try {
            store.checkLogin(username, password);
            return true;
        } catch (LoginException ex) {
            return false;
        }

    }

} 
```

这是我的登录Bean：

```
@ManagedBean
@SessionScoped
public class LoginBean implements Serializable{

    @ManagedProperty(value="#{loginController}")
    private LoginController loginController;
   private String username;
    private String password;

    public void checkLogin(){
        loginController.checkLogin(username, password);
    }          
} 
```

现在我想在 checklogin 为真时将用户重定向到欢迎页面。有什么想法/提示我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:12:32.877

您可以使用`implicit navigation`，只需返回您要访问的页面（相对于当前 URL）

```
@ManagedBean
@SessionScoped
public class LoginBean implements Serializable{

  @ManagedProperty(value="#{loginController}")
  private LoginController loginController;
  private String username;
  private String password;

  public String checkLogin(){
    if (loginController.checkLogin(username, password)) {
      return "welcome.xhtml";
    }
    return null; // won't change page
  }          
} 
```

# zend-framework - 在zend中加密url

> ID：14157809
> 
> 赞同：0
> 
> 时间：2013-01-04T13:09:26.607
> 
> 标签：zend-framework

在我的 zend 项目中，我通过 url 将参数传递给我的控制器。由于它们出现在 HTML 代码中，因此很容易弄清楚我传递了什么值以及用于什么目的。虽然我可以使用路由器来更改 url，但值仍然会显示在 HTML 脚本中。我想从安全角度加密我所有的 URL。我无法理解如何使用 Zend 加密来加密和解密 URL。如果有人可以帮助我测试相同的示例代码，而不仅仅是伪代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:47:19.357

您可以为参数值实施加密/解密技术。
这是一个[简单的 PHP 多路加密方法](https://stackoverflow.com/questions/10536664/looking-for-simple-php-multi-way-encryption-method)
你甚至可以加密获取参数。但它可以是一个 PITA，并且 url 看起来很糟糕。但我不认为你可以加密`module/controller/action`url 中的部分。

# macos - Python解释器代码完成

> ID：14157810
> 
> 赞同：0
> 
> 时间：2013-01-04T13:09:28.203
> 
> 标签：macos, unix, code-completion, python

> **可能重复：**
> [如何将制表符补全添加到 Python shell？](https://stackoverflow.com/questions/246725/how-do-i-add-tab-completion-to-the-python-shell)

有没有一种简单的方法可以将代码完成功能添加到在 unix 控制台上启动的 Python 解释器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:12:19.340

`ipython`你真的应该安装类似的东西`bpython`

```
pip install ipython 
```

这将为您提供更好的 Python 解释器，提供代码完成、历史记录和其他神奇功能，让您的 Python 体验更好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:12:39.887

尝试使用[ipython](http://ipython.org/)，其中包括向解释器添加一个包含代码完成的 shell。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:14:06.047

是的！看看[bpython](http://bpython-interpreter.org/)！

您应该可以使用 pip 安装它。实际上，我在我的 Linux 发行版中将它作为一个包。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-04T13:12:28.683

不，那是不可能的，您需要使用 IDE。

# google-apps-script - 从域管理员帐户安装和运行 Google Apps 脚本

> ID：14157811
> 
> 赞同：0
> 
> 时间：2013-01-04T13:09:33.557
> 
> 标签：google-apps-script

是否可以作为域管理员为域内的所有用户安装和运行我的 Google 应用程序脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:35:36.427

不，不是。无论如何，AFAIK。

您可以做的是，在大多数 Google API 上，使用 Apps 脚本`UrlFetch`而不是内置服务，如果您从域管理员帐户运行，您可以[模拟用户。](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

# java - 无法使按钮引用android中的另一个活动

> ID：14157812
> 
> 赞同：1
> 
> 时间：2013-01-04T13:09:35.470
> 
> 标签：java, android, button

我希望按钮在单击时显示一些文本。当我们单击“公式”按钮时，手机中应该会打开一个新的空白页面，显示活动的布局。这是我的代码

**MainActivity.java**

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "";

    // ....

    public void sendMessage(View view) {
    Intent intent = new Intent(MainActivity.this, FormulaActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
     // Do something in response to button
    startActivity(intent); 
```

**公式活动.java**

```
public class FormulaActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);
    } 
```

**MainActivity.xml**（按钮编码）

```
<Button
    android:id="@+id/formula"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="sendMessage"
    android:text="Formula" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:20:30.083

你只需要在你的内部初始化`Button`和`EditText``MainActivity.java`

`XML Layout File`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" >

<EditText 
    android:id="@+id/edit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    />

   <Button 
    android:id="@+id/formula"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Formula"
    android:gravity="bottom"
    /> 
```

```
 public class MainActivity extends Activity
 {
   public void onCreate(Bundle savedInstanceState)
   {
     super.onCreate(savedInstanceState);
     Button F=(Button)findViewById(R.id.formula);
     EditText editText = (EditText) findViewById(R.id.edit);

      F.setOnClickListener(new View.onClickListener()
       {
          public void onClick()
          {
            sendMessage(); 
          }
       }

    }

    public void sendMessage() 
      {
      String message = editText.getText().toString();
      Intent intent = new Intent(MainActivity.this, FormulaActivity.class);
      intent.putExtra("EXTRA_MESSAGE", message);       
      startActivity(intent);
      }
  } 
```

* * *

```
public class FormulaActivity extends Activity 
{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    String message = intent.getStringExtra("EXTRA_MESSAGE");

    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    // Set the text view as the activity layout
    setContentView(textView);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:21:21.987

您的

```
public final static String EXTRA_MESSAGE = "";
```

是空字符串。尝试将其更改为任何有值的字符串。

希望这会帮助你。

# c# - 虚拟扫描仪 (TWAIN) 在 C# (WPF) 中不起作用

> ID：14157815
> 
> 赞同：1
> 
> 时间：2013-01-04T13:09:41.933
> 
> 标签：c#, driver, scanning, twain, twaindotnet

它是关于 TWAINdotNet 库的。我花了过去 24 小时尝试在 C#/WPF/VS2010 中进行基本的虚拟扫描仪实验。我已经从[http://sourceforge.net/projects/twain-samples/files/](http://sourceforge.net/projects/twain-samples/files/)下载并安装了虚拟扫描仪驱动程序，它在可用的 TWAIN 数据源列表中显示得很好。有趣的是，此页面上提供的示例应用程序也可以与此驱动程序完美配合。仅当我尝试通过 C#/WPF 使用它时才会出现此问题。

具体来说，调用`DsUserInterface`using`Message.EnableDS`失败，天知道是什么原因。无论我是否要求它显示 UI，它在所有情况下都会失败。同样`DsImageLayout`，在尝试设置扫描区域时调用也会导致失败。最后但并非最不重要的一点是，尝试将测量单位设置为英寸（或其他）也不会生效。调用不会失败，但之前的值保持不变。

这是代码，以防我可能做错了什么：

```
public partial class MainWindow : Window
{
    TwainDotNet.Wpf.WpfWindowMessageHook mTwnHook;
    TwainDotNet.Twain mTWN;
    TwainDotNet.ScanSettings setting = new TwainDotNet.ScanSettings();

    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnScan_Click(object sender, RoutedEventArgs e)
    {
        InitializeTWAIN();

        mTWN.ScanningComplete += twn_ScanningComplete;
        mTWN.TransferImage += twn_TransferImage;

        mTWN.StartScanning(setting);            
    }

    private void InitializeTWAIN()
    {
        mTwnHook = new TwainDotNet.Wpf.WpfWindowMessageHook(this);
        mTWN = new TwainDotNet.Twain(mTwnHook);

        setting.UseAutoFeeder = true;
        setting.UseDocumentFeeder = true;
        setting.UseDuplex = true;
        setting.TransferCount = 1;

        setting.Page = new TwainDotNet.PageSettings() 
        { 
                    Orientation = TwainDotNet.TwainNative.Orientation.Auto, 
                    Size = TwainDotNet.TwainNative.PageType.UsLetter 
        };

        setting.Area = new TwainDotNet.AreaSettings(TwainDotNet.TwainNative.Units.Millimeters, 0f, 0f, 279.4f, 215.9f);
        setting.Resolution = new TwainDotNet.ResolutionSettings() 
        { 
                    ColourSetting = TwainDotNet.ColourSetting.Colour, 
                    Dpi = 100 
        };

        setting.ShouldTransferAllPages = true;
        setting.ShowTwainUI = false;
    }

    void twn_TransferImage(object sender, TwainDotNet.TransferImageEventArgs e)
    {
      //save  image
    }

    void twn_ScanningComplete(object sender, TwainDotNet.ScanningCompleteEventArgs e)
    {
        if (e.Exception != null)
            MessageBox.Show(e.Exception.Message);
    }
} 
```

# php - Yii:user - 文件配置文件字段

> ID：14157817
> 
> 赞同：0
> 
> 时间：2013-01-04T13:09:42.680
> 
> 标签：php, yii, yii-extensions

我在 Yii:user 中添加了一个文件类型配置文件字段。文件选择已添加到配置文件编辑表单中，但是当我选择图像时出现错误“图像不能为空白”。

我已将 ajax 验证设置为 false，现在提交后出现此错误。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T16:03:34.387

您需要编辑您的**个人资料**字段并将其他**验证器**值设置为如下所示：

```
 {"file":{"allowEmpty":"true","maxFiles":"1","types":"jpg, jpeg, gif, png"}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T16:19:17.877

您需要做两件重要的事情：向 Profile Field 模型添加一个新的验证规则，如下所示：

```
array('image', 'file', 'types'=>'jpg, gif, png'), 
```

并更改表单标签以包含“enctype”=>“multipart/form-data”（我通常使用 CActiveForm / CForm 中的 htmlOptions 数组添加它）。

这是一个关于如何使用模型上传文件的 wiki 页面，以防你还没有看到它：[http ://www.yiiframework.com/wiki/2/](http://www.yiiframework.com/wiki/2/)

# c# - 在构造函数中分配类值？

> ID：14157818
> 
> 赞同：2
> 
> 时间：2013-01-04T13:09:43.647
> 
> 标签：c#, .net, constructor

问题：我想在类的构造函数中将数据库数据填充到类实例的属性和字段中。

```
 public class Profile : ProfileOverview
    {

        public Profile()
        { }

        public Profile(long ProfileId)
        {
            using (System.Data.IDbCommand cmd = Settings.DAL.CreateCommand("SELECT * FROM Profiles WHERE ProfileId = @__in_profileid"))
            {
                Settings.DAL.AddParameter(cmd, "__in_profileid", ProfileId);

                this = Settings.DAL.GetClass<Models.Profile>(cmd);
            } // End Using cmd

        } // End Constructor

       ... (some properties and fields)
} 
```

问题是，编译器说它不能分配“this”，因为它是写保护的。我是否真的有必要更改我的数据库抽象层以将“this”传递给它，或者我可以以某种方式做到这一点？

问题是，`GetClass`调用`Activator.CreateInstance`创建 的新实例`Models.Profile`，我更愿意保持这种方式（因为 GetClass 是一个函数而不是一个过程）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:12:06.313

您不能分配`this`. 考虑像这样改变你的模式：

```
public class Profile : ProfileOverview
{

    public Profile()
    { }

    public static Profile Get(long ProfileId)
    {
        using (System.Data.IDbCommand cmd = Settings.DAL.CreateCommand("SELECT * FROM Profiles WHERE ProfileId = @__in_profileid"))
        {
            Settings.DAL.AddParameter(cmd, "__in_profileid", ProfileId);

            return Settings.DAL.GetClass<Models.Profile>(cmd);
        } // End Using cmd
    }

   ... (some properties and fields)
} 
```

**更新**
根据@CodeInChaos 和@weston 的评论，我在这里补充说上面的代码是*糟糕的设计*是公平的。理想情况下，静态加载器方法将存在于另一个类中，其目的是加载您的`Profile`. 考虑以下基本示例：

```
public class Profile : ProfileOverview
{
    public Profile() { }

   ... (some properties and fields)
}

public class ProfileHelper
{
    public Profile LoadProfileById(long ProfileId)
    {
        using (System.Data.IDbCommand cmd = Settings.DAL.CreateCommand("SELECT * FROM Profiles WHERE ProfileId = @__in_profileid"))
        {
            Settings.DAL.AddParameter(cmd, "__in_profileid", ProfileId);

            return Settings.DAL.GetClass<Models.Profile>(cmd);
        }
    }
} 
```

# android - Android HttpsUrlConnection 在同一毫秒内重复请求

> ID：14157819
> 
> 赞同：2
> 
> 时间：2013-01-04T13:09:53.560
> 
> 标签：android, httpclient, httpurlconnection, httpsurlconnection

我有个问题。我只见过一次。我的代码算法设计为只请求一次。但是服务器收到了两次请求。我必须提出一个解决方案。
我想，这个问题喜欢[这个 url](https://stackoverflow.com/questions/8949487/duplicate-requests-from-httpclient)但我找不到关于 httpurlconnection 的任何东西（错误或问题）？

设备的Android版本为4.0.3，连接方式为GET。

```
try {
            String encoding = session.getPlatform().getEncodingIse();
            if (TradeUtil.isApachiClientActive()) {
                HttpResponse hr = XHttpClientFactory.getConnectionResponse(session.getPlatform(), TradeServiceType.ISE, command);
                if (!session.getPlatform().isUseStaticEncodingForIse()) {
                    encoding = XHttpClientFactory.getEncoding(hr, encoding);
                }
                strRtn = TradeUtil.getResponse(hr.getEntity().getContent(), encoding);
            } else {
                con = TradeUtil.createConnection(session.getPlatform(), TradeServiceType.ISE, command);
                if (!session.getPlatform().isUseStaticEncodingForIse()) {
                    encoding = TradeUtil.getEncoding(con, session.getPlatform().getEncodingIse());
                }
                strRtn = TradeUtil.getResponse(con.getInputStream(), encoding);
            }
        } catch (Exception e) {
            TradeUtil.toConsole(e);
            response.getResponseResult().setResponseCode(ResponseResult.CONNECTION_ERROR);
            response.getResponseResult().setDescription(e.getMessage());
            try {
                if (con != null)
                    con.disconnect();
            } catch (Exception ex) {
            }
            return response;
        }

   public static HttpURLConnection createConnection(Platform platform,
        TradeServiceType serviceType, String command) throws Exception {

    command = command + "&MTXTimeAnd=" + Calendar.getInstance().getTimeInMillis(); // Cachlemeyi
                                                                                    // Engellemek
                                                                                    // için

    TradeUtil.initSSLContext(); // Zoom ve ustundeki makinalar için SSL
                                // handshake için trust manager set etmek
                                // gerekiyor.
    System.setProperty("http.keepAlive", "false");// Yatirim finansman +
                                                    // Android 2.2 Bug için
                                                    // gerekli
    System.setProperty("https.keepAlive", "false"); // Yatirim finansman +
                                                    // Android 2.2 Bug için
                                                    // gerekli

    HttpURLConnection con;
    String methodType;
    String encoding;
    String strAdd = null;

    if (serviceType.equals(TradeServiceType.ISE)) {
        strAdd = platform.getIseServiceAdress();
        methodType = platform.getIseConnectionMethodType();
        encoding = platform.getEncodingIse();

    } else if (serviceType.equals(TradeServiceType.TURKDEX)) {
        strAdd = platform.getTurkdexServiceAdress();
        methodType = platform.getTurkdexConnectionMethodType();
        encoding = platform.getEncodingTurkdex();

    } else {
        throw new IllegalArgumentException("hatali service tipi");
    }
    if (methodType.equalsIgnoreCase("GET")) {
        strAdd = strAdd + "?" + command;
    }

    URL adress = new URL(strAdd);
    if (adress.getProtocol().equalsIgnoreCase("https")) {
        con = (HttpsURLConnection) adress.openConnection();
        ((HttpsURLConnection) con).setHostnameVerifier(new HostnameVerifier() {
            public boolean verify(String hostname, SSLSession session) {
                return true;
            }
        });
    } else {
        con = (HttpURLConnection) adress.openConnection();
    }
    con.setUseCaches(false);
    con.setReadTimeout(platform.getConnectionTimeout());
    con.setConnectTimeout(platform.getConnectionTimeout());

    if (methodType.equalsIgnoreCase("POST")) {
        con.setDoOutput(true);
        con.setDoInput(true);
        con.setRequestMethod("POST");

        OutputStreamWriter osw = null;
        try {
            osw = new OutputStreamWriter(con.getOutputStream(), encoding);
            osw.write(command);
            osw.flush();
            osw.close();
            osw = null;
        } catch (Exception ex) {
            TradeUtil.toConsole(ex);
            try {
                if (osw != null)
                    osw.close();
            } catch (Exception ex2) {
                TradeUtil.toConsole(ex);
            }
            throw ex;
        }

    } else {

    }
    return con;

} 
```

# ruby-on-rails - CanCan/Rolify：模型上用户的读取权限被拒绝

> ID：14157823
> 
> 赞同：1
> 
> 时间：2013-01-04T13:10:06.067
> 
> 标签：ruby-on-rails, cancan, accessible, rolify

我使用[CanCan](https://github.com/ryanb/cancan)和[rolify](https://github.com/EppO/rolify)为 Farm 模型设置访问权限。

```
# ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)
    # Create guest user aka. anonymous (not logged-in) when user is nil.
    user ||= User.new

    if user.has_role? :admin
      can :manage, :all
    else # guest user aka. anonymous
      can :read, :all
      # logged in user
      if user.has_role? :user
        can :create, Farm
        can :manage, Farm, :user_id => user.id
      end
    end
  end
end 
```

我使用此处列出的一些测试数据为我的应用程序播种：

```
# seeds.rb
puts 'SETTING UP DEFAULT USER LOGIN'
user1 = User.create! name: 'First User', email: 'first.user@foo.com', password: 'password'
puts 'New user created: ' << user1.name
user2 = User.create! name: 'Second User', email: 'second.user@foo.com', password: 'password'
puts 'New user created: ' << user2.name
user9 = User.create! name: 'Default Admin', email: 'admin@foo.com', password: 'password'
puts 'New user created: ' << user9.name

puts 'ADDING SPECIAL ROLES TO USERS'
# No role for user1 here.
user2.add_role! :user
user2.save!
user9.add_role :admin
user9.save!

puts 'SETTING UP SOME FARMS'
farm1 = Farm.create! name: 'User1 farm', location: 'Mexico'
farm1.user = user1
farm1.save!
puts 'New farm created: ' << farm1.name
farm2 = Farm.create! name: 'User2 farm', location: 'Bolivia'
farm2.user = user2
farm2.save!
puts 'New farm created: ' << farm2.name
farm3 = Farm.create! name: 'Nobody\'s farm', location: 'Death Valley'
puts 'New farm created: ' << farm3.name 
```

我在 Rails 控制台中运行以下命令来找出用户可以访问（只读）哪些农场：

```
> Farm.accessible_by(Ability.new(User.find_by_name("First User"))).count
=> 3
> Farm.accessible_by(Ability.new(User.find_by_name("Second User"))).count
=> 1
> Farm.accessible_by(Ability.new(User.find_by_name("Default Admin"))).count
=> 3 
```

请注意 user1 没有分配角色。

**问题：**为什么 user2 不能访问中定义的所有场`ability.rb`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:09:49.807

我必须努力学习你定义能力的**顺序很****重要**！[CanCan](https://github.com/ryanb/cancan/wiki/Ability-Precedence)的文档揭示了细节供大家阅读。简而言之：

> 通用规则先行，限制性规则紧随其后。

这是我想出的设置...

```
class Ability
  include CanCan::Ability

  def initialize(user)
    # Create guest user aka. anonymous (not logged-in) when user is nil.
    user ||= User.new

    if user.has_role? :admin
      can :manage, :all
    else
      # logged in user
      if user.has_role? :user
        can :manage, Farm, :user_id => user.id
        can :create, Farm
      end
       # guest user aka. anonymous
      can :read, :all
    end
  end
end 
```

# python - 如何先设置 MenuItem 敏感然后再设置不敏感？蟒蛇GTK

> ID：14157826
> 
> 赞同：1
> 
> 时间：2013-01-04T13:10:06.517
> 
> 标签：python, gtk

GTK如何在单击后设置菜单项不敏感，但在大约5秒后再次使其敏感。如果我做这样的事情，它不起作用（我不知道为什么不这样做）

```
self.shutdown_item.connect("activate",self.shutdown)
self.shutdown_item.connect("activate",self.sensitiveshutdown)

def sensitiveshutdown(self,widget):
    shutdown_item.set_sensitive(False)
    time.sleep(5)
    shutdown_item.set_sensitive(True) 
```

不起作用。它冻结 gui 5 秒钟，但按钮保持敏感。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:13:20.943

你不能停止整个程序，GTK+ 需要运行它的主循环才能为 UI 服务。

您应该使用[timeout](http://www.pygtk.org/pygtk2tutorial/ch-TimeoutsIOAndIdleFunctions.html#sec-Timeouts)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:51:06.080

所以@unwind指出的方式是超时（你需要导入`gobject`：

```
self.shutdown_item.connect("activate",self.shutdown)
self.shutdown_item.connect("activate",self.sensitiveshutdown)

def sensitiveshutdown(self, widget):
    self.shutdown_item.set_sensitive(False)
    gobject.timeout_add(5000, self.reviveShutDown)

def reviveShutDown(self):
    self.shutdown_item.set_sensitive(True)
    return False 
```

# php - 在mac中使用cron运行一个php脚本

> ID：14157827
> 
> 赞同：2
> 
> 时间：2013-01-04T13:10:11.643
> 
> 标签：php, cron

我正在尝试使用 cron 在 mac 中运行 php 脚本。我希望这个 php 脚本每分钟运行一次。我在网上阅读了几个资源，据我了解，如果我使用 launchd 会更好。无论如何，我尝试让它与 cron 一起工作，然后如果它工作正常，我可能会尝试使用 launchd。

所以这就是我所做的：

我在一个txt文件中写了这个命令：

```
 * * * * * /usr/bin/php /Applications/MAMP/htdocs/php_test/main_script.php 
```

那里我有 php 的路径（我用“which php”命令找到它）和我的 php 脚本的路径。

我将 txt 文件命名为：crontasks.txt，然后使用以下命令通过终端运行它：

```
 crontab /Users/dkar/Desktop/crontasks.txt 
```

当我列出 crons (crontab -l) 时，我看到该作业已列出。但是每一分钟都没有输出。输出应该是存储在指定文件夹中的图像。我在这里想念什么？先谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:18:36.447

您可能对 crond 如何处理“crontab”文件有一点误解。运行命令就足够了`crontab -e`，它可以让您编辑您的个人 crontab 或编辑系统 crontab。

如果您使用`crontab -e`它将打开默认编辑器 (vi/vim)，您可以输入以下行：

```
 * * * * * /usr/bin/php /Applications/MAMP/htdocs/php_test/main_script.php 
```

然后，您只需保存文件。如果要使用系统 crontab，则必须直接对其进行编辑并输入该行。此外，系统 crontab 还有一个用户名字段。像这样：

```
 * * * * * /usr/bin/php root /Applications/MAMP/htdocs/php_test/main_script.php 
```

在下一整分钟，您的脚本将由 crond 执行。

# php - php模板和html整洁

> ID：14157837
> 
> 赞同：0
> 
> 时间：2013-01-04T13:10:32.787
> 
> 标签：php, templates

这在技术上会作为 php 中的基本模板系统传递吗？

于是就有了两个文件，index.php 和 Template_Module.php

这是 index.php 代码

```
<?php

include("Template_Module.php");

$set_name = "My Website";
$set_desc = "My Website for random bla bla";
$set_key  = "site, random, bla, for";

echo template_header_object($set_name, $set_desc, $set_key); 
```

这是 Template_Module.php 代码

```
<?php

function template_header_object($set_title, $set_desc, $set_keywords) {

     $title_object = htmlspecialchars($set_title);    //lets get html title to pass
     $desc_object  = htmlspecialchars($set_desc);     //lets get meta description to pass
     $keyw_object  = htmlspecialchars($set_keywords); //lets get meta keywords to pass

     $template_create_object .= <<<OBJECT
<!doctype html>
     <html>
         <head>
             <meta charset="utf-8">
                 <title>$title_object</title>
    <!-- general meta -->
             <meta name="description" content="$desc_object">
             <meta name="keywords" content="$keyw_object">

    <!-- mobile specific meta -->
             <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">           

    <!-- open graph meta -->
             <meta property="og:title" content="$title_object">
             <meta property="og:image" content="/assets/img/logo_fbtype.png">
             <meta property="og:site_name" content="$title_object">
             <meta property="og:description" content="$desc_object">

    <!-- style sheets and scripts -->
             <link href="/assets/css/style.css" rel="stylesheet">
             <link href="/assets/css/reset.css" rel="stylesheet">
             <link href="/assets/img/favicon.png" rel="shortcut icon">

                <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
                <![endif]-->

             <script src="http://code.jquery.com/jquery-latest.js"></script>
         </head>
     <body></body></html>        
OBJECT;

     return $template_create_object;

} 
```

有没有一种方法可以改进 html 呈现给浏览器的方式，所以源代码看起来更好，而不是完全偏离它的外观，`$template_create_object .= <<<OBJECT`并且有更好的方法将值从 index.php 传递到 template_object.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:51:13.263

1.  是的，这是在 PHP 中制作基本模板的绝佳方式。这是非常基本的，并没有提供太多的灵活性，但它是一个快速而简单的起点。如果你不需要更复杂的东西，它会很适合你。（如果您确实需要更复杂的东西，可以使用大量开源 PHP 模板包）

2.  说真的，不要担心完成的 HTML 代码的外观。无论如何您都不需要查看它（如果您需要调试它，请使用浏览器的 DOM 视图；使用它比查看源代码更容易，即使源代码整洁）。

# html - 内部div的宽度仅与外部div的可见部分一样宽？

> ID：14157844
> 
> 赞同：0
> 
> 时间：2013-01-04T13:11:01.827
> 
> 标签：html, width, css

我有一个固定的外部 div（和水平滚动条）。在这个外部 div 中，我有两个彼此位于下方的 div：一个设置为大于外部 div（从而激活外部 div 的滚动条），一个设置为 100%。

第二个内部 div（100% 宽度）仅与外部 div 可见的宽度一样宽。如果您向左滚动，则 div 会停止，并且不是 100% 的外部 div。

```
.parent{
     white-space:nowrap;
    overflow:scroll;
    width:200px;
    } 

.holder {
    width: 500px;
    background: url(http://www.w3schools.com/cssref/paper.gif); } 

.holder1 {
    width: inherit;
    background: blue; } 

.holder> div{
   display:inline-block;
   white-space:normal;
   background:red;
}​

<div class="parent">
    <div class="holder">
        <div>1</div>
    </div>
    <br>
    <div class="holder1">
        <div>1</div>
    </div>
    <br>
</div> 
```

我有一个 JSfiddle：http: [//jsfiddle.net/EUtLh/16/](http://jsfiddle.net/EUtLh/16/)

让它更清楚。有什么办法可以让第二个 div 和第一个 div 一样宽，而不给它一个固定的宽度？第一个 div 是动态生成的，它的宽度决定了外部 div 的宽度。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:45:54.063

将两个支架 div 包裹在一个“包装器”div 中，其宽度是动态确定的（就像之前的支架一样）。将支架宽度更改为 100%，它们将与“包含”div 的宽度一样宽。

```
<div class="parent">

 *<div class="wrapper">*

  <div class="holder">
      <div>1</div>
  </div><br>
  <div class="holder1">
     <div>1</div>
  </div>

 *</div>*

</div>

CSS:
.wrapper {
   width:500px;
}
.holder {
   width: 100%;
   background: url(http://www.w3schools.com/cssref/paper.gif);
}
.holder1 {
   width: 100%;
   background: blue;
} 
```

[http://jsfiddle.net/EUtLh/29/](http://jsfiddle.net/EUtLh/29/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:24:29.647

给你的 div 一个通用类和两个单独的 id 是一种解决方案：

```
<div class="parent">
    <div class="holderClass" id="holder">
         <div>1</div>
    </div><br>
    <div class="holderClass" id="holder1">
         <div>2</div>
    </div>
</div> 
```

使用 CSS：

```
.parent{
    white-space:nowrap;
    overflow:scroll;
    width:200px;
    }
.holderClass {
    width: 500px;
}
#holder{
    background: url(http://www.w3schools.com/cssref/paper.gif);
}
#holder1 {
    background: blue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:20:54.100

看来您想使用 javascript（尝试使用 Jquery）

```
$('.holder1').width($('.holder').width());​ 
```

这可能有助于我猜

# php - 从 Facebook 群组获取事件

> ID：14157845
> 
> 赞同：2
> 
> 时间：2013-01-04T13:11:03.753
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我正在为一个协会开发一个网站。该网站将在 Facebook 的开放 API 的帮助下显示 Facebook 事件。

我已经设法通过 Facebook 页面的事件来做到这一点，但是我遇到了一个小组的问题。有了一个页面，我已经使用[了这个代码](http://www.codeofaninja.com/2011/07/display-facebook-events-to-your-website.html)，它工作正常。但是，组的工作方式略有不同，因为该组不是事件成员。

```
$fql = "SELECT name, pic, start_time, end_time, location, description 
        FROM event WHERE eid IN ( 
            SELECT eid FROM event_member WHERE uid = 221167777906963) 
        ORDER BY start_time asc"; 
```

对进行查询以获取某个组的事件有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T20:09:52.363

正如您所说，我们不能将`event_member`表格与组一起使用。似乎无法使用 FQL 获取组的事件。

幸运的是，它使用 Graph API 工作：

[`http://graph.facebook.com/221167777906963/events`](https://developers.facebook.com/tools/explorer/?method=GET&path=221167777906963/events)

# node.js - 更新 MongoDB 集合 - JavaScript

> ID：14157846
> 
> 赞同：1
> 
> 时间：2013-01-04T13:11:11.010
> 
> 标签：node.js, mongodb, mongoose

我正在尝试更新集合中的值。用户单击一个按钮，与该按钮对应的数字会被发送到服务器以添加到集合中。

我无法更新集合，但如果我使用它在控制台中可以正常工作`db.orders.update()`

订货型号：

```
// DB Initiation stuff

var orderSchema = new mongoose.Schema({ 
    status: String,
    rated: Number
});

var collection = 'orders';
var Order = db.model('Order', orderSchema, collection);

module.exports = Order; 
```

客户端（单击按钮时）

```
// starID = 5; id = 50e6a57808a1d92dcd000001
socket.emit('rated', {rated: starID, id: id}); 
```

socket.js：

```
var Order = require('../models/orders');

socket.on('rated', function(data) { 
  /* Probably a better way to do this but, wrap
   * the id in 'ObjectId(id)'
   */
  var id = 'ObjectId("'+data.id+'")';
  Order.update( {_id: id}, {$set: {rated: data.rated}} );
   socket.emit('updated', {
     note: 'Some HTML notification to append'
   });  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:50:41.677

让 Mongoose 将`id`字符串转换为`ObjectId`：

```
socket.on('rated', function(data) { 
  Order.update( {_id: data.id}, {$set: {rated: data.rated}} );
   socket.emit('updated', {
     note: 'Some HTML notification to append'
   });  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:59:52.527

Mongoose 需要一个字符串作为 id。所以传递一个 ObjectId 是行不通的。尝试：

```
Order.update( {_id: id.toString()}, ....... ); 
```

将 toString 与 String 和 ObjectId 一起使用是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:56:17.307

我尝试了所有说明，但似乎没有用，所以我将更新代码更改为：

```
Order.findOne({_id : id}, function(err, doc) {
  doc.rated = data.rated;
  doc.status = data.status;
  doc.save();
}); 
```

现在它工作正常。感谢所有为回答做出贡献的人

# c# - 在 DataSet.GetXml() 之后从 UTC 进行的日期时间转换不正确

> ID：14157855
> 
> 赞同：2
> 
> 时间：2013-01-04T13:11:57.953
> 
> 标签：c#, utc, strongly-typed-dataset

我的应用程序通过 Web 服务调用拉取一个对象，将其放入一个类型化的数据集中，然后将其发送`DataSet.GetXml()`到一个存储过程以在数据库上插入/更新。

我面临的问题是对象的两个属性：`StartTime`/ `EndTime`。Web 服务以 UTC 格式发送这些信息。例如。示例`StartTime`-> "2012-11-06T05:00:00Z"`DataSet.GetXml()`尝试将此 UTC 值转换为本地时间，并且我的应用服务器位于 EST。结果值应报告为“2012-11-06T00:00:00-05:00”，但它是“2012-11-06T05:00:00-05:00”。正在添加偏移值，但时间分量未更改。

我的理解有什么不对吗？我发现很难消化该`GetXml()`方法可能存在这样的错误，而且我还没有发现这里的其他人抱怨类似的问题。

这是代码的精简版本：

```
public void SaveOrder(int intOrderID)
{
        OrderDataSet objOrderDS = null;
        OrderDataSet.OrdersRow objOrderRow = null;
        ExternHandler handler = null;
        Order objOrder;

        Order objOrder = handler.GetOrder(intOrderID);

        objOrderRow = objOrderDS.Orders.NewOrdersRow();
        objOrderRow.OrderID = objOrder.OrderID;
        objOrderRow.StartTime = objOrder.StartTime;
        objOrderRow.EndTime = objOrder.EndTime;
        objOrderDS.Orders.AddOrdersRow(objOrderRow);

        if (objOrderDS.Orders.Rows.Count > 0)
        {
            objOrderDS.Namespace = string.Empty;
            objMappingObjects.Add(new MappingObject("Table", "Orders"));
            objSqlParams.Add(new SqlParameter("@pOrdersXml", objOrderDS.GetXml()));
            objOrderDS.Clear();
            objOrderDS.Merge(SqlHelper.ExecuteDataset(ConfigConnectionDB.Trim(), CommandType.StoredProcedure, "usp_InsertOrderMetaData", objMappingObjects.ToArray(), objSqlParams.ToArray()));
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:46:13.953

好的，我找到了为什么将 UTC 时间转换为“不正确的本地时间”。类型化数据集中的字段“开始时间”/“结束时间”属于“日期时间”类型。有一个与 DateTime 类型的 DataColumn 关联的属性，称为“DateTimeMode”，默认情况下设置为“UnspecifiedLocal”。 [http://msdn.microsoft.com/en-us/library/system.data.datasetdatetime.aspx](http://msdn.microsoft.com/en-us/library/system.data.datasetdatetime.aspx)

基本上，此选项将偏移量添加到日期时间值而不转换它。作为测试，我将“DateTimeMode”更改为“Utc”并重试。从 DataSet.GetXml() 收到的 XML 能够正确转换值：“2012-11-06T05:00:00Z”

作为我的问题的解决方案，我将属性保留为“未指定本地”。相反，在将值添加到数据集时，我将其转换为本地时间。

```
 objOrderRow.EndTime = objOrder.EndTime.ToLocalTime(); 
```

（请注意，这对我有用，因为我的应用服务器和数据库服务器位于同一时区，并且转换为 UTC 并不复杂。）

# android - 以程序方式创建 9 补丁？

> ID：14157858
> 
> 赞同：0
> 
> 时间：2013-01-04T13:12:07.157
> 
> 标签：android, nine-patch, android-drawable

> **可能重复：**
> [在运行时创建 NinePatch/NinePatchDrawable](https://stackoverflow.com/questions/5079868/create-a-ninepatch-ninepatchdrawable-in-runtime)

我正在尝试以程序方式创建一个 9 补丁图像，但不知道该怎么做。有什么方法可以获取普通的 PNG/JPG 图像并对其进行调整，以便我可以指定中心宽度和中心高度来生成 9 个可绘制的补丁？

我打算在运行时创建一个位图并将黑色边缘标记添加到位图中并在应用程序中创建 9 个补丁，但是读取这个线程似乎不可能，因为资源编译器创建了额外的魔法数据所以任何指针？

[谷歌网上论坛链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/fYmzquzM8Qo)

从本质上讲，我知道图像将用于按钮，并且将有 4 个 4x4 角不应该被拉伸，并且中心的剩余像素可以被拉伸。

# listview - 在页面导航上保留 Listview 滚动

> ID：14157861
> 
> 赞同：6
> 
> 时间：2013-01-04T13:12:17.763
> 
> 标签：listview, windows-8, microsoft-metro, vertical-scrolling

`listview` `scroll position`如果我导航到另一个页面并按按钮返回，我该如何维护`back`？

它总是`resets it to top`。回到我原来的位置真的很痛苦。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-04T09:28:29.680

或者，您可以在 Page XAML 中添加 NavigationCacheMode="Enabled"：

```
<Page 
NavigationCacheMode="Enabled"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:40:35.237

大多数情况下，第 1 步可以解决问题，如果没有，您必须按照第 2 步在 listView 中进行更改

1)`this.NavigationCacheMode = Windows.UI.Xaml.Navigation.NavigationCacheMode.Enabled;`

2)

```
<ListView.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Vertical"/>
    </ItemsPanelTemplate>
</ListView.ItemsPanel> 
```

我希望它有帮助:)

# android - Android：如何使用 simpleCursorAdapter 过滤 listView

> ID：14157863
> 
> 赞同：1
> 
> 时间：2013-01-04T13:12:23.177
> 
> 标签：android, listview, simplecursoradapter

首先对不起我的英语

我已经阅读了很多关于这个问题的答案，但我不知道如何运行我的代码。

我想用上面的 EditText 的文本过滤我的 listView。

这是我的代码：

```
 private DbAdapter mDbHelper;
    private EditText mSearch;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.baes_bat_list);
        setTitle(R.string.baes_list_title);
        mDbHelper = new DbAdapter(this);
        mDbHelper.open();
        fillData();
        registerForContextMenu(getListView());
        mSearch = (EditText) findViewById(R.id.searchbox);

    }

    private void fillData() {

        String search = "";
        search = mSearch.getText().toString();

        // Get all of the rows from the database and create the item list
        Cursor baesCursor = mDbHelper.fetchAllBaes(search);
        startManagingCursor(baesCursor);

        // Create an array to specify the fields we want to display in the list (only TITLE)
        String[] from = new String[]{DbAdapter.BAES_NOM, DbAdapter.BAES_BAT};

        // and an array of the fields we want to bind those fields to (in this case just text1)
        int[] to = new int[]{R.id.text1, R.id.text2};

        // Now create a simple cursor adapter and set it to display
     // Now create a simple cursor adapter and set it to display
        SimpleCursorAdapter baes = 
            new SimpleCursorAdapter(this, R.layout.baes_row, baesCursor, from, to);
        setListAdapter(baes);

        }; 
```

这是我的数据库适配器

```
public Cursor fetchAllBaes(String string) {
        String [] columns=new String[]{BAES_ID +" as _id",BAES_NOM,BAES_BAT,BAES_LOC,BAES_MISESERVICE,BAES_COUP,BAES_DATE_VISITE,BAES_ETAT, BAES_SYNC};
        String [] search = null;
        return mDb.query(TABLE_BAES, columns, BAES_BAT + "= ?", search, null, null, null);
    } 
```

我想我错过了一步，但我不知道是哪一步。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:16:50.263

我有一个工作代码，你可以试试它是否有效，

```
listView = (ListView) findViewById(R.id.sendToList);
        editText = (EditText) findViewById(R.id.searchList);
        adapter = new CustomListViewAdapter(this,
                R.layout.list_row, rowItems);
        listView.setAdapter(adapter);
        listView.setTextFilterEnabled(true);

        editText.addTextChangedListener(new TextWatcher() {

            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {

            }

            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {

            }

            public void afterTextChanged(Editable arg0) {
                sendToList.this.adapter.getFilter().filter(arg0);

            }
        }); 
```

# html - 如何在网站中进行动态填充

> ID：14157865
> 
> 赞同：0
> 
> 时间：2013-01-04T13:12:28.277
> 
> 标签：html, css, padding

嘿，我有以下问题：

在我的网站中，我有一个开销 div，我希望这个 div 中的所有链接都填充在其余页面的填充之间，就像在 Stackoverflow.com f.ex 中一样。这是我的意思的图片：（ ![http://i.imgur.com/2qDXT.png](../Images/66699475bd39b7bb9dacd444e2f248e0.png) 对不起，因为该页面尚未发布，但我不想炫耀我的内容。）

我的问题是，随着浏览器的规模，每次填充都必须不同才能将链接带到正确的位置，有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:15:02.070

### 使用百分比`width`和`padding`！

假设你有一个`.wrap`并且你这样做：

```
.wrap {width: 90%; margin: 0 auto;} 
```

### 小提琴：http: [//jsbin.com/utafem/1/](http://jsbin.com/utafem/1/)

# jquery - 循环json解析数据

> ID：14157871
> 
> 赞同：0
> 
> 时间：2013-01-04T13:12:46.813
> 
> 标签：jquery

我有这个数据：

```
[
   [
      {"id":"1", "sentiment":"0", "name":"Company 1", "count":"10"},
      {"id":"2", "sentiment":"0", "name":"Company 2", "count":"5"},
      {"id":"3", "sentiment":"0", "name":"Company 3", "count":"7"}   
   ],
   [
      {"id":"1", "sentiment":"1", "name":"Company 1", "count":"3"},
      {"id":"2", "sentiment":"1", "name":"Company 2", "count":"2"},
      {"id":"3", "sentiment":"1", "name":"Company 3", "count":"4"}   
   ]
] 
```

我如何遍历这些数据以获得两个表，如下所示：

```
id     Company     sentiment      count
1      Company 1        0           10
2      Company 2        0            5
3      Company 3        0            7

id     Company     sentiment      count
1      Company 1        1           3
2      Company 2        1           2
3      Company 3        1           4 
```

我已经开始了，但卡住了：

```
var obj = JSON.parse(data);
  $.each(obj, function(i, obj_item){
     $.each(obj_item, function(j, item){
    // got stuck here                   
     })
}) 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:24:49.107

给你... [http://jsfiddle.net/kbVg4/](http://jsfiddle.net/kbVg4/)

```
var table = '';
for(var i = 0; i < data.length; i++){
    //One table per subset
    table += '<table>';

    //Table headers
    table += '<tr><th>Id</th><th>Company</th><th>Sentiment</th><th>Count</th></tr>';

    //Looping over the subset
    for(var j = 0; j < data[i].length; j++){
        table += '<tr>';
        table += '<td>'+data[i][j]['id']+'</td>';
        table += '<td>'+data[i][j]['name']+'</td>';
        table += '<td>'+data[i][j]['sentiment']+'</td>';
        table += '<td>'+data[i][j]['count']+'</td>';
        table += '</tr>';
    }
    table += '</table>';
}

//Use the appropriate ID.
$('body').append(table); 
```

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:28:43.043

给你..

```
var data= "your show json array in question";

var str="";
 $.each(data, function(i, obj_item){
    str+="<table border='1'>";
     str+="<tr><td>id</td><td>sentiment</td><td>name</td><td>count</td>";
    $.each(obj_item, function(i1, obj){

        str+="<tr><td>"+obj.id+"</td><td>"+obj.sentiment+"</td><td>"+obj.name+"</td><td>"+obj.count+"</td>";
       str+="</tr>";
    });
     str+="</table>";

});

 $('div').html(str);//replace with your selector 
```

在这里[摆弄](http://jsfiddle.net/Fb5uR/)

# python - Python - 如何在单独的文件中创建类的实例

> ID：14157874
> 
> 赞同：0
> 
> 时间：2013-01-04T13:13:04.793
> 
> 标签：python, file, class, module, instance

我正在尝试从名为 Login.py 的文件中创建类“播放器”的新实例（在 Player.py 中）

```
 import Player
    pfile = "data/players/" + username
    s = shelve.open(pfile)
    s(username = Player.player(username, password, False)) 
```

从中我得到：

```
AttributeError: 'module' object has no attribute 'player' 
```

我希望能够创建对象并将其放在字典中，其键是玩家的用户名，我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:17:36.507

也许你的班级是 Player 这意味着要引用它你应该做这样的事情

```
import Player
my_player = Player.Player(username, password, False) 
```

你也应该看看这条线

```
s(username = Player.player(username, password, False)) 
```

我不确定它是否有效并且会像 Martijn 指出的那样工作，python 会将用户名视为关键字参数

# .net - 使用 Entity Framework 和 MySQL 安装 .NET Framework 4.5 后出现异常

> ID：14157877
> 
> 赞同：0
> 
> 时间：2013-01-04T13:13:13.257
> 
> 标签：.net, mysql, entity-framework

我正在使用 .Net Framework 4 和 MySQL 开发应用程序。由于 ORM 实体框架与 6.6.4 版本的 MySQL 连接器一起用作数据提供者。

尝试执行以下代码片段时抛出 NotSupportedException。

```
using (var connection = new Connection())
{
    var commandTxt = 
@"SELECT
    t.ID,
    ANYELEMENT
    (
        SELECT VALUE TOP(1) c.Name
        FROM Connection.Contacts AS c
        WHERE c.PartyID = t.ID
    ) AS SubQuery
FROM Connection.Parties AS t";
    var q = new ObjectQuery<DbDataRecord>(commandTxt, connection);
    var result = q.ToList();
} 
```

例外：

```
System.Data.EntityCommandCompilationException: An error occurred while preparing the command definition. See the inner exception for details. ---> System.NotSupportedException: Specified method is not supported.
   at MySql.Data.Entity.SqlGenerator.Visit(DbApplyExpression expression)
   at System.Data.Common.CommandTrees.DbApplyExpression.Accept[TResultType](DbExpressionVisitor`1 visitor)
   at MySql.Data.Entity.SqlGenerator.VisitInputExpression(DbExpression e, String name, TypeUsage type)
   at MySql.Data.Entity.SelectGenerator.VisitInputExpressionEnsureSelect(DbExpression e, String name, TypeUsage type)
   at MySql.Data.Entity.SelectGenerator.Visit(DbProjectExpression expression)
   at System.Data.Common.CommandTrees.DbProjectExpression.Accept[TResultType](DbExpressionVisitor`1 visitor)
   at MySql.Data.Entity.SelectGenerator.GenerateSQL(DbCommandTree tree)
   at MySql.Data.MySqlClient.MySqlProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
   at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
   at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
   --- End of inner exception stack trace ---
   at System.Data.EntityClient.EntityCommandDefinition..ctor(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
   at System.Data.EntityClient.EntityProviderServices.CreateCommandDefinition(DbProviderFactory storeProviderFactory, DbCommandTree commandTree)
   at System.Data.EntityClient.EntityProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
   at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
   at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Prepare(ObjectContext context, DbQueryCommandTree tree, Type elementType, MergeOption mergeOption, Span span, ReadOnlyCollection`1 compiledQueryParameters, AliasGenerator aliasGenerator)
   at System.Data.Objects.EntitySqlQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery.ToTraceString()
   at WpfApplication1.MainWindow.ExecuteQuery(String txtParam, String& query, String& result) in c:\Users\andrienko.EDSSON\Documents\Visual Studio 2012\Projects\WpfApplication1\WpfApplication1\MainWindow.xaml.cs:line 96 
```

数据模型：

```
CREATE DATABASE `test_schema` /*!40100 DEFAULT CHARACTER SET latin1 */;

CREATE TABLE `party` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`)
);

CREATE TABLE `contact` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `PartyID` int(11) NOT NULL,
  `Name` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`,`PartyID`),
  KEY `fk_contact_party_idx` (`PartyID`),
  CONSTRAINT `fk_contact_party` FOREIGN KEY (`PartyID`) REFERENCES `party` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
); 
```

此行为只能在安装了 .Net Framework 4.5 的机器上重现（无需对解决方案设置进行任何更改），但在仅安装了 .Net Framework 4 的机器上可以正常工作。似乎 .Net Framework 4.5 安装替换了 System.Data.dll 库。

有人可以建议任何解决方法吗？

# windows - 使用 Windows 8 pro 作为我的开发机器

> ID：14157880
> 
> 赞同：13
> 
> 时间：2013-01-04T13:13:18.920
> 
> 标签：windows, windows-7, windows-8, development-environment

我即将购买一台主要用于软件开发/测试/调试的新笔记本电脑，并且想知道安装 Windows 8 pro OS 是否安全？还是我应该坚持使用 Win 7？

我主要做基于 MS 的开发（即 Visual Studio、.net、IIS、sql server），但我也做很多 PHP/Apache/Mysql 工作。我不想陷入我使用的某些软件工具在 win7 中有效但在 win8 中无效的情况。

有人知道我在 Win 8 上可能遇到的任何问题或在 Win 8 上不起作用的任何软件工具吗？

此外，在完成工作的速度方面，是否有人发现自己使用 Win 8 的工作效率较低？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:20:47.303

通过使用 Windows 7，您将无法进行任何 Windows 8 Phone 或应用商店应用程序开发、学习、运行示例等（当然，除非您使用 VM，这需要单独的 System Builder 许可证）。即使您现在不打算构建商店应用程序，我也会说不要关闭修补和跟上技术等的能力。

作为开发人员，您可能大部分时间都在桌面模式上度过，这将是熟悉的领域。用“开始屏幕”替换“开始按钮”已经得到了很多发挥，是的，有一个学习曲线，但它远非不可逾越。甚至还有[第三方产品](http://www.startbutton8.com/index.html)可以为您提供开始按钮功能。不过，我会说，作为 Windows 8 上的开发人员，多显示器设置是关键（也许它已经适合你了 :)）

就 Anri 而言，如果 Win8 更快，启动时间更快，网络连接时间更快，以及对传统开发人员的一些其他改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T14:49:42.570

在 Win 7 和 8 之间的兼容性方面不应该有任何重大的回归。Visual Studio 可以正常工作，但我不知道你的其他工具。

Modern UI 和没有 Startmenu 的可用性差异当然是值得商榷的，但是如果您花一些时间使用它，您会注意到工作流程没有根本差异，并且 Startscreen 只是伪装的 Startmenu。它的工作方式相同，但与之前的 Startmenu 迭代的文件夹 clusterfuck 相比，它的排列要好得多。

正如 Anri 所描述的那样，肯定没有任何稳定性问题。如果你得到恒定的（！）蓝屏死机，你的机器或驱动程序有问题，而不是 Windows。额外的内存占用（如果有的话）应该可以忽略不计，它的运行肯定不会比 Windows 7 差。普通应用程序无法在全屏 Metro 模式下打开，只有 Metro 应用程序可以。有一些应用程序提供两种方式（例如 Chrome 或 Internet Explorer），但这还不是常态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:23:30.963

我将它与类似的工具（ms stack）一起使用，一切正常，我在同一台机器上有win7双启动，Win8感觉更敏捷，响应更快，在几个月的持续使用中没有一个BSOD或类似错误。

我当然不会回到 Win7，而且我真的不喜欢桌面上的 Modern UI（它在平板电脑上很棒），但是有一些工具可以让你的开始菜单回到 win8 中，实际上并没有真正的区别在用户界面中，如果您不想看到现代，则不必。我最喜欢的是start8。

我喜欢 Win8 中的一些小东西，例如简单的 ISO 挂载、桌面上更干净的界面、非常好的任务管理器等。

**更新**

刚刚发现一个**很大**的缺点，使用 Visual Studio 2010，分析器不起作用！只有 VS 2012 探查器适用于 Windows 8，您无能为力，链接：

[http://blogs.msdn.com/b/profiler/archive/2012/12/10/the-visual-studio-profiler-on-windows-8.aspx](http://blogs.msdn.com/b/profiler/archive/2012/12/10/the-visual-studio-profiler-on-windows-8.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:09:49.050

想都别想！如果您是开发人员，请选择 Windows 8：

Windows 7 和 8 之间的兼容性没有重大问题，我强烈建议使用 Windows 8 进行开发。

您可以在 Windows 8 上获得的用于开发的附加功能非常重要：

*   支持开发/测试在 WinRT 上运行的应用程序

*   支持开发 windows phone 8 应用程序（即 hyper-v 上的设备仿真）

*   hyper-V 在 CentOS 和 windows VM 上具有“出色”的性能（我将它们用于开发和测试）。

除了这些客观点，我认为你不应该害怕 Windows 8。但这里是关于个人喜好：作为一名开发人员，我发现新的开始菜单更方便（相同的点击次数/击键次数，out在方便的地方组织我的工具的盒子），并且，结合一个好的启动栏（例如自由启动栏），这一切都到位了。

使用 Windows 8 2 个月后，我的 Windows 7 机器上什么都没有，除了桌面的额外点击。

不要误会我的意思：Windows 8 并不完美，它们确实会带来一定程度的混乱。Windows 7 更“一致”，但也“更少”。但这是另一个话题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-07T15:12:44.550

好吧，我可能是这里唯一的一个，但我自己作为开发人员真的不喜欢 Windows 8。我使用 XP 多年，跳过 Vista 并使用 Win 7 多年。从管理层那里，我们得到了装有 Win 8 的新电脑，并且每天都遇到麻烦（过去 2 个月）。

主要是无法访问您自己的计算机（文件、文件夹、注册表等）、烦人的开始屏幕、无法正常禁用的 Peek 等功能以及桌面操作系统（或Office 2013 中根本没有任何颜色）。

在 Windows 7 中，您可以禁用 UAC 并最终获得对系统的一些控制权。在 Windows 8 中，滑块仍然存在，但它没有做任何事情。您仍然不是自己计算机的所有者。一切都被阻止，访问被拒绝，变灰，我无法将文件放在我想要的文件夹中。VPN不再工作。它大大减慢了我的工作速度。

我必须以管理员身份运行所有内容，这会给我带来各种其他问题（例如丢失网络共享）。

对于网络管理员和家庭主妇，我可以想象用户只能启动或关闭应用程序是件好事，但对于开发人员来说，他们应该在其中设置一个选项来禁用所有安全废话。如果我想要一台你根本不允许做任何事情的电脑，我会买苹果，但这是一台 Windows 机器。请让我在这里做我的工作！

我在 Windows 8 中没有找到比 Windows 7 更喜欢的功能。尤其是“开始”屏幕。如果我的电脑是一个 30 英寸的手机？巨大的按钮遍布整个屏幕，色彩丰富。他们认为我们是智障还是 3 岁的孩子笨到无法控制电脑？

我会付出很多来回到更好的操作系统。或许 Windows 8 就像 Windows ME 和 Windows Vista 一样是一个船长。尚未完成的新事物。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T13:19:54.163

我使用了你在 win8 pro 上列出的所有东西，还没有问题，除了可怕的 win8 可用性问题。生产力方面，如果您不打算开发 Metro 应用程序，我建议您坚持使用 win7（我仍然在不同的工作站上使用，所以我有机会比较）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T00:28:34.087

我更喜欢使用 Windows 8。几乎所有的开发工具都可以在 Windows 8 上正常运行。对于性能，我认为 Windows 8 更快。如果您的机器是 64 位，则安装 64 位版本。我在 Windows 8 中的开发没有任何问题。关于开始屏幕，我认为它更容易，因为如果您正在寻找一些应用程序，只需按“win”键，然后输入应用程序名称，例如“visio”。开始屏幕将自动找到应用程序并列出它们。如果您使用多显示器，Windows 8 可以让您轻松将任务放置在窗口打开的屏幕中。

![在此处输入图像描述](../Images/4e73990ffd5ec5fb633480134970c4d7.png)

# mfc - 聚焦可编辑控件时屏幕键盘上的 MFC

> ID：14157885
> 
> 赞同：1
> 
> 时间：2013-01-04T13:13:27.670
> 
> 标签：mfc, controls, onfocus, on-screen-keyboard

我想做一件在概念上很简单的事情：对于每个接受键盘输入的控件（CEdit、带有可编辑文本的 CCombobox 等），当控件获得焦点并启用时，使屏幕键盘出现。最好具有可访问性支持（我已经阅读了一些有关 Microsoft 用户界面自动化的资料），而不是直接调用 osk.exe 实用程序。

当用户将焦点放在可编辑控件上时，它非常类似于触摸屏智能手机。

更新：如果有一个 Windows 选项可以使屏幕键盘按照我描述的方式运行，那很好！

更新 2：我想要的东西类似于[http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)，但在 Windows 7 中。

我已经对 IUIAutomation 类进行了实验，在聚焦可编辑控件时直接调用 osk.exe，并在聚焦不可编辑控件时关闭该窗口。

但是，我仍然有三个问题：

1) 当打开一个 CFileDialog 应用程序变得无响应时。仅应用程序的另一个模态对话框发生同样的情况（在每个其他模态对话框中一切正常）。我发现 CFileDialog 打开了一些后台线程和我唯一有问题的模式。我怀疑这与线程问题有关。

2）当一些其他控件被聚焦时，然后我直接单击 CBS_DROPDOWN 组合框的下拉按钮，而不是选择它的编辑控件，我看到 OSK 出现和消失。使用 Spy++ 和 UIA Inspect 我怀疑文本编辑在组合框进入删除状态之前被聚焦。

3）用SetWindowPos做了一些实验后，MoveWindow

```
::MoveWindow(osk_wnd->m_hWnd, LeftOsk, TopOsk, -1, -1, FALSE); 
```

或者

```
osk_wnd->SetWindowPos(NULL, LeftOsk, TopOsk, -1, -1, SWP_NOSIZE | SWP_NOACTIVATE); 
```

并使用一些消息处理实验，如

```
//osk_wnd is a CWnd* variable that represents OSK main window
osk_wnd->PostMessage(WM_SYSCOMMAND, SC_MOVE + HTCAPTION, MAKELPARAM(point.x, point.y)); 
```

或者

```
POINT       point       = {0};

GetCursorPos(&point);
SendMessage(osk_wnd->m_hWnd, WM_NCLBUTTONDOWN, HTCAPTION, MAKELPARAM(point.x, point.y));

SendMessage(osk_wnd->m_hWnd, WM_NCMOUSEMOVE, HTCAPTION, MAKELPARAM(LeftOsk, TopOsk));

GetCursorPos(&point);
SendMessage(osk_wnd->m_hWnd, WM_NCLBUTTONUP, HTCAPTION, MAKELPARAM(LeftOsk + point.x, TopOsk + point.y)); 
```

我无法移动 OSK 窗口。我能移动它很重要；否则，它会出现覆盖焦点控件，并且用户看不到他给控件的输入！旁注：以下用于最小化 OSK 窗口的代码完美运行：

```
if(osk_wnd->IsIconic())
    osk_wnd->PostMessage(WM_SYSCOMMAND, SC_RESTORE, NULL); 
```

即使尝试使用此 AutoIt 脚本移动该窗口也无济于事：

```
If WinActivate("[CLASS:OSKMainClass]") Then

   If WinWaitActive("[CLASS:OSKMainClass]") Then

      ConsoleWrite("activ" & @CRLF)

      Sleep(500)

      If WinMove("[CLASS:OSKMainClass]", "", 30 ,320,360,123) Then
         ConsoleWrite("move 1" & @CRLF)
      EndIf
   EndIf
EndIf

If WinMove("[CLASS:OSKMainClass]", "", 30 ,320,360,123) Then
   ConsoleWrite("move 2" & @CRLF)
EndIf 
```

我看到文字

激活

移动 1

移动 2

正在打印，但 OSK 窗口没有被移动到任何地方。也许它正在积极拒绝定位指令。

我试过这个 AutoIt 脚本来移动 Tabtip.exe 窗口，但它也失败了。我试过这个脚本来移动 Visual Studio 命令提示符的窗口，它移动了！GRRRRR！

更新 3：在我看来，这与用户访问控制和权限有关。如果我禁用用户访问控制或以管理员身份运行应用程序，则 MoveWindow 指令可以完美运行！这同样适用于 AutoIt 试图移动 OSKMainCLASS 窗口！那么，Windows 7 中是否有一些本地或组策略允许我对 OSK 应用程序进行例外处理？

4) 为了让 osk.exe 在 64 位操作系统上运行，我尝试了所有不强制禁用 SysWOW64 重定向的方法，但我无法摆脱它。到目前为止，我没有看到任何问题，但也许下面的代码将来会导致问题。

```
const int sysDirNameSize= 1024;
TCHAR sysDir[sysDirNameSize];
if( !GetSystemDirectory( sysDir,  sysDirNameSize) )
{
    ASSERT(FALSE);
    return;
}

CString osk_path = CString(sysDir) + _T("\\osk.exe");
PVOID pOldValue = NULL;
BOOL bRes= Wow64DisableWow64FsRedirection(&pOldValue);
::ShellExecute(NULL, NULL, osk_path, _T("") , sysDir, SW_SHOW);
if(bRes)
    Wow64RevertWow64FsRedirection(pOldValue); 
```

更新 5：似乎我上次尝试执行 osk.exe 进程开始，但它的窗口没有出现！要将值归因于 osk_wnd，我有一个函数可以遍历 CWnd::GetDesktopWindow() 的所有 GW_CHILD 窗口来搜索 GetClassName(...) 为“OSKMainClass”但没有找到的那个！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:29:46.143

又一次，我自己解决了这个问题:)

1）阅读[http://social.msdn.microsoft.com/Forums/br/windowsaccessibilityandautomation/thread/aee0be4d-2cf5-45e7-8406-2de3e5d0af03](http://social.msdn.microsoft.com/Forums/br/windowsaccessibilityandautomation/thread/aee0be4d-2cf5-45e7-8406-2de3e5d0af03)和[http://www.c-plusplus.de/forum/285011-完整](http://www.c-plusplus.de/forum/285011-full)的（德语，但谷歌翻译可以帮助），我决定把相关的代码放在一个单独的线程上。打开 CFileDialog 窗口时不再挂起 :)

2）项目经理说这是一个小问题：）

3）在跟项目经理说执行osk.exe时需要传递一个安全令牌后，他回答说这会在代码中引入很多复杂性，因为一个非常简单的事情，最好是应用程序可以在管理员中运行模式 ：）

4）直到现在还没有引起问题，所以就这样吧:)

无论如何，谢谢你的帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-09-11T10:39:18.890

用于移动 OSK 窗口。最初通过命令提示将低完整性设置为 osk 屏幕。然后你使用movewindow函数。它不工作。

# javascript - 为什么这个 div 不为 null 而几乎相同的 div 为 null

> ID：14157890
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:14:10.010
> 
> 标签：javascript, html

```
<div id="List1" style="display:none">
    VIDEO 1</br>
    VIDEO 2</br>
    VIDEO 3</br>
</div>
<div id="List2" style="display:none"> 
    VIDEO 4</br>
    VIDEO 5</br>
    VIDEO 6</br>
</div>
<div id="List3" style="display:none">
    VIDEO 7</br>
    VIDEO 8</br>
    VIDEO 9</br>
</div> 
```

这是我使用的 javascript 代码：

```
 var div = document.getElementById("List"+id);

    if(div == null)
    {
        document.getElementById("List"+id).style.display = "block";
    } 
```

为什么 div id "List1" 不为空，而 div id "List2", "List3" 为空。

它们几乎完全一样...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:27:50.737

正如 Pulkit[之前提到](https://stackoverflow.com/questions/14157890/why-is-this-div-not-null-and-the-almost-same-div-is-null#comment19611291_14157890)的，这可能是因为`</br>`它不是 HTML 中的有效标签，您要查找的是`<br />`.

`</br>`是您从未打开过的内容的结束标记，因此您的整个 HTML 不平衡且格式不正确。可能您的浏览器无法正确解析它，留下一个糟糕的 DOM 模型。

# java - Primefaces - 不显示必填字段的消息，只是突出显示边框

> ID：14157892
> 
> 赞同：6
> 
> 时间：2013-01-04T13:14:14.913
> 
> 标签：java, forms, validation, jsf, primefaces

我有一个 Primefaces 3 字段表单和一个`<p:messages>`标签来显示一些服务器端验证消息。但我不想显示与`required="true"`选项相关的客户端消息，只需用红色突出显示输入字段。

有没有办法用 Primefaces 做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T13:21:01.830

您可以设置`<p:messages globalOnly="true"/>`，这将只显示全局消息，这些消息不附加到任何特定字段。您也可以使用 Primefaces'`<p:outputLabel/>`作为输入元素的标签，它会向输入元素添加错误 css。

您还应该在提交时更新表单。例如，如果您使用命令按钮添加`update="form_id"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T08:42:21.073

我是这样做的——> **render="#{not facesContext.validationFailed}"**

```
 <p:messages
    rendered="#{not facesContext.validationFailed}"
    id="msg"
    showDetail="true"
    autoUpdate="false"
    closable="true" /> 
```

# xaml - 使 Windows 8 ListView 项目只能从代码中选择

> ID：14157894
> 
> 赞同：0
> 
> 时间：2013-01-04T13:14:26.317
> 
> 标签：xaml, listview, microsoft-metro, winrt-xaml

我有一个启用单选的列表视图，但我只希望通过代码而不是通过用户交互来完成选择。原因是我使用 Vistual State Manager Selection 状态组作为处理渲染和动画“活动”状态转换的简单方法。除了我不希望用户能够设置“活动”项目之外，这一切都非常适合每个项目之间的良好过渡。

我已经尝试了一些明显的事情，比如覆盖 OnTapped Routed 事件并将 Handled 状态设置为 true，但该项目仍然被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:05:39.997

如果您希望您的用户仍然能够滚动但不能选择，一个不错的选择是将 ScrollView 与`IsHitTestVisible`设置为 False 的 ListView 结合起来：

```
<ScrollViewer Width="100" Height="100"
    HorizontalAlignment="Left" VerticalAlignment="Top"
    VerticalScrollBarVisibility="Auto">

    <ListView Name="Foo" BorderThickness="0" IsHitTestVisible="False">
        <System:String>Item 1</System:String>
        <System:String>Item 2</System:String>
        <System:String>Item 3</System:String>
        etc...
    </ListView>
</ScrollViewer> 
```

请注意，如果用户在 ListView 上获得焦点，他们将能够使用键盘更改 ListView 的选择，因此请确保不会发生这种情况。

# windows-phone - longlistselector 中的自动更新

> ID：14157895
> 
> 赞同：0
> 
> 时间：2013-01-04T13:14:28.213
> 
> 标签：windows-phone, windows-phone-8

我将 LongListSelector 控件与 ItemRealized Event 一起使用，它工作正常，但是当我更新分配给 LongListSelector 的 ItemSource 的列表时，LongListSelector 中的项目没有更新。

下面是我在 XAML 中使用的代码。

```
<phone:LongListSelector SelectionChanged="listBoxGroups_SelectionChanged_1" Grid.Row="1" x:Name="longListSelector" ItemTemplate="{StaticResource groupsItemTemplate}" Margin="0,100,0,0">
</phone:LongListSelector> 
```

在后面的代码中。

```
 public GroupsMainPage()
 {
        InitializeComponent();
        longListSelector.ItemRealized += longListSelector_ItemRealized;
        this.Loaded += GroupsMainPage_Loaded; 
 }

void longListSelector_ItemRealized(object sender, ItemRealizationEventArgs e)

    {
        if (!controller.IsLoading && longListSelector.ItemsSource != null && longListSelector.ItemsSource.Count >= 100)
        {
            if (e.ItemKind == LongListSelectorItemKind.Item)
            {
                if ((e.Container.Content as Result).Equals(longListSelector.ItemsSource[longListSelector.ItemsSource.Count -7]))
                {
                    connectToWebService();

                }
            }
        }
    } 
```

在收到来自 Web 服务的响应后，我只需执行以下操作。

```
private void WebServiceSuccessAction(Object obj)
{
    GroupModel.getInstance().GetGroupResponse((GroupResponse)obj);
    if (GroupModel.getInstance().GetGroupResponse().Response.errorCode == 0)
    {
         controller = new GroupController();
         if (fetchNumberofGroups <= 100)
         {
              this.ResultList = controller.GetGroupList();
              longListSelector.ItemsSource = this.ResultList;

         }
         else
         {
              controller.addNewGroupData();
              this.ResultList = controller.GetGroupList();

         }
    }
    else
    {
         List<Error> error = ConfigModel.getInstance().getConfigResponse().Response.data.errors;
         foreach (Error err in error)
         {
             if (err.code == GroupModel.getInstance().GetGroupResponse().Response.errorCode)
             {
                MessageBox.Show(err.text);
             }
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T14:36:09.563

我自己找到了解决方案。问题是 controller.addNewGroupData(); this.ResultList = controller.GetGroupList();

应该在

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {});block 
```

IE。

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {
                        controller.AddNewGroupData();
                        this.ResultList = controller.GetGroupList();
                    }); 
```

它现在工作正常。我研究了很多，但除了微软（twitter 示例）之外的任何网站都没有提到这个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T23:17:59.057

为了更新元素 LongListSelector 必须在源更新时收到 NotificationChange。所以你应该使用 ObservableCollection 而不是 List。

# asp.net-mvc-3 - 无法使用自定义验证属性显示 ErrorMessageResourceName

> ID：14157896
> 
> 赞同：1
> 
> 时间：2013-01-04T13:14:28.653
> 
> 标签：asp.net-mvc-3, validation, data-annotations

我已经根据这个[问题](https://stackoverflow.com/questions/7247748/mvc3-validation-require-one-from-group)创建了一个带有 asp.net mvc3 和 jquery validate 的自定义验证属性：

我已将其更新为使用一组字符串属性而不是 bool。哪个工作正常。但是当我将它与自定义 ErrorMessage 一起使用时，我的问题就出现了，自定义消息不显示。我不知道为什么。

```
[RequiredOneFromGroup("PhoneGroup", 
    ErrorMessageResourceName = "PhoneGroup", 
    ErrorMessageResourceType = typeof(WizardStrings))]
public String Mobile { get; set; } 
[RequiredOneFromGroup("PhoneGroup", 
    ErrorMessageResourceName = "PhoneGroup", 
    ErrorMessageResourceType = typeof(WizardStrings))]
public String Phone { get; set; } 
```

这是自定义验证属性：

```
[AttributeUsage(AttributeTargets.Property)]
public class RequiredOneFromGroup : ValidationAttribute, IClientValidatable
{
    public RequiredOneFromGroup(string groupName)
    {
        ErrorMessage = string.Format("You must select at least one value from group \"{0}\"", groupName);
        GroupName = groupName;
    }

    public string GroupName { get; private set; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        foreach (var property in GetGroupProperties(validationContext.ObjectType))
        {
            var propertyValue = (string)property.GetValue(validationContext.ObjectInstance, null);
            if ( ! string.IsNullOrWhiteSpace(propertyValue))
            {
                // at least one property is true in this group => the model is valid
                return null;
            }
        }
        return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
    }

    private IEnumerable<PropertyInfo> GetGroupProperties(Type type)
    {
        return
            from property in type.GetProperties()
            where property.PropertyType == typeof(string)
            let attributes = property.GetCustomAttributes(typeof(RequiredOneFromGroup), false).OfType<RequiredOneFromGroup>()
            where attributes.Count() > 0
            from attribute in attributes
            where attribute.GroupName == GroupName
            select property;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var groupProperties = GetGroupProperties(metadata.ContainerType).Select(p => p.Name);
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage
        };
        rule.ValidationType = string.Format("group", GroupName.ToLower());
        rule.ValidationParameters["propertynames"] = string.Join(",", groupProperties);
        yield return rule;
    }
} 
```

我试图删除 ErrorMessage 的手动设置，但我会收到一条空的错误消息。如何检索我在模型的命名参数中指定的 ErrorMessageResourceName 的值？以及如何设置它以便自定义验证属性显示它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:32:09.797

在您的`GetClientValidationRules`方法中替换：

```
var rule = new ModelClientValidationRule
{
    ErrorMessage = this.ErrorMessage
}; 
```

和：

```
var rule = new ModelClientValidationRule
{
    ErrorMessage = FormatErrorMessage(metadata.DisplayName)
}; 
```

还要摆脱`this.ErrorMessage = ...`构造函数中的行。您不能同时设置 ErrorMessage 并使用验证属性的 a`ErrorMessageResourceName`和`ErrorMessageResourceType`属性。这些东西是相互排斥的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:35:20.797

好吧，我在想不知何故，因为自定义验证属性继承自 ValidationAttribute，ErrorMessage 处理会自然而然地完成。不过，情况似乎并非如此。

我已经解决了这个问题，如下所示：

```
 public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var groupProperties = GetGroupProperties(metadata.ContainerType).Select(p => p.Name);
        var rule = new ModelClientValidationRule
        {
            // Replaced ErrorMessage with ErrorMessageString which 
            // will hold string value of ErrorMessageResourceName if there is
            ErrorMessage = this.ErrorMessageString
        };
        rule.ValidationType = string.Format("group", GroupName.ToLower());
        rule.ValidationParameters["propertynames"] = string.Join(",", groupProperties);
        yield return rule;
    } 
```

# bash - BASH 替换一行

> ID：14157897
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:14:29.150
> 
> 标签：bash, sed

如何用 bash 脚本中的空行替换与特定模式匹配的行？

例如：

```
-hello:world:this 
-is:an:example
-good:morning: 
```

然后当我使用参数`is`和`an`. 预期的输出是：

```
-hello:world:this:

-good:morning: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:27:47.847

你会做一个替换`sed 's/^.*is:an.*$//'`：

```
$ cat file
^[[A-hello:world:this 
-is:an:example
-good:morning:    

$ sed 's/^.*is:an.*$//' file
-hello:world:this 

-good:morning: 
```

解释：

使用 sed 的替换看起来像这样`s/regexp/replace/`替换与正则表达式匹配的行的任何部分并将其替换为`replace`.

正则表达式`^.*is:an.*$`匹配包含字符串的任何整行`is:an`并将其替换为空。

# android - 使用 AsyncTask 将进程移动到后台

> ID：14157898
> 
> 赞同：0
> 
> 时间：2013-01-04T13:14:32.077
> 
> 标签：android, android-asynctask, android-4.0-ice-cream-sandwich

以下代码在 android 2.3 中运行良好，但是当我将目标 sdk 更改为 15 时，一旦我按下登录按钮，它就会出错并关闭应用程序。

我搜索了很多，发现这是因为我试图从主方法或类似的方法访问外部数据库，我必须使用 AsynkTask 在另一个线程中执行这种过程，但我不知道如何？

这是我的登录代码

```
public class LoginActivity extends Activity {

Button btnLogin;

EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmail);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            Log.d("Button", "Login");
            JSONObject json = userFunction.loginUser(email, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS);

                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID));                     

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login

                        loginErrorMsg.setText("Incorrect username or password");
                        loginErrorMsg.setVisibility(1);
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:31:43.640

很可能你得到一个`NetworkOnMainThreadException`.
当应用程序尝试在其主线程上执行网络操作时，将引发此异常。它是在 API 级别 11 中添加的，所以是的，在 2.3 中不会有问题，但从 3.0 及更高版本开始，将抛出异常。

解决方案是将执行网络操作的代码部分放在一个`AsyncTask`，在您的情况下是登录和 JSON 数据的检索。

最常用的方法`AsyncTask`是：

> **onPreExecute()**，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。
> 
> **doInBackground(Params...)**，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。
> 
> **onPostExecute(Result)**，在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。

这里有一些资源可以帮助您开始使用 AsyncTask：http:
[//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)
[http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-一次又一次/](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)

# forms - 从终端提交 Web 表单

> ID：14157899
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:14:40.493
> 
> 标签：forms, terminal, submit

我正在尝试通过创建一个脚本来自动化 WordPress 安装，该脚本将完成所有开发前无聊的事情。因此，如果我在域上安装 WordPress，例如，`http://domain.tld`我是否可以以某种方式制作一个脚本，将填写预定义的用户名和密码的表单提交给`http://domain.tld/wp-install.php`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:24:10.997

我不知道 wp-install.php 长什么样，但你应该可以使用 curl。像这样的东西：

```
curl --data "username=myuser&password=mypassword" http://domain.tld/wp-install.php 
```

# magento - 未找到 Magento 运输方式

> ID：14157902
> 
> 赞同：0
> 
> 时间：2013-01-04T13:15:04.207
> 
> 标签：magento

我有一个有 2 家商店的 magento。商店 1 功能齐全，并使用默认运输方式。

当我们克隆第一家商店并添加新布局和新产品时，结帐过程告诉我没有可用的送货方式，但我可以在 magento 配置区域的该商店的设置中看到它已激活。

商店 1 保持完整功能，只有商店 2 没有按预期工作。

有任何想法吗？

# c++ - 我们可以从 C++ protobuf 消息包装器中获取 .proto 消息描述符吗？

> ID：14157904
> 
> 赞同：-1
> 
> 时间：2013-01-04T13:15:05.623
> 
> 标签：c++, protocol-buffers

假设我们有 C++ 文件但没有 .proto 文件。我们有一些想要从中获取原型描述符的消息（比如 C# protobuf-net 的特性，当我们可以通过 protobuf-net 类获得注释的原型描述时）。有没有获取此类消息描述的api？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:47:41.193

不，协议缓冲区消息不是自描述的。这是他们高性能魅力的一部分。如果您只有消息和 C++ 代码，那么您别无选择，只能阅读 C++ 代码并尝试手动重建 protobuf 规范。

# php - 停止SQL添加相同信息的多行

> ID：14157905
> 
> 赞同：0
> 
> 时间：2013-01-04T13:15:10.867
> 
> 标签：php, mysql

有没有一种方法可以签入我的 PHP 文件，在使用时将用户添加到我的数据库中。IE

John 使用我的程序，当他遇到错误时它会获取他的信息并将其发送到我的数据库，其中包含他的姓名、电子邮件和计算机操作系统。

现在这就是我想要的，但是如果 john 再次启动程序，它将向我的数据库发送另一个、重复的行副本，这是无用的，并且充满了无用的信息。

当前使用的代码：

```
$connect = mysql_connect('host','user','pass') or die("Error");
mysql_select_db('DB') or die("Error");
$Name    = $_GET['name'];
$Email   = $_GET['email'];
$OS      = $_GET['os'];
$add     ="INSERT INTO UserDB(Name, Email, OS, ) VALUES ('$Name', '$Email', '$OS')";
mysql_query($add,$connect);
mysql_close($connect); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:24:00.043

您需要数据库中的[唯一约束](http://www.w3schools.com/sql/sql_unique.asp)或适当的[主键](http://www.w3schools.com/sql/sql_primarykey.asp)。然后，当您的代码尝试插入重复行时，数据库将引发错误，您可以处理它。如果你想用新行替换旧行，你可能需要一个[upsert](https://stackoverflow.com/questions/1218905/how-do-i-update-if-exists-insert-if-not-aka-upsert-or-merge-in-mysql)。

这是[一篇关于选择主键的好文章](http://www.agiledata.org/essays/keys.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:27:54.407

无需创建大量额外逻辑，您就可以在数据库上创建唯一键关联。由于电子邮件地址是唯一的，您可以这样做：

**运行此 SQL**

这会添加唯一键并禁止在电子邮件地址上进行多次插入。

```
ALTER TABLE `UserDB` ADD UNIQUE(`Email`); 
```

**更改您的 PHP 代码查询**

如果没有插入，请使用此查询进行更新。

```
if(mysql_insert_id() < 1) {
    $add = sprintf(
            "UPDATE `UserDB` SET `Name`='%s', `Email`='%s', `OS`='%s' WHERE `Email`='%s'",
            $Name,
            $Email,
            $OS,
            $Email
    );
} 
```

**请切换到 mysqli 或 PDO，你很容易受到 SQL 注入！**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T13:24:38.297

您永远无法准确复制数据库中的行。必须始终有一个唯一的 ID。这通常是一个为每个新行自动递增的数字。如果在您的表中是这种情况，您必须简单地询问数据库当前用户是新用户还是现有用户。就像是：

```
$query = "SELECT id FROM UserDB WHERE Name='$name' AND Email = '$email'";
$result = mysql_query($query);
if(mysql_num_rows($result) == 0)
//Add user
else
//Update user? Or something else 
```

# html - 通过 css 调整图像大小

> ID：14157906
> 
> 赞同：0
> 
> 时间：2013-01-04T13:15:11.943
> 
> 标签：html, css, image, image-resizing

我使用以下 css 通过一个请求显示许多图像

```
div.image1{
   backgroud:url(image.png) -100px -2px no-repeat;
   width:80px;
   height:60px
} 
```

但是为了使我的网站对不同的显示器分辨率友好，我可能需要调整它的大小，但是当我改变它的宽度和高度时，图像看起来很糟糕并且不是全分辨率。

```
@media only screen and (max-width: 880px){
   div.image1{
       width:60px;
       height:44px
    }
} 
```

现在如果屏幕低于 880 像素，它将只显示 60x44 分辨率的图像，而不是完整的图像

我如何使它像一个普通的`<img />`标签，当我改变宽度和高度时它看起来还不错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:18:37.207

通过查看我阅读的[这篇文章](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)`img { max-width: 100%; }`，我想这就是您需要添加的所有内容。您也可以通过以下方式选择图像`<img src="smallRes.jpg" data-fullsrc="largeRes.jpg">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T15:16:34.730

结合媒体查询尝试以下属性：

```
.image {
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  width: 80px;
  height: 60px;
}

.image1 {
  background-image: url('https://c1.staticflickr.com/8/7405/26324518664_0d4e70e511_n.jpg');
}

.image2 {
  background-image: url('http://c2.staticflickr.com/8/7149/26855282121_fb57a99f0c_n.jpg');
}

@media only screen and (max-width: 880px){
  .image {
    width: 60px;
    height: 40px
  }
  .image1 {
    background-image: url('https://c1.staticflickr.com/8/7405/26324518664_0d4e70e511_s.jpg');
  }
  .image2 {
    background-image: url('http://c2.staticflickr.com/8/7149/26855282121_fb57a99f0c_s.jpg');
  }
} 
```

[https://jsfiddle.net/alexndreazevedo/1umatrtz/](https://jsfiddle.net/alexndreazevedo/1umatrtz/)

# java - 仅根据步行时间绘制地图

> ID：14157907
> 
> 赞同：3
> 
> 时间：2013-01-04T13:15:17.223
> 
> 标签：java, python, algorithm, optimization, graph-algorithm

给定一组节点之间的步行时间，是否有可能生成一张对地形进行最佳猜测的地图？

地形被假定为 2D，并且节点要么是可步行的，要么是不可步行的。所有节点之间的行走速度是恒定的。只有大约 20 个节点中的 1 个（在网格模型中）会有到达传感器。

**动机：**

我有一组数据告诉我人们何时到达建筑物中的某些点，但我没有任何定位系统。我想要一张平面图的示意图。

**进一步的并发症：**

1.  这可以扩展到 3D 地图（例如不同的楼层）。

2.  这可以扩展到考虑具有不同步行速度的边缘吗？

**生成的平面图示例：**

![样品平面图](../Images/a9259dd9994bdd112a644e5faa99aca3.png)

编辑：Java/Python 不重要，它们恰好是我目前使用的语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:55:37.013

我将继续对这个问题说“是”。

假设您知道节点的位置和节点之间的步行时间。即使步行时间不一致，我也很确定您可以使用它来最好地猜测地形。您可以使用贝叶斯网络，尽管它是一个 NP 难题。

您将根据平均步行时间的猜测为路径提供置信度。您还需要知道它是更快或更慢时间的概率以及不同时间集的可能路线。有了这些信息，您就可以绘制给定时间内最可能的路线。

您不会准确地知道平均步行时间，因此您将反馈您更新的地形图，以尝试使该数字更准确。

使用来自所有可用节点的组合的这些置信度水平，似乎可以至少绘制建筑物周围最受欢迎的路线并确定可能存在障碍物的位置。

您拥有的节点越多，获得的步行信息越多，最终的地图就越准确，但计算成本也越高。

我不确定最终的结果会有多大的用处，但是无论如何你都可以猜到。

# css - CSS - 缩进除第一行之外的所有内容

> ID：14157908
> 
> 赞同：5
> 
> 时间：2013-01-04T13:15:20.430
> 
> 标签：css, twitter-bootstrap, indentation, line-breaks, content-length

**2013-01-04 更新**

*   flexbox 解决方案几乎不需要额外的 HTML / CSS。但是目前还不清楚它是否可以在 Firefox 和 IE10 中运行？
*   在 CSS 内容中添加减号`:before`而不是 HTML 是一种更好的方法。

**信息**

我有一张包含一些内容的表格。根据深度，我在文本前有一些减号。

**问题/问题**

我不知道如何使文本右对齐和减号左对齐，即使换行符准确。减号的数量和文本长度可能会有所不同。

**jsfiddle 上的示例**

喜欢就编辑吧...

[http://jsfiddle.net/Rjvc9/](http://jsfiddle.net/Rjvc9/)

**HTML 如果 jsfiddle 不起作用**

```
<table>
    <td>            
        <span class="lines">----</span> <span class="text">My page that is far too long for it to fit on one row</span>
    </td>
</table>

<br>

This is how it should work.<br><br>

<table>
    <td>            
        <span class="lines">----</span> <span class="text">My page that is far<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too long for it to fit<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on one row</span>
    </td>
</table>​ 
```

**CSS 如果 jsfiddle 不起作用**

```
table {
    background: #eee;
    width: 150px;
}

td {
    font-family: Arial;
    font-size: 14px;
    line-height: 18px;
    margin: 40px;
}​ 
```

**我的想法**

*   我想我可以巧妙地使用缩进，但这似乎不起作用。
*   我喜欢显示：内联。如果它可以保持这种方式会很好，但也许这是不可能的？
*   它应该适用于更少的减号字符和更长/更短的文本。
*   它不必与旧浏览器一起使用。
*   在 jQuery / javascript 之前，我更喜欢 CSS。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T14:20:12.757

### 使用负数`text-indent`！

A`text-indent`缩进第一行。所以给它一个负值！

```
.first-line {text-indent: -5em; padding-left: 5em;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T13:26:29.397

这样的事情应该这样做：

```
display: block;
padding-left: 37px;
text-indent: -37px; 
```

您将在第一行给出一个负缩进，因​​此它将被放置在左侧 X 像素。通过给整个元素一个相同数量的 px 的 padding-left，这将再次将它全部放置在正确的位置。

另见：http: [//jsfiddle.net/Rjvc9/3/](http://jsfiddle.net/Rjvc9/3/)

注意：`display: inline`不适用于此。`display:inline-block`将要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:28:41.147

使用 CSS 的`content`属性，您可以将减号字符插入页面并定位/设置它们的样式，而无需将它们包含在 HTML 中或将它们包装在任何标签中。

我修改了您的示例[http://jsfiddle.net/cchana/Rjvc9/2/](http://jsfiddle.net/cchana/Rjvc9/2/)现在它通过为单元格提供一些填充和位置属性来工作，如下所示：

```
td {
    padding: 0 0 0 24px;
    position: relative;
} 
```

然后我将`----`字符添加到单元格的开头，`content`然后正确定位：

```
td:before {
    content: '----';
    left: 0;
    position: absolute;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T14:17:25.863

只要你的单元格没有边框，flexbox 就可以在这里为你工作。

```
td.dashed {
    display: -webkit-flex;
    display: flex;
} 
```

Demo 使用 span 或使用 before psuedo 元素上的内容来包含虚线。不适用于 IE10 之前的任何东西。Mozilla 似乎不喜欢这样，但它应该支持 flexbox。

[http://jsfiddle.net/Rjvc9/9/](http://jsfiddle.net/Rjvc9/9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T18:13:02.477

由于您使用的是`table`元素，请将“减号”（实际上是 Ascii 连字符，正式的 HYPHEN-MINUS 字符）放在它们自己的列中。您还应该使标记有效（`td`元素只能是 的子元素`tr`）。

```
<table>
  <tr>
    <td class="lines">----</td>
    <td class="text">My page that is far too long for it to fit on one row</td>
</table> 
```

在 CSS 中，添加`td { vertical-align: top; }`. `<tr valign=top>`（或者为每个`tr`元素添加相应的 HTML 标记 , 。

默认情况下，列将左对齐，您可以根据需要进行调整。在现代浏览器上，您甚至不需要`class`属性，因为您可以使用选择器`td:first-child`等`td:first-child + td`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-20T21:20:55.840

对于内联显示，您必须混合使用负边距和负文本缩进。这是一个带有示例的工作 jsfiddle：

```
#thisList ul li a {
    color:#333;
    text-indent:-1.5rem;
    margin-left:-2rem;
    line-height:1;
} 
```

[JS小提琴](http://jsfiddle.net/codesushi156/yzez2bj3/ "JS小提琴")

# c# - 总是在最上面，但需要消息框和组合框

> ID：14157912
> 
> 赞同：1
> 
> 时间：2013-01-04T13:15:42.523
> 
> 标签：c#, combobox, modal-dialog, messagebox

我有一个设置为始终在顶部的表单。我通过下面代码中显示的计时器每 500 毫秒强制执行一次。计时器正在从子线程启动。

表单有时必须引发错误，但这不是模态的，用户最终不得不单击它两次 - 一次使其成为模态，一次确认它（如果他们做得足够快）

用户还可以提出一个以主要形式的面板中的组合蛋白组合框）。

我怎样才能修复它是模态的消息框？我怎样才能修复组合框，它继续列出其中的项目而不清除谢谢 damo

**计时器使表格始终位于顶部**

```
// Restore the form.
this.Visible = true;
this.TopMost = true;
this.WindowState = FormWindowState.Maximized;
this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.Sizable;
this.Show(); 
```

**消息框**

```
MessageBox.Show(this,"hello world", "myApplication"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:19:20.033

只需在显示消息框之前禁用计时器并在显示消息框后重新启用：

```
timer1.Enabled = false;
MessageBox.Show(this,"hello world", "myApplication");
timer1.Enabled = true; 
```

这当然可以在一种方法中，因此您不必复制代码：

```
public void ShowMessage(string title, string message)
{
   timer1.Enabled = false;
   MessageBox.Show(this,message, title);
   timer1.Enabled = true;
} 
```

由于`MessageBox.Show`是阻塞命令，定时器只有在 MessageBox 关闭后才会重新启用

# c++ - 访问冲突读取位置 0x0000000c。VC++ 和黑暗 GDK

> ID：14157915
> 
> 赞同：1
> 
> 时间：2013-01-04T13:15:54.593
> 
> 标签：c++, visual-c++

我正在使用 Visual c++（Visual Studio 2008 Express Edition）、DirectX SDK（2007 年 8 月）和 Dark GDK 开发纸牌游戏。在安装软件时，我已仔细遵循所有说明。

但是在运行任何示例代码时，我收到此错误“访问冲突读取位置 0x0000000c”。以及各种对话框，例如“无法获取设备上限”、“无法找到有效的模板缓冲区”、“无法创建设备”、“无法设置 3D 设备”

我已经仔细地在 VC++ 中包含了包含和库文件。

请有人帮我摆脱这个问题

```
#include "DarkGDK.h"
void DarkGDK ( void )
{
dbSyncOn ( );
dbSyncRate ( 60 );
dbCreateAnimatedSprite ( 1, "animatedsprite.png", 4, 4, 1 );
while ( LoopGDK ( ) )
{
    dbPasteSprite ( 1, 0, 0 );
    dbPlaySprite ( 1, 1, 16, 200 );
    dbSync ( );
}
return;
} 
```

# ruby - 工头从手动路径开始

> ID：14157917
> 
> 赞同：4
> 
> 时间：2013-01-04T13:16:02.150
> 
> 标签：ruby, heroku, foreman

我正在尝试在 heroku 上运行工头。这是一个常见的错误，但是，我仍然没有找到解决方案。这里显然缺少一条路径：

"/c/ **Program Files** /ruby-1.9.2/bin/foreman: "C:/ **Program** : bad interpreter: no such file or directory

我的问题是：有没有办法通过手动添加整个路径来避免这个错误？或者我应该去哪里改变它？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:13:27.923

这是在 Windows 环境中在 Git bash shell 中运行工头的一个已知问题。（[见github问题](https://github.com/ddollar/foreman/issues/166)）

当前唯一的解决方法是在另一个环境中运行 foreman，例如 Windows cmd 提示符或 powershell。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T22:10:43.470

在阅读了 knut 对这个问题的回答后，我通过将 Heroku Toolbelt 重新安装到*c:\heroku*在我的系统上解决了这个问题。重新安装后，*heroku*命令有效，但*工头*无法运行。我通过手动将以下内容添加到我的系统路径来解决此问题。

```
C:\heroku\ruby-1.9.2\bin 
```

您可能需要搜索 foreman 程序以获取适合您的系统的上述路径的版本。

我还需要用 0.61 替换工头版本 0.62，这是我从[这篇文章](https://stackoverflow.com/a/15726134/754381)中学到的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T23:34:17.583

我不认识工头，但我从其他宝石那里知道这个问题。也许以下工作：

不要在 中安装 ruby​​ (resp. foreman) `c:\Program Files\...`，使用没有空格的安装路径。

我的 ruby​​ 安装在没有空格的路径中，当我启动工头时，工头被执行（并因错误而停止（`[...]lib/foreman/process.rb:54:in spawn': Exec format error - ./spawner (Errno::ENOEXEC)`- 但我认为这是我的测试数据的问题）。

**背景：**

在任何地方都使用参数调用脚本`c:\Program Files\...`，但 windows 将其作为两个参数`c:\Program`和`Files\...`. 通常你可以屏蔽参数`"`，但我没有发现问题发生的地方 - 对不起。

# android - 带有可点击 TextViews 的 Android ScrollView

> ID：14157923
> 
> 赞同：2
> 
> 时间：2013-01-04T13:16:17.547
> 
> 标签：android, intellij-idea, scrollview

我目前正在处理应用程序的设计，但我不知道如何去做。我的应用程序需要用户阅读特定信息的部分。

我的设计是这样的：

**一、引言**

1.  第1部分
2.  第2部分

**二、第二个主题**

1.  第一部分
2.  b部分

**第1部分**

这里的细节 - 长解释

**第2部分**

这里的细节 - 长解释

（续）

编号的部分是可点击的，因此具有转到滚动视图中某个部分的功能。（例如，当单击 1\. part 1 时，它将转到 1\. part 1 的部分，并在同一滚动视图中显示详细信息）这实际上就像在某些应用程序中看到的那样。

此外，当用户没有点击可点击项目时，用户可以向下滚动所有写入的信息。我计划在返回按钮之外有一个单独的按钮，如果用户想要，当已经到达信息的很远部分时，它将转到顶部或可点击的项目。

以前，我在 IntelliJ 12 中为此使用了绝对布局，但我读过一些论坛，不能使用绝对布局，而且它与滚动视图不兼容。所以我改为线性布局，即使我已经无法设置我喜欢的绝对布局的 x 和 y 坐标。

我的代码在正确的轨道上吗？或者还有其他方法可以做到这一点？

这是我在 XML 部分的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent" android:background="#ffffff">

<ScrollView
        android:layout_width="fill_parent"
        android:layout_height="330dp"
        android:id="@+id/scrollView" android:layout_gravity="center">
    <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" android:background="@drawable/white_paper_complete">

        <TextView
                android:layout_width="48dp"
                android:layout_height="wrap_content"
                android:id="@+id/txt_space" android:layout_gravity="center"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="26dp"
                android:text="I. INTRODUCTION"
                android:id="@+id/textView" android:textStyle="bold" android:textColor="@android:color/black"
                android:textSize="16dp" android:layout_y="19dp"
                android:layout_gravity="left|center_vertical" android:layout_marginLeft="46dp"/>
        <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="              1\. Tax Payer"
                android:id="@+id/textView1" android:clickable="true" android:layout_x="55dp" android:layout_y="44dp"
                android:linksClickable="false" android:textColor="@android:color/black"
                android:layout_gravity="center|left"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="              2\. Tax Identification Number (TIN)"
                  android:id="@+id/textView2" android:clickable="true" android:layout_x="55dp" android:layout_y="64dp"
                  android:linksClickable="false" android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              3\. National Internal Revenue Code" android:id="@+id/textView3" android:clickable="true"
                  android:layout_x="55dp" android:layout_y="84dp" android:linksClickable="false"
                  android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              4\. Republic Act No. 8424" android:id="@+id/textView4" android:clickable="true"
                  android:layout_x="55dp" android:layout_y="104dp" android:linksClickable="false"
                  android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              5\. Bureau of Internal Revenue (BIR)" android:id="@+id/textView5" android:clickable="true"
                  android:layout_x="55dp" android:layout_y="124dp" android:linksClickable="false"
                  android:textColor="@android:color/black"/>
        <TextView android:layout_width="fill_parent" android:layout_height="wrap_content"
                  android:id="@+id/textView14" android:clickable="true" android:layout_x="55dp"
                  android:layout_y="235dp" android:linksClickable="false" android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="           II. INCOME TAX IN THE PHILIPPINES" android:id="@+id/textView6" android:textStyle="bold"
                  android:textColor="@android:color/black" android:textSize="16dp" android:layout_x="40dp"
                  android:layout_y="150dp"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="              1\. Income Tax"
                  android:id="@+id/textView7" android:clickable="true" android:layout_x="55dp" android:layout_y="175dp"
                  android:linksClickable="false" android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="              2.Taxable Income"
                  android:id="@+id/textView8" android:clickable="true" android:layout_x="55dp" android:layout_y="195dp"
                  android:linksClickable="false" android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              3.Who are exempted from Income Tax?" android:id="@+id/textView9" android:clickable="true"
                  android:layout_x="55dp" android:layout_y="215dp" android:linksClickable="false"
                  android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              4\. How are Income Taxes being paid?" android:id="@+id/textView10"
                  android:clickable="true" android:layout_x="55dp" android:layout_y="235dp"
                  android:linksClickable="false" android:textColor="@android:color/black"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              5\. Income Tax Return (ITR)" android:id="@+id/textView12"
                  android:clickable="true" android:layout_x="55dp" android:layout_y="235dp"
                  android:linksClickable="false" android:textColor="@android:color/black"
                  android:layout_gravity="center_vertical"/>
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:text="              6 Who are required to file ITR" android:id="@+id/textView13"
                  android:clickable="true" android:layout_x="55dp" android:layout_y="235dp"
                  android:linksClickable="false" android:textColor="@android:color/black"
                />
        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
                  android:id="@+id/textView11"
                  android:clickable="true" android:layout_x="55dp" android:layout_y="235dp"
                  android:linksClickable="false" android:textColor="@android:color/black"
                />
    </LinearLayout>
</ScrollView>
<Button
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:text="Back"
        android:id="@+id/button" android:layout_gravity="center" android:background="@drawable/black_btn"
        android:textColor="#ffffff"/>
</LinearLayout> 
```

这是我的类代码：

```
public class Tutorial extends MyActivity
{
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tutorial_design);

    TextView a = (TextView) findViewById(R.id.txt_about) ;
   final TextView b = (TextView) findViewById(R.id.txt_info) ;
    TextView c = (TextView) findViewById(R.id.txt_calcu) ;
    TextView e = (TextView) findViewById(R.id.txt_exit) ;

   final ScrollView x = (ScrollView) findViewById(R.id.scrollView);

    a.setOnClickListener(new TextView.OnClickListener() {
        @Override
        public void onClick(View v)
        {
                //int location_x[] = new int[85];
               //int location_y[] = new int[200];

                //x.getLocationOnScreen(location_x);
           x.scrollTo(85,10000);

        }
    });
}

} 
```

请帮帮我。：（ 任何帮助将不胜感激！ ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:24:45.350

也许不是您要找的东西，但您最好使用带有链接的单个 HTML 文档，例如`<a href="#part1">`？

然后，您在 WebView 中显示 HTML，您将拥有可点击的链接和可滚动的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:38:55.833

看看你是否使用了 View 的`requestRectangleOnScreen(rectangle)`or`requestFocus()` 方法。

例如：如果点击主题 1。并且您知道主题的内容由某个 topicOneTextView 或任何视图显示。然后尝试调用

```
topicTextView.requestRectangleOnScreen(rectangle) 
```

如有必要，这将滚动。

希望这可以帮助

# .net - 具有两个控件的视图，绑定到相同的数据

> ID：14157924
> 
> 赞同：0
> 
> 时间：2013-01-04T13:16:18.360
> 
> 标签：.net, wpf, mvvm, caliburn.micro

我想知道如何将 1 个视图与两个`ItemsControl`绑定到同一个视图模型。

这就是我所拥有的：

视图模型：

*   **MonitoredItemViewModel.cs**
*   **MonitoredItemsViewModel.cs**（包含属性 BindableCollection MonitoredItems 和一些命令）

意见：

*   **MonitoredItemView.xaml**
*   **MonitoredItemsView.xaml**（显示 MonitoredItemViewModel 的集合，使用两个不同的控件）

在我的 MonitoredItemsView.xaml 中，我希望有一个 WpfToolkit`DataGrid`来显示有关 -collection 中每个对象的详细信息`MonitoredItems`，以及`ItemsControl`我想要显示相同数据的位置，但以不同的方式（根据 MonitoredItemView.xaml）

通过设置

```
<wtk:DataGrid x:Name="MonitoredItems" Height="Auto" AutoGenerateColumns="False" HorizontalAlignment="Stretch" Margin="0" Width="Auto" VerticalAlignment="Stretch">
...
</wtk:DataGrid> 
```

Caliburn.Micro 根据名称为数据网格解决了这个问题。

如何让我的 ItemsControl 绑定到相同的数据？绑定通过设置工作

```
<ItemsControl ItemsSource="{Binding MonitoredItems, Mode=TwoWay}">
...
</ItemsControl> 
```

但后来我没有得到根据**MonitoredItemView.xaml对每个项目进行模板化的 Caliburn.Micro-magic**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:54:16.773

好的，将尝试在这里回答，但我承认我以前没有使用过 Caliburn.Micro。

如果`ItemsControls`视图上有两个，并且希望它们绑定到单个视图模型对象中的同一个集合，那么标准绑定机制将起作用。可以将多少控件绑定到同一属性没有（真正的）限制。

如果您希望每个控件以不同的方式显示数据，则可接受的方法是用 a 覆盖`ItemTemplate`您`ItemsControl`想要`DataTemplate`的数据布局。这些`DataTemplate`s 可以放在单独的资源字典中以供重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:52:39.087

您可以只使用`Bind.Model`附加的属性

例如

```
<ItemsControl ItemsSource="{Binding MonitoredItems, Mode=TwoWay}" cal:Bind.Model="{Binding PathToVMToBindTo}">
    ....
</ItemsControl> 
```

然后 CM 将使用它应用它的约定`ViewModelBinder`

如果有疑问，请阅读 CodePlex 网站上的 CM 文档（与许多其他项目相比，它们非常简洁）并在那里查看源代码：

[http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation)

以下是 Caliburn Micro 类的`Model`附加属性的`Bind`作用：

```
/// <summary>
///   Hosts dependency properties for binding.
/// </summary>
public static class Bind
{
    /// <summary>
    ///   Allows binding on an existing view. Use this on root UserControls, Pages and Windows; not in a DataTemplate.
    /// </summary>
    public static DependencyProperty ModelProperty =
        DependencyProperty.RegisterAttached(
            "Model",
            typeof(object),
            typeof(Bind),
            new PropertyMetadata(null, ModelChanged)
            );

    static void ModelChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (Execute.InDesignMode || e.NewValue == null || e.NewValue == e.OldValue)
        {
            return;
        }

        var fe = d as FrameworkElement;
        if (fe == null)
        {
            return;
        }

        View.ExecuteOnLoad(fe, delegate
        {
            var target = e.NewValue;
            var containerKey = e.NewValue as string;

            if (containerKey != null)
            {
                target = IoC.GetInstance(null, containerKey);
            }

            d.SetValue(View.IsScopeRootProperty, true);

            var context = string.IsNullOrEmpty(fe.Name)
                              ? fe.GetHashCode().ToString()
                              : fe.Name;

            ViewModelBinder.Bind(target, d, context);
        });
    } 
```

# vb.net - 在 XML 文件中查找注释掉的文本

> ID：14157929
> 
> 赞同：1
> 
> 时间：2013-01-04T13:16:33.147
> 
> 标签：vb.net, linq-to-xml

我正在使用 Linq-to-XML 处理 xsd 文件（我将其视为 xml 文件），并且我正在尝试提取有关某些枚举的信息。这是 xsd 文件的一个片段：

```
<xs:simpleType name="YorNA">
    <xs:restriction base="xs:int">
        <xs:enumeration value="1"/>
        <xs:enumeration value="-1"/>
        <!-- Yes -->
        <!-- Not Applicable -->
    </xs:restriction>
</xs:simpleType> 
```

我可以得到名称和枚举值，但我想列出值的含义，作者在枚举下方注释掉了行。是否可以专门搜索这些节点，或者我只需要使用其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:11:45.880

当你有节点的[XElement](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)时，你可以搜索[这里](https://stackoverflow.com/questions/6277966/reading-xml-comments-in-c-sharp)`<xs:enumeration>`描述的注释（我知道，这个例子是 C#，但在 VB 中应该不难采用）：

```
var comments = element.Descendants().OfType<XComment>();
foreach (XComment comment in comments) {...} 
```

# sql - 多条记录的 SQL CTE

> ID：14157933
> 
> 赞同：0
> 
> 时间：2013-01-04T13:16:46.907
> 
> 标签：sql, common-table-expression

我有一张如下表：

```
StudentID CourseID    StartDate    EndDate
    1        1       12/21/2012    12/23/2012
    1        2       12/31/2012    1/2/2013
    2        1       12/10/2012    12/10/2012 
```

如何获得如下输出（使用 CTE 或任何其他技术）

```
StudentID CourseID    Date
   1         1      12/21/2012
   1         1      12/22/2012
   1         1      12/23/2012
   1         2      12/31/2012
   1         2      01/01/2013
   1         2      01/02/2013
   2         1      12/10/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:19:42.950

您可以使用以下内容：

```
;with dates(studentid, courseid, date, enddate) as
(
  select studentid, courseid, startdate, enddate
  from yourtable
  union all
  select studentid, courseid, dateadd(day, 1, date), enddate
  from dates
  where dateadd(day, 1, date) <= enddate
)
select studentid, courseid, date
from dates
order by studentid, courseid; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d4b98/8)

结果是：

```
| STUDENTID | COURSEID |       DATE |
-------------------------------------
|         1 |        1 | 12/21/2012 |
|         1 |        1 | 12/22/2012 |
|         1 |        1 | 12/23/2012 |
|         1 |        2 | 12/31/2012 |
|         1 |        2 | 01/01/2013 |
|         1 |        2 | 01/02/2013 |
|         2 |        1 | 12/10/2012 | 
```

# jquery - orientationchange 事件触发滚动和调整大小事件

> ID：14157942
> 
> 赞同：5
> 
> 时间：2013-01-04T13:17:32.010
> 
> 标签：jquery, mobile, orientation, mobile-safari

对于我正在进行的一个项目，我遇到了一个奇怪的问题，我在这里（或其他任何地方）找不到答案。

我尝试创建一个 Fiddle 来演示会发生什么，但由于我的脚本的性质以及 jsfiddle 的运行方式，它无法正常工作。无论如何，[这里有一个指向 Fiddle 的链接，](http://jsfiddle.net/c_kick/Wcnef/)所以至少你会有代码。

**我想要发生的事情**

`onViewportChange`对三个可能的`window`事件执行单个处理程序 ( ) `resize`：`orientationchange`和`scroll`。根据事件类型，处理程序将确定要做什么。听起来很简单。

**我做了什么**

对于此示例，出于测试目的，我已将处理程序限制为回显事件类型：

```
var onViewportChange = function(e) {
    alert(e.type);
}; 
```

我将处理程序绑定到事件：（我也尝试过`.bind()`使用事件数组和几个单独的绑定）

```
$(window).on({
    'orientationchange resize scroll' : function(e){
        onViewportChange(e);
    }
}); 
```

HTML 是完全空的，除了任意基本元素（doctype、html、body 和当然 jquery 和这个脚本）

**实际发生了什么**

现在变得奇怪了：这些事件在桌面浏览器上触发得很好（主要是因为没有触发orientationchange 事件），但在移动设备上却没有（在iOS6+ iPad 第三代和iOS6+ iPhone 5 上测试）。当我旋转我的设备时；

*   iPad 和 iPhone 三个都火了：`orientationchange`，`resize`紧随其后`scroll`
*   iPhone 上的 Chrome 起火`resize`了`orientationchange`
*   我借用的 Android 手机触发器`orientationchange`，然后`resize`

（请注意，由于竞争条件，事件的顺序可能不准确。）

这就是我将它链接到`orientationchange`事件的原因：当我删除`orientationchange`事件（离开`resize`和`scroll`）时，只有`scroll`事件在设备旋转时被触发，但不再是`resize`事件。

我不明白为什么所有事件都会同时触发。至少; 我可以想象 a`resize`是在 an 上触发的，`orientationchange`因为窗口尺寸发生了变化，但是 a `scroll`?

有谁知道为什么会这样？

**编辑**我在这里设置了一个演示：http: [//beta.hnldesign.nl/orientation/index.html](http://beta.hnldesign.nl/orientation/index.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T21:27:10.563

嗯，试试这个（从 jQuery API 文档中提取...）[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(window).on({
  orientationchange: function(e) {
    onViewportChange(e);
  }, resize: function(e) {
    onViewportChange(e);
  }, scroll: function(e) {
    onViewportChange(e);
  }
}); 
```

这应该工作......也许你需要调整代码多一点

# java - Maven不添加库

> ID：14157943
> 
> 赞同：1
> 
> 时间：2013-01-04T13:17:34.457
> 
> 标签：java, maven, dependencies

我使用 Eclipse 和 Apachw Maven。我为 Eclipse 安装了 Maven 插件。并有项目。我将 servlet-api 的一些依赖项添加到我的 pom 文件中，您可以看到它们：

```
<dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>jstl-impl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp.jstl</groupId>
            <artifactId>jstl-api</artifactId>
            <version>1.2</version>
        </dependency> 
```

我刷新了我的项目，使 Maven 干净，然后打包，但结果我得到了这个：

![在此处输入图像描述](../Images/07312d31f957ab330c63d73ec35932a0.png)

所以mabe有人可以帮助我吗？（我可以在 web-inf/lib 文件夹中下载并添加所有这些库，但我不想这样做）

**更新**

![在此处输入图像描述](../Images/129006f25ce43ca975e515feb70eb347.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:20:43.910

根据您发布的带有库选项卡的图像，该项目没有作为 Maven 项目导入，并且看起来更像 Eclipse 项目（动态 Web 项目），因为它没有“Maven 依赖项”条目。

在这种情况下，您可以使用 Existing Maven Projects 选项重新导入您的项目（不是将现有项目导入工作区）或...

您可以保持原样并“添加库”>“服务器运行时”并选择一些服务器实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:30:43.390

在 Eclipse 中使用 Maven 项目可能有点棘手。您可以尝试以下步骤：

*   通过命令行构建你的 maven 项目：在你的项目文件夹中，输入`mvn clean install`
*   项目构建成功后，在 Eclipse 中刷新项目
*   在 Eclipse 中清理您的项目，以重建您的工作区

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T13:27:45.120

尝试`mvn eclipse:eclipse`在您的项目上运行，这将为您的项目创建 .classpath 和 .project 文件。您还需要通过执行**Project -> Clean在 Eclipse 中重建您的项目**

您遇到的问题是库不在您的 .classpath 中，运行 eclipse:eclipse 应该对此进行排序。

.classpath 和 .project 是 Eclipse 特定的文件，包含有关项目的元数据。.classpath 特别指向相关类的位置。

有关更多信息，请参阅[http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)。

# java - 使用 Java 和 Spring 进行分布式计算我应该使用消息传递、Web 服务还是 EJB？

> ID：14157945
> 
> 赞同：0
> 
> 时间：2013-01-04T13:17:38.660
> 
> 标签：java, web-services, spring, ejb

我在一家刚接触 java 的公司工作，我是唯一的 java 程序员，我需要在几个月内编写大约 10 个系统。该公司还有另外 2 名了解基本 java 的程序员。不是春天或类似的东西。

该公司在 LDAP、MySQL 和 AS/400 上拥有用户数据。我正在想一些简单的方法来与 2 Jr Programmers 一起工作。我正在考虑让他们使用消息传递、Web 服务或 EJB 调用来处理所有难以获取的数据。

让他们用 Java 和 Springs 做前端，然后调用 Web 服务或 EJB。

我想听听这方面的一些最佳方法和最佳方法。所有项目都是 Web 应用程序。

我应该使用 Web 服务还是 EJB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:58:26.740

我的建议是使用 Camel 作为由消息传递支持的 EIP（企业集成模式）提供商。

这是 Camel 的主要用例，它非常适合透明地处理跨平台的分布式模式。

Camel + Spring + ActiveMQ 是一个很棒的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:52:00.903

如果您需要将 Web 服务与不同的系统集成（例如，数据需要通过 .NET 代码、预先存在的应用程序等访问），Web 服务将使其更加松散耦合并且更容易。

EJB 不会那么干净，如果您需要从 Java 以外的其他东西访问它，它会更加痛苦。但是，如果您停留在 Java 中，EJB 将比 Web 服务性能更高，开销会更小，它可能会更快。

对我来说，消息传递似乎是一种介于两者之间的解决方案：两种方法的优点。

# php - Zend\Http\Request 在 toString() 中失败并带有 post 值

> ID：14157947
> 
> 赞同：0
> 
> 时间：2013-01-04T13:17:46.783
> 
> 标签：php, zend-framework2

我正在处理这个*新的*Zend Framework 版本。如[手册](http://framework.zend.com/manual/2.0/en/modules/zend.http.request.html#quick-start)`toString()`页所示，我希望返回*POST*内容：

```
use Zend\Http\Request;

class RequestTest extends \PHPUnit_Framework_TestCase
{
    public function testARequestWithAPostValue()
    {
        $request = new Request();
        $request->setMethod(Request::METHOD_POST);
        $request->setUri('/foo');
        $request->getPost()->set('foo', 'bar');

        $string = "POST /foo HTTP/1.1\r\n\r\nfoo=bar&";
        $this->assertEquals($string, $request->toString());
    }
} 
```

但该区域似乎是空的：

```
1) RequestTest::testRequestWithAPostValue
Failed asserting that two strings are equal.
--- Expected
+++ Actual
@@ @@
 'POST /foo HTTP/1.1

-foo=bar&'
+' 
```

Zend Framework 2 作为供应商通过`composer`with安装`require "zendframework/zend-http": "2.0.6"`。在`PHP 5.4.9`和`PHP 5.3.10`。

这是一个**错误**还是我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T03:03:21.920

很难说它是否是一个错误。然而，行为似乎不一致或至少不直观。这是可以按预期工作的示例：

```
use Zend\Http\Request;

class RequestTest extends \PHPUnit_Framework_TestCase
{
    public function testARequestWithAPostValue()
    {
        $string = "POST /foo HTTP/1.1\r\n\r\nfoo=bar;bar=foo";
        $request = Request::fromString($string);

        $this->assertEquals($string, $request->toString());
    }
} 
```

回显 $request 将输出：

```
POST /foo HTTP/1.1

foo=bar;bar=foo 
```

方法命名、文档和预期用途令人困惑：表单字段可以存储为原始字符串或对象参数。*Request::toString()*方法不能优雅地处理这两种情况。

从字符串创建*Request*对象时，表单字段将使用*Request::setContent()*方法存储为原始字符串。当调用*Request::toString()*方法时，将调用*Request::getContent()*方法，同时构成*Request*对象的字符串表示；

如果您想将表单字段保留为对象，则必须自己创建*Request*对象的字符串表示形式。

```
use Zend\Http\Request;
use Zend\Stdlib\Parameters;

class RequestTest extends \PHPUnit_Framework_TestCase
{
    public function testARequestWithAPostValue()
    {
        $request = new Request();
        $request->setMethod(Request::METHOD_POST);
        $request->setUri('/foo');
        $params = new Parameters();
        $params->set('foo', 'bar');
        $params->set('bar', 'foo');
        $request->setPost($params);

        $str = $request->renderRequestLine() . "\r\n";
        $headers = $request->getHeaders();
        if (!empty($headers)):
            $str .= $headers->toString();
        endif;
        $str .= "\r\n";

        $rawData = '';
        $keys = array_keys($params->toArray());
        foreach ($keys as $name) :
            $rawData .= "$name=" . $request->getPost($name) . ";";
        endforeach;
        $str .= substr($rawData, 0, -1);

        $string = "POST /foo HTTP/1.1\r\n\r\nfoo=bar;bar=foo";
        $this->assertEquals($string, $str);
    }
} 
```

请注意，最后一个表单字段键值对之后没有分隔符。

使用“&”字符来分隔表单域被认为是一种不好的做法。请参阅[W3C 建议 - B.2.2 URI 属性值中的与号](http://www.w3.org/TR/html4/appendix/notes.html#h-B.2.2)。

# xaml - IE9 XAML 安全性 - 完全信任证书是否足够？

> ID：14157948
> 
> 赞同：1
> 
> 时间：2013-01-04T13:17:46.930
> 
> 标签：xaml, internet-explorer-9, ssl-certificate, xbap, full-trust

最近，IE 开发人员（以他们的无限智慧）在下载 XAML 浏览器文件时增强了 IE9 安全性的工作方式——我需要这样做，因为我有一个在 XBAP 中托管的 Winforms 应用程序

IE9 现在要求我（作为用户）进入其安全面板并单击“启用 XAML 浏览器应用程序”，然后它才能运行我的应用程序。

现在，虽然我非常乐意从提供商（例如赛门铁克）购买完全信任证书，但我的问题是：

'使用此证书附加到我的网站 - 并暗示我的应用程序 - 用户是否仍然必须在我的应用程序运行之前重新配置他们的浏览器以'启用 XAML 浏览器应用程序'，或者完全信任证书是否足以允许它无缝运行，即无需用户修改他们的浏览器设置？

对于它的价值，我的应用程序可能会被数百（或希望）数千人使用，我讨厌他们都必须更改浏览器设置以惊叹于它的美丽（！！）。

附加的完全信任证书会避免这个问题吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:28:37.333

我的理解是证书在这种情况下没有区别。

# ruby-on-rails - Guard 可以配置为启动 RubyMine 的测试运行器吗？

> ID：14157961
> 
> 赞同：1
> 
> 时间：2013-01-04T13:18:44.043
> 
> 标签：ruby-on-rails, automated-tests, rubymine, guard, minitest

我目前已经设法让[Minitest](https://github.com/seattlerb/minitest)与 RubyMine 的测试运行程序一起工作，我**也**让 Minitest 与[Guard](https://github.com/guard/guard)一起工作。

有没有办法将两者结合起来，以便 Guard 触发测试以通过 RubyMine 的测试运行器运行？

**更新：**

澄清一下，我知道 RubyMine 的“自动测试”功能。然而，这缺乏 Guard 的两个显着优势：

*   仅运行与更改相关的测试。
*   测试环境保持运行，因此没有很长的加载时间。

但是，当测试失败时，它在 RubyMine 中缺少任何类型的通知。

我能否两全其美，获得极致的便利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:27:18.890

还不可能，[投票支持开放功能请求](http://youtrack.jetbrains.com/issue/RUBY-9903)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:21:56.633

您无需使用 Guard 即可在 RubyMine 中自动运行测试。RubyMine 有一个内置的功能。要激活它，请按测试结果视图工具栏中的“切换自动测试”按钮。

# r - 如何将日期范围打印为字符串？

> ID：14157972
> 
> 赞同：4
> 
> 时间：2013-01-04T13:19:30.970
> 
> 标签：r, date, date-range

我想使用 R 将日期范围打印为字符串。以下是我所做的

```
> startDate <- as.Date("2005-02-02")
> endDate <- as.Date("2005-02-07")
> dates <- startDate:endDate
> dates
[1] 12816 12817 12818 12819 12820 12821 
```

这里不是像我们打印 startDate 时那样将日期显示为字符串

```
> startDate
[1] "2005-02-02" 
```

它显示了时代。

我真正想要的是日期的字符串表示，而不是纪元日。我什至尝试了以下没有任何运气

```
> as.character(dates)
[1] "12816" "12817" "12818" "12819" "12820" "12821" 
```

如何打印日期字符串而不是纪元日？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T13:22:57.267

```
dates <- seq(startDate,endDate,by="day")
print(dates) 
```

你可能想看看`?seq.Date`。

# java - GWT 实现管理控制台的最佳方式

> ID：14157976
> 
> 赞同：1
> 
> 时间：2013-01-04T13:19:58.910
> 
> 标签：java, security, gwt, web-applications, web

我正在创建一个 GWT 应用程序并希望添加一个管理控制台。

我的第一次尝试是创建一个管理窗口（小部件），然后在管理员登录时显示它。

这种方法的问题在于，每个访问我的页面的用户都会下载负责显示和操作管理控制台的 javascript——出于性能和安全原因，我不喜欢这个想法。

由于管理控制台只是我的应用程序中的一个“窗口” - 我希望仅在用户以管理员身份登录并在他注销时“​​清除”它时下载它。

使用 GWT 实现这一目标的可用选项是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T18:24:24.303

跟进 Ajax 的解决方案，更多细节和选项：

*   您的管理模块是部署在不同战争中的不同 java 项目，例如 admin.war。
*   您的 Admin java 项目继承自您的主项目，因此您拥有所有常用功能 + Admin 功能。
*   You Admin module javascript 只能从 admin.war Web 应用程序访问，例如其中的 index.html。
*   您的 admin.war Web 应用程序只能通过 ssl 隧道后面的本地主机访问。这样，只有那些可以使用私钥访问您的服务器的管理员用户在成功打开隧道后才能访问您的管理模块，其他人没有。此选项非常安全——您可以控制谁可以访问，并且所有通信都经过加密。但此选项仅适用于只有少数管理员用户通过服务器授权的公钥对其进行严格控制的情况。否则，我想您必须通过密码和代码拆分来求助于上述身份验证机制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T13:30:14.160

代码拆分是将管理内容从面向客户端的 JS 中移出的快速解决方案；但是，任何熟练使用 gwt 的人都知道如何访问未下载的代码拆分。

真正安全的选择是运行第二个入口点并仅为管理员编译。这样，您的服务器可以避免提供任何涉及管理功能的内容。

将所有管理功能放入主编译中不允许的包中也是明智的；这样，您将永远不会泄漏不安全的资源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T13:26:46.823

使用自己的 Activity 为管理控制台创建一个单独的视图。您可以为此使用[活动和地点设计模式](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)。

此外，您可以使用[代码拆分](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)来确保只有管理员才能加载管理控制台所需的代码。

编辑：

在您的入口点类中，您应该检查用户是否经过身份验证并且是管理员，并允许或不允许访问您的应用程序的这一部分。你也应该在服务器端做同样的事情。当用户注销时，关闭应用程序。

# opengl - 使用 CUDA 和 OpenGL 的动画点半径

> ID：14157981
> 
> 赞同：0
> 
> 时间：2013-01-04T13:20:12.187
> 
> 标签：opengl, cuda, interop, vbo, point-clouds

我正在尝试使用 OpenGL 和 CUDA 实现点云，其中点的半径将根据与它们相关的一些数据随时间变化。

由于我对 OpenGL 和 CUDA 完全陌生，因此我很难实现这一目标。在学习了 OpenGL、GLSL 和 CUDA 的基础知识之后，我完全不知道程序的哪些部分应该如何实现。

我的想法如下：

*   使用带有顶点位置的 VBO
*   使用具有顶点半径的 VBO
*   使用具有顶点不确定性的 VBO。基于此数据，顶点的半径应以动画方式变化
*   每帧计算 CUDA 内核中所有顶点的半径
*   调用 glDrawArrays 渲染所有点并使用顶点着色器，它从数组中获取所有数据作为输入

首先......为此目的一起使用CUDA和GLSL着色器是否合理？由于我已经阅读了一些有关使用其中一个或另一个的内容，因此我不确定。

第二个问题是，程序的哪些部分将在 CPU 上执行，哪些在 GPU 上执行？在内核中计算数据然后将其传递回OpenGL显示函数进行渲染是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:55:29.797

> 首先......为此目的一起使用CUDA和GLSL着色器是否合理？由于我已经阅读了一些有关使用其中一个或另一个的内容，因此我不确定。

不，这不合理。如果您的目标是获取图像 - 使用 OpenGL。如果您的目标是进行一些繁重的计算（乘以大矩阵等） - 使用 CUDA。

您可以在没有 CUDA 的情况下计算顶点着色器中所有顶点的半径。使用统一变量将时间信息传递给着色器。纯 OpenGL 方法会快得多，因为不需要内核启动和额外的数据传输。

> 第二个问题是，程序的哪些部分将在 CPU 上执行，哪些在 GPU 上执行？在内核中计算数据然后将其传递回OpenGL显示函数进行渲染是否有意义？

GLSL 着色器和 CUDA 内核在 GPU 上执行。其他代码 - 在 CPU 上。如果您可以计算渲染管道中的所有内容（并且您可以），那么 CUDA 启动就没有意义。

# .net - 适合初学者的 Umbraco：在 localhost 上设置 Umbraco 以及 VS 2012 和 uSiteBuilder

> ID：14157983
> 
> 赞同：11
> 
> 时间：2013-01-04T13:20:16.143
> 
> 标签：.net, iis, visual-studio-2012, umbraco

**介绍**

过去两天试图让 Umbraco 与 Visual Studio 2012、iis 和某种页面构建器一起工作。在遵循了包括 Umbraco 5 在内的许多指南之后，后来发现 Umbraco 5 已经死了，我让它开始工作。

我这样做只是为了帮助像我这样的新 Umbraco 用户在他们的开发中获得良好的开端。

**使用 VS 2012 设置 Umbraco**

1.  从已安装的 VS 2012 模板创建一个新的 WebForm 项目。
2.  从解决方案中删除除属性和引用之外的所有内容。
3.  从包管理器控制台运行“PM > Install-Package UmbracoCms”
4.  右键单击项目并选择属性。在 WebTab 下确保项目使用本地 IIS Web 服务器和“创建虚拟目录”。
5.  保存项目并按 F5 运行。VS 2012 询问您是否想修改 Web.config 文件以进行调试，单击确定。
6.  现在按照您的网络浏览器中的 Umbraco 安装步骤进行操作。
7.  在数据库配置上，选择“SQL CE 4 数据库”。
8.  在 starterkits 上选择空模板。
9.  第一步完成。现在我们只需要将 uSiteBuilder 添加到我们的项目中。

**设置 uSiteBuilder 以便能够从代码轻松构建 DocumentTypes 和 Templates 等**

10.  [从http://usitebuilder.codeplex.com/releases/view/71768](http://usitebuilder.codeplex.com/releases/view/71768)下载 uSiteBuilder.dll
11.  在 VS 2012 项目中的引用中添加对此 dll 的引用
12.  将 uSiteBuilder.dll 复制到项目内的 bin 文件夹中。
13.  按F5，你会注意到dll会在web.config中添加对我们dll的引用
14.  按照下面的 uSiteBuilder 指南构建 DocumentTypes（普通 .cs 类）和模板（主和嵌套母版页）

*DocumentTypes* - [http://usitebuilder.vegaitsourcing.rs/tutorials?id=22389](http://usitebuilder.vegaitsourcing.rs/tutorials?id=22389)

*模板* - [http://usitebuilder.vegaitsourcing.rs/tutorials?id=22391](http://usitebuilder.vegaitsourcing.rs/tutorials?id=22391)

**完成的**

当我们完成所有这些步骤后，我们就可以在 uSiteBuilder 的帮助下从代码构建 Umbracosites。

*   由于我们只下载了 uSiteBuilder.dll 而不是包含 vs2012 模板的整个包，我们必须自己添加类（DocumentTypes）和 Masterpages（模板）。

# c# - 如何隐藏 ScrollViewer 之外的内容？

> ID：14157994
> 
> 赞同：1
> 
> 时间：2013-01-04T13:21:09.847
> 
> 标签：c#, wpf, xaml, scrollviewer, windowsformshost

我`ScrollViewer`在 WPF 项目中使用 a 并且我正在努力处理它的内容。包含此 SV 的窗口有许多其他 UI 项，我想让图像滚动到`ScrollViewer`SV 区域之外或至少在其他元素后面不可见。

这是我的 SV 代码（是的，它在网格内）：

```
<Grid Name="mainGrid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200*" />
        <ColumnDefinition Width="802*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="30*" />
        <RowDefinition Height="500*" />
        <RowDefinition Height="199*" />
    </Grid.RowDefinitions>

    <ScrollViewer Grid.Row="1" Grid.ColumnSpan="2" Name="map" Margin="0,0,0,0" PanningMode="Both" HorizontalScrollBarVisibility="Visible" Background="DarkGray" ClipToBounds="True">
        <WindowsFormsHost Name="windowsFormsHost1" Cursor="Cross" HorizontalAlignment="Left" VerticalAlignment="Top" ClipToBounds="True" />
    </ScrollViewer>
</grid> 
```

我遇到的另一个问题是，我想在将鼠标放在图像上时滚动图像。实际上，它仅在鼠标位于`ScrollViewer`.

这是后面代码的一部分：

```
public MainWindow()
{
    InitializeComponent();

    //Creation of the map
    Map newMap = new Map();
    newMap.setMapStrategy(new SmallMapStrategy());
    newMap.createMap();

    //Put the map in the PB as an image
    System.Windows.Forms.PictureBox pictureBox = new System.Windows.Forms.PictureBox();
    pictureBox.Width = newMap.grid.Count * 2; pictureBox.Height = newMap.grid.Count * 2;
    newMap.afficher(pictureBox);
    windowsFormsHost1.Width = newMap.grid.Count * 2; windowsFormsHost1.Height = newMap.grid.Count * 2;
    windowsFormsHost1.Child = pictureBox;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:41:54.697

我使用 ScrollableControl 解决了我的问题。所以现在，我的 PictureBox 位于可滚动控件中，该控件位于包含在网格中的 WindowsFormsHost 中。

```
 System.Windows.Forms.PictureBox pictureBox = new System.Windows.Forms.PictureBox();
        pictureBox.Width = (int)Math.Sqrt((double)game.Map.grid.Count) * 50; pictureBox.Height = (int)Math.Sqrt((double)game.Map.grid.Count) * 50;
        game.Map.afficher(pictureBox);
        System.Windows.Forms.ScrollableControl sc = new System.Windows.Forms.ScrollableControl();
        sc.Controls.Add(pictureBox);
        sc.AutoScroll = true;
        windowsFormsHost1.Child = sc; 
```

# javascript - 通过模态框显示的复选框

> ID：14157999
> 
> 赞同：1
> 
> 时间：2013-01-04T13:21:34.407
> 
> 标签：javascript, jquery, html, css

我有一个模式框，它放置在包含带有复选框的表单的页面上。问题是，当我打开模式时，一切正常，除了复选框位于模式之上。

这是模态的JS：

```
<script>
    usr_ddown = "hidden";
    function lchr_usr_menu(){
        if(usr_ddown === "hidden"){
            document.getElementById("ur_menu_lchr").innerHTML = "&#x25B2;";
            $("#usr_dropdown").fadeIn(200);
            usr_ddown = "vis";
            return false;
                }
        if(usr_ddown === "vis"){
                    document.getElementById("ur_menu_lchr").innerHTML = "&#x25BC;";
            $("#usr_dropdown").fadeOut(200);
            usr_ddown = "hidden";
            return false;
        }
    }
</script> 
```

模态的 HTML/CSS：

```
<div id="usr_dropdown" style="z-index 100;position: fixed; top:81px; left:0px; right: auto; background: #470047; padding: 10px; right:0px; height: 300px;-webkit-box-shadow: 0 0px 5px #000000;-moz-box-shadow: 0 0px 5px #000000;box-shadow: 0 0px 5px #000000;opacity:0.9;filter:alpha(opacity=90);">
                <div style="text-align: right;position: absolute; bottom:5px;right:5px;">
                    [<a href="javascript:void(0);" onclick="lchr_usr_menu()">close</a>]
                </div>
            </div> 
```

现在对于复选框：

```
<input type="checkbox" value="YT_vid" name="YT_vid" id="YT_vid" onclick="inc_yt_f()" /> 
```

出于某种原因，除了复选框之外，所有元素都在模式后面，我运行了谷歌搜索并没有找到太多。需要修复什么？

提前致谢！

编辑：

复选框 CSS：

```
 input[type=checkbox],
  input[type=radio] {
  -webkit-appearance: none;
  appearance: none;
  width: 13px;
  height: 13px;
  margin: 0;
  cursor: pointer;
  vertical-align: bottom;
  background: #fff;
  border: 1px solid #dcdcdc;
  -webkit-border-radius: 1px;
  -moz-border-radius: 1px;
  border-radius: 1px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  position: relative;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:26:26.320

查看 bgiframe 插件：[http ://docs.jquery.com/Plugins/bgiframe](http://docs.jquery.com/Plugins/bgiframe)

它通过提供背景 iframe 来工作。