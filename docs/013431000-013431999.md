# StackOverflow 问答 13431000-13431999

# c# - 正则表达式包括非捕获组中的字符？

> ID：13431002
> 
> 赞同：1
> 
> 时间：2012-11-17T13:25:44.690
> 
> 标签：c#, .net, regex

我有一首歌的标题，例如：

> ```
> Cant Stop (feat. Akon)
> American Superstar feat Akon
> American Superstar ft someone
> American Superstar ft. someone 
> ```

我正在尝试匹配标题，Can't Stop。我使用 regexr 和 expresso 的混合物想出了这个正则表达式：

```
(.*)(?:\(?ft|feat) 
```

除了 Can't Stop 似乎在匹配中包含括号外，它都可以匹配它们。我显然做错了什么，但我已经玩了 4 个小时，我无法弄清楚它是什么，请指出正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:38:38.563

`(?:\(?ft|feat)`不匹配“（feat”，因为`\(?`它只是左侧的一部分`|`。它将匹配“（ft”或“feat”，但不匹配“（feat”）。因为你想要一个“（”的可能性无论“feat”是否缩写，都应该`\(?`将`(?:...)`.

在你修复它之后，你仍然会遇到@动静能量提到的贪婪问题，你可以通过附加`?`到它来修复它，`.*`以便它只匹配所需的最少字符数。

这给出了这个，它适用于你所有的例子： `(.*?)\(?(?:ft|feat)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:39:08.497

我设法用这个来解决它。

```
(.+?)(?:\(|ft|feat) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:32:49.967

这`.*`就是所谓的“贪婪”，它将与开头的括号相匹配。（由于您稍后指定左括号是可选的，因此此可选部分不匹配）。要排除它，`[^(]*`可以改用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T13:47:29.120

这有效：

```
(.*?)(?=\(?(ft|feat)) 
```

它总结了其他答案（贪婪和优先问题）中所说的内容，并使用了积极的前瞻。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T18:28:44.533

泰勒现在你的答案将只匹配带有左括号的输入，或者即使没有feat或ft。我建议你跳过使用括号，或者像下面这样使用 (.+?)(?:\(?(ft|feat ))

# ruby - 管理 gems 所需库的更好方法？

> ID：13431005
> 
> 赞同：1
> 
> 时间：2012-11-17T13:26:31.533
> 
> 标签：ruby, linux, ubuntu, capistrano, bundler

我一直遇到 gems 在服务器上没有所需库的问题。RMagick 就是其中之一，通常是 mysql2，它通常需要安装开发版本，例如：

imagemagick libmagickcore-dev libmagickwand-dev

我的问题是，有没有更好的方法来管理这个？我正在使用捆绑器和 capistrano，所以如果有人能指出我正确的方向，那就太好了。

我可以看到的一个大问题是发行版会从服务器更改为服务器，但是如果我有一个可以运行的任务，它可以根据 Gemfile 检查这些所需包的存在，那将非常有帮助。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:33:28.173

您可以扩展“上限部署：设置”部分。=在本节中运行'apt-get instal imagemagick libmagickcore-dev libmagickwand-dev'。但是您的用户必须具有 sudo 访问权限。

您也可以阅读[本手册](http://viget.com/extend/building-an-environment-from-scratch-with-capistrano-2)

# git - 需要不同的 .htaccess 来从 Git 存储库进行登台和实时站点

> ID：13431006
> 
> 赞同：8
> 
> 时间：2012-11-17T13:26:49.270
> 
> 标签：git, .htaccess, deployment

这是场景：

有一个 Git 存储库，用于跟踪网站文件，包括`.htaccess`根目录。Git 存储库被签出到临时站点和生产站点。

**问题：**登台站点必须使用密码保护（通过 htpasswd 身份验证）。这也会更改`.htaccess`文件。现在从暂存环境提交或推送意味着`.htaccess`文件（为根目录启用密码保护）也被检出到实时网站，使实时网站也要求输入密码。

现在我该怎么做呢？我应该停止跟踪`.htaccess`吗？我应该`.htaccess`通过接收后挂钩覆盖（可能吗？如何？）？有没有其他方法可以在不修改的情况下保护目录`.htaccess`？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T18:54:23.793

我会选择**不跟踪** `.htaccess`自己。

可能的选项：

1.  跟踪`.htaccess-prod`和`.htaccess-stage`（如果有更多差异，则更有用，例如各种配置设置，密码等，如果它只有一行，那么它可能不是最佳选择）。然后，每当您更新某些内容时，您必须在两个文件中都执行此操作，而且您还必须记住在两个环境中`.htaccess`手动复制文件时更改它们。

2.  只存储一个文件`.htaccess-example`，在暂存区域和实时区域中添加钩子（查看*post-checkout*和/或*post-merge*可能 [1]），只要有更改，它们都将复制`.htaccess-example`为本地文件，此外`.htaccess`, 在暂存中附加一个带密码保护的行。

[1] 我自己还没有使用过它们，所以我在看文档时有点困惑。关于*post-receive*，据我了解，它在推送到**远程仓库**时执行，而不是在拉取时在工作副本中执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T02:06:02.900

这是一个外框的答案：在 Dev 上为 .htaccess 文件设置自定义文件名，不要将其签入。例如，.htaccess-dev 或 .htaccess.staging。

您可以在 vhosts 配置中进行设置。

[http://www.electrictoolbox.com/change-htacces-filename-apache/](http://www.electrictoolbox.com/change-htacces-filename-apache/)

如果您使用 MAMP Pro，您可以为每个本地域设置虚拟主机配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T13:46:07.313

对于 Git（与 Mercurial 相反），您只有一个解决方案：分支

您必须为 Staging 和 Live 使用不同的分支，但内容有一个区别：.htaccess 数据。不是防弹的，有很多手工工作，但是 - 这是*你的选择*

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-17T13:35:20.040

对于部署我推荐[capistrano](https://github.com/capistrano/capistrano/wiki)，它是一个漂亮的实用程序。

# c# - 如何在后台最大化窗口？

> ID：13431009
> 
> 赞同：0
> 
> 时间：2012-11-17T13:26:59.573
> 
> 标签：c#, winapi

我需要在后台最大化一个窗口，这意味着不激活（聚焦）它。SetWindowPlacement 函数不提供此功能。有什么想法吗？

```
 WINDOWPLACEMENT wp = new WINDOWPLACEMENT();
        GetWindowPlacement(hwnd, ref wp);

        wp.showCmd = 3;
        SetWindowPlacement(hwnd, ref wp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T21:47:29.983

我能找到的最好方法是（VB对不起！）；

```
longForeHWnd = GetForegroundWindow
Call ShowWindow(longBackHWnd, SW_SHOWMAXIMIZED)
SetForegroundWindow (longForeHWnd) 
```

这只是一种解决方法，因为背景窗口（短暂）被激活，因此被提升到 Z-Order

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-27T08:58:55.360

尝试使用来自[http://www.pinvoke.net](http://www.pinvoke.net)的定义：

```
WINDOWPLACEMENT placement;
if (GetWindowPlacement(hWnd, out placement))
{
    if ((GetWindowLong(hWnd, GWL_EXSTYLE) & WS_EX_TOOLWINDOW) == 0)
    {
        var l = GetWindowLong(hWnd, GWL_STYLE);
        SetWindowLong(hWnd, GWL_STYLE, (l | WS_MAXIMIZE) & (~WS_MINIMIZE));
        var maxPos = placement.MaxPosition;
        SetWindowPos(hWnd, IntPtr.Zero, maxPos.X, maxPos.Y, 0, 0, SetWindowPosFlags.AsynchronousWindowPosition | SetWindowPosFlags.DoNotActivate | SetWindowPosFlags.FrameChanged | SetWindowPosFlags.IgnoreResize | SetWindowPosFlags.IgnoreZOrder);
    }
} 
```

诀窍是使用 SetWindowLong 更改窗口状态并使用 SetWindowPosFlags.FrameChanged 重新绘制它。在您的情况下，使用 SetWindowPosFlags.DoNotActivate。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-17T14:42:17.550

请在 Windows 加载时使用以下代码

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Maximized;

    } 
```

这将最大化您的窗口

# java - 递增 1 并将其添加到每个创建的对象中？

> ID：13431013
> 
> 赞同：7
> 
> 时间：2012-11-17T13:28:10.757
> 
> 标签：java, oop

```
class MyObject {

static int instanceCounter = 0;

static int counter = 0;

MyObject() {

instanceCounter++;

counter = counter + 1;

}

} 
```

我正在使用静态整数来获取此输出：

> 对象 1 的 instanceCounter 值：5
> 
> MyObject 的 instanceCounter 值：5
> 
> 对象 1 的计数器值：1
> 
> 对象 2 的计数器值：2
> 
> 对象 3 的计数器值：3
> 
> 对象 4 的计数器值：4
> 
> 对象 5 的计数器值：5

但它的显示

> 对象 1 的 instanceCounter 值：5
> 
> MyObject 的 instanceCounter 值：5
> 
> 对象 1 的计数器值：5
> 
> 对象 2 的计数器值：5
> 
> 对象 3 的计数器值：5
> 
> 对象 4 的计数器值：5
> 
> 对象 5 的计数器值：5

我的跑步班

```
class RunMyObject {

public static void main(String[] args) {

MyObject Object1 = new MyObject();

MyObject Object2 = new MyObject();

MyObject Object3 = new MyObject();

MyObject Object4 = new MyObject();

MyObject Object5 = new MyObject();

System.out.println(“Value of instanceCounter for Object 1: ” + Object1.instanceCounter);

System.out.println(“Value of instanceCounter for MyObject: ” + MyObject.instanceCounter);

System.out.println(“Value of Counter for Object 1: ” + Object1.counter);

System.out.println(“Value of Counter for Object 2: ” + Object2.counter);

System.out.println(“Value of Counter for Object 3: ” + Object3.counter);

System.out.println(“Value of Counter for Object 4: ” + Object4.counter);

System.out.println(“Value of Counter for Object 5: ” + Object5.counter);

}

} 
```

如果我删除静态这就是它显示的内容

> 对象 1 的 instanceCounter 值：5
> 
> MyObject 的 instanceCounter 值：5
> 
> 对象 1 的计数器值：1
> 
> 对象 2 的计数器值：1
> 
> 对象 3 的计数器值：1
> 
> 对象 4 的计数器值：1
> 
> 对象 5 的计数器值：1

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-17T13:32:56.097

由于 instanceCounter 是一个静态变量，所有对象共享同一个变量。由于您在每个对象构造期间递增 instanceCounter，因此在创建 5 个对象结束时，它的值为 5。因此，您在所有 sys 输出中得到的输出为 5。这就是静态的重点

**编辑**
要实现您的需要，请执行以下操作：

```
class MyObject  {

    static int instanceCounter = 0;

    int counter = 0;

    MyObject() 
    {
        instanceCounter++;
        counter = instanceCounter;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:31:34.113

你一定对`static variables`.

`static class variables`每个类创建一次。它们由`non-static class variables`为每个对象实例创建的所有类实例共享。

因此，如果您的`counter`变量是`static`，它将仅创建一次并由您的类的所有实例共享。

当您使用`MyObject.counter`or`object1.counter`等​​访问它时，您访问的是同一个`counter`变量，因为`static`变量可以通过类名和实例变量访问。

如果是这样，`non-static`并且您的类的每个实例（或对象）都将拥有自己的`counter`.
所以你的每一个`Object1`，`Object2`等等都有自己的`counter`变量。

并且它们都将具有值 1，因此您在输出中得到 1。

更新：

更改您的代码以获得您在答案之一的评论中提到的所需输出：

```
MyObject Object1 = new MyObject();

System.out.println(“Value of Counter for Object 1: ” + Object1.counter);

MyObject Object2 = new MyObject();

System.out.println(“Value of Counter for Object 2: ” + Object2.counter);

MyObject Object3 = new MyObject();

System.out.println(“Value of Counter for Object 3: ” + Object3.counter);

MyObject Object4 = new MyObject();

System.out.println(“Value of Counter for Object 4: ” + Object4.counter);

MyObject Object5 = new MyObject();

System.out.println(“Value of Counter for Object 5: ” + Object5.counter);

System.out.println(“Value of instanceCounter for Object 1: ” + Object1.instanceCounter);

System.out.println(“Value of instanceCounter for MyObject: ” + MyObject.instanceCounter); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T13:32:43.763

如果你想这样做，你应该添加另一个变量，即：

```
class MyObject {

    int instanceCounter = 0;

    static int counter = 0;

    MyObject() {

        instanceCounter = counter;
        counter++;
    }
} 
```

# c# - 在 Linq-to-SQL 中添加到数据库时出现异常

> ID：13431016
> 
> 赞同：-1
> 
> 时间：2012-11-17T13:28:53.693
> 
> 标签：c#, sql, sql-server, winforms, linq-to-sql

我的数据库在 SQL Server 中，我使用 Linq-to-SQL。我从 SP（保存卡）中使用过。我在我的代码中放了断点，当到达时`rdr = cmm.ExecuteReader();`让我异常！！！

```
 private void btnSave_Click(object sender, EventArgs e)
 {
            PersianCalendar jc = new PersianCalendar();
            string SaveDate = jc.GetYear(DateTime.Now).ToString();
            int from=Convert.ToInt32(txt_barcode_f.Text);
            int to=Convert.ToInt32(txt_barcode_t .Text);
            int quantity=Convert.ToInt32(to-from);
            int card_Type_ID=Convert.ToInt32(cmb_BracodeType .SelectedValue);
            int[] arrCardNum = new int[quantity];

            arrCardNum[0]=from;

             for (int i = from; i < to;i++ )
             {
                 for(int j=0; j<quantity ;j++)
                 {
                 arrCardNum[j]=from+j;
                 int r = arrCardNum[j];
                 sp.SaveCards(r, 2, card_Type_ID, SaveDate, 2);
                 }
             }
        }  

public void SaveCards(int Barcode_Num, int Card_Status_ID, int Card_Type_ID, string Save_Date, int Save_User_ID)
        {

                IDbCommand cmm;
                cmm = Linq.Connection.CreateCommand();
                try
                {           
                    cmm.Parameters.Add(new SqlParameter("@Barcode_Num", Barcode_Num));
                    cmm.Parameters.Add(new SqlParameter("@Card_Status_ID", 2));
                    cmm.Parameters.Add(new SqlParameter("@Card_Type_ID", Card_Type_ID));
                    cmm.Parameters.Add(new SqlParameter("@SaveDate", Save_Date));
                    cmm.Parameters.Add(new SqlParameter("@Save_User_ID", Save_User_ID));
                    cmm.CommandText = "SaveCards";
                    cmm.Connection.Open();
                    cmm.Connection = Linq.Connection;
                    cmm.CommandType = CommandType.StoredProcedure;
                    IDataReader rdr = null;

                    **rdr = cmm.ExecuteReader();**
                    while (rdr.Read())
                    {
                        Console.Write(" All Insert ! " + "\n");
                    }
                }
                catch (SqlException ex)
                {
                    SqlExceptionHandler(ex, Save_User_ID);
                }
                catch (Exception ex)
                {
                    PopularEexceptionHandler(ex, Save_User_ID);
                }
                finally
                { cmm.Connection.Close(); }

        } 
```

执行 sp 时，不显示任何结果并显示：

```
when execute sp , display this:The INSERT statement conflicted with the CHECK constraint "CK_BarCode_Num". The conflict occurred in database "Parking", table "dbo.TBL_Cards", column 'BarCode_Num'. The statement has been terminated. No rows affected. (0 row(s) returned) @RETURN_VALUE = -6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:43:38.453

您对如何设置连接和命令有点混乱.....例如，您甚至在分配连接**之前就****打开**了连接！这将如何工作？

 **我的建议是这个顺序（基于*打开连接****之前****先完成所有设置***的原则，并且*尽可能晚地打开连接，尽快关闭它*）：**

 **```
IDbCommand cmm = Linq.Connection.CreateCommand();

try
{           
   // define name and type of command
   cmm.CommandText = "SaveCards";
   cmm.CommandType = CommandType.StoredProcedure;

   // assign connection
   cmm.Connection = Linq.Connection;

   // define parameters
   cmm.Parameters.Add(new SqlParameter("@Barcode_Num", Barcode_Num));
   cmm.Parameters.Add(new SqlParameter("@Card_Status_ID", 2));
   cmm.Parameters.Add(new SqlParameter("@Card_Type_ID", Card_Type_ID));
   cmm.Parameters.Add(new SqlParameter("@SaveDate", Save_Date));
   cmm.Parameters.Add(new SqlParameter("@Save_User_ID", Save_User_ID));

   // only now - after all the setup - open the connection, read the data
   cmm.Connection.Open();

   IDataReader rdr = rdr = cmm.ExecuteReader();

   while (rdr.Read())
   {
      ....
   }
} 
```

要捕获执行引发的错误，请将您的`catch`块替换为`SqlException`：

```
catch (SqlException ex)
{
   StringBuilder sbErrors = new StringBuilder();

   foreach (SqlError error in ex.Errors)
   {
      sbErrors.AppendLine(error.Message);
   }

   string allErrors = sbErrors.ToString();
} 
```

并调试到那个 catch 块 - 最后的`allErrors`字符串是什么？

**更新：**经过一次聊天，我们终于知道SQL异常中的消息是什么：

> *INSERT 语句与 CHECK 约束“CK_BarCode_Num”冲突。冲突发生在数据库“Parking”、表“dbo.TBL_Cards”、列“BarCode_Num”中。*

现在我们正试图找出该约束是/做什么以及它被违反的原因......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:44:40.957

我认为这可能是您`open the connection and assigning another connection`在执行阅读器之前所拥有的。

```
cmm.CommandText = "SaveCards";
//cmm.Connection.Open(); You should open the connection after assigning it
cmm.Connection = Linq.Connection;
cmm.CommandType = CommandType.StoredProcedure;
cmm.Connection.Open(); //Open it here

SqlDataReader rdr = cmm.ExecuteReader(); 
```****

# php - PHP - 开始使用命名空间

> ID：13431021
> 
> 赞同：0
> 
> 时间：2012-11-17T13:29:47.817
> 
> 标签：php, open-source, namespaces

**您能否提供一个使用命名空间而不是 PEAR 文件结构命名约定的好（易于分析）开源项目（-s）的名称？**

我愿意在我的项目中开始使用命名空间，但我真的不知道应该如何以最好的方式处理这个问题，例如：

自动加载类将使用命名空间自动加载我的内部类，但是自动加载不使用命名空间的第 3 方模块或镜像其文件结构的命名空间呢？我应该创建两个单独的类，还是在一个类中处理这种行为？

灵活的文件结构 - 如何在那里命名命名空间？让我们在 system/ 文件夹中有一个命名空间，例如：System/Foo/Bar。但是，如果有人将 system/ 文件夹的名称更改为其他名称并且名称空间将保持不变怎么办？

等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:42:32.150

PSR-0 是我们在 PHP 中拥有的为数不多的标准之一。

网上有很多例子，这里有一些：

*   Symfony [https://github.com/symfony/symfony](https://github.com/symfony/symfony)
*   作曲家[https://github.com/composer/composer](https://github.com/composer/composer)
*   教义[https://github.com/doctrine/doctrine2](https://github.com/doctrine/doctrine2)

# actionscript-3 - 如何循环图层并在第一帧停止？

> ID：13431022
> 
> 赞同：0
> 
> 时间：2012-11-17T13:29:47.367
> 
> 标签：actionscript-3, flash-cs6

我见过 gotoAndPlay 和 gotoAndStop 但是直到第 1 帧之前是否有 gotoAndLoop 之类的？尝试在所有外部框架（代码）中执行此操作

# facebook - 提要对话框上的 Facebook Like Button 帖子消失了

> ID：13431024
> 
> 赞同：1
> 
> 时间：2012-11-17T13:30:10.767
> 
> 标签：facebook, dialog, facebook-like

我在使用类似 facebook 的按钮时遇到问题。

问题如下：

当用户单击like 按钮时，会出现一个post-on-the-wall 对话框（使用edge.create 调用），但只需半秒，该对话框就会消失。

还有就是你平时点击fb的like按钮的时候，你的like会被瞬间处理，这里没有问题，但是在我的页面，当你点击like按钮的时候，出现对话窗口，片刻后消失，点赞上的文字按钮变为“确认”，只有在按下“确认”后才进行类似处理。

（我正在使用 javascript api）

问题应该很明显，但又一次——为什么对话框窗口消失了，为什么必须“确认”类似的东西？

几天来，我一直在为这个问题头疼，我真的受不了了，所以任何帮助都将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T22:06:47.000

确认按钮通常会在新的点赞按钮在短时间内获得多次点击时出现，以帮助对抗“点赞”。这不是编码错误，而是 Facebook 控制的功能。

# nanoc - 如何让 Nanoc 以不止一种方式编译同一个项目？

> ID：13431027
> 
> 赞同：2
> 
> 时间：2012-11-17T13:30:40.643
> 
> 标签：nanoc

我想让 Nanoc 以多种格式编译单个项目 - 具体而言，将 Markdown 文件编译为 HTML 和 PDF。据我所知，单个项目只能匹配单个编译规则。

硬链接 ( `ln somefile.md newfile.md`) 允许我编译同一个文件，就好像它是两个不同的文件一样，但这是一种尴尬的解决方案。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T18:22:27.473

您可以使用项目表示来实现这一点。您可以将单个项目编译为多个输出项目（表示）。这是一个例子：

```
compile '/stuff/' do
  filter :markdown
end

compile '/stuff/', :rep => :pdf do
  filter :markdown
  filter :pdf
end 
```

剩下的唯一事情是提供将两个项目表示写入其正确位置的路由规则（也使用`:rep => ...`）。

# html - 如何解析另一个域上页面的 DOM

> ID：13431028
> 
> 赞同：-2
> 
> 时间：2012-11-17T13:30:41.670
> 
> 标签：html, ajax, json, jquery

我在使用 AJAX 解析远程网页的 DOM 时遇到了很多麻烦。我似乎无法找到任何演示此过程的示例或教程。

我基本上想搜索远程页面的 DOM，找到具有特定 id/class 的标签，获取该标签的内部内容并将其打印在我自己的页面上。

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:33:32.777

出于安全原因，同源策略浏览器不允许您访问外部页面。您需要在服务器上使用例如 PHP 脚本来检索外部站点的 HTML。然后，您可以改为对该脚本进行 AJAX 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:21:42.730

你总是可以使用这个：[http ://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)

便于使用。

# c++ - 将一维数组转换为二维数组

> ID：13431030
> 
> 赞同：0
> 
> 时间：2012-11-17T13:31:05.613
> 
> 标签：c++, visual-c++

对于我的作业，它被赋予一维数组，我必须将其转换为二维数组。二维数组的列数为 2，因为我必须将一维数组表示为对（数字的值，数组中出现的次数）。这是尝试过的。错误出现在代码的最后 2 行：访问冲突写入位置 0xfdfdfdfd。

```
#include <iostream>
#include <stdlib.h>
using namespace std;

int main()
{
    const int NR=17;
    int arr[NR]={6,7,3,1,3,2,4,4,7,5,1,1,5,6,6,4,5};
    int **newArr;
    int count=0;
    int countLines=0;
    int searched;
    for(int i=0;i<NR;i++)
    {
            newArr=new int*[countLines];
        for(int i=0;i<countLines;i++)
        {
            newArr[i]=new int[2];
        }
        searched=arr[i];
        if(i>0)
        {
            for(int k=0;k<countLines;k++)
            {
                if(newArr[countLines][0] == searched)
                {
                    searched=arr[i]++;
                }

                for(int j=0;j<NR;j++)
                {
                    if(searched==arr[j])
                    {
                        count++;
                    }
                }
                countLines++;
            }
        }
        else
        {
            for(int j=0;j<NR;j++)
            {
                if(searched==arr[j])
                {
                    count++;
                }
            }
            countLines++;
        }

        newArr[countLines][0]=searched;
        newArr[countLines][1]=count;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:37:04.023

首先，您`newArr`在为其分配任何内存之前在第一个循环中使用。您不能取消引用不拥有合法内存的指针。它会导致未定义的行为。

其次，在最后一部分中，您分配`newArr`的内存等于`countLines`。

```
newArr = new int*[countLines] ; 
```

这意味着 的第一维中的索引`newArr`是`0------>countLines-1`。做`newArr[countLines][0] = searched ;`又是未定义的。让它`newArr[countLines - 1]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:26:40.320

我不会为逐行代码分析而烦恼，因为（a）您在人们回答您的问题时更改它，并且（b）它确实需要太长时间。但这里有一个总结（非详尽的）klunkers：

1.  您在从第二个开始的每个循环迭代中泄漏内存 (newArr)。
2.  您多次超出阵列访问权限。
3.  您根本*不需要**使用*指针数组来解决这个问题。维度为 [N][2] 的单个数组，其中 N 是唯一值的数量。

 *您可以解决此问题的一种（无数种）方法如下所示：

```
#include <iostream>
#include <algorithm>

int main()
{
    // 0\. Declare array and length
    int arr[]={6,7,3,1,3,2,4,4,7,5,1,1,5,6,6,4,5};
    const size_t NR = sizeof(arr)/sizeof(arr[0]);

    // 1\. sort the input array
    std::sort(arr, arr+NR);

    /* alternaive sort. for this input size bubble-sort is
       more than adequate, in case your limited to not being
       allowed to use the standard library sort */
    /*
    for (size_t i=0;i<NR;++i)
        for (size_t j=i+1;j<NR;++j)
            if (arr[i] > arr[j])
            {
                arr[i] ^= arr[j];
                arr[j] ^= arr[i];
                arr[i] ^= arr[j];
            }
    */

    // 2\. single scan to determine distinct values
    size_t unique = 1;
    for (size_t i=1;i<NR;++i)
        if (arr[i] != arr[i-1])
            unique++;

    // 3\. Allocate a [unique][2] array
    int (*newArr)[2] = new int[unique][2];

    // 4\. Walk array once more, accumulating counts
    size_t j=0;
    newArr[j][0] = arr[0];
    newArr[j][1] = 1;
    for (size_t i=1;i<NR;++i)
    {
        if (arr[i] != arr[i-1])
        {
            newArr[++j][0] = arr[i];
            newArr[j][1] = 0;
        }
        ++newArr[j][1];
    }

    // 5\. Dump output
    for (size_t i=0;i<unique;++i)
        cout << newArr[i][0] << " : " << newArr[i][1] << endl;

    delete [] newArr;

    return EXIT_SUCCESS;
} 
```

**输出**

```
1 : 3
2 : 1
3 : 2
4 : 3
5 : 3
6 : 3
7 : 2 
```*

# regex - Perl - 使用 REGEX 解析参数/选项

> ID：13431031
> 
> 赞同：0
> 
> 时间：2012-11-17T13:31:25.257
> 
> 标签：regex, perl, parsing, arguments

我正在创建一个 perl 脚本来转换模板文件 () 中的命令列表，并将它们输出到输出文件 () 中不同格式的另一个文件。

模板文件中的命令如下所示：

```
command1 --max-size=2M --type="some value" 
```

我在从该字符串中提取选项和值时遇到了一些问题。到目前为止，我有：

```
m/(\s--\w*=)/ig 
```

哪个会返回：

```
" --max-size="
" --type=" 
```

但是我不知道如何将选项和值作为单独的变量返回，或者如何适应引号的使用。

谁能引导我朝着正确的方向前进？

*旁注：我知道 Getops 在从命令行执行此操作方面做得很棒，但不幸的是这些命令作为字符串传递:(*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T23:19:34.343

[`Getopt::Std`](http://perldoc.perl.org/Getopt/Std.html)还是[`Getopt::Long`](http://perldoc.perl.org/Getopt/Long.html)？

你看过[这个](http://perldoc.perl.org/Getopt/Long.html#Parsing-options-from-an-arbitrary-string)选项还是[这个](http://perldoc.perl.org/Getopt/Long.html#Parsing-options-from-an-arbitrary-array)选项？

似乎没有理由重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:13:42.703

下面的代码产生

```
@args = ('command1', '--max-size=2M', '--type=some value'); 
```

适合传递`GetOptions`如下：

```
local @ARGV = @args;
GetOptions(...) or die; 
```

最后，代码：

```
for ($cmd) {
   my @args;
   while (1) {
      last if /\G \s* \z /xgc;

      /\G \s* /xgc;

      my $arg;
      while (1) {
         if (/\G ([^\\"'\s]) /xgc) {
            $arg .= $1;
         }
         elsif (/\G \\ /xgc) {
            /\G (.) /sxgc
               or die "Incomplete escape";

            $arg .= $1;
         }
         elsif (/\G (?=") /xgc) {
            /\G " ( (?:[^"\\]|\\.)* ) " /sxgc
               or die "Incomplete double-quoted arging";

            my $quoted = $1;
            $quoted =~ s/\\(.)/$1/sg;

            $arg .= $quoted;
         }
         elsif (/\G (?=') /xgc) {
            /\G ' ( [^']* ) ' /xgc
               or die "Incomplete single-quoted arging";

            $arg .= $1;
         }
         else {
            last;
         }
      }

      push @args, $arg;
   }

   @args
      or die "Blank command";

   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T13:54:38.117

```
use Data::Dumper;
$_ = 'command1 --max-size=2M a=ignore =ignore --switch --type="some value" --x= --z=1';
my %args;
while (/((?<=\s--)[a-z\d-]+)(?:="?|(?=\s))((?<![="])|(?<=")[^"]*(?=")|(?<==)(?!")\S*(?!"))"?(?=\s|$)/ig) {
  $args->{$1} = $2;
}
print Dumper($args);

---

$VAR1 = {
          'switch' => '',
          'x' => '',
          'type' => 'some value',
          'z' => '1',
          'max-size' => '2M'
        }; 
```

**[（在这里](http://ideone.com/m1AlJy)**测试这个演示）

# java - 添加平板电脑支持：Master/Detail (Android) 的 Fragments 和 Activity

> ID：13431036
> 
> 赞同：1
> 
> 时间：2012-11-17T13:32:05.630
> 
> 标签：java, android, android-fragments

我正在实现类似于[Fragments (Android Developers)](http://developer.android.com/guide/components/fragments.html)中描述的片段层次结构。![在此处输入图像描述](../Images/e554deaebed42fe7ea0af0c127c577c1.png)

此外，在纵向平板电脑中，应用程序的行为应与第二种情况相同。我的问题是处理从一个方向到另一个方向的交易。

我考虑的第一个想法是：

*   从横向到纵向：当活动A转到纵向时：将片段B移到视图中。启动活动 B 以获取传递适当值以恢复原始片段 B 状态的结果
*   从纵向到横向：当活动 B 转到纵向时。完成（结果中的片段 2 状态）。带有结果的活动 A 恢复片段 B 并将其添加到其布局中。

但是这个解决方案非常复杂，我认为这可能不是一个好主意。我考虑过的替代解决方案是只有一个活动。该活动布局是：

```
<FrameLayout>
    <LinearLayout>
       <Fragment A>
       <Fragment B>
    <Slot> 
```

对于小型设备：

*   应用程序删除片段 B 并在选择项目时将片段添加到后台堆栈中的“插槽”

对于平板电脑：

*   使用 fragmentTransactions 将片段 B 从它的位置移动到“插槽”，使用 backstack 以正确地适应方向变化

我认为第二个选项听起来更好但是，这样做是正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:53:26.930

如果您需要我的建议，我会说这取决于太多因素。我认为你应该坚持你认为可以管理的东西。这也取决于您的应用程序的屏幕流程有多复杂。

对我来说，如果你没有那么多碎片需要管理，那么将它保存在一个活动中是一个好主意。这种方法的一个优点是您不需要摆弄两个不同活动的生命周期。

无论如何，发现实施复杂性在某种程度上表明您计划的内容将来无法为您管理。

希望有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T01:47:55.483

我不明白您为什么要以如此复杂的方式进行操作。在平板电脑上进行一项活动，在手机上进行两项活动。让第一个活动实现一个侦听器，如果单击列表片段的项目将触发该侦听器。Activity 知道它是处于单窗格模式还是双窗格模式，因此在 onItemSelected 回调方法中，让它在单窗格模式的情况下启动一个新的活动，或者在平板电脑的情况下替换一个片段。

您还可以在创建新项目时使用 Master/Detail 模板看到这一点。

# java - 居中 JToggleButton ImageIcon

> ID：13431037
> 
> 赞同：2
> 
> 时间：2012-11-17T13:32:06.423
> 
> 标签：java, swing, alignment, imageicon, jtogglebutton

我创建了一个 JToggleButton 并在选择它时显示图像。除了图像没有以按钮为中心外，这一切都完美无缺。图像的左上角位于按钮的中心点，然后图像向下并朝按钮的右下角向外移动。

```
JToggleButton LayoutButton = new JToggleButton();
LayoutButton.setIcon(new ImageIcon());
LayoutButton.setSelectedIcon(new ImageIcon("Image.png")); 
```

任何想法如何使图像居中？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:57:23.980

问题是您的初始图像与所选图像的尺寸不匹配，因此所选图像将出现在不同的位置，在这种情况下是右下角。

您可以为您的初始“未选择”图像创建一个占位符：

```
public class PlaceHolderIcon implements Icon {

    private final int width;
    private final int height;

    public PlaceHolderIcon(int width, int height) {
        this.width = width;
        this.height = height;
    }

    public int getIconHeight() {
        return height;
    }

    public int getIconWidth() {
        return width;
    }

    public void paintIcon(Component c, Graphics g, int x, int y) {
    }
} 
```

并将您的第一个零维图像替换为：

```
ImageIcon selectedIcon = new ImageIcon("Image.png");
Image image = selectedIcon.getImage();
PlaceHolderIcon placeHolderIcon = new PlaceHolderIcon(image.getWidth(this), image.getHeight(this));
JToggleButton layoutButton = new JToggleButton();
layoutButton.setIcon(placeHolderIcon);
layoutButton.setFocusPainted(false);
layoutButton.setSelectedIcon(selectedIcon); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:43:57.877

您应该使用 JToggleButton 的`setHorizontalAlignment(...)`and`setVerticalAlignment(...)`方法（实际上是[AbstractButton](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html)）。作为参数传入`SwingConstants.CENTER`以使所有内容居中。

虽然请注意，horizo​​ntalAlignment 和 verticalAlignment 属性的默认值已经是 SwingConstants.CENTER。因此，如果这没有帮助，请考虑发布一个小型可编译和可运行的程序，该程序使用我们随时可用的网络图像向我们展示您的问题，一个[sscce](http://sscce.org)以及发布您当前按钮外观的图像。

# gcc - Libnids 64 位系统

> ID：13431038
> 
> 赞同：3
> 
> 时间：2012-11-17T13:32:23.763
> 
> 标签：gcc, libpcap

我的问题是，当我在 64 位 Ubuntu 中编译应用程序时，我没有收到任何错误或警告，就像在 32 位中一样，但是执行它时没有输出。例子：

```
$: ./program
$: _ 
```

但为什么！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:40:08.387

经过与图书馆作者的多次头痛和邮件交流后，我找到了在 ubuntu 64 位系统上使用 libnids 库的方法。

好的，我告诉了作者，几天后他发现了错误。显然，这是一个 GCC 错误。出于某种原因，在 64 位系统上编译 libnids 库时，您似乎必须删除 -O2 标志。所以，我所做的是从配置文件中删除 -O2 标志，以便它创建一个没有它的 makefile。

我还建议在您的 libnids 应用程序的 Makefile 上使用它：[使用 libnids 进行编译](https://stackoverflow.com/questions/12399214/compiling-using-libnids/)

# php - 如何在多个不同的 php 环境中运行 PHPunit 测试套件？

> ID：13431042
> 
> 赞同：2
> 
> 时间：2012-11-17T13:32:34.457
> 
> 标签：php, testing, timezone, phpunit

我应该在不同的 php 环境中运行[PHPUnit 3.7](http://www.phpunit.de/manual/current/en/index.html)测试套件：使用不同的 php.ini 设置，甚至在不同的操作系统环境中。我想确保我的测试套件和底层类在

*   php.ini [date.timezone](http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone)设置不同；和/或
*   操作系统的内部时区不同

如何在 PHPUnit 和 CLI (Linux) 中正确设置测试环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:01:24.800

如果您只想更改 php.ini 设置和操作系统/环境变量，我建议您编写小的 bash 脚本包装器（或使用您选择的构建工具）来完成等效操作。

### 使用具有不同时区的 PHP 5.3：

```
/path/to/php-5.3 -d date.timezone=America/New_york /usr/bin/phpunit 
```

### 将 PHP 5.4 与另一个时区和不同的 ENV 一起使用

```
export TZ=Europa/Berlin 
/path/to/php-5.4 -d date.timezone=Aemerica/San_Franciso /usr/bin/phpunit 
```

* * *

如果您使用该功能，这种方法也`process_isolation`可以使用，因为 PHPUnit 将能够确定使用的是什么 PHP 二进制文件，但您**可能会**遇到“-d”参数的问题。在这种情况下，不要将它们传递给 php 二进制文件，而是传递给 phpunit。( `phpunit -d date.timezone=foo`)。然后 PHPUnit 将在您的测试运行之前进行设置。

# jquery - 在mouseleave上停止jquery的动画并恢复到原来的样子

> ID：13431049
> 
> 赞同：0
> 
> 时间：2012-11-17T13:33:44.080
> 
> 标签：jquery

悬停到 div 时，我试图缩放到 2.5。悬停时它会启动动画，鼠标移出它会回到原来的动画。但问题是当您将鼠标悬停在元素上并快速从 div 中移除光标时，整个两个动画就完成了。喜欢它完全缩放到 2.5，然后回到 1。我希望如果我在动画之间鼠标悬停它应该停止它所在的位置并返回到比例 1。但无法这样做。

我正在使用[jquery.transit](http://ricostacruz.com/jquery.transit/)

jsfiddle：http: [//jsfiddle.net/2swqN/3/](http://jsfiddle.net/2swqN/3/)

jQuery是：

```
$(".zoomable").live({
mouseover: function() {
    console.log("hoverd");
    $(this).transition({
        //rotateY: '360deg',
        scale: 2.5,
    },2000);
},
mouseout: function() {
    console.log("hovered out");

    $(this).transition({
        //rotateY: '0deg',
        scale: 1,
    },2000);

}
});​ 
```

使用`stop()`也似乎效果不佳，因为它有时会闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:14:16.840

考虑到您没有使用回退，该插件所做的只是创建 CSS3 转换。您可以自己完成此操作，而无需插件或任何 javascript。

```
.zoomable {
    ...
    -webkit-transition: all 2s;
    -moz-transition: all 2s;
    -ms-transition: all 2s;
    -o-transition: all 2s;
    transition: all 2s;
}

.zoomable:hover {
    -webkit-transform: scale(2.5);
    -moz-transform: scale(2.5);
    -ms-transform: scale(2.5);
    -o-transform: scale(2.5);
    transform: scale(2.5);
} 
```

jsfiddle：http: [//jsfiddle.net/2swqN/14/](http://jsfiddle.net/2swqN/14/)

**编辑以解决您的 CSS 过渡问题：**

要在动画完成后执行代码，可以使用`transitionEnd`事件。

```
$('.zoomable').on('transitionend webkitTransitionEnd oTransitionEnd otransitionend', function() {
    alert('Transition Complete');
}); 
```

演示：http: [//jsfiddle.net/2swqN/16/](http://jsfiddle.net/2swqN/16/)

要在单击时开始动画，请使用 jQuery`toggleClass()`并将变换放在单独的类中。

```
$('.zoomable').on('click', function() {
    $(this).toggleClass('active');
});

.zoomable.active {
    /* css transforms here */
} 
```

演示：http: [//jsfiddle.net/2swqN/17/](http://jsfiddle.net/2swqN/17/)

# javascript - 创建和播放音频元素的问题

> ID：13431052
> 
> 赞同：0
> 
> 时间：2012-11-17T13:34:11.910
> 
> 标签：javascript, html, api

好的，我正在尝试使用谷歌翻译语音 api 说些什么。这是我的代码：

```
<script>
function say(words){
var a=new Audio();
a.src='http://translate.google.com/translate_tts?q='+words;
a.play();
};
</script>

<div id="button onclick="say('hello');">Click to say hello!</div> 
```

当我单击按钮时，什么也没有发生。谁能看到我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:29:40.897

您需要添加语言 ( `tl=`) 参数（并在 ID 属性后添加右引号）。这是一个使用英语的例子：

```
function say(words) {
    var a = new Audio();
    a.src = 'http://translate.google.com/translate_tts?tl=en&q=' + words;
    a.play();
} 
```

如果设置了不匹配的 Referrer 标头，Google 的 TTS API 不会返回任何内容。

# cakephp - 使用 CakePHP 将变量传递到 url

> ID：13431054
> 
> 赞同：0
> 
> 时间：2012-11-17T13:34:19.080
> 
> 标签：cakephp

在我的网站上，我使用 Cake PHP，我有一个这样的文章网址：

/article/testx?name=Stefy

我想做一种“mod rewrite”并有一个这样的网址：

/名称/Stefy

我试图从 routes.php 做到这一点，但我不知道该怎么做。我在 CakePHP 网站上查看了关于数组中的“传递”函数以及 StackOverflow 上的其他主题，但我找不到解决方案，可能是因为我是 CakePHP 的初学者。你能帮我吗？

我想我应该是这样的：Router::connect('/name/:id', array('controller' => 'articoli', 'action' => 'display','testx?name=$id') );

但当然它不起作用。我想我必须在 routes.php 中使用“pass”

你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:48:19.793

是的，您确实必须使用“通过”：

```
Router::connect('/name/:id', 
    array('controller' => 'articoli', 'action' => 'display'), 
    array('pass' => array('id'))); 
```

你可以生成这样的链接：

```
$this->Html->link('Title', array('action' => 'display', 'id' => 1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:22:14.917

Router::connect('/:slug',array('controller' => 'salons', 'action' => 'details'), array('pass' => array('slug')));

# asp.net-mvc - 在 MVC 中，部分视图是否继承其父视图的模型？

> ID：13431056
> 
> 赞同：5
> 
> 时间：2012-11-17T13:34:28.873
> 
> 标签：asp.net-mvc, inheritance, asp.net-mvc-partialview

我正在将一些数据从我的控制器传递给一个视图，我希望将其显示在该视图内的部分视图中（不要问，这很复杂）。我知道我什至不应该将模型传递给为另一个视图指定的视图，但我注意到部分视图实际上是从父视图继承模型：

```
public ActionResult Index(){

 Person p = new Person
 {
    FName = "Mo",
    LName = "Sep"

 };

 return View(p); 
```

}

然后在我的`Index`视图中我有：

```
<h2>Index</h2>

@Html.Partial("_IndexPartial") 
```

在里面`_IndexPartial`我有：

```
@Model.FName 
```

这会打印“Mo”。

这种行为是否类似于 WPF 中的子控件继承其父视图的数据上下文的行为？在您的应用程序中使用它是否被认为是不好的做法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:17:43.633

> 这种行为是否类似于 WPF 中的子控件继承其父视图的数据上下文的行为？

是的。

我看到您当前没有将任何模型传递给仅继承布局然后根本不需要使用部分布局是否可行？

如果您想继续使用它，也许只是更明确地说明它，并将当前模型传递给部分。

```
@Html.Partial("_IndexPartial", Model) 
```

如果您查看 Html.Partial(view) 的源代码：

```
public static MvcHtmlString Partial(this HtmlHelper htmlHelper, string partialViewName)
{
    return Partial(htmlHelper, partialViewName, null /* model */, htmlHelper.ViewData);
} 
```

它通过 htmlHelper.ViewData 传递模型，您可以使用 @{ViewData.Model} 在视图中以相同的方式访问模型，但这*不是*一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:05:19.077

您可以使用重载将模型作为第二个参数传递到局部视图中：

```
@Html.Partial("viewname", Model) 
```

这种方法 IMO 没有任何问题，因为它是强类型视图的重点以及它们带来的好处......

# wordpress - 如何在 Wordpress 中将主题选项页设置为仪表板主页

> ID：13431057
> 
> 赞同：1
> 
> 时间：2012-11-17T13:34:31.627
> 
> 标签：wordpress

如何在 Wordpress 中将主题选项页面 [或] 插件选项页面设置为管理仪表板主页。

否则，我想在用户登录管理仪表板后立即登陆我的主题选项页面或插件选项页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T00:18:33.947

好的，然后使用这个：

```
function redirect_after_login(){
         return 'http://yourwordpressurl';
}
add_filter("login_redirect", "redirect_after_login", 10, 3); 
```

钩子 login_redirect 有重定向 url，所以过滤它给它你想要的任何值。

# python - python html解析

> ID：13431060
> 
> 赞同：1
> 
> 时间：2012-11-17T13:34:40.710
> 
> 标签：python

我有以下问题：

我想解析 html 文件并从 html 文件中获取链接。我可以使用以下代码获取链接：

```
class MyHTMLParser(HTMLParser):
    links=[]
    def __init__(self,url):
        HTMLParser.__init__(self)
        self.url = url

    def handle_starttag(self, tag, attrs):
        try: 
            if tag == 'a':
                for name, value in attrs:
                    if name == 'href':
                        if value[:5]=="http:":
                            self.links.append(value)
        except: 
            pass 
```

但我不想获取音频文件、视频文件等。我只想获取 html 链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:20:13.360

> 我可以检查链接结尾，如果它是特定格式，我可以避免将该链接附加到列表中。还有其他方法吗？

你可以看看`'Content-Type'`标题：

```
import urllib2
url = 'https://stackoverflow.com/questions/13431060/python-html-parsing'
req = urllib2.Request(url)
req.get_method = lambda : 'HEAD'    
response = urllib2.urlopen(req)
content_type = response.headers.getheader('Content-Type')
print(content_type) 
```

产量

```
text/html; charset=utf-8 
```

* * *

非常感谢@JonClements `req.get_method = lambda : 'HEAD'`。可以在[此处](https://stackoverflow.com/q/107405/190597)找到有关此方法和发送 HEAD 请求的替代方法的更多信息。

# c++ - MPI_Waitsome 分段错误？

> ID：13431062
> 
> 赞同：1
> 
> 时间：2012-11-17T13:34:46.003
> 
> 标签：c++, openmpi

我有类似的东西：

```
int numprocs, id, arr[10], winner = -1;
bool stop = false;
MPI_Request reqs[10], winnerNotification;

MPI_Init(NULL, NULL);
MPI_Comm_size(MPI_COMM_WORLD, &numprocs);
MPI_Comm_rank(MPI_COMM_WORLD, &id);

srand(time(NULL) + id);

if (id == 10) {
    int completed = 0;
    int* completedIndexes;
    for (int i = 0; i < 10; i++) {
        MPI_Irecv(&arr[i], 1, MPI_INT, i, 0, MPI_COMM_WORLD, &reqs[i]);
    }
    MPI_Waitsome(10, reqs, &completed, completedIndexes, MPI_STATUSES_IGNORE);
    cout << completed << " seems to have completed" << endl;
    for (int i = 0; i < completed; i++) {
        cout << completedIndexes[i] << " have completed!";
    }
}

while (id < 10 && winner == -1) {
    if (((rand() % 100) + 1) < 5) { // players have 5% chance of completing
        MPI_Send(&id, 1, MPI_INT, 10, 0, MPI_COMM_WORLD);
        cout << id << " completed" << endl;
        MPI_Wait(&winnerNotification, MPI_STATUS_IGNORE);
    }
}

MPI_Finalize(); 
```

哪个导致分段错误，我认为它与 Waitsome 有关？但是什么？错误看起来像：

```
1 completed
[JM:01317] *** Process received signal ***
[JM:01317] Signal: Segmentation fault (11)
[JM:01317] Signal code: Address not mapped (1)
[JM:01317] Failing at address: 0x646574
4 completed
5 completed
[JM:01320] *** Process received signal ***
[JM:01320] Signal: Segmentation fault (11)
[JM:01320] Signal code: Address not mapped (1)
[JM:01320] Failing at address: 0x646574
3 completed
[JM:01319] *** Process received signal ***
[JM:01319] Signal: Segmentation fault (11)
[JM:01319] Signal code: Address not mapped (1)
[JM:01319] Failing at address: 0x646574
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:09:06.693

`MPI_Waitsome`需要一个整数数组，其中存储已完成请求的索引，但你给它的是一个未初始化的`int`指针。鉴于您已硬编码`10`为请求数，以下代码应该可以工作：

```
if (id == 10) {
    int completed = 0;
    int completedIndexes[10];
    for (int i = 0; i < 10; i++) {
        MPI_Irecv(&arr[i], 1, MPI_INT, i, 0, MPI_COMM_WORLD, &reqs[i]);
    }
    MPI_Waitsome(10, reqs, &completed, completedIndexes, MPI_STATUSES_IGNORE);
    cout << completed << " seems to have completed" << endl;
    for (int i = 0; i < completed; i++) {
        cout << completedIndexes[i] << " have completed!";
    }
} 
```

# .net - 在不添加引用的情况下加载 DLL

> ID：13431068
> 
> 赞同：0
> 
> 时间：2012-11-17T13:35:38.770
> 
> 标签：.net, winforms

我正在使用 .NET Framework 2.0 开发一个 Windows 应用程序。用户只能看到所需的功能。

我面临的复杂性是，某些功能需要一些外部 DLL。所以我希望如果用户不需要该功能，则不应将 DLL 部署在用户机器中。

我认为一种解决方案是使用反射来使用 DLL 中的函数而不添加引用并创建 2 个单独的部署项目 - 一个带有 DLL，另一个没有它。

任何人都可以提出其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:08:32.350

似乎您需要一个插件系统，为此使用MEF

[http://mef.codeplex.com/](http://mef.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:51:49.807

@Antonio 是对的，您实际上是在描述一个插件系统。

您可以使用[Assembly](http://msdn.microsoft.com/en-us/library/xbe1wdx9.aspx)`Load()`类中的一种方法，只要您可以使用内存中的程序集，直到整个应用程序关闭。如果您需要能够在运行时卸载程序集的更复杂的场景，[这个 SO question](https://stackoverflow.com/questions/4511405/loading-dll-into-separate-appdomain?lq=1)可能对您有用。

# objective-c - NSArray 和 ARC 的内存问题

> ID：13431069
> 
> 赞同：1
> 
> 时间：2012-11-17T13:35:41.410
> 
> 标签：objective-c, memory-management, automatic-ref-counting

我尝试用 Objective C 编写一个程序来计算一些东西。不幸的是，要计算的东西很多，程序正在运行一个循环 10000 次迭代。总运行时间约为5分钟。这不是问题，但是当它运行时，程序使用的内存急剧增加（超过 2GB），我认为这是因为一些值没有释放。我将问题缩小到在循环内创建 NSArray。有问题的代码（将其更改为专注于问题）是这样的：

```
for (NSInteger k = 0; k<100000; k++) {

    NSMutableArray *mutableTestArray = [NSMutableArray new];
    for (NSInteger i=0; i<200; i++){

        NSMutableArray *subArray = [NSMutableArray new];
        for (NSInteger j=0; j<200; j++) {

            //simplified version, normally the valus for sub array are dependent on some other factors
            [subArray addObject:[NSArray arrayWithObjects:@"test", @"test", nil]];

        }
        [mutableTestArray addObject:subArray];

    }

    //do stuff with mutableTestArray
    //change parameters that go into sub array

} 
```

如果我更换：

```
[subArray addObject:[NSArray arrayWithObjects:@"test", @"test", nil]]; 
```

和：

```
[subArray addObject:@"test"]; 
```

它工作正常。所以我想我必须以某种方式释放我创建的数组。但是怎么做？我启用了 ARC，据我所知，如果启用它，我无法手动释放对象。如果有人可以帮助我更改代码或提示我可以学习如何正确进行内存管理的地方，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T13:39:49.587

只需放入一些自动释放池：

```
@autoreleasepool {
        NSMutableArray *subArray = [NSMutableArray new];
        for (NSInteger j=0; j<200; j++) {
@autoreleasepool {

            //simplified version, normally the valus for sub array are dependent on some other factors
            [subArray addObject:[NSArray arrayWithObjects:@"test", @"test", nil]];
}
        }
        [mutableTestArray addObject:subArray];

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T13:41:53.980

`[NSArray arrayWithObjects:@"test", @"test", nil];`返回一个自动释放的对象，它将在将来的某个地方释放，但不会立即释放。`[[NSArray alloc] initWithObjects:@"test", @"test", nil];`由于ARC，使用该数组几乎会立即释放。如果您不使用 ARC，则代码可能如下：

```
NSArray* tempArr = [[NSArray alloc] initWithObjects:@"test", @"test", nil];
// use the temporary variable
[subArray addObject:tempArr];
[tempArr release]; 
```

因为您使用的是 ARC，所以您应该删除该版本。

# javascript - QtWebKit：调用 evaluateJavaScript 并引用多个 QWebElements

> ID：13431070
> 
> 赞同：1
> 
> 时间：2012-11-17T13:35:47.897
> 
> 标签：javascript, qtwebkit

我的目标是评估 QWebFrame 中的 JavaScript 函数，将它的引用传递给多个 QWebElement。

我已经能够参考单个 QWebElement 来评估框架中的 JavaScript：

```
QWebElement element1;
element1.evaluateJavaScript("return this.tagName;"); 
```

但是，我希望能够评估一个引用所有元素的脚本。例如，如果存在这样的方法，我会这样做：

```
QWebFrame frame;
QWebElement element1;
QWebElement element2;
QWebElement element3;
QList<QWebElement> elements;
elements << element1 << element2 << element3;

frame.evaluateJavaScriptWithElements("function(e1, e2, e3) {...}", elements); 
```

一种可能的方法是遍历 QWebElements，并将每个元素放在 DOM 中的已知位置。然后，调用将所有元素作为参数传递给它的脚本。例如：

```
frame.evaluateJavaScript("document.myElements = [];");
element1.evaluateJavaScript("document.myElements.push(this);");
element2.evaluateJavaScript("document.myElements.push(this);");
element3.evaluateJavaScript("document.myElements.push(this);");
frame.evaluateJavaScript("(function(e1, e2, e3) {...}).apply(null, document.myElements);"); 
```

虽然上面的方法有效，但它很脏，因为它修改了 DOM（它将 myElements 数组添加到文档中）。

有没有人知道在 QWebFrame 中评估 JavaScript 并引用 DOM 中的 QWebElements 元素的方法，而不像我上面显示的那样修改 DOM？

# c# - 带有隐藏输入的 HttpWebRequest 登录

> ID：13431071
> 
> 赞同：3
> 
> 时间：2012-11-17T13:35:57.843
> 
> 标签：c#, xaml, httpwebrequest, hidden-field

我正在尝试使用 Windows 8 应用商店应用程序中的 HttpWebRequest 登录网站。登录表单如下所示：

```
<form method="post" action="" onsubmit="javascript:return FormSubmit();">
<div>
    <div>
        <span>gebruikersnaam</span>
        <input size="17" type="text" id="username" name="username" tabindex="1" accesskey="g" />
    </div>
    <div>
        <span>wachtwoord</span>
        <input size="17" type="password" id="password" name="password" maxlength="48" tabindex="2" accesskey="w" autocomplete="off" />
    </div>
    <div class="controls">
        <input type="submit" id="submit" accesskey="l" value="inloggen" tabindex="4" class="button"/>
    </div>
    <!-- The following hidden field must be part of the submitted Form -->
    <input type="hidden" name="lt" value="_s3E91853A-222D-76B6-16F9-DB4D1FD397B7_c8424159E-BFAB-EA2A-0576-CD5058A579B4" />
    <input type="hidden" name="_eventId" value="submit" />
    <input type="hidden" name="credentialsType" value="ldap" />
</div>
</form> 
```

除了名为“lt”的隐藏输入之外，我能够发送大部分必需的输入。这是出于安全目的随机生成的代码，因此我无法在脚本中对其进行硬编码。我当前的脚本是这样的：

```
HttpWebRequest loginRequest2 = (HttpWebRequest)WebRequest.Create(LOGIN_URL_REDIRECT);
        loginRequest2.CookieContainer = CC;
        loginRequest2.Method = "POST";
        loginRequest2.Accept = "image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/x-shockwave-flash, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, application/x-ms-application, application/x-ms-xbap, application/vnd.ms-xpsdocument, application/xaml+xml, */*";
        loginRequest2.ContentType = "application/x-www-form-urlencoded";
        loginRequest2.Headers["Accept-Encoding"] = "gzip,deflate";
        loginRequest2.Headers["Accept-Language"] = "en-us";
        StreamWriter sw = new StreamWriter(await loginRequest2.GetRequestStreamAsync());
        sw.Write("username=" + userName + "&password=" + passWord + "&_eventId=submit&credentialsType=ldap");
        await sw.FlushAsync();

        HttpWebResponse response2 = (HttpWebResponse)await loginRequest2.GetResponseAsync(); 
```

在执行请求之前，如何获取隐藏输入“lt”的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:04:06.503

您需要加载网页并获取随机密钥并使用相同的密钥来调用第二页，我编写了一个可以轻松完成此操作的软件，请在此处阅读[http://innosia.com/Home/Article/WEBSCRAPER](http://innosia.com/Home/Article/WEBSCRAPER)

如果你不想使用 WebScraper，至少你需要使用 Cookie 感知类，它是在下载的解决方案中找到的 CookieWebClient，使用它应该是这样的：

```
// Use Cookie aware class, this class can be found in my WebScraper Solution
CookieWebClient cwc = new CookieWebClient;
string page = cwc.DownloadString("http://YourUrl.com"); // Cookie is set to the key

// Filter the key
string search = "name=\"lt\" value=\"";
int start  = page.IndexOf(search);
int end = page.IndexOf("\"", start);
string key = page.Substring(start + search.Length, end-start-search.Length);

// Use special method in CookieWebClient to post data since .NET implementation has some issues.
// CookieWebClient is the class I wrote found in WebScraper solution you can download from my site
// Re use the cookie that is set to the key
string afterloginpage = cwc.PostPage("http://YourUrl.com", string.Format("username={0}&password={1}&lt={2}&_eventId=submit&credentialsType=ldap", userid, password, key));

// DONE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:54:10.003

使用[HTML Agilty Pack](http://htmlagilitypack.codeplex.com/)，您可以使用此代码片段来获取*隐藏字段*值：

```
var doc = new HtmlWeb().Load(LOGIN_URL_REDIRECT);
var nodes = doc.DocumentNode
               .SelectNodes("//input[@type='hidden' and @name='lt' and @value]");
foreach (var node in nodes) {
    var inputName = node.Attributes["name"].Value;
    var inputValue = node.Attributes["value"].Value;
    Console.WriteLine("Name: {0}, Value: {1}", inputName, inputValue);
} 
```

使用 Linq：

```
var nodes = from n in doc.DocumentNode.DescendantNodes()
            where n.Name == "input" && 
                  n.GetAttributeValue("type", "") != "" &&
                  n.GetAttributeValue("name", "") == "lt" && 
                  n.Attributes.Contains("value")
            select new
            {
                n.Attributes["name"].Name,
                n.Attributes["value"].Value
            };

foreach (var node in nodes) {
    Console.WriteLine("Name: {0}, Value: {1}", node.Name, node.Value);
} 
```

# codeigniter - CodeIgniter - 包括代码段？

> ID：13431074
> 
> 赞同：0
> 
> 时间：2012-11-17T13:36:34.467
> 
> 标签：codeigniter, include, code-snippets

我有大约 9 行代码，在我的许多控制器中都是相同的。它们进入索引并用于检查用户是否已登录、授予的访问级别以及获取一些会话变量。包含本身不是完整功能的代码片段的最佳方式是什么？

这些片段并不在所有控制器中，只是那些构建应用程序管理部分的控制器。

如果我可以使用一行代码来包含代码段，那就太好了，但我是 CodeIgniter 的新手，我不想偏离最佳实践。如果你能包括一个简短的例子来帮助我想象这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:59:31.807

您想创建基本 CI 控制器的扩展并在那里进行检查。扩展核心位于此处的文档中：http: [//ellislab.com/codeigniter/user_guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user_guide/general/creating_libraries.html)向下滚动到扩展本机库部分。

在您的新控制器中，您可以执行以下操作：

```
<?PHP
    class MY_Controller extends CI_Controller
    {

   function __construct()
   {
    parent::__construct();  //Gets all the CI_Controller functions and makes them available to this controller.
    if($this->session->userdata('is_logged_in')
    {
            $this->load->model('categories');
    $this->categories=$this->categories->getAllCategories();
    }

       }
     } 
```

然后在您的其他控制器中使用 MY_Controller 而不是 CI_Controller ，如下所示：

```
<?php

class Pages extends MY_Controller { 
```

显然，您将有自己的检查和变量要加载，但这应该给您一个大致的想法。在上面的示例中，我现在可以使用 $this->categories 在应用程序中已加载 MY_Controller 的任何位置检索我的类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:51:27.447

我正在使用“主”模板文件（views/template.php）：

```
// views/template.php

<?php $this->load->view('includes/header'); ?>

<?php $this->load->view('includes/' . $main_content); ?>
<?php $this->load->view('includes/sidebar'); ?>

<?php $this->load->view('includes/footer'); ?> 
```

所以视图目录结构是这样的：

```
--views
  --includes
      - header.php
      - footer.php
  - template.php 
```

正如您在文件夹中看到的那样，`view/includes/`我正在使用一些可重复使用的片段，例如“header.php”、“footer.php”......

所以在一个控制器中，我正在加载这个主模板文件：

```
class MyController extends CI_Controller {
    public function index()
    {
        //...
        $this->load->view('template',$data);
    }
} 
```

所以它加载'template.php'。并且也可以使用`$data` 里面的header.php,footer.php..

但是你可以根据需要改变它，这只是一个“基本”的想法..

# android - 有安卓模拟器吗？

> ID：13431077
> 
> 赞同：2
> 
> 时间：2012-11-17T13:36:55.027
> 
> 标签：android, ios, blackberry, android-emulator, emulation

我目前有一个网络应用程序和一个应用程序`google play`。我想知道的是，是否有`emulator`适用于 android Galaxy Note、s3 google nexus 等。
还有一个`emulator`适用于非 iOS 或 android（如 windows mobile、blackberry）的我来测试我的网络应用程序，看看它是否适用于具有屏幕分辨率的设备。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:44:15.427

[https://app.manymo.com/emulators](https://app.manymo.com/emulators)

Android 模拟器：

快速开始。顺利运行​​。是轻量级的。匹配每个当前的操作系统版本和屏幕尺寸。可从您的浏览器访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:41:56.683

Android[模拟器](http://developer.android.com/tools/help/emulator.html)包含在 Android SDK 中。使用此模拟器，您可以模拟设备的硬件。设备供应商所做的操作系统修改不包含在此仿真器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:13:45.120

你可能想看看这个线程 -> [Samsung Galaxy s3 emulator settings](https://stackoverflow.com/questions/10804619/samsung-galaxy-s3-emulator-settings)。它提到了设置 Galaxy SIII 模拟器的配置，以及其他相关配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T13:43:19.947

据我所知，有Blackberry Eclipse Plugin ...这里有一个链接 [https://swdownloads.blackberry.com/Downloads/entry.do?code=060AD92489947D410D897474079C1477](https://swdownloads.blackberry.com/Downloads/entry.do?code=060AD92489947D410D897474079C1477)

也许它有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T13:44:14.833

安卓模拟器包含在 SDK 中，[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# freepascal - 如何使类构造函数体调用后代的重写方法/属性？

> ID：13431079
> 
> 赞同：1
> 
> 时间：2012-11-17T13:37:04.247
> 
> 标签：freepascal, delphi, class-constructors

我正在编写一个 ORM 框架并陷入了从类名自动确定表名的方式中。在我的 ORM 工作的基础对象中，我有：

```
TghModel = class
...
  class var FTableName: String;
  class constructor Create;
... 
```

其实现是：

```
class constructor TghModel.Create;
begin
  FTableName := ClassName;
  Delete(FTableName,1,1); // Delete 'T'
end; 
```

我的假设是 ClassName 方法将返回真实的类名。例如，如果我有：

```
TUsers = class(TghModel) 
```

那么FTableName将被初始化为TUsers而不是TghModel，这是错误的。我想避免用户为从 TghModel 继承的每个类创建类构造函数，特别是因为内容与 TghModel.Create 中的内容完全相同。有没有办法实现它？

PS：我使用 Free Pascal 作为我的编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:07:57.600

我认为没有办法按照您的意图实现这一目标。即使 TUsers 有自己的类构造函数，它也不起作用，因为 FTableName 在 TghModel 和所有子类之间共享。为了解决这个问题，我看到了两个解决方案：使用类似的东西动态创建表名

```
class function TghModel.TableName : string;
  begin
    Result := ClassName;
    Delete(Result,1,1);
  end; 
```

或者，如果它对速度至关重要，也许基于泛型的解决方案可能是可能的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-29T12:07:10.277

我通过这个实现了一些关于你的问题：

```
 class function MyClass.getName:string;
 begin;
  inherited;
  Log_write('~~~~~.getName'+ClassType.ClassName); 
end; 
```

# java - 检查 PDF 查看器小程序是否正在运行

> ID：13431080
> 
> 赞同：0
> 
> 时间：2012-11-17T13:37:06.847
> 
> 标签：java, javascript, html, pdf, applet

我有第三方小程序可以在我的页面上查看 PDF 文件，我需要确保允许用户运行小程序。Javascript有什么方法可以检查小程序是否正在运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T16:12:41.703

如果您想知道小程序是否已经在运行使用`isActive`功能：

```
function appletPoll(onReadyCallback, id) {
    try {
        if (typeof document[appletId] != 'undefined' && 
            document[appletId].isActive())
             return onReadyCallback(document.applet);
    }
    catch (e) {
    }
    setTimeout(function () {
        appletPoll(onReadyCallback, id);
    }, 400);
} 
```

经测试可在 Chrome、FF、IE > 7 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:14:31.747

解决方案是编写另一个小程序，在 OnInit() 函数中，向 Javascript 抛出回调。

# scala - 如何在actorSelection中查找命中数

> ID：13431085
> 
> 赞同：3
> 
> 时间：2012-11-17T13:37:34.880
> 
> 标签：scala, akka

我正在制作一个基于 scala akka 的系统，它将动态地将新参与者（代表用户）添加到现有层次结构中，因此我需要知道给定消息是否应该导致在层次结构中创建新参与者（如果它还没有存在）与否。我想我真正想要的是一些像actorSelection这样的方法，它会返回结果集中的演员数量，而不是结果集本身。

如果参与者已使用此名称存在，则以下代码将引发异常：

```
case u:UserAdded   => {
  context.actorOf(Props[HashActor],u.user.hash()) ! u
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:32:41.220

感谢[https://groups.google.com/forum/?fromgroups=#!topic/akka-user/jnv1CrdPKns](https://groups.google.com/forum/?fromgroups=#!topic/akka-user/jnv1CrdPKns)我想这比我想的要容易得多：

```
 case u:UserAdded =>
         val target = context.actorFor(u.user.hash) match {
           case noref if noref.isTerminated => context.actorOf(Props[HashActor], u.user.hash)    
           case ref => ref
         }
         target forward u 
```

# image - Magento，切换可配置产品图像的类

> ID：13431090
> 
> 赞同：2
> 
> 时间：2012-11-17T13:38:13.127
> 
> 标签：image, magento, switch-statement, product, configurable

当用户选择不同的产品属性时，我尝试使用[baobaz](http://blog.baobaz.com/en/blog/magento-reload-color-images-for-configurable-product)类和[magentowiki](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/change_product_image_on_view_page_to_associated_product_s_image)代码来实现 magento 商店和切换图像，但是使用 baobaz 类我只能更改一次图像，并且当用户选择不同的属性时，我不能使用其他产品图像返回。--eg （我选择蓝色 tshirt 颜色属性，类将返回带有照片的结果，然后我选择红色属性，类卡在第一张图像上）。使用 magentowiki 没有任何反应

 `````
class Baobaz_Imageswitch_IndexController extends Mage_Core_Controller_Front_Action
{
    public function indexAction()
    {
        $prod_id  = (int) $this->getRequest()->getParam('prod_id');
        $color_value  = (int) $this->getRequest()->getParam('color_id');
        $product=Mage::getModel('catalog/product')->load($prod_id);
        if($color_value) {
            $allProducts = $product->getTypeInstance(true)->getUsedProducts(null, $product);      
            foreach ($allProducts as $prod) {
                if ($prod->getData('image_storing') && $prod->getColor()==$color_value) { // && $prod->isSaleable() 
                    break;
                }
            }           
            $prod_full=Mage::getModel('catalog/product')->load($prod->getId());
            Mage::register('product', $prod_full);
        }
        else {
            Mage::register('product', $product);
        }
        $this->loadLayout();     
        $this->renderLayout();
    }
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T04:30:55.967

Organic Internet的[Simple Configurable Products](https://github.com/organicinternet/magento-configurable-simple)扩展有一个图像切换器，我们已经在几个项目中成功使用它。请注意，它改变了可配置产品的定价方式，但它是一个很好的扩展。它是免费的、开源的，可在 Github 和[Magento Connect](http://www.magentocommerce.com/magento-connect/simple-configurable-products.html)上获得。``

# multithreading - Delphi7如何让Com对象等到程序初始化完成？

> ID：13431091
> 
> 赞同：2
> 
> 时间：2012-11-17T13:38:18.887
> 
> 标签：multithreading, delphi, com, initialization, delphi-7

我有一个实现 com 服务器的 Delphi7 程序。最近，由于一些新的数据库查询，程序初始化完成的时间有所增加。我所说的程序初始化的意思是程序能够以有意义的方式处理传入的 com 调用所需的时间。我的问题是当程序尚未正确初始化时如何处理来电。丢弃调用中包含的信息不是一种选择，调用需要等待程序初始化。使用布尔初始化变量的简单 while 循环是否足够？我问是因为我读到 com 调用是在主 VCL 线程中执行的，这表明 while 循环会导致程序挂起（初始化也在 VCL 线程中进行）。

互斥锁不能用于等待在同一个线程中执行的代码，对吧？

换句话说，com 调用是否会中断（com 服务器的）VCL 线程的执行，直到它完成，或者在同一线程中并发执行代码是如何工作的？感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:14:22.850

将您的数据库逻辑移出主线程，使其不再被阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T12:43:46.890

COM 服务器 (EXE) 在将控制流返回给 COM 客户端之前等待 Applcation.Run，​​因此所有的表单和数据模块都应该被初始化。

然而，当一个窗体创建另一个 OLE 对象（即在 FormCreate() 事件处理程序中打开 Word 文档）时，这可能会中断等待并将控制权立即返回给 COM 客户端。

尝试检查在 Applcation.Run 之前创建的表单的所有初始化代码以定位问题。

# task - 具有和不具有并行性的 OpenMP 任务

> ID：13431099
> 
> 赞同：8
> 
> 时间：2012-11-17T13:39:49.650
> 
> 标签：task, openmp

```
Node *head = &node1;
while (head)
{
    #pragma omp task 
        cout<<head->value<<endl;
    head = head->next;
}

#pragma omp parallel
{
    #pragma omp single
    {
        Node *head = &node1;
        while (head)
        {
            #pragma omp task 
                cout<<head->value<<endl;
            head = head->next;
        }
    }
} 
```

在第一个块中，我只是创建了没有并行指令的任务，而在第二个块中，我使用了并行指令和单指令，这是我在论文中看到的常见方式。我想知道他们之间有什么区别？顺便说一句，我知道这些指令的基本含义。

我评论中的代码：

```
void traverse(node *root)
{
    if (root->left) 
    {
        #pragma omp task 
        traverse(root->left);
    }
    if (root->right) 
    {
        #pragma omp task 
        traverse(root->right);
    }
    process(root);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-17T16:38:43.237

不同之处在于，在第一个块中，您并*没有*真正创建任何任务，因为块本身没有嵌套（在语法上或词法上）没有嵌套在活动并行区域内。在第二个块中，该`task`构造在语法上嵌套在`parallel`区域内，如果该区域恰好在运行时处于活动状态，则将显式任务排队（活动并行区域是由多个线程组成的团队执行的区域）。词法嵌套不太明显。观察以下示例：

```
void foo(void)
{
   int i;

   for (i = 0; i < 10; i++)
      #pragma omp task
      bar();
}

int main(void)
{
   foo();

   #pragma omp parallel num_threads(4)
   {
      #pragma omp single
      foo();
   }

   return 0;
} 
```

第一次调用`foo()`发生在任何并行区域之外。因此，该`task`指令（几乎）什么都不做，所有调用`bar()`都是连续发生的。第二个调用`foo()`来自并行区域内部，因此将在内部生成新任务`foo()`。该`parallel`区域处于活动状态，因为`4`该`num_threads(4)`子句固定了线程数。

OpenMP 指令的这种不同行为是一种设计特性。主要思想是能够编写可以串行和并行执行的代码。

`task`结构的存在仍然会进行`foo()`一些代码转换，例如`foo()`转换为：

```
void foo_omp_fn_1(void *omp_data)
{
   bar();
}

void foo(void)
{
   int i;

   for (i = 0; i < 10; i++)
      OMP_make_task(foo_omp_fn_1, NULL);
} 
```

这`OMP_make_task()`是 OpenMP 支持库中的一个假设（未公开提供）函数，它将对该函数的调用排队，作为其第一个参数提供。如果`OMP_make_task()`检测到它在活动并行区域之外工作，它会简单地调用`foo_omp_fn_1()`。`bar()`这增加了在串行情况下的调用的一些开销。取而代之的是`main -> foo -> bar`，呼叫就像`main -> foo -> OMP_make_task -> foo_omp_fn_1 -> bar`。这意味着串行代码执行速度较慢。

工作共享指令更清楚地说明了这一点：

```
void foo(void)
{
   int i;

   #pragma omp for
   for (i = 0; i < 12; i++)
      bar();
}

int main(void)
{
   foo();

   #pragma omp parallel num_threads(4)
   {
      foo();
   }

   return 0;
} 
```

第一次调用`foo()`将串行运行循环。第二次调用将在 4 个线程中分配 12 次迭代，即每个线程将只执行 3 次迭代。再一次，使用了一些代码转换魔法来实现这一点，串行循环的运行速度将比`#pragma omp for`.`foo()`

这里的教训是永远不要在不需要的地方添加 OpenMP 结构。

# ruby - 使用 Ruby 分析音频流

> ID：13431100
> 
> 赞同：2
> 
> 时间：2012-11-17T13:40:04.917
> 
> 标签：ruby, stream, audio-streaming, audio-recording, internet-radio

我正在寻找一种分析网络收音机内容的方法。我想编写一个 ruby​​ 客户端，它可以从流中获取当前曲目、下一曲目、乐队、bpm 和其他元信息（例如，广播中的广播）。有人知道怎么做这个吗？以及如何将该流录制到 mp3 或 aac 文件中？

也许有一个图书馆已经可以做到这一点，到目前为止我还没有。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:33:52.567

我会回答你的两个问题。

## 元数据

您所寻求的并非完全可能。下一首曲目的信息不可用（请记住，并非所有电台都只是播放播放列表中的歌曲......许多都提供现场内容）。BPM 等高级元数据不可用。你得到的只是这样的：

```
Some Band - Some Song 
```

的格式`{artist} - {song title}`也不总是被遵循。

有了这些警告，您可以通过连接到流 URL 并使用以下请求标头请求元数据来从流中获取元数据：

```
Icy-MetaData: 1 
```

这告诉服务器发送元数据，该元数据被交错到流中。每 8KB 左右（由服务器在响应标头中指定），您会发现一大块要解析的元数据。我在这里写了一个关于如何解析的详细答案： [使用 PHP 从音频流中提取音轨信息](https://stackoverflow.com/questions/4911062/pulling-track-info-from-an-audio-stream-using-php/4914538#4914538) 之前的问题是特定于语言的，但您会发现我的答案可以很容易地用任何语言实现。

## 将流保存到磁盘

音频播放软件通常对错误非常有弹性。SHOUTcast 服务器建立在此主体之上，并且不了解通过它们的数据。它们只是从编码器接收数据，当客户端请求流时，它们开始在任意点发送该数据。

在保存流数据时，您可以利用这一点。可以简单地将流数据写入文件。大多数音频播放器都可以毫无问题地播放它们。我已经用 MP3 和 AAC 对此进行了测试。

如果您想要一个更一致的文件，您将不得不使用库或自己解析流以在适当的帧上拆分，然后处理代码中的位库问题。这是很多工作，通常不值得做，除非您发现您的文件存在真正的兼容性问题。

# php - 无法通过php上传视频文件

> ID：13431103
> 
> 赞同：0
> 
> 时间：2012-11-17T13:40:30.053
> 
> 标签：php, forms, video, upload

.htm 代码：

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data">   
 Movie :<br />
 <input name="fileField" type="file" size="30" /><br />
 <input name="submit" type="submit" class="submit" value="Send" />
 </form> 
```

php代码：

```
if ($_FILES['fileField']['tmp_name'] !=""){

            $fileName = $_FILES["fileField"]["name"];
            $fileType = $_FILES["fileField"]["type"];
            $fileTmpLoc = $_FILES["fileField"]["tmp_name"];
            $fileName = preg_replace('#[^a-z.0-9]#i', '', $fileName);
            move_uploaded_file($fileTmpLoc, '../upload/video.flv');
        } 
```

此代码不适用于 VIDEO 文件，但适用于其他文件（jpeg、mp3、png 和,,,）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:42:21.393

也许将您的目录更改为 `move_uploaded_file($fileTmpLoc, '../upload/ ');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:40:19.923

您对代码绝对没有错误处理，这意味着您无法判断上传何时失败。添加：

```
if ($_FILES['fileField']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error " . $_FILES['fileField']['error']);
} 
```

作为一些最低限度的错误处理。错误代码在这里定义：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)。检查是否缺少“tmp_name”不是正确的检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:33:39.410

这个问题来自 php setting php set to Max 2MB size for upload

# c - 使用函数更改指针包含的地址

> ID：13431108
> 
> 赞同：59
> 
> 时间：2012-11-17T13:41:08.210
> 
> 标签：c, function, pointers

如果我将指针声明`p`为`int *p`; 在主模块中，我可以`p`通过分配已经声明的另一个整数变量`p = &a;`where来更改包含的地址。`a`我现在想通过使用以下函数来更改地址：

```
void change_adrs(int*q)
{
    int *newad;
    q = newad;
} 
```

如果我从主模块调用这个函数

```
int main()
{
    int *p;
    int a = 0;
    p = &a; // this changes the address contained by pointer p
    printf("The address is %u\n", p);
    change_adrs(p);
    printf("The address is %u\n", p); // but this doesn't change the address
    return 0;
} 
```

地址内容不变。将函数用于同一任务有什么问题？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-17T13:44:50.520

在 C 中，函数参数是按值传递的。因此，您的参数会生成一个副本，并且会对该副本进行更改，而不是您希望看到的实际指针对象已修改。如果您想这样做，您将需要更改您的函数以接受指针到指针的参数并更改取消引用的参数。例如

```
 void foo(int** p) {
      *p = NULL;  /* set pointer to null */
 }
 void foo2(int* p) {
      p = NULL;  /* makes copy of p and copy is set to null*/
 }

 int main() {
     int* k;
     foo2(k);   /* k unchanged */
     foo(&k);   /* NOW k == NULL */
 } 
```

如果您有幸使用 C++，另一种方法是更改​​函数以接受对指针的引用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-17T13:45:15.323

在 C 中，变量是按值传递的——指针的副本被传递给函数。改用另一个指向该指针的指针：

```
void change(int **p, int *someOtherAddress)
{
    *p = someOtherAddress;
}

int a = 1, b = 2;
int *p = &a;

printf("*p = %d\n", *p);
change(&p, &b);
printf("*p = %d\n", *p); 
```

这打印

```
*p = 1
*p = 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-04T10:32:54.733

如果你想改变 C 函数中变量的内容，指针也是一种变量，你必须通过*指针*或*间接引用*传递它，使用总是`&`地址和`*`取消引用运算符。我的意思`*`是在更改变量的值时始终使用运算符并在其前面。

```
#include <stdio.h>
#include <stdlib.h>

void changeIntVal(int *x) {
    *x = 5;
}

void changePointerAddr(int **q) {
    int *newad;
    *q = newad;
}

void changePPAddr(int ***q) {
    int **dummy;
    *q = dummy;
}

int main() {
    int *p;
    int **pp;
    int *tempForPP;
    int a = 0;
    printf("\n The address pointing by p -> %p, pp -> %p, value of a -> %d ", p, pp, a);

    p = &a;
    pp = &tempForPP;
    printf("\n The address pointing by p -> %p, pp -> %p, value of a -> %d ", p, pp, a);

    changeIntVal(&a);        // ----
                             //    |---
    changePointerAddr(&p);   // ----  |---->  parts of what I mean
                             //    |---
    changePPAddr(&pp);       // ----

    printf("\n The address pointing by p -> %p, pp -> %p, value of a -> %d ", p, pp, a);

    return 0;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-11T08:19:58.427

对于像 an 这样的原始数据类型`int`，双指针不是必需的。您可以直接写入`int`存储 的地址，将其地址视为被调用函数中的指针。这与`char`数组（“字符串”）不同，数组（“字符串”）指向的大小是可变的，因此在从被调用函数中更改它时，您必须使用另一个级别的间接。尝试这个：

```
void foo(int *oldVal)
{
    int newVal = 99;    // or whatever you want
    *oldVal = newVal;
}

int main(int argc, char *argv[])
{
    int someVal = 0;
    foo(&someVal);      // we send its address to foo()

    printf("someVal is now %d.\n", someVal);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-17T13:45:00.150

这不会改变实际值，`p`因为`q`in 函数是本地的，并且该函数中的更改不会反映在`main`所以传递地址`p`而不是`p`按值传递

在下面使用此语法

```
void change_adrs(int **q)
{
    int * otheraddess;
    *q = otheraddress; 
} 
```

像这样打电话`change_adrs(&p);`

或者，您还有其他方法：更改函数的返回类型并捕获返回的地址。

```
int* change_adrs(int *q)
{
    int * otheraddess;
    q = otheraddress;
    return q; 
}

int main()
{
    p = change_adrs(p);
    return 0;
} 
```

# c# - 使用 WIF 在单点登录中注销

> ID：13431112
> 
> 赞同：0
> 
> 时间：2012-11-17T13:41:43.093
> 
> 标签：c#, asp.net, asp.net-mvc-3, single-sign-on, wif

我已经使用 Claims 将我的应用程序与单点登录应用程序与 WIF 集成在一起。

我的问题是我无法通过清除索赔退出系统。假设我将 URL 设为： **http:localhost/login.aspx**它仍处于活动状态。

我已经使用了这两行代码，但仍然没有注销

**FederatedAuthentication.SessionAuthenticationModule.DeleteSessionTokenCookie(); FederatedAuthentication.SessionAuthenticationModule.SignOut();**

关于如何退出系统的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:29:24.797

试试`FederatedPassiveSignInStatus`（应该在你的工具箱里）。将属性设置`SignOutAction`为`FederatedSignOut`，控件也将清除您的 STS 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T07:40:17.847

在浏览器、资源选项卡、Cookie 中转到您的开发工具，看看是什么让您保持登录状态。猜测没有意义。

# javascript - 使用 JavaScript 或 jQuery 更改 CSS 规则

> ID：13431116
> 
> 赞同：0
> 
> 时间：2012-11-17T13:42:02.983
> 
> 标签：javascript, jquery, css, styles

### 初步研究

我知道使用[`.css()`](http://api.jquery.com/css/)来获取和设置特定元素的 CSS 规则。我看过一个有这个 CSS 的网站：

```
body, table td, select {
    font-family: Arial Unicode MS, Arial, sans-serif;
    font-size: small;
} 
```

我从不喜欢`Arial Unicode`字体。*嗯，这是我个人的感觉。*所以，我会使用 Chrome 的**Style Inspector**来编辑`Arial Unicode MS`to`Segoe UI`或我喜欢的东西。无论如何，除了使用以下来实现相同的功能之外？

### 案例一

```
$("body, table td, select").css("font-family", "Segoe UI"); 
```

*   递归的，性能密集型的。
*   动态加载时不起作用。

### 案例二

```
$('<style>body, table td, select {font-famnily: "Segoe UI";}</style>')
    .appendTo("head"); 
```

*   还有比这更好的方法吗？
*   创建很多`<style>`标签！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T14:29:44.193

好的，如果：

*   个人喜好

    然后使用用户样式 CSS。根据优先级，用户样式优先于所有其他样式。接下来是内联样式，然后是`!important`样式，然后是特异性，然后是默认浏览器样式。如果只是出于个人喜好，请随身携带自定义 CSS 和支持它的浏览器。

*   你是开发者

    然后不要在 JavaScript 或用户脚本中执行此操作。解决问题并改变这些风格！您只是通过实际使其解析您不想要的内容来使浏览器工作得更多。由于您可以访问代码，因此请更改样式。

    但是，由于您的站点可能是一个公共站点，因此应为每个人设置通用样式。不仅是您在查看该网站。

*   不是开发商：

    我能想到的最好方法（[并且之前已经这样做过*](https://github.com/fskreuz/spray)）是从页面中删除外部样式表并用您自己喜欢的修改版本*替换它们。*那就是复制原始 CSS 文件，更改需要更改的内容，然后通过 JS 通过创建一个`<link>`外部文件来加载它，或者通过 AJAX 加载内容并将它们放在一个`<style>`. 然而，这种方法充满了障碍。`<link>`没有`onload`事件，因此您不会知道外部 CSS 已加载（尽管有一些巧妙的解决方法），并且 AJAXing CSS 内容意味着您的 CSS 在同一个域中，或者浏览器和服务器支持 CORS。

    另一种方法是让 JS 查看加载的样式表并修改其内容。这是一项 JS 密集型工作，因为 JS 会在一堆 CSS 声明中查找您的定义以进行更改。这是一个更安全的选择，但是，我相信并非所有浏览器都可以遍历 CSS 样式，或者至少在浏览器之间以不同的方式进行。另外，如果你有一个大的样式表，你每次都会解析它。

    正如你所说，`.css()`将是递归的。是的，因为它将内联样式应用于每个受影响的元素。这在某种意义上是*好的*，因为内联样式的优先级更高，所以无论使用什么放置`.css()`，您几乎可以肯定它们会生效。但是，由于它现在涉及 DOM，因此工作量更大。

[** 我创建的库不会删除现有样式，它只是加载和卸载使用它的 API 声明的预定义样式*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:46:45.250

看一下：

*   [Quirksmode：更改 CSS](http://www.quirksmode.org/dom/changess.html)
*   [使用 Javascript 完全 Pwn CSS](http://www.hunlock.com/blogs/Totally_Pwn_CSS_with_Javascript)
*   [是改变样式以在 JavaScript 中按元素执行的唯一方法吗？](https://stackoverflow.com/q/7136569/1048572)（可能重复）

恐怕没有图书馆，我真的很想看一个……

# c# - 是否保证 Dictionary.Values 按添加顺序返回元素？

> ID：13431117
> 
> 赞同：3
> 
> 时间：2012-11-17T13:42:16.450
> 
> 标签：c#, dictionary

在审查一个应用程序的代码时，我发现它假定顺序与`Dictionary.Values`添加到集合中的元素相同。

我编写了应用程序来测试这是否属实：

```
using System;
using System.Collections.Generic;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            Dictionary<string, int> values = new Dictionary<string, int>();

            values.Add("apple2", 2);
            values.Add("apple3", 3);
            values.Add("apple4", 4);
            values.Add("apple5", 5);
            values.Add("apple6", 6);
            values.Add("apple1", 1);

            var list = new List<int>(values.Values);

            for (int i = 0; i < list.Count; i++)
            {
                Console.WriteLine(list[i]);
            }

        }
    }
} 
```

输出是：

```
2
3
4
5
6
1 
```

首先我想知道这怎么可能。字典不应该使用无序树或类似的东西吗？

此外，MSDN 指出：

> 中值的顺序`Dictionary<TKey, TValue>.ValueCollection`未指定，但`Dictionary<TKey, TValue>.KeyCollection`与 Keys 属性返回的关联键的顺序相同。

那么为什么 MSDN 告诉“订单未指定”但实现恰好保持订单？我是否正确，我最好不要依赖这个事实？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T13:45:11.657

> 我是否正确，我最好不要依赖这个事实？

绝对地。仅仅因为*有时*它保持顺序并不意味着它会在未来的实现中，或者实际上它现在会在所有情况下都这样做。

当内部数据结构调整大小或删除项目时，顺序可能会改变。

例如，如果您在构建列表之前添加此代码：

```
values.Remove("apple4");
values.Add("jon", 10); 
```

在我的盒子上，我看到值 10 出现在 4 之前的位置……即使它是在5、6 和 1 的条目*之后添加的。*

你*绝对应该，绝对*不依赖订购。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:45:19.497

您偶然获得按顺序排列的值可能是由于您的数据似乎是有序的。更改混合顺序的元素并添加删除元素，其顺序将被更改。你不能依赖订单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:02:16.973

如果您想要这种行为，那么您应该使用明确的有序字典。

[http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)

# jaxb - 使用 JAXB 解组 XML 时出现 WebSphereApplication NoClassDefFoundError

> ID：13431120
> 
> 赞同：4
> 
> 时间：2012-11-17T13:42:36.757
> 
> 标签：jaxb, websphere

我已经在 Websphere Application Server 7 上部署了 EAR。在我的代码中，有一部分我尝试将 XML 文件解组为对象。尝试执行此操作时出现此错误：

```
 java.lang.NoClassDefFoundError: com.ibm.xtq.bcel.util.SyntheticRepository (initialization failure)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)
at com.ibm.xtq.bcel.classfile.JavaClass.<init>(JavaClass.java:109)
at com.ibm.xtq.bcel.classfile.JavaClass.<init>(JavaClass.java:228)
at com.ibm.xtq.bcel.generic.ClassGen.getJavaClass(ClassGen.java:174)
at com.ibm.fcg.bcel.FcgClassGenBCEL.dump2(Unknown Source)
at com.ibm.fcg.bcel.FcgClassGenBCEL.dump(Unknown Source)
at com.ibm.xml.xlxp2.jaxb.unmarshal.codegen.fcg.FCGDeserializationStubGenerator.generate(FCGDeserializationStubGenerator.java:249)
at com.ibm.xml.xlxp2.jaxb.codegen.AbstractGeneratedStubFactory.generateByteCode(AbstractGeneratedStubFactory.java:96)
at com.ibm.xml.xlxp2.jaxb.unmarshal.codegen.fcg.FCGStubFactory.generateStubByteCode(FCGStubFactory.java:46)
at com.ibm.xml.xlxp2.jaxb.codegen.AbstractGeneratedStubFactory.getStubClassConstructor(AbstractGeneratedStubFactory.java:154)
at com.ibm.xml.xlxp2.jaxb.unmarshal.codegen.AbstractGeneratedDeserializationStubFactory.createStub(AbstractGeneratedDeserializationStubFactory.java:58)
at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.DeserializationContext.startComplexType(DeserializationContext.java:662)
at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.DeserializationContext.handleRootElementEvent(DeserializationContext.java:303)
at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.JAXBDocumentScanner.produceRootElementEvent(JAXBDocumentScanner.java:186)
at com.ibm.xml.xlxp2.scan.DocumentScanner.scanRootElement(DocumentScanner.java:2234)
at com.ibm.xml.xlxp2.scan.DocumentScanner.scanProlog(DocumentScanner.java:1726)
at com.ibm.xml.xlxp2.scan.DocumentScanner.nextEvent(DocumentScanner.java:1316)
at com.ibm.xml.xlxp2.scan.DocumentScanner.parseDocumentEntity(DocumentScanner.java:1168)
at com.ibm.xml.xlxp2.jaxb.unmarshal.impl.JAXBDocumentScanner.unmarshal(JAXBDocumentScanner.java:125)
at com.ibm.xml.xlxp2.jaxb.unmarshal.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:120)
at com.inditex.lois.core.ws.utilidades.services.impl.AdaptadorServiceImpl.transformarXMLenObjeto(AdaptadorServiceImpl.java:137) 
```

据我所知，该类是 IBM JDK 的一部分，无法在运行时找到。有什么我必须在我耳边修改的吗，或者，正如我猜测的那样，这都是关于配置/修改 WAS 配置的（或者如果这是一个错误，甚至可以应用补丁）。

有什么帮助吗？非常感谢。

（对不起我的英语不好 ：） ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:34:39.107

此异常意味着`com.ibm.xtq.bcel.util.SyntheticRepository`找到该类，但静态初始化失败。如果日志中没有关于此的其他消息，那么现在是与 IBM 建立 PMR 的时候了。在正常使用过程中，内部 WebSphere 代码中的静态初始化程序永远不会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T08:15:49.187

同样在这里，有一个 APAR： [http ://www-01.ibm.com/support/docview.wss?uid=swg1IV41639](http://www-01.ibm.com/support/docview.wss?uid=swg1IV41639)

```
Problem conclusion
This defect will be fixed in:
6.0.0 SR14
6.0.1 SR6
7.0.0 SR5
.
The fix resolved the AccessControlException. SyntheticRepository
class can be initialized properly, hence NoClassDefFoundError
does not occur. 
```

# web-applications - ajax 调用中的相对 URL：不好还是好的？解决方案？

> ID：13431121
> 
> 赞同：1
> 
> 时间：2012-11-17T13:42:38.923
> 
> 标签：web-applications

我正在阅读一篇关于为什么 Web 开发人员应该避免使用亲属 URL 的文章（[http://yoast.com/relative-urls-issues](http://yoast.com/relative-urls-issues)），但是对于存储在同一目录层次结构中某处的脚本的 ajax 调用之类的事情呢？ ?

为什么“仍在使用”相对 URL 的原因之一是

```
Relative URLs are often used because developers have a test environment on another     
hostname and it makes it easy for them to move stuff between their test environment and 
their live environment. Other reasons include that it’s “just easier in website 
maintenance”. They’re also, in my opinion falsely, promoted by some websites about site 
speed because they’re “shorter” and thus “faster”. 
```

这也是我使用它们的主要原因：如果我决定将我的应用程序移动到其他地方，则必须仔细检查每个脚本来替换所有 URL，这似乎很容易出错。

为了避免讨论话题，当我可能有几十个相对链接分布在多个 js 和 php 文件中时，如何有效地避免相对链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:55:43.293

那个链接在我身上是 404，但我想唯一能让它“更快”的事情是使用相对时不需要 DNS 查找。

确实，使用 /contextroot/webservices-location?query 格式的 url 时，从 dev 到 qa 再到 prod 更容易。

当它怀疑时，如果您担心性能和服务器在本地或外部调用中解析 DNS 的响应时间，请使用 firebug 来分析您的脚本。

只是我的两分钱。

# ruby - Ruby 中有内置的惰性哈希吗？

> ID：13431124
> 
> 赞同：6
> 
> 时间：2012-11-17T13:42:49.923
> 
> 标签：ruby

我需要用各种值填充哈希。一些值经常被访问，而另一些则很少。

问题是，我正在使用一些计算来获取值，并且使用多个键填充哈希变得非常慢。

在我的情况下，使用某种缓存不是一种选择。

我想知道如何使哈希仅在第一次访问键时而不是在添加键时计算值？

这样，很少使用的值不会减慢填充过程。

我正在寻找“有点异步”或延迟访问的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-17T14:57:19.607

有许多不同的方法可以解决这个问题。我建议使用您定义的类的实例而不是哈希。例如，而不是...

```
# Example of slow code using regular Hash.
h = Hash.new
h[:foo] = some_long_computation
h[:bar] = another_long_computation
# Access value.
puts h[:foo] 
```

...创建自己的类并定义方法，就像这样...

```
class Config
  def foo
    some_long_computation
  end

  def bar
    another_long_computation
  end
end

config = Config.new
puts config.foo 
```

如果您想要一种简单的方法来缓存长计算，或者它绝对必须是 Hash，而不是您自己的类，您现在可以用 Hash 包装 Config 实例。

```
config = Config.new
h = Hash.new {|h,k| h[k] = config.send(k) }
# Access foo.
puts h[:foo]
puts h[:foo]  # Not computed again. Cached from previous access. 
```

上述示例的一个问题是`h.keys`不包括在内`:bar`，因为您尚未访问它。因此，例如，您不能遍历其中的所有键或条目，`h`因为它们在实际访问之前不存在。另一个潜在的问题是您的键必须是有效的 Ruby 标识符，因此在`Config`.

如果这对你很重要，有不同的方法来处理它。一种方法是使用[thunk](https://stackoverflow.com/questions/925365/what-is-a-thunk-as-used-in-scheme-or-in-general)填充散列并在访问时强制使用 thunk。

```
class HashWithThunkValues < Hash
  def [](key)
    val = super
    if val.respond_to?(:call)
      # Force the thunk to get actual value.
      val = val.call
      # Cache the actual value so we never run long computation again.
      self[key] = val
    end

    val
  end
end

h = HashWithThunkValues.new
# Populate hash.
h[:foo] = ->{ some_long_computation }
h[:bar] = ->{ another_long_computation }
h["invalid Ruby name"] = ->{ a_third_computation }  # Some key that's an invalid ruby identifier.
# Access hash.
puts h[:foo]
puts h[:foo]  # Not computed again. Cached from previous access.
puts h.keys  #=> [:foo, :bar, "invalid Ruby name"] 
```

最后一个示例的一个警告是，如果您的值是可调用的，它将不起作用，因为它无法区分需要强制执行的 thunk 和值之间的区别。

同样，有办法处理这个问题。一种方法是存储一个标志，该标志标记一个值是否已被评估。但这将需要每个条目的额外内存。更好的方法是定义一个新类来标记哈希值是未评估的 thunk。

```
class Unevaluated < Proc
end

class HashWithThunkValues < Hash
  def [](key)
    val = super

    # Only call if it's unevaluated.
    if val.is_a?(Unevaluated)
      # Force the thunk to get actual value.
      val = val.call
      # Cache the actual value so we never run long computation again.
      self[key] = val
    end

    val
  end
end

# Now you must populate like so.
h = HashWithThunkValues.new
h[:foo] = Unevaluated.new { some_long_computation }
h[:bar] = Unevaluated.new { another_long_computation }
h["invalid Ruby name"] = Unevaluated.new { a_third_computation }  # Some key that's an invalid ruby identifier.
h[:some_proc] = Unevaluated.new { Proc.new {|x| x + 2 } } 
```

这样做的缺点是现在您必须记住`Unevaluted.new`在填充哈希时使用。如果您希望所有值都是惰性的，您也可以覆盖`[]=`。我认为它实际上不会节省很多打字，因为您仍然需要使用`Proc.new`, `proc`, `lambda`, 或`->{}`首先创建块。但这可能是值得的。如果你这样做了，它可能看起来像这样。

```
class HashWithThunkValues < Hash
  def []=(key, val)
    super(key, val.respond_to?(:call) ? Unevaluated.new(&val) : val)
  end
end 
```

所以这里是完整的代码。

```
class HashWithThunkValues < Hash

  # This can be scoped inside now since it's not used publicly.
  class Unevaluated < Proc
  end

  def [](key)
    val = super

    # Only call if it's unevaluated.
    if val.is_a?(Unevaluated)
      # Force the thunk to get actual value.
      val = val.call
      # Cache the actual value so we never run long computation again.
      self[key] = val
    end

    val
  end

  def []=(key, val)
    super(key, val.respond_to?(:call) ? Unevaluated.new(&val) : val)
  end

end

h = HashWithThunkValues.new
# Populate.
h[:foo] = ->{ some_long_computation }
h[:bar] = ->{ another_long_computation }
h["invalid Ruby name"] = ->{ a_third_computation }  # Some key that's an invalid ruby identifier.
h[:some_proc] = ->{ Proc.new {|x| x + 2 } } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T15:04:57.790

你可以使用这个：

```
class LazyHash < Hash

  def [] key
    (_ = (@self||{})[key]) ? 
      ((self[key] = _.is_a?(Proc) ? _.call : _); @self.delete(key)) :
      super
  end

  def lazy_update key, &proc
    (@self ||= {})[key] = proc
    self[key] = proc
  end

end 
```

你的惰性散列会表现得和正常一样`Hash`，因为它实际上是一个真实的`Hash`.

## 在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=any-builtin-lazy-hash-in-ruby.rb&run=true)

*** 更新 - 回答嵌套 procs 问题 ***

是的，它会工作，但它很麻烦。

请参阅更新的答案。

使用`lazy_update`而不是`[]`= 将“惰性”值添加到您的哈希中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T14:06:31.177

您可以使用以下内容定义自己的索引器：

```
class MyHash
  def initialize
    @cache = {}
  end

  def [](key)
    @cache[key] || (@cache[key] = compute(key))
  end

  def []=(key, value)
    @cache[key] = value
  end

  def compute(key)
    @cache[key] = 1
  end
end 
```

并按如下方式使用它：

```
1.9.3p286 :014 > hash = MyHash.new
 => #<MyHash:0x007fa0dd03a158 @cache={}> 

1.9.3p286 :019 > hash["test"]
 => 1 

1.9.3p286 :020 > hash
 => #<MyHash:0x007fa0dd03a158 @cache={"test"=>1}> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T00:39:59.190

这不是对您问题主体的严格回答，但`Enumerable::Lazy` [肯定会成为 Ruby 2.0 的一部分](http://bugs.ruby-lang.org/issues/4890)。这将让您对迭代器组合进行惰性评估：

```
lazy = [1, 2, 3].lazy.select(&:odd?)
# => #<Enumerable::Lazy: #<Enumerator::Generator:0x007fdf0b864c40>:each>
lazy.to_a 
# => [40, 50] 
```

# ruby-on-rails - 错误运行 cap deploy:cold

> ID：13431138
> 
> 赞同：0
> 
> 时间：2012-11-17T13:44:00.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, capistrano

我正在尝试托管我的第一个 rails 应用程序，但出现以下错误。

```
 servers: ["208.68.37.172"]
    [208.68.37.172] executing command
    command finished in 1098ms
    triggering after callbacks for `deploy:update_code'
  * executing `deploy:assets:precompile'
  * executing "cd /home/deployer/apps/cf/current && env RBENV_VERSION=\"1.9.3-p194\" /home/deployer/.rbenv/bin/rbenv exec bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile --trace"
    servers: ["208.68.37.172"]
    [208.68.37.172] executing command
 ** [out :: 208.68.37.172] sh: 1: cd:
 ** [out :: 208.68.37.172] can't cd to /home/deployer/apps/cf/current
 ** [out :: 208.68.37.172] 
    command finished in 1660ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/cf/releases/20121117131510; true"
    servers: ["208.68.37.172"]
    [208.68.37.172] executing command
    command finished in 2548ms
failed: "sh -c 'cd /home/deployer/apps/cf/current && env RBENV_VERSION=\"1.9.3-p194\" /home/deployer/.rbenv/bin/rbenv exec bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile --trace'" on 208.68.37.172 
```

我的 deploy.rb 在下面

```
require 'capistrano-rbenv'
require "bundler/capistrano"

server "208.68.37.172", :web, :app, :db, primary: true

set :application, "cf"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:ramza1/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      run "cd #{current_path} && #{rake} RAILS_ENV=#{rails_env} RAILS_GROUPS=assets assets:precompile --trace"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"

end 
```

我的 unicorn.rb 在下面

```
root = "/home/deployer/apps/cf/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.blog.sock"
worker_processes 2
timeout 30 
```

nginx.conf

```
upstream unicorn {
  server unix:/tmp/unicorn.cf.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name completefashiononline.com;
  root /home/deployer/apps/cf/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

unicorn_init.sh

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          unicorn
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Manage unicorn server
# Description:       Start, stop, restart unicorn server for a specific application.
### END INIT INFO
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/home/deployer/apps/cf/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=deployer
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig HUP && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

这就是我用过的所有东西。请帮助解决这个问题。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:21:40.290

基本上，您正在运行您的资产预编译任务，该任务在 deploy:update_code 之后立即运行。此时，base_path 中没有“当前”目录。这就是您收到该错误的原因。

您应该更改它，以便 assets:precompile 任务在 deploy:finalize_update 之后运行，或者更好的是，使用内置的资产预编译。

您可以通过将其添加到您的 Capfile 来做到这一点：

```
load 'deploy/assets' 
```

# python - Python TreeStructure（父母和孩子）类，孩子被附加到它自己的孩子身上？

> ID：13431139
> 
> 赞同：0
> 
> 时间：2012-11-17T13:44:12.497
> 
> 标签：python, python-3.x, parent, parent-child, tree-structure

我正在编写一个`TreeStructure`（TS）类，它允许我创建相互链接的父对象和子对象。每个 TS 对象都有`m_parent`属性，该属性由属性控制`parent`，并且它们还有`children`列表，该列表包含在该父级的所有子级中。每当我将一个孩子添加到它的父母`children`列表中时，它也会被添加到它自己的`children`列表中吗？这是我所拥有的：

```
ROOT = "__ROOT__"

class TreeStructure:

    def __init__(self, parent=ROOT, children=[]):
        self.children = children
        self.parent = parent

    @property
    def parent(self):
        '''Returns m_parent'''
        if hasattr(self, "m_parent"):
            return self.m_parent
        else:
            return None

    @parent.setter
    def parent(self, parent=ROOT):
        '''Sets m_parent'''
        if type(parent) == type(self):
            if self.parent:
                del self.parent
            self.m_parent = parent
            self.m_parent.children.append(self)
        elif parent == ROOT:
            if self.parent:
                del self.parent
            self.m_parent = ROOT
        else:
            raise TypeError("Parent's type %s did not match objects type %s"
                            %(type(parent), type(self)))

    @parent.deleter
    def parent(self):
        '''Deletes m_parent'''
        if self.parent:
            if self.parent != ROOT:
                self.m_parent.children.remove(self)
            del self.m_parent 
```

现在通过创建两个简单的对象，它应该可以工作了。然而，事实并非如此。

```
a = TreeStructure()
b = TreeStructure(a) 
```

问题出现在第 25 行`self.m_parent.children.append(self)`。如果我在该行的两侧添加打印，我会看到两者`print(self.m_parent.children)`并在附加行之前`print(self.children)`打印一个空列表。`[]`现在，如果我在附加行之后添加打印，两个打印都会说`[<__main__.TreeStructure object at 0x...>]`，这应该只发生在父母身上，而不是孩子身上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:52:19.603

不要`[]`用作默认值！

```
>>> def bad(default=[]):
...     default.append(1)
...     print default
... 
>>> bad()
[1]
>>> bad()
[1, 1]
>>> bad()
[1, 1, 1]
>>> def good(default=None):
...     if default is None:
...             default = []
...     default.append(1)
...     print default
... 
>>> good()
[1]
>>> good()
[1] 
```

默认参数是在*定义*函数时创建的，而不是在*调用*它时创建的。所以只使用非可变类型作为默认值。使用整数、字符串、元组是可以的，但如果你想要一个默认列表或字典或任何可变的东西，那么使用`None`并执行上述技巧。

阅读[这个](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)问题和答案，以更好地理解这个问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-17T13:51:16.293

您已经被老式类（不支持描述符，例如`@property`s）所吸引。你应该使用：

```
class TreeStructure(object): 
```

之后，您的代码对我有用

### 编辑：

我正在使用 python 2.7 进行测试。在 3.x 中，所有类都是新式的。

# django - Django 测试可插拔应用程序和自定义设置

> ID：13431142
> 
> 赞同：0
> 
> 时间：2012-11-17T13:44:25.803
> 
> 标签：django, unit-testing, settings

我有一个可插入的 Django 应用程序，它提供了一些表单。表单有一些与它们相关联的设置，用于控制某些表单的行为（例如，标签、初始值等）。

我按照[博客文章](http://passingcuriosity.com/2010/default-settings-for-django-applications/)为可插入应用程序设置了默认设置，并且在正常情况下运行良好。但是，在我提供覆盖的测试中，根本不会应用覆盖。

这是其中一种形式的代码：

```
if settings.CURRENCY_FORM_INCLUDE_EMPTY:
    currencies.insert(0, (settings.CURRENCY_FORM_EMPTY_VALUE,
                          settings.CURRENCY_FORM_EMPTY_LABEL))

class CurrencyForm(forms.Form):
    currency = forms.ChoiceField(
        required=False,
        choices=currencies,
        label=settings.CURRENCY_FORM_LABEL,
        initial=settings.CURRENCY_FORM_INITIAL_VALUE) 
```

显然，在定义时刻类时，会立即应用标签和初始值等设置，因此覆盖对它们没有影响。

我最终得到了一个相当老套的方法来评估表单`__init__`方法中的所有设置：

```
class CurrencyForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(CurrencyForm, self).__init__(*args, **kwargs)

        choices = list(currencies)

        if settings.CURRENCY_FORM_INCLUDE_EMPTY:
            choices.insert(0, (settings.CURRENCY_FORM_EMPTY_VALUE,
                               settings.CURRENCY_FORM_EMPTY_LABEL))

        self.fields['currency'].label = settings.CURRENCY_FORM_LABEL
        self.fields['currency'].choices = choices
        self.fields['currency'].initial = kwargs.get(
            'initial', {}
        ).get('currency', settings.CURRENCY_FORM_INITIAL_VALUE)

    currency = forms.ChoiceField(required=False,
                                 choices=()) 
```

显然，有很多活动部件。我对这段代码不太满意。如何在不诉诸这些技巧的情况下正确测试设置对表单的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:55:15.057

我不明白你想要做什么。但作为建议，您应该以更加面向对象的方式来考虑这一点。例如`if`，您应该定义所有内容并插入您使用的内容，而不是使用该语句。

如果您有 2 个表单，并且每次都想使用其中的 1 个，您可以进行一些设置，例如：

```
settings.FORM_TO_USE = CurrencyForm 
```

当您想实例化时，您可以执行以下操作：

```
def my_view(request):
    form = settings.FORM_TO_USE() 
```

最后，尝试将测试与配置分开管理。如果您正在对 django 进行单元测试，那么它不应该关心设置是什么。

# haskell - Haskell 简单 XML 生成给出编译错误

> ID：13431143
> 
> 赞同：0
> 
> 时间：2012-11-17T13:44:36.330
> 
> 标签：haskell, xml-generation

我正在尝试学习使用[xmlgen](http://hackage.haskell.org/package/xmlgen-0.4.0.3)库，但是当我尝试来自[http://factisresearch.blogspot.in/2011/05/xmlgen-feature-rich-and-high.html](http://factisresearch.blogspot.in/2011/05/xmlgen-feature-rich-and-high.html)的示例时，出现编译错误。

这是代码：

```
import Text.XML.Generator
import Data.ByteString.Lazy as BSL
import Prelude as P

genXml' :: Xml Doc
genXml' =
  let people = [("Stefan", "32"), ("Judith", "4")]
  in doc defaultDocInfo $
       xelem "people" $
         xelems $ P.map (\(name, age) -> xelem "person" (xattr "age" age <#> xtext name)) people

outputXml :: IO ()
outputXml = BSL.putStr (xrender genXml') 
```

编译器错误：

```
$ ghc --make prog.hs
[1 of 1] Compiling Main             ( prog.hs, prog.o )

prog.hs:13:25:
    No instance for (XmlOutput ByteString)
      arising from a use of `xrender'
    Possible fix:
      add an instance declaration for (XmlOutput ByteString)
    In the first argument of `BSL.putStr', namely `(xrender genXml')'
    In the expression: BSL.putStr (xrender genXml')
    In an equation for `outputXml':
        outputXml = BSL.putStr (xrender genXml') 
```

编译器似乎推断“xrender genXML”需要是“XmlOutput ByteString”类型，并且在 xmlgen 库中有一个这样的实例。因此，请帮助我了解此错误的含义以及如何修复它。

如果有帮助，我在 Ubuntu 12.10、ghc 7.4.2 和 xmlgen 0.4.0.3 中使用 Haskell 平台

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:01:09.817

> 编译器似乎推断“xrender genXML”需要是“XmlOutput ByteString”类型

不，编译器推断（从使用`BSL.putStr`）`xrender genXML'`需要是类型`Data.ByteString.Lazy.ByteString`。

由于类型`xrender`是

```
xrender :: (Renderable r, XmlOutput t) => Xml r -> t 
```

能够实例化的必要条件`t`是`Data.ByteString.Lazy.ByteString`惰性`XmlOutput`s 的实例`ByteString`。

由于存在从 导出的此类实例`Text.XML.Generator`，因此我看到的错误消息的唯一原因是您的

```
import Data.ByteString.Lazy as BSL 
```

从与构建库所针对的不同版本的[`bytestring`](http://hackage.haskell.org/package/bytestring)包中导入模块。`xmlgen`

你能用 来检查它`ghc-pkg describe xmlgen`，它列出了`bytestring`它在依赖项中构建的版本，并`ghc-pkg list bytestring`检查`bytestring`你安装了哪些版本？

# javascript - 如何使用 jQuery 从文本框中动态计算值？

> ID：13431155
> 
> 赞同：0
> 
> 时间：2012-11-17T13:45:33.680
> 
> 标签：javascript, jquery, struts2, ognl

我有一个`invoice.jsp`页面，我必须使用 jQuery 或任何其他方式在文本框中计算一些值。

我对 jQuery 了解不多。请帮我解决这个问题。

在我的发票中有一个数量文本框。如果用户输入数量，则计算出的价格应动态计算`(total_subPrice= unit_price * quantity)`，即显示在另一个名为“价格”的文本框中。

再次，所有价格的总和应作为总计出现在按钮中。

请注意：所有行值都来自我的数据库表，基于用户对项目的选择。

我只使用此代码在我的`invoice.jsp`页面中显示值：

```
<s:iterator  value="#session.BOK" status="userStatus">
  <tr style="height: 10px;"> 
    <td width="65%" align="left"><s:property value="bookTitile"/></td>
    <td width="10%" align="left"><s:property value="price"/></td>
    <td width="10%" align="center"><s:textfield name="quantity" value="%{quantity}" size="2" /></td>
    <td width="15%" align="center" >
      <s:textfield value="%{price}" name="" size="6"></s:textfield>
    </td>
  </tr>
</s:iterator> 
```

我的`invoice.jsp`输出如下所示： ![在此处输入图像描述](../Images/f4c3992381af3428b8d173f297c86ce8.png)

我不知道如何`line Total`根据选择的数量来计算，并`line total`在总计文本框中显示所有的总和（见下面的发票图片）。

我也试过 [这个](http://jsfiddle.net/bozdoz/LGyeq/)，但我仍然无法解决我的问题。

我的完整 JSP 代码：

```
<table width="100%" height="50%" border="0" cellpadding="0" cellspacing="0">
  <tr>
  <td height="74%">
    <s:form action="dfs" id="form3"  theme="simple">
      <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0"  id="your_content">
        <tr>
          <td valign="top" height="10%">
            <div id="invNum">Invoice# 12688</div>
            <div id="ttielMain">Vision Books</div>
            <div id="Orgaddress">    Thamel Kathmandu Nepal</div>
            <div id="phoneNum">  Tel# 00977-1-12173803</div>
            <div id="websiteOrg"> www.thebestbookfinder.com</div>
          </td>
        </tr>
        <tr>
          <td valign="top" width="100%" align="left">
          ----------------------------------------------------------- -----------------------------------
          </td>
        </tr>
        <tr>
          <td height="6%" valign="top" width="100%">
            <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
              <tr style="height: 10px;font-family: serif;font-weight: bold;font-size: 14px;">
                <td width="65%" align="left">Title</td>
                <td width="10%" align="left">Unit Price</td>
                <td width="10%" align="center">Qty</td>
                <td width="15%" align="left">Line Total</td>
              </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td height="1%" valign="top" width="100%">
            <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
              <tr style="height: 10px;">
                <td width="65%" align="left">
                -------------------------------------------------------
                </td>
                <td width="10%" align="left">----------</td>
                <td width="10%" align="center">-----</td>
                <td width="15%" align="left">-------------</td>
              </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td height="65%" valign="top" width="100%">
            <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
              <s:iterator  value="#session.BOK" status="userStatus">
                <tr style="height: 10px;">
                  <td width="65%" align="left"><s:property value="bookTitile"/></td>
                  <td width="10%" align="left"><s:property value="price"/></td>
                  <td width="10%" align="center"><s:textfield name="quantity" value="%{quantity}" size="2" /></td>
                  <td width="15%" align="center"><s:textfield value="%{price}" name="" size="6"></s:textfield></td>
                </tr>
              </s:iterator>
            </table>
          </td>
        </tr>
        <tr>
          <td height="1%" valign="top" width="100%">
            <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
              <tr style="height: 10px;">
                <td width="100%" align="right" colspan="5">
                ------------------------------------
                </td>
              </tr>
            </table>
          </td>
        </tr>
        <tr>
          <td height="1%" valign="top" width="100%">
            <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
              <tr style="height: 10px;">
                <td width="100%" align="right" colspan="5" style="font-weight: b">
                  <s:set var="total" value="%{0}" />
                  <s:iterator value="#session.BOK">
                    <s:set var="total" value="%{price + #attr.total}" />
                  </s:iterator>
                  <s:textfield name="subtotal" value="%{'' + #attr.total}" size="5"> </s:textfield>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </tr>
      <tr>
        <td height="1%" valign="top" width="100%">
        <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
          <tr style="height: 10px;">
            <td width="100%" align="right" colspan="5">Discount:<sj:textfield name="amt"  size="1"  placeholder=" %"/></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="1%" valign="top" width="100%">
        <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
          <tr style="height: 10px;">
            <td width="100%" align="right" colspan="5">
            --------------------------------------------------------------------------------------------------
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="1%" valign="top" width="100%">
        <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
          <tr style="height: 10px;">
            <td width="100%" align="right" colspan="5" style="font-weight: bolder;">
              <s:set var="total" value="%{0}" />
              <s:iterator value="#session.BOK">
                <s:set var="total" value="%{price + #attr.total}" />
              </s:iterator>
              Total: <s:property value="%{'' + #attr.total}" />
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="1%" valign="top" width="100%">
        <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
          <tr style="height: 10px;">
            <td width="100%" align="right" colspan="5">
            --------------------------------------------------------------------------------------------------
            </td>
          </tr>
        </table>
      </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T13:52:18.957

用于`.change()`您的输入。

[jQuery 文档 - 更改](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:00:43.277

正如@flow所说，使用.change（）：

```
$(function() {
    $('input[name^="quantity"]').change(function() {
        var unitprice = $(this).siblings('input[name^="unitprice"]').val();
        $(this).siblings('input[name^="price"]')
               .val($(this).val() * unitprice);
    });
}); 
```

# teamcity - teamcity 中的 StyleCop 构建运行器不采用自定义 StyleCop 设置

> ID：13431156
> 
> 赞同：2
> 
> 时间：2012-11-17T13:45:38.667
> 
> 标签：teamcity, stylecop

我想使用 TeamCity 7.1 中的 StyleCop 构建运行器插件来测试我的项目中的 StyleCop 规则。每个项目都有自己的 StyleCop 设置文件，并且在从 Visual Studio 进行测试时一切正常。

但是，当我从 TeamCity 运行构建步骤时，StyleCop 会使用其他一些设置，并且会发生许多错误。

为什么 TeamCity 中的 StyleCop 不从我的项目中获取 StyleCop 设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T19:50:11.313

默认情况下，您的设置文件会合并到父设置中，这可能会给您带来一些问题。尝试通过添加以下设置在解决方案根目录停止合并：

```
<GlobalSettings>
    <StringProperty Name="MergeSettingsFiles">NoMerge</StringProperty>
</GlobalSettings> 
```

这将确保 StyleCop 在所有开发和构建机器上的行为相同，而不管层次结构更高层配置的设置（例如 StyleCop 应用程序文件夹中的设置）。但是，如果您这样做，请确保从不再合并的文件中复制所有必需的设置。

# php - 未定义属性“CWebUser.bootstrap”

> ID：13431165
> 
> 赞同：2
> 
> 时间：2012-11-17T13:46:30.050
> 
> 标签：php, twitter-bootstrap, yii

我有一个使用 yii 框架的网站。首先，在我启动并运行网站后，我想安装引导程序（yii-bootstrap-1.2.0.r300.zip）。然而，这并不顺利。

我收到以下错误“未定义属性“CWebUser.bootstrap”。”

Bootstrap 扩展被放置为 /site/protected/extensions/bootstrap

我的主要配置文件看起来像这样

```
// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
return array(
'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
'name'=>'PeerPilot',
'theme'=>'newssourcefinal', // biskit is sub directory name under theme directory

// preloading 'log' component
'preload'=>array(
    'log',
    'bootstrap',
    ),

// autoloading model and component classes
'import'=>array(
    'application.models.*',
    'application.components.*',
),

'modules'=>array(
    'gii'=>array(
        'class'=>'system.gii.GiiModule',
        'password'=>'helloworld',
        'generatorPaths'=>array(
            'bootstrap.gii',),
        // If removed, Gii defaults to localhost only. Edit carefully to taste.
        // 'ipFilters'=>array('127.0.0.1','::1'),
    ),
),

// application components
'components'=>array(
    'user'=>array(
        // enable cookie-based authentication
        'allowAutoLogin'=>true,
        'bootstrap'=>array(
            'class'=>'ext.bootstrap.components.Bootstrap', // assuming you extracted bootstrap under extensions
        ),
    ),
    // uncomment the following to enable URLs in path-format
    /*
    'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ),
    *//*
    'db'=>array(
        'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
    ),

    'errorHandler'=>array(
        // use 'site/error' action to display errors
        'errorAction'=>'site/error',
    ),
    'log'=>array(
        'class'=>'CLogRouter',
        'routes'=>array(
            array(
                'class'=>'CFileLogRoute',
                'levels'=>'error, warning',
            ),
            // uncomment the following to show log messages on web pages
            /*
            array(
                'class'=>'CWebLogRoute',
            ),
            */
        ),
    ),
),

// application-level parameters that can be accessed
// using Yii::app()->params['paramName']
'params'=>array(
    // this is used in contact page
    'adminEmail'=>'webmaster@example.com',
),
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:53:19.767

替换您的 config/main.php 如下

```
'components'=>array(
//..........
'user'=>array(
      'allowAutoLogin'=>true,
),    

'bootstrap' => array(
    'class'=>'ext.bootstrap.components.Bootstrap'
     )
) 
```

# windows-phone-7 - Windows Phone 中的梵文字体呈现，不正确的字符序列

> ID：13431172
> 
> 赞同：2
> 
> 时间：2012-11-17T13:46:59.617
> 
> 标签：windows-phone-7, fonts, internationalization, hindi

我正在开发一个使用 Microsoft 翻译服务将英文文本翻译成印地语的应用程序。我正在使用 TextBlock 控件来显示翻译结果。

印地语字符序列中的翻译文本不正确。例如，单词'heart'的翻译是'दिल'但是字符序列不正确，它显示为'[将单词'Heart'翻译成印地语](http://sdrv.ms/TYFOu2)

我无法弄清楚问题所在。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:46:15.983

以防万一还在挣扎...

दिल 如何为您的应用程序存储在内存中？它是否遵循 Unicode 序列 \u0926、\u093f、\u0932？您使用哪种字体进行演示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:28:48.557

Windows Phone 7.0 版本存在该问题。我已将应用程序更新到 Windows Phone 7.1，现在可以正常工作了。

谢谢 Amir E. Aharoni 和 Sabinia。

# c - glPolygonOffset中factor参数的含义和用法

> ID：13431174
> 
> 赞同：13
> 
> 时间：2012-11-17T13:47:04.170
> 
> 标签：c, opengl, graphics, depth-buffer, depth-testing

我很难理解`glPolygonOffset`函数中第一个参数的含义。

```
void glPolygonOffset(GLfloat  factor, GLfloat units); 
```

[官方文档](http://www.opengl.org/sdk/docs/man/xhtml/glPolygonOffset.xml)说这个因素

> 指定用于为每个多边形创建可变深度偏移的比例因子。

然后

> 每个片段的深度值将在从适当顶点的深度值插值后偏移。offset 的值是 factor × DZ + r × units ，其中 DZ 是相对于多边形屏幕区域的深度变化的度量，而 r 是保证在给定的情况下产生可解析偏移的最小值执行。

我明白什么`r`和`unit`是什么。我不明白的是什么`DZ`，即“测量多边形屏幕区域的深度值变化”是什么意思，为什么我需要将因子设置为 0 以外的任何值。

如果我希望我的线框被偏移，我只需要在深度值上添加/减去几个单位，不是吗？factor参数（以及文档中提到的DZ）的含义、用途和使用示例是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-17T15:21:56.503

我不得不承认这里有些无知，但我发现[这篇文章](http://www.glprogramming.com/red/chapter06.html#name4)解释了它。他们说：

> 要在没有视觉伪影的情况下对突出显示的实体对象进行良好渲染，您可以向实体对象添加正偏移（将其推离您）或向线框添加负偏移（将其拉向您）。最大的问题是：“多少偏移量才足够？” 不幸的是，所需的偏移量取决于各种因素，包括每个多边形的深度斜率和线框中线条的宽度。

然后他们以这种方式解释深度斜率：

> 深度斜率是当您遍历多边形时，z（深度）值的变化除以 x 或 y 坐标的变化。深度值在窗口坐标中，限制在 [0, 1] 范围内。要估计多边形的最大深度斜率（偏移方程中的 m），请使用以下公式：m = max {|delV / delS|,|delV / delT|}。（其中 del 是偏导数）

所以他们得出结论：

> 对于平行于近剪裁平面和远剪裁平面的多边形，深度斜率为零。[...] 对于与剪裁平面成很大角度的多边形，深度斜率可能显着大于零，并且可能需要更大的偏移量。因子的小非零值（例如 0.75 或 1.0）可能足以生成不同的深度值并消除令人不快的视觉伪影。

# java - 从 ArrayList 中删除元素

> ID：13431175
> 
> 赞同：1
> 
> 时间：2012-11-17T13:47:25.960
> 
> 标签：java, arraylist

我正在尝试将“选择”元素从手 [1] 复制到手 [0]。我可以用这段代码成功地做到这一点：

```
 for(Card card : hands[1].cards) {
          if (card.suit().ordinal() == 0){
             hands[0].addSingleCard(card);
             //hands[1].removeSingleCard(card);
             }
       } 
```

不幸的是，我的 removeSingleCard 方法没有按我的预期工作。将其注释掉后，for-each 循环成功地将所有“俱乐部”牌从 hand[1] 复制到 hand[0]。我希望 removeSingleCard 方法会在复制后从手 [1] 中删除每张“俱乐部”卡。

```
 public void addSingleCard(Card card){
           if(card!= null){
             cards.add(card);
           }
       }

       public void removeSingleCard(Card c){
           if(c!= null){
             cards.remove(c);
           }
       } 
```

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T13:49:50.180

*除了通过*迭代器之外，您不能从正在迭代的集合中删除。所以你可以使用：

```
for (Iterator<Card> iterator = hands[1].cards.iterator();
     iterator.hasNext(); ) {
    Card card = iterator.next();
    if (card.suit().ordinal() == 0) {
        hands[0].addSingleCard(card); // Or hands[0].cards.add(card);
        iterator.remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:50:07.310

我假设你得到 a`ConcurrentModificationException`因为你在`for`循环中迭代时从集合中删除。
你应该使用`iterator.remove`

# php - 用json上传文件和一些数据

> ID：13431178
> 
> 赞同：3
> 
> 时间：2012-11-17T13:47:39.070
> 
> 标签：php, json, upload

我正在尝试将文件上传到服务器。还有一些来自输入表单的关于这些数据的评论。

这里我用js发送数据：

```
var postContainer = new Array();
        postContainer.push(
        {
            file : file,
            f_name : file.name,
            input1 : it1Value 
        });

        var newJ = JSON.stringify(postContainer);            
        xhr.setRequestHeader("X-File-Name", file.name);
        var resText;
        xhr.setRequestHeader("Content-type","application/json");
        xhr.onreadystatechange = function(){
            if(xhr.readyState != 4){
                return;
            }
            console.log(xhr.responseText);
        }
        xhr.send(newJ); 
```

然后我读取数据并将文件发送到上传文件夹：

```
 $data = file_get_contents("php://input");
    $data = json_decode($data);
    var_dump($data);
    $this->fileName = $data[0]->{"f_name"};
    $this->genre = $data[0]->{"input1"};
    $this->file = $data[0]->{"file"};
            file_put_contents(
    $this->path . $this->fileName,
    $this->file
    ); 
```

var_damp($data) 控制台的输出为：

```
array
0 => 
object(stdClass)[2]
  public 'file' => 
    object(stdClass)[3]
      public 'webkitRelativePath' => string '' (length=0)
      public 'lastModifiedDate' => string '2012-06-26T06:25:34.000Z' (length=24)
      public 'name' => string 'Belgium.png' (length=11)
      public 'type' => string 'image/png' (length=9)
      public 'size' => int 28228
  public 'f_name' => string 'Belgium.png' (length=11)
  public 'input1' => string 'Genre' (length=5) 
```

可以看到数据被发送到了php页面。但是当我检查我的上传文件夹时。我可以找到我上传的文件。但大小为零。这意味着我上传一个空文件！！！

有人可以帮我解决这个问题吗？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:46:26.193

您**可以**使用 html5 上传带有 ajax 请求的文件

您正在寻找的是发送数据和表单数据（据我所知，这在 json 中是不可能的）

在这篇文章中寻找发送数据：

[http://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)

该页面上有一个很好的示例，说明了您要完成的工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T12:12:42.830

您可以使用 jquery.form.js 上传/发布文件和数据此文件序列化所有字段数据并发送到服务器您可以使用 php 接收发布数据并转换为 json 格式类型： http: [//www.malsup.com/jquery/形式/](http://www.malsup.com/jquery/form/)

# android - Android XML 注释

> ID：13431179
> 
> 赞同：0
> 
> 时间：2012-11-17T13:47:46.447
> 
> 标签：android, xml, annotations

我一直在使用 Simple 尝试将我的 XML 文件读入此类。我真的不知道我是否正确地注释了这些类。

我不知道我是否需要这部分：

```
public Frame()
{
    super();
}

public Frame(int num, int x, int y, int width, int height,int offsetx,int offsety, int duration )
{
    this.Num = num;
    this.X = x;
    this.Y = y;
    this.Width = width;
    this.Height = height;
    this.OffsetX = offsetx;
    this.OffsetY = offsety;
    this.Duration = duration;] 
```

super() 是做什么的？我需要getter/setter吗？我添加的是getter还是setter？他们是自动称呼自己还是什么？

这是完整的课程：

```
public class SpriteAnimationManag 
{
// Animation frame class

@Element(name = "Frame")
public class Frame
{

    @Element(name = "Num")
    public int Num;

    @Element(name = "X")
    public int X;

            @Element(name = "Y")
    public int Y;

    @Element(name = "Width")
    public int Width;

    @Element(name = "Height")
    public int Height;

    @Element(name = "OffSetX")
    public int OffsetX;

    @Element(name = "OffSetY")
    public int OffsetY;

    @Element(name = "Duration")
    public float Duration;

    public Frame()
    {
        super();
    }

    public Frame(int num, int x, int y, int width, int height,int offsetx,int offsety, int duration )
    {
        this.Num = num;
        this.X = x;
        this.Y = y;
        this.Width = width;
        this.Height = height;
        this.OffsetX = offsetx;
        this.OffsetY = offsety;
        this.Duration = duration;
    }

}

// Animaiton class to hold the name and frames
public class Animation 
{

    @Element(name = "Name")
    public String Name;

    @Element(name = "FrameRate")
    public int FrameRate;//may need elementarray or list???

    @Element(name = "Loop")
    public boolean Loop;

    @Element(name = "Pingpong")
    public boolean Pingpong;

    @ElementArray(name = "Frames") 
    public Frame[] Frames;

public Animation()
{
    super();
}

public Animation(String name, int framerate, boolean loop, boolean pingpong, Frame[] frames)
{
this.Name = name;
this.FrameRate = framerate;
this.Loop = loop;
this.Pingpong = pingpong;
this.Frames = frames;
}

}

// The Sprite Texture stores the Sprite Sheet path.fr
public class SpriteTexture 
{
    // The Sprite Sheet texture file path

    @Element(name = "path")
    public String Path;

    public SpriteTexture()
    {
        super();
    }

    public SpriteTexture(String path)
    {
        this.Path = path;
    }

}

// Aniamtion Set contains the Sprite Texture and Animaitons.

@Root(name = "Animations")
public static class XNAAnimationSet
{
    // The sprite texture object

    @Element(name = "Texture")
    public SpriteTexture SpriteTexture;

    // The animation array in the Animation Set
        @ElementArray(name = "Animation")
    public Animation[] Animations;

    public XNAAnimationSet()
    {
        super();
    }

    public XNAAnimationSet(SpriteTexture spritetexture, Animation[] animations)
    {
        this.SpriteTexture = spritetexture;
        this.Animations = animations;
    }
}

// Sprite Animation Manager class
public final static class SpriteAnimationManager 
{
    private static final String XNAAnimationSet = null;//was static private static
    public static int AnimationCount;

    // Read the Sprite Sheet Description information from the description xml file
    public static XNAAnimationSet Read(String filename) throws Exception
    {

         XNAAnimationSet animationSet = new XNAAnimationSet();

             Serializer serializer = new Persister();

             try {
                animationSet = serializer.read(XNAAnimationSet.class, filename );

            } 
             catch (Exception e)
             {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        // Count the animations to Animation Count
        AnimationCount = animationSet.Animations.length;

        return animationSet;
    }
  }
} 
```

我一直试图通过尝试将类写入文件来查看正在读取的内容。该文件已创建，但它是空的。

有人能告诉我我是否正确注释了吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:03:12.010

我最后一天在那里使用 jaxb 来解析我的 xml，我不确定它与您的操作方式有多相似，但我会提到一些我需要的东西：

首先，我认为我的班级中需要一个无参数构造函数，对你来说，它只是-

```
public Frame(){}; 
```

我相信你确实需要 getter，你所拥有的不是 getter/setter，你只是声明变量，这确实是基本的 java 东西，所以在继续之前可能值得一读。当你正确定义了你的 getter 后，你就可以把`@XMLElement`注解放在它们上面，而不是放在你的变量声明符上面。吸气剂看起来像：

```
@XMLElement    
public string getName(){ return this.Name}; 
```

我还建议尝试一次解析一个类，这里​​有多个内部类，我想当你尝试解析时会变得混乱，我认为你需要`@RootElement`在类名声明符之上，所以 xml 知道什么类型反对你的创作。

无论如何，我脑子里有几件事，祝你好运！

# matlab - 如何在 MATLAB 中将自定义颜色范围与颜色条相结合？

> ID：13431183
> 
> 赞同：3
> 
> 时间：2012-11-17T13:48:08.703
> 
> 标签：matlab, plot, range, colorbar

我想要一个像下面这样的表面图，但有一个适当的颜色条。

![没有颜色条的绘图](../Images/c570a324837d49abce8ddd4bc614313a.png)

这是我的代码：

```
[X,Y,Z] = peaks(30);

[maxval dummy] = max(Z(:));
[minval dummy] = min(Z(:));

crange = 1.5;

% red, yellow, green
cmap = [1 0 0; 1 1 0; 0 1 0];  
colormap(cmap); 

colors = zeros(size(Z));                   
colors(Z <= -crange) = 1;              % red (1)
colors(Z > -crange & Z < crange) = 2;  % yellow (2)
colors(Z >= crange) = 3;               % green (3)

surf(X,Y,Z, colors);
axis([-3 3 -3 3 -10 10]);

%cbh = colorbar('YGrid','on');    
%caxis([minval-0.1 maxval+0.1]);
%set(cbh,'YTick',[minval -crange crange maxval]); 
```

到目前为止，我没有运气添加颜色（绿色，黄色，红色）根据我的自定义范围对齐的颜色条（绿色 [8 ... 1.5]，黄色 [1.5 ... -1.5]，红色 [- 1.5 ... -6.4]）。相反，当我取消注释最后三行时，会出现一个颜色呈线性对齐的颜色条，并且我的绘图中的颜色根据颜色条而不是我的自定义范围对齐。

![用彩条绘制](../Images/cda08e682f5d94a5ec2acb4cbddbfa91.png)

现在，我想要的是颜色栏中的颜色与我的自定义刻度相匹配，并且情节看起来像第一张图片中的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:10:14.413

问题是您自己指定冲浪图中每个点的颜色，因此默认情况下它们与 z 值无关。因此，颜色条仅基于颜色编号构建，即 1 到 3。因此，这些也显示为颜色条的默认刻度（在您更改它们之前。

正如您所发现的，您可以手动设置刻度，并且以相同的方式“作弊”并使用`yticklabels`：

```
figure
colormap(cmap); 
surf(X,Y,Z, colors);
axis([-3 3 -3 3 -10 10]);

cbh = colorbar('YGrid','on');
set(cbh,'ytick',linspace(1,3,4));
set(cbh,'yticklabel',arrayfun(@num2str,[minval -crange crange maxval],'uni',false)); 
```

![在此处输入图像描述](../Images/2a85e2edd93a109900f0767c211ca30e.png)

或者另一种方法是简单地使用`caxis`，但是绘图的颜色由 minmax 值线性定义。因此，您无法设置非线性范围。
插图：

```
figure
colormap(cmap); 
surf(X,Y,Z);
axis([-3 3 -3 3 -10 10]);
caxis([minval-0.1 maxval+0.1]);
cbh=colorbar
set(cbh,'YTick',[minval -crange crange maxval]); 
```

![在此处输入图像描述](../Images/78b777b1ddf03171519611a82ca84871.png)

所以毕竟，我认为我的第一种方法（使用 yticklabels）是做你想做的事情的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-03T18:56:55.453

我知道这是一个疯狂的旧帖子，但它是在我寻找答案时出现的。这就是我的答案（不幸的是，它必须假设彩条上的刻度大小相同）。

因此，鉴于您已经制作了只有 3 种颜色的颜色图，下一部分是代数。[caxis](http://www.mathworks.com/help/matlab/ref/caxis.html)遵循一个简单的公式，该公式由颜色栏中的颜色数量以及您的最小和最大范围决定。

```
index = fix((C-cmin)/(cmax-cmin)*m)+1; 
```

所以 index 将引用颜色图中的索引（m = 3，因为这是你的颜色图的长度），我要做的是让 C = 1.5，决定你是否想要它对称（你正在求解 cmax 和 cmin如果两者都是x，则更容易），并使index = 2（因为你只有3种颜色，这应该意味着解决1.5会给你设置的cmin/cmax，这将使1.5成为黄色和红色之间的截止点。你应该能够在某处设置显示范围值，这将适当地设置颜色图（尽管可能不是标签）。

很抱歉回复这么旧的帖子，但也许这对其他人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T06:36:30.910

在为我遇到的问题寻找解决方案时，我遇到了这个问题。无论如何，这个问题帮助我在对书面代码进行少量修改后为我的问题找到了解决方案。同时我想建议对代码进行一些更改，以便用户可以获得所需的带有必要颜色的绘图和适当的颜色条。这是代码，

```
[X,Y,Z] = peaks(30);

[maxval dummy] = max(Z(:));
[minval dummy] = min(Z(:));

crange=1.5;

% red, yellow, green
cmap = [1 0 0; 1 1 0; 0 1 0];  
colormap(cmap); 

colors = zeros(size(Z));                   
colors(Z <= -crange) = minval-0.1;              % red (1)
colors(Z > -crange & Z < crange) = crange;  % yellow (2)
colors(Z >= crange) = maxval+0.1;              % green (3)

surf(X,Y,Z, colors);
axis([-3 3 -3 3 -10 10]);

cbh = colorbar('YGrid','on');    
caxis([minval-0.1 maxval+0.1]);
set(cbh,'YTick',[minval -crange crange maxval]);
```

[阴谋](http://i.stack.imgur.com/yS9v9.jpg)

# code-signing - 使用来自威瑞信的 microsoft authenticationcode 证书对 .msi 和 .exe 进行代码签名

> ID：13431186
> 
> 赞同：1
> 
> 时间：2012-11-17T13:48:38.303
> 
> 标签：code-signing, code-signing-certificate, verisign

我订购了一个威瑞信代码签名证书（microsoft authenticationcode），现在我有一个包含我的证书的 .cer 文件。

我检查了 signtool.exe 文档，现在需要一个 .pfx 文件。如何获取 .pfx 文件以及如何获取我的私钥（.pvk 文件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T13:51:57.297

您可以从任何其他提供商的威瑞信获得此文件。他们通常会在您的机器上安装证书，您需要将其导出为 pfx 才能与 signtool 一起使用。

使用 MMC 并添加证书管理单元来执行此操作。

您将在您的证书提供程序站点中找到详细的帮助。确保您已购买代码签名证书。

# php - 像soft32.com这样的应用下载器

> ID：13431188
> 
> 赞同：0
> 
> 时间：2012-11-17T13:49:38.533
> 
> 标签：php, c++, .net, download

我有一个下载站点，我希望用户首先下载一个下载器，然后下载实际程序。

首先，我想知道哪种语言更好地做到这一点？.Net 是一个不错的选择，但用户必须安装它，但可能并非如此。我认为 c++ 是最好的，因为不需要任何组件。

其次，如何使用 PHP 将下载详细信息（如链接和信息）注入下载器？

最后，是否有任何好的示例或基本源代码来完成此操作？

下载器必须支持恢复和多段下载。

这不适用于分析或获取用户数据。只是因为我们的国家伊朗有互联网问题 :( 。我们看到服务器上有很多部分下载。这样我们就可以恢复并且更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:05:05.610

如果您这样做是为了分析或获取用户数据，请注意在许多国家/地区这是非法的，而且它很可能会让您失去用户而不是获得用户。

任何未授权安装在用户设备上的库，您是否准备好为所有平台编写尽可能多的应用程序？从 iOS 设备到 Windows XP，您需要编写自己的应用程序。

我认为这个答案无法回答，它涵盖的主题非常广泛，而且容易出现法律问题。

# winapi - java jni SendMessageA WM_KEYDOWN 不起作用（

> ID：13431203
> 
> 赞同：1
> 
> 时间：2012-11-17T13:51:47.883
> 
> 标签：winapi, keydown, sendmessage

```
public interface User32Extra extends User32 {
        User32Extra INSTANCE = (User32Extra) Native.loadLibrary("user32", User32Extra.class, W32APIOptions.DEFAULT_OPTIONS);
        public HWND FindWindow(String string, String string1);
        long SendMessageA(HWND hWnd, int msg, WPARAM wPAram, LPARAM lParam);

}

public class ecbot {
    //http://msdn.microsoft.com/en-us/library/windows/desktop/ms645607(v=vs.85).aspx
    private static int WM_KEYDOWN = 256;
    public static void main(String[] args) {
        HWND hWnd = User32.INSTANCE.FindWindow("Notepad", null);
        System.out.println(hWnd.toString());
        LPARAM lParam1 = new LPARAM(1);
        LPARAM lParam0 = new LPARAM(0);        
        for (int i = 0; i < 1000; i++) {
            WinDef.WPARAM wParam = new WinDef.WPARAM(i);
            User32Extra.INSTANCE.SendMessageA(hWnd, WM_KEYDOWN, wParam, lParam1);
            User32Extra.INSTANCE.SendMessageA(hWnd, WM_KEYDOWN, wParam, lParam0);
            User32Extra.INSTANCE.SendMessageA(hWnd, WM_KEYDOWN, wParam, null);
        }
    }
} 
```

我正在尝试向按键发送消息，寻找正确的窗口句柄，但该消息没有收到....为什么？（（

# r - RApache qplot 在绘图时不起作用

> ID：13431206
> 
> 赞同：1
> 
> 时间：2012-11-17T13:51:50.950
> 
> 标签：r, ggplot2, opensuse, rapache

在我的 Linux SuSE 12.2 服务器上，RApache 似乎无法与 ggplot2 一起正常工作（同时与 plot 一起正常工作）

当执行[http://claree.univ-lille1.fr/R/brew/rapacheggplot](http://claree.univ-lille1.fr/R/brew/rapacheggplot)时：

```
 <%

   require(ggplot2)

   fp <- file.path("/home/calciu/public_html/rapacheggplot/images", "test.png")     # set file path

   furl <- paste("http://claree.univ-lille1.fr/~calciu/rapacheggplot/images/","test.png", sep="")

   png(fp)

   #plot(1:10, runif(10))

   qp <- qplot(1:10, runif(10), geom=c("line", "smooth"), main="rapacheggplot")

   ggsave(filename = fp, plot = qp)

   dev.off()

   %>

   <html>
   <head></head>
   <body>
   <img src="<%= furl %>" width="1000" height="500"/>
</body>
</html> 
```

brew 中的此源生成一个空的 png 文件，而当用一个简单的绘图替换两个 ggplot2 命令时，正确生成了 png 文件（请参阅[http://claree.univ-lille1.fr/R/brew/rapacheplot](http://claree.univ-lille1.fr/R/brew/rapacheplot)）

在 apache2 error_log 我得到：

```
[Thu Nov 01 13:47:31 2012] [error] [client 192.168.134.122] rApache Notice!
[Thu Nov 01 13:47:32 2012] [notice] child pid 13538 exit signal Segmentation fault (11) 
```

ggplot2 也是使用 R CMD INSTALL 和 RApache 从源代码编译的 当使用 R 1.15.1 而不是 RApache 执行该程序时，一切正常。这个问题似乎特定于 SuSE 发行版，与等效的 rapache 和 ggplot2 版本一样，一切都可以在我的 Mountain Lion Os X Mac Air 计算机上的本地主机上正常工作。

有谁知道如何解决这个问题？

# iis-7 - web.config 权限不足

> ID：13431207
> 
> 赞同：2
> 
> 时间：2012-11-17T13:51:52.193
> 
> 标签：iis-7, web-config

根据[这篇文章](http://support.microsoft.com/kb/942055)（方法 2，第 6 项），我应该添加*computername\IIS_IUSRS*作为允许读取我的*web.config*文件的角色。

不过，我不确定这是否属实，因为：

1.  我已经看到当前服务器上的其他网站没有在*安全*选项卡中设置但仍然可以访问
2.  更重要的是，我仍然收到错误 500.19*相关配置数据无效*，扩展*配置文件权限不足*（0x80070005）。

（此时我只是尝试提供静态 HTML 页面，然后再继续提供 Web 服务。）

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:19:15.150

检查设置中目录树的**每个**部分。确保您尝试访问的每个目录、子目录和文件实际上都在您的本地计算机（或服务器，实际上）上定义了组 IIS_IUSRS。我打赌我的左耳你会找到一个没有的部分。

你提到的错误 - 0x80070005 -**就是这个**意思。

如果您仍然找不到问题的根源，请删除整个目录树并重做整个设置过程。那么，也许有一些访问权限被捕获。

我刚刚在我的系统上对其进行了测试，我可能会通过从子目录中删除 IIS_IUSRS 的权限来导致您描述的错误。

# emgucv - Nvidia：图形驱动程序找不到兼容的图形硬件

> ID：13431210
> 
> 赞同：0
> 
> 时间：2012-11-17T13:52:13.247
> 
> 标签：emgucv

我无法在 cuda 工具包中安装 nvidia 安装。我没有nvidia卡。这是否意味着我不能使用 emgu.cv？我昨天一直在做这个，emgu.cv 仍然给我带来问题。

这里仍然显示我的问题的链接： [Exception initializing Emgu.CV](https://stackoverflow.com/questions/13417449/exception-initializing-emgu-cv)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T22:05:47.947

其实你可以。运行安装程序。然后转到解压缩所有文件的目录并选择 nvcuda.dl_ 并使用命令提示符将其展开为 nvcuda.dll。将此 dll 放在 system32 文件夹中。这应该可以解决“未找到 nvcuda.dll”错误。

# android - android和ie7 css定位问题

> ID：13431211
> 
> 赞同：2
> 
> 时间：2012-11-17T13:52:14.673
> 
> 标签：android, css, internet-explorer-7

我刚刚发布了我们网站的新版本，我正在尝试解决一些我之前无法测试的问题，因为我无法在我的本地主机上模拟安卓手机（我相信这是可能的） - 时间不允许要求的阅读）

无论如何，我在 ie7-9、ff、opera、safari、chrome 上进行了测试，你能想到的一切都很好，除了：

在 android 手机上：我在标题和内容之间有一个水平导航栏，菜单上的最后一项已转移到下一行。这可能只是一个像素，但为什么！为什么！为什么！嘘：（

然后在 IE7 上，在任何有很多产品的页面上（比如这个：[http](http://www.traditionalirishgifts.com/guinness-merchandise) ://www.traditionalirishgifts.c​​om/guinness-merchandise ），过滤器选项和分页导航都应该在一条线上，就像它们在其他所有浏览器。

有没有 CSS 天才愿意帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T16:01:56.703

1.  这取决于手机的屏幕分辨率。如果您在具有更宽屏幕像素的手机上尝试它，您将没有问题。

2.  我看到一个 IE7 问题：

> `div#dropMenu`没有指定的填充

与任何现代浏览器不同，IE7 具有默认填充。

添加`padding: 0`，您将没有问题。

# algorithm - 查找包含给定数字的所有区间

> ID：13431217
> 
> 赞同：4
> 
> 时间：2012-11-17T13:52:51.010
> 
> 标签：algorithm, data-structures

我有一个可能重叠的间隔列表。然后，我有一个值，问题是找到包含该值的所有区间，该值本身包含在内。我见过几种方法，包括范围树、KD树等。但是，我想知道是否有针对这个问题的特定优化解决方案，考虑到：

1.  间隔列表很长。（可能是 50K 或更多）。
2.  间隔可能重叠。
3.  一旦我们开始查询，间隔列表就不会改变。
4.  列表一旦形成，就会以不同的值被多次查询。

有人可以提出一些解决这个问题的方法。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T14:47:00.990

这是一个定义明确的问题，使用区间树最有效地解决了这个问题（参见[维基百科](http://en.wikipedia.org/wiki/Interval_tree)，[这里](http://groups.csail.mit.edu/graphics/classes/6.838/S98/meetings/m13/1d-bst.html)和[这里](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=7&ved=0CEQQFjAG&url=http%3A%2F%2Fcbcb.umd.edu%2F~carlk%2Fbioinfo-lectures%2Fintervaltrees.pdf&ei=5aGnUKe6DYrG0QXmvYHADA&usg=AFQjCNFjmRaFR26gkSLwEIQ9LPV18lOfNA&cad=rja)）以获得解释。

我不推荐使用哈希表，因为对于有很多重叠的配置，您最终可能会为每个条目存储 O(n) 个段，总共需要 O(n^2) 个存储空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:05:35.873

如果您不介意昂贵的初始化时间，您可以使用您提到的任何技术来预先计算您在查询阶段可能遇到的所有相关值的间隔，限制为最小值和最大值。

用这些结果构造一个哈希表，您将能够在 O(1) 中找到给定值的所有区间。

# android - 从 TimePicker 检索选定的时间

> ID：13431222
> 
> 赞同：0
> 
> 时间：2012-11-17T13:53:21.640
> 
> 标签：android, database, deprecated, timepicker

我有一个包含开始时间和结束时间的表的数据库。用户必须通过 Android 应用程序进行选择，然后我会将这两次存储在我的数据库中。

现在，我的 xml 文件中有 2 个 TimePicker，我的 java 文件中有 2 个 TimePicker`TimePicker start_time = (TimePicker) findViewById(R.id.timePickerStart);`

我试图创建一个 Time ：`Time start = new Time(start_time.getCurrentHour(), start_time.getCurrentMinute(), 0);`但这种方法恰好已被弃用。你知道另一种方法吗？

我的目的是在那个时候向用户发送通知（Toast？）。您知道如何将当前时间与用户输入的时间联系起来吗？

很抱歉问了这么多问题，但我真的迷路了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:02:57.910

使用`Date`类而不是`Time`.

更好用`Calendar`。的大多数方法已`Date`被弃用。

```
Calendar calendar = new GregorianCalendar(0, 0, 0, hour, minute, 0); 
```

# r - lessR 的 R 2.14.1 OS X dens() 不将 sample() 数据作为输入

> ID：13431224
> 
> 赞同：1
> 
> 时间：2012-11-17T13:54:09.630
> 
> 标签：r

**R 版本 2.14.1 平台：i386-apple-darwin9.8.0/i386（32 位）**

**Objective:** 使用`dens()`库函数`lessR`绘制一条正态密度曲线和一条叠加在直方图上的一般密度曲线。

**问题：** 当使用 eg`rnorm()`或`rbinom()`运行良好时，在生成的数据上运行它会`sample()`返回此错误：

```
Error in if (from == to) rep.int(from, length.out) else as.vector(c(from,  : 
  argument is of length zero 
```

**MWE：**

```
library(lessR)
data <- data.frame(col=sample(20))
y <- data$col
dens(y) 
```

**问题：** 是什么导致了问题，如果我想要一个单列的数据框，比如说，它将包含`sample()`函数生成的 20 行值并将它们用作`dens()`?

**更新 (2012-11-17)：** 我已将 R 更新到 2.15.2 版和`lessR`2.6 版（两者都是最新可用的）。

使用@Roland提供的数据，现在的错误是：

```
Error in seq.default(x.min, x.max, length = 200) : 
  'from' must be of length 1 
```

我可以理解为什么会发生这种情况，并且允许`sample()`使用一个以上的单个值会导致正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T17:21:19.433

是的，作为 lessR 的开发者，我发现了这个错误。发生的事情是我有一个 > 和一个 < 使密度图居中的条件，但没有 = 条件。这个 = 条件是从对 sample(20) 的调用中触发的，因为结果是从 1 到 20 的连续整数。显然是一个有效的集合，但它触发了我的代码中的 = 条件和我之前没有测试过的条件。将 > 更改为 >= 已修复该错误。当我在 12 月 10 日左右上传下一个版本时，修复将在 CRAN 上。维护人员不鼓励对 CRAN 进行频繁更新，所以我需要等到 12 月才能更新。

现在，如果您希望使用您的示例获得密度图，请运行以下 R 代码。

```
y <- sample(20)
dy <- density(y)
plot(dy) 
```

此外，当我大约 4 年前开始这个项目时，我并没有计划生产一个具有大约 43 种不同功能的数据分析系统系统。因此我最初的函数命名方案并没有很好地概括，因为系统是从几个函数发展而来的，所以我逐渐进化了一个未来不会改变的系统。每个函数都可以用它的全名来引用，例如 Density，或者现在用通常的两个字符的缩写，在这种情况下是 dn。为了一致性起见，我决定将缩写词设为两个字符，它们也是小写的。目标是生成标准数据分析程序，例如直方图或 hs、散点图或 sp、BoxPlot 或 bx，只需很少的工作并为图形提供颜色主题。默认颜色主题为蓝色，但可以使用 set 功能轻松更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:47:34.027

当前版本`lessR`似乎不再提供功能`dens`，而是有一个功能`Density`。

您会考虑更新您的 R 版本和软件包吗？为什么要使用 32 位版本的 R？在 Mac 上，您应该能够使用 64 位版本。

我`dens`从`lessR_2.1.1`. 我无法重现您的错误（因为您没有使用`set.seed`使您的代码可重现）。相反，我得到`Error in seq(min.x, max.x, length = 200) : Object 'min.x' not found`了`y <- c(3, 4, 8, 1, 6, 14, 20, 5, 13, 17, 19, 10, 2, 12, 7, 9, 18, 11, 15, 16)`.

以下是功能代码的摘录：

```
d.gen <- suppressWarnings(density(x, bw, ...))

        mx <- mean(x)

        # min and max x coordinates for graph, make symmetric
        min.dev.x <- min(d.gen$x) - mx
        max.dev.x <- max(d.gen$x) - mx
        if (abs(min.dev.x) > abs(max.dev.x)) {
          min.x <- min(d.gen$x)
          max.x <- mx + abs(min.dev.x)
        }
        if (abs(max.dev.x) > abs(min.dev.x)) {
          min.x <- mx - abs(max.dev.x)
          max.x <- max(d.gen$x)
        } 
```

请注意，代码没有定义`min.x`and `max.x`，如果`abs(min.dev.x) == abs(max.dev.x)`，这是一个错误。当然，这很容易通过将第二个 if 条件更改为 来解决`if (abs(max.dev.x) >= abs(min.dev.x)) {`。

可能还有其他错误，但不值得从实用程序包的存档版本中修复功能。当然，我在新`Density`函数中遇到了类似的错误，并且确实包含相同的错误。

# twitter - 如何在 Twitter 中创建 UTF-16 动画？

> ID：13431226
> 
> 赞同：-1
> 
> 时间：2012-11-17T13:54:16.697
> 
> 标签：twitter, ascii, utf-16

我使用 UTF-16 字符选择器在 HTML 中的 Texbox 中创建 ASCII 艺术，并且支持 UTF-16 字符并且“按原样”可见。现在我需要处理这样的 ASCII 艺术并将其保存为 UTF-16 字符的数组，使用 Javascript 作为字符串进行处理，以便为 Twitter 构建 ASCII 艺术动画，[如下所示](https://twitter.com/smartArg)：

![推特提要的屏幕截图](../Images/589bff1ecc8d3a946326f98844b712b8.png)

* * *

你不必感到抱歉。Twitter 接受 UTF-16 作为 ASCIIart

对于 UTF-16 定义，请访问 Wikipedia

[http://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16) UTF-16（16 位 Unicode 转换格式）是一种 Unicode 字符编码，能够在 Unicode 代码空间中编码 1,112,064[1] 个数字（称为代码点）从 0 到 0x10FFFF。它为每个代码点生成一个或两个 16 位代码单元的可变长度结果。

我已经做了 2 字节的 Unicode 选择器（UTF-16）并且可以在 Twitter 中生成 UTF-16 输入。

==回复：

删除了链接，因为它指向一个不再显示上述内容的 Twitter 帐户（无滚动）。可能看起来像垃圾邮件。– 大卫 11 月 20 日 4:09

这样，可能需要很长时间才能得到正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:08:04.537

UTF-16 是一种字符编码。Twitter 只接受 UTF-8 作为输入。您可以将 UTF-16 转换为 UTF-8 而不会丢失任何数据，因此只需执行此操作，然后将其发送到 Twitter。

# asp.net - 如何将 default.aspx 设置为 Visual Studio 调试器的默认起点？

> ID：13431227
> 
> 赞同：2
> 
> 时间：2012-11-17T13:54:25.557
> 
> 标签：asp.net, visual-studio, debugging, settings, default

在具有许多项目和页面的解决方案中，如果您正在处理不同于 default.aspx 的文件并开始调试，VS 将尝试从您正在处理的文件开始执行，在许多情况下您会收到错误消息。

有什么方法可以将“default.aspx”之类的页面设置为起点，而无需打开它并切换到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T13:59:38.463

右键单击解决方案资源管理器中的文件并单击设置为起始页。

![在此处输入图像描述](../Images/db45a95b440a0fb936250c1bf3254fd4.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T13:58:00.497

如果您的 Visual Studio 解决方案中有多个项目，请右键单击 Web 应用程序项目作为选择设置为启动项目，然后在`default.aspx`要用作调试的入口页面的页面上右键单击并在上下文菜单。自 Visual Studio.NET 2003 时代以来，Visual Studio 解决方案资源管理器中的所有这些都对我很好：)

# javascript - jQuery：使用按钮旋转图像

> ID：13431232
> 
> 赞同：1
> 
> 时间：2012-11-17T13:55:13.240
> 
> 标签：javascript, jquery

我正在尝试旋转 2 张图像。现在，我有这个代码：

```
$('img').on({
  'click': function () {
    var src = ($(this).attr('src') === 'img1_on.jpg') ? 'img2_on.jpg' : 'img1_on.jpg';
    $(this).attr('src', src);
  }
}); 
```

它完美地工作：当我点击一个图像时，另一个出现。我想做的完全一样，但是使用按钮来旋转图像，而不是单击图像本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T13:57:55.080

*html*

```
<button id="imageSwitcher">Click to switch images</button> 
```

*javascript/jquery*

```
$("#imageSwitcher").click(function() {
   var src = ($('img').attr('src') === 'img1_on.jpg')
    ? 'img2_on.jpg'
    : 'img1_on.jpg';
   $('img').attr('src', src);
 }); 
```

该脚本假定您的页面上有一个图像，要更改特定图像，请执行以下操作：

*html*

```
<img id="imgSwitched" src="img1_on.jpg"/>
<button id="imageSwitcher">Click to switch images</button> 
```

*javascript/jquery*

```
$("#imageSwitcher").click(function() {
   var src = ($('#imgSwitched').attr('src') === 'img1_on.jpg')
    ? 'img2_on.jpg'
    : 'img1_on.jpg';
   $('#imgSwitched').attr('src', src);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:59:00.273

只需将`img`部分替换为按钮的类名即可：

```
<input type="button" class="button" />

$('.button').on({
    'click': function() {
        var src = ($(this).attr('src') === 'img1_on.jpg') ? 'img2_on.jpg' : 'img1_on.jpg';
        $('img').attr('src', src);
    }
}); 
```

# c++ - 改进一个基于

> ID：13431237
> 
> 赞同：2
> 
> 时间：2012-11-17T13:55:31.407
> 
> 标签：c++, c++11, chrono

我有以下 Timer 类来简化获取自一个纪元以来经过的时间：

```
#include <chrono>

class Timer {
  public:
    void start(void);
    template <typename duration_type>
    const duration_type time_elapsed(void);
  private:
    std::chrono::high_resolution_clock::time_point epoch;
};

void Timer::start(void) {
  epoch = std::chrono::high_resolution_clock::now();
}

template <typename duration_type>
const duration_type Timer::time_elapsed(void) {
  return std::chrono::duration_cast<duration_type>(std::chrono::high_resolution_clock::now() - epoch);
}

int main(void) {
  Timer timer;

  timer.start();

  // pointless loop to cause a delay
  for (int x = 1; x < 1000000; ++x) {
    x * x * x;
  }

  std::chrono::nanoseconds elapsed = timer.time_elapsed<std::chrono::nanoseconds>();
  std::cout << elapsed.count() << std::endl;

  return 0;
} 
```

我有一种感觉，通过使 Timer::time_elapsed() 成为模板函数，我的课程过于复杂，并且理想情况下希望将其用法简化为以下内容：

```
 std::chrono::nanoseconds elapsed = timer.time_elapsed();
  std::cout << elapsed.count() << std::endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:31:42.880

我在您的代码中修复了一些问题，并添加了`std::chrono`. 更改列表包括：

1.  我`(void)`从函数调用中删除了所有参数，因为它不是 C++ 方式:-)
2.  我还删除`return 0;`了`main()`C++ 中不需要的内容，因为编译器会为您提供它。
3.  我输入了一个时钟，因为现在很难在当前的实现中找到一个高质量的时钟。[在这里](https://stackoverflow.com/questions/13263277/difference-between-stdsystem-clock-and-stdsteady-clock/13266477#13266477)查看我的答案。基本上现在您可能想要使用您的自定义时钟，并且由于`typedef`重构，将来可能会更容易。
4.  我将您的等待循环更改为 C++11 睡眠接口（如果需要，您可以在那里随机化一些持续时间 - 也可以使用 C++11 :-)）。在那种情况下不需要这种改变，但它很好地展示了如何`std::chrono`在线程库中使用。
5.  我将您的方法实现放在一个类中，以使编译器有机会内联它们。或者，您可以`inline`在类之外的实现中使用关键字显式。
6.  我做了你的`time_elapsed()`方法`const`
7.  我`const`从方法的返回值中删除了不必要的`time_elapsed()`，另一方面在使用该方法时添加了它，因为在那个确切的地方`const`就足够了。
8.  最后但并非最不重要的一点是，我修改了您的`time_elapsed()`方法以在`return`. 这是更好的解决方案，因为您永远不会在这里丢失数据。在以特定单位（即我们）向用户提供数据时，您可能希望松开它。你必须用`duration_cast`那里告诉编译器你同意丢失一些数据，我们的解决方案对你来说就足够了。

我希望下面的代码和上面的更改对您来说会很有趣。

```
#include <chrono>
#include <thread>
#include <iostream>

using namespace std::chrono;

class Timer {
public:
  typedef high_resolution_clock Clock;
  void start()
  { epoch = Clock::now(); }
  Clock::duration time_elapsed() const
  { return Clock::now() - epoch; }
private:
  Clock::time_point epoch;
};

int main() {
  Timer timer;
  timer.start();

  // sleep some time
  std::this_thread::sleep_for(microseconds(40));

  const auto elapsed = timer.time_elapsed();
  std::cout << duration_cast<microseconds>(elapsed).count() << "us" << std::endl;
} 
```

顺便说一句，我不想​​玩类界面（我已经做了太多更改）。如果您尚未绑定到该界面，我建议您遵循@sehe 建议的界面。但不要将其`double`用作返回值 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:08:08.610

返回一个辅助类，该类存储 now-epoch() 并从经过的时间开始对运算符 T 进行高精度转换。或者，有一个`time_elapsed_in_units<T>`看起来像你的时间已经过去的方法，然后让时间过去返回一个结构，该结构以运算符 T 为单位调用。

辅助类的操作符 T 的重载让您可以隐式检测被调用者想要什么类型。

# facebook - 如何在输入字段上添加自定义样式的 Facebook 喜欢/分享按钮？

> ID：13431249
> 
> 赞同：2
> 
> 时间：2012-11-17T13:57:11.823
> 
> 标签：facebook, button, input, facebook-like

我不想使用普通的 Facebook 点赞按钮，那么如何将点赞/分享按钮添加到 -Field？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:13:40.200

不允许使用自定义样式的按钮，请参阅品牌权限：

[https://www.facebook.com/brandpermissions/](https://www.facebook.com/brandpermissions/)

[https://www.facebook.com/brandpermissions/logos.php](https://www.facebook.com/brandpermissions/logos.php)

您只能使用自定义图形进行共享，但在您的情况下，无论如何使用共享功能会更合适（Twitter 按钮也用于共享）。请参阅此处：[如何在 PHP 中使用 Facebook 共享器](https://stackoverflow.com/questions/11186852/how-to-use-facebook-sharer-in-php)

...或者使用 facebook 的 JavaScript SDK 和 FB.ui 函数。但在这种情况下，您也需要一个应用程序。

# ios - iOS - 更新后持久文件 URL 无效

> ID：13431250
> 
> 赞同：1
> 
> 时间：2012-11-17T13:57:14.463
> 
> 标签：ios

我正在开发的应用程序将视频和音频文件保存到磁盘，然后将文件的 URL 和其他元数据保存到 Core Data 数据库中。我正在使用`NSSearchPathForDirectoriesInDomains()`函数（参数：`NSDocumentDirectory`, `NSUserDomainMask`, `YES`），将文件名附加到字符串，然后将其发送到 NSURL 的`-initFileURLWithPath:`.

在所有迁移过程之后，我对托管对象模型进行了小幅更改。

在测试中，唯一不起作用的是使用早期版本捕获的视频和音频文件不会随更新播放。

例如：

1.  测试人员从 App Store 下载 1.0 版本
2.  测试员拍摄 3 个视频
3.  测试人员能够播放这三个视频
4.  Tester 从 TestFlight 下载 1.0.1 版本
5.  测试仪现在无法播放这三个视频

捕获和播放视频的代码在版本之间没有变化（我使用的是标准 MPMoviePlayerController）。

迁移中未修改 Core Data 托管对象模型实体“视频”（另一个实体是：“用户”）。

我的直觉是这是一个代码签名/配置文件/应用程序 ID 问题。如果我执行上述步骤，但不是从 TestFlight 下载 1.0.1，而是在 Xcode 中构建和运行，我没有问题。我已经使用分发证书对 1.0.1 构建进行了代码签名，并且使用与 App Store 版本相同的 App ID，唯一显然我不能做的就是使用 App Store 配置文件对 TestFlight 构建进行签名。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:32:45.723

我保留了媒体文件的整个 URL，而不仅仅是唯一的部分。

[这里](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)说在更新期间 iTunes 将更新安装在新的应用程序目录中。

# html - 将网络摄像头/摄像头视频流上传到服务器的 HTML5 解决方案

> ID：13431251
> 
> 赞同：33
> 
> 时间：2012-11-17T13:57:22.153
> 
> 标签：html, websocket, html5-video

使用[getUserMedia](http://dev.w3.org/2011/webrtc/editor/getusermedia.html)我可以从客户端的网络摄像头/摄像头捕获视频流。并且使用`video`标签我可以在客户端的浏览器上显示它。代码：

```
<video autoplay></video>

<script type="text/javascript">
    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;

    var video = $('video')[0];

    var failed = function(e) {
        console.log('Denied!', e);
    };

    if( navigator.getUserMedia ) {
        navigator.getUserMedia( {video: true, audio: true}, function( stream ) {
                video.src = window.URL.createObjectURL(stream);
            }, failed
        )
    } else {
        console.log( 'Not supported!' );
    }
</script> 
```

现在是否可以将此视频流作为实时提要或在用户完成录制并决定上传后发送到服务器？

我发现了几个例子：

*   [通过 websocket 将二进制图像发送到服务器](http://dathor.blogspot.in/2011/04/html5-websockets-sending-binary-data.html)
*   [定期捕获流式视频的帧并将其作为图像发送](http://francisshanahan.com/index.php/2011/stream-a-webcam-using-javascript-nodejs-android-opera-mobile-web-sockets-and-html5/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-28T05:39:35.620

MediaStreamRecorder 是一个用于记录 getUserMedia() 流的 WebRTC API。它允许 Web 应用程序从实时音频/视频会话创建文件。

```
 <video autoplay></video>

    <script language="javascript" type="text/javascript">
    function onVideoFail(e) {
        console.log('webcam fail!', e);
      };

    function hasGetUserMedia() {
      // Note: Opera is unprefixed.
      return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
                navigator.mozGetUserMedia || navigator.msGetUserMedia);
    }

    if (hasGetUserMedia()) {
      // Good to go!
    } else {
      alert('getUserMedia() is not supported in your browser');
    }

    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia  = navigator.getUserMedia || 
                             navigator.webkitGetUserMedia ||
                              navigator.mozGetUserMedia || 
                               navigator.msGetUserMedia;

    var video = document.querySelector('video');
    var streamRecorder;
    var webcamstream;

    if (navigator.getUserMedia) {
      navigator.getUserMedia({audio: true, video: true}, function(stream) {
        video.src = window.URL.createObjectURL(stream);
        webcamstream = stream;
    //  streamrecorder = webcamstream.record();
      }, onVideoFail);
    } else {
        alert ('failed');
    }

    function startRecording() {
        streamRecorder = webcamstream.record();
        setTimeout(stopRecording, 10000);
    }
    function stopRecording() {
        streamRecorder.getRecordedData(postVideoToServer);
    }
    function postVideoToServer(videoblob) {

        var data = {};
        data.video = videoblob;
        data.metadata = 'test metadata';
        data.action = "upload_video";
        jQuery.post("http://www.kongraju.in/uploadvideo.php", data, onUploadSuccess);
    }
    function onUploadSuccess() {
        alert ('video uploaded');
    }

    </script>

    <div id="webcamcontrols">
        <button class="recordbutton" onclick="startRecording();">RECORD</button>
    </div> 
```

**规格：**

[http://www.w3.org/TR/mediastream-recording/](http://www.w3.org/TR/mediastream-recording/)

您可以将录制的文件发送到服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T14:27:04.780

看看这篇文章：[http ://www.smartjava.org/content/face-detection-using-html5-javascript-webrtc-websockets-jetty-and-javacvopencv](http://www.smartjava.org/content/face-detection-using-html5-javascript-webrtc-websockets-jetty-and-javacvopencv)

它显示了[Webrtc](http://www.w3.org/2011/04/webrtc-charter.html)的使用：

> 这些 API 应该能够构建可以在浏览器中运行的应用程序，不需要额外的下载或插件，允许各方之间使用音频、视频和补充实时通信进行通信，而无需使用干预服务器（除非需要防火墙穿越，或提供中介服务）。

# android - 2个依赖微调器

> ID：13431253
> 
> 赞同：0
> 
> 时间：2012-11-17T13:57:28.487
> 
> 标签：android

如果我有 2 个微调器，第二个取决于第一个，我将从 MySQL 数据库中检索第二个微调器的信息，这取决于第一个微调器的选择，我成功地获取了第一个微调器的 id，但我不知道如何将它发送给另一个因为它对我不起作用

我的 MainActivity 类有：

```
new LoadAllCourses().execute(); //first spinner generation 
new LoadAllSection().execute(); //second spinner 
```

在`class LoadAllCourses extends AsyncTask<String, String, String>`

```
adapter1 = new  MyCustomAdapter(MainActivity.this,
                    android.R.layout.simple_spinner_item,
                    coursesList);

             spinner1.setAdapter(adapter1); // Set the custom adapter to the spinner

             spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {
                    @Override
                    public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {

                         HashMap<String, String> map12 = coursesList.get(position);
                          String id3 = map12.get("CourseID");
                            // Do something
                         Log.d("All coursesdddddddddddddddddddddddddddddddddddd: ", id3);
                        // Do something

                    }
                    @Override
                    public void onNothingSelected(AdapterView<?> adapter) {

                    }
                }); 
```

现在我想获取 id3 并将其发送到

```
class LoadAllSection extends AsyncTask<String, String, String> 
```

但这行不通

如果像我说的那样，我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:42:44.577

如果我理解了您的问题，您需要在第一个微调器上进行选择，以便从数据库中进行搜索以填充第二个微调器。

如果在适配器 1 ( `adapter1 = new MyCustomAdapter(MainActivity.this, android.R.layout.simple_spinner_item, coursesList);`) courseList 中是一个数组，则可以从 setOnItemSelectedListener 中的微调器中获取所选项目，如下所示`courseList [position]`。

获得所选项目后，您需要一个函数来在数据库中执行查询，例如`load_all_selection(courseList [position])`应该从数据库中返回一个结果数组。

由于它返回一个数组，您可以如下定义适配器 2
`adapter2 = new MyCustomAdapter(MainActivity.this, android.R.layout.simple_spinner_item, load_all_selection(courseList [position]));`
并将其分配给第二个微调器`spinner2.setAdapter(adapter2);`

所有这些都可以在 setOnItemSelectedListener 部分中完成，除了`load_all_selection(...)`函数的定义。

我希望我理解你的问题，这会有所帮助。如果不是，您仍然可以四处寻找不同的解决方案。

# jboss - 客户端与 MDB 确认

> ID：13431269
> 
> 赞同：0
> 
> 时间：2012-11-17T13:59:30.767
> 
> 标签：jboss, transactions, ack, xa, jboss-mdb

据我所知，MDB 只能使用 AUTO_ACKNOWLEDGE 和 DUPS_OK_ACKNOWLEDGE。我想要像 CLIENT_ACKNOWLEDGE 这样的东西来避免 XA 事务。

基本上我想要的：获取消息->启动本地事务->执行数据库操作->结束本地事务->确认消息

你知道如何实现这一目标吗？

目前我使用 Jboss 5.1.GA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:29:23.907

[我在这里](http://www.oracle.com/technetwork/articles/entarch/custom-mdb-processing2-093811.html)找到了对 MDB 策略的全面描述。

AFAIK 无法手动执行 ack，但如果我们使用 Bean Managed Transaction，则在 onMessage 方法出现异常的情况下不会发生 ack。所以我们可以“手动”开始和完成我们的事务，如果出现异常，我们的消息将不会被确认。

# java - MVC 井字游戏

> ID：13431273
> 
> 赞同：1
> 
> 时间：2012-11-17T14:00:06.187
> 
> 标签：java, model-view-controller, observer-pattern, tic-tac-toe

我目前正在为学校的一个项目工作。我们应该将用 Java 编写的井字游戏重构为更好的东西。给定的代码是一个大问题，用户界面不能很好地工作。

问题是游戏没有告知两位玩家的观点。所以，我应该实现观察者模式。

[http://www.imgdumper.nl/uploads6/50a794d4ea6ba/50a794d4e2d9f-now.jpg](http://www.imgdumper.nl/uploads6/50a794d4ea6ba/50a794d4e2d9f-now.jpg)

此图像是给定代码的 UML。

为了让它像真正的游戏一样工作，我假设我会创建一个如下结构：

[http://www.imgdumper.nl/uploads6/50a7953c6c6b3/50a7953c64186-new.jpg](http://www.imgdumper.nl/uploads6/50a7953c6c6b3/50a7953c64186-new.jpg)

好的，我认为这是正确的。但这个项目的目的是将其重构为 MVC 模式。在学校提供的演示文稿中，我发现了这个方案：（请参阅 url 评论）

但我不知道如何将代码重构为满足 MVC 模式要求的东西。如果有人可以向我解释我应该如何做到这一点，那就太好了。比如，模型、控制器和视图是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:12:58.323

我会在应用程序的当前视图层附近应用 MVC 模式。本质上，MVC 可以位于当前的非 UI 游戏逻辑之上，并且该逻辑可以封装在[Service Layer](http://martinfowler.com/eaaCatalog/serviceLayer.html)中。

`Model`是：

*   SingleSquareState（X、O 或 NULL）
*   游戏板（9 到 3n 大小）
*   播放器

`View`显示棋盘——它本质上“是”棋盘，有 9 个（或 sizeOf(GameBoard)）方格，可以变成 X、O 或 NULL——也许这里可以使用一个数组。避免在这里放太多逻辑，把它留给控制器。控制器告诉视图要做什么。

`Controller`告诉服务（下）玩家正在做什么。然后它从服务接收更新的 GameState 并告诉视图如何显示它。

`Service`（又名 GameState）跟踪所有玩家的游戏状态。它可能有一个控制器可以调用的称为 Move 的方法。该服务通过评估游戏状态等来验证该电影是否合法。然后该服务将更新的状态返回给控制器。

# email - 如何通过链接从邮件默认应用程序启动活动（Android）

> ID：13431275
> 
> 赞同：1
> 
> 时间：2012-11-17T14:00:18.650
> 
> 标签：email, android-intent, android-activity, hyperlink

我是 Android 开发新手，我正在尝试编写一个应用程序来通过默认电子邮件应用程序发送/接收加密消息。

发送没有问题，因为通过意图发送密文电子邮件很容易。

我在接收方面发现了很多困难：据我所知，电子邮件应用程序不会广播任何接收电子邮件的意图，并且开发人员无法访问应用程序的数据库（对吗？）。因此，当我在这里阅读一些主题时，我想在构建的加密邮件中放置一个 DECRYPT 链接，该链接应该打开我的应用程序并解密消息。我正在尝试实现它，但我对一些事情感到困惑。

1) 发送带有 href 标记的 text/html 消息应该在电子邮件正文中建立一个链接。这东西行不通。该链接显示为纯文本。

2）建立一个意图并将链接作为

```
 <a href=intent.toUri()>DECRYPT</a> 
```

然后为我的应用程序解密活动制作意图过滤器应该可以吗？我作为链接发送的意图只是在单击链接时广播？

# iphone - UITableVIew，cellForIndexPath：手忙脚乱

> ID：13431276
> 
> 赞同：-1
> 
> 时间：2012-11-17T14:00:21.910
> 
> 标签：iphone, ipad, uitableview

好的。我是一位经验丰富的 iOS 开发人员，我总是偶然发现的一件事是如何以一种很好的方式填充 tableview。如果您的应用程序是只有一个 tableview 的数千个瘦应用程序之一，您可以使用 cellForRowAtIndexPath: datasource-method 和几个 if() 子句。

但是我正在维护的应用程序非常大，并且有很多动态单元格在顺序和设计上发生变化，你最终会得到一个完全油腻的 if()-heirachy，没有人 - 甚至你自己 - 可以长期维持跑。

所以我决定开始一个关于解决这个混乱问题的想法的线程。所以任何想法都是很好的输入。

一个想法可能是创建 UITableViewCells 的集合，然后在 cellForRowAtIndexPath: 中查询该集合。

另一个想法可能是构建你想要的树的整个对象图，查询它并有一个工厂类来根据当前对象构建你的 UITableViewCell。

请让我听听您是如何在您的应用程序中解决此业务的 - 以及该解决方案从长远来看是如何运作的。欢迎赞成和反对的:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:43:24.563

Stackoverflow 不是一个论坛（人们可以在其中找到合适的主题和讨论），而是一组面向编程的问题。

[从常见问题解答](https://stackoverflow.com/faq)的第二部分中获取此声明：

> 如果您提出问题的动机是“我想参加关于______的讨论”，那么您不应该在这里提问。

如果您想为您的问题提供大量想法，也许 Stackoverflow 的[聊天室](https://chat.stackoverflow.com/)会是一个更好的查看场所 - 或者，互联网其他部分的几个*论坛*将是讨论该主题的理想场所.

但是，如果您只是在寻找一种以更有条理的方式管理动态 UITableViewCell 的方法，则可能需要编辑帖子以提示答案而不是讨论。在哪个主题上，我从来没有使用过多的动态单元格，但对于少量，我觉得创建其他功能（例如

`- (UITableViewCell *)tableView:(UITableView *)tableView cellType1ForRowAtIndexPath:(NSIndexPath *)indexPath`)

) 来处理此类单元格的创建以正常工作，如果我理解正确的话。我使用的系统`cellForRowAtIndexPath`只对其他函数进行多次调用，虽然它可能不是组织代码的最佳方式，但与尝试将所有内容包含在单个函数中相比，它肯定是一个重大改进。:)

# objective-c - 视图控制器中自定义视图的访问方法

> ID：13431278
> 
> 赞同：0
> 
> 时间：2012-11-17T14:00:44.030
> 
> 标签：objective-c, ios

我是Objective C的新手。在这里我想问一个简单的问题。
我在 中创建了一个视图控制器`storyboard`，并使用`UIView`.
但是，我不知道如何在我的视图控制器中调用视图的方法。任何人都可以帮忙吗？我想做的`drawLine:pointStore`就是`ChartViewController.m`从`chartView.m`

这是我的一些代码。
ChartViewController.h

```
#import <UIKit/UIKit.h>
@class chartView;

@interface ChartViewController : UIViewController{  
    chartView *chart_view;  
} 
```

ChartViewController.m

```
- (void)viewDidLoad  
{  
    [super viewDidLoad];  

    NSMutableDictionary *pointStore = [[NSMutableDictionary alloc]init];  

    NSNumber *initX;  
    NSNumber *initY;  
    NSMutableDictionary *variableSet = [[NSMutableDictionary alloc]init];
    for(initX = [NSNumber numberWithDouble:-10.0f];initX.floatValue<=10.0f;initX = [NSNumber numberWithDouble:(initX.floatValue+0.5f)] )
    {
        [variableSet setValue:initX forKey:@"x"];
        initY = [NSNumber numberWithDouble:[self.brain performOperation:equationOfChart withVariable:variableSet]];
        [pointStore setObject:initX forKey:initY];
    }
    [chart_view drawLine:pointStore];
} 
```

图表视图.h

```
@interface chartView : UIView

@property (nonatomic, strong) NSString *equation;
-(void) getEquation:(NSString *)Equation;
-(void) drawLine:(NSMutableDictionary *)pointsStore;

@end 
```

图表视图.m

```
-(void)drawLine:(NSMutableDictionary *)pointsStore{
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGFloat red[4] = {1.0f, 0.0f, 0.0f, 1.0f};
    CGContextSetStrokeColor(c, red);
    CGContextBeginPath(c);
    CGContextStrokePath(c);
    for(NSNumber *ax = [NSNumber numberWithDouble:-10.0f];ax.floatValue<10.0f;){
        float ay = [[pointsStore objectForKey:ax]doubleValue];
        ax = [NSNumber numberWithDouble:(ax.floatValue+0.5f)];
        int by = [[pointsStore objectForKey:ax]doubleValue];
        [self.class line:ax.floatValue y:ay  x2:(ax.floatValue+0.5) y2:by];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:45:44.113

您应该检查是否`chart_view`已创建并分配了实例。可能你在那个指针中没有零。

如何做到这一点 - 取决于您选择创建视图的方式：在 Interface Builder 中或在代码中动态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:48:29.093

ChartViewController.h

```
#import <UIKit/UIKit.h>
@class chartView;

@interface ChartViewController : UIViewController

@property (string, nonatomic) chartView *chart_view;

@end 
```

图表视图.m

```
- (void)viewDidLoad  
{  
    [super viewDidLoad];  
    ...
    // Don't forget to alloc and init
    self.chart_view = [[chartView alloc] init];
    [self.chart_view drawLine:pointStore];
} 
```

# vi - 使用 VI 剪切文本文件

> ID：13431279
> 
> 赞同：0
> 
> 时间：2012-11-17T14:00:47.667
> 
> 标签：vi

如何使用 VI 剪切文本文件？
问题是文本文件被运行应用程序使用，该应用程序将日志记录在那里，因此我无法删除该文件但可以在那里写入。
那么清理文本文件的最短方法（键绑定）是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:03:32.970

不需要打开文件来清除内容，直接运行`echo "" > /filepath`即可x 清除和 :wq 保存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:27:13.403

要删除新打开文件的全部内容，您可以使用`d``G`.

# ruby-on-rails - 在 ruby on rails 中管理多个用户时区

> ID：13431280
> 
> 赞同：1
> 
> 时间：2012-11-17T14:01:01.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone

我想将事件保存在默认时区，即每当用户提交事件时，它将转换为默认时区并保存在数据库中。

每当用户请求事件时，系统将查找用户时区并将日期（从默认格式）转换为该用户时区并将其显示给用户。

我很难从哪里开始，我看到了很多笔记和文件，但无法弄清楚这样做的完整过程。

我看到了这段代码，但不明白如何使用它：

```
before_filter :set_time_zone

def set_time_zone
  Time.zone = current_user.time_zone if current_user
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:15:45.563

数据库中的默认时区是 UTC。

有两种方法可以做到：

1.  允许他们的用户将他们的时区存储在数据库中
2.  从他们的 IP 中获取他们的时区

对于选项 1，Rails 对时区有很好的支持。[#all 方法](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-c-all)将允许您创建一个下拉列表供他们选择。然后将其与用户记录一起保存在数据库中。

选项 2 对用户来说工作量更少，但也不太准确。有一些服务可以将 IP 转换为时区。

要显示给定时区的时间，请使用[Time#in_time_zone](http://api.rubyonrails.org/classes/Time.html#method-i-in_time_zone)或者您可以`Time.zone`按上述方式设置它应该正确显示。

# ruby - 如何安装找不到的 ruby gem？

> ID：13431281
> 
> 赞同：1
> 
> 时间：2012-11-17T14:01:01.293
> 
> 标签：ruby, rubygems

我正在尝试安装[s3nuke](https://github.com/SFEley/s3nuke)。来自具有最新红宝石和宝石的最新 Mac OS。

首先，我将 git 存储库克隆到我的`/var/src/`（现在`/var/src/s3nuke`）。

README 上的安装非常简单：

```
gem install s3nuke 
```

回复：

```
ERROR:  Could not find a valid gem 's3nuke' (>= 0) in any repository 
```

关于这个错误的大多数帮助假设我支持一些代理。我不是。我可以 ping ruby​​gems 或 ruby​​forge 就好了。我可以成功更新甚至安装其他 gem。这里有些例子：

```
$ gem -v
1.8.24
$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
$ gem install rubygems-update
Successfully installed rubygems-update-1.8.24
1 gem installed
Installing ri documentation for rubygems-update-1.8.24...
Installing RDoc documentation for rubygems-update-1.8.24...
$ update_rubygems
RubyGems 1.8.24 installed
$ sudo gem update --system
Latest version currently installed. Aborting. 
```

所以让我们尝试一些其他的宝石：

```
$ gem install eventmachine
Fetching: eventmachine-1.0.0.gem (100%)
Building native extensions.  This could take a while...
Successfully installed eventmachine-1.0.0
1 gem installed
Installing ri documentation for eventmachine-1.0.0...
Installing RDoc documentation for eventmachine-1.0.0...
$ gem install clamp
Fetching: clamp-0.5.0.gem (100%)
Successfully installed clamp-0.5.0
1 gem installed
Installing ri documentation for clamp-0.5.0...
Installing RDoc documentation for clamp-0.5.0... 
```

所以我是最新的，可以安装其他宝石。但是 s3nuke 仍然不会让步。

```
$ gem install s3nuke
ERROR:  Could not find a valid gem 's3nuke' (>= 0) in any repository 
```

我什至添加了另一个 gem 源 (http://gems.rubyforge.org/)，但仍然没有运气。

你能帮我吗？

这是我的环境：

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.a
  - RUBY VERSION: 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/1.8
  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-darwin-12
  - GEM PATHS:
     - /Library/Ruby/Gems/1.8
     - /Users/my_username/.gem/ruby/1.8
     - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :backtrace => false
     - :bulk_threshold => 1000
     - :sources => ["http://rubygems.org/", "http://gems.rubyforge.org/"]
  - REMOTE SOURCES:
     - http://rubygems.org/
     - http://gems.rubyforge.org/ 
```

我会尝试手动安装，但[s3nuke git 存储库](https://github.com/SFEley/s3nuke)不包含 s3nuke.gem。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:11:39.737

如果你使用 bundler，你可以在 Gemfile 的下一行添加：

```
gem "s3nuke", :git => "git://github.com/SFEley/s3nuke.git" 
```

或者您可以使用[specific_install gem安装](https://github.com/rdp/specific_install)

```
gem install specific_install
gem specific_install -l http://github.com/SFEley/s3nuke.git 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:11:08.257

您可以直接将以下行添加到您的 Gemfile 中：

```
gem 's3nuke', :git => 'git://github.com/SFEley/s3nuke.git' 
```

gem 将在您下次安装时安装`bundle install`（假设您使用的是 Bundler）

# java - 使用 JMeter 生成部分消息流

> ID：13431283
> 
> 赞同：0
> 
> 时间：2012-11-17T14:01:09.653
> 
> 标签：java, http, web-applications, jmeter, load-testing

我正在研究是否可以`JMeter`用于服务器的负载测试。
我读到我可以将其设置为“记录”流的代理，但我不确定以下内容。
假设我为 1 个用户记录了一个流程，如下所示：

```
HTTP-1 req <data>    
HTTP-1 reply  
HTTP-2 req <data>    
HTTP-2 reply  
HTTP-3 req <data>    
HTTP-3 reply 
```

现在，在`data`哪个`XML`片段中，每个用户都有一个唯一的项目，例如`<user-id>AAA1</user-id>`
**问题：**一旦“记录”流程并且我想针对我的真实服务器模拟例如 50 个并发用户，是否每个“用户”都可以发送`data`一个*单独的/不同* `user-id`的？例如，对于第一个*用户*，它将`AAA1`与测试用例一样。对于第二个*用户*，它将是`AAA2`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:50:59.533

JMeter 可以做到这一点。

要发送不同的用户 ID：

*   使用[CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)，在其中将 userId 声明为 var，将共享设置为所有线程

*   对于每个 HTTP-N req ，使用带有 Post Body 模式的[HTTP Sampler](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)，并使用 userId 作为 var : ${userId} in XML body

根据您是否使用 HTTP 会话添加[Cookie 管理器](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager)

# ios - 当他/她从应用商店下载更新时，用户设备上的项目是否“清理”了？

> ID：13431287
> 
> 赞同：0
> 
> 时间：2012-11-17T14:01:51.063
> 
> 标签：ios, xcode, core-data, app-store, migration

我使用核心数据。在开发过程中，当我添加一个新的模型版本时，我需要在构建之前在 xcode 中清理我的项目，以便迁移到新的模型版本。

因此，当我的用户更新他们的应用程序时，他们的应用程序是否也在第一次启动之前“清理”了？还是我需要以其他方式强制迁移？

更准确地说：当我在 xcode 中构建我的新应用程序版本（带有新的核心数据模型版本）并在设备上运行它时，每当我尝试访问我的托管对象的新属性时它就会崩溃（因为它没有迁移sqlite DB 到新模型）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T23:33:41.207

是的，按照您理解“已清理”的方式，您的用户的应用程序被置于可执行状态。存储在 Core Data 持久存储中的所有数据都将迁移到新存储中，并且将像以前一样可用。

事实上，这就是苹果迁移计划的重点。正如 FR 所指出的，请阅读[文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/Introduction.html)。

# google-chrome - 在 chrome-extension 上访问 https iframe 元素

> ID：13431288
> 
> 赞同：4
> 
> 时间：2012-11-17T14:01:55.477
> 
> 标签：google-chrome, https, google-chrome-extension, cross-domain, same-origin-policy

我在 popup.html 中添加了 iframe 和 jquery。

```
<iframe id="xyz" border="0" src="https://xyz.com/test"></iframe> 
```

并尝试通过控制台使用此命令访问此 iframe 的元素：

```
$("#xyz").contents().find("body").fadeIn(); 
```

但它给出了这个错误：

```
Unsafe JavaScript attempt to access frame with URL https://xyz.com/test from frame with URL chrome-extension://my-extension-id/popup.html. The frame requesting access has a protocol of 'chrome-extension', **the frame being accessed has a protocol of 'https'. Protocols must match** 
```

**我在谷歌上搜索了这个错误，但没有这样的错误。他们都说域必须匹配等。但是这个说只有协议必须匹配。我该如何解决这个协议问题？**

我的清单文件中有这一行。

```
"permissions": [
    "*://xyz.com/*"
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:08:21.293

似乎是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)的问题。

[尝试遵循本讨论](https://stackoverflow.com/a/11576355/924643)中提到的解决方案。另外，在尝试使用 jQuery 之前，请先尝试通过本机 Javascript 进行操作。

# asp.net - 如何在 4.0 框架下的 IIS7 中部署/升级 3.7 SP2 开发的 Sitefinity 站点？

> ID：13431293
> 
> 赞同：0
> 
> 时间：2012-11-17T14:03:01.683
> 
> 标签：asp.net, iis-7, sitefinity-3x

我有一个使用 Sitefinity 3.7 SP2 开发的网站，该网站在服务器上成功运行。但是当我尝试在本地系统上运行时，通过在 asp.net 4.0 环境中集成项目。我收到以下错误：

* * *

```
 Compilation Error
 Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

 Compiler Error Message: CS0104: 'DynamicHyperLink' is an ambiguous reference between 'Telerik.Cms.Web.UI.DynamicHyperLink' and 'System.Web.DynamicData.DynamicHyperLink'

 Source Error:

 Line 15:             if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
 Line 16:             {
 Line 17:                 DynamicHyperLink link = item.FindControl("dhl") as DynamicHyperLink;
 Line 18:                 if (link != null)
 Line 19:                 {

 Source File: d:\Demo\miamiparking\Sitefinity\ControlTemplates\News\ListPageMaster.ascx    Line: 17

 Show Detailed Compiler Output:

 Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

请帮帮我，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:11:36.110

尝试使用：

```
Telerik.Cms.Web.UI.DynamicHyperLink link = 
                  item.FindControl("dhl") as Telerik.Cms.Web.UI.DynamicHyperLink; 
```

# java - 我如何获得父母来电者

> ID：13431296
> 
> 赞同：1
> 
> 时间：2012-11-17T14:03:45.283
> 
> 标签：java, android

假设用户打开 Twitter 应用程序并点击所选推文的分享按钮。然后他会在列表中看到我的应用程序以及 Gmail、SMS 等其他应用程序。

在我的活动的 OnCreate 方法中，我处理推文。删除短链接等，然后调用 Twitter 应用程序的 PostActivity。下面的代码然后在 twitter 应用程序的撰写推文部分显示“我的推文”。

```
 Intent intent1 = new Intent("android.intent.action.MAIN");
                intent1.setComponent(new ComponentName("com.twitter.android","com.twitter.android.PostActivity"));
                intent1.setAction(android.content.Intent.ACTION_SEND);
                intent1.putExtra(android.content.Intent.EXTRA_TEXT,"my tweet");
                intent1.setType("text/plain");
                startActivity(intent1); 
```

我想做的是，在我调用 PostActivity 之前，我需要 100% 确保我的活动是从 twitter 应用程序调用的。

# android - Android Chronometer Widget 落后于其他手表

> ID：13431297
> 
> 赞同：1
> 
> 时间：2012-11-17T14:03:53.247
> 
> 标签：android, time, lag, chronometer

我创建了一个带有计时器小部件的简单活动，只是为了显示经过的时间。代码非常简单：

```
//Initiate the chronometer base time
chChronometer.setBase(SystemClock.elapsedRealtime());
//start the chronometer
chChronometer.start(); 
```

显示的时间远远落后于其他天文台表，不到一分钟就可以看到。我正在测试的设备是运行 4.1.2 的 Galaxy Nexus 我的比较参考是运行 4.2 的 Nexus 7（标准秒表，不是应用程序），2 块真正的手表

这是一个已知的问题？我应该采取任何其他步骤来使事情顺利进行吗？

谢谢，加布里埃尔西蒙斯

# joomla - 带有 Mod_security 的 Joomla 自定义组件

> ID：13431298
> 
> 赞同：0
> 
> 时间：2012-11-17T14:03:53.927
> 
> 标签：joomla, joomla1.5, mod-security

我已经为 Joomla v 1.5.23 构建了一个自定义组件。但是现在当我在后端的表单发送任何 HTML 内容时，我收到以下错误

**Forbidden 您无权访问此服务器上的 /administrator/index.php。此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。**

但是，当我提交没有 html 内容的表单时，它会更新并且我被重定向到我的组件页面。

我正在使用以下配置

PHP 建立在：Linux bluemoon19.ukhost4u.com 2.6.32-13-pve #1 SMP Mon Jul 9 08:39:20 CEST 2012 x86_64

PHP版本：5.3.14

乔姆拉：乔姆拉！1.5.23 稳定 [ senu takaa ama baji ] 2011 年 3 月 4 日 18:00 GMT

有任何想法吗 ？

# mediawiki - 将非图像设置为 MediaWiki wiki 徽标

> ID：13431300
> 
> 赞同：2
> 
> 时间：2012-11-17T14:03:59.530
> 
> 标签：mediawiki

如何使用 .swf 文件作为我的徽标？我发现在 LocalSettings.php

```
$wgLogo= "$wgStylePath/common/images/wiki.png"; 
```

我可以通过这一行更改我的标志，但它只支持图像，我怎样才能使用 .swf 或 .fla 文件而不是图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:50:38.553

徽标应始终是图像，它可能会显示在不同的位置。`swf`如果可能，请创建文件的 png 版本。

左上角的标志（至少在 Monobook 和 Vector 皮肤中）默认是一个锚元素（带有指向主页的链接），标志文件设置为背景图像。如果你想用不同的东西替换它，你需要编辑皮肤模板。例如，在 monobook 中，它将是第[125 行附近的代码](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=skins/MonoBook.php;h=955f05bedaee1a3756c5b4ed74db353b2e223460;hb=HEAD#l122)。

# jsp - Jsp 页面未命中通过使用 web.xml 映射的 servlet 文件

> ID：13431304
> 
> 赞同：1
> 
> 时间：2012-11-17T14:04:37.377
> 
> 标签：jsp, servlets

在我的项目中，使用 web.xml 文件将 jsp 页面映射到 servlet。这是关于相同的部分代码：register box.RegisterServlet

```
<servlet-mapping>
    <servlet-name>register</servlet-name>
    <url-pattern>/Registration</url-pattern>
</servlet-mapping> 
```

我正在使用 apache tomcat 7.0。当我尝试打开此页面/注册时，它给了我一个 404 错误。在 box 文件夹中，我有所有的 servlet 文件（.java 和 .class）。此外，在尝试使用 javac 工具单独编译 servlet 文件时，它说找不到包 javax.servlet.* 和 javax.servlet.http.*。所以，问题是：

1.  我如何确保 jsp 页面可以访问 servlet 以便它们可以访问数据库？
2.  如何确保可以使用 javac 命令编译 servlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:13:20.387

您可以使用以下类似命令编译您的 Servlet 类（例如 MyServlet.java），
`javac -classpath .;path\tomcat\common\lib\servlet-api.jar;path\to\mylib*.jar -d classes src\web\MyServlet.java`

最好使用任何构建工具（如 ant 或 maven）来编译、打包或部署您的 Web 应用程序。

# iphone - 如何创建与 iphone 4 和 5 屏幕尺寸兼容的 iphone 应用程序

> ID：13431306
> 
> 赞同：-1
> 
> 时间：2012-11-17T14:04:47.890
> 
> 标签：iphone, ios, xcode, iphone-4, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我有两组图像。一组图像到 iphone 4 背景图像和另一组图像到 iphone 5。如何使用这两个图像集创建我想要与两种屏幕尺寸兼容的 iphone 应用程序？我想检查 iphone 版本并使用一些编码应用图像吗？希望你能帮忙。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:13:01.997

我正在使用一个名为`UIDevice`. 你可以在这里找到源代码：[https ://github.com/erica/uidevice-extension](https://github.com/erica/uidevice-extension)

我设置了一个简洁的小方法，根据屏幕尺寸布局视图。例子：

```
- (void)setupGUI
{  
    UIImage *backgroundImage;
    if ([[UIDevice currentDevice] platformType] == UIDevice5iPhone)
    {
        //4 inch screen
         backgroundImage = [[UIImage alloc] initWithCGImage:[UIImage imageNamed:@"main_background-568h@2x"].CGImage scale:2.0 orientation:UIImageOrientationUp];
    }
    else
    {
        //3.5 inch screen

        backgroundImage = [[UIImage imageNamed:@"main_background"] retain];
    }
    self.view.backgroundColor = [UIColor colorWithPatternImage:backgroundImage];
    [backgroundImage release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:15:20.553

对于飞溅，您可以使用后缀`-568h@2x`

对于 UIImage，您可以使用：

```
[UIImage imageNamed:@"tryImage"] 
```

你可以有`tryImage.png`,`tryImage@2x.png`和`tryImage-568h@2x.png`，但它似乎没有像我们想要的那样工作。

你也可以使用这样的技巧：[https ://gist.github.com/3782351](https://gist.github.com/3782351)

# java - Java OSX：CGContextXXX：当我调用 setVisible(true) 时 System.err 中的上下文 0x0 无效

> ID：13431307
> 
> 赞同：1
> 
> 时间：2012-11-17T14:04:55.743
> 
> 标签：java, macos, swing

我看到`System.err`

```
%DATE% %USERNAME%.local java[%PID%] <Error>: CGContextGetCTM: invalid context 0x0
%DATE% %USERNAME%.local java[%PID%] <Error>: CGContextSetBaseCTM: invalid context 0x0
%DATE% %USERNAME%.local java[%PID%] <Error>: CGContextGetCTM: invalid context 0x0
%DATE% %USERNAME%.local java[%PID%] <Error>: CGContextSetBaseCTM: invalid context 0x0 
```

总是当我`setVisible(true)`打电话`JFrame``JDialog`

我用java`1.7_09`

此消息的哪个根？

* * *

更新

OSX 10.8.3

# objective-c - Objective-C 继承应该改变超类中的变量

> ID：13431308
> 
> 赞同：0
> 
> 时间：2012-11-17T14:04:56.743
> 
> 标签：objective-c, ios, macos, inheritance

我想创建一个类似这样的类层次结构： AbstractBaseClass -> SubClass1，AbstractBaseClass -> subClass2 抽象基类应该有 2 个实例变量（类型 id？）以及 thou 变量的 setter 和 getter ...问题是变量在子类 1 中需要是 tpye NSNumber 和 NSSTring ，而在另一个子类中两者都将是 NSNumber ...我是否只是继承基类并覆盖 setter 和 getter 以将 NSNumber 转换为超类的 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:24:00.760

如果您`id`在基类中创建类型属性，您应该能够使用它们来存储任何类型的对象，而无需在子类中做任何额外的事情。

有点奇怪的例子：:)

```
// Base class .h
@interface BaseClass : NSObject
@property (nonatomic, strong) id something;
@end

// Sub class .m
- (id)init {
    self = [super init];
    if (self) {
        BOOL test = (random() > random());
        if (test) {
            [self setValue:@"A string" forKey:@"something"];
        } else {
            [self setValue:@42 forKey:@"something"];
        }
    }
    return self;
}

// Caller
for (int i = 0; i < 5; i++) {
    SubClass *sub = [[SubClass alloc] init];
    NSLog(@"Subclass result: %@", sub.something);
} 
```

# android - Android 模拟器在 Mac 上崩溃

> ID：13431313
> 
> 赞同：40
> 
> 时间：2012-11-17T14:05:18.993
> 
> 标签：android, macos, android-emulator, android-sdk-tools

当我尝试启动 Android 模拟器时，它在 Mac OS X 上崩溃了。它在一段时间前可以工作，但现在不行，我不知道为什么。

崩溃日志： http: [//pastebin.com/04MjCqaS](http://pastebin.com/04MjCqaS)

详细模式下的终端登录：http: [//pastebin.com/L6y6rUr0](http://pastebin.com/L6y6rUr0)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-28T16:54:03.767

同样的问题，我正在运行具有 8GB RAM 和 MacOS Lion 的 mac mini。它曾经与旧的 AVD 一起工作，时不时地出现一些随机崩溃，但自从上次更新到 APi 17 以来，它就让人头疼。

ADT 捆绑包根本不起作用。调整 eclipse.ini 文件的内存限制后，它会引发随机内存错误。它也无法下载和安装 m2e (maven to eclipse) 插件。

我搬到了 IntelliJ，我能够启动 AVD 管理器，但没有一个“旧”创建的设备工作。如果我创建一个新设备并启动它，它会一直工作，直到我关闭它，然后我必须重新启动 Mac 并创建一个新设备。当我想删除那些旧创建的虚拟设备时，它也会随机显示错误。

DDMS 也无法启动。我启动它，在 Dock 上显示它的图标，但直到我强制关闭它才会响应。什么样的恶梦。

** 编辑 ** 当您运行 2 个屏幕时，我在 android dev bug tracker 发现了这个问题：[这里](https://issuetracker.google.com/issues/36959630)

android模拟器发生在我身上。我这样解决了： cd ~/.android/avd ls *.avd

现在选择崩溃的模拟器

```
cd name_of_the_emulator.avd
touch emulator-user.ini
vi emulator-user.ini 
```

现在重置window.x，即window.x=0 退出并运行模拟器。

如果您将模拟器移动并关闭到辅助屏幕，它将在您下次运行时崩溃。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2017-03-25T21:54:06.673

**杀死你的 Docker 进程**

我多次看到的一个问题是 Docker。当 Docker 在 Mac 上运行时，Android 模拟器崩溃。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-07T03:11:21.873

我正在遵循 Android 的 PhoneGap“入门”指南，当我创建新的 AVD 后“部署到模拟器”时，我的 Mac 会崩溃并重新启动。我偶然发现了这个线程，但认为值得一提的是，真正为我解决问题的是位于此处的硬件加速执行管理器的英特尔补丁：http: [//software.intel.com/en-us/articles/intel-硬件加速执行管理器](http://software.intel.com/en-us/articles/intel-hardware-accelerated-execution-manager)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T14:59:34.953

这是因为 Android SDK 使用了一些已弃用的 Mac OS X 库。在我开始使用 android 设备之前，我遇到了同样的问题（有时甚至是内核恐慌）。也许在未来的 Android SDK 版本中这个问题会得到解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T21:39:57.437

我刚刚将 Android SDK 管理器更新到最新的 Android 4.2 (API 17) 级别更新，现在我所有的旧 AVD 都崩溃了。但是，使用 API 17 新创建的一个可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-12T21:39:55.107

您可以从 ~/.android/avd 中删除您的模拟器

然后创建新的模拟器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T09:24:39.810

我有同样的问题。您可以尝试使用适当的 API 级别创建新的 AVD。我可以在创建后第一次运行这些。这似乎是一个记忆错误。

我的 AVD 能够在重新启动后第一次运行。在此之后，他们不断崩溃。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-02T10:40:01.803

我在使用 mac 10.6 和 2 台显示器时遇到了同样的问题，一台通过 USB 适配器连接到 HDMI。我已经尝试了所有这些建议，但没有任何效果。我最终在我的 mac 中创建了一个新用户，并且使用相同的 android sdk 和具有新工作区的相同 eclipse 确实有效。

我不确定创建一个新的工作区是否会进行调整，我没有尝试过。对于那些遇到这个烦人的问题的人，值得在切换到新帐户之前尝试一下。

# java - 在 Matlab 中将 java.util.HashMap 键转换为向量

> ID：13431315
> 
> 赞同：2
> 
> 时间：2012-11-17T14:05:32.453
> 
> 标签：java, matlab, hashmap

我有一个`HashMap`包含`key=>value`set 的对象，它们都是整数。

```
F = java.util.HashMap;
F.put(1, 123);
F.put(3, 432);
F.put(7, 31); 
```

我需要提取向量的键。我通过以下方式访问密钥：

```
F.keySet.toArray 
```

它返回`Object`：

```
ans =

java.lang.Object[]:
    [1]
    [3]
    [7] 
```

如何将其转换为矢量？

```
[1 3 7] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:41:30.047

您可以尝试如下：

```
>> F = java.util.HashMap;
F.put(1, 123);
F.put(3, 432);
F.put(7, 31);
>> vec = cell2mat(F.keySet.toArray.cell)
vec =
     3
     7
     1
>> whos
  Name      Size            Bytes  Class                 Attributes

  F         1x1                    java.util.HashMap               
  ans       0x0                 0  double                          
  vec       3x1                24  double                          
  z         3x1                    java.lang.Object[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:14:44.683

这是你要找的吗？

```
Vector V=new Vector();
for(int i=0;i<3;i++)
V.add(ans[i]); 
```

`ans`您拥有的 Object[] 在哪里？

# jquery - 将从ajax返回的另一个视图的javascript代码插入到视图页面

> ID：13431318
> 
> 赞同：0
> 
> 时间：2012-11-17T14:05:49.523
> 
> 标签：jquery, ruby-on-rails-3.1

我在我的 rails 应用程序和控制器中执行 jquery ajax 调用，我将其呈现到视图页面（其中编写了 javascripts 代码）。然后我需要将从服务器返回的响应插入到一个 DOM 元素中。当我尝试提醒服务器响应（警报（数据））时，我完全明白了。但是当我将它插入到 dom 元素中时（$('#someid').html(data)) 它并没有完全插入它，因为它包含很多 javascript 代码。那么谁能告诉我如何将从ajax返回的另一个视图的javascript代码插入到视图页面中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:30:59.153

似乎您在转义字符方面遇到了一些问题。

这是一个有效的[演示](http://jsfiddle.net/Y22QN/1/)

我正在使用下面的代码，它工作正常：

```
data = "<script>alert('test');<\/script><p>Dynamic Content with Script</p>"
$('#paste').html(data);​ 
```

但是，即使没有转义脚本标记，它也会发出警报，但不会在 DOM 中呈现和执行它，我猜这突出了您的问题。

# javascript - 将旧 HTML 表格与新表格进行比较，并对更改进行动画处理

> ID：13431322
> 
> 赞同：0
> 
> 时间：2012-11-17T14:06:39.167
> 
> 标签：javascript, jquery

当页面最初加载时，它会从保持表更新的 PHP 文件中加载此表：

```
<table id="mytable">
    <tr id="1"><td>Item 1</td><td>bla bla bla</td><td class="sort">1</td></tr>
    <tr id="2"><td>Item 2</td><td>bla bla bla</td><td class="sort">2</td></tr>
    <tr id="3"><td>Item 3</td><td>bla bla bla</td><td class="sort">3</td></tr>
    <tr id="4"><td>Item 4</td><td>bla bla bla</td><td class="sort">4</td></tr>
    <tr id="5"><td>Item 5</td><td>bla bla bla</td><td class="sort">5</td></tr>
</table> 
```

然后每 10 秒我通过 ajax 再次加载表（可能已从 mysql 更新）以将其与第一个表进行比较并采取相应措施，假设更新后的表如下所示：

```
<table id="mytable">
    <tr id="1"><td>Item 1</td><td>bla bla bla</td><td class="sort">1</td></tr>
    <tr id="32"><td>Item 32</td><td>bla bla bla</td><td class="sort">2</td></tr>
    <tr id="5"><td>Item 5</td><td>bla bla bla</td><td class="sort">3</td></tr>
    <tr id="21"><td>Item 21</td><td>bla bla bla</td><td class="sort">4</td></tr>
    <tr id="7"><td>Item 7</td><td>bla bla bla</td><td class="sort">5</td></tr>
</table> 
```

问题是，如果我只是加载表（替换它），很难跟踪正在发生的事情，所以我想让它动画化。

我想每次将表的“当前”版本与“更新”版本进行比较，如果有变化，请采取相应措施：

*   移除的项目：fadeOut 和destroy
*   新项目：追加到新位置并淡入

拥有两个 html 表，我将如何比较它们并进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:14:40.453

就像 Christian Varga 说的那样..如果您在显示之前使用 javascript 比较两者，然后使用表格中行的 id，您可以以任何您想要的方式突出显示它，例如 Document.getElementById("tablRow7").InnerHTML = "一些突出显示的表格行版本”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:38:23.043

我想你可以以此为基础：

```
 <html>
  Old Table <br />
  <table id="mytable1">
<tr id="1"><td>Item 1</td><td>bla bla bla</td><td class="sort">1</td></tr>
<tr id="2"><td>Item 2</td><td>bla bla bla</td><td class="sort">2</td></tr>
<tr id="3"><td>Item 3</td><td>bla bla bla</td><td class="sort">3</td></tr>
<tr id="4"><td>Item 4</td><td>bla bla bla</td><td class="sort">4</td></tr>
<tr id="5"><td>Item 5</td><td>bla bla bla</td><td class="sort">5</td></tr>
  </table>
  <br />
  New Table <br />
  <table id="mytable2">
<tr id="1"><td>Item 1</td><td>bla bla bla</td><td class="sort">1</td></tr>
<tr id="32"><td>Item 32</td><td>bla bla bla</td><td class="sort">2</td></tr>
<tr id="5"><td>Item 5</td><td>bla bla bla</td><td class="sort">3</td></tr>
<tr id="21"><td>Item 21</td><td>bla bla bla</td><td class="sort">4</td></tr>
<tr id="7"><td>Item 7</td><td>bla bla bla</td><td class="sort">5</td></tr>
  </table>

  <input type="button" onclick="merge('mytable1', 'mytable2')" value="merge" />
  <script type="text/javascript" src="jquery.js" ></script>
  <script type="text/javascript">
function merge(id1, id2){
    var tbl1 = $('#'+id1);
    var tbl2 = $('#'+id2);
    var currentIds =  new Array();
    var newIds =  new Array();
    $(tbl2).find('tr').each(function(){
        newIds.push($(this).attr('id'));
    });
    var newIdsStr = ","+ newIds.join(',')+",";
    console.log(newIdsStr);
    $(tbl1).find('tr').each(function(){
        var id = $(this).attr('id');
        var index = newIdsStr.indexOf(","+id+",");
        //console.log(id);
        if( index == -1){
            $(this).hide(500);
        }
        else{
            //console.log(newIdsStr.substring(0, index) + newIdsStr.substring( index + id.length + 1));
            newIdsStr = newIdsStr.substring(0, index) + newIdsStr.substring( index + id.length + 1);
        }
    });
    if(newIdsStr.length==1)
        return;
    var finalArr = newIdsStr.substring(1, newIdsStr.length -1).split(',');
    console.log(finalArr);
    for(var i=0;i<finalArr.length; i++){
        var tr = $('<tr id="'+finalArr[i]+'"><td>Item '+finalArr[i]+'</td><td>bla bla bla</td><td class="sort">5</td></tr>');
        $(tr).css('opacity','0').appendTo(tbl1).fadeTo(500, 1);     
    }
    console.log(newIdsStr);
} 
```

# jquery - 粘贴 没有在 contenteditable 中生成开始 p 标记的结束标记

> ID：13431323
> 
> 赞同：0
> 
> 时间：2012-11-17T14:06:47.010
> 
> 标签：jquery, html, contenteditable

我有一个内容可编辑的 div：

```
<div id="result" class="content" contenteditable="true"><p><br/></p></div> 
```

我希望在按 ENTER 时形成新段落，为此我拦截 ENTER 键并通过插入 html 代码替换默认操作：

```
$(".content").on("keydown",function(e){if(e.which == 13) { e.preventDefault(); pasteHtmlAtCaret("</p><p><br/>");}}); 
```

我希望当我按 ENTER 时，`</p><p><br/>`将关闭现有段落并打开一个新段落。所以，如果我输入：'hello world' + ENTER，我应该有：

```
<p>hello world</p><p><br/></p> 
```

你可以在哪里认出这`</p><p><br/>`件作品。我观察到不同的行为。我得到：

```
<p>hello world<p></p><p><br></p></p> 
```

所以似乎第一个`</p>`产生了一个开始`<p>`标签，而`<p>`就在`<br/>`标签之前产生了一个匹配的结束 p 标签。这是否意味着我的浏览器忽略了 wrapping 的存在`<p></p>`？`p`当我插入一小段 html 代码时，如何避免产生新标签？

我正在使用 Chromium 和 jQuery 1.7.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:30:40.920

编辑发生在文档对象模型 (DOM) 中。HTML 标签实际上并不存在于编辑器中。HTML 被解析为 DOM。当 DOM 被序列化时，会再次生成 HTML 标签。因此，不正确的 HTML 片段不能被粘贴而没有后果。

# python - python如何解释带有前导零的数字

> ID：13431324
> 
> 赞同：16
> 
> 时间：2012-11-17T14:07:11.797
> 
> 标签：python

我是 python 新手，当我在 python shell 上输入这个时，我使用的是 python 2.7：

```
print 01
print 010
print 0100
print 01000 
```

它给出了这个结果

```
1
8
64
512 
```

我试图理解它为什么会这样，但不幸的是我没有明白这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-17T14:08:31.243

如果数字以 开头`0`，则将其解释为八进制或以 8 为底。只需执行以下操作：

```
print 1
print 10
print 100
print 1000 
```

你的问题将得到解决。

有关八进制的更多信息：[http ://en.wikipedia.org/wiki/Octal](http://en.wikipedia.org/wiki/Octal)

这是一种更容易理解八进制的方法：

> 八进制 1 是十进制（普通数字） 1
> 
> 八进制 2：十进制 2
> 
> ...
> 
> 八进制 7：十进制 7
> 
> 八进制 10：十进制 8
> 
> 八进制 11：十进制 9
> 
> 八进制 12：十进制 10
> 
> ...
> 
> 八进制 17：十进制 15
> 
> 八进制 20：十进制 16

等等。八进制只使用从 0 到 7 的数字。

希望这有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-17T14:18:56.787

`0`Python 解释一个以as `octal`which is开头的数字`base 8`。您可以使用二进制字符串`10`作为base`b^1 === b` 来`b`计算底数。

```
# print the decimal value of the binary number 10
>>> print 0b10
2
# print the decimal value of the octal number 10    
>>> print 010
8
# print the decimal value of the hexadecimal number 10
>>> print 0x10
16 
```

在任何基础中，符号`1`始终是`decimal`值`1`，因为`b^0 === 1`对于从右到左阅读的所有人来说`b`，数字的索引从 开始`0`。

```
# print the decimal value of the binary number 1
>>> print 0b001
1
# print the decimal value of the octal number 1
>>> print 0001
1
# print the decimal value of the hexadecimal number 1
>>> print 0x001
1 
```

一旦基数被解释为 ( `0`, `0b`, `0x`)，前导`0`就不重要了。

基数所需的符号数是`b`最大符号等于`b-1`

```
 Base (b)   Number of Symbols (b)    Symbols (0 : b-1)
Binary      2          2                        0,1
Octal       8          8                        0,1,2,3,4,5,7,6,7
Decimal     10         10                       0,1,2,3,4,5,7,6,7,8,9 
```

可以用数字表示的最大值是`(b^n)-1`其中`n`的位数。给定一个 3 位数字，最大十进制值为`(10^3)-1 = 999`，八进制`(8^3)-1 = 511 (decimal)`表示`777`以 8 为基数，二进制`(2^3)-1 = 7 (decimal)`表示`111`以 2 为基数。因此，您可以看到符号越少*（基数越低）*，在给定固定数字的情况下，您可以表示的值会减少位数。

# jmeter - 使用 JMeter 测试 JSF 应用程序

> ID：13431334
> 
> 赞同：0
> 
> 时间：2012-11-17T14:08:31.030
> 
> 标签：jmeter, jsf-1.2, viewexpiredexception

我正在尝试为 JSF 应用程序执行测试脚本。

我已按照以下链接中的步骤操作：
[wiki.apache.org/myfaces/PerformanceTestingWithJMeter](http://wiki.apache.org/myfaces/PerformanceTestingWithJMeter)

我的脚本正在浏览 5 页。问题是我可以毫无问题地加载所有 4 个页面，但是我得到一个页面的视图过期异常。

结构

线程组

```
 |- HTTP Cache Manager
    |- HTTP Cookie Manager
    |- HTTP Header Manager
    |- Once Only controller (Login)
            |- HTTP Request(Login page)
    |- Regular Expression Extractor (For the view ID)
    |- Recording Controller
            |- HTTP Request (Page 1.faces)
    |- Recording Controller
            |- HTTP Request (Page 2.faces)
    |- Recording Controller
            |- HTTP Request (Page 3.faces) -> Getting Error for this page and the response is blank.
            |- HTTP Request (Page 4.faces)
    |- Recording Controller
            |- HTTP Request (Page 5.faces) 
```

# inno-setup - 如何在 InnoSetup 中修改消息框的设计？

> ID：13431339
> 
> 赞同：3
> 
> 时间：2012-11-17T14:09:18.393
> 
> 标签：inno-setup

如何从消息框中删除此白色页脚？如何在 InnoSetup 中修改消息框的设计？

![Inno 设置消息框](../Images/60cb058601d17498cfa2908fbc0417e0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:24:23.940

InnoSetup 使用的消息框是标准的 Windows 消息框。白色页脚是 Windows 主题的一部分。您只能通过更改 Windows 主题/配色方案来删除它。

# magento - Magento Connect 登录后尝试更改的路径是什么？

> ID：13431343
> 
> 赞同：2
> 
> 时间：2012-11-17T14:09:57.177
> 
> 标签：magento

每一次，我都会收到错误消息：“部署 FTP 错误。登录后无法 chdir：”</p>

我第一次通过连接和设置成功地完成了我的 /{complete_path_to_magento_installation_dir}/**下载**器 / 到 0777

在 /downloader/ 中创建了一个 cache.cfg 文件

在 /downloader/ 中创建了一个 connect.cfg 文件

然后我 chmod'ed /{complete_path_to_magento_installation_dir}/ **downloader** / 回到 0755

我的 Magento 安装绝对路径是：**/home/abcde/public_html/magento/**

我的主机的文档根目录是：**/home/abcde/public_html/**

我的 Magento Connect 目录位于：**/home/abcde/public_html/magento/downloader/**

这是我的设置：

Magento 连接通道协议：**Ftp**

首选状态：**稳定**

使用自定义权限：**否**

部署类型：**FTP 连接**

FTP 主机：**ftp://{mydomain.com}/**

FTP 登录：**我的 ftp 用户 ID**

FTP密码：**我的FTP密码**

最后，当安装路径：设置为（见下面的列表）时，我收到错误消息：

安装路径：**{我将其留空}**错误消息：无法读取保存的设置。请检查 FTP 连接的安装路径。

安装路径：**/**错误消息：无法读取保存的设置。请检查 FTP 连接的安装路径。

安装路径：**/home/**错误消息：部署 FTP 错误。登录后无法 chdir：/home/

安装路径：**/home/abcde/**错误消息：部署 FTP 错误。登录后无法 chdir：/home/abcde/

安装路径：**/home/abcde/public_html/**错误消息：部署 FTP 错误。登录后无法 chdir：/home/abcde/public_html/

安装路径：**/home/abcde/public_html/magento/**错误消息：部署 FTP 错误。登录后无法 chdir：/home/abcde/public_html/magento/

安装路径：**/home/abcde/public_html/magento/downloader/**错误消息：部署 FTP 错误。登录后无法 chdir：/home/abcde/public_html/magento/downloader/

安装路径：**magento**错误消息：部署 FTP 错误。登录后无法 chdir：/magento/

有谁知道 Magento Connect 设置的秘密？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-30T03:48:31.400

我有一个类似的问题，我可以使用它来解决

从 /usr/share/nginx 文件夹

仔细检查 nginx 是否作为 nginx 运行。

1.  把一切都交给了 nginx。
2.  chmoded 目录到 775（必须有组写权限）
3.  chmoded 文件到 644

命令：

```
sudo find . -exec chown nginx {} \;
sudo find . -type d -exec chmod 775 {} \;
sudo find . -type f -exec chmod 644 {} \; 
```

从 /usr/share/nginx/html 文件夹

```
sudo chmod -R o+w media var skin downloader 
sudo chmod o+w app/etc 
```

这同样适用于 apache，只需根据 apache 的设置方式将所有内容更改为 apache 或 noname。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:59:41.223

这个问题出在我的安装路径上。例如：我的站点安装在子域上，但 FTP 用户可以访问主域和子域。因此，当它连接时，它需要一个“magneto”的初始目录（我的这个安装的子域）。

我会通过 FTP 进入您的站点（在您的 FTP 客户端中没有设置初始目录）并记下您导航到的文件夹。这在许多情况下应该有效，尽管它可能因主机而异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:42:03.380

我也遇到了同样的问题：
我通过以下更改解决了这个问题：

777 ---------> /downloader 文件夹
777 ----------> /var 文件夹
777 ----------> /media 文件夹

禁用缓存
刷新缓存
刷新javascript、图像和所有其他提到的缓存。

保持安装路径为空，或者您可以添加`/`
希望这对您有所帮助。
祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-29T01:58:01.623

只需将路径设置为“/”，它应该可以工作。

# php - 为什么 if 语句在这个循环中不起作用？PHP

> ID：13431349
> 
> 赞同：1
> 
> 时间：2012-11-17T14:11:04.630
> 
> 标签：php, mysql, arrays, loops

我有一个遍历从 SQL 查询返回的行的 while 循环。该行中特定列的值存储在数组中。然后遍历数组，并将每个元素与用户的输入进行比较。如果输入与数组元素匹配，则布尔值变为真。我正在尝试这样做，以便用户可以输入密码来访问特定页面。然而它只是行不通。我已经打印了数组中的所有值以及输入，所以我知道那里没有问题。但由于某种原因，if 语句不会比较它们。这是代码：

```
if (isset( $_POST['ok'])) {
  $password = $_POST['pass'];
  $matched = false;
  $pw = array();
  mysql_connect("localhost", "xxx", "xxx")or die("Error");
  mysql_select_db("details")or die("Error");
  $query="SELECT * FROM members";
  $result=mysql_query($query);
  while ($row = mysql_fetch_assoc($result) ){
    $pw[] = $row["pass"];
  }
  foreach($pw as $p){
    if(strcmp($p, $password) == 0){
      $matched = true;
    }
  }
  if ($matched==true) {
    //Membership page
  } else {
    //Error message
  }
} else {
  .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:19:59.883

将您的查询更改为这样的内容会更容易和更有效

```
$dbh = mysql_connect("localhost", "xxx", "xxx") or die("Error");
mysql_select_db("details", $dbh ) or die("Error");

$pass = mysql_real_escape_string( $_POST['pass'], $dbh );
$user = mysql_real_escape_string( $_POST['user'], $dbh );

$sqlQuery = <<< EOQ
    SELECT
        *
    FROM
        `members`
    WHERE
        `user` COLLATE utf8_bin = '{$user}' COLLATE utf8_bin
        AND
        `password` COLLATE utf8_bin = '{$pass}' COLLATE utf8_bin
EOQ;

$result = mysql_query( $sqlQuery );
if ( $result and ( mysql_num_rows( $result ) === 1 ) {
       echo "success";
       $userDetails = mysql_fetch_assoc( $result );
} else {
       echo "username or password wrong";
} 
```

编辑：将密码和用户名检查更新为在任何情况下都区分大小写

Edit2：以上评论提醒不要存储明文密码。更改为散列密码

```
UPDATE members SET pass = SHA1( pass ); 
```

然后将您的支票更改为

```
... AND pass = SHA1( '{$pass}' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:38:51.003

Why the foreach loop ? You can do it like this:

```
if (isset( $_POST['ok'])) {
  $password = $_POST['pass'];
  $matched = false;
  $pw = array();
  mysql_connect("localhost", "xxx", "xxx")or die("Error");
  mysql_select_db("details")or die("Error");
  $query="SELECT * FROM members";
  $result=mysql_query($query);
  while ($row = mysql_fetch_assoc($result) ){
    $pw[] = $row["pass"];
  }
   $pw_tmp = flip_array($pw);

   if(isset($pw_tmp[$password])){
      //Membership page
   }else{
      //Error message
   }
}else{
  // something else ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:26:27.677

建议：

1）用PDO替换直接的mysql函数调用：（这不需要任何转义，因为PDO会处理所有事情）

```
$mysql_host = "localhost";
$mysql_user = "xxx";
$mysql_password = "xxx";
$mysql_database = "details";
$dbLink = new PDO("mysql:host=$mysql_host;dbname=$mysql_database;charset=utf8", $mysql_user, $mysql_password, array(PDO::ATTR_PERSISTENT => true));
$query = db()->prepare("select * from members WHERE pass = ? limit 1");
$query->execute(array($_POST['pass']));
$query->setFetchMode(PDO::FETCH_ASSOC);
$myMember = $query->fetch();
$query->closeCursor(); 
```

2）如果您想坚持使用您的代码，您可以使用`$pwd = mysql_real_escape_string($_POSt['pass'])`发布的密码，然后选择包含转义接收密码的行`$pwd`。另外，不要忘记`mysql_free_result($result);`！

3) 对密码进行哈希处理，因此您不需要使用 mysql_real_escape_string。使用`$pwHash = md5($_POST['pass'])`or`$pwHash = sha1($_POST['pass'])`或任何组合。

4）请对齐您的代码。它将使回答您的问题（提供帮助）的人以及将来的维护（您或其他人；相信我，您会在 2-3 年内忘记代码）更具可读性。

5）你的代码应该可以工作，我不知道为什么它不工作。尝试添加 var_dump for`$pw`并在密码匹配时在屏幕上写一些东西。也许您交换了页面（有错误的成员）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T14:19:22.793

找到匹配项后需要休息一下，以便 $matched 等于 true。

```
if ( isset( $_POST['ok'] ) ) {

$password = $_POST['pass'];
$matched = false;
$pw = array();

mysql_connect("localhost", "xxx", "xxx")or die("Error");
mysql_select_db("details")or die("Error");
$query="SELECT * FROM members";
$result=mysql_query($query);

while ($row = mysql_fetch_assoc($result) ){
$pw[] = $row["pass"];
}

foreach($pw as $p){
  if(strcmp($p, $password) == 0){
  $matched = true;    // found match so break out and do the membership.
  break;
}
}

    if ($matched==true) {

      //Memebrship page

    } else {

      //Error message
    }

} else {

.... 
```

# ruby-on-rails - 如何通过关联表从同一列的多个条件中获取记录

> ID：13431351
> 
> 赞同：3
> 
> 时间：2012-11-17T14:11:10.233
> 
> 标签：ruby-on-rails, activerecord, model, activemodel

假设书籍模型`HABTM`类别，例如书籍 A 有类别`"CA"`&如果我仅使用&`"CB".`
查询，我如何检索书籍 A。我知道但它使用操作。我需要类似手术的东西。`"CA"``"CB"``.where("category_id in (1,2)")``OR``AND`

**已编辑**

并且`CA`只能从类别中获取书籍。以及如何包含查询条件，例如`.where("book.p_year = 2012")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:02:16.567

```
ca = Category.find_by_name('CA')
cb = Category.find_by_name('CB')
Book.where(:id => (ca.book_ids & cb.book_ids))  # & returns elements common to both arrays. 
```

否则，您需要直接在 SQL 中滥用连接表，按 book_id 对结果进行分组，对它们进行计数，并且只返回计数至少等于类别数的行......像这样（但我确定这是错误的，所以如果你走这条路，请仔细检查语法。也不确定它会比上面的更快）：

```
SELECT book_id, count(*) as c from books_categories where category_id IN (1,2) group by book_id having count(*) >= 2; 
```

# c# - 在 Monotouch 中绑定到第 3 方库 - 映射 uint8_t * 和 uint8_t **

> ID：13431356
> 
> 赞同：3
> 
> 时间：2012-11-17T14:11:45.627
> 
> 标签：c#, c, binding, xamarin.ios

我正在尝试使用 monotouch 绑定到第 3 方条码扫描库 - 到目前为止，除了库头文件中定义的以下方法外，一切都运行良好：

```
/**
 * Main scan function. Invokes all activated decoders by priority.
 * For successful scan, allocates pp_data buffer and pass it to user.
 * User should deallocate *pp_data pointer when no more needed.
 *
 * @param[in]   pp_image                Byte array representing grayscale value of image pixels.
 *                                      Array shold be stored in row after row fashion, starting with top row.
 * @param[in]   lenX                    X axis size (width) of image.
 * @param[in]   lenY                    Y axis size (length) of image.
 * @param[out]  pp_data                 On successful decode, library allocates new byte array where it stores decoded
 *                                      string result. Pointer to string is passed here. User application is responsible
 *                                      for deallocating this buffer after use.
 *
 * @retval      >0                      Result string length for successful decode
 * @retval      MWB_RT_BAD_PARAM        Null pointer or out of range parameters
 * @retval      MWB_RT_NOT_SUPPORTED    Unsupported decoder found in execution list - library error
 */
extern int MWB_scanGrayscaleImage(uint8_t *  pp_image,  int lenX,  int lenY, uint8_t **pp_data); 
```

有一段时间没有直接接触C数据结构了，不清楚怎么映射`uint8_t * pp_image`和`uint8_t **pp_data`.

第一个参数处理来自像素缓冲区的灰度图像。我从`CMSampleBuffer`. 它是否需要一个亮度转换的字节数组，字节数组的内存地址，或者传入`pixelBuffer.GetBaseAddress(0)`就`IntPtr`足够了？

最后一个参数传入一个指针，该指针在 Objective-C 演示中被初始化`unsigned char *pResult=NULL;`，然后在找到有效扫描时填充数据。同样，我不确定如何初始化和传递它，因为您无法在 C# 中传递未初始化/空字节数组。

我的绑定库代码目前如下（虽然我也尝试过使用`IntPtr`，通过引用传递，并在不安全模式下传递直接地址）：

```
[DllImport ("__Internal")]
extern static int MWB_scanGrayscaleImage (byte[] pp_image, int lenX, int lenY, out byte[] pp_data);
public static int ScanGrayscaleImage (byte[] pp_image, int lenX, int lenY, out byte[] pp_data)
{
    int result = MWB_scanGrayscaleImage(pp_image, lenX, lenY, out pp_data);
    return result;
} 
```

对于到目前为止我尝试过的所有内容，结果值一直返回 -1，映射为“扫描失败”。任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:15:47.753

第一个参数是保存亮度值的字节数组的内存地址，但是将数组作为参数传递应该可以做到这一点。

最后一个参数必须引用一个（有效的）内存位置，其中将存储对输出字符串的引用。

您是否尝试过类似以下的方法？

```
[DllImport ("__Internal")]
extern static int MWB_scanGrayscaleImage (byte[] pp_image, int lenX, int lenY, out byte[] pp_data);
public static int ScanGrayscaleImage (byte[] pp_image, int lenX, int lenY, out byte[] pp_data)
{
    int result;

    fixed (byte** pp_data_ptr = &pp_data) {
        result = MWB_scanGrayscaleImage(pp_image, lenX, lenY, pp_data_ptr);
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T21:33:52.760

我建议将 uint8_t** 绑定为 IntPtr，因为库将无法分配托管字节 []

也许是这样的：

```
[DllImport ("__Internal")]
extern static int MWB_scanGrayscaleImage (byte[] pp_image, int lenX, int lenY, out IntPtr pp_data);
public static int ScanGrayscaleImage (byte[] image, int lenX, int lenY, out byte[] data)
{
    IntPtr pp_data;

    int result = MWB_scanGrayscaleImage (image, lenX, lenY, out pp_data);
    if (result > 0) {
        data = new byte[result];
        Marshal.Copy (pp_data, data, 0, result);
        Marshal.FreeHGlobal (pp_data); // I think this is what you want...
    } else {
        data = null;
    }

    return result;
} 
```

# javascript - 使用 Javascript 单击后如何将输入类型按钮更改为“display=none”？

> ID：13431359
> 
> 赞同：1
> 
> 时间：2012-11-17T14:12:04.910
> 
> 标签：javascript, button

我有一个按钮，一旦单击，我就想隐藏它。此外，我只是不想隐藏它，我希望它`style='display:none'`一旦点击。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T14:14:14.950

```
<button onclick="this.style.display='none';">a button</button> 
```

见例子：http: [//jsfiddle.net/uWfYk/](http://jsfiddle.net/uWfYk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:14:43.070

附加一个事件以使用 JS 样式`onclick`隐藏和应用样式，见下文，`display:none`

```
<input type="button" name="btn" value="Hide me" onclick="this.style.display='none'" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T14:28:26.583

## 2020 年更新：

[所有主流浏览器都支持并支持](https://caniuse.com/#search=querySelector)它[`addEventListener()`](https://caniuse.com/#feat=addeventlistener)，它可以是[`querySelector()`](https://caniuse.com/#search=querySelector)

```
document
  .querySelector('#the-important-button')
  .addEventListener('click', ev => ev.target.style.display = 'none');
```

```
<button id="the-important-button">Click</button>
```

## 2012年的回答：

为了让它不引人注目并在早期的 IE 和其他现代浏览器上工作：

的HTML：

```
<button id="the-important-button">Submit</button>​ 
```

JavaScript：

```
var theButton = document.getElementById('the-important-button');

function hideTheButton() {
    this.style.display = 'none';
}

function addEvent(target, type, handler) {
    if (target.addEventListener) {
        target.addEventListener(type, handler, false);
    } else if (target.attachEvent) {
        target.attachEvent('on' + type, function() {
            return handler.call(target, window.event);
        });
    } else {
        target['on' + type] = handler;
    }
}

addEvent(theButton, 'click', hideTheButton); 
```

请注意，这`addEvent`是一个在早期 IE 和其他现代浏览器上运行良好的通用函数。您可以添加与上面最后一行代码类似的其他事件。

[http://jsfiddle.net/W37Fb/5/](http://jsfiddle.net/W37Fb/5/)上的示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T14:17:23.693

[http://jsfiddle.net/uWfYk/2/](http://jsfiddle.net/uWfYk/2/)

使用jquery如下

```
$("#btn").click(function(){
    //do need full
    $(this).fadeOut();
})​ 
```

使用纯 JS

[http://jsfiddle.net/PeM2b/](http://jsfiddle.net/PeM2b/)

# c++ - 基于 C++ shared_ptr 的单音是什么导致链接错误？

> ID：13431362
> 
> 赞同：2
> 
> 时间：2012-11-17T14:12:26.420
> 
> 标签：c++, design-patterns, singleton, shared-ptr

所以我试试这段代码：

```
#ifndef TRANSMITTER_H
#define TRANSMITTER_H
class connector
{   
public:
    static boost::shared_ptr<connector> Instance(){
        if(!instance)
        {
            instance = boost::shared_ptr<connector>(new connector());
        }
        return instance;
    }
private:
    connector(){}
    static boost::shared_ptr<connector> instance;
};
#endif //TRANSMITTER_H 
```

但得到链接错误：

```
Error   3   error LNK2001: unresolved external symbol "private: static class boost::shared_ptr<class connector> connector::instance" (?instance@connector@@0V?$shared_ptr@Vconnector@@@boost@@A) 
```

我想返回的 shared_ptr 有什么问题？我应该将其设为函数范围静态变量吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-17T15:29:03.860

这

```
static boost::shared_ptr<connector> instance; 
```

在您的类定义中只是一个*声明*。你似乎没有对它的*定义*。这个*定义*已经在类定义之外。

但是，您可能更喜欢这样做：

```
class connector
{   
public:
    connector(connector const&) = delete;
    connector& operator=(connector const&) = delete;

    static boost::shared_ptr<connector> Instance()
    {
        static boost::shared_ptr<connector> instance (new connector);
        return instance;
    }
private:
    connector(){}
}; 
```

在这种情况下`instance`，它被*定义*为您的内联函数定义中的静态函数局部对象`Instance`。它的好处是这种初始化在 C++11 中保证是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:39:31.913

你应该定义

```
boost::shared_ptr<connector> connector::instance; 
```

在你的 *.cpp 这使得链接器在静态数据区域中为这个静态成员分配内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T14:40:10.737

您必须在类声明之外定义静态成员。这是定义的样子：

```
boost::shared_ptr<connector> connector::instance; 
```

它应该在一个 cpp 中，对你来说可能是transmitter.cpp

# matlab - 在 Matlab 中添加矩阵的特定坐标

> ID：13431365
> 
> 赞同：0
> 
> 时间：2012-11-17T14:12:59.530
> 
> 标签：matlab, vector, matrix, operation

我试图在矩阵中找到某些坐标的总和。

我有一个`N x M`矩阵。我有一个包含`2xM`值的向量。向量中的每一对值都是矩阵中的一个坐标。因此它们是`M`坐标数。我想在不使用 for 循环的情况下找到所有坐标的总和。

有没有我可以用来得到这个的矩阵运算？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:35:59.157

If you want to find the centroid of your `2xM` array `coords`, then you can simply write

```
centroid = mean(coords,2) 
```

If you want to find the weighted centroid, where each coordinate pair is weighted by the corresponding entry in the `MxN` array `A`, you can use `sub2ind` like this:

```
idx = sub2ind(size(A),coords(1,:)',coords(2,:)');

weights = A(idx);

weightedCentroid = sum( bsxfun( @times, coords', weights), 1 ) / sum(weights); 
```

If all you want is the sum of all the entries to which the coordinates point, you can do the above and simply sum the weights:

```
idx = sub2ind(size(A),coords(1,:)',coords(2,:)');

weights = A(idx);

sumOfValues = sum(weights); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:35:59.970

As I understand it the vector contains the (row,column) coordinates to the matrix elements. You can just transform them into matrix element number indices. This example shows how to do it. I'm assuming that your coordinate vector looks like this: [n-coordinate1 m-coordinate1 n-coordinate2 m-coordinate2 ...]

```
n = 5; % number of rows
m = 5; % number of columns
matrix = round(10*rand(n,m)); % An n by m example matrix
% A vector with 2*m elements. Element 1 is the n coordinate, 
% Element 2 the m coordinate, and so on. Indexes into the matrix:
vector = ceil(rand(1,2*m)*5); 
% turn the (n,m) coordinates into the element number index:
matrixIndices = vector(1:2:end) + (vector(2:2:end)-1)*n); 
sumOfMatrixElements = sum(matrix(matrixIndices)); % sums the values of the indexed matrix elements 
```

# javascript - 检查 TinyMCE 内容编辑器并删除底部换行符

> ID：13431368
> 
> 赞同：1
> 
> 时间：2012-11-17T14:13:04.437
> 
> 标签：javascript, jquery, html, tinymce

我正在使用 TinyMCE 编辑器。当用户通过 Ajax 请求提交内容时，我试图删除一个空标签。如果用户没有在编辑器区域插入内容，TinyMCE 编辑器会保留空标签。

```
<div>&nbsp;</div> 
```

如何通过 jQuery 检查编辑器是否没有内容？此外，我想删除内容编辑器末尾的空标签：例如，当用户在底部插入换行符时，因为 TinyMCE 将换行符转换为：

```
<div>&nbsp;</div> 
```

在 TinyMCE 中也可以转换换行符：

```
<div>&nbsp;</div> 
```

进入

```
<div class="custom_empty"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:28:02.007

在这种情况下，我不会使用常规表单并提交，而是在`ed.getContent()`按下特殊提交按钮时使用 -tinymce API 函数获取 tinymce 编辑器内容。然后，您有机会自己清理您的 tinymce 编辑器内容。

这是我用来进行字符替换的一些示例代码，因为我们必须使用自己的字体并在编辑器中替换一些特殊字符：

```
content = content.replace(/\u2192/g, '\t').replace(/\u00a0/g, '\u0020').replace(/\u202F/g, '\u00a0').replace(/\u2007/g, '\u2005').replace( new RegExp("\ufeff", "g"), "").replace(/\u00ad/g, ''); 
```

在您的用例中，您可能会考虑使用正则表达式来检测空标签（或带有 &bnsp 的标签）并将它们替换为空字符串。

# matlab - 矩阵的索引

> ID：13431369
> 
> 赞同：0
> 
> 时间：2012-11-17T14:13:18.043
> 
> 标签：matlab, vector, row, indices

在下面的示例中，我似乎无法从 fulldata 中获取 UnseenTestdata 和 Testdata 的索引，有人可以帮忙吗？

```
pointsToPick = 49402;  %# Numbers to pick
rVec = randperm(494021);   %# Random permutation of datapoint indices (N=494021 in this case)  

UnseenTestdata = fulldata(rVec(1:pointsToPick),:); %# Random sample
Testdata = fulldata(rVec((pointsToPick+1):length(rVec)),:); 
```

我需要列出 unseentestdata 来自的 fulldata 中的行号列表，并且与 testdata 相同。这与[此处](https://stackoverflow.com/questions/13430173/how-to-get-the-remainder-of-a-dataset)的前一个问题有关，没有索引，我无法弄清楚哪些类标签与 unseentestdata 和 testdata 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:24:44.550

如果您不`rVec(1:pointsToPick)`想像@Tobold 所说的那样使用已经存储索引的方法，另一种方法是

```
[~,indx_uns]=ismember(UnseenTestdata, fulldata, 'rows');
[~,indx_test]=ismember(Testdata, fulldata, 'rows'); 
```

请注意，不使用第一个返回参数（因此用 标记`~`）。
`indx_uns(n)`将对应的 fulldata 行赋予 UnseenTestdata 的第 n 行。

此外[，这里是相关 SO question 的链接](https://stackoverflow.com/questions/6209904/find-given-row-in-a-matrix)。

有关 ismember 的更多帮助：请参阅[此链接](http://matlab.izmiran.ru/help/techdoc/ref/ismember.html)

# bash - 启动 Solr deltaimporthandler 的 Bash 脚本

> ID：13431371
> 
> 赞同：0
> 
> 时间：2012-11-17T14:13:40.863
> 
> 标签：bash, shell, solr, lucene, cron

我正在使用一个 bash 脚本，我可以使用它来通过 CRON 触发 XML 文件的增量导入。经过一些挖掘和修改后，我有这个：

```
#!/bin/bash
# Bash to initiate Solr Delta Import Handler

# Setup Variables
urlCmd='http://localhost:8080/solr/dataimport?command=delta-import&clean=false'
statusCmd='http://localhost:8080/solr/dataimport?command=status'
outputDir=. 

# Operations
wget -O $outputDir/check_status_update_index.txt ${statusCmd} 
2>/dev/null 
status=`fgrep idle $outputDir/check_status_update_index.txt` 
if [[ ${status} == *idle* ]] 
then 
wget -O $outputDir/status_update_index.txt ${urlCmd} 
2>/dev/null 
fi 
```

我可以得到任何反馈吗？有更好的方法吗？任何优化或改进都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:32:45.450

这当然看起来很有用。只是为了确认一下，你打算从你的 crontab 运行这个 X 分钟吗？这似乎很合理。

唯一的主要问题（恕我直言）是丢弃 STDERR 信息`2>/dev/null`。当然，这取决于您对该系统的期望。如果这是针对付费客户或雇主的，您是否需要向老板解释，“天哪，我不知道过去 3 个月我收到错误消息‘无法连接到主机 X’，因为我们重定向了 STDERR到 /dev/null”！如果这是针对您自己的项目，并且您通过其他渠道监控工作，那么并不是那么糟糕，但为什么不将 STDERR 捕获到文件中，并检查是否没有错误。作为一个总体思路....

```
myStdErrLog=/tmp/myProject/myProg.stderr.$(/bin/date +%Y%m%d.%H%M)
wget -O $outputDir/check_status_update_index.txt ${statusCmd} 2> ${myStdErrLog}

if [[ ! -s ${myStdErrLog} ]] ; then
   mail -s "error on myProg" me@myself.org < ${myStdErrLog}
fi
rm ${myStdErrLog} 
```

根据 curl 在其 STDERR 输出中包含的内容，您可能需要过滤 StdErrLog 中的内容，以查看是否需要发送给您的“真实”错误消息。

一个中等问题是您使用反引号进行命令替换，如果您使用 dbl-sqr-brackets 进行评估，那么为什么不采用完整的 ksh93/bash 语义。使用反引号的唯一原因是，如果您认为您需要超向后兼容并且您将在 bourne shell（或者可能是像 dash 这样的精简 shell 之一）下运行此脚本。反引号在 ksh 中已被弃用至少从 1993 年开始。尝试

```
status=$(fgrep idle $outputDir/check_status_update_index.txt) 
```

命令替换的`$( ... )`形式使得嵌套多个 cmd 替换非常容易，即 `echo $(echo one $(echo two ) )`. （不好的例子，因为需要嵌套 cmd-sub 非常罕见，我现在想不出更好的例子）。

根据您的情况，但在大型生产环境中，新软件安装到版本编号目录中，您可能希望从变量构建路径，即

```
hostName=localhost
portNum=8080
SOLRPATH=/solr
SOLRCMD='delta-import&clean=false"
urlCmd='http://${hostName}:${portNum}${SOLRPATH}/dataimport?command=${SOLRCMD}" 
```

最后的小问题;-)。你确定`${status} == *idle*`做你想做的事吗？

尝试使用类似的东西

```
 case "${status}" in 
    *idle* ) .... ;; 
    * ) echo "unknown status = ${status} or similar" 1>&2 ;; 
 esac 
```

是的，您`if ... fi`当然可以，但是如果您想开始对放入`${status}`变量中的信息进行更精细的处理，那么`case ... esac`就是要走的路。

**编辑**

我同意@alinsoar 的观点，即单靠`2>/dev/null`一行将是无操作的。我认为这是一个格式问题，但在编辑模式下查看您的代码，我发现它似乎在自己的行上。如果您真的想丢弃 STDERR 消息，那么您需要`cmd ... 2>/dev/null`全部放在一行上，或者作为 alinsoar 的倡导者，shell 将在该行的前面接受重定向，但同样，全部放在一行上 ;-!。

IHTH

# objective-c - 如何保存 UICollectionViewCell 的状态

> ID：13431375
> 
> 赞同：3
> 
> 时间：2012-11-17T14:14:03.780
> 
> 标签：objective-c, ios, uiwebview, uicollectionview, uicollectionviewcell

请帮助我，我怎样才能保存`UICollectionViewCell`. 例如：我有单元格`UIWebView`，当我`dequeueReusableCellWithReuseIdentifier:forIndexPath:`返回错误的单元格时，不是为了这个`indexPath`，之后`UIWebView`内容将重新加载以正确`indexPath`抽搐。谢谢！

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    NewsCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"NEWS_CELL" forIndexPath:indexPath];

    if (!cell.isShowed) {  // I just added boolean property
        cell.isShowed = YES;

        /*** some init actions ***/
    }

    return cell;
} 
```

如果我使用此方法，则`cell.isShowed == YES`返回错误的单元格`indexPath`。但是，如果我不使用`cell.isShowed`UIWebView 的内容，将在每个显示单元格中重新加载对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:57:12.683

看看 Apple 的[UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)是怎么说的：

> 重要提示：您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。

但`UICollectionView`继承自`UIScrollView`. 所以你需要重新设计你的架构。

# codeigniter - 如何在 Codeigniter 中处理多个级别的子类别？

> ID：13431377
> 
> 赞同：1
> 
> 时间：2012-11-17T14:14:07.990
> 
> 标签：codeigniter, nested, categories

在 Codeigniter 中处理多级子类别的最聪明的解决方案是什么？我想为旅行社制作一个提供旅行优惠的网站，其结构将如下所示：

```
- Cat1
- Cat2
--- Subcat1
--- Subcat2
------ Subcat1
--------- Subcat1
--------- Subcat2
------------ Subcat1
------------ Subcat2
--------------- offer1
--------------- offer2
--------------- offer3
--------------- offerN
------------ Subcat3
--------- SubcatN
------ Subcat2
------ SubcatN
--- Subcat3
--- SubcatN
- Cat3
--- offer1
--- offer2
--- offer3
--- offerN
- CatN 
```

这是嵌套类别的示例。每个（子）类别都应该有：主图片、描述和子类别列表或报价列表。

我有一些想法用一个名为 Categories (ID, cat_name, parent) 的表来做到这一点，如果父类为 0，则它是顶级类别，如果父类是某个 int，则该值是父类的 ID ...

但我不知道如何用控制器解决路由问题？我知道如何仅使用 2 个级别（主要类别和子类别）来做到这一点，但它们是手动添加到路线中的。我不知道如何动态执行此操作，因此将来可以通过管理面板添加更多类别和子类别。

当然，我会有另一张桌子来提供我的报价，我知道，我对此没有任何问题。问题是控制器结构如何？

对于我目前只有 1 级子类别且没有动态添加子类别选项的项目，这就是我在 routes.php 中的内容

```
$route[‘cat1’] = “category”;
$route[‘cat1/(:any)’] = “category/subcategory”;

$route[‘cat2’] = “category”;
$route[‘cat2/(:any)’] = “category/subcategory”;

$route[‘cat3’] = “category”;
$route[‘cat3/(:any)’] = “category/subcategory”;

$route[‘cat4’] = “category”;
$route[‘cat4/(:any)’] = “category/subcategory”;

$route[‘cat5’] = “category”; 
```

换句话说， cat1,2,3,4,5 是类别的真实名称，并且 :any 代表它们的所有子类别，当访问者键入 example.com/pc_news 时，它会被重定向到名为 category 的控制器及其索引功能。如果他键入 example.com/pc_news/hardware，那么他将被重定向到控制器类别的方法子类别。

如果我想添加更多类别和子类别，我将在路线上手动执行此操作，但如果我想添加子子类别（example.com/pc_news/hardware/something），我不知道如何实现。

在我想做的新项目上，我会有类似的东西：

```
example.com/summer/turkey/airplane/alanya/hotels # and it will list all the offers
example.com/summer/turkey/airplane/alanya/apartments
example.com/summer/turkey/bus/kushadasi
example.com/winter/bus/france/hotels
example.com/winter/airplane/france/hotels 
```

有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:34:07.090

至于路由，我只会使用路由配置将所有内容发送到一个方法，您可以在该方法中实现您想要的任何逻辑，如果您仍然想在该控制器内部访问方法，您必须在“catch any”之前列出它们" 行是这样的：

### 配置/路由.php

```
$route['products/save/(.*)'] = 'products/save/$1';
$route['products/(.*)']      = 'products/index/$1'; 
```

完成此设置后，您将获得`Products::index`方法中的每个参数：

### 控制器/products.php

```
class Products extends CI_Controller {
    public function index() {
        $args = func_get_args();
        // now $args holds the url segments 
        $categories = array();
        foreach ($args as $cat_name) {
           $categories[] = $this->db
               ->from('categories')
               ->where('cat_name', $cat_name)
               ->get()
               ->row();
        }
    }
} 
```

至于存储类别，如果您只有`parent_id`in 行，您将不得不循环或使用一堆连接来获取每个类别。如果您只有 3-4 个级别，它可能不是真正的问题，也可能不会经常更改，因此可以轻松缓存。如果您想要更有效的解决方案，请查看[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)模型。

## 更新（我已经扩展了链接论坛中的问题）

您可以使用特殊[`404_override`](http://ellislab.com/codeigniter/user-guide/general/routing.html)键（在页面底部）使每个请求都转到特定控制器的`index`方法。 **不要忘记您需要在`Products`控制器内部处理 404 url​​！**：

### 配置/路由.php

```
$route['404_override'] = 'products'; 
```

可以扩展原始答案以执行此操作，将您不想发送到`Products`控制器的所有内容（基本上每个其他控制器的名称）列入白名单，并在最后有一条包罗万象的路线将其他人发送到`Products`控制器。404 url​​ 仍然需要处理。

### 配置/路由.php

```
// place any specific rules on top
$route['about'] = 'main/about';
// have whitelist existing controllers, make them go to their original place like it normaly would
$route['(controller1|controller2|controller3)(/?.*)'] = '$1$2';
$route['(:any)'] = 'products/index/$1'; // the last "catch all" row goes here 
```

# android - 关于 android.graphics.Camera 和 android.graphics.Matrix 的文档或教程？

> ID：13431381
> 
> 赞同：6
> 
> 时间：2012-11-17T14:14:25.987
> 
> 标签：android, 3d, matrix, camera, android-canvas

我知道这似乎**不是建设性**的或**离题的**问题。但我在谷歌搜索超过 40 或 50 次以找到关于[Camera](http://developer.android.com/reference/android/graphics/Camera.html) and [Matrix](http://developer.android.com/reference/android/graphics/Matrix.html)的好的文档或教程后提出这个问题。

我必须在 Android 中通过`Canvas`、`Camera`和`Matrix`不使用`Open GL`.

最后我找到了一些例子，但是他们对方法和它们之间的区别有一些描述。（[三星 Galaxy S2 上的触摸控制立方体](http://codentronix.com/2011/10/08/first-android-app-touch-controlled-cube-on-samsung-galaxy-s2/)或[制作自己的 3D 列表](http://developer.sonymobile.com/2010/05/31/android-tutorial-making-your-own-3d-list-part-2/)）。现在没有文件，每件事看起来都像魔术，我不能调试我的项目。

所以我在这里问了我的问题：
***你知道关于使用`Canvas`, `Camera`,`Matrix`进行 3D 动画的很好的教程或文档吗？***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T04:39:44.840

最后，几天后，我发现的最佳资源是：

[了解动画](http://www.satyakomatineni.com/akc/display?url=displaynoteimpurl&ownerUserId=satya&reportId=2898)

但它不是完整的资源。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T14:35:50.093

对于基础知识，您可以尝试[新的波士顿教程](http://thenewboston.org/list.php?cat=6)

# c# - servicestack.net OPTIONS 请求返回 404 是否重要？

> ID：13431385
> 
> 赞同：3
> 
> 时间：2012-11-17T14:14:47.053
> 
> 标签：c#, http, servicestack, cors

我正在使用[https://github.com/ServiceStack/ServiceStack/wiki/New-Api](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)中描述的方法来启用 CORS。这似乎有效，即我在响应中得到了正确的访问控制标头，但状态码是 404。这有关系吗？

为了完整起见，我宁愿返回一个非错误代码。阅读[http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)似乎我应该返回 200。最好的方法是什么？

服务方法定义是：-

```
 [EnableCors]
    public void Options(ApiKeyRequest apiKeyRequest)
    {
    } 
```

HTTP 请求是：-

```
OPTIONS http://myreallycoolwebapi/apikeyrequests HTTP/1.1
Host: myreallycoolwebapi
Connection: keep-alive
Access-Control-Request-Method: POST
Origin: http://localhost:8000
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Access-Control-Request-Headers: origin, content-type, accept
Accept: */*
Referer: http://localhost:8000/index.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

回应是：-

```
HTTP/1.1 404 Not Found
Server: nginx
Date: Sat, 17 Nov 2012 18:06:01 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 3
Connection: keep-alive
Cache-Control: private
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type

404 
```

### 更新 1

这是我的资源类型。

```
[Route("/apikeyrequests", "POST")]
public class ApiKeyRequest : IReturn<ApiKeyRequest>
{
    public string EmailAddress { get; set; }
} 
```

POST 请求工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:34:14.507

我仍然没有看到任何符合预期路线的东西`/apikeyrequests`。

您是否有自定义路由定义，例如：

```
[Route("/apikeyrequests")]
public class ApiKeyRequest {} 
```

为请求添加？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T03:44:45.047

CORS 规范本身明确指出非 200 的预检响应是一个错误。请参阅此处的“如果响应的 HTTP 状态代码不是 200”部分：

[http://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0](http://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0)

我不知道这个要求的动机是什么。也许是因为 404 可能会导致端点是否实际存在的混淆。

# struts2 - 启动时 XWork 类加载错误 - 无法读取类 [WEB-INF

> ID：13431386
> 
> 赞同：0
> 
> 时间：2012-11-17T14:14:53.287
> 
> 标签：struts2, xwork

在 Struts2 应用程序中，即使功能没有问题，我也会看到此错误。但是我看到执行每个操作都有一些延迟。此延迟对于返回带有搜索框的 JSP 页面的简单操作有效。我正在使用 Struts 2.3.1.1 和 xwork-core-2.3.1.1。

```
ERROR finder.ClassFinder: Unable to read class [WEB-INF.classes.com.***.***.ConfigManagement]
Could not load WEB-INF/classes/com/***/***/ConfigManagement.class - [unknown location]
at com.opensymphony.xwork2.util.finder.ClassFinder.readClassDef(ClassFinder.java:785) 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:12:03.790

最新的 Struts (2.3.12) 更新以及相关的库文件解决了这个问题。我应该错过以前版本的 Struts 中的一些库。

# java - 最终字符串与最终整数

> ID：13431388
> 
> 赞同：4
> 
> 时间：2012-11-17T14:15:41.637
> 
> 标签：java

我的java类

```
private static final String constantString = "Constant";    
private static final Integer constantInteger = 5;
public static void main(String[] args) {
    String s2 = constantString + "append"; // LINENUMBER 9
    Integer i2 = constantInteger + 7; // LINENUMBER 10
} 
```

字节码

```
 LINENUMBER 9 L0
    LDC "Constantappend"
    ASTORE 1
   L1
    LINENUMBER 10 L1
    GETSTATIC TestClass.constantInteger : Ljava/lang/Integer;
    INVOKEVIRTUAL java/lang/Integer.intValue()I
    BIPUSH 7
    IADD 
```

**问题 1：为什么编译器没有用 5 替换最终的 Integer (constantInteger) 值，但对于 String 却做到了！**

如果删除整数变量的最终关键字

爪哇代码：

```
private static Integer constantInteger = 5; 
```

字节码：

```
LINENUMBER 10 L1
GETSTATIC TestClass.constantInteger : Ljava/lang/Integer;
INVOKEVIRTUAL java/lang/Integer.intValue()I
BIPUSH 7 
```

**字节码在两种不同的情况下是相同的（静态最终整数，静态整数）**

**问题2：那么将Integer设为final有什么用？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T14:23:13.593

推测：原因是字符串实习。编译器对字符串进行实习，并对实习字符串的连接进行了优化。但它不实习数字，显然缺乏优化。

我想不出它不能优化 Integer 情况的任何原因，除了它只是没有在编译器中实现。如其他答案所述，Integer + 涉及装箱/拆箱操作，与 string + 及其隐式 StringBuilder 优化和实习逻辑完全不同。因此，如果从编译器实现的角度来看，String + 优化可能是“免费”的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T14:20:25.750

编译器不会注意到具有非空值的最终 Integer 必然是非空的。所以它继续并拆箱。JIT 编译器完全有可能在生成机器代码的过程中改进这一点；无论哪种方式，这似乎都不太可能对您的应用程序的性能造成真正的问题。

'final' 是关于语义，而不是性能。语言保证语义；性能完全取决于实施者的心血来潮。因此，要明确回答“问题 #2”：final 的重点是具有防止修改的语义。还要注意嵌入式匿名类的规则，它们只能使用最终局部变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T14:17:56.860

简短的回答：试试`static final int constantInteger = 5`

编译器只能替换常量表达式。Java 有所谓的原始值，即以小写字符开头的类型（long、int、char、...）。这些值不是对象，因此它们不能有状态并且可以直接替换。

作为**优化**String*对象*也可以被编译器视为常量。在运行时，String 只是一个包含字符数组的容器，但在编译时，编译器会假装 String 只是字符数据。但是，`String`是唯一发生此异常的类。

出于类似的原因，您可以使用`String`and `Class`，但不能使用其他对象类型作为注释中的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T14:32:21.863

来自[Java 语言规范 v3](http://docs.oracle.com/javase/specs/jls/se5.0/jls3.pdf)：

> 由常量表达式（第 15.28 节）计算的字符串在编译时计算，然后将其视为文字。

您的字符串表达式由两个文字组成，在编译时被计算为单个文字。整数没有这样的处理。

# c# - 从 Web 服务或数据库获取数据的 Web 门户 - 体系结构模式

> ID：13431390
> 
> 赞同：2
> 
> 时间：2012-11-17T14:15:55.960
> 
> 标签：c#, asp.net-mvc-3, asp.net-web-api, n-tier-architecture

我正在研究当前基于以下架构构建的项目：

1）第一个解决方案

*   具有基于 Entity Framework 5 的所有数据库逻辑 (DAL) 的项目
*   WebAPI 项目负责向客户门户网站和智能手机应用程序提供数据

2）第二种解决方案

*   用作客户 Web 门户的 MVC4 项目

客户 Web 门户和 WebAPI 位于同一台服务器上。WebAPI 直接访问数据库，而客户门户网站通过 WebAPI 访问它。选择此架构的原因是为了缩短开发时间，因为 Web Portal 和智能手机应用程序调用了 85% 的相同 Web 服务。但是，我非常担心这是多么好的性能架构。我认为客户门户网站应该直接访问数据库，这将是更有效的方式。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:08:22.590

架构总是很棘手，它总是在开发速度、可维护性、性能和可扩展性等不同因素之间进行折衷。所以，你需要权衡所有的利弊。

### 通过 WebAPI 访问数据库

1\. 肯定会在性能上引入一些开销。但是多少钱？假设通过额外的包装器 (WebAPI) 传递您的调用，每次调用将花费您大约 2-3 额外毫秒，以及大约 200MB 的额外 RAM。我认为，这不是一个真正的问题，但您会更好地了解所有细节，这取决于您。

2\. 该解决方案可以从使用缓存中获得一些好处。如果将 IIS 配置为缓存对 WebAPI 的请求，那么：WebAPI 客户端和门户都会提高性能。

### 直接通过 DAL 访问数据库

1\. 从理论上讲，您正在为您的数据库引入两个需要处理的入口点。如果您需要添加一些逻辑，WebAPI 客户端和您的门户必须使用这些逻辑，并且该逻辑是特定于 Web 的（例如，与用户会话相关的内容），该怎么办？您不应该将其添加到 DAL，而是需要添加具有另一个库的另一个层，这将被两者使用：WebAPI 和您的门户。如果您唯一的访问点是 WebAPI，那么您可以只修改 WebAPI 以获得结果。

### 总结一下：

这些只是一些优点和缺点。但是，如果您的项目不是很大，如果它不打算承受很高的负载，那么我会考虑的唯一因素是开发成本。如果使用 WebAPI 作为单个入口点更快，那么就使用它。

# c# - LINQ to SQL(.dbml)：ExecuteQuery 方法如何返回 DataTable？

> ID：13431392
> 
> 赞同：3
> 
> 时间：2012-11-17T14:16:21.900
> 
> 标签：c#, linq, linq-to-sql, datatable, executequery

```
var products = db.ExecuteQuery<Product>(
  "SELECT ProductID, ProductName " +
  "FROM Products " +
  "WHERE Discontinued = 0 " +
  "ORDER BY ProductName;"
); 
```

上面的查询工作正常，但有什么方法可以`db.ExecuteQuery<Product>`返回`DataTable Product`

而不是`var products`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:27:46.587

你不应该这样做。为什么还要用 LINQ-To-SQL 来打扰自己，而只使用普通的 ADO 方法来获取普通的数据表对象。这不是 LINQ-to-SQL 的用途。你应该从对象的角度来思考。

但是，如果您需要以任何方式执行此操作：`ExecuteQuery`returns:a collection of `IEnumerable<T>`. 然后，您可以将此列表转换为数据表。您可以使用以下函数将其转换为数据表：

*   [**将 List/IEnumerable 转换为 DataTable/DataView**](http://www.chinhdo.com/20090402/convert-list-to-datatable/)

# windows-8 - 在 WinRT 中强制重新应用 ItemTemplateSelector

> ID：13431397
> 
> 赞同：1
> 
> 时间：2012-11-17T14:16:58.057
> 
> 标签：windows-8, winrt-xaml

我有一个 GridView 作为 SemanticZoom 控件中的缩小视图。此 GridView 使用自定义 DataTemplateSelector 作为 ItemTemplateSelector。它为我的应用显示的每个内容组显示一个项目。

模板根据组是否为空而有所不同。这在加载时可以正常工作，但是当组变空或停止为空时它不会更新。

我发现 ItemTemplateSelector 仅在页面首次显示时运行。如何强制 DataTemplateSelector 再次运行。

有关此主题的 WPF 问题都建议使用触发器，但这些在 WinRT XAML 中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:27:11.853

我找到了一个类似 WPF 问题的答案，它以在 WinRT 中有效的方式回答了这个问题：

[https://stackoverflow.com/a/11327087/31569](https://stackoverflow.com/a/11327087/31569)

基本上，您将 ItemTemplateSelector 设置为 null，然后再次设置。像这样：

```
var templateSelector = MyGroupView.ItemTemplateSelector;
MyGroupView.ItemTemplateSelector = null;
MyGroupView.ItemTemplateSelector = templateSelector; 
```

这可行，但很高兴被告知是否有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T00:38:57.827

我发现从集合中删除需要更新的项目并将其添加回来更容易。这会强制 GridView 或 ListView 应用模板。这在 MVVM 世界中很容易做到。

```
var itemToReload; //The object who's template needs updating
var reloadIndex  = this.SomeCollection.IndexOf(itemToReload);

this.SomeCollection.Remove(itemToReload);
this.SomeCollection.Insert(reloadIndex, itemToReload); 
```

需要注意的一点是，如果该项目是“已选择”项目，则您需要重新应用该选择。

# c++ - 如何使用 OpenCV 中可用的压缩算法？

> ID：13431398
> 
> 赞同：5
> 
> 时间：2012-11-17T14:16:58.470
> 
> 标签：c++, c, opencv, particle-filter

我需要使用压缩算法和 OpenCV 库来实现一个软件来跟踪图像流中的移动对象。我读过 OpenCV 包含该算法的实现，但我没有找到解释如何使用 OpenCV 中可用的相应功能的示例或教程。

该[`cvCreateConDensation`](http://opencv.willowgarage.com/documentation/c/motion_analysis_and_object_tracking.html#createcondensation)函数分配[`CvConDensation`](http://opencv.willowgarage.com/documentation/c/motion_analysis_and_object_tracking.html#cvcondensation)结构并需要状态向量的维度 ( **`dynam_params`**)、测量向量的维度 ( **`measure_params`**) 和样本数 ( **`sample_count`**)。

*   状态向量的维度应该是指物体的状态：例如，如果状态可以是被跟踪物体的中心点，那么状态向量应该包含物体中心的两个坐标，所以在这种情况下，状态向量应该是 2；以类似的方式，如果一个对象的状态是由属于其形状的***S个点形成的，那么我将指定******2*S***作为`dynam_params`值（即坐标数等于***2*S***）。它是否正确？
*   样本数是粒子数，因此`sample_count`必须将参数设置为用于跟踪对象的粒子数。
*   测量向量的维数如何？参数的目的是`measure_params`什么？

该[`cvConDensInitSampleSet`](http://opencv.willowgarage.com/documentation/c/motion_analysis_and_object_tracking.html#cvConDensInitSampleSet)函数为浓缩算法初始化样本集。哪个规则用于初始化样本集？哪个分布用于初始化样本集？给定待跟踪物体的起始位置和边界框，这个函数如何初始化样本集？

执行算法的完整交互（*选择*、*预测*和*测量*）的函数是什么？样本如何更新？

是否有任何教程详细解释了如何使用 OpenCV 中可用的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T10:01:31.210

在 opencv 和 ross（同一作者）的问答中可以找到凝聚算法的工作示例：

[http://answers.ros.org/question/55316/using-the-opencv-particle-filter-condensation/](http://answers.ros.org/question/55316/using-the-opencv-particle-filter-condensation/)

和

[http://answers.opencv.org/question/6985/syntax-for-particle-filter-in-opencv-243/](http://answers.opencv.org/question/6985/syntax-for-particle-filter-in-opencv-243/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:49:56.743

[这](http://blogs.oregonstate.edu/hess/code/particles/)是粒子过滤器的另一种实现，使用了 OpenCV 和 GSL 库。作者提供的源代码通俗易懂。也许你可以从中学到一些东西。

# extjs - extjs 在数据视图中将图像浮动到另一个图像上方

> ID：13431400
> 
> 赞同：0
> 
> 时间：2012-11-17T14:17:23.223
> 
> 标签：extjs, dataview

我正在 extjs 中进行预览，我需要`DataView`根据在另一个中单击的图像将图像浮动到图像上方`DataView`。图像分层。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:56:05.620

我认为您可以通过操纵单个图像的 zIndex 来实现这一点...这是一个 CSS 解决方案...您想要的上面的图像的 zIndex 应该高于下面的图像，首先隐藏除最下面的图像之外的所有图像，然后根据需要依次显示其他图像...希望对您有所帮助...

# c - C - fgets() - 换行符的长度

> ID：13431406
> 
> 赞同：2
> 
> 时间：2012-11-17T14:18:10.590
> 
> 标签：c, char, newline, fgets

我正在尝试阅读 1 行，但我不确定换行符是如何表示的。通过 fgets() 从文件中读取它时，我应该将其视为 2 个字符还是 1 个字符？例如，我在文件中有一行 15 个字符 + 新行。那么我应该如何安全地分配字符串并读取该行？

起初，我试过这个：

```
char buf[16];
fgets(buf, 16, f); 
```

它在没有换行符的情况下正确读取该行，我假设 buf[15] 包含空字符。

但是，当我想读取和存储换行符时，它并没有像我想象的那样工作。据我所知，'\n' 应该被视为一个字符并且只占用一个字节，所以要读取它，我只需要再读取一个字符。

但是当我尝试这个时

```
char buf[17];
fgets(buf, 17, f); 
```

它与前面的示例完全一样 - 现在我的字符串中存储了换行符（我不确定在这种情况下 null char 存储在哪里）

要使用换行符阅读整行，我需要这样做

```
char buf[18];
fgets(buf, 18, f); 
```

或者这个（它有效，但我不确定它是否安全）

```
char buf[17];
fgets(buf, 18, f); 
```

所以问题是，当行只有 15 个字符 + 换行符时，为什么我需要分配和读取 18 个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:25:54.920

您需要为 15 个字符的文本提供缓冲区空间，最多为新行提供 2 个字符（以处理 Windows 行终止`\r\n`），以及为空终止提供更多字符。所以是18。

就像你在这里做的那样：

```
char buf[18]; fgets(buf, 18, f); 
```

`num`参数`fgets`告诉调用它正在写入的缓冲区的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:32:02.613

> 我正在尝试阅读 1 行，但我不确定换行符是如何表示的。

在文本模式下，换行符是 '\n' 并且在任何符合 C 的实现中都是如此，除了文本模式流之外，我不会在任何东西上使用 fgets（我不知道 - 我不想知道 -它如何在使用 \r 作为行尾标记的实现中以二进制模式工作，或者更糟糕的是使用带外行尾标记，我不会感到惊讶它会寻找 \n 并且永远找不到因此尝试阅读直到文件结束）。

您应该为最大行长度分配空间，包括换行符加上终止的 NUL，更重要的是，您决不能在缓冲区长度上撒谎。您可以检查缓冲区是否足够长，因为如果不是，则不会出现换行符。

# prolog - 如何获取可能的谓词值列表

> ID：13431407
> 
> 赞同：2
> 
> 时间：2012-11-17T14:18:16.207
> 
> 标签：prolog

让我`p/1`定义一个谓词，例如，如下所示：

```
p(2).
p(3).
p(5).
p(7). 
```

如何定义一个谓词，该谓词对于回溯顺序中（在上述情况下 - ）`p_list/1`的所有可能值的列表是正确的？`p/1``[2, 3, 5, 7]`

简单枚举值是不可接受的，因为它使维护更加困难。此外，可以隐式定义值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:33:25.043

你可以使用`bagof(X, p(X), L)`它给你 L = [2,3,5,7]。“隐式定义”是什么意思？能给我举个例子吗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T18:45:11.467

[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) /2 适用于检查，而[findall](http://www.swi-prolog.org/pldoc/doc_for?object=findall/3) /3 它是 Prolog 中的基本列表构造函数

尝试

```
?- findall(X, p(X), L), maplist(p, L). 
```

# handlebars.js - 如何在不使用 $.ajax 的情况下编译外部车把模板

> ID：13431408
> 
> 赞同：2
> 
> 时间：2012-11-17T14:18:29.253
> 
> 标签：handlebars.js

我在一个非常简单的 Web 应用程序中有 2 个文件

第一个是标准的 index.html，它看起来像下面

```
<body>
<div id="add-stuff"></div>
<script id="the-template" type="text/x-handlebars-template" src="some-template.erb.html"></script>
<script type="text/javascript">
  var data = [];
  var source = $("#the-template").html();
  var template = Handlebars.compile(source);
  $('#add-stuff').html(template(data));
</script>
</body> 
```

第二个是我的车把模板“some-template.erb.html”，它看起来像下面

```
<table>
{{#each item}}
<tr><td>{{ item.name }}</td></tr>
{{/each}
</table> 
```

我上面的内联 javascript 的问题是，当我尝试“.html()”部分时，它总是返回一个空字符串（因为我在 erb.html 文件中链接）。

我找到了一种解决方法，如果我使用 $.ajax 来拉入模板，我可以实现这一点，但我更喜欢上面的东西（所以我可以包含模板客户端而不包含任何嵌套的 jQuery 回调） .

这可能吗？如果不是，我能做些什么来改进基于 $.ajax 的方法？

** 有效的基于 ajax 的方法如下所示 **

```
<body>
<div id="add-stuff"></div>
<script type="text/javascript">
$.ajax({
  url: 'some-template.erb.html',
  cache: true,
  success: function (source) {
    var data = [];
    var template = Handlebars.compile(source);
    $('#add-stuff').html(template(data));
  }
});
</script>
</body> 
```

[这](https://stackoverflow.com/questions/13075132/loading-handlebars-js-template-from-external-html-file-shows-nothing/13075301)是一个指向 stackoverflow 问题的链接，它更详细地显示了 $.ajax 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-31T12:07:05.433

也许它已经过时了，但我今天发现了你的问题，我对你或正在处理同样问题的人有一个建议。它不是一个完美的，但对于小型模板，如果您不想使用 ajax，则可以选择。

您如何看待将模板作为字符串写入外部 JS 文件的变量中并通过脚本标签包含它？

模板.js

```
var source = '<table>\
          {{#each item}}\
          <tr><td>{{ item.name }}</td></tr>\
          {{/each}'; 
```

索引.html

```
<body>
<div id="add-stuff"></div>
<script src="template.js"></script>
<script type="text/javascript">
  var data = [];
  var template = Handlebars.compile(source);
  $('#add-stuff').html(template(data));
</script>
</body> 
```

# debugging - Monodevelop 中的应用程序输出为空白

> ID：13431409
> 
> 赞同：0
> 
> 时间：2012-11-17T14:18:42.880
> 
> 标签：debugging, monodevelop

我的调试信息在 monodevelop 中消失了。

调试被选中。

“发出调试信息”已打开。

应用程序输出为空:(

我试过 console.writeline、debug.writeline 和 trace.writeline。

这使得调试非常困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-07T18:47:36.467

上球有点晚了。但也许它可以帮助别人。

为了让你的输出到应用程序输出窗口，你需要在你的启动项目>选项>运行>常规>配置>“配置名称”的右键单击下取消选中“在外部控制台上运行”。

# javascript - 将 Javascript 1.7+ 转换为 Javascript 1.6

> ID：13431411
> 
> 赞同：4
> 
> 时间：2012-11-17T14:19:00.540
> 
> 标签：javascript, generator

是否有任何转换器或技术可用于将具有新语言功能的 Javascript 1.7 代码转换为 Javascript 1.6？

我对迭代器生成器和`yield`关键字最感兴趣。我使用的脚本引擎只有 1.6，但迭代器生成器会生成更好的代码。手写似乎很复杂。

我试过用 C# 编写它，用 ILSpy 反编译，然后手动将它移植*到*Javascript。但那真是一团糟。

我已经搜索过这样的转换器，但我什么也没找到 - 可能是由于在这种情况下搜索词与不相关的结果共享。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T15:09:03.070

我想我已经为你找到了解决方案。查看 Traceur。它是一个 ES6 转译器，即将 ES6 代码（以及所有即将推出的 ES6 内容，如生成器、类、模块等`yield`）转换为当今 JS 引擎能够解释的 ES5 代码。

在这里查看：[https ://github.com/google/traceur-compiler/](https://github.com/google/traceur-compiler/)

语言功能页面：[https ://github.com/google/traceur-compiler/wiki/LanguageFeatures](https://github.com/google/traceur-compiler/wiki/LanguageFeatures)

请注意 Mozilla 添加到 JavaScript 1.7+ 的大部分内容如何在即将发布的 ECMAScript 标准第 6 版中标准化。当前版本是第 5 版，其中已经包含了一些内容（例如数组迭代方法、对象可扩展性 API）。

# crystal-reports - 如何解决水晶报表页眉无法导出到excel

> ID：13431413
> 
> 赞同：2
> 
> 时间：2012-11-17T14:19:00.820
> 
> 标签：crystal-reports

我使用公式在水晶报告的最后一页中抑制了页眉。它在打印报告时工作正常。但是当我尝试将其导出为 MS Excel 97-2000（仅限数据）时，页眉不会导出（显示）到 excel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:03:37.587

这可能是因为您试图将其导出为`MS Excel 97-2000(Data only)`.

相反，请尝试将其导出为`MS Excel 97-2000`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:21:27.393

您可以尝试使抑制公式更明确。而不是只检查它是否是最后一页，还要检查它是否是第一页。

# c++ - 堆数据搞砸了

> ID：13431418
> 
> 赞同：4
> 
> 时间：2012-11-17T14:19:30.583
> 
> 标签：c++, pointers, memory, heap-memory

通过阅读别人的问题，我幸运地在这里找到了很多有用的答案，但这一次我完全无能为力，所以我不得不自己提出一个问题：

我尝试创建一个将卷积应用于数据系列的程序。对于具有不同长度的卷积核（=特定数字的数组）是必需的。

我通过使用 a`float**`并在两次取消引用的变量处插入值来实现这一点。数组的数量是固定的，每个数组的长度不是固定的，所以“子数组”是通过使用`new`-in function `CreateKernels`after分配的`if`。

然后，此函数将其`float**`与另一个捆绑为 main 结构的指针一起返回。

**现在问题来了：** 我用调试手表查看了内核指针的取消引用值。一切正常，所有数字在`CreateKernels`返回后都符合预期（即从范围内查看内存`main`）。但是在`main`我的数字中的下一个命令完全搞砸之后。如果我尝试在后续代码中使用数据，则会出现段错误。

**所以我目前的推理是：** 当我`new`用来创建变量时，它们应该在堆中，并且应该一直留在那里，直到我创建变量为止`free[]`——无论如何，它们不应该被限制在`CreateKernels`. 分配指向内核结构的指针并返回它对你们中的一些人来说可能很奇怪，但它确实有效。所以真正弄乱我的数据的是`CreatKernels`. 初始化一个`int`而不是创建一个`fstream`不会弄乱我的数字。但为什么？

这是我的操作系统内存管理出错了吗？或者这是一个愚蠢的编程错误？我正在运行 Ubuntu 12.04-64bit 并同时使用`Code::Blocks`和`g++`进行编译（所有默认设置），两个可执行文件都给我一个段错误。

我非常感谢有关此问题的任何提示或经验！

这是相关代码：

```
#include <string>
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <iomanip>
#define HW width/2
#define width1 4       // kernel width-1 (without peak)

using namespace std;

struct kernel_S
{
    const float ** ppkernel;
    const float * pnorm;
};

void BaseKernel(const int & width, float * base) // function that fills up an 1d-array of floats at the location of base
{
    for(int i=0; i<=HW-1; i++)      // fill left half as triangle
    {
        base[i] = i+1;
     }
    base[HW] = HW+1;          // add peak value
    for(int i=HW+1; i<=width; i++)   // fill right half as decreasing triangle
    {
        base[i] = width-i+1;
    }
}

kernel_S CreateKernels(const int &width) // function that creates an array of arrays (of variable length)
{
float base_kernel[width+1];    // create a full width kernel as basis
BaseKernel(width, base_kernel);

float * kernel[width+1];       // array of pointers, at each destination of a pointer a kernels is stored
float norm[width+1];           // norm of kernel

for(int j=0; j<=width; j++)    // fill up those individual kernels
{
    norm[j] = 0;
    if(j<=HW)                   // left side up to peak
    {
        kernel[j] = new float[HW+j+1]; // allocate mem to a new array to store a sub-kernel in
        for(int i=0; i<=HW+j; i++)
        {
            *(kernel[j]+i) = base_kernel[HW-j+i];  //use values from base kernel
            norm[j] += base_kernel[HW-j+i];        // update norm
        }
    }
    else if(j>=HW+1)
    {
        kernel[j] = new float[HW+width-j+2];
        for(int i=0; i<=HW+width-j; i++)
        {
            *(kernel[j]+i) = base_kernel[i];
            norm[j] += base_kernel[i]; // update norm
        }
    }
}

kernel_S result;                // create the kernel structure to be returned
result.ppkernel = (const float **) kernel;  // set the address in the structure to the address of the generated arrays
result.pnorm    = (const float *) norm; // do the same for the norm
return result;
}

int main()
{
    kernel_S kernels = CreateKernels(width1);            // Create struct of pointers to kernel data
    ifstream name_list(FILEPATH"name_list.txt", ios::in);// THIS MESSES UP THE KERNEL DATA

    // some code that would like to use kernels

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:29:23.913

请参见

[如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

您返回指向本地堆栈数据（内核和规范）的指针。您应该动态分配：

```
float ** kernel = new float*[width+1];       // array of pointers, at each destination of a pointer a kernels is stored
float *norm = new float[width+1];           // norm of kernel 
```

记得用 delete[] 删除。

但是，我建议改用 std::vector 或 std::array

```
#include <string>
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <iomanip>
#include <vector>
#define HW width/2
#define width1 4       // kernel width-1 (without peak)

using namespace std;

typedef std::vector<float> floatV;
typedef std::vector<floatV> floatVV;

struct kernel_S
{
    floatVV kernel;
    floatV  norm;
};

floatV BaseKernel(int width)       // function that fills up an 1d-array of floats at the location of base
{
    floatV base;
    base.resize(width + 1);
    for(int i=0; i<=HW-1; i++)     // fill left half as triangle
    {
        base[i] = i+1;
    }
    base[HW] = HW+1;               // add peak value
    for(int i=HW+1; i<=width; i++) // fill right half as decreasing triangle
    {
        base[i] = width-i+1;
    }
    return base;
}

kernel_S CreateKernels(const int &width)                   // function that creates an array of arrays (of variable length)
{
    const floatV base_kernel = BaseKernel(width);          // create a full width kernel as basis

    kernel_S result;                                       // create the kernel structure to be returned
    result.kernel.resize(base_kernel.size());
    result.norm.resize(base_kernel.size());

    for(int j=0; j<=width; j++)                            // fill up those individual kernels
    {
        result.norm[j] = 0;
        if(j<=HW)                                          // left side up to peak
        {
            result.kernel[j].resize(HW+j+1);               // allocate mem to a new array to store a sub-kernel in
            for(int i=0; i<=HW+j; i++)
            {
                result.kernel[j][i] = base_kernel[HW-j+i]; // use values from base kernel
                result.norm[j] += base_kernel[HW-j+i];     // update norm
            }
        }
        else if(j>=HW+1)
        {
            result.kernel[j].resize(HW+width-j+2);
            for(int i=0; i<=HW+width-j; i++)
            {
                result.kernel[j][i] = base_kernel[i];
                result.norm[j] += base_kernel[i];          // update norm
            }
        }
    }
    return result;
}

int main()
{
    kernel_S kernels = CreateKernels(width1);     // Create struct of pointers to kernel data
    ifstream name_list("name_list.txt", ios::in);

    // some code that would like to use kernels

    return 0;
} 
```

**注意**如果你想要`kernel`并且在结果结构中，只需将整个结构设为 const `norm`：`const`

```
 const kernel_S kernels = CreateKernels(width1); 
```

# c++ - 在包含文件名中使用项目目录

> ID：13431419
> 
> 赞同：4
> 
> 时间：2012-11-17T14:19:46.370
> 
> 标签：c++, c, include

我正在开发 C++ 头文件库，我们称之为*PROJ*。当一个库头包含另一个时，它使用：

```
#include <proj/foo.h> 
```

并且编译器（gcc 和 clang）有`-I path-to-proj-parent`. 图书馆的用户在他们的包含搜索路径中也应该有*PROJ*的父级。

我使用此方案的合理性是，将此库安装到`proj`默认可搜索父级（`/usr/include/proj`或`/usr/local/include/proj`）的子目录后，库用户无需指定`-I`选项。

这个方案有缺点吗？使用`<foo.h>`不带`proj/`前缀是更传统和推荐的方式吗？

问题不在于是否安装在子目录中（会有`proj`子目录），而是如何引用包含文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T18:44:00.750

如果您查看 boost，您会注意到它们使用了类似的方案：

```
#include <boost/shared_ptr.hpp> 
```

它具有防止与来自另一个依赖项的另一个类似名称的文件发生冲突的优点。

然而，在提升的情况下，他们更进一步。如果您包含`<x/y/z.hpp>`，那么您可能正在处理一个名为的实体`::x::y::z`（无论是函数还是类）。也就是说，项目中目录的布局方式模仿了命名空间组织。定位自己真的很整洁。

通常，大多数项目都隐藏在子目录（和子命名空间）中，但为了方便起见，最常用的项目被拉入`boost`命名空间，因此它们的标题直接位于`boost`文件夹中。还有一些方便的标头（其工作只是收集少量其他标头以一次将它们全部拉入）。

最后你可能会注意到，如果你打开一个头文件，它们使用的包含保护遵循[完全相同的层次结构](http://www.boost.org/doc/libs/1_52_0/boost/shared_ptr.hpp)：

```
#ifndef BOOST_SHARED_PTR_HPP_INCLUDED 
```

再一次，因为它有助于避免冲突，因为它是以它所在的文件命名的，并且在整个 Boost 项目的那个地方只能有一个（在区分大小写的文件系统上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:23:44.977

如果在安装时创建 proj 目录，则路径中有**proj是可以的。**事实上，它是防止与其他包含文件发生名称冲突的好方法。

不过，名称不应该是像“proj”这样的通用名称。它应该特定于项目。

# c - 对这个 c 函数 copyString,concatString 有什么更好的建议

> ID：13431425
> 
> 赞同：2
> 
> 时间：2012-11-17T14:21:04.703
> 
> 标签：c

我被要求制作 2 个函数 copyString 和 concatString 我做了并实现了它们，但是在我得到的输出中我被告知它可以做得更好，但从来没有解释过如何做。
现在它正在杀死我我能做的更好所以这里是代码，我很乐意听到任何建议。

```
void copyString (char **strDst, const char *strSrc)
{
     char *strTmp = NULL;
     int length = strlen (src);
     if (*strDst== NULL) 
     {
        *strDst= malloc (length);   
     }
     else 
     {  
         if (strlen(*strDst) != length)
         {
             strTmp = *strDst;
         }
         *strDst= malloc (length);  
     }
     strcpy (*strDst, strSrc);  
     if (strTmp != NULL)    
         free (strTmp );    
 }

void concatString (char **strDst, const char *cat)
{
     int cat_length = strlen (cat);
     if (cat_length > 0) 
     {  
         *strDst= realloc (*strDst, strlen (*strDst) + cat_length); 
          strcat (*strDst, cat);
     }
}

void main(int argc, char *argv[])
{
    char *str = NULL;
    copyString(&str, "Hello World");
    puts(str);
    copyString(&str,str+6);
    puts(str);
    concatString(&str, " Pesron");
} 
```

输出应如下所示：
1.Hello World
2\. World
3\. World Person

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:26:15.623

### 错误：

`strlen`返回*不包括*nul 终止符的长度，因此您分配的所有大小都太小。

在 where`if (strlen(*strDst) != length)`为 false 的情况下（即长度相等），您会泄漏旧缓冲区。

`realloc`并且`malloc`都可能失败，您应该能够编写代码来应对这种情况。

正确的使用方法`realloc`是：

```
char *newbuf = realloc(oldbuf, newsize);
if (newbuf == NULL) {
    // handle the error somehow, and note that oldbuf is still allocated
} else {
    oldbuf = newbuf;
} 
```

“以某种方式处理错误”可能需要决定做什么，这取决于你的两个函数的文档说它们在失败时会做什么。如果它没有说，那么它应该。

(Picky)`int`不能保证是足够大的类型来容纳字符串的长度。使用`size_t`（除非你被严格禁止使用无符号类型，在这种情况下有`ssize_t`）。

### 你可以改进的地方：

无需使用`strTmp`您的方式，您可以立即释放字符串，而不是在函数末尾。[编辑：是的，有必要，似乎有一个要求，`copyString`但不`concatString`应该允许源和目的地重叠。就个人而言，我仍然会稍微不同地写它。]

在`if (strTmp != NULL) free (strTmp );`测试中是多余的，因为`free`使用空指针调用是有效的，这样做没有任何效果。

你`*strDst= malloc (length);`在这两种情况下都在`copyString`.

`main`泄漏内存，因为它从不释放`str`。

`main`应该返回`int`，不是`void`。

### 以下是我可能会如何写它们：

由于您无法更改调用代码以使其检查错误，因此您必须在其中`abort()`编写可以调用的*内容*`puts`。由于该`main`函数是在假设调用不会失败的情况下编写的，`abort()`因此可能是最不坏的解决方案。

如果函数返回一个指示成功或失败的值，调用者可能会更好，但我们受到现有调用代码的限制。老实说，这并不是一个完全不切实际的情况来编程......

```
void concatString (char **strDst, const char *cat) {
    size_t dstlen = *strDst ? strlen(*strDst) : 0;
    char *buf = realloc(*strDst, dstlen + strlen(cat) + 1);
    if (!buf) {
        abort();
    }
    strcpy(buf + dstlen, cat);
    *strDst = buf;
}

void copyString (char **strDst, const char *strSrc) {
    char *buf = malloc(strlen(strSrc) + 1);
    if (!buf) {
        abort();
    }
    strcpy(buf, strSrc);
    free(*strDst);
    *strDst = buf;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:31:43.760

除了*史蒂夫杰索普*在他的回答中提到的内容之外，您的资料中没有错误，但遗漏了：

*   输入参数的验证
*   通过错误值返回错误（例如作为函数的整数返回码，而不是`void`

# php - 使用php querypath删除html字符串顶部和底部的空标签

> ID：13431427
> 
> 赞同：1
> 
> 时间：2012-11-17T14:21:21.047
> 
> 标签：php, html-parsing, querypath

我正在使用 php Querypath，我正在尝试从 html 字符串中删除所有出现在 html 顶部和底部的空标记。例如：

```
 <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>I want remove empty div tag on top and bottom</div>
      <div>&nbsp;</div>
      <div>other content</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div> 
```

使用 php querypath 我想更改为：

```
 <div>I want remove empty div tag on top and bottom</div>
      <div>&nbsp;</div>
      <div>other content</div> 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:29:08.927

使用替换字符串将 div 替换为空白。

```
str_replace(find,replace,from); 
```

因此，您可以使用`<div>&nbsp;</div>`in find 并将其替换`""`为您的代码。

# java - 从类到类获取字符串

> ID：13431430
> 
> 赞同：-2
> 
> 时间：2012-11-17T14:22:02.853
> 
> 标签：java

我有类 m1，里面有 new m2().execute(); 新 m3().execute();

所以

```
public class m1 extends Activity {

new m2().execute();
        new m3().execute();
 class m2 extends AsyncTask<String, String, String> {
 public void s {

                         String  id3 = map12.get("CourseID");
}
}
 class m3 extends AsyncTask<String, String, String> {
}//m3
}//m 
```

我怎样才能让 id3 进入 m3 类？知道这是每次都改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:26:37.707

将其声明为构造函数的一部分，并在实例化它时将其传递（假设您从`m1`.

```
private String id3;

public m3(String theId3) {
    id3 = theId3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:27:10.210

在此类 m1 中将 id3 设为 public 静态，然后在 m3 中直接访问它，如 m1.id3。

```
 public class m1 extends Activity {
       public static String id3;
        //your code
          }

     public class m3 {
       m1 Object1=new m1();  //make object of class m1
       Object1.id3;  // You can access id3 in class m3
        //your code
          } 
```

# iphone - 从 Sharekit 发布到 Facebook

> ID：13431432
> 
> 赞同：0
> 
> 时间：2012-11-17T14:22:05.820
> 
> 标签：iphone, ios, facebook, ios6, sharekit

我是sharekit的新手。我正在尝试向 Facebook 发布一个简单的文本：@“Hello”，但这样做会遇到问题。它会引导我进入登录页面。我登录，然后它关闭并返回主屏幕。但是当我检查我的时间线时，它没有被添加..

我的 ViewController.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    UIButton *btn;
    IBOutlet UIToolbar *toolbar;
}

@property (nonatomic,strong) UIButton *btn;
- (IBAction)btnShareClicked:(id)sender;

@end 
```

我的 ViewController.m

```
#import "ViewController.h"
#import "SHK.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize btn;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])
    {
        self.toolbarItems = [NSArray arrayWithObjects:
                             [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                             [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(btnShareClicked:)] ,
                             [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                             nil
                             ];
    }

    return self;
}

- (IBAction)btnShareClicked:(id)sender {
    NSString *text = @"Hello";

    SHKItem *item = [SHKItem text:text];
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

    // For Toolbar
    //[actionSheet showFromToolbar:toolbar];

    [actionSheet showInView:self.view];

}
@end 
```

我已经包含了 MessageUI、Security、SystemConfiguration 框架......需要一些指导......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:34:33.917

首先，您应该尝试检查您是否`ShareKit`在您的应用程序中使用更新的 API。如果没有，则从 SHareKIt 站点添加更新的 API。

[这是 ShareKit 网站的链接](http://getsharekit.com/install/)

这是代码，请参阅，当您想通过 Facebook 共享文本时调用。

```
-(void)shareOnFacebook{
 SHKItem * ietm1= [[SHKItem alloc] init];
 [ietm1 setText:@"Hello"];

 SHKFacebook *shkFacebook = [[SHKFacebook alloc] init]
 [shkFacebook setSHKItem:item];
 }
//see whether you have these Classes in your `ShareKit`. 
```

我希望它对你有帮助。

# javascript - 开发具有语法突出显示的文本代码编辑器的最佳方法

> ID：13431436
> 
> 赞同：1
> 
> 时间：2012-11-17T14:22:35.990
> 
> 标签：javascript, html, css, jquery-ui

我正在开发一个带有语法高亮和检测的代码编辑器；我正在关注它的当前架构；a) 有一个 z 索引为 10 的文本区域 b) 具有 z 索引为 40 的 div 上方的文本区域，它使用语法突出显示所需的自定义颜色来屏蔽键入的内容

有人可以建议我更好的架构方法来构建具有语法突出显示和检测的自定义代码编辑器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:33:24.320

你检查[过 AceEditor](http://ace.ajax.org/#nav=about)吗？不知道你为什么要开始开发一个新的编辑器，这可能需要很多时间来开发，而不是使用已经存在的、功能强大的、经过全面测试的以及围绕它的庞大而充满活力的社区。

# jsf - JSF - Selectonemenu 数组 int

> ID：13431440
> 
> 赞同：1
> 
> 时间：2012-11-17T14:23:30.263
> 
> 标签：jsf

我想在数组中设置值但收到 Classcastexception ..

代码示例：page.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Really simple CRUD</title>
</h:head>
<h:body>
    <h:form id="form">
        <p:growl autoUpdate="true" showDetail="true"/>
        <h:selectOneMenu converter="javax.faces.Integer" value="#{adminMBean.a[0]}">
            <f:selectItem itemLabel="1" itemValue="1"/>
            <f:selectItem itemLabel="2" itemValue="2"/>
        </h:selectOneMenu>
        <h:commandButton value="ok" action="#{adminMBean.ok()}"/>
        <h:outputText value="sa:#{adminMBean.a[0]}"/>
    </h:form>
</h:body> 
```

```
@ManagedBean(name = "adminMBean")
@RequestScoped
public class AdminMBean {
  int[] a=new int[1];
public AdminMBean(){}
    public int[] getA() {
    return a;
}
public void setA(int[] a) {
    this.a = a;
}
} 
```

如何使用 selectonemenu 将值设置为数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:42:09.433

你*读过*留言`ClassCastException`吗？它应该是这样的：

> java.lang.ClassCastException：无法将 [java.lang.Integer] 类型的对象添加到 [int] 类型的对象数组中

看，你应该使用`Integer[]`而不是`int[]`.

```
private Integer[] a = new Integer[1];

public Integer[] getA() {
    return a;
} 
```

顺便说一句，二传手是不必要的。它不会在这个构造中使用。

# asp.net - 将域绑定到应用程序页面

> ID：13431444
> 
> 赞同：1
> 
> 时间：2012-11-17T14:24:19.167
> 
> 标签：asp.net, iis, dns, routes

让我们检查一下场景：

我有一个`tbl_Users`http://mydomain/[username] 并使用路由映射到每个用户的个人资料。他们的个人资料中有一些路由页面（如联系人等）。

```
routes.MapPageRoute(
     "UserProfiles",
     "{username}",
     "~/views/ShowProfile.aspx"
     );

 routes.MapPageRoute(
    "UserProfilesContacts",
    "{username}/contactus",
    "~/views/ShowContact.aspx"
 ); 
```

现在我需要让他们为自己注册域并将他们的域映射到他们的个人资料页面（我不想转发域！我想查看他们自己的 URL）。

```
http://aDomain.com  == search in db ==>  http://mydomain.com/[aUser] 
```

所以

```
http://aDomain.com/contactus ==search in db==>  http://mydomain.com/[aUser]/contactus 
```

我将他们的域名列表保存在数据库中。我知道我必须将他们的域添加到 IIS（或域别名到 mydomain.com）

我想让他们在他们的域中工作，就像他们在主域中的个人资料一样。

ASP.NET 4 中的解决方案是什么？

# r - 统计同一个月和不同月份的不同ID

> ID：13431446
> 
> 赞同：1
> 
> 时间：2012-11-17T14:24:27.107
> 
> 标签：r

我有一个这样的数据框：

```
FisherID    Year    Month   VesselID
1   2000    1   56
1   2000    1   81
1   2000    2   81
1   2000    3   81
1   2000    4   81
1   2000    5   81
1   2000    6   81
1   2000    7   81
1   2000    8   81
1   2000    9   81
1   2000    10  81
1   2001    1   56
1   2001    2   56
1   2001    3   81
1   2001    4   56
1   2001    5   56
1   2001    6   56
1   2001    7   56
1   2002    3   81
1   2002    4   81
1   2002    5   81
1   2002    6   81
1   2002    7   81 
```

...而且我需要 ID 每年更改的次数，所以我想要的输出是：

```
 FisherID    Year    DiffVesselUsed
1   2000    1
1   2001    2
1   2002    0 
```

我尝试使用聚合（）来获得它：

```
aggregate(vesselID, by=list(FisherID,Year,Month ), length) 
```

但我得到的是：

```
FisherID    Year    DiffVesselUsed
1   2000    2
1   2001    1
1   2002    1 
```

因为aggregate() 计算了那些仅在同一个月出现的不同船只。我尝试过不同的聚合方式但没有成功。任何帮助将不胜感激。干杯，拉斐尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:44:58.603

首先是一个问题：您的预期输出似乎并未反映您的要求。您询问 ID 每年更改的次数，但您的预期输出似乎表明您想知道`VesselID`每年观察到多少个独特的 s。例如，在 2000 年，ID 更改了一次，而在 2001 年，ID 更改了两次。在这两年中，都会观察到两个唯一的 ID。

所以要得到你发布的结果，

如果您正在查找 和 的统计信息`FisherID`，`Year`那么也没有理由查找`Month`。相反，您应该查看 和 的每个组合的 VesselID 的唯一`FisherID`值`Year`。

```
aggregate(VesselID, by = list(FisherID, Year), function(x) length(unique(x)))
#   Group.1 Group.2 x
# 1       1    2000 2
# 2       1    2001 2
# 3       1    2002 1 
```

如果您确实想要 ID 更改的次数，请使用该`rle`功能。

```
aggregate(VesselID, by = list(FisherID, Year),
  function(x) length(rle(x)$values) - 1)
#   Group.1 Group.2 x
# 1       1    2000 1
# 2       1    2001 2
# 3       1    2002 0 
```

# c# - 无法序列化我的`ObservableDictionary ` 类

> ID：13431447
> 
> 赞同：4
> 
> 时间：2012-11-17T14:24:29.807
> 
> 标签：c#, .net, serialization

我写了我的`public sealed class ObservableDictionary<TKey,TValue> : NotifyPropertyChangedClass, INotifyCollectionChanged, IDictionary<TKey, TValue> where TKey: IEquatable<TKey>`课。

它标记为`[Serializable]`。

但是当我试图序列化`ObservableDictionary<Int64, String>`.

异常消息：

> 程序集“PresentationFramework, Version=4.0.0.0, Culture=neutral”中的 MS.Internal.Data.EnumerableCollectionView 类型未使用 PublicKeyToken=31bf3856ad364e35 标记为可序列化。

但我从未使用过这种`MS.Internal.Data.EnumerableCollectionView`类型。

我的错在哪里？我的以下代码位于：

```
using System;
using System.ComponentModel;

namespace RememberEmployees {

    [Serializable]
    public abstract class NotifyPropertyChangedClass : INotifyPropertyChanged {        
        protected void NotifyPropertyChanged(string propertyName) {
            PropertyChangedEventHandler temp = PropertyChanged;
            if (temp != null) {
                temp(this, new PropertyChangedEventArgs(propertyName));
            }
        }        
        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

和

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.Specialized;

namespace RememberEmployees {   
    [Serializable]
    public sealed class ObservableDictionary<TKey,TValue> : NotifyPropertyChangedClass, 
        INotifyCollectionChanged, IDictionary<TKey, TValue> where TKey: IEquatable<TKey> {
        SortedDictionary<TKey, TValue> dict;

        IComparer<TKey> Comparer {
            get { return dict.Comparer; }
        }

        public ObservableDictionary() {
            dict = new SortedDictionary<TKey, TValue>();
            IsReadOnly = false;
        }

        private void NotifyCollectionChanged(NotifyCollectionChangedAction action) {
            NotifyCollectionChangedEventHandler temp = CollectionChanged;
            if (temp != null) {
                temp(this, new NotifyCollectionChangedEventArgs(action));
            }
        }

        private void NotifyCollectionChanged(NotifyCollectionChangedAction action, object item) {
            NotifyCollectionChangedEventHandler temp = CollectionChanged;
            if (temp != null) {
                temp(this, new NotifyCollectionChangedEventArgs(action, item));
            }
        }

        private void NotifyCollectionChanged(NotifyCollectionChangedAction action, int index) {
            NotifyCollectionChangedEventHandler temp = CollectionChanged;
            if (temp != null) {
                temp(this, new NotifyCollectionChangedEventArgs(action, index));
            }
        }

        private void NotifyCollectionChanged(NotifyCollectionChangedAction action, KeyValuePair<TKey, TValue> obj, int index) {
            NotifyCollectionChangedEventHandler temp = CollectionChanged;
            if (temp != null) {
                temp(this, new NotifyCollectionChangedEventArgs(action, obj, index));
            }
        }

        public event NotifyCollectionChangedEventHandler CollectionChanged;

        public void Add(TKey key, TValue value) {
            if (IsReadOnly)
                throw new Exception("Is Read Only");
            dict.Add(key, value);
            NotifyPropertyChanged("Count");
            NotifyCollectionChanged(NotifyCollectionChangedAction.Add, 
                dict.Cast<KeyValuePair<TKey, TValue>>().FirstOrDefault(n => n.Key.Equals(key)));
        }

        public bool ContainsKey(TKey key) {
            return dict.ContainsKey(key);
        }

        public ICollection<TKey> Keys {
            get { return dict.Keys; }
        }

        public bool Remove(TKey key) {
            if (IsReadOnly)
                throw new Exception("Is Read Only");
            if (!dict.Keys.Contains(key))
                return false;
            int x = 0;
            foreach (TKey item in dict.Keys) {
                if (item.Equals(key))
                    break;
                ++x;
            }
            KeyValuePair<TKey, TValue> val = dict.Cast<KeyValuePair<TKey, TValue>>().FirstOrDefault(n => n.Key.Equals(key));
            bool result = dict.Remove(key);
            if (result) {
                NotifyPropertyChanged("Count");
                NotifyCollectionChanged(NotifyCollectionChangedAction.Remove, val, x);
            }
            return result;
        }

        public bool Remove(KeyValuePair<TKey, TValue> item) {
            return Remove(item.Key);
        }

        public bool TryGetValue(TKey key, out TValue value) {
            return dict.TryGetValue(key, out value);
        }

        public ICollection<TValue> Values {
            get { return dict.Values; }
        }

        public TValue this[TKey key] {
            get {
                return dict[key];
            }
            set {
                dict[key] = value;
                NotifyCollectionChanged(NotifyCollectionChangedAction.Reset);
            }
        }

        public void Add(KeyValuePair<TKey, TValue> item) {
            Add(item.Key, item.Value);
        }

        public void Clear() {
            if (IsReadOnly)
                throw new Exception("Is Read Only");
            dict.Clear();
            NotifyCollectionChanged(NotifyCollectionChangedAction.Reset);
        }

        public bool Contains(KeyValuePair<TKey, TValue> item) {
            return dict.Contains(item);
        }

        public void CopyTo(KeyValuePair<TKey, TValue>[] array, int arrayIndex) {
            if (arrayIndex > dict.Count)
                throw new IndexOutOfRangeException();
            int max = dict.Count - arrayIndex <= array.Count() ? dict.Count - arrayIndex : array.Count();
            for (int i = 0; i < max; i++) {
                array[i] = dict.Skip(arrayIndex).ToArray()[i];
            }
        }

        public int Count {
            get { return dict.Count; }
        }
        bool readOnly;

        public bool IsReadOnly {
            get { return readOnly; }
            set { readOnly = value; NotifyPropertyChanged("IsReadOnly"); }
        }

        public IEnumerator<KeyValuePair<TKey, TValue>> GetEnumerator() {
            return dict.GetEnumerator();
        }

        System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() {
            return dict.GetEnumerator();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:35:53.577

This has less to do with your class but with the data you did store in your collection. It seems that in your collection you have stored a ViewObject which internally does contain an EnumerableCollectionView object.

When you serialize data you must be sure what parts of your object graph you do want to serialize. Just putting objects in your collection could cause half of you application data sent over the wire or to disc. There is a good reason why DataContractSerializer was invented.

You should know before the serialize call what data you are going to serialize. Otherwise it could happen that e.g. in a client server application you are trying to deserialize types which are located in assemblies that do exist only on the server.

# javascript - 开放图层功能

> ID：13431449
> 
> 赞同：1
> 
> 时间：2012-11-17T14:24:40.907
> 
> 标签：javascript, openlayers

为什么我不能向 Vector 添加功能？此代码不起作用：

```
var features = [new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(-70.702451, 42.374473), {className: "latarnia"})]

vectors = new OpenLayers.Layer.Vector("warstwa", {
strategies: [new OpenLayers.Strategy.Fixed()],
 protocol: new OpenLayers.Protocol.HTTP({
format: new OpenLayers.Format.OSM()
 }),
 features : features,
projection: new OpenLayers.Projection("EPSG:4326")});   

map.addLayers([vectors]); 
```

我的意思是向量根本没有特征。我试过了

```
layer.addFeatures([feature]); 
```

但它也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-15T13:43:02.793

看来您的地图和点的投影不一样。地图投影是 EPSG:4326 ，但点投影似乎是 EPSG:3857。

它可以帮助你

```
conv_latlon = new OpenLayers.LonLat(-70.702451, 42.374473).transform('EPSG:3857', 'EPSG:4326')//transform point 
var features = [new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(conv_latlon.lon, conv_latlon.lat), {className: "latarnia"})] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T18:20:31.250

由于某种原因，在 OpenLayers.Layer.Vector 构造函数上初始化“功能”属性不起作用。

但是您应该可以在之后添加它们：

```
vectors.addFeatures(features); 
```

然后您可以在浏览器控制台中进行测试：

```
vectors.features.length; //this should be 1 now 
```

否则代码似乎没问题。您还应该能够将地图上的要素视为橙色圆圈（默认样式），但前提是该点的坐标在您的基础图层范围内。使用 OpenLayers 2.14 版进行测试。

# iphone - 未应用 box2d 重力

> ID：13431452
> 
> 赞同：2
> 
> 时间：2012-11-17T14:24:50.460
> 
> 标签：iphone, cocos2d-iphone, box2d

我有一个 box2d 世界，其视图锁定在 LandscapeLeft 中。我正在尝试通过向左或向右倾斜手机来移动身体，目前正在工作。当手机倾斜在 LandscapeRight 中启动关卡时，我遇到了问题。在这种情况下，重力不再被施加，我应该移动的身体静止不动。我相信这是一个摩擦问题（即使我要移动的身体和要移动的平台都是 0 摩擦），因为当我将平台的恢复设置为 1.0 时（所以我的身体现在正在很少到位）重力始终正确应用。这不是 box2d 问题，因为我的身体只有 1 个平台可以让我的身体继续移动，而且无论它在平台上的哪个位置，它都不会移动，因为我的身体会卡在瓷砖的角落。这是我的加速代码。

```
 - (void)accelerometer:(UIAccelerometer*)accelerometer didAccelerate (UIAcceleration*)acceleration
{
    if (acceleration.x < 0) {
        b2Vec2 gravity(-acceleration.y * 15, -8);
        world->SetGravity(gravity);
    }
} 
```

这是我的初始化代码

```
// Define the gravity vector.
    b2Vec2 gravity;
    gravity.Set(0.0f, -10.0f);

    // Do we want to let bodies sleep?
    // This will speed up the physics simulation
    bool doSleep = true;

    // Construct a world object, which will hold and simulate the rigid bodies.
    world = new b2World(gravity, doSleep);

    world->SetContinuousPhysics(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:34:08.773

在这篇文章中查看答案 - [Cocos2D 游戏中基于加速度计的运动](https://gamedev.stackexchange.com/questions/33412/accelerometer-to-move-player-left-and-right)

只需使用 cocos2D sprite 进行移动，并将 sprite 位置的值用于 box2D 身体。

# javascript - 什么是真正的“多变量赋值”？

> ID：13431454
> 
> 赞同：1
> 
> 时间：2012-11-17T14:24:54.147
> 
> 标签：javascript, naming-conventions

我不时这样做，特别是在 Javascript 中存储对对象中深层嵌套属性的引用，但我不确定这会被称为什么。多变量赋值？变量引用赋值？

```
myVar = myObject.myProperty = value 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:29:29.593

通常称为“链式分配”。

同样重要的是要区分这样一个事实，即您不仅要分配多个变量，还要分配更深层次的赋值操作的返回值。这就是为什么它是一个“链”而不是某种形式的组合操作。

# java - 如何在 ADT 上设置 HoloEverywhere？

> ID：13431458
> 
> 赞同：1
> 
> 时间：2012-11-17T14:25:21.487
> 
> 标签：java, android, eclipse, android-layout, android-holo-everywhere

我正在尝试在 ADT（Eclipse）上使用[HoloEveryWhere 。](https://github.com/ChristopheVersieux/HoloEverywhere)我做错了什么？

1.  我正在下载[那个](https://github.com/ChristopheVersieux/HoloEverywhere)
2.  文件 > 导入 > 现有代码到工作区
3.  我正在下载[那个](https://github.com/JakeWharton/ActionBarSherlock)
4.  2 再一步（库被禁用）。
5.  我正在尝试更改主题

    android:theme="@style/Holo.Theme.Sherlock"

但 Eclipse 说

> 找不到与给定名称匹配的资源

如果我尝试替换从

```
public class MainActivity extends Activity { 
```

至

```
public class MainActivity extends com.WazaBe.HoloEverywhere.sherlock.SListActivity { 
```

我越来越

> com.WazaBe 无法解析为类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:25:06.843

如果您使用的是 ADT r-17 及更高版本，您可能需要将 Holo Everywhere 库的副本移动到`libs/`工作区中的文件夹（您必须创建该文件夹）中。

# servicestack - servicestack ormlite 和同一张表的外键

> ID：13431459
> 
> 赞同：1
> 
> 时间：2012-11-17T14:25:25.237
> 
> 标签：servicestack, ormlite-servicestack

我有一个链接表，一些链接将是子链接，引用父链接 ID 但是我无法理解 servicestack ormlite 并填充子属性，当获取所有链接列表时，所有子链接将。

这是我的模型：

```
public partial class Navigation
{
   [Alias("Id"), AutoIncrement]
   public int Id  { get; set; }

   [Alias("ParentId")]
   [Display( Name = "ParentId")]
   [References(typeof(Navigation))]
   public int? ParentId  { get; set; }

   [Alias("LinkText")]
   [StringLength(50, ErrorMessage = " Must be no more than 50 characters long!")]
   [Display( Name = "LinkText")]
   public string LinkText  { get; set; }

   [Alias("Action")]
   [StringLength(50, ErrorMessage = " Must be no more than 50 characters long!")]
   [Display( Name = "Action")]
   public string Action  { get; set; }

   [Alias("Controller")]
   [StringLength(50, ErrorMessage = " Must be no more than 50 characters long!")]
   [Display( Name = "Controller")]
   public string Controller  { get; set; }

   [Alias("Area")]
   [StringLength(50, ErrorMessage = " Must be no more than 50 characters long!")]
   [Display( Name = "Area")]
   public string Area  { get; set; }

   [Alias("Visible")]
   [Display( Name = "Visible"),Required(ErrorMessage = " is required" )]
   public bool Visible  { get; set; }

   [Alias("Sequence")]
   [Display( Name = "Sequence")]
   public int? Sequence  { get; set; }

   [ForeignKey(typeof(Navigation))]
   public virtual ICollection<Navigation> Children { get; set; }
} 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:43:30.503

您可以使用继承来做到这一点。父类将包含对子类的引用。我必须用它来获取哪个用户创建了每个用户。这是一个示例：

```
public class UserCommon
{
    [References(typeof(User))] // Self reference workaround for User ;)
    public Guid CreatedBy { get; set; }
}

public class User : UserCommon
{
    public Guid Uid { get; set; }
    public String Username { get; set; }
    public String Password { get; set; }
} 
```

您需要注意的是将 包含`Id`在子类而不是父类中。将生成的表如下。外键是自引用

![生成的表](../Images/602faafb3934f8d708fd10181f8dbf14.png)

获取子列表应该像一个简单的 LINQ 查询一样简单，它将获取某个父 Guid 的所有子。`CreatedBy`也是`User`因为继承的属性。

```
db.Select<User>(q => q.CreatedBy == '734FD814-024D-4795-AFD0-34FECF89A13A');
// Just a sample Guid, you should be able to select
// the Guid you need and insert it here. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:11:04.410

OrmLite 中的表是与底层数据库表的严格**1:1 映射。**

这意味着所有复杂类型的属性都被**放入**带有属性名称的 db 文本字段中，它们永远不会像您在这里期望的那样自动映射到子关系。

这是一个早期的答案，显示了如何[映射与 OrmLite 的多对多关系](https://stackoverflow.com/a/12539573/85785)。

# python - Python - 划分列表并维护原始索引（递归）

> ID：13431460
> 
> 赞同：2
> 
> 时间：2012-11-17T14:25:45.073
> 
> 标签：python, recursion, indexing

我有作业，我必须使用递归来查找列表中所有出现的数字/字母/单词，并在原始列表中返回它们的索引。我已经在这个网站上搜索了以前回答的问题，但我找不到任何答案关于递归，即使在找到第一次出现后也可以继续检查列表。

应该看起来像这样：

```
>>> find_value( [4,7,5,3,2,5,3,7,8,6,5,6], 5)
[2,5,10] 
```

到目前为止，我的代码是这样的：

```
def find_all(x,y):
    if len(x) == 1 and x[0] == y:
        return [i for i, y in enumerate(x)]
    return find_all(x[1:],y) 
```

虽然它只会最小化列表并给我与索引相同的 [0] .. 这是真的，对于划分的列表.. 这样我就永远不会得到原始索引.. 谢谢 - 如果这已经存在，我很抱歉因为我已经搜索过，但找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:31:26.913

这是一个简单的非递归解决方案：

```
def find_value(l, lookfor):
    return [i for i, v in enumerate(l) if v == lookfor] 
```

* * *

作为对您的作业的一条建议——只需将列表中的进度作为可选的第三个参数传递给`find_all`：

```
def find_value(list, lookfor, position=0) 
```

...并在`position`每次递归时添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:31:28.833

布置家庭作业的目的通常是让您可以探索问题并从中学习。在这种情况下，递归对于初学者来说通常很困难。

递归的目的是从较小问题的解决方案中构造较大问题的答案。所以最好从最小的开始：

```
def find_all(haystack, needle):
    if not haystack:
        # no occurrences can happen
        return [] 
```

如果列表不为空，我们可以检查第一个元素是否是我们正在寻找的：

```
 if haystack[0] == needle:
        occurrences = [0] # the index of the first element is always 0
    else:
        occurrences = [] 
```

我们还需要解决较小问题的方法：

```
 recursive_occurences = find_all(haystack[1:], needle) 
```

现在您注意到的问题是返回的索引始终为 0。那是因为它们是*较小*列表中的索引。如果一个项目`0`在较小的列表中有索引，这意味着它在最大列表中的索引实际上是`1`（这是您的程序缺少的主要部分），因此：

```
 for x in recursive_occurences:
        occurrences.append(x+1) 
```

并返回完整的答案：

```
 return occurrences 
```

我希望这对你有一点帮助，这样你就可以自己做下一个作业了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:58:58.727

这里有几个解决方案：

一口气，丑陋，但有效：

```
def find_value(lst, elt):
    return [x + 1 
            for x in ([] if not lst else 
                      (([-1] if lst[0] == elt else []) +
                       find_value(lst[1:], elt)))] 
```

更漂亮，但带有隐藏的索引参数：

```
def find_value(lst, elt, idx=0):
    return [] if not lst else \
           (([idx] if lst[0] == elt else []) +
            find_value(lst[1:], elt, idx + 1)) 
```

漂亮吗？，很长的内部递归函数......更易于维护？

```
def find_value(lst, elt):
    def _rec(lst, elt, idx):
         if not lst:
             return []
         res = [idx] if lst[0] == elt else []
         return res + _rec(lst[1:], elt, idx + 1)
    return _rec(lst, elt, idx=0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T15:38:31.473

这个问题有一个非常简单的解决方案，即使您使用递归来解决分配：

```
>>> def find_value(array, value):
    *head, tail = array
    array = find_value(head, value) if head else []
    return array + [len(head)] if tail == value else array

>>> find_value([4, 7, 5, 3, 2, 5, 3, 7, 8, 6, 5, 6], 5)
[2, 5, 10]
>>> 
```

# html - 没有收到任何数据

> ID：13431461
> 
> 赞同：2
> 
> 时间：2012-11-17T14:25:45.390
> 
> 标签：html

出乎意料的是，我的网站社区中约有 40% 的人无法再访问，称他们收到“未收到数据”错误。我们已将防火墙脱机，尝试通过 Cloudflare 等系统并检查我们的 .htaccess 均无济于事。

我已经要求受影响的用户跟踪路由，但奇怪的是它看起来像是在 ISP 级别停止。

任何人都可以提出其他可能导致此错误的事情吗？

# php - 在 Flash Builder 中编写一些 PHP 代码？

> ID：13431464
> 
> 赞同：0
> 
> 时间：2012-11-17T14:26:20.263
> 
> 标签：php, flash, ide, flash-builder

我使用 FB (4.6) 来满足我几乎所有的编码需求，但我发现没有 PHP 支持，有没有办法像任何其他 .as 或 .mxml 选项卡一样对一些 PHP 进行编码打开一个新选项卡？

（智能感知和其他有用的东西也会很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T17:47:49.047

flash builder是eclipse。在“帮助”>“安装新软件...”；使用：“http://download.eclipse.org/releases/indigo/”；“添加...”。选择您想要的软件并像在 eclipse 上一样安装它

如果 indigo 不起作用，它可能是“http://download.eclipse.org/releases/galileo/”……而 FB 4.7 也将是别的东西……

# ruby-on-rails - 如何在新操作中使用带有 belongs_to 关联的嵌套属性？

> ID：13431465
> 
> 赞同：1
> 
> 时间：2012-11-17T14:26:23.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes

在`update`以下操作中`nested_form`有效，但在`create`我收到此错误时：

```
Couldn't find Student with ID=12 for Cv with ID= 
```

*控制器：*

```
def new
  @cv = Cv.new
  @cv.student = current_student
end

def create
  @cv = Cv.new(params[:cv])

  if @cv.save
    redirect_to student_dashboard_path,
      notice: t('activerecord.successful.messages.created', model: @cv.class.model_name.human)
  else
    render 'new'
  end
end 
```

*模型：*

```
class Cv < ActiveRecord::Base
  attr_accessible :student_attributes

  belongs_to :student
  accepts_nested_attributes_for :student
end 
```

*看法：*

```
= f.simple_fields_for :student do |s|
  = s.input :english_level, collection: [['Low', 1], ['High', 2]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:48:33.223

您也应该对您的 route.rb 进行更改。

```
resources :parent do
  resources :child
end 
```

看看 Jose Valim -inherited [-resources](https://github.com/josevalim/inherited_resources)的这个有用的实现。

# sql-server-2005 - SQL Server 2005 无法还原我的备份

> ID：13431468
> 
> 赞同：2
> 
> 时间：2012-11-17T14:26:36.073
> 
> 标签：sql-server-2005

这就是我备份的方式：

1.  从“日记”数据库的右键菜单中选择：“任务”，然后选择“备份”；
2.  在“备份数据库 - 日记”窗口中，我选择：

    一个。“数据库”滚动列表中的“日记”；
    湾。“备份组件”区域的单选按钮“数据库”；
    C。“备份到”区域中的“磁盘”单选按钮，然后按“添加”按钮以获取磁盘上的位置；

3.  我从“选择页面”区域选择“选项”菜单项，然后选择：“备份到现有媒体集”和“覆盖所有现有备份集”；

好的，我收到一条消息：

> *数据库“日记”备份成功完成*

我尝试（不成功！）按如下方式恢复该数据库：

1.  从“日记”数据库的右键菜单中选择：“任务”，然后选择“恢复”和“数据库”；
2.  在“Restore Database - diary”窗口中，我从“Destination for restore”滚动列表中选择“diary”；
3.  我选择“从设备”单选按钮，在“指定备份”窗口中单击“添加”，然后从磁盘上的位置选择`diary.bak`我之前备份的文件；
4.  我选择“选项”菜单项，然后选择“覆盖现有数据库”单选按钮；
5.  在“原始文件名”列表中，我看到 2 个文件：

    一个。`diary-------c:\program files\Microsoft SQL Server\MSSQL 3\MSSQL\DATA\diary.mdf`
    湾。`diary-------c:\program files\Microsoft SQL Server\MSSQL 3\MSSQL\DATA\diary_log.ldf`

6.  对于第一项，我选择我在磁盘 ( ) 上备份 diary.bat 的位置，`d:\diary\test.bak`并将第二项保留原样；

当我按 OK 时，我收到了我之前引用的错误消息；

非常感谢您的耐心和愿意帮助我解决我认为我可能会忘记旧备份的问题。

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:43:55.393

您将 SQL Server 数据/事务日志文件 (`.mdf`和`.ldf`) 与备份 ( `.bak`) 混淆了。

要恢复，请选择您的`.bak`文件 - 就像您已经做的那样。

但是您还需要在还原步骤 #5 中定义将结果`.mdf`和`.ldf`文件放在哪里 - 比如定义从 ZIP 存档中提取文件的位置（备份文件几乎就像一个 ZIP 文件，包含数据和事务日志文件）。

但**不要**在此处使用与备份文件相同的路径/文件名！这实际上会尝试用正在恢复的数据文件覆盖您的备份（您试图从中恢复数据库）！

将这两项留在第 5 步中 - 前提是它们最终所在的目标目录确实存在（如果它们**不**存在 -**那么**只有这样你才需要在此处进行任何更改！）

# java - 在 java 中打开一个 shell 并与它的 I/O 交互

> ID：13431473
> 
> 赞同：5
> 
> 时间：2012-11-17T14:26:50.843
> 
> 标签：java, linux, process, terminal, processbuilder

我正在尝试打开一个外壳（xterm）并与之交互（编写命令并读取外壳的输出）

这是一个不起作用的代码示例：

```
public static void main(String[] args) throws IOException {
    Process pr = new ProcessBuilder("xterm").start();
    PrintWriter pw = new PrintWriter(pr.getOutputStream());
    pw.println("ls");
    pw.flush();
    InputStreamReader in = new InputStreamReader(pr.getInputStream());
    System.out.println(in.read());
} 
```

当我执行这个程序时，会打开一个“xterm”窗口并且没有输入“ls”命令。只有当我关闭窗口时，我才会打印“-1”，并且没有从 shell 中读取任何内容

**重要的-**

我知道我可以使用：
Process pr = new ProcessBuilder("ls").start();

要获得输出，但我需要为其他用途打开“xterm”

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T14:36:39.297

您的问题是 xterm 进程的标准输入和输出与终端窗口中可见的实际 shell 不对应。与 xterm 相比，您可能会更成功地直接运行 shell 进程：

```
Process pr = new ProcessBuilder("sh").start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-08T02:07:11.653

[这](https://bitbucket.org/snippets/ElvisDeFreitas/jn484)是一个完整的 java 主要示例，说明如何与`shell`on进行交互`java 8`（在 java 4、5、6 上这样做真的很简单）

输出示例

```
$ javac Main.java
$ java Main
echo "hi"
hi 
```

编码

```
import java.io.*;
import java.util.Arrays;
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) throws IOException, InterruptedException {

        final List<String> commands = Arrays.asList("/bin/sh");
        final Process p = new ProcessBuilder(commands).start();

        // imprime erros
        new Thread(() -> {
            BufferedReader ir = new BufferedReader(new InputStreamReader(p.getErrorStream()));
            String line = null;
            try {
                while((line = ir.readLine()) != null){
                    System.out.printf(line);
                }
            } catch(IOException e) {}
        }).start();

        // imprime saida
        new Thread(() -> {
            BufferedReader ir = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line = null;
            try {
                while((line = ir.readLine()) != null){
                    System.out.printf("%s\n", line);
                }
            } catch(IOException e) {}
        }).start();

        // imprime saida
        new Thread(() -> {
            int exitCode = 0;
            try {
                exitCode = p.waitFor();
            } catch(InterruptedException e) {
                e.printStackTrace();
            }
            System.out.printf("Exited with code %d\n", exitCode);
        }).start();

        final Scanner sc = new Scanner(System.in);
        final BufferedWriter bf = new BufferedWriter(new OutputStreamWriter(p.getOutputStream()));
        final String newLine = System.getProperty("line.separator");
        while(true){
            String c = sc.nextLine();
            bf.write(c);
            bf.newLine();
            bf.flush();
        }

    }

} 
```

# linux - Linux Shell 脚本卡住了

> ID：13431475
> 
> 赞同：0
> 
> 时间：2012-11-17T14:27:07.493
> 
> 标签：linux, shell

我有一个大学课程要完成，我有点卡在这部分：

del - 此脚本应将调用的文件移动到垃圾箱目录，以便稍后在必要时将文件恢复到其原始位置。

我做了如下所示的尝试，但它不起作用：

```
#!/bin/bash
echo "Do you want to delete this file?"
echo "Y/N"
read ans
case "$ans" in
  Y) echo "`readlink -f $1`" >>/TAM/store & mv $1 /~/dustbin ;;
  N) echo "File not deleted" ;;
esac 
```

当我运行它时，我得到了这个：

```
./Del: line 8: /TAM/store: No such file or directory
MV: missign destination file operand after '/~/dustbin' 
```

另外如何使用用户输入来输入文件名？或者你不能那样做吗？

PS`~`是根目录，`TAM`是我的目录，是`store`文件，`dustbin`是. 是脚本的名称`dustbin``root``Del`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:46:32.160

既然你说这是课程作业，我不会给你一个完整的解决方案，而是一个非常简单（简化）的开始：

```
#!/bin/sh

if [ $# -eq 0 ]; then
    printf "You didn't give an argument, please input file name: \n"
    filename=READ_FILE_NAME_HERE
elif [$# -eq 1 ]; then
    filename=$1
else
    printf "Error: You gave to many parameters!\n"
    exit 1
fi

# Does the file exist (and is a regular file)?
[ -f "$filename" ] || {
    printf "Error: File doesn't exist or isn't a regular file.\n"
    exit 2
    }

Do_you_really_want_to_delete_the_file?
Do_the_remove_magic 
```

这应该让您开始解决“要么接受参数输入，要么如果没有，允许用户输入文件名”的问题。

如果你通过了检查，你知道文件名包含一个有效的文件名，所以你可以删除`readlink`调用，（虽然它不会给你完整的路径），但你可以使用`printf "$filename" >>DEST`etc.

手册中有很多很好的信息可供阅读`bash`。（试试`man bash`：）

# c# - 锯齿状边缘和奇怪的阴影

> ID：13431477
> 
> 赞同：4
> 
> 时间：2012-11-17T14:27:11.250
> 
> 标签：c#, xna

我正在使用嵌入在 WinForms 中的 XNA，从 Microsoft 网站下载。并且注意到当模型被绘制时，一切看起来都很好，但是当我旋转我的相机时，模型上的边缘开始看起来参差不齐。这是我正在谈论的两张图片：

![](../Images/46a256ce2000802683bf04ad036e9d52.png)

![](../Images/3d848e1dc747ab0d51a6ceb655d235d5.png)

当相机离目标越近时，这一点就越明显。我正在使用它来绘制每个网格：

```
foreach (ModelMesh mesh in model.Meshes)
{
    foreach (BasicEffect effect in mesh.Effects)
    {
        effect.View = cam.view;
        effect.Projection = cam.projection;
        effect.World = mesh.ParentBone.Transform;
        effect.EnableDefaultLighting();
    }
    mesh.Draw();
} 
```

有时，如果我旋转模型，会出现一些奇怪的阴影。阴影甚至不会改变它们的“位置”，而是保持完全相同。

* * *

**编辑：**所以我用谷歌搜索了一下，发现启用 MultiSampling 应该可以摆脱锯齿状的边缘。现在，有谁知道如何在 WinForms 中做到这一点？

**编辑2：**关于后备缓冲区，我没有在任何地方设置它，所以我猜它应该是这样。这是 GraphicsDeviceService.cpp 构造函数：

```
 GraphicsDeviceService(IntPtr windowHandle, int width, int height)
    {
        parameters = new PresentationParameters();

        parameters.BackBufferWidth = Math.Max(width, 1);
        parameters.BackBufferHeight = Math.Max(height, 1);
        parameters.BackBufferFormat = SurfaceFormat.Color;
        parameters.DepthStencilFormat = DepthFormat.Depth24;
        parameters.DeviceWindowHandle = windowHandle;
        parameters.PresentationInterval = PresentInterval.Immediate;
        parameters.IsFullScreen = false;

        graphicsDevice = new GraphicsDevice(GraphicsAdapter.DefaultAdapter,
                                            GraphicsProfile.Reach,
                                            parameters);
    } 
```

重置方法也相应地设置了 backBuffer。

**编辑 3：** 我尝试设置`MultiSampleCount`更大的数字，但没有任何帮助，这里有两张正在发生的事情的图片。首先我在某个地方实例化对象，然后我只向右移动相机。整个物体拉伸并得到这些锯齿状边缘，如下图所示。这是相机移动代码：

[http://img152.imageshack.us/img152/5204/normalu.png](http://img152.imageshack.us/img152/5204/normalu.png)

[http://img28.imageshack.us/img28/4434/movedright.png](http://img28.imageshack.us/img28/4434/movedright.png)

```
KeyboardState state = Keyboard.GetState();

Vector3 v;

if (state.IsKeyDown(Keys.Up) || state.IsKeyDown(Keys.W))
    v = new Vector3(0, 0, 1) * moveSpeed;
else if (state.IsKeyDown(Keys.Down) || state.IsKeyDown(Keys.S))
    v = new Vector3(0, 0, -1) * moveSpeed;
else if (state.IsKeyDown(Keys.Left) || state.IsKeyDown(Keys.A))
    v = new Vector3(1, 0, 0) * moveSpeed;
else if (state.IsKeyDown(Keys.Right) || state.IsKeyDown(Keys.D))
    v = new Vector3(-1, 0, 0) * moveSpeed;
else if (state.IsKeyDown(Keys.PageUp))
    v = new Vector3(0, -1, 0) * moveSpeed;
else if (state.IsKeyDown(Keys.PageDown))
    v = new Vector3(0, 1, 0) * moveSpeed;
else
    v = new Vector3(0, 0, 0);

view *= Matrix.CreateTranslation(v); 
```

以及相机视图和投影：

```
view = Matrix.CreateLookAt(cameraPos, Vector3.Zero, Vector3.Up);
projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45f), ratio, 0.5f, 50f); 
```

cameraPos 在这种情况下`0,0,10`。

**编辑：阴影** 我最终得到了阴影问题的图片。如您所见，每个网格都有自己的阴影，而不是只有一个阴影穿过所有网格。

[http://img843.imageshack.us/img843/8263/weirdshadowing.png](http://img843.imageshack.us/img843/8263/weirdshadowing.png)

这是模型的俯视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:36:28.967

# Anti-Aliasing for XNA embedded in WinForms

This question is actually a duplicate of [this question](https://stackoverflow.com/q/7425474/925580).

Download the [XNA/WinForms Sample here](http://xbox.create.msdn.com/en-US/education/catalog/sample/winforms_series_1).

In your `GraphicsDeviceService` class file navigate to the constructor:

```
GraphicsDeviceService(IntPtr windowHandle, int width, int height)
{
    parameters = new PresentationParameters();

    // Add this line
    // Increase the count to get higher quality anti-aliasing
    parameters.MultiSampleCount = 8;

    // More parameter settings and initialization
    // ...
} 
```

You can see the difference in the image below:

![with and without multisampling comparison](../Images/75d7475fe19627876dc100ee90f8b8ad.png)

* * *

***Old answer***

# Anti-Aliasing for Standard XNA Application

```
graphics.PreferMultiSampling = true; 
```

enables anti-aliasing for your backbuffer as explained in this [MSDN article](http://msdn.microsoft.com/en-us/library/bb975403.aspx).

The [`PreferMultiSampling`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphicsdevicemanager.prefermultisampling(v=xnagamestudio.40).aspx) property is a member of the [GraphicsDeviceManager](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphicsdevicemanager(v=xnagamestudio.40).aspx) class.

## Increase/Decrease Quality

The [`MultiSampleCount`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.presentationparameters.multisamplecount.aspx) property of the [PresentationParameter](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.presentationparameters.aspx) class can be used to change the number of samples. More samples per pixel means less artifacts and increased render time.

* * *

# Further Reading on Multisampling

*   [Multisampling Anti-Aliasing: A Closeup View](http://alt.3dcenter.org/artikel/multisampling_anti-aliasing/index_e.php)
*   [3D Basics 2: Anti-Aliasing, RAM, and Z](http://www.firingsquad.com/guides/3dbasics2/)
*   [How It Works: Fragment Anti-Aliasing](http://www.firingsquad.com/guides/fragmentaa/default.asp)

* * *

Please note that this solution will only be effective if the source of the problem lies within the graphics pipeline, more specifically the rasterizer.

As noted by [Nico Schertler](https://stackoverflow.com/questions/13431477/jagged-edges-and-weird-shadowing#comment18378043_13431477), make sure that the image resolution is not changed in the process of embedding it into WinForms. If the steps on the edges are not exactly one pixel wide it is a strong indicator that the problem comes from the presentation of the texture in WinForms.

I cannot address the shadow problem here, as it is hard to guess the light settings from the images.

# android - Android - 使用我的应用程序打开 gmail 附件

> ID：13431479
> 
> 赞同：11
> 
> 时间：2012-11-17T14:27:11.730
> 
> 标签：android

我需要使用我的应用程序打开具有自定义扩展名的文件。当文件在我的 SD 卡中时，我可以使用 Intent 过滤器来执行此操作。如果文件作为 Gmail 附件发送，我还可以查看“下载”和“预览”按钮。但是，当我单击下载/预览按钮时，我收到消息 - **“抱歉，无法下载附件”**。

我认为这是我的应用程序的问题。但我有一个随机的想法，并在我的手机上安装了“下载所有文件”应用程序。 [https://play.google.com/store/apps/details?id=com.hwkrbbt.downloadall&hl=en](https://play.google.com/store/apps/details?id=com.hwkrbbt.downloadall&hl=en) 然后，当我点击 Gmail 中的下载按钮时，建议下载所有文件和我的应用程序来下载文件。我选择了我的应用程序，一切正常！！

这是一些安全问题吗？这些是我的意图过滤器：

```
<intent-filter >
         <action android:name="android.intent.action.VIEW" />
         <category android:name="android.intent.category.DEFAULT" />
         <category android:name="android.intent.category.BROWSABLE" />
         <data android:mimeType="*/*" />
         <data android:scheme="content" android:host="*"
            android:pathPattern=".*\\.ate" />
        <data android:scheme="file" android:host="*"
            android:pathPattern=".*\\.ate" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="application/*" host="*" android:pathPattern=".*.ate" android:scheme="content" />
    </intent-filter> 
```

编辑：这是完整的活动标签。

```
 <activity android:name=".TestApp"
              android:label="@string/app_name" 
              android:configChanges="orientation|keyboardHidden"
              android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.TestApp.TestApp.NOTIFICATION" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <!-- Opening .ate file start -->
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="file" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.ate" />
          </intent-filter>
    <intent-filter >
         <action android:name="android.intent.action.VIEW" />
         <category android:name="android.intent.category.DEFAULT" />
         <category android:name="android.intent.category.BROWSABLE" />
         <data android:mimeType="*/*" />
         <data android:scheme="content" android:host="*"
            android:pathPattern=".*\\.ate" />
        <data android:scheme="file" android:host="*"
            android:pathPattern=".*\\.ate" />
    </intent-filter>
    <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.BROWSABLE"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <data android:scheme="file" android:pathPattern=".*\\.ate" android:mimeType="application/octet-stream"/>
        <data android:scheme="content" android:pathPattern=".*\\.ate" android:mimeType="application/octet-stream"/>
        </intent-filter>
        <!-- Opening .ate file end  -->
    </activity> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T15:58:07.867

我自己想通了，所以我发布了解决方案，以防其他人遇到这个奇怪的问题。

意图过滤器需要内容和文件方案类型，mimetype application/octetstream

```
<intent-filter>
<action android:name="android.intent.action.VIEW"/>
<category android:name="android.intent.category.BROWSABLE"/>
<category android:name="android.intent.category.DEFAULT"/>
<data android:scheme="file" android:pathPattern=".*\\.inform" android:mimeType="application/octet-stream"/>
<data android:scheme="content" android:pathPattern=".*\\.inform" android:mimeType="application/octet-stream"/> 
```

# matlab - Matlab中的两个向量相减

> ID：13431482
> 
> 赞同：3
> 
> 时间：2012-11-17T14:27:16.163
> 
> 标签：matlab, vector, matrix, subtraction

> **可能重复：**
> [MATLAB：差异矩阵](https://stackoverflow.com/questions/13422606/matlab-matrix-of-differences)

我不知道如何表达这个问题，但我会尽力而为：

我有两个向量，`A`和`B`。

我想`A`用每个单独的值减去所有值`B`。

例如， 中的所有值`A`都减去 的第一个值`B`。然后所有的值`A`都减去 B 的第二个值，以此类推。

生成的矩阵应该`length(A) x length(B)`看起来像这样：

`Ans = [A - B(1); A - B(2); A - B(3); ....... ]`

有没有办法在没有循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:51:05.980

像@Memming 和@Jonas 这样的行说：

```
Result = bsxfun(@minus, a, b'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:10:26.937

```
a=[2 3 4];      %first take two vector a and b of any size
b=[5 6 5 7];
m=size(a);      % Then Calculate the size of the vectors
n=size(b);  
r1=a'*ones(n);  % replicate the vector a and b one can use **repmat** here for replication  
r2=ones(m)'*b;  % like **repmat(a',n)  &  repmat(b,m(end),1)**
Result=r1-r2

Result =

    -3    -4    -3    -5
    -2    -3    -2    -4
    -1    -2    -1    -3 
```

# java - 从 XML 文件中获取值到数组中

> ID：13431492
> 
> 赞同：0
> 
> 时间：2012-11-17T14:28:22.630
> 
> 标签：java, android, xml

在我的应用程序中，我使用了一组可绘制的 id。这是一个保存在 res/values/arrays.xml 的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <array name="icons">
        <item>@drawable/home</item>
        <item>@drawable/settings</item>
        <item>@drawable/logout</item>
    </array>
</resources> 
```

然后我使用以下代码检索它：

```
Resources res = getResources();
TypedArray icons = res.obtainTypedArray(R.array.icons);
Drawable drawable = icons.getDrawable(0); 
```

但我收到一条错误消息：**数组**“无法解析或不是字段”。

那么如何从 xml 文件中获取包含 id 的整数数组呢？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:34:06.703

尝试清理您的项目。项目 - 清洁...并检查您的进口。做 CTRL + Shift + O

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:51:04.340

您应该在 res 文件夹中的 arrays.xml 文件中使用[类型化数组](http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string-array name="icons">
        <item>@drawable/home</item>
        <item>@drawable/settings</item>
        <item>@drawable/logout</item>
    </string-array>

</resources> 
```

然后在您的活动中访问它们，如下所示：

```
TypedArray imgs = getResources().obtainTypedArray(R.array.icons);
//get resourceid by index
imgs.getResourceId(i, -1)
// or set you ImageView's resource to the id
mImgView1.setImageResource(imgs.getResourceId(i, -1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:35:00.657

我想知道也许你应该在 res/values/strings.xml 中声明它

```
<string-array name="numbers_array">
    <item>9</item>
    <item>10</item>
    <item>11</item>
    <item>12</item>
    <item>1</item>
    <item>2</item>
    <item>3</item>
    <item>4</item>
    <item>5</item>
</string-array> 
```

然后将您的 id 替换为上面数组中的数字...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T15:35:57.313

我的代码没问题。在我的 res 目录中，有一个名称中带有大写字母的图像！那是无效的文件名，它必须只包含 [a-z0-9_.] :) 所以这就是 R 类中出现错误的原因。谢谢你们！

# javascript - 在facebook init上使用javascript调用函数时出错？

> ID：13431499
> 
> 赞同：0
> 
> 时间：2012-11-17T14:28:50.170
> 
> 标签：javascript, facebook

我有一个示例代码：

```
window.fbAsyncInit = function() {
   FB.init({appId: appId, status: true, cookie: true, xfbml: true});

   this.test();  
};
// Load the SDK Asynchronously
(function(d){
  var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  d.getElementsByTagName('head')[0].appendChild(js);
}(document));
this.test = function() {
    alert('test');
} 
```

当我在 FB init 上调用函数`test()`时结果是“ `TypeError: this.test is not a function`”，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:33:28.127

范围问题，调用测试函数时去掉“this”。“This”指的是 fbAsyncInit 函数。

新代码（未经测试，但应该可以工作）：

```
window.fbAsyncInit = function() {
   FB.init({appId: appId, status: true, cookie: true, xfbml: true});

   test();  
};
// Load the SDK Asynchronously
(function(d){
  var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  d.getElementsByTagName('head')[0].appendChild(js);
}(document));
function test () {
    alert('test');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:34:45.043

`this`在功能和`this`全局范围内是指向不同对象的链接；你可以`this`用它代替`window`它会工作。

# jquery - jQuery blockUI 仅在第一页加载时

> ID：13431500
> 
> 赞同：0
> 
> 时间：2012-11-17T14:28:55.407
> 
> 标签：jquery, popup, blockui, jquery-blockui

我将这个片段用于 blockUI（jQuery 插件）来显示 'blahblah' 文本 15 秒，然后它会自动消失并解锁页面。

```
 <script>
 jQuery(document).ready(function() { 

         jQuery.blockUI({ 
             message: 'Blah blahblah', 
             timeout: 15000 
         }); 
 }); 
 </script> 
```

有没有办法只在第一页加载而不是在网站的每个页面上显示这个..？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:10:15.540

您没有指定是否要运行 blockUI：

1.  只有在用户第一次访问该站点时。如果是，请在运行 blockUI 代码之前检查是否设置了 cookie，然后在运行代码后设置它。请参阅[当（且仅当）cookie 不存在时创建 cookie](https://stackoverflow.com/questions/2824021/check-if-cookie-exists-if-not-create-it)。
2.  每次用户访问网站上的特定页面时只有一次。如果是这样，只需设置并检查该页面上的 cookie。否则，使用`homediv`特定于该页面的 div （例如）并将代码放入加载函数中：`$('#homediv').load(function () { //put the logic above here });`

**编辑**

如果是第一个，并且您只想每周向网站访问者显示一次消息，请尝试以下操作：

```
jQuery(document).ready(function() {
  if($.cookie('firstvisit') == null) { 
     jQuery.blockUI({
         message: 'Blah blahblah',
         timeout: 15000
     });
     $.cookie('firstvisit', '0', {expires:7, path:'/'});
  }
}); 
```

将 更改为`7`要再次显示消息之前要经过的天数。

# actionscript-3 - Flash + javascript 调用 + 跨域

> ID：13431503
> 
> 赞同：0
> 
> 时间：2012-11-17T14:29:20.710
> 
> 标签：actionscript-3, flash, cross-domain

我遇到了 Flash、跨域和 javascript 调用的问题。

我正在运行一个 PHP 项目。在开发中，我没有为图像和 swf 文件使用任何子域，并且一切正常。

在生产服务器中，我所有的图像和闪存文件都是从 subdomain.domain.com 之类的子域加载的。Javascript 文件托管在 domain.com 中。在某些时候，javascript 文件会加载 swf 文件，但不会显示。除此之外，swf 文件应该调用 javascript 函数，但这些函数不会被执行（用 firebug 测试）。

为什么不从 swf 文件执行 javascript 函数？我认为该错误是因为 swf 文件位于子域中，而 javascript 位于域中，并且它们之间没有通信，但我不知道如何修复它。你能给我一些想法吗？

谢谢

# postgresql - 为什么在一个条件具有相同值的每个子句中有两个条件的多个 WHERE 子句 SQL SELECT 语句需要很长时间？

> ID：13431507
> 
> 赞同：3
> 
> 时间：2012-11-17T14:29:42.420
> 
> 标签：postgresql, select

我在 Postgres 9.1 数据库上运行了两个不同的 SQL 查询：

```
SELECT device_id, country FROM devices WHERE
(device_id = '97c179bd' AND country = 'US') OR
(device_id = 'bf5f50c6' AND country = 'US') OR
....
(device_id = '0e66c04d' AND country = 'US') 
```

运行 12 秒（由 OR 分隔的 3620 个子句）

和

```
SELECT device_id, country FROM devices WHERE
(device_id = '97c179bd' AND country = 'US') OR
(device_id = 'bf5f50c6' AND country = 'US') OR
....
(device_id = '0e66c04d' AND country = 'US') OR
(device_id = '0e66c04d' AND country = 'different') 
```

运行 0.6 秒（由 OR 分隔的 3620 个子句）

在第一个中，每个子句中的国家条件都是相同的。在第二个中，我在最后一个条款中将国家/地区切换为“不同”。

第一个 select 语句需要 12 秒运行，第二个 select 语句需要 0.6 秒运行。

在第一个查询中，CPU 在几乎所有 12 秒内都固定在 100%，而没有任何磁盘读取，这表明它很可能是解析器花费了这么长时间。第二个查询不会发生这种情况。

我已经运行了 EXPLAIN ANALYZE 并获得了关于如何分解两个查询的完全相同的结果。

这里发生了什么？为什么每个 WHERE 子句语句中的第二个条件相同会导致查询时间更长？

**编辑：**

来自第一个查询的 EXPLAIN ANALYZE 的前几行：

设备上的位图堆扫描（成本=18807.49..52584.74 行=3564 宽度=39）（实际时间=73.994..78.994 行=3620 循环=1）

重新检查条件： (((device_id = '97c179bd'::text) AND (country = 'US'::text)) OR ((device_id = 'bf5f50c6'::text) AND (country = 'US'::text) ) OR ((device_id = '3b05d35a'::text) AND (country = 'US'::text)) OR ((device_id = 'c6684bc0'::text) AND (country = 'US'::text)) 或((device_id = '0e66c04d'::text) AND (country = 'US'::text))

来自第二个查询的 EXPLAIN ANALYZE 的前几行：

设备上的位图堆扫描（成本=18806.59..85317.68 行=3563 宽度=39）（实际时间=74.737..79.769 行=3619 循环=1）

重新检查条件： (((device_id = '97c179bd'::text) AND (country = 'US'::text)) OR ((device_id = 'bf5f50c6'::text) AND (country = 'US'::text) ) OR ((device_id = '3b05d35a'::text) AND (country = 'US'::text)) OR ((device_id = 'c6684bc0'::text) AND (country = 'US'::text)) 或((device_id = '0e66c04d'::text) AND (country = 'US'::text))

**编辑2：**

以下是两个 EXPLAIN ANALYZE 结果：

[https://dl.dropbox.com/u/4747107/explain/query1slow.htm](https://dl.dropbox.com/u/4747107/explain/query1slow.htm)

[https://dl.dropbox.com/u/4747107/explain/query2fast.htm](https://dl.dropbox.com/u/4747107/explain/query2fast.htm)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T02:41:46.057

虽然不能解释性能差异，但此问题的最佳解决方案将重构您的查询以不使用超过 3000 个`OR`子句。这太可怕了。

代替：

```
SELECT device_id, country FROM devices WHERE
(device_id = '97c179bd' AND country = 'US') OR
(device_id = 'bf5f50c6' AND country = 'US') OR
....
(device_id = '0e66c04d' AND country = 'US') 
```

写：

```
SELECT d.device_id, d.country
FROM devices d 
INNER JOIN (VALUES 
            ('97c179bd','US'),
            ('bf5f50c6','US'),
            ('0e66c04d','US')
) v(device_id,country) USING (device_id,country); 
```

演示设置：

```
create table devices (device_id text, country text, primary key (device_id,country));

insert into devices values 
        ('97c179bd','US'),
        ('bf5f50c6','US'),
        ('0e66c04d','US'),('0e66c04d','different'); 
```

演示输出：

```
regress=>     SELECT d.device_id, d.country
    FROM devices d 
    INNER JOIN (VALUES 
                ('97c179bd','US'),
                ('bf5f50c6','US'),
                ('0e66c04d','US')
    ) v(device_id,country) USING (device_id,country);
 device_id | country 
-----------+---------
 97c179bd  | US
 bf5f50c6  | US
 0e66c04d  | US
(3 rows) 
```

对于较大的值列表，可能值得创建一个临时表并`INSERT`ing 或`COPY`ing 到其中，而不是使用内联`VALUES`列表。对于真正庞大的数据集，您可能会受益于在`device_id,country`.

# javascript - 您将如何使用 javascript 和 jQuery 在下面的这个 2d 游戏中检测到碰撞？

> ID：13431509
> 
> 赞同：1
> 
> 时间：2012-11-17T14:29:51.013
> 
> 标签：javascript, jquery, collision-detection, collision

我做了一个简单的游戏，可以让你通过按箭头键来移动一个紫色的盒子。紫色框位于蓝色边界内。我希望能够防止紫色盒子突破蓝色边界并留在里面，我知道这涉及到碰撞，但我似乎不明白如何做到这一点。这是我到目前为止编写的代码：

```
 <!DOCTYPE html>
          <html>
        <head>
       <style>
       body
       {
       background-color:pink;
      }
       #bob
        {
      width:400px;
     height:500px;
       padding:10px;
     border:5px solid blue;
      margin:0px;
      }
        </style>
        </head>
        <body>

        <div id="bob">
      <div id="k"  style="background- color:purple;width:40px;height:40px;position:absolute" onkeydown="keydownControl(this)"/>
     </div>

      <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js">
      </script>
        <script>
    $('html').keyup(function(e){
       if(e.which==37)
     {
   $("#k").animate({left:"-=10px"},1);
    }
   if(e.which==39)
  {
     $("#k").animate({left:"+=10px"},1);
     }
    if(e.which==40)
    {
       $("#k").animate({top:"+=10px"},1);
    }
    if(e.which==38)
      {
   $("#k").animate({top:"-=10px"},1);
       }
       });
   </script>

       </body>
         </html> 
```

所以假设我正在移动紫色盒子，它碰巧碰到了蓝色方块。如果发生这种情况，必须停止朝那个方向移动，直到它不再与蓝色方块接触，从而防止它逃离蓝色方块。我将如何做到这一点，使用 JS 和 jQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:02:14.163

看看 jquery animate 的`step`函数。您必须在动画的每一步检查对象是否已到达边缘。[这里](http://www.bennadel.com/blog/1856-Using-jQuery-s-Animate-Step-Callback-Function-To-Create-Custom-Animations.htm)做了一些非常相似的事情

请参阅底部的“亲自尝试...”链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:22:42.810

使用盒子时，命中检测相当简单。听起来您尝试做的是在静态包含框（#bob）中包含 1 个可移动框（#k）。

基本概念是为每个按键向上事件添加一些简单的逻辑检查，以检查您正在考虑移动到的位置是否将退出边界。如果检查确定新位置将退出边界，它不会打扰动画。

每个方向都会有一个稍微不同的检查。

**向上**

尝试向上移动时，您所要做的就是检查移动框的新上界是否*大于*0。*您可以使用`jQuery('#k').position().top`来确定可移动框的上界。*

**向下**

当尝试向下移动时，您所要做的就是检查移动框的新底部边界是否*小于*包含框的高度。*您可以使用`jQuery('#k').position().top+jQuery('#k').height()`来确定可移动框的下界。并`jQuery('#bob').height()`确定包含框的高度。*

**剩下**

当尝试向左移动时，您所要做的就是检查移动框的新左边界是否*大于*0。*您可以使用`jQuery('#k').position().left`来确定可移动框的左边界。*

**对**

当尝试向右移动时，您所要做的就是检查移动框的新右边界是否*小于*包含框的宽度。*您可以使用`jQuery('#k').position().left+jQuery('#k').width()`来确定可移动框的右边界。并`jQuery('#bob').width()`确定包含框的宽度。*

* * *

**补充笔记**

1.  您可能应该制作 #bob `position:relative`。目前位置将相对于身体标签的位置而不是#bob的位置进行计算（它们现在恰好共享相同的坐标）。
2.  “下”和“右”有额外逻辑的原因是 DOM 中的位置是根据左上角确定的。为了弥补这一点，我们必须分别添加对象的高度或宽度。

* * *

**背景信息 - HTML/jQuery 定位**

帮助说明 HTML/jQuery 定位的图表： [https ://docs.google.com/drawings/d/121mfxpapfmcRD2UV7qoMY5RdoH-4womiheqDHtQ_YWY/edit](https://docs.google.com/drawings/d/121mfxpapfmcRD2UV7qoMY5RdoH-4womiheqDHtQ_YWY/edit)

每个元素的坐标源自其左上角。

在 HTML/jQuery 中，绝对定位元素的位置是相对于其父元素的原点的*（为了简单起见，目前忽略位置继承）*。如果其左上角与其父级的左上角相同，则其位置将为 (0,0)。当它远离其父级的左上角时，它的坐标变为 2 个坐标之间的水平 (x) 和垂直 (y) 间隙。

# haskell - 使用 Parsec 按字符串正确拆分

> ID：13431512
> 
> 赞同：2
> 
> 时间：2012-11-17T14:30:28.833
> 
> 标签：haskell, parsec

下面的代码输出`Right ["1<!>2<!>3"]`，但我需要`Right ["1", "2", "3"]`。

```
import Text.ParserCombinators.Parsec

response = contents :: CharParser () [String]
  where
    contents = sepBy content contentDelimiter
    contentDelimiter = string "<!>"
    content = many anyChar

main = do
  putStrLn $ show $ parse response "Response" "1<!>2<!>3" 
```

我想这里的问题是解析器在测试分隔符`content`之前消耗了所有输入。`sepBy`所以，我的问题是：

1.  我的假设是否正确？如果没有，我犯了什么错误？

2.  对于这样的问题，您会推荐什么解决方案？（使用秒差）

*** `content`必须匹配任何不包含分隔符的字符串。这`1<!>2<!>3`只是一个例子，它可以是`dslkf\n><!>dsf<!>3`什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T14:43:27.353

对于您的第一个示例，您将替换

```
content = many anyChar 
```

和

```
content = many digit 
```

这样内容的解析器就不会错误地匹配分隔符。

也许您想匹配的不仅仅是数字，但即便如此，我还是建议您仔细考虑s之间的有效*内容*`<!>`并编写一个解析器来执行此操作。

**为什么？**
一旦你有了一个非常好的内容解析器，你的响应定义就会很完美。这样，您的内容可以包含`mystring = "hello<!>mum"`而不会被顶级解析器截断 - 低级`stringLiteral`解析器将吃掉整个内容`"hello<!>mum"`，而顶级解析器将永远不会看到`<!>`正确和无辜地包含在其中。

**一般来说，...**
在大多数解析情况下，最好明确您的内容中允许的内容，并仅解析这些内容，原因有以下三个：

*   可重用性（然后您可以在更大的解析器中使用它）
*   正确性
*   通常是效率——如果你避免过多的前瞻，你的解析器运行得更快。

可重用性很重要。目前，如果您使用的解析器只是拆分`<!>`并吃掉其他所有内容，则可以保证吃掉整个输入，并且您将无法再进行任何解析。

**自下而上**
您的解析器应该从头开始工作-您在评论中很好地描述了这一点，即“将解析器从特定堆叠到一般”。

为了便于测试，按顺序编写它们是最简单的，因此首先编写一个匹配 a `stringChar`then `stringLiteral`before `member`before `array`before `object`before `json`before `content`then的内容`response`。您可以让他们在此过程中递归地互相调用。然后，您可以`parseTest`像往常一样测试每个小家伙；输入`parseTest response "1<!>2<!>3"`ghci 比重写 main 和编译更快。

**自顶向下？**
自上而下编写解析器并没有错，只是更难。你可以写

```
response = many $ content `sepBy` contentSeparator
content = json <|> somethingElse
json = object <|> array
array = ... 
```

但是在您编写了最小的解析器之前，没有什么是可测试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:03:43.580

我建议使用 的解决方案`noneOf`，前提是 '<' 和 '!' 或 '>' 都不是您的内容的一部分。

```
import Text.ParserCombinators.Parsec

response = contents :: CharParser () [String]
 where
   contents = sepBy content contentDelimiter
   contentDelimiter = string "<!>"
   content = many (noneOf ['<','!','>']) 

main = print $ parse response "Response" "1<!>2<!>3" 
```

# javascript - 删除煎茶触摸中的“按钮样式”？

> ID：13431513
> 
> 赞同：0
> 
> 时间：2012-11-17T14:30:35.677
> 
> 标签：javascript, css, cordova, button, sencha-touch

我在工具栏中使用它：

```
items: [
                    { text: 'Hem',  },
                    { text: 'Sport' },
                    { text: 'Nöje'  },
                ] 
```

我得到的结果如下图所示：

![例子](../Images/0ca54b4a8287baa513d5a1bab9a1d576.png)

我得到这种看起来像按钮的样式，我不想要那个。我只希望这些按钮显示为图片 2：

![例子](../Images/f1a769f4137f54211e22e4ee1615ca58.png)

如何？在图 2 中，我有一个来自“选项卡”示例的屏幕截图。我不能创建一个选项卡，因为那样我就不能在按钮之间滚动......我真的很陌生，需要很大的帮助。我的英语不太好，所以请使用简单的语言。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:34:15.003

通过为每个按钮添加，您肯定可以使按钮看起来**圆润。**`ui:'round'`这是一种解决方案。但我想回答你的这句话。

> 我无法创建一个选项卡，因为那样我就无法在按钮之间滚动

这不是真的。如果按钮超出您的视口，您绝对可以在按钮之间滚动。我自己在需要 7 个选项卡的移动应用程序中使用它们，而这些选项卡不能在横向和纵向模式下都安装。您需要设置一个属性以使选项卡可滚动。这是对我有用的代码示例。

```
Ext.create('Ext.TabPanel', {
    fullscreen: true,
    tabBarPosition: 'top',
    tabBar: {
        scrollable: {
            direction: 'horizontal'
        }
    },
    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            title: 'Monday',
            html: 'Monday Screen'
        },
        {
            title: 'Tuesday',
            html: 'Tuesday Screen'
        },
        {
            title: 'Wednesday',
            html: 'Wednesday Screen'
        },
        {
            title: 'Thursday',           
            html: 'Thursday Screen'
        },
        {
            title: 'Firday',
            html: 'Firday Screen'
        },
        {
            title: 'Saturday',
            html: 'Saturday Screen'
        },
        {
            title: 'Sunday',
            html: 'Sunday Screen'
        }
    ]
}); 
```

试一试，因为这绝对有效。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:57:06.867

在 Sencha touch 1 和 Sencha touch 2 中，以下代码都会生成圆形按钮：

```
xtype: 'toolbar',
items : [
            { text: 'Hem', ui :'round' },
            { text: 'Sport', ui :'round' },
            { text: 'Nöje', ui :'round'  },
        ] 
```

即：只需为数组`ui : 'round'`中的每个项目对象添加键和值。`items`

# opengl - GLSL 兼容性问题

> ID：13431517
> 
> 赞同：2
> 
> 时间：2012-11-17T14:31:02.757
> 
> 标签：opengl, glsl, shader, lwjgl

我一直在使用带有 GLSL 1.3 的 lwjgl 在我的笔记本电脑上开发一个项目。我的着色器在我的笔记本电脑上编译得很好，但是，当我试图在我的桌面上编译具有较新显卡的相同着色器时，我收到一个错误，指出着色器无法编译，因为着色器中存在错误。但是，着色器日志不会输出任何错误。我认为 GLSL 与其自身向后兼容。

```
GL11.glGetString(GL20.GL_SHADING_LANGUAGE_VERSION); 
```

返回

```
3.30 NVIDIA via Cg compiler 
```

我假设它与标准 GLSL 3.30 相同。这是一个示例 vert 和 frag 着色器，适用于我的笔记本电脑而不是我的台式机。

basic_color.vert

```
#version 130

uniform mat4 projection_matrix;
uniform mat4 modelview_matrix;

in vec3 a_Vertex;
in vec4 a_Color;
out vec4 color;

void main(void) 
{
    vec4 pos = modelview_matrix * vec4(a_Vertex, 1.0);
    gl_Position = projection_matrix * pos;  
    color = a_Color;
} 
```

basic_color.frag

```
#version 130

in vec4 color;
out vec4 outColor;

void main(void) 
{
    outColor = color;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:42:25.670

尝试`#version 330 compatibility`或`#version 330`使用可变和 gl_FragColor, gl_Position 而不是 in\out

# hadoop - Hadoop数据和控制流

> ID：13431520
> 
> 赞同：0
> 
> 时间：2012-11-17T14:31:40.813
> 
> 标签：hadoop, mapreduce, control-flow, dataflow

我正在编写一个 Hadoop 应用程序，但似乎我误解了 hadoop 的工作原理。我的输入文件是地图的瓦片，根据[QuadTile](http://wiki.openstreetmap.org/wiki/QuadTiles)原则命名。我需要对它们进行二次采样，并将它们拼接在一起，直到我有一个覆盖更大区域但分辨率更低的某个更高级别的图块。就像缩小谷歌地图一样。

我所做的一件事是我编写了一个映射器，它在每个（不可分割的）图块上执行，如下所示：

```
public void map(Text keyT, ImageWritable value, Context context) throws IOException, InterruptedException {

     String key = keyT.toString();

    //check whether file needs to be processed
     if(key.startsWith(context.getJobName(), 0)){

         String newKey = key.substring(0, key.length()-1);
         ImageWritable iw = subSample(value);
         char region = key.charAt(key.length()-1);
         iw.setRegion(region);
         context.write(new Text(newKey), iw);
     }else{
         //tile not needed in calculation
     }
 } 
```

我的减速器看起来像这样：

```
public void reduce(Text key, Iterable<ImageWritable> values, Context context) throws IOException, InterruptedException{

    ImageWritable higherLevelTile = new ImageWritable();
    int i = 0;
    for(ImageWritable s : values){
        int width = s.getWidth();
        int height = s.getHeight();
        char c = Character.toUpperCase(s.getRegion());
        int basex=0, basey=0;
        if(c=='A'){
            basex = basey = 0;
        }else if(c=='B'){
            basex = width;
            basey = 0;
        }else if(c=='C'){
            basex = 0;
            basey = height;             
        }else{
            basex = width;
            basey = height;
        }

        BufferedImage toDraw = s.getBufferedImage();
        Graphics g = higherLevelTile.getBufferedImage().getGraphics();
        g.drawImage(toDraw, basex, basey, null);
    }               
    context.write(key, higherLevelTile);

} 
```

正如您可能从我的代码中得出的那样，我希望 hadoop 以以下方式执行：1）映射一级的所有图块 2）进行第一次减少。在这里，我希望 Iterable 值具有四个元素：较低级别的四个子采样图块。3) 映射当前在上下文中的所有瓦片 4) 减少上下文中的所有瓦片。同样，可迭代值将有 4 个元素... 5) ... 重复... 6) 当没有更多地图时 -> 写入输出

事实证明，这是不正确的。在每个 Map 之后都会调用我的 reducer，而 Iterable 似乎从来没有超过一个元素。我试图通过假设 Iterable 将具有 2 个元素来稍微更改 reducer 代码来解决这个问题：一个子采样值和一个部分完成的高级瓦片。事实证明，这也不正确。

Can anyone tell me, or point me towards, how the flow of hadoop actually is? What should I do to make my use-case work? I hope I explained it clearly.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:56:49.837

Your assumption is right that all of the maps complete before the first reduce starts. That is because each reduce is guaranteed to get its input in sorted order and the last map to finish may produce the first key for all of the reduces.

Each map produces its output, a pluggable interface called the partitioner picks the reduce that should receive each key. The default uses `key.hashCode() % num_reduces`, because that gives good distribution in the normal case. That might be your problem since there is no requirement `"A"`, `"AB"`, and `"ABC"` will go to the same reduce.

最后，每个reduce 都会为其每个key 调用一次。迭代器遍历与同一键关联的值。请注意，这些值通常是未排序的，但可以通过二级排序来控制。

看看：[http](http://riccomini.name/posts/hadoop/2009-11-13-sort-reducer-input-value-hadoop/) ://riccomini.name/posts/hadoop/2009-11-13-sort-reducer-input-value-hadoop/ 。

如果你想要一个二级排序的例子，我写了一个并将它放在 Hadoop 例子中。[http://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-examples/src/main/java/org/apache/hadoop/examples/SecondarySort.java](http://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-examples/src/main/java/org/apache/hadoop/examples/SecondarySort.java)

# api - 如何通过 API 在 sort-order=manual 的智能集合中定义产品的显示顺序？

> ID：13431528
> 
> 赞同：1
> 
> 时间：2012-11-17T14:33:14.170
> 
> 标签：api, shopify

我创建了一个智能集合并将排序顺序属性更改为“手动”，因此我可以定义在呈现此集合时应该首先出现的产品。接下来我需要通过 API 更改一些产品，使它们首先出现（更高优先级）。我要更改什么产品属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:39:09.297

集合的条目称为collects（我知道，这很奇怪），这就是Shopify 存储条目在集合中的位置的地方。

查看[收集资源上的“位置”字段](http://api.shopify.com/collect.html)

# iphone - 为什么我的 iPhone UITableView 原型单元格图像水平移动？

> ID：13431529
> 
> 赞同：2
> 
> 时间：2012-11-17T14:33:15.870
> 
> 标签：iphone, uitableview, uiimage, prototype

在我的表格单元格中添加了标志。使用情节提要将 UIImageView 放在原本为空的原型单元格中并很好地调整其大小（47x34）。然后在这里添加代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell1";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [[[content objectAtIndex:indexPath.section] objectForKey:@"rowValues"] objectAtIndex:indexPath.row];
    cellTxt = cell.textLabel.text;

    UIImageView *flagImg = (UIImageView *) [cell viewWithTag:10];
    NSString *imgFilenm = [cellTxt stringByAppendingString:@".jpg"];
    flagImg.image = [UIImage imageNamed: imgFilenm ];
    cell.imageView.frame = CGRectMake(0, 0, 47, 34);   //  not needed, and doesn't fix it

    return cell;
} 
```

图像出现了，但向左挤压到只有大约 8 个像素。为什么？以及如何纠正？谢谢！ ![小旗](../Images/76659ab6d656dbe5cc8d1fdba4a4d50e.png) 原件： ![伯利兹](../Images/931ff40d0b9a9de057a8e94a5540b523.png)

** 编辑 ** 我将单元格文本切换为我添加的 UILabel。这是代码：

```
UILabel *nameLbl = (UILabel *)[cell viewWithTag:5];
nameLbl.text = [[[content objectAtIndex:indexPath.section] objectForKey:@"rowValues"] objectAtIndex:indexPath.row]; 
```

以及它在故事板中的样子： ![原始细胞](../Images/88d32aa60bab84c3d6149697e0a2a196.png)

但现在旗子甚至没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:28:43.567

让它工作使用：

```
UIImageView *cellImage = (UIImageView *)[cell viewWithTag:10];
[cellImage setImage:[UIImage imageNamed:[NSString stringWithFormat:@"%@.jpg", [self.countries objectAtIndex: [indexPath row]]]]]; 
```

不知道为什么其他方法不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:47:21.653

你的旗帜没有被“压扁”。它们实际上隐藏在单元格的标题后面。尝试类似：

```
UIImageView *flagImg = (UIImageView *) [cell viewWithTag:10];
NSString *imgFilenm = [cellTxt stringByAppendingString:@".jpg"];
flagImg.image = [UIImage imageNamed: imgFilenm ];
[cell bringSubviewToFront:flagImg]; 
```

# ruby-on-rails-3 - 设计忘记密码和html5模式窗口

> ID：13431535
> 
> 赞同：0
> 
> 时间：2012-11-17T14:33:49.193
> 
> 标签：ruby-on-rails-3, html, devise

我想，如果用户点击“忘记密码”链接，它应该出现一个模式窗口，然后在输入字段中输入电子邮件并发送后，它应该重定向到登录页面。

它应该与 html5 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:38:05.680

You could use [Twitter Bootstrap](http://twitter.github.com/bootstrap/javascript.html#modals) it supports modals.

# javascript - 如何使用 JQuery 或 JavaScript 在 div 之间获取 HTML

> ID：13431538
> 
> 赞同：0
> 
> 时间：2012-11-17T14:34:28.347
> 
> 标签：javascript, jquery, html

如何使用 JQuery 或 javascript 在 div 之间获取 HTML，或者这是不可能的？

```
<div>
   not this text
</div>

but this text

<div>
   not this text
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:40:31.047

根据您发布的标记，您可以尝试以下操作。

```
var elem = document.getElementsByTagName('div')[0].nextSibling;
var text = elem.textContent || elem.innerText; 
```

[http://jsfiddle.net/8gLUc/](http://jsfiddle.net/8gLUc/)

或者，如果您想选择特定的 div 元素：

```
var elem = $('#aParent div:first').get(0).nextSibling;
var text = elem.textContent || elem.innerText; 
```

# java - 为什么 im4java Java API 需要本机可执行文件？

> ID：13431540
> 
> 赞同：1
> 
> 时间：2012-11-17T14:34:34.650
> 
> 标签：java, imagemagick, im4java

是否可以在不安装的情况下运行[im4java](http://im4java.sourceforge.net/)`ImageMagick-6.7.6-1-Q16-windows-dll.exe`应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:16:59.880

[主页](http://im4java.sourceforge.net/)解释得很清楚：

> im4java 是 ImageMagick 命令行的纯 java 接口

和

> im4java [...] 只是为 ImageMagick 命令生成命令行并将生成的行传递给选定的 IM 命令（使用 java.lang.ProcessBuilder.start() 方法）。

如果没有命令行，您希望它如何工作？

因此，要回答您帖子正文中的问题：不。由于 im4java 只是一个包装器，所以你必须安装 ImageMagick，否则它没有任何东西可以包装！

# css - WordPress 主题定制 (CSS)

> ID：13431542
> 
> 赞同：0
> 
> 时间：2012-11-17T14:34:53.557
> 
> 标签：css, wordpress

我无法自定义我的 wordpress 主题。如果您在[http://www.arqui9.com](http://www.arqui9.com)中看到，在页脚区域中，联系人位于 facebook 小部件上方。我想改变它，我想要 facebook 小部件下方的联系人。我尝试更改 #footer .fr 元素中的位置和边距顶部属性，但没有成功。

两个元素（联系人和 facebook 小部件）都属于页脚元素：

```
#footer {
clear: both;
position: relative;
background: transparent url(...) no-repeat center 0;
color: #888;
margin-top: 90px; 
```

联系人属于具有以下 css 的以下元素：

```
#footer .fr {
width: 220px;
position: relative;
font-size: 12px;
margin-top: 10px; 
```

最后，facebbok 小部件位于以下元素上：

```
#footer .column {
float: left;
width: 210px;
margin: 0 0 5px 20px;
} 
```

关于如何改变元素位置的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:49:35.483

移动

```
<div class="fr">
    <a title="" href="http://www.arqui9.com"><img id="logosmall" src="http://www.arqui9.com/wp-content/uploads/2011/11/LogoSMALLER.png" alt=""></a>
     <p>Copyright © 2012 Arqui9 - Visual+3D,<br>
        All Rights Reserved - pfernandes@arqui9.com</p>
</div> 
```

低于最后一个“列”div。

见[http://jsfiddle.net/qQaxM/](http://jsfiddle.net/qQaxM/)

# bash - Need to change file content with script but retain original filenames

> ID：13431545
> 
> 赞同：2
> 
> 时间：2012-11-17T14:35:16.670
> 
> 标签：bash, sed, awk, filenames

I have several thousands of files with coded weather information in a folder. To every file I need to add a header and footer with control characters. This is not the problem as I have the header and footer in separate files (achieved with the `cat` command in a bash script).

However, the modified files need to retain their original names - this gives me a problem as I only have a very basic scripting knowledge. The reason for keeping them is that these files will be parsed and decoded. The file names contain vital information for how the decoders will process the content.

All the files that are to be decoded are in a separate file, `list_of_files_to_decode.txt`.

A part of the folder content can look like this:

```
a_snvs02wiix170600_c_eswi_20121117062131_76.txt
a_smci40babj170600_c_kwbc_20121117061545_3.txt
a_sath40vtbb170600_c_ekmi_20121117061604_95.txt
a_usxx40mynn70600cca_c_edzw_20121117062020_34.txt
a_siin40dems170600_c_ojam_20121117062020_40.txt
a_smxx40fapr170600rra_c_lowm_20121117062604_67.txt    
list_of_files_to_decode.txt   
start-seq.txt    
stop-seq.txt 
```

I have checked the web, and tested some of my own ideas - using `awk` and `sed` - but I can't really find that any suitable way of how I can achieve this in an easy way. So, I would appreciate some help or hints of how to proceed.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:40:23.170

```
while IFS= read -r file; do
    cat header.txt "$file" footer.txt > newfile && mv newfile "$file"
done < list_of_files_to_decode.txt 
```

**解释**

*   我只是使用连接和 shell 重定向
*   `&&`是捷径。这与`if condition; then action; fi`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:38:22.330

无环方式`sed`：

```
OLDIFS=$IFS; IFS=$'\n'
sed -i '1 r header.txt
        1 N
        $ r footer.txt' $(<list_of_files_to_decode.txt)
IFS=$OLDIFS 
```

* * *

笔记：

*   `IFS`仅在文件名中有空格时才设置为换行符
*   `r`在读取下一行时打印文件的内容
*   `1 N`防止在内容之前打印第一行`header.txt`

    （细节：它读取第 2 行并附加到模式空间，触发`r`打印出 的内容`header.txt`。之后，现在由第 1 行和第 2 行组成的模式空间仅在循环结束时打印出来）

*   当然，`IFS`如果您使用的是脚本，则可能不需要备份和重置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:41:33.543

唯一安全的方法是先重命名原始文件

```
mv $file $file.orig
cat header $file.orig footer > $file && rm $file.orig 
```

反之亦然 创建一个新文件然后覆盖原始文件

```
cat header $file footer > $file.new && mv -f $file.new $file 
```

# flot - How to control the outer margin on Flot graph

> ID：13431547
> 
> 赞同：4
> 
> 时间：2012-11-17T14:35:22.307
> 
> 标签：flot

I am having some difficulties figuring out how to control the outer margin on the [Flot](https://github.com/flot/flot/) graph I have implemented. I have tried many options; minBorderMargin, margin, axisMargin, labelMargin. Neither, set individually or all together, didn't change a thing.

Want I want to achieve is complete control over the width of the right margin.

As you will see [in this example](http://jsfiddle.net/JaC5g/1/), there's a margin to the right, even with minBorderMargin set to 0 (zero).

Here's the source code:

```
var $wrapper = $('<div />').addClass('wrapper'),
    $graph = $('.graph'),
    data = {
        color: '#dba400', 
        hoverable: true,
        data: [
            // [1, 215000],
            // [2, 205000],
            // [3, 0],
            // [4, 70000],
            [35, 270000],
            [36, 105000],
            [37, 60000],
            [38, 0],
            [39, 110000]
        ]
    },
    options = {
        xaxis: {
            color: '#f0f0f0',
            min: 34.5,
            max: 39.5,
            tickColor: 'transparent',
            tickFormatter: function(val) {
                return 'RND' + val;
            }
        },
        yaxis: {
            color: '#f0f0f0',
            tickColor: null,
            tickFormatter: function(val) {
                var units = ['', 'K', 'M'],
                    unit = units.shift();

                while (val > 1000 && units.length > 0) {
                    val /= 1000;
                    unit = units.shift();
                }

                return val + unit;
            }
        },
        grid: {
            borderWidth: 0,
            minBorderMargin: 0
        },
        hooks: {
            processOffset: function(plot, offset) {
                console.log(plot, offset);
            }
        },
        series: {
            points: {
                radius: 0,
                lineWidth: 0
            }
        }
    };

$graph.append($wrapper);
$.plot($wrapper, [data], options);​ 
```

Bonus question: Is there an easy way to left align first tick label and right align last tick label?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:54:53.357

如果您找不到更改绘图的方法，您可以考虑将占位符 div 放在另一个将溢出设置为隐藏的 div 中。然后，您可以通过控制外部 div 的大小或内部 div 的位置来“切断”任何一侧的额外边距。

# php - Can't execute php files in wordpress directory

> ID：13431549
> 
> 赞同：2
> 
> 时间：2012-11-17T14:35:36.630
> 
> 标签：php, wordpress, .htaccess, file-permissions

Here is my problem. I have a wordpress site, and I'm trying to make a file to migrate data from one database to another. So I have migration.php in wordpress root folder, but when I navigate to that file, I get error 404 Page Not found from Wordpress. I have tried different .htaccess fixes, but no luck my .htaccess looks like this

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T14:39:56.060

可能是文件权限或 .htaccess 设置导致了这种情况。此外，您应该确保该文件存在于真实文件系统路径中。

# node.js - NodeJS + mongo-native：使用密码访问

> ID：13431550
> 
> 赞同：0
> 
> 时间：2012-11-17T14:35:48.367
> 
> 标签：node.js, mongodb, authentication

我需要通过登录并通过节点从节点访问我的 mongodb。我现在是怎么做的：

```
var mongo = require('mongodb'),
    Server = mongo.Server,
    Db = mongo.Db,
    ObjectID = require('mongodb').ObjectID;
var BSON = mongo.BSONPure;
var server = new Server('localhost', 27017, {
    auto_reconnect: true
});
var db = new Db('mybase', server); 
```

我应该怎么做才能使用密码进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:57:07.857

[`db.authenticate`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html#authenticate)打开与服务器的连接后调用。

```
db.open(function(err, db) {
    db.authenticate('username', 'password', function(err, result) {
        ...
    });
  });
}); 
```

# mysql - 隔离级别是否仅适用于 SELECTS 而不是 UPDATES？

> ID：13431552
> 
> 赞同：3
> 
> 时间：2012-11-17T14:35:51.963
> 
> 标签：mysql, database, oracle, postgresql

隔离级别是否仅适用于 SELECTS 而不是 UPDATES？

展示 SELECTS 的不同隔离行为的场景

```
1) 0:00 Thread A runs a query that returns 1000 rows that takes 5 minutes to complete
2) 0:02 Thread B runs a query that returns the same 1000 rows
3) 0:05 Thread A updates the last 1 rows in this result set and commits them
4) 0:07 Thread B's query returns* 
```

根据隔离级别，#4 中的结果集要么包含线程 A 的更改，要么不包含。**更新也是如此吗？**

以下是一个示例场景：

```
Thread A: UPDATE ... WHERE primary_key = 1234 AND version = 5
Thread B: UPDATE ... WHERE primary_key = 1234 AND version = 5 
```

如果线程 A 和线程 B 同时进入它们的事务，并且线程 B 在线程 A 之后执行更新，线程 B 的更新会失败还是会“看到”版本 5 的记录并因此成功？

它依赖于数据库吗？例如 Oracle、MySql 和 PostgreSQL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T02:28:43.687

假设您打算展示许多 ORM 使用的“乐观锁定”模式，例如：

```
Thread A: UPDATE ... SET ..., version = 6 WHERE primary_key = 1234 AND version = 5
Thread B: UPDATE ... SET ..., version = 6 primary_key = 1234 AND version = 5 
```

然后在所有合理的隔离级别（我不是 100% 确定 READ UNCOMMITTED - 大多数数据库甚至不支持它）线程 B 将不匹配任何行并且没有效果。

例如，在 PostgreSQL 中，线程 B 最初将匹配与 A 相同的行，但在行更新锁上阻塞，直到线程 A 提交或回滚。此时它会重新检查条件，如果线程 A 已提交，它会发现它不再匹配，所以它什么也不做。行锁定意味着序列化冲突在这种特殊情况下永远不会发挥作用。

在任何健全的数据库中，只有两个更新中的一个会成功 - 第二个将匹配零行或因序列化失败而中止，具体取决于隔离级别和数据库实现。即使在带有 InnoDB 的 MySQL 中也是如此（[请参阅此答案中的详细说明和演示](https://dba.stackexchange.com/a/28890/7788)），至少在 5.5 中也是如此。如果您使用的是 MyISAM，那么正确性和可靠性显然对您来说不是大问题；-)

我不知道有任何数据库将不同的隔离规则应用于`UPDATE`s vs `SELECT`s。毕竟， an的子句、子查询等`UPDATE`需要与 a 相同的隔离保证。s 可以死锁而s 不能（在 PostgreSQL 中；显然他们可以在 MySQL+InnoDB 中）。与s 不同的是， s 在隔离模式下会遭受序列化失败- 但它们具有相同的可见性规则。`WHERE``SELECT``UPDATE``SELECT``SELECT``UPDATE``SERIALIZABLE`

PostgreSQL 关于[并发控制](http://www.postgresql.org/docs/current/static/mvcc.html)的文档很好地解释了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:05:29.213

在 Oracle 中，存在[语句级一致性](http://docs.oracle.com/cd/E11882_01/server.112/e25789/consist.htm#i5700)：

> Oracle 数据库始终强制执行语句级读取一致性，这保证了单个查询返回的数据已提交并且相对于单个时间点保持一致。

这意味着您的 SELECT 示例在 Oracle 中不会像这样工作：线程 B 将返回 select 的结果，就像它们在语句的开头一样。这意味着 Oracle 可能会像查询开始时一样从撤消数据重新创建过去的块，因此长时间运行的查询的结果是有意义的。第 (3) 点中的更新所做的更改不会出现在结果中。

**选择查询在它开始后不会看到所做的事务更改，即使它们已提交。**

更新工作类似，但涉及一些额外的工作。所有更新/删除都以具有标准时间点一致性的标准 SELECT 开始，但在`CURRENT MODE`. 这是因为必须修改的块版本是最后一个。此外，最后一个也是包含有关块上当前锁的信息的那个。Tom Kyte 对 DML 有一个[很好的类比](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:878847787577)（删除和更新的工作方式相同）：

> 想想像这样处理删除：
> 
> ```
> for x in ( select rowid from emp )   --- CONSISTENT GETS
> loop
>    delete from emp where rowid = x.rowid;  --- CURRENT MODE GETS
> end loop; 
> ```

现在，如果我们用更新替换我们的 SELECT，在您的场景中会发生什么？

首先，如果该行仍处于锁定状态（第 (3) 点中的事务尚未提交），则第 (4) 点中的更新将等待 - 直到 (3) 提交或回滚。

如果事务已提交并且您处于`SERIALIZABLE`事务隔离状态，那么您当然会收到错误消息。我们不想修改自事务开始以来已更改的数据（因为这些更改是不可见的）。

在`READ COMMITED`中，有一个有趣的、不直观的发展。当Oracle 获取到被修改的行时，它会在查询开始后意识到数据已经被修改。Oracle 现在无法处理更新，因为这将不一致（此外，这意味着*丢失更新*的情况）。因此，Oracle**重新启动**其查询，如[另一个 askTom 线程](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:11504247549852)中所述：

> 结果集是一致的——但它很可能在重新启动时是一致的。

我们得到第二个“选择”，这一次（希望）以一致的方式获取所有行。由于锁是逐行放置的，所以在第一遍中找到的所有行都应该仍然可用（它们不能被第一遍和第二遍之间的另一个事务修改）。

# php - PHP Get username from another php page

> ID：13431554
> 
> 赞同：2
> 
> 时间：2012-11-17T14:35:52.827
> 
> 标签：php

How do I get my Username and password from one php page that checks to see if the username and password is correct then to another which simply prints out what the user typed in on the page before.

I don't want to use 'include' because that executes my entire php file which will not work because it runs the login form twice and it then redirects me to my invalid login form page.

On a lot of website where you login in on one page then on the next page it says welcome, your name, this is pretty much what I am trying to do.

I have tried to include it, used ob_start() and then include then ob_end_clean(), after the user types they info I tried to put that in one php file, all of these didn't work. I feel it is a lot simpler than all of this but I just don't know how to do it.

Here is my php file that checks if the username and password are correct.

```
<?php
session_start();
$usrArray = array("Shawn","Terri","RJ","Mark");
$pwdArray = array("sjam96","terri","rj","mark");
$usr = $_SESSION['username'];
$pwd = $_SESSION['password'];
$valid = 0;

for($i=0; $i<4; $i++){
    if(($usr == $usrArray[$i]) && ($pwd == $pwdArray[$i])){
    $valid = 1;
    break;
    }
}

if ($valid > 0){
    header ("Location: futurePoolPageCheck.php");
}else {
    header ("Location: Invlaid.html");
}
?> 
```

then this is where it prints it out on the next page:

```
<?php
session_start();
$usr = $_SESSION['username'];
echo $usr;
echo $pwd;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-22T02:28:06.003

当用户成功登录时，您需要将详细信息设置为会话。在您运行登录查询以检查密码、用户名、电子邮件地址等是否匹配后，将用户 ID 放在变量中，例如 $id= $row['id'] 并包含以下行：

```
$_SESSION['user'] = $id; 
```

然后，您可以使用会话作为参考从任何页面上的数据库中提取结果。

或者，如果它只是您要显示的名称，您可以将会话设置为用户的名称，例如

```
$_SESSION['username'] = $row['username']; 
```

然后，您可以检查会话是否已设置并将其回显到您需要使用它的任何地方。

这些只是基本示例，但应该让您知道从那里做什么。

# c - 在不强制转换的情况下将 double 设置为 int 是否安全？

> ID：13431560
> 
> 赞同：3
> 
> 时间：2012-11-17T14:36:23.420
> 
> 标签：c

简单的问题。在我的代码中，我将 double 设置为整数，如下所示：

```
int square_root = sqrt(sum); 
```

我需要明确地转换它吗？

没有铸造，我似乎得到了我想要的结果，即`floor(sqrt(x))`

```
sqrt(4200) = 64
sqrt(42) = 6 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T14:37:51.807

```
 int square_root = sqrt(sum); 
```

在 C 中等价于：

```
int square_root = (int) sqrt(sum); 
```

现在请注意，如果 a 的不可分割部分在 a`double`中不可表示，`int`则行为是未定义的（在这两种情况下）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-17T14:38:33.393

在功能上没有区别，但是显式转换会引起读者的注意，即存在截断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T14:39:51.643

如果您的数字的平方根是整数，则不会影响。但如果它是一个实数（例如 10 的平方根），您将得到一个截断的整数，这可能对您的程序不方便。

# android - 非活动中的 CursorLoader

> ID：13431562
> 
> 赞同：0
> 
> 时间：2012-11-17T14:36:35.553
> 
> 标签：android, android-activity, android-contentprovider, android-cursorloader

我有一个小项目，我从内容提供商那里读取系统指标，如呼叫日志、短信日志等。

我创建了**(Call/SMS)Logger**类来从内容提供者读取信息并将信息保存在**(Call/SMS)Metrics**类的对象中。

**MainActivity**使用**（Call/SMS）Metrics**类的对象中的信息，并使用 databaseOpenHelper 类将数据保存在我自己的数据库中。

现在我打算使用 CursorLoader 从 contentproviders 加载数据。

我看到的例子表明 MainActivity 实现了 LoaderManager.LoaderCallbacks

**当对非活动类进行实际查询时，如何在我的项目中使用它？**

**我可以在 Activity 中创建 I 1 loaderManger 并用于每个非 Activity 吗？**

以下是一些示例代码片段：

从 Main Activity 我调用数据集合，我将上下文传递给 clssess 以便他们可以在管理器光标中使用它

```
private void CollectSystemMetrics() {
    //passing the context in constructor so that it can be passed to 
    //the non activity classes which need it for quering
    SystemMetricsCollector collector = new SystemMetricsCollector(this);        
    _callMetrics = collector.CollectCallMetrics();
    _smsMetrics = collector.CollectSMSMetrics();

    Toast toast = Toast.makeText(
            MyActivity.this,
            "Calls and SMS Data Collected",
            Toast.LENGTH_SHORT);
    toast.show();
} 
```

SystemMetricsCollector 中用于获取 SMSData 的方法

```
public SMSMetrics CollectSMSMetrics() {
    SMSLogger smsLogger = new SMSLogger(_context);
    smsLogger.ReadSMSDataFromPhone();
    return smsLogger.GetSMSMetrics();
} 
```

SMSLogger 类中的变量。

```
Uri smsUri = Uri.parse("content://sms");
String[] selectColumns = null;
String where = null;
String whereArgs[] = null;
String sortBy = null; 
```

SMSLogger 中使用游标读取数据的方法

```
public void ReadSMSDataFromPhone() {
    int inCount = 0, outCountContacts = 0, outCountUnknown = 0;
    Cursor managedCursor;
    managedCursor = _context.getContentResolver().query(
            smsUri,selectColumns,where,whereArgs,sortBy);
    try {
        if (managedCursor.moveToFirst()) {
            int idxAddress = managedCursor.getColumnIndexOrThrow("address");
            int idxType = managedCursor.getColumnIndex("type");
            do {
                int valType = managedCursor.getInt(idxType);
                switch (valType) {
                    case 2://outgoing
                        String valAddress = 
                        managedCursor.getString(idxAddress);
                        if (isContact(valAddress)) outCountContacts++;
                        else outCountUnknown++;
                        break;
                    default://incoming
                        inCount++;
                        break;
                }
            } while (managedCursor.moveToNext());
        }
    } finally {
        managedCursor.close();
    }//end finally
    _smsMetrics.set_receivedSMS(inCount);
    _smsMetrics.set_sentSMSContacts(outCountContacts);
    _smsMetrics.set_sentSMSUnknown(outCountUnknown);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:45:06.247

> 当对非活动类进行实际查询时，如何在我的项目中使用它？

要么让活动成为实际使用的活动`Loaders`，要么不使用`Loaders`。欢迎您使用or`ContentResolver`代替。`AsyncTask``Thread`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:48:19.847

我不是 100% 确定你的用例是什么，但是......

实现 LoaderCallbacks 的活动的重点只是易于使用。你可以在任何你想要的地方声明你的 LoaderCallbacks，然后把它交给 loaderManager：

```
LoaderCallbacks blah = new LoaderCallbacks() {
//Override methods here
}

getLoaderManager().initLoader(LOADER_ID, null, blah); 
```

请注意，这`getLoaderManager()`通常与 Fragment 或 Activity 相关联。

# google-chrome - Force a link in Chrome(or other browser) to open in Mobile Safari on IOS6?

> ID：13431564
> 
> 赞同：2
> 
> 时间：2012-11-17T14:36:39.267
> 
> 标签：google-chrome, ios6, mobile-safari, passbook

I want my customers to be able to download a passbook file. As of this moment Chrome does not support this format and seems to hang on the download.

Is there a way to force a link in Chrome(or any other browser for that matter) to open in Mobile Safari? Or can I otherwise server my customers the passbook file so it is recognised by IOS6?

Right now I am considering either serving them a page with a link that has to be opened in safari or sending them the coupon by email(hoping they use the native email client, since the 3rd party ones dont seem to support passbook either)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:53:43.060

iOS Chrome 从 v23.0.1271.91 开始支持 Passbook .pkpass 文件。确保您使用正确的 mime 类型提供服务`application/vnd.apple.pkpass`。

对于早期版本和其他浏览器，我们会嗅探用户代理并在浏览器中渲染一个 pass。尝试使用不同的浏览器和设备访问此[示例。](https://r.pass.is/RMgjTv2uI4Ti)

# css - Buidling navigation bar - LI tag space between words takes to next line

> ID：13431566
> 
> 赞同：1
> 
> 时间：2012-11-17T14:37:04.503
> 
> 标签：css

I am building a navigation bar for my website . This navigation bar elements are dynamic . To fit the elements automatically I have the below code

```
.mytaboptions {
    position: relative;
    margin: 0px 0 10px 0;
    font-weight: bold;
    font-family: arial;
    font-size: 11px;        
    background-color: #305081;    
}

.mytaboptions li {
    list-style-type: none;
    margin: 0;
    display: table-cell;
    width: 1%;
    background-color: #305081;
}

.mytaboptions li a {
    display: block;
    text-align: center;
    line-height: 15px;
    color: #AAAAAA;
    text-decoration: none;    
}

.mytaboptions li a:hover {
    color: #00788A;
    background: #c7c7c7;
}
.mytaboptions li.active a {
    border-bottom: 2px solid #DADADA;    
}
.mytaboptions li.selected {
    background: #fafbfd;
    border-bottom:none;    
}

.mytaboptions span{
    font-size: 10px;
    font-style:italic;
    color: #AAAAAA;
} 
```

This works fine . But if I have space between words in a tab ( `<li>` tag ) it splits into two lines . If I add `&nbsp;` it works fine .

Please have a look at the below fiddle what I am talking

[http://jsfiddle.net/MJEKa/](http://jsfiddle.net/MJEKa/)

You can see I used `&nbsp;` in the first nav bar and it looks good . But the second one you see it splits . ( You can see **some other option** in the end )

I am wondering any solution without using `&nbsp;` ?

Thanks for your help

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:57:52.840

尝试使用`white-space: nowrap;`停止文本换行。

# c++ - How to make an array with a dynamic size? General usage of dynamic arrays (maybe pointers too)?

> ID：13431567
> 
> 赞同：14
> 
> 时间：2012-11-17T14:37:32.967
> 
> 标签：c++, c, arrays, pointers, dynamic

I'm trying to make a program which

1.  Takes the user input (let's say all of it is `int`)
2.  Store it in an array without a starting size (i.e. not -> `array[5];`); and then
3.  Use the information stored in the array for whatever sinister purposes.

I'm asking for help so that I can learn how to do this on my own if needed.

*   How do I make a dynamic array without a set size?
*   How can I use/access/reach the elements in the above array?

Reading just didn't explain enough for me.

I know it's a very noobish question, and yes, I am a noob, but to change that I need some help.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-17T14:46:24.617

对于**C++**：

如果您只需要一个容器，只需使用`std:vector`. 它会照顾您所需的所有内存分配。但是，如果您想开发自己的动态容器（无论您有什么原因），您必须自己处理内存分配。也就是说，当您的数组增长时，您必须分配新的内存块，将当前的数组值复制到新的内存位置并将新值添加到新分配的内存中。通常将这种逻辑包装在一个单独的类中，例如`GrowingArray`（如标准提供的`vector`类）

**编辑**

要详细说明我的答案（鉴于您将其用于学习目的）：

> 将其存储在没有起始大小的数组中（即不是 -> array[5];）

在这里你想使用这样的东西：`int * myDynamicArray;` 当用户输入一些值时，你分配内存块来存储这些值：`myDynamicArray = new int[5];`使用初始输入的大小。我还建议将数组的大小保存在某个变量中：`int arraySize = 5;` 如果稍后您想将新值附加到您的`myDynamicArray`第一个，您必须为增长的数组（当前数组元素 + 新数组元素）分配新的内存块。假设你有 10 个新值即将到来。然后你会这样做：`int* grownArray = new int[arraySize+10];`这会为增长的数组分配新的内存块。然后，您想将项目从旧内存块复制到新内存块并添加用户附加值（我认为您将其用于学习目的，因此我为您提供了简单的循环复制元素。您可以使用`std:copy`或 c`memcopy`以及）：

```
int i = 0;
for (; i < arraySize; ++i)
   {
   grownArray[i] = myDynamicArray [i];
   }
// enlarge newly allocated array:
arraySize+= 10;
for (; i < arraySize; ++i)
   {
   grownArray[i] = newValues from somewhere
   }
// release old memory
delete[] myDynamicArray;
// reassign myDynamicArray pointer to point to expanded array
myDynamicArray = gronwArray; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-17T14:49:52.727

这可能是最聪明的（对某些人来说神秘过度使用 STL）的方式......

```
std::vector<int> vec;

// read integers 1 at a time from the user,
// will stop when non-integer input is entered
std::copy(std::istream_iterator<int>(std::cin),
          std::istream_iterator<int>(), 
          std::back_inserter(vec));

// print out the vector
std::copy(vec.begin(), vec.end(), std::ostream_iterator<int>(std::cout, " ")); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-17T14:47:24.030

这是我用 C++ 编写的一些基本代码。

```
#include <iostream>

int main(int argc, char *argv[])
{
    int* my_dynamic_array;

    int size;
    std::cin >> size;

    my_dynamic_array = new int[size];

    for (int k=0; k<size; k++)
        my_dynamic_array[k] = k;

    for (int k=0; k<size; k++)
        std::cout << my_dynamic_array[k] << std::endl;

    delete[] my_dynamic_array;

    return 0;
} 
```

好的，这就是这段代码中发生的事情。我们使用 std::cin 提示数组的大小，然后使用 new 关键字为数组动态分配一些内存。这里有一些细节一开始看起来有点奇怪。这似乎引起了许多新的 C++ 开发人员的困惑。

所以首先我们用指针而不是数组声明来声明我们的动态数组，例如我们使用`int *my_dynamic_array`了`int my_dynamic_array[]`. 起初，这似乎有点微不足道，但是您需要了解 C 和 C++ 中发生的事情。

当您静态声明一个数组时，您是在告诉程序您要留出该内存供您使用。它实际上就在那里；开始使用它是你的。当你动态创建一个数组时，你从一个指针开始。指针只是对某些内存的引用。该内存尚未分配。如果您尝试使用 访问其中的某些内容`my_dynamic_array[3]`，您将得到一个令人讨厌的错误。那是因为在那个位置的内存中实际上没有任何东西（至少没有任何东西被提供给程序使用）。

还要注意使用`delete[]`代替`delete`。这就是您在完成数组后释放内存的方式。

如果您在 C 中执行此操作，您几乎可以以相同的方式考虑这一点，但您有and而不是`new`and 。`delete[]``malloc``free`

了解动态数组和指针之间的细微差别是很棘手的。我花了一段时间才完全明白发生了什么。祝你好运并坚持下去。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T14:59:07.513

在 C 中，您可以使用此方法。

```
int i=0;
int *p;
char c;
int size; 
printf("Enter size :");
scanf("%d",&size); 
int *p=malloc(sizeof(int)*size);
do
{
 printf("Enter Number : ");
 scanf("%d",&p[i]);
 i++;
 printf("Press 'q' or 'Q' to quit or any other key to continue : ");
 scanf("%c",&c);
}
while(c!='q' && c!='Q' && i<=size);
p=realloc(p,i*sizeof(int)); 
```

通过这种方式，如果您想要的整数数量少于分配的内存，您可以释放剩余的分配内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-17T15:35:49.250

我有一个建议给你。如果要使用**C开发，可以使用链表代替数组**

在一个例子之后：

```
typedef struct linked_list {
    int x,
    struct linked_list *next
} linked_list;

struct linked_list *head = NULL;

void add_element(int x)
{
    struct linked_list *elem;
    elem = malloc(sizeof(struct linked_list));
    elem->x =x;
    elem->next = head;
    head = elem;
}

int main()
{
   int x;
   struct linked_list *p;
   do
   {
       printf("Enter Number : ");
       scanf("%d",&x);
       add_element(x)
       printf("Press 'q' or 'Q' to quit or any other key to continue : ");
       scanf("%c",&c);
   }while(c!='q' && c!='Q');

   for (p=head;p!=NULL;p=p->next)
   {
        printf(%d\r\n",p->x);
   }

} 
```

# visual-studio-2010 - VS2010 x86 and AnyCPU project vs solution setting

> ID：13431568
> 
> 赞同：0
> 
> 时间：2012-11-17T14:37:49.530
> 
> 标签：visual-studio-2010, deployment

I have a deployed WPF exe that I have some concern that in the field it is truly running as x86 so I can be assured I am not running into the strange behaviour that people have mentioned when you are set to AnyCPU because of WOW64\. My project (only assembly in the project, although I do rely on a 32bit dll) settings are:![enter image description here](../Images/080c8e54f4d16c6945fda74e2c053ead.png)

Yet my Solution Configuration is set to AnyCPU. ![enter image description here](../Images/1ccc776f2d6c9f1cdddea3b4984cc856.png)

Can I still be confident that my app is just 32bit?

Oh, here are my corflags.

![enter image description here](../Images/de5df007f04317b3e591b4c55a537fac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:24:15.830

这是 VS2010 中的一个设计缺陷，当您从早期版本的 VS 转换项目时，它尤其明显。平台名称不会以任何方式影响最终进程的位数。它只是一个名称，它不会直接影响托管项目的任何项目设置。

只有项目 + 属性、构建、“平台目标”设置很重要。此外，只有 EXE 项目的设置很重要，DLL 必须以 EXE 项目在启动时选择的任何位数为基础。因此，DLL 项目的正常设置是 AnyCPU。如果您希望您的进程为 32 位，则将 EXE 项目上的设置更改为 x86。如果您希望平台名称匹配，则只需添加另一个名为“x86”的平台名称，这也是您在 VS2010 中创建新项目时的默认名称。让平台名称与 C# 平台目标设置匹配取决于您，这不是自动的。不要忘记更改发布配置上的设置。

平台名称对于本地项目，尤其是 C++ 项目变得很重要。因为它们不支持 AnyCPU 之类的东西，所以您需要为它们单独构建。平台选择器现在可用于在构建之间轻松切换。

# java - Spring Batch memory leak with FlowJob, repeating Steps

> ID：13431570
> 
> 赞同：2
> 
> 时间：2012-11-17T14:37:55.770
> 
> 标签：java, spring, jms, spring-batch

We've set up a Spring Batch batch email-sender job that does the following:

1.  Read incoming email details from a JMS Queue.
2.  Don't do any processing, just pass them through...
3.  Turn the details into emails and "write" them to SMTP
4.  Repeat ad infinitum

This generally works fine, but we've discovered a massive memory leak. After 9 hours or so, can see a single `FlowJob`, but 748 `JobExecution` (all 'STARTED'), each holding 778 (!) `StepExecution` instances. All in all, 900 MB of stuff.

Here's the Spring config (Spring 3.1, Spring Batch 2.1.9):

```
<bean id="jobRepository"
    class="org.springframework.batch.core.repository.support.MapJobRepositoryFactoryBean" />

<bean id="jobLauncher"
    class="org.springframework.batch.core.launch.support.SimpleJobLauncher">
    <property name="jobRepository" ref="jobRepository" />
    <property name="taskExecutor">
        <bean class="org.springframework.core.task.SimpleAsyncTaskExecutor"/>
    </property>
</bean>

<bean id="jmsEmailFetcher" class="org.springframework.batch.item.jms.JmsItemReader">
    <property name="jmsTemplate" ref="batchEmailJmsTemplate" />
</bean>

<bean id="passthroughProcessor" class="org.springframework.batch.item.support.PassThroughItemProcessor" />

<bean id="transactionManager"
    class="org.springframework.batch.support.transaction.ResourcelessTransactionManager" />

<!-- The Spring Batch *Limiter/Decider* -->

<bean id="ourLimitDecider" class="our.special.InfiniteThrottledExecutionDecider" />

<!-- The Spring Batch *Job* -->

<batch:job id="fetchEmailsJobBatch" restartable="true">
    <batch:step id="fetchEmailsStep" next="limitDecision">
        <batch:tasklet throttle-limit="10">
            <batch:chunk reader="jmsEmailFetcher" processor="passthroughProcessor"
                         writer="batchEmailService.javaMailItemWriter" commit-interval="100" skip-limit="999999999">  <!-- Might gets *lots* of MQ-not-up-yet fails -->
                <batch:skippable-exception-classes>
                    <batch:include class="org.springframework.jms.JmsException" />       <!-- Generally MQ-not-up-yet ConnectionException, or Session-closed (in tests) -->
                    <batch:include class="java.lang.IllegalStateException" />            <!-- Yuk, usually/presumably a test SMTP server isn't yet connected -->
                    <batch:include class="org.springframework.mail.MailSendException" /> <!-- SMTP down... -->
                </batch:skippable-exception-classes>
            </batch:chunk>
        </batch:tasklet>
    </batch:step>
    <batch:decision id="limitDecision" decider="ourLimitDecider">
        <batch:next on="CONTINUE" to="fetchEmailsStep" />
        <batch:end on="COMPLETED" />
    </batch:decision>
</batch:job> 
```

Our `InfiniteThrottledExecutionDecider` basically returns `new FlowExecutionStatus("CONTINUE")` every time, to ensure that the `fetchEmailsStep` gets executed at the end of the flow, and that the Job never completes - at least not until we're ready to stop it ourselves.

We're **not** using a database, so we expect some stuff to be held in memory, but not a **complete record** of everything that's ever been run...

Is there something wrong with our configuration? Or our approach?

* * *

Here's a bit from our log file for what we're told is Step #778 and what **should** be the one and only Job instance.

```
23:58:18,782 - INFO  (org.springframework.batch.core.job.SimpleStepHandler) - Duplicate step [fetchEmailsStep] detected in execution of job=[fetchEmailsJobBatch]. If either step fails, both will be executed again on restart.
23:59:52,257 - INFO  (org.springframework.batch.core.job.SimpleStepHandler) - Executing step: [fetchEmailsStep]
23:59:52,257 - DEBUG (org.springframework.batch.core.step.AbstractStep) - Executing: id=778
23:59:52,259 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Starting repeat context.
23:59:52,259 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat operation about to start at count=1
23:59:52,259 - DEBUG (org.springframework.batch.core.scope.context.StepContextRepeatCallback) - Preparing chunk execution for StepContext: org.springframework.batch.core.scope.context.StepContext@1be1ee
23:59:52,259 - DEBUG (org.springframework.batch.core.scope.context.StepContextRepeatCallback) - Chunk execution starting: queue size=0
23:59:52,259 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Starting repeat context.
23:59:52,259 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat operation about to start at count=1
... 5 second JMS timeout ...
23:59:57,716 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat is complete according to policy and result value.
23:59:57,716 - DEBUG (org.springframework.batch.core.step.item.ChunkOrientedTasklet) - Inputs not busy, ended: true
23:59:57,716 - DEBUG (org.springframework.batch.core.step.tasklet.TaskletStep) - Applying contribution: [StepContribution: read=0, written=0, filtered=0, readSkips=0, writeSkips=0, processSkips=0, exitStatus=EXECUTING]
23:59:57,719 - DEBUG (org.springframework.batch.core.step.tasklet.TaskletStep) - Saving step execution before commit: StepExecution: id=778, version=1, name=fetchEmailsStep, status=STARTED, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=1, rollbackCount=0, exitDescription=
23:59:57,721 - DEBUG (org.springframework.batch.repeat.support.RepeatTemplate) - Repeat is complete according to policy and result value.
23:59:57,721 - DEBUG (org.springframework.batch.core.step.AbstractStep) - Step execution success: id=778
23:59:57,722 - DEBUG (org.springframework.batch.core.step.AbstractStep) - Step execution complete: StepExecution: id=778, version=3, name=fetchEmailsStep, status=COMPLETED, exitStatus=COMPLETED, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=1, rollbackCount=0
23:59:57,723 - DEBUG (org.springframework.batch.core.job.flow.support.SimpleFlow) - Completed state=fetchEmailsJobBatch.fetchEmailsStep with status=COMPLETED
23:59:57,723 - DEBUG (org.springframework.batch.core.job.flow.support.SimpleFlow) - Handling state=fetchEmailsJobBatch.limitDecision100
23:59:57,723 - DEBUG (org.springframework.batch.core.job.flow.support.SimpleFlow) - Completed state=fetchEmailsJobBatch.limitDecision100 with status=CONTINUE
23:59:57,723 - DEBUG (org.springframework.batch.core.job.flow.support.SimpleFlow) - Handling state=fetchEmailsJobBatch.fetchEmailsStep 
```

Problem is, the heap dump shows 748 `JobExecution`s, and 581,911 `StepExecution`s. Where are they all coming from?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:25:51.633

好的，在回答我的问题时，解决方案是放弃 Step Flow 并使“fetchEmailsS​​tep”永远运行。

我们通过删除`JmsTemplate`("batchEmailJmsTemplate") 的 "readTimeout" 和子类`org.springframework.batch.item.jms.JmsItemReader`化以删除它为阻止您使用无限`JmsTemplate`s 所做的检查来实现这一点 - 并添加额外的日志记录。如果您不想要覆盖，您可以将“readTimeout”设置为一个巨大的数字。

更多讨论在这里：http: [//forum.springsource.org/showthread.php?132468-Massive-memory-use-with-FlowJob-repeating-Steps &p=431279](http://forum.springsource.org/showthread.php?132468-Massive-memory-use-with-FlowJob-repeating-Steps&p=431279)

我仍然不知道为什么内存使用量如此之大......

* * *

**[编辑]**我也在使用`JobExecutionDecider`("our.special.InfiniteThrottledExecutionDecider") 来实现节流（基于`<StepExecution>.writeCount`），但这不得不去。我们现在使用扩展`StepExecutionListenerSupport`（或者您可以实现`StepExecutionListener`）的新类来实现相同的结果。这个 bean 的一个实例作为 a 添加`<batch:listener>`到我们的单`<batch:step>`

# asp.net - testing for no return from LINQ

> ID：13431571
> 
> 赞同：1
> 
> 时间：2012-11-17T14:37:58.380
> 
> 标签：asp.net, .net, vb.net, linq

When using LINQ to Entities how do you test for the object to have no result? For example, the following query will return no result if the custid has no order history BUT the page will still load, it just won't have a gridview because there is no datasource for it to bind to.

```
Dim result = From c In ctx.orders
                 Where c.CustomerId = custId
          Join prod In ctx.products On prod.Id Equals c.ProductId
        Select New With
        {c.OrderDate,
         c.PurchaseOrderNumber,
         prod.description,
         c.ProductPrice,
         c.ProductQty} 
```

How do you test the object for no result? I want to test for that to supply different markup to the page if no result is returned. Obviously I've tried If result = vbNull, also tried Is Nothing, those don't work. The other problem is when using this query in a Try Catch block, even when no result is returned it does not catch an exception, I'm guessing it doesn't see that as an error.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T14:41:36.083

你可以[**`Any()`**](http://msdn.microsoft.com/en-us/library/bb337697.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)这样使用：

```
Dim hasElements As Boolean = result.Any(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:06:08.473

绑定数据后，您可以检查gridview中的行数；不会`Any`像`ToList`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T14:54:39.163

如果你`result`稍后使用，那么最好将它转换为第`List<T>`一个，这样它就不会多次连接到数据库

暗淡列表 = result.ToList()

然后，因为它已经被回答，你可以打电话`list.Any()`

# iphone - Should I set iOS deployment target to lower version than iOS versions of the devices I have?

> ID：13431572
> 
> 赞同：2
> 
> 时间：2012-11-17T14:38:01.703
> 
> 标签：iphone, ios

I have some iOS devices.
But all iOS versions of them are 5.1.1.
So I can't test my app in iOS 5.0.x.

Should I set the iOS deployment target to 5.0?
Is it safe to assume that apps will run properly in iOS 5.0 if it runs properly in iOS 5.1?

Or should I set it to 5.1.1 which I can test in?

And if I set it to 5.1.1, how will my app be displayed in iTunes Store to people whose devices are iOS 5.0?
The app will not be displayed to them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:39:56.003

我们的统计数据显示，使用 5 某些版本的大多数人都使用 5.1.1。但是，如果您想测试 5.0，可以下载 5.0 模拟器。

Xcode -> 首选项 -> 下载 -> 组件选项卡 -> 安装 5.0 模拟器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:41:14.090

从 5.1 到 5.0，唯一重要的 API 变化是能够使用 Siri 在`UITextField`和其他文本容器中输入文本。

您可能会安全地将其设置为 5.0

# c# - DynamicMethod is much slower than compiled IL function

> ID：13431573
> 
> 赞同：10
> 
> 时间：2012-11-17T14:38:05.503
> 
> 标签：c#, cil, il, dynamicmethod

I wrote a simple object copier that copies public properties. I can't figure out why the Dynamic method is a lot slower than the c# version.

Durations

C# method : 4,963 ms

Dynamic method : 19,924 ms

Note that - as I run the dynamic method before starting the stopwatch - the duration do not include the compilation phase. I run that in Debug and Release mode, in x86 and x64 mode, and from VS and from the command line with roughly the same result (dynamic method is 400% slower).

```
 const int NBRECORDS = 100 * 1000 * 1000;

        public class Person
        {
            private int mSomeNumber;

            public string FirstName { get; set; }
            public string LastName { get; set; }
            public DateTime DateOfBirth { get; set; }
            public int SomeNumber
            {
                get { return mSomeNumber; }
                set { mSomeNumber = value; }
            }
        }

        public static Action<T1, T2> CreateCopier<T1, T2>()
        {
            var meth = new DynamicMethod("copy", null, new Type[] { typeof(T1), typeof(T2) }, restrictedSkipVisibility: true);
            ILGenerator il = meth.GetILGenerator();
            int cpt = 0;

            var stopHere = typeof(Program).GetMethod("StopHere");

            foreach (var mi1 in typeof(T1).GetProperties(BindingFlags.Public | BindingFlags.Instance))
            {
                var mi2 = typeof(T2).GetProperty(mi1.Name, BindingFlags.Public | BindingFlags.Instance);
                if (mi1 != null && mi2 != null)
                {
                    cpt++;
                    il.Emit(OpCodes.Ldarg_1);
                    il.Emit(OpCodes.Ldarg_0);
                    il.Emit(OpCodes.Callvirt, mi1.GetMethod);
                    il.Emit(OpCodes.Callvirt, mi2.SetMethod);
                }
            }
            il.Emit(OpCodes.Ret);

            var dlg = meth.CreateDelegate(typeof(Action<T1, T2>));
            return (Action<T1, T2>)dlg;
        }

        static void Main(string[] args)
        {
            var person1 = new Person() { FirstName = "Pascal", LastName = "Ganaye", DateOfBirth = new DateTime(1909, 5, 1), SomeNumber = 23456 };
            var person2 = new Person();

            var copyUsingAMethod = (Action<Person, Person>)CopyPerson;
            var copyUsingADynamicMethod = CreateCopier<Person, Person>();

            copyUsingAMethod(person1, person2); // 4882 ms
            var sw = Stopwatch.StartNew();
            for (int i = 0; i < NBRECORDS; i++)
            {
                copyUsingAMethod(person1, person2);
            }
            Console.WriteLine("{0} ms", sw.ElapsedMilliseconds);

            copyUsingADynamicMethod(person1, person2); // 19920 ms
            sw = Stopwatch.StartNew();
            for (int i = 0; i < NBRECORDS; i++)
            {
                copyUsingADynamicMethod(person1, person2); 
            }
            Console.WriteLine("{0} ms", sw.ElapsedMilliseconds);

            Console.ReadKey(intercept: true);
        }

        private static void CopyPerson(Person person1, Person person2)
        {
            person2.FirstName = person1.FirstName;
            person2.LastName = person1.LastName;
            person2.DateOfBirth = person1.DateOfBirth;
            person2.SomeNumber = person1.SomeNumber;
        } 
```

From what I can debug the two methods have the same IL code.

```
IL_0000: nop
IL_0001: ldarg.1
IL_0002: ldarg.0
IL_0003: callvirt   System.String get_FirstName()/DuckCopy.SpeedTests.Program+Person
IL_0008: callvirt   Void set_FirstName(System.String)/DuckCopy.SpeedTests.Program+Person
IL_000d: nop
IL_000e: ldarg.1
IL_000f: ldarg.0
IL_0010: callvirt   System.String get_LastName()/DuckCopy.SpeedTests.Program+Person
IL_0015: callvirt   Void set_LastName(System.String)/DuckCopy.SpeedTests.Program+Person
IL_001a: nop
IL_001b: ldarg.1
IL_001c: ldarg.0
IL_001d: callvirt   System.DateTime get_DateOfBirth()/DuckCopy.SpeedTests.Program+Person
IL_0022: callvirt   Void set_DateOfBirth(System.DateTime)/DuckCopy.SpeedTests.Program+Person
IL_0027: nop
IL_0028: ldarg.1
IL_0029: ldarg.0
IL_002a: callvirt   Int32 get_SomeNumber()/DuckCopy.SpeedTests.Program+Person
IL_002f: callvirt   Void set_SomeNumber(Int32)/DuckCopy.SpeedTests.Program+Person
IL_0034: nop
IL_0035: ret 
```

I applogize if you read this twice. I posted this originally in: [http://www.codeproject.com/Answers/494714/Can-27tplusfigureplusoutpluswhyplusthisplusDynamic](http://www.codeproject.com/Answers/494714/Can-27tplusfigureplusoutpluswhyplusthisplusDynamic) but did not get all the answers I hoped.

edited 17 nov 2012 15:11:

```
removed the nop
removed the extra ="" which came from I don't where. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T19:27:36.173

这有点晚了，但是如果您在**.NET 4**中为所有程序集设置一些安全属性并使用内置委托类型（或具有相同安全属性的委托），您将看到相当大的性能提升。

以下是您需要的属性：

```
[assembly: AllowPartiallyTrustedCallers]
[assembly: SecurityTransparent]
[assembly: SecurityRules(SecurityRuleSet.Level2,SkipVerificationInFullTrust=true)] 
```

这实际上似乎是一个小错误。但是因为你说你的代码不会提高安全权限，你不会阻止部分信任的调用者，所以如果你`skipVisibility=true`完全信任使用，调用`Func<int,int>`委托基本上应该避免几乎所有的权限检查。

还有一件事，因为这些是委托，如果您将它们视为实例方法，您将获得最佳性能，即使它们不是。也就是说，始终使用`Delegate.CreateDelegate`接受`firstArgument`参数的两种方法之一，并将初始对象引用添加到您的委托。

考虑构建`DynamicMethod`with `skipVisibility=true`，但不指定所有者。分配所有者允许您运行[无法验证的代码](https://blogs.msdn.microsoft.com/davidnotario/2005/02/04/the-world-is-a-better-place-if-you-generate-verifiable-il/)。你可以用这个做一些非常糟糕的事情，所以我会避免它，除非你知道你在做什么。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-17T15:34:57.050

`.NET`这个问题是由Framework 4.0中所做的更改引入的。我在 CodeProject 上找到了用户“ [Alan-N ”发布](https://www.codeproject.com/script/Membership/View.aspx?mid=3161042)[的解决方案。](https://www.codeproject.com/Answers/494914/Can-tplusfigureplusoutpluswhyplusthisplusDynamic#answer2)

`DynamicMethod`当获取与[“系统提供的、完全受信任的、安全透明的程序集”](https://docs.microsoft.com/en-us/dotnet/framework/reflection-and-codedom/security-issues-in-reflection-emit)相关联时，会导致执行时间大幅减慢，如果您使用`DynamicMethod(string, Type, Type[], bool)`构造函数，就会发生这种情况。.NET 4 似乎比以前的版本进行了更多的安全检查，尽管我对实际发生的事情没有洞察力或解释。

将`DynamicMethod`与 a相关联`Type`（通过使用`DynamicMethod(string, Type, Type[], Type, bool)`构造函数；注意附加的`Type`-valued 参数*'owner'*）完全消除了速度损失。

MSDN上有一些可能相关的注释（如果我能理解它们！）：

*   [DynamicMethod 构造函数（字符串、类型、类型 []、布尔值）](http://msdn.microsoft.com/en-us/library/bb348332(v=vs.100).aspx)
*   [反射发射中的安全问题](http://msdn.microsoft.com/en-us/library/9syytdak.aspx)

# java - Can't seem to add JTextArea to JScrollPane?

> ID：13431578
> 
> 赞同：0
> 
> 时间：2012-11-17T14:38:45.390
> 
> 标签：java, swing, jscrollpane, jtextarea

I'm running in to a small snag here...I was trying to create a scrollable text area, and I've implemented it using the following code snippet, which I'm fairly sure is okay. I'd appreciate if you could tell me what's wrong with it?

```
JTextArea textArea = new JTextArea();
textArea.setBackground(Color.WHITE);
textArea.setPreferredSize(new Dimension(600, 200));
textArea.setWrapStyleWord(true);
textArea.setLineWrap(true);

JScrollPane scrollPane = new JScrollPane(textArea);
scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
String s = "";

for (int i = 0; i < 100; i++) {
    s += "asdflkjas;ldfkjas;lflsdkjfads;kfja;sdlfafsdf\n";
}

textArea.setText(s);

// method to add Component to a JPanel with GridBagLayout 
addComponent(scrollPane, 3, 0, 2, 2); 
```

The problem is simple - everything works fine - the text appears normally, the scroll bars appear okay, the text is wrapped...but I couldn't scroll!

A few pointers, please?

Thanks!! Baggio

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T13:11:46.523

问题是您将首选大小设置为`textArea`比显示文本所需的区域更小的大小，因此不会出现滚动条。

最好*不要*设置首选大小，而是让`JScrollPane`确定子组件的大小。滚动条将按预期出现。

你可以使用这个构造函数：[JTextArea(int rows, int columns)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#JTextArea%28int,%20int%29)

* * *

旁注：`StringBuilder`在进行`String`连接以提高性能时更好地使用。

# ios - ios 文本框反弹

> ID：13431580
> 
> 赞同：0
> 
> 时间：2012-11-17T14:39:05.747
> 
> 标签：ios, uitableview, uitextfield

我在分组的 uitableview 中有几个文本字段。当您将焦点从一个文本字段移动到另一个文本字段时，文本字段中的文本会反弹几个像素。我该如何摆脱这个？可能是因为我更改了文本字段的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T19:25:01.333

我想通了：使用的字体（自定义字体）有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-22T12:41:14.403

您可以使用 IQKeyBoardManager pod 来解决此问题。 [http://cocoadocs.org/docsets/IQKeyboardManagerSwift/4.0.2/](http://cocoadocs.org/docsets/IQKeyboardManagerSwift/4.0.2/)

```
pod 'IQKeyboardManagerSwift' 
```

# android - Android 中不同类型的监听器

> ID：13431583
> 
> 赞同：0
> 
> 时间：2012-11-17T14:39:27.253
> 
> 标签：android, listener, onclicklistener, onitemclicklistener

我有一个包含 TextViews、Spinners、TimePickers 等的 Activity，我只想在单击 OK 按钮时执行任务。为此，我在每个组件上设置了一个监听器。我的问题是：我使用了几种类型的侦听器（onClickListener、onItemSelectedListener 等），因此每个侦听器都需要自己的方法（onClickListener 需要方法`public void onClick(View v){};`onItemSelectedListener 需要方法`public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {}`）但我想用所有这些方法执行一项任务信息只有一次（当按钮 OK 被按下时），所以这应该在 onClick() 方法中声明。但是，如果每次都必须以与需要它的方法不同的方法来管理其他值，我该如何管理它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:12:16.143

如果您必须只听“确定”按钮，则只为该按钮设置一个侦听器。你为什么要为其他项目设置一个监听器？

对于“确定”按钮，您可以设置如下监听器：

```
okButton.setOnClickListener( new onClickListener{

public void onClick(View v) {

     //do what you need to inside the listener here

    }

}); 
```

# iphone - prepareForSegue 函数搜索后不返回原始开关结果

> ID：13431584
> 
> 赞同：2
> 
> 时间：2012-11-17T14:39:29.760
> 
> 标签：iphone, objective-c, xcode, ipad

在我的 tableview 上执行搜索并选择一行后，详细视图控制器 (MOVdetailViewController) 仅更新名称而不更新信息（地址、网站和其他内容）。它位于我设置为开关的 MDVC.lodgeNumber 中。我现在认为这是不可能的，因为详细信息存储在开关中。非常感谢所有反馈

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender

{
  if ([segue.identifier isEqualToString:@"lodgedetail"]) {
      MOVDetailViewController *destViewController = segue.destinationViewController;
      MOVDetailViewController * MDVC = [[MOVDetailViewController alloc] init];

      NSIndexPath * path = [self.tableView indexPathForSelectedRow];
      NSString * thelodge = [filteredList objectAtIndex:path.row];

      MDVC = [segue destinationViewController];
      MDVC.lodgeNumber = path.row;
      MDVC.lodgeName = thelodge;

      NSIndexPath *indexPath = nil;

      if ([self.searchDisplayController isActive]) {
          indexPath = [self.searchDisplayController.searchResultsTableView
                          indexPathForSelectedRow];
          destViewController.lodgeName = [filteredList objectAtIndex:indexPath.row];

      } else {
          indexPath = [self.tableView indexPathForSelectedRow];
          destViewController.lodgeName = [lodgeList objectAtIndex:indexPath.row]; 
        }
      }
   } 
```

开关示例：

```
 self.title = lodgeName;     
  switch (lodgeNumber) {
      case 0:
          //Abingdon Lodge No. 48
          address.text = @"325 W Main Street Abingdon, Virginia 24210";
          website.text = @"http://www.grandlodgeofvirginia.org/lodges/48/";
          statedc.text = @"Abingdon Lodge No. 48 holds it's stated communication on the              
                           2nd Monday of the month at 7:30 PM. If there are
                            any exceptions to the regular meeting day or time, 
                            they are posted on the Lodge website.";

         lodgehistory.text = @"According to the earliest records the Abingdon Lodge had 
              its origin “At a meeting held at the house of
              James White in the town of Abingdon, on October 3, 1796.” The record
              states that a dispensation had been given by the Grand Master of
              Masons in Virginia and the following were present: William King,
              Master; Daniel Murphy, Past Master; Robert Johnson, Past Master;
              Charles Carson, Past Master, and William Preston Skillern. For more
              information on the Lodge History please see the Lodge website.";

         break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:12:46.987

```
 MOVDetailViewController *MDVC = segue.destinationViewController;
NSIndexPath * path = [self.tableView indexPathForSelectedRow];
NSString * thelodge = [filteredList objectAtIndex:path.row];

MDVC.lodgeName = thelodge;
MDVC = [segue destinationViewController];  // REMOVE THIS LINE
MDVC.lodgeNumber = path.row; 
```

# selenium-webdriver - 如何在 Firefox 10 上处理警报

> ID：13431588
> 
> 赞同：0
> 
> 时间：2012-11-17T14:39:38.907
> 
> 标签：selenium-webdriver

![第1页截图](../Images/dd8808cc850c2f0205f9d167ed5e8c81.png)我正在使用 firefox 10 和 selenium-server-standalone-2.25.0.jar 。我只使用 webdriver 编写脚本。在我的应用程序中，有一个带有确定按钮的警报框。我尝试了许多代码解决方案但不起作用。以下是我尝试过的解决方法

解决方案1：

```
((JavascriptExecutor)driver).executeScript("window.alert = function(msg){};"); 
```

解决方案2：

```
Alert alert = driver.switchTo().alert();
alert.accept(); 
```

![第二页截图](../Images/64d723b0e47b5b7853b0ed751093ada1.png) 但它显示以下错误

```
Caused by: org.openqa.selenium.UnhandledAlertException: Modal dialog present
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
java.lang.reflect.Constructor.newInstance(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:05:14.300

我建议你以下解决方案：

*   如果代码说在您单击第一个对话框后还有另一个对话框，请尝试再做一次：`driver.switchTo().alert().dismiss()`；
*   检查元素出现的默认等待时间（至少应该是`1 second`）
*   如果不起作用，请尝试在 try-catch 中处理这部分代码，捕获`UnhandledAlertException`异常并尝试`dismiss()`在 catch 代码中。
*   这是您第一次遇到此版本 Firefox 的问题？我使用的是 Firefox 13.0.1，因为我在使用其他版本时遇到了很多问题，也许你应该重新考虑升级。

告诉我有什么对你有用的

# java - 捕获模式和非捕获模式有什么区别？

> ID：13431589
> 
> 赞同：2
> 
> 时间：2012-11-17T14:39:49.630
> 
> 标签：java, regex

在`Pattern`课堂上它说有两种类型的正则表达式：*捕获*和*非捕获*，但我不明白其中的区别。

[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#special](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#special)

它们有何不同？我什么时候必须使用每一个？有什么例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:44:09.603

考虑一种模式，您需要在单个位置检查各种事物，例如一堆不同的两个字符模式。通常您使用`|`交替运算符：

```
/(ab|cd|ef)/ 
```

这也需要使用`()`括号。但这些括号也充当捕获组。也许您真的不想捕获这些字符序列，只需检查它们的存在，这就是非捕获组发挥作用的地方：

```
/(?:ab|cd|ef)/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T14:45:46.527

您可能希望独立于*捕获某些内容的表达式对表达式进行**分组*。例如：

 *```
abc(foo|bar)def 
```

如果您想匹配“abdfoodef”或“abcbardef”，但不匹配其他变体，这是最简单的表达式。您必须使用`()`对两个表达式进行分组才能使用`|`. 但这也意味着这`(foo|bar)`是第一个捕获组。

如果您不想要或不需要捕获，请将其写*为非捕获组*：

```
abc(?:foo|bar)def 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-23T09:20:46.317

只是想我应该提一下，您还可以像这样创建命名捕获组：

```
(?<telephone>(?:\(\d{2}\)\s\d{4}\s\d{4})) 
```

这将匹配一个电话号码，如`(02) 9502 5697`

然后，您可以将其用作反向引用，如下所示：

```
"s/(?<telephone>(?:\(\d{2}\)\s\d{4}\s\d{4}))/\k<telephone>/g" 
```

这只会用它自己替换匹配......但你可以用它来创造。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T14:55:18.443

捕获/非捕获不是指整个正则表达式，而是指组，即带*括号的表达式*。

你想要_____吗

*   使用**反向引用**？
*   检索整个比赛的**特定部分？**（或多个）

如果*是*，那么您将需要*捕获*组。

如果*不是*，那么您正在使用括号进行*优先级控制*，并且可以使组不被捕获。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-17T15:24:25.063

捕获组允许您重用部分正则表达式匹配。您可以在正则表达式中重用它，或者之后在替换语句中重用它：

考虑这个文本： 1a2b3cdef7g9h 和这个正则表达式： ([0-9]*)([az]*) 有两个捕获组，第一个捕获数字序列，第二个捕获字母序列。

因此，您可以使用 replaceAll 语句使用第一个捕获组 ($1) 保留数字，或使用第二个捕获组 ($2) 保留字母。

```
 // next line outputs : 12379
    System.out.println("1a2b3cdef7g9h".replaceAll("([0-9]*)([a-z]*)", "$1"));

    // next line outputs : abcdefgh
    System.out.println("1a2b3cdef7g9h".replaceAll("([0-9]*)([a-z]*)", "$2")); 
```

但是当您使用非捕获组时（例如通过添加 ?: 它不会捕获，并且有时很有用。例如：

```
 // next line outputs : abcdefgh
    //  ([a-z]*) becomes the first capturing group because (?:[0-9]*) is a non-capturing group
    System.out.println("1a2b3cdef7g9h".replaceAll("(?:[0-9]*)([a-z]*)", "$1")); 
```

在屏幕底部的[http://gskinner.com/RegExr](http://gskinner.com/RegExr)上尝试一下，您可以看到您的捕获组在哪里

请参阅：[http ://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)*

# algorithm - 多重分配/矩阵最大化

> ID：13431595
> 
> 赞同：2
> 
> 时间：2012-11-17T14:40:22.953
> 
> 标签：algorithm, optimization

我想知道是否有人可以指出一种有效的方法来做到这一点：

最大化 6 行 x 10 列数组中所选元素的总和，以便在每列中选择 3 个元素，在每行中选择 5 个元素。

我看不到将分配问题（和匈牙利算法）扩展到此任务的简单方法。我们需要为我们更大的问题做数千次这样的事情，所以暴力是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:31:07.487

正如 Vaughn 所写，解决问题的一种快速简便的方法是将其转换为[整数线性规划](http://en.wikipedia.org/wiki/Integer_linear_programming)问题，然后使用众多专业求解器中的一个来求解。所以让我们开始吧！

## 造型

首先，我们需要一种建模语言。我将使用 GNU 建模语言 MathProg，它与[AMPL](http://en.wikipedia.org/wiki/AMPL)的（一个子集）非常相似。

我们问题的一般模型：（max.mod）

```
param rows;
param columns;
param matrix{i in 1..rows, j in 1..columns}; # the input matrix

## the variables of our problem. choose[i,j] = 1 means that we 
## pick element (i,j), otherwise is choose[i,j] = 0
var choose{i in 1..rows, j in 1..columns} binary; 

## the linear function we want to maximize: the sum of all the 
## choosen elements in the matrix.
maximize Sum:
    sum{i in 1..rows, j in 1..columns} choose[i,j] * matrix[i,j];

## first linear constraint: we have to choose exactly 3 elements for each column
subject to Cols{j in 1..columns}:
    sum{i in 1..rows} choose[i,j] = 3;

## second linear constraint: we have to choose exactly 5 elements for each row
subject to Rows{i in 1..rows}:
    sum{j in 1..columns} choose[i,j] = 5;

solve;

## to print the solution
printf "Solution: \n";
for{i in 1..rows}
{
    for{j in 1..columns}
    {
        printf (if choose[i,j] = 1 then "%d " else "- "), matrix[i,j];
    }
    printf "\n";
}
printf "\nSum = %d", sum{i in 1..rows, j in 1..columns} choose[i,j]*matrix[i,j]; 
```

我们也需要一个数据文件：（max.dat）

```
param rows := 6;
param columns := 10;

param matrix : 
    1 2 3 4 5 6 7 8 9 10 :=
1   1 6 9 1 0 7 5 4 3 2
2   9 7 4 6 4 3 2 1 4 9
3   9 6 4 3 2 1 5 7 8 9
4   6 5 4 3 7 8 9 6 4 2
5   7 5 4 3 2 8 9 6 7 8 
6   9 7 6 5 3 9 6 3 2 1; 
```

## 求解

现在我们需要一个求解器。我将在命令行中使用漂亮的[GLPK](http://www.gnu.org/software/glpk/)（GNU 线性编程工具包），但它有一组很好的接口，可以连接到一堆编程语言。

```
alberto@alberto-notebook:~/Desktop$ glpsol --model max.mod --data max.dat

INTEGER OPTIMAL SOLUTION FOUND
Time used:   0.0 secs
Memory used: 0.2 Mb (235703 bytes)

Solution: 
- 6 9 - - 7 5 - 3 - 
9 7 - 6 4 - - - - 9 
9 - - 3 - - - 7 8 9 
- - 4 - 7 8 9 6 - - 
- - - - - 8 9 6 7 8 
9 7 6 5 3 - - - - - 

Sum = 203 
```

# c# - clisecure v 6.0 - 重命名方法调用和反射

> ID：13431601
> 
> 赞同：0
> 
> 时间：2012-11-17T14:41:13.603
> 
> 标签：c#, .net, security, obfuscation, command-line-interface

重命名方法调用使反射使用不可用。有人可以分享一个技巧来保护 CliSecure v6.0 中指定的调用不被重命名吗？

提前致谢。
甲烷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:20:29.560

通过检查被混淆解决，并发送回客户端正常或混淆调用。

# c# - 带有 EF 的 SQL Server 连接字符串

> ID：13431608
> 
> 赞同：0
> 
> 时间：2012-11-17T14:41:43.027
> 
> 标签：c#, .net, sql-server, entity-framework, sql-server-2012

我刚刚将 MySQL 数据库转换为 SQL Server。我对 SQL Server 完全陌生，我想将它与 Entity Framework 4 一起使用，所以我不应该成为一个大人物。

我想我没有得到关于数据库等对象的概念。在 SQL Server Mgmt Studio 中，我可以执行此查询

```
/****** Script for SelectTopNRows command from SSMS  ******/
SELECT TOP 1000 [id]
  FROM [db].[dbo].[mytable] 
```

它工作正常，但是如果我使用这个连接字符串

```
Data Source=MYPC-PC\;Integrated Security=SSPI;Min Pool Size=5;Max Pool Size=60;Connect Timeout=30 
```

查询可以正常执行，但会排除 [db]，因此不会返回任何行。这是来自实体框架的查询。

```
/****** Script for SelectTopNRows command from SSMS  ******/
SELECT TOP 1000 [id]
  FROM [dbo].[mytable] 
```

如果我将连接字符串更改为包含这样的数据库

```
Data Source=MYPC-PC\;Integrated Security=SSPI;Database=db;Min Pool Size=5;Max Pool Size=60;Connect Timeout=30 
```

我收到这个错误

> *数据库中已经有一个名为“MyTable”的对象。*

但是只有一张表叫做`Table`. 我不知道这背后的概念。我究竟做错了什么？我正在使用 SQL Server 2012

# 更新 1

我首先使用代码。

```
 var result = db.MyTable.Where(x => x.Prop == Prop)
            .OrderBy(x => x.Something)
            .Take(10);

        var data = result.ToList(); 
```

我的 DbContext 类

```
public class Context : DbContext
{

     public Context()
    : base("Context")
  {
    // Get the ObjectContext related to this DbContext
    var objectContext = (this as IObjectContextAdapter).ObjectContext;

    // Sets the command timeout for all the commands
    objectContext.CommandTimeout = 12000;
  }

    public DbSet<Models.MyTable> MyTable{ get; set; }

} 
```

在 web.config 中

```
 <connectionStrings>
    <add name="Context" providerName="System.Data.SqlClient" connectionString="connectionString"  /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:13:42.550

在第一次迁移之前，您的表`MyTable`已经存在于数据库中。因此，您可以删除此表，然后在第一次应用程序运行时重新创建它。

**编辑：** 如果您不想删除表并且至少使用 EF 4.3
，则从控制台`Add-Migration InitialMigration -IgnoreChanges`
运行，然后运行`Update-Database`

# objective-c - 从 GDB 获取值后如何编辑二进制文件

> ID：13431610
> 
> 赞同：1
> 
> 时间：2012-11-17T14:42:20.433
> 
> 标签：objective-c, ios, gdb

我使用 GDB 并想修改一个 iOS 应用程序。（例如：在游戏中改变分数）

所以，我设置断点，例如：

```
b *0x0032c870 
```

在断点处，我输入

```
info r 
```

在此之后，gdb 显示

```
r0             0x92717c0    153556928
r1             0x7d47a0 8210336
r2             0x0  0 
```

现在我知道我需要将 r2 更改为 1

```
set $r2=1 
```

现在游戏中的价值发生了变化。

好的，有一个问题，如何在 hexeditor 中进行编辑以设置 r2=1 而不是每次都使用 gdb？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:26:49.240

> 如何在 hexeditor 中进行编辑以设置 r2=1 而不是每次都使用 gdb

你*不能*： 的值`r2`是*寄存器*的值；在程序运行之前它不存在。

您需要做的是找出该值*加载*到寄存器中的位置，并更改*那里*的代码以使其加载`1`而不是`0`.

这可能非常容易，也可能很棘手，具体取决于该值的加载方式：如果将其作为常量加载（只需更改指令以加载不同的常量），则很容易。但很可能它是作为某个函数的返回值加载的，在这种情况下，您必须更改该函数以返回不同的值。

# php - 教义2关联未初始化

> ID：13431614
> 
> 赞同：9
> 
> 时间：2012-11-17T14:42:46.083
> 
> 标签：php, symfony, doctrine, doctrine-orm

我有一个像下面这样的类：

```
/** @Entity **/
class orgGroup{

    //id and stuff...

    /**
     * @Column(type="string")
     **/
    private $name;

    /**
     * @Column(type="string", nullable=true)
     **/
    private $description;

    /**
     * @ManyToOne(targetEntity="orgGroupType", inversedBy="_orgGroups")
     * @JoinColumn(name="_orgGroupType")
     **/

    private $_orgGroupType;

    //...
} 
```

但是当我从我的数据库中加载这个对象时

```
$groups = $em->getRepository("orgGroup")->findAll(); 
```

我只是正确地获得了名称，但不是 _orgGroupType...而且我不知道为什么... OrgGroup 是 orgGroupType 的所有者，它只是一个对象而不是数组。我的网络服务总是说：

```
{"error":[],"warning":[],"message":[],"data":[{"name":"AdministratorGroup","description":null,"_orgGroupType":{"__ isInitialized __":false}}]} 
```

结果是：

```
"name":"AdministratorGroup",
"description":null,
"_orgGroupType":{"__ isInitialized __":false} 
```

但应该是：

```
"name":"AdministratorGroup",
"description":"some description",
"_orgGroupType":{name:"test"} 
```

所以有**2个**错误......我不知道为什么。所有数据都在数据库中正确设置。

有任何想法吗？

编辑：这是我的 orgGroupType -entity 的缺失代码

```
/** @Entity **/
class orgGroupType {
    /**
     * @OneToMany(targetEntity="orgGroup", mappedBy="_orgGroupType")
     **/
    private $_orgGroups;

    public function __construct()
    {
        $this->_orgGroups = new ArrayCollection();
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2017-01-20T11:52:19.973

尝试将获取模式更改为**EAGER**。

```
@ORM\ManyToOne(targetEntity="****", fetch="EAGER"). 
```

它对我有用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-19T12:27:53.353

在我看来，这就像一个延迟加载问题。您如何将对象中的数据获取到 Web 服务答案中？

如果您不配置其他内容，则 Doctrine2 是延迟加载的，这意味着您`$groups = $em->getRepository("orgGroup")->findAll();`不会返回真实`orgGroup`对象，而是返回代理对象（[Doctrine Documentation](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html#by-lazy-loading)）。

这意味着一个对象在您调用或`$group`之前不会有它的描述或 orgGroupType 值（然后 Doctrine 会自动加载它们），因此您需要在将数据写入 Web 服务的 JSON 响应之前执行此操作。如果您以某种方式循环遍历对象属性而不使用 getter 方法，它将无法工作。`$group->getDescription()``$group->getOrgGroupType()`

我希望这是问题:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-02T15:49:30.407

```
//Group.php ...

public function addUser(User $user): self
{
    if (!$this->users->contains($user)) {
        $this->users[] = $user;
        $user->addJoinedGroup($this);     /** VERY IMPORTANT **/
    }
    return $this;
} 
```

在`User.php` 没有它的情况下相同，它在我的数据库中没有做任何事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T14:53:46.360

请务必在 orgGroupType 实体中初始化 orgGroups 集合

```
/**
 * @OneToMany(targetEntity="orgGroup", mappedBy="_orgGroupType")
 */
protected $orgGroups ;

public function __construct() {
    $this->orgGroups = new ArrayCollection();
} 
```

您可能需要在实体中包含以下内容

```
use Doctrine\Common\Collections\Collection,
Doctrine\Common\Collections\ArrayCollection; 
```

# python - ImageTk.PhotoImage 无法正确显示图像

> ID：13431621
> 
> 赞同：2
> 
> 时间：2012-11-17T14:43:37.673
> 
> 标签：python, image, numpy, image-processing, tkinter

我正在尝试将 numpy 数组转换为 PIL 格式，然后将其显示为标签！我可以为我的原始图像执行此操作，但是在我使用 fft 和 fftshift 之后，我无法正确显示它。！

```
image1=Image.open('sam.jpg')
image1 = image1.resize((120, 120), Image.ANTIALIAS)
Labe(image=photo1).grid(row=0, column=7, columnspan=3, rowspan=2, padx=5, pady=5)
ipx1=np.array(image1)
(w,h)=ipx1.shape #120x20 
```

现在我用我的图像做一些事情：

```
img_fft=np.fft.fft2(image1)
img_shift=np.fft.fftshift(image1_fft)
img_plot1=np.log10(1+abs(img_shift))

foto=Image.fromarray((img_plot1*255.999).round().astype(np.uint8),mode='L')
photo=ImageTk.PhotoImage(foto)
Label(image=photo).grid(row=0, column=10, columnspan=4, rowspan=2, padx=5, pady=5) 
```

但不是： ![正确的形象](../Images/4650101bbd925874e3890366a733c0c1.png)

我越来越 ：

![错误的图像](../Images/ca18f925864f4b4006f98289d8587e23.png)

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T16:47:49.870

当您将内容转换回`uint8`s 时，您遇到了溢出问题。

您正在使用 进行转换`(img_plot1*255.999).round().astype(np.uint8)`，但是对于接近或等于 1 的值，这将溢出。（大于 0.998 的任何值）

假设`img_plot1`将始终包含 0 到 1 之间的值，我认为您的意思是：

```
(img_plot1 * 255.99).astype(np.uint8) 
```

或者

```
(img_plot1 * 255).round().astype(np.uint8) 
```

该`round`调用将向上或向下舍入，而纯 int 强制转换实际上是一个`floor`调用。

但是，仅从输出图像中的“条带”猜测，您的输入数据就会多次溢出和“包装”。因此，您的输入数据的范围可能大于 0-1。

因此，如果您不想担心 中值的确切范围`img_plot1`，您可以根据其范围将其重新调整为 0-255：

```
rescaled = 255 * (img_plot1 - img_plot1.min()) / img_plot1.ptp()
foto = Image.fromarray(rescaled.astype(np.uint8), mode='L') 
```

您还可以使用`np.digitize`重新缩放数组，但它的可读性较差，imo 还可以查看`np.clip`是否要裁剪高于和低于阈值（例如 0 和 255）的值。

# c# - 我应该使用哪个系列？

> ID：13431622
> 
> 赞同：2
> 
> 时间：2012-11-17T14:43:40.810
> 
> 标签：c#, .net, arrays, list, collections

我正在寻找适合我当前情况的理想系列。

我所需要的只是一个`List<string>`可以允许每个索引有**两个**条目。类似于 a `Dictionary`，但是我不需要键和值，并且想通过索引遍历它。我能想到的最好的集合是多维数组，但是我想指定每个元素可以存储两个项目，但是元素的数量可以是无限的。

我应该使用哪个系列？

**编辑**：另外，我想过使用 a `List<List<string>>`，但是由于每个索引只需要两个元素，我认为在列表的每个索引位置存储一个列表将是一种浪费。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T14:45:52.787

您可以使用`Tuple`

检查这个：[元组（类）](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

```
var population = new Tuple<string, string>("New York", "Madrid"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T14:47:01.287

尝试使用类

```
public class MyData
{
    public string Data1 {get;set;}
    public string Data2 {get;set;}
}

var obj = List<MyData>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T15:23:27.683

您还可以将元组与更简单的辅助方法一起使用

```
var population = Tuple.Create("New York", "Madrid") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T15:49:00.447

您也可以尝试使用锯齿状数组（数组数组）：

```
 object[] row1 = new object[2]; // create a one dimensional array
 for (int i = 1; i < 2; i++)
 {
     row1[i] = "yourValues "+i; // push your values into the array
 }

 object[,] multi=new object[1,2];
            multi[0,0] = row1; // push the created array into 2dimensional array

for (int j = 0; j < ((object[])(multi[0, 0])).Length; j++)
                MessageBox.show(((object[])(row[0, 0]))[j]); // retrieve value from 
```

带索引的多维数组。

谢谢。

# iphone - 如何将标签栏添加到现有项目的情节提要？

> ID：13431623
> 
> 赞同：1
> 
> 时间：2012-11-17T14:43:40.930
> 
> 标签：iphone, objective-c, xcode, storyboard

我第一次使用故事板。该应用程序现在已经完成了 80%，并且变得比我最初想象的要复杂一些。我认为可以通过为应用程序使用选项卡视图并将某些部分分成选项卡来改善用户体验，以便用户可以轻松地在它们之间切换。我熟悉以编程方式构建标签栏应用程序并使用 IB 经典（无故事板），但我目前有点迷茫。如何将标签栏控制器添加到现有项目的情节提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:57:42.753

这是一个包含代码和屏幕截图的指南，以编程方式使用情节提要和这个[iOS 5 第 1 部分中的开始情节提要](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)[创建 uitabbarcontroller](http://www.yacana.ro/creating-a-uitabbarcontroller-programmatically-with-storyboards-aka-storyboarding-like-a-baws/)

# php - 使用改进的前序树遍历算法溢出二叉树中的新节点

> ID：13431625
> 
> 赞同：1
> 
> 时间：2012-11-17T14:44:01.063
> 
> 标签：php, binary-tree

我想使用 php 在 MlM 应用程序中实现二叉树放置，

使用的术语：

推荐人，上线，下线

推荐人只会是前 2 个被推荐人的上线，额外的推荐人将溢出到二叉树以填充任何可用空间，从左到右

例子：

1.  “A”指“B”和“C”和“D”，
2.  “B”和“C”并作为“A”的下线放置，
3.  “C”然后溢出到下一个可用空间。
4.  在这种情况下，在 "B" 的左侧，因为还没有任何下线

    ```
     A
      /\
     /  \
    B    C 
    ```

    / D

假设每个推荐人只带来 2 人，我可以使用修改后的前序树遍历算法将其自动添加到表中，

但我的挑战是确定桌子上的下一个可用空间（按顺序）以添加来自已经有 2 条下线的推荐人的溢出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T23:54:13.580

我终于自己解决了这个问题。

```
//traverse the network binary tree to fetch the next available upline to place the user under
    function get_next_free_upline($pref, $sponsor_id)
    {

        $ref_id = $sponsor_id;
        $get_next = TRUE;

        $level = 1;
        $lft = $this->get_pointers($ref_id, 'lft');
        $rgt = $this->get_pointers($ref_id, 'rgt');
        $offset = $this->get_offset($lft, $rgt);

        while ($get_next !== FALSE) 
        {               
            $query = $this->db->query
            ('  SELECT node.*, (COUNT(parent.upline_id) - ' . $offset . ') AS level
                FROM tree AS node
                CROSS JOIN tree AS parent
                WHERE (node.lft BETWEEN parent.lft AND parent.rgt AND 
                 node.lft > ' . $lft .' AND node.rgt < ' . $rgt . ')
                GROUP BY node.id    
                having level = ' . $level . '
                ORDER BY node.lft           
            ');

            $result = $query->result();

            //check if this upline has less than 2 downlines
            //if yes, assign the user_id to upline and return
            if ($query->num_rows() < 2)
            {
                $upline_id = $sponsor_id;
                $get_next = FALSE;
            }
            else
            {   //loop through all members under the current sponsor id 
                //to know where to spill over the referred member
                foreach ($result as $row):  

                    $sponsor_id = $row->id;

                    //check all occurences of this level member as an upline            
                    $this->db->select('*');
                    $this->db->from('tree');
                    $this->db->where('upline_id', $sponsor_id);

                    $inner_query = $this->db->get();

                    if ($inner_query->num_rows() < 2)
                    {
                        $upline_id = $sponsor_id;
                        $get_next = FALSE;
                        break;
                    }           
                endforeach; 

                //increase the level number and loop back               
                $level  = $level + 1;
                $get_next = TRUE;   
            }               
        }           
            return $upline_id;
    } 
```

# android - android字符串数组 - 计算项目数

> ID：13431627
> 
> 赞同：0
> 
> 时间：2012-11-17T14:44:13.653
> 
> 标签：android, arrays, string, checkbox

我正在开发测验应用程序，用户可以选择 4 种类型的问题难度。问题和答案作为字符串数组存储在 string.xml 中。

如果勾选了所有复选框，则相应的字符串数组将存储到 ArrayList NUM_ALL_QuestionNames 以供以后测验检索，因为里面的问题将进一步混合和打乱。

完整编码如下：

```
public class Num_index extends Activity 
{
       String[] NUM_SIM_QuestionNames;
       String[] NUM_MED_QuestionNames;
       String[] NUM_DIF_QuestionNames;
       String[] NUM_EXP_QuestionNames;
       String[] NUM_SIM_AnswerNames;
       String[] NUM_MED_AnswerNames;
       String[] NUM_DIF_AnswerNames;
       String[] NUM_EXP_AnswerNames;

       private List<String> NUM_ALL_QuestionNames;  // for quiz
       private List<String> NUM_ALL_AnswerNames;    // for quiz

       private int QuestionImport;         
       private TextView CheckTextView; 
       private TextView AlertTextView;     

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.main_num_index); 

          Button ButtonStart= (Button) findViewById(R.id.buttonStart);
          ButtonStart.setOnClickListener(startButtonListener);

          CheckTextView = (TextView) findViewById(R.id.checktextView); 
          AlertTextView = (TextView) findViewById(R.id.alerttextView);            
          AlertTextView.setText("Start: No alert");

          NUM_SIM_QuestionNames = getResources().getStringArray(R.array.Num_Q_Simple_List);
          NUM_MED_QuestionNames = getResources().getStringArray(R.array.Num_Q_Medium_List);
          NUM_DIF_QuestionNames = getResources().getStringArray(R.array.Num_Q_Diff_List);
          NUM_EXP_QuestionNames = getResources().getStringArray(R.array.Num_Q_Expert_List);           
          NUM_SIM_AnswerNames = getResources().getStringArray(R.array.Num_A_Simple_List);
          NUM_MED_AnswerNames = getResources().getStringArray(R.array.Num_A_Medium_List);
          NUM_DIF_AnswerNames = getResources().getStringArray(R.array.Num_A_Diff_List);
          NUM_EXP_AnswerNames = getResources().getStringArray(R.array.Num_A_Expert_List);

          NUM_ALL_QuestionNames = new ArrayList<String>();
          NUM_ALL_AnswerNames = new ArrayList<String>();
          NUM_ALL_QuestionNames.clear();
          NUM_ALL_AnswerNames.clear();                                
       };

       private OnClickListener startButtonListener = new OnClickListener() 
       {
          @Override
          public void onClick(View v) 
          {
              CheckBox CheckSim = (CheckBox) findViewById(R.id.checkBox2);
              CheckBox CheckMed = (CheckBox) findViewById(R.id.checkBox3);
              CheckBox CheckDif = (CheckBox) findViewById(R.id.checkBox4);
              CheckBox CheckExp = (CheckBox) findViewById(R.id.checkBox5);    

              if (CheckSim.isChecked()) 
              {
                  QuestionImport= 0;                  
                  QuestionImport = NUM_SIM_QuestionNames.length;
                  int i =0;
                  while (i<QuestionImport)
                  {
                      String Q_toimport = NUM_SIM_QuestionNames[i];
                      String A_toimport = NUM_SIM_AnswerNames[i];                                                       

                      NUM_ALL_QuestionNames.add(Q_toimport);
                      NUM_ALL_AnswerNames.add(A_toimport);                    
                      ++i;                    
                  }           
              };    

// same for other checkbox, not shown here for simplicity //   

              if ((!CheckSim.isChecked()) && (!CheckMed.isChecked()) && (!CheckDif.isChecked()) && (!CheckExp.isChecked()))  
              {
                  int k = 0;
                  if (NUM_ALL_QuestionNames.size() >0) {k= NUM_ALL_QuestionNames.size();}
                  CheckTextView.setText(k);
                  AlertTextView.setText("Please select at least one choice!");
              }

              if ((CheckSim.isChecked()) || (CheckMed.isChecked()) || (CheckDif.isChecked()) || (CheckExp.isChecked()))  
              {
                  int k = 0;
                  if (NUM_ALL_QuestionNames.size() >0) {k= NUM_ALL_QuestionNames.size();}
                  CheckTextView.setText(k);
                  AlertTextView.setText("Have Selection!");
              }                           
          } 
       }; 
```

日志猫：

```
11-17 21:55:41.510: E/AndroidRuntime(12639): FATAL EXCEPTION: main
11-17 21:55:41.510: E/AndroidRuntime(12639): android.content.res.Resources$NotFoundException: String resource ID #0x0
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.content.res.Resources.getText(Resources.java:260)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.widget.TextView.setText(TextView.java:3680)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at com.pearappx.iq_3.Num_index$1.onClick(Num_index.java:188)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.view.View.performClick(View.java:3627)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.view.View$PerformClick.run(View.java:14329)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.os.Handler.handleCallback(Handler.java:605)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.os.Looper.loop(Looper.java:137)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at android.app.ActivityThread.main(ActivityThread.java:4511)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at java.lang.reflect.Method.invokeNative(Native Method)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at java.lang.reflect.Method.invoke(Method.java:511)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-17 21:55:41.510: E/AndroidRuntime(12639):    at dalvik.system.NativeStart.main(Native Method) 
```

## 问题：

执行应用程序时，在第 188 行出现错误，即
CheckTextView.setText(k) 的行；

我只想看看 NUM_ALL_QuestionNames 是否已经导入了所有字符串，即如果每个数组都有 8 个值，如果勾选了所有 4 个级别，CheckTextView 将显示 32，如果勾选了 3，则显示 24，依此类推。

但是要解决188行的问题呢？非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:48:15.020

`int`尝试将一个传递给“setText（）”函数时，我也遇到了这个错误。

`k`在将其传递给之前尝试转换为字符串`setText()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T14:49:55.660

您将 k 定义为 int。您可以将字符串传递给 setText。采用：

```
CheckTextView.setText(String.valueOf(k)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T14:51:14.927

当您使用时，`CheckTextView.setText(k);`您正在调用设置资源 ID 的方法。相反，您希望传入一个表示整数值的字符串。试试`.setText("" + k)`。

# css - 如何缩进 jqgrid 表？

> ID：13431633
> 
> 赞同：1
> 
> 时间：2012-11-17T14:45:09.923
> 
> 标签：css, jqgrid

我怎样才能让[这个例子](http://jsfiddle.net/amorris/yNw3C/)中的表格缩进，我想在 2 行和标题的一侧有空白，基本上我想在“Stackoverflow 示例”下方的所有内容的左侧都有一个空白边距。如果我只能用 css 做到这一点，那就太好了。

这是代码：

```
var data = [[48803, "DSK1", "", "02200220", "OPEN"], [48769, "APPR", "", "77733337", "ENTERED"]];

$("#grid").jqGrid({
    datatype: "local",
    height: 250,
    colNames: ['Inv No', 'Thingy', 'Blank', 'Number', 'Status'],
    colModel: [{
        name: 'id',
        index: 'id',
        width: 60,
        sorttype: "int"},
    {
        name: 'thingy',
        index: 'thingy',
        width: 90,
        sorttype: "date"},
    {
        name: 'blank',
        index: 'blank',
        width: 30},
    {
        name: 'number',
        index: 'number',
        width: 80,
        sorttype: "float"},
    {
        name: 'status',
        index: 'status',
        width: 80,
        sorttype: "float"}
    ],
    caption: "Stack Overflow Example",
    // ondblClickRow: function(rowid,iRow,iCol,e){alert('double clicked');}
});

var names = ["id", "thingy", "blank", "number", "status"];
var mydata = [];

for (var i = 0; i < data.length; i++) {
    mydata[i] = {};
    for (var j = 0; j < data[i].length; j++) {
        mydata[i][names[j]] = data[i][j];
    }
}

for (var i = 0; i <= mydata.length; i++) {
    $("#grid").jqGrid('addRowData', i + 1, mydata[i]);
}

/*
$("#grid").jqGrid('setGridParam', {onSelectRow: function(rowid,iRow,iCol,e){alert('row clicked');}});
*/
$("#grid").jqGrid('setGridParam', {ondblClickRow: function(rowid,iRow,iCol,e){alert('double clicked');}}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:15:09.743

这是一个纯 CSS 的解决方案。调整列大小时，您仍然面临挑战。当您单击并拖动以调整大小时，垂直标记仍显示在原始偏移处。

```
#gbox_grid, .ui-jqgrid .ui-jqgrid-titlebar {
    padding-right: 20px;
}
.ui-jqgrid .ui-jqgrid-hdiv, .ui-jqgrid .ui-jqgrid-bdiv {
    margin-left: 20px;
}

.ui-jqgrid .ui-jqgrid-titlebar {
    margin-right: -20px;
}    
.ui-jqgrid tr.jqgrow td:first-child {
    border-left-style: solid;
    border-left-color: inherit;    
} 
```

[http://jsfiddle.net/meharg/8BkMw/4/](http://jsfiddle.net/meharg/8BkMw/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:59:38.983

`script`因为这是在解析 CSS 之后加载的，如果您对and的位置很挑剔，如果没有一点 JS 就很难做到`style`，这就是您无需担心任何事情的方法。尽管我认为如果您只想要一个 CSS 解决方案，无论样式和脚本位置如何，它都不会起作用，因为表格是在解析后生成的。

[http://jsfiddle.net/yNw3C/1534/embedded/result/](http://jsfiddle.net/yNw3C/1534/embedded/result/)

我在添加代码的地方添加了一些注释。

编辑，忘记添加可编辑的小提琴：http: [//jsfiddle.net/yNw3C/1539/](http://jsfiddle.net/yNw3C/1539/)

# java - 获取问卷 JSF 的结果

> ID：13431634
> 
> 赞同：1
> 
> 时间：2012-11-17T14:45:13.547
> 
> 标签：java, jsf, jsf-2, map

我只有一个想法，即实现获得用户的答案。我决定使用`List<String> questionsWithAnswers`并放入此列表对，例如“1_1”、“1_2”、“1_3”、“2_1”。像这样的东西。但即使有这个想法，我也有问题。同样重要的是，我将使用网络服务（例如，使用地图作为保存对问题和答案的结构是一个限制）。

********我的豆********

```
 public class TestBean implements Serializable{

        private static final long serialVersionUID = 1L;

        private List<Test> testList;
        private List<Answer> answerList;
        private List<Subject> subjectList;
        private Map<Question, List<QuestionAnswer>> mapQestionsWithAnswers;
        private List<String> questionAnswerList;

        private Long subjectId = 0L;
        private Test test;
//...
} 
```

**getTest.xhtml**

```
<c:forEach items="#{test.testBean.mapQestionsWithAnswers}"
                    var="entry">
                    <h:inputHidden value="#{entry.key.questionId}" />
                    <h:outputText value="#{entry.key.question}" rendered="#{not empty entry.value}"/>                   
                    <h:selectManyCheckbox value="#{test.testBean.questionAnswerList}" layout="pageDirection">
                        <f:selectItems value="#{entry.value}" var="ans"
                            itemValue="#{fnc:concat(ans.answer.answerId, entry.key.questionId)}"
                            itemLabel="${ans.answer.answer}" />                         
                    </h:selectManyCheckbox>
                </c:forEach>
                <h:commandButton value="#{msgs['page.content.passtest']}" action="#{test.passTest}" /> 
```

对于带有 answerId 的连接 questionId，我使用 concat。我[在 JSF/JSP EL 和 Javascript 的连接字符串中找到了这个](https://stackoverflow.com/questions/2192759/concatenate-strings-in-jsf-jsp-el-and-javascript)

但我无法**`entry.key.questionId`**在里面获得价值**`itemValue="#{fnc:concat(ans.answer.answerId, entry.key.questionId)}"`**

我不明白为什么。

我在哪里可以犯错？我想问一些关于更多逻辑和简单决策类似问题的来源。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T22:42:06.570

您不需要连接：

```
itemValue="#{fnc:concat(ans.answer.answerId, entry.key.questionId)}" 
```

可以很简单：

```
itemValue="#{ans.answer.answerId}, #{entry.key.questionId}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:22:53.087

为什么不使用自己的方法进行连接？你可以使用一个名为`concatenatorBean`有方法的bean

`String customConcat(String str1, String str2) {
   return str1+"_"+str2;
}`

然后，`getTest.xhtml`您可以使用自己的连接器来解决问题。

# php - 代码中的php间距

> ID：13431635
> 
> 赞同：-3
> 
> 时间：2012-11-17T14:45:19.977
> 
> 标签：php

我有这个代码：

```
<?php wpfp_link();the_views(); ?> 
```

运行时显示：

添加到收藏夹。浏览量：6

我希望它显示如下，带有空格。

```
Add to favorites.                                         Views: 6 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:50:14.707

而不是“添加到收藏夹。视图：6”您想要“添加到收藏夹”。然后你就不得不采取 the_views(); 出自 wpfp_link(); puts Add to favorites on the page you would have to get in wpfp_link(); 并在“添加”之前和“添加”之后添加。它会使 Add 部分文本变为蓝色。

如果你想在 wpfp_link(); 之后给它一个空格；基本上用跨度包装它并给它一个边距/填充权，这是最好的方法。

像这样;

```
<?php 
       echo "<span style='color:blue;padding-right:10px'>";
             wpfp_link();
       echo "</span>";
             the_views();
 ?> 
```

[http://jsfiddle.net/ygkFc/](http://jsfiddle.net/ygkFc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:50:34.090

你需要添加一些 HTML 和 CSS，

```
<span><?php wpfp_link(); ?></span> <span style="float:right"><?php the_views(); ?></span> 
```

**演示：http:** [//jsfiddle.net/E4y7y/1/](http://jsfiddle.net/E4y7y/1/)

**解决方案 2**

```
<span style="display:inline-block;width:60%"><?php wpfp_link(); ?></span> <span  style="display:inline-block;width:35%;" ><?php the_views(); ?></span> 
```

**演示：http:** [//jsfiddle.net/E4y7y/](http://jsfiddle.net/E4y7y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T15:14:05.913

它纯粹是一个 CSS 东西。它取决于你试图在哪里显示输出的 DOM。你可以将它们放在单独的 DOM 中并应用边距或浮动并按你想要的方式显示。

```
<div style = "float:left"><?php wpfp_link();?></div>
<div style = "float:right"><?php the_views(); ?></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T14:46:22.720

```
<?php wpfp_link(): ?> &nbsp; &nbsp; &nbsp; blah blah blah <?php the_views(); ?> 
```

# android - 保存和检索选定的微调器位置

> ID：13431644
> 
> 赞同：6
> 
> 时间：2012-11-17T14:46:13.560
> 
> 标签：android, android-widget, spinner, sharedpreferences

您将如何保存和检索微调器选择，所以当您返回时选择微调器上的相同项目？也许有共同的偏好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T14:55:51.673

将数据保存在`sharedPreferences`（将此代码放在`onItemSelected()`方法上并保存所选值的位置`spinner`）：

```
int userChoice = spinner.getSelectedItemPosition();
SharedPreferences sharedPref = getSharedPreferences("FileName",0);
SharedPreferences.Editor prefEditor = sharedPref.edit();
prefEditor.putInt("userChoiceSpinner",usersChoice);
prefEditor.commit(); 
```

从以下位置获取数据`sharedPreferences`：

```
SharedPreferences sharedPref = getSharedPreferences("FileName",MODE_PRIVATE);
int spinnerValue = sharedPref.getInt("userChoiceSpinner",-1);
if(spinnerValue != -1) {
  // set the selected value of the spinner 
  spinner.setSelection(spinnerValue);
} 
```

参考这个：[在微调器中设置选择](http://developer.android.com/reference/android/widget/AdapterView.html#setSelection%28int%29) 和这个：在微调器[中获取所选项目的位置](http://developer.android.com/reference/android/widget/AdapterView.html#getSelectedItemPosition%28%29)

## 也可以看看 ：

*   [Android 教程：使用 SharedPreferences](http://www.android-ios-tutorials.com/android/android-sharedpreferences-example/)

*   [Android 教程：在活动之间切换并在它们之间传递数据](http://www.android-ios-tutorials.com/android/switch-between-activities-in-android/)

# html - Windows 7 与 Windows XP 上 Firefox 中的字体行间距

> ID：13431651
> 
> 赞同：2
> 
> 时间：2012-11-17T14:46:46.490
> 
> 标签：html, css, windows, firefox, font-size

我在文本段落中使用 Verdana 字体。问题是，在 Windows XP 上的 Firefox v16 中，此文本的呈现方式与 Windows 7 上的 Firefox v16 不同。Internet Explorer 9 在 Windows 7 上呈现字体没有任何问题。区别在于行间距 - 在 Firefox / XP 和 IE / 7 中行间距比 Firefox / 7 窄一点。我在 Windows 7 上使用 Firefox 和 Internet Explorer 的默认设置。

所以我说的不是水平字符间距，而是垂直行间距。

据我所知，Verdana 是 XP 和 Win7 的标准字体，所以应该没有问题。

是否有任何 CSS 代码可以解决此问题并使 Windows 7 上的 IE 和 Firefox 中的间距相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:57:46.227

附近没有 XP 机器，但您是否`line-height`在 CSS 中设置了自定义？你说“我正在使用默认设置”，这让我觉得你没有设置一个固定的`line-height`. 如果我误解了我道歉。

# servlets - 之间的区别 和 标签？

> ID：13431653
> 
> 赞同：0
> 
> 时间：2012-11-17T14:46:55.077
> 
> 标签：servlets

在 web.xml 下定义 servlet 映射时，servlet-path 和 servlet-class 标签之间有什么区别吗？

```
<servlet>
    <servlet-name>register</servlet-name>
    <servlet-path>box.RegisterServlet</servlet-path>
</servlet> 
```

假设将 servlet-path 更改为 servlet-class 会有什么不同吗？如果没有，为什么有 2 个单独的标签来做同样的事情？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T14:52:04.157

没有像`<servlet-path/>`Servlet Spec 中那样的属性。只`<servlet-class/>`允许。它甚至对你有用吗？

# 也可以看看

*   [`web-app_2_5.xsd`](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-app_2_5.xsd)

*   [`web-app_3_0.xsd`](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-app_3_0.xsd)

# http - 主机按原样传输后URL中的字符？

> ID：13431660
> 
> 赞同：1
> 
> 时间：2012-11-17T14:47:54.867
> 
> 标签：http

如果我访问 URL：

```
http://foo/bar 
```

然后，Web 浏览器将`foo`通过 TCP 在端口 80 上连接到主机并发送 GET 请求：

```
GET /bar HTTP... 
```

显然，并非该`bar`部分中的所有字符都可以使用（逐字传输）。例如空格字符 (#20)。

在 256 个可能的字节中，标准 Web 浏览器会将输入到地址栏中的 URL 逐字传输（按原样，没有特殊编码）到 GET 请求，哪些不会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:59:02.223

[RFC-3986](http://www.ietf.org/rfc/rfc3986.txt)讨论了保留和非保留字符。可以使用未保留的字符，无需特殊编码；其他所有内容都必须使用 %xx 符号进行 url 编码。

非保留字符包括大写和小写字母、十进制数字、连字符、句点、下划线和波浪号。

浏览器足够智能，可以在打开与服务器的套接字连接之前自动转义空格和其他字符。

编辑

保留字符在用于其预期目的时无需编码。但是，当它们用作查询字符串或路径组件的一部分时，它们必须是 url 编码的。

保留字符是`! * ' ( ) ; : @ & = + $ , / ? # [ ]`

例如，这里是一个 url

`http://example.com:8090/email/tigerwoods%40gmail.com?folder=sport%2Fgolf`

在这里，当它们发挥正常作用时，`/`并没有被编码。`?`但是，该`@`符号被编码为电子邮件的一部分。`/`也被编码为查询字符串参数的一部分。

# bash - 加密 bash 脚本使用的登录列表 - FIFO 还是...？

> ID：13431662
> 
> 赞同：0
> 
> 时间：2012-11-17T14:48:02.337
> 
> 标签：bash, encryption, scripting

我有一个 bash 脚本，它使用包含登录列表的文本文件：

```
LOGINLIST=/home/user/logins.txt
while read line
do
echo $line
done < $LOGINLIST 
```

我宁愿不将登录列表存储为纯文本，但我不想每次运行脚本时都必须手动解密它。（让脚本提示输入密码就可以了。）

我可以做到这一点的一种方法是在脚本中包含一行，例如 openssl 在文件被读取之前对其进行解密。不幸的是，如果脚本停止（可能它登录的站点之一没有响应），这将使文件在不确定的时间内不受保护。

所以我宁愿只将明文保留在内存中。

LinuxQuestions 上的这篇文章（[http://www.linuxquestions.org/questions/programming-9/can-we-hide-the-code-of-a-shell-script-370328/#post1887648](http://www.linuxquestions.org/questions/programming-9/can-we-hide-the-code-of-a-shell-script-370328/#post1887648)）建议将明文发送到FIFO 可能会成功，但这对我来说完全是陌生的领域。有没有更好/更简单的方法？脚本完成后如何擦除内存？

...有没有办法编辑加密的登录列表，同时将明文保存在内存中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T16:03:48.430

您可以在`openssl`不更改代码结构的情况下使用并处理替换。

要加密文件，请使用以下内容：

```
openssl blowfish -in plaint_text_file -out encrytped_file 
```

（选择你想要的密码，它会提示你输入密码。）

然后你可以使用加密文件：

```
LOGINLIST=/path/to/encrypted/file
while read line
do
  echo $line
done < <(openssl blowfish -d -in $LOGINLIST) 
```

这将提示您输入密码。没有生成临时文件。

（注意最后一个命令中的空格，确实是`< <(`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T17:07:54.210

您可以使用以下命令在 vim 中打开一个名为 encrytped_file 的现有加密文件：

```
openssl blowfish -d -in encrytped_file | vim - 
```

您可以通过 vim 创建或修改/覆盖名为 encrytped_file 的加密文件：

```
:w !openssl blowfish -in /dev/stdin -out encrytped_file 
```

只需查找密码提示即可。它们会被 vim 的 ui 遮住。

这是此答案中使用的技巧。您应该学习它们而不是复制和粘贴它们，以便在其他情况下使用它们。

1.  当给出裸连字符的参数时，vim 从管道（又名：标准输入或标准输入）读取。
2.  vim 可以通过管道将其缓冲区传递给命令`:w !command`
3.  unix 命令将裸连字符解释为“从标准输入读取”是很常见的，但并非所有命令都这样做。在这种情况下，您可以经常使用`/dev/stdin`

# android - 从 IP 地址获取广播地址的最佳方法是什么？

> ID：13431675
> 
> 赞同：1
> 
> 时间：2012-11-17T14:48:41.140
> 
> 标签：android, wifi, broadcast

我正在编写一个应该通过 WiFi 发送广播数据包的 android 应用程序。

目前我可以`WifiManager.getConnectionInfo().getIpAddress()`通过简单地将最后一位数字替换为 0 来获取设备的 IP 地址并猜测广播地址。但我真的不喜欢这种解决方案。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:07:00.933

尝试这样的事情：

```
 public static String getBroadcast(){
    String found_bcast_address=null;
     System.setProperty("java.net.preferIPv4Stack", "true"); 
        try
        {
          Enumeration<NetworkInterface> niEnum = NetworkInterface.getNetworkInterfaces();
          while (niEnum.hasMoreElements())
          {
            NetworkInterface ni = niEnum.nextElement();
            if(!ni.isLoopback()){
                for (InterfaceAddress interfaceAddress : ni.getInterfaceAddresses())
                {

                  found_bcast_address = interfaceAddress.getBroadcast().toString();
                  found_bcast_address = found_bcast_address.substring(1);

                }
            }
          }
        }
        catch (SocketException e)
        {
          e.printStackTrace();
        }

        return found_bcast_address;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T15:04:54.360

您需要用`255`not替换为`0`。

如果您的目标是 SDK 9 或更高版本，您可以使用`getBroadcast()`，否则您需要覆盖 IP 地址中的数字。

示例代码：

```
public static InetAddress getNetworkLocalBroadcastAddressdAsInetAddress() throws IOException {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        if(VERSION.SDK_INT < 9) { 
            if(!intf.getInetAddresses().nextElement().isLoopbackAddress()){
                byte[] quads = intf.getInetAddresses().nextElement().getAddress();
                quads[0] = (byte)255;
                quads[1] = (byte)255;
                return InetAddress.getByAddress(quads);
            }
        }else{
            if(!intf.isLoopback()){
                List<InterfaceAddress> intfaddrs = intf.getInterfaceAddresses();
                return intfaddrs.get(0).getBroadcast(); //return first IP address
            }
        }
    }
    return null;
} 
```

# http - Subversion 自动创建 HTTP 链接

> ID：13431686
> 
> 赞同：1
> 
> 时间：2012-11-17T14:50:22.977
> 
> 标签：http, svn, hyperlink, tortoisesvn, commit

我想这样做：当我使用乌龟 svn 并创建一个文件夹然后提交它时；服务器自动为该文件夹创建一个链接。

这是一个我不知道它是如何工作的系统。

1.  我创建一个文件夹=“文档”
2.  将其提交到服务器。当地办公室的一些电脑。
3.  然后当我写一个“http://server/Folders/Doc/”；我看到了整个文件夹。

你知道我怎样才能建立这样的系统吗？

# connection-string - 使用 LocalDb 和 DbContext 的应用程序的正确 app.config 连接字符串？

> ID：13431690
> 
> 赞同：1
> 
> 时间：2012-11-17T14:51:03.683
> 
> 标签：connection-string, app-config, dbcontext, localdb

我有一个使用 LocalDb 和 DbContext 的 Windows 窗体应用程序。这在我的开发盒上运行良好，但在部署到另一个盒子时我无法让它工作。

在我的 app.config 中，我实例化了一个名为 LocalDb 的实例：

```
 <system.data.localdb>
    <localdbinstances>
      <add name="LocalProvergience" version="11.0" />
    </localdbinstances>
  </system.data.localdb> 
```

我的连接字符串是：

```
<add name="LocalProvergienceEntities"
         connectionString="metadata=res://*/ProvergienceModel.csdl|
                                    res://*/ProvergienceModel.ssdl|
                                    res://*/ProvergienceModel.msl;
                                    provider=System.Data.SqlClient;
                                    provider connection string=&quot;data source=(localdb)\LocalProvergience;
                                    initial catalog=LocalProvergience;integrated security=True;
                                    multipleactiveresultsets=True;
                                    App=EntityFramework&quot;"
         providerName="System.Data.EntityClient" /> 
```

如果我包括：

```
 AttachDbFilename=|DataDirectory|\LocalProvergience.mdf; 
```

在连接字符串中，出现“attachdbfilename 的键值无效”错误。

如果我排除 AttachDbFilename，我会收到“与 SQL 服务器建立连接时发生与网络相关或特定于实例的错误”错误。

几个问题：

1.  providerName 设置为“System.Data.EntityClient”应该是“System.Data.LocalDb”吗？

    1.  任何人都可以发布或指导我到 LocalDb 和 DbContext 的正确 app.config 的示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T22:10:47.577

调试`AppDomain.CurrentDomain.GetData("DataDirectory")`时运行应用程序时等于什么？如果为空，您可以使用

```
AppDomain.CurrentDomain.SetData(
  "DataDirectory", Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "")); 
```

我刚刚遇到了这个，但是我的 AttachDBFilename = |DataDirectory|database.mdf，我认为它不需要额外的 \，因为 Path.Combine。

我还注意到在运行 SQLlocalDB 信息时 v11.0 属性 Auto-Create 是 Yes，不确定在指定命名实例时是否会有所不同。

# mysql - 我如何使用 mysql 计算过去 31 天的计数？

> ID：13431692
> 
> 赞同：1
> 
> 时间：2012-11-17T14:51:21.257
> 
> 标签：mysql, sql, gaps-and-islands

> **可能重复：**
> [MySQL 如何在范围内填充缺失的日期？](https://stackoverflow.com/questions/3538858/mysql-how-to-fill-missing-dates-in-range)

我有一个包含以下列的表格：

*   `id`,
*   `submitdate`,
*   `clicks`.

现在我想从 31 天中检索每天的点击次数。

**如果没有特定日期的记录，则应为零。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:52:51.813

~~尝试这个：~~

 ~~```
SELECT 
  DATE(submitdate) 'Day',
  SUM(clicks)
FROM Table
WHERE DATEDIFF(NOW(), submitdate) <= 31
GROUP BY DATE(submitdate); 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/aa8ac/1)~~  ~~**更新：**为此，您需要生成从当前日期开始的最后 n 天的列表`NOW()`。我为此使用了一个锚表：

```
CREATE TABLE TEMP 
(Digit int);
INSERT INTO Temp VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9); 
```

然后我用它来生成从现在开始的最后 n 天的列表（在演示中我使用了 31 天，但您可以尝试使用任何小于 100 的值，如果您想获得超过 100 的值，则需要再添加`CROSS JOIN temp`一个时间）我使用了以下查询：

```
 SELECT 
      DATE_SUB(NOW(), INTERVAL id DAY) GDay
    FROM
    (
      SELECT t2.digit * 10 + t1.digit + 1 AS id
      FROM         TEMP AS t1
      CROSS JOIN TEMP AS t2
    ) t WHERE id <= 31; 
```

然后`LEFT JOIN`你可以得到最后 31 天，如果没有记录，则为 0：

```
SELECT
  DATE(t2.GDay) 'Day', 
  SUM(IFNULL(t1.clicks, 0)) 'Count of clicks'
FROM
(
    SELECT 
      DATE_SUB(NOW(), INTERVAL id DAY) GDay
    FROM
    (
      SELECT t2.digit * 10 + t1.digit + 1 AS id
      FROM         TEMP AS t1
      CROSS JOIN TEMP AS t2
    ) t WHERE id <= 31
) t2 
LEFT JOIN Table1 t1 ON DATE(t1.submitdate) = DATE(t2.GDay)
GROUP BY DATE(t2.GDay)
ORDER BY DAY DESC; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/7ec26/1)~~

# java - 如何向 _G 添加使用 Luaj 运行 java 代码的函数？

> ID：13431693
> 
> 赞同：4
> 
> 时间：2012-11-17T14:51:31.280
> 
> 标签：java, function, lua, luaj

我想向`_G`可以运行 Java 代码的函数添加函数。我正在使用 Luaj，它已经可以运行用户编写的 Lua 代码，但我想添加允许用户与游戏世界交互的 api。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:18:25.963

您为每个库函数创建一个类，并为加载这些函数创建一个类。您可以根据您的函数需要多少个参数来扩展适当的类（最多三个参数，然后您需要自己制作`FourArgFunction`）。

这是来自 luaj 源的 MathLib.java 文件的示例代码（可在此处找到：http: [//sourceforge.net/projects/luaj/files/latest/download](http://sourceforge.net/projects/luaj/files/latest/download)）：

这是您添加库时需要加载的内容。

```
public class MathLib extends OneArgFunction {
    public static MathLib MATHLIB = null;
    public MathLib() {
        MATHLIB = this;
    }

    public LuaValue call(LuaValue env) {
        LuaTable math = new LuaTable(0,30); // I think "new LuaTable()" instead of "(0, 30)" is OK
        math.set("abs", new abs());
        math.set("max", new max());
        env.set("math", math);
        env.get("package").get("loaded").set("math", math);
        return math;
    }
} 
```

你像这样加载它：

```
globals.load(new MathLib()); 
```

然后为每个库函数创建 MathLib 的子类。对于一个接受一个参数的函数，这里有一个例子：

```
abstract protected static class UnaryOp extends OneArgFunction {
    public LuaValue call(LuaValue arg) {
        return valueOf(call(arg.checkdouble()));
    }
    abstract protected double call(double d);
}

static final class abs extends UnaryOp {
    protected double call(double d) {
        return Math.abs(d);
    }
} 
```

您不需要抽象类，您可以`abs`直接制作，但是如果您查看源代码会很明显，当您需要实现大量数学一元运算时，这样做更方便。

这是一个接受可变数量参数的函数的示例：

```
static class max extends VarArgFunction {
    public Varargs invoke(Varargs args) {
    double m = args.checkdouble(1);
    for ( int i=2,n=args.narg(); i<=n; ++i )
        m = Math.max(m,args.checkdouble(i));
    return valueOf(m);
} 
```

在 Lua 中，您可以：`require('math')`加载 lib，然后`math.abs(-123)`调用 lib 函数。

如果这很难掌握，我真的建议检查 luaj 的来源。此外，我的精简代码未经测试，所以我不能 100% 确定它是否有效。

# javascript - Facebook Like 按钮插件未显示在我的浏览器中

> ID：13431694
> 
> 赞同：4
> 
> 时间：2012-11-17T14:51:36.060
> 
> 标签：javascript, facebook, facebook-like, dreamweaver

我正在使用dreamweaver cs5。我正在尝试第一次在网站上放置一个带有面孔的 facebook 框。

当我在浏览器（不是服务器）中预览我的网站时，插件没有显示，所以我猜我的代码有问题。

非常感谢任何建议。

这是我的代码：

```
<div class="float-left">
<div id="fb-root"></div>

<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="https://www.facebook.com/UnifiedSweden?ref=ts&amp;fref=ts"    data-send="true" data-width="300" data-show-faces="true" data-font="arial"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T23:26:19.930

尝试，

```
js.src = "http:/connect.facebook.net/en_US/all.js#xfbml=1"; 
```

# android - 单击返回后更新 SharedPreferences

> ID：13431702
> 
> 赞同：1
> 
> 时间：2012-11-17T14:52:13.110
> 
> 标签：android, sharedpreferences

我在网上得到了这个代码，我正在寻找对其进行更改。基本上，当我单击“显示共享首选项”，然后单击“首选项屏幕”，进行一些更改，然后单击“返回”时，显示的首选项不会更新，直到我再次单击“显示共享首选项”按钮。如何让偏好自动更新……我需要一个监听器吗？

**PreferenceDemoTestActivity.java**

```
package Preference.Demo;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class PreferenceDemoTestActivity extends Activity {
TextView textView;

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   Button btnPrefs = (Button) findViewById(R.id.btnPrefs);
   Button btnGetPrefs = (Button) findViewById(R.id.btnGetPreferences);

   textView = (TextView) findViewById(R.id.txtPrefs);

   View.OnClickListener listener = new View.OnClickListener() {

   @Override
   public void onClick(View v) {
   switch (v.getId()) {
   case R.id.btnPrefs:
      Intent intent = new Intent(PreferenceDemoTestActivity.this,
          PrefsActivity.class);
      startActivity(intent);
      break;

   case R.id.btnGetPreferences:
      displaySharedPreferences();
      break;

   default:
     break;
   }
   }
   };

   btnPrefs.setOnClickListener(listener);
   btnGetPrefs.setOnClickListener(listener);
}

private void displaySharedPreferences() {
   SharedPreferences prefs = PreferenceManager
    .getDefaultSharedPreferences(PreferenceDemoTestActivity.this);

   String username = prefs.getString("username", "Default NickName");
   String passw = prefs.getString("password", "Default Password");
   boolean checkBox = prefs.getBoolean("checkBox", false);
   String listPrefs = prefs.getString("listpref", "Default list prefs");

   StringBuilder builder = new StringBuilder();
   builder.append("Username: " + username + "\n");
   builder.append("Password: " + passw + "\n");
   builder.append("Keep me logged in: " + String.valueOf(checkBox) + "\n");
   builder.append("List preference: " + listPrefs);

   textView.setText(builder.toString());
}
} 
```

**PrefsActivity.java**

```
package Preference.Demo;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class PrefsActivity extends PreferenceActivity{

@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   addPreferencesFromResource(R.xml.prefs);
}
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical" >

<Button
  android:id="@+id/btnPrefs"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Preferences Screen" />

<Button
  android:id="@+id/btnGetPreferences"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Display Shared Preferences" />

<TextView
  android:id="@+id/txtPrefs"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:55:19.327

`SharedPreferences`只需使用Activity 方法中的值更新变量`onResume()`，然后更新 UI。

您的值没有改变，因为即使您在 Preference Screen 中更新了它们，您的 Activity 手也简单地恢复了它的旧实例并使用存储在变量中的值。

在您的情况下，简单的调用`displaySharedPreferences()`from`onResume()`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:00:32.060

您可以注册`onCreate()`方法的更改：

```
getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this); 
```

然后使用：

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
SharedPreferences.Editor editor = sharedPreferences.edit();
// Update your preferences here 

} 
```

然后不要忘记将其注销`onDestroy()`：

```
getPreferenceScreen().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(this); 
```

# database - 数据库结构和关系

> ID：13431714
> 
> 赞同：0
> 
> 时间：2012-11-17T14:54:07.863
> 
> 标签：database, structure

我正在构建这个游戏门户，我有一些数据库问题。目前我有大约 10 个表，但我认为当我完成编程时它们会超过 20 个。无论如何，我想在不同的表之间创建某种关系（有点像 WordPress）。该表将包含表 A 中的一行与表 B 中的一行的任何关系。我想出的是以下内容：

表关系

```
| rs_id | rs_type | rs_alpha | rs_beta | 
```

rs_id -> 只是一个 id
rs_type -> 关系类型
rs_alpha -> 相关表 #1 和行 id
rs_beta -> 相关表 #2 和行 id

例子：

```
| 1 | cover | games:153 | images:318 |
| 2 | tag | news:183 | tags:18 |
| 3 | group_admin | users:918 | group:75 |
... 
```

这可能只是这样做，但这是我的担忧： 1\. 该表将增长得如此之快，以至于很快就会有超过 100,000 行，这将减慢加载时间。2\. 要提取信息，我必须分解每个调用，这可能会减慢加载时间。3\. 我可能会将表名与 id (rs_alpha, rs_beta) 分开，但这也可能会减慢加载时间。

谢谢你，我愿意接受任何其他可能比这个更好的解决方案:)

如果你有时间，你可以从这里下载我的数据库结构，看看它是什么样子的：demirevdesign.com/public/pcanvil.sql.gz

（addon_ 表将成为关系表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:10:47.110

据我了解，关系类型本身定义了所涉及的表，因此不需要存储表名。
此外，如果您重构架构并为可能涉及关系的所有实体添加一个公共父表，您根本不需要关心表名，您只需存储该新表的 id。

最后，关系总是有开始日期并且可能有结束日期，我建议将此属性添加到`relationships`表中。

至于性能，如果不了解您将如何查询表，就很难回答。我想通常按关系类型列进行分区将是有益的

# android - 不针对最新版本的 Android

> ID：13431722
> 
> 赞同：54
> 
> 时间：2012-11-17T14:54:57.290
> 
> 标签：android, styles, themes, warnings, manifest

尝试在最新的 Android SDK Package 4.2 上测试主题时出现警告。

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.themetest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppBaseTheme" >
        <activity
            android:name="com.example.themetest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

> 不针对最新版本的 Android；兼容模式适用。考虑测试和更新此版本。有关详细信息，请参阅 android.os.Build.VERSION_CODES javadoc。AndroidManifest.xml /ThemeTest line 7 Android Lint 问题

我正在使用一个名为“AppBaseTheme”的自定义主题。我的问题是究竟是什么**请参阅 android.os.Build.VERSION_CODES javadoc。**. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-17T14:57:15.890

之所以这么说是因为`targetSdkVersion="16"`。API 16 是 Jellybean 4.1 和 4.1.1，而 Jellybean 4.2 是 API 17。

尝试使用：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" /> 
```

另外，请记住，这是一个 Lint 警告。这些警告的存在是为了帮助您改进代码并使其易于维护，同时与最新的 Android 更改兼容。忽略这一点不会给您带来任何直接的问题。

编辑：使用 Android 4.3，最新的 SDK 版本现在是 18，所以你应该使用：

```
...
        android:targetSdkVersion="18" /> 
```

编辑 2：使用 Android 4.4，最新的 SDK 版本现在是 19，所以你应该使用：

```
...
        android:targetSdkVersion="19" /> 
```

编辑 3：使用 Android L，您必须使用以下值，如此[处](https://developer.android.com/preview/setup-sdk.html#createProject)所述：

```
compileSdkVersion="android-L"
minSdkVersion="L"
targetSdkVersion="L" 
```

编辑 4：随着 Android L 的公开发布，您必须使用 21 代替：

```
...
        android:targetSdkVersion="21" /> 
```

20 用于 4.4W，或用于[Android Wear](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#KITKAT_WATCH)。

编辑 5：随着 Android M 的公开发布，您必须使用 23 代替：

```
...
        android:targetSdkVersion="23" /> 
```

*以后请查阅[官方 Android 文档](https://source.android.com/source/build-numbers.html)，以了解最新的 Android API 级别。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T23:28:42.047

您不应该使用`android:maxSdkVersion="17"`，因为这意味着如果有人使用您的应用程序将其 android 操作系统更新到高于 17 的版本，您的应用程序将被删除。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T02:45:57.177

此 lint 消息告诉您，兼容模式将自动应用于您可能使用过的任何功能，这些功能在您声明的 targetSdkVersion 16 之后的更高版本中不可用（并且，它还告诉您有*这样的*更高版本 - 例如， 17).

这些自动兼容模式调整可能不如您自己完成的理想，方法是使用更高版本（高于 16 级）中添加的任何功能来替换您可能使用的 16 级功能的功能，这些功能已在更高版本（如果有）。但是在以后的版本中一切都应该继续工作（由于兼容性代码所做的调整，自动应用在高于您声明的 targetSdkVersion 的 API 级别的版本上运行）；它可能不如您自己对新功能的自定义检测和使用（当您的应用检测到它在具有这些功能的更高版本中运行时）*有效*。

下面是关于 minSdkLevel 与 targetSdkLevel 的讨论和示例：

[Android Min SDK 版本与目标 SDK 版本](https://stackoverflow.com/questions/4568267/android-min-sdk-version-vs-target-sdk-version/11176875#11176875)

您需要考虑的另一件事是项目构建目标（用于编译应用程序的 SDK 级别）与 targetSdkLevel 的关系：

[Eclipse 中的“构建目标 SDK”和 AndroidManifest.xml 中的 android:targetSdkVersion 之间的区别？](https://stackoverflow.com/questions/8938348/difference-between-build-target-sdk-in-eclipse-and-androidtargetsdkversion-in/15402516#15402516)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:42:56.473

如果你想解决它，它是一条警告消息，那么你可以设置 android:maxSdkVersion="17" 但你必须注意一个事实，如果有人当前使用你的应用程序并将他的 android 操作系统升级到高于**17**的版本，那么你的应用程序由于不支持的版本会自动删除..所以也要注意这个事实..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T09:04:26.347

添加`xmlns:tools="http://schemas.android.com/tools" tools:ignore="OldTargetApi"`.

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.themetest"
    android:versionCode="1"
    android:versionName="1.0" xmlns:tools="http://schemas.android.com/tools" tools:ignore="OldTargetApi">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

来自：[为什么我的 android 应用程序无法运行？](https://stackoverflow.com/questions/14161732/stuck-on-why-my-android-app-wont-work)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-05T07:05:32.800

始终使用最新的 android 版本作为您的目标 SDK，以获得更多好处。

定位最近的 API 级别还可以让您的应用程序利用平台的最新功能来取悦您的用户。**此外，从 Android 10（API 级别 29）开始，如果应用面向 Android 5.1（API 级别 22）或更低版本，用户在首次启动应用时会看到警告**。

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="29" /> 
```

有关详细信息，请参阅此开发人员网站。

[https://developer.android.com/distribute/best-practices/develop/target-sdk](https://developer.android.com/distribute/best-practices/develop/target-sdk)

# php - 查询为空

> ID：13431723
> 
> 赞同：-1
> 
> 时间：2012-11-17T14:55:15.867
> 
> 标签：php, mysql

我的表“商店”中有 4 个列 - id、store_name、lat、lng。我想显示半径为 30 英里的所有结果。我懂了：

```
$lat = '25.7742644';
$lng = '-80.1936558';
$miles = 30;

$query = mysql_query("SELECT *, 
           ( 3959 * acos( cos( radians($lat) ) 
           * cos( radians( lat ) ) 
           * cos( radians( lng ) - radians($lng) ) 
           + sin( radians($lat) ) 
           * sin( radians( lat ) ) ) ) AS distance 
        FROM stores
        HAVING distance < $miles 
        ORDER BY distance 
        LIMIT 0, 20 ");
    $result = mysql_query($query) or die(mysql_error());
    while($row=mysql_fetch_array($result)) {

    echo $store_name;

    } 
```

但是当我启动脚本时，我得到“查询为空”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T14:57:44.657

```
$query = mysql_query("SELECT *, ...")
^^^^^^   ^^^^^^^^^^^

$result = mysql_query($query) or die(mysql_error());
          ^^^^^^^^^^^ ^^^^^^ 
```

摆脱其中之一`mysql_query`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:06:38.597

试试这个：

```
<?php

$lng = '-80.1936558';
$lat = '25.7742644';
$miles = 30;

$query = "SELECT *, 
( 3959 * acos( cos( radians('$lat') ) * 
cos( radians( latitude ) ) * 
cos( radians( lnggitude ) - 
radians('$lng') ) + 
sin( radians('$lat') ) * 
sin( radians( latitude ) ) ) ) 
AS distance FROM yourtable HAVING distance < '$miles' ORDER BY distance ASC LIMIT 0, 20";
$result = mysql_query($query) or die(mysql_error());
while($row=mysql_fetch_array($result)){
  echo $row["store_name"] . "<br />";
}

?> 
```

[教程链接。](https://developers.google.com/maps/articles/phpsqlsearch_v3)

# c - 将对象数组传递给 Objective C 中的函数——并返回一个对象

> ID：13431727
> 
> 赞同：3
> 
> 时间：2012-11-17T14:55:23.253
> 
> 标签：c, arrays, function, pointers

抱歉，如果这是一个愚蠢的问题，但我是新手，无法在任何地方找到答案。`Fraction`我已经声明了一个由五个对象（对象）组成的数组，如下所示：

```
Fraction *fractArray[5]; 
```

我现在想将此数组（或至少指向它的指针）传递给 C 风格的函数，该函数将对数组中的分数执行各种操作并返回单个分数。在声明了指向数组的指针（称为 * `fractPointer`）后，我尝试设置一个函数，例如：

```
Fraction* arraySum (Fraction *fractPointer, int arraySize)
{
    // dostuff , then return a fraction as the result
} 
```

...并将预定义的指针和数组大小传递给它。我已经通过调试确定 fractPointer 成功指向第一个数组元素。指针最初也指向函数中的正确位置。但我似乎无法获得指向数组中下一个对象的指针。当我这样做时它不断抛出错误`fractPointer++;`（在函数中声明新的分数指针时也是如此）。抱怨是我正在对指向分数的指针进行算术运算，该指针的大小不是恒定的。我对这一切都错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:00:53.613

数组在传递给函数时会衰减为指针。所以你需要像这样声明你的函数：

```
Fraction *arraySum (Fraction **fractPointer, int arraySize); 
```

或作为

```
Fraction *arraySum (Fraction *fractPointer[], int arraySize); 
```

为了让它工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T17:09:25.893

注意你是如何声明你的数组的： `Fraction *fractArray[5]`。另一种写法是`Fraction **fractArray`. 一个*指针*数组。因此，要将数组传递给另一个函数，您需要使用相同的类型 -`Fraction**`或`Fraction *foo[]`.

这与“衰减”无关 - 这与您从示例中删除一个间接级别完全相同。ie`int intArray[5]`不能传递给带参数`int`的函数 - 函数需要获取整个`int array[]`.

# qt - Qt qDebug() 在 Windows shell 中不起作用

> ID：13431734
> 
> 赞同：6
> 
> 时间：2012-11-17T14:56:18.780
> 
> 标签：qt, printf, console-application, qdebug

我在屏幕上使用`qDebug()`Qt 框架。`printf`当我从 Qt Creator 运行应用程序时它工作得很好，但是当我尝试从 Windows 执行它时`cmd`它什么也没显示。为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T15:55:30.557

你必须添加

```
CONFIG += console 
```

到您的项目`.pro`文件中，**不要忘记**清理和构建（重建）您的项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T08:53:55.100

运行您的应用程序

```
application.exe > log.txt 2>&1 
```

它将 stderr 重定向到 stdout 并将 stdout 重定向到文件。

# pubchem - 将 Pubchem 化合物数据库导入 Oracle

> ID：13431736
> 
> 赞同：0
> 
> 时间：2012-11-17T14:56:23.120
> 
> 标签：pubchem

有谁知道将所有数据从 pubchem 复合数据库轻松导入到 oracle 数据库（11g）的方法？

我没有找到任何解决我的问题的解决方案

# mysql - 在 SQL 中跨“group by”聚合字符串？

> ID：13431738
> 
> 赞同：1
> 
> 时间：2012-11-17T14:56:37.327
> 
> 标签：mysql, sql

考虑以下架构：

```
create table A
(
    id int primary id
)

create table B
(
    a_id int,
    s varchar(255)
) 
```

然后是以下查询：

```
select A.id, sum(1), ??? concat_join(B.s) ???
from A left join B on A.id = B.a_id group by A.id 
```

A 和 B 之间存在一对多的关系，因此多行将组合为一个。“concat_join”的期望行为是对于组中的每个 B，通过连接它们（可能使用空格分隔符）将它们连接到一个字符串中。

有什么办法可以表达这是 MySQL 5.5 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T14:57:39.950

使用[**GROUP_CONCAT**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
select A.id, sum(1), GROUP_CONCAT(B.s)
from A left join B on A.id = B.a_id 
group by A.id 
```

默认情况下，字符串由*逗号*分隔。如果要更改它，请添加`SEPARATOR`关键字，

```
select A.id, sum(1), GROUP_CONCAT(B.s SEPARATOR ';')
from A left join B on A.id = B.a_id 
group by A.id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/362e6/4)

# android - 在应用程序中计费需要钱但不会提供产品

> ID：13431739
> 
> 赞同：2
> 
> 时间：2012-11-17T14:56:39.780
> 
> 标签：android, in-app-billing

当我调用购买屏幕时，我可以购买应用内产品并且一切正常，但是当用户离开应用并返回查看产品时，它一直要求他们再次购买，

我需要知道如何做到这一点，因此当用户购买应用程序时，商店屏幕不再出现并且他们可以访问产品，该应用程序的设计使得当用户购买应用程序时，他们可以访问新活动内置功能

如果有人可以提供帮助，我将不胜感激

我使用了本教程，这对我开始很有帮助：[[TUT] Simple InApp Billing / Payment By blundell](http://blog.blundell-apps.com/simple-inapp-billing-payment/)

这是我的代码

```
 package com.IrishSign.app;

    import java.util.Locale;

    import com.IrishSign.app.BillingHelper;
    import com.IrishSign.app.R;
    import com.IrishSign.app.BillingService;
    import android.app.Activity;
    import android.app.AlertDialog;
    import android.app.Dialog;
    import android.content.Context;
    import android.content.DialogInterface;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.database.Cursor;
    import android.net.Uri;
    import android.os.Bundle;
    import android.os.Handler;
    import android.util.Log;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.ImageView;
    import android.widget.Toast;

    public class IrishSignAppActivity extends Activity implements OnClickListener {
        private static final String TAG = "BillingService";

        private Context mContext;
        private ImageView purchaseableItem;
        private Button purchaseButton;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Log.i("BillingService", "Starting");
        setContentView(R.layout.main);
        mContext = this;
        Button A = (Button) findViewById(R.id.alphabet);
        Button purchaseableItem = (Button) findViewById(R.id.topics);
        Button Intro = (Button) findViewById(R.id.intro);
        Button G = (Button) findViewById(R.id.about);

        purchaseableItem.setOnClickListener(this);
        startService(new Intent(mContext, BillingService.class));
        BillingHelper.setCompletedHandler(mTransactionHandler);

        A.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent1 = new Intent("com.IrishSign.app.alpha");
                startActivity(intent1);
            }
        });

        Intro.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent intent1 = new Intent("com.IrishSign.app.Intro");
                startActivity(intent1);
            }
        });

        G.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                AlertDialog alertDialog = new AlertDialog.Builder(
                        IrishSignAppActivity.this).setCancelable(false)
                        .create(); // Reads Update
                alertDialog.setTitle("Welcome");
                alertDialog.setMessage("-----");// 

                alertDialog.setButton("Continue",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int arg1) {
                                Intent intent5 = new Intent(
                                        IrishSignAppActivity.this,
                                        IrishSignAppActivity.class);

                            }
                        });

                alertDialog.show(); // <-- Shows dialog on screen.
            }

        });

    }

    public Handler mTransactionHandler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            Log.i(TAG, "Transaction complete");
            Log.i(TAG, "Transaction status: "
                    + BillingHelper.latestPurchase.purchaseState);
            Log.i(TAG, "Item purchased is: "
                    + BillingHelper.latestPurchase.productId);

            if (BillingHelper.latestPurchase.isPurchased()) {
                Intent intent = new Intent("com.IrishSign.app.Topics");
                startActivity(intent);
            }
        };

    };

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.topics:
            if (BillingHelper.isBillingSupported()) {
                BillingHelper.requestPurchase(mContext,
                        "com.blundell.item.passport");
                // android.test.purchased or android.test.canceled or
                // android.test.refunded or com.blundell.item.passport
            } else {
                Log.i(TAG, "Can't purchase on this device");
                purchaseButton.setEnabled(false); // XXX press button before
                                                    // service started will
                                                    // disable when it shouldnt
            }

            break;
        default:
            // nada
            Log.i(TAG, "default. ID: " + v.getId());
            break;
        }

    }

    @Override
    protected void onPause() {
        Log.i(TAG, "onPause())");
        super.onPause();
    }

    @Override
    protected void onDestroy() {
        BillingHelper.stopService();
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:18:33.687

您可以使用 restoreTransactions 检查应用程序何时启动。如果您使用了托管产品或订阅，那么只有您才能获得用户的所有详细信息。

对于非托管产品，谷歌没有维护任何细节。

所以在你的主要活动中调用它

```
mBillingService = new BillingService();
mBillingService.setContext(this);
mBillingService.restoreTransactions(); 
```

一旦你在 ResponseHandler 类中调用它，就会有一种方法 purchaseResponse

```
purchaseResponse(final Context context,
        final PurchaseState purchaseState, final String productId,
        final String orderId, final long purchaseTime,
        final String developerPayload, final String purchaseToken) {
 } 
```

这将返回所有详细信息。

您可以在之后检查 purchaseState

```
 if (purchaseState == PurchaseState.PURCHASED) {

        } else if (purchaseState == PurchaseState.REFUNDED) {

        } else if (purchaseState == PurchaseState.CANCELED) {

        } 
```

# android - 在 ListAdapter 上调用 notifyDataSetChanged

> ID：13431745
> 
> 赞同：4
> 
> 时间：2012-11-17T14:56:52.460
> 
> 标签：android, listadapter

我有一个`ListAdapter`如下图：

```
setListAdapter(new ArrayAdapter<String>(DeleteMenu.this,             
                                  android.R.layout.simple_list_item_1, 
                                  classes)); 
```

我试图`notifyDataSetChanged()`在一个`onListItemClick()`函数中调用它。我尝试了几种不同的方法，并在 StackOverFlow 上查看了类似的问题，但我仍然无法弄清楚。

有人可以帮忙吗？

编辑：我应该更清楚，我没有收到错误，我只是不知道在什么上调用函数`notifyDataSetChanged()`方法。我是否必须将 my 分配`ListAdapter`给一个变量并像这样调用它`var.notifyDataSetChanged()`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T15:01:39.903

您应该调用`notifyDataSetChanged`适配器。

```
Adapter adapter = new Adapter();
ListView list = (ListView) findViewById(R.id.listview);
list.setAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-09T03:20:30.400

您可以通过获取对适配器的引用来调用方法 notifyAdapterChanged()。您可以保留本地参考（如 user1411084s 答案），也可以通过调用来检索它：

```
getListAdapter() 
```

需要注意的重要一点是接口 ListAdapter 不提供方法`notifyDataSetChanged()`，因此您应该将其转换为您之前分配的适配器的类型。

结果将如下所示（能够调用 ListActivity/ListFragment 中的任何位置：

```
((ArrayAdapter) getListAdapter()).notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-05T09:31:11.130

```
((BaseAdapter) listView.getAdapter()).notifyDataSetChanged(); 
```

在此答案中查看更多信息： [https ://stackoverflow.com/a/4198569/3994630](https://stackoverflow.com/a/4198569/3994630)

# c++ - 等待多个线程启动，started() 未捕获

> ID：13431755
> 
> 赞同：0
> 
> 时间：2012-11-17T14:58:09.573
> 
> 标签：c++, multithreading, qt

我正在尝试为 Qt 编写一个类似屏障的同步原语，以确保在某个点启动多个线程。但是，当我没有得到信号（例如，started()）为我工作时，我似乎遇到了这种情况。

我试图缩小代码以编译一个最小（非）工作示例。

```
========
main.cpp
========
#include <QtCore>
#include <QCoreApplication>

#include "qmultithreadwaiter.hpp"
#include <QSignalMapper>
#include <qdebug.h>

#define dlog qDebug()

class Test: public QThread {

public:
   virtual void run( ) {
      QThread::sleep( 500 );
   }
};

int main( int argc, char *argv[ ] ) {
   QCoreApplication a( argc, argv );
   Test t1, t2;
   QMultiThreadWaiter w;
   w.addThread(1, &t1);
   w.addThread(2, &t2);

   t1.start();
   t2.start();

   w.wait4all();
   dlog << "Wait completed";

   return 0;
}

=========================
qmultithreadwaiter.hpp
=========================    
// Qt includes
#include <QSignalMapper>
#include <QMap>
#include <QThread>

class QMultiThreadWaiter: public QThread {
Q_OBJECT

   QMap < int, bool > started;
   QSignalMapper sm;

private slots:
   void threadStarted( int id );
   void someThreadStarted();

signals:
   void allStarted( );

public:
   QMultiThreadWaiter( );

   void addThread( int id, QThread* t );
   void wait4all( );

};
=================
qmultithreadwaiter.cpp
=================
#include "qmultithreadwaiter.hpp"

// Qt includes
#include <QThread>
// Debug includes
#include <qdebug.h>

#define dlog qDebug()

// Project includes

void QMultiThreadWaiter::threadStarted( int id ) {
   dlog << "Thread #" << id << " started!";
   started[ id ] = true;
   QMapIterator < int, bool > mi( started );
   while ( mi.hasNext( ) ) {
      mi.next( );
      if ( !mi.value( ) )
         return;
   }

   dlog << "All threads started!";

   // All threads are started
   emit allStarted( );
}

void QMultiThreadWaiter::addThread( int id, QThread* t ) {
   dlog << "Adding thread " << t << " with id " << id;
   sm.setMapping( t, id );
   connect( t, SIGNAL(started()), &sm, SLOT(map()), Qt::QueuedConnection );
   connect( t, SIGNAL(started()), this, SLOT(someThreadStarted()),
            Qt::QueuedConnection );
}
void QMultiThreadWaiter::wait4all( ) {
   dlog << "Starting this thread";
   start( );
   dlog << "Going to wait";
   wait( );
   dlog << "Wait finished";
}

QMultiThreadWaiter::QMultiThreadWaiter( ) {
   sm.moveToThread( this );
   connect( &sm, SIGNAL(mapped(int)), this, SLOT(threadStarted(int)),
            Qt::QueuedConnection );
   connect( this, SIGNAL(allStarted()), this, SLOT(quit()),
            Qt::QueuedConnection );
   connect( this, SIGNAL(started()), this, SLOT( someThreadStarted()),
            Qt::QueuedConnection );
}

void QMultiThreadWaiter::someThreadStarted( ) {
   dlog << "Some thread started!";
} 
```

输出：

```
Adding thread  QThread(0x28fefc)  with id  1 
Adding thread  QThread(0x28fef4)  with id  2 
Starting this thread 
Going to wait
<stuck> 
```

奇怪的是，竟然`someThreadStarted()`不叫`this`。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:21:01.727

您的所有线程都没有运行事件循环。当你`w.wait4all();`从你`main()`的调用时，主线程在执行到达时阻塞`wait()`。使用`Qt::QueuedConnection`连接信号意味着当目标线程上的控制返回事件循环时将调用您的插槽，这永远不会用于您的测试线程。同时，您的主线程在 处被阻塞`wait()`，并且还缺少事件循环（`QCoreApplication::exec()`从不调用）。主线程也无法处理它接收到的排队信号，这就是`this`线程似乎也没有发出的原因`started()`。

# php - xcache 它是如何工作的？代码覆盖率？木屐？OOM？

> ID：13431759
> 
> 赞同：6
> 
> 时间：2012-11-17T14:58:49.557
> 
> 标签：php, xcache, opcode-cache

我在整个网络上搜索了包括[XCache 网站](http://xcache.lighttpd.net/)在内的文档。

我是 PHP 操作码缓存和 XCache 的新手。我想解释一下 XCache 的工作原理。我知道它存储已编译的 php 代码，因此不需要每次都重新编译。但是 XCache 是如何知道 php 代码何时更新而导致缓存过期的呢？

我如何知道是否需要清除缓存？

XCache 是否编译和缓存服务器上的*所有*php 代码？如果是这样可以配置吗？

什么是木屐？OOM？我在 XCache Admin 页面界面中看到了这两个的大量数字。

在代码覆盖率查看器中...百分比是什么意思？这是已缓存代码的百分比吗？命中是否意味着已从缓存中读取的编译代码行数？行数是指代码的总行数吗？ToDo 列有什么用？为什么有些行以红色突出显示？

如果有帮助，我正在使用 PHP 5.3.2、XCache 1.3.0 和 Ubuntu 10.04。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-20T03:54:22.903

## [缓存](http://xcache.lighttpd.net/wiki/Introduction)：

> 通过将 PHP 脚本的编译状态缓存到 shm (RAM) 中并直接使用 RAM 中的编译版本来消除 PHP 脚本的编译时间，从而优化性能。

根据使用**PHP 5.5.3 和 Xcache 3.1.0**的观察，我可以推断出：

## 缓存器

该模块处理两种缓存**[Opcode](http://php.net/manual/en/internals2.opcodes.php)**和**Variable**。

**Opcode**缓存被设计为一个简单的插件。您无法自定义它决定缓存的方式，只是多少：

*   **xcache.count**设置指的是缓存线程的数量，并与您想要使用的处理器内核数量相关——这个想法是[多线程](http://xcache.lighttpd.net/wiki/SplittedCache)应该是最快的，但不能保证，所以自己试验一下
*   作为指导，有效计数值将是 2^n，例如 1、2、4、8 — 0 将禁用缓存器，其他值将四舍五入为最接近的有效值
*   **xcache.size**设置是指所有缓存线程的聚合内存。因此，每个线程都会获得大致`size/count`的内存量
*   **OOM** aka [Out of Memory](http://en.wikipedia.org/wiki/Out_of_memory)，是指缓存线程达到其最大大小的事件

变量缓存需要在您的应用代码中使用简单的 get/set api。使用**xcache.var_size**和**xcache.var_count**（类似于 Opcode 设置）启用它后，您可以`xcache_set($var1)`在`xcache_get($var1)`脚本中使用它。

### 失效

xcache.stat设置控制是否检查文件在缓存后是否被修改**：**

*   当设置为**打开**时，文件会被检查并重新缓存
*   当设置为**Off**时，检查将保留第一个缓存版本，只要过期时间，这*可以*通过限制磁盘 i/o 来提高性能

在您的开发环境中，最好将其保持**打开**，这样您就可以不断更新和检查您的代码——否则您必须刷新缓存才能看到文件的更新。

### 法拉盛

有一个 Web 管理界面，允许您刷新特定的缓存。网络管理员使用 php api: `xcache_clear_cache(…)`。

由于缓存是基于 RAM 的，只要服务器重新启动，缓存应该被刷新。

### 到期

缓存项根据`xcache.ttl`并`xcache.var_ttl`分别控制缓存项生存的秒数过期（0 是不确定的，默认值）。

## 覆盖者

覆盖模块，又名代码覆盖，有点神秘。根据[FeatureList](http://xcache.lighttpd.net/wiki/FeatureList)，它似乎是一个旨在为临时管理/测试情况启用的诊断工具：

> *   Coverager + 现实生活中的测试用例框架，这包括：[TOSHARE]
>     *   现实生活中的测试用例框架，一个带有真实浏览器的控制脚本。您必须编写测试用例。
>     *   内置 Coverager + 来自网络的查看器，以查看您测试了多少脚本。
> *   testcase+Coverager 只是帮助您确保所有现实生活中的 php web 应用程序在以下情况下正确运行
>     *   启用 XCache 后
>     *   将 php4 升级到 php5 后
>     *   将 php4/5 升级到 php6 后

# css - CSS没有级联

> ID：13431760
> 
> 赞同：0
> 
> 时间：2012-11-17T14:58:51.107
> 
> 标签：css, twitter-bootstrap, ruby-on-rails-3, css-cascade

这是带有行号的 usersettings.css.erb 的一部分

```
11    #userSettingMain .form-horizontal .controls {
12    
13      margin-left: 30px;
14    }
15    
16    #user_birthday_3i{
17    
18      margin-left: 0px;
19    } 
```

但是，当我转到该页面时，它会呈现第一条规则而不是最后一条，当我检查时

![铬检查](../Images/4f4e5e6165320b99bd621cdea7438b5e.png)

html 是一个带有 .form-horizo​​ntal 的表单，它有一个 select_date 标签，用于选择用户生日的日期。rails 生成的 html 给出了日期编号 #user_birthday_3i

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:02:59.590

CSS 级联不是关于哪些规则在先，而是关于[特异性](http://css-tricks.com/specifics-on-css-specificity/)。规则比`#userSettingMain .form-horizontal .controls`规则更**具体**，`#user_birthday_3i`因为它有更多的选择器（在对象树中覆盖更多的“深度”），因此它会覆盖它。

如果您真的希望第二个覆盖第一个，请添加`!important`到`margin`定义的末尾：

```
#user_birthday_3i {
    margin-left: 0px !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:01:49.773

您应该使用`!important`以确保使用您设置的边距。

```
16    #user_birthday_3i{
17    
18      margin-left: 0px !important;
19    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T15:02:45.793

CSS 不会按照声明事物的顺序进行级联，它们会逐步降低特定性。因此，您的`#userSettingMain .form-horizontal .controls`规则比您的更具体`#user_birthday_3i`，这意味着它会选择更具体的规则。

有关如何计算特异性的规则，请参见[http://www.w3.org/TR/CSS2/cascade.html#specificity](http://www.w3.org/TR/CSS2/cascade.html#specificity)。

# objective-c - 使用保留消息的正确时间？

> ID：13431766
> 
> 赞同：0
> 
> 时间：2012-11-17T14:59:09.803
> 
> 标签：objective-c, xcode, memory-management, retain

感谢您查看这篇文章，如果你们能帮助我，那就太好了。我一直在做一些objective-c，并了解了objective-c的内存管理方式，比如确保在我拥有对象时调用release，何时调用autorelease等。我也不想使用ARC或新引入的 GC 因为我喜欢管理自己的内存，我计划稍后进入 iOS 开发，并且我知道管理自己的内存是一个好习惯。但是还有一个小细节我似乎碰到了一堵砖墙。它与向对象发送 -retain 消息有关。我了解到发送 -retain 消息会使引用计数增加 1。但这是否是发送 -retain 的合适时间？：

```
 - (void) setName : (NSString* ) theName 
      {
          // name is an instance variable of type NSString
          [theName retain]; // Must release this
          name = [theName copy]; // Must release this in dealloc
          [theName release]; // decrement the reference count because of retain
      } 
```

我应该在这里调用retain，以便我暂时拥有这个论点，并确保它在我开始使用它之前不会以某种方式被释放吗？

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:06:26.850

不，作为方法参数提供的对象通常会在您的方法返回之前一直存在。您不需要那里的保留消息。您在此处复制字符串以在方法返回后保留它。

这在**“避免导致您正在使用的对象的重新分配”部分中记录在**[此页面](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)上的 Apple 文档中。具体来说：

 **> Cocoa 的所有权策略指定接收到的对象通常应该在调用方法的整个范围内保持有效。还应该可以从当前范围返回接收到的对象，而不必担心它被释放。对象的 getter 方法返回缓存的实例变量或计算值对您的应用程序来说并不重要。重要的是该对象在您需要的时间内保持有效。

顺便说一句，你真的应该考虑使用 ARC。管理自己的记忆并不是一个好习惯。不管一个人在管理自己的内存方面有多好，LLVM 编译器仍然更好。管理自己的记忆将导致难以解决仅由您自己引起的问题。这是你真正不必处理的额外认知负荷，当你最终放弃手动记忆管理时，你会为你甚至不知道的所有精神开销松一口气。**

# c++ - 使用 std::map 和 std::list 的 MRU 构造中的循环依赖

> ID：13431767
> 
> 赞同：1
> 
> 时间：2012-11-17T14:59:14.360
> 
> 标签：c++, circular-dependency

我有一个 map( `std::map<key_t, val_t>`)，我想跟踪按*最近到最近*的顺序使用的键。

这是我尝试过的，但我陷入了循环依赖的声明：

```
typedef ... key_t;

typedef struct {
    ...
    mru_list_t::iterator mru_it;
} val_t;

typedef std::map<key_t, val_t> foo_map_t;

typedef std::list<foo_map_t::iterator> mru_list_t; 
```

更新例程似乎很简单：

```
foo_map_t foo_map;
mru_list_t mru_list;

void use(const key_t& key) {

    // get the entry corresponding to the key
    std::pair<foo_map_t::iterator, bool> r;
    r = foo_map.insert(std::make_pair(key, val_t()));
    foo_map_t::iterator map_it = r.first;

    // the corresponding value
    val_t *val = &(*map_it).second;

    // did it already exist?
    if (!r.second) {
        // remove from the mru list
        mru_list.erase(val->mru_it);
    }

    // push to the front of the list
    mru_list.push_front(map_it);
    val->mru_it = mru_list.begin();
} 
```

**我应该如何处理？（循环依赖）**

我知道我可以转发声明并改用指针：

```
typedef struct _key_t key_t;
typedef struct _val_t val_t;
typedef std::list<std::pair<key_t, val_t> *> mru_list_t; 
```

但这似乎依赖于[一个未记录的功能](https://stackoverflow.com/questions/516007/stdmap-pointer-to-map-key-value-is-this-possible)。

编辑：**或者，我是否需要意识到这无法完成？** （并使用未记录的功能，滚动我自己的链表，或者用其他一些非 stl 容器替换部分？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T16:32:21.253

我建议您看一下[Boost Multi Index](http://www.boost.org/doc/libs/1_52_0/libs/multi_index/doc/index.html)，该索引旨在允许对同一数据块进行多个索引（因此可以匹配多个订单）。

更具体地说，已经有一个[MRU](http://www.boost.org/doc/libs/1_52_0/libs/multi_index/doc/examples.html#example9)示例，尽管您可能不想现在查看它，并自己尝试使用该库。

Boost Multi-Index 的主要思想是，与其拥有指向可能不同步的元素和多个相互关联的结构的指针，不如将每个元素铭刻在一个容器单元中，该容器单元旨在与多个索引挂钩。

例如，在 MRU 的示例中，您可以通过将每个“值”写入 a 来自己实现链表`struct V { value_t value; V* next; }`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:23:56.467

根据您用作键的类型，并且由于您使用的是单值映射，您可以尝试仅将 a 存储`key_t`在列表中，而不是将迭代器存储到`std::map`. 因为地图的每个键只有一个值，所以您仍然可以唯一地访问该元素，并且您摆脱了这个可怕的循环依赖问题。

代码看起来像：

```
typedef std::list<key_t> mru_list_t; 
```

对于列表的类型，在`use`函数结束时，您需要更改：

```
mru_list.push_front(map_it); 
```

至

```
mru_list.push_front(map_it->first); 
```

# bing-api - 如何在我用 PHP 和移动 jquery 编码的网站中使用 bing 翻译器 api？

> ID：13431769
> 
> 赞同：2
> 
> 时间：2012-11-17T14:59:25.530
> 
> 标签：bing-api, microsoft-translator

我想在移动 jquery 框架中的基于 PHP 的网站中使用 bing 翻译器 api，我已经生成了客户端 ID 和客户端密码，但它显示错误 bing App id 中的错误？

# c# - HttpWebRequest 保持连接并重用它

> ID：13431774
> 
> 赞同：0
> 
> 时间：2012-11-17T14:59:44.100
> 
> 标签：c#

所以我的基本想法是创建电子邮件（例如雅虎），但为此我需要打开连接，传递验证码，然后将其返回到相同的连接，这样验证码仍然是相同的。我只需要知道如何做到这一点。我希望你能得到我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:02:32.267

验证码不应要求连接保持活动状态。它应该包括某种以不透明方式识别挑战的令牌 - 只要您在后续请求中将其呈现给服务器，就可以了。

（碰巧，`HttpWebRequest` *确实会*重用连接，但在大多数情况下，这是您不需要了解的实现细节。）

# php - 什么设置导致区分大小写的 require_once 路径？

> ID：13431782
> 
> 赞同：4
> 
> 时间：2012-11-17T15:00:40.220
> 
> 标签：php

在我的本地环境中，我需要一次`publiccontroller.php`，它会加载`publicController.php`

不幸的是，当我在 HostGator 上进行生产时，它会失败，因为它没有松散地要求/包含文件。这是 PHP 还是 Apache 的事情？我需要镜像我的环境，所以我想更改我的本地设置以匹配我的生产服务器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-17T15:08:53.110

文件系统区分大小写不是 PHP 设置，而是特定于操作系统和文件系统。Windows 文件系统往往不区分大小写，而大多数其他操作系统更喜欢区分大小写的文件系统。

由于您不一定能预测您的代码将来会在什么操作系统上运行，因此建议*始终*为区分大小写的文件系统编写代码。

如果您当前正在 Windows（或任何其他具有不区分大小写文件系统的操作系统）上开发，最好的做法是返回您的代码并修复所有文件路径以使用正确的大小写，匹配它们在磁盘上的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:08:42.427

区分大小写是操作系统负责的问题。很多开发php的开发者`Windows`通常都会遇到这个问题。因为 Windows 不区分大小写，开发人员在开发过程中通常不会对地址和文件名有任何问题，但是当他们将 Web 应用程序移动到 Linux 服务器时，就会出现隐藏的问题，因为 Linux 中的地址和文件名不同，并且例如`Myfile.php`和之间有区别`myfile.php`。

因此，作为建议，尝试在 Linux 上开发您的 Web 应用程序。它为您提供了一个更好、更稳定的 PHP 编程环境。

# oracle - 使用 oracle 和休眠的 GeneratedValue 不起作用

> ID：13431785
> 
> 赞同：2
> 
> 时间：2012-11-17T15:01:18.970
> 
> 标签：oracle, spring, hibernate, jpa, spring-roo

我在使用 Oracle XE 数据库的项目中遇到了 GeneratedValue 注释的问题。根本不会生成该值-尝试使用自动生成的字段在表中插入行时，我不断收到错误消息。

```
"Caused by: java.sql.SQLIntegrityConstraintViolationException: ORA-01400: cannot insert NULL into ("SYSTEM"."T_VAPP"."VAPPID")" 
```

完全相同的代码适用于 Derby 或 MySQL，但我需要使其适用于 Oracle，它似乎忽略了我在生成的字段定义中输入的任何内容。我尝试使用 GenerationType.TABLE、GenerationType.SEQUENCE 但同样的错误仍然存​​在。我还使用 Oracle SQL 开发人员验证了没有创建代码中定义的序列。我在这里想念什么？

```
@Entity
@Table(name = "T_vApp")
@RooJavaBean
@RooToString
@RooJpaActiveRecord(identifierColumn = "vAppId", identifierField = "id",  table = "T_vApp")
public class VLabApplication {

  @Id
  @GeneratedValue(strategy=GenerationType.AUTO, generator="my_entity_seq_gen")
  @SequenceGenerator(name="my_entity_seq_gen", sequenceName="MY_ENTITY_SEQ")
  @Column(name = "vAppId" )
  private Long id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:22:46.507

我怀疑它可能会感到困惑，因为您在两个地方告诉它标识符字段是什么。另外，您同时使用 @Table 和 @RooJpaActiveRecord 注释中的参数来告诉它。您可能应该从类的 @RooJpaActiveRecord 注释中删除所有参数。在类“id”成员上保留@Id 和@Column 注释，在类上保留@Table 注释。

或者，您可能需要切换到根据哪个数据库执行正确操作的自定义生成器类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T15:51:32.100

`GenerationType.AUTO`是正确的 --- 这将确保您的代码适用于 oracle 和 mysql（无需更改您的代码）。我像这样使用它，从来没有任何问题。

尝试移除`@Roo`魔法，生成 setter/getter，看看这是否有帮助。顺便说一句，我通常注释吸气剂。我不认为这是问题所在，但是如果其他一切都失败了，您可以随时尝试。

我的猜测是 roo 和 hibernate 之间的一些问题（我从来没有使用过也没有读过关于 roo 的信息，所以这真的是一个*猜测*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T16:43:25.520

你用`GenerationType.AUTO`而不是`GenerationType.SEQUENCE`

# sql - 在同一行中使用不同的值两次获取相同的字段

> ID：13431787
> 
> 赞同：1
> 
> 时间：2012-11-17T15:01:43.450
> 
> 标签：sql, sql-server

考虑这两个表：

表**订单**：

```
 order_id owner_id client_id
    ---------------------------
    123      2        1
    124      1        2 
```

表**用户**

```
 user_id name
    ------------
    1       Bill
    2       John 
```

我试图得到以下结果：

```
 order_id owner_name client_name
    -------------------------------
    123      John       Bill
    124      Bill       John 
```

什么是“最佳”查询？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:03:33.290

```
select o.order_id, 
       ow.name as owner_name, 
       cl.name as client_name
from orders o
  join users ow on o.owner_id = ow.user_id
  join users cl on o.client_id = cl.user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:03:38.230

`JOIN`表`Users`两次：

```
SELECT
  o.order_id,
  ow.name 'owner_name',
  cl.name 'client_name'
FROM Orders o
INNER JOIN users ow ON o.owner_id = ow.user_id
INNER JOIN users cl ON o.client_id = cl.user_id 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/73e83/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T17:22:36.773

使用 CROSS APPLYs -

```
 DECLARE @Orders TABLE(Order_Id INT,Owner_Id INT,Client_Id INT)
    INSERT INTO @Orders
    SELECT 123,2,1 UNION ALL
    SELECT 124,1,2

    SELECT * FROM @Orders;

    DECLARE @Users TABLE(UserId INT,Name VARCHAR(10))
    INSERT INTO @Users
    SELECT 1,'Bill' UNION ALL
    SELECT 2,'John'

    SELECT * FROM @Users;

    SELECT b.Order_Id
          ,a.Name AS Owner_Name
          ,c.Name AS Client_Name 
    FROM @Orders b
        CROSS APPLY (SELECT * FROM @Users) a
        CROSS APPLY (SELECT * FROM @Users) c
    WHERE a.UserId=b.Owner_Id
        AND c.UserId=b.Client_Id
    ORDER BY b.Order_Id 
```

# c - 错误调用函数：函数“快速排序”的参数太少

> ID：13431798
> 
> 赞同：-2
> 
> 时间：2012-11-17T15:03:43.303
> 
> 标签：c

在这个程序中，我想对一个列表进行排序，根据价格，然后我使用快速排序对列表进行排序，在快速排序中，我使用了comp_on_price的比较，然后在接口调用快速排序。但是，当我运行它时，它会出现参数太少的编译错误。与调用方法有什么关系吗？

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

FILE *fp;

typedef struct book{
    double rating;
    double price;
    double relevance;
    int ID;
}B;

B *list;

int read_file(char* infile, int N)
{
    int c;
    if((fp=fopen(infile, "rb")))
    {
        fscanf(fp, "%*s\t%*s\t%*s\t%*s\n");
        c=0;
        while((!feof(fp))&&(c<N))
        {
            fscanf(fp, "%lf\t%lf\t%lf\t%d\n", &list[c].rating, &list[c].price, &list[c].relevance, &list[c].ID);
            c++;
        }
        fclose(fp);
    }
    else
    {
        fprintf(stderr,"%s did not open. Exiting.\n",infile);
        exit(-1);
    }
    return(c);
}

int comp_on_price(const void *a, const void *b)
{
    if ((*(B *)a).price < (*(B *)b).price)
        return 1;
    else if ((*(B *)a).price > (*(B *)b).price)
        return -1;
    else
        return 0;
}

void quicksort(int x[10],int first, int last, int(*comp_on_price)(const void *, const void *))
{
    int pivot,j,temp,i;
    if(first<last)
    {
        pivot=first;
        i=first;
        j=last;

        while(i<j)
        {
            while(x[i]<=x[pivot]&&i<last)
            i++;
            while(x[j]>x[pivot])
            j--;
            if(i<j){
                temp=x[i];
                x[i]=x[j];
                x[j]=temp;
            }
        }/* while*/

        temp=x[pivot];
        x[pivot]=x[j];
        x[j]=temp;
        quicksort(x,first,j-1);
        quicksort(x,j+1,last);
    }
}

void user_interface(int N)
{
    // For Part 1 this function calls the sort function to sort on Price only
    comp_on_price(N);

    // For Part 2 this function
    // (1) asks the user if they would like to sort their search results
    // (2) asks for the most important field (or key), the next most etc
    // (3) calls your sort function
}

void print_results(int N)
{
    int i;
    if((fp=fopen("top20.txt","w")))
    {
        for(i=N-1;i>=N-20;i--)
        {
            printf("%g %g %g %d\n", list[i].rating, list[i].price, list[i].relevance, list[i].ID);
            fprintf(fp, "%g %g %g %d\n", list[i].rating, list[i].price, list[i].relevance, list[i].ID);
        }
        fclose(fp);
    }
    else
    {
        fprintf(stderr,"Trouble opening output file top20.txt\n");
        exit(-1);
    }
}

int main(int argc, char *argv[])
{
    int N;

    if(argc!=3)
    {
        fprintf(stderr, "./exec <input_size> <filename>\n");
        exit(-1);
    }

    N=atoi(argv[1]);

    list = (B *)malloc(N*sizeof(B));

    N=read_file(argv[2], N);

    user_interface(N);

    print_results(N);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:05:41.873

```
quicksort(x,first,j-1); 
```

如果你看一下你的`quicksort`函数声明，你会发现它有 4 个而不是 3 个参数。最后一个参数是一个指向比较函数的指针。

你应该这样称呼它：

```
quicksort(x, first, j-1, comp_on_price); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:11:11.343

你的功能

```
void quicksort(int x[10],int first, int last,int(*comp_on_price)(const void *, const void     *)) 
```

有 4 个输入参数，最后一个是指向函数的指针。你可以删除它，因为你没有使用它这个功能

# php - PHP：另存为带有自定义内容的对话框

> ID：13431799
> 
> 赞同：2
> 
> 时间：2012-11-17T15:03:50.650
> 
> 标签：php, file, content-disposition, save-as

我有以下代码：

```
header('Content-type: text/plain');
header("Content-Disposition: attachment; filename=bookmark.adr");
readfile('bookmark.adr'); 
```

这会生成一个另存为弹出窗口，用户可以在其中保存 bookmark.adr 文件。但我想自定义生成该文件的内容。如何生成内容并让该文件弹出另存为？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:05:23.780

只是不要这样做`readfile()`。回显出您希望该文件包含的任何内容。

您的`Content-Disposition`标题将告诉大多数浏览器提示用户保存文件。

# paypal - 如何获取退货 URL Sandbox PayPal 的商品价格

> ID：13431800
> 
> 赞同：0
> 
> 时间：2012-11-17T15:03:58.790
> 
> 标签：paypal, sandbox

*我得到SandBox PaylPal*的以下返回 URL ：

> [http://mysite.com/success.aspx?tx=9A255742LJ154054X&st=Pending&amt=74.00&cc=USD&cm=&item_number=Product%201](http://mysite.com/success.aspx?tx=9A255742LJ154054X&st=Pending&amt=74.00&cc=USD&cm=&item_number=Product%201)

所以它发送的是总价值`amt=74.00`而不是商品价格`$59.00`。

所以我的问题是如何获得商品价格？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:49:14.090

您需要确保在您使用的按钮代码中包含逐项详细信息。PayPal 提供了[可以在按钮中使用的标准变量](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)列表，您可能希望直接参考[购物车部分](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HH0D0TA)。

# python - python Redis 连接

> ID：13431803
> 
> 赞同：5
> 
> 时间：2012-11-17T15:04:15.717
> 
> 标签：python, redis

我正在使用带有 python 的 Redis 服务器。

我的应用程序是多线程的（我每个进程使用 20 - 32 个线程），而且我还在不同的机器上运行该应用程序。

我注意到有时 Redis cpu 使用率为 100% 并且 Redis 服务器变得无响应/缓慢。

我想为每个应用程序使用 1 个总共 4 个连接的连接池。例如，如果我最多在 20 台机器上运行我的应用程序，则应该有 20*4 = 80 个到 redis 服务器的连接。

```
POOL = redis.ConnectionPool(max_connections=4, host='192.168.1.1', db=1, port=6379)
R_SERVER = redis.Redis(connection_pool=POOL)

class Worker(Thread):

    def __init__(self):
        self.start()

    def run(self):
        while True:
            key = R_SERVER.randomkey()
            if not key: break
            value = R_SERVER.get(key)

    def _do_something(self, value):
        # do something with value
        pass

if __name__ = '__main__':
    num_threads = 20
    workers = [Worker() for _ in range(num_threads)]
    for w in workers:
       w.join() 
```

当执行命令时，上面的代码应该运行从最大大小为 4 的连接池中获取连接的 20 个线程。

什么时候释放连接？

根据此代码（[https://github.com/andymccurdy/redis-py/blob/master/redis/client.py](https://github.com/andymccurdy/redis-py/blob/master/redis/client.py)）：

```
 #### COMMAND EXECUTION AND PROTOCOL PARSING ####
def execute_command(self, *args, **options):
    "Execute a command and return a parsed response"
    pool = self.connection_pool
    command_name = args[0]
    connection = pool.get_connection(command_name, **options)
    try:
        connection.send_command(*args)
        return self.parse_response(connection, command_name, **options)
    except ConnectionError:
        connection.disconnect()
        connection.send_command(*args)
        return self.parse_response(connection, command_name, **options)
    finally:
        pool.release(connection) 
```

每条命令执行完毕后，连接被释放并回到池中

有人可以验证我是否正确理解了这个想法并且上面的示例代码将按描述工作吗？

因为当我看到redis连接时，总是有4个以上。

编辑：我刚刚在代码中注意到该函数在 finally 之前有一个 return 语句。那么finally的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T15:56:42.957

正如 Matthew Scragg 提到的，finally 子句在测试结束时执行。在这种特殊情况下，它用于在完成连接后将连接释放回池，而不是让它保持打开状态。

至于无响应，请查看您的服务器在做什么。您的 Redis 实例的内存限制是多少？您多久保存一次磁盘？您是否在基于 Xen 的 VM（例如 AWS 实例）上运行？您是否正在运行复制，如果有，有多少从属服务器，它们是否处于良好状态，或者它们是否经常要求完全重新同步数据？您的任何命令是否“保存”？

您可以使用命令行界面回答其中一些问题。例如 `redis-cli info persistence`会告诉你有关保存到磁盘的过程的信息，`redis-cli info memory`会告诉你有关你的内存消耗的信息。

在获取持久性信息时，您要专门查看`rdb_last_bgsave_status`和`rdb_last_bgsave_time_sec`。这些将告诉您上次保存是否成功以及花费了多长时间。花费的时间越长，您遇到资源问题的可能性就越大，并且您遇到可能表现为无响应的减速的可能性就越大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T03:02:58.457

尽管在它之前有一个 return 语句，但最终块将始终运行。你可以看看 redis-py/connection.py ， pool.release(connection) 只把连接放到可用连接池中，所以连接仍然存在。关于 redis 服务器 cpu 的使用，您的应用程序将始终发送请求并且没有中断或睡眠，所以它只是使用越来越多的 cpu，而不是内存。并且 cpu 使用与打开的文件数无关。

# gwt - 如何在 DockLayoutPanel 中使南面板全宽？

> ID：13431804
> 
> 赞同：0
> 
> 时间：2012-11-17T15:04:23.533
> 
> 标签：gwt

我正在使用 GWT DockLayoutPanel，如本文所述：

[http://www.giantflyingsaucer.com/blog/?p=2302](http://www.giantflyingsaucer.com/blog/?p=2302)

在那里，您可以看到北部组件填充了页面宽度，但南部组件位于西部和南部之间。

有趣的是，GWT 文档示例显示不同：

[https://developers.google.com/web-toolkit/doc/latest/images/DockLayoutPanel.png](https://developers.google.com/web-toolkit/doc/latest/images/DockLayoutPanel.png)

（来自[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)）

是否可以让南方组件表现得像北方组件一样，填充页面宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:28:18.337

我相信这完全取决于您添加面板的顺序：如果您在西部和东部之前添加南面板，它将占据整个宽度。如果在 west 之后，east 之前添加它，它会占用西和东之间的所有宽度，但东面板会显示在南面板之上；等等

# objective-c - NSTextField 使用 KeyEquivalent 连接到 NSMenuItem

> ID：13431805
> 
> 赞同：0
> 
> 时间：2012-11-17T15:04:25.393
> 
> 标签：objective-c, xcode, macos, cocoa, xib

将 menuItem 连接到文本字段/搜索字段的最佳做法是什么。我想为用户提供使用快捷键命令 F 来聚焦搜索字段的能力。

![带有标准查找子菜单的自定义菜单](../Images/a7fce1f84e5c8d0def29e0ad67d8fc58.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:23:26.073

我相信现在执行此操作的方法（因为`becomeFirstResponder`不推荐）是将菜单项操作链接到自定义方法，该方法告诉窗口使您的搜索字段成为第一响应者。

# ios - animateWithDuration 和 touchesBegan 不能成对工作

> ID：13431806
> 
> 赞同：2
> 
> 时间：2012-11-17T15:04:31.163
> 
> 标签：ios

当我的对象在我的屏幕上移动时，我需要处理它的触摸。当 touchesBegan 调用时，我需要隐藏我的对象。

这是我在 UIViewController 中的代码：

```
- (void)win {
    for (NSInteger i = 1; i <= 6; i++) {
        UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"rocket_%d.png", i]]];
        imageView.tag = 1000;
        CGSize size = imageView.image.size;
        [imageView setFrame:CGRectMake(200 + (i * 60), 500, size.width, size.height)];
        [self.view addSubview:imageView];
        [rockets addObject:imageView];
        [imageView setUserInteractionEnabled:YES];
    }
    [self startRockets];
}

- (void)startRockets {

    CGFloat timeInterval = 1.0;
    for (UIImageView *imageView in rockets)  {
        [UIView animateWithDuration:5.0 delay:timeInterval options:UIViewAnimationOptionAllowUserInteraction animations:^{
            [imageView setFrame:CGRectMake(imageView.frame.origin.x, 0, imageView.frame.size.width, imageView.frame.size.height)];
        } completion:nil];
        timeInterval += 1.0;
    }

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];
    NSArray *views = [self.view subviews];
    for (UIView *v in views) {
        if (v.tag == 1000) {
            if (CGRectContainsPoint(v.frame, touchLocation) == YES) {
                [v setHidden:YES];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T15:37:22.497

也许您缺少 AllowAnimatedContent。尝试改变你的

`UIViewAnimationOptionAllowUserInteraction`

到

`UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionAllowAnimatedContent`

* * *

...另一种方法可能是使用`UITapGestureRecognizer`：

```
- (void)createViews {
    rockets = [[NSMutableArray alloc] init];
    for (NSInteger i = 1; i <= 6; i++) {
        UIView *view = [UIView new];
        view.backgroundColor = [UIColor redColor];
        view.frame = CGRectMake((i * 60), 100, 50, 50);

        UITapGestureRecognizer * tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(rocketTouched:)];
        [view addGestureRecognizer:tap];

        [self.view addSubview:view];
        [rockets addObject:view];
    }
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(moveViews) userInfo:nil repeats:YES];
}
- (void)moveViews {
    for (UIView * view in rockets)  {
        [UIView animateWithDuration:5.0 delay:0.0 options:UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionAllowAnimatedContent animations:^{
            view.frame = CGRectMake(view.frame.origin.x -10, 0, view.frame.size.width, view.frame.size.height);
        } completion:nil];
    }
}
- (void)rocketTouched:(UITapGestureRecognizer*)tap {
    tap.view.hidden = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:37:44.377

如果您需要检测与对象的交集，您还需要检查此项。

我已经编辑了 touchesBegan 方法并且它有效。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];
    for (UIImageView *imageView in rockets) {
        CALayer *bbl1ObjPresentationLayer = (CALayer*)[imageView.layer presentationLayer];
        if(CGRectIntersectsRect(bbl1ObjPresentationLayer.frame, CGRectMake(touchLocation.x, touchLocation.y, 1, 1))) {
            NSLog(@"intersect");
                //They are intersecting
            }
}
} 
```

如果您使用 UIImageView 对象的 CALayer 执行此操作，则此操作正确。检查此答案[链接](https://stackoverflow.com/questions/11642947/how-to-find-whether-two-objects-intersect-each-other)

# java - 无法更新主键所在的表

> ID：13431807
> 
> 赞同：2
> 
> 时间：2012-11-17T15:04:37.343
> 
> 标签：java, sql, jdbc, derby

请看下面的代码

```
public String setEmailAccount(String account,String userName, String password) 
    {
        createConnection();
        String result = "";

        try
        {
            //This part will set the new account
            con.setAutoCommit(false);
            PreparedStatement ps = con.prepareStatement("insert into Emails values (?,?,?)");
            ps.setString(1,account);
            ps.setString(2, userName);
            ps.setString(3, password);

            int resultInt = ps.executeUpdate();
            con.commit();
            if(resultInt>0)
            {
                result = "Account Created Successfully";
            }
            else
            {
                result = "Account creation falied. Error unknown";
            }
        }
        catch(SQLException sql)
        {
            result = sql.getMessage();
            sql.printStackTrace();

            //If the account exists, then this part will update the current account details
            if(sql.getMessage().contains("Violation of PRIMARY KEY") || sql.getMessage().contains("SQLIntegrityConstraintViolationException"))
            {
                try
                {
                    con.setAutoCommit(false);
                    PreparedStatement ps = con.prepareStatement("update Emails set userName=?,passwords=? where accountType=?");
                    ps.setString(1,userName);
                    ps.setString(2, password);
                    ps.setString(3, account);

                    int resultInt = ps.executeUpdate();
                    con.commit();

                    if(resultInt>0)
                    {
                        result = "Your "+account+" details has been updated succesfully";
                    }
                    else
                    {
                        result = "Error updating your "+account+" details. Rollback has not happened";
                    }
                }
                catch(SQLException updateSqlException)
                {
                    updateSqlException.printStackTrace();
                    result = "Error updating your " +account+ " details. Everything rollbacked succesfully";

                    try
                    {
                        con.rollback();
                    }
                    catch(Exception updateRollbakException)
                    {
                        updateRollbakException.printStackTrace();
                        result = "Error in updating your " + account + " details. Rollbak failed.";
                    }
                }
                catch(Exception updateE)
                {
                    result = "Error Occured. But your "+account+" data has been updated successfully";
                    updateE.printStackTrace();                    
                }
            }
            else
            {
                try
                {
                    con.rollback();
                }
                catch(Exception ee)
                 {
                        result = "Data insertion failed. RollBack failed. Error is below\n"+ee.getMessage();
                 }
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            closeConnection();
        }

        return result;
    } 
```

这是一个电子邮件配置程序。此方法用于配置电子邮件帐户。用户输入电子邮件帐户类型 (yahoo.gmail)、密码和用户名。这仅允许将一个电子邮件帐户配置为一种类型的电子邮件帐户（例如：只能存在一个“雅虎”电子邮件帐户，只能存在一个“gmail”帐户）

在这里，如果数据已经存在（这意味着，已经有一个特定帐户类型的帐户），程序将更新它而不是直接插入数据。如果没有数据，程序将输入数据。

该程序适用于 MSSQL Server。当 SQL 服务器抛出`Violation of PRIMARY KEY`异常时，程序开始更新当前数据。

但是，这不适用于德比。我正在使用 Derby 嵌入式版本。我a，当已经有数据并且没有更新任何数据时，出现以下错误。

```
java.sql.SQLIntegrityConstraintViolationException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'PK_USER' defined on 'EMAILS'.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate(Unknown Source)
    at email.EmailDBHandler.setEmailAccount(EmailDBHandler.java:59)
    at email.ConfigureEmail$OKButton.actionPerformed(ConfigureEmail.java:62)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.sql.SQLException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'PK_USER' defined on 'EMAILS'.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    ... 47 more
Caused by: ERROR 23505: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'PK_USER' defined on 'EMAILS'.
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.sql.execute.IndexChanger.insertAndCheckDups(Unknown Source)
    at org.apache.derby.impl.sql.execute.IndexChanger.doInsert(Unknown Source)
    at org.apache.derby.impl.sql.execute.IndexChanger.insert(Unknown Source)
    at org.apache.derby.impl.sql.execute.IndexSetChanger.insert(Unknown Source)
    at org.apache.derby.impl.sql.execute.RowChangerImpl.insertRow(Unknown Source)
    at org.apache.derby.impl.sql.execute.InsertResultSet.normalInsertCore(Unknown Source)
    at org.apache.derby.impl.sql.execute.InsertResultSet.open(Unknown Source)
    at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source)
    at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
    ... 41 more 
```

以下是SQL表

```
create table Emails
(
accountType varchar(10) constraint pk_user primary key,
userName varchar(50) ,
passwords varchar(50)
) 
```

当数据已经存在时，请帮助我更新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:16:36.250

您正在使用此语法搜索字符串

```
if(sql.getMessage().contains("Violation of PRIMARY KEY") || sql.getMessage().contains("SQLIntegrityConstraintViolationException")) 
```

而德比返回这个字符串

```
The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'PK_USER' defined on 'EMAILS'. 
```

这就是为什么你的 if 语句不执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:08:27.213

> 该程序适用于 MSSQL Server。当 SQL 服务器抛出 Violation of PRIMARY KEY 异常时，程序开始更新当前数据。

是的 - 您基本上是针对特定于提供商的消息进行编码。这真是个坏主意。

我个人建议反过来做：先执行*更新*，看看有多少行受到影响。*如果为0，则*说明没有找到ID，可以尝试插入。对我来说，这比依靠特定的错误消息来检测各种故障要强大得多。

（根据数据库的事务模型，在更新尝试和插入尝试之间，您可能仍然存在（由另一个系统）插入行的竞争条件。您应该考虑如何处理它，以及可能性有多大它是。

# youtube - YouTube API 的最近调用错误太多

> ID：13431811
> 
> 赞同：1
> 
> 时间：2012-11-17T15:04:44.733
> 
> 标签：youtube

您的管 API 配额存在问题，在几个请求中我收到错误 >yt:quota `too_many_recent_calls`。我确实阅读了有关此问题的其他帖子，但没有找到解决方案。该站点设置了一个每周一次的 cron 作业。我已插入开发人员密钥，该站点仅处于测试模式，我相信该站点没有对您的管视频进行过多调用。不知道该做什么，因为该网站的视频部分基本上是无用的。如果有人会提供帮助将不胜感激。谢谢

# jquery - 在 Sinatra 中将信息从 JavaScript 传递到 RB

> ID：13431815
> 
> 赞同：2
> 
> 时间：2012-11-17T15:05:22.453
> 
> 标签：jquery, ruby, sinatra

我正在从元素中读取一些数据，并希望将收到的信息发送到我的 .rb 文件，我需要将其作为 JSON 发送吗？

```
<li id="stream1">
            <label>Width: </label><input type="text" name="stream_width" size="5" class="width"><span>px</span>
            <label>Height: </label><input type="text" name="stream_height" size="5" class="height"><span>px</span>
            <label>Bitrate: </label><input type="text" name="stream_bitrate" size="5" class="bitrate"><span>kbps</span>
            </br>
        </li>
<li id="stream2">
            <label>Width: </label><input type="text" name="stream_width" size="5" class="width"><span>px</span>
            <label>Height: </label><input type="text" name="stream_height" size="5" class="height"><span>px</span>
            <label>Bitrate: </label><input type="text" name="stream_bitrate" size="5" class="bitrate"><span>kbps</span>
            </br>
        </li>

$('#checkInfo').click(function(){
    widths = $('.width');
    heights = $('.height');
    bitrates = $('.bitrate');

    $.each(widths, function(){
        console.log($(this).val());
    });

    $.each(heights, function(){
        console.log($(this).val());
    });

    $.each(bitrates, function(){
        console.log($(this).val());
    }); 
```

在这里，我想存储 console.log 中显示的信息，并在我的 .rb 文件中使用它

# jquery - 如何将 Google 地图链接从 Ajax 请求加载到 div

> ID：13431817
> 
> 赞同：0
> 
> 时间：2012-11-17T15:05:25.853
> 
> 标签：jquery, ajax

我正在尝试通过ajax请求将谷歌地图加载到div中，因此我尝试了下面的代码。

```
<script type="text/javascript">
$(document).ready(function() {
  $('a.lnk').click(function() {
    var url = $(this).attr('href');
    $('#content').load(url);
    return false;
  });
});
</script>
</head>
<body>
<h1>Web page test.html</h1>
<a href="https://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=6.9906664862927625,+80.74805527925491&aq=&sll=37.0625,-95.677068&sspn=36.094886,86.572266&vpsrc=0&ie=UTF8&t=m&z=14&ll=6.990666,80.748055&output=embed" title="Get extern" class="lnk">Get extern</a>
<div id="content">load here</div> 
```

如果我尝试加载外部 html 文件，则此代码不会加载地图，而是 google map url，然后它可以工作。任何人都可以告诉如何将 ajax 请求中的谷歌地图加载到 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:22:01.167

[由于相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您的浏览器不会让您从 div 中的不同服务器加载任何内容

您可以做的是在 中加载地图`iframe`，这是您的 HTML 的一部分，您可以在其中安全地加载外部站点。

这将是 HTML：

```
<h1>Web page test.html</h1>
<a href="https://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=6.9906664862927625,+80.74805527925491&aq=&sll=37.0625,-95.677068&sspn=36.094886,86.572266&vpsrc=0&ie=UTF8&t=m&z=14&ll=6.990666,80.748055&output=embed" title="Get extern" class="lnk">Get extern</a>
<iframe id="content">load here</iframe>​ 
```

这是JavaScript：

```
$(document).ready(function() {
    $('a.lnk').click(function(e) {
        e.preventDefault();
        var url = $(this).attr('href');
        $('#content').attr('src', url);
        return false;
    });
});​ 
```

[在此处](http://jsfiddle.net/GZBbk/)查看一个工作示例

# php - 不匹配 md5 密码

> ID：13431828
> 
> 赞同：0
> 
> 时间：2012-11-17T15:07:26.970
> 
> 标签：php, mysql

我正在使用 jQuery datagrid 插件来制作一个简单的工具来编辑站点管理区域中的用户表。用户注册时，我将密码存储为 md5() 。每当我尝试更新表时，它都会重新散列密码，从而使其无法使用。我尝试了几种方法来验证密码是否与数据库中的密码相同，但它们似乎都不起作用。

这是我的更新代码：

PHP

```
<?php
require_once("../class/TimeClock.class.php");

$tc = new TimeClock();
$id = $_POST['id'];
$username = $_POST['username'];
$password = $_POST['password'];
$email = $_POST['email'];
$active = $_POST['active'];
$role = $_POST['role'];
$emp_id = $_POST['emp_id'];

if($tc->validatePass($id, $password)) {
try {
    $tc->connect();
    $query = $tc->dbh->prepare("UPDATE us_users SET username=:username,email=:email,active=:active,role=:role,emp_id=:emp_id WHERE id=:id");
    $query->execute(array(':username' => $username, ':email' => $email, ':active' => $active, ':role' => $role, ':emp_id' => $emp_id, ':id' => $id));
    $tc->close();
} catch (PDOException $e) {
    throw new Exception('Something bad happened' . $e->getMessage());
}
} else {
try {
    $password = md5($password);
    $tc->connect();
    $query = $tc->dbh->prepare("UPDATE us_users SET username=:username,password=:password,email=:email,active=:active,role=:role,emp_id=:emp_id WHERE id=:id");
    $query->execute(array(':username' => $username, ':password' => $password, ':email' => $email, ':active' => $active, ':role' => $role, ':emp_id' => $emp_id, ':id' => $id));
    $tc->close();
} catch (PDOException $e) {
    throw new Exception('Something bad happened' . $e->getMessage());
}
}

echo json_encode(array(
'id' => $id,
'username' => $username,
'password' => $password,
'email' => $email,
'active' => $active,
'role' => $role,
'emp_id' => $emp_id
));
?> 
```

我的 validatePasss() 函数：

PHP

```
function validatePass($id, $pass) {
    try {
    $this->connect();
    $result = $this->dbh->prepare("SELECT username, password FROM us_users WHERE id=:id");
    $result->execute(array(':id' => $id));
    $userObj = $result->fetch(PDO::FETCH_ASSOC);
    } catch( PDOException $e) {
        throw new Exception('Something bad happened' . $e->getMessage());
        die();
    }
    if($pass == $userObj['password']) {
        return true;
    } else {
        return false;
    }
    $this->close();
} 
```

我知道 mysql_ 代码已经过时了，但是，当我尝试使用 PDO 时它会抛出错误，我认为它与组件或其他东西有关。

感谢您提供的任何帮助。

**编辑：**将函数更改为纯 PDO，这是数据网格的图像，因此您可以看到密码存储为哈希，除非更改，否则应将其传递给更新脚本，以匹配数据库中的内容.

[http://www.bolinconstruction.com/timeclock/datagrid.png](http://www.bolinconstruction.com/timeclock/datagrid.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:44:21.523

在您的`validatePass()`函数中，您必须在比较之前对密码进行哈希处理

```
if(md5($pass) == $userObj['password']) {
    return true;
} else {
    return false;
} 
```

您可以在查询中执行相同的操作

```
select id
from from us_users
where username = :username and password = :password 
```

进而

```
$result->execute(array(':username' => $username, ':password' => md5($password))); 
```

并测试行数 > 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:50:22.163

想了想，答案其实很简单。在最初的代码中，我在数据库中轮询与表单一起提交的用户名的密码。如果用户名被更改，那么查询当然会失败，从而更改密码。通过将其设置为根据 ID 轮询数据库，问题似乎已经得到纠正。谢谢大家的帮助，如果没有你们，我永远不会想到这一点。

# actionscript - AS 3 添加多个 .swf 文件

> ID：13431829
> 
> 赞同：1
> 
> 时间：2012-11-17T15:07:49.503
> 
> 标签：actionscript

我是 Action Script 的初学者，我需要添加多个 .swf 文件和一个进度条，以便在显示每个文件时显示进度。

请帮助我在 ActionScript 3.0、Flash Professional 5.5 中进行编码。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:47:25.923

这些链接应该可以帮助您：

[链接 1- 多个 swf](http://www.beautifycode.com/the-finer-art-of-loading-2-handling-multiple-swfs)

[链接2 - 所以](https://stackoverflow.com/questions/9642154/loading-another-swf-file-using-as3)

[Link3 - 进度条](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/ProgressBar.html)

# windows-phone-8 - css中的ie10系统手机颜色

> ID：13431830
> 
> 赞同：1
> 
> 时间：2012-11-17T15:08:11.547
> 
> 标签：windows-phone-8

根据 CSS 规范[http://www.w3.org/TR/CSS2/ui.html#system-colors](http://www.w3.org/TR/CSS2/ui.html#system-colors)有一些可用的预定义系统颜色。

看起来：

*   背景 -> 映射到 PhoneBackgroundBrush
*   突出显示 -> 映射到 PhoneAccentBrush

我正在寻找相当于 PhoneContrastBackgroundBrush 的 css 值。（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:13:56.827

不幸的是，目前不支持此功能。为了确认这一点，我专门联系了 MS 人员在 BUILD 会议上介绍了此功能 - [https://channel9.msdn.com/Events/Build/2012/2-015](https://channel9.msdn.com/Events/Build/2012/2-015)

# sql - 在一个语句中为一列选择两组不同的行？

> ID：13431833
> 
> 赞同：2
> 
> 时间：2012-11-17T15:08:28.967
> 
> 标签：sql, postgresql, union-all

我有一个有 2 列的表：
`name`,`percentage`

我在这个表中有 100 行，并且想要进行查询以选择百分比值*最小的 5 行和百分比值**最大*的 5 行。

通常我会这样做`limit`，`offset`但它只会选择我寻求的结果组之一。我想知道是否有一种方法可以同时选择两者。

找了一段时间的解决方案，也想到了FETCH，但是我并没有真正成功使用对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:20:09.393

### [`UNION ALL`](https://www.postgresql.org/docs/current/static/sql-select.html#SQL-UNION)

```
(
SELECT name, percentage
FROM   tbl
ORDER  BY percentage
LIMIT  5
)
UNION ALL
(
SELECT name, percentage
FROM   tbl
ORDER  BY percentage DESC
LIMIT  5
); 
```

您需要**括号**，以应用`ORDER BY`和`LIMIT`嵌套查询`SELECT`语句`UNION`。我在这里引用[手册](https://www.postgresql.org/docs/current/static/sql-select.html#SQL-UNION)：

> `ORDER BY`并且`LIMIT`可以附加到子表达式（如果它被括在括号中）。如果没有括号，这些子句将被应用到 的结果，而`UNION`不是它的右手输入表达式。

`UNION`（没有`ALL`）将删除结果中的重复项。如果您不期望受骗，那将是无用的努力。

### 子查询[`row_number()`](https://www.postgresql.org/docs/current/static/functions-window.html)

```
SELECT name, percentage
FROM  (
   SELECT *
        , row_number() OVER (ORDER BY percentage) AS rn_min
        , row_number() OVER (ORDER BY percentage DESC) AS rn_max
   FROM   tbl
   ) x
WHERE rn_min < 6
OR    rn_max < 6; 
```

这会像这样折叠重复项`UNION`。性能将相似，可能比第一个慢一点。

无论哪种方式，按附加列排序，以受控方式打破平局。照原样，您可以从共享相同`percentage`.

# java - 内存缓存心跳属性不起作用

> ID：13431834
> 
> 赞同：1
> 
> 时间：2012-11-17T15:08:31.933
> 
> 标签：java, linux, memcached

我正在使用带有repcached 复制的xemcached 1.3.8。

在我的代码中，我设置`setEnableHeartBeat(false);`为 false 并且我正在通过脚本传递环境变量`-Dxmemcached.heartbeat.max.fail.times=2`

但是，如果集群中的一台服务器出现故障，它仍会不断尝试连接到该服务器。

请让我知道我怎样才能让这个尝试重新连接 2 次。

如您所见，我尝试从代码以及从环境变量进行设置，但仍然不断尝试 ping 关闭服务器

此外，我还以这种方式添加了环境变量

System.setProperty("xmemcached.heartbeat.max.fail.times", "2");

但我不知道为什么它一直在尝试关闭服务器。

# c# - GridView 上的分页

> ID：13431835
> 
> 赞同：1
> 
> 时间：2012-11-17T15:08:40.623
> 
> 标签：c#, asp.net

我目前被困在如何在另一个页面中显示我的网格数据。

基本上我有一个启用分页的 GridView 名称“gdvRiders”。问题是当我单击第 2 页时，我得到一个没有数据的空白页面。有人能帮我吗？我开始学习c#

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        DataBase db = new DataBase(true);
        string strSQL;
        DataTable dt;

        if (!IsPostBack)
        {
            strSQL = "SELECT r.surname, r.firstname, cn.country, r.age, f.flagurl " +
                     "FROM (Riders r INNER JOIN par_CountryNation cn ON r.countryid = cn.countryid) INNER JOIN par_Flags f ON cn.flagid = f.flagid ";

            dt = db.getDataTableAc(strSQL, "list_Riders");

            gdvRiders.DataSource = dt;
            gdvRiders.DataBind();

        }

    }

    protected void gdvRiders_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
            gdvRiders.PageIndex = e.NewPageIndex;
            gdvRiders.DataBind();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:10:34.843

您**需要将数据分配给**网格的数据源。`You should put the code to bind the gridview in separate function and call it from page_load and PageIndexChanging.`

```
protected void gdvRiders_PageIndexChanging(object sender, GridViewPageEventArgs e)
{             
       strSQL = "SELECT r.surname, r.firstname, cn.country, r.age, f.flagurl " +
                 "FROM (Riders r INNER JOIN par_CountryNation cn ON r.countryid = cn.countryid) INNER JOIN par_Flags f ON cn.flagid = f.flagid ";
        dt = db.getDataTableAc(strSQL, "list_Riders");
        gdvRiders.PageIndex = e.NewPageIndex;
        gdvRiders.DataSource = dt; 
        gdvRiders.DataBind();

} 
```

# unit-testing - cakephp 夹具导入 100 条记录

> ID：13431844
> 
> 赞同：1
> 
> 时间：2012-11-17T15:09:52.667
> 
> 标签：unit-testing, cakephp

在我的 cakephp 2.2.3 应用程序中，我有一个复杂的模型，它有 3 个 belongsTo 和 1 个 hasMany 关系。我想通过单元测试用例对其进行测试。

有没有办法从我现有的数据库中导入 100 条记录以及所有相关记录？或者如何测试这样的案例？

在现有数据库中大约有 50,000 条记录，我不想全部导入它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T08:13:02.143

正如您提到的那样，使用`cake bake fixture`是解决此问题的方法，因为第三个问题允许您从现有数据库中导入项目。

![在此处输入图像描述](../Images/67498abbbe489a4a91a37f3106655a13.png)

# haskell - 如何将此python翻译成Haskell？

> ID：13431845
> 
> 赞同：14
> 
> 时间：2012-11-17T15:10:05.900
> 
> 标签：haskell

我正在学习 Haskell，作为练习，我正在尝试将代码后面的 read_from 函数转换为 Haskell。取自 Peter Norvig 的 Scheme 解释器。有没有一种简单的方法来做到这一点？

```
def read(s):
    "Read a Scheme expression from a string."
    return read_from(tokenize(s))

parse = read

def tokenize(s):
    "Convert a string into a list of tokens."
    return s.replace('(',' ( ').replace(')',' ) ').split()

def read_from(tokens):
    "Read an expression from a sequence of tokens."
    if len(tokens) == 0:
        raise SyntaxError('unexpected EOF while reading')
    token = tokens.pop(0)
    if '(' == token:
        L = []
        while tokens[0] != ')':
            L.append(read_from(tokens))
        tokens.pop(0) # pop off ')'
        return L
    elif ')' == token:
        raise SyntaxError('unexpected )')
    else:
        return atom(token)

def atom(token):
    "Numbers become numbers; every other token is a symbol."
    try: return int(token)
    except ValueError:
        try: return float(token)
        except ValueError:
            return Symbol(token) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-17T17:27:14.330

有一种直接的方法可以将 Python “音译”为 Haskell。这可以通过巧妙地使用 monad 转换器来完成，这听起来很吓人，但事实并非如此。您会看到，由于纯粹性，在 Haskell 中，当您想要使用可变状态（例如，`append`and`pop`操作正在执行突变）或异常等效果时，您必须使其更加明确。让我们从顶部开始。

```
parse :: String -> SchemeExpr
parse s = readFrom (tokenize s) 
```

Python 文档字符串说“从字符串中读取 Scheme 表达式”，所以我只是冒昧地将其编码为类型签名 ( `String -> SchemeExpr`)。该文档字符串已过时，因为该类型传达了相同的信息。现在......什么*是*a `SchemeExpr`？根据您的代码，方案表达式可以是 int、float、符号或方案表达式列表。让我们创建一个表示这些选项的数据类型。

```
data SchemeExpr
  = SInt    Int
  | SFloat  Float
  | SSymbol String
  | SList   [SchemeExpr]
  deriving (Eq, Show) 
```

为了告诉 Haskell`Int`我们正在处理的应该被视为一个`SchemeExpr`，我们需要用 标记它`SInt`。其他可能性也是如此。让我们继续`tokenize`。

```
tokenize :: String -> [Token] 
```

同样，文档字符串变成了类型签名：将 a`String`变成`Token`s 的列表。那么，什么是令牌？如果您查看代码，您会注意到左右括号字符显然是特殊标记，表示特定行为。其他任何东西都是……​​不特别的。虽然我们*可以*创建一种数据类型来更清楚地将括号与其他标记区分开来，但让我们只使用字符串，以更接近原始 Python 代码。

```
type Token = String 
```

现在让我们尝试写作`tokenize`。首先，让我们快速编写一个小操作符，让函数链看起来更像 Python。在 Haskell 中，您可以定义自己的运算符。

```
(|>) :: a -> (a -> b) -> b
x |> f = f x

tokenize s = s |> replace "(" " ( "
               |> replace ")" " ) "
               |> words 
```

`words`是 Haskell 的版本`split`。`replace`然而，Haskell 没有我所知道的预煮版本。这是一个可以解决问题的方法：

```
-- add imports to top of file
import Data.List.Split (splitOn)
import Data.List (intercalate)

replace :: String -> String -> String -> String
replace old new s = s |> splitOn old
                      |> intercalate new 
```

如果您阅读 and 的文档`splitOn`，`intercalate`这个简单的算法应该很有意义。Haskellers 通常将其写为`replace old new = intercalate new . splitOn old`，但我`|>`在这里使用它是为了让 Python 观众更容易理解。

请注意，它`replace`需要三个参数，但上面我只用两个参数调用它。在 Haskell 中，您可以部分应用任何函数，这非常简洁。`|>`工作起来有点像 unix 管道，如果你不知道的话，除了类型安全性更高。

* * *

还在我这儿？让我们跳到`atom`。嵌套逻辑有点难看，所以让我们尝试一种稍微不同的方法来清理它。我们将使用该`Either`类型进行更好的演示。

```
atom :: Token -> SchemeExpr
atom s = Left s |> tryReadInto SInt
                |> tryReadInto SFloat
                |> orElse (SSymbol s) 
```

Haskell 没有自动强制转换函数`int`and `float`，因此我们将构建`tryReadInto`. 它是这样工作的：我们将`Either`围绕值进行线程化。`Either`值是 a或`Left`a `Right`。通常，`Left`用于表示错误或失败，同时`Right`表示成功或完成。在 Haskell 中，为了模拟 Python 式的函数调用链，您只需将“self”参数放在最后一个参数。

```
tryReadInto :: Read a => (a -> b) -> Either String b -> Either String b
tryReadInto f (Right x) = Right x
tryReadInto f (Left s) = case readMay s of
  Just x -> Right (f x)
  Nothing -> Left s

orElse :: a -> Either err a -> a
orElse a (Left _) = a
orElse _ (Right a) = a 
```

`tryReadInto`依靠类型推断来确定它试图将字符串解析为哪种类型。如果解析失败，它只是在该`Left`位置复制相同的字符串。如果成功，则执行所需的任何功能并将结果放在该`Right`位置。`orElse`允许我们通过提供一个值来消除`Either`，以防之前的计算失败。你能看到这里是如何`Either`替代异常的吗？由于`ValueException`Python 代码中的 s*总是被*函数本身捕获，我们知道它`atom`永远不会*引发*异常。同样，在 Haskell 代码中，即使我们`Either`在函数内部使用，我们暴露的接口也是纯的：`Token -> SchemeExpr`，没有外在可见的副作用。

* * *

好的，让我们继续`read_from`。首先，问自己一个问题：这个功能有什么副作用？`tokens`它通过改变它的参数`pop`，并且它在名为 的列表上有内部突变`L`。它也引发了`SyntaxError`异常。在这一点上，大多数Haskellers会举手说“哦，不！副作用！恶心！” 但事实是，Haskellers 也一直在使用副作用。我们只是称它们为“单子”，以吓跑人们并不惜一切代价避免成功。突变可以用`State`monad 来完成，例外情况可以用 monad 来完成`Either`（惊喜！）。我们希望同时使用两者，所以我们实际上会使用“monad 转换器”，我会稍微解释一下。不是*这样*可怕，一旦你学会了看过去。

首先，一些实用程序。这些只是一些简单的管道操作。`raise`将让我们像在 Python 中一样“引发异常”，并`whileM`让我们像在 Python 中一样编写一个 while 循环。对于后者，我们只需明确说明效果应该以什么顺序发生：首先执行效果以计算条件，然后如果是`True`，则再次执行主体和循环的效果。

```
import Control.Monad.Trans.State
import Control.Monad.Trans.Class (lift)

raise = lift . Left

whileM :: Monad m => m Bool -> m () -> m ()
whileM mb m = do
  b <- mb
  if b
  then m >> whileM mb m
  else return () 
```

我们再次想要公开一个纯接口。但是，有可能会有 a `SyntaxError`，因此我们将在类型签名中指出结果将*是*a`SchemeExpr`或 a `SyntaxError`。这让人想起在 Java 中如何注释方法将引发的异常。请注意，类型签名`parse`也必须更改，因为它可能会引发 SyntaxError。

```
data SyntaxError = SyntaxError String
                 deriving (Show)

parse :: String -> Either SyntaxError SchemeExpr

readFrom :: [Token] -> Either SyntaxError SchemeExpr
readFrom = evalStateT readFrom' 
```

我们将对传入的令牌列表执行有状态计算。然而，与 Python 不同的是，我们不会对调用者粗鲁并改变传递给我们的列表。相反，我们将建立自己的状态空间并将其初始化为给定的令牌列表。我们将使用`do`符号，它提供语法糖，使它看起来像我们在命令式编程。`StateT`monad 转换器为我们提供了、`get`和`put`状态`modify`操作。

```
readFrom' :: StateT [Token] (Either SyntaxError) SchemeExpr
readFrom' = do
  tokens <- get
  case tokens of
    [] -> raise (SyntaxError "unexpected EOF while reading")
    (token:tokens') -> do
      put tokens' -- here we overwrite the state with the "rest" of the tokens
      case token of
        "(" -> (SList . reverse) `fmap` execStateT readWithList []
        ")" -> raise (SyntaxError "unexpected close paren")
        _   -> return (atom token) 
```

我已将该`readWithList`部分分解为单独的代码块，因为我希望您查看类型签名。这部分代码引入了一个*新的作用域*，因此我们只需`StateT`在我们之前拥有的 monad 堆栈之上再分层一个。现在，`get`、`put`和`modify`操作指的`L`是 Python 代码中调用的东西。如果我们想在 上执行这些操作`tokens`，那么我们可以简单地在操作前加上`lift`，以便剥离一层 monad 堆栈。

```
readWithList :: StateT [SchemeExpr] (StateT [Token] (Either SyntaxError)) ()
readWithList = do
  whileM ((\toks -> toks !! 0 /= ")") `fmap` lift get) $ do
    innerExpr <- lift readFrom'
    modify (innerExpr:)
  lift $ modify (drop 1) -- this seems to be missing from the Python 
```

在 Haskell 中，附加到列表的末尾是低效的，所以我改为预先添加，然后在之后反转列表。如果您对性能感兴趣，那么您可以使用更好的类似列表的数据结构。

这是完整的文件：[http ://hpaste.org/77852](http://hpaste.org/77852)

* * *

因此，如果您是 Haskell 的新手，那么这可能看起来很可怕。我的建议是给它一些时间。Monad 抽象并不像人们想象的那么可怕。您只需要了解大多数语言所包含的内容（突变、异常等），Haskell 反而通过库提供。在 Haskell 中，您必须明确指定您想要的效果，并且控制这些效果不太方便。然而，作为交换，Haskell 提供了更多的安全性，因此您不会意外地混淆错误的效果，并且功能更强大，因为您可以完全控制如何组合和重构效果。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-18T02:33:50.227

在 Haskell 中，您不会使用一种算法来改变它所操作的数据。所以不，没有直接的方法可以做到这一点。但是，可以使用递归重写代码以避免更新变量。下面的解决方案使用[MissingH](http://hackage.haskell.org/package/MissingH)包，因为 Haskell 烦人地没有`replace`适用于字符串的函数。

```
import Data.String.Utils (replace)
import Data.Tree  
import System.Environment (getArgs)

data Atom = Sym String | NInt Int | NDouble Double | Para deriving (Eq, Show)

type ParserStack = (Tree Atom, Tree Atom)

tokenize = words . replace "(" " ( " . replace ")" " ) " 

atom :: String -> Atom
atom tok =
  case reads tok :: [(Int, String)] of
    [(int, _)] -> NInt int
    _ -> case reads tok :: [(Double, String)] of
      [(dbl, _)] -> NDouble dbl
      _ -> Sym tok

empty = Node $ Sym "dummy"
para = Node Para

parseToken (Node _ stack, Node _ out) "(" =
  (empty $ stack ++ [empty out], empty [])
parseToken (Node _ stack, Node _ out) ")" =
  (empty $ init stack, empty $ (subForest (last stack)) ++ [para out])
parseToken (stack, Node _ out) tok =
  (stack, empty $ out ++ [Node (atom tok) []])

main = do
  (file:_) <- getArgs
  contents <- readFile file
  let tokens = tokenize contents
      parseStack = foldl parseToken (empty [], empty []) tokens
      schemeTree = head $ subForest $ snd parseStack
  putStrLn $ drawTree $ fmap show schemeTree 
```

`foldl`是 haskeller 的基本结构化递归工具，它与您的 while 循环和对`read_from`. 我认为代码可以改进很多，但我对 Haskell 不太习惯。下面是上述到 Python 的几乎直接的音译：

```
from pprint import pprint
from sys import argv

def atom(tok):
    try:
        return 'int', int(tok)
    except ValueError:
        try:
            return 'float', float(tok)
        except ValueError:
            return 'sym', tok

def tokenize(s):
    return s.replace('(',' ( ').replace(')',' ) ').split()

def handle_tok((stack, out), tok):
    if tok == '(':
        return stack + [out], []
    if tok == ')':
        return stack[:-1], stack[-1] + [out] 
    return stack, out + [atom(tok)]

if __name__ == '__main__':
    tokens = tokenize(open(argv[1]).read())
    tree = reduce(handle_tok, tokens, ([], []))[1][0]
    pprint(tree) 
```

# python - Python“While”循环并打破它们

> ID：13431848
> 
> 赞同：1
> 
> 时间：2012-11-17T15:10:15.417
> 
> 标签：python, loops, while-loop

如果我有两个`while:`循环，一个在另一个内部，如下所示：

```
while #test :
    while #test :
        #other code
        if #test :
           break
    #other code 
```

会`break`停止两个`while:`循环还是只停止其中的一个`if #test :`？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T15:11:43.417

它只会停止内部循环。如果你想打破这两个循环，你必须提供另一个条件来打破外循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T15:12:41.580

A`break`总是只中断包含它的循环，因此代码的最后一行将在外循环下执行。

[了解](http://docs.python.org/2/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops) [更多](http://docs.python.org/2/reference/simple_stmts.html#the-break-statement)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T15:45:30.170

[来自 python 文档：](http://docs.python.org/2/reference/simple_stmts.html#the-break-statement)

> break 只能在语法上嵌套在 for 或 while 循环中，但不能嵌套在该循环内的函数或类定义中。
> 
> 它终止最近的封闭循环，如果循环有一个则跳过可选的 else 子句。

“break 终止最近的封闭循环” - 例如仅内部 while

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T15:33:32.050

break 只停止 if #test 所在的那个，所以其他代码将被执行。

# performance - executePackage 似乎需要很长时间才能启动子包

> ID：13431860
> 
> 赞同：0
> 
> 时间：2012-11-17T15:11:37.817
> 
> 标签：performance, ssis

我是 SSIS 的相对初学者，所以我可能会做一些愚蠢的事情。

我有一个过程涉及遍历异构队列并一次处理对象 1。该过程目前正在“设置逻辑”及其丢弃的东西中完成。我被要求以循环的方式对其进行返工，因此已经为我做出了这个决定。

我选择在 1 个包中实现队列逻辑，在另一个包中实现实际处理。

考虑到这一切都进行得比较顺利……

我现在已经启动并运行了该过程，但是速度很慢。每个项目 9 秒。显然我不能提出这个解决方案。:-)

我注意到一件事，每个循环的 1.5 - 2 秒在队列循环中的 ExecutePackage 任务上。

我不知道如何获得一个硬数字，我正在使用闪烁的绿框方法进行性能调整。其他步骤似乎非常快。添加索引，将 sql 更改为 sps，所有常用技巧都有帮助。

1.  就变成白色/黄色/绿色的框而言，UI 是否可行？有些任务在进度选项卡中报告时间，有些似乎没有。所以我在数黄色时间。

2.  调用子包应该那么贵吗？我所做的 1 个更改是我将“RunInASeperateProcess”更改为 FALSE。我这样做是因为子包会产生以下消息：

    错误：脚本任务中的 0xC0012024：任务“脚本任务”无法在此版本的集成服务上运行。它需要更高级别的版本。任务失败：脚本任务

3.  我所做的阅读似乎提倡多种包装。任何人有任何计数器模式？我应该坚持到底吗？我开始换成 1 个包裹。复制/粘贴似乎不适用于 SequenceContainers。我还需要重新创建父包中的所有变量。可行，但我不确定这是答案。

4.  有谁知道他们愿意分享的任何调优资源/网站/书籍。

更新 - 我一直在努力找出问题所在。我在想这是传递变量值的包配置。我不认为是这样。我可以将变量传递给另一个没有任何内容的包，而且速度很快。

我可以通过向其中添加两个连接管理器来使琐碎的子包变慢。我突然意识到我可能在主包和子包中都建立和断开了与 Oracle 服务器和 SQL 服务器的连接。

我在这个观察中正确吗？

有什么办法可以重用两个包之间的连接吗？当我用谷歌搜索时，我看到的大部分内容都是关于传递连接字符串的建议。

更新 - 我将两个包合二为一。这种性能不是每个项目大约 1.25 秒，低于大约 9 秒。我可以指出的唯一改变是我现在重用单个连接而不是建立多个连接。

谢谢，感谢您提供的任何帮助。

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:36:36.420

Once you enable logging, I'd suggest running the package from a command window using `dtexec`. While that doesn't perfectly duplicate the server environment, it does have the advantages of (a) eliminating BIDS as a potential performance issue and (b) being something you can do without jumping through change control hoops.

# asp.net-mvc-3 - 更改注册数据库 mvc3

> ID：13431864
> 
> 赞同：1
> 
> 时间：2012-11-17T15:11:48.843
> 
> 标签：asp.net-mvc-3

这里是新的，对 mvc 和 Visual Studio 来说也很新。我的查询是：在基于移动的 Web 应用程序项目中；我希望新注册的用户将他们的地理位置连同他们的详细信息和定期更新的优惠一起存储在必应地图上。

然后，我需要未注册的站点用户能够根据自己的坐标查看这些位置和详细信息。我可以将表添加到现有的注册和登录数据库并从那里查询所有内容还是需要创建另一个数据库？

我正在使用 Visual Studio 2012 Express 和 mvc3

对不起，如果这有点模糊......

# html - 如何让两个按钮并排显示？

> ID：13431869
> 
> 赞同：-1
> 
> 时间：2012-11-17T15:12:42.670
> 
> 标签：html, css

![在此处输入图像描述](../Images/e9eef1f21472fb3cd4964e8cbc201dd7.png)

我有两个按钮`Update`，`Cancel`我想并排显示。

然而，两个按钮之间有一个中断（见附图）。

这是HTML代码：

```
<div class="form_block span2">
    <br>
    <input class="btn btn-primary" type="submit" value="Update" style="display:inline;"/> 
    <a class="btn btn-danger" style="display:inline;" href="{% url profile_detail profile.user.username %}">Cancel</a>
</div> 
```

如何让两个按钮并排显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:27:28.953

将按钮放在一个`<ul>`元素中，并将每个按钮放在一个`<li>`元素中`style="display:inline"`

示例代码：

```
<style>
ul
{
list-style-type:none;
margin:0;
padding:0;
}
li
{
display:inline;
 }
 </style>

 <div class="form_block span2"><br>
    <ul>
      <li><input class="btn btn-primary" type="submit" value="Update" /></li>
      <li><a class="btn btn-danger" href="{% url profile_detail profile.user.username %}">Cancel</a></li>
    </ul>
 </div> 
```

# function - 将函数表示为树

> ID：13431870
> 
> 赞同：1
> 
> 时间：2012-11-17T15:12:45.443
> 
> 标签：function, haskell, tree

我正在做一份过去的函数编程试卷并有这个问题：

> 以下是编写基本相同表达式的两种方式：
> 
> f (g(x,y),z,h(t))
> 
> f (gxy) z (ht)
> 
> (a) 把这两个表达式画成两种不同的树，说明它们的不同结构。
> 
> (b) 定义 Haskell 数据类型 Bush a 和 Tree a 来捕获两种不同的结构。

我有点卡住了，因为我在我的课程中从来没有做过这样的事情。从后面的部分很明显，第一个表达式应该用 表示，`Tree a`第二个用表示`Bush a`，但我真的不知道从哪里开始。我猜想是这样的：

```
data Tree a = Leaf a | Node (Tree a) (Tree a)
data Bush a = Node a [Bush a] 
```

但我认为二叉树类型不适合使用。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:45:13.007

实际上，第一个表达式由 表示，`Bush`第二个表达式由 表示`Tree`。

在 Haskell 中，`g x y`表示`g x`应用于`y`; 在 C 中，`g(x, y)`表示`g`应用于参数集合 - `{x, y}`。因此，在 C 中：

```
f(g(x,y),z,h(t)) = Bush f [Bush g [Bush x [], Bush y []], Bush z [], Bush h [Bush t []]]

  f
  +--g
  |  +--x
  |  +--y
  |
  +--z
  |
  +--h
     +--t 
```

在 Haskell 中：

```
f (g x y) z (h t) = App (App (App f (App (App g x) y)) z) (App h t)

         +
        / \
       /  /\
      +  h  t  
     / \
    /\  z
   f  +
     / \
    /\  y
   g  x 
```

# android - 启动时出现 java.lang.ClassNotFoundException

> ID：13431872
> 
> 赞同：4
> 
> 时间：2012-11-17T15:12:51.300
> 
> 标签：android, startup, classnotfoundexception

我们在应用程序启动时遇到了非常奇怪的 java.lang.ClassNotFoundException，它发生在极少数客户（< 1%）身上。我们从未在开发环境中看到它，我们无法理解这个问题的根源。这是来自 Google play 崩溃报告的堆栈跟踪。

```
java.lang.RuntimeException: Unable to instantiate application com.mycompany.myapplication.MyApplication: java.lang.ClassNotFoundException: com.mycompany.myapplication.MyApplication in loader dalvik.system.PathClassLoader[/mnt/asec/com.mycompany.myapplication-1/pkg.apk]
at android.app.LoadedApk.makeApplication(LoadedApk.java:490)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3784)
at android.app.ActivityThread.access$2200(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1082)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4268)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.mycompany.myapplication.MyApplication in loader dalvik.system.PathClassLoader[/mnt/asec/com.mycompany.myapplication-1/pkg.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newApplication(Instrumentation.java:972)
at android.app.LoadedApk.makeApplication(LoadedApk.java:481)
... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T11:43:14.843

如果问题只发生在签名的 APK 上并且您使用 Eclipse 导出签名的 APK ...

在 Eclipse 中“导出并签署 APK”之前，请**关闭**菜单 [Project > Build Automatically] 中的以下设置（然后可以在以后继续开发时将其重新打开）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T02:18:06.777

我最近为我的应用程序部署了更新，第二天就有用户通过 Google Play 报告工具报告了崩溃。堆栈转储用于 LoadApk()，错误出现在我的 Application 类的加载中。这是那个转储：

java.lang.RuntimeException：无法实例化应用程序 com.goalstate.WordGames.FullBoard.library.FullBoardApplication：java.lang.ClassNotFoundException：在路径上找不到类“com.goalstate.WordGames.FullBoard.library.FullBoardApplication”：DexPathList [[],nativeLibraryDirectories=[/vendor/lib, /system/lib]] 在 android.app.LoadedApk.makeApplication(LoadedApk.java:516) 在 android.app.ActivityThread.handleBindApplication(ActivityThread.java:4703) 在 android .app.ActivityThread.access$1600(ActivityThread.java:175) 在 android.os.ActivityThread$H.handleMessage(ActivityThread.java:1368) 在 android.os.Handler.dispatchMessage(Handler.java:102) 在 android.os .Looper.loop(Looper.java:146) 在 android.app.ActivityThread.main(ActivityThread.java:5602) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method。在 dalvik 的 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1099) 的 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1283) 调用(Method.java:515) .system.NativeStart.main(Native Method) 原因：java.lang.ClassNotFoundException：在路径上找不到类“com.goalstate.WordGames.FullBoard.library.FullBoardApplication”：DexPathList[[],nativeLibraryDirectories=[/vendor /lib, /system/lib]] 在 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:67) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:497) 在 java.lang.ClassLoader.loadClass(ClassLoader. java:457) 在 android.app.Instrumentation.newApplication(Instrumentation.java:981) 在 android.app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多在 dalvik.system.NativeStart.main(Native Method) 的 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1099) 运行(ZygoteInit.java:1283) 原因：java.lang.ClassNotFoundException: 没有' t 在 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java 的路径：DexPathList[[],nativeLibraryDirectories=[/vendor/lib, /system/lib]] :67) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:497) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:457) 在 android.app.Instrumentation.newApplication(Instrumentation.java:981) 在 android .app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多在 dalvik.system.NativeStart.main(Native Method) 的 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1099) 运行(ZygoteInit.java:1283) 原因：java.lang.ClassNotFoundException: 没有' t 在 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java 的路径：DexPathList[[],nativeLibraryDirectories=[/vendor/lib, /system/lib]] :67) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:497) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:457) 在 android.app.Instrumentation.newApplication(Instrumentation.java:981) 在 android .app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多ClassNotFoundException：在 dalvik.system.BaseDexClassLoader.findClass 的路径：DexPathList[[],nativeLibraryDirectories=[/vendor/lib, /system/lib]] 上找不到类“com.goalstate.WordGames.FullBoard.library.FullBoardApplication” (BaseDexClassLoader.java:67) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:497) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:457) 在 android.app.Instrumentation.newApplication(Instrumentation.java: 981) 在 android.app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多ClassNotFoundException：在 dalvik.system.BaseDexClassLoader.findClass 的路径：DexPathList[[],nativeLibraryDirectories=[/vendor/lib, /system/lib]] 上找不到类“com.goalstate.WordGames.FullBoard.library.FullBoardApplication” (BaseDexClassLoader.java:67) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:497) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:457) 在 android.app.Instrumentation.newApplication(Instrumentation.java: 981) 在 android.app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多ClassLoader.loadClass(ClassLoader.java:457) at android.app.Instrumentation.newApplication(Instrumentation.java:981) at android.app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多ClassLoader.loadClass(ClassLoader.java:457) at android.app.Instrumentation.newApplication(Instrumentation.java:981) at android.app.LoadedApk.makeApplication(LoadedApk.java:511) ... 11 更多

我有一个库，我的 Application 类是在该库中定义的。我的应用程序（使用该库）的清单通过其完整路径引用了该库中的类。它没有自己的应用程序类。

我所有的内部测试都没有重现这个问题，甚至当我在同一台设备（实际上是两台不同的设备，一台运行 4.3，一台运行 4.4.4）上进行测试（使用三星远程测试实验室）时，报告崩溃（一台 Galaxy Note II，运行 Android 4.4），没有问题。

在搜索这方面的信息时，我发现提到不同的设备可能有稍微不同的方法来解决类引用，这可能就是为什么大多数设备对我的 APK 没有问题，但是这个特定的设备（与我的测试设备不同，由 Sprint 提供了它的 Android 风格）确实如此。同样，这可能就是为什么您自己的客户中只有 1% 有问题，而大多数没有。

我决定最好的方法是让即使是简单的设备也尽可能容易地找到从我的清单文件中引用的类。因此，我在应用程序本身的包（而不是库）中定义了一个新的应用程序类，并且我让该类从我的库中的应用程序类继承。否则，新班级是空的。

然后，我将库中对应用程序类的完整路径引用替换为对我在应用程序本身中创建的新类的相对引用。所以，而不是：

```
<application android:name="com.goalstate.WordGames.FullBoard.library.FullBoardApplication" 
```

在我的清单中，我有：

```
<application android:name=".FullBoardWordChumsApplication" 
```

这（根据有关该主题的民间传说）应该使不太复杂的解决过程更容易成功。

我还采用了我在清单中使用的完整路径来命名我已经本地的活动类并使其相对（通过简单地删除最后一个点之前的所有内容）。

网上找到的其他民间传说表明，在 Eclipse 中关闭项目的“自动构建”可能会有所帮助，然后退出 Eclipse，重新进入 Eclipse，然后在重新构建后，直接进入 Android 工具导出已签名的 APK（无需曾经打开自动构建）。因此，在我的左肩上撒盐，并向碎片妄想之神祈祷，我在准备发布我的 APK 时接受了这种迷信。

这真的有帮助吗？时间会证明一切，但到目前为止，我的更新版本还没有产生任何额外的崩溃。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-17T15:21:41.243

当您的清单文件中的应用程序标记中的任何类名与您的编码 java 文件不匹配时，就会发生此错误。因此，请同时使用当前的方式。

# jquery - SlideDeck2 滑块停止工作

> ID：13431874
> 
> 赞同：0
> 
> 时间：2012-11-17T15:13:06.430
> 
> 标签：jquery, wordpress

[goo.gl/8ib94](http://goo.gl/8ib94)

网站顶部的滑块是由 SlideDeck2 wordpress 插件制作的。它突然停止工作。有人有什么想法吗？

我想;

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script> 
```

这可能正在这样做，但事实并非如此。我将它从页面中取出，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:20:41.043

您的页面中有一些 Javascript 错误，这就是其中之一。在 jQuery 实际加载之前，您正在使用以下脚本

```
jQuery(document).ready(function($){
  $("a[rel*=lightbox]").colorbox({opacity:0.8});
}); 
```

所以最好将代码行（Google-jQuery 库链接）从底部移动到 <head> 部分

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script> 
```

# database - 从 OO Base 导出到 M$ Access

> ID：13431875
> 
> 赞同：0
> 
> 时间：2012-11-17T15:13:18.897
> 
> 标签：database, ms-access, export-to-csv, openoffice-base

据我了解，它只能以 PDF 格式导出，但我不认为使用 Fine Reader 扫描 PDF、保存为文本然后导出到 Access 是最简单的方法。“导出”选项卡始终处于非活动状态

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:20:49.777

我建议导出到 csv，例如这里 [http://forum.openoffice.org/en/forum/viewtopic.php?f=13&t=5009](http://forum.openoffice.org/en/forum/viewtopic.php?f=13&t=5009)

方法是从 OObase -> Calc -> csv 和 csv 可以很容易地读入任何数据库

# html - CSS3 切换在 Android 和 Iphone 浏览器中不起作用

> ID：13431877
> 
> 赞同：1
> 
> 时间：2012-11-17T15:13:40.337
> 
> 标签：html, css

我需要一些帮助才能在移动设备、android 和 iphone 上运行这个 html 脚本，这在 Opera、Safari、Mozilla 和 Chrome 上运行良好。

下面我介绍了基于复选框切换显示一个框的内容

谢谢

HTML 内容：

```
<input type="checkbox" id="popup_s" class="popUpControl_s">
<label for="popup_s" style="display:block">
   <div id="selector_s">Click Me</div>
   <span class="boxtoggle_s">
       <div id="content">Lorem ipsum content</div>
       <div id="close_s"><img src="/media/close.png" alt="Close"></div>
   </span>
</label>​ 
```

CSS3 内容

```
.boxtoggle_s {
    position: absolute;
    left: 350px;
    top: 33%;
    background-color: #eeeeee;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#eeeeee), to(#999999)); 
            background-image: -webkit-linear-gradient(top, #eeeeee, #999999); 
            background-image:    -moz-linear-gradient(top, #eeeeee, #999999); 
            background-image:     -ms-linear-gradient(top, #eeeeee, #999999); 
            background-image:      -o-linear-gradient(top, #eeeeee, #999999); 

    /* Prevent some white flashing in Safari 5.1 */
    -webkit-backface-visibility: hidden;

    -moz-border-radius:    20px; 
    -webkit-border-radius: 20px; 
    border-radius:         20px; 
    width: 230px; 
    padding: 20px;
    opacity: 0;    
    -webkit-transform: scale(0) skew(50deg);
    -moz-transform:    scale(0) skew(50deg);
    -ms-transform:     scale(0) skew(50deg);
    -o-transform:      scale(0) skew(50deg);
    -webkit-transform-origin: 0px -30px;
    -moz-transform-origin:    0px -30px;
    -ms-transform-origin:     0px -30px;
    -o-transform-origin:      0px -30px;
    -webkit-transition: -webkit-transform ease-out .35s, opacity ease-out .4s;
    -moz-transition:    -moz-transform    ease-out .35s, opacity ease-out .4s;
    -ms-transition:     -ms-transform     ease-out .35s, opacity ease-out .4s;
    -o-transition:      -o-transform      ease-out .35s, opacity ease-out .4s;
}

.boxtoggle_s:after {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 25px;
            border-bottom: 20px solid #eee;
            border-left:   14px solid transparent;
            border-right:  14px solid transparent;
            width:  0;
            height: 0;
        }

.popUpControl_s { 
    display: none; 
}
.popUpControl_s:checked ~ label > .boxtoggle_s {
    opacity: 1;
    -webkit-transform: scale(1) skew(0deg);
    -moz-transform:    scale(1) skew(0deg);
    -ms-transform:     scale(1) skew(0deg);
    -o-transform:      scale(1) skew(0deg);

}
#selector_s {
position:absolute;
top:212px;
right:250px;
margin:5px 0 0 10px;
padding: 8px 5px 5px 10px;
width: 140px;
height:22px;
background:#ddd;
cursor:pointer;
}
#content {
color:#000;
font-weight:bold;
font-size:12px;
}
#close_s {position:absolute;left:242px; top:35px;}​ 
```

# css - 如何设置所有孩子都从主父母的同一行开始

> ID：13431884
> 
> 赞同：1
> 
> 时间：2012-11-17T15:14:31.567
> 
> 标签：css

我试图建立自己的多下拉菜单，我遇到了这个问题，必须想好如何解决它。我得到的最好的方法是使用 margin-left:-100px 但是当下拉菜单超过 2 级时它会失去对齐。

这是我尝试开发的 ![在此处输入图像描述](../Images/c7d4da0f5c92194613cc882e5de24710.png) ，这是迄今为止我最好的解决方案......但不是我想要的 ![在此处输入图像描述](../Images/d2369cf67bd6813ea3fea8ca4bdf1f0e.png)

这是我的 html 代码

```
<div id="menuBox">
    <li class="mainMenu">home</li>
    <li class="mainMenu">about</li>
    <li class="mainMenu">product
        <ul class="w200">
            <li>money maker</li>
            <li>personal coarch
                <ul class="w200">
                    <li>1 to 1</li>
                    <li>1 to 5</li>
                    <li>1 to 10</li>
                </ul>
            </li>
        </ul>
    </li>
    <li class="mainMenu">consult</li>
    <li class="mainMenu">contact</li>
</div> 
```

这是我的 CSS 设置

```
li.mainMenu{
  list-style:none; 
  display:inline-block;
  padding:25px 35px;
  border-top:1px solid #CCCDDD;
  margin:0px;
  font-size:1.3em;
  background:#CCCCCC;
}
li{
  background:#CCCCCC;
  cursor:pointer;
}
ul{
  float:left;
  position:absolute;
  z-index:999;
  list-style:none;
}
ul>li{
  padding:5px 20px;
} 
```

那么我应该修改哪个/如何修改我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:00:42.463

首先，您需要将 更改为`div`，`ul`因为这些`li`项目只允许在`ul/ol`元素内部。

试试这个 CSS

```
#menuBox, #menuBox ul{ /*reset ul styling for menu/submenu*/
    padding:0;
    margin:0;
}
#menuBox{
    white-space:nowrap;
    list-style:none;
    font-size:1.3em;
}
#menuBox > li{ /*first level li elements*/
    display:inline-block;
    padding:25px 35px;
    border-top:1px solid #CCCDDD;
    margin:0px;
}
#menuBox li{ /*all li elements*/
    position:relative;
    background:#CCCCCC;
    cursor:pointer;
}
#menuBox li:hover{ /*hovered li elements*/
    background:black;
    color:white;
}
#menuBox li li{ /*sub li elements - all levels after 1st*/
    color:black; /*hide all submenus*/
    padding:5px 20px;
}
#menuBox li:hover > ul { /*submenu ul elements*/
    display:block; /*show submenu when parent li is hovered*/
}
#menuBox ul{ /*all submenu ul elements*/
  z-index:999;
  list-style:none;
  position:absolute;
  top:80%;
  left:50%;
  border:1px solid black;
  display:none;
} 
```

演示在[http://jsfiddle.net/gaby/g6yX2/](http://jsfiddle.net/gaby/g6yX2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:47:06.193

这是因为在您的 li.mainMenu 填充左侧设置为 35，将其删除。如果您想保留该填充：

HTML：

```
<li class="mainMenu"><label>product</label>
    <ul class="w200">
        <li><label>money maker</label></li>
        <li><label>personal coarch</label>
            <ul class="w200">
                <li>1 to 1</li>
                <li>1 to 5</li>
                <li>1 to 10</li>
            </ul>
        </li>
    </ul>
</li> 
```

CSS：

```
li.mainMenu{
    list-style:none; 
    display:inline-block;
    padding:25px 0px;
    border-top:1px solid #CCCDDD;
    margin:0px;
    font-size:1.3em;
    background:#CCCCCC;
}
li.mainMenu label {
    padding: 0px 35px;
} 
```

示例：http: [//jsfiddle.net/RaPK9/](http://jsfiddle.net/RaPK9/)

# forms - Mono Form.Show 从另一个表单不起作用

> ID：13431888
> 
> 赞同：0
> 
> 时间：2012-11-17T15:14:59.483
> 
> 标签：forms, asynchronous, mono, show, showdialog

我正在尝试移植一个 WinForms 应用程序以与 Mono 一起使用，并且我最近注意到从另一个表单调用 Form.Show() 要么什么都不做，要么导致新表单闪烁并消失。我读到了一些关于需要消息泵的新表单，它是通过 Application.Run() 完成的，但这已经被调用了。知道为什么这不起作用吗？我不能使用 ShowDialog，因为我的程序依赖于已完成的异步任务触发的事件，而且我不想阻止在 Show 调用之后立即完成的大量额外线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:27:45.433

您是否尝试在显示/显示新表单之前隐藏当前表单？

在我看来，您的表单确实正在显示，但由于某种奇怪的原因，它被委派给了后台。值得一试。

# php - 如何查询表的列名

> ID：13431889
> 
> 赞同：0
> 
> 时间：2012-11-17T15:15:12.650
> 
> 标签：php, mysql

嗨，伙计们，我需要有关显示特定表示例的列名的帮助该列中的数据确实需要您的帮助..谢谢:)

```
SELECT table_name, column_name, data_type, data_length
FROM USER_TAB_COLUMNS
WHERE table_name = 'mydatabase' 
```

这是我在研究答案时发现的代码，但我不知道如何执行这个..我真的不知道如何使用它来显示列名..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:20:46.787

怎么用[`DESCRIBE`](http://dev.mysql.com/doc/refman/5.0/en/describe.html)

```
DESCRIBE tablename; 
```

在这里试试：[http ://sqlfiddle.com/#!2/a2581/2823/0](http://sqlfiddle.com/#!2/a2581/2823/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:27:40.073

```
$result = mysql_query("SHOW COLUMNS FROM sometable");
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_assoc($result)) {
        print_r($row);
    }
} 
```

结果可能：

```
Array
(
    [Field] => id
    [Type] => int(7)
    [Null] =>
    [Key] => PRI
    [Default] =>
    [Extra] => auto_increment
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T15:18:44.933

> 我需要的是显示 account_id、first_name、last_name 等，而不是该列内的数据

```
SELECT COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME  = 'B' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/506f0/3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T15:20:28.160

```
SELECT column_name FROM information_schema.COLUMNS WHERE TABLE_NAME='table'; 
```

这应该直接从信息模式中获取列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T15:20:58.047

就 PHP 而言，建议使用 MySQLi 而不是 MySQL。

您可以使用`mysqli_fetch_field()`

```
$query = "SELECT blah from blah ORDER BY blah LIMIT 5";

if ($result = $mysqli->query($query)) {

/* Get field information for all columns */
while ($finfo = $result->fetch_field()) {

    printf("Name:     %s\n", $finfo->name);
    printf("Table:    %s\n", $finfo->table);
    printf("max. Len: %d\n", $finfo->max_length);
    printf("Flags:    %d\n", $finfo->flags);
    printf("Type:     %d\n\n", $finfo->type);
    }

    $result->close();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-17T15:17:52.237

```
$query= "SELECT table_name, column_name, data_type, data_length
FROM USER_TAB_COLUMNS
WHERE table_name = 'mytablename' ";

$result = mysql_query($query) or die(mysql_error());
while($row=mysql_fetch_array($result)) {echo "$row[acount_id] $row[first_name] $row[last_name]";} 
```

使用上述回显数据库中的所有三个数据

# facebook-graph-api - 如何在 fb.api 函数中传递额外的帖子值

> ID：13431890
> 
> 赞同：1
> 
> 时间：2012-11-17T15:15:21.157
> 
> 标签：facebook-graph-api

请看下面的代码：

```
 FB.api(
    '/me/<namespace>:<action_type>',
    'post',
    {<object>:url},
    function(response) {

      //alert(response.responseText);
      console.log(response);

       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('latest was successful! Action ID: ' + response.id);
       } 
```

现在假设我有一个 url：[http](http://domainname.com?getvar=somevalue) ://domainname.com?getvar=somevalue 。当我使用这个 URL 时，getvar 不会在页面上生成，因为我在 Fb.api 中使用“发布”。实际上我只需要使用“发布”，我想通过使用发布方法通过 URL 传递额外的值。我怎么能做到这一点。如果您有任何想法，请告诉我。

==================================================== ================================

我将再次解释我的问题：

我正在使用开放图 facebook api。我需要在 FB 时间线上显示我的一些网站活动。我已经为少数几个动作之一做了这个，比如当我上传视频时，它会出现在我的 Facebook 帐户上。现在，当有人关注用户时，我也需要这样做，它也应该出现在 FB 时间线或日志活动中。

我的问题从元标记开始：

```
 <meta name="ogtype" property="og:type" content="namespace:video"/> 
```

以上元标记我用于上传视频操作。

对于有人关注用户时的下一步操作，然后我必须在元标记下面使用它：

```
 <meta name="ogtype" property="og:type" content="namespace:user"/> 
```

我必须在同一页面上同时执行这两项操作，但只能有一个“ogtype”元标记。所以我决定动态更改 ogtype 元标记。

简而言之：

*   我可以使用任何替代方式将 ogtype 用于 fb.api 操作..吗？
*   我如何使用开放图而不是一种活动或动作类型..？

谢谢，

# python - 使用 AZ 字母加密文本

> ID：13431893
> 
> 赞同：0
> 
> 时间：2012-11-17T15:16:15.097
> 
> 标签：python, encryption

我要做的是制作一个程序，用字母 AZ 加密文本文件（您指定），然后将其保存在另一个文件中。

例如，使文本文件中的第一个字母为“A”，第二个字母为“B”，第三个字母为“C”等。

我想知道是否有人可以帮助我，或者至少给我一些关于如何开始的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:35:54.503

如果我从字面上理解你，这就是：

```
from itertools import cycle
import string

with open('input.txt', 'rt') as input, open('output.txt', 'wt') as output:
    cipher = cycle(string.uppercase)
    for line in input:
        encrypted = []
        for c in line:
            if c in string.letters:
                encrypted.append(cipher.next())
            else:
                encrypted.append(c)
        output.write(''.join(encrypted)) 
```

输入文件：

```
This is a sentence.
And so is this. 
```

输出文件：

```
ABCD EF G HIJKLMNO.
PQR ST UV WXYZ. 
```

这样做的问题是我认为没有一种实用的方法可以取消加密文本，因为在此过程中会丢失大量信息 - 字母的加密版本仅取决于它在文件中的相对位置，并且*不是*原来的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:39:08.623

我会尝试：

```
from string import ascii_uppercase
from itertools import count
from operator import itemgetter

text = 'hellothere'

counter = count(0)
ref = {}
for ch in text:
    if ch not in ref:
        ref[ch] = next(counter)

letters = ''.join(el[0] for el in sorted(ref.iteritems(), key=itemgetter(1)))
frm, to = zip(*zip(letters, ascii_uppercase))

from string import maketrans

trans = maketrans(''.join(frm), ''.join(to))
print text.translate(trans)

# ABCCDEABFB 
```

# javascript - Javascript迷宫实现中的Dijkstra算法

> ID：13431894
> 
> 赞同：1
> 
> 时间：2012-11-17T15:16:30.260
> 
> 标签：javascript, path-finding, dijkstra

我正在尝试使用 Dijkstra 算法来找到迷宫的每个位置回到特定点。

我在这里找到了 Dijkstra 算法的 JavaScript 版本：

[https://github.com/bm1362/dijkstra-js/blob/master/nodes.js](https://github.com/bm1362/dijkstra-js/blob/master/nodes.js)

（谢谢bm1362！）

我创建迷宫图的方法如下：

```
// the maze
var maze = 
[[1, 1, 1, 1],
 [1, 0, 0, 0],
 [1, 0, 0, 0],
 [1, 1, 1, 1]];

maze2 = [];
var i = 0;
var mazeSize = 30;
for (var x = 0; x < maze[0].length; x++) {

    for (var y = 0; y < maze[0].length; y++) {

        if (maze[x][y] == 1) {
            nodes.push(new node);
            nodes[i].setPos((x) * (maze[0].length + 100), (y) * ((maze[0].length + 100)))
            nodes[i].tmppos = [x, y];
            nodes[i].id = i;
            maze2[x + ',' + y] = nodes[i];
            i++;
        }

    }
}

//sort nodes in order of x position
var sortedNodes = quickSort(nodes);
//var sortedNodes = nodes;
for (var i = 0; i < sortedNodes.length; i++) {
    sortedNodes[i].number = i;

    var n1 = sortedNodes[i];
    var up = {}, down = {}, left = {}, right = {};
    var pos = [];
    up.x = n1.tmppos[0];
    up.y = n1.tmppos[1] - 1;
    pos.push(up);
    down.x = n1.tmppos[0];
    down.y = n1.tmppos[1] + 1;
    pos.push(down);
    left.x = n1.tmppos[0] - 1;
    left.y = n1.tmppos[1];
    pos.push(left);
    right.x = n1.tmppos[0] + 1;
    right.y = n1.tmppos[1];
    pos.push(right);

    for (var m = 0; m < pos.length; m++) {

        if (maze[pos[m].x] != undefined && maze[pos[m].x][pos[m].y] != undefined && maze[pos[m].x][pos[m].y] == 1) {
            var n2 = maze2[pos[m].x + ',' + pos[m].y];
            var dist = calcDist(n1, n2);
            sortedNodes[i].addConnection(n2);
            connections.push({
                a: n1,
                b: n2,
                dist: dist
            })
        }
    }

} 
```

我遇到的问题是，即使所有节点似乎都有连接，但当算法运行时，一些节点没有得到父集。但是我尝试了很多不同的方法，但我仍然无法让它设置所有的父母。

我在这里创建了一个 JS 小提琴：http: [//jsfiddle.net/XcdCr/3/](http://jsfiddle.net/XcdCr/3/)

任何帮助将不胜感激。

# javascript - Ajax 获取请求：获取 html 中的信息

> ID：13431896
> 
> 赞同：0
> 
> 时间：2012-11-17T15:16:41.207
> 
> 标签：javascript, jquery, ajax

我想对一个看起来像这样的页面实现一个 jquery get 请求：

```
<tr class='tr'>
    <td class='example1'>
        <span> Information I have <span>
        <div> Something <div>
    </td>
    <td class='example2'>
        <span> Information I want to get <span>
        <span> something else </span>
    </td>
</tr> 
```

在页面中，有多个“TR”，我想要的是用“我拥有的信息”到达那个并获得“我想要获取的信息”。

我想使用一个ajax请求：

```
setInterval(function() {
    $.ajax({
        type: "GET",
        url: "url_of_the_page",
        success: test
    });
}, 5000);

function test(html) {
    $(html).find("Information I have").each(function() 
```

但我不知道如何获得信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:20:35.913

您可以使用以下内容：

```
$(html).find("span:contains('Information I have')").each( function() {
    var text = $(this).text();
    // do stuff with text
}); 
```

只有一件事值得一提。上面的选择器区分大小写，因此不会返回带有`information`而不是的元素。`Information`

[在这里](http://jsfiddle.net/3aZ3j/)提琴

# c++ - 如何使用 QtWebKit 从网站获取图像？

> ID：13431898
> 
> 赞同：1
> 
> 时间：2012-11-17T15:16:55.093
> 
> 标签：c++, qt, webkit, qtwebkit

例如，如果页面是[http://qt-project.org/](http://qt-project.org/)并且我需要获取[http://qt-project.org/images/qtdn/developer-guides-illustration.png](http://qt-project.org/images/qtdn/developer-guides-illustration.png)，但我只有名称图片（developer-guides-illustration.png）？

# jquery - $(document).ready 在 chrome 扩展中不起作用？

> ID：13431903
> 
> 赞同：0
> 
> 时间：2012-11-17T15:17:15.683
> 
> 标签：jquery, google-chrome-extension, popup

> **可能重复：**
> [谷歌浏览器扩展 - 弹出页面未正确显示](https://stackoverflow.com/questions/11599365/google-chrome-extension-popup-page-not-showing-correctly)

我在 popup.html 中有这个简单的代码

在头上：

```
<script src='jquery-1.8.2.js'></script>
<script>
    $(document).ready(function() {
        foo();
    });
    function foo() {
        document.getElementById('popup').innerHTML = "Hi, I entered foo";
    }
</script> 
```

在身体：

```
<div id="popup">        <!--place holder-->
</div> 
```

单击扩展程序的图标时，我预计会在打开的幻灯片中获得字符串“Hi ...”。实际上，打开了一张空幻灯片。谁能解释一下这里有什么问题？

（名为 jquery-1.8.2.js 的 jquery 文件与 popup.html 放在同一文件夹中）

编辑：得到反馈后，我将第二个脚本移至外部文件，如下：

```
<script src='popup.js'></script> 
```

popup.js：

```
<script>
    $(document).ready(function() {
        foo();
    });
    function foo() {
        document.getElementById('popup').innerHTML = "Hi, I entered foo";
    }
</script> 
```

但它仍然无法正常工作。为什么？

# php - PHP-font-lib 必须通过 composer 安装或复制到 lib/php-font-lib

> ID：13431905
> 
> 赞同：29
> 
> 时间：2012-11-17T15:17:21.910
> 
> 标签：php, dompdf

我正在尝试将一些 html 转换为 pdf。经过一些谷歌搜索后，我找到了[dompdf](https://github.com/dompdf/dompdf)，但是当我尝试转换时，我检索到

```
PHP-font-lib must either be installed via composer or copied to lib/php-font-lib 
```

这就是我想要做的：

```
require 'pdf/dompdf.php';
$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf"); 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-17T17:13:00.703

Dompdf 最近移至[Github](https://github.com/dompdf/dompdf)，我们还添加了 Composer 支持。为此，我们删除了对所需外部库[php-font-lib](https://github.com/PhenX/php-font-lib)的引用。

注意：如果您使用 composer 安装 dompdf（和[php-font-lib](https://github.com/PhenX/php-font-lib)），则需要放入`define("DOMPDF_ENABLE_AUTOLOAD", false);`dompdf_config.custom.inc.php。这将允许 composer 自动加载通过 dompdf 的 composer.json 文件安装的[php-font-lib 。](https://github.com/PhenX/php-font-lib)否则，您仍然可能会收到错误消息。（见[本期](https://github.com/dompdf/dompdf/issues/636)）

如果你没有使用 composer 并且想在这个库中使用最新版本的 dompdf：（[source](https://stackoverflow.com/a/24505929/3854385)）

*   [从Github](https://github.com/dompdf/dompdf/releases)获取最新的 dompdf 版本并将其解压到一个目录中。
*   [也从Github](https://github.com/PhenX/php-font-lib/releases)下载库版本
*   创建 dompdf/lib/php-font-lib/classes/ 目录。
*   在 zip 文件中，获取 src/FontLib/ 文件夹的内容并将其粘贴到新创建的目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T15:51:35.283

在审核我的编辑时，我将在此处发布最新 dompdf 0.6.1 的详细信息

如果使用 composer 安装 dompdf（和 php-font-lib），则需要放入`define("DOMPDF_ENABLE_AUTOLOAD", false);`dompdf_config.custom.inc.php。这将允许 composer 自动加载通过 dompdf 的 composer.json 文件安装的 php-font-lib。否则，您仍然可能会收到错误消息。（请参阅此问题 #636）

如果你没有使用composer，想使用最新版的dompdf，则需要手动安装php-font-lib：（[https://stackoverflow.com/a/24505929/3854385](https://stackoverflow.com/a/24505929/3854385)）

*   [从Github](https://github.com/dompdf/dompdf/releases)获取最新的 dompdf 版本并将其解压到一个目录中。
*   [也从Github](https://github.com/PhenX/php-font-lib/releases)下载库版本
*   创建 dompdf/lib/php-font-lib/classes/ 目录。
*   在 zip 文件中，获取 src/FontLib/ 文件夹的内容并将其粘贴到新创建的目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T18:22:23.810

另一个技巧，为了避免从 Composer 自动下载文件的变化，是`DOMPDF_ENABLE_AUTOLOAD`在重新加载配置文件之后定义和：

```
// Disable DOMPDF's internal autoloader if you are using Composer
define('DOMPDF_ENABLE_AUTOLOAD', false);
require_once CONFIG_DIR . 'vendor/dompdf/dompdf/dompdf_config.inc.php';

$dompdf = new \DOMPDF; 
```

# android - 在 ViewPager 中多次使用一个 Fragment

> ID：13431907
> 
> 赞同：6
> 
> 时间：2012-11-17T15:17:47.147
> 
> 标签：android, dynamic, android-viewpager, fragment

是否可以在视图页面中多次使用一个片段？我正在尝试使用 ViewPager 构建动态更新的 UI。我想使用相同的设计，基本上是相同的片段，每个页面都有不同的数据，比如列表视图适配器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T15:37:06.917

您可以为 ViewPager 中的每个页面实例化相同的 Fragment 类，传递 ViewPager 的位置来控制要显示的内容。像这样的东西：

```
public class MyFragment extends Fragment {

    private int mIndex;

    public MyFragment(int index) {
        mIndex = index;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

        switch(mIndex){
            case 0:
            // do you things..
            case 1:
            // etcetera
        }             
    }
} 
```

然后，在您的 FragmentPagerAdapter 中：

```
public static class MyAdapter extends FragmentPagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    @Override
    public Fragment getItem(int position) {
        return new MyFragment(position);
    }
} 
```

这样，您可以重用大部分代码，只更改您在 switch/case 语句中需要的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T16:28:45.220

您误解了`class`vs的概念`object of class`。您的`MyFragment.java`源代码定义了每次使用operator ( )**实例化**它`class`时您变成“生物”的东西- 这会创建您的. 除非您故意阻止这种情况（即使用单例模式），否则您可以制作任意数量的蛋糕，同样您可以使用单一配方制作尽可能多的蛋糕。这也适用于片段。**`new``new MyFragment();``object``instance``class``instances``class`**

 **因此，只要您为每个页面创建**单独** `object`的（也就是说`instance`），`class`您就应该能够做您想做的事。**

# rspec - 从 rspec 2.7 升级到 rspec 2.12 的问题

> ID：13431910
> 
> 赞同：0
> 
> 时间：2012-11-17T15:18:09.037
> 
> 标签：rspec, ruby-on-rails-3.2

我正在尝试将旧的（休眠 1 年）项目从 Rails 3.1 和 Rspec 2.7 升级到 Rails 3.2 和 Rspec 2.12。

对 Rails 3.2 的初始升级很顺利，应用程序可以正常工作，但是在 Rspec 下运行测试会产生很多警告：

```
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern 
will be no longer included automatically. Please define instance methods
directly in RSpec::Rails::TestUnitAssertionAdapter instead. 
```

网络搜索建议升级到 Rspec 2.8，因为这显然是 2.7 中的一个问题，该问题已得到修复。我让“捆绑更新”一直到最新版本（2.12.0），但现在在 2.7 中运行的测试在 2.12 下根本无法运行

问题出现在控制器测试中，当他们试图伪造登录时（几乎所有控制器操作都需要您登录才能执行任何操作）。

以前这是通过这种方法实现的`spec_helper.rb`

```
def test_login(user)
   controller.sign_in(user)
end 
```

它调用了一个方法`app/helpers/sessions_helper.rb`来进行实际的登录。

然而，现在它得到一个关于`controller`成为未定义变量的错误。某些结构似乎已经改变，但我正在努力发现什么，或者如何从控制器测试中实现登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:39:17.033

道歉 - 我最终自己找到了解释。

问题出在 Gemfile 中，其中包含：

```
group :development do
  gem 'rspec-rails', '>= 2.8.0'
end 
```

这适用于早期版本的 rspec，但现在不行。通过将其更改为：

```
group :test, :development do
  gem 'rspec-rails', '>= 2.8.0'
end 
```

然后做一个`bundle update`上面记录的问题神奇地消失了。

# mysql - mysql查询根据时间戳排列四个表中的数据

> ID：13431914
> 
> 赞同：0
> 
> 时间：2012-11-17T15:20:08.253
> 
> 标签：mysql

我正在尝试从四个表中获取有关“类型”的数据。类型可以是评论、封面图片更改、朋友请求接受等，但问题是我所做的查询无法通过重复所有类型和时间戳来工作。我提出的查询是

```
SELECT c.up_date, c.user_id, c.id, f.id,
       f.up_date, f.friend1, f.friend2, f.status,
       s.postdate, s.status, s.id, s.display_name, s.userid, s.userid1, s.type,
       c.type, f.type
FROM cover_pic c, wp_userstatus s, wp_friends f
WHERE s.userid = f.friend1
AND s.userid = c.user_id
AND f.status =3
AND c.user_id =4
ORDER BY s.postdate
LIMIT 0 , 30 
```

谁能帮我正确查询时间戳和类型

这是它给我的结果

![在此处输入图像描述](../Images/06b3c84bd01a8a1fe5e9ddc50b1ea171.png)

我想要的是

> 时间戳 userid_id id display_name 类型
> 
> 233232323 1 1 参数评论
> 
> 1212121212 1 2 参数封面图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:23:44.173

*也许*你想要一个`union`连接

```
(select distinct s.postdate as postdate, s.userid, c.id, c.type
 from wp_userstatus s
 join cover_pic c on s.userid = c.user_id)
union
(select distinct s.postdate, s.userid, f.id, f.type
 from wp_userstatus s
 join wp_friends f on s.userid = f.friend1)
order by postdate
limit 30 
```

真的很难说。

# javascript - 拉斐尔，点的动画

> ID：13431918
> 
> 赞同：0
> 
> 时间：2012-11-17T15:20:34.977
> 
> 标签：javascript, raphael

我有一个基于时间信息显示线条（x 和 y 坐标）的函数。x 和 y 坐标指定绘制点的位置，而时间表示各个点的时间戳（以毫秒为单位）。

目前，有一个显示如下行的功能

```
 <script type="text/javascript" src="https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael-min.js"></script>
    <script type="text/javascript">
        function drawLine(points) {
            var paths = ['M ' + points[0].x + ' ' + points[0].y];
            for (var i = 1; i < points.length; i++) {
                var p = points[i];
                paths.push(paths[i - 1] + ' L ' + p.x + ' ' + p.y);
            }
            var paper = new Raphael(document.getElementById('canvas_container'), 500, 500);  
            var line = paper.path(paths[0]);
            var next = 1;

            function animate() {
                if (paths[next]) {  
                    duration = points[next].t - points[next - 1].t        
                    line.animate({ path: paths[next] }, duration, 'linear', animate);
                    next++;
                }
            }
            animate();
        }
    </script> 
```

并且可以使用关联数组调用该函数，如下所示：

```
 drawLine([
                { x: 0, y: 0, t: 0 },
                { x: 100, y: 230, t: 1520 },
                { x: 210, y: 290, t: 3850 },
                { x: 150, y: 200, t: 5060 },
            ]); 
```

问题是，我怎样才能修改这个函数来显示点而不是线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:31:30.220

您可以添加一个 drawPoint 方法，该方法将获取一个具有`x`和`y`属性的对象

```
function drawPoint(point) {
    paper.circle(point.x, point.y, 5).attr('fill', 'red');
}; 
```

然后在比较`animate`之前从您的函数中调用它`points[next]`

```
drawPoint(points[next - 1]); 
```

这是 JSFiddle [http://jsfiddle.net/jaimem/2krgN/](http://jsfiddle.net/jaimem/2krgN/)

如果你不想要线条，那么你不需要路径

```
function drawPoints(points){
    var paper = new Raphael('canvas_container', 500, 500),
        idx  = 0;

    function animate(){
        if(points[idx]){
            var currP = points[idx],
                prevP = points[idx - 1],
                d     = currP.t - (prevP ? prevP.t : 0 );
            paper.circle(currP.x, currP.y, 1)
                 .attr('fill', 'red')
                 .animate({r:5}, d, animate);
            idx++       
        }
    }
    animate();
} 
```

递归`animate`回调可能有点难以理解/阅读，所以可能只想使用`setTimeout`. 您还可以将带有`id`元素的字符串传递给`Raphael`构造函数，库将为您找到 DOM 节点。

JS 小提琴：http: [//jsfiddle.net/jaimem/Q5G5y/2/](http://jsfiddle.net/jaimem/Q5G5y/2/)

# java - 在单个线程锁中将多个字符串插入到带有 TitledBorder 的 JTextPane 会导致程序锁定

> ID：13431928
> 
> 赞同：1
> 
> 时间：2012-11-17T15:21:38.080
> 
> 标签：java, swing, thread-safety, jtextpane, event-dispatch-thread

我在尝试将多个字符串插入到具有 TitledBorder 的 JTextPane 时遇到了一个**非常奇怪的问题（这很重要，问题似乎只发生在 TitledBorder 上，其他 Borders 或根本没有 Border 工作正常）来自线程。**我的测试代码的（对于这个问题）重要部分如下所示：

```
JTextPane myTextPane = new JTextPane();
myTextPane.setBorder(new TitledBorder("Some title"));
StyledDocument doc = myTextPane.getStyledDocument();
SimpleAttributeSet sas = new SimpleAttributeSet();
StyleConstants.setForeground(sas, Color.BLACK);

private void insertTwoStrings()
{
    new Thread(new Runnable()
    {
        @Override
        public void run()
        {
            docTest.insertString(docTest.getLength(), "first string ", sas);
            docTest.insertString(docTest.getLength(), "second string\n", sas);
        }
    }).start();
} 
```

现在问题来了： insertTwoStrings() 方法**有时**可以正常工作，但有时它会以一种锁定整个应用程序的方式**非常糟糕**地失败（我必须终止进程才能关闭应用程序）。所以我在调试器中打开程序并在那里复制问题，当有问题的线程被锁定时，我暂停它并仔细查看程序计数器位置：

![程序计数器的当前位置](../Images/87f964ed5f64cf70b1e9ad0580d7e7a8.png)

似乎这个 synchronized(this) 是我的问题的原因。这实际上是一个错误还是我犯了某种错误？

如果有人想复制这个，要发生问题，您必须满足以下三个条件：

1.  **从 Thread**将文本插入 JTextPane（即插入其 StyledDocument）
***   **在线程中多次**调用 StyledDocument.insertString(...) ，而不仅仅是一次*   JTextPane 必须有一个 TitledBorder**

 **执行线程*有时*仍然可以工作，但时不时会失败并锁定整个程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:50:15.757

正如其他人已经指出的那样，除非特定方法被记录为线程安全，否则 Swing 不是线程安全的。Swing 提供了几个实用程序方法和类，可以将消息传递给事件调度线程 - SwingUtilities 包含 invokeLater 和 invokeAndWait，SwingWorker 线程可以将“完成”的工作发送到回调。

```
// run will be executed on the EDT
SwingUtilities.invokeLater(new Runnable()
{
    @Override
    public void run()
    {
        docTest.insertString(docTest.getLength(), "first string ", sas);
        docTest.insertString(docTest.getLength(), "second string\n", sas);
    }
}); 
```

上面的代码将在 swings 事件调度线程上执行 run，因此请注意保持 run() 简短（快速读取），否则您的用户界面将慢到爬行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T15:32:16.713

*   甚至`Runnable#Thread`是正确的方法，但从未通知 EDT 的常见问题

表示任何带有`Document`, 模型的[JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

```
docTest.insertString(docTest.getLength(), "first string ", sas);
docTest.insertString(docTest.getLength(), "second string\n", sas); 
```

*   您对 Swing 中的[Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)有疑问，对于使用普通或在 Swing API 中实现的`"ThreadSafe"`方法（`setText("")`例如），此问题/将/可能相同`Thread``Runnable#Thread`

*   必须包裹`docTest...`成`invokeLater()`

*   不知道为什么会存在`synchonized`，那么可以更好地使用`invokeAndWait()`，

*   注意`invokeAndWait(`）必须从 EDT 中调用，如果`isEventDispatchThread`之前进行测试，否则会导致（一些异常）锁定当前 GUI，并且无法重用并且在某些情况下必须关闭当前 JVM

*   你可以使用`SwingWorker`，有一些方法以 EDT 为主题，例如`publish()`，`process()`和`done()`**

# jquery - 带或不带缩略图的 css 和 html 列表或 div 位置

> ID：13431939
> 
> 赞同：0
> 
> 时间：2012-11-17T15:23:07.997
> 
> 标签：jquery, html, css, list, position

我有一个页面将展示我们在几个主题上的专业知识。每个主题都包含一个标题、图像和一个简短列表。在页面内部，用户将看到所有主题的主题缩略图和标题，他们还将看到 1 个突出显示的主题（标题、完整图像和列表）。突出显示的主题被迭代，用户可以在主题标题上移动以更改突出显示的主题。每个主题的 html 是在 rails 中使用部分生成的，因此每个主题都作为单独的文件进行管理。

我有一个可行的解决方案，但有一些问题我想要一些指导。 [在这里摆弄](http://jsfiddle.net/twinturbotom/U68Wg/)

谢谢你的时间！

1.  CSS 和 HTML 问题...我的 6 个主题应该像现在一样在列表中还是作为 6 个 div？我的右列和左列的响应不同：更改顶级 div 宽度（.showScene 在 680 到 1000px 之间），您会看到右列文本居中，而不是与右图像保持对齐。CSS 应该是怎样的？
    在这种情况下，我对列表的一般策略是使用 :nth-child 扇区来创建和控制具有左右浮动的列。
2.  我的“缩略图”是使用 css 重新调整大小的大图像，可以吗，还是我真的需要创建缩略图大小的图像？每个大图像都会出现在页面上，那么为什么要加载更多的缩略图呢？如果我确实使用了缩略图，那么我将不得不将它与大图像一起添加到我的主题中？
3.  我使用 jQuery .clone() 将内容复制到突出显示的窗格中，这是最好的方法吗？我讨厌复制但没有克隆标题和缩略图被“移出”

CSS：

```
.showScene{width: 1000px; border: 2px solid black; height: 400px; position: absolute;}
#exp {
    position: relative;
    min-width: 700px;
    height: 400px;
    margin: 0px auto;
}
#exp > h1{
    text-align: center;
    font-weight: bold;
    margin-top: 2px;

       color: #669900;
   -webkit-text-fill-color: white; /* Will override color (regardless of order) */
   -webkit-text-stroke-width: 1px;
   -webkit-text-stroke-color: #669900;

}

#exp > ul {
    list-style-type: none;
    padding:0px;
    overflow: hidden;
    /*width: 700px;*/
    margin-top: -20px;

}
#exp > ul > li {
      float:left;
      width:30%;
      height: 120px;
      padding-top: 6px;
      padding-bottom: 6px;
      font-weight: bold;
      font-size: .8em;
}
#exp > ul > li img{
      width:30%;
      vertical-align: middle;
}
#exp > ul > li:nth-child(odd){
    margin-left: 3%;
}
#exp > ul > li:nth-child(odd) img{
    padding-right:10px;
}
#exp > ul > li:nth-child(even){
    float: right;
    margin-right: 10%;
}
#exp > ul > li:nth-child(even) h1{
    text-align: right;
}
#exp > ul > li:nth-child(even) img{
    position: relative;
    left: 95%;
}
.expSelected h1{
    color: #669900;
}
#expPane .expSelected  h1 {
    color: black;
}
.expList ul li {
    display:none;
}
.expList h1{
    font-size: 1.25em;
    display: inline;
    line-height: 80px;
}
.expList img {
    float: left;
    vertical-align: top;
}
#expPane{
    position: absolute;
    top: 10%;
    left:30%;
    right: 30%;
    height: 250px;
}
#expPane img{
    height: 100px;
}
#expPane .expList{
    width: 272px;
    margin: auto;
}
#expPane .expList ul li{
    display: list-item;
}
#expPane h1 {
    display: block;
    text-align: center;
}
#expPane img {
    float:none;
    text-align: center;
    width: 100%;
    height: 225px;
}
#expPane ul {
    margin-left: 20px;
} 
```

html:

```
<div class='sliderContent'>
    <ul>
        <li><div class='showScene'>
                <div id='exp'>
                    <h1>Our Expertise</h1>
                        <ul>
                            <li><div class='expList topic1'>
                                    <h1>Topic1 Header</h1>
                                    <img src='http://3.bp.blogspot.com/-uq1xArFbmAE/T5GjNmF-c7I/AAAAAAAAGNY/oRT4dS0y6Ic/s1600/Cool-Pictures1.jpg'>
                                    <ul>
                                        <li>key1</li>
                                        <li>key2</li>
                                        <li>key3</li>
                                    </ul>
                                </div>
                            </li>
                            <li><div class='expList topic2'>
                                    <h1>Topic2 Header</h1>
                                    <img src='http://2.bp.blogspot.com/-y_A2TCaEnZU/TxzbuvYiNhI/AAAAAAAAAZ4/fuMGkV3FEak/s1600/Cool.jpg'>
                                    <ul>
                                        <li>key1</li>
                                        <li>key2</li>
                                        <li>key3</li>
                                    </ul>
                                </div>
                            </li>
                            <li><div class='expList topic3'>
                                    <h1>Topic3 Header</h1>
                                    <img src='http://www.remodelpros.com/spaw/uploads/images/mr-roof-smiling.png'>
                                    <ul>
                                        <li>key1</li>
                                        <li>key2</li>
                                        <li>key3</li>
                                    </ul>
                                </div>
                            </li>            

                            <li><div class='expList topic4'>
                                    <h1>Topic4 Header</h1>
                                    <img src='http://3.bp.blogspot.com/-uq1xArFbmAE/T5GjNmF-c7I/AAAAAAAAGNY/oRT4dS0y6Ic/s1600/Cool-Pictures1.jpg'>
                                    <ul>
                                        <li>key1</li>
                                        <li>key2</li>
                                        <li>key3</li>
                                    </ul>
                                </div>
                            </li>
                            <li><div class='expList topic5'>
                                    <h1>Topic5 Header</h1>
                                    <img src='http://3.bp.blogspot.com/-uq1xArFbmAE/T5GjNmF-c7I/AAAAAAAAGNY/oRT4dS0y6Ic/s1600/Cool-Pictures1.jpg'>
                                    <ul>
                                        <li>key1</li>
                                        <li>key2</li>
                                        <li>key3</li>
                                    </ul>
                                </div>
                            </li>             
                            <li><div class='expList topic6'>
                                    <h1>Topic6 Header</h1>
                                    <img src='http://3.bp.blogspot.com/-uq1xArFbmAE/T5GjNmF-c7I/AAAAAAAAGNY/oRT4dS0y6Ic/s1600/Cool-Pictures1.jpg'>
                                    <ul>
                                        <li>key1</li>
                                        <li>key2</li>
                                        <li>key3</li>
                                    </ul>
                                </div>
                            </li>   

                        </ul>
                                            <div id='expPane'></div>
                </div>

            </div>
        </li>
    </ul>
</div> 
```

JS：

```
var actual = 1;

$(document).ready(function() {

    /* get all 'src' */
    links = $('#exp > ul > li > div');

    /* set first image */
    imgFirst(links);

    /* iterate images */
    startExp();
    /* hover images */
    imgHov();

});
/* set first image */
function imgFirst(links) {
    $('#expPane').html($(links[0]).clone());
};
//set interval
function startExp(){
    i = 0;
    startExpVar = setInterval(function() {
        imgIterate(links);
    }, 3000);
}
//stop interval
function stopExp(){
    clearInterval(startExpVar);
}
/* iterate images */
function imgIterate(links) {
    $('#expPane').fadeOut('slow', function(){
        ++i;
        if (i >= links.length){i = 0}
        $('#expPane').html($(links[i]).clone()).fadeIn('slow');
    });
};

/* hover images */
function imgHov() {
    links.hover(function() {
        var activeOne = $(this);
        activeOne.addClass('expSelected');
        stopExp();
        $('#expPane').fadeOut('fast', function(){
            $('#expPane').html(activeOne.clone()).fadeIn('fast');
        });
    }, function() {
        imgIterate(links);
        startExp();
        $(this).removeClass('expSelected');

    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:41:04.130

1.  我认为您当前的设置似乎工作正常，很容易确定列表的一部分与不是列表的一部分（仅在 UL 中查找比在 wrapperX 或给定类中查找 div 更容易）。
2.  您不必创建缩略图，但我认为这通常是个好主意。有时通过 CSS 执行此操作时可能会出现一些失真或颗粒感。
3.  克隆似乎是合法的

# php - 函数全局/静态中的计数器

> ID：13431944
> 
> 赞同：0
> 
> 时间：2012-11-17T15:23:44.283
> 
> 标签：php, static, yii

我希望每次调用函数 actionNewAnswer 时，计数器都会增加。但是现在，计数器总是 2。怎么了？

```
public function actionNewAnswer(){     
    static $count = 1;
    ++$count;

    $modelAntwoorden = $this->loadModelAntwoorden();

    $this->renderPartial('_formAnswer', array(
        'model' => new VraagAntwoord(), 
        'counter' => $count,
        'modelAntwoorden'=>$modelAntwoorden,
    ),false,true);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:32:48.837

`actionNewAnswer()`一次对服务器的请求只调用一次，下次它是新的

1、添加到配置

```
'cache' => 'CFileCache' 
```

2、在Controller类中添加const

```
const myStaticCount = 'myStaticCount'; 
```

3、添加到actionNewAnswer

```
$count = 0; // comment for zero +1
if (Yii::app()->cache->offsetExists(self::myStaticCount)) {
    $count = Yii::app()->cache->get(self::myStaticCount);
}
Yii::app()->cache->set(self::myStaticCount, ++$count); 
```

# ruby-on-rails-3 - 如何使用 Twitter Bootstrap 自定义 Rails 3 file_field 输入

> ID：13431945
> 
> 赞同：2
> 
> 时间：2012-11-17T15:23:52.270
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我正在使用 twitter 的 Bootstrap css 框架，并希望使文件上传字段看起来更好。使用回形针，我可以做一些简单的事情：

```
<%= asset_fields.file_field :asset %> 
```

这呈现：

```
<input id="recommendation_assets_attributes_3_asset" name="recommendation[assets_attributes][3][asset]" type="file" > 
```

我可以添加类，只是不确定在 Bootstraps 案例中什么最有意义。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:57:19.083

我只是浏览了一些网站，发现它是一个自定义控件，所以引导程序没有为它添加样式到核心。但是，幸运的是，有人做到了:)。看看这个[jasny bootstrap](http://jasny.github.com/bootstrap/javascript.html#fileupload)和[jquery 以](http://blueimp.github.com/jQuery-File-Upload/)使用样式引导程序上传。

# openlayers - 有人可以帮我让 WMSGetFeatureInfo 工作吗？

> ID：13431949
> 
> 赞同：3
> 
> 时间：2012-11-17T15:24:00.363
> 
> 标签：openlayers, wms

我是 Openlayers 的新手，非常感谢一些帮助 WMSGetFeatureInfo 工作。我尝试了几个示例，每次将其粘贴到我的代码中时，我都会得到相同的结果：当我单击以获取信息时，我的鼠标只是变成了等待符号。

我决定尝试完全复制这个 OpenLayers 示例：http: [//openlayers.org/dev/examples/getfeatureinfo-popup.html](http://openlayers.org/dev/examples/getfeatureinfo-popup.html)

我复制了源代码并将源代码从相对更改为绝对。我让它运行了——除了我有同样的问题！当我从网站运行示例时，我得到了弹出窗口。当我运行我的本地版本（见下文）时，当我点击地图时，我只会得到思考符号。我错过了什么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>GetFeatureInfo Popup</title>

<script src="http://openlayers.org/dev/OpenLayers.js">
</script>
<link rel="stylesheet" href="http://openlayers.org/dev/theme/default/style.css" type="text/css">
<link rel="stylesheet" href="http://openlayers.org/dev/examples/style.css" type="text/css">
<script>
OpenLayers.ProxyHost = "proxy.cgi?url=";

var map, info;

function load() {
    map = new OpenLayers.Map({
        div: "map",
        maxExtent: new OpenLayers.Bounds(143.834,-43.648,148.479,-39.573)
    });

    var political = new OpenLayers.Layer.WMS("State Boundaries",
        "http://demo.opengeo.org/geoserver/wms", 
        {'layers': 'topp:tasmania_state_boundaries', transparent: true, format: 'image/gif'},
        {isBaseLayer: true}
    );

    var roads = new OpenLayers.Layer.WMS("Roads",
        "http://demo.opengeo.org/geoserver/wms", 
        {'layers': 'topp:tasmania_roads', transparent: true, format: 'image/gif'},
        {isBaseLayer: false}
    );

    var cities = new OpenLayers.Layer.WMS("Cities",
        "http://demo.opengeo.org/geoserver/wms", 
        {'layers': 'topp:tasmania_cities', transparent: true, format: 'image/gif'},
        {isBaseLayer: false}
    );

    var water = new OpenLayers.Layer.WMS("Bodies of Water",
        "http://demo.opengeo.org/geoserver/wms", 
        {'layers': 'topp:tasmania_water_bodies', transparent: true, format: 'image/gif'},
        {isBaseLayer: false}
    );

    var highlight = new OpenLayers.Layer.Vector("Highlighted Features", {
        displayInLayerSwitcher: false, 
        isBaseLayer: false 
    });

    map.addLayers([political, roads, cities, water, highlight]); 

    info = new OpenLayers.Control.WMSGetFeatureInfo({
        url: 'http://demo.opengeo.org/geoserver/wms', 
        title: 'Identify features by clicking',
        queryVisible: true,
        eventListeners: {
            getfeatureinfo: function(event) {
                map.addPopup(new OpenLayers.Popup.FramedCloud(
                    "chicken", 
                    map.getLonLatFromPixel(event.xy),
                    null,
                    event.text,
                    null,
                    true
                ));
            }
        }
    });
    map.addControl(info);
    info.activate();

    map.addControl(new OpenLayers.Control.LayerSwitcher());
    map.zoomToMaxExtent();
}

</script>
</head>
<body onload="load()">
<h1 id="title">Feature Info in Popup</h1>
<div id="tags">WMS, GetFeatureInfo, popup</div>
<p id="shortdesc">Demonstrates the WMSGetFeatureInfo control for fetching information about a position from WMS (via GetFeatureInfo request). Results are displayed in a popup.       </p>
<div id="map" class="smallmap"></div>
<div id="docs"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:01:29.853

这听起来像是跨域请求的问题。对于 WMS getMap，请求是针对图像的，因此可以使用任何域。对于 GetFeatureInfo，请求是针对 XML 的，因此必须针对同一个域。

为了克服这个问题，OpenLayers 中有一个代理设置，[这应该会有所帮助](http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#ProxyHost)

基本上，您必须将设置`OpenLayers.ProxyHost`设置为指向代理 cgi 脚本，OpenLayers src 中提供了该脚本的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:26:40.227

我弄清楚我的例子做错了什么。我将 SCRIPT 和 LINK 引用从相对更改为绝对，但未更改以下内容：

```
OpenLayers.ProxyHost = "proxy.cgi?url="; 
```

当我将其更改为：

```
OpenLayers.ProxyHost = "http://openlayers.org/dev/examples/proxy.cgi?url="; 
```

该示例在我的 PC 上运行良好。

# windows-phone-7 - 如何让我的 Windows Phone 7 应用程序出现在 Windows Phone 8 市场中？

> ID：13431951
> 
> 赞同：0
> 
> 时间：2012-11-17T15:25:01.247
> 
> 标签：windows-phone-7, windows-phone-8

当我进行构建时，我一定做错了什么。我希望我的当前更新可用于 Windows Phone 7 和 Windows Phone 8。我正在使用 WP8 SDK 并以 OS 8 为目标。

当我上传我的 XAP 时，我得到了 AnyCPU.xap，现在我的应用程序仅在 WP8 上可用。我怎样才能让它在 WP7 上也可用？

![在此处输入图像描述](../Images/7c53ce292f46daffb4a84ba773e2c825.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T14:49:51.107

DevCenter 和 WP 运行时的工作方式如下：

*   您可以拥有一个 WP7 XAP，它可以在 WP7 和 WP8 上运行。
*   -或者- 您可以为 WP7 提供一个 XAP，为 WP8 提供一个（或多个）XAP。“或更多”部分用于多种分辨率。

但是，没有办法将在 VS2012 中编译的 WP8 项目并在 WP7 上运行。您不能在 WP7 上运行 WP8 XAP。考虑到这一点，这一点非常明显，因为 WP8 中使用的程序集在 WP7 上不可用。

因此，开发人员必须选择适用于他们的应用程序的跨 WP7 和 WP8 的代码共享模型：

1.  如果您的应用仅使用 WP7 功能集并且在 WP8 HD 上看起来不错，请使用 WP7 XAP。

2.  如果您的应用程序仅部分使用 WP8 功能集，请在 WP7 XAP 上创建，并共享代码库以创建具有 WP8 功能集的 WP8 XAP。

3.  如果您的应用程序必须具有 WP8 功能集（例如 NFC 或以蓝牙为中心的应用程序等），那么您显然不能针对 WP7 并且只能提交 WP8 XAP。

这是一个打印屏幕，演示了 DevCenter 支持在不同平台版本和不同分辨率上为同一应用程序提交多个 XAP： ![DevCenter 多 XAP 支持](../Images/98c4a3c6858e188932941de7823a24ad.png)

有关如何同时定位 WP7 和 WP8 的更多信息，请参阅[这篇诺基亚开发者文章](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html)。本文解释了如何在运行时和编译时在 WP7 和 WP8 之间共享代码，WP8 独有的新功能以及如何支持多种分辨率。我帮助撰写了那篇文章，所以希望你会发现它有用。有很多有用的技术可能并不明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T18:38:11.063

开发中心现在允许您为单个应用程序提交多个 xap 文件。

因此，您可以针对 7.* 提交一个版本，而针对 8.* 提交其他版本。例如

![Windows Phone 开发中心 多个 XAP 提交](../Images/05b8393d576eb6d3bc0db27912736791.png)

这允许您从一个应用程序同时定位两个平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:59:30.490

您需要重新上传 XAP 文件，并将`Target Windows Phone OS Version`Visual Studio 项目属性设置为`Windows Phone OS 7.1`

# sql - SQL 代替网页显示

> ID：13431955
> 
> 赞同：-1
> 
> 时间：2012-11-17T15:25:47.583
> 
> 标签：sql, codeigniter, wamp

我已经将一个 codeigniter 网站从我的旧计算机复制到我的新计算机，并复制了数据库。但是，当我在本地主机中导航到该站点时，我只会打印出 SQL

```
db->where($cell_name, $id); $this->db->delete($table_name); if (!is_array($tags)) { $tmp = array(); $tmp[] = $tags; $tags = $tmp; } if (!empty($tags)) { foreach($tags as $tag) { switch(gettype($tag)) { case 'integer': $this->db->set($cell_name, $id); $this->db->set('tag_id', $tag); $this->db->insert($table_name); break; case 'string': $tag = strtolower($tag); $results = $this->db->query('SELECT id FROM tag WHERE tag = \''.$tag.'\' LIMIT 1'); if ($results->num_rows() == 1) { $tag_id = $results->first_row()->id; } else { $this->db->set('tag', $tag); $this->db->set('permalink', url_title($tag, 'dash')); $this->db->insert('tag'); $tag_id = $this->db->insert_id(); } $this->db->set($cell_name, $id); $this->db->set('tag_id', $tag_id); $this->db->insert($table_name); break; } } } } function get_active($type, $id, $return_ids = true) { $ret = array(); switch($type) { case 'media': $table_name = 'media_tag'; $cell_name = 'media_id'; break; case 'post': $table_name = 'post_tag'; $cell_name = 'post_id'; break; } if (!$id) { $results = $this->db->query('SELECT tag.id, tag.tag, tag.permalink FROM '.$table_name.', tag WHERE tag_id = tag.id GROUP BY tag.id ORDER BY tag.tag'); if ($results->num_rows() > 0) { foreach($results->result() as $data) { if ($return_ids) $ret[] = $data->id; else $ret[] = (object) array('id' => $data->id, 'tag' => $data->tag, 'permalink' => $data->permalink); } } } else { $results = $this->db->query('SELECT tag.id, tag.tag, tag.permalink FROM '.$table_name.', tag WHERE '.$cell_name.' = '.$id.' AND tag_id = tag.id ORDER BY tag.tag'); if ($results->num_rows() > 0) { foreach($results->result() as $data) { if ($return_ids) $ret[] = $data->id; else $ret[] = (object) array('id' => $data->id, 'tag' => $data->tag, 'permalink' => $data->permalink); } } } return $ret; } } 
```

有谁知道这是否有一个简单的原因 - 例如我需要在 wamp 中打开一些设置，我完全不知所措，我的新旧计算机上的文件和数据库是相同的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:52:09.543

事实证明，我根本不允许 WAMP PHP 设置中的“短打开标签”

# ruby - 如何从 Ruby 控制我的 Dropbox 帐户？

> ID：13431960
> 
> 赞同：2
> 
> 时间：2012-11-17T15:26:41.937
> 
> 标签：ruby, dropbox

我阅读了 Dropbox SDK for Ruby 的文档，但找不到有关使用我自己的 Dropbox 帐户的示例。我看到的示例要求我从一个为我验证会话的随机用户那里获得一个 ACCESS_TOKEN。

我是用户！我只想开始上传和删除文件；而已。

我该如何做到这一点？

编辑：

片段

```
require 'dropbox_sdk'

APP_KEY = '******'
APP_SECRET = '*****'
ACCESS_TYPE = :dropbox

session = DropboxSession.new(APP_KEY, APP_SECRET)

#I don't want to do this, I just want to know the way of authenticate
#myself with some method that don't need authorization

#-------------------------------------------
session.get_request_token

authorize_url = session.get_authorize_url

puts "AUTHORIZING", authorize_url
puts "Please visit that website and hit 'Allow', then hit Enter here."
gets

session.get_access_token

client = DropboxClient.new(session, ACCESS_TYPE)
puts "linked account:", client.account_info().inspect 
```

# serial-port - 从处理到 Arduino 的串行写入发送损坏的数据

> ID：13431964
> 
> 赞同：5
> 
> 时间：2012-11-17T15:27:09.497
> 
> 标签：serial-port, arduino, processing

我是处理和串行通信的新手，我的问题似乎非常初级。我正在尝试将数据从处理发送到 Arduino，但似乎有些东西在翻译中丢失了。

在 Arduino 上，我正在运行这个超级简单的草图：

```
void setup()
{
  Serial.begin(9600);
}

void loop()
{
  if (Serial.available() > 0) Serial.println(Serial.read());
} 
```

目的是从串行读取一个字节，然后将其写回，这样我就可以看到发生了什么。使用附带的串行监视器测试它的行为与我预期的一样：输入“0”返回“48”。到目前为止，一切都很好。

当我运行这个处理草图时，事情开始出错：

```
import processing.serial.*;
Serial myPort;

void setup()
{
  //frameRate(10);
  myPort = new Serial(this, Serial.list()[4], 9600);
}

void draw()
{
  myPort.write("0");
} 
```

我希望这段代码以每秒十个条目的速率返回无穷无尽的“48”流，因为我知道这是默认帧速率。真正发生的事情是这样的：

```
48
48
488
48
48
48
48
48
48
48
48
48
48

488
48
48
48 
```

似乎每 10 个（给或取几个）字节就有一个被搞砸的好变化。我得到的不是“48”，而是“”、“488”、“4848”或“488”。更有趣的是，如果我取消注释 frameRate(10); 在我的处理脚本中，我希望绝对不会发生任何事情，因为我将 fps 从 10 设置为 10。相反，我开始看到这样的东西：

```
4
44
4848844
444448444844
4
44444444
844
444
844444
8
88
8
4488
84
48
4448444844
444 
```

所以基本上这些数字不再有意义了。

我花了相当长的时间将问题缩小到这个串行通信，并且围绕相关主题进行了几个小时的谷歌搜索并没有给我任何关于可能发生的事情的提示。任何指向进一步阅读或尝试的东西都将不胜感激。

我正在使用今天下载的最新版本的 Processing，我的系统是运行 Mountain Lion 的 MBP，安装了所有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:09:41.833

经过一些进一步的测试，似乎在从处理中发送字节时打开串行监视器会因为未知原因而搞砸。我假设在串行总线优先级方面存在某种争执，数据最终被破坏。

解决方法：不要尝试使用多个程序同时读取串口数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T09:50:19.787

正如您所知道的，如果您有多个程序试图从串行读取数据，则可能会导致此类问题。

您还可以试用 Software Serial Arduino 库，它允许您将任何引脚用作串行引脚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T16:23:28.693

尝试替换：

```
myPort.write("0"); 
```

和：

```
myPort.write("0")-'0'; 
```

因为

ascii 0 --> 48
ascii 1 --> 49
。
.
.

# python - python中的多个tor出口节点

> ID：13431969
> 
> 赞同：1
> 
> 时间：2012-11-17T15:27:35.507
> 
> 标签：python, tor

我正在开发一个需要使用不同的 Tor 出口节点的应用程序。如何通过 Tor 的单个实例创建多个连接？

我已经找到了这个，但我发现它有点“脏”（但绝对有效的解决方案）。 [http://blog.databigbang.com/distributed-scraping-with-multiple-tor-circuits/](http://blog.databigbang.com/distributed-scraping-with-multiple-tor-circuits/)

这是可能的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T02:27:03.353

您始终可以生成“新身份”。

检查这两个问题：

1.  [在python中获取新IP](https://stackoverflow.com/questions/16376987/get-new-ip-in-python)

2.  [如何在终端中请求新的 TOR 身份](https://stackoverflow.com/questions/16987518/how-to-request-new-tor-identity-in-terminal)

您可以冻结 Exit 节点，但可能不能冻结多个节点。

另一方面，您可以通过*torrc*中的枚举来限制出口节点的数量。

# php - php按字符切割字符串

> ID：13431971
> 
> 赞同：0
> 
> 时间：2012-11-17T15:27:41.383
> 
> 标签：php

> **可能重复：**
> [php字符串函数在最后一次出现字符之前获取子字符串](https://stackoverflow.com/questions/5939412/php-string-function-to-get-substring-before-the-last-occurrence-of-a-character)

我有字符串

```
'storage/product/home_decor/living_room/livingroom/7ce3da03b6854283bdd0b8e33b3e556a.11.09.2012.03.42.33.jpg' 
```

如何通过 / 用 php 剪切最后一个字符串？

我希望我的输出是

```
'storage/product/home_decor/living_room/livingroom/' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:37:02.037

如果您想保留最后一个 / 与您的结果，请使用以下代码：

```
$string = 'storage/product/home_decor/living_room/livingroom/7ce3da03b6854283bdd0b8e33b3e556a.11.09.2012.03.42.33.jpg';
$min = substr($string, 0, strrpos($string, '/') + 1);
echo $min; //output : storage/product/home_decor/living_room/livingroom/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:30:12.650

```
substr($string, 0, strrpos($string, '/')); 
```

# node.js - node.js 服务器没有响应

> ID：13431974
> 
> 赞同：3
> 
> 时间：2012-11-17T15:28:03.930
> 
> 标签：node.js

我正在从 node.js 主页尝试这个简单的演示：

```
var http = require('http');
http.createServer(function (req, res) {
res.writeHead(200, {'Content-Type': 'text/plain'});
res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

我已经在其安全组中打开了亚马逊 ec2 (1337) 上的端口。

```
[root@domU-12-31-38-01-8A-8D servers]# /usr/local/bin/node nodeexample.js
Server running at http://127.0.0.1:1337/ 
```

我什么也没得到，但典型的服务器没有响应。请帮帮这个菜鸟

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T15:49:08.450

您正在收听`127.0.0.1`which 使节点仅收听环回接口，并且只允许*从 localhost 本身*访问它。

如果您`0.0.0.0`改为收听，您将收听机器的*所有*网络接口，并让您可以通过 Internet 访问机器使用的任何公共 IP。这可能就是你想要的。

# php - PHP - 隐藏输入类型以获取 id

> ID：13431975
> 
> 赞同：1
> 
> 时间：2012-11-17T15:28:12.113
> 
> 标签：php, html, select, hidden

我希望当用户选择一个学生姓名以获取学生 ID 作为隐藏输入以在下一页中使用它时，问题是当我将其添加到我的代码中时，它没有显示所有学生列表以供选择，它只显示一个学生姓名（存储在数据库中的第一个） m 有什么想法吗？！我的代码

```
 $sql = "SELECT s.Sname, e.PID , s.SID
                          from student AS s
                          INNER JOIN evaluator AS e                       
                          WHERE (e.EID1 = '$id' AND s.PID = e.PID) OR  (e.EID2 = '$id' AND s.PID = e.PID)
                          GROUP BY s.Sname  ";
         $result = mysql_query ($sql, $connection);

         echo "<tr><th >Student Name <font size='4'></font></th>";
         echo "<td><select id='Sname' name='Sname' >";

        echo "<option value='' selected='selected'>--</option> ";

        while( $row = mysql_fetch_array($result))
   {

        echo "<option value='$row[Sname]' >$row[Sname]</option> ";
        echo " <input type ='hidden' name='SID' value='".$row['SID']."'  >;

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:37:25.707

问题是您正在创建多个`<input>`，`name='SID'`而接收页面可能只接受第一个。您需要将它们创建为数组而不是`[]`

```
echo " <input type ='hidden' name='SID[]' value='".$row['SID']."'  ></option>";
//----------------------------------^^^^^^ 
```

在接收页面中，检查内容`var_dump($_POST['SID'])`。它将是一个数组，您可以使用`foreach()`.

我注意到你嵌套`<input>`在 `<option>`s 中。这可能不是一个好方法（我认为它不是有效的 HTML）。相反，将所有内容存储`SID`在一个数组中并循环两次以创建您的输入。

```
$ids = array();
while( $row = mysql_fetch_array($result)) {
   // First make an array of ids
   $ids[] = $row;
} 
```

然后循环两次，构建选择选项和隐藏输入：

```
// <select> opened above...
// Inside the <select> tag already opened...
foreach ($ids as $id) {
  echo "<option value='$id[Sname]' >$id[Sname]</option> ";
}
// Close the <select>
// </select>

// Then later, loop to build the hidden inputs in the array format
foreach ($ids as $id) {
  echo " <input type ='hidden' name='SID[]' value='".$id['SID']."'  >";
} 
```

* * *

*关于有效 HTML 的主题......*我还看到那里有一个流浪`</font>`者。 `<font>`已弃用，您应该使用 CSS 来定义字体属性。

### 评论后更新：

如果您想将 SID 与值 (Sname) 一起传递，`<option>`那么最容易`<input>`完全跳过隐藏。相反，在`<option value>`属性中传递两个值，用`|`. 在接收它的 PHP 代码中，`explode()`它们返回两个值：

```
// In your original while loop:
// The value consists of both SID and Sname, separated by |
// Now, you have no need for the <input type='hidden' name='SID'> at all. Remove them.
echo "<option value='$row[SID]|$row[Sname]' >$row[Sname]</option> ";

// Then in the PHP script which receives the form values, explode() them:
// Both values come from the <select name='Sname'>
list($SID, $Sname) = explode("|", $_POST['Sname']);
// Now your variables $SID and $Sname hold the correct values
// If you need to reuse them, store into `$_SESSION
session_start();
$_SESSION['SID'] = $SID;
$_SESSION['Sname'] = $Sname;

// On other scripts, to read the values
session_start();
echo $_SESSION['SID']; 
```

如果您不熟悉如何使用`$_SESSION`，请查看[基本使用手册](http://us3.php.net/manual/en/session.examples.basic.php)。长话短说，您必须调用`session_start()`每个访问 的脚本`$_SESSION`，并且必须在脚本生成任何输出（包括空格）之前执行*此*操作。这是在脚本之间共享数据的标准方法。

# objective-c - 带有透明导航栏的可见按钮

> ID：13431976
> 
> 赞同：1
> 
> 时间：2012-11-17T15:28:12.910
> 
> 标签：objective-c, ios

我见过几个具有完全透明导航栏但带有可见按钮的应用程序，我似乎找不到任何不会使按钮不可见的东西。我确定他们使用 UINavigationController 作为导航栏，因为它具有与淡入淡出相同的动画，什么不是。

我目前在 ViewDidLoad 和 ViewDidAppear 中使用此代码来隐藏或显示导航栏，因为它不应该在第一页上-

```
[self.navigationController setNavigationBarHidden:NO animated:YES]; 
```

这个代码的透明度：

```
[self.navigationController.navigationBar setAlpha:0.0]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T17:22:31.947

创建一个不`UINavigationBar`包含任何方法的子类，除了`drawRect:`. 如果需要，将自定义绘图代码放在那里，否则将其留空（但实现它）。

接下来，将`UINavigationController`的导航栏设置为此子类。在代码中使用`initWithNavigationBarClass:toolBarClass:`，或者如果您正在使用故事板/笔尖，则只需在 Interface Builder 中更改它（它是侧面层次结构中 UINavigationController 的子类）。

最后，获取导航栏的引用，以便我们可以在包含的视图控制器中配置`self.navigationController.navigationBar`它`loadView`。将导航栏设置`translucent`为`YES`和。下面的例子。`backgroundColor``[UIColor clearColor]`

```
//CustomNavigationBar.h
#import <UIKit/UIKit.h>

@interface CustomNavigationBar : UINavigationBar
@end 
```

* * *

```
//CustomNavigationBar.m
#import "CustomNavigationBar.h"

@implementation CustomNavigationBar

- (void)drawRect:(CGRect)rect {}

@end 
```

* * *

```
//Put this in the implementation of the view controller displayed by the navigation controller
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationController.navigationBar.translucent = YES;
    [self navigationController].navigationBar.backgroundColor = [UIColor clearColor];
} 
```

* * *

这是模仿瘟疫的结果的屏幕截图。

![在此处输入图像描述](../Images/aee258357a7e823b7a78ce2f5eef6845.png)

绘制了蓝色边框`drawRect:`以向您显示 UINavigationBar 存在，而不仅仅是按钮和标签。我`sizeThatFits:`在子类中实现了使条更高。按钮和标签都是 UIView，包含作为 UIBarButtonItems 放置在栏中的正确 UI 元素。我首先将它们嵌入到视图中，以便我可以更改它们的垂直对齐方式（否则它们在我实现时“卡”在底部`sizeThatFits:`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T05:23:17.173

要使导航栏透明，请使用以下代码：

```
self.navigationController.navigationBar.backgroundColor = [UIColor clearColor];
self.navigationController.navigationBar.tintColor = [UIColor clearColor];
self.navigationController.navigationBar.translucent = YES; 
```

在此之后，使用以下属性将导航栏的背景图像设置为与其后面的视图相同：

```
[self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"SAMPLE.jpg"] forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T04:33:18.500

```
self.navigationController.navigationBar.translucent = YES; // Setting this slides the view up, underneath the nav bar (otherwise it'll appear black)
const float colorMask[6] = {222, 255, 222, 255, 222, 255};
UIImage *img = [[UIImage alloc] init];
UIImage *maskedImage = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(img.CGImage, colorMask)];

[self.navigationController.navigationBar setBackgroundImage:maskedImage forBarMetrics:UIBarMetricsDefault];
//remove shadow
    [[UINavigationBar appearance] setShadowImage: [[UIImage alloc] init]]; 
```

# javascript - 下拉动画联系人框

> ID：13431980
> 
> 赞同：1
> 
> 时间：2012-11-17T15:28:45.740
> 
> 标签：javascript, animation, popup, contact

我整天都在寻找一种方法来制作类似于此网站上的联系表格：http: [//45royale.com/](http://45royale.com/) 如果您单击联系按钮，黑色背景会淡入，并且从下拉菜单使用轻松功能。我一直在挑选代码，试图看看该怎么做，但我被卡住了，我也一直在寻找其他 javascript 弹出窗口，但到目前为止，他们似乎只使用 php 作为表单，但是这个调用的是 html。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:52:47.387

这是示例中的形式：http: [//jsfiddle.net/ep39v/3/](http://jsfiddle.net/ep39v/3/)。来源：

**HTML**

```
<div class="form"></div>
<button id="showFormBtn">Show form</button>
​ 
```

**JavaScript**

```
var form = $('.form');

$('#showFormBtn').click(function () {
    fadeBackground(showForm);
});

(function () {
    form.css({
        top: -form.height(),
        left: ($(document.body).width() - form.width()) / 2
    });
}());

function fadeBackground(callback) {
    var background = $('<div class="background"></div>');
    $(document.body).append(background);
    background.fadeTo(300, 0.5, function () {
        if (typeof callback === 'function') {
            callback();
        }
    });        
}

function showForm() {
   var form = $('.form');
    form.animate({ top: 10 }, 1500, 'easeOutElastic');
}
​ 
```

**CSS**

```
.form {
    width: 30%;
    height: 40%;
    background: black;
    position: absolute;
}
body {
    height: 100%;
}
.background {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    background: black;
    opacity: 0;
}​ 
```

可能你只需要改变[easing](http://jqueryui.com/effect/)。

# jquery - 保存数组中选定元素的值

> ID：13431983
> 
> 赞同：0
> 
> 时间：2012-11-17T15:29:27.297
> 
> 标签：jquery

我想将选定的项目保存到数组中。

例如：

```
 var list = $('ul.theList li'),
           result = $('div#result'); // other div
           content;

 for( var i=0; i < list.length; i++ ){
       content[i] = $('ul.theList li')[i];
 }

 $(result).text(content); // the result 
```

这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T15:33:26.397

有两个问题，首先您没有将 定义`content`为数组，并且使用该代码您可能应该定义数组元素应如何连接：

```
 var list = $('ul.theList li'),
           result = $('div#result'),
           content = [];

 for( var i=0; i < list.length; i++ ){
       content.push($('ul.theList li:eq(' + i + ')').text());
       /* or:
       content.push($('ul.theList li').eq(i).text());
       */
 }

 $(result).text(content.join(', ')); 
```

[`:eq()`使用选择器的JS Fiddle 演示](http://jsfiddle.net/davidThomas/TekzQ/)。

[JS Fiddle 演示使用`.eq()`方法](http://jsfiddle.net/davidThomas/TekzQ/1/)。

我曾经`.push()`将`li`（我在这里假设您*想要*文本而不是节点本身）的文本插入到`content`数组中，而不是显式定义索引。

参考：

*   [`Array.push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push).
*   [`:eq()`选择器](http://api.jquery.com/eq-selector/)。
*   [`.eq()`方法](http://api.jquery.com/eq/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:35:35.753

现在更好地使用 jQuery

版本 1

```
var list = $('ul.theList li'),

$('#result').text(list.text()); 
```

第 2 版

```
var list = $('ul.theList li');
list.each(function(i) {
  $('#result').append(i+".: "+$(this).text()+"<br/>");
}); 
```

# java - 如何在我的 Web 服务中创建自定义 JSON/XML 响应

> ID：13431986
> 
> 赞同：0
> 
> 时间：2012-11-17T15:29:44.563
> 
> 标签：java, jakarta-ee, jaxb, jax-rs

我正在使用 JAX-RS 创建一个 Web 服务。我知道您可以使用 JAXB 注释对域模型进行注释，然后向后倾斜并观察整个类被转换为 XML/JSON。但是，这并不适合我的应用程序中的所有场景。将类编组为 XML 并不总是合适的。有时我只需要一些字段等，而且我还希望能够动态添加未在域模型中表示的自定义元素。

你会怎么做？我需要为此使用其他框架吗？我刚找到GSON，值得一看吗？我的资源的 XML 表示并不那么重要。如果我使用 GSON，Web 服务应该响应什么？你只是使用 String 作为返回类型吗？

***伪代码，还没看GSON。***

```
@Produce("application/json")
public String someMethod() {
   return gson.toJSON();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:46:30.577

在您具有多变响应类型的情况下，通常最好使用 javax.ws.rs.core.Response 作为返回。这使您可以在运行时完全控制确定将被包装和返回的实际实体。

然后，您可以在调用资源方法时决定返回核心业务对象、业务对象的包装器或自定义序列化版本（作为字符串）。粗略的伪代码：

```
@Produce("application/json")
public Response someMethod() {

    switch(mySpecialCase) {
        case 1:
            return Response.ok(coreEntity).build(); break;
        case 2:
            return Response.ok(new LiteEntity(coreEntity)).build(); break;
        case 3:
            return Response.ok(Util.toGSON(coreEntity).toString()).build(); break;
    }
} 
```

这种方法的一个优点是服务器端拦截器仍然会触发并在您的实体对象上执行转换，因此您仍然可以利用动态序列化到 JSON 和 XML，但同时您可以规避转换，通过使用 String 作为实体类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:46:51.093

您不应该返回字符串，而是返回类型。
例如：

```
@Produces(MediaType.APPLICATION_JSON)
public Person String getPerson() {
  return personDao.getPerson();
} 
```

请在以下位置添加依赖项（例如通过 maven）：
jersey-json jar
您还应该更改您的 web.xml，以在 Jersey 开始支持 JSon，通过以下方式：

```
<init-param>
  <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
  <param-value>true</param-value>
</init-param> 
```

请记住，我的解决方案不需要对 Person 类执行特殊注释。

# spring - 将 displaytag 与 Spring 和 tiles 2.0 一起使用

> ID：13431988
> 
> 赞同：0
> 
> 时间：2012-11-17T15:30:10.633
> 
> 标签：spring, jsp, tiles, displaytag

我需要一点帮助。我有一个使用 Spring MVC 和磁贴 2 的 Web 应用程序，我昨天添加了 displaytag，但是当我想以任何格式导出表时，我会重定向到一个页面，其中包含一行中的表数据。

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>ResponseOverrideFilter</filter-name>
    <filter-class>org.displaytag.filter.ResponseOverrideFilter</filter-class>
</filter>

<!-- Filter mapping for the export -->

<filter-mapping>
    <filter-name>ResponseOverrideFilter</filter-name>
    <url-pattern>*.do</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>ResponseOverrideFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

 <!-- Filter for the export, need that when using Struts and tiles -->

<filter>
<filter-name>CharacterEncodingFilter</filter-name>
<filter-class>
org.springframework.web.filter.CharacterEncodingFilter</filter-class>
<init-param>
<param-name>encoding</param-name>
<param-value>UTF-8</param-value>
</init-param>
</filter>
<filter-mapping>
<filter-name>CharacterEncodingFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>
</web-app> 
```

这是我的jsp文件

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@page contentType="   ;charset=UTF-8" pageEncoding="UTF-8"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display" %>

<html>
<head>
<title><spring:message code="label.listeggrafo" /></title>

<style type="text/css">
.pagingItem {
 font-weight: normal;
text-decoration: none;
color: #747474;
margin: 0 2px;
padding: 0 2px;
background-color: #eeeeee;
border: 1px solid #bababa;
font-size: 0.9em;
line-height: 1.5em;
}
.pagingItemCurrent {
padding: 0 2px;
margin: 0 2px;
font-weight: normal;
color: #FFFFFF;
background-color: #bfbfbf;
border: 1px solid #bfbfbf;
font-size: 0.9em;
}
</style>
</head>
<body>
<h1><spring:message code="label.listeggrafo" /></h1>

<display:table name="eggrafa" class="table" requestURI="" id="eggrafa" export="true" pagesize="10">
<display:column property="aa" sortable="true" href="update.html" media="html"
    paramId="aa" paramProperty="aa" titleKey="label.aa"/>
<display:column property="diabathmisi" sortable="true"  titleKey="label.diab"/>
<display:column property="apostoleas" sortable="true" titleKey="label.apostol"/>
<display:column property="tautotitaeg" sortable="true" titleKey="label.tauteg"/> 
```

```
<display:setProperty name="export.pdf.filename" value="ActorDetails.pdf"/>
<display:setProperty name="export.excel.filename" value="ActorDetails.xls"/>

</display:table>

</body> 
```

这是我的控制器

```
 @RequestMapping(value = "/listeggrafo" , method = RequestMethod.GET)
    public ModelAndView listeggrafo(@ModelAttribute("eggrafo") Eggrafo eggrafo,@ModelAttribute("typoi") TypoiEggrafou typoi,HttpSession session,HttpServletRequest request) {
         if(session.getAttribute("name")!=null){

            Map<String, Object> model1 = new HashMap<String, Object>();
            model1.put("eggrafa",  articleService.listeggrafa(session.getAttribute("name").toString()));

                            return new ModelAndView("listeggrafa",model1);

        }else{
            return new ModelAndView("redirect:/articles/login.html");
        }
    } 
```

当我选择以任何格式导出时，没有显示下载，只将我重定向到一个页面

```
http://localhost:8080/Spring3Hibernate/articles/listeggrafo.html?d-1331701-e=3&6578706f7274=1 
```

有谁知道为什么会这样？当我在网上寻找时，有人说这是瓷砖的问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:04:40.787

可能是 ResponseOverrideFilter 的 url 模式不正确。请尝试遵循 url 模式。

```
<filter>
    <filter-name>ResponseOverrideFilter</filter-name>
    <filter-class>org.displaytag.filter.ResponseOverrideFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ResponseOverrideFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

另外，请检查在渲染时为 displayTag 生成了什么 url？您可能需要`requestURI`为`<displayTag>`

# wpf - C# WPF 使用点在墨水画布中进行描边

> ID：13431990
> 
> 赞同：3
> 
> 时间：2012-11-17T15:30:14.437
> 
> 标签：wpf, points

我想用一组点在水墨画布上画一个笔触。如何转换`StylusPointCollection`或点成`StrokeCollection`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T15:53:24.170

你真的是这个意思`Stroke`吗？

您可以简单地使用的[构造函数](http://msdn.microsoft.com/en-us/library/ms522848%28v=vs.85%29.aspx)`Stroke`从`StylusPointCollection`.

```
public Stroke (
    StylusPointCollection stylusPoints
) 
```

# json - 如何合并两个 JsValue？

> ID：13431992
> 
> 赞同：0
> 
> 时间：2012-11-17T15:30:15.123
> 
> 标签：json, scala

我有以下内容：

```
abstract class Super(val m0: Member) {
  def toJson: JsValue = Json.toJson(Map(("m0", m0.toJson)))
}

class Sub(m0: Member, m1: Member) extends Super(m0) {
  def toJson: JsValue = ??? // should use super.toJson
} 
```

如何定义 Sub.toJson 以便它可以重用 Super.toJson 并产生：

```
// assuming m0.toJson is "member0" and m1.toJson is "member1"
{
  "m0": "member0",
  "m1": "member1"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:32:15.880

这假设 super.toJson 返回一个 JsObject 因为我们不知道该成员的密钥。

```
class Sub(m0: Member, m1: Member) extends Super(m0){
  def toJson: JsValue = {
    (super.toJson, Json.toJson(Map(("m1", m1.toJson)))) match {
      case (mm0: JsObject, mm1: JsObject) => mm0 ++ mm1
      case _ => JsNull
    }
  }
} 
```

# c# - 任何 url 的 MVC3 路由

> ID：13431994
> 
> 赞同：-1
> 
> 时间：2012-11-17T15:30:38.073
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

> **可能重复：**
> [如何正确处理 ASP.NET MVC 中的 404？](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc)

假设我有一个网站 www.microsoft.com

我尝试打开网址

```
www.microsoft.com/anytext
www.microsoft.com/anytext/anynumber
www.microsoft.com/anytext/anynumber/anything 
```

那么如何捕获这些类型的 url 并显示 PageNotFound 部分视图或视图

如果您需要更多详细信息，请告诉我

这是我的路线：

```
routes.MapRoute("PrivacyAction", "Privacy", new { controller = "Home", action = "Privacy" });
routes.MapRoute("LegalAction", "Legal", new { controller = "Home", action = "Legal" });
routes.MapRoute("AboutUs", "AboutUs", new { controller = "Home", action = "AboutUs" });
routes.MapRoute("Advertising", "Advertising", new { controller = "Home", action = "Advertising" });
routes.MapRoute("Contact", "Contact", new { controller = "Home", action = "Contact" });
routes.MapRoute("Reputation", "Reputation", new { controller = "Home", action = "Reputation" });

routes.MapRoute(
  "Users", // Route name
  "{controller}/{action}/{id}/{slug}", // URL with parameters
  new { controller = "User", action = "List", id = UrlParameter.Optional, slug = UrlParameter.Optional }); // Parameter defaults

routes.MapRoute(
  "Default", // Route name
  "{controller}/{action}/{id}", // URL with parameters
   new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults

routes.MapRoute("Error", "{*url}", new { controller = "Error", action = "404" }); 
```

收到错误：

找不到路径“/anytext”的控制器或未实现 IController。

堆栈轨道：

```
at System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType)
   at System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName)
   at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<BeginProcessRequest>b__2()
   at System.Web.Mvc.SecurityUtil.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust[TResult](Func`1 func)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T15:33:57.393

在您的路线集合中添加一条捕获所有路线作为最后一条路线

```
routes.MapRoute(
    "Catchall", // Route name
    "{*url}", // URL with parameters
    new { controller = "YourController", action = "YourAction" },
    null,
    new[] { "YourNamespace" }); 
```

**编辑：**

添加这样的路由将捕获与任何先前路由不匹配的所有请求。