# StackOverflow 问答 13120000-13120999

# java - Java 文档模板

> ID：13120012
> 
> 赞同：2
> 
> 时间：2012-10-29T10:41:10.150
> 
> 标签：java, eclipse, javadoc, sts-springsourcetoolsuite

我正在尝试添加 Java 注释，并且已用于该 Java 文档模板和 STS 工具：在 STS 中，我在 Java 文档模板中使用该配置：-

```
/**
 * Description: 
 * Name of Project: ${project_name}
 * Created on: ${date} ${time}
 * Modified on: ${date} ${time}
 * @author ${user}
 * Version: 1.0
 * ${tags}
 */ 
```

在我的 Java 文件中显示以下内容。

```
/**
 * Description: 
 * Name of Project: CabFMS
 * Created on: Oct 29, 2012 4:05:38 PM
 * Modified on: Oct 29, 2012 4:05:38 PM
 * @author tgupta1
 * Version: 1.0
 */ 
```

在这里，我想像 , , 等一样`date`动态`time`更新`user`版本`project_name`。

请建议我，有没有办法或者我们需要手动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:02:45.487

我认为[JAutoDoc](http://jautodoc.sourceforge.net/)插件可能会帮助您重新生成源文件的所有标题（如果您正在搜索的话）。

顺便说一句，包括创建/修改/作者在内的任何源版本控制系统（如[SVN](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)、[Git](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)或[Mercurial](http://mercurial.selenic.com/wiki/KeywordExtension) ）都可以轻松自动地完成。然而，它们的使用是[非常不鼓励](http://thread.gmane.org/gmane.comp.version-control.git/44750)的（它只会在 diff 时引起太多的噪音）。

# php - 未知的 MySQL 服务器主机正在启动 (0)

> ID：13120015
> 
> 赞同：1
> 
> 时间：2012-10-29T10:41:15.900
> 
> 标签：php, mysql

我将 csv 文件内容放入数据库。我的脚本将首先检查 csv 文件是否存在于特定位置，如果是，它将被执行并更新表格。为此，我将以下查询保存在一个文件（6sql.sql）中

```
LOAD DATA INFILE "($_GET["FileName"]) 
INTO TABLE test.LoadedEmployee 
FIELDS TERMINATED BY "," 
ENCLOSED BY '' ESCAPED BY `\` 
LINES TERMINATED BY "\r\n" STARTING BY '' 
```

( `$_GET["FileName"]`) 将获得用户输入）

& 从 cmd 提示符，我正在尝试运行 cmd

```
mysql -u root -pdbase -hlocalhost -t -vvv -e "source C:\6sql.sql" 
```

但我得到以下错误

> 错误：第 1 行的错误 2005 (HY000)：未知的 MySQL 服务器主机 'STARTING' (0)

# mysql - DBIx::Class 从另一个表更新一个表

> ID：13120018
> 
> 赞同：1
> 
> 时间：2012-10-29T10:41:32.110
> 
> 标签：mysql, dbix-class

我有一个直接在 MySQL 中运行良好的 SQL 查询，但我正在努力将其转换为通过 DBIx::Class 使用，我在这里简化了查询

```
UPDATE table1, table2
    SET table1.field1 = SOMEFUNC( table1.field4 / table2.field2 )
    WHERE table1.id = table2.id
        AND table1.field3 = table2.field3
        AND table2.field2 IS NOT NULL
        AND table2.field2 > 0; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T13:07:55.243

在类似的情况下，我通常在相关表上执行搜索。在您的情况下，您有两个结果源：**table1**和**table2**。**table1与名为***table2的表***table2**（很可能）有关系。因此，现在您使用此关系*table2在***table2**中执行搜索。

 ****```
my $resultset = $schema->resultset('table1')->search_rs(
   {
      me.field3 => table2.field3,
      table2.field2 => {'!=', '' },
      table2.field2 > 0
   },
   {
      'join' => 'table2',
      'select' => ['me.field1', 'me.field4', 'table2.field2', 'me.field4' / 'table2.field2' ],
      'as' => ['field1','field4', 'field2', 'division_result']
   }
);

while ( my $this_res_row = $resultset->next ) {
   ## Presuming somefunc is a perl subroutine
   $this_res_row->update( { field1 => somefunc( $this_res_row->get_column('division_result') ) } );
} 
```

也许这是您提出的解决方案，我认为不可能在单个 dbic update() 语句中执行您想要的操作。不幸的是，每个 update() 语句都会单独访问您的数据库。

顺便说一句，我认为通过**field3**在同一张表上创建第二个联合不是一个好主意，您已经通过**id**字段完成了它。为什么你需要另一个？

**或者**，我认为这是一个更好的主意，是使用数据库触发器来实现您的代码。

请注意，我没有测试过代码，它可能包含一些错误，但你必须掌握如何得到你想要的东西的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T09:15:20.713

使用 *_related 方法怎么样？****

# ruby-on-rails - 使用与 after_save 类似的方法声明处理程序和处理错误

> ID：13120024
> 
> 赞同：1
> 
> 时间：2012-10-29T10:42:12.930
> 
> 标签：ruby-on-rails, error-handling

我希望将少数对象中的错误记录到数据库表中，比如说“错误”。

理想情况下，我想声明它，以便它可以以类似于“验证”或“attr_accessible”的方式添加到对象定义中。例如：

```
def SomeObject

    validate: :someMember

    on_error: :someCallback

    def someMethod

    end
end 
```

我将从哪里开始实施这种性质的事情，或者是否有一种普遍接受的方法来做这种事情？

稍微扩展一下：

假设我解析了一个文件，其内容定义了一个 ActiveRecord 扩展 (ActiveRecord::MyClass)，并且发生以下错误之一。

```
1\. Type mismatch: self.someMember is STRING, expected BOOLEAN.
2\. File badly formatted. Some line isn't formatted as expected.
3\. Validation failed (ActiveRecord) 
```

对于这些错误，我想使用（通常）位于对象定义顶部的指令类型语法来记录这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:20:19.617

听起来您正在寻找[Observer](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)。为您的班级创建一个观察者，然后使用`after_validation` [活动记录回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)来运行记录您的错误的代码。

# asp.net-mvc - MVC 4 解决方案结构部分视图

> ID：13120025
> 
> 赞同：1
> 
> 时间：2012-10-29T10:42:15.930
> 
> 标签：asp.net-mvc, asp.net-mvc-4, directory-structure, renderpartial, asp.net-mvc-partialview

好吧，因为大多数教程和演示都选择将部分视图放在共享文件夹中，所以我寻求更好的方法来做到这一点。

我的问题：我想使用部分视图来创建具有可重用视图的动态界面。我可以使用用户控件。由于可能有很多部分视图，我想将它们放在一个单独的文件夹而不是共享文件夹中。

示例：今天的样子：

[看法]

*   [查看.首页]
    *   索引.cshtml
*   [查看.共享]
    *   _layout.cshtml

更好的方法 [查看]

*   [查看.首页]
    *   索引.cshtml
*   [查看.共享]
    *   _layout.cshtml
*   [查看.共享.部分]
    *   部分1.cshtml
    *   ETC

还是我应该彻底重新考虑我的方法？如果是这样怎么办？如果不是，我应该怎么想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:28:50.963

这是我做的一个例子，

*   Application Wide 使用了部分视图——我把它们放在我的共享目录中。
*   特定控制器的部分视图 - 我将它们放在 Views/[ControllerName] 目录中。

# java - 如何在JAVA中创建JSON输出

> ID：13120027
> 
> 赞同：0
> 
> 时间：2012-10-29T10:42:21.017
> 
> 标签：java, javascript, json, jersey

我尝试在 Java 中创建 JSON 输出。
==================这是带有元素的对象的代码：===================== =

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class LoginMobileProperties {

    private String username;
    private boolean status;
    private String message;

    public LoginMobileProperties(){

    }

    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public boolean getStatus() {
        return status;
    }
    public void setStatus(boolean status) {
        this.status = status;
    }
    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }

} 
```

=================这是带有用于url调用的get函数的类：==================== ===

```
 @GET
    @Path("login")
    @Produces("application/json")
    public LoginMobileProperties setLogin(
            @QueryParam("name") String name,
            @QueryParam("password") String password) {

        servlerResponse.addHeader("Allow-Control-Allow-Methods", "POST,GET,OPTIONS"); 
        servlerResponse.addHeader("Access-Control-Allow-Credentials", "true"); 
        servlerResponse.addHeader("Access-Control-Allow-Origin", "*"); 
        servlerResponse.addHeader("Access-Control-Allow-Headers", "Content-Type,X-Requested-With"); 
        servlerResponse.addHeader("Access-Control-Max-Age", "60"); 

        LoginMobileProperties loginMobileProperties = new LoginMobileProperties();

        loginMobileProperties.setUsername(name);
        loginMobileProperties.setStatus("true");
        loginMobileProperties.setMessage("test3");

             return loginMobileProperties;

    } 
```

=================这是我打开网址时的完整错误代码：===================== =======

```
Okt 29, 2012 11:32:02 AM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: A message body writer for Java class LoginMobileProperties, and Java type class LoginMobileProperties, and MIME media type application/json was not found
Okt 29, 2012 11:32:02 AM com.sun.jersey.spi.container.ContainerResponse write
SEVERE: The registered message body writers compatible with the MIME media type are:
application/json ->
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONWithPaddingProvider
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
  com.sun.jersey.server.impl.template.ViewableMessageBodyWriter
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General

Okt 29, 2012 11:32:02 AM com.sun.jersey.spi.container.ContainerResponse logException
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class LoginMobileProperties, and Java type class LoginMobileProperties, and MIME media type application/json was not found
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:285)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1437)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:61)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:126)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:76)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.eclipse.equinox.http.jetty.internal.HttpServerManager$InternalHttpServiceServlet.service(HttpServerManager.java:317)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:924)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class LoginMobileProperties, and Java type class LoginMobileProperties, and MIME media type application/json was not found
    ... 26 more 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:49:31.217

您能否尝试将其添加`jersey-bundle-1.8.jar`到您的类路径中

无论如何，我不能把这个答案归功于[Jersey + Json 媒体类型 application/json 找不到](https://stackoverflow.com/questions/12179737/jersey-json-media-type-application-json-was-not-found)

# c# - 检索设备的序列号

> ID：13120029
> 
> 赞同：1
> 
> 时间：2012-10-29T10:42:27.540
> 
> 标签：c#, windows, wmi, serial-number

我无法从中`serialno`选择`Win32_DiskDrive`。当我调试时，它显示“未找到”

代码如下：

```
string serialno="";
ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM     Win32_DiskDrive");

foreach (ManagementObject moDisk in mosDisks.Get())
{
  serialno = moDisk["SerialNumber"].ToString();

  dataGridView1.Columns[4].HeaderText = "SerialNo";
  dataGridView1.Columns[4].DataPropertyName = serialno;
  row.Cells[4].Value = dataGridView1.Columns[4].DataPropertyName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:56:24.677

您可以尝试使用此代码 - 基于`Win32_PhysicalMedia`

```
 var searcher = new ManagementObjectSearcher("SELECT * FROM Win32_PhysicalMedia");
   foreach(ManagementObject wmi_HD in searcher.Get())
   {
       var serialno = wmi_HD["SerialNumber"].ToString();
   } 
```

链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394346 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394346(v=vs.85).aspx)

# c# - 更改对象但不引用 c#

> ID：13120040
> 
> 赞同：1
> 
> 时间：2012-10-29T10:42:58.887
> 
> 标签：c#, .net, data-binding, reference

*MainClass*有一个 Data 对象。要创建*Class2*我必须将*MainData*提供给*Class2*。在 Class2 中有一个 Load 函数，可以从文件中加载一个 Data 对象。因此 MainData 对象应更改为新对象。

在 Class2 中，Data 对象绑定到控件。

这是一个简单的例子：

```
class MainClass {
    public Data Maindata { get; set; }
    private Class2 cla;
    public MainClass() {
        Maindata = new Data();
        Maindata.Name = "Maindata";
        Console.WriteLine("Class1.MainData = " + Maindata.Name);
        cla = new Class2(Maindata);
        //Here should Maindata.Name = newData
        Console.WriteLine("Class1.MainData = " + Maindata.Name);
    }
}
class Class2 {
    public Data data { get; set; }
    public Class2(Data maindata) {
        data = maindata;
        changeData();
        Console.WriteLine("Class2.Data = "+data.Name);
    }

    private void changeData() {
        Data test = new Data();
        test.Name = "newData";
        data = test;
    }
}
class Data {
    public string Name { get; set; }
} 
```

我知道您可以通过执行 data.Name = "newData"; 来更改它。但如果 Data 有超过 100 个属性，那就是矫枉过正了；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:50:14.143

您可以更改现有对象而不是创建新对象：

```
private void changeData() {
    data.Name = "newData";
} 
```

如果要创建一个新对象，则需要`Class2`注意`MainClass`以便它可以更改属性：

```
public Class2(MainClass main) {
    changeData();
    main.Maindata = data;
    Console.WriteLine("Class2.Data = "+data.Name);
} 
```

并使用`MainClass`对象而不是对象调用它`Maindata`：

```
cla = new Class2(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:52:02.630

虽然我会质疑“你到底为什么要这样做？”，但对于如何将构造函数内新创建的对象传递给调用它的方法的具体问题的答案将使用“out”关键字完成：

```
public Class2(out Data maindata) 
{
    changeData();
    maindata = data;
}

private Data changeData()
{
    Data test = new Data();
    test.Name = "newData";
    data = test;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:50:27.413

这一切都在做：

```
private void changeData() {
    Data test = new Data();
    test.Name = "newData";
    data = test; //assign the new object to the property data in Class2
} 
```

分配给属性的行为`Class2`与' 的属性`data`无关。`MainClass``MainData`

此代码会影响共享`Data`对象：

```
private void changeData() {
    data.Name = "newData"; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T10:54:44.203

您可以执行以下操作：

```
class Class2 {
    public Data data { get; set; }
    public Class2(ref Data maindata) {
        data = maindata;
        changeData();
        maindata = data;
        Console.WriteLine("Class2.Data = "+data.Name);
    }

    private void changeData() {
        Data test = new Data();
        test.Name = "newData";
        data = test;
    }
} 
```

通过 ref-Keyword`MainData`将应用`maindata`.

# debugging - 使用 gdb 调试 apache 段错误

> ID：13120045
> 
> 赞同：1
> 
> 时间：2012-10-29T10:43:16.387
> 
> 标签：debugging, gdb

我的生产服务器上的 Apache 间歇性地出现段错误。我在 apache 配置中启用了核心转储选项，并且有几个转储的核心文件。不幸的是，由于它是生产服务器，apache 或加载的模块没有使用调试符号编译。据我了解，如果没有调试符号，gdb 就不能做很多事情。

在没有调试符号的情况下，我至少可以找出导致段错误的模块吗？如果是这样，怎么做？

**[更新]** 以下是 gdb 回溯的输出

```
(gdb) bt full
#0  0xb7f1f832 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2
No symbol table info available.
#1  0xb7be82bc in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
No symbol table info available.
#2  0xb771652a in ?? () from /usr/local/apache/modules/mod_pagespeed.so
No symbol table info available.
#3  0xb75df576 in ?? () from /usr/local/apache/modules/mod_pagespeed.so
No symbol table info available.
#4  0xb7715c20 in ?? () from /usr/local/apache/modules/mod_pagespeed.so
No symbol table info available.
#5  0xb7be4a49 in start_thread () from /lib/libpthread.so.0
No symbol table info available.
#6  0xb7b2a63e in clone () from /lib/libc.so.6
No symbol table info available. 
```

这是否意味着 /lib/ld-linux.so.2 导致了 seg 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:11:30.453

快速搜索`_dl_sysinfo_int80`发现以下线程...

[http://linux.derkeiler.com/Newsgroups/comp.os.linux.development.apps/2005-02/0462.html](http://linux.derkeiler.com/Newsgroups/comp.os.linux.development.apps/2005-02/0462.html)

要回答您的问题，我怀疑这`/lib/ld-linux.so.2`是导致分段错误的原因。这只是等待的众多线程之一。

运行`thread apply all bt full`以获取崩溃时正在运行的所有线程的堆栈跟踪。然后应该清楚哪个线程导致了 SEGFAULT。这应该为您提供更多关于正在发生的事情的证据。

# php - 将多行表连接到一行

> ID：13120055
> 
> 赞同：0
> 
> 时间：2012-10-29T10:43:59.743
> 
> 标签：php, mysql, sql, join

我有一个看起来像这样的数据库：

```
TABLE 1
ID | NAME | PRICE

TABLE 2
TABLE1.ID | ITEM 
```

如您所见，表 2 可能包含对表 1 的多个引用。

是否可以创建一个给出这样结果的查询？

```
TABLE1.ID | NAME | PRICE | TABLE2.ITEM REC 1 |  TABLE2.ITEM REC 2 |  TABLE2.ITEM REC 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:59:28.713

考虑查看这个 MySQL 函数：`GROUP_CONCAT(expr)`. 它肯定会回答你的问题

[Mysql 文档 - group_concat()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:16:17.230

试试这个：

```
SELECT t1.*, GROUP_CONCAT(t2.ITEM) AS Items
FROM Table1 t1 
JOIN Table2 t2
  ON t1.ID = t2.TABLE1_ID
GROUP BY t1.ID 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/00862/1)

# jpa - Apache Camel JPA：从多个表中读取

> ID：13120057
> 
> 赞同：1
> 
> 时间：2012-10-29T10:44:08.640
> 
> 标签：jpa, apache-camel

我是 camel-jpa 的新手，需要您帮助解决以下问题：

我需要从数据库表中读取数据，对其进行转换并将其保存到另一个数据库中：

```
<route id="FromEmployee1ToEmployee2">
      <from uri="jpa1://Employee1?consumeDelete=false&amp;consumer.namedQuery=getAll" />
      <bean ref="transformerBean"/>
      <to uri="jpa2://Employee2"/>
</route> 
```

这已经很好用了！但现在的问题是我需要从另一个表中查找 Employee1 的一些数据（我需要读取该条目的“last_modified”日期）。在 SQL 中，我会简单地这样做`select last_modified from table2 where table2.id = <employee.ID>`：但是我怎么能用camel-jpa来实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:23:32.213

camel-jpa 组件提供了使用查询的选项，例如命名查询。这使您可以像使用 JPL 一样用 SQL 编写代码（我认为那是 SQL 的 JPA 名称）。

[在http://camel.apache.org/jpa](http://camel.apache.org/jpa)有一个小例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:03:55.080

这是我的解决方案（以防有人遇到同样的问题）：

因为它不可能动态地将属性传递给骆驼路线中的命名查询（至少，我找不到任何方法......），我使用了一个 bean 来处理它：

```
<route...
  <from uri="jpa1://Entity1" />
  <bean ref="MyBean" />
  <to uri="jpa2://Entity2" />    
</route> 
```

在 bean 中，我使用（自动装配的）DAO 来调用我的查询。这使我可以进行所需的各种内容丰富...

好吧，到目前为止效果很好，但我认为我可以用骆驼做这件事的更优雅的方式......

BR, 男

# jquery - 动画css属性：从“顶部”到“底部”

> ID：13120061
> 
> 赞同：1
> 
> 时间：2012-10-29T10:44:16.850
> 
> 标签：jquery

**更新 2**

我想到了。如果有人有类似的问题，请参阅我的回答。

**更新**

jsFiddle：http: [//jsfiddle.net/HBUAx/](http://jsfiddle.net/HBUAx/)

**邮政**

我正在使用 jQuery 制作一些动画。我有 3-4 个元素应该从顶部滑入。我用 css 定义了他们的位置：

```
#element-1 {
    top:124px;
    left:0px;
    right:auto;
    bottom:auto;
}

#element-2 {
    top:230px;
    left:670px;
    right:auto;
    bottom:auto;        
}

#element-3 {
    top:auto;
    left:0px;
    right:auto;     
    bottom:100px;
} 
```

然后我在页面加载时保存他们的初始位置，因为我必须操纵 css 值来

```
top: -1000px 
```

隐藏它们并使“从顶部滑入”动画成为可能。

```
var image_margins = [];
$('img').each(function() {
    var obj = $(this),
        id = obj.attr('id'),
        mtop = obj.css('top'),
        mleft = obj.css('left'),
        mright = obj.css('right'),
        mbottom = obj.css('bottom');

    // save alle margins in array
    image_margins[id] = {mtop:mtop,mleft:mleft,mright:mright,mbottom:mbottom};

    // hide all content elements 
    obj.css({'top':'-1000px'});

}); 
```

当用户单击动画按钮时，元素应该滑动到它们保存的位置。问题：我无法删除该`top`属性。有些元素只有下边距。我试图设置`top`为`auto`or `''`，但它总是`0px`在 DOM 检查器中。如果设置`bottom`则不工作。`top`我怎样才能摆脱这个`top`属性？

```
$('.button').click(function(){
    $('img').each(function() {
        var image = $(this),
            id = image.attr('id'),
            timeout = 0;

        setTimeout(function() {
            var mtop, mleft, mright, mbottom;
            if (image_margins[id].mtop != 'auto') { mtop = image_margins[id].mtop; } else { mtop = ''; }
            if (image_margins[id].mleft != 'auto') { mleft = image_margins[id].mleft; } else { mleft = ''; }
            if (image_margins[id].mright != 'auto') { mright = image_margins[id].mright; } else { mright = ''; }
            if (image_margins[id].mbottom != 'auto') { mbottom = image_margins[id].mbottom; } else { mbottom = ''; }
            image.animate({'top':mtop,'left':mleft,'right':mright,'bottom':mbottom},500);

        },timeout);
        timeout = timeout + 200;
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:24:55.893

好的，我想通了。我必须检查元素是否有定义的`top`位置。如果没有，我必须以很大的`bottom`价值隐藏它。

见：http: [//jsfiddle.net/gg33z/1/](http://jsfiddle.net/gg33z/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:46:56.670

试试这个：

```
$(element).css('top', ''); 
```

这应该取消设置“顶部”值。

# c# - 从最后一行更新 datagridview

> ID：13120063
> 
> 赞同：0
> 
> 时间：2012-10-29T10:44:17.380
> 
> 标签：c#, winforms, datagridview

我正在尝试从最后一行更新单元格值。我有 4 列和 4 行，我想将第 4 列第 4 单元格值带到第 3 行第 3 单元格，就像这样将第 4 列第 3 单元格值取到第 2 行第 3 单元格..ETC..！

这里的逻辑错误是什么，如何解决这个问题？

下面的代码正在工作，但在最后一行（从底部到顶部）我收到索引错误（参数超出范围）。

```
if (e.ColumnIndex != 3)
    return;
int nextRowIndex = e.RowIndex - 1;
int lastRowIndex = SecondaryGridView.Rows.Count + 1;
if (nextRowIndex <= lastRowIndex)
{
    var value = SecondaryGridView.Rows[e.RowIndex].Cells[3].Value.ToString();
    SecondaryGridView.Rows[nextRowIndex].Cells[2].Value = value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:28:03.457

一个简单的 try catch 解决了这个问题。购买我不知道这是否是正确的解决方案。

请纠正我，如果我做错了什么，在这里。

```
if (e.ColumnIndex != 3)
    return;

int nextRowIndex = e.RowIndex - 1;
int lastRowIndex = SecondaryGridView.Rows.Count;

try
{
    if (nextRowIndex <= lastRowIndex)
    {
        var value = SecondaryGridView.Rows[e.RowIndex].Cells[3].Value.ToString();
        SecondaryGridView.Rows[nextRowIndex].Cells[2].Value = value;
    }
}
catch(Exception exception){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:07:31.447

获取最后一行索引（从零开始的索引 -- RowCount - 1）

```
 int lastRowIndex = SecondaryGridView.Rows.Count - 1; 
```

这应该可以解决您的问题。

# javascript - Javascript 或 jQuery - 将 (' 替换为 (\' 和 ') 替换为 \')

> ID：13120064
> 
> 赞同：0
> 
> 时间：2012-10-29T10:44:27.607
> 
> 标签：javascript, jquery, regex

我试图`('`用`(\'`和`')`替换它 我的尝试很少，因为我对**RegExp**`\')`不满意。

 **我尝试的是`myText.replace(/\(\'/g, "(\')");`和`myText.replace(/\'\)/g, "\')");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:56:22.057

您可以在没有正则表达式的情况下在一行中执行此操作：

```
myText = myText.split("('").join("(\\'").split("')").join("\\')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:48:59.400

问题不是你的正则表达式，而是你的替换。您需要转义反斜杠，否则它（不必要地）转义`'`：

```
myText = myText.replace(/\('/g, "(\\'");
myText = myText.replace(/'\)/g, "\\')"); 
```

使用一些更高级的技术（即捕获组和前瞻），您可以将它们组合成一个正则表达式：

```
myText = myText.replace(/(\()'|'(?=\))/g, "$1\\'"); 
```

正则表达式匹配`('`或者`'`如果它后跟`)`（实际上不匹配）。同时，我们“捕获”`(`它是否存在。`$1`如果被捕获，替换字符串中的 in 会将其放置`(`在原位，然后简单地写出`\'`. 后面就不用写了`)`。因为我们使用了前瞻，所以它从来不是比赛的一部分。**

# java - 如何在不使用同步方法或块的情况下实现线程安全？

> ID：13120066
> 
> 赞同：3
> 
> 时间：2012-10-29T10:44:37.370
> 
> 标签：java, multithreading

主体可以解释在不使用方法级别块级别同步的情况下实现线程安全的替代方法吗？

```
public synchronized int disp()
 {

  }

 or
 public int  disp()
 {
  Synchronized
   {}
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:49:59.153

当然，你可以只使用一个线程。

您可以设计您的应用程序以避免共享可变状态，以便方法本质上是线程安全的。

您可以使用同步的图书馆收藏。

您可以使用线程安全队列在线程之间进行通信（并发队列）。

这取决于您要实现的目标...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:47:38.367

还有另一种变体称为`Class Level Synchronization`. 但它只是一种块级同步。

但是，在那之前你能在你的问题中解释为什么会有这样的要求吗？

# c# - 如何在运行时创建在数据岛中缓存数据集的 Excel 工作表

> ID：13120067
> 
> 赞同：0
> 
> 时间：2012-10-29T10:44:37.797
> 
> 标签：c#, vsto, excel-2010

我创建了一个 excel 加载项，允许将数据下载到任何 excel 工作簿中。下载的数据始终放置在新工作表中，但工作簿也可以包含不受加载项管理的工作表。

现在我想存储每个托管工作表的设置（以便以后可以从同一数据源等刷新工作表），最好使用 [cached] 属性将每个工作表存储到 VSTO 数据存储区。问题是我似乎无法在加载项级别访问 DataStore（我可以专门为工作簿创建一个 Visual Studio 项目并在那里创建一个，但不能在加载项的项目中）。

如何从加载项/应用程序级别动态创建数据存储？欢迎任何提示/建议/教程链接，因为我发现很难找到有关此主题的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:37:49.887

简短的回答：我不能从应用程序级别使用数据岛。

# c++ - 关于 std::numeric_limits 的误解 ::数字10

> ID：13120073
> 
> 赞同：2
> 
> 时间：2012-10-29T10:44:46.913
> 
> 标签：c++, floating-point

> **可能重复：**
> [numeric_limits<double>::digits10 的含义是什么](https://stackoverflow.com/questions/747470/what-is-the-meaning-of-numeric-limitsdoubledigits10)

根据我的理解（关于我在互联网上骑的东西）似乎`std::numeric_limits<double>::digits10`（`double`等于`15`）代表可以处理的位数`double`，例如 1.23456789012345 但不是 1.234567890123456

另一方面，双精度浮点格式范围将一直持续到`1.8*10^+308`，这似乎代表了一个数字，它不仅仅包含 15 位数字......

哪里不连贯？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:47:21.543

> ... `std::numeric_limits<double>::digits10`（`double`等于 15）表示 double 可以处理的位数...

[**更准确地说，它是它可以在不损失精度的情况下**](http://en.cppreference.com/w/cpp/types/numeric_limits/digits10)存储的有效位数。

Python 中的示例：

```
1e15 == 1e15 + 1
False 

1e16 == 1e16 + 1
True # loss of precision 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:49:39.493

一个是*有效*数字。另一个是可表示的数字*范围*。因此，您可以拥有：

```
1.23456789012345*10^308 
```

但不是

```
1.234567890123456*10^308 
```

它显示了*有效*数字`15`和可以表示的*范围。* `10^308`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T10:47:45.260

[std::numeric_limits::digits10](http://en.cppreference.com/w/cpp/types/numeric_limits/digits10)：无需更改即可表示的位数（以十进制为基数）。

# javascript - 我们可以在悬停时使用相同的 jquery 功能两次，然后在单击时使用另一次吗？

> ID：13120080
> 
> 赞同：1
> 
> 时间：2012-10-29T10:45:05.960
> 
> 标签：javascript, jquery

我有包含 6 个元素或主要类别的主菜单 - 当我们将鼠标悬停在这些主菜单上时，我们可以看到它们的子菜单或类别。

[http://newiagadvisors.advisorproducts.com/home](http://newiagadvisors.advisorproducts.com/home)

**我的要求是这样的：**

当有人**点击**图片时，也可以让**子菜单或类别显示为选项 - 就像****悬停**在主菜单上时我们看到他们的子类别或菜单一样？

 ****当有人单击图片时，我希望**单击事件**具有相同的菜单悬停功能

以下是悬停事件主菜单下拉菜单的 jquery 代码：

```
$(function()
{
    $("ul.dropdown li").hover(function()
    {
        $(this).addClass("hover");
        $('ul:first',this).css('visibility', 'visible');
    }, function()
    {
        $(this).removeClass("hover");
        $('ul:first',this).css('visibility', 'hidden');
    });
    $("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; ");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:20:49.817

尝试这样的事情：

```
var images = $('#banner img'),
    menuItems = $('.dropdown.sub-menu > li');

images.click(function(){
    var index = images.index(this);

    var li = menuItems.eq(index),
        sublist = li.find('ul:first');

    if(sublist.length)
    {
        li.addClass("hover");
        sublist.css('visibility', 'visible').show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:52:15.663

您可以为不同的监听器添加相同的功能，不会有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:02:28.400

使用`bind()`，但是 bind 与[hover](http://api.jquery.com/hover/)不兼容，因此您可以使用`mouseenter`and`mouseleave`代替。请注意，悬停是这两个处理程序的快捷方式。

```
 $("ul.dropdown li").bind( {
        'mouseenter' : function(){
          $(this).addClass("hover");
          $('ul:first',this).css('visibility', 'visible');
        }, 
        'mouseleave': function()
        {
          $(this).removeClass("hover");
          $('ul:first',this).css('visibility', 'hidden');
        },
        'click': function()
        {
          if( $(this).hasClass("hover") ){
            $(this).removeClass("hover");
            $('ul:first',this).css('visibility', 'hidden');
          } else {
            $(this).addClass("hover");
            $('ul:first',this).css('visibility', 'visible');
          }
        }
      }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:25:00.667

将导航 li 与 on mouseenter 和 on mouseleave 绑定（这就是 hover() 在幕后所做的）：

```
$("ul.dropdown li").on('mouseenter', function() {
    $(this).addClass("hover");
    $('ul:first',this).css('visibility', 'visible');
}).on('mouseleave', function() {
    $(this).removeClass("hover");
    $('ul:first',this).css('visibility', 'hidden');
}); 
```

然后你必须以某种方式连接两者（即 img 和导航 li），假设你`id`在两者上都有一个属性，`li`例如有`id="news-info"`和相应的图片（`img`标签）有`id="img-news-info`。然后可以将图片的点击绑定：

```
$("#banner img").on('click', function() {
    var navId = $(this).attr('id').substring(4);
    $("#"+navId+"").mouseenter();
}); 
```****

# c++ - std::map::size() 不同于迭代器

> ID：13120089
> 
> 赞同：2
> 
> 时间：2012-10-29T10:45:43.077
> 
> 标签：c++, memory, stl, iterator, stdmap

我使用带有自定义比较类和自定义类的 std::map 作为键

现在我使用 operator[] 按键访问元素。然而，这似乎造成了一个大问题。地图似乎错误地分配了元素或它们变得损坏。这变得很明显，因为当我的自定义比较类检测到它比较的对象之一在其数据字段中存储了任意值时（这似乎暗示构造函数没有运行或对象从未在第一名）

现在出现了另一个差异：

当我调用 std::map::size() 并将其与我可以递增 begin() 迭代器以到达 end() 迭代器的次数进行比较时，它们不匹配。

具体来说，地图报告的 size() 比它明显包含的要大。

我用作键的类是一个带有数据字段的自定义矩阵类：

```
unsigned int
unsigned int
vector<vector<Another Class>> 
```

然而，在这些类中，我都没有使用指针算术或其他任何可以直接操作内存的东西。此外，我在使用的任何类中都没有自定义定义的复制构造函数。

编辑：比较函数

```
struct SymModMatComp
{
  bool operator()(const ModMat& mat1, const ModMat& mat2) const
  {
    unsigned int rows = mat1.get_row_number();

    unsigned int columns = mat1.get_column_number();
    if(mat2.get_row_number() != rows || mat2.get_column_number() != columns)
    {
      throw dimension_mismatch();
    }
    for(unsigned int i = 0; i < rows; i++)
    {
      for(unsigned int j = 0; j < columns; j++)
      {
        if(mat1.get_item(i,j).get_value() < mat2.get_item(i,j).get_value())
        {
          return true;
        }
        else if(mat1.get_item(i,j).get_value() > mat2.get_item(i,j).get_value())
        {
          return false;
        }
      }
    }
    return false;
  }
} 
```

get_value() 返回一个无符号整数

解决了：

我使用 valgrind 检查是否有任何内存访问错误...我发现程序actuallz 的一个完全不相关的部分确实一遍又一遍地对已删除的对象进行了删除...。

这似乎破坏了地图存储项目的空间。

感谢所有的好主意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:52:01.817

没有代码很难猜测，但无论如何我都会尝试。

你知道[T& operator[] ( const key_type& x )](http://www.cplusplus.com/reference/stl/map/operator%5B%5D/) ; 如果键不存在，则在地图中插入值？因此，如果您还没有地图中的键，则地图大小将增加一。

该元素将使用默认构造函数创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:53:55.613

如果您在`map`使用复杂的用户定义键时遇到损坏，则您的比较函数可能不遵守[严格弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)的要求：

*   反身性：`!(x < x)`
*   不对称：`!(x < y && y < x)`
*   传递性：`x < y && y < z -> x < z`
*   不可比性的传递性：`!(x < y || y < x || y < z || z < y) -> !(x < z || z < x)`

如果不满足这些要求中的任何一个，将导致未定义的行为（例如内存损坏）。

如果矩阵参与比较函数，确保严格弱排序的一种简单方法是对其元素使用字典顺序。

# php - PHP file_get_contents - 制作一个临时的本地文件？

> ID：13120090
> 
> 赞同：1
> 
> 时间：2012-10-29T10:45:43.637
> 
> 标签：php

是的，我知道标题很混乱，但这是我想做的：

我创建了 3 个网站（针对客户。我无法控制它们）。所有这些网站都加载了我主网站的某个页面。（使用 PHP file_get_contents - 我们将其命名为 www.mainsite/x.php）。

这里的问题是带宽。我希望这 10 个网站使用该 x.php 文件创建一些临时本地文件，而不是每次都加载 www.mainsite/x.php 文件。但是我可能会对该 x.php 文件进行一些更改，因此本地文件应该每周左右更新一次。

我的意思是：网站 1,2 和 3 的 PHP file_get_contents 为 www.mainsite/x.php。在第一次加载时，它应该创建一个包含 x.php 内容的 x.html 文件（即：www.website1/x.html）。一周后，网站 1,2 和 3 应该再次加载 www.mainsite/x.php，如果对 www.mainsite/x.php 文件进行了更改，则创建一个新的 x.html 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:59:56.300

```
public function generateTempFile(){
    $path = 'YOUR PATH';
    $original_path = 'YOUR ORIGINAL PATH WHICH you can change';

    if(file_exists($path)){
        $file_created_time = filemtime($path);
        if($file_created_time + 24*60*60 > time()){
            return TRUE;
        }
    }
    $string = file_get_contents($original_path);
    return file_put_contents($path, $string);   
} 
```

此功能将检查文件的最后修改，如果超过 24 小时，它将重写它。要启动它，只需从 cron 任务运行它，或者将它放在每天打开的某个页面的代码中，以确保它将运行..

在 $string 您必须设置文件新内容，您可以使用其他文件中的 file_get_contents() 来做到这一点。或者只是在自定义处生成一些字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:51:38.183

```
if(file_exists($pathtofile)){
return file_get_contents($pathtofile);
}else{
$newFileHtml=file_get_contents($webpathtogenerate);
file_put_contents($pathtofile,$newFileHtml);
return $newFileHtml;
} 
```

然后你有一个每周运行一次并删除“缓存”文件的 crond 脚本

# javascript - 如何将html的值传递给mootools中的数组？

> ID：13120096
> 
> 赞同：0
> 
> 时间：2012-10-29T10:45:59.683
> 
> 标签：javascript, mootools

我有简单的线路女巫返回我错误

```
Window.addEvent('domready', function(){
    function sendPost(){
        var values = $('input[name="database[]"]'​​​​​​​​​​​​​​).map(function(e) { return e.value; });
    // var myRequest = new Request({
    //  url: '<?php echo JURI::root();?>administrator/index.php?option=com_component',
    //  method: 'post',
    //  data: values

    // });

    // myRequest.send();
}
}); 
```

这是错误。 ![错误](../Images/4ceacbcd360066bbec608a5cd3eb9788.png) ps 我的脚本是在 mootols 之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:20:03.093

为此使用双[美元符号](http://solutoire.com/2007/09/20/understanding-mootools-selectors-e-and-es/)：

```
$$('input[name="database[]"]') 
```

在[**jsFiddle上**](http://jsfiddle.net/dS2jy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:21:09.450

下面的代码将发布它，并在 PHP 中使用`$_REQUEST['somename']`

```
Window.addEvent('domready', function(){
function sendPost(){
    var values = $('input[name="database[]"]'​​​​​​​​​​​​​​).map(function(e) { return e.value; });
    new Request({
        url: '<?php echo JURI::root();?>administrator/index.php?option=com_component',
        method: 'post',
        data: {
            'somename': values
        }

    }).send();
}
}); 
```

但是，这是您想要发布的表格，您可以在 Mootools 中使用 Form.Request 进行发布，有关更多信息，请参阅[http://mootools.net/docs/more/Forms/Form.Request](http://mootools.net/docs/more/Forms/Form.Request)。

如果您添加更多信息，我可能会在 Mootools（不是 Joomla）方面为您提供更多帮助。例如，您没有对从服务器返回的数据做任何事情。

编辑：还有另一种获取表单数据的方法：

```
$('theForm').toQueryString().parseQueryString(); 
```

因此，您可以将其用作：

```
Window.addEvent('domready', function(){
function sendPost(){
    new Request({
        url: '<?php echo JURI::root();?>administrator/index.php?option=com_component',
        method: 'post',
        data: $('theForm').toQueryString().parseQueryString();
    }).send();
}
}); 
```

编辑#2：您知道在示例中的代码中您没有调用函数 sendPost？所以它实际上什么都不做，也不必附加到 domready 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:49:13.227

改变

```
var values = $('input[name="database[]"]'​​​​​​​​​​​​​​).map(function(e) { return e.value; }); 
```

至

```
 var values = $('input[name=database\[\]]'​​​​​​​​​​​​​​).map(function(e) { return e.value; });//escape array operator 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T08:37:51.267

```
var database = ($$('input[name="database[]"]').map(
    function (element) {
        return 'database[]=' + element.get('value');
    }
)).join('&'); 
```

这将生成一个准备好用于在 HTTP 请求中传递数据的字符串：

```
database[]=<value-0>&database[]=<value-1>&database[]=<value-N> 
```

非常简单。

# java - 清理停止的线程

> ID：13120097
> 
> 赞同：0
> 
> 时间：2012-10-29T10:46:02.363
> 
> 标签：java, spring, state

我有一个状态机，许多线程使用它来管理游戏的状态。如果发生某些事情并且游戏实例由于任何原因没有改变状态，我需要能够清理线程。

我怎么能这样做，我有状态机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:12:49.617

如果我正确地理解了你，你的意思是终止给定事件的线程并检查状态是否没有改变。你可以通过多种方式做到这一点。让我建议你一个可能的解决方案。

1 - 终止线程的一种简单方法是将这些线程放在列表、数组等中，以识别要终止的线程。

2 - 创建一个终止TheadList(...) 的方法。

3 - 要终止它们，一种方法是使用 java.lang.Thread .interrupt() 方法。遍历您的线程列表、数组等。并中断（）他们。然后一旦你得到异常允许线程终止。（也就是说，不要捕获这个异常并循环）。

4 - 检查游戏实例是否创建一个新线程（该线程不应在您的线程终止列表中），检查该实例游戏并放置上次更改的时间。又睡了又退房。如果实例没有更改，请再次调用您的 terminateThreadList 方法。

我希望这有帮助

# ios - CLGeocoder 从给定位置反向地理编码

> ID：13120107
> 
> 赞同：4
> 
> 时间：2012-10-29T10:46:21.877
> 
> 标签：ios, maps, clgeocoder

给定经度和纬度**而不是我当前的位置**，我如何使用 执行反向地理编码查找`GLGeocoder`？

```
self.geoCoder = [[CLGeocoder alloc] init];
self.locationManager = [[CLLocationManager alloc] init];
self.locationManager.delegate = self;
//    [self.locationManager startUpdatingLocation];

[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: ^(NSArray *placemarks, NSError *error) {
//        [self.locationManager stopUpdatingLocation];

     CLPlacemark *placemark = [placemarks objectAtIndex:0];
    // Long address
    // NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
    // Short address
    NSString *locatedAt = [placemark subLocality];

     cell.textLabel.text = spot.name;
     cell.detailTextLabel.text = [NSString stringWithFormat:@"Cab no: %@, spotted at %@", spot.cabno, locatedAt];
 }]; 
```

显然只会对我的位置进行地理编码，但我需要明确设置要反转的经度和纬度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T10:56:05.103

我从来没有试过这个，但你不能创建自己的 CLLocation 对象吗？

如果您知道当前的经度和纬度，您可以 -

```
CLLocation *location = [[CLLocation alloc]initWithLatitude:someValue longitude:someValue];
[self.geoCoder reverseGeocodeLocation: location completionHandler: ^(NSArray *placemarks, NSError *error) {
    //do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-10T06:05:17.877

如果你使用模拟器，你可以调试>位置>自定义位置，然后输入 lat long 来模拟任何地方的位置。

# jquery - 使用淘汰赛js在Jquery中自动完成

> ID：13120109
> 
> 赞同：1
> 
> 时间：2012-10-29T10:46:33.120
> 
> 标签：jquery, autocomplete, knockout.js

我正在尝试使用 jquery 进行自动补全。

我正在使用可编辑网格。[像这样](http://knockoutjs.com/examples/gridEditor.html)

我试图实现网格中存在的可编辑文本框的自动完成。[我的代码][http://jsfiddle.net/bhagirathip/x6H8s/4/]

请弄清楚我做错了什么。

当我尝试在没有 Knock Out js 查询的情况下进行自动完成时，它工作正常，但是当我尝试使用敲除 js 查询时，它不起作用。

请弄清楚我在哪里做错了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:55:23.013

您应该为自动完成创建一个自定义绑定。这是 Ryan Niemeyer 创建的绑定 -[如何创建自动完成组合框？](https://stackoverflow.com/questions/7537002/autocomplete-combobox-with-knockout-js-template-jquery).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:12:22.993

显然，从您发布的代码来看，您实际上是在尝试在创建元素**之前初始化自动完成功能。**

applybinding 将在 iddle 上绑定您的数据（在 0 毫秒超时之后），这意味着在 $() 返回之后并且`$('.txtMemberSearch').autocomplete({...})`在运行之后更重要。

我认为你应该试试 Artems 的提议。

# android - Android 和 ksoap2

> ID：13120110
> 
> 赞同：0
> 
> 时间：2012-10-29T10:46:43.690
> 
> 标签：android, ksoap2

我需要一个简单的逐步说明如何实现 ksoap 2。

*   我应该下载什么 .jar 文件以及如何将它添加到我在 Eclipse 中的应用程序中。
*   我有一个要连接的 .Net WS。WS 的类型为 .svc

请帮助我完成第一步......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:59:53.397

嘿只是谷歌这你会得到很好的教程。

检查此[堆栈溢出链接](https://stackoverflow.com/questions/1052300/how-to-call-a-net-webservice-from-android-using-ksoap2)

[博客链接](http://sarangasl.blogspot.in/2011/10/android-web-service-access-tutorial.html)

# javascript - 使用 XDomainRequest 测试 javascript

> ID：13120112
> 
> 赞同：1
> 
> 时间：2012-10-29T10:46:55.000
> 
> 标签：javascript, testing, sinon, xdomainrequest

处理将数据推送到跨域服务器的 javascript 模块。我在 qunit 中有一个测试套件来验证行为，使用 sinon 拦截请求并伪造来自 XmlHttpRequest 的响应。这很好用，除了 IE8/9 使用 XDomainRequest 来允许 CORS 调用（功能有些受限）。

我的问题是 sinon 允许模拟我对 XmlHttpRequest 的使用，而不是 XDomainRequest。谷歌搜索后，我找不到任何人嘲笑 XDomainRequest。有没有人有围绕 XDomainRequest 进行测试的实际经验以及可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:59:24.340

由于目前 sinon 不支持模拟 XDomainRequest，我创建了一个小的 [pullrequest](https://github.com/cjohansen/Sinon.JS/pull/199)，为 sinon 添加了简单的模拟支持。请注意，pullrequest 不被接受，因为它非常粗糙，但它对我有用。

# objective-c - 使用 ios UI 自动化访问模态视图控制器

> ID：13120114
> 
> 赞同：1
> 
> 时间：2012-10-29T10:47:00.117
> 
> 标签：objective-c, ios, xcode, ui-automation, ios-ui-automation

有没有办法使用 UI 自动化访问模态视图控制器的元素。打印本地目标的树时，我找不到视图或任何元素。屏幕截图中仅显示“后面”的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:08:39.937

问题已解决：模态视图控制器不会立即添加到视图层次结构中。添加：

```
UIATarget.localTarget().delay(1); 
```

在打印树之前解决了这个问题。

# java - 追踪手机左右坡度

> ID：13120119
> 
> 赞同：0
> 
> 时间：2012-10-29T10:47:12.010
> 
> 标签：java, android

美好的一天，我做了一个应用程序，当我的电话卡中的手机向右倾斜时，当你向左倾斜时应该向右转和向左转。我如何使用陀螺仪来跟踪这些运动？搜索互联网并没有找到类似的东西。也许你有类似的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:00:56.340

检查您的 android-sdk 文件夹中的示例，应该找到类似`samples/android-XX/AccelerometerPlay`说明如何使用加速度计的内容。

# neural-network - 神经元与 Encog

> ID：13120121
> 
> 赞同：6
> 
> 时间：2012-10-29T10:47:14.513
> 
> 标签：neural-network, encog

我决定为我的手写文本 OCR 应用程序使用带有反向传播训练的前馈神经网络，输入层将使用 32*32 (1024) 个神经元和至少 8-12 个输出神经元。

通过同时阅读一些文章，我发现 Neuroph 易于使用，Encog 的性能要好几倍。考虑我的场景中的参数，哪个 API 是最合适的。如果您可以评论我所采用的输入节点的数量，我将不胜感激，它的价值是否太大（尽管它不在主题范围内）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T14:31:33.267

首先我的免责声明，我是 Encog 项目的主要开发人员之一。这意味着我对 Encog 比 Neuroph 更熟悉，并且可能对它有偏见。在我看来，每个人的相对优势如下。Encog 支持相当多的可互换的机器学习方法和训练方法。Neuroph 非常专注于神经网络，您可以表达几乎任何事物之间的联系。因此，如果您要创建与典型 Elman/Jordan、NEAT、HyperNEAT、前馈类型网络不同类型的非常定制/非标准（研究）神经网络，那么 Neuroph 将非常适合。

# android - 如何防止黑客在 android 上访问我的应用程序的数据库？

> ID：13120125
> 
> 赞同：4
> 
> 时间：2012-10-29T10:47:27.690
> 
> 标签：android, security

如您所知，我们可以在root后访问android设备上的任何文件夹。我的应用程序有一个数据库和一些其他二进制文件。我知道我无法阻止用户查看我的文件和数据库。但是有什么办法可以防止用户将其复制到其他安卓设备上进行非法使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:51:25.537

一种选择是加密存储在数据库中的数据。通常它以明文形式存储。[SQLCipher](http://sqlcipher.net/sqlcipher-for-android/)，我相信也适用于 Android ..

来自安卓/谷歌[官方论坛](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/a2CStzZJTJE)，

> 拥有根电话的用户可以访问他们想要的任何文件。否则，传统板载闪存位置中的数据库是安全的。

如果您想阻止该（路由访问），唯一的选择是对其进行加密。不管需要多久。

编辑：

我要说的是，它从来都不是完全安全的。你可以让黑客变得更加困难。您可以（仅）将解密密钥保存在服务器中（如果从服务器下载整个数据很耗时），但应用程序需要网络连接才能工作。您可以将密钥保存在隐藏文件中（文件名以 . 开头），但具有 linux 类型文件系统知识的 root 用户可以找到它们。或者，您可以按照 Teovald 在对此答案的评论中建议的方式进行操作，方法是在运行时使用任何常量（如 IMEI 编号）的任何哈希算法生成密钥，但它也需要一些处理。您尝试保护它的次数越多，使用它所需的工作就越多。所以这是一个50-50的情况，要根据自己的需求来决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T11:11:35.120

除了加密（请参阅 Krishnabhadra 的回答），确保关键数据的唯一方法是设备上没有所有内容。因此，您只能始终在线访问最关键的数据。

当然，这有一个缺点，即如果用户没有连接，则并非所有应用程序都可用。您必须在保持数据安全免遭窥探和允许即时离线访问数据之间取得平衡。

能否缓解前一个问题取决于数据。如果一切都很关键，则设备上不允许有任何内容。用户会理解并勉强接受这一点。没有人会想要他的设备上的银行账户副本。但是，即使在离线模式下，您也应该允许访问*所有不重要的内容。*

# python - 如何将 io.StringIO() 与 csv 模块一起使用？

> ID：13120127
> 
> 赞同：58
> 
> 时间：2012-10-29T10:47:29.060
> 
> 标签：python, csv, unicode, python-2.7

我试图将 Python 3 程序反向移植到 2.7，但遇到了一个奇怪的问题：

```
>>> import io
>>> import csv
>>> output = io.StringIO()
>>> output.write("Hello!")            # Fail: io.StringIO expects Unicode
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unicode argument expected, got 'str'
>>> output.write(u"Hello!")           # This works as expected.
6L
>>> writer = csv.writer(output)       # Now let's try this with the csv module:
>>> csvdata = [u"Hello", u"Goodbye"]  # Look ma, all Unicode! (?)
>>> writer.writerow(csvdata)          # Sadly, no.
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unicode argument expected, got 'str' 
```

根据文档，[`io.StringIO()`](http://docs.python.org/2.7/library/io.html#io.StringIO)返回 Unicode 文本的内存流。当我尝试手动为其提供 Unicode 字符串时，它可以正常工作。为什么它与`csv`模块一起失败，即使正在写入的所有字符串都是 Unicode 字符串？`str`导致异常的来自哪里？

[（我知道我可以`StringIO.StringIO()`改用，但我想知道`io.StringIO()`在这种情况下有什么问题）]

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-29T10:56:37.713

Python 2.7`csv`模块不支持 Unicode 输入：请参阅[文档开头的注释](http://docs.python.org/2.7/library/csv.html#module-csv)。

看来您必须将 Unicode 字符串编码为字节字符串，并使用`io.BytesIO`, 而不是`io.StringIO`.

文档的[示例](http://docs.python.org/2/library/csv.html#examples)部分包括 a`UnicodeReader`和`UnicodeWriter`包装类的示例（感谢 @AlexeyKachayev 提供的指针）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-08T08:56:05.937

请使用 StringIO.StringIO()。

[http://docs.python.org/library/io.html#io.StringIO](http://docs.python.org/library/io.html#io.StringIO)

[http://docs.python.org/library/stringio.html](http://docs.python.org/library/stringio.html)

`io.StringIO`是一类。它处理 Unicode。它反映了首选的 Python 3 库结构。

`StringIO.StringIO`是一类。它处理字符串。它反映了遗留的 Python 2 库结构。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-10T08:34:06.993

当我尝试直接通过 Flask 提供 CSV 文件而不在文件系统上创建 CSV 文件时，我发现了这一点。这有效：

```
import io
import csv

data = [[u'cell one', u'cell two'], [u'cell three', u'cell four']]

output = io.BytesIO()
writer = csv.writer(output, delimiter=',')
writer.writerows(data)
your_csv_string = output.getvalue() 
```

## 也可以看看

*   [更多关于 CSV](https://stackoverflow.com/a/41585079/562769)
*   [烧瓶部分](https://stackoverflow.com/a/30043470/562769)
*   [关于字符串 / Unicode 的一些注意事项](https://martin-thoma.com/strings/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-29T11:00:55.530

从`csv`文档：

> csv 模块不直接支持读写 Unicode，但它是 8-bit-clean 保存 ASCII NUL 字符的一些问题。因此，只要您避免使用像 UTF-16 这样使用 NUL 的编码，您就可以编写函数或类来为您处理编码和解码。推荐使用 UTF-8。

您可以在此处找到`UnicodeReader`http://docs.python.org/2/library/csv.html`UnicodeWriter`的[示例](http://docs.python.org/2/library/csv.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-14T14:15:29.140

在 python 2.7 中使用带有“内存文件”的 CSV 读取器/写入器：

```
from io import BytesIO
import csv

csv_data = """a,b,c
foo,bar,foo"""

# creates and stores your csv data into a file the csv reader can read (bytes)
memory_file_in = BytesIO(csv_data.encode(encoding='utf-8'))

# classic reader
reader = csv.DictReader(memory_file_in)

# writes a csv file
fieldnames = reader.fieldnames  # here we use the data from the above csv file
memory_file_out = BytesIO()     # create a memory file (bytes)

# classic writer (here we copy the first file in the second file)
writer = csv.DictWriter(memory_file_out, fieldnames)
for row in reader:
    print(row)
    writer.writerow(row) 
```

# java - 实现类或导入类java

> ID：13120128
> 
> 赞同：9
> 
> 时间：2012-10-29T10:47:35.603
> 
> 标签：java, class, interface, import

在 Java 内部，什么是更好的，什么是最佳的，或者什么是标准：用常量或使用点表示法实现一个类？

例子：

**选项1：**

```
import com.myproject.Constantes;

public class myClass {
    myClass() {
        System.out.println("Math: " + Constantes.PI);
    }
} 
```

**选项 2：**

```
import com.myproject.Constantes;

public class myClass implements Constantes {

    myClass() {
        System.out.println("Math: " + PI);
    }
} 
```

哪个更好？为什么？MVJ 使用、资源、速度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T10:49:27.267

如果`Constantes`纯粹是常量的集合（顾名思义）并且没有定义您需要在 中公开的功能`myClass`，那么 A）它不应该是`interface`，并且 B）您不应该实现/扩展它。导入它并像选项 1 一样使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T11:01:25.703

我认为应该使用选项 1 来避免误认为当前类内部定义的另一个 PI。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T10:51:12.597

应该使用选项 1，因为这将明确使用导入类中定义的常量。

如果您在 myClass 中有一个名为 PI 的局部变量，选项 2 将使用该变量，而不是导入类中的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T10:50:39.997

你在这里做两件不同的事情。在第一个片段中，您只是编写碰巧引用`Constantes`类/接口中的东西的代码，因此需要被`import`'ed 而在第二个片段中，您声明您的代码必须符合`Constantes`接口，即实现任何和其中的所有方法。

干杯，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T10:50:45.623

`implements`（一个接口，而不是一个类）表示`myClass`必须遵守由`Constantes`（通常具有必须在您的类中实现的一些方法规范）指定的合同。

在深入了解任何给定语言的特殊性之前，请检查面向对象编程 (Programación Orientada a Objetos) 的概念。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-29T10:51:36.607

通常，清晰度比性能更重要，这也不例外。

选项 1 优于选项 2，因为后者意味着这`myClass`是`Constantes`没有意义的。

从 Java 5.0 开始，您有另一个可能更好的选择。

```
import static com.myproject.Constantes.PI;
// OR
import static com.myproject.Constantes.*;

public class MyClass{
  MyClass(){
       System.out.println("Math: " + PI);
  }
} 
```

# netty - 对错误 327 和 535 的修复是否与 Epoll 一起修复了 devpoll 问题？

> ID：13120134
> 
> 赞同：0
> 
> 时间：2012-10-29T10:48:24.957
> 
> 标签：netty, java, epoll

这是线程转储：

```
"New I/O client worker #23-1" prio=3 tid=0x007c1400 nid=0x28bc runnable [0xed17f000..0xed17f920]
java.lang.Thread.State: RUNNABLE
at sun.nio.ch.DevPollArrayWrapper.poll0(Native Method)
at sun.nio.ch.DevPollArrayWrapper.poll(DevPollArrayWrapper.java:164)
at sun.nio.ch.DevPollSelectorImpl.doSelect(DevPollSelectorImpl.java:68)
at sun.nio.ch.SelectorImpl.lockAndDoSelect(SelectorImpl.java:69)
- locked <0xefd18e90> (a sun.nio.ch.Util$1)
- locked <0xefd18e80> (a java.util.Collections$UnmodifiableSet)
- locked <0xefd012d8> (a sun.nio.ch.DevPollSelectorImpl)
at sun.nio.ch.SelectorImpl.select(SelectorImpl.java:80)
at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:158)
at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)
at org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)

"device-factory-timer-114-thread-1" prio=3 tid=0x0092ac00 nid=0x28ba waiting on condition [0xedd7f000..0xedd7fc20]
java.lang.Thread.State: WAITING (parking)
at sun.misc.Unsafe.park(Native Method)
- parking to wait for  <0xefd01460> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1925)
at java.util.concurrent.DelayQueue.take(DelayQueue.java:160)
at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:583)
at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:576)
at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
at java.lang.Thread.run(Thread.java:619) 
```

这与 epoll 问题非常相似。请让我知道问题是否已经解决，或者您是否有任何解决计划？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:19:35.477

如果您认为存在问题，请打开包含所有需要信息的错误报告。

# java - WebView 内容大小

> ID：13120138
> 
> 赞同：1
> 
> 时间：2012-10-29T10:48:36.767
> 
> 标签：java, android, webview

我对 webview 内容大小有一些问题。我需要将整个网页转换为单个图像并尝试了此代码

```
Bitmap screenshot;                  
screenshot = Bitmap.createBitmap(view.getWidth(), view.getContentHeight(), Bitmap.Config.ARGB_8888);
final Canvas c =new Canvas(screenshot);
view.draw(c); 
```

其中“视图”是一个 WebView 对象

但结果是具有 1024x769 像素的图像。我的网页相当大（高度约为 2000 像素）。我尝试了不同的方法来解决这个问题，但仍然是零回报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:33:03.480

我找到解决方案。

如果你有同样的问题，你可以添加 onPicture Listener 到你的 webview，像这样

```
web.setPictureListener(new WebView.PictureListener() {

        public void onNewPicture(WebView view, Picture picture) {
            float temp = (float) view.getHeight();
            height = view.getContentHeight() * a;
        }

    }); 
```

得到所有你需要的高度和宽度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:39:11.850

要拍摄 webview 的照片，您必须启用缓存，并且从缓存中您可以将其作为位图获取，下面我提到的代码希望对您有用-

```
 webview.setDrawingCacheEnabled(true);
    Bitmap bitmap = Bitmap.createBitmap(webview.getDrawingCache());
    webview.setDrawingCacheEnabled(false); 
```

它对我有用，只需检查您的身边，将等待您接受答案。谢谢

# android - 如何使 Android USB 密码保护？

> ID：13120140
> 
> 赞同：0
> 
> 时间：2012-10-29T10:48:43.113
> 
> 标签：android, android-ndk

我想让我的平板电脑 USB 驱动器密码受到保护，这样当有人连接 USB 时，它会要求输入密码，如果密码匹配，那么只有它会访问 SD 卡中的数据。简而言之，用户将无法在没有密码的情况下访问 USB 驱动器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:03:47.807

欢迎您下载 Android 源代码，修改它以具有此功能，编译该源代码并将其放入您设备的某个 ROM 模块中，然后将该 ROM 模块安装到您的设备上。

当然，这只会有效保护不可移动的外部存储。如果您真正的意思是“SD 卡”，那么任何具有足够运动技能的人都可以从设备中取出卡并根据需要使用其内容。

正如 Doomsknight 所说，欢迎您在外部存储上加密您自己的应用程序文件，但这就是您只需使用 Android SDK 即可完成的全部工作。

# ios - NSDate 比较总是返回 NSOrderedSame

> ID：13120141
> 
> 赞同：1
> 
> 时间：2012-10-29T10:48:57.640
> 
> 标签：ios, compare, nsdate

我对 NSDate 比较有疑问。我在谷歌搜索我的问题时尝试了几种解决方案，但没有任何改变：我比较两个日期，我总是得到 NSOrderedSame 或 NSTimeIntervals = 0.0000; 之间的差异；

我的代码如下所示：

```
NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];
    [inputFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

    for (checklisteModel *updateRecord in updateArray) 
    {

        NSDate *serverDate = [inputFormatter dateFromString:updateRecord.last_update];

        NSString *lastUpdateFromLocalRecord = [self getLastUpdateForChecklisteItemWithID:updateRecord.checklisteID];
        NSDate *localDate = [inputFormatter dateFromString:lastUpdateFromLocalRecord];

        NSDateFormatter* fmt = [[NSDateFormatter alloc] init];
        NSLog(@"checkliste ID: %i",updateRecord.checklisteID);
        NSLog(@"server Date: ----- %@",[fmt stringFromDate:serverDate]);
        NSLog(@"local Date: ----- %@",lastUpdateFromLocalRecord);

        NSLog(@"difference of dates: %f",[serverDate timeIntervalSinceDate:localDate]);

        NSTimeInterval distanceBetweenDates = [serverDate timeIntervalSinceDate:localDate];
        double secondsInMinute = 60;
        NSInteger secondsBetweenDates = distanceBetweenDates / secondsInMinute;

        if (secondsBetweenDates == 0)
            NSLog(@"seconds between == 0");
        else if (secondsBetweenDates < 0)
            NSLog(@"seconds between < 0");
        else
            NSLog(@"seconds between > 0");

        //last_update on server is earlier than local
        if ([serverDate compare:localDate] == NSOrderedAscending) 
        {

            NSLog(@"Server data is earlier than local data");
            NSLog([NSString stringWithFormat:@"server data: %@, local data: %@",updateRecord.last_update,lastUpdateFromLocalRecord]);
        }
        // server data is later than local data
        else if ([serverDate compare:localDate] == NSOrderedDescending) 
        {

            NSLog(@"Server data is later than local data");
            NSLog([NSString stringWithFormat:@"server data: %@, local data: %@",updateRecord.last_update,lastUpdateFromLocalRecord]);
        }
        else 
        {
            NSLog(@"Server data and local data are the same");
        }
    } 
```

我的部分调试显示了这一点：

```
checkliste ID: 21
server Date: ----- 
local Date: ----- 2012-10-29 10:13:46
difference of dates: 3810.000000
seconds between > 0
Server data is later than local data
server data: 2012-10-29 11:17:16, local data: 2012-10-29 10:13:46 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:48:07.213

```
NSLog(@"server Date: ----- %@",updateRecord.last_update); 
```

你没有`serverDate`在这里登录，所以正如 Hot Licks 建议的那样，它很有可能是零。你可以`nil`在 Objective-C 中发送消息，结果是`0`or `nil`。你认为 NSOrderedSame 的价值是什么？我敢赌一美元`0`。

```
[inputFormatter setDateFormat:@"yyyy-MM-dd HH:mm"]; 
```

我注意到您的日期格式化程序的输入格式与您正在记录的内容不完全匹配，因此预期输入与您提供的内容之间的差异可能足以阻止格式化程序创建日期。尝试将秒数添加到`inputFormatter`.

# c# - 设置 Excel 电子表格列属性问题

> ID：13120146
> 
> 赞同：7
> 
> 时间：2012-10-29T10:49:06.690
> 
> 标签：c#, excel, openxml

我正在尝试使用 OpenXML 框架在 Excel 电子表格中设置默认列宽，结果文件损坏。这是代码

```
private void initSpreadsheetDocument()
{
    // Add a WorkbookPart to the spreadsheet document.
    WorkbookPart workbookpart = spreadsheetDocument.AddWorkbookPart();
    workbookpart.Workbook = new Workbook();

    var sheetData = new SheetData();
    var properties = new SheetFormatProperties { DefaultColumnWidth = 25D };

    Worksheet worksheet = new Worksheet();
    worksheet.AppendChild(sheetData);

    // here is line of code that corrupt file
    // without it - file is being generated properly
    worksheet.AppendChild(properties);

    // Add a WorksheetPart to the WorkbookPart.
    WorksheetPart worksheetPart = workbookpart.AddNewPart<WorksheetPart>();
    worksheetPart.Worksheet = worksheet;

    // Init sheets
    sheetsStorage = new Sheets();

    defaultSheet = new Sheet();
    defaultSheet.Id = spreadsheetDocument.WorkbookPart.GetIdOfPart(worksheetPart);
    defaultSheet.SheetId = 1;
    defaultSheet.Name = DEFAULT_SHEET_NAME;

    sheetsStorage.AppendChild(defaultSheet);

    spreadsheetDocument.WorkbookPart.Workbook.AppendChild(sheetsStorage);
    spreadsheetDocument.WorkbookPart.Workbook.Save();
} 
```

![](../Images/e20982ca9277be7fac14dc8bc3b436b3.png)

我试图使用“Append”与“AppendChild”，但结果是一样的

有没有人有意见如何解决？

![](../Images/e20982ca9277be7fac14dc8bc3b436b3.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T12:07:40.130

好的。原因是 SheetFormatProperties 对象具有**必需**的属性 defaultRowHeight。您甚至可以指定 defaultRowHeight = 0，但它必须存在。所以使用

```
SheetFormatProperties sheetFormatProperties1 = new SheetFormatProperties(){ DefaultColumnWidth = 12.75D, DefaultRowHeight = 0D}; 
```

并快乐=）СлаваУкраине！

# jquery - 鼠标离开功能不必要地触发？

> ID：13120149
> 
> 赞同：0
> 
> 时间：2012-10-29T10:49:12.460
> 
> 标签：jquery, mouseenter, mouseleave

我在这里处理 jQuery mouseleave 事件我有 ckeditor 我需要在输入鼠标时显示 ckeditor，当鼠标离开这里时需要触发颜色它触发意味着颜色在某些 div 中打开我认为是这样，但我需要在鼠标或 div 中触发一次请检查一次

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function () {

        $('#btndiv1').hide();

        $('#btndiv').hover(function () {
            $('#btndiv1').show();
        });
        });
</script>
<script type="text/javascript">
    $(document).ready(function () {
    var editor = CKEDITOR.editor.replace('editor1');
    $('#btndiv').mouseleave(function (event) {
        $('#btndiv1').hide("slow");
            alert(1);
            var value = editor.getData();
            alert(value);
            $('#btndiv').append(value);

        });
    });

</script> 
```

这里是我的 div

```
<h4>design your own text</h4>
<div id="btndiv" >
    <div id="btndiv1" style="height:auto;width:auto; border:solid 1px;">
    <textarea  rows="10"   id="editor1" "></textarea>
    <p id="text" ></p>
        </div>
</div> 
```

在这里它正在工作我唯一的问题是当打开以应用某种颜色或标题时它正在打开 sode div k，它的触发意味着它变得隐藏。

但是一旦鼠标移出 div 任何帮助，我就需要隐藏它

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:21:13.160

尝试使用这个：

```
$('#btndiv1').mouseleave(function () {
    $('#btndiv1').hide("slow");
}); 
```

您在代码中的内容是：

```
$('#btndiv').mouseleave(function (event) {
    $('#btndiv1').hide("slow");
        alert(1);
        var value = editor.getData();
        alert(value);
        $('#btndiv').append(value);

    });
$('#btndiv') //which is holding the ckeditor textarea 
```

您需要捕获持有 div 和文本区域的父级。

# c# - Listview 不显示每页的第一行

> ID：13120151
> 
> 赞同：0
> 
> 时间：2012-10-29T10:49:18.543
> 
> 标签：c#, asp.net, listview, dataset, datapager

我有一个列表视图，用于显示数据集。还有一个数据分页器。

问题是，对于每一页，数据集的第一行没有显示在列表视图中。

因此，datapager 显示文本“显示元素 1-10 of 22”，但在页面上，仅显示 9 个元素。代码太大太复杂，无法粘贴到这里。

我的问题是，一般来说：当 DataSet 正确但绑定后，列表视图在每页上显示少 1 行时会出现什么问题。

我知道我的问题不够具体，但我必须解决这个问题，我需要关于在哪里查看或如何调试的一般想法，或者通常是什么导致这种“第一行未显示”问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:50:46.347

您很可能没有显示第一行或集合中的最后一行。检查您的条件和比较。

请注意，DataSet 是基于 0 的 - 第一行是`.Rows[0]`，而不是`.Rows[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:01:13.707

问题已经解决了。我不知道到底是什么问题。这是一个由程序员团队开发的项目，错误是由与我解释的上下文无关的东西引起的。谢谢大家的讨论。

# c# - C# String[] 到 byte[][]

> ID：13120156
> 
> 赞同：1
> 
> 时间：2012-10-29T10:49:27.780
> 
> 标签：c#, xcode, unity3d, mono

我有一个需要转换为 byte[][] 的字符串数组（将 Xcode 与 C# 中的 Unity 脚本连接起来）。

这是 Xcode 中的函数：

```
void doThisC(char** matrix); 
```

在 C# 中的 Unity 中，这就是我所拥有的，但我无法使其工作：

```
public static void doThis(string[] array, int size){
    char[][] grid = new char[][] { new char[size] , new char[100]}; 
    byte[][] buffer;

   for(int i = 0 ; i < size ; i++)
   {
      grid[i] = array[i].ToString().ToCharArray();
      buffer[i] = (new System.Text.UTF8Encoding()).GetBytes(grid[i]);
   }
   doThisC(buffer);     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T10:59:16.793

该`grid`数组只有两个项目，因此代码最多只能处理两个字符串。你根本不需要`grid`数组。此外，您不创建数组`buffer`：

```
public static void doThis(string[] array){
   byte[][] buffer = new byte[array.Length][];
   for(int i = 0 ; i < array.Length ; i++)
   {
      buffer[i] = System.Text.Encoding.UTF8.GetBytes(array[i]);
   }
   doThisC(buffer);     
} 
```

或使用 Linq 扩展方法：

```
public static void doThis(string[] array){
   byte[][] buffer = array.Select(System.Text.Encoding.UTF8.GetBytes).ToArray();
   doThisC(buffer);     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T10:55:12.163

我认为您的问题只是创建数组，您应该首先正确创建一个字节数组：

```
byte[][] buffer = new byte[size][]; 
```

在您当前的实现中，当您调用时，`buffer[i]`您会得到一个异常，但是您可以像上面提到的那样稍加改动来修复它。您的代码的其他部分（取决于您的编码）似乎是正确的。

# mongodb - Mongodb 热插拔数据库

> ID：13120157
> 
> 赞同：0
> 
> 时间：2012-10-29T10:49:28.360
> 
> 标签：mongodb

我使用 MongoDB 作为非规范化存储，该状态每 15 分钟完全重建一次。重建过程需要很多时间和资源。有没有办法组织表“热交换”过程，以避免数据库锁定和重建过程中的性能下降。假设我正在另一台服务器上构建新版本的数据库，制作所有需要的索引等，然后在主服务器上复制数据库文件并“交换”表，以便用户在交换后立即获得刷新数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:47:11.740

MongoDB 使用[预先分配的数据文件](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space#ExcessiveDiskSpace-DatafilePreallocation)，因此如果您经常删除和重建数据库，您可能会搅动磁盘。数据文件是使用[内存映射 I/O 打开的](http://www.mongodb.org/display/DOCS/Caching)，并且没有提供“热交换”或重命名数据库。

已删除集合中的空间可以重新使用，因此更好的方法可能是根据 15 分钟的时间间隔生成临时集合名称，以便您的程序可以预测地“交换”到下一个集合，并且可以删除旧集合。

如果您使用的是 MongoDB 2.2 或更新版本，您还有一些额外的选择：

*   使用新的[`usePowerOf2Sizes`](http://docs.mongodb.org/manual/reference/command/collMod/)收集选项来提高已删除空间的重复使用

*   使用[生存时间 (TTL)](http://docs.mongodb.org/manual/tutorial/expire-data/)功能在 15 分钟后自动使文档过期。

# objective-c - NSBezierPath 上的剥离笔画

> ID：13120159
> 
> 赞同：0
> 
> 时间：2012-10-29T10:49:31.190
> 
> 标签：objective-c, cocoa, core-graphics, nsbezierpath

我正在尝试绘制一个简单的图表。我有由线连接的正方形。线条用`NSBezierPath`'s 绘制。我使用随机颜色的线条，所以我可以跟随它们。我的问题是线条改变颜色。

输出 -

![在此处输入图像描述](../Images/647c1e6e6d0ec44160c76e550722eaa8.png)

代码 - 我删除了绘制正方形的线条，因此它只绘制线条：

```
- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
    [[NSColor whiteColor] setFill];
    NSRectFill(dirtyRect);

    CGFloat height = 70.0f;
    CGFloat yOffset = 20.0f;

    NSRect rect = NSMakeRect(50.0f, 50.0f, 200.0f, height);

    NSEnumerator *reverseEnumerator = [steps reverseObjectEnumerator];

    NSMutableDictionary *rectsByStep = [NSMutableDictionary dictionaryWithCapacity:10];

    for( WFGJobStep *step in reverseEnumerator )
    {
        [[NSColor redColor] setFill];

        [rectsByStep setObject:[NSValue valueWithRect:rect] forKey:[NSNumber numberWithInteger:step.step]];

        rect.origin.y += height + yOffset;

    }

    reverseEnumerator = [steps reverseObjectEnumerator];
    for( WFGJobStep *step in reverseEnumerator )
    {
        NSRect stepRect = [[rectsByStep objectForKey:[NSNumber numberWithInteger:step.step]] rectValue];
        NSPoint startPoint = NSMakePoint( stepRect.origin.x + stepRect.size.width, stepRect.origin.y);

        //  draw lines
        for( NSNumber *stepNumber in step.nextSteps )
        {

        //
        //
        //  Line drawing code here
        //
        //

            NSBezierPath * path = [NSBezierPath bezierPath];
            [path setLineWidth: 4];

            NSRect targetStepRect = [[rectsByStep objectForKey:stepNumber] rectValue];
            NSPoint endPoint = NSMakePoint( targetStepRect.origin.x + targetStepRect.size.width, targetStepRect.origin.y + targetStepRect.size.height);

            [path moveToPoint:startPoint];

            CGFloat controlX = ( startPoint.y - endPoint.y ) * .2 + stepRect.origin.x + stepRect.size.width + 20;

            [path curveToPoint:endPoint controlPoint1:NSMakePoint(controlX, startPoint.y) controlPoint2:NSMakePoint(controlX, endPoint.y)];

            NSRect square = NSMakeRect( endPoint.x, endPoint.y, 9, 9 );
            [path appendBezierPathWithOvalInRect: square];

            [[self randomColor] set];
            [path stroke];
        }
    }
}

- (NSColor *)randomColor {
    float c[4];

    c[0] = (arc4random() / RAND_MAX) * 1;
    c[1] = (arc4random() / RAND_MAX) * 1;
    c[2] = (arc4random() / RAND_MAX) * 1;
    c[3] = 1.0f;

    return [NSColor colorWithDeviceRed:c[0] green:c[1] blue:c[2] alpha:c[3]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:04:27.407

我的问题是这是在 scoll 视图中，这是我的第一个 NSScrollView。我不知道当视图滚动时它会重绘它的子视图。问题是我在笔划中使用了随机颜色，因此当我滚动时，它会随机改变线条的颜色。

# opencart - 在 opencart 中创建一个新的可编辑区域

> ID：13120163
> 
> 赞同：0
> 
> 时间：2012-10-29T10:49:41.600
> 
> 标签：opencart

我已经在 opencart 的产品页面模板中创建/硬编码了一个额外的信息部分，但这并不理想，所以我需要将此部分链接到管理员，以便可以从内部根据每个产品编辑包含的信息管理界面。

我需要做什么才能实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:47:10.817

简而言之，有很多事情要做，但不是那么繁重（假设它是一个额外的描述）：

向数据库中添加一个新字段（可能在 product_description 表上）；

将新的语言变量添加到语言文件：

```
../admin/language/english/catalog/product.php 
```

将新的描述/字段添加到模板中：

```
../admin/view/template/catalog/product_form.tpl 
```

将变量定义/邮政编码等添加到控制器文件中：

```
../admin/controller/catalog/product.php 
```

编辑数据库查询以包含新字段（至少添加、编辑和删除功能：

```
../admin/model/catalog/product.php 
```

如果它是基于描述的字段，那么如果您在这些文件中搜索“描述”，然后复制代码，替换您的新字段名称，那么应该可以。

# facebook - 当官方 Facebook 应用程序安装在设备上时，Corona facebook.logout()

> ID：13120164
> 
> 赞同：0
> 
> 时间：2012-10-29T10:49:42.087
> 
> 标签：facebook, lua, facebook-apps, coronasdk

当我想从 Facebook 注销并且设备上安装了官方 Facebook 应用程序时，我遇到了一个小问题。

在`facebook.logout()`被调用之后，我调用新`facebook.login( appId, fbListener, {"publish_stream"} )`的不为新用户调用应用程序的新用户，使用旧用户名和密码简单地登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:17:38.307

如果用户在官方 FB 应用程序上登录他们的帐户，这就是它的工作方式，如果我没记错的话，它应该简化这个过程。（可能需要参考 FB 文档以获取有关该过程的更详细说明。）

# java - 如何杀死有一段时间（真）的线程？

> ID：13120167
> 
> 赞同：15
> 
> 时间：2012-10-29T10:49:59.230
> 
> 标签：java, multithreading, thread-safety, threadpool

我正在尝试关闭线程池中的所有线程。

通常我会尝试：

```
 while(!Thread.currentThread().isInterrupted()) {... 
```

要关闭 while 循环...

但我有一个线程，它只包含大约

```
 while(!Thread.currentThread().isInterrupted()) {//which is true 
```

这就是我关闭线程的方式：

```
pool.shutdownNow(); 
```

那么你将如何关闭这样的线程呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T10:56:54.877

您可以添加一个`volatile`布尔值`flag`。

```
public class Worker implements Runnable {

    volatile boolean cancel = false;
    @Override
    public void run() {

        while (!cancel) {
            // Do Something here
        }
    }

    public void cancel() {
        cancel = true;
    }
} 
```

现在你可以打电话

```
worker.cancel(); 
```

**更新：**

来自[shutdownNow()的 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)

> 尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表。
> 
> 除了尽最大努力停止处理正在执行的任务之外，这里没有任何保证。例如，典型的实现将通过**Thread.interrupt()**取消，因此任何**未能响应中断的任务可能永远不会终止**。

因此，要么您必须通过保留中断来定义您的中断策略

```
 catch (InterruptedException ie) {
     // Preserve interrupt status
     Thread.currentThread().interrupt();
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T10:55:38.677

取而代之的是，您可以使用自创标志作为 while 循环的条件。

```
public class MyClass implements Runnable
{

    private volatile boolean running = true;

    public void stopRunning()
    {
        running = false;
    }

    public void run()
    {
        while (running)
        {

        }
        // shutdown stuff here
    }

} 
```

现在，要停止它，只需调用：

```
myClassObject.stopRunning(); 
```

这将使代码正常完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T11:09:27.137

如果您已按照您的描述实现了此功能，那么它应该可以正常工作。

当您调用`pool.shutdownNow()`它时，它应该中断当前处于活动状态的所有工作线程。假设应用程序特定的`run()`方法检查中断标志并在发现它设置时自行终止，您的线程应该关闭。

确实没有必要使用*临时*取消标志添加不同的机制......或类似的东西。

* * *

顺便说一句，有几个原因`interrupt()`比*临时*取消更好：

*   ExecutorService 等标准 API 使用它。
*   各种低级 API 方法（如`sleep`、`wait`）`join`和一些 I/O 方法对它很敏感。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T11:08:38.287

如果您使用的是ExecutorService 实现，那么它肯定会向其线程池中的所有线程`java.util.concurrent`发送信号。`interrupt`您的流氓任务的问题可能是循环实际上并没有迭代，而是在其中的某个地方阻塞，因此`interrupted`根本没有检查状态。

您可能遇到的另一个问题：while 循环运行了一些代码，这些代码在没有正确处理的情况下**捕获了 InterruptedException ，从而有效地****吞下了中断信号**。这是一个常见的编码错误，在大多数情况下是由于检查了丑陋的事实`InterruptedException`。

# testing - Unity游戏在线beta测试平台

> ID：13120169
> 
> 赞同：2
> 
> 时间：2012-10-29T10:50:04.470
> 
> 标签：testing, unity3d, beta, testflight

我用谷歌搜索了这个，但是没有发现任何有用的东西。这真的很简单，我正在寻找一种支持 Unity 游戏分发和使用跟踪的服务，带有崩溃报告等等，比如[TestFlight](https://testflightapp.com/)或[HockeyApp](http://www.hockeyapp.net/)，但适用于 Unity 游戏！

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:58:33.873

如果您在 Unity Asset Store 中搜索“分析”，则有一些系统支持 Unity PC。这些可用于跟踪使用情况，以及一些跟踪错误。通常分析系统支持将额外数据附加到事件中，您可以使用它向服务发送未捕获的异常。

[Application.RegisterLogCallback](http://docs.unity3d.com/Documentation/ScriptReference/Application.RegisterLogCallback.html)可用于此。

```
void OnEnable() {
    Application.RegisterLogCallback(ErrorReporter);
}

void OnDisable() {
    Application.RegisterLogCallback(null);
}

void ErrorReporter (string logString, string stackTrace, LogType type) {
    if (type == LogType.Assert || type == LogType.Error || type == LogType.Exception) {
        // send analytics message with logString and/or stackTrace attached.
    }
} 
```

# asp.net-mvc-3 - MVC3 中的管理器属性

> ID：13120173
> 
> 赞同：0
> 
> 时间：2012-10-29T10:50:19.037
> 
> 标签：asp.net-mvc-3, attributes

我想管理`Attribute`得更容易，所以我正在寻找控制所有的方法`Attribute`。目前，我在控制器中的每个功能都注册了一个或多个`Attribute`. 前任：

```
[MaintenanceModeDenyAttribute]  
public ActionResult SaveGenericObject(GenericSaveObject saveObject)  {  } 
```

* * *

```
[MaintenanceModeDenyAttribute("New student")]
public ActionResult ReturnGraduates() { } 
```

一个类中的manager如何`Attribute`，可以应用于controller的很多功能呢？当应用程序启动时，`Attribute`班级可以注册。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:10:21.663

如果允许使用，您可以在控制器级别应用属性，或者您也可以将其添加到 global.asax.cs 中的全局过滤器集合中以用于整个应用程序，如下所示。

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new MaintenanceModeDenyAttribute());            
} 
```

# python - 通过 python 处理文件系统

> ID：13120176
> 
> 赞同：0
> 
> 时间：2012-10-29T10:50:27.480
> 
> 标签：python, windows, filesystems

我想在 python 中编写一个程序，它检测文件系统的类型，然后对主文件表（在 NTFS 中）或文件分配表（在 FAT 中）进行一些更改。

有没有明确的方法来做到这一点？使用哪个库？我是python的初学者。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:12:35.393

我不确定我是否完全理解这个问题，但我建议您将 python 代码嵌入 C++ 并使用 Boost 库[http://www.boost.org/doc/libs](http://www.boost.org/doc/libs)，这将是我的第一个调用点， 祝你好运。

# wpf - WPF Datagrid 弹出窗口放置

> ID：13120180
> 
> 赞同：1
> 
> 时间：2012-10-29T10:50:40.393
> 
> 标签：wpf, xaml

当用户双击 DataGrid 行时，我正在显示一个弹出窗口，有没有办法在 SelectedItem 的右侧显示这个弹出窗口？

这是我当前的代码：

```
<Popup PlacementTarget="{Binding ElementName=dgWarnings}" Placement="Right" Name="InfoPopup" PopupAnimation="Slide" AllowsTransparency="True" IsOpen="{Binding ShowInfo}"> 
```

我显然无法绑定到选定的项目属性，因为这不是 UI 项目。

正如我提到的，我想将它显示在数据网格中当前选定项目的右侧。

有什么建议么？

# c# - 如果未安装 msoffice，如何在我的 c# 应用程序中创建 excel

> ID：13120184
> 
> 赞同：1
> 
> 时间：2012-10-29T10:50:48.603
> 
> 标签：c#, excel

嗨，我正在创建一个应用程序，我需要通过它创建一个 Excel。我添加了 Microsoft Excel 12.Object 库作为应用程序的参考。但是我的服务器没有安装 Msoffice。那么如何在该服务器中创建 Excel。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T10:55:38.237

我可以推荐[EPPlus](http://epplus.codeplex.com/wikipage?title=FAQ&referringTitle=Documentation)，因为它简单、强大并且无需使用 Excel 2007 电子表格（xlsx 文件）安装 office/excel。它的许可证模型是[LGPL](http://en.wikipedia.org/wiki/LGPL)。

```
var excel = new ExcelPackage();
excel.File = new System.IO.FileInfo(@"C:\Temp\AnExcelFile.xlsx");
if (excel.File.Exists)
    excel.Load(excel.File.Open(FileMode.Open));
ExcelWorksheet ws = excel.Workbook.Worksheets.Add("Worksheet-Name");//must be unique and less than 31 characters long
ws.Cells[26, 1].LoadFromDataTable(dt, true); //loading from DataTable, the 2.Parameter is PrintHeaders
ws.Cells[26, 1].LoadFromCollection(query, true); //loading by LINQ-Query also possible
excel.Save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:54:03.867

有许多第三方库——例如，我认为 ComponentOne 制作了一个——它们能够创建 Excel 文件，而且我认为其中至少有一些是独立于 Excel 的，因此它们可以在没有安装 Excel 的情况下制作 Excel 文件服务器。

另一种解决方案是创建 Excel 可以读取的其他格式，例如 CSV。使用 CSV 将意味着您不会获得 Excel 提供的精美格式，但至少您不需要许可第三方组件或在服务器上安装 Excel。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:05:19.607

如果您需要创建称为 openxml 的新办公格式文档，您可以在[http://www.microsoft.com/en-us/download/details.aspx?id=5124看到](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T10:53:11.597

现在有创建 ms 对象的方法，而没有安装 MS Office。添加的库只不过是接口包装器。

# android - Paypal Mobile Express Checkout Library 示例应用程序给了我 NoClassDefFoundError 异常

> ID：13120186
> 
> 赞同：2
> 
> 时间：2012-10-29T10:50:57.107
> 
> 标签：android, paypal

我正在使用 Android 测试 Mobile Express Checkout Library 的示例应用程序。

我越来越`java.lang.NoClassDefFoundError: com.paypal.android.pizza.ResultDelegate`

错误在此 Pizza.java 行：`PayPal.fetchDeviceReferenceTokenWithAppID(this, appID, server, new ResultDelegate());`

我很困惑，我没有在谷歌上找到任何关于该错误的信息，也在 paypal 和 x.com 上的常见问题解答上，所以我不知道如何解决它。

我只是打开了示例代码项目并执行了它。

这是项目和库的链接：[https ://www.x.com/sites/default/files/PayPal_MECL_1.0_Android-Developer-Package_0.zip](https://www.x.com/sites/default/files/PayPal_MECL_1.0_Android-Developer-Package_0.zip)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T10:52:47.843

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在`/libs`文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于`/libs`. 把它放在那里，它会自动添加到构建路径中。如果不是，请尝试通过`ant clean`或 Project ► Clean in eclipse 进行清理构建。

大多数情况下，出现此类错误是因为较新版本的 ADT 要求所有外部 jar 都位于 libs 文件夹中。

通过查看您链接到的项目，我可以在项目根目录中看到 paypal jar。相反，请尝试将其移动到`/libs`文件夹中。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:56:04.273

我认为您还没有从 eclipse 的配置构建路径部分导出库 jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:22:37.947

在项目目录中创建 libs 目录并将移动 PayPal_MECL.jar 添加到 /libs。转到项目属性并从库中删除现有的 PayPal_MECL 条目

# javascript - 为什么我的函数只能在 Firefox 中运行？

> ID：13120189
> 
> 赞同：1
> 
> 时间：2012-10-29T10:51:02.717
> 
> 标签：javascript, jquery, html, regex, internet-explorer

基本上我已经继承了这段代码，其中显示/隐藏了图形，增加了计数器等。我已经在 Firefox 中将它调试到完美，但在 IE 和 Chrome 中，我收到了一个错误以及奇怪的行为。

当 console.logged 时，参数在 IE/Chrome 中显示不同且不正确，但在 Firefox 中正常，如下所示：

谁能告诉我为什么在 IE/Chrome 中无法识别函数/参数？

我下面的代码使用`substr`，我得到的错误是：

> **未捕获的类型错误：无法调用未定义的方法“substr”**

在 Chrome/IE 中只是因为显然它没有显示完整长度并且只有 3 个字母长，而它应该是 15+，如 Firefox 控制台日志中所示。

**更新了日志功能**

```
 function loadGraphs(idTreeview,idSelectGraph)
{

    console.log("loadGraphs function");
    var count=0;

    var fn=$('#'+idSelectGraph)[0].attributes[1].value;

    console.log("fn  = " + fn);

    fn=fn.substr(12).substr(0,fn.length-2);

    var flags=fn.split(new RegExp(","));
    console.log("value of flags = " + flags);
    var data=''; 
    console.log("value of fn = " + fn);

    console.log("value of # + idSelectGraph = " + $('#'+idSelectGraph));

    var idInstanceTreeview = idTreeview;

if($('#counterTreeviewUL'+idInstanceTreeview).length == 0) 
    {

    console.log('If length is 0 then do nothing');

      var fnInstance=$('#'+idSelectGraph)[0].attributes[1].value;

      console.log('If length is 0 then do nothing 2');

    var flagsInstance=fnInstance.split(new RegExp(","));

    console.log('If length is 0 then do nothing 3');    

    console.log("fn = " + fn);
    console.log("flags = " + flags);
    console.log("flagsInstance = " + flagsInstance);

    var graph = {
            id: seqId,
            entityName: flags[6].substr(1).substr(0, flags[6].length - 2),
            entity: flags[5].substr(1).substr(0, flags[5].length - 2),
            idCounter: flags[4],
            counterName: flags[3].substr(1).substr(0, flags[3].length - 2),
            ivmanager: flags[7].substr(1).substr(0, flags[7].length - 2),
            chart: null,
            pointsToShowX: null,
            borneInf: null,
            unite: "",
            idInstance: flagsInstance[2].substr(1).substr(0, flagsInstance[2].length - 2),
            instanceName: flagsInstance[3].substr(1).substr(0, flagsInstance[3].length - 2),
            listPdsNull: new Array(),
            countInstance: idTreeview + "_" + i,
            countGraph: -1
        };

    console.log('If length is 0 then do nothing 4');

    seqId++;
    graphs[graphsLastId]=graph;
    graphsLastId++;

    }

else 
  {
    console.log('Else if length is not 0');
    for(var i=0;i<$('#counterTreeviewUL'+idInstanceTreeview)[0].children.length;i++)
        ($('#counterTreeviewUL'+idInstanceTreeview)[0].children[i].children[0].checked)?++count:count;

    if ($('#counterTreeviewUL'+idInstanceTreeview)[0].children.length == count)
    {
        console.log('If length is equal to count');
        $('#'+idSelectGraph)[0].checked=true;
        $('#'+idSelectGraph)[0].indeterminate=false;
    }
    else if (count==0)
    {
        console.log('Else if length is equal to 0');
        $('#'+idSelectGraph)[0].checked=true;       
        $('#'+idSelectGraph)[0].indeterminate=false;        
    }
    else
    {
        console.log('Else if none of them conditions are true');
        $('#'+idSelectGraph)[0].checked=true;
        $('#'+idSelectGraph)[0].indeterminate=false;
    }

   for (var i=0;i<$('#counterTreeviewUL'+idTreeview)[0].children.length;i++)
   {

        if (!$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked)
        {   
            $('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked=true;

            var fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes[1].value;
            console.log('fnInstance (1) = ' + fnInstance);

            fnInstance=fnInstance.substr(15).substr(0,fnInstance.length-2);
            console.log('fnInstance (2) = ' + fnInstance);

            var flagsInstance=fnInstance.split(new RegExp(","));
            console.log('flagsInstance = ' + flagsInstance);

              console.log("fn = " + fn);
              console.log("flags = " + flags);
              console.log("flagsInstance = " + flagsInstance);

            console.log('This is the substr error in Chrome');

            var graph = {
                    id: seqId,
                    entityName: flags[6].substr(1).substr(0, flags[6].length - 2),
                    entity: flags[5].substr(1).substr(0, flags[5].length - 2),
                    idCounter: flags[4],
                    counterName: flags[3].substr(1).substr(0, flags[3].length - 2),
                    ivmanager: flags[7].substr(1).substr(0, flags[7].length - 2),
                    chart: null,
                    pointsToShowX: null,
                    borneInf: null,
                    unite: "",
                    idInstance: flagsInstance[2].substr(1).substr(0, flagsInstance[2].length - 2),
                    instanceName: flagsInstance[3].substr(1).substr(0, flagsInstance[3].length - 2),
                    listPdsNull: new Array(),
                    countInstance: idTreeview + "_" + i,
                    countGraph: -1
                };

            console.log('Does it fail after var graph?');

            seqId++;        
            graphs[graphsLastId]=graph;     
            graphsLastId++;
        }
    }

 }
    graphsToLoad=false;
    console.log("before updateAllGraphs");
    updateAllGraphs();
    console.log("after updateAllGraphs");
    loading=false;

    if($('#counterTreeviewUL'+idInstanceTreeview).length == 0)
    {

      if($('#'+idSelectGraph)[0].checked)
          {
             console.log("If it is checked then execute countSelectedGraphs(1)");
           countSelectedGraphs(graphsLastId, flags[5].substr(1).substr(0,flags[5].length-2), 0);
          }
      else 
          {
             console.log("If it is not checked then execute countSelectedGraphs(0)");
           countSelectedGraphs(graphsLastId, flags[5].substr(1).substr(0,flags[5].length-2), 0);
          }
    }

    else 
    {
            console.log("If it is not equal to 0 then execute countSelectedGraphs(0)");
          countSelectedGraphs(graphsLastId, flags[5].substr(1).substr(0,flags[5].length-2), 0);

    }
} 
```

* * *

第**一个控制台日志**（第 2 行）是`($('#'+idSelectGraph)[0]);`

第二**个控制台日志**（第 3 行）是`($('#'+idSelectGraph)[0].attributes[1]);`

第三**个控制台日志**是`($('#'+idSelectGraph)[0].attributes[1].value);`等的结果。

* * *

**在 chrome/IE 中返回完整的 console.log：**

![在此处输入图像描述](../Images/e62387c19b3b840757f90f1ab7822f6b.png)

**Firefox 中返回的完整 console.log（正常工作）：**

![在此处输入图像描述](../Images/61d08dc4aa8ffb0d2674635d5ed8865e.png)

## 编辑 1

我现在已经修复了上面的所有内容，我唯一的问题是我替换的一条线导致显示的图与找到的第一个图完全相同，而不是之前的每个单独的图。这段代码很好，因为这意味着我的应用程序可以在 IE 和 Chrome 中运行，但是必须解决这个错误并将得到奖励：

原始代码（所有图表均正确显示，但在 IE/Chrome 中无效）

```
var fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes[1].value; 
```

新代码（适用于 Chrome/IE，但仅显示找到的第一个图）

```
$el = $('#counterTreeviewUL'+idTreeview).first();
            var fnInstance = $el.find("input").attr("onclick"); 
```

谁能告诉我如何调整新代码以成功获取所有图表（可能与`i`变量有关）。

## 编辑 2

编辑后，我的 for 循环如下：

```
 for (var i=0;i<$('#counterTreeviewUL'+idTreeview)[0].children.length;i++)
   {

        if (!$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked)
        {   
            $('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked=true;

    This works in Firefox but not in Chrome/IE  //  var fnInstance=$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].attributes[1].value;

            This works in all but only displays first graph //

            $el = $('#counterTreeviewUL'+idTreeview).first();
            var fnInstance = $el.find("input").attr("onclick");

            fnInstance=fnInstance.substr(15).substr(0,fnInstance.length-2);

            var flagsInstance=fnInstance.split(new RegExp(","));

            var graph = {
                    id: seqId,
                    entityName: flags[6].substr(1).substr(0, flags[6].length - 2),
                    entity: flags[5].substr(1).substr(0, flags[5].length - 2),
                    idCounter: flags[4],
                    counterName: flags[3].substr(1).substr(0, flags[3].length - 2),
                    ivmanager: flags[7].substr(1).substr(0, flags[7].length - 2),
                    chart: null,
                    pointsToShowX: null,
                    borneInf: null,
                    unite: "",
                    idInstance: flagsInstance[2].substr(1).substr(0, flagsInstance[2].length - 2),
                    instanceName: flagsInstance[3].substr(1).substr(0, flagsInstance[3].length - 2),
                    listPdsNull: new Array(),
                    countInstance: idTreeview + "_" + i,
                    countGraph: -1
                };

        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T09:56:03.400

您的代码中有几个问题：

1) 通过数组表示法替换对 dom-Element 的属性进行操作的每一段代码，例如通过使用 jQuery 包装器`attr()`，您可以在其中通过名称或通过访问属性`attributes.onclick /*or*/ attributes["onclick"]`。

原因：未定义属性的顺序，使用数组表示法时可能会访问错误的属性。（在查看控制台输出时，您实际上是这样做的：IE/Chrome 获取`id`属性，而 FF 获取`onclick`属性）旧 IE 还列出了 DOM 元素的几个附加属性（附加的处理程序、内部属性），使这种访问方法完全一文不值。

这很可能会解决您的问题...

此外：

2）缓存你的jQuery元素：

```
var $graph = $('#'+idSelectGraph); 
```

并`$graph`用于每个后续调用。这将提高性能并使重构更加容易。

3) 使用`split(",")`(String) 而不是`split(new RegExp(","))`(Regex) 以获得更好的性能。

编辑以回应您的评论：

```
var fnInstance= $('#counterTreeviewUL'+idTreeview)[0]
                              .children[i].children[0].attribu‌tes[1].value; 
```

应该是这样的：

```
$el = $('#counterTreeviewUL'+idTreeview).first();
var fnInstance = $el.find("id/class/name of the node").attr("name"); 
```

编辑2：

如果我正确理解了您的代码，

```
for (var i=0;i<$('#counterTreeviewUL'+idTreeview)[0].children.length;i++)
   {

        if (!$('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked)
        {   
            $('#counterTreeviewUL'+idTreeview)[0].children[i].children[0].checked=true;
            $el = $('#counterTreeviewUL'+idTreeview).first();
            var fnInstance = $el.find("input").attr("onclick"); 
```

应该是这样的

```
$('#counterTreeviewUL'+idTreeview).first().children().each(function(){

       $el = $(this).children().first();

       if (!$el.prop("checked")){
          $el.prop("checked",true);
          var fnInstance = $el.attr("onclick"); 
```

# jquery - delteing jqgrid row.Response.Response 文本显示完整的 HTML 页面后显示消息

> ID：13120195
> 
> 赞同：1
> 
> 时间：2012-10-29T10:51:28.007
> 
> 标签：jquery, jqgrid

我正在使用 Jqgrid。我想根据服务器 Response 显示 Delete msg 。但是当我使用 response.responsText 时，我得到了完整的 HTML 页面内容.. 帮帮我

```
afterComplete: function(response,postdata,formid) {
    alert("'"+response.responseText+"'")
} 
```

```
DataTable dr = new DataTable();
da.SelectCommand = new SqlCommand("select * from CustomerOrders where QuotationID='" + ID + "'", conn);
conn.Open();
da.SelectCommand.ExecuteNonQuery();
da.Fill(dr);
conn.Close();

if (dr.Rows.Count > 0)
{
    Response.Write("dddd");
}                     
else
{
    da.DeleteCommand = new SqlCommand("delete from QuotationTemplates where QuotationID='" + ID + "'", conn);
    conn.Open();
    da.DeleteCommand.ExecuteNonQuery();
    conn.Close();
    da.DeleteCommand = new SqlCommand("delete from Quotations where ID ='" + ID + "'", conn);
    conn.Open();
    da.DeleteCommand.ExecuteNonQuery();
    conn.Close();
    Response.Write("nave");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:50:45.330

了解您使用的是哪一种 ASP.NET 技术会很有帮助。例如，您可以使用 ASHX 返回您需要的任何类型的数据。

一般来说[Response.Write](http://msdn.microsoft.com/en-us/library/1463ysyw%28v=vs.80%29.aspx) *附加*信息到响应。您可以使用[Response.ClearContent](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.clearcontent%28v=vs.80%29.aspx)（或`Response.Clear`）或[Response.ClearHeaders](http://msdn.microsoft.com/en-US/library/system.web.httpresponse.clearheaders%28v=vs.80%29.aspx)来清除当前响应。此外，您可以考虑设置[Response.ContentType](http://msdn.microsoft.com/en-US/library/system.web.httpresponse.contenttype%28v=vs.80%29.aspx)以将默认`"text/html"`值更改为任何其他值`"text/plain"`，例如。

您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)、[Firebug](http://getfirebug.com/)或 Internet Explorer 开发人员工具的“网络”选项卡（按`F12`开始）或 Google Chrome 来跟踪 jqGrid 和您的服务器之间的 HTTP 流量。

您可以使用另外[的 ajaxDelOptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties2) Ajax 选项，例如`ajaxDelOptions: {dataType: "text"}`，但我认为它并不是真正需要解决您的问题。我想问题的根源仅在服务器端（在您的 ASP.NET 应用程序中）。

# c# - 如何在运行时创建属性？

> ID：13120203
> 
> 赞同：-3
> 
> 时间：2012-10-29T10:51:54.717
> 
> 标签：c#, .net, windows, asp.net-mvc-3

是否可以在 C# 中通过运行时代码（如 MVC3 的 ViewBag）在类中创建属性？

当我们在 MVC3 的 ViewBag 中创建属性时，我想在一个类中创建自定义类型的属性。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:02:10.727

.NET 4 中的动态类型将允许您在运行时创建属性；我认为 ViewBag 实际上是动态类型的一个实例。

顺便说一句，我认为您正在寻找的是在*运行时*创建属性 - 在编译时创建属性意味着像往常一样向您的代码添加一个 getter 和一个 setter！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:54:18.890

使用[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)- 这将允许您添加任意数量的“属性”。

# google-chrome - 如何以编程方式从 crx 文件中获取 chrome 扩展 ID？

> ID：13120210
> 
> 赞同：2
> 
> 时间：2012-10-29T10:52:19.420
> 
> 标签：google-chrome, google-chrome-extension

`--pack-extension`我使用开关编译扩展：

```
C:\Users\APOL0\AppData\Local\Google\Chrome\Application>chrome.exe --pack-extension="D:\MyExt" 
```

一切正常：chrome 生成`Myext.crx`，`Myext.pem`但我不知道如何获取扩展 ID 以使用 Windows 的注册表进行自动安装。

如何在不使用“手动验证”的情况下获取此 ID，即。以编程方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T00:54:21.450

**2018 年 5 月 14 日编辑**：添加说明并链接到第 3 方工具。

没有官方支持的方法（在撰写本文时）以编程方式从 CRX 获取扩展 ID，而无需手动与 Chrome 交互。（见下方官方方法）

## 非官方方法

我发现任何在线参考的唯一编程方法是在[这个 SO answer](https://stackoverflow.com/a/16993487/1267724)上。答案的作者后来发布了一个指向他们编写的[ChromeIdGenerator 工具的链接。](https://github.com/dsoprea/ChromeIdGenerator)该工具基于 Chrome 在该点计算其扩展 ID 的方式。全面披露：我没有测试该工具以确保其准确性，它只是我发现的唯一可以完成您所要求的工具。

## 官方方法（手动）

如果您打开 Chrome 扩展管理器页面，您可以将您的扩展拖放`Myext.crx`到页面上（您必须处于“开发者模式”），它将加载您的扩展，向您显示新的扩展 ID。

# vb6 - 我想从 txt 文件中读取最后 400 行

> ID：13120211
> 
> 赞同：1
> 
> 时间：2012-10-29T10:52:22.077
> 
> 标签：vb6

我知道如何在 VB.Net 中做到这一点，但在 vb6 中不知道。
我要实现的是避免读取整个文件。
那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:10:44.740

您可以使用随机访问打开文件。一次向后工作一个字节，计算回车换行字符对的数量。将每一行存储在一个数组或类似的东西中，当你读完 400 行时，停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:41:07.503

Cometbill 有一个很好的答案。

要打开文件以进行随机访问：

```
Open filename For Random Access Read As #filenumber Len = reclength 
```

要以字节为单位获取文件的长度：

```
FileLen(ByVal PathName As String) As Long 
```

从随机访问文件中读取：

```
Get [#]filenumber,<[recnumber]>,<varname> 
```

**重要提示：**函数的`<varname>`from`Get`必须是固定长度的字符串`Dim varname as String * 1`，否则`Bad record length (Error 59)`如果将变量声明为像这样的可变长度字符串，则会出错`Dim varname as String`

## 编辑：

只是想指出，`Dim varname as String * 1`您正在定义一个固定长度的字符串，长度为 1。这是如果您希望使用 read-1-byte-backwards 方法。如果您的文件有固定长度的记录，则无需一次走 1 个字节，您可以一次读取一条记录（不要忘记添加 2 个字节用于回车和换行）。在后一种情况下，您将定义`Dim varname as String * X`X 是记录长度 + 2 的位置。然后一个简单的循环向后 400 次或直到到达文件的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:28:04.930

以下是我对此的看法。如果您有一个非常大的文件，这比前两个答案更有效，因为我们不必将整个文件存储在内存中。

```
Option Explicit

Private Sub Command_Click()

    Dim asLines()                           As String

    asLines() = LoadLastLinesInFile("C:\Program Files (x86)\VMware\VMware Workstation\open_source_licenses.txt", 400)

End Sub

Private Function LoadLastLinesInFile(ByRef the_sFileName As String, ByVal the_nLineCount As Long) As String()

    Dim nFileNo                             As Integer
    Dim asLines()                           As String
    Dim asLinesCopy()                       As String
    Dim bBufferWrapped                      As Boolean
    Dim nLineNo                             As Long
    Dim nLastLineNo                         As Long
    Dim nNewLineNo                          As Long
    Dim nErrNumber                          As Long
    Dim sErrSource                          As String
    Dim sErrDescription                     As String

    On Error GoTo ErrorHandler

    nFileNo = FreeFile

    Open the_sFileName For Input As #nFileNo

    On Error GoTo ErrorHandler_FileOpened

    ' Size our buffer to the number of specified lines.
    ReDim asLines(0 To the_nLineCount - 1)
    nLineNo = 0

    ' Read all lines until the end of the file.
    Do Until EOF(nFileNo)
        Line Input #nFileNo, asLines(nLineNo)
        nLineNo = nLineNo + 1
        ' Check to see whether we have got to the end of the string array.
        If nLineNo = the_nLineCount Then
            ' In which case, flag that we did so, and wrap back to the beginning.
            bBufferWrapped = True
            nLineNo = 0
        End If
    Loop

    Close nFileNo

    On Error GoTo ErrorHandler

    ' Were there more lines than we had array space?
    If bBufferWrapped Then
        ' Create a new string array, and copy the bottom section of the previous array into it, followed
        ' by the top of the previous array.
        ReDim asLinesCopy(0 To the_nLineCount - 1)
        nLastLineNo = nLineNo
        nNewLineNo = 0
        For nLineNo = nLastLineNo + 1 To the_nLineCount - 1
            asLinesCopy(nNewLineNo) = asLines(nLineNo)
            nNewLineNo = nNewLineNo + 1
        Next nLineNo
        For nLineNo = 0 To nLastLineNo
            asLinesCopy(nNewLineNo) = asLines(nLineNo)
            nNewLineNo = nNewLineNo + 1
        Next nLineNo
        ' Return the new array.
        LoadLastLinesInFile = asLinesCopy()
    Else
        ' Simply resize down the array, and return it.
        ReDim Preserve asLines(0 To nLineNo)
        LoadLastLinesInFile = asLines()
    End If

Exit Function

ErrorHandler_FileOpened:
    ' If an error occurred whilst reading the file, we must ensure that the file is closed
    ' before reraising the error. We have to backup and restore the error object.
    nErrNumber = Err.Number
    sErrSource = Err.Source
    sErrDescription = Err.Description
    Close #nFileNo
    Err.Raise nErrNumber, sErrSource, sErrDescription

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Function 
```

# mysql - 使用 SQLAlchemy Migrate 删除重复的外键

> ID：13120214
> 
> 赞同：0
> 
> 时间：2012-10-29T10:52:29.707
> 
> 标签：mysql, foreign-keys, sqlalchemy, sqlalchemy-migrate

错误地我添加了两个外键引用同一个表和列。`SHOW CREATE TABLE table_a`看起来像：

```
table_a | CREATE TABLE `table_a` (
`id` char(36) NOT NULL,
`fk` int(11) default NULL,
`created_at` datetime default NULL,
PRIMARY KEY  (`id`),
KEY `fk` (`fk`),
CONSTRAINT `table_a_ibfk_1` FOREIGN KEY (`fk`) REFERENCES `table_b` (`id`),
CONSTRAINT `table_a_fkey` FOREIGN KEY (`fk`) REFERENCES `table_b` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

此时我唯一的解决方案是遍历列上的所有键/约束并删除它们，然后再添加一次级联键。

[有没有办法使用SQLAlchemy Migrate](http://sqlalchemy-migrate.readthedocs.org/)仅删除非级联约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:30:42.177

你试过了吗？

```
cons = ForeignKeyConstraint(columns=[table.c.fk],
                            refolumns=[table_b.c.id],
                            name="table_a_ibfk_1")
cons.drop(engine=migrate_engine) 
```

# postgresql - Postgresql：使用触发器插入记录

> ID：13120215
> 
> 赞同：2
> 
> 时间：2012-10-29T10:52:39.010
> 
> 标签：postgresql, plpgsql

```
CREATE TABLE users
(
 id integer NOT NULL DEFAULT nextval('userseq'::regclass)
 ........
)

CREATE TABLE History
(
 userid integer,
 createdat timestamp with time zone
)

CREATE OR REPLACE FUNCTION recordcreatetime()
      RETURNS trigger AS
        $BODY$
        BEGIN
                NEW.createdAt = NOW();
                RETURN NEW;
        END;
        $BODY$
          LANGUAGE plpgsql VOLATILE
          COST 100; 
```

用户和历史是一对一的关系。在创建新用户之前，我如何在历史记录表中插入新记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:15:28.377

```
CREATE OR REPLACE FUNCTION recordcreatetime()
  RETURNS trigger 
language plpgsql
AS $$
DECLARE
BEGIN
INSERT INTO History values(new.id,NOW() );
 RETURN NEW;
END;
$$; 
```

并将触发语句写为

```
CREATE TRIGGER user_hist
BEFORE INSERT ON users
FOR EACH ROW EXECUTE function  recordcreatetime() ; 
```

# matlab - [MATLAB]：我将如何在数学上和视觉上重现新国王十字“西广场”的 3D 表面？

> ID：13120220
> 
> 赞同：4
> 
> 时间：2012-10-29T10:52:46.840
> 
> 标签：matlab, 3d, geometry-surface

有人对我有任何入门提示吗？我想从中学习（即不想偷懒，让别人为我回答这个问题）。

我想加深对数学 3D 表面的理解。我自己的个人项目是在 MATLAB 中生成大厅结构的 3D 表面/图形。

[我在这里](http://bit.ly/KCWestCon)找到了一个链接，上面有它的几何图形的好图片。我并不期望能 100% 完美地得到它，但我想接近它！

在本练习结束时，我希望获得几何的数学定义以及表面的可视化表示。这可能涉及笛卡尔方程、参数方程、矩阵等。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:57:47.397

为 MATLAB 提供一些具体建议：

我会从您链接的网页加载“部分”图像，并将其显示在 MATLAB 图形窗口中。然后，您可以尝试在顶部绘制线条，直到找到适合的线条。所以你可能会做类似的事情：

```
A = imread('~/Desktop/1314019872-1244-n364-1000x707.jpg');
imshow(A)
hold on
axis on

%# my guess at the function - obviously not a good fit
x = [550:900];
plot(x, 0.0001*x.^2 + 300) 
```

![在此处输入图像描述](../Images/eb000835af7c46380ce0786952cfd3bb.png)

当然，您可能想要移动原点的位置或裁剪图片等。

作为这种试错法的一个可以说是更好的替代方法，您可以跟踪该部分的轮廓（例如，通过单击类似 的点[`ginput`](http://www.mathworks.co.uk/help/matlab/ref/ginput.html)），然后使用 MATLAB 的[曲线拟合](http://www.mathworks.co.uk/products/curvefitting/)工具之一（例如[`fit`](http://www.mathworks.co.uk/help/curvefit/fit.html)）来拟合函数以数据。

最终的 3D 形状在我看来（不经意间）是围绕中心轴的截面形状的 3D 旋转。因此，使用[圆柱坐标系](http://www.mathworks.co.uk/help/matlab/ref/pol2cart.html)可能是一个好主意。

您的 3D 形状的最终绘图可以使用诸如[`surf`](http://www.mathworks.co.uk/help/matlab/ref/surf.html)或之类的函数来完成[`mesh`](http://www.mathworks.co.uk/help/matlab/ref/mesh.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:28:29.900

我将首先定义一个函数，该函数为每个 x、y 坐标定义是否有一个点 z，如果有，则使用哪个高度。

这个形状让我想起了一点对数或平方根。

# c++ - 将算法参数设置定义为 C++ 中的独立类是一种好习惯吗？

> ID：13120221
> 
> 赞同：1
> 
> 时间：2012-10-29T10:52:52.440
> 
> 标签：c++

我想知道将算法参数设置定义为独立类是否是一种好习惯。我用以下代码说明我的问题：

```
using namespace std;

class Parameters
{
public:
    Parameters():a_para_(0),b_para_(0) {};
    ~Parameters() {};
    Parameters(const Parameters &para)
    {
        a_para_ = para.a_para_;
        b_para_ = para.b_para_;
    }
    void set_a_parameter(int a)
    {
        a_para_ = a;
    }
    void set_b_parameter(int b)
    {
        b_para_ = b;
    }
private:
    int a_para_;
    int b_para_;
};

class Algorithm
{
public:
    Algorithm() {};
    ~Algorithm() {};
    void set(const Parameters &para)
    {
        para_ = para;
    }
    void run()
    {
    }
private:
    Parameters para_;
};

int main()
{
    Parameters para;
    para.set_a_parameter(3);
    para.set_b_parameter(4);
    Algorithm fun;
    fun.set(para);
    fun.run();

    return 0;
} 
```

背后的理念是参数设置和算法实现可以分开。我和一位经验丰富的程序员讨论了这个设计策略，他似乎更喜欢参数设置和算法应该混合在一起作为一个类。因此，我在这里写信征求您的意见：哪个更好？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:09:34.560

你的问题很笼统，没有笼统的答案。这取决于实际情况。

通常，您希望能够在编译时确定算法的参数（例如，给定缓冲区的大小，或矩阵的维度，或树节点的数量）。通常这些参数在你的算法“实例”的生命周期内不会改变，可以这么说。在这种情况下，将您的算法类转换为模板，并将这些参数作为模板参数通常是一种很好的做法。

如果参数必须在算法生命周期内更改，但它们的实现很简单，则无需将它们外部化。如果它们不重要，并且它们的实现细节可能会改变算法性能（例如：基于密集矩阵的数组的矩阵实现，或稀疏矩阵的链表），那么我想您可以将该参数外部化。

如果您想获得更好的答案，我认为您应该问一个更具体的问题。

# zend-framework2 - 如何在 wamp 上安装 Zend Framework 2.0？

> ID：13120223
> 
> 赞同：5
> 
> 时间：2012-10-29T10:52:56.247
> 
> 标签：zend-framework2

我是 Zend Framework 的新手，我想在 wamp 上配置 Zend Framework 2.0。谁能给我一步一步的 ZF 2.0 程序

# php - WordPress 本地主机 ftp

> ID：13120226
> 
> 赞同：42
> 
> 时间：2012-10-29T10:53:24.360
> 
> 标签：php, macos, wordpress, localhost

我在 mac Lion 上的本地主机上运行 wordpress。

每次我尝试安装或删除插件时，它都会询问我主机名、ftp 用户名和 ftp 密码。

我将本地主机配置为 127.0.0.1，但我从未为本地主机配置 ftp 用户名和密码。如何获取默认的用户名和密码？

我已经尝试了几乎每个用户，并通过了我在 mysql、我的 osx 管理员等上的所有结果，但没有任何结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-04-01T11:29:57.563

**正如 Chaudhry Waqas**`define('FS_METHOD', 'direct');`在评论中提到的那样，仅添加到可能就足够了`wp-config.php`，所以请先尝试一下，因为如果没有必要，不要更改访问权限会更安全

> **警告：**仅在您的本地计算机上执行此操作，这对公共安装来说是一个巨大的安全风险！
> 
> 我没有尝试过，但正如@misterfancypants 评论所述，仅更改这些设置`wp-content/plugins/`应该足以
> **更新**以包含此信息

这个对我有用

```
$ cd /Users/<username>/Sites
# (wordpress = name of the directory, change as needed)
$ sudo chown -R :_www wordpress
$ sudo chmod -R g+w wordpress 
```

然后在 wp-config.php 中添加以下内容

```
define('FS_METHOD', 'direct'); 
```

在[http://soderlind.no/running-wordpress-locally-on-mac-os-x-lion/#crayon-533a956214a8e343167867上找到](http://soderlind.no/running-wordpress-locally-on-mac-os-x-lion/#crayon-533a956214a8e343167867)

干杯可以

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-05-04T06:39:18.623

我通过以下方式修复了它：

```
cd /var/www
sudo chown -R www-data:www-data wordpress 
```

更新于 03-05-2019

```
cd /var/www
sudo chown -R www-data:www-data [YOUR_WORDPRESS_PROJECT_DIR] 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-05-23T07:39:03.217

实际上，问题是WordPress创建了一个临时文件来检查文件权限

并将**临时文件的所有者**与其**核心文件的所有者**（参考[fileowner()](http://php.net/manual/en/function.fileowner.php)） **进行比较**，**两者都应该匹配**。**在大多数情况下，它在localhost**上不匹配，因此我们在不同的用户访问中提取了 wp 文件，并且 PHP 有自己的用户组。

 ******所以有两种方法可以解决这个问题。

***方式一：***

```
cd wordpress
sudo find . -type d -exec chmod 0755 {} \;
sudo find . -type f -exec chmod 0644 {} \; 
```

和以下

```
define( 'FS_METHOD', 'direct' ); 
```

在 wp-config.php 中

这不检查任何文件**所有者**只是使用直接文件系统

***方式2***

放

`sudo chown -R www-data:www-data wordpress`

这将两个 WordPress 都设置为**www-data**使用，因此实际上临时文件（由 WordPress 创建）也位于该用户内部，因此两个文件所有者相同，因此问题解决了

更多信息参考：[https ://developer.wordpress.org/reference/functions/get_filesystem_method/](https://developer.wordpress.org/reference/functions/get_filesystem_method/)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-07-10T05:49:58.503

将此添加到您的**config.php**文件中，

```
define('FS_METHOD','direct'); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-29T11:46:03.627

根据我的经验，在没有 FTP 的情况下进行自我更新时，WordPress 可能对权限和所有权有点挑剔，所以我会说，使用 FTP 到 localhost 是一种完全有效的策略。但正如其他人所说，只要确保从您的 WordPress 根目录向下的所有内容都可以由 PHP 进程写入，并且归同一用户所有，就足以避免对 FTP 的需求。

如果你确实想使用 FTP，你确定你已经[启用了 FTP 服务器](http://www.itworld.com/software/191971/enable-ftp-server-mac-os-x-lion)吗？如果是这样，您应该只使用有权通过 FTP 访问目录的用户（您可以使用命令行 ftp 工具进行测试。）由于我的站点是在我的个人`Sites`目录中设置的，所以我只使用我的普通用户名和密码（例如，`/Users/matt/Sites/whatever`我以 . 身份登录`matt`。）

其他要检查的事项：如果您`ftp localhost`在命令行上尝试会发生什么？可以在那里登录吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-09T10:58:59.763

编辑 wp-config.php 文件并添加下面提到的代码：

```
define('FS_METHOD','direct'); 
```******

# magento - Magento 中的 direct_front_name 标签是干什么用的

> ID：13120227
> 
> 赞同：4
> 
> 时间：2012-10-29T10:53:33.533
> 
> 标签：magento, config

一些模块`<request><direct_front_name>...</direct_front_name></request>`在其模块配置中有一个，例如`xmlconnect`和`api`. 这个标签是干什么用的？

**我认为它的用途是：**
`xmlconnect`并且`api`都用作站点的直接入口点（与主要从站点内部访问的普通模块相反）。因此，结合在商店 url 中使用商店代码的选项，您可以指定一个 direct_front_end 标签，以使这些模块不需要商店代码。这样在没有商店代码的情况下调用它们时就没有 404。

（有点自己回答，但在网上找不到任何有关它的信息。可能对其他人有用。也许有人要补充一些东西。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:52:10.167

你完全正确。并且 php DOC 清楚地说明了这一点：

```
Mage_Core_Controller_Request_Http::isDirectAccessFrontendName() :

/**
     * Check if code declared as direct access frontend name
     * this mean what this url can be used without store code
     *
     * @param   string $code
     * @return  bool
     */
    public function isDirectAccessFrontendName($code) 
```

# java - Java：循环内变量的几种可能类型

> ID：13120232
> 
> 赞同：0
> 
> 时间：2012-10-29T10:53:56.583
> 
> 标签：java, oop, generics, reflection

我必须解决一个工作问题，因为我对java不是很流利，所以我坚持使用它。

简而言之，我有一个循环，它通过 a`Map<String, String>`值定义循环内部的变量类型的名称。我试图以多种方式解决问题；我使用了反射和一些通用类，但问题总是一样的：程序无法访问该生成对象的方法，因为我无法确定它的类型。当对象被调用时，我必须接收一个`ArrayList<String>`并将其附加到一个，这是在项目的主类中定义的（顺便说一句：eclipse 没有显示任何错误，我得到一个运行时异常）。

**所以问题是：我如何能够从循环内部的字符串（我假设使用反射）分配具有动态类型的变量并从存储在其中的对象访问方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:02:39.647

到目前为止，听起来应该是这样的：

```
for (Map.Entry<String, String> entry : myMap.entrySet()){

    Class<?> clazz = Class.forName(entry.getValue());
    ADBBean bean = (ADBBean)clazz.newInstance();
    Method method = clazz.getMethod("methodName", String.class, Integer.class, etc);
    method.invoke(bean, "blah", 145);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:57:09.110

我认为您正在寻找模板/通用编程。 [http://en.wikipedia.org/wiki/Generics_in_Java](http://en.wikipedia.org/wiki/Generics_in_Java)

# jquery - window.mozindexdb 在 Firefox 14 到 16 版本中为空

> ID：13120236
> 
> 赞同：0
> 
> 时间：2012-10-29T10:54:15.190
> 
> 标签：jquery, html

我在 Firefox 版本 14-16 中打开没有 HTTP 协议的文件。

我无法打开`indexdb`. 我的语法是这样的：

```
window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.msIndexedDB;
var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
var request = window.indexedDB.open(dbname, dbversion);
request.onsuccess = function (evt) {
    alert('Success')
}; 
```

使用 Firebug，我可以`window.mozIndexedDB`看到`null`.

在 localhost 中它工作正常，但我需要在没有 HTTP 的情况下运行。

是否需要对我的代码进行任何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:21:31.047

在“安全”季节的文件协议上禁用了很多东西。我试图在 Mozilla 网站上找到原因，但他们在 MDN 上没有提到任何关于限制的地方。但是如果你去黑暗的一面，微软会提到限制。

来自[微软的网站](http://msdn.microsoft.com/en-us/library/ie/hh779017%28v=vs.85%29.aspx)：

> 注意以下代码示例需要支持文件 API 和索引数据库 API 的浏览器，例如 Internet Explorer 10 或更高版本。此外，每个示例都有一个关联的“实时链接”，它链接到工作代码示例（使用 http 协议）。出于安全原因，索引数据库 API 仅通过 Windows Internet Explorer 中的 http、https、ms-wwa 或 ms-wwa-web 协议工作。也就是说， **Internet Explorer 不允许本地 HTML 页面 (file://) 完全执行索引数据库 API。**相反，该页面必须使用受支持的协议，例如 http:// 或 https://。如果方便，可以使用本地 Web 服务器使用环回地址 (127.0.0.1) 预览 IndexedDB 页面。

# servlets - HttpServletResponse 缓冲区清除

> ID：13120238
> 
> 赞同：0
> 
> 时间：2012-10-29T10:54:18.197
> 
> 标签：servlets, response

当我们使用 forward 时，forward 方法会清除响应，然后将其发送给另一个 servlet。我想在使用重定向时做同样的事情。基本上正在发生的事情是：

1.  我点击了第 1 页的 url
2.  在第 1 页中，我有将我重定向到第 2 页的代码
3.  我被重定向到第 2 页，但第 1 页暂时出现在屏幕上（我想避免这种情况）

我之前尝试过使用`response.resetBuffer()`and ，但没有帮助。出于某种原因，使用重定向是必要的，我不能使用转发。`response.reset()``response.sendRedirect()`

# sharepoint-2010 - SharePoint 中会话的替代方案

> ID：13120245
> 
> 赞同：1
> 
> 时间：2012-10-29T10:54:40.363
> 
> 标签：sharepoint-2010

我已经读过默认情况下在 SharePoint 中禁用了 Session（我听说过由于性能）。我的情况似乎适合会话，但如果我能提供帮助，我不想启用会话，我更愿意查看替代方案，但我正在努力找出它们是什么。我可以找到很多讨论如何启用它的问题，但在替代品上找不到太多。

我的情况是我希望有一个组合框出现在我的解决方案中的大多数页面上。这个组合框将在几乎每个页面上稍微修改数据绑定（通过修改变量），我希望它在整个站点上为用户保持一致。几乎就像“您希望页面使用什么语言？” 或“您希望数据用于哪一年？”。显然，这些信息应该在每个用户的基础上持久化，特别是当用户注销时它是否丢失并不重要。

除了使用会话之外，我还有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:04:30.760

您是否尝试过使用 cookie 来存储客户端的信息？沿着[这些思路](http://www.datasprings.com/resources/articles-information/cookie-creation-session-management)

这可能有效，但也可能会引入更多复杂性，具体取决于下拉菜单在页面生命周期中的呈现位置。

这也可能是一个安全问题，但对于简单的过滤数据，这不应该是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:53:31.090

我不确定 Session 是否因性能而被禁用，因为它可能因多个 Web 前端而被禁用。如果您的 Web 应用程序位于只有一个前端的场中，您可能需要尝试启用 Session。您实际上可能会看到性能提升，因为突然之间，SharePoint 将存储在内容数据库中的状态不再是往返，而是现在在 Web 服务器上可用。至少，这是我的经验。我注意到在接收中等音量的单个前端场上启用 Session 会略微提高性能。

也就是说，如果 Session 肯定退出，我可能会选择 cookie，就像@agrothe 建议的那样。如果 cookie 没有了，并且它是一个单一的前端农场，我可能会尝试网站 Property Bag。但正如[这里](http://social.msdn.microsoft.com/Forums/eu/sharepointdevelopmentlegacy/thread/7d4ed3c2-343b-4d0d-9b65-878ca786bbb8)所指出的，Property Bag 并不是真正意义上的 Session 替代品，因此您需要确保使用唯一键并在完成后删除键值对。

# c++ - 如何在 C 上使用 D3DXSaveTextureToFileW 将文件名保存为时间戳？

> ID：13120250
> 
> 赞同：2
> 
> 时间：2012-10-29T10:54:46.370
> 
> 标签：c++, timestamp, filenames

我在使用 C++ 时遇到了一些问题。我正在尝试将文件名作为时间戳保存的帧，但没有成功，有人可以帮我吗？

如果我使用它可以正确保存：

`D3DXSaveTextureToFileW((LPCWSTR)"file.bmp",D3DXIFF_BMP,tex,NULL);`或者

```
D3DXSaveTextureToFileW(L"file.bmp", frameName,D3DXIFF_BMP,tex,NULL); 
```

但是如果我尝试一些更详细的文件名，我会遇到一些问题，它会编译但不会保存文件......

我正在尝试使用类似的东西

```
LPCWSTR frameName;
std::string s = std::string("file") + std::string(".bmp");
frameName = (LPCWSTR)s.c_str();
D3DXSaveTextureToFileW((LPCWSTR)frameName,D3DXIFF_BMP,tex,NULL); 
```

不保存......如果我尝试像我想保存的东西，问题仍然存在：

```
time_t seconds;
seconds = time (NULL);      
time_t rawtime;
time ( &rawtime );

LPCWSTR frameName;
std::string s = std::string("file") + std::string(&rawtime);
frameName = (LPCWSTR)s.c_str();

D3DXSaveTextureToFileW((LPCWSTR)frameName,D3DXIFF_BMP,tex,NULL); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:02:26.097

您不能将`std::string::c_str()`(a `const char*`) 的结果转换为 a `LPCWSTR`。使用 a[`std::wstringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)构造文件名：

```
#include <sstream>
...
std::wstringstream frameName;
frameName << L"file" << rawtime << L".bmp";
D3DXSaveTextureToFileW(frameName.str().c_str(),D3DXIFF_BMP,tex,NULL); 
```

如果你想存储`frameName.str()`使用 a的结果`std::wstring`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:05:02.413

您不能简单地将 a`char*`转换为 a `wchar_t*`。这还不够。您需要将文本从 8 位编码转换为 16 位编码。

也就是说，由于您似乎在程序中使用了 ANSI 字符串，所以它可能更容易使用`D3DXSaveTextureToFileA`.

例如：

```
std::string s = std::string("file") + std::string(".bmp");
D3DXSaveTextureToFileA(s.c_str(),D3DXIFF_BMP,tex,NULL); 
```

话虽如此，如果这是专业软件，我建议您在整个应用程序中使用 UNICODE 文本。在这种情况下，你会这样做：

```
std::wstring s = std::wstring(L"file") + std::wstring(L".bmp");
D3DXSaveTextureToFileW(s.c_str(),D3DXIFF_BMP,tex,NULL); 
```

# javascript - 用于匹配 `abcwxyz01` 和 `mabcwxyz01` 的 JavaScript 正则表达式（字符串 + 两位数）

> ID：13120251
> 
> 赞同：-1
> 
> 时间：2012-10-29T10:54:51.063
> 
> 标签：javascript, regex

谁能帮我创建一个正则表达式来匹配`abcwxyz<two_digit_num>`和`mabcwxyz<two_digit_num>`？

字母总是相同的，但**两位数**（总是两位数）可以是任何形式`01`，`99`并且字符串有时可能在开头有字母 m。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:58:28.040

```
var regex = /m?abcwxyz<\d{2}>/ 
```

不带尖括号：

```
var regex = /m?abcwxyz\d{2}/ 
```

如果您想确保这是整个字符串，请确保锚定您的正则表达式（`^`- 匹配字符串/主题的开头，`$`匹配字符串/主题的结尾）：

```
var regex = /^m?abcwxyz\d{2}$/ 
```

# c# - DbGeography + 实体框架 5 + Silverlight + DomainService

> ID：13120252
> 
> 赞同：0
> 
> 时间：2012-10-29T10:55:03.077
> 
> 标签：c#, silverlight, entity-framework, domainservices

我已经使用 DbGeography 创建实体并将其添加到我的域服务中。但是我的 SL 应用程序没有看到这个文件。如何在 SL5 应用程序中使用 DbGeography？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:13:19.897

不幸的是，您不能在 Silverlight 中使用 DbGeography。不支持。您必须将 DbGeography 转换为字符串（Well Known Text）、byte[]（Well Known Binary）或您自己的自定义表示，并在 Silverlight 应用程序中以该格式使用它。

# c# - 将 Canvas 转换为 .png 图像。WPF 应用程序出现故障

> ID：13120253
> 
> 赞同：1
> 
> 时间：2012-10-29T10:55:03.390
> 
> 标签：c#, wpf, wpf-controls

我有一些方法可以将 System.Windows.Controls.Canvas Control 转换为 .png 图像并保存在目录中。我为某些 List <Canvas> 调用此函数，并在某个目录中获取所有图像。它工作正常，但有时此函数会随机生成一些空白图像，再次调用此函数也会完美地生成所有图像。这种故障背后的原因可能是什么？下面是函数

```
 public bool GenerateICards(Canvas surface)
        {
            bool retVal = false;
            try
            {
                // Save current canvas transform
                Transform transform = surface.LayoutTransform;
                // reset current transform (in case it is scaled or rotated)
                surface.LayoutTransform = null;

                // Get the size of canvas
                Size size = new Size(surface.Width, surface.Height);

                // Measure and arrange the surface
                // VERY IMPORTANT
                surface.Measure(size);
                surface.Arrange(new Rect(size));

                // Create a render bitmap and push the surface to it
                RenderTargetBitmap renderBitmap =
                  new RenderTargetBitmap(
                    (int)size.Width,
                    (int)size.Height,
                    96d,
                    96d,
                    PixelFormats.Pbgra32);
                renderBitmap.Render(surface);

                // Create a file stream for saving image
                using (FileStream outStream = new FileStream(SessionHelper.Path.PrintImage, FileMode.Create, FileAccess.Write, FileShare.None))
                {
                    // Use png encoder for our data
                    PngBitmapEncoder encoder = new PngBitmapEncoder();
                    // push the rendered bitmap to it
                    encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
                    // save the data to the stream
                    encoder.Save(outStream);
                }
                // Restore previously saved layout
                surface.LayoutTransform = transform;
                // i++;
                retVal = true;
            }
            //}
            catch (Exception)
            {
                ErrorLbl = "Error occured while generating temporary images.";
            }
            return retVal;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:51:56.627

刚换

`renderBitmap.Render(surface);`

函数中的行（上述问题中的函数）

```
 Rect bounds = VisualTreeHelper.GetDescendantBounds(surface);
                DrawingVisual dv = new DrawingVisual();
                using (DrawingContext ctx = dv.RenderOpen())
                {
                    VisualBrush vb = new VisualBrush(surface);
                    ctx.DrawRectangle(vb, null, new Rect(new Point(), bounds.Size));
                }

                renderBitmap.Render(dv); 
```

这解决了我的问题。有关详细信息，请查看：http: [//blogs.msdn.com/b/jaimer/archive/2009/07/03/rendertargetbitmap-tips.aspx](http://blogs.msdn.com/b/jaimer/archive/2009/07/03/rendertargetbitmap-tips.aspx)

此链接由 **colinsmith**提供（在问题的评论部分）。

# c# - c# 开发环境和生产环境之间的图像缩放质量不同

> ID：13120278
> 
> 赞同：1
> 
> 时间：2012-10-29T10:56:36.860
> 
> 标签：c#, asp.net, image-resizing

我创建了一个调整图片大小和裁剪图片的函数，然后保存生成的图像文件。在我的开发环境中，它工作得很好，但在生产中，生成的图像是“颗粒状的”。你可以在这里看到不同的质量[http://test.powersport.it/canc2.aspx](http://test.powersport.it/canc2.aspx)

这是生成调整大小和裁剪图像的代码

```
 // width: width of cropped img - height: height of cropped img
    System.Drawing.Bitmap thumbnail = new Bitmap(width, height);
    // image: original System.Drawing.Image containing full size img
    thumbnail.SetResolution(image.HorizontalResolution, image.VerticalResolution);
    // size[0]: width of resized img - size[1]: height of resized image
    System.Drawing.Image mini = new Bitmap(image, size[0], size[1]);
    System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(thumbnail);

    g.InterpolationMode = InterpolationMode.HighQualityBicubic;
    g.SmoothingMode = SmoothingMode.HighQuality;
    g.PixelOffsetMode = PixelOffsetMode.HighQuality;
    g.CompositingQuality = CompositingQuality.HighQuality;

    g.DrawImage(mini, ((width - size[0]) / 2), ((height - size[1]) / 2), size[0], size[1]);

    EncoderParameters encoderParameters;
    encoderParameters = new EncoderParameters(1);
    ImageCodecInfo[] info = ImageCodecInfo.GetImageEncoders();

    // img: original file name
    switch (Path.GetExtension(img).ToLower())
    {
        case ".png": //       info[4]
            thumbnail.Save(dest, System.Drawing.Imaging.ImageFormat.Png);
            break;
        case ".bmp": //       info[0]
            thumbnail.Save(dest, System.Drawing.Imaging.ImageFormat.Bmp);
            break;
        case ".tiff": //      info[3]
            encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionLZW);
            thumbnail.Save(dest, info[3], encoderParameters);
            break;
        case ".tif": //      info[3]
            encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionLZW);
            thumbnail.Save(dest, info[3], encoderParameters);
            break;
        default: //jpeg      info[1]
            encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, compression);
            thumbnail.Save(dest, info[1], encoderParameters);
            break;
    } 
```

任何帮助表示赞赏。谢谢。

**更新**：我尝试过使用 PNG、BMP 和 TIFF，但它们有同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:34:49.297

### 您假设每台机器在完全相同的索引处具有完全相同的编码器。

尽管文件扩展名不同，但很可能每台机器实际上都在以不同的格式压缩图像。

WS2008 和 WS2008 R2 有不同的图形子系统。在后者中，GDI+ 只是 WIC 编码器的包装器，它有不同的怪癖发送。

我真的希望您决定[使用为您处理这些差异的库](http://imageresizing.net)。服务器端映像既不简单也不直观，[需要避免的陷阱数不胜数](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls)。除了您在这里遇到的编码问题之外，您似乎认为 .NET 实际上会从`System.Drawing`命名空间中垃圾收集类。它不会，除非每个引用都在`using(){}`子句中，否则您将遇到一些严重的稳定性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:04:03.130

这是一个非常有趣的问题，基于您提供的事实，`compression=100`您可能会认为根本不应该应用压缩。

不幸的是，根据[MSDN 关于设置 JPEG 压缩级别的文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533844%28v=vs.85%29.aspx)：

> 质量等级 0 对应于最大压缩，质量等级 100 对应于最小压缩。

所以`100`并不意味着没有压缩，它意味着尽可能少的压缩。

至于它因机器而异，这是相当一致的 - 我已经观察到这一点，甚至还有一些关于 Stack Overflow的其他[问题。](https://stackoverflow.com/questions/11872850/jpeg-decompression-inconsistent-across-windows-architectures)

由于压缩的实际机制由 GDI+（.Net 框架之外）处理，因此它将取决于机器上安装的实际版本。

# .net - 如何使用 DataRow 的内容？

> ID：13120281
> 
> 赞同：0
> 
> 时间：2012-10-29T10:56:42.877
> 
> 标签：.net, casting, polymorphism, tostring, datarow

如果 a`DataRow`已通过使用`DbCommand`and生成`DbDataAdapter`，您如何访问 中单个值的内容`DataRow`？

如果我知道`DataRow("MyField")`它将包含 a `String`，我该如何`String`摆脱这个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:03:38.853

它是转换成你要找的字符串吗？

```
 DataRow("MyField") as string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:03:44.210

你只需要投射到`String`对象

```
DataRow dr = .....//retrive the DataRow object
String yourString = (String)dr["MyField"];
//or if you use System.Linq;
String yourString = dr.Field<String>("MyField"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T09:40:09.780

如果知道该字段的数据类型是 a `String`，那么可以简单地将其分配给一个`String`变量：

```
Dim strMyField As String = row("MyField") 
```

如果字段的数据类型实际上不是 a ，则可能会引发异常`String`。

# haskell - 如何随机播放字符串字符

> ID：13120282
> 
> 赞同：0
> 
> 时间：2012-10-29T10:56:45.363
> 
> 标签：haskell

我想洗牌字符串字符，我在 Data.Random.Extras 中找到了“洗牌”功能。但是当我尝试导入它时，我收到错误消息：

```
*Main> import Data.Random

<no location info>:
    Could not find module `Data.Random':
      Use -v to see a list of the files searched for. 
```

我怎样才能导入这个包？或者也许还有另一种方法来洗牌字符串字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:00:43.037

这个包不附带 Haskell，需要安装。

你以前用过`cabal`吗？您可以使用安装新软件包

```
cabal install random-extras 
```

# php - 如何在openx模板（template.html）中嵌入for语句

> ID：13120285
> 
> 赞同：0
> 
> 时间：2012-10-29T10:57:06.890
> 
> 标签：php, html, openx

现在我正在写一个openx插件。但现在我有一个从数据库中获取的数组数据。当我使用语句 foreach 嵌入到 html 页面（openx 中的模板）时，我写道：

```
<table>
        <thead>
            <tr>
                <td>Id</td>
                <td>Name</td>
                <td>Description</td>
                <td>Action</td>
            </tr>
        </thead>
    {foreach key=id item=row from=$rsResult}
    <tr>
        <td>{$row.id}</td>
        <td>{$row.name}</td>
        <td>{$row.description}</td>
        <td><a href="/www/admin/plugins/demoHelloWorld/demoHelloWorld-delete.php?id={$row.id}">DELETE</a></td>
    </tr>
    {/foreach}
    </table> 
```

但我不知道将 for 语句嵌入到 html 页面（openx 模板）中。你能帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:43:19.420

我发现解决了这个问题：我使用了 smarty 标签。在 php 中：

```
for ($i=1;$i++;$i<10) {
 echo $i;
} 
```

带有聪明的标签：

```
{section name=temp loop=9}
 {$smarty.section.foo.iteration}
{/section} 
```

这是我的研究成果。:)

# javascript - 如果使用 JS_NewGlobalObject 程序崩溃：SpiderMonkey

> ID：13120289
> 
> 赞同：6
> 
> 时间：2012-10-29T10:57:22.480
> 
> 标签：javascript, c++, mozilla, spidermonkey

我正在使用最新版本的 SpiderMonkey (js185-1.0.0.tar.gz)，当我运行嵌入 Javascript 的示例程序时，程序崩溃

示例程序直接来自[文档](https://developer.mozilla.org/en-US/docs/How_to_embed_the_JavaScript_engine)

如果我使用[JS_NewCompartmentAndGlobalObject](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_NewCompartmentAndGlobalObject)程序运行良好， 但文档提到使用[JS_NewGlobalObject](https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_NewGlobalObject)因为它是“自 JSAPI 16 以来已过时”

因此，我替换了`JS_NewCompartmentAndGlobalObject`，`JS_NewGlobalObject`从那时起，示例程序在[此处的示例程序中的第 55 行崩溃](https://developer.mozilla.org/en-US/docs/How_to_embed_the_JavaScript_engine)

这里的解决方案是什么？

我使用的是 CentOS 6.2 64 位版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:13:08.397

弃用可能与[最近](https://bugzilla.mozilla.org/show_bug.cgi?id=650353)在 SM 中创建隔间的方式发生变化有关（现在每个新的全局默认情况下都会有自己的隔间）。

您应该使用 JS_NewCompartmentAndGlobalObject，因为该功能仅在 JSAPI 16 中被弃用，在 JS 1.8.5 发布 72 周后 :)

# internet-explorer-8 - Google Chrome Frame 和 Facebook Javascript SDK - 无法登录

> ID：13120294
> 
> 赞同：2
> 
> 时间：2012-10-29T10:57:39.667
> 
> 标签：internet-explorer-8, facebook-javascript-sdk, google-chrome-frame

在下面的示例中，我有一个 html 页面，其中包含登录 facebook 所需的 javascript 代码。

在我有谷歌浏览器框架元标记，使页面与谷歌浏览器框架一起运行。如果您使用任何浏览器打开此页面，finish() 回调将正常运行。如果您使用 Google Chrome Frame 打开它，它永远不会触发。

所以这意味着每个试图登录以收集用户数据的 Facebook 应用程序都无法登录。如果页面是用谷歌框架打开的，就会发生这种情况。

但即使我删除了元标记以便页面可以使用 IE8 打开，页面也会再次使用谷歌浏览器框架打开，因为 Facebook 默认打开谷歌浏览器框架。

因此，因为这是一个在 facebook.com 内部运行的 Facebook 应用程序，所以它被迫使用 Google Chrome Frame 打开！

严重错误！我见过其他人报告它，有人也在这里制作了一个测试 facebook 应用程序：http: [//apps.facebook.com/gcftest/](http://apps.facebook.com/gcftest/)

appID 和 channelUrl 在下面的示例中是虚拟的。

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" />
  <meta charset="utf-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=IE8" />

  <title>Facebook Login</title>
  <script type="text/javascript">
//<![CDATA[

  // Load the SDK Asynchronously
  (function(d){
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {
  return;
  }
  js = d.createElement('script');
  js.id = id;
  js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  ref.parentNode.insertBefore(js, ref);
  }(document));

  var appID = '0000000000000';
  var channelUrl = '//myhost/channel.html';

  // Init the SDK upon load
  window.fbAsyncInit = function() {

  FB.init({
  appId : appID, // App ID
  channelUrl : channelUrl,
  status : true, // check login status
  cookie : true, // enable cookies to allow the server to access the session
  xfbml : true // parse XFBML
  });

  FB.Event.subscribe('auth.statusChange', function(response)
  {
  if(!response.authResponse)
  FB.login(finish, {scope: 'publish_actions,publish_stream'});
  else
  finish(response);
  });

  FB.getLoginStatus(finish);

  }

  function finish(response)
  {
  alert("Hello "+response.name);
  }

  //]]>
  </script>
</head>

<body>
  <h1>Facebook login</h1>

  <p>Do NOT close this window.</p>

  <p>please wait...</p>
</body>
</html> 
```

# iphone - 如何停止在目标 c 中移动图像？

> ID：13120298
> 
> 赞同：0
> 
> 时间：2012-10-29T10:57:49.453
> 
> 标签：iphone, objective-c, xcode, cocoa

我已经进行了编码以检查图像是否越过特定区域，

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

CGPoint loc=[touch locationInView:self.view];

if (touch.view==img2Obj) {
    NSLog(@"image2");
    img2Obj.center=loc;

    currentx1=img2Obj.frame.origin.x;
    currenty1=img2Obj.frame.origin.y;
    //NSLog(@"top left corner x and y is %.1f and %.1f",img2Obj.frame.origin.x,img2Obj.frame.origin.y);
    [self isImg1InPos];

}}
-(void)isImg1InPos {

int dx,dy;

dx=currentx1-x1;
dy=currenty1-y1;
if (abs(dx)<5 && abs(dx)<5) {
    NSLog(@"Image must stop moving after this!!!");
    [img2Obj setUserInteractionEnabled:FALSE];
}
//NSLog(@"unsigned int is %d",abs(dx));

} 
```

我希望图像在通过条件时停止移动。

```
[img2Obj setUserInteractionEnabled:FALSE]; 
```

但它不起作用，谁能告诉我如何解决这个问题

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:21:43.683

只需保留一个单独的`BOOL`值，称为 eg ，并根据此标志的值提前`movingEnabled`退出您的例程（即在调整图像的位置之前）。`touchesMoved`

# android - startActivityForResult 的问题

> ID：13120299
> 
> 赞同：0
> 
> 时间：2012-10-29T10:57:51.390
> 
> 标签：android, android-activity

我已经编写了一个活动，`Theme.Holo.Dialog`以便它可以作为`AlertDialog`登录/密码通知。我`startActivityForResult(...)`使用我定义的请求代码开始了这项活动。问题是，每当我开始活动时`onActivityResult(...)`立即触发，按钮被加载并且一切，但是一旦我按下它们，即使我知道活动正在工作，因为登录确实发生了，没有结果发送回第一个活动和我正在打电话`setResult(...)`，`finish()`在按下按钮后。在此先感谢，第一次使用 startActivityForResult 所以我确定我一定遗漏了一些东西。

主要活动：

```
.
.
.
   Intent startDialogIntent = new Intent(this,SetIdDialogAlertActivity.class);
   startDialogIntent.setAction(getString(R.string.ACTION_START_ALERT_DIALOG_ACTIVITY));
   startDialogIntent.putExtra(getString(R.string.parcelable_status));
   IntentParcelable.configurationToParcelable(configuration, getBaseContext()));
   startActivityForResult(startDialogIntent,getResources().getInteger(R.integer.CREATE_USER));

.
.
.

public void onActivityResult(int requestCode, int resultCode,Intent data){
        super.onActivityResult(requestCode, resultCode, data);
        Toast.makeText(getBaseContext(),"returned from activity with request code " + requestCode + " and result code " + resultCode, Toast.LENGTH_SHORT).show();
        if(requestCode == getResources().getInteger(R.integer.CREATE_USER))
            switch (resultCode){
                case RESULT_NEW_USER:
                    Toast.makeText(getBaseContext(),getString(R.string.SU_CorrectPassword_message), Toast.LENGTH_SHORT).show();
                    refreshLabels(data);
                    break;
                case RESULT_WRONG_PASSWORD:
                    Toast.makeText(getBaseContext(),getString(R.string.SU_WrongPassword_message), Toast.LENGTH_SHORT).show();
                    break;
            }
    } 
```

然后在子活动上：

```
public void onCreate(Bundle savedInstanceState){
        Logger.d(Messages.tag,System.nanoTime() + "_DIALOG_ALERT:_ON_CREATED");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.user_id_alertdialog);
        Logger.d(Messages.tag,System.nanoTime() + "_DIALOG_ALERT:_VIEW_INFLATED");

        SU_passwordEditText = (EditText)findViewById(R.id.SU_passwordEditText);
        Button okAlarmButton = (Button)findViewById(R.id.okAlarmButton);
        Button cancelAlarmButton = (Button)findViewById(R.id.cancelAlarmButton);

        Logger.d(Messages.tag,System.nanoTime() + "_DIALOG_ALERT:_OK_BUTTON_LOADED");
        okAlarmButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Logger.d(Messages.tag,System.nanoTime() + "_DIALOG_ALERT:_OK_BUTTON_PRESSED");  
                String password = SU_passwordEditText.getText().toString();
                if(password.equals(getString(R.string.SU_password))){
                    Toast.makeText(getBaseContext(),getString(R.string.SU_CorrectPassword_message), Toast.LENGTH_SHORT).show();
                    userIdEditText = (EditText)findViewById(R.id.userIdEditText);
                    String newUserName = userIdEditText.getText().toString();
                    Logger.d(Messages.tag,System.nanoTime() + "_DIALOG_ALERT:_USERNAME_" + newUserName);                
                    Configuration configuration = IntentParcelable.parcelableToConfiguration((IntentParcelable)getIntent().getParcelableExtra(getString(R.string.parcelable_status))
                            , getBaseContext());
                    configuration.setId(newUserName);
                    Intent setUserIntent = new Intent();
                    setUserIntent.setAction(getString(R.string.ACTION_ACTIVITY_NEW_ID));
                    setUserIntent.putExtra(getString(R.string.INTENT_EXTRA_SENDER_NAME),"DIALOG_ACTIVITY");
                    setUserIntent.putExtra(getString(R.string.INTENT_EXTRA_NEW_CONFIG), IntentParcelable.configurationToParcelable(configuration, getBaseContext()));
                    exitActivity(RESULT_NEW_USER,setUserIntent);
                }else{
                    Toast.makeText(getBaseContext(),getString(R.string.SU_WrongPassword_message), Toast.LENGTH_SHORT).show();
                    exitActivity(RESULT_WRONG_PASSWORD);
                }
            }
        });

private void exitActivity(int exit_code, Intent data) {
    setResult(exit_code,data);
    finish();
}

private void exitActivity(int exit_code) {
    setResult(exit_code);
    finish();
} 
```

很抱歉延迟发布代码。

**[更新]**

我已经尝试了所有我能想到的方法，但子 Activity 的行为仍然很奇怪。`onActivityResult(...)`自从父母触发以来，我认为它突然结束了。它没有完成，因为它仍然在堆栈的顶部，我可以看到它，并且它确实有效，因为我在`Button`s 中实现的任何东西都完成了。但是当它*再次*完成时，它不会触发前一个`onActivityResult(...)`方法。

**[更新]**

我**一定**是错过了什么。为了测试起见，我刚刚创建了一个全新`Activity`的 ，它除了创建自己之外什么都不做，将结果设置为 4 并完成。我在清单上声明为：

```
 <activity 
            android:name=".ActivityTest"
            android:screenOrientation="portrait"
            android:process=":gui_process"
            android:exported="false">
        </activity> 
```

并像这样开始：

```
 Intent startDialogIntent = new Intent(this,ActivityTest.class);
            startActivityForResult(startDialogIntent,getResources().getInteger(R.integer.CREATE_USER)); 
```

在 my 上定义了一个新的 case 语句`onActivityResult(...)`，它的行为就像原始活动一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:46:27.083

我在另一个[线程](https://stackoverflow.com/questions/3354955/onactivityresult-called-prematurely)中发现了这个问题。显然`singleInstance`，为其启动模式定义一个活动会导致子活动在启动后立即向父活动报告结果。我将父活动的启动模式恢复为标准，现在一切正常。开发者指南中应该有一些国王的注释。

# regex - 用破折号和 + 符号检查数字的正则表达式

> ID：13120300
> 
> 赞同：0
> 
> 时间：2012-10-29T10:58:06.140
> 
> 标签：regex

1.  最小 10 位最大 15 位的数值（例如 9123456789）
2.  第一个字符可以是 +（例如 +919123456789）
3.  破折号“-”可以在任何地方，但不能出现在第一个、最后一个和重复（例如 +91-02-3-456-78-90-21）

请帮我。我在正则表达式领域没有有效的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:01:36.080

这是一种可能的解决方案：

```
^\+?(?:\d-?){9,14}\d$ 
```

解释：

```
^          # anchor the pattern to the beginning of the string
\+?        # optional literal +
(?:\d-?)   # a digit, followed by an optional hyphen
{9,14}     # 9 to 14 of those
\d         # another digit (to make that 10 to 15, and disallow hyphens at the end)
$          # anchor the pattern to the end of the string 
```

# facebook - Apprequest 对话框停止工作（FB-AS3 API）

> ID：13120301
> 
> 赞同：0
> 
> 时间：2012-10-29T10:58:06.253
> 
> 标签：facebook, actionscript-3, apprequests, facebook-actionscript-api

我正在编写 ActionScript 游戏并希望将其与 FB 集成，因此我使用了[http://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)和我在同一问题线程中找到的自定义对话框功能。它是这样的：

```
 protected function dialog(method:String, callback:Function, stageReference:Stage, stageWebView:StageWebView, params:* = null):void {
        dialogCallback = callback;
        stageRef = stageReference;

        webView = stageWebView;
        webView.stage = stageReference;

        webView.assignFocus();

        dialogWindow = new DialogWindow(handleDialog);
        dialogWindow.open(method, applicationId, webView, params);
    } 
```

我已经编写了模块来处理所有 FB 的东西，而且效果很好。但是几天前我注意到出现了该对话框，但是当我选择朋友并尝试向他们发送请求时，我收到错误消息：

```
An error occurred with your app. Please try again later.
API Error Code: 2
API Error Description: Service temporarily unavailable
Error Message: User can't send this request: Unknown error 
```

我已经检查过了，发现在选择朋友并单击发送对话框将位置更改为后`http://www.facebook.com/dialog/apprequest`，发生错误，然后单击“确定”后将位置更改为redirect_uri。

你有什么想法？这是我的错还是脸书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:05:03.877

对于apprequest，我使用了这个

> ```
> function invite(evt:MouseEvent):void
> {
>           var obj:Object = 
>           {
>               message: "aaa",//max 255
>               title: "bbb"//max 50
>           };
>           Facebook.ui("apprequests", obj, callback, "iframe");
> }
> 
> function callback(res):void
> {
> 
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:00:43.533

It seems, the apprequests are currently broken: [https://developers.facebook.com/bugs/540196825997304](https://developers.facebook.com/bugs/540196825997304)

# linux - 如何控制linux中的虚拟内存管理？

> ID：13120303
> 
> 赞同：0
> 
> 时间：2012-10-29T10:58:09.467
> 
> 标签：linux, virtual-memory

我正在编写一个程序，它使用 mmap 文件来保存一个巨大的缓冲区，该缓冲区组织为一个 64 MB 块的数组。

这些块用于聚合通过网络从不同主机接收到的数据。因此，预先不知道写入每个块中的总数据大小。大多数时候它只有 2MB，但在某些情况下可以达到 20MB 或更多。

数据不会在缓冲区中停留很长时间。不到一秒钟后，90% 被删除，其余的被传输到另一台主机。

我想知道是否有办法告诉虚拟内存管理器在删除数据时内存页面不再脏。

当使用和释放块来控制虚拟内存时，我应该使用 mmap 和 munmap 吗？这样做的开销是多少？此外，一些同事对分配如此大的 mmap 空间对性能的影响表示担忧。我希望它表现得像一个交换文件，因此只考虑脏页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:55:50.537

mmap / munmap 应该可以解决问题。请注意，修改页表可能具有不可忽略的开销，并且可能涉及 TLB 缓存刷新，因此您可能希望汇总这些更改而不是太频繁地执行它们。

分配大内存空间会消耗页表条目。只要您没有触摸页面，它就不会真正分配。

# c# - 当模型在 MVC4 中为空时如何显示 ModelState.AddModelError

> ID：13120305
> 
> 赞同：0
> 
> 时间：2012-10-29T10:58:15.850
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在展示一个购物车。我需要检查购物车中的空值并显示“购物车为空”之类的消息。

当我在 myAction 中使用 ModelState.AddModelError 时，它会引发异常，因为模型中有空引用。如何显示错误消息。
我的行动

```
 public ActionResult Index()
        {
            string id = Request.QueryString["UserID"];
            IList<CartModel> objshop = new List<CartModel>();
            objshop = GetCartDetails(id);
            if (objshop.Count > 0)
            {
                return View(objshop.ToList());
            }
            else
            {
                ModelState.AddModelError("", "Your Shopping Cart is empty!");
            }
            return View();
} 
```

我的观点

```
 @{
         @Html.ValidationSummary(true)
     }

 <th > @Html.DisplayNameFor(model => model.ProductName) </th>
 <th > @Html.DisplayNameFor(model => model.Quantity)   </th>
 <th > @Html.DisplayNameFor(model => model.Rate)      </th>
 <th > @Html.DisplayNameFor(model => model.Price)    </th>        
 @foreach (var item in Model)
   {
<td>  @Html.DisplayFor(modelItem => item.ProductName)</td>
<td>  @Html.DisplayFor(modelItem => item.Quantity)</td>
<td>  @Html.DisplayFor(modelItem => item.Rate) </td>
<td>  @Html.DisplayFor(modelItem => item.Price) </td>
   } 
```

有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:05:18.123

问题是当购物车中没有任何东西时，您没有传递一个空模型，因此您`ModelState`没有任何东西可以附加到。*但是，将其视为错误*是没有意义的，购物车为空是完全有效的。相反，我会直接处理您视图中的空模型，例如

**行动**

```
public ActionResult Index()
{
    string id = Request.QueryString["UserID"];
    IList<CartModel> objshop = new List<CartModel>();
    // assuming GetCartDetails returns an empty list & not null if there is nothing
    objshop = GetCartDetails(id);
    return View(objshop.ToList());
} 
```

**看法**

```
@model IList<CardModel>

@if (Model.Count > 0)
{
    ...
}
else
{
    <p>Your shopping cart is empty!</p>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:02:50.537

像这样更改 Action 中的最后一行：

```
return View(new List<CartModel>()); 
```

# c# - localized mvc3 app

> ID：13120306
> 
> 赞同：4
> 
> 时间：2012-10-29T10:58:17.520
> 
> 标签：c#, asp.net-mvc-3

I want to learn right approach in mvc3 localization approach. I do not want to use threads, user should select desired language and based on that value pages should be localized.

I've found [this article](http://afana.me/post/aspnet-mvc-internationalization.aspx) but I want to implement localization with DRY principle.

Thanks everyone

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:16:32.283

You should have a look at [this article from Scott Hanselman](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx) in which he provides an overview of globalization, internationalization, and localization.

You can also give a try to the [i18n library](https://github.com/danielcrenna/i18n) on GitHub.

# asp.net - 如何在aspx页面中的页面刷新时保持控件禁用？

> ID：13120308
> 
> 赞同：0
> 
> 时间：2012-10-29T10:58:31.763
> 
> 标签：asp.net

当我单击提交按钮时，我在 aspx 页面上禁用了几个文本框和提交按钮，但我观察到当我刷新/重新加载浏览器时，控件再次启用，包括提交按钮。我搜索了它，但找不到任何原因/解决方案。任何人都可以提供有用的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:01:24.770

当您刷新页面时，第一次生成页面的 html，并且它没有您在上次回发时所做的更改。你所能做的一切`save the state of controls in some persistent medium like database or files and use it when page is refreshed`。

*您可以尝试将一个控件的状态置于会话中并返回页面加载只是为了进行实验，如果它适合您，那么您可以将其存储在您喜欢的任何数据库中*

**单击按钮时更改状态**

```
Textbox1.Enabled = false;
Session["Textbox1Enabled"] = false; 
```

**在 Page_LoadEvent**

```
if(Session["Textbox1Enabled"] != null)
{
    Textbox1.Enabled =  bool.Parse(Session["Textbox1Enabled"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:00:57.747

你可以尝试`Enabled="false"`和`IsPostBack section``EnableViewState="true"`

```
if(!IsPostBack)
{
  //Bind your textbow
  yourTextBox.Enabled=false;
  yourTextBox.EnableViewState=true;
} 
```

注意：您使用 ViewState 持久化您的控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:01:25.377

当您刷新/重新加载页面时，您正在请求它的新版本，因此您拥有的任何状态都将丢失。

要实现您想要实现的目标，您需要主动跟踪服务器上的会话，并基于此禁用控件。

# android - 我的片段使用正确吗，似乎很慢

> ID：13120310
> 
> 赞同：1
> 
> 时间：2012-10-29T10:58:35.267
> 
> 标签：android, android-fragments, fragment

我的应用程序结构是我有一个菜单，左侧有 5 个菜单点，右侧有内容。

MainActivity.xml

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <fragment
    android:id="@+id/fragmentMenu"
    android:name="com.example.FragmentMenu"
    android:layout_width="@dimen/MenuWidth"
    android:layout_height="match_parent" />

    <LinearLayout
    android:id="@+id/content"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android_layout_toRightOf="@+id/fragmentMenu"
    android:orientation="vertical"/>

</RelativeLayout> 
```

MainActivity.java

```
public class FragmentActivityMain extends FragmentActivity {
    @Override
    protected void onCreate(final Bundle arg0) {
        super.onCreate(arg0);
        setContentView(R.layout.fragment_activity_main);

        FragmentManager fm = getSupportFragmentManager();
        FragmentMenu fragmentMenu = (FragmentMenu) fm.findFragmentById(R.id.fragmentMenu);
        fragmentMenu.init();
    }
} 
```

当然我有一个 FragmenMenu 课程，

```
public class FragmentMenu extends ListFragment {

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container,    final Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_menu, container, false);
        return view;
    }

    public init() {
         FragmentManager fm = getFragmentManager();
         FragmentTransaction ft = fm.beginTransaction(); 
         FragmentNowListView lw = new FragmentCarListView();
         ft.add(R.id.content, lw);
         ft.commit();
    }

} 
```

FragmentCarList 是一个简单的列表，现在带有静态测试数据，一个 List 中只有五个项目

我的问题：慢。我在我的手机（Galaxy S3）上测试了应用程序，当应用程序启动时，我看到白屏，大约 0.5 秒，这是日志：

*   10-29 11:43:44.093: D/dalvikvm(29710): GC_CONCURRENT 释放 267K，5% 释放 13903K/14535K，暂停 10ms+2ms
*   10-29 11:43:44.133: D/dalvikvm(29710): GC_FOR_ALLOC 释放 215K，6% 释放 13896K/14663K，暂停 12ms
*   10-29 11:43:44.233: D/dalvikvm(29710): GC_FOR_ALLOC 释放 262K，6% 释放 13901K/14663K，暂停 12ms
*   10-29 11:43:44.258: D/dalvikvm(29710): GC_FOR_ALLOC 释放 212K，6% 释放 13897K/14663K，暂停 13ms
*   10-29 11:43:44.278: D/dalvikvm(29710): GC_FOR_ALLOC 释放 208K，6% 释放 13897K/14663K，暂停 12ms
*   10-29 11:43:44.328: D/dalvikvm(29710): GC_FOR_ALLOC 释放 131K，4% 释放 14098K/14663K，暂停 12ms
*   10-29 11:43:44.398: D/dalvikvm(29710): GC_CONCURRENT 释放 20K，3% 释放 14559K/14919K，暂停 1ms+4ms

当我在 Xperia Ray 上进行测试时，白屏出现的时间更长。

如何优化我的片段？谢谢

# java - 如何从android中的Arraylist Date按降序对日期进行排序？

> ID：13120316
> 
> 赞同：18
> 
> 时间：2012-10-29T10:58:59.203
> 
> 标签：java, android, date, arraylist, sortedlist

我有一个`ArrayList`which stores `Date`s，我按降序对它们进行了排序。现在我想将它们显示在`ListView`. 这是我到目前为止所做的：

```
 spndata.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                switch (position) {
                case 0:
                    list = DBAdpter.requestUserData(assosiatetoken);
                    for (int i = 0; i < list.size(); i++) {
                        if (list.get(i).lastModifiedDate != null) {
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 1:
                    list = DBAdpter.requestUserData(assosiatetoken);

                    Calendar c = Calendar.getInstance();
                    SimpleDateFormat df3 = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");    
                    String formattedDate3 = df3.format(c.getTime());                        
                    Log.v("log_tag", "Date  " + formattedDate3);

                    for (int i = 0; i < list.size(); i++) {                         
                        if (list.get(i).submitDate != null) {                               
                            String sDate = list.get(i).submitDate;                              
                            SimpleDateFormat df4 = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");    
                            String formattedDate4 = df4.format(sDate);

                            Map<Date, Integer> dateMap = new TreeMap<Date, Integer>(new Comparator<Date>(){  
                                 public int compare(Date formattedDate3, Date formattedDate4) {
                                     return formattedDate3.compareTo(formattedDate4);
                                 }
                            });
                            lv.setAdapter(new MyListAdapter(
                                    getApplicationContext(), list));
                        }
                    }
                    break;
                case 2:

                    break;

                case 3:

                    break;

                default:
                    break;
                }

            }

            public void onNothingSelected(AdapterView<?> arg0) {
            }

        }); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-29T11:09:13.440

创建`Arraylist<Date>`日期类。并`Collections.sort()`用于升序。

请参阅[排序（列表<T> 列表）](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#sort-java.util.List-)

> 根据其元素的自然顺序，将指定列表按升序排序。

对于按降序排序，请参阅[Collections.reverseOrder()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--)

```
Collections.sort(yourList, Collections.reverseOrder()); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-29T11:51:40.047

只需在案例1中添加这样的：like this

```
 case 0:
     list = DBAdpter.requestUserData(assosiatetoken);
     Collections.sort(list, byDate);
     for (int i = 0; i < list.size(); i++) {
         if (list.get(i).lastModifiedDate != null) {
             lv.setAdapter(new MyListAdapter(
                     getApplicationContext(), list));
         }
     }
     break; 
```

并将此方法放在课程的末尾

```
static final Comparator<All_Request_data_dto> byDate = new Comparator<All_Request_data_dto>() {
    SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

    public int compare(All_Request_data_dto ord1, All_Request_data_dto ord2) {
        Date d1 = null;
        Date d2 = null;
        try {
            d1 = sdf.parse(ord1.lastModifiedDate);
            d2 = sdf.parse(ord2.lastModifiedDate);
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return (d1.getTime() > d2.getTime() ? -1 : 1);     //descending
    //  return (d1.getTime() > d2.getTime() ? 1 : -1);     //ascending
    }
}; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-29T11:06:05.030

您使用的日期的 compareTo() 将适用于升序。

要进行降序，只需反转 compareTo() 出来的值。您可以使用单个 Comparator 类，该类在标识排序顺序的构造函数中接受标志/枚举

```
public int compare(MyObject lhs, MyObject rhs) {

    if(SortDirection.Ascending == m_sortDirection) {
        return lhs.MyDateTime.compareTo(rhs.MyDateTime);
    }

    return rhs.MyDateTime.compareTo(lhs.MyDateTime);
} 
```

您需要调用[Collections.sort()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)来对列表进行实际排序。

附带说明一下，我不确定您为什么要在 for 循环中定义地图。我不确定您的代码要做什么，但我假设您想将 for 循环中的索引值填充到地图中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-02-26T07:15:11.380

如果字符串格式的日期将其转换为每个对象的日期格式：

```
String argmodifiledDate = "2014-04-06 22:26:15";
SimpleDateFormat  format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");  
            try
            {
                this.modifiledDate = format.parse(argmodifiledDate);
            }
            catch (ParseException e)
            {

                e.printStackTrace();
            } 
```

然后按降序对arraylist进行排序：

```
ArrayList<Document> lstDocument= this.objDocument.getArlstDocuments();
        Collections.sort(lstDocument, new Comparator<Document>() {
              public int compare(Document o1, Document o2) {
                  if (o1.getModifiledDate() == null || o2.getModifiledDate() == null)
                    return 0;     
                  return o2.getModifiledDate().compareTo(o1.getModifiledDate());
              }
            }); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-29T11:07:35.060

[`Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)所以[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)只需创建列表`List<Date>`并使用`Collections.sort()`. 并用于[`Collections.reverseOrder()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#reverseOrder%28java.util.Comparator%29)获取比较器`reverse ordering`。

来自 Java 文档

> 返回一个比较器，它强制指定比较器的反向排序。如果指定的比较器为空，则此方法等效于 reverseOrder()（换句话说，它返回一个比较器，该比较器将自然顺序的反向强加于实现 Comparable 接口的对象集合）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-11-11T07:20:36.700

更容易替代上述答案

1.  如果 Object(Model Class/POJO) 包含**String**数据类型中的日期。

    ```
    private void sortArray(ArrayList<myObject> arraylist) {
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"); //your own date format
    if (reports != null) {
        Collections.sort(arraylist, new Comparator<myObject>() {
            @Override
            public int compare(myObject o1, myObject o2) {
                try {
                    return simpleDateFormat.parse(o2.getCreated_at()).compareTo(simpleDateFormat.parse(o1.getCreated_at()));
                } catch (ParseException e) {
                    e.printStackTrace();
                    return 0;
                }
            }
        });
    } 
    ```

2.  如果 Object(Model Class/POJO)在 Date数据类型中包含**日期**

    ```
    private void sortArray(ArrayList<myObject> arrayList) {
    if (arrayList != null) {
        Collections.sort(arrayList, new Comparator<myObject>() {
            @Override
            public int compare(myObject o1, myObject o2) {
                return o2.getCreated_at().compareTo(o1.getCreated_at()); }
        });
    } } 
    ```

上面的代码用于按日期的**降序**对数组进行排序，将 o1 和 o2 交换为**升序**。

# .net - SQLAnywhere 默认关键字作为参数化查询的参数

> ID：13120319
> 
> 赞同：0
> 
> 时间：2012-10-29T10:59:11.117
> 
> 标签：.net, sqlanywhere

如何将默认关键字作为 SAParameter 发送到存储过程？

我有一个名为 procedureEx 的存储过程，它接受 3 个参数，最后一个有默认值

我可以用 from sql 和 call procedureEx('test', 1, **default** )调用它

但是我如何通过参数化查询从.net 做到这一点。在实际代码中，我可以获取或不获取参数，并且我希望数据库控制默认值

```
command.CommandText = "call procedureEx(?,?,?)";
command.Parameters.Add(new SAParameter("", "test");
command.Parameters.Add(new SAParameter("", 1);
command.Parameters.Add(new SAParameter("", default); // <- how do i do this? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:06:04.260

此代码可能会帮助您：

```
command.CommandText = "call procedureEx(?,?,?)";
command.Parameters.Add(new SAParameter("", "test");
command.Parameters.Add(new SAParameter("", 1);
command.Parameters.Add(new SAParameter("", SADefault.Value); 
```

我使用一些虚拟数据测试了代码，但它给了我“没有足够的主机变量值”异常，但代码可能会引导您找到正确的解决方案......

# ios - 在 touchesMoved 中获取当前触摸

> ID：13120325
> 
> 赞同：0
> 
> 时间：2012-10-29T10:59:35.520
> 
> 标签：ios, touchesmoved

我想让当前对象被触及`touchesMoved`。这不要与 touchLocation (CGPoint) 混淆，而是用户正在触摸的实际对象。使用`UITouch`总是返回初始触摸（正如它在苹果文档中所说），而不是当前或最新的触摸。

我有一个网格点 ( `UIImageViews`)，可以是 3 x 3 到 20 x 20。

当用户在屏幕上拖动他们的手指时，会绘制一条跟踪用户手指的线。当用户与网格点相交时，线的起点会捕捉到该点并继续跟踪手指，本质上允许您在网格上绘制形状。

目前我有一个 for 循环来检查触摸位置是否与网格点相交。这确实有效，但由于明显的原因，当它们是 400 个网格点时，它非常慢。

我也尝试过手势识别器，但这些会取消触摸。

任何帮助/建议将不胜感激，谢谢！

编辑：这就是我在 touchesMoved 中所拥有的。

```
UITouch* touch = [touches anyObject];
CGPoint touchLocation =[touch locationInView:self];

for (int i=100; i<tagInt; i++) {

    UIImageView *img=(UIImageView*)[self.view viewWithTag:i];

    if (CGRectContainsPoint(img.frame, touchLocation)) {
       //Drawing code  setNeedsDisplay etc
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:38:13.610

正如对最初问题的评论中所讨论的，从容器视图中找到触摸位置似乎是最好的。这段代码的最大瓶颈是将所有对象存储在一个线性数组中，然后检查数组中的每个元素。更好的方法是以更好的格式存储对象，您可以根据它们的位置访问单个对象。

如果您的对象排列在严格的网格上，那么将它们存储在二维数组中应该足够快。将屏幕细分为网格分区，然后在这些网格分区中找到 touchesMoved 点。使用这两个整数作为二维数组的索引，并检查数组中该位置可用的一个对象。如果您在网格上的每个位置都没有对象，只需在该位置存储一个 nil 以告诉您的代码“无需在此处检查”。如果每个网格位置可能有多个对象，则可以在数组中保留该位置的对象列表，并检查列表中的所有对象。这将比总数少得多（如果您的对象没有聚集）。

即使您的对象没有排列在严格的网格上，您也可以使用此技术。仅将屏幕划分为 4 个象限即可将检查对象所需的时间大致减少到初始时间的四分之一。

如果您的对象正在移动，则必须保持此数组更新。

根据您问题中的有限信息，这个 2D 数组只是我对更好的方法的第一个想法。它可能不是在您的实际程序中工作的最佳方式，不同的数据结构和算法可能更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:05:18.900

You should **NOT** put drawing code IN the touch handling method. Perhaps the best way is to just save all touch points within a temporary mutable array. And in the `drawRect` method you draw the correct line once per frame. Take the logic out of the touch handling method. (Also you could make the position fixing calculations in the background, and the line will be updated, after they are finished..)

I still don't quite get what you are trying to draw. could you give us an example image?

# php - 从 mysql 结果为 Excel 创建 HTML 文件 - 希腊字符显示为符号

> ID：13120331
> 
> 赞同：0
> 
> 时间：2012-10-29T10:59:57.437
> 
> 标签：php, export-to-excel

我从 mysql 数据库中获取结果，并且正在创建 excel 文件。但是，虽然英文字符正确显示，但希腊字符显示为符号（不可读）。

这是我此时拥有的代码：

```
//function cleanData(&$str){ 
    // replace fields that _ACCOUNT_DELETE and turn Capital letters into small
    //$str=strtolower($str);
//}

// file name for download 
$filename = "customers" . date('Ymd') . ".xls";
header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Type: application/vnd.ms-excel");
    header('Content-Transfer-Encoding: utf-8');

$flag = false;
$query="SELECT * FROM customers";
$result = mysql_query($query);
while(false !== ($row = mysql_fetch_assoc($result))){
    if(!$flag){
    // display field/column names as first row
        echo "Customers\n";
        $flag = true; 
    } 
    //array_walk($row, 'cleanData'); 
    echo implode("\t", array_values($row)) . "\n";
} 
```

数据库编码是`latin1_swedish_ci`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:03:36.637

先执行这个查询。

```
mysql_query( "SET NAMES utf8"); 
```

并在回显它们之前使用 htmlentities。

```
echo htmlentities($data); 
```

我不知道，但你可以试试

```
 mysql_set_charset('utf8'); 
```

# android - 安卓 SQLITE 语句

> ID：13120333
> 
> 赞同：0
> 
> 时间：2012-10-29T11:00:02.067
> 
> 标签：android, sql, insert

大家好，我正在构建一个应用程序，可以在您接到电话时保存位置。不幸的是，我有一个 sql 错误，但我不明白我的错误在哪里。代码是这样的：

文件 storybookdynamicimport.java

```
 public void CaptureCall() {

    // Declare a telephony manager
    TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
    // Declare a phoneStateListener
    PhoneStateListener mPhoneListener;
    // Switching trough various cases
    mPhoneListener = new PhoneStateListener() {
        public void onCallStateChanged(int state, String incomingNumber) {
            String phonenumber=null;
            String currentDate;
            String Loc;
            ContentValues cv = new ContentValues();
            try {
                switch (state) {
                case TelephonyManager.CALL_STATE_RINGING:
                    Log.v(StorybookContentProvider.TAG_LOG,
                            "sei in chiamata");

                    phonenumber= findNameByAddress(StorybookDynamicImport.this, incomingNumber);
                    currentDate = formatDate(System.currentTimeMillis());

                    // Sending a statusbar Notification
                    CallNotification = notificationBuilder("StoryBook",
                            "Ho salvato l'evento chiamata!", null);
                    NotificationManager.notify(1, CallNotification);

                    // Getting the position
                    LocationManager.requestSingleUpdate(criteria,
                            locationListener, looper);
                    Location location = LocationManager
                            .getLastKnownLocation(provider);
                    Loc=GetAddressLocation(location);

                    cv.put(StorybookContentProvider.CONTACT, phonenumber);
                    Log.v(StorybookContentProvider.TAG_LOG, "Salvando" + phonenumber);
                    cv.put(StorybookContentProvider.DATE, currentDate);
                    Log.v(StorybookContentProvider.TAG_LOG, "Data" + currentDate);
                    cv.put(StorybookContentProvider.EVENT_TYPE, "Chiamata");

                    cv.put(StorybookContentProvider.WHERE, "cazzi miei!");
                    Log.v(StorybookContentProvider.TAG_LOG, "DOVE" + Loc);
                    getContentResolver().insert(StorybookContentProvider.CONTENT_URI, cv);

                    break;
                }
            } catch (Exception e) {
                // TODO: handle exception
            }
        }
    };

    // Setting listener
    tm.listen(mPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);
}

private String formatDate(long date) {

    Date realdate = new Date(date);
    DateFormat df = new DateFormat();
    String format = (String) df.format("dd/MM/yyyy", realdate);
    //Log.v(StorybookContentProvider.TAG_LOG, "data della chiamata" + format);

    return format;
}

private String findNameByAddress(Context ct, String addr) {
    Uri myPerson = Uri.withAppendedPath(
            ContactsContract.CommonDataKinds.Phone.CONTENT_FILTER_URI,
            Uri.encode(addr));
    String[] projection = new String[] { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME };
    Cursor cursor = ct.getContentResolver().query(myPerson, projection,
            null, null, null);

    if (cursor.moveToFirst()) {
        String name = cursor
                .getString(cursor
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        Log.e("", "Found contact name");
        cursor.close();

        return name;
    }

    cursor.close();
    Log.e("", "Not Found contact name");

    return addr;
} 
```

文件 storybookcontentprovider.java

```
public class MySQLiteOpenHelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "Storybook.db";
    public static final int DATABASE_VERSION = 1;
    public static final String DATABASE_TABLE_CONTACT = "contact_data";

    public MySQLiteOpenHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    // SQL statement to create a new database.
    /*
     * private static final String DATABASE_CREATE = "create table " +
     * DATABASE_TABLE + " (" + KEY_ID +
     * " integer primary key autoincrement, " + CONTACT + " text not null, "
     * + CONTACT_ID + "text" + EVENT_TYPE + "text);";
     */

    // Called when no database exists in disk and the helper class needs
    // to create a new one.
    @Override
    public void onCreate(SQLiteDatabase db) {
        StringBuilder createQuery = new StringBuilder();
        createQuery.append("CREATE TABLE \"" + DATABASE_TABLE_CONTACT + "\" (");
        createQuery.append("        \"" + KEY_ID + "\" INTEGER PRIMARY KEY AUTOINCREMENT,");
        createQuery.append("        \"" + CONTACT + "\" TEXT,");
        createQuery.append("        \"" + EVENT_TYPE + "\" TEXT,");
        createQuery.append("        \"" + URI + "\" TEXT,");
        createQuery.append("        \"" + DATE + "\" DATE,");
        createQuery.append("        \"" + WHERE + "\" TEXT");
        createQuery.append(")");

        db.execSQL(createQuery.toString());

        Log.v(TAG_LOG, "database succesfully created");
    }

@Override
public Uri insert(Uri uri, ContentValues values) {
    // Open a read / write database to support the transaction.
    SQLiteDatabase db = myOpenHelper.getWritableDatabase();

    // To add empty rows to your database by passing in an empty Content
    // Values
    // object, you must use the null column hack parameter to specify the
    // name of
    // the column that can be set to null.
    String nullColumnHack = null;

    // Insert the values into the table
    long id = db.insert(MySQLiteOpenHelper.DATABASE_TABLE_CONTACT, nullColumnHack,
            values);

    if (id > -1) {
        // Construct and return the URI of the newly inserted row.
        Uri insertedId = ContentUris.withAppendedId(CONTENT_URI, id);

        // Notify any observers of the change in the data set.
        getContext().getContentResolver().notifyChange(insertedId, null);

        return insertedId;
    } else
        return null;
} 
```

我有这个错误：

```
10-29 10:51:00.128: I/SqliteDatabaseCpp(896): sqlite returned: error code = 1, msg = near "where": syntax error, db=/data/data/com.paki.storybook/databases/Storybook.db
10-29 10:51:02.658: E/SQLiteDatabase(896): Error inserting where=cazzi miei! date=29/10/2012 contact=Pasquale Lodise event_type=Chiamata
10-29 10:51:02.658: E/SQLiteDatabase(896): android.database.sqlite.SQLiteException: near "where": syntax error: , while compiling: INSERT INTO contact_data(where,date,contact,event_type) VALUES (?,?,?,?)
10-29 10:51:02.658: E/SQLiteDatabase(896):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:03:01.770

`where`是 SQL 保留字。将您的领域称为其他名称。

# javascript - Javascript - 将带分数转换为小数

> ID：13120336
> 
> 赞同：2
> 
> 时间：2012-10-29T11:00:26.550
> 
> 标签：javascript, type-conversion, decimal, eval, fractions

我列出了一系列配方成分，例如“1-1/2”，我需要将其更改为适当的数字，例如“1.5”，以便根据份量进行计算。如何将混合分数更改为十进制数？我见过 eval 函数，它适用于“1/2”之类的东西，但对于“1-1/2”之类的东西，它会将其评估为“.5”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:04:10.647

**注意**：添加您的安全检查（例如确保输入中有“-”等）

**代码**：

```
function toDecimal(_x) {
   var parts = _x.split("-");
   var decParts = parts[1].split("/");
   return parseInt(parts[0], 10) + 
             (parseInt(decParts[0], 10) / parseInt(decParts[1], 10));
}
var x = "1-1/2";
console.log(toDecimal(x)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T12:32:41.220

[假设“-”是您的分隔符，当您使用fraction.js](https://github.com/infusion/Fraction.js)时，您可能会想出如下内容：

```
function getDecimal(str) {
    var f, s = str.split("-");

    if (s.length > 1) {
        f = new Fraction(s[0]).add(s[1]);
    } else {
        f = new Fraction(str);
    }
    return f.valueOf();
}
console.log(getDecimal("1-1/2")); // 1.5
console.log(getDecimal("1/2")); // 0.5 
```

# java - 根据 GSON 中的值从序列化中排除某些字段

> ID：13120354
> 
> 赞同：9
> 
> 时间：2012-10-29T11:01:42.567
> 
> 标签：java, json, serialization, gson

我将 GSON 用于我的序列化目的，我没有找到基于 Gson 基于字段值提供的 ExclusionStrategy 类从序列化中排除某些字段的方法，因为它仅支持基于顶级类或字段属性的排除。字段属性不包括该字段的值。所以我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-29T11:01:42.567

实现这一点的方法是为相关类创建自定义序列化程序。在允许 Gson 以默认方式创建 JSON 对象后，根据其值删除要排除的属性。

```
public class SerializerForMyClass implements JsonSerializer<MyClass> {  

    @Override
    public JsonElement serialize(MyClass obj, Type type, JsonSerializationContext jsc) {
        Gson gson = new Gson();
        JsonObject jObj = (JsonObject)gson.toJsonTree(obj);   
        if(obj.getMyProperty()==0){
            jObj.remove("myProperty");
        }
        return jObj;
    }
} 
```

并在您用于此类的应用程序中的序列化的 Gson 对象中注册新的序列化程序。

```
GsonBuilder gsonBuilder = new GsonBuilder();
gsonBuilder.registerTypeAdapter(MyClass.class, new SerializerForMyClass());
Gson gson=gsonBuilder.create();
gson.toJson(myObjectOfTypeMyClass); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-26T09:54:57.597

这就是我使用类型适配器来避免序列化布尔值的方式`false`。它避免了创建额外的`Gson`实例并且不依赖于特定的字段名称。

```
class MyClassTypeAdapter: JsonSerializer<MyClass>{
   override fun serialize(myObject: MyClass, type: Type, context: JsonSerializationContext): JsonElement {
      val jsonElement = context.serialize(myObject)

      jsonElement.asJsonObject.entrySet().removeAll { it.value is JsonPrimitive && (it.value as JsonPrimitive).isBoolean && !it.value.asBoolean }

      return jsonElement
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T18:50:25.523

这是我编写的用于删除所有错误布尔值以及所有“错误”字符串的类的更深入示例。它很快就被拼凑在一起，但似乎工作正常。如果您发现任何错误，请告诉我。

```
public class RemoveFalseJsonSerializer implements JsonSerializer<Object> {

//~ Methods --------------------------------------------------------------------------------------------------------

/**
 * serialize
 *
 * @param object in value
 * @param type in value
 * @param jsonSerializationContext in value
 *
 * @return out value
 */
@Override
public JsonElement serialize(Object object, Type type, JsonSerializationContext jsonSerializationContext) {
    Gson gson = new Gson();
    JsonElement jsonElement = gson.toJsonTree(object);
    trimJson(jsonElement);
    return jsonElement;
}

/**
 * We've finally made it to a primitive of some sort.  Should we trim it?
 *
 * @param jsonElement in value
 *
 * @return out value
 */
private boolean shouldTrimElement(JsonElement jsonElement) {
    return jsonElement == null || jsonElement.isJsonNull()
            || (jsonElement.isJsonPrimitive()
                && ((jsonElement.getAsJsonPrimitive().isBoolean() && !jsonElement.getAsBoolean()) // trim false
                    || (jsonElement.getAsJsonPrimitive().isString() // also trim the string "false"
                        && "false".equalsIgnoreCase(jsonElement.getAsString()))));
}

/**
 * trimJson
 *
 * @param jsonElement in value
 */
private void trimJson(JsonElement jsonElement) {
    if (jsonElement == null || jsonElement.isJsonNull() || jsonElement.isJsonPrimitive()) {
        return;
    }

    if (jsonElement.isJsonObject()) {
        List<String> toRemove = new ArrayList<>();
        JsonObject asJsonObject = jsonElement.getAsJsonObject();
        for (Map.Entry<String, JsonElement> jsonElementEntry : asJsonObject.entrySet()) {
            if (jsonElementEntry.getValue().isJsonObject() || jsonElementEntry.getValue().isJsonArray()) {
                trimJson(jsonElementEntry.getValue());
            } else if (shouldTrimElement(jsonElementEntry.getValue())) {
                toRemove.add(jsonElementEntry.getKey());
            }
        }
        if (CollectionUtils.isNotEmpty(toRemove)) {
            for (String remove : toRemove) {
                asJsonObject.remove(remove);
            }
        }
    } else if (jsonElement.isJsonArray()) {
        JsonArray asJsonArray = jsonElement.getAsJsonArray();
        for (JsonElement element : asJsonArray) {
            trimJson(element);
        }
    }
}
} 
```

# python - 子文件夹中图像的元数据编码

> ID：13120358
> 
> 赞同：0
> 
> 时间：2012-10-29T11:02:08.107
> 
> 标签：python, encoding, metadata

我从 Python 开始，从一个文件夹开始并在其子文件夹中重复出现的图像中读取元数据的脚本有两个问题。

第一：我只从一个子文件夹获得输出
第二：某些字段的输出是另一种编码，如何让它可读？我尝试了各种解码和编码组合，但没有任何变化

```
from PIL import Image
from PIL.ExifTags import TAGS
import os
import glob
import sys, codecs

path = '//server/share/folder/'

def get_exif_data(fname):
  ret = {}
  try:
    img = Image.open(fname)
    if hasattr( img, '_getexif' ):
      exifinfo = img._getexif()
    if exifinfo != None:
      for tag, value in exifinfo.items():
        decoded = TAGS.get(tag, tag)
        if type(value) == 'str':
          ret[decoded] = value.encode('latin-1')
        else:
          ret[decoded] = value
  except IOError:
    print 'IOERROR ' + fname
  return ret

def scandirs(path):
  for currentFile in glob.glob( os.path.join(path, '*') ):
    if os.path.isdir(currentFile):
        print '\ngot a directory: ' + currentFile + '\n'
        scandirs(currentFile)
    ext = os.path.splitext(currentFile)[1].lower()
    if ext not in ['.jpg', '.jpeg', '.jfif']:
      return 0
    print currentFile
    print get_exif_data(currentFile)

scandirs(path) 
```

这里是输出示例，注意 MakerNote 的编码内容

```
#{'YResolution': (180, 1), 41985: 0, 'ResolutionUnit': 2, 41987: 0, 41988: (2272, 2272), 41990: 0, 'Make': 'Canon', 'Flash': 89, 41986: 0, 'DateTime': '2005:10:14 13:10:26', 'MeteringMode': 5, 'XResolution': (180, 1), 
#'MakerNote': '\x0e\x00\x01\x00\x03\x00.\x00\x00\x00\\\x04\x00\x00\x02\x00\x03\x00\x04\x00\x00\x00\xb8\x04\x00\x00\x03\x00\x03\x00\x04\x00\x00\x00\xc0\x04\x00\x00\x04\x00\x03\x00"\x00\x00\x00\xc8\x04\x00\x00\x00\x00\x03\x00\x06\x00\x00\x00\x0c\x05\x00\x00\x00\x00\x03\x00\x04\x00\x00\x00\x18\x05\x00\x00\x12\x00\x03\x00$\x00\x00\x00 \x05\x00\x00\x13\x00\x03\x00\x04\x00\x00\x00h\x05\x00\x00\x06\x00\x02\x00 \x00\x00\x00p\x05\x00\x00\x07\x00\x02\x00\x18\x00\x00\x00\x90\x05\x00\x00\x08\x00\x04\x00\x01\x00\x00\x00\xc6\xe5\x1b\x00\t\x00\x02\x00 \x00\x00\x00\xa8\x05\x00\x00\x10\x00\x04\x00\x01\x00\x00\x00\x00\x00!\x01\r\x00\x03\x00"\x00\x00\x00\xc8\x05\x00\x00\x00\x00\x00\x00\\\x00\x02\x00\x00\x00\x05\x00\x05\x00\x00\x00\x00\x00\x04\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0f\x00\x03\x00\x01\x00\x01@\x00\x00\xff\xff\xff\xff\xaa\x02\xe3\x00 \x00c\x00\xc0\x00\x01\x00\x08 \x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\x00\x00\xe0\x08\xe0\x08\x00\x00\x00\x00\x00\x00\x00\x00\xff\x7f\x00\x00\x00\x00\x00\x00\x02\x00\xe3\x00\x1e\x01\xd7\x00$\x01\xdb\x02\x00\x00\x00\x00D\x00\x00\x00\x80\x00X\x00_\x00\xbd\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xce\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x91\x01\x00\x00c\x00\xc0\x00\x00\x00\x00\x00\x00\x00\xfa\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00 \x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\t\x00\t\x00\xe0\x08\xa8\x06\xe0\x08\xd4\x00\x99\x01&\x00f\xfe\x00\x00\x9a\x01f\xfe\x00\x00\x9a\x01f\xfe\x00\x00\x9a\x01\xd7\xff\xd7\xff\xd7\xff\x00\x00\x00\x00\x00\x00)\x00)\x00)\x00I\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00IMG:PowerShot S45 JPEG\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Firmware Version 1.00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00D\x00\t\x00]\x01[\x01Z\x01]\x01\\\x01\\\x01]\x01U\x01_\x01\x04\x00\x00\x00\x00\x00z\xff\x00\x00\x00\x00\n\x00\x00\x00\x03\x00\n\x00\xa7\x00\xda\x000\x00\x00\x00\xf9\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x00\xa3\x00', 'ColorSpace': 1, 'ExifImageWidth': 2272, 'DateTimeDigitized': '2005:10:14 13:10:26', 'ApertureValue': (95, 32), 'UserComment': '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'FocalPlaneYResolution': (1704000, 210), 'CompressedBitsPerPixel': (5, 1), 'SensingMethod': 2, 'FNumber': (28, 10), 'DateTimeOriginal': '2005:10:14 13:10:26', 'FocalLength': (227, 32), 'ComponentsConfiguration': '\x01\x02\x03\x00', 'FocalPlaneXResolution': (2272000, 280), 'ExifOffset': 196, 'ExifImageHeight': 1704, 'Model': 'Canon PowerShot S45', 'Orientation': 1, 'ExposureTime': (1, 60), 'FileSource': '\x03', 'MaxApertureValue': (95, 32), 'ExifInteroperabilityOffset': 1572, 'FlashPixVersion': '0100', 'FocalPlaneResolutionUnit': 2, 'YCbCrPositioning': 1, 'ExifVersion': '0220'} 
```

编辑：我管理了步行部分，但仍然在编码中挣扎

```
if isinstance(value, str):
  ret[decoded] = value.decode('utf-8') 
```

错误

```
Unexpected errorTraceback (most recent call last):: <type 'exceptions.UnicodeDecodeError'>
File "c:\python27\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xb8 in position 22: invalid start byte 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:06:12.970

`scandirs`一旦遇到带有“错误”扩展名的文件，就会返回。你的目录中有这样的文件吗？你只需要`continue`. 如果要遍历树使用`os.walk`，则不需要递归。

`decode`如果您想要可读的输出，您可能想要`str`反对。另外，请参阅下面的最后一个注释。

各种注释：

*   把所有东西都放在`Image.open`从句`else`中
*   像这样检查`None`：`if exifinfo is None:`
*   类型检查：`isinstance(value, str)`. 这一点很重要，我认为您的任何编码/解码实际上都没有被执行过。

参照：

```
>>> type('st') == 'str'
False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:26:41.943

```
def find_images(arg, directory, files):
    for file_ in files:
        filename, extension = os.path.splitext(file_)
        if extension in ['.jpeg', '.jpg', '.png']:
            get_exif_data(os.path.join(directory, file_))

os.path.walk(path, find_image, None) 
```

# iphone - UIWebview 是否依赖 Wifi？

> ID：13120360
> 
> 赞同：0
> 
> 时间：2012-10-29T11:02:15.000
> 
> 标签：iphone, ios, ipad

我有以下这段代码，它可以`UIWebView`在一个 Wifi 上正确加载，但不能在另一个 WiFi 上加载。它再次在 3G 上正常工作。

```
tempWebView = [[UIWebView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
tempWebView.delegate = self;
tempWebView.scalesPageToFit = YES;

[tempWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"www.example.com/Contact.html"]]]; 
```

我试过`NSLogging`了，似乎`webViewDidFinishLoad:`没有在第二个 Wifi 上被调用。

我可以责怪网络 2 还是我需要检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:09:06.497

这个问题很确定与您的代码无关。也许只有一个 WiFi 没有互联网连接！？还是有一些奇怪的网络设置？Safari 或其他应用程序在那里工作吗？

如果您的代码在 3G 或单个 WiFi 中工作，那么您的代码就可以了。

# php - 如何更改 MySQL 查询的结果排序？

> ID：13120363
> 
> 赞同：1
> 
> 时间：2012-10-29T11:02:23.910
> 
> 标签：php, mysql, drupal, drupal-7

我正在尝试获取我的页面的上一个和下一个节点链接/缩略图，并根据它们的标题或文件 URI 或文件名对结果进行排序......

代码查询数据库并根据节点ID（nid，n.nid）输出上一个和下一个节点链接。我想根据节点标题（title，n.title），文件名（filename，f.filename）甚至文件URI（uri，f.uri）对结果进行排序。

但是，当我更改此行时：

```
->orderBy('n.nid', $order) 
```

至：

```
->orderBy('n.title', $order) 
```

它行不通。唯一的区别是，如果您从一个图像库的最后一页移动到另一个，它会稍微改变顺序，但在画廊内部，一切都是一样的。问题是如果您有一个画廊并决定在一段时间后插入新图像。节点 ID 现在与其他节点 ID 完全不同，并且此代码无法识别它。

我也尝试过更改出现的其他部分`nid`，但它不起作用。我想这对于更了解 MySQL 和 PHP 的人来说是微不足道的，但我坚持了几个小时，希望能得到任何帮助。

这是整个代码（来自 Vlad Stratulat，最初在[这里](https://stackoverflow.com/a/8914912/637548)找到）：

模板.php

```
function dad_prev_next($nid = NULL, $op = 'p', $start = 0) {
if ($op == 'p') {
    $sql_op = '>';
    $order = 'ASC';
}
elseif ($op == 'n') {
    $sql_op = '<';
    $order = 'DESC';
}
else {
    return NULL;
}

$output = '';

// your node must have an image type field
// let's say it's name is IMAGEFIELD
// select from node table
$query = db_select('node', 'n');
// join node table with image field table
$query->leftJoin('field_data_field_IMAGEFIELD', 'i', 'i.entity_id = n.nid');
// join file managed table where all data about managed files stored
$query->leftJoin('file_managed', 'f', 'f.fid = i.field_IMAGEFIELD_fid');
$query
    // select nid and title from node
    ->fields('n', array('nid', 'title'))
    // select uri from file_managed (image path)
    ->fields('f', array('uri'))
    // select image alt and title
    ->fields('i', array('field_IMAGEFIELD_alt', 'field_IMAGEFIELD_title'))
    // where nid "greater than"/"lower than" our current node nid
    ->condition('n.nid', $nid, $sql_op)
    // where node type in array('your content types')
    ->condition('n.type', array('PHOTOS'), 'IN')
    // where node is published
    ->condition('n.status', 1)
    // where requested node has image to display (if you want thumbnail)
    ->condition('f.uri', '', '!=')
    // order by nid
    ->orderBy('n.nid', $order)
    // limit result to 1
    ->range($start, 1);     

// make query
$result = $query->execute()->fetchAll();

foreach ($result as $node) {
    // theme your thumbnail image
    $variables = array(
        // default image style name `thumbnail`
        // you can use your own by following
        // admin/config/media/image-styles on your site
        'style_name' => 'thumbnail',
        'path' => $node->uri,
        'alt' => $node->field_IMAGEFIELD_alt,
        'title' => $node->field_IMAGEFIELD_title
    );
    $image = theme('image_style', $variables);

    $options = array(
        'html' => TRUE,
        'attributes' => array(
            'title' => $node->title
        )
    );
    $output = l($image, "node/{$node->nid}", $options);
}

return $output;
} 
```

节点.tpl.php

```
<?php print dad_prev_next($node->nid, 'p', 0); ?>
<?php print dad_prev_next($node->nid, 'n', 0); ?> 
```

编辑2：

尝试使用 strcmp 函数：

```
function dad_prev_next($title = NULL, $op = 'p', $start = 0) {
if ($op == 'p') {
    $strcmp = '1';
    $order = 'ASC';
}
elseif ($op == 'n') {
    $strcmp = '2';
    $order = 'DESC';
}
else {
    return NULL;
}

$output = '';

// your node must have an image type field
// let's say it's name is IMAGEFIELD
// select from node table
$query = db_select('node', 'n');
// join node table with image field table
$query->leftJoin('field_data_field_IMAGEFIELD', 'i', 'i.entity_id = n.nid');
// join file managed table where all data about managed files stored
$query->leftJoin('file_managed', 'f', 'f.fid = i.field_IMAGEFIELD_fid');
$query
    // select nid and title from node
    ->fields('n', array('nid', 'title'))
    // select uri from file_managed (image path)
    ->fields('f', array('uri'))
    // select image alt and title
    ->fields('i', array('field_IMAGEFIELD_alt', 'field_IMAGEFIELD_title'))
    // where node type in array('your content types')
    ->condition('n.type', array('PHOTOS'), 'IN')
    // where node is published
    ->condition('n.status', 1)
    // where requested node has image to display (if you want thumbnail)
    ->condition('f.uri', '', '!=')
    // order by nid
    ->orderBy('n.title', $order)
    // limit result to 1
    ->range($start, 1);     

// make query
$result = $query->execute()->fetchAll();

foreach ($result as $node) {
    // theme your thumbnail image
    $variables = array(
        // default image style name `thumbnail`
        // you can use your own by following
        // admin/config/media/image-styles on your site
        'style_name' => 'thumbnail',
        'path' => $node->uri,
        'alt' => $node->field_IMAGEFIELD_alt,
        'title' => $node->field_IMAGEFIELD_title
    );
    $image = theme('image_style', $variables);

    $options = array(
        'html' => TRUE,
        'attributes' => array(
            'title' => $node->title
        )
    );
    $output = l($image, "node/{$node->nid}", $options);
}

return $output;
} 
```

现在没有错误记录，但总是显示相同的照片 - 按字母顺序排列的第一张照片中的 2 张和最后一张中的 2 张。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:35:29.307

您按 n.title 排序，但您的第一个条件是查找大于/小于 $nid 的 n.nid。这没有任何意义，并导致半随机选择。我建议在按标题排序时将条件更改为 n.title $node->title，它会起作用。

# android - 脸书配置错误

> ID：13120368
> 
> 赞同：0
> 
> 时间：2012-10-29T11:02:39.980
> 
> 标签：android, facebook

我已经制作了一个应用程序，当我在我的模拟器中安装了 facebook sdk 3（但应用程序在单击确定后按预期工作）或设备时显示了上面的消息，但当我卸载 facebook sdk 时工作正常。它甚至发生在 facebook sdk 给出的示例中（我只是导入它们并运行）。但无需在设备或模拟器中安装 facebook sdk 即可正常工作。显示的消息如下。

```
 power is misconfigured for facebook login.press okay to go back to the application without connecting it to facebook... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:05:04.860

您需要在您的中进行编辑`app_id`以`values`匹配您正在使用的 Facebook 应用程序。

此外，您需要`key hash`在 Facebook 开发者控制台中添加应用程序设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:04:32.840

我辛苦了两天终于得到了解决方案，这是获取哈希键的错误方法**-**

```
keytool -exportcert -alias *<your _alias_name>* -keystore *<key_store_path>* | [openssl_bin_directory]\openssl sha1 -binary | [openssl_bin_directory]\openssl base64 
```

这里描述了**正确**的方法 -

[http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash](http://facebook.stackoverflow.com/questions/13281913/app-is-misconfigured-for-facebook-login-with-release-key-hash)

或在这里

[Facebook Android 生成密钥哈希](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash/12405323#12405323)

# c++ - Windows 中的 QSharedMemory 不一致行为

> ID：13120374
> 
> 赞同：3
> 
> 时间：2012-10-29T11:03:14.677
> 
> 标签：c++, qt, qt4, shared-memory

我正在玩，`QSharedMemory`我不确定我是刚刚发现了一个严重的错误还是我做错了什么。情况是，如果不存在具有相同键的内存，则文档说`QSharedMemory::create()`应该返回 true，否则应该返回 false，并且`QSharedMemory::error()`应该检查发生了什么。

我目前的代码是：

```
QSharedMemory sm("smtest");
sm.setKey("smtest"); // <--- not needed as I already set the key in the initializator, but I'm leaving it anyways, just for the test
qDebug() << sm.create(1);
qDebug() << sm.create(1); //<--- I expect this to return false, but it returns true.
qDebug() << sm.error(); //<--. I expect this to return QSharedMemory::AlreadyExists, but QSharedMemory::NoError is returned instead.
//wtf?! 
```

我的问题是：我是刚刚在 Qt4 中发现了一个非常大的错误，还是我做错了什么？

PS：此代码在 Windows 7 x64 上运行

编辑：为了清楚起见，如果我运行该代码两次，第二个应用程序应该检测到第一个，但它没有。

编辑 2：我在这里报告了一个错误[https://bugreports.qt.io/browse/QTBUG-27744](https://bugreports.qt.io/browse/QTBUG-27744)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:31:56.540

这绝对是一个错误，请阅读我的错误报告[https://bugreports.qt.io/browse/QTBUG-27765](https://bugreports.qt.io/browse/QTBUG-27765)

我最近附上了一个补丁来解决这个问题。如果你想解决这个问题，你需要投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:15:18.023

我只是在 Linux 上运行它：

```
#include <QCoreApplication>
#include <QSharedMemory>
#include <QDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    QSharedMemory sm("smtest");
    sm.setKey("smtest"); // <--- not needed as I already set the key in the initializator, but I'm leaving it anyways, just for the test
    qDebug() << sm.create(1);
    qDebug() << sm.create(1); //<--- I expect this to return false, but it returns true.
    qDebug() << sm.error(); //<--. I expect this to return QSharedMemory::AlreadyExists, but QSharedMemory::NoError is returned instead.
    //wtf?!
    return 0;
} 
```

并在第一次运行时得到

```
true
false 
4 
```

可能是您没有创建 QCoreApplication 吗？很多 Qt 的东西往往依赖于被创建的东西。

编辑：要强调的是，以上仅在第一次运行时发生。随后的运行总是给出假假。

Edit2：在 Windows 上，结果对我来说也是如此。

Edit3：似乎是一个错误，听起来很像这样：[https ://bugreports.qt.io/browse/QTBUG-5123](https://bugreports.qt.io/browse/QTBUG-5123)

# android - 使用 gralloc 方法从 Tegra 2 GPU 捕获屏幕

> ID：13120375
> 
> 赞同：1
> 
> 时间：2012-10-29T11:03:24.753
> 
> 标签：android, linux, android-ndk, tegra

Tegra 2/3 SOC 不使用通常的 /dev/graphics/fb0 dev 提供对帧缓冲区的访问。似乎仍然可以使用 gralloc 方法捕获帧缓冲区，实际上一些应用程序已经使用这种方法。

似乎 Nvidia 有一个补丁允许从 gralloc 读取。来源可以在这里找到。它已经很老了，到目前为止，android 已经发生了很多变化。

最新版本的 android 是否提供任何读取 gralloc 缓冲区的方法？

# lotus-notes - 对 Lotus Notes 的推文

> ID：13120376
> 
> 赞同：0
> 
> 时间：2012-10-29T11:03:29.060
> 
> 标签：lotus-notes

我正在尝试找到一种将推文从 RSS 提要转换为 Lotus Notes 文档的方法。有谁知道该怎么做？

最好的，弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:53:13.887

几年前，我用 LotusScript 编写了一个 RSS 阅读器。我曾计划在 OpenNTF 上开源它，但从未有时间真正清理它以进行发布。[我可以在这里](http://dl.dropbox.com/u/3991319/v3template.zip)“按原样”提供。我确实写了几篇关于一些关键功能的[博客](http://www.poweroftheschwartz.com/web/blog/poweroftheschwartz.nsf/d6plinks/RSCZ-69GRRD) [文章。](http://www.poweroftheschwartz.com/web/blog/poweroftheschwartz.nsf/d6plinks/RSCZ-6CYLGD)Lance Spellman 为 Notes 编写了一个 RSS 阅读器，它使用 Java 代理而不是 LotusScript，他确实[将他的代码发布](http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/2dd20dd6c1e05af986256e4a0072e356!OpenDocument)到了 OpenNTF。Thomas Adrian 还[发布](http://www.notessidan.se/blogg.nsf/plink/TADN-7MXCJB)了将 Twitter 提要导入 Notes 的代码，尽管我不知道他使用的是 RSS 提要还是 Twitter API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:32:22.343

不幸的是，我没有足够的信誉发表评论，因此有各种各样的答案。我当然评价 Richard 的回复，但是如果您打算通过 RSS 使用 twitter，您需要检查是否可以发布 2013 年 3 月，因为大多数 RSS 支持已被 Twitter 删除。

基本上，要从 Twitter 中提取任何内容都需要您首先通过 oAuth 进行授权，这包括搜索。这将影响 Richard 的反应，但在此之前解决方案是合理的。

# android - CountdownTimer 导致崩溃

> ID：13120377
> 
> 赞同：1
> 
> 时间：2012-10-29T11:03:34.813
> 
> 标签：android, android-progressbar, countdowntimer, android-homebutton

当我按下主页按钮并离开我的应用程序时，我的 CountdownTimer 导致操作系统崩溃。并非每部手机和每个版本的 android 都会发生这种情况。Logcat 中没有显示异常。这是我的代码：

```
 ProgressBar progressbar = (ProgressBar) findViewById(R.id.progressbar1);
    progressbar.setMax(100000);  

    /* ------------- BEGINNING: CountDown */

    final TextView myCounter = (TextView)findViewById(R.id.mycounter);
    counter = new CountDownTimer(100000, 1000) {  

    @Override
    public void onFinish() {  

    final Dialog dialog = new Dialog(zeitspiel.this);
    dialog.setContentView(R.layout.dialog_zeitspiel);
    dialog.setCancelable(false);
    dialog.setTitle("Dialog");

    /* More stuff regarding the dialog... */

    dialog.show();  
    myCounter.setText("Ende!");

    }

    @Override
    public void onTick(long millisUntilFinished) {

    myCounter.setText("Verbleibende Zeit: " + String.valueOf(millisUntilFinished / 1000) + " Sek.");
    pBarCounter = (int)millisUntilFinished;
    }

   }.start();  
   /* ------------- ENDING CountDown */

   /* ------------- BEGINNING: Progressbar */
   new Thread(new Runnable() {
   public void run() {
   ProgressBar progressbar1 = (ProgressBar)findViewById(R.id.progressbar1);

   while(pBarCounter <= 100000){  
   progressbar1.setProgress(pBarCounter);
   }
   } }).start();
   /* ------------- ENDING of Progressbar */ 
```

我试图禁用主页键以“解决”问题 - 它工作正常，但问题是 Android 4.x 不支持此解决方案并导致异常。所以这个解决方案是不切实际的。

```
 @Override
   public void onAttachedToWindow() {
   this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
   super.onAttachedToWindow();
   } 
```

日志猫：

```
09-17 16:19:45.466: I/ActivityManager(272): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=de.toropi.test.plus/.MainActivity bnds=[160,150][240,250]} from pid 482
09-17 16:19:45.546: D/dalvikvm(2115): Late-enabling CheckJNI
09-17 16:19:45.546: I/ActivityManager(272): Start proc de.toropi.test.plus for activity de.toropi.test.plus/.MainActivity: pid=2115 uid=10027 gids={}
09-17 16:19:45.596: W/ResourceType(272): Skipping entry 0x7f04002a in package table 0 because it is not complex!
09-17 16:19:45.596: W/ResourceType(272): Skipping entry 0x7f04003d in package table 0 because it is not complex!
09-17 16:19:45.666: D/TextLayoutCache(2115): Using debug level: 0 - Debug Enabled: 0
09-17 16:19:45.716: D/libEGL(2115): loaded /system/lib/egl/libGLES_android.so
09-17 16:19:45.716: D/libEGL(2115): loaded /system/lib/egl/libEGL_adreno200.so
09-17 16:19:45.716: D/libEGL(2115): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
09-17 16:19:45.726: D/libEGL(2115): loaded /system/lib/egl/libGLESv2_adreno200.so
09-17 16:19:45.756: D/OpenGLRenderer(2115): Enabling debug mode 0
09-17 16:19:45.866: I/ActivityManager(272): Displayed de.toropi.test.plus/.MainActivity: +330ms
09-17 16:19:47.656: I/ActivityManager(272): START {cmp=de.toropi.test.plus/.hauptmenue} from pid 2115
09-17 16:19:47.706: D/dalvikvm(2115): GC_FOR_ALLOC freed 153K, 4% free 6525K/6791K, paused 16ms
09-17 16:19:47.716: I/dalvikvm-heap(2115): Grow heap (frag case) to 6.794MB for 371216-byte allocation
09-17 16:19:47.746: D/dalvikvm(2115): GC_FOR_ALLOC freed 1K, 5% free 6886K/7175K, paused 14ms
09-17 16:19:48.116: D/dalvikvm(2115): GC_CONCURRENT freed 567K, 10% free 6730K/7431K, paused 297ms+1ms
09-17 16:19:48.206: D/dalvikvm(2115): GC_CONCURRENT freed 342K, 8% free 6877K/7431K, paused 1ms+2ms
09-17 16:19:48.296: D/dalvikvm(2115): GC_CONCURRENT freed 389K, 7% free 6940K/7431K, paused 1ms+2ms
09-17 16:19:48.476: I/ActivityManager(272): Displayed de.toropi.test.plus/.hauptmenue: +810ms
09-17 16:19:48.486: D/OpenGLRenderer(2115): Flushing caches (mode 0)
09-17 16:19:50.286: I/ActivityManager(272): START {cmp=de.toropi.test.plus/.allgemeinwissen} from pid 2115
09-17 16:19:50.486: D/dalvikvm(2115): GC_CONCURRENT freed 240K, 5% free 7134K/7495K, paused 2ms+3ms
09-17 16:19:50.555: I/ActivityManager(272): Displayed de.toropi.test.plus/.allgemeinwissen: +236ms
09-17 16:19:50.566: D/OpenGLRenderer(2115): Flushing caches (mode 0)
09-17 16:19:52.246: I/ActivityManager(272): START {cmp=de.toropi.test.plus/.allgemeinwissen_pro} from pid 2115
09-17 16:19:52.686: I/ActivityManager(272): Displayed de.toropi.test.plus/.allgemeinwissen_pro: +423ms
09-17 16:19:52.696: D/OpenGLRenderer(2115): Flushing caches (mode 0)
09-17 16:20:02.055: I/ActivityManager(272): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.sonyericsson.home/.HomeActivity} from pid 272
09-17 16:20:02.126: D/OpenGLRenderer(2115): Flushing caches (mode 0)
09-17 16:20:02.166: D/OpenGLRenderer(2115): Flushing caches (mode 1)
09-17 16:20:07.546: D/dalvikvm(482): GC_FOR_ALLOC freed 1007K, 17% free 9990K/11911K, paused 27ms
09-17 16:20:13.386: D/lights(272): set_light_buttons: brightness=0
09-17 16:20:15.346: D/dalvikvm(1282): GC_CONCURRENT freed 354K, 8% free 6813K/7367K, paused 2ms+2ms
09-17 16:20:16.086: D/dalvikvm(1282): GC_CONCURRENT freed 500K, 9% free 6734K/7367K, paused 2ms+2ms
09-17 16:20:17.456: I/dalvikvm(482): Jit: resizing JitTable from 4096 to 8192
09-17 16:20:18.326: I/ActivityManager(272): START {act=android.appwidget.action.APPWIDGET_UPDATE flg=0x10000000 cmp=com.marcow.birthdaylist/.MainActivity bnds=[2,166][318,234]} from pid -1
09-17 16:20:18.386: I/ActivityManager(272): Start proc com.marcow.birthdaylist for activity com.marcow.birthdaylist/.MainActivity: pid=2137 uid=10122 gids={}
09-17 16:20:18.396: I/dalvikvm(2137): Turning on JNI app bug workarounds for target SDK version 8...
09-17 16:20:18.476: W/Resources(2137): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f060097}
09-17 16:20:18.526: V/PhoneStatusBar(349): setLightsOn(true)
09-17 16:20:18.536: D/TextLayoutCache(2137): Using debug level: 0 - Debug Enabled: 0
09-17 16:20:18.626: I/ActivityManager(272): Displayed com.marcow.birthdaylist/.MainActivity: +247ms
09-17 16:20:18.626: I/dalvikvm(272): Jit: resizing JitTable from 8192 to 16384
09-17 16:20:39.476: D/dalvikvm(272): GC_CONCURRENT freed 1050K, 18% free 11926K/14535K, paused 3ms+7ms

09-17 16:21:08.966: I/ActivityManager(272): START {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.sonyericsson.home/.HomeActivity} from pid 272
09-17 16:21:09.016: D/dalvikvm(2137): GC_EXPLICIT freed 200K, 5% free 6618K/6919K, paused 2ms+2ms
09-17 16:21:09.055: W/InputManagerService(272): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@2c1358e0
09-17 16:21:13.156: D/dalvikvm(482): GC_FOR_ALLOC freed 425K, 12% free 10522K/11911K, paused 57ms
09-17 16:21:14.386: D/dalvikvm(1969): GC_CONCURRENT freed 415K, 7% free 7530K/8071K, paused 2ms+13ms
09-17 16:21:17.636: D/dalvikvm(1282): GC_CONCURRENT freed 391K, 8% free 6818K/7367K, paused 2ms+2ms
09-17 16:21:18.126: D/dalvikvm(1282): GC_CONCURRENT freed 526K, 9% free 6738K/7367K, paused 1ms+7ms
09-17 16:21:19.555: I/ActivityManager(272): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.radioopt.widget/com.tm.monitoring.Main bnds=[236,242][310,322]} from pid 482
09-17 16:21:19.626: W/ResourceType(272): Skipping entry 0x7f040033 in package table 0 because it is not complex!
09-17 16:21:19.636: W/ResourceType(272): Skipping entry 0x7f04003d in package table 0 because it is not complex!
09-17 16:21:25.436: D/lights(272): set_light_buttons: brightness=0
09-17 16:21:31.136: D/kernel(135): [  274.770233] bq27520 0-0055: bq27520_handle_soc_worker() capacity=43 (43) flags=0x138 ctrl_status=0x28d soh_state=0x1, valid=1
09-17 16:21:33.526: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2c1bb9f8 com.android.sonyericsson.android.server.dormant.fastdormancymanager} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2c1a0bc8, started 10006ms ago
09-17 16:21:33.526: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bfb9748 ReceiverList{2bf75e20 272 system/1000 local:2c1a0bc8}}
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.696: I/InputDispatcher(272): Dropped event because it is stale.
09-17 16:21:40.716: I/InputDispatcher(272): Dropped event because it is stale.

09-17 16:22:04.926: I/power(272): *** set_screen_state 0
09-17 16:22:04.936: D/DASH - select(272): sensors_select_callback: select canceled by request
09-17 16:22:04.936: D/DASH - select(272): sensors_select_callback: select canceled by request
09-17 16:22:04.936: D/DASH-bma250_input(272): bma250_input_config_delay: rate:66667000
09-17 16:22:04.956: D/kernel(135): [  308.576141] request_suspend_state: sleep (0->3) at 304938997887 (2012-09-17 14:22:04.934997582 UTC)
09-17 16:22:04.956: D/kernel(135): [  308.576599] as3676 0-0040: as3676_early_suspend
09-17 16:22:04.956: D/kernel(135): [  308.579101] cyttsp-spi spi0.0: cyttsp_suspend: Enter
09-17 16:22:04.966: D/SurfaceFlinger(126): About to give-up screen, flinger = 0xfc48
09-17 16:22:05.126: W/kernel(135): [  308.757202] mddi_sony_ic_off_panel_off [3]
09-17 16:22:05.126: W/kernel(135): [  308.757202] sony_lcd_display_off [3]
09-17 16:22:05.176: W/kernel(135): [  308.812835] sony_lcd_dbc_off [3]
09-17 16:22:05.176: W/kernel(135): [  308.812835] dbc_ctrl = 1
09-17 16:22:05.176: W/kernel(135): [  308.812896] sony_lcd_enter_sleep [3]
09-17 16:22:05.305: W/kernel(135): [  308.938903] sony_lcd_enter_deepstandby [3]
09-17 16:22:10.006: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2c1aedf0 android.intent.action.TIME_TICK} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2bf162a0, started 10006ms ago
09-17 16:22:10.006: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bf164a8 ReceiverList{2bf16430 272 system/1000 local:2bf162a0}}
09-17 16:22:16.206: D/dalvikvm(455): GC_CONCURRENT freed 868K, 10% free 9231K/10183K, paused 2ms+3ms
09-17 16:22:20.006: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2c1aedf0 android.intent.action.TIME_TICK} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2bf19698, started 10000ms ago
09-17 16:22:20.006: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bf19910 ReceiverList{2bf19898 272 system/1000 local:2bf19698}}
09-17 16:22:30.026: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2c0b4468 android.intent.action.SCREEN_OFF} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2bedd1e0, started 10002ms ago
09-17 16:22:30.026: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bedd3c0 ReceiverList{2bedd348 272 system/1000 local:2bedd1e0}}
09-17 16:22:40.036: W/ActivityManager(272): Timeout of broadcast BroadcastRecord{2c0b4468 android.intent.action.SCREEN_OFF} - receiver=android.app.LoadedApk$ReceiverDispatcher$InnerReceiver@2bc19590, started 10003ms ago
09-17 16:22:40.036: W/ActivityManager(272): Receiver during timeout: BroadcastFilter{2bc16668 ReceiverList{2bc17820 272 system/1000 local:2bc19590}}
: E/(): Device disconnected 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:07:38.257

较新版本的 Android 终于通过将窗口标记为 KeyGuard 来消除对 home-key 的滥用。因此，我相信你在这个问题上不走运。也许您应该考虑更改您的应用程序设计以遵循标准实现。

# mysql - MySQL - 在 mysql 错误上打印字符串

> ID：13120384
> 
> 赞同：1
> 
> 时间：2012-10-29T11:03:55.607
> 
> 标签：mysql, sql-injection

解释：

我想在查询结果中插入字符串

例如：当我导航到（此站点仅用于学习）时：

```
http://www.toplinks.co.il/website.php?id=-1+group+by+1 
```

该页面**不**包含“警告：mysql_fetch_array()：”

当我导航到：

```
http://www.toplinks.co.il/website.php?id=-1+group+by+99 
```

该站点**包含**“警告：mysql_fetch_array()：”

我想做类似的事情：

当出现mysql错误时：

```
print "[Error!]" 
```

当没有错误时：

```
print Null 
```

mysqlerror时是否有可以打印字符串的MySQL函数？

就像是：

```
group_concat(group+by+1,0x5b4572726f72215d) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:10:53.020

调用获取错误的函数：

```
mysql_error() 
```

这将返回最后一个错误。

使用它的最简单方法（在学习代码中）如下：

```
mysql_query("YOUR QUERY HERE") or die(mysql_error()); 
```

不过，我绝不会建议在生产网站上这样做。它主要是一种快速而丑陋的调试方式。“or die()”代码片段可以在任何返回布尔值的函数之后使用，所以只要你的函数在成功时返回 true 并且在失败时返回 false，你可以在任何 mysql 函数之后使用它

# node.js - 如何在nodejs/express中使用gridform解析ajax文件上传？

> ID：13120385
> 
> 赞同：1
> 
> 时间：2012-10-29T11:03:59.730
> 
> 标签：node.js, mongodb, express, gridfs

我将 express 3.x 和 node 1.9 与 mongo 和 gridfs 一起使用。要上传文件，我使用了 gridfrom，它在普通表单提交中工作正常，但在基于 ajax 的表单提交中无法正常工作。我关注了几个网站，但没有帮助。[http://www.davidpirek.com/blog/nodejs-html5-file-uploader](http://www.davidpirek.com/blog/nodejs-html5-file-uploader)

```
var gridform = require('gridform'),
    mongoose = require('mongoose'),
    mongo,
    db,
    app;

exports.upload_file = function(req, res){
    var conn = mongoose.createConnection();
    conn.open('localhost', 'employee', 27017, function (){
        db             = conn.db;
        mongo          = mongoose.mongo;
        gridform.db    = db; 
        gridform.mongo = mongo;    

        if ('POST' == req.method){              
        var form = gridform();  

      form.parse(req, function(err, fields, files) {
        res.end("File ID:" + files.text.id);
        });
     }
    });
} 
```

上面的代码适用于普通表单请求。但不是 ajax 表单请求。下面是我的客户端 ajax 调用。

## 客户端

```
jQuery("form#someform").change(function(event){
    var formData = new FormData();
    formData.append("filePath", document.getElementById("filePath").files[0]);
    var xhr = new XMLHttpRequest();
    xhr.addEventListener("load", function (evt) {
        var obj = jQuery.parseJSON(evt.target.responseText);
        window.location.hash = 'File';
        MVC.message.show({text: obj.message, hideDealy: 2000});
      }, false);
    xhr.open("POST", "/upload_file");
    xhr.send(formData);
}); 
```

# html - 无法选择html文本

> ID：13120388
> 
> 赞同：4
> 
> 时间：2012-10-29T11:04:17.887
> 
> 标签：html, css, media-queries

我遇到了一个特殊的问题。

我页面上的某些 HTML 文本变得无法选择，并且在悬停时无法识别其锚后代（在 chrome 中测试）。

您必须满足某些要求才能使其发生。这是我的示例页面：

[http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/](http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/)

如果您将浏览器窗口宽度减小到小于 520 像素（所以我的`@media`css 启动），您将无法再突出显示或选择正文中的链接。

谁能看到是什么原因造成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:07:18.307

`<div id="sidebar>"``#main div`与缩小页面大小时重叠。

添加`z-index:100`到`#main`

```
#main {
padding-top: 0.5em;
z-index: 100;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-03T05:43:25.863

> 用户选择：文本！重要；

这可以帮助你谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:15:11.187

当您将浏览器窗口宽度减小到小于 520 像素时，您`#sidebar`将`#main`无法从`#sidebar`. 在你的`#main`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T01:06:25.813

对于发现此页面正在研究类似问题的任何人，如果您使用来自 html5boilerplate.com 的 HTML5 样板，包含的一些 CSS 可能会导致您的内容文本在白色背景上不会在您选择它时显示为突出显示。具体来说，“::selection”的 CSS 应该被调整或删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T16:51:48.513

如果你有一个元素的填充，然后你将另一个元素绝对定位在第二个元素的填充内，你就会遇到这个问题。

```
#container .list li .list-left-left {
            width: 120px;
            position: absolute;
            padding-left: 10px;
        }

        #container .list li .list-left {
            width: 240px;
            position: absolute;
            padding-left: 165px; 
        } 
```

解决方案是使用 margin-left 而不是 padding left。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-09T11:05:42.990

对于遇到无法标记文本问题的任何人，请检查是否有人没有故意使用 javascript 阻止此操作，例如：

```
function disableselect(e) {return false}
document.onselectstart = new Function (return false)
document.onmousedown = disableselect 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-04-11T12:30:54.663

我刚刚遇到了这个问题，我发现这是因为我做了一个永远专注的输入。

因此，请检查您的代码是否有类似的内容。它会中断其他元素的突出显示。

```
<input onblur="this.focus()" type="text" id="calInput" autofocus/> 
```

# asp.net-mvc-3 - MVC3：如何将查询字符串数组绑定到模型上？

> ID：13120389
> 
> 赞同：2
> 
> 时间：2012-10-29T11:04:17.637
> 
> 标签：asp.net-mvc-3, model-binding

我有一个没有参数的动作。我在视图中有一个表单，它对此操作执行 GET。在操作中，我实例化了一个对象（因此我可以从 DB 中获取一些默认值），然后在其上使用使用 DefaultModelBinder 的 UpdateModel()。

所以我的模型具有以下属性def：

```
public string[] AI { get; set; } 
```

我的查询字符串包括表单中的其他内容：

```
?AI=12-345&AI=45-43&AI=48-546 
```

动作调用 UpdateModel() 后，AI 属性为空！但是，如果我将操作定义更改为：

```
MyAction(string[] AI) 
```

然后填充 AI 参数，就像我期望的模型属性一样。这是默认模型绑定器中的错误吗？我尝试制作该属性`List<string>`，但也没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:14:37.230

我生命中最大的荷马 DOH。我所做的很好，*如果*它使用我在帖子中声称的 DefaultModelBinder，MVC 会很好地绑定它；但是，在需要绑定的模型中添加额外的值也无法绑定（简单的布尔值？）我深入挖掘并发现自定义绑定器已在 MVC 中注册了模型的类型，并且它正在为每个属性做一些事情模型，因此对我的新模型无能为力，:(。

所以这个故事的寓意是不要忘记检查活页夹注册，或者只是不使用注册并始终明确说明。

# c# - Castle Windsor 解决了一个通用接口

> ID：13120390
> 
> 赞同：3
> 
> 时间：2012-10-29T11:04:19.303
> 
> 标签：c#, generics, castle-windsor

我有一些实现的通用接口。

```
interface IBaseInterface<in TObject, out TDetails>
{
    TDetails GetDetails(TObject obj);
}

abstract class BaseImpl<TObject> : IBaseInterface<TObject, string>
{
    public abstract string GetDetails(TObject obj);
}

class Impl0 : BaseImpl<decimal>
{
    public override string GetDetails(decimal obj)
    {
        return "decimal";
    }
}

class Impl1 : BaseImpl<string>
{
    public override string GetDetails(string obj)
    {
        return "string";
    }
}

class Impl2 : BaseImpl<Details>
{
    public override string GetDetails(Details obj)
    {
        return "Details";
    }
}

class Impl3<TDetail> : BaseImpl<DetailsGeneric<TDetail>> where TDetail : Details
{
    public override string GetDetails(DetailsGeneric<TDetail> obj)
    {
        return "GenericDetails";
    }
}

class Details
{

}

class Details1 : Details
{

}

class DetailsGeneric<TDetails> : Details
{

} 
```

使用 WinsdorInstaller 类注册组件

```
container.Register(AllTypes.From(typeof(Program).Assembly.GetTypes())
  .BasedOn(typeof(IBaseInterface<,>)).WithServiceAllInterfaces()
  .LifestyleTransient()); 
```

尝试解决。最后两个调用抛出异常，但我希望它们返回为基类型声明的组件

```
class Program
{
    static void Main(string[] args)
    {
        var container = new WindsorContainer();

        container.Install(new WindsorInstaller());

        Details("test", container);

        Details(123m, container);

        Details(new Details(), container);

        Details(new DetailsGeneric<Details>(), container);

        Details(new Details1(), container); // "ComponentNotFound" exception

        Details(new DetailsGeneric<Details1>(), container); // "ComponentNotFound" exception           
    }

    static void Details<TType>(TType obj, WindsorContainer container)
    {
        var details = container.Resolve<IBaseInterface<TType, string>>().GetDetails(obj);

        Console.WriteLine(details);
    }
} 
```

我哪里错了？我可以修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:54:30.990

`Details1`从我所见，您没有关闭任何组件...

# sql - 用于分析列中的记录和报告的高级 SQL

> ID：13120393
> 
> 赞同：0
> 
> 时间：2012-10-29T11:04:30.367
> 
> 标签：sql

我有一个相当复杂的情况。我的表结构如下：

![在此处输入图像描述](../Images/8230762e415f3aa1406165217def13f7.png)

现在我需要如下结果： 按国家/地区划分的顶级产品（基于选择次数） R1,2.. 代表选择选项的受访者

![在此处输入图像描述](../Images/5b12302b638a4c8c48fef87e1c13eb1e.png)

请帮助我获得此输出所需的 SQL 逻辑。

感谢所有的大力帮助。

问候， 导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:29:14.940

语法取决于您的各种 SQL，但原则是

1.  将您的源数据还原为规范化形式
2.  合计金额，并对它们进行排名
3.  将它们放在国家/地区以获取柱状数据。

# php - 带有网络身份验证和端口的 HTTP 请求

> ID：13120396
> 
> 赞同：1
> 
> 时间：2012-10-29T11:04:52.533
> 
> 标签：php, http, curl, basic-authentication

我需要对以下 URL 执行请求：

http://[USERNAME]:[PASSWORD]@[SERVER_IP]:[PORT]/some/path/to/some/file

但最终生成的 URL 被视为无效，因为它包含两次 ':' 字符。有什么解决办法吗？

这就是我尝试过的：

```
$process = curl_init('http://[SERVER_IP]:[PORT]/OpenKM/webdav/okm:personal/somefile.mp4');
curl_setopt($process, CURLOPT_HEADER, 1);
curl_setopt($process, CURLOPT_USERPWD, "[USERNAME]:[PASSWORD]");
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_POST, 1);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
$return = curl_exec($process);  // $return is FALSE
var_dump(curl_error($process));die();  // Here we see string(23) "Empty reply from server" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:07:24.160

将 ':' 的编码值改为**%3A**

我建议您使用在线广泛可用的 URL 编码器工具，在此处查看其中一个...

[http://meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

这里还有 w3school 提供的完整字符编码列表...

[http://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

# android - 限制 TextView 的长度

> ID：13120397
> 
> 赞同：26
> 
> 时间：2012-10-29T11:04:53.193
> 
> 标签：android

> **可能重复：**
> [在 Android 中限制 EditText 的文本长度](https://stackoverflow.com/questions/3285412/limit-text-length-of-edittext-in-android)

我是 Activity 上的 textView，它根据从 JSON 响应接收到的参数显示，我只需要将其限制为 12 个字符。

```
<TextView
    android:id="@+id/textViewName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/includeheadersetting"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="20dp"
    android:gravity="center"
    android:text="Name"
    android:textColor="#000000"
    android:textStyle="bold" /> 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-29T11:07:49.523

用于`android:maxLength="12"`限制文本长度

```
 <TextView
            android:id="@+id/textViewName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/includeheadersetting"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:text="Name"
            android:maxLength="12"
            android:textColor="#000000"
            android:textStyle="bold" /> 
```

您还可以使用其他属性，如下所示：

```
android:ellipsize="end"
android:maxLines="1" 
```

使用此属性**“...”**将添加到文本末尾，如下所示：

**“你好，你好吗……”**而不是**“你好，你好吗？”**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T11:09:17.473

一般来说，仅包含`android:maxLength`不被认为是好主意。

使用 maxLength 属性，然后使用`android:ellipsize="marquee"`自动将“...”添加到已被截断的任何行的末尾。

```
<TextView 
    android:id="@+id/txtView" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:maxLines="1" 
    android:maxLength="10" 
    android:ellipsize="marquee"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:06:53.873

添加类似的代码

```
android:maxLength="12" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T11:32:03.120

将以下最大长度参数添加到您的文本视图中-

```
android:maxLength="12" 
```

无论您想要什么限制，您都可以替换它而不是 12 可以给出 14 或您想要的任何长度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T11:07:24.577

添加`android:maxLength="12"`到您的文本视图..

```
<TextView
            android:id="@+id/textViewName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/includeheadersetting"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:text="Name"
            android:textColor="#000000"
            android:textStyle="bold"
            android:maxLength="12" /> 
```

# concurrency - 锁/条件变量问题

> ID：13120398
> 
> 赞同：3
> 
> 时间：2012-10-29T11:04:55.317
> 
> 标签：concurrency, locks

所以在我正在编写的程序中，我有三个函数，为了简单起见，我们称它们为 A、B 和 C。每个函数都需要访问资源 X 才能工作。

限制是A和B不允许同时运行，必须适当同步。但是，允许 C 与 A 或 B 同时运行。

这给我带来了一些问题。

首先，我尝试在 A 和 B 上加锁，因此当调用 A 时，它会获取 X 的锁，然后释放它，与 B 相同。这样 A 和 B 顺序运行。但是，如果我以这种方式使用锁，C 将无法与 A 或 B 同时运行。

所以我尝试使用条件变量，如果 B 正在运行，A 必须等待来自 B 的信号，而 B 必须等待来自 A 的信号，但是这种相互依赖的调用似乎也不起作用。

不知道该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T13:02:01.863

不用控制语言，只谈理论，似乎有一个简单的方法。如果 X 是持久的，并且 A、B 和 C 可以以一种接触 X 的方式被调用，那么 A、B 和 C 应该在访问 X 时传入它们的名称，例如，通过一个名为 D 的方法。这里将做 D 做的事：

*   接受来电者姓名和参数。
*   如果调用者是 C，则将参数传递给 X。
*   如果调用者是 A 或 B，检查 X 上是否有锁。
*   如果没有锁，将参数发送给 X。
*   如果有锁，请等待打开。

所以基本上用 D 包装 X。你甚至可以进一步简化并让 D 接受锁定或非锁定参数而不是名称。如果锁定，检查锁定并可能等待，如果没有锁定，则传递参数。

这种方法可能看起来过于简单，但我对你的实际情况了解不多。我看到这个问题也是不久前被问到的，所以我不知道您是否需要帮助。

# objective-c - 如何创建像 UIScrollView 这样的幻灯片

> ID：13120406
> 
> 赞同：0
> 
> 时间：2012-10-29T11:05:35.813
> 
> 标签：objective-c, ios

我想像元素滑入一样滑动我的视图`UIScrollView`。用户可以触摸和拉动视图，并且根据加速度和位置，视图应该离开或停留。

我应该使用`UIPanGestureRecognizer`with`UISwipeGestureRecognizer`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:16:47.200

如果您希望内容跟随用户的手指，您想使用**UIPanGestureRecognizer**（听起来就像您在这里所做的那样）。滑动手势将等待滑动完成，然后告诉你它。

使用“状态”属性获取手指在开始和结束时的位置，并使用速度来确定加速度。

`CGPoint location = [sender locationInView:self.view];`

```
if(sender.state == UIGestureRecognizerStateBegan)
{
         startLocation = location;
}
  else if(sender.state == UIGestureRecognizerStateChanged)
{
      // Move view or do something to give feedback to user while they swipe
}
else if(sender.state == UIGestureRecognizerStateEnded)
{
    CGPoint distanceMoved = CGPointMake(location.x - startLocation.x, location.y - startLocation.y);
    CGPoint velocity = [sender velocityInView:self.view];
 // Logic goes here
} 
```

# javascript - 设置比例后如何调度“缩放”事件（d3，zoom.behavior）

> ID：13120411
> 
> 赞同：7
> 
> 时间：2012-10-29T11:06:22.430
> 
> 标签：javascript, d3.js

在缩放行为上手动设置比例后，如何触发缩放事件？

```
var zoom = d3.behavior.zoom()
    .scaleExtent([0.5, 4])
    .on('zoom', onzoom);

// later on
zoom.scale(2); 
```

[https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-scale](https://github.com/mbostock/d3/wiki/Zoom-Behavior#wiki-scale)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-17T17:32:15.470

首先，您需要将缩放行为附加到 SVG 对象。同样，您可以在缩放对象上调用缩放函数。

```
var zoom = d3.behavior.zoom()
    .scaleExtent([0.5, 4])
    .on('zoom', onzoom);

//svgElement is an actual element such as a rect or text or group
svgElement.call(zoom);

// later on
zoom.scale(2);
zoom.event(svgElement); 
```

# javascript - 加载新页面后，如何更改 div 背景颜色并使其保持突出显示？

> ID：13120412
> 
> 赞同：2
> 
> 时间：2012-10-29T11:06:23.310
> 
> 标签：javascript, css, html, onclick

希望你能帮助我..我试图在我当前所在的顶部菜单上保持高亮的 div，就像这个网站上的“问题，标签用户..”一样

这是我的网站：[http ://www.ehivemarketing.com/web-design.php](http://www.ehivemarketing.com/web-design.php)

所以基本上顶部菜单是一个包含，其中就是：

```
<div class="each_circle_menu"><a href="web-design.php" class="topLink"><img src="images/bt_top_webdesign.png"  border="0"/></a></div>
<div class="each_circle_menu"><a href="online-marketing.php" class="topLink"><img src="images/bt_top_online_marketing.png" border="0" /></a></div>
<div class="each_circle_menu"><a href="social-media.php" class="topLink"><img src="images/bt_top_social_media.png"  border="0"/></a></div>
<div class="each_circle_menu"><a href="#" class="topLink"><img src="images/bt_top_learningcentre.png" border="0" /></a></div>
<div class="each_text_menu1"><a href="../index.html" >Home</a></div>
<div class="each_text_menu"><a href="../about-ehive-digital.php" >About Us</a></div>
<div class="each_text_menu"><a href="../contact-us.php" >Contact Us</a></div>
<div class="each_text_menu"><a href="../careers.php" >Careers</a></div>
<div class="each_text_menu">Clients</div> 
```

这是我的悬停CSS：

```
.each_text_menu1:hover
{
background-color:#aad400;
}
.each_text_menu:hover
{
background-color:#aad400;
} 
```

其中工作正常，但我需要在单击后保留颜色背景。

关于我如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:25:34.037

这些链接可能对您的工作有所帮助： [**link1**](http://www.richnetapps.com/automatically_highlight_current_page_in/) 和 [**link2**](http://codex.wordpress.org/Dynamic_Menu_Highlighting)[](http://www.richnetapps.com/automatically_highlight_current_page_in/)**[](http://codex.wordpress.org/Dynamic_Menu_Highlighting)**

 ****希望这些对您的问题有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:27:45.017

使用一个`.active`类。

```
.each_text_menu1:hover
{
    background-color:#aad400;
}
.each_text_menu:hover
{
    background-color:#aad400;
}
.active{background-color:#aad400;} 
```

的HTML：

```
<div class="each_circle_menu"><a href="web-design.php" class="topLink"><img src="images/bt_top_webdesign.png"  border="0"/></a></div>
<div class="each_circle_menu"><a href="online-marketing.php" class="topLink"><img src="images/bt_top_online_marketing.png" border="0" /></a></div>
<div class="each_circle_menu"><a href="social-media.php" class="topLink"><img src="images/bt_top_social_media.png"  border="0"/></a></div>
<div class="each_circle_menu"><a href="#" class="topLink"><img src="images/bt_top_learningcentre.png" border="0" /></a></div>
<div class="each_text_menu1"><a href="../index.html" >Home</a></div>
<div class="each_text_menu"><a href="../about-ehive-digital.php" >About Us</a></div>
<div class="each_text_menu"><a href="../contact-us.php" >Contact Us</a></div>
<div class="each_text_menu"><a href="../careers.php" >Careers</a></div>
<div class="each_text_menu active">Clients</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:14:17.217

你可以创建一个类，比方说`active`，`:hover`就像这样：

```
.each_text_menu:hover, .each_text_menu.active {
    background-color:#aad400;
} 
```

而不是检查 PHP - 当您使用 PHP 时 - 选择哪个页面并将活动类添加到导航中的此链接。可能看起来像这样：

```
<div class="each_text_menu<php print ( 'career' == $page ? ' active' : '' ); ?>">
    <a href="../careers.php" >Careers</a>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:14:29.210

有很多方法可以做到这一点。一种简单的方法是在每个页面上的 body 标记中添加一个相关的类，然后您可以引用该类。

所以说你的导航是这样的：

```
<ul id="nav">
 <li id="nav1"><a href="#">Nav #1</a></li>
 <li id="nav2"><a href="#">Nav #2</a></li>
 <li id="nav3"><a href="#">Nav #3</a></li>
 <li id="nav4"><a href="#">Nav #4</a></li>
</ul> 
```

您在主页上的 body 标签将是这样的：

```
<body class="nav1-on"> 
```

所以你的CSS将是：

```
body.nav1-on ul#nav li#nav1 {
 // some css styles
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T11:14:54.937

定义一个附加的 css 类，定义如下：

```
.active
{
    background-color:#aad400;
} 
```

在生成菜单的代码上，将类添加到相应的 div 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T11:20:15.210

我看到了两种方法来解决这个问题，首先是在 php 中执行逻辑 - 检查您所在的任何页面并回显并将该类添加到正确的项目中。我对 php 有点生疏，所以语法可能有错误

```
<div class="each_circle_menu <? if($page == 'web-design') { echo "greenBG"; }  ?>"> 
```

或者你也可以使用 javascript/jquery 为你做这件事

```
$(document).ready( function() {
    $('.each_circle_menu').each(function() {
        var item = $(this);
        if(window.location.indexOf(item.attr('href')) != -1) {
            item.addClass('greenBG');
        }
    });
}); 
```****

# android - 单击列表项时如何进行片段交易？

> ID：13120413
> 
> 赞同：1
> 
> 时间：2012-10-29T11:06:25.280
> 
> 标签：android, android-intent, android-fragments, fragmenttransaction

我有一个活动，其中包含一个 ActionBar（带有四个选项卡），一个片段分别分配给每个选项卡。在这些片段中，我分配了一些填充了字符串值的 ListAdapter，这些值是我想要操作的可点击的。单击一个项目时，我希望该应用程序从该片段发送到另一个。我知道我必须使用 FragmentManager() 和 FragmentTransaction() 但由于我是 Android 开发新手，我需要任何形式的帮助，感谢您的帮助。

这是其中一个选项卡（UserFragment.java）的片段代码：

```
 import android.app.ListFragment;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;

/** This is a listfragment class */
public class UserFragment extends ListFragment 
{

    /** An array of items to display in ArrayList */
    String user_items[] = new String[]
    {
        "Account",
        "Addresses",         
        "Payment Providers",
        "Profile",
        "Transactions",
        "Wallet"
    };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        /** Creating array adapter to set data in listview */
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_expandable_list_item_1, user_items);

        /** Setting the array adapter to the listview */
        setListAdapter(adapter);

        getListView().setOnItemClickListener(new OnItemClickListener()
        {
            public void onItemClick(AdapterView<?> parent, View view, int pos,
                    long id) 
            {
                Intent myIntent = new Intent(getActivity().getBaseContext(), Profile.class);
                startActivity(myIntent);            
            }       
        }); 
        return super.onCreateView(inflater, container, savedInstanceState);     
    }

    @Override
    public void onStart() 
    {
        super.onStart();

        /** Setting the multiselect choice mode for the listview */
        getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    }
} 
```

Profile.java 活动代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
public class Profile extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.profile_layout);

        //Button test = (Button) findViewById(R.id.btnTest);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:14:22.053

您需要`OnItemClickListener`为您定义`ListFragment`处理项目点击事件。例如：

```
getListView().setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3){
        // start your new activity here
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:08:39.653

我发现出了什么问题。经过长时间的搜索，我了解到如果**onCreateView()**方法是静态的，那么设置侦听器/s 一切都很好，但在这种情况下，当我们填充字符串的数组适配器时，它是不行的，因为首先它必须因此，创建了它的 View 不会让应用程序进行任何进一步的侦听器。为了使其可用，应在**onCreateView()**和**onStart()方法之间启动/创建*****onActivityCreated(Bundle)***并插入其余代码。

 ****这是将 ListFragment 链接到另一个 FragmentActivity 类的解决方案：

```
public void onActivityCreated(Bundle savedInstanceState)
    {    
        super.onActivityCreated(savedInstanceState);

        getListView().setOnItemClickListener(new OnItemClickListener()
        {
            public void onItemClick(AdapterView<?> parent, View view, int pos,
                    long id) 
            {
                Intent myIntent = new Intent(getActivity().getBaseContext(), Profile.class);
                startActivity(myIntent);            
            }       
        });
    } 
```****

# android - Android库项目无法启动

> ID：13120414
> 
> 赞同：1
> 
> 时间：2012-10-29T11:06:32.397
> 
> 标签：android, project

我从网上下载了一个项目。它包括两个文件夹。一个是项目，另一个是图书馆。当我第一次导入两者并为库设置正确的路径时，它运行正常。但是现在删除该项目并再次导入后，它显示错误，它是库项目。我重复了我第一次做的相同程序。该怎么办。![在此处输入图像描述](../Images/6ac429776cd9ac44ec99159f284d5023.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:14:05.253

我认为您将项目作为库运行，

```
1\. Right click on your project
2\. Go to the property
3\. Select Android from left section
4\. The **is_library** check-box should be Unselected
5\. Click on apply button
6\. Click on OK button 
```

最后运行你的项目。

它对我有用。试试看。

# mongodb - CoffeeScript Mongodb 变量传递

> ID：13120417
> 
> 赞同：1
> 
> 时间：2012-10-29T11:06:52.850
> 
> 标签：mongodb, coffeescript

```
db.collection('database_name')
  .find( { 'active':true, 'iOS':true} )
  .toArray (err, dbDocs) -> 
```

返回我一个结果集。

然而，

```
deviceName = 'iOS'
db.collection('database_name')
  .find( { 'active':true, deviceName:true} )
  .toArray (err, dbDocs) -> 
```

不工作。

`deviceName`是一个咖啡脚本字符串变量，初始化为 iOS`deviceName = 'iOS'`

如何传递变量`deviceName`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:10:31.023

如果您的字段名称是动态的，则不能使用对象文字，您必须以编程方式构建查询对象：

```
query = { active: true };
query[deviceName] = true if something;

db.collection('database_name').find( query ).toArray (err, dbDocs) -> 
```

# c# - 为什么没有 where 子句的查询会出现输入字符串异常？

> ID：13120426
> 
> 赞同：2
> 
> 时间：2012-10-29T11:07:25.420
> 
> 标签：c#, mysql, linq, entity-framework, formatexception

使用 ASP.NET MVC 2、实体框架、MySQL、VS2010 Ultimate。我已经研究了很长时间，但对我的代码中的一般输入异常命中没有线索。虽然我已经删除了所有 where 子句：

```
var record = (from staff in pmsEntities.ef_staff                          
                           select staff
                           ).FirstOrDefault(); 
```

> [FormatException：输入字符串的格式不正确。]
> 
> ```
> System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9594283    
> System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info) +119    
> System.String.System.IConvertible.ToInt32(IFormatProvider provider) +46    
> System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider) +385   
> MySql.Data.Entity.EFMySqlDataReader.ChangeType(Object sourceValue, Type targetType) +566    
> MySql.Data.Entity.EFMySqlDataReader.GetValue(Int32 ordinal) +231    
> System.Data.Common.Internal.Materialization.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal) +215    
> System.Data.Common.Internal.Materialization.Shaper.GetPropertyValueWithErrorHandling(Int32 ordinal, String propertyName, String typeName) +68    
> lambda_method(Closure , Shaper ) +1088    
> System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly(Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet) +218    
> lambda_method(Closure , Shaper ) +291    
> System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper) +170    
> System.Data.Common.Internal.Materialization.SimpleEnumerator.MoveNext()  +84    
> System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +4187840    
> System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1(IEnumerable`1 sequence) +41    
> System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle(IEnumerable`1 query, Expression queryRoot) +59    
> System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute(Expression expression) +150    
> System.Linq.Queryable.FirstOrDefault(IQueryable`1 source) +265    
> IDP.Models.Login.IsValid(String _username, String _pwd, Int32 _type) in C:\Users\george\Desktop\Um\idp\nur\IDP\IDP\Models\Login.cs:36 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:15:16.443

堆栈跟踪的这些部分：

> ```
> MySql.Data.Entity.EFMySqlDataReader.ChangeType(Object sourceValue, Type targetType) +566    
> MySql.Data.Entity.EFMySqlDataReader.GetValue(Int32 ordinal) +231    
> System.Data.Common.Internal.Materialization.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal) +215    
> System.Data.Common.Internal.Materialization.Shaper.GetPropertyValueWithErrorHandling(Int32 ordinal, String propertyName, String typeName) +68    
> lambda_method(Closure , Shaper ) +1088    
> System.Data.Common.Internal.Materialization.Shaper.HandleEntityAppendOnly(Func`2 constructEntityDelegate, EntityKey entityKey, EntitySet entitySet) +218    
> lambda_method(Closure , Shaper ) +291 
> ```

表明 MySQL Linq 提供程序的某些数据存在问题 - 如果看起来在您的**对象模型**中有一个字段被定义为`int`，但数据库中的相应**数据**未表示为整数。

在不了解您的数据库以及如何设置实体框架模型的情况下，我无法准确说出问题所在。

# c# - WCF 服务库：带有 32 位 dll 的 BadImageFormatException

> ID：13120433
> 
> 赞同：2
> 
> 时间：2012-10-29T11:07:57.773
> 
> 标签：c#, wcf, .net-4.0

我的项目结构如下所示：

```
 myApp 
 -->WCFSerLib (Any CPU Deafult application) 
 -->ClassLib1 (Any CPU)
 -->ClassLib2 (x86) 
```

当我尝试执行我的应用程序时，不幸的是，我收到了以下错误。

```
 System.BadImageFormatException was unhandled by user code 
```

无论如何，我可以实现上述目标吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:13:13.937

如果我猜对了，那么您正在尝试在 x64 机器上使用 x86 dll。使用 AnyCPU，.net 框架将自动使用当前架构。

因此，您的应用程序作为 x64 应用程序运行，该应用程序尝试加载失败的 x86 库。所以你有两个选择：

*   将目标架构设置为 x86
*   添加/创建 x64 库

如果您在环境变量的某处同时拥有两个版本（x86/x64），则操作系统将自动选择正确的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:16:56.073

我想您正在 x64 系统上运行您的应用程序。
当 WCFService 库或 ClassLib1 调用 ClassLib2 中的方法时，以这种方式混合 Platform Type 会导致 BFE，因为前两个作为 64 位进程运行，而后者被迫在 x86 模式下运行。

您应该在每个项目上设置相同的平台类型。
当然，WCFService 库仅支持 AnyCPU，因此对于每个项目，使用 AnyCPU 平台类型是有意义的。

如果您的 ClassLib2 需要使用 32 位库 (winscard.dll) 并且没有该库的 64 位版本，那么，我认为您应该使用 WCF 服务应用程序而不是服务库。[看到这个问题](https://stackoverflow.com/questions/3755761/i-cant-compile-a-standard-wcf-service-library-in-x86-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:48:21.180

谢谢你们，

问题在于**winscard.dll**它使用的句柄是 Int32 。我所做的只是用Int64**替换****Int32**。

# c# - ClickOnce 部署，删除文件组

> ID：13120436
> 
> 赞同：3
> 
> 时间：2012-10-29T11:08:06.413
> 
> 标签：c#, .net, clickonce

我有 .NET 4.0 应用程序，并且正在使用 ClickOnce 部署。我有几个在代码中动态下载的文件组：

```
ApplicationDeployment deploy = ApplicationDeployment.CurrentDeployment;
deploy.DownloadFileGroup(downloadGroupName); 
```

有什么方法可以卸载这些组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-26T04:34:56.677

您可以从磁盘中删除属于该组的文件，
下次应用程序启动时它将继续使用该文件。

想象一下，您有一个名为 FileGroup 的文件组`"GROUPA"`，其中包含一个文件`somefile.txt`。
您确定执行程序集的位置并删除该文件：

```
if (ApplicationDeployment.IsNetworkDeployed)
{
    var deployment = ApplicationDeployment.CurrentDeployment;
    if (deployment.IsFileGroupDownloaded("GROUPA"))
    {
        var path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
        var fileToDelete = Path.Combine(path, "somefile.txt");
        File.Delete(fileToDelete);
    }
} 
```

当应用程序重新启动`deployment.IsFileGroupDownloaded("GROUPA")`时将返回 false
允许您在将来的某个时间再次下载 FileGroup。

# python - 使用 Python 的十六进制转换函数中的 Base 16 错误

> ID：13120437
> 
> 赞同：0
> 
> 时间：2012-10-29T11:08:09.897
> 
> 标签：python, hex, tornado

大家好，我在 Web 服务器 Tornado 中有这部分 Python 代码：

```
# Transform an integer into a string with HEX symbols in the format that is
# understandable by Quantaservd
def hextransform(data, length):
    data = hex(data)[2:]
    assert(len(data) <= length)
    # zero-padding
    data = ('0' * (length - len(data))) + data
    # Swap 'bytes' in the network ID
    data = list(data)
    for i in range(0, length, 2):
        tmp = data[i]
        data[i] = data[i + 1]
        data[i + 1] = tmp
    # Reverse the whole string (TODO: CHECK) 
    data.reverse()
    data = "".join(data)
    return data

def hex2char(i):
    return ('0'+hex(i)[2:])[-2:]

def cmd_payload(op1_hex, op2_hex, l, pl, ck):
    return hex2char(op1_hex) + hex2char(op2_hex) + hex2char(l) + pl + hex2char(ck)

def packet2json(op_group, op_code, payload): 

    lun = len(payload) / 2
    fcs = op_group ^ op_code ^ lun #fcs = XOR of op_group, op_code, lenght and  payload
    for i in range(len(payload)):
    if ((i % 2) == 1):
        fcs = fcs ^ int('0x' + payload[(i - 1):(i + 1)], 16)
        print int('0x' + payload[(i - 1):(i + 1)], 16)
    s=cmd_payload(op_group,op_code, lun, payload, fcs)
    #p = r '{"data": "' + s + r '"}'
    p=r'{"data": "'+s+r'"}'
    return p

def invert2bytes(stringa, ind):
    byte_low = stringa[ind:ind + 2]
    ind += 2
    byte_high = stringa[ind:ind + 2]
    return byte_high + byte_low 
```

我有这个错误：

```
File "./wsn.py", line 883, in get cmdjson = packet2json(op_group_hex,op_code_hex, packet)
File "./wsn.py", line 180, in packet2json fcs = fcs ^ int('0x' + payload[(i - 1):(i + 1)], 16)
ValueError: invalid literal for int() with base 19: '0x*`0' 
```

当程序到达 hextransform 函数时......我不知道这是否是一个基本错误，因为在错误中它说明了关于 base 19 的内容，而 mu 函数在 base 16 中。或者如果问题是 '* ' 特点...

有任何想法吗？非常感谢。

**编辑**

我在调用 hextransform 函数的处理程序中添加了这部分代码：

```
#Command OnOffCmd_SetState
    if command in ['ON', 'OFF', 'TOGGLE']:
        op_group = "70"
        op_code = "50"
        packet_meta = "*%s;%s;%s;%s;02%s%s600080000%s#"
        pkt_len = hextransform(16, 2)
        netid = hextransform(int(nid), 16)
        sens_id = hextransform(int(sid) >> 16, 4)
        sens_id_little = invert2bytes(sens_id,0)
        cluster_id = hextransform(int(sid) & 0x00FFFF, 4)
        end_point = "08"

        if command == 'ON':
            cmd_data = "01"
        elif command == 'OFF':
            cmd_data = "00"
        elif command == 'TOGGLE':
            cmd_data = "02"

        packet = packet_meta % (netid, op_group, op_code, pkt_len, sens_id, end_point, cmd_data)
        packet = packet.upper()

        op_group_hex=0x70
        op_code_hex=0x50

        cmdjson = packet2json(op_group_hex,op_code_hex, packet)

    #Command ZDP-RestartNwk.Request
    elif command == 'RESTARTNWK':
        op_group = "A3"
        op_code = "E0"
        netid = hextransform(int(nid), 16)
        packet_meta = "*%s;%s;%s;%s;02600080000#"
        pkt_len = hextransform(0, 1)

        packet = packet_meta % (netid, op_group, op_code, pkt_len)
        packet = packet.upper()

        op_group_hex=0xA3
        op_code_hex=0xE0

        cmdjson = packet2json(op_group_hex,op_code_hex, packet)

    #Command ZDP-IEEE_addr.Request            
    elif command == 'IDENTIFY':
        op_group = "A2"
        op_code = "05"
        packet_meta = "*%s;%s;%s;%s;02%s600080000#"
        pkt_len = hextransform(2, 1)
        netid = hextransform(int(nid), 16)
        sens_id = hextransform(int(sid) >> 16, 4)
        sens_id_little = invert2bytes(sens_id,0)

        packet = packet_meta % (netid, op_group, op_code, pkt_len, sens_id)
        packet = packet.upper()

        op_group_hex=0xA2
        op_code_hex=0x05

        cmdjson = packet2json(op_group_hex,op_code_hex, packet) 
```

**编辑 2**

如果我写

`pkt_len = hextransform(2, 1)`

我有错误。如果我有

```
pkt_len = hextransform(16, 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:20:29.360

阅读[此答案](https://stackoverflow.com/questions/209513/convert-hex-string-to-int-in-python)。它考虑了何时使用 16 与 0 的基数。

当您声明您使用的是基数 16（正如您所做的那样）时，我不会包括`0x`-- 这是表示十六进制数字但实际上不是十六进制本身的特殊语法。

所以，要么：

1.  删除`0x`前缀，或
2.  使用 0 而不是 16 的底数

如果这些都不起作用，那么您的有效负载字符串有问题。它可能包含您没想到的字符。

# iphone - 如何管理来自 Web 服务的数据以使应用程序快速流畅

> ID：13120438
> 
> 赞同：1
> 
> 时间：2012-10-29T11:08:15.823
> 
> 标签：iphone, objective-c

我正在一个应用程序中工作，在该应用程序中，我从每个页面的 json 格式的 Web 服务获取数据，并将数据发送到远程数据库。在这个过程中，我的应用程序变得越来越慢。直到从 Web 服务获取数据下一个视图没有加载。这很耗时，有什么方法可以同时获取数据和显示视图。我听说过线程编程，但我不熟悉它。请建议我应该采用哪种技术来制作我的应用程序更快。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:16:55.670

您可以使用 Grand Central Dispatch 或 NSInvocationOperation 在后台线程中进行加载：

```
dispatch_queue_t q = dispatch_get_global_queue(0, 0);
dispatch_queue_t main = dispatch_get_main_queue();
dispatch_async(q, ^{
    PagedSearchResult *result = // something which takes a while to complete
    dispatch_sync(main, ^{
        // update the UI
    });
}); 
```

看看[Ray Wenderlich 的 Grand Central Dispatch 教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:22:14.650

为此，您可以像在后台进程中完成所有数据的下载和上传一样，这样用户就不需要等到数据完成他们的任务。

对于后台进程，您可以轻松地使用

```
[self performSelectorInBackground:@selector(runProcessInBackground:) withObject:nil]; 
```

或者您也可以参考此 [https://stackoverflow.com/questions/9949248/iphone-sdk-running-a-repeating-process-in-a-background-thread。](https://stackoverflow.com/questions/9949248/iphone-sdk-running-a-repeating-process-in-a-background-thread)

你也可以在应用程序中使用分页来显示数据，比如在第一次调用中你将只接收来自 Web 服务的前 100 条记录，这样会花费很短的时间，在获取 100 条记录后，当页面结束时加载另一个记录，这样也可以你可以增加你的应用程序。速度。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:27:43.970

出于您的目的，最简单的方法是使用标准`NSURLConnection`. 它是开箱即用的异步。在完成处理程序中，您可以例如更新您的 UI，或通知它自行更新。

```
NSURLRequest *request = [NSURLRequest requestWithURL:
   [NSURL URLWithString:urlString]];
[NSURLConnection sendAsynchronousRequest:request
   queue:self.queue
   completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
       // do something with data or handle error
   }]; 
```

# r - 匹配（）到向量列表 - 可能不同的长度

> ID：13120441
> 
> 赞同：3
> 
> 时间：2012-10-29T11:08:29.033
> 
> 标签：r, list, vector, match

该`match(x, y)`函数非常适合在 vector`x`的元素中搜索 vector 的元素`y`。`y`但是，当向量列表（长度可能不同）时，什么是完成类似工作的有效且简单的方法？

我的意思是结果应该是一个长度与 相同的向量`x`，并且第 i 个元素应该是`y`包含`x`, 或的第 i 个元素的第一个成员`NA`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:26:58.873

要找到 x 的每个元素（第一个）出现的 y 元素，请尝试以下操作：

```
## First, a reproducible example
set.seed(44)
x <- letters[1:25]
y <- replicate(4, list(sample(letters, 8)))
y
# [[1]]
# [1] "t" "h" "m" "n" "a" "d" "i" "b"
# 
# [[2]]
# [1] "c" "l" "z" "a" "s" "d" "i" "u"
# 
# [[3]]
# [1] "b" "k" "e" "g" "o" "i" "h" "j"
# 
# [[4]]
# [1] "g" "i" "f" "r" "h" "w" "l" "o"

## Find the element of y first containing the letters a-j
breaks <- c(0, cumsum(sapply(y, length))) + 1 
findInterval(match(x, unlist(y)), breaks)
# [1]  1  1  2  1  3  4  3  1  1  3  3  2  1  1  3 NA NA  4  2  1  2 NA  4 NA NA 
```

# lotus-notes - 如何导入两个cc都包含compositeData？

> ID：13120442
> 
> 赞同：1
> 
> 时间：2012-10-29T11:08:30.833
> 
> 标签：lotus-notes, xpages

不知道这个问题对不对？如果它很疯狂，请不要在意。实际上我正在开发 xpages 应用程序。在那里我需要做两件事，我想添加选项列表功能并将动态数据（如 field_1、field_2、field_3、...）绑定到 n 取决于客户的选择。我正在为两个自定义控件使用复合数据。我可以删除选项列表控件的复合数据，也可以通过传递范围变量来完成。但这比复合数据需要更多的时间。

我没有收到任何错误。但是绑定的文档没有保存。

是否可以导入具有复合数据的 CC？

第一个CC的代码：-

```
<xc:viewpicklist datasrc="view1" dialogID="dialog1" dialogWidth="700px" dialogTitle="Pick this field value!!!">
<xc:this.viewColumn>
<xp:value>0</xp:value>
<xp:value>1</xp:value>
<xp:value>2</xp:value>
</xc:this.viewColumn>
</xc:viewpicklist> 
```

第二个CC的代码：-

```
<xc:BOM_Partinfo BOM_Partinfo="#{document1}"
                               TNUM="field#{index+1}" Desc="Desc#{index+1}" quan="Ea#{index+1}"
                               exp="exp#{index+1}" cap="cap#{index+1}" total="price#{index+1}"
                               RD="RD#{index+1}" m="manufact#{index+1}"
                               m_n="manufactnum#{index+1}">
                       </xc:BOM_Partinfo> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:40:51.863

在 XP/CC 中定义您想要这些 CC 的数据源。为两个 CC 定义参数“dataSourceName”。在它们中的每一个中，在您要绑定到数据源的任何地方都使用 EL "requestScope[compositeData.dataSourceName].fieldName"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:00:28.540

您不能使用复合数据参数将文档数据源发送到自定义控件。

您可以尝试使用此脚本来代替 [http://openntf.org/XSnippets.nsf/snippet.xsp?id=access-datasources-of-custom-controls](http://openntf.org/XSnippets.nsf/snippet.xsp?id=access-datasources-of-custom-controls)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:51:11.080

如果自定义控件在调用页面中是静态的，则可以读取在自定义控件的属性中设置的信息：

```
var x = getComponent("yourcomponentid");
x.getPropertyMap().get("parametername"); 
```

但是您想将数据源从外部控件传播到内部控件...

你需要仔细计划。如果您移交数据源，那么您的自定义控件依赖于数据源中的一组固定字段（这将是 com.ibm.xsp.model.DocumentDataSource 类型的参数）。这将违反封装原则。所以我建议你实际上交出数据绑定 - 优点：你可以非常灵活地绑定到什么（不仅数据源，而且 bean 和范围变量都可以工作）。诀窍是您提供绑定名称，因为您将静态键入它（例如“document1.subject”或“requestScope.bla”）。在你的控制下，你然后做

```
${"#{compositeData.field1}"} 
${"#{compositeData.field2}"} 
```

每个字段都需要一个。

# qt - Qt Creator 问题：无法打开包含文件：'windows.h'

> ID：13120443
> 
> 赞同：0
> 
> 时间：2012-10-29T11:08:32.610
> 
> 标签：qt, installation, qt-creator

我已经在带有 Visual Studio 2008 的 Windows 7 上安装了“基于 Qt 4.7.4（32 位）的 Qt Creator 2.4.1”。但是在创建基本项目时出现以下错误：

```
 c:\qtsdk\desktop\qt\4.8.1\msvc2008\mkspecs\win32-msvc2008\..\win32-msvc2005\qplatformdefs.h:67: 
error: C1083: Cannot open include file: 'windows.h': No such file or directory 
```

我还检查了 windows.h 它存在于以下位置：C:\Program Files\Microsoft SDKs\Windows\v7.0A\Include\

我想提一下，由于项目规范，我不能使用 MinGW 目标。

请求大家帮助我摆脱这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:04:38.250

在 Qt Creator、Tools--Options、Build&Run、Kits 中，选择一个工具包并编辑其属性，将编译器从“Microsoft Windows SDK ...”更改为“Microsoft Visual C++ Compiler 9.0 (x86)”。

我通过这种方式解决了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T09:28:40.237

检查**Qt 创建者的项目/构建环境**并**编辑变量**

```
(INCLUDE, LIB, OSINCLUDES, OSLIBRARIES, PROGRAMFILES, SDKDIR, SDKTOOLS, WINDOWSSDKDIR) 
```

包含 Windows SDK 7.1 路径（**C:\Program Files **(x86)** \Microsoft SDKs\Windows\v7.1**）。

也许 Windows SDK 7.1 安装在**“C:\Program Files\Microsoft SDKs\Windows\v7.1”**

# java - Java 编译器如何区分这两个构造函数/方法？

> ID：13120447
> 
> 赞同：14
> 
> 时间：2012-10-29T11:08:44.613
> 
> 标签：java, variadic-functions, ambiguous

```
public class MyClass {

    private String string;
    private Object[] objects;

    // constructor 1
    public MyClass(String string, Object... objects) {
        this.string = string;
        this.objects = objects;
    }

    // constructor 2
    public MyClass(String string) {
        this.string = string;
    }

    public static void main(String[] args) {
        MyClass myClass = new MyClass("foobar");
    }

} 
```

在那种情况下，Java 编译器是如何决定使用`constructor 2`而不是 的`constructor 1`？为什么没有`The constructor ... is ambiguous`或类似的错误发生？

PS：这个问题也适用于*经典方法*。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T11:16:30.767

**仅当**没有非*var-arg*方法/构造函数时才会选择*var-args*方法/构造函数。所以很清楚为什么编译器选择.***`MyClass(String string)`***

 **** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T11:19:43.077

**它总是被调用的最具体的方法。**

```
new MyClass("foobar"); 
```

搜索以调用将类型对象`String`作为唯一参数的构造函数。

并且，如果匹配方法不存在，`var-args`则将使用方法。`non-var-args`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:16:33.750

据我了解，可变参数构造函数和方法只是语法糖，它转换为数组声明。因此，您在编译期间的构造函数 1 几乎等于：

```
public MyClass(String string, Object[] objects) {
    this.string = string;
    this.objects = objects;
} 
```

这意味着，如果您想`MyClass`通过以下代码构造实例：

```
MyClass obj = new MyClass("Hello", "1", "2"); 
```

这将等于：

```
MyClass obj = new MyClass("Hello", new Object[]{"1", "2"} ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:22:58.410

**第一个答案**
当您有多个构造函数时，构造函数的参数声明彼此不同。初始化类时，Java 将调用与给定参数和类型匹配的正确构造函数。
例如：如果您创建 2 个具有相同参数的构造函数，那么它会显示给您`Duplicate method or ambiguous error`

 **具有相同和不同原型的**第二个答案**方法在java中称为方法[重载。](https://stackoverflow.com/questions/837864/java-overloading-vs-overwriting)
这就是为什么`no The constructor ... is ambiguous error occurs`在承包商的情况下以及在方法的情况下。**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T11:23:02.837

JVM 将寻找精确匹配以将值传递给方法/构造函数中的变量，**如果它无法找到精确匹配，它将把值视为对象。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T11:27:32.210

[jls-15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)声明编译器将首先在没有自动装箱或 var agrs 的情况下看起来**最匹配**。`Constructor #2`适合你的情况。

如果它不存在，将应用第一个自动装箱，即任何具有参数超类 String ie Object 的方法都将被调用。

```
 // constructor 2
    public MyClass(Object string) {
        this.string = string.toString();
    } 
```

现在，即使应用了自动装箱，编译器也无法找到最佳匹配，它会选择 var args。因此，如果您从代码中删除构造函数 2，将调用第一个构造函数。*****

# hbase - Hbase Importtsv java.lang.IllegalArgumentException：无法读取分区文件错误

> ID：13120448
> 
> 赞同：2
> 
> 时间：2012-10-29T11:08:49.773
> 
> 标签：hbase, bulk-load

我有一个分布式集群，当使用 importtsv 运行批量上传命令时，它给了我`java.lang.IllegalArgumentException`：无法读取分区文件错误，而且它有一个本地作业运行器正在运行。它可以在不指定选项的情况下从本地系统很好地导入`-Dimporttsv.bulk.output`任何关于此的指针都会非常有帮助

TIA

# asp.net - ASP.NET 以编程方式定义虚拟子域？

> ID：13120449
> 
> 赞同：2
> 
> 时间：2012-10-29T11:08:54.743
> 
> 标签：asp.net, url, iis, virtual, routes

如何以编程方式在我的 ASP.NET Web 应用程序中定义虚拟子域？

是否可以通过 Route 或任何其他类型的虚拟 URL 提供程序？

# c# - 从子进程的stdout异步读取同步

> ID：13120453
> 
> 赞同：6
> 
> 时间：2012-10-29T11:09:16.330
> 
> 标签：c#, io, synchronization, multiple-processes

我有启动子[进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)并`stdout`异步处理它的应用程序。问题是异步操作需要一些时间，我希望负责流程执行的方法在所有异步 IO 操作完成**后结束。**

我有这样的代码：

```
using System.Diagnostics;

Process process = new Process();
// ...
process.OutputDataReceived += new DataReceivedEventHandler(this.OnRecvStdOut);
process.ErrorDataReceived += new DataReceivedEventHandler(this.OnRecvStdErr);
// ...
process.Start();
process.BeginOutputReadLine();
process.BeginErrorReadLine();
// ...
process.WaitForExit(); 
```

现在我正在寻找一种方法来告诉程序等到所有 IO ( `OnRecvStdOut`) 操作完成。

我虽然关于使用[System.Threading](http://msdn.microsoft.com/en-us/library/798axes2.aspx)类之一，但我不确定哪个类最适合这个以及如何做到这一点，最好的方法可能是：

```
public void OnRecvStdOut(...)
{
    something.Increase();
    // the stuff that takes so long
    something.DecreaseAndSignal();
} 
```

在主要功能中：

```
something.WaitUntilZero(); 
```

*注意：我想同时允许`StdErr`和`StdOut`并行处理。* `Something`不能依赖它`Wait`会被调用`Signal`，因为`Increase()`和`DecreaseAndSignal()`对在发生之前会被调用很多次`Wait`。

想到的第二件事是能够多次发出信号（无需处理信号）并在主函数中使用循环，例如：

```
while( ioOperations > 0){
    something.WaitForSignal(500);
} 
```

* * *

### 编辑：当前工作解决方案：

我想出了这个似乎有效的方法：

```
using System.Threading;

protected int IOCount = 0;
protected AutoResetEvent _IOSyncEvent = new AutoResetEvent(false);

public void OnRecvStdOut(...)
{
    Interlocked.Increase( ref IOCount);
    // the stuff that takes so long
    Interlocked.Decrease( ref IOCount);
    IOSyncEvent.Set();
}

// After process.WaitForExit()
while( IOCount > 0){
    // 250 for a case that signal occurs after condition and before wait
    IOSyncEvent.WaitOne(250); 
} 
```

但我会很感激任何笔记如何做到这种“良好的实践方式”或者我认为实施的可能风险是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:50:11.720

使用`CountdownEvent`设置为 2。每个接收到的数据回调，检查 x.EndOfStream 标志（其中 x 是过程对象上的标准输出或标准错误）。如果 EOF，则发出倒计时事件信号。它会起作用，因为标准和错误输出流最终都会发出事件信号。一旦两者都发出信号，它的等待将返回。这也是一种非常有效的方法。

# node.js - Express 3 上的 EJS 布局

> ID：13120457
> 
> 赞同：6
> 
> 时间：2012-10-29T11:09:29.340
> 
> 标签：node.js, express, ejs

我在 Express 3 上的 EJS 布局文件有一些问题。Express 似乎无法找到要渲染的布局。它只是完全跳过了 layout.ejs，这意味着输出错过了所有样式表等。

```
res.render('login', { user: req.user }); 
```

和配置部分，

```
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs'); 
```

在 layout.ejs 中我添加了 body 标签，

```
<%- body %> 
```

我之前一直在尝试 Jade，它工作得很好，所以问题只是 EJS。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T16:41:27.507

[https://github.com/visionmedia/ejs/issues/48](https://github.com/visionmedia/ejs/issues/48)

我不确定上述内容是否已更新，但它表明布局功能已在 express 3 中被弃用。

因此，我一直在使用 ejs-locals 来实现等效功能：

[https://github.com/RandomEtc/ejs-locals](https://github.com/RandomEtc/ejs-locals)

# php - 关键字功能，如 Stackoverflows

> ID：13120463
> 
> 赞同：1
> 
> 时间：2012-10-29T11:10:00.790
> 
> 标签：php, mysql, database

我希望能够通过关键字索引的数据库中有几个条目（将增长到数千个）。

所以说我有一张桌子，比如：

编号 | 用户名 | 电子邮件 | 描述

我想为该用户附加多个关键字，例如：

高 | 金发女郎 | 男 | 瘦骨嶙峋的

我将如何为此构建表格？很像新问题底部的 stackoverflow 中使用的关键字？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:13:29.570

你需要三张桌子

用户：

```
id | username | email | description 
```

标签：（将包含 Tall、Blonde、Male、Skinny 等......在名称字段中）

```
id | name 
```

用户标签：

```
user_id | tag_id 
```

要使用户拥有标签，您可以在`users_tags`表中添加一行，其中包含相关项目的 id。

user_id 和 tag_id 都应该是外键，指的是相应的表，并且结合起来，它们应该形成一个唯一键（可能是主键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:13:38.383

如果我理解正确，有 3 个表：

```
- users (user_id, username)
- keywords (keyword_id, keyword)
- user_keywords (user_id, keyword_id) 
```

并在它们之间建立关系（在与示例相同的列名上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:14:35.150

这是一个多对多的关系。

您有一个关键字表和一个对象表（可以与关键字相关联）。

然后你有第三个表，它有两列形成一个复合键，每一个都是其他两个表上的外键。

例如

```
object_keyword_relationship
===========================
object_id    |   keyword_id
1            |   1
1            |   2 
```

# delphi - 快速报告多主明细报告

> ID：13120464
> 
> 赞同：1
> 
> 时间：2012-10-29T11:10:14.930
> 
> 标签：delphi

* * *

任何人都知道如何制作这样的报告模型：

Table1 ->No_INV* , Total Table2 ->No_INV**,Fruit,Price

## 我的标题

* * *

请帮我解决这个设计报告和 adoquery 的 sql 语法我用 TitleBand1 DetailBand1 SubDetailBand1 做了一个 Tquickrep

我的结果总是这样

# No_INV 总计

# 发票001 1000

```
Apple    500 
```

# 发票001 1000

```
oranges   500 
```

# 发票002 1500

```
Grape    1000 
```

# 发票002 1500

```
Apple     500 
```

我使用 sql 语法作为数据集 Tquickrep = select T1.No_Inv, T1.Total, T2.Fruit,T2.Price from T1 inner join T2 on T1.No_Inv=T2.No_Inv

我希望我的结果：

# No_INV 总计

# 发票001 1000

```
Apple    500
Oranges  500 
```

# 发票002 1500

```
Grape   1000
Apple    500 
```

# web-services - 可以在wsdl中将多个功能组合到一个操作中吗？

> ID：13120467
> 
> 赞同：0
> 
> 时间：2012-10-29T11:10:35.017
> 
> 标签：web-services, design-patterns, wsdl

这有“规则”吗？我想知道是否有最佳实践告诉如何将功能组合到操作中。例如 SetRecord-operation：如果为某种记录指定了 id，则操作会更新记录，否则操作会创建记录。在这种情况下，返回消息会告诉您是否进行了插入或更新，但这是否是糟糕的设计（如果是，为什么）？

另一个例子是记录的包含层次结构，有时它想要创建所有层次的层次结构，有时是 2 个层次，有时只有 1 个层次。（坏）例子是层次结构的汽车座椅扶手。有时只创建一辆车或一个座位。有时会创建具有 4 个座位（每个座位有 2 个扶手）的汽车。这应该如何映射到 wsdl 操作和类型。如果你有意见我想知道为什么？我必须说我在这里有点迷路了。

谢谢和BR-马蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:37:50.387

尽管这样做没有问题，但它违反了良好编程模式的一些原则。

你的方法和你的类应该只做一件事，不超过一件事。[单一职责原则](http://butunclebob.com/ArticleS.UncleBob.SrpInRuby)准确地说：

> 单一职责原则 (SRP) 说，一个类应该有一个，而且只有一个改变的理由。换一种说法，一个类的方法应该因为同样的原因而改变，它们不应该受到以不同速率改变的不同力量的影响。

它还可能违反其他一些原则，例如：

[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)
[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)

我什至不必说它会导致很多[代码气味](http://www.codinghorror.com/blog/2006/05/code-smells.html)，例如：

> 长方法
> 条件复杂度

检查[这个](http://blog.objectmentor.com/articles/2009/09/11/one-thing-extract-till-you-drop)好文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:43:53.673

我做了一些研究，我认为上面的答案对 wsdl 接口设计提出了相当狭隘的看法。将我的问题的示例 Insert 和 Update 结合到 Set 中，以根据数据推断完成的操作是愚蠢的（检查 id 或类似内容是否填充了请求消息）。所以在那种情况下它很糟糕，因为界面并没有真正说明会发生什么。拥有 2 个单独的操作更加清晰，并且不会消耗更多资源。

然而，组合操作可能是一种正确的做事方式。想想我的分层数据示例：需要 13 次请求才能拥有一辆有 4 个座位且所有座位都有扶手的汽车。所有过境点都应该是昂贵的。所以这个可以组合成单一的操作。

例如阅读：

[这是 Crudy 反模式吗？](https://stackoverflow.com/questions/2452860/is-this-the-crudy-anti-pattern)

和

[http://msdn.microsoft.com/en-us/library/ms954638.aspx](http://msdn.microsoft.com/en-us/library/ms954638.aspx)

你会发现你上面的答案肯定是过于简单化了，所有的编程原则都不能自动应用到 Web 服务界面设计中。

上面 SO-answer 中的好例子是创建 1st order 标头，它们带有单独请求的 orderitems 是不好的，因为例如它可能很慢且不可靠。它们可以组合成

```
PlaceOrder(invoiceHeader, List<InvoiceLines>) 
```

所以答案是：这取决于你在结合什么。太低级的 CRUD 有点不可行，但也不应该组合不需要组合的东西。此外，使用清晰的消息结构定义清晰的界面，直接告诉将要做什么是这里的关键，而不是将其简单地定义为多个/单个。

-马蒂

# c++ - 为什么 sizeof int 是错误的，而 sizeof(int) 是正确的？

> ID：13120473
> 
> 赞同：100
> 
> 时间：2012-10-29T11:11:12.563
> 
> 标签：c++, c, sizeof

我们知道这`sizeof`是一个用于计算任何数据类型和表达式大小的运算符，当操作数是一个表达式时，括号可以省略。

```
int main()
{
        int a;

        sizeof int;
        sizeof( int );
        sizeof a;
        sizeof( a );

        return 0;
} 
```

的第一个用法`sizeof`是错误的，而其他用法是正确的。

使用 gcc 编译时，会出现以下错误信息：

```
main.c:5:9: error: expected expression before ‘int’ 
```

我的问题是为什么 C 标准不允许这种操作。会不会`sizeof int`造成歧义？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-29T11:17:20.027

以下内容可能不明确：

```
sizeof int * + 1 
```

是`(sizeof (int*)) + 1`，还是`(sizeof(int)) * (+1)`？

显然 C 语言本可以引入一个规则来解决歧义，但我可以想象为什么它没有打扰。就目前的语言而言，类型说明符永远不会在表达式中“裸露”，因此不需要规则来确定第二个`*`是类型的一部分还是算术运算符。

现有的语法确实已经解决了`sizeof (int *) + 1`. 它是`(sizeof(int*))+1`，*不是* `sizeof((int*)(+1))`。

C++ 有一个类似的问题需要用函数式强制转换语法来解决。你会写`int(0)`，你会写`typedef int *intptr; intptr(0);`，但你不会写`int*(0)`。在这种情况下，解决方案是“裸”类型必须是一个简单的类型名称，它不能只是任何可能包含空格或尾随标点符号的旧类型 ID。也许`sizeof`可以用相同的限制来定义，我不确定。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-29T12:53:45.437

从[C99 标准](http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1256.pdf)

> 6.5.3.4.2运算符产生
> 其`sizeof`操作数的大小（以字节为单位），它可以是表达式或类型的括号名称。

在您的情况下`int`，既不是表达式也不是带括号的名称。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-29T14:24:09.333

在 C 中有两种使用 sizeof 运算符的方法。语法如下：

```
C11 6.5.3 Unary operators
...
sizeof unary-expression
sizeof ( type-name ) 
```

每当您使用类型作为操作数时，您必须有括号，由语言的语法定义。如果在表达式上使用 sizeof，则不需要括号。

C 标准提供了一个这样的示例，说明您可能希望在表达式中使用它：

```
sizeof array / sizeof array[0] 
```

但是，为了保持一致性，并避免与运算符优先级相关的错误，我个人建议在任何情况下都始终使用 ()。

# ember.js - Emberjs在更改视图时滚动到顶部

> ID：13120474
> 
> 赞同：21
> 
> 时间：2012-10-29T11:11:18.657
> 
> 标签：ember.js

当我的应用程序的主视图被切换（重新连接我的应用程序控制器的主出口的新路由）时，我希望页面滚动到顶部。否则，我导航到另一个类似页面的视图并且视口仍然丢失在我离开的地方有点奇怪。

我破解了一个解决方案，想知道是否有更好的方法，或者是否有人有同样的方法。

这就是我所做的：

```
App.ApplicationController = Ember.Controller.extend({
  connectOutlet: function(){
    window.scrollTo(0, 0);
    this._super.apply(this, arguments);
  }
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-21T16:30:11.860

@Baruch 的解决方案很好，但是当我实现它时，我在应用程序状态中的元素上进行了渲染，并且在不需要时会导致 scrollTop 。

我发现这更有效，因为它只在路径更改时运行：

```
App.ApplicationController = Ember.Controller.extend({

  currentPathChanged: function () {
    window.scrollTo(0, 0);
  }.observes('currentPath')

}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-14T10:15:01.430

我通过以下代码实现了这一点：

```
Ember.Route.reopen({
  render: function(controller, model) {
    this._super();
    window.scrollTo(0, 0);
  }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-24T00:22:37.737

咖啡脚本：

```
Ember.Route.reopen
    activate: ->
      @_super()
      window.scrollTo(0, 0) 
```

Javascript：

```
Ember.Route.reopen({
  activate: function() {
      this._super();
      window.scrollTo(0, 0);
  }
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-09T20:48:09.113

您可能应该尝试扩展`Ember.Route`并将您的添加`window.scrollTo`到`enter`回调中。然后，您无需将 Ember`Route`用于您的叶子路由，而是调用您的路由。*，因此当您输入*路线/状态`extend()`时，它们会自动向上滚动。*与此类似的*东西：

 **```
// define your custom route and extend "enter"
var MyRoute = Em.Route.extend({
    enter: function(router) {
        // for now on, all the routes that extend this, 
        // will fire the code in this block every time
        // the application enters this state
        // do whatever you need to do here: scroll and whatnot
    }
});

App.Router = Em.Router.extend({
    enableLogging: true,
    location: 'hash',
    index: Em.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                ...
            },
            // on your leaf routes, use your own custom route that 
            // does your scroll thing or whatever you need to do 
            home: MyRoute.extend({
                route: '/',
                connectOutlets: function (router, context) {
                     ...
                }
            }),
            // other routes...
       })
}); 
```

是否有意义？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-22T02:51:46.713

现在是`render(name, options)`，如果您专门调用渲染（即使用模态），您希望将其传递给 super()

```
Ember.Route.reopen({
  render: function(name, options) {
    if (name != null) {
      return this._super(name, options);
    } else {
      return this._super();
    }
  }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-23T19:23:17.417

**Ember 3.12+** （这在技术上是此处列出的 3.20 代码）

```
import EmberRouter from '@ember/routing/router';

const Router = EmberRouter.extend({
  init() {
    // call event everytime route changes
    this.on('routeDidChange', () => {
      this._super(...arguments);
      window.scrollTo(0, 0); // scrolls to top
    });
  }
});

Router.map(function () {
  // your mapping code goes here
});

export default Router; 
```

**3.12 之前**（这在技术上是 3.4，但关键代码应该相同）

```
import EmberRouter from '@ember/routing/router';

const Router = EmberRouter.extend({
  didTransition() {
    this._super(...arguments);
    window.scrollTo(0, 0);
   }
});

Router.map(function () {
  // your mapping code goes here
});

export default Router; 
```

我们已经多次处理过这个问题，我们发现最简单和最直接的方法是使用“路由转换”事件函数在 router.js 文件中配置一次。我们`didTransition`在 Ember 3.12 中弃用它之前使用它来代替`routeDidChange`. 我在下面发布了两个示例。根据您使用的 Ember 版本，某些语法可能略有不同，但核心代码应该相同。**

# php - 检测字符串中的非英语字符

> ID：13120475
> 
> 赞同：2
> 
> 时间：2012-10-29T11:11:19.790
> 
> 标签：php, regex, utf-8

为了打击一些垃圾邮件，我正在寻找一种方法来找出字符串是否包含任何中文/西里尔字符。

我在[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)检查了 UTF-8 中的字符范围，但我无法弄清楚如何使用 PHP 中的字符范围。

我真正想做的是计算西里尔字母范围或中文范围内的字符数。这可以用一些正则表达式来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:14:30.053

您可以检查每个字符的字节值是否包含在特定的 Unicode 范围内。以下是 Unicode 范围列表：http: [//jrgraphix.net/research/unicode_blocks.php](http://jrgraphix.net/research/unicode_blocks.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-06T19:27:23.237

在这里找到了一个不错的解决方案：[https ://devdojo.com/blog/tutorials/php-detect-if-non-english](https://devdojo.com/blog/tutorials/php-detect-if-non-english)

使用此代码：

```
function is_english($str)
{
    if (strlen($str) != strlen(utf8_decode($str))) {
        return false;
    } else {
        return true;
    }
} 
```

它之所以有效，是因为 utf8_decode 用单个字节替换多字节字符，这会导致不同的字符串长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T12:20:29.290

在 PHP 中，[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)返回完整模式匹配的数量。

尝试

```
$n = preg_match_all('/\p{Cyrillic}/u', $text); 
```

或者

```
$n = preg_match_all('/[\p{InCyrillic}\p{InCyrillic_Supplementary}]/u', $text); 
```

有关在正则表达式中使用 unicode 的更多信息，请阅读[这篇文章](http://www.regular-expressions.info/unicode.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:27:20.317

您可以使用以下命令轻松检查字符串是否为纯 UTF-8：

```
mb_check_encoding($inputString, "UTF-8"); 
```

请注意，从 5.2.0 到 5.2.6 似乎有错误

您也可以在文档页面上找到您想要的内容[mb_check_encoding](http://de.php.net/manual/en/function.mb-check-encoding.php)，特别是在评论中。在 gmail dot com 对您的案例的回答中调整 javalc6：

```
function check_utf8($str) {
    $count = 0; // Amount of characters that are not UTF-8
    $len = strlen($str); 
    for($i = 0; $i < $len; $i++){ 
        $c = ord($str[$i]); 
        if ($c > 128) { 
            $bytes = 0;
            if ($c > 247) {
                ++$count;
                continue;
            } else if ($c > 239)
                $bytes = 4; 
            else if ($c > 223)
                $bytes = 3; 
            else if ($c > 191)
                $bytes = 2; 
            else {
                ++$count;
                continue;
            }
            if (($i + $bytes) > $len) {
                ++$count;
                continue;
            }
            while ($bytes > 1) { 
                $i++; 
                $b = ord($str[$i]); 
                if ($b < 128 || $b > 191)
                    ++$count;
                $bytes--; 
            }
        }
    }
    return count;
} 
```

虽然老实说我没有检查它。

# notifications - 获取有关 Google Talk 通讯录更改的通知

> ID：13120481
> 
> 赞同：1
> 
> 时间：2012-10-29T11:11:41.257
> 
> 标签：notifications, xmpp, real-time-updates, google-talk

当 GoogleTalk 用户通讯录更新（添加/删除联系人）时，Google 中是否有接收更新的服务，例如 Facebook 实时更新服务。 [http://developers.facebook.com/docs/reference/api/realtime/](http://developers.facebook.com/docs/reference/api/realtime/)

我在 GoogleDev 中找到的最接近的东西是 Google App Engine 的 XMPP API [https://developers.google.com/appengine/docs/java/xmpp/overview#Handling_Incoming_Calls](https://developers.google.com/appengine/docs/java/xmpp/overview#Handling_Incoming_Calls)

它为用户消息、订阅和状态的更改提供更新，但不为用户地址簿（名册）中的更新提供更新，并且它需要使用 google appengine 基础架构。

谢谢，

软件开发商。

# c# - 当用作 CollapsiblePanelExtender 的控件时，复选框不会被选中/取消选中

> ID：13120483
> 
> 赞同：1
> 
> 时间：2012-10-29T11:11:48.203
> 
> 标签：c#, asp.net, collapsiblepanelextender

有没有其他人尝试使用复选框作为控件来折叠/展开 AJAX CollapsiblePanelExtender？

当我单击复选框时，面板会很好地折叠/展开。但复选框本身不会被选中。

你也遇到过这种情况吗？

我知道有办法解决这个问题，但在我明白原因之前我不能休息。

这是代码以防万一有人想看：

```
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>    
<div class="standard"> 
    <asp:UpdatePanel ID="UpdatePanelBespokeRates" runat="server">
        <ContentTemplate>       
            <asp:CheckBox ID="checkbespoke" runat="server" AutoPostBack="False" Checked="false" Text="Click and unclick this checkbox" />
            </p>
            <asp:UpdatePanel ID="UpdatePanelBespoke" runat="server">
                <ContentTemplate>

                    <asp:CollapsiblePanelExtender ID="CollapsibleExtender2" runat="server" 
                        TargetControlID="PnlBespokeRates" CollapseControlID="checkbespoke" 
                        CollapsedSize="1" ExpandControlID="checkbespoke" SuppressPostBack="True" 
                        Enabled="True" Collapsed="True"></asp:CollapsiblePanelExtender>

                    <asp:Panel ID="PnlBespokeRates" runat="server" Visible="True" Height="300px" Width="200px" BackColor="White">
                         <p>Another Hello World text</p>   
                    </asp:Panel> 

                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="checkbespoke" EventName="CheckedChanged" />
                </Triggers>
            </asp:UpdatePanel>

        </ContentTemplate>
    </asp:UpdatePanel>
    <p>
</div> 
```

在它背后的代码中是：

```
protected void Page_Load(object sender, EventArgs e)
    {
        CollapsibleExtender2.ClientState = "true";
        CollapsibleExtender2.Collapsed = true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:09:03.407

起作用的是：

`SuppressPostback="false"`在 CollapsiblePanelExtender 属性中

和

`Autopostback="true"`在复选框控件中

删除所有手动 C#

然后瞧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:16:10.190

尝试从 asp:CheckBox 声明中删除 Checked="false"。我怀疑回发触发器可能正在重新加载复选框并重新初始化它。

# oracle - 如何授予存储过程、从不同模式中选择的权限？

> ID：13120485
> 
> 赞同：1
> 
> 时间：2012-10-29T11:11:50.223
> 
> 标签：oracle, plsql, oracle10g, schema, grant

我需要用户无权访问另一个方案，但存储过程可以访问不同的模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T11:16:08.043

你所描述的是不可能的。

如果`b.procedure`可以在 上选择、插入、更新或删除`a.table`，那么任何登录的人`b`也可以这样做。

你应该做的是创建过程`a.procedure`和`grant execute on a.procedure to b`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T12:07:49.380

权限不能授予对象，只能授予用户或角色。

实现这种控制粒度的方法是让其他模式定义在其自己的表上运行的过程。然后它授予其他用户执行该过程。这是过程的一个有价值的用例，封装了模式对象上的操作。

控制 PL/SQL 对象权限的机制是 AUTHID。有两个选项，CURRENT_USER 和 DEFINER。在这种情况下，您要使用定义者的权限`AUTHID DEFINER`（这是默认设置）。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#sthref717)。

# qt - 缩放QGraphicsView时调整QPen粗细？

> ID：13120486
> 
> 赞同：10
> 
> 时间：2012-10-29T11:11:53.000
> 
> 标签：qt, qgraphicsview, qgraphicsitem, qgraphicsscene

一个惊人的功能`QGraphicsView`是它能够根据场景的内容（实际上插入场景中的每个 QGraphicsItem）来缩放自身。我正确插入的比例尺，这`QPixmap`意味着如果我提供 4x4 的比例因子：

```
view->scale(4,4); 
```

像素图按照我的意愿进行缩放。

但这不是我习惯绘制的矩形的情况。他们的目标是围绕我在场景中绘制的像素图，无论比例因子如何，它们的厚度都保持为 1 而不是 - 我猜 - 4。

我一直在搜索所有这些东西的文档，试图弄清楚“化妆笔”的确切用途，但我仍然无法让我的矩形变厚。

最后通知：我有一个自定义`QGraphicsItem`，用于绘制矩形的 QPen 在

```
virtual void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget); 
```

方法。

有关系吗？

提前感谢并为我在 Qt 框架和绘图算法领域缺乏经验/知识而道歉......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-29T12:08:51.753

在哪里实例化 QPen 并不重要。

QPen 的默认宽度为 0。这是一个特殊值，表示修饰为 true，宽度实际上为 1。因此，如果您不希望笔具有修饰效果，则必须将其设置为所需的宽度。您可能还需要将外观设置为 false。

这是一个简单的例子：

```
#include <QtGui>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QGraphicsView view;
    QGraphicsScene scene;

    QGraphicsRectItem *item1 = scene.addRect(20, 20, 20, 20);
    QGraphicsRectItem *item2 = scene.addRect(50, 20, 20, 20);

    QPen pen1, pen2;
    pen1.setWidth(5);
    pen2.setWidth(5);
    pen1.setCosmetic(true);
    pen2.setCosmetic(false);

    item1->setPen(pen1);
    item2->setPen(pen2);

    view.setScene(&scene);
    view.scale(4, 4); // both rects are the same size, but one a has wider pen
    view.show();

    return a.exec();
} 
```

# java - Java Kerberos SSO 和 Windows NT-ENTERPRISE 名称类型

> ID：13120487
> 
> 赞同：0
> 
> 时间：2012-10-29T11:12:01.367
> 
> 标签：java, kerberos

用户针对启用了 Java Kerberos 的 SSO 应用程序进行身份验证时存在问题。当 Windows 发送名称类型为 NT-ENTERPRISE 而不是 NT-PRINCIPAL 时，似乎登录失败。

我查看了 javax.security.auth.kerberos.KerberosPrincipal，似乎不支持 NT-ENTERPRISE 类型。我们能做些什么？有没有办法阻止 Windows 使用该类型？

我们只有一个境界，所以我不知道为什么还要使用这种类型。此外，此问题仅影响某些客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:05:27.317

Java 不支持企业主体格式。这实际上并不重要。当客户端提供服务票据时，KDC 总是将 eUPN 转换为 iUPN，因此 Kerberos 总是使用隐式 UPN。

注意：Windows 默认会这样做。MIT Kerberos 要求`canonicalize`是`true`.

# windows - 如何为域用户备份本地 git 更改？

> ID：13120489
> 
> 赞同：1
> 
> 时间：2012-10-29T11:12:09.130
> 
> 标签：windows, git, windows-server-2008-r2

在我们公司（Windows 域网络）中，我们的开发人员使用 GIT 作为他们的版本控制软件。

每天备份主存储库（如果你可以这样称呼它）（获取 + 克隆 - 从备份服务器）

我想每天备份用户的 GIT 本地文件夹（在他们提交之前）。

我在想我可以从最后一次获取/提交中获得最后一次更改，并且只保存/备份已更改的文件。

可能吗？我怎样才能为整个组织做到这一点？（我想要一个每天都会启动的自动化脚本）

我想避免一种情况，即开发人员工作了几天（不能提交工作） - 并且由于灾难而失去了他的工作。

*   我可以跟踪更改的文件吗？（可能是日期戳？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:50:03.590

您无法从上游存储库中获取/克隆未跟踪的数据（请参阅“[使用 git 推送未跟踪的内容](https://stackoverflow.com/a/1396507/6309)”）
这意味着您无法集中启动该备份过程。

您可以将脚本分发给将 rsync 或 scp 将其 repos 存储到共享中央路径的用户。
另一种解决方案是使用`git archive`or `git bundle`，但用户将添加以隐藏他/她正在进行的工作（其中可能包括未跟踪的文件，但恢复将能够区分上阶段和未跟踪的更改`git stash pop`）。

> 我想避免开发人员工作几天（无法提交工作）的情况

如果您想获取/克隆用户存储库，那么他们*必须*定期提交。
不要忘记这不是 SVN：开发人员可以创建他/她自己的`dev`分支并在其中提交，即使代码没有编译/没有通过测试。在这方面，`dev`是一个私有分支，仅用于记录开发人员的日常进度。
只有公共分支（他/她想要推送的那些）应该只包含“干净”的提交。

# c++ - 使用 Thrift 在 C++ 中设置联合

> ID：13120492
> 
> 赞同：1
> 
> 时间：2012-10-29T11:12:21.917
> 
> 标签：c++, thrift

我的 Thrift 架构中有这样的内容：

```
struct TestStatusOne { .... }
struct TestStatusTwo { .... }

union TestStatus {
  1: TestStatusOne  ONE
  2: TestStatusTwo  TWO
}

struct TestResult {
  1: required TestStatus status
} 
```

我可以使用 Java、Perl 和 Python 库来定义这一点，但在使用 C++ 库时遇到了麻烦。这是Java中的示例：

```
TestResult testResult = new TestResult(
  new TestStatus(TestStatus._Fields.findByName("ONE"), testStatus)
); 
```

我最接近用 C++ 定义它的是：

```
TestResult testResult;
testResult.status.ONE = testStatus; 
```

但是当我尝试发送到服务器时，我收到一个错误，告诉我状态字段不存在，并且结构的转储显示它为空。

如何设置测试状态？

使用节俭 0.6.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:32:30.050

这可能是缺少赋值运算符的问题吗？根据结构 TestStatusOne 和 TestStatusTwo 的定义，您可能需要创建一个赋值运算符（ operator=() ）。

您是否尝试过在 Thrift 客户端上做一个 GDB 并在将其发送到服务器之前查看 testResult 的内容？检查其内容是否有意义。

# php - 如何获取用php解析的元素的id和class

> ID：13120494
> 
> 赞同：0
> 
> 时间：2012-10-29T11:12:25.160
> 
> 标签：php, dom, domdocument

> **可能重复：**
> [DOMDocument::load - PHP - 获取属性值](https://stackoverflow.com/questions/4757587/domdocumentload-php-getting-attribute-value)

我有许多通过 php 从字符串中提取的 div 标签，每个标签都有一个唯一的 id 和一个主观类。我正在尝试获取每个 div 的 id 和 class，但不太确定我将如何做到这一点。

HTML：

```
<div id='x1y1' class = 'classname'></div><div id = 'x2y1' class = 'classname1'> 
```

到目前为止我已经尝试过

```
$html = new DOMDocument();
$html->loadHTML($boardDataStripSlashes);
$elements = $html->getElementsByTagName('div'); 
```

但无法找到有关如何获取所选元素的实际 ID 和类的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:19:37.613

您需要使用[`DOMElement::getAttribute`](http://php.net/manual/en/domelement.getattribute.php)来检索元素的属性。

```
foreach($elements as $element) { 
  $id = $element->getAttribute('id');
  $className = $element->getAttribute('class');
  // ...
} 
```

# wc - ashx 和 windows 身份验证

> ID：13120500
> 
> 赞同：1
> 
> 时间：2012-10-29T11:13:22.290
> 
> 标签：wc

我已经部署了我的 ashx 服务。当我尝试使用 belwo 代码访问它时，我收到错误 401 Unauthorized

System.Net.WebClient webClient = new System.Net.WebClient();

```
 webClient.UseDefaultCredentials = true;

                    webClient.OpenWriteCompleted += (s, evt) =>
                    {

                        try
                        {

                            UploadFileData(FsInputFile, evt.Result);

                            evt.Result.Close();
                            FsInputFile.Close();
                        }
                        catch (System.Net.WebException webEx)
                        { 
```

//显示消息 }

```
 };

                    webClient.OpenWriteAsync(handlerUrl.Uri); 
```

我已经部署了这个 ashx 和 WCF 服务。WCF 服务只允许从窗口身份验证访问。

谁能告诉我应该改变什么来访问这个处理程序？

# c# - 何时何地调用 dispose 方法 c#？

> ID：13120501
> 
> 赞同：1
> 
> 时间：2012-10-29T11:13:26.543
> 
> 标签：c#, asp.net

我有以下代码来从 db 检索数据，当我从 Visual Studio 运行代码分析时，它建议我调用 dispose 方法 on和`SqlConnection`objects 。`DataTable``SqlDataAdapter`

```
 SqlConnection sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings["connstr"].ConnectionString);
        SqlCommand cmd = sqlconn.CreateCommand();
        cmd.CommandText = "SELECT * FROM tbl_serial WHERE serial = @serial";
        cmd.Parameters.AddWithValue("@serial", txtQuery.Text);
        DataTable dt = new DataTable();
        SqlDataAdapter da = new SqlDataAdapter();
        try
        {
            sqlconn.Open();
            da.SelectCommand = cmd;
            da.Fill(dt);

        }
        catch (SqlException ex)
        {
            lblStatus.Text = ex.Message;
        }
        finally
        {
            sqlconn.Close();
        }

        if (dt.Rows.Count > 0)
        {
            lblStatus.Text = "FOUND!";
        }
        else
        {
            lblStatus.Text = "NOT FOUND!";
        } 
```

这是我第一次这样做，我`sqlconn`就这样调用了 dispose 方法 -

```
 finally
        {
            sqlconn.Close();
            sqlconn.Dispose();
        } 
```

但是，Visual Studio 像这样警告我——

> CA2202：Microsoft.Usage：对象“sqlconn”可以在方法“test_search.Unnamed1_Click(object, EventArgs)”中多次处理。为避免生成 System.ObjectDisposedException，您不应在对象上多次调用 Dispose。：行：41

所以我想知道什么时候应该正确调用 dispose 方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:15:37.403

与其直接调用，不如`dispose`使用[`using`statement](http://msdn.microsoft.com/en-us/library/yh598w02(v=vs.100).aspx)，当代码执行移出其关联块时，它将确保为您执行此操作。例如：

```
SqlConnection con;

using (con = new SqlConnection(/* ... */)) {
    // Do your stuff with `con`
} 
```

这是一般与一次性用品一起使用的模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T11:20:27.117

这是您的代码重写而无需全部`Dispose`/`Close`手动

```
using (var sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings["connstr"].ConnectionString))
using (var cmd = sqlconn.CreateCommand())
{
    cmd.CommandText = "SELECT * FROM tbl_serial WHERE serial = @serial";
    cmd.Parameters.AddWithValue("@serial", txtQuery.Text);
    using (var dt = new DataTable())
    using (var da = new SqlDataAdapter())
    {
        try
        {
            sqlconn.Open();
            da.SelectCommand = cmd;
            da.Fill(dt);

        }
        catch (SqlException ex)
        {
            lblStatus.Text = ex.Message;
        }

        lblStatus.Text = dt.Rows.Count > 0 ? "FOUND!" : "NOT FOUND!";
    } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T11:16:58.090

处理连接处理的最佳方法是***使用***

所以你的代码会变成这样，

```
 using(SqlConnection sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings["connstr"].ConnectionString))
  { 
      code here..
  } 
```

由于Sqlconnection 实现了IDisposable，使用block 会在调用完成后自动dispose 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T11:45:31.827

嗨，最好在最后编写 dispose 和 close 语句，因为如果代码中发生异常，它将执行。

```
finally
{
   sqlconn.Close();
   SqlConnection.ClearAllPool();  // this statement clears pool
   sqlConn.Dispose(); 
} 
```

当您关闭或处置连接时，它不会同时关闭连接。只有在刷新 appdomain 时才会关闭或清除连接池

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T11:23:27.307

我同意其他人的`using`观点，使用它绝对是最佳实践。但是，您应该将`finally`块更改为：

```
finally
{
    if (sqlconn != null)
    {
        if (sqlConn.ConnectionState == ConnectionState.Open) sqlconn.Close();
        sqlConn.Dispose();
        GC.SuppressFinalize(sqlConn);
        sqlConn = null;
    }
} 
```

`GC.SuppressFinalize`你告诉垃圾收集器不要费心处理它，因为`sqlConn`你已经处理了它。虽然可以做到这一点，但我一直认为最佳实践是`IDisposable`在您的对象上实现并处理合同方法中的所有清理`Dispose`- 也调用`GC.SuppressFinalize(this)`您的对象。

```
public class MyObject : IDisposable
{
    private SqlConnection _sqlConn;

    public MyObject()
    {
        _sqlConn = new SqlConnection("connection string");
        _sqlConn.Open();
    }

    void IDisposable.Dispose()
    {
        if (_sqlConn != null)
        {
            if (_sqlConn.ConnectionState == ConnectionState.Open)
            {
                _sqlConn.Close();
            }

            _sqlConn.Dispose();
            _sqlConn = null;
        }

        // tell the garbage collector to ignore this object as you've tidied it up yourself
        GC.SuppressFinalize(this);
    }
} 
```

This [previous SO post](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)有这个问题的最佳答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-29T11:18:35.777

```
using(SqlConnection sqlconn = new SqlConnection(ConnectionStrings))
{ 
   //Automatically this block will disposes the SqlConnection
}

or 

you can dispose all your objects in Finally Block 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-29T11:15:26.180

`sqlconn.Dispose()`在 finally 块中只是多余的。实际上，Close() 调用了 Dispose()，这就是对 Dispose 的特定调用引发错误的原因。

Close 和 Dispose 之间存在细微差别。

*   多次调用 close 不会抛出异常。
*   多次调用 dispose 将引发异常。

在您的情况下，很明显关闭又调用了 Dispose。因此，您对 Dispose 的第二次调用导致了异常。

始终使用[USING](https://stackoverflow.com/a/13120615/1329529)作为更好的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-29T11:19:26.290

您可能希望像这样格式化您的代码：

```
using (var sqlconn = new SqlConnection(...)){
  try {
            sqlconn.Open();
            da.SelectCommand = cmd;
            da.Fill(dt);
  }
  catch (SqlException ex) {
            lblStatus.Text = ex.Message;
  }
}

    if (dt.Rows.Count > 0)
    {
        lblStatus.Text = "FOUND!";
    }
    else
    {
        lblStatus.Text = "NOT FOUND!";
    } 
```

这样，您就可以让`using`语法处理/关闭您的连接，并且您的代码专注于对您很重要的逻辑。

# iphone - ios4.1中的CGImageMaskCreate

> ID：13120502
> 
> 赞同：2
> 
> 时间：2012-10-29T11:13:28.620
> 
> 标签：iphone, animation, uiimageview, uiimage, imagemagick

我正在使用以下屏蔽代码：-

```
- (UIImage*) maskImage:(UIImage *)im withMask:(UIImage *)maskImage {

    CGImageRef maskRef = maskImage.CGImage;

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([im CGImage], mask);
    return [UIImage imageWithCGImage:masked];

} 
```

# android - Android 列表视图 onItemClick on Enter Key press

> ID：13120515
> 
> 赞同：0
> 
> 时间：2012-10-29T11:14:22.893
> 
> 标签：android, listview

我有一个列表视图，我们有几个项目可供用户选择。

当按下 ENTER 键时，调用将进入 onItemCLick()

我怎样才能阻止这种行为？

我希望仅当用户触摸列表视图项时调用才进入此方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T06:02:18.443

尝试在列表视图显示时隐藏软键盘。我相信您正在模拟器上测试您的应用程序。当您在实际移动设备上测试您的应用程序时，您不会看到 Enter 键。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-29T11:19:52.543

```
public boolean onKey(View v, int keyCode, KeyEvent event) {
            // If the event is a key-down event on the "enter" button
            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                // Perform action on key press
                // Editable a=findViewById(R.id.username).getText();
                // username2.setText(a);

                Toast.makeText(yassou.this, username2.getText(),
                        Toast.LENGTH_SHORT).show();
                return true;
            }
            return false;
        }
    }); 
```

# .net - 通过 WCF 服务传递和检索具有方法的类

> ID：13120520
> 
> 赞同：3
> 
> 时间：2012-10-29T11:14:40.510
> 
> 标签：.net, wcf, c#-4.0

我想通过 wcf 服务传递/检索以下类的实例。该对象还应带有其类定义的方法。可能吗？假设以下类：

```
[DataContract]
public class MyClass
{
    [DataMember]
    public string Name;

    public MyClass()
    {

    }

    public MyClass(string name)
    {
        this.Name = name;
    }

    public void SetName(string name)
    {
        this.Name = name;
    }

    public string GetName()
    {
        return this.Name;
    }
}

[ServiceContract]
public interface IMyService
{
    [OperationContract]
    MyClass GetMyClassInstance();        
}

public class MyService:IMyService
{
    public MyClass GetMyClassInstance()
    {
        return new MyClass("hello");
    }
} 
```

现在，当我在我的客户端应用程序项目中添加对 MyService 的引用时，将生成数据协定 MyClass，以及服务客户端，例如 MyServiceClient，因此，我执行以下操作：

```
MyServiceClient client=new MyServiceClient();
MyClass myClass1= client.GetMyClassInstance(); 
```

但我真正的问题是，从服务获得结果后，这是否可能（？）：

```
myClass1.SetName("oops!!!"); 
```

在传输数据合约的同时，其中的方法也会被传输吗？我的业务对象也包含方法，它们需要通过 WCF 传递。有办法吗？通过 WCF 传递这样的 BO 是一种好习惯吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:14:33.197

WCF 交换 XML（或 JSON）文档。标有“DataMember”的方法值将在文档中。方法中的代码不会被序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:29:03.710

WCF 不会传递这些方法，但是方法在编译时是固定的，因此想要在运行时传递它们会有点奇怪。

如果您希望客户端对象具有与服务器对象相同的方法，最简单的方法是将您的数据协定放入他们自己的项目中，然后将生成的 DLL 提供给您的客户端。

然后，当客户端从您的 WSDL 生成 WCF 代理时，他们选择重用已知类而不是生成新类。为此，当您添加服务引用时，单击“高级”，然后查看“在引用的程序集中重用类型”选项。

![在此处输入图像描述](../Images/92a226d90a16da1e94cc1d054b65e4d6.png)

# asp.net - 静态页面的无 Cookie ASP.Net 会话

> ID：13120521
> 
> 赞同：1
> 
> 时间：2012-10-29T11:14:44.173
> 
> 标签：asp.net, iis-7, cookieless

我正在使用[ASP.Net 无 cookie 会话](http://msdn.microsoft.com/en-us/library/aa479314.aspx)，以便通过 302 重定向将其放置在 URL 中来跟踪应用程序的会话 ID，例如，如果用户要访问以下 URL

```
http://yourserver/folder/default.aspx 
```

然后，它们将被重定向到类似于以下内容的 URL，然后继续提供实际页面内容

```
http://yourserver/folder/(S(849799d1-7ec0-41dc-962d-a77e1b958b99))/default.aspx 
```

我遇到的问题是**应用程序的入口点实际上是一个静态页面**（例如，扩展名为 .html 的页面），**而 ASP.Net 没有发出会话 ID 并为该页面重定向用户。** 因此，这意味着指向 ASP.Net 托管内容的链接（例如链接、iframe 等）都会导致为这些链接中的每一个创建一个新的会话 ID。出于兼容性原因，我无法轻松更改页面扩展名（尽管这确实解决了问题）。

如何提示 ASP.Net 为我的页面创建会话？我尝试添加显式处理程序映射以确保页面由 ASP.Net 模块处理，但这没有影响 - 在调试时我可以看到`SessionIDManager`正在为此页面创建一个实例（暗示 ASP. Net 已经通过集成管道处理此页面，而不管我的处理程序映射如何），但是 ASP.Net 仍然没有为此页面创建会话。

我正在使用 IIS 7，但这也需要在 IIS 6（带有显式处理程序映射）和 IIS 8 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:39:05.473

我从实验和反编译 ASP.Net 源代码中发现，`SessionStateModule`根据请求是否`IHttpHandler`实现`IRequiresSessionState`或`IReadOnlySessionState`. 如果这些都不是真的，那么一切都取决于是否有人曾经[`SetSessionStateBehavior`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.setsessionstatebehavior.aspx)将会话状态行为设置为`Required`or 或`ReadOnly`。

默认情况下，静态文件处理程序不执行任何这些操作，因此不会为静态文件创建会话 - 为了确保为需要会话状态的静态文件设置会话状态行为，我只需在`BeginRequest`事件期间设置会话状态行为对于应用程序

```
// In Global.asax.cs
void Application_BeginRequest(object sender, EventArgs e)
{
    HttpContext.Current.SetSessionStateBehavior(SessionStateBehavior.Default);
} 
```

我敢肯定有更好的方法，但这对我有用。

# php - PHP登录 - 密码输入 - 特殊字符？- Centos 5 系统

> ID：13120522
> 
> 赞同：0
> 
> 时间：2012-10-29T11:14:44.670
> 
> 标签：php, apache, security, centos

我有一个 CentOS 5 VPS，我刚刚在那里安装了我的网站。但是我遇到的问题是，当我在密码字段中插入特殊字符时，例如：'（撇号）或类似的东西，我总是得到错误，这个密码不正确：/我猜这是因为 Linux 系统。我对吗？或者也许是因为我正在做的消毒？

如果有人可以帮助我，我会很高兴。

编辑：

```
function array_sanitize(&$item) {
    $item = htmlentities(strip_tags(mysql_real_escape_string($item)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:38:50.583

如果您的魔术报价已启用，那么您应该将其关闭：在您的 php.ini 中编辑这些：

```
; Magic quotes
;

; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off 
```

或者你可以把它放在`.htaccess`文档根目录中：

```
php_flag magic_quotes_gpc Off 
```

如果您想了解魔术报价： http: [//php.net/manual/en/security.magicquotes.php](http://php.net/manual/en/security.magicquotes.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:19:46.933

嗯，这对我来说听起来像是输入转义问题，或者网站中的某些设置。尝试跟踪输入的路径到执行的实际查询并检查有效的用户名/密码。这就是我可以在没有实际代码的情况下编写的全部内容。

PS我只能发布答案，这就是为什么我要这样发布它。

# php - 如何在 php 中扩展多个类？

> ID：13120526
> 
> 赞同：0
> 
> 时间：2012-10-29T11:14:54.500
> 
> 标签：php, symfony, extends

我想在我的“联系我们”页面中创建一个表格。我正在关注[本教程](http://symfony.com/legacy/doc/forms/1_2/en/01-Form-Creation)。我必须扩展 sfFrom 类才能使用 sfWidget，但在我的代码中我已经扩展了 BaseController。

有什么解决方案可以在不开设新课程的情况下做到这一点吗？

```
class InfoController extends BaseController
{
    /**
     *
     * @Route("/contactus", name="info_contactus_page")
     * @Template()
     */
    public function contactusAction()
    {
        return array();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:40:34.480

你做错了。

symfony 1与 Symfony 2**完全不同**（查看这篇文章：[*Symfony2 如何与 symfony1 不同*](http://symfony.com/doc/current/cookbook/symfony1.html)）。您按照 sf1 中的教程在 sf2 中创建表单。

您应该尝试寻找 sf2 的资源，例如：

*   [正式表格文件](http://symfony.com/doc/current/book/forms.html)
*   [官方Form Cookbook中有很多食谱](http://symfony.com/doc/current/cookbook/form/index.html)

由于您是法国人，我建议您阅读以下教程：

*   [Les formulaires dans Symfony2](http://www.lafermeduweb.net/tutorial/les-formulaires-dans-symfony2-p100.html)
*   [Créer des formulaires avec Symfony2](http://www.siteduzero.com/tutoriel-3-523899-creer-des-formulaires-avec-symfony2.html)

然后，当您阅读完这些教程后，您可以回到这里就您在实现表单时遇到的问题提出一个新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:15:46.950

使用组合或接口。

在您的情况下，组合是解决方案。

PHP 不允许多重继承

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T12:18:27.290

如果可以使用 PHP5.4，请使用特征： [http ://php.net/manual/en/language.oop5.traits.php](http://php.net/manual/en/language.oop5.traits.php)

```
<?php 

trait SomeOtherControllerTrait {
    function SomethingSomethingSomething() { /* Something */ }
}

class InfoController extends BaseController {
    use SomeOtherControllerTrait;
    /* ... */
} 
```

它们允许您通过使用组合获得与多重继承相似的结果。

编辑：由于问题下面的标签更改为 Symfony2：您不需要多重继承，因为 Symfony2 以不同的方式处理这种情况。接受的答案很好地描述了它。

# json - 反向地理编码不适用于黑莓

> ID：13120539
> 
> 赞同：-1
> 
> 时间：2012-10-29T11:15:45.890
> 
> 标签：json, blackberry, geocoding, reverse

我正在使用反向地理编码来获取位置名称。我在模拟器上调试并运行以下查询：

[http://maps.googleapis.com/maps/geo?json&ll=-42.307546,-101.048116&sensor=false](http://maps.googleapis.com/maps/geo?json&ll=-42.307546,-101.048116&sensor=false)

结果如下：

```
{
  "name": "-42.307546,-101.048116",
  "Status": {
    "code": 602,
    "request": "geocode"
  }
} 
```

它不会为我获取位置名称。如何找到位置名称？请帮忙。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:24:46.600

**状态**：这包括请求的响应代码，这是一种简单的方法来确定执行请求时实际发生了什么。可能的响应代码如下：

```
200: Successful request (at least one placemark was returned).
400: Bad request (the server was unable to understand the request).
500: Server error (an unknown internal error occurred).
601: Missing query. This means the q parameter was not specified (or was an empty string).
602: Unknown address. This means that the request was performed but no placemarks were found.
603: Unavailable address. The given address could not be returned due to legal or contractual reasons.
610: An invalid Google Maps API key was specified.
620: Too many queries have been performed using the given API key. 
```

问题是因为纬度和经度的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:19:08.553

那是因为您使用了无效的坐标。试试这个。 [http://maps.googleapis.com/maps/geo?json&ll=35.670392,139.775844&sensor=false](http://maps.googleapis.com/maps/geo?json&ll=35.670392,139.775844&sensor=false)

# php - 在 Drupal 教程中添加新的自定义权限

> ID：13120540
> 
> 赞同：1
> 
> 时间：2012-10-29T11:15:46.123
> 
> 标签：php, drupal, drupal-7, drupal-modules

我现在创建了模块，我想在该模块上设置权限，以便一些用户可以看到该字段。我在 google 和 stackoverflow 上进行了搜索，但没有得到我需要的正确答案。我的代码如下

```
function downloaded_menu() {
     $items['user/%user/downloaded_poems'] = array(
    'title' => 'Downloaded Poems',
    'page callback' => 'downloaded_content_page',
    'access arguments' => array('poet downloaded work'),    
    'type' => MENU_LOCAL_TASK,
    'weight' => 11,
  );
  return $items;
} 
```

现在我想授予特定用户权限。谁只能看到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:07:57.933

您必须使用[hook_permission](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_permission/7)来执行此操作。

代码示例：

```
function downloaded_permission()
{
    return array(
        'poet downloaded work' => array(
            'title' => t('poet downloaded work'), // the title to be shown in the permissions page
            'description' => t('poet downloaded work'), // the description to be shown in the permissions page
            'restrict access' => FALSE,
        ),
    );
} 
```

然后转到权限页面并将权限授予所需的角色。

希望这会有所帮助……穆罕默德。

# mysql - Cmake链接到mysql和curl，LNK2019

> ID：13120542
> 
> 赞同：1
> 
> 时间：2012-10-29T11:15:51.160
> 
> 标签：mysql, curl, linker, cmake

好的，所以我刚开始玩 CMake。我正在尝试构建一个同时依赖 MySQL 和 CURL 的项目。这是目录结构：

```
./
    ./src
    ./cmake
    CMakeLists.txt 
```

真的就这么简单，src只包含9个Cpp文件和一个CMakeLists.txt。

运行 CMake 时，一切正常。由于 MySQL 和 CURL 没有被有效链接，我得到了一堆链接器错误。我究竟做错了什么 ？

根 CMakeLists.txt：

```
PROJECT(IRCBot)

INCLUDE(CPack)

SET(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake)
INCLUDE(${CMAKE_SOURCE_DIR}/cmake/FindCURL.cmake)
CMAKE_MINIMUM_REQUIRED(VERSION 2.6 FATAL_ERROR)

FIND_PACKAGE(CURL)
IF(CURL_FOUND)
  MESSAGE(STATUS "Curl libraries found at: ${CURL_LIBRARIES}")
  MESSAGE(STATUS "Curl includes found at: ${CURL_INCLUDE_DIRS}")
else()
  MESSAGE(SEND_ERROR "Could not find cURL on your system")
ENDIF(CURL_FOUND)

FIND_PACKAGE(MySQL)
IF(MYSQL_FOUND)
    MESSAGE(STATUS "MySQL found at: ${MYSQL_INCLUDE_DIR}, ${MYSQL_LIBRARIES}")
ELSE(MYSQL_FOUND)
    MESSAGE(SEND_ERROR "Couldn't find MySQL include files and/or library")
ENDIF(MYSQL_FOUND)

ADD_SUBDIRECTORY(src) 
```

和 ./src/CMakeLists.txt

```
FILE(GLOB_RECURSE IRCBot_files *.cpp *.h)

SET(IRCBot_src
    ${IRCBot_files}
    )

INCLUDE_DIRECTORIES(
    ${CURL_INCLUDE_DIRS}
    ${MYSQL_INCLUDE_DIR}
    )

LINK_DIRECTORIES(
    ${MYSQL_LIBRARIES}
    ${CURL_LIBRARIES}
)
ADD_EXECUTABLE(IRCBot ${IRCBot_src})

INSTALL(TARGETS IRCBot DESTINATION ${INSTALL_DIR}/bin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:04:47.070

在这种情况下你不需要`LINK_DIRECTORIES()`调用，因为它告诉编译器在哪里可以找到库。

相反，使用

```
TARGET_LINK_LIBRARIES(IRCBot
    ${MYSQL_LIBRARIES}
    ${CURL_LIBRARIES}) 
```

因为`${MYSQL_LIBRARIES}`包含绝对路径。

# algorithm - 模逆算法

> ID：13120561
> 
> 赞同：-3
> 
> 时间：2012-10-29T11:17:15.233
> 
> 标签：algorithm, scheme

> **可能重复：**
> [方案中模 m 的乘法逆](https://stackoverflow.com/questions/13096491/multiplicative-inverse-of-modulo-m-in-scheme)

我已经编写了一个代码来解决 x 和 y 作为一对。我需要编写一个模逆代码，使用 ax + by = 1 找到 e 模 n 的乘法逆。

> 块引用

```
(define (ax+by=1 a b)
        (if (= b 0)
            (cons 1 0)
            (let* ((q (quotient a b))
                   (r (remainder a b))
                   (e (ax+by=1 b r))
                   (s (car e))
                   (t (cdr e)))
           (cons t (- s (* q t)))))) 
```

编辑：使用以下功能解决了问题。

> 块引用

```
 (define inverse-mod (lambda (a m) 
                  (if (not (= 1 (gcd a m)))
                      (display "**Error** No inverse exists.")
                      (if (> 0(car (ax+by=1 a m)))
                          (+ (car (ax+by=1 a m)) m)
                          (car (ax+by=1 a m)))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:33:12.920

考虑[扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:53:45.150

这使用扩展欧几里得算法来找到模逆：

```
(define (inverse x m)
  (let loop ((x x) (b m) (a 0) (u 1))
    (if (zero? x)
        (if (= b 1) (modulo a m)
          (error 'inverse "must be coprime"))
        (let* ((q (quotient b x)))
          (loop (modulo b x) x u (- a (* u q))))))) 
```

# c# - PDFSharp 使用 PdfTextField 作为位置和大小参考在 pdf 中插入图像

> ID：13120562
> 
> 赞同：2
> 
> 时间：2012-10-29T11:17:14.547
> 
> 标签：c#, image, pdf, pdfsharp

我们想使用 PDFSharp 将带有（绘制）签名的 png 图像插入到 PDF 中。图像的位置和大小由我们之前在 PDF 中创建的不可见 PdfTextField 确定。使用我们当前的代码，问题是：我们如何从 PdfTextField（包含此字段的页面）中获取页面引用？

代码：

```
PdfDocument document = PdfReader.Open("C:\\filex.pdf", PdfDocumentOpenMode.Modify);

// Get the root object of all interactive form fields
PdfAcroForm form = document.AcroForm;

// Get all form fields of the whole document
PdfAcroField.PdfAcroFieldCollection fields = form.Fields;

//Get the invisible PdfTextField used as position and size reference
PdfTextField signatureposition= (PdfTextField)fields["thesignature"];

PdfArray signaturerect= (PdfArray)signatureposition.Elements["/Rect"];
string x = signaturerect.Elements[0].ToString();
string y = signaturerect.Elements[1].ToString();
string w = signaturerect.Elements[2].ToString();
string h = signaturerect.Elements[3].ToString();

string imagepath= "C:\\signature.png";

//how to get the correct page reference respect the especified field?
PdfPage page= signatureposition.Owner.Pages[???];

XGraphics gfx = XGraphics.FromPdfPage(page);
XImage image = XImage.FromFile(imagepath);
gfx.DrawImage(image, x, y, width, height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:43:21.487

最后我们解决了它创建这个函数：

```
 protected int PaginaCampo(string campofirma, PdfDocument document)
{
    for (int i = 0; i < document.Pages.Count; i++)
    {
        PdfAnnotations anotations = document.Pages[i].Annotations;
        for (int j = 0; j < anotations.Count; j++)
        {
            if (anotations[j].Title != campofirma) continue;
            return i;
        }
    }
    return -1;
} 
```

不是最好的解决方案，但它有效......如果有人添加了更好的解决方案，我们将为他/她提供正确的答案

# javascript - 如何将 HTML 文件添加到 GitHub 存储库？

> ID：13120568
> 
> 赞同：1
> 
> 时间：2012-10-29T11:17:53.000
> 
> 标签：javascript, html, css, github

在我一直从事的项目中，我有一个 HTML 文件以及一些 JS 和 CSS 文件，并试图将它们放到我的 GitHub 帐户中。我创建了一个新的存储库，但是当我尝试添加文件（有些在文件夹中）时，我不知道该怎么做。该网站不是很有帮助，我真的被卡住了。谁能告诉我如何上传它们？我是 GitHub 的新手，到目前为止非常困惑。

提前非常感谢xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:22:08.410

如果您使用的是 windows，请尝试[github for windows](http://windows.github.com/)应用程序。如果您不熟悉 github，这是开始使用 github 的简单方法。

# windows-phone-7 - MvvmCross vnext：CheckBox CheckedChange 事件到带有 monodroid 的命令

> ID：13120574
> 
> 赞同：3
> 
> 时间：2012-10-29T11:18:21.097
> 
> 标签：windows-phone-7, xamarin.ios, xamarin.android, xamarin, mvvmcross

我正在尝试将 CheckedChange 从 monodroid CheckBox 绑定到命令，但出现错误。

我想在选中某个特定项目时取消选择另一个项目。

我认为可以在 wp7 中使用 EventTrigger 来做到这一点，但用于 android 的 MvvmCross 似乎不支持此功能。

MvvmCross 是否仅限于 Button ？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:19:06.310

`CheckedChanged`是一个`EventHandler<CompoundButton.CheckedChangeEventArgs>`所以它不是 MvvmCross 自动知道的委托类型之一。

* * *

但是，为此有一个自定义绑定......

[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Target/MvxCompoundButtonCheckedTargetBinding.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Target/MvxCompoundButtonCheckedTargetBinding.cs)

并且应该使用以下方法注册此自定义绑定：

```
registry.RegisterFactory(new MvxSimplePropertyInfoTargetBindingFactory(typeof(MvxCompoundButtonCheckedTargetBinding), typeof(CompoundButton), "Checked")); 
```

在[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxAndroidBindingBuilder.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/MvxAndroidBindingBuilder.cs)

* * *

因此，如果您有一个带有属性的 ViewModel`IsSpecial`

```
private bool _isSpecial;
public bool IsSpecial
{
   get { return _isSpecial; }
   set 
   {
      _isSpecial = value;
       RaisePropertyChanged(() => IsSpecial);
       // your custom code here
   }
} 
```

那么这个绑定应该可以工作：

```
 'Checked':{'Path':'IsSpecial'} 
```

这应该适用于任何 CompoundButton - CheckBox、Switch 或您自己的化合物......

# .net - Ajax 调用 onbeforeunload 在 Firefox 中不起作用 - 在 IE 中起作用

> ID：13120577
> 
> 赞同：4
> 
> 时间：2012-10-29T11:18:31.457
> 
> 标签：.net, ajax, internet-explorer, firefox

我正在使用以下代码，它在 Internet Explorer 中运行良好，但在 Firefox 中无法运行。

当用户关闭浏览器时，必须调用一个 web 方法来更新`IsLogin=false`数据库中的位字段。

```
window.onbeforeunload = function (e) {

        var evt = window.event || e;
        var y = evt.clientY || evt.pageY;

        if (y < 0 || evt.clientX<0) {
            $.ajax({
                type: "POST",
                url: "/Application/WebForm1.aspx/Update",
                async: false,
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    alert('Sucessfull Call');
                }

            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T16:24:29.540

您的 Web 方法是否在 FireFox 中被调用？[HTML5 规范](http://www.w3.org/TR/html5-diff/#changes-2011-05-25)指出，在 window.onbeforeunload 事件期间可能会忽略对 alert() 的调用，请参阅此处[了解](https://developer.mozilla.org/en-US/docs/Web/API/window.onbeforeunload)Mozilla 的响应。

另一种方法是返回确认框。对我来说，这似乎在 IE/FF/Chrome 中运行良好。文档仍然可见，并且可以取消事件（如果需要）。

```
<script type="text/javascript">

    window.addEventListener("beforeunload", function (e) {
        var confirmationMessage = "Sucessfull Call";

        (e || window.event).returnValue = confirmationMessage;
        return confirmationMessage;
    });
</script> 
```

# java - 具有自动缩放属性的 EC2 实例上的 tomcat 的 Memcahed 会话管理器

> ID：13120579
> 
> 赞同：0
> 
> 时间：2012-10-29T11:18:36.127
> 
> 标签：java, amazon-ec2, amazon-web-services, memcached, autoscaling

假设我有两个 tomcat 在两个 EC2 实例上运行，并且我有两个 memcached 节点运行两个不同的 EC2 实例。运行 tomcat 的 EC2 实例位于一个负载均衡器后面。我启用了粘性会话功能。并假设我已经实现了自动缩放属性。因此，每当安装了 tomcat 的新实例出现时，我是否需要更改其 tomcat 的 context.xml 以配置 tomcat 的会话管理器以注册到 memcached 节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:15:46.673

Memcached 服务器不知道“客户端”。他们甚至不知道其他 memcached 服务器。Memcached 客户端具有池配置并执行简单的哈希算法来确定与哪个服务器通信。唯一的依赖是您的所有客户端都具有相同的配置。只有当运行 memcached 服务的实例发生变化时，您才需要更改 tomcat 的 context.xml。

# c# - C# - 使用新对象值更新列表项

> ID：13120581
> 
> 赞同：2
> 
> 时间：2012-10-29T11:18:43.220
> 
> 标签：c#

我有一个`object`它有一些属性，其中一些属性是`Lists`. 每个列表都包含其他类的实例。我想要做的是从列表中取出第一项并覆盖这些属性值。

这是我所拥有的一个伪示例：

```
public class User
{
    public List<Address> Addresses = new List<Address>();

    public User ( )
    {
        Addresses = fill with data;
    }
}

public class TestUser
{
    public User user; // Is filled somewhere in this class

    public void TestUpdateList ( Address addr )
    {
        // The param "addr" contains new values
        // These values must ALWAYS be placed in the first item
        // of the "Addresses" list.

        // Get the first Address object and overwrite that with
        // the new "addr" object
        user.Addresses[0] = addr; // <-- doesn't work, but should give you an idea
    }
} 
```

我希望这个例子能阐明我想做的事情。

所以我基本上是在寻找一种方法来“更新”列表中的现有项目，在这种情况下是一个`object`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:26:46.397

您的示例无法编译，因为您正在`Addresses`通过类名访问该属性。只有当它是静态的时候才有可能。因此，您首先需要一个用户实例来更新他的地址：

```
User u = new User(userID); // assuming that theres a constructor that takes an identifier
u.Addresses[0] = addr; 
```

[C# 语言规范：10.2.5 静态和实例成员](http://msdn.microsoft.com/en-us/library/aa645629%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:28:20.273

尚不完全清楚您要完成什么，但是，请参阅以下代码 - 有一个地址、一个用户和一个名为 FeatureX 的实用程序，它将用户的第一个地址替换为给定值。

```
class Address {
    public string Street { get; set; }
}

class User {
    public List<Address> Addresses = new List<Address>();
}

class FeatureX {
    public void UpdateUserWithAddress(User user, Address address) {
        if (user.Addresses.Count > 0) {
            user.Addresses[0] = address;
        } else {
            user.Addresses.Add(address);
        }
    }
} 
```

以下用法两次输出“Xyz”：

```
User o = new User();
Address a = new Address() { Street = "Xyz" };

new FeatureX().UpdateUserWithAddress(o, a);
Console.WriteLine(o.Addresses[0].Street);

o = new User();
o.Addresses.Add(new Address { Street = "jjj" });
new FeatureX().UpdateUserWithAddress(o, a);
Console.WriteLine(o.Addresses[0].Street); 
```

请注意，如果您与第三方共享您的 DLL，公共字段可能会导致很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:31:24.217

我认为问题在于地址是一个私有字段。

这有效：

```
[TestFixture]
public class ListTest
{
    [Test]
    public void UpdateTest()
    {
        var user = new User();
        user.Addresses.Add(new Address{Name = "Johan"});
        user.Addresses[0] = new Address { Name = "w00" };
    }
}
public class User
{
    public List<Address> Addresses { get;private  set; }

    public User()
    {
        Addresses= new List<Address>();
    }
}
public class Address
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:40:40.227

```
public void TestUpdateList ( User user, Address addr )
    {
        // The param "addr" contains new values
        // These values must ALWAYS be placed in the first item
        // of the "Addresses" list.

        // Get the first Address object and overwrite that with
        // the new "addr" object
        user.Addresses[0] = addr; // <-- doesn't work, but should give you an idea
    } 
```

# javascript - 如何在 jQuery 中获取前面的元素之一

> ID：13120583
> 
> 赞同：1
> 
> 时间：2012-10-29T11:18:50.203
> 
> 标签：javascript, jquery

我的html结构如下：

```
<header></header>
<div id="take-113"></div>
<div id="take-114"></div>
<div id="take-115"></div> 
```

如何从每个 div 中找到相同的标题？

```
$("take-113").prev("header"); // works
$("take-114").prev("header");// doesn't work
$("take-115").prev("header"); // doesn't work 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:20:18.853

见 jquery [.prevAll()](http://api.jquery.com/prevAll/)

```
$("take-115").prevAll("header:eq(0)"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:20:25.057

`prev`只选择元素的前一个兄弟，你可以使用`prevAll()`方法：

```
$("#take-114").prevAll("header").first(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:25:23.370

如果您有多个标题，则可以定义要获取的标题

```
$("take-113").prevAll("header:first");
$("take-114").prevAll("header:first");
$("take-115").prevAll("header:first"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T11:30:09.893

```
$("take-113").prev("header"); // works
$("take-114").prev("header");// doesn't work
$("take-115").prev("header"); // doesn't work 
```

将其替换为

```
$("#take-113").prev("header"); 
$("#take-114").prev("header");
$("#take-115").prev("header"); 
```

# java - 在 Java 中解码字符：为什么使用阅读器比使用缓冲区更快？

> ID：13120585
> 
> 赞同：4
> 
> 时间：2012-10-29T11:19:09.287
> 
> 标签：java, performance, character-encoding

我正在尝试几种方法将文件的字节解码为字符。

使用*java.io.Reader*和*Channels.newReader(...)*

```
public static void decodeWithReader() throws Exception {
    FileInputStream fis = new FileInputStream(FILE);
    FileChannel channel = fis.getChannel();
    CharsetDecoder decoder = Charset.defaultCharset().newDecoder();
    Reader reader = Channels.newReader(channel, decoder, -1);

    final char[] buffer = new char[4096];
    for(;;) {
        if(-1 == reader.read(buffer)) {
            break;
        }
    }

    fis.close();
} 
```

*手动*使用缓冲区和解码器：

```
public static void readWithBuffers() throws Exception {
    FileInputStream fis = new FileInputStream(FILE);
    FileChannel channel = fis.getChannel();
    CharsetDecoder decoder = Charset.defaultCharset().newDecoder();

    final long fileLength = channel.size();
    long position = 0;
    final int bufferSize = 1024 * 1024;   // 1MB

    CharBuffer cbuf = CharBuffer.allocate(4096);

    while(position < fileLength) {
        MappedByteBuffer bbuf = channel.map(MapMode.READ_ONLY, position, Math.min(bufferSize, fileLength - position));
        for(;;) {
            CoderResult res = decoder.decode(bbuf, cbuf, false);

            if(CoderResult.OVERFLOW == res) {
                cbuf.clear();
            } else if (CoderResult.UNDERFLOW == res) {
                break;
            }
        }
        position += bbuf.position();
    }

    fis.close();
} 
```

对于 200MB 的文本文件，第一种方法始终需要 300 毫秒才能完成。第二种方法始终需要 700 毫秒。你知道为什么阅读器的方法要快得多吗？

它可以通过另一个实现运行得更快吗？

基准测试在 Windows 7 和 JDK7_07 上执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:15:43.960

这是不使用映射缓冲区的第三种实现。在与以前相同的条件下，它始终在 220 毫秒内运行。我机器上的默认字符集是“windows-1252”，如果我强制使用更简单的“ISO-8859-1”字符集，解码速度会更快（大约 150 毫秒）。

看起来像映射缓冲区这样的*原生*特性的使用实际上会损害性能（对于这个用例）。同样有趣的是，如果我分配直接缓冲区而不是堆缓冲区（查看注释行），那么性能会降低（然后运行大约需要 400 毫秒）。

到目前为止，答案似乎是：在 Java 中尽可能快地解码字符（前提是您不能强制使用一个字符集），手动使用解码器，使用堆缓冲区编写解码循环，不要使用映射缓冲区或甚至是本土的。我不得不承认我真的不知道为什么会这样。

```
public static void readWithBuffers() throws Exception {
    FileInputStream fis = new FileInputStream(FILE);
    FileChannel channel = fis.getChannel();
    CharsetDecoder decoder = Charset.defaultCharset().newDecoder();

    // CharsetDecoder decoder = Charset.forName("ISO-8859-1").newDecoder();

    ByteBuffer bbuf = ByteBuffer.allocate(4096);
    // ByteBuffer bbuf = ByteBuffer.allocateDirect(4096);
    CharBuffer cbuf = CharBuffer.allocate(4096);
    // CharBuffer cbuf = ByteBuffer.allocateDirect(2 * 4096).asCharBuffer();

    for(;;) {
        if(-1 == channel.read(bbuf)) {
            decoder.decode(bbuf, cbuf, true);
            decoder.flush(cbuf);
            break;
        }
        bbuf.flip();

        CoderResult res = decoder.decode(bbuf, cbuf, false);
        if(CoderResult.OVERFLOW == res) {
            cbuf.clear();
        } else if (CoderResult.UNDERFLOW == res) {
            bbuf.compact();
        }
    }

    fis.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:38:04.247

可以试试对比。

```
public static void readWithBuffersISO_8859_1() throws Exception {
    FileInputStream fis = new FileInputStream(FILE);
    FileChannel channel = fis.getChannel();
    MappedByteBuffer bbuf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
    while(bbuf.remaining()>0) {
        char ch = (char)(bbuf.get() & 0xFF);
    }
    fis.close();
} 
```

这假定为 ISO-8859-1。如果您想要最大速度，将文本视为二进制格式可能会有所帮助。

正如@EJP 指出的那样，您一次更改了许多事情，您需要从最简单的可比较示例开始，看看每个元素增加了多少差异。

# .net - 使用 WCF 使用 REST 服务 - 基本身份验证

> ID：13120586
> 
> 赞同：0
> 
> 时间：2012-10-29T11:19:11.953
> 
> 标签：.net, wcf, c#-3.0

我正在尝试使用带有基本身份验证的 REST 服务，但有一个奇怪的问题。发出的第一个请求不包括指定的基本身份验证凭据。这发生在每个第一个请求中。每次应用程序启动时都会发生这种情况。后续请求不会发生这种情况。我正在使用`ClientBase<T>`该类来调用 API，它看起来像这样：

```
public class MyApi : ClientBase<IMyApi>
{
    protected override IMyApi CreateChannel()
    {
        //Remove all client credentials. 
        ChannelFactory.Endpoint.Behaviors.RemoveAll<ClientCredentials>();

        //Create new client credentials and add to the endpoint behaviours.
        ClientCredentials clientCredentials = new ClientCredentials();
        clientCredentials.UserName.UserName = Username;
        clientCredentials.UserName.Password = Password;
        ChannelFactory.Endpoint.Behaviors.Add(clientCredentials);

        return base.CreateChannel();
    }

    public MyApi() : base (DefaultEndpointName)
    {}
} 
```

我的绑定设置如下：

```
 <customBinding>        
    <binding name="myApiBinding">
      <webMessageEncoding webContentTypeMapperType="ContentTypeMapper,Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
      <httpTransport manualAddressing="true" maxReceivedMessageSize="6553600" authenticationScheme="Basic" realm="myRealm" />
    </binding>
  </customBinding> 
```

我曾尝试将项目升级到 .Net 4，在初始化 API 后添加客户端凭据，但似乎没有一个具有预期的效果。

有没有办法为每个请求添加凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:39:47.323

看到[这个问题](https://stackoverflow.com/questions/1462256/double-request-while-making-pox-rest-call-using-wcf-with-webhttpbinding-set-to-b)。

第一个答案解释了为什么......（服务器应该使用身份验证挑战响应第一个请求）

第二个答案解释了如何解决......（通过操作请求 http 标头来手动插入基本身份验证凭据）

# ruby-on-rails - 在 Ubuntu 12.04 上安装 gem pg 版本 0.12.2 时出错

> ID：13120588
> 
> 赞同：4
> 
> 时间：2012-10-29T11:19:12.157
> 
> 标签：ruby-on-rails, ubuntu-12.04, pg

我在 Ubuntu 12.04 上运行，我正在尝试在 Ruby 1.9.3p194 / Rails 3.2.3 上安装 pg gem v '0.12.2'。我已经安装了 libpq-dev 和 build-essential 但我仍然得到同样的错误：

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /var/lib/gems/1.9.1 directory.
fernando@ubuntu:/media/fernando/OS/Rails/oops_booking$ sudo gem install pg -v '0.12.2'
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for PQsetClientEncoding()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... no
checking for struct pgNotify.extra in libpq-fe.h... yes0
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling compat.c
compiling pg.c
pg.c: In function ‘pgconn_wait_for_notify’:
pg.c:2117:3: warning: ‘rb_thread_select’ is deprecated (declared at /usr/include/ruby-1.9.1/ruby/intern.h:379) [-Wdeprecated-declarations]
pg.c: In function ‘pgconn_block’:
pg.c:2592:3: error: format not a string literal and no format arguments [-Werror=format-security]
pg.c:2598:3: warning: ‘rb_thread_select’ is deprecated (declared at /usr/include/ruby-1.9.1/ruby/intern.h:379) [-Wdeprecated-declarations]
pg.c:2607:4: error: format not a string literal and no format arguments [-Werror=format-security]
pg.c: In function ‘pgconn_locreate’:
pg.c:2866:11: warning: variable ‘lo_oid’ set but not used [-Wunused-but-set-variable]
pg.c: In function ‘find_or_create_johab’:
pg.c:3947:3: warning: implicit declaration of function ‘rb_encdb_alias’ [-Wimplicit-function-declaration]
cc1: some warnings being treated as errors
make: *** [pg.o] Error 1 
```

我确实成功安装了最新版本的 pg gem，但我真的需要使用 0.12.2 版本

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:25:12.133

安装

```
$ sudo apt-get install ruby-dev build-essential 
```

或者

```
$ sudo apt-get install postgresql-client libpq5 libpq-dev
$ sudo gem install pg 
```

**更新**

以下是我遵循的步骤：

*安装 PostgreSQL 和开发包*

```
$ sudo apt-get install postgresql-9.1
$ sudo apt-get install libpq-dev 
```

*设置一个与我的 Ubuntu 登录相同的用户*

```
$ sudo su postgres -c psql
postgres=# CREATE ROLE <username> SUPERUSER LOGIN;
postgres=# \q 
```

*修改 Gemfile*

```
# Remove gem 'sqlite3'
gem 'pg' 
```

*修改app目录下的database.yml*

```
development:
  adapter: postgresql
  encoding: unicode
  database: appname_development
  pool: 5
  timeout: 5000
  username: <username>
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: appname_test
  pool: 5
  timeout: 5000
  username: <username>
  password: 
```

*运行捆绑安装*

```
$ bundle install 
```

*创建数据库和迁移*

```
$ rake db:create:all
$ rake db:migrate 
```

以下是我用来帮助的资源：http:
[//mrfrosti.com/2011/11/postgresql-for-ruby-on-rails-on-ubuntu/](http://mrfrosti.com/2011/11/postgresql-for-ruby-on-rails-on-ubuntu/)
[http://railsless.blogspot.in/2012/05/howto -install-postgresql-in-ubuntu11.html](http://railsless.blogspot.in/2012/05/howto-install-postgresql-in-ubuntu11.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:54:31.387

```
# add a --with-cflags option
gem install --with-cflags="-O2 -pipe -march=native -w" 
```

或者

```
# change your user-level bundle config options for pg and run
# bundle install within the project
bundle config build.pg --with-cflags="-O2 -pipe -march=native -w"
cd ${project_dir}
bundle install 
```

请记住，这将修改`${HOME}/.bundle/config`，因此对于每个使用该项目的用户，他们需要在他们正在使用的每台机器上运行该命令。

此 CFLAGS 选项将覆盖当前系统范围的值，其中包括`-Werror=format-security`. 我相信真正的解决方法是修复 pg gem，以便设置这个标志是无关紧要的，但我还没有查看 pg 的代码。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-29T16:52:22.000

看看错误信息：

错误：执行 gem ... (Gem::FilePermissionError) 您没有写入 /var/lib/gems/1.9.1 目录的权限。

你确定你用 sudo 运行你的命令吗？这是一个写权限错误。

# javascript - 网站页面上的随机横幅定位。可能的？

> ID：13120589
> 
> 赞同：0
> 
> 时间：2012-10-29T11:19:13.400
> 
> 标签：javascript, jquery, html

有人可以告诉我如何实现以下目标吗？

我想在我的网站页面上显示横幅（当然这很容易）。但是，我希望它随机（一次）出现在我选择的 4 个位置之一（DIV ID 的bannerpos1、bannerpos2、bannerpos3 和bannerpos4）。

如果横幅出现在bannerpos2 中，则不应出现在任何其他位置，反之亦然。

而且，只有在可能的情况下，它也应该显示一个随机横幅（从 3 个左右的横幅中选择）。

简而言之；我想在我的页面上随机放置一个随机横幅。当然，横幅和位置尚未确定。

有人可以帮助我，或指出我正确的方向吗？

//11月7日更新

好的，我一直在玩乔展示的剧本，但是我遇到了一些问题......

目前代码如下所示（在 body-tage 之前）：

```
<script type="text/javascript">
$(function(){
var position = Math.floor((Math.random()*3));
console.log(position)

var $a = $("#advertentieplaats1");
var $b = $("#advertentieplaats2");
var $c = $("#advertentieplaats3");

var $advertentietype1 = $("#advinhoud1");
var $advertentietype2 = $("#advinhoud2");
var $advertentietype3 = $("#advinhoud3");

if (position == 0){
    $a.append($advertentietype1);
}
if (position == 1){
    $b.append($advertentietype2);
}
if (position == 2){
    $c.append($advertentietype3);
}
});
</script> 
```

在页面底部，我有以下内容：

```
<div id="advinhoud1">adsense code 1</div>
<div id="advinhoud2">adsense code 2</div>
<div id="advinhoud3">adsense code 3</div> 
```

或者这有一些问题，或者我做错了......

在 Firefox 中，它会在随机（定义）位置显示 adsense 代码。它还在底部显示了剩余的 2 个广告（它们不应该是可见的，甚至不应该加载）。

在 Internet Explorer 中它根本不做任何事情......？所有 Adsense 都显示在底部，随机位置什么都没有……？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:24:02.173

像这样的东西。你可以让它更有活力，但这里的想法。

```
var position = Math.floor((Math.random()*3));
var $a = $("#myDiv1"); // Get the three containers as JQuery objects by id.
var $b = $("#myDiv1");
var $c = $("#myDiv1");
var $myAd = $("#myAd"); // Get the content you want to place.
                        // You could include it as a string in your JS 
                        // or as a hidden element.
if (position == 0)
{
    $a.append($myAd);
}

if (position == 1)
{
    $b.append($myAd);
}

if (position == 2)
{
    $c.append($myAd);
} 
```

# javascript - WebRTC：如何将网络摄像头数据作为数据流获取？

> ID：13120591
> 
> 赞同：13
> 
> 时间：2012-10-29T11:19:19.943
> 
> 标签：javascript, webcam, webrtc

我有一个简单的网页，您可以在其中流式传输网络摄像头。我想把这个流发送到某个地方，但显然我不能真正访问流本身。我有这个代码来运行流：

```
navigator.webkitGetUserMedia({video: true}, gotStream, noStream); 
```

在 gotStream 中，我尝试了很多方法来将此流“重定向”到其他地方，例如：

```
function gotStream(stream) {   
    stream_handler(stream)
    //other stuff to show webcam output on the webpage
} 
```

或者

```
function gotStream(stream) {   
    stream.videoTracks.onaddtrack = function(track){
        console.log("in onaddtrack");
        stream_handler(track);
    }
    //other stuff to show webcam output on the webpage
} 
```

但显然`gotStream`，当用户授予网络摄像头流式传输权限时，该函数在开始时只被调用一次。此外，`stream`变量不是流本身，而是内部具有一些属性的对象。我应该如何访问流本身并将其重定向到任何我想要的地方？

编辑：您可能熟悉 webglmeeting，一种显然是在 WebRTC 之上开发的 face2face 对话。我认为该脚本以某种方式将数据流从一个点发送到另一个点。我想通过首先了解如何获取数据流来实现同样的目的。

重新编辑：我不想转换为图像并发送后者，我想使用数据流本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:16:38.100

如果您打算将相机蒸到 PNG 或 JPG 格式的某个位置，那么我将`canvas`像这样使用

**HTML**

```
<video id="live" width="320" height="240" autoplay></video>
<canvas width="320" id="canvas" height="240" style="display:none;"></canvas> 
```

**JS ( jQuery )**

```
var video = $("#live").get()[0];
var canvas = $("#canvas");
var ctx = canvas.get()[0].getContext('2d');

navigator.webkitGetUserMedia("video",
        function(stream) {
            video.src = webkitURL.createObjectURL(stream);
        }
)
     setInterval(
        function () {
            ctx.drawImage(video, 0, 0, 320,240);
                var data = canvas[0].toDataURL("image/jpeg");   
  },1000); 
```

# php - 如何从我检查的复选框传递下一页的值？

> ID：13120594
> 
> 赞同：2
> 
> 时间：2012-10-29T11:19:31.297
> 
> 标签：php

我有多个复选框，当我检查它们时，想在下一页传递它们的值。我的代码是

```
<form method="POST">
    <input type="checkbox" name="city" id="city" value="Gold" />
         <input type="checkbox" name="city" id="city" value="Platinum" />
         <input type="checkbox" name="city" id="city" value="Silver" />
    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:22:43.697

通过将 name 属性定义为数组`name="city[]"`

```
<?php 
if($_SERVER['REQUEST_METHOD']=='POST'){
    print_r($_POST);
    /*
    Array
    (
        [city] => Array
            (
                [0] => Gold
                [1] => Platinum
                [2] => Silver
            )

    )
    */
}
?>
<form method="POST">
    <input type="checkbox" name="city[]" value="Gold" />
    <input type="checkbox" name="city[]" value="Platinum" />
    <input type="checkbox" name="city[]" value="Silver" />
    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:22:27.237

尝试这个。

```
<?php
    include("config.php");
    if($_POST) {
        $city = $_POST['card'];
            header("location:target_page.php?card=".$city);
    }
?>
<form method="POST">
    <input type="checkbox" name="card[]" id="card" value="Gold" />
    <input type="checkbox" name="card[]" id="card" value="Platinum" />
    <input type="checkbox" name="card[]" id="card" value="Silver" />
    <input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:23:16.023

当两个字段具有相同名称时，这不起作用。

```
<form method="POST">
    <input type="checkbox" name="city" id="city" value="Gold" />
         <input type="checkbox" name="cities[]" id="city" value="Platinum" />
         <input type="checkbox" name="cities[]" id="city2" value="Silver" />
    <input type="submit" value="Submit" />
</form> 
```

当您编写像 city **[]**这样的字段名时，您会在 PHP 脚本中获得一个数组。

```
forearch($_POST['cities'] as $city) {
    var_dump($city);
} 
```

**ID**应该是唯一的。

# jquery - jquery 内容无法加载 10 次中的 3 次

> ID：13120598
> 
> 赞同：0
> 
> 时间：2012-10-29T11:19:42.483
> 
> 标签：jquery

我一直在尝试解决这个问题，但无法让它发挥作用。

[http://tinyurl.com/973he2p](http://tinyurl.com/973he2p) ** html 应该进入另一个页面，所以我无法访问 html、正文标题标签。

内容位于“您可能也喜欢”标题下的右侧，该内容从该文件​​加载 [http://tinyurl.com/8rv36dl](http://tinyurl.com/8rv36dl)

但我已经看到它无法加载 10 次中的 3 次。所以我刷新了它，这真的发生了。可能是什么原因？

我做错了什么或者我应该做些什么来解决它？冲突？超时？我都试过了。

希望有答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:34:27.077

当您生成时，`showitem.js`您创建一个名为的变量`content`并为其分配一个由撇号括起来的值，但您不会转义内容中的撇号，例如在这种情况下：

```
var content = '...<div class="caption_plc">Men's Costume...
                                              ^ 
```

此处的撇号将值分配关闭，`content`紧随其后的是`s Costume...`无法在 Javascript 中解释的字符串，因此在第 2 行触发以下错误：

*未捕获的 SyntaxError：意外的标识符*

也许在少数情况下，内容中根本没有撇号，并且您的代码可以工作，但是如果有，它就会失败。因此，至少要转义撇号，或将内容编码为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:31:31.380

撇号 in `men's stainless steel bracelet`（或服务器插入的任何内容）关闭由`var content= ' ...`in打开的字符串`showitem.js`并导致语法错误。

您需要正确转义服务器生成的内容，然后才能将其包含在生成的 javascript 中。

然而，最好的方法是拥有一个不受 PHP 影响的静态 javascript 文件，并让它通过 AJAX 获取其内容。由于您已经在使用 jQuery，请继续阅读[`$.get`](http://api.jquery.com/jQuery.get/)

# xquery - where条件中的属性

> ID：13120600
> 
> 赞同：0
> 
> 时间：2012-10-29T11:19:44.033
> 
> 标签：xquery

可以说这是我拥有的 XML 文件。

```
<bookstore>
 <book year="1994">
  <title>blah</title>
  <price>66</price>
 </book>
 <book year="1998">
  <title>blahblah</title>
  <price>99</price>
 </book>
</bookstore> 
```

如何选择 year 属性`<1995`和 price 的所有书籍`<70`。

这就是我所拥有的：

```
for $x in doc("bkstr.xml")/bookstore/book
where $x/price<70 and ??
return $x 
```

如何检查年份属性的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:48:23.603

属性通过使用来处理`@`。

```
for $x in doc("bkstr.xml")/bookstore/book
where $x/price<70 and $x/@year<1995
return $x 
```

您也可以使用更短的等价物

```
doc("bkstr.xml")/bookstore/book[price<70 and @year<1995] 
```

# javascript - 智能应用横幅关闭事件

> ID：13120601
> 
> 赞同：2
> 
> 时间：2012-10-29T11:19:44.337
> 
> 标签：javascript, ios6, meta

目前将智能应用程序横幅实施到网络应用程序中，直到我遇到无法捕获关闭事件的问题。

```
<meta onblur="alert('close');" name="apple-itunes-app" content="app-id=123456789">
<meta onclick="alert('close');" name="apple-itunes-app" content="app-id=123456789"> 
```

这些似乎不太可能首先起作用，但不得不尝试:)

window.resize 事件在关闭横幅后被调用，但在它被激活之前最多需要 2-3 秒，在我的情况下这太长了。

我的问题：有没有办法捕捉智能应用横幅的结束事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:21:41.420

我认为这是不可能的：

取自苹果的描述：

> 他们会欣赏横幅在网页顶部不显眼地呈现，而不是作为中断 Web 内容的全屏广告。

问题是，它不仅位于您的网页之上，而且位于浏览器的实际 web 视图之上。因此，在 Apple 决定为此提供 JS-API 之前，不可能与 SAB 进行任何交互。

我自己玩过 SAB，并尝试使用 JavaScript 在运行时更改应用程序参数。但这也行不通。

# zend-framework2 - 与 ZF2 中 ZF1 的 getScriptPath 类似的功能

> ID：13120604
> 
> 赞同：1
> 
> 时间：2012-10-29T11:19:52.023
> 
> 标签：zend-framework2

我目前正在将我的 ZF1 应用程序映射到 ZF2，并且想知道 ZF2 中是否有类似`$this->view->getScriptPath()`ZF1 的类似功能？我已经花了半天时间，但没有找到好的解决方案。至少获取 Module 的**basePath**或**Module**的**模板文件夹**也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:47:45.353

根据后续问题，您真正要查找的是给定模板文件的路径。这实际上相对容易，假设您使用的是默认的 PhpRenderer：您获取解析器并解析路径。

如果您已经在视图脚本中，则以下内容应该有效：

```
$path = $this->resolver($templateName); 
```

如果您在其他地方，则需要访问 PhpRenderer 或 ViewResolver。如果您有权访问服务管理器，请拉取 ViewResolver 服务，然后对其调用 resolve()：

```
$resolver = $services->get('ViewResolver');
$path     = $resolver->resolve($templateName); 
```

这比知道模块所在的位置要好，因为开发人员可能选择在应用程序中覆盖模板；解析器甚至会知道新位置在哪里。

# haskell - 将 Data.RVar.RVar [Char] 转换为 [Char]

> ID：13120612
> 
> 赞同：2
> 
> 时间：2012-10-29T11:20:24.290
> 
> 标签：haskell

> cabal 安装随机附加组件

```
Prelude Data.Random.Extras> import Data.Random.Extras
Prelude Data.Random.Extras> let s = shuffle "somestring"
Prelude Data.Random.Extras> s

<interactive>:1:1:
    No instance for (Show (Data.RVar.RVar [Char]))
      arising from a use of `print'
    Possible fix:
      add an instance declaration for (Show (Data.RVar.RVar [Char]))
    In a stmt of an interactive GHCi command: print it 
```

如何将 Data.RVar.RVar [Char] 转换为 [Char] ？

**更新：**

我无法导入 Data.Random.Source.DevRandom：

```
Prelude> import Data.Random hiding (shuffle)
Prelude Data.Random> import Data.Random.Source.DevRandom

<no location info>:
    Could not find module `Data.Random.Source.DevRandom':
      Use -v to see a list of the files searched for. 
```

但：

```
[59]: cabal install random-fu
Resolving dependencies...
No packages to be installed. All the requested packages are already installed.
If you want to reinstall anyway then use the --reinstall flag.
[60]: cabal install random-source
Resolving dependencies...
No packages to be installed. All the requested packages are already installed.
If you want to reinstall anyway then use the --reinstall flag. 
```

**更新2：**

```
*Main System.Random> import Data.Random hiding (shuffle)
*Main System.Random Data.Random> import Data.Random.Source.Std
*Main System.Random Data.Random Data.Random.Source.Std> import Data.Random.Extras
*Main System.Random Data.Random Data.Random.Source.Std Data.Random.Extras> let reversed = runRVar (shuffle "somestring") StdRandom

<interactive>:1:16:
    Ambiguous type variable `m0' in the constraints:
      (MonadRandom m0) arising from a use of `runRVar'
                       at <interactive>:1:16-22
      (Monad m0) arising from a use of `runRVar' at <interactive>:1:16-22
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: runRVar (shuffle "somestring") StdRandom
    In an equation for `reversed':
        reversed = runRVar (shuffle "somestring") StdRandom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:19:08.990

像这样的东西怎么样：**编辑**：使用*StdRandom*

```
import Data.Random hiding (shuffle)
import Data.Random.Source.Std
import Data.Random.Extras

reversed = runRVar (shuffle "somestring") StdRandom

test = do
  x <- reversed
  putStrLn x 
```

# android - 我可以在我的应用程序中使用 android farsi 插件吗

> ID：13120617
> 
> 赞同：0
> 
> 时间：2012-10-29T11:20:36.573
> 
> 标签：android

我想在我的应用程序中使用波斯语。我希望不支持波斯语的设备可以很好地显示它。我在网上搜索并找到了相关的课程，但我想要简单的方法。我的问题是我可以使用[波斯语插件](https://play.google.com/store/apps/details?id=klye.plugin.fa&hl=en)吗？如果没有，那么有插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T05:24:39.633

是的，当然你可以使用它，但在使用它之前，你需要安装一个 MultiLing 键盘和这个插件。这个插件非常好用，您还可以享受波斯语的自动更正和单词建议。

# android - 无法再次解析相同的 xml 文件。Android XmlPullParser

> ID：13120620
> 
> 赞同：0
> 
> 时间：2012-10-29T11:20:55.073
> 
> 标签：android, xml, xmlpullparser

第一次我成功地解析了 XML。这是代码：

```
XmlPullParser xmlPullParser = getResources().getXml(R.xml.antennas);
    try
    {
        int eventType = xmlPullParser.getEventType();

        boolean requiredVendorLabel = false;

        while (eventType != XmlPullParser.END_DOCUMENT)
        {
            if(eventType == XmlPullParser.START_TAG && xmlPullParser.getName().equals("vendor"))
            {
                if(xmlPullParser.getAttributeValue(0).equals(newVendor.toString())) {

                    requiredVendorLabel = true;
                }
                else {
                    requiredVendorLabel = false;
                }
            }
            if(requiredVendorLabel && eventType == XmlPullParser.START_TAG && xmlPullParser.getName().equals("model"))
            {
                antennas.add(xmlPullParser.getAttributeValue(0));
            }

            eventType = xmlPullParser.next();
        }
    }
    catch (Throwable e) {
        Toast.makeText(getActivity(), "Cannot load file for parsing", Toast.LENGTH_SHORT);
    } 
```

然后我尝试使用相同的代码再次解析相同的文件。但我什么都没有。While 循环只处理一次并完成。xmlPullParse.getLineNumber 返回（-1），但我认为它应该返回大于零的数字。

我应该怎么做才能再次解析 xml 文件？

# c++ - QDrag 和 Skype 问题（仅限获胜）

> ID：13120627
> 
> 赞同：2
> 
> 时间：2012-10-29T11:21:31.017
> 
> 标签：c++, windows, qt, drag-and-drop, skype

我正在编写一个小文件/档案资源管理器，并且仅在 Windows 平台上遇到了基于 qt 的应用程序和 Skype 聊天窗口之间的交互问题。

当我尝试从我的应用程序拖放文件（由 QDrag 提供的文件-urls mime 数据）到 Skype 聊天窗口时，文件被发送两次。尝试修改 Qt 拖放示例之一时，我遇到了同样的情况。

Skype 版本是 5.10.0.116。错误可在 Qt 版本 4.7.3、4.8.1、4.8.3 上重现。

**编辑：**

尝试过多个应用程序之间的拖放交互

*   我的应用程序 -> 资源管理器 = 好的
*   我的应用程序 -> Notepad++ = ok（仅在一个选项卡中显示文件内容）
*   我的应用程序 -> WinRar = ok（创建只有一个文件的存档）
*   我的应用程序-> TotalCommander = 好的
*   我的应用程序 -> ICQ = ok（只发送一个文件）
*   我的应用程序 -> Clementine（基于 Qt 的音乐播放器）= ok（只有一个文件添加到播放列表）
*   资源管理器 -> Skype = 好的

**但**

*   我的应用程序 -> Skype - 文件发送两次
*   Clementine -> Skype - 文件发送两次

**编辑2：**

此外，qt 创建的 mime 数据与 explorer 创建的数据不同。

数量：

*   0 "文本/uri-list" "file:///C:/Users/user/Pictures/myfile.ext"
*   1 "application/x-qt-windows-mime;value="UniformResourceLocatorW"" "..." （我已将 QByteArray 内容替换为省略号）

探险家：

*   0 "application/x-qt-windows-mime;value="Shell IDList 数组"" "..."
*   1 "应用程序/x-qt-windows-mime;value="UsingDefaultDragImage"" "..."
*   2 "应用程序/x-qt-windows-mime;value="DragImageBits"" "..."
*   3 "应用程序/x-qt-windows-mime;value="DragContext"" "..."
*   4 "application/x-qt-windows-mime;value="DragSourceHelperFlags"" "..."
*   5 "应用程序/x-qt-windows-mime;value="InShellDragLoop"" "..."
*   6 "text/uri-list" "file:///C:/Users/user/Pictures/myfile.ext"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:16:42.693

我明白了，如果 Qt 没问题，这是 Skype 端的错误 mime 数据处理。除了“text/uri-list”，Qt 还提供了具有相同数据的“UniformResourceLocatorW”值（我不能否认，它添加的深度比 Qt 用户所能得到的要深得多）。Skype 处理两个值——“text/uri-list”和“UniformResourceLocatorW”，导致发送相同的文件两次。

# c - 如何在 gnu99 支持的 gcc 中处理“警告：内联函数 `*stat64` 已声明但从未定义”

> ID：13120633
> 
> 赞同：2
> 
> 时间：2012-10-29T11:21:50.180
> 
> 标签：c, linux, gcc, stat, gnu99

我包括`stat.h`以下`foo.c`内容：

```
#include <sys/stat.h> 
```

当我编译如下：

```
gcc -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE=1 -DUSE_ZLIB -DUSE_BZLIB -O0 -g -Wformat -Wall -Wswitch-enum -Wextra -std=gnu99 -DDEBUG=1 -c foo.c -o objects/foo.o -I...
gcc -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE=1 -DUSE_ZLIB -DUSE_BZLIB -O0 -g -Wformat -Wall -Wswitch-enum -Wextra -std=gnu99 -DDEBUG=1 objects/foo.o -o ../bin/debug.foo ../lib/libfoo.a ... -lbz2 -lz 
```

我收到以下特定于`<sys/stat.h>`函数的警告：

```
In file included from foo.c:15:0:
/usr/local/gcc-4.7.2/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/include-fixed/sys/stat.h:317:16: warning: inline function `lstat64` declared but never defined [enabled by default]
/usr/local/gcc-4.7.2/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/include-fixed/sys/stat.h:255:16: warning: inline function `fstat64` declared but never defined [enabled by default]
... 
```

我将如何解决这些警告中提到的问题？在我使用 迁移到 C99 支持之前，这似乎不是问题`-std=gnu99`，但我不确定为什么。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T11:55:09.430

添加[`-fgnu89-inline`](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html)标志通过启用“在 C99 模式下的内联函数的传统 GNU 语义”来修复警告。

# c# - 使用存储过程在数据集中找不到表 0

> ID：13120634
> 
> 赞同：1
> 
> 时间：2012-10-29T11:21:54.337
> 
> 标签：c#, asp.net, sql-server-2008

执行存储过程后，我没有得到填充数据集。

```
protected void btnsub_Click(object sender, EventArgs e)
{  
    ArrayList arInsert = ReturnParameter_insert();
    DataSet dsInsertProfile = objadmin.GetGridData(arInsert, objconstant.sSP_INSERT_PROFILE);

    if(int.Parse(dsInsertProfile.Tables[0].Rows[0].ItemArray[0].ToString())== 0)
    {
         lblThank.Text = "Your profile have been successfully saved.";
    }
    else
    {
        lblThank.Text = "Your profile is not saved, please try again later.";
    }
}

public ArrayList ReturnParameter_insert()
{
    ArrayList arProfile = new ArrayList();
    Object[] c_first_name = new object[3] { "@strFname", "Varchar", (txtfname.Text != "") ? txtfname.Text : "" };
    arProfile.Add(c_first_name);
    return arProfile;
}

public DataSet GetGridData(ArrayList dbArray, string sSpName)
{
        DataSet dsDataSet = new DataSet();
        dsDataSet = datamanager.GetGridData(dbArray, sSpName);
        return dsDataSet;
}

public static SqlDbType GetSqlDataType(string sDataType)
{
    return (sDataType == "Integer") ? SqlDbType.Int : (sDataType == "Varchar") ? SqlDbType.VarChar : (sDataType == "Date") ? SqlDbType.Date : SqlDbType.BigInt;
}

public static DataSet GetGridData(ArrayList dbArray, string sSpName)
{
        DataSet dsDataSet = new DataSet();
        SqlConnection cn = createConnection();
        SqlCommand cmd = new SqlCommand();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = sSpName;

        object objPrMtrName;
        object objSqlType;
        object objPrMtrVal;
        int i;

        for (i = 0; i < dbArray.Count; i++)
        {
            objPrMtrName = ((object[])(dbArray[i]))[0];
            objSqlType = ((object[])(dbArray[i]))[1];
            objPrMtrVal = ((object[])(dbArray[i]))[2];
            cmd.Parameters.Add(objPrMtrName.ToString(), GetSqlDataType(objSqlType.ToString())).Value = objPrMtrVal;
        }

        cmd.Connection = cn;

        try
        {
            SqlDataAdapter adp = new SqlDataAdapter(cmd);
            adp.Fill(dsDataSet);
            return dsDataSet;
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            cn.Close();
            cn.Dispose();
        }
} 
```

我的存储过程：

```
CREATE Procedure spInsert_profile
    (@strFname  varchar(200))
AS
BEGIN
    INSERT INTO gdt_Users([c_first_name], [d_modified_dttm], [d_created_dttm])
    VALUES(@strFname, GETDATE(), GETDATE())
END 
```

在这里，我使用的是 3 层，相同的方法在其他页面上成功运行，但不适用于此特定代码。GETGRIDDATA 方法中的数据集正在填充空值。我找不到。请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:26:08.093

您在过程中执行插入操作，而不是如何返回数据`Insert into statement`插入操作而不是检索操作。

...要检索数据，您需要使用`select *`语句调用过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:33:21.917

从我在这里可以看到，您正在执行一个仅执行 INSERT 命令的存储过程，您返回 NULL 值的原因是因为诸如 UPDATE 或 INSERT 之类的非查询命令通常只会返回受影响的行数，例如 1而不是您插入的表的数据。

您需要在插入后执行 SELECT 命令才能取回任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:32:53.633

您的存储过程中没有选择语句。adapter.fill() 应该从存储过程的输出中接收某种表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T13:01:22.510

因为你`Insert Into`在你的存储过程中使用。

基于`Tables` 属性的访问：

```
SqlDataAdapter adp = new SqlDataAdapter(cmd);
adp.Fill(dsDataSet);
var table1 = dsDataSet.Tables[0];
var table2 = dsDataSet.Tables[1]; 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.dataset.tables.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.dataset.tables.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-09T14:56:07.997

问题出在您的存储过程中...您必须将 select 语句添加到存储过程中才能在**DataSet中返回结果**

# facebook - Facebook 请求对话框：接收者过多

> ID：13120636
> 
> 赞同：1
> 
> 时间：2012-10-29T11:22:01.383
> 
> 标签：facebook, facebook-requests

您好，我在使用“请求”对话框向我的应用程序发送邀请时遇到问题。

API 错误代码：100 API 错误描述：无效参数错误消息：收件人太多。

我知道收件人数量有限制，但是有没有办法增加这个限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:24:16.717

不，我不这么认为，您不能一次将应用请求发送给 50 多个用户。

# iphone - iPhone中UITableViewCell中的UIbutton？

> ID：13120637
> 
> 赞同：0
> 
> 时间：2012-10-29T11:22:05.710
> 
> 标签：iphone, xcode4, uitableview

我是 Objective-C 的新手，在某个点上被击中 ..我正在添加一个`UILabel(Name)`, `UIbutton(Cancel)`in `UITableViewCell`，当我点击它时，它 `UIButton`会显示一个带有两个按钮 Yes 和 No 的 alertView 。当我选择 Yes 时，我必须得到相应的`UIlabel(Name)`该单元格的值。但我不明白该怎么做？这是我为创建一个`UILabel`和`UIButton`..

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell";
    UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];
    }
    NSMutableDictionary *d = (NSMutableDictionary *) [arr objectAtIndex:indexPath.row];
 UILabel *name=[[UILabel alloc]initWithFrame:CGRectMake(10, 45, 320,15)];
    name .font=[UIFont boldSystemFontOfSize:12];        
    [name setTextAlignment:UITextAlignmentLeft];
    [name  setText:[d valueForKey:@"Name"]];
    name.tag=112;
    [cell addSubview:name];
    [name  release];    

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(100.0f, 50.0f, 75.0f, 30.0f);
    [btn setTitle:@"Delete Details" forState:UIControlStateNormal];   
    [cell addSubview:btn];
    [btn addTarget:self action:@selector(btnClicked:)
                             forControlEvents:UIControlEventTouchUpInside];

    return cell;     
}
- (IBAction)btnClicked:(id)sender

{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Are you sure" message:@"You want to delete Details" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
                          [alert show];
                          [alert release];    

}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex   
{
    if (buttonIndex == 0) 
    {
       [alertView dismissWithClickedButtonIndex:0 animated:YES]; 

     }
    else 
    {
        //I have to get the corresponding cells UILabel value. 
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:58:32.673

您正在创建的按钮应该有一个变量指向它们所在的单元格。

```
 UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(100.0f, 50.0f, 75.0f, 30.0f);
    [btn setTitle:@"Delete Details" forState:UIControlStateNormal];   
    [cell addSubview:btn];
    [btn addTarget:self action:@selector(btnClicked:)
                         forControlEvents:UIControlEventTouchUpInside]; 
```

应该

```
 UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    // The below line will add a state to each button which you can use to later differentiate in your method: btnClicked
    [btn setTag:indexPath.row]; 
    btn.frame = CGRectMake(100.0f, 50.0f, 75.0f, 30.0f);
    [btn setTitle:@"Delete Details" forState:UIControlStateNormal];   
    [cell addSubview:btn];
    [btn addTarget:self action:@selector(btnClicked:)
                         forControlEvents:UIControlEventTouchUpInside];

   you can set some variable which is global to the class like "selectedRow". You can declare it on the top of the class after the line @implementation. Look for a line called

   @implementation yourClassName

   //Add the below declaration. This is a global variable in your class, which you can set in one method and access in other methods
   int selectedRow; 
```

并在 btnClicked

```
//Add the below line
selectedRow=[sender tag]; 
```

并在 alertView 的最后一个方法 clickedAlert at

```
 // NSLog(@"Name selected is ",[arr objectAtIndex:selectedRow] objectForKey:@"Name"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:30:51.627

只需在您的类中创建一个可从任何地方读取的变量。它可能是一个`NSString`甚至是一个`NSDictionary`包含更多信息的。在创建警报时设置它。`nil`退出警报时将其销毁（将其设置为）。

要获取按钮例程中的信息：

```
UIButton *button = (UIButton*)sender;
UIView *cellContentView = button.superview.superview;
UILabel *label = (UILabel*) [cellContentView viewWithTag:yourPredefinedTag];
_privateVariable = label.text; 
```

# java - 仅通过类型参数创建泛型类？

> ID：13120638
> 
> 赞同：2
> 
> 时间：2012-10-29T11:22:05.703
> 
> 标签：java, jakarta-ee, generics

如何创建一个泛型类，该类从创建/注入此泛型类时放置的泛型类型参数中获取类类型？我的目标是指定 eg `MyGeneric<User>`，然后泛型类应该能够`User`在所有方法调用中使用该类。无需`User.class`另外在泛型的构造函数中显式提供。

就像是：

```
class MyGeneric<T> {
    public MyGeneric() {
        someService.create(Class<T>, someString);
    }
}

class Usage {
    @Inject
    MyGeneric<User> myuser;
} 
```

这是如何正确完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:23:57.247

[由于运行时类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，没有办法做到这一点。

通常的方法是（正如您所暗示的）将一个实例（`Class<T>`称为[类型令牌](http://docs.oracle.com/javase/tutorial/extra/generics/literals.html)）传递给构造函数。鉴于您的代码模式，您会坚持使用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:29:36.193

这有点棘手，但使用来自 Guice 的 TypeLiteral，您可以执行以下操作：

```
public class ReiHashMap<K,V> extends HashMap<K,V> {

   private final TypeLiteral<K> keyTL;

   public ReiHashMap(TypeLit<K> keyTL ) {
       this.keyTL = keyTL;
   }

   @Override
   public V get(Object o) {
       if ( !keyTL.getRawType().isAssignableFrom( o.getClass() )) {
           throw new IllegalArgumentException( "object " + o + " (class "+ o.getClass() +")ist not of type " + keyTL);
       }
       return super.get(o);
   }
   ... 
```

这是 HashMaps 的扩展，可以在运行时检查 get 参数的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:38:54.097

您可以做的是在超类中编写实例化代码，然后为每个特定的泛型类型扩展它（子类中需要很少或不需要代码，但子类是强制性的，因为它们是避免类型擦除的唯一方法）：

```
abstract class MyGeneric<T> {

    private T instance;

    public MyGeneric(String str) {
        // grab the actual class represented by 'T'
        // this only works for subclasses of MyGeneric<T>, not for MyGeneric itself !
        Class<T> genericType = (Class<T>) ((ParameterizedType)getClass().getGenericSuperclass())
                .getActualTypeArguments()[0];
        try {
            // instantiate that class with the provided parameter
            instance = genericType.getConstructor(String.class).newInstance(str);
        } catch (Exception e) {
            throw new IllegalArgumentException(e);
        }
    }
}

class MyUser extends MyGeneric<User> {
    public MyUser() {
        // provide the string to use for instantiating users...
        super("userStr");
    }
}

class User { /*...*/ } 
```

编辑：制作泛型类`abstract`以强制使用子类。

它也可以与匿名类一起使用，例如：

`new MyGeneric<User>("..string...") {}`

我认为这是您可以获得的最接近您最初目标的方式...

# php - PHPDesigner 8 - 本地主机文件夹

> ID：13120644
> 
> 赞同：2
> 
> 时间：2012-10-29T11:22:17.227
> 
> 标签：php, localhost, wysiwyg, public, phpdesigner

我已经安装了**PHPDesigner 8**。我想要做的是下载我现有的网站（用 php 制作）并用 PHPDesigner 打开它以进行图形更改。我需要下载并保存整个文件夹**“public”**吗？

我可以直接从 PHPDesigner 下载吗？然后，在我完成之后，我会在**WYSIWYG**模式下看到它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:53:19.233

PHP Designer 不是所见即所得的编辑器，但它允许您在 localhost 服务器上查看已开发的代码……您可能需要 phpmaker 以图形方式开发 php 代码

# php - 如何在 Yii 中创建自定义 url

> ID：13120654
> 
> 赞同：2
> 
> 时间：2012-10-29T11:22:53.103
> 
> 标签：php, yii, url-mapping

> **可能重复：**
> [如何为我的网页制作像 facebook 这样的用户个人资料链接](https://stackoverflow.com/questions/13117488/how-to-make-user-profile-link-like-facebook-for-my-web-page)

我如何管理用户个人资料的自定义网址，例如

```
www.exampl.com/brito  insted of  www.exampl.com/user/profile/id/22
www.exampl.com/jhon   insted of  www.exampl.com/user/profile/id/31
www.exampl.com/piter  insted of  www.exampl.com/user/profile/id/66 
```

我在我的 config/main.php 文件中完成了以下代码，现在它仅适用于这 3 个静态用户。如何为所有 1000 个用户动态更改它？

```
 urlManager'=>array(
                'urlFormat'=>'path',
                'showScriptName'=>false,
                'rules'=>array(
                    '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                    '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                    '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
                    'brito'=>'user/profile/id/22',
                    'john'=>'user/profile/id/31',
                    'piter'=>'user/profile/id/66',
                ),
            ), 
```

请帮助我任何一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:57:31.437

使用 htaccess

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d
# If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f
# If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
# do not do anything
RewriteRule ^ - [L]

# forward /blog/foo to blog.php/foo
RewriteRule ^blog/(.+)$ blog.php/$1 [L,NC]

# forward /john to user/profile/?name=john
RewriteRule ^((?!blog/).+)$ user/profile/?name=$1 [L,QSA,NC] 
```

并确保你必须`name`在页面中包含

# eclipse - 将社区插件集成到现成的 Eclipse RCP 应用程序中？

> ID：13120655
> 
> 赞同：1
> 
> 时间：2012-10-29T11:22:57.373
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipse-cdt, pydev

我已经有一个独立的 Eclipse RCP 应用程序。下一个任务是集成在 Eclipse 社区中广泛使用的插件，如**CDT**或**PyDev**，以在已开发的 RCP 应用程序中提供各自编程语言的编辑和调试工具。只是想知道我该如何完成这项任务。我应该开始玩插件的扩展点并将其添加到**MANIFEST.MF**吗？

实现这一目标的各种方法是什么？选择哪一个而不是另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:20:04.323

您应该考虑的最重要的事情（除了技术）是概念。

像 CDT 这样的插件对它们所集成的环境做出了很多假设。这意味着您的 RCP 应该具有与普通 Eclipse SDK 非常相似的用户界面和行为，以便其他“IDE-ish”插件的集成不会破坏 RCP 的界面原则。

如果您的 RCP 不是基于通用导航器、项目、文件（通常是工作区）和几个编辑器，那么 CDT 等插件的集成对您的用户来说将是一场噩梦，并且感觉就像您的 RCP 中的另一个应用程序。

还要确保来自第三方插件的 ui 贡献是可见的（例如，如果第三方插件正在贡献首选项页面，请确保您的 RCP 具有打开首选项窗口的菜单项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:26:45.720

首先，您必须在现有 RCP 应用程序中加载新功能/插件。为此，您必须调整您的产品定义并加载新的 feature.xml 文件。或者您增强自己的 feature.xml 并将新插件放入其中。

之后，您必须决定新功能/视图/透视图是否是对现有 RCP 扩展点的贡献，以及您是否在 RCP 产品中使用此扩展点。

如果您想以另一种方式使用新功能（因为默认值不够），您必须指向新插件中的特定视图/操作并自行调用它们。你必须调整你自己插件的 MANIFEST.MF 并指向新插件。如果这样做，则无法关闭添加的功能，因为您确实有指向这些插件的 jard 链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T20:59:08.263

您的 RCP 产品已经依赖于 RCP 特性 (org.eclipse.rcp) 或其插件的子集。[这意味着，它已经包含了定义基本扩展点](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/extension-points/index.html)的插件。

要包含附加特性的功能（扩展），只需将这些特性添加到您的产品配置依赖项中。例如，您必须为 CDT 添加特性 org.eclipse.cdt，为 PyDev 添加特性 org.python.pydev.feature。

当您只需要包含一些功能的插件时，困难的部分就开始了。

您必须隔离提供所需功能的插件。对于 UI 贡献，您可以通过选择所需的 UI 部分并单击 alt+shift+F1 来使用插件选择 spy。对于非 UI 贡献，可以在插件源的 plugin.xml 文件中找到贡献扩展的信息。

这些插件及其依赖项可以添加到自定义功能中，该功能可以包含在您的产品中。

尽管已经过时，但[构建基于 CDT 的编辑器](http://www.ibm.com/developerworks/opensource/library/os-ecl-cdt1/index.html?S_TACT=105AGX44&S_CMP=EDU)的文章也可能会有所帮助。

# php - 将内容插入表的语法错误

> ID：13120659
> 
> 赞同：0
> 
> 时间：2012-10-29T11:23:10.263
> 
> 标签：php, mysql, syntax-error

我不断收到语法错误，我不知道出了什么问题。我不能调用一个预定的字符串吗？

```
$sqlstring= "INSERT INTO friends (friend_id , friend_email , password , profile_name , date_started , num_of_friends)
                        VALUES (NULL , $email, $password, $name, CURDATE() , 0);"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:24:10.747

如果`$email, $password, $name`都是 varchar 或 string，则需要用单引号括起来。

```
$sqlstring= "INSERT INTO friends (friend_id , friend_email , password , 
                                 profile_name , date_started , num_of_friends)
            VALUES (NULL , '$email', '$password', '$name', CURDATE() , 0)"; 
```

您的查询是 vunerable `SQL Injection`，请花时间阅读下面的文章，以防止`SQL Injction`

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:24:23.010

删除最后一个分号并用引号括起值。

```
$sqlstring= "INSERT INTO friends (friend_id , friend_email , password , profile_name , date_started , num_of_friends)
                    VALUES (NULL , '$email', '$password', '$name', CURDATE() , 0)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:31:06.807

如果您在查询中接受用户输入，那么简单地将其添加到您的 SQL 语句中是非常危险的。

如果您使用现代 PHP，您将[使用 PDO 来准备您的语句](http://www.php.net/manual/en/pdo.prepare.php)...

```
$sth = $dbh->prepare('INSERT INTO friends (friend_id , friend_email , password , profile_name , date_started , num_of_friends)
                    VALUES (NULL , ?, ?, ?, CURDATE() , 0)');
$sth->execute(array($email, $password, $name)); 
```

或者，如果您想坚持老派，请避开它​​们：

```
$sqlstring = sprintf('INSERT INTO friends (friend_id , friend_email , password , profile_name , date_started , num_of_friends) VALUES (NULL , %s, %s, %s, CURDATE() , 0)',
    mysql_real_escape_string($email),
    mysql_real_escape_string($password),
    mysql_real_escape_string($name)
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:34:19.900

您更新的查询是：

```
$sqlstring = "INSERT INTO friends (friend_id , friend_email , password , profile_name , date_started , num_of_friends) VALUES (NULL , '$email', '$password', '$name', CURDATE() , 0)"; 
```

* * *

# testing - 如何开始使用 Selenium Webdriver？

> ID：13120669
> 
> 赞同：0
> 
> 时间：2012-10-29T11:23:48.490
> 
> 标签：testing, selenium, automation, webdriver

我想 Selenium Webdriver 会是不错的选择，但我不确定如何将它用于我的日常项目工作。如果没有外部培训，一步一步掌握 webdriver 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:17:03.997

正如 Eugene 所说 - 下载 Selenium IDE。与它一起玩，记录和运行测试用例。

浏览官方文档。

以您选择的语言导出测试用例。

阅读一些关于 WebDriver 的博客。尝试一些代码片段。

为数据驱动或关键驱动的测试用例编写自己的逻辑。

并且基本上一直在学习。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T14:55:51.523

有一个免费的 udemy 课程将向您展示如何设置和开始使用带有 junit 的 WebDriver。你可以在这里找到它：
[开始使用 Selenium WebDriver 和 Java](http://www.udemy.com/start-using-selenium-webdriver-with-java/)

这个短期课程由[*Selenium Simplified*](http://www.compendiumdev.co.uk/default.php)的作者 Alan Richardson 制作。这是一本很棒的书，但它是针对 Selenium-RC 的。我目前正在使用这本书通过翻译 Selenium-RC 语法中的练习来学习 WebDriver。

以我的经验，推动自己学习自动化之类的最好方法是拥有一个项目。例如，如果您在工作中经常进行测试，请考虑在业余时间将它们自动化，作为学习过程的一部分。

# c - c 中的文件处理：无法正确读取表格格式数据

> ID：13120670
> 
> 赞同：0
> 
> 时间：2012-10-29T11:23:48.817
> 
> 标签：c, file-handling

```
#include <stdio.h>
int main(void)
{
   clrscr();
   FILE *fin;

   fin=fopen("data.txt","r");

   if(fin==NULL)
   {
    printf("can not open input fil");
    return 0;
   }

   long data[2];

   while(!feof(fin))
   {
       fscanf(fin,"%ld %ld",&data[0],&data[1]);
       printf("\n%ld %ld",data[0],data[1]);
   }
   fclose(fin);
   return;
   } 
```

以上是我从文件中读取表格的 c 代码。在那个 ..last 值中打印了 2 次！！！

```
data.txt
1   34
2   24
3   45
4   56
5   67 
```

但是我无法通过如下所示的损坏表获得正确的值...我该如何解决？（在这里它应该在找不到任何值的情况下工作，它应该返回“空空间”或零..但不是下一个值..）

```
data.txt
1   34
2   
3   45
4   
5   67 
```

以及data.txt

```
1 34
  57
3 45
4   
5 34 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:26:25.383

> 以上是我从文件中读取表格的 c 代码。在那个 ..last 值中打印了 2 次！！！

由于文件读取循环的结构，最后一个值打印了两次。`eof()`直到尝试读取文件末尾之后才会设置该标志。当从文件的最后一行`fscanf()`读取最后两个s还没有设置但下一次调用失败并设置但没有立即查询结果时，导致使用之前提取的s：检查所有读取操作的结果立即地。`long``eof()``fscanf()``eof()``fscanf()``long`

* * *

一种可能的解决方案是一次读取一行，使用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)，然后使用从读取的行[`sscanf()`](http://en.cppreference.com/w/c/io/fscanf)中提取`long`值。如果`fscanf()`使用，它将读取换行符以定位第二个请求的字符`long`，这不是所需的行为。

例如：

```
char line[1024];
while (fgets(line, 1024, fin))
{
    /* Assign appropriate default values.
       sscanf() does not modify its arguments
       for which it has no value to assign.
       So if 'line' has a single long value
       data[1] will be zero. */
    long data[2] = { 0, 0 };

    /* You can use 'result' if you require to take particular
       action if it reads only 1, or 0, items. */
    int result = sscanf(line, "%ld %ld", &data[0], &data[1]);

    printf("\n%ld %ld",data[0],data[1]);
} 
```

* * *

（*响应问题更新*）区分缺少第二个值的行：

> 2

以及缺少第一个值的行：

> 57

需要一个有效范围（或其他一些标准）来确定该行中缺少哪个值（第一个或第二个）：

```
int result = sscanf(line, "%ld %ld", &data[0], &data[1]);
if (1 == result)
{
    if (data[0] >= 1 && data[0] <= 9)
    {
        printf("\n%ld 0", data[0]);
    }
    else
    {
        /* Read value was the second value. */
        printf("\n%ld %ld", ++last_first_value, data[0]);
    }
} 
```

其中`last_first_value`a`long`存储第一个值的当前值（最后一次成功读取的第一个值或根据最后一次成功读取的第一个值计算得出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:58:55.110

```
while(!feof(fin))
{
   fscanf(fin,"%ld %ld",&data[0],&data[1]);
   printf("\n%ld %ld",data[0],data[1]);
} 
```

`feof``true`直到您尝试读取文件末尾之后才会返回，因此循环将经常执行一次。最好检查返回值，`fscanf`如果它与您期望的不匹配（在本例中为 2），*则*检查 EOF。这是一种可能的重组：

```
int good = 1;
while (good)
{
  int itemsRead = fscanf(fin, "%ld %ld", &data[0], &data[1]);
  if (itemsRead == 2)
  {
    // process data[0] and data[1] normally
  }
  else 
  {
    good = !good;
    if (feof(fin))
      printf("Hit end of file\n");
    else if (ferror(fin))
      printf("Error during read\n");
    else
      printf("Malformed input line\n");
  }
} 
```

# objective-c - 使用类别将 XML 解析为 NSManagedObjects 以及如何处理类别中的属性？

> ID：13120671
> 
> 赞同：1
> 
> 时间：2012-10-29T11:23:50.867
> 
> 标签：objective-c, ios, core-data, properties, nsxmlparser

基于“The Big Nerd Ranch Guide”（第 3 版）一书中的优秀示例“使用 NSXMLParser 解析 XML”，我已经添加了`NSManagedObjects`要为其添加 XML 解析的类别。这些类别仅提供解析功能。

这就是我实现这些类别的方式：.h：

```
#import "IBCompany.h"
@interface IBCompany (Xml) <NSXMLParserDelegate>

- (void)parseXmlString:(NSString*)xmlStr withCompletion:(void(^)(NSError *error))completionBlock;

@end 
```

米：

```
@implementation IBCompany (Xml) 

- (void)parseXmlString:(NSString*)xmlStr withCompletion:(void(^)(NSError *error))completionBlock;
{
    NSData *xmlData = [xmlStr dataUsingEncoding:NSUTF8StringEncoding];
    NSXMLParser *parser = [[NSXMLParser alloc]initWithData:xmlData];
    parser.delegate = self;

    [parser parse];

    xmlData = nil;

    NSError *error;
    completionBlock(error);
    }

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
if ([elementName isEqualToString:@"Issue"]) {
                IBIssue *issue = [NSEntityDescription insertNewObjectForEntityForName:@"IBIssue" inManagedObjectContext:self.managedObjectContext];
                issue.company = self;          
                issue.parentParserDelegate = self;
                parser.delegate = issue;
} 
```

正如您在此代码片段中看到的，我将解析器委托切换到其他子类/XML 子元素，以让它们进一步处理属于它们的下一个 XML 元素，直到到达 XML 元素的末尾并设置委托给父母。

这就是为什么我需要将父委托存储在孩子中。但是，类别中不允许使用 ivars 和属性。

我想出了这个似乎可以绕过这个问题的解决方案：

子元素，h：

```
#import "IBIssue.h"

@interface IBIssue (Xml) <NSXMLParserDelegate>
@property id parentParserDelegate;
@end

#import "IBIssue+Xml.h"

@implementation IBIssue (Xml)

NSMutableString *currentString;
NSString *currentXmlDocument;

id _parentParserDelegate;

- (id)parentParserDelegate
{
    return _parentParserDelegate;
}

- (void)setParentParserDelegate:(id)parentParserDelegate;
{
    _parentParserDelegate = parentParserDelegate;
}

- (NSDateFormatter*)dateFormatter
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    [dateFormatter setDateFormat:@"yyy-MM-dd"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT: 0]];
    return dateFormatter;
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"IssueID"]) {
        currentString = [[NSMutableString alloc]init];

        if      ([attributeDict[@"Type"] isEqualToString:@"Ticker"])        self.ticker = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"Name"])          self.issueName = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"CUSIP"])         self.cusip = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"ISIN"])          self.isin = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"RIC"])           self.ric = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"SEDOL"])         self.sedol = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"DisplayRIC"])    self.displayRic = currentString;
        else if ([attributeDict[@"Type"] isEqualToString:@"InstrumentPI"]) ; //
        else if ([attributeDict[@"Type"] isEqualToString:@"QuotePI"])      ; //

    } else if ([elementName isEqualToString:@"Exchange"]) {
        currentString = [[NSMutableString alloc]init];

        self.exchangeCode = attributeDict[@"Code"];
        self.exchangeCountry = attributeDict[@"Country"];
        self.exchange = currentString;
    } else if ([elementName isEqualToString:@"MostRecentSplit"]) {
        currentString = [[NSMutableString alloc]init];

        self.mostRecentSplitDate = [self.dateFormatter dateFromString:attributeDict[@"Date"]];
        // self.mostRecentSplit = [NSNumber numberWithFloat: currentString.floatValue];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    // NSLog(@"appendString: %@", string);
    [currentString appendString:string];
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"Issue"]) {
        parser.delegate = self.parentParserDelegate;
    } else if ([elementName isEqualToString:@"MostRecentSplit"]) {
        self.mostRecentSplit = [NSNumber numberWithFloat: currentString.floatValue];
    }

    currentString = nil;
}

@end 
```

我将委托保存在一个变量中，该变量`_parentDelegate`在 ivar 声明块之外声明，并且似乎不是真正的 ivar。

这段代码在我的测试中运行良好，我想知道我是否遗漏了一些在开发过程后期会成为问题的东西，或者这个设计是否可以。

你对此有何看法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:57:20.493

我不确定编译器将如何处理该变量。是否可以分配它以使该类型的所有对象仅共享一个变量？如果您的 XML 被解析为在某个时间点存在多个 IBCompany，则可能会导致问题。我会编写一个分配两个 IBCompany 对象的测试，使它们都向 _parentDelegate 写入不同的值，然后断言这些值不同。

如果不可能并行解析两个 IBCompany 对象，则忽略此问题。您必须确保 XML 不能在另一个 IBCompany 中包含 IBCompany，不会并行处理 XML 的多个部分，并且不会并行处理多个 XML 文档。

我不认为需要一个类别。当您不应该将子类写入现有类时，类别很有用，例如向 Cocoa 框架中的类添加功能。您正在编写一个自定义子类，那么为什么不将 ivar 添加到您的子类中呢？您可以在未保存在 Core Data 后备存储中的托管对象中拥有其他 ivars。最多我只是使用扩展将 XML 解析代码与其他托管对象隔离开来。

# javascript - 如何确保 CSS :hover 应用于动态添加的元素

> ID：13120672
> 
> 赞同：13
> 
> 时间：2012-10-29T11:23:53.180
> 
> 标签：javascript, jquery, html, css, hover

我有一个脚本，当您将鼠标悬停在缩略图上时，它会在缩略图上动态添加完整图像。我还为完整图像提供了 CSS :hover 样式，以使它们扩展到更大的宽度（通常它们被限制为缩略图的尺寸）。如果图像加载速度很快或被缓存，这可以正常工作，但如果整个图像需要很长时间才能加载并且在加载时您不移动鼠标，那么一旦它出现，它通常会保持在缩略图宽度（ non-:hover 样式），直到您再次移动鼠标。我在我尝试过的所有浏览器中都出现了这种行为。我想知道这是否是一个错误，以及是否有办法修复或解决它。

可能值得注意的是，我也尝试在 Javascript 中使用 做同样的事情`.on('mouseenter')`，但遇到了同样的问题。

由于问题的性质，它可能很难重现，特别是如果您有快速连接。我从 Wikipedia 中选择了一张较大的照片进行演示，但要使其正常工作，您可能必须将其更改为特别大的内容或来自慢速域的内容。另请注意，您可能必须清除缓存以进行连续重试。

如果您仍然无法重现，您可以`fullimage.load`在调用`anchor.show()`.

HTML：

```
<img id="image" src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Cairo_International_Stadium.jpg/220px-Cairo_International_Stadium.jpg" /> 
```

CSS：

```
.kiyuras-image {
    position: absolute;
    top: 8px;
    left: 8px;
    max-width: 220px;
}

.kiyuras-image:hover {
    max-width: 400px;
} 
```

JS：

```
$(function () {

    var fullimageurl = 'http://upload.wikimedia.org/wikipedia/commons/3/32/Cairo_International_Stadium.jpg';

    var fullimage = $('<img/>')
        .addClass('kiyuras-image')
        .load(function () {
            anchor.show();
        });

    var anchor = $('<a/>').hide().append(fullimage);

    $('body').prepend(anchor);

    $("#image").on('mouseenter', function () {
        fullimage.attr('src',fullimageurl);
        $(this).off('mouseenter');
    });

}); 
```

[JS斌](http://jsbin.com/ifitep/1)

[更新的 JS Bin 添加了 1.5 秒的延迟（希望使问题更清晰）](http://jsbin.com/ifitep/10)

再次：重现问题涉及清除大图像的缓存，然后将鼠标悬停在原始图像上以初始加载大图像，然后在加载时不要移动鼠标。预期行为是让大图像在最终加载时正确呈现 :hover 伪类。我看到的问题是加载时间超过 ~0.75 秒时，它不会占用 :hover 直到您稍微晃动鼠标。

**编辑**：有关我的用例的更多详细信息，请参阅我对@LucaFagioli 答案的评论。

**编辑，续集**：我以为我已经这样做了，但我只是试图在 Firefox 中重现该问题，但我做不到。也许这是一个 Chrome 错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T20:41:58.067

大多数浏览器`hover`仅在光标在元素上移动至少一个像素时才更新其状态。当光标进入缩略图时`img`，它会被`hover`应用并运行您的`mouseenter`处理程序。如果在加载全尺寸图像之前保持光标不动，则旧`img`的（缩略图）将保持`hover`状态，而新的将不会得到它。

要让它在这些浏览器中工作，请将`hover`伪类移动到 CSS 中的公共父元素；例如，[将两个`img`s 都包含在 a 中`span`](http://jsbin.com/ifitep/50)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:25:22.033

如果选择器正确，CSS 将应用于所有元素，无论是动态的还是其他的。这包括所有的伪类，并且会随着 DOM 中的属性的变化而变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:08:57.233

**[编辑：虽然我的解释可能很有趣，[但上面的 pozs 解决方案](https://stackoverflow.com/a/13259049/230390)更好，所以如果可以的话，我建议使用它。]**

`hover`伪类规范对于何时应该被激活是[相当宽松](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)的：

> CSS 没有定义哪些元素可能处于上述状态，或者状态如何进入和离开。脚本可能会改变元素是否对用户事件做出反应，并且不同的设备和 UA 可能有不同的指向或激活元素的方式。

特别是，当您在加载时更新锚元素的可见性时，它不会被激活。

你可以很容易地解决这个问题：将`hover`样式复制到一个类，拦截光标移动到它最终将覆盖的元素上，并基于该元素从元素中添加或删除你的类。

**演示：** [JS Bin（基于您的延迟示例）](http://jsbin.com/anaxow/1/)。

**Javascript：**

```
$("#image")
  .on('mouseenter', function () {
    fullimage.attr('src',fullimageurl)**.toggleClass('mouseover', true)**;
    $(this).off('mouseenter');
  })
  **.mouseleave(function() {
    fullimage.toggleClass('mouseover', false);
  })**;
```

**CSS：**

```
.kiyuras-image:hover**, .kiyuras-image.mouseover** {
    max-width: 400px;
}
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T21:05:51.747

**TL;DR**：您不能依赖于`:hover`应用到光标下动态添加的元素。但是，纯 CSS 和 Javascript 都有可用的解决方法。

我赞成 Jordan Gray 和 posz 的回答，我希望我能给他们两个赏金。Jordan Gray 以某种决定性的方式解决了这个问题：CSS 规范，并提供了（另一个）工作修复，它仍然允许 :hover 和其他 CSS 效果，如转换，除了加载。posz 提供了一个更好的解决方案，并且避免了任何悬停事件的 Javascript；我在这里提供了基本相同的解决方案，但使用 div 而不是 span。我决定把它授予他，但我认为乔丹的投入是必不可少的。我正在添加并接受我自己的答案，因为我觉得有必要自己详细说明所有这些。（编辑：改变，我接受了 posz'）

Jordan 引用了 CSS2 规范；我将改为参考 CSS3。据我所知，他们在这一点上没有区别。

有问题的伪类是 :hover，它指的是用户“用指针设备指定”的元素。为了允许不同类型的交互和媒体，故意模糊了行为的确切定义，不幸的是，这意味着规范没有解决以下问题：“是否应该在指针设备下出现的新元素应用这个伪类？ " 这是一个很难回答的问题。在大多数情况下，哪个答案与用户意图一致？用户正在与之交互的页面的动态变化通常是正在进行的用户交互或为相同的准备做准备的结果。因此，我会说是的，并且大多数当前的浏览器似乎都同意。通常，当您在光标下添加元素时，会立即应用 :hover。你可以在这里看到这个：[我最初发布的jsbin。](http://jsbin.com/ifitep/1)请注意，如果加载较大的图像有延迟，您可能需要刷新页面才能使其正常工作，原因我将详细说明。

现在，有一个类似的情况，用户通过 :hover 规则将光标固定在一个元素上而激活浏览器本身；它应该适用于那种情况吗？在这种情况下，鼠标“悬停”不是直接用户交互的结果。但是指点设备正在指定它，对吗？此外，鼠标的任何移动都会产生明确的交互。这是一个更难回答的问题，浏览器以不同的方式回答它。当您激活它们时，Chrome 和 Firefox 不会更改 :hover 状态，直到您移动鼠标（即使您通过单击激活它们！）。另一方面，Internet Explorer 会在激活 :hover 状态后立即更新。事实上，即使它不活动，它也会更新它，只要它是鼠标下的第一个可见窗口。

不过，让我们回到第一个案例，因为这是我当前的问题出现的地方。在我的例子中，用户在很长一段时间内（超过一秒）没有移动鼠标，并且直接在光标下方添加了一个元素。这可能更容易被认为是用户交互不明确且不应切换伪类的情况。个人认为还是应该适用的。但是，大多数浏览器似乎并不同意我的看法。当您第一次将鼠标悬停在图像上然后不要在[此 jsbin](http://jsbin.com/ifitep/10)中移动鼠标时（这是我在问题中发布的用于演示问题的问题，并且与第一个问题一样，有一个简单的 :hover 选择器）， :hover 类**不是**适用于当前的 Chrome、Opera 和 IE。（Safari 也不会应用它，但有趣的是，如果您继续按键盘上的某个键，它会应用它。）然而，在 Firefox 中，**会**立即应用 :hover 类。由于 Chrome 和 Firefox 是我最初测试的仅有的两个，我认为这是 Chrome 中的一个错误。但是，规范在这一点上或多或少完全保持沉默。大多数实现都说不。Firefox 和我说是的。

[以下是规范](http://www.w3.org/TR/css3-selectors/#the-user-action-pseudo-classes-hover-act)的相关部分：

> :hover 伪类在用户使用指针设备指定元素时应用，但不一定激活它。例如，当光标（鼠标指针）悬停在元素生成的框上时，可视用户代理可以应用此伪类。不支持交互式媒体的用户代理不必支持这个伪类。一些支持交互式媒体的符合标准的用户代理可能无法支持这个伪类（例如，不检测悬停的笔设备）。
> 
> [...]
> 
> 选择器没有定义 ':active' 或 ':hover' 元素的父元素是否也处于该状态。
> 
> [...]
> 
> 注意：如果 ':hover' 状态适用于一个元素，因为它的子元素是由指针设备指定的，那么 ':hover' 可能适用于不在指针设备下方的元素。

所以！解决方法！正如一些人在这个线程中热心地指出的那样，Javascript 和 jQuery 也为此提供了解决方案，它们依赖于 'mouseover' 和 'mouseenter' DOM 事件。在问这个问题之前和之后，我自己探索了很多这样的解决方案。然而，这些都有自己的问题，它们的行为略有不同，而且它们通常只涉及简单地切换 CSS 类。此外，如果没有必要，为什么要使用 Javascript？

我有兴趣找到一个使用 :hover 的解决方案，[这就是它 (jsbin)](http://jsbin.com/anaxow/4)。我们没有将 :hover 放在要添加的元素上，而是将其放在包含该新元素的现有元素上，并且占用相同的物理空间；在这种情况下，一个 div 包含缩略图和新的较大图像（当不悬停时，它将与 div 和缩略图大小相同）。这似乎对我的用例相当具体，但通常可以使用与新元素大小相同的定位 div 来完成。

*补充：我写完这个答案后， pozs*提供了与上面基本相同的解决方案！

这与完整的 Javascript 解决方案之一之间的折衷方案是拥有一个一次性使用的类，该类将在添加新元素时有效地依赖 Javascript/DOM 悬停事件，然后删除所有这些并依赖 :hover 前进. 这是 Jordan Gray 提供的解决方案[(Jsbin)](http://jsbin.com/anaxow/1)

这两种浏览器都适用于我尝试过的所有浏览器：Chrome、Firefox、Opera、Safari 和 Internet Explorer。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T11:30:39.570

从您问题的这一部分开始：“如果图像加载速度很快或被缓存，这可以正常工作，但是如果完整图像需要很长时间才能加载并且您在加载时不移动鼠标，”

首先用 JavaScript “预加载”所有图像是否值得。这可能会允许所有图像首先成功加载，并且对于连接速度较慢的人可能会更加用户友好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T20:54:46.387

你可以这样做：http: [//jsfiddle.net/jR5Ba/5/](http://jsfiddle.net/jR5Ba/5/)

总之，在你的图片前面附加一个加载布局，然后附加一个包含你的大图片的 div 和一个`.load()`回调来删除你的加载层。

上面的fiddle由于时间关系没有简化和清理，但是如果需要的话我明天可以继续工作。

```
$imageContainer = $("#image-container");    
$image = $('#image');

$imageContainer.on({
    mouseenter: function (event) {    
       //Add a loading class
       $imageContainer.addClass('loading');
       $image.css('opacity',0.5); 

       //Insert div (for styling) containing large image            
       $(this).append('<div><img class="hidden large-image-container" id="'+this.id+'-large" src="'+fullimageurl+'" /></div>');

       //Append large image load callback            
       $('#'+this.id+'-large').load(function() {
           $imageContainer.removeClass('loading');
           $image.css('opacity',1);
           $(this).slideDown('slow');
           //alert ("The image has loaded!");        
       });
    },            
    mouseleave: function (event) {
       //Remove loading class
       $imageContainer.removeClass('loading');
       //Remove div with large image 
       $('#'+this.id+'-large').remove();
       $image.css('opacity',1);             
    }        
}); 
```

**编辑**

这是一个新版本的小提琴，包括正确大小的加载层和显示大图片时的动画：http: [//jsfiddle.net/jR5Ba/6/](http://jsfiddle.net/jR5Ba/6/)

希望它会有所帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T22:52:59.027

在有要下载的图像之前，不要让 IMG 标记添加到 DOM。这样，在加载图像之前，Load 事件不会触发。这是修改后的JS：

```
$(function () {

    var fullimageurl = 'http://upload.wikimedia.org/wikipedia/commons/3/32/Cairo_International_Stadium.jpg';

    var fullimage = $('<img/>')
        .addClass('kiyuras-image')
        .load(function () {
            anchor.show(); // Only happens after IMG src has loaded
        });

    var anchor = $('<a/>').hide();

    $('body').prepend(anchor);

    $("#image").on('mouseenter', function () {
        fullimage.attr('src',fullimageurl); // IMG has source
        $(this).off('mouseenter');
        anchor.append(fullimage); // Append IMG to DOM now.
    });

}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T18:57:13.300

我不是 100% 确定为什么`:hover`只有轻微的鼠标移动才会触发声明。一个可能的原因可能是从技术上讲，您可能没有真正*悬停*该元素。基本上，您在加载时将元素推到光标下（直到大图像完全加载该`A`元素具有`display: none`并且因此不可能处于该`:hover`状态）。同时，这并不能解释较小图像的差异...

因此，一种解决方法是只使用 JavaScript 并将`:hover`语句排除在等式之外。只需`IMG`根据悬停状态（在 JavaScript 中切换）向用户显示两个不同的元素。作为一个额外的优势，图像不必由浏览器动态放大和缩小（Chrome 中的视觉故障）。

见[http://jsbin.com/ifitep/34/](http://jsbin.com/ifitep/34/)

**更新**：通过使用 JavaScript`.active`在大图像上添加一个类，完全可以继续使用原生 CSS 动画。见[http://jsbin.com/ifitep/48](http://jsbin.com/ifitep/48)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-06T15:59:56.030

我这样做了，它在 Chrome（版本 22.0.1229.94 m）上运行：我将 css 更改为：

```
.kiyuras-image{
    position: absolute;
    top: 8px;
    left: 8px;
    max-width: 400px;
}
.not-hovered{
    max-width: 220px;
} 
```

和这样的脚本：

```
$(function(){
    var fullimageurl = 'http://upload.wikimedia.org/wikipedia/commons/3/32/Cairo_International_Stadium.jpg';

    var fullimage = $('<img/>')
        .addClass('kiyuras-image')
        .load(function () {
            anchor.show();
        });

    var anchor = $('<a/>').hide().append(fullimage);

    $('body').prepend(anchor);

    $('.kiyuras-image').on('mouseout',function(){
        $(this).addClass('not-hovered');
    });
    $('.kiyuras-image').on('mouseover',function(){
        $(this).removeClass('not-hovered');
    });

    $("#image").one('mouseover', function(){
        fullimage.attr('src',fullimageurl);
    });
}); 
```

基本上我认为这是检测/呈现“悬停”状态的 Chrome 错误；事实上，当我试图简单地将 CSS 更改为：

```
.kiyuras-image{
    position: absolute;
    top: 8px;
    left: 8px;
    max-width: 400px;
}
.kiyuras-image:not(:hover) {
    position: absolute;
    top: 8px;
    left: 8px;
    max-width: 220px;
} 
```

它仍然没有用。

PS：对不起我的英语。

# python-2.7 - Python中的Webdriver：如何获取rows.columns和数据的数量？

> ID：13120674
> 
> 赞同：1
> 
> 时间：2012-10-29T11:24:00.390
> 
> 标签：python-2.7, webdriver

知道如何从表中获取行数和列数以及数据吗？我正在使用 webdriver Python 绑定。

我尝试了不同的方法，但没有成功。

```
table = self.find_element_by_xpath(id)
trs = self._selobj.find_element_by_tag_name("tr")
print "Getteble 2 "
print "TRS " + trs[1]
tds = trs[1].find_elements(By.TAG_NAME, "td")
print tds[0]
#print table.__len__()
#for(int i=1;i<=list.length;i++)
print "Tesxt 1"
text1 = self._selobj.find_element_by_xpath("//*[@class='general_table']/tbody/tr[2]/td[2‌​]/a").text
print "Tesxt " + text1
#text2 = self._selobj.find_element_by_xpath("//*[@class='general_table']/div["+i+"]/div[2‌​]").text; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-10T20:05:28.427

尝试这个 ..

```
table=driver.find_element_by_xpath("xpath of table")
for tr in table.find_elements_by_tag_name("tr"):
print(tr.text) 
```

# facebook - 邀请好友代码

> ID：13120676
> 
> 赞同：-1
> 
> 时间：2012-10-29T11:24:05.807
> 
> 标签：facebook, api, facebook-apps

我需要一个邀请朋友加入粉丝专页的代码。 [http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/) 这是网站的链接。可以链接到我的fb粉丝专页吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:35:54.973

实际上，如果您阅读了整个文档，该请求功能仅适用于 Facebook 应用程序。但这里有一个解决方法：

*   创建 Facebook 应用程序
*   拥有每个人都想拥有的精彩内容
*   在他们访问您的精彩内容之前设置一个赞门
*   当用户喜欢您的页面时，您仍然可以为您的应用使用应用请求

# android - 启动时的 Android 位置

> ID：13120679
> 
> 赞同：0
> 
> 时间：2012-10-29T11:24:10.643
> 
> 标签：android, android-location

我目前正在开发一个从一开始就需要位置的应用程序。我有一种方法可以检查位置更新是否已启动，但即使打开 GPS，我也无法确保在应用程序启动时进行位置更新。当我的应用程序启动时，如何确保位置更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:27:28.153

> 我目前正在开发一个从一开始就需要位置的应用程序。

这是您的应用程序中的设计缺陷。请重新设计您的应用程序以考虑到：

*   用户可能禁用了 GPS，或者
*   用户可能最近没有使用 GPS，因此需要一些时间才能获得定位，或者
*   用户可能不在 GPS 信号可用的位置（例如，在大型建筑物内）

> 当我的应用程序启动时，如何确保位置更新？

你不能。

# java - 为什么我得到一个 java.lang.NoSuchMethodError: 即使构建是绿色的？

> ID：13120694
> 
> 赞同：2
> 
> 时间：2012-10-29T11:25:21.353
> 
> 标签：java, intellij-idea, webdriver, nosuchmethoderror

我在 intellij 中使用 HtmlUnitDriver 编写了一个测试。代码是：

```
import junit.framework.Assert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;

public class HtmlUnitDemo {
    WebDriver driver;

    public static void main(String args[]){
        HtmlUnitDemo obj = new HtmlUnitDemo();
        obj.setup();
        obj.openURL();
    }

    public void openURL() {

        driver.get("https://mail.google.com");
        driver.findElement(By.id("username")).sendKeys("xyz");
        driver.findElement(By.id("password")).sendKeys("pqr");
        driver.findElement(By.className("btn-submit")).click();
        Assert.assertEquals(driver.getTitle(), "CAS – Central Authentication Service");
    }

    public void setup(){
        driver = new HtmlUnitDriver();
    }
} 
```

此代码在我使用 gradle 时构建。但是，当我在 IDE 中运行它时，它给了我一个

```
*java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;) 
```

整个堆栈跟踪是：

```
at com.gargoylesoftware.htmlunit.HttpWebConnection.createHttpClient(HttpWebConnection.java:504)
at com.gargoylesoftware.htmlunit.HttpWebConnection.getHttpClient(HttpWebConnection.java:470)
at com.gargoylesoftware.htmlunit.HttpWebConnection.setUseInsecureSSL(HttpWebConnection.java:659)
at com.gargoylesoftware.htmlunit.WebClient.setUseInsecureSSL(WebClient.java:1085)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.createWebClient(HtmlUnitDriver.java:263)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.<init>(HtmlUnitDriver.java:129)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.<init>(HtmlUnitDriver.java:172)
at org.openqa.selenium.htmlunit.HtmlUnitDriver.<init>(HtmlUnitDriver.java:168)
at smoke.com.thoughtworks.twu.HtmlUnitDemo.setup(HtmlUnitDemo.java:30)
at smoke.com.thoughtworks.twu.HtmlUnitDemo.main(HtmlUnitDemo.java:14)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我用谷歌搜索了这个错误，它说的是与类路径有关的内容。但我不确定到底要做什么。我对这个领域很陌生。因此，任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:34:18.917

`NoSuchMethodError`可能表明该类所在的库`org.apache.http.conn.scheme.Scheme`具有与预期不同的版本。

检查您正在使用的 Selenium 库使用的依赖项。如果它来自 maven，这可能是一项简单的任务，否则请查看他们的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T14:53:36.567

我有同样的错误，我很难解决。

```
java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;) 
```

我的 Classpath 上有两个具有相同“完全限定”名称的类

> org.apache.http.conn.scheme.Scheme

Java 只是选择了第一个 Scheme 类，它是错误的。它使用没有我期望的方法的 Scheme 类。

好的，所以我只需在 Maven 中声明正确的依赖项即可解决问题，对吗？不，这两个 Scheme 类都在不同的工件中，一个是传递依赖，所以我不能完全删除。

**解决方案**我们必须手动覆盖 Maven，将我们想要使用的 Scheme 类的 Jar 放入 Tomcat 中。Tomcat 容器获取的依赖项在 Maven 依赖项之前加载。因此，将 Scheme 类 Jar 加载到您的 Web 容器中，这样您就可以保证首先找到它。

这些命令在分析时非常有用。

```
mvn dependency:analyze -o
mvn dependency:tree -o 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-21T07:53:29.013

如果您使用的是 IntelJ IDE。确保您在项目详细信息中提供了正确的 JDK。您可以通过
按 Ctrl+Alt+Shift+S -> 将打开项目设置来检查它。点击项目。您可以在此处查看指定的 JDK。 [![项目设置页面](../Images/71268ce80af622cb0acfb0c1d20fedac.png)](https://i.stack.imgur.com/ILDSn.png) 转到系统中的 JDK 路径。如果您使用的是 Windows 64 位版本。这将是

C:\Program Files\Java\
确保您指定的JDK在同一路径下也有对应的jre（JDK，JRE版本应该相同）。 [![JDK 在我的系统中](../Images/fff22a608e3155abacf1789d3109c11e.png)](https://i.stack.imgur.com/gXrkh.png)

所以你可以看到我有jdk1.8.0_141，jre1.8.0_141。我已将此 jdk1.8.0_141 索引到我的 IntelJ。
当您检查时，如果您看到相应的 JRE 不存在。IntelJ 索引将不正确，它会导致您在问题中提到的此类错误。[您可以从http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
下载最新的 JDK 如果您在 Windows 上使用 .exe 版本的 JDK 并在您的系统中运行。它将自动在同一路径中安装 corresponsind jre。您可以将您的疑问放在评论中。会尽力帮助你。

之后回到 IntelJ。转到**项目设置->项目**。单击**新建**并选择并添加正确的 JDK。单击**确定**。然后转到您的程序。你可以看到 IntelJ 正在重新索引你的东西。可能需要几分钟。之后尝试重新运行程序。

# macros - 嵌套元素很少的 Freemarker 宏

> ID：13120695
> 
> 赞同：9
> 
> 时间：2012-10-29T11:25:21.510
> 
> 标签：macros, freemarker

如何在宏中有几个不同的**#nested**元素？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-01T03:21:09.793

宏中不能有不同的**#nested**元素，每次使用都会输出相同的文本。

如果您的目标是在宏中包含多个变量部分，则可以使用**#assign**元素。

允许定义正文、页眉和页脚内容的页面**示例#macro ：**

```
<#macro pageTemplate header="" footer="">
    ${header}
    <#nested >
    ${footer}
</#macro> 
```

然后，您可以使用**#assign**元素定义每个部分（但不可否认，拥有多个命名**的 #nested**元素会更好）。

```
<#assign headerContent>
     This is the header.
</#assign>
<#assign footerContent>
     This is the footer.
</#assign>
<@pageTemplate header=headerContent footer=footerContent>
     This is the nested content.
</@pageTemplate> 
```

结果输出将是：

```
This is the header.
This is the nested content.
This is the footer. 
```

# javascript - jquery 鼠标点击事件

> ID：13120699
> 
> 赞同：1
> 
> 时间：2012-10-29T11:25:33.123
> 
> 标签：javascript, jquery, canvas

我对 jquery 很陌生，正在寻找处理鼠标按下事件的事件。现在我已经找到并使用了类似的东西：

```
 $("#canva").live('mousedown mousemove mouseup', function(e){ .... 
```

但`function(e)`即使鼠标悬停在画布元素上也会触发（无论是否单击左键）。

我期待在`#canva`元素上方的每次坐标更改以及单击我的鼠标按钮时触发的事件。释放鼠标左键应导致此事件结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:32:20.077

一种方法是创建一个全局变量并在用户单击元素时修改其值，如下所示：

```
var mouseIsDown = false;

$('#mycanvas').on('mousedown', function () {mouseIsDown = true});
$('#mycanvas').on('mouseup', function () {mouseIsDown = false}); 
```

现在您所要做的就是将“mousemove”绑定到您要触发的函数，并简单地将条件附加到函数的主体，以检查左键单击的状态并在必要时转义。

```
function fireThis(e) {
// if the user doesn't have the mouse down, then do nothing
if (mouseIsDown === false)
     return;

// if the user does have the mouse down, do the following
// enter code here
// ....
// ....
}

// bind mousemove to function
$('#mycanvas').on('mousemove', fireThis); 
```

现在，如果用户在元素内部单击，然后在释放之前将鼠标拖到元素外部，您会注意到“mouseup”永远不会被触发，并且变量 mouseIsDown 永远不会变回 false。为了解决这个问题，您可以将“mouseout”绑定到重置 mouseIsDown 的函数或全局绑定“mouseup”，如下所示：

```
$('#mycanvas').on('mouseout', function () {mouseIsDown = false}); 
```

或者

```
$(document).on('mouseup', function () {mouseIsDown = false}); 
```

这是一个例子：http: [//jsfiddle.net/pikappa/HVTWb/](http://jsfiddle.net/pikappa/HVTWb/)

# attributes - 用 xsd 文件中另一个属性的值设置 minOccurs-value

> ID：13120702
> 
> 赞同：0
> 
> 时间：2012-10-29T11:25:37.040
> 
> 标签：attributes, xsd, minoccurs

我正在编写一个 xsd-schema 文件，我需要确保一个属性的值（正整数）也是另一个属性的 minOccurs 和 maxOccurs 的值。这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:40:05.753

不是单独使用 XSD 1.0。

如果您可以在 XSD 1.0 中使用另一种模式语言，那么 Schematron 可以做到。如果您可以迁移到 XSD 1.1，那么 xsd:assert 将在这里做同样的事情（与 Schematron 一样）。

# javascript - 使用 Javascript 的 Chromeless 播放器中的全屏选项？

> ID：13120704
> 
> 赞同：2
> 
> 时间：2012-10-29T11:25:58.560
> 
> 标签：javascript, youtube-api, youtube-javascript-api

我正在使用 Youtube Javascript API 开发无铬播放器。你能告诉我如何在播放器上使用 Javascript 添加/开发“全屏控制”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T15:52:12.937

这不是当前存在于 YouTube api 中的东西。相反，您可以使用 javascript 全屏 API 来提供该功能。详细信息可以在 MDN 上找到。

[https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode)

代码示例看起来像这样

```
var player = new YT.player('#my-video');
// Once the user clicks a custom fullscreen button
var el = document.getElementById('#my-player-element-container');
if (el.requestFullScreen) {
  el.requestFullScreen();
} else if (el.mozRequestFullScreen) {
  el.mozRequestFullScreen();
} else if (el.webkitRequestFullScreen) {
  el.webkitRequestFullScreen();
} 
```

# sql - 使用select语句将Sql插入到语句中

> ID：13120711
> 
> 赞同：8
> 
> 时间：2012-10-29T11:26:34.113
> 
> 标签：sql, insert

我想从表（item2）和不在该 item2 表中的日期向表（item1）插入一些值。

如何使用 select 语句编写 SQL 插入语句来实现这一点？

例如：

```
INSERT into item1(date, name, qty) 
values(datevalue, select col1, col2 from item2); 
```

这是行不通的。我应该怎么做才能修复它？

```
insert into daily_stock(date, product_id, name, weight, qty, free_issues, sales_price, 
                        purchased_price, category, last_purchased_date) 

     select 
        **'"+today+"'**,
        productId, name, weight, newQty, freeIssues, NewSalesPrice,
        NewPurchasePrice, category, datePurchased 
     from product 
```

我正在使用java，今天是一个字符串变量，仍然没有插入数据，怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T11:28:17.433

您快到了：只需使用instread的`SELECT`变体，并将您的数据作为常量包含在其中：`INSERT``VALUES`

```
insert into item1(date,name,qty) 
select <datevalue>, col1, col2 from item2; 
```

如果您的日期来自另一个表，您可以这样做：

```
 insert into item1(date,name,qty) 
 select d.dcol1, i2.col1, i2.col2 
 from item2 i2 inner join table_containing_date_col d
 on <some join criteria> 
```

**编辑：**您必须确保数据类型匹配，即如果您将其保存到日期字段（希望如此！），您必须可以解析为日期。您没有提供数据库的详细信息，但对于 SQL Server 来说将是这样的

```
cast('your date in yyyymmdd format' as datetime) 
```

（`yyyymmdd`始终有效，因为它是可识别的 ISO 格式）

或者更好的是[转换](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)

对于 MySql 你有[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)，对于 Oracle [TO_DATE](http://www.techonthenet.com/oracle/functions/to_date.php) etc.etc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:28:22.040

使用`INSERT INTO...SELECT`声明

```
INSERT INTO item1 (date, name, qty) 
SELECT 'value here' as datevalue, col1, col2 
FROM   item2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:28:22.570

在没有您使用的特定 SQL 服务器/类型的情况下，在 T-SQL 中可以这样做：

```
INSERT INTO Table1
SELECT '29/01/2012', T2.Column1, T2.Column2 FROM Table2 T2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:29:24.113

你很亲密。

```
INSERT into ITEM1 (date, name, qty) 
values (datevalue, (SELECT col1, col2 FROM item2)); 
```

# javascript - 如果 Google Ajax API 不可用（因为 Google 不允许在本地安装它），最好的后备方案是什么？

> ID：13120717
> 
> 赞同：13
> 
> 时间：2012-10-29T11:26:48.727
> 
> 标签：javascript, ajax

在我的网站上，我有：

```
...
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
... 
```

上面的脚本是动态加载其他资源的谷歌脚本。（例如谷歌图表 API）

这在 99.99% 的时间里都有效。但是，我刚得到一个客户，由于某些原因，他的公司限制了对 google.com 的访问。

因此，我的网站只是抛出了一个 JavaScript 错误。

现在我知道如何处理了，我可以检查 window.Google 是否存在。但我的问题是

“处理这个的标准方法是什么？”

换句话说，如果您嵌入了 3rd 方 JavaScript，您如何最好地处理他们的 JS 不可用？

注意：非常重要

您不能在本地或 Intranet 上托管图表代码。

查看 Google 的常见问题解答：[https ://developers.google.com/chart/interactive/faq#localdownload](https://developers.google.com/chart/interactive/faq#localdownload)

> 我可以在本地或 Intranet 上下载和托管图表代码吗？
> 
> 对不起; 我们的服务条款不允许您下载和保存或托管 Google.load 或 Google.visualization 代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T07:35:36.920

没有真正的选择。由于 Google 的服务条款，您不能在没有访问 google.com 的情况下使用 Google API。

*   检查与 Google 的连接并告知用户该功能不可用
*   开发自己的或使用非 google api。如果可用，您仍然可以使用 Google

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T16:04:37.980

解决方案是您客户的公司审查他们的内容过滤策略。[谷歌在他们之前关于离线访问](https://developers.google.com/chart/interactive/faq#offline)的回答中非常清楚：

> …您的计算机必须能够实时访问[http://www.google.com/jsapi](http://www.google.com/jsapi)才能使用图表。

您正在根据他们的条款和条件使用第三方解决方案，这自然会限制您的客户如何使用该解决方案。您需要站稳脚跟或找到更自由许可的解决方案。（无论如何，说服客户的 IT 部门比[请求 Google 更改他们的 TOS](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=277)更有可能成功。）

* * *

*对于可能无法加载但允许您在*服务器上保留本地副本的第三方 JS API 的更一般情况，请参阅[此问题](https://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T06:06:16.363

你可以这样尝试：

不要使用指向您要使用的 Google 库的直接链接，而是使用指向您的服务器的链接：

```
<script type="text/javascript" src="https://www.myserver.com/jsapi"></script> 
```

当您的服务器收到对此 URL 的传入请求时，您的服务器现在向 Google 发出请求以获取 API 并将响应发送给客户端。

这意味着您无需在本地或服务器上的任何地方安装 API，而是始终直接从 Google 获得最实际的版本。人们也不需要访问谷歌（如您提到的公司），因此可以使用您的服务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-29T11:33:25.027

加载图表脚本后，使用 Firebug 或 Chrome 开发工具检查您的 HTML 源代码。在浏览器中访问脚本并将它们保存在本地，然后从您自己的服务器上提供它们。当然，不建议这样做，但是如果您没有其他选择...

例如，检查我使用它的页面之一的代码，Google Charts 库的核心脚本位于： [https ://www.google.com/uds/api/visualization/1.0/3d781368978b51b3ca00a01566dccf40/format+ zh,默认,corechart.I.js](https://www.google.com/uds/api/visualization/1.0/3d781368978b51b3ca00a01566dccf40/format+en,default,corechart.I.js)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-29T12:13:33.253

使用 javascript window.onload 检查 api 是否已加载，如果没有，则从您的服务器加载它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-07T10:31:55.510

您已经知道如何检查您的库是否已加载（检查对象），如果它失败了，那么您可以在给出约束时执行以下操作：

继续使用计时器检查对象并尝试下载库，为用户显示消息

如果第一个失败，您有两种方法：停止您的应用程序并显示错误：“应用程序错误...稍后再试”或下载不同的库作为后备

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-12T11:33:45.230

你是在逐步增强还是优雅地降低页面？如果是这样，对于这个图表，你会向没有 JavaScript 的用户显示什么？一张桌子？一个列表？这是您应该留在页面中的内容，并且只有在 google 的 JS 可用时才开始更改它。要么，要么找到一个替代库，比如 raphaeljs，它可以让您将所有代码保留在项目中。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-13T02:11:39.633

如果（BIG IF）您不担心 Google Charts 的交互性并且希望将它们显示给用户只是为了查看 - 可能会添加您自己的 javascript 但根本不依赖 Google Javascript，这可以打开 google 图表成您可以向用户显示的图像。

这也需要访问在服务器上安装命令行工具。

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)是一个命令行工具，可以从 html 页面生成图像。如果您构建一个仅显示您想要的图表的简单页面，并将该`wkhtmltoimage`工具指向本地 html 文件，它将加载 Google Charts javascript 并生成图表，然后从结果中生成图像。

是的，我知道这非常笨拙，并且正在为一个小问题添加一个大工具，但是由于浏览器限制和 Google 服务条款，这将解决大部分问题。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-13T21:31:45.553

您可以尝试直接访问 google，如果失败（如果 google 受到限制），您可以将请求从您的服务器退回，该服务器使用 CURL 将请求转发到 google。如果这不起作用，那么谷歌很可能会失败。这应该涵盖您在问题中描述的问题，但是如果 google 本身确实出现故障，并没有真正的解决方法。但是，它应该让您的应用程序访问域限制，因为请求将被路由到您的服务器，而不是直接到谷歌。我对所有请求都使用这种架构，这样我就不会将 ajax 请求路由到随机服务器。它允许我使用我的后端控制与我的前端交互的内容。这还有其他好处，尤其是如果您将 AngularJS 与 NodeJS 一起使用，因为您可以解耦很多第三方库。但是，这超出了您的问题范围！

基本上，它是这样工作的（伪代码）：

```
If(!Browser->Google->Browser){
    return Browser->MyServer->Google->MyServer->Browser;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-20T14:10:56.220

已经接受了一个答案，但我仍然想留下一个额外的方面来详细说明我在上面所做的评论......

Google 服务器是唯一可以加载 API 的地方，这一点已被接受。我们不知道客户的 IT 经理是否会重新考虑他们的内容政策，他们可能有充分的理由。

鉴于用户浏览器和 Google API 之间的路径上的所有组件都不是 100% 可用的，用户迟早**会**遇到错误情况；统计上这是不可避免的。

对于用户来说，不能接受（并且可以避免）的是接收到“非特定”的 JS 错误，使他/她相信页面上存在错误。因此，我的解决方案是捕获加载 Google API 的失败并显示消息*“第三方组件暂时不可用 - 请稍后尝试”*。

这将向用户证明

1.  我们知道发生了什么
2.  我们现在无能为力
3.  但这并非完全出乎意料，并且仍然在某种程度上受到控制

# teamcity - 单元测试失败时设置电子邮件通知

> ID：13120725
> 
> 赞同：1
> 
> 时间：2012-10-29T11:27:24.093
> 
> 标签：teamcity

我有一个大项目。当我（并且只有我）提交破坏单元测试的代码时，我想收到电子邮件。我们有运行所有单元测试的 TeamCity 项目（需要 5 个多小时）。我有两个问题来设置它：

1.  项目已经破坏了测试（这些测试将被修复，但不是现在）。而且我只想在我打破新测试时收到电子邮件。而且我不想在旧测试失败时收到电子邮件。

2.  检查所有测试需要很长时间（接近 5-6 小时）。这段时间，许多开发人员提交了更改。所以当 Team City 运行单元测试时，会有超过 30 处更改（并且超过 30 位不同的开发人员可以进行这些更改）。只有 1 位开发人员打破了测试，我希望只有这 1 位开发人员收到电子邮件，而不是全部 30。

我怎样才能做到这一点？如果有人有一些想法或建议，我将不胜感激。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:59:05.777

我不知道任何 CI 系统可以为您提供未通过测试的特定提交（我知道一个正在为 Jenkins 开发的插件）。

已经通过电子邮件通知损坏的构建。我不认为它应该是特定的人，因为质量是所有团队的责任。

我发现项目结构存在问题：1）修复或忽略失败的测试 2）将单元测试与集成测试分开。分别运行它们 3) 将项目分解为具有相应测试的子模块。这将减少提交者的数量以及减少反馈循环的时间

# visual-studio-2012 - 使用 Visual Studio 2012 重写 url

> ID：13120726
> 
> 赞同：5
> 
> 时间：2012-10-29T11:27:26.197
> 
> 标签：visual-studio-2012, url-rewrite-module

我正在尝试在 VS 2012 上将 url 重写模块与 MVC 应用程序一起使用。我已经使用 web 平台 4.0 安装了该模块，遵循 Ruslan 的博客[文章](http://ruslany.net/2009/08/visual-studio-xml-intellisense-for-url-rewrite-1-1/)，根据评论更新了他的 js 脚本（特别是 Brant Burnett 的最后一个10 月 19 日，脚本成功执行。我检查了 DotNetConfig.xsd，一切正常。

如果我打开 IIS 管理控制台，我会看到 Url Rewrite 模块，并且一切正常。

我创建了一个简单的 MVC 解决方案（使用默认的 home/account 控制器），当我添加最简单的 ToLowerCase 规则（也从 Ruslan 的博客复制）时，如果我尝试执行，我会在标签下得到蓝色波浪线和 http 500.19 . 重新启动等无济于事。还要提一下我使用 IIS express 7.5。

在运行 VS 2010 的机器上，相同的过程对我来说很好，url 重写没有问题。

有谁知道会出什么问题？进一步分析需要什么信息？为什么智能感知无法工作并且重写模块无法识别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T20:41:42.647

问题出在 .NET Framework 的版本上，每个版本都有自己的配置智能感知文件。额外的麻烦是 4.5 的文件不在`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Xml\Schemas\`, as 中`DotNetConfig45.xsd`，而是在附加文件夹`1033`中。

在这里，我为 VS 2012 和 .NET 3.5、4.0 和 4.5 更新了 RuslanY 的设置脚本：http: [//pastebin.com/8GGGHTBL](http://pastebin.com/8GGGHTBL)

# mysql - 关于重复密钥更新问题

> ID：13120729
> 
> 赞同：0
> 
> 时间：2012-10-29T11:27:36.443
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3

我正在尝试更新重复键上的字段，但它只是添加新记录而不是更新。

这是我想要做的

```
ActiveRecord::Base.connection.execute "insert into open_offer_counters (offer_id, udid, open_counter) values #{opened_events.join(", ")} on duplicate key update open_counter = open_counter + 1" 
```

在我的迁移中，我指出了 2 个独特的领域

```
create_table :open_offer_counters do |t|
    t.integer :offer_id,            :unique => true
    t.string  :udid,                :unique => true
    t.integer :open_counter
  t.timestamps
end 
```

任何想法代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:39:16.017

您需要在这些列上添加唯一索引，例如

```
add_index :open_offer_counters, :offer_id, :unique => true 
```

传递 :unique 作为列选项不会做任何事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:39:55.643

在您上面的脚本中，您正在更新 open_counter=open_counter+1 ，因此这将变得独一无二并添加新行。而是这样做。

```
ActiveRecord::Base.connection.execute "insert into open_offer_counters (offer_id, udid, open_counter) values #{opened_events.join(", ")} on duplicate key update open_counter = open_counter,offer_id=offer_id, udid=udid" 
```

# iphone - 应用程序加载器错误

> ID：13120731
> 
> 赞同：3
> 
> 时间：2012-10-29T11:27:50.960
> 
> 标签：iphone, ios, code-signing, provisioning-profile

此应用程序包含与您的帐户无关的嵌入式配置文件。请使用与团队 ID 关联的配置文件：我在使用应用程序加载器上传构建时收到此错误。

我正在使用两个不同的帐户。1) 用于创建配置文件 2) 用于在 iTunes 中上传。

到目前为止，一切都运行良好。我已经在应用商店多次更新了我的应用。我正在使用相同的程序，但面临这个问题。

可能是什么原因？这是紧急情况请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:18:44.910

如果该应用程序已使用不同的开发者帐户证书（不同的团队 ID）签名，Apple 不再允许在开发者帐户上提交该应用程序。

您别无选择，只能使用您希望提交的开发者帐户证书为您的应用程序签名。如果 Bundle ID 已在其他/以前的开发者帐户中使用，则您必须使用通配符移动条款对您的应用程序进行签名。

如果您需要推送通知或游戏中心或任何需要避免通配符 AppStore 移动配置的东西，那么您就有麻烦了 => 设置一个全新的应用程序（新应用程序 ID / 捆绑包 ID）并计划从旧应用程序迁移您的客户到新的...

看[这里](http://blog.hoachuck.biz/blog/2012/12/04/use-a-provisioning-profile-associated-with-team-id/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:09:43.173

我想我已经解决了这个问题，但不知道是否还有更好的解决方案。

因为我使用不同的帐户来创建配置文件并在 iTunes 中提交它，所以我收到了这个错误。

解决方案：我们必须使用相同的帐户来创建配置文件并在 iTunes 中提交。作为一个试验，我做了同样的事情，它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T07:12:29.430

我终于成功地将我的应用更新到应用商店！

原因：

实际上，我们有一个公司帐户和一个个人开发者帐户。在我们使用个人帐户进行更新之前，由于 Apple 许可协议在一段时间前发生了更改。如果您的应用程序与公司帐户相关联，我们将无法使用个人帐户上传或更新您的应用程序。

索尔恩：

需要将个人帐户添加或链接到公司帐户。

# php - mb_substr 和 substr 的区别

> ID：13120732
> 
> 赞同：29
> 
> 时间：2012-10-29T11:27:53.210
> 
> 标签：php, string, multibyte

如果我使用`substr()`而不是`mb_substr()`函数，它会对我的结果产生任何影响或影响吗？

由于我的服务器不支持 mb_ 功能，我必须将其替换为`substr()`

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2019-05-21T12:27:38.160

如果您有 utf-8 编码，请使用 mb_substr

例子 ：

```
echo substr("hi mémé", 0 , 5); // will print hi m�
echo mb_substr("hi mémé", 0 , 5); // will print hi mé 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-29T11:39:27.917

如果您使用作为子字符串的多字节文本，它将影响您的脚本。如果是这种情况，我强烈建议您在 php.ini 中启用 mb_* 函数或执行此操作`ini_set("mbstring.func_overload", 2);`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T11:30:23.050

> 字符串[substr ( 字符串 $string , int $start [, int $length ] )](http://php.net/manual/en/function.substr.php)

返回由 start 和 length 参数指定的字符串部分。

> 字符串[mb_substr ( 字符串 $str , int $start [, int $length [, string $encoding ]] )](http://php.net/manual/en/function.mb-substr.php)

根据字符数执行多字节安全 substr() 操作。位置从 str 的开头开始计算。第一个字符的位置是 0。第二个字符的位置是 1，依此类推。

# jquery - 使选择框中的选定选项始终显示在顶部

> ID：13120733
> 
> 赞同：4
> 
> 时间：2012-10-29T11:27:52.430
> 
> 标签：jquery, select, option

我正在使用的选择框有 4 个顶级选项，每个选项下面都有一个选项列表。选定的选项出现在列表的底部，这意味着用户仍然必须向上滚动才能看到子选项。

我的问题是，如何使“选定”选项位于顶部？即，使整个选择框滚动，使其出现在顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:02:22.023

您可以做的是找到所选索引，选择接近末尾的选项并重新选择所选项目，该项目将出现在列表顶部。这是hacky，但有效。这也仅适用于单选，如果是多个选项，则必须重新选择所有选项。

```
var sel = ​document.getElementById("yourSelect");
var optsLen = sel.options.length;
var selIndex = sel.selectedIndex;
var size = sel.size;
if (selIndex>=size) {
    var newIndex = selIndex+size+1;
    if (newIndex>optsLen) {
        newIndex = optsLen;
    }
    sel.selectedIndex = newIndex;
    setTimeout(function(){sel.selectedIndex = selIndex},1); //slight delay so line above runs
} 
```

​</p>

[JSFiddle](http://jsfiddle.net/8HrQR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:30:34.373

尝试这个：

```
$('select option:selected').before($('select option:first')); 
```

如果这是你的意思？

# c# - 如果使用 OutputCache(Location = OutputCacheLocation.Downstream，如何获取新副本

> ID：13120734
> 
> 赞同：0
> 
> 时间：2012-10-29T11:27:54.893
> 
> 标签：c#, asp.net-mvc, mono, browser-cache, outputcache

Mono MVC2 应用程序使用下面的控制器在浏览器中缓存订单页面。

如果在浏览器中按下 F5，旧页面仍然返回到浏览器。如果按 F5，如何返回新页面？看起来页面已缓存在服务器中，但 OutputCacheLocation.Downstream 必须仅在 borwser 中缓存页面。这是错误吗？

```
 [Authorize]
    public class DetailController : ControllerBase
    {
        [OutputCache(Location = OutputCacheLocation.Downstream, Duration = 20 * 60,VaryByParam = "_entity")]
        public ActionResult Index(string _entity, int? orderId)
        {
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:56:16.117

我认为您可能错过了缓存的全部意义。按下`F5`将继续返回缓存页面，直到它过期（在您的情况下为 20 分钟）。如果您想*强制*服务器再次发送页面，您需要进行[硬刷新](http://en.wikipedia.org/wiki/Wikipedia%3aBypass_your_cache)，例如`Ctrl`+`F5`

# c# - 通过反射复制对象值

> ID：13120751
> 
> 赞同：1
> 
> 时间：2012-10-29T11:28:55.480
> 
> 标签：c#, asp.net-mvc-3, reflection

我编写了一个类，用于将属性从一个对象复制到另一个对象，但我发现异常：System.Reflection.TargetException：对象与目标类型不匹配。我检查过，**fromPropValue**的类型正确，不为空，等等。当然，receiver 的属性是 Binary。

```
public class Reflector
{
    public void ReflectProperties(object from, object to) 
    { 
        Type toType = to.GetType();
        Type fromType = from.GetType();
        var toProperties = toType.GetProperties();

        foreach (var prop in toProperties)
        {
            var fromProp = fromType.GetProperty(prop.Name);

            if (fromProp != null)
            {
                var propType = prop.PropertyType;
                var fromPropValue = fromProp.GetValue(from, null);

                if (propType == typeof(Binary))
                    prop.SetValue(this, (Binary)fromPropValue, null); // <-- error
                else if (propType == typeof(string))
                    prop.SetValue(this, (string)fromPropValue, null);
                else if (propType == typeof(bool))
                    prop.SetValue(this, (bool)fromPropValue, null);
            }
        }
    }
} 
```

PS：对象**from**是对象**to**的父对象，我只想将所有属性的值从父对象复制到子对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:48:46.880

我想你想要`prop.SetValue(to, ...`而不是`prop.SetValue(this, ...`.

你也不需要`if`语句和演员表。你可以做`prop.SetValue(to, fromPropValue, null);`

# php - 使用 JavaScript 来防止空格键？

> ID：13120753
> 
> 赞同：1
> 
> 时间：2012-10-29T11:29:01.817
> 
> 标签：php, javascript

我正在开发的网站上进行实时搜索。目前，它在输入第一个字符后搜索 MySql 数据库，并更新每个新字符的搜索。当`Space`作为第一个字符按下时，它将显示数据库中的所有条目。我不希望它那样做。我在某处发现了以下代码，可以防止输入`SPACE`字符：

```
$('input[type="text"]').keydown(function(e){
  var ignore_key_codes = [8,32];
  if ($.inArray(e.keyCode, ignore_key_codes) >= 0){
  e.preventDefault();
 }
}); 
```

这做了它应该做的，但不完全是我想要的。这将完全阻止空格键在文本输入中工作，我需要的是它仅在空格键是输入的第一个字符时才阻止空格键。例如，输入“apples”会阻止空格，但输入“apples oranges”不会。

有什么我可以尝试实现的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:35:43.343

你可以像这个例子一样轻松地做到这一点：

```
function keyPress(e) { 
    var e = window.event || e;
    var key = e.keyCode;
    //space pressed
    if (key == 32) { //space
        return;
    }
    searchInDataBase(); //make your ajax call to search in data base etc.
} 
```

如果按下该`space`键，则返回并且不执行任何操作，否则您将继续搜索...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:36:35.083

继@Florent 的评论之后，当用户在您的文本框中键入一个值时，请检查修剪后的值是否为 != '' 如果是，则应该可以安全地继续

例如

```
if($.trim($txtbox.val()) != ''){ // proceed to do search

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:53:04.883

```
$('input[type="text"]').keydown(function(e){
    if (e.keyCode == 32 && $.trim($(this).val()) == ''){
        e.preventDefault();
    } else {
        alert("searching..");
    }
}); 
```

**演示：http:** [//jsfiddle.net/BerkerYuceer/JJG9M/](http://jsfiddle.net/BerkerYuceer/JJG9M/)

# ruby-on-rails - 为什么我的“has_many :through”复选框没有更新我的第三个模型？

> ID：13120754
> 
> 赞同：0
> 
> 时间：2012-10-29T11:29:12.457
> 
> 标签：ruby-on-rails, forms, associations, haml

我有 3x 模型：

```
class Heuristic < ActiveRecord::Base
  has_many :footnotes
  has_many :references, :through => :footnotes
end

class Reference < ActiveRecord::Base
  has_many :footnotes
  has_many :heuristics, :through => :footnotes
end

class Footnote < ActiveRecord::Base
  belongs_to :reference
  belongs_to :heuristic
end 
```

连接表：

```
class CreateFootnotes < ActiveRecord::Migration
  def change
    create_table :footnotes do |t|
      t.integer :heuristic_id
      t.integer :reference_id
      t.timestamps
    end
  end
end 
```

从新参考视图调用的表单：

```
= form_for @reference do |f|
  .field
    = hidden_field_tag "reference[heuristic_ids][]", nil
    - @heuristics.each do |heuristic|
      = label_tag dom_id(heuristic), heuristic.description
      = check_box_tag "reference[heuristic_ids][]", heuristic.id, @reference.heuristics.include?(heuristic), id: dom_id(heuristic)
  .actions
    = f.submit 'Save' 
```

参考控制器：

```
 def new
    @reference = Reference.new
    @heuristics = Heuristic.all
    respond_to do |format|
      format.html # new.html.erb
    end
  end

  def create
    @reference = Reference.new(params[:reference])
    respond_to do |format|
      if @reference.save
        format.html { redirect_to references_path, notice: 'Reference was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end 
```

当您转到新的参考视图时，选择一个启发式并单击保存，我希望这会将选定的启发式与参考相关联，但是当您进入 rails 控制台时，您会发现它没有：

```
ref = Reference.last
  Reference Load (0.9ms)  SELECT "references".* FROM "references" ORDER BY "references"."id" DESC LIMIT 1
+----+-----+----------+---------+-----------+-------------+
| id |  created_at              | updated_at              |
+----+-----+----------+---------+-----------+-------------+
| 2  |  2012-10-29 11:21:24 UTC | 2012-10-29 11:21:24 UTC |
+----+-----+----------+---------+-----------+-------------+
1 row in set
1.9.2p318 :002 > ref.heuristics
  Heuristic Load (1.0ms)  SELECT "heuristics".* FROM "heuristics" INNER JOIN "footnotes" ON "heuristics"."id" = "footnotes"."heuristic_id" WHERE "footnotes"."reference_id" = 2
 => [] 
1.9.2p318 :003 > Footnote.all
  Footnote Load (0.4ms)  SELECT "footnotes".* FROM "footnotes" 
 => [] 
1.9.2p318 :004 > 
```

为什么是这样？

谢谢，

史蒂文。

顺便说一句，我希望`reference[heuristic_ids][]`动态生成每个复选框的名称，但每个复选框的名称是相同的`reference[heuristic_ids][]`：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:57:05.743

确保`:heuristic_ids`（虚拟）字段可访问：

```
attr_accessible :heuristic_ids # in the model. PLURAL! 
```

然后尝试在控制台中执行此操作（用一声巨响显示任何验证错误）：

```
> Reference.create!("heuristic_ids"=>["", "2"]) 
```

通过这种方式，您将获得有关为什么没有保存的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:39:31.063

啊，我最近的一个项目也遇到了同样的问题，我没有深入研究为什么“”会像控制器一样进入控制器，`params[:reference][:heuristic_ids] = params[:reference][:heuristic_ids].select{|x| x.to_i >0 }` 或者只是 `params[:reference][:heuristic_ids].shift` 看看它对你有用并检查。

保存 "" id 导致验证错误，

# ios6 - UIView下的奇怪阴影

> ID：13120761
> 
> 赞同：0
> 
> 时间：2012-10-29T11:29:41.320
> 
> 标签：ios6

我有这个简单的代码：

```
UIView* shadowView = [[UIView alloc] initWithFrame:CGRectMake(0, 30, self.view.frame.size.width, 5)];
shadowView.backgroundColor = [UIColor whiteColor];
shadowView.layer.masksToBounds = NO;
shadowView.layer.shadowOffset = CGSizeMake(0, 0);
shadowView.layer.shadowColor = [[UIColor blackColor] CGColor];
[shadowView.layer setShouldRasterize:YES];
shadowView.layer.shadowOpacity = 1;
[self.view addSubview:shadowView]; 
```

这会在顶部和底部创建一个带有阴影的白色视图。两个阴影的方向都很好，从上到下都有渐变。

如果我进行此更改：

shadowView.layer.shadowOffset = CGSizeMake(0, 5);

然后阴影只出现在底部（如我所愿），但渐变以某种方式丢失。我认为顶部与底部渐变重叠。

如何让它只在底部投下阴影？（这是在IOS6下）。

基本上我想创建这个图像：

![在此处输入图像描述](../Images/e6991c6cedcf3871196a9d95e0886588.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:37:36.363

显然，这只是阴影在 ios6 上的工作方式。问题是我设置了一个偏移量 (0, 5)，其中 5 比直线大。在玩了一段时间后，我意识到你可以向下投射阴影，只要你不试图让阴影大于投射阴影的图像。

# sql - 将 SQL VARCHAR2 日期更改为另一种日期格式

> ID：13120766
> 
> 赞同：0
> 
> 时间：2012-10-29T11:30:03.373
> 
> 标签：sql, time, format, utc, sentence

我在数据库中有一个日期（存储为 VARCHAR2），格式为：

```
20090123_163842.865
yyyyMMdd_hhmmss.ttt 
```

我想做一个SQL语句来获取：

```
23/01/2009 16:38:42,865
dd/MM/yyyy hh:mm:ss,ttt 
```

我的目标是手动添加（我知道可以从数据库中导出数据，然后导入 Excel，但我想手动添加）到 Excel 作为可识别的日期。

我的 SQL 语句应该如何？

我试图通过以下方式做到这一点：

```
select TO_TIMESTAMP(my_time_utc, 'YYYYMMDD_HH24MISS.FF3') from myTable 
```

但我只能获得：

```
2009-01-23 16:38:42.865 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:33:32.723

令我惊讶的是，有多少人混淆了这些操作。

首先，您需要将 varchar '假日期' 转换为真实日期：`to_date`用于此。然后您需要将日期转换为 varchar 以进行演示：`to_char`用于此。

```
select to_char(to_date(column, 'yyyyMMdd_hhmmss.ttt'), 'dd/MM/yyyy hh:mm:ss,ttt')
from your_table; 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:37:51.407

当 oracle 从数据库中检索一个日期字段并将**其显示给您时，会进行强制转换隐式转换**。此转换的格式模式在 oracle 配置中设置。[引用 oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm)：

> Oracle 日期值的默认日期格式源自 NLS_DATE_FORMAT 和 NLS_DATE_LANGUAGE 初始化参数

*   如果您从 Excel 执行查询，您的实际查询就足够了，因为 excel 知道日期格式并且能够毫无问题地从 Oracle 读取。

*   如果您从屏幕结果复制粘贴到 excel，那么您应该使用您想要的格式将日期转换为 varchar，或者，当然，更改 oracle 配置以匹配您的语言环境。

# scala - 从 Azavea Numeric 获取隐式 scala Numeric

> ID：13120776
> 
> 赞同：8
> 
> 时间：2012-10-29T11:30:42.640
> 
> 标签：scala, generics, numeric

我正在使用 Azavea Numeric Sc​​ala 库进行通用数学运算。但是，我不能将它们与 Scala Collections API 一起使用，因为它们需要一个 scala Numeric 并且看起来这两个 Numeric 是互斥的。除了要求所有类型都具有两个 Numeric 的上下文边界之外，有什么方法可以避免在 Scala Collections for Azavea Numeric 上重新实现所有数学运算？

```
import Predef.{any2stringadd => _, _}

class Numeric {
  def addOne[T: com.azavea.math.Numeric](x: T) {
    import com.azavea.math.EasyImplicits._
    val y = x + 1 // Compiles

    val seq = Seq(x)
    val z = seq.sum // Could not find implicit value for parameter num: Numeric[T]
  }
} 
```

其中 Azavea Numeric 定义为

```
trait Numeric[@scala.specialized A] extends java.lang.Object with 

com.azavea.math.ConvertableFrom[A] with com.azavea.math.ConvertableTo[A] with scala.ScalaObject {
   def abs(a:A):A
   ...remaining methods redacted...
}

object Numeric {
  implicit object IntIsNumeric extends IntIsNumeric
  implicit object LongIsNumeric extends LongIsNumeric
  implicit object FloatIsNumeric extends FloatIsNumeric
  implicit object DoubleIsNumeric extends DoubleIsNumeric
  implicit object BigIntIsNumeric extends BigIntIsNumeric
  implicit object BigDecimalIsNumeric extends BigDecimalIsNumeric

  def numeric[@specialized(Int, Long, Float, Double) A:Numeric]:Numeric[A] = implicitly[Numeric[A]]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:25:08.977

您可以使用 Régis Jean-Gilles 解决方案，这是一个很好的解决方案，并包装 Azavea 的 Numeric。您也可以尝试自己重新创建方法，但使用 Azavea 的 Numeric。除了 NumericRange，大多数都应该很容易实现。

不过，您可能对[Spire](https://github.com/non/spire)感兴趣，它继承了 Azavea 的 Numeric 库。它具有所有相同的功能，但也有一些新功能（更多操作、新数字类型、排序和选择等）。如果您使用的是 2.10（我们的大部分工作都针对 2.10），那么使用 Spire 的 Numeric 几乎可以消除通用方法的所有开销，并且通常运行速度与直接（非通用）实现一样快。

也就是说，我认为您的问题是一个很好的建议；我们真的应该`toScalaNumeric`在 Numeric 上添加一个方法。您计划使用哪种 Scala 收集方法？Spire 为 Arrays 添加了几个新方法，例如 qsum、qproduct、qnorm(p)、qsort、qselect(k) 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:01:04.510

最通用的解决方案是编写一个根据它包装`com.azavea.math.Numeric`和实现的类`scala.math.Numeric`：

```
class AzaveaNumericWrapper[T]( implicit val n: com.azavea.math.Numeric[T] ) extends scala.math.Numeric {
  def compare (x: T, y: T): Int = n.compare(x, y)
  def minus (x: T, y: T): T = n.minus(x, y)
  // and so on
} 
```

然后实现一个隐式转换：

```
// NOTE: in scala 2.10, we could directly declare AzaveaNumericWrapper as an implicit class
implicit def toAzaveaNumericWrapper[T]( implicit n: com.azavea.math.Numeric[T] ) = new AzaveaNumericWrapper( n ) 
```

本身是隐式的事实`n`是这里的关键：它允许在需要隐式类型值的`com.azavea.math.Numeric`地方自动使用类型的隐式值`scala.math.Numeric`。请注意，要完整，您可能也想做相反的事情（编写一个类 ScalaNumericWrapper，根据 scala.math.Numeric 实现 com.azavea.math.Numeric）。

现在，上述解决方案有一个缺点：您在每次调用时都会获得一个转换（因此是一个实例化）（到一个具有 type 上下文绑定的方法`scala.math.Numeric`，并且您只有一个实例`com.azavea.math.Numeric`在范围内）。因此，您实际上需要为每个数字类型定义 AzaveaNumericWrapper 的隐式单例实例。假设您有类型`MyType`并且`MyOtherType`您定义了以下实例`com.azavea.math.Numeric`：

```
implicit object MyTypeIsNumeric extends AzaveaNumericWrapper[MyType]
implicit object MyOtherTypeIsNumeric extends AzaveaNumericWrapper[MyOtherType]
//... 
```

另外，请记住，azavea 的 Numeric 类的明显主要目的是大大提高执行速度（主要是由于类型参数的专门化）。使用上面的包装器，您会失去专业化，从而失去它的速度。必须一直使用特化，一旦你调用了一个非特化的泛型方法，你就进入了非特化泛型的世界（即使该方法随后回调了一个特化方法）。因此，在速度很重要的情况下，请尝试`Numeric`直接使用 azavea 而不是 scala `Numeric`（仅仅因为 AzaveaNumericWrapper 在内部使用它并不意味着您将获得任何速度提升，因为这里不会发生专业化）。

您可能已经注意到，我在示例中避免定义`AzaveaNumericWrapper`for types`Int`的实例`Long`等等。这是因为（在标准库中）这些类型的 scala.math.Numeric 的隐式值已经存在。您可能很想隐藏它们（通过类似的东西`import scala.math.Numeric.{ShortIsIntegral => _}`），以确保使用您自己的（azavea 支持的）版本，但没有意义。我能想到的唯一原因是让它运行得更快，但如上所述，它不会。

# mspec - 我可以在 Cleanup 中抛出异常以使测试失败吗？

> ID：13120779
> 
> 赞同：1
> 
> 时间：2012-10-29T11:31:02.650
> 
> 标签：mspec

我正在使用 WebDriver 和 MSpec 运行一些 UI 测试。我在 Cleanup 中添加了一个没有引发 JavaScript 错误的检查。但是，在这里抛出异常不会使测试失败。我怎样才能让它工作？我需要通过任何测试，并且真的不想在每个测试中单独执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T16:30:27.043

如果我没记错的话，真的没有办法在清理中做到这一点。清理发生*在*测试之后，因此失败为时已晚。作为一个原则问题，最好将断言编写为它不会引发任何 javascript 错误作为它自己的规范在它们每个的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T03:07:35.540

即使可以从清理代码中完成，也不应该那样做。原因：你怎么知道你失败的多个测试中的哪一个？

# cuda - 我的GTX680真的有表现吗

> ID：13120781
> 
> 赞同：4
> 
> 时间：2012-10-29T11:31:20.357
> 
> 标签：cuda

我正在尝试测试我的 GTX680 的计算性能，因为我怀疑它的实际性能如何。我想知道如果给出相同的结果，是否有人也可以在他的 GTX 680 上进行测试，或者告诉我可以做得更好以从卡中获得更多性能

我写了这个小程序

```
#include <stdlib.h>
#include <stdio.h>
#include <float.h>
#include "cuComplex.h"
#include "time.h"
#include "cuda_runtime.h"
#include <iostream>
using namespace std;
__global__ void test(int loop, int *out)
{
    register int a=0;
    for (int x=0;x<loop;x++)
    {
        a+=x*loop;
    }

    if (out!=NULL) *out=a;

}
int main(int argc, char *argv[])
{
    float timestamp;
    cudaEvent_t event_start,event_stop;
    // Initialise
    cudaDeviceReset();
    cudaDeviceReset();
    cudaSetDevice(0);
    cudaThreadSetCacheConfig(cudaFuncCachePreferShared);        
    // Allocate and generate buffers
    cudaEventCreate(&event_start);
    cudaEventCreate(&event_stop);
    cudaEventRecord(event_start, 0);
    dim3 threadsPerBlock;
    dim3 blocks;
    int b=1000; 
    threadsPerBlock.x=32;
    threadsPerBlock.y=32;
    threadsPerBlock.z=1;
    blocks.x=1;
    blocks.y=1000;
    blocks.z=1;

    test<<<blocks,threadsPerBlock,0>>>(300,
            NULL
            );

    cudaEventRecord(event_stop, 0);
    cudaEventSynchronize(event_stop);
    cudaEventElapsedTime(&timestamp, event_start, event_stop);
    printf("Calculated in %f", timestamp);
} 
```

用 nvcc 编译我得到这个 PTX

```
//
// Generated by NVIDIA NVVM Compiler
// Compiler built on Sat Sep 22 02:35:14 2012 (1348274114)
// Cuda compilation tools, release 5.0, V0.2.1221
//

.version 3.1
.target sm_30
.address_size 64

    .file   1 "/tmp/tmpxft_00000e7b_00000000-9_perf.cpp3.i"
    .file   2 "/opt/home/daniel/a/perf.cu"

 .visible .entry _Z4testiPi(
    .param .u32 _Z4testiPi_param_0,
    .param .u64 _Z4testiPi_param_1
 )
 {
    .reg .pred      %p<4>;
    .reg .s32       %r<15>;
    .reg .s64       %rd<3>;

    ld.param.u32    %r6, [_Z4testiPi_param_0];
    ld.param.u64    %rd2, [_Z4testiPi_param_1];
    cvta.to.global.u64      %rd1, %rd2;
    mov.u32         %r13, 0;
    .loc 2 12 1
    setp.lt.s32     %p1, %r6, 1;
    mov.u32         %r14, %r13;
    mov.u32         %r11, %r13;
    @%p1 bra        BB0_2;

 BB0_1:
    .loc 2 14 1
    mad.lo.s32      %r14, %r11, %r6, %r14;
    .loc 2 12 20
    add.s32         %r11, %r11, 1;
    .loc 2 12 1
    setp.lt.s32     %p2, %r11, %r6;
    mov.u32         %r13, %r14;
    @%p2 bra        BB0_1;

 BB0_2:
    .loc 2 18 1
    setp.eq.s64     %p3, %rd2, 0;
    @%p3 bra        BB0_4;

    .loc 2 18 1
    st.global.u32   [%rd1], %r13;

 BB0_4:
    .loc 2 21 2
    ret; 
 } 
```

内核运行时间为 1.936ms

我的计算表明 GFLOPS 性能为 1.1 TFLOP，仅为 3TFLOPS 理论值的三分之一（参考：[http](http://www.geforce.com/hardware/desktop-gpus/geforce-gtx-680) ://www.geforce.com/hardware/desktop-gpus/geforce-gtx-680 ）.. 为什么这么慢?

我的计算细节如下

```
mad.lo.s32      %r14, %r11, %r6, %r14;  //2 FLOPS
.loc 2 12 20
 add.s32         %r11, %r11, 1;     //1 FLOP
.loc 2 12 1
 setp.lt.s32     %p2, %r11, %r6;    //1 FLOP
 mov.u32         %r13, %r14;        // 1 FLOP
 @%p2 bra        BB0_1;             //1 FLOP

 + 1 FLOP (just as a buffer as I don't know branching how much it takes) 
```

循环中 1 次迭代的总 FLOPS 为 7 FLOPS

只考虑迭代

我们每个线程有 300 次迭代 我们有 1024*1000 个块

总迭代 FLOPS = 300*1024*1000*7 = 2.15 GFLOPS

总内核时间为 1.936ms

因此吞吐量 = 1.11 TFLOPS

提前感谢您的帮助

丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:10:14.623

这个示例程序建立在@Robert Crovella 的答案之上。Robert 的内核受到数据依赖性的限制。通过减少 FMA 指令之间的数据依赖性，这个内核应该在 GTX680 上实现 2.4-2.5 TFLOPS。

当前的实现是指令获取和数据依赖性受限。内核应该能够被调整以将实现的 FLOPS 再提高 10%。

Nsight Visual Studio Edition 2.x 和新的 3.0 RC 候选版本提供了分析此内核所需的指标。

在 2.x 和 3.0 中，您应该使用以下实验来分析内核：

1.  指令统计 - SM 活动 - 验证所有 SM 是否接近 100%
2.  发布效率 - 合格 Warps - 在 Kepler 上 每个活动周期的合格 Warps 必须大于 4，以便每个 warp 调度程序在每个周期发出一条指令。
3.  问题效率 - 问题停顿 - Warp 问题效率将指定每个 warp 调度程序由于合格的 warp 数量不足而无法发出的频率。如果这个值很高，那么问题失速原因将有助于识别限制器。
4.  实现的 FLOPs - 这显示了内核执行的单精度和双精度浮点运算的类型和速率的细分。

在 Robert 的内核中，执行依赖性非常高，因为每条指令都具有读写依赖性。通过增加指令级并行性，我们将性能提高了两倍。内核现在主要是指令获取受限。

新的 Nsight VSE 3.0 RC（今天可用）还将显示带有每条指令统计注释的程序集或源代码，例如执行的指令数和每条指令的活动线程数。在此示例中，该工具可用于识别数据依赖性并确保编译器正在生成 FMA 指令，这些指令需要达到大于 50% 的理论实现 FLOPS。

```
__global__ void test(float loop, float *out)
{
    register float a=1.0f;
    register float b=1.0f;
    register float c=1.0f;
    register float d=1.0f;
    register float e=1.0f;
    register float f=1.0f;
    register float g=1.0f;
    register float h=1.0f;

    for (float x=0;x<loop;x++)
    {
        a+=x*loop;
        b+=x*loop;
        c+=x*loop;
        d+=x*loop;
        e+=x*loop;
        f+=x*loop;
        g+=x*loop;
        h+=x*loop;

        a+=x*loop;
        b+=x*loop;
        c+=x*loop;
        d+=x*loop;
        e+=x*loop;
        f+=x*loop;
        g+=x*loop;
        h+=x*loop;

        a+=x*loop;
        b+=x*loop;
        c+=x*loop;
        d+=x*loop;
        e+=x*loop;
        f+=x*loop;
        g+=x*loop;
        h+=x*loop;

        a+=x*loop;
        b+=x*loop;
        c+=x*loop;
        d+=x*loop;
        e+=x*loop;
        f+=x*loop;
        g+=x*loop;
        h+=x*loop;

        a+=x*loop;
        b+=x*loop;
        c+=x*loop;
        d+=x*loop;
        e+=x*loop;
        f+=x*loop;
        g+=x*loop;
        h+=x*loop;
    }
    if (out!=NULL) *out=a+b+c+d+e+f+g+h;
}

int main(int argc, char *argv[])
{
    float timestamp;
    cudaEvent_t event_start,event_stop;
    // Initialise
    cudaDeviceReset();
    cudaSetDevice(0);
    cudaThreadSetCacheConfig(cudaFuncCachePreferShared);
    // Allocate and generate buffers
    cudaEventCreate(&event_start);
    cudaEventCreate(&event_stop);
    cudaEventRecord(event_start, 0);
    dim3 threadsPerBlock;
    dim3 blocks;
    threadsPerBlock.x=32;
    threadsPerBlock.y=32;
    threadsPerBlock.z=1;
    blocks.x=1;
    blocks.y=1000;
    blocks.z=1;

    test<<<blocks,threadsPerBlock,0>>>(30,NULL);

    cudaEventRecord(event_stop, 0);
    cudaEventSynchronize(event_stop);
    cudaEventElapsedTime(&timestamp, event_start, event_stop);
    printf("Calculated in %f\n", timestamp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T06:51:06.357

我认为问题在于您使用的是整数乘法。计算能力 3.0 架构上的 32 位整数乘法仅是 32 位浮点吞吐量的 1/6（请参阅下表，取自 CUDA C 编程指南 5.5 版）。将 32 位整数乘法性能与 3.0 架构的 32 位浮点性能进行比较。

其他一些主要用于计算应用程序的整数运算和类型转换在 3.0 上也同样降低了性能。

![在此处输入图像描述](../Images/29316b5cb8c22200aca04799be3d3d10.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:23:44.747

您的测试内核正在执行整数运算，而不是浮点运算。所以 FLOPS 是该内核的错误指标。

```
FLOPS = FLoating point Operations Per Second 
```

回到最初的问题，您的内核很慢，因为 GPU 针对浮点计算进行了优化，而不是整数计算。

要进行正确的测试，请尝试将测试内核转换为使用浮点数，而不是整数。

此外，在将 FLOPS 注释到步骤的循环中，FLOPS 再次没有意义，因为它是每秒测量值，并且是整数运算。转换后，只需将它们计为单独的浮点运算，而不是每秒的浮点运算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:11:50.513

看看您是否使用此代码获得了更好的结果。这只是一个例子，它与你的代码做的事情并不完全相同，我认为你必须重新计算失败。

```
#include <stdio.h>
using namespace std;
__global__ void test(float loop, float *out)
{
    register float a=1.0f;
    for (float x=0;x<loop;x++)
    {
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
        a+=x*loop;
    }

    if (out!=NULL) *out=a;

}
int main(int argc, char *argv[])
{
    float timestamp;
    cudaEvent_t event_start,event_stop;
    // Initialise
    cudaDeviceReset();
    cudaSetDevice(0);
    cudaThreadSetCacheConfig(cudaFuncCachePreferShared);
    // Allocate and generate buffers
    cudaEventCreate(&event_start);
    cudaEventCreate(&event_stop);
    cudaEventRecord(event_start, 0);
    dim3 threadsPerBlock;
    dim3 blocks;
    threadsPerBlock.x=32;
    threadsPerBlock.y=32;
    threadsPerBlock.z=1;
    blocks.x=1;
    blocks.y=1000;
    blocks.z=1;

    test<<<blocks,threadsPerBlock,0>>>(30,
            NULL
            );

    cudaEventRecord(event_stop, 0);
    cudaEventSynchronize(event_stop);
    cudaEventElapsedTime(&timestamp, event_start, event_stop);
    printf("Calculated in %f\n", timestamp);
} 
```

当我用 arch = sm_20 或 sm_30 编译它时，我在内核循环中连续获得 10 条 fma 指令，没有中间代码。我认为它会比你的代码运行得更快，更接近理论失败的峰值。是的，整数 OPs/秒和浮点 OPs/秒之间存在差异。如果您确实运行此代码，请回复评论并让我知道您计算的性能是什么。

# android - Android：从相机拍摄照片后获取照片路径

> ID：13120784
> 
> 赞同：0
> 
> 时间：2012-10-29T11:31:28.490
> 
> 标签：android, image, android-camera, android-camera-intent

我正在使用相机意图打开相机：

```
Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

现在我正在尝试获取捕获照片的路径，但它的抛出错误：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
if (requestCode == CAMERA_REQUEST) {
Uri uri = data.getData();
String imagePath = getRealPathFromURI(uri);
}
}

private String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
// import android.support.v4.content.CursorLoader; i import this for CursorLoader
    CursorLoader loader = new CursorLoader(getApplicationContext(), contentUri, proj, null, null, null);
    Cursor cursor = loader.loadInBackground();
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

它的抛出错误是：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100,     result=-1, data=Intent { act=inline-data (has extras) }} to activity  {com.xxx.xxx.BbmpActivity}: java.lang.NullPointerException

at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
at android.app.ActivityThread.access$2000(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
at android.os.Handler.dispatchMessage(Handler.java:99)  
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)    
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)     
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException   
at android.content.ContentResolver.acquireProvider(ContentResolver.java:743)    
at android.content.ContentResolver.query(ContentResolver.java:256)
at android.support.v4.content.CursorLoader.loadInBackground(CursorLoader.java:49)
at com.pixel.bbmp.BbmpActivity.getRealPathFromURI2(BbmpActivity.java:546)
at com.pixel.bbmp.BbmpActivity.onActivityResult(BbmpActivity.java:491)  
at android.app.Activity.dispatchActivityResult(Activity.java:3908)  
at android.app.ActivityThread.deliverResults(ActivityThread.java:2532) 
```

我认为因为这条线它抛出错误：

```
CursorLoader loader = new CursorLoader(getApplicationContext(), contentUri, proj, null, null, null); 
```

在这里我需要提供而不是 getApplicationContext() 我也尝试了这个，但直到它抛出错误：

```
CursorLoader loader = new CursorLoader(this, contentUri, proj, null, null, null); 
```

当我启动此应用程序时，它会引发一个错误，即：

```
Could not find class 'android.content.CursorLoader', referenced from method com.xxx.xxx.BbmpActivity.getRealPathFromURI 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:50:57.443

而不是`Uri uri = data.getData();`像这样写..

```
if(data!=null){
  if (requestCode == CAMERA_REQUEST) {  
           Uri uri =  data.getExtras().get("data"); 
         //or...
     Bitmap bitmapPicture = (Bitmap) data.getExtras().get("data"); 
     // other code
}
} 
```

它会正常工作。主要的是`data.getExtras().get("data");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T10:17:00.227

您可以在设置捕获意图之前指定一个 URI：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(this.mCameraFile));
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

其中 mCameraFile 是我创建的文件：

```
this.mCameraFile = File.createTempFile("toto", "jpg", fAlbum); 
```

其中 fAlbum 是一个代表我的专辑文件夹的文件：

```
this.fAlbum = Environment.getExternalStorageDirectory() + "/dcim/" + "tata"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T17:50:41.543

```
CursorLoader loader = new CursorLoader(getApplicationContext(), 
MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
proj, null, null, null); 
```

# google-maps-api-3 - 谷歌地图异步

> ID：13120786
> 
> 赞同：0
> 
> 时间：2012-10-29T11:31:35.813
> 
> 标签：google-maps-api-3, asynchronous

我有一个我正在使用的谷歌地图脚本，它可以很好地使用脚本标签声明谷歌地图，但我想异步加载它并且在进行更改时遇到了麻烦。这是我目前拥有的：

```
//<![CDATA[ 
$(window).load(function(){
var locations = [
[
"850 Boylston Street",
"Chestnut Hill, MA 02467",
"42.326435",
"-71.149499"
],
[
"Subway Brookline Village",
"Green Line, D",
"42.33279",
"-71.11630"
],
[
"Shuttle Brookline Village",
"10 Brookline Place",
"42.33262",
"-71.116439"
],
[
"Subway Chestnut Hill",
"Green Line, B",
"42.338164",
"-71.153164"
],
[
"Subway Cleveland Circle",
"Green Line, C",
"42.336145",
"-71.149323"
],
[
"Subway Reservoir",
"Green Line, D",
"42.335132",
"-71.148762"
],
[
"Bus 51 Reservoir",
"Pick up from Subway",
"42.335021",
"-71.148988"
],
[
"Bus 51 Route 9",
"Drop off Route 9",
"42.326499",
"-71.142588"
], 

[
"75 Francis Street",
"Boston, MA 02115",
"42.33619",
"-71.10705"
],
[
"Shuttle Longwood",
"Shapiro Building",
"42.33603",
"-71.10779"
],
[
"Subway Longwood",
"Green Line, D",
"42.34113",
"-71.11044"
],
[
"Subway Brigham Circle",
"Green Line, E",
"42.33422",
"-71.10455"
],
[
"Parking Garage",
"70 Francis Street",
"42.33422",
"-71.10455"
],

[
"20 Patriots Place",
"Foxboro, MA 02035",
"42.09254",
"-71.26629"
]
];

gmarkers = [];

var map = new google.maps.Map(document.getElementById('map'), {
zoom: 16,
center: new google.maps.LatLng(42.326435, -71.149499),
mapTypeId: google.maps.MapTypeId.ROADMAP,
mapTypeControl:false
});

var infowindow = new google.maps.InfoWindow();

function createMarker(latlng, html) {
var marker = new google.maps.Marker({
    position: latlng,
    map: map
});

google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(html);
    infowindow.open(map, marker);
});
return marker;
}

for (var i = 0; i < locations.length; i++) {
/*    alert("location:"+
      locations[i][0]+":"+locations[i][2]+","+locations[i][3]);
*/
gmarkers[locations[i][0]]=
createMarker(new google.maps.LatLng(locations[i][2], locations[i][3]), locations[i][0]     
+ "<br>" + locations[i][1]);
}

/*                                                    
$(function() {
$('#locations h3 a').each(function() { 
    $(this).on('click', function() { 
        google.maps.event.trigger(marker, 'click');    
    })    
  });    
});

*/
});//]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:05:10.477

你有两个选择

1.  如此处所述注入脚本标记： [https ://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API](https://developers.google.com/maps/documentation/javascript/tutorial#Loading_the_Maps_API)

2.  使用 AjaxLoader：

[https://google-developers.appspot.com/loader/](https://google-developers.appspot.com/loader/)

你会添加：

```
<script type="text/javascript" src="http://www.google.com/jsapi"> </script> 
```

在页面顶部，然后使用以下命令加载地图：

```
google.load("maps","3.9", {"other_params":"sensor=false"}); 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T18:54:56.497

```
 <script type="text/javascript">
        var map;

        function initialize() {
            var mapOpt = {
                /* le coordinate di partenza si possono impostare dal db */
                center: new google.maps.LatLng(42, 12),
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("googleMap"), mapOpt);

        } 
```

...在您的 html 中引用元素“< div id="googleMap">”

# android - 新的/新鲜的 Eclipse 应用程序出错？

> ID：13120788
> 
> 赞同：0
> 
> 时间：2012-10-29T11:31:41.997
> 
> 标签：android, eclipse

没什么花哨的东西，似乎在 Go0gle 上找不到答案，那么这个错误是什么意思？我对 Eclipse 和 android 编程非常陌生，我刚刚创建了一个新项目，没有更改任何文件中的任何内容，我只是单击调试以查看是否一切正常，这是我得到的错误：

```
Description Resource    Path    Location    Type
The method onTabReselected(ActionBar.Tab, FragmentTransaction) of type MainActivity must override a superclass method   MainActivity.java   /WFApp/src/com/example/wfapp    line 93 Java Problem 
```

我不知道这是什么意思。我正在使用 eclipse/android/cordova/html5/javascript/css3。

但就像我说的，我还没有开始编码。任何链接或建议将不胜感激。

MainActivity.java ：

```
 package com.example.wfapp;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.title_section1).toUpperCase();
                case 1: return getString(R.string.title_section2).toUpperCase();
                case 2: return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        public DummySectionFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            Bundle args = getArguments();
            textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
            return textView;
        }
    }
} 
```

编辑为 include.java 文件！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:40:23.893

这是Java编译器的问题。编译器合规级别 1.5 不允许`@Override`对实现接口方法的类进行注释。在 Eclipse 中，转到项目属性，选择 Java 编译器并将编译器合规级别更改为 1.6 或 1.7。

# c# - C# - 通过引用构造函数传递参数，然后从方法中使用它们

> ID：13120789
> 
> 赞同：13
> 
> 时间：2012-10-29T11:31:58.147
> 
> 标签：c#, methods, reference, constructor, parameter-passing

在下面的代码中，我试图让 TestClass 类中的方法（Work）更改主程序中某些变量的值，而不必返回它们。变量在 TestClass 构造函数中通过引用传递。

```
class Program
{
    static void Main(string[] args)
    {
        int a, b, c, d;
        a = 5; b = 10; c = 20; d = 25;
        Console.WriteLine("Main before TestClass: a=" + a + " b=" + b + " c=" + c + " d=" + d);
        TestClass testObj = new TestClass(ref a,ref b,ref c,ref d);
        testObj.Work();
        Console.WriteLine("Main after TestClass: a=" + a + " b=" + b + " c=" + c + " d=" + d);
        Console.ReadLine();
    }
}

public class TestClass
{
    int _a, _b, _c, _d;
    public TestClass(ref int a, ref int b, ref int c, ref int d)
    {
        _a = a; _b = b; _c = c; _d = d;
    }

    public void Work()
    {
        Console.WriteLine("Work before changing: a=" + _a + " b=" + _b + " c=" + _c + " d=" + _d);
        _a = 0; _b = 1; _c = 2; _d = 3;
        Console.WriteLine("Work after changing: a=" + _a + " b=" + _b + " c=" + _c + " d=" + _d);
    }
} 
```

但是此代码返回：

```
Main before TestClass: a=5 b=10 c=20 d=25
Work before changing: a=5 b=10 c=20 d=25
Work after changing: a=0 b=1 c=2 d=3
Main after TestClass: a=5 b=10 c=20 d=25 
```

有没有办法让方法改变主程序中变量的值？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:39:53.203

不可能。您不能将对 an 的引用存储`int`为成员，而只是`int a`一个副本 - 对副本的更改不会更改原始文件，正如您所看到的。

您可以将其包装`int`在一个类中。您可以存储对该类的引用并对其进行操作。

```
public class IntWrapper
{
    public IntWrapper( int val = 0 ) { Value = val; }
    public int Value { get; set; }
}

static void Main(string[] args)
{
    IntWrapper a = new IntWrapper(5);
    TestClass testObj = new TestClass(a);
    testObj.Work();
}

public class TestClass
{
    IntWrapper _a;
    public TestClass(IntWrapper a)
    {
        _a = a;
    }

    public void Work()
    {
        Console.WriteLine("Work before changing: a=" + _a.Value);
        _a.Value = 0;
        Console.WriteLine("Work after changing: a=" + _a.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T11:44:54.060

您最好在 Int32 上创建自己的包装器以反映更改，因为一旦将值分配给类的字段，它们就不再是引用，而是 Int32 的不同实例。考虑以下代码：

```
class Integer {
    public int Value;

    public Integer(int value) {
        Value = value;
    }

    public override string ToString() {
        return Value.ToString();
    }
}

class TestClass {
    Integer _a, _b, _c, _d;

    public TestClass(Integer a, Integer b, Integer c, Integer d) {
        _a = a;
        _b = b;
        _c = c;
        _d = d;
    }

    public void Work() {
        _a.Value = 111;
        _b.Value = 222;
        _c.Value = 333;
        _d.Value = 444;
    }
} 
```

所以现在你有了一个 Integer——一个 Int32 上的包装类。使用会给你带来结果：

```
Integer a = new Integer(0), b = new Integer(0), c = new Integer(0), d = new Integer(0);
Console.WriteLine("a: {0}, b: {1}, c: {2}, d: {3}", a, b, c, d);
new TestClass(a, b, c, d).Work();
Console.WriteLine("a: {0}, b: {1}, c: {2}, d: {3}", a, b, c, d); 
```

输出是：

```
a: 0, b: 0, c: 0, d: 0
a: 111, b: 222, c: 333, d: 444 
```

您可能还会发现阅读有关 C# 中的类和结构的更多信息很有用，例如[http://msdn.microsoft.com/en-us/library/ms173109.aspx](http://msdn.microsoft.com/en-us/library/ms173109.aspx)。（Int32 是一个结构，而在您的情况下，您可能需要一个类）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T11:42:56.700

您尝试做的事情无法完成，因为它并非旨在以这种方式使用。您必须让参数`Work`直接进入方法，例如

```
testObj.Work(ref a, ref b, ref c, ref d); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T11:51:28.677

此行为是由以下原因引起的：

```
int _a, _b, _c, _d;
public TestClass(ref int a, ref int b, ref int c, ref int d)
{
    _a = a; _b = b; _c = c; _d = d;
} 
```

`int`是一个结构（一个值类型）。这意味着即使您使用 ref 关键字，您也不会像预期的那样将引用（或指针）传递给字段。相反，您正在做的是将作为输入给出的整数值分配给字段，仅此而已。
要实现您所期望的，您必须在实际更改其值的方法中使用引用类型（将整数包装到类中）或引用整数（通过 ref 关键字）：

```
public void Work(ref int a, ref int b, ref int c, ref int d)
{
   Console.WriteLine("Work before changing: a=" + a + " b=" + b + " c=" + c + " d=" + _d);
   a = 0; b = 1; c = 2; d = 3;
   Console.WriteLine("Work after changing: a=" + a + " b=" + b + " c=" + c + " d=" + _d);
} 
```

> 引用传递的效果是被调用方法中参数的任何改变**都会**反映在**调用**方法中。

 **要了解有关 ref 关键字的更多信息，请查看：[ref (C# Reference)](https://msdn.microsoft.com/en-us/library/14akc2c7.aspx)。**

# windows - 安装 Windows 8 SDK 时出错

> ID：13120791
> 
> 赞同：4
> 
> 时间：2012-10-29T11:32:05.330
> 
> 标签：windows, visual-studio, winapi

我正在尝试安装 Windows 8 [SDK](http://en.wikipedia.org/wiki/Software_development_kit)。根据安装程序的要求，我卸载了 Windows 7 SDK 并开始安装。安装程序退出并出现错误：

> 您必须先卸载 Windows 软件开发工具包，然后才能安装该工具包的最新版本。

除了 Windows 7 SDK，我还需要卸载哪些组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T17:46:15.490

我遇到了类似的问题。当 Windows 8 SDK 安装失败时，将显示一个“显示日志文件”链接。单击它，然后打开最新的日志文件。搜索您看到的错误。日志中应该有一些内容说明它找到了哪个组件。（对我来说，它是 App Verifier。）然后转到添加/删除程序并卸载该程序。您现在应该能够安装 Windows 8 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:07:11.807

如果您还没有找到答案，MSDN 文章*[Windows 8 的 Windows 软件开发工具包 (SDK)](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)*可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T08:02:54.303

我使用添加/删除程序卸载当前的 Windows 软件开发工具包，然后从 MSDN 站点下载最新版本：http: [//msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx) 并设法安装Win SDK 没有错误

# cookies - Internet Explorer 8 没有从我的本地开发版本保存 cookie

> ID：13120792
> 
> 赞同：0
> 
> 时间：2012-10-29T11:32:06.867
> 
> 标签：cookies, internet-explorer-8, session-cookies

在 Windows XP 的 IE8 中查看我的网站，cookie 工作正常。但是，当我通过本地网络连接到本地开发版本时，它不会保存 cookie。我通过我的 c:\WINDOWS\system32\drivers\etc\hosts 文件中的条目进行连接。

我对 IE8 安全设置的复杂性不是很熟悉。是否存在实时站点所做的某些事情，而本地版本没有，这意味着本地版本未通过某些安全测试，因此无法保存其 cookie？IE8 采用默认的“中-高”安全设置。我尝试将其更改为“中”（最低）并遇到同样的问题。

当我说它没有保存 cookie 时，我的意思是我正在查看 IE8 开发工具/缓存/查看 Cookie 信息页面，它完全是空的（除了站点 url） - 根本没有保存任何 cookie。

希望得到一些指示，我真的不知道从哪里开始尝试修复它。

谢谢，最大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:44:10.753

好的，想通了 - 我使用的主机名中有一个下划线。当我将其更改为连字符时，它工作正常。

谢谢阅读！

# android - 通过android中的服务播放警报

> ID：13120796
> 
> 赞同：2
> 
> 时间：2012-10-29T11:32:32.950
> 
> 标签：android, service, alarmmanager

我是 android 新手。我想在用户设置的时间到达时播放闹钟。我有闹钟活动。代码如下：

```
Intent intent = new Intent(this, AlarmReciever.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this,
    12345, intent, PendingIntent.FLAG_CANCEL_CURRENT);
AlarmManager am=(AlarmManager)getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, (cal.getTimeInMillis()/1000)+(t*60*60),
        pendingIntent);//t is the time which is contained in database 
```

我的警报接收器活动是这样的：

公共类 AlarmReciever 扩展 Activity {

```
 private MediaPlayer mMediaPlayer;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.alarmrecieve);

        Button stopAlarm = (Button) findViewById(R.id.stopAlarm);
        stopAlarm.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                mMediaPlayer.stop();
                finish();
                return false;
            }
        });
        playSound(this, getAlarmUri());
    }

    private void playSound(Context context, Uri alert) {
        mMediaPlayer = new MediaPlayer();
        try {
            mMediaPlayer.setDataSource(context, alert);
            final AudioManager audioManager = (AudioManager) context
                    .getSystemService(Context.AUDIO_SERVICE);
            if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                mMediaPlayer.prepare();
                mMediaPlayer.start();
            }
        } catch (IOException e) {
            System.out.println("OOPS");
        }
    }

        //Get an alarm sound. Try for an alarm. If none set, try notification,
        //Otherwise, ringtone.
    private Uri getAlarmUri() {
        Uri alert = RingtoneManager
                .getDefaultUri(RingtoneManager.TYPE_ALARM);
        if (alert == null) {
            alert = RingtoneManager
                    .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            if (alert == null) {
                alert = RingtoneManager
                        .getDefaultUri(RingtoneManager.TYPE_RINGTONE);
            }
        }
        return alert;
    }
} 
```

我的问题是，当用户输入时间时，警报活动应该在后台运行。时间到了，警报应该启动。我听说过服务。但我不知道它在我的项目中的实现。提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:46:56.897

是的，您可以使用`Service`. [见这里](http://www.vogella.com/articles/AndroidServices/article.html)。并通过未决意图启动服务。而不是这样的活动

```
PendingIntent pendingIntent = PendingIntent.getService(this,12345, intent,PendingIntent.FLAG_CANCEL_CURRENT); 
```

例子：

```
Intent myIntent = new Intent(Add.this, MyAlarmService.class);
        PendingIntent   pendingIntent = PendingIntent.getService(this, 12345, myIntent, 0); 
```

你的服务类将是这样的：

```
import java.util.Calendar;

import android.app.Service;
import android.content.Intent;
import android.database.Cursor;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

    public class MyAlarmService extends Service {

    @Override

    public void onCreate() {

    // TODO Auto-generated method stub

    //Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();

    }

   @Override

    public IBinder onBind(Intent intent) {

    // TODO Auto-generated method stub

    Toast.makeText(this, "MyAlarmService.onBind()", Toast.LENGTH_LONG).show();

    return null;

    }
     @Override

    public void onDestroy() {

    // TODO Auto-generated method stub

    super.onDestroy();

    Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();

    }
    @Override

    public void onStart(Intent intent, int startId) {

    // TODO Auto-generated method stub

    super.onStart(intent, startId);

    Intent dialogIntent = new Intent(getBaseContext(),AlarmReciever.class);
    dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    getApplication().startActivity(dialogIntent);

    }

    }
    @Override

    public boolean onUnbind(Intent intent) {

    // TODO Auto-generated method stub

    Toast.makeText(this, "MyAlarmService.onUnbind()", Toast.LENGTH_LONG).show();

    return super.onUnbind(intent);

    }        

    } 
```

在服务中，调用您的活动`AlarmReciever`

# c#-4.0 - 如何将实体添加到字典对象初始化程序？

> ID：13120797
> 
> 赞同：0
> 
> 时间：2012-10-29T11:32:34.107
> 
> 标签：c#-4.0

我需要传递 html 属性。

可以像这样打包成一个表达式代码吗？

```
var tempDictionary = new Dictionary<string, object> { 
   { "class", "ui-btn-test" }, 
   { "data-icon", "gear" } 
}.Add("class", "selected"); 
```

或者

```
new Dictionary<string, object> ().Add("class", "selected").Add("diabled", "diabled"); 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:59:00.767

您所指的内容称为方法链接。`Append`StringBuilder 的方法就是一个很好的例子。

```
StringBuilder b = new StringBuilder();
b.Append("test").Append("test"); 
```

这是可能的，因为 Append 方法返回一个`StringBuilder`对象

```
public unsafe StringBuilder Append(string value) 
```

但是，在您的情况下， Add 方法`Dictionary<TKey, TValue>`被标记为 void

```
public void Add(TKey key, TValue value) 
```

因此，不支持方法链接。但是，如果你真的想在添加新项目时使用方法链，你总是可以自己动手：

```
public static Dictionary<TKey, TValue> AddChain<TKey, TValue>(this Dictionary<TKey, TValue> d, TKey key, TValue value)
{
  d.Add(key, value);
  return d;
} 
```

然后你可以编写以下代码：

```
Dictionary<string, string> dict = new Dictionary<string, string>()
  .AddChain("test1", "test1")
  .AddChain("test2", "test2"); 
```

# jquery - jQuery 上的 PHP 回显

> ID：13120798
> 
> 赞同：0
> 
> 时间：2012-10-29T11:32:37.730
> 
> 标签：jquery, doctrine

在这方面需要帮助。我有点困惑。对我来说一切似乎都很好，但我仍然遇到错误

```
Parse error: syntax error, unexpected '(', expecting T_VARIABLE or '$' 
```

这是我的代码

```
echo "$('.gro-ls').click(function(){$(this).css({background:'red'})});"; 
```

有人可以告诉我这个有什么问题吗？

谢谢

编辑：所有答案都有效。多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:34:24.120

PHP[解析/扩展](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing)[双引号字符串](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)中的变量，而 $something 是一个变量。

尝试这个：

```
echo "\$('.gro-ls').click(function(){\$(this).css({background:'red'})});"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:34:35.947

改变你`"`的`'`

它应该如下所示：

```
echo '$(\'.gro-ls\').click(function(){$(this).css({background:\'red\'})});'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:34:46.993

使用单引号而不是双引号。

```
echo '$(".gro-ls").click(function(){$(this).css({background:"red"})});'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:36:20.093

由于您使用的是双引号，因此它正在查看美元符号并认为它是一个 PHP 变量。如果将双引号与单引号切换，反之亦然，它应该可以工作。

像这样：`echo '$(".gro-ls").click(function(){$(this).css({background:"red"})});';`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T11:41:37.867

尝试这个：

```
$jq = <<<JQU
$('.gro-ls').click(function(){
    $(this).css({background:'red'});
});
JQU;
echo $jq; 
```

# binding - Monodroid 绑定更改变量名

> ID：13120800
> 
> 赞同：0
> 
> 时间：2012-10-29T11:32:43.487
> 
> 标签：binding, xamarin.android, bugsense

我尝试将 BugSense 3.0.5 绑定到 MonoDroid。我创建了一个新的 Java 绑定库项目，将 bugsense3.0.5.jar 添加到 Jars 文件夹中。我构建它，并收到以下错误：

“崩溃”：成员名称不能与其封闭类型相同

```
The auto generate code:
[global::Android.Runtime.Register ("com/bugsense/trace/models/Crash", DoNotGenerateAcw=true)]
    public partial class Crash : global::Java.Lang.Object, global::Java.IO.ISerializable {

        [Register ("CRASH")]
        public const int Crash = (int) 1; 
```

所以我需要在 Metadata.xml 中重命名全局变量“Crash”——但我该怎么做呢？

我尝试过：

```
<attr path="/api/package[@name='com.bugsense.trace.models']/class[@name='Crash']/field[@name='Crash']" name="managedName">mCrash</attr> 
```

但它失败了：没有匹配的节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T10:06:19.167

您应该始终在 java 中查找原始字段名称。据我所知，它是lowerCamelCase。它可能隐藏在 setter/getter 中，所以你应该搜索`/method[@name='getCrash']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:29:13.747

修复了它重命名类

```
<attr path="/api/package[@name='com.bugsense.trace.models']/class[@name='Crash']]" name="managedName">Crashed</attr> 
```

# git - Capistrano 没有创建符号链接

> ID：13120801
> 
> 赞同：0
> 
> 时间：2012-10-29T11:32:44.247
> 
> 标签：git, deployment, capistrano

我创建了一个 cap 文件来部署一个站点，除了没有创建符号链接之外，它一切正常，我最近格式化了我的计算机，所以语法可能已经改变，我不确定。

```
namespace :myproject do
    task :symlink, :roles => :app do
       run "ln -nfs #{shared_path}/site_files/apache_password/.htaccess #{release_path}/src/public"
       run "ln -nfs #{shared_path}/site_files/tmp #{release_path}/src/private/app/tmp"
       run "ln -nfs #{shared_path}/site_files/media #{release_path}/src/public/media"
       run "ln -nfs #{shared_path}/site_files/Config/database.php #{release_path}/src/private/app/Config/database.php"
       run "ln -nfs #{shared_path}/site_files/Config/core.php #{release_path}/src/private/app/Config/core.php"
    end
end

after "deploy:symlink", "myproject:symlink" 
```

终端响应：

```
* 2012-10-29 11:27:10 executing `deploy:symlink'
* executing "rm -f /var/www/SITENAME/current && ln -s /var/www/SITENAME/releases/20121029112219 /var/www/SITENAME/current"
    servers: ["SERVERNAME"]
        [SERVERNAME] executing command 
    command finished in 74ms 
```

# web-services - JAX RS 中的自动编组

> ID：13120803
> 
> 赞同：1
> 
> 时间：2012-10-29T11:32:50.650
> 
> 标签：web-services, rest, wsgen

我曾使用 Jax WS 并使用 wsgen 和 wsimport 来自动编组自定义类型。我也可以将 wsgen 与 JaxRS 一起使用吗？如果是这样，我应该将 wsgen 生成的文件放在哪里以及如何引用它们？我只是不想自己处理使用 JAXB 并使用 wsgen 作为快捷方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:46:17.297

默认情况下，JAX-RS 实现将使用 JAXB 将域对象与 XML 转换为`application/xml`媒体类型。在下面的示例中，`JAXBContext`将在`Customer`类上创建 a，因为它在 RESTful 操作中显示为参数和/或返回类型。

```
package org.example;

import java.util.List;

import javax.ejb.*;
import javax.persistence.*;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Stateless
@LocalBean
@Path("/customers")
public class CustomerService {

    @PersistenceContext(unitName="CustomerService",
                        type=PersistenceContextType.TRANSACTION)
    EntityManager entityManager;

    @POST
    @Consumes(MediaType.APPLICATION_XML)
    public void create(Customer customer) {
        entityManager.persist(customer);
    }

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("{id}")
    public Customer read(@PathParam("id") long id) {
        return entityManager.find(Customer.class, id);
    }

} 
```

在`JAXBContext`单个类上创建的也将为所有传递引用类创建元数据，但这可能不会引入从 XML 模式生成的所有内容。您将需要利用 JAX-RS 上下文解析器机制。

```
package org.example;

import java.util.*;
import javax.ws.rs.Produces;
import javax.ws.rs.ext.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

@Provider
@Produces("application/xml")
public class CustomerContextResolver implements ContextResolver<JAXBContext> {

    private JAXBContext jc;

    public CustomerContextResolver() {
        try {
            jc = JAXBContext.newInstance("com.example.customer" , Customer.class.getClassLoader());
        } catch(JAXBException e) {
            throw new RuntimeException(e);
        }
    }

    public JAXBContext getContext(Class<?> clazz) {
        if(Customer.class == clazz) {
            return jc;
        }
        return null;
    }

} 
```

# android - 安卓二维码生成

> ID：13120806
> 
> 赞同：-8
> 
> 时间：2012-10-29T11:32:55.480
> 
> 标签：android, qr-code

Android 二维码生成数字

```
com.google.zxing.Writer writer = new UPCAWriter();
String finaldata = Uri.encode(data, characterEncoding);
BitMatrix bm = writer.encode(finaldata, mBarcodeFormat, bitmapWidth,bitmapHeight);
ImageBitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight,Config.ARGB_8888);

for (int i = 0; i < bitmapWidth; i++) {
for (int j = 0; j < bitmapHeight; j++) {
    ImageBitmap.setPixel(i, j, bm.get(i, j) ? Color.BLACK: Color.WHITE);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:37:00.957

试试这个

```
public void generateQRCode_general(String data, ImageView img)throws WriterException {
    com.google.zxing.Writer writer = new QRCodeWriter();
    String finaldata = Uri.encode(data, characterEncoding);

    BitMatrix bm = writer.encode(finaldata, BarcodeFormat.QR_CODE,bitmapWidth, bitmapHeight);
    ImageBitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight,Config.ARGB_8888);

    for (int i = 0; i < bitmapWidth; i++) {
        for (int j = 0; j < bitmapHeight; j++) {
            ImageBitmap.setPixel(i, j, bm.get(i, j) ? Color.BLACK: Color.WHITE);
        }
    }

    if (ImageBitmap != null) {
        img.setImageBitmap(ImageBitmap);
    } else {
        Toast.makeText(activity,"Uable to setImageBitmap \n ImageBitmap is NULL",Toast.LENGTH_LONG).show();
    }
} 
```

对于数字使用这个

```
com.google.zxing.Writer writer = new UPCAWriter();
String finaldata = Uri.encode(data, characterEncoding);
    BitMatrix bm = writer.encode(finaldata, mBarcodeFormat, bitmapWidth,bitmapHeight);
    ImageBitmap = Bitmap.createBitmap(bitmapWidth, bitmapHeight,Config.ARGB_8888);

    for (int i = 0; i < bitmapWidth; i++) {
        for (int j = 0; j < bitmapHeight; j++) {
            ImageBitmap.setPixel(i, j, bm.get(i, j) ? Color.BLACK: Color.WHITE);
        }
    } 
```

UPCA 有 12 个号码的限制

# javascript - window.focus() 不适用于 Firefox 驱动程序

> ID：13120808
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:03.060
> 
> 标签：javascript, firefox, webdriver, driver

使用以下代码使窗口聚焦，它在 Internet Explorer 上运行良好，但不适用于 Firefox。任何建议将不胜感激。

```
((JavascriptExecutor)driver).executeScript("window.focus()");

Firefox version: 5.0.1
Webdriver version: 2.25 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:37:56.173

如果设置了安全选项，Firefox 只会服从引发窗口的请求，并且默认情况下未设置。

具体的 Firefox 设置在 "Tools" -> "Options" 中。有一个“内容”选项卡是一个“高级”按钮，它会弹出另一个对话框，在其中找到一个复选框以允许（或禁止）通过页面代码提升和降低窗口。

# asp.net-mvc-3 - 通过mvc3导出到excel

> ID：13120809
> 
> 赞同：2
> 
> 时间：2012-10-29T11:33:04.953
> 
> 标签：asp.net-mvc-3, openxml, export-to-excel

大家好，我正在尝试以 mvc3 中的表格形式将一些数据导出到 excel。这是我用来生成 excel 文件的类：

```
//------------------------------------------------------------------------------
// <copyright file="ExcelDocument.cs" company="Microsoft">
//     Copyright (c) Microsoft Corporation.  All rights reserved.
// </copyright>
// <summary>The Export to Excel Document class.</summary>
//  ----------------------------------------------------------------------------
namespace ExporToExcel.Controllers.ControllerExtensions
{
    using System;
    using System.IO;
    using System.Linq;
    using DocumentFormat.OpenXml;
    using DocumentFormat.OpenXml.Extensions;
    using DocumentFormat.OpenXml.Packaging;
    using DocumentFormat.OpenXml.Spreadsheet;

    /// <summary>
    /// Excel document.
    /// </summary>
    public static class ExcelDocument
    {
        /// <summary>
        /// Default spread sheet name. 
        /// </summary>
        private const string DefaultSheetName = "Sheet1";

        /// <summary>
        /// Create the exel document for streaming.
        /// </summary>
        /// <param name="documentName">Excel file name.</param>
        /// <param name="excelWorkSheetName">Excel worksheet name: default: sheet1.</param>
        /// <param name="rowData">Row data to write.</param>
        /// <param name="headerData">Header data.</param>
        /// <param name="rowPointers">Row pointers.</param>
        /// <returns>Memory stream.</returns>
        public static MemoryStream Create(string documentName, string excelWorkSheetName, IQueryable rowData, string[] headerData, string[] rowPointers)
        {
            return CreateSpreadSheet(documentName, excelWorkSheetName, rowData, headerData, rowPointers, null);
        }

        /// <summary>
        /// Create the spreadsheet.
        /// </summary>
        /// <param name="documentName">Excel file name.</param>
        /// <param name="excelWorkSheetName">Excel worksheet name: default: sheet1.</param>
        /// <param name="rowData">Row data to write.</param>
        /// <param name="headerData">Header data.</param>
        /// <param name="rowPointers">Row pointers.</param>
        /// <param name="styleSheet">Style sheet.</param>
        /// <returns>Memory stream.</returns>
        private static MemoryStream CreateSpreadSheet(string documentName, string excelWorkSheetName, IQueryable rowData, string[] headerData, string[] rowPointers, Stylesheet styleSheet)
        {
            int rowNum = 0;
            int colNum = 0;
            int maxWidth = 0;
            int minCol = 1;
            int maxCol = rowPointers == null ? minCol : rowPointers.Length;
            maxCol = maxCol == 1 && headerData == null ? 1 : headerData.Length;

            MemoryStream xmlStream = SpreadsheetReader.Create();
            SpreadsheetDocument spreadSheet = SpreadsheetDocument.Open(xmlStream, true);

            SetSheetName(excelWorkSheetName, spreadSheet);

            if (styleSheet == null)
            {
                SetStyleSheet(spreadSheet);
            }
            else
            {
                spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet = styleSheet;
                spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet.Save();
            }

            WorksheetPart worksheetPart = SpreadsheetReader.GetWorksheetPartByName(spreadSheet, excelWorkSheetName);

            WriteHeaders(headerData, out rowNum, out colNum, out maxWidth, spreadSheet, worksheetPart);
            AddCellWidthStyles(Convert.ToUInt32(minCol), Convert.ToUInt32(maxCol), maxWidth, spreadSheet, worksheetPart);

            if (rowPointers == null || rowPointers.Length == 0)
            {
                WriteRowsFromHeaders(rowData, headerData, rowNum, out maxWidth, spreadSheet, worksheetPart);
            }
            else
            {
                WriteRowsFromKeys(rowData, rowPointers, rowNum, out maxWidth, spreadSheet, worksheetPart);
            }

            // Save to the memory stream
            SpreadsheetWriter.Save(spreadSheet);
            spreadSheet.Close();
            spreadSheet.Dispose();
            return xmlStream;
        }

        /// <summary>
        /// Set the name of the spreadsheet. 
        /// </summary>
        /// <param name="excelSpreadSheetName">Spread sheet name.</param>
        /// <param name="spreadSheet">Spread sheet.</param>
        private static void SetSheetName(string excelSpreadSheetName, SpreadsheetDocument spreadSheet)
        {
            excelSpreadSheetName = excelSpreadSheetName ?? DefaultSheetName;

            Sheet ss = spreadSheet.WorkbookPart.Workbook.Descendants<Sheet>().Where(s => s.Name == DefaultSheetName).SingleOrDefault<Sheet>();
            ss.Name = excelSpreadSheetName;
        }

        /// <summary>
        /// Add cell width styles. 
        /// </summary>
        /// <param name="minCol">Minimum column index.</param>
        /// <param name="maxCol">Maximum column index.</param>
        /// <param name="maxWidth">Maximum column width.</param>
        /// <param name="spreadSheet">Spread sheet.</param>
        /// <param name="workSheetPart">Work sheet.</param>
        private static void AddCellWidthStyles(uint minCol, uint maxCol, int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheetPart)
        {
            Columns cols = new Columns(new Column() { Min = minCol, Max = maxCol, Width = maxWidth});

            workSheetPart.Worksheet.InsertBefore<Columns>(cols, workSheetPart.Worksheet.GetFirstChild<SheetData>());
        }

        /// <summary>
        /// Set the style sheet.
        // Note: Setting the style here rather than passing it in ensures that all worksheets will have a common user interface design.
        /// </summary>
        /// <param name="spreadSheet">Spread sheet to change.</param>
        private static void SetStyleSheet(SpreadsheetDocument spreadSheet)
        {
            // Note: Setting the style here rather than passing it in ensures that all worksheets will have a common user interface design.
            Stylesheet styleSheet = spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet;

            styleSheet.Fonts.AppendChild(
                new Font(new FontSize() { Val = 11 }, new Color() { Rgb = "FFFFFF" }, new FontName() { Val = "Arial" }));

            styleSheet.Fills.AppendChild(new Fill()
            {
                PatternFill = new PatternFill()
                {
                    PatternType = PatternValues.Solid,
                    BackgroundColor = new BackgroundColor() { Rgb = "D8D8D8" }

                }
            });

            spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet.Save();
        }

        /// <summary>
        /// Save the styl for worksheet headers. 
        /// </summary>
        /// <param name="cellLocation">Cell location.</param>
        /// <param name="spreadSheet">Spreadsheet to change.</param>
        /// <param name="workSheetPart">Worksheet to change.</param>
        private static void SeatHeaderStyle(string cellLocation, SpreadsheetDocument spreadSheet, WorksheetPart workSheetPart)
        {
            Stylesheet styleSheet = spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet;
            Cell cell = workSheetPart.Worksheet.Descendants<Cell>().Where(c => c.CellReference == cellLocation).FirstOrDefault();

            if (cell == null)
            {
                throw new ArgumentNullException("Cell not found");
            }

            cell.SetAttribute(new OpenXmlAttribute("", "s", "", "1"));
            OpenXmlAttribute cellStyleAttribute = cell.GetAttribute("s", "");
            CellFormats cellFormats = spreadSheet.WorkbookPart.WorkbookStylesPart.Stylesheet.CellFormats;

            // pick tthe first cell format.
            CellFormat cellFormat = (CellFormat)cellFormats.ElementAt(0);

            CellFormat cf = new CellFormat(cellFormat.OuterXml);
            cf.FontId = styleSheet.Fonts.Count;
            cf.FillId = styleSheet.Fills.Count;
            cf.Alignment.Horizontal = HorizontalAlignmentValues.General;
            cellFormats.AppendChild(cf);

            int a = (int)styleSheet.CellFormats.Count.Value;

            cell.SetAttribute(cellStyleAttribute);

            cell.StyleIndex = styleSheet.CellFormats.Count;

            workSheetPart.Worksheet.Save();
        }

        /// <summary>
        /// Replace special characters. 
        /// </summary>
        /// <param name="value">Value to input.</param>
        /// <returns>Value with special characters replaced.</returns>
        private static string ReplaceSpecialCharacters(string value)
        {
            value = value.Replace("’", "'");
            value = value.Replace("“", "\"");
            value = value.Replace("”", "\"");
            value = value.Replace("–", "-");
            value = value.Replace("…", "...");
            return value;
        }

        /// <summary>
        /// Write values to the spreadsheet.
        /// </summary>
        /// <param name="cellLocation">Row Column Value.</param>
        /// <param name="strValue">Value to write.</param>
        /// <param name="spreadSheet">Spreadsheet to write to. </param>
        /// <param name="workSheet">Worksheet to write to. </param>
        private static void WriteValues(string cellLocation, string strValue, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)
        {
            WorksheetWriter workSheetWriter = new WorksheetWriter(spreadSheet, workSheet);

            int intValue = 0;
            if (strValue.Contains("$"))
            {
                strValue = strValue.Replace("$", "");
                strValue = strValue.Replace(",", "");

                workSheetWriter.PasteValue(cellLocation, strValue, CellValues.Number);
            }
            else if (int.TryParse(strValue, out intValue))
            {
                workSheetWriter.PasteValue(cellLocation, strValue, CellValues.Number);
            }
            else if (string.IsNullOrEmpty(strValue))
            {
                workSheetWriter.PasteText(cellLocation, strValue);
            }
            else
            {
                workSheetWriter.PasteText(cellLocation, strValue);
            }
        }

        /// <summary>
        /// Write the excel rows for the spreadsheet.
        /// </summary>
        /// <param name="rowData">Excel row values.</param>
        /// <param name="rowDataKeys">Excel row-key values.</param>
        /// <param name="rowNum">Row number.</param>
        /// <param name="maxWidth">Max width.</param>
        /// <param name="spreadSheet">Spreadsheet to write to. </param>
        /// <param name="workSheet">Worksheet to write to. </param>
        private static void WriteRowsFromKeys(IQueryable rowData, string[] rowDataKeys, int rowNum, out int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)
        {
            maxWidth = 0;

            foreach (object row in rowData)
            {
                int colNum = 0;
                foreach (string rowKey in rowDataKeys)
                {
                    string strValue = row.GetType().GetProperty(rowKey).GetValue(row, null).ToString();
                    strValue = ReplaceSpecialCharacters(strValue);
                    maxWidth = strValue.Length > maxWidth ? strValue.Length : maxWidth;

                    string cellLocation = string.Format("{0}{1}", GetColumnLetter(colNum.ToString()), rowNum);
                    ExcelDocument.WriteValues(cellLocation, strValue, spreadSheet, workSheet);

                    colNum++;
                }

                rowNum++;
            }
        }

        /// <summary>
        /// Convert column number to alpha numeric value.
        /// </summary>
        /// <param name="colNumber">Column number.</param>
        /// <returns>ASCII value for number.</returns>
        private static string GetColumnLetter(string colNumber)
        {
            if (string.IsNullOrEmpty(colNumber))
            {
                throw new ArgumentNullException(colNumber);
            }

            string colName = null;

            try
            {
                for (int i = 0; i < colNumber.Length; i++)
                {
                    string colValue = colNumber.Substring(i, 1);

                    int asc = Convert.ToInt16(colValue) + 65;

                    colName += Convert.ToChar(asc);
                }
            }
            finally
            {
                colName = colName ?? "A";
            }

            return colName;
        }

        /// <summary>
        /// Write the values for the rows from headers.
        /// </summary>
        /// <param name="rowData">Excel row values.</param>
        /// <param name="headerData">Excel header values.</param>
        /// <param name="rowNum">Row number.</param>
        /// <param name="maxWidth">Max width.</param>
        /// <param name="spreadSheet">Spreadsheet to write to. </param>
        /// <param name="workSheet">Worksheet to write to. </param>
        private static void WriteRowsFromHeaders(IQueryable rowData, string[] headerData, int rowNum, out int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)
        {
            WorksheetWriter workSheetWriter = new WorksheetWriter(spreadSheet, workSheet);
            maxWidth = 0;

            foreach (object row in rowData)
            {
                int colNum = 0;
                foreach (string header in headerData)
                {
                    string strValue = row.GetType().GetProperty(header).GetValue(row, null).ToString();
                    strValue = ReplaceSpecialCharacters(strValue);
                    maxWidth = strValue.Length > maxWidth ? strValue.Length : maxWidth;

                    string cellLocation = string.Format("{0}{1}", GetColumnLetter(colNum.ToString()), rowNum);

                    ExcelDocument.WriteValues(cellLocation, strValue, spreadSheet, workSheet);
                    colNum++;
                }

                rowNum++;
            }
        }

        /// <summary>
        /// Write the excel headers for the spreadsheet.
        /// </summary>
        /// <param name="headerData">Excel header values.</param>
        /// <param name="rowNum">Row number.</param>
        /// <param name="colNum">Column Number.</param>
        /// <param name="maxWidth">Max column width</param>
        /// <param name="spreadSheet">Maximum Column Width to write to. </param>
        /// <param name="workSheet">Worksheet to write to. </param>
        private static void WriteHeaders(string[] headerData, out int rowNum, out int colNum, out int maxWidth, SpreadsheetDocument spreadSheet, WorksheetPart workSheet)
        {
            rowNum = 1;
            colNum = 0;
            maxWidth = 0;

            foreach (string header in headerData)
            {
                string strValue = ReplaceSpecialCharacters(header);

                string cellLocation = string.Format("{0}{1}", GetColumnLetter(colNum.ToString()), rowNum);
                maxWidth = strValue.Length > maxWidth ? strValue.Length : maxWidth;
                maxWidth = strValue.Length+25;
                ExcelDocument.WriteValues(cellLocation, strValue, spreadSheet, workSheet);
                SeatHeaderStyle(cellLocation, spreadSheet, workSheet);
                colNum++;
            }

            rowNum++;
        }
    }
} 
```

我的问题是我的表格中的所有文本都**左对齐**。我希望它**右对齐**。表格中的列标题也有**黑色背景**。我也想改变它的颜色。还有如何给一些硬编码任何单元格中的文本？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T13:23:24.777

与其在代码绑定中生成表格的列和标题，不如为其创建一个视图，以便您可以轻松地将内联样式添加到标题和列。

添加新类

```
public class DownloadFileActionResult : ActionResult
    {
        public string ExcelGridView { get; set; }
        public string fileName { get; set; }

        public DownloadFileActionResult(string gv, string pFileName)
        {
            ExcelGridView = gv;
            fileName = pFileName;

        }

        public override void ExecuteResult(ControllerContext context)
        {

            //Create a response stream to create and write the Excel file
            HttpContext curContext = HttpContext.Current;
            curContext.Response.Clear();
            curContext.Response.AddHeader("content-disposition", "attachment;filename=" + fileName);
            curContext.Response.Charset = "";
            curContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
            curContext.Response.ContentType = "application/ms-excel";

            //Open a memory stream that you can use to write back to the response
            byte[] byteArray = Encoding.ASCII.GetBytes(ExcelGridView);
            MemoryStream s = new MemoryStream(byteArray);
            StreamReader sr = new StreamReader(s, Encoding.Unicode);

            //Write the stream back to the response
            curContext.Response.ContentEncoding = System.Text.Encoding.Unicode;
            curContext.Response.Write(sr.ReadToEnd());
            curContext.Response.End();

        }
    } 
```

它继承自**ActionResult** ，它接受两个参数，一个是字符串格式的**视图**，另一个是**Excel-filename**。

```
//In Controller 

public ActionResult SaveExcel()
{
            string html = RenderPartialViewToString("PartailViewName", model);
            // if your view don't have any model then you can pass as null

            html = html.Replace("\n", "");
            html = html.Replace("\r", "");
            html = html.Replace("  ", "");

            return new DownloadFileActionResult(html, "ExcelSheetName.xls");
}

      protected string RenderPartialViewToString(string viewName, object model)
            {
                if (string.IsNullOrEmpty(viewName))
                    viewName = ControllerContext.RouteData.GetRequiredString("action");

                ViewData.Model = model;

                using (StringWriter sw = new StringWriter())
                {
                    ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
                    ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
                    viewResult.View.Render(viewContext, sw);
                    return sw.GetStringBuilder().ToString();

         }
    } 
```

PartialView 的返回类型是**MvcHtmlString**，你可以在控制器中获取它，所以我返回一个方法**RenderPartialViewToString**，它接受两个参数，一个是**ParttailView**，另一个是**Model**，它将返回部分视图的 RenderHtmlString。

创建局部视图

```
//PartailViewName.cshtml

<table>
     <tr>
        <th style="background-color:Gray;">
            Column1
        </th>
       <th style="background-color:Gray;">
            Column1
        </th>
     </tr>
     <tr>
        <td>
             Coulmn data
        </td>
        <td>
            Coulmn data
        </td>
     </tr>
</table> 
```

注意：视图必须是部分视图 2）您的所有数据必须仅以表结构排列 3）仅提供内联样式。

# cocos2d-iphone - 主循环中的 Cocos2d 动画

> ID：13120810
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:06.837
> 
> 标签：cocos2d-iphone, cocos2d-x

任何人都可以给出做主循环动画的最聪明的方法吗？我不想使用 CCAnimation，因为我想逐帧控制动画。

我应该将每个单独帧的精灵矩形（相对于精灵表）存储在一个数组中，然后在每个动画步骤中查找适合的矩形吗？我试图找出这是如何在 CCAnimation 中完成的，但我没有成功......

1.  如何在初始化时获取每帧的矩形？
2.  如何在每个动画步骤中设置矩形？
3.  我需要使用 CCSpriteBatchNode 吗？我想不会吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:58:13.137

由于您希望逐帧动画精灵，我认为使用 CCSpriteBatchNode 将是一个更好的选择，因为它可以让您逐帧访问动画。使用“Zwoptex”之类的任何工具制作精灵 plist 将提供使用 CCSpriteBatchNode 制作动画的有效方法。

希望您知道使用带有 CCSpriteBatchNode 的 plist 文件的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:08:27.793

无法理解，为什么您不想使用 CCAnimation，但无论如何，要获得您的问题的答案，您可以检查 CCSprite 实例的创建代码。然后，检查 CCSpriteFrame 实例的创建。在那里，您至少会找到第一个问题的答案。

实际上，如果您只想以与 CCAnimate 不同的方式管理动画帧，您可以存储 CCSpriteFrames 数组并根据需要显示它们（在 CCAnimate 操作中，这些帧只是在相等的时间间隔内一一更改）。

如果你不想显示超过一帧的动画，你是否使用 CCSpriteBatchNode 没有区别。如果您需要绘制一个纹理的多个部分，它可以节省大量的处理器时间，因为它在一次`draw`调用中绘制它们而不是`draw`向所有这些精灵发送消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T13:01:59.980

我从 Morions 的回答中得到灵感，做了以下事情：在游戏中的滴答功能中：

```
_animationFrames.legFrame = (_animationFrames.legFrame + 1) % _animationFrames.legFrames.count;

[_legs setDisplayFrame:  [_animationFrames.legFrames objectAtIndex: _animationFrames.legFrame]]; 
```

在初始化函数中：

```
CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode
                                  batchNodeWithFile:@"Player.png"];
[self addChild:spriteSheet];

_animationFrames.legFrames = [[NSMutableArray array] retain];
for(int i = 0; i <= 15; ++i)
{
  [_animationFrames.legFrames addObject:
   [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
    [NSString stringWithFormat:@"Player_legs-%d.png", i]]];
}

_legs = [CCSprite spriteWithSpriteFrameName:@"Player_legs-0.png"];
[_sprite addChild: spriteSheet];
[spriteSheet addChild:_legs z:1]; 
```

# notepad++ - 在记事本++中，有没有办法找到打开了多少文件？

> ID：13120814
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:12.753
> 
> 标签：notepad++

我在记事本++中打开了多个文件。

我想知道打开了多少文件。有办法知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:47:21.420

是的。以编程方式，您可以使用`NPPM_GETNBOPENFILES`消息

```
NPPM_GETNBOPENFILES
The return value depends on nbType :

nbType          Meaning
ALL_OPEN_FILES  the total number of files opened in Notepad++
PRIMARY_VIEW    the number of files opened in the primary view
SECOND_VIEW     the number of files opened in the second view 
```

Notepad++ 消息在此处列出[。](http://docs.notepad-plus-plus.org/index.php/Messages_And_Notifications)

# javascript - 嵌套表单密封在 Jquery 中不起作用

> ID：13120815
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:16.183
> 
> 标签：javascript, jquery, forms

我正在开发一个网络应用程序。我有一个带有表单的页面，`form1`我正在推送另一个页面，其中也有一个表单`form2`，里面`form1`。这两种形式都有一些价值。我想序列化这两种形式。当我指定根表单 ( `form1`)时，`$('#form1').serialize();`它只序列化根表单 ( `form1`)，而不是`form2`.

如果这样指定`$('#form1, #form2').serialize();`，`$('form').serialize();`它会密封所有表格。

`$('form1').serialize();`这个仅序列化根表单而不是form2的jQuery有什么问题？

我尝试了一个[jsFiddle 示例](http://jsfiddle.net/kaleeswaran/3ZLhu/)，它工作正常。我的网络申请表中可能存在什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:36:26.293

HTML 中不允许嵌套表单。jQuery 不是为处理它们而设计的。不要创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:48:32.720

即使不支持您的目的，您也可以使用`:input`选择器。

```
$('#form1 :input').serialize(); 
```

强烈推荐使用过滤器的性能。

```
$('#form1 > *').filter(':input').serialize(); 
```

如果您可以解释为什么要使用嵌套表单，也许我们可以建议一些解决方法。例如，如果您仅将第二种表单用于 AJAX 请求，您可以用 div 覆盖它，以便轻松选择或给这些表单项一个额外的类，并为它们使用类似的选择器。

# c# - 如何为 Metro 应用程序设置代理？

> ID：13120816
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:19.517
> 
> 标签：c#, proxy, microsoft-metro

我是 C# 和 Visual Studio 的新手..

目前我正在开发一个 Windows 8 Metro 应用程序。我想知道如何使用该应用程序设置系统代理。

A 尝试使用 System.Net 中的 webProxy 类。但它说 webProxy 在参考文献中不存在，尽管我参考了 System.Net..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:20:37.453

WinRT apps can't set this setting, but you can set the SO proxy.

# java - 如何在通过java创建的excel表中设置整数值？

> ID：13120819
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:24.750
> 
> 标签：java, excel, apache-poi, poi-hssf

当我通过java创建excel表时，`number`oracle表中具有数据类型的列，`text`在excel中转​​换为格式。我希望它保持格式。`number`下面是我创建excel的代码片段。

```
 public boolean prepareExcelFilefromQuery(String chanType,
                    Collection<List> queryDataRowWise, HttpServletResponse response)

            {
                List<String> queryDataColWise;
                HSSFRow row = null;
                HSSFCell cell = null;
                Integer rowCounter = 0;
                Integer colCounter;
                boolean success = false;
                try {

                    Iterator<List> rowIterator = queryDataRowWise.iterator();
                    HSSFWorkbook workbook = new HSSFWorkbook();
                    HSSFSheet sheet = workbook.createSheet(chanType + " Report");
                    System.out.println("First row/..." + sheet.getFirstRowNum());
                    while (rowIterator.hasNext()) {
                        colCounter = 0;

                        queryDataColWise = (List) rowIterator.next();
                        Iterator colIterator = queryDataColWise.iterator();

                        row = sheet.createRow(rowCounter++);
                        while (colIterator.hasNext()) {
                            cell = row.createCell(colCounter++);
                            Object o = colIterator.next();

                            if (o instanceof java.lang.String) {
                                String s = (String) o;
                                cell.setCellValue(s);
                            } else if (o instanceof java.lang.Double) {
                                Double d = (Double) o;
                                cell.setCellValue(d);
                            } else if (o instanceof java.lang.Integer) {
                                Integer i = (Integer) o;
                                 cell.setCellType(cell.CELL_TYPE_NUMERIC);
                                cell.setCellValue(i);
                            } else if (o instanceof java.util.Date) {
                                Date date = (Date) o;

                                SimpleDateFormat FORMATTER;

                                FORMATTER = new SimpleDateFormat("MM/dd/yyyy");
                                String date11 = FORMATTER.format(date);
                                HSSFCellStyle cellStyle = workbook.createCellStyle();
                                cellStyle.setDataFormat(HSSFDataFormat
                                        .getBuiltinFormat("m/d/yy"));
                                cell.setCellStyle(cellStyle);
                                cell.setCellValue(FORMATTER.parse(date11));
                            }
                        }
                    }

                    workbook.write(response.getOutputStream());
                    success = true;

                } catch (Exception e) {
                    logger.debug(
                            "Exception caught in prepareExcelFilefromQuery class ", e);
                    System.out
                            .println("Exception caught in prepareExcelFilefromQuery class ");
                    e.printStackTrace();

                } 
                }
                return success;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:54:44.140

**它只是使用像0**这样的格式。[更多格式](http://www.roseindia.net/java/poi/setdataformat.shtml)

```
CellStyle numberStyle = wb.createCellStyle();
numberStyle.setDataFormat(format.getFormat("0"));

CellStyle dateStyle = wb.createCellStyle();
dateStyle.setDataFormat(format.getFormat("d-mmm-yy")); 
```

# makefile - Makefile.win:1: ***缺少分隔符。停止

> ID：13120822
> 
> 赞同：0
> 
> 时间：2012-10-29T11:33:50.023
> 
> 标签：makefile, gnu-make

我知道这个错误与缺少选项卡有关，但我不知何故无法找出第 1 行缺少选项卡的位置：

生成文件：

```
## -*- mode: make; tab-width: 8; -*-
##
## Simple Makefile
##
## TODO: 
##  proper configure for non-Debian file locations,   [ Done ]
##  allow RHOME to be set for non-default R etc

## comment this out if you need a different version of R, 
## and set set R_HOME accordingly as an environment variable

R_HOME =        $(shell R RHOME)

sources =       $(wildcard *.cpp)
programs =      $(sources:.cpp=)

## include headers and libraries for R 
RCPPFLAGS =         $(shell $(R_HOME)/bin/R CMD config --cppflags)
RLDFLAGS =      $(shell $(R_HOME)/bin/R CMD config --ldflags)
RBLAS =         $(shell $(R_HOME)/bin/R CMD config BLAS_LIBS)
RLAPACK =       $(shell $(R_HOME)/bin/R CMD config LAPACK_LIBS)

## if you need to set an rpath to R itself, also uncomment
#RRPATH :=      -Wl,-rpath,$(R_HOME)/lib

## include headers and libraries for Rcpp interface classes
RCPPINCL =      $(shell echo 'Rcpp:::CxxFlags()' | $(R_HOME)/bin/R --vanilla --slave)
RCPPLIBS =      $(shell echo 'Rcpp:::LdFlags()'  | $(R_HOME)/bin/R --vanilla --slave)

## include headers and libraries for RInside embedding classes
RINSIDEINCL =       $(shell echo 'RInside:::CxxFlags()' | $(R_HOME)/bin/R --vanilla --slave)
RINSIDELIBS =       $(shell echo 'RInside:::LdFlags()'  | $(R_HOME)/bin/R --vanilla --slave)

## compiler etc settings used in default make rules
CXX =           $(shell $(R_HOME)/bin/R CMD config CXX)
CPPFLAGS =      -Wall $(shell $(R_HOME)/bin/R CMD config CPPFLAGS)
CXXFLAGS =      $(RCPPFLAGS) $(RCPPINCL) $(RINSIDEINCL) $(shell $(R_HOME)/bin/R CMD 

config CXXFLAGS)
LDLIBS =        $(RLDFLAGS) $(RRPATH) $(RBLAS) $(RLAPACK) $(RCPPLIBS) $(RINSIDELIBS)

all: $(programs)
    @test -x /usr/bin/strip && strip $^

run: $(programs)
    @for p in $(programs); do echo; echo "Running $$p:"; ./$$p; done

clean:
    rm -vf $(programs)
    rm -vrf *.dSYM

runAll:
    for p in $(programs); do echo "Running $$p"; ./$$p; done 
```

![在此处输入图像描述](../Images/cc7ab0fb04dc89ffeab66812a8b2431d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:46:18.527

就个人而言，我在 Windows 上的某个编辑器保存的 Makefile 中遇到了同样的问题。原因是Makefile 中的[BOM（字节顺序标记）使 Make 感到困惑。](http://en.wikipedia.org/wiki/Byte_order_mark)

要检查是否如此，您可以（*手动*）将整个 Makefile（或者可能除了标题注释之外）复制并粘贴到在其他编辑器/IDE 中创建的新文件中。另外这里是关于如何在 Windows 上删除 BOM的[一个很好的答案。](https://stackoverflow.com/a/291462/545027)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:56:38.003

前面的那行`LDLIBS`显然是这样写的：

```
config CXXFLAGS) 
```

这会产生一个 makefile 语法错误，但我希望它的行号大于 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T23:18:49.813

如果您的“Makefile.win”是精确副本，则将命令前的所有空格替换为制表符：

> all: $(programs)
> <**在此处插入制表符，没有空格**>@test -x /usr/bin/strip && strip $^
> 
> 运行： $(programs)
> <**在此处插入制表符，没有空格**>@for p in $(programs); 做回声；echo "运行 $$p:"; ./$$p; 完毕
> 
> clean:
> <**在此处插入制表符，没有空格**>rm -vf $(programs)
> <**在此处插入制表符，没有空格**>rm -vrf *.dSYM
> 
> runAll:
> <**在此处插入制表符，没有空格**>for p in $(programs); 做回声“运行$$p”；./$$p; 完毕

# asp.net-mvc-3 - 如何使用带有 App_Code 助手的 ASP.NET MVC 视图预编译？

> ID：13120823
> 
> 赞同：5
> 
> 时间：2012-10-29T11:33:48.833
> 
> 标签：asp.net-mvc-3, appharbor, view-helpers, precompile

我正在尝试启用视图编译以更快地加载我的 ASP.NET MVC3 网站。我的网站托管在 AppHarbor 上。

但是，我的视图使用了在 App_Code 文件夹中定义的 MVC3 视图助手。

当我尝试加载我的网站时，我得到：“目录 '/App_Code/' 是不允许的，因为应用程序是预编译的。”

如何停止将 App_Code 文件夹部署到 Web 服务器，但仍预编译 App_Code 帮助程序？

我尝试将帮助程序更改为 Content=None，但这会导致 AppHarbor 构建错误，因为在预编译期间无法找到帮助程序文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T15:56:24.163

老问题，但我刚刚遇到了这个问题，以下程序对我有用：

1.  转到[https://appharbor.com/your-application](https://appharbor.com/your-application)。
2.  点击设置。
3.  点击构建 | 禁用预编译。
4.  强制 appharbor 进行重建/重新部署（通过将新提交推送到存储库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:34:03.617

由于这个问题，我刚刚删除了我的共享助手并删除了**App_Code文件夹。**我已将项目更改为使用部分视图。

根据[这个答案](https://stackoverflow.com/a/14582537/678338)，助手必须在 App_Code 文件夹中，但这不适用于 AppHarbor。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T12:40:55.520

我想说，不要在 Web 应用程序中使用 App_Code 文件夹。[请在此处](https://stackoverflow.com/questions/4586382/default-build-action-in-app-code-directory)查找更多详细信息****

# python - 在元组的元组中查找最大值和最小值

> ID：13120824
> 
> 赞同：3
> 
> 时间：2012-10-29T11:33:52.170
> 
> 标签：python, tuples, normalization

我是 python 新手，在查找元组元组的最小值和最大值时遇到了一些问题。我需要他们来规范我的数据。所以，基本上，我有一个由 13 个数字组成的列表，每个数字代表一些东西。每个数字在列表中构成一列，我需要每列的`max`and `min`。我尝试索引/迭代，但不断收到错误

```
max_j = max(j)

TypeError: 'float' object is not iterable 
```

任何帮助，将不胜感激！

代码是（假设 data_set_tup 是元组的元组，例如 ((1,3,4,5,6,7,...),(5,6,7,3,6,73,2...) ...(3,4,5,6,3,2,2...)) 我还想使用标准化值创建一个新列表。

```
normal_list = []

for i in data_set_tup:

    for j in i[1:]: # first column doesn't need to be normalised
        max_j = max(j)
        min_j = min(j)
        normal_j = (j-min_j)/(max_j-min_j)
        normal_list.append(normal_j)
    normal_tup = tuple(normal_list) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:44:25.173

您可以将行转置为列，反之亦然`zip(*...)`。（`list(zip(*...))`在 Python 3 中使用）

```
cols = zip(*data_set_tup)
normal_cols = [cols[0]] # first column doesn't need to be normalised
for j in cols[1:]:
    max_j = max(j)
    min_j = min(j)
    normal_cols.append(tuple((k-min_j)/(max_j-min_j) for k in j)

normal_list = zip(*normal_cols) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:45:22.767

这听起来确实像是非内置[numpy](http://numpy.scipy.org/)模块或[pandas](http://pandas.pydata.org/)模块的工作，具体取决于您的需要。

在应用程序中添加额外的依赖项不应轻易完成，但如果您对类似矩阵的数据做了大量工作，那么如果您在整个应用程序中使用上述模块之一，您的代码可能会更快、更易读。

我不建议将列表列表转换为 numpy 数组并再次返回以获得这个单一结果——最好使用 Jannes 答案的纯 python 方法。另外，鉴于您是 python 初学者，现在 numpy 可能有点矫枉过正。但我认为你的问题值得回答，指出这*是*一种选择。

这是在 numpy 中如何工作的逐步控制台说明：

```
>>> import numpy as np
>>> a = np.array([[1,3,4,5,6],[5,6,7,3,6],[3,4,5,6,3]], dtype=float)
>>> a
array([[ 1.,  3.,  4.,  5.,  6.],
       [ 5.,  6.,  7.,  3.,  6.],
       [ 3.,  4.,  5.,  6.,  3.]])
>>> min = np.min(a, axis=0)
>>> min
array([1, 3, 4, 3, 3])
>>> max = np.max(a, axis=0)
>>> max
array([5, 6, 7, 6, 6])
>>> normalized = (a - min) / (max - min) 
>>> normalized
array([[ 0\.        ,  0\.        ,  0\.        ,  0.66666667,  1\.        ],
       [ 1\.        ,  1\.        ,  1\.        ,  0\.        ,  1\.        ],
       [ 0.5       ,  0.33333333,  0.33333333,  1\.        ,  0\.        ]]) 
```

所以在实际代码中：

```
import numpy as np

def normalize_by_column(a):
    min = np.min(a, axis=0)
    max = np.max(a, axis=0)
    return (a - min) / (max - min) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T09:36:55.963

我们有`nested_tuple = ((1, 2, 3), (4, 5, 6), (7, 8, 9))`. 首先，我们需要对其进行规范化。Pythonic方式：

```
flat_tuple = [x for row in nested_tuple for x in row] 
```

输出：[1、2、3、4、5、6、7、8、9]`# it's a list`

将其移动到 tuple: `tuple(flat_tuple)`，获取最大值：`max(flat_tuple)`，获取最小值：`min(flat_tuple)`

# password-protection - 使用 fpdi 编辑受密码保护的 pdf

> ID：13120825
> 
> 赞同：2
> 
> 时间：2012-10-29T11:33:59.327
> 
> 标签：password-protection, fpdf, fpdi

我一直在尝试使用 fpdf 和 fpdi 将水印添加到受密码保护的 pdf（只保护写）。

它适用于普通 pdf，但是当它受密码保护时，会出现以下错误：

> FPDF 错误：本文档 (upd/509ae4a4044df9a43e03e09b4cf772b0.pdf) 可能使用了 FPDI 附带的免费解析器不支持的压缩技术。

无法在文档上书写是有道理的，但是在搜索时，我发现类似的问题得到了解决。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:44:01.017

根据[手册](http://www.setasign.de/products/pdf-php-solutions/fpdi/about/)，免费版无法处理受保护的文件。它们只能使用付费版本进行处理。

然而，上述错误也发生在非安全文件中。可以通过重新保存模板和更改压缩类型来克服。

在 Adob​​e Acrobat Pro 中，转到 *File->Save As->Optimized PDF-> Popup left list - Clean Up*，

*对象压缩选项 -> 更改为“压缩文档结构” -> 确定*保存

# c# - 程序关闭时的“第一次机会异常”

> ID：13120834
> 
> 赞同：5
> 
> 时间：2012-10-29T11:34:33.760
> 
> 标签：c#, .net, wpf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:00:45.510

如果你得到一个“第一次机会异常”，而不是“未处理的异常”，这意味着一个异常被抛出，然后被一些代码捕获。所以它实际上不是一个错误，它很可能按预期工作，你不必担心它。

# ruby-on-rails - 以两种不同的风格订购两件东西

> ID：13120837
> 
> 赞同：0
> 
> 时间：2012-10-29T11:34:36.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3

理论上我想要的是这样的：
`:order => "column1 ASC, column2 DESC"`

但在我的情况下， column1 实际上不是列，而是聚合值：
`:order => relations.count`

当其中一列实际上是聚合值时，如何按两列排序？

顺便说一句：计数器缓存不是一个选项（因为当我需要它时它已经过时了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:50:39.567

要按计算值排序/分组/等，您必须在相应的子句中指定它，在您的情况下也使用（可能是左）连接：

```
Something.select("somethings.*, COUNT(others.id)").
          joins("LEFT JOIN others ON others.something_id = somethings.id").
          group("somethings.*").
          order("COUNT(others.id), column2 DESC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:36:12.870

```
:order => "COUNT(*), column2 DESC" 
```

# c - size_t 可移植性概念

> ID：13120840
> 
> 赞同：3
> 
> 时间：2012-10-29T11:34:55.083
> 
> 标签：c, memory-management, size, portability, memcpy

我在参考[http://www.embedded.com/electronics-blogs/programming-pointers/4026076/Why-size-t-matters](http://www.embedded.com/electronics-blogs/programming-pointers/4026076/Why-size-t-matters "size_t - 可移植性")`size_t`中分析了跨平台提供的可移植性。以下是我从中得出的一些观点。

*   `size_t`是一个`typedef`无符号整数类型。
*   用于类型定义的数据类型`size_t`确保它足以访问**最大数据对象**的大小，但不会更大。

我无法理解**最大数据对象是什么意思？** 还请考虑我从该参考中获取的以下示例。

对于`I16LP32`他们声称的**最大数据对象**的大小可以是`2^(32)-1`. 因此，在这种情况下，如果我们使用 an`unsigned int`作为`size_t`in`memcpy`函数的替代品。我们将处理器能力限制为`2^(16)-1`.

**那么是什么决定了最大数据对象的大小呢？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:52:51.817

对象的最大可能大小由 C 实现所针对的体系结构的内存映射决定（原则上，和/或其他实现细节，但实际上就是这样做的）。

在包括当今使用的大多数系统的所谓“平面”内存模型上，这意味着对象几乎可以是整个地址空间的大小（资源允许），因此您希望`size_t`是指针。如果您的地址空间是 32 位，那么由于对象的每个字节都有不同的地址，因此您显然不能拥有大于 2^32-1 字节的对象（-1，因为空指针值“用完”一个地址，即保证不是任何对象的地址）。

在分段内存架构上，您的 C 实现可能可以寻址 2^32 字节的空间，但不允许单个对象跨越多个 16 位段，因此原则上`size_t`可以是 16 位类型。

就此而言，允许 C 实现者对 进行任意限制`malloc`，出于纯粹的恶作剧，它永远不会返回大于 2^24-1 字节的块。在编译器中具有相同的限制以防止该大小的静态或自动对象，`size_t`即使指针更大，也可以是 24 位类型。

You'd hope that no implementer would do this *solely* for the fun of it, but there might be practical reasons for that 24 bit limit to exist. For example if the implementation uses a maximum of 16MB RAM for dynamic allocations and a separate limit of 16MB for static objects, then no object could be bigger than 16MB but a pointer has to be at least 25 bits. Even in that case, I doubt that an implementer would *bother* making `size_t` a 24-bit type, it would most likely still be 32 bits. But the standard allows the implementer to choose what's best.

你说，“访问最大数据对象的大小就足够了，*但不是更大*”。它不能更大是不正确的。例如，如果平台的某些技术限制意味着任何对象都不能大于 2^31-1 字节，那么就不能说`size_t`必须是 31 位类型。它被允许为 32 位类型，因为所需要的只是它足够大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:41:00.680

由于`size_t`用于内存测量，它需要与指针大小相同。

32 位指针 --> 32 位无符号整数

64 位指针 --> 64 位无符号整数

# iphone - 计算在不同缩放比例上绘制的点之间的距离

> ID：13120846
> 
> 赞同：0
> 
> 时间：2012-10-29T11:35:27.207
> 
> 标签：iphone, ios, ipad, zooming, distance

我正在开发一个 iPhone 应用程序，用户可以在其中选择一个图像，然后允许在其上绘制（点），这些图像可能存储在不同的缩放比例上（他可以放大和缩小）。

我将每个点的位置存储在一个数组中，但是当我计算距离时，我意识到如果这些点存储在不同的缩放比例上，结果是不正确的。有人会帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:32:44.667

可能您应该将点存储在标准化单位中。

假设您正在使用`UIScrollView`缩放，在存储之前将 x 和 y 除以当前`scrollView.zoomScale`。计算距离时，将距离乘以`scrollView.zoomScale`。

# php - PHP中的简单websocket服务器

> ID：13120847
> 
> 赞同：16
> 
> 时间：2012-10-29T11:35:30.547
> 
> 标签：php, websocket, phpwebsocket

我正在用 PHP 开发一个简单的 websocket 服务器。我知道有很多现有的实现，但我想自己做，以便更好地学习协议。我设法很好地握手，我的客户连接到服务器。我还设法解码了来自客户端的数据，但我在发回消息时遇到了问题。客户端收到我的回复后断开连接。火狐说`The connection to ws://localhost:12345/ was interrupted while the page was loading.`。

我用[这个答案](https://stackoverflow.com/questions/8125507/how-can-i-send-and-receive-websocket-messages-on-the-server-side)作为指导。

这是我包装数据的代码：

```
private function wrap($msg = ""){
    $length = strlen($msg);
    $this->log("wrapping (" . $length . " bytes): " . $msg);

    $bytesFormatted = chr(129);
    if($length <= 125){
        $bytesFormatted .= chr($length);
    } else if($length >= 126 && $length <= 65535) {
        $bytesFormatted .= chr(126);
        $bytesFormatted .= chr(( $length  >> 8 ) & 255);
        $bytesFormatted .= chr(( $length       ) & 255);
    } else {
        $bytesFormatted .= chr(127);
        $bytesFormatted .= chr(( $length >> 56 ) & 255);
        $bytesFormatted .= chr(( $length >> 48 ) & 255);
        $bytesFormatted .= chr(( $length >> 40 ) & 255);
        $bytesFormatted .= chr(( $length >> 32 ) & 255);
        $bytesFormatted .= chr(( $length >> 24 ) & 255);
        $bytesFormatted .= chr(( $length >> 16 ) & 255);
        $bytesFormatted .= chr(( $length >>  8 ) & 255);
        $bytesFormatted .= chr(( $length       ) & 255);
    }

    $bytesFormatted .= $msg;
    $this->log("wrapped (" . strlen($bytesFormatted) . " bytes): " . $bytesFormatted);
    return $bytesFormatted;
} 
```

*更新：*我用 Chrome 尝试过，我得到了以下错误，打印在控制台中：`A server must not mask any frames that it sends to the client.`

我在服务器上放了一些控制台打印输出。它是一个基本的回声服务器。我尝试使用`aaaa`. 所以实际包装的消息必须是 6 个字节。对？

![在此处输入图像描述](../Images/eddc267838edd42c5019a1cc93c40762.png)

Chrome 打印出上述错误。另请注意，包装消息后，我只需将其写入套接字：

```
$sent = socket_write($client, $bytesFormatted, strlen($bytesFormatted));
$this->say("! " . $sent); 
```

它打印 6 表示实际将 6 个字节写入线路。

如果我尝试使用`aaa`，Chrome 不会打印错误，但也不会调用我的 onmessage 处理程序。它挂起，好像在等待更多数据。

任何帮助高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T18:55:31.293

我遇到了同样的问题：对于从服务器发送的一些消息，浏​​览器中没有响应，对于一些错误“服务器不能屏蔽任何帧......”，尽管我没有添加任何掩码。原因在于发送的握手。握手是：

```
"HTTP/1.1 101 Web Socket Protocol Handshake\r\n" .
...
"WebSocket-Location: ws://{$host}{$resource}\r\n\r\n" . chr(0) 
```

那个 chr(0) 是原因，在我删除它之后一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T00:00:10.400

当我编写 websocket 类时，我遇到了同样的问题。就我而言，我使用输出缓冲来确定我在发送回复之前正在回显*某些内容。*可以试试看是不是问题。

# android - 检索附加了特定帐户的所有联系人

> ID：13120851
> 
> 赞同：1
> 
> 时间：2012-10-29T11:36:07.083
> 
> 标签：android, contacts, contactscontract, accountmanager, rawcontacts

我正在制作一个通信应用程序，该应用程序已在其中设置了特定的帐户类型`AccountManager`并`SyncAdapter`附加了一个。我的几个联系人都有一个`RawContact`我的新帐户的 MIMETYPE 和一些相关数据。

我正在寻找正确的方法来查询电话联系人列表中每个联系人的列表/光标，这些联系人列表中附加了这些新帐户之一。我想获取整个联系人，这样我就可以做一些事情，比如检索他们的电话号码、显示名称和图片的 uri，但我只需要附加了我的新型帐户的联系人。

我有一种感觉，我需要将两个表与一些投影或选择参数连接在一起，以在一个光标对象中获取所有这些数据。我只是不确定如何做到这一点，尽管我已经尝试了很多不同的事情，即能够获取所有联系人，或者`RawContact`我的特定帐户类型的所有行，但不能同时获取。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:13:11.920

获取`Raw_Id`与帐户类型和名称匹配的所有联系人：

```
 getContentResolver().query(ContactsContract.RawContacts.CONTENT_URI,
                                 new String[]{ContactsContract.RawContacts._ID,
                                 },
                                ContactsContract.RawContacts.ACCOUNT_NAME + " = ? AND " +
                                ContactsContract.RawContacts.ACCOUNT_TYPE + " = ? ",
                                new String[]{mAcccountName,mAccountType},null
                             ); 
```

对于 each ，从,匹配这里`_ID`获取所有行。`ContactsContract.Data``ContactsContract.RawContacts._ID``ContactsContract.Data.RAW_CONTACT_ID`

这些行包含与该联系人相关的所有数据`Raw_id`。

请参阅[文档](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)以了解表的结构及其`ContactsContract.Data`包含的数据。

# asp.net - HttpWebRequest.GetResponse() 在 .NET 3.5 上挂起，但在 .NET 4 上有效

> ID：13120855
> 
> 赞同：3
> 
> 时间：2012-10-29T11:36:24.420
> 
> 标签：asp.net, asp.net-4.0, asp.net-3.5

当我尝试在 .NET 3.5 上运行以下代码时，它会挂起（当我将项目设置为 .NET 4 时它可以工作）

（我已经等了 2 分钟 - 它似乎冻结了）

```
 HttpWebRequest l_oRequest;
        HttpWebResponse l_oResponse;

        if (m_bLoggedIn)
            return true;

        m_oSession = new SSessionIdentifier();
        m_oSession.Cookies = new CookieContainer();

        string l_sHost = "https://website.com";

        // Start the login sequence
        l_oRequest = GetNewRequest(l_sHost, "Login.aspx", m_oSession.Cookies);
        l_oRequest.Timeout = 5000;
        l_oRequest.ReadWriteTimeout = 5000;
        l_oRequest.Method = "POST";
        l_oRequest.Referer = "https://website.com";

        // Set form parameters
        string l_sFormParameters = "user=" + m_sUsername;

        // Convert them to the HTTP stream
        byte[] l_oRequestBuffer = UTF8Encoding.ASCII.GetBytes(l_sFormParameters);
        var l_oRequestStream = l_oRequest.GetRequestStream();
        l_oRequestStream.Write(l_oRequestBuffer, 0, l_oRequestBuffer.Length);

        // I'm setting this to false because otherwise i can't get the cookies i want. And I love them cookies!
        l_oRequest.AllowAutoRedirect = false;

        // Now start the redirection sequence until we get to what we want
        int l_iDTPos = -1;
        // This line hangs
        l_oResponse = (HttpWebResponse)l_oRequest.GetResponse();
        while (l_oResponse.StatusCode == HttpStatusCode.Found)
        {
                // Yada Yada 
```

这是 GetNewRequest 函数：

```
 private HttpWebRequest GetNewRequest(string host, string targetUrl, CookieContainer a_oCookieJar)
    {
        HttpWebRequest l_oRequest = (HttpWebRequest)HttpWebRequest.Create(host + targetUrl);
        l_oRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0.2) Gecko/20100101 Firefox/10.0.2";
        l_oRequest.ContentType = "application/x-www-form-urlencoded";
        l_oRequest.AllowAutoRedirect = false;
        l_oRequest.CookieContainer = a_oCookieJar;

        return l_oRequest;
    } 
```

我在文档中找不到 3.5 和 4 之间的任何更改。有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T17:38:51.643

我遇到了同样的问题，我使用 HttpWebRequest 调用 RESTful 服务，我的代码在 .Net 4+ 中运行良好，并挂在 .Net 3.5、3.0 中的 GetResponse() 行。2.0。我最终尝试了本文中的示例代码：

[http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

并让它在所有版本的 .Net 中工作。我猜我没有设置正确的东西或关闭资源，但对于任何其他点击此文章的人，请尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:56:16.963

尝试使用以下链接中给出的代码，它使用 Stream 类来获取 httpwebrequest 的休息数据：

[http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)

[http://forums.asp.net/t/1178426.aspx/1](http://forums.asp.net/t/1178426.aspx/1)

# mysql - javax.enterprise.event.ObserverException

> ID：13120856
> 
> 赞同：8
> 
> 时间：2012-10-29T11:36:25.997
> 
> 标签：mysql, jsf, jboss, transactions, seam3

现在我遇到了一个不愉快的问题。我有 6 个项目在我的 JBoss AS 7 上运行。它们以独立模式部署。工作了一段时间（5-25 小时）后，我开始在我的所有项目中收到相同的错误：**javax.enterprise.event.ObserverException**。

这是堆栈：

```
ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[site.technorational.kz]] (http--192.168.1.2-80-3) Exception sending request initialized lifecycle event to listener instance of class org.jboss.seam.transaction.TransactionServletListener: javax.enterprise.event.ObserverException
        at sun.reflect.GeneratedConstructorAccessor136.newInstance(Unknown Source) [:1.6.0_21]
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_21]
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_21]
        at java.lang.Class.newInstance0(Class.java:355) [rt.jar:1.6.0_21]
        at java.lang.Class.newInstance(Class.java:308) [rt.jar:1.6.0_21]
        at org.jboss.weld.util.reflection.SecureReflections$16.work(SecureReflections.java:343) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInstantiation(SecureReflectionAccess.java:173) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.util.reflection.SecureReflections.newInstance(SecureReflections.java:340) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:33) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.injection.Exceptions.rethrowException(Exceptions.java:73) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.injection.MethodInjectionPoint.invokeOnInstanceWithSpecialValue(MethodInjectionPoint.java:162) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:241) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:229) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:207) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.manager.BeanManagerImpl.notifyObservers(BeanManagerImpl.java:569) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.manager.BeanManagerImpl.fireEvent(BeanManagerImpl.java:564) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.weld.event.EventImpl.fire(EventImpl.java:68) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
        at org.jboss.seam.transaction.TransactionServletListener.requestInitialized(TransactionServletListener.java:117) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
        at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_21]
Caused by: javax.transaction.NotSupportedException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:63)
        at com.arjuna.ats.jbossatx.BaseTransactionManagerDelegate.begin(BaseTransactionManagerDelegate.java:65)
        at org.jboss.tm.usertx.client.ServerVMClientUserTransaction.begin(ServerVMClientUserTransaction.java:142)
        at org.jboss.seam.transaction.UTTransaction.begin(UTTransaction.java:51) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]
        at org.jboss.seam.transaction.DefaultSeamTransaction.begin(DefaultSeamTransaction.java:88) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]
        at org.jboss.seam.transaction.TransactionServletListener.requestInitialized(TransactionServletListener.java:110) [seam-transaction-3.1.0.Final.jar:3.1.0.Final]
        ... 8 more
Caused by: java.lang.IllegalStateException: BaseTransaction.checkTransactionState - ARJUNA016051: thread is already associated with a transaction!
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.checkTransactionState(BaseTransaction.java:257)
        at com.arjuna.ats.internal.jta.transaction.arjunacore.BaseTransaction.begin(BaseTransaction.java:59)
        ... 13 more 
```

在我在日志中搜索答案后，我发现有时这会在上一个异常出现之前出现：

```
22:19:21,872 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "project1-web.war"
22:19:21,873 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "project2-web.war"
22:19:21,873 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "project3-web.war"
22:19:21,875 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "project4-web.war"
22:19:21,875 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "project5-web.war"
22:19:21,876 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed "project6-web.war"
22:19:21,888 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://192.168.2.1:9990/management
22:19:21,889 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://192.168.2.1:9990
22:19:21,889 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.2.0.Alpha1-SNAPSHOT "Steropes" started in 31119ms - Started 4319 of 4426 services (98 services are passive or on-demand)
22:24:59,256 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper) ARJUNA012117: TransactionReaper::check timeout for TX 0:ffffc0a80107:2c60f317:50914f6c:4d in state  RUN
22:24:59,259 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012095: Abort of action id 0:ffffc0a80107:2c60f317:50914f6c:4d invoked while multiple threads active within it.
22:24:59,259 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012108: CheckedAction::check - atomic action 0:ffffc0a80107:2c60f317:50914f6c:4d aborting with 1 threads active!
22:24:59,260 WARN  [com.arjuna.ats.arjuna] (Transaction Reaper Worker 0) ARJUNA012121: TransactionReaper::doCancellations worker Thread[Transaction Reaper Worker 0,5,main] successfully canceled TX 0:ffffc0a80107:2c60f317:50914f6c:4d 
```

我对这个问题进行了很多思考。我的建议之一是 MySQL 导致了这种情况，因为有很多方法使用**JPA CriteriaBuilder**从数据库中检索信息。当我检查 MySQL 的状态时，我可以看到大约有 100 个慢查询。

在我的项目中，我使用 SEAM、Hibernate、JPA、PrimeFaces。

我设法找到了一些类似的问题，但仍然没有答案。

提前致谢， 伊利亚·西多罗维奇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:53:06.817

这里遇到了同样的问题：[https ://community.jboss.org/thread/179047?_sscc=t](https://community.jboss.org/thread/179047?_sscc=t)

禁用侦听器并手动注释类/方法将是修复它的一种方法。如果事务被标记为回滚，则侦听器将回滚它。

也有可能，一个线程试图开始已经回滚的事务。因此，在 TransactionServletListener.requestInitialized() 中，事务状态为 4（回滚）。

请参阅讨论[链接](http://community.jboss.org/thread/179047?_sscc=t)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:26:29.140

当我的事务被 JBoss (AS 7) 过期时，我有这个堆栈跟踪。您可以在standalone.xml 上更改此配置来增加您的事务生命周期：

节点内部：

```
<subsystem xmlns="urn:jboss:domain:transactions:1.2"> 
```

更改此属性：

```
<coordinator-environment default-timeout="600"> 
```

超时以秒为单位。

注意：此错误可能是由其他原因引起的（谢尔盖的回答就是其中之一）。通常它发生在您的事务已完成或标记为回滚并且您的进程仍然需要它时。

# asp.net - ASP.Net Profile Provider 的 GetPropertyValue() 是按请求方法还是按会话方法？

> ID：13120866
> 
> 赞同：1
> 
> 时间：2012-10-29T11:36:48.090
> 
> 标签：asp.net, asp.net-profiles, profile-provider, sqlprofileprovider

我想知道，什么时候会调用 GetPropertyValue() 方法？

我为 sql 配置文件提供程序编写了一个代理模式，并尝试在我的应用程序中使用配置文件属性。

我尝试了身份验证和匿名用户模式，每当访问配置文件属性值时，都会调用 profileProvider GetPropertyValue() 方法并且它正在访问数据库以获取值。

我想知道，配置文件值何时会存在于上下文中？

对于每个请求，我看到 profileProvider 被调用来获取值。如果是这样，那么在 HttpContext.Current 中有 Profile 有什么用？

# java - 如何为具有聚合（没有 JPA 容器）的域类创建 Vaadin 表单？

> ID：13120867
> 
> 赞同：0
> 
> 时间：2012-10-29T11:36:47.650
> 
> 标签：java, grails, persistence, grails-orm, vaadin

我有一个使用 Vaadin 版本 6.8.0 的应用程序（通过 Grails Vaadin 插件版本 1.5.4）。

如果我有一个与另一个类*File*具有 1:1 关系的 Java 域类*问题，那么在没有（高级）Vaadin JPA 容器的情况下，编写**IssueForm*以创建新问题和编辑现有问题的最佳方法是什么？

 **在表单中，我想显示一个组合框来选择所有可用文件中的一个*文件*。*我已经知道我可以在IssueForm*构造函数中做这样的事情：

```
 setFormFieldFactory(new DefaultFieldFactory() {
        @Override
        public Field createField(Item item, Object propertyId, Component uiContext) {
            if (propertyId.equals("cover")) {
                ComboBox cb = new ComboBox("Cover")
                for (FileListItem fileListItem : fileService.getAllFilesForCategory()) {
                    cb.addItem(fileListItem);
                }

                return cb;
            } else {
                Field field = super.createField(item, propertyId, uiContext);
                return field;
            }
        }
    }); 
```

*   如果我使用 DTO 将 Vaadin bean 连接到我的 Java 域类，IssueListItem 是否需要引用 FileListItem？还是直接存档？
*   我可以在新的/编辑的问题中自动填充选定的文件（或 FileListItem？）吗？如何？如果没有，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:59:27.290

如果您使用 DTO，则可以：IssueListItem 需要引用 FileListItem，然后在另一个地方将 IssueListItem 和 FileListItem 转换为域持久类问题和文件。**

# python - TypeError：预期的 BaseHandler 实例，得到

> ID：13120874
> 
> 赞同：1
> 
> 时间：2012-10-29T11:37:15.410
> 
> 标签：python

```
import urllib2, re, urllib

def login():
    host = "http://localhost/cms/"
    user = 'admin'
    passw = 'admin'
    error = "Login to CMS Made Simple"
    form = [
        ('username', user),
        ('password', word)]   
    target = host + "/admin/login.php"
    login_form_data = urllib.urlencode(form)
    opener = urllib2.build_opener(target)
    opener.addheaders = [('User-agent', 'Mozilla/5.0')]
    source = opener.open(target, login_form_data).read()
    if re.search(error, source) == None : 
        print 'FOund =>>>' + target + 'Username : ' + user + 'Password :  ' + word
    else: 
        print 'Not Found=>> ' + target + '  Username : ' + user + 'Password :  ' + word

login() 
```

我得到这个：

```
 opener = urllib2.build_opener(host)
  File "D:\Python27\lib\urllib2.py", line 486, in build_opener
    opener.add_handler(h)
  File "D:\Python27\lib\urllib2.py", line 322, in add_handler
    type(handler))
TypeError: expected BaseHandler instance, got <type 'str'> 
```

我认为问题出在这里：`opener = urllib2.build_opener(target)`

但是如何解决呢？我尝试了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:44:00.957

关于[文档](http://docs.python.org/2/library/urllib2.html#urllib2.build_opener)`urllib2.build_opener`：_

> handlers 可以是 BaseHandler 的实例，也可以是 BaseHandler 的子类（在这种情况下，必须可以在没有任何参数的情况下调用构造函数）。

您尝试通过`str`：

```
target=host+"/admin/login.php"
... 
opener = urllib2.build_opener(target) 
```

尝试使用简化 API 的[请求](http://docs.python-requests.org/en/latest/)库来获取 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:48:59.290

如果您只是删除该行，它将起作用；build_opener 不需要参数，除非你想让它做一些特定的事情。在这种情况下，如果服务器希望使用 cookie 让您保持登录状态，您可能需要添加 CookieProcessor。

```
cjar = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cjar) 
```

# java - 如何在 C# 中动态加载 Java API（.jar 文件）？

> ID：13120875
> 
> 赞同：0
> 
> 时间：2012-10-29T11:37:16.940
> 
> 标签：java, .net, jar

我有一个用 C# 编写的 ASP.NET Web 应用程序。我可以动态加载 dll 形式的 .NET API，并从我的应用程序中调用其中的方法。我想知道我是否可以对 Java API（Jar 文件）做同样的事情。我可以在运行时动态加载 Jar 文件并调用其中的函数吗？

谢谢。

# php - 如何在我的测验系统中正确使用 php 中的 preg_replace 函数

> ID：13120876
> 
> 赞同：0
> 
> 时间：2012-10-29T11:37:17.853
> 
> 标签：php, regex

我正在尝试创建一个测验系统。我在数据库中有这个表：

```
CREATE TABLE fill_gap_exercise (
  quiz_id INT PRIMARY KEY,
  text VARCHAR,
  wordslist VARCHAR,
  date DATETIME
) 
```

这是表中的示例数据行：

```
INSERT INTO fill_gap_exercise
  (quiz_id, text, wordslist, date)
VALUES
  (4, 'hello {0} up {1}', 'a:2:{i:0;s:5:"whats";i:1;s:5:"men??";}', '2012-10-29 13:24:25') 
```

我正在尝试替换字段中`{}`的字符，但是当句子中多次出现该序列`text`时我遇到了问题。`{}`

这是我的代码：

```
<?php

  include('../connect_db.php');

  $myData = mysql_query('SELECT * FROM fill_gap_exercise');

  while ($row = mysql_fetch_array($myData, MYSQL_ASSOC))
  {    

    $array = unserialize($row['wordslist']);
    $text  = implode('\r\n', $array);

    echo "\n<br />";

    $pattern = '/\{(.*)\}/';
    $replace = '<input type="text" name="j_1" id="' . $row["quiz_id"] . '" />';
    $subject = $row['text'];
    $string = preg_replace($pattern, $replace, $subject);

    print $string;    
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:42:17.700

使用[惰性量化器](http://en.wikipedia.org/wiki/Regular_expression#Lazy_quantification)

替换`'/\{(.*)\}/'`为`'/\{(.*?)\}/'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:50:51.243

无论如何，您很可能需要位置计数器，那么为什么不简单地从字符串中获取它呢？自动消除[贪婪/非贪婪](https://en.wikipedia.org/wiki/Regular_expression#Lazy_quantification)问题。

例如

```
<?php
$row = array("quiz_id"=>47);
$string = 'hello {0}, up {1}?';

$string = preg_replace('/{(\d+)}/', '<input type="text" name="q['.$row["quiz_id"].'][\\1]" />', $string);

echo $string; 
```

印刷

```
hello <input type="text" name="q[47][0]" />, up <input type="text" name="q[47][1]" />? 
```

# iphone - PhoneGap + 语音识别SDK

> ID：13120877
> 
> 赞同：0
> 
> 时间：2012-10-29T11:37:49.837
> 
> 标签：iphone, ios, cordova, sdk, speech-recognition

我正在使用 HTML5 和 PhoneGap 开发一个多平台应用程序，我的应用程序应该包括语音识别。Android 版本完美运行，但我无法在 iPhone 上进行语音识别工作。

我写了一个运行 Objective-C 代码的 PhoneGap 插件，我想使用 Nuance Dragon SDK 进行语音识别。问题是我有很多问题：

```
Undefined symbols for architecture i386:
  "_SecCertificateCopyData", referenced from:
      l792 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_SecCertificateCopySubjectSummary", referenced from:
      l791 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_SecItemAdd", referenced from:
      l800 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_SecItemCopyMatching", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
      l799 in SpeechKit(libSpeechKit.a-i386-master.o)
      l800 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_SecItemDelete", referenced from:
      l797 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_SecItemUpdate", referenced from:
      l800 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecAttrAccessGroup", referenced from:
      l800 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecAttrAccount", referenced from:
      l797 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecAttrDescription", referenced from:
      l797 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecAttrGeneric", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecAttrLabel", referenced from:
      l797 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecClass", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
      l798 in SpeechKit(libSpeechKit.a-i386-master.o)
      l799 in SpeechKit(libSpeechKit.a-i386-master.o)
      l800 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecClassGenericPassword", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
      l798 in SpeechKit(libSpeechKit.a-i386-master.o)
      l799 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecMatchLimit", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecMatchLimitOne", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecReturnAttributes", referenced from:
      l793 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecReturnData", referenced from:
      l799 in SpeechKit(libSpeechKit.a-i386-master.o)
  "_kSecValueData", referenced from:
      l784 in SpeechKit(libSpeechKit.a-i386-master.o)
      l797 in SpeechKit(libSpeechKit.a-i386-master.o)
      l798 in SpeechKit(libSpeechKit.a-i386-master.o)
      l799 in SpeechKit(libSpeechKit.a-i386-master.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我还发现可以使用 Google Chrome API，但它需要一个 FLAC 音频文件，并且 iOS 不支持它。

任何人都可以在 iOS 上帮助我使用 Nuance SDK 或 FLAC 吗？任何帮助都会很有用！

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:29:55.233

感谢[H2CO3](https://stackoverflow.com/users/529758/h2co3)，我找到了解决问题的方法。我需要在我的项目中包含另外两个框架，*Security.framework*和*CoreFoundation.framework*。

现在，一切正常！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T16:13:08.430

虽然为这个特定问题找到了解决方案，但我想提一下，值得[在 Github 上查看 NuanceDev](http://nuancedev.github.io/samples/#phonegap)。

有使用 Nuance 的 NDEV 移动 SDK 构建的 PhoneGap 应用程序的参考实现

*   [iOS](http://nuancedev.github.io/samples/phonegap/ios/)
*   [安卓](http://nuancedev.github.io/samples/phonegap/android/)
*   [WP7](http://nuancedev.github.io/samples/phonegap/wp7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T18:34:20.917

您是否将这个 Phonegap 插件上传到任何地方，以便我们也可以在我们的项目中使用它？

这只是Android还是也可以在iOS上运行？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-12T16:32:47.567

实际上，我在这篇文章中遇到了很多相同的问题。我尝试使用 Nuance 编写的参考 phonegap 项目，但它是为 cordova 2.6 项目编写的，并且与 plugman 不兼容。我一直致力于创建一个非常基本的跨平台插件，它允许使用 nuances sdk 和 cordova 3.x 兼容性进行语音识别。我还没有真正写过关于它的大量文档，但它确实有效，并且我已经编写了正在使用它的 IOS 7 和 android 4.x 应用程序。 [https://github.com/chalettu/nuance-phonegap-plugin](https://github.com/chalettu/nuance-phonegap-plugin)是仓库所在的位置。如果有人想使用它并需要帮助安装和使用它，请在 github 上给我发消息。

# jquery - 限制在 jQuery DatePicker 中选择几个日期

> ID：13120880
> 
> 赞同：0
> 
> 时间：2012-10-29T11:37:50.683
> 
> 标签：jquery, html

以下代码旨在限制在 datepicker 中选择今天的日期。

```
 jQuery(function () {

        var dateModifier = {
            beforeShowDay: function (dd) {
                var today = new Date();
                if (dd.getDate() === today.getDate()) {
                    return false;
                }
                else {
                    return true;
                }
            }
        };

        jQuery("#txt1").datepicker(dateModifier);

    }); 
```

为此，我明确传递了`dateModifier`包含`beforeShowDay`事件的对象。我在 jQuery 文档上读到，这个事件是针对日历中显示的所有日期触发的。当我们返回时`false`，`dd`日期将被禁用。

但是，此代码禁用所有日期。我错过了什么。

**HTML：**

```
<input id="txt1" type="text" name="name" value=" " /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T11:45:40.833

```
var disabledDays = ["9-21-2010", "9-24-2010", "9-27-2010", "9-28-2010", "9-3-2010", "9-17-2010", "9-2-2010", "9-3-2010", "9-4-2010", "9-5-2010"];
function disableAllTheseDays(date) {
    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
    for (i = 0; i < disabledDays.length; i++) {
        if($.inArray((m+1) + '-' + d + '-' + y,disabledDays) != -1) {
            return [false];
        }
    }
    return [true];
}

var dateModifier = {
        beforeShowDay: disableAllTheseDays
    };

    jQuery("#txt1").datepicker(dateModifier); 
```

[在这里](http://articles.tutorboy.com/2010/09/03/jquery-ui-datepicker-disable-specified-dates/)查看更多

# css - 如何让DIV吸收空间

> ID：13120881
> 
> 赞同：0
> 
> 时间：2012-10-29T11:37:54.800
> 
> 标签：css

我有一个相当琐碎的任务。3 个具有不同背景的 DIV：第一个 - 顶部附件，第二个 - 底部附件，第三个 - 重复背景。当我将内容留在这 3 个包装器中时，我从顶部和底部都有间隔，我无法使用负边距删除它们。好吧，CSS是：

```
.cBlock {
    background: url('top.png') no-repeat center top;
    padding-top: 16px;
}

.cBlock .inner1 {
    background: url('bottom.png') no-repeat center bottom;
    padding-bottom: 130px;
}

.cBlock .inner2 {
    background: url('bg.png') repeat-y center;
    min-height: 250px;
}

.cBlock .inner3 {
    margin-bottom: -130px;
} 
```

HTML是：

```
 <div class="cBlock"><div class="inner1"><div class="inner2"><div class="inner3">
        123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>
    </div></div></div></div> 
```

[结果是](http://i.stack.imgur.com/ScK8o.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:52:35.433

您需要立即关闭第一个和最后一个`DIV`。

```
<div class="cBlock">

    <div class="top"></div>

    <div class="content">
        123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>
    </div>

    <div class="bottom"></div>
</div> 
```

现在您可以直接定位这些元素 ( `position`) 或者您可以使用填充和负边距。

这也是你可以用 CSS 实现的：

```
<div class="content">
    123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>
</div>

/* styling */
.content:before {}
.content {}
.content:after {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:14:14.483

将您的 line-height 重置`line-height:0px`为 parent 和`line-height:normal`child 好吧！

# c++ - 从头开始画大圆圈

> ID：13120884
> 
> 赞同：2
> 
> 时间：2012-10-29T11:38:03.460
> 
> 标签：c++, graphics, drawing, 2d, geometry

我是 C++ 新手，但我觉得这门语言没问题。作为一个学习项目，我决定制作一个小型 2D 图形引擎。这似乎是一个艰巨的项目，但我知道如何继续前进。

我还没有真正开始，但是当我遇到这个问题时，我现在正在脑海中形成一些东西：在某些时候，我将不得不制作一个在屏幕上绘制圆圈的函数。我现在的方法是这样的：

```
in a square with sides from (x-r) to (x+r) loop through x and y,
if at each point, the current distance sqr(x^2+y^2) is less than or equal to r
, then draw a pixel at that point. 
```

这会工作，如果没有，不要费心告诉我，我会弄清楚的。如果 x+r & y+r 在屏幕上，我当然会画这个圆圈。

问题在于有时我需要画出很大的圆圈。例如，如果我需要绘制一个半径为 5000 的圆，则（如果像素循环计算总共需要循环 10000^2 次）。因此，使用 2Ghz 的处理器，这个单圈只能渲染 2Ghz/(10000^2)，即 ~22 次/秒，同时占用整个内核（相信每个像素只需要一次计算，这在真相）。

现在哪种方法是正确的？我想这与使用 GFX 进行这些简单的计算有关。如果是这样，我可以为此使用 OpenGL for C++ 吗？我也想学这个：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T12:03:18.427

我的第一个 C/C++ 项目实际上也是图形库。我没有 OpenGL 或 DirectX，当时使用的是 DOS。我从中学到了很多东西，因为我不断发现新的更好（更快）的方法来绘制到屏幕上。

现代操作系统的问题在于它们实际上不允许你做我当时所做的事情。您不能直接开始使用硬件。坦率地说，这些天你不想再这样做了。

您仍然可以自己绘制所有内容。如果您想放置自己的像素，请查看 SDL。这是一个 C 库，您可以将其包装到您自己的 C++ 对象中。它适用于不同的平台（包括 Linux、Windows、Mac 等），并且在内部它会使用 DirectX 或 OpenGL 之类的东西。

对于真实世界的图形，不只是绘制自己的像素。那是没有效率的。或者至少不是在你不能直接使用硬件的设备上......

但出于您的目的，我认为 SDL 绝对是您的最佳选择！祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T11:41:08.180

您不会通过手动将像素绘制到屏幕上来绘制图形，那是疯狂的所在。

您要使用的是 DirectX 或 OpenGL。我建议你打开谷歌去阅读，那里有很多要读的东西。

一旦你下载了这些库，就会有很多示例项目可供查看，它们会让你入门。

此时有两种方法：有一种计算向量的数学方法，该向量描述了具有大量边的形状（即，它看起来像一个圆）。或者有一种“作弊”方法，即使用 alpha 通道在屏幕上绘制一个圆形的纹理（即图片），以使纹理的其余部分透明。（作弊方法更容易编码，执行速度更快，并且产生更好的结果，尽管它不太灵活）。

如果您想以数学方式进行，那么这两个库都允许您在屏幕上画线，因此您需要从每条线的起点和终点的角度开始您的方法，而不是单个像素。我，你想要矢量图形。

我现在无法进行繁重的数学运算，但是向量方法可能看起来有点像这样（sudo-code）：

```
in-param: num_of_sides, length_of_side;
float angle = 360 / num_of_sides;
float start_x = 0;
float start_y = 0;

x = startX;
y = startX;
for(int i(0); i < num_of_sides; ++i)
{
  float endX, endY;
  rotateOffsetByAngle(x, y, x + lenth_of_side, y, angle * i, endX, endY);
  drawline(x, y, endX, endY);
  x = endX;
  y = endY;
}

drawline(float startX, startY, endX, endY)
{
  //does code that draws line between the start and end coordinates;
}

rotateOffsetByAngle(float startX, startY, endX, endY, angle, &outX, &outY)
{
  //the in-parameters startX, startY and endX, endY describe a line
  //we treat this line as the offset from the starting point

  //do code that rotates this line around the point startX, startY, by the angle.
  //after this rotation is done endX and endY are now at the same
  //distance from startX and startY that they were, but rotated.

  outX = endX;
  outY = endY; //pass these new coordinates back out by reference;

} 
```

在上面的代码中，我们绕着圆的外侧移动，将每条线逐一地画在外侧。对于每条线，我们都有一个起点和一个偏移量，然后我们将偏移量旋转一个角度（这个角度随着我们绕圆移动而增加）。然后我们绘制从起点到偏移点的线。在开始下一次迭代之前，我们将起点移动到偏移点，以便下一行从最后一行的末尾开始。

我希望这是可以理解的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T11:59:46.787

这是绘制实心圆的一种方法。如您所见，它将执行得非常缓慢。

现代图形基于抽象出较低级别的东西，以便对其进行优化；开发人员编写 drawCircle(x,y,r) 并且图形库 + 驱动程序可以将其一直传递到芯片，该芯片可以填充适当的像素。

尽管您使用 C++ 编写代码，但除非您使用图形驱动程序，否则您不会在最接近核心的位置操作数据。甚至在您的 setPixelColour 级别方法和通过网络传递的实际二进制值之间也存在多层子例程调用；几乎在每一层都有检查和额外的计算和例程运行。那么，更快的图形的秘诀就是减少您进行的这些调用的数量。如果您可以将命令 drawCircle 一直获取到图形芯片，请执行此操作。当它像绘制规则形状一样平凡时，不要在单个像素上浪费调用。

在现代操作系统中，有多个图形处理层可以接受像您这样的单个应用程序的请求，并将它们与窗口化、合成和任何其他效果相结合。因此，您“绘制到屏幕”的命令已经由多个图层进行中间处理。您想要提供给 CPU 的是将计算卸载到图形子系统所需的最少信息。

我想说，如果你想学习在屏幕上画东西，玩画布和 js，因为开发周期很容易而且相对轻松。如果您想学习 C++，请尝试 Euler 项目，或使用现有的图形库绘制东西。如果您想编写 2d 图形库，请学习底层图形技术，如 DirectX 和 OpenGL，因为它们是现实中完成图形的方式。但它们看起来很复杂，你说？那么你需要先学习更多的C++。出于某些很好的原因，它们就是这样，无论结果多么复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T11:59:57.250

正如第一个答案所说，您不应该为认真的工作而自己这样做。但是如果你只是想这样做作为一个例子，那么可以这样做：首先定义一个在屏幕上绘制线段的函数：

```
void draw_line(int x1, int y1, int x2, int y2); 
```

这应该相对简单地实现：只需找到变化最快的方向，然后迭代该方向，同时使用整数逻辑找出另一个维度应该改变多少。即，如果 x 变化更快，则`y = (x-x1)*(y2-y1)/(x2-x1)`.

然后使用此函数将圆实现为分段线元素：

```
void draw_circle(int x, int y, int r)
{
    double dtheta = 2*M_PI/8/r;
    int x1 = x+r, x2, y1 = y, y2;
    int n = 2*M_PI/dtheta;
    for(int i = 1; i < n; i++)
    {
        double theta = i*dtheta;
        x2 = int(x+r*cos(theta)); y2 = int(y+r*sin(theta));
        draw_line(x1, y1, x2, y2);
        x1 = x2; y1 = y2;
    }
} 
```

这使用浮点逻辑和三角函数来确定哪些线元素最接近圆。这是一个有点粗糙的实现，但我认为任何想要对非常大的圈子有效的实现都必须做这样的事情。

如果只允许使用整数逻辑，一种方法是先绘制一个低分辨率整数圆，然后将每个选定的像素细分为更小的像素，并在那里选择您想要的子像素，依此类推。这将缩放为 N log N，因此仍然比上述方法慢。但你将能够避免罪和 cos。

# android - Android webview onReceivedError（）不起作用

> ID：13120887
> 
> 赞同：3
> 
> 时间：2012-10-29T11:38:22.453
> 
> 标签：android, android-webview

我试图在我的 web 视图上显示一个警告框而不是“网页不可用”错误页面，但即使在根据文档添加 onReceivedError() 方法后也无法正常工作，如果我遗漏了什么，请建议我，这是我的代码...

```
public class CloudPageHolder extends Activity {
WebView mWebView;
ProgressDialog _dialog ;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mWebView = (WebView) findViewById(R.id.webview);

    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setDomStorageEnabled(true);
    mWebView.loadUrl("file:///android_asset/www/MyPage.html");
    mWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(false);
    mWebView.getSettings().setPluginsEnabled(false);
    mWebView.getSettings().setSupportMultipleWindows(false);
    mWebView.getSettings().setSavePassword(false);
    mWebView.getSettings().getAllowFileAccess();
    mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    mWebView.getSettings().setUseWideViewPort(true);
    mWebView.getSettings().setLoadWithOverviewMode(true);

    mWebView.setWebViewClient(new WebViewClient() {  
        public void onReceivedError(WebView view, int errorCode, String description,     String failingUrl) {  
          new AlertDialog.Builder(CloudPageHolder.this)  
                .setMessage("Something went wrong!")  
                .setPositiveButton(android.R.string.ok,  
                        new AlertDialog.OnClickListener()  
                        {  
                           public void onClick(DialogInterface dialog, int which)  
                            { 

                               dialog.dismiss();
                            }  
                        })  
                .setCancelable(false)  
                .create()  
                .show();  
                }  
        });  

    mWebView.setWebChromeClient(new WebChromeClient() {  
        @Override  
        public boolean onJsAlert(WebView view, String url, final String message, final android.webkit.JsResult result)  
        {  
            new AlertDialog.Builder(CloudPageHolder.this)  
                .setMessage(message)  
                .setPositiveButton(android.R.string.ok,  
                        new AlertDialog.OnClickListener()  
                        {  
                           public void onClick(DialogInterface dialog, int which)  
                            { 
                               result.confirm();
                            }  
                        })  
                .setCancelable(false)  
                .create()  
                .show();  

            return true;  
        } 
  });
 } 
```

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:35:29.927

我不确定您的错误是什么，但 onReceivedError 的文档有些误导。此时，您不能使用此方法拦截 HTTP 错误响应。检查[这些帖子](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/IdKWVJumXlc)。

我正在使用[另](https://stackoverflow.com/questions/2592843/android-how-get-the-status-code-of-an-httpclient-request)一篇文章中描述的方法开发类似的解决方法。

将很快更新详细信息。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T00:07:29.050

我最终找到了一种方法，但它并不漂亮。您可以通过 XMLHttpRequest 在 javascript 中加载页面，这样您就可以访问状态代码。这可能会弄乱进度通知，并且可能还有其他不良行为。但它在我的应用程序中是可以接受的，所以它可能对其他人有一些帮助。

```
public class StatusNotifyingWebView extends WebView {

    public interface OnStatusReceivedListener {
        void onStatusReceived(int statusCode);
    }

    private class JsInterface {
        public void notifyRequestStatus(final int statusCode) {
            getHandler().post(new Runnable() {
                @Override
                public void run() {
                    mOnStatusReceivedListener.onStatusReceived(statusCode);
                }
            });
        }
    }

    private OnStatusReceivedListener mOnStatusReceivedListener;

    public void setOnStatusReceivedListener(final OnStatusReceivedListener listener) {
        mOnStatusReceivedListener = listener;
        addJavascriptInterface(new JsInterface(), "statusNotifyJsInterface");
    }

    public void loadUrlWithStatusEvent(final String url) {
        Assert.assertNotNull(mOnStatusReceivedListener);
        final String script =
                "  var httpRequest = new XMLHttpRequest();\n"
                + "httpRequest.open('GET', '" + url + "', false);\n"
                + "try { httpRequest.send(null); } catch (err) { }\n"
                + "statusNotifyJsInterface.notifyRequestStatus(httpRequest.status);\n"
                + "document.write(httpRequest.responseText);\n"
                + "document.close();\n";

        final String html = "<html><head><script>" + script + "</script></head><body/></html>";
        loadDataWithBaseURL(url, html, "text/html", "UTF-8", null);
    }
} 
```

# python - 在 3 个点之间绘制箭头

> ID：13120892
> 
> 赞同：6
> 
> 时间：2012-10-29T11:38:51.440
> 
> 标签：python, matplotlib, visualization

我正在尝试在 matplotlib 中的三个点之间绘制箭头。

假设我们在 2d 中有 3 个任意点 (A1,A2,A3)，我们要绘制从 A1 到 A2 以及从 A2 到 A3 的箭头。

一些代码使其清楚：

```
import numpy as np
import matplotlib.pyplot as plt
A1=np.array([10,23])
A2=np.array([20,30])
A3=np.array([45,78])
drawArrow(A1,A2);
drawArrow(A2,A3);
plt.show(); 
```

我们如何编写一个函数 drawArrow(tailCoord,headCoord) 来接收箭头尾部和头部的坐标并绘制它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:40:19.353

除非您对所需方法有进一步的特殊要求，否则可以使用[pyplot 的箭头函数](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.arrow)，例如：

```
def drawArrow(A, B):
    plt.arrow(A[0], A[1], B[0] - A[0], B[1] - A[1],
              head_width=3, length_includes_head=True) 
```

API 提到了更多的关键字参数；[在FancyArrow 的 API 中](http://matplotlib.org/api/artist_api.html#matplotlib.patches.FancyArrow)可以找到更多样式选项（这是箭头在引擎盖下实际创建的内容）。

请注意，箭头可能不在绘图，因为显然 pyplot 不一定会调整绘图的 x/y 限制来显示它们。您可能必须通过[plt.xlim](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xlim)和[plt.ylim](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.ylim)自己执行此操作。

# mapreduce - Couchdb - 是否可以停用 reduce_overflow_error 错误

> ID：13120894
> 
> 赞同：4
> 
> 时间：2012-10-29T11:39:08.887
> 
> 标签：mapreduce, couchdb

我正在研究一个 map/reduce，它不能完全返回我在 rereduce 情况下所期望的。

我想调试它，但我至少也想看看里面有什么，所以我输出了很多东西，`reduce_overflow_error`每次运行视图时 Couch 都会返回。

是否可以停用此行为？

我知道这是为了防止开发人员做出不健康的观点，但如果我想做废话，我不应该被允许吗？尤其是调试的时候。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T12:00:47.363

您需要修改 CouchDB 配置以禁用此限制。

通过 curl 的第一种方式：

`curl -X PUT http://localhost:5984/_config/query_server_config/reduce_limit -d '"false"' -H "Content-Type: application/json"`

其次是通过 local.ini 配置修改。只需添加或修改如下所示的部分并重新启动 CouchDB 服务：

```
[query_server_config]
reduce_limit = false 
```

第三个是通过被褥配置页面。我想，你已经猜到应该在那里修改什么参数了（；

但在大多数情况下，这种限制是合理的，因为 reduce 函数应该*减少*输出，而不是让它变大——这就是 map 函数的工作。出于调试原因，最好启用调试日志 - 它们非常详细，可能会显示 map/reduce/任何函数输出。

# r - 绘图的新方法 - 如何导出？

> ID：13120895
> 
> 赞同：5
> 
> 时间：2012-10-29T11:39:10.443
> 
> 标签：r, generics, package, roxygen

我正在制作一个包，我想在其中定义一种新的绘图方法。我正在使用 roxygen 源内文档。这个问题似乎非常类似于： [如何使用 Roxygen 正确记录来自不同包的泛型的 S3 方法？](https://stackoverflow.com/questions/6517222/roxygen-how-to-properly-document-a-s3-method-of-a-generic-in-a-different-packag) 和 [Roxygen2 - 如何正确记录 S3 方法](https://stackoverflow.com/questions/7198758/roxygen2-how-to-properly-document-s3-methods) ，但我仍然无法让它工作。

给我带来麻烦的相关部分是：

```
#' Generic plot method
#'
#' @param x \dots
#' @param ... \dots
#' @export
plot <- function(x, ...) UseMethod("plot")

#' Default plot method
#'
#' @param x \dots
#' @param ... \dots
#' @importFrom graphics plot
#' @method plot default
#' @S3method plot default
plot.default <- function(x, ...) graphics::plot(x, ...)

#' Plotting function for ABI object
#'
#' Description.
#' 
#' @param x ABI object as generated by newABI.
#' @param base Character. Bases to look at.
#' @param ... Other options passed to plot().
#' @return Nothing. Side-effect: plots graphs.
#' @method plot ABI
#' @S3method plot ABI
plot.ABI <- function(x, base, ...) {
#Overly simplified
plot(1, 1, main = base)
} 
```

当我运行它并调查方法（绘图）时，没有为 ABI 对象定义方法。通过 ABI:::plot 访问函数（ABI 是包的名称）确实有效。使用 :: 不会。

在包构建检查期间，有一个警告：

```
* checking S3 generic/method consistency ... WARNING
plot:
  function(x)
plot.ABI:
  function(x, base, ...)
See section ‘Generic functions and methods’ of the ‘Writing R
Extensions’ manual. 
```

似乎在争论中存在分歧。但我不明白这一点，因为泛型有参数 x 和......我的 ABI 方法也是如此（除了基础）。

所以有两个问题，我希望这源于同一个问题： plot.ABI 方法未导出，包检查引发警告。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T11:57:20.860

问题是您的方法需要具有与泛型**相同的参数。**假设您使用的是 R 提供的泛型：

```
> args(plot)
function (x, y, ...) 
NULL 
```

Now`plot()`实际上是一种特殊情况，因为您基本上可以忽略那里有一个论点`y`。

所以你的方法需要和你一样：

```
plot.ABI <- function(x, base, ...) 
```

问题是，与您引用的脚本相反，您必须将泛型重新定义为

```
plot(x) 
```

并且因为缺少`...`，所以`R CMD check`会抱怨。

因此，如果它已经存在，请不要记录或提供泛型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T11:45:51.780

几个问题：

1.  不要包含已经在别处定义的泛型。只需添加您的方法。

2.  每个方法的签名必须至少以相同的顺序包含泛型中的每个元素。有时很烦人，但这是无可争辩的。

**更新**

我曾经说过，“您`@export`需要列出函数名称”，但显然这是不正确的。见评论。另请注意，列出该方法应将其导出。我似乎记得在你的包的命名空间中没有包含泛型的情况下需要显式导出，但我可能是错的（经常是这样！）。

# c# - 创建 XAML 元素的新实例

> ID：13120897
> 
> 赞同：1
> 
> 时间：2012-10-29T11:39:14.130
> 
> 标签：c#, silverlight, xaml

我有一个包含 Vectorlight RichTextBox 的 ChildWindow，每次显示孩子时我都需要创建相同元素的新实例。（有一个 childwindow 实例，我多次显示和隐藏）

这是我使用的代码：

```
this.childwindow.rtb = null;
this.childwindow.rtb = new Liquid.RichTextBox(); 
```

之后的问题是子窗口显示一个新的和空的 RichTextBox（可能是新的实例），如果我对 this.childwindow.rtb 进行一些更改，则不会呈现 Canges。

谢谢，对不起我的英语不好

# php - isset $_post 问题与 mysql 查询

> ID：13120900
> 
> 赞同：0
> 
> 时间：2012-10-29T11:39:26.993
> 
> 标签：php, mysql, post

我只是在一个项目的后端工作，这个片段有一个小问题

```
if (isset($_POST['id'])) {
    $cat_delete = "DELETE FROM category WHERE categoryid='".$_POST['id']."' ";
    $cat_delete_ex = mysql_query($cat_delete);}` 
```

但如果 id 设置为 post，则不会发生任何事情。

当我删除时，mysql查询正在工作

```
if (isset($_POST['id'])) 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:45:04.013

好吧，我不确定您的方法是否安全，但我会这样做，如果 id 是数字，甚至可能会抛出一个正则表达式来检查数字：

编辑：我做了一个修改，因为你正在处理一个 ID，我会假设 ID 只是数字，所以我不会转义它，我只会删除除数字之外的所有内容。这可能更适合您的情况。我还将函数转换为一个类，这样您就可以将脚本重用于多种类型的清理字符串。也许是因为我也是一个超级成功者，我不知道。添加，强迫症等。归咎于它:)

```
$postID = isset($_POST['id']) ? sanitize::ID($_POST['id']) : '';

if (sanitize::email("test@example.com")){
    echo "Real email";
} else {
    echo "Fake email";
}

if ($postID != ''){
    $cat_delete = "DELETE FROM category WHERE categoryid='".$postID."' "; 
    $cat_delete_ex = mysql_query($cat_delete);
}

class sanitize{
    function ID($string){
        $string = preg_replace('/[^0-9,]|,[0-9]*$/','',$string);
        return $string;
    }
    # I added another sanitize function so you can see what you can do
    # with it. Add phone numbers, domain names, etc... Each one could
    # be called with sanitize::{FUNCTION}
    function email($string){
        if (!ereg("^[^@]{1,64}@[^@]{1,255}$", $string)) {
            return false;
        }
        $email_array = explode("@", $string);
        $local_array = explode(".", $email_array[0]);
        for ($i = 0; $i < sizeof($local_array); $i++) {
            if (!ereg("^(([A-Za-z0-9!#$%&'*+/=?^_`{|}~-][A-Za-z0-9!#$%&'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$",$local_array[$i])) return false;
        }
        if (!ereg("^\[?[0-9\.]+\]?$", $email_array[1])) {
            $domain_array = explode(".", $email_array[1]);
            if (sizeof($domain_array) < 2) return false;
            for ($i = 0; $i < sizeof($domain_array); $i++) {
                if (!ereg("^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]+))$", $domain_array[$i])) return false;
            }
        }
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:56:38.910

你确定你用post作为id吗？（问因为是正确的方法，但我有太多次了

```
<form action="action.php?id=hereistheid" 
```

这将在 $_GET 而不是 $_POST 中带来 id。接下来检查

```
$id=(int)$_POST['id'];
if($id)
{
//do smth
} 
```

# ios6 - 应用在 ios6 设备上运行非常缓慢

> ID：13120901
> 
> 赞同：2
> 
> 时间：2012-10-29T11:39:27.447
> 
> 标签：ios6

我有一个部署目标为 iOS 3.0 的应用程序。在所有未升级到 iOS6 的设备上运行流畅如丝。但是，在 iOS6 上，动画很慢，滚动 tableview 很慢（不管它们是否包含大量数据，非常不一致）。

我一直在浏览代码，似乎找不到任何导致这种滞后的东西。该项目禁用了 ARC（因为它仍然支持 iOS3.0），我已将部署目标更改为 iOS6 以查看是否会进行任何更改，但事实并非如此。

有遇到类似问题的开发者吗？我开始认为这可能是我的 Xcode 项目中的一个设置，因为滞后性非常不一致；某些屏幕在 iPhone 5 上运行流畅，而相同的屏幕在 iPhone 4 上运行滞后（反之亦然！）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:46:07.783

我发现了问题：有一个通过重复的背景图像“stripe.png”

```
[bgView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"stripe.png"]]]; 
```

stripe.png 文件大小为 3x3。提供了一个@2x 版本，但它具有相同的大小（3x3）。当我制作了它的 6x6 版本时，一切都再次顺利进行。

**始终使您的@2x 图像大小翻倍！**

# mysql - mysql tinyint(1) vs tinyint(2) vs tinyint(3) vs tinyint(4)

> ID：13120904
> 
> 赞同：60
> 
> 时间：2012-10-29T11:39:28.100
> 
> 标签：mysql

> **可能重复：**
> [MySql：Tinyint (2) vs tinyint(1) - 有什么区别？](https://stackoverflow.com/questions/12839927/mysql-tinyint-2-vs-tinyint1-which-difference)

有什么区别：

*   `TinyINT(1)`
*   `TinyINT(2)`
*   `TinyINT(3)`
*   `TinyINT(4)`

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-29T11:45:14.580

TinyINT(M) 的范围始终为 -128..+127 有符号或 0..255 无符号。M是显示宽度。

> M 表示整数类型的最大显示宽度。最大显示宽度为 255。显示宽度与类型可以包含的值的范围无关，如第 11.2 节“数值类型”中所述。对于浮点和定点类型，M 是可以存储的总位数。

来自[http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T11:47:56.170

根据[Mysql 手册](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html)，所有十进制数字类型都支持语法：

```
Integer Types (Exact Value) 
```

使用`DECIMAL`它时[，您可以指定精度](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)。

对于`*INT`类型，它[主要具有显示功能](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-attributes.html)，该功能还指定使用时应添加多少个地方`ZEROFILL`。

字节大小不受影响（[`1B`for`TINYINT`](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html#integer-types)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T11:41:58.743

TinyINT = -128...+127

(n) 用于显示目的。

# java - SWIG 重命名函数

> ID：13120906
> 
> 赞同：0
> 
> 时间：2012-10-29T11:39:31.393
> 
> 标签：java, java-native-interface, swig

我在接口文件中使用以下代码来重命名全局函数`free`

```
%ignore free;
%rename(my_free) free; 
```

但是我没有看到的结果头文件`free`被重命名为`my_free`. 我在这里做错什么了吗？上面几行放在接口文件的顶部，分别表示第一行和第二行。我在[这里](http://binf.gmu.edu/software/SWIG/SWIGPlus.html#ambiguity_resolution_renaming)看到了这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:18:46.643

The example you showed seems to work exactly as you'd expect. For example given:

```
%module test

%ignore free;
%rename(my_free) free;

// Function declaration:
void free();
// Or use %include if you prefer 
```

Running:

```
swig -Wall -java test.i 
```

Generates test.java as:

```
public class test {
  public static void my_free() {
    testJNI.my_free();
  }
} 
```

So it has been renamed as expected.

Actually the `%ignore` is entirely redundant here though, the `%rename` alone would be sufficient to achieve this result. The order is important though - the `%rename` supersedes the `%ignore` and both must be before the declaration of `free` is seen.

The official documentation is at [swig.org](http://www.swig.org/Doc1.3/SWIGPlus.html#ambiguity_resolution_renaming), I'd tend to prefer that over other sites. (If you're [using SWIG 2.0 there's a lot of extra features for renaming too](http://www.swig.org/Doc2.0/SWIG.html#SWIG_rename_ignore) and you can use `%rename` to ignore functions: `%rename("$ignore") free;`)

# windows-phone-7 - Windows Phone 7 必应地图内存上升

> ID：13120908
> 
> 赞同：1
> 
> 时间：2012-10-29T11:39:40.243
> 
> 标签：windows-phone-7, bing-maps

我对 WP7 上的内存泄漏和 BingMap 控制有一个奇怪的问题。在我的应用程序中，当从具有地图控制的页面导航时，内存使用率会变高。我清除了所有引用、事件、将地图模式设置为 NullMode 等，就像在这个问题中所说[的 bing 地图控制的内存问题，](https://stackoverflow.com/questions/10433340/memory-issue-for-bing-map-control)但它对我不起作用。我只尝试了空白页和地图，但问题仍然存在。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:09:35.097

这是 WP7 中 Bing 地图控件的一个已知问题。尝试使用 WP8/8.1 中的地图

# iphone - colorWithPatternImage 和 colorWithPatternImage.CGColor 翻转

> ID：13120910
> 
> 赞同：2
> 
> 时间：2012-10-29T11:39:43.483
> 
> 标签：iphone, objective-c, ios, core-graphics

我有一个图案图像（底部有阴影的红色纹理）。当我使用此代码时

```
view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myPattern.png"]]; 
```

没关系，阴影在底部。但是当我使用

```
view.layer.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"subscribe-pattern.png"]].CGColor; 
```

这是一个麻烦。图像翻转（阴影在顶部）。你能告诉我，我该如何解决这个问题？我需要使用第二种方法获得未翻转的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T13:52:05.733

正如 bobnoble 在他的评论中提到的，Core Graphics 和 iOS 已经颠倒了起源。iOS 从屏幕左上角开始，Core Graphics 从左下角开始。

通过访问视图的 layer 属性，您将下降到核心图形级别。如果你必须下降到那个水平，你必须开始倒立工作。一个简单的解决方法是预先翻转您的模式。只需将其从图形编辑器中倒置保存即可。如果您需要在 UI 和 CG 级别使用相同的图像，您始终可以保存两个版本。

在代码中，您可以在绘制倒置图像之前翻转和平移 CG 层，然后将该层返回到之前的状态以进行进一步绘制。它有点复杂，但很多 Core Graphics 教程都很好地涵盖了它。

# android - Android：在主线程 AsyncTask 类中测试网络连接

> ID：13120913
> 
> 赞同：0
> 
> 时间：2012-10-29T11:39:52.880
> 
> 标签：android, android-asynctask

我正在使用 http 客户端解析服务器上的 xml ......如果互联网已连接，我想给出条件。

这是类 testConnection ：

```
 public boolean testConnection()
        {
            ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnected()) 
            {
               Log.d("NetWork :", "Network available");
               return true;
            } 
            else 
            {
                Log.d("NetWork :", "Network not available");
                return false;
            }
        } 
```

我的 asyncTask 类工作正常。我在活动中将条件放在 onCreate 方法中：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
         setContentView(R.layout.main);
    //asyncTask is main thread class that parsing xml from server
    asyncTask task = new asyncTask();
    if(testConnection())
    {
        task.execute();
    }
    else
    {
        startActivity(new Intent("com.airport.testConnection"));
    }

} 
```

问题是，当我关闭互联网连接（禁用 wifi）并打开应用程序时，它总是崩溃。

所有答案和评论将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:53:37.230

在开始活动中传递上下文（this）

# android - 如何在微调器 OnItemClick 事件中获取键和值

> ID：13120921
> 
> 赞同：2
> 
> 时间：2012-10-29T11:40:23.683
> 
> 标签：android, web-services, spinner

这是我将微调器中的数据与键（产品名称）和值（产品ID）绑定的代码。但我无法获得 OnItemSelect 的值。

```
public class BindDropDown {

    private String name;
    private String id;

    public String getName() {
        return name;
    }

    public void setNames(String name) {
        this.name = name;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String toString() {
        return (name);
    }

} 
```

和我的安卓代码：

```
public class SageActivity extends Activity implements OnItemSelectedListener {

    public final String SOAP_ACTION = "http://tempuri.org/PageLoadEvent ";
    public final String OPERATION_NAME = "PageLoadEvent ";
    public final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
    public final String SOAP_ADDRESS = "http://192.168.7.106:90/MyWebserviceProfile/Service1.asmx";

    private static final String Cuspr_CustomerProductID = "Cuspr_CustomerProductID";
    private static final String ProdName = "ProdName";

    private EditText text1;

    private Button button;
    private Spinner spinnerProduct;

    Object item = null;
    JSONObject jsonObj = null;

    // you can use this array to find the school ID based on name
    ArrayList<BindDropDown> productList = new ArrayList<BindDropDown>();
    // you can use this array to populate your spinner
    ArrayList<String> productNames = new ArrayList<String>();
    ArrayAdapter<BindDropDown> spinnerArrayAdapter = null;
    // contacts JSONArray
    JSONArray custProduct = null;
    BindDropDown cp = new BindDropDown();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sage);
        text1 = (EditText) findViewById(R.id.editText1);
        spinnerProduct = (Spinner) findViewById(R.id.my_spinner);

        spinnerProduct.setOnItemSelectedListener(this);
        ConnectWS();

        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                text1 = (EditText) findViewById(R.id.editText1);
                String txtID1 = spinnerProduct.getItemAtPosition(
                        spinnerProduct.getSelectedItemPosition()).toString();

            }
        });
    }

    public void ConnectWS() {

        SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                OPERATION_NAME);
        PropertyInfo pi = new PropertyInfo();
        pi.setName("description");
        pi.setValue(text1.getText().toString());
        pi.setType(String.class);
        request.addProperty(pi);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
        httpTransport.debug = true;
        String ss = httpTransport.responseDump;
        // Log.d("Result --- ", ss);

        Object response = null;
        SoapPrimitive result = null;

        try {
            httpTransport.call(SOAP_ACTION, envelope);

            if (envelope.bodyIn instanceof SoapFault) {
                String str = ((SoapFault) envelope.bodyIn).faultstring;
                Log.i("", str);
            } else {
                SoapObject so = (SoapObject) envelope.bodyIn;
                Log.d("WS", String.valueOf(so));

            }
            if (envelope.getResponse() != null) {
                result = (SoapPrimitive) envelope.getResponse();

                String json = result.toString();

                jsonObj = (JSONObject) new JSONTokener(json).nextValue();
                custProduct = jsonObj.getJSONArray("CustomerProduct");

                for (int i = 0; i < custProduct.length(); i++) {
                    JSONObject jsonObject = custProduct.getJSONObject(i);

                    cp.setNames(jsonObject.optString("ProdName"));
                    cp.setId(jsonObject.getString(Cuspr_CustomerProductID));
                    productList.add(cp);
                    productNames.add(jsonObject.optString("ProdName"));
                }
                spinnerProduct.setAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_spinner_dropdown_item,
                        productNames));

            } else { // uh oh response is null
            }

            // SoapPrimitive response = (SoapPrimitive) envelope.getResponse();

        } catch (Exception exception) {
            response = exception.toString();
        }
    }

    public void onNothingSelected(AdapterView<?> parent) {

    }

    public void onItemSelected(AdapterView<?> parent, View v, int position,
            long id) {

        Object test123 = spinnerProduct.getAdapter().getItem(position);
        // selection.setText(items[position]);
        // String test123 = jsonObject.getString(Cuspr_CustomerProductID);
        String txtID = cp.getId();
        text2.setText(txtID);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.sage, menu);
        return true;
    }

} 
```

我需要从微调器中获取值的任何解决方法..？

问候拉贾 M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:48:45.307

因为你有productList，作为Activity类的全局变量，你总是可以访问这个列表，所以在onItemSelected中获取这个列表的项目，并从这个项目中获取id和名称，如下：

```
public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    BindDropDown item= productList.get(position);
    String txtID = item.getId();
    text2.setText(txtID);
} 
```

编辑：

将解析中的循环更改为以下内容：

```
for (int i = 0; i < custProduct.length(); i++) {
                    JSONObject jsonObject = custProduct.getJSONObject(i);
                    BindDropDown cp=new BindDropDown();
                    cp.setNames(jsonObject.optString("ProdName"));
                    cp.setId(jsonObject.getString(Cuspr_CustomerProductID));
                    productList.add(cp);
                    productNames.add(jsonObject.optString("ProdName"));
                } 
```

因为同一个对象被重复添加到列表中。

# mysql - 100万点击/天的MySQL解决方案

> ID：13120925
> 
> 赞同：8
> 
> 时间：2012-10-29T11:40:44.190
> 
> 标签：mysql, partitioning, openx

我们正在一个 MySQL 数据库上运行一个自定义 OpenX 广告服务器，该服务器大约为 . 100 万次点击/天。我们需要存储所有这些点击信息并根据它显示统计信息。

目前，所有点击信息每 2 天汇总一次，并删除特定点击信息。但是我们希望为我们的附属公司提供一项新功能，该功能将允许他们设置动态跟踪 ID (TID)，并且基本上可以基于此跟踪他们的点击和转化。

所以，问题是我们的点击表每天至少会增长 100 万个条目，我们需要能够搜索这个表并显示一个用户在特定时间段内的所有点击，按 TID 分组我上面提到的，还是按TID搜索的。

我查看了 MySQL 分区，它似乎是一个很好的解决方案，但是，我不确定它是否仍能在巨大的数据库（可能有数十亿个条目）上正常工作。

您认为解决此问题的正确方法是什么？

**编辑：**

根据您的回答，我现在正在考虑一个混合解决方案。

我们已经有一个“LIVE”表，当在维护时聚合点击时，条目会从该表中删除，如下所示：

**表：点击次数**

**查看器_id | ... | 日期时间 | 附属ID | ... | 时间**

（我跳过了此时不重要的列）

在维护时，我可以将所有内容移到另一个看起来几乎相同的月度表中，例如**Table: clicks_2012_11**，它具有**date_time**、**affiliate_id**和**tid**的索引，并由**affiliate_id**分区。

所以现在，当一个会员想要查看他过去 2 个月的统计数据时，我知道我必须查看**表格：clicks_2012_10**和**表格：clicks_2012_11**（我将时间范围限制为最多 2 个月）。因为我有按**affiliate_id**分区的表，所以只会从2 个表中搜索所需的分区，我现在可以列出过去2 个月内有任何活动的所有TID。

**您如何看待这种方法？有什么明显的问题吗？我是否在没有充分理由的情况下过度复杂化了事情？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:11:34.857

大（甚至是“巨大”）表中没有任何固有的东西会使 MySQL 失败。大表在以下方面主要是一个问题：

*   磁盘空间
*   缓存使用（您可能无法在内存中运行）
*   维护（架构更改，重建，...）

您需要解决所有这些问题。

分区主要用于批量数据维护，例如删除整个分区。默认情况下仅在某些列上对大表进行分区当然不是最佳实践。总是出于特定原因引入分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:16:09.027

插入优化和检索优化通常是相互排斥的。使用两张表可能会更好：

```
live data: no (or minimal) keys, myisam to remove transaction overhead, etc...
historical data: indexed up the wazoo, with data moved over from the live data on a periodic basis. 
```

# ios - 需要解释 iOS 中的 @property/@synthesize

> ID：13120927
> 
> 赞同：31
> 
> 时间：2012-10-29T11:40:54.953
> 
> 标签：ios, objective-c, properties

不是一个完整的菜鸟 我对 iOS 编程和 Ojbective-C 还是很陌生。我主要来自 C（DSP、微控制器）、Delphi XE2/Pascal、Visual Basic 和 Java（桌面和 Android 应用程序）的背景。

我主要通过 Apress 的《Beginning iOS 5 Development》一书学习 Cocoa。

最近我观看了 WWDC 2012 的视频并浏览了他们的一些示例代码，我必须说我对编写我的应用程序的正确方法感到困惑，更具体地说，是使用 @property/@synthesize 词。

在书中大多数（不是全部）示例代码用于定义属性，例如

```
ViewController.h
@property (strong, nonatomic) NSMutableArray *list;

ViewController.m
@synthesize list; 
```

然后所有代码访问综合列表与

```
self.list 
```

甚至简单地

```
list 
```

现在，在我阅读的每个 WWDC 代码示例中，我看到程序员定义了一个属性，但是在 .m 文件中，他们执行了类似的操作

```
@synthesize list = _list; 
```

有时访问

```
self.list 
```

或者

```
_list 
```

我很困惑。什么是正确的做法？由于 Apple 程序员都使用下划线，我认为我应该这样做，但为什么这本书没有？list 和 _list 有区别吗？而且，由于我在同一个对象中，为什么有时使用 self.list 有时使用 list/_list。

有时他们不使用@synthesize，我认为这是他们想要重新编写自己的访问器和修改器的时候（到目前为止，我从来没有这样做过）。

我在网上到处阅读，但没有什么足够清楚让我的想法正确，所以我指望 StackOverflow 在这里带来光明。

最后但并非最不重要的一点是，我更喜欢并根据当前的 iOS 6 最佳实践/编程技术进行回答。没用告诉我如何在旧版 iOS 中正确操作。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-29T12:00:02.793

没有正确的方法。只有您喜欢的风格。

最新的编译器对属性声明进行隐式综合。

`@synthesize list = _list;`.

你的代码中从来没有写过任何东西。它只是发生。

然而，这并不能阻止你明确地这样做。

`@synthesize list = somethingelse;`

`list`因此，当您通过访问器 ( )请求指向的指针时，`self.list`您将获得指向`somethingelse`

大多数情况下`NSMutableArray *thing = self.list`相当于`NSMutableArray *thing = somethingelse`

仅仅因为 Apple 使用一种风格并不意味着你必须这样做。每个公司通常都有自己的编码风格。

使用的主要问题`@synthesize list;`是它带来了您可以编写的风险

`self.list = thing`或`list = thing`。

前者使用综合`setList:`访问器，而后者不使用，并在您的代码中放置相关错误的风险，尽管它并不`ARC`像您没有发生`strong`属性泄漏那样糟糕。

无论您使用什么样式，保持一致并注意直接使用 ivar`list = thing`与使用其访问器相比的效果`self.list = thing`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-29T11:46:10.860

这是一种语言功能，在过去几年中其使用迅速发展，它解释了各种形式。使用最新的工具，您可以选择忽略`@synthesize`并使事情合理运行。

在这种情况下，默认行为会产生与 相同的效果`@synthesize list = _list;`。

# javascript - 分配返回匿名函数的匿名函数

> ID：13120932
> 
> 赞同：5
> 
> 时间：2012-10-29T11:41:35.360
> 
> 标签：javascript

JavaScript调用这样的东西有什么区别：

```
var reader = new FileReader();

reader.onload = (function (theFile) {
    return function (e) {
        loadData(e.target.result); 
    };
})(file);

reader.readAsText(file); 
```

和（结果在 loadData 函数中是一样的）：

```
var reader = new FileReader();

reader.onload = function(e) {
    loadData(e.target.result);
}; 

reader.readAsText(file); 
```

到目前为止，我一直将 JavaScript 用于简单的任务（输入验证、简单的 ajax 调用），但现在我需要更深入的了解......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:52:09.387

在您的特定情况下没有区别（请注意，您的第一个片段中的函数是使用参数调用的`file`，但由于您忽略它，它不应该有任何副作用）。但是，请看以下示例：

```
var reader = new FileReader();

var my_temporary_var = 42;

reader.onload = function(e){
    loadData(e.target.result, my_temporary_var);
} 
```

到目前为止，一切都是一样的。但是，如果您进行更改`my_temporary_var`，它也会在您的匿名函数*内部进行更改。*为了防止这种情况，您创建了一个闭包：

```
reader.onload = (function(some_value) {
    return function(e){
        loadData(e.target.result, some_value);
    };
})(my_temporary_var); 
```

你创建一个匿名函数，它接受你想要绑定到另一个函数的参数，然后立即调用这个函数。请注意，依赖`my_temporary_var`已解决。

### 其他示例

有些人喜欢在 for 循环中创建许多函数：

```
var i;
for(i = 0; i < myObjects.length; ++i)
    myObjects[i].onload = function(e) { myObjects[i].doSomething(); }; 
```

让我们假设`myObjects[0].onload`将首先处理，但*在*for 循环之后。给定的处理程序`function(e) { myObjects[i].doSomething(); };`使用 object `myObjects[i]`。但是，`i == myObjects.length`: 我们访问了一个甚至不存在的对象！由于我们尝试访问该函数的属性，我们将得到一个异常并且脚本将停止。

发生这种情况是因为`i`在匿名函数中是一个引用，而不是用作值。为了防止这种情况，您必须使用闭包：

```
var i;
for(i = 0; i < myObjects.length; ++i)
    myObjects[i].onload = (function(index){
        return function(e) { myObjects[index].doSomething(); };
    })(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:02:37.867

它与以下示例非常相似：

```
var fruit = "Apple";

var fruit = (function(X) {
    return "Apple";
})(1); 
```

您只需将分配封闭在一个闭包中，在上述情况下，这根本没有任何作用。但如果你这样做：

```
var fruit_names = ["Pear", "Apple"];
var fruits = [];
for (x in fruits) {
    fruits.push({
        getName: (function(fruit_id) {
            return fruits[fruit_id];
        })(x)
    });
} 
```

您刚刚创建了一个对象数组，它们都具有该函数，它们从数组`getName`中返回它们自己的名称。`fruit_names`这种对闭包的使用可以创建非常灵活的结​​构，因为在这个示例中，您可以通过更改`fruit_names`数组来更改水果对象的名称，该数组用作对象的配置接口。

# git - 在 Windows 7 的 git bash 中打印欢迎消息

> ID：13120936
> 
> 赞同：2
> 
> 时间：2012-10-29T11:41:45.620
> 
> 标签：git, git-bash

当我在 Windows 中打开 a 时，如何打印包含我的`git`别名的欢迎消息？`git bash`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T20:22:17.050

的内容[`/etc/motd`](http://manpages.ubuntu.com/manpages/hardy/man5/motd.5.html)在交互式登录 Bash shell ( `bash --login`) 后显示在终端上。如果您在*Git for Windows*版本中省略了该文件，请使用您喜欢的编辑器[`/etc/motd`](http://manpages.ubuntu.com/manpages/hardy/man5/motd.5.html)创建一个。`cat`

```
# == Git Bash on Windows ==
#  - /etc/motd  = Message of the Day 
# - - - - - - - - - - - - -    
cat > /etc/motd
Welcome to the Git Bash Shell
- Try "pwd -W" versus "pwd -L"
- - - - - - - - - 
```

*CTRL-D*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T12:35:31.673

只需定义一个`HOME`环境变量，（未`git-bash.bat`在 msysgit 包含的脚本中定义）。

在您选择的目录中（例如：`%USERPROFILE%`），定义一个 .bashrc 文件，其内容如下：

```
git config --get-regexp alias 
```

（来自“[如何列出/显示 Git 别名？](https://stackoverflow.com/questions/7066325/how-to-list-show-git-aliases) ”）

每次使用 msysgit 打开 bash 会话时，这将显示所有 git 别名。

```
alias.st status
alias.lg log --all --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)%an%Creset' --abbrev-commit --date=relati    ve
alias.co checkout
alias.ci commit
alias.br branch
alias.lo !sh -c 'git log $1' -
alias.impact !git ls-files -z | xargs -0n1 git blame -w -C | sed -r 's/^[^(]+\((.*) [0-9]{4}-.*/\1/' | sed -r 's/ +$//' | sort -f | uniq -c | sort -nr 
```

然而，[OP Wilhelmsen](https://stackoverflow.com/users/1340942/wilhelmsen)[在评论中](https://stackoverflow.com/questions/13120936/print-welcome-message-in-git-bash-in-windows-7/13121768#comment17842770_13121768)问道：

> 你知道我怎样才能在印刷品上省略别名这个词吗？

当然，这是一个基本的[bash 字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)操作：

```
a=$(git config --get-regexp alias)
echo "${a//alias./}" 
```

这将显示：

```
st status
lg log --all --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)%an%Creset' --abbrev-commit --date=relative
co checkout
ci commit
br branch
lo !sh -c 'git log $1' -
impact !git ls-files -z | xargs -0n1 git blame -w -C | sed -r 's/^[^(]+\((.*) [0-9]{4}-.*/\1/' | sed -r 's/ +$//' | sort -f | uniq -c | sort -nr 
```

请注意`${a//alias./}`，为了将字符串“ ”中的*所有*“ ”替换为空字符串。 并且双引号对于保持换行符是强制性的。（否则，所有别名将显示在*一行*上）。`alias.``a`
`echo "$..."`

# c - C、每次运行时加号

> ID：13120938
> 
> 赞同：0
> 
> 时间：2012-10-29T11:41:53.427
> 
> 标签：c, while-loop

你好，在编码方面相当新，我有这个程序应该在每次运行程序时添加一个数字，它计算 1 + 2 + 3 +......(n - 1) + n 和一个比较将值设置为 (n*(n+1))/2，然后在相同或不同时显示一条消息。

```
#include <stdio.h>

int main(void)
{

  int value = 0, n_data_value, count = 0, second_value;

  printf("Enter a number\n");
  scanf("%lf", &n_data_value);

  while (count < 10) {
   value = (1 + value) + (n_data_value - 1) + n_data_value;
   printf("%f\n", value);
   second_value = (n_data_value * (n_data_value + 1))/2;
   printf("The number is %f\n", value);
   count = count + 1;

   if(value = second_value){
     printf("value = %f and second_value = %f", value, second_value);
   }
  } 
 return 0;
} 
```

当我运行它时，我得到了这个

> 输入数字 3
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000
> 
> 0.000000
> 
> 数字是 0.000000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:43:13.173

`%d`与/中的`int`变量一起使用。`scanf``printf`

`%lf`是为了`double`价值观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:45:21.343

`value`匹配测试`second_value`也是错误的。用于`==`测试是否相等

即改变

```
if(value = second_value){ 
```

到

```
if(value == second_value){ 
```

请注意，启用警告的编译（`-Wall`对于 gcc，`/W4`对于 msvc）会为您标记这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:50:47.363

我想你只需要这个

```
#include <stdio.h>

int main(void)
{

  int value = 0, n_data_value, count = 1, second_value;

  printf("Enter a number\n");
  scanf("%d", &n_data_value);

  while (count <= n_data_value) {//while loop to calculate 1+2+3+...+n
   value = value + count;
   count = count + 1;
  }
  second_value = (n_data_value * (n_data_value + 1))/2;//calculates n(n+1)/2
  printf("The number is %d\n", second_value);

 if(value == second_value){//compares value
     printf("value = %d and second_value = %d", value, second_value);
   } 
 return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T13:20:43.863

如果您想执行 1 次以上：只需添加类似的内容：

```
#include <stdio.h>

int main(void)
{

   int value = 0, n_data_value, count = 1, second_value;
   char char_quit='';

   do //Infinite loop
   {

      printf("Enter a number\n");
      scanf("%d", &n_data_value);

      while (count <= n_data_value) {//while loop to calculate 1+2+3+...+n
        value = value + count;
        count = count + 1;
      }
     second_value = (n_data_value * (n_data_value + 1))/2;//calculates n(n+1)/2
     printf("The number is %d\n", second_value);

     if(value == second_value)//compares value
     {
        printf("value = %d and second_value = %d", value, second_value);
     } 

     //Ask to continue ?
     printf("Do you want to continue ? Y/N \n"); //Y or any other key will force to continue the program
     scanf("%c", &char_quit );

  }while (char_quit == 'n' || char_quit == 'N');

  return 0;
} 
```

如果你想要一个无限循环，你自然可以使用类似 :while(1) 的东西来代替“do while”。

# html - Internet Explorer <= 7 的行高替代项

> ID：13120940
> 
> 赞同：0
> 
> 时间：2012-10-29T11:41:57.557
> 
> 标签：html, css, internet-explorer

早上，Internet Explorer 7 不支持 line-height，它被忽略了。我怎么解决这个问题？是否存在 Internet Explorer <= 7 的替代标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:43:58.537

尝试改用填充。假设你的字体是**12px**，你想设置一个**20px**的行高，这样你就可以`padding: 3px 0;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T11:47:44.557

请检查 IE7 及以下版本的浏览器行高

[http://www.positioniseverything.net/explorer/lineheightbug.html](http://www.positioniseverything.net/explorer/lineheightbug.html)

# java - 如何限制android中edittext的输入时间

> ID：13120947
> 
> 赞同：9
> 
> 时间：2012-10-29T11:42:32.940
> 
> 标签：java, android, validation, android-edittext

我必须允许用户在即时编辑文本中以##:## 格式输入时间，有什么方法可以实现吗？我使用了下面的代码，但它不起作用。

我可以输入超过 24 个值的数字，例如 45623:5689。

```
edit.setInputType(InputType.TYPE_DATETIME_VARIATION_TIME) 
```

甚至`android:text="time"`也不行。

我怎么能做到这一点。任何人都可以建议我怎么做这件事。

我想允许用户在前 2 个地方输入最多 23 个值，然后是 compulasary : 然后用户最多可以允许 59 个值。

例如

```
23:59 correct
24:05 incorrect
02:56 correct
02:79 incorrect 
```

我也使用了这个自定义过滤器，但它不起作用

我从 SO 的其他地方得到了这段代码。

**代码：**

```
 InputFilter timeFilter = new InputFilter() {
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest,
                int dstart, int dend) {
            if (source.length() == 0) {
                return null;// deleting, keep original editing
            }
            String result = "";
            result += dest.toString().substring(0, dstart);
            result += source.toString().substring(start, end);
            result += dest.toString().substring(dend, dest.length());

            if (result.length() > 5) {
                return "";// do not allow this edit
            }
            boolean allowEdit = true;
            char c;
            if (result.length() > 0) {
                c = result.charAt(0);
                allowEdit &= (c >= '0' && c <= '2');
            }
            if (result.length() > 1) {
                c = result.charAt(1);
                allowEdit &= (c >= '0' && c <= '9');
            }
            if (result.length() > 2) {
                c = result.charAt(2);
                allowEdit &= (c == ':');
            }
            if (result.length() > 3) {
                c = result.charAt(3);
                allowEdit &= (c >= '0' && c <= '5');
            }
            if (result.length() > 4) {
                c = result.charAt(4);
                allowEdit &= (c >= '0' && c <= '9');
            }
            return allowEdit ? null : "";
        }
    }; 
```

**编辑问题：main.xml 文件代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical"
    android:padding="10dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/txtRecipientName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="@string/recipient_name" />

        <EditText
            android:id="@+id/edTxtRecipient"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:paddingLeft="20dp" >

            <requestFocus />
        </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/txtParcelDeliverTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingRight="20dp"
            android:text="@string/delivered_time" />

        <EditText
            android:id="@+id/edTxtParcelDeliverTime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:paddingLeft="20dp" >
        </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnRecipient_OK"
            android:layout_width="100dp"
            android:layout_height="wrap_content"
            android:text="@android:string/ok" />
    </LinearLayout>

</LinearLayout> 
```

此代码有效，但如果我插入第一个字母并插入正确的值，则它不起作用，因为`source`包含其先前的字符值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:02:47.537

尝试将字符转换为整数，然后测试它们是否大于 24 和 60。

```
int a = ((int) result.charAt(0)) - 48;
int b = ((int) result.charAt(1)) - 48;
int c = ((int) result.charAt(3)) - 48;
if(a < 0 || b < 0 || c < 0) {
    Not right.
}

if((a > 2 || (a == 2 && b > 3)) || c > 59) {
    Neither is this.
} 
```

减去 48，因为数字 0 在 ascii 表中排在第 48 位。**测试必须是ASCII。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:34:58.127

而不是 char 为什么不使用字符串，因为 char 也可以用于比较，因为它可以返回数字

```
char c ='a';
    if(c>10)
    //do something

    //OR
int x = c; 
```

那么为什么不使用 String 而不是 char

或者你可以做的是，使用子字符串或类似的东西获取第一个两个字符并使用 Integer.parse() 方法来解析它，如果它成功解析，那么它是一个有效的数字，否则它不是这样你可以验证它并类似地做接下来的两个字符

***编辑***

如果你想这样实现 23:59 正确 24:05 错误 02:56 正确 02:79 错误

然后这是我这边的代码

```
public class MainActivity extends Activity {
 InputFilter timeFilter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    timeFilter  = new InputFilter() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest,
                int dstart, int dend) {
            if (source.length() == 0) {
                return null;// deleting, keep original editing
            }
            String result = "";
            result += dest.toString().substring(0, dstart);
            result += source.toString().substring(start, end);
            result += dest.toString().substring(dend, dest.length());

            if (result.length() > 5) {
                return "";// do not allow this edit
            }
            boolean allowEdit = true;
            char c;
            if (result.length() > 0) {
                c = result.charAt(0);
                allowEdit &= (c >= '0' && c <= '2');
            }
            if (result.length() > 1) {
                c = result.charAt(1);
                if(result.charAt(0) == '0' || result.charAt(0) == '1')
                    allowEdit &= (c >= '0' && c <= '9');
                else
                    allowEdit &= (c >= '0' && c <= '3');
            }
            if (result.length() > 2) {
                c = result.charAt(2);
                allowEdit &= (c == ':');
            }
            if (result.length() > 3) {
                c = result.charAt(3);
                allowEdit &= (c >= '0' && c <= '5');
            }
            if (result.length() > 4) {
                c = result.charAt(4);
                allowEdit &= (c >= '0' && c <= '9');
            }
            return allowEdit ? null : "";
        }

    };

    EditText txt1 = (EditText) findViewById(R.id.edTxtParcelDeliverTime);
    txt1.setFilters(new InputFilter[]{timeFilter});
}
} 
```

我刚刚获取了您的 XML 并将其作为我的主要布局并且 XML 没有任何更改 现在试试这个并告诉您？

***编辑 2*** 现在我在这里添加了一个使用 doneOnce 布尔值对第一个字符检查的验证现在可以使用，告诉我你现在是否有任何其他问题

```
public class MainActivity extends Activity {
EditText edt1;
InputFilter timeFilter;
private String LOG_TAG = "MainActivity";
private boolean doneOnce = false;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    timeFilter  = new InputFilter() {
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest,
                int dstart, int dend) {

            if(source.length() > 1 && doneOnce == false){
                source = source.subSequence(source.length()-1, source.length());
                if(source.charAt(0)  >= '0' && source.charAt(0) <= '2'){
                    doneOnce = true;
                    return source;
                }else{
                    return "";
                }
            }

            if (source.length() == 0) {
                return null;// deleting, keep original editing
            }
            String result = "";
            result += dest.toString().substring(0, dstart);
            result += source.toString().substring(start, end);
            result += dest.toString().substring(dend, dest.length());

            if (result.length() > 5) {
                return "";// do not allow this edit
            }
            boolean allowEdit = true;
            char c;
            if (result.length() > 0) {
                c = result.charAt(0);
                allowEdit &= (c >= '0' && c <= '2');
            }
            if (result.length() > 1) {
                c = result.charAt(1);
                if(result.charAt(0) == '0' || result.charAt(0) == '1')
                    allowEdit &= (c >= '0' && c <= '9');
                else
                    allowEdit &= (c >= '0' && c <= '3');
            }
            if (result.length() > 2) {
                c = result.charAt(2);
                allowEdit &= (c == ':');
            }
            if (result.length() > 3) {
                c = result.charAt(3);
                allowEdit &= (c >= '0' && c <= '5');
            }
            if (result.length() > 4) {
                c = result.charAt(4);
                allowEdit &= (c >= '0' && c <= '9');
            }
            return allowEdit ? null : "";
        }

    };

    edt1 = (EditText) findViewById(R.id.edTxtParcelDeliverTime);
    edt1.setFilters(new InputFilter[] { timeFilter });

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T21:02:57.770

试试这个，我只是编辑了你提供的代码......

```
InputFilter[] timeFilter = new InputFilter[1];

timeFilter[0] = new InputFilter() {
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

        if (source.length() == 0) {
            return null;// deleting, keep original editing
        }

        String result = "";
        result += dest.toString().substring(0, dstart);
        result += source.toString().substring(start, end);
        result += dest.toString().substring(dend, dest.length());

        if (result.length() > 5) {
            return "";// do not allow this edit
        }

        boolean allowEdit = true;
        char c;
        if (result.length() > 0) {
            c = result.charAt(0);
            allowEdit &= (c >= '0' && c <= '2' && !(Character.isLetter(c)));
        }

        if (result.length() > 1) {
            c = result.charAt(1);
            allowEdit &= (c >= '0' && c <= '9' && !(Character.isLetter(c)));
        }

        if (result.length() > 2) {
            c = result.charAt(2);
            allowEdit &= (c == ':'&&!(Character.isLetter(c)));
        }

        if (result.length() > 3) {
            c = result.charAt(3);
            allowEdit &= (c >= '0' && c <= '5' && !(Character.isLetter(c)));
        }

        if (result.length() > 4) {
            c = result.charAt(4);
            allowEdit &= (c >= '0' && c <= '9'&& !(Character.isLetter(c)));
        }

        return allowEdit ? null : "";
    }
}; 
```

这对我来说绝对没问题。仅接受格式时间`hh:mm`（不接受其他字符）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-16T11:15:14.013

//这是在运行时处理日期和时间的输入，并且所有 //无效的尝试都会自动消耗
//这是您可以实现的正则表达式的替代方案

```
//using the input regulation for the time data
    timeField.addTextChangedListener(new TextWatcher() {
        String beforeTXT;
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                Log.i("before TEXT TEXXT", " this : "+s+" and "+start+" and "+count+"and "+after);
                beforeTXT= ""+s;
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            int input ;

            //first determine whether user is at hrs side or min side
            if (s.toString().equals("")){
                return;
            }
            if(s.toString().length()>2 && start<=2){ //means the user is at hour side
                input = Integer.parseInt(s.toString().substring(0,1)) % 10;

            }
            else if(s.toString().length()>2 && start>=3) {//means that user is at min side
                input = Integer.parseInt("0"+s.toString().substring(3))%10;

            }
            else if(s.toString().indexOf(":")==1){ // if we have for eg 1: or 0: then we take first character for parsing
                input = Integer.parseInt(s.toString().charAt(0)+"");
            }
            else{ //else it is default where the user is at first position
                input = Integer.parseInt(s.toString()) % 10;
            }

            //Special case where 00: is autommatically converted to 12: in 12hr time format
            if(s.toString().contains("00:")){
                Log.i("INsisde )))","i am called ");
                timeField.setText("12:");
               return;
            }

            //Now we manipulate the input and its formattin and cursor movement
            if(input<=1 && start ==0){ //thiis is for first input value to check .... time shouldnt exceed 12 hr
                //do nothing
            }
            else if (input>1 && start==0){ //if at hour >1 is press then automaticc set the time as 02: or 05: etc
             timeField.setText("0"+s+":");
            }
            else if(input>2 && start==1 && !s.toString().startsWith("0")){ //whe dont have greater than 12 hrs so second postionn shouldn't exceed value 2
                timeField.setText(beforeTXT);
            }
            else if(start==1 && !beforeTXT.contains(":")){  //if valid input 10 or 11 or 12 is given then convert it to 10: 11: or 12:
                timeField.setText(s.toString()+":");

                if(s.toString().length()==1 && s.toString().startsWith("0")){
                timeField.setText("");
                }
                if(s.toString().startsWith("1")&& s.toString().length()==1){ //on back space convert 1: to 01:
                    timeField.setText("0"+timeField.getText().toString());
                }

           }
            else if(start == 3 && input >5 ){ //min fig shouldn't exceed 59 so ...if at first digit of min input >5 then do nothing or codpy the earlier text
                timeField.setText(beforeTXT);
            }
           else if (start>4 && s.toString().length()>5){ // the total string lenght shouldn't excced 5
                timeField.setText(beforeTXT);
            }
            else if(start<2 && beforeTXT.length()>2){
                timeField.setText(beforeTXT);

            }

        }

        @Override
        public void afterTextChanged(Editable s) {

            Log.i("after  TEXT TEXXT", " this : "+s);
            timeField.setSelection(timeField.getText().toString().length());

        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-08T10:26:12.817

我找到[了这个图书馆](https://github.com/PaoloConte/time-edit-text)时间`EditText`。该代码易于使用。我添加了代码所有者的一些解释：

> 一个自定义的 EditText（实际上是从 TextView 派生的）以 24 小时格式输入时间。特点：
> - 它总是显示当前设置的时间，所以它永远不会为空。
> 
> *   可以使用虚拟键盘和物理键盘。
>     
>     
> *   当前数字突出显示；
>     
>     
> *   当键盘上的数字被按下时，数字被替换。
>     
>     
> *   Back 键向后移动光标。
>     
>     
> *   空格键向前移动光标。

这是`TimeEditText`课程：

```
public class TimeEditText extends TextView {

private static final int POSITION_NONE = -1;

private int[] digits = new int[4];
private int currentPosition = POSITION_NONE;
private int mImeOptions;

public TimeEditText(Context context) {
    this(context, null, 0);
}

public TimeEditText(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public TimeEditText(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    setFocusableInTouchMode(true);

    if (attrs != null && !isInEditMode()) {
        mImeOptions = attrs.getAttributeIntValue("http://schemas.android.com/apk/res/android", "imeOptions", 0);
    }

    updateText();       
}

/**
 * @return the current hour (from 0 to 23)
 */
public int getHour() {
    return digits[0]*10+digits[1];
}

/**
 * @return the current minute
 */
public int getMinutes() {
    return digits[2]*10+digits[3];
}

/**
 * Set the current hour
 * @param hour hour (from 0 to 23)
 */
public void setHour(int hour) {
    hour = hour % 24;
    digits[0] = hour/10;
    digits[1] = hour%10;
    updateText();
}

/**
 * Set the current minute
 * @param min minutes (from 0 to 59)
 */
public void setMinutes(int min) {
    min = min % 60;
    digits[2] = min/10;
    digits[3] = min%10;
    updateText();
}

@Override
protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
    // hide cursor if not focused
    currentPosition = focused ? 0 : POSITION_NONE;
    updateText();
    super.onFocusChanged(focused, direction, previouslyFocusedRect);
}   

private void updateText() {
    int bold = currentPosition > 1 ? currentPosition+1 : currentPosition;   
    int color = getTextColors().getDefaultColor();
    Spannable text = new SpannableString(String.format("%02d:%02d", getHour(), getMinutes()));
    if (bold >= 0) {
        text.setSpan(new ForegroundColorSpan(color & 0xFFFFFF | 0xA0000000), 0, 5, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        text.setSpan(new StyleSpan(Typeface.BOLD), bold, bold+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        text.setSpan(new ForegroundColorSpan(Color.BLACK), bold, bold+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        text.setSpan(new BackgroundColorSpan(0x40808080), bold, bold+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    }
    setText(text);  
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_UP) {
        requestFocusFromTouch();
        InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(this,0);
        if (currentPosition == POSITION_NONE) {
            currentPosition = 0;
            updateText();
        }
    }
    return true;
}   

private boolean onKeyEvent(int keyCode, KeyEvent event) {
    if (event != null && event.getAction() != KeyEvent.ACTION_DOWN)
        return false;

    if (keyCode == KeyEvent.KEYCODE_DEL) {  
        // moves cursor backward
        currentPosition = currentPosition >= 0 ? (currentPosition+3)%4 : 3;
        updateText();
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_SPACE) {
        // moves cursor forward
        currentPosition = (currentPosition+1)%4;
        updateText();
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_ENTER) {
        View v = focusSearch(FOCUS_DOWN);
        boolean next = v!=null;
        if (next) {
            next = v.requestFocus(FOCUS_DOWN);
        }         
        if (!next) {
            hideKeyboard();
            currentPosition = POSITION_NONE;
            updateText();
        }
        return true;
    }       

    char c = (char) event.getUnicodeChar();  
    if (c >= '0' && c <= '9') {
        currentPosition = currentPosition == POSITION_NONE ? 0 : currentPosition;
        int n = c - '0';
        boolean valid = false;

        switch (currentPosition) {
            case 0: // first hour digit must be 0-2
                valid = n <= 2;
                break;
            case 1: // second hour digit must be 0-3 if first digit is 2
                valid = digits[0] < 2 || n <= 3;
                break;
            case 2: // first minute digit must be 0-6
                valid = n < 6;
                break;
            case 3: // second minuti digit always valid (0-9)
                valid = true;
                break;
        }

        if (valid) {
            if (currentPosition == 0 && n == 2 && digits[1] > 3) { // clip to 23 hours max
                digits[1] = 3;
            }

            digits[currentPosition] = n;
            currentPosition = currentPosition < 3 ? currentPosition+1 : POSITION_NONE;  // if it is the last digit, hide cursor
            updateText();
        }

        return true;
    }

    return false;
}

private void hideKeyboard() {
    InputMethodManager imm = (InputMethodManager) getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(getWindowToken(), 0);        
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) { 
    // events from physical keyboard
    return onKeyEvent(keyCode, event);
}

@Override
public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
    // manage events from the virtual keyboard
    outAttrs.actionLabel = null;
    outAttrs.label = "time";
    outAttrs.inputType = InputType.TYPE_CLASS_NUMBER;
    outAttrs.imeOptions = mImeOptions | EditorInfo.IME_FLAG_NO_EXTRACT_UI;

    if ((outAttrs.imeOptions & EditorInfo.IME_MASK_ACTION) == EditorInfo.IME_ACTION_UNSPECIFIED) {
        if (focusSearch(FOCUS_DOWN) != null) {
            outAttrs.imeOptions |= EditorInfo.IME_ACTION_NEXT;
        } else {
            outAttrs.imeOptions |= EditorInfo.IME_ACTION_DONE;
        }
    }

    return new BaseInputConnection(this, false) {
        @Override
        public boolean performEditorAction(int actionCode) {
            if (actionCode == EditorInfo.IME_ACTION_DONE) {
                hideKeyboard();
                currentPosition = POSITION_NONE;
                updateText();
            } else if (actionCode == EditorInfo.IME_ACTION_NEXT){
                View v = focusSearch(FOCUS_DOWN);
                if (v!=null) {
                    v.requestFocus(FOCUS_DOWN);
                }
            }
            return true;
        }

        @Override
        public boolean deleteSurroundingText(int beforeLength, int afterLength) {
            onKeyEvent(KeyEvent.KEYCODE_DEL, null); 
            return true;
        }

        @Override
        public boolean sendKeyEvent(KeyEvent event) {
            onKeyEvent(event.getKeyCode(), event);
            return true;
        }           
     };
 }
} 
```

您必须将此行添加到您的视图中：

```
<YourPackageName.TimeEditText
            android:id="@+id/satOpenEditText"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="time"
            android:textSize="16sp" /> 
```

# c - 数字在从 double 转换为 short 时失去符号

> ID：13120953
> 
> 赞同：0
> 
> 时间：2012-10-29T11:42:52.110
> 
> 标签：c, type-conversion, fftw

我已经在互联网上搜索了几天以找到以下问题的解决方案。

在我的程序中，我将两个 16 位 .wav 文件中的数据块读取到声音缓冲区（类型为 的数组`short`）中，我在堆上为其分配内存。将数据转换`double`为 fftw 函数并进行处理，然后按比例缩小并`short`转换为在将输出文件写入磁盘之前放入集合缓冲区。通过这种方式，我减少了访问硬盘的次数，因为我正在读取几块数据（即在文件中移动）并且不想在每次迭代中写入磁盘。

这是我正在做的事情：

```
short* sound_buffer_zero;
short* sound_buffer_one;
short* collection_buffer_one;
sound_buffer_zero = (short *) fftw_malloc(sizeof(short) * BUFFERSIZE); 
sound_buffer_one = (short *) fftw_malloc(sizeof(short) * BUFFERSIZE);
collection_buffer_one = (short *) fftw_malloc(sizeof(short) * COLLECTIONLENGTH);

// read BUFFERSIZE samples from file into sound_buffer
inFileZero.read((char*)sound_buffer_zero, sizeof(short)*BUFFERSIZE);
inFileOne.read((char*)sound_buffer_one, sizeof(short)*BUFFERSIZE);

// typecast the short int values of sound_buffer into double values
// and write them to in_
for(int p = 0; p < BUFFERSIZE; ++p) {
    *(in_zero + p) = (double)*(sound_buffer_zero + p);
    *(in_one + p) = (double)*(sound_buffer_one + p);
}

// cross correlation in the frequency domain
// FFT on input zero (output is f_zero)
fftw_execute(p_zero);

// FFT on input one (output is f_one)
fftw_execute(p_one);

// complex multiplication (output is almost_one, also array of type double)
fastCplxConjProd(almost_one, f_zero, f_one, COMPLEXLENGTH);

// IFFT on almost_one (output is out_one, array of double)
fftw_execute(pi_one);

// finalize the output array (sort the parts correctly, output is final_one, array of double)
// last half without first value becomes first half of final array
for(int i = ARRAYLENGTH/2 + 1; i < ARRAYLENGTH; ++i) {
    *(final_one + i - (ARRAYLENGTH/2 + 1)) = *(out_one + i);
}
// first half becomes second half of final array
for(int i = 0; i < ARRAYLENGTH/2; ++i) {
    *(final_one + i + (ARRAYLENGTH/2 - 1)) = *(out_one + i);
}

short* scaling_vector; 
scaling_vector = (short *) fftw_malloc(sizeof(short) * ARRAYLENGTH-1);

// fill the scaling_vector with the numbers from 1, 2, 3, ..., BUFFERSIZE, ..., 3, 2, 1
for(short i = 0; i < BUFFERSIZE; ++i) {
    *(scaling_vector + i) = i + 1;
    if(i + BUFFERSIZE > ARRAYLENGTH-1) break;
    *(scaling_vector + i + BUFFERSIZE) = BUFFERSIZE - i - 1;
}

// scale values in relation to their position in the output array
// to values suitable for short int for storage
for(int i = 0; i < ARRAYLENGTH-1; ++i) {
    *(final_one + i) = *(final_one + i) * SCALEFACTOR; // #define SCALEFACTOR SHRT_MAX/pow(2,42)
    *(final_one + i) = *(final_one + i) / *(scaling_vector + i);
}

// transform the double values of final_ into rounded short int values
// and write them to the collection buffer
for(int p = 0; p < ARRAYLENGTH-1; ++p) {
    *(collection_buffer_one + collectioncount*(ARRAYLENGTH) + p) = (short)round(*(final_one + p));
}

// write collection_buffer to disk
 outFileOne.write((char*)collection_buffer_one, sizeof(short)*collectioncount*(ARRAYLENGTH)); 
```

在互相关中计算的值具有类型`double`并且具有正号或负号。通过缩小它们，符号不会改变。但是当我将它们转换`short`为到达 collection_array 的数字时，它们都是正数。

该数组被声明为`short`，而不是`unsigned short`，并且在缩放后值处于`short`可以容纳的范围内（您必须相信我，因为我不想发布*所有*代码以保持帖子可读）。我不关心小数部分的截断，我不需要进一步计算，但符号应该保持不变。

这是输入和输出值的一个小示例（显示的是数组中的前 10 个值）：

```
input: 157
input: 4058
input: -1526
input: 1444
input: -774
input: -1507
input: -1615
input: -1895
input: -987
input: -1729

// converted to double
as double: 157
as double: 4058
as double: -1526
as double: 1444
as double: -774
as double: -1507
as double: -1615
as double: -1895
as double: -987
as double: -1729

// after the computations 
after scaling: -2.99445
after scaling: -42.6612
after scaling: -57.0962
after scaling: 41.0415
after scaling: -18.3168
after scaling: 43.5853
after scaling: -14.3663
after scaling: -3.58456
after scaling: -46.3902
after scaling: 16.0804

// in the collection array and before writing to disk
collection [short(round*(final_one))]: 3
collection [short(round*(final_one))]: 43
collection [short(round*(final_one))]: 57
collection [short(round*(final_one))]: 41
collection [short(round*(final_one))]: 18
collection [short(round*(final_one))]: 44
collection [short(round*(final_one))]: 14
collection [short(round*(final_one))]: 4
collection [short(round*(final_one))]: 46
collection [short(round*(final_one))]: 16 
```

我的问题是，为什么没有保留标志？我错过了一些内部转换吗？我没有在其他帖子中找到我的问题的答案。如果我错过了，请告诉我，如果我为您遗漏了重要信息。谢谢你的帮助！

干杯，芒果

这是测试输出的代码：

```
//contents of sound_buffer (input from file):
// test output
for(int i = 0; i < 10; ++i) {
    cout << "input: " << *(sound_buffer_zero + i) << endl;
}

// content of in_ after converting to double
// test output
for(int i = 0; i < 10; ++i) {
    cout << "as double: " << *(in_zero + i) << endl;
}

// contents of final_ after the scaling
// test output 
for(int i = 0; i < 10; ++i) {
    cout << "after scaling: " << *(final_one + i) << endl;
}

// contents of collection_buffer after converting to short
// test output
for(int i = 0; i < 10; ++i) {
    cout << "collection [short(round*(final_one))]: " << *(collection_buffer_one + i) << endl;
} 
```

感谢*aleguna*，我发现这些符号在以下计算中消失了。我完全错过了我所做的那一步`final_one = fabs(final_one)`。我已经把它放在了一个测试中，完全忘记了它。

谢谢大家的评论和回答。事实证明，我只是愚蠢。对不起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:22:52.470

你在哪个平台上运行这个？我在 linux x86, gcc 3.4.2 上做了一点测试

```
 #include <iostream>
   #include <math.h>

   int main (int,  char*[])
   {
       double a = -2.99445;
       short b = (short)round(a);

       std::cout << "a = " << a << " b = " << b << std::endl;
      return 0;
   } 
```

输出

```
a = -2.99445 b = -3 
```

所以我可以想到两种情况

1.  您还没有向我们展示缩放和转换为short 之间的一些代码
2.  您运行一些具有非标准双重表示的奇异平台

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:26:12.840

在完全没有优化的情况下编译时，以下内容如何在您的平台上运行？

```
#include <stdlib.h>
#include <stdio.h>

double a[10] = { 
  -2.99445,
  -42.6612,
  -57.0962,
  41.0415,
  -18.3168,
  43.5853,
  -14.3663,
  -3.58456,
  -46.3902,
  16.0804
};

int main(){
  int i;
  for (i=0;i<10;++i){
    short k = (short)*(a + i);
    printf("%d\n", k);
  }

} 
```

给我以下结果：

```
-2
-42
-57
41
-18
43
-14
-3
-46
16 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-29T11:52:10.503

通常，short 是 2 字节长，而 double 是 8 字节长。将 double 转换为 short 会导致高字节丢失。即使 2 个字节对于没有符号的实际数据就足够了，您也会丢失通过符号扩展存储在高位字节中的符号信息。

# sql-server - 使用单个切片器控制 Excel 中具有不同数据源的两个数据透视表

> ID：13120957
> 
> 赞同：0
> 
> 时间：2012-10-29T11:43:10.190
> 
> 标签：sql-server, excel, ssas, pivot-table

Excel 文件中的切片器有问题。在我的 Excel 文件中，我有两个工作表。在第一个中，有一个从 OLAP 多维数据集获取数据的数据透视表，在第二个中，我有一个从另一个 Excel 文件中获取数据的数据透视表。我想要一个名为“组织”的切片器来过滤两个表中的数据。可能吗？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:34:43.473

不——似乎不是。切片器旨在用于共享相同数据源的数据透视表。不过，您应该能够将数据合并到一个源中，并使用共享切片器创建两个数据透视表。

来自微软： http: [//office.microsoft.com/en-us/excel-help/use-slicers-to-filter-pivottable-data-HA010359466.aspx](http://office.microsoft.com/en-us/excel-help/use-slicers-to-filter-pivottable-data-HA010359466.aspx)

> 使切片器可用于另一个数据透视表
> 
> 1.单击要在另一个数据透视表中共享的切片器。这将显示切片器工具，并添加一个选项选项卡。
> 
> 2.在选项选项卡的切片器组中，单击数据透视表连接。
> 
> 3.在数据透视表连接对话框中，选中您希望切片器可用的数据透视表的复选框。

或者您可以只创建一个数据透视表。

或者你可以看看这个： [让一张表上的所有数据透视表在行扩展和折叠方面相互模仿](https://stackoverflow.com/questions/12352905/making-all-pivot-tables-on-one-sheet-mimic-each-other-in-terms-of-rows-expanding/12357834#12357834)

祝你好运。

# go - 同时迭代两个字符串

> ID：13120961
> 
> 赞同：3
> 
> 时间：2012-10-29T11:43:19.910
> 
> 标签：go

我只是想知道是否有任何漂亮的方法可以同时迭代两个字符串：

```
var ascii_runes = []rune(string_1)
var shifted_runes = []rune(string_2)

for i := 0; i < len(string_1); i++ {
    fmt.Println(string(ascii_runes[i]) + string(shifted_runes[i]))
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T11:55:34.740

不确定 IIUC，但例如：

```
package main

import (
        "fmt"
)

var (
        ascii   = []rune("string1")
        shifted = []rune("STRING!")
)

func main() {
        for i, v := range ascii {
                fmt.Printf("%c%c\n", v, shifted[i])
        }
} 
```

也在这里：[http ://play.golang.org/p/2ruvLFg_qe](http://play.golang.org/p/2ruvLFg_qe)

* * *

输出：

```
sS
tT
rR
iI
nN
gG
1! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:11:48.960

例如，

```
package main

import "fmt"

func main() {
    var runes_1, runes_2 = []rune("string_1"), []rune("string_2")
    for i := 0; i < len(runes_1) && i < len(runes_2); i++ {
        fmt.Println(string(runes_1[i]) + string(runes_2[i]))
    }
} 
```

输出：

```
ss
tt
rr
ii
nn
gg
__
12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T08:02:15.410

不是特别漂亮，但一种有效的方法是使用[strings.NewReader](https://golang.org/pkg/strings/#NewReader)及其[ReadRune](https://golang.org/pkg/strings/#Reader.ReadRune)方法。

```
func Less(s1, s2 string) bool {
  rdr1 := strings.NewReader(s1)
  rdr2 := strings.NewReader(s2)
  for {
    rune1, _, err1 := rdr1.ReadRune()
    rune2, _, err2 := rdr2.ReadRune()
    if err2 == io.EOF { return false }
    if err1 == io.EOF { return true }
    if rune1 != rune2 { return rune1 < rune2 }
  }
} 
```

# c# - 无法加载具有嵌入式资源的文件或程序集

> ID：13120962
> 
> 赞同：1
> 
> 时间：2012-10-29T11:43:20.600
> 
> 标签：c#, winforms, .net-assembly, resx

在从 WinForms 应用程序调用我创建的程序集中访问嵌入资源时，我遇到了一个奇怪的错误。

基本上我有一个在文件夹中包含单个标准资源文件 ( `Resources.resx`) 的程序集`Properties`。程序集是`Westwind.RazorHosting`，所以资源是生成的`Westwind.RazorHosting.Properties`。`Resources.Designer.cs`我只在汇编代码中使用生成的设计器类 ( ) 访问资源。

当我对项目运行测试时，测试项目一切都很好。错误（这是应用程序中使用的资源的主要来源）正确显示。

但是，当 WinForms 应用调用该应用并导致错误时，资源访问将失败。错误是：

> 无法加载程序集 (Westwind.RazorHosting.resources) 或其依赖项之一。该系统找不到指定的文件

请注意，它不是指向`Westwind.RazorHosting.Properties.resources`，而是指向`Westwind.RazorHosting.resources`。

当我使用调试器进入这段代码时，我直接进入生成的`Resources.designer.cs`类，`ResourceManager`那里看起来非常好——有一个引用，它在内部指向正确的命名空间。我在默认的 en-US 语言环境中运行。我检查了生成的程序集，并且资源确实存在于正确/预期的资源 ID（即。`Westwind.RazorHosting.Properties.ResourceId`）下 - 它们存在。

知道什么可能导致 .NET 在错误的位置寻找资源吗？

# ios5 - iOS：UINavigationBar 标题不出现

> ID：13120967
> 
> 赞同：2
> 
> 时间：2012-10-29T11:43:44.670
> 
> 标签：ios5, uinavigationcontroller, uinavigationbar, title, uinavigationitem

我不确定我的 UINavigationBar 标题出了什么问题。在尝试了所有可能的事情后，我无法让它工作。出现导航栏但标题不见了！！这是我的简单代码，

```
self.marketsListViewController = [[MarketsListViewController alloc] initWithNibName:@"MarketsListViewController" bundle:nil];
UINavigationController *nvc = [[UINavigationController alloc] initWithRootViewController:self.marketsListViewController];
nvc.navigationBar.barStyle = UIBarStyleBlack;
[self.marketsListView addSubview:nvc.view];
[self addChildViewController:nvc];
[nvc didMoveToParentViewController:self]; 
```

在 MarketsListViewController 的 didViewLoad 中，我尝试了以下所有方法，但都没有成功！！！有人可以帮我理解发生了什么吗？谢谢。

```
self.title = @"MyTitle";
self.navigationItem.title = @"MyTitle";
self.navigationController.navigationItem.title = @"MyTitle"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:49:13.287

iOS6 的 UINavigationController 似乎有一些变化。

[https://stackoverflow.com/a/13205842/1171003](https://stackoverflow.com/a/13205842/1171003)

当我写这样的代码时，根本没有显示标题。

```
UITabBarController *tb = [[UITabBarController alloc] init];
tb.viewControllers = [NSArray arrayWithObjects:
                       [[ViewController1 alloc] init],
                       [[ViewController2 alloc] init],
                       nil];

UINavigationController *nvc = [[UINavigationController alloc] initWithRootViewController:tb]; 
```

但是，在我添加了这一行之后，它就出现了。

```
tb.title = @"Title"; 
```

# asp.net - 如何使用 asp.net webapi 获取 Json Post 值

> ID：13120971
> 
> 赞同：14
> 
> 时间：2012-10-29T11:43:55.810
> 
> 标签：asp.net, post, request, asp.net-web-api

我正在请求执行 asp.net webapi Post 方法，但我无法获取请求变量。

**要求**

```
jQuery.ajax({ url: sURL, type: 'POST', data: {var1:"mytext"}, async: false, dataType: 'json', contentType: 'application/x-www-form-urlencoded; charset=UTF-8' })
    .done(function (data) {
        ...
    }); 
```

**WEB API Fnx**

```
 [AcceptVerbs("POST")]
    [ActionName("myActionName")]
    public void DoSomeStuff([FromBody]dynamic value)
    {
        //first way
        var x = value.var1;

        //Second way
        var y = Request("var1");

    } 
```

我无法以两种方式获取 var1 内容...（除非我为此创建一个类）

我该怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-29T20:09:56.757

第一种方式：

```
 public void Post([FromBody]dynamic value)
    {
        var x = value.var1.Value; // JToken
    } 
```

请注意，`value.Property`实际上返回一个`JToken`实例，因此要获取它的值，您需要调用`value.Property.Value`.

第二种方式：

```
 public async Task Post()
    {        
        dynamic obj = await Request.Content.ReadAsAsync<JObject>();
        var y = obj.var1;
    } 
```

以上两种方法都使用 Fiddler。如果第一个选项不适合您，请尝试将内容类型设置为`application/json`以确保`JsonMediaTypeFormatter`用于反序列化内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-29T21:25:48.623

在对此进行了一段时间的思考并尝试了许多不同的事情之后，我最终在 API 服务器上放置了一些断点，并发现请求中塞满了键值对。在我知道它们在哪里之后，很容易访问它们。但是，我只发现此方法适用于 WebClient.UploadString。但是，它确实很容易工作，并允许您加载任意数量的参数，并非常容易地在服务器端访问它们。请注意，我的目标是 .net 4.5。

客户端

```
// Client request to POST the parameters and capture the response
public string webClientPostQuery(string user, string pass, string controller)
{
    string response = "";

    string parameters = "u=" + user + "&p=" + pass; // Add all parameters here.
    // POST parameters could also easily be passed as a string through the method.

    Uri uri = new Uri("http://localhost:50000/api/" + controller); 
    // This was written to work for many authorized controllers.

    using (WebClient wc = new WebClient())
    {
        try
        {
            wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
            response = wc.UploadString(uri, login);
        }
        catch (WebException myexp)
        { 
           // Do something with this exception.
           // I wrote a specific error handler that runs on the response elsewhere so,
           // I just swallow it, not best practice, but I didn't think of a better way
        }
    }

    return response;
} 
```

服务器端

```
// In the Controller method which handles the POST request, call this helper:
string someKeyValue = getFormKeyValue("someKey");
// This value can now be used anywhere in the Controller.
// Do note that it could be blank or whitespace.

// This method just gets the first value that matches the key.
// Most key's you are sending only have one value. This checks that assumption.
// More logic could be added to deal with multiple values easily enough.
public string getFormKeyValue(string key)
{
    string[] values;
    string value = "";
    try
    {
        values = HttpContext.Current.Request.Form.GetValues(key);
        if (values.Length >= 1)
            value = values[0];
    }
    catch (Exception exp) { /* do something with this */ }

    return value;
} 
```

有关如何处理多值 Request.Form 键/值对的更多信息，请参阅：

[http://msdn.microsoft.com/en-us/library/6c3yckfw(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/6c3yckfw%28v=vs.110%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-08T20:47:16.480

我整个上午都在寻找一个描述客户端和服务器代码的答案，然后终于弄明白了。

简介 - UI 是一个实现标准视图的 MVC 4.5 项目。服务器端是 MVC 4.5 WebApi。目标是将模型发布为 JSON，然后更新数据库。编写 UI 和后端代码是我的责任。下面是代码。**这对我有用。**

**模型**

```
public class Team
{
    public int Ident { get; set; }
    public string Tricode { get; set; }
    public string TeamName { get; set; }
    public string DisplayName { get; set; }
    public string Division { get; set; }
    public string LogoPath { get; set; }
} 
```

**客户端（UI 控制器）**

```
 private string UpdateTeam(Team team)
    {
        dynamic json = JsonConvert.SerializeObject(team);
        string uri = @"http://localhost/MyWebApi/api/PlayerChart/PostUpdateTeam";

        try
        {
            WebRequest request = WebRequest.Create(uri);
            request.Method = "POST";
            request.ContentType = "application/json; charset=utf-8";
            using (var streamWriter = new StreamWriter(request.GetRequestStream()))
            {
                streamWriter.Write(json);
                streamWriter.Flush();
                streamWriter.Close();
            }
            WebResponse response = (HttpWebResponse)request.GetResponse();
            using (var streamReader = new StreamReader(response.GetResponseStream()))
            {
                var result = streamReader.ReadToEnd();
            }
        }
        catch (Exception e)
        {
            msg = e.Message;
        }
    } 
```

**服务器端（WebApi 控制器）**

```
 [Route("api/PlayerChart/PostUpdateTeam")]
    [HttpPost]
    public string PostUpdateTeam(HttpRequestMessage context)
    {
        var contentResult = context.Content.ReadAsStringAsync();
        string result = contentResult.Result;
        Team team = JsonConvert.DeserializeObject<Team>(result);

        //(proceed and update database)
    } 
```

**WebApiConfig（路由）**

```
 config.Routes.MapHttpRoute(
            name: "PostUpdateTeam",
            routeTemplate: "api/PlayerChart/PostUpdateTeam/{context}",
            defaults: new { context = RouteParameter.Optional }
        ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T03:39:34.723

试试这个。

```
public string Post(FormDataCollection form) { 
    string par1 = form.Get("par1");

    // ...
} 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-10-29T11:49:45.067

尝试使用以下方式

```
[AcceptVerbs("POST")]
[ActionName("myActionName")]
public static void DoSomeStuff(var value)
{
    //first way
   var x = value;
} 
```

# php - 从其他主机获取网站

> ID：13120980
> 
> 赞同：0
> 
> 时间：2012-10-29T11:44:26.603
> 
> 标签：php, curl, a-records

我想获取域的内容，但来自与当前 A 记录中指定的主机 (IP) 不同的主机 (IP)。

我已经使用 cURL 解决了这个问题：

```
$headers = array("Host: www.example.com");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
$ip = "12.31.23.123";
$goto = "http://" . $ip . $_SERVER["REQUEST_URI"];
curl_setopt($ch, CURLOPT_URL, "$goto"); 
```

但我还需要一种从主机获取图像的方法！

现在我只得到带有 cURL 的 HTML 代码。

有任何想法吗？

也许是一种让访问者从正确的 IP 下载图像的方法？

# sql - 在 Access 中计算报表的总和值

> ID：13120982
> 
> 赞同：0
> 
> 时间：2012-10-29T11:44:31.377
> 
> 标签：sql, database, ms-access, report

我有一份报告应该显示转换前后产品的库存价值。

我在表格上显示了源产品产品代码和库存价值，现在我需要获取从该库存转换而来的项目的价值。

我假设这可以使用一些简单的 SQL 来计算具有相同 SCID（股票转换 ID）的所有结果产品的总和。我的 SCID 用于将源产品链接到不同表中的多个结果产品。

![在此处输入图像描述](../Images/7d65c77de18eae7f2f932cc4c81f501e.png)

在此图像中，我在详细信息部分中将 SCID boc 命名为 sSCID，以尝试将其与表中可能尝试获取的任何字段区分开来。但基本上我需要获取代码以查找与该框中显示的 SCID 匹配的结果产品，并将它们加在一起以获得转换库存的总和。

如果上下文有帮助，我正在尝试创建一个显示转换过程前后库存价值的表格，以尝试计算浪费。

谢谢，鲍勃·P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:55:48.087

您可以使用 Dsum 或构建报表查询以包含计算。我更喜欢第二种选择。这假定 SCID 是数字，您需要为文本 SCID 加上引号。

```
=DSum("sValue","[Stock Conversion Items]","SCID=" & sSCID) 
```

或者

```
 SELECT r.This,r.That,s.ConvValue 
 FROM ReportTable r
 INNER JOIN (
      SELECT SCID, Sum(sValue) As ConvValue 
      FROM [Stock Conversion Items]
      GROUP BY SCID) s
 ON r.sSCID = s.SCID 
```

上面的查询对表使用别名 r 和 s：`ReportTable r`或`ReportTables As r`

# c++ - 使用 mpl::transform 生成新序列

> ID：13120985
> 
> 赞同：2
> 
> 时间：2012-10-29T11:44:49.507
> 
> 标签：c++, boost-mpl

我正在尝试使用`fusion::map`内部格式生成一些将索引映射到类型的通用配置处理代码，如下所示：

```
fusion::pair< mpl::int_< VALUE >, type >; 
```

为了简化地图的生成，我有以下代码：

```
#include <boost/fusion/sequence.hpp>
#include <boost/fusion/container.hpp>
#include <boost/fusion/algorithm.hpp>

#include <boost/mpl/int.hpp>
#include <boost/mpl/vector.hpp>
#include <boost/mpl/map.hpp>
#include <boost/type_traits/is_const.hpp>
#include <boost/type_traits/is_reference.hpp>
#include <boost/mpl/for_each.hpp>
#include <boost/mpl/placeholders.hpp>

#include <typeinfo>
#include <string>
#include <iostream>

/// create a fusion map of all parameter data
namespace fusion = boost::fusion;
namespace mpl = boost::mpl;

template < unsigned Idx, typename T >
struct config_param
{
    typedef mpl::int_< Idx > index_value;
    typedef T value_type;
};

template< class T >
struct to_fusion_pair
{
    typedef fusion::pair< typename T::index_value
                        , typename T::value_type > type;
};

typedef mpl::vector< config_param< 10, unsigned >
                   , config_param< 20, std::string >
                   , config_param< 30, bool >
                   , config_param< 40, long >
                   , config_param< 50, std::string >
                   > MySequence;

typedef mpl::transform< MySequence, to_fusion_pair< mpl::_1 > >::type ConvertedSeq; 
```

这编译并产生了预期的结果，不幸的是，如果我尝试包装对转换的调用，我会收到大量错误。IE：

```
template< class Seq >
struct to_vector_of_fusion_pair
{
    typedef mpl::transform< Seq, to_fusion_pair< mpl::_1 > >::type type;
};

typedef to_vector_of_fusion_pair<MySequence>::type ConvertedSeq2; 
```

编译器错误如下：

```
fusion-db.cpp:40: error: type boost::mpl::transform<Seq, to_fusion_pair<mpl_::arg<1> >, mpl_::na, mpl_::na> is not derived from type to_vector_of_fusion_pair<Seq>â
fusion-db.cpp:40: error: expected ; before type 
```

我的`to_vector_of_fusion_pair`结构有什么问题使其与 不兼容`mpl::transform`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:46:24.140

```
template< class Seq >
struct to_vector_of_fusion_pair
{
    typedef typename mpl::transform< Seq, to_fusion_pair< mpl::_1 > >::type type;
}; 
```

阅读此内容以获得解释[我必须在何处以及为什么必须放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

# java - Spring 3 和 Hibernate 4 道

> ID：13120986
> 
> 赞同：1
> 
> 时间：2012-10-29T11:44:52.187
> 
> 标签：java, spring, dao, hibernate-4.x

我发现 HibernateTemplate 已从 Hibernate 4 中删除，我应该如何配置 Dao 应用程序上下文 xml 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:06:49.630

我`sessionFactory.getCurrentSession()`在我的 DAO 课程中使用。`Spring`配置是这样的：

```
<bean id="dataSource"
      class="org.springframework.jdbc.datasource.DriverManagerDataSource"
      p:driverClassName="${jdbc.driverClassName}"
      p:url="${jdbc.url}"
      p:username="${jdbc.username}"
      p:password="${jdbc.password}"/>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="annotatedClasses">
        <list>
            <value>my.package.entity.Account</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/> 
```

所以现在你应该使用例如：

```
@Autowired
private SessionFactory sessionFactory;

public void save(YourEntity entity) {
    sessionFactory.getCurrentSession().save(entity);
} 
```

将您的更改`HibernateTemplate`为`SessionFactory`.

# django - Django 模型中的 BigInt[] postgre

> ID：13120987
> 
> 赞同：0
> 
> 时间：2012-10-29T11:44:53.643
> 
> 标签：django, django-models

如何在 django 模型中定义 bigInt[]。我试过了

```
 name = models.CommaSeparatedIntegerField(max_length = 500)
   ss = SomeModel()
   ss.name = '23, 23'
   ss.save() 
```

它给了我完整性错误。我该如何解决这个问题。使用 django 1.2

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:02:09.280

尝试

```
max_length = 255 
```

如果它有效，那么您应该检查您的数据库类型/版本。例如，5.0.3 之前的 MySQL 不允许字段超过 255 个字符。此限制适用于还包括**CommaSeparatedIntegerField的****字符字段**。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:58:41.040

您应该以这种方式覆盖默认 IntegerField：

```
from django.db.models.fields import IntegerField
from django import forms

class BigIntegerField(IntegerField):
    '''
    IntegerField dont validate too large numbers so PostgreSQL database crashes
    See: https://code.djangoproject.com/ticket/16747
    '''
    MAX_INT = 2147483647

    def formfield(self, **kwargs):
        defaults = {'form_class': forms.IntegerField,
                'min_value':-BigIntegerField.MAX_INT - 1,
                'max_value': BigIntegerField.MAX_INT}
        defaults.update(kwargs)
        return super(IntegerField, self).formfield(**defaults) 
```**

# python - 如何使用python从url访问值

> ID：13120990
> 
> 赞同：0
> 
> 时间：2012-10-29T11:44:58.527
> 
> 标签：python, url, anchor, web.py

我正在使用 python web.py 框架，我有一个带有 html 代码的锚标记，例如

```
<p><a href = "/edit.py?tr=%d"%1>Edit</a></p> 
```

因此，当我单击此链接时，它会转到`edit.py`我的项目目录中的文件，但是正如您所观察到的，我在 edit.py 之后传递了一些值`/edit.py?tr=%d"%1`。实际上，我将在进一步的过程中动态传递这些值。

在重定向到之后`edit.py`，如何`?` 从 py 文件中访问这些值？因为我的目的是在保存到数据库后编辑记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:53:10.210

您可以使用 web.input 获取它们，例如

```
def GET(self):
    data = web.input()
    tr = data.tr 
```

文档可在此处获得：[http ://webpy.org/cookbook/input](http://webpy.org/cookbook/input)

# php - 使用 Javascript 进行浏览器检测

> ID：13120991
> 
> 赞同：0
> 
> 时间：2012-10-29T11:45:03.610
> 
> 标签：php, javascript, browser-detection

## 这个问题的推理

**我知道浏览器检测永远不会 100% 可靠，因为用户代理标头总是可以伪造的，但是，我对此并不感到困扰。**

尽管关于这个话题有很多问题，但它们似乎都很老了，所以为了获得最新的答案，我觉得我应该再次问这个问题。

我目前正在使用 PHP browscap 检测浏览器名称和版本服务器端，然后将名称和版本返回到 javascript 变量中（不是一个很好的方法）。我需要这样做的原因只是为了在访问者没有使用支持的浏览器时向他们显示一条消息。

当前方法（类似的东西）：

```
<script type="text/javascript">
    var browser = new Array();
    browser['browser'] = '<?php echo $browser_name; ?>';
    browser['version'] = '<?php echo $browser_version; ?>';
    browser['error'] = '<?php echo $browser_error; ?>';
</script> 
```

做这个客户端会更好，因为 browscap 可能会很慢，而且它会阻止我将值从 PHP 传递到 javascript 变量中。**如果您认为使用 PHP 是一种更好的方法，请在您的回答中说明，这只是我的意见。**

## 问题

因此，我的问题很简单，以下链接是确定浏览器名称和版本的可靠方法吗？

[Javascript 检测](http://www.quirksmode.org/js/detect.html)

*我知道需要添加新的浏览器，这不会打扰我。我更关心使用的算法是否可靠。*

提前致谢

**更新 1**

要了解我的意思，请查看 Internet Explorer 7 或更低版本中的[https://www.icloud.com/](https://www.icloud.com/)。您将收到一条消息，指出不支持该浏览器。这对于 IE 来说很容易做到，因为您可以简单地使用`<!--[if gt IE...`. 但是，我需要测试所有浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:08:11.377

这看起来不对，您可以从 Javascript 获取浏览器信息。无需混合 JS 和 PHP 代码即可。

您可以执行以下操作来获取并仅使用 JavaScript 检测用户浏览器：

```
var userAgent = navigator.userAgent.toLowerCase();
var old = false;

// Internet Explorer 7
if (userAgent.indexOf('msie 7.0b') !== -1) { old = true; }
else if (userAgent.indexOf('msie 7.0') !== -1) { old = true; }

// Internet Explorer 6
else if (userAgent.indexOf('msie 6.1') !== -1) { old = true; }
else if (userAgent.indexOf('msie 6.01') !== -1) { old = true; }
else if (userAgent.indexOf('msie 6.0b') !== -1) { old = true; }
else if (userAgent.indexOf('msie 6.0') !== -1) { old = true; }
...
// Detect any other browser versions you consider old

if(old = true) {
// Show notification and alert users that they are using old browser
} 
```

这是使用 JS 的方法，但您也可以使用 HTML 来实现：

```
<!--[if lte IE 6]>
   // include your .css style or do whatever you want to alert users their browser is old
<![endif]--> 
```

对您的问题的简短回答是肯定的，以您的方式检测用户浏览器是错误的，因为您可以使用纯 JavaScript 甚至 HTML 来完成。这里不需要混合 PHP 和 JS 代码，最后，PHP 和 JS 都会得到相同的 UserAgent 信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:07:50.360

## 解释

经过与其他开发人员的广泛研究和讨论，很明显没有可靠的方法可以从用户代理中检索浏览器名称和版本。这归结为几个原因：

1.  如果浏览器的开发人员愿意，浏览器用户代理的格式可以随时更改。这可能会立即阻止某些脚本正常工作。
2.  用户可以伪造他们的用户代理来模仿其他浏览器，因此看起来像是在使用他们不是的浏览器。

## 可能的解决方案

虽然我非常不鼓励使用这些脚本，因为它们可能会在任何浏览器的更新发布时停止工作，但如果您确实希望在**Javascript**中检测浏览器名称和版本，那么我建议您使用此脚本：

[Javascript 检测](http://www.quirksmode.org/js/detect.html)

然而，检索浏览器详细信息的最可靠方法无疑是`browscap`由 Gary Keith 提供的。该`browscap`项目提供了有关从用户代理收集的每个浏览器和操作系统的广泛信息。它非常容易实现，甚至更容易使用。要了解更多信息，请查看：

[加里·基思 - Browscap](http://browsers.garykeith.com/about)

***如果您选择使用`browscap`Gary Keith 的文章，则需要确保至少每周更新一次。***

## 回答

虽然我与这个答案相矛盾，但很明显，不建议使用任何类型的脚本检测浏览器信息。唯一可靠的浏览器检测方法是 Internet Explorer HTML 条件，如前所述，这些仅涵盖 Internet Explorer。

尽量避免浏览器特定的功能和通知，并利用内置功能，例如：

```
media="only screen and (device-width: 768px)" 
```

和

```
<!--[if IE 8]>I am IE 8<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-11T06:24:08.860

这个问题需要一个更新的答案。我认为如今客户端检测的最佳选择是[WURFL](http://web.wurfl.io/)。

它是一个基于 Useragents 的更新设备库——想想客户端的 Browscap。

加载 JS 并根据请求 js 的设备返回 JSON。完美的！

```
<script type="text/javascript" src="//wurfl.io/wurfl.js"></script> 
```

因为它在 WURFL 服务器端进行解析，所以您需要远程加载 js 而不是将其保存在您的目录树中。

一个超级容易

```
WURFL.is_mobile 
```

例如，确定移动设备所需的一切。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:05:51.023

您可以尝试查看`navigator.appName`and `navigator.userAgent`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T12:19:26.870

yepnopejs [IE 检测（！ie 前缀）](https://github.com/SlexAxton/yepnope.js/blob/master/prefixes/yepnope.ie-prefix.js)通过使用 MS 条件注释来工作[。](http://yepnopejs.com/)

> 一个简短的片段，用于在 JavaScript 中检测 IE10 之前的 IE 版本，而不使用用户代理嗅探。

```
while (
  div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->'
);
// … 
```

[https://github.com/SlexAxton/yepnope.js/blob/master/prefixes/yepnope.ie-prefix.js](https://github.com/SlexAxton/yepnope.js/blob/master/prefixes/yepnope.ie-prefix.js)

yepnope 用法示例：

```
yepnope({
    load: ['normal.js', 'ie6!ie7!ie-patch.js'] // patch for ie6 or ie7 only
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-29T12:11:42.810

您可以为这些用 jQuery 编写的信息使用完美的插件（如 javascript）

看看这个链接：

[https://github.com/jquery/plugins.jquery.com](https://github.com/jquery/plugins.jquery.com)

当您想确定某个功能在浏览器中是否可用、应用错误修复等时，请务必进行功能检测而不是浏览器检测。

# mysql - MYSQL TIMESTAMPDIFF() 给出错误的值

> ID：13120993
> 
> 赞同：1
> 
> 时间：2012-10-29T11:45:08.613
> 
> 标签：mysql

我正在输入，`TIMESTAMPDIFF(HOUR,'29-10-2012','19-11-2012')`但我得到输出，`504`但值应该是`510`.

输出是`510`因为起始值为`29/10/2012 05:13`。

有没有替代这个功能的替代品，它给出了两个日期之间的天、小时、分钟、秒的差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T11:59:50.020

您在 TIMESTAMPDIFF 函数中传递**DATE**值，一切都是正确的 -

*   10 月 3 天：2012-10-29、2012-10-30、2012-10-31 = 3 * 24 = 72
*   11 月 18 天：2012-11-01...2012-11-18 = 18 * 24 = 432

72 + 432 = 504

如果你想计算小时、分钟或秒，那么你应该传递两个**DATETIME**值 -

```
SELECT TIMESTAMPDIFF(HOUR,'2012-10-29 05:13:00','2012-11-19 00:00:00') hours;
+-------+
| hours |
+-------+
|   498 |
+-------+ 
```

# ruby-on-rails - 将 Heroku Postgres 数据库从 Dev 迁移到 Basic 计划

> ID：13120994
> 
> 赞同：4
> 
> 时间：2012-10-29T11:45:09.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我已经按照 Heroku 的指南将我的 postgres 数据库从 Dev 迁移到 Basic Plan：[https ://devcenter.heroku.com/articles/migrating-from-a-dev-to-a-basic-database](https://devcenter.heroku.com/articles/migrating-from-a-dev-to-a-basic-database)

一切似乎都很顺利，但我对下面的信息有点困惑。即使新的基本数据库显示了一些数据，它也没有显示任何表。数据大小也不同。在我删除我的 Dev DB 之前，有没有其他人看到过同样的情况？谁能解释这里发生了什么？

```
Ryans-MacBook-Pro:dashboard ryanberry$ heroku pg:info -a myapp(replaced with my app name)
=== HEROKU_POSTGRESQL_BLUE (DATABASE_URL)
Plan         Basic
Status       available
Connections  4
PG Version   9.1.5
Created      2012-10-29 10:51 UTC
Data Size    111.6 MB
Tables       0
Fork/Follow  Unavailable
=== HEROKU_POSTGRESQL_CHARCOAL
Plan         Dev
Status       available
Connections  0
PG Version   9.1.5
Created      2012-10-20 02:26 UTC
Data Size    112.4 MB
Tables       30
Rows         389702/10000 (Write access revoked)
Fork/Follow  Unavailable 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:54:32.020

pg:info 不显示实时信息。对于有类似问题的帖子，请参阅[Heroku pg:info 给出 0 个表](https://stackoverflow.com/questions/13065878/heroku-pginfo-gives-0-tables) 和 [Heroku Row Count Incorrect](https://stackoverflow.com/questions/12701711/heroku-row-count-incorrect)。

到目前为止，信息应该显示正确数量的表格。
为确保表结构正确，您可以连接到数据库并显示所有表：

```
heroku pg:psql HEROKU_POSTGRESQL_BLUE
\dt 
```

当然，您也可以`heroku run console`在 rails 控制台中检查您的数据。您的应用程序已经在使用您的基本计划数据库 (HEROKU_POSTGRESQL_BLUE)，因此如果应用程序运行正常，一切顺利。

# php - PHP文件不返回完整的json数据

> ID：13120999
> 
> 赞同：0
> 
> 时间：2012-10-29T11:45:30.237
> 
> 标签：php, json

我正在制作一个 php 文件，它将 json 数据返回到 javascript 文件。目前它只返回最后一个 json 对象并忽略其余的对象。这是我的php代码

```
$arr = array(
  "cartId" => 456186,
  "lastModified" => "Tue, 19 Jan 2010 03:14:07 GMT",
  "items" => array(
    15642,
    45616,
    54984,
    45751
  ),
  "cartId" => 456187,
  "lastModified" => "Tue, 20 Jan 2010 04:14:07 GMT",
  "items" => array(
    'item' => 15643,
    'item' => 45617,
    'item' => 54985,
    'item' => 45752
  )
);
echo json_encode($arr); 
```

上面的代码返回以下

```
{"cartId":456187,"lastModified":"Tue, 20 Jan 2010 04:14:07 GMT","items":{"item":45752}} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T11:48:51.590

这应该有效：

```
$arr = array(
  array(
    "cartId" => 456186,
    "lastModified" => "Tue, 19 Jan 2010 03:14:07 GMT",
    "items" => array(
      15642,
      45616,
      54984,
      45751
    )
  ),
  array(
    "cartId" => 456187,
    "lastModified" => "Tue, 20 Jan 2010 04:14:07 GMT",
    "items" => array(
      15643,
      45617,
      54985,
      45752
    )
  )
);
echo json_encode($arr); 
```

您的错误的原因是因为您不能在 PHP 数组（或 JSON 对象）中有重复的键。后来的键覆盖了前者，并创建了一个较小版本的数组。

在这里，我们将项目分组到子数组中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T11:48:16.630

第一个元素被第二个元素覆盖，因为它们的键是相同的。与`items`第二项中的数组相同。

尝试

```
$arr = array (
  array(
    "cartId"       => 456186,
    "lastModified" => "Tue, 19 Jan 2010 03:14:07 GMT",
    "items"        => array(
      15642,
      45616,
      54984,
      45751, 
    ),
  ),
  array(
    "cartId"       => 456187,
    "lastModified" => "Tue, 20 Jan 2010 04:14:07 GMT",
    "items"        => array(
      15643,
      45617,
      54985,
      45752, 
    ),
  ), 
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T11:58:16.907

你不能给出相同的索引

```
$arr = array(
      "cartId1" => 456186,
      "lastModified1" => "Tue, 19 Jan 2010 03:14:07 GMT",
      "items1" => array(
        15642,
        45616,
        54984,
        45751
      ),
      "cartId2" => 456187,
      "lastModified2" => "Tue, 20 Jan 2010 04:14:07 GMT",
      "items2" => array(
        'items1' => 15643,
        'items2' => 45617,
        'items3' => 54985,
        'items4' => 45752
      )
    );
    echo json_encode($arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T13:51:50.190

您没有正确设置多维数组。

为此，您需要使用`array()`设置嵌套/内部数组。

`$arr = array(array("key"=>"value"), array("key"=>"value"));`

而不是你目前正在做的事情：

`$arr = array(("key"=>"value"), ("key"=>"value"));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T12:05:48.303

以下是您基本上需要做的事情：

```
$arr = array(
        array(
            "cartId" => 456186,
            "lastModified" => "Tue, 19 Jan 2010 03:14:07 GMT",
            "items" => array(
                15642,
                45616,
                54984,
                45751
            ),
        ),
        array(
           "cartId" => 456187,
            "lastModified" => "Tue, 20 Jan 2010 04:14:07 GMT",
            "items" => array(
                'item' => 15643,
                'item' => 45617,
                'item' => 54985,
                'item' => 45752
            ) 
        )
    ); 
```

如您所见，我们必须将嵌套元素的集合包装在数组中。