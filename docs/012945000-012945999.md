# StackOverflow 问答 12945000-12945999

# java - 如何避免交替同步线程上的竞争条件？

> ID：12945001
> 
> 赞同：0
> 
> 时间：2012-10-17T23:33:30.263
> 
> 标签：java, multithreading, wait, synchronized, notify

我试图记住我以前的 CS 日子。

一直在尝试以尽可能低的原语正确实现一对同步线程。当然，我应该在生产代码上使用更好的并发工具（可能来自 java.util.concurrency 的东西）。但是，嘿，我这样做是为了挑战。这是我的代码（这是我的第一个问题，所以如果这太长了，请原谅我）：

```
public class Test {

    public volatile Object locker1 = new Object();
    public volatile Object locker2 = new Object();
    public volatile Object locker3 = new Object();

    public class MyRunnable2 implements Runnable {
        public void run() {

            System.out.println( "MyRunnable2 started" );

            synchronized( locker3 ) {
                    try {
                        System.out.println( "r2: waiting for locker3" );
                        locker3.wait();
                        System.out.println( "r2: got locker3" );
                    } catch ( java.lang.InterruptedException e ) {
                        System.out.println( "e: " + e );
                    }
            }

            for ( int c = 0; c < 50; ++c ) {

                synchronized( locker2 ) {

                    try {
                        System.out.println( "r2: waiting for locker2" );
                        locker2.wait();
                        System.out.println( "r2: got locker2" );
                    } catch ( java.lang.InterruptedException e ) {
                        System.out.println( "e: " + e );
                    }
                }

                System.out.println( "r2: " + ( c ) );
                try {
                    Thread.sleep(1);
                } catch ( Exception e ) {
                }

                synchronized( locker1 ) {
                    System.out.println( "r2: signaling locker1" );
                    locker1.notify();
                    System.out.println( "r2: locker1 signaled" );
                }
            }
        }
    }

    public class MyRunnable1 implements Runnable {
        public void run() {
            System.out.println( "MyRunnable1 started" );

            synchronized( locker3 ) {
                    try {
                        System.out.println( "r1: waiting for locker3" );
                        locker3.wait();
                        System.out.println( "r1: got locker3" );
                    } catch ( java.lang.InterruptedException e ) {
                        System.out.println( "e: " + e );
                    }
            }

            for ( int c = 0; c < 50; ++c ) {

                synchronized( locker1 ) {

                    try {
                        System.out.println( "r1: waiting for locker1" );
                        locker1.wait();
                        System.out.println( "r1: got locker1" );
                    } catch ( java.lang.InterruptedException e ) {
                        System.out.println( "e: " + e );
                    }
                }

                System.out.println( "r1: " + ( c ) );
                try {
                    Thread.sleep(1);
                } catch ( Exception e ) {
                }

                synchronized( locker2 ) {
                    System.out.println( "r1: signaling locker2" );
                    locker2.notify();
                    System.out.println( "r1: locker2 signaled" );
                }

            }
        }
    }

    public static void main(String[] args) {
        Test t = new Test();
        t.test();
    }

    public void test() {
        MyRunnable1 r1 = new MyRunnable1();
        MyRunnable2 r2 = new MyRunnable2();
        Thread t1 = new Thread( r1 );
        Thread t2 = new Thread( r2 );
        t1.start();
        t2.start();

        try {
            Thread.sleep(1000);
        } catch ( Exception e ) {

        }
        synchronized( locker3 ) {
            System.out.println( "main: signaling locker3" );
            locker3.notifyAll();
            System.out.println( "main: locker3 signaled" );
        }

        try {
            Thread.sleep(1000);
        } catch ( Exception e ) {

        }

        synchronized( locker1 ) {
            System.out.println( "main: signaling locker1" );
            locker1.notify();
            System.out.println( "main: locker1 signaled" );
        }

        try {
            t1.join();
            t2.join();

        } catch ( java.lang.InterruptedException e ) {
            System.out.println( "e: " + e );
        }
    }
} 
```

**我的问题是**：如何避免 Test.test() 的竞争条件？大多数情况下，这是可行的——但我对睡眠电话不满意。另外，请大家评价一下我的风格。我总是乐于自我提升。

**编辑**：只是为了让它更清楚。我希望 MyRunnable1 始终先运行。打印一个数字，然后等待 MyRunnable2 打印相同的数字。然后它会打印第二个数字，然后再次等待 MyRunnable2。等等。

我想我不能舒适地使用 java.util.concurrency 直到我知道引擎盖下发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:08:44.630

除了睡眠呼叫之外，还有几个基本问​​题（实际上睡眠呼叫本身并没有什么问题......）

对于初学者来说，您实际上并没有做任何事情来让线程相互发出信号。如果我正确理解您的评论，您想要类似的东西

```
Thread 1: 1
Thread 2: 1
Thread 1: 2
Thread 2: 2
... 
```

作为输出。这段代码当前要做的是启动两个线程，然后两个线程都将等待。然后主线程将调用`notifyAll`该`locker3`对象。这意味着等待该对象的任何线程都会运行，但无法保证线程将以什么顺序运行，因为您要通知每个人。有 1 号竞争条件。此外，您只调用`notifyAll`and`locker2`对象`locker1`一次，但最终每个线程等待它们大约 50 次。这意味着您的线程将挂起。

你真正需要的是这样的：

1.  线程 1 和线程 2 启动
2.  线程 2 立即等待某个信号对象
3.  线程 1 立即打印一个数字，然后在同一个信号对象上调用 notify
4.  然后线程 1 等待同一个信号对象
5.  线程 2 恢复并打印数字
6.  线程 2 然后在信号对象上调用 notify
7.  线程 2 然后等待信号对象
8.  返回步骤 3。

我不能保证完全没有竞争条件，但是要按照您的建议进行操作，您将需要这样的算法。你也可以让它变得更复杂，但这是一个很好的基线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:04:26.393

@Chris Thompson 是对的 - 您可以在单个信号对象上交替。但是你永远不会保证哪个线程先走，你必须小心确保你的最后一个线程没有等待你的倒数第二个线程在你的倒数第二个线程已经通知之后完成并退出。

我修改了您的代码以使其正常工作 - 但不能保证谁先走，然后我还添加了一个替代的“MyRunnableOrdered”来控制两个线程的执行顺序。在任何一种情况下，如果线程没有相同数量的循环来完成，或者如果任何一个由于错误而退出，那么您将面临饥饿的风险。注意并使用中断的异常将有助于后一种情况。

```
public class Test {

public Object locker = new Object();
public boolean oneDone = false;

public class MyRunnable2 implements Runnable {
    public void run() {

        System.out.println( "MyRunnable2 started" );

        for ( int c = 0; c < 50; ++c ) {
            synchronized( locker ) {
                System.out.println( "r2: " + ( c ) );
                locker.notify();
                if(c == 49) {
                    oneDone = true;
                }

                try {
                    if(!oneDone) {
                        locker.wait();
                    }
                } catch ( java.lang.InterruptedException e ) {
                    System.out.println( "e: " + e );
                }                    
            }
        }
    }
}

public class MyRunnable1 implements Runnable {
    public void run() {
        System.out.println( "MyRunnable1 started" );

        for ( int c = 0; c < 50; ++c ) {
            synchronized( locker ) {
                System.out.println( "r1: " + ( c ) );
                locker.notify();
                if(c == 49) {
                    oneDone = true;
                }

                try {
                    if(!oneDone) {
                        locker.wait();
                    }
                } catch ( java.lang.InterruptedException e ) {
                    System.out.println( "e: " + e );
                }
            }
        }
    }
}

public Object sequenceLock = new Object();
public boolean sequence = true;

public class MyRunnableOrdered implements Runnable {

    private final boolean _match;

    public MyRunnableOrdered(boolean match) 
    {
        _match = match;
    }

    public void run() {
        System.out.println( "MyRunnable1 started" );

        for ( int c = 0; c < 50; ++c ) {
            synchronized( sequenceLock ) {
                while(_match != sequence) {
                    try {
                        sequenceLock.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }

                System.out.println( "r" + _match + ":" + ( c ) );
                sequence = !sequence;
                sequenceLock.notify();
            }
        }
    }
}    

public static void main(String[] args) {
    Test t = new Test();
    t.test();
}

public void test() {
    MyRunnable1 r1 = new MyRunnable1();
    MyRunnable2 r2 = new MyRunnable2();
    Thread t1 = new Thread( r1 );
    Thread t2 = new Thread( r2 );

    synchronized( locker ) {
        t1.start();
        t2.start();
    }

    try {
        t1.join();
        t2.join();
    } catch ( java.lang.InterruptedException e ) {
        System.out.println( "e: " + e );
    }

    System.out.println("Done part 1");

    MyRunnableOrdered o1 = new MyRunnableOrdered(true);
    MyRunnableOrdered o2 = new MyRunnableOrdered(false);
    synchronized(sequenceLock) {
        sequence = true;
    }
    Thread to1 = new Thread( o1 );
    Thread to2 = new Thread( o2 );
    to1.start();
    to2.start();

    try {
        to1.join();
        to2.join();
    } catch ( java.lang.InterruptedException e ) {
        System.out.println( "e: " + e );
    }       
    System.out.println("Done part 2");
}
} 
```

请注意，MyRunnableOrdered 的想法不会超出两个线程，因为我们无法控制在调用 notify 时谁唤醒。在这种情况下，您想要的是要处理的线程的有序列表。那时并发可能不是最好的解决方案！

如果您决定使用并发库，则可能还有一个更好的 MyRunnableOrdered 实现，使用 AtomicBoolean 并且没有锁定。

另请注意，我们不需要使用“volatile”，因为所有变量访问都受到同步块的保护。

# javascript - 将日期格式设置为“yyyy-MM-dd'T'HH:mm:ss.SSS'Z'”

> ID：12945003
> 
> 赞同：66
> 
> 时间：2012-10-17T23:33:43.963
> 
> 标签：javascript, facebook, date, date-format, parse-platform

我需要按照[Parse 的 REST API for Facebook](https://parse.com/docs/rest#users-login)`yyyy-MM-dd'T'HH:mm:ss.SSS'Z'`指定的格式设置日期。我想知道最**轻量级**的解决方案是什么。

 *** * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-10-17T23:40:50.247

调用[`toISOString()`](http://msdn.microsoft.com/en-us/library/ff925953%28v=vs.94%29.aspx)方法：

```
var dt = new Date("30 July 2010 15:05 UTC");
document.write(dt.toISOString());

// Output:
//  2010-07-30T15:05:00.000Z 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-05-18T11:07:32.527

`toISOString()`将仅返回当前 UTC 时间而不是当前本地时间。如果要以`yyyy-MM-ddTHH:mm:ss.SSSZ`格式获取当前本地时间，则应使用以下两种方法获取当前时间

# 方法一：

```
console.log(new Date(new Date().toString().split('GMT')[0]+' UTC').toISOString());
```

# 方法二：

```
console.log(new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000).toISOString());
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T08:11:51.007

```
function converToLocalTime(serverDate) {

    var dt = new Date(Date.parse(serverDate));
    var localDate = dt;

    var gmt = localDate;
        var min = gmt.getTime() / 1000 / 60; // convert gmt date to minutes
        var localNow = new Date().getTimezoneOffset(); // get the timezone
        // offset in minutes
        var localTime = min - localNow; // get the local time

    var dateStr = new Date(localTime * 1000 * 60);
    // dateStr = dateStr.toISOString("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"); // this will return as just the server date format i.e., yyyy-MM-dd'T'HH:mm:ss.SSS'Z'
    dateStr = dateStr.toString("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
    return dateStr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-18T05:25:51.787

添加另一个选项，可能不是最轻量级的。

```
dayjs.extend(dayjs_plugin_customParseFormat)
console.log(dayjs('2018-09-06 17:00:00').format( 'YYYY-MM-DDTHH:mm:ss.000ZZ'))
```

```
<script src="https://cdn.jsdelivr.net/npm/dayjs@1.9.7/dayjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs@1.9.7/plugin/customParseFormat.js"></script>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T00:07:51.923

节点.js

```
const offsetInMinutes = 2 * 60 ; //Romanian
const todaysDate = new Date(new Date().getTime() + offsetInMinutes * 60000).toISOString(); 
```

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-11-09T09:05:52.653

你可以使用 `javax.xml.bind.DatatypeConverter`类

`DatatypeConverter.printDateTime` & `DatatypeConverter.parseDateTime`**

# css - Webkit CSS-Animate 伪元素吗？

> ID：12945005
> 
> 赞同：0
> 
> 时间：2012-10-17T23:33:45.913
> 
> 标签：css, css-transitions, css-animations

我正在为我正在开发的网站开发一种新的覆盖屏幕技术。我想利用 CSS 动画，因为它比 JavaScript 动画更容易、更快。我正在做一些简单的事情，但我在使用基于 webkit 的浏览器（如 Chrome 和 Safari）时遇到了问题。

这是我正在使用的代码：

```
body:after {
    content: '';
    width: 100%;
    height: 100%;
    background-color: #000;
    position: fixed;
    top: 0;
    left: 0;
    z-index: -1;
    transition-duration: .5s;
    -webkit-transition-duration: .5s;
    opacity: 0;
}

body.dimmed:after {
    z-index: 9999;
    opacity: .7;
} 
```

如您所见，它使用 after 伪元素，并根据 body 类对其进行动画处理以显示或隐藏它。它适用于 Firefox，但不适用于 Chrome 或 safari。在这些浏览器上，动画不会发生，并且变化是瞬时的，这不是我想要的。如果将相同的 CSS 应用到 body，而不是伪元素，动画会发生：

```
body {
    content: '';
    width: 100%;
    height: 100%;
    background-color: #000;
    position: fixed;
    top: 0;
    left: 0;
    z-index: -1;
    transition-duration: .5s;
    -webkit-transition-duration: .5s;
    opacity: 0;
}

body.dimmed {
    z-index: 9999;
    opacity: .7;
} 
```

这让我觉得过渡不适用于 Chrome 上的伪元素。这应该报告为错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:09:43.700

这是一个已知的错误，多年来已为人所知：

[https://bugs.webkit.org/show_bug.cgi?id=23209](https://bugs.webkit.org/show_bug.cgi?id=23209)

[http://code.google.com/p/chromium/issues/detail?id=54699](http://code.google.com/p/chromium/issues/detail?id=54699)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:40:05.187

顺便说一句，目前您可以尝试使用这种技术： http: [//kizu.ru/en/pseudos/](http://kizu.ru/en/pseudos/) - 通过触发元素本身的转换，然后将值继承给伪元素。这不适用于每个属性（`opacity`例如），但您可以[使用一些想象力来](http://kizu.ru/en/pseudos/?full#Tooltips)解决这个问题。

# dojo - dgrid 分页示例

> ID：12945011
> 
> 赞同：1
> 
> 时间：2012-10-17T23:34:04.763
> 
> 标签：dojo, pagination, dgrid

谁能指出我使用 dgrid 的分页扩展和 dgrid 的示例？这可以是参考链接或您键入的简单示例。我在我的代码中定义了它，将它与一个 OnDemandGrid 一起使用，它被添加到我的自定义网格的声明 mixin 中。我看到了页面导航的箭头，我看到了页面大小设置菜单，但是我的 rowsPerPage: 3 规范什么也没做。我仍然看到我的 7 个样本记录。

我正在使用修改后的缓存（数据对象存储），它为我的 dgrid 包装了 JsonRest 和内存存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:14:48.367

我认为问题在于您不能使用`OnDemandGrid`分页，因为`OnDemandGrid`它有自己的内部虚拟分页逻辑。从[dgrid 扩展 wiki](https://github.com/SitePen/dgrid/wiki/Extensions)：

> 与 OnDemandList 和 OnDemandGrid 模块相比，分页扩展实现了经典的离散分页控件。它在给定时间显示一定数量的结果，并提供一个页脚区域，其中包含用于在页面之间切换的控件。
> 
> **注意：分页扩展应该混合到 List 或 Grid 中，而不是 OnDemand 构造函数之一，因为它们包含自己的虚拟滚动逻辑**。在内部，Pagination 继承自 OnDemand 原型所继承的同一个 _StoreMixin 模块，以便与 d​​ojo/store 进行通用集成。

你想要做的是混合`Pagination`成一个普通的`Grid`. Pagination Mixin 包含您感兴趣的属性，例如行数。Paginator 扩展处理与提供的存储的对话，以检索和呈现要显示的行集。`define`像这样的类的 A可能看起来像：

```
define(['dojo/_base/declare','dgrid/Grid', 'dgrid/extensions/Pagination'],function(declare,Grid,Pagination){
    return declare('mine.PaginatedGrid',[Grid,Pagination],{
      //various default you can set
      pagingLinks: false,
      pagingTextBox: true,
      firstLastArrows: true,
      minRowsPerPage: 5,
      rowsPerPage: 5,
      pageSizeOptions: [5, 10, 15, 25, 50, 100]
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T17:48:25.690

DGrid 及其扩展的最佳示例可以在 DGrid 项目的 test 文件夹中找到。它们可以在这里找到：

*   [DGrid 测试](https://github.com/SitePen/dgrid/tree/master/test)

具体来说，可以找到分页测试：

*   [这里，](https://github.com/SitePen/dgrid/blob/master/test/extensions/Pagination.html)
*   [这里，](https://github.com/SitePen/dgrid/blob/master/test/extensions/Pagination_i18n.html)
*   [和这里](https://github.com/SitePen/dgrid/blob/master/test/extensions/Pagination_tree.html)

要运行它们：

1.  克隆 git 仓库
2.  将其放在您的网络服务器上
3.  导航到 html 页面

# jquery - Jquery - 内置确认对话框

> ID：12945021
> 
> 赞同：0
> 
> 时间：2012-10-17T23:34:54.747
> 
> 标签：jquery

以下代码在本地主机上正常工作，但在服务器上不正常。我认为“确认”是一种插件功能。

```
var ask = confirm('Are you sure');
if (ask){
    $('.loading_gif').show();
    $('.delete_link').hide();
    return true;
}
else{
    return false;
} 
```

我想使用一些内置函数来做同样的事情。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:47:31.037

`confirm`是一种 javascript 方法，用于提供带有确定或取消按钮的提示（我认为取决于浏览器）。该`if(ask)`语句检查是否`ask = true`，当`cancel prompt's ok button`单击 时，它返回`true`到函数，`if cancel button is clickd`， false 返回。这不是这个函数的范围的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:48:37.177

`confirm`应该是标准的 JavaScript 库函数。

如果它在服务器上不起作用，请检查以下内容

*   检查页面上是否包含/加载了 jQuery 脚本
*   检查控制台中是否记录了任何错误
*   尝试不同的浏览器，因为 JavaScript 是客户端脚本，它与服务器无关。

# spring-security - 匹配的通配符是严格的，但找不到元素 'security:ldap-server' 的声明

> ID：12945023
> 
> 赞同：0
> 
> 时间：2012-10-17T23:34:59.860
> 
> 标签：spring-security, tomcat7, spring-ldap

我正在尝试在启动嵌入式 ldap 服务器的 Tomcat 7 上启动应用程序。

那是我的security-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:property-placeholder location="file:///${catalina.home}/webapps/test.properties"
                                  ignore-unresolvable="true" />

    <!--<security:ldap-server id="ldapBPS" url="${ldap.url}" manager-dn="${ldap.managerDN}" manager-password="${ldap.managerPass}"-->
    <!--root="${ldap.root}" />-->

    <security:ldap-server id="ldapLocal" ldif="classpath:test-ldap.ldif" root="test" />

    <security:authentication-manager>
        <security:ldap-authentication-provider
                user-search-filter="${ldap.conf.userSearchFilter}"
                user-search-base="${ldap.conf.confuserSearchBase}"
                group-search-filter="${ldap.conf.groupSearchFilter}"
                group-search-base="${ldap.conf.groupSearchBase}"
                group-role-attribute="${ldap.conf.groupRoleAttr}"
                role-prefix="${ldap.conf.rolePrefix}">
        </security:ldap-authentication-provider>
    </security:authentication-manager>
</beans> 
```

就 Spring 而言，这里是 Maven 依赖项：

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core</artifactId>
            <version>1.3.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>${springframework.version}</version>
        </dependency> 
```

使用此配置，我在 Tomcat 启动期间收到以下错误：

```
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 17 in XML document from class path resource [META-INF/spring/mifid/mifid-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'security:ldap-server'. 
```

任何想法该错误的根源在哪里？

先感谢您。

# c# - 将图像从 url 加载到图片框背景

> ID：12945024
> 
> 赞同：0
> 
> 时间：2012-10-17T23:35:04.807
> 
> 标签：c#, picturebox

我找到了一些将图像加载到图片框的简单方法，但我找不到将图像加载到图片框背景的简单方法。

如果你知道比这更简单的例子......

```
var request = WebRequest.Create("http://www.example.com/image.jpg");

using (var response = request.GetResponse())
using (var stream = response.GetResponseStream())
{
    pictureBox1.BackroundImage = Bitmap.FromStream(stream);
} 
```

...请分享。

将图像从 url 加载到图片框的两种简单方法是...

```
pictureBox1.ImageLocation = "http://www.example.com/image.jpg";

pictureBox1.Load(url); 
```

但我不能使用它们

我想使用**BackroundImage**而不是**Image**的原因是我想拉伸图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:40:41.527

一样容易 ：

pictureBox1.BackgroundImage=your_Image;

欲了解更多信息，请查看此处

1. [http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backgroundimage.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backgroundimage.aspx)

或者

2\. 图片框同时具有图像和背景图像属性

要设置背景图像，您必须设置 pictureBox1.BackgroundImage=your_Image;

对于 Image 属性 pictureBox1.Image=your_Image; 从这里开始：[PictureBox BackgroundImage 属性 C#](https://stackoverflow.com/questions/4116743/picturebox-backgroundimage-property-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:42:18.440

如果您想拉伸图像以适合 PictureBox，您[`PictureBox.SizeMode`](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)可以[`StretchImage`](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx).

当您使用`pictureBox1.ImageLocation`属性或`pictureBox1.Load()`方法指定图像时，这将起作用。

# powershell - Powershell - 将数组作为参数传递给从命令行调用的可执行文件

> ID：12945026
> 
> 赞同：0
> 
> 时间：2012-10-17T23:35:22.550
> 
> 标签：powershell, arguments, pipeline

想知道如何将数组作为命令行参数传递给 powershell 中的 exe 文件？这是我目前正在做的事情

我正在从以下格式的 powershell 函数调用 exe 文件

```
$firstParam = "test1"
$secondParam = "test2"

$thirdParam = @()
$thirdParam = 'test3'
$thirdParam = $thirdParam + 'test4'

[void](& '..\SomeApp.exe' "$firstParam" "$secondParam" "$thirdParam" 
```

这是我在 Application.exe 中看到的输入参数

![应用程序中的调试信息](../Images/a3d994b30b169c6de4413409df0a772f.png) 从 powershell 传递的第三个输入参数是一个数组，但在传递给 exe 文件时它被连接起来（空格分隔）。

是否可以将“test3”作为第三个参数传递，将“test4”作为第四个参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:54:31.853

`$thirdParam`不能是您的实现的数组。当您编写时`$thirdParam = @()`，您确实声明了一个空数组，但随后您将其重新分配给一个字符串：`$thirdParam = 'test3'`然后再分配给另一个字符串`$thirdParam = $thirdParam + 'test4'`。我仍然不清楚您的初衷，但这是您将如何`test3`作为第三个参数和`test4`第四个参数传递：

```
$fourthParam = 'test4'
[void](& '..\SomeApp.exe' "$firstParam" "$secondParam" "$thirdParam" "$fourthParam" 
```

如果您只有 2 个固定参数，并且可以有 N 个参数，请切换到`Invoke-Expression`而不是`Invoke-Command`：

```
[void](Invoke-Expression "..\SomeApp.exe $firstParam $secondParam $thirdParam" 
```

并确保您的参数被正确引用。在这种情况下，如果 $thirdParam 包含空格，它将确定您的参数 #4 及以后的参数。

# javascript - 单击链接时触发 jQuery 函数

> ID：12945027
> 
> 赞同：0
> 
> 时间：2012-10-17T23:35:31.957
> 
> 标签：javascript, jquery, this

我有一个包含大约 20 个项目的比较表。我希望单击链接时会显示有关该项目的更多信息。我可以通过使用以下函数来做到这一点：

```
$(function(){
  $('.show').click(function() {
    $('#keywords').fadeIn('slow');
 });
}); 
```

然而，正如我提到的，有 20 个项目，重复上面的代码可能会变得很麻烦。

如何创建一个在单击的链接下方显示 div 的函数？最重要的是，如果一个 div 打开或可见并且单击了另一个项目，我希望另一个项目关闭或淡出，然后显示另一个项目。

这是我的部分页面的 HTML：

```
<tr class="second">
  <td class="cat" style="width: 33%;">
    <div>
      <a class="show" href="#"> Mobile Keywords</a>
    </div>
      <div id="keywords" class="hide">
         p>Info Here</p>
    </div>
 </td>

 <td style="width: 33%;">
    <i class="icon-ok"></i>
 </td>

 <td class="" style="width: 33%;">
     <i class="icon-ok"></i>
  </td>
</tr>

<tr class="second">
  <td class="cat" style="width: 33%;">
    <div>
      <a class="show" href="#">Another Category</a>
    </div>
      <div id="category-2" class="hide">
         p>Info Here</p>
    </div>
 </td>

 <td style="width: 33%;">
    <i class="icon-ok"></i>
 </td>

 <td class="" style="width: 33%;">
     <i class="icon-ok"></i>
  </td>
</tr> 
```

我认为这可以使用该`this`属性来完成，但我不知道如何实现`this`，因为我对 JS 不够熟悉。

总结一下：我如何在此表中有一个链接，该链接将被单击，然后该链接显示适当的 div，而无需为每个项目创建重复代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:40:50.140

尝试

```
$('.show').click(function() {
    $('.hide').hide();
    $(this).closest('td.cat').find('.hide').fadeIn();
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/G7mkA/1/)

编辑：添加了问题中要求的隐藏功能。

* * *

## 解释

在上面的代码中，`this`引用了触发点击事件处理程序的元素（被点击的锚元素）。

然后，`this`包裹在一个 jQuery 对象中，我们使用该[`.closest`](http://api.jquery.com/closest/)方法遍历 DOM 树直到一个共同的祖先，从那里我们找到要显示的隐藏元素。

第一`$('.hide').hide()`行中的 是不言自明的，它在为要显示的元素设置`hide`动画之前隐藏了类中的所有元素。`fadeIn`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:39:21.283

```
$(function(){
    $('.show').click(function() {
        $(this).parent().next('div').fadeIn('slow');
    });
});​ 
```

使用[.parent()](http://api.jquery.com/parent/)方法，我们可以向上遍历 dom 一层，然后使用[.next()](http://api.jquery.com/next/)我们得到*下一个*直接 div，它似乎遵循您的标记的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:41:29.583

使用您的 HTML 标记，这可能会起作用。将隐藏当前显示的 div，仅当它不是相同的元素并显示所需的元素时。

```
$(function(){
  $('.show').click(function() {
    if ( !$(this).hasClass('shown') )
    {
        $('.shown').removeClass('shown').parent().siblings('div').hide();
        $(this).addClass('shown').parent().siblings('div').fadeIn('slow');
    }
 });
});​ 
```

**编辑**：工作代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T23:42:33.977

```
$(function(){
  $('.show').click(function() {
    $('.hide').hide();
    $(this).parent('div').next('div').fadeIn('slow');
 });
}); 
```

使用它（如您所料），查找其父 div，然后查找其第一个兄弟 div。

编辑以包括隐藏功能。

# windows - 如何以编程方式识别自解压可执行文件并解压缩包含的文件？

> ID：12945028
> 
> 赞同：2
> 
> 时间：2012-10-17T23:35:32.857
> 
> 标签：windows, archive, self-extracting

我做了一些基础研究，似乎没有一个标准可以创建这些。我看到了许多代码项目页面，其中包含用于构建此类 exe 的代码，但没有关于如何识别一个的参考，也没有在不实际运行应用程序的情况下提取文件的参考。

所以问题是：

1.  有没有一种方法可以用来识别特定文件是否是自解压 exe？
2.  有没有几种在计算行业中非常常见的格式
3.  如果是这样，这些格式是否允许在不运行打包 exe 的情况下进行提取？
4.  如果没有，有没有办法在某种沙箱环境中运行这样的文件，让我们看到生成的文件（在 Windows 上）？

注意我对编程解决方案或使用第三方实用程序/库的解决方案持开放态度。

# python - 使用 Python 的字符串的子字符串

> ID：12945029
> 
> 赞同：11
> 
> 时间：2012-10-17T23:35:41.980
> 
> 标签：python, string, substring

你可以从一个字符串中生成多少[个子](https://en.wikipedia.org/wiki/Substring)`abcd`字符串？

我怎样才能得到它的所有子字符串：

```
['a', 'b', 'c', 'd', 'ab', 'bc', 'cd', 'abc', 'bcd', 'abcd'] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T23:39:28.177

尝试这个：

```
def consecutive_groups(iterable):
    s = tuple(iterable)
    for size in range(1, len(s)+1):
        for index in range(len(s)+1-size):
            yield iterable[index:index+size]

>>> print list(consecutive_groups('abcd'))
['a', 'b', 'c', 'd', 'ab', 'bc', 'cd', 'abc', 'bcd', 'abcd'] 
```

并且组合的数量简单地等于从 1 到字符串长度的总和，相当于`n * (n + 1) / 2`.

顺便说一句，如果您想避免重复，您可以简单地在生成器函数中使用本地定义的集合，如下所示：

```
def consecutive_groups(iterable):
    s = tuple(iterable)
    seen = set()
    for size in range(1, len(s)+1):
        for index in range(len(s)+1-size):
            slc = iterable[index:index+size]
            if slc not in seen:
                seen.add(slc)
                yield slc 
```

该代码有点笨拙，可能会针对缩进进行优化，但它可以用于概念验证。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-18T00:58:54.283

这行吗？

```
import itertools
def substrings(x):
    for i, j in itertools.combinations(xrange(len(x)+1), 2):
        yield x[i:j] 
```

或作为生成器表达式：

```
(x[i:j] for i, j in itertools.combinations(xrange(len(x)+1), 2)) 
```

您的示例的扩展结果如下所示：

```
['a', 'ab', 'abc', 'abcd', 'b', 'bc', 'bcd', 'c', 'cd', 'd'] 
```

要按长度排序，请使用 sort `key=len`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T00:35:09.540

我认为这也有效，虽然不是最有效的，但它具有使用不太复杂的功能的吸引力。

```
S = "abcd"
substrings = [S[i:j] for i in range(len(S)) for j in range(i+1,len(S)+1)]
substrings.sort(key=len) 
```

但是请注意，此方法不会删除可能出现的相同子字符串。例如，如果原始子字符串是`"abcdab"`, `a`,`b`并且`ab`会出现两次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T00:03:11.407

这就是你想要的：

```
In [260]: S = 'abcd'

In [261]: list(itertools.chain.from_iterable([list(itertools.combinations(S,i)) for i in range(1,len(S))]))
Out[261]: 
[('a',),
 ('b',),
 ('c',),
 ('d',),
 ('a', 'b'),
 ('a', 'c'),
 ('a', 'd'),
 ('b', 'c'),
 ('b', 'd'),
 ('c', 'd'),
 ('a', 'b', 'c'),
 ('a', 'b', 'd'),
 ('a', 'c', 'd'),
 ('b', 'c', 'd')] 
```

或者，如果您真的希望它们全部作为字符串，您可以这样做：

```
In [262]: combos  = list(itertools.chain.from_iterable([list(itertools.combinations(S,i)) for i in range(1,len(S))]))

In [263]: [''.join(c) for c in combos]
Out[263]: 
['a',
 'b',
 'c',
 'd',
 'ab',
 'ac',
 'ad',
 'bc',
 'bd',
 'cd',
 'abc',
 'abd',
 'acd',
 'bcd'] 
```

**编辑仅获取以下子串`S`**：

```
In [270]: list(itertools.chain.from_iterable([[S[i:i+k] for i in range(len(S)-k)] for k in range(1,len(S)+1)])) + [S]
Out[270]: ['a', 'b', 'c', 'ab', 'bc', 'abc', 'abcd'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T00:06:47.497

那里有两个问题。

第一个`How many substrings can you make out of a string like “abcd”?`是这样的组合：

```
import itertools
s='abcd'
com=[list(itertools.combinations(s,x)) for x in range(1,len(s)+1)]

print [''.join(e) for e in sum(com,[])] 
```

印刷：

```
['a', 'b', 'c', 'd', 'ab', 'ac', 'ad', 'bc', 'bd', 'cd', 'abc', 'abd', 'acd', 'bcd', 'abcd'] 
```

**第二个问题是如何复制您的示例（这不是“组合”）。**您可以使用以下代码执行此操作：

```
>>> [s[i:i+j] for j in range(1,len(s)+1) for i in range(len(s)-j+1)]
['a', 'b', 'c', 'd', 'ab', 'bc', 'cd', 'abc', 'bcd', 'abcd'] 
```

# php - 如何在使用 echo 时从 HTML 中转义？

> ID：12945035
> 
> 赞同：2
> 
> 时间：2012-10-17T23:36:12.623
> 
> 标签：php, html

> **可能重复：**
> [如何将 HTML 标签显示为纯文本](https://stackoverflow.com/questions/6817262/how-to-display-html-tags-as-plain-text)

```
echo "<b>test</b>"; 
```

我想准确地回应我所写的内容。

```
<b>test</b> 
```

不是一个大胆的测试。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T23:38:20.410

很简单，只需使用[htmlspecialchars](http://php.net/htmlspecialchars)：

```
echo htmlspecialchars("<b>test</b>"); 
```

[htmlentities](http://php.net/htmlentities)将具有相同的效果，但在某些情况下其输出会略有不同 - 有关详细信息，请参阅文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T23:38:20.703

```
echo htmlspecialchars("<b>test</b>"); 
```

[文档](http://php.net/htmlspecialchars)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T00:04:39.113

您可以使用[htmlspecialchars转义单个文本块](http://www.php.net/htmlspecialchars)

```
echo htmlspecialchars("<b>test</b>"); 
```

[您可以通过使用ob_start](http://www.php.net/ob_start) ()开启输出缓冲并通过回调函数告诉 php 运行所有输出来转义所有形式的输出

```
ob_start('htmlspecialchars');
echo "<b>test1</b>";
echo "<b>test2</b>";
ob_end_flush(); //ends buffering and sends the escaped output 
```

您还可以告诉浏览器文档是文本，而不是 html

```
header('content-type: text/plain');
echo "<b>test1</b>";
echo "<b>test2</b>"; 
```

# c# - 启动以管理员身份运行的应用程序 - 通过传递 filename.sln (UseShellExecute)

> ID：12945038
> 
> 赞同：1
> 
> 时间：2012-10-17T23:36:56.350
> 
> 标签：c#, process

我可以调用 Process.Start(filename.sln) 并使用该解决方案启动 VisualStudio。

但是使用带有 Verb="runas" 的 ProcessStartInfo 这样做，我得到了一个例外。即使使用 UseShellExecute=true。

有没有办法启动以管理员身份运行的应用程序，我将应用程序的数据文件传递给它并且没有 application.exe 文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:34:44.737

找到了答案——当你以管理员身份运行时，你只能给它可执行文件，而不是让程序运行的应用程序。所以你必须通过 devenv.exe，而不是 filename.sln

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-24T09:07:28.513

```
ProcessStartInfo processInfo = new ProcessStartInfo(); //new process class
processInfo.Verb = "runas"; //wanna admin rights
processInfo.FileName = sDevPath + "devenv.exe"; //exe file path
processInfo.Arguments = sPrjPath + "mConverter.sln"; //sln file as argument
try
{
  Process.Start(processInfo); //try to start
}
catch (Win32Exception)
{
  //oops
} 
```

# jquery - jquery mobile 弹出关闭按钮 - 如何关闭而不返回？

> ID：12945040
> 
> 赞同：5
> 
> 时间：2012-10-17T23:37:01.233
> 
> 标签：jquery, jquery-mobile, youtube, popup

我正在使用 jquery mobile 1.2.0 中的新弹出对话框来显示一堆 youtube 视频。这是我正在使用的弹出示例：

[http://jquerymobile.com/demos/1.2.0/docs/pages/popup/popup-iframes.html](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/popup-iframes.html)

请注意地图示例……它是带有关闭按钮的花式框样式。我已经让我的视频弹出窗口做同样的事情。不同之处在于额外的关闭链接，添加到弹出窗口中，如下所示：

```
<a href="##" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a> 
```

问题是：打开一个视频然后关闭它，然后打开下一个视频并关闭它，第一个视频又出现了。我认为是因为之前的视频是历史中“返回”的位置，而关闭框被实现为“返回”。

是否有一种内置方法可以将关闭框实现为真正的“关闭”，还是我需要通过 javascript 来实现？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T07:27:18.150

@Redtopia，感谢您的回复。`myPopup.popup({ history: false });`我通过在弹出窗口上设置选项来解决我的问题。然后一切正常。

# encryption - 使用 UDF 进行 Hive 查询

> ID：12945044
> 
> 赞同：1
> 
> 时间：2012-10-17T23:37:16.790
> 
> 标签：encryption, hadoop, hive

我在 HDFS csv 中有一些加密数据，我已经为其创建了一个 Hive 表，并且我想运行一个 Hive 查询，该查询首先加密查询参数，然后进行查找。我有一个按如下方式进行加密的 UDF：

```
public class ParamEncrypt extends UDF {

public Text evaluate(String name) throws Exception {

    String result = new String();

    if (name == null) { return null; }

    result = ParamData.encrypt(name);

    return new Text(result);
}
} 
```

然后我将 Hive 查询运行为：

```
select * from cc_details where first_name = encrypt('Ann'); 
```

问题是，它在表中的每条记录上运行 encrypt('Ann')。我希望它进行一次加密，然后进行匹配。我试过了：

```
select * from cc_details where first_name in (select encrypt('Ann') from cc_details limit 1); 
```

但是 Hive 在 where 子句中不支持**IN**或 select 查询。

我能做些什么？

我可以做类似的事情：

```
select encrypt('Ann') as ann from cc_details where first_name = ann; 
```

这也不起作用，因为查询解析器抛出一个错误，说**ann**不是已知列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:21:57.960

最后用**右外连接**得到它

```
select * from cc_details ssn_tbl
right outer join ( select encrypt('850-37-8230','ssn') as ssn 
    from cc_details limit 1) ssn_tmp
on (ssn_tbl.ssn = ssn_tmp.ssn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:08:44.543

另一种实现方式（实际上也是我最终采用的方式）是缓存加密结果。这种方式实际上更快，因为通过连接，您可以获得一组单独的 map-reduce 作业，这会减慢整体执行时间。

就像这样：

```
private static String result = null;

public Text evaluate(String data) {
    if (result ==  null) {
        result = Data.encrypt(data);
    }
    return new Text(result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:49:30.140

我认为您正在寻找的是`@UDFType(deterministic = true)`您的 UDF 上的注释。它绝对可以在通用 UDF 上使用，您可以检查它是否可用于您创建的常规 UDF。如果没有，只需将您的 UDF 转换为 GenericUDF。您可以在我不久前写的[这篇博文](http://mark.thegrovers.ca/1/post/2012/06/how-to-write-a-hive-udf.html)中了解它。

# objective-c - UITableView 数据不一致

> ID：12945050
> 
> 赞同：0
> 
> 时间：2012-10-17T23:38:06.383
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`由`NSArray`.

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
  return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return self.data.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"CellIdentifier";
  UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
      cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];

  }
  id item = [self.data objectAtIndex:indexPath.row];
  cell.item = item;

  return cell;
} 
```

很标准。现在的问题是，它`reloadData`会同步请求`numberOfSections`，`numberOfRows`但会`cellForRow`异步调用。所以有时，当`cellForRowAtIndexPath`被调用时，数据数组已经改变，因此`[self.data objectAtIndex:indexPath.row]`会出现越界异常并使应用程序崩溃。我该如何避免这种情况？

请注意，每次设置`data`数组时，我也会调用`[self.tableView reloadData]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:17:01.387

我认为避免这种情况的最好方法是在数据更新时避免用户交互。也许你可以向用户显示一个“正在更新..”的屏幕和一个活动指示器。

另一种方法是让另一个数组填充新数据，处理可以在单独的线程中完成，有时只将它分配回数据源数组，然后重新加载调用。在数据源数组时也可以使用相同的屏幕变了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:52:07.303

`cellForRowAtIndexPath`被频繁调用，（在滚动等），你可以添加一个简单的代码行来检查数据数组的大小是否小于被请求的单元格。尽管这意味着您最终可能会得到空白单元格。

我会在这两种方法上设置断点，右键单击断点->“编辑断点”并勾选“评估后自动继续”。然后单击“添加操作”->“调试器命令”，然后键入“po data”或“po [data count]”。

每次命中断点时，这将在调试控制台中打印有关数组的信息（不停止）。然后，您应该能够查看调试输出并查看它在哪里不同步。添加一些`NSLog`语句来告诉您正在调用哪个方法等并从那里开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:34:45.803

我使用的快速破解，试试这个，看看它是否适合你：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"CellIdentifier";
  UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
      cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];

  }

  // -----------------------------------------------------------------
  // the magical line that prevents the table from fetching the data
  // -----------------------------------------------------------------
  if([indexPath row] < [self.data count])
  {

      id item = [self.data objectAtIndex:indexPath.row];
      cell.item = item;
  }

  return cell;
} 
```

:D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T15:22:20.507

您应该存储一个不会被修改的本地数组。然后，当您的基本数组发生更改时，您可以安全地更新存储的数组。查看使用内置 api 从表视图中添加/删除单元格[将行添加到现有 UITableView 部分](https://stackoverflow.com/questions/5906683/add-rows-to-existing-uitableview-section)

# esb - Mule ESB 从 URL 字符串下载文件

> ID：12945051
> 
> 赞同：2
> 
> 时间：2012-10-17T23:38:12.327
> 
> 标签：esb, mule

因此，使用 Mule ESB，我正在 Bing 中搜索某些 PDF 文件。然后我解析 JSON 响应以捕获文件位置的 URL。现在我需要检索文件并在本地保存。以下是我到目前为止所拥有的，但我有一种感觉，这一切都错了。如何完成用例？

我有两个问题：

1) 不知道如何从 #[message.payload.Url] 中删除“http”（因为 HTTP 端点将 http 添加到我传入的 url。

2）无法弄清楚如何检索文件。我什至不知道 HTTP Endpoint 是否是正确的选择。HTTP？文件？

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <flow name="BingFlow1" doc:name="BingFlow1">
        <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP"/>
        <https:outbound-endpoint exchange-pattern="request-response" host="api.datamarket.azure.com" port="443" path="Data.ashx/Bing/Search/v1/Web?Query=%27contract%20california%27&amp;WebFileType=%27PDF%27&amp;$top=50&amp;$format=Json" user="********" password="*****" doc:name="Bing"/>
        <json:json-to-object-transformer returnClass="java.util.Map" doc:name="JSON to Object"/>
        <expression-transformer expression="#[message.payload.d.results]" doc:name="Expression"/>
        <collection-splitter doc:name="Collection Splitter"/>
        <http:outbound-endpoint exchange-pattern="request-response" host="#[message.payload.Url]" port="80" method="GET" doc:name="HTTP"/>
        <file:outbound-endpoint path="/home/user/Documents/output" outputPattern="#[message.payload.ID].pdf" responseTimeout="10000" doc:name="File"/>
        <echo-component doc:name="Echo"/>
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:42:00.773

我无法测试流程，因为需要一些凭据，但以下内容应该对您有所帮助：

*   使用 an`expression-transformer`去除 HTTP，
*   您使用 a`http:outbound-endpoint`后跟 a 的方法`file:outbound-endpoint`可以正常工作，
*   更改`http:inbound-endpoint`为`one-way`：由于执行流程被拆分，因此无法返回任何合理的内容。

例如，假设`message.payload.Url`解析为 a `java.lang.String`，您可以使用：

```
<expression-transformer expression="#[org.mule.util.StringUtils.substringAfter(message.payload.Url, 'http://')]" doc:name="Expression"/> 
```

# java - Android：更改（亮度）设置后如何刷新屏幕

> ID：12945056
> 
> 赞同：1
> 
> 时间：2012-10-17T23:38:27.040
> 
> 标签：java, android, refresh, settings, screen

我想做的是创建一个代码，以便当用户移动 SeekBar 时，它会改变手机的亮度（随着它的移动）并将其设置为手机的**MAIN**设置。我已经剪断了我认为是问题的部分代码..

```
public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {     
    android.provider.Settings.System.putInt(getContentResolver(), android.provider.Settings.System.SCREEN_BRIGHTNESS, progress);
} 
```

### 如果您需要更多信息，请告诉我。它确实会改变亮度，但是您必须刷新屏幕-按下电源按钮并再次解锁-它才能工作，我想不出一种以编程方式执行此操作的方法

*任何帮助或建议将不胜感激，谢谢:)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:49:49.447

您将需要 WindowManager 来帮助您更改亮度。我的英语不好，所以我写了一个这样的示例代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ScreenBrightnessSeekBar = (SeekBar)findViewById(R.id.seekBrightness);

    //Brightness is a float-point number between 0 and 1，But getProess() returns Int, so, we can setMax(100), and then we div 100 later.

    ScreenBrightnessSeekBar.setMax(100);  
    ScreenBrightnessSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {  

        public void onStopTrackingTouch(SeekBar seekBar) {}  

        public void onStartTrackingTouch(SeekBar seekBar) {}  

        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            setScreenBrightness((float)seekBar.getProgress()/100);
        }  
    });
}

private void setScreenBrightness(float b){

    //get window attributes and save in layoutParams
    WindowManager.LayoutParams layoutParams = getWindow().getAttributes();  
    layoutParams.screenBrightness = b;

    //display the new brightness
    getWindow().setAttributes(layoutParams);
} 
```

//新代码：

```
 SeekBar screenBrightnessSeekBar;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    screenBrightnessSeekBar = (SeekBar)findViewById(R.id.seekBrightness);  
    screenBrightnessSeekBar.setMax(255);
    screenBrightnessSeekBar.setProgress((int) (android.provider.Settings.System.getInt(
            getContentResolver(), android.provider.Settings.System.SCREEN_BRIGHTNESS, 255)));

    screenBrightnessSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {  
        public void onStopTrackingTouch(SeekBar seekBar) {}
        public void onStartTrackingTouch(SeekBar seekBar) {}  

        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            if (fromUser) {
                android.provider.Settings.System.putInt(getContentResolver(),
                        android.provider.Settings.System.SCREEN_BRIGHTNESS, progress);

                WindowManager.LayoutParams layoutParams = getWindow().getAttributes();  
                layoutParams.screenBrightness = (float)progress / 255;

                getWindow().setAttributes(layoutParams);
            }
        }
    });
} 
```

您将需要在 AndroidManifest.xml 中获得此权限

```
 <uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission> 
```

# elasticsearch - 使用雪球分析器在弹性搜索中出现连字符的奇怪问题

> ID：12945067
> 
> 赞同：0
> 
> 时间：2012-10-17T23:39:51.497
> 
> 标签：elasticsearch

所以我遇到了这种情况，我们有很多文档的标题如 US-2343 或 FX-4321 ...。我使用雪球分析器作为索引的默认分析器，但是我遇到了这个奇怪的问题。

假设我有以下文档 US-4321、US-2343、US-2300 ... 当我搜索“us-2300”时，一个文档按预期显示（连字符在搜索中被转义）但是当我进行搜索时对于“us-23*”...什么都没有显示，但是如果我搜索“us 23*”（注意空格），那么 us-2343 和 us-2300 就会出现

我试图理解为什么它会这样工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:47:40.690

[您可以使用Analyze API](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)检查您的文档是如何被索引的。如您所见，您的文档被索引为两个标记：`us`和`2343`.

```
$ curl "localhost:9200/your_index/_analyze?analyzer=snowball&pretty=true" -d "US-2343"   
{
  "tokens" : [ {
    "token" : "us",
    "start_offset" : 0,
    "end_offset" : 2,
    "type" : "<ALPHANUM>",
    "position" : 1
  }, {
    "token" : "2343",
    "start_offset" : 3,
    "end_offset" : 7,
    "type" : "<NUM>",
    "position" : 2
  } ]
} 
```

当您搜索时`us-23*`，elasticsearch 会尝试查找带有以 . 开头的标记的文档`us-23`。发生这种情况是因为未分析通配符表达式。如您所见，`snowball`解析器不会生成此类标记，因此不会返回任何结果。当您搜索两个标记`us`和带有前缀的标记时`23`，您会得到结果。

看看[`text_phrase_prefix`查询](http://www.elasticsearch.org/guide/reference/query-dsl/text-query.html)。它可能更适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:01:34.973

如果您使用[分析 API](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)，您会发现您的标题是如何分解为术语的。

我认为 US-4321 被索引为 us 和 4321。当您搜索“us 4321”（使用 QueryString 或 MatchQuery）时，它会找到所有 us 术语和所有 4321 术语。

要回答更多问题，最好了解有关您的查询的更多详细信息。

如果您的标题包含“-”并且它在您的用例中很重要，您应该使用另一个分析器。顺便说一句，使用通配符（从性能 POV 来看）比使用 ngram 或 edgengram 分析器更昂贵。

HTH 大卫

# linux - 带空格的变量问题

> ID：12945070
> 
> 赞同：0
> 
> 时间：2012-10-17T23:39:56.587
> 
> 标签：linux, shell

我写了一个小脚本，复制，然后删除，然后创建一个符号链接，从文件移动到它的新位置。为了轻松地多次执行此操作，我使用了变量，但是当文件中有空格时，我会遇到一些错误，即使我在每个空格前都使用了“\”。这是我的代码：

```
dest=~/Videos-win/file\ name\ with\ spaces
src=~/Downloads/file\ name\ with\ spaces

echo $dest ;
cp -r $src $dest ;
rm -R $src ;
ln -s $dest $src ;
echo 'done' 
```

我也尝试使用 '\\' （将 '\ ' 添加到 var）。也给了我一些错误。

有人知道我在做什么错吗？tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:42:58.970

试试这个 ：

```
dest="$HOME/Videos-win/file name with spaces"
src="$HOME/Downloads/file name with spaces"

echo "$dest"
cp -r "$src" "$dest"
rm -R "$src"
ln -s "$dest" "$src"
echo 'done' 
```

请使用更多报价！它们至关重要。`'`另外，了解and`"`和`之间的区别。请参阅[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:44:27.153

您的变量将具有“间隔”值，但随后空格将传递给`cp` `rm`and`ln`命令。

在实际使用它们的变量周围加上双引号，以确保将整个值（包括空格）作为单个参数传递给命令。

尝试：

```
cp -r "$src" "$dest"
rm -R "$src"
ln -s "$dest" "$src" 
```

...而且您不需要所有的分号...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:43:12.620

尝试使用双引号：

```
cp -r "$src" "$dest" ; 
```

...

# jsp - 如何在dojo自定义弹出窗口中获取父元素

> ID：12945071
> 
> 赞同：0
> 
> 时间：2012-10-17T23:39:57.860
> 
> 标签：jsp, dojo

单击基于 dojo 模板的自定义弹出窗口中的提交按钮后，需要更改父窗口中的标签。

```
creating widget from parent.
     new com.test.widget.testWidget({panel: this});
<label id="a">test</label>
--------------------------------

in the custom widget 

show:function(){
        // need to change the value of the parent label "a"
    }, 
```

我确定我解释正确......任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:52:43.450

您可以将 data-dojo-attach-point 添加到父小部件中的标签，例如

```
<label id="a" data-dojo-attach-point="labelA">test</label> 
```

然后在显示功能

```
show: function(){
    this.panel.labelA.innerHTML = "hello world"
} 
```

# android - Android：LinearLayout在更新视图时重新排列

> ID：12945074
> 
> 赞同：2
> 
> 时间：2012-10-17T23:40:11.020
> 
> 标签：android, android-linearlayout

我正在处理的应用程序中的 LinearLayout 有问题。线性布局是垂直的。布局中有几个项目，包括 TextView、垂直 SeekBar 和 ImageView。

每当我更新 textView（即 setText()）时，我的布局都会重新排列。ImageView 从底部变为中间。如果我替换 ImageView 中的可绘制对象，也会发生同样的事情。

我认为我指定布局的方式有问题。这是有问题的部分：

```
 <modrobotics.code.ui.BlockValueSliderView
            android:id="@+id/sliderSix"
            android:layout_width="0dp"
            android:visibility="gone"
            android:layout_height="fill_parent"
            android:layout_marginBottom="-12dp"
            android:layout_weight="1"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/BVLabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:gravity="center_horizontal"
                android:paddingTop="12dp"
                android:text="64"
                android:textColor="#000"
                android:textSize="20sp" >
            </TextView>

            <View
                android:id="@+id/circle1"
                android:layout_width="6dp"
                android:layout_height="6dp"
                android:layout_gravity="center"
                android:layout_marginBottom="-6dp"
                android:background="@drawable/circle"
                android:gravity="center_horizontal"
                android:padding="0dp" />

            <LinearLayout
                android:id="@+id/controlElementList12"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:padding="0dp" >

                <modrobotics.code.ui.VerticalSeekBar
                    android:id="@+id/slider"
                    android:layout_width="wrap_content"
                    android:layout_height="0dp"
                    android:layout_gravity="bottom|center_horizontal"
                    android:layout_marginBottom="-20dp"
                    android:layout_weight="20"
                    android:padding="0dp"
                    android:progressDrawable="@drawable/seekbar_progress"
                    android:thumb="@drawable/seekbar_thumb"
                    android:thumbOffset="-1dp" />

                <ImageView
                    android:id="@+id/logo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal"
                    android:layout_marginBottom="-20dp"
                    android:layout_marginTop="-20dp"
                    android:layout_weight="1"
                    android:padding="0dp"
                    android:src="@drawable/on6" >
                </ImageView>
            </LinearLayout>
        </modrobotics.code.ui.BlockValueSliderView> 
```

编辑：

我已经尝试了下面提到的建议，但无济于事。我已经删除了所有负边距，通过删除不必要的 LinearLayout 简化了布局，摆脱了 GONE，图像的固定高度等......我开始相信问题不仅仅是这个。

我正在使用带有 PageAdapter 的单个 Activity。看来我没有正确使用 PageAdapter。startUpdate() 被一遍又一遍地调用。我似乎已经清理了任何静态全局变量或以某种方式在单独的线程上。我相信这些问题可能都有联系。也许我在使用 PageAdapter 时并不完全理解线程模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:00:26.813

在“modrobotics.code.ui.BlockValueSliderView”中，将可见性从 GONE 更改为 INVISIBLE。每当您以编程方式将此视图的可见性从 GONE 更改为 VISIBLE 时，布局元素可能会重新排列，因为当 View 设置为 GONE 时，它不会占用布局中的任何空间，并且放置了其余视图在布局中只占用它的空间。如果它消失了，它的行为就像它在布局中不存在一样。然后，当您将此视图设置为可见时，它会切换布局中的其余视图以为其自身准备空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:26:26.410

这原来是与我使用的 VerticalSeekBar 实现相关的问题。

我正在为搜索栏旋转拇指，并且还在搜索栏上调用了 bringToFront()。这两个调用的组合导致元素被重新排列。不知道为什么，但删除这两行代码解决了我的问题。

# json - JSON对象和DTO是一回事吗？

> ID：12945080
> 
> 赞同：5
> 
> 时间：2012-10-17T23:41:11.627
> 
> 标签：json, dto

JSON 对象和 DTO（数据传输对象）是一回事，还是完全不同？在 REST 架构的情况下，传入的 HTTP 请求可以从客户端作为 JSON 发送，然后在服务器端接收到它们后序列化为 CLR 对象。

在这种特殊情况下，JSON 会被视为 DTO，还是将序列化对象称为 DTO？

我对多个系统之间的数据传输非常陌生，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T23:54:17.197

DTO 只是一种用于表示数据的设计模式，可以格式化为 JSON、XML 甚至其他格式。

JSON是序列化的类型。DTO 是序列化的对象。

旁白：JSON 不仅仅是数据传输，但我认为细节在您的问题中并不重要。重要的是，如果您使用 JSON 的行为方面，您将不再处理 DTO，因为 DTO 应该是无行为的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-15T14:11:53.823

正如 Fenton 的回答所提到的，DTO（数据传输对象）是一个概念，而不是任何具体的东西

JSON、XML 等本身就是规范，这就是我认为他所说的“JSON 是序列化类型。DTO 是序列化对象”的意思。

根据[martinfowler.com](https://martinfowler.com/eaaCatalog/dataTransferObject.html)上的帖子，我认为说“您可以将 DTO 序列化为 JSON”是正确的术语。即一个JSON 对象可以是一个DTO。

# javascript - 当我需要一个数字时，JS 变量输出为 isNaN

> ID：12945086
> 
> 赞同：0
> 
> 时间：2012-10-17T23:41:39.717
> 
> 标签：javascript

这是作业，所以很清楚我要做什么。

> 编写一个程序，根据三个因素计算酒店房间的价格。首先，一个房间里会有多少人：1-2、3-4 或 5-6？一个房间最多允许六个人。二、客人是AAA会员吗？第三，他们想要一个有风景的房间吗？费率计算如下：
> 
> 基本房价为：1-2人=$50/晚 3-4人=$60/晚 5-6人=$70/晚 AAA会员每晚基本房价有优惠：1-2人= 15% 3-4 人 = 10% 5-6 人 = 5% 执行所有其他计算后，景观客房每晚的费用增加 10%。
> 
> 程序应提示用户输入所有内容，执行计算并输出每晚的总成本。建议至少使用一些嵌套的 if/else 结构来计算成本。

像 firebug 和 JSLint 这样的调试器没有任何帮助，我怀疑我只是在做一些完全错误的事情，尽管我以前没有遇到过“嵌套 if”逻辑分配的问题。无论如何，我是一个完整而彻底的新手。

当我为 numberOfGuests 输入 1、为tripleAStatus 输入 N 和为 roomView 输入 N 进行测试时，finalRate 返回为 isNaN（我知道这意味着不是数字），我不知道为什么。

```
//Variable Declaration

var numberOfPeople;
var tripleAStatus;
var roomView;
var discountRate;
var roomRate;
var finalRate;
var discountPercent;

//Input

numberOfPeople = prompt("How many guests will their be? 6 Maximum.");

tripleAStatus = prompt("Are you a AAA Member? Y/N.");

roomView = prompt("Would you like your room to have a view?");

//Logic

if ((numberOfPeople <= 2) && (numberOfPeople > 0)) {
   roomRate = 50;
   discountPercent = .15;
} else if ((numberOfPeople <= 4) && (numberOfPeople > 2)) {
   roomRate = 60;
   discountPercent = .10;
} else if ((numberOfPeople <= 5) && (numberOfPeople > 4)) {
   roomRate = 70;
   discountPercent = .5;
} else {
   alert("Your number of guests must be at least 1 and no more than 6");
}

if (tripleAStatus = "Y") {
   discountRate = roomRate - (roomRate * discountRate);
} else if (tripleAStatus = "N") {
   discountRate = roomRate;
} else {
   alert("You need to answer with either Y or N");
}

if (roomView = "Y") {
   finalRate = (discountRate) + ((discountRate) * .10);
} else if (roomView = "N") {
   finalRate = discountRate;
} else {
   alert("You need to answer with either Y or N");
}

//Output

document.write("Total cost per night is " + "$" + finalRate); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:49:29.490

看起来像

```
discountRate = roomRate - (roomRate * discountRate); 
```

应该读

```
discountRate = roomRate - (roomRate * discountPercent); 
```

这就是你进入`NaN`finalRate 的原因；discountRate 此时尚未定义，因此您的代码实际上是`discountRate = 1 - (1 * undefined)`.

正如其他海报所提到的，您还需要将条件更改为使用`==`or `===`; 是一个赋值运算符，因此您实际上`=`不是检查 if `tripleAStatus`is ，而是检查 if 的计算结果（它总是会这样）。`"Y"``"Y"``true`

```
tripleAStatus = 'N';
if (tripleAStatus = 'Y') {
    // tripleAStatus is now "Y", and the code inside this if will always be executed
} 
```

工作变化：http: [//jsfiddle.net/5ZVkE/](http://jsfiddle.net/5ZVkE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:48:06.927

在您的 If 语句中，您使用单个“=”分配值。由于赋值总是发生，所以它会返回 true。为了比较值，您需要在 if 语句中使用双“==”。像这样：

```
if (tripleAStatus == "Y") {
   discountRate = roomRate - (roomRate * discountRate);
} else if (tripleAStatus == "N") {
   discountRate = roomRate;
} else {
   alert("You need to answer with either Y or N");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:48:22.307

将 'if' 语句中的单个 '=' 替换为 '=='。您当前正在使用赋值运算符而不是相等。

例如：

```
if (tripleAStatus == "Y") ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T23:48:28.947

您在 if 语句中使用赋值而不是相等运算符。即改变

```
if (tripleAStatus = "Y") 
```

到

```
if (tripleAStatus == "Y") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T23:57:38.017

请使用`===`！！这样，语句中的类型不是`casted`，因此更严格地检查它是否相同。

```
if (tripleAStatus === "Y") {
   discountRate = roomRate - roomRate * discountRate;
} else if (tripleAStatus === "N") {
   discountRate = roomRate;
} 
```

/e -> & 它更快！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T00:04:15.007

`prompt()`返回一个字符串而不是数字。

[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)与 一起使用`numberOfPeople`。

另一个问题是，您在公式中复制并粘贴了错误的变量名称。看看你是如何使用`discountRate`而不是`discountPercent`.

# c# - 如何将 URL example.com/root/login 映射到 example.com/login？

> ID：12945087
> 
> 赞同：4
> 
> 时间：2012-10-17T23:41:46.050
> 
> 标签：c#, asp.net, url-rewriting, controller, url-routing

> **可能重复：**
> [如何将 Home/Action/id 映射到 action/id？](https://stackoverflow.com/questions/2832202/how-to-map-home-action-id-to-just-action-id)

我有一个名为“root”的视图文件夹，里面有一个名为“login.aspx”的视图。

![在此处输入图像描述](../Images/11b4f0d0b09ddefb55b9552f8b3b6134.png)

我有一个名为“rootController.cs”的控制器。

![在此处输入图像描述](../Images/d0193b566d3d371fb6706c8607cc8ce8.png)

我有一个名为 login() 的 ActionResult 它返回 View("login")。

当我运行我的应用程序时......要进入登录页面，我必须看到一个丑陋的网址 www.example.com/root/login

![在此处输入图像描述](../Images/27365de69818419bd6a393f803f7c60c.png)

我想说 www.example.com/login。

我该怎么做呢？

提前致谢！

编辑： ////

至今：

![在此处输入图像描述](../Images/7fba56a5470d6cf3d18f1901a507965a.png)

编辑： ////

解决了：

![在此处输入图像描述](../Images/341c283dd041c99e5fbfae1586c136d0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:49:00.407

转到您的 `MvcApplication`类（默认情况下它在`Global.asax.cs`文件中）并将以下代码添加到`RegisterRoutes(RouteCollection routes)`函数中：

```
routes.MapRoute(
      "Login", // Route name
      "login", // URL with parameters
      new { controller = "root", action = "login" } // Parameter defaults
); 
```

# regex - 崩溃的 powershell 并将我的 CPU 与 Regex 挂钩 - 如何/为什么？

> ID：12945088
> 
> 赞同：0
> 
> 时间：2012-10-17T23:41:52.810
> 
> 标签：regex, powershell, crash

执行以下命令后，我的 powershell 固定在 97% CPU 并完全冻结。**我能够始终如一地重现这种行为**。知道这是一个错误还是我做了一些禁忌？

```
$anew -match '((.*)+([v]\d{1}\.\d{1}\..*)$)' 
```

$anew 是一个大约 35 行长的数组，它保存来自服务器的配置转储。它看起来类似于：

目录：\aaa.net\builds\directedbuilds\bbbb\ccc\dddd\eee

模式 LastWriteTime 长度名称 ---- ------------- ------ ---- d---- 10/15/2012 6:12 PM v2.1.0.69环境：AB-34 Servers_in_Environment：SERVER01;SERVER02 NgatRootFolder：E:\DIRNAME PFXfilename：star.dom.net.pfx 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:45:19.540

您的模式以 开头，由于回溯`(.*)+`，这可能会导致 O(n ^(3 ) 性能。)您可能应该使用`(^(.*)([v]\d{1}\.\d{1}\..*)$)`（没有额外的 + 和锚定）来避免回溯评估非常慢的问题。

# python - 获得明年 1 月 1 日

> ID：12945089
> 
> 赞同：2
> 
> 时间：2012-10-17T23:41:54.710
> 
> 标签：python, django

这真的不应该这么难，但由于某种原因，我似乎无法理解。

我正在尝试对我的查询运行一个过滤器，比较今天和明年第一天之间的日期范围。

得到今天是没有问题的，但我似乎无法得到明年的第一天。我希望能够为自己提供 2013 年 1 月 1 日

到目前为止，这是我的过滤器：

```
cur_il = Investment.objects.all().filter(plan = plan).order_by('financial_institution').filter(maturity_date__range=[now, nextyear]) 
```

显然我用它来获取今天的日期：

```
now = datetime.now() 
```

我怎样才能得到下一个日期？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T23:46:19.973

这行得通吗？

```
>>> today = datetime.datetime.now()
>>> next_year = datetime.datetime(year=today.year+1, month=1, day=1)
>>> next_year
datetime.datetime(2013, 1, 1, 0, 0) 
```

# javascript - three.js 和许多形状的内存泄漏

> ID：12945092
> 
> 赞同：4
> 
> 时间：2012-10-17T23:42:15.287
> 
> 标签：javascript, memory-leaks, three.js

我创建了一些代码，它们很快就会耗尽内存并死掉。

我已将其缩减为代码的环面生成/删除部分。我检查了场景数组和圆环数组的长度是否随着形状的移除而缩小，因此它们似乎得到了很好的管理，但我不确定内存泄漏的位置。

有任何想法吗？

[http://jsfiddle.net/eVwP3/](http://jsfiddle.net/eVwP3/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T00:04:05.213

在`webGLRenderer`, 删除网格后

```
scene.remove( mesh ); 
```

你可以释放内存

```
mesh.dispose();
geometry.dispose();
material.dispose();
texture.dispose(); 
```

请参阅[http://threejs.org/examples/webgl_test_memory.html](http://threejs.org/examples/webgl_test_memory.html)和[http://threejs.org/examples/webgl_test_memory2.html](http://threejs.org/examples/webgl_test_memory2.html)。

编辑：更新到three.js r.69

PS不错的演示。您可能需要考虑创建对象池并重用它们，而不是不断地分配和解除分配。

# asp.net - 带有 WebMatrix 和 razor 的友好 URL

> ID：12945097
> 
> 赞同：1
> 
> 时间：2012-10-17T23:42:36.197
> 
> 标签：asp.net, razor, webmatrix

我是 ASP.NET 的新手，我首先使用 razor 语法在 WebMatrix 中学习。

在 PHP 中，我使用 .htaccess 将 URL 路由到数据库帖子，例如：

```
http://mywebsite.com/linux/how-to-install-wamp-in-ubuntu-12.04 
```

在这种情况下，路径文件：

```
http://mywebsite.com/routes.php?title=how-to-install-wamp-in-ubuntu-12.04 
```

我正在尝试像 PHP 示例一样进行路由：

```
http://mywebsite.com/routes.cshtml?title=how-to-install-wamp-in-ubuntu-12.04 
```

我可以在 ASP.NET 中使用 WebMatrix 和 razor 执行此操作吗？

我知道如何在 ASP.NET 中获取 GET 数据，但我不明白如何创建友好的 URL 以及在找不到页面时如何路由到“routes.cshtml”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T06:27:31.013

有一个专门用于 ASP.NET 网页的现有程序包，可让您做您想做的事情，并且可以通过 WebMatrix 程序包管理器获得。它被称为网页路由。我写了一篇关于如何使用它的文章：http: [//www.mikesdotnetting.com/Article/187/More-Flexible-Routing-For-ASP.NET-Web-Pages](http://www.mikesdotnetting.com/Article/187/More-Flexible-Routing-For-ASP.NET-Web-Pages)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T02:39:32.117

**详细信息：** Microsoft 现在通过 Nuget 包使 ASP.NET 的实现变得非常容易。不幸的是，这个包“Microsoft.AspNet.FriendlyUrls”目前处于预发布版本中，WebMatrix 不允许您下载预发布版本。因此，与只有 Visual Studio 或 VS Express 相比，按照我的方式进行操作可能并不容易。

我的建议是下载[Visual Studio Express 2012](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)并将其用于开发或仅使用它，以便获得 Nuget 包。

我假设您想在 WebMatrix 中进行开发。

**解决方案：**

1.  下载并安装 Visual Studio Express 2012。
2.  创建一个新网站
3.  在解决方案资源管理器中，右键单击您的网站并选择“管理 Nuget 包..”
4.  按“仅稳定版”下拉菜单并选择“包括售前赛”
5.  在搜索框中输入“Microsoft.AspNet.FriendlyUrls”
6.  选择“安装”
7.  在 Windows 资源管理器中打开您的项目，以便查看所有文件。
8.  将文件夹“App_Code”和“bin”复制到您的 WebMatrix 项目中（例如，将它们添加到您的解决方案中）。
9.  添加一个全局应用程序类“Global.asax”
10.  在 Application_Start 方法中添加以下行

    RouteConfig.RegisterRoutes(System.Web.Routing.RouteTable.Routes);

11.  您现在将拥有 FriendlyURL

我知道这似乎需要做很多工作，但如果你有 Visual Studio 或 WebMatrix 允许预发布，那么它会很容易理解。

**警告：**如果您决定在 Visual Studio 中开发它，请删除以下文件，因为它的移动部分目前不起作用（因此它是预发布版）

*   Site.Mobile.Master
*   LiSite.Mobile.Master.designer.cs
*   ViewSwitcher.ascx
*   ViewSwitcher.ascx.designer.cs

**未来：**在不久的将来会有 FriendlyUrl 的发布版本，然后您将能够更容易地从 WebMatrix 中的 Nuget 获取它。

**更多信息的链接：**

[有关如何在 WebMatrix 中使用 Nuget 的](http://www.microsoft.com/web/post/how-to-use-nuget-in-webmatrix-2)[Microsoft 友好 URL 包信息](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:06:02.477

当然可以，这叫做 URL 重写

[http://developer.mindtouch.com/en/kb/Installing_MindTouch_Core_on_Windows_%28IIS%29/Rewrite_web.config_for_IIS7](http://developer.mindtouch.com/en/kb/Installing_MindTouch_Core_on_Windows_%28IIS%29/Rewrite_web.config_for_IIS7)

或在这里

[http://www.phpgenious.com/2010/04/url-rewriting-with-php-and-iis-7/](http://www.phpgenious.com/2010/04/url-rewriting-with-php-and-iis-7/)

或谷歌了解更多信息

# algorithm - 如何在 OpenSSL 中为 X.509 证书使用不同的加密算法？

> ID：12945099
> 
> 赞同：1
> 
> 时间：2012-10-17T23:42:52.327
> 
> 标签：algorithm, encryption, openssl, ssl-certificate, x509

我一直在为一家公司生成供内部使用的证书，随着时间的推移，该证书最终可能会变得越来越普遍（而不仅仅是在单个内部网站上）。我注意到，在使用 OpenSSL 时，生成的证书在 Chrome 中显示为使用 AES_256_CBC，如下所示。

![Chrome 显示 AES_256_CBC](../Images/847b42c4ed63ae57e2c92d86ec096599.png)

我一直在想，是否可以在 OpenSSL 中使用其他加密算法？我已经看到其他网站的证书显示为使用 RC4_128 和 CAMELLIA_256_CBC 等算法。

如果有帮助，我安装了两个版本的 OpenSSL；0.9.8l 和 1.0.1c，我使用的是 Windows 7。这些证书也是链式的；一个根证书，一个中间证书，然后是用于网站的证书。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:13:30.067

### 简短的回答

是的，您可以使用其他加密算法，但 X.509 证书在其中扮演的角色非常小。

为了在不修改客户端的情况下做到这一点，您必须配置您的**服务器**以支持某些密码套件而不是其他密码套件（例如，对于 Apache，请查看[SSLCipherSuite](http://httpd.apache.org/docs/2.2/ssl/ssl_howto.html#ciphersuites)配置）。

如果您可以修改客户端但不能修改服务器，则必须重新排序客户端在握手期间提供的密码套件。具有您首选算法的那些应该排在第一位。或者，您可以使用您不喜欢的加密算法删除那些（即使这意味着连接可能会因此而失败）。

### 长答案

SSL/TLS 连接上使用的加密算法是在握手期间协商的。[客户端将其支持的密码套件](http://www.openssl.org/docs/apps/ciphers.html#CIPHER_SUITE_NAMES)发送到服务器，并根据其偏好进行排序。服务器选择它最喜欢的一个。

密码套件（例如`TLS_RSA_WITH_AES_128_CBC_SHA`）是一个元组，指示必须使用哪些算法：

*   验证
*   密钥交换
*   批量加密
*   密码摘要

服务器 X.509 证书的内容在此过程中起着很小的作用，因为它限制了身份验证和密钥交换的完成方式。如果服务器证书包含 RSA 密钥，则密码套件不能是任何以`TLS_DH_DSS_*`.

理论上，服务器 X.509 证书独立于批量加密算法。但是，由于并非所有可能的组合都被覆盖（或由客户端提供），服务器证书中的密钥类型*可能会*排除某些密码。

# ruby-on-rails - 使用选择框和按钮从视图调用和传递参数到控制器

> ID：12945100
> 
> 赞同：0
> 
> 时间：2012-10-17T23:42:52.993
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 Rails 应用程序中订购一张桌子（没有任何插件）。这个想法是从数据库中检索一个表并使用 3 个选择框对其进行排序。在我单击“订购”按钮并使用订购数据刷新页面后。

我正在尝试一些东西并得到这个代码：

```
def order
  @clients = Client.all(:order => 'parameter1, parameter2, parameter 3')
end 
```

但是，我有两个问题：

1.  如何将参数从`<select>`盒子传递到控制器的方法`order`？
2.  单击按钮时，如何调用此方法并使用有序数据刷新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:34:26.003

我认为现在可以扩展呈现表格的相同控制器操作以处理传入的排序选项。例如，它可能是`index`控制器中的当前方法。

`form_for`因此，在您当前的页面中使用、`select`助手和一个`submit`重新调用的按钮构建一个表单`index`。

`params`在控制器中，您可以使用Rails 为您设置的散列访问在选择框中选择的值。例如，如果您的排序参数是“height”、“age”和“gender”，在 select lists 中，`sort1`您可能有类似的代码`sort2``sort3`

```
def index
  sort_list = []
  # assumes the value of the sort list is the column name
  sort_list << params[:sort1] if params[:sort1]
  sort_list << params[:sort2] if params[:sort2]
  sort_list << params[:sort3] if params[:sort3]
  if sort_list.blank?
    @clients = Client.all
  else
    @clients = Client.all(:order => sort_list.join(", "))
  end
  ...
end 
```

我知道你说过你不想要一个插件（gem），但我不得不提到一个很棒的插件，它甚至可以用于非常复杂的排序（和过滤），称为[ransack](https://github.com/ernie/ransack)。

# prolog - Prolog语法问题，否定后的空格

> ID：12945107
> 
> 赞同：3
> 
> 时间：2012-10-17T23:43:42.837
> 
> 标签：prolog

我对在 SWI Prolog 中使用否定有一个奇怪的问题。当我在否定“\+”后使用以下不带空格的代码时，会出现错误：

```
2 ?- assert((only_child(X) :- mother(M,X),\+(mother(M,_),\+ X==_))).
true.

3 ?- only_child(cathy).
ERROR: only_child/1: Undefined procedure: (\+)/2
ERROR:   However, there are definitions for:
ERROR:         (\+)/1
Exception: (7) \+(mother(melody, _G2102), \+cathy==_G2107) ? creep
4 ?- 
```

但是，如果我在否定后使用空格，则效果很好。

```
2 ?- assert((only_child(X) :- mother(M,X),\+ (mother(M,_),\+ X==_))).
true.

3 ?- only_child(cathy).
false.

4 ?- 
```

但是下面的代码对两者都适用，在“\+”之后使用空格并且不使用空格。

```
4 ?- \+ father(michael,cathy).
false.

5 ?- \+father(michael,cathy).
false.

6 ?- 
```

谁能给我解释一下？它真的非常令人费解。我会很感激的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:04:40.330

解析 Prolog 时，左括号是特殊的。如果标识符和左括号之间没有空格，则标识符始终被视为函子的名称（即使它不是字母数字）。括号内的任何内容都被视为此函子的参数列表。

但是，如果有空格，则括号将按其正常的分组表达式数学函数处理。这种表达式中的逗号起到布尔`and`运算符的作用。

所以：

```
"func(A,B)"  - OK - invoke `func` on parameters `A`, `B`    
"func (A,B)" - syntax error - interpreted as an identifier stuck together 
               with an AND expression    
"\+ (A,B)"   - OK - operator `\+` acting on `(A,B)` (A and B)    
"\+(A,B)"    - error - invoke `\+` with two parameters `A`, `B` 
               but \+ only takes one argument    
"\+(A)"      - OK - since `\+` takes one argument, it can 
               be invoked as a functor with one argument inside parens 
```

解析器也足够智能，可以将运算符与标识符分开（第一个字母触发一个新标记）：

```
"\+ father(A,B)" - OK - invoke functor `father` with `A` and `B`, 
                   negate the result
"\+father(A,B)"  - still OK - the parser will stop reading the 
                   name of the operator when it encounters the 'f', 
                   so the result is same as above 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T23:53:25.740

Prolog在运算符和括号之间[需要](http://www.ifcomputer.co.jp/en/manuals5.2/refman/node482.html)一个空格（“分隔符”）。

如果没有空格，Prolog 解析器将其视为具有两个参数的函子。下面的两种情况与解析器没有什么不同。

```
mother(..., ...)
\+(..., ...) 
```

但是，如果您放置一个空格，解析器会将其视为一个运算符和一个带括号的参数。有一个相反的规则（函子的名称和括号之间不能有空格），使得这一行也产生错误：

```
mother (..., ...) 
```

经验法则是 - 如果是运算符，则在其后放置一个空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T06:03:32.137

我认为解释应该是 Prolog 不允许函子和参数之间有空格。

运算符是具有适当声明的函子（参见[op](http://www.swi-prolog.org/pldoc/doc_for?object=op/3) /3 和[current_op](http://www.swi-prolog.org/pldoc/doc_for?object=current_op/3) /3）。在这样的声明之后，我们可以*选择*是否使用仿函数作为运算符。一个人为的例子，用算术：

```
?- X is +(1,*(5,8)).
X = 41.

?- X is 1+5*8.
X = 41.

?- X is 1+(5*8).
X = 41. 
```

然后你看到的错误类似于这个

```
?- X is + (1,*(5,8)).
ERROR: evaluable `1,5*8' does not exist
   Exception: (6) expand_goal(_G209 is + (1, 5*8), _G292, user, [user, system], _G295) ? creep 
```

即`+`用作函子的原子不允许括号前有空格。

**编辑** 还有一点值得注意的是，它`,`被声明为运算符，意思是`AND`，*但*也是一个词法元素，用作参数分隔符。然后在你的第二种情况下 + 应用于连词`mother(M,_) AND \+ X==_`

# .net - 绑定列表 作为数据成员

> ID：12945108
> 
> 赞同：1
> 
> 时间：2012-10-17T23:43:45.257
> 
> 标签：.net, wcf, datacontractserializer

我有一个要通过 WCF 服务（Net TCP 绑定）发送的 CLR 类。客户端和服务器都使用相同的数据类和服务接口。没有生成存根。以下是两个类的基本部分：

```
[DataContract]
public class ContainerClass
{
    //some primitive data with [DataMember] ...

    [DataMember] /**/
    public virtual BindingList<ItemClass> Items{ get; private set; }
}

[DataContract]
public class ItemClass
{
    //some primitive data with [DataMember] ...

    public ContainerClass Parent { get; set; } // (no [DataMember])
} 
```

如果我省略了（标有）的`[DataMember]`属性，则数据被正确传输。当然，没有物品。`BindingList``/**/`

只要我添加`[DataMember]`，对返回类型对象的服务方法的调用`ContainerClass`就会失败，并显示以下错误消息：

> 服务器没有提供有意义的回复；这可能是由于合同不匹配、会话过早关闭或内部服务器错误造成的。

合同错配在设计上是不可能的。可能有一个内部服务器错误，我没有收到通知。

我该如何解决这个问题并使服务器将项目发送给客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:55:16.260

很可能`BindingList<>`无法序列化。要获得更详细的错误，您需要启用跟踪。请参阅[这篇文章](https://stackoverflow.com/questions/4271517/how-to-turn-on-wcf-tracing)了解如何操作。

在 DTO 中使用复杂的集合类通常不是一个好主意。考虑使用数组/列表，您总是可以`BindingList<>`在客户端重建。

# iphone - 如何将 UITableView 添加到包含其他对象的父级？

> ID：12945109
> 
> 赞同：0
> 
> 时间：2012-10-17T23:43:50.183
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

这基本上是我想要的布局：

![在此处输入图像描述](../Images/3b8a4bdb404a7ffdd9c799cd0b536601.png)

底部的 UITableView 应该容纳对特定帖子的评论，为每个评论添加一行。

底部的 UITableView 连接到`commentTable`; 所有其他元素也相应地接线。

当我构建并运行时，没有错误，但我只看到帖子下方的一个空表格单元格。

我知道在将数据加载/传递到我的表时缺少一些东西，但我想知道是否有人可以指导我如何完成这项工作。

**DetailViewController.h**

```
#import <UIKit/UIKit.h>
@interface DetailViewController : UIViewController {
    IBOutlet UIImageView  *postThumbView;
    IBOutlet UILabel      *postTextLabel;
    IBOutlet UIImageView  *postAuthorPictureView;
    IBOutlet UILabel      *postAuthorNameLabel;
    IBOutlet UILabel      *postTimestampLabel;
    IBOutlet UIScrollView *scroller;
    IBOutlet UITableView  *commentTable;
}

@property (strong, nonatomic) id detailItem;
@end 
```

**细节视图控制器.m**

```
#import "DetailViewController.h"

@interface DetailViewController ()

- (void)configureView;

@end

@implementation DetailViewController;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureView];
}

- (void)configureView
{
    if (self.detailItem) {
        NSDictionary *post           = self.detailItem;
        NSString     *postText       = [post objectForKey:@"post_text"];
        ...

        postTextLabel.text  = postText;
        ...
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSDictionary *post           = self.detailItem;
    NSDictionary *commentThread  = [post objectForKey:@"comment"];

    return commentThread.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"commentCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *post           = self.detailItem;
    NSDictionary *commentThread  = [post objectForKey:@"comment"];

    NSString     *commentText       = [commentThread objectForKey:@"comment_text"];
    NSString     *commentAuthorName = [commentThread objectForKey:@"comment_author_name"];

    cell.textLabel.text = commentText;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"by %@", commentAuthorName];

    return cell;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:58:13.990

可能是您编写的表视图委托方法没有被调用。您应该做的第一件事是在这些方法中设置断点，运行您的应用程序，然后查看它们是否被调用。

如果他们没有被调用，您可能无法设置您的委托。在这种情况下，您似乎没有使用离散的 UITableViewController，而是试图让您的 DetailViewController 为 tableView 按预期工作提供必要的信息。

首先，您需要使您的 DetailViewController 符合 UITableViewDelegate 协议：

```
@interface DetailViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> 
```

其次，您需要实际设置 UITableView 的委托 @property。您可以在界面生成器中执行此操作（选择表格视图，右键单击，拖动它的委托属性以连接到您的 DetailViewController，它可能是也可能不是文件的所有者）。如果您希望在代码中执行此操作，您只需调用（例如，在 VC 生命的早期，在 viewDidLoad 中）：

```
self.tableView.delegate = self;
self.tableView.datasource = self; 
```

所以......假设您的委托都正确连接，然后您应该返回并测试这些断点以查看是否正在调用表视图的方法。如果它们被调用，下一步将是在调用断点时评估变量，例如检查 numberOfRowsInSection 中返回的数字和 cellForRowAtIndexPath 中的值是否符合您的预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:03:24.077

您需要将视图控制器声明为表视图的委托和数据源

更改`.h`文件中的这一行

`@interface DetailViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>`

然后在你的`viewDidLoad`

```
commentTable.dataSource = self;
commentTableView.delegate = self;
[commentTableView reloadData];
[self configureView]; 
```

您还可以查看故事板，并以与连接`commentTable`到您的相同的方式连接插座 n `UITableView`，但通过向相反方向拖动并选择数据源和委托

# bash - 指定关键字时解压失败

> ID：12945111
> 
> 赞同：0
> 
> 时间：2012-10-17T23:44:17.937
> 
> 标签：bash, unzip

我需要解压缩与名称中特定关键字匹配的文件。一个典型的文件如下所示：

```
JGS-Memphis~PSU~FVT~00000~JGM96911~1~P~1100~EPS10R0-15~CL10D1120A3271~0121017~141645.XML 
```

当我做

```
unzip -o SOMEFILE.zip '*~PSU~*' -d psutmp/ 
```

它可以`SOMEFILE.zip`毫无问题地解压缩上面的文件。但是当我这样做时

```
for i in `find . -name '*zip'`; do  unzip -o "$i" \'*PSU*\' -d psutmp/ ; done 
```

它失败并出现`filename not matched: '*PSU*'`错误。我尝试删除 PSU 周围的刻度线。同样的问题。

我还尝试了`-C`不区分大小写地匹配文件名的选项

```
for i in `find . -name '*XML*zip'`; do  unzip -o "$i" -C *PSU* -d psutmp/ ; done 
```

它失败了

```
error:  cannot create psutmp/JGS-Memphis~PSU~FVT~00000~JGM96911~1~P~1100~EPS10R0-15~CL10D1120A3271~0121017~141645.XML 
```

这是铺位。我是具有 150GB 存储空间的开发机器的 root 用户。容量为 12%。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:46:44.883

删除`\'*P5U*\'`. 您不需要转义单引号。

```
for i in `find . -name '*zip'`; do  unzip -o "$i" '*PSU*' -d psutmp/ ; done 
```

在 for 循环中使用反引号有点代码味道。我会尝试其中一种：

```
# Unzip can interpret wildcards itself instead of the shell
# if you put them in quotes.
unzip -o '*.zip' '*PSU*' -d psutmp/

# If all of the zip files are in one directory, no need for find.
for i in *.zip; do unzip -o "$i" '*PSU*' -d psutmp/; done

# "find -exec" is a nice alternative to "for i in `find`".
find . -name '*.zip' -exec unzip -o {} '*PSU*' -d psutmp/ \; 
```

就错误而言，确实`psutmp/`存在吗？是否设置了权限，以便您可以对其进行写入？

# r - 在向量中寻找峰值

> ID：12945113
> 
> 赞同：4
> 
> 时间：2012-10-17T23:44:37.487
> 
> 标签：r

我试图在向量中找到“峰值”，即两侧最近的相邻元素不具有相同值的元素具有**较低**的值。

所以，例如在向量中

```
c(0,1,1,2,3,3,3,2,3,4,5,6,5,7) 
```

在 5、6、7、12 和 14 位置有峰值

[找到局部最大值和最小值](https://stackoverflow.com/questions/6836409/finding-local-maxima-and-minima-in-r)很接近，但不太合适。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T23:52:43.667

这应该有效。调用`diff(sign(diff(x)) == -2`查找峰值的方法本质上是在`rle`.

```
x <- c(0,1,1,2,3,3,3,2,3,4,5,6,5,7)

r <- rle(x)
which(rep(x = diff(sign(diff(c(-Inf, r$values, -Inf)))) == -2, 
          times = r$lengths))
# [1]  5  6  7 12 14 
```

（我用 s 填充了您的向量，`-Inf`以便元素 1 和 14 都有可能被匹配，如果最近的不同值元素具有较低的值。您显然可以通过设置一个或两个来调整最终元素匹配规则这些到`Inf`.)

# mysql - CakePHP 和 MySQL - 将 find('all') 与 GROUP 用于一个字段，将 MAX 用于另一个字段

> ID：12945115
> 
> 赞同：0
> 
> 时间：2012-10-17T23:44:49.503
> 
> 标签：mysql, cakephp

我有一个包含 3 列（、、、`thread_id`）`message_id`的MySQL 表`message`。[根据此链接](http://www.techonthenet.com/sql/max.php)中“使用 GROUP BY 的示例”下的解决方案，我希望我的查询为 GROUP BY `thread_id`，但为每个返回最高`message_id`（而不是默认最低）的行`thread_id`。然后我想要一个带有行/项目的格式良好的数组，就像你在 CakePHP 中沿着`$array[index]['Model']['field']`. 使用以下 CakePHP 语法：

```
$this->Model->find('all', array(
   'fields' => array('MAX(Model.message_id) as message_id', 'Model.thread_id', 'Model.message'),
   'group => 'Model.thread_id'
)); 
```

现在，不幸的是我没有得到格式良好的数组。相反，我得到一个看起来像这样的数组：

Array ( [0] => Array ( [0] => Array ( [message_id] => Want/correct_message_id ) [Model] => Array ( [message] => 来自最低/不需要的 message_id 行的消息。[thread_id] =>来自最低/不需要的 message_id 行的密钥））

为什么没有`message_id`钩到`[Model]`数组的一部分，为什么 CakePHP 会获取最低`message_id`行并将`message`and`thread_id`放入`[Model]`没有列的数组部分`message_id`？

我希望数组部分中的所有 thre 列，`[Model]`并且我希望根据我的初始描述，该行是最高`message_id`的。`thread_id`希望这个问题有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:33:22.580

虚拟字段对于这种事情非常有用。

```
class MyModel extends AppModel {

    public $virtualFields = array(
        'max_message_id' => 'MAX(MyModel.message_id)'
    );

} 
```

您现在可以像使用表中的普通字段一样使用 max_message_id，因此您可以将其添加到您的查找操作中。

# curl - 为什么我不能使用 cURL 从 BOX 下载任何文件

> ID：12945117
> 
> 赞同：1
> 
> 时间：2012-10-17T23:45:01.713
> 
> 标签：curl, box-api

当我运行下面的命令时，它会返回有关文件的所有预期数据和信息。我是文件的所有者，可以直接从 Box 网站下载

`curl https://api.box.com/2.0/files/1790744170/ -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"`

但是这个命令（下），

`curl https://api.box.com/2.0/files/1790744170/data -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"`

不会返回任何内容，甚至不会返回 HTTP 错误代码，curl 所做的只是等待一秒钟然后返回提示。我试过`curl [etctera] > testfile`了，它弹出了小状态栏，最后所有的值都为零，例如：

```
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                Dload  Upload   Total   Spent    Left  Speed
   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:11:03.507

这是因为通过 Box API 下载的内容实际上是 302 到 dl.boxcloud.com 上的临时资源。`-L`您可以通过包含标志来强制 cURL 遵循重定向，即

```
curl -L https://api.box.com/2.0/files/FILE_ID/content  \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" 
```

（文档没有反映这一点，但现在已更新以显示标志）。

# mysql - MySQL函数从多个表中添加价格

> ID：12945119
> 
> 赞同：2
> 
> 时间：2012-10-17T23:45:09.267
> 
> 标签：mysql, sum

DB 有几张桌子，tblPizza，然后是用于浇头的桌子，tblCheese、tblMeat 和 tblVeggie。我想编写一个 MySQL 函数，它将采用 VARCHAR 参数，在每个表中查找 priceFactor，将它们加在一起，然后返回该小数。在谷歌搜索和搜索之后，我拼凑了这个。我在这里或在谷歌上找到的结果都没有试图做足够接近我想要做的答案。

```
DELIMITER $$

CREATE FUNCTION `dbname`.`calculatePrice` (cheese VARCHAR(50), meat VARCHAR(50), veg VARCHAR(50))
RETURNS DECIMAL
BEGIN
DECLARE price DECIMAL;
SET price = SUM(SELECT priceFactor AS cheesePrice UNION ALL SELECT priceFactor AS meatPrice FROM tblMeat WHERE meatName = meat UNION ALL SELECT priceFactor AS vegPrice FROM tblVeggie WHERE veggieName = veg) FROM tblCheese WHERE cheeseName = cheese);

RETURN price;
END 
```

MySQL 不喜欢 SUM 之后的 SELECT，但我不知道如何在没有子查询的情况下获得我想要的东西。每个表都有重复的列名，表之间没有相关性来证明 JOIN 的合理性。

结果将被踢回 PHP，PHP 会将其 JSON 发送到 jQuery。

谢谢！99% 的时间，我都能在这里找到我需要的东西^_^

编辑指出，参数中的一个（但只有一个）可能为空。用户只需要选择两个披萨配料，但不能选择少于这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:51:35.990

尝试这个，

```
SET price = 
(
    SELECT  SUM(x.Price) 
    FROM
    (
        SELECT priceFactor AS Price FROM tblCheese WHERE cheeseName = cheese
        UNION ALL 
        SELECT priceFactor AS Price FROM tblMeat WHERE meatName = meat 
        UNION ALL 
        SELECT priceFactor AS Price FROM tblVeggie WHERE veggieName = veg
    ) x
); 
```

# c# - 带有日期的sql简单查询

> ID：12945120
> 
> 赞同：1
> 
> 时间：2012-10-17T23:45:09.870
> 
> 标签：c#, asp.net, sql-server-2008, c#-4.0, asp.net-4.0

我有一个时钟应用程序，可以记录员工的出勤情况，

我试图根据查询将“Enter” `imageButton` （入口例如“Timein”字段）的可见性设置为隐藏

因此，如果`timeout`最后一条记录中没有`TimeIn`当前记录，`UserId`则该`Enter`按钮将被隐藏

这是表：（`tId`是PK IDENTITY）

![在此处输入图像描述](../Images/8eecaea696e51259582309189b2c4719.png)

因此，例如基于这些记录，最后一个（前 1 个）未注销，因此用户将看不到`Enter button`允许用户登录的 ，因为没有最后一个操作`TimeOut`

从`asp.net` `C#`后面的代码工作我试图使用`datedIff`作为查询的解决方案：

但我想我在这里遗漏了一些东西

如果这是我只想展示的错误方法，请不要考虑..我确实尝试过，但如果有更好的方法来实现我需要的，那么就忽略那个查询

```
select isnull((SELECT TOP 1 case when [TimeOut] is null then '' else convert(nvarchar,[TimeOut]) end FROM tblTime WHERE datediff(day,TimeOut,getdate())=0 and UserId =3571 ORDER BY tId DESC),'') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:20:58.050

这会找到 userId 的 tid 最高的记录。

```
SELECT CASE WHEN [TimeOut] IS NULL THEN '' ELSE CONVERT(NVARCHAR,[TimeOut]) END
  FROM tblTime
  WHERE tId = ( SELECT MAX(tId)
                  FROM tblTime
                  WHERE UserId = 3571
               ) 
```

但 ids 不是获取最新记录的好选择。可能你想要更多这些方面的东西，但这取决于列的含义以及是否可能存在重复......：

```
SELECT CASE WHEN [TimeOut] IS NULL THEN '' ELSE CONVERT(NVARCHAR,[TimeOut]) end
  FROM tblTime
  WHERE UserId = 3571
    AND ActiveDate = ( SELECT MAX(ActiveDate)
                         FROM tblTime
                         WHERE UserId = 3571
                     ) 
```

或者您可以将子查询作为 FROM 子句的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:23:49.650

如果您想明确地对此进行查询（假设 ActiveDate 的含义是用户上​​次在站点上活动的时间）：

```
SELECT TOP 1 
    CASE WHEN TimeOut IS NULL THEN 0 ELSE 1 END 
FROM tblTime 
WHERE UserID = 3571
ORDER BY ActiveDate DESC 
```

否则，如果您将整个对象加载到代码中，只需检查最新记录的 TimeOut 是否为空。

我建议尽管有某种 UserActivity 表，它可以跟踪用户登录和退出的日期和时间。通过查看空值来跟踪用户活动并不是最可靠的。

```
CREATE TABLE UserActivity
(
    UserActivityID int,
    UserActivityTypeID tinyint,
    DateActivity datetime
) 
```

作为`UserActivityType`另一张桌子`Sign In`，`Sign Out`您可能想要跟踪 和 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T00:24:59.700

格伦，你打败了我！以下将获取最近 TimeIn 的记录（假设没有重复项），并将为您提供一个 Y/N 标志来确定是否显示 Enter 按钮。

```
SELECT (CASE WHEN t1.[TimeOut] IS NOT NULL THEN 'Y' ELSE 'N' END) AS is_enter_button_displayed
  FROM tblTime t1
 WHERE t1.[TimeIn] = (SELECT MAX(t2.[TimeIn]) FROM tblTime t2 WHERE t2.UserId = t1.UserId)
   AND UserId = 3571; 
```

# c#-4.0 - 如何通过 WMI 和 C# 查询远程计算机中的文件夹大小

> ID：12945121
> 
> 赞同：2
> 
> 时间：2012-10-17T23:45:10.323
> 
> 标签：c#-4.0, wmi, wmi-query

如何通过 WMI 和 C# 查询远程计算机中的文件夹大小。我需要通过 WMI 在远程系统的 C:\Users 中找到每个用户的文件夹大小。

我尝试了 Win32_Directory ， CMI_DataFile 但无法找到所需的答案。请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:50:47.417

要使用 WMI 获取文件夹的大小，您必须使用类遍历文件[`CIM_DataFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387236%28v=vs.85%29.aspx)，然后从`FileSize`属性中获取每个文件的大小。

试试这个示例（这个代码不是递归的，我把这个任务留给你）。

```
using System; 
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {
// Directory is a type of file that logically groups data files 'contained' in it, 
// and provides path information for the grouped files.

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();

                string Drive= "c:";
                //look how the \ char is escaped. 
                string Path="\\\\FolderName\\\\";
                UInt64 FolderSize = 0;

                ObjectQuery Query = new ObjectQuery(string.Format("SELECT * FROM CIM_DataFile Where Drive='{0}' AND Path='{1}' ", Drive, Path));
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0}", (string)WmiObject["FileName"]);// String
                    FolderSize +=(UInt64)WmiObject["FileSize"];
                }

                Console.WriteLine("{0,-35} {1,-40}", "Folder Size", FolderSize.ToString("N"));

            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }

} 
```

# php - 如何解析来自 wolfram alpha 的返回数据

> ID：12945127
> 
> 赞同：-1
> 
> 时间：2012-10-17T23:45:58.087
> 
> 标签：php, xml, wolframalpha

> **可能重复：**
> [使用 simpleXML 从 XML 文件中提取 HTML](https://stackoverflow.com/questions/4750798/extracting-html-from-an-xml-file-using-simplexml)

我正在尝试将 Wolfram Alpha API 应用到我的项目中，但我真的陷入了这个问题。

从他们的服务器返回的数据是 xml，但我不知道如何在我的浏览器中显示数据。

我想使用 php`<img>`在标签下显示标签和标签，`<subpod>`但不知道该怎么做。

谁能帮我解决这个问题？非常感谢！

```
<?xml version='1.0' encoding='UTF-8'?>
<queryresult success='true'
    error='false'
    numpods='4'
    datatypes='Word'
    timedout='Data,Character'
    timedoutpods=''
    timing='1.566'
    parsetiming='0.116'
    parsetimedout='false'
    recalculate='http://www4b.wolframalpha.com/api/v2/recalc.jsp?id=MSPa17571a3db4591h53ha1200000d7e8c604egche19&amp;s=10'
    id='MSPa17581a3db4591h53ha1200005hcfi072h5329b57'
    host='http://www4b.wolframalpha.com'
    server='10'
    related='http://www4b.wolframalpha.com/api/v2/relatedQueries.jsp?id=MSPa17591a3db4591h53ha12000065e4habf2bag446e&amp;s=10'
    version='2.6'>
 <pod title='Input interpretation'
     scanner='Identity'
     id='Input'
     position='100'
     error='false'
     numsubpods='1'>
  <markup><![CDATA[<div id="pod_0100" class="pod "><hr class="top" /><h2>
      Input interpretation<span class="colon">:</span></h2><ul class="h"></ul><div id="subpod_0100_1" class="sub "><div class="output pnt" id="scannerresult_0100_1"><img height="18"width="163" src="http://www4b.wolframalpha.com/Calculate/MSP/MSP17631a3db4591h53ha1200001i123763cde8fada?MSPStoreType=image/gif&s=10&amp;w=163&amp;h=18" id="i_0100_1" alt="common  (English word)" title="common  (English word)"  data-attribution="" /></div><div class="annotpod">
    </div></div>
<hr class="bot" /></div>]]></markup>
  <subpod title=''>
   <img src='http://www4b.wolframalpha.com/Calculate/MSP/MSP17641a3db4591h53ha1200004eg12d5dbfca04h8?MSPStoreType=image/gif&amp;s=10'
       alt='common  (English word)'
       title='common  (English word)'
       width='163'
       height='18' />
  </subpod>
 </pod>

......more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:54:29.080

这很容易

```
$xml = new SimpleXMLElement($xml);
var_dump($xml->pod->subpod->img); 
```

# jquery - 得到 来自嵌入式 YouTube html5 播放器的元素

> ID：12945136
> 
> 赞同：1
> 
> 时间：2012-10-17T23:46:58.340
> 
> 标签：jquery, html, canvas, youtube

我想使用 html5 画布扭曲 Youtube 视频。我知道它是如何处理普通视频的，为此我需要从 Youtube 嵌入式播放器中借用这些元素。YT video 使用自己的 api 嵌入视频。据我所知，在玩家开始之前不存在。这就是我尝试使用 jQuery 获取它的方式：

```
function onPlayerStateChange(event) { 
  if (event.data == YT.PlayerState.PLAYING) { 
     var video = $('#player').contents().find('video')[0]; // '#player' is <iframe> 
     // ... anything else doesn't matter yet
  }
} 
```

但是我只在控制台中收到一条消息，`Unsafe JavaScript attempt to access frame with URL http://www.youtube.com/embed/u1zgFlCw8Aw?[... player vars] from frame with URL [domain_adress]. Domains, protocols and ports must match.` 我知道它正在发生，因为不允许跨域请求。也许，有什么解决方法可以做到这一点吗？我还没有更多的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:52:27.113

iFrames 不允许跨域访问，因此出现错误。除了通过您自己的服务器代理视频之外，这不是跨域 iframe 的解决方法。

# c# - 运算符重载和优先级

> ID：12945142
> 
> 赞同：16
> 
> 时间：2012-10-17T23:47:57.617
> 
> 标签：c#, operator-overloading

在 C# 中，您可以重载运算符，例如`+`and `*`。在他们的数学解释中，这些运算符具有明确定义的优先顺序。

重载时是否保持此顺序，是否以某种确定性方式更改，或者您也可以重载优先顺序？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T23:51:35.863

如果你重载一个操作符，它总是优先于默认实现。但是，您不能更改运算符本身的优先级，因此它将保留为默认值。有关[MSDN](http://msdn.microsoft.com/en-us/library/aa691324%28v=vs.71%29.aspx)的更多信息。

相关报价：

> 用户定义的运算符实现总是优先于预定义的运算符实现：只有当不存在适用的用户定义的运算符实现时，才会考虑预定义的运算符实现。

和

> 用户定义的运算符声明不能修改运算符的语法、优先级或关联性。例如， / 运算符始终是二元运算符，始终具有[第 7.2.1 节](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)中指定的优先级，并且始终是左结合的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T23:57:13.740

**重载不会改变优先级。**

运算符优先级由编译器设置，并且不能更改，至少在没有自定义编译器的情况下不能更改。

# grails - Spring-Security-UI：使用域模型约束进行验证

> ID：12945152
> 
> 赞同：0
> 
> 时间：2012-10-17T23:48:58.100
> 
> 标签：grails, user-interface, spring-security

我想使用我的用户域模型的约束，而不是 RegisterCommand 提供的约束。是否可以以使用它们的方式对其进行修改？我已经有用于注册的自定义视图和控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:56:02.440

如果您有自定义控制器，您可以创建自己的命令对象进行验证，并在其块中使用 Grails 2.0 [importFrom功能。](http://grails.org/doc/latest/guide/validation.html#sharingConstraints)`constraints`如果它必须是 的实例`RegisterCommand`，只需创建一个子类并用 覆盖`constraints`子类中的`importFrom`。

# php - 访问 SimpleXMLElement 对象的属性

> ID：12945157
> 
> 赞同：0
> 
> 时间：2012-10-17T23:49:29.160
> 
> 标签：php, xml, arrays, xpath, simplexml

我有以下代码：

```
 $doc=new DOMDocument(); 
     $doc->loadHTML($content); 
     $xml=simplexml_import_dom($doc); // just to make xpath more simple 
     //$images=$xml->xpath('(//img[@class = "thumbimage"])[1]');

     for($x=1;$x<=5;$x++)
     {
                      $images[] = $xml->xpath('(//img[@class = "thumbimage"])['.$x.']'); 

     } 
```

我转储 $images 我得到了这种类型的数组，请参阅底部的屏幕截图

```
 [array](unknown name)
   - [array]0
     -[SimpleXMLElement Object] 0
      -Properties
        -[array]@attributes
              [string]src = "thestring"
      -Methods
        __construct
        __addAttribute etc 
```

我想从每个 $images[] 数组中获取“字符串”

请看附图：

![在此处输入图像描述](../Images/e5825665f3736be37e1b62e842d7c0f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:35:12.017

```
 for($x=0;$x<=5;$x++)
               {
                $k = $x + 1;
                $images[] = $xml->xpath('(//img[@class = "thumbimage"])['.$k.']'); 
                $url[] = (string)$images[$x][0]['src'];
               } 
```

这就是我想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:17:44.107

您可以将属性作为数组元素访问：

```
$images[$i]['src'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:07:57.057

我认为您只需要正确的 XPath，如果您发布您正在处理的 XML，这将更容易提供（我只能从您提供的图像中推断出一些东西）。无论如何，您正在使用 img[@class = '...'] 所以我假设我们正在处理的那个元素名称被称为`img`

在这种情况下，您需要的 xpath 是

```
"//img@src" 
```

使用 @ 选择所有 img 元素的属性。[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

# sql-server-2008-r2 - 在 SQL Server 2008 R2 的非聚集索引中，索引是指向单行还是一组行？

> ID：12945160
> 
> 赞同：0
> 
> 时间：2012-10-17T23:49:34.747
> 
> 标签：sql-server-2008-r2, non-clustered-index

**我试图了解非聚集索引如何在表中查找数据。**我认为，**非聚集**索引在对索引列值进行查找时只是指向一个数据页或一组数据行，而不是指向单个行。也就是说，在使用非聚集索引时，我们仍然需要扫描一个数据页来获取我们正在查找的具体数据行。这是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:45:15.910

如果在 HEAP（没有聚集索引的表）上定义了非聚集索引，则每个索引条目都包含行地址：(FileId:PageNumber:SlotNumber) 所以在这种情况下不需要搜索。

如果在具有聚集索引的表上定义了非聚集索引，则非聚集索引中的每一行都包含聚集索引键。要到达行，SQL Server 必须在聚集索引上执行查找以找到包含页，然后扫描该页中的行。

# java - 将对象写入二进制文件时出错

> ID：12945162
> 
> 赞同：1
> 
> 时间：2012-10-17T23:49:41.063
> 
> 标签：java, serialization, filenotfoundexception

所以，这是我拥有的代码：

```
try  
{  
  PlayerSave save = new PlayerSave(this);   
  save.playerLooks = look;        
  File test = new File("C:/cache/" + playerName + ".tmp");  
  test.createNewFile();  
  FileOutputStream f_out = new  
      FileOutputStream("C:/cache/" + playerName + ".tmp");  
  ObjectOutputStream obj_out = new ObjectOutputStream (f_out);  
  obj_out.writeObject (save);  
  obj_out.close();  
  f_out.close();  
}  
catch (Exception e)  
{  
  e.printStackTrace();  
} 
```

执行后，我收到以下错误：

```
java.io.FileNotFoundException: C:\cache\Bobdole.tmp (The system cannot find the path specified) 
```

我也尝试过使用这段代码：

```
 try
    {
      PlayerSave save = new PlayerSave(this); 
      save.playerLooks = look;      
//      File test = new File("C:/cache/" + playerName + ".tmp");
//      test.createNewFile();
      FileOutputStream f_out = new
          FileOutputStream("C:/cache/" + playerName + ".tmp");
      ObjectOutputStream obj_out = new ObjectOutputStream (f_out);
      obj_out.writeObject (save);
      obj_out.close();
      f_out.close();
    }
    catch (Exception e)
    {
      e.printStackTrace();
    } 
```

但是，它会产生相同的错误。我很困惑为什么这不起作用，因为一切似乎都是正确的。如果你们能找出问题，那将非常有帮助。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:52:22.717

这告诉您该目录`C:\cache`不存在。该目录必须存在，您才能将文件写入其中。您可以手动创建它，也可以使用以下方法：

```
File directory = new File("C:\\cache");
directory.mkdir(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:52:15.900

程序找不到您的文件夹。

# c - 在我的 C 程序中使用 gdb 需要帮助

> ID：12945163
> 
> 赞同：4
> 
> 时间：2012-10-17T23:49:59.687
> 
> 标签：c, assembly

我正在学习汇编语言。我正在使用 gdb 来了解如何从编写的 C 代码中获取信息。我试图在每一行的开头查看 rip 寄存器，看看这个程序的每个 C 语句中有多少字节的机器代码？谁能告诉我gdb中的命令来找到这些？

```
#include <stdio.h>

int main(void) {
    register int wye;
    int *ptr;
    int ex;

    ptr = &ex;
    ex = 305441741;
    wye = -1;
    printf("Enter an integer: ");
    scanf("%i", ptr);
    wye += *ptr;
    printf("The result is %i\n", wye);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:13:27.557

您可以做一些事情来查看有关您的程序的一些事情的简短示例。 `$`是 shell 提示符并且`gdb>`是 gdb 提示符，所以不要输入这些：

```
$ gdb myprogram
    ... info about gdb and myprogram
gdb> disas main
    ... disassembly of the main function
gdb> break main
    ... sets a breakpoint in main; you see a message about this probably calling it breakpoint 1
gdb> run
    ... program starts and stops immediately at the start of main
gdb> i r
    ... lots of info about register contents
gdb> p $rip
    ... current instruction pointer (assuming x86_64)
gdb> s
    ... program runs for one source line.
gdb> p $rip
    ... ip has advanced a bit. 
```

# atl - 在 IDispatchEx::GetDispID() 中为进程外 IDispatch 指针获取 RPC_E_SYS_CALL_FAILED

> ID：12945167
> 
> 赞同：1
> 
> 时间：2012-10-17T23:50:52.187
> 
> 标签：atl

我遇到了一个问题，我很确定这个论坛能够帮助我解决这个问题。

我正在尝试向脚本添加一些自动化对象（通过单独的进程（ATL EXE 服务器）托管）。此外，我试图从我的 ATL EXE 脚本引擎中的这些自动化对象中接收事件。

为了实现这一点，我正在使用 CDispExSinkConnector，如[http://www.codeproject.com/Articles/3326/Extending-the-Internet-Explorer-Scripting-Engine](http://www.codeproject.com/Articles/3326/Extending-the-Internet-Explorer-Scripting-Engine) 中所述，我正在使用 IDispatchEx::GetDispID() 来创建脚本引擎中的新成员。创建成员 DISPID 后，我将使用 InvokeEx() 设置属性值。但是这些方法调用返回 RPC_E_SYS_CALL_FAILED。

注意 - 这里我从 OUT-OF-PROC IDispatch 指针中获取 IDispEx 指针。

更详细的描述：我在 ATL EXE 服务器中确实有一个由 CAxWindow 托管的 BrowserCtrl，我用它来为我的 MFC 客户端应用程序创建 HTML 插件。ATL EXE 服务器为 IWebBrowser2 方法提供包装器方法，以便我可以调用 IWebBrowser2Ptr->Navigate2() 之类的方法。

我还可以在此 ATL EXE 服务器中订阅 IWebBrowser2 事件，例如 OnDocumentComplete(....)，并最终将这些事件转发到我的 MFC 客户端应用程序以在那里处理这些事件。下面是我的 ATL EXE 服务器 (BrowserCtrl) 的一些代码片段：

第一个是 CreateControl()，它创建 CAxWindow，创建 WebBrowser 控件并将控件托管在内部默认 CAxHostWindow 上。

```
STDMETHODIMP BrowserCtrl::CreateControl(ULONG hwndParent, LONG left,LONG top, LONG right, LONG bottom)
{
  CRect rc(left, top, right, bottom);

  // Create the AX host window. m_wndBrowserCtrl is CAxWindow object
HWND hwndAxHost = m_wndBrowserCtrl.Create(reinterpret_cast<HWND>(hwndParent), &rc, L"Shell.Explorer", WS_CHILD | WS_VISIBLE | WS_CLIPCHILDREN | WS_CLIPSIBLINGS,  0, ID_BROWSERCTRL );

  //Obtain a pointer to the container object
  CComQIPtr<IAxWinHostWindow> ptrWinHost;
  HRESULT hr = m_wndBrowserCtrl.QueryHost(&ptrWinHost);

  LPOLESTR lpszCLSID = NULL;
  hr = StringFromCLSID(CLSID_WebBrowser, &lpszCLSID);

  // Create the WebBrowser Ctrl
  CComPtr<IUnknown> cpIUnknown = NULL;
hr = ptrWinHost->CreateControlEx(lpszCLSID, m_wndBrowserCtrl, NULL, &cpIUnknown, __uuidof(SHDocVw::DWebBrowserEvents2), reinterpret_cast<IUnknown*>(reinterpret_cast<DWebBrowserEvents2Impl*>(this)));

// Get the IWebBrowser2 interface pointer for the control
// CComQIPtr<IWebBrowser2> m_cpIBrowser;
  m_cpIBrowser = cpIUnknown;
  return S_OK;
} 
```

//现在是 IWebBrowser2 方法的包装器方法

```
STDMETHODIMP BrowserCtrl::Navigate2(VARIANT *pwszUrl, VARIANT *Flags, VARIANT *TargetFrameName, VARIANT *PostData, VARIANT *Headers)
{
  HRESULT hr = m_cpIBrowser->Navigate2(pwszUrl, Flags,TargetFrameName,PostData,Headers);
} 
```

//现在是 IWebBrowser2 事件的事件处理程序：

```
void __stdcall BrowserCtrl::OnDocumentComplete(IDispatch* pDisp, VARIANT* pvaURL)
{
Fire_OnDocumentComplete(pDisp , pvaURL);// forwarding to the MGC client APP

} 
```

现在的问题：

1.在 MFC 客户端应用程序和事件处理函数 OnDocumentComplete() 中，我执行以下操作：

```
 void MFCClientApp::HandleDocumentComplete(LPDISPATCH pIDisp, VARIANT* pvaURL)
    {
      CComPtr<IDispatch> pDispDoc;
      CComQIPtr<IDispatch> pScriptDisp;
      CComQIPtr<IDispatchEx> pDispEx;
      CComQIPtr<IHTMLDocument> pHTMLDoc;
      CComQIPtr<IWebBrowser2> pWebBrowser;

    if (pIDisp != NULL)
          {
            pWebBrowser = pIDisp;
            //CComPtr<IDispatch> ptrIDisp;
            //BOOL bResult = GetOPBrowser()->GetDisp(&ptrIDisp);
            //pWebBrowser = ptrIDisp;
            pWebBrowser->get_Document(&pDispDoc);

            if (pDispDoc != NULL)
            {
              // Get the IDispatchEx interface
              pHTMLDoc = pDispDoc;
              if (pHTMLDoc != NULL)
              {
                pHTMLDoc->get_Script(&pScriptDisp);
                pDispEx = pScriptDisp;

                if (pDispEx != NULL)
                {
                         CDispExSinkConnector pDispExSinkConnector = new CDispExSinkConnector();
    Hr = pDispExSinkConnector->SetDispEx(pDispEx); // here the Hr returned is 0x80010100  “System Call Failed” i.e. RPC_E_SYS_CALL_FAILED
    ……
    ……..
    ………
    } 
```

这是 SetDispEx() 和内部相关函数：

```
void CDispExSinkConnector::SetDispEx(IDispatchEx *pDispEx)
{
       CComBSTR bstrThisGuid("AC0B188C-6B55-408f-9E8C-821B9B5467CB"); // @!I8NIGNORE

       HRESULT hr = m_pDispExGIT.Attach(pDispEx);//add it to the GIT Table
       ASSERT(pDispEx);
       // We need to add ourselves to the script engine
       AddNamedObject(bstrThisGuid, this);
}
HRESULT CDispExSinkConnector::AddNamedObject(BSTR bsName, IDispatch *pDisp)
{
       HRESULT hr = 0;

       CComPtr<IDispatchEx> pDispEx;
       GetDispEx(&pDispEx); 

       if(pDispEx == NULL)
              return E_FAIL;

       if(!bsName || SysStringLen(bsName) == 0 || !pDisp)
              return E_INVALIDARG;

       // Also, add our root objects into the script namespace
       DISPID dispIdThis = 0;     
hr = pDispEx->GetDispID(bsName, fdexNameEnsure | fdexNameCaseSensitive,&dispIdThis);     // here the Hr returned is 0x80010100  “System Call Failed” i.e. RPC_E_SYS_CALL_FAILED

       if (hr == DISP_E_UNKNOWNNAME)
…
..
} 
```

请帮助我找出根本原因和解决此问题的解决方案。您的快速帮助将不胜感激。谢谢， SP

# c++ - 如何在不访问 int 到字符串函数的情况下将 int 转换为字符串（在 C++ 中）

> ID：12945168
> 
> 赞同：4
> 
> 时间：2012-10-17T23:51:03.890
> 
> 标签：c++

所以我在实习技能测试中被问到这个问题，当时这完全让我感到困惑。我现在有一些我认为应该可以工作的代码，但没有为字符串分配正确的值。

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
     // declarations
     int i = 0, num= 63;
     string b="";

     while (num != 0)
     {
          i = num % 10;
          b.insert(0,i + 48 + "");
          num = num/10;
     }

     cout << b << endl;

     return 0;
} 
```

以“num”为整数值（我只是以 63 为例）

编辑:: 我的解释不正确，我不能使用任何为我进行 int 到字符串转换的函数，而不是我不能使用字符串库，我的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T23:53:37.953

将插入行更改为

```
b.insert(0, 1, '0' + i); 
```

这将在字符串的索引 0 处[插入](http://en.cppreference.com/w/cpp/string/basic_string/insert)通过添加一次获得`i`的字符。`'0'`

* * *

解释为什么您的代码不起作用：

```
b.insert(0,i + 48 + ""); 
```

上面的行正在调用

```
basic_string::insert( size_type index, const CharT* s ); 
```

`48 + i`通过添加到字符串文字的地址来确定指针的位置`""`，从而导致垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:01:00.103

我建议递归函数：

```
std::string f( int val )
{
   if ( val >= 10 )
      return f( val / 10 ) + ( char )( val % 10 + '0' ) ;
   else
      return std::string( 1, '0' + val ) ;
} 
```

用法：

```
std::cout << f( 63 ) << std::endl ; 
```

请注意，此函数应附加到您的字符串，而不是使用非常昂贵的移位（并放在字符串的前面。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:01:23.097

值得注意的是，代码还有其他错误。例如，转换不适用于`num == 0`. 这是一个更好的版本：

```
#include <iostream>
#include <algorithm>
#include <string>
#include <cstdlib>

int main(int ac, char* av[])
{
    int num(ac == 1? 0: std::atoi(av[1]));
    std::string b;

    do
    {
        b.push_back((num % 10) + '0');
        num /= 10;
    }
    while (num != 0);
    std::reverse(b.begin(), b.end());
    std::cout << b << '\n';
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T00:14:01.360

非常简单的解决方案：使用字符串流。在这种情况下，输出字符串流：

```
#include <iostream>
#include <string>
#include <sstream>

std::string IntToString(int value) {
    std::ostringstream ss;
    ss << value;
    return ss.str();
}

const char* IntToCString(int value) {
    std::ostringstream ss;
    ss << value;
    return ss.str().c_str();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T00:30:59.883

这是一些不使用任何库且不执行分配的代码。相反，用户应该提供一个足够大的缓冲区，然后她会收到一个指向结果字符串开头的指针作为回报：

```
char * format(unsigned int n, char * buf, std::size_t len)
{
    if (len == 0) return NULL;

    char * p = buf + len;

    *--buf = 0;

    while (n && p > buf)
    {
        *--buf = '0' + (n % 10);
        n /= 10;
    }

    return n == 0 ? p : NULL;
} 
```

嵌入式的人可能会喜欢这个，特别是因为这个函数不会做任何你无法控制的事情。

用法：

```
char buf[100];
char * s = format(12345, buf, sizeof buf);
if (s) { printf("Formatted: %s\n", s); } 
```

# php - 为 XML 清理 mysql 数据

> ID：12945172
> 
> 赞同：0
> 
> 时间：2012-10-17T23:51:24.880
> 
> 标签：php, mysql, xml, loops

我正在尝试遍历我的 MySQL 数据并为我的 XML 清理它，但我正在尝试以最有效的方式进行操作。以下是我到目前为止的代码。如果可能的话，如果相同的循环，这段代码只清理一个`CompanyName`我想清理所有 8 个字段的字段。

```
header("Content-type: text/xml");
$SQL_query = "SELECT * FROM COMPANYINFO ORDER BY CompanyName DESC"; 
$resultID = mysql_query($SQL_query, $linkID) or die("Data not found."); 

$xml_output = "<?xml version=\"1.0\"?>\n"; 
$xml_output .= "<markers>\n"; w

for($x = 0 ; $x < mysql_num_rows($resultID) ; $x++){ 
    $row = mysql_fetch_assoc($resultID); 

            // Escaping illegal characters 
        $row['CompanyName'] = str_replace("&", "&", $row['CompanyName']); 
        $row['CompanyName'] = str_replace("<", "<", $row['CompanyName']); 
        $row['CompanyName'] = str_replace(">", "&gt;", $row['CompanyName']); 
        $row['CompanyName'] = str_replace("\"", "&quot;", $row['CompanyName']); 

    $xml_output .= "\t\t<marker name='.$row['CompanyName']."' address='".$row['Address_1']."' phone='".$row['Phone']."' lat='".$row['Lat_Info']."' lng='".$row['Long_Info']."' county='".$row['County']."'/>\n";
} 

$xml_output .= "</markers>"; 

echo $xml_output; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T23:55:02.837

运行您需要放入 XML 的任何字符串，[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)您应该没问题。

至于处理结果，您可以使用`foreach`循环遍历数组。

放在一起，你得到：

```
foreach($row as $column) {
    $row[$column] = htmlspecialchars($column);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:56:32.493

检查[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:57:51.883

怎么样：

```
$row = mysql_fetch_assoc($resultID); 
$row = array_map('htmlentities', $row);
$xml_output .= "\t\t<marker name='.$row['CompanyName']."' address='".$row['Address_1']."' phone='".$row['Phone']."' lat='".$row['Lat_Info']."' lng='".$row['Long_Info']."' county='".$row['County']."'/>\n"; 
```

# c# - 转换获取字符的 unicode(?) 值？

> ID：12945182
> 
> 赞同：6
> 
> 时间：2012-10-17T23:52:24.183
> 
> 标签：c#, unicode, converter

我需要将 char 转换为 int 并返回。

这是我用来将 char 转换为 int 的方法：

```
(char)65 // Returns 'a' 
```

这是我试图用来将其转换回来的内容：

```
(int)'a' // Returns 97 
```

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T23:53:20.810

尝试这个，

```
char x = 'a';
int y = (int)x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:58:07.330

65 是大写字母“A”的字符代码。97 是小写的“a”。

# javascript - HTML 中的 Javascript 编码

> ID：12945184
> 
> 赞同：0
> 
> 时间：2012-10-17T23:52:38.503
> 
> 标签：javascript, html, registration, email-validation

对于我的任务，我正在写一份注册表。我的问题是我将如何连接第一个语句和下面的函数，以便当有人在文本框中输入他们的电子邮件时，它会检查电子邮件是否有效？(document.getElementById('user').value)

```
<input id="user" type="text" onblur="isUserNameValid();"></input><br/>

function isEmailValid(email) {
"use strict";
        var e = email.split("@"), local = /[^\w.!#$%&*+-\/=?^_{|}~]/, domain = /[\w.-]/;
if (e.length !== 2) {
    return false;
}
if (local.test(e[0])) {
    return false;
}
if (e[0].length > 253) {
    return false;
}
if ((e[0][0] === ".") || (/\.\./.test(e[0]))) {
    return false;
}
if (domain.test(e[1])) {
    return false;
}
if (e[1].length > 253) {
    return false;
}
if (e[1][0] === "." || /\.\./.test(e[1]) || e[1][e[1].length - 1] === ".") {
    return false;
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:00:48.490

当您确认可以使用 HTML5 时，只需将您的输入更改为以下内容，浏览器将在提交表单时为您验证电子邮件。

```
<input id="user" name="user" type="email" /><br/> 
```

注意您可以使用自闭合标签进行输入。您还应该分配 as 的`name`属性，`input`即在将数据提交到服务器时用作数据的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:06:30.580

```
 <input type="text" id="email" name="email"  onblur="javascript:return validate();"/>

<script>
    function validate() {

        var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        var address = document.getElementById("email").value;
        if (reg.test(address) == false) {

            alert('Invalid Email Address');
            return false;
        } else {
            alert('valid Email Address');
            return false;
        }
    }

</script> 
```

# database - 为动态附属链接设计数据库

> ID：12945185
> 
> 赞同：0
> 
> 时间：2012-10-17T23:52:42.900
> 
> 标签：database, database-design

我正处于建立一个依赖附属链接的网站的规划阶段。我很难想出一个好的设计，因为附属链接会根据不同的标准而变化：

*   产品编号
*   会员编号
*   用户位置
*   用户设备

例如：

链接[http://site.com/affiliate/11111/id/10000](http://site.com/affiliate/11111/id/10000)适用于以下标准：

*   产品 10 的链接被点击
*   用户的国家是美国、英国、加拿大或澳大利亚
*   他们使用的是 Android 设备

对于[http://site.com/affiliate/11111/id/10001](http://site.com/affiliate/11111/id/10001)

*   产品 10 的链接被点击
*   用户的国家是美国、英国、加拿大或澳大利亚
*   使用 iOS 设备

对于[http://site.com/affiliate/11111/id/10002](http://site.com/affiliate/11111/id/10002)

*   产品 10 的链接被点击
*   用户的国家是 DE
*   使用安卓设备

基本上，如果这些因素中的任何一个发生变化，它可能会有一个特定的链接。这是不一致的。

我可能会使用 mod_rewrite 来帮助关注查询，例如：

[http://mysite.com/outgoing/product-name/11111/android/us](http://mysite.com/outgoing/product-name/11111/android/us)

这将用于生成查询，但我不知道我想为数据库设计做什么，因此它很灵活，并且无需手动插入与每个可能组合匹配的链接。

我最初想的是这样的一个表：

*   link_id - Auto_incremented PK
*   附属ID
*   国家代码
*   product_id
*   附属链接

但是要为一个 product_id 做上面的第一个示例：

```
| link_id | affiliate_id | country_code |   device     | product_id |            affiliate_link                 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    1    |    11111     |      US      |   android    |     10     |  http://site.com/affiliate/11111/id/10000 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    2    |    11111     |      UK      |   android    |     10     |  http://site.com/affiliate/11111/id/10000 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    3    |    11111     |      CA      |   android    |     10     |  http://site.com/affiliate/11111/id/10000 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    4    |    11111     |      AU      |   android    |     10     |  http://site.com/affiliate/11111/id/10000 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    5    |    11111     |      US      |     iOS      |     10     |  http://site.com/affiliate/11111/id/10001 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    6    |    11111     |      UK      |     iOS      |     10     |  http://site.com/affiliate/11111/id/10001 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    7    |    11111     |      CA      |     iOS      |     10     |  http://site.com/affiliate/11111/id/10001 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    8    |    11111     |      AU      |     iOS      |     10     |  http://site.com/affiliate/11111/id/10001 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    9    |    11111     |      DE      |   android    |     10     |  http://site.com/affiliate/11111/id/10002 |
+---------+--------------+--------------+--------------+--------------------------------------------------------+
|    10   |    11111     |      DE      |     iOS      |     10     |  http://site.com/affiliate/11111/id/10003 | 
```

明白我为什么犹豫要这样做吗？

它看起来如此低效和复杂。必须有更好的方法来做到这一点，但我现在想不出。

为了使它更复杂，有时我会得到一个“任何国家”的链接，但不包括那些已经有链接的国家。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:22:52.590

您需要两张不同的表：一张表存储有关每个附属公司的原子数据（id、产品代码、链接），一张用于非原子数据，即国家代码；该表只需要两列，它们共同创建唯一的主键 - 会员 ID + 国家代码。该解决方案将防止不必要的数据重复。

# c++ - 让 system() 产生的子进程在父进程获得终止信号并退出后继续运行

> ID：12945189
> 
> 赞同：2
> 
> 时间：2012-10-17T23:52:58.380
> 
> 标签：c++, c, linux, node.js, process

在 Linux/C++ 库中，我通过 system() 调用启动了一个进程，

```
system("nohup processName > /dev/null&"); 
```

这似乎适用于一个自行退出的简单测试应用程序，但如果我从获取终止信号的 Nodejs/V8 扩展内部使用它，则子进程将被终止。我确实发现正在运行，

```
system("sudo nohup processName > /dev/null&"); 
```

将 sudoers 文件设置为不需要密码，即使在父进程（节点）退出时也可以运行。有没有办法完全分离子进程，以便发送给父进程和父进程退出的信号不再对子进程产生影响？最好在 system() 调用中，而不是需要获取进程 ID 并对其进行处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:12:13.627

从父进程分离的过程很简单：在子shell的后台运行命令`setsid`（因此它在新会话中启动），将标准输入、输出和错误重定向到`/dev/null`（或其他地方，视情况而定）。因为`system()`启动了一个新的shell，就相当于这样一个子shell，所以

```
system("setsid COMMAND </dev/null >/dev/null 2>/dev/null &"); 
```

正是需要的。在 shell 脚本中，等价于

```
( setsid COMMAND </dev/null >/dev/null 2>/dev/null & ) 
```

（Shell 脚本需要一个子shell，否则`COMMAND`将在当前shell 的作业控制下。使用时这并不重要`system()`，因为无论如何它都会为命令启动一个新的shell；当命令退出时，shell 将退出。）

重定向是必要的，以确保`COMMAND`当前终端没有打开的描述符。（当终端关闭时，会向所有此类进程发送一个 TERM 信号。）这意味着标准输入、标准输出和标准错误都必须重定向。上述重定向适用于 Bash 和 POSIX shell，但可能不适用于旧版本的`/bin/sh`. 特别是，它应该适用于所有 Linux 发行版。

`setsid`开始一个新的会话；成为`COMMAND`自己的流程组的流程组负责人。信号可以指向单个进程，也可以指向进程组中的所有进程。终止信号通常被发送到整个进程组（因为一个应用程序在技术上可能由多个相关进程组成）。如果父进程所属的进程组被进程组范围的信号杀死，则启动新会话确保`COMMAND`不会被杀死。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:35:42.307

我的猜测是整个进程组都被杀死了。您可以尝试`setpgid`在孩子中启动一个新的进程组。第一步应该是摆脱`system`和使用`fork`and `execve`or `posix_spawn`。

# c++ - 奇怪的不等式 - WC_BUTTONW 不等于 L"Button"？

> ID：12945202
> 
> 赞同：1
> 
> 时间：2012-10-17T23:54:40.843
> 
> 标签：c++, string, winapi, equality

我有一个 Button 控件包装类，它允许您将现有句柄传递给它，前提是它属于`WC_BUTTON`该类。我`GetClassName()`用来确定这一点。但是我有一个问题，代码中的注释应该有助于描述它：

```
// Initialize from existing handle
Vivify::Button::Button(HWND handle) {
    TCHAR cls[256];
    GetClassName(handle, cls, sizeof(cls));

    Alert(cls);       // MessageBox says "Button"
    Alert(WC_BUTTON); // MessageBox says "Button" also

    Str clsStr = cls;
    Str wcStr  = WC_BUTTON;

    Alert(ToStr<int>(clsStr.length())); // says "6"
    Alert(ToStr<int>(wcStr.length()));  // says "6" also

    // Problem HERE. Evaluates to false. How are they inequal??
    if (cls == WC_BUTTON) {
        SetHandle(handle); // Never gets executed
        m_id = GetDlgCtrlID(handle);
    }
} 
```

`Str`顺便说一句`std::wstring`，程序是Unicode。但是我得到的字符串`GetClassName()`都是`WC_BUTTON`unicode 字符串，都是`6`字符长，而且都相等`"Button"`，到底线是如何`if (cls == WC_BUTTON)`返回的`false`？

有人可以解释两个看似完全相同的字符串如何彼此不相等吗？或者我如何确定 a 是否`HWND`属于按钮/编辑/等。控制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T00:26:37.230

您不是在比较字符串，而是在比较地址。由于地址不同，因此返回`false`.

由于您需要让函数填充缓冲区，因此您有两个主要选择：

a) 使用 C 字符串和`_tcscmp`（的 TCHAR 版本`strcmp`）：

```
if (_tcscmp(cls, WC_BUTTON) == 0) //0 means equal 
```

b) 使用容器。`std::vector`并`std::array`让您编辑缓冲区，不像`std::string`，但我将展示后者。

```
TCHAR clsTemp[256];
GetClassName(handle, clsTemp, sizeof clsTemp / sizeof(TCHAR));
std::basic_string<TCHAR> cls = clsTemp;

if (cls == WC_BUTTON) //WC_BUTTON converted to `std::string` to compare 
```

`cls`然后可以通过 访问常量 C 字符串版本`cls.c_str()`。

请注意，我已经更改了您的`GetClassName`调用以反映这样一个事实，即它需要缓冲区的长度（以字符为单位），而不是以字节为单位的大小。`TCHAR`的大小可能不是一，所以有必要除以它。

# javascript - 如何在没有 jQuery 的情况下编写这个 webstorage javascript 代码？

> ID：12945206
> 
> 赞同：-1
> 
> 时间：2012-10-17T23:54:55.460
> 
> 标签：javascript, jquery, web-storage

我是 JavaScript 新手。我试图在不使用 jQuery 的情况下用 javascript 重写这段代码。有可能这样做吗？我该如何开始？jQuery javascript 也不是吗？

```
var Contacts = {
                index: window.localStorage.getItem("Contacts:index"),
                $table: document.getElementById("table"),
                $form: document.getElementById("form"),
                $button_save: document.getElementById("save"),
                $button_discard: document.getElementById("discard"),

                init: function() {
                    // initialize storage index
                    if (!Contacts.index) {
                        window.localStorage.setItem("Contacts:index", Contacts.index = 1);
                    }

                    // initialize form
                    Contacts.$form.reset();
                    Contacts.$button_discard.addEventListener("click", function(event) {
                        Contacts.$form.reset();
                        Contacts.$form.id_entry.value = 0;
                    }, true);
                    Contacts.$form.addEventListener("submit", function(event) {
                        var entry = {
                            id: parseInt(this.id_entry.value),
                            first_name: this.first_name.value,
                            last_name: this.last_name.value,
                            email: this.standing.value
                        };
                        if (entry.id == 0) { // add
                            Contacts.storeAdd(entry);
                            Contacts.tableAdd(entry);
                        }
                        else { // edit
                            Contacts.storeEdit(entry);
                            Contacts.tableEdit(entry);
                        }

                        this.reset();
                        this.id_entry.value = 0;
                        event.preventDefault();
                    }, true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:00:40.810

在没有 jQuery 框架的情况下，可以在 jQuery 中完成所有工作。jQuery 实际上只是一个 javascript 函数的大集合，它为您完成了许多重复性任务。

我认为该代码中没有任何 jQuery。但是如果我弄错了，那么我建议您使用 jQuery 而不是从该代码中删除 jQuery 依赖项，除非有一些特殊原因不使用它（性能或类似）。

# javascript - 从其他数组项创建一个数组

> ID：12945212
> 
> 赞同：-4
> 
> 时间：2012-10-17T23:55:42.687
> 
> 标签：javascript, jquery, multidimensional-array, mootools

我有以下问题：

```
var price   = ['4','5','8','12']
var produce = ['kiwi','orange','apple','banana']
var stock   = ['yes','no','no','yes'] 
```

我需要对它们进行分组，以便最终输出以以下格式显示在数组中：

```
var store = [ ['4','kiwi','yes'],['5','orange','no'], ...] 
```

我很困惑如何将一个包含这些值的数组变成一个二维数组。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:34:24.207

使用 JavaScript 有点矫枉过正:)：

```
var price   = ['4','5','8','12']
var produce = ['kiwi','orange','apple','banana']
var stock   = ['yes','no','no','yes']

// if the lengths/size of the above arrays are the same
var store = [];
for(var i = 0, len = price.length; i < len; i++) {
  store.push([price[i], produce[i], stock[i]]);
}

// if the lengths/size of the above arrays aren't the same and you want the minimum full entries
var storeMin = [];
for(var i = 0, len = Math.min(price.length, produce.length, stock.length); i < len; i++) {
    storeMin.push([price[i], produce[i], stock[i]]);
}

// if the lenghts/size of the above arrays aren't the same and you want the maximum entries with defaulting missing values to null 
// replace the nulls by any default value want for that column
var storeMax = [];
for(var i = 0, pLen = price.length, prLen = produce.length, sLen = stock.length, len = Math.max(pLen, prLen, sLen); i < len; i++) {
    storeMax.push([pLen>i?price[i]:null, prLen>i?produce[i]:null, sLen>i?stock[i]:null]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T00:03:09.163

```
var price   = ['4','5','8','12']
var produce = ['kiwi','orange','apple','banana']
var stock   = ['yes','no','no','yes']
var store = [];
$.each(price,function(ind,elm) {
    store.push([elm,produce[ind],stock[ind]]);
});
console.log(store); 
```

# java - 祖先子运算符执行选择的 JSoup 问题

> ID：12945217
> 
> 赞同：1
> 
> 时间：2012-10-17T23:56:51.493
> 
> 标签：java, screen-scraping, jsoup

我正在尝试使用结果列类来抓取 div 内的所有内容。

**这是我用于查询的代码，它不返回任何数据：**

```
Elements el_name = doc.select(".div.results-column a.no-tracks.url"); 
Elements el_phone = doc.select(".div.results-column  span.business-phone.phone");
Elements el_address = doc.select(".div.results-column span.street-address");
Elements el_city = doc.select(".div.results-column span.locality");
Elements el_state = doc.select(".div.results-column span.region");
Elements el_postalcode = doc.select(".div.results-column span.postal-code"); 
```

此处概述了选择器：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

**例子：**

```
<div class='results-column'>
   <div class='listing-content'>
   <span class='business-phone phone'>(111) 222-333</span><br>
   <span class='no-tracks url'>www.example.com</span><br>
   <span class='street-address'>29129 Sesame Street</span><span class='locality'>, Sesame City</span><br>
   [Rest of information from result1 would be here, I don't need to list every single thing on SO I hope]
   </div>
   <span class='business-phone phone'>(111) 222-333</span><br>
   <span class='no-tracks url'>www.example.com</span><br>
   <span class='street-address'>29129 Sesame Street</span><span class='locality'>, Sesame City</span><br>
   [Rest of information from result2 would be here, I don't need to list every single thing on SO I hope]
   </div>
</div> 
```

我不能用祖先子运算符选择某个类的 div 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:59:35.870

它应该是

```
 doc.select("div.results-column a.no-tracks.url"); 
```

不是

```
 doc.select(".div.results-column a.no-tracks.url"); 
```

标记前的点用作类选择器。HTML 标签不带点（其他选择器也一样）。

# javascript - 在两个类之间切换 jQuery = 有 效，但需要额外的点击

> ID：12945220
> 
> 赞同：0
> 
> 时间：2012-10-17T23:57:12.103
> 
> 标签：javascript, jquery, css

```
<a href="#" class="sort">Sort</a> 

   $(".sort").click(function (event) {
        $(this).toggle(function() {
                $(this).toggleClass("sortUp","sortDown");
            }, function() {
                $(this).toggleClass("sortDown","sortUp");
           });
    }); 
```

它可以工作，但我需要单击一次才能工作。所以 - **点击（什么都没有发生），点击（sortUP），点击（sortDown）**

**我想删除第一次点击。**

感谢社区的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:05:58.317

首先，您错误地使用[了 toggleClass](http://api.jquery.com/toggleClass/)。您似乎希望在每次单击时切换 sortDown 和 sortUp。这已经完成了`toggleClass("sortDown sortUp")`。

其次，当您加载页面时，您需要您的类`.sort`具有`sortUp`或`sortDown`设置其属性。`class`例如`<a href="#" class="sort sortDown">`。*这确保*您可以推理您的代码（即，在`sortUp, sortDown`您的`div`.

第三，`$(this).click(function() { /* code */ })`意思是“当有人点击时，做`/*code*/`”。你已经把你的

`$(this).click(function() { $(this).toggleClass("sortUp sortDown"); })`

它设置了点击行为，`$(".sort").click(function () {`这意味着您需要对“排序”进行初始点击才能开始该行为。

所以正确的版本是：

```
<a href="#" class="sort sortDown">Sort</a> 

   $(document).ready(function () {
        $(".sort").click(function() {
                $(this).toggleClass("sortUp sortDown");
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:05:05.337

看起来您在第一次点击时添加了点击事件，如果您想在两者之间切换`sortUp`，`sortDown`您可以简单地同时指定它们。只要元素以一个或另一个开始（不是两者都不是），它每次都会交换它们。

```
$(".sort").click(function() {
    $(this).toggleClass('sortUp sortDown');
}); 
```

您可以看到它在[JSFiddle](http://jsfiddle.net/GXQBH/)上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:10:23.107

如果您不想从 sortUp 或 sortDown 类开始，请执行以下操作：

```
<a href="#" class="sort">Sort</a> 

$(".sort").click(function (event) {            
    if($(this).hasClass("sortUp") || $(this).hasClass("sortDown")){
        $(this).toggleClass("sortUp sortDown");
    }else{
        $(this).addClass("sortUp");
    }
}); 
```

# c - C sscanf MD5 到整数不起作用

> ID：12945225
> 
> 赞同：0
> 
> 时间：2012-10-17T23:58:02.617
> 
> 标签：c, md5, scanf

我有一个将字符串转换为 MD5 的函数：

```
if(snprintf(target, 7, "123456") == -1){
    errx(1, "snprintf");            
}

uint a[4];
char w[64] = {0};

strncpy(w, target, 56);

md5_prep(w);
md5_cpu((uint*)&w[0], &a[0], &a[1], &a[2], &a[3]);

printf("%llu %llu %llu %llu\n", a[0], a[1], a[2], a[3]); 
```

这个 printf 给了我：

```
970722017 2874784329 1474320062 1049104370 
```

我知道这是正确的，因为如果我将其转换为 HEX 就可以了，如果密码我有 MD5 哈希并尝试这样做：

```
if(snprintf(g, 33, "e10adc3949ba59abbe56e057f20f883e") == -1){
    errx(1, "snprintf");            
}

uint a[4];

sscanf(&g[0], "%x", &a0]);
sscanf(&g[8], "%x", &a[1]); 
sscanf(&g[16], "%x", &a[2]);
sscanf(&g[24], "%x", &a[3]);

printf("%llu %llu %llu %llu\n", a[0], a[1], a[2], a[3]); 
```

结果是：

```
4294967295 4294967295 4061104190 4061104190 
```

两个 printfs 不应该相等吗？

我通过这个线程的 sscanf 工具这个 MD5 到 int 转换： [Converting MD5 result into an integer in C](https://stackoverflow.com/questions/11180028/converting-md5-result-into-an-integer-in-c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:28:34.993

你的问题是字节序。十六进制的 970722017 是 39dc0ae1 而不是 e10adc39。不同的是4个字节的顺序。一个 4 字节的整数既可以是最低有效字节，也可以是其他最高有效字节，这取决于您运行的系统。

换句话说，与顺序字节串相比，您在 4byte int 中的字节排列是向后的。

根据您在做什么，您的 md5 实际上是： 39dc0ae1ab59ba4957e056de3e880ff2

# twitter-bootstrap - 使用伪元素将图像居中放在 div 的顶部

> ID：12945230
> 
> 赞同：1
> 
> 时间：2012-10-17T23:59:02.803
> 
> 标签：twitter-bootstrap, responsive-design, pseudo-element

我想使用流体网格系统在我的引导站点中的所有“井”div 的顶部中心添加装饰。这目前似乎有效

```
.well {
    position: relative;
}
.well:before {
    content: url("http://placehold.it/20/E8117F");
    top: -10px;
    left: 45%;
    position: absolute;
} 
```

但这`left: 45%`只是将其居中的近似值，有更好的方法吗？

这是我的小提琴[http://jsfiddle.net/sguha095/WRB9F/](http://jsfiddle.net/sguha095/WRB9F/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:07:58.477

如果内容是固定宽度（比如 50px），您可以设置

`left: 50%;`和`margin-left:-25px;`（宽度的一半）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:43:31.180

一个鲜为人知的事实是 CSS 将图像视为文本。使用该功能，您可能希望`span`在图像周围放置一个标签并将其样式设置为`text-align: center`，如下所示：

HTML 代码：

```
<span class="centerImage"><img src="..." /></span> 
```

CSS 代码：

```
span.centerImage {
     text-align: center;
} 
```

图像将居中。

# gwt - GWT 请求工厂和编辑器框架异常

> ID：12945232
> 
> 赞同：1
> 
> 时间：2012-10-17T23:59:31.723
> 
> 标签：gwt, requestfactory

尝试使用 RequestFactoryEditorDriver.edit() 编辑新（代理）实体时，出现以下错误：“异常捕获：尝试编辑之前由另一个 RequestContext 编辑的 EntityProxy”。我相当确定这是我对请求工厂/编辑器框架架构的误解造成的。这是我认为与此问题有关的编辑器代码：

```
public class OrgMaintenanceWidget extends Composite implements Editor<IOrgProxy> {
... other fields ...
private IOrgEditorDriver _orgEditorDriver;
interface IOrgEditorDriver extends RequestFactoryEditorDriver<IOrgProxy, OrgMaintenanceWidget> {}
public OrgMaintenanceWidget(final IClientFactory clientFactory) {
  ... widget initialization ...
  _orgEditorDriver = GWT.create(IOrgEditorDriver.class);
  _orgEditorDriver.initialize(_clientFactory.getRequestFactory().getEventBus(),
                              _clientFactory.getRequestFactory(), this);
}
@UiHandler("newButton")
public void onNewButtonClick(final ClickEvent clickEvent) {
  _org = _clientFactory.getCache().getOrgCache().newOrg();
  _orgEditorDriver.edit(_org, _clientFactory.getRequestFactory().orgRequestContext());
}
...
} 
```

导致异常的是“_orgEditorDriver.edit()”行。“newOrg()”方法是：

```
public IOrgProxy newOrg() {
  return _clientFactory.getRequestFactory().orgRequestContext().create(IOrgProxy.class);
} 
```

RequestFactory 很简单：

```
public interface IRequestFactory extends RequestFactory {
IOrgRequestContext orgRequestContext();
} 
```

我确信我错过了一些关于编辑新实体的基本知识。当我编辑现有实体时，一切都很好...... UI 组件会自动填充，并且将编辑器刷新回实体效果非常好。下面是为现有实体启动编辑的代码：

```
@UiHandler("newButton")
public void onNewButtonClick(final ClickEvent clickEvent) {
  _org = _clientFactory.getCache().getOrgCache().newOrg();
  _orgEditorDriver.edit(_org, _clientFactory.getRequestFactory().orgRequestContext());
} 
```

任何帮助将不胜感激，我将尝试发布任何经验教训。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:10:56.533

这段代码：

`_clientFactory.getRequestFactory().orgRequestContext().create(IOrgProxy.class);`

方法：

1.  创建新的`orgRequestContext()`
2.  `IOrgProxy`使用此上下文创建新的
3.  **使用这个上下文编辑**新`IOrgProxy`的，因为正如[文档](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/index.html?overview-summary.html)所说：“返回一个新的**可变**代理，这个请求可以携带到服务器，也许是持久化的。”，这意味着这个请求**编辑**了代理。

这段代码：

`_orgEditorDriver.edit(_org, _clientFactory.getRequestFactory().orgRequestContext());`

方法：

1.  同样，创建新`orgRequestContext()`的（因为每次调用都`getRequestFactory().orgRequestContext()`提供了**新**的实例`orgRequestContext()`

2.  “开始用数据驱动编辑器及其子编辑器。” 正如文档所说。但作为其中的一部分，使用传递`orgRequestContext()`来编辑传递`IOrgProxy`的实例，以便代理是可编辑的。

3.  因为代理在被**其他**RequestContext创建时已经被编辑过，所以你会得到例外，因为RequestFactory中有一个基本规则，该代理只能由一个RequestContext编辑。

    另请参阅[此线程](https://stackoverflow.com/questions/5641868/clarify-how-gwt-requestfactory-and-requestcontext-work)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:10:12.880

我认为你不能用一个对象创建一个对象，`RequestContext`然后用另一个对象对其进行编辑。所以你可以通过两种方式解决这个问题：

*   使用创建对象时`RequestContext`使用的对象持久化创建的对象。save 方法应该返回持久化的对象，并且这个持久化的对象可以通过一个新的新对象传递给编辑器`RequestContext`
*   在某处保存`RequestContext`您用于创建对象并将其传递给`edit`您的函数`Driver`

解决方案二可能如下所示：

```
@UiHandler("newButton")
public void onNewButtonClick(final ClickEvent clickEvent) {
  IOrgRequestContext ctx = _clientFactory.getRequestFactory().orgRequestContext();
  _org = ctx.create(IOrgProxy.class);
  _orgEditorDriver.edit(_org,ctx );
} 
```

# linux - iptables 转发和输入

> ID：12945233
> 
> 赞同：30
> 
> 时间：2012-10-17T23:59:41.767
> 
> 标签：linux, input, iptables, forwarding

我有一个带有 Linux pc 的家庭网络，它们都运行了 iptables。我认为将我的 LAN 放在 Linux 网关/防火墙后面更容易，所以我在路由器和 LAN 之间放置了一台 pc（带 fedora，没有 gui）并配置了 iptables。没问题，INPUT 只允许 dns 和 http（和一些本地的东西），转发工作正常：局域网连接到互联网。

但我的问题是：FORWARD 是否允许来自外部的所有端口，还是只允许我使用 INPUT 配置的端口？FORWARD 和 INPUT 是一起工作还是分开的？

这是我的iptables：

```
*nat
:PREROUTING ACCEPT [16:1336]
:INPUT ACCEPT [14:840]
:OUTPUT ACCEPT [30:2116]
:POSTROUTING ACCEPT [0:0]
-A POSTROUTING -o p1p1 -j MASQUERADE
COMMIT
# Completed on Tue Oct 16 09:55:31 2012
# Generated by iptables-save v1.4.14 on Tue Oct 16 09:55:31 2012
*filter
:INPUT DROP [0:0]
:FORWARD DROP [0:0]
:OUTPUT ACCEPT [91:9888]
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
-A INPUT -p UDP --dport 53 -j ACCEPT
-A INPUT -p TCP --dport 53 -j ACCEPT
-A INPUT -s 192.168.1.0/24 -i p1p1 -p tcp -m multiport --dports 20,21 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -s 192.168.2.0/24 -i p3p1 -p tcp -m multiport --dports 20,21 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -s 192.168.1.0/24 -i p1p1 -p tcp -m tcp --dport 5000:5100 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -s 192.168.2.0/24 -i p3p1 -p tcp -m tcp --dport 5000:5100 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -i p1p1 -p tcp -m tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -s 192.168.2.0/24 -i p3p1 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -s 192.168.1.0/24 -i p1p1 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT
-A INPUT -i p1p1 -p tcp -m multiport --dports 20,21,443 -j DROP
-A INPUT -i p1p1 -p tcp --dport 5000:5100 -j DROP
-A INPUT -i p1p1 -p icmp -m icmp --icmp-type 8 -j DROP
-A FORWARD -s 192.168.2.0/24 -j ACCEPT
-A FORWARD -d 192.168.2.0/24 -j ACCEPT
-A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7
-A OUTPUT -j LOG --log-prefix "denied out: "

COMMIT 
```

p1p1 (.1.x) 是我的外部网卡，p3p1 (.2.x) 是内部网卡。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-05-02T21:06:14.767

RedHat 有一个**[很棒的关于 iptables 的文档](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Security_Guide/index.html#sect-Security_Guide-Firewalls-Using_IPTables)**（有点长），但是要涵盖的主题很复杂，而且有很多不同的用例，我不知道如何避免它。

![iptables 内核路由](../Images/8850740b1479325cd84713fbfeb5d871.png)

这是关于**[FORWARD 和 NAT 规则](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Security_Guide/index.html#sect-Security_Guide-Firewalls-FORWARD_and_NAT_Rules)**的章节。正如它所说：

> 例如，如果要将**传入的 HTTP 请求转发**到位于 172.31.0.23 的专用**Apache HTTP 服务器，**请以 root 用户身份使用以下命令：

```
~]# iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to 172.31.0.23:80 
```

这是发生的事情：

*   你的 linux 网关从你的路由器收到一个数据包。包头有：
    *   来源：（`x.x.x.x:y`来自互联网的发送者 IP 和用于数据包传输的源端口）
    *   目的地：（`192.168.1.1:80`假设您的 linux 网关 IP 在外部 NIC 上，即`p1p1`）
*   您的 linux 网关应用**PREROUTING**链来查找匹配项。假设您输入了上面的内容，**数据包匹配规则**，然后调用（跳转`-j`）到**DNAT 函数**（*目标网络地址转换*），该函数**将数据包头的目标**从初始`192.168.1.1:80`更改为`172.31.0.23:80`.
*   然后，数据包到达**路由决策**。数据包目的地现在是`172.31.0.23:80`。
    *   您的 linux 网关会问自己：它适合我吗 ( `192.168.1.1:80`) ？不，所以我**不会将**它发送到**INPUT**链。
    *   => 我会将它发送到**FORWARD**链。
*   **由于您已在本地网络**（`filter`表链）上将规则全部设置为FORWARD `FORWARD`，因此应将数据包正确转发到本地 Apache HTTP 服务器（例如）。

希望它有助于更​​多地了解内部路由如何与 iptables 一起工作。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-10-18T00:02:03.333

INPUT、FORWARD 和 OUTPUT 是分开的。一个数据包只会命中三个链之一。

如果目的地是*这个*服务器，它会命中 INPUT 链。如果它的源*来自*这个服务器，它会命中 OUTPUT。如果它的源和目标都是其他机器——它正在*通过*服务器进行路由——那么它会命中 FORWARD 链。

# sml - 使用 foldr 返回列表的后缀

> ID：12945234
> 
> 赞同：1
> 
> 时间：2012-10-17T23:59:49.457
> 
> 标签：sml, smlnj, fold

我需要返回一个列表的后缀，似乎无法解决它。

给定一个列表`[1,2,3]`，该函数应该返回`[[3],[2,3],[1,2,3]]`。我们应该使用 foldr 和一个辅助函数来解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T19:39:36.147

这个怎么样：

[1,2,3,4] 将返回 [[1,2,3,4],[2,3,4],[3,4],[4]] ：

```
fun myfun1 l = foldr(fn (a,b)=> if a=nil then [] else a::b@myfun1(tl(l)))[] [l] 
```

[1,2,3,4] 将返回 [[4],[3,4],[2,3,4],[1,2,3,4]] ：

```
fun myfun2 l = foldr(fn (a,b)=> if a=nil then [] else myfun2(tl(l))@a::b)[] [l] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:51:17.420

这是@Landei 的 SML 语法解决方案：

```
fun suffixes xs = 
   let 
      fun f (y, []) = [[y]]
        | f (y, yss as (ys::_)) = (y::ys)::yss
   in
      rev (foldr f [] xs)
   end 
```

我假设您可以使用[SML Basis Library](http://www.standardml.org/Basis/list.html)`rev`中的函数。否则，实现这样的功能应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:47:21.623

哈斯克尔将是：

```
suffixes = reverse . foldr f [] where
  f y [] = [[y]]
  f y (yss@(ys:_)) = (y:ys) : yss 
```

我不知道SML，但解决方案应该是类似的

# java - 使用扫描仪解析文本文件时，为什么在每个预期字符之间出现空字符？

> ID：12945238
> 
> 赞同：2
> 
> 时间：2012-10-18T00:00:23.513
> 
> 标签：java, file-io, null, registry, java.util.scanner

我正在使用以下命令创建注册表快照： Runtime.getRuntime().exec("REG EXPORT HKLM " + pathVariable + "\HKLM.txt /y");

然后我正在解析这个文件，试图将注册表项分组为一个字符串，因为它们通常被分成多行。当我使用这段代码时，我总是得到每个偶数字符的“NUL”字符。

```
String line, concatLine;
Scanner scanner;
try {
    scanner = new Scanner(myFile);
    line = null;
    concatLine = "";
    while(scanner.hasNextLine()){
        line = scanner.nextLine();
        if(line !=null && !(line.isEmpty())){
            concatLine += line;
        }
        else if(!(concatLine.equals(""))){
            System.out.println(concatLine);
            concatLine = "";
        }
            }
} catch (IOException e) {//Catch I/O Exceptions
            System.err.println(e);
} 
```

我在用 NP++ 扫描文件之前正在查看文件，并且没有“NUL”字符，但是如果我将这些连接的行写入文件，则整个文件在每个预期字符之间都有它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:46:41.563

在我寻找理解问题的过程中，我遇到了[Java 阅读和写作实践](http://www.javapractices.com/topic/TopicAction.do?Id=42)，这绝对值得一看。除此之外，似乎早期的评论是正确的。如果文件以 UTF-16 流的形式打开并按原样写入，则输出不包含空字符。顺便说一句，您还需要处理注册表转储中的转义换行符，因为如果您不这样做，您最终会得到如下内容：“00,00,\ 00”，您应该有“00,00,00 ”。

这是一个例子：

```
 import java.io.*;
import java.util.*;
import static java.lang.System.out;
public class ReadReg {
    public static void main(String[] argv){
        String line=null; StringBuilder sb = new StringBuilder();
        Scanner scanner; 
        FileOutputStream fos; 
        BufferedOutputStream bos; OutputStreamWriter fosw;
        try {
            scanner = new Scanner(new File("hklm-hw.txt"), "UTF-16");
            fos  = new FileOutputStream("hklm-hw.cat.txt");
            bos  = new BufferedOutputStream(fos);
            fosw = new OutputStreamWriter(bos, "UTF-16");
            while (scanner.hasNextLine()) {
                sb.append( line = scanner.nextLine());
                if (line.isEmpty()) {
                    sb.append("\n");
                }
            }
            if (null != scanner.ioException()) {
                out.format("scanner ioe:\n\t%s\n", scanner.ioException().getMessage());
                //scanner.ioException().printStackTrace();
            }
            fosw.write( sb.toString(), 0, sb.length());
            fosw.flush();
            fosw.close();
            scanner.close();
        } catch (IOException io) {
            io.printStackTrace();
        }
    }
} 
```

* * *

输出：

```
 $ javac ReadReg.java  && java ReadReg ; file *
hklm-hw.cat.txt: Big-endian UTF-16 Unicode text, with very long lines
hklm-hw.txt:     Little-endian UTF-16 Unicode text, with CRLF, CR line terminators
ReadReg.class:   compiled Java class data, version 50.0 (Java 1.6)
ReadReg.java:    C source, ASCII text 
```

# c++ - 在 windows 中安装最新的 cppunit

> ID：12945248
> 
> 赞同：10
> 
> 时间：2012-10-18T00:01:26.267
> 
> 标签：c++, windows, installation, cppunit

我正在尝试在 Windows 上安装 CppUnit。

我从[这里](https://sourceforge.net/projects/cppunit/ "CppUnit")下载了它，解压后发现所有文件的名称中都有 ,v ，并且没有扩展名。

安装说明（在包含的文件中，以及在我发现的每个建议安装**Windows**的站点上，都适用于 Linux。（[例如安装 CppUnit for Windows 说明](http://code.google.com/p/tonatiuh/wiki/InstallingCppUnitForWindows)）。

其他人，只是为了构建：（[例如：安装 CppUnit for Visual Studio Instructions](http://www.danstechden.com/2009/11/19/using-cppunit-with-visual-studio/)或[关于同一主题的第二个答案](https://stackoverflow.com/questions/8094133/how-to-install-cppunit-for-visual-c-2005)）。

上面链接上接受的答案有一条评论说接受它的人“排序它，我下载了另一个版本” - 在他遇到与我完全相同的问题之后 - 但没有指定什么版本或从哪里......

我上面的链接是最新版本。

从 2008 年开始，我能够找到一个非常旧的版本 1.12.1，它几乎可以在 Windows 上构建（有很多错误）。我现在正在使用它来学习如何实现 CppUnit。尽管如此，它已经有 4 年历史了......我希望能够使用最新版本......

拜托，有人可以给我一些建议，我可以在 Windows 中实施和工作以安装最新的 cppUnit 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T00:16:41.773

您进行的第一次下载是 CVS 存储库的存档。这解释了您在文件中看到的奇怪的 ,v “扩展”。这不是你应该下载的。事实上，您所做的正确下载（版本 1.12.1）是 4 岁。虽然它是最新的稳定版本，所以它应该正常构建。我不知道你遇到的具体问题是什么。

然而，有两个较新的选项。有 CppUnit2，[可在此处获得](https://launchpad.net/cppunit2)。[这里](http://www.freedesktop.org/wiki/Software/cppunit)有原始项目的独立分支。

也许您可以检查其中任何一个，看看它们是否对您来说问题较少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T12:43:50.923

巴特在 freedesktop.org 上提到的 fork 似乎是（唯一？）CppUnit 版本 1 的延续，目前版本为 1.13.2。请注意，对于这个版本，如果您想在 Win64 上使用测试运行器，您必须进行[此处](https://bugs.documentfoundation.org/show_bug.cgi?id=81433)描述的小修改，直到它成为更新的版本。

# string - 在变量中加载字符串而不是变量的名称 (R)

> ID：12945250
> 
> 赞同：0
> 
> 时间：2012-10-18T00:01:40.693
> 
> 标签：string, r, variables, load

我正在尝试加载保存在某个文件夹中的数据框。我有一个 bash 脚本，它遍历`*.gzip`文件夹中的所有文件并将文件名作为参数传递给 R 脚本 ( `blah.r $file_name`)。现在，在 R 脚本中，文件名保存为

```
file_name = commandArgs(TRUE)[1] 
```

并打印正确的文件名。但是，当我尝试加载文件时

```
data(file_name) 
```

R 认为 file_name 是一个字符串，而不是一个变量，所以它说它 can't find `"file_name"`。

如何让 R 将此变量识别为变量而不是文字字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:01:20.867

这个问题的答案是这样的

```
 read.table(file = file_name, ....) 
```

哪里`....`是附加参数来指定包含您希望加载的数据的文本文件的性质。

如果数据不在文本文件中，而是在其他一些（可能是二进制的）格式中，那么您将需要使用正确的函数来导入这些数据。例如，如果数据以 R 的一种格式（通过`save()`或`saveRDS()`）存储，则：

```
load(file = file_name) ## for save()-ed objects

foo <- readRDS(file = file_name) ## for objects serialised via saveRDS() 
```

你提到的文件是`*.gzip`. 如果是这样，那么看看`?connections`和`gzip()`函数，它也可以传递一个包含要打开的文件名的对象，如下所示：

```
gzip(file_name, ....) 
```

您`....`可能需要指定进一步的参数（阅读帮助页面）。

# flash - JSFL：向符号添加模糊过滤器但更改模糊量

> ID：12945253
> 
> 赞同：0
> 
> 时间：2012-10-18T00:02:03.763
> 
> 标签：flash, filter, blur, jsfl

我正在尝试创建 JSFL 脚本，以便可以为不同类型的模糊滤镜设置热键。

我从历史中复制了以下代码。然而，当使用此代码时，它将使用默认值：blurX=5，blurY=5。“扩展 Flash”文档没有帮助。它只是给了我相同的代码，没有解释如何修改代码中的值。感谢土坯！（讽刺）

`fl.getDenter code hereocumentDOM().addFilter('blurFilter')`

然后我做了一些搜索，发现了这段代码：

`var currentFilters = fl.getDocumentDOM().getFilters();` `for(var i=0; i<currentFilters.length; i++) {` `if(currentFilters[i].name == "blurFilter") {` `currentFilters[i].blurX = 10;} }` `fl.getDocumentDOM().setFilters(currentFilters);`

来源： http: [//www.adobemarketing.com/devnet/flash/articles/jsfl_overview.html](http://www.adobemarketing.com/devnet/flash/articles/jsfl_overview.html)

问题是，当我使用选定的闪存激活此代码时，什么也不做。我确实注意到这篇文章是为“Flash 8”编写的，但是，必须有一些更新版本。

有什么我想念的吗？还有其他方法可以使用 JSFL 添加自定义模糊效果吗？

顺便说一句：我有 Flash CS6

任何帮助或帮助我解决这个问题的线索将不胜感激。提前致谢！-拍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:37:04.613

您应该检查[Flash CS6 JSFL 参考](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7e45.html)。请注意，*另请参阅*部分提到[document.setFilterProperty()](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7dd4.html)，所以这样的事情应该可以工作：

```
var doc = fl.getDocumentDOM();
doc.addFilter("blurFilter"); 
doc.setFilterProperty("blurX", 0, 10);//assuming the blur above is the 1st filter applied (has index 0)
doc.setFilterProperty("blurY", 0, 10); 
```

# ruby-on-rails - Ruby on Rails 继承

> ID：12945254
> 
> 赞同：0
> 
> 时间：2012-10-18T00:02:10.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, inheritance, multiple-inheritance, class-table-inheritance

我想在我的 Rails 应用程序中实现以下模型结构，其中包含 3 个单独的表 - Value、DecimalValue 和 TextValue - 其中 DecimalValue 和 TextValue 继承自 Value。这个想法是 Value 应该只包含 id，子表应该引用那个 id。我怎样才能实现这个基于o ROR？

值模型 (id, type) DecimalValue (value_id, value:decimal) TextValue (value_id, value:string)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:07:09.840

您应该尝试[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

这是关于它的好[RailsCast](http://railscasts.com/episodes/154-polymorphic-association)

# android - 具有已处理异常的 Android ACRA

> ID：12945256
> 
> 赞同：18
> 
> 时间：2012-10-18T00:02:21.487
> 
> 标签：android, exception, report, try-catch

当发生未处理的异常时，我正在使用 ACRA（Android 应用程序崩溃报告）发送数据。

像 openFileOutput() 这样的方法需要我尝试捕获 iOExceptions。由于异常位于 try catch 块中，因此不会触发 ARCA。但是我仍然想接收并查看堆栈跟踪。有没有办法实现这一目标？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-18T02:33:24.200

如果处理`IOException`等 没有真正意义（即，你真的无能为力），将它包装在 a 中`RuntimeException`并扔掉它。ACRA 将捕获并报告此情况。如果您不想让应用崩溃，请捕获并处理它，然后使用`handleException()`手动发送报告：

```
ACRA.getErrorReporter().handleException(caughtException); 
```

更多细节[在这里](https://github.com/ACRA/acra/wiki/AdvancedUsage#sending-reports-for-caught-exceptions-or-for-unexpected-application-state-without-any-exception)

# entity-framework - Entity SQL vs CreateQuery 一个工作，另一个错误用于同一查询

> ID：12945259
> 
> 赞同：0
> 
> 时间：2012-10-18T00:02:38.703
> 
> 标签：entity-framework, entity-sql, createquery

我可以使用以下代码行来创建一个只返回“ActivityEntity”类型的对象的查询......

```
var q = CreateObjectSet<EntityBase>("EntityBases").OfType<ActivityEntity>() 
```

..并且运行查询按预期工作。但我想实际使用 Entity SQL 语法创建一个查询，因此尝试将上面的代码转换为以下代码......

```
string query = "SELECT it FROM OFTYPE(MyContext.EntityBases, MyNamespace.ActivityEntity) AS it";
var q = context.CreateQuery<DbDataRecord>(query.ToString(), new ObjectParameter[] { }); 
```

...除了这会出现以下错误...

> 找不到类型“MyNamespace.ActivityEntity”。确保加载了所需的模式并且正确导入了命名空间。

...两组代码都在同一个 C# 文件中，因此命名空间不会有问题，因为代码的强类型版本工作得很好。任何想法如何解决这个问题？

**笔记：**

不确定这是否有所不同，但实体框架设置为无代码生成策略，然后我构建了自己的类以供使用。但是我已经用 EdmEntityTypeAttribute 属性标记了它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:57:56.090

The solution turns out that I needed to ensure that CreateObjectSet had been used before generating the Entity SQL. So before creating the Entity SQL I use the following code...

```
var q = CreateObjectSet<EntityBase>("EntityBases").OfType<ActivityEntity>(); 
```

but never actually use the generated 'q'. Just using this line ensures that the Entity Framework context knows about the existence of the EntityBases collection and its derived types.

# android - Android 中的颜色和样式

> ID：12945260
> 
> 赞同：0
> 
> 时间：2012-10-18T00:02:55.133
> 
> 标签：android, android-layout, android-theme

我正在尝试学习如何制作 Android 应用程序（在 Jellybean 4.1.2 上），但我的“HelloWorld”应用程序的风格有问题。我想要的看起来像这样（默认的编辑文本/按钮外观）：

![在此处输入图像描述](../Images/c38aa797775158c2925aebdc59e41293.png)

不幸的是，我所拥有的看起来像这样：

![在此处输入图像描述](../Images/b0010dfe66a0ff040ae445e6b9ae37b6.png)

这是我的布局文件源代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:orientation="horizontal">
         <EditText android:id="@+id/edit_message"
             android:layout_weight="1"
             android:layout_width="0dp"
             android:layout_height="wrap_content"
             android:hint="@string/edit_message" />
         <Button
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/button_send" />
    </LinearLayout> 
```

我怎样才能让它看起来像那样，为什么一开始不是那样的？

提前致谢，

Niro56

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:05:23.703

如果您只是针对 JellyBean，那么下面的代码应该可以完成这项工作。只需将其添加到您的 AndroidManifest.xml。打开清单后，请确保您正在查看 xml 代码，如下所示：

![在此处输入图像描述](../Images/0e9805e423152cd5235eb4458e671ebb.png)

```
 <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Holo" > 
```

您应该知道，如果您尝试在不支持它的设备上使用 holo 主题（又名：不了解 Theme.Holo 是什么），那么它很可能会在这些设备上崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:30:47.420

只需在 Android Manifest 中更改主题即可。应用程序内部的更改适用于整个应用程序，但您也可以更改应用程序中所有不同活动的主题。前任-

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black" >
        <activity
            android:name=".AVST"
            android:label="@string/title_activity_avst" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" /> 
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:22:11.967

问题是，默认的 android 小部件和样式在版本之间发生了很大变化。特别是从 2.3 到 3.0。与 HC 一起宣布的新主题称为 Holo Theme。不幸的是，您不能在以前的版本中使用这个主题（不是没有 3rd 方库），因此例如 GB 和 HC 上的默认小部件看起来非常不同。如果你想在以前的版本中使用这个主题，有一个名为[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)的库。

除此之外，您应该将项目构建目标更改为 ICS 或 JB，然后您可以在 Holo 主题中看到您的布局（即使您不使用 HoloEverywhere）： ![在此处输入图像描述](../Images/44f5a36d9b76d832d11ec4d4b6001163.png)

# java - 如何在 Java 小程序中使用图标？

> ID：12945264
> 
> 赞同：0
> 
> 时间：2012-10-18T00:03:22.197
> 
> 标签：java, image, applet, icons

![在此处输入图像描述](../Images/7532e50ca969e757496b3a450f7dc7d4.png)

我想在 Java 小程序中使用我的图标。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:35:02.010

我不太确定你想用受限访问对话框图标做什么......

但是，实际上，您在问题中显示的上传图片不是“***您的应用程序***”的一部分，而是 jre 限制访问对话框。

![在此处输入图像描述](../Images/e661e4addd716ffc61f9579d88abea4e.png)

它显示您何时尝试运行已签名的小程序...它允许您：

*   A) 以不受限制的访问权限运行您的小程序一次
*   B）或将小程序证书放入证书存储以使其受信任并稍后在没有安全对话框的情况下运行它

听起来很奇怪，但换句话说，您的问题是关于“在客户端机器 JRE 上更改某些内容”：S 所以我想尝试更改 jre“警告-安全”对话框图标本身是个坏主意：S

* * *

即使您启动了一个非常正确的签名小程序，您仍然会显示受限访问对话框，直到您使证书受信任；因此，无论如何，即使证书受信任，对话框也会显示一次；这让我觉得你无论如何都无法避免为你的**签名**小程序显示这个对话框；

*您仍然可以使受限访问对话框从未显示；但是这样做的唯一方法是使用您的小程序项目中的“无限制 - 无害”库将您的小程序**保持****在沙箱**框架中，并且您的小程序应该是未签名的；有关未签名的小程序可以做什么或不能做什么的更多详细信息，您可以阅读[本](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)教程；*

PS如果您的问题中有其他意思，请发表评论

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:02:32.290

那里有两种不同的平台外观。但我认为你得到的是一个是签名的应用程序，一个不是。

您需要遵循一个记录的流程来签署您的应用程序，因此它没有警告图标和未选中的框。

[http://docs.oracle.com/javase/tutorial/security/toolsign/index.html](http://docs.oracle.com/javase/tutorial/security/toolsign/index.html)

[http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html)

# php - Drupal：如何在链接中呈现跨度？

> ID：12945266
> 
> 赞同：4
> 
> 时间：2012-10-18T00:03:25.870
> 
> 标签：php, drupal, drupal-7, drupal-theming, drupal-render

我想要这个结果：

```
<a href="path/to/something">This is a link! <span>with a span inside!</span></a> 
```

这呈现了一个链接：

```
$render = array(
  'link' => array(
    '#type' => 'link',
    '#title' => t("This is a link!"),
    '#href' => "path/to/something",
  ),
); 
```

为什么这不会在链接内呈现跨度？

```
$render = array(
  'link' => array(
    '#type' => 'link',
    '#title' => t("This is a link!"),
    '#href' => "path/to/something",
    'span' => array(
      '#type' => 'markup',
      '#markup' => ' <span>with a span inside!</span>',
    ),
  ),
); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:09:36.450

只需将您的代码调整为：

```
$render = array(
  'link' => array(
    '#type' => 'link',
    '#title' => "<span>" . t("This is a link!") . "</span>",
    '#href' => "path/to/something",
     '#options' => array(
        'html' => TRUE,
    )
  ),
); 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:41:46.983

对于#title 属性，只需像这样将跨度放入其中：'#title' => t("这是一个链接！里面有一个跨度！")

# ios - UIView Transform 属性倾斜一个圆，使其具有 3D 外观

> ID：12945268
> 
> 赞同：1
> 
> 时间：2012-10-18T00:03:52.967
> 
> 标签：ios, uiview, cgaffinetransform, catransform3drotate

我正在使用`MKMapView`带有添加的`MKCircleView`. 它继承自`UIView`，所以我可以使用 transform 属性。

它在没有变换的情况下看起来很平坦，并且在大头针旁边看起来很奇怪，因为它是 3D 的：

![在此处输入图像描述](../Images/829c16b23ed49daa72fffe408802d2fe.png)

我想让它看起来类似于：

![在此处输入图像描述](../Images/559219794a4d1c2548c9e15927b16eab.png)

我试过玩设置的例子，`CATransform3DRotate`但所涉及的数学不是我的技能，所以没有什么比这更接近了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:12:17.323

我会使用 2d 缩放来伪造它

```
CGContextScaleCTM 
```

你可以用每个 UIView 做到这一点：

```
UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 5)];
CGAffineTransform scale = CGAffineTransformMakeScale(1.0f, 0.6f);
[v setTransform:scale]; 
```

按因子（1.0、0.6）缩放，你就完成了！

如果这没有帮助，您应该做更多的事情，创建自己的自定义地图叠加层，如[本教程中所述](http://i.ndigo.com.br/2012/05/ios-maps-with-image-overlays/)

祝你好运！

# php - 如何使用基于数据库的邮件列表？

> ID：12945269
> 
> 赞同：0
> 
> 时间：2012-10-18T00:04:01.973
> 
> 标签：php, database, email, mailing-list

我正在考虑向我的网页添加一个邮件列表，用户在其中提交他们的电子邮件地址，该地址被添加到我服务器上数据库中的一个表中。设置完所有 PHP 后，我如何才能真正向所有联系人发送时事通讯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:07:24.803

老实说，您最好的选择是查看任意数量的邮件列表工具（包括免费的 PHP 应用程序，如 PHPList）来执行此操作。实际上，为了实现邮件列表工具，您需要考虑很多事情 - 包括退回处理、用户选择退出等。

重新发明轮子真的没有意义。

# c# - 使用 p/Invoke 在 x64 版本的 .net 应用程序中崩溃

> ID：12945273
> 
> 赞同：0
> 
> 时间：2012-10-18T00:04:18.733
> 
> 标签：c#, dll, crash, pinvoke, 64-bit

所以，我正在尝试以 64 位模式运行我的 .NET 应用程序。我依赖于可以为 x64 编译的 dll 并且它可以正确加载。我可以调用一些调用，但是当我尝试调用特定调用时，应用程序会完全崩溃。没有错误或任何东西......

错误发生在两个地方之一；要么在这里：

```
#include "socket.h"
int SenderAddrSize = sizeof(SOCKADDR_IN);
SOCKADDR_IN CSocket::SenderAddr;

...

char* CSocket::tcpip()
{
if(sockid<0)return NULL;
if(getpeername(sockid, (SOCKADDR *)&SenderAddr, &SenderAddrSize) == SOCKET_ERROR)return NULL;
return inet_ntoa(SenderAddr.sin_addr);
}

... 
```

或在这里：

```
#include "buffer.h"
char CBuffer::retval[20001];
CBuffer::CBuffer()
{
BuffSize = 30;
data = (char*)malloc(BuffSize);
count = 0;
readpos = 0;
writepos = 0;
}

... 
```

你可以在我的 GitHub [HERE](https://github.com/nterry/39DLL/tree/master/src)的[socket.cpp](https://github.com/nterry/39DLL/blob/master/src/socket.cpp)和[buffer.cpp](https://github.com/nterry/39DLL/blob/master/src/buffer.cpp)中找到完整的代码。**代码的入口点和调用上述方法的对象都位于 main.cpp**

p/invoke 调用如下：

对于插座：

```
[DllImport("SockLib", CallingConvention = CallingConvention.Cdecl, EntryPoint = "tcpip")]
public static extern String tcpip(Double socket); 
```

对于缓冲区：

```
 [DllImport("SockLib", CallingConvention = CallingConvention.Cdecl, EntryPoint = "createbuffer")]
 public static extern Double createbuffer(); 
```

为什么代码崩溃的任何想法。这在 x86 中就像一个魅力，只是在 x64 中没有......

另外，作为一个附带问题...如果我将一个 int 写入在 x86 中运行的客户端上的缓冲区并在 x64 服务器上接收它（反之亦然），该 int 是 4 字节还是 8 字节？关键字***int***是否会因平台特定大小而改变，还是必须指定***int64***才能获得 8 字节整数？这适用于上述较大问题的 C++ 源代码部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:08:44.807

不要`string`在 ap/invoke 调用中用作返回值。这将假设内存是使用分配的`CoTaskMemAlloc`，因此将导致编组器调用`CoTaskMemFree`返回的指针。这会导致运行时错误。

一种选择是您可以更改本机代码以`CoTaskMemAlloc`用于将其分配的内存返回给 C#。如果你这样做了，那么你可以继续使用`string`你的 p/invoke 返回值。

另一种方法是`malloc`像现在一样`IntPtr`在 C# 端使用，并从您的本机代码中导出释放器。

要从转换`IntPtr`为字符串，请使用`Marshal.PtrToStringAnsi()`. 完成后，您可以将指针传递回您的本机 DLL，以便它可以调用`free()`它。

看起来像这样：

```
[DllImport("SockLib", CallingConvention=CallingConvention.Cdecl)]
public static extern IntPtr tcpip(double socket); 
```

你这样称呼它：

```
IntPtr strPtr = tcpip(socket);
string str = Marshal.PtrToStringAnsi(strPtr); 
```

您需要对每个返回字符串的 p/invoke 调用执行类似的操作。

您是否需要释放这些指针并不是 100% 清楚的。这取决于您是否在 C++ 代码中分配了内存。例如，`tcpip`映射到对 的调用`inet_ntoa`。这将返回一个指向套接字库拥有的缓冲区的指针。所以你的代码不能试图释放它。`malloc`但是，如果您返回使用or分配的内存`new[]`，那么您也必须释放它。

* * *

其他一些观察：

*   您正在返回在 C++ 代码中声明但在 C 包装器中`int`键入它们的 套接字。`double`不要那样做。一直使用`int`。
*   C# 类型`int`为 32 字节。对于 64 位整数，请使用`long`. 未签名版本是`uint`和`ulong`。对于机器字长的类型，请使用`IntPtr`或`UIntPtr`。

# drawing - 使用着色器绘制抗锯齿圆

> ID：12945277
> 
> 赞同：14
> 
> 时间：2012-10-18T00:04:44.083
> 
> 标签：drawing, glsl, geometry

我是着色器编程的新手。我正在尝试用 glsl 画一个圆圈。我使用了一个具有大小的点，并试图过滤掉半径之外的点。（改变 alpha 值）。代码如下：

**片段着色器**：

```
#version 130
varying  vec2 textureCoordinate;
const float circleBorderWidth = 0.08;//for anti aliasing
void main() {
      float d = smoothstep(circleBorderWidth,0.1, 1.0-length(textureCoordinate));
      gl_FragColor = vec4(0.0, 1.0, 0.0, d);
} 
```

**顶点着色器**：

```
#version 130
attribute vec4 coord3d;
attribute vec2 varPos;
varying vec2 textureCoordinate;
void
main()
{
        textureCoordinate = varPos;
        gl_FrontColor = gl_Color;
        gl_Position = vec4(coord3d.xyz,1.);
        gl_PointSize = coord3d.w;
} 
```

**资料**：

```
float pos[] = {
    -1, -1,
     -1, 1,
     1, 1,
     1, -1,
};

float vertices[]={0.0,0.0f,0.0f,100.0f}; 
```

**绘制方法**：

```
void drawScene() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    program->makeCurrent();
    glEnable(GL_POINT_SMOOTH);
    glEnable(GL_VERTEX_PROGRAM_POINT_SIZE);
    glEnable(GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    if (varPosAttrib>=0) {
        glVertexAttribPointer( varPosAttrib, 2, GL_FLOAT, GL_FALSE,
                               0, pos ); // -->varPos in Vertex Shader.
        glEnableVertexAttribArray( varPosAttrib );
    }

    if (posAttrib>=0) {
        glVertexAttribPointer(posAttrib, 4, GL_FLOAT, GL_FALSE, 0, vertices); // -->coord3d in vertex shader
        glEnableVertexAttribArray(posAttrib);
        glDrawArrays(GL_POINTS, 0, 1);
    }
    glDisable(GL_POINT_SMOOTH);
    glDisable(GL_VERTEX_PROGRAM_POINT_SIZE);
    glDisable(GL_BLEND);
    program->release();
    glutSwapBuffers(); //Send the 3D scene to the screen
} 
```

`d`如果我在以下行（在片段着色器中）替换为 1.0，这将导致绘制一个正方形：

```
gl_FragColor = vec4(0.0, 1.0, 0.0, d); // -> if d is replaced by 1.0 
```

我试图用 and 替换 x 和`gl_FragColor`y`textureCoordinate.x`值`textureCoordinate.y`。结果是黑色的（所以我假设值是 0.0）。我不明白的是，如果我采用的长度`textureCoordinate`总是 1.0。（通过替换 中的值进行实验 `gl_fragcolor`）。我无法弄清楚我在这里做错了什么。我期望该`textureCoordinate`值根据传入的数据 ( `varPos`) 进行插值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T23:47:12.837

这是我目前的尝试。从某种意义上说，它可以绘制具有平滑边框的圆盘。我使用距离场方法，即。我计算到光盘边界的距离

片段着色器

```
#version 110

varying vec2 uv;

void
main() {
    float border = 0.01;
    float radius = 0.5;
    vec4 color0 = vec4(0.0, 0.0, 0.0, 1.0);
    vec4 color1 = vec4(1.0, 1.0, 1.0, 1.0);

    vec2 m = uv - vec2(0.5, 0.5);
    float dist = radius - sqrt(m.x * m.x + m.y * m.y);

    float t = 0.0;
    if (dist > border)
      t = 1.0;
    else if (dist > 0.0)
      t = dist / border;

    gl_FragColor = mix(color0, color1, t);
} 
```

顶点着色器

```
#version 110

varying vec2 uv;

void
main() {
  gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
  uv = vec2(gl_MultiTexCoord0);
} 
```

它的意思是在纹理坐标 (-0.5, -0.5)x(0.5, 0.5) 的四边形上绘制

# java - 使用 RPC 在服务器上进行多人纸牌游戏

> ID：12945278
> 
> 赞同：2
> 
> 时间：2012-10-18T00:04:58.380
> 
> 标签：java, python, optimization, webserver, multiplayer

基本上我想要一个在服务器上运行的 Java、Python 或 C++ 脚本，监听玩家实例：加入、跟注、下注、弃牌、抽牌等，并且在玩家离开或断开连接时也有超时。

基本上我希望这些动作中的每一个都是一个小请求，以便玩家可以是同一台机器上与游戏服务器通信的进程，也可以是跨网络的机器。

消息传递的安全性不是问题，这是为了学习/研究/娱乐。

我的优先事项：

1.  有一个很好的方案来检测玩家何时断开连接，但也能够在启动/导致失手之前考虑网络延迟等。
2.  速度。我将尽可能快地玩数百万这样的牌。
3.  在共享服务器实例上运行（我可能对端口或需要 root 的东西的访问权限有限）

我的问题：

1.  监听端口或使用套接字或 HTTP 端口 80 apache 监听脚本？（我对这些之间的区别有点模糊）。
2.  有什么好的框架可以解决吗？
3.  消息类型？我在考虑 JSON 或协议缓冲区。
4.  如何让它快速？

谢谢大家 - 只是在寻找一些指示和建议。我认为这是一个很酷的问题，需要学习很多整洁的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:56:07.953

就框架而言，[Ginkgo](http://ginkgo.readthedocs.org/en/latest/index.html)看起来很有希望用于构建网络服务（这就是您正在做的事情）。Python 非常简单，[gevent](http://www.gevent.org/)启用的异步性使您可以执行异步操作，而无需担心回调。gevent 核心还使您可以访问[许多构建块](http://pypi.python.org/pypi?%3Aaction=search&term=gevent&submit=search)。

与其让大量服务通过端口进行通信，不如考虑**1)**一个好的消息队列，如[RabbitMQ](http://www.rabbitmq.com/)或[0mq](http://www.zeromq.org/)，或**2)**一个分布式协调服务器，如[Zookeeper](http://zookeeper.apache.org/)。

话虽如此，您的目标是困难的，尤其是在您不熟悉基础知识的情况下。学习这些基础知识是值得的。

一开始不要担心速度。让它工作，然后让它规模化。当然，您可以采取一些方向，以便将来更容易扩展。[特别是Zookeeper](http://zookeeper.apache.org/)为您提供了易于实现的用于水平扩展的原语（即多个工作人员分担负载）。特别是，请参阅[Zookeeper 食谱书](http://zookeeper.apache.org/doc/current/recipes.html)及其相应的[python 实现](https://kazoo.readthedocs.org/en/latest/api.html)（由[kazoo](https://kazoo.readthedocs.org/en/latest/index.html)提供，一个基于 gevent 的客户端库）。

不要忘记“快速”还意味着优化您自己的开发时间，以加快迭代速度并减少对开发环境的诅咒。所以使用 Python，它可以让你现在快速启动并运行，如果你真的开始绑定 CPU 时间或内存使用，稍后再进行优化。（使用这个特定的应用程序，您更有可能在网络 IO 上进行绑定。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T04:01:22.963

还要别的吗？也许一杯咖啡来回答你的问题:-)

从头开始回答您的问题将需要几本书，其主题范围从基本的 TCP/IP 网络到可扩展架构，但我仍会尝试为您提供一些指导。

问题：

1.  监听端口或使用套接字或 HTTP 端口 80 apache 监听脚本？（我对这些之间的区别有点模糊）。

我敢冒昧地说，如果您不清楚其中每一个的定义，那么设计一个实现“尽可能快地玩数百万手牌”的服务可能有点过头了？但是不要让它阻止你，因为他们说“无知是幸福”。

1.  有什么好的框架可以解决吗？

我认为您的项目非常适合 Node.js。主要原因是 Node.js 相对可扩展，并且擅长隐藏可扩展性所需的复杂性。Node.js 也有缺点，只需 Google 搜索“Node.js 可扩展性批评”。与使用更通用的框架相比，Node.js 的主要观点是可扩展性很困难，没有办法绕过它，而且 Node.js 如此高级和具体，为解决问题提供的选择较少。另一个缺点是 Node.js 是 Javascript，而不是您喜欢的 Java 或 Phyton。

1.  消息类型？我在考虑 JSON 或协议缓冲区。

我认为客户端和服务器之间不会有很多流量，所以我选择 JSON 并不重要，因为它更普遍。

1.  如何让它快速？

真正的问题是如何使其可扩展。运行人类与人类的纸牌游戏并不是计算密集型的，因此您可能会在达到任何计算限制之前耗尽 I/O 容量。通过将负载分散到机器上来克服这些限制。在多人游戏中，常见的做法是拥有一个列表服务器，该列表服务器提供指向相同游戏服务器的链接，每个服务器都有预定义数量的可供玩家使用的插槽。这是 broker-workers 架构的一种变体，broker 机器根据客户端的繁忙程度为客户端分配工作机器。在游戏中，用户希望能够选择他们的服务器，这样他们就可以和他们的朋友一起玩。

有关的：

1.  有一个很好的方案来检测玩家何时断开连接，但也能够在启动/导致失手之前考虑网络延迟等。

由于这是人类时间尺度（秒而不是毫秒），因此客户端应该每 10 秒发送一次 keepalive，例如 30 秒会话超时。keepalive 将是您的应用程序协议中的 JSON 消息，而不是 HTTP，后者较低级别并由框架处理。框架本身应该为您提供 HTTP 1.1 连接管理/池，它允许多个 http 会话（请求/响应）通过同一连接，但不要求客户端始终连接。这是可靠性和速度之间的良好折衷，对于回合制纸牌游戏应该足够好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:31:32.197

老实说，我会从经典的 LAMP 开始。拿一个库存的 Apache 服务器和一个 mysql 数据库，并将您的 Python 脚本放在 cgi-bin 目录中。他们发送和接收 JSON 而不是 HTTP 的事实并没有太大区别。

当然，这显然不会是最灵活或可扩展的解决方案，但它会迫使您尽早面对实际问题。

您将遇到的第一个问题是游戏状态。你声称没有共享状态，但这是不对的——牌组中的牌，桌上的赌注，轮到谁了——这都是状态，在多个玩家之间共享，在服务器上管理。这些命令中的任何一个还能如何工作？因此，您需要某种方式在 CGI 脚本的不同实例之间共享状态。经典的解决方案是将状态存储在数据库中。

当然，您还需要首先处理用户会话。细节取决于您选择的会话管理方案，但最大的问题是如何将断开/超时从较低级别传播到应用程序级别。如果有人把 20 美元放在桌子上然后断开连接会发生什么？您必须考虑所有可能的用例。

接下来，您需要考虑可伸缩性。你想要数以百万计的游戏？好吧，如果有一个包含所有游戏状态的数据库，那么您可以在它前面拥有任意数量的 Web 服务器——John Doe 可能在 server1 上，而 Joe Schmoe 在 server2 上，但它们可以在同一个游戏中。另一方面，你可以为每个服务器建立一个单独的数据库，只要你有办法强制同一游戏中的人们在同一服务器上见面。哪一个更有意义？无论哪种方式，您如何在服务器之间进行负载平衡。（你不仅要让他们都忙，还要避免4个玩家都准备好了，但是他们在3个不同的服务器上，所以他们不能互相玩……）。

这个过程的最终结果将是一个以你希望的 1% 的容量运行的服务器的巨大混乱，你不知道如何维护。但是您会更详细地考虑您的问题空间，并且您还将学习服务器开发的基础知识，从长远来看，这两者可能更重要。

如果你有时间，我接下来会把整个事情扔掉，通过设计一个自定义 TCP 协议从头开始重写所有内容，用 Twisted 之类的方式为它实现一个服务器，将游戏状态保存在内存中，并编写一个简单的自定义代理而不是标准负载均衡器。

# powershell - powershell com 对象 windows 安装程序

> ID：12945282
> 
> 赞同：0
> 
> 时间：2012-10-18T00:05:15.800
> 
> 标签：powershell, com

我想利用以下

`$wi=new-object -com WindowsInstaller.Installer`

如果我这样做，`$wi |gm`我看不到我想要的方法*"Products"*。我想迭代*产品*并显示系统上安装的所有项目的列表。

所以我想...让我做一个`$wi.gettype().invokemember`

不太确定该做什么`$wi.gettype().invokemember("Products","InvokeMethod")` 或某事会产生无法找到过载...

但现在我迷路了。我在别处看过，但我不想创建整个 XML 文件。我应该能够访问 com 对象方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:09:56.610

1.  如果你想在 Windows 中获取已安装程序的列表，有一种原生的 Powershell 方式，它实际上是在幕后使用 WMI：

    ```
    Get-WmiObject Win32_Product 
    ```

    这是来自[Microsoft Scripting Guys](http://blogs.technet.com/b/heyscriptingguy/archive/2011/11/13/use-powershell-to-quickly-find-installed-software.aspx)的相关文章。

    看来这种方法[有一些问题](http://sdmsoftware.com/wmi/why-win32_product-is-bad-news/)，所以最好避免。

    > 当您查询此类时，提供程序的工作方式是它实际上在执行查询时对系统上的每个 MSI 程序包执行 Windows Installer “重新配置”！

2.  我尽力找到了涉及WindowsInstaller com对象的解决方案，但都指向[一篇不再存在的文章](http://abhishek225.spaces.live.com/blog/cns!13469C7B7CE6E911!165.entry)。这是[关于 stackoverflow](https://stackoverflow.com/questions/450953/powershell-windows-installer-com-object)的一个。

3.  另一种解决方案是在 CodePlex 上尝试[psmsi](http://psmsi.codeplex.com/wikipage?title=Examples&ProjectName=psmsi)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-25T15:56:07.903

这是我的代码片段：

```
cls
$msi = New-Object -ComObject WindowsInstaller.Installer
$prodList = foreach ($p in $msi.Products()) {
    try {
        $name = $msi.ProductInfo($p, 'ProductName')
        $ver  = $msi.ProductInfo($p, 'VersionString')
        $guid = $p
        [tuple]::Create($name, $ver, $guid)
    } catch {}
}
$prodlist 
```

# soap - 如何使用 Jetty 的 ContentExchange 发送 SOAP 请求

> ID：12945290
> 
> 赞同：0
> 
> 时间：2012-10-18T00:06:02.993
> 
> 标签：soap, asynchronous, jetty

我正在使用 Jetty 的 ContentExchange 发送异步 http 请求。我想出了如何通过设置 url 来发送简单的请求。但是对于 SOAP 请求，我不确定如何设置 ContentExchange 对象。我搜索但没有找到任何有用的信息。如果您有这样的经验或有一些示例代码可以分享，请告诉我。谢谢！

# php - jquery/ajax 长轮询 php mysql codeigniter

> ID：12945292
> 
> 赞同：1
> 
> 时间：2012-10-18T00:06:16.533
> 
> 标签：php, mysql, ajax, codeigniter, long-polling

对于投票的人来说，这不是一个绝对愚蠢的真正问题。

我已经用谷歌搜索和搜索了一个多月，但我找不到一个准确的例子，它实际上可以使用 php 和 mysql 进行 ajax 长轮询。最好想找到一个使用 mysql 和 codeigniter 的示例 ajax long polling。

任何人都会遇到这个问题并有一个很好的例子，请告诉我。

任何读到这篇文章并认为他们知道我正在寻找的 ajax 长轮询的人，请给我发电子邮件或在此处告诉我。我已经使用 Codeigniter 几乎完成了聊天应用程序，但我在客户端的 jquery/ajax 长轮询部分遇到了问题。我没有发布这个聊天应用程序，因为上次我发布另一个聊天应用程序时，我在这里有另一个开发人员抱怨我发布的代码太多。我准备将此代码发送给任何可以实际提供有效的 ajax 长轮询代码的人。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T01:45:10.787

我想您将聊天消息存储在数据库中？所以一种方法看起来像这样：

最重要的是您需要在第一时间将服务器时间传递给用户，这是获取新聊天消息的关键，所以首先，我们这样做：

```
var time;
$.ajax( {
     url: 'http://yoursite.com/chat/get_time',
     success: function( dataReponse ) {
         time = dataResponse;
    },
    type: 'GET'
} ); 
```

根据 url `"http://yoursite.com/chat/get_time"`，您需要一个控制器`"chat"`，其名称为 的函数`"get_time"`，该函数需要以毫秒为单位响应服务器时间，所以我们这样做：

```
function get_time() {
    echo time();
} 
```

现在我们开始向服务器轮询新的聊天消息，我们这样做：

```
function getNewMsgs() {
    $.ajax( {
        url: 'http://yoursite.com/chat/get_new_msgs',
        type: 'POST',
        // send the time
        data: { time: time },
        success: function( dataResponse ) {
            try {
                dataResponse = JSON.parse( dataResponse );
                // update the time
                time = dataResponse.time;
                // show the new messages
                dataResponse.msgs.forEach( function( msg ) {
                    console.log( msg );
                } );
                        // repeat
                        setTimeout( function() {
                             getNewMsgs();
                        }, 1000 );
            } catch( e ) {
                // may fail is the connection is lost/timeout for example, so dataResponse
                // is not a valid json string, in this situation you can start this process again
            }
        }
    } );
} 
```

comebacj 到`"chat"`控制器，我们需要对`"get_new_msgs"`函数进行编码：

```
function get_new_msgs() {

    $this->load->model( 'chat_msg' );
    echo json_encode( array(
        'msgs' => $this->chat_msg->start_polling(),
        // response again the server time to update the "js time variable"
        'time' => time() 
    ) );
} 
```

在`"chat_msg"`模型中，我们对函数进行编码`"start_polling"`：

```
function start_polling() {
    // get the time
    $time = $this->input->post( 'time' );
    // some crappy validation
    if( !is_numeric( $time ) ) {
        return array();
    }

    $time = getdate( $time );
    // -> 2010-10-01
    $time = $time['year'] '-' + $time['mon'] + '-' + $time['mday'];

    while( true ) {

        $this->db->select( 'msg' );
        $this->db->from( 'chat_msg' );
        $this->db->where( 'time >=', $time );
        $this->db->order_by( 'posted_time', 'desc' );
        $query = $this->db->get();

        if( $query->num_rows() > 0 ) {
            $msgs = array();
            foreach( $query->result() as $row ) {
                $msgs[] = $row['msg'];
            }
            return $msgs;
        }

        sleep( 1 );
    }
} 
```

收到警告，我在脑海中编写了这段代码，我现在没有一个网络服务器来测试这段代码。

# jquery - jquery在页面加载时弹出

> ID：12945294
> 
> 赞同：0
> 
> 时间：2012-10-18T00:06:24.497
> 
> 标签：jquery, html, css

[http://jsfiddle.net/nVZEB/6/](http://jsfiddle.net/nVZEB/6/)

单击此按钮应显示一个弹出窗口

****测试弹出****

**但我在页面加载本身的这个问题上看到了这个......如何隐藏它，它应该只显示在弹出窗口中**

 **```
$(function() {

var popup = false;

$(".open").click(function(){
    alert(123);
    if(popup === false){
        $("#overlayEffect").fadeIn("slow");
        $(this).parent().find('.popupContainer').fadeIn("slow");
        $(this).parent().find('.close').fadeIn("slow");
        center();
        popup = true;
    }    
    });

    $(".close").click(function(){
        hidePopup();
    });

    $(".overlayEffect").click(function(){
        hidePopup();
    });

function center(){
    var windowWidth = document.documentElement.clientWidth;
    var windowHeight = document.documentElement.clientHeight;
    var popupHeight = $(".popupContainer").height();
    var popupWidth = $(".popupContainer").width();
    $(".popupContainer").css({
        "position": "absolute",
        "top": 85,
        "left": windowWidth/2-popupWidth/2
    });

    }
function hidePopup(){
    if(popup===true){
        $(".overlayEffect").fadeOut("slow");
        $(".popupContainer").fadeOut("slow");
        $(".close").fadeOut("slow");
        popup = false;
    }
}

} ,jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:10:10.407

看起来你`hidden`在 div 上有一个类`popupContainer`，但你没有任何样式。

尝试将此添加到您的样式中：

```
.hidden {
    display: none;
} 
```**

# matlab - 使用 Matlab 更新 MS Access 时出错

> ID：12945299
> 
> 赞同：2
> 
> 时间：2012-10-18T00:07:29.857
> 
> 标签：matlab, ms-access

我正在尝试从 Matlab 的 MS Access 数据库中导入数据，但出现以下错误：

使用数据库/获取时出错（第 37 行）[Microsoft][ODBC Microsoft Access Driver] 无法完成查询。查询结果的大小大于数据库的最大大小（2 GB），或者磁盘上没有足够的临时存储空间来存储查询结果。

我有 4GB 的 RAM 和 60GB 的可用硬盘空间，所以我认为这不是空间问题。数据库为 1022Mb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:16:47.243

您是否有机会要求大量数据？也许是一些不错的外连接，或者是表的多个组合？

我的猜测是，如果这是导致问题的原因，您应该将查询分成几部分，它会起作用。

# objective-c - MacOSX 声音资源列表

> ID：12945300
> 
> 赞同：3
> 
> 时间：2012-10-18T00:07:35.813
> 
> 标签：objective-c, macos, xcode4

我正在寻找一些将当前 MacOSX 系统上每个可用声音资源的名称输出到 NSLog 的 Objective-C 代码。我做了很多谷歌搜索。我错过了一些关键术语，因为搜索没有发现任何有用的东西。只要我知道[如何在 Mac OS 中播放声音？](https://stackoverflow.com/questions/7100607/how-do-i-play-a-sound-in-mac-os).

```
// Assumes #import <AppKit/AppKit.h> and the framework has been added. 
NSSound *sound = [[NSSound alloc] initWithContentsOfFile:    [[NSBundle mainBundle] pathForResource:@"Fark" ofType:@"mp3"] byReference:NO];
[sound play];
[sound release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:02:12.180

查看文档`+[NSSound soundNamed:]`，您会发现该方法将在查看应用程序的主包后搜索以下目录：

```
~/Library/Sounds
/Library/Sounds
/Network/Library/Sounds
/System/Library/Sounds 
```

因此，这些可能是寻找机器上可用系统声音的好地方。

"every available Sound resource on the current MacOSX system" is a rather tall order, depending on what you mean. The system sounds will likely be found in the directories described above, but there may also be sounds inside applications that you might or might not consider to be part of the operating system.

# spring - 为什么在 WebLogic 中使用 JPA 时会出现意外的 EntityManagerFactory？

> ID：12945305
> 
> 赞同：1
> 
> 时间：2012-10-18T00:08:11.493
> 
> 标签：spring, spring-mvc, intellij-idea, jpa-2.0, weblogic-10.x

我正在尝试创建一个 Spring MVC Web 应用程序（Spring Framework 3.0.5）。我正在使用 IntelliJ IDEA 11.1.3 在 WebLogic Server (10.3.4) 上部署我的应用程序。我的一个网页尝试使用 JPA 将一些数据存储在数据库中。我的 persistence.xml 指定：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="LeaveSchedulerJPA" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.engilitycorp.leavetracker.jpa.UserRole</class>
    <properties>
        <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:xe "/>
        <property name="javax.persistence.jdbc.user" value="leavescheduler"/>
        <property name="javax.persistence.jdbc.password" value="xxx"/>
        <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.OracleDriver"/>
    </properties>
    </persistence-unit>
</persistence> 
```

但是，当我查看调试器时，我的 EntityManagerFactory 显示为`org.apache.openjpa.persistence.EntityManagerFactoryImpl`，当我调用 时`createEntityManager`，我得到一个`org.apache.openjpa.persistenceArgumentException`声明“必须在 ConnectionDriverName 属性中指定 JDBC 驱动程序或数据源类名”。

在我的新手看来，persistence.xml 可能没有得到处理。我试过把它放在`(project)/src/main/resources/META-INF`and`(project)/src/main/resources/META-INF/spring`中，结果同样不幸。

我不致力于使用 Hibernate 持久性；但是，我确实想使用实现 JPA 2 的东西，而且我很难配置我的环境。例如，我几乎不知道 openjpa 是如何参与我的应用程序的。我想它可能是某些东西的默认 JPA 提供程序（WebLogic？，IntelliJ IDEA？）。任何帮助/建议将不胜感激。

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

根上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">
</beans> 
```

servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.engilitycorp.leavetracker" />

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T22:46:31.443

WebLogic 10.3.4 与 Java EE 5 兼容，并附带 JPA 1.0 实现：OpenJPA 和 TopLink。

根据 WebLogic 文档（[http://docs.oracle.com/cd/E17904_01/web.1111/e13720/using_toplink.htm#CIHDJHHI](http://docs.oracle.com/cd/E17904_01/web.1111/e13720/using_toplink.htm#CIHDJHHI)），它也可以与 JPA 2.0 一起使用，但只能在应用补丁后使用。只需按照说明进行操作（修补似乎很简单，但我没有测试它）。

正如 user1654209 在第一个答案中所写的那样，您可能也可以使用自己的 JPA 2.0 提供程序而无需打补丁。但是 WebLogic 提供的 JPA 1.0 类可能会造成阻碍，因为它们是由更高级别的类加载器加载的，并且优先于打包在 WAR 文件中的类。为防止此类行为，您有两种选择：

*   使用包含以下行的文件将应用程序的 WAR 打包到 EAR 存档`META-INF/weblogic-application.xml`中（您还必须包含标准`META-INF/application.xml`文件）：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <weblogic-application xmlns="http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd">
      <prefer-application-packages>
        <package-name>javax.persistence.*</package-name>
      </prefer-application-packages>
    </weblogic-application> 
    ```

*   使用以下行将文件添加`WEB-INF/weblogic.xml`到您的 WAR 存档中：

    ```
    <?xml version='1.0' encoding='UTF-8'?>
    <weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app">

      <container-descriptor>
        <prefer-web-inf-classes>true</prefer-web-inf-classes>
      </container-descriptor>
    </weblogic-web-app> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T09:56:37.780

您需要在 context.xml 中配置一个 entityManagerFactory bean。Heres 是一个使用 eclipselink 作为 JPA 提供者的例子

```
<bean class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        id="dataSource">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        id="entityManagerFactory">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean id="jpaAdapter"
                class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            </bean>
        </property>
    </bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T01:27:47.837

仅设置提供程序是不够的。您需要设置数据库连接数据，如 jdbc url、用户名和密码。你设置了吗？如前所述，您还需要设置 jdbc 类名，并且 jdbc 驱动程序需要在您的类路径中。

如果您在容器上运行它并想在 weblogic 中配置数据源，则可以从 hibernate cfg 中引用 jndi 数据源，但您需要进入 weblogic 控制台并在那里创建数据源和连接池。

查看有关如何在 persistence.xml 中设置 JNDI 名称的休眠文档

# sql - 如何根据布尔列中的值返回 sql 结果

> ID：12945306
> 
> 赞同：-1
> 
> 时间：2012-10-18T00:08:21.867
> 
> 标签：sql, sql-server-2008, tsql

这是场景。我有一个 SQL Server 2008 表 - 产品 - 有 2 列：id 和 IsNotValid。数据看起来像这样：

```
id     IsNotValid
1        0
1        0
1        1
2        0
2        0
3        1
3        1 
```

我想要一个 SQL 语句，该语句将返回一个结果集，该结果集将返回 id=2 的所有记录 (2) - 在这种情况下，id=2 的所有 IsNotValid 值都是 0。id=1 不应作为一个返回其 IsNotValid 记录数为 1。对于 id=3 类似。数据类型有：id（int）、IsNotValid（bit）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:36:01.090

这里有一些方法

```
Declare @t table (Id Int, IsnotValid Bit)
Insert Into @t Values(1,0),(1,0),(1,1),(2,0),(2,0),(3,1),(3,1) 
```

**方法一：**

```
SELECT * FROM @t WHERE Id NOT IN (SELECT Id FROM @t WHERE IsnotValid=1) 
```

**方法二：**

```
SELECT * 
FROM @t T1 
WHERE IsnotValid = 0 
AND NOT EXISTS ( 
    SELECT *  
    FROM @t T2  
    WHERE T1.Id = T2.Id 
    AND T2.IsnotValid <> 0) 
```

**方法3：**

```
SELECT * 
FROM @t T1 
WHERE IsnotValid = 0 
AND Id NOT IN ( 
    SELECT Id  
    FROM @t T2  
    WHERE T2.IsnotValid <> 0) 
```

**方法4：**

```
SELECT T1.* 
FROM @t T1 
LEFT OUTER JOIN @t T2 ON T1.Id = T2.Id AND T2.IsnotValid <> 0 
WHERE T1.IsnotValid = 0 
AND T2.Id IS NULL 
```

**方法5：**

```
select Id,IsnotValid
from (select t.*, SUM(CAST(IsnotValid AS INT)) over (partition by Id) as sumflag 
      from @t t 
     ) t 
where sumflag = 0 
```

**方法6：**

```
;with cte as( 
    Select  
        Id = Case when x.Id is null then y.Id else x.Id end  
        ,x.CountFor0 
        ,y.CountFor1 
    From  
            (Select Id,CountFor0 = count(*) 
            from @t  
            where IsnotValid = 0 
            group by Id )x 
    Full Join  

            (Select Id,CountFor1 =count(*) 
            from @t  
            where IsnotValid = 1 
            group by Id )y 
    On x.Id = y.Id) 

    Select Id 
    From cte 
    where CountFor1 is null 
```

**结果**

```
Id  IsnotValid
2   0
2   0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T00:13:11.003

这应该会给你你需要的结果：

```
SELECT * FROM Products WHERE id NOT IN
(SELECT id FROM Products WHERE IsNotValid = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T00:18:01.687

如果你尝试了一些东西并展示了你尝试过的东西，那就太好了。

因为 0 代表“好”而 1 代表“坏”，我会这样做

```
SELECT id FROM yourtable GROUP BY id HAVING SUM( IsNotValid ) = 0 
```

这将仅列出所有 IsNotValid 为零的这些 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T00:20:53.183

这是另一种方法：

```
-- using CTE and a join
with MyCte as
(
select id from Products 
where IsNotValid = 1
group by id
)
select a.* from Products a
    left join MyCte b
    on a.id = b.id
where b.id is null 
```

# jquery - 悬停时的 jQuery 拖放闪烁（仅限 Webkit）

> ID：12945307
> 
> 赞同：7
> 
> 时间：2012-10-18T00:08:34.623
> 
> 标签：jquery, drag-and-drop

## 问题

我刚刚完成了一项功能，用户可以将文件拖到浏览器中并放在支持的文件上传插件上，该插件会处理拖放。

然而，为了给用户一个提示，他们甚至可以在第一时间放下东西，我已经实现了一个`dragover`事件来显示`div`类似于“Drop Here”的内容。反过来，这会隐藏`div`具有“选择文件...”按钮的按钮，并替换它，直到用户停止拖动。

但似乎，当我实现这个时，在目标区域上拖动会导致闪烁。要清楚：

*   `div`显示“选择文件”界面。
*   拖动的项目（或拖动的选定文本）；显示“放在这里”。
*   项目拖到“放在这里”区域；闪烁开始。

此外：

*   Opera 12 或 Firefox 16 没有问题。
*   这个问题在 Chrome 23 和 Safari 5 中非常明显。
*   该问题部分存在于 IE 9 中（IE 10 未经测试）；它闪烁约 5 秒钟，然后停止。

## [jsFiddle](http://jsfiddle.net/ezCEG/)

*（警告：小提琴非常粗糙。）*

只需选择一些文本并将其拖到蓝色框上，您就会看到会发生什么；很明显它不应该表现出的行为。

### 小提琴中使用的代码

```
var $dropTarget = $("#container");
$(document).bind("dragover", function(e) {
    if ($dropTarget.hasClass("highlight"))
        return;

    $dropTarget.addClass("highlight");
    $dropTarget.find("[name='drop']").show();
    $dropTarget.find("[name='drag']").hide();
}).bind("dragleave drop", function(e) {
    if (!$dropTarget.hasClass("highlight"))
        return;

    $dropTarget.removeClass("highlight");
    $dropTarget.find("[name='drop']").hide();
    $dropTarget.find("[name='drag']").show();
});​ 
```

## 我的解决方案...？

老实说，我不知道该尝试什么。没有关于`dragover`or行为的大量文档`dragleave`，我什至不知道为什么会这样，所以我什至无法开始调试它。我觉得`dragover`应该只触发一次，但即使在屏幕上拖动也会一遍又一遍地触发它。

我查看了谷歌图片和谷歌联系人的拖放行为，但他们的代码被完全缩小且不可读，我什至找不到任何指定的“拖动”行为。

那么，这种看似奇怪的行为有什么解决办法吗？如果这是我怀疑的 WebKit 中的错误，是否有一些出色的解决方法和/或我可以使用的 hack？

感谢大家的时间！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T01:59:01.857

经过一个多小时的搜索，我找到[了一个有类似问题的人](https://stackoverflow.com/questions/7110353/html5-dragleave-fired-when-hovering-a-child-element)。似乎 Chrome 和 Safari（至少 5 个）`dragleave`在输入子元素时触发（并且似乎在对该元素进行任何更改时触发，包括显示/隐藏子元素）。

**解决方案是检查是否`pageX`和`pageY`等于`0`inside `dragleave`（但*不是* `drop`）。**

```
var $dropTarget = $("#container");
$(document).bind("dragenter", function(e) {
    if (e.target == this) {
         return;
    }

    $dropTarget.addClass("highlight");
    $dropTarget.find("[name='drop']").show();
    $dropTarget.find("[name='drag']").hide();
}).bind("dragleave", function(e) {
    if (e.originalEvent.pageX != 0 || e.originalEvent.pageY != 0) {
        return false;
    }

    // Could use .trigger("drop") here.
    $dropTarget.removeClass("highlight");
    $dropTarget.find("[name='drop']").hide();
    $dropTarget.find("[name='drag']").show();
}).bind("drop", function(e) {
    $dropTarget.removeClass("highlight");
    $dropTarget.find("[name='drop']").hide();
    $dropTarget.find("[name='drag']").show();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-14T06:15:44.897

我有一些使用拖放文件的项目，并且在我的项目中发现了相同的问题，这是您的问题的解决方案并在您的案例中进行了测试，这是 100% 的工作

这是神奇的代码：

```
<style type="text/css">
    .drag * {
        pointer-events: none;
    }
</style>

<div class="drag" id='container'>
<div name='drop' style='display: none;'>DROP HERE</div>
<div name='drag'>DRAG HERE</div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-30T15:09:35.757

我发现使用 Eric 的解决方案，如果我在使用此解决方案后将 Win10 Google Chrome 上的屏幕拖出（到另一个窗口），它对我不起作用。将条件更改为 AND 反而起作用了。

```
var $dropTarget = $("#container");
$(document).bind("dragenter", function(e) {
    if (e.target == this) {
         return;
    }

    $dropTarget.addClass("highlight");
    $dropTarget.find("[name='drop']").show();
    $dropTarget.find("[name='drag']").hide();
}).bind("dragleave", function(e) {
    if (e.originalEvent.pageX != 0 || e.originalEvent.pageY != 0) {
        return false;
    }

    // Could use .trigger("drop") here.
    $dropTarget.removeClass("highlight");
    $dropTarget.find("[name='drop']").hide();
    $dropTarget.find("[name='drag']").show();
}).bind("drop", function(e) {
    $dropTarget.removeClass("highlight");
    $dropTarget.find("[name='drop']").hide();
    $dropTarget.find("[name='drag']").show();
});​ 
```

# mysql - 具有非自动增量主键的 Simple.Data (uuid_short)

> ID：12945314
> 
> 赞同：0
> 
> 时间：2012-10-18T00:09:24.163
> 
> 标签：mysql, sql, simple.data

我正在使用[Simple.Data](https://github.com/markrendle/Simple.Data#readme)作为我的 ASP.NET / MySQL 网站的 Micro-ORM。我已经知道当主键是自动增量 Int 时如何插入数据，但是当我需要在Bigint 列上使用[uuid_short()函数生成想法时，如何插入数据？](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_uuid-short)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:08:39.663

您可以使用触发器来设置列值，如以下答案所示：[我可以在 MySql 中使用函数作为默认值吗？](https://stackoverflow.com/questions/270309/can-i-use-a-function-for-a-default-value-in-mysql)

或者您可以在应用程序代码中生成一个值并正常插入。

# web-services - 如何跟踪发送的 WebServices 响应进度

> ID：12945315
> 
> 赞同：0
> 
> 时间：2012-10-18T00:09:31.937
> 
> 标签：web-services, jersey, inputstream, tracking, progress

我在客户端应用程序上使用 HTTPClient 向我的 Jersey RESTful Web 服务发送 GET 请求。跟踪服务器端接收到多少字节的最佳方法是什么？我应该在下面的 while 循环中进行 Web 服务调用，以在接收到一定数量的字节直到完成后通知服务器吗？

```
InputStream inputStream = resp.getEntity().getContent();

byte data[] = new byte[8096];
int count;
int total = 0;

while ((count = inputStream.read(data, 0, 8096)) != -1) {
               //best way to notify server of received bytes?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:51:28.703

是的，那就是这样。但是您应该异步执行此操作（即通过在单独的线程上通知服务器），这样您就不会因为等待服务器对进度通知的响应而减慢文件读取速度。

# java - 如何将子类参数传递给超类私有变量？

> ID：12945320
> 
> 赞同：2
> 
> 时间：2012-10-18T00:10:14.293
> 
> 标签：java, parameters, constructor, superclass

我对如何从新对象实例获取参数以也流入超类以更新超类中的私有字段感到困惑。

所以我在一个高级Java类中，我有一个需要“Person”超类和扩展Person的“Student”子类的作业。

Person 类存储学生姓名，但接受 Person 姓名的是 Student 类构造函数。

假设 Person 中没有任何方法可以更新变量方法...例如 subClassVar = setSuperClassVar();

前任：

```
public class Person
{
     private String name; //holds the name of the person
     private boolean mood; //holds the mood happy or sad for the person
     private int dollars; //holds their bank account balance
}

class Student extends Person //I also have a tutor class that will extend Person as well
{
     private String degreeMajor //holds the var for the student's major they have for their degree

     Public Student(String startName, int startDollars, boolean startMood, String major)
     {
          degreeMajor = major;  // easily passed to the Student class
          name = startName; //can't pass cause private in super class?
          mood = startMood; //can't pass cause private in super class?
          dollars = startDollars; // see above comments
          // or I can try to pass vars as below as alternate solution...
          setName() = startName; // setName() would be a setter method in the superclass to...
                                 // ...update the name var in the Person Superclass. Possible?
          setMood() = startMood; // as above
          // These methods do not yet exist and I am only semi confident on their "exact"...
          // ...coding to make them work but I think I could manage.
     }   
} 
```

关于我被允许对 Person 的超类进行多少更改，家庭作业的说明有点模糊，所以如果你们都相信一个良好的、可靠的行业接受的解决方案涉及更改超类，我会这样做。

我看到的一些可能的例子是让 Person 类中的私有变量“受保护”，或者在 person 类中添加 setMethods() 然后在子类中调用它们。

我也对如何将子类构造函数参数传递给超类的一般概念教育持开放态度……如果可能的话，在代码的构造函数部分正确地做。

最后，我确实搜索过，但大多数类似的问题都是非常具体和复杂的代码......我找不到像上面的例子那样直接的东西......同样由于某种原因，论坛帖子没有将我所有的代码聚集​​在一起对于上面令人困惑的阅读，我们深表歉意。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:17:41.827

首先，您需要定义一个构造函数`Person`：

```
public Person(String startName, int startDollars, boolean startMood)
{
    name = startName;
    dollars = startDollars;
    mood = startMood;
} 
```

`Student`然后，您可以使用以下方法从构造函数向上传递数据`super(...)`：

```
public Student(String startName, int startDollars, boolean startMood, String major)
{
    super(startName, startDollars, startMood);
    . . .
} 
```

或者，您可以在类中定义 setter并从构造函数中`Person`调用它们。`Student`

```
public class Person
{
     private String name; //holds the name of the person
     private boolean mood; //holds the mood happy or sad for the person
     private int dollars; //holds their bank account balance

     public void setName(String name) {
         this.name = name;
     }
     // etc.
} 
```

# doctrine-orm - 如何从 Doctrine2 中的分页`findBy` 中获取 *total* 结果数？

> ID：12945327
> 
> 赞同：1
> 
> 时间：2012-10-18T00:10:52.220
> 
> 标签：doctrine-orm, pagination

我正在尝试查看是否有一种方法可以在不编写自定义 DQL 的情况下使用 Doctrine2 进行分页。我发现该[`findBy()`](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityRepository.php#L143)函数返回了我想要的结果集，但是我缺少一条信息以在 UI 上正确分页，即结果*可能*返回的记录*总数。*

 *我真的希望这是可能的，因为它是一个“简单”的单线。

```
 $transactions = \Icarus\Entity\ServicePlan\Transaction::getRepository()->findBy(array('user' => $userId, 'device' => $device), null, $transactionsPerPage, $currentPage); 
```

有谁知道/如果我可以从`findBy()`函数中获取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:26:09.003

简短的回答，不。您实际上是在运行此查询：

```
SELECT * FROM transaction WHERE user = $userId AND device = "$device" LIMIT $currentPage, $transactionPerPage; 
```

通过指定一个限制，查询只会从您的偏移量返回该限制内的行数。因此，如果`$transactionPerPage = 10`，该查询返回的总行数将是`10`。

假设总计数有些静态，我建议首先对第一页请求上的总匹配文档进行计数并缓存该结果（或存储在会话中），因此您只需要获取总计数一次。

**编辑：**计数查询示例，仅使用普通 php 会话：

```
if ( !isset( $_SESSION['transactionCount'] ) ) 
{
    $transactionCount = $em->createQuery('SELECT COUNT(*) FROM \Icarus\Entity\ServicePlan\Transaction WHERE user = ?1 AND device = ?2')
        ->setParameters( array( 1 => $userId, 2 => $device ) )
        ->getSingleScalarResult();
    $_SESSION['transactionCount'] = $transactionCount;
} 
```

**edit2：**如果你真的不想使用 DQL，你可以在`.findBy()`没有偏移和限制的情况下运行你的，并对结果执行 sizeof：

```
$transactions = \Icarus\Entity\ServicePlan\Transaction::getRepository()->findBy(array('user' => $userId, 'device' => $device) );
$totalTransactions = sizeof( $transactions ); 
```

但是这方面的性能不会那么好，因为您实际上是在获取所有对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T06:06:40.130

你试过这个吗？

```
$queryBuilder->select('p.id, p.name')
                 ->from('\Api\Project\Entity\Project', 'p')
                 ->where('p.status = :status')
                 ->setParameter('status', 1)
                 ->orderBy('p.createdDate', 'asc')
                 ->setFirstResult($page)
                 ->setMaxResults($limit); 
```*

# playorm - playORM中是否有UUID类型的转换器？

> ID：12945338
> 
> 赞同：0
> 
> 时间：2012-10-18T00:12:57.883
> 
> 标签：playorm

我想映射一个 UUID 类型的字段。我生成它如下：

导入 java.util.UUID；UUID id = UUID.randomUUID();

使用这个有什么问题吗？我可以为此使用什么转换器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:55:29.523

随机！=唯一。在非常非常高的数字下，您可能会发生冲突。有些人对此表示满意....我更愿意避免它，因为即使概率可能接近十亿分之一，如果发生这种情况，调试它就是一个 PITA。

此外，在非常非常非常高的数字下，您更有可能发生碰撞。

阅读此链接

[http://johannburkard.de/blog/programming/java/Java-UUID-generators-compared.html](http://johannburkard.de/blog/programming/java/Java-UUID-generators-compared.html)

基本上，我看过他的代码一次并且是唯一的，它实际上是该计算机内的mac地址+唯一时间戳，因此不允许两个线程获取相同的时间戳。

事实上，如果你使用@NoSqlId，它实际上是使用 timeA + hostname 的唯一计数器，因此它在一个集群中是唯一的。一个客户端使用 a1、a2、a3 的主机名来保持主键简洁明了。我以前从没想过，但是如果我在键上添加@NoSqlIndex，我可以查询键的范围并且它们是按时间顺序排列的。

我可能应该创建另一个基于时间的生成器，以便人们可以将其用作主键和查询时间范围（如果这对您有用，请添加一个问题，因为我按照客户需要而不是我认为需要的顺序工作）。

以上为回答你的问题。您可以创建转换器，当从 byte[] 到 UUID 时，您可以使用

```
public static UUID nameUUIDFromBytes(byte[] name) 
```

但是，您需要执行与 Java 源代码中的该功能相反的操作

```
public static UUID nameUUIDFromBytes(byte[] name) {
    MessageDigest md;
    try {
        md = MessageDigest.getInstance("MD5");
    } catch (NoSuchAlgorithmException nsae) {
        throw new InternalError("MD5 not supported");
    }
    byte[] md5Bytes = md.digest(name);
    md5Bytes[6]  &= 0x0f;  /* clear version        */
    md5Bytes[6]  |= 0x30;  /* set to version 3     */
    md5Bytes[8]  &= 0x3f;  /* clear variant        */
    md5Bytes[8]  |= 0x80;  /* set to IETF variant  */
    return new UUID(md5Bytes);
} 
```

谢谢，院长

# python - 这是验证 Django 模型字段的方法吗？

> ID：12945339
> 
> 赞同：37
> 
> 时间：2012-10-18T00:13:00.707
> 
> 标签：python, django, django-models

据我了解，当一个人创建 Django 应用程序时，数据在插入模型实例之前由表单验证，然后将其写入数据库。但是，如果我想在数据模型层创建一个额外的保护层，我所做的是否低于当前的“最佳实践”？我试图确保审稿人的姓名不能省略，也不能留空。我是否应该像我在这里所做的那样在“干净”方法中放置任何自定义验证，然后让“保存”调用“full_clean”来调用“干净”？如果没有，首选方法是什么？谢谢。

```
class Reviewer(models.Model):
    name = models.CharField(max_length=128, default=None)

    def clean(self, *args, **kwargs):
        if self.name == '':
            raise ValidationError('Reviewer name cannot be blank')
        super(Reviewer, self).clean(*args, **kwargs)

    def full_clean(self, *args, **kwargs):
        return self.clean(*args, **kwargs)

    def save(self, *args, **kwargs):
        self.full_clean()
        super(Reviewer, self).save(*args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-18T01:07:18.347

`full_clean`首先，你不应该像你所做的那样覆盖。来自[full_clean 上的 django 文档](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.full_clean)：

> **`Model.full_clean(exclude=None)`**
> 此方法按该顺序调用`Model.clean_fields()`、`Model.clean()`和`Model.validate_unique()`，并引发`ValidationError`具有`message_dict`包含来自所有三个阶段的错误的属性的 a。

所以该`full_clean`方法已经调用了`clean`，但是通过覆盖它，您已经阻止它调用其他两个方法。

其次，调用方法`full_clean`是`save`一种权衡。请注意，`full_clean`在验证模型表单时已经调用了它，例如在 Django 管理员中。因此，如果您调用`full_clean`该`save`方法，则该方法将运行两次。

通常不期望 save 方法引发验证错误，有人可能会调用`save`但不会捕获结果错误。但是，我喜欢您调用`full_clean`而不是在 save 方法本身中进行检查 - 这种方法允许模型表单首先捕获问题。

最后，您的`clean`方法会起作用，但您实际上可以在模型字段本身中处理您的示例案例。定义你`CharField`的

```
name = models.CharField(max_length=128) 
```

该[`blank`](https://docs.djangoproject.com/en/dev/ref/models/fields/#blank)选项将默认为 False。如果该字段为空，`ValidationError`则运行时会引发a `full_clean`。放入`default=None`your`CharField`不会造成任何伤害，但是当您实际上不允许`None`作为值时，它会有点令人困惑。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T22:48:10.593

在考虑了 Alasdair 的回答并进行了补充阅读之后，我现在的感觉是，Django 的模型并不是为了像我试图做的那样在仅模型的基础上进行验证。可以进行此类验证，但要付出一定的代价，并且需要以非预期的方式使用验证方法。

相反，我现在相信除了可以直接输入到模型字段声明中的约束（例如“unique=True”）之外的任何约束都应该作为 Form 或 ModelForm 验证的一部分来执行。如果想要防止通过任何其他方式（例如在 Python 解释器中工作时通过 ORM）将无效数据输入到项目的数据库中，那么验证应该在数据库本身内进行。因此，验证可以在三个层次上实现： 1）首先，通过数据库中的 DDL 实现所有约束和触发器；2) 实现对模型字段可用的任何约束（例如“unique=True”）；3) 实现所有其他约束和验证，这些约束和验证反映了您的表单和模型表单中的数据库级约束和触发器。采用这种方法，任何表单验证错误都可以重新显示给用户。如果程序员通过 ORM 直接与数据库交互，他/她将直接看到数据库异常。

有人想吗？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-26T02:04:24.530

在我的模型上捕获预保存信号确保 clean 将被自动调用。

```
from django.db.models.signals import pre_save

def validate_model(sender, **kwargs):
    if 'raw' in kwargs and not kwargs['raw']:
        kwargs['instance'].full_clean()

pre_save.connect(validate_model, dispatch_uid='validate_models') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-27T00:05:00.857

感谢@Kevin Parker 的回答，非常有帮助！

您的应用程序中的模型通常在您定义的模型之外，因此这里有一个修改版本，您可以使用此修改版本将此行为范围仅限于您自己的模型或根据需要的特定应用程序/模块。

```
from django.db.models.signals import pre_save
import inspect
import sys

MODELS = [obj for name, obj in
    inspect.getmembers(sys.modules[__name__], inspect.isclass)]

def validate_model(sender, instance, **kwargs):
    if 'raw' in kwargs and not kwargs['raw']:
        if type(instance) in MODELS:
            instance.full_clean()

pre_save.connect(validate_model, dispatch_uid='validate_models') 
```

此代码将针对执行它的模块内定义的任何模型运行，但如果需要，您可以将其调整为更严格的范围或成为一组模块/应用程序。

# mp3 - 读取 mp3 文件进行游戏开发

> ID：12945341
> 
> 赞同：1
> 
> 时间：2012-10-18T00:13:23.080
> 
> 标签：mp3

我目前正在创建一个游戏。我的游戏将使用用户发送的 mp3 文件中的音乐，以决定放置物品的位置、关卡移动的速度等。我对此很陌生，我一直在阅读有关 mp3 的信息。目前我已经找到了我正在使用的 mp3 文件中的所有帧。我真的不知道从这里去哪里。我想做的是在特定时间（比如每秒）测量音乐声波的频率，然后根据该频率，做我需要的游戏。我不知道我是否应该解码 mp3，这看起来需要做很多工作，如果我没有 2 或者我可以读取帧中的字节并在没有的情况下转换它们，我不想这样做解码任何东西。我正在使用游戏引擎 FlatRedBall 在 c# 中开发它。我没有使用任何库。我也打算卖这个游戏，所以如果我能避免的话，我想避免使用其他人的代码。请有人帮助我，我只需要一个从这里出发的方向。我知道如何解析标题并计算帧长度，我只是不知道下一步我想做什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:42:27.780

*注意：我打算将此作为评论发布，但它很快就变得太大了。:)*

编写自己的 MP3 编码器/解码器可能需要付出很大的努力。可能会更好地花在游戏本身上的努力。因此，有可能，我会尽一切努力尝试使用开源库。

也就是说，大多数优秀的 MP3 库都是 LGPL/GPL 许可的。这意味着您*可以*在商业环境中使用它，只要您**动态**链接到它。此外，从 1.2.12 版开始，SDL Mixer 库支持 MP3，并且在更宽松的 zlib 许可下，但由于您提到 C#，我不知道是否有稳定和最新的绑定可用。此外，由于您的项目一开始不是用 SDL 编写的，因此可能很难集成它。

此外，正如@pro_metedor 所暗示的那样，也许使用更开放的格式可能有助于解决许可问题。一般来说，OGG 比 MP3 实现了更好的压缩，这对于下载大小、带宽/资源使用等方面来说是一个加分项。

只是货比三家，尽量灵活一点。我相信你会找到好东西的！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:15:32.420

将您的音乐转换为免费的 .ogg 格式，并使用免费库来播放它。

# batch-file - 通过批处理文件启动EXE

> ID：12945347
> 
> 赞同：0
> 
> 时间：2012-10-18T00:14:05.527
> 
> 标签：batch-file, cmd

所以，我正在尝试设置一个基本脚本来安装 WinRAR（作为我的测试，其他人稍后），我似乎无法让它工作。这是我所拥有的：

```
@ECHO OFF

    IF EXIST "C:\Program Files (x86)\WinRAR" GOTO End
    IF EXIST "C:\Program Files\WinRAR" GOTO End

    IF DEFINED ProgramFiles(x86) (
        START C:\WinRAR_4.20_(x64).exe
    ) ELSE (
        START C:\WinRAR_4.20_(x86).exe
    )

:End

    PAUSE 
```

前两项`EXIST`检查工作正常，但我无法让`START`命令工作。如果我只是在 CMD 窗口中输入它，它会启动安装程序，但它不会从批处理文件中执行它。

有人可以指出我搞砸的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:27:46.313

问题出在文件名上。去掉文件名中的括号，它应该可以正常工作。WinRAR_4.20_x64.exe 和 WinRAR_4.20_x86.exe

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T00:29:56.703

该`start`命令需要一个字符串作为窗口的标题，例如，

`start "" apples.exe`

将以`apples.exe`控制台窗口的标题开头

 `目前您正在告诉启动脚本控制台窗口的标题应该是： `C:\WinRAR_4.20_(x64).exe`

您应该输入以下内容：

`start "" "C:\WinRAR_4.20_(x64).exe"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T11:15:13.250

它仅在第一次使用。没有此选项。

1.  start "" C:\Program Files (x86)\MSI\Command Center\CommandCenter.exe 2)START /d start "C:\Program Files (x86)\MSI\Command Center" CommandCenter.exe`

# admin - 创建液体合成器应用程序

> ID：12945348
> 
> 赞同：0
> 
> 时间：2012-10-18T00:14:06.617
> 
> 标签：admin, shopify

我是 Shopify 的新开发人员，但开发网站已有 10 多年了。刚刚获得我的合作伙伴帐户和私人应用程序设置。一直在查看网站上的可用文档，并不确定是否允许应用程序存在于用户的 shopify 网站或管理员中。这可能吗？到目前为止，我所看到的只是 api 调用文档，但我没有找到任何关于如何向管理员或液体主题添加选项的信息。任何引用或指针都会很棒！

我试图找出一种方法，以便当用户安装我的应用程序时，A 可以添加他们可以使用的“部分”，甚至可以添加他们可以使用的新变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:01:11.650

尝试使用适用于 Firefox 的 Greasemonkey 或原生 Chrome 应用程序进行构建。然后说服您的客户在他们的商店管理员中安装您的代码。与 Shopify 的合作伙伴应用程序也可以让您注入链接。把这一切都连接到你的后端，你就是金子。

# android - 安装支持库时 SDK 管理器失败

> ID：12945349
> 
> 赞同：0
> 
> 时间：2012-10-18T00:14:08.873
> 
> 标签：android, eclipse, sdk

我正在使用 Android 4.0 及更高版本。我需要为我要运行的旧项目之一安装支持库。但是从 Eclipse 安装时出现错误。为什么会这样，我该如何解决？我已经禁用了我的防病毒软件，关闭了除 Eclipse 之外的所有程序和窗口并尝试过，但错误仍然存​​在。

![错误图像](../Images/13e991c2cd8c3cac38c706a6c1702c45.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:27:43.397

你可以从[这里](http://developer.android.com/tools/extras/support-library.html)下载。确保使用最新版本（修订版 10）。将此添加到您的`libs`文件夹并将其包含在您的 java 构建路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:35:17.533

这可能是权限错误的结果，因为您的文件位于 C:/Program Files.... 尝试右键单击 eclipse 图标并从上下文菜单中选择“以管理员身份运行”。

# css - 使用 Jquery 更改点击宽度

> ID：12945352
> 
> 赞同：3
> 
> 时间：2012-10-18T00:14:30.813
> 
> 标签：css, twitter-bootstrap, jquery

我有一个引导进度条，当宽度属性更改时会更改当前进度。我想更改此宽度属性并在用户将其打开时添加 10%，并在用户将其关闭时减少 10%。

这是我的代码：

```
<div class="progress progress-danger progress-striped active"> 
       <div class="bar" style="width:30%"></div>
</div>

<a id="updateit">Click to change the progress</a> 
```

```
$(function(){
  $("#updateit").toggle(function(){
     $('.bar').css("width", + '10%');
  });
}); 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:24:05.287

[这是一个工作小提琴](http://jsfiddle.net/b66d7/1/)

你不能添加百分比（我相信），所以我使用`.progress`.

0.1 = 10%

```
$(function(){
  $("#updateit").toggle(
   function(){
     $('.bar').css("width", '+=' + (0.1 * $('.progress').width()));
     return false;
  },
  function(){
     $('.bar').css("width", '-=' + (0.1 * $('.progress').width()));
     return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:55:01.933

另一个答案的示例还可以，但 .bar 最终将具有以像素为单位的固定值。如果您仍想以 % 为单位设置值，则可以尝试此操作（如果父级更改其宽度，.bar 也会更改为 % 值）：

```
$(function(){
    var $bar = $(".bar");
    $("#updateit").toggle(function(){
        $bar.css("width", 100 * parseFloat($bar.css('width')) / parseFloat($bar.parent().css('width')) +10 + '%');
    },
    function(){
        $bar.css("width", 100 * parseFloat($bar.css('width')) / parseFloat($bar.parent().css('width')) -10 + '%');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:37:01.637

我注意到你的代码有几件事。

首先，确保你有一个`href`锚。即使不使用它也是正确的 HTML（添加`return false;`到您的 JavaScript 以使其不跟随链接）。我的浏览器根本无法识别该链接，因为它没有 href。

接下来，您希望用户单击链接，然后切换宽度，对吗？然后你需要这个`click()`事件。

在那之后，这就是我想出的：

**jQuery**

```
var isOn = true;
$(function(){
   $("#updateit").click(function(){
      console.log(isOn);
      if ( isOn ){
          isOn = false;
          $('.bar').css("width", '10%');
      } else {
          isOn = true;
          $('.bar').css("width", '20%');
      }
      return false;
  });
});​ 
```

**HTML**

```
<div class="progress progress-danger progress-striped active"> 
       <div class="bar"></div>
</div>

<a href="#" id="updateit">Click to change the progress</a>
​ 
```

**CSS**（用于显示`.bar`测试和设置初始宽度）

```
.bar{
    width:20%;
    height:20px;
    background:#600;
}​ 
```

**[jsFiddle](http://jsfiddle.net/SzX37/)**

# python - 调用 SQL Server 时忽略 pyodbc.connect 超时参数

> ID：12945353
> 
> 赞同：17
> 
> 时间：2012-10-18T00:14:35.080
> 
> 标签：python, sql-server-2005, pyodbc

我在带有 FreeTDS 的 Linux 上使用 pyodbc 连接到 SQL Server 2005。我注意到我的连接的超时参数没有被我的查询所接受。

当我运行以下命令时，我希望在两个 cursor.execute 调用之后看到超时错误。

```
import pyodbc
import time

connString = 'SERVER=dbserver;PORT=1433;DATABASE=db;UID=dbuser;PWD=dbpwd;' + \
    'DRIVER=FreeTDS'
cnxn = pyodbc.connect(connString , timeout=3)

cursor = cnxn.cursor()

t1  = time.time()
cursor.execute("SELECT MAX(Qty) FROM big_table WHERE ID<10000005")
print cursor.fetchone()
t2 = time.time()
print t2-t1

cursor.execute("WAITFOR DELAY '00:00:30'")
print 'OK' 
```

相反，我得到了这个输出。表明第一个 db 查询占用了 7.5 秒，第二个调用占用了 30 秒而没有引发超时。

```
(808432.0, )
7.56196093559
OK 
```

有没有更好的方法来使用 pyodbc 和 SQL Server 强制查询超时？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T12:30:41.180

将[`Connection.timeout`](http://code.google.com/p/pyodbc/wiki/Connection#timeout)变量赋值添加到您的代码中。默认为`0`（禁用超时），预计以秒为单位。

```
import pyodbc
import time

connString = 'SERVER=dbserver;PORT=1433;DATABASE=db;UID=dbuser;PWD=dbpwd;' + \
             'DRIVER=FreeTDS'
cnxn = pyodbc.connect(connString)
cnxn.timeout = 3
cursor = cnxn.cursor()

t1  = time.time()
cursor.execute("SELECT MAX(Qty) FROM big_table WHERE ID<10000005")
print cursor.fetchone()
t2 = time.time()
print t2-t1

cursor.execute("WAITFOR DELAY '00:00:30'")
print 'OK' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-18T04:04:16.730

参考[pyodbc connection](http://code.google.com/p/pyodbc/wiki/Connection)，有两个单独的超时参数，一个是 Connection 类的变量（设置查询的超时时间），一个是 pyodbc.connect 的关键字参数（这个用于实际的连接过程）。基于此，您在代码中为连接过程设置超时，而不是为查询设置超时。

# php - php、jquery 三级下拉菜单

> ID：12945354
> 
> 赞同：0
> 
> 时间：2012-10-18T00:14:42.610
> 
> 标签：php, jquery, html, mysql, drop-down-menu

我有一个使用 PHP 生成的 HTML 来创建 jQuery 下拉菜单的菜单。用于构建菜单的信息来自类别数据库表：

猫（分贝表）

```
cat_id | 猫名 | 猫父母 | 猫短
__________________________________________
1 | 主页 | 0 | 家
__________________________________________
2 | 游戏 | 1 | 游戏
__________________________________________
3 | 跳棋 | 2 | 跳棋

```

到目前为止，我构建的代码只允许菜单中有 2 个级别，并且不会为第 3 级添加另一个下拉菜单（即 Checkers）：

```
<ul class="dropdown">
    <?php
    $sql ='SELECT * FROM cats WHERE cat_parent = 0';
    $result = $db->sql_query($sql);
    while($row = $db->sql_fetchrow($result)){
        $cats[] = array(
            'id' => $row['cat_id'],
            'name' => $row['cat_name'],
            'parent' => $row['cat_parent'],
            'short' => $row['cat_short'],
            'subs' => array()
        );
    }

    foreach($cats as $cat){
        $sql = 'SELECT * FROM cats WHERE cat_parent = '.$cat['id'];
        $result = $db->sql_query($sql);
        while($row = $db->sql_fetchrow($result)){
            $cat['subs'][] = array(
                'id' => $row['cat_id'],
                'name' => $row['cat_name'],
                'parent' => $row['cat_parent'],
                'short' => $row['cat_short']
            );
        }
        $menu[] = $cat;
    }

    foreach($menu as $cat){ ?>
        <li class="ui-state-default"><a class="transition" href="index.php?mode=<?php echo $cat['short']; ?>"><?php echo $cat['name']; ?></a>
        <?php if($cat['subs'] != '0'){ ?>
            <ul class="sub_menu">
            <?php foreach($cat['subs'] as $sub){ ?>
                <li class="ui-state-default"><a class="transition" href="index.php?mode=<?php echo $sub['short']; ?>"><?php echo $sub['name']; ?></a></li>
            <?php } ?>
            </ul>
        <?php } ?>
        </li>
    <?php } ?>
</ul> 
```

我怎样才能重写这个（或编写一个函数）以能够利用 3 层？我只需要必要的 PHP 循环，因为我可以使用 jquery 轻松操作列表项元素来执行实际的下拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T17:38:08.533

以下代码（未经测试，抱歉）可以解决任意数量的级别：

```
<?php
# a key-value list of all cats by their IDs:
$all_cats = array();

# the final list of cats we want:
$cats = array();

$sql ='SELECT * FROM cats';
$result = $db->sql_query($sql);

# fetch all cats
while($row = $db->sql_fetchrow($result)){
    $all_cats[$row['cat_id']] = array(
        'id' => $row['cat_id'],
        'name' => $row['cat_name'],
        'parent' => $row['cat_parent'],
        'short' => $row['cat_short'],
        'subs' => array()
    );
}

# group cats by parent (note reference & to $cat) - we are dealing with the same object
foreach ($all_cats as $id => &$cat) {
    $parent = $cat['cat_parent'];
    if ($parent == 0) {
        $cats[] = $cat;
    } else {
        $all_cats[$parent]['subs'][] = $cat;
    }
} 
```

最后，`$cats`将包含一组一级猫，并`subs`正确填充。

请注意，如果您的表变得太大，这将占用大量内存，但至少它只会访问数据库一次。

# java - 我需要一个字数统计程序

> ID：12945357
> 
> 赞同：-3
> 
> 时间：2012-10-18T00:15:06.127
> 
> 标签：java, string, io, word-count

我需要弄清楚如何制作一个程序来计算用户输入的句子中的单词。用户还输入每个单词必须的长度。所以，如果用户输入了 5 个字母的单词，而句子中包含了一个 4 个字母的单词；这个词不会被计算在内。

这就是我所拥有的...

```
public class wordcount {
  public static void main(String[] args) {
   int length = IO.readInt();
   String sentence = IO.readString();
   int full = sentence.length();
   int wordcount = 0;

   for(int i = 0; i < length; i++){
   }
   System.out.print(wordcount);
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:16:58.513

```
return sentence.split("\\s+").length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:24:49.063

这将读取输入行的计数。

```
public static void main(String[] args) {
    Scanner scanner = new Scanner( System.in );
    int length = scanner.nextInt();
    String sentence = scanner.nextLine();
    scanner.close();

    int wordcount = 0;
    String[] words = sentence.split(" ");
    for(int i = 0; i < words.length; i++){
       if(words[i].length() >= length ){
          wordcount++;
       }
   }
   System.out.print(wordcount);
} 
```

}

# c++ - C++：大的多维向量导致段错误

> ID：12945359
> 
> 赞同：0
> 
> 时间：2012-10-18T00:15:38.973
> 
> 标签：c++, vector, segmentation-fault

我有一个数字网格的大文件（50x11k）。我要做的就是将这些值放入一个向量中，以便我可以同时访问不同行的值。我每次都会遇到段错误（我什至不能在 while 循环之前做一个 cout）。有人看到这个问题吗？

如果有更简单的方法可以做到这一点，请告诉我。它是一个大文件，我需要能够将一行的值与另一行的值进行比较，因此简单的 getline 不起作用，有没有办法跳过文件而不是“抓住”行，而只是“检查”行，以便我以后可以通过输入该数字返回检查同一行？像看一个大数组一样的文件？我想同时查看第三行和该行中的 5 个字符，同时查看第 56 行和第 9 个字符，类似的东西。

```
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

//int g_Max = 0;

int main() {

    vector<vector<string> > grid;

    ifstream in("grid.txt");
    int row = 0;
    int column = 0;
    string c;

    if (!in) {
        cout << "NO!";
    }

    while (!in.eof()) {
        c = in.get();
        if ( c.compare("\n") == 0) {
            row++;
            column = 0;
        }
        else {
            c = grid[column][row];
            cout << grid[column][row];
            column++;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:19:02.933

```
 vector<vector<string> > grid; 
```

这声明了一个空向量，没有元素。

```
 c = grid[column][row]; 
```

这会访问向量的元素，但没有元素。

如果您将其更改为使用`vector::at()`而不是`vector::operator[]`这样：

```
 c = grid.at(column).at(row); 
```

然后你会得到异常，告诉你你正在访问超出范围。

您需要先用元素填充向量，然后才能访问它们。一种方法是预先用正确数量的元素声明它：

```
 vector<vector<string> > grid(11000, std::vector<string>(50)); 
```

您可能还想修复您的 IO 循环，测试`!in.eof()`通常是错误的。为什么不一次读取一行并将行拆分，而不是读取单个字符？

```
while (getline(in, c)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:30:11.693

如果您只需要一次访问所有行，为什么不将其声明为，`std::vector<std::string>`并且每一行都是`string`??

```
std::string s;
std::vector<std::string> lines;
while( std::getline(in, s) ) lines.push_back( s );
std::cout << "File contain " << lines.size() << " line" << std::endl;
std::cout << "Char at [1][2] is " << lines[1][2] << std::endl; // assume [1][2] is valid! 
```

# multithreading - 计时器是否需要互斥锁

> ID：12945361
> 
> 赞同：0
> 
> 时间：2012-10-18T00:15:41.463
> 
> 标签：multithreading, timer, mutex

我在我的程序中使用计时器：
`timer = new Qtimer(); connect(timer, SIGNAL(timeout()), this, SLOT(readData()));` `timer.start(1000);`
还有其他可能由 UI 交互触发的插槽：
`/*SLOT FUNCTION*/ on_pushbutton_triggered(){..../*write data*/...}`。

（代码是用qt写的，但我认为这是一个常见的问题）

所以我担心潜在的问题：**可能 readData() 读取错误数据而 on_pushbutton_triggereed() 正在写入数据？**

我不太熟悉计时器在屏幕后面的真正工作方式：它与我的程序在同一个线程中吗？
**readData() 和 on_pushbutton_triggereed() 会被连续调用、执行、完成并且没有互斥问题（即：我必须使用 lock() 和 unlock()）吗？** 感谢您的阅读！我真的希望你的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:00:35.383

Qt 使用[事件循环](http://en.wikipedia.org/wiki/Event_loop)来实现一般的并发活动，特别是在单个线程中实现 QTimer。事件提供者（在本例中为 QTimer）正在生成事件并将它们发布到事件循环。然后根据它们的优先级和发布顺序对其进行处理。这种方法不需要任何同步，因为当时只执行了一段代码，因此访问数据是安全的。

在类 Unix 系统上，`ps -eLf`命令将显示有关所有进程（输出中的 PID 列）及其线程（LWP 列）的信息。NLWP 列显示特定进程有多少线程。

# php - 如何禁用下拉列表

> ID：12945364
> 
> 赞同：2
> 
> 时间：2012-10-18T00:15:47.617
> 
> 标签：php, javascript, drop-down-menu

我有这个下拉列表，我的想法是当我单击禁用其他下拉列表的视频时。这不起作用。我需要别的吗？

```
<select name="Type" id="type">
  <option value="0">Please Select</option>
  <option name="image" value="I" >Images</option>
  <option name="video "value="V">Videos</option>
  <?php 
$value=$_POST['image'];
?>
</select>

<select id="text-one" <?php if($value=="V"){ ?> disabled="disabled"<?php }?> >
                <option selected value="base">Please Select</option>
                <option value="Dig">Digital</option>
    </select 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:27:09.883

试试这个代码：

```
<script>
  function disable(val)
  {
      if(val=="V")
           document.getElementById("text-one").disabled=true;
      else
          document.getElementById("text-one").disabled=false;
  }
</script>

<select name="Type" id="type" onchange="disable(this.value)">
  <option value="0">Please Select</option>
  <option name="image" value="I" >Images</option>
  <option name="video "value="V">Videos</option>
</select>

<select id="text-one" >
      <option selected value="base">Please Select</option>
       <option value="Dig">Digital</option>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T00:26:24.347

您可以使用 PHP 执行此操作，但这需要提交表单数据以便您可以访问`$_POST`，然后加载一个新页面，这与原始页面基本相同，只是禁用了 text-one。

请记住，PHP 运行在服务器端，一旦在浏览器中呈现，就无法通过 PHP 完成其他任何操作。例如，您的示例代码中有一行显示您要分配`$_POST['image']`的内容`$value`- 在您提交表单之前，`$_POST`它将为空。

最有可能的是，您希望在不重新加载的情况下执行此客户端，这可以使用 javascript 来完成。

作为基本概述：

1.  监视选择元素的`onChange`事件处理程序`type`
2.  检查`type`select 元素的值，并根据需要设置`disabled`属性`text-one`

另一种选择（也许更简单？）：

将一个`onclick`属性附加到视频输入，这将运行一个禁用的 javascript 函数`text-one`

[jQuery](http://jquery.com/)将使其中一些变得更容易，但您可以用纯 javascript 编写以上所有内容，而无需任何库。

# java - 我的合法域名不是合法的 Java 包名

> ID：12945365
> 
> 赞同：7
> 
> 时间：2012-10-18T00:15:48.893
> 
> 标签：java, package

我的域名是 3DTOPO.com。显然 java 不允许包域名以数字开头。

为什么Java反向域名不遵循与域名相同的规则？我真的不想将我的包命名为 com.threedtopo ....

对于不是我的域名的初学者！其他任何人都可以自由注册和使用该域。此外，这很尴尬，而且不是我公司的名称。

有人有包名建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T00:18:01.577

我认为您的意思是 Java 不允许包名称以数字开头。

一种常见的替代方法是在其前面加上下划线 _3dtopo。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-20T23:18:11.280

[Sun/Oracle 在 Java 教程的命名包](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)部分专门解决了这个问题：

> 在某些情况下，互联网域名可能不是有效的软件包名称。如果域名包含连字符或其他特殊字符，如果包名称以数字或其他非法用作 Java 名称开头的字符开头，或者如果包名称包含保留的 Java 关键字，则会发生这种情况，比如“int”。在这种情况下，建议的约定是添加下划线。

他们继续举几个例子，在这种情况下相关的例子是 domain`123name.example.com`变成 package `com.example._123name`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T00:38:17.133

根据[RFC 1912](https://www.rfc-editor.org/rfc/rfc1912#page-2)，

> 主机名标签中允许的字符只有 ASCII 字母、数字和“-”字符。标签可能不都是数字，但可能有一个前导数字（例如，3com.com）。标签必须以字母或数字结尾和开头。参见 [RFC 1035] 和 [RFC 1123]。（标签最初在 [RFC 1035] 中被限制以字母开头，据报道，一些较旧的主机在 [RFC 1123] 中的放宽仍然存在问题。）请注意，有些 Internet 主机名违反了此规则（411.org，1776 .com）。在 [RFC 1033] 中允许标签中存在下划线，但 [RFC 1033] 仅供参考，并未定义标准。目前至少有一种流行的 TCP/IP 实现拒绝与其中带有下划线的主机通信。必须注意的是，[1035] 中的语言是这样的，这些规则是自愿的——它们是为那些希望最小化问题的人准备的。请注意，Internet 主机名的规则也适用于 SMTP 中使用的主机和地址（请参阅 RFC 821）。

因此，域名前面的允许数字直到1989 年的[RFC 1123才开始。](https://www.rfc-editor.org/rfc/rfc1123#section-2)

值得注意的是，他们在 1990 年开始编写 Java。那时以数字开头的域可能并不常见，因此包名似乎类似于主机名。

包名不必直接对应域名。对我来说，域名是临时的——它们可以买卖。包名称的持续时间可能比域名长得多。

对于它的价值，3com 通过购买另一个域来解决它。;-) 他们用于`com.palm.webos` 某些软件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-18T00:40:51.017

> 为什么Java反向域名不遵循与域名相同的规则？

因为：

1.  它不是一个“反向域名”，它是一个 Java 包名。
2.  它由不允许有前导数字的 Java 标识符组成。

# objective-c - iOS：从磁盘加载 PNG，为其添加 PixelPerMeter 属性，并将其保存到相册

> ID：12945368
> 
> 赞同：1
> 
> 时间：2012-10-18T00:16:27.890
> 
> 标签：objective-c, ios, png, dpi

显然，使用 CGImages 您可以将 kCGImagePropertyPNGXPixelsPerMeter 和 kCGImagePropertyPNGYPixelsPerMeter 属性添加到图像中，它们将被添加到 png 的 pHYs 块中。但 UIImageWriteToSavedPhotosAlbum 不直接接受 CGImage。

我一直在尝试将图像加载为 UIImage，然后从中创建一个 CGImage，添加属性，然后从该数据创建一个新的 UIImage 并将其保存到相册中。

图像正在写入相册，但没有 PPM 设置。我可以在 MacOS 上的预览应用程序中验证这一点，或者使用 ImageMagick 的`identify`.

ObjC 不是我的领域，所以这是我从类似的 stackoverflow 问题中拼凑出来的。

```
UIImage *uiImage = [UIImage imageWithContentsOfFile:path];

NSDictionary* properties = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSDictionary dictionaryWithObjectsAndKeys:
                               [NSNumber numberWithInt:5905], (NSString *)kCGImagePropertyPNGXPixelsPerMeter, /* this doesn't work */
                               [NSNumber numberWithInt:5905], (NSString *)kCGImagePropertyPNGYPixelsPerMeter, /* this doesn't work */
                                @"This works when saved to disk.", (NSString *)kCGImagePropertyPNGDescription,
                               nil],(NSString*) kCGImagePropertyPNGDictionary,
                            nil];

NSMutableData* imageData = [NSMutableData data];
CGImageDestinationRef imageDest =  CGImageDestinationCreateWithData((CFMutableDataRef) imageData, kUTTypePNG, 1, NULL);

CGImageDestinationAddImage(imageDest, uiImage.CGImage, (CFDictionaryRef) properties);
CGImageDestinationSetProperties(imageDest, (CFDictionaryRef) properties); /* I'm setting the properties twice because I was going crazy */
CGImageDestinationFinalize(imageDest);

UIImageWriteToSavedPhotosAlbum( [UIImage imageWithData:imageData], nil, NULL, NULL );

// This is a test to see if the data is getting stored at all.
CGImageDestinationRef diskDest = CGImageDestinationCreateWithURL(
    (CFURLRef)[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@.dpi.png",path]], kUTTypePNG, 1, NULL);

CGImageDestinationAddImage(diskDest, uiImage.CGImage, (CFDictionaryRef) properties);
CGImageDestinationSetProperties(diskDest, (CFDictionaryRef) properties);
CGImageDestinationFinalize(diskDest); 
```

更新：修改并简化了代码。仍将图像保存到相册和磁盘，但不保存每米像素值。描述块被保存到磁盘，但在写入相册时似乎被剥离。

更新 2：通过将文件另存为 jpeg 并向其添加 TIFF X/Y 分辨率标签，我已经能够将版本保存到磁盘以存储 PPI 值而不是 72。保存到时仍然会删除此信息相册。

比较一张通过 iOS 相机应用程序拍摄的照片、一张通过 Instagram 拍摄的照片以及一张由我的代码保存的照片，我注意到相机应用程序版本有大量的 TIFF/EXIF 标签，而 Instagram 和我的照片具有相同的有限标签集. 这使我得出结论，iOS 故意剥离了这些标签。不过，一个明确的答案会帮助我晚上睡觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:24:40.047

答案是不要使用 UIImageWriteToSavedPhotosAlbum。

有一个 ALAssetsLibrary 方法 [writeImageDataToSavedPhotosAlbum: metadata: completionBlock:]

元数据是一个与传递给 CGImageDestinationSetProperties 格式相同的字典。PNG 和 JFIF 密度设置可能被破坏，我正在使用 kCGImagePropertyTIFFXResolution。

# django - 检索日期时间字段解析为另一个时区中的日期的所有对象

> ID：12945370
> 
> 赞同：0
> 
> 时间：2012-10-18T00:16:52.950
> 
> 标签：django, timezone, models

假设我有一个这样的模型：

```
class Event(models.Model):
    title = CharField(max_length=100)
    start_time = DateTimeField() 
```

现在，所有事件都以 UTC 格式存储在数据库中。现在，在视图方面，我有这样的课程：

```
class EventListDay(ListView):
    def get_queryset(self):
    year, month, day = int(self.kwargs['year']), int(self.kwargs['month']), int(self.kwargs['day'])
    target_day = datetime.datetime(year,month,day) #naive date type
    target_day = timezone.make_aware(target_day, timezone.get_current_timezone()) #aware date time
    return Event.confirmed_objects.get_events_for_day(target_day).order_by("start_time") 
```

现在，当调用此视图时，我会得到一个查询集，其中包含当天发生的所有事件。唯一的问题是返回的事件是从那天开始*的 UTC*。因此，例如，我在“美国/芝加哥”时区，晚上 7 点之后发生的任何事件都会出现在接下来的几天列表中。

我要问的是如何进行查询，以使返回的事件发生在*当前*时区的那一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:25:59.433

好的，所以我已经解决了我的问题。我所做的是从提供的 kwargs 创建两个日期时间。一个是一天的开始，一个是结束。然后我让两个日期时间对象都知道并将当前的 tz 附加到它们。然后我使用了 .filter( start_time __range=(starttime, endtime)

# wpf - 为什么 ICollectionView 没有 .Net 接口 ?

> ID：12945372
> 
> 赞同：5
> 
> 时间：2012-10-18T00:16:59.267
> 
> 标签：wpf, .net-4.0, collectionviewsource

为什么没有.Net接口`ICollectionView<T>`？看着`ICollectionView`它似乎很明显期待`ICollectionView<T>`。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T13:27:03.713

ICollectionView 仅由 CollectionView 类实现。[MSDN 文档](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.data.collectionview%28v=vs.100%29.aspx)指出 CollectionView 甚至不应该在您的代码中实例化，而是使用 CollectionViewSource 对象来获取您的集合视图。

如果您想在 CollectionView 中返回您自己的 T 集合，您需要将您自己的集合（实现 IEnumerable）添加到 CollectionViewSource 对象并从那里获取 CollectionView，例如：

```
 List<MyClass> listToView = new List<MyClass>();
    MyClass x1 = new MyClass() { Name = "Fictive Name 1", Description = "Description...", Date = DateTime.Now};
    MyClass x2 = new MyClass() { Name = "Fictive Name 2", Description = "Description...", Date = DateTime.Now};
    MyClass x3 = new MyClass() { Name = "Fictive Name 3", Description = "Description...", Date = DateTime.Now};
    listToView.Add(x1);
    listToView.Add(x2);
    listToView.Add(x3);

    CollectionViewSource collectionViewSource = new CollectionViewSource();
    collectionViewSource.Source = listToView;
    ICollectionView collectionView = collectionViewSource.View; 
```

没有 T 的 ICollectionView 的原因可能是因为它不是这样设计的。该[文档](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.data.collectionview%28v=vs.100%29.aspx)指出， CollectionView 的设计目的是在不更改集合的情况下提供不同的视图：

> 您可以将集合视图视为绑定源集合之上的一个层，它允许您基于排序、过滤和分组查询来导航和显示集合，所有这些都无需操作底层源集合本身。

在这方面，您只能**查看**集合是有道理的，因此名称为“ViewCollection”。

我认为期望 T 的 ICollectionView 并不是那么明显，因为 CollectionView 甚至不打算首先被实例化（顺便说一下，在添加一些排序功能之后，请参阅下面的有趣警告）。

> System.Windows.Data 警告：52：不完全支持直接使用 CollectionView。基本功能工作，虽然效率低下，但高级功能可能会遇到已知的错误。考虑使用派生类来避免这些问题。

我认为该架构被设计为在基于“只读”的级别上工作，而无需更改其底层数据源，因为这是分组、过滤和导航数据集合的主要关注点。

但是，如果您想确切地知道原因，您可能必须与从事该框架这部分工作的 Microsoft 人员交谈。

# android - Android单元测试 - 让测试等待响应

> ID：12945376
> 
> 赞同：0
> 
> 时间：2012-10-18T00:17:49.637
> 
> 标签：android, multithreading, unit-testing

所以我有一个需要进行单元测试的 Android 库。您向库传递了一些处理程序，我需要根据从库发送到这些处理程序的消息进行单元测试。

问题是，我不知道如何告诉测试等到我得到回复。我有一个计时器在我的测试方法中每 10 秒检查一次响应，如果它看到响应是一个断言，但是测试方法调度计时器任务然后成功完成，而不是等待计时器任务中的断言。

有没有办法让测试明确地等到它在完成之前遇到断言？或者其他一些方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:39:52.660

您可以创建处理程序的模拟。模拟可以/应该替换库单元测试中的实际处理程序。您可以完全控制模拟，并避免线程问题（涉及线程的单元测试非常困难）。

# android - 微调器 setSelection() 不起作用

> ID：12945379
> 
> 赞同：2
> 
> 时间：2012-10-18T00:18:03.323
> 
> 标签：android, spinner, android-arrayadapter

我正在尝试从 sqlite 数据库中读取我的微调器状态，然后在匹配时设置它。我有一个数组适配器的数组列表。我已经使用调试并运行了代码，一切看起来都运行良好，甚至给了我正确的索引。唯一的问题是它不会改变屏幕上的微调器。

```
for (int index = 0;  index < listOfAdapters.size(); ++index) {

        ArrayAdapter<String> adapter = listOfAdapters.get(index);
        for(int j =0; j < adapter.getCount(); ++j)

        if (adapter.getItem(j).equals(state2)){ 
            spinner2.setAdapter(adapter);
            spinner2.setSelection(j);
            return;
        }
    } 
```

# uima - UIMA AS（异步横向扩展）教程？

> ID：12945384
> 
> 赞同：0
> 
> 时间：2012-10-18T00:18:25.210
> 
> 标签：uima

有人知道关于 UIMA 异步横向扩展的教程吗？我找到了一个用于分布式管道的，一般来说，但不是异步的东西。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:44:11.650

在[Getting Started: Apache UIMA Asynchronous Scaleout](http://uima.apache.org/doc-uimaas-what.html)页面的底部，您会发现以下提及

> 有关将标准 UIMA 示例注释器部署和测试为 UIMA AS 服务的说明，请参阅顶级目录中的 README 文件。

README 文件包含安装和设置的各种信息，以及启动 ActiveMQ 代理、将分析引擎部署为 UIMA AS 异步服务、调用 UIMA AS 异步服务、从 CPM 迁移到 UIMA-AS 的示例...

它位于二进制/源代码版本的顶级目录中。

指向此[README 文件](http://svn.apache.org/repos/asf/uima/uima-as/trunk/README)的直接链接。

# mysql - 在视图中使用带有连接子句的 SQL 查询

> ID：12945386
> 
> 赞同：0
> 
> 时间：2012-10-18T00:19:10.983
> 
> 标签：mysql, outer-join, sql-view

是否可以创建一个模拟下面的选择查询的数据库视图？

```
select
 A.Name,
 B.Subscription
from
 TestTableA as A left outer join TestTableB as B on A.ID = B.A_ID and Subscription = 'xxxx'; 
```

在视图中，我看不到如何在连接子句中过滤订阅，而只能将其作为查询的 where 子句的条件。

（这个[问题](https://stackoverflow.com/questions/12927619/can-a-where-clause-on-a-join-be-used-in-a-view)的一个更复杂的版本）。

**更新：**

测试表A

```
ID | Name
---|------
 1 | Joe
 2 | Jane 
```

测试表B

```
ID | A_ID | Subscription
---|------|-------------
 1 | 1    | abcd
 2 | 1    | efgh 
```

查询结果：

使用上面的“select”语句，结果集是：

```
Name | Subscription
-----|-------------
Joe  | null
Jane | null 
```

我想要实现的是创建一个返回相同内容的视图。

```
select * from MyView where Subscription is null Subscription = 'xxxx'; 
```

目前，我可以通过视图实现所有目标，上面的查询如下所示。我无法通过 null 订阅让“Joe”进入结果。

```
Name | Subscription
-----|-------------
Jane | null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:00:14.100

我找到了一种在视图中使用联合的方法。

```
create or replace view TestView as
  select
   A.Name,
   null as Subscription
  from
    TestTableA as A left outer join TestTableB as B on A.ID = B.A_ID
  union
   select
    A.Name,
    B.Subscription
  from
   TestTableA as A left outer join TestTableB as B on A.ID = B.A_ID; 
```

然后使用下面的语句查询视图给了我想要的结果：

```
 select * from TestView where Subscription is null or Subscription = 'xxxx'; 
```

# python - Python中的随机噪声函数

> ID：12945387
> 
> 赞同：2
> 
> 时间：2012-10-18T00:19:15.347
> 
> 标签：python, random

我正在用 Python 编写一个游戏，其中环境是随机生成的。目前，游戏的“保存”功能通过写出玩家探索过的环境的所有部分来工作。结果是保存文件比它们需要的大——当你可以再次生成随机数据时，为什么还要将它写入磁盘呢？

我可以使用的是一个随机噪声函数：一个返回随机数的函数，并且`noise`无论何时使用*相同*的. 现在，对于游戏环境中的每个点，我可以使用 生成随机数，然后将其丢弃，然后再生成相同的数字，而不是使用生成随机数并将结果存储在 中。`noise(x)`*`x``(x,y)``random()``env[(x,y)]``noise((x,y))`*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:14:40.323

不太确定我说的是不是显而易见的，但是使用 Perlin 噪声发生器的一些变体是一种常见的方法。[这篇文章](http://www.shamusyoung.com/twentysidedtale/?p=15777)很好地描述了这样做（正如评论中提到的，这[不完全是 Perlin 噪音](http://www.shamusyoung.com/twentysidedtale/?p=15777&cpage=1#comment-277055)）

对于给定的位置，Perlin 函数将返回一个随机值（该位置可以是 2D、3D 或任何维度）。

有一个[噪音](http://pypi.python.org/pypi/noise/)模块，[这个页面](http://www.fundza.com/c4serious/noise/perlin/perlin.html)有它的实现

[gamedev.SE](https://gamedev.stackexchange.com/questions/31101/how-to-create-reproducible-probability-in-map-generation)上有一个类似的线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:06:40.820

首先，如果您需要确保noise(x) 始终为相同的x 返回相同的值，无论如何，即使它从未被调用过，那么您根本就不能真正使用随机性。一个好的散列函数是唯一的可能性。

但是，如果您只需要能够恢复由所有*先前探索过*的点的值组成的先前状态（保存和加载后从未探索过的点可能会与您没有退出时不同......但是如何任何人都知道没有访问多个宇宙？），并且您不想存储所有这些点，那么重新生成它们可能是合理的。

但是，让我们后退一步。你想要一些像哈希函数一样的东西。有没有可以使用的哈希函数？

我想算法`hashlib`太慢了（`md5`可能是最快的，但要全部测试），但我不会在没有实际测试的情况下拒绝它们。

`zlib.adler32`(or )的“随机周期”可能`zlib.crc32`太短，但如果不`hash`考虑它是否足够好，我不会拒绝它（可能除外）。就此而言，即使`hash`加上一个不错的固定端搅拌器功能也可能足够好（至少在 64 位系统上）。

Python 没有`md5`开箱即用的“介于”和“adler32”之间的任何东西。但是您可以找到数百种其他哈希算法的 PyPI 模块或源代码。就此而言，如果您熟悉任何听起来不错的特定哈希算法，那么它们中的大多数都是微不足道的——您可能可以编写一个具有 xor-folding 的[FNV 哈希](http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function)，所需时间比您浏览备择方案。

另外，请记住，您可以在“新游戏”时间生成一堆随机字节，将其存储在保存文件中，并将其用作哈希函数的盐。

如果您已经用尽了可能性，那么您确实*需要*比具有任意盐的足够快的散列函数单独给您更多的随机性，那么：

听起来您已经需要存储用户已探索的点的列表（因为您怎么知道需要恢复哪些点？）。顺序并不重要。因此，您可以按探索的顺序存储它们。这意味着您可以确定性地重新生成值（仅通过迭代列表）。这意味着您可以在自己的答案中使用@delnan 的建议。

但是，`seed`不是这样做的方法。不能保证每次运行、Python 版本、机器等都将 RNG 置于相同的状态。为此，您需要`setstate`：

*   保存，调用`random.getstate()`，pickle 和 stash 结果。
*   要加载、读取和取消选中状态，然后调用`random.setstate(state)`.

有关完整详细信息，请参阅[文档](http://docs.python.org/library/random.html#random.getstate)。

如果您使用的是`random.Random`实例，则完全相同，当然除了您必须先构造 a`random.Random`才能调用`setstate`它。

这保证在您的程序运行之间、跨机器等之间工作。即使使用较新版本的 Python。但是，*不能*保证它可以与*旧*版本的 Python 一起使用。（也就是说，如果用户使用 Python 2.6 保存游戏，然后尝试使用 2.5 加载它，则状态将不兼容。我相信唯一的问题来自 2.6->older 和 2.3->older，但当然有不保证将来不会有其他版本。）我建议存储 Python 版本，如果它们已降级，请显示警告“此保存文件需要 Python 2.6 或更高版本。你有 Python 2.5。加载可能会失败。仍然继续吗？

这仅对模块本身有保证`random.Random`（`random`因为顶级模块函数只使用 hidden `random.Random`）。特别是，`random.SystemRandom`明确记录不工作。

实际上，您也可以`random.Random`直接腌制 a ，因为状态被腌制了。看起来应该可以工作，或者腌制一个`Random`对象是什么感觉？它确实有效。但实际上并没有记录它可以工作，所以`getstate`为了安全起见，我会坚持腌制 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T00:19:15.347

一种可能的实现`noise`是：

```
import random

def noise(point):
    gen = random.Random()
    gen.seed(point)
    return gen.random() 
```

不过，我不知道速度有多快`Random.seed()`。另外，`Random`可能会从一个版本的Python更改为下一个版本，导致我的游戏的玩家在升级时发现环境发生了变化。*

# java - 为拍卖创建构造函数，使对象包含以前未售出的批次的 ArrayList

> ID：12945390
> 
> 赞同：0
> 
> 时间：2012-10-18T00:19:28.987
> 
> 标签：java, constructor, bluej

不确定我的标题是否措辞好，但我正在使用 BlueJ 来学习一点 Java，并且我正在从事一个拍卖项目（基于*Objects First With Java: A Practical Introduction Using BlueJ*的第 4 章中的一个示例） ，有一些变化）。我要做的是添加第二个构造函数，该构造函数将拍卖作为参数，如果该拍卖当前已关闭，则使用其中未售出的地块创建一个新的拍卖。如果它仍然打开或为空，则此构造函数应该像我的默认构造函数一样工作。

这是我的默认构造函数代码的开头：

```
...

public class Auction
{
    // The list of Lots in this auction.
    private ArrayList<Lot> lots;
    // The number that will be given to the next lot entered
    // into this auction.
    private int nextLotNumber;
    // Whether or not the auction is open for bidding.
    private boolean openForBid;

    /**
     * Create a new auction.
     */
    public Auction()
    {
        lots = new ArrayList<Lot>();
        nextLotNumber = 1;
        openForBid = true;
    }

    /**
     * Second Constructor
     */ 
    public Auction(Auction auction)
    {
        //If the auction is open..
            //Create a new Auction the same as above
        //else..
            //create a new auction with unsold lots from the specified auction
    } 
```

我正在为这个 Auction 类制作一个框架，几乎没有什么指令，但是有一个方法应该返回一个当前没有出价的批次的 ArrayList。

```
public ArrayList<Lot> getNoBids() 
```

所以我想我需要在传递给构造函数的 Auction 上调用它，但我似乎无法将这一切放在一起。感谢任何帮助，因为我对 Java 和 ArrayLists 还很陌生！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:36:06.233

由于您将默认行为/构造函数设置为打开，因此您可以拥有以下内容：

```
public Auction(Auction auction) {

   this();

   if (!auction.openClosed) {
      lots.addAll(auction.getNoBids());
      // set close flags as necessary...
   }
} 
```

同样使用变量 like`openClosed`是令人困惑的。可以调用`openForBidding`它来使其目的更明确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:33:35.337

如果给定通过`Auction auction`状态（关闭），您想在新拍卖中添加批次，您可以执行以下操作：

```
public Auction(Auction auction)  {
     this.lots =new ArrayList<Lot>();
     openClosed = true;
     if(!auction.isOpenForBid()){
       nextLotNumber = 1;
       this.lots.addAll(auction.getLots()); 
    }else{
       nextLotNumber = this.lots.size(); 
    }
} 
```

我想，在这两种情况下，`openClosed`都应该设置为 true，如果您要从以前的拍卖中添加手`nextLotNumber`数，您可能需要相应地进行初始化，即添加手数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T00:48:12.660

这个功劳应该归功于上面的 Reimeus，但我似乎无法评论他的回答。

基本上，他是对的，只是需要调用 this() 而不是 super()。

```
 public Auction(Auction auction)
  {
      this();

      if (!auction.openClosed) {
         lots.addAll(auction.getNoBids());
         // set close flags as necessary...
      }
  } 
```

# codeigniter-2 - Codeigniter - 将查询 result_arry() 发送到 form_dropdown 的视图

> ID：12945391
> 
> 赞同：1
> 
> 时间：2012-10-18T00:19:52.433
> 
> 标签：codeigniter-2

我正在使用 form_dropdown() 并且有以下问题：

表单代码为：

echo form_dropdown($level,$level_options,'1');

它在我使用时有效

```
$level_options = array(
                  '1'  => 'Grade 6',
                  '2'    => 'Grade 7'
                ); 
```

但不是当我从控制器发送 $data['levels'] 到查看

作为参考，模型数据库检索代码为：

```
public function getAllLevelNames() {
   $query = $this->db->query("SELECT level_description from levels ORDER BY level_description");
   return $query->result_array();
} 
```

**问题**

问题是我得到一个下拉选择列表：

```
0

Grade 6

1

Grade 7 
```

索引显示为灰色。

如何摆脱索引？

提前致谢！

附言

我似乎现在正在使用发送到视图的 data['levels'] 表单。现在，我认为以下代码似乎将“null”返回给我的控制器。请问有什么想法吗？

```
$level = array(
              'name'        => 'level',
              'id'          => 'level',
              'value'       => '1',
              'maxlength'   => '50',
              'size'        => '50',
              'style'       => 'width:50%',
            );

$level_options = $levels;

echo "<p>Level: ";
echo form_dropdown($level,$level_options,'1'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:30:07.977

您需要遍历 results_array 并创建一个格式正确的新数组。

```
$query = $this->db->query("SELECT level_description from levels ORDER BY level_description");

$for_dropdown = array();
foreach ($query->result_array() as $row) {
    $for_dropdown[$row->level_description] = $row->level_description;
}

return $for_dropdown; 
```

另外我不确定你的`levels`表是如何结构的，但通常你会有某种类型的 ID，这将是主键。如果你确实有，你可以将它包含在你的查询中，并有这样的东西：

```
$query = $this->db->query("SELECT id, level_description from levels ORDER BY level_description");
... // other code
    $for_dropdown[$row->id] = $row->level_description; 
```

# asp-classic - 服务器对象错误“ASP 0177：800401f3”Server.CreateObject 失败

> ID：12945392
> 
> 赞同：6
> 
> 时间：2012-10-18T00:19:58.483
> 
> 标签：asp-classic, vbscript

我正在使用经典 ASP。

```
Set theForm = Server.CreateObject("Persits.Upload")
theForm.OverwriteFiles = True 
```

运行上面的代码会产生错误：

```
Server object error 'ASP 0177 : 800401f3' Server.CreateObject Failed 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T07:08:06.110

取消注册 Persits Upload DLL 并使用 regsvr32 重新注册它。以下是注册和注销 DLL 的步骤

**注册 DLL**

```
regsvr32 <filename>.dll 
```

或者

```
regsvr32 <path>\<filename>.dll 
```

where 是文件的路径， 是文件的名称。

**注销 DLL**

```
regsvr32 -u <filename>.dll 
```

或者

```
regsvr32 -u <path>\<filename>.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T00:04:08.590

在经典 ASP 中，当代码移动到新服务器时，我收到此错误。根据我对 Classic ASP 的一点经验，它看起来像是另一个 DLL 注册问题。在我的情况下，DLL 丢失了，所以它不能被注册。注册后，问题就解决了。

以下是要检查的项目列表：

*   毕竟你真的没有在服务器上运行 regsvr32 。
*   您运行了 regsvr32 但它报告了一个错误。
*   有人修改了部分注册表的安全性，阻止 OLE 子系统读取全部或部分 HKEY_CLASSES_ROOT 树。
*   您尝试创建的对象的名称拼写错误或不正确。
*   确定是否是权限问题

以下是更多信息的链接：

[使用正确版本的 MSXML](http://blogs.msdn.com/b/xmlteam/archive/2006/10/23/using-the-right-version-of-msxml-in-internet-explorer.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T12:59:22.190

我在这里发布的综合清单

[错误 ASP 0177：COM DLL 的 8007007e Server.CreateObject 失败](https://stackoverflow.com/a/35985827/692942)

处理注册 DLL 以在 32 位和 64 位的经典 ASP 中使用的问题以及遇到的常见问题。

会在这里发布，但不想重复答案。

# ruby-on-rails - 尝试在 ruby 中发出 curl 请求

> ID：12945395
> 
> 赞同：1
> 
> 时间：2012-10-18T00:20:25.457
> 
> 标签：ruby-on-rails, curl, google-checkout, curb

是否有一个 ruby​​ curl 库可以让我复制这个请求：

```
curl -d '<hello xmlns="http://checkout.google.com/schema/2"/>' https://S_MERCHANT_ID:S_MERCHANT_KEY@sandbox.google.com/checkout/api/checkout/v2/request/Merchant/S_MERCHANT_ID 
```

我试过遏制，但他们的 PostField.content 类不与谷歌的结帐 api 合作。这是我的遏制请求中的代码：

```
c = Curl::Easy.new("https://MY_ID:MY_KEY@sandbox.google.com/checkout/api/checkout/v2/request/Merchant/MY_ID_AGAIN")
c.http_auth_types = :basic
c.username = 'MY_ID'
c.password = 'MY_KEY'
# c.headers["data"] = '<?xml version="1.0" encoding="UTF-8"?><hello xmlns="http://checkout.google.com/schema/2"/>'
c.http_post(Curl::PostField.content('', '<?xml version="1.0" encoding="UTF-8"?><hello xmlns="http://checkout.google.com/schema/2"/>'))
c.perform 
```

我已经设法使用 ruby​​ 的系统命令让它工作，但我不确定如何处理它的响应。

```
req = system("curl -d '<hello xmlns=\"http://checkout.google.com/schema/2\"/>' https://MY_ID:MY_KEY@sandbox.google.com/checkout/api/checkout/v2/request/Merchant/MY_ID") 
```

我现在已经玩了 2 个小时了。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:47:04.357

You can use `IO.popen` to read from the child process:

```
IO.popen(['curl', '-o', '-', '-d', ..., err: [:child, :out]]) do |io|
  response = io.read
end 
```

This example combines standard out and standard error into one stream in the child process, and it forces curl to redirect output to standard out via `-o`. You would specify your other options in place of the `...`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:00:14.030

我总是将[Rest Client](https://rubygems.org/gems/rest-client) gem 用于此类用例，它使用起来非常简单，并且所有 REST 请求都是开箱即用的，带有整批调整参数。

您的代码将类似于以下内容：

```
url = "sandbox.google.com/checkout/api/checkout/v2/request/Merchant/#{S_MERCHANT_ID}"
credentials = "#{S_MERCHANT_ID}:#{S_MERCHANT_KEY}"
RestClient.post "https://credentials@#{url}", '<hello xmlns="http://checkout.google.com/schema/2"/>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:27:34.520

或者，您可以使用 HTTP 请求库，例如 Typheous (https://github.com/typhoeus/typhoeus)。有什么东西让你和“卷曲”联系在一起吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T00:27:58.207

我会让 curl 将结果放入一个文件中，然后使用 ruby​​ 打开文件并读取它（File.open）

或者我们 httparty

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:34:30.777

我想通了（YAAAAY！）

如果其他人遇到这个问题，这里是解决方案。

可执行命令在命令行中可以正常工作，但是如果您尝试从 rails 中的控制器渲染可执行命令的输出，请确保使用 render :json 而不是 render :text 来打印结果。

由于某种原因，render :text 只输出了我的命令输出的点点滴滴（并且在这个过程中让我发疯）。

对于那些试图在 Rails 中与 google checkout 集成的人，以下是向 google 发出 http 请求的方式：

第一步：将 rest-client 添加到您的 Gemfile。以下是如何从命令行执行此操作：

```
$ cd /path/to/your/rails/app
$ sudo nano Gemfile 
```

接下来，通过在 Gemfile 中的某处放置以下内容，将 gem 添加到 gemfile

```
$ gem "rest-client" 
```

接下来，运行捆绑安装

```
$ bundle install 
```

重新启动您的服务器。如果阿帕奇2：

```
$ sudo service apache2 reload 
```

如果 webrick：

```
$ rails s 
```

然后，在您的控制器中（假设您已设置 Rails 并且能够从浏览器访问控制器）编写以下代码：

```
$ url = "https://YOUR_GOOGLE_CHECKOUT_MERCHANT_ID:YOUR_GOOGLE_CHECKOUT_KEY@sandbox.google.com/checkout/api/checkout/v2/request/Merchant/YOUR_GOOGLE_CHECKOUT_MERCHANT_ID"
$ req = RestClient.post(url, '<hello xmlns="http://checkout.google.com/schema/2"/>')
render :json => req 
```

请不要忘记将 YOUR_GOOGLE_MERCHANT_ID 替换为您的实际商家 ID，并将 YOUR_GOOGLE_CHECKOUT_KEY 替换为您的实际 Google 结帐密钥

```
<?xml version="1.0" encoding="UTF-8"?>
<bye xmlns="http://checkout.google.com/schema/2" serial-number="1dfc3b90-1fa6-47ea-a585-4d5482b6c785" /> 
```

（答案由nexo提供）

# c - 使用多个线程计算素数

> ID：12945401
> 
> 赞同：3
> 
> 时间：2012-10-18T00:21:55.613
> 
> 标签：c, multithreading

我试图理解线程。我正在尝试让多个线程计算素数。我希望一个线程计算第一个数字，然后让下一个线程计算下一个数字，依此类推，然后无论哪个线程找到素数打印它。

因此，从 1 到 50 开始。将新数字传递给新线程。我认为这就是我们想要的。

继承人我到目前为止。

```
void* compute_prime (void* arg)
{
//pthread_mutex_lock(&lock);
int candidate = 2;
int n = *((int*) arg);

while (1) {
int factor;
int is_prime = 1;

/* Test primality by successive division.  */
for (factor = 2; factor < candidate; ++factor)
  if (candidate % factor == 0) {
    is_prime = 0;
    break;
  }
/* Is this the prime number we're looking for?  */
if (is_prime) {
  if (--n == 0)
    /* Return the desired prime number as the thread return value.  */

    return (void*) candidate;
}
++candidate;
}

return NULL;
}

int main ()
{
int which_prime = 50;
int isPrime1, isPrime2, isPrime3, isPrime4;
fprintf (stderr, "main thread pid is %d\n", (int) getpid ());
for(master_list; master_list < which_prime; master_list++)
{
//do{

// pthread_mutex_lock(&lock); 

pthread_create (&thread1, NULL, &compute_prime, &master_list);
//master_list++;
//pthread_mutex_unlock(&lock);

//}while(master_list < which_prime);

}

return 0;
} 
```

我的输出。

```
main thread pid is 508
Thread1 Found the prime number:  3.
Thread2 Found the prime number:  3.
Thread3 Found the prime number:  3.
Thread4 Found the prime number:  3.
Thread1 Found the prime number:  7.
Thread2 Found the prime number:  7.
Thread3 Found the prime number:  7.
Thread4 Found the prime number:  7.
Thread1 Found the prime number:  13.
Thread2 Found the prime number:  13.
Thread3 Found the prime number:  13.
Thread4 Found the prime number:  13. 
```

ETC....

这有点是我想要的。但不是每个线程都应该找到相同的素数。他们应该找到不同的素数。即使我在线程之前增加变量，它仍然无法工作。我注释掉了我试图让它工作的代码。我需要做什么？我希望我很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:42:00.807

枚举素数并不是令人*尴尬的并行*，这意味着将问题分解为独立的计算并非易事。筛子和试验部门需要（或至少大大改进）以前的素数历史。

我确信对并行素数计算的主题进行了认真的研究。在我的脑海中，我建议您依赖[概率素数测试](http://en.wikipedia.org/wiki/Primality_test)，您可以在许多数字上并行运行。这将极大地过滤您需要使用其他一些机制（例如试用除法，因为您的代码已经使用）测试的一组数字。

如果你真的想用比你的候选人低的*所有*数字进行试验划分（而不仅仅是素数，因为这将是更典型和更有效的），那么我建议`N`你让每个线程从`candidate`不同的基数开始（3、5 , 7, ...) 并且每个线程递增`candidate`，`2*N`因此它们都达到了一组唯一的数字（您当前从 2 开始并递增 1，但我假设您最终会意识到偶数永远不是素数... )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:00:24.960

您的问题的直接答案是您传递了 master_list 整数的*地址*。这意味着所有线程都在同一个位置寻找 n 是什么。因此，即使您锁定、递增、解锁，线程的行为都相似也就不足为奇了。尝试分配一个整数数组，并让每个线程查看一个单独的元素。这应该有望消除重复。

话虽这么说，即使您进行了更改，也有很多可以改进的地方。请参阅 Ben Jackson 的回答，以获得对大局的良好描述。

# android - 设置活动未启动

> ID：12945402
> 
> 赞同：1
> 
> 时间：2012-10-18T00:22:10.230
> 
> 标签：android, android-activity, android-appwidget

到目前为止，我已经编码：

```
public class WidgetActivity extends AppWidgetProvider
{    
    public void onReceive(Context context, Intent intent)
    {

        String action = intent.getAction();
        if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action))
        {

            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_activity);

            Intent settingsIntent = new Intent(context, Info.class);
            PendingIntent clickPendIntent = PendingIntent.getActivity
                    (context, 0, settingsIntent, PendingIntent.FLAG_UPDATE_CURRENT);
            views.setOnClickPendingIntent(R.id.Widget, clickPendIntent);

            AppWidgetManager.getInstance(context).updateAppWidget(intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS), views);

        }
    }
} 
```

没有成功，我在屏幕上单击小部件并且没有任何启动。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:26:00.733

将确保`PendingIntent`设置的代码放在`onUpdate()`方法中。这样可以确保将小部件放在设置的主屏幕上`PendingIntent`。

所以：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgets) {
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_activity);
    Intent intent = new Intent(context, Info.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
    remoteViews.setOnClickPendingIntent(R.id.Widget, pendingIntent); 
```

还：

如果您还希望`Activity`在首次将小部件添加到主屏幕时自动弹出信息，您应该阅读[这条有用的信息](http://developer.android.com/guide/topics/appwidgets/index.html#Configuring)。

# javascript - 在 javascript 中使用新的 dom 元素更新 for 循环

> ID：12945406
> 
> 赞同：0
> 
> 时间：2012-10-18T00:22:43.913
> 
> 标签：javascript, loops, for-loop, mouseevent, appendchild

`.piece`即使在加载 DOM 之后创建了 div，我也想将鼠标事件添加到类中。

这是我的实际循环：

```
var piece = document.getElementsByClassName('piece');

function theLoop() {
  for(var i=0; i<piece.length; i++) {
    piece[i].addEventListener("mousemove", function(event) {
      //do stuff
    }
  }
}

theLoop(); 
```

`.piece`它工作正常，但如果我在加载 DOM 后添加新的 div 类，循环会忽略它们。

`.cloneNode()`我用and添加那些新的 div `.appendChild()`，如下所示：

```
function createPiece(symbol, name) {
  var clone = document.getElementById(symbol).cloneNode(true);
  clone.setAttribute('id',symbol+'-'+name);
  document.getElementById(name).appendChild(clone);
}

createPiece(symbol, name); 
```

所有原始克隆的 div 都有 class `.piece`。

**如何将这些新 div 添加到我的 for 循环中，并将鼠标事件附加到它们？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:27:42.260

如果您的循环在页面加载时运行，则不可能将其考虑到之后动态添加到 DOM 的元素。通常，[事件委托](http://www.sitepoint.com/javascript-event-delegation-is-easier-than-you-think/)是一个解决方案，但它不是`mousemove`事件的好解决方案（因为它经常触发）。

您可以做的是创建一个函数，将事件处理程序添加到传递的元素。然后，您可以从当前循环中调用该函数，并在将每个新元素添加到 DOM 后再次调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T00:27:52.313

将 mousemove 事件处理程序放在所有片段的公共父级上，然后检查`e.target`事件数据结构以查看事件实际发生在哪个片段上。

这称为委托事件处理，允许您在静态父级上仅安装一个事件处理程序，它将为您提供来自所有子级的事件，甚至是稍后动态添加的子级。

唯一的其他选择是在稍后将其添加到页面时在每个特定部分上安装事件处理程序。您需要从将元素添加到页面的实际代码中触发此操作，因为没有得到良好支持的跨浏览器方法来监视 DOM 修改。如果你这样做，你需要让你的事件处理函数成为一个命名函数（而不是你现在使用的匿名函数），这样你就可以在多个地方使用同一个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T00:36:13.537

对于新创建的元素，您不需要循环。您也不需要事件委托*（尽管它可能很有用）*。

只需将处理程序设为命名函数，并在克隆时绑定。

```
var piece = document.getElementsByClassName('piece');

function pieceHandler(event) {
  //do stuff
}

function theLoop() {
  for(var i=0; i<piece.length; i++) {
    piece[i].addEventListener("mousemove", pieceHandler, false)
  }
}

theLoop(); 
```

* * *

```
function createPiece(symbol, name) {
    var clone = document.getElementById(symbol).cloneNode(true);
    clone.addEventListener("mousemove", pieceHandler, false); // assign handler
    clone.setAttribute('id',symbol+'-'+name);
    document.getElementById(name).appendChild(clone);
}

createPiece(symbol, name); 
```

# javascript - 具有绝对位置的 HTML div 尝试换行文本。我可以在不使用空格的情况下避免它吗

> ID：12945407
> 
> 赞同：1
> 
> 时间：2012-10-18T00:23:13.880
> 
> 标签：javascript, jquery, css, html

我有一组位置 = 绝对的 div，它们可以定位在屏幕上。

如果任何 div 的内容不适合屏幕，浏览器会将文本换成多行并尝试适合窗口。

但是，我不希望浏览器这样做，它应该隐藏内容。

[http://jsbin.com/welcome/35835/edit/](http://jsbin.com/welcome/35835/edit/)

编辑：

您可能会将其视为具有绝对定位的页面上的 div。和

1）用户可以拖动div

2）用户可以手动更改div的宽度（有一个拉伸框小部件，用户可以使用）..

所以问题是当用户在屏幕边缘附近拖动 div 时，如果文本超出窗口，文本应该隐藏而不是换行。希望这能更好地解释

如示例所示，显示的块 2 是我想要的。

所以，假设 div 的宽度是 100px，CSS 样式的左侧位置是（屏幕宽度 - 50），那么其余的文本应该隐藏。

解决方案 1：空格：nowrap。不能使用它，因为这是一个灵活宽度的 UI，用户可以根据需要更改 div 的宽度。

解决方案 2：如果我将 div 的宽度显式设置为一个数字，它可以正常工作。

但不是最佳解决方案，因为在这里我总是必须在渲染时计算所有 div 的宽度。

是否有更优化的解决方案，可以让浏览器不尝试将文本放入屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:42:39.010

很难说出你在问什么。但我认为你可以使用

```
{
  height: 1.2em;
  overflow: hidden;
} 
```

隐藏超过您支持的一行的内容

[http://jsfiddle.net/MXXDC/2/](http://jsfiddle.net/MXXDC/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:34:53.113

这是[你](http://jsfiddle.net/MXXDC/8/)想要的吗？（第二项）

我将内部文本包装在一个很长的 div 中并应用于`overflow:hidden`它的父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T01:11:22.430

我不确定小部件的确切用例，所以我不能 100% 确定它可以拥有和不拥有什么。我有一个想法，也许它会很有用 - 将宽度设置为 % 可能会有所帮助，就像这样

```
.block2{
    left: 50%;
    top: 100px;
    width: 100%;
} 
```

你可以在css中设置它以避免用js计算，但就像我说的我不确定它是如何使用的，所以这可能不起作用但它可能会给你一些想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T00:39:32.813

如果你把它们都放在一个巨大的（例如 5k px * 5k px 绝对定位的 div 中，你应该会看到预期的效果：http: [//jsbin.com/welcome/35862/edit](http://jsbin.com/welcome/35862/edit)

# tfs - TFS 2010 权限。所有用户都有权

> ID：12945409
> 
> 赞同：2
> 
> 时间：2012-10-18T00:23:38.747
> 
> 标签：tfs, permissions

我们有一个包含 14 个集合的 TFS 2010。每个集合都有自己的团队成员（不同的 Active Directory 帐户）。

当用户登录到 TFS 时，正在查看所有集合，他可以进入草稿，创建工作项，查看源代码等。所以他不在 Team Member 列表中。

我用c#做了一个程序，按收藏和项目许可走，没有人重复。

我如何诊断这种行为？有一个工具可以输入用户名，向我展示他为什么拥有这些权限以及如何继承（集合组或服务器组）。

感谢您的意见。

更新：

谢谢你的回答。我们解决了。这是 Active Directory 和 TFS 之间的同步问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:21:31.620

你可以试试[http://tfsadmin.codeplex.com/](http://tfsadmin.codeplex.com/)我不相信它有用户查找功能，但我发现编辑角色比使用 TFS 本身容易得多。

# php - IE 无法显示提要并出现错误：Internet Explorer 不支持带有 DTD 的提要

> ID：12945411
> 
> 赞同：2
> 
> 时间：2012-10-18T00:23:56.720
> 
> 标签：php, xml, rss, feed, xml-validation

当我在 IE 中访问以下 PHP 代码的页面时，IE 产生错误，“Internet Explorer 不支持带有 DTD 的提要。此提要包含 DTD（文档类型定义）。...... DTDs 用于定义网页结构。Internet Explorer 不支持提要中的 DTD。

```
<?php 
header('Content-Type: text/xml');
echo '<?xml version="1.0" encoding="UTF-8" ?>';
?>          
<!DOCTYPE doctypeName [
   <!ENTITY nbsp "&#160;">
]>                  
<rss version="2.0">
<channel>
    <title>Sample Feed</title>
    <link>http://google.com</link>
    <description>This is a test</description>   
        <item>
            <title>Item</title>
            <description>This is the item.&nbsp;&nbsp;</description>
        </item>
</channel>      
</rss> 
```

我怀疑这部分是问题所在：

```
<!DOCTYPE doctypeName [
   <!ENTITY nbsp "&#160;">
]> 
```

但是，如果我将其删除，则会收到此错误：

> 对未定义实体“nbsp”的引用。行数：10 字符数：36
> 
> 这是项目。

所以有必要`&nbsp;`在描述标签中允许。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:28:34.557

`&nbsp;`不是有效的 XML。使用 DTD 使其有效是一种糟糕的解决方法。

如果您的内容中需要它，那么该内容就是 HTML；在这种情况下，您应该

*   将其包装在[CDATA 标记](http://en.wikipedia.org/wiki/CDATA)中或
*   将 & 符号转义为`&amp;`.

[这个问题](https://stackoverflow.com/questions/1398571/html-inside-xml-should-i-use-cdata-or-encode-the-html)概述了哪种方法更好。Quentin 的回答还包含另一个解决方案，使用 XML 库来创建标记。对于您的具体示例来说，这可能有点矫枉过正，但它通常是最好的方法。

# math - RGB 颜色位图和 HSV 双线性插值颜色

> ID：12945413
> 
> 赞同：1
> 
> 时间：2012-10-18T00:24:05.647
> 
> 标签：math, graphics, colors, rgb, hsv

我想使用从将 HSV 颜色值转换为 RGB 颜色的算法来计算 200 x 200 RGB 位图，其角落的颜色为红色、绿色、蓝色和白色，并在其他地方双线性插值 HSV 颜色，并计算位图双线性插值 RGB 颜色。我在[维基百科](http://en.wikipedia.org/wiki/HSL_and_HSV#From_HSV)中找到了这个公式，但我对如何做到这一点感到困惑。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:50:31.773

好的，我想我知道你在说什么。我没有尝试运行任何这个，所以它可能有一些错误......

首先，您需要计算出红色、绿色、蓝色和白色的 HSV 值。顺时针调用这些，a，b，c，d - 例如，白色将是 [0,0,1] 或类似的缩放

对于网格中的位置，`(x,y)`插值`0 <= x <= 1`位类似于将值放入数组`out`：

```
for(int i=0; i<3; i++){
  out[i] = y*((x*a[i]) + ((1-x)*b[i])) + (1-y)*((x*d[i]) + ((1-x)*c[i]));
} 
```

在寻找线性插值时，A 和 B 之间的 x 分数由下式给出`x*A + (1-x)*B`。每个方向只做一次。

然后使用维基百科文章中的约定将它们转换为 RGB

```
void HSVtoRGB(double H, double S, double V, double[] out){
   double C = S*V;
   double H_prime = H/60; // a number in [0,3]
   double X = C*(1 - abs((H_prime%2)-1));

   // Do the big if bit
   switch((int)X){
     case 0:
       out[0] = C;
       out[1] = X;
       out[2] = 0;
     case 1:
       out[0] = X;
       out[1] = C;
       out[2] = 0;

      // etc etc

  }

  double m = V - C;
  for(int i=0; i<3; i++){
    out[i] += m;
  }
} 
```

应该这样做，给予或接受。好吧，至少应该给你一个粗略的想法。

# c# - 我可以在实体框架中覆盖插入时的身份，而无需数据库将其覆盖

> ID：12945429
> 
> 赞同：1
> 
> 时间：2012-10-18T00:26:46.473
> 
> 标签：c#, entity-framework

我的钥匙专栏

```
 this.Property(t => t.Guid).HasColumnName("Guid")
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

和插入。

```
 context.TrafficImages.Add(new TrafficImage { Guid = guids[i] });
                context.SaveChanges(); 
```

当我保存时，数据库会编写自己的 guid。无论如何，如果我定义它，让我编写自己的 guid，如果没有，db 会创建一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:08:03.997

如果您指定 DatabaseGenerationOption.Identity EF 会将您的属性视为由标识列支持的属性。在这种情况下，即使您设置了属性，当添加新实体时，该值也将被忽略，并且将使用您的 Db 生成的值。您可以删除 HasDatabaseGeneratedOption 配置，但如果您的数据库生成键，如果 EF 尝试向该列插入值，则会出现异常。如果您的数据库不生成键，那么您根本不应该有 HadDatabaseGenerationOption 配置，并且您应该在添加新实体时始终在客户端上设置键值，因为数据库不会为您创建一个。当数据库为您创建一个密钥（如果它不存在）时，我认为不存在混合模式。您可能必须为此创建一个存储过程并将其映射到 Create 操作。不幸的是 CodeFirst 不支持将存储过程映射到 CUD 操作。

# api - 推特 wp7 的请求令牌

> ID：12945431
> 
> 赞同：2
> 
> 时间：2012-10-18T00:27:06.920
> 
> 标签：api, windows-phone-7, twitter, oauth

我正在为 windows phone 7 构建一个 twitter 应用程序。但是 twitter 的 OAuth 给我带来了很多问题。我正在尝试获取请求令牌，并且每次收到消息：无法验证 oauth 签名和令牌。任何帮助，将不胜感激。

这是我的代码：

参数基本字符串：

```
public static string GetParameterString()
    {
        SystemParameters SysParameters = new SystemParameters();
        Parameters Param = new Parameters();
        StringBuilder sb = new StringBuilder();
        sb.Append(SysParameters.CallbackUrl()).Append("=");
        sb.Append(PercentEncoder(Param.callbackURL)).Append("&");
        sb.Append(SysParameters.CosumerToken()).Append("=");
        sb.Append(PercentEncoder(Param.consumerKey)).Append("&");
        sb.Append(SysParameters.Nonce()).Append("=");
        sb.Append(PercentEncoder(GetNonce())).Append("&");
        sb.Append(SysParameters.SignatureMethod()).Append("=");
        sb.Append(PercentEncoder("HMAC-SHA1")).Append("&");
        sb.Append(SysParameters.TimeStamp()).Append("=");
        sb.Append(PercentEncoder(GetTimeStamp().ToString())).Append("&");
        sb.Append(SysParameters.OauthVersion()).Append("=");
        sb.Append(PercentEncoder("1.0"));

        return sb.ToString();
    } 
```

签名基本字符串：

```
public static string GetSignatureBase()
    {
        SystemParameters SysParameters = new SystemParameters();
        Parameters Param = new Parameters();
        StringBuilder sb = new StringBuilder();

        sb.Append("POST").Append("&");
        sb.Append(PercentEncoder(SysParameters.RequestTokenURL())).Append("&");
        sb.Append(PercentEncoder(GetParameterString()));

        return sb.ToString();
    } 
```

获取签名：

```
public static string GetSignature()
{
   SystemParameters SysParameters = new SystemParameters();
   Parameters param = new Parameters();

   string signature;

   signature = Convert.ToBase64String((new HMACSHA1(Encoding.UTF8
                       .GetBytes(PercentEncoder(param.consumerSecret) + "&")))
                       .ComputeHash(Encoding.UTF8.GetBytes(GetSignatureBase())));

   return PercentEncoder(signature);      
 } 
```

获取令牌：

```
private void button2_Click(object sender, RoutedEventArgs e)
    {
        StringBuilder sb = new StringBuilder();

        sb.Append(param.RequestURL)
                        .Append(OauthHelper.RequestType.RequesToken).Append("?");
        sb.Append(sysParam.CallbackUrl()).Append("=");
        sb.Append(OauthHelper.PercentEncoder(param.callbackURL)).Append("&");
        sb.Append(sysParam.CosumerToken()).Append("=");
        sb.Append(OauthHelper.PercentEncoder(param.consumerKey)).Append("&");
        sb.Append(sysParam.Nonce()).Append("=");
        sb.Append(OauthHelper.PercentEncoder(OauthHelper.GetNonce())).Append("&");
        sb.Append(sysParam.Signature()).Append("=");
        sb.Append(OauthHelper.PercentEncoder(OauthHelper.GetSignature())).Append("&");
        sb.Append(sysParam.SignatureMethod()).Append("=");
        sb.Append(OauthHelper.PercentEncoder("HMAC-SHA1")).Append("&");
        sb.Append(sysParam.TimeStamp()).Append("=");
        sb.Append(OauthHelper.PercentEncoder(OauthHelper.GetTimeStamp().ToString()))
                                                                        .Append("&");
        sb.Append(sysParam.OauthVersion()).Append("=");
        sb.Append(OauthHelper.PercentEncoder("1.0"));

        WebBrowserTask task = new WebBrowserTask();
        task.URL = sb.ToString();

        task.Show();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:10:12.553

我已经完成了这个实现，引用了另一个代码..我的代码是这样的..

```
#region web query response methods
    /// <summary>
    /// Event that initiates QueryResponse for RequestToken request
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e">Webresponse event argument</param>
    void requestTokenQuery_QueryResponse(object sender, WebQueryResponseEventArgs e)
    {
        try
        {
            var parameters = TwitterHelperMethods.GetQueryParameters(e.Response);
            OAuthTokenKey = parameters["oauth_token"];
            tokenSecret = parameters["oauth_token_secret"];
            var authorizeUrl = TwitterSettings.AuthorizeUri + "?oauth_token=" + OAuthTokenKey;

            Dispatcher.BeginInvoke(() =>
            {
                this.browseTwitter.Navigate(new Uri(authorizeUrl));
            });
        }
        catch (Exception ex)
        {
            Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(ex.Message);
            });
        }
    }

    /// <summary>
    /// Event that initiates QueryResponse for AccessToken request
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e">Webresponse event argument</param>
    void AccessTokenQuery_QueryResponse(object sender, WebQueryResponseEventArgs e)
    {
        try
        {
            var parameters = TwitterHelperMethods.GetQueryParameters(e.Response);
            accessToken = parameters["oauth_token"];
            accessTokenSecret = parameters["oauth_token_secret"];
            userID = parameters["user_id"];
            userScreenName = parameters["screen_name"];

            TwitterHelperMethods.SetKeyValue<string>("AccessToken", accessToken);
            TwitterHelperMethods.SetKeyValue<string>("AccessTokenSecret", accessTokenSecret);
            TwitterHelperMethods.SetKeyValue<string>("ScreenName", userScreenName);

            cacheManager.SaveToIsolatedStorage(Utilities.TwitterID, userID);
            cacheManager.SaveToIsolatedStorage(Utilities.TwitterAccessToken, accessToken);
            cacheManager.SaveToIsolatedStorage(Utilities.TwitterSecretAccessToken, accessTokenSecret);
            // NavigationService.Navigate(new Uri("/HomePage.xaml", UriKind.RelativeOrAbsolute));
        }
        catch (Exception ex)
        {
            Dispatcher.BeginInvoke(() =>
            {
                MessageBox.Show(ex.Message);
            });
        }
    }
    #endregion

    #region Browser events methods

    /// <summary>
    /// Called after the broswer is loaded
    /// </summary>
    /// <param name="sender">Browser</param>
    /// <param name="e">Routed Event arguments</param>
    private void browseTwitter_Loaded(object sender, RoutedEventArgs e)
    {
        accessToken = TwitterHelperMethods.GetKeyValue<string>("AccessToken");
        accessTokenSecret = TwitterHelperMethods.GetKeyValue<string>("AccessTokenSecret");
        userScreenName = TwitterHelperMethods.GetKeyValue<string>("ScreenName");

        if (string.IsNullOrEmpty(accessToken) || string.IsNullOrEmpty(accessTokenSecret))
        {
            var requestTokenQuery = TwitterOAuthHelper.GetRequestTokenQuery();
            requestTokenQuery.RequestAsync(TwitterSettings.RequestTokenUri, null);
            requestTokenQuery.QueryResponse += new EventHandler<WebQueryResponseEventArgs>(requestTokenQuery_QueryResponse);
        }
    }

    /// <summary>
    /// Called when browser Initiates Navigation to Uri provided
    /// </summary>
    /// <param name="sender">Browser</param>
    /// <param name="e">Navigating event arguments</param>
    private void browseTwitter_Navigating(object sender, NavigatingEventArgs e)
    {
        if (e.Uri.ToString().StartsWith(TwitterSettings.CallbackUri))
        {
            cacheManager = new CacheManager();
            var AuthorizeResult = TwitterHelperMethods.GetQueryParameters(e.Uri.ToString());
            var VerifyPin = AuthorizeResult["oauth_verifier"];

            //We now have the Verification pin
            //Using the request token and verification pin to request for Access tokens

            var AccessTokenQuery = TwitterOAuthHelper.GetAccessTokenQuery(
                                                                     OAuthTokenKey,     //The request Token
                                                                     tokenSecret,       //The request Token Secret
                                                                     VerifyPin         // Verification Pin
                                                                    );
            AccessTokenQuery.QueryResponse += new EventHandler<WebQueryResponseEventArgs>(AccessTokenQuery_QueryResponse);
            AccessTokenQuery.RequestAsync(TwitterSettings.AccessTokenUri, null);
            NavigationService.Navigate(new Uri("/OtherPages/HomePage.xaml", UriKind.RelativeOrAbsolute));
        }
    }
    #endregion 
```

我的 Twitterhelpermethods 类是这样的

```
public class TwitterHelperMethods
{
    public static Dictionary<string, string> GetQueryParameters(string response)
    {
        Dictionary<string, string> nameValueCollection = new Dictionary<string, string>();
        string[] items = response.Split('&');

        foreach (string item in items)
        {
            if (item.Contains("="))
            {
                string[] nameValue = item.Split('=');
                if (nameValue[0].Contains("?"))
                    nameValue[0] = nameValue[0].Replace("?", "");
                nameValueCollection.Add(nameValue[0], System.Net.HttpUtility.UrlDecode(nameValue[1]));
            }
        }
        return nameValueCollection;
    }
} 
```

和 twitteroauthhelper.cs 是

```
public class TwitterOAuthHelper
{
    public static OAuthWebQuery GetRequestTokenQuery()
    {
        var oauth = new OAuthWorkflow
        {
            ConsumerKey = TwitterSettings.consumerKey,
            ConsumerSecret = TwitterSettings.consumerKeySecret,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            RequestTokenUrl = TwitterSettings.RequestTokenUri,
            Version = TwitterSettings.oAuthVersion,
            CallbackUrl = TwitterSettings.CallbackUri
        };

        var info = oauth.BuildRequestTokenInfo(WebMethod.Get);
        var objOAuthWebQuery = new OAuthWebQuery(info);
        objOAuthWebQuery.HasElevatedPermissions = true;
        objOAuthWebQuery.SilverlightUserAgentHeader = "Hammock";
        objOAuthWebQuery.SilverlightMethodHeader = "GET";
        return objOAuthWebQuery;
    }

    public static OAuthWebQuery GetAccessTokenQuery(string requestToken, string RequestTokenSecret, string oAuthVerificationPin)
    {
        var oauth = new OAuthWorkflow
        {
            AccessTokenUrl = TwitterSettings.AccessTokenUri,
            ConsumerKey = TwitterSettings.consumerKey,
            ConsumerSecret = TwitterSettings.consumerKeySecret,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            Token = requestToken,
            Verifier = oAuthVerificationPin,
            Version = TwitterSettings.oAuthVersion
        };

        var info = oauth.BuildAccessTokenInfo(WebMethod.Post);
        var objOAuthWebQuery = new OAuthWebQuery(info);
        objOAuthWebQuery.HasElevatedPermissions = true;
        objOAuthWebQuery.SilverlightUserAgentHeader = "Hammock";
        objOAuthWebQuery.SilverlightMethodHeader = "GET";
        return objOAuthWebQuery;
    }
} 
```

twittersettings.cs :-

```
public class TwitterSettings
{
    public static string RequestTokenUri = "https://api.twitter.com/oauth/request_token";
    public static string AuthorizeUri = "https://api.twitter.com/oauth/authorize";
    public static string AccessTokenUri = "https://api.twitter.com/oauth/access_token";

    public static string CallbackUri = "http://www.qwinixtech.com";

    public static string StatusUpdateUrl { get { return "http://api.twitter.com"; } }

    // #error TODO REGISTER YOUR APP WITH TWITTER TO GET YOUR KEYS AND FILL THEM IN HERE
    public static string consumerKey = "Your consumer key here";
    public static string consumerKeySecret = "Your consumer secret key here";

    public static string AccessToken = "Your access token here";
    public static string AccessTokenSecret = "Your Secret access token here";

    public static string oAuthVersion = "1.0a";

} 
```

这工作得很好..你需要做的只是吊床库..我希望你已经拥有它..否则请下载它..

# php - 在php中提取两个单词之间的文本

> ID：12945432
> 
> 赞同：1
> 
> 时间：2012-10-18T00:27:19.403
> 
> 标签：php, regex, string, split

我得到了以下网址

```
http://www.amazon.com/LEGO-Ultimate-Building-Set-Pieces/dp/B000NO9GT4/ref=sr_1_1?m=ATVPDKIKX0DER&s=toys-and-games&ie=UTF8&qid=1350518571&sr=1-1&keywords=lego 
```

我想提取

```
B000NO9GT4 
```

那是asin ...到现在，我可以在字符串之间进行搜索，但不是我需要的这种方式。我看到了分裂函数，我看到了爆炸。但找不到出路...而且，网址的长度会有所不同，所以我不能硬编码长度为 2..在我看来唯一有意义的事情就是拆分字符串，以便

```
http://www.amazon.com/LEGO-Ultimate-Building-Set-Pieces/dp/ 
```

成为第一部分

和

```
B000NO9GT4/ref=sr_1_1?m=ATVPDKIKX0DER&s=toys-and-games&ie=UTF8&qid=1350518571&sr=1-1&keywords=lego 
```

成为第二部分，从第二部分，我应该提取 `B000NO9GT4`

同样，我想`LEGO-Ultimate-Building-Set-Pieces`从第一部分获取产品名称

我在正则表达式方面非常糟糕，找不到出路..

有人可以指导我如何在 php 中做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:30:07.803

你可以试试

```
$str = "http://www.amazon.com/LEGO-Ultimate-Building-Set-Pieces/dp/B000NO9GT4/ref=sr_1_1?m=ATVPDKIKX0DER&s=toys-and-games&ie=UTF8&qid=1350518571&sr=1-1&keywords=lego" ;
list(,$desc,,$num,) = explode("/",parse_url($str,PHP_URL_PATH));
var_dump($desc,$num); 
```

输出

```
string 'LEGO-Ultimate-Building-Set-Pieces' (length=33)
string 'B000NO9GT4' (length=10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T00:33:04.377

这会抓取您要捕获的两条信息：

```
$url = 'http://www.amazon.com/LEGO-Ultimate-Building-Set-Pieces/dp/B000NO9GT4/ref=sr_1_1?m=ATVPDKIKX0DER&s=toys-and-games&ie=UTF8&qid=1350518571&sr=1-1&keywords=lego';

$path = parse_url($url, PHP_URL_PATH);

if (preg_match('#^/([^/]+)/dp/([^/]+)/#i', $path, $matches)) {
    echo "Description = {$matches[1]}<br />"
        ."ASIN = {$matches[2]}<br />";
} 
```

输出：

> 描述 = LEGO-Ultimate-Building-Set-Pieces
> ASIN = B000NO9GT4

简短说明：

*   包含在其中的任何表达式`( )`都将保存为捕获组。这就是我们获取 和 中数据的`$matches[1]`方式`$matches[2]`。
*   该表达式`([^/]+)`表示匹配除所有字符之外的所有字符`/`，因此实际上它捕获了 URL 中两个`/`分隔符之间的所有内容。我两次使用这种模式。`[ ]`实际定义了字符类`/`，在这种`^`情况下，它否定它，而不是匹配`/`它，而是匹配所有东西`/`。另一个例子是`[a-f0-9]`匹配字符`a,b,c,d,e,f`和数字`0,1,2,3,4,5,6,7,8,9`。 `[^a-f0-9]`会适得其反。
*   `#`用作表达式的分隔符
*   `^`跟随分隔符意味着从字符串的开头匹配。

有关正则表达式如何工作的更多信息，请参阅[www.regular-expressions.info](http://www.regular-expressions.info)和[PCRE 模式语法](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)。

# php - 带有PHP插入成功的Jquery Modal Overlay

> ID：12945434
> 
> 赞同：0
> 
> 时间：2012-10-18T00:27:35.440
> 
> 标签：php, jquery

如果 HTML 表单成功地将表单数据插入到我的数据库中，我将尝试显示 jquery 模态覆盖。

即如果插入表单数据，则显示“成功！” 模态叠加，否则会显示“抱歉，您的帖子未上传”。模态叠加。

我将如何使用 PHP 来检查数据是否被插入？

额外的信用：然后我可以在 PHP 检查之后将模态覆盖代码放在 if/else 语句中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:32:04.487

通过 Ajax 提交表单，如果 Ajax 返回成功，则调用模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:33:50.150

您应该通过 Ajax 方法调用将数据发布到 PHP，并且基于从服务器返回的值，您可以自定义消息并将其显示在模式对话框中。

# apache - apache重写查询字符串触发内部服务器错误（500）

> ID：12945440
> 
> 赞同：1
> 
> 时间：2012-10-18T00:28:24.753
> 
> 标签：apache, mod-rewrite, url-rewriting, internal-server-error

有人可以帮我解决以下问题：

首先，我有一个位于名为 2012 的目录中的索引页。索引页 $_GET 包含一个名为“slug”的参数。例子：

[http://www.mydomain.com/2012/index.php?slug=alaska-state-4a](http://www.mydomain.com/2012/index.php?slug=alaska-state-4a)

我希望重写后的 URL 如下所示：

[http://www.mydomain.com/2012/alaska-state-4a](http://www.mydomain.com/2012/alaska-state-4a)

我似乎无法让下面的重写规则正常工作。它们当然是单独的尝试，并且两者都不会同时在 .htaccess 文件中。他们不断触发内部服务器错误。

```
 RewriteRule ^2012/([^/]*)$ /2012/index.php?slug=$1 [QSA, L]
    RewriteRule ^2012/([^/]*)$ /2012/index.php?slug=$1 [L] 
```

有人可以告诉我这两个语句有什么问题并帮助修改它们以使它们按我的意图运行吗？

注意：除了我的“被禁止的村庄”被拒绝的 ips 之外，在我的 .htaccess 文件中重写尝试之上的唯一其他规则是：

```
 Options +FollowSymlinks
    RewriteEngine On

    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# c++ - 缩短长变量访问器的最佳方法是什么？

> ID：12945446
> 
> 赞同：1
> 
> 时间：2012-10-18T00:29:05.303
> 
> 标签：c++, class, function, variables

所以我有一个场景，其中类中有类，以便访问特定的变量或函数：

```
stateMachine->data->poseEstimate->getData()
stateMachine->data->poseEstimate->setData() 
```

现在这是完全合法的，但它看起来令人费解并且难以阅读。在函数中，我希望能够执行以下操作：

```
typedef stateMachine->data->poseEstimate pose

pose->getData()
pose->setData() 
```

这将使代码更具可读性。显然`typedef`不会起作用，因为它用于定义类型。有没有一种平等的方式可以让我这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:13:59.423

在实践中，我用一个引用变量给所述对象起别名，给定一个与它所在的上下文相关的描述性名称：

```
PoseEstimateType& PoseEstimate = stateMachine->data->poseEstimate;
PoseEstimate->getData();
PoseEstimate->setData(); 
```

如果您的编译器支持该`auto`关键字，则可以使用`auto`参考：

```
auto& PoseEstimate = stateMachine->data->poseEstimate;
PoseEstimate->getData();
PoseEstimate->setData(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:30:52.153

使用引用存储中间对象。我们不知道您的类型名称，但假设它`poseEstimate`是 type `MyType`：

```
MyType &pose = stateMachine->data->poseEstimate;

pose->getData();
pose->setData();

// ... 
```

# ruby-on-rails - Rails 控制台不加载 .irbrc 而 Irb 在 Windows 上加载

> ID：12945447
> 
> 赞同：0
> 
> 时间：2012-10-18T00:29:25.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, irb

我在 Windows 7 64 位（Ruby 1.9.3）上使用 RailsInstaller 安装了 Rails 3.2.8。然后我在我的 %HOME% 目录中创建了一个 .irbrc 文件 -`C:\Users\Username`包含以下内容：

```
def h obj
    puts "This object is #{obj}"
end 
```

如果我在命令行中使用 irb，我可以在 .irbrc 中访问该方法。但是，当我启动时`rails c`，该方法无法访问，这意味着 .irbrc 文件不是由 .irbrc 加载的`rails c`。

谁能帮我弄清楚为什么irb能够加载.irbrc文件，但rails控制台根本没有加载它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:12:39.820

我在 Windows 7 上的 Rails 3.2.1 应用程序上尝试了您的示例，并且`.irbrc`文件已加载到 rails 控制台中。

PATH 变量没有什么异常；它只是指向`C:\RailsInstaller\Git\cmd;C:\Program Files\RailsInstaller\Ruby1.9.3\bin`

尝试按照 Nic 博士在这篇博文底部的建议设置 IRBRC 变量：http: [//drnicwilliams.com/2006/10/12/my-irbrc-for-consoleirb/](http://drnicwilliams.com/2006/10/12/my-irbrc-for-consoleirb/)

一个旧的 Stack Overflow 问题[如何让 IRBRC 在 Win32 for Ruby 控制台上运行？](https://stackoverflow.com/questions/1024056/how-do-i-get-irbrc-running-on-win32-for-ruby-console)也可以提供一些线索。

# css - 内联块跨度导致绝对定位的图像移动

> ID：12945448
> 
> 赞同：1
> 
> 时间：2012-10-18T00:29:43.807
> 
> 标签：css

我按照我想要的方式设置了页面，徽标绝对位于右下角： [http ://testing.wizbury.com/onlinegamepage2.php?id=6](http://testing.wizbury.com/onlinegamepage2.php?id=6)

然后我在 css 中添加了以下条目，这样当框中的一行文本运行时间过长时，就不会添加太多额外的空间：

```
.ogfeatures li span {  
    vertical-align:middle;   
    display:inline-block;   
    line-height:1em;  
}​ 
```

该添加会导致徽标位于内容区域的左上角（在 Flash 游戏下方）。我只能发布到链接，但它与上面的链接相同，使用 onlinegamepage.php

该页面从 db 动态生成大量内容，因此 Dreamweaver 的预览效果不佳。我决定将代码放入提琴手​​和硬编码的东西，这样我就可以玩布局......它在提琴手中工作正常，即使添加了跨度
[。http://jsfiddle.net/wrX8g/](http://jsfiddle.net/wrX8g/)

所以现在我完全糊涂了。我确定我缺少一些简单的事情，但我无法弄清楚。我将不胜感激任何见解。

谢谢，
道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:32:00.350

我不确定 StackOverflow 是否正在执行此操作，或者它是否在您的原始代码中，但是当我将您的 CSS 复制到另一个文件中时，在结束 } 之后，有一个[零宽度空格](http://en.wikipedia.org/wiki/Zero-width_space)字符，这在 CSS 和，我相信，导致声明被浏览器抛出。我推测在你使用的任何浏览器中，它也会丢弃所有后续声明，并且你已经将那段 CSS 代码放在定位徽标的 CSS 声明的正上方，从而防止该声明生效并将没有任何应用 CSS 的标志。

解决方法是简单地删除有问题的字符，您可以通过将插入符号放在其中包含 } 的行的发送并退格来完成。插入符号不应该移动，这告诉您它删除了一个不可见的字符。如果删除它不起作用，您也可以在十六进制编辑器中进行。

# postgresql - 使用 pg_dump 获取数据库的快照

> ID：12945451
> 
> 赞同：1
> 
> 时间：2012-10-18T00:30:06.533
> 
> 标签：postgresql

我正在尝试设置一个脚本以将数据库的副本从一台服务器复制到另一台服务器。

感谢这篇文章[将 PostgreSQL 数据库复制到另一台服务器](https://stackoverflow.com/questions/1237725/how-to-copy-postgres-database-to-another-server)，我找到了一种方法来做到这一点。

但我需要做的是在复制过程中更改数据库的名称。我考虑过使用 sed 并进行简单的文本替换。但我担心这可能会损坏数据库。

有谁知道这样做的正确方法？

**按照这里的要求是我正在使用的命令**

```
pg_dump -C -U remoteuser -h remoteServer dbname | psql -h localhost -U localadmin template1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:35:08.857

只需恢复到不同的数据库。对于来自的自定义格式`pg_restore`的`-Fc`转储：`pg_dump`

```
createdb newdbname
pg_restore --dbname newdbname database.dump 
```

*对于未*`-C`使用以下选项创建的SQL 格式转储`pg_dump`：

```
createdb newdbname
psql -f database_dump.sql newdbname 
```

如果您从远程主机流式传输转储，只需省略`-f database_dump.sql`转储数据来自标准输入。

您不能轻松地`CREATE DATABASE`使用与还原相同的命令，因为您需要连接到不同的数据库`template1`，例如才能创建新数据库。因此，在您的示例中，您可能会：

```
psql -h localhost -U localadmin template1 -c 'CREATE DATABASE newdb;'
pg_dump -U remoteuser -h remoteServer dbname | psql -h localhost -U localadmin newdb 
```

请注意省略`-C`标志 to `pg_dump`。

第一个命令只是普通的书写方式`createdb -h localhost -U localadmin newdb`。

* * *

**更新**：如果你坚持使用标志`pg_dump`创建，只要你非常小心，你确实可以只转储。文件开头应该只有四行（一行注释）引用数据库名称。对于使用 Pg 9.1 转储的数据库名称“regress” ：`-C``sed``pg_dump -C`

```
--
-- Name: regress; Type: DATABASE; Schema: -; Owner: craig
--

CREATE DATABASE regress WITH TEMPLATE = template0 ENCODING = 'UTF8' LC_COLLATE = 'en_US.UTF-8' LC_CTYPE = 'en_US.UTF-8';

ALTER DATABASE regress OWNER TO craig;

\connect regress 
```

这可以通过三个（或四个，如果你想重写注释）非常具体的`sed`命令非常安全地转换。*但是*，不要只对数据库名称进行全局查找和替换。

```
sed \
  -e 's/^CREATE DATABASE regress/CREATE DATABASE newdbname/' \
  -e 's/^ALTER DATABASE regress/ALTER DATABASE newdbname/' \
  -e 's/^\\connect regress/\\connect newdbname/' \
  -e 's/^--Name: regress/--Name: newdbname/' 
```

这应该是最后的手段；没有`-C`.

# cocoa - 高度约束阻止调整 NSWindow 的大小

> ID：12945455
> 
> 赞同：1
> 
> 时间：2012-10-18T00:30:43.723
> 
> 标签：cocoa, xcode4, interface-builder, nswindow

我正在尝试掌握 NSViewConstraints。我很喜欢他们; 它们对我来说比以前的系统更有意义。

我有一个窗口，顶部有一个 22 像素高的子视图，下面是一个无边框的无边框 NSTabView。目标是让顶部子视图永远不会调整其高度。

没有任何限制，自动格式化会处理大部分工作。唯一的麻烦是调整窗口大小会导致上部子视图改变其高度。我看似合乎逻辑的反应是将高度固定为 22。我只保留了边距限制，因为 NSTabView 已经很好地处理了调整大小。

通过固定上部子视图的高度，窗口现在拒绝垂直调整大小！我在任何地方都没有看到任何文档说明这是预期的或其背后的逻辑。我已经弄乱了各种约束配置来克服它，但没有任何效果。

两个问题：

1.  为什么固定一个子视图的高度冻结窗口高度调整大小？Xcode 的逻辑是什么？
2.  什么约束设置将实现所需的定位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:53:08.273

我刚刚测试了按照您的描述创建一个窗口，并固定 22px 视图的高度。这为视图的高度创建了一个用户约束。

但是，它还在父视图（窗口的内容视图）上创建了 2 个约束，一个用于 Top Space 到 22px 视图，另一个用于底部空间到 22px 视图。这些约束是阻止您调整窗口大小的原因。您应该选择第二个约束并将其删除（但保留第一个约束，因为它很好）。

# asp.net - 带有子报告的 RDLC 从 8.0 升级到 10.0 失败

> ID：12945456
> 
> 赞同：1
> 
> 时间：2012-10-18T00:30:43.240
> 
> 标签：asp.net, reportviewer, subreport

我有一个使用 ReportViewer.Common 和 ReportViewer.Webforms 在 ASP.NET 应用程序中运行的报告。使用 2005 版 (8.0.0.0) 的 RDL 文件（重命名为 RDLC），它在我的 ASP.NET Web 应用程序中运行良好。将报告升级到 2008 (10.0.0.0) 后，我的报告不再有效。

错误非常广泛，但以：

在Microsoft.ReportingServices.OnDemandProcessing.OnDemandProcessingContext.AbortHelper.ThrowAbortException（字符串reportUniqueName）在Microsoft.ReportingServices.OnDemandProcessing.OnDemandProcessingContext.CheckAndThrowIfAborted（）在Microsoft.ReportingServices.OnDemandProcessing.RetrievalManager.FetchData（布尔mergeTran
在Microsoft.ReportingServices.OnDemandProcessing.RetrievalManager。 PrefetchData(ReportInstance reportInstance, ParameterInfoCollection 参数, Boolean mergeTran)

我做了什么：

我已经检查并正在设置报告的所有参数。

我使用有效的 DataTable 对象设置了所有数据源。我已经检查了我的 DataTable 中存在的所有列。

我有一个 SubReportProcessing 事件处理程序设置。处理步骤进入该函数，我在该函数中使用有效数据设置了必要的 DataTable。这适用于对子报表的每次调用。

不幸的是，带有子报表的报表在 BI Dev Studio 中运行良好。去搞清楚。

我可以 .LocalReport.Render() 并抛出一个异常，但如上所述，该错误在 .NET 报告引擎中确实很深。

我意识到大多数人会说我缺少一个参数。我可以是。

在提供子报表数据集后，如何调试此报表？是否可以启用某种程度的跟踪以充分利用渲染引擎？

另一个问题是：有没有办法控制 SubReport Render 的超时时间？我已将报告脚本管理器设置为 900 秒（高）。

提前感谢您在调试此问题时提供的任何指导。

担

Dan.Zemmels@zcsi.net

# python - Python GIL：表达式中的所有参与者是否在表达式期间都增加了引用计数？

> ID：12945457
> 
> 赞同：2
> 
> 时间：2012-10-18T00:30:43.957
> 
> 标签：python, gil

假设我有一个简单的 C++ 类：

```
class Widget
{
public:
    Widget() :
            x(1)
    { }

    void sleep()
    {
        sleep(x);
    }

private:
    int x;
}; 
```

`Widget::sleep`块，所以我想释放 GIL 以便 Python 可以做一些其他的事情，所以我包装`Widget::sleep`在一个这样的函数中：

```
static void pyWidgetSleep(Widget& self)
{
    PyThreadState* state = PyEval_SaveThread();
    self.sleep();
    PyEval_RestoreThread(state);
} 
```

为了完整起见，绑定代码如下所示：

```
BOOST_PYTHON_MODULE(libnative)
{
    boost::python::class_<Widget>("Widget")
        .def("sleep", &pyWidgetSleep);
} 
```

我有一个简单的 Python 脚本，如下所示：

```
import libnative
import threading

class C:
    def __init__(self):
        self.x = libnative.Widget()
        self.sleeping = False

    def foo(self):
        self.sleeping = True
        self.x.sleep()

c = C()
t = threading.Thread(target=c.foo)
t.start()
while not c.sleeping:
    pass
del c.x 
```

表达式中的所有参与者是否在表达式期间都增加了他们的引用计数？`c.x`在使用时唯一的引用`C.foo`是`c`，后面的行`t.start()`方便地删除。由于`pyWidgetSleep`释放 GIL，`del c.x`可能会减少对`Widget`实例的最后引用，从而导致未定义的行为。

* * *

我无法在我的机器上进行此中断，这似乎很好地表明它可以按我的预期工作，但引用计数没有记录到这种清晰程度（或者，至少，我可以' t 似乎找到它）。CPython 的相关部分似乎是`PyEval_EvalCodeEx`，看起来它适用`Py_INCREF`于函数调用中涉及的所有参数，但我可能完全不关心那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:50:11.873

这个问题的答案是*肯定的，它是安全的*。这是由于在 Python 中如何调用成员函数。考虑是否`Widget`在 Python 中实现：

```
class Widget:
    def __init__(self):
        self.x = 1

    def sleep(self):
        os.sleep(self.x) 
```

注意第一个参数`Widget.sleep`如何`self`？引用计数在调用期间递增！回想起来似乎很明显...

# c# - C# Microsoft.Office.Interop

> ID：12945462
> 
> 赞同：0
> 
> 时间：2012-10-18T00:32:07.660
> 
> 标签：c#, ms-office, office-interop

我需要引用这个库，但是当我右键单击并添加引用时，我在列表中找不到它。

我安装了office 2007。

```
C# Microsoft.Office.Interop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:36:13.987

您必须先安装 Office 主互操作程序集。您可以从[http://www.microsoft.com/en-us/download/details.aspx?id=18346下载](http://www.microsoft.com/en-us/download/details.aspx?id=18346)

# java - 清除二维数组

> ID：12945463
> 
> 赞同：1
> 
> 时间：2012-10-18T00:32:10.513
> 
> 标签：java, multidimensional-array

如何清除 6x6“表”，以便清除其中的任何内容？（我已经用 ActionListener ...等制作了清除按钮）

```
 //other code above that creates window, below is the code that creates the table I need to clear

         square = new JTextField[s][s];
    for (int r=0; r!=s; r++) {
        symbols[r] = new JTextField();
        symbols[r].setBounds(35+r*35, 40, 30, 25);
        win.add(symbols[r], 0);
        for (int c=0; c!=s; c++) {
            square[r][c] = new JTextField();
            square[r][c].setBounds(15+c*35, 110+r*30, 30, 25);
            win.add(square[r][c], 0);
        }
    }
    win.repaint();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:12:32.663

循环遍历数组并将每个元素设置为空。您可以使用[java.utils.Arrays](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)实用程序类使事情变得更干净/更整洁。

```
for( int i = 0; i < square.length; i++ )
   Arrays.fill( square[i], null ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:16:29.067

就像是...

```
for (int index = 0; index < square.length; index++) {
    square[index] = null;
}
square = null; 
```

会做更多的伎俩（实际上最后一行通常就足够了）......

如果你真的偏执...

```
for (int index = 0; index < square.length; index++) {
    for (int inner = 0; inner < square[index].length; inner++) {
        square[index][inner] = null;
    }
    square[index] = null;
}
square = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-23T01:12:19.690

这是一条线解决方案：

```
Arrays.stream(square).forEach(x -> Arrays.fill(x, null)); 
```

# shopify - 获取客户邀请令牌

> ID：12945465
> 
> 赞同：1
> 
> 时间：2012-10-18T00:32:25.440
> 
> 标签：shopify

令人讨厌的是，Shopify 在完成结帐之前不允许注册。我希望人们能够在购买*前*注册，以便我可以使用他们的登录状态来触发一些模板更改、折扣等。

我已经弄清楚了如何使用 API 添加客户帐户，但这实际上只会设置帐户以进行激活。我必须从 Shopify 管理面板手动批准每个注册。不酷！

邀请电子邮件包含遵循此模式的 URL： http: [//shopname.myshopify.com/account/activate/14e18ab6887f4f61d8fb038bb956be99](http://shopname.myshopify.com/account/activate/14e18ab6887f4f61d8fb038bb956be99)

有谁知道是否有办法使用 API 获取激活令牌，这样我就可以在添加用户后直接发送自己的激活电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T17:46:13.037

这现在在管理员中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:49:14.753

不幸的是，无法创建客户帐户并自动发送激活电子邮件。这是我们已经意识到并希望在未来版本中解决的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-20T18:11:37.650

您现在可以从 Shopify 后台发送电子邮件邀请，但这仍然是手动的。您必须进入每个客户并单击链接以发送邀请。

现在 Shopify 中有一个名为“自动帐户邀请”的应用程序，它会在 Shopify 中创建客户时自动发送邀请。

[Shopify 的自动帐户邀请](https://apps.shopify.com/automatic-account-invites)

# macos - 运行 shell 脚本以绕过权限的 Apple 脚本

> ID：12945466
> 
> 赞同：1
> 
> 时间：2012-10-18T00:32:25.633
> 
> 标签：macos, bash, shell, applescript

我在 Mac OS X 上创建了一个 shell .command，我想分发它。根据我的测试，您无法通过双击执行 .command 文件而不首先更改权限（使其可执行。）我不希望用户使用终端并更改权限，这对他们来说太难了。

shell 脚本根据脚本所在的位置为项目创建文件夹结构。它需要能够在用户放置它的任何地方运行。

我所做的研究表明，我需要使用 Apple 脚本来运行文件以提示用户输入密码以绕过权限。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:51:11.073

通过 zip 或 DMG 分发文件 - 道具 Thilo。

# sql-server-2008 - 如何在全文索引搜索 SQL 的两列上执行 CONTAINS()

> ID：12945479
> 
> 赞同：3
> 
> 时间：2012-10-18T00:34:26.080
> 
> 标签：sql-server-2008, full-text-search, contains

我有一个包含以下列的表（MyTable）：

Col1: NameID VARCHAR(50) PRIMARY KEY NOT NULL Col2: 地址 VARCHAR(255)

数据示例：

名称：'1 24' 地址：'1234 Main St.'

在使用默认参数制作目录后，我在表格上做了一个全文索引。

如何实现以下查询：

```
 SELECT * FROM MyTable
 WHERE CONTAINS(NameID, '1')
 AND CONTAINS(Address, 'Main St.'); 
```

但是我的查询没有返回任何结果，这没有意义，因为这确实有效：

```
 SELECT * FROM MyTable
WHERE CONTAINS(Address, 'Main St.'); 
```

这也是：

```
 SELECT * FROM MyTable
 WHERE CONTAINS(Address, 'Main St.')
 AND NameID LIKE '1%' 
```

但这也不起作用：

```
 SELECT * FROM MyTable
 WHERE CONTAINS(NameID, '1'); 
```

为什么在设置全文索引时选择此列包含在地址列中时，我无法查询索引的主键列（名称）？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:41:11.857

由于 NameID 字段是 varchar 类型，全文将很好地处理索引。

CONTAINS(NameID, '1') 不返回任何搜索结果的原因是'1'（和其他如此小的数字）被全文视为噪声词并在索引期间被过滤掉。

要获取停用词列表，请运行以下查询 -

```
select * from sys.fulltext_system_stopwords where language_id = 1033; 
```

您需要关闭或修改停止列表，可以在[此处](https://stackoverflow.com/questions/8435602/sql-2008-turn-off-stop-words-for-full-text-search-query)找到示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:15:14.240

我认为这里最大的问题（我编辑了我的问题以反映这一点）是我有代表主键名称的整数，全文目录上的 Contains() 函数不兼容。这是不幸的，我仍在寻找一个全文替代使用整数目录。

# c - &errno 是合法的 C 吗？

> ID：12945486
> 
> 赞同：52
> 
> 时间：2012-10-18T00:35:11.807
> 
> 标签：c, language-lawyer, errno

每 7.5，

> [errno] 扩展为具有 int 类型的可修改 lvalue175)，其值由几个库函数设置为正错误数。未指定 errno 是宏还是使用外部链接声明的标识符。如果为了访问实际对象而禁止宏定义，或者程序定义了名称为 errno 的标识符，则行为未定义。
> 
> 175) 宏 errno 不必是对象的标识符。它可能会扩展为函数调用产生的可修改左值（例如，*errno()）。

我不清楚这是否足以要求`&errno`不违反约束。C 语言具有左值（例如寄存器存储类变量；但是这些只能是自动的，因此`errno`不能这样定义），对于这些左值，`&`运算符是违反约束的。

如果`&errno`是合法的C，它是否必须是常数？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T00:59:22.363

所以§6.5.3.2p1 指定

> 一元 & 运算符的操作数应为函数指示符、[] 或一元 * 运算符的结果，或指定不是位域且未使用寄存器存储类说明符声明的对象的左值.

我**认为**这可以理解`&lvalue`为对于不在这两个类别中的任何左值都可以。正如你所提到的，`errno`不能用 register 存储类说明符声明，我认为（虽然我现在不追逐要检查的引用）你不能有一个类型为 plain 的位域**`int`**。

所以我相信规范要求`&(errno)`是合法的 C.

> 如果 &errno 是合法的 C，它是否必须是常量？

据我了解，允许`errno`成为宏的部分原因（以及它在例如 glibc 中的原因）是允许它成为对线程本地存储的引用，在这种情况下，它肯定不会在线程之间保持不变. 而且我看不出有任何理由期望它必须保持不变。只要 的值`errno`保留指定的语义，我认为不正当的 C 库没有理由不能`&errno`在程序过程中更改为引用不同的内存地址——例如，每次设置 时释放和重新分配后备存储`errno`。

您可以想象维护一个由库设置的最后 N errno 值的环形缓冲区，并且`&errno`始终指向最新的。我认为它不会特别有用，但我看不出它有任何违反规范的方式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-31T03:12:30.720

我很惊讶还没有人引用[C11 规范](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)。为长引用道歉，但我相信它是相关的。

> 7.5 错误
> 
> 标头定义了几个宏...
> 
> ...和
> 
> `errno`
> 
> 它扩展为具有类型`int`和线程本地存储持续时间的可修改左值（201），其值由几个库函数设置为正错误数。如果为了访问实际对象而禁止宏定义，或者程序定义了名称为 的标识符`errno`，则行为未定义。
> 
> 初始线程中的值`errno`在程序启动时为零（`errno`其他线程中的初始值为不确定值），但绝不会被任何库函数设置为零。（202） errno 的值可以通过以下方式设置为非零一个库函数调用，无论是否有错误，只要 `errno`在本国际标准的函数描述中没有记录使用。
> 
> (201) 宏`errno`不必是对象的标识符。它可能会扩展为函数调用产生的可修改左值（例如，`*errno()`）。
> 
> (202) 因此，`errno`用于错误检查的程序应在库函数调用之前将其设置为零，然后在后续库函数调用之前对其进行检查。当然，库函数可以保存`errno`on entry 的值，然后将其设置为零，只要`errno`在返回之前如果 ' 的值仍然为零，则恢复原始值。

“线程本地”的意思`register`是out。类型`int`表示位域已出（IMO）。所以`&errno`在我看来是合法的。

持续使用诸如“它”和“价值”之类的词*表明*该标准的作者并没有考虑`&errno`成为非常数。我想人们可以想象一个`&errno`在特定线程中不是恒定的实现，但要按照脚注所说的方式使用（设置为零，然后在调用库函数后检查），它必须是故意对抗的，并且可能需要专门的编译器支持只是为了对抗。

简而言之，如果规范确实允许非常量`&errno`，我认为这不是故意的。

[更新]

R. 在评论中提出了一个很好的问题。经过思考，我相信我现在知道了他问题的正确答案，以及原始问题的正确答案。让我看看我能不能说服你，亲爱的读者。

R. 指出 GCC 在顶层允许这样的事情：

```
register int errno asm ("r37");  // line R 
```

这将声明`errno`为寄存器中保存的全局值`r37`。显然，这将是一个线程局部可修改的左值。那么，一个符合标准的 C 实现可以这样声明`errno`吗？

答案是**否定**的。当您或我使用“声明”一词时，我们通常会想到一个口语化和直观的概念。但是标准并没有口语化或直观地表达；它说话*准确*，而且它的目的只是使用定义明确的术语。在“声明”的情况下，标准本身定义了该术语；当它使用这个术语时，它使用的是它自己的定义。

通过阅读规范，您可以准确地了解“声明”是什么以及它*不是*什么。换句话说，该标准描述了语言“C”。它没有描述“某种不是 C 的语言”。就标准而言，“带有扩展的 C”只是“某种不是 C 的语言”。

因此，从标准的角度来看，行 R*根本不是声明*。它甚至不解析！不妨读一读：

```
long long long __Foo_e!r!r!n!o()blurfl??/** 
```

就规范而言，这与 R 行一样是“声明”；即，一点也不。

因此，当 C11 规范在第 6.5.3.2 节中说：

> 一元运算`&`符的操作数应该是一个函数指示符、一个`[]`或一元运算符的结果`*`，或者是一个左值，它指定一个不是位域且未使用寄存器存储类说明符声明的对象。

...它的意思是非常精确的东西，不*涉及*像 Line R 这样的东西。

现在，考虑引用的`int` *对象*的声明。`errno`（注意：我不是指`errno` *name*的声明，因为如果是一个宏，当然可能没有这样的声明`errno`。我的意思是底层`int`对象的声明。）

上面的语言说你可以获取一个左值的地址，除非它指定一个位域或者它指定一个对象 "declared" `register`。底层对象的规范`errno`说它是一个`int`具有线程本地持续时间的可修改左值。

现在，规范确实没有说`errno`必须声明底层对象。也许它只是通过一些实现定义的编译器魔法出现。但同样，当规范说“使用寄存器存储类说明符声明”时，它使用了自己的术语。

因此，要么底层`errno`对象在标准意义上被“声明”，在这种情况下，它不能既是`register`线程本地的；或者它根本没有被声明*，*在这种情况下它没有被声明`register`。不管怎样，因为它是一个左值，你可以取它的地址。

（除非它是位域，但我认为我们同意位域不是类型的对象`int`。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T03:27:14.493

最初的实现`errno`是一个全局 int 变量，各种标准 C 库组件在遇到错误时用来指示错误值。然而，即使在那些日子里，人们也必须小心[可重入代码](http://en.wikipedia.org/wiki/Reentrant_%28subroutine%29)或库函数调用，这些函数调用可能会`errno`在您处理错误时设置为不同的值。`errno`通常，如果由于某些其他函数或代码段显式或通过库函数调用设置值的可能性而需要任何时间长度的错误代码，则通常会将值保存在临时变量中。

因此，对于全局 int 的原始实现，使用运算符的地址并根据地址保持不变几乎内置于库的结构中。

然而，对于多线程，不再有单个全局，因为拥有单个全局不是线程安全的。[因此，拥有线程本地存储](http://en.wikipedia.org/wiki/Thread-local_storage)的想法可能是使用返回指向已分配区域的指针的函数。因此，您可能会看到类似于以下完全虚构示例的构造：

```
#define errno (*myErrno())

typedef struct {
    // various memory areas for thread local stuff
    int  myErrNo;
    // more memory areas for thread local stuff
} ThreadLocalData;

ThreadLocalData *getMyThreadData () {
    ThreadLocalData *pThreadData = 0;   // placeholder for the real thing
    // locate the thread local data for the current thread through some means
    // then return a pointer to this thread's local data for the C run time
    return pThreadData;
}

int *myErrno () {
    return &(getMyThreadData()->myErrNo);
} 
```

然后`errno`将被用作单个全局变量而不是线程安全的 int 变量，`errno = 0;`或者像检查它`if (errno == 22) { // handle the error`，甚至像`int *pErrno = &errno;`. 这一切都行得通，因为最终线程本地数据区域被分配并保持不变并且不会四处移动，并且`errno`看起来像的宏定义`extern int`隐藏了其实际实现的管道。

我们不想要的一件事是`errno`在我们访问值时使用某种动态分配、克隆、删除序列在线程的时间片之间突然移动地址。当你的时间片到了，它就到了，除非你有某种同步，或者在你的时间片过期后保持 CPU 的某种方式，让线程局部区域移动对我来说似乎是一个非常冒险的提议。

这反过来意味着您可以依赖运算符的地址为您提供特定线程的常量值，尽管线程之间的常量值会有所不同。我可以很好地看到库使用的地址，`errno`以减少每次调用库函数时进行某种线程本地查找的开销。

在线程中将地址`errno`作为常量还提供了与使用 errno.h 包含文件的旧源代码的向后兼容性，正如他们应该做的那样（请参阅[linux 的此手册页以获取 errno](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)，其中明确警告不要`extern int errno;`像在过去）。

我阅读标准的方式是允许这种线程本地存储，同时保持与旧时使用`extern int errno;`时相似的语义和语法，`errno`并允许旧用法以及用于不支持的嵌入式设备的某种交叉编译器多线程。然而，由于使用了宏定义，语法可能相似，因此不应使用旧式快捷方式声明，因为该声明不是实际的声明`errno`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T15:00:42.680

我们可以找到一个反例：因为位域可以有 type `int`，`errno`所以可以是位域。在那种情况下，`&errno`将是无效的。标准的行为在这里没有明确说你可以写`&errno`，所以*未定义行为*的定义在这里适用。

> **C11 (n1570), § 4\. 一致性**
> 未定义的行为在本国际标准中以“未定义的行为”一词或省略任何明确的行为定义来表示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T04:28:17.187

这似乎是一个有效的实现，其中`&errno`会违反约束：

```
struct __errno_struct {
    signed int __val:12;
} *__errno_location(void);

#define errno (__errno_location()->__val) 
```

所以我认为答案可能是否定的......

# css - SCSS structure versus multiple CSS classes

> ID：12945488
> 
> 赞同：0
> 
> 时间：2012-10-18T00:35:17.620
> 
> 标签：css, sass

I have just started using SCSS for the first time. I'm noticing that the resulting CSS is somewhat less optimised than it would be if I had written it by hand. For example, I am using mixins for style duplication, like this:

```
@mixin button {
    border-radius: 4px 20px 20px 4px;
    -moz-border-radius: 4px 20px 20px 4px;
}
.enquire {
    .live-chat {
        @include button;
        background: #21a649;
    }
    .enquire-now {
        @include button;
        background: #33b1ff;
    }
} 
```

Then all I need on the button is the single class, "enquire-now", and all the styles are included in that one class in the CSS.

If I had written this by hand, however, I would have used 2 classes, like this:

```
.button {
    border-radius: 4px 20px 20px 4px;
    -moz-border-radius: 4px 20px 20px 4px;
}
.enquire .live-chat {
    background: #21a649;
}
.enquire .enquire-now {
    background: #33b1ff;
} 
```

And then on the element, used "button enquire-now"

So by using the mixin, I am minimising the classes used in my HTML and making it pleasant to write, but am making my actual CSS file much longer! This seems somewhat counterproductive... Have I missed something?

What's the point of mixins, if doing the old fashioned way actually produces a smaller CSS file?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:09:53.963

Use the [`@extend`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend) directive to have easier to maintain code, and prevent duplication of styles:

```
%button {
    border-radius: 4px 20px 20px 4px;
    -moz-border-radius: 4px 20px 20px 4px;
}
.enquire {
    .live-chat {
        @extend %button;
        background: #21a649;
    }
    .enquire-now {
        @extend %button;
        background: #33b1ff;
    }
} 
```

Which compiles to this:

```
.enquire .live-chat, .enquire .enquire-now {
border-radius: 4px 20px 20px 4px;
-moz-border-radius: 4px 20px 20px 4px;
}
.enquire .live-chat {
background: #21a649;
}
.enquire .enquire-now {
background: #33b1ff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:52:03.417

Its a trade off. You get eaiser to author, more maintainable CSS in trade for it being more verbose. And as i found out recently there is this pesky thing in IE were you cant have more than a certain number of selectors in a single CSS file and then it also has a limit on the number of CSS files. So for large site keeping our selector count down might be just as if not more important than the size of the file(s). Especially since you can mitigate the filesize issue by minifiying and then serving compressed (gzipped) versions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:58:15.593

Indeed use `@extend` instead: [Sass Extend Reference](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend)

# java - java.util.Date 是否有任何字段转换器？

> ID：12945497
> 
> 赞同：0
> 
> 时间：2012-10-18T00:36:29.053
> 
> 标签：java, playorm

我想在我的 playOrm 映射中使用 Date 字段。但是，如果我使用

```
private Date birthDate; 
```

在我的 bean 中，它给了我一个例外，说不支持这种类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:04:34.063

如果您打开问题，我可以添加日期。当人们使用 Date 时，我正在考虑实际上抛出一个异常，尽管如此..

> 请使用 joda-time 中的 LocalDate、LocalTime 或 LocalDateTime，它们本应添加到 jdk7 中，但很可能最终会添加到 jdk8 中。原因是 java.util.Date 和 java 中的 Calendar 存在错误，并且在 jdk 错误系统中有许多已知错误。

是否也看到将 [Joda Time 包含在 Java 7 中？](https://stackoverflow.com/questions/1724474/joda-time-to-be-included-in-java-7)

但是，如果您仍想使用日期，请按以下方法

```
Map<Class, Converter> converters = new HashMap<Class, Converter>();
Converter d = new DateConverter();
converters.put(Date.class, d); 
```

然后，您需要使用 DateConverter 类实现 Converter 接口，并实现 byte[] to Date 和 Date to byte[] 和 String to Date 和 Date to String 方法。注意：这些方法都用于 S-SQL 和转换实体......它们都使用相同的转换器。

字符串转换非常重要，因为命令行工具将使用它们来转换您的命令行 S-SQL 以查询对象。

但是，如果您希望它内置在 PlayOrm 中，只需打开一个问题，我可以很快完成但我仍然建议您在 joda-time 中使用 LocalDateTime ，因为它更可靠，您可以用它做更多事情...... .在使用了 joda-time 之后，它与 C# date apis 相当，并且比旧的 java 东西好得多。

院长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:05:35.017

我不确定您要的是什么，但正如 Java API for Date 中所述，“从 JDK 1.1 开始，`Calendar`该类应用于在日期和时间字段之间进行转换，`DateFormat`该类应用于格式化和解析日期字符串。不推荐使用 Date 中的相应方法。

# android - Activity 缺少 Android 视图面板

> ID：12945504
> 
> 赞同：0
> 
> 时间：2012-10-18T00:37:28.777
> 
> 标签：android, eclipse, android-layout

好的，我在 Eclipse for Android 中创建了一个新项目。我的 MainActivity 是给我的。它在 res.layout 文件夹中有一个 activity_main.xml，我可以将小部件拖放到活动上。

我创建了一个名为 SurveyActivity 的新活动，但找不到允许我使用调色板的 xml 文件。

创建活动时我做错了什么，还是我需要做更多才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:48:03.280

我假设您创建了一个类（而不是一个 Activity，可以使用 ADT 20 完成）和扩展的 Activity。然后你必须自己创建一个布局xml。右键单击 te 布局文件夹 -> 新建 -> Android xml 文件。`setContentView()`在您的 Activity中设置此布局。并且不要忘记在您的清单中注册该活动。

# javascript - Win8 Metro (JS/HTML5) - 页面导航后视频不可见

> ID：12945505
> 
> 赞同：3
> 
> 时间：2012-10-18T00:37:38.027
> 
> 标签：javascript, html, video, singlepage, single-page-application

我正在开发一个具有两个可导航页面的媒体播放应用程序。我想存储视频对象，这样如果用户离开视频页面然后返回，相同的对象被加载到 div 中，用户可以简单地从他们离开的地方继续。

我的问题：当用户返回视频页面时，视频元素从头开始重新加载，我无法使用预先存在的视频数据加载它。结果，屏幕上看不到视频。但是，我的播放器控件与原始视频对象相关联并继续按预期工作。

我是这些语言的新手，所以任何建议都会有很大帮助。我这辈子都想不通。

这是代码。我在另一个脚本中初始化 mediaSession 和标志，以便它们在页面导航期间持续存在。

**播放器页面 HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>homepage</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link href="/css/default.css" rel="stylesheet" />
    <link href="/pages/mediacontent/mediacontent.css" rel="stylesheet" />
<!--    <script src="/js/appData.js"></script> -->
    <script src="/pages/mediacontent/mediacontent.js"></script>

</head>
<body>
    <div class="body_div">
        <header id="header_titlearea">
            <h1 class="win-type-ellipsis">
                <img src="/images/logo.png" /><span> Decoder Sample App</span>
            </h1>
        </header>
       <div id="article_maintext">
           <video id="playbackVideo" height="100%" preload="auto">
           <!--<video id="Video1" height="100%" preload="auto" >-->
                    <!--<source src="/media/demo.mp4" />-->
           </video>
        </div>

         <footer id="footer">
             <br />
             <input type="range" class="s_Class" id="s_Seek" value="0"><br />
             <button class="action secondary" id="b_playFromFile">File Picker</button>
             <button class="action secondary" id="b_playbackPause">Play</button>
             <button class="action secondary" id="b_playbackStop">Stop</button>
             <button class="action secondary" id="b_playbackRewind">Rewind</button>
             <button class="action secondary" id="b_playbackForward">Forward</button>
             <button class="action secondary" id="b_playbackMute">Mute</button>
             <button id="navButton" class="navButton" title="Nav" >About</button><br />
             <p id="outputtext">debug monitor</p>
         </footer>
      </div>

</body>
</html> 
```

**播放器页面 JS（摘录）：**

```
(function f() {
    "use strict";

    WinJS.UI.Pages.define("/pages/mediacontent/mediacontent.html", {
        ready: function(element, options) {
            if (mediaSession.navflag === false) {
                mediaSession.vid = WinJS.Utilities.query("#playbackVideo")[0];
                mediaSession.vid.src = "/media/demo.mp4";
                document.getElementById('outputtext').innerHTML = "new mediaSession set!"
            } else if (mediaSession.navflag === true) {
                if (mediaSession.pauseflag === false) {
                    //mediaSession.vid.play();
                }
                document.getElementById('outputtext').innerHTML = "existing mediaSession!"
                *-Here is where I need help-*
                mediaSession.navflag = false;
            }
...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:10:16.077

在一些错误的线索之后，我想出了如何使用 replaceChild() 方法用我的视频数据替换重新加载的视频元素。

新的 javascript 看起来像这样：

```
 (function f() {
    "use strict";

    WinJS.UI.Pages.define("/pages/mediacontent/mediacontent.html", {
        ready: function(element, options) {
            if (mediaSession.navflag === false) {
                mediaSession.vid = WinJS.Utilities.query("#playbackVideo")[0];
                mediaSession.vid.src = "/media/demo.mp4";
                document.getElementById('outputtext').innerHTML = "new mediaSession set!"
            } else if (mediaSession.navflag === true) {
                if (mediaSession.pauseflag === false) {
                    //mediaSession.vid.play();
                }
                document.getElementById('outputtext').innerHTML = "existing mediaSession!"
                var mediaParent = document.getElementById("article_maintext");
                mediaParent.replaceChild(mediaSession.vid, mediaParent.firstElementChild);
                mediaSession.navflag = false;
            }
...
        }
    }
} 
```

# ms-access-2007 - 将两个 select 语句合并到一个表中

> ID：12945511
> 
> 赞同：1
> 
> 时间：2012-10-18T00:38:49.247
> 
> 标签：ms-access-2007

我有两张桌子：

```
tbl_origin    tbl_destination

 Origin          Dest
 ------          ----
 AMER            CBU
 PHIL            POT
 TAI             POT
 BAT             CBU 
```

我想在一张表中得到结果：

```
 Origin       Dest
 --------------------
 AMER         CBU
 PHIL         POT
 TAI          POT
 BAT          CBU 
```

我使用了两个 select 语句，但得到的结果如下：

```
 Origin       Dest
 --------------------
 AMER         CBU
 AMER         POT
 AMER         POT
 AMER         CBU
 PHIL         CBU
 PHIL         POT
 PHIL         POT
 PHIL         CBU
 TAI          POT
 TAI          POT
 TAI          POT
 TAI          POT
 BAT          CBU
 BAT          POT
 BAT          POT
 BAT          CBU 
```

我为此使用 MS ACCESS。我曾尝试使用交叉连接，但我似乎得到了一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:09:14.157

如果您想要的只是基于顺序连接，最简单的方法是在每个表中添加一个新列，例如将其称为 Id，并为每一行分配一个唯一编号或将其设置为标识列类型，然后您可以运行下面的查询。

你的新表看起来像

![在此处输入图像描述](../Images/6f5534813a7544ae33e03755b3da85cd.png)

查询会给你你想要的。

```
select ori.origin, dest.dest 
from tbl_origin ori
inner join tbl_destination dest on dest.id = ori.id 
```

如果您不想添加 Id/identity 列，那么恐怕您在 Access 中的选项有限，至少在 SQL Server 中您可以使用临时表等来解决问题，但在 Access 中，我认为这几乎是不可能的，最简单的选择是添加一个数字列

# php - 如何安全地存储我网站的配置文件？

> ID：12945513
> 
> 赞同：2
> 
> 时间：2012-10-18T00:39:33.360
> 
> 标签：php, security, encryption, config

我的网站有一个 config.php 文件，该文件存储在可公开访问的 Web 目录之外，它包含我用来为该网站发送邮件的 gmail 帐户的密码信息和我的数据库连接凭据。我不喜欢将密码保存为纯文本变量的想法，并且正在寻找某种方法来更安全地保存这些数据。除了阻止我以外的用户对目录的读取访问之外，我还能做些什么来保护这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:53:35.320

大多数情况下，您最终将保存为纯文本。比如说你想加密，然后解密的密钥必须以纯文本等形式保存。所以最好确保你的服务器是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:55:20.843

取决于您要保护的内容。

1.  将文件保存在 htdocs（webroot 目录）之外通常是一个好主意，这样就不能从外部显式调用该文件。（IE 将浏览器指向它）。

2.  如果你想保护你的代码中的 $var （即第三方恶意代码），你总是可以在变量被使用后取消设置它们，尽管我不知道这是否有很大的不同。

3.  如果您想保护文件免受可能“入侵”您的服务器的人的侵害，那么您无能为力。您始终可以设置文件权限，以便只有 www-data （您的 apache 用户）可以读取它，但如果有人获得您机器的 root 访问权限，那么您就完蛋了。

无论如何，如果您的服务器是安全的（没有远程 root 访问权限或仅通过带有公钥/私钥的 shh 访问，您不会从公共 PC 访问您的服务器，等等...），您不会在未检查的情况下使用第三方代码首先，您将 pass 文件存储在 webroot 目录之外，我认为您尽可能安全。

# c++ - 查找符号时，程序不会从正确的库中搜索

> ID：12945514
> 
> 赞同：3
> 
> 时间：2012-10-18T00:39:45.997
> 
> 标签：c++, linux, runtime, shared-libraries, dynamic-loading

我正在向系统添加两个类和库，`parent.so`并`child.so`从中派生。

问题是当程序加载时，`child.so`它无法从`parent.so`.

发生什么了，

`nm -D child.so`会给出类似的东西（我刚改了名字）

`U _ZN12PARENT15virtualFunctionEv`

* * *

程序运行会崩溃

```
_handle = dlopen(filename, RTLD_NOW|RTLD_GLOBAL); //filename is child.so 
```

它会给出一个错误`LD_DEBUG = libs`

```
symbol lookup error: undefined symbol: _ZN12PARENT15virtualFunctionEv (fatal) 
```

我无法解释的是，我尝试`LD_DEBUG = symbols`使用 GDB，在运行时`dlopen`，日志显示它基本上尝试在系统中的所有库中查找，除了`parent.so`定义符号的位置。但是从库日志`parent.so`已经加载并且代码已经运行，并且它与所有其他库的路径相同。

```
 ......
 27510:     symbol=_ZN12PARENT15virtualFunctionEv;  lookup in file=/lib/tls/libm.so.6
 27510:     symbol=_ZN12PARENT15virtualFunctionEv;  lookup in file=/lib/tls/libc.so.6
 27510:     symbol=_ZN12PARENT15virtualFunctionEv;  lookup in file=/lib/ld-linux.so.2
 27510:     child.so: error: symbol lookup error: undefined symbol: _ZN12PARENT15virtualFunctionEv(fatal) 
```

程序或系统如何管理查找符号定义的库？

我是Linux新手，谁能给我一些工作方向？

谢谢。

**编辑**

用于生成`parent.so`文件的命令是

```
c++  -shared  -o parent.so parent.o 
```

类似的`child.so`。此处链接是否缺少任何信息？看起来孩子只包括父母的头文件。

**编辑2**

经过另一次测试，调用

```
_handle = dlopen("parent.so", RTLD_NOW|RTLD_GLOBAL); 
```

之前的崩溃线会解决问题，我认为这意味着最初`parent.so`没有加载。但我仍然不太清楚原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T04:30:16.150

您需要告诉链接器您的库`libchild.so`使用`libparent.so`. 在创建子库时执行此操作：

`g++ -shared -o libchild.so child_file1.o child_file2.o -Lparent_directory -lparent`

请注意，顺序很重要。指定`-lparent`所有目标文件。您可能还需要通过`-Wl`g++ 的选项将其他选项传递给链接器。

那可能还不够好。您可能需要将包含的库添加`libparent.so`到`LD_LIBRARY_PATH`环境变量中。

几个陷阱：如果你没有用`lib`前缀命名这些库，你会混淆链接器。如果您不使用任何一个编译源文件，`-fPIC`或者`-fpic`您将没有可重定位的对象。

**附录**
依赖于其他库的库存在很大的潜在问题。假设您在编译子库源文件时使用 1.5 版的父包。你设法克服了所有的库依赖问题。您已指定您的`libchild.so`依赖于`libparent.so`. 你的东西刚刚好。直到父包的 2.0 版本出来。现在你的东西在任何地方都被破坏了，而且你没有改变任何一行代码。

解决这个问题的方法是在构建子库时指定生成的共享库具体依赖于 libparent.so 的 1.5 版。

为此，您需要通过选项将选项从 g++/gcc 传递给链接器`-Wl`。使用`-Wl,<linker_option>,<linker_option>,...`如果这些链接器选项需要空格，则需要在 g++ 的命令中将它们反斜杠转义。几个关键选项是`-rpath`和`-soname`。例如，`-rpath=/path/to/lib,-soname=libparent.so.1.5`。

`-soname=libparent.so.1.5`请注意：在构建 libparent.so 时需要使用该选项。这就是让系统表示您的 libchild.so（1.0 版）依赖于 libparent.so（1.5 版）的原因。而且您不构建 libparent.so。你构建 libparent.so.1.5。libparent.so 呢？这需要存在，但它应该是 libparent.so 的某个编号版本（最好是最新版本）的符号链接。

现在假设非向后兼容的父版本 2.0 被编译并构建到一个闪亮的新 libparent.so.2.0 中，并且 libparent.so 象征性地链接到这个闪亮的新版本。使用笨重的旧 libchild.so（版本 1.0）的应用程序将愉快地使用笨拙的旧版本 libparent.so，而不是破坏一切的闪亮的新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:33:53.297

看起来您没有告诉链接器 child.so 需要 parent.so，请使用以下内容：

```
g++ -shared -o libparent.so parent.o
g++ -shared -o libchild.so -lparent child.o 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T01:25:38.113

当你构建你的主程序时，你必须告诉编译器它与那些库链接；这样，当它启动时，linux会为它加载它们。

将它们的名称更改为 libparent.so 和 libchild.so。

然后用这样的东西编译：

```
g++ <your files and flags> -L<folder where the .so's are> -lparent -lchild 
```

编辑：

尝试在 child.so 之前加载 parent.so 可能会是一个较小的变化。你已经试过了吗？

# database - 将 Visual Studio 08 中内置的数据库 (.mdf) 文件导入 Visual Studio 12

> ID：12945517
> 
> 赞同：0
> 
> 时间：2012-10-18T00:39:55.913
> 
> 标签：database, vb.net, visual-studio-2010, visual-studio, visual-studio-2008

我作为本科生在 Visual Studio 08 工作过，我想开始在 Visual Studio 12 中开发我当时的项目。我该怎么做...没有导入 .mdf 文件的选项。

任何帮助将不胜感激。

我得到了上述问题的答案，我连接了数据库，但是当我运行代码时它给了我一个错误。

我正在尝试在 Visual Basic 中制作一个 Web 应用程序。

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click

        Dim Conn As String = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString
        Dim password As String
        password = Encrypt(TextBox2.Text, "&%#@?,:*")
        'Queries
        Dim query As String = "select * from Registration where username='" & TextBox1.Text & "' and password='" & password & "'"
        Dim SQLConn As New SqlConnection(Conn)
        Dim SQLCmd As New SqlCommand(query, SQLConn)
        SQLConn.Open()

        Dim dr As SqlDataReader
        dr = SQLCmd.ExecuteReader()
        dr.Read()
        ' If Present in databse it will enter here
        If dr.HasRows Then

            ' Remember Session
            'Session("viewid") = dr("userid")
            Session("userid") = dr("userid")
            Session("username") = dr("username")
            Session("email") = dr("email")
            'Remember Me on this pc
            If CheckBox1.Checked Then
                Response.Cookies("UserName").Value = dr("username")
                Response.Cookies("UserName").Expires = DateTime.Now.AddMonths(1)
            End If
            Response.Redirect("Home.aspx")
        End If
        SQLConn.Close()
        Label4.Text = "* Incorrect Username/ Password/ Mode. Re-enter!"
    End Sub 
```

它在 SQLConn.Open() 处给了我一个错误：

SqlException 未被用户代码处理

连接到 SQL Server 的用户实例时，不允许使用用户实例登录标志。连接将被关闭。

有人可以告诉我需要做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:43:12.947

我想您尝试在 SQL Server 上附加您的数据库文件？Windows 7下也有类似的问题，是安装SQL时安全权限无效造成的。

解决方法是删除一个目录，如果缺少该目录会自动重新创建：
删除 C:\Documents and Settings\USERNAME\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS。

但是我真的不知道在Win8上是不是同样的原因。

希望这有助于塞尔

# android - android:attr/activatedBackgroundIndicator 不工作

> ID：12945520
> 
> 赞同：2
> 
> 时间：2012-10-18T00:40:16.170
> 
> 标签：android, android-layout, actionbarsherlock

我正在使用带有 android.R.layout.simple_list_item_activated_1 样式的 ListView，用于 TextView 元素的 ArrayAdapter，类似于 List16.java 示例。

我希望我的 ListView 具有多选功能，因此我实现了 MultiChoiceModeListener 并设置了 CHOICE_MODE_MULTIPLE_MODAL。长按某个项目会正确打开 CAB，但是我在选择项目时遇到问题 - 列表中的项目在此模式下被选择/取消选择时不会在视觉上发生变化。

据我了解，`android:background="?android:attr/activatedBackgroundIndicator"`负责状态更改的背景颜色 - 所以这似乎不起作用。

我也在我的应用程序中使用 ABS 4.2.0。有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:46:51.743

您已经找到解决方案了吗？

我有同样的问题......但我解决了它！

我做了两件事：

1.  我添加`android:background="?android:attr/activatedBackgroundIndicator"`到我的自定义行布局。我不知道`android.R.layout.simple_list_item_activated_1`风格，但我想它也应该工作......
2.  但是，在我`OnItemLongClickListener`添加`listView.setItemChecked(position, true);` 的 This 中，添加了一个新问题：关闭 ActionBar 时不会取消选择该项目，因此在 中`onDestroyActionMode(ActionMode mode)`，我添加了： `listView.clearChoices();` `listView.requestLayout();`

问候，

斯文

# javascript - 动态选项卡 - 每个选项卡加载多个子项

> ID：12945524
> 
> 赞同：1
> 
> 时间：2012-10-18T00:41:00.883
> 
> 标签：javascript, regex, dynamic, tabs, twitter-bootstrap

所以，

我试图想出一种将内容动态加载到多个选项卡中的方法，其中每个选项卡可以包含从一个到多个元素（报告）的任何位置。

目前，报表是在页面加载时使用 jQuery $.load 加载的。我正在使用 Bootstrap 和引导选项卡。我找到了一个教如何加载多个标签的网站，但没有具体说明我需要做什么。该网站在这里： http: [//www.mightywebdeveloper.com/coding/bootstrap-2-tabs-jquery-load-content/](http://www.mightywebdeveloper.com/coding/bootstrap-2-tabs-jquery-load-content/)

相比之下，每个选项卡的设置更像这样：

```
<div id="tab1">
<div id="report1"></div>
<div id="report2"></div>
</div> 
```

我不能使用顶级 div 来加载内容，因为它可能有多个孩子。我需要遍历 div，使用正则表达式解析 ID，并在选项卡更改时加载每个报告。

我还没有弄清楚正则表达式，但它应该相当简单 - 元素 id 将是这样的：“#be78f5aa3-25”。这是一个由 9 个字母数字字符组成的 dbid，后跟一个连字符，后跟一个 1-3 位整数（不是从 0 开始）。然后我需要将这两个字符串拆分为单独的变量并将它们注入到 API 调用中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:50:46.113

任何希望将多个页面加载到引导选项卡中的人都可能会发现它很有用。我能够使用一些正则表达式（特定于我的应用程序）使其工作，将 div 放置在具有元素 ID 的选项卡窗格容器中，该元素 ID 可用于创建我想使用 $.load 加载到容器中的报告。当用户转到另一个页面然后使用后退按钮时，我还为持久选项卡添加了一些内容，如果 URL 中没有哈希值，我还添加了另一个条件来加载第一个选项卡中的内容。

我敢肯定它可以被清理，但你明白了要点..

```
$(function() {
    "use strict";
    var baseURL, $navbox;
    baseURL = window.location.protocol + "//" + window.location.hostname + "/db/";
    $navbox = $("#myTabs");
    $navbox.bind("show", function(e) {
        var contentID, pattern, selectDiv;
        pattern = /#(\Btab|tab\B)?(\Bdropdown|dropdown\B)?([1-9]{1}[0-9]*)/i;
        contentID = e.target.toString().match(pattern)[0];
        selectDiv = contentID + " > div";
        return $(selectDiv).each(function() {
            var parts = this.id.match(/(##enter regex here)/);
            if (parts) {
                $(this).load(baseURL + parts[0]);
                return;
            }
            return $("#myTabs").tab();
        });
    });
    if (window.location.hash) {
        $('#myTabs').find('a[href="'+window.location.hash+'"]').tab('show');
    }
    else { 
        var elemID = "#"+$('[class^="tab-pane active"]').attr('id') + " > div";
        $(elemID).each(function() {
            var parts = this.id.match(/(##enter regex here)/);
            $(this).load(baseURL + parts[0]);
            return $("#myTabs").tab();
        });
    }
});

$('#myTabs a').click(function (e) {
    e.preventDefault();
    var bob = jQuery(this).attr("href");
    bob = jQuery.trim(bob);
    if(bob == "" || bob == "javascript:void(0)") {
        return;
    }
    else {
        window.location.hash = $(this).attr('href');
        $(this).tab('show');
    }
}); 
```

# java - 根据 objects 参数值对 toString 中的对象进行排序

> ID：12945531
> 
> 赞同：0
> 
> 时间：2012-10-18T00:42:29.180
> 
> 标签：java, logic

我设置了这个 toString 方法

```
public String toString (){
    String result;
    result = "Ideal Family";
    result += "\n"+person1.toString();
    result += "\n"+person2.toString();
    result += "\n"+person3.toString();
    result += "\n"+person4.toString();
    result += "\n"+pet1.toString();
    result += "\n"+car1.toString();
    result += "\n"+car2.toString();
    result += "\n"+homeAddress.toString();
    return result;
} 
```

在其中我按照我希望输出它们的顺序列出对象。有没有办法根据对象中的值重新排序列表。特别是在 Person 类中，基于实例变量 int 对人员对象进行重新排序。

Person 类采用这些参数

```
public Person (String personName,String personGender,String personSS,int personAge){
    name = personName;
    ss = personSS;
    age = personAge;
    gender = personGender;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:49:20.857

首先，您应该使用一个集合而不是四个变量。这会更容易。

但是对于您要查找的内容，请创建一个`Person`s列表

```
List<Person> personList = Arrays.asList(person1, person2, person3, person4); 
```

排序列表

```
Collections.sort(personList, Comparator<Person>() {
    public int compare(Person p1, Person p2) {
        return Integer.valueOf(p1.getAge()).compareTo(p2.getAge());
    }
}); 
```

并遍历列表

```
for(Person person : personList) {
    result += "\n"+person.toString();   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:50:18.947

是的，但您首先需要一个`List`or 数组。

```
List<Person> family; 
```

或者：

```
Person[] family; 
```

然后，您可以使用[Collection.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)或[Arrays.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)对族重新排序以进行打印。

# c# - .NET：“identity\\..*”与“identity.requesttoken”不匹配

> ID：12945536
> 
> 赞同：0
> 
> 时间：2012-10-18T00:42:54.690
> 
> 标签：c#, .net, regex

我正在尝试匹配 .NET 中的字符串`Regex`，我希望表达式匹配“身份”。在末尾添加任何内容（稍后仍然可以限制 * 的范围），在任何`regex`编辑器中测试模式都可以正常工作（由于转义，我在那里少了一个反斜杠）。

我已经`breakpoint`在我的`Regex`. `IsMatch`要检查这些值，我在标题中输入的内容正是如此（请注意，这是来自 VS2010 调试器，转义序列未解析）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:55:38.860

`@`在指定正则表达式时尝试使用字符串文字（字符串前缀为）。这将消除您逃避的需要`\`：

```
Regex.IsMatch("identity.requesttoken", @"identity\..*") 
```

# java - 如何将输出流设置为 TextArea

> ID：12945537
> 
> 赞同：11
> 
> 时间：2012-10-18T00:43:13.957
> 
> 标签：java, swing, user-interface, jframe, jtextarea

我正在尝试为程序创建一个 GUI 面板，我想要通常打印到我的命令提示符的所有内容，以打印到 TextArea 对象。我的 GUI 面板大部分都已格式化，但我无法将文本打印到 TextArea，这是我的文件：

```
package guipanel;

import javax.swing.*;
import java.awt.*;
import java.io.*;

/**
 *
 * @author Dan
 */
public class GUIPanel extends JFrame { 
    public GUIPanel() {
        initComponents();
    }
    private void setOutputStream(boolean catchErrors) {
        System.setOut(aPrintStream); 
        setVisible(true);
        requestFocus();
        if (catchErrors) {
               System.setErr(aPrintStream);
        }
    }
    private void addTabs(JTabbedPane jTabbedPane1) {
        JPanel jPanel1 = new JPanel();
        JPanel jPanel2 = new JPanel();
        JPanel jPanel3 = new JPanel();
        JPanel jPanel4 = new JPanel();
        jTabbedPane1.add("Main", textArea1);
        jTabbedPane1.add("Commands", jPanel);
        jTabbedPane1.add("Rules", jPanel1);
        jTabbedPane1.add("Links", jPanel2);
        jTabbedPane1.add("Information", jPanel3);
        jTabbedPane1.add("Shutdown", jPanel4);
        setOutputStream(true);
    }
    @SuppressWarnings("unchecked")
    private void initComponents() {

        textArea1 = new java.awt.TextArea();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenu2 = new javax.swing.JMenu();

        textArea1.setPreferredSize(new java.awt.Dimension(432, 343));
        textArea1.getAccessibleContext().setAccessibleParent(jTabbedPane1);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Evolution-X 639");
        setBounds(new java.awt.Rectangle(0, 0, 400, 450));
        setResizable(false);
        getContentPane().setLayout(new java.awt.FlowLayout());

        addTabs(jTabbedPane1);
        getContentPane().add(jTabbedPane1);

        jMenu1.setText("File");
        jMenuBar1.add(jMenu1);

        jMenu2.setText("Edit");
        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        pack();
    }
    public static void main(String args[]) {
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GUIPanel().setVisible(true);
            }
        });
    }
    private JMenu jMenu1;
    private JMenu jMenu2;
    private JMenuBar jMenuBar1;
    private JTabbedPane jTabbedPane1;
    private TextArea textArea1;
    private JPanel jPanel = new JPanel();
    private PrintStream aPrintStream  =
       new PrintStream(
         new FilterOutputStream(
           new ByteArrayOutputStream()));
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T01:05:08.490

您需要将打印流重定向到您可以控制的输出流...

这是我为正在开发的应用程序开发的概念示例。当它在用户站点运行时，我们使用它来调出输出控制台，以便我们可以看到发送到标准输出的内容......直到我们修复了我们的日志记录；）

基本上它`OutputStream`在打印流和控制台之间放置了一个自定义来捕获输出，但仍然允许将内容打印到控制台。如果您从命令行或 IDE 运行程序，这将很有帮助。如果你愿意，你可以设置一个开关来阻止它......

![在此处输入图像描述](../Images/d10a94656ed2e5a0bc85b69847219bf3.png)

```
public class TestRedirect {

    public static void main(String[] args) {
        new TestRedirect();
    }

    public TestRedirect() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                CapturePane capturePane = new CapturePane();
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(capturePane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                PrintStream ps = System.out;
                System.setOut(new PrintStream(new StreamCapturer("STDOUT", capturePane, ps)));

                System.out.println("Hello, this is a test");
                System.out.println("Wave if you can see me");
            }            
        });
    }

    public class CapturePane extends JPanel implements Consumer {

        private JTextArea output;

        public CapturePane() {
            setLayout(new BorderLayout());
            output = new JTextArea();
            add(new JScrollPane(output));
        }

        @Override
        public void appendText(final String text) {
            if (EventQueue.isDispatchThread()) {
                output.append(text);
                output.setCaretPosition(output.getText().length());
            } else {

                EventQueue.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        appendText(text);
                    }
                });

            }
        }        
    }

    public interface Consumer {        
        public void appendText(String text);        
    }

    public class StreamCapturer extends OutputStream {

        private StringBuilder buffer;
        private String prefix;
        private Consumer consumer;
        private PrintStream old;

        public StreamCapturer(String prefix, Consumer consumer, PrintStream old) {
            this.prefix = prefix;
            buffer = new StringBuilder(128);
            buffer.append("[").append(prefix).append("] ");
            this.old = old;
            this.consumer = consumer;
        }

        @Override
        public void write(int b) throws IOException {
            char c = (char) b;
            String value = Character.toString(c);
            buffer.append(value);
            if (value.equals("\n")) {
                consumer.appendText(buffer.toString());
                buffer.delete(0, buffer.length());
                buffer.append("[").append(prefix).append("] ");
            }
            old.print(c);
        }        
    }    
} 
```

![在此处输入图像描述](../Images/080e443114c1c290c2a228626f4f75c1.png) ![在此处输入图像描述](../Images/5007b29e21da0567e1d49f51eec328eb.png)

更新了工作示例。在 Windows 7、Java 6 和 Mac OS Lion Java 7 上进行测试

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-13T02:28:13.620

MadProgrammer 的解决方案非常棒，我基于他的解决方案。但是，正如 Loopkin 所指出的，它不处理特殊字符（准确地说，它在每个非 ASCII 字符上都失败了）。

Loopkin 的解决方案对我不起作用，但我最终想出了 2 个解决方案。

## 解决方案1：处理每1个字节的字符（最多U+00FF）

这个简单的解决方案可以处理最多 U+00FF 的每个字符（每个 1 字节字符）。一切都与 MadProgrammer 相同，除了`write()`定义为：

```
@Override
public void write(int b) throws IOException {
    buffer.append(Character.toChars((b + 256) % 256));
    if ((char) b == '\n') {
        textArea.append(str);
        textArea.setCaretPosition(textArea.getDocument().getLength());
        buffer.delete(0, buffer.length());
    }
    old.write(b);
} 
```

我没有放前缀的东西，因为我不需要它。

## 解决方案 2：像标准输出一样处理每个对象

最后，我决定包含所有字符，所以我最终直接扩展`PrintStream`，并将前缀/缩进放回去。问题是我无法覆盖私有方法`write(String s)`，所以我覆盖了所有`print()`方法：

```
public class PrintStreamCapturer extends PrintStream {

    private JTextArea text;
    private boolean atLineStart;
    private String indent;

    public PrintStreamCapturer(JTextArea textArea, PrintStream capturedStream, String indent) {
        super(capturedStream);
        this.text = textArea;
        this.indent = indent;
        this.atLineStart = true;
    }

    public PrintStreamCapturer(JTextArea textArea, PrintStream capturedStream) {
        this(textArea, capturedStream, "");
    }

    private void writeToTextArea(String str) {
        if (text != null) {
            synchronized (text) {
                text.setCaretPosition(text.getDocument().getLength());
                text.append(str);
            }
        }
    }

    private void write(String str) {
        String[] s = str.split("\n", -1);
        if (s.length == 0)
            return;
        for (int i = 0; i < s.length - 1; i++) {
            writeWithPotentialIndent(s[i]);
            writeWithPotentialIndent("\n");
            atLineStart = true;
        }
        String last = s[s.length - 1];
        if (!last.equals("")) {
            writeWithPotentialIndent(last);
        }
    }

    private void writeWithPotentialIndent(String s) {
        if (atLineStart) {
            writeToTextArea(indent + s);
            atLineStart = false;
        } else {
            writeToTextArea(s);
        }
    }

    private void newLine() {
        write("\n");
    }

    @Override
    public void print(boolean b) {
        synchronized (this) {
            super.print(b);
            write(String.valueOf(b));
        }
    }

    @Override
    public void print(char c) {
        synchronized (this) {
            super.print(c);
            write(String.valueOf(c));
        }
    }

    @Override
    public void print(char[] s) {
        synchronized (this) {
            super.print(s);
            write(String.valueOf(s));
        }
    }

    @Override
    public void print(double d) {
        synchronized (this) {
            super.print(d);
            write(String.valueOf(d));
        }
    }

    @Override
    public void print(float f) {
        synchronized (this) {
            super.print(f);
            write(String.valueOf(f));
        }
    }

    @Override
    public void print(int i) {
        synchronized (this) {
            super.print(i);
            write(String.valueOf(i));
        }
    }

    @Override
    public void print(long l) {
        synchronized (this) {
            super.print(l);
            write(String.valueOf(l));
        }
    }

    @Override
    public void print(Object o) {
        synchronized (this) {
            super.print(o);
            write(String.valueOf(o));
        }
    }

    @Override
    public void print(String s) {
        synchronized (this) {
            super.print(s);
            if (s == null) {
                write("null");
            } else {
                write(s);
            }
        }
    }

    @Override
    public void println() {
        synchronized (this) {
            newLine();
            super.println();
        }
    }

    @Override
    public void println(boolean x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(char x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(int x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(long x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(float x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(double x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(char x[]) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(String x) {
        synchronized (this) {
            print(x);
            newLine();
            super.println();
        }
    }

    @Override
    public void println(Object x) {
        String s = String.valueOf(x);
        synchronized (this) {
            print(s);
            newLine();
            super.println();
        }
    }
} 
```

我删除了`Consumer`方面以保持简单，但实际需要的一切都在这里。这是我如何使用这个类：

```
System.setOut(new PrintStreamCapturer(logTextArea, System.out));
System.setErr(new PrintStreamCapturer(logTextArea, System.err, "[ERROR] ")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T17:41:59.703

我喜欢 MadProgrammer 的答案，但我认为这不适用于 UTF-8 字符。

相反，我会让 StreamCapturer 扩展 ByteArrayOutputStream 并将其用作写入实现。

```
 @Override
    public void write(int b){
        if ('\n' == (char) b) {
            consumer.appendText(toString());
            reset();
        }
        else {
            super.write(b);
        }
        old.write(b);
    } 
```

我跳过了前缀部分，因为我的实现中不需要它。感谢您的代码，它有很大的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T22:27:52.417

只是对 NOOBS 的原始 MadProgrammer 代码的更新 - 将 JTextArea 参数传递给构造函数，例如

```
new RedirectText(Main.window.textArea1); 
```

# mysql - SQL：尝试在一个查询中选择两个元值

> ID：12945538
> 
> 赞同：0
> 
> 时间：2012-10-18T00:43:14.937
> 
> 标签：mysql, sql

```
SELECT meta_value 
FROM wp_postmeta 
WHERE meta_key = "bid_resource_lat" 
AND meta_key = "bid_resource_lng" 
```

我试图在一个查询中选择两行，如您在上面看到的......我无法理解为什么这不起作用......

我如何确保这两个结果在一行中组合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:46:59.890

您需要“或”，因为逻辑与您想象的相反。

```
SELECT meta_value FROM wp_postmetaWHERE meta_key = "bid_resource_lat" OR meta_key = "bid_resource_lng" 
```

解释：

如果键是第一个或者是第二个，你想得到一行。这最多返回两行。您编写它的方式则需要匹配两个条件。

“我想要一辆意大利式或昂贵的汽车” - 你可以买一辆法拉利、一辆梅赛德斯和一辆菲亚特 “我想要一辆意大利式且昂贵的汽车” - 你可以买一辆法拉利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:47:08.223

您想使用`OR`条件，而不是`AND`条件：

```
SELECT meta_value 
FROM wp_postmeta 
WHERE meta_key = "bid_resource_lat" 
OR meta_key = "bid_resource_lng" 
```

您的查询无法返回任何行，因为您要的是`meta_key`列等于***和*** `"bid_resource_lng"`的记录`"bid_resource_lng"`，这显然永远不会发生，因为一行在列中只有一个值`meta_key`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T00:48:26.977

```
meta_key = "bid_resource_lat" AND meta_key = "bid_resource_lng" 
```

以上永远不会是真的。使用 OR 代替 meta_key 不能同时为 bid_resource_lat 和 bid_resource_lng。

# jquery - 基于 HTML 的无限水平滑块控件

> ID：12945542
> 
> 赞同：0
> 
> 时间：2012-10-18T00:43:54.533
> 
> 标签：jquery, asp.net-mvc, html, slider

我正在尝试创建一个无限滑块控件。我的意思是无限是，我希望用户能够在栏/面板上从左到右滑动，这会将日期移到过去（如果他们向左滑动）和未来（如果幻灯片剩下）。我知道那里有一些滑块控件（例如[http://demos.kendoui.c​​om](http://demos.kendoui.com/web/slider/index.html) /web/slider/index.html ），但没有一个是无限的。

我想要一种触摸友好的基于图形的方式让用户在 ui 中移动日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:56:51.800

两个按钮怎么样：增加/减少前进/后退未来/过去

按钮可以无限次点击。

# python - 从变量更改标签文本

> ID：12945544
> 
> 赞同：0
> 
> 时间：2012-10-18T00:44:32.457
> 
> 标签：python, python-2.7, tkinter

我正在尝试编写一个有 25 个按钮的程序，当按下一个按钮时，它将从文本文件中读取，将其存储在一个变量中，然后将页面底部的标签文本更改为文本文件。到目前为止，这是我的代码：

```
from Tkinter import*
box1 = 'C:/Users/Geekman2/Documents/Tests/box1.txt'
var = StringVar()
var.set("man")
def openfile(filename):
    filetxt = (open(filename,"r").read())
   #filetxt.set(iletxt)
    print filetxt
    return filetxt

def Box1():
    openfile(box1)

openfile(box1)
donut = Tk()
donut.geometry('450x450')

cupcake = Button(donut,text = "Box #1", command= Box1 )
cupcake.pack()

Whatsin = Label(donut,textvariable = var)
Whatsin.pack(side =BOTTOM)

donut.mainloop() 
```

这两行给我带来了麻烦，每当我取消注释并尝试运行程序时，我都会收到错误“AttributeError：'NoneType'对象没有属性'tk'”

```
var = Stringvar()
var.set("man") 
```

谁能告诉我这可能是什么原因？我知道错误的含义，但据我所知，它不适用于这种情况

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:49:53.863

您需要先实例化 的实例，`Tk`然后才能使用`StringVar`. `donut = Tk()`在你的线路之前移动，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:04:29.867

StringVar（以及其他 Tkinter 变量）是 Tcl 变量¹的包装器。您的错误来自在 Tcl 解释器初始化之前创建 StringVar 。

因此，您可以`Tk()`在创建变量之前调用（执行此类初始化）。

如果您查看 StringVar 构造函数签名：`__init__(self, master=None, value=None, name=None)`您会看到与其他 Tkinter 对象一样，构造函数接受 a`master`作为第一个参数。这个 master 本质上是访问 Tcl 解释器所必需的。如果未提供，则会回退到全局`Tkinter.Tk`实例`_default_root`，这就是`None`您的情况。询问 Tcl 解释器（名为 的字段`tk`）会引发`AttributeError`.

请注意，对于小部件，不提供 master 会导致创建默认值，但不会创建变量。

¹整个 Tkinter 工具包是一个名为 Tk 的 Tcl 工具包的包装器。Tcl 变量允许被*跟踪*，即在变量更改时绑定回调。Tk 大量使用这种机制，因此，Tkinter 必须提供对 Tcl 变量的访问。

# asp.net - 在操作之外执行异步操作 asp.net mvc

> ID：12945548
> 
> 赞同：5
> 
> 时间：2012-10-18T00:45:14.490
> 
> 标签：asp.net, asp.net-mvc, asynchronous, ravendb

我希望能够在每个请求上从云数据库加载用户，并使用 asp.net mvc 在控制器中的请求上提供该用户。问题是当前框架不支持从操作过滤器执行异步操作。所以 OnActionExecuting，OnAuthorization 方法不允许我这样做..例如，我有以下代码不起作用（所以不要尝试）..你得到一个异常：“异步模块或处理程序在异步时完成手术仍在等待中。”

```
protected async override void OnAuthorization(AuthorizationContext filterContext)
{
  var user = filterContext.HttpContext.User;
  if (!user.Identity.IsAuthenticated)
  {
    HandleUnauthorizedRequest(filterContext);
    return;
  }

  using (var session = MvcApplication.DocumentStore.OpenAsyncSession())
  {
    User currentUser = await session.LoadAsync<User>(user.Identity.Name);
    if (currentUser == null)
    {
      HandleUnauthorizedRequest(filterContext);
      return;
    }

    filterContext.HttpContext.Items["User"] = currentUser;
  }
} 
```

那么还有其他方法可以做到这一点吗？我注意到基本控制器中有一个开始执行方法：

```
protected override IAsyncResult BeginExecute(RequestContext requestContext, AsyncCallback callback, object state)
{
  return base.BeginExecute(requestContext, callback, state);
} 
```

我可以在那里做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T13:37:51.803

这个问题已经三个月了，所以我想你已经设法解决了这个问题。无论如何，我会在这里添加我的解决方案，因为我必须做类似的事情。

我使用了[ParallelExtensionsExtras](https://web.archive.org/web/20151213101054/https://code.msdn.microsoft.com/windowsdesktop/Samples-for-Parallel-b4b76364/sourcecode?fileId=44488&pathId=735199977)库中的`ToAsync`方法。这是我的课：

```
public class AsyncControllerBase : Controller
{
    protected override IAsyncResult BeginExecute(System.Web.Routing.RequestContext requestContext, AsyncCallback callback, object state)
    {
        return ExecuteCoreAsync(requestContext, state).ToAsync(callback, state);
    }

    protected override void EndExecute(IAsyncResult asyncResult)
    {
        IAsyncResult baseAsyncResult = ((Task<IAsyncResult>)asyncResult).Result;
        base.EndExecute(baseAsyncResult);
    }

    protected virtual async Task<IAsyncResult> ExecuteCoreAsync(System.Web.Routing.RequestContext requestContext, object state)
    {
        await DoStuffHereOrInDerivedClassAsync();

        var baseBeginExecuteCompletion = new TaskCompletionSource<IAsyncResult>();

        AsyncCallback callback = ar =>
        {
            baseBeginExecuteCompletion.SetResult(ar);
        };

        // OnActionExecuting will be called at this point
        var baseAsyncResult = base.BeginExecute(requestContext, callback, state);

        await baseBeginExecuteCompletion.Task;

        return baseAsyncResult;
    }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);
    }
} 
```

另请参阅Microsoft 提供的有关在 Task 和 IAsyncResult 之间转换的[文档](https://docs.microsoft.com/en-us/dotnet/standard/asynchronous-programming-patterns/interop-with-other-asynchronous-patterns-and-types#from-tap-to-apm)。

# android - 使用 super.onDestroy 时 Android MapActivity 崩溃

> ID：12945550
> 
> 赞同：1
> 
> 时间：2012-10-18T00:45:21.913
> 
> 标签：android, nullpointerexception, android-mapview, mapactivity, ondestroy

到目前为止，我有一个非常稳定的应用程序，我决定向它添加一个 MapView。如果这有所不同，则 MapView 位于 Horizo​​ntalScrollView 中。我将我的主要活动转换为扩展 MapActivity 并添加了 isRouteDisplayed() 函数。我可以编译并运行它，滚动查看我的 MapView 是否正确加载。

我的问题是何时调用 super.onDestroy()。由于某种原因，程序崩溃了。

日志猫：

> 10-17 18:32:17.109：E/AndroidRuntime(5477)：引起：java.lang.NullPointerException 10-17 18:32:17.109：E/AndroidRuntime(5477)：在 com.google.android.maps.MapActivity .onDestroy(MapActivity.java:500) 10-17 18:32:17.109: E/AndroidRuntime(5477): 在 com.appsmith.mapit.MainActivity.onDestroy(MainActivity.java:177) 10-17 18:32:17.109 : E/AndroidRuntime(5477): 在 android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2663) 10-17 18:32:17.109: E/AndroidRuntime(5477): ... 11 更多

```
 @Override
 public void onDestroy()
 {
        internalSave();
        writeOutLookupTable("Unit");
        gpsManager.removeUpdates(myListener);
        super.onDestroy(); //MainActivity.java Line 177
        finish();
 } 
```

任何解决此问题的建议将不胜感激。

编辑：明白了！我实现了一个 onPause()，它与我的 onDestroy() 具有相同的信息（这是我在应用程序不使用时保持 GPS 不处于活动状态的解决方案）。注释掉 onPause() 会让一切再次变得愉快。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:52:50.957

你不需要调用finish(); 在 onDestroy() 中，finish() 正如文档所说：“当你的活动完成并应该关闭时调用它。”，所以如果你在 onDestroy() 那么你的活动已经完成

还有 super.onDestroy(); 通常放在 onDestroy() 的顶部。

# php - Netsuite - 获取所有项目优化的列表

> ID：12945553
> 
> 赞同：0
> 
> 时间：2012-10-18T00:45:36.237
> 
> 标签：php, list, search, netsuite

我刚刚开始将 Netsuite 用于客户端，我需要获取所有项目的列表。我搜索了一下，但找不到任何东西，而且非常紧急。此刻我可以搜索，但它会返回整个记录列表，然后我必须循环并从每个记录列表中获取 salesDescription 对象以放入数组中。

来自 PHP，这似乎令人难以置信的冗长，无疑是错误的，有没有人有任何这样的更好的搜索方式的例子，因为它需要大约 10 秒来运行搜索？

做10分钟！我知道它会很慢，所以我正在做一个 cron 来将列表缓存到一个 json 对象，所以它不是很重要，但必须有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:36:52.380

从另一个角度来看问题，在提取信息时使用 NetSuite 的只读 ODBC 驱动程序效率更高。

唯一的缺点是，这种方法需要激活 NetSuite 分析模块，并且您的客户每月需要支付大约 300 美元的费用。

SuiteAnalytics 模块信息：http: [//www.netsuite.com/portal/products/suiteanalytics.shtml](http://www.netsuite.com/portal/products/suiteanalytics.shtml)

ODBC 设置步骤（来自第 3 方网站）： [http ://blog.prolecto.com/2009/03/27/netsuite-delivers-on-odbc/](http://blog.prolecto.com/2009/03/27/netsuite-delivers-on-odbc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:05:02.617

如果您使用 PHP_Toolkit，Netsuite API 允许您运行搜索。您应该能够搜索您需要的条件并且只接收匹配的记录。您还可以将搜索首选项设置为仅返回一定数量的结果（即仅返回前 100 个结果）。

我不太确定您要优化什么，但这里有一些选项：

1.  如果您想要所有记录，请不要进行搜索，请执行获取所有请求
2.  如果您只想要某些记录，请进行搜索以避免不必要的结果
3.  通过设置搜索首选项限制返回的记录数，以便您可以批量处理它们。
4.  如果您要查找的只是获取销售说明字段而没有其余记录，我认为无法通过 API 完成。但是，您可以尝试进行保存的搜索，然后使用 API 来获取您保存的搜索。

通常我发现使用 PHP_Toolit 进行 Netsuite 搜索需要 20 秒或更短的时间。但是，如果您以多个用户的身份运行代码，则会出现[wsdls 冲突](http://www.ozonesolutions.com/programming/2011/05/nsclient-login-time/)的问题。

如果您有兴趣，我的博客上有几个使用 PHP_Toolkit 进行搜索的[示例：](http://www.ozonesolutions.com/programming/2011/06/sample-search-code/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T04:13:53.607

使用搜索条件和结果列在 NetSuite 中创建保存的搜索。您可以添加排序和其他搜索功能。

使用 ItemSearchAdvanced 对象调用您保存的搜索并处理您的记录。

应该很快。

在您的搜索首选项中，您可以在一次调用中定义页面大小（返回的记录数），然后使用 SearchMoreWithSearchId 函数对结果进行分页。

# java - (Java/Junit) 我设置了类路径，现在无法在命令提示符下编译测试文件

> ID：12945556
> 
> 赞同：1
> 
> 时间：2012-10-18T00:45:57.453
> 
> 标签：java, junit, classpath

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:19:07.783

尝试解压缩您的 jar 以检查内容是否真的存在。此外，请尝试将类路径作为参数传递，而不是设置环境变量，如下所示：

```
javac -cp ./junit-4.8.2.jar TestImage.java 
```

但不要`./junit-4.8.2.jar`使用 jar 的完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T14:10:00.167

……晚了几年……

至少在 2014 年，您需要`import`从`org.junit`. JUnit “[入门”指南](https://github.com/junit-team/junit/wiki/Getting-started)指出“不要在 junit.framework 或 junit.extensions 中使用任何类。”

举个例子：

```
import org.junit.*;

public class TestFoobar {
    @BeforeClass
    public static void setUpClass() throws Exception {
    }

    @Before
    public void setUp() throws Exception {
    }

    @Test
    public void testSomething() {
    }

    @Test
    @Ignore
    public void thisIsIgnored() {
    }

    @After
    public void tearDown() throws Exception {
        // Code executed after each test
    }

    @AfterClass
    public static void tearDownClass() throws Exception {
    }
} 
```

...然后运行测试

```
C:\junit>dir
 Volume in drive C is L032336
 Volume Serial Number is CAB2-E609

 Directory of C:\junit

2014-10-20  06:57    <DIR>          .
2014-10-20  06:57    <DIR>          ..
2014-10-20  06:11            45,024 hamcrest-core-1.3.jar
2014-10-20  06:11           245,039 junit-4.11.jar
2014-10-20  06:57               518 TestFoobar.java
               3 File(s)        290,581 bytes
               2 Dir(s)  277,498,945,536 bytes free

C:\junit>javac -cp junit-4.11.jar TestFoobar.java

C:\junit>java -cp .;junit-4.11.jar;hamcrest-core-1.3.jar org.junit.runner.JUnitCore TestFoobar
JUnit version 4.11
I.
Time: 0.007

OK (1 test) 
```

# javascript - 传递方法时访问 javascript 实例成员

> ID：12945560
> 
> 赞同：3
> 
> 时间：2012-10-18T00:46:47.920
> 
> 标签：javascript, scope

我写了一些这样的代码

```
function Flasher() {
    this.cards = []
    this.map = {
        14: this.flip
    }
}
Flasher.prototype.flip = function() {
    alert(this.cards.length)
}
flasher = new Flasher()
flasher.map[14]() 
```

不幸的是，该`this`对象成为`flip`方法内的地图对象并发生错误（因为`cards`未定义）。

我怎样才能让它按预期运行？`flip`间接调用via`map`是必要的，但我想访问`flip`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:48:13.777

```
function Flasher() {
    var self = this;

    this.cards = [];
    this.map = {
        14: function() { self.flip(); }
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:00:19.153

啊原型模式的麻烦

我会将它重写为一个模块，如下所示：

```
function flasher() {
  var cards = [],
  flip = function (){
    alert(cards.length)
  },
  map = {
    14: flip
  };

  return {
    cards: cards,
    map: map,
    flip: flip
  };
} 
```

然后闭包捕获您的范围，您无需担心**这一点**。尽管为每个对象复制了翻转功能，但您会丢失一些内存。但我认为代码更干净，它允许私有变量。

# html - 消除 Chrome 中的神秘边距

> ID：12945561
> 
> 赞同：2
> 
> 时间：2012-10-18T00:46:59.463
> 
> 标签：html, css

请考虑以下 jsFiddle - [http://jsfiddle.net/mark69_fnd/5fANH/](http://jsfiddle.net/mark69_fnd/5fANH/)

以下是它在 IE9、FF 和 Chrome 上的外观：

IE9： ![在此处输入图像描述](../Images/341e0fce8cda6e0828492ad6ef884704.png)

法郎： ![在此处输入图像描述](../Images/d42c40245a37ac8f626acb6b510ab372.png)

铬合金： ![在此处输入图像描述](../Images/2313bc9aafa719a0201ec071047bc621.png)

请注意仅在 Chrome 上发现的神秘底部黄色边距/填充。怎么回事？？？

另请注意，我链接了 YUI 的重置 CSS，因此所有浏览器都应该已标准化。

如何消除这种神秘的边距/填充？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:59:07.813

在我看来，问题是空格，在我删除它们之后，空间消失了[http://jsfiddle.net/5fANH/2/](http://jsfiddle.net/5fANH/2/)它是输入后的空格。

# jquery - Stop a div sliding up if an element is visible

> ID：12945565
> 
> 赞同：0
> 
> 时间：2012-10-18T00:47:09.173
> 
> 标签：jquery, slideup

Ok so heres my problem: I need the top div to only slide up/down when the **mediaPlayerWrapper** is there and not when the **content_text** is there. both are created using Ajax and php and only one exists at a time. As per my code bellow it works fine in the **mediaPlayerWrapper** but unfortunately it still slides in the **content_text**. any Ideas?

```
$(document).ready(function(){

    $("#main_content").ajaxStop(function(){

        if ($("#content_text").length){ 
        }

        else if($("#mediaPlayerWrapper").length){// Slide top and bottom bars when video wrapper is displayed
            $("#top").slideUp(2000); //slide up(hide) DIV's

                var timer;

                $('html').mousemove(function(e) { //slide(show) DIV's down on mouse move
                    if(window.lastX !== e.clientX || window.lastY !== e.clientY){   //Check to see if mouse has moved before running code
                        $('#top').slideDown(2000);                      

                        clearTimeout(timer);
                        timer = setTimeout(function(){
                                            $('#top').slideUp(2000)//<--- this is the line that is causing the problem
                                                }, 5000);//slide back up after 5 seconds
                        }

                        window.lastX = e.clientX //stores the current x coordinate
                        window.lastY = e.clientY // stores the current y coordinate
                    }); 
        }

    }); 
```

sorry I cannot provide a fiddle or link to the site. });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:53:19.410

好吧，如果由于某种原因长度不适合您，您总是可以使用 '.addClass()' 添加类似 'is_shown' 的内容，然后使用 '.hasClass('is_shown')' 进行检查。使用这种方法，您可能需要一个额外的父/包装器，它不会使用您的 ajax 函数从 DOM 中添加或删除。

# php - PHP在将url分解为多维数组后保留名称

> ID：12945569
> 
> 赞同：-1
> 
> 时间：2012-10-18T00:47:25.843
> 
> 标签：php, multidimensional-array, array-merge

**如果您对我的问题投反对票，请善意地留下一个理由**

嘿，伙计们，我有一个小片段，它将采用这样的网址结构

```
// brevity
[182] => Array
    (
        [path] => /home-phone/troubleshooting
        [name] => Troubleshooting
    )

[183] => Array
    (
        [path] => /home-phone/troubleshooting/my-voicemail-to-e-mail-feature-is-not-working
        [name] => My Voicemail to E-mail feature is not working.
    )

[184] => Array
    (
        [path] => /home-phone/troubleshooting/when-i-receive-my-voicemail-by-e-mail-i-cannot-hear-the-message
        [name] => When I receive my voicemail by e-mail, I cannot hear the message.
    )

[185] => Array
    (
        [path] => /home-phone/troubleshooting/i-don-t-hear-a-dial-tone-when-i-pick-up-my-phone
        [name] => I don't hear a dial tone when I pick up my phone.
    )

[186] => Array
    (
        [path] => /home-phone/troubleshooting/i-moved-my-voice-adapter-and-can-no-longer-make-or-receive-calls
        [name] => I moved my Voice adapter and can no longer make or receive calls.
    )

[187] => Array
    (
        [path] => /home-phone/troubleshooting/my-call-waiting-is-not-working-since-i-forwarded-voice-to-another-line
        [name] => My call waiting is not working since I forwarded Voice to another line.
    )

[188] => Array
    (
        [path] => /home-phone/troubleshooting/i-m-unable-to-complete-transactions-on-ivr-phone-calls-like-online-banking
        [name] => I'm unable to complete transactions on IVR phone calls (like online banking).
    )

[189] => Array
    (
        [path] => /home-phone/troubleshooting/i-can-t-get-a-dial-tone-and-i-could-before
        [name] => I can't get a dial tone (and I could before).
    )

[190] => Array
    (
        [path] => /home-phone/troubleshooting/im-not-getting-my-voicemail-to-e-mail-messages
        [name] => I'm not getting my Voicemail to E-mail messages.
    )

[191] => Array
    (
        [path] => /home-phone/troubleshooting/my-caller-id-has-not-worked-since-i-forwarded-my-voice-line-to-another-phone-line
        [name] => My Caller ID has not worked since I forwarded my Voice line to another phone line.
    )

[192] => Array
    (
        [path] => /home-phone/troubleshooting/im-having-trouble-sending-andor-receiving-a-fax
        [name] => I'm having trouble sending and/or receiving a FAX.
    )
// brevity 
```

并将它们变成一个multidim数组，像这样

```
[4] => home-phone
[home-phone] => Array
    (

// brevity

        [9] => troubleshooting
        [troubleshooting] => Array
            (
                [0] => my-voicemail-to-e-mail-feature-is-not-working
                [1] => when-i-receive-my-voicemail-by-e-mail-i-cannot-hear-the-message
                [2] => i-don-t-hear-a-dial-tone-when-i-pick-up-my-phone
                [3] => i-moved-my-voice-adapter-and-can-no-longer-make-or-receive-calls
                [4] => my-call-waiting-is-not-working-since-i-forwarded-voice-to-another-line
                [5] => i-m-unable-to-complete-transactions-on-ivr-phone-calls-like-online-banking
                [6] => i-can-t-get-a-dial-tone-and-i-could-before
                [7] => im-not-getting-my-voicemail-to-e-mail-messages
                [8] => my-caller-id-has-not-worked-since-i-forwarded-my-voice-line-to-another-phone-line
                [9] => im-having-trouble-sending-andor-receiving-a-fax
            )

// brevity

    ) 
```

工作得很好，但我到最后才意识到我失去了所有的名字（你可以看到他们的第二列名字），我留下了一个名字的间隔，但我一生都想不通现在怎么弄进去=(

有任何想法吗？

**编辑**忘记了我的源代码；）

```
 $tree = array();
    foreach($indexArray as $branch) {

        $limb = explode('/', $branch['path']);

        $subTree = array(array_pop($limb));
        foreach (array_reverse($limb) as $dir) {
            $subTree = array($dir => $subTree);
        }

        $tree = array_merge_recursive($tree, $subTree);

    } 
```

预期输出应该是

```
[Home Phone] => home-phone
[home-phone] => Array
    (

// brevity

        [Troubleshooting] => troubleshooting
        [troubleshooting] => Array
            (
                [My Voicemail to E-mail feature is not working.] => my-voicemail-to-e-mail-feature-is-not-working
                [When I receive my voicemail by e-mail, I cannot hear the message.] => when-i-receive-my-voicemail-by-e-mail-i-cannot-hear-the-message
                [I don't hear a dial tone when I pick up my phone.] => i-don-t-hear-a-dial-tone-when-i-pick-up-my-phone

                // etc

            )

// brevity

    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:35:27.487

由于您没有将预期的输出放在假设上..您可以尝试：

```
$data = array();
$i = 0 ;
foreach ( $array as $key => $value ) {
    $temp = array();
    setPath($temp,dirname($value['path']) . "/$i/path", basename($value['path']));
    setPath($temp, dirname($value['path']) . "/$i/name", $value['name']);
    $data = array_merge_recursive($data, $temp);
    $i ++;
}

echo "<pre>";
print_r($data); 
```

输出

```
Array
(
    [home-phone] => Array
        (
            [path] => troubleshooting
            [name] => Troubleshooting
            [troubleshooting] => Array
                (
                    [1] => Array
                        (
                            [path] => my-voicemail-to-e-mail-feature-is-not-working
                            [name] => My Voicemail to E-mail feature is not working.
                        )

                    [2] => Array
                        (
                            [path] => when-i-receive-my-voicemail-by-e-mail-i-cannot-hear-the-message
                            [name] => When I receive my voicemail by e-mail, I cannot hear the message.
                        )

                    [3] => Array
                        (
                            [path] => i-don-t-hear-a-dial-tone-when-i-pick-up-my-phone
                            [name] => I don't hear a dial tone when I pick up my phone.
                        )

                    [4] => Array
                        (
                            [path] => i-moved-my-voice-adapter-and-can-no-longer-make-or-receive-calls
                            [name] => I moved my Voice adapter and can no longer make or receive calls.
                        )

                    [5] => Array
                        (
                            [path] => my-call-waiting-is-not-working-since-i-forwarded-voice-to-another-line
                            [name] => My call waiting is not working since I forwarded Voice to another line.
                        )

                    [6] => Array
                        (
                            [path] => i-m-unable-to-complete-transactions-on-ivr-phone-calls-like-online-banking
                            [name] => I'm unable to complete transactions on IVR phone calls (like online banking).
                        )

                    [7] => Array
                        (
                            [path] => i-can-t-get-a-dial-tone-and-i-could-before
                            [name] => I can't get a dial tone (and I could before).
                        )

                    [8] => Array
                        (
                            [path] => im-not-getting-my-voicemail-to-e-mail-messages
                            [name] => I'm not getting my Voicemail to E-mail messages.
                        )

                    [9] => Array
                        (
                            [path] => my-caller-id-has-not-worked-since-i-forwarded-my-voice-line-to-another-phone-line
                            [name] => My Caller ID has not worked since I forwarded my Voice line to another phone line.
                        )

                    [10] => Array
                        (
                            [path] => im-having-trouble-sending-andor-receiving-a-fax
                            [name] => I'm having trouble sending and/or receiving a FAX.
                        )

                )

        )

) 
```

使用的功能

```
function setPath(&$temp, $url, $value) {
    foreach ( array_filter(explode("/", $url)) as $key ) {
        $temp = &$temp[$key];
    }
    $temp = $value;
} 
```

# mirc - 事件变量上的 mIRC

> ID：12945570
> 
> 赞同：0
> 
> 时间：2012-10-18T00:47:30.113
> 
> 标签：mirc

我注意到 mIRC 脚本能力的文档严重缺乏，所以如果我错过了一些东西，我很抱歉，但我一直在到处寻找。

基本上，当有人说某事时，我有一个 on 事件，我需要得到整个消息，这怎么可能？我设法发现了 $1- 但是这只从事件触发到最后抓取了文本，我需要整个消息，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:08:15.467

这实际上非常简单，尽管如果缺少文档，您可能使用的是早期版本的 mirc：

```
on *:TEXT:*I need help with*:#channel: {
  msg $chan $1-
} 
```

`$1-`将始终包含完整的消息。 `$#`是空格分隔的标识符，因此如果您的消息是`john: I need help with etc`，`$1`将包含`john:`，并且`$2`将包含`I`，依此类推。添加破折号意味着“这个以及以后的一切”。由于您的匹配文本是“之前的所有内容`I need help with`和之后的所有内容”，因此此代码将始终包含全文。

如果不明显，上面的代码将使用完整的消息文本向触发事件的通道发送消息。无论您对文本做什么都取决于您；这只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-02T06:52:04.917

/dbg

```
alias dbg {
  if !$debug {  debug -i d dbg  }
  if $regex($1-,/.+!.+@.+.PRIVMSG.#.+:.+/g) {
    echo 4 -s $* 
  }
} 
```

1 美元或 1 美元

# php - 过多的限制是多少？

> ID：12945572
> 
> 赞同：0
> 
> 时间：2012-10-18T00:47:51.973
> 
> 标签：php, error-handling, user-input, validation

我有一个功能可以设置搜索查询中歌曲的键。如果给定的“键”超出允许的范围，它会从`c..b`or我得到它，它只是恢复到. 我是否应该抛出异常来警告提供的 $key 超出允许范围？`0..11``NULL`

这是代码：

```
<?php
function between($x, $y, $z) {
    return (($x <= $y) && ($y <= $z));
}

function setKey($key) {
    if (is_string($key)) {
        $key = array_search(strtolower($key), array("c", "c-sharp", "d", "e-flat", "e", "f", "f-sharp", "g", "a-flat", "a", "b-flat", "b"));
    } else {
        $key = (!between(0, $key, 11)) ? false : $key;
    }
    return (!$key) ? null : $key;
}

var_dump(setKey("g"))."\n";
var_dump(setKey("r"))."\n";
var_dump(setKey(2))."\n";
var_dump(setKey(12))."\n"; 
```

输出：

```
int(7)
NULL
int(2)
NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:18:23.547

这里有两个不同的问题。

第一个是验证输入是否在允许的范围内，并在用户输入超出范围的值时向用户提供反馈。您绝对应该执行此验证。在可能的情况下，在用户开始输入之前使这些值对用户显而易见，或者以消除错误可能性的方式呈现选择。

第二个问题是是否应该抛出异常。理想情况下，仅当您的程序在当前状态下无法执行或继续可能导致数据损坏时，才应以这种方式引发异常。我认为您的情况并非如此，因为您只是在执行读取。

对于您的特定情况，我会使用验证，但不使用例外。我已经包含了额外的细节，以便具有微妙不同场景的人们在遇到问题时可以做出明智的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:49:49.463

是的，让用户知道他们的输入超出范围总是一个好主意。这很可能是用户乐于了解和纠正的错字。

# join - 将多部分视频作为单个文件上传？

> ID：12945575
> 
> 赞同：0
> 
> 时间：2012-10-18T00:48:09.407
> 
> 标签：join, youtube-api, multipart

由于存储限制，我已将视频 ( FLV ) 设置为在达到特定文件大小/长度后拆分，但我找不到一种*简单*的方法来即时连接这些文件以上传它们。

目前看起来我必须使用 ffmpeg 之类的东西将文件连接到一个中间文件中，然后上传它，但是这对资源来说相当密集，如果我可以调整流中的数据会更简单发送到 youtube，因此第一个文件永远不会“结束”，并且可以读取下一个文件（在读取时对其进行修改，使其不会中断），然后 youtube 在处理视频时会“固化”它。

所以问题仍然存在，有什么方法可以做到这一点，还是 FLV 文件格式（wowza / flash video）对我的计划不利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:32:31.383

不，没有办法做到这一点。您需要先将它们连接起来，并且您需要在上传开始时指定整个视频的长度（即，您不能在事先不知道总上传大小的情况下流式传输视频字节）。

# ruby-on-rails - rails 输入验证提交的表单

> ID：12945580
> 
> 赞同：0
> 
> 时间：2012-10-18T00:48:31.620
> 
> 标签：ruby-on-rails, input

我有输入字段的表单，我正在客户端检查错误的输入（恶意脚本等），但我还需要在服务器端检查。我的@_params 哈希有嵌套数据、数组和对象：

```
 {
    "key_0" => {"nested_key_0" => ["array_val_0","array_val_1"], "nested_key_1" => {"nested_key_3" => "nested_value_0"} }
    } 
```

我是否必须编写一个递归方法来遍历哈希并查看每个值？有没有简单的rails方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:39:03.693

这取决于您到底在做什么（大概将这些数据存储在数据库中，然后再显示它？）。

如果您将其保存到数据库，当您调用 Model.save 时，它​​将清理属性。如果您担心脚本，可以使用`h`帮助程序显示数据：`<%= h unsanitary_var %>`

# macports - 我如何忽略/取消标记某些端口？

> ID：12945589
> 
> 赞同：2
> 
> 时间：2012-10-18T00:50:10.333
> 
> 标签：macports

我想知道如何忽略升级某些端口或将它们取消标记为“过时”。

这是由于某些端口未能升级，而我希望升级所有其他端口。我知道`sudo port install -n`，它允许在不升级端口依赖项的情况下安装端口，就像在`mongodb`需要较旧（不是当前）版本的`boost`库的情况下一样，但这在这里不适用。

例如：

```
$ sudo port list outdated
gdb                            @7.5            devel/gdb
py27-scikits-image             @0.7.1          python/py-scikits-image 
```

由于`gdb@7.5`无法更新，我只想升级其他的，即。`py27-scikits-image`，而无需通过整个`sudo port list outdated | awk '{print $1}' | grep -v gdb | xargs sudo port upgrade`管道。

非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T16:30:51.977

我建议为 gdb 创建一个版本号较低的本地端口文件。

1.  创建本地 portfile 存储库：[howto](http://guide.macports.org/#development.local-repositories)
2.  将 gdb portfile 目录（一个名为“gdb”的目录包含文件“Portfile”和目录“files”）复制到本地 portfile 存储库
3.  将端口文件中的版本号更改为例如 0.0
4.  `portindex`在本地 portfile 存储库中运行

本地端口文件覆盖从默认端口存储库下载的文件。低版本号使 macports 认为您的 gdb 版本是最新的。

我希望这会有所帮助。

顺便说一句：你可以做`sudo port upgrade outdated and not gdb`

# jquery - Jquery photoswipe 不工作需要刷新

> ID：12945594
> 
> 赞同：0
> 
> 时间：2012-10-18T00:51:14.417
> 
> 标签：jquery, jquery-mobile

我正在设置一个 jquery 移动 photoswipe，但由于某种原因，除非刷新页面，否则它不会启动。

点击photoswip按钮后，我需要刷新页面才能开始photoswipe

但如果我立即打开照片滑动页面，它就可以了。请问我该如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:05:47.187

更改 hte 脚本加载的顺序。

它应该像这样加载：jquery jquery mobile klass phoneswipe

那应该工作...

ps：页面有js错误，所以问题...

# javascript - 使用 JQuery（或只是 javascript）解析复杂的 JSON 响应时遇到问题

> ID：12945595
> 
> 赞同：1
> 
> 时间：2012-10-18T00:52:01.110
> 
> 标签：javascript, jquery, json, parsing

给定以下从 Solr 实例中获取 JSON 数据的函数：

```
var url = "http://myserver:8080/solr/select?indent=on&version=2.2&q=(title:*Hollis* OR sub_title:*Hollis*+OR+creator:*Hollis*+OR+publisher:*Hollis*+OR+format:*Hollis*++OR+lcsh:*Hollis*++OR+loc_call_num_subject:*Hollis*+OR+note:*Hollis*++OR+toc:*Hollis*)AND+Match_Confidence:[.75+TO+*]&start=0&rows=3500&fl=Geocoded_Field,title,id_inst,Match_Confidence,Conjunct_Longitude1,Conjunct_Latitude1,Anchor,note,creator,format,language,pub_location,publisher,score&wt=json&group=true&group.field=title";

$.getJSON(url, function(data){
    console.log("EXAMPLE TYPE:"+data.grouped.title.groups.docs[0].title);
}); 
```

例如，我如何循环浏览每个响应“文档”（下面发布的数据）并抓住每个“标题”出现？我已经尝试了 data.grouped.title.groups.docs[0].title 的许多变体，但没有成功。我在想我只是在数据访问字符串（data.grouped.title.groups.docs.title）中的顺序不正确。

从浏览器复制和粘贴的查询返回的示例数据：

```
{   "responseHeader":{
    "status":0,
    "QTime":902,
    "params":{
      "indent":"on",
      "wt":"json",
      "version":"2.2",
      "rows":"3500",  "fl":"Geocoded_Field,title,id_inst,Match_Confidence,Conjunct_Longitude1,Conjunct_Latitude1,Anchor,note,creator,format,language,pub_location,publisher,score",
      "start":"0",
      "q":"(title:*Hollis* OR sub_title:*Hollis* OR creator:*Hollis* OR publisher:*Hollis* OR format:*Hollis*  OR lcsh:*Hollis*  OR loc_call_num_subject:*Hollis* OR note:*Hollis*  OR toc:*Hollis*)AND Match_Confidence:[.75 TO *]",
      "group.field":"title",
      "group":"true"}},   "grouped":{
    "title":{
      "matches":2533,
      "groups":[{
          "groupValue":"Thomas Hollis [and] Thomas Brand Hollis",
          "doclist":{"numFound":3,"start":0,"maxScore":0.75592893,"docs":[
              {
                "title":"Thomas Hollis [and] Thomas Brand Hollis",
                "Match_Confidence":0.894584,
                "Conjunct_Latitude1":41.89,
                "Conjunct_Longitude1":12.5,
                "Geocoded_Field":[
                  "note"],
                "pub_location":[
                  "1752"],
                "Anchor":[
                  "Roma"],
                "id_inst":[
                  "009360446"],
                "language":["English"],
                "format":["Other"],
                "note":[
                  "Two bust portraits carved in bas-relief. One is of Thomas Hollis, the elder (1659-1731), and one of his friend and heir, Thomas Brand Hollis (ca.1719-1804). Portraits are framed together",
                  "Inscribed on front of each sculpture: Andrea Pozzi fece dal naturale; verso of Thomas Hollis inscribed: Ritratto del Sig: re Tommaso / Hollis, Cau: re Inglese, Termina= / to in Roma nel suo Giorno Nat= / alizio de i 14 Aprile 1752 in / Et di 32 Ani; verso of Thomas Brand Hollis inscribed: Ritratto dell'Illust: o Sig: re / Tommaso Brand, Caualiere / Inglese, Fatto in Roma / Nell' Anno 1752",
                  "Title taken from plaques",
                  "Framed and glazed"],
                "creator":["Pozzi, Andrea, 1718-1769","Hollis, Thomas, 1720-1774, former owner"],
                "score":0.75592893}]
          }},
        {
          "groupValue":"The post of duty",
          "doclist":{"numFound":24,"start":0,"maxScore":0.5459487,"docs":[
              {
                "title":"The post of duty",
                "Match_Confidence":0.985783,
                "Conjunct_Latitude1":42.4842,
                "Conjunct_Longitude1":-76.4799,
                "Geocoded_Field":[
                  "lcsh"],
                "pub_location":[
                  "Coxsackie, N. Y"],
                "Anchor":[
                  "Lansing"],
                "id_inst":[
                  "006317718"],
                "language":["English"],
                "format":["Book"],
                "note":[
                  "Published by request"],
                "publisher":[
                  "F.C. Dedrick, Printer"],
                "creator":["Zabriskie, Francis Nicoll, 1832-1891"],
                "score":0.5459487}]
          }},
        {
          "groupValue":"Discourses concerning government: in way of dialogue",
          "doclist":{"numFound":1,"start":0,"maxScore":0.41996053,"docs":[
              {
                "title":"Discourses concerning government: in way of dialogue",
                "Match_Confidence":0.95121,
                "Conjunct_Latitude1":51.5142,
                "Conjunct_Longitude1":-0.093145,
                "Geocoded_Field":[
                  "pub_location"],
                "pub_location":[
                  "London"],
                "Anchor":[
                  "London"],
                "id_inst":[
                  "006199101"],
                "language":["English"],
                "format":["Book"],
                "note":[
                  "First published 1681 under title: Plato redivivus",
                  "Bound in old mottled calf, rebacked"],
                "publisher":[
                  "Printed, and sold by A. Baldwin"],
                "creator":["Neville, Henry, 1620-1694","Hollis, Thomas, 1720-1774, former owner"],
                "score":0.41996053}]
          }}]}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:58:30.977

看到这个 jsfiddle [http://jsfiddle.net/ByxHV/](http://jsfiddle.net/ByxHV/)

```
for (var i =0; i < data.grouped.title.groups.length; i++) {
    var  group = data.grouped.title.groups[i];
    console.log(group.groupValue, group.doclist.numFound)       
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:05:04.703

我使用[JSON Pretty Print](http://jsonprettyprint.com/)来检查 JSON

```
var titleList = [];

    $.each(data.grouped.title.groups, function(index, value) {
        $.each(value.doclist.docs, function(index, value) {
            titleList.push(value.title);
        });
    }); 
```

# python - 试图查看一个数字在python中是否是素数

> ID：12945600
> 
> 赞同：0
> 
> 时间：2012-10-18T00:52:29.953
> 
> 标签：python, function, primes

我正在尝试编写一个程序来告诉您一个数字是否为素数。这里是。正如您所看到的，当您运行该`chkPrime`函数时，一切都返回 true。我这辈子都想不通。有任何想法吗？

```
total=0

#Check if number is whole
def chkWhole(x):

    if(x%1 == 0):

        return True

    else:

        return False

#Check to see if the number divides evenly with all primes
def chkModtwo(n):
    a=n%2
    if chkWhole(a)==True:
        return True
    else:
        return False
def chkModthree(n):
    a=n%3
    if chkWhole(a)==True:
        return True
    else:
        return False
def chkModfive(n):
    a=n%5
    if chkWhole(a)==True:
        return True
    else:
        return False
def chkModseven(n):
    a=n%7
    if chkWhole(a)==True:
        return True
    else:
        return False

#Check if the number is a prime using other two functions

def chkPrime(n):
    if n== 1 or 2 or 3 or 5 or 7:
        return True

    if chkModtwo(n)==False and chkModthree(n)==False and chkModfive(n)==False and chkModseven(n)==False:
        return True
    else:
        return False

#while True:
#yourinput=raw_input("Enter to check if it is a prime")
#
#
#    youranswer=chkPrime(yourinput)
#
#    if youranswer==True:
#        print("Yes, it is a prime")
#    else:
#        print("No, this number is not prime") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:54:28.020

```
if n== 1 or 2 or 3 or 5 or 7: 
```

应该

```
if n == 1 or n == 2 or n == 3 or n == 5 or n == 7: 
```

或者

```
if n in (1, 2, 3, 5, 7): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:49:57.037

当您的函数试图确定 143 是素数还是合数时，它会如何响应？

这是我在[博客](http://programmingpraxis.com/essays)中编写此函数的方式。

```
def isPrime(n):
    if n % 2 == 0:
        return n == 2
    d = 3
    while d * d <= n:
        if n % d == 0:
            return False
        d += 2
    return True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-12T23:35:41.530

假设您不追求最​​大效率，这对于高达 10^14 的数字将是快速而简洁的。遍历 10**7 范围内的每个数字大约需要 15 秒。因此，对于这种大小的数字，您可以在大约 10-15 秒内执行此操作。当然，您可以将打印语句更改为您需要的任何内容

尝试：

```
import math
def isPrime(x):
     prime = True
     if x%2 == 0:
          Prime =False
     else:
          for i in range(2,math.sqrt(x)):
               if a == i:
                    pass
               else:
                    a%i == 0:
                    Prime = False
                    break
     return Prime

if isPrime(x):
    print('prime')
else:
    print('Not prime') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-07-30T11:51:57.510

```
def prime():
    a=int(raw_input("enter the no : "))
    if a == 1:
         print "the no is not prime"
    elif a == 2:
         print "the no is prime"
    else:
        for i in range(2,a):
            if a%i == 0:
            return "the no is not prime"
            else:
             return "the no is prime"

prime() 
```

# linux - “ulimit -v”如何在 Linux 操作系统中工作？

> ID：12945606
> 
> 赞同：4
> 
> 时间：2012-10-18T00:53:31.380
> 
> 标签：linux, bash, ulimit

我想在 Linux 上使用 ulimit 命令限制通过 bash 启动的进程使用的内存。我想知道使用什么操作系统机制来支持 ulimit。特别是，它是基于 cgroups 的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:16:56.423

“ulimit”基本上是不合时宜的。如果你需要资源，你不应该有任何开箱即用的真正限制，如果你想限制资源，有更好的方法来建立报价。

这是一个很好的概述：

*   [http://www.gnu.org/software/libc/manual/html_node/Limits-on-Resources.html](http://www.gnu.org/software/libc/manual/html_node/Limits-on-Resources.html)

要查看的几个手册页包括：

*   [人 2 getrlimit](http://linux.die.net/man/2/getrlimit)

*   [人 2 设定限制](http://linux.die.net/man/2/setrlimit)

*   [man 3 ulimit](http://linux.die.net/man/3/ulimit) 已过时！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:04:11.557

获取和设置限制的 Linux API 方法是[getrlimit(2) 和 setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/getrlimit.2.html "getrlimit(2)")

限制在进程空间内进行管理。子进程将继承其父进程的限制。限制是 POSIX 标准的一部分，因此所有符合 POSIX 的操作系统都支持它们（Linux、BSD、OSX）。

cgroups 是 Linux 特定的，在 Linux 安装中甚至不需要。我不确定是否可以使用 cgroups 管理限制，但这样做肯定是不标准的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T01:25:02.460

我使用[softlimit](http://cr.yp.to/daemontools/softlimit.html)，它是 DJB`daemontools`软件包的一部分。

例如，通过指定类似的东西`softlimit -m 1048576 nautilus`，程序（nautilus）永远不会超过 1MiB 的内存使用量（这也导致它在这种情况下立即失败）。

# iphone - 无法在 iPhone 或 Mac 上播放 wav 音频文件

> ID：12945609
> 
> 赞同：1
> 
> 时间：2012-10-18T00:53:52.533
> 
> 标签：iphone, ios, macos, avaudioplayer, audiotoolbox

我正在开发一个 iPhone 应用程序，并包含一个要播放的声音文件。我想将其转换为 CAF 文件。我知道 afconvert 工具，但我的问题是任何 MAC 音频工具（如 afplay）都会返回错误：错误：AudioFileOpen failed ('dta?')

这是我的命令：afplay /Users/Thomas/Downloads/cash.wav

我知道这不是权限问题，因为我做了一个 chmod 777 并且可以运行文件 /Users/Thomas/Downloads/cash.wav ，它返回：cash.wav: RIFF (little-endian) data, WAVE audio, MPEG Layer 3, mono 16000赫兹

仅供参考，如果我在 iTunes 中打开文件，就会在那里播放。

感谢您对我的问题的任何帮助。-汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:55:13.377

在你的开发系统上使用 iTunes 来转换这个文件。

*   此文件是 WAV 包装的 MP3 比特流。虽然在技术上没有错误，但这是一种非常不寻常的格式，这几乎肯定是你得到的原因`dta?`
*   该文件具有硬件解码可能不支持的奇怪采样率。

iTunes 对播放和转换的内容更加自由。

# sql - 如何将 CSV 导入不带 BCP 的 SQL Server 2005？

> ID：12945610
> 
> 赞同：0
> 
> 时间：2012-10-18T00:54:04.500
> 
> 标签：sql, sql-server, sql-server-2005, csv, bulkinsert

我正在开发一个托管在共享环境中的 ColdFusion（请随意大笑）8 站点。数据库和 Web 服务器是单独的盒子。我们都没有 root 访问权限，也没有“exec xp_cmdshell”权限。SQL Server 版本是 2005。

那么，如果我们想有效地将​​ CSV 或其他文本文件导入数据库——但没有 BCP 或“格式文件”，我们应该尝试与 BULK INSERT 最接近的等效项是什么？

显然，我们可以在 ColdFusion 中构建一个巨大的 INSERT 语句，每行使用 UNION ALL，然后运行它。但这是最好的选择吗？你的意见？

# php - javascript：播放/暂停在轮播中不起作用？

> ID：12945612
> 
> 赞同：0
> 
> 时间：2012-10-18T00:54:19.087
> 
> 标签：php, javascript, carousel

我有一个在网站上运行轮播的脚本。这是正在执行工作的脚本。我需要在其中添加一个播放/暂停按钮。用户@gskartwii 在这里帮助了我[Javascript - 如何在轮播中添加暂停按钮？](https://stackoverflow.com/questions/12927829/javascript-how-to-add-a-pause-button-in-carousel/12928315#comment17536757_12928315)添加按钮。我已经修改了代码以适应设计。

问题是暂停工作正常。但是一旦暂停，再次点击它就不会恢复播放！我不是 Javascript 方面的专家，所以不确定我需要做什么。：/

有人可以帮我解决这个问题。

这是脚本：

```
 <?php
$speed = 500;//miliseconds
?>

<script type="text/javascript">
var paused=false;
var timeoutID;

homeTileCount = 1;
$$('.home-tile-container img').each(function(e){
    $(e).writeAttribute('id','home-tile-' + homeTileCount);
    $(e).addClassName('home-tile');
    homeTileCount++;
});

homeTileCount--;

var homeTileRemote = $$('.home-tile-remote')[0];

//play / pause button start
homeTileRemote.insert('<div id="home-title-remote-10" class="overflow"><a href="#" onclick="if(!paused){paused=true} else{paused=false}">| |</a></div>');
//play/pause button end

for (i=homeTileCount;i>=1;i--){
    homeTileRemote.insert('<div id="home-tile-remote-'+i+'" class="overflow"><a href="#" onclick="switchTile('+i+');return false">'+i+'</a></div>');
}

function switchTile(n)
{
    if(!paused){
    //console.log(n);
    clearTimeout(timeoutID);
    $$('.home-tile-container img').each(function(e){
        e.removeClassName('home-tile-active');
    });

    $$('.home-tile-remote > div').each(function(e){
        e.removeClassName('home-tile-remote-active');
    });

    $('home-tile-remote-'+n).addClassName('home-tile-remote-active');
    $('home-tile-'+n).addClassName('home-tile-active');
    next = n+1;
    if (next > homeTileCount)
        next = 1;
    timeoutID = setTimeout('switchTile('+next+')', <?=$speed?>);}
}

switchTile(1);
setTimeout('switchTile(2)', <?=$speed?>);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:27:41.600

如果您有按钮，请参考您提出的其他问题：

`<button type="button" onclick="paused=true;">Pause</button>`

然后播放按钮应该是

`<button type="button" onclick="paused=false;">Play</button>`

# php - jquery ajax循环没有理由

> ID：12945614
> 
> 赞同：1
> 
> 时间：2012-10-18T00:54:36.443
> 
> 标签：php, jquery

我有 jquery 代码在我的表格视图中逐行删除数据。当用户点击删除图标时，弹出确认框并有“是”和“否”按钮。如果“是”，则删除该行，如果“否”，则关闭构象框并且什么也不做。问题是，假设我有 2 行数据是这样的：-

```
<tr bgcolor=#ACACAC id='ak1'>
<td align='center'>1.</td>
<td>Data 1</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td align='center'>
       <img src='image/DocEdit.png' class='editData' id='ID_16'>&nbsp;&nbsp;<img src='image/DocDelete.png' **class='deleteData'** id='**ID_16**'>
    </td>
</tr>

<tr bgcolor=#6D6D6D id='ak1'>
<td align='center'>2.</td>
<td>Data 2</td>
<td></td>
<td></td>
<td></td>
<td align='center'>
       <img src='image/DocEdit.png' class='editData' id='ID_17'>&nbsp;&nbsp;<img src='image/DocDelete.png' **class='deleteData'** id='**ID_17**'>
    </td>
</tr> 
```

因此，当我单击数据 1 上的删除时，ID_16 已传递给 jquery 代码。比我在构象框上单击“否”。之后，我在数据 2 上单击删除。现在我在构造框上单击“是”。从数据库中删除数据 ID_17，但在删除 ID_17 之后，我的 jquery 将循环并删除 ID_16 以及我之前尝试删除的所有数据。这就像我在构造框中选择“否”的数据的删除操作排队。下面是我的jQuery代码。

```
 //.deleteData is class for delete button    
  $('.deleteData').click(function(){

    var idData=$(this).attr('id'); //get data id to delete

    //Fade in the Popup for conformation delete
    $('#cfm-box').fadeIn(300);

    //Set the center alignment padding + border see css style
    var popMargTop = ($('#cfm-box').height() + 24) / 2; 
    var popMargLeft = ($('#cfm-box').width() + 24) / 2;

    $('#cfm-box').css({ 
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    // Add the mask to body
    $('body').append('<div id="mask"></div>');
    $('#mask').fadeIn(300);

            //if button no click, do nothing
            //#no refer to the button ID no.
            $('#no').click(function(){
        $('#mask , .cfm-popup').fadeOut(300 , function() {
        $('#mask').remove();
        });
    });//end #no

            //if yes click, delete data from db
            //#yes refer to the button ID yes.
            $('#yes').click(function(){

        //parameter to send for delete WHERE statement
                    var tahun = $('#tahunSemasa').val();
        var suku = $('#sukuSemasa').val();

        var dataString = "tahun="+tahun+"&suku="+suku+"&id="+idData+"&action=delete";

        $.ajax({
        type: "POST",
        url: "prestasiProses.php",
        data: dataString,
        cache: false,
        success: function(html)
        {
            alert(html);

            if(html=='true')
            {
               window.location.href="main.php?a=31&tahun="+tahun+"&suku="+suku+"&act=delete";
            }
            else
            {
               alert("Failed!");    
            }
        }
       });

        $('#mask , .cfm-popup').fadeOut(300 , function() {
        $('#mask').remove();
        });

    });//end #yes

});//end .deleteData 
```

任何想法为什么这个代码循环这样？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:15:11.210

你不应该在你的`$('.deleteData').click(function(){`. 看看[这个小提琴](http://jsfiddle.net/3MhEM/1/)，看看我认为你应该如何布局你的代码。请注意，我创建了`idData`一个全局变量并将您的`$('#no').click(function(){`和`$('#yes').click(function(){`代码移到了底部。我的小提琴不工作，因为它没有你所有的包含，但应该告诉你我的意思。

我还将您的掩码移除移动到您的 ajax`success`处理程序中，因为您似乎希望在您的 ajax 恢复后运行它。是这样吗？

编辑：您遇到的问题是因为您`deleteData`多次绑定到该类的项目。当您运行选择器`$('.deleteData').click(`时，您是在说，`"get each instance of an element with the class 'deleteData' and then bind this function to it."` 既然您有`$('#no').click(`and `$('#yes').click(`INSIDE ，您`$('.deleteData').click(`就绑定了`$('#no').click(`and`$('#yes').click(`两次。如果您有 'deleteData' 的三个实例，您的 ajax 代码将运行 3 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:29:56.883

问题是每次单击`deleteData`都会将 click 绑定到`yes`and `no`，如果单击`deleteData`两次，则将 click 绑定到`yes`and`no`两次，因为它在`deleteData`click 事件中。
因此，为了防止这种行为，您必须将其从内部`deleteData`事件中删除。

你可以试试[**这个**](http://jsfiddle.net/nshVC/)演示。

*   键入您想要的绑定数量
*   点击一些文字
*   查看它记录值的次数

# php - 打印行为php

> ID：12945621
> 
> 赞同：2
> 
> 时间：2012-10-18T00:55:29.937
> 
> 标签：php

下面是奇怪的东西，我没有得到

```
if (print("foo") || print("bar")) {
  // "foo" has been printed.
} 
```

为什么输出是`1`？

请解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:59:02.960

这是因为 PHP 是一种荒谬的语言。`print`不是一个正常的功能，它是一种语言结构。这一行实际上被解析为：

```
if (print (("foo") || print("bar"))) 
```

And`("foo") || print("bar")`是一个计算结果为 的表达式`1`。布尔上下文中的字符串`"foo"`为真，因此`||`运算符 yield `1`。

如果您以人们期望的解析方式显式地将表达式括起来：

```
if ((print("foo")) || (print("bar"))) 
```

那么输出就是你所期望的：

```
foo 
```

# php - 有没有办法使用 ODBC 让用户能够将 MySQL 下载为格式化的 excel 文件？

> ID：12945623
> 
> 赞同：1
> 
> 时间：2012-10-18T00:55:39.507
> 
> 标签：php, mysql, database, excel, odbc

我有一个调查网站，它从用户输入中收集数据并将其存储在 MySQL 中。

我希望一些用户能够访问允许他们下载数据的格式化 excel 文件的页面（注意，不是 csv）。

我听说 ODBC 允许您将 excel 与 MySQL 连接，但找不到任何服务器端应用程序。

可能吗？

我正在为该网站使用 PHP。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:04:09.913

将数据库导出到 excel 文件应该不难，因为 excel 可以读取 xhtml。

只需将您的信息输出为常规 HTML 表格

```
<table>
<tr>
<td>title</td>
</tr>
<tr>
<td>record1</td>
</tr>
</table> 
```

然后添加这些标题以强制自动下载和解释为 excel 文件：

```
header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header ("Last-Modified: " . gmdate("D,d M YH:i:s") . " GMT");
header ("Cache-Control: no-cache, must-revalidate");
header ("Pragma: no-cache");
header ("Content-type: application/x-msexcel");
header ("Content-Disposition: attachment; filename=\"{$yourFileName}\"" );
header ("Content-Description: PHP Generated Data" ); 
```

它应该按预期工作。

编辑：这是具有正确 XHTML 模式的 xls 表的示例：

```
<?php
header ("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header ("Last-Modified: " . gmdate("D,d M YH:i:s") . " GMT");
header ("Cache-Control: no-cache, must-revalidate");
header ("Pragma: no-cache");
header ("Content-type: application/x-msexcel");
header ("Content-Disposition: attachment; filename=newtest.xls" );
header ("Content-Description: PHP Generated Data" );
?>
<html xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta name="Excel Workbook">
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Excel.Sheet>
<meta name=Generator content="Microsoft Excel 14">
<style>
#test
{
    font-style:italic;
}
</style>
</head>
<body>
<table>
    <tr>
        <td><b>header in bold</b></td>
        <td><i>header in italic</i></td>
    </tr>
    <tr>
        <td>1</td>
        <td><span style="font-weight:bold; font-style:italic">my data with css styling</span></td>
    </tr>
    <tr>
        <td>2</td>
        <td><span id="test">I'm italic 'cause I can read style</span></td>
    </tr>
</table>
</body>
</html> 
```

# php - PHP DomDocument 替换模式

> ID：12945631
> 
> 赞同：2
> 
> 时间：2012-10-18T00:57:57.777
> 
> 标签：php, search, replace, pattern-matching, domdocument

我需要查找并替换指向超链接的 http 链接。这些 http 链接在 span 标签内。

$text 有 html 页面。其中一个跨度标签有类似的东西

```
<span class="styleonetwo" >http://www.cnn.com/live-event</span> 
```

这是我的代码：

```
$doc = new DOMDocument();
$doc->loadHTML($text);
foreach($doc->getElementsByTagName('span') as $anchor) {
    $link = $anchor->nodeValue;
    if(substr($link, 0, 4) == "http")
    {
        $link = "<a href=\"$link\">$link</a>";
    }
    if(substr($link, 0, 3) == "www")
    {
        $link = "<a href=\"http://$link\">$link</a>";
    }    
    $anchor->nodeValue = $link;
}
echo $doc->saveHTML(); 
```

它工作正常。但是......即使跨度内的数据类似于：

```
<span class="styleonetwo" > sometexthere http://www.cnn.com/live-event somemoretexthere</span> 
```

显然上面的代码不适用于这种情况。有没有一种方法可以在不使用 preg_replace 的情况下使用 DOMDocument 搜索和替换模式？

**更新：**回答 phil 关于 preg_replace 的问题：

我使用 regexpal.com 来测试以下模式匹配：

```
\b(?:(?:https?|ftp|file)://|(www|ftp)\.)[-A-Z0-9+&@#/%?=~_|$!:,.;]*[-A-Z0-9+&@#/%=~_|$] 
```

它在 regexpal 中提供的 regextester 中效果很好。当我在 PHP 代码中使用相同的模式时，我得到了大量奇怪的错误。即使是转义字符，我也遇到未知修饰符错误！以下是我的 preg_replace 代码

```
$httpRegex = '/\b(\?:(\?:https?|ftp|file):\/\/|(www|ftp)\.)[-A-Z0-9+&@#/%\?=~_|$!:,.;]*[-A-Z0-9+&@#/%=~_|$]/';
$cleanText = preg_replace($httpRegex, "<a href='$0'>$0</a>", $text); 
```

我对“未知修饰符”感到非常沮丧，并寻求 DOMDocument 来解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:01:00.717

正则表达式很适合这个问题——所以更好用`preg_replace`。

现在您的模式中只有几个未转义的[定界符](http://www.php.net/manual/en/regexp.reference.delimiters.php)，因此请转义它们或选择另一个字符作为定界符 - 例如，`^`. 因此，正确的模式是：

```
$httpRegex = '^\b(?:(?:https?|ftp|file):\/\/|(www|ftp)\.)[-A-Z0-9+&@#\/%\?=~_|$!:,.;]*[-A-Z0-9+&@#\/%=~_|$]^i'; 
```

# ruby-on-rails-3 - 使用 CanCan 能力的不同方式

> ID：12945634
> 
> 赞同：2
> 
> 时间：2012-10-18T00:58:09.217
> 
> 标签：ruby-on-rails-3, cancan

我有四个场景想要获得一些反馈，以便更好地了解 CanCan 如何与技能配合使用。

1 - 使用迭代中的对象可以将模型传递给 CanCan。它似乎工作正常。似乎这将从传递的对象中定义一个非常具体的能力。

```
 @users.each do |user|
    link_to user.name, user_path(user) if can? :edit, user 
```

2 - @user 不是在控制器中设置的变量。我假设这与 #1 相同，因为 load_and_authorize_resource 创建了 @user 实例。

```
 @users.each do |user|
    link_to user.name, user_path(user) if can? :edit, @user 
```

但是，当一个实例变量存在于与当前模型无关的视图中并且不是故意在控制器中设置的时候呢？例如，当 @account 实例未在 show 操作中设置时，显示用户页面内的以下内容。当 CanCan 甚至不知道它是什么时，它如何使用 @account？

```
 link_to "view user account", account_path(1) if can? :read, @account 
```

3 - 使用模型定义能力怎么样？我认为这是一个非常广泛的“可以编辑用户”的能力......你什么时候会使用它？

```
 @users.each do |user|
    link_to user.name, user_path(user) if can? :edit, User 
```

4 - 使用关联。不会破坏页面...但是，我不确定它是否按预期工作。

```
 @users.each do |user|
    link_to "view user account", account_path(1) if can? :read, user.account 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:10:10.723

哦，一个多部分的问题。

### 案例#1 和#2

这两个几乎相同。不同之处在于，`@user`变量是在您的控制器中预先设置的，`load_and_authorize_call`或者在您的操作之前运行的其他过滤器。

*如果您想检查单个对象的权限，这很有用，即用户只能编辑他们自己的记录。*

**对于案例 #2 的结尾：**

您需要确保在控制器中设置变量，然后才能在控制器或视图中访问它们以进行权限检查。就像您想在其他与权限检查无关的情况下访问它们一样。

### 案例#3

主要用于用户可以编辑特定类的所有对象的情况。

*如果您希望用户编辑特定类的所有对象，这很有用，即管理员可以编辑所有用户的详细信息*

### 案例#4

使用关联将抓取该记录并将其传递给 CanCan，就像使用 will 一样`if can? :read, user`。与案例 #1 并没有什么不同。

# ruby-on-rails - 延迟作业工人一直关闭？

> ID：12945638
> 
> 赞同：0
> 
> 时间：2012-10-18T00:58:30.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, delayed-job, worker

Rails 的新手和延迟作业的新手。

有一个应该在 5 分钟后触发。我终于让它工作了，所以如果我跑

```
rake jobs:work 
```

在我的终端中，作业启动并正常工作。如果我在终端中按 CTRL-C 并退出该操作，则延迟的作业将停止正常工作。这是我的本地服务器上的一件事和 Heroku 上的另一件事，我必须使用启动延迟的作业

```
heroku run rake jobs:work 
```

我查看了新的 Heroku 工具带并下载了他们建议用于工人维护的 gem，工头，但是当我运行“工头启动”时，我收到了这个错误

```
ERROR: procfile does not exist 
```

我不知道 procfile 是什么，我害怕在花了将近一天的时间调试我的 delay_jobs 操作后破坏了一些东西，我想正确地做这件事以确保它能够正常工作，而不是找出一些破坏的 hacky 修复后来——所以我想我应该问这个问题，不管它可能是多么令人讨厌的模糊。

我应该为此使用工头吗？还是无业？（在另一个 SO 问题中看到了）。我的procfile在哪里？我应该对它做些什么吗？

谢谢，

萨沙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:37:31.117

您应该使用 a`procfile`来设置 Heroku 进程，这是 Heroku 用来定义和控制进程的标准方法。

如果您到目前为止还没有使用 a `procfile`，那么一切可能仍然有效，因为 Heroku 在您推送 Rails 应用程序时添加了一些默认进程，包括`web`和`worker`进程。默认`worker`进程设置为延迟作业。

开发 Foreman 是为了设置您的本地计算机以使用相同的方法，但与 Heroku 服务不同，Foreman 实际上需要一个 procfile 来控制在 Foreman 启动时启动的服务，因为它不知道如何设置默认值。

我建议创建一个`procfile`, 放置在项目的根目录中，以确保您的进程在本地计算机上的设置和操作方式与在 Heroku 上的方式相同。如果您想模仿 Heroku 自动设置的内容，请`procfile`根据您是否使用 Thin Web 服务器（Heroku 推荐）添加以下内容。

在您的 gemfile 中使用 Thin：

```
web: bundle exec thin start -R config.ru -e $RACK_ENV -p $PORT
worker: bundle exec rake jobs:work 
```

如果没有特殊的 Web 服务器（例如，您使用的是 webrick，rails 默认）：

```
web: bundle exec rails server -p $PORT
worker: bundle exec rake jobs:work 
```

一旦这个文件就位，你就可以在你的本地机器上运行工头，它会自动启动你的网络服务器和延迟工作的工作人员。

运行此过程只会影响在本地计算机上启动 delay_job。当您运行与当前使用的完全相同的命令`bundle exec rake jobs:work`时，应该不会影响您在本地或 Heroku 上的 dj 操作。显然，需要进行一些测试才能使情况确实如此。

Workless 旨在扩展 Heroku 上的工人，这样您就不必在没有可用工作时为他们付费。`procfile`它与或定义如何实际启动 dj 工作进程无关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T01:15:06.417

据我所知，delayed_job 有 2 个版本：

1.  原始（托比的） [https://github.com/tobi/delayed_job](https://github.com/tobi/delayed_job)
2.  集体理念的分叉： [https ://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

使用collectiveidea版本时，您应该如下启动它：

```
# Runs two workers in separate processes.
$ RAILS_ENV=production script/delayed_job -n 2 start 
```

我不熟悉 Heroku 上的延迟作业，请按照它的说明进行操作。

# javascript - 如何获取 HTML 下拉框的内容？

> ID：12945640
> 
> 赞同：-1
> 
> 时间：2012-10-18T00:58:30.117
> 
> 标签：javascript, jquery, forms, dom, drop-down-menu

我有一个下拉列表作为表单的一部分。它调用一个 JavaScript 函数作为它的动作，它的内容是几个字符串之一。

在该函数中，我需要获取用户选择的字符串。我遇到了一个函数，可以让我获取所选项目的索引号，但是由于列表的内容可能会有所不同，因此它实际上是无用的。有没有一种方法可以让我获取用户输入的实际字符串，可能是使用 DOM 和`getElementById()`，或者使用 JQuery？

我考虑使用文本字段，但这会带来与界面相关的错误的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:05:41.773

不太确定你想要什么，但据我了解，也许[就是这样](http://jsfiddle.net/xyXPz/1)：

**HTML**

```
<select>
    <option value="1">This is the first one</option>
    <option value="2">This is the second one</option>
</select> 
```

**Javascript**

```
$('select').on('change', function() {
    alert($(this).find('option:selected').text());
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:10:25.560

**编辑：** 您似乎想要选项的文本，而不是值。

**第二次编辑：** 在 OP 中使用 Rob 的建议，所以我们不需要迭代。

HTML

```
​&lt;select name="myselect" id="myselect">
  <option value="alpha">one</option>
  <option value="beta">two</option>
  <option value="gamma">three</option>
</select>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

JS

```
var mySelect = document.getElementById('myselect')​​​; //get our select by its ID
mySelect.addEventListener('change', function(evt){
   return evt.target.options[evt.target.selectedIndex].text;  
}); 
```

​</p>

请注意*addEventListener*在 Internet Explorer 8 及更低版本上不起作用，因此您需要使用*attachEvent*。不过，这应该给你一个很好的主意。如需进一步参考，请参阅[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

​​</p>

# c - WinApi，按钮不显示

> ID：12945649
> 
> 赞同：2
> 
> 时间：2012-10-18T00:59:26.533
> 
> 标签：c, windows, winapi

我正在尝试创建简单的 Windows 应用程序 uisng WinAPi。这是代码：

```
 #include "stdafx.h"
       #include "APIup.h"

       #define MAX_LOADSTRING 100
       HWND hWnd,cw13;
       // Global Variables:
       HINSTANCE hInst;                             // current                      instance
       TCHAR szTitle[MAX_LOADSTRING];                   // The title bar text
       TCHAR szWindowClass[MAX_LOADSTRING];         // the main window class name

       // Forward declarations of functions included in this code module:
       ATOM             MyRegisterClass(HINSTANCE hInstance);
       ATOM Register(HINSTANCE hInstance);
       BOOL             InitInstance(HINSTANCE, int);
       LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);
       LRESULT CALLBACK    WndProc_dla13(HWND, UINT, WPARAM, LPARAM);
       INT_PTR CALLBACK About(HWND, UINT, WPARAM, LPARAM);

       int APIENTRY _tWinMain(HINSTANCE hInstance,
                            HINSTANCE hPrevInstance,
                            LPTSTR    lpCmdLine,
                            int       nCmdShow)
       {
        UNREFERENCED_PARAMETER(hPrevInstance);
        UNREFERENCED_PARAMETER(lpCmdLine);

            // TODO: Place code here.
        MSG msg;
                HACCEL hAccelTable;

        // Initialize global strings
        LoadString(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);
        LoadString(hInstance, IDC_APIUP, szWindowClass, MAX_LOADSTRING);
        MyRegisterClass(hInstance);
        Register(hInstance);

        // Perform application initialization:
        if (!InitInstance (hInstance, nCmdShow))
        {
            return FALSE;
        }

        hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_APIUP));

        // Main message loop:
        while (GetMessage(&msg, NULL, 0, 0))
        {
            if (!TranslateAccelerator(msg.hwnd, hAccelTable, &msg))
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }

        return (int) msg.wParam;
       }

        ATOM MyRegisterClass(HINSTANCE hInstance)
        {
            WNDCLASSEX wcex;

            wcex.cbSize = sizeof(WNDCLASSEX);

            wcex.style          = CS_HREDRAW | CS_VREDRAW;
            wcex.lpfnWndProc    = WndProc;
            wcex.cbClsExtra     = 0;
            wcex.cbWndExtra     = 0;
            wcex.hInstance      = hInstance;
            wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_APIUP));
            wcex.hCursor        = LoadCursor(NULL, IDC_ARROW);
            wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);
            wcex.lpszMenuName   = MAKEINTRESOURCE(IDC_APIUP);
            wcex.lpszClassName  = szWindowClass;
            wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));

            return RegisterClassEx(&wcex);
               }

               ATOM Register(HINSTANCE hInstance)
               {
            WNDCLASSEX cw13class;

            cw13class.cbSize = sizeof(WNDCLASSEX);

            cw13class.style         = CS_HREDRAW | CS_VREDRAW;
            cw13class.lpfnWndProc   = WndProc_dla13;
            cw13class.cbClsExtra        = 0;
            cw13class.cbWndExtra        = 0;
            cw13class.hInstance     = hInstance;
            cw13class.hIcon         = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_APIUP));
            cw13class.hCursor       = LoadCursor(NULL, IDC_ARROW);
            cw13class.hbrBackground = GetSysColorBrush(COLOR_3DFACE);
            cw13class.lpszMenuName  = NULL;
            cw13class.lpszClassName = L"13class";
            cw13class.hIconSm       = LoadIcon(cw13class.hInstance,                               MAKEINTRESOURCE(IDI_SMALL));
            return RegisterClassEx(&cw13class);

        }

        BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)
        {

           hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,
              CW_USEDEFAULT, 0, 100, 100, NULL, NULL, hInstance, NULL);
           cw13=CreateWindow(L"13class",L"Ćwiczenie                         13",WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,0,300,300,NULL,NULL,hInst,NULL);

           if (!hWnd)
           {
              return FALSE;
           }

          ShowWindow(hWnd, nCmdShow);
           UpdateWindow(hWnd);

           return TRUE;
        }

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    switch (message)
    {
    case WM_COMMAND:
        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);
        // Parse the menu selections:

        switch (wmId)
        {
        case IDM_ABOUT:
            DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
            break;
        case IDM_EXIT:
            DestroyWindow(hWnd);
            break;
        case ID_32771:
            ShowWindow(cw13, 1);
            break;

        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }
        break;
    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        // TODO: Add any drawing code here...
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

LRESULT CALLBACK WndProc_dla13 (HWND hWnd, UINT msg/*message*/, WPARAM  wParam,LPARAM lParam)
        {
 switch(msg)  
  {
    case WM_CREATE:

      CreateWindowW(L"button", L"Beep",
          WS_VISIBLE | WS_CHILD ,
          20, 50, 80, 25,
          cw13, (HMENU) 1, hInst, NULL);

      CreateWindowW(L"button", L"Quit",
          WS_VISIBLE | WS_CHILD ,
          120, 50, 80, 25,
          cw13, (HMENU) 2, NULL, NULL);
      break;

    case WM_COMMAND:

      if (LOWORD(wParam) == 1) {
        Beep(40, 50);
      }

      if (LOWORD(wParam) == 2) {
        PostQuitMessage(0);
      }

      break;

    case WM_DESTROY:

      PostQuitMessage(0);
      break;
      default:
        return DefWindowProc(hWnd, msg, wParam, lParam);
  }
 return 0;
}

// Message handler for about box.
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{
    UNREFERENCED_PARAMETER(lParam);
    switch (message)
    {
    case WM_INITDIALOG:
        return (INT_PTR)TRUE;

    case WM_COMMAND:
        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)
        {
            EndDialog(hDlg, LOWORD(wParam));
            return (INT_PTR)TRUE;
        }
        break;
    }
    return (INT_PTR)FALSE;
} 
```

问题是：当我创建窗口'cw13'时，它被创建并显示，但按钮不是。我创建了两个单独的`WndProc`功能。其他消息正确执行（如`WM_QUIT`），只有`CreateWindowW`在`WM_CREATE`,witch 应该创建和显示按钮不是。哪里有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:07:40.630

处理`WM_CREATE`消息时，您的呼叫`CreateWindow(L"13class")`仍在运行。您的`cw13`变量尚未分配，因此您将无效分配`HWND`为按钮的父级。这就是他们没有出现的原因。改为使用`hwnd`参数`WndProc_dla13()`作为父级。这将与退出后`HWND`分配给`cw13`变量的相同。`CreateWindow(L"13class")`

# ruby-on-rails - Rails 3：form_for缺少结束标签

> ID：12945650
> 
> 赞同：0
> 
> 时间：2012-10-18T00:59:34.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

我在我的 rails 应用程序的一个视图中使用了 form_for，但由于某种原因，没有生成结束标记，这将在大多数浏览器中安全处理，除了 IE 8 及更低版本。

这是一些示例代码：

```
<%= form_for object, :remote => true, :url => remote_update_path, :html => {:name => "form_#{id_number}", :id => "form_#{id_number}"} do |f| %>
    <%= hidden_field_tag "field_a", object[:field_a] %>
    <ul class="class1">
        <li> <%= f.check_box :field_b, :class => "class2", :id => "b"  %> B</li>
        <li> <%= f.check_box :field_c, :class => "class2", :id => "c" %> C</li>
    </ul>
 <% end %> 
```

出于某种原因，这不会生成`</form>`所在位置的结束标签`<% end %>`。（我知道现在表单中有提交按钮，这不影响丢失`</form>`。）

这是一个错误吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:03:40.147

This is almost certainly happening as a result of invalid HTML somewhere on the page. Run it through the [validator](http://validator.w3.org/), until it's all passing, and I bet the problem goes away...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T17:41:17.623

我遇到过同样的问题。它发生在我身上是因为我没有在表单内正确关闭一个 div 标签。

# python - 如果 raw_input（包括）x，则打印 y

> ID：12945651
> 
> 赞同：-1
> 
> 时间：2012-10-18T01:00:08.387
> 
> 标签：python, include, raw-input

```
a = raw_input 'type x here and see what happens'
    if a (INCLUDES) 'x'
        print 'y' 
```

那是什么`INCLUDES`命令？有没有更好的方法来解决这个问题？

我是网络漫画 Homestuck 的粉丝，其中每个巨魔都有不同的打字方式，称为怪癖。我正在用 Python 将“怪癖文本”翻译成英语翻译器（[这里有](http://www.mspaintadventures.com/?s=6&p=003985)两个具有不同怪癖的字符 IM-ing）*我想让它们像普通人一样打字。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T01:09:45.077

您的代码不是有效的 pythonic。在 Python 中：

```
a = raw_input('type x here and see what happens')

if 'x' in a:
    print 'y' 
```

该函数`raw_input()`返回一个字符串；语法将`in`“x”与您的字符串匹配（这就是您的**INCLUDE**伪代码所代表的内容）。如果找到“x”，`print 'y'`则调用它，在您的控制台上打印一个“y”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:02:28.183

Try this:

```
a = raw_input()
if "pattern" in a:
    print "match" 
```

All the magic is the keyword `in`

# r - 外部文件中的 cat 和 "\b" 时髦字符

> ID：12945654
> 
> 赞同：1
> 
> 时间：2012-10-18T01:00:26.673
> 
> 标签：r, escaping, cat

我正在尝试使用 cat 对 R 中的本地 LATEX 输出进行 cat 处理，但遇到了我怀疑与编码有关的问题，我对此一无所知，甚至从哪里开始。

像这样使用猫：

```
cat(paste0("\b", paste0(1, 2, "r"))) 
```

完全符合我在控制台中的期望。但：

```
cat(paste0("\b", paste0(1, 2, "r")), file="foo.txt") 
```

给出“\b”所在的奇数方形字符（[如这里所示](https://dl.dropbox.com/u/61803503/foo.txt)）。我怀疑这对于 R/LATEX 用户创建本土内容来说是一个新问题，但显然我没有使用正确的关键词来寻找答案。

1.  怎么了？
2.  我如何解决它？

编辑：每达森的建议：

```
> readLines("foo.txt")
[1] "\b 1 2 r" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:05:14.247

没有错误。您的编辑器正在显示方形字符来代替 \b。尝试

```
readLines("foo.txt") 
```

查看 "\b12r" 是存储在文件中的内容。

# playorm - 是否可以有一个列表转换器？

> ID：12945656
> 
> 赞同：0
> 
> 时间：2012-10-18T01:01:30.257
> 
> 标签：playorm

我想在我的 nosql 映射实体中有以下字段：

私有列表 cookieIds；

我可以有一个列表转换器吗？在这种情况下，数据将如何保存在 Casssandra 中？

关于如何编写自定义转换器的任何提示都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:16:09.163

大声笑，我们正在实现处理该问题的@NoSqlEmbedded 标记，但它还没有完成，因为我正在尝试实现它，所以我也可以进行递归（想想@NoSqlEmbedded 的层次结构。）我们已经完成扫描但需要实施编组/解组。

**注意：我将尝试在本周末结束之前通过单元测试完成 @NoSqlEmbedded。**

列表中的每个项目都必须是唯一的（即它实际上是一个集合而不是一个列表）。那么假设你有这个

```
public Request {
   @NoSqlId
   private String id;
   @NoSqlEmbedded
   private List<String> cookieIds;
   private String property1;
} 
```

它将像这样存储

rowkey(id) -> property1="something", cookieIds:cookieValue1=null, cookieIds:cookieValue2=null, cookieIds:cookieValue3=null

所以，现在我们应该告诉你我们不这样存储它的原因......

rowkey(id) -> property1="something", cookieIds=cookieValue1, cookieValue2, cookieValue3

事实证明，如果您有两台机器在此处读取请求，一台机器添加 cookieValue4，另一台机器删除 cookieValueValue2，在我们的实现中，您正确地以 cookieValue1、cookieValue3、cookieValue4 结束，如果我们像第二个版本一样存储它，一个服务器将获胜，因此您最终会得到这两个结果之一（理想情况下，您希望一个删除和一个添加独立工作）

*   cookieValue1、cookieValue2、cookieValue3、cookieValue4
*   cookie 值 1， cookie 值 3

我希望这是有道理的。现在，没有@NoSqlEmbedded 标签，您可以使用第二种方法并拥有一个转换器，就像我在您的日期帖子中回复的那样。如果您编写日期转换器，我想您会明白如何做到这一点。首先尝试使用日期转换器作为练习。

让我知道如果你在那之后还有问题。

院长

# jquery - 使用 AJAX 在 textarea 中保留标签？

> ID：12945657
> 
> 赞同：0
> 
> 时间：2012-10-18T01:01:53.860
> 
> 标签：jquery, html, tabs

> **可能重复：**
> [如何处理 textarea 中的 <tab>？](https://stackoverflow.com/questions/6140632/how-to-handle-tab-in-textarea)

我需要一种方法来维护文本区域中的选项卡级别，到目前为止，这就是我所使用的：

```
<script type="text/javascript">
   $("textarea").keydown(function(e) {
      var $this, end, start;
      if (e.keyCode === 9) {
         start = this.selectionStart;
         end = this.selectionEnd;
         $this = $(this);
         $this.val(
            $this.val().substring(0, start)
            + "\t" + $this.val().substring(end)
         );
         this.selectionStart = this.selectionEnd = start + 1;
         return false;
      }
   });
</script> 
```

但这只会插入标签（我在另一个 SO 帖子上发现了这个，所以我真的不知道它的作用，因为我不是 JS 专家）

当我按回车键时，这些选项卡有没有办法在那里？我需要这个，因为我正在为我的管理面板制作一个非常简单的代码编辑器（不需要语法高亮或任何东西）并且它使用 TextAreas。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:33:46.227

我绝对不认为这是一件艺术品，我在几分钟内就把它拼凑在一起了。它需要一些改进，但应该让你朝着正确的方向前进。

全局变量

```
var keyPressed = null;
var timesPressed = 0;
var tabString = '';
var lastKeyPressed = null; 
```

*编辑*——添加了一个重要的步骤来查看用户是否想要打破标签集。

Dom 就绪函数

```
$(function(){
    $("textarea").keydown(function(e) {
        var $this, end, start;
        if (e.keyCode === 9 || e.which === 9) {
            start = this.selectionStart;
            end = this.selectionEnd;
            $this = $(this);
            $this.val(
               $this.val().substring(0, start)
               + "\t" + $this.val().substring(end)
            );
            this.selectionStart = this.selectionEnd = start + 1;
            keyPressed = e.keyCode || e.which;
            timesPressed = timesPressed +1;
            return false;
        }else if((e.keyCode === 13 || e.which === 13) && keyPressed === 9){
            start = this.selectionStart;
            end = this.selectionEnd;
            $this = $(this);
            tabString += '\t';
            $this.val(
            $this.val().substring(0, start)
                + "\r"+tabString + $this.val().substring(end)
            );
            this.selectionStart = this.selectionEnd = start + timesPressed +1;
            lastKeyPressed = e.keyCode;
            return false;          
        }else if((e.keyCode === 8 || e.which === 8) && lastKeyPressed === 9){
            keyPressed = null;   
            timesPressed = 0; 
            tabString = '';     
        }
    }); 
});​ 
```

[这是一个工作的jsFiddle](http://jsfiddle.net/bmrDL/)

我真的没有很好的机会测试它太多。让我知道它是否太片状，我会回去重新制作它。

# javascript - jquery在多个DIV上的幻灯片效果与嵌入式关闭效果

> ID：12945658
> 
> 赞同：1
> 
> 时间：2012-10-18T01:01:59.600
> 
> 标签：javascript, jquery

我在这里有很多问题，所以请耐心等待我，非常新的 jquery/javascript 用户。

这是我当前的页面[http://integratedcx.com/index.php/experience](http://integratedcx.com/index.php/experience)

基本上，我希望每个项目和项目类别都有隐藏的 div，像抽屉一样向下滑动，而不仅仅是像现在这样出现。

我试图通过 jquery 来实现这一点，但没有取得多大成功，这是我的工作[http://integratedcx.com/temp/slide.html](http://integratedcx.com/temp/slide.html)

1.  如何让一个开口下方的 div 向下“缓和”而不是跳跃
2.  如何让我最近的项目中的关闭功能（橙色框）正常工作
3.  如何使图像右侧的项目列表隐藏（就像在当前页面上一样）以及具有抽屉打开效果。
4.  是否有一种简单的方法来使用 jquery 将变量分配给多个 div。

提前感谢您的任何/所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:14:07.530

对于您的问题4，使用以下脚本（基于[ComputerArts](https://stackoverflow.com/a/12945868/43452)上面的回答），您可以轻松地将幻灯片效果添加到大量div中：

```
$(document).ready(function () {
    $(".toggle-to-show").click(function (evt) {

      var targetdiv = $(evt.currentTarget).attr("data-drawer");

      $(targetdiv).slideToggle(1000, function() {
            if ($(this).is(':visible')) {
                $('.bracket', evt.currentTarget).html('less');
                $('.project', evt.currentTarget).hide();
                $('.closebox', this).bind('click', function(e) {$(evt.currentTarget).triggerHandler('click');});
            }
            else {
                 $('.bracket', evt.currentTarget).html('more');
                 $('.project', evt.currentTarget).show();
                 $('.closebox', this).unbind('click');
            }
      });
   })

}) 
```

然后，您可以如下标记切换按钮和滑块：

```
<div class="toggle-to-show" data-drawer="#firstsection">
     <div class="project">Project One Heading</div>
     <div class="bracket">more</div>
</div>

<div id="firstsection">
     <h3>Project One Heading</h3>
     stuff
     <img class="closebox" src="close.jpg">
</div>

<div class="toggle-to-show" data-drawer="#secondsection">
     <div class="project">Project Two Heading</div>
     <div class="bracket">more</div>
</div>

<div id="secondsection">
     <h3>Project Two Heading</h3>
     stuff
     <img class="closebox" src="close.jpg">
</div>

<div class="toggle-to-show" data-drawer="#thirdsection">
     <div class="project">Project Third Heading</div>
     <div class="bracket">more</div>
</div>

<div id="thirdsection">
     <h3>Project Three Heading</h3>
     stuff
     <img class="closebox" src="close.jpg">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:35:02.040

至于第 1 点和第 2 点，[试试这个小提琴](http://jsfiddle.net/kMjxL/)， 我只将第一个脚本标签更改为

```
<script type='text/javascript'>

$(document).ready(function () {
    $(".projectx-show").click(function () {
        $("#projectx").slideToggle(1000, function() {
            if ($(this).is(':visible')) {
              $('#projectx-bracket').html('less');
            }
            else {
              $('#projectx-bracket').html('more');
            }
        });
    })

})

</script> 
```

仅供参考，您不需要使用`$(window).load`然后`$(document).ready`...一个就足够了

至于#3，我不明白你想说什么。

#4，是的，有一种方法，使用类并为页面中的每个块保持相同的结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T01:29:32.507

1.  [http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

    ```
    $("#link_id").click(function(){
      $("#div_to_show").slideDown();
    }); 
    ```

2.  [http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

    ```
    $('#div_to_close').slideUp(); 
    ```

3.  使用 1 和 2 中的两种方法

4.  通过使用类名而不是选择器的 ID。例如：

    ```
    $(".link_class").click(function(){
      $(this).parentsUntil('.ex-wrapper').find('.div_to_show').slideDown();
    }); 
    ```

# firefox - FireFox 或 Chrome 是否将原始 HTML 文件存储在缓存中？

> ID：12945662
> 
> 赞同：2
> 
> 时间：2012-10-18T01:02:28.743
> 
> 标签：firefox, google-chrome, browser, browser-cache, cache-control

我目前正在查看 FF 和 Chrome 缓存文件，但找不到我要查找的内容。我正在寻找原始 html 文件，就像你会看到你是否会单击`'View Source Code'`. 如果它不自动存储它，你知道我可以配置 FF 或 Chrome 以将 html 文件保存在缓存中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:38:47.513

`about:cache`将让您在 Firefox 或 Chrome 中浏览缓存。

`gunzip`在您最喜欢的十六进制编辑器中保存的十六进制转储上运行愉快。

您可以在您喜欢的电子表格程序中使用固定宽度拆分相对轻松地去除原始十六进制周围的信息。使用十六进制编辑器，将原始十六进制粘贴到新文档中，保存，然后保存`gunzip`。如果文档没有以 gzip 开头（`Content-Encoding: gzip`标题中没有），那么 HTML 应该已经在最右边的列中。

# c# - 关于清单的澄清 和 WCF

> ID：12945665
> 
> 赞同：1
> 
> 时间：2012-10-18T01:02:56.270
> 
> 标签：c#, wcf, generics

我对 WCF 还很陌生，想澄清一下。我试图`List<T>`从我的 WCF 中返回 a，但是当我尝试使用它时出现错误。无法转换`T[]`为`List<T>`. 示例如下。

**问题：**这是因为 WCF 可以被多种技术使用并转换为数组吗？

界面：

```
[ServiceContract]
public interface I_UI_Service
{
    [OperationContract]
    List<Site> Get_Sites(string ntid);
}

[DataContract]
[Serializable]
public class Site
{
    public Site(int id, string description)
    {
        this.ID = id;
        this.Description = description;
    }

    [DataMember]
    public int ID { get; set; }

    [DataMember]
    public string Description { get; set; }
} 
```

代码：

```
 public List<Site> Get_Sites(string ntid)
    {
        List<Site> returnList = new List<Site>();
        using (SqlCommand cmd = new SqlCommand())
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "SPROC_Name";
            cmd.Parameters.AddWithValue("@NTID", ntid);
            using (SqlConnection conn = new SqlConnection(DB_ConnectionString()))
            {
                cmd.Connection = conn;
                conn.Open();
                SqlDataReader reader = cmd.ExecuteReader();

                while (reader.Read())
                {
                    returnList.Add(new Site(Convert.ToInt16(reader["SiteID"]), reader["SiteDescription"].ToString()));
                }
                conn.Close();
            }
        }
        return returnList;
    } 
```

使用列表的消耗：（错误）

```
 List<Site> _Sites;

    public List<Site> Sites
    {
        get
        {
            if (_Sites == null)
            {
                UI_Data.I_UI_ServiceClient sc = new UI_Data.I_UI_ServiceClient();
                _Sites = sc.Get_Sites("MyInfo");
            }
            return _Sites;
        }
    } 
```

使用 T[ ] 消耗：（使其工作以及为什么我的问题）

```
 Site[] _Sites;

    public Site[] Sites
    {
        get
        {
            if (_Sites == null)
            {
                UI_Data.I_UI_ServiceClient sc = new UI_Data.I_UI_ServiceClient();
                _Sites = sc.Get_Sites("MyInfo");
            }
            return _Sites;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T01:07:42.287

WCF 将通用列表序列化为数组，但您可以在添加服务引用时通过单击高级按钮将它们转换回通用列表（您会看到下拉列表默认填充有数组，但您可以将它们更改为列表） .

当您使用此选项时，通过网络发送的数组将被转换为通用列表供您使用。它不会改变信息的发送方式。

# css - 组合 CSS 选择器来显示/隐藏兄弟姐妹

> ID：12945666
> 
> 赞同：0
> 
> 时间：2012-10-18T01:03:04.020
> 
> 标签：css, css-selectors, sass

我正在使用 jqUI 构建一个带有内容窗格和侧菜单的应用程序。

当页面显示列表时，我想隐藏一些菜单内容，但是当页面显示一个项目时，我想显示菜单内容。

我创建了一个非常基本的 jsfiddle 作为示例[http://jsfiddle.net/pq83M/8/](http://jsfiddle.net/pq83M/8/)

我不想在 javascript 中执行此操作，因为页面转换位于 jqui 库中，并且我认为单独监听此特定转换不是有效的。

我希望弄清楚的是一种说法

什么时候

```
div#content > div#list_item.active ~ div#menu > div#list_item_details {
  display:block;
} 
```

需要注意的`~`是 正在寻找 的兄弟姐妹`div#content`，而不是 的兄弟姐妹`div#list_item.active`。

我正在使用 Sass，因此可以使用这些自定义选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:39:17.507

如果我正确理解您的问题，您希望根据父母 ( `div#content`) 查找兄弟姐妹，但仅从特定父母开始，具体取决于他们的孩子 ( `div#list_item.active`)。

如果是这样，这在 CSS 选择器级别 3 中是不可能的，但它会出现在 CSS 选择器级别 4 中；您将能够选择您的操作/比较的主题。[http://dev.w3.org/csswg/selectors4/#subject](http://dev.w3.org/csswg/selectors4/#subject)

# python - 在读取输入文件时更新 C 数组

> ID：12945667
> 
> 赞同：5
> 
> 时间：2012-10-18T01:03:03.320
> 
> 标签：python, cython, arrays

我现在使用 cython 读取输入文件，将字符串转换为 int 并将它们存储在 ac 数组（而不是列表）中以节省空间。我的代码如下所示：

```
cdef long p[10000000]
cdef long i
i = 0
f = open(filename, 'r')
for line in f:
    temp = map(int, line.split())
    p[i] = temp[0]
    i = i + 1
f.close() 
```

但是，当我引用数组 p 时，程序总是中止。不知何故，数组没有“定义”，因为内存使用率非常低。但是，如果我这样做，它可以工作

```
cdef i
for i in range(0, 1000):
    p[i] = i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:32:49.637

我的猜测：

*   您发布的代码实际上是包装在一个函数中，在这种情况下`p`分配在堆栈上，一旦给定函数返回，访问`p`是非法的。
*   你不检查`i`溢出，如果发生什么`i > 1000000`？
*   尝试在堆栈上分配 1M 8 字节整数可能超出允许范围，请检查`ulimit -a`

总体而言，OP 中没有足够的信息，例如：

*   该代码是模块的顶级代码还是函数的内容？
*   程序如何中止（SEGV？）
*   指的`p`是什么语境？
*   你用什么操作系统/架构？

我无法用 Python 2.7.3 Cython 0.17.2 gcc 4.7.2 linux 3.6.9 x86-64 重现您的问题

# meteor - Meteor 的源代码对客户开放？

> ID：12945669
> 
> 赞同：12
> 
> 时间：2012-10-18T01:03:12.003
> 
> 标签：meteor

从总体上看，似乎 Meteor 应用程序的源代码由于“编写一个 Javascript 文件，同时在客户端和服务器上运行”主题而对客户端开放。

如果特定应用程序的服务器端源代码向客户端开放，随机人复制它们并创建非常相似的应用程序不是很容易吗？

因为它的服务器端代码是对公众开放的，所以有邪恶目的的人在应用程序中发现安全漏洞不是很容易吗？

例如，在 Meteor 0.5.0 的party app 的[新示例](http://www.meteor.com/examples/parties)中，model.js 文件似乎也被发送到客户端。

我在这里误解了什么吗？

**编辑**

这是我不明白的部分。

根据[http://docs.meteor.com/#structuringyourapp](http://docs.meteor.com/#structuringyourapp)，

> 客户端和服务器子目录之外的文件同时加载到客户端和服务器上！这是模型定义和其他功能的地方

我真的不明白。如果每个模型实现（包括数据库交互）都发送给客户端，应用程序会不会更不安全并且容易被其他开发人员复制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T02:31:47.713

文件夹中的任何代码`server/`都不会发送到客户端（请参阅[http://docs.meteor.com/#structuringyourapp](http://docs.meteor.com/#structuringyourapp)）

编辑

关于第二部分：

任何不在`client/`或`server/`您想要在客户端和服务器端运行的代码。所以很明显它必须发送给客户端。

您将模型代码放在那里的原因是延迟补偿。如果您想对数据进行更新，最好立即在客户端进行更新，然后运行*相同的*代码服务器端以真正“提交”它。有很多例子表明这是有道理的。

如果有你不想在客户端运行的“秘密”模型代码，你当然可以有第二个`server/models.js`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:21:48.920

保护客户端-服务器应用程序的最佳方法是在服务器上编写显式安全检查，而不是对客户端隐藏数据库更新逻辑。

有关安全模型的详细说明，请参阅[https://stackoverflow.com/a/13334986/791538](https://stackoverflow.com/a/13334986/791538)。

# excel - INDEX(INDIRECT("DefinedName"),1)=#REF 而 INDEX(DefinedName,1) 工作

> ID：12945672
> 
> 赞同：4
> 
> 时间：2012-10-18T01:03:38.527
> 
> 标签：excel, excel-formula

在 Excel 工作簿中，我从另一个选项卡引用定义的名称（以获取相关数据验证）。直接访问定义的名称是有效的，但通过它访问`INDIRECT`却不行。

`=INDEX(DefinedName,1)`返回范围的第一个值

`=INDEX(INDIRECT("DefinedName"),1)`返回#REF！

我也试过

`=INDEX(INDIRECT("SheetName!DefinedName"),1)`，但它也返回#REF！

示例文件可以在[这里](https://docs.google.com/open?id=0B04VM-tmdCnIekJZTEthRXVyVzA)下载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:11:33.853

托马斯，

我以前没有遇到过这个。

它 appeas`INDIRECT`和动态范围名称是不兼容的。[迪克斯博客](http://www.dailydoseofexcel.com/archives/2005/03/01/indirect-and-dynamic-ranges/)有一个有用的参考资料

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:06:56.437

不是一个完整的答案，但它可能与您的命名范围返回一个数组而不是单元格引用（在这种情况下`{"VALL";"GENADMIN";"HOSP";"CELLAR"}`）这一事实有关。

您可以通过删除命名范围并将其替换为其实际公式来复制错误，然后`F9`'ing 公式：

```
=INDIRECT(OFFSET(Defaults!$C$1,1,0,COUNTA(Defaults!$C:$C)-1))
=INDIRECT({"VALL";"GENADMIN";"HOSP";"CELLAR"}) 
```

由于 Excel 期望对工作表范围进行某种引用，因此它在这里失败，因为它无法将数组解析为任何特定的东西（再次按 F9 产生`={#REF!;#REF!;#REF!;#REF!}`）。

该`INDEX`公式有效，因为它可以处理数组引用：

```
=INDEX(OFFSET(Defaults!$C$1,1,0,COUNTA(Defaults!$C:$C)-1),1)
=INDEX({"VALL";"GENADMIN";"HOSP";"CELLAR"},1)
={"VALL"} 
```

不是专家，但这是我最擅长的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T18:37:09.817

这绝对会奏效。也许它们在 2012 年不兼容，但它们肯定在 2018 年有效。我想如果使用得当，它在 2012 年也会有效。
INDIRECT 函数尝试将 TEXT 转换为范围引用。该 TEXT 必须是有效的参考。
命名范围已经是范围引用。无需从引用中获取引用。这就是为什么 OP 示例在不使用 INDIRECT 的情况下工作的原因。如果您有来自 OP 的值“DefinedName”或单元格中的任何命名范围，则更有可能实现。然后将 INDIRECT 指向找到纯 ol' 文本的那个单元格。然后它将该文本转换为范围引用。

您甚至可以使用 INDIRECT 中的公式来修改引用。一种常见的方法可能是在单元格中使用工作表名称，然后使用 INDIRECT 从各种工作表中提取数据。当您想要复制和粘贴公式并使工作表（或单元格）引用动态调整到新目标时，这主要有用。

**设置**

从一个应该包含三个空白工作表（Sheet1、Sheet2 和 Sheet3）的空白工作簿开始。如果没有，请执行此操作。然后输入以下基本信息： 表 1

单元格 A1，输入“范围参考”

单元格 A2，输入“SUM from Sheet”

单元格 B1 输入“Sheet2!A1:A4”（注意没有“=”此文本是范围引用。）

单元格 C1，输入“THIRD_SHEET”（此文本相当于我们稍后将创建的命名范围。）

然后在Sheet2中，

单元格 A1，输入 1

单元格 A2，输入 2

单元格 A3，输入 3

单元格 A4，输入 4

在 Sheet3 中

单元格 A1-A4 分别输入 100 到 400。

然后创建一个名为“THIRD_SHEET”的命名范围，它引用 Sheet3 上的单元格 A1-A4。

**尝试** 在 Sheet1：单元格 B2 中，输入公式：“=SUM(INDIRECT(B1))”

将该公式复制到单元格 C2。

**结果：**

INDIRECT 使用列标题中的文本来指向有效的范围引用。这只是说明。您不太可能混合使用命名范围和文本范围，并且写出“Sheet1！A1：A4”不是很干净，但您可以使用任何标准公式来获得文本参考。

**尝试**
更改 B2 中的公式："=SUM(INDIRECT("Sheet"&COLUMN()))&"!A1:A4"))"

现在将其复制到单元格 C2。

**结果**

嗯，都是一样的。单元格 A1:A4 的 SUM 分别从表 2 和表 3 返回。但是，这一次没有使用列标题，并且范围引用正在使用字符串连接“&”运算符和 COLUMN 编号在 INDIRECT 调用本身中组装。

命名范围可以以相同的方式使用。重要的是要理解 INDIRECT 括号内的任何内容都需要首先解析为有效的 TEXT 范围引用。

我希望这会有所帮助！

# java - openjpa，更新，错误“PK 具有非默认值”

> ID：12945675
> 
> 赞同：3
> 
> 时间：2012-10-18T01:04:24.920
> 
> 标签：java, jpa, db2, websphere, openjpa

我想知道是否有人遇到过这个错误并可以解释发生了什么：

```
<openjpa-2.1.1-SNAPSHOT-r422266:1087028 nonfatal user error>
org.apache.openjpa.persistence.InvalidStateException: 
Primary key field com.qbe.config.bean.QBEPropertyHistory.id of com.qbe.config.bean.QBEPropertyHistory@1c710ab has non-default value. 
The instance life cycle is in PNewProvisionalState state and hence an 
existing non-default value for the identity field is not permitted. 
You either need to remove the @GeneratedValue annotation or modify the 
code to remove the initializer processing. 
```

我有两个对象，Property 和 PropertyHistory。属性具有 PropertyHistory 的 OneToMany 列表：

```
@OneToMany(fetch = FetchType.LAZY, cascade=CascadeType.MERGE, orphanRemoval=false)
@JoinColumn(name="PROPERTY_NAME")
@OrderBy("updatedTime DESC")
private List<QBEPropertyHistory> history = new ArrayList<QBEPropertyHistory>(); 
```

并且 Property 对象像这样加载和保存：

```
public T find(Object id) {
    T t = null;
    synchronized(this) {
        EntityManager em = getEm();
        t = em.find(type, id);
        //em.close(); //If this is uncommented, fetch=LAZY doesn't work. And fetch=EAGER is too slow.
    }
    return t;
}

public T update(T t) {
    synchronized(this) {
        EntityManager em = getEm();
        em.getTransaction().begin();
        t = em.merge(t);
        em.getTransaction().commit();
        em.close();
        return t;
    }
} 
```

在服务层中，我使用 find(id) 方法加载一个属性，实例化一个新的 PropertyHistory，将其添加到属性 prop.getHistory().add(propHist) 然后调用 update(prop) 并得到上述错误。

如果我在 find() 中关闭 EntityManager，错误就会消失，但这会破坏延迟加载，并且 prop.getHistory() 总是返回 null。如果我设置 fetch=EAGER，它会变得非常慢，因为有 1000 条记录中的 10 条，并且我需要一次选择数千个属性对象，并且 99.99% 的时间不需要历史记录。

正如错误文本所暗示的那样，我无法删除@GeneratedValue，因为它是生成的（DB2，自动增量）。现在我想知道我将如何“修改代码以删除初始化程序处理”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:29:02.120

问题是您试图跨持久性上下文（`EntityManager`）共享一个实体。您可以更改方法以获取`EntityManager`实例并使用相同的 EM 进行查找和更新操作。

# php - Magento CSRF 保护

> ID：12945681
> 
> 赞同：8
> 
> 时间：2012-10-18T01:05:34.150
> 
> 标签：php, security, magento, csrf, owasp

我正在查看 Magento 中的自定义表单。我看过这些教程

[http://fastdivision.com/2012/03/29/diy-magento-create-ajax-login-registration-forms-for-your-magento-theme/](http://fastdivision.com/2012/03/29/diy-magento-create-ajax-login-registration-forms-for-your-magento-theme/)

[http://inhoo.net/ecommerce/magento/magento-email/magento-custom-email-contact-form-with-notification-system/](http://inchoo.net/ecommerce/magento/magento-email/magento-custom-email-contact-form-with-notification-system/)

我没有看到任何关于 CSRF 预防的提及，例如使用存储在用户会话中的客户端令牌检查客户端令牌。我还查看了 Magento 联系我们的表格，看到了这个，但我认为它与 CSRF 无关：

```
<input type="text" name="hideit" id="hideit" value="" style="display:none !important;"> 
```

Magento 是否有任何防止 CSRF 的默认代码？Mage_Core_Controller_Front_Action 的 $this->getRequest()->getParams() 方法是否会自动执行任何操作来防止我可能丢失的 CSRF？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-22T16:45:08.950

Magento 中实际上有一个前端[CSRF 令牌验证](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#General_Recommendation:_Synchronizer_Token_Pattern)方法，您可以使用它来向您的自定义表单添加一个唯一的基于会话的表单密钥，并在控制器的操作中对其进行验证。

要在提交表单时发送带有请求的 CSRF 表单密钥，请将`<?php echo $this->getBlockHtml('formkey') ?>`代码插入到表单的正文中。

这将生成这样的输入：`<input type="hidden" value="unique16codehere" name="form_key">`. 要验证密钥，请使用`_validateFormKey()`相应控制器操作中的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T02:18:10.553

最终程序员用户可以使用他们自己的 CSFR/nonce 保护方案，**除非**他们在后端管理控制台中创建页面/表单。**默认情况下，Magento 管理控制台应用程序对其所有**页面/url 都有这种保护。

签`_validateSecretKey`入`app/code/core/Mage/Adminhtml/Controller/Action.php`和中的`getSecretKey`方法`app/code/core/Mage/Adminhtml/Model/Url.php`。这可以很容易地扩展到您自己的前端表单。

# c++ - 找不到发生无限循环的位置

> ID：12945684
> 
> 赞同：0
> 
> 时间：2012-10-18T01:05:50.777
> 
> 标签：c++, arrays, for-loop, infinite-loop

我正在制作一个程序，用户输入 30 天的收盘价，程序会找到最低和最高价格。

用户输入数据后，程序将无法继续。

```
double highest = stockPrices[0];
double lowest = stockPrices[0];

for(int j = 0; j < sizeof(stockPrices) + 1; j++) {
     if(stockPrices[j] > highest) {
      highest = stockPrices[j];
     }   
     if(stockPrices[j] < lowest) {
      lowest = stockPrices[j];
     } 
} 
```

但是，我似乎无法找到无限循环的位置。

* * *

```
for(int i = 0; i < sizeof(stockPrices) + 1; i++) {
    cin >> stockPrices[i];
} 
```

这部分工作正常，这就是为什么我没有意识到我的上限不正确编辑：我认为这部分工作正常

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T01:09:41.927

没有足够的代码来找出问题出在哪里。但就在那个片段中，你可能有错误的上限：

```
for (int j = 0; j < sizeof(stockPrices) / sizeof(stockPrices[0]); j++) 
```

`sizeof`以字节为单位给出对象的大小. 对于一个数组，它是项目数 × 一个项目的大小。因此，要获得您需要除以`sizeof`一个项目的大小的项目数。

你可能也不想要`+1`。

请注意，无论是否进行此更正，您编写的循环都会终止。它会在您的版本中运行超过数组的末尾并访问非法内存，这可能会使程序崩溃，但它不会永远循环。

* * *

同样的事情也适用于你的第二个循环。它应该是：

```
for (int i = 0; i < sizeof(stockPrices) / sizeof(stockPrices[0]); i++)
{
    cin >> stockPrices[i];
} 
```

这里不正确的上限可能*是*罪魁祸首。您的原始循环将尝试读取 30 多个值。如果只提供 30 个，则程序将在 31 日挂起，`cin >> stockPrices[i]`等待输入更多数字。

# java - 使用 AsyncHttpClient 作为 POST 参数的原始图像数据

> ID：12945686
> 
> 赞同：0
> 
> 时间：2012-10-18T01:05:52.520
> 
> 标签：java, android, https

我有一个简单的 PHP 服务，我试图从 Android 应用程序中访问，我想通过 POST 参数传递原始图像。我有一个 PHP/curl 脚本工作，它执行以下操作：

```
$url = "http://myphp.php"
$imagefilepath = 'path_to_png_file.png';
$imagedata = file_get_contents($imagefilepath);
$data = array('imagedata' => $imagedata);
// a few other fields are set into $data, but not important

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5');
curl_exec($ch); 
```

我想在我的 Android 应用程序中使用 AsyncHttpClient (http://loopj.com/android-async-http/) 在 Java 中模仿这一点。

听起来很简单，我可以在 Java 中调用，但问题是我发送的数据在另一端没有被识别为图像。但是，使用上面的 PHP/Curl 脚本，它在所有方面都可以正常工作。

这是我的 Java 代码，其中有一些我尝试过的注释掉的东西：

```
String photoFilePath = "path_to_my_photo_on_disk.jpg";

Bitmap bm = BitmapFactory.decodeFile(photoFilePath);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bm.compress(Bitmap.CompressFormat.JPEG, 50, baos);
byte[] byteArrayPhoto = baos.toByteArray();

AsyncHttpClient client = new AsyncHttpClient(context);
RequestParams params = new RequestParams();
try {
      // THINGS I HAVE TRIED (AND FAILED):
      //params.put("imagedata", new File(photoFilePath));
      //params.put("imagedata", new ByteArrayInputStream(byteArrayPhoto), "photo.jpg");                        
      //params.put("imagedata", new String(byteArrayPhoto));
      //params.put("imagedata", new String(byteArrayPhoto, "UTF-8"));
      //params.put("imagedata", fileToString(photoFilePath));
      //params.put("imagedata", new FileInputStream(new File(photoFilePath)), "photo.jpg", "image/jpeg");
} catch (Exception e) {
      e.printStackTrace();
}

client.post(context, myURL, params, new AsyncHttpResponseHandler() {
...override methods, onSuccess() is called...
}

// for reference, for the above-called method:
private String fileToString(String filename) throws IOException
    {
        BufferedReader reader = new BufferedReader(new FileReader(filename));
        StringBuilder builder = new StringBuilder();
        String line;

        // For every line in the file, append it to the string builder
        while((line = reader.readLine()) != null)
        {
            builder.append(line);
        }

        return builder.toString();
    } 
```

*   请注意，在上面的一些已注释掉的行/尝试中，POST 参数甚至没有将其传递到另一侧。

我还尝试了一些其他方法将文件放入字节数组，以及对文件进行编码（base64），但没有成功。无论出于何种原因，调用成功并传输了数据，但是每次我们尝试在服务器端打开图像时，它都已损坏和/或无法以 JPG 格式打开。我尝试过大大小小的图像文件。

我确实进行了研究并尝试了许多我发现的解决方案，但似乎没有任何效果。我确定我在这里遗漏了一些明显的东西，但是任何人都可以引导我朝着正确的方向前进吗？

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:03:32.847

答案很简单。事实证明，我确实需要对图像进行 base64 编码，因为它在发送到服务时只是以某种方式损坏。我通过以下代码做到了这一点：

```
String encodedPhotoStr = Base64.encodeToString(byteArrayPhoto, Base64.DEFAULT);
params.put("imagedata", encodedPhotoStr); 
```

但是在 PHP 端添加一行来解码这些数据是至关重要的，如下所示：

```
$raw_data_str = base64_decode($data_str_from_java) 
```

这解决了问题，图像在发送后现在可以查看。因此，无论出于何种原因，将原始二进制/图像数据从 java 发送到 PHP 是行不通的（尽管 curl 脚本工作正常），我绝对必须以这种方式对其进行编码和解码才能使其从 Java 代码中工作。

# r - 将 Excel 工作簿中的所有工作表读入带有 data.frames 的 R 列表

> ID：12945687
> 
> 赞同：93
> 
> 时间：2012-10-18T01:06:00.600
> 
> 标签：r, excel, xlconnect

我知道`XLConnect`可以用来将 Excel 工作表读入 R。例如，这将读取名为 R 的工作簿中的第一个工作表`test.xls`。

```
library(XLConnect)
readWorksheetFromFile('test.xls', sheet = 1) 
```

我有一个包含多个工作表的 Excel 工作簿。

如何将工作簿中的所有工作表导入 R 中的列表，其中列表的每个元素都是给定工作表的 data.frame，并且每个元素的名称对应于 Excel 中工作表的名称？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-18T01:29:14.607

### 使用 readxl 更新答案（2015 年 6 月 22 日）

自发布此问题以来，该`readxl`软件包已发布。它同时支持`xls`和`xlsx`格式。重要的是，与其他 excel 导入包相比，它可以在 Windows、Mac 和 Linux 上运行，无需安装额外的软件。

因此，在 Excel 工作簿中导入所有工作表的函数将是：

```
library(readxl)    
read_excel_allsheets <- function(filename, tibble = FALSE) {
    # I prefer straight data.frames
    # but if you like tidyverse tibbles (the default with read_excel)
    # then just pass tibble = TRUE
    sheets <- readxl::excel_sheets(filename)
    x <- lapply(sheets, function(X) readxl::read_excel(filename, sheet = X))
    if(!tibble) x <- lapply(x, as.data.frame)
    names(x) <- sheets
    x
} 
```

这可以通过以下方式调用：

```
mysheets <- read_excel_allsheets("foo.xls") 
```

### 旧答案

基于@mnel 提供的答案，这里有一个简单的函数，它以 Excel 文件作为参数，并将每个工作表作为命名列表中的 data.frame 返回。

```
library(XLConnect)

importWorksheets <- function(filename) {
    # filename: name of Excel file
    workbook <- loadWorkbook(filename)
    sheet_names <- getSheets(workbook)
    names(sheet_names) <- sheet_names
    sheet_list <- lapply(sheet_names, function(.sheet){
        readWorksheet(object=workbook, .sheet)})
} 
```

因此，它可以被调用：

```
importWorksheets('test.xls') 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-10-18T06:31:01.417

请注意，大部分 XLConnect 的功能已经矢量化。这意味着您可以通过一个函数调用读取所有工作表，而无需进行显式矢量化：

```
require(XLConnect)
wb <- loadWorkbook(system.file("demoFiles/mtcars.xlsx", package = "XLConnect"))
lst = readWorksheet(wb, sheet = getSheets(wb)) 
```

使用 XLConnect 0.2-0 *lst*已经是一个命名列表。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2018-03-23T14:25:46.033

我偶然发现了这个老问题，我认为仍然缺少最简单的方法。

您`rio`只需一行代码即可导入所有 Excel 工作表。

```
library(rio)
data_list <- import_list("test.xls") 
```

如果您是 . 的粉丝，您可以通过将参数添加到函数调用`tidyverse`中轻松地将它们作为 tibbles 导入。`setclass`

```
data_list <- import_list("test.xls", setclass = "tbl") 
```

假设它们具有相同的格式，您可以通过将`rbind`参数设置为来轻松地对它们进行行绑定`TRUE`。

```
data_list <- import_list("test.xls", setclass = "tbl", rbind = TRUE) 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2018-03-23T19:58:14.420

来自官方`readxl`（tidyverse）文档（更改第一行）：

```
path <- "data/datasets.xlsx"

path %>% 
  excel_sheets() %>% 
  set_names() %>% 
  map(read_excel, path = path) 
```

详情见： [http ://readxl.tidyverse.org/articles/articles/readxl-workflows.html#iterate-over-multiple-worksheets-in-a-workbook](http://readxl.tidyverse.org/articles/articles/readxl-workflows.html#iterate-over-multiple-worksheets-in-a-workbook)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-01-18T09:50:33.437

由于这是该问题的第一个命中：阅读多表 excel 以列出：

这是`openxlsx`解决方案：

```
filename <-"myFilePath"

sheets <- openxlsx::getSheetNames(filename)
SheetList <- lapply(sheets,openxlsx::read.xlsx,xlsxFile=filename)
names(SheetList) <- sheets 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-10-18T01:14:28.310

您可以加载工作簿，然后使用`lapply`,`getSheets`并`readWorksheet`执行类似的操作。

```
wb.mtcars <- loadWorkbook(system.file("demoFiles/mtcars.xlsx", 
                          package = "XLConnect"))
sheet_names <- getSheets(wb.mtcars)
names(sheet_names) <- sheet_names

sheet_list <- lapply(sheet_names, function(.sheet){
    readWorksheet(object=wb.mtcars, .sheet)}) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-07-30T15:28:08.810

添加到保罗的答案。这些工作表也可以使用以下方式连接：

```
data = path %>% 
excel_sheets() %>% 
set_names() %>% 
map_df(~ read_excel(path = path, sheet = .x), .id = "Sheet") 
```

需要的库：

```
if(!require(pacman))install.packages("pacman")
pacman::p_load("tidyverse","readxl","purrr") 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-05-25T19:57:27.693

要从工作簿中读取多个工作表，请使用 readxl 包，如下所示：

```
library(readxl)
library(dplyr)

final_dataFrame <- bind_rows(path_to_workbook %>%
                              excel_sheets() %>%
                              set_names() %>%
                              map(read_excel, path = path_to_workbook)) 
```

在这里，bind_rows ( `dplyr`) 会将所有工作表中的所有数据行放入一个数据框中，并且`path_to_workbook`是数据的位置：“dir/of/the/data/workbook”。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-02T21:36:43.880

[excel.link](http://cran.r-project.org/web/packages/excel.link/index.html)将完成这项工作。

实际上，我发现它比 XLConnect 更容易使用（并不是说这两个包都很难使用）。两者的学习曲线约为 5 分钟。

[顺便说一句，您可以通过浏览http://cran.r-project.org/web/packages/available_packages_by_name.html](http://cran.r-project.org/web/packages/available_packages_by_name.html)轻松找到所有提到“Excel”一词的 R 包

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-10-29T08:02:26.310

只是为了简化@Jeromy Anglim 非常有用的回复：

```
allsheets <- sapply(readxl::excel_sheets("your_file.xlsx"), simplify = F, USE.NAMES = T,
            function(X) readxl::read_excel("your_file.xlsx", sheet = X)) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-23T19:29:02.670

我尝试了上述方法，但我需要转换的 20MB Excel 包含的数据量存在问题；因此以上对我不起作用。

经过更多研究后，我偶然发现了 openxlsx，而这个终于成功了（而且速度很快） [将一个大的 xlsx 文件导入到 R 中？](https://stackoverflow.com/questions/19147884/importing-a-big-xlsx-file-into-r)

[https://cran.r-project.org/web/packages/openxlsx/openxlsx.pdf](https://cran.r-project.org/web/packages/openxlsx/openxlsx.pdf)

# multithreading - 在 Tchan 上选择性发送？

> ID：12945690
> 
> 赞同：0
> 
> 时间：2012-10-18T01:07:01.600
> 
> 标签：multithreading, haskell, stm

AFAIK TChan 充当枢纽，发送的每条消息都会被其他人看到，对吧？！
我想要一个 TChan 作为开关来向特定线程发送消息，并且还支持广播。
有这样的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T02:02:49.650

编辑：我重新阅读了你的问题。这个答案并没有完全解决“选择性发送”，尽管它澄清了 a`TChan`可以做什么。

下面描述的“广播”方法将唤醒所有听众（虽然从好的方面来说，它不会为每个项目制作 1000 个副本）。为避免这种情况，请使用`Map`@Mikhail 建议的方法。我在我的[聊天服务器示例](https://github.com/joeyadams/haskell-chat-server-example/blob/master/Main.hs)中这样做了。

* * *

A`TChan`是一个先进先出队列：

*   `writeTChan`在末尾添加一个项目。

*   `readTChan`从头开始读取一个项目。

例如，以下示例分叉了 10 个线程，它们争夺一个通道：

```
import Control.Concurrent
import Control.Concurrent.STM
import Control.Monad

main = do
    chan <- newTChanIO

    forM_ [1..10] $ \i ->
        forkIO $
            forever $ do
                x <- atomically $ readTChan chan
                putStrLn $ "Thread " ++ show i ++ ": " ++ show x

    mapM_ (atomically . writeTChan chan) [1..1000]

    -- Wait for channel to empty out
    atomically $ do
        empty <- isEmptyTChan chan
        when (not empty) retry 
```

在这里，每个项目都由一个线程读取。

相比之下，以下示例通过使用[dupTChan](http://hackage.haskell.org/packages/archive/stm/latest/doc/html/Control-Concurrent-STM-TChan.html#v%3adupTChan)制作通道的 10 个副本，将项目流“广播”到 10 个线程：

```
import Control.Concurrent
import Control.Concurrent.STM
import Control.Monad

main = do
    master <- newTChanIO

    forM_ [1..10] $ \i -> do
        chan <- atomically $ dupTChan master
        forkIO $
            forever $ do
                x <- atomically $ readTChan chan
                putStrLn $ "Thread " ++ show i ++ ": " ++ show x

    mapM_ (atomically . writeTChan master) [1..100]

    -- Give threads time to complete
    threadDelay 1000000 
```

现在每个线程都获取写入通道的所有项目。

需要注意的几个细微之处：

*   之前写入频道的项目`dupTChan`不会出现在新频道中。如果我们`dupTChan`从子线程而不是主线程调用，一些`writeTChan`s 可能首先发生，这意味着子线程可能看不到所有项目。

*   由于没有人在读取`master`通道，写入它的项目会堆积起来，可能不会被垃圾收集。为避免此警告，请使用[newBroadcastTChan](http://hackage.haskell.org/packages/archive/stm/latest/doc/html/Control-Concurrent-STM-TChan.html#v%3anewBroadcastTChan)创建`master`频道。

# javascript - JQuery 自动完成追加到打开列表

> ID：12945694
> 
> 赞同：0
> 
> 时间：2012-10-18T01:07:24.500
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, widget

我测试了 JQuery 自动完成 UI 小部件，发现自动完成在 IE 中处理大量数据时的性能极差。我的客户使用 Internet Explorer 7。

我找到了缓解性能问题的解决方案。我只返回前 40 个匹配项，而不是返回自动完成搜索的所有匹配项。下面的代码

```
source: function (request, response) {
                var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(request.term), "i");
                var select_el = select.get(0); // get dom element
                var rep = new Array(); // response array
                var maxRepSize = 40; // maximum response size
                // simple loop for the options
                var looper = 0;
                for (var i = 0; i < select_el.length; i++) {
                    var text = select_el.options[i].text;
                    if (!request || request == '') {
                        // add element to result array
                        rep[looper++] = {
                            label: text,
                            value: text,
                            option: select_el.options[i]
                        };
                    }
                    else if ( select_el.options[i].value && matcher.test(text)   ) {
                        // add element to result array
                        rep[looper++] = {
                            label: text,
                            value: text,
                            option: select_el.options[i]
                        };
                    }
                    if ( rep.length > maxRepSize ) {
                        needMoreItems = true;
                        break;
                    }
                 }
                 // send response
                 response( rep );
            }, 
```

客户要求我将“更多结果”项目附加到自动完成列表中。如果有超过 40 个项目与搜索匹配，“更多结果”项目将出现在列表底部。如果用户单击“更多结果”项，自动完成下拉菜单将展开以包括接下来的 40 个匹配项。我尝试了 jQuery 自动完成，我能够用接下来的 40 个项目填充自动建议列表，但是当用户单击动态添加的项目之一时，我无法将点击事件绑定到自动完成 UI 小部件的选择事件. 下面的代码：

```
open: function( event, ui ) {

                if (needMoreItems) {

                    needMoreItems = false;
                    $('<li class="ui-menu-item" role="menuitem" id="yoADDMORE" ><a class="ui-corner-all" tabindex="-1">... more available<br/><br/></a></li>')
                    .bind({
                        click: function(e) {
                            var appendHtml = '';
                            var select_el = select.get(0);
                            var maxRepSize = 40; // maximum response size
                            // simple loop for the options
                            var looper = 0;
                            for (var i = 41; i < select_el.length; i++) {
                                appendHtml += '<li class="ui-menu-item" role="menuitem"><a class="ui-corner-all" tabindex="-1">' + select_el.options[i].text + '</a></li>';

                                if ( looper ++ > maxRepSize ) {
                                    needMoreItems = true;
                                    break;
                                }
                            }
                            if (needMoreItems)
                            appendHtml += '<li class="ui-menu-item" role="menuitem" id="yoADDMORE" ><a class="ui-corner-all" tabindex="-1">... more available<br/><br/></a></li>';
                            $('#yoADDMORE').remove();
                            $('ul.ui-autocomplete').html($('ul.ui-autocomplete').html() + appendHtml);

                            $('ul.ui-autocomplete > li')
                            .bind({
                                mouseenter: function(e) {
                                    // Hover event handler
                                   $("> a",this).attr('class','ui-corner-all ui-state-hover');
                                },
                                mouseleave: function(e) {
                                    // Hover event handler
                                    $("> a",this).attr('class','ui-corner-all');
                                }
                            });

                        },
                        mouseenter: function(e) {
                            // Hover event handler
                           $("> a",this).attr('class','ui-corner-all ui-state-hover');
                        },
                        mouseleave: function(e) {
                            // Hover event handler
                            $("> a",this).attr('class','ui-corner-all');
                        }

                   })
                   .appendTo('ul.ui-autocomplete');

               }                    

            }, 
```

链接到 jsFiddle [http://jsfiddle.net/eyecode/sX4Ba/](http://jsfiddle.net/eyecode/sX4Ba/) 任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:21:27.187

为了列出前 20 个选项，在前 20 个项目的底部带有“更多 ..”。一旦用户按下“更多..”链接。所有项目都将显示在下拉列表中。

```
(function ($) {
    $.widget("ui.typeaheadtextbox", {
        _create: function () {
            var self = this,
            select = this.element.hide(),
            theWidth = select.width(),
            selected = select.children(":selected"),
            value = selected.val() ? selected.text() : "";
      var _searchItem = '';
      var _more = false;
      var _lastIndex = 0;
      var _maxSize = 20;
      var _rep = null;
            var input = this.input = $("<input id='" + select[0].id + "_jq' style=\"width: " + theWidth + "px\">")
            .insertAfter(select)
            .val(value)
            .autocomplete({
                delay: 10,
                minLength: 0,
                source: function (request, response) {
                    var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(request.term), "i");
                    var j = 0;
          _rep = response;
          _searchItem = request.term;
          var select_el = select.get(0); // get dom element
          var rep = new Array(); // response array
          for (var i = 0; i < select_el.length; i++) {
            var text = select_el.options[i].text;
            if (select_el.options[i].value && (!request.term || matcher.test(text))) {
              j++;
              if (j > _maxSize) {
                                _more = true;
                                _lastIndex = i;
                                break;
                            }
              // add element to result array
              rep[(j - 1)] = {
                                label: text.replace(new RegExp("^(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(_searchItem) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"), value: text, option: select_el.options[i]
                            };
            }
          }
          return response(rep);
                },
                autoFocus:true,
                open: function(event, ui) {
                    if (_more) {
                        _more = false;
                        $('<li class="ui-menu-item_more" role="menuitem" id="' + select.get(0).id + '_ADDMORE_' + _lastIndex + '" ><a class="ui-corner-all" tabindex="-1"><img width="16" src="Content/themes/base/images/icon-search-small.png"/> <strong>View All</strong></a></li>')
                        .bind({
                            click: function(e) {
                                var response = _rep;
                                var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(_searchItem), "i");
                                var select_el = select.get(0); // get dom element
                                var rep = new Array(); // response array
                                var j = 0;
                                for (var i = 0; i < select_el.length; i++) {
                                    var text = select_el.options[i].text;
                                    if (select_el.options[i].value && (!_searchItem || matcher.test(text))) {
                                        // add element to result array
                                        rep[j++] = {
                                            label: text.replace(new RegExp("^(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(_searchItem) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>"), value: text, option: select_el.options[i]
                                        };
                                    }
                                }
                                $(this).remove();
                                return _rep(rep);
                            },
                            mouseenter: function(e) { $("> a",this).attr('class','ui-corner-all ui-state-hover'); },
                            mouseleave: function(e) { $("> a",this).attr('class','ui-corner-all');}
                        })
                        .appendTo('ul.ui-autocomplete');
                        _lastIndex = 0;
                        return true;
                    }
                },
                select: function (event, ui) {
                    ui.item.option.selected = true;
                    self._trigger("selected", event, {
                        item: ui.item.option
                    });
                },
                change: function (event, ui) {
                    if (!ui.item) {
                        var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                            valid = false;
                        select.children("option").each(function () {
                            if ($(this).text().match(matcher)) {
                                this.selected = valid = true;
                                return false;
                            }
                        });
                        if (!valid) {
                            // remove invalid value, as it didn't match anything
                            $(this).val("");
                            select.val("");
                            input.data("autocomplete").term = "";
                            return false;
                        }
                    }
                }
            })
            .addClass("ui-widget ui-widget-content ui-corner-all");
            input.data("autocomplete")._renderMenu = function( ul, items ) {
            var self = this; var htm = ''; var beginHtm = '<li><a>'; var endHtm = '</a></li>';
          for(var i=0;i<items.length;i++) {
                htm += beginHtm + items[i].label +  endHtm;
          }
          ul[0].innerHTML = htm;
          var liTags = ul[0].getElementsByTagName('li');
          for(var i=0;i<liTags.length;i++) {
            $(liTags[i]).data("item.autocomplete", items[i]);
          }
          return true;
        };
        },
        destroy: function () {
            this.input.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        },
        clear: function () {
            this.element.val("");
            this.input.val("");
        }
    });
})(jQuery); 
```

# web-scraping - 这种反抓取技术是否适用于 Robots.txt Crawl-Delay？

> ID：12945698
> 
> 赞同：2
> 
> 时间：2012-10-18T01:08:08.327
> 
> 标签：web-scraping, web-crawler, robots.txt

我想防止网络抓取工具在我的网站上积极*抓取*1,000,000 个页面。我想通过向每分钟访问异常页数的机器人返回“503 服务不可用”HTTP 错误代码来做到这一点。我*没有*遇到垃圾邮件发送者的问题，只是遇到了抓取工具。

我不希望搜索引擎蜘蛛收到错误。我的倾向是设置 robots.txt 爬行延迟，这将确保蜘蛛每分钟访问的页面数低于我的 503 阈值。

这是一个可接受的解决方案吗？所有主要搜索引擎都支持 crawl-delay 指令吗？它会对SEO产生负面影响吗？还有其他解决方案或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:24:19.357

我已经建立了一些刮板，而花费时间最长的部分总是试图找出站点布局要刮什么而不是什么。我可以告诉你的是，改变 div 和内部布局对所有爬虫来说都是毁灭性的。就像 ConfusedMind 已经指出的那样。

所以这里有一段文字给你：

**速率限制**
对 IP 进行速率限制意味着您只允许 IP 在固定时间范围内进行一定数量的搜索，然后再阻止它。这似乎可以肯定地防止最严重的罪犯，但实际上并非如此。问题是您的大部分用户可能来自代理服务器或大型企业网关，他们经常与成千上万的其他用户共享这些网关。如果您对代理的 IP 进行速率限制，则当来自代理的不同用户使用您的站点时，该限制将很容易触发。仁慈的机器人也可能以比正常速度更高的速度运行，从而触发您的限制。

一种解决方案当然是使用白名单，但问题是您需要不断手动编译和维护这些列表，因为 IP 地址会随着时间而变化。不用说，一旦数据抓取工具意识到您正在限制某些地址的速率，它们只会降低它们的速率或将搜索分布在更多的 IP：s 上。

为了使速率限制对网站的大用户有效且不会令人望而却步，我们通常建议在阻止他们之前调查超出速率限制的每个人。

**Captcha 测试**
Captcha 测试是试图阻止网站抓取的常用方法。这个想法是让一张图片显示一些机器无法阅读但人类可以阅读的文本和数字（见图）。这种方法有两个明显的缺点。首先，如果用户必须填写多个验证码，验证码测试可能会让他们感到厌烦。其次，网络爬虫可以很容易地手动进行测试，然后让他们的脚本运行。除此之外，一些验证码测试的大用户的实施受到了损害。混淆源代码

一些解决方案试图混淆 http 源代码，使机器更难阅读它。这种方法的问题在于，如果网络浏览器可以理解混淆代码，那么任何其他程序也可以。混淆源代码也可能会干扰搜索引擎如何查看和处理您的网站。如果你决定实施这个，你应该非常小心。

**黑名单**
由已知的 IP:s 组成的黑名单本身并不是一种真正的方法，因为您仍然需要先检测到刮板才能将他列入黑名单。即便如此，它仍然是一种钝器，因为 IP:s 往往会随着时间而变化。最后，您将最终使用此方法阻止合法用户。如果您仍然决定实施黑名单，您应该有一个至少每月审查一次的程序。

# opencv - 从 Opencv 2.3 升级到 2.4.2

> ID：12945699
> 
> 赞同：0
> 
> 时间：2012-10-18T01:08:07.953
> 
> 标签：opencv, android-ndk

我正在使用 Opencv 构建一个 Android 应用程序，这是一个旧项目，所以我使用 cygwin 和 ndk 6，我升级到 ndk8b，并且只使用 Windows。我将 ADT 更新为最新版本。使用 Opencv 2.3 构建 .so 目标文件可以，但是当我将 GNU C/GNU C++ 路径和符号更改为 Opencv2.4.2 目录并更改我在 Android.mk 文件上包含 OpenCV.mk 时，构建失败。

错误是：

```
/jni/scan_utils.cpp:44：未定义对“cvReleaseImage”的引用
/jni/scan_utils.cpp:50：对“cvLoadImage”的未定义引用
/jni/scan_utils.cpp:54：未定义的对“cvCreateMat”的引用
/jni/scan_utils.cpp:77：未定义对“cvGetPerspectiveTransform”的引用

```

但是，如果我在 Eclipse 上单击我的 CDT 插件的功能，则会向我显示参考。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:16:37.907

检查您的 Android.mk 和 Application.mk 是否遵循说明[http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html](http://docs.opencv.org/trunk/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html)

当您升级到 2.4.2 时，您可能没有更改关于 LOCAL_STATIC_LIBRARIES、LOCAL_LDLIBS、LOCAL_LDFLAGS 的行。

# mysql - SQL：复杂的 Select 语句和返回的半径

> ID：12945702
> 
> 赞同：0
> 
> 时间：2012-10-18T01:08:33.937
> 
> 标签：mysql, sql, metadata

这个查询让我发疯，老实说，我只是不知道如何完成它。

我需要获取某个半径内的所有用户和商店经度和纬度，并返回附加到这些结果 ID 的其他一些信息......半径部分，我已经弄清楚：

`( 3959 * acos( cos( radians('48.453541') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('-123.491765') ) + sin( radians('48.453541') ) * sin( radians( lat ) ) ) ) AS distance`

^上面语句中的这个弧度只是我要查询的随机地址。

但是抓取本质上是两个不同行的结果作为一个结果让我很困惑。这两个表都是以这种方式构造的：

```
id
meta_key
meta_value 
```

所以我需要为 USER 和 SHOP 获取两个键的“meta_value”......用户的“meta_key”是“bid_user_lat”和“bid_user_lng”......而 SHOP 的“meta_key”是“ bid_resource_lat”和“bid_resource_lng”

理想的结果（只显示一个，但应该是多个，取决于半径）：

```
id - 223
first_name - "Mark"
last_name - "Johnson"
bid_user_lat - 45.0000
bid_user_lng - -150.0000

id - 688
company_name - "Joe's Shop"
bid_resource_lat - 45.0000
bid_resource_lng - -150.0000 
```

我真的希望我能正确解释这一点，因为这简直让我发疯！

* * *

我更新的查询如下，但它仍然没有产生任何结果，它应该：

```
SET @lat =  '48.453541';
SET @lng =  '-123.491765';
SET @radius =  '10000';

SELECT
    wp_usermeta.user_id,
    bid_user_lat.meta_value,
    bid_user_lng.meta_value,

( 3959 * acos( cos( radians( @lat ) ) * cos( radians( bid_user_lat.meta_value ) ) * cos( radians( bid_user_lng.meta_value ) - radians( @lng ) ) + sin( radians( @lat ) ) * sin( radians( bid_user_lat.meta_value ) ) ) )  AS distance 

FROM
    wp_usermeta
JOIN 
    wp_usermeta bid_user_lat
    ON wp_usermeta.user_id = bid_user_lat.user_id
    AND wp_usermeta.meta_key = "bid_user_lat"
JOIN
    wp_usermeta bid_user_lng
    ON wp_usermeta.user_id = bid_user_lng.user_id
    AND wp_usermeta.meta_key = "bid_user_lng"

HAVING distance < @radius ORDER BY distance LIMIT 0 , 20; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:23:49.987

您可以使用自联接获取此信息：

```
SELECT
    table.id,
    bid_user_lat.meta_value,
    bid_user_lng.meta_value
FROM
    table
JOIN 
    table bid_user_lat
    ON table.id = bid_user_lat.id
    AND table.meta_key = "bid_user_lat"
JOIN
    table bid_user_lng
    ON table.id = bid_user_lng.id
    AND table.meta_key = "bid_user_lng"
WHERE
    { distance clause } 
```

...距离条款是您确保它在适当距离内的地方。您可以`bid_user_lat.meta_value`用作`bid_user_lat`值，也可以`bid_user_lng.meta_value`用作`bid_user_lng`计算中的值。

如果您想在与 Shop 结果相同的查询中返回 User 结果，那么您可以执行与上述查询相同的查询（当然使用 Shops 而不是 Users），并使用`UNION`or连接它们`UNION ALL`。

边注：

如果您对数据库有任何控制权，您可能需要重新访问该设计。上面的解决方案无论如何都不理想......如果一个用户总是有一个bid_user_lat和一个bid_user_lng字段，或者即使它只是用户的一个公共属性，那么它真的应该在用户表中有自己的列。

*更正：*

我`JOIN`ing 不正确。该`ON`子句应使用`bid_user_lng.meta_key = "bid_user_lat"`而不是`wp_usermeta.meta_key = "bid_user_lat"`. 您还需要添加一个`GROUP BY`子句，这样您就不会有重复的记录。将这些应用于上面的查询，您将获得：

```
SET @lat =  '48.453541';
SET @lng =  '-123.491765';
SET @radius =  '10000';

SELECT
    wp_usermeta.user_id,
    bid_user_lat.meta_value,
    bid_user_lng.meta_value,

( 3959 * acos( cos( radians( @lat ) ) * cos( radians( bid_user_lat.meta_value ) ) * cos( radians( bid_user_lng.meta_value ) - radians( @lng ) ) + sin( radians( @lat ) ) * sin( radians( bid_user_lat.meta_value ) ) ) )  AS distance 

FROM
    wp_usermeta
JOIN 
    wp_usermeta bid_user_lat
    ON wp_usermeta.user_id = bid_user_lat.user_id
    AND bid_user_lat.meta_key = "bid_user_lat"
JOIN
    wp_usermeta bid_user_lng
    ON wp_usermeta.user_id = bid_user_lng.user_id
    AND bid_user_lng.meta_key = "bid_user_lng"

GROUP BY wp_usermeta.user_id

HAVING distance < @radius ORDER BY distance LIMIT 0 , 20; 
```

这是它有效的确认：

```
mysql> CREATE TABLE wp_usermeta (user_id INTEGER UNSIGNED, meta_key VARCHAR(255), meta_value VARCHAR(255));
Query OK, 0 rows affected (0.25 sec)

mysql> INSERT INTO wp_usermeta (user_id, meta_key, meta_value)
    -> VALUES
    -> (1, "bid_user_lat", "45.000"), (1, "bid_user_lng", "-150.000"),
    -> (2, "bid_user_lat", "20.000"), (2, "bid_user_lng", "20.000"),
    -> (3, "bid_user_lat", "-300.000"), (3, "bid_user_lng", "70.000");
Query OK, 6 rows affected (0.16 sec)
Records: 6  Duplicates: 0  Warnings: 0

mysql> SELECT
    ->     wp_usermeta.user_id,
    ->     bid_user_lat.meta_value,
    ->     bid_user_lng.meta_value,
    -> 
    -> ( 3959 * acos( cos( radians( @lat ) ) * cos( radians( bid_user_lat.meta_value ) ) * cos( radians( bid_user_lng.meta_value ) - radians( @lng ) ) + sin( radians( @lat ) ) * sin( radians( bid_user_lat.meta_value ) ) ) )  AS distance 
    -> 
    -> FROM
    ->     wp_usermeta
    -> JOIN 
    ->     wp_usermeta bid_user_lat
    ->     ON wp_usermeta.user_id = bid_user_lat.user_id
    ->     AND bid_user_lat.meta_key = "bid_user_lat"
    -> JOIN
    ->     wp_usermeta bid_user_lng
    ->     ON wp_usermeta.user_id = bid_user_lng.user_id
    ->     AND bid_user_lng.meta_key = "bid_user_lng"
    -> 
    -> GROUP BY wp_usermeta.user_id
    -> 
    -> HAVING distance < @radius ORDER BY distance LIMIT 0 , 20;
+---------+------------+------------+--------------------+
| user_id | meta_value | meta_value | distance           |
+---------+------------+------------+--------------------+
|       1 | 45.000     | -150.000   | 1271.3329043047352 |
|       3 | -300.000   | 70.000     | 4905.4310014631055 |
|       2 | 20.000     | 20.000     |  7198.549954690863 |
+---------+------------+------------+--------------------+
3 rows in set (0.05 sec) 
```

# java - 字数统计程序，计数器有问题

> ID：12945704
> 
> 赞同：0
> 
> 时间：2012-10-18T01:08:44.657
> 
> 标签：java, string, io, word-count

> **可能重复：**
> [我需要一个计算字数的程序](https://stackoverflow.com/questions/12945357/i-need-a-program-for-a-wordcount)

用户输入一个句子和每个单词的最小长度，然后程序必须计算句子中满足长度要求的单词数。

如果单词超过所需长度，我的计数器无法存储单词。

这就是我所拥有的。我们只能使用`String`and `IO`。

```
public class wordcount {
    public static void main(String[] args) {
        int length = IO.readInt();
        String sentence = IO.readString();
        int y= 0;           
        for( int x= 0;x > sentence.length();x++){
            if(x>= length)
                y= y+1;
        }
        System.out.print(y);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:29:53.827

现在您正在比较您的索引是否大于指定长度，而不是该索引处的单词。此外，不会进入循环，因为你在 for 循环中的守卫检查 x > sentence.length()，当它应该是 <。使用 "String[] words = sentence.split(" ");" 将句子分成一个字符串数组，每个单词一个字符串。遍历这个数组，检查每个单词 (words[x].length()) 是否满足要求。

# android - 在 trigger.io 中创建 android 设备时出错

> ID：12945705
> 
> 赞同：2
> 
> 时间：2012-10-18T01:08:45.693
> 
> 标签：android, sdk, device

当试图

创建 Android 虚拟设备时出错

我安装了当前的 android sdk 工具并引用了它的位置。

这个相同的 sdk 工具包已经证明可以与 eclipse 一起使用。

以下是单次跑步尝试的通知。

如何解决问题？

问候 T

运行在版本 3.3.17 上运行的 android 工具 更新结果：您已经拥有最新的工具 警告 No profile DEFAULT found for android 检查文件...检查完成 验证您的配置设置...配置设置检查完成 创建开发版本。使用 run 运行您的应用程序。在版本 3.3.17 上运行的工具 警告 No profile DEFAULT found for android 检查文件...检查完成 验证您的配置设置...配置设置检查完成 如果未运行则启动 ADB 寻找 Android 设备 检查以前创建的 AVD 错误 创建 Android 时出错虚拟设备。尝试更新 Android SDK 并重试 更新 SDK 并下载所需的 Android 平台（大约 90MB，可能需要一些时间） 尝试再次创建 Android 虚拟设备 ERROR 创建 Android 虚拟设备时出错：错误：目标 ID 无效。使用 'android.bat list targets' 获取目标 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T20:10:50.173

确保您已安装 Android 平台。如果您`Show Debug`在运行项目时在 trigger.io UI 中选择该选项，那么您应该会看到正在尝试创建 AVD 的实际行。就我而言，它是：

```
android.bat create avd -n forge -t android-8 --skin HVGA -p... 
```

转到您的 SDK 安装文件夹并运行 SDK Manager exe。然后，您可以选择要安装的正确软件包。在我的情况下，我选择了 Android 2.2 (API-8)，之后上面创建 AVD 的行工作正常，并且 trigger.io 启动了模拟器。

# mime-types - 样式表的内容协商失败

> ID：12945710
> 
> 赞同：1
> 
> 时间：2012-10-18T01:09:20.933
> 
> 标签：mime-types, content-negotiation

我有一个带有 MultiViews 的 Apache 服务器，这是我的目录布局：

```
/style.css [text/css]
/style.xsl [text/xsl]
/index.xml [application/xml] 
```

在我的 index.xml 文件中，我引用了 XSL：

```
<?xml-stylesheet href="/style"?> 
```

在 XSL 中，我引用了 CSS：

```
<link rel="stylesheet" href="/style" /> 
```

这种方法在我尝试过的任何浏览器中都不起作用。

在 Firefox-16.0.1 中，我看到以下消息：

```
Error loading stylesheet: An XSLT stylesheet does not have an XML mimetype: 
```

我调试 HTTP 对话，我注意到 Firefox 正在发送：

```
Accept: */* 
```

Firefox 请求任何类型的内容，因此 Apache 选择发送 /style.css。

我希望需要特定内容类型的 Web 浏览器为这些内容类型发送明确的 Accept 标头。

当我发现另外两个明确记录摆脱 Accept 约束时，我准备提交一个错误。

*   [减少用于获取 XSLT 的 Accept 标头的详细程度](https://bugzilla.mozilla.org/show_bug.cgi?id=656251)
*   [样式表链接头不支持官方 XSLT 媒体类型](https://bugzilla.mozilla.org/show_bug.cgi?id=655238)

我可以通过将扩展名放在文件名中来解决这个问题，但这应该与图像内容协商的工作方式相同，如[W3C 博客](http://www.w3.org/QA/2006/02/content_negotiation.html)中所述。好处是他们可以稍后添加新的内容类型，而无需更新任何文档。

这是一个错误，还是我有什么问题？

# sql - 如果仪表已被交换，则循环遍历 SQL 记录以获取一段时间内的总仪表读数

> ID：12945721
> 
> 赞同：2
> 
> 时间：2012-10-18T01:11:34.673
> 
> 标签：sql

我有一张表格，用于输入车辆的每周霍布斯小时表读数。我需要能够将一段时间内每辆车使用的总小时数相加。我遇到的问题是，有时仪表一旦出现故障就会被换掉，并用新仪表代替，这是不可编程的，我必须从零小时开始，所以我需要遍历每个仪表读数并确定仪表是否有被交换并在我的代码中解释它。我对游标并不感兴趣，但可能不得不使用一个来创建一个存储过程，除非有人有更好的解决方案，否则我应该尝试一下。我正在尝试考虑 CTE 可能会有所帮助的方法，但目前还没有。

表结构为：

```
ReadingDate Datetime
EquipmentId Int
MeterReading  decimal(18,2) 
```

我计划创建一个累积变量，遍历游标中的行并将读数差异添加到变量中。因此，当我循环并看到仪表读数小于以前的读数时，我必须更换仪表并且必须考虑到它。我在想，如果我要向前看下一个读数并且它低于当前读数，我会跳过求和操作一次，然后开始将差异添加到累积变量中。有没有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:19:22.090

这将在 SqlServer 中工作：

```
SELECT t1b.EquipmentId, 
       t1a.ReadingDate As StartDate, 
       t1b.ReadingDate AS EndDate,
       CASE 
         WHEN t1b.Reading >= t1a.Reading THEN t1b.Reading - t1a.Reading 
         ELSE t1b.Reading
      END AS Hours
FROM MeterReadings AS t1a
JOIN (select t11.EquipmentId, 
             t11.ReadingDate AS Date1, 
             (SELECT MIN(t13.ReadingDate)  
                FROM MeterReadings AS t13 
               WHERE t13.EquipmentId = t11.EquipmentId 
                AND t13.ReadingDate > t11.ReadingDate 
           Group By t13.EquipmentId) AS NextReadingDate
       from MeterReadings AS t11) AS rd ON t1a.EquipmentId = rd.EquipmentId 
                                        AND t1a.ReadingDate = rd.Date1
JOIN MeterReadings as t1b ON t1b.EquipmentId = t1a.EquipmentId 
                          AND t1b.ReadingDate = rd.NextReadingDate
order by t1a.EquipmentId, t1a.readingdate 
```

[我正在玩的 SQL Fiddle](http://sqlfiddle.com/#!3/85e3c/16/0)

# iphone - cocos2d: 错误: 升级到 cocos2d 2.0 时编译顶点着色器失败

> ID：12945722
> 
> 赞同：0
> 
> 时间：2012-10-18T01:11:51.320
> 
> 标签：iphone, cocos2d-iphone, opengl-es-2.0

我正在尝试升级我的 cocos2d 1.0 应用程序以使用新的 cocos2d 2.0 框架。

我关注了迁移 wiki，并且能够转换大部分内容。但我看到了这个错误 - cocos2d: ERROR: Failed to compile vertex shader

当我尝试使用简单的 CCLableTTF 时。我没有使用任何着色器或特殊图形。我确定我只是错过了一些简单的东西，但似乎找不到答案。

```
 CGSize size = [[CCDirector sharedDirector] winSizeInPixels];
//# Moves Label
self.scoreLabel = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"Moves: %d",self.player.score] fontName:@"Marker Felt" fontSize:18];
[self.scoreLabel setPosition: ccp(size.width/2, 400)];

[self.scoreLabel setColor:ccc3(255, 255, 255)];
[self addChild:self.scoreLabel z:200]; 
```

我最终得到一个空白页并看到错误 -

```
-[CCGLProgram initWithVertexShaderByteArray:fragmentShaderByteArray:] [Line 82] cocos2d: ERROR: Failed to compile vertex shader
-[CCGLProgram initWithVertexShaderByteArray:fragmentShaderByteArray:] [Line 91] cocos2d: ERROR: Failed to compile fragment shader
-[CCGLProgram link] [Line 178] cocos2d: ERROR: Failed to link program: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:47:07.043

在重新添加新文件夹之前删除旧的 cocos2d 文件夹。不要只是将新的 cocos2d 文件复制到旧的文件上。

否则，删除或重命名的类总是有可能保留在您的项目中，这可能会导致各种看似奇怪的问题。

# javascript - 无法将数字添加到我的计算器显示屏

> ID：12945724
> 
> 赞同：0
> 
> 时间：2012-10-18T01:12:30.117
> 
> 标签：javascript

```
 <html>
 <head>
 <title> Buttons</title>
 <style type="text/css">

.intro{background-color:;}
.duction{background-color:blue;}
.function{background-color:grey;}
.equals{background-color:orange;}
</style>

</head>
<body>
<form name="calculator">
<input type="text"  name="display" length="50" width="100">
<div>
<input type= "button" value="7" class="intro" id="7" onclick="one(7)"></button>
<input type= "button" value="8" class="intro" id="8" onclick="one(8)"></button>
<input type= "button" value="9" class="intro" id="9" onclick="one(9)"></button>
<input type= "button" value="+" class="intro" id="+" onclick="one(+)"></button>
<input type= "button" value="-" class="intro" id="-" onclick="one(-)"></button>
<div>
<input type= "button" value="4" class="intro" id="4" onclick="one(4)"></button>
<input type= "button" value="5" class="intro" id="5" onclick="one(5)"></button>
<input type= "button" value="6" class="intro" id="6" onclick="one(6)"></button>
<input type= "button" value="x" class="intro" id="x" onclick="one(*)"></button>
<input type= "button" value="/" class="intro" id="/" onclick="one(/)"></button>
<div>
<input type= "button" value="1" class="intro" id="1" onclick="one(1)"></button>
<input type= "button" value="2" class="intro" id="2" onclick="one(2)"></button>
<input type= "button" value="3" class="intro" id="3" onclick="one(3)"></button>
<input type= "button" value="=" class="intro" ></button>
<div>
<input type= "button" value="0" class="intro" id="0" onclick="one(0)"></button>
<input type= "button" value="." class="intro" id="." onclick="one(.)"></button>
<input type= "button" value="c" class="intro" onclick="clearDigit()"></button>

<script type="text/javascript" src="C:\Users\LS\Desktop\QBJS\button.js">

</script>

</body>
</html> 
```

Javascript

```
function one(event)
{
clearTimeout(timer);
timer=setTimeout("AddDigit(object)",500);
object=event;
} 
```

//每次我在显示窗口中输入一个数字时，它都会替换以前的数字，而不是像实际的计算器那样连接到它。还试图弄清楚为什么我不能让我的功能符号出现在我的显示窗口中......我怀疑它与我的 setTimeout 有关......

```
 function AddDigit(x)
  {
  object=x;
  if (eval(digit) == 0)
   {digit = object;}
   else
   {digit = digit + object;}

 document.calculator.display.value=object;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:17:51.540

你正在做的，

```
document.calculator.display.value=object; 
```

但连接的版本是“数字”变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:14:29.257

它没有连接，甚至没有添加。你不能这样通过。原因是当您使用字符串发出回调时，它只会调用该函数。如果要传递参数，则需要创建一个闭包并将它们传递进去。

尝试这个：

```
timer=setTimeout(function(){ AddDigit(object); },500); 
```

您想要传递的很可能是事件：

```
timer=setTimeout(function(){ AddDigit(event); },500); 
```

或者

```
object = event;
timer=setTimeout(function(){ AddDigit(object); },500); 
```

此外，在 AddDigit 中，您可能想要这个：

```
document.calculator.display.value += object; 
```

# javascript - 一页上有多个javascript元素？

> ID：12945735
> 
> 赞同：1
> 
> 时间：2012-10-18T01:14:38.760
> 
> 标签：javascript

我几乎不知道 javascript，我只需要为艺术课做点什么。基本上，我希望在同一页面上有多个图像，每个图像在 3 个图像之间切换。

这是脚本：

```
 var images = ["images/image1.png", "images/image2.jpg", "images/image3.jpg"];
 var clicks = 0;

 $(document).ready(start);

 function start(){
     $("#panel_1").click(changeImage);
 }

 function changeImage(){
     clicks++;
     img = images[clicks % images.length];
     $("#panel_1").attr("src", img);
 } 
```

这是HTML：

```
 <div id="panel1">
 <a href="#">
    <img id="panel_1" border="0" src="images/SquirrelFull.jpg" width="230px" height="230px"/>
 </a>
 </div> 
```

现在我想要所有这些，但第二个，来制作 panel_2（和 3、4、5 等）

# java - Java 中的缓冲和非缓冲流

> ID：12945736
> 
> 赞同：12
> 
> 时间：2012-10-18T01:14:50.383
> 
> 标签：java, io, stream, buffer

我正在浏览一些关于 Java IO 的文档，只是想确定我是否做对了：

**无缓冲输入流**：FileInputStream、InputStreamReader、FileReader

**无缓冲输出流**：FileOutputStream、OutputStreamWriter、FileWriter

**缓冲输出流**：PrintStream、PrintWriter

此外，我们还有 BufferedInputStream、BufferedOutputStream、BufferedReader 和 BufferedWriter 流来将非缓冲流转换为缓冲版本。

最后，我观察到对于字符流，即。InputStreamReader、FileReader、OutputStreamWriter、FileWriter，在将字节发送到流中之前，会为字节维护一个内部字节缓冲区。这个字节缓冲区不在我们的控制之下。因此，对于字符流，缓冲是指用于存储进出程序的字符的高级字符缓冲区。

我说的一切都正确吗？

PS - 我知道这个缓冲问题在某种程度上取决于实现，但我只想确认 javadocs 所说的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:52:03.043

经验法则：

1.  任何直接从外部源（FileInputStream、SocketInputStream 等）读取的 InputStream / Reader 都是“原始的”并且被认为是无缓冲的。（虽然实际上，可能会有一些缓冲，取决于实现）

2.  任何“原始”InputStream 或 Reader 都可以由 BufferedInputStream 或 BufferedReader 缓冲。

3.  输出流/作家的相同假设。

4.  其他流装饰器（即 GZIPInputStream、MD5InputStream、YourSpecialObjectWriter）可能会做一些缓冲，但对缓冲源的危害并不大。

# asp.net-mvc - 大约 2 分钟后，mvc 3 中的 user.identity.name 和 authenticationtype 为空白，Windows 身份验证

> ID：12945737
> 
> 赞同：0
> 
> 时间：2012-10-18T01:14:58.967
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在我的 mvc 3 应用程序中使用 Windows 身份验证，通常一切正常。但是，如果我离开某个页面大约 2 分钟，然后发出 ajax 请求，User.Identity.Name（在控制器中）返回空白，身份验证类型也是如此。当我检查 user.isinrole(whatever) 时，这会导致失败。通常清除缓存会解决问题，但不是定期刷新。有时我需要清除几次缓存。

我正在使用 chrome，当我在 IE 中尝试时没有注意到这个错误（我没有尝试过比在 chrome 中等待的时间更长），那么这个错误是否可能与 chrome 相关？编辑：它也发生在 Firefox 中。

我注意到失败的时间类似于[User.Identity.Name 中的问题，Windows 身份验证有时为空白，](https://stackoverflow.com/questions/12675593) 但我在 web.config 中没有看到任何关于匿名身份验证的信息

一段时间后，在[user.identity.name 中变为空白，](https://stackoverflow.com/questions/363358)问题似乎是在他们的 IIS 服务器上启用了匿名身份验证，我也有，但我希望在我的服务器上设置它。有一些页面需要匿名访问，所以认证都是由MVC而不是服务器强制执行的，所以IIS启用了匿名和windows认证

我的 system.web 标记中有身份验证模式 =“Windows”，而 web.config 中没有关于授权的内容。在 global.asax.cs 的 registerglobals 函数中，我有

```
filters.Add(new RequireWindowsAuth()); 
```

这是一个继承自 AuthorizeAttribute 的类，它重写 OnAuthorization 方法以执行类似以下的操作

```
if(!User.IsInRole("Admin") && AdminAttr is defined)
     filterContext.Result = new HttpStatusCodeResult(403, "You are not authorized to view this page");
else if(AllowAnonymousAttribute is not found)
    base.OnAuthorization(filterContext); 
```

当错误发生时，我从服务器得到确切的 403 响应。

请求的操作具有 admin attr 而不是在其上定义的 allowanonymous attr

这是我检查正在定义的 attrs 的方法

```
filterContext.ActionDescriptor.IsDefined(attr, true) || filterContext.ActionDescriptor.ControllerDescriptor.IsDefined(typeof(AdminAttribute), true) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:58:30.180

我会调出[Fiddler](http://www.fiddler2.com/fiddler2/)并将其连接到 MVC 应用程序和浏览器之间，并监控从浏览器服务器传输的每条信息。

1.  应用程序池是否重新启动，导致它忘记所有经过身份验证的人？
2.  安全出于任何原因超时并且安全 cookie 过期（或丢失）？
3.  检查会话是否未重置（使用 Session_Start 和 Session_End 全局事件并将其记录在某处）？

Fiddler 应该允许您消除客户端，这是必须的 - 您正在调试太多组件的问题。您要确保您使用的任何浏览器都在传递干净和完整的数据。从问题中消除浏览器或服务器。

我的直觉告诉我，要么服务器因为服务器问题而忘记了经过身份验证的用户（可以使用 Session_End、Application_End 并记录它）和/或 AJAX 以某种方式没有发送必要的信息来继续保持身份验证 cookie 活着。Fiddler 将帮助您确定它是两者中的哪一个。

奖励，Fiddler 可以允许您重播会话 - 这将允许您重现错误 - 如果它发生在没有浏览器的 Fiddler 中 - 你知道问题出在服务器上 - 否则 - 它是浏览器/ajax。

希望这可以帮助，

# android - 找不到 Facebook 的应用仪表板

> ID：12945741
> 
> 赞同：0
> 
> 时间：2012-10-18T01:15:27.963
> 
> 标签：android, facebook

> **可能重复：**
> [从企业帐户创建和管理 Facebook 应用程序](https://stackoverflow.com/questions/10805745/creating-and-managing-a-facebook-app-from-a-business-account)

我知道这听起来有点奇怪，但我一直在到处寻找。我已注册为 facebook 开发人员，并正在尝试学习本教程。

[https://developers.facebook.com/docs/mobile/android/build/#register](https://developers.facebook.com/docs/mobile/android/build/#register)

当我单击“在 Facebook 上创建新应用程序”链接时，我被定向到我的 Facebook 页面，并且没有任何应用程序仪表板的迹象。我已经尝试了其他网页的其他几个链接，并且发生了同样的事情。这包括 facebook 开发者网站顶部的应用程序按钮。

有人知道我可能做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:03:41.703

Igy 说我必须使用普通帐户而不是商业帐户。

# c#-4.0 - C# 4.0 中的可选参数

> ID：12945742
> 
> 赞同：1
> 
> 时间：2012-10-18T01:15:39.007
> 
> 标签：c#-4.0, optional-arguments

```
 List<DynamicBusinessObject> dbo = SearchController.Instance.GetSearchResultList(search, null, "date", startRow - 1, ucDataPager1.PageSize, state); 
```

上面的代码行调用了到目前为止有 5 个参数的 GetSearchResultList 方法。

我添加了第 6 个参数，但想让这个参数成为可选参数，这样调用这个函数的所有其他页面都不需要更新。

所以我将函数更改为如下所示：

```
 [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
    public List<DynamicBusinessObject> GetSearchResultList(Search search, List<CategoryAttribute> listCatAttrib, string sortBy, int startRow, int pageSize, [Optional, DefaultParameterValue("")] string state)
    {
        StorageQuery qry = new QrySearchResult(
            search.ID,
            (listCatAttrib != null && listCatAttrib.Count > 0) ? listCatAttrib[0].Attribute.ID : -1,
            (listCatAttrib != null && listCatAttrib.Count > 1) ? listCatAttrib[1].Attribute.ID : -1,
            (listCatAttrib != null && listCatAttrib.Count > 2) ? listCatAttrib[2].Attribute.ID : -1,
            1, sortBy, startRow, pageSize, state);
        List<DynamicBusinessObject> list = BusinessObject.Search(qry);
        return list;
    } 
```

但是，当我尝试构建时，它给了我 GetSearchResultList 没有重载方法并且需要 5 个参数的错误。我也尝试做 string state = "" 而不是使用 [Optional]

如果第 6 个参数是可选的，任何人都知道为什么它抱怨我在调用时没有传递 6 个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:26:01.820

这些属性不是您在 c# 中定义可选参数的方式。

相反，语法只是参数 plus `= <value>`。

所以你的方法签名变成：

```
public List<DynamicBusinessObject> GetSearchResultList(
    Search search, 
    List<CategoryAttribute> listCatAttrib, 
    string sortBy, 
    int startRow, 
    int pageSize,
    string state = "") 
```

尽管我建议使用 null 而不是空字符串，但如果这些签名由外部库使用，则默认类型更自然。

可选参数就像常量一样，它们在编译时被烘焙到引用程序集中。

假设您有另一个库，它使用可选参数调用此方法，如下所示：

```
myObj.GetSearchListResult(search, listCatAttrib, sortBy, startRow, pageSize); 
```

在你编译这个库时，调用实际上会写在你的库中：

```
myObj.GetSearchListResult(search, listCatAttrib, sortBy, startRow, pageSize, ""); 
```

然后，如果您将方法的声明更改为：

```
public List<DynamicBusinessObject> GetSearchResultList(
    Search search, 
    List<CategoryAttribute> listCatAttrib, 
    string sortBy, 
    int startRow, 
    int pageSize,
    string state = "some value") 
```

第一个库中的调用*仍将*传递一个空字符串，而不是新值。您必须重新编译您的方法的所有调用者以确保采用新值。

也就是说，这就是为什么如果您在程序集之外公开此方法，则使用重载而不是默认值的原因；如果在重载中更改传递给方法的值，则只需分发定义该方法的程序集，您不必分发并让所有针对该方法的调用者重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:23:28.877

您应该能够使用：

```
..., string state = "") { 
```

一个可能的问题是您的项目针对的是旧版本的 .NET。检查项目属性以确保它指向正确的版本。

# ios - 纵向模式下的 iOS 自动布局性能问题。[NSIS引擎优化]

> ID：12945746
> 
> 赞同：20
> 
> 时间：2012-10-18T01:16:31.323
> 
> 标签：ios, autolayout

我遇到了一个非常奇怪的问题，我想知道是否有人可以在这里帮助我，因为我完全迷路了。

背景：我正在开发一个层次结构相对简单的应用程序。只有几个视图控制器，但有很多高分辨率图像。它们以`UIScrollView`带有一些文本等的形式呈现。在纵向模式下对其进行测试时，滚动视图根本没有平滑滚动。似乎帧速率下降到大约 4-5 fps。首先，我认为这是因为高分辨率图像。

但后来我把 iPad 调到了横向模式，一切都运行得很顺利。由于我有一个单独的纵向和横向 xib 文件，我认为纵向 xib 中一定有问题。原来，没有。两者都有相同的 VC 类，因此使用相同的代码和两个 xib 几乎相同，除了视图的大小和位置。

为了缩小问题的范围，我使用 Instrument 的 TimeProfiler 来查看导致问题的原因。事实证明，TimeProfiler 显示了一些对`[NSISEngine optimize]`（由 触发`NSLayoutConstraint`）的调用。在纵向模式下，通话次数更多，而且通话时间更长。在树的下方，我看到在纵向模式下`[NSISEngine optimize]`调用`[NSISEngine fixupIntegralizationViolations]`，而在横向模式下却没有。

我什至从应用程序中删除了所有视图控制器，除了 rootVC 和 rootVC 提供的另一个。呈现的 vc 仅包含一些图像、按钮和一些动画。它只有一个 xib 用于两个方向，并且（与所有其他方向一样）使用自动布局进行布局。

布局在两个方向上都可以正常工作，并且没有歧义（据我所知。至少`po [[UIWindow keyWindow] _autolayoutTrace]`没有显示任何内容）。

我附上了vc演示过程的TimeProfile截图。一张是纵向的，一张是横向的。如您所见，在横向调用`[NSISEngine optimize]`只需要一毫秒，而在纵向调用则需要超过 3000 毫秒。

有谁可以告诉我这是为什么？或者也许知道我能做些什么来找出问题所在？

任何帮助将不胜感激！

谢谢

链接到更大版本的图像：[链接](http://www.pic-upload.de/view-16503686/iOS_AutoLayout_Performance_Issue.jpg.html)

![Instruments Timeprofiler 截图](../Images/47780a5e90fa87521e24ec957e2f01ad.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:30:04.160

我在中等复杂的视图中遇到了同样的问题，它在非 Retina iPad 或纵向模式下的 Retina iPad 上表现良好。在 Retina 设备上的横向模式下，显示弹出框或在视图堆栈上推送另一个视图需要 10 倍的时间。我最终在视图控制器中用手动编码的 loadView 替换了 XIB 文件。这似乎已经消除了这个问题。界面生成器倾向于创建过多的约束，因此控制它是良好的自动布局性能的关键。

我还为此问题开了一张支持票。

更新：

我在我的情况中找到了原因。这是以下一组约束：

```
NSArray *constraints = [NSLayoutConstraint
                        constraintsWithVisualFormat : @"|[sunLabel][monLabel(==sunLabel)][tueLabel(==sunLabel)][wedLabel(==sunLabel)][thuLabel(==sunLabel)][friLabel(==sunLabel)][satLabel(==sunLabel)]|"
                        options : 0
                        metrics : nil
                        views : labelViewsDictionary]; 
```

它指定父视图中的 7 个标签都共享相同的大小，并且都扩展父视图的宽度。我相信布局的过度关系性质使自动布局适合，特别是因为父视图宽度不能被 7 整除。

为了解决这个问题，我创建了一组约束来指定每个标签的宽度并应用这些约束。当设备旋转父视图宽度时，我会返回并将约束上的常量调整为父视图宽度的 1/7。这现在表现良好，加载弹出框的过程现在需要不到 300 毫秒而不是 2000 毫秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T22:03:59.600

我就这个问题提交了技术支持请求，最后得到了答案，这很可能是一个错误。已提交错误报告。希望他们能尽快修复它。如果有任何消息，我会更新这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T15:02:21.003

我昨天在 Ipad iOS6.1 设备上遇到了同样的问题。检测应用程序发现，每次调用方法 fixupIntegralizationViolations 大约需要 300 毫秒（大约 20 次，这很多），这使得应用程序完全无用。

我的问题与 Jack Cox 的评论非常相似，但我以不同的方式解决了它。我的限制是：

@"H:|[allButton][inStoreButton(==allButton)][onlineButton(==allButton)][sortButton(50)]|"

问题是这里的 parentView 是整个 iPad 横向宽度，所以这个约束的数学是给每个按钮这个宽度：(1024-50)/3 = 324.6666667。

这在自动布局中通常不是问题，因为它会处理大浮点数并正确舍入它们，但似乎在 iPad iOS6 Landscape 中舍入此数字会触发阻塞 UI 的错误。为了解决这个问题，我所要做的就是将 sortButton 更改为 52，因此现在每个按钮的宽度为：(1024-52)/3 = 324。仅此而已。现在，每次调用 fixupIntegralizationViolations 方法大约需要 1 毫秒。

有趣的是，使用 52 在横向中给出了非十进制宽度，但在纵向中确实给出了十进制数：(768-52)/3 = 238.666667。但是，纵向似乎没有任何错误，并且自动布局正确地舍入了数字。

# svm - ROC能否比较两组特征的分类能力？

> ID：12945747
> 
> 赞同：1
> 
> 时间：2012-10-18T01:16:37.173
> 
> 标签：svm, libsvm, statistics, roc, cross-validation

我正在学习 SVM 和 ROC。据我所知，人们通常可以使用 ROC（接收器操作特性）曲线来显示 SVM（支持向量机）的分类能力。我想知道是否可以使用相同的概念来比较两个功能子集。

假设我有两个特征子集，子集 A 和子集 B。它们是通过 2 种不同的特征提取方法 A 和 B 从相同的训练数据中选择的。如果我使用这两个特征子集通过 LIBSVM 训练相同的 SVM svmtrain() 函数并绘制它们的 ROC 曲线，我可以通过它们的 AUC 值来比较它们的分类能力吗？因此，如果子集 A 的 AUC 值高于子集 B，我可以得出结论，方法 A 比方法 B 更好吗？这有什么意义吗？

非常感谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:26:10.180

是的，你在正确的轨道上。但是，您需要记住一些事情。

1.  通常使用具有适当缩放/归一化的两个特征 A 和 B 可以提供比单独的特征更好的性能。因此，您也可以考虑同时使用功能 A 和 B 的可能性。
2.  当使用特征 A 和 B 训练 SVM 时，您应该分别针对它们进行优化，即将使用特征 A 获得的最佳性能与使用特征 B 获得的最佳性能进行比较。通常，特征 A 和 B 在不同的内核和参数设置下可能会提供最佳性能.
3.  除了 AUC 之外，还有其他指标，例如[F1 分数](http://en.wikipedia.org/wiki/F-score)、[平均精度 (MAP)](http://en.wikipedia.org/wiki/Information_retrieval#Mean_average_precision)，一旦您评估了测试数据，就可以计算它们，并且根据您所考虑的应用程序，它们可能更合适。

# python - 为什么我的 timedelta 数学关闭了？

> ID：12945752
> 
> 赞同：2
> 
> 时间：2012-10-18T01:17:12.983
> 
> 标签：python, datetime

我在网上找不到任何东西，可能有一些愚蠢的简单答案，但是对于 python，我不明白：

```
import pytz
from datetime import datetime, timedelta

now_utc = pytz.utc.localize(datetime.utcnow())
past = pytz.utc.localize(datetime.utcnow() - timedelta(seconds=120))
delta = (now_utc-past).seconds
print delta # prints '119', not '120' 
```

为什么它总是比我指定的 timedelta 少 1 秒？如果我将“秒=120”更改为“分钟=1”，我会得到“59”，而不是“60”。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T01:22:03.823

```
>>> print now_utc - past
0:01:59.999976 
```

所以有 119 秒和 999976 微秒。因为您`datetime.utcnow()`以一点（24 微秒）的间隔进行了两次单独的调用。

# javascript - Jquery 用 Next 和 Back 链接替换 Div

> ID：12945755
> 
> 赞同：1
> 
> 时间：2012-10-18T01:17:32.563
> 
> 标签：javascript, jquery, html, menu, replace

我有一个 jquery 脚本，它在选择 href="#1" 时替换 div（child1 与 child2）。我将这些安排在一个菜单中，如下所示：

```
<div id=menu">
 <div class="menu_item">
      <a href="#" class="drop_menu"></a>
       <div id="parent">
          <div class="child1">Child 1 Contents</div>
          <div class="child2">Child 2 Contents</div>
       </div>
       <div id="replacepagelinks">
          <a href="#1">Replace Child 1 with Child 2</a>
          <a href="#2">Replace Child 2 with Child 1</a>
       </div>
 </div>
 <div class="menu_item">
      <a href="#" class="drop_menu"></a>
       <div id="parent">
          <div class="child1">Child 1 Contents</div>
          <div class="child2">Child 2 Contents</div>
       </div>
       <div id="replacepagelinks">
          <a href="#1">Replace Child 1 with Child 2</a>
          <a href="#2">Replace Child 2 with Child 1</a>
       </div>
 </div>
 <div class="menu_item"> etc.. </div> 
```

这是jQuery：

```
$('.child2, a[href="#1"]').hide() 
```

其中隐藏了适当的 div+link。

```
$('#replacepagelinks a').click(function(){
    $(this).hide().siblings().show()
    var w = this.hash.replace('#', '');
    $('#parent div.child'+w).show().siblings().hide()
}) 
```

替换`child1`为`child2`div 并将`a href`链接从 #1 更改为 #2。在这里，我希望`<a href="#1">Replace Child 1 with Child 2</a>`并且`<a href="#2">Replace Child 2 with Child 1</a>`在单独的类中，这样我就可以让它们在页面的任一侧作为“下一个”和“后退”链接工作，如下所示：

```
<div id="replacepagelinks">
    <div class="pagelink_left">
       <a href="#2">Back</a>
    </div>
    <div class="pagelink_right">
       <a href="#1">Next</a>
    </div>
    <div class="clear"></div>
</div> 
```

但是我对 jquery 的经验非常有限，所以我不知道我需要改变什么。

我也有 jquery 重置 div 以便每次通过 `<a href="#" class="drop_menu"></a>`它选择菜单项时总是首先显示`child1`正确的链接`child2`：

```
$(".drop_menu").on('click', function() {
    $(this).parent().find('.child1, a[href="#2"]').show().siblings().hide();
}); 
```

我的主要问题是我希望能够拥有超过 2 个 div 孩子，但不知道如何更新我的 jquery 以反映这一点。

1.在 child1 我只想`<a href="#1">Replace Child 1 with Child 2</a>`

2.在 child2 我想`<a href="#2">Replace Child 2 with Child 1</a>`AND`<a href="#3">Replace Child 2 with Child 3</a>`

3.在 child3 中，我想要`<a href="#3">Replace Child 3 with Child 2</a>`AND`<a href="#4">Replace Child 3 with Child 4</a>`

4.在 child4 我想要`<a href="#4">Replace Child 4 with Child 3</a>`AND `<a href="#5">Replace Child 4 with Child 5</a>`。

5.In child5 我只想`<a href="#5">Replace Child 5 with Child 4</a>`

所以每个页面都有一个“下一页”和“后退”链接，除了只有“下一个”链接的第一页和只有“后退”链接的最后一页。

使事情进一步复杂化 :) 一些菜单项有 2 个子 div，有些有 3 个子 div，有些有 4 个子 div。在这些情况下，我希望最后一页（分别为 2、3 和 4）仅显示 1 个返回上一页的链接。

谢谢你的帮助。皮亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:31:47.240

您可以使用 > [http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)来满足您的要求。

# image - 如何将背景转换为透明？

> ID：12945763
> 
> 赞同：127
> 
> 时间：2012-10-18T01:18:29.850
> 
> 标签：image

我没有任何图像处理/编辑工具的经验。我正在做一个项目，需要我将具有背景颜色（红色/蓝色/白色）的图像（小图标）转换为网站的透明。

![例子](../Images/c7ee393dc40a71f9c8f4d0f04c38df7e.png)

目标是将红色背景转换为透明。

1.  我应该考虑哪些图像编辑工具？
2.  如何过滤该背景颜色并使其透明？

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2012-10-20T14:22:11.743

我会推荐这个（刚刚通过[搜索](https://www.google.com/search?q=free%20transparent%20online)找到）：

1.  [http://lunapic.com/editor/?action=load](http://lunapic.com/editor/?action=load)
2.  浏览要上传的图片或输入文件的 URL（图片下方）
    [http://i.stack.imgur.com/2gQWg.png](https://i.stack.imgur.com/2gQWg.png)
3.  **编辑**菜单/**透明**（最后一个）
4.  点击红色区域
5.  看哪 :) 下面是你的图像，它只是一个透明的白色三角形......
    [在浏览器中拖动图像以查看可见性，
    灰色背景和边框不是图像的一部分]
    `[![your image made transparent](../Images/28872bf97553d22a39e5ba36bb2d216f.png)](https://i.stack.imgur.com/dk2jg.gif)`
6.  **文件**菜单/**保存图像**
    GIF/PNG/ICO 图像文件格式支持透明，JPG 不支持！

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-09-19T16:17:52.980

如果您需要命令行解决方案，可以使用 ImageMagick`convert`实用程序：

```
convert input.png -transparent red output.png 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-30T15:20:04.880

Paint.net 是一个允许透明背景的免费照片编辑工具。YouTube [http://www.youtube.com/watch?v=cdFpS-AvNCE](http://www.youtube.com/watch?v=cdFpS-AvNCE)上有一个简单的例子。如果您仍在使用 Windows XP SP2 并且这是一个问题，我首先建议您进行免费服务包升级。但是，如果这不是一个选项，那么您可以下载并尝试使用旧版本的 Paint.net。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-30T15:37:12.220

无需下载任何东西的快速解决方案是使用具有“魔棒工具”的在线编辑器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T01:40:31.970

对于 Photoshop，您需要下载 Photoshop 便携版....

# jquery - 你如何重新绑定 jQueryUI 工具提示？

> ID：12945764
> 
> 赞同：0
> 
> 时间：2012-10-18T01:18:37.083
> 
> 标签：jquery, jquery-ui, jquery-tooltip

我在我的一个页面上使用 jQueryUI 工具提示。

```
 $('.sourceItem').hover(function () {
            $(this).find('.tooltip').show();
            $(this).find('.tooltip').position({ at: 'bottom center', of: $(this), my: 'top' });
        });

        $('.sourceItem').mouseleave(function () {
            $('.tooltip').hide();
        }); 
```

这是我的html代码：

```
 <div id="sourceBoxInner">
                <div class="sourceItem" id="9003">
                    <img src="/Pictures/Fruit/apple.png" alt="apple w/ skin, raw"/><br />
                    <a href="#" class="linkToolTip" title="apple w/ skin, raw">apple w/ skin, raw</a>
                    <div class="tooltip">
                        <div class="arrow">
                            ▲&lt;/div>
                        <div class="text">apple w/ skin, raw<br /> 09003<br /> </div>
                    </div>
                </div>
                <div class="sourceItem" id="9004">
                    <img src="/Pictures/Fruit/apple.png" alt="apple w/out skin, raw"/><br />
                    <a href="#" class="linkToolTip" title="apple w/out skin, raw">apple w/out skin, raw</a>
                    <div class="tooltip">
                        <div class="arrow">
                            ▲&lt;/div>
                        <div class="text">apple w/out skin, raw<br /> 09004<br /> </div>
                    </div>
                </div>
    </div> 
```

到目前为止，一切正常，当我将鼠标悬停在工具提示上时，我可以看到它。

现在，我进行 ajax 调用以重新填充“sourceBoxInner”div。工具提示停止工作。我想我需要重新绑定它。所以在 ajax OnSuccess 方法中，我再次添加以下代码。但仍然无法正常工作。

```
 function OnSuccess() {

        $('.sourceItem').hover(function () {
            $(this).find('.tooltip').show();
            $(this).find('.tooltip').position({ at: 'bottom center', of: $(this), my: 'top' });
        });

        $('.sourceItem').mouseleave(function () {
            $('.tooltip').hide();
        });

    } 
```

**更新：**

我也尝试了以下代码，但仍然无法正常工作。

```
 function OnSuccess() {

        $(".sourceItem").unbind("hover").hover(function () {

            $(this).find('.tooltip').show();
            $(this).find('.tooltip').position({ at: 'bottom center', of: $(this), my: 'top' });

        });

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:25:46.473

你可以试试这个

```
$(document).on('mouseenter', '.sourceItem', function(){
    $(this).find('.tooltip').show();
    $(this).find('.tooltip').position({ at: 'bottom center', of: $(this), my: 'top' });
}).on('mouseleave', '.sourceItem', function(){
    $('.tooltip').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:26:04.847

您可以按照您的建议重新绑定，或者`.live()`如果您有旧版本的 jQuery（现已弃用），或者使用 jQuery `.on()`，这将是首选。

```
$(document).on({
    hover: function () {
        $(this).find('.tooltip').show();
        $(this).find('.tooltip').position({ at: 'bottom center', of: $(this), my: 'top' });
    },
    mouseleave: function () {
            $('.tooltip').hide();
    }
},'.sourceItem'); 
```

**编辑**：必须修复我的选择器

# javascript - 使用 RequireJS 加载模块及其所有插件

> ID：12945765
> 
> 赞同：1
> 
> 时间：2012-10-18T01:18:52.253
> 
> 标签：javascript, jquery, requirejs

有没有办法

```
require ['jquery'], ($) ->
  ... 
```

代替

```
require ['jquery', 'jquery-cookies', 'jquery-scroll', 'jquery-foo', jquery'bar'], ($) ->
  ... 
```

每一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:27:48.897

一种选择是使用插件定义一个新模块，即 jquery。

```
// new module in something like jqueryBundle.js
define(['jquery', 'jquery-cookies', 'jquery-scroll', 'jquery-foo', 'jquery-bar'],  function($) {
    return $;
}); 
```

然后你可以只需要 jqueryBundle 代替。

编辑：根据评论建议，我没有提到我的回答期望 jquery 插件是 amd 模块（由作者或由您包装）或已经通过 shim 配置配置：[http ://requirejs.org/docs/api.html #config-垫片](http://requirejs.org/docs/api.html#config-shim)

许多 jquery 插件不是 AMD 模块，但通常是简单 shim 配置的理想选择。对于一个小示例，请参阅我对另一个问题的回答：[Using require.js with Twitter Boostrap API and Backbone](https://stackoverflow.com/questions/12933466/using-require-js-with-twitter-boostrap-api-and-backbone/12935775#12935775)

# android - 如何让键盘显示返回键？

> ID：12945767
> 
> 赞同：5
> 
> 时间：2012-10-18T01:19:04.230
> 
> 标签：android, keyboard, return

我想我已经尝试了所有组合，但我无法让字母键盘显示返回键。它总是一个“完成”按钮，没有用。在 Nexus 7 (4.1) 上，情况更糟，并显示一个愚蠢的笑脸按钮和完成按钮，这对我的应用程序没有意义。只要我有一个返回按钮，就可以有一个完成按钮。这是我尝试过的众多选项之一：

```
<AutoCompleteTextView
    android:id="@+id/annotate_edit"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="15dp"
    android:layout_marginLeft="60dp"
    android:layout_marginRight="60dp"
    android:layout_marginTop="15dp"
    android:completionThreshold="1"
    android:inputType="textCapSentences|textImeMultiLine"
    android:imeOptions="actionDone"
    android:lines="1"
    android:maxLength="18"
    android:textSize="30px" /> 
```

我尝试过使用和不使用 imeOpitons 线，以及各种 inputType 选项，包括删除它。有一些选项可以使其成为搜索按钮（没有帮助），但没有列出任何使其成为返回键的选项。我也试过“lines=2”，但没有解决。还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:43:34.073

现在你已经设置了`imeOptions="actionDone"`。[您说您已尝试将其删除，但根据文档](http://developer.android.com/guide/topics/ui/controls/text.html#Actions)，所有这些都将其默认为`actionDone`再次。

尝试设置`imeOptions="actionNone"`。这应该不会让你采取任何行动并强制返回键。

但是，我不知道这本身就可以保证多行 AutoCompleteTextView 正常工作。我在一个应用程序中有一个，它在我所有的设备上都显示了一个返回键。不同之处在于返回键的行为。

例如，在我的 GNex (4.1) 上，当您按下回车键时，它会正确换行。

在我的 SGS2 (2.3) 上，按下它时没有任何反应。没有多行，没有完成。只是一个死按钮。

这可能是不同 API 中默认 EditText 样式的差异，因此您也应该尝试设置`inputType="textMultiLine"`. 和 之间可能存在细微差别`textImeMultiLine`。

# javascript - TypeError：对象在 IE8 / IE9 中不支持此属性或方法

> ID：12945769
> 
> 赞同：1
> 
> 时间：2012-10-18T01:19:10.003
> 
> 标签：javascript, actionscript-3, apache-flex, dojo, swfobject

我在 html/dojo 弹出窗口中动态嵌入了一个 flex swf。它在 FF 和 Chrome 中运行良好，但在 IE8/IE9 中我收到“TypeError：对象不支持此属性或方法”。在 IE 中第一次创建带有 swf 的弹出窗口时一切正常。但是，一旦我隐藏弹出窗口并再次打开它，然后尝试在 flex 中调用 actionscript 函数，它就会引发错误。任何帮助将不胜感激。以下是代码片段：

```
var srchSuggestDlg;
var srchDlg;
var isSuggSwfInit = false;

/* Called on key up for the search box widget or when search arrow button is clicked
* Displays search suggestions inside popover below the search widget 
*/

cpm.home.index.searchKeyUp = function(evt) {

var srchInput = dojo.byId('xwt_widget_uishell_Header17_0_search_searchTextAP');

if(srchInput.value.length<3)
    return;

if(srchSuggestDlg && srchSuggestDlg.isShowingNow)
{
    try
    {
        swfobject.getObjectById("srchSuggSwf").updateSearchInFlex(srchInput.value);
    }
    catch(e){
        console.error("swf may not be ready 1",e);
    }
    return;
}

if(srchSuggestDlg == null)
{
    srchSuggestDlg = new xwt.widget.layout.Popover({pinnable: false, title: "Suggestions", sideAlign: false, autofocus: false, showHelp: false});
    var divx=dojo.create("div");
    divx.innerHTML="<div id='srchSuggDiv'></p></div>";
    srchSuggestDlg.containerNode.appendChild(divx);

    srchSuggestDlg.openAroundNode(srchInput);

    var flashvars = {swfId:"srchSuggSwf", searchString:srchInput.value};
    var params = {};
    params.quality = "high";
    params.bgcolor = "#ffffff";
    params.allowscriptaccess = "sameDomain";
    params.allowfullscreen = "true";
    var attributes = {};
    attributes.id = "srchSuggSwf";
    attributes.name = "srchSuggSwf";
    attributes.align = "middle";
    params.wmode="window";

    var cachecontrol = Math.floor(Math.random()*99999);

    swfobject.embedSWF("pages/modules/monitor/flex/SearchSuggestion.swf?"+cachecontrol,"srchSuggDiv","200","140","9.0.0","playerProductInstall.swf",flashvars, params, attributes);
    swfobject.createCSS("#srchSuggDiv", "display:block;text-align:left;");

}
else
{
    srchSuggestDlg.openAroundNode(srchInput);
    try
    {
        var srchInput1 = dojo.byId('xwt_widget_uishell_Header17_0_search_searchTextAP');
        //dojo.byId("srchSuggSwf").updateSearchInFlex(srchInput1.value);
        swfobject.getObjectById("srchSuggSwf").updateSearchInFlex(srchInput1.value);
    }
    catch(e) {
        console.error("swf may not be ready 2",e);
    }
}
};

/* Called from flex once flex swf is initialized 
*/

cpm.home.index.suggSwfInit = function(value){
var srchInput = dojo.byId('xwt_widget_uishell_Header17_0_search_searchTextAP');
try
{
    dojo.byId("srchSuggSwf").updateSearchInFlex(srchInput.value);
}
catch(e){
    console.error("swf may not be ready in 3",e);
}
}; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-29T11:29:48.620

常见问题，下载安装 Node.js = [https://nodejs.org/en/download/](https://nodejs.org/en/download/)

# objective-c - UITableViewCell 上显示DeleteConfirmation 的奇怪行为

> ID：12945771
> 
> 赞同：2
> 
> 时间：2012-10-18T01:19:17.633
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

A`UITableViewCell`有一个`showingDeleteConfirmation`可以读取的标志。顾名思义，这可以让您知道单元格是否显示“删除”按钮。此删除按钮有两种显示方式：

1.  扫过一行。
2.  进入单元格的编辑模式，然后按行左侧的“-”图标。

我设置了一些日志记录来检查单元格中这个标志的值`willTransitionToState:`。我发现了一些让我困惑的东西。

在示例 (1)`showingDeleteConfirmation`中，`YES`在跨行滑动和退出单元格编辑时（通过在滑动后触摸行外）。

在示例 (2) 中，`showingDeleteConfirmation`是`NO`在触摸“-”图标时，但`YES`在退出单元格编辑时（再次通过触摸行外）。

首先，有人可以确认是这种情况，而且这不是我的`UITableViewCell`子类的怪癖。

为什么这会不一致？在我看来，行为 (2) 更好，因为它描述了当时屏幕上的`willTransitionToState:`内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:28:49.253

您是否尝试过检查您的逻辑`didTransitionToState:`？在您点击减号按钮的情况下，它似乎是有道理的`NO`，稍后一旦动画完成，它会变为`YES`.

# c - 如何在 C 中检测您的机器是否为 32 位

> ID：12945772
> 
> 赞同：2
> 
> 时间：2012-10-18T01:19:18.037
> 
> 标签：c, int

所以我正在复习考试，我陷入了这个问题：

* * *

2.67 ◆◆ 你的任务是编写一个过程int_size_is_32()，当它在一个int 为32 位的机器上运行时产生1，否则产生0。不允许使用 sizeof 运算符。这是第一次尝试：

```
1 /* The following code does not run properly on some machines */
2 int bad_int_size_is_32() {
3 /* Set most significant bit (msb) of 32-bit machine */
4 int set_msb = 1 << 31;
5 /* Shift past msb of 32-bit word */
6 int beyond_msb = 1 << 32;
7
8 /* set_msb is nonzero when word size >= 32
9 beyond_msb is zero when word size <= 32 */
10 return set_msb && !beyond_msb;
11 } 
```

但是，当在 32 位 SUNSPARC 上编译和运行时，此过程返回 0。以下编译器消息向我们指出了问题：警告：左移计数 >= 类型宽度

A. 我们的代码在哪些方面不符合 C 标准？

B. 修改代码以在任何数据类型 int 至少为 32 位的机器上正常运行。

C. 修改代码以在任何数据类型 int 至少为 16 位的机器上正常运行。

****__ *_* __ *_* ____**我的回答：**

 **A：当我们在第 4 行移位 31 时，我们溢出了，bec 根据无符号整数标准，我们可以表示的最大无符号整数是 2^31-1

B：在第 4 行 1<<30

C：在第 4 行 1<<14 和在第 6 行 1<<16

我对吗？如果不是，为什么？谢谢！

****__ *_* __ *_* ____**第二个暂定答案：**

 **B：在第 4 行 (1<<31)>>1 和在第 6 行： int beyond_msb = set_msb+1; 我想这次我可能是对的:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T01:24:25.963

> A：当我们在第 4 行移位 31 时，我们溢出了，bec 根据无符号整数标准，我们可以表示的最大无符号整数是 2^31-1

错误出现在第 6 行，而不是第 4 行。编译器消息准确解释了原因：移位大于类型大小的位数是未定义的行为。

> B：在第 4 行 1<<30
> 
> C：在第 4 行 1<<14 和在第 6 行 1<<16

这两个更改都会导致错误不出现，但也会使函数给出不正确的结果。在修复它之前，您需要了解该功能是如何工作的（以及它是如何*不工作的）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T19:21:03.150

首先，移位 30 不会产生任何溢出，因为您可以移位的最大值是字长 w-1。因此，当 w = 32 时，您可以移动到 31。

当您将其移动 32 位时会发生溢出，因为 lsb 现在将移动到超出范围的第 33 位。

所以问题出在第 6 行而不是第 4 行。

对于 B。

```
0xffffffff + 1 
```

如果它是 32 位，则结果为 0，否则为一些 nozero no。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:18:30.127

绝对没有办法在运行时测试 C 中带符号类型的大小。这是因为溢出是未定义的行为；您无法判断是否发生了溢出。如果你使用`unsigned int`，你可以只计算在结果变为零之前你可以将一个从 1 开始的值加倍的类型。

如果您想在编译时而不是运行时进行测试，这将起作用：

```
struct { int x:N; }; 
```

其中`N`被连续更大的值替换。只要`N`不大于 的宽度，编译器就必须接受程序`int`，并在大于 时以诊断/错误拒绝它`N`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T01:08:05.300

您应该能够通过拆分左移来遵守 C 标准。

乙 -

将第 6 行替换为

```
int beyond_msb = (1 << 31) << 1; 
```

C -

将第 4 行替换为

```
int set_msb = ((1 << 15) << 15) << 1 ; 
```

将第 6 行替换为

```
int beyond_msb = ((1 << 15) << 15) << 2; 
```

此外，作为问题的扩展，以下内容应同时满足 B 和 C，并保持运行时错误安全。一次左移一点，直到它恢复到全零。

```
int int_size_is_32() {
//initialise our test integer variable.
int x = 1;  
//count for checking purposes
int count = 0;
//keep shifting left 1 bit until we have got pushed the 1-bit off the left of the value type space.
while ( x != 0 ) {
    x << 1   //shift left
    count++;  
}

return (count==31);
} 
```****

# php - PHP 邮件脚本实际上并没有发送邮件

> ID：12945774
> 
> 赞同：1
> 
> 时间：2012-10-18T01:19:50.647
> 
> 标签：php, forms, email

我在使用此电子邮件表单时遇到问题。没有 php 错误代码或任何东西，电子邮件永远不会送达...整个代码示例是包含在我网站的多个页面上的文件。表单提交到它所在的任何页面，并且可以工作，除了我不知道为什么它不会发送电子邮件的事实。它似乎没有处理包含发送电子邮件代码的 else 语句。

```
<div class="green_box" id="contact_us">
<h3>CONTACT US</h3>
<div class="white_box">

<?php
if ($_POST['submitted']==1) {  
    $errormsg = ""; //Initialize errors  
    if ($_POST[your_name]){  
        $your_name = $_POST[your_name]; 
    }  
    else {  
        $errormsg = "You did not enter your Name";  
    }  
    if ($_POST[your_email]){  
        $your_email = $_POST[your_email];
    }  
    else {  
        if ($errormsg){ //If there is already an error, add next error  
            $errormsg = $errormsg . " or your Email";  
        }else{  
            $errormsg = "You did not enter your Email";  
        }  
    }
    if ($_POST[your_message]){  
        $your_message = $_POST[your_message];
    }  
    else {  
        if ($errormsg){ //If there is already an error, add next error  
            $errormsg = $errormsg . " or your Message";  
        }else{  
            $errormsg = "You did not enter your Message"; 
        }  
    }
    if (strlen($errormsg) > 1) {
        echo "<p><strong>" . $errormsg . ".</strong><br>Please try again.</p>";
    }
    else {
        $email_to = "willyfresh@gmail.com"; // recipient inbox
        $email_subject = "Fore A Partners Website Contact Form";
        $email_message = "Form details below.\n\n";

        function clean_string($string) {
          $bad = array("content-type","bcc:","to:","cc:","href");
          return str_replace($bad,"",$string);
        }

        $email_message .= "Name: ".clean_string($your_name)."\n";
        $email_message .= "Email: ".clean_string($your_email)."\n";
        $email_message .= "Comments: ".clean_string($your_message)."\n";

        $headers = 'From: '.$your_email."\r\n".
        'Reply-To: '.$your_email."\r\n" .
        'X-Mailer: PHP/' . phpversion();
        @mail($email_to, $email_subject, $email_message, $headers);  
        echo "<p>Thank you for contacting us. We will be in touch with you very soon.</p>";
    }
}
?>

<form name="contactform" method="post">
<p>Name<br><input type="text" name="your_name" maxlength="80" size="45"></p>
<p>Email<br><input type="text" name="your_email" maxlength="80"  size="45"></p>
<p>Message<br><textarea name="your_message" maxlength="1000" rows="6" cols="30"></textarea></p>
<input type="hidden" name="submitted" value="1">
<p><input type="image" src="../btn_submit.png" alt="Submit" name="submit"></p>
</form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:26:11.950

**更新**

它可能无法正常工作的原因有多种。你在什么类型的服务器上运行？您可能需要在 php.ini 中配置 SMTP 属性，但如果不了解更多信息，就很难说。

我个人更喜欢 PEAR 邮件解决方案，它更健壮并且允许我轻松配置 SMTP 信息。我清理了您的代码并实现了一个适用于我的示例 PEAR 邮件脚本。您很可能已经安装了 PEAR 邮件，但是，如果您需要下载并安装它，请访问此处： http: [//pear.php.net/package/Mail/download](http://pear.php.net/package/Mail/download)

```
<?php
if ($_POST) {
    if ($_POST['submitted']==1) {  
        $errormsg = ""; //Initialize errors  
        if ($_POST['your_name']){  
            $your_name = $_POST['your_name']; 
        }  
        else {  
            $errormsg = "You did not enter your Name";  
        }  
        if ($_POST['your_email']){  
            $your_email = $_POST['your_email'];
        }  
        else {  
            if ($errormsg){ //If there is already an error, add next error  
                $errormsg = $errormsg . " or your Email";  
            }else{  
                $errormsg = "You did not enter your Email";  
            }  
        }
        if ($_POST['your_message']){  
            $your_message = $_POST['your_message'];
        }  
        else {  
            if ($errormsg){ //If there is already an error, add next error  
                $errormsg = $errormsg . " or your Message";  
            }else{  
                $errormsg = "You did not enter your Message"; 
            }  
        }
        if (strlen($errormsg) > 1) {
            echo "<p><strong>" . $errormsg . ".</strong><br>Please try again.</p>";
        }
        else {
             // recipient inbox
            $email_subject = "Fore A Partners Website Contact Form";
            $email_message = "Form details below.\n\n";

            function clean_string($string) {
              $bad = array("content-type","bcc:","to:","cc:","href");
              return str_replace($bad,"",$string);
            }

            $email_message .= "Name: ".clean_string($your_name)."\n";
            $email_message .= "Email: ".clean_string($your_email)."\n";
            $email_message .= "Comments: ".clean_string($your_message)."\n";            

            // INCLUDE PEAR MAIL
            require_once "Mail.php";
            require_once('Mail\mime.php');

            // CONFIGURE SMTP SETTINGS
            $email_to = "willyfresh@gmail.com";
            $sender = "emailfrom@example.com";
            $host = "mail.example.com";
            $username = "emailfrom@example.com";
            $password = "password";

            $crlf = "\n";       
            $headers = array(
                'From' => $sender,
                'To' => $email_to,
                'Reply-To' => $your_email,
                'Subject' => $email_subject
            );  
            // Creating the Mime message
            $mime = new Mail_mime($crlf);   
            // Setting the body of the email
            $mime->setTXTBody($your_message);
            $mime->setHTMLBody($your_message);  
            $body = $mime->get();
            $headers = $mime->headers($headers);    
            // Sending the email
            $mail =& Mail::factory('smtp',
            array ('host' => $host,
                'auth' => true,
                'username' => $username,
                'password' => $password
            ));
            $mail->send($email_to,$headers,$body);

            echo "<p>Thank you for contacting us. We will be in touch with you very soon.</p>";
        }
    }
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<div class="green_box" id="contact_us">
<h3>CONTACT US</h3>
<div class="white_box">
<form name="contactform" method="post">
<p>Name<br><input type="text" name="your_name" maxlength="80" size="45"></p>
<p>Email<br><input type="text" name="your_email" maxlength="80"  size="45"></p>
<p>Message<br><textarea name="your_message" maxlength="1000" rows="6" cols="30"></textarea></p>
<input type="hidden" name="submitted" value="1">
<p><input type="image" src="../btn_submit.png" alt="Submit" name="submit"></p>
</form>
</div>
</div>
</body>
</html> 
```

我看到的第一件事是你需要抓住你的帖子，比如 $_POST['your_name'] 而不是 $_POST[your_name]

# ruby - 数组到数组的散列

> ID：12945775
> 
> 赞同：1
> 
> 时间：2012-10-18T01:20:08.217
> 
> 标签：ruby, arrays, hash

我有一个从表中得到的值数组：

```
arr = ["One", "0", "31.948", "0", "6.94",
       "Two", "0", "31.948", "0", "6.94",
       "Three", "0", "23.961", "0", "5.21"] 
```

我需要获取数组的哈希：

```
hash = {
  "One" => ["0", "31.948", "0", "6.94"],
  "Two" => ["0", "31.948", "0", "6.94"],
  "Three" => ["0", "23.961", "0", "5.21"]
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T01:27:17.307

假设您想要每个值的数组，这将做到这一点。

```
Hash[arr.each_slice(5).map{|k, *v| [k, v]}] 
```

# android - Android 的 MKOverlayView 替代品

> ID：12945776
> 
> 赞同：0
> 
> 时间：2012-10-18T01:20:16.317
> 
> 标签：android, android-mapview

有没有办法在 Android 中绘制地图叠加层（如 iOS MKOverlayView）？（MapView 教程）[ [https://developers.google.com/maps/documentation/android/hello-mapview]](https://developers.google.com/maps/documentation/android/hello-mapview])仅涵盖逐项叠加项目，但我需要这样的东西：（[来源：][[cluttr.com](http://www.cluttr.com/wp-content/uploads/2011/12/fireworksMap.jpg)][）][![...](../Images/f396f61d25f88a3338c6eda88198cb33.png)](https://i.stack.imgur.com/QhTw2.jpg)

换句话说，我想在谷歌地图上绘制我自己的地图，所以，应该有像 drawMap(Rect, zoomScale, ...); 这样的方法。有什么建议吗？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:50:39.400

看起来Android中没有任何特殊的魔术界面......所以，我将使用标准地图并从头开始实现瓦片渲染引擎。用这样的东西覆盖和覆盖 draw 方法：

```
@Override
public void draw(Canvas canvas, MapView mapV, boolean shadow){
    if(shadow){
        GeoPoint gpos = new GeoPoint(selLat,selLon);
        Projection projection = mapV.getProjection();
        Point pt = new Point();
        projection.toPixels(gpos, pt);

        [...]

        super.draw(canvas,mapV,shadow);
    }
} 
```

# ruby - Ruby Koans：正则表达式括号“捕获”匹配的内容？

> ID：12945779
> 
> 赞同：5
> 
> 时间：2012-10-18T01:20:58.483
> 
> 标签：ruby

我正在浏览 about_regular_expressions.rb 并且不明白这里发生了什么：

```
def test_variables_can_also_be_used_to_access_captures
    assert_equal "Gray, James", "Name:  Gray, James"[/(\w+), (\w+)/]
    assert_equal "Gray", $1
    assert_equal "James", $2
end 
```

在我*看来*，正则表达式中括号的使用在幕后创建了两个新变量（$1 和 $2）。

它是否正确？

但后来我这样做了：

```
def test_variables_can_also_be_used_to_access_captures
    assert_equal "Gray, James", "Name:  Gray, James"[/(\w+), (\w+)/]
    assert_equal "Smith, Bobert", "Name:  Smith, Bobert"[/(\w+), (\w+)/]
    assert_equal "Smith", $1
    assert_equal "Bobert", $2
end 
```

它捕获了“史密斯”和“博伯特”。我猜每次使用带括号的新正则表达式时，以前的值都会被覆盖？

如果我尝试只捕捉一个词：

```
def test_variables_can_also_be_used_to_access_captures
    assert_equal "Gray, James", "Name:  Gray, James"[/(\w+), (\w+)/]
    assert_equal "Smith, Bobert", "Name:  Smith, Bobert"[/(\w+), (\w+)/]
    assert_equal "Smith", $1
    assert_equal "Bobert", $2
    assert_equal "Susan,", "Name:  Susan, whatever"[/(\w+),/]
    assert_equal "Susan", $1
    assert_equal nil, $2
end 
```

2 美元不见了……（不再是“鲍勃”）

任何人都可以阐明引擎盖下发生的事情吗？或者指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T01:36:36.470

你说的对。每次匹配正则表达式时，都会`$~, $&, ..., $1, $2, ...`覆盖全局变量。在您的上一个示例中，正则表达式没有任何要匹配的内容，`$2`因为它没有第二个`(...)`位置，因此`nil`被分配为`$2`.

当您想交错使用多个匹配的结果时，我使用的技术是将匹配数据保留为变量。也就是说，在第一次正则表达式匹配之后，立即分配一个变量`match1 = $~`。然后，继续下一个正则表达式匹配并 do `match2 = $~`，依此类推。稍后，您可以从这些变量中提取匹配的结果。例如，在进行了几次正则表达式匹配之后，如果您想返回`$1`在第一次正则表达式匹配时分配的结果，您可以通过`match1[1]`等调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:37:45.417

检查这个：

```
"Name:  Gray, James"[0]    # => "N"
"Name:  Gray, James"[/w*/] # => "Name" 
```

在 ruby​​ 中，可以通过索引访问字符串，该索引接受多种类型的对象，也包括正则表达式。

看看语言[参考](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)。

# clojure - 轮询文件以进行更改？

> ID：12945780
> 
> 赞同：6
> 
> 时间：2012-10-18T01:21:14.950
> 
> 标签：clojure

这通常是我希望轮询文件以进行更改的模式（上次写入时）。当文件确实从其先前的值更改时，我希望执行一些功能。某种形式的东西。

```
(poll-for-changes file-str on-change-fx current-value) 
```

在哪里

1.  `file-str`只是一个指定文件位置的字符串
2.  `on-change-fx``file-str`是文件 at更改时应调用的函数。让我们说`on-change-fx`应该将指向的 File 对象`file-str`作为参数。
3.  `current-value`文件的当前值，以毫秒为单位。您可以设置为 0 以保证此函数将至少运行一次，或者设置为实际值以仅在您实际检测到更改时运行此函数。

我希望以尽可能最清晰、最简洁、Clojurist 的方式实现这个功能。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:34:49.030

如果您要轮询一个目录或文件并对其采取行动，我认为[`watchtower`](https://github.com/ibdknox/watchtower)这很不错。

Java 7 有一个 WatchService，它使用文件系统事件来响应更改。在这种情况下，您根本不进行轮询，而是阻止未来的文件事件。我认为 Clojure 中没有任何项目可以利用它，尽管我花了一些时间玩弄它来编写一个[小型库](https://github.com/klauern/java-watcher.clj)。它的来源在[这里](https://github.com/klauern/java-watcher.clj/blob/master/src/com/klauer/java_watcher/core.clj)

我并没有声称我的库是完整的，但它确实使用了 Java 7 服务，因此您可以在自己的项目中使用它来获得灵感。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T02:11:54.270

您可以在这里使用两种方法：

1.  使用 Java 互操作和[Java 7 `WatchService`API](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。

2.  检查并从[现有的惯用、简洁的代码](https://github.com/stuartsierra/lazytest/blob/master/modules/lazytest/src/main/clojure/lazytest/watch.clj)（在本例中为 Stuart Sierra）中学习，这些代码可以执行您想要的操作。请注意，它还使用 Java 互操作。

我认为选项 #1 是您最好的选择，并且该功能的实现应该是直截了当的。您可能希望使用`doto`and`->`和`->>`宏来使代码更具可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T13:39:30.987

现在我可能会[`hara.io.watch`](http://docs.caudate.me/hara/hara-io-watch.html)先尝试。

否则有很多选择（如`hara`文档中所述）：

*   [clojure-watch](https://github.com/derekchiang/Clojure-Watch)
*   [目录](https://github.com/juxt/dirwatch)
*   [鹰](https://github.com/wkf/hawk)
*   [岗楼](https://github.com/ibdknox/watchtower)
*   [java-watcher](https://github.com/klauern/java-watcher.clj)
*   [全景](https://github.com/xsc/panoptic)
*   [大城](https://github.com/rplevy/ojo)
*   [文件事件](https://github.com/Raynes/filevents)

并且可以从中提取一些代码：

*   [莱米杰](https://github.com/marick/lein-midje)
*   [ns-跟踪器](https://github.com/weavejester/ns-tracker)
*   [懒惰测试](https://github.com/stuartsierra/lazytest)

您也可以执行`hara`并包装[java.nio.file.WatchService](https://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)。

# visual-studio-2010 - Visual Studio 2010 打不开项目类型() 此版本不支持

> ID：12945784
> 
> 赞同：2
> 
> 时间：2012-10-18T01:22:08.050
> 
> 标签：visual-studio-2010

项目正在 1 号 PC 上工作。将项目复制到外部驱动器并尝试从 2 号 PC 加载项目。两台 PC 都安装了类似的 VS2010 高级版。可以在本地正常运行网站。VS2010 打开项目时出现以下错误。

无法打开visual studio 2010，因为此版本的应用程序不支持其项目类型（）

错误表示 2 号 PC 上没有安装某些东西。但是我怎样才能找出缺少的软件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T02:50:41.600

作为自定义 Visual Studio 安装的一部分，未选中 Visual Web Developer 复选框。进行更改/修复并勾选该框可以解决问题。奇怪 - 其他 web 项目加载正常。这是唯一出错的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:26:59.220

在这工作的计算机上，转到：

> 工具 > 扩展

这应该会为您提供已安装的扩展程序列表，您可以将其与无法使用的计算机进行交叉引用。

我猜你有一个 MVC 项目并且没有在第二台机器上安装 ASP.NET MVC。

# python - 从空的 MySQL 查询结果返回列名

> ID：12945785
> 
> 赞同：0
> 
> 时间：2012-10-18T01:22:24.633
> 
> 标签：python, python-3.x, mysql-connector

我正在使用带有 MySQL/Connector 1.0.7 模块的 Python 3.2.3。如果 MySQL 查询返回空结果，有没有办法返回列名？

例如。假设我有这个查询：

```
SELECT 
`nickname` AS `team`,
`w` AS `won`,
`l` AS `lost`
WHERE `w`>'10' 
```

然而，如果没有人超过 10 岁，它显然不会返回任何内容。现在，我知道我可以检查结果是否为`None`，但是，**我可以让 MySQL 返回列名和 NULL 值吗？**

如果您很好奇，我想知道这是否可能的原因是因为我正在根据列名动态构建字典。因此，如果没有人超过 10 岁，上述内容最终会看起来像这样......

```
[{'team':None,'won':None,'lost':None}] 
```

看起来像这样，如果它发现 3 个超过 10 的团队......

```
[{'team':'Tigers','won':14,'lost':6},
 {'team':'Cardinals','won':12,'lost':8},
 {'team':'Giants','won':15,'lost':4}] 
```

如果这种事情是可能的，那么我就不必在整个代码中编写大量异常检查，以防空字典到处都是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:34:25.020

您可以先使用 DESC table_name，您应该在第一列中获取列名

此外，您已经知道 dict 中的键，因此您可以自己构建，然后在结果有值时将内容附加到它。

```
[{'team':None,'won':None,'lost':None}] 
```

但是我看不出你为什么需要这个。如果你有一个`list of dictionaries`，我猜你会有 for 循环操作。For 循环不会对空列表执行任何操作，因此您不必担心异常检查

如果你必须做类似的事情，`result[0]['team']`那么你一定要检查是否`len(result)>0`

# gxt - 如何在 GXT 中更改状态小部件的文本大小

> ID：12945788
> 
> 赞同：0
> 
> 时间：2012-10-18T01:22:58.023
> 
> 标签：gxt, java-6

我需要为包含网格的 FieldSet 创建一条信息消息。我正在使用以下方式设置消息：

```
Status status = new Status();
status.setText("You can choose max 40 persons");
status.addStyleName("x-form-info-tip"); 
```

但是在输出中，文本看起来非常大，那么如何更改此状态消息的文本大小？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:55:34.093

尝试

status.setAttribute("字体大小","45px");

# java - 如何将 Google 登出同步到 GAE 登出

> ID：12945789
> 
> 赞同：0
> 
> 时间：2012-10-18T01:23:26.257
> 
> 标签：java, google-app-engine

> **可能重复：**
> [如何在我的 GAE 网站上检测已从 Google 注销的用户](https://stackoverflow.com/questions/12930186/how-to-detect-user-already-logged-out-from-google-at-my-gae-website)

怎么做：如果我想从 Google 网站上单击“退出”后退出我的 GAE 应用程序。我希望我的 GAE 身份与 Google 网站同步。

# android - Gridview - 单击 gridview 项目以在 imageview 中显示图像

> ID：12945794
> 
> 赞同：1
> 
> 时间：2012-10-18T01:23:49.697
> 
> 标签：android, json, gridview, imageview, onitemclicklistener

[我从http json数据](http://wptrafficanalyzer.in/blog/android-lazy-loading-images-and-text-in-listview-from-http-json-data/)按照这个toturial Android Lazy Loading images and text in listview ，现在我将listview更改为gridview。

我的问题是

我想单击 gridview 项目并在 imageview 中显示图像

主要活动

```
public class MainActivity extends Activity {

GridView gridView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    String strUrl = "http://ta.wptrafficanalyzer.in/demo1/first.php/countries/";
    DownloadTask downloadTask = new DownloadTask();
    downloadTask.execute(strUrl);

    gridView = (GridView) findViewById(R.id.lv_countries);
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int positon,
                long id) {
            Toast.makeText(getApplicationContext(), "welcome to hello gridview", Toast.LENGTH_SHORT).show();
        }
    });

}

private String downloadUrl(String strUrl) throws IOException{
    String data = "";
    InputStream iStream = null;
    try{
        URL url = new URL(strUrl);
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.connect();
        iStream = urlConnection.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(iStream));
        StringBuffer sb  = new StringBuffer();
        String line = "";
        while( ( line = br.readLine())  != null){
            sb.append(line);
        }

        data = sb.toString();
        br.close();

    }catch(Exception e){
        Log.d("Exception while downloading url", e.toString());
    }finally{
        iStream.close();
    }

    return data;
}

private class DownloadTask extends AsyncTask<String, Integer, String>{
    String data = null;
    @Override
    protected String doInBackground(String... url) {
        try{
            data = downloadUrl(url[0]);
        }catch(Exception e){
            Log.d("Background Task",e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String result) {
        ListViewLoaderTask listViewLoaderTask = new ListViewLoaderTask();
        listViewLoaderTask.execute(result);
    }
}

private class ListViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter>{

    JSONObject jObject;
    @Override
    protected SimpleAdapter doInBackground(String... strJson) {
        try{
            jObject = new JSONObject(strJson[0]);
            CountryJSONParser countryJsonParser = new CountryJSONParser();
            countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("JSON Exception1",e.toString());
        }

        CountryJSONParser countryJsonParser = new CountryJSONParser();
        List<HashMap<String, Object>> countries = null;

        try{
            countries = countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("Exception",e.toString());
        }

        String[] from = { "country","flag","details"};
        int[] to = { R.id.tv_country,R.id.iv_flag,R.id.tv_country_details};
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), countries, R.layout.lv_layout, from, to);

        return adapter;
    }

    @Override
    protected void onPostExecute(SimpleAdapter adapter) {

        gridView.setAdapter(adapter);

        for(int i=0;i<adapter.getCount();i++){
            HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
            String imgUrl = (String) hm.get("flag_path");
            ImageLoaderTask imageLoaderTask = new ImageLoaderTask();

            HashMap<String, Object> hmDownload = new HashMap<String, Object>();
            hm.put("flag_path",imgUrl);
            hm.put("position", i);

            imageLoaderTask.execute(hm);
        }
    }
}

private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

    @Override
    protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

        InputStream iStream=null;
        String imgUrl;
        imgUrl = (String) hm[0].get("flag_path");
        int position = (Integer) hm[0].get("position");

        URL url;
        try {
            url = new URL(imgUrl);
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.connect();
            iStream = urlConnection.getInputStream();

            File cacheDirectory = getBaseContext().getCacheDir();
            File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+position+".png");
            FileOutputStream fOutStream = new FileOutputStream(tmpFile);

            Bitmap b = BitmapFactory.decodeStream(iStream);
            b.compress(Bitmap.CompressFormat.PNG,100, fOutStream);

            fOutStream.flush();
            fOutStream.close();
            HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

            hmBitmap.put("flag",tmpFile.getPath());
            hmBitmap.put("position",position);

            return hmBitmap;

        }catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(HashMap<String, Object> result) {
        String path = (String) result.get("flag");
        int position = (Integer) result.get("position");

        SimpleAdapter adapter = (SimpleAdapter ) gridView.getAdapter();
        HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(position);
        hm.put("flag",path);

        adapter.notifyDataSetChanged();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

国家JSONParser.java

```
public class CountryJSONParser {

public List<HashMap<String,Object>> parse(JSONObject jObject){

    JSONArray jCountries = null;
    try {
        jCountries = jObject.getJSONArray("countries");
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return getCountries(jCountries);
}

private List<HashMap<String, Object>> getCountries(JSONArray jCountries){
    int countryCount = jCountries.length();
    List<HashMap<String, Object>> countryList = new ArrayList<HashMap<String,Object>>();
    HashMap<String, Object> country = null;

    for(int i=0; i<countryCount;i++){
        try {
            country = getCountry((JSONObject)jCountries.get(i));
            countryList.add(country);

        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    return countryList;
}

private HashMap<String, Object> getCountry(JSONObject jCountry){

    HashMap<String, Object> country = new HashMap<String, Object>();
    String countryName = "";
    String flag="";
    String language = "";
    String capital = "";
    String currencyCode = "";
    String currencyName = "";

    try {
        countryName = jCountry.getString("countryname");
        flag = jCountry.getString("flag");
        language = jCountry.getString("language");
        capital = jCountry.getString("capital");
        currencyCode = jCountry.getJSONObject("currency").getString("code");
        currencyName = jCountry.getJSONObject("currency").getString("currencyname");

        String details =        "Language : " + language + "\n" +
                            "Capital : " + capital + "\n" +
                            "Currency : " + currencyName + "(" + currencyCode + ")";

        country.put("country", countryName);
        country.put("flag", R.drawable.blank);
        country.put("flag_path", flag);
        country.put("details", details);

    } catch (JSONException e) {
        e.printStackTrace();
    }
    return country;
}

} 
```

完成后，gridview 显示图像不正确

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" > 
```

活动人.xml

```
<GridView
    android:id="@+id/lv_countries"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
    tools:context=".MainActivity" /> 
```

ly_layout.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/iv_flag"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/str_iv_flag" /> 
```

![在此处输入图像描述](../Images/2bf0e17d49e272e44639992736280d9c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:15:44.540

在gridview`onClickListener`中获取点击项目的数据

```
gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int positon,
                long id) {
HashMap<String, Object> hm = gridView.getAdapter().getPosition(positon);

   String imgPath = (String) hm.get("flag"); //get downloaded image path
Intent i = new Intent(yourActivityContext, NewActivityToDisplayImage.class); //start new Intent to another Activity.
i.putExtra("ClickedImagePath", imgPath ); //put image link in intent.
startActivity(i);

        }
    }); 
```

在`NewActivityToDisplayImage`获取图像路径并设置为 imageview。

```
public class NewActivityToDisplayImage extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);

        String imagePath = getIntent().getStringExtra("ClickedImagePath"); //get image path from post activity
        if (imagePath != null && !imagePath.isEmpty) {
            File imgFile = new File(imagePath);
            if (imgFile.exists()) {

                Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());

                ImageView myImage = (ImageView) findViewById(R.id.imageviewTest);
                myImage.setImageBitmap(myBitmap);

            }

        }

    }} 
```

# sql - 如何将我的 cfquery 分组到多个列上？

> ID：12945795
> 
> 赞同：5
> 
> 时间：2012-10-18T01:24:15.330
> 
> 标签：sql, coldfusion, coldfusion-8

我需要将我的查询分组到多个列匹配的位置。例如，对日期、类别和描述匹配的所有行进行分组。我知道在对一列进行分组时如何使用 cfoutput 分组，例如：

```
<cfoutput query="myQry" group="date">
  #date#
  <cfoutput>
    #detail#
  </cfoutput>
</cfoutput> 
```

但是，我想在多列匹配的地方分组，如下所示：

```
<cfoutput query="myQry" group="date,category,description">
  #date# #category# #description#
  <cfoutput>
    #detail#
  </cfoutput>
</cfoutput> 
```

我知道 cfoutput 分组不像上面那样工作。那么如何在多个列上进行分组呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T01:48:47.727

您添加额外的`<cfoutput group="">`标签。

```
<cfoutput query="myQry" group="date">
 <cfoutput group="category">
  <cfoutput group="description">
   #date# #category# #description#
   <cfoutput>
    #detail#
   </cfoutput>
  </cfoutput>
 </cfoutput>
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T02:02:05.903

看起来您对 Matt 有一个答案，但如果您对纯 sql 方法感到好奇：这会创建一个“虚拟”列来执行“单一”分组，将结果连接回原始表，并使用 distinct摆脱重复。丑陋，但仍然有点整洁，我认为:)

```
postgres=# create table myTable(col1 int, col2 int, val int);
CREATE TABLE
postgres=#
postgres=# insert into myTable values(1, 1, 1);
INSERT 0 1
postgres=# insert into myTable values(1, 2, 2);
INSERT 0 1
postgres=# insert into myTable values(1, 2, 3);
INSERT 0 1
postgres=# insert into myTable values(2, 1, 4);
INSERT 0 1
postgres=# insert into myTable values(2, 1, 5);
INSERT 0 1
postgres=# insert into myTable values(2, 1, 6);
INSERT 0 1
postgres=# insert into myTable values(2, 2, 7);
INSERT 0 1
postgres=# insert into myTable values(2, 3, 8);
INSERT 0 1
postgres=# insert into myTable values(2, 3, 9);
INSERT 0 1
postgres=# insert into myTable values(2, 3, 10);
INSERT 0 1
postgres=# insert into myTable values(2, 3, 11);
INSERT 0 1
postgres=#
postgres=# select col1, col2, count(*)\
Invalid command \. Try \? for help.
postgres-#   from myTable
postgres-#   group by col1, col2
postgres-#   order by 1, 2;
 col1 | col2 | count
------+------+-------
    1 |    1 |     1
    1 |    2 |     2
    2 |    1 |     3
    2 |    2 |     1
    2 |    3 |     4
(5 rows)

postgres=#
postgres=#
postgres=# select col1 || ',' || col2 AS theGroup
postgres-#       ,count(*) AS theCount
postgres-#   from myTable
postgres-#   group by col1 || ',' || col2
postgres-#   order by 1;
 thegroup | thecount
----------+----------
 1,1      |        1
 1,2      |        2
 2,1      |        3
 2,2      |        1
 2,3      |        4
(5 rows)

postgres=#
postgres=#
postgres=# select distinct a.col1, a.col2, b.theCount
postgres-#   from myTable a
postgres-#       ,( select col1 || ',' || col2 AS theGroup
postgres(#                ,count(*) theCount
postgres(#            from myTable
postgres(#            group by col1 || ',' || col2 ) b
postgres-#   where a.col1 || ',' || a.col2 = b.theGroup
postgres-#   order by 1, 2;
 col1 | col2 | thecount
------+------+----------
    1 |    1 |        1
    1 |    2 |        2
    2 |    1 |        3
    2 |    2 |        1
    2 |    3 |        4
(5 rows)

postgres=# 
```

# apache - 如何使用 mod_rewrite 将 PHP 页面以外的任何内容定向到 index.php？

> ID：12945797
> 
> 赞同：0
> 
> 时间：2012-10-18T01:24:21.353
> 
> 标签：apache, url, mod-rewrite, redirect

我有一个有点令人困惑的问题。我试图理解 mod_rewrite 但我很困惑。

我正在尝试做的是将所有 URL（例如 /settings/account 或 /user/user123）重定向到 index.php。PHP 脚本（我已经创建）使用 $_SERVER['REQUEST_URI'] 将 URL 分解为多个部分，然后使用包含。例如，它将包括 settings.php?page=account 或 user.php?uid=user123。

但如果 URL 是 /settings.php?page=account 或 /user.php?uid=user123 我不希望它通过索引重定向。换句话说，如果 URl 有文件扩展名，只需转到该文件，但如果它没有（如 /settings），则转到 index.php 以处理它应该去的地方。

如何才能做到这一点？在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:41:01.343

如果您不想使用常见的[redirect-every-url-which-has-no-corresponding-file](https://stackoverflow.com/questions/9388652/htaccess-rewriterule-fails-if-page-not-found)方法，您也可以尝试您的方法。要将不带点的任何内容重定向到通用脚本，请使用：

```
 RewriteRule  ^([^.]*)$  index.php?path=$1 
```

您可能仍然希望排除一些 URL，例如`images/`或`css/`等。然后在规则之前使用简单的 RewriteCond：

```
 RewriteCond  %{REQUEST_URI}  !images/
 RewriteCond  %{REQUEST_URI}  !css/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:42:31.363

您需要的是带有和模式的[RewriteCond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)指令。`!-f``!-d`

`RewriteCond`检查用户的 HTTP 请求是否符合提供的条件。在您的情况下，您需要使用后缀检查`%{REQUEST_FILENAME}`文档根目录中是否已存在请求的文件（在变量中提供） 。`!-f`同样，如果您想在目录中建立索引，您可以添加相同的模式 with `!-d`，这将检查请求的目录是否在您的文档根目录中。

所以在实际之前的这两行`RewriteRule`就可以了：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

# 3d - 投影三角形的表面积

> ID：12945799
> 
> 赞同：1
> 
> 时间：2012-10-18T01:24:35.970
> 
> 标签：3d, geometry

当三角形投影到屏幕上时，我怎么能计算它的表面积。给定投影、视图、模型矩阵和 3 个顶点位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:41:05.090

1.  使用渲染管道中的模型视图和投影矩阵将顶点投影到屏幕上
2.  使用一些 2D 矢量数学计算 2D 中的表面积，`A = sqrt(s*(s-a)*(s-b)*(s-c))`其中`s = (a+b+c)/2`, `a`, `b`,`c`三角形三边的长度（这是[Heron 的公式](http://en.wikipedia.org/wiki/Heron%27s_formula)）

# jquery - 使用 Jquery Ajax 功能进行电子商务类别布局？如何？

> ID：12945801
> 
> 赞同：0
> 
> 时间：2012-10-18T01:24:53.370
> 
> 标签：jquery, json, codeigniter, e-commerce

我正在为我的客户构建一个自定义电子商务网站，并且我决定在他们选择一个选项时使用 Ajax 重新填充产品布局。那么例如...

我有一个颜色列表。红色、蓝色、绿色等。当他们单击其中一种颜色时，我想将颜色的 ID 传递给 ajax 函数。它将转到一个 php 函数，在该函数中它会根据他们选择的颜色拉出一个新的产品列表。它返回一个 JSON 对象，其中包含所有产品。这部分我可以处理。

所以这是我需要帮助的部分。我以前从未这样做过，所以我想知道，在返回 JSON 对象后如何布局我的产品表？显然我不能将 JSON 对象传递回 php 并这样做，所以我是否只需使用 jquery 重新创建我的产品表，为 JSON 对象编写一个 foreach 循环，然后用该内容替换我的容器 div？

你通常会如何专业地去做这件事？

回应评论：

好吧，我已经在初始页面加载时用 PHP 编写了模板。我正在使用 ajax，所以我不必重新加载页面。

这是我的PHP

```
<?php foreach($products as $p): ?>
        <div class="indProduct">
            <?php foreach($images as $img): ?>
            <?php if($img['productId'] == $p['id']): ?>
            <div class="prodImg"><img src="<?php echo base_url(); ?>images/products/<?php echo $img['image']; ?>" alt="<?php echo $p['productTitle']; ?>" /></div>
            <?php endif; ?>
            <?php endforeach; ?>
            <?php if($p['salePrice'] != 0.00): ?>
            <div class="prodSaleBanner"></div>
            <?php endif; ?>
            <div class="prodTitle"><?php echo $p['productTitle']; ?></div>
            <div class="prodPrice">
                <?php if($p['salePrice'] != 0.00): ?>
                $<?php echo number_format($p['salePrice'], 2, '.', ''); ?>
                <?php else: ?>
                $<?php echo number_format($p['price'], 2, '.', ''); ?>
                <?php endif; ?>
                <br />
                <div class="original-price">
                    <?php if($p['salePrice'] != 0.00): ?>
                    $<span style="text-decoration:line-through;"><?php echo number_format($p['price'], 2, '.', ''); ?></span> 
                    <span class="savings">
                        <?php 
                        $savings = $p['price'] - $p['salePrice'];
                        echo 'SAVE: '.number_format($savings, 2, '.', '');
                        ?>
                    </span>
                    <?php endif; ?>
                </div>
            </div>
            <div class="prodAddButton">
                <a href="<?php echo $p['id']; ?>" id="addToCartButton" class="storeButton">Add To Cart</a>
            </div>
        </div>
        <?php endforeach; ?> 
```

所以我的计划是获取 JSON 对象，然后基本上使用 jquery 和 json 而不是 PHP 重做 ajax 成功请求中的所有上述代码。这是一种很难做到的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:03:43.053

我没有使用代码点火器，但我会使用像 mustache 这样的模板引擎并使用我想要显示的信息定义我的模板，然后将 json 传递给您的模板并使用 jQuery 渲染到屏幕。我解释过自己吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:53:59.107

请检查[GoCart](http://gocartdv.com/)。它基于 CodeIgniter 和开源[github-url](https://github.com/gocart/GoCart)。他们也有产品目录。检查他们的源代码，它可能会给出一些想法。

# javascript - Javascript，数组正在传递“未定义”

> ID：12945803
> 
> 赞同：3
> 
> 时间：2012-10-18T01:25:12.053
> 
> 标签：javascript, html, arrays

```
<html>
<head>
<script>
function replacesrc() {
    var array= new Array();
    array[1,2,3,4]=document.getElementById("From").value.split(" ");
    document.getElementById("map").src="https://maps.google.com/maps?f=d&amp;source=s_d&amp;saddr="+array[1]+"+"+array[2]+"+"+array[3]+",+North+Augusta,+SC&amp;daddr=Hilton+Head+Island,+SC&amp;geocode=FYn4_wEd4BQd-ym_ve9aOTP4iDGvGGPbsAEwOw%3BFfyU6wEdINAv-ymtGdOO3Hn8iDE9KKLreqblLA&amp;aq=1&amp;oq=hi&amp;sll=33.623768,-80.925293&amp;sspn=5.551464,10.129395&amp;hl=en&amp;mra=ls&amp;ie=UTF8&amp;t=m&amp;ll=32.88718,-81.37587&amp;spn=1.3416,1.24656&amp;output=embed"
    document.getElementById("test").value=array[1,2,3,4];
}

</script>
</head>
<body>

<iframe id="map" width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=d&amp;source=s_d&amp;saddr=2000+Knobcone+Ave,+North+Augusta,+SC&amp;daddr=Hilton+Head+Island,+SC&amp;geocode=FYn4_wEd4BQd-ym_ve9aOTP4iDGvGGPbsAEwOw%3BFfyU6wEdINAv-ymtGdOO3Hn8iDE9KKLreqblLA&amp;aq=1&amp;oq=hi&amp;sll=33.623768,-80.925293&amp;sspn=5.551464,10.129395&amp;hl=en&amp;mra=ls&amp;ie=UTF8&amp;t=m&amp;ll=32.88718,-81.37587&amp;spn=1.3416,1.24656&amp;output=embed"></iframe>
<br />From: <input id="From" type="text" /> <button onClick="replacesrc()">Directions</button><input id="test" type="text" value="test" />

<br /><small><a href="https://maps.google.com/maps?f=d&amp;source=embed&amp;saddr=2000+Knobcone+Ave,+North+Augusta,+SC&amp;daddr=Hilton+Head+Island,+SC&amp;geocode=FYn4_wEd4BQd-ym_ve9aOTP4iDGvGGPbsAEwOw%3BFfyU6wEdINAv-ymtGdOO3Hn8iDE9KKLreqblLA&amp;aq=1&amp;oq=hi&amp;sll=33.623768,-80.925293&amp;sspn=5.551464,10.129395&amp;hl=en&amp;mra=ls&amp;ie=UTF8&amp;t=m&amp;ll=32.88718,-81.37587&amp;spn=1.3416,1.24656" style="color:#0000FF;text-align:left">View Larger Map</a></small>

</body>
</html> 
```

那是我的代码。它一直以未定义的方式传递它。有人可以帮我吗？我尝试了不同的方法来解决这个问题。但我还是不行。从我的观点来看，我做对了，因为我放了一个测试函数来查看它正在发送什么，我得到了同样的东西，但是当它把它放在 src 中时，它把它设置为未定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:29:15.957

试试这个代替前两行。然后访问从 0 开始的元素，`array[0]`第一项`array[1]`也是如此，第二项也是如此，依此类推。

```
var array = document.getElementById("From").value.split(" "); 
```

最后一行使用这个：

```
document.getElementById("test").value = array.join(); 
```

### 为什么？

`array[1,2,3,4]`不符合您的预期。这是相当不直观的。此处的逗号不允许您访问多个数组索引。

`1,2,3,4`是使用了`,`3 次奇怪的逗号运算符的表达式。对于表达式，`a,b`表达式`a`被计算然后丢弃。Next`b`被评估，它成为逗号运算符的值。

```
1,2,3,4 == ((1,2),3),4
        == (2,3),4
        == 3,4
        == 4 
```

所以写作`array[1,2,3,4]`实际上与`array[4]`.

# xml - 我的 XSLT 有什么问题？

> ID：12945804
> 
> 赞同：0
> 
> 时间：2012-10-18T01:25:22.413
> 
> 标签：xml, xslt

我想将 XML 转换为其他格式的 XML，所以我使用了 XSLT。但是tt变成了不好的结果。

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Greatest Hits</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
</catalog> 
```

**XSLT**：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="yes" encoding="utf-8" indent="yes" />
<xsl:template match="/">
    <root>
        <items>
            <xsl:for-each select="catalog/cd">
                <item>
                    <xsl:value-of select="artist"/>
                </item>
            </xsl:for-each>
        </items>
    </root>
</xsl:template>
</xsl:stylesheet> 
```

**我想要的结果（在浏览器中）：**

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <items>
        <item>Empire Burlesque</item>
        <item>Hide your heart</item>
        <item>Greatest Hits</item>
    </items>
</root> 
```

**实际结果（在浏览器中）：**

```
Empire Burlesque Hide your heart Greatest Hits 
```

我的 XSLT 有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:57:23.947

您可以将 xsl 更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="yes" encoding="utf-8" indent="yes" />
<xsl:template match="/">
    <root>
        <xsl:for-each select="catalog/cd">
            <items>
                <item>
                    <xsl:value-of select="title"/>
                    <xsl:text xml:space="preserve">&#10;</xsl:text>
                </item>
            </items>
        </xsl:for-each>
    </root>
</xsl:template>
</xsl:stylesheet> 
```

这将在浏览器中生成：

```
Empire Burlesque
Hide your heart
Greatest Hits 
```

如果你点击它，在 Firefox 中，你选择`web developer > view source > view generated source`你会得到这个：

```
<root><items><item>Empire Burlesque
</item></items><items><item>Hide your heart
</item></items><items><item>Greatest Hits
</item></items></root> 
```

这就是你说你想要的。

请记住，在浏览器中您将看到文本，所有不是 html 的标签都被丢弃。如果您检查源代码，您将看到 xml 文件，因为这是您加载的文件。如果您检查生成的源是转换告诉浏览器显示的内容。

默认情况下，浏览器的渲染引擎使用 html，这就是它忽略任何其他标签的原因。

再见

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:28:59.677

我敢打赌您正在使用 Firefox，并且它试图将其呈现为 HTML，这意味着它会删除它不理解的标签。尝试右键单击 thpage 并查看源并查看页面的源是否正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T02:02:37.830

您似乎对它在浏览器中的呈现方式感兴趣。在那种情况下，也许这就是你想要的......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="utf-8" indent="yes" />
<xsl:template match="/">
  <xsl:text disable-output-escaping="yes">&lt;!DOCTYPE html&gt;</xsl:text>
  <html>
    <head>
      <meta charset="utf-8" />
      <title>List of CDs</title>
    </head>
    <body>
      <ul>
        <xsl:for-each select="catalog/cd">
          <li><xsl:value-of select="artist"/></li>
      </xsl:for-each>
      </ul>
    </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

# c# - 奇怪的 C# 路径问题

> ID：12945805
> 
> 赞同：19
> 
> 时间：2012-10-18T01:25:26.290
> 
> 标签：c#, c, string, path, slash

我的 C# 应用程序将其用双引号括起来的完整路径写入文件，其中：

```
streamWriter.WriteLine("\"" + Application.ExecutablePath + "\""); 
```

通常它可以工作，写入的文件包含

```
"D:\Dev\Projects\MyApp\bin\Debug\MyApp.exe" 
```

但是，如果我的应用程序的可执行路径包含#，就会发生一些奇怪的事情。输出变为：

```
"D:\Dev\Projects#/MyApp/bin/Debug/MyApp.exe" 
```

# 之后的斜杠变为正斜杠。这会导致我正在开发的系统出现问题。

为什么会发生这种情况，有没有一种比字符串更优雅的方法来防止它。在写入之前替换路径？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T01:51:03.847

我只是查看了 的源代码`Application.ExecutablePath`，实现本质上是这样的*：

```
Assembly asm = Assembly.GetEntryAssembly();
string cb = asm.CodeBase;
var codeBase = new Uri(cb); 

if (codeBase.IsFile) 
    return codeBase.LocalPath + Uri.UnescapeDataString(codeBase.Fragment);
else
    return codeBase.ToString(); 
```

该属性`Assembly.CodeBase`将位置作为 URI 返回。就像是：

> `file:///C:/myfolder/myfile.exe`

`#`是 URI 中的片段标记；它标志着片段的开始。显然，`Uri`该类在解析并再次转换回字符串时会更改给定的 uri。

由于`Assembly.Location`包含“正常”文件路径，我想你最好的选择是：

```
string executablePath = Assembly().GetEntryAssembly().Location; 
```

* *) 实现比这更复杂，因为它还处理有多个 appdomain 的情况和其他特殊情况。我简化了最常见情况的代码。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:31:00.130

奇怪的错误/错误。除了使用替换函数或扩展方法来始终返回正确的格式之外，您可以尝试使用

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

而不是 ExecutablePath。

# google-moderator - 共享按钮在嵌入式 Google 汇问中不起作用

> ID：12945808
> 
> 赞同：1
> 
> 时间：2012-10-18T01:25:47.343
> 
> 标签：google-moderator

我在我的网站 (http://jeffadams.org/mydebateformat.html) 上的一个页面中嵌入了一个 Google 版主页面，但“共享”按钮不起作用。关于为什么的任何想法？

我遵循的说明可以在 -- [http://support.google.com/moderator/answer/146014](http://support.google.com/moderator/answer/146014) 注意本页底部的注释 -- “以前，我们建议使用 IFRAME 嵌入 Google 汇问。这是这种新方法背后的底层设备，但新方法包含使身份验证和共享功能在嵌入页面中正常工作的细节。”

也许我的问题是我的网站没有 SSL 证书？

# javascript - JQuery datepicker'未定义'为空或不是对象

> ID：12945814
> 
> 赞同：-1
> 
> 时间：2012-10-18T01:26:25.580
> 
> 标签：javascript, jquery, datepicker, jquery-ui-datepicker

当我想使用 datepicker 在我的视图上搜索另一个查询时，使用**`$.ajax({})`**并在 AJAX 请求后单击 datepicker，向我显示 message `'undefined' is null or not an object`。

代码日期选择器 JS，

```
$("#datepicker_tx").datepicker({
     showOn: 'button',
     buttonImageOnly: true,
     buttonImage: '${pageContext.request.contextPath}/resources/images/calendar.png'
}) 
```

我的代码HTML：

```
<div id="mydiv"><input type="text" name="datepicker" id="datepicker_tx" size="20" value="${dayT}" /></div> 
```

接下来是我的代码 JS：

```
$.ajax({
   type: 'GET',
   url: 'getSearchResult?action=getSearchResult',
   data: 'val1=' + val1 + 'val2=' + val2 + 'val3=' + val3,
   cache: false,
   success: function(data) {
      var jqObj = JQuery(data);
      jqObj.find('div#div1').remove();
      $("div#div2").empty().append(jqObj);
   }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:41:16.437

这部分：

```
var jqObj = JQuery(data); 
```

我不确定`data`包含什么，但要么你可以`data`直接使用，要么它是一个可以像`var jqObj = $(data)`.

使用 .首先找出`data`包含的内容是安全的`console.log(data)`。

# php - 如何使用 AMFPHP 参数化调用方法

> ID：12945815
> 
> 赞同：0
> 
> 时间：2012-10-18T01:26:34.603
> 
> 标签：php, actionscript, amfphp

我使用 AMFPHP 将 web 服务链接到我的应用程序中，这就是我想要做的：

gateway.call("Medic.GetSupplierByZipCode("10027")",new Responder(success,fail));

问题是 Medic.GetSupplierByZipCode() 参数化了，我没有收到我的数据网格的任何内容。

那么，如何向 AMFPHP 发送参数化调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:46:15.187

我找到了解决方案。

作为（片段）

```
public function init():void
{
    var params:Array = new Array("param1", "param2");
    gateway.connect("http://localhost/amfphp/gateway.php");
    gateway.call("TestService.testFunction", rs, params);
} 
```

PHP

```
<?php
class TestService {
    public function testFunction($params) {
        return $params[0] . $params[1];
    }
}
?> 
```

我们去吧。

# java - 是否可以同时使用 JExample 和 Spring 集成测试？

> ID：12945816
> 
> 赞同：2
> 
> 时间：2012-10-18T01:26:40.573
> 
> 标签：java, spring, spring-mvc, junit4

我正在测试一个带有大量 RESTful 调用的 Spring Web MVC 应用程序，该调用可以按需发布和删除远程资源。

当我尝试运行集成测试时，显然我需要先测试 POST，然后再测试 DELETE。不幸的是，JUnit 不支持这样的依赖测试，并且 vanilla JExample 类不能在 Spring 应用程序上下文中运行。有没有一种可行的方法来使用两者？

# asp.net - 有没有办法在 WebAPI 中为每个控制器设置 maxAllowedContentLength/maxRequestLength

> ID：12945817
> 
> 赞同：2
> 
> 时间：2012-10-18T01:26:44.140
> 
> 标签：asp.net, iis, asp.net-web-api

我有几个控制器可以处理文件上传并需要大量超时和文件。另一方面，我有几个控制器应该以更及时的方式执行，并且希望利用较低的 maxRequestLength 和 executionTimeout 提供的安全性。

我想让某些 web api 控制器或动作能够设置 maxAllowedContentLength/maxRequestLength/executionTimeout 以便每个动作或控制器都可以指定它自己的要求。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T04:50:22.623

您可以将控制器拆分为单独的服务端点，它们都托管在同一个站点下，但对每个都使用单独的配置。

# jquery-mobile - RequireJs：使用优化器插件优化自定义目录结构

> ID：12945818
> 
> 赞同：1
> 
> 时间：2012-10-18T01:26:48.633
> 
> 标签：jquery-mobile, requirejs, optimization

在使用 jquerymobile、jquery、requirejs 和主干路由创建移动 Web 应用程序时，我无法按照此处的说明运行 node.js 命令来优化它：

[http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html)

所以基本上，我试图优化我的文件以更快地运行，因为它在移动设备中加载非常慢，并且随着应用程序变得更大和更复杂，它变得更慢。

我的应用程序的示例结构可以在这里找到：

[https://github.com/3na/PulawJS](https://github.com/3na/PulawJS)。

这是我的应用程序的骨架，我很高兴听到你们的任何意见和建议。

太感谢了！

# queue - Rails: Queue Classic with Capistrano

> ID：12945822
> 
> 赞同：1
> 
> 时间：2012-10-18T01:27:43.583
> 
> 标签：queue, ruby-on-rails-3.2, capistrano, background-process

I want to start **Queue Classic** (QC) within my **Capistrano** recipe:

```
namespace :queue_classic do
  desc "Start QC worker"
  task :start, roles: :web do
    run "cd #{release_path} && RAILS_ENV=production bundle exec rake qc:work"
  end
  after "deploy:restart", "queue_classic:restart"
end 
```

Capistrano runs the line correctly, so that the QC worker starts, but not as a daemon. As a result Capistrano won't continue to run the recipes.

How can I start the QC worker in the background and let Capistrano finish its tasks?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T01:58:50.153

I use foreman for this:

```
 after "deploy:update", "foreman:export"    # Export foreman scripts
  after "deploy:restart", "foreman:restart"   # Restart application scripts
  after "deploy:stop", "foreman:stop"   # Restart application scripts
  after "deploy:start", "foreman:start"

  # Foreman tasks

  desc 'Export the Procfile to Ubuntu upstart scripts'
  task :export, :roles => :queue do
    run "cd #{release_path}; #{sudo} $(rbenv which foreman) export upstart /etc/init -f ./Procfile -a #{application} -u #{user} -l #{release_path}/log/foreman"
  end

  desc "Start the application services"
  task :start, :roles => :queue do
    run "#{sudo} start #{application}"
  end

  desc "Stop the application services"

  task :stop, :roles => :queue do
    run "#{sudo} stop #{application}"
  end

  desc "Restart the application services"
  task :restart, :roles => :queue do
    run "#{sudo} stop #{application}"
    run "#{sudo} start #{application}"
    #run "sudo start #{application} || sudo restart #{application}"
  end 
```

Then in your `Procfile` put something like

```
worker: RAILS_ENV=production bundle exec rake qc:work 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:43:06.043

Use the & sign at the and and put process in background.

```
run "cd #{release_path} && RAILS_ENV=production bundle exec rake qc:work &" 
```

Killin and restarting is than a bit tricky, but it could be done using `ps`, `grep` and `kill`.

# javascript - 将 onclick 事件添加到 div 元素

> ID：12945825
> 
> 赞同：63
> 
> 时间：2012-10-18T01:27:49.973
> 
> 标签：javascript, dom-events

我看到了一些类似的主题，它们确实有帮助，但我有特定的问题，并没有设法单独解决，所以如果有人能提供帮助，我将不胜感激

我想将 onclick 事件添加到 div 元素。

HTML：

```
<div id="thumb0" class="thumbs" onclick="klikaj('rad1')"></div> 
```

JavaScript：

```
function klikaj(i)
{
    document.getElementById(i).style.visibility='visible';
} 
```

想要的结果：`id="rad1"`当单击带有 的 div 时，带有（隐藏的）的 div 变为可见`id="thumb0"`。

这在我将它添加到按钮元素但不知道它如何与 div 元素一起使用时有效。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-18T01:36:20.447

我不确定问题是什么；运行以下按预期工作：

```
<div id="thumb0" class="thumbs" onclick="klikaj('rad1')">knock knock</div>
​&lt;div id="rad1" style="visibility: hidden">hello world</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
<script>
function klikaj(i) {
    document.getElementById(i).style.visibility='visible';
}
</script> 
```

另见：http: [//jsfiddle.net/5tD4P/](http://jsfiddle.net/5tD4P/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-15T15:24:58.713

也许您的脚本选项卡有问题。

如果您设置类型，则必须**type="application/javascript"**。

```
<!DOCTYPE html>
<html>
    <head>
        <title>
            Hello
        </title>
    </head>
    <body>
        <div onclick="showMsg('Hello')">
            Click me show message
        </div>
        <script type="application/javascript">
            function showMsg(item) {
            alert(item);
        }
        </script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-20T14:08:37.110

取决于你如何隐藏你的div，`diplay=none`是不同`visibility=hidden`的`opacity=0`

*   可见性然后使用`...style.visibility='visible'`

*   显示然后使用`...style.display='block'`（或其他取决于
    你如何设置你的 css、内联、内联块、flex ...）

*   不透明度然后使用`...style.opacity='1';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:22:13.003

我认为您`//--style="display:none"--//`用于隐藏 div。

使用此代码：

```
<script>
    function klikaj(i) {
        document.getElementById(i).style.display = 'block';
    }
</script>
<div id="thumb0" class="thumbs" onclick="klikaj('rad1')">Click Me..!</div>
<div id="rad1" class="thumbs" style="display:none">Helloooooo</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-08T09:10:40.133

有可能，我们可以在中指定 onclick 事件

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="thumb0" class="thumbs" onclick="fun1('rad1')" style="height:250px; width:100%; background-color:yellow;";></div>
<div id="rad1" style="height:250px; width:100%;background-color:red;" onclick="fun2('thumb0')">hello world</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
<script>
function fun1(i) {
    document.getElementById(i).style.visibility='hidden';
}
function fun2(i) {
    document.getElementById(i).style.visibility='hidden';
}
</script>
</body>
</html> 
```

# linux - 不同 Linux 命名空间中的共享库使用情况

> ID：12945826
> 
> 赞同：1
> 
> 时间：2012-10-18T01:28:07.130
> 
> 标签：linux, namespaces

Linux namespace可以隔离pid、mount poing、network等。我使用 Linux 命名空间来实现操作系统级别的虚拟机（就像 vserver 和 LXC 一样），但我经常会耗尽内存。我有一个问题，如果我在不同的命名空间中有两个进程并且它们使用相同的共享库，那么该库是否会被加载一次或两次到物理内存中？另外，进程间共享库的底层机制是什么？和IPC一样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T20:41:49.043

如果他们都在访问同一个文件，他们应该共享内存。机制非常简单；每个进程打开共享对象并`mmap(2)`发送它。`mmap()`只是使文件的 VFS 页面缓存在进程的地址空间中可用，因此当多个进程`mmap()`相同的文件时，它们会获得相同的页面。

当您多次挂载一个文件系统时（这就是绑定挂载和来自多个命名空间的挂载所做的事情），只有一个文件系统实例——多个挂载在 VFS 层处理——所以它应该只有一个文件副本缓存。

共享库不太可能导致您的内存耗尽；由于它们是磁盘上文件的只读缓存，因此内核会在内存紧张时将它们逐出，从而在程序触及这些页面时（例如调用函数或从库中访问内存）导致磁盘读取。

# wordpress - 如何水平对齐 Contact Form 7 插件表单？

> ID：12945827
> 
> 赞同：1
> 
> 时间：2012-10-18T01:28:10.920
> 
> 标签：wordpress, html, css, contact-form-7

我已经尝试了几个小时来找到水平显示联系表单输入字段的方法，就像在此处联系表单之前的模块中一样：http: [//zohar.mapasystem.co.il/](http://zohar.mapasystem.co.il/)

这个想法是用我的联系表 7 短代码替换 Property Search。

使用 a`<table>`不是一个选项，因为主题会自动更改移动浏览器的布局。

```
<label><span> שם מלא (חובה)</span><br>[text* text-3 30/ class:gg] </label>
<label><span> טלפון (חובה)</span><br>[text* text-648 30/ class:gg] </label>
<label><span> אימייל (חובה)</span><br>[email* email-827 30/ class:gg] </label>
<label><span> תקציב להשקעה</span><br>[text text-214 30/ class:gg] </label>
<label class="lastsub"> [submit class:gg "שלח"] </label> 
```

我尝试`<div>`了宽度、浮动、显示：内联等，但我认为我的问题出在 HTML5 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:44:47.553

尝试这个：

```
<div class="separate">
<label><span> שם מלא (חובה)</span></label><br>[text* text-3 30/ class:gg]
</div> 

<div class="separate">
<label><span> טלפון (חובה)</span></label><br>[text* text-648 30/ class:gg]
</div> 
```

在 CSS 文件中：

```
.separate{float:left;} 
```

# objective-c - 一个透明的窗口，里面的东西不透明

> ID：12945829
> 
> 赞同：0
> 
> 时间：2012-10-18T01:28:43.313
> 
> 标签：objective-c, xcode, image, cocoa, transparent

我一直在互联网上寻找如何制作一个窗口本身不存在的窗口，它只是一个图像或一个按钮，例如一个未附加到任何窗口的自由浮动图像。我确实找到了苹果 roundTransparentWindow 页面，但它有点令人困惑，我真的只想知道一张图片或 bu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:33:17.557

创建一个完全透明的窗口是一个多阶段的阶段过程：

1.  `NSBorderlessWindowMask`如果您在代码中执行此操作，请使用该样式创建窗口。如果您在 XIB 中创建窗口，则在 Xcode 中取消选中检查器中“控件”和“外观”下的所有框。
2.  在代码中将窗口的 opaque 属性设置为 NO：`[window setOpaque:NO]`
3.  在代码中将窗口的背景颜色设置为空：`[window setBackgroundColor:[NSColor clearColor]]`

请记住，窗口将没有用户可以与之交互的窗口控件（关闭、调整大小等）——您必须在自己的代码中管理所有这些事情。

# c# - 使用循环引用链进行对象克隆

> ID：12945830
> 
> 赞同：2
> 
> 时间：2012-10-18T01:28:44.500
> 
> 标签：c#, clone, directed-graph, cyclic-reference

我正在内存中的图形上运行一些操作，这些操作会修改图形本身。我需要多次重复这些操作，随后的重复必须在图形的新副本上工作。由于图表是通过解析文件生成的，我真的不想每次重复都花时间重新解析文件，所以我走上了克隆原始图表的路线。

我的`node`,`edge`和`graph`类型都在实现`ICloneable`，但是我有一个循环引用链的问题。

`Node`存储`Edge`来自它的定向 s 的列表。`Edge`存储重量和`Node`它指向的。当两个节点共享一条双向边时，`StackOverflowException`当我尝试克隆任一节点时会得到一个，因为克隆任一节点的边列表总是意味着克隆另一个节点。

为了克隆的目的，解决这个循环引用的最佳方法是什么？

# javascript - 未捕获的错误：方法“未定义”不存在backbone.js:1291

> ID：12945831
> 
> 赞同：0
> 
> 时间：2012-10-18T01:28:54.653
> 
> 标签：javascript, backbone.js, backbone.js-collections

现在真的很挠头。以下backbone.js 代码有什么问题？它一直在抱怨*“未捕获的错误：方法“未定义”不存在主干.js:1291”*

失败的代码在这里：http: [//jsfiddle.net/toeinriver/ntK7r/19/](http://jsfiddle.net/toeinriver/ntK7r/19/)

```
(function($){
    var Person = Backbone.Model.extend({
        defaults:{
         age: 0,
         name: "tom" 
        }
    });

    var People = Backbone.Collection.extend({
        model: Person});

    ListView = Backbone.View.extend({
        el: $("body"),
        events: {
            "click button#btn": this.addItem
        },
        initialize: function(){
            this.count = 0;
            _.bindAll(this, "render", "appendItem","addItem");
            this.collection = new People();
            this.collection.bind("add", this.appendItem);
            this.counter = 0;
            this.render();
        },
        render: function(){
            var self = this;
            $(this.el).append("<button id='btn'>Press me</button>");
            $(this.el).append("<ul></ul>");
            _(this.collection.models).each(function(item){
                self.appendItem(item);
                this.count+=1;
            },this);
        },
        appendItem: function(item){
            $("ul", this.el).append("<li>" + item.get("name") +" at" + item.get("age") + "</li>");
        },
        addItem: function(){
            var p = new Person();
            p.set({age:this.count});
            this.count += 1;
            this.collection.add(p);
        }
    });

    var listView = new ListView();

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:05:25.233

```
events: {
  "click button#btn": "addItem"
}, 
```

# java - 这对于返回 java 不可变结果意味着什么？

> ID：12945837
> 
> 赞同：3
> 
> 时间：2012-10-18T01:29:10.587
> 
> 标签：java

“返回原始数据的不可变接口。然后您可以更改对象中的字段，但调用者不能，除非他通过强制转换作弊。您只公开您希望用户拥有的方法。对类做同样的事情比较棘手，因为子类必须公开其超类所做的一切”

他是什么意思你可以作弊，为什么子类很棘手？

来源： http: [//mindprod.com/jgloss/immutable.html](http://mindprod.com/jgloss/immutable.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T01:36:16.437

您提供一个`interface`没有变异方法的。然后，您提供只有创建者知道的可变实现。

```
public interface Person
{
    String getName();
}

public class MutablePerson implements Person
{
    private String name;

    public MutablePerson(String name)
    {
        this.name = name;
    }

    @Override
    public String getName()
    {
        return name;
    }

    public void setName(String name)
    {
        this.name = name;
    }
} 
```

此时，如果您`Person`到处返回对象，那么有人修改返回的对象的唯一方法就是作弊并将其强制转换为`MutablePerson`. 实际上，可变对象变为不可变对象，除非代码完全被破解。

```
Person person = new MutablePerson("picky");
// someone is cheating:
MutablePerson mutableAgain = (MutablePerson)person;
mutableAgain.setName("Phoenix");

// person.getName().equals("Phoenix") == true 
```

当不与一群年轻的程序员打交道时，他们会注意到真正的实现是可变的，因此他们可以强制转换它来改变它，那么你提供了不变性的安全性，并且能够在没有无穷构造函数的情况下将它组合在一起，或使用 Builder（实际上，可变版本是 Builder）。避免开发人员滥用可变版本的一个好方法是将可变版本保留为包私有，以便只有包知道它。这个想法的负面影响是，这只适用于它在同一个包中实例化的情况，这可能是这种情况，但显然在诸如 DAO 与多个包定义的实现一起使用的情况下可能不是这种情况（例如、MySQL、Oracle、Hibernate、Cassandra 等，都返回相同的东西，

这里真正的关键是人们不应该从 Mutable 对象构建，除非实现更底层的接口。如果您正在扩展，然后返回一个不可变的子类，那么根据定义，如果它公开了一个可变对象，那么它就不是不可变的。例如：

```
public interface MyType<T>
{
    T getSomething();
}

public class MyTypeImpl<T> implements MyType<T>
{
    private T something;

    public MyTypeImpl(T something)
    {
        this.something = something;
    }

    @Override
    public T getSomething()
    {
        return something;
    }

    public void setSomething(T something)
    {
        this.something = something;
    }
}

public interface MyExtendedType<T> extends MyType<T>
{
    T getMore();
}

public class MyExtendedTypeImpl<T>
        extends MyTypeImpl<T>
        implements MyExtendedType<T>
{
    private T more;

    public MyExtendedTypeImpl(T something, T more)
    {
        super(something);

        this.more = more;
    }

    @Override
    public T getMore()
    {
        return more;
    }

    public void setMore(T more)
    {
        this.more = more;
    }
} 
```

老实说`Collection`，Java 中的 s 应该是这样实现的。只读接口可以代替`Collections.unmodifiable`实现，因此不会让人意外地使用可变对象的不可变版本。换句话说，你永远不应该隐藏不变性，但你可以隐藏可变性。

然后，他们可以散布真正无法修改的不可变实例，这将使开发人员保持诚实。同样，我可能希望在某处看到上述接口的不可变版本（具有更好的名称）：

```
public class MyTypeImmutable<T> implements MyType<T>
{
    private final T something;

    public MyTypeImmutable(T something)
    {
        this.something = something;
    }

    @Override
    public T getSomething()
    {
        return something;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:38:40.020

我认为该声明措辞不好，他所触及的不仅仅是不变性（事实上，该声明甚至不是真正的不变性）。

这个想法是，如果您返回数据的接口，而不是特定的类，调用者应该只在接口上执行操作。因此，如果您的接口只有 getter 方法，那么应该没有办法操作数据（没有向下转换）。

考虑这个层次结构

```
interface AnInterface {
  void aGetter();
}

class MyMutableClass {
   void aGetter();
   void aSetter(...);
} 
```

即使`MyMutableClass`是可变的，通过返回`AnInterface`，用户并不知道它实际上是一个可变对象。所以该对象实际上并不是可变的，但您必须向下转换（或使用反射来访问 mutator 方法）才能知道这一点。

现在假设你有

```
class MyImmutableSubclass extends MyMutableClass {
   void anotherGetter();
} 
```

即使子类是“不可变的”（它不是真的，因为它的父类不是不可变的），如果你`MyImmutableSubclass`从方法返回，调用者仍然可以调用`aSetter`，因为`MyMutableClass`它暴露了它。

通常，建议使用不可变对象以避免“泄漏”状态。任何真正不可变的东西都不会受到任何操纵和意外更改的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T01:44:55.040

您可以作弊，因为如果您将类型转换为可变的“某物”，您可以更改返回字段的类型。如果您将您的类“隐藏”在公共接口后面并返回该不可变接口，则用户可以通过将您的接口类型转换为您的类来作弊。

使用子类比较棘手，因为类的任何私有成员都不是由子类继承的，而是受保护的和公共的。这意味着您可以从外部在父类中访问的任何内容也可以从外部在子类中访问，因此您不能像使用界面那样容易地混淆用户。我认为这实际上是可能的，因为您可以覆盖父方法，尽管我认为它没有多大意义。

# facebook - 您可以在 Facebook Insights 中声明的网站数量是否有限制？

> ID：12945842
> 
> 赞同：0
> 
> 时间：2012-10-18T01:29:39.370
> 
> 标签：facebook, facebook-insights, limits

我们有一个用例，我们需要声明我们拥有的网站的潜在数百个子域，以便仅向我们的客户展示他们的内容的 Facebook Insights 数据。有谁知道您可以在 Facebook 洞察中声明的域/子域的数量是否有限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:45:30.973

我不确定是否有限制，但肯定必须高于几百。Facebook 设计了他们的一些 API，以便像广告代理这样的公司可以为他们的客户提供社交活动。例如，Buddy Media 的产品拥有成百上千的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T19:47:42.293

它没有记录在案，许多 facebook 洞察力的工作似乎因某种原因而被掩盖和隐藏。许多人仍然不知道如何为取得这一成就而做得如此出色的域的洞察力。

不应该有限制，毕竟声称您的域只是创建一个链接与打开图表中的任何其他事务相同。

# jquery - 计算来自另一个 SharePoint 列表的列中的项目

> ID：12945844
> 
> 赞同：2
> 
> 时间：2012-10-18T01:29:44.543
> 
> 标签：jquery, sharepoint, caml

如何计算与另一个列表中的项目匹配的实例？
请参见场景示例。

我有 2 个 SharePoint 列表。

列表 A 是经理记录其员工审核分数的列表。

```
Associate      Score
----------     ------
Associate 1     100
Associate 2     100
Associate 1     90
Associate 1     50
Associate 2     0
Associate 3     80 
```

* * *

随着新评论的添加，列表 A 会不断增加。

列表 B 只是一个人员配备列表，仅包含一个员工姓名的实例。
我想让 List B 计算它在 List A 中出现的次数，所以当一个新项目添加到 List A 时，它会自动将它计入 List B。例如：

清单 B

```
Associate      Count
----------         -----
Associate1      3
Associate2      2
Associate3      1 
```

类似于 Access 中的查询计数或 excel 中的 countif，只是为了进一步说明。有什么建议么？

此外，关联字段是组/人员类型，因此它与他们的用户 ID 匹配，如果这很重要的话。我更愿意保持这种状态，但我愿意接受建议。我也在使用 SharePoint 2007。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:26:08.033

如果您的列表 A 使用查找列列出 B 的关联名称，这应该非常简单。

只需转到列表 B，然后添加一个新列，该列是列表 A 的查找。当您下拉要从中选择的字段时，您应该看到 Associate(count)。

这将计算每个员工姓名在列表 A 中使用的次数，并将准确显示您想要的计数。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:20:11.193

您还可以在 SharePoint 设计器中创建一个将计数添加到列表 B 的工作流。

例如，您在列表 B 中有 Associate1。当您在列表 A 中创建项目时，执行将在列表 B 中查找 Associate1 的工作流，然后将 +1 添加到该 Associate 上列表 B 的计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:28:36.273

无需创建列表 B，只需在列表 A 上创建另一个 VIEW。您将拥有列表 A 的 2 个视图（AllItems.aspx 和 YourName.aspx）。第二个视图将按 Associate 字段分组，当项目添加到列表 A 时，计数将自行更新。

否则，如果您确实需要另一个列表，列表 B，您将不得不复制列表 A 中的插入和列表 B 中的插入（使用事件接收器或工作流），然后在列表 B 上创建与上述相同类型的视图。

为什么有 2 个列表？有 2 次以上的浏览量！

# trigger.io - 如何使用 Trigger.IO 隐藏带有 iOS 原生插件的表单助手？

> ID：12945848
> 
> 赞同：3
> 
> 时间：2012-10-18T01:30:17.187
> 
> 标签：trigger.io

我正在尝试构建一个触发器插件，它将删除我们输入和表单字段上的表单助手（基于 ios webview 键盘的愚蠢工具栏，可帮助您使用“下一个”和“上一个”按钮导航表单）。

[这](https://stackoverflow.com/questions/8718411/how-do-i-install-this-script-into-phonegap-for-ios)是为 PhoneGap 提供的一个 hacky 解决方案，我想将其移植过来。

这个问题涉及我需要采取的步骤，以使用他们的插件系统为 Trigger 正确实施，假设上述 PhoneGap 解决方案将起作用。

我认为每次加载键盘时都需要进行调用，而不仅仅是全局调用一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:27:46.910

我刚刚自己实现了这个，由于某种原因，该`UIKeyboardWillShowNotification`事件没有为我触发，幸运的是另一个事件`UIKeyboardCandidateCorrectionDidChangeNotification`确实在正确的点触发。

如果您将此代码放在插件的 API 方法中，并确保在显示键盘之前调用它（一次），它应该可以工作。

```
[[NSNotificationCenter defaultCenter] addObserverForName:@"UIKeyboardCandidateCorrectionDidChangeNotification" object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    UIWindow *keyboardWindow = nil;
    for (UIWindow *testWindow in [[UIApplication sharedApplication] windows]) {
        if (![[testWindow class] isEqual:[UIWindow class]]) {
            keyboardWindow = testWindow;
        }
    }

    // Locate UIWebFormView.
    for (UIView *possibleFormView in [keyboardWindow subviews]) {
        // iOS 5 sticks the UIWebFormView inside a UIPeripheralHostView.
        if ([[possibleFormView description] rangeOfString:@"UIPeripheralHostView"].location != NSNotFound) {
            for (UIView *subviewWhichIsPossibleFormView in [possibleFormView subviews]) {
                if ([[subviewWhichIsPossibleFormView description] rangeOfString:@"UIWebFormAccessory"].location != NSNotFound) {
                    [subviewWhichIsPossibleFormView removeFromSuperview];
                }
            }
        }
    }
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T15:38:15.690

表单助手模块现在作为 Trigger.io v2.0 的一部分提供： [https ://trigger.io/modules/damn_you_form_assist/current/](https://trigger.io/modules/damn_you_form_assist/current/)

感谢 Fetchnotes 和 @Horak 提供此功能！

# windows - _已删除_没用_

> ID：12945850
> 
> 赞同：0
> 
> 时间：2012-10-18T01:30:59.583
> 
> 标签：windows

_deleted 因为这篇文章没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:36:02.307

如果你想拥有一个简洁的文本编辑器，我建议你使用[Sublime Text 2 之类的东西。](http://www.sublimetext.com/2)您可以免费使用它，它只是偶尔会在您保存文件时给您带来麻烦。无论哪种方式，它都功能齐全。

# php - 从服务器访问项目时CI找不到会话变量

> ID：12945851
> 
> 赞同：0
> 
> 时间：2012-10-18T01:31:08.897
> 
> 标签：php, codeigniter, session, webserver

编辑： Zen 下面的评论（这已经是公认的答案）起到了作用。我已经用我的工作站上的那个覆盖了服务器上的 php.ini。我不再有这个问题。

在服务器上：我尝试在设置此会话后立即在控制器中打印 $this->session->userdata('uid') ，并且在那一点上一切都很好，但是当我在登录时 var_dump 这个 uid页面返回false。它不存在。我也已经尝试过多次擦除浏览器中的 cookie 和所有内容。也试过重启。

在我的本地主机上：一切正常。

有人经历过吗？

背景：系统获取到用户输入的登录信息后，验证用户是否存在于数据库中，即在模型中设置此会话变量。

有人经历过吗？

我的工作站在 Windows 7 上运行 XAMPP 1.7.7，服务器在 centOS 上使用 XAMPP for linux，我的浏览器是 chrome。还有什么我应该指定的，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:05:17.623

尝试在远程 CentOS 机器上使用本地服务器上完全相同的`php.ini`文件 - 这将消除 php 配置中出现错误的可能性（事实证明，这种情况发生了......）

这应该总是在您的“是什么导致 PHP 出现这个无法解释的问题？” 列表。

# java - 插入排序双循环链表

> ID：12945855
> 
> 赞同：1
> 
> 时间：2012-10-18T01:33:28.107
> 
> 标签：java, linked-list, circular-list

所以我试图让我的双链表做一个插入排序

我现在遇到问题，只是将节点移动到正确的位置。我已经进行了比较，但我的节点都没有移动。

```
public void insertionSort()
{
    Node temp;
    Node start = this.head.next;
    Node next = start.next;
    Node prev = this.head;

    while(start != this.head)
    {
        if(start.data.compareTo(next.data) > 0) //start is larger than next
        {
            temp = start;
            start = next;
            next = temp;
        }
        start = start.next;
        next = next.next;
        prev = prev.next;
    }
} 
```

我想知道是否有人可以帮助我正确使用此算法。我正在使用循环双向链表来尝试测试各种排序例程的时间复杂度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:55:57.650

有趣的谜题！

我可以看到你的算法的主要问题是你只给被插入的节点有机会*向后移动一个位置*。

插入排序从列表中的第二个节点逐个查找到最后一个节点，将它们向后交换，*直到它们在前面已经排序的列表中排序*。这可能需要多次交换，但您的算法只允许一个（当您的 if 条件为真时）或零（当它为假时）。例如，假设我们正在排序：

bca

`start`当位于 b 和 c时，您的插入排序将起作用，然后它会移动到 a。在这里你说'如果a在c之前，用c交换'，给出：

背书

...但是您的算法将终止。由于您需要为每个插入的节点执行未确定数量的交换，因此您需要另一个 while 循环。下面是插入排序算法的伪代码：

```
function insertion_sort(items) {
    while (i=1; i < items length; i++) { // for elements 1 to n
        while (j=i; j >= 0; j--) { // look backward through all previously sorted items
            if (items element at j < items element at j-1) {
                 swap element at j with element at j-1
            } else {
                break out of the loop
            }
        }
    }
} 
```

# stl - 如果我先执行（）然后执行pop_front（），它仍然是线程安全的吗？

> ID：12945859
> 
> 赞同：0
> 
> 时间：2012-10-18T01:34:04.933
> 
> 标签：stl, qt4

考虑多线程程序中的以下代码：

```
 QString target = remaining.first(); // remaining is a QVector<QString> class
    remaining.pop_front(); 
```

会安全吗？看起来多个线程可能同时使用相同的“目标”。或者检索+擦除第一个值的安全方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:37:09.847

如果没有保护该代码的互斥锁，不，它根本不安全。

我不知道`QVector`详细信息，但我相信两个线程都可以这样做：

```
QString target = remaining.first(); 
```

这只是复制向量的一个元素，因此每个线程都有自己的`QString`对象被调用`target`并且它们是独立的对象（在幕后它们使用[隐式共享](http://qt-project.org/doc/qt-4.8/implicit-sharing.html)所以不是独立的，但你应该能够[将它们视为独立的](http://qt-project.org/doc/qt-4.8/threads-modules.html#threads-and-implicitly-shared-classes)）

但是这一行修改了`QVector`：

```
remaining.pop_front(); 
```

这意味着两个线程在没有任何同步的情况下修改同一个对象。`remaining.first()`如果在第二个线程调用时第一个线程仍在通过调用访问向量，`pop_front()`则存在数据竞争，行为未定义。

同样，如果两个线程`pop_front()`同时调用，它们都将尝试删除第一个元素，那里发生的事情是完全不可预测的。您可能会删除一个或两个元素，或者一个元素都没有，或者立即使整个程序崩溃。作为另一种可能性，考虑如果向量只有一个元素会发生什么。两个线程都检查它不是空的，复制`first()`元素，然后调用`pop_front()`，当只有一个元素时它会尝试删除两个元素。你的程序坏了。

安全的方法是使用互斥锁保护代码，其中`mutex`一些全局变量或其他共享变量对两个线程都是可见的：

```
QString target;
{
  QMutexLocker locker(&mutex);
  if (!remaining.empty())
  {
    target = remaining.first();
    remaining.pop_front();
  }
} 
```

# javascript - google script (JS) - 最大递归深度

> ID：12945860
> 
> 赞同：5
> 
> 时间：2012-10-18T01:34:14.503
> 
> 标签：javascript, recursion, google-apps-script

Google Apps 脚本脚本的最大递归深度是多少？我有一个函数，`match_recurse`它看起来像下面的伪代码：

```
function match_recurse(array) {
  for (i=0, i<3, i++) {
    var arr2 = array.copy().push(i);
    if (is_done(arr2)) break;
    match_recurse(arr2);
  }
} 
```

（它也返回它的结果，但我不想夸大这个问题。）

现在，由于执行出错，执行记录和日志没有保存，所以我无法知道我的`is_done`函数是否做错了。我**可以**在纸上解决一些问题并检查递归深度，但我不知道最大值应该是多少。

在网上看，我看到一篇文章提到，如果你通过 Window 对象，IE 的最大调用堆栈为 13，但没有别的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:20:41.573

从这里可以看出，它是 1000：

```
function recurse(i) {
  var i = i || 1;
  try {
    recurse(i+1);
  } catch (e) {
    Logger.log(i);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T05:23:34.023

堆栈深度值没有记录。执行下面的代码可以看出这个值等于1000。

```
function getStackDepth(curvalue) {
  try {
    curvalue = getStackDepth(curvalue) + 1;
  }
  catch(err) {
  }
  return curvalue;
}

function test() {
  var depth = getStackDepth(2);
  debugger;
} 
```

# javascript - 将 jQuery 脚本转换为独立的 javascript

> ID：12945862
> 
> 赞同：0
> 
> 时间：2012-10-18T01:34:18.263
> 
> 标签：javascript, jquery, select, html-lists

这个 jQuery 代码是否可以作为独立的 javascript 运行？这是我想在我的项目中使用的唯一 javascript，所以我不想只为这个 1k 脚本加载整个 jquery 库。

```
//chris coyier's little dropdown select-->

$(document).ready(function() {

//build dropdown
$("<select />").appendTo("nav.primary");

// Create default option "Go to..."
$("<option />", {
   "selected": "selected",
   "value"   : "",
   "text"    : "Go to..."
}).appendTo("nav select");  

// Populate dropdowns with the first menu items
$("div#brdmenu ul li a").each(function() {
    var el = $(this);
    $("<option />", {
        "value"   : el.attr("href"),
        "text"    : el.text()
    }).appendTo("nav.primary select");
});

//make responsive dropdown menu actually work           
$("nav.primary select").change(function() {
    window.location = $(this).find("option:selected").val();
});

}); 
```

我试图找到以前的答案，但大多数问题都是为了转换为 jquery 而不是反之亦然:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:36:03.347

显然可以用直接的 javascript 来做这些事情，但是（我知道）没有办法自动进行这种转换。您将不得不逐行进行并自己进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:03:06.490

试试这个。

我要遗漏的一件事是**$(document).ready**，但在 stackoverflow 上有许多可用的解决方案。这是一个惊人的大量代码！

但其他功能：

```
// build the dropdown
var selectElement = document.createElement('select');
var primary = document.getElementsByClassName('primary')[0];

// create a default option and append it.
var opt = document.createElement('option');
var defaultOpt = opt.cloneNode(false);
defaultOpt.selected = true;
defaultOpt.value = "";
defaultOpt.text = "Go to...";
selectElement.appendChild(defaultOpt);

// populate the dropdown
var brdmenuUl = document.getElementById('brdmenu').getElementsByTagName('ul')[0];
var listItems = brdmenuUl.getElementsByTagName('li');
for(var i=0; i<listItems.length; i++){
    var li = listItems[i];
    var a = li.getElementsByTagName('a')[0];
    var newOpt = opt.cloneNode(false);
    newOpt.value = a.href;
    newOpt.text = a.innerHTML;
    selectElement.appendChild(newOpt);
}

// now listen for changes
if(selectElement.addEventListener){
    selectElement.addEventListener('change', selectJump, false);
}
else if(selectElement.attachEvent){
    selectElement.attachEvent('change', selectJump);
}

function selectJump(evt){
    window.location = evt.value;
}

primary.appendChild(selectElement);​ 
```

一些笔记！

1.  我们不是专门寻找 nav.primary，我们只是找到第一次出现的类 .primary 的东西。为了获得最佳性能，您应该向该元素添加一个 ID 并改用*getElementById*。

2.  与#brdmenu 中的列表类似，我们在每个 LI中查找第*一个*UL 和第*一个A。*这并不是 jQuery 所做的，如果您需要在 #brdmenu 中迭代多个 UL，您可以使用另一个 for 循环。

我认为这应该一切正常，这里有一个[小提琴](http://jsfiddle.net/BVKQP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:29:47.030

这是类似于市场的答案。我假设您想要获取*brdmenu*元素内的 UL 元素中的所有链接。如果您只想要 LI 元素上的第一个链接，只需调整获取它们的循环。

此外，这不是一个好主意。对链接使用选择元素很久以前就过时了，用户更喜欢真正的链接。此外，当在 IE 中使用光标键导航选项时，每次选择不同的选项时都会发送一个更改事件，因此用户只能在被带到该位置之前选择下一个选项。添加他们在选择位置后按下的“开始”按钮要好得多。

主要变化是使用 ID 来获取*nav.primary*元素，我假设它是您应该已经通过 ID 获取的单个元素。

```
function doStuff() {

    function getText(el) {
      return el.textContent || el.innerText;
    }
    var div, link, links, uls;

    // Use an ID to get the nav.primary element
    var navPrimary = document.getElementById('navPrimary');

    // Create select element and add listener
    var sel = document.createElement('select');
    sel.onchange = function() {
      if (this.selectedIndex > 0) {  // -1 for none selected, 0 is default
        window.location = this.value;
      }
    };

    // Create default option and append to select
    sel.options[0] = new Option('Go to...','');
    sel.options[0].setAttribute('selected','');

    // Create options for the links inside #brdmenu
    div = document.getElementById('brdmenu');
    uls = div.getElementsByTagName('ul');

    for (var i=0, iLen=uls.length; i<iLen; i++) {
      links = uls[i].getElementsByTagName('a');

      for (var j=0, jLen=links.length; j<jLen; j++) {
        link = links[j];
        sel.appendChild(new Option(getText(link), link.href));
      }
    }

    // Add select to page if found navPrimary element
    if (navPrimary) {
      navPrimary.appendChild(sel);
    }
}

window.onload = doStuff; 
```

它只有 28 行实际代码，仅比原始代码多 10 行，不需要任何支持库，并且可以在任何正在使用的浏览器中运行（而且大多数不是）。

# html - 为什么 IE-8 将视图推送到紧凑/兼容性视图？

> ID：12945866
> 
> 赞同：1
> 
> 时间：2012-10-18T01:34:50.277
> 
> 标签：html, internet-explorer, w3c

这是我的标题

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr" >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

当我在 ie8 上查看我的网页时，它会将浏览器模式推送到紧凑/可计算性视图并破坏我的网页样式。为什么这样做？我确实尝试在 Google 和 StackOverflow 上寻找答案，但仍然无法弄清楚。请帮助各位。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:38:25.730

贴出的代码应该是把 IE 设置为“标准模式”，并且在正常测试中[会这样做，但是 IE 8 在选择模式方面](http://hsivonen.iki.fi/doctype/#ie8)有一些奇怪的地方，比如受黑名单的影响。对于此类问题，最常见的解释可能是用户为域中的某个页面选择了兼容性视图。这使得 IE 8 以“兼容模式”显示来自该域（服务器）的所有页面。要解决此问题，请在“工具”菜单中选择兼容性视图设置，然后从列表中删除域。

# css - xhtml2pdf 图片占据正文宽度

> ID：12945867
> 
> 赞同：1
> 
> 时间：2012-10-18T01:34:51.773
> 
> 标签：css, image, xhtml2pdf

这是css的一部分：

```
.imgdiv{
  float:left;
  padding:0px;
  margin:0px 0px 10px 0px;
  background-color:yellow;
  width:55px;
  height:68px;
}

.zheader{
  padding:0px;
  margin:0px 0px 0px 65px;
} 
```

这是html的片段

```
<div>
  <div class="imgdiv">
     <!-- <img src="images/redzone.gif"> -->
  </div>
  <div class="zheader">
    <h1>Red Zone = Danger</h1>
    <h2>Everything is RED</h2>
  </div>
  <p></p>
</div> 
```

我想让图像浮动到左侧，而 h1/h2 浮动到图像的右侧。HTML 在浏览器（Chrome、IE 等）上正确呈现

将 HTML 放在 xhtml2pdf 中，imgdiv 总是占据整个父 div 宽度，因此无论宽度和高度值如何，都将 h1/h2 向下推。注释掉图像，然后 pdf 看起来正是我想要的样子。

我的结论是图像必须对 xhtml2pdf 如何呈现图像和 div 包含图像有一些影响。处理我的情况的正确方法是什么？

谢谢

# java - 存在多少个质数？

> ID：12945875
> 
> 赞同：1
> 
> 时间：2012-10-18T01:35:47.960
> 
> 标签：java, primes

我的代码有问题，我无法弄清楚，你能帮我找出我的错误吗？谢谢！

```
/// Calculate Prime
private static int countPrimes(int number){
    int count =0;
    for(int i=1; i<=MAX_PRIME; i++) {
        if(isPrime(i)){
        count++;
        }
    }
    System.out.println("Exactly "+  count + " prime numbers exist between "+number + " and 1000."); 
return number;
} 
```

这是我的结果：在 1 到 1000 之间恰好存在 180 个素数。这是错误的，必须是 168！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:03:19.283

似乎您的隐式参数 int number 从未在您的程序中使用过。试试这个代码：

```
private static int countPrimes(int number){
    int count =0;
    int countPrimes=0;
    if(number<2)
       return 0;
    for(int i=2; i<=number; i++) { //start i=2, because you know that 1 is not a prime number.
       for(int j=1; j<=i; j++){
            if(i%j==0)
                count++;                
        }
        if(count ==2)
            countPrimes++;            
        count=0;
    }
    return number;
} 
```

然后，在您的 runner 方法中，调用：

```
int numOfPrimes = countPrimes(10000); 
```

在此，您可以更改要计数的数字。在这个例子中，它计算的素数最多为 10000。

```
int numOfPrimes = countPrimes(100); 
```

这将计数最多 100 个素数。如果要跟踪素数，可以在程序中添加：

```
ArrayList<Integer> listOfPrimes = new ArrayList<Integer>();
private static int countPrimes(int number){
    int count =0;
    int countPrimes=0;
    if(number<2)
       return 0;
    for(int i=2; i<=number; i++) { //start i=2, because you know that 1 is not a prime number.
       for(int j=1; j<=i; j++){
            if(i%j==0)
                count++;                
        }
        if(count ==2){
            countPrimes++;
            listOfPrimes.add(i);
        }           
        count=0;
    }
    return number;
} 
```

为了检索您的号码，您可以执行以下操作：

```
System.out.println("Exactly "+  countPrimes(number) + " prime numbers exist between "+ "1" + " and " + number + ".");
System.out.println("These numbers are: ");
for(int i =0; i<listOfPrimes.size();i++){
    System.out.println(listOfPrimes.get(i));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:34:49.710

可以使用“埃拉托色尼筛法”找到素数。 [http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

以下程序将计算编号。给定极限的素数。

我正在接受限制 = 1000。

```
public class CountPrime {

public static void main(String[] args) {

boolean[] isPrime     = null;
int       Tprimes     = 0;
final int UPPER_BOUND = Integer.parseInt("1000");

/*------------------------------------------------------+
| Assuming all to prime                                 |
+------------------------------------------------------*/
isPrime = new boolean[UPPER_BOUND + 1];
for (int Tindex = 2; Tindex <= UPPER_BOUND; Tindex++) {
  isPrime[Tindex] = true;
} /*end for*/

/*------------------------------------------------------+
| Mark Non-Primes given the Upper Bound                 |
+------------------------------------------------------*/
for (int Tindex = 2; Tindex*Tindex <= UPPER_BOUND; Tindex++) {
  /*------------------------------------------------------+
  | For any prime all the multiples are non-prime         |
  +------------------------------------------------------*/
  if (isPrime[Tindex]) {
    for (int Tver = Tindex; Tindex*Tver <= UPPER_BOUND; Tver++) {
      isPrime[Tindex*Tver] = false;
    } /*end for*/
  } /*end if*/
} /*end for*/

/*------------------------------------------------------+
| Now, as we are done count the total primes            |
+------------------------------------------------------*/
for (int Tindex = 2; Tindex <= UPPER_BOUND; Tindex++) {
  if (isPrime[Tindex]) {
    Tprimes++;
  } /*end if*/
} /*end for*/
System.out.println("Total No. of Primes[" + Tprimes +
                   "], given the limit[" + UPPER_BOUND + "]");
} /*END OF main*/

} /*END OF CountPrime*/ 
```

输出：素数总数[168]，给定限制[1000]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T01:45:56.773

isPrice() 函数是什么？检查整数是否为质数的功能是什么？我认为如果你有它，你只需要这样做：

```
 for(int i=1; i<=MAX_PRIME; i++) {
     if(isPrime(i)){
        count++
     }
 }
 return count; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T02:06:37.057

我认为你返回一个错误的变量而不是`count`，如果`countPrimes`意味着计算 和 之间的素数`nunber`，`MaxPrime`那么你应该从 开始计数`number`，如下所示：

```
for (int i = number; i<=MAX_PRIME;i++) 
```

# spring - Spring Mvc @InitBinder 验证

> ID：12945880
> 
> 赞同：2
> 
> 时间：2012-10-18T01:36:26.077
> 
> 标签：spring, validation, spring-mvc

我有一个**Spring MVC**应用程序，并且我有一个实现**Validator**的 Validation 类。**使用@InitBinder**注解在控制器中调用此验证类。此验证发生在将记录插入数据库之前，但是当我想要进行更新时，我不需要从此验证类验证所有字段。我使用相同的视图插入记录和更新，并且该视图有一个控制器，用于处理基于**HttpRequest**的插入和更新。

Validation 类中是否有一种方法可以指定用户发出的请求，因此我不会再次验证用户名，因为它是更新的。

是不是我必须将一个 Http 请求传递给这个类，然后在该类中接收用户定义的操作，然后使用它来根据操作调整我的验证，如果是这样，该怎么做？我想根据用户请求验证验证类中的某些字段并插入数据库或更新。

**验证类**

```
public class OfficerRegistrationValidation implements Validator{

    private final Logger logger = Logger.getLogger(getClass());

    @Autowired
    public ValidateUserManager validateUserManager;

    public boolean supports(Class<?> clazz) {

        return Officers.class.equals(clazz);
    }

    public void validate(Object target, Errors errors) {

        Officers officer = (Officers) target;

    if (officer.getUserName() == null){....................... 
```

**处理请求的控制器函数**

```
 @RequestMapping(value="officer_registration.htm", method=RequestMethod.POST)
     public ModelAndView handleRequest(@Valid @ModelAttribute Officers officer, 
                                        BindingResult result,
                                        ModelMap m,
                                        Model model,
                                        HttpServletRequest request,
                                        HttpServletResponse response)throws Exception{

         try{
             if(result.hasErrors()){

                 model.addAttribute("division", myDivision);
                 model.addAttribute("position", myPosition);
                 model.addAttribute("gender", myGender);
                 return new ModelAndView("officer_registration");

            }else{

                //check the request if its an update or an insert
                String user_request = request.getParameter("user_request");
                logger.info("The Users Request Was " + user_request);

                if (user_request.equals("Save")){

                        officerManager.RegisterOfficer(officer);
                        model.addAttribute("badgeNoStatus","true");
                        model.addAttribute("saveBtnStatus","disabled");
                        model.addAttribute("userNameStatus","true");
                        model.addAttribute("startDateStatus","true");
                        model.addAttribute("icon","ui-icon ui-icon-circle-check");
                        model.addAttribute("results","Record Was Saved");

                }else{//if its an update
                    //only need certain validation from the validation class here 
                    officerManager.UpdateOfficer(officer); 
```

.....................

**2012 年 10 月 18 日更新**

当我用 @Component 注释类并为此添加 @Autowired 私有 HttpServletRequest 请求以及 getter 和 setter 时，我收到以下错误：

**错误日志**

```
java.lang.NullPointerException
    at org.apache.commons.dbcp.BasicDataSource.close(BasicDataSource.java:486)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:300)
    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:226)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)
    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
1580 [http-8084-2] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'officerRegistrationValidation' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
    ... 36 more
Caused by: java.lang.NullPointerException
    at com.crimetrack.service.OfficerRegistrationValidation.<init>(OfficerRegistrationValidation.java:30)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 38 more 
```

**添加 org.springframework.web.context.ContextLoaderListener 后的错误日志**

```
850  [http-8084-2] DEBUG org.springframework.beans.factory.support.DisposableBeanAdapter  - Invoking destroy method 'close' on bean with name 'dataSource'
850  [http-8084-2] WARN  org.springframework.beans.factory.support.DisposableBeanAdapter  - Invocation of destroy method 'close' failed on bean with name 'dataSource'
java.lang.NullPointerException
    at org.apache.commons.dbcp.BasicDataSource.close(BasicDataSource.java:486)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:300)
    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:226)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)
    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
850  [http-8084-2] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'officerRegistrationValidation' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.manager.ManagerServlet.start(ManagerServlet.java:1276)
    at org.apache.catalina.manager.HTMLManagerServlet.start(HTMLManagerServlet.java:625)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:136)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.crimetrack.service.OfficerRegistrationValidation]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
    ... 36 more
Caused by: java.lang.NullPointerException
    at com.crimetrack.service.OfficerRegistrationValidation.<init>(OfficerRegistrationValidation.java:31)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 38 more 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:aop="http://www.springframework.org/schema/aop"
         xmlns:tx="http://www.springframework.org/schema/tx"
         xmlns:context="http://www.springframework.org/schema/context"

         xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/aop 
           http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
           http://www.springframework.org/schema/tx 
           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 

<!-- __________________________________________________________________________________________________ -->        

    <bean id="officerManager" class="com.crimetrack.service.OfficerManager">
        <property name ="officerDao" ref="officerDao"/>
    </bean>         
<!-- __________________________________________________________________________________________________ -->              

    <bean id="countryManager" class="com.crimetrack.service.CountryManager">
        <property name="countryDao" ref="countryDao"/>
    </bean>
    <bean id="countryDao" class="com.crimetrack.jdbc.JdbcCountryDAO">
        <constructor-arg index="0" ref="dataSource"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->

    <bean id="authenticationManager" class="com.crimetrack.service.AuthenticationManager">
        <property name="loginDao" ref="loginDao" /> 
    </bean>    
    <bean id="loginDao" class="com.crimetrack.jdbc.JdbcLoginDAO">
         <constructor-arg index="0" ref="dataSource"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->  

    <bean id="divisionManager" class="com.crimetrack.service.DivisionManager">
        <property name="divisionDao" ref="divisionDao"/>
    </bean>    
    <bean id="divisionDao" class="com.crimetrack.jdbc.JdbcDivisionDAO">
         <constructor-arg index="0" ref="dataSource"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

     <bean id="positionManager" class="com.crimetrack.service.PositionManager">
        <property name="positionDao" ref="positionDao"/>
    </bean>    
    <bean id="positionDao" class="com.crimetrack.jdbc.JdbcPositionDAO">
         <constructor-arg index="0" ref="dataSource"/>
    </bean>      
<!-- __________________________________________________________________________________________________ -->    

    <bean id="genderManager" class="com.crimetrack.service.GenderManager">
        <property name="genderDao" ref="genderDao"/>
    </bean>

    <bean id="genderDao" class="com.crimetrack.jdbc.JdbcGenderDAO" >
         <constructor-arg index="0" ref="dataSource"/>
    </bean> 
<!-- __________________________________________________________________________________________________ --> 

    <bean id="officerRegistrationValidation" class="com.crimetrack.service.OfficerRegistrationValidation">
        <property name="validateUserManager" ref="validateUserManager"/>            
    </bean>

    <bean id="validateUserManager" class="com.crimetrack.service.ValidateUserManager">
            <property name="officerDao" ref="officerDao"/>
    </bean>

    <bean id="officerDao" class="com.crimetrack.jdbc.JdbcOfficersDAO" >
            <constructor-arg index="0" ref="dataSource"/>
    </bean>         
<!-- __________________________________________________________________________________________________ --> 

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <property name="driverClassName" value="${jdbc.driverClassName}"/>
            <property name="url" value="${jdbc.url}"/>
            <property name="username" value="${jdbc.username}"/>
            <property name="password" value="${jdbc.password}"/>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

    <bean id="propertyConfigurer" 
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:jdbc.properties</value>
            </list>
        </property>
    </bean>
<!-- __________________________________________________________________________________________________ -->    

    <bean id="transactionManager" 
          class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

  </beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:40:27.913

我认为如果您将验证器标记为，`@Component`那么您可以使用以下代码将 HttpRequest 对象注入您的验证器 bean

```
private @Autowired HttpServletRequest request; 
```

# java - Eclipse - 如何给 Java 控制台无限长度（在 # 行中）

> ID：12945882
> 
> 赞同：16
> 
> 时间：2012-10-18T01:36:42.510
> 
> 标签：java, eclipse, console

> **可能重复：**
> [调整 Eclipse 控制台大小](https://stackoverflow.com/questions/2600653/adjusting-eclipse-console-size)

我正在尝试调试已设置为在本地运行的应用程序，并将其所有`System.out.println()`语句写入 Eclipse 中的 Java 控制台。

问题是，它吐出了成千上万行，当应用程序完成处理并关闭时，我只能看到最后约 25% 的 sysout 语句。

我注定要失败吗？或者 Eclipse 中是否有一个设置可以让我取消限制控制台保留在内存中或保持可见的行数。

而且，如果这不可能，有没有办法将输出重定向到一个文件或*可以*容纳 40,000 多行输出的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-18T01:55:36.117

转到 Window > Preferences > Run/Debug > Console 有一个复选框“限制控制台输出”和一个用于输入控制台缓冲区大小的文本字段。

试试这个。它对我有用，但我的代码输出不超过 1000 行。

# java - Eclipse Intellisense 操作

> ID：12945884
> 
> 赞同：0
> 
> 时间：2012-10-18T01:37:04.143
> 
> 标签：java, eclipse

当我输入代码时，eclipse 是否会立即在类文件中查找以便检索智能感知的类成员，或者是否有一个单独创建的文件，eclipse 引用了该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:11:37.577

我想您是在询问 Eclipse JDT 内容辅助是如何工作的。当您按下`.`时，会发生内容辅助调用。这会触发 JDT 中的*协调*操作。协调有点像迷你编译。当前文件被解析和解析，但没有创建字节码（这就是协调的内容）。协调的结果用于填充内容辅助。

这只是触及正在发生的事情的表面。实际上，缓存、饮食解析以及根据需要使用和创建的绑定非常复杂。

# android - wrap_content 高度，但限于父级的一半

> ID：12945885
> 
> 赞同：10
> 
> 时间：2012-10-18T01:37:17.280
> 
> 标签：android, layout

我想要的是有一个垂直排列的 2 个视图的布局。让我们称顶视图 A 和底部视图 B。我希望给 B 的高度量为其正常高度（即包装内容），但我不希望它被给予超过一半的可用空间。A得到剩下的东西。

另一种说法是，A 应始终获得至少 50% 的可用高度，而 B 应获得最多 50%。

我似乎无法找到一种简单的方法来实现这一目标。我可以将两个布局高度都设置为 0 并赋予它们相同的权重，这使它们始终为 50%，但如果 B 小于 50%，则应该只给出它需要的值。

我能看到的唯一方法是使用 A 或 B 的自定义类并覆盖 onMeasure 以将高度限制为父级的 50%，但似乎应该有更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:47:12.687

好的，我现在明白了。如果我理解正确，你想要这样：

```
if A > B -> do nothing 
if B > A & B > parent layout -> 50% to both of them
if B > A & B < parent layout -> A = parent layout - B 
```

我必须全部完成，`onWindowFocusChanged`因为否则在 onCreate 中，视图的高度将返回 0。我使用 2 个 LinearLayouts 作为子布局来完成它，但是您可以随意取用。

我的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:id="@+id/parent_lay"
    android:orientation="vertical"
    android:layout_height="match_parent" >

//Layout A:
    <LinearLayout
        android:id="@+id/lay_1"
        android:layout_width="match_parent"
       android:background="@android:color/background_dark"
        android:layout_height="10dp" >
    </LinearLayout>
//Layout B:
    <LinearLayout
        android:id="@+id/lay_2"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:background="#123456" >

    </LinearLayout>

</LinearLayout> 
```

主要活动：

```
public class MainActivity extends Activity {
    LinearLayout parent_lay;
    LinearLayout lay_1;
    LinearLayout lay_2;
    int parent_height;
    int lay_1_height;
    int lay_2_heigth;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        // TODO Auto-generated method stub
        super.onWindowFocusChanged(hasFocus);
        parent_lay = (LinearLayout) findViewById(R.id.parent_lay);
        lay_1 = (LinearLayout) findViewById(R.id.lay_1);
        lay_2 = (LinearLayout) findViewById(R.id.lay_2);
        lay_1_height = lay_1.getHeight();
        lay_2_heigth = lay_2.getHeight();
        parent_height = parent_lay.getHeight();

        if (lay_2.getHeight() > lay_1.getHeight()
                && lay_2.getHeight() > (parent_lay.getHeight() / 2)) {

            lay_1.setLayoutParams(new LinearLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, 0, 1));

            lay_2.setLayoutParams(new LinearLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, 0, 1));

        } else if (lay_2.getHeight() < (parent_lay.getHeight() / 2)) {
            lay_1.setLayoutParams(new LinearLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, (parent_height - lay_2_heigth)));

        }

    }

} 
```

示例：如果 A 是**60dp**而 B 是**40dp**：

![在此处输入图像描述](../Images/790226f0f47b1d91d695a6dba559518d.png)

如果 A 是**60dp**而 B 是**400dp**：

![在此处输入图像描述](../Images/24e8a9c2f6b0521257a7778028f6a7bc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:35:37.903

您必须编写自己的组件来实现这一点。

例如，如果您在此处使用 LinearLayout，则可以使用过度的 onMeasure 方法扩展 LinearLayout。您可以像这样实现 onMeasure：

```
@Override
protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    final int width = getMeasuredWidth();
    final int height = getMeasuredHeight();
    setMeasuredDimension(width, height / 2);
} 
```

这段代码不够优雅。如果你真的想把它做好，请从 Android 源代码 (http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/) 中复制原始的 onMeasure 方法android/widget/LinearLayout.java#LinearLayout.onMeasure%28int%2Cint%29)，然后`measureVertical(int widthMeasureSpec, int heightMeasureSpec)`在`mTotalLength = mTotalLength / 2`.

关于onMeasure的详细信息，请访问[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)和[http://developer.android.com/reference/android/view/View.html#onMeasure （整数](http://developer.android.com/reference/android/view/View.html#onMeasure(int)，整数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-21T18:07:20.163

现在可以使用 ConstraintLayout 达到预期的效果：

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintBottom_toTopOf="@+id/containerFrameLayout"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"/>

    <android.support.constraint.Guideline
        android:id="@+id/guideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:layout_constraintGuide_percent="0.5"/>

    <FrameLayout
        android:id="@+id/containerFrameLayout"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        app:layout_constrainedHeight="true"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="@+id/guideline"
        app:layout_constraintVertical_bias="1">

        <TextView
            android:id="@+id/textView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>
    </FrameLayout>
</android.support.constraint.ConstraintLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T01:47:33.743

创建一个带有两个内部框架的线性布局，每个框架都有权`.5`重。**在**这些框架内，放置您的视图，将它们设置为`wrap_content`或`match_parent`视情况而定。

# javascript - 正则表达式中的批量转义

> ID：12945890
> 
> 赞同：4
> 
> 时间：2012-10-18T01:38:30.977
> 
> 标签：javascript, regex

我的正则表达式不是那么热，所以为这个非常新的问题道歉。

我正在使用 String.replace 将字符串“../../libs/bootstrap/less”更改为“bootstrap”。目前我的正则表达式如下所示：

```
myString.replace(\.\.\/\.\.\/libs\/bootstrap\/less/g, 'bootstrap); 
```

我认为必须有更好的方法来逃避这条路。是否可以像 /\"../../foo/bar/baz"/ 一样指定要转义的一整块内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:01:37.190

据我所知，正则表达式中没有全局/块转义。如果您想避免在这种情况下转义，您也可以执行以下操作：

```
myString.replace(/([.]{2}[/]){2}libs[/]bootstrap[/]less/g, "bootstrap"); 
```

. 和 / 在字符集中指定时不需要转义 []

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T01:54:39.697

为了更容易在正则表达式中引用*什么，您可以使用以下代码：*

```
RegExp.quote = function(str) {
     return str.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1");
}; 
```

然后你像这样应用它：

```
var expr = RegExp.quote('../../libs/bootstrap/less');
mystring.replace(new RegExp(expr, 'g'), 'bootstrap'); 
```

# html - 响应式 CSS 圆圈

> ID：12945891
> 
> 赞同：24
> 
> 时间：2012-10-18T01:38:33.130
> 
> 标签：html, css, responsive-design, css-shapes

## 目标：

**响应式 CSS 圆圈：**

1.  以相等的半径缩放。
2.  半径可以按百分比计算。
3.  半径可以通过媒体查询来控制。

* * *

*如果解决方案是**javascript**，我仍然需要模拟媒体查询触发器。我不需要“媒体查询”，但我确实希望能够在某些宽度下按百分比控制半径：*

```
@media (max-width : 320px) 
{
    .x2{padding: 50%;}
}

@media (min-width : 321px) and (max-width : 800px)
{
    .x2{padding: 25%;}
}

@media (min-width: 801px)
{
    .x2{padding: 12.5%;}
} 
```

**这是我到目前为止所拥有的：**

[http://jsfiddle.net/QmPhb/](http://jsfiddle.net/QmPhb/)

```
<div class="x1">
    <div class="x2">
        lol dude      
    </div>
    <div class="x2"></div>
    <div class="x2"></div>
    <div class="x2"></div>
</div>

.x1
{
    float:left;
    width:100%;
}

.x2
{
    display:block;
    float:left;
    padding: 12.5%;          //Currently being used to control radius.
    width:auto;
    height:auto;
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
    -khtml-border-radius: 50%;
    background:#eee;
    text-align:center;
} 
```

## 问题：

**在此解决方案中，将内容添加到圆圈时：**

*   当缩放超过可用填充时，形状会扭曲。
*   增加半径的大小。

* * *

## 更新：

我在这里为此构建了一个可行的解决方案： [Responsive CSS Circles](https://stackoverflow.com/questions/12945891/responsive-css-circles/14013200#14013200)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T01:55:34.510

您不需要对此进行`@media`查询。这是我的尝试，纯 CSS：

```
.x1 {
    overflow:hidden;
}
.x1 .x2 {
    display:block;
    float:left;
    padding: 12.5%;
    width:auto;
    height:auto;
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
    -khtml-border-radius: 50%;
    background:#eee;
    text-align:center;
    position: relative;
}
.x1 .x2 span {
    position: absolute;
    width: 100%;
    left: 0;
    top: 48%;
    line-height: 1em;
    height: 1em;
    font-size: 100%;
    overflow: hidden;
}​ 
```

[**小提琴**](http://jsfiddle.net/QmPhb/10/)

[**全屏**](http://jsfiddle.net/QmPhb/10/embedded/result/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T19:49:16.650

## 更短的代码

此解决方案减少了您的代码大小，但保留了功能。我保留了原来`.x#`的 , 删除了`.x0`,`.x3`和`.x6`那些不需要的。因此，在最终解决方案中，您可能会重新编号（但我希望您看看消除了什么）。

您的任何“分裂”需要不同`top`或`left`设置的圆圈的部分都需要有一个满足或超过`.x2 > div`要覆盖的选择器的选择器，因此为什么我`.x2 > .x7`的某些选择器有等。

（如以下评论中所述，[Chrome](https://stackoverflow.com/questions/5736503/how-to-make-css3-rounded-corners-hide-overflow-in-chrome-opera)在赏金开始时 OP 发布的原始技术存在错误问题。这并不能解决这些问题，因此请在另一个浏览器中查看以下内容。）

## [这是修改后的小提琴。](http://jsfiddle.net/WTWrB/9/)

**HTML**

```
<div class="x1">
        <div class="x2">
                <!-- BEG Content -->
                <div class="x4">
                    dude
                </div>
                <div class="x7">
                    dude
                </div>
                <div class="x8">
                    dude
                </div>
                <div class="x5">
                    dude
                </div>
                <!-- END Content -->
        </div>
        <div class="x2"></div>
        <div class="x2"></div>
        <div class="x2"></div>
    </div> 
```

**CSS**

```
.x1 {
    margin:0px auto;
}
.x2 {
    overflow:hidden;
    display:block;
    float:left;
    width:auto;
    height:auto;
    position: relative;
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
    -khtml-border-radius: 50%;
    background:#eee;
}

/* BEG Content */
.x2 > div {
    position: absolute;
    text-align: center;
    top: 0;
    left: 0;
}
.x4,.x5 {
    width:100%;
    height: 20%;
}
.x2 > .x7, .x2 > .x8 {
    width:50%;
    height: 60%;
    top: 20%;
}
.x4 {
    background-color:blue;
}
.x2 > .x5 {
    background-color:yellow;
    top: 80%;
}

.x7 {
    background-color:green;
}
.x2 > .x8 {
    background-color:orange;
    left: 50%;
}
/* END Content */
@media (max-width: 320px)
{
    .x2 {padding: 50%;}
}

@media (min-width: 321px) and (max-width: 800px)
{
    .x2 {padding: 25%;}
}

@media (min-width: 801px)
{
    .x1 {width:800px}
    .x2 {padding: 12.5%;}
} 
```

**编辑：**根据评论，看来 OP 需要的东西更像**[是这个小提琴提供的控件](http://jsfiddle.net/WTWrB/23/)**（在 Chrome 中不起作用；在此编辑时，OP 没有回复我以知道这是否是所需的功能类型）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-23T17:47:34.620

## 解决方案：

[http://jsfiddle.net/WTWrB/](http://jsfiddle.net/WTWrB/)

**DIV 结构：**

*我们使用`overflow:hidden`in溢出 子元素的`.x2`背景颜色。`.x3`*

*注意内容开始于`.x3`*

```
<div class="x0">
    <div class="x1">
        <div class="x2">
            <div class="x3">
                <!-- BEG Content -->
                <div class="x4">
                    dude
                </div>
                <div class="x6">
                    <div class="x7">
                        dude
                    </div>
                    <div class="x8">
                        dude
                    </div>
                </div>                
                <div class="x5">
                    dude
                </div>
                <!-- END Content -->
            </div>
        </div>
        <div class="x2"></div>
        <div class="x2"></div>
        <div class="x2"></div>
    </div>
</div> 
```

**CSS：**

```
@media (max-width: 320px)
{
    .x2 {padding: 50%;}
}

@media (min-width: 321px) and (max-width: 800px)
{
    .x2 {padding: 25%;}
}

@media (min-width: 801px)
{
    .x1 {width:800px}
    .x2 {padding: 12.5%;}
}
.x0 {
    float:left;
    width:100%;
}
.x1 {
    margin:0px auto;
}
.x2 {
    overflow:hidden;
    display:block;
    float:left;
    width:auto;
    height:auto;
    position: relative;
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
    -khtml-border-radius: 50%;
    background:#eee;
}
.x3 {
    position: absolute;
    width: 100%;
    left: 0;
    top:0;
    font-size: 100%;
    float:left;
    height:100%;
    background-color:red;
}
/* BEG Content */
.x3 div{float:left;}
.x4,.x5,.x6 {
    width:100%;
}
.x7,.x8 {
    width:50%;
    float:left;
    height:100%;
}
.x4,.x5,.x7,.x8 {
    text-align:center;
}
.x4 {
    background-color:blue;
    height:20%;
}
.x5 {
    background-color:yellow;
    height:20%;
}
.x6 {
    height:60%;
}
.x7 {
    background-color:green;
}
.x8 {
    background-color:orange;
}
/* END Content */ 
```

![响应式 CSS 圆圈](../Images/a7abe857d131bf32ad6488a252f3f13b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T12:20:05.307

我知道这个解决方案与这里建议的有很大不同，但我仍然认为值得提出。

我使用图像作为掩码来创建圆，并利用了这样一个事实，即当填充指定为百分比时，它是根据其父元素的宽度而不是高度来计算的。这使我能够创建一个完美的正方形。

[此处](http://jsfiddle.net/bruno/wwtHR/)按比例调整大小的圆圈演示

HTML 代码

```
<div class="container">
    <img class="circle" src="circleImage.png">
</div> 
```

CSS 代码

```
.container {
    position: relative;
    float: left;
    width: 50%;
    height: 0;
    padding-bottom: 50%;
    background-color: #bbb;

}

.circle { 
    position: absolute;
    width: 100%;
    left: 0;
    top: 0;
    height: auto;
    z-index: 1;
}

@media (max-width: 320px) {
    .container { width: 100%; padding-bottom: 100%; }
}

@media (min-width: 321px) and (max-width: 800px) {
    .container { width: 50%; padding-bottom: 50%; }
}

@media (min-width: 801px) {
    .container { width: 25%; padding-bottom: 25%; }
} 
```

[根据您的问题，上述圆圈的演示在这里](http://jsfiddle.net/bruno/YbMng/)被细分为多个部分

# java - Java - 关于冲突处理和 get() 方法的 HashMap 混淆

> ID：12945894
> 
> 赞同：4
> 
> 时间：2012-10-18T01:39:08.740
> 
> 标签：java, hashmap

我正在使用 a `HashMap`，但我无法直接回答该`get()`方法在发生碰撞时的工作原理。

假设`n > 1`对象被放置在同一个**key**中。它们是否存储在`LinkedList`? 它们是否被覆盖，以便仅放置在该键中的最后一个对象不再存在？他们是否使用其他碰撞方法？

如果它们被放置在 a 中`LinkedList`，有没有办法检索整个列表？如果没有，是否有其他内置的**Java**地图我可以在其中执行此操作？

就我的目的而言，单独的链接将是理想的，就好像存在冲突一样，我需要能够查看列表并获取有关其中所有对象的信息。**在Java**中执行此操作的最佳方法是什么？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T01:43:20.597

[Hashmap.put()](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#put%28K,%20V%29)的文档清楚地指出，“将指定的值与此映射中的指定键相关联。**如果映射先前包含键的映射，则替换旧值**”

如果您想要一个与键关联的对象列表，则将列表存储为值。

请注意，“冲突”通常是指 HashMap 的内部工作，其中两个键具有相同的哈希值，而不是对两个不同的值使用相同的键。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T01:43:23.580

> 它们是否被覆盖，以便仅放置在该键中的最后一个对象不再存在？

是的，假设您使用同一个键放置多个值（根据`Object.equals`，而不是`Object.hashCode`。）这是在[`Map.put`javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#put%28K,%20V%29)中指定的：

> 如果映射先前包含键的映射，则旧值将替换为指定值。

如果你想将一个键映射到多个值，你可能最好使用像 Guava's 这样的东西[`ListMultimap`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)，[`ArrayListMultimap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ArrayListMultimap.html)具体来说，它将键映射到值列表。（披露：我为 Guava 做出了贡献。）如果你不能容忍第三方库，那么你真的必须有一个`Map<Key, List<Value>>`，尽管这可能会有点笨拙。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T01:43:08.997

> 假设 n > 1 个对象被放置在同一个键中。它们是否存储在链表中？它们是否被覆盖，以便仅放置在该键中的最后一个对象不再存在？他们是否使用其他碰撞方法？

同一键可能有单个实例，因此最后一个会覆盖前一个

```
Map<String, Integer> map = new HashMap<String, Integer>();
map.put("a", 1);
map.put("a", 2);// it overrides 1 and puts 2 there 
```

链接来自不同键的相同哈希值

* * *

**看**

*   [Java论文哈希表工作](http://javapapers.com/core-java/java-hashtable/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T02:02:14.667

引用：“假设 n > 1 个对象被放置在同一个键中。它们是否存储在链表中？它们是否被覆盖，以便仅放置在该键中的最后一个对象不再存在？它们是否使用其他碰撞方法？

是的，如果 hashmap 在此键下包含某些内容，它将覆盖它。

您可以实现自己的类来处理这个或更简单的使用 HashMap> 在其中 K 是您的 Key Object 而 V 是对象值。请记住，当您执行 map.get(K) 时，最后一个解决方案将检索一个列表或您选择的实现（即：ArrayList），因此该实现的所有方法都可供您使用，并且可能满足您的要求。例如，如果您使用 Arraylist，您有大小、trimToSize、removeRange 等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T02:05:29.783

java中散列的冲突解决不是基于链接。据我了解，JDK 使用双散列，这是开放寻址的最佳方式之一。所以没有列表将与哈希槽相关联。

您可以将哈希函数解析为相同键的对象放入列表中，并且可以在表/映射中更新此列表。

```
package hashing;

import java.util.HashMap;
import java.util.Map;

public class MainAnimal {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Animal a1 = new Animal(1);
        Animal a2 = new Animal(2);

        Map<Animal, String> animalsMap = new HashMap<Animal, String>();

        animalsMap.put(a1,"1");
        animalsMap.put(a2,"2");

        System.out.println(animalsMap.get(a1));

        Map<String, Integer> map = new HashMap<String, Integer>();
        map.put("a", 1);
        map.put("a", 2);// it overrides 1 and puts 2 there

        System.out.println(map.get("a"));       

    }

}

class Animal {

    private int index = 0;

    Animal(int index){
        this.index = index;
    }

    public boolean equals(Object obj){
        if(obj instanceof Animal) {
            Animal animal = (Animal) obj;
            if(animal.getIndex()==this.getIndex())
                return true;
            else
                return false;
        }
        return false;
    }

    public int hashCode() {
        return 0;
    }

    public int getIndex() {
        return index;
    }

    public void setIndex(int index) {
        this.index = index;
    }

} 
```

在上面的代码中，我展示了两个不同的东西。

案例 1 - 两个不同的实例解析为相同的 hashkey 案例 2 - 两个相同的实例充当两个不同条目的键。

动物实例 a1 和 a2 解析为相同的键。但它们不会被覆盖。散列机制通过散列槽进行探测，并将条目放置在不同的槽中。

对于第二种情况，键解析为相同的哈希键，并且 equals 方法也满足。因此发生了覆盖。

现在，如果在动物类中我以这种方式覆盖 equals 方法 -

```
 public boolean equals(Object obj){
//      if(obj instanceof Animal) {
//          Animal animal = (Animal) obj;
//          if(animal.getIndex()==this.getIndex())
//              return true;
//          else
//              return false;
//      }
//      return false;
        return true;
    } 
```

覆盖发生。行为就像使用相同的实例。由于 a1 和 a2 在同一个桶中，并且 equals 也返回 true。

# javascript - 画布（或 javascript）上的简单精灵表动画

> ID：12945895
> 
> 赞同：0
> 
> 时间：2012-10-18T01:39:19.167
> 
> 标签：javascript, html, animation, canvas, sprite

到目前为止，我有这个：

场景是**w** `5507px` X **H** 的精灵表， 并且 png 被命名为动画**png**或其他东西`2100px``550 x 700`

 **图像在背景上`div`，它转到坐标背景位置，但到目前为止，动画循环播放，我需要它停止，我一直在尝试一些解决方案，但没有...我会很感激任何想法，请检查代码

```
<style>
    #anim{
      width:550px;
      height:700px;
      background-image:url(anim3.png);
    }
</style>

    <title>Untitled Document</title>
    </head>

    <body onload="init()">
    <script>

    var imageWidth=5500,
    imageHeight=2100,
    xpos=0,
    ypos=0,
    index=0,
    numFrames= 30,
    frameSize=550,
    frameHeight=700,
    div;

    function init(){
        div = document.getElementById('anim');
        loop();
        setInterval(loop, 1000 / 10);

    }

    function loop() {

                //multiplying by -1 because we want to move the image to the left and up to reveal the area we want to see.
                div.style.backgroundPosition = (-xpos)+"px "+(-ypos)+"px";

                //each time around we add the frame size to our xpos, moving along the source image.
                xpos += frameSize;
                ypos +=frameHeight;
                //increase the index so we know which frame of our animation we are currently on.
                index += 1;

                //if our index is higher than our total number of frames, we're at the end and better start over.
                if (index == 30) {
                    div.style.backgroundPosition =(imageWidth)+"px"+(imageHeight)+"px";
                //if we've gotten to the limit of our source image's width, we need to move down one row of frames.                         
                } else if (xpos +frameSize > imageWidth){
                    xpos =0;
                    ypos += 700;
                }

            }

     </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:02:45.087

试试这个，使用 clearInterval() 停止循环：

```
var result;

function init(){
    div = document.getElementById('anim');
    loop();
    result = setInterval(loop, 1000 / 10);

}

function loop() {

            //multiplying by -1 because we want to move the image to the left and up to reveal the area we want to see.
            div.style.backgroundPosition = (-xpos)+"px "+(-ypos)+"px";

            //each time around we add the frame size to our xpos, moving along the source image.
            xpos += frameSize;
            ypos +=frameHeight;
            //increase the index so we know which frame of our animation we are currently on.
            index += 1;

            //if our index is higher than our total number of frames, we're at the end and better start over.
            if (index == 30) {
                div.style.backgroundPosition =(imageWidth)+"px"+(imageHeight)+"px";
            //if we've gotten to the limit of our source image's width, we need to move down one row of frames.         
                clearInterval(result) ;                
            } else if (xpos +frameSize > imageWidth){
                xpos =0;
                ypos += 700;
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:30:25.867

尝试这个：

**[http://jsfiddle.net/BgSnL/3/](http://jsfiddle.net/BgSnL/3/)**

```
var div,
    imageWidth = 427,
    imageHeight = 140,
    frameWidth = 61,
    frameHeight = 70,
    curFrame = { x: 0, y: 0 };

function init(){
    div = document.getElementById('anim');
    loop();
    setInterval(loop, 1000 / 10);
}

function loop()
{
    var xOffset = frameWidth * curFrame.x,
        yOffset = frameHeight * curFrame.y;

    div.style.backgroundPosition = -(xOffset) + "px " + -(yOffset) + "px";

    // if we can, iterate to the next column
    if ((xOffset + frameWidth) < imageWidth) {
        curFrame.x += 1;

    // else if we can, drop down a row
    } else if ((yOffset + frameHeight) < imageHeight) {
        curFrame.x = 0;
        curFrame.y += 1;

    // reset        
    } else {
        curFrame.x = 0;
        curFrame.y = 0;
    }
}

init();​ 
```

当前帧 x/y 偏移通过对象进行跟踪。每次迭代我们都想做以下之一：

*   移至下一列
*   到达行尾，下拉一行
*   到达动画的结尾，重新开始**

# ios - CoreData：每次访问 NSData 属性时磁盘使用量都会增加

> ID：12945896
> 
> 赞同：0
> 
> 时间：2012-10-18T01:39:42.300
> 
> 标签：ios, xcode, core-data, instruments

TL:DR - 我有一个 NSData 属性，我在其中保存相机图像，每次访问该属性时，我的磁盘使用量都会增加。

长版：我的应用程序有一个 Photo 类，用于保存从相机拍摄的照片。这是它自动生成的代码：

```
@interface Photo : NSManagedObject

@property (nonatomic, retain) NSData * original;
@property (nonatomic, retain) NSData * thumbnail;
@property (nonatomic, retain) NSDate * createdAt;
@property (nonatomic, retain) Patient *patient;

@end 
```

两者`*original`和`*thumbnail`都已`Allows External Storage`在 xcdatamodel 文件中设置。每个照片对象在保存后使用大约 4MB 的空间。在代码中的某一时刻，我这样做：

```
NSData *original = photo.original 
```

由于某种原因，第一次运行该行时，对于每个对象，应用程序的磁盘空间使用量增加了 4MB。就好像出于某种原因，Core Data 正在复制并再次保存包含在`photo.original`

我不知道为什么会发生这种情况，并且 Instruments 没有帮助，因为核心数据配置文件不适用于设备并且模拟器不支持相机。

有人对问题可能是什么有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:04:17.693

对我来说听起来很合理的行为。加载 NSData 实例时，系统将尝试将该缓冲区保留在内存中。但如果它们太大，你的数据最终会在虚拟内存中，由缓存文件支持。在 iPhone 4S 上，最大的图像捕获为 3264×2448，可以轻松转换为您看到的 4MB 文件。

更改您的核心数据模型，以便您只保留文件路径。然后将图像完整地保存为单独的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:31:15.537

考虑暂时更改您的持久存储类型，[如 Apple 文档中所述](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html)。XML 是调试的好选择，因为速度不是问题。从那里您可以直接打开您的商店文件并观察它的扩展情况。

# paypal - 做直接支付api：paypal沙箱没有响应

> ID：12945897
> 
> 赞同：1
> 
> 时间：2012-10-18T01:39:53.563
> 
> 标签：paypal, paypal-sandbox

我正在使用 angelleye 库中的 codeigniter 库（[http://www.angelleye.com/download-codeigniter-php-library-for-paypal-payments-pro/](http://www.angelleye.com/download-codeigniter-php-library-for-paypal-payments-pro/)）。几天下来，它运行顺利，没有任何错误。今天我测试它时，我没有收到paypal的回复。

我联系了作者（Andrew），他说paypal沙箱服务器正在超时，直接付款。我的问题是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:08:00.070

PayPal 沙箱有时会这样做，不幸的是，我们对此无能为力，只能等待 PayPal 让事情顺利进行。

沙盒已经运行了一段时间，但似乎随着他们最近所做的许多更改（他们正在开发一个新的沙盒，并且他们现在正在推动 PayFlow 而不是 DirectPayment）上的 DirectPayment API沙盒一直在受苦。

事实上，刚才我正要回应并让你知道我上次尝试它工作正常。我去测试了一下，果然又超时了。不过，我又试了一次，效果很好。所以不幸的是，这些天来，沙盒在 DirectPayment 中非常受欢迎。

您可以随时切换到 PayFlow，这就是他们最近所推动的，如果您拥有最新版本，我的库现在支持它。

# java - 如何模拟 HttpServletRequest？

> ID：12945907
> 
> 赞同：36
> 
> 时间：2012-10-18T01:41:20.377
> 
> 标签：java, junit, easymock

我有一个查找查询参数并返回布尔值的函数：

```
 public static Boolean getBooleanFromRequest(HttpServletRequest request, String key) {
        Boolean keyValue = false;
        if(request.getParameter(key) != null) {
            String value = request.getParameter(key);
            if(keyValue == null) {
                keyValue = false;
            }
            else {
                if(value.equalsIgnoreCase("true") || value.equalsIgnoreCase("1")) {
                    keyValue = true;
                }
            }
        }
        return keyValue;
    } 
```

我的 pom.xml 中有 junit 和 easymock，我该如何模拟 HttpServletRequest ？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T01:55:20.040

使用一些模拟框架，例如[**Mockito**](http://code.google.com/p/mockito/)或[**JMock**](http://www.jmock.org/)，它们具有此类对象的模拟能力。

在 Mockito 中，您可以像这样进行模拟：

```
 HttpServletRequest  mockedRequest = Mockito.mock(HttpServletRequest.class); 
```

有关 Mockito 的详细信息，请参阅：[我如何饮用它？](http://site.mockito.org/#how)在 Mockito 网站上。

在 JMock 中，您可以模拟如下：

```
 Mockery context = new Mockery();
 HttpServletRequest  mockedRequest = context.mock(HttpServletRequest.class); 
```

关于jMock的详细信息，请参考：[jMock - 入门](http://www.jmock.org/getting-started.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-18T02:59:10.640

HttpServletRequest 与任何其他接口非常相似，因此您可以按照[EasyMock 自述文件进行模拟](http://easymock.org/user-guide.html#mocking)

这是一个如何对 getBooleanFromRequest 方法进行单元测试的示例

```
// static import allows for more concise code (createMock etc.)
import static org.easymock.EasyMock.*;

// other imports omitted

public class MyServletMock
{
   @Test
   public void test1()
   {
      // Step 1 - create the mock object
      HttpServletRequest req = createMock(HttpServletRequest.class);

      // Step 2 - record the expected behavior

      // to test true, expect to be called with "param1" and if so return true
      // Note that the method under test calls getParameter twice (really
      // necessary?) so we must relax the restriction and program the mock
      // to allow this call either once or twice
      expect(req.getParameter("param1")).andReturn("true").times(1, 2);

      // program the mock to return false for param2
      expect(req.getParameter("param2")).andReturn("false").times(1, 2);

      // switch the mock to replay state
      replay(req);

      // now run the test.  The method will call getParameter twice
      Boolean bool1 = getBooleanFromRequest(req, "param1");
      assertTrue(bool1);
      Boolean bool2 = getBooleanFromRequest(req, "param2");
      assertFalse(bool2);

      // call one more time to watch test fail, just to liven things up
      // call was not programmed in the record phase so test blows up
      getBooleanFromRequest(req, "bogus");

   }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-07-23T04:55:45.373

这是一个旧线程......但问题仍然相关。

另一个不错的选择是 Spring 框架中的 MockServiceRequest 和 MockServiceResponse：

[http://docs.spring.io/spring/docs/2.0.x/api/org/springframework/mock/web/package-summary.html](http://docs.spring.io/spring/docs/2.0.x/api/org/springframework/mock/web/package-summary.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T01:59:44.773

我不了解easymock，但[Johannes Link 的“Java 中的单元测试：测试如何驱动代码”](http://books.google.com/books/about/Unit_Testing_in_Java.html?id=enIzSnJkKAYC)一书中包含了如何使用他构建的虚拟对象库来测试Servlet 的解释。

这本书的配套网站现在已经消失了（出版公司发生了一些变化......）但[原始德国出版物的配套网站仍然存在](http://www.dpunkt.de/utmj/)。从中，[您可以下载所有虚拟对象的定义](http://www.dpunkt.de/utmj/utmj-servlet.zip)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T21:10:05.760

看看 Mockrunner：[http ://mockrunner.sourceforge.net/](http://mockrunner.sourceforge.net/)

它有很多易于使用的 Java EE 模拟，包括 HttpServletRequest 和 HttpServletResponse。

# c++ - gcc 与 Visual Studio 宏扩展

> ID：12945911
> 
> 赞同：6
> 
> 时间：2012-10-18T01:42:01.020
> 
> 标签：c++, visual-studio-2010, gcc, c-preprocessor

给出以下代码：

```
void doSomething(int one, int two, int three)
{
   //something here
}

#define ONE 1,2,3

#define TWO(arg) doSomething(arg);

#define THREE(arg) TWO(arg)

void doSomethingElse()
{
   TWO(ONE)

   THREE(ONE)
} 
```

Visual Studio 2010 具有以下预处理器输出（省略一些空行）：

```
void doSomething(int one, int two, int three)
{

}    

void doSomethingElse()
{
   doSomething(1,2,3);

   doSomething(1,2,3);    
} 
```

而 gcc 4.2 给出了以下内容：

```
void doSomething(int one, int two, int three)
{

}    

void doSomethingElse()
{
   doSomething(1,2,3);

myFile.cpp:17:13: error: macro "TWO" passed 3 arguments, but takes just 1 
   TWO
} 
```

我不确定哪个是标准的，但我希望它像 Visual Studio 一样工作。有没有办法重构代码以便它在两个编译器中都以这种方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:30:46.837

另一种可能性是给参数加上括号，这样它就不会成为替换中的 3 个参数：

```
#define ONE 1,2,3                                                                                                                                                                                                                                                              
#define TWO_PARENS(arg) doSomething arg;                                                                                                                                                                                                                                       
#define TWO(arg) TWO_PARENS((arg));                                                                                                                                                                                                                                           
#define THREE(arg) TWO_PARENS((arg))
THREE(ONE) 
```

BTW gcc 根据规范是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:23:08.770

当您在另一个宏中使用逗号时，它们需要特殊处理。

这应该有效：

```
#define ONE() 1,2,3
#define TWO(ARG) doSomething(ARG());
#define THR(ARG) TWO(ARG) 
```

您`ONE`可以通过将其转换为宏本身的功能来延迟立即被替换。

`BOOST_PP_COMMA_IF`您可以在[boost 文档站点](http://www.boost.org/doc/libs/1_48_0/libs/preprocessor/doc/ref/comma_if.html)上看到更多避免这种情况的示例。

# html - jQuery 可排序列表 - 如何阻止 UL 容器扩展？

> ID：12945912
> 
> 赞同：0
> 
> 时间：2012-10-18T01:42:02.537
> 
> 标签：html, jquery-ui, jquery-ui-sortable

我有多个连接的 ul 列表。

有一个大型 UL 列表，我设置了一个带有可滚动 y 轴的最大高度和宽度。

问题是当我将一个项目从大列表移动到右侧的另一个项目时，ul 容器会滚动。我已将 overflow-x 设置为隐藏，但它没有效果。

[http://jsfiddle.net/hCzr8/6/](http://jsfiddle.net/hCzr8/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:28:22.947

删除 ul.lists 上的 position:relative 似乎可以解决问题。

[http://jsfiddle.net/hCzr8/7/](http://jsfiddle.net/hCzr8/7/)

是否有任何特殊原因导致静态定位不适用于 ul？

# javascript - 如何使用 node.js 和 Express 向 google-api 发出请求？获取请求未定义错误

> ID：12945913
> 
> 赞同：0
> 
> 时间：2012-10-18T01:42:26.687
> 
> 标签：javascript, json, node.js, express, google-api

我正在使用 node.js 服务器并希望调用 Google 购物服务并检索搜索查询的结果。我想我正确地应用了搜索查询字符串，但是我收到了 500 Reference Error: Request is not defined。我的代码如下：

googleShoppingService.js

```
//Shopping Search Factory

module.exports = function(productSearch){
    return new productKey('---API-KEY-GOES-HERE---');
};
//constructor

function productKey(key) {

    this.key=key;
}
// Search API

function toJSON(str){
    var result;
    try {
        result=JSON.parse(str);
    } catch(err){}
    return result;
 }

productKey.prototype.search = function (req, done) {
    request.get('https://www.googleapis.com/shopping/search/v1/public/products')
        .send({key:this.key})
        .send({country:'US'})
        .send({q:req.body.searchQuery.value})
        .end(function (err, res) {
            var body = toJSON(res.text);
            var result = body && body.product || [];
            return done(err, result);
        });
}; 
```

应用程序.js

```
var productSearch = require('./apis/googleShoppingSearch.js');
var products = productSearch('---API-KEY-GOES-HERE---')

app.get('/productResults', function(req, res){
    products.search(process.argv[2], function (err, results) {
        var returnedData = ""
        for (var i=0;i < results.length; i++) {
            returnedData += (results[i].title + '<br />')
        }
        res.send (returnedData)
    });
}); 
```

任何解决我的问题的建议将不胜感激。我在这里先向您的帮助表示感谢。

# regex - 正则表达式：替换为重复字符串，而不是“替换重复”

> ID：12945916
> 
> 赞同：2
> 
> 时间：2012-10-18T01:42:37.917
> 
> 标签：regex, replace, repeat

我们可以使用正则表达式用 REPEATED 模式替换匹配模式吗？

例如：目标字符串是“abc2:4def”，我想要的是`abc2222def`，这意味着“4”是目标字符串中的转发器，我想将我的字符串组合回“未压缩”格式。

我可以想到后面的引用`sed`，

```
sed 's/\([0-9]+\):\([0-9]\)/\1\\{\2\\}/' #\1 to match "2" and \2 to match "4". 
```

`\\{n\\}`就是重复n次，可惜那行不通。

我想知道它是否可以得到支持`REGEX`。有什么建议吗？

我知道我们可以通过其他工具来实现它，但目前我只能使用一些`REGEX`功能。

这是我在stackoverflow中的第一篇文章，如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:47:27.567

在`Perl`，我能够做到这一点：

```
$ echo abc2:4def | perl -lne 'print $1 . $2 x $3 . $4 if m/^(\w+)(\d):(\d)(.*)/;'
abc2222def 
```

# windows-8 - 是否可以使用“不可触摸”的笔记本电脑测试触摸手势？

> ID：12945922
> 
> 赞同：1
> 
> 时间：2012-10-18T01:43:36.637
> 
> 标签：windows-8, microsoft-metro, touch, windows-phone, gesture

在开发 Windows Store 应用程序和 WP8 应用程序时，是否可以在使用不支持触控的笔记本电脑时测试“触控”手势​​？例如，是否存在与“捏”或“轻弹”手势（模仿语义缩放和取消缩放）相同的鼠标或键盘操作/组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:47:17.160

我还不能使用 WP8 SDK，但是如果 SDK 像 WP7（我从其他人那里听到的），请使用 SDK 附带的模拟器，并使用 Multitouch Vista 来模拟触摸使用[指南多点触控 Vista](http://michaelsync.net/2010/04/06/step-by-step-tutorial-installing-multi-touch-simulator-for-silverlight-phone-7)。您将只需要任何其他 USB 鼠标（请注意，尽管使用内置触控板，因为在我使用 Multitouch Vista 的经验中，另一只鼠标已经被击中并错过了）

[对于 Windows 应用商店应用程序，使用提供的模拟器](http://blogs.msdn.com/b/visualstudio/archive/2011/09/30/microsoft-windows-simulator-touch-emulation.aspx)来模拟手势的最简单方法只有我们自己。您仍然可以使用 Multitouch Vista，但跟踪点的点不会显示在 Metro 环境中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:06:18.803

当您使用模拟器时，右侧有一些按钮可以让您模拟多点触控。这不方便，但它主要工作。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh441475(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh441475(v=vs.110).aspx)

# mysql - 任何人都可以看看我的SQL吗？

> ID：12945924
> 
> 赞同：1
> 
> 时间：2012-10-18T01:44:49.570
> 
> 标签：mysql, sql

这是我的 SQL (MySQL) 命令：

```
SELECT pp.pluginid
FROM plugins pp
WHERE 
    (pp.limit=-1)
    OR
    (pp.limit>(select count(a.pluginid) from ads a where a.pluginid = pp.pluginid))
ORDER BY count(a.pluginid) 
```

最后一行（order by）不起作用，我明白为什么（因为我没有从子查询中输出这个值）。但我不知道如何，也不知道要查找什么命令。

固定的！！！这是我所做的：

```
SELECT pp.pluginid, (select count(a.pluginid) from ads a where a.pluginid = pp.pluginid) as bb
FROM plugins pp
WHERE 
    (pp.limit=-1)
    OR
    (pp.limit>(select count(a.pluginid) from ads a where a.pluginid = pp.pluginid))
ORDER BY bb 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:51:18.543

尝试使用 join 和 group by，如下所示：

```
SELECT pp.pluginid,pp.limit
FROM plugins pp
LEFT OUTER JOIN ads a ON a.pluginid = pp.pluginid
GROUP BY pp.pluginid
HAVING pp.limit=-1 OR pp.limit > COUNT(1)
ORDER BY COUNT(1) 
```

请注意，您需要使用`HAVING`代替，`WHERE`因为条件使用聚合。

这是[sqlfiddle 上演示的链接](http://sqlfiddle.com/#!2/65658/9)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T01:52:13.550

我不知道这是否正是您想要的，但请尝试：

```
SELECT pp.pluginid, count(a.pluginid) nads
  FROM plugins pp
  JOIN ads a ON a.pluginid = pp.pluginid
  WHERE pp.limit = -1
     OR pp.limit > nads
  GROUP BY a.pluginid
  ORDER BY nads 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T01:46:35.527

ORDER BY 子句需要数据库列名

# java - Android 出现 Java 错误“无法找到符号”

> ID：12945927
> 
> 赞同：0
> 
> 时间：2012-10-18T01:45:13.853
> 
> 标签：java, android, android-activity

所以我正在尝试制作一个 Android 应用程序，但是当我尝试编译我的项目时，我得到了错误：

```
DisplayMessageActivity.java :2 :Error - cannot find symbol
"public class DisplayMessageActivity extends Activity {"

symbol: class Activity 
```

这是我的 DisplayMessageActivity.java 的源代码（它的父级是 MainActivity.java，它导入了 android.app.Activity 和 android.os.Bundle 包）：

```
public class DisplayMessageActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    // Set the text view as the activity layout
    setContentView(textView);
}
} 
```

这是 AndroidManifest.xml 文件-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.HelloWorld"
  android:versionCode="1"
  android:versionName="1.0">
<application android:label="@string/app_name" android:icon="@drawable/ic_launcher" android:theme="@android:style/Theme.Holo">
    <activity android:name="MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DisplayMessageActivity"
        android:label="@string/title_activity_display_message">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android.value="com.example.myfirstapp.MainActivity" />
    </activity>
</application>
</manifest> 
```

请帮忙，

Niro56

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:47:18.557

`Activity`包声明后，您需要`import android.app.Activity`在文件顶部导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T23:17:58.183

我必须添加“package com.example.myfirstapp;” 在我的 DisplayMessageActivity.java 文件的顶部，以克服此编译错误。我还必须添加一个 android.widget.TextView 的导入来克服下一个“未找到符号”错误。

# regex - 不区分大小写的 JFlex 正则表达式

> ID：12945929
> 
> 赞同：10
> 
> 时间：2012-10-18T01:45:22.137
> 
> 标签：regex, jflex

如何在 JFlex 中实现不区分大小写的正则表达式模式。

使用标准 (?i:) 表示法似乎不起作用。

例如：

```
To match the case insensitive word "class", the regex would be (?i:class).
But this doesn't work in a JFlex specification. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T20:45:08.983

使用以下指令之一：

*   %无壳
*   %忽略大小写

从[手册](http://jflex.de/manual.html#caseless)：

> 此选项使 JFlex 处理规范中的所有字符和字符串，就好像它们以大写和小写形式指定一样。这样可以轻松地为具有不区分大小写的关键字的语言指定扫描程序。例如，规范中的字符串“break”就像表达式 ([bB][rR][eE][aA][kK]) 一样处理。%caseless 选项不会更改匹配的文本，也不会影响字符类。所以 [a] 仍然只匹配字符 a 而不是 A。哪些字母是大写字母，哪些是小写字母，由 Unicode 标准定义，并由 JFlex 使用 Java 方法 Character.toUpperCase 和 Character.toLowerCase 确定。在 JLex 兼容模式（命令行上的 -jlex 开关）中，%caseless 和 %ignorecase 也会影响字符类。

# c++ - 标志 ios_base::app 的错误行为

> ID：12945933
> 
> 赞同：2
> 
> 时间：2012-10-18T01:45:50.560
> 
> 标签：c++, sstream

据我所知，标志`app`在每次写入之前寻求结束 [const ios_base::openmode std::ios_base::app [静态] 在每次写入之前寻求结束。](http://img109.imageshack.us/img109/532/d2af84ebd02e42d29ba30f9.png)

以下程序输出为：`recostream789`

```
std::string str("t2: 123456789");
std::ostringstream ostr(str,std::ios_base::out|std::ios_base::app);
ostr << "recostream";
std::cout << ostr.str() << std::endl; 
```

它不应该输出：`t2: 123456789recostream`而是？

我用的是vs2010

[编译后的代码图片](http://img109.imageshack.us/img109/532/d2af84ebd02e42d29ba30f9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:17:47.637

这是开放缺陷[LWG #2121](http://cplusplus.github.com/LWG/lwg-active.html#2121)，由 Josuttis 今年早些时候公开。他的报告也使用 GCC 和 Visual Studio 作为示例，引用：

> 请注意以下程序：

```
string s("s1: 123456789");
ostringstream s1(s, ios_base::out|ios_base::app);
s1 << "hello";
cout << s1.str() << endl; 
```

> 使用 g++4.x 打印：
> 
> `s1: 123456789hello`
> 
> 使用 VisualC++10 打印：
> 
> `hello23456789`

注意到`ios_base::ate`在 C++03 中没有为字符串流明确指定标志的行为，但 C++11为其[添加了](http://cplusplus.github.com/LWG/lwg-defects.html#1448)详细的字符串流特定效果。它没有为 . 添加这样的细节`ios_base::app`，所以一些编译器并没有费心去实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T01:57:26.457

是的，我认为它应该——至少对我来说这看起来像一个编译器（或者，从技术上讲，库）错误。

快速检查一下，g++ (4.7.1) 似乎同意——它`t2: 123456789recostream`按预期产生。

# geb - 如何将 FirefoxDriver 设置为 Geb 的驱动程序

> ID：12945936
> 
> 赞同：1
> 
> 时间：2012-10-18T01:46:06.143
> 
> 标签：geb

这似乎有效：

```
@Grapes([ 
    @Grab("org.codehaus.geb:geb-core:0.7.2"),
    @Grab("org.seleniumhq.selenium:selenium-htmlunit-driver:2.25.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.25.0"),
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.25.0")
])

import geb.Browser
import org.openqa.selenium.firefox.FirefoxDriver

Browser.drive() {

    go "http://www.google.com"
} 
```

但是我如何使用`FirefoxDriver`而不是`HtmlUnitDriver`？这只是启动 Firefox，但所有`drive`指令都在`HtmlUnitDriver`...中执行

```
@Grapes([ 
    @Grab("org.codehaus.geb:geb-core:0.7.2"),
    @Grab("org.seleniumhq.selenium:selenium-htmlunit-driver:2.25.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.25.0"),
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.25.0")
])

import geb.Browser
import org.openqa.selenium.firefox.FirefoxDriver

def browser = new Browser(driver: new FirefoxDriver())

browser.drive {

    go "http://www.google.com"

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:50:22.460

使用此处概述的配置脚本：[http ://www.gebish.org/manual/0.7.0/configuration.html](http://www.gebish.org/manual/0.7.0/configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T15:54:22.280

我们在 GebConfig.groovy 中完成了以下配置，将 FireFoxDriver 注册到 Geb。

```
driver = {
    def firefoxDriver = new FirefoxDriver()
    SharedResources.instance.browser = firefoxDriver
    firefoxDriver.manage().window().maximize()
    firefoxDriver
} 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T16:02:39.090

试试这个：

```
Browser.drive(new FirefoxDriver()) {

    // firefox 

} 
```

# c# - 阅读 标签

> ID：12945939
> 
> 赞同：3
> 
> 时间：2012-10-18T01:46:47.153
> 
> 标签：c#, .net, xml, xpath

我今天被要求看一个新项目 - 阅读一些 XML 并进行一些分析。我知道一点 C#。到目前为止，我已经用这段代码做到了这一点。我成功获得了 4 个节点列表。我有几个问题。首先，我不确定如何访问任何列表中任何节点上的标记中的内容。其次，我希望能够使用 LINQ 查询，但 XmlNodeList 似乎不支持该语法。在下面的示例 XML 中，我希望能够获取属于特定 IO 组或 mdisk 的所有虚拟磁盘，由 io_group_name 或 mdisk_grp_name 属性确定。我看到的大部分内容都提供了访问 [Attribute] 列表并搜索所有使用的属性/属性互换的示例。

我尝试的也在下面，它给出了一个空值异常。属性列表只有一个属性。我找不到任何示例来做我想做的事，并且在调试器中检查节点并不清楚我需要访问什么来做我想做的事。

```
//this works

XmlTextReader reader = new XmlTextReader(_InputFile);
XmlDocument doc = new XmlDocument();
doc.Load(reader);

XmlNodeList clusterlist = doc.SelectNodes("//object[@type='cluster']");
XmlNodeList controllerlist = doc.SelectNodes("//object[@type='controller']");
XmlNodeList mdisklist = doc.SelectNodes("//object[@type='mdisk']");
XmlNodeList vdisklist = doc.SelectNodes("//object[@type='vdisk']");

// this did not work - got null value exception
foreach (XmlNode vdisknode in vdisklist)
{
    string str = vdisknode.Attributes["mdisk_grp_name"].Value;
} 
```

XML 示例：

```
<object type="vdisk">
     <property name="id" value="0" />
     <property name="name" value="nim01_vd06_gmt" />
     <property name="IO_group_id" value="0" />
     <property name="IO_group_name" value="ossvc06_iogrp0" />
     <property name="status" value="online" />
     <property name="mdisk_grp_id" value="0" />
     <property name="mdisk_grp_name" value="T1_OSIBM06_MDG1" />
     <property name="capacity" value="644245094400" />
     <property name="type" value="striped" />
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:50:02.817

`object`节点只有一个属性：`type`

```
string type = vdiskNode.Attributes["type"].Value; 
```

`property`节点有两个属性：`name`和`value`：

```
string name = propertyNode.Attributes["name"].Value;
string value = propertyNode.Attributes["value"].Value; 
```

* * *

我认为您需要扩展 XPath 查询：

```
"//object[@type='vdisk']/property[@name='mdisk_grp_name']/@value" 
```

* * *

或者使用 LINQ to XML：

```
from obj in doc.Load(xml).Root.Elements("object")
where (string)obj.Attribute("type") == "vdisk"
from prop in obj.Elements("property")
//where (string)prop.Attribute("name") == name
select prop.Value 
```

# javascript - 使用 javascript 进行 SEO 友好的条件加载

> ID：12945940
> 
> 赞同：4
> 
> 时间：2012-10-18T01:46:47.820
> 
> 标签：javascript, mobile, conditional, loading, seo

我打算做一个响应式+移动​​优先的网页设计。所以这是我的计划：

1.  制作移动优先网站。
2.  使用 Javascript 加载桌面或大屏幕 HTML

但是，我这里有个问题。据我所知，我将使用 javascript 加载的 HTML 内容不会被搜索引擎读取？我在互联网上搜索了很多，但我找不到这个问题的合理答案。

谁能告诉我是否可以使用 Javascript 进行 SEO 友好的条件加载？或者我是否必须研究服务器端语言，即 PHP/ASP 才能使用设备检测加载内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T01:59:40.070

如果移动网站和桌面网站的内容相同，而您只是为每个屏幕设置不同的格式，那么这应该只涉及 CSS、媒体查询和一些 JS 来帮助向后兼容。这种方法不应该伤害你的 SEO。

这是一个很好的教程：[http ://www.html5rocks.com/en/mobile/responsivedesign/](http://www.html5rocks.com/en/mobile/responsivedesign/)

这是在初始页面加载时隐藏内容（因此您稍后通过 JS 显示或通过 AJAX 将其拉入）对 SEO 不利。

要让 google 抓取 AJAX 内容，您需要按照以下步骤操作：http: [//developers.google.com/webmasters/ajax-crawling](http://developers.google.com/webmasters/ajax-crawling)

这是谷歌关于响应式设计的一篇很好的博客文章：http: [//googlewebmastercentral.blogspot.com/2012/06/recommendations-for-building-smartphone.html](http://googlewebmastercentral.blogspot.com/2012/06/recommendations-for-building-smartphone.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:00:13.510

阅读有关允许将内容动态加载到网页中的 Hashbangs。

我不会评论您是否应该使用服务器端、Javascript 或只是*响应式设计*，因为您特别提到了 Javascript。

**来自谷歌**

[本文档](https://developers.google.com/webmasters/ajax-crawling/docs/specification)描述了网络服务器和搜索引擎爬虫之间的协议，允许动态创建的内容对爬虫可见。Google 目前支持此协议。希望其他搜索引擎也将采用此提议。

# c++ - 使用Nodes进行深拷贝和解构前哨链表

> ID：12945941
> 
> 赞同：2
> 
> 时间：2012-10-18T01:47:01.513
> 
> 标签：c++, linked-list, deep-copy, sentinel

我目前正在使用节点制作一个链接列表程序（我不知道任何其他方式），我遇到了一个关于创建深层副本并使用 ~List() 摆脱所有节点和哨兵的问题。删除节点不是问题，但哨兵是因为第一个没有分配索引值。

```
List::~List()
{
  for(size_t i=0; i<size; i++)
    {
      _setCurrentIndex(i);
      if(current && curent->next == NULL)
    {
      Node *temp = current->next;
      delete temp;
      delete current;
    }
      else
    {
      Node *old = current;
      current = current->next;
      delete old;
    }
    }
}

List::List(const List & orig)
{
for(size_t i=0; i<size; i++)
{
 if(i==0)
  {
   Node *copyFront = new Node; //the first sentinel
   copyFront->data = orig.front->data; //front is defined in private in list.h
   copyFront->prev = NULL; // it is defined as a Node (same for rear)
  }
 else if(0<=i && i<size) //put in i<size b/c 0<=i would always be true
  {
   _setCurrentIndex(i) //sets what current is and currentIndex which pts to diff Nodes
   Node *copy = new Node;
   copy->data = current->data; 
   copy->next = current->next;
   current = current->next;
  }
 else if(i+1 == size)
  {
   Node *copyRear = new Node; //making the last sentinel, but it has to be
   copyRear->data = orig.rear->data; //after data Node
   copyRear->next = NULL;
  }
 }
} 
```

我正在寻求有关此代码的建议和评论，以了解下一步如何进行，或者如果出现严重错误，应该进行哪些更改！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:01:33.533

Linked lists are templates allowing any type of variable to sit in them. In my honest opinion, you'd be best off using the `std::list` which requires the `#include <list>` header file.

Of course, if you really want the experience of writing a linked list class yourself then the following code makes a deep copy of a list:

```
List::List( const List& other) {
    if( other.head_ != nullptr) {
        head_ = new Node( other.head_->item_);  // copy first node

        assert( head_ != nullptr);  // ensure that the memory was allocated correctly

        // copy the rest of the list
        Node* pnew = head_;
        // loop through the list until you reach the end (i.e. a node that's nullptr)
        for( Node* porig( other.head_->next_); porig != nullptr; porig = porig->next_) {
            // assign the next node in the destination list to the next node in the paramter's list
            pnew->next_ = new Node( porig->item_);
            assert( pnew->next_ != nullptr);  // ensure that the memory was allocated correctly
            pnew = pnew->next_;  // move onto the newly created node in the destination list
        }
    }
    else
        // if the parameter is empty then the destination list will be empty as well
        head_ = nullptr;
} 
```

As for the destructor, you just need to run through the list deleting the nodes as you go:

```
List::~List() {
    while( head_ != nullptr) {  // keep looping until the list gets to the end
        // make a second pointer to the node you are about to delete (so you don't lose track of it)
        Node* pn( head_);
        // move the head_ onto the next node essentially "removing" the first node from your list
        head_ = head_->next_;
        // delete the node that you've just "removed" from your list
        delete pn;
    }
} 
```

I've tried to make the comments clear up anything that might be unclear.

# c - 二维数组填充

> ID：12945944
> 
> 赞同：1
> 
> 时间：2012-10-18T01:47:24.483
> 
> 标签：c, multidimensional-array

我想填充二维数组，这就是我所做的。但是，它会给出编译错误，例如警告：未使用计算的值，我不明白为什么。如果有人能告诉我问题并解释可以做什么，我将不胜感激。谢谢！

```
 #include <stdio.h>
    #include <string.h>

    int main()
    {
       int array1[4][4];
       int len = sizeof(array1) / sizeof(array1[0]);
       int wid = sizeof(array1[0]) / sizeof(array1[0][0]);

         int i, j , z = 0;
         //compile error
         for(i = 0, i < len; i++)
         {
            for(j = 0, j < wid; j++)
            {
              array1[i][j] = z;
            }
            z++;      
         }

         int a, b;
         for(a = 0, a < len; a++)
         {
            for(b = 0, b < wid; b++)
            {
              printf("%d", array1[a][b]);
             }
         }
           return 0;
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:50:53.503

您在每个`for`语句的初始化部分之后都放了一个逗号。你应该放一个分号。例如，你写了这个：

```
 for(i = 0, i < len; i++) 
```

您需要将其更改为：

```
 for(i = 0; i < len; i++) 
```

此外，您可能希望在数组元素之间打印空格，并在每行之后添加一个换行符：

```
 for(a = 0; a < len; a++) {
        for(b = 0; b < wid; b++) {
          printf("%d ", array1[a][b]);
        }
        printf("\n");
     } 
```

# java - 如何使用 JACKSON 进行自定义序列化/反序列化？

> ID：12945946
> 
> 赞同：7
> 
> 时间：2012-10-18T01:47:26.913
> 
> 标签：java, jackson, gson

我正在尝试将以下 gson 序列化转换为 JACKSON 序列化。请让我知道我需要更改哪些内容才能使其适用于 JACKSON

```
public class AbstractElementAdapter 
    implements JsonSerializer<AbstractElement>, JsonDeserializer<AbstractElement>
{
    @Override
    public JsonElement serialize(AbstractElement src, Type typeOfSrc, JsonSerializationContext context) {
        JsonObject result = new JsonObject();
        JsonObject properties = context.serialize(src, src.getClass()).getAsJsonObject();

        if (src instanceof TruncatedElement) {
            result.add("type", new JsonPrimitive(((TruncatedElement) src).getClassName()));
            properties.remove("className");
        } else {
            result.add("type", new JsonPrimitive(src.getClass().getSimpleName()));
        }

        result.add("properties", properties);

        return result;
    }

    @Override
    public AbstractElement deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
        JsonObject jsonObject = json.getAsJsonObject();
        String type = jsonObject.get("type").getAsString();
        JsonElement element = jsonObject.get("properties");

        try {
            return context.deserialize(element, Class.forName("com.zreflect.emyed.whiteboard.model.element." + type));
        } catch (ClassNotFoundException cnfe) {
            throw new JsonParseException("Unknown element type: " + type, cnfe);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-30T13:25:08.193

您可以创建一个自定义序列化程序，如下所示：

```
 public class ItemSerializer extends JsonSerializer<AbstractElement> {
        @Override
        public void serialize(AbstractElement src, JsonGenerator jgen, SerializerProvider provider)
                throws IOException, JsonProcessingException {
            jgen.writeStartObject();

            if (src instanceof TruncatedElement) {
                jgen.writeStringField("type",((TruncatedElement) src).getClassName());
                jgen.writeObjectFieldStart("properties");
                //use  jgen.writeStringField();  
                //jgen.writeNumberField(); 
                //etc to every one of the values, 
                //but skipping className
                 jgen.writeEndObject();

            } else {
                jgen.writeStringField("type", src.getClass().getSimpleName() );
                //write everythin
                jgen.writeObjectField("properties", src);
            }

            jgen.writeEndObject();
        }
    } 
```

并将其注册到 ObjectMapper 中，然后进行序列化：

```
ObjectMapper mapper = new ObjectMapper();

SimpleModule module = new SimpleModule();
module.addSerializer(yourObject.class, new ItemSerializer());
mapper.registerModule(module);

String serialized = mapper.writeValueAsString(yourObject); 
```

对于跳过的技巧`className`，您还可以使用自定义字段过滤器，这里有一个很好的示例： [http ://www.baeldung.com/jackson-ignore-properties-on-serialization](http://www.baeldung.com/jackson-ignore-properties-on-serialization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T13:16:20.927

Jackson 允许您通过注释指定序列化程序。例如，请参见下面的简单示例：

```
@JsonSerialize(using FooToStringSerializer)
public class Foo implements Serializable {

    private String bar;

    public Foo(String bar) {
        this.bar = bar;
} 
```

然后，如果我只想看到对象被序列化的时间是`bar`，我会像这样创建序列化程序：

```
public class FooToStringSerializer extends JsonSerializer<Foo> {

    @Override
    public void serialize(final Foo value, final JsonGenerator jgen,
        final SerializerProvider provider) throws IOException
    {
        jgen.writeObject(value.getBar());
    } 
```

对于反序列化，您可以创建一个反序列化器并将其注册`ObjectMapper`到将进行反序列化的那个。

要使用对象映射器注册反序列化器，请执行以下操作：

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule module = new SimpleModule();
module.addDeserializer(Item.class, new FooDeserializer());
mapper.registerModule(module); 
```

有关自定义反序列化的非常容易遵循的示例，请参阅此链接： [http ://www.baeldung.com/jackson-deserialization](http://www.baeldung.com/jackson-deserialization)

# struts2 - 在struts2中将消息从动作传递到JSP

> ID：12945949
> 
> 赞同：2
> 
> 时间：2012-10-18T01:48:12.983
> 
> 标签：struts2, struts, action

我正在尝试使用`addActionMessage()`并将`addActionError()`操作（例如 in `execute()`）中的消息和错误传递到转发的页面。

在 JSP 中，我使用：

```
<s:if test="hasActionMessages()">
   <s:actionmessage/>
</s:if> 
```

显示此类消息。

但没有显示任何消息。我想知道是否有人可以解决此问题，或提出其他解决方案。我是 Struts 和 Web 开发的新手，我不确定将消息从操作传递到页面的正确模式是什么。

编辑：动作映射代码和java代码

```
<action name="myAddUser" class="org.any.backend.action.UserAdminAction" method="addUser">
  <result name="success" type="redirectAction">myUserAdmin</result>
  <result name="input" type="redirectAction">myUserAdmin</result>
</action> 
```

Java代码：

```
 public String addUser() throws Exception {
    // check duplicate
    for (User u : userList)
        if (u.getUserName().equals(userName)) {
            addActionError("A user with the same user name already exists. Choose another user name. ");
            return INPUT;
        }
    if (userName != null && !userName.isEmpty() && password != null && !password.isEmpty()) {
        User newUser = new User();
        newUser.setUserName(userName);
        newUser.setPassword(password);
        userList.add(newUser);
        addActionMessage("User " + userName + " added. ");
        return SUCCESS;
    } else {
        addActionError("User name and password cannot be empty");
        return INPUT;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:18:29.997

`session.setAttribute(...)`在行动类中使用。并`<logic:present .... >`在jsp中标记。希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:59:58.287

你的代码是对的。

也许您正在使用 REDIRECT-ACTION 结果类型或 CHAIN。它们都将丢失操作消息和错误，从而迫使您将它们置于此页面的会话中（并在显示后清除它们）。

编辑：我假设您正在使用该块

```
<s:if test="hasActionErrors()">
       <s:actionerror />
</s:if>
<s:if test="hasActionMessages()">
       <s:actionmessage/>
</s:if> 
```

不仅是发布的，否则您将永远看不到错误，只有消息...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T01:23:40.383

正如我所看到的，您正在使用重定向操作，您仍然可以使用其中一个拦截器来保留操作错误/消息。

[http://struts.apache.org/2.3.1.2/docs/message-store-interceptor.html](http://struts.apache.org/2.3.1.2/docs/message-store-interceptor.html)

这是 struts.xml 中的一个示例

```
 <action name="submit"
        class="com.dummy.SubmitAction">             

        <interceptor-ref name="store">
            <param name="operationMode">STORE</param>
        </interceptor-ref>
        <interceptor-ref name="defaultStack" />

        <result name="success" type="redirectAction">
            <param name="actionName">view</param>
            <param name="asnid">${id}</param>
        </result>           

    </action>

    <action name="view"
        class="com.dummy.ViewUserAction">
        <interceptor-ref name="store">
            <param name="operationMode">RETRIEVE</param>
        </interceptor-ref>  
        <interceptor-ref name="defaultStack" >
            <param name="workflow.excludeMethods">execute</param>           
        </interceptor-ref>  

        <result name="success">pages/user.jsp</result>

    </action> 
```

# objective-c - 为什么我们在c/objective-c中定义枚举时有2个关键字

> ID：12945950
> 
> 赞同：1
> 
> 时间：2012-10-18T01:48:21.200
> 
> 标签：objective-c, xcode4.5

我这样定义枚举：

```
typedef enum sortByWhatUpperType{
    //sortByRating=0,
    sortbyDistance=1,
    sortbyBuildingorProminent=0
} sortbyWhatBottomType; 
```

然后我创建了一个属性

```
@property enum sortByWhatUpperType sortByWhat; 
```

这就是自动完成建议我做的

```
-(void) setSortByWhat:(enum sortByWhatUpperType)sortByWhat
{
    [[NSUserDefaults standardUserDefaults]setInteger:sortByWhat forKey:SortByWhat];
}
-(sortbyWhatBottomType) sortByWhat
{
    return [[[NSUserDefaults standardUserDefaults] objectForKey:SortByWhat] unsignedIntValue];
} 
```

所以那个枚举似乎有两种类型。sortByWhatUpperType 和 sortbyWhatBottomType。

为什么我们有 2 个关键字？为什么不只有一个？我错过了什么？哪一种是真正的类型？

枚举 sortByWhatUpperType 是 sortbyWhatBottomType 的同义词吗？

有什么见解吗？

这是在objective-c中进行枚举的标准方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:52:10.020

您已经定义了两种类型。一个名为 的枚举`sortByWhatUpperType`，一个名为 的别名`sortbyWhatBottomType`。该`typedef enum`语句由两部分组成 - 枚举和 typedef。你可以省略 typedef 并输入

枚举 sortByWhatUpperType{ //sortByRating=0, sortbyDistance=1, sortbyBuildingorProminent=0 };

但是，每当您想声明该类型的变量时，您都需要 ty type `enum`。别名可以让你省略它。

s 的语法相同`struct`。但仅在 C 中。在 C++ 中，即使没有 typedef，您也可以默认省略 enum/struct/class。

# r - 如何在直方图上绘制密度估计？

> ID：12945951
> 
> 赞同：3
> 
> 时间：2012-10-18T01:48:27.327
> 
> 标签：r, histogram, kernel-density

> **可能重复：**
> [将密度曲线拟合到 R 中的直方图](https://stackoverflow.com/questions/1497539/fitting-a-density-curve-to-a-histogram-in-r)

`x`是一个 NAs 自由数值向量。

我跑：

```
> hist(x,density(x), prob=TRUE)

Error Message I get:
Error in rank(x, ties.method = "min", na.last = "keep") : 
  unimplemented type 'list' in 'greater' 
```

有人建议我在调用 hist 时设置 prob =TRUE。如果你也能解释这一点，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T01:50:53.333

你需要单独`hist`打电话`density`。像这样的东西：

```
hist(x, prob=TRUE)
lines(density(x)) 
```

# java - 如何在java中使一组jbuttons不可见

> ID：12945954
> 
> 赞同：3
> 
> 时间：2012-10-18T01:48:54.870
> 
> 标签：java, swing, visibility, jbutton

除了使用`button.setVisible(false)`，有没有一种简单的方法可以将一组设置`jButtons`为不可见和再次可见？

算法如下 - 当用户点击结帐按钮时，一组支付按钮（显示面额按钮）。尝试研究是否有更简单的方法来实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T02:12:02.867

`List`更好的解决方案是将您的按钮放在一个数组中`JPanel`或`JButton`

```
for (Component child : getComponents){
    if (child instanceof JButton) {
        ((JButton)child).setVisible(false);
    }
} 
```

这有点重，所以要小心

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:04:00.540

将所有 UI 组件 ( `JButton`) 放在一个集合中，并创建一个实用方法来迭代它们并设置可见状态。

# oracle - 提交前更改 Oracle SQL 查询文本

> ID：12945957
> 
> 赞同：2
> 
> 时间：2012-10-18T01:49:21.190
> 
> 标签：oracle, plsql, oracle10g, oracle11g

是否有高级 oracle 功能可以在将 SQL 查询提交到 oracle 之前对其进行修改？或者可能是修改结果集？基于一定的条件？Like 可能是基于提交查询的进程的名称？还是基于查询文本？

场景是一个进程（用 C++ 编写）正在运行一个查询，而我们没有办法更改 C++ 代码。该流程中的特定业务验证失败，为了使验证不会失败，我想要一种方法来处理返回的数据集或在将选择查询提交到 oracle 引擎之前对其进行操作。

C++ 代码正在运行这个精确的查询

从 A_HDR 中选择 PL_ID，其中 ENT_NBR=''

我想更改它，以便 ORACLE 总是看到并执行以下查询

从 A_HDR 中选择 NULL，其中 ENT_NBR=''

请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:18:53.333

[Oracle 虚拟专用数据库](https://docs.oracle.com/cd/E11882_01/network.112/e36292/vpd.htm#DBSEG007)可能正是您想要的。从手册：

> Oracle 虚拟专用数据库 (VPD) 使您能够创建安全策略来控制行和列级别的数据库访问。从本质上讲，Oracle 虚拟私有数据库将动态 WHERE 子句添加到针对应用了 Oracle 虚拟私有数据库安全策略的表、视图或同义词发出的 SQL 语句。

您可以从[SYS_CONTEXT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions184.htm)获取流程和查询文本。例如，`sys_context('userenv', 'current_sql')`和`sys_context('userenv', 'module')`。您可能还需要使用`GV$SESSION`来获取更多信息。

但是，我认为您应该尽可能避免使用 VPD。让所有 SQL 语句在后台静默转换是*非常令人困惑的。*它会使开发和故障排除变得非常困难。

* * *

**更新**

Oracle 12c 中的[SQL Translation Framework](http://docs.oracle.com/cd/E16655_01/gateways.121/e22508/sql_transl_arch.htm#DRDAA131)特性可能是解决这个问题的最佳方案。

# python - 熊猫时间序列图设置 x 轴主要和次要刻度和标签

> ID：12945971
> 
> 赞同：87
> 
> 时间：2012-10-18T01:51:08.557
> 
> 标签：python, matplotlib, pandas

我希望能够为从 Pandas 时间序列对象绘制的时间序列图设置主要和次要 xticks 及其标签。

Pandas 0.9“新增功能”页面说：

> “您可以使用 to_pydatetime 或注册 Timestamp 类型的转换器”

但我不知道如何做到这一点，以便我可以使用 matplotlib`ax.xaxis.set_major_locator`和`ax.xaxis.set_major_formatter`（和次要）命令。

如果我在不转换熊猫时间的情况下使用它们，x 轴刻度和标签最终会出错。

通过使用“xticks”参数，我可以将主要刻度传递给 pandas.plot，然后设置主要刻度标签。我不知道如何使用这种方法来做小滴答声。（我可以在 pandas.plot 设置的默认次要刻度上设置标签）

这是我的测试代码：

```
import pandas
print 'pandas.__version__ is ', pandas.__version__
print 'matplotlib.__version__ is ', matplotlib.__version__    

dStart = datetime.datetime(2011,5,1) # 1 May
dEnd = datetime.datetime(2011,7,1) # 1 July    

dateIndex = pandas.date_range(start=dStart, end=dEnd, freq='D')
print "1 May to 1 July 2011", dateIndex      

testSeries = pandas.Series(data=np.random.randn(len(dateIndex)),
                           index=dateIndex)    

ax = plt.figure(figsize=(7,4), dpi=300).add_subplot(111)
testSeries.plot(ax=ax, style='v-', label='first line')    

# using MatPlotLib date time locators and formatters doesn't work with new
# pandas datetime index
ax.xaxis.set_minor_locator(matplotlib.dates.WeekdayLocator(byweekday=(1),
                                                           interval=1))
ax.xaxis.set_minor_formatter(matplotlib.dates.DateFormatter('%d\n%a'))
ax.xaxis.grid(True, which="minor")
ax.xaxis.grid(False, which="major")
ax.xaxis.set_major_formatter(matplotlib.dates.DateFormatter('\n\n\n%b%Y'))
plt.show()    

# set the major xticks and labels through pandas
ax2 = plt.figure(figsize=(7,4), dpi=300).add_subplot(111)
xticks = pandas.date_range(start=dStart, end=dEnd, freq='W-Tue')
print "xticks: ", xticks
testSeries.plot(ax=ax2, style='-v', label='second line',
                xticks=xticks.to_pydatetime())
ax2.set_xticklabels([x.strftime('%a\n%d\n%h\n%Y') for x in xticks]);
# set the text of the first few minor ticks created by pandas.plot
#    ax2.set_xticklabels(['a','b','c','d','e'], minor=True)
# remove the minor xtick labels set by pandas.plot 
ax2.set_xticklabels([], minor=True)
# turn the minor ticks created by pandas.plot off 
# plt.minorticks_off()
plt.show()
print testSeries['6/4/2011':'6/7/2011'] 
```

及其输出：

```
pandas.__version__ is  0.9.1.dev-3de54ae
matplotlib.__version__ is  1.1.1
1 May to 1 July 2011 <class 'pandas.tseries.index.DatetimeIndex'>
[2011-05-01 00:00:00, ..., 2011-07-01 00:00:00]
Length: 62, Freq: D, Timezone: None 
```

![xaxis上带有奇怪日期的图表](../Images/4bf40efa8afb158365ed5dc6eaab7d92.png)

```
xticks:  <class 'pandas.tseries.index.DatetimeIndex'>
[2011-05-03 00:00:00, ..., 2011-06-28 00:00:00]
Length: 9, Freq: W-TUE, Timezone: None 
```

![带有正确日期的图表](../Images/db309bd0c5b922b09e9525268ebaa276.png)

```
2011-06-04   -0.199393
2011-06-05   -0.043118
2011-06-06    0.477771
2011-06-07   -0.033207
Freq: D 
```

**更新：**通过使用循环构建主要的 xtick 标签，我已经能够更接近我想要的布局：

```
# only show month for first label in month
month = dStart.month - 1
xticklabels = []
for x in xticks:
    if  month != x.month :
        xticklabels.append(x.strftime('%d\n%a\n%h'))
        month = x.month
    else:
        xticklabels.append(x.strftime('%d\n%a')) 
```

但是，这有点像使用`ax.annotate`: 做 x 轴，可能但不理想。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-12-02T21:53:14.187

两者`pandas`和`matplotlib.dates`用于`matplotlib.units`定位刻度。

但是虽然`matplotlib.dates`有手动设置刻度的便捷方法，但到目前为止，pandas 似乎专注于自动格式化（您可以查看pandas 中日期转换和格式化的[代码）。](https://github.com/pydata/pandas/blob/master/pandas/tseries/converter.py)

所以目前使用起来似乎更合理`matplotlib.dates`（正如@BrenBarn 在他的评论中提到的那样）。

```
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt 
import matplotlib.dates as dates

idx = pd.date_range('2011-05-01', '2011-07-01')
s = pd.Series(np.random.randn(len(idx)), index=idx)

fig, ax = plt.subplots()
ax.plot_date(idx.to_pydatetime(), s, 'v-')
ax.xaxis.set_minor_locator(dates.WeekdayLocator(byweekday=(1),
                                                interval=1))
ax.xaxis.set_minor_formatter(dates.DateFormatter('%d\n%a'))
ax.xaxis.grid(True, which="minor")
ax.yaxis.grid()
ax.xaxis.set_major_locator(dates.MonthLocator())
ax.xaxis.set_major_formatter(dates.DateFormatter('\n\n\n%b\n%Y'))
plt.tight_layout()
plt.show() 
```

![pandas_like_date_fomatting](../Images/6340c00ef6ef5ac2b16c35006865fbe1.png)

（我的语言环境是德语，所以星期二 [Tue] 变成 Dienstag [Di]）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-10T22:17:30.757

要关闭 Pandas 日期时间刻度调整，您必须添加参数`x_compat=True`

例子：

```
ds.plot(x_compat=True) 
```

在 Pandas 文档中查看更多示例：[抑制刻度分辨率调整](https://pandas.pydata.org/pandas-docs/stable/user_guide/visualization.html#suppressing-tick-resolution-adjustment)

# android - 完成尚未停用或关闭的游标，并且在 sqlite 中没有此类表列表项

> ID：12945974
> 
> 赞同：2
> 
> 时间：2012-10-18T01:51:46.700
> 
> 标签：android, android-sqlite

自从我在数据库中添加了一个新表后，我就一直收到这个错误，不知道为什么。我已经做了几次这种方法，没有遇到任何错误，但现在发生了这种情况，sqlite 就像女人一样，你第一次做某事，一切看起来都很好，但是当你再次做同样的事情时，他们就会开始为之疯狂一些理由。

无论如何，这里有一些相关的代码：

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selectorcreatemove);

        allFunctions();

    }

    private void allFunctions() {
        addMove = (Button) findViewById(R.id.bAddMove);
        etAddMove = (EditText) findViewById(R.id.etMoveName);

        MoveList = (ListView) findViewById(R.id.lvMoveItems);
        SQLHandlerview = new SQLHandler(this);

        SQLHandlerview = new SQLHandler(ListMovingNames.this);
        SQLHandlerview.open();

        cursor = SQLHandlerview.getMove();
        startManagingCursor(cursor);

        String[] from = new String[]{SQLHandler.KEY_MOVENAME};
        int[] to = new int[]{R.id.text};

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
        MoveList.setAdapter(cursorAdapter);

        addMove.setOnClickListener(new OnClickListener() {

            @SuppressLint("NewApi")
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        });

        MoveList.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, final View view, int position,
                    long id) {
                // TODO Auto-generated method stub
                AlertDialog load = new AlertDialog.Builder(ListMovingNames.this).show();
                load.setContentView(R.layout.load);
                move = ((TextView) view).getText().toString();
                Intent i = new Intent(getApplicationContext(), StartMoving.class);
                i.putExtra("moveName", move);
                startActivity(i);               
            }
        });

        etAddMove.setOnKeyListener(new OnKeyListener() {

            @SuppressLint("NewApi")
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                // TODO Auto-generated method stub
                if ( (event.getAction() == KeyEvent.ACTION_DOWN  ) && (keyCode== KeyEvent.KEYCODE_ENTER)   )
                {               
                    String ssmoveName = etAddMove.getText().toString();
                    int x = ssmoveName.length() - 1;
                    if (ssmoveName.equals("") || Character.isWhitespace(ssmoveName.charAt(0)) || Character.isWhitespace(ssmoveName.charAt(x))) {
                        Toast.makeText(ListMovingNames.this, 
                                "Please enter a valid name! Avoid giving a blank name or white space at the beginning or end of the name", 
                                Toast.LENGTH_LONG).show();
                    }else{
                        try {
                            String scheck = SQLHandlerview.checkMove(ssmoveName);
                            if (scheck.equals(ssmoveName)) {
                                Toast.makeText(ListMovingNames.this, "Move name already exist please give a different name", Toast.LENGTH_LONG).show();
                            } else{
                                AlertDialog load = new AlertDialog.Builder(ListMovingNames.this).show();
                                load.setContentView(R.layout.load);
                                SQLHandlerview.createMove(ssmoveName);
                                SQLHandlerview.createList();
                                SQLHandlerview.setTodo(ssmoveName);
                                Intent i = new Intent(getApplicationContext(), StartMoving.class);
                                i.putExtra("moveName", ssmoveName);
                                startActivity(i);
                            }
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            AlertDialog load = new AlertDialog.Builder(ListMovingNames.this).show();
                            load.setContentView(R.layout.load);
                            SQLHandlerview.createMove(ssmoveName);
                            SQLHandlerview.createList();
                            SQLHandlerview.setTodo(ssmoveName);
                            Intent i = new Intent(getApplicationContext(), StartMoving.class);
                            i.putExtra("moveName", ssmoveName);
                            startActivity(i);
                        }
                    }
                    return true;
                }
                return false;
            }
        });

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        allFunctions();
        SQLHandlerview.open();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    @Override
    protected void onDestroy(){
        super.onDestroy();
        if (SQLHandlerview != null) {
            SQLHandlerview.close();
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
            // do something on back.

            Intent i = new Intent(ListMovingNames.this, MainActivity.class);
            i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(i);
            return true;
        }

        return super.onKeyDown(keyCode, event);
    }

} 
```

这是 sql 处理程序

```
public class SQLHandler {

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID5 = "_id";

    public static final String KEY_MOVEDATE = "movedate";
    public static final String KEY_TOTALMOVEWEIGHT = "totalmoveweight";
    public static final String KEY_TOTALITEM = "totalitem";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_LISTITEMNAME = "listitemname";
    public static final String KEY_LISTITEMWEIGHT = "listitemweight";
    public static final String KEY_LISTITEMROOM = "listitemroom";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE5 = "lisitem";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_TOTALMOVEWEIGHT + " TEXT NOT NULL, " + 
            KEY_TOTALITEM + " INTEGER NOT NULL, " +
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_5 = "CREATE TABLE " + DATABASE_TABLE5 + " (" + 
            KEY_ID5 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_LISTITEMNAME + " TEXT NOT NULL, " + 
            KEY_LISTITEMWEIGHT + " TEXT NOT NULL, " +
            KEY_LISTITEMROOM + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_5);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE5);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourDatabase.close();
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        cv.put(KEY_MOVEDATE, "Not yet set");
        cv.put(KEY_TOTALMOVEWEIGHT, "0");
        cv.put(KEY_TOTALITEM, 0);
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public void createList(){
        ContentValues cv = new ContentValues();

        String[] sroom = new String[]{"Kitchen", "Bedroom", "Dinning Room"};
        String[] sitem = new String[]{"Dishwasher", "Bed", "Table"};
        String[] sweight = new String[]{"40", "25", "15"};

        for (int i = 0; i < sroom.length; i++) {
            cv.put(KEY_LISTITEMROOM, sroom[i]);
            cv.put(KEY_LISTITEMNAME, sitem[i]);
            cv.put(KEY_LISTITEMWEIGHT, sweight[i]);
            ourDatabase.insert(DATABASE_TABLE5, null, cv);
        }
    }

    public ArrayList<String> getitems(){
        String[] columns = new String[]{KEY_ID5, KEY_ITEMNAME};
        Cursor c = ourDatabase.query(DATABASE_TABLE5, columns, null, null, null, null, null);
        ArrayList<String> items = new ArrayList<String>();

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            items.add(c.getString(1));
        }

        return items;
    }

    public ArrayList<String> getitemweight(){
        String[] columns = new String[]{KEY_ID5, KEY_ITEMWEIGHT};
        Cursor c = ourDatabase.query(DATABASE_TABLE5, columns, null, null, null, null, null);
        ArrayList<String> items = new ArrayList<String>();

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            items.add(c.getString(1));
        }

        return items;
    }

    public ArrayList<String> getitemclass(){
        String[] columns = new String[]{KEY_ID5, KEY_LISTITEMROOM};
        Cursor c = ourDatabase.query(DATABASE_TABLE5, columns, null, null, null, null, null);
        ArrayList<String> items = new ArrayList<String>();

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            items.add(c.getString(1));
        }

        return items;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:20:10.240

私有静态最终 int DATABASE_VERSION = 1;

This value is still equal to 1\. I'm assuming that is the value you used when the database was created. onCreate() is only called the first time that DbHelper is called on the device. onUpgrade won't be called unless the value of DATABASE_VERSION is changed. This means that your new table was never actually created in the database.

Try setting DATABASE_VERSION = 2.

------EDIT-----

There appears to be a typo in the value of DATABASE_TABLE5\.

private static final String DATABASE_TABLE5 = "lisitem";

----for loops will fail if query returns 0 results-----

use:

if(c.moveToFirst()){

```
do{
    items.add(c.getString(1);
    c.moveToNext();
}while(!c.isAfterLast()); 
```

}

# objective-c - 如何判断 UILabel 何时会被截断和/或其换行位置会改变

> ID：12945978
> 
> 赞同：5
> 
> 时间：2012-10-18T01:52:30.067
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uilabel

我有一个多行`UILabel`（`numberOfLines`= 0）。它的宽度可以在运行时改变，有时这会导致截断和/或重新包装。一些例子最好地说明了这一点：

**示例1：宽度的减小导致不同的换行点**

![在此处输入图像描述](../Images/05ab62123c307cbd2dd32771d15f659c.png) ![在此处输入图像描述](../Images/bc397e2de210967e23719305e83ce8fa.png)

**示例 2：宽度减小导致截断**

![在此处输入图像描述](../Images/2376f98e492d1088136f556a850041a2.png) ![在此处输入图像描述](../Images/0b51855e958f0de48e1a8a7268e25fd3.png)

**示例 3：宽度的减小导致截断和不同的换行位置**

![在此处输入图像描述](../Images/61cb4f7c4f6f188a9146386c9059bf14.png) ![在此处输入图像描述](../Images/0eec034309626f78658df5c7a7f577b4.png)

**示例 4：宽度的减小对截断或换行位置没有任何影响**

![在此处输入图像描述](../Images/341ca219b78e1efeaf1c1fe68be12d07.png) ![在此处输入图像描述](../Images/b7169986021632d08ed8647f3882be39.png)

由于格式上的这种变化可能会非常刺耳，我打算将它隐藏在一些动画后面（可能是淡入/淡出）。但是，第一个障碍是确定**何时**需要这样做。我不想在标签重新调整大小时应用动画 - 只有当它会导致截断或换行位置发生变化时。

我该如何测试这个？测试应返回 YES（例如 1、2 和 3），但返回 NO（例如 4）。

注意：在我的示例中，调整大小永远不会改变行数。

注意 2：如果有人有一些与文本格式相关的更好的标签，我很想知道它们 - 随时编辑。

注意 3：如果您有兴趣看到此行为已完成，请在 iPhone 上尝试 Apple 的 mail.app。查看收件箱时，滑动电子邮件并观看摘要行淡入/淡出，因为它重新换行和/或截断（但不是在不需要时）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-24T14:31:02.597

**斯威夫特 3 解决方案**

您可以在分配字符串后计算行数并与标签的最大行数进行比较。

```
import Foundation
import UIKit

extension UILabel {

    func countLabelLines() -> Int {
        // Call self.layoutIfNeeded() if your view is uses auto layout
        let myText = self.text! as NSString
        let attributes = [NSFontAttributeName : self.font]

        let labelSize = myText.boundingRect(with: CGSize(width: self.bounds.width, height: CGFloat.greatestFiniteMagnitude), options: NSStringDrawingOptions.usesLineFragmentOrigin, attributes: attributes, context: nil)
        return Int(ceil(CGFloat(labelSize.height) / self.font.lineHeight))
    }

    func isTruncated() -> Bool {

        if (self.countLabelLines() > self.numberOfLines) {
            return true
        }
        return false
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:05:11.110

您可以知道显示特定`NSString`实例所需的标签大小。例如，您可以使用那个：

> `- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(UILineBreakMode)lineBreakMode`
> 
> *如果使用指定的约束呈现字符串，则返回字符串的大小。*

所以你想要的是获取`CGSize`一个特定的字符串并检查它是否不大于`UILabel`大小：

```
 UILabel *label;
    CGSize sizeNeeded = [label.text sizeWithFont:label.font constrainedToSize:CGSizeMake(label.bounds.size.width, MAXFLOAT)];
    if (sizeNeeded.height > label.bounds.size.height)
    {
        NSLog(@"String is truncated");
    } 
```

`NSString`你可以在这里找到更多有用的方法： [NSString UIKit Additions Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)

好的，另一种做你想做的事：

1) 创建`UILabel`具有相同属性的 2，但第二个 ( `label2`) 将与另一个具有相同的属性`width`。

2)在非编辑模式下设置to的`alpha`属性。`label2``0.0`

3）当编辑模式开始制作这样的动画：

```
// label1.alpha == 1.0, label2.alpha == 0.0 
{[UIView animateWithDuration:0.5 animations:^{
    label1.alpha = 0.0;
    label2.alpha = 1.0;
}]; 
```

4) 编辑模式结束时：

```
{[UIView animateWithDuration:0.5 animations:^{
    label1.alpha = 1.0;
    label2.alpha = 0.0;
}]; 
```

这将为您提供与 Mail.app 相同的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T09:02:03.297

上面的答案是使用折旧的方法，所以我认为以下代码可能有用：

```
- (BOOL)isLabelTruncated:(UILabel *)label
{
    BOOL isTruncated = NO;

    CGRect labelSize = [label.text boundingRectWithSize:CGSizeFromString(label.text) options:NSStringDrawingUsesLineFragmentOrigin attributes:@{NSFontAttributeName : label.font} context:nil];

    if (labelSize.size.width / labelSize.size.height > label.numberOfLines) {

        isTruncated = YES;
    }

    return isTruncated;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T10:39:08.247

使用此方法查找 iOS 7 中被截断的标签。

```
- (BOOL)isTruncated:(UILabel *)label{
        CGSize sizeOfText = [label.text boundingRectWithSize: CGSizeMake(label.bounds.size.width, CGFLOAT_MAX)
                                                     options: (NSStringDrawingUsesLineFragmentOrigin|NSStringDrawingUsesFontLeading)
                                                  attributes: [NSDictionary dictionaryWithObject:label.font forKey:NSFontAttributeName] context: nil].size;

        if (self.frame.size.height < ceilf(sizeOfText.height)) {
            return YES;
        }
        return NO;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T12:00:59.730

对于高于 iOS 7 的版本，您可以查看以下解决方案：

1.  [https://stackoverflow.com/a/30813691/2123122](https://stackoverflow.com/a/30813691/2123122)
2.  [https://stackoverflow.com/a/32094824/2123122](https://stackoverflow.com/a/32094824/2123122)

# mysql - 以特定格式显示结果 MYSQL

> ID：12945980
> 
> 赞同：2
> 
> 时间：2012-10-18T01:53:02.547
> 
> 标签：mysql, sql

我有一张像

```
ID  Name Points
1   A     10
1   A     11
1   B     11
1   B     12
1   C     12
1   C     13
2   A      8
2   A      9
2   B      9
2   B     10
2   C     10
2   C     11 
```

我希望我的输出如下所示

```
ID   Average(A)  Average(B)  Average(C)
1     10.5          11.5         12.5
2      8.5           9.5         10.5 
```

以下 group by 查询显示输出但不是上述格式

```
Select Avg(Points),ID,name from table group by Name,ID 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:57:22.000

将现有查询包装在子查询中将允许您围绕它构建数据透视表。聚合的``MAX()` 目的只是消除语句`NULL`产生的 s `CASE`，因此将每个 ID 的多行折叠为每个 ID 的一行，每列中的非 NULL。

```
SELECT
  ID,
  MAX(CASE WHEN Name = 'A' THEN Points ELSE NULL END) AS `Average (A)`,
  MAX(CASE WHEN Name = 'B' THEN Points ELSE NULL END) AS `Average (B)`,
  MAX(CASE WHEN Name = 'C' THEN Points ELSE NULL END) AS `Average (C)`
FROM (
  SELECT ID, AVG(Points) AS Points, Name FROM yourtable GROUP BY Name, ID
) avg_subq
GROUP BY ID 
```

### [这是关于 SQLFiddle 的现场演示](http://sqlfiddle.com/#!2/7fe79/1)

# ios - CATransaction 设置动画持续时间不起作用

> ID：12945983
> 
> 赞同：5
> 
> 时间：2012-10-18T01:53:28.020
> 
> 标签：ios, opengl-es, core-animation, calayer, viewdidload

我正在学习核心动画并尝试示例。

当我使用以下代码时，动画持续时间有效

```
@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

//Modifying base layer
self.view.layer.backgroundColor = [UIColor orangeColor].CGColor;
self.view.layer.cornerRadius = 20.0;
self.view.layer.frame = CGRectInset(self.view.layer.frame, 20, 20);

//Adding layer
mylayer=[CALayer layer]; //mylayer declared in .h file
mylayer.bounds=CGRectMake(0, 0, 100, 100);
mylayer.position=CGPointMake(100, 100); //In parent coordinate
mylayer.backgroundColor=[UIColor redColor].CGColor;
mylayer.contents=(id) [UIImage imageNamed:@"glasses"].CGImage;

[self.view.layer addSublayer:mylayer];
}

- (IBAction)Animate //Simple UIButton
{
[CATransaction begin];

// change the animation duration to 2 seconds
[CATransaction setValue:[NSNumber numberWithFloat:2.0f] forKey:kCATransactionAnimationDuration];

mylayer.position=CGPointMake(200.0,200.0);
mylayer.zPosition=50.0;
mylayer.opacity=0.5;

[CATransaction commit];
}
@end 
```

另一方面，如果我将 Animate 方法代码集中在 ViewDidLoad 按钮的底部，以便它在不按任何按钮的情况下发生，则不会考虑动画持续时间。我只是看到没有任何动画的最终结果。

有什么想法吗？

谢谢九巴

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T02:18:37.210

这是您缺少的信息：您的应用程序中有**两个**层次结构。有你通常操作的*模型层层次结构。*然后是*表示*层层次结构，它反映了屏幕上的内容。查看[*核心动画编程指南*](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW19)[中的“层树反映动画状态的不同方面”以](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW19)*获得更多信息，或者（**强烈推荐**）观看来自[WWDC 2011](https://developer.apple.com/videos/wwdc/2011/?id=421)的核心动画要点视频。*

 *您编写的所有代码都在模型层上运行（应该如此）。

当系统将更改的可动画属性值从模型层复制到相应的表示层时，系统会添加隐式动画。

只有在 a`UIWindow`的视图层次结构中的模型层才能获得表示层。系统会`viewDidLoad`在添加到窗口之前发送给您`self.view`，因此在运行时还没有表示层`self.view`或您的自定义层`viewDidLoad`。

因此，您需要做的一件事是稍后在将视图和图层添加到窗口并且系统创建了表示图层之后更改属性。`viewDidAppear:`已经够晚了。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    //Modifying base layer
    self.view.layer.backgroundColor = [UIColor orangeColor].CGColor;
    self.view.layer.cornerRadius = 20.0;
    self.view.layer.frame = CGRectInset(self.view.layer.frame, 20, 20);

    // Adding layer
    mylayer = [CALayer layer]; //mylayer declared in .h file
    mylayer.bounds = CGRectMake(0, 0, 100, 100);
    mylayer.position = CGPointMake(100, 100); //In parent coordinate
    mylayer.backgroundColor = [UIColor redColor].CGColor;
    mylayer.contents = (id)[UIImage imageNamed:@"glasses"].CGImage;    
    [self.view.layer addSublayer:mylayer];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    [CATransaction begin]; {
        [CATransaction setAnimationDuration:2];
        mylayer.position=CGPointMake(200.0,200.0);
        mylayer.zPosition=50.0;
        mylayer.opacity=0.5;
    } [CATransaction commit];
} 
```*

# eclipse - 在 Eclipse 中使用 jbehave 执行项目的问题

> ID：12945986
> 
> 赞同：2
> 
> 时间：2012-10-18T01:53:57.820
> 
> 标签：eclipse, jbehave, jbehave-plugin

我对 jbehave 甚至自动化测试完全陌生。我在线阅读了教程并尝试按照步骤操作。

我正在尝试在 Eclipse IDE 中运行此应用程序。

我制作了一个包含测试的 Math.story 文件：

```
Scenario: 2 squared
Given a variable x with value 2
When I multiply x by 2 
Then x should equal 4 
```

在名为 ExampleSteps.java 的 .java 文件中，编写了以下步骤：

```
import org.jbehave.core.annotations.Given;
import org.jbehave.core.annotations.Named;
import org.jbehave.core.annotations.Then;
import org.jbehave.core.annotations.When;
import org.jbehave.core.steps.Steps;

public class ExampleSteps extends Steps {
    int x;

    @Given("a variable x with value $value")
    public void givenXValue(@Named("value") int value) {
        x = value;
    }

    @When("I multiply x by $value")
    public void whenImultiplyXBy(@Named("value") int value) {
        x = x * value;
    }

    @Then("x should equal $value")
    public void thenXshouldBe(@Named("value") int value) {
        if (value != x)
            throw new RuntimeException("x is " + x + ", but should be " + value);
    }
} 
```

我创建了另一个具有主要方法的类 SimpleJbehave：import java.util.Arrays; 导入 java.util.List；

```
import org.jbehave.core.embedder.Embedder;

public class SimpleJBehave {

    private static Embedder embedder = new Embedder();
    private static List<String> storyPaths = Arrays
            .asList("Math.story");

    public static void main(String[] args) {
        embedder.candidateSteps().add(new ExampleSteps());
        embedder.runStoriesAsPaths(storyPaths);

    }
} 
```

当我运行此代码时，出现以下异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/collections/Transformer
    at org.jbehave.core.configuration.Configuration.<init>(Configuration.java:112)
    at org.jbehave.core.configuration.MostUsefulConfiguration.<init>(MostUsefulConfiguration.java:49)
    at org.jbehave.core.embedder.Embedder.<init>(Embedder.java:30)
    at org.jbehave.core.embedder.Embedder.<init>(Embedder.java:37)
    at SimpleJBehave.<clinit>(SimpleJBehave.java:8)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.collections.Transformer
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 5 more 
```

由于我是新手，我一直无法理解究竟是什么问题。

如果有人能告诉我应该怎么做才能让这段代码正常工作，那就太好了。我的方法错了吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:07:25.767

看起来`org.apache.commons.collections.Transformer`您的类路径中没有。看起来这个类在 apache-commons-transformer 库中可用：http: [//commons.apache.org/collections/api-release/org/apache/commons/collections/Transformer.html](http://commons.apache.org/collections/api-release/org/apache/commons/collections/Transformer.html)

下载 jar 并将其添加到您的类路径中。它可能会起作用。

# bash - 在bash中递归重命名目录

> ID：12945987
> 
> 赞同：10
> 
> 时间：2012-10-18T01:54:09.800
> 
> 标签：bash

我想通过用*Bar*替换字符串的那部分来递归地重命名包含字符串*foo*的所有目录。到目前为止，我有类似的东西，但它并不完全有效。我也希望*foo*被搜索**不区分大小写**。

 ****`find . -type d -exec bash -c 'mv "$1" "${1//foo/Bar}"' -- {} \;`

有没有可能比这次尝试更好的优雅单线？我实际上已经尝试了一些，但我认为我会听从专家的意见。注意：我在 Mac OS X 系统上执行此操作，并且没有安装**重命名**等工具。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T02:03:11.400

*使用参数扩展*尝试以下代码

 *```
find . -type d -iname '*foo*' -depth -exec bash -c '
    echo mv "$1" "${1//[Ff][Oo][Oo]/BAr}"
' -- {} \; 
```

但是您最好的选择是`prename`命令（有时命名为`rename`or `file-rename`）

```
find . -type d -iname '*foo*' -depth -exec rename 's@Foo@Bar@gi' {} + 
```

如果你使用`bash4`or `zsh`（`**`意思是*递归*）：

```
shopt -s globstar
rename -n 's@Foo@Bar@gi' **/*foo*/ 
```

如果它符合您的需要，请移除`-n`（试运行）开关以真正重命名。

**一些文档**

[rename](http://search.cpan.org/~pederst/rename/bin/rename.PL)最初是由 Perl 的父亲 Larry Wall 自己编写的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T02:30:19.860

我怀疑问题是让它与`mkdir -p foo/foo/foo`.

在这方面，我认为基于路径的解决方案`find`可能不起作用，因为路径列表可能是预先确定的。

以下绝不是*优雅*的，并且延伸了*one-liner*的定义，但适用于上述测试。

```
$ mkdir -p foo/foo/foo

$ (shopt -s nullglob && _() { for P in "$1"*/; do Q="${P//[Ff][Oo][Oo]/bar}"; mv  -- "$P" "$Q"; _ "$Q"; done } && _ ./)

$ find
.
./bar
./bar/bar
./bar/bar/bar 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T02:03:30.793

```
find . -type d -iname '*foo*' -exec bash -O nocasematch -c \
    '[[ $1 =~ (foo) ]] && mv "$1" "${1//${BASH_REMATCH[1]}/Bar}"' -- {} \; 
```

**优点：**避免使用 sed。
**缺点：**如果在不同情况下有多个匹配项，则不会找到所有匹配项。
**缺点：**很荒谬。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-07T15:26:21.167

感谢@Gilles Quenot 和 Wenli：以下内容对我有用。我基于您的两个解决方案。

```
find . -depth -type d -name 'ReplaceMe*'  -execdir bash -c 'mv "$1" "${1/ReplaceMe/ReplaceWith}"' -- {} \; 
```

`-execdir`似乎是 linux Red hat 7.6的关键

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-27T15:09:12.717

我一直在寻找类似的答案，这个答案有效：

```
find . -depth -name 'foo' -execdir bash -c 'mv "$0" ${0//foo/Bar}"' {} \; 
```*****

# apache - IIS 虚拟目录主目录不同于 Apache

> ID：12945988
> 
> 赞同：2
> 
> 时间：2012-10-18T01:54:27.950
> 
> 标签：apache, iis, virtual-directory, home-directory

我有一个我在内部 WAMP 服务器上开发的站点，并且托管在异地（大概在 Apache 服务器上）。该站点是在 WAMP 服务器的根目录 (C:\wamp\www) 中创建的。我现在正试图将内部开发站点移动到 Windows Home Server v1 机器上（本质上是运行 IIS 6 的 Server 2003 机器）。我试图没有两个不同版本的站点：一个用于内部（在 IIS 上），一个用于托管异地（在 Apache 上）。

在 WHS 机器上，我有一个虚拟目录`<sitename>`位于：

```
c:/inetpub/<sitename> 
```

我可以在服务器上访问它：

```
Localhost/<sitename> 
```

并从 LAN 上的任何地方：

```
<ServerName>/<sitename> 
```

当我最初编写该站点时，我对几乎每个文件、路径、目录和 PHP 包含文件都使用了 ../ 声明。这在 WAMP 服务器和异地主机上运行良好。但是，当我将站点移动到虚拟目录`<sitename>`时，它在 IIS 服务器上失败了。

所有此类 ../ 引用都指向服务器根目录：

`<ServerName>/`

而不是网站主页：

```
<ServerName>/<sitename> 
```

据推测，我可以将站点移动到“根”目录：c:/inetpub/wwwroot，但 Windows Home Server 将其用于其他目的。

我可以将每个引用从 ../ 更改为`../<sitename>/`，但这意味着要维护 2 个不同的站点，一个用于内部，一个用于异地。

所以，我的问题是......

1.  有没有办法声明虚拟目录`c:/inetpub/<sitename>` 是这个单一站点的主目录或根目录？IIS 中是否有一个配置可以*为这个虚拟目录*执行此操作，并且不会扰乱此服务器上托管的其他站点？

如果不;

1.  有人可以指出我重写网站的其他方式，以便让它在 Apache 和 IIS 6 上运行，而对*两个*不同的服务器没有/最小的改动？

我一直在寻找一个多星期的时间。我发现的所有解决方案都特定于 Apache 或 IIS，但在两者中都不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:06:28.590

好的，这是一个-可能的-答案...

我将 every 更改`../`为 PHP 包含语句，调用我命名为`SiteBase.txt`.

在 IIS 服务器上，SiteBase.txt 包含一行：`http://<ServerName>/<sitename>/`.

在 WAMP 服务器上，SiteBase.txt 包含一行：`../`

这样，当我将站点从我的开发服务器移动到生产服务器时，我只需要更改这个文件。有点蛮力，但它似乎正在工作。

有没有人看到这个问题？

谢谢！

# sqlite - NHibernate、Sqlite、缺失表和 IOC 乐趣

> ID：12945990
> 
> 赞同：3
> 
> 时间：2012-10-18T01:54:55.353
> 
> 标签：sqlite, nhibernate, structuremap

我正在对使用 NHibernate 进行持久性的类库进行单元测试。NHibernate 使用 Sqlite 内存数据库进行测试。在正常情况下，很容易让 StructureMap 为我踢出一个会话。

但是，因为我使用内存数据库来提高测试速度，所以我需要在测试期间有一个可用的会话（因为当我创建一个新的数据库时它会破坏数据库）。还有另一个皱纹。目前困扰我的案例是测试一个自定义的基于 NHibernate 的 ASP.NET 成员资格提供程序。这些显然是每个 AppDomain 创建一次，因此出于显而易见的原因，我不应该将会话注入其中。

结构映射中有没有办法告诉它摆脱特定类型的实例，同时仍然保留告诉它如何实例化该类型的位？真的，如果我能摆脱它，我只会让它像 HttpScoped 对象生命周期一样，但显然我只能在 Http 请求的上下文中这样做。有没有一种直接的方法来手动控制从结构图中出来的对象的生命周期？

我为这个问题的长度以及这是一个愚蠢的问题的可能性道歉。我在这个项目上是一个人，所以我真的没有人可以提出想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:42:06.363

您可以将会话包装在您自己的 ISession 实现中，该实现委托给您控制的真实会话。然后注册你自己的 ISession 作为实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:38:03.417

我最终为我的提供者制作了两个构造函数以及一个 Func 类型的私有变量。默认情况下，它的值设置为我使用 StructureMap 的 ObjectFactory 创建会话的标准代码。

重载的构造函数接受一个 Func 类型的对象作为参数。这样，如果需要，我可以注入创建该类型实例的策略，否则不必进行任何扩展工作。在我的测试中，我在 NUnit 设置方法中创建了会话，并在 Teardown 中将其销毁。我不喜欢这个想法，但我目前还没有足够讨厌它来撕掉它……但是。

这消除了我在表格方面遇到的错误。但是，在我创建的条件下，由于某种原因，NHibernate 似乎无法写入内存中的 sqlite 数据库。我现在正在测试是否可以写入文件系统中的一个。这并不理想，但在写入磁盘的性能真正开始受到伤害之前，这将是很长一段时间（我希望）。

# assembly - PTX“位桶”寄存器

> ID：12945991
> 
> 赞同：7
> 
> 时间：2012-10-18T01:55:02.157
> 
> 标签：assembly, cuda, gpgpu, ptx

...只是在[PTX 手册](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/ptx_isa_3.0.pdf)中提到。没有关于它们有什么好处或如何使用它们的提示。

有人知道更多吗？我只是错过了一个共同的概念吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T05:31:12.363

巴特的评论基本上是对的。更详细地说，如[PTX ISA 3.1 手册](http://docs.nvidia.com/pdf/ptx_isa_3.1.pdf)中所述，

> 对于某些指令，目标操作数是可选的。可以使用下划线 ( ) 表示的“位桶”操作数来`_`代替目标寄存器。

实际上，在 3.1 PTX 规范中只列出了一类指令，它`_`是有效目的地：`atom`. 以下是 的语义`atom`：

> 以原子方式将位置 a 处的原始值加载到目标寄存器 d 中，对操作数 b 和位置 a 中的值执行归约操作，并将指定操作的结果存储在位置 a 处，覆盖原始值。

并且有一个注释`atom`：

> 可以通过使用“位桶”目标操作数“<code>_”来指定简单的缩减。

所以，我们可以构造一个例子：

```
atom.global.add.s32 _, [a], 4 
```

这会将 4 添加到内存位置的有符号整数`a`，而不是返回`a`寄存器中位置的先前值。所以如果你不需要之前的值，你可以使用这个。我假设编译器会为此代码生成这个

```
atomicAdd(&a, 4); 
```

因为 atomicAdd 的返回值没有存储到变量中。

# ruby-on-rails - CanCan如何将一个函数分类为read/update/show/create ...？

> ID：12945995
> 
> 赞同：1
> 
> 时间：2012-10-18T01:55:39.613
> 
> 标签：ruby-on-rails, cancan

我对模型 A 有一个规则，其中用户只能：读取模型。在 A 的控制器中，我有一些功能，如“显示”、“更新”等（用户可以访问），还有一些其他功能，如“foo”。我希望用户能够访问“foo”，但我也想为用户调用 load_and_authorize。有没有一种方法可以将函数“foo”标记为读取操作的一部分，以便 CanCan 成功？

# objective-c - Objective-C 运行时和内存管理

> ID：12945996
> 
> 赞同：4
> 
> 时间：2012-10-18T01:55:59.860
> 
> 标签：objective-c, memory-management, runtime

在寻找`NSStack`或类似的时候，我遇到了这个[代码示例](https://stackoverflow.com/a/3685906/879664)。在`pop`方法中作者明确地保留`returnObject`然后返回一个`autorelease`对象。**这真的有必要吗？**我的印象是运行时将`removeLastObject`在运行循环迭代结束时销毁从内容中删除的对象（而不是在中间的某个地方）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T02:05:32.040

> 这真的有必要吗？

如果您仍在使用手动内存管理。如果没有保留，`returnObject`则可以在将其从数组中删除后立即解除分配。可变数组保留它包含的对象，并在删除时释放它们。在删除对象之前保留它可以防止对象被释放；自动释放它允许对象停留足够长的时间以便调用方法接收它。

如果您正在使用 ARC（并且没有很多理由不使用），您不必担心任何这些。编译器将为您确定何时保留以及何时释放。

> 我的印象是运行时将在运行循环迭代结束时通过 removeLastObject 销毁从内容中删除的对象

如果 NSMutableArray 在删除对象时自动释放对象，就会发生这种情况，但我认为没有任何理由认为它确实如此。如果返回已删除的对象，您可以指望自动释放`-removeLastObject`已删除的对象，但事实并非如此。你永远不应该假设另一个对象对其拥有的对象做了什么。

# php - MySQL FULLTEXT 与通配符不匹配字符串

> ID：12945997
> 
> 赞同：1
> 
> 时间：2012-10-18T01:57:06.340
> 
> 标签：php, mysql, full-text-search, myisam, full-text-indexing

我正在尝试对我的 MySQL 数据库进行基本的全文搜索 - 这是我正在使用的表：

**删除表**

任何输入都将不胜感激，因为我之前没有使用过全文搜索（或为此编制索引！）

谢谢

编辑：

我之所以选择使用`FULLTEXT`，是因为假设`LIKE`搜索速度很慢 - 将会有很多这样的运行，因为它是用于 javascript 自动完成类型的东西。使用`LIKE`是一个可行的选择吗？有人建议我不要这样做。（我提出这个问题是因为所有答案都说要使用`LIKE`而不是解决我的实际问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:47:29.170

MySQL全文搜索功能有限，搜索速度相对较慢。[我建议使用Solr](http://lucene.apache.org/solr/)或[Sphinx](http://sphinxsearch.com)等外部全文搜索引擎进行此类查询。我对 Solr 不熟悉，但对于 Sphinx，您可以在配置文件中租用与 enable_star 选项一起支持的前缀索引。

这是一个关于[如何用 Sphinx 替换 MySQL FT](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)的示例。您还可以使用 Sphinx 进行分面搜索、相关文档搜索和其他有用的东西。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:06:35.713

使用`LIKE`命令并使用百分号 ( `%`) 作为通配符：

```
SELECT user_id, username, first_name, last_name 
FROM users 
WHERE (username LIKE 'Sav%') 
   OR (email LIKE 'Sav%') 
   OR (first_name LIKE 'Sav%') 
   OR (last_name LIKE 'Sav%'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:03:23.153

你在这里混合了你的隐喻。您想使用 FULLTEXT 有充分的理由，然后使用 LIKE 中的语法。

尝试只搜索没有通配符的普通“savo”，看看是否可以接受。

顺便说一句，Mysql FULLTEXT 搜索的 2 个大问题：

1.  它不会对输入少于 4 个字母而不会返回并弄乱 cnf 做出反应（我认为它是 4 个，你需要检查一下）

2.  如果结果集计数大于可用总行数的 50%，则它认为搜索失败，并且不返回任何内容。值得记住的是，只测试 12 行，并说他们都有这个词`test`。哎哟;)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T02:10:15.513

我认为你正在尝试做这样的事情：

```
 select * from users where (
username like ('Sav%') 
or email like ('Sav%') 
or first_name like ('Sav%') 
or last_name like ('Sav%') ); 
```

# websocket - Websockets 如何区分正在发送的数据

> ID：12945998
> 
> 赞同：0
> 
> 时间：2012-10-18T01:57:08.083
> 
> 标签：websocket, phpwebsocket

我正在阅读如何实现 websockets。现在我正在研究 fancywebsockets 的实现，因为它更容易设置。我的问题更适合理解 websockets，所以我想对此进行一些分类。

1.  你能控制WS（IE客户端接收数据）正在发送的数据吗？

2.  在私人消息场景中，您如何处理，您还将消息存储在数据库中。如果您将文本存储在数据库中并在屏幕上显示消息，那么 WS 将如何将该更改应用于浏览该页面的其他人。（WS 是否监听该 PAGE 中发生的所有更改？）。一个明显的例子是在 facebook 中，两个浏览同一面墙的人会看到墙所有者的更新？

3.  虽然有点无关，但很好奇的问题。如果 websockets 为我们提供了数据的实时更新，为什么没有人创建一个分叉版本的 Google Wave 服务。是不是因为不是每个浏览器都有明确的实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:39:09.303

关于1.这个问题我真的不明白，Websockets连接和TCP连接一样，你可以在发回之前修改接收日期。[Bristleback Server](http://bristleback.pl)中的简单示例（服务器获取已编辑用户状态的预览，然后检查其中是否包含非法字词，然后将状态的完整预览发送回用户：

```
@ActionClass
public class ClientNotificationUpdateAction {

  @Action
  public UserStatus previewEditedStatus(FacebookUser user, UserStatus status) {
    removeBadWords(status);
    return status;
  }
} 
```

关于 2\. WebSockets 服务器有关于所有已连接用户的信息，因此可以简单地将消息发送给所有已连接用户，或者另外过滤以发送此通知，例如仅发送给密友。这里还有一些代码（客户端更新他的状态并将这个状态发送回他的所有朋友）。

```
@ActionClass
public class ClientNotificationUpdateAction {

  @ObjectSender
  private ConditionObjectSender conditionObjectSender;

  @Action
  public void updateStatus(FacebookUser user, UserStatus status) throws Exception {
    SendCondition sendToFriendsOfUser = new FiendsOfUserCondition(user);

    BristleMessage message = ActionMessageFactory
      .createMessage("ClientNotificationUpdate", "updateStatus", status);
    conditionObjectSender.sendMessage(message, sendToFriendsOfUser);
  }
} 
```

关于 3\. 确实不是所有的互联网浏览器都实现了 WebSockets 协议（尤其是在移动设备中）

# javascript - 用于多个页面元素的 javascript worker

> ID：12945999
> 
> 赞同：2
> 
> 时间：2012-10-18T01:57:17.677
> 
> 标签：javascript, shared-libraries

假设我有一个 javascript 库（.js 文件），它可以在页面上的 div 元素上绘制 SVG 图。该库应用业务逻辑并为单击元素等创建事件处理程序。伪代码可能如下所示：

```
myLib = {};
myLib.dummy = null;
mylib.doStuff = function(divID) {
  //divID is the ID of the element on which SVG graph will be drawn
  //does graph drawing and sets up myLib.dummy for feedback or such, e.g.:
  myLib.dummy = $("#divID").width();
} 
```

我的问题是：如何处理我想将此脚本应用于同一页面上的 2 个（或更多）元素的情况，然后将 myLib 的单独“实例”与每个元素相关联。我知道我不能从页面上这样称呼它：

```
myLib.doStuff('topDiv');   //myLib.dummy will be say 400;
myLib.doStuff('bottomDiv');   //myLib.dummy will be say 600; 
```

使用上面的代码，我将无法再访问与 ID = 'topDiv' 的 div 相关的 myLib.dummy，因为它们使用相同的命名空间。

我怀疑我错过了一种设计模式，或者答案可能只是命名空间的一个例子。

我将不胜感激任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:15:19.857

```
function makeALib() {
    var myLib = {};
    myLib.dummy = null;
    mylib.doStuff = function(divID) {
      //divID is the ID of the element on which SVG graph will be drawn
      //does graph drawing and sets up myLib.dummy for feedback or such, e.g.:
      myLib.dummy = $("#divID").width();
    }
    return myLib;
}

var libA = makeALib();
var libB = makeALib();

libA.doStuff('topDiv'); 
libB.doStuff('bottomDiv'); 
```

您可以在许多不同的领域引入分离或间接。在不了解您的使用上下文的情况下，很难说什么是好的选择。但以上是众多工作选择之一。