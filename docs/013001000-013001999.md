# StackOverflow 问答 13001000-13001999

# python - uWSGI、gevent、一些 redis 调用以及如果大于 90 毫秒如何使帖子超时

> ID：13001000
> 
> 赞同：1
> 
> 时间：2012-10-21T18:50:18.430
> 
> 标签：python, uwsgi, gevent

下面是我在瓶子里的代码。我正在使用带有 gevent 循环的 uWSGI。从请求的时间开始，如果整个请求花费的时间超过 90 毫秒，我需要返回 false。我不知道如何在 90 毫秒后使用 gevent 超时。阻塞码小于 2 ms。它的redis调用是问题所在。在无负载或小负载下……整个请求不到 20 毫秒。在重负载下，redis 调用可能需要更长的时间……如果更长，我需要超时。因此，从第一次 redis 调用开始，如果返回时间超过 90 毫秒，则超时。如果小于 90ms，计算余数。例如，如果呼叫一需要 60 毫秒，那么我有 30 毫秒的呼叫二。如果呼叫 2 花费的时间超过 30 毫秒，则超时。

```
@post('/test')
def test():

    #START THE TIMER

    #SOME BLOCKING CODE

    #MAKE A REDIS CALL AND SERVICE OTHER REQUESTS
    jt = [gevent.spawn(redis_call)]
    gevent.joinall(jt)

    #SOME BLOCKING CODE

    #MAKE A REDIS CALL AND SERVICE OTHER REQUESTS
    jt = [gevent.spawn(redis_call)]
    gevent.joinall(jt)

    if total_time<.09:
        yield "passed"
     else:
        yield "failed" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:06:07.523

```
# start redis_call in a background greenlet
g = gevent.spawn(redis_call)

# wait for up to 90 seconds for redis_call to complete
g.join(90)

# if g has finished, kill() is a no-op
# if g is still running, kill() will interrupt it (by raising GreenletExit in it)
# by default, kill() waits for greenlet to exit (which might never happen, 
# if redis_call caught GreenletExit and ignored it). You can also do g.kill(block=False) to
# avoid waiting for killing to complete 
g.kill() 
```

# java - Mysql 不想授予对 jdbc 的访问权限。我能做些什么？

> ID：13001002
> 
> 赞同：0
> 
> 时间：2012-10-21T18:50:30.743
> 
> 标签：java, mysql, jdbc, database-administration

我尝试连接到新创建的数据库但没有成功。尝试了所有来自网络的处方。有任何想法吗？

![无法连接](../Images/25247f7705fdcecd037442d8623f9339.png) ![但是数据库和权限都可以](../Images/b3e00ec4ea8dc598a4f2af4ff0f23c72.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:14:24.113

问题是我有两个 mysqls 正在运行。在您的管理工具中检查它，这可能对您有帮助...

# python - 从文件到字典

> ID：13001010
> 
> 赞同：0
> 
> 时间：2012-10-21T18:51:29.480
> 
> 标签：python, dictionary

我正在尝试将文件放入字典中。文件是这样的：

```
1 some something something
2 go goforit doit 
17 non so 
```

我正在尝试这样的事情但不起作用：

```
def filetodic():
 d={}
 with open("file.txt") as f:
  for line in f:
   key  = line.split()
 return d
print filetodic() 
```

**编辑：**字典中每个字段的键都需要是文件中每一行中出现的第一个元素的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:57:35.213

试试这个：

```
def filetodic():
    d={}
    f = open("file.txt")
    for line in f:
        key  = line.split()
        d[key[0]]= ' '.join(key[1:])
    return d

print filetodic() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T19:10:14.290

既然你想要`{1:"some something something", 2:"go goforit doit"}`（如评论中所示），请尝试

```
k, v = line.rstrip().split(None, 1)
d[int(k)] = v 
```

请注意，这会保留值本身的间距（例如，`1 abc  def`变为`1:'abc  def'`而不是`1:'abc def'`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:15:24.643

使用正则表达式：

```
rg = re.compile(r'(?P<k>[0-9]+)[ \t]+(?P<v>[A-Za-z\t .]+)')

def filetodic(fileo):
    return {int(k):v.strip() for k,v in [rg.match(line).groups() for line in fileo]}

print filetodic(open("test.txt")) 
```

# c - 打印数据包内容的 HEX 值

> ID：13001015
> 
> 赞同：1
> 
> 时间：2012-10-21T18:52:03.417
> 
> 标签：c, networking, tcp, network-programming, libpcap

我正在使用 libpcap 进行数据包嗅探。我想像在 Wireshark 中一样打印出十六进制的数据包内容。我怎么做？假设我要打印 TCP 段的第 21 个字节的 HEX 值（选项的第一个字节，对于 MSS，通常为 0x02），我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:06:17.107

尝试这个：

```
char data[]; // byte array with packet content;
int start; // starting offset 
int end; // ending offset

int i;

for (i = start & ~15; i < end; i++)
{
    if  ((i & 15) == 0) 
       printf("%04x ",i);
    printf((i<start)?"   ":"%02x%c",(unsigned char)data[i],((i+1)&15)?' ':'\n');
}
if ((i & 15) != 0)
    printf("\n"); 
```

它将打印出提供的`data`缓冲区从`start`偏移量开始到偏移量的部分`end`；

# android - 三星 S2，MacOSX 上的 Android

> ID：13001016
> 
> 赞同：2
> 
> 时间：2012-10-21T18:52:04.950
> 
> 标签：android, eclipse, macos, adb

这被问了很多。我无法让我的设备在 MacOSX 上运行 ADB。我知道这是一个软件问题，因为我可以通过三星应用程序 Kies 进行连接。

看

1) [adb 找不到我的设备/手机 (MacOS X)](https://stackoverflow.com/questions/7135999/adb-not-finding-my-device-phone-macos-x)

2) [Android 设备在 adb 中不被识别](https://stackoverflow.com/questions/10790139/android-device-is-not-recognized-in-adb)

3)[为什么 Eclipse/adb 不能在我的 Mac 上检测到我的三星 Galaxy Tab 设备？](https://stackoverflow.com/questions/9134953/why-wont-eclipse-adb-detect-my-samsung-galaxy-tab-device-on-my-mac)

可能的解决方案都不适合我。

1.  启动服务器，杀死服务器
2.  USB调试开启？
3.  将供应商 ID 添加到 ./android/adb_usb.ini
4.  USB数据线缺陷？
5.  添加sdk路径
6.  sudo kextunload /System/Library/Extensions/EasyTetherUSBEthernet.kext (?)
7.  通过 USB 集线器连接您的设备，而不是直接连接到 MAC 上的 USB 端口之一。

细节

OSX 10.8.0, Eclipse Juno (4.2.1), Android 4.0.3, apropriate SDK #15

编辑：也在 Windows 7 上试过。更新固件。没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:27:34.267

所以最后我明白了。我以为我处于调试模式，因为 Android 有这个奇怪的灰色复选框。我可以激活 USB 测试模式，现在它正在工作。

# php - PHP搜索学生证和姓氏

> ID：13001020
> 
> 赞同：0
> 
> 时间：2012-10-21T18:52:17.433
> 
> 标签：php

我有一个作业，其表格以 ID 和姓氏作为输入。我想同时获取 ID 和姓氏并将其与文本文件匹配。如果匹配，请在表格中显示该学生。如果不匹配，则回显未找到学生。到目前为止，我几乎完成了所有工作，但每次搜索存在的学生时，都会回显未找到的学生。

这是我的表格的链接：http: [//hills.ccsf.edu/~ryan/a7p1.php](http://hills.ccsf.edu/~ryan/a7p1.php)

这是您可以从中获取 ID 和姓氏的学生班级。第一列是学生 ID，第二列是姓氏： http: [//fog.ccsf.edu/~tboegel/showclass.php](http://fog.ccsf.edu/~tboegel/showclass.php)

这是代码：

```
<?php                                                                                                                      

$lname = $_REQUEST['lname'];                                                                                               
$id = $_REQUEST['id'];

function DisplayRow($ID) {                                                                                                 
    print "<tr>\n";
    $parts = split(":", $ID);                                                                                              
    for($i=0; $i <=7; $i++) {                                                                                              
    print "<td>$parts[$i]</td>\n";                                                                                     
    }
    print "</tr>\n";                                                                                                       
}

$handle = fopen("class.txt", "r");                                                                                         
$line = fgets($handle);
while(!feof($handle)) {                                                                                                    
    $part = explode(":", $line);                                                                                           
    if($id == $part[0] && $lname == $part[1]) {                                                                            
        echo "<table border='1' width='95%'>                  
        <tr>                                                                                                               
          <th>Student ID</th>                                                                                                
          <th>Student Last Name</th>                                                                                         
          <th>Student First Name</th>
          <th>Midterm 1</th>                                                                                                 
          <th>Midterm 2</th>
          <th>Midterm 3</th>
          <th>Final Exam</th>                                                                                                
          <th>Letter Grade</th>
        </tr>";
        DisplayRow($line);
    } else {
        print "The person you are trying to search for does not exist";
        die;
    }
    $line = fgets($handle);
}
fclose($handle);
print "</table>\n";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:07:30.363

您的问题很简单.....您过早地终止了循环

```
else {
        print "The person you are trying to search for does not exist"; //??
        die;
    }    ^--------------- This your issue (Remove) 
```

**最好还是**使用数据库，例如`SQLite`or`MySQL`

另请注意`split`已折旧，我建议`explode`改用

```
$parts = split(":", $ID);  
           ^-------------  Change to explode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:16:33.270

while 搜索直到它找到一些东西然后它会中断......如果达到 eof 它将触发一个错误

```
<?php                                                                                                                      

$lname = $_REQUEST['lname'];
$id = $_REQUEST['id'];

function DisplayRow($ID) {
    print "<tr>\n";
    $parts = split(":", $ID);
    for($i=0; $i <=7; $i++) {
        print "<td>$parts[$i]</td>\n";
    }
    print "</tr>\n";
}
$found = false;
$handle = fopen("class.txt", "r");
$line = fgets($handle);
while(!feof($handle)) {
    $part = explode(":", $line);
    if($id == $part[0] AND $lname == $part[1]) {
     echo "<table border='1' width='95%'>
        <tr>
            <th>Student ID</th>
            <th>Student Last Name</th>
            <th>Student First Name</th>
            <th>Midterm 1</th>
            <th>Midterm 2</th>
            <th>Midterm 3</th>
            <th>Final Exam</th>
            <th>Letter Grade</th>
        </tr>";

        DisplayRow($line);

        echo "</table>";
        $found = true;
        break; //no need to go further already found the data
    }
    $line = fgets($handle);
}
if($found == false) {
    echo "The person you are trying to search for does not exist";
}
fclose($handle);

?> 
```

# ruby-on-rails - 如何在 Ruby on Rails 中通过 Ajax 传递包含换行符的值？

> ID：13001022
> 
> 赞同：0
> 
> 时间：2012-10-21T18:52:20.717
> 
> 标签：ruby-on-rails, ruby, ajax, jquery

我正在尝试`address`通过 Ajax 更新文本区域：

**应用程序.js**

```
$("#invoice_project_id").change(function() {
    $.ajax({
        url: '/invoices/get_recipient',
        data: 'project_id=' + this.value,
        dataType: 'script'
    })
}); 
```

**invoices_controller.rb**

```
def get_recipient
  project = Project.find(params[:project_id])
  @recipient = project.person.address
end 
```

**get_recipient.js.erb**

```
$('#invoice_recipient').val("<%= @recipient %>"); 
```

显然，不能以这种方式通过 Ajax 填充文本区域，可能是由于`address`.

当我使用另一个属性时，例如`first_name`，整个事情工作得很好：

```
@recipient = project.person.first_name 
```

我怎样才能让它和一个一起工作`address`？

我猜地址内的换行符需要以某种方式转义，但我还没有找到一种方法来做到这一点。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:37:12.177

如果您可以用其中的文本替换更改返回的 jQuery，并发送直接文本，您可以执行以下操作：

```
$("#invoice_project_id").change(function() {
   var value=$(this).val();
    $.get('/invoices/get_recipient', {project_id= : value}  function(response) {
        $('#invoice_recipient').val(response);
    })
});​ 
```

将换行符作为直接文本而不是脚本发送应该在将它们添加到 textarea 时保留它们

# php - PHP仅显示来自数据库的单个结果

> ID：13001023
> 
> 赞同：0
> 
> 时间：2012-10-21T18:52:22.917
> 
> 标签：php, html, sql

因此，我一直在开发一个小型系统，其中包含用于用户兑换某种奖励的代码。

到目前为止，我在 PHP 和 HTML 中有这个脚本：http: [//pastebin.com/UUSEKpev](http://pastebin.com/UUsEKpev)

它只显示您可以[在此处](http://bit.ly/PKDZ6i)看到的一个结果，我希望它在一个向下显示所有结果的表格中显示多个结果。

```
<?php

$yn;
mysql_connect("localhost", "root", "password") or die(mysql_error());
mysql_select_db("mcv") or die(mysql_error());

$result = mysql_query("SELECT * FROM Codes")
or die(mysql_error());  

$row = mysql_fetch_array( $result );
// Print out the contents of the entry 

if ($row['Used'] == 1) {
    $yn = "Yes";
}
else{
    $yn = "No";
}

?>

<html>
<head>
    <title>Minecraft Codes</title>
    <style type="text/css">

    tbody {
        display: table-row-group;
        vertical-align: middle;
        border-color: inherit;
    }

    tr {
        display: table-row;
        vertical-align: inherit;
        border-color: inherit;
    }

    th {
        border: 1px solid #C3C3C3;
        padding: 3px;
        vertical-align: top;
        width: 20%;
        background-color: #E5EECC;
    }

    table.reference {
        background-color: white;
        border: 1px solid #C3C3C3;
        border-collapse: collapse;
        width: 50%;
    }

    table.reference td {
        border: 1px solid #C3C3C3;
        padding: 3px;
        vertical-align: top;
        width: 20%;
    }

    table, th, td, input, textarea {
        font-size: 100%;
    }

    body, p, h1, h2, h3, h4, table, td, th, ul, ol, textarea, input {
        font-family: verdana,helvetica,arial,sans-serif;
    }

    </style>
</head>

<body>
    <center>
        <br />
        <h1><u>Minecraft Server VIP Codes</u></h1>
        <br />

        <table class="reference">
            <tr>
                <th>Code</th>
              <th>Used?</th>
          </tr>
          <?php echo "<tr><td>".$row['Code']."</td><td>".$yn."</td></tr>"; ?>
        </table>
    </center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:56:32.057

您的问题是您只获取一行：

```
$row = mysql_fetch_array( $result ); 
```

该行获取结果集的当前行。您想循环执行此操作：

```
$rows = array();
while ($row = mysql_fetch_array($result)) {
    $rows[] = $row;
} 
```

如果可以请避免使用 mysql_ 函数，它们已被弃用，请参阅 [此处](http://www.php.net/manual/en/function.mysql-query.php)的巨大警告并[阅读此内容](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:00:08.857

```
<table class="reference">
    <tr>
        <th>Code</th>
        <th>Used?</th>
    </tr>

    <?php while ($row = mysql_fetch_array($result)): ?>
    <?php 
        if ($row['Used'] == 1) {
            $yn = "Yes";
        }
        else{
            $yn = "No";
        }
    ?>
    <tr>
        <td><?php echo $row['Code']; ?></td>
        <td><?php echo $yn; ?></td>
    </tr>
    <?php endwhile; ?>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:55:47.163

是的，你只调用一次 mysql_fetch_row() ，因此你只检索一行。您必须将其包装到一个循环中，该循环执行的次数与行数一样多。

互联网上有数以百万计的示例，您可以从中学习...

# django - Django/Heroku 设置注入？

> ID：13001031
> 
> 赞同：0
> 
> 时间：2012-10-21T18:53:30.580
> 
> 标签：django, deployment, heroku, settings

我希望能够将我的 DATABASES['default'] 设置更改为在部署到 heroku 时自动更改。有没有办法做到这一点？

这看起来像我想要 的[https://devcenter.heroku.com/articles/django-injection](https://devcenter.heroku.com/articles/django-injection)，但它似乎从 2012 年 7 月 1 日起不再有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:43:44.067

使用`dj_database_url`，如此[处](https://devcenter.heroku.com/articles/django#database-settings)所述。以机智：

```
$ pip install dj-database-url 
```

然后在`settings.py`：

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

如果您不想在本地设置，您可以传递`config`一个参数。更多信息可[在此处](https://github.com/kennethreitz/dj-database-url)获得。`default``DATABASE_URL`

# ruby-on-rails - Ruby On Rails：form_for 上的 file_field 示例

> ID：13001034
> 
> 赞同：12
> 
> 时间：2012-10-21T18:53:43.140
> 
> 标签：ruby-on-rails, file-upload

我在 Rails 中遇到文件上传问题。我找到`file_field :file`了可以与`form_for(@some_model)`. 但是，我找不到这种情况的任何用途，因为这些标签用于通过批量分配创建/编辑某些模型。AFAIK 不可能将 fileupload 视为典型字段（请参阅[File upload won't work in Ruby on Rails 3 using Multipart Form](https://stackoverflow.com/questions/12678962/file-upload-wont-work-in-ruby-on-rails-3-using-multipart-form)）。在这种情况下，需要对上传的文件进行手动操作。那么，为什么有人甚至想将文件上传作为模型编辑的一部分呢？

照片.rb

```
 class Photo < ActiveRecord::Base
       attr_accessible :name, :filename,
   end 
```

photo_form.html.erb

```
<%= form_for(@photo, :multipart => true) do |f| %>

  <%= f.label :name %> 
  <%= f.text_field :name %>

  <%= f.file_field :file %>

  <%= f.submit %>

<% end %> 
```

照片控制器.rb

```
def create
    @photo = Photo.new(params[:photo]) 
```

上面的行失败，因为没有 :file 属性。它必须在之前处理并从`:params`. 再一次 - 这些标签有什么实际用途吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-10T20:02:51.070

我记得我用它在Rails中上传了一个xml文件

看法：

```
<%= form_tag({action: :upload}, multipart: true) do %>
   <%= file_field_tag 'xml_file' %>
   <%= submit_tag 'Submit' %>
<% end %> 
```

控制器：

```
def upload
    file_data = params[:xml_file]
end 
```

它正在使用 form_tag 但将其他信息添加到该表单中也不难。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-09T00:04:39.180

我会给你一个我如何使用它的例子我认为它解释得很好，我希望这会有所帮助

```
 <%= form_for @item do |f|%>
    <%= f.file_field :photo, accept: 'image/png,image/jpeg'%>
 <% end %> 
```

如果您有任何疑问，请告诉我

# html - 如何转储 DOCTYPE 元素？

> ID：13001036
> 
> 赞同：0
> 
> 时间：2012-10-21T18:54:06.157
> 
> 标签：html, doctype

我想知道是否有办法将 doctype 转储为字符串。

例如，我有一个严重依赖 BackboneJS 的 Web 应用程序。初始页面源代码很简单（只需要脚本），但在加载 Backbone 后会生成整个内容。我正在寻找一种方法来获取特定状态的 DOM 源，以便将其发送到 W3C 验证器。我不想只是从 Firebug 的检查器中复制粘贴内容，因为我想自动化流程。

我已经发现我可以用`document.getElementsByTagName('html')[0].outerHTML`. 这不是标准的，但适用于许多浏览器（Chrome、Opera，也许还有其他）。这没关系，因为我正在为开发人员创建一个工具，而不是为页面最终用户用户创建一个解决方案。

但是，这样的转储缺少有关 doctype 的信息。并且需要 doctype 来指示 HTML 验证器。请问你能帮帮我吗？在此先感谢您对此主题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:23:58.827

该对象具有公共标识符和系统标识符`document.doctype`的属性`name`（`html`用于 HTML 文档） 。因此，您可以这样构造文本文档类型声明：`publicId``systemId`

```
var doctype = '<' + '!DOCTYPE ' + document.doctype.name;
if(document.doctype.publicId) doctype += 
  ' PUBLIC "' + document.doctype.publicId + '"';
if(document.doctype.systemId) doctype += 
 ' "' + document.doctype.systemId + '"';
doctype += '>\n'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:59:08.610

```
document.doctype 
```

希望有帮助。

# c# - 如何在 C#/XNA 中修复这个磁贴引擎

> ID：13001040
> 
> 赞同：0
> 
> 时间：2012-10-21T18:54:16.563
> 
> 标签：c#, xna, tile, tile-engine

我一直在为我的一个项目开发一个基本的瓦片引擎，并设法使其达到相当实用的状态。然而，一个主要问题是，当我运行代码时，图块将始终在 (16, 0) 而不是 (0, 0) 处开始绘制：

```
 int row = 0, column = 0;
        for (int x = 1; x < array.Length; x++) {
            if (x % 32 == 0 && x != 0)
                row++;
            if (column >= 31)
                column = 0;
            else
                column++;

            Tile newTile = new Tile();
            newTile.tileSheet = tileSheet;
            newTile.tilePos = new Vector2(column * 16, row * 16);

            if (array[x] == Color.Black) {
                newTile.tileType = 0;
                newTile.tileSource = new Rectangle(0, 0, 16, 16);
            }
            else {
                newTile.tileType = 1;
                newTile.tileSource = new Rectangle(16, 0, 16, 16);
            }

            tileList.Add(newTile);
        } 
```

以及问题的图片：

![在此处输入图像描述](../Images/a3c8f2a1ae61b6bda7ec6aa6851dc99b.png)

我知道我的 for() 循环从 x = 1 开始，但即使用 if ((x - 1) ...) 来抵消它也不起作用。我真的很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:32:32.243

那是因为你说

```
if (column >= 31)
    column = 0;
else
    column++; 
```

因此，第一列是 1。

我想知道，为什么你这样做循环。正如你所学到的，它真的很难阅读，甚至更难调试。为什么不使用嵌套的 for 循环？

```
for(int row = 0; row < height; ++row)
    for(int column = 0; column < width; ++column)
    {
        //add the tiles
    } 
```

# c# - 如何使用 LINQ 在 XtraGrid 或 UltraWinGrid 上实现父子数据关系

> ID：13001041
> 
> 赞同：1
> 
> 时间：2012-10-21T18:54:25.550
> 
> 标签：c#, winforms, linq, xtragrid, ultrawingrid

我正在使用 LINQtoSQL 为*DevExpress XtraGrid*或*Infragistics UltraWinGrid*带来数据，并显示带有 [ **+** ] 符号的父行，以便我可以单击并查看详细信息（类似于 2 级树）。`DataRelation`在使用 a for my`DataSource`然后绑定它之前我已经成功了，它只是自动完成的。如何使用 LINQ 实现这一目标？

我在 VB.NET 中为 ADO.NET 数据源中的数据表使用的示例：

```
Dim rel As DataRelation = New DataRelation("Allocation",
        dsAllocation.Tables("tblParent").Columns("AllocKey"),
        dsAllocation.Tables("tblChild").Columns("AllocKey"), True) 
```

这个链接是我研究过的最好的信息，但正在寻找一种更动态的方式。 [http://documentation.devexpress.com/#WindowsForms/CustomDocument5495](http://documentation.devexpress.com/#WindowsForms/CustomDocument5495)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T00:03:19.743

通常，您可以使用实现`IList<X>`为`DataSource`. 如果里面`X`有`IList<Y>`，它将以您想要的方式显示。因此，只要您的 LINQ 查询返回`X`每个`X`包含 列表的列表`Y`，它就会起作用。

*注意：*由于`IList`不支持通知，因此如果您希望网格在添加/从`X`and列表中删除时自动更新`Y`，您将需要使用实现`IBindingList`.

# jquery - 我需要从 jQuery 的 .ajax 函数中的“成功”返回

> ID：13001043
> 
> 赞同：1
> 
> 时间：2012-10-21T18:54:32.657
> 
> 标签：jquery

我有一个基于从 AJAX 调用收到的 JSON 数据填充的 JsTree。这是 AJAX 调用。

```
function sendQuery(){
    $.ajax({
        context: this,
        url: 'http://localhost:8080/testMain',
        type: 'GET',
        dataType: 'text',
        success: function(data) {
                       // ^^^^ Need for sendQuery() to return DATA 
                },
        error:  function (xhr, ajaxOptions, thrownError){    
                    alert('Error xhr : ' + xhr.status);    
                    alert('Error thrown error: ' + thrownError);    
                }
    }); 
} 
```

我知道这里存在范围问题。在 JavaScript 中，变量是根据声明函数定义的。我只是不知道如何从 sendQuery() 返回，然后我将其用作另一个函数的参数，该函数将解析 JSON，这是另一个为树暂存的参数。有点沮丧，发条中的这篇文章不像我在 Java 中习惯的那样简单。非常感谢您的帮助，如果它有效，那么我肯定会接受。干杯

编辑#1：好的，根据答案，我相信如果我以这种方式更改我的代码，它将允许数据从 .ajax 函数中取出。仍然存在如何将其重新纳入程序流程的问题。

```
function sendQuery(){
    $.ajax({
        context: this,
        url: 'http://localhost:8080/testMain',
        type: 'GET',
        dataType: 'text',
        success: getJson,
        error:  function (xhr, ajaxOptions, thrownError){    
            alert('Error xhr : ' + xhr.status);    
            alert('Error thrown error: ' + thrownError);    
        }
    }); 
}

function getJson(data){
    alert("Transmission Success.");
    alert(data);
    var obj = $.parseJSON(data);
    alert("Parsing JSON Success.");
    var apples = obj.apples;
    alert(apples);
    return apples;
} 
```

好的，那么现在我如何将 APPLES 变量放入调用链中，该调用链将为树暂存数据？

我需要将 APPLES 变量提供给将处理数据的函数。

编辑#2 使用回调：

我花了一秒钟的时间来思考回调的想法。这是我能用它做的。

这是我的原始树代码，它调用一系列函数来做不同的事情，但最终以树接受的形式获取数据。

```
$(function () {     
    $("#client_tree").jstree({
        "json_data": {"data": attachTree(stageTreeData(getJson(sendQuery())))}, 
        "plugins" : [ "themes", "json_data", "ui" ]
    }).bind("select_node.jstree", function (e, data) { 
        var msg = data.rslt.obj.attr("id");
        alert(msg);
    });
}); 
```

我目前正在尝试通过 Ajax 在 sendQuery() 方法中获取数据，然后从它返回数据等...]

I changed it slightly, now I dont call sendQuery(), jQuery calls it.

```
$(function (){
    $.ajax({
        context: this,
        url: 'http://localhost:8080/testMain',
        type: 'GET',
        dataType: 'text',
        success: loadTree,
        error:  function (xhr, ajaxOptions, thrownError){    
            alert('Error xhr : ' + xhr.status);    
            alert('Error thrown error: ' + thrownError);    
        }
    });
}); 
```

Also changed my tree loading code a bit...

```
function loadTree(data){
    $("#client_tree").jstree({
        "json_data": {"data": attachTree(stageTreeData(getJson(data)))},    
        "plugins" : [ "themes", "json_data", "ui" ]
    }).bind("select_node.jstree", function (e, data) { 
        var msg = data.rslt.obj.attr("id");
        alert(msg);
    });

} 
```

I have no errors, no exceptions and the tree is populated.

Thank you all for helping!

EDIT#3 Fixing some minor stuff:

Moved to [Alert() call in jQuery not displaying, called from within a JsTree](https://stackoverflow.com/questions/13002930/alert-call-in-jquery-not-displaying-called-from-within-a-jstree#comment17642687_13002930)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:56:39.007

No, you don't need that.

What you need is to use the data.

But you can't return them from sendQuery, because the call is asynchronous, which means the data are available only after sendQuery has returned.

The solution is to provide your `sendQuery` function a callback that will do what you want to do with the data when they're available :

```
function sendQuery(callback){
   ...
   success: callback,
   ...
}

...
sendQuery(function(data){
    // do things with data
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:08:11.487

The problem with what you're trying to do is that the ajax call is asynchronous. The sendQuery function will return, and control flow will continue, before you've gotten a response from the server.

The way to use it is using callbacks. When you get a response back from the server, the function that you've passed to `success()` will get called. Basically, you need that function to pick up your processing pipeline where you left off. You want that function to parse the response into json, "stage for the tree", etc.

You'll need to separate the function that calls this into what happens before the call, and then "everything else" that happens after the call comes back. That "everything else" is what you want in the success callback.

Example (making some assumptions about who is calling this function)

```
function doQueryAndParseData(){  //This is the function that calls doQuery
   prepare_something();
   //You pass this in as a callback, since it can only happen once you have data
   sendQuery(function(data){     
       parsed_data = JSON.parse(data);  //This is where you do your work
       //Put parsed data into dom somehow
   }
   return; //This function will return before the data gets back, but when the server responds the data will get parsed and put into the tree
}

function sendQuery(callback){
    $.ajax({
        context: this,
        url: 'http://localhost:8080/testMain',
        type: 'GET',
        dataType: 'text',
        success: callback,
        error:  function (xhr, ajaxOptions, thrownError){    
                    alert('Error xhr : ' + xhr.status);    
                    alert('Error thrown error: ' + thrownError);    
                }
    }); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:09:20.987

You need to consume the data within the AJAX success. Can use another function as this code shows

```
 function sendQuery(){
        $.ajax({
            context: this,
            url: 'http://localhost:8080/testMain',
            type: 'GET',
            dataType: 'text',
            success: loadTree,

            error:  function (xhr, ajaxOptions, thrownError){    
                        alert('Error xhr : ' + xhr.status);    
                        alert('Error thrown error: ' + thrownError);    
                    }
        }); 
    }

function loadTree( data){
   /* do something with data returned from ajax*/

} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-21T18:59:09.890

```
function sendQuery(){
    var val;
    $.ajax({
        context: this,
        url: 'http://localhost:8080/testMain',
        type: 'GET',
        async: false,
        dataType: 'text',
        success: function(data) {
                       val = data;
                },
        error:  function (xhr, ajaxOptions, thrownError){    
                    alert('Error xhr : ' + xhr.status);    
                    alert('Error thrown error: ' + thrownError);    
                }
    }); 
    return val;
} 
```

# maven - Eclipselink 元模型生成在 Maven 多模块项目中失败

> ID：13001045
> 
> 赞同：5
> 
> 时间：2012-10-21T18:54:35.830
> 
> 标签：maven, jpa, jpa-2.0, eclipselink

我的 Maven 项目已经成长，所以我决定尝试制作一个 Maven 多模块项目。

我认为它似乎工作正常，除了 Eclipselink 元模型类生成。

这是运行时`mvn clean generate-sources`不期望的输出：

```
[INFO] javac option: -proc:only
[INFO] javac option: -Aeclipselink.persistencexml=/home/glassfish/git/vehiclecms/vehiclecms-parent/vehiclecms-backend/src/main/resources/META-INF/persistence.xml
                                                                -Aeclipselink.persistenceunits=carcmsPU
                                                                -Aeclipselink.canonicalmodel.subpackage=metamodel
[INFO] javac option: -processor
[INFO] javac option: org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor
[INFO] javac option: -d
[INFO] javac option: /home/glassfish/git/vehiclecms/vehiclecms-parent/vehiclecms-backend/target/classes
[INFO] javac option: -s
[INFO] javac option: /home/glassfish/git/vehiclecms/vehiclecms-parent/vehiclecms-backend/target/generated-sources
[INFO] diagnostic warning: Supported source version 'RELEASE_6' from annotation processor 'org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor' less than -source '1.7'
[INFO] diagnostic Note: Creating static metadata factory ...
[INFO] diagnostic Note: Found Option : eclipselink.persistencexml, with value: /home/glassfish/git/vehiclecms/vehiclecms-parent/vehiclecms-backend/src/main/resources/META-INF/persistence.xml
                                                                -Aeclipselink.persistenceunits=carcmsPU
                                                                -Aeclipselink.canonicalmodel.subpackage=metamodel
[INFO] diagnostic Note: The persistence xml file [/home/glassfish/git/vehiclecms/vehiclecms-parent/vehiclecms-backend/src/main/resources/META-INF/persistence.xml
                                                                -Aeclipselink.persistenceunits=carcmsPU
                                                                -Aeclipselink.canonicalmodel.subpackage=metamodel] was not found. NO GENERATION will occur!! Please ensure a persistence xml file is available either from the CLASS_OUTPUT directory [META-INF/persistence.xml] or using the eclipselink.persistencexml property to specify its location. 
```

这部分的 pom.xml 是：

```
<!-- Generate JPA Criteria Meta Model classes -->
<plugin>
    <groupId>org.bsc.maven</groupId>
    <artifactId>maven-processor-plugin</artifactId>
    <version>2.0.6</version>
    <executions>
        <execution>
            <id>process</id>
            <goals>
                <goal>process</goal>
            </goals>
            <phase>generate-sources</phase>
            <configuration>
                <outputDirectory>${basedir}/target/generated-sources</outputDirectory>
                <compilerArguments>-Aeclipselink.persistencexml=${basedir}/src/main/resources/META-INF/persistence.xml
                    -Aeclipselink.persistenceunits=carcmsPU
                    -Aeclipselink.canonicalmodel.subpackage=metamodel</compilerArguments>
                <processors>
                    <processor>org.eclipse.persistence.internal.jpa.modelgen.CanonicalModelProcessor</processor>
                </processors>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我不明白为什么这不起作用，这与我在单模块项目中的情况相同。Maven 或 Eclipselink 似乎在多模块项目中不起作用，或者我在这里遗漏了一些东西？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T19:02:55.663

找到了！参数之间没有空格 =(

# java - 无法在我的 JComponent 的 paintComponent 方法中使 for each 循环正常工作

> ID：13001048
> 
> 赞同：0
> 
> 时间：2012-10-21T18:55:26.417
> 
> 标签：java, swing, graphics, for-loop, paintcomponent

我正在构建一个模拟器，它试图显示 Node 对象的 ArrayList，并且我在负责绘制到屏幕中心的 JComponent 的重写paintComponent 中使用了增强的 for 循环。

```
package networkSimulation;

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JComponent;

public class mainComponent extends JComponent{

    public void paintComponent(Graphics g){
        NetworkGUI.updateForWindowSize();
        g.drawLine(-50, (int)NetworkGUI.windowHeight - 130, (int)NetworkGUI.windowWidth + 50, (int)NetworkGUI.windowHeight - 130);
        g.fillOval(100, 100, 100, 100);

        //Draw the contents of the graph
        for(Node node: NetworkGUI.graph.getNodes()){
            System.out.println("Drawing a Node at " + node.getX() + ',' + node.getY());
            g.fillOval((int)node.getX(), (int)node.getY(), 100, 100);
        }

    }

} 
```

目前我的循环中的打印打印正确，但椭圆形没有出现。但是，设置为在循环之外绘制的椭圆工作正常。任何关于我可能做错了什么的见解将不胜感激。先感谢您。

# sql - 同一列的多个值 - SQL INNER JOIN

> ID：13001050
> 
> 赞同：0
> 
> 时间：2012-10-21T18:56:00.787
> 
> 标签：sql, inner-join

我想在表 2 上为表 1 上的“键”获取值。为了不混淆具有相同名称的输出，我使用“AS”。接下来是我正在做的事情，但它不起作用（当它应该时）：

```
SELECT pg_show.php,pg_show.tab,pg_text.text as title,pg_text.text as description
FROM pg_show
INNER JOIN pg_text ON pg_show.tit=title
INNER JOIN pg_text ON pg_show.desc=description
WHERE pg_show.url='value'
LIMIT 0,1 
```

我该如何解决？

**编辑：**

* * *

如所见，我没有以正确的方式解释我的问题。应用给定的解决方案后，我收到一个错误：“ *#1054 - Unknown column 'pt1.tit' in 'on Clause'* ”。也许我的表格结构会有所帮助。

**pg_show**

*url*
*php*
*山雀*
*desc*

**pg_text**

*关键*
*语言*
*文本*

***理念：***

我想根据调用的页面名称执行一个 php 文件。由于页面名称*（url 字段）*可能因用户语言*而异（我不想使用 httpdaccess url 重写，因为整个想法更复杂）*我必须存储所有可能的值，这些值调用这个确切的 php 文件*（所有可能的 url 值）*。

另一方面，我需要显示页面标题和描述。为此，我创建了一个带有“CONSTANTS”的表 *(pg_text)* ，该表将为每种语言*(lang field)提供一个值**(text field* ) 。

 ***关于查询：**

我正在尝试构建的查询应该获取*（知道 URL 值）* php 文件名和 tit 和 desc 字段的值*（表 2 上*的 tex 字段），它们在第一个表上具有需要获取的“CONSTANT”名称表 2 中的各自值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:12:43.377

希望我能正确理解你的问题！基本上，您必须为连接的表提供不同的别名。如：

```
SELECT pg_show.php, pg_show.tab, pt1.text as title, pt2.text as description
FROM pg_show
INNER JOIN pg_text pt1 ON pg1.key = pg_show.tit
INNER JOIN pg_text pt2 ON pg2.key = pg_show.desc
WHERE pg_show.url='value'
LIMIT 0,1 
```

之后的名称`pg_text`将消除您在`select`子句中谈论的连接的歧义。*

# java - 同步多线程服务器

> ID：13001052
> 
> 赞同：0
> 
> 时间：2012-10-21T18:56:19.270
> 
> 标签：java, multithreading

大家好，我创建了一个多线程聊天服务器，如下所示：

```
 public class Main {

    public static ServerSocket server;
    public static Socket connection;
    public static int backLog = 100;
    public static int numberOfConnected;
    public static boolean connected = false;
    public final static int potNumber = 6080;
    public static PrintWriter pw;
    public static Scanner input;
    public static int i = 0;

    public static void main(String[] args) {
        startServer();

    }
    public static void startServer(){
        try {
            server = new ServerSocket(potNumber, backLog);
            waitingForConnection();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    private static void waitingForConnection() {
        connected = false;
        i++;
        while (!connected) {
            try {
                if (connected) {

                }
                connection = server.accept();
                Server s = new Server(connection, pw = new PrintWriter(connection.getOutputStream()), input = new Scanner(connection.getInputStream()));
                s.start();
                numberOfConnected++;
                waitingForConnection();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

} 
```

这个想法是假设这是一个聊天服务器，所以当一个人连接到服务器时，它会启动以下线程：

**线程**

```
 public void run(){
    while (connection.isConnected()) {
        if (input.hasNext()) {
            String fullMessage = input.nextLine();
            if (fullMessage.equalsIgnoreCase("Connect")) {
                connectHim();
            }else {
                chatMessage(fullMessage);
            }
        }

        }
    }

private void chatMessage(String fullMessage) {
    String name = fullMessage.substring(0, fullMessage.indexOf(" "));
    String message = fullMessage.substring(fullMessage.indexOf(" "), fullMessage.length());
    pw.println(name+": "+message);
    pw.flush();

}
private void connectHim() {
    String name = input.nextLine();
    pw.println(0);
    pw.flush();
    pw.println(1);
    pw.flush();
    pw.println();
    pw.flush();
    pw.println(name);
    pw.flush();

} 
```

所以我的问题如下：

如果绑定到线程 1 的用户（这是一个示例）和绑定到线程 2 的用户向服务器发送消息，我将如何将该消息发送给绑定在线程 1 上的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:22:42.737

选项之一是使用`Hashtable`或`HashMap`（仅`Collections.synchronizedMap(myMap)`在`Map`使用时调用）。当您启动新线程时，给他唯一的名称（例如用户昵称）并将其放入您的集合中`key`- 线程名称和`value`- 线程作为对象。

`if the user that is bound to thread 1 (this is an example) and the user bound to thread 2 sends a message to the server how will i send that message to the user bound on thread 1?`

例如，您有`user1`, `user2`, `user3`。现在您构建 3 个线程并将它们放入`HashMap`，例如：

```
Map<String, Thread> threadMap = new HashMap<String,Thread>();
    threadMap = Collections.synchronizedMap(threadMap);

    YourThread th1 = new YourThread();
            threadMap.put("user1", th);

    YourThread th2 = new YourThread();
            threadMap.put("user2", th);

    YourThread th3 = new YourThread();
            threadMap.put("user3", th);

             ....

    Set<String> userSet = threadMap.keySet();

    Iterator<String> it = userSet.iterator();

    Thread currThread = null;

    while(it.hasNext()){
        String key = it.next();

        currThread = threadMap.get(key);

        // do something with currThread         
    } 
```

# actionscript-3 - Adobe Flex datagrid 的渲染器验证

> ID：13001055
> 
> 赞同：1
> 
> 时间：2012-10-21T18:56:37.103
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个高级数据网格，大约有 20 行，其中只有 7 行可见（垂直滚动打开）。我在 rendererAsEditor=true 的一列上使用项目渲染器。

我正在为所有这些渲染器进行用户端验证。现在，如果我不向下滚动一次，就不会创建隐藏行的渲染器。因此，当我单击提交时，不会对未创建的行进行验证。

有没有一种方法可以验证隐藏的行？

# css - 在固定标题上滚动主要内容

> ID：13001057
> 
> 赞同：3
> 
> 时间：2012-10-21T18:56:44.700
> 
> 标签：css, header, scroll, positioning, html

我被我希望是一个非常简单的问题难住了。我有一个包含两个 div 的页面：

```
<div id="header">...</div>
<div id="content">...<div> 
```

标题将固定在页面顶部，主要内容部分将正常滚动。我需要我的主要内容 div 滚动到标题上，同时覆盖它。

我可以通过将标题固定到顶部来完成我想要的外观，给主要内容一个足够大的边缘顶部以放置在正确的位置，并调整 z-index 以便主要内容在标题上滚动。问题是当我这样做时，主要内容部门的页边距覆盖了标题的所有链接和悬停元素，使它们可见，但不活动。

我真的希望这是一个简单的解决方法。有人可以提出一些建议吗？我正在尝试在不使用 javascript 的情况下做到这一点。提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T11:44:13.947

我实际上遇到了同样的问题并想出了这个[http://jsfiddle.net/EWefL/](http://jsfiddle.net/EWefL/)

```
<header><a href="/">Working header link</a></header>
<section>Section</section>

header {
    background:#cff;
    height:100px;
    position:fixed;
    right:0;
    left:0;
    z-index:100;
}

section {
    background: #579;
    height:600px;
    top:100px;
    position:relative;
    z-index:200;
} 
```

基本上使用 position relative 和 top 属性而不是 margin-top。需要注意的一件重要事情是 z-index 始终需要设置为高于零。

# css - 如何在 Zurb Foundation 中垂直居中元素？

> ID：13001059
> 
> 赞同：23
> 
> 时间：2012-10-21T18:56:58.573
> 
> 标签：css, formatting, centering, zurb-foundation

我正在构建一个登录表单，我希望用户名和密码字段位于屏幕中间。我也在使用 Zurb Foundation 包来构建这个表单。我在垂直居中时遇到了很多麻烦。

这是我的代码：

```
<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

    <head>
      <meta charset="utf-8" />

      <!-- Set the viewport width to device width for mobile -->
      <meta name="viewport" content="width=device-width" />
      <title>
            Registration
        </title>

         <!-- Included CSS Files (Compressed) -->
          <link rel="stylesheet" href="stylesheets/foundation.min.css">
          <link rel="stylesheet" href="stylesheets/app.css">
          <link rel="stylesheet" href="stylesheets/main.css">

          <script src="javascripts/modernizr.foundation.js"></script>

          <!-- IE Fix for HTML5 Tags -->
          <!--[if lt IE 9]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
          <![endif]-->
    </head>
        <nav class="top-bar">
         <ul>
            <li class="name"><h1><a href="#">Title</a></h1></li>
            <li class="toggle-topbar"><a href="#"></a></li>
        </ul>
        <section>
            <ul class="left">
                <li><a href="#">Link</a></li>
            </ul>
            <ul class="right">
                <li><a href="#">Link</a></li>
            </ul>
        </section>
        </nav>
    <body>
        <div class="row" id="parent">
            <div class="six columns" id="child">
                <form id = "register">
                    <input type="text">

                </form>
            </div>
        </div>

        <script src="javascripts/jquery.foundation.topbar.js"></script>
        <!-- Included JS Files (Compressed) -->
        <script src="javascripts/jquery.js"></script>
        <script src="javascripts/foundation.min.js"></script>
        <!-- Initialize JS Plugins -->
        <script src="javascripts/app.js"></script>
    </body>
</html> 
```

还有一些我玩过但还没有开始工作的 CSS：

```
body {
    /*background-image: url('../images/gplaypattern.png');*/
    background: red;
}

#register {
    background-color:  black;
    width:80%;
}

#parent {
    position: absolute; 
    left: 50%; 
    top: 50%; 
    height: 80px;
}

#child {
    height: 75px;
    position:absolute;
    top: 50%;
    background: green;
} 
```

奇怪的是，如果我将某物的高度更改为动态（即`height: 30%;`）它不起作用，为什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-23T17:30:11.653

**更新**

此功能将作为组件（xy-center）包含在即将发布的 Foundation 版本中。[有关Github](https://github.com/zurb/foundation/blob/f185aeb1419f4fce4aad0c341b6de4f44f382ac9/scss/foundation/components/_xy-center.scss)的更多详细信息。

如果您使用的是旧版本的 Foundation，则使用[CSS Tricks 居中方法](http://css-tricks.com/centering-percentage-widthheight-elements/)将使用最少的 CSS/HTML 标记将登录表单垂直和水平居中。

**HTML**

```
<div class="row" >
    <div class="small-12 medium-6 columns" id="login">
        <form >
            <div class="row collapse">
                <div class="small-12 medium-5 columns">
                    <input type="text" name="username" placeholder="Username" />
                </div>
                <div class="small-12 medium-5 columns">
                    <input type="password" name="password" placeholder="Password" />
                </div>
                <div class="small-12 medium-2 small-centered medium-uncentered columns">
                  <a href="#" class="button postfix">Go</a>
                </div>
            </div>
        </form>
    </div>
</div> 
```

**CSS**

```
#login {
    position: absolute;
    left: 50%;
    top: 50%;

    /*
    *  Where the magic happens
    *  Centering method from CSS Tricks
    *  http://css-tricks.com/centering-percentage-widthheight-elements/
    */
    transform: translate(-50%, -50%);
    -webkit-transform: translate(-50%, -50%);
    -o-transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
} 
```

**结果**

无论屏幕大小如何，登录表单都将保持垂直和水平居中。这是结果的屏幕截图。

![在此处输入图像描述](../Images/079e5bec4c5c2480aebbd775aeef179b.png)

和工作的[jsFiddle](http://jsfiddle.net/brettdewoody/97L8E/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-24T14:23:25.540

Foundation 不能很好地处理垂直对齐：[https](https://github.com/zurb/foundation/issues/411) ://github.com/zurb/foundation/issues/411 。

您可以使用垂直填充来近似它，但对于动态内容没有巧妙的方法。

以下 jsFiddle（不是我创建的）显示了它应该如何使用

```
div {
display: table-cell;
vertical-align: middle;
height: 50px;
border: 1px solid red;
} 
```

[http://jsfiddle.net/53ALd/6/](http://jsfiddle.net/53ALd/6/) - 但它不会与 Foundation CSS 的其余部分结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:25:34.590

问题是 HTML/CSS 并不能很好地处理垂直居中。在这方面，Zurb 基金会不会帮助或伤害您。

看到这个非常相似的问题[创建一个垂直和水平居中的html div](https://stackoverflow.com/questions/3703178/creating-a-vertically-and-horizontally-centered-html-div)

# jquery - 如何在 jQuery Tablesorter 中为每一列设置默认排序顺序？

> ID：13001060
> 
> 赞同：1
> 
> 时间：2012-10-21T18:56:58.700
> 
> 标签：jquery, sorting, tablesorter

我有一个 HTML 表格，tablesorter 可以正常工作，我可以设置默认排序和其他所有内容（甚至是我自己的解析器）...但是：我需要在用户第一次之后按降序对某些列进行排序点击各自的标题。

默认情况下，所有列在第一次单击后按升序排序。我找到了一种方法将其更改为所有列的降序。但我需要的是在用户第一次单击它们后按升序对某些列进行排序，并按降序对其他一些列进行排序。

示例：某些列包含字符串，所以我想按升序对它们进行排序。某些列包含的值越大越好 - 在用户第一次单击其标题后按降序对它们进行排序会很好。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T19:19:07.840

原始的 tablesorter（2.0.5 版）似乎不适用于此代码：

```
$('table').tablesorter({

    // default sortInitialOrder setting 
    sortInitialOrder: "asc", 

    // pass the headers argument and passing a object 
    headers: {
        2: { sortInitialOrder: 'desc' },
        3: { sortInitialOrder: 'desc' },
        4: { sortInitialOrder: 'desc' }
    }

}); 
```

但在我[的 tablesorter 分支中](http://mottie.github.com/tablesorter/docs/)，您可以使用上面的代码为每列设置初始排序顺序 - 请参阅[此演示](http://jsfiddle.net/abkNM/35/)。

还有一个名为的选项`sortRestart`，当列之前未排序时，它会重置排序顺序 - 请参阅[此演示](http://mottie.github.com/tablesorter/docs/example-option-sortreset-sortrestart.html)。

# java - 在android中下载图像

> ID：13001063
> 
> 赞同：0
> 
> 时间：2012-10-21T18:57:29.717
> 
> 标签：java, android

我做了一个应用程序，我需要从给定的链接下载图像。它在 logcat 中没有显示错误和没有错误消息。以下是我的代码

```
 public Drawable getImage(String ImagePath,String fileName) {

    Log.v("download", "image downloading from net");

    boolean bin = getBinaryWebFile(ImagePath,fileName);
    Drawable draw = Drawable.createFromPath(SavePath+fileName); //..........(1)
    return draw;

}//getImage ends here*/

private boolean getBinaryWebFile(String inURL, String filename) {

    File file = new File(SavePath,filename);

    try {

        URL url = new URL(inURL); 
        HttpURLConnection con = (HttpURLConnection)url.openConnection();

        con.setRequestMethod("GET");
        con.setDoOutput(true);
        con.connect();

        InputStream is = con.getInputStream();
        FileOutputStream fos = new FileOutputStream(file);
        BufferedOutputStream bout = new BufferedOutputStream(fos,1024);
        byte[] data =new byte[1024];
        int x = 0;

        while((x=is.read(data,0,1024))>=0){
            bout.write(data,0,x);
        }
        fos.flush();
        bout.flush();
        fos.close();
        bout.close();
        is.close();

        return true;

    } catch (MalformedURLException e) {
         Log.d("PowerSaver","getBinaryWebFile->MalformedURLException: "+e.getMessage());
        //e.printStackTrace();
    } catch (IOException e) {
         Log.d("PowerSaver","getBinaryWebFile->I/O exception: "+e.getMessage());
    }
    return false;

}//getbinarywebfile ends here 
```

在调试一切都运行良好，最后我得到 draw as null (commented as 1) 。我什至在 manifest 中写了以下权限。

```
 <uses-permission 
    android:name = "android.permission.INTERNET"/>
<uses-permission 
    android:name = "android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission 
    android:name = "android.permission.ACCESS_WIFI_STATE" />
<uses-permission
    android:name = "android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission
    android:name = "android.permission.READ_PHONE_STATE"/> 
```

仍然在 draw 中获得 null ，这被引用为评论 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:17:05.333

这段代码对我有用：

```
private static long DownloadFromUrl(Context context, URL fileUrl,
        String fileName) throws Exception { // this is the downloader method

    try {

        URL myFileUrl = null;
        myFileUrl = fileUrl;

        // *** Internet connection
        HttpURLConnection conn = (HttpURLConnection) myFileUrl
                .openConnection();
        conn.setDoInput(true);
        conn.connect();
        // int length = conn.getContentLength();
        // int[] bitmapData =new int[length];
        // byte[] bitmapData2 =new byte[length];

        InputStream is = conn.getInputStream();

        // decodificar la imagen de internet en bmImg
        Bitmap bmImg = BitmapFactory.decodeStream(is);

        // ***Save in the the SD

        FileOutputStream out = new FileOutputStream(
                <path + filename>);

        byte[] buffer = new byte[1024];
        int len;
        while ((len = is.read(buffer)) > 0) {
            out.write(buffer, 0, len);
            tam += len;
        }
        is.close();

        // Save using the selected format and quality
        bmImg.compress(Bitmap.CompressFormat.PNG,
                <quality>, out);
        out.flush();
        out.close();

        // tam=bmImg.getByteCount();
        bmImg.recycle();

        return tam;

    } catch (IOException e) {
        // showErrorMessage(context, "Error downloading");
        e.printStackTrace();
        return 0;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:34:57.247

您是否在模拟器中运行您的应用程序？确保它具有正确的互联网连接。有时模拟器可能会失去互联网连接，尤其是当您更改网络而不重新启动模拟器时。

# java - 从 string.split() java 获取数组

> ID：13001065
> 
> 赞同：0
> 
> 时间：2012-10-21T18:57:43.540
> 
> 标签：java, arrays

所以我有以下代码：

```
while((line = reader.readLine()) != null) {
    String[] row = line.split(",");
    this.table.add(row); 
```

this.table 是使用以下方式启动的：

```
ArrayList table = new ArrayList(); 
```

然后，当我尝试在表格中获取长度时，如下所示：

```
for(int i=0; i<table.size(); ++i){
    for(int j=0; j<table.get(i).length; ++j) {
        //some code    
        } 
```

它（下划线 get(i).length; 并给我一个错误，说它找不到符号。符号：长度位置：类对象。

怎么了？string.split() 不返回数组吗？如果是这样，为什么我不能使用任何数组类方法/变量？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:59:55.737

ArrayList 不是数组列表，它是由数组*支持的列表。*

但是您可以使用泛型将其设为数组列表。

```
List<String[]> table = new ArrayList<String[]>(); 
```

然后你的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:00:18.410

你应该使用[java泛型](http://docs.oracle.com/javase/tutorial/java/generics/)

```
List<String[]> table = new ArrayList<String[]>(); 
```

然后你会得到调用`String[]`的实例。`get(i)`还要注意使用`List`接口来声明表变量。尽可能使用适合您需要的超级接口，而不是实现类。

此外，从 Java 1.5 开始，您可以使用更直观的语法（当然，这假设您使用之前推荐的泛型）：

```
for(String[] processedRow : table){
    for(String processedField : processedRow) {
        //some code    
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:00:27.743

您需要输入您的列表：

```
List<String[]> table = new ArrayList<String[]>(); 
```

那么java编译器会知道这些`String[]`都存储在你的列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T19:01:00.753

```
ArrayList table = new ArrayList();
//  change with:
ArrayList<String[]> table = new ArrayList(); 
```

# 3d - 从颜色实时生成天空盒

> ID：13001066
> 
> 赞同：1
> 
> 时间：2012-10-21T18:57:44.163
> 
> 标签：3d, textures

我现在正在编写一个程序，它为用户创建一个 3D 环境来导航。它的特点之一是有一个根据当前时间和日期变化的天空盒。我编写了第二个程序，可以确定（针对当前时间和日期）给出 6 种颜色，每个方向一个颜色，北、东、南、西、顶部和底部。

我的问题是，如何将这 6 种颜色转换为具有平滑渐变的 6 种纹理（放置在天空盒上），这样当它们全部在一起时，就看不到接缝了？

# c - 为什么有些内核程序员使用 goto 而不是简单的 while 循环？

> ID：13001067
> 
> 赞同：55
> 
> 时间：2012-10-21T18:58:01.647
> 
> 标签：c, linux, loops, linux-kernel, goto

学C的时候，老师整天跟我说：“不要用goto，那是坏习惯，丑陋，危险！” 等等。

那么，为什么一些内核程序员会使用`goto`，例如[在这个函数](https://github.com/torvalds/linux/blob/391e43da797a96aeb65410281891f6d0b0e9611c/kernel/sched/clock.c#L141)中，它可以用一个简单的替换

```
while(condition) {} 
```

或者

```
do {} while(condition); 
```

我无法理解。`while`在某些情况下使用 goto 而不是/ `do`-会更好`while`吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-21T19:26:47.383

**历史背景：**我们应该记住，Dijkstra 在 1968 年写了*[Goto 被认为是有害](http://www.u.arizona.edu/~rubinson/copyright_violations/Go_To_Considered_Harmful.html)*的，当时许多程序员将其用作[结构化编程](http://en.wikipedia.org/wiki/Structured_programming)（、、等） `goto`的替代品。`if``while``for`

`goto`这是 44 年后的事了，在野外很难找到这种用法。很久以前，结构化编程就已经赢了。

**案例分析：**

示例代码如下所示：

```
 SETUP...
again:
    COMPUTE SOME VALUES...
    if (cmpxchg64(ptr, old_val, val) != old_val)
        goto again; 
```

结构化版本如下所示：

```
SETUP...
do {
    COMPUTE SOME VALUES...
} while (cmpxchg64(ptr, old_val, val) != old_val); 
```

当我看到结构化版本时，我立即想到，“这是一个循环”。当我查看`goto`版本时，我认为它是一条直线，最后有一个“再试一次”的情况。

该`goto`版本在同一列上同时具有两者`SETUP`，`COMPUTE SOME VALUES`这强调了大多数情况下，控制流都通过两者。结构化版本将`SETUP`和`COMPUTE SOME VALUES`放在不同的列上，强调控制可能以不同的方式通过它们。

这里的问题是你想在代码中强调什么样的重点？您可以将其与`goto`错误处理进行比较：

结构化版本：

```
if (do_something() != ERR) {
    if (do_something2() != ERR) {
        if (do_something3() != ERR) {
            if (do_something4() != ERR) {
                ... 
```

转到版本：

```
if (do_something() == ERR)  // Straight line
    goto error;             // |
if (do_something2() == ERR) // |
    goto error;             // |
if (do_something3() == ERR) // |
    goto error;             // V
if (do_something4() == ERR) // emphasizes normal control flow
    goto error; 
```

生成的代码基本相同，因此我们可以将其视为排版问题，例如缩进。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-21T19:02:50.773

在这个例子中，我怀疑它是关于将 SMP 支持改进到最初以非 SMP 安全方式编写的代码中。与重构函数相比，添加`goto again;`路径要简单得多，侵入性也更小。

我不能说我很喜欢这种风格，但我也认为`goto`出于意识形态原因避免这种风格是被误导的。一种特殊的`goto`使用情况（与此示例不同）是 where`goto`仅用于在函数中向前移动，从不向后移动。这类用法永远不会导致由`goto`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-26T11:05:54.837

非常好的问题，我认为只有作者才能提供明确的答案。正如@Izkata 所解释的那样，我将通过说它可以开始使用它进行错误处理来添加我的一点猜测，然后大门也可以将其用于基本循环。

在我看来，错误处理用法在系统编程中是合法的。一个函数在执行过程中会逐渐分配内存，如果遇到错误，它将`goto`使用适当的标签从该点以相反的顺序释放资源。

因此，如果在第一次分配之后发生错误，它将跳转到最后一个错误标签，仅释放一个资源。同样，如果错误发生在最后一次分配之后，它将跳转到第一个错误标签并从那里运行，释放所有资源直到函数结束。这种错误处理模式仍然需要谨慎使用，特别是在修改代码时，强烈建议使用 valgrind 和单元测试。但可以说它比其他方法更具可读性和可维护性。

使用的一个黄金法则`goto`是避免所谓的意大利面条代码。尝试在每个`goto`语句及其各自的标签之间画线。如果你有交叉线，那么你已经越过了一条线:)。这种用法`goto`非常难以阅读，并且是难以跟踪的错误的常见来源，因为它们会在依赖它进行流控制的 BASIC 等语言中找到。

如果你只做一个简单的循环，你就不会越线，所以它仍然是可读和可维护的，主要是风格问题。也就是说，因为它们可以很容易地使用语言提供的循环关键字来完成，正如您在问题中所指出的那样，我的建议仍然是避免使用`goto`for 循环，仅仅是因为`for`, `do/while`or`while`构造在设计上更加优雅。

# wordpress - wordpress - swf 和 flash 中的全屏 =>11

> ID：13001070
> 
> 赞同：0
> 
> 时间：2012-10-21T18:58:23.887
> 
> 标签：wordpress, flash

昨天，一个朋友打电话给我，告诉我他的网站运行不正常——问题是“全屏”模式在任何一台 Flash 播放器更新到 11.0 及更高版本的计算机上都无法运行。

它在我的电脑上运行良好（因为我总是拒绝更新并使用 10.4）但是当我查看他的代码时，似乎一切都很好。但是 - 确实，当安装了 flash player => 11.0 - 全屏模式不起作用.. 可能是什么问题？

如何解决？（他正在使用一个名为[swf 对象](http://wordpress.org/extend/plugins/swfobj/download/)的简单插件来生成必要的 javascript - 当我查看代码时，它看起来很好......）

```
<object width="760" height="300" name="flv-1" allowfullscreen="true" data="http://www.began-haem.com/ganhaem/wp-content/uploads/2012/08/began-haem-1-1.swf" type="application/x-shockwave-flash"> 
```

和

```
<param value="true" name="allowfullscreen">
<param value="flv-1" name="name"> 
```

通常这两件事应该可以解决问题......

我在这里迷路了-有人知道吗？Flash 播放器 10.x 和 11.x 之间是否发生了重大变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:53:37.593

好的，看来这不是脚本错误-

经过几个小时的战斗和搜索和修改，我发现这是最新版本的Flash Player中的一个**BUG**。（11.3.300.271 和 11.4.402.265 取决于您的浏览器..）

[https://bugbase.adobe.com/index.cfm?event=bug&id=3310959](https://bugbase.adobe.com/index.cfm?event=bug&id=3310959)

# objective-c - 使用 Jastor 创建对象和托管对象存储在 iOS 中的最有效方法是什么？

> ID：13001073
> 
> 赞同：0
> 
> 时间：2012-10-21T18:58:54.943
> 
> 标签：objective-c, ios5, nsmanagedobject

鉴于目标 c 不进行多重继承，使用 Jastor 将 json 数据源转换为对象并使用托管对象（核心数据）作为存储来实现类的最佳方法是什么？选择 Jastor 的全部原因是我想避免费力地对每个属性/字段进行编码，然后不得不将整个属性逐个属性复制到托管对象中，这似乎很可怕。但是实现这一目标的最优雅的方式是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T16:39:00.493

任何子`NSObject`类，包括`NSManagedObject`通过协议做你想要的开箱即用`NSKeyValueCoding`。[请参见此处的示例。](https://stackoverflow.com/a/18814764/93540)

# objective-c - iOS 6 应用程序在加载时挂起

> ID：13001074
> 
> 赞同：0
> 
> 时间：2012-10-21T18:59:01.930
> 
> 标签：objective-c, ios, xcode

星期五晚上，我的应用程序运行良好。所以星期六，我决定开始调整 UI。我添加了一个带有背景图像的图像视图，将其推到后面。然后移动一些控件以更好地排列。

现在，我的应用程序挂在模拟器的加载屏幕上，然后在我的 iPad 上进入黑屏。它根本没有错误。

我确实尝试删除背景图像，但没有效果。

我在 SPRAppDelegate.m 上的 didFinishLaunchingWithOptions 中设置了断点，它毫无问题地通过该函数。与 SPRViewController.m 上的 ViewDidLoad 相同

我有一些子类文本字段，所以我在子类文件的 awakeFromNib 函数之一中设置了一个断点。那不会被执行。

我不确定哪些源代码会有所帮助，但这是我的 info.plist

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>CFBundleDevelopmentRegion</key>
<string>en</string>
<key>CFBundleDisplayName</key>
<string>${PRODUCT_NAME}</string>
<key>CFBundleExecutable</key>
<string>${EXECUTABLE_NAME}</string>
<key>CFBundleIcons</key>
<dict>
    <key>CFBundlePrimaryIcon</key>
    <dict>
        <key>CFBundleIconFiles</key>
        <array>
            <string>ring-it-up-sm-reversed.png</string>
            <string>ring-it-up-72-reversed.png</string>
        </array>
    </dict>
</dict>
<key>CFBundleIdentifier</key>
<string>com.steveradabaugh.${PRODUCT_NAME:rfc1034identifier}</string>
<key>CFBundleInfoDictionaryVersion</key>
<string>6.0</string>
<key>CFBundleName</key>
<string>${PRODUCT_NAME}</string>
<key>CFBundlePackageType</key>
<string>APPL</string>
<key>CFBundleShortVersionString</key>
<string>1.0</string>
<key>CFBundleSignature</key>
<string>????</string>
<key>CFBundleVersion</key>
<string>1.0</string>
<key>LSRequiresIPhoneOS</key>
<true/>
<key>UIRequiredDeviceCapabilities</key>
<array>
    <string>armv7</string>
</array>
<key>UIStatusBarHidden~ipad</key>
<false/>
<key>UISupportedInterfaceOrientations~ipad</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationPortraitUpsideDown</string>
</array>
</dict>
</plist> 
```

我注意到它根本没有列出主笔尖，但我认为您不再需要这样做。

这是 Main.m #import

```
#import "SPRAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([SPRAppDelegate class]));
    }
} 
```

来自 SPRAppDelegate.m：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[SPRViewController alloc] initWithNibName:@"SPRViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我还能提供什么帮助？

[编辑] 我一直在玩弄想弄明白。它显示我的加载/启动屏幕，然后显示背景图像，但不加载任何控件。（在模拟器中）。在设备上，它显示启动画面，然后是黑色。我更改了加载屏幕，以便它们与背景不同。

# c++ - 为什么我的程序不输出 i？

> ID：13001079
> 
> 赞同：0
> 
> 时间：2012-10-21T18:59:08.477
> 
> 标签：c++, codeblocks

我的程序应该通过创建一个函数来找到一个数字的阶乘，并以表格格式显示结果。在我的程序的主体中，我有一个`cout`for`i`和我的 function `factNum i`，但只是`factNum i`输出？如何使两者`i`和`factNum i`彼此相邻显示？而且，如何修复我的 for 循环，以便在第一次运行后继续向用户询问数字？

```
#include <iostream>
#include <cmath>
using namespace std;

int factNum ( int num)
{
  int answer = 1;

  for (int i = 1; i <= num; i++)
  {
      answer = answer * i;
  }
  return answer;
}

int main()
{
  int num;

  cout << " Enter a number, or -1 to quit: " << endl;
  cin>> num;

  for (int i= 1; i<=num; i++){
    cout<< i << factNum(i)<< endl;
  }

  if( num == -1)
    cout<< " Goodbye! "<< endl;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:04:03.563

> 在我的程序的主体中，我有一个 cout 和我的函数 factNum i，但只有 factNum i 被输出？如何使 i 和 factNum i 彼此相邻显示？

实际上，您的程序确实同时输出`i`并`i!`彼此相邻：

```
cout << i << factNum(i) << endl; 
```

数字之间没有空格，所以你看到的是：

```
11
22
36
424
... 
```

如果在两个数字之间插入一个空格：

```
cout << i << " " << factNum(i) << endl; 
```

你会得到这个：

```
1 1
2 2
3 6
4 24
... 
```

* * *

> 而且，如何修复我的 for 循环，以便在第一次运行后继续向用户询问数字？

您可以将代码重构`main()`为另一个函数，并在向用户询问更多数字后再次调用它。我留给你作为练习。如果您仍然对此感到困惑，您可以发布另一个问题（但只有在您自己真正尝试过之后）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:03:42.037

> 只有 factNum i 正在输出

您确定吗？你看过实际输出的数字吗？尝试添加空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:05:20.430

尝试这个，

```
int main()
{

int num;
while(1)
{
cout << " Enter a number, or -1 to quit: " << endl;
cin>> num;

for (int i= 1; i<=num; i++)
{
cout<< i << "   "<<factNum(i)<< endl;
}

if( num == -1)
cout<< " Goodbye! "<< endl;
}
return 0; } 
```

# search - 没有这样的属性：类的示例实例：test3.ExampleController

> ID：13001082
> 
> 赞同：1
> 
> 时间：2012-10-21T18:59:28.813
> 
> 标签：search, grails, find

领域

```
class Example {
   String title
   Date releaseDate
   String author
   Boolean paperback
   static constraints = {
   }
} 
```

控制器

```
class ExampleController {
   def scaffold = true

   def search = {
      exampleInstance = Example.findAllByTitleIlike("${params.q}%",[max:10, offset:0, sort:"title", order:"asc"])

      redirect(action: "list",params)
      return
   }

   def list = {
      params.max = Math.min(params.max ? params.int('max') : 10, 100)
      [exampleInstanceList: Example.list(params),
       exampleInstanceTotal: Example.count()]
   }
} 
```

看法

```
<div id="search">
   <g:form url='[controller: "example", action: "search"]' id="search" name="search" method="get">
      <g:textField name="q" value="${params.q}" />
      <input type="submit" value="Find" />
   </g:form>
</div> 
```

请帮助我是如何

```
Error URI /test3/example/search Class groovy.lang.MissingPropertyException
Message No such property: exampleInstance for class: test3.ExampleController 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:07:29.747

使用渲染而不是重定向并传递列表页面所需的所有模型。
`def search = {`
`def exampleInstance= Example.findAllByTitleIlike("${params.q}%",[max:10, offset:0, sort:"title", order:"asc"])`
`render( view:list, model:[ exampleInstance:exampleInstance, params:params ] )`

# pyqt4 - 有效地绘制自定义 QGraphicsItem

> ID：13001083
> 
> 赞同：1
> 
> 时间：2012-10-21T18:59:33.517
> 
> 标签：pyqt4, qgraphicsitem

我有一个自定义 QGraphicsItem ，它有一个 QPainterPath 作为成员。

当鼠标被拖动时，移动被追踪到这个路径上。QGrahicsItem 中的paint() 方法绘制整个路径。实现这个的目的是，当鼠标松开时，整个路径被绘制到一个图像上（这个图像需要尽可能长的空闲给其他的绘制，所以不能直接在它上面绘制）。

这里的问题是，随着路径变长，QGraphicsScene 上图形的更新明显变慢。

有没有办法优化和加速 paint() 方法，同时保持可以直接绘制到图像的路径？

# json - 使用 Node.js 和 Express 的博客编号页面导航

> ID：13001084
> 
> 赞同：0
> 
> 时间：2012-10-21T18:59:44.643
> 
> 标签：json, node.js, pagination, express, tumblr

我正在使用 Node.js 和 Express 开发一个 webapp。在这个应用程序中，我管理一个 JSON 数据流，以使用 Tumblr API 创建一个博客阅读器。

我把路线写成：

```
app.get('/blog', function(req, res) {

  var Tumblr = require('tumblr').Tumblr
    , keys = require('./keystore');

  // Instancing Tumblr object to connect with a certain blog.
  var blog = new Tumblr('myblog.tumblr.com', keys.tumblrConsumerSecret);

  // Using Tumblr API to retrieve posts from a remote blog.
  // For more info about methods and parameters to use, read the
  // documentation for Tumblr's API v2.
  blog.posts({offset: 0, limit: 5}, function(err, tumblr) {
    if (err) {
       res.send('Error page... I suppose!');
    }
    else {
      res.render('blog',
      {
        blog: tumblr.posts
      });
    }
  }); 
}); 
```

并且`blog.jade`：

```
each post in blog
  h2 #{post.title}
  .justified
    != post.body 
```

现在，我想为阅读器添加编号页面导航功能（作为服务器端）。

```
page 1: posts from 1 to 5
page 2: posts from 6 to 10
(etc...) 
```

我能做什么？

最好的问候，六。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:41:20.247

按照chovy的建议，我找到了解决方案。

在`app.js`：

```
function checkParamPage(req, res, next) {
  if (req.params.page > 0) {
    next();
  }
  else { res.redirect('/error'); }
}

app.get('/blog/:page', checkParamPage, routes.blog);
app.get('/error', function(req, res) { res.send('Error!'); }) 
```

在`routes/index.js`：

```
exports.blog = function(req, res) {

  var _req = req;
  var _res = res;

  var Tumblr = require('tumblr').Tumblr
    , keys = require('../keystore')
    , async = require('async');

  var page    = req.params.page
    , limit   = 5
    , offset  = page*limit - limit;

  // Instancing Tumblr object to connect with a certain blog.
  var blog = new Tumblr('myblog.tumblr.com', keys.tumblrConsumerSecret);

  async.parallel([
      function(callback){
        blog.info(function(err, res) {
          if (err) {
            callback('error', null);
          } else {
            callback(null, Math.ceil(res.blog.posts/limit));
          }
        });
      },
      function(callback){
        blog.posts({offset: offset, limit: limit}, function(err, res) {
          if (err) {
            callback('error', null);
          } else {
            if (tumblr.posts.length === 0) {
              callback('empty', null);
            } else {
              callback(null, res.posts);
            }
          }
        });
      }
    ], function(err, res) {
      if (err) {
        _res.redirect('/error');
      } else if (page > res[0]) {
        _res.redirect('/error');
      } else {
        _res.render('blog',{
          current: '/blog',
          title: 'MyTitle',
          pages: {
            all: res[0],
            current: page
          },
          posts: res[1]
        });
      }
    }
  );
}; 
```

然后，`blog.jade`：

```
extends layout

block content

  // Including sidebar.
  include partials/sidebar

  div.span8
    h1 Blog
    hr

    each post in posts
      h2 #{post.title}
      div#tumblr-post.justified
        != post.body
      hr

    .pagination.pagination-centered
      ul
        if (pages.current > 1)
          li
            a(href='/blog/1') First
        else
          li.disabled
            a(href='/blog/1') First
        - for (var i = 1; i <= pages.all; i++)
          if (i == pages.current)
            li.active
              a(href='/blog/' + i) #{i}
          else
            li
              a(href='/blog/' + i) #{i}
        if (pages.current < pages.all)
          li
            a(href='/blog/' + pages.all) Last
        else
          li.disabled
            a(href='#') Last

  // Including footer.
  include partials/footer 
```

就是这样（它工作正常）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:14:07.007

通常你会创建分页链接：

```
/blog/pg1
/blog/pg2
/blog/pg3 
```

您可以像这样获取页码：

```
app.get('/blog/pg:pg', function(req, res){
  var pg = req.params.pg,
   offset = pg*5-5;

   blog.posts({offset: offset, limit: 5}, ...);
}); 
```

# java - Java Paint（是的，我知道，但我搜索过..），ActionListeners

> ID：13001093
> 
> 赞同：0
> 
> 时间：2012-10-21T19:00:13.987
> 
> 标签：java, swing, jframe, paint, mouselistener

非常感谢你，但我需要 Listener 方法并现在解决它。但现在我无法看到按钮，直到我将鼠标悬停在它们上！我认为这只是一个小错误，但我无法弄清楚！现在我的代码如下...

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class PaintMain extends JFrame
{
    JPanel colorPanel = new JPanel();
    JPanel drawPanel = new JPanel();
    JPanel selectPanel = new JPanel();
    JButton[][] randomColors = new JButton[5][5];
    Color selectedColor = Color.BLACK;
    Random colorGenerator = new Random();
    int curx = drawPanel.getX();
    int cury = drawPanel.getY();
    public PaintMain()
    {
        setLayout(new BorderLayout());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        colorPanel.setLayout(new GridLayout(5,5));
        drawPanel.setLayout(new BorderLayout());
        drawPanel.setBackground(Color.WHITE);

        for (int i = 0; i < 5; i++) 
        {
            for (int j = 0; j < 5; j++) 
            {
                randomColors[i][j]=new JButton();
                randomColors[i][j].setBackground(getRandomColor());
                randomColors[i][j].addActionListener(new ActionListener() 
                {                   

                    @Override
                    public void actionPerformed(ActionEvent e) 
                    {
                        if( e.getSource() instanceof JButton) 
                        {
                               selectedColor=((JButton)e.getSource()).getBackground();
                               System.out.println(selectedColor);
                        }                       
                    }
                });
                colorPanel.add(randomColors[i][j]);
            }           
        }

        this.addMouseMotionListener(new MouseLsnr());
        add(colorPanel, BorderLayout.WEST);
        add(drawPanel, BorderLayout.CENTER);

        setVisible(true);
        pack();     
    }

    public Color getRandomColor() 
    {
        return new Color(colorGenerator.nextInt(256), colorGenerator.nextInt(256), colorGenerator.nextInt(256));
    }

    public static void main(String[] args) 
    {
        new PaintMain();
    }

    public void paint(Graphics g)
    {
        //super.paint(g);
        g.setColor(selectedColor);
        g.drawRect(curx, cury, 2, 1);
    }

    class MouseLsnr implements MouseMotionListener
    {       
        public void mouseDragged(MouseEvent arg0) {

            System.out.println(arg0.getX()+":"+arg0.getY());
            curx=arg0.getX();
            cury=arg0.getY();

            repaint();
        }

        public void mouseMoved(MouseEvent arg0) 
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:44:19.403

你会想仔细看看[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

![在此处输入图像描述](../Images/68b2d98e7a7f531063649bb93d060875.png)

您可能想阅读[如何编写鼠标侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

```
public class RandomColorPane {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        new RandomColorPane();
    }

    public RandomColorPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MainPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class MainPane extends JPanel {

        JPanel colorPanel = new JPanel();
        JPanel drawPanel = new DrawPane();
        JPanel selectPanel = new JPanel();
        JPanel[][] randomColors = new JPanel[5][5];
        Color selectedColor = Color.BLACK;
        Random colorGenerator = new Random();
        int curx = drawPanel.getX();
        int cury = drawPanel.getY();

        public MainPane() {
            setLayout(new BorderLayout());

            colorPanel.setLayout(new GridLayout(5, 5));
            drawPanel.setLayout(new BorderLayout());
            drawPanel.setBackground(Color.WHITE);

            for (int i = 0; i < 5; i++) {
                for (int j = 0; j < 5; j++) {
                    randomColors[i][j] = new JPanel();
                    randomColors[i][j].setPreferredSize(new Dimension(25, 25));
                    randomColors[i][j].setBackground(getRandomColor());
//                    randomColors[i][j].addActionListener(new ActionListener() {
//                        @Override
//                        public void actionPerformed(ActionEvent e) {
//                            if (e.getSource() instanceof JButton) {
//                                selectedColor = ((JButton) e.getSource()).getBackground();
//                                drawPanel.setForeground(selectedColor);
//                                drawPanel.repaint();
//                            }
//                        }
//
//                    });
                    randomColors[i][j].addMouseListener(new MouseAdapter() {

                        @Override
                        public void mouseEntered(MouseEvent e) {
                            drawPanel.setForeground(((JPanel)e.getSource()).getBackground());
                            drawPanel.repaint();
                        }

                    });
                    colorPanel.add(randomColors[i][j]);
                }
            }

            add(colorPanel, BorderLayout.WEST);
            add(drawPanel, BorderLayout.CENTER);
        }

        public Color getRandomColor() {
            return new Color(colorGenerator.nextInt(256), colorGenerator.nextInt(256), colorGenerator.nextInt(256));
        }

    }

    public class DrawPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(20, 20);
        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            int x = (getWidth() - 10) / 2;
            int y = (getHeight() - 10) / 2;

            g.setColor(getForeground());
            g.fillRect(x, y, 20, 20);

        }

    }

} 
```

# nant - NAnt 有 if/then/else 任务吗？

> ID：13001095
> 
> 赞同：5
> 
> 时间：2012-10-21T19:00:16.183
> 
> 标签：nant, nantcontrib

其他构建系统，例如 Ant，有一个**if/then/else**结构，允许在许多情况下简化脚本逻辑。CIFactory NAnt 变体也有`<ifthenelse/>`这个`<if/>`（原条件，一否定。

在 NAnt 中是否有可能在一个条件下实现**if/then/else流程？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T19:00:16.183

在[NAnt 0.92](http://nant.sourceforge.net/release/0.92/releasenotes.html)[`<choose/>`](http://nant.sourceforge.net/release/latest/help/tasks/choose.html)中，已从 NAnt-contrib 提升了一项任务，并允许您仅通过对测试条件的一次评估来实现**if/then/else效果。**一个例子：

```
<property name="operatingSystem"
  value="${operating-system::to-string(environment::get-operating-system())}" /> 
<choose>
  <when test="${string::contains(operatingSystem, 'Windows')}">
    <echo message="Running on Microsoft Windows" />
  </when>
  <otherwise>
    <echo message="Are we running on Linux?" />
  </otherwise>
</choose> 
```

# macvim - 如何在 Vim 脚本中获取 tabline 的宽度？

> ID：13001102
> 
> 赞同：3
> 
> 时间：2012-10-21T19:00:32.333
> 
> 标签：macvim, vim

我目前正在使用`winwidth(0)`找出我可以在表格中显示多少文本，但如果有垂直拆分的窗口并且当前窗口没有跨越顶部框架的整个宽度，这将不起作用。如何在 Vim 脚本中获取顶部框架或 tabline 的宽度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T20:30:59.623

表格线占据*了所有*可用的宽度。该`columns`选项为您提供该宽度：

```
let tabline_width = &columns 
```

# java - 从 NSF 加载的单例对象的行为

> ID：13001106
> 
> 赞同：0
> 
> 时间：2012-10-21T19:01:00.973
> 
> 标签：java, xpages

我试图了解 Java 对象在 Domino 环境中的行为方式，并且想知道当您使用单例时会发生什么（单例是一种 Java 对象，它的构造方式使得在 JVM 中只存在一个实例）。

假设我在数据库 1 中有一个单例，使用`getInstance()`它。该对象是在 JVM 中创建的，并且从那里每次我使用该`getInstance()`方法时都会返回相同的对象。

现在我将该类复制到数据库 2 并`getInstance()`在该数据库中使用。哪个对象被返回？我最初在数据库 1 中创建的还是从数据库 2 中创建的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:23:00.760

我做了一个测试，正如 jjtbsomhorst 建议的那样，确实会有两个单独的单例。

页面`SingletonTest.xsp`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:text escape="true" id="computedField1" value="#{javascript:nl.tjit.SingletonTest.INSTANCE.getWhoami()}"></xp:text>
</xp:view> 
```

Java类：

```
package nl.tjit;
    public enum SingletonTest {
    INSTANCE;

    private final String whoami = "I am your father";

    public String getWhoami() {
        return whoami;
    }
} 
```

将 XPage 和 Java 类复制到另一个数据库并稍作修改的`whoami`字符串会产生不同的输出。所以单例不在数据库之间共享。

# design-patterns - 黑板或其他架构 - 请思考

> ID：13001114
> 
> 赞同：0
> 
> 时间：2012-10-21T19:01:37.777
> 
> 标签：design-patterns, architecture, software-design, blackboard

我必须选择一个合适的架构来开发一个模拟紧急呼叫/调度服务的系统。

*   有需要的人打来电话。
*   电话接线员记录详细信息（姓名、位置等）。
*   系统从最近的医院派出救护车。
*   系统检查医疗数据库
*   系统将病史和患者信息传递到派出的救护车内的 PDA/智能手机上。
*   医护人员发送更新位置和采取的行动。

我在想 Blackboard 架构会适合这个 - 但是在向救护车发送信息时发送数据/客户端请求会与 BB 架构相矛盾。

我可以使用经典的、混合的、新兴的或实验性的架构模式——只要它们能工作并且适合问题。

谁能给我一些建议，好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:37:11.543

观察者，也可能是责任链。

所有实体都观察呼叫。如果响应者链中的任何元素必须决定是否处理或转发请求，则您需要责任链。

# python - 如何编写 Webapp2 请求处理程序以允许客户端在接收到 Channel API 消息后获取数据

> ID：13001115
> 
> 赞同：0
> 
> 时间：2012-10-21T19:01:45.650
> 
> 标签：python, webapp2, channel-api, requesthandler

[作为我提出的另一个问题](https://stackoverflow.com/questions/12654543/what-python-web-framework-should-i-use-with-gwt-to-stream-kml-from-python-back-e)的后续，我有一个基本问题，关于让 webapp2 python 服务器提供太大（约 100 kb）而无法作为 Channel API 消息发送给客户端的 json 数据的最简单方法。

webapp2 服务器根据客户端请求在几分钟内生成多个数据文件，我想当数据准备好时，我希望 Channel API 将带有 url 的消息发送到客户端，客户端（GWT 应用程序）可以执行 http GET 请求来获取数据。每个数据文件对客户端都是唯一的，因此服务器必须有一个请求处理程序，该处理程序将为客户端提供适当的数据文件。

您能否编写一个请求处理程序，该处理程序可以在调用请求时直接从另一个请求处理程序为该特定客户端提供正确的数据文件？或者我是否需要先使用 Cloud SQL 或 Data Store 存储数据，直到客户提出要求？这是我想做的一些不完整的示例代码：

```
class MainPage(webapp2.RequestHandler):
def get(self):
    ## This opens the GWT app    

class Service_handler(webapp2.RequestHandler):
def get(self, parameters):
    ## This is called by the GWT app and generates the data to be 
    ## sent to the client. 
    ## A channel API message is sent to the client with the url 
    ## for each data file generated.

class kml_handler(webapp2.RequestHandler):
def get(self, client_id):
    ##  I would like to return the correct data here when it is 
    ##  called by the client.  Do I need to store the data in  
    ##  Cloud SQL or the Data Store and then retrieve it
    ##  or can this handler take the results directly from the 
    ##  Service_handler as soon as it is generated?

app = webapp2.WSGIApplication([
                            webapp2.Route(r'/', handler=MainPage),
                            webapp2.Route(r'/Service/', handler=Service_handler),
                            webapp2.Route(r'/_ah/channel/<connected>/', handler = connection_handler),
                            webapp2.Route(r'/kml/<client_id>', handler = kml_handler)
                            ],
                          debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:03:02.060

您可以将文件写入 blobstore 并从 blobstore 提供这些文件。

这是一个示例： [https ://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App](https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App)

# joomla - 向文章组件添加自定义字段

> ID：13001116
> 
> 赞同：0
> 
> 时间：2012-10-21T19:01:46.627
> 
> 标签：joomla, joomla2.5

我最近使用以下 url 中的文档向文章组件添加了自定义字段：

[http://docs.joomla.org/Adding_custom_fields_to_the_article_component](http://docs.joomla.org/Adding_custom_fields_to_the_article_component)

现在，这会将定义的自定义字段添加到每篇新文章和现有文章中。有没有办法为特定的文章布局覆盖定义自定义字段。

例子：

如果我有类别博客的自定义布局（新闻、投资组合、事件），我可以在创建新文章时为每个类别定义不同的自定义字段吗？

自定义帖子类型在 wordpress 中的工作方式，或者 k2 组件的工作方式，可以单独在 joomla 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:23:19.603

这在 K2 中更容易管理，因为该功能是内置的，可以专门执行您想要的操作。为每个类别分配额外的字段是微不足道的，而不必经历链接中描述的更复杂的过程。

但是，如果您想坚持使用 com_content，则需要创建替代布局来显示每个类别。您仍然可以在管理员中显示所有自定义字段，但您可以使用替代布局控制前端的显示。这是文档（与 2.5 相同）- [http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6#Introduction_to_Alternative_Layout_Feature_in_Version_1.6](http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6#Introduction_to_Alternative_Layout_Feature_in_Version_1.6)

# java - 在对象的创建过程中将变量的值添加到对象的名称中

> ID：13001117
> 
> 赞同：2
> 
> 时间：2012-10-21T19:02:08.270
> 
> 标签：java

我正在创建 Car 对象，并且正在计算使用变量“carCounter”创建的汽车数量。CarCounter 从 0 开始，我想将 Car 对象命名为 car(carCounter) 并在每次创建汽车时增加计数器，以便将汽车命名为 car0、car1、car2 等...对象的创建？

像 Car() car(+carCounter+) = new Car(); ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:03:47.837

我认为你想要的是一个[Array](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)：

```
Car[] cars = new Car[3];
cars[0] = new Car();
cars[1] = new Car();
cars[2] = new Car(); 
```

这也让您可以通过变量引用索引（您所称的计数）：

```
int n = 1;
Car carAtIndexN = cars[n]; 
```

如果您要初始化一整套汽车，最好在循环中这样做：

```
int totalCarCount = 10;

Car[] cars = new Car[totalCarCount];

for (int i=0; i<totalCarCount; i++) {
  cars[i] = new Car();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:02:50.443

您可以维护一个`static counter`变量，并且每次创建 的实例时`class`，增加该变量并为该实例设置它。

```
public class YourClass {
    private static counter = 0;
    private String name;

    public YourClass() {
        name = "car" + counter;
        counter++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:06:17.710

```
 public Class Car {
    public static int counter= 0;
    String name="";
    public Car() {
       counter++;
       name= "car"+ counter;
    };
} 
```

这就是汽车类的全部内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T19:15:56.560

为了维护线程安全，我建议`static AtomicLong`为任务使用一个变量，该变量将作为构造函数中的最后一个命令递增。这样，如果`Exception`构造函数中有一个，计数器将是完整的。

```
public final class Car {
    private static AtomicLong carCounter = new AtomicLong();
    public Car() {
        //do the dirty things here
        carCounter.incrementAndGet();
    }  
    public static long getCounterValue() {
        return carCounter.get();
    }
} 
```

我也会创建 class `final`，因为如果一个类扩展了这个类，它的构造函数可以在保存计数器后执行操作，这会使事情处于不一致的状态（计数器不会反映创建的实例的数量）。 ..

有这么多限制，这不是一个非常有用的情况，不是吗？我认为最好的解决方案是使用[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)来创建实例，并跟踪计数器。也许那个抽象工厂甚至应该是一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)......

# c# - 这是 DotNet 4 WPF 拼写检查中的错误吗？

> ID：13001118
> 
> 赞同：1
> 
> 时间：2012-10-21T19:02:09.417
> 
> 标签：c#, wpf, spell-checking

我有：

1.  创建了一个 Windows 窗体项目。
2.  创建了一个用户控件来保存一个 WPF 文本框。
3.  向文本框的拼写检查添加了自定义字典。
4.  将 UserControl 添加到我的 Windows 窗体中。

XAML 用于将 WPF 文本框添加到用户控件：

```
<UserControl x:Class="TestElementHost.SpellBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="248" d:DesignWidth="250">
    <Grid>
        <TextBox Name="txtWPF" />
    </Grid>
</UserControl> 
```

这是表单代码（在 VS 设计器文件中添加的按钮）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace TestElementHost
{
    public partial class Form1 : Form
    {
        private System.Windows.Forms.Integration.ElementHost elementHost1;
        private SpellBox spellBox1;
        public Form1()
        {
            InitializeComponent();
            this.elementHost1 = new System.Windows.Forms.Integration.ElementHost();
            this.spellBox1 = new TestElementHost.SpellBox();
            this.elementHost1.Location = new System.Drawing.Point(27, 12);
            this.elementHost1.Name = "elementHost1";
            this.elementHost1.Size = new System.Drawing.Size(269, 296);
            this.elementHost1.TabIndex = 0;
            this.elementHost1.Text = "elementHost1";
            this.elementHost1.Child = this.spellBox1;
            this.Controls.Add(this.elementHost1);
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            spellBox1.txtWPF.SpellCheck.IsEnabled = true;
            spellBox1.txtWPF.SpellCheck.CustomDictionaries.Add(new Uri(Application.StartupPath + @"\MyDictionary.lex"));
        }

        private void button1_Click(object sender, EventArgs e)
        {
            spellBox1.txtWPF.Text = "my bbad word."; // bbad is in the CustomDictionary
        }

        private void button2_Click(object sender, EventArgs e)
        {
            spellBox1.txtWPF.IsEnabled = false;
            spellBox1.txtWPF.IsEnabled = true;
           // spellBox1.txtWPF.SpellCheck.IsEnabled = false;
           // spellBox1.txtWPF.SpellCheck.IsEnabled = true;
        }
    }
} 
```

在我尝试更改 IsEnabled、IsReadOnly 或 Visibility 属性之前，这非常有效，并且 CustomDictionary 中的单词被忽略。例如，将 IsReadOnly 设置为 true，然后再次直接返回 false，然后突然将自定义词典中的单词标为红线。

我解决这个问题的方法是将 SpellCheck.IsEnabled 设置为 false，然后在我需要允许用户编辑控件中的文本时在连续行上返回 true。这似乎使习惯词典重新发挥作用。

有没有其他人有这个问题？这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:38:50.737

它看起来像一个“功能”（感谢您验证这个 Joachim）：

如果您使用自定义字典，然后更改 WPF 文本框或用户控件的可见性、启用或只读属性，拼写检查器将忽略自定义字典。

为了解决这个问题，禁用然后重新启用拼写检查。

这适用于 dot net runtime v4.0.30319

# utf-8 - Dart_NewString 期望参数 'str' 是有效的 UTF-8

> ID：13001135
> 
> 赞同：1
> 
> 时间：2012-10-21T19:03:48.760
> 
> 标签：utf-8, dart

我刚开始使用 Dart，我想知道为什么我的第一个应用程序不起作用。

```
void main() {  print("Hello, World!");} 
```

当我运行应用程序时，我收到以下错误消息：

> dart --enable-checked-mode HelloWorld.dart
> 
> Dart_NewString 期望参数 'str' 是有效的 UTF-8。

我是新手，我按照网站[http://www.dartlang.org/docs/editor/getting-started/#code](http://www.dartlang.org/docs/editor/getting-started/#code)上的教程进行操作，而 Hello World 不起作用-_-

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:37:08.830

我怀疑该文件未以 UTF-8 编码。

尝试将文件编码更改为 UTF-8 并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:40:24.270

```
import 'dart:html';

num rotatePos = 0;

void main() {
  query("#text")
    ..text = "Click me!"
    ..on.click.add(rotateText);
}

void rotateText(Event event) {
  rotatePos += 360;
  query("#text").style
    ..transition = "1s"
    ..transform = "rotate(${rotatePos}deg)";
} 
```

# uml - 创建用户帐户应该是登录的扩展关系吗？

> ID：13001136
> 
> 赞同：0
> 
> 时间：2012-10-21T19:03:49.073
> 
> 标签：uml

现在我正在尝试为银行网站创建一个 uml，但我不确定如何关联创建银行帐户和登录到用户。我知道您必须拥有一个帐户才能登录，但是如果用户已经拥有一个帐户，他们就不需要创建一个帐户。创建一个帐户应该是登录的扩展吗？登录用例连接到参与者客户。如果有任何不清楚的地方，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:55:51.053

您可以通过两种方式对其进行建模：一种是创建帐户作为登录的扩展，另一种是它们是单独的用例。这两种情况都是正确的，但第一种情况表明，如果用户没有帐户，他可以在登录过程中创建一个帐户并作为其中的一部分。

# objective-c - 将 UIViewController 推送到 UINavigationController（也在 UITabBarController 中）

> ID：13001141
> 
> 赞同：0
> 
> 时间：2012-10-21T19:04:29.000
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller

我在 AppDelegate 中以编程方式创建了一个 UITabBarController。我还创建了两个 UINavigationController，其中包含一些 UIViewController。我将导航控制器添加到 UITabBarController 上，如下所示：

```
 BVMapViewController *mapViewController = [[[BVMapViewController alloc] initWithNibName:@"BVMapViewController_iPhone" bundle:nil] autorelease];
    BVFavoritesViewController *favoritesViewController = [[[BVFavoritesViewController alloc] initWithNibName:@"BVFavoritesViewController_iPhone" bundle:nil] autorelease];

    UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:mapViewController] autorelease];
    [navigationController setToolbarHidden:YES];
    UINavigationController *navigationControllerForFavorites = [[[UINavigationController alloc] initWithRootViewController:favoritesViewController] autorelease];

    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    NSArray* controllers = [NSArray arrayWithObjects:navigationController, navigationControllerForFavorites, nil];
    self.tabBarController.viewControllers = controllers;
    [self.window setRootViewController:self.tabBarController]; 
```

结果可以正常创建带有两个导航控制器的标签栏控制器。

问题如下：第一个 UINavigationController 包含一个 UIViewController，里面有一个 MKMapView。该地图显示了一堆 POI，因此当您点击其中一个时，应用程序会向 Web服务**（在后台）**发送一个请求，该请求一完成就会通知视图控制器，该视图控制器将另一个 UIViewController 推入导航堆栈以显示有关该 POI 的更多信息，

```
[self.navigationController pushViewController:self.stationViewController
                                     animated:YES]; 
```

在这里，我收到以下错误：

> _WebTryThreadLock(bool), 0x11d9b560: 试图从主线程或web线程以外的线程获取web lock。这可能是从辅助线程调用 UIKit 的结果。现在崩溃... 1 0x58a76a9 WebThreadLock 2 0x5bfdfe -[UITextView _updateForNewSize:withOldSize:] 3 0x5c00b4 -[UITextView setFrame:] 4 0x4c59df UIViewCommonInitWithFrame 5 0x4c5bae -[UIView initWithCoder:] 6 0x4d9fb7 -[UITextViewScrollView inCoder:][7]的initWithCoder：] 8 0x7b1a02 UINibDecoderDecodeObjectForValue 9 0x7b10e5 - [UINibDecoder decodeObjectForKey：] 10 0x6a2648 - [UIRuntimeConnection的initWithCoder：] 11 0x7b1a02 UINibDecoderDecodeObjectForValue 12 0x7b1418 UINibDecoderDecodeObjectForValue 13 0x7b10e5 - [UINibDecoder decodeObjectForKey：] 14 0x6a1aa3 - [UINib instantiateWithOwner：选择：*startDeferredTransitionIfNeeded：] 25 0x5804a3 - [UINavigationController的pushViewController：过渡：forceImmediate：] 26 0x580098 - [UINavigationController的pushViewController：动画：] 27 0x386f - [BVMapViewController parserDidFinishWithStation：] 28 0x785c - [BVParser parseStation：] 29 0xf8a0d5 - [NSThread主] 30 0xf8a034 **NSThread*** **_main** 31 0x94e53ed9 _pthread_start

我试图在主线程上执行此操作，但推送的控制器的视图全黑。

提前谢谢你，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:28:36.967

好吧，正如您在问题中提到的那样，您**必须**将视图控制器推送到主线程上。与 UIKit 的任何交互都必须在主线程上完成。

As to why it shows up black, that is a different issue which you need to resolve by standard troubleshooting techniques. Once it is on the main thread and it is running correctly, set breakpoints on the various methods of the class being displayed (viewDidLoad, etc) and see where it is tripping up.

# c# - 如何将这段 C++ 代码转换为 C#？

> ID：13001143
> 
> 赞同：1
> 
> 时间：2012-10-21T19:04:38.493
> 
> 标签：c#, c++

试图转换一些代码，但对于我所有的谷歌搜索，我无法弄清楚如何转换这个位。

```
 float fR = fHatRandom(fRadius);
    float fQ = fLineRandom(fAngularSpread ) * (rand()&1 ? 1.0 : -1.0);
    float fK = 1; 
```

这一点

```
(rand()&1 ? 1.0 : -1.0); 
```

我想不通。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T19:06:13.287

它是 1 或 -1，有 50/50 的机会。

等效的 C# 代码是：

```
((new Random().Next(0, 2)) == 0) ? 1.0 : -1.0; 
```

`Next(0,2)`将返回 0 或 1。

如果代码被多次调用，您应该存储实例`Random`并重新使用它。当您创建它的新实例时，`Random`它会使用确定伪随机数序列的种子进行初始化。为了获得更好的“随机性”，您不应该经常重新初始化随机序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T19:11:12.137

您可以使用

```
Random rnd = new Random();
(rnd.NextInt(2) * 2 -1); // 1 or -1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T19:18:15.627

C++ 示例生成一个随机数，使用其最低位并丢弃其余位。然后使用最低位来选择 -1 或 1。

在 C# 中，等价物如下。

```
new Random().Next(0, 2) * 2 - 1 
```

**重要提示**：如果您在循环中执行此操作，请存储`Random`某处的实例并仅`Next`在循环中调用，而不是再次调用构造函数。这不仅仅是性能优化。否则，您将看到持续时间约为 100 毫秒的相同位序列，因此对 Random 的无参数构造函数的调用应该很少且相距甚远，理想情况下，每次应用启动时调用一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T19:09:01.227

1.0 或 -1.0，其中任一概率均等

rand() 生成一个与 0x01 相加的数字，即第一位，取决于你是否得到一个位，你得到 1.0 或 -1.0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T19:11:08.980

正如其他人所说，你可以随机化 50% 的机会。

如果你想要一个准确的翻译，那就是：

```
((new Random().Next() & 1 > 0) ? 1.0 : -1.0) 
```

您必须从条件表达式的第一部分中创建一个布尔值。

# c++ - 如何用单词填充二维字符数组？

> ID：13001144
> 
> 赞同：0
> 
> 时间：2012-10-21T19:04:43.390
> 
> 标签：c++

你知道如何用流中的单词填充数组吗？这是我现在所能做到的：

```
ifstream db;
db.open("db") //1stline: one|two|three, 2d line: four|five|six....
int n=0,m=0;
char a[3][20];
char c[20];
while(db.get(ch)) {
    if(ch=='|') {
        a[0][m]=*c;
        m++;
    }
    else {
        c[n]=ch;
        n++;
    }
} 
```

所以它看起来像 {{one,two,three},{four,five,six},{seven,eight,nine},...}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:32:33.467

要保存“单词”（字符串）的 2 维数组，需要 3 维字符数组，因为字符串是 1 维字符数组。

您的代码应如下所示：

```
int i = 0; // current position in the 2-dimensional matrix
           // (if it were transformed into a 1-dimensional matrix)
int o = 0; // character position in the string

int nMax = 20; // rows of your matrix
int mMax = 3;  // columns of your matrix
int oMax = 20; // maximum string length

char a[nMax][mMax][oMax] = {0}; // Matrix holding strings, zero fill to initialize

char delimiter = '|';

while (db.get(ch)) {  // Assumes this line fills ch with the next character from the stream
    if (ch == delimiter) {
        i++; // increment matrix element
        o = 0; // restart the string position
    }
    else {
        o++; // increment string position
        a[i / mMax][i % mMax][o] = ch;
    }
} 
```

对于输入流`"one|two|three|four|five|six|seven"`，这将返回一个字符串数组，如下所示：

`{{"one", "two", "three"}, {"four", "five", "six"}, {"seven"}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:51:00.637

您可以使用 c++ 对象，例如`vector`和`string`。C 中的二维数组对应于 C++ 中的向量向量。二维数组中的项目是字符串，因此语法`vector<vector<string>>`如下。

```
#include <vector>
#include <string>
#include <sstream>
using std::vector;
using std::string;
using std::istringstream;
vector<vector<string> > a;
string line;
while (getline(db, line, '\n'))
{
    istringstream parser(line);
    vector<string> list;
    string item;
    while (getline(parser, item, '|'))
        list.push_back(item);
    a.push_back(list);
} 
```

此代码（未经测试；对可能的语法错误表示抱歉）使用“字符串流”来解析输入行；它不假设每行 3 个项目。修改以适应您的确切需求。

# android - 在 Android 中创建两个状态按钮

> ID：13001147
> 
> 赞同：0
> 
> 时间：2012-10-21T19:05:10.583
> 
> 标签：android, button, state

我试图了解如何制作一个按钮，当它被按下时会锁定一个值，当它再次被按下时它会解锁。

我的方法如下：

```
boolean r1 = false;
boolean r2 = true;
private boolean flipFlop(boolean read, int i)
{
    if(read == true)
    {
        if (r1 == true && r2 == false)
        {
            r1 = false;
            r2 = true;
        }
        else if(r1 == false && r2 == true)
        {
            r1 = true;
            r2 = false;
        }   

    }

    return r1;
} 
```

在 onTouch 下调用 FlipFlop 方法，如下所示：

```
public boolean onTouch(View view, MotionEvent motion)
        {

            boolean pressCheck = false;

            switch(motion.getAction())
            {
            case MotionEvent.ACTION_UP:
            {

                pressCheck = flipFlop(view.isPressed(), 1);
                textView.setText("State is: " + pressCheck);
            }

            case MotionEvent.ACTION_DOWN:
            {
                pressCheck = flipFlop(view.isPressed(), 1);
                textView.setText("State is: " + pressCheck);

            }
            }
            return false;

        } 
```

单击一次时，状态设置为 false 并且不会更改。双击时，它会在两种状态之间翻转。这是为什么？

此外，当我尝试使用数组来保存状态时，它锁定为 true 并且在双击时不会改变：

```
private boolean[][] latch = {{false, false, false}, {true, true, true}};

public boolean flipFlop(boolean read, int i)
{
    if(read == true)
    {
        if(latch[i][2] == true && latch[i][1] == false)
        {
            latch[i][1] = true;
            latch[i][2] = false;
        }
        else if(latch[i][2] == false && latch[i][1] == true)
        {
            latch[i][1] = false;
            latch[i][2] = true;
        }
    }

    return latch[i][1]; 
```

}

# javascript - 所见即所得的 javascript 编辑器用文本替换图像

> ID：13001149
> 
> 赞同：2
> 
> 时间：2012-10-21T19:05:29.203
> 
> 标签：javascript, asp.net, html, css, wysiwyg

我目前正在开发一个 MVC4 asp.net 项目（我的第一个项目，在我使用 WPF 和 winforms 之前，没有真正的网站体验）。我想制作一个编辑器/所见即所得的评论，人们可以对网站上的项目发表评论。一切都已经设置好了，但是评论只是写在`<textarea/>`. 现在我搜索了一下，发现了一堆用于 javascript 的 WYSIWYG 编辑器，但是我找不到一个好的，或者解决这个问题的好方法：

假设该网站是关于扑克的（它不是，但它只是为了简单的例子），当一个人发表评论时，一旦他发布（或者在他打字时，那会更好） . h9 被替换为 heart 9 jpg（或者我们可以创建它的 div 并且它具有`backgroundimage`css 属性）（所有 jpg 都在服务器 ofc 上）。（对于 S10 也一样，应该用黑桃 10 卡图像替换）

我不知道如何解决这个问题，所以对于我应该使用什么所见即所得编辑器来解决这个问题以及如何更接近修复它的任何帮助，将不胜感激。

格言

# delphi - 为什么 FASTMM 的完整调试模式要求 fulldebugmode.dll 与应用程序的 .exe 文件位于同一文件夹中？

> ID：13001150
> 
> 赞同：1
> 
> 时间：2012-10-21T19:05:34.063
> 
> 标签：delphi, dll

当我将 DLL 复制到 .exe 所在的同一文件夹中时，它可以工作。不过，有一个（某种）解决方法：当我打开调试器选项并将 DLL 的原始路径添加到环境块时，当我在我的 IDE 中启动我的项目时它可以工作，但它不起作用我在资源管理器中启动 project.exe 文件。这不是一个真正的问题，我只是想知道这些文件之间的关系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T19:39:53.980

当 DLL 仅通过其名称链接时，将使用 DLL 搜索路径来定位它。这个搜索路径是一个复杂的野兽，会根据各种设置而变化。它[在 MSDN 上有详细](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586.aspx)记录。

在 DLL 搜索路径的所有变体中，加载可执行文件的目录是搜索的第一个目录。这是迄今为止加载 DLL 最安全的方法。要求修改全局`PATH`环境变量是侵入性的。要求将 DLL 安装在系统目录中是侵入性的，并且违反了最佳实践的所有建议。要求使用当前目录是脆弱易碎的，并且会打开安全漏洞。

在理想的世界中，应用程序应该是隔离的。实现这一点的最有效方法是将依赖项与可执行文件放在同一目录中。

# python - 双向多对多attribute_mapped_collection，sqlalchemy

> ID：13001157
> 
> 赞同：2
> 
> 时间：2012-10-21T19:06:20.077
> 
> 标签：python, orm, sqlalchemy, relationship

我有 2 个类作为多对多关系 A 和 B，在这里缩短以显示基本关系：

```
class A(Base):

    bclss = relationship("B",
                          backref = "aclss",
                          secondary = "a_b_association",
                          collection_class = attribute_mapped_collection('identifier'))   

    a_b_association_table = Table('a_b_association', Base.metadata,
                             Column('a_id', Integer, ForeignKey('a.id')),
                             Column('b_id', Integer, ForeignKey('b.id')) ) 
```

因此 A 的实例可以添加 B 的实例，并在由标识符键入的字典中引用......但是 B 实例仅包含其 a 对象的 [列表]，我想要一个镜像接口，以提取相关的实例通过字典中的标识符键到 b 个实例。镜像 b 上的关系语句并引用相同的关联表不起作用，所以我正在考虑一个我不完全知道如何在 sqlalchemy 中实现的领域。

所以，即使这不是 100% 清楚，我的问题是：

如何在多对多关系中相关的两个项目上获取字典、属性映射集合，其中每一方都可以通过字典键提取相关项目而不是我得到的：不对称的一侧字典/另一侧列表界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:00:18.677

我相信这就是您正在寻找的（您只需要`backref`在与 another 的多对多关系中定义一个关系`attribute_mapped_collection`）：

```
from sqlalchemy import Column, ForeignKey, Integer, String, Table, create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import backref, relationship, sessionmaker
from sqlalchemy.orm.collections import attribute_mapped_collection

Base = declarative_base()

class A(Base):
    __tablename__ = 'a'

    id = Column(Integer, primary_key=True)

a_b_association_table = Table(
    'a_b_association', Base.metadata,
    Column('a_id', Integer, ForeignKey('a.id')),
    Column('b_id', Integer, ForeignKey('b.id'))
)

class B(Base):
    __tablename__ = 'b'

    id = Column(String, primary_key=True)

    a_instances = relationship(
        A,
        backref = backref(
            'b_instances',
            collection_class = attribute_mapped_collection('id'),
        ),
        secondary = a_b_association_table,
        collection_class = attribute_mapped_collection('id'),
    )

engine = create_engine('sqlite://')
Base.metadata.bind = engine
Base.metadata.create_all()

Session = sessionmaker(bind=engine)

session = Session()

a1, a2, a3 = A(id=1), A(id=2), A(id=3)
b1, b2, b3 = B(id='a'), B(id='b'), B(id='c')

session.add_all([a1, a2, a3, b1, b2, b3])
session.flush()

print(a1.b_instances)
print(b1.a_instances)
a1.b_instances[b1.id] = b1
a1.b_instances[b2.id] = b2
b1.a_instances[a1.id] = a1
b1.a_instances[a2.id] = a2
session.flush()
session.expunge_all()
a1 = session.query(A).get(1)
b1 = session.query(B).get('a')
print(a1.b_instances)
print(b1.a_instances) 
```

输出：

```
{}
{}
{u'a': <__main__.B object at 0x2816490>, u'b': <__main__.B object at 0x28b0350>}
{1: <__main__.A object at 0x28ac9d0>, 2: <__main__.A object at 0x28b0650>} 
```

# c++ - OpenCV 特征检测和匹配——绘图匹配时的段错误

> ID：13001158
> 
> 赞同：4
> 
> 时间：2012-10-21T19:06:27.700
> 
> 标签：c++, opencv, segmentation-fault, surf, object-detection

按照[这个示例](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/samples/cpp/matcher_simple.cpp)，
我正在尝试构建一个应用程序来识别视频中的对象。
我的程序由以下步骤组成（请参阅下面每个步骤的代码示例）：

1.  将要识别的物体的图像读入`cv::Mat`物体。
2.  检测对象中的关键点并计算描述符。
3.  阅读视频的每一帧，
4.  检测关键点并计算帧的描述符，
5.  将帧的描述符与对象的描述符匹配，
6.  绘制结果。

**问题：**第 6 步导致分段错误（参见下面的代码）。
**问题：**是什么原因造成的，我该如何解决？

谢谢！

**笔记：**

1.  该程序在段错误之前运行了几帧。崩溃发生在第 23 帧，这是视频中包含任何内容（即不是全黑）的第一帧。
2.  通过删除`drawMatches(...);`没有崩溃**的行。**
3.  在 Windows 7、OpenCV 2.4.2、MinGW 上运行。

**调试尝试：**

通过 gdb 运行程序会产生以下消息：

```
Program received signal SIGSEGV, Segmentation fault.
0x685585db in _fu156___ZNSs4_Rep20_S_empty_rep_storageE () from c:\opencv\build\install\bin\libopencv_features2d242.dll 
```

**第 1 步 - 读取对象的图像：**

```
Mat object;
object = imread(OBJECT_FILE, CV_LOAD_IMAGE_GRAYSCALE); 
```

**第 2 步 - 检测对象中的关键点并计算描述符：**

```
SurfFeatureDetector detector(500);
SurfDescriptorExtractor extractor;
vector<KeyPoint> keypoints_object;
Mat descriptors_object;
detector.detect(object , keypoints_object);
extractor.compute(object, keypoints_object, descriptors_object); 
```

**步骤 3-6：**

```
VideoCapture capture(VIDEO_FILE);
namedWindow("Output",0);
BFMatcher matcher(NORM_L2,true);
vector<KeyPoint> keypoints_frame;
vector<DMatch> matches;
Mat frame,
    output,
    descriptors_frame;

while (true)
{
    //step 3:
    capture >> frame;
    if(frame.empty())
    {
        break;
    }
    cvtColor(frame,frame,CV_RGB2GRAY);

    //step 4:
    detector.detect(frame, keypoints_frame);
    extractor.compute(frame, keypoints_frame, descriptors_frame);

    //step 5:
    matcher.match(descriptors_frame, descriptors_object, matches);

    //step 6:
    drawMatches(object, keypoints_object, frame, keypoints_frame, matches, output);
    imshow("Output", output);
    waitKey(1);
} 
```

**段错误之前的屏幕截图：** ![截屏](../Images/97a309ba4cc201716b7e5ca1ea92bfad.png)

**第 22 帧（全黑）：** ![第 22 帧](../Images/46bdc18c3aa37b11b3be7d2703a3afcf.png)

**第 23 帧（发生段错误）：** ![第 23 帧](../Images/3b6c131adbb3512201708e0328843cd2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:17:45.233

问题出在参数的顺序上`drawMatches`。
正确的顺序是：

```
drawMatches(frame, keypoints_frame, object, keypoints_object, matches, output); 
```

**解释：**

在第 5 步中，我使用`match`了对象的方法`matcher`：

```
matcher.match(descriptors_frame, descriptors_object, matches); 
```

这个方法的[签名](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/modules/features2d/include/opencv2/features2d/features2d.hpp#L1108)是

```
void match( const Mat& queryDescriptors, const Mat& trainDescriptors,
            CV_OUT vector<DMatch>& matches, const Mat& mask=Mat() ) const; 
```

这意味着包含**从****到 的**`matches`匹配项。 在我的例子中，列车描述符属于 ，查询描述符属于，因此包含**从**到**的**匹配项。 **`trainDescriptors` **`queryDescriptors`
`object``frame``matches`**`object` **`frame`********

 ******`drawMatches`的[签名](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/modules/features2d/include/opencv2/features2d/features2d.hpp#L1486)是

```
void drawMatches( const Mat& img1, const vector<KeyPoint>& keypoints1,
                  const Mat& img2, const vector<KeyPoint>& keypoints2,
                  const vector<DMatch>& matches1to2,
                  ... ); 
```

`drawMatches`使用**错误**的参数顺序调用时：

```
drawMatches(object, keypoints_object, frame, keypoints_frame, matches, output); 
```

该方法在不正确的图像中查找匹配的坐标，这可能会导致尝试访问“越界”像素；因此分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:02:58.527

您是否尝试过在调试器中运行您的编？

只是猜测，当没有可绘制的匹配项时，drawmatch 会出现段错误？尝试添加`if (!matches.empty())`之前`drawMatches`。顺便问一下，你确定`matches`在打电话之前是清空的`matcher.matches(...)`吗？如果不是，您应该在每次循环迭代时手动进行。******

# javascript - 光标结束时激活 gif

> ID：13001159
> 
> 赞同：3
> 
> 时间：2012-10-21T19:07:16.400
> 
> 标签：javascript, jquery, html, css, animated-gif

我正在建立一个星球大战粉丝网站。

我的导航菜单将是星球大战光剑。

我打算（当光标在光剑上时）让真正的光剑出来。当光标离开光剑时，它又向下移动。

我有一个 gif 可以做到这一点，但是当光标悬停在上面时，如何使它不活动然后活动？

如果上面的想法听起来不正确，你会建议我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:10:23.280

**不，您无法控制图像的动画。**

您将需要每个图像的两个版本，一个是动画 (.gif)，另一个不是 (.gif/.png/.jpg/etc)。

悬停时，您可以轻松地从一张图像更改为另一张图像。

例子：

```
$(function(){
  $('img').each(function(e){
    var src = $(e).attr('src');
    $(e).hover(function(){
      $(this).attr('src', src.replace('nonanimated.gif', 'animated.gif'));
    }, function(){
      $(this).attr('src', src);
    });
  });
}); 
```

参考[链接](https://stackoverflow.com/questions/5818003/stop-a-gif-animation-onload-on-mouseover-start-the-activation)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T13:01:37.803

就像 Parag Meshram 说的，但不需要用 jQuery 或 JavaScript 来做：

```
.foo {
  background: url(still.png) no-repeat 0 0;
}
.foo:hover {
  background-image: url(animation.gif);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:16:53.597

这可能有点矫枉过正，但我​​认为您可以使用 WebGL 控制 GIF。

这是一些 GIF 操作，这不是您要的，但也许是一些做自己的事情的灵感[http://www.clicktorelease.com/code/gif/](http://www.clicktorelease.com/code/gif/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T19:55:52.830

我有类似的情况，并找到了一个非常简单的解决方案。我对 JQuery 很陌生，所以我不确定这是否符合最佳实践，但它确实有效。

我使用了一个静态图像（在我的例子中，.png 用于透明度）并切换了 src 属性以指向 mouseenter 上的动画 .gif 并返回到 mouseleave 上的 .png。为了让您的光剑从单独的刀柄变为通电，我会做的与平时有所不同。尝试在 Photoshop 中从 .gif 中提取一帧，然后使用“保存为网络和设备”将其制作成静态图像。我推荐.png。在您的 HTML 标记中，使用该刀柄的静态图像作为图像的 src，还请务必给它一个 ID，例如本示例中的 saber。

现在进入 jquery 脚本。我将它链接到一个单独的文件中。对于一把军刀，它应该看起来像这样：

```
$(document).ready(function()
{

$("#saber").mouseenter(
    function()
    {
        $(this).attr("src", "img/stillframehilt.png");
    },
    function()
    {
        $(this).attr("src", "img/saberpowerup.gif");
    });
$("#saber").mouseleave(
    function()
    {
        $(this).attr("src", "img/saberpowerup.gif");
    },
    function()
    {
        $(this).attr("src", "img/stillframehilt.png");
    });

    }); 
```

请注意，在 mouseleave 上，我将 src 切换为“img/saberpowerdown.gif”。我认为与其让军刀在休眠状态下立即恢复到刀柄状态（任何《星球大战》极客[包括我自己]都会畏缩），不如拥有一个基本上与军刀转向相反的 .gif上。这可以通过颠倒动画帧的顺序来实现（确保可见层是正确的）。为了更好地衡量，我会确保何时让它不循环任何.gif，并在断电完成时单独添加一些额外的刀柄帧以确保它保持关闭。

此外，在军刀上添加 .click 以将 src 更改为断电，甚至是不同的动画可能会有所帮助，但这只是额外的天赋。对于每个额外的光剑，使用相同的代码，只需将 id 更改为以逻辑方式引用每个光剑，例如按颜色。

同样，就 jquery 而言，我不能声称这符合最佳实践（我只是一个 padawan），但是当我需要在 mouseenter 上激活 .gif 并在 .mouseleave 上激活时，此方法有效。愿原力与你同在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T13:04:10.800

您最好的选择是将手柄和剑实际拆分为两个不同的图形，然后使用 Javascript（作为背景属性）对剑进行动画处理。这样你就不会受到 GIF 文件格式的限制，但仍然有很多更小的文件。您需要创建一个与剑相同大小的 div 并将其设置为背景，然后将 background-position-x 设置为 -100% 并在悬停时重新设置动画，您可以使用 jQuery：

```
$('.sword').on('hover', function(event){
$(this).animate({
        'background-position-x': '0%',
    }, 100, 'linear');
});
$('.sword').off('hover', function(event){
$(this).animate({
        'background-position-x': '-100%',
    }, 100, 'linear');
}); 
```

（我在脑海中写下了这个，如果这不起作用，请检查 jQuery 文档）

# java - HtmlUnit：每个线程一个 WebClient - 它是线程安全的吗？

> ID：13001163
> 
> 赞同：9
> 
> 时间：2012-10-21T19:07:31.733
> 
> 标签：java, multithreading, thread-safety, htmlunit

我有很多线程。每个线程创建并使用它自己的 WebClient（HtmlUnit 框架）。没有一个线程使用来自其他线程的 WebClient 实例。它是线程安全的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T19:11:53.910

从[文档](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/WebClient.html)

> 注意：WebClient 实例不是线程安全的。它旨在从单个线程中使用。

只要每个线程创建自己的 WebClient，您就不会遇到任何问题。从你说的来看，你做的是对的。

# ruby-on-rails - 安装 Heroku Toolbelt 已损坏 Taps

> ID：13001166
> 
> 赞同：6
> 
> 时间：2012-10-21T19:07:51.823
> 
> 标签：ruby-on-rails, heroku, gem, taps, heroku-toolbelt

一段时间以来，我一直在愉快地使用 Heroku 和 Taps gems，并定期`heroku db:push`将我的数据库推向生产环境。

今天早上我注意到 Heroku gem 已被弃用的消息，已被 Heroku Toolbelt 取代。所以我卸载了 gem 并安装了 Heroku Toolbelt。

下次我去推送我的数据库时，我收到以下错误：

```
!    Taps Load Error: cannot load such file -- taps/operation
!    You may need to install or update the taps gem to use db commands.
!    On most systems this will be:
!    
!    sudo gem install taps 
```

Heroku 和 Taps 都已正确安装，但令人沮丧的是，我尝试按照说明（“安装或更新 taps gem 以使用 db 命令”）但没有成功。（重新）安装正常，但是当我尝试推送数据库时仍然出现上述错误。任何人都可以建议修复吗？我正在使用 rbenv。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T21:15:24.787

[好吧，我使用此处](http://johntwang.com/blog/2011/09/13/remove-heroku-toolkit/)的命令卸载了工具带：

```
rm -rf /usr/local/heroku
rm -rf /usr/bin/heroku 
```

然后从我的 .bash_profile 中删除以下内容

> ### 由 Heroku 工具带添加
> 
> 导出 PATH="/usr/local/heroku/bin:$PATH"

它再次起作用。

故事的寓意 - 避免使用 Heroku Toolbelt 并坚持使用宝石。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:24:34.217

你可以试试 Heroku 的 PG Transfers 插件吗，文档在页面本身。

```
https://github.com/ddollar/heroku-pg-transfer 
```

这似乎是 Heroku 现在推荐的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:16:46.623

您无需移除工具带即可将 gem 版本用于一次性情况，例如水龙头损坏：

```
% gem install heroku
% $(rbenv root)/shims/heroku version
heroku-gem/2.35.0 (x86_64-darwin12.2.0) ruby/1.9.3 
```

这是使用`rbenv`, 但是`rvm`，`chruby`或类似的应该是相似的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T17:57:08.983

好吧，[Heroku 建议](https://devcenter.heroku.com/articles/heroku-postgres-import-export) 使用[PG Backups 插件](https://devcenter.heroku.com/articles/pgbackups)。Taps+Heroku 的组合[给许多人带来了麻烦](https://github.com/heroku/heroku/issues/728)，部分原因是 Taps 旨在生成与数据库无关的转储，这并不容易。

缺点是您必须将转储上传到 S3 或其他东西。

# java - 从字符串创建 Swing 组件

> ID：13001170
> 
> 赞同：1
> 
> 时间：2012-10-21T19:08:24.267
> 
> 标签：java, swing

如何从引用组件名称的字符串动态创建 Swing 组件（例如 JPanel 或 JButton ）？

例如;

```
String c = "JPanel";

(c) com = new (c)(); // It must be equivalent JPanel com = new JPanel(); 
```

或类似的功能；

```
Object c = Object.createObjectFromString(c); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:11:14.957

可以使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)来完成：

```
Class<?> klazz = Class.forName("javax.swing.JPanel");
JPanel panel = (JPanel) klazz.newInstance(); 
```

请注意，您必须将完全限定的类名传递给该`forName()`方法，并且在某些时候（无论是作为类型参数`Class<?>`还是使用上述代码中的强制转换），您必须显式指定类你打算实例化。或者，如果您不关心实例的确切类型，您可以简单地执行以下操作：

```
Object obj = klazz.newInstance(); 
```

另外，我假设该类已经定义了一个无参数构造函数。如果不是这种情况，您必须先创建一个`Constructor`对象，然后再实例化新对象：

```
Class<?> klazz = Class.forName("javax.swing.JPanel");
Constructor<?> constructor = klazz.getDeclaredConstructor(/* parameter types */);
JPanel panel = (JPanel) constructor.newInstance(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:10:35.233

你可以使用反射：

```
// c is JPanel for instance
Sting componentClassName = "javax.swing." + c; 
JPanel panel = (JPanel)Class.forName(componentClassName).newInstance(); 
```

使用`Class.newInstance()`要求您正在创建的组件具有默认构造函数，但这由大多数（如果不是全部）标准 Swing 组件提供。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:17:49.620

请参阅此处[How to create an object from a string in java how to eval a string](https://stackoverflow.com/questions/1168931/how-to-create-an-object-from-a-string-in-java-how-to-eval-a-string)和[Creating an instance from string in java](https://stackoverflow.com/questions/4767088/creating-an-instance-from-string-in-java)。但是，如果您希望它在 1 行中进行评估，我也建议您编写自己的预处理器。这就是 C/C++ 预处理器所做的。

# matlab - matlab中两条曲线的交点

> ID：13001172
> 
> 赞同：0
> 
> 时间：2012-10-21T19:08:47.127
> 
> 标签：matlab

`pdf`我必须找到正态分布函数的两个交点。

我已经计算了曲线的所有点 (x,y)，`iy = pdf('normal', ix, mu, sd)`并将它们绘制在具有两个交点的屏幕上。
我已经尝试过`fzero`函数，但它不起作用，两条曲线的均值和标准偏差不同，因此数组的长度不同。
我尝试了最简单的逻辑二 for 循环，但它也不起作用。

**蛮力方法对我不起作用，**因为matlab 中的精度它不考虑例如 24.000 和 24.001，并且高斯的结果值在小数点后有 15 个整数，这使得 matlab 无法检查是否相等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T20:40:36.183

如果分析失败，仅跳转到数值方法。找到两个正态分布的交点是一个相当简单的代数问题，我现在懒得做，但是 Matlab 可以为我做：

```
>> syms x sig1 sig2 mu1 mu2;
>> solve(1/sig1/sqrt(2*pi) * exp(-1/2*((x-mu1)/sig1)^2) == ...
         1/sig2/sqrt(2*pi) * exp(-1/2*((x-mu2)/sig2)^2), x)

ans =

 +(mu2*sig1^2 - mu1*sig2^2 + sig1*sig2*(2*sig2^2*log(sig2/sig1) - 2*sig1^2*log(sig2/sig1) - 2*mu1*mu2 + mu1^2 + mu2^2)^(1/2))/(sig1^2 - sig2^2)
 -(mu1*sig2^2 - mu2*sig1^2 + sig1*sig2*(2*sig2^2*log(sig2/sig1) - 2*sig1^2*log(sig2/sig1) - 2*mu1*mu2 + mu1^2 + mu2^2)^(1/2))/(sig1^2 - sig2^2) 
```

其中`sig1, sig2`是第一和第二标准差，`mu1, mu2`分别是第一和第二均值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:38:10.577

如果您更喜欢数值方法而不是分析方法，您可以使用`fzero`和`normpdf`函数。

`x_intersect = fzero(@(x) normpdf(x, mu1, std1) - normpdf(x, mu2, std2), x0);`

由于正态分布表现良好，并且任何两个分布都必须相交，因此任何初始猜测`x0`都应该有效。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-21T19:12:08.357

试图改进答案，因为这是一个公认的答案（完全归功于**Eitan T**，他在此**[相关答案](https://stackoverflow.com/questions/16384516/show-the-intersection-of-two-curves)**中完美地解释了曲线的交点）

您必须手动找到交点 (px, py)：

```
idx = find(y1 - y2 < eps, 1); %// Index of coordinate in array
px = x(idx);
py = y1(idx); 
```

请记住，我们正在比较浮点表示中的两个数字，因此`y1 == y2`我们必须设置一个容差来代替。我选择了它作为 eps，但由你决定。

要围绕这个点画一个圆，你可以计算它的点然后绘制它们，但更好的方法是用一个放大的圆形标记绘制一个点（这个建议归功于 Jonas）：

```
plot(px, py, 'ro', 'MarkerSize', 18) 
```

这样，圆的尺寸不受坐标轴和绘图纵横比的影响。

# apache - .htaccess 301 从旧域重定向到新域，而页面结构和 url 相同

> ID：13001173
> 
> 赞同：13
> 
> 时间：2012-10-21T19:08:55.713
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, seo

我想为我的所有网址将[http://olddomain.com](http://olddomain.com)重定向到 [http://newdomain.com](http://newdomain.com) ..保持新域上的页面相同。我的意思是如下网址

```
http://olddomain.com/home/category/page.html
http://olddomain.com/home/mybook/page2.html
http://olddomain.com/login

should be 301 redirect to the new newdomain but same pages, like below

http://newdomain.com/home/category/page.html
http://newdomain.com/home/mybook/page2.html
http://newdomain.com/login 
```

这就是我目前在我的 .htaccess 中所拥有的

```
RewriteEngine on
RewriteCond $1 !^(index\.php|img|public|robots\.txt) [NC]
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

请帮助我干净利落地做这件事，并详细解释事情，因为我是这方面的新手。

也有人知道搜索引擎可能需要多长时间才能摆脱我的旧域的引用？我的意思是搜索查询中的旧域 url 应该被新域 url 替换……旧域应该远离搜索引擎。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-21T19:17:20.767

在 .htaccess 的开头添加以下代码 -

```
 RewriteEngine On

    # Redirect Entire Site to New Domain
    RewriteCond %{HTTP_HOST} ^olddomain.com$ [OR]
    RewriteCond %{HTTP_HOST} ^another.olddomain.com$ [NC]
    RewriteRule ^(.*)$ http://newdomain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-09T23:44:06.937

简单得多：

```
Redirect 301 / http://newdomain.com/ 
```

用那一行替换您的 .htaccess 文件，或者如果您有权访问它，请将其放入旧域的 apache conf 文件中（我将其放在 DocumentRoot 指令之后）。

有关详细信息，请参阅[使用 mod_rewrite 重定向和重新映射](https://httpd.apache.org/docs/current/rewrite/remapping.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-14T15:16:18.717

我通常在旧网站的.htaccess中添加以下代码

```
#Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)$ http://newdomain.com/$1 [R=301,L] 
```

上面的代码会将所有链接重定向到新域，您无需执行任何操作，每个链接和图像都会重定向到新域链接。除此之外，我们必须在您的网站移动时通知 Google

如果您已将网站移至新域，则可以使用更改地址工具向 Google 告知您的新网址。我们将更新索引以反映您的新网址。更改将在 180 天内有效，届时我们将抓取您的新网址中的网页并将其编入索引。这是此[https://support.google.com/webmasters/answer/83106?hl=en的链接](https://support.google.com/webmasters/answer/83106?hl=en)

我已经为 2 到 3 个站点完成了此操作，也没有丢失 seo。它确实有效。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T17:51:50.893

试图做

```
LoadModule rewrite_module modules/mod_rewrite.so
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{HTTP_HOST} ^localhost$ [NC]
  RewriteRule ^(.*)$ http://newdomain.com/$1 [R=301,L]
</IfModule> 
```

但没有按应有的方式工作，只是试图将我的 localhost 指向 newdomain.com。

但是当我点击 localhost 时它仍然没有指向。

# android - NFC：如何告诉我的应用打开 vCard 而不是联系人应用？

> ID：13001176
> 
> 赞同：2
> 
> 时间：2012-10-21T19:09:49.543
> 
> 标签：android, nfc, vcf-vcard

我一直在使用 NFC 玩得很好，并且对结果非常满意。

我现在的问题是如何处理写在标签上的 vCard？

我在清单中设置了这些行：

```
 <intent-filter>
        <action android:name="android.nfc.action.NDEF_DISCOVERED" />

        <data android:mimeType="text/vcard" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter> 
```

但似乎没用：每次我扫描标签时，联系人应用程序都会打开。

非常感谢任何链接或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:25:32.337

您应该过滤**text/vcard***和* text / **x-vcard**：

 ****```
<intent-filter>
  <action android:name="android.nfc.action.NDEF_DISCOVERED" />
  <category android:name="android.intent.category.DEFAULT" />
  <data android:mimeType="text/vcard" />
  <data android:mimeType="text/x-vcard" />
</intent-filter> 
```

我已经看到两者都用于 NFC 标签。根据[Wikipedia](http://en.wikipedia.org/wiki/Vcard#Media_type)，不推荐使用 text/x-vcard 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:49:32.613

这是答案：

vCard 的 mimeType 实际上是：

**文本/x-vcard**

问题神奇地解决了。****

# django - 如何在 django-admin-tools 仪表板上添加自定义菜单项

> ID：13001181
> 
> 赞同：5
> 
> 时间：2012-10-21T19:10:15.767
> 
> 标签：django, django-admin, django-admin-tools

我想在 django-admin-tools 上添加一个自定义链接到 ModelList 组。我试过了，但它没有显示链接。我错过了什么？

```
class CustomIndexDashboard(Dashboard):
    columns = 2

    def __init__(self, **kwargs):
        Dashboard.__init__(self, **kwargs)

        grupo = modules.ModelList('Matrículas', 
           [ 'core.models.Aluno',
             'core.models.Matricula',
             'core.models.ModuloAtivo',
           ])

        item = items.MenuItem(u"Orçamentos", "%s%s" % (reverse('admin:core_matricula_changelist'), "?status__exact=O" ) )

        grupo.children += [ item ] 

        self.children += [ grupo, 

          modules.ModelList('Controle de Presença', [ 
                                          'core.models.Aula',
                                          'core.models.Pauta',
                                          'core.models.Presenca',
                                          'core.models.PautaModulo',                              
                                          ])
        ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T06:55:14.647

我遇到了同样的问题并尝试`items.MenuItem`像您一样使用，但出现错误：

> “MenuItem”对象没有属性“id”。

然后我得出了以下解决方案：
即使我们只需要一个链接，我们也应该创建`LinkList`

```
link = modules.LinkList(
            title='', # the title is empty for better looking
            children=[
                [_(u'My link'), reverse('admin:custom_view')],
            ]
        ) 
```

这是我们的`ModelList`：

```
models = modules.ModelList(
            models=(
                'app.models.Model1',
                'app.models.Model2',
                )
            ) 
```

还有`Group`, 我们将链接与模型联系起来：

```
a_group = modules.Group(
            title=u'My group',
            display="stacked",
            children=[
                models,
                link
            ]
        ) 
```

然后只需`a_group`在您想要的任何地方使用。

# asp.net-mvc - MVC4 捆绑通配符 - * 与 {version}

> ID：13001182
> 
> 赞同：6
> 
> 时间：2012-10-21T19:10:21.600
> 
> 标签：asp.net-mvc, asp.net-optimization, bundling-and-minification

我理解并完全欣赏新的捆绑通配符 {version} 正则表达式，因为即使在更新等之后，它也会继续获取您的脚本和样式库。问题是我无法让它有效地工作。

我以前使用以下符号来获取我的 jQuery 脚本：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
            "~/Scripts/jquery-1.*")); 
```

它会拾取与星号通配符匹配的所有文件。

但是当我尝试以下操作时：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js")); 
```

我注意到 jQuery 文件没有写入 _Layout.cshtml 页面。

注意 - 我确实为这两个示例使用了以下 HTML 代码：

```
@Scripts.Render("~/bundles/jquery") 
```

当我使用上面的第一个示例 (" * ") 表示法时，以下内容将写入页面：

```
<script src="/Scripts/jquery-1.7.2.js" type="text/javascript"></script> 
```

然而，当我使用“{version}”符号时，只有一个空白空间应该写入库。这既适用于 jquery 文件，也适用于相关的 CSS 样式表。

无论我是为 DEBUG 还是 RELEASE 模式编译都没有关系。结果是一样的。显然在发布模式下，当使用“*”符号时，我会得到优化的版本：

```
<script src="/bundles/jquery?v=VUv2YOeuOgHad-FHZ-vGMDu9wN1j9VZGifI1SBUUSMs1" type="text/javascript"></script> 
```

因此，作为所有开发人员的完美主义者，我非常希望看到 {version} 符号对我有用，因为我会及时了解新版本并希望对我的部署进行这种控制。

非常感谢对我可能做错的任何见解。

在此先感谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T16:52:25.590

尝试更新 Microsoft.AspNet.Web.Optimization 和相关的 NuGet 包：Microsoft.Web.Infrastructure、WebGrease、Antlr。不仅要检查“nuget.org”选项卡，还要检查“全部”。

# c++ - 如何在 C++ 中从文件中读取小端整数？

> ID：13001183
> 
> 赞同：15
> 
> 时间：2012-10-21T19:10:21.223
> 
> 标签：c++, c, binary, binaryfiles

假设我有一个二进制文件；它包含正二进制数，但以**小端**写成 32 位整数

我如何阅读这个文件？我现在有这个。

```
int main() {
    FILE * fp;
    char buffer[4];
    int num = 0;
    fp=fopen("file.txt","rb");
    while ( fread(&buffer, 1, 4,fp) != 0) {

        // I think buffer should be 32 bit integer I read,
        // how can I let num equal to 32 bit little endian integer?
    }
    // Say I just want to get the sum of all these binary little endian integers,
    // is there an another way to make read and get sum faster since it's all 
    // binary, shouldnt it be faster if i just add in binary? not sure..
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-21T19:36:09.240

这是一种适用于大端或小端架构的方法：

```
int main() {
    unsigned char bytes[4];
    int sum = 0;
    FILE *fp=fopen("file.txt","rb");
    while ( fread(bytes, 4, 1,fp) != 0) {
        sum += bytes[0] | (bytes[1]<<8) | (bytes[2]<<16) | (bytes[3]<<24);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-21T19:46:57.887

如果您使用的是 linux，您应该看[这里](http://www.kernel.org/doc/man-pages/online/pages/man3/endian.3.html);-)

它是关于有用的功能，例如**le32toh**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T19:33:47.697

来自[CodeGuru](http://forums.codeguru.com/showthread.php?292902-C-General-How-do-I-convert-between-big-endian-and-little-endian-values)：

```
inline void endian_swap(unsigned int& x)
{
    x = (x>>24) | 
        ((x<<8) & 0x00FF0000) |
        ((x>>8) & 0x0000FF00) |
        (x<<24);
} 
```

因此，您可以直接读取`unsigned int`然后调用它。

```
while ( fread(&num, 1, 4,fp) != 0) {
    endian_swap(num); 
    // conversion done; then use num
} 
```

# workflow - 为什么要使用工作流系统，我有哪些选择？

> ID：13001185
> 
> 赞同：3
> 
> 时间：2012-10-21T19:10:24.913
> 
> 标签：workflow, business-process-management

我正在阅读以下帖子： [为什么使用 Windows 工作流？](https://stackoverflow.com/questions/513657/why-use-windows-workflow)

现在 wf 概念看起来很有前途的技术可以降低公司在业务流程实施方面的成本。MS WF 看起来并没有快速实施的一切。还有哪些其他用于快速实施的 wf/bpm 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:44:19.103

在过去的 10 年里，我一直在使用工作流引擎/系统（OpenText、K2.net、Metastorm、MS WorkFlow Foundation，...），我可以说 wf 技术非常有用，但它并不适合解决所有类型的问题。

基本上它是解决面向过程的任务。你会问自己这是什么意思！？井过程是具有开始、持续时间和结束的任何实体。如果您看，典型的公司正在建立流程。显然，在这样的系统中存储一些最终报告不是目标......当这些任务需要以受控方式处理或需要新的处理路线时，电源就会出现。经典的实现需要开发人员编写额外的代码，好的 wf 系统可以让您在没有代码行的情况下在一秒钟内实现路由更改，并且流程版本控制不是问题。这只是其中一个好处。

您应该将 wf 系统视为快速流程开发、监控、优化和版本控制的平台。它应该为您提供 BPM 生命周期所需的所有工具。在这里你可以找到我在说什么：[http ://en.wikipedia.org/wiki/Business_process_management](http://en.wikipedia.org/wiki/Business_process_management)

在我的职业生涯中，我开发了一个 wf 引擎和一个完全基于 MS .net 技术的 wf 系统。如果您对详细信息感兴趣，请访问我的网站： [http](http://www.gp-solutions.si/business/Product.aspx?s=pro&id=1&cat=2) ://www.gp-solutions.si/business/Product.aspx?s=pro&id=1&cat=2使用此系统，您可以开发所有表格的新流程，监控、安全、文件……在不到 10 分钟内。你不能在传统的开发方式中做到这一点。节省时间和金钱是这里的游戏名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T16:34:28.910

如果您正在寻找快速 BPM 实施的商业替代方案，我过去曾使用过两个基于 .NET 的平台 - K2.net 和 PNMSoft。我个人喜欢 PNMSoft ( [http://www.pnmsoft.com/](http://www.pnmsoft.com/) )，因为它是原生的 .NET，它支持 WF 和其他技术，并且非常快速且易于使用。

如果您正在寻找开源替代品，有一些基于 .NET 的替代品，例如 Bonita ( [http://sourceforge.net/projects/bonita/](http://sourceforge.net/projects/bonita/) )，但不要指望它会如此快速和简单......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-04T07:33:30.937

如今，在方便的许可模型下，有几种开源 BPMS。

例如 Eclipse Process Manager “Stardust” ( [http://www.eclipse.org/stardust/](http://www.eclipse.org/stardust/) ) 是一个全面而成熟的 Java 开源 BPMS。它的商业版本用于不同行业的多种产品，还与 .NET 结合使用。

*   基于浏览器或基于 Eclipse 的流程建模器
*   Spring或EJB模式的流程引擎，例如Tomcat
*   Web 服务和 Java API（SOAP、REST）
*   用于工作流执行、业务控制中心和管理的 OOTB 门户
*   用户界面混搭功能可在工作流程步骤中包含任意 UI 技术
*   嵌入式 DMS
*   强大的ootb系统集成能力（JMS、WS、Camel、...）
*   亚马逊网络服务星尘图像可用 ( [http://wiki.eclipse.org/Stardust/Knowledge_Base/Getting_Started/RTE_on_AWS](http://wiki.eclipse.org/Stardust/Knowledge_Base/Getting_Started/RTE_on_AWS) )
*   提供商业支持和 SaaS 按需产品
*   适用于例如以人为中心的工作流程、ETL、低延迟和大容量消息处理、以文档为中心的工作流程和文档管理，...

此致

抢

# java - JAVA - 正则表达式：未封闭的字符类

> ID：13001196
> 
> 赞同：0
> 
> 时间：2012-10-21T19:11:23.570
> 
> 标签：java, regex

以下是抛出异常：

```
Pattern.matches(""+input.charAt(i),"\\s"); 
```

* * *

```
java.util.regex.PatternSyntaxException: 
Unclosed character class near index 0. 
```

我不明白为什么。我匹配的文本是否也需要转义字符？

[工作区的屏幕截图](http://i.stack.imgur.com/JIqTy.png)以防万一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:15:07.607

您以错误的顺序获取参数（来自[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#matches%28java.lang.String,%20java.lang.CharSequence%29)）

```
Pattern.matches(String regex, CharSequence input) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:15:44.060

您使用它的方式似乎是错误的。你应该做

```
 Pattern p = Pattern.compile("[ \\t\\n]");
 Matcher m = p.matcher(""+input.charAt(i));
 boolean b = m.matches(); 
```

**[从参考](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:14:15.767

空格有一个特殊的类。您的代码可以简化为：

```
Pattern.matches("\\s", <your_input>); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T19:19:00.383

我想应该是

```
Pattern.matches("\\s",String.valueOf(input.charAt(i)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T19:19:00.833

最好这样拆开......

```
Pattern pattern = Pattern.compile("\\s");

Matcher matcher = pattern.matcher("Your_Source_String"); 
```

# types - withtype fails with mlton and succeeds with smlnj

> ID：13001197
> 
> 赞同：0
> 
> 时间：2012-10-21T19:11:25.060
> 
> 标签：types, recursion, sml, smlnj

I am writing an application where I want to define many types in the withtype clause of a datatype declaration. The following code snippet demonstrates it:

```
datatype ta = A
withtype tb = int
     and tc = tb 
```

**mlton** fails to compile this code, although **smlnj** succeeds.

```
$ mlton -stop o test.sml
Error: test.sml 3.15.
  Undefined type tb.
compilation aborted: parseAndElaborate reported errors 
```

I am using mlton-20100608 and smlnj-110.71.

Is this a bug in mlton?

I do not know how to proceed without this sort of declaration: a set of mutually recursive datatypes and types.

The idea comes from the abstract syntax tree types proposed by Andrew Appel for the Tiger language in his book [*Modern Compiler Implementation in ML*](http://www.cs.princeton.edu/~appel/modern/ml/), page 98, in file [`absyn.sml`](http://www.cs.princeton.edu/~appel/modern/ml/chap4/absyn.sml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:56:18.930

根据 mlton 社区的 Andreas Rossberg 的说法，这不是 mlton 的错误，而是与 SML/NJ 部分标准的（已知）偏差。根据规范，后面的类型缩写`withtype`不是**相互**递归的，只有前面的数据类型。该示例被重写为

```
datatype ta = A
type tb = int
and tc = tb 
```

也就是说，MLton 正确地标记了这一点。

总是可以在右侧扩展其他类型的构造函数，因此没有真正的限制。但是，必须这样做可能会很麻烦。

# jquery - 使用ajax提交表单输入以停止页面刷新

> ID：13001200
> 
> 赞同：0
> 
> 时间：2012-10-21T19:11:52.353
> 
> 标签：jquery, ajax, forms, refresh

我希望使用表单将数据输入到我使用的电子商务购物车，但希望在用户单击表单中的“添加到购物车”按钮后不刷新页面。我发现了许多使用 jquery 提交没有页面刷新的表单的示例，例如：使用 jQuery [提交没有页面刷新的表单](https://stackoverflow.com/questions/10057840/submit-a-form-without-page-refresh-using-jquery) 但是尽管尝试了一些不同的解决方案，但仍然无法使其正常工作。

我的表格：

```
<form method="POST" id="formname">
<input name="userid" id="userid" value="00000000" type="hidden">
<input name="product" id="product" value="product name" type="hidden">
<input name="price" id="price" value="1.00" type="hidden">
<input name="qty" id="qty" value="1" type="hidden">
<input name="nocart" id="nocart" value="1" type="hidden">
<input name="units" id="units" value="1" type="hidden">
<input name="scode" id="scode" value="xxxx" type="hidden">
<input name="hash" id="hash" value="xxxxxxxx" type="hidden">
<input name="return" id="return" value="http://www.returnaddresshere" type="hidden">
<input type="submit" value="Add to cart">
</form> 
```

和脚本：

```
<script src="jquerylocation.js"></script>
<script>
$(document).ready(function(){
$("form#formname").submit(function(event) {
    event.preventDefault();
    var userid = $("#userid").val();
    var product = $("#product").val();
    var price = $("#price").val();
    var qty = $("#qty").val();
    var nocart = $("#nocart").val();
    var units = $("#units").val();
    var scode = $("#scode").val();
    var hash = $("#hash").val();
    var return = $("#return").val();

    $.ajax({
        type: "POST",
        url: "http://ww#.aitsafe.com/cf/add.cfm",
        data: "userid=" + userid + "&product=" + product "price=" + price + "&qty=" + qty "nocart=" + nocart + "&units=" + units "scode=" + scode + "&hash=" + hash + "&return=" + return,
        success: function(){alert('order added to cart');}
    });
});
});
</script> 
```

我不确定问题出在哪里，因为我对 javascript 和 jquery 很陌生。我见过的所有示例都使用 php 来处理来自表单的输入；电子商务使用冷融合这一事实是否需要不同的方法？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:15:07.777

`url: "http://ww#.aitsafe.com/cf/add.cfm",`是这里的罪魁祸首
您不能将 Ajax 请求发送到部署应用程序的另一个域之外的另一个域。这是因为在网络浏览器中实施了同源[策略](http://en.wikipedia.org/wiki/Same_origin_policy)——一种安全措施。

# .htaccess - 如何将目录重定向到 htacess 中的父目录

> ID：13001203
> 
> 赞同：1
> 
> 时间：2012-10-21T19:12:09.433
> 
> 标签：.htaccess, mod-rewrite

我有这个网站`http://www.foo.com/bar/index.php`。我最近将我的网站`foo.com/bar/index.php`从`foo.com/index.php`

在我的 htaccess 文件中，我如何编写条件，以便如果有任何请求来自让我们说`.foo.com/bar/somedirectory/somefile`REDIRECT 到 `foo.com/somedirectory/somefile`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:21:18.033

在您的文件中添加以下`foo.com/bar/.htaccess`内容：

```
RewriteEngine On
RewriteRule ^(.*)?$ http://%{HTTP_HOST}/$1 [R=301,QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:51:52.443

在文档根目录的 htaccess 文件中，最好在任何执行路由的规则（`index.php`例如，到 ）上方，添加以下规则：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/bar/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1 -d
RewriteRule ^/?bar/(.*)$ /$1 [L] 
```

如果您想从外部重定向客户端（更改浏览器地址栏中的 URL），请`R`在规则的括号中添加标志：`[L,R=301]`.

# jquery - jQuery total amount of elements in an array

> ID：13001205
> 
> 赞同：2
> 
> 时间：2012-10-21T19:12:29.683
> 
> 标签：jquery, arrays, indexing

Seems like a simple thing but I cant find anything on it!

```
var cookie = [1,2,3],
    total  = cookie.magicMethodThatICantFindThatTotalsTheElements();

total = 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:13:14.170

Property [`length`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/length) specifies the number of elements in array:

```
var total = cookie.length; 
```

# ruby-on-rails - undefined '+' method for selected count on rails

> ID：13001206
> 
> 赞同：0
> 
> 时间：2012-10-21T19:12:30.573
> 
> 标签：ruby-on-rails, ruby, activerecord

```
poll_answers = PollAnswer.joins(:poll_answer_variant => {:poll_question => :poll}).select("count(poll_answers.user_id) as submits_count, poll_answers.poll_question_id").where("polls.id = 105").group("poll_questions.id, poll_answer_variants.id")

grouped = poll_answers.group_by(&:poll_question_id)

grouped[81].inject{|sum, answer_variant| sum += answer_variant.submits_count} 
```

after what i get:

```
NoMethodError: undefined method `+' for #<PollAnswer poll_question_id: 81, poll_answer_variant_id: 9>
from /Users/s/.rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.7/lib/active_model/attribute_methods.rb:407:in `method_missing'
from /Users/s/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.7/lib/active_record/attribute_methods.rb:149:in `method_missing'
from (irb):926:in `block in irb_binding'
from (irb):926:in `each'
from (irb):926:in `inject'
from (irb):926
from /Users/s/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands/console.rb:47:in `start'
from /Users/s/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands/console.rb:8:in `start'
from /Users/s/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

It must be because of my virtual select count is not described like a model attribute? How can i fix that? thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:19:53.423

[来自注入](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)的文档：“如果您没有明确指定备忘录的初始值，则使用集合的第一个元素作为备忘录的初始值。” 所以第一次通过循环，sum 的值是一个 PollAnswer 对象。您需要初始化总和：

```
grouped[81].inject(0){|sum, answer_variant| sum += answer_variant.submits_count} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:22:19.147

当您`Enumerable#inject`不带参数使用时，您的块将在第一次迭代时接收前两个元素，然后是前一次迭代的结果和第三个元素，等等。

你可以传递一个参数来`#inject`告诉他用你选择的值和第一个元素调用你的块，然后是结果和第二个，等等。

在您的情况下（请注意我使用`+`而不是`+=`）：

```
grouped[81].inject(0) do |sum, answer_variant|
  sum + answer_variant.submits_count
end 
```

有关[如何](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)使用`Enumerable#inject`.

# c# - 检测 WinRT 和 Windows 8 之间的差异

> ID：13001208
> 
> 赞同：3
> 
> 时间：2012-10-21T19:12:45.900
> 
> 标签：c#, windows-8, windows-runtime

对于统计跟踪，我希望能够判断应用程序是在 Windows RT 还是 Windows Pro 上运行。

该线程说无法获取系统版本信息：

[在 WinRT Metro App C# 中获取操作系统版本](https://stackoverflow.com/questions/10125324/get-os-version-in-winrt-metro-app-c-sharp)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:45:08.293

您可以做的一件事是转到 Visual Studio 中的配置管理器，而不是默认的任何 CPU 配置 - 创建单独的 ARM/x86/x64 配置，并在项目属性/条件编译符号中定义一个对于 ARM 与 x86 不同的符号/x64 配置。然后，您可以使用 #if #else #endif 预处理器指令在代码中对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:45:38.980

检测处理器的架构——如果 x86/x64 不是 RT。如果是ARM，那就是RT。

使用这里的方法[WinRT 替换 System.Environment.TickCount](https://stackoverflow.com/questions/10369346/winrt-replacement-of-system-environment-tickcount)

但不是滴答计数而是寻找相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T18:07:13.583

如果您想要实际的处理器信息而不创建多个二进制文件，请查看我写的这个帮助程序类[https://github.com/AttackPattern/CSharpAnalytics/blob/master/Source/CSharpAnalytics/SystemInfo/WindowsStoreSystemInfo.cs](https://github.com/AttackPattern/CSharpAnalytics/blob/master/Source/CSharpAnalytics/SystemInfo/WindowsStoreSystemInfo.cs)

然后你可以写：

```
var cpu = WindowsStoreSystemInfo.GetProcessorArchitecture(); 
```

# facebook - Facebook comments plugin not publishing comments

> ID：13001209
> 
> 赞同：0
> 
> 时间：2012-10-21T19:12:57.353
> 
> 标签：facebook, url, comments, publish

I have added a comments box on my page: [http://metallica-gr.net/news/welcome/welcome.html](http://metallica-gr.net/news/welcome/welcome.html)

But when I add a comment even with Post to Facebook checked, that comment is not showing on facebook. Sometimes it worked when I unchecked and rechecked the box. Is it bug or am I doing something wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:29:46.560

您的源代码显示您有多个`fb-root`div 标签并且没有应用 ID。

你的代码：

```
<div id="fb-root"></div>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/el_GR/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

删除一个`fb-root`div标签，然后创建一个新的fb应用程序，获取它的应用程序id并将其附加到连接url，即`//connect.facebook.net/el_GR/all.js#xfbml=1`

最终代码应如下所示：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/el_GR/all.js#xfbml=1&appId=<YOUR-APP-ID>";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

另外为什么不使用 HTML5 代码作为插件？

```
<div class="fb-comments" data-href="{YOUR_SITE_URL}" data-num-posts="2" data-width="470"></div> 
```

而且您的网站缺少一些重要的 OG 元标记，它们是、 、 和`og:title`（`og:url`可选`og:description`用于审核评论）。`og:type``fb:app_id`

此外，您引用的图像`og:image`在两个维度上都应至少为 200 像素。纠正它，它应该工作。

例如：

```
<meta property="og:title" content="Metallica-gr" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://metallica-gr.net/news/welcome/welcome.html" />
<meta property="og:image" content="{IMAGE_URL}" />
<meta property="og:description" content="{YOUR_SITE_DESCRIPTION}" />
<meta property="fb:app_id" content="{YOUR_APPLICATION_ID}"/> 
```

不要忘记在更改后对 url 进行[lint](http://developers.facebook.com/tools/debug)，以便 fb 服务器缓存新的更新。

让我知道它是否有效。

# php - UTF-8 Charset problems

> ID：13001210
> 
> 赞同：0
> 
> 时间：2012-10-21T19:12:58.040
> 
> 标签：php, mysql, utf-8

> **Possible Duplicate:**
> [UTF-8 all the way through](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

I'm trying to insert special characters (like é etc.) in a MySQL database but when I insert through a query, in the database it appears as: "Ã©". When I insert the query directly in Phpmyadmin, it works as it should. I have already set the collection charset to `utf8_unicode_ci`. I have this in my HTML:

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

How can I fix this? (I already googled it, but I only found the collection things, that won't work..)

(jQuery because I'm sending it with a $.POST)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:17:47.903

确保与数据库的连接也使用此字符集：

```
$conn = mysql_connect($server, $username, $password);
mysql_set_charset("UTF8", $conn); 
```

看到这个答案：[答案](https://stackoverflow.com/questions/4623733/utf-8-problems-php-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:16:27.810

您的数据库连接是使用 utf8 吗？

初始化数据库连接时尝试运行此 sql：

```
SET NAMES 'utf8'; 
```

我建议你也通读[一下](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:17:54.747

试着做

```
mysqli_query('SET NAMES utf8'); 
```

连接数据库后。
根据[手册](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)，SET NAMES 表示客户端将使用什么字符集向服务器发送 SQL 语句。因此，SET NAMES 'utf8' 告诉服务器将来来自客户端的传入消息将采用 utf8 编码。它还指定服务器用于将结果发送回客户端的字符集。

# ruby-on-rails - Rspec for cancan

> ID：13001211
> 
> 赞同：2
> 
> 时间：2012-10-21T19:13:03.207
> 
> 标签：ruby-on-rails, rspec, cancan

I am not sure where I'll write test cases for our app, if i am using cacncan.

This should be in model or controller section.

In my case:

a user can delete or not a object. To handle this case I used cancan and I think this code should be in model not in controller and how do I test this using rspec.

Please provide me a better advise.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:17:30.210

我会推荐以下方法：

1.  为 cancan 的能力类编写单元测试，以确保您的角色逻辑良好。
2.  根据您的应用程序的逻辑，为每个人可以/不能访问该控制器的场景编写控制器测试。
3.  编写一些实际命中页面的验收/集成测试，以确保授权端到端工作。在这里，您不必像在第 1 步和第 2 步中那样彻底。您可以在此处测试“晴天”场景，您可以在其中以该级别的用户身份执行操作。您可能希望围绕应用程序的关键部分添加一些测试，在这些部分您以错误级别的用户登录并尝试执行未经授权的操作。

# python - 在 Python 中从文件中读取 n 个测试用例

> ID：13001212
> 
> 赞同：0
> 
> 时间：2012-10-21T19:13:12.267
> 
> 标签：python, python-2.7

我一直在尝试使用 Python 来解决一些示例编程竞赛问题，但我一直被文件阅读所困扰。

我正在从标准输入读取，第一行是随后的测试用例数，随后的每一行都包含我需要处理的两个整数。例如

```
3
4 -10
0 5
6 20
2
0 -1
20 10
etc... 
```

我找到了一个看起来像这样的 C++ 解决方案：

```
int main()
{
 int runs,a,b ;
 cin >> runs ;
 while(runs--)
 {
  cin >> a >> b ;
  long long ret = solve(a,b) ;
  cout << ret << endl ;
 }
 return 0 ;
} 
```

我在 Python 中提出的最接近的是：

```
t = int(raw_input())
answer = 0
while t :
    n, m = map(int, raw_input().split())
    answer = solve(n,m)
print answer 
```

我在 Stack Overflow 上看到过类似的问题，但我仍然很难用 Python 的方式来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:19:13.257

```
3
4 -10
0 5
6 20
2
0 -1
20 10 
```

你会这样做。

```
num_of_testcases = int(raw_input()) # this corresponds to 3 and 2
for each in range(number_of_testcases):
    x, y = map(int, raw_input().split()) # this would give the pair of numbers 
```

在比赛中，通常，您将拥有测试用例的总数。你在这里没有提到它。它是预先采取的

```
total_test_cases = int(raw_input()) 
```

然后你迭代上面的输入收集例程`total_test_cases`如果总的测试用例不存在，那么你可以在 True 时迭代，然后在 EOF 处取消。

```
for tc in range(total_test_cases):
   num_of_testcases = int(raw_input()) # this corresponds to 3 and 2
   for each in range(number_of_testcases):
       x, y = map(int, raw_input().split()) # this would give the pair of numbers 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T21:32:11.647

试试这个：

```
import sys
for l in sys.stdin.readlines()[1:]:
    a,b = map(int,l.split())
    #now process your test cases 
```

同样根据您的输入文件描述，应该只有一组测试用例。像这样：

```
3
4 -10
0 5
4 20 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:34:58.253

如果你不想使用 raw_input 你可以使用 fileinput 代替：

```
import fileinput

input = fileinput.input()
for line in input:
    for j in range(int(line)):
        solve(*[int(i) for i in input.next().split()]) 
```

或使用 sys.stdin

```
import sys

for line in sys.stdin:
    for j in range(int(line)):
        solve(*[int(i) for i in sys.stdin.next().split()]) 
```

# git - How do I recover a repo after a Github for Windows crash?

> ID：13001214
> 
> 赞同：3
> 
> 时间：2012-10-21T19:13:19.793
> 
> 标签：git, github, github-for-windows

Github for Windows just bombed when I tried making a commit and now git (command line) is telling me every file is new. I've still got a .get folder which is 53mb in size. I'd made about 60 to 100 commits previous to this.

How can I recover my working copy without losing any history or changes?

Git status says:

> On branch master
> 
> Initial commit
> 
> Changes to be committed:
> (use "git rm --cached ..." to unstage)
> 
> new file: .gitattributes
> new file: .gitignore
> ... (1620 more files)
> 
> Changes not staged for commit:
> (use "git add ..." to update what will be committed)
> (use "git checkout -- ..." to discard changes in working directory)
> 
> modified: Src/Foo/Bar/Index.cshtml
> 
> Untracked files:
> (use "git add ..." to include in what will be committed)

The Posh Git command prompt looks like this

> C:\Projects\Foo [master +1623 ~0 -0 | +0 ~1 -0]>

The output from `git log` is as follows

> C:\Projects\Foo [master +1623 ~0 -0 | +1 ~1 -0 !]> git log
> fatal: bad default revision 'HEAD'

**UPDATE**

I just ran "Verify Database" from the Git GUI and it came back with the following:

> dangling tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904 dangling commit 30855e0deee8600f10733e6760db54fee2570a38 dangling commit cd8bc69ad56ca5c4d51d0d5028525698158cf3ec dangling commit c934f9823d907cd69c5e08a0159b9de4dfe3da35 dangling commit f958caca247978db978b70460276b5da7582bb06 notice: HEAD points to an unborn branch (master) notice: No default references

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:19:38.063

好的，首先，我复制了我的工作副本，所以我总是有一个后备位置。接下来我跑了`git fsck`，它给出了以下输出。

```
> dangling tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904 dangling commit
> 30855e0deee8600f10733e6760db54fee2570a38 dangling commit
> cd8bc69ad56ca5c4d51d0d5028525698158cf3ec dangling commit
> c934f9823d907cd69c5e08a0159b9de4dfe3da35 dangling commit
> f958caca247978db978b70460276b5da7582bb06 notice: HEAD points to an
> unborn branch (master) notice: No default references 
```

从这里，我用

```
git checkout <some-hash> 
```

处理上面悬空提交的哈希值。事实证明，最后一个悬空提交是我最近的提交，所以`git checkout c934f9823d907cd69c5e08a0159b9de4dfe3da35`让我回到崩溃前的工作副本。

从这里开始`git checkout -b master`，我在这次提交中重新创建了我的主分支。`git status`现在显示了一项更改，这是我尝试进行的提交。承诺让我回到正轨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:36:03.157

首先：不要惊慌。备份您的项目，包括您的工作文件夹。嗯...实际上，做*两个*:)

> 我还有一个 .git 文件夹，大小为 53mb。

Git 是一个非常有弹性的工具。对对象数据库的分析可以“重建”您的历史。

此外，GHfW 记录了与 repo 的大部分交互。长话短说，GHfW 团队很有可能会帮助您挽救您的回购协议。

正如**[公告博客文章所述](https://github.com/blog/1127-github-for-windows)**

> 我们确保阅读 Twitter 上的每一个提及。如果您发现错误，请将其提交至 support@github.com。每封电子邮件都由真人阅读。

给他们发邮件。就像**现在**一样。

# c# - Detect if Modifier Key is Pressed in KeyRoutedEventArgs Event

> ID：13001215
> 
> 赞同：14
> 
> 时间：2012-10-21T19:13:25.640
> 
> 标签：c#, .net, xaml, uwp, windows-runtime

I have the following code:

```
public void tbSpeed_KeyDown(object sender, KeyRoutedEventArgs e)
{
    e.Handled = !((e.Key >= 48 && e.Key <= 57) || (e.Key >= 96 && e.Key <= 105) || (e.Key == 109) || (e.Key == 189));
} 
```

Is there any way to detect if any modifier key like shift is being pressed ?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T11:22:55.573

使用[GetKeyState](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.getkeystate)。例如

```
var state = CoreWindow.GetForCurrentThread().GetKeyState(VirtualKey.Shift);
return (state & CoreVirtualKeyStates.Down) == CoreVirtualKeyStates.Down; 
```

**注意**：对于 Alt，您将使用 VirtualKey.Menu。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-26T15:11:24.423

对于 Win10 UWP，我注意到 CTRL 和 SHIFT 键设置为锁定状态。所以我做了以下事情：

```
var shiftState = CoreWindow.GetForCurrentThread().GetKeyState(VirtualKey.Shift);
var ctrlState = CoreWindow.GetForCurrentThread().GetKeyState(VirtualKey.Control);

var isShiftDown = shiftState != CoreVirtualKeyStates.None;
var isCtrlDown = ctrlState != CoreVirtualKeyStates.None; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:34:31.953

你可以试试下面的代码

```
CoreVirtualKeyStates controlKeyState = Window.Current.CoreWindow.GetKeyState(VirtualKey.Control);
var  ctrl = (controlKeyState & CoreVirtualKeyStates.Down) == CoreVirtualKeyStates.Down;

CoreVirtualKeyStates shiftKeyState = Window.Current.CoreWindow.GetKeyState(VirtualKey.Shift);
var shift = (shiftKeyState & CoreVirtualKeyStates.Down) == CoreVirtualKeyStates.Down; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-21T19:16:43.707

`Bitwise AND``Modifiers`Keyboard with `Shift`Key的属性 -

```
bool isShiftKeyPressed = (Keyboard.Modifiers & ModifierKeys.Shift)
                         == ModifierKeys.Shift; 
```

也试试这个-

```
bool isShiftKeyPressed = (ModifierKeys & Keys.Shift) == Keys.Shift; 
```

或者

```
Control.ModifierKeys == Keys.Shift 
```

# java - Caching ResultSet

> ID：13001216
> 
> 赞同：4
> 
> 时间：2012-10-21T19:13:48.917
> 
> 标签：java, sql, caching, resultset, cachedrowset

Its more like subjective question, The main objective of the question is to Cache java.sql.ResultSet. But I know it is not preferred mechanism as it is tightly coupled with Connection, and data may get flushed when the connection is closed. To address this issue, I am using CachedRowSet. The instance of CachedRowSet will be cached using third party caching tool, which will help me to reduce db calls.

Code snippet of my implementation is given below. The method `executeQuery(String)` is implemented in an abstract class, which all sub classes would use to execute the query. There could be customer subclasses as well using this method to fetch data from our system.

```
public final ResultSet executeQuery(String query){
        try {
        // return data if it is available in cache, else execute and store in cache
            CachedRowSet cachedRowSet=getDataFromCache(query);
            if(cachedRowSet!=null) {
                return cachedRowSet;   
            }
            PreparedStatement statement=getStatment();
            ResultSet rs= statement.executeQuery(query);
            CachedRowSet cachedRowSet=new CachedRowSetImpl();
            cachedRowSet.populate(rs);
                    cachedData(cachedRowSet);
            return cachedRowSet;
        } catch (Exception e) {
            return null;
        }
    } 
```

Now, I am bit confused with below points

1.  Instead of ResultSet interface, I will return instance of CachedResultSet. Would be that correct replacement for resultSet. Driver JAR,DB classes can be varying across customer environment. Customer would write custom classes and expecting a resultSet from Abstract class. Would that cause any issue? Some thing like below

    public class CustomerXX extends BaseClass {

    ```
    public void process(String query){

        ResultSet rs = executeQuery(query);

        //process rs to fetch data

    } 
    ```

    }

2.  Risk involved in this kind of operation( Caching `CachedRowSet`, data correctness)

3.  Performance of creating `CachedRowSet`

4.  Compatibility with all `ResultSet` operations ( `ResultSet.getString()`, ResultSet.get..()). If at all Driver expect/produces different subclass of `ResultSet` ( Say `jdbcResultSet`,`BaseResultSet`, etc)

I have similar kind of many other question is my mind, I am just writing few of them that I feel valid and has higher priority.

Not sure my question is so vague, does have enough clarity of my requirements.

Any ideas, thoughts, suggestions are highly appreciated, and many thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:13:16.790

实现自定义`CachedRowSet`可能会很痛苦，因为您已经实现了`ResultSet`接口公开的所有方法。

我建议不要在 jdbc 级别缓存，而是在数据访问层缓存一些值对象。

例如，如果您使用带有 id、name 和 email 列的用户表，您可以有以下值对象

```
class User {
    Long id;
    String name;
    String email;
} 
```

接下来可以介绍数据访问层

```
interface UserRepository {
    List<User> retrieveUsers();
} 
```

使用从数据库加载数据的默认 JdbcUserRepository。

缓存可以使用代理模式来实现：

```
class CachingUserRepository implements UserRepository {
    private Cache cache;
    private UserRepository delegate;

    List<User> retrieveUsers() {
        List<User> result = cache.get(USERS_KEY);
        if (result == null) {
            result = delegate.retrieveUsers();
        }

        return result;
    }

} 
```

实现缓存是最具挑战性的部分。您必须担心：

1.  并发 - 多个线程将访问缓存
2.  内存 - 缓存可能变得太大，可能会发生 OutOfMemoryException。

我建议使用一些现有的缓存解决方案，而不是编写自己的解决方案。我发现[google guava](http://code.google.com/p/guava-libraries/wiki/CachesExplained)稳定且易于使用。

# python - understanding Python error

> ID：13001217
> 
> 赞同：0
> 
> 时间：2012-10-21T19:14:01.807
> 
> 标签：python

I'm attempting to create a map using Python and the beautiful soup library.

I am a newbie and am inexperienced with programming.

I am receiving the attached error and am unsure how to proceed. Presumably there is an issue with my data file (a csv file).

What is Python telling me? What does "new line character in unquoted field" mean?

Here is the code:

```
# Read in script rates
scriptrate = {}
min_value = 100; max_value = 0
reader = csv.reader(open('/users/gcameron/Desktop/map/data.csv'), delimiter=",")
for row in reader:
try:
    county = row[1] 
    rate = float( row[2].strip() )
    rate[county] = rate
except:
    pass 
```

![enter image description here](../Images/dd1322585cb4722d2b20fdb041957e1d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:16:41.163

错误消息说它与您的文件有关，问题出在这一行。

```
reader = csv.reader(open('/users/gcameron/Desktop/map/data.csv'), delimiter=",") 
```

它说您需要更改为：

```
reader = csv.reader(open('/users/gcameron/Desktop/map/data.csv', 'rU'), delimiter=",") 
```

注意`'rU'`，它告诉 python 以通用换行模式读取文件，如错误消息中所述。我不确定这会有所帮助，但您应该尝试一下。

您还应该附上您的 csv 文件，因为如果上述方法不起作用，我认为问题出在文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:21:03.970

出现此问题的原因是不同操作系统中的新行格式不同。默认情况下，Python 假定换行符是 Unix 风格的 LF ( `\n`)，如果不是这种情况，那么你就有问题了。

在您的情况下，您的 .csv 很可能来自 Windows，因此所有 excel 怪癖（格式问题）。您可以通过在通用换行模式下打开来修复它。改变：`open(r'/users/gcameron/Desktop/map/data.csv', 'rU')`

# pointers - Winrt scrollviewer different behavior in simulator as mouse or finger

> ID：13001222
> 
> 赞同：2
> 
> 时间：2012-10-21T19:14:21.583
> 
> 标签：pointers, windows-runtime, mouse, scrollviewer

I have a grid with some controls and Background. Inside the grid is also a canvas over the complete grid. On pointer_pressed I paint on the canvas. Works very well in simulator with mouse and finger. If I add a scrollviewer everything looks like expected and the painting works very well with mouse and the moving with the scrollbars works also very well, but on finger it moves the content of the scrollviewer and does not paint. So the behavior is different. For my needs it would be great If I can change the behavior only for these scrollviewer that the finger works like the mouse. Is that in winrt possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:06:47.070

我以前尝试过类似的东西，但做不到。我建议实现您自己的自定义滚动查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T23:40:58.363

我知道这是几年前的事，但我今天遇到了这个问题并想插话。我在滚动查看器中有一个触摸绘图画布。我决定在墨水画布上有焦点时禁用滚动查看器。

XAML

```
< Canvas x:Name="InkCanvas" Background="White" Height="100" Width="500" HorizontalAlignment="Left" PointerEntered="CanvasGotFocus" PointerExited="CanvasLostFocus" /> 
```

C＃

```
private void CanvasGotFocus(object sender, PointerRoutedEventArgs e)
    {
        scroller.VerticalScrollMode = ScrollMode.Disabled;
    }

    private void CanvasLostFocus(object sender, PointerRoutedEventArgs e)
    {
        scroller.VerticalScrollMode = ScrollMode.Enabled;
    } 
```

# python - python program with match_ends

> ID：13001226
> 
> 赞同：-1
> 
> 时间：2012-10-21T19:14:55.040
> 
> 标签：python

```
# 5.- match_ends
# Given a list of strings, return the count of the number of
# strings where the string length is 2 or more and the first
# and last chars of the string are the same.
# Note: python does not have a ++ operator, but += works.
#       For example, the result of n = n + 1 can be also achieved by n += 1.

def match_ends(words):
  # +++your code here+++
  if len(words)>=2:
    return words[0]and words[-1:]==words[-1:]
    words+=words 
```

What do you guys think I'm doing wrong and how should I improve this?

Here's the result:

```
match_ends
  X  got: True expected: 3
  X  got: '' expected: 2
 OK  got: True expected: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:13:26.590

```
def match_ends(words):
    word_count=len(words)
    results=[]
    for x in words:
        if len(x)>2 and x[0]==x[len(x)-1]:
            results.append(x)
    return word_count,results

word_list=["hello","wow"]
matched_words=match_ends(word_list)
print matched_words 
```

这应该适合你:)

如果你想要它更pythonic，你可以这样做：

```
def match_ends(words):
    word_count=len(words)
    results=[x for x in word_list if len(x)>2 and x[0]==x[len(x)-1]]
    return word_count,results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T09:06:25.087

更精简的方法：

```
def match_ends(words):
  count = 0
  for i in words:
    if len(i) >= 2 and i[-1] == i[0]:
      count = count + 1
  return count 
```

# javascript - Javascript将图片作为参数传递给函数

> ID：13001233
> 
> 赞同：-1
> 
> 时间：2012-10-21T19:15:39.057
> 
> 标签：javascript, html

嘿伙计们，所以我试图将 .png 类型的图片作为参数传递给函数。所以每次我用图片参数调用函数时，图片都会显示出来。这是我的功能

```
 function DisplayImages(picture1){
     document.write("<div class='slideshow'>",
      "<ul>",
        "<li>",
         "<img src=",picture1,"/>",          
          "<div>",
             "<a href=", picture1 "title='Click to see full image' target='_blank'>",
                "<img src=", picture1 " alt='Item 1' />",
            "</a>",
            "<p>'This is Item 1' </p>",
        "</div>",
        "</ul>",
       "</div>");
    } 
```

我这样称呼它

```
 <script> DisplayImages('images/upcomingitem1.png'); </script> 
```

但它没有显示任何东西，任何帮助如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:22:03.310

如果添加两个缺少的逗号，第二个之后缺少的空格`src`和缺少的`</li>`，它“有效”：

```
function DisplayImages(picture1){
     document.write("<div class='slideshow'>",
      "<ul>",
        "<li>",
         "<img src=\"", picture1,"\">",          
          "<div>",
             "<a href=\"", picture1, "\" title='Click to see full image' target='_blank'>",
                "<img src=\"", picture1, "\" alt='Item 1' />",
            "</a>",
            "<p>'This is Item 1' </p>",
        "</div></li>",
        "</ul>",
       "</div>");
} 
```

我还添加了一些（转义）引号，因此它适用于任何 URL。

[示范](http://jsfiddle.net/dJDtF/)

但我对解决方案持怀疑态度。整棵树看起来很重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:19:30.120

正确格式化您的字符串以写入，`+`连接，而不是`,`

```
 function DisplayImages(picture1){
 document.write("<div class='slideshow'>"+
  "<ul>"+
    "<li>"+
     "<img src="+picture1+"/>"+          
      "<div>"+
         "<a href="+ picture1 +"title='Click to see full image' target='_blank'>"+
            "<img src="+ picture1 +" alt='Item 1' />"+
        "</a>"+
        "<p>This is Item 1 </p>"+
    "</div>"+
    "</ul>"+
   "</div>");
 } 
```

# html - 为什么要在他们的 HTML 标签中添加 ID？

> ID：13001236
> 
> 赞同：0
> 
> 时间：2012-10-21T19:15:43.367
> 
> 标签：html

`id`一个简单的问题：如果没有它们也能很好地工作，我们为什么要把它们添加到我们的 HTML 标签中？我知道它们的用途之一是能够通过主题标签 ( `#`) 浏览页面，但它们还有其他用途吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:45:57.717

# `id`HTML 中属性的使用

*   作为 URL 上片段标识符的目标。
*   作为`for`属性`<label>`和`<output>`元素的表单控件的目标。
*   作为表单关联元素上`<form>`的属性的元素上的目标。`form`
*   `itemref`通过微数据属性作为元素引用的目标。
*   作为通过某些 ARIA 属性（包括`aria-describedby`, `aria-labelledby`和其他 4 个）进行元素引用的目标。
*   作为`<th>`元素上的对象，其`headers`属性为 on`<td>`和`<th>`元素。
*   作为属性`<menu>`元素的目标。`contextmenu`
*   作为`<datalist>`元素上的`list`属性的目标`<input>`元素。
*   作为和元素上`<map>`的`usemap`属性的元素的哈希名称引用的一部分。`<img>``<object>`
*   作为 CSS 选择器中元素的标识符
*   作为用于 JavaScript 处理的元素的标识符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:18:59.973

它们最常用于唯一标识样式（CSS）和脚本（JavaScript 等）目的的元素。

但是，如果您要询问 HTML 并且仅询问 HTML，那么声明性 ID 有用的一个示例是将 a`<label>`与其关联`<input>`，`<button>`或`<textarea>`通过其`for`属性进行控制：

```
<label for="ex">Example field:</label>
<input type="text" name="ex" id="ex"> 
```

`for`如果不指定此属性，则激活标签不会执行任何操作，但是当您使用and将两个元素配对在一起时`id`，激活标签会导致其控件获得焦点。

将表单标签与其控件关联的另一种方法是将其包含在标签中：

```
<label>
Example field:
<input type="text" name="ex">
</label> 
```

但这并不总是适合表单或页面的结构，因此提供了 ID 参考作为替代方案。

[Alohci 的回答](https://stackoverflow.com/questions/13001236/why-should-one-add-id-to-their-html-tags/13001519#13001519)`id`中广泛涵盖了属性服务于功能的其他情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:17:47.627

您可以使用 ID 从 javascript、CSS 和 jquery 访问您的 div。如果您不使用 ID，那么您将很难通过 JS 与 HTML 页面进行交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T19:18:17.763

AFAIK，它们用于唯一地引用标签。并使您更容易引用标签。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T19:19:01.907

ID 用于访问 CSS 和 JavaScript 中的元素。严格来说，ID 应该唯一地标识一个元素。您还可以使用类属性来识别元素组。

> id 属性为文档中的元素提供唯一标识符。a 元素可以使用它来创建指向该特定元素的超链接。
> 
> 此标识符也可以在 CSS 代码中用作可用于样式目的的钩子，或由 JavaScript 代码（通过文档对象模型或 DOM）通过引用其唯一 ID 来对元素进行更改或添加行为。

见[http://reference.sitepoint.com/html/core-attributes/id](http://reference.sitepoint.com/html/core-attributes/id)

有关课程的更多信息，请参见此处：[http ://reference.sitepoint.com/html/core-attributes/class](http://reference.sitepoint.com/html/core-attributes/class)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T19:19:36.870

它可以帮助您在 java-script 代码中识别您的元素。java-script 中的 getElementByID 函数为您提供具有特定 ID 的元素的句柄。就像这样。

```
var someElement = document.getelementById("someID");
// do whatever with someElement; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-21T19:20:32.547

我自己也更喜欢`class`通过 CSS 进行样式设置，但有时你需要一个元素是独一无二的。出于可访问性的原因，您使用属性`id`来输入元素以将其“连接”`label`到它`for`。对于 Javascript，如果元素具有`id`属性，则选择它要简单得多。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-21T19:30:06.220

我为我的 HTML 元素使用 id 的主要原因是它们的选择速度更快，在带有类的 Javascript`getElementById`和 CSS 中也是如此`#id`。

当然，我并不是说这总是一个好主意，尤其是在 CSS 中，基于 id 的类会导致大量冗余，这只是原因之一

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-28T21:24:56.980

首先，仅在需要使用 ID 时添加 ID。在大多数情况下，id 用于执行其他操作，例如：

1.  脚本参考，选择要应用脚本的元素，
2.  样式表选择器，为样式选择元素
3.  用于链接的命名锚点，这就是你所说的页面导航

所以很简单，因为在大多数情况下，您会想要对任何标签中的内容或对您的内容做一些事情，所以最好放置一个标识符，即 id 属性。

# java - Creating custom swing component out of existing

> ID：13001238
> 
> 赞同：4
> 
> 时间：2012-10-21T19:15:57.277
> 
> 标签：java, swing, jtextarea

So, I have this JTexrtArea which is almost perfect for my needs. The only thing wrong with it is the line spacing. I can't set it. (Why not JTextPane? Because spacing CAN be changed in JTextArea and JTextArea is way lighter thatn JTextPane, and I have a bunch of those in my program).

I have asked this [question](https://stackoverflow.com/questions/12725647/line-spacing-in-itext-list-item-or-jtextarea) before, and this is the answer that I got from user StanislavL:

* * *

To override JTextArea's line spacing take a look at the PlainView (used to render PLainDocument).

There are following lines in the public void paint(Graphics g, Shape a) method

```
 drawLine(line, g, x, y);
    y += fontHeight; 
```

So you can adapt the rendering fixing y offset.

In the BasicTextAreaUI method to create view. Replace it with your own implementation of the PlainView

```
public View create(Element elem) {
Document doc = elem.getDocument();
Object i18nFlag = doc.getProperty("i18n"/*AbstractDocument.I18NProperty*/);
if ((i18nFlag != null) && i18nFlag.equals(Boolean.TRUE)) {
    // build a view that support bidi
    return createI18N(elem);
} else {
    JTextComponent c = getComponent();
    if (c instanceof JTextArea) {
    JTextArea area = (JTextArea) c;
    View v;
    if (area.getLineWrap()) {
        v = new WrappedPlainView(elem, area.getWrapStyleWord());
    } else {
        v = new PlainView(elem);
    }
    return v;
    }
}
return null;
} 
```

* * *

I grasp the general idea of what he's telling me to do, but I don't know how to do it. Also, I wouldn't like to override the default JTextArea "property", I'd like to have a choice - to use the default one or to use a custom one.

Only change in JTextArea code would be from

`y += fontHeight`,

to

`y+= (fontHeight +(or -) additionalSpacing)`.

How do I achieve this? Which classes do I use/copy? Where do I put them? How do I make them usable? How do I get the whole thing working?

**If you think this is too specific to be useful, maybe someone could write a general tutorial on how to create a custom swing component based 100% on an existing one. Then someone could easely change some values to better adjust it to it's needs.**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T06:15:27.043

我只是[从你的另一个问题中复制粘贴我的答案](https://stackoverflow.com/a/13077931/1076463)。

> 我想更改 JTextArea 行之间的间距

我的第一个想法是覆盖`javax.swing.JTextArea#getRowHeight`就足够了。javadoc明确指出

> 定义行高的含义。这默认为字体的高度。

所以我希望通过覆盖这个方法，你可以调整定义，你会得到更多的行间距。糟了，没用。快速搜索 JDK 中该方法的用法也发现了同样的情况。主要是用来计算一些尺寸的，但是在组件内部绘制文字的时候肯定不会用到。

通过查看该`javax.swing.text.PlainView#paint`方法的源代码，我看到`FontMetrics`使用了 ，并且您可以在`JTextArea`. 所以第二种方法是扩展`JTextArea`（bwah，扩展 Swing 组件，但它是为了概念验证）

```
 private static class JTextAreaWithExtendedRowHeight extends JTextArea{
    private JTextAreaWithExtendedRowHeight( int rows, int columns ) {
      super( rows, columns );
    }

    @Override
    public FontMetrics getFontMetrics( Font font ) {
      FontMetrics fontMetrics = super.getFontMetrics( font );
      return new FontMetricsWrapper( font, fontMetrics );
    }
  } 
```

该类`FontMetricsWrapper`基本上代表了除`getHeight`方法之外的所有内容。在那个方法中，我在委托的结果中添加了 10

```
@Override
public int getHeight() {
  //use +10 to make the difference obvious
  return delegate.getHeight() + 10;
} 
```

这会导致更多的行间距（以及一个太长的插入符号，但可能可以调整）。

一个小屏幕截图来说明这一点（不像其他一些那样好，但它表明这种方法可能有效）：

![普通文本区域和扩展文本区域之间的区别](../Images/c472b579aa469670ea2c245b4f574669.png)

小免责声明：这感觉就像一个丑陋的黑客，可能会导致意想不到的问题。我确实希望有人提出更好的解决方案。

我个人更喜欢 StanislavL 提出的解决方案，但这为您提供了另一种选择

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T06:50:26.210

那是一段代码。它还没有完成。未实现换行之间的行间距。您可以获得完整的源代码`WrappedPlainView`或`PlainView`在那里添加您的代码以实现所需的行距

```
import javax.swing.*;
import javax.swing.plaf.basic.BasicTextAreaUI;
import javax.swing.text.*;

public class LineSpacingTextArea {

    public static void main(String[] args) {
        JTextArea ta=new JTextArea();
        JFrame fr=new JFrame("Custom line spacing in JTextArea");
        fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ta.setText("Line 1\nLine 2\nLong text to show how line spacing works");
        ta.setLineWrap(true);
        ta.setWrapStyleWord(true);
        ta.setUI(new CustomTextAreaUI());
        fr.add(new JScrollPane(ta));
        fr.setSize(100,200);
        fr.setLocationRelativeTo(null);

        fr.setVisible(true);
    }

    static class CustomTextAreaUI extends BasicTextAreaUI {

        public View create(Element elem) {
            Document doc = elem.getDocument();
            Object i18nFlag = doc.getProperty("i18n"/*AbstractDocument.I18NProperty*/);
            if ((i18nFlag != null) && i18nFlag.equals(Boolean.TRUE)) {
                // build a view that support bidi
                return super.create(elem);
            } else {
                JTextComponent c = getComponent();
                if (c instanceof JTextArea) {
                    JTextArea area = (JTextArea) c;
                    View v;
                    if (area.getLineWrap()) {
                        v = new CustomWrappedPlainView(elem, area.getWrapStyleWord());
                    } else {
                        v = new PlainView(elem);
                    }
                    return v;
                }
            }
            return null;
        }
    }

    static class CustomWrappedPlainView extends WrappedPlainView {
        public CustomWrappedPlainView(Element elem, boolean wordWrap) {
            super(elem, wordWrap);
        }
        protected void layoutMajorAxis(int targetSpan, int axis, int[] offsets, int[] spans) {
            super.layoutMajorAxis(targetSpan, axis, offsets, spans);
            int ls=spans[0];
            for (int i=0; i<offsets.length; i++) {
                offsets[i]+=i*ls;
            }
        }
    }
} 
```

# c# - 如何向我的泛型方法添加参数？

> ID：13001244
> 
> 赞同：1
> 
> 时间：2012-10-21T19:16:30.927
> 
> 标签：c#

我有以下方法：

```
 public static IEnumerable<SelectListItem> GetSpacedOptions<T>() where T : struct
    {
        var t = typeof(T);
        if (!t.IsEnum)
        {
            throw new ArgumentException("Not an enum type");
        }
        var options = Enum.GetValues(t).Cast<T>()
            .Select(x => new SelectListItem
            {
                Value = ((int) Enum.ToObject(t, x)).ToString(),
                Text = Regex.Replace(x.ToString(), "([A-Z])", " $1").Trim()
            });
        return options;
    } 
```

我需要做的是添加一个名为 zeroPad 的布尔参数。因此，如果未提供，则方法将保持不变，但如果提供，则文本输出将始终为两位数字符串，例如“01”、“04”或“77”。

如何添加该参数。好像没有地方可以添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:22:27.913

如何将默认值提供为`false`.-

```
public static IEnumerable<TestClass> GetSpacedOptions<T>(bool zeroPad = false)
                                              where T : struct 
```

用户可以通过两种方式调用它 -

```
GetSpacedOptions<MyEnum>(true); 
```

如果未指定`zeroPad`value，则`false`默认为 value

```
GetSpacedOptions<MyEnum>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:19:40.767

参数在括号之间：

```
public static IEnumerable<SelectListItem> GetSpacedOptions<T>(bool zeroPad) where T : struct
{
  ...
} 
```

使用调用带参数的方法的无参数方法重载：

```
public static IEnumerable<SelectListItem> GetSpacedOptions<T>() where T : struct
{
  return GetSpacedOptions<T>(false);
} 
```

# node.js - 用geddy查询mongodb

> ID：13001245
> 
> 赞同：0
> 
> 时间：2012-10-21T19:16:32.270
> 
> 标签：node.js, mongodb, geddy

在尝试 node.js 框架 geddy （在 Windows 上）时，我遇到了一些问题。

我正在尝试使用我的用户模型中的 .first() 方法在我的控制器中查询 mongodb，如下所示：

```
geddy.model.User.first({name: 'jdoe'}, function (err, data) {
  if (err) {
    throw err;
  } else {
    console.log(data);
  }

}); 
```

奇怪的是，我没有得到任何输出，错误，什么都没有。用户 jdoe 存在于集合中，所以它应该输出一些东西，对吗？难道我做错了什么 ？

我的模型定义为：

```
var User = function () {

    this.defineProperties({
      username: {type: 'string', required: true},
      password: {type: 'string', required: true},
    });

    this.autoIncrementId = true;

};

User = geddy.model.register('User', User); 
```

默认适配器在 development.js 中设置为 mongo，当我第一次运行 geddy 时，它创建了我的数据库并且它已正确插入用户集合。

关于这里出了什么问题的任何想法？

更新：

根据要求添加了 development.js

```
var config = {
  detailedErrors: true
, debug: true
, hostname: null
, port: 4000
, model: {
    defaultAdapter: 'mongo',
    }
,db: {
    mongo: {
        dbname: 'knowledgebase'
    }
}
, sessions: {
    store: 'memory'
  , key: 'sid'
  , expiry: 14 * 24 * 60 * 60
  }
};

module.exports = config; 
```

还有我在 mongo 上的收藏（由 geddy 创建）

```
> show collections
User
system.indexes
users 
```

请注意，不知何故 geddy 正在创建两个集合而不是一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:44:15.167

看起来你被这个错误击中了：[https ://github.com/mde/geddy/issues/240](https://github.com/mde/geddy/issues/240)

事实上，Geddy 不小心为每个模型创建了两个集合。它总是使用小写的复数集合来进行读/写。您确定您的数据在该集合中而不是在另一个集合中吗？

无论如何，从评论中，听起来您已经涵盖了这一点。

# visual-studio - Microsoft MPI 不运行

> ID：13001255
> 
> 赞同：6
> 
> 时间：2012-10-21T19:17:03.970
> 
> 标签：visual-studio, mpi, mpiexec

我正在尝试微软的 MPI 实现。我从这里安装了 CCP sdk：

[http://www.microsoft.com/en-us/download/details.aspx?id=239](http://www.microsoft.com/en-us/download/details.aspx?id=239)

然后在我的项目设置中，我添加了包含文件夹、lib 文件夹并提到了 msmpi.lib。

使用其余设置，我构建程序，然后在命令提示符中继续运行程序，但启动后没有任何反应。

这是代码（它应该显示每个线程的 id 号）：

```
#include "stdafx.h"
#include "mpi.h"
#include <stdio.h>

//Commands in cmd prompt
//cd "C:\Program Files\Microsoft Compute Cluster Pack\Bin"
//mpiexec.exe -n 2 "C:\Users\MyNameHere\Documents\Visual Studio 2012\Projects\tspMpi\Debug\tspMpi.exe"

int main(int argc, char* argv[]) 
{
 int  nTasks = 0, rank = 0; 

 MPI_Init(&argc,&argv); 
 MPI_Comm_size(MPI_COMM_WORLD,&nTasks);
 MPI_Comm_rank(MPI_COMM_WORLD,&rank);

 printf ("Number of threads = %d, My rank = %d\n", nTasks, rank);

  return 0;
 MPI_Finalize();
} 
```

一旦我运行 mpiexec.exe（命令在注释中），程序什么也不做，直到我按下 Ctrl-C。有谁知道我做错了什么？构建程序时没有错误，如果我从 Visual Studio 运行它，就好像只启动了一个进程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T00:40:55.050

我根本没有发现 SDK 有用，这是我在 VS 2010 (VC10) 中启用 MPI 集群调试的步骤：

步骤 1\. 安装 MS-MPI：[http](http://www.microsoft.com/en-us/download/details.aspx?id=36045) ://www.microsoft.com/en-us/download/details.aspx?id= 36045（仅限 x64），这将创建

```
C:\Program Files\Microsoft HPC Pack 2012\Inc
C:\Program Files\Microsoft HPC Pack 2012\Lib\amd64
C:\Program Files\Microsoft HPC Pack 2012\Lib\i386 
```

步骤 2\. 下载示例： http: [//msdn.microsoft.com/en-us/library/ee441265 (v=vs.100).aspx#BKMK_debugMany](http://msdn.microsoft.com/en-us/library/ee441265(v=vs.100).aspx#BKMK_debugMany)

步骤 3\. 调试设置：右键单击启动项目 > 属性 > 调试

```
Debugger to launch, change "Local Windows Debugger" to "MPI Cluster Debugger"
Run Environment, change "localhost/1" to "localhost/4" 
```

右击Visudal Studio Toolbar区域勾选“Debug Location”，现在可以在Debug Location工具栏中切换Process及其线程，玩得开心！

# java - 在java中将一个字符串转换为另一个字符串

> ID：13001259
> 
> 赞同：0
> 
> 时间：2012-10-21T19:17:33.483
> 
> 标签：java, string, replace

如何在java中`#title`转换？`<h1>title</h1>`我正在尝试创建一种将markdown格式转换为html格式的算法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T19:26:12.273

如果要创建降价算法，请查找正则表达式。

```
String noHtml = "#title1";
String html = noHtml.replaceAll("#(.+)", "<h1>$1</h1>"); 
```

回答评论 - 更多关于字符类[的信息](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)：

```
String noHtml = "#title1";
String html = noHtml.replaceAll("#([a-zA-Z]+)", "<h1>$1</h1>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:36:11.957

假设您在标记单词的*开头*和*结尾*使用了一个哈希，您可以使用这样的方法，它将所有这些都放在一个字符串中。

```
private String replaceTitles(String entry) {
    Matcher m = Pattern.compile("#(.*?)#").matcher(entry);
    StringBuffer buf = new StringBuffer(entry.length());
    while (m.find()) {

        String text = m.group(1);
        StringBuffer b = new StringBuffer();
        b.append("<h1>").append(text).append("</h1>");

        m.appendReplacement(buf, Matcher.quoteReplacement(b.toString()));
    }
    m.appendTail(buf);
    return buf.toString();
} 
```

如果你打电话

```
replaceTitles("#My Title One!# non title text, #One more#") 
```

它会回来

```
"<h1>My Title One!</h1> non title text, <h1>One more</h1>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:21:14.963

尝试：

```
 String inString = "#title";
  String outString = "<h1>"+inString.substring(1)+"</h1>"; 
```

或者

```
 String outString = "<h1>"+"#title".substring(1)+"</h1>"; 
```

# javascript - 如何循环替换文本中的所有文本？

> ID：13001266
> 
> 赞同：1
> 
> 时间：2012-10-21T19:17:56.620
> 
> 标签：javascript, jquery, replace

对不起我的英语 =) 我需要替换页面上的一些元素。这是我的代码：

```
var text1 = $('body').html().replace(/text1/, 'text11');
var text2 = $('body').html().replace(/text2/, 'text22');
var text3 = $('body').html().replace(/text3/, 'text33');
array = [text1, text2, text3];
      for (var i = 0; i < array.length; i++) {
        $('body').html(array[i])
      }; 
```

但是只替换第一个和第三个，如果删除第三个元素数组，第一个和第二个就改变了。请告诉我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:20:16.933

这是因为在评估变量时，原始正文 html 保持不变。您需要链接替换或使用以前的变量进行另一个替换：

```
var text1 = $('body').html().replace(/text1/, 'text11');
var text2 = text1.replace(/text2/, 'text22');
var text3 = text2.replace(/text3/, 'text33'); 
```

然后你不需要任何迭代..

```
$('body').html(text3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:23:10.707

```
var items = [
    { find: /text1/, replace: 'text11' },
    { find: /text2/, replace: 'text22' },
    { find: /text3/, replace: 'text33' }
];
var text = $('body').html();

for (var i = 0; i < items.length; i++)
{
    var item = items[i];
    text = text.replace(item.find, item.replace);
}

$('body').html(text); 
```

# python - 为什么我的 python 安装识别 /Library/Python/2.7/site-packages/？

> ID：13001273
> 
> 赞同：1
> 
> 时间：2012-10-21T19:18:32.897
> 
> 标签：python, homebrew

我已经使用 Homebrew 安装了 Python。我希望这个 python 安装只识别一个站点包目录——`/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages`

但是，当我启动 python shell 并给出命令时，`print [f for f in sys.path if f.endswith('packages')]`我得到以下输出：

`['/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages']`

为什么`/Library/Python/2.7/site-packages`坐在最后？Python 的 Homebrew 安装不应该在 /usr/local/ 下只有一个主站点包目录吗？

编辑：我正在使用virtualenv——但这是在我什至有机会安装virtualenv之前使用自制软件重新安装python之后发生的。另外，我对它发生的原因感兴趣，而不是我应该做些什么来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T19:10:23.953

为此创建了一个堆栈溢出帐户，因为我对此感到非常恼火。实际上，我无意中遇到了一个由 sys.path 中额外的“/Library/Python/2.7/site-packages”引起的错误

研究它让我想到了这个： [http ://bugs.python.org/issue4865](http://bugs.python.org/issue4865)

tl;dr：据我所知，他们将这条路径放在那里以帮助那些为苹果提供的 python 安装包的人，但后来会尝试在其他版本的 python 中使用这些包（比如 homebrew 使用的包） ，macports等）。

# ruby-on-rails - rails config.assets.precompile 用于特定子文件夹

> ID：13001274
> 
> 赞同：10
> 
> 时间：2012-10-21T19:18:34.950
> 
> 标签：ruby-on-rails, asset-pipeline

我在 app/assets/stylesheets/external/calendars 中有一些非常重的外部样式表我不想将样式表包含在 application.css 中，因为它们不经常使用

但我希望它们预编译。

我如何使用 config.assets.precompile o 选择性地预编译此文件夹内的所有样式表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-18T17:14:17.717

您可以像这样简单地编写它：

```
config.assets.precompile += ['directory1/*', 'directory2/*', 'file.js'] 
```

或者使用更简洁的语法，如下所示：

```
config.assets.precompile += %w( directory1/* directory2/* file.js ) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-22T00:58:19.593

这在[Asset Pipeline Rails Guide的第 4.1 节中有所介绍](http://guides.rubyonrails.org/asset_pipeline.html)

```
config.assets.precompile += ["*external/calendars*"] 
```

# java - android No class def found google guice框架时产生的错误

> ID：13001279
> 
> 赞同：0
> 
> 时间：2012-10-21T19:18:59.490
> 
> 标签：java, android, dependency-injection, guice

我在我的 android 应用程序中使用 Guice 依赖注入框架。当我运行我的应用程序时，我得到模块类的 NoClassDefFoundError。

```
import com.google.inject.AbstractModule;
import com.pps.data.services.UserService;
import com.pps.data.services.IService;

public class DataModule extends AbstractModule{

        public void configure ()
        {
            bind (IService.class).to(UserService.class);
        }

}//end dataModule class

 public class DataManager {
  private static DataManager instance;
   private DataModule module;

/*
 * Default constructor Singleton Pattern
 */
private DataManager ()
{
    module = new DataModule ();
}//end constructor

/**
 * Gets instance of DataManager class
 * @author Mario Dennis
 * @return
 */
public static DataManager getInstance ()
{
    if (instance == null)
    {
        instance = new DataManager ();
        return instance;
    }
    else
        return instance;
}//end getInstance method

@SuppressWarnings({ "unchecked", "rawtypes" })
public <T> List<T> getAll (Class object)
{
    Injector inject = Guice.createInjector(module);
    IService<T> service = (IService<T>) inject.getBinding(object.getClass());

    return service.getAll();    
}
}//end DataManager class 
```

日志猫：

```
 10-21 15:40:54.082: D/dalvikvm(3725): Late-enabling CheckJNI
  10-21 15:40:54.902: W/dalvikvm(3725): Unable to resolve superclass of Lcom/pps/data/DataModule; (414)
  10-21 15:40:54.902: W/dalvikvm(3725): Link of class 'Lcom/pps/data/DataModule;' failed
  10-21 15:40:54.902: E/dalvikvm(3725): Could not find class 'com.pps.data.DataModule', referenced from method com.pps.data.DataManager.<init>
  10-21 15:40:54.902: W/dalvikvm(3725): VFY: unable to resolve new-instance 421 (Lcom/pps/data/DataModule;) in Lcom/pps/data/DataManager;
  10-21 15:40:54.902: D/dalvikvm(3725): VFY: replacing opcode 0x22 at 0x0003
  10-21 15:40:54.902: E/dalvikvm(3725): Could not find class 'com.google.inject.Module[]', referenced from method com.pps.data.DataManager.getAll
  10-21 15:40:54.902: W/dalvikvm(3725): VFY: unable to resolve new-array 539 ([Lcom/google/inject/Module;) in Lcom/pps/data/DataManager;
  10-21 15:40:54.902: D/dalvikvm(3725): VFY: replacing opcode 0x23 at 0x0001
  10-21 15:40:54.902: W/dalvikvm(3725): Unable to resolve superclass of Lcom/pps/data/DataModule; (414)
  10-21 15:40:54.902: W/dalvikvm(3725): Link of class 'Lcom/pps/data/DataModule;' failed
  10-21 15:40:54.902: D/dalvikvm(3725): DexOpt: unable to opt direct call 0x0bcf at 0x05 in Lcom/pps/data/DataManager;.<init>
  10-21 15:40:54.902: D/AndroidRuntime(3725): Shutting down VM
  10-21 15:40:54.902: W/dalvikvm(3725): threadid=1: thread exiting with uncaught exception (group=0x40a4e1f8)
  10-21 15:40:54.932: E/AndroidRuntime(3725): FATAL EXCEPTION: main
  10-21 15:40:54.932: E/AndroidRuntime(3725): java.lang.NoClassDefFoundError: com.pps.data.DataModule
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at com.pps.data.DataManager.<init>(DataManager.java:17)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at com.pps.data.DataManager.getInstance(DataManager.java:31)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at com.pps.jamaica.MainActivity.onCreate(MainActivity.java:21)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at android.app.Activity.performCreate(Activity.java:4465)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2033)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
  10-21 15:40:54.932: E/AndroidRuntime(3725):   at android.app.ActivityThread.access$600(ActivityThread.java:132)
 10-21 15:40:54.932: E/AndroidRuntime(3725):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
 10-21 15:40:54.932: E/AndroidRuntime(3725):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at android.os.Looper.loop(Looper.java:137)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at android.app.ActivityThread.main(ActivityThread.java:4575)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at java.lang.reflect.Method.invokeNative(Native Method)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at java.lang.reflect.Method.invoke(Method.java:511)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
10-21 15:40:54.932: E/AndroidRuntime(3725):     at dalvik.system.NativeStart.main(Native Method) 
```

我该如何解决这个问题，还是我不能使用 Guice 框架来开发 Android 开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:25:08.037

如果您`NoClassDefFoundError`在运行时获得，那么我怀疑您没有包含在运行时工作的 .jar 文件。您必须像这样检查每个 .jar 的复选框：

![在此处输入图像描述](../Images/0768261d28c9ae4c94edaeac086c1f76.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T23:10:53.293

我通过将 .java 文件移动到另一个项目并将它们移回原始项目来解决这个 NoClassDefFoundError，所以 eclipse 重建它的引用。

# objective-c - NSString intValue 不能用于检索电话号码

> ID：13001287
> 
> 赞同：0
> 
> 时间：2012-10-21T19:19:29.067
> 
> 标签：objective-c, cocoa-touch, nsstring, type-conversion, phone-number

我有一个格式为易于阅读的电话号码的电话号码，即`(123) 123-4567`

`int`但是，当我想在代码中使用该电话号码时，我需要将该字符串解析为一个数字变量（例如

但是，`[string intValue];` **不起作用**-我`intValue`在以前的项目中使用了大约一百万次，都没有问题，但是在这里，我传入的每个字符串，我得到的都是相同的，随机`int`退出：

```
- (int)processPhoneNumber:(NSString *)phoneNumber {
      NSMutableString *strippedString = [NSMutableString stringWithCapacity:10];

      for (int i=0; i<[phoneNumber length]; i++) {
           if (isdigit([phoneNumber characterAtIndex:i])) {
                  [strippedString appendFormat:@"%c",[phoneNumber characterAtIndex:i]];
           }
      }

     NSLog(@"clean string-- %@", strippedString);

     int phoneNumberInt = [strippedString intValue];

     NSLog(@"**** %d\n &i", phoneNumberInt, phoneNumberInt);

     return phoneNumberInt;
} 
```

然后当我调用这个方法时：

```
NSLog(@"%i", [self processPhoneNumber:self.phoneNumberTextField.text]); 
```

我得到：`2147483647`。 **我给这个方法的每个输入都会返回：`2147483647`**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:37:33.033

正如 CRD 已经解释的那样，您正在尝试将该字符串转换为太小而无法容纳该值的类型，并且您正在取回该类型的最大可能值。

然而，你真正的问题是更深层次的。电话“号码”并不是真正的号码。它不代表数量。你永远不会对一个进行算术运算。它实际上是一串数字，你应该这样处理它。不要转换它；只需对字符串进行操作。

另请参阅[表示电话号码的正确方法是](https://stackoverflow.com/questions/3483156/whats-the-right-way-to-represent-phone-numbers)什么？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T19:25:04.480

2147483647 是溢出时返回的*INT_MAX*。您的电话号码有多大，可以放入一个`int`吗？也许你应该使用`longLongValue`？

# ruby-on-rails - 从 Rails 3.0.3 更新到 Rails 3.0.10 到 Rails 3.2.8 后，参数数量错误（1 对应 0）

> ID：13001289
> 
> 赞同：1
> 
> 时间：2012-10-21T19:19:31.803
> 
> 标签：ruby-on-rails

我最近将我的 Rails Web 应用程序从 3.0.3 升级到了 3.0.10。并得到错误的参数数量（1 代表 0）错误。我想我会抛出一个“冰雹玛丽”通行证，并希望升级到 Rails 3.2.8 会让事情变得更好。不是！:-)

我对可能导致这种情况的原因感到困惑，而且我是新手，无法破译堆栈跟踪。这是我的堆栈跟踪。我会很感激一些帮助。

我离开了我的主人，所以我总是可以从头开始，但到目前为止我已经尝试了两次，结果相同。

```
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `display'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `send_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `process_action'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:403:in `_run__1653335973__process_action__374356064__callbacks'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `send'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `send'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
vendor/ruby/1.8/gems/cells-3.8.6/lib/cell/rendering.rb:7:in `render_state'
vendor/ruby/1.8/gems/cells-3.8.6/lib/cell/caching.rb:83:in `render_state'
vendor/ruby/1.8/gems/cells-3.8.6/lib/cell/rendering.rb:105:in `render_cell_state'
vendor/ruby/1.8/gems/cells-3.8.6/lib/cell/rack.rb:27:in `render_cell_state'
vendor/ruby/1.8/gems/cells-3.8.6/lib/cell/rendering.rb:100:in `render_cell_for'
vendor/ruby/1.8/gems/cells-3.8.6/lib/cells/rails.rb:53:in `render_cell'
app/views/home/index.html.erb:1:in `_app_views_home_index_html_erb__617638568_2260825620'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `send'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/template.rb:145:in `render'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications.rb:125:in `instrument'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/template.rb:143:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:47:in `render_template'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:46:in `render_template'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/template_renderer.rb:18:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:36:in `render_template'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_view/renderer/renderer.rb:17:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:110:in `_render_template'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/streaming.rb:225:in `_render_template'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:103:in `render_to_body'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:88:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:16:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `render'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:308:in `realtime'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/core_ext/benchmark.rb:5:in `ms'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:40:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
vendor/ruby/1.8/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:39:in `render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `process_action'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:414:in `_run__1183885179__process_action__918435846__callbacks'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `send'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `send'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
vendor/ruby/1.8/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal.rb:203:in `dispatch'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_controller/metal.rb:246:in `action'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:36:in `call'
vendor/ruby/1.8/gems/journey-1.0.4/lib/journey/router.rb:68:in `call'
vendor/ruby/1.8/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
vendor/ruby/1.8/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:600:in `call'
vendor/ruby/1.8/gems/warden-1.2.1/lib/warden/manager.rb:35:in `call'
vendor/ruby/1.8/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'
vendor/ruby/1.8/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/head.rb:14:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/flash.rb:242:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/cookies.rb:339:in `call'
vendor/ruby/1.8/gems/activerecord-3.2.8/lib/active_record/query_cache.rb:64:in `call'
vendor/ruby/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:28:in `call'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `_run__1199251717__call__4__callbacks'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `send'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `send'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:65:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
vendor/ruby/1.8/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
vendor/ruby/1.8/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/rack/log_tailer.rb:17:in `call'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/handler/webrick.rb:13:in `run'
vendor/ruby/1.8/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/commands.rb:55
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
vendor/ruby/1.8/gems/railties-3.2.8/lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

这是整个错误消息：

![错误信息](../Images/d136ed92d18c86445df4d64d7d8e72f1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:40:17.197

此问题已关闭。答案是 Cells 控制器方法需要将参数传递给它们。

在我的单元格控制器中，我应该有一个方法，例如：

```
def display(quote)
   @quote = Quote.first

  render
end 
```

相反，我所拥有的（并在 ruby​​ 1.8.7 和 rails 3.0.3 下工作）是：

```
 def display
   @quote = Quote.first

  render
end 
```

我的错误关闭！特别感谢 Nick Sutterer，他耐心地帮助我解决了这个新手错误！

# sql-server-2005 - 将第一个单元格复制到第二个单元格，然后将小时数添加为 int (DATEPART)

> ID：13001293
> 
> 赞同：0
> 
> 时间：2012-10-21T19:19:45.870
> 
> 标签：sql-server-2005, datetime, stored-procedures, datepart

我在表中有如下数据。

```
TimeIn                   TimeOut           
-------------------------------------
6/1/2010 09:00:00   Null     
6/2/2010 09:00:00   6/2/2010 16:45:00       
6/3/2010 10:05:00   Null                    
6/4/2010 07:30:00   6/4/2010 15:45:00 
```

我有存储过程来查找带有“未注销”列的最后一个活动

我也有一个将单元格复制到其他单元格的存储过程...

然后，我需要的是更新 [TimeOut] （如果没有超时）

通过更优雅的方式，比如

`UPDATE TimeOut SET DATEPART(HOUR, TimeOut) = DATEPART(HOUR, TimeIN) + 8`

所以整个想法是首先检查最后一个活动 - 超时列是否为空

然后如果是，请签署 TimeOut 并允许最长工作时间 (8)。

有简单的方法吗？

## 更新

至于马克的回答，这是找出用户是否没有退出的选择

```
SELECT CASE WHEN [TimeOut] IS NULL THEN '' ELSE CONVERT(NVARCHAR,[TimeOut]) END FROM tblTime WHERE tId = ( SELECT MAX(tId) FROM tblTime WHERE UserId = 123 
```

所以我有一个查询来查找谁没有在最后一次活动中退出

那么我只需要更新那个特定的 Row - 字段`TimeOut`

+ 8 有几个小时的时间，这是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:17:17.897

看起来你应该使用`dateadd`.

```
UPDATE TimeOut 
SET TimeOut = DATEADD(HOUR, 8, TimeIN)
WHERE .... 
```

这将设置`TimeOut`为`TimeIn`加八小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:31:52.053

```
UPDATE tblTime  SET TimeOut = DATEADD(HOUR,8,TimeIn) WHERE tId = ( SELECT MAX(tId) FROM tblTime WHERE UserId = 1234) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:22:10.447

添加一个`where TimeOut IS NULL`子句，使其仅更新该字段实际为空的那些？

# tomcat - Web 应用程序未连接到 Oracle 11g R2

> ID：13001296
> 
> 赞同：0
> 
> 时间：2012-10-21T19:20:10.713
> 
> 标签：tomcat, oracle11g

我有一个使用 tomcat 在 oracle 9i 上运行良好的 Web 应用程序，当我想升级时，我已经在 Windows 7 64 位机器上安装了 Oracle 11g 第 2 版和 JDK 7 和 apache tomcat7，以便在将其安装到我的机器上之前检查兼容性。

`oralce11g/jdbc/lib`我已经创建了 dsn 并测试连接成功，在以及 tomcat lib 文件夹中安装了 ojdbc6、ucp、orai18n ，但我使用 jdbcodbc 驱动程序的应用程序仍然没有连接到 Oracle 11gR2 数据库。

请逐步指导我，因为我也是 tomcat 和 oracle 11g 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:38:41.163

我自己解决了，我只将 ojdbc6 添加到 rtomcat lib，错误是之前我添加了 ojdbc6_g、ora18n、ojdbc5、ojdbc6dms、ojdbc14。我已经删除了除 ojdbc6 之外的所有添加的文件。现在它工作正常......无论如何感谢这个平台

# c++ - 使用 Make 包含一个 .cpp 文件

> ID：13001301
> 
> 赞同：0
> 
> 时间：2012-10-21T19:20:26.247
> 
> 标签：c++, makefile, cmake

我想将 GeometricRecognizer.cpp 包含到 run.cpp 中，我有适用于 CMake 的解决方案（下文提到），我想将它包含在另一个使用 make 格式的项目中，下面也给出了。如何添加依赖项使用 makefile 的 GeometricRecognizer.cpp ？

制作：

```
ADD_EXECUTABLE(run run.cpp lib/GeometricRecognizer.cpp)
TARGET_LINK_LIBRARIES(run) 
```

制作 ：

```
INCS_GTK=-I/usr/include/gtk-2.0 -I/usr/include/glib-2.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 
INCS=-I/usr/include/freetype2 -I/usr/include/mysql -Iframeworks ${INCS_GTK}
LDLIBS=-lconfig++ -lcxcore -lcv -lGL -lGLU -lglut 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:11:56.203

CMake 文件中的这一行不包含另一个 cpp 文件中的 cpp 文件：

```
ADD_EXECUTABLE(run a.cpp b.cpp) 
```

它创建一个名为的可执行目标`run`，它是编译和链接这些文件的`a.cpp`结果`b.cpp`。

在您的 Makefile 中，以下几行：

```
MAINCXX=${shell find -name '*.cxx'}
TARGETS=${MAINCXX:%.cxx=%} 
```

是实际设置要编译的可执行目标的两条重要线以及它们是从哪些源文件创建的。从这两行中可以看出，它只是源树`MAINCXX`中所有文件的列表，并且只是没有部分的相同列表（所以如果 MAINCXX=run.cxx 那么它将是 TARGETS=run.cxx）`*.cxx``TARGETS``.cxx`

您的 makefile 似乎经过大量设计以支持该特定用例，真正的 Make 魔术也发生在 Makefile 的最后一行，其中包含另一个 Makefile。

您需要查看命名的文件`generic.mk`并了解它的设计方式。如果您只想添加另一个目标，可以添加以下内容：

```
 run: run.cpp lib/GeometricRecognizer.cpp
     g++ -o run $(DEFINES) $(INCS) $(WARNINGS) run.cpp lib/GeometricRecognizer.cpp 
```

源文件列表可以用 GNU Make 中的内置变量替换。

# javascript - 横幅加载时的高度和宽度

> ID：13001307
> 
> 赞同：0
> 
> 时间：2012-10-21T19:20:52.660
> 
> 标签：javascript, javascript-events

我正在尝试制作横幅。横幅由*宽度*和*高度的百分比组成*。加载主体后，它在所有分辨率下都应该看起来不错。但是，我的代码似乎不起作用。如果有人可以看看它，将不胜感激。

```
 <script>
    function load()
    {

      document.write("Available Width: " + Math.round((screen.availWidth)/5));

      a=document.getElementById('banner');
      a.style.width=Math.round((screen.availWidth));
      a.style.height=Math.round((screen.availHeight)/5);
    }
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:26:33.580

您需要指定样式属性的单位。

```
a.style.width = … + 'px'; 
```

此外，使用该变量的`var`语句，以`a`防止`a`泄漏到全局范围（如果它不是有意的）。

**更新：也尝试删除`document.write`呼叫。**

# java - 这个 servlet 如何返回视图的内容？

> ID：13001308
> 
> 赞同：0
> 
> 时间：2012-10-21T19:20:54.333
> 
> 标签：java, servlets

我正在查看与路由匹配的 servlet：

```
 @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    for (Map.Entry<Function<HttpServletRequest, Matcher>, Handler<Matcher>> handlerEntry : handlerMap.entrySet()) {
      Matcher matcher = handlerEntry.getKey().apply(req);
      if (matcher != null) {
        resp.setCharacterEncoding("utf-8");
        resp.setContentType("text/html");
        handlerEntry.getValue().handle(req, resp, matcher);
        return;
      }
    }
    resp.setStatus(404);
  } 
```

参考：[https ://github.com/spullara/twickery/blob/master/src/main/java/twickery/web/Router.java#L59](https://github.com/spullara/twickery/blob/master/src/main/java/twickery/web/Router.java#L59)

您可以在此处查看视图模板：[https ://github.com/spullara/twickery/tree/master/src/main/resources/templates](https://github.com/spullara/twickery/tree/master/src/main/resources/templates)

我对它们如何链接在一起感到困惑，我假设以某种方式从 servlet 返回，在某个地方返回，然后将其用作“模型”注入视图。

有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:24:38.803

魔术是在行中完成的`handlerEntry.getValue().handle(req, resp, matcher);`。

抱歉，我不会下载该代码，但请检查`Handler.getValue().handle()`. 我很确定它负责渲染视图。提示是该`handle()`方法接收 HttpServletRequest 和 HttpServletResponse，因此它可以从请求中获取任何参数，并将任何内容写入响应。

# c++ - 如何从字符串位置构造 CString/std::string

> ID：13001309
> 
> 赞同：0
> 
> 时间：2012-10-21T19:20:57.593
> 
> 标签：c++, cstring, stdstring

鉴于以下情况：

```
for( std::string line; getline( input, line ); )
{
        CString strFind = line.c_str();
        int n = strFind.ReverseFind( '\\' );

        CString s = CString( strFind,n );

        cout << s << endl;
      // m_Path.push_back( line.c_str() );  
} 
```

它正在读取 .ini 配置，在这个 .ini 上我有一行：

C:\Downloads\Insanity\Program\7\. 世界.exe

此行添加到`vector<CString>`.

我的问题是`int n = strFind.ReverseFind( '\\\' );`找到第一个 \ 的字符串 pos 从字符串的末尾搜索到开头，在构造像这样的 CString 之后，`CString s = CString( strFind,n );`我正在构造字符串上的 FIRST n 个字符，所以`s`是相等的`C:\Downloads\Insanity\Program`，但我想要的是复制`7 .World.exe`到 CString`s`而不是其他方式，我该如何使用`CString`or来做到这一点`std::string`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:48:47.387

您是否将其转换`std::string`为`CString`仅用于`ReverseFind`功能？如果是这样，您可以[`std::basic_string::find_last_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_last_of)改用。

```
#include <iostream>
#include <string>

int main()
{
  std::string s(R"(C:\Downloads\Insanity\Program\7\. World.exe)");

  auto pos = s.find_last_of( '\\' ) + 1; //advance to one beyond the backslash
  std::string filename( s, pos );
  std::cout << filename << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:28:25.140

怎么样：

```
CString s = strFind.Mid(n+1); 
```

或者：

```
std::string s = line.substr(n+1); 
```

# java - 使用 ServiceMix 与 Tomcat/WAR 模型的优缺点是什么？

> ID：13001314
> 
> 赞同：1
> 
> 时间：2012-10-21T19:21:18.527
> 
> 标签：java, tomcat, jvm, esb, apache-servicemix

我曾经为大量 Tomcat/WAR 项目部署工作过一段时间，但现在正在考虑 ESB 模型（即 SericeMix）。为什么我应该对转换感兴趣？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T16:13:56.260

If you want the best of both worlds, I would look into Apache Camel. It gives you a lot of the ESB functionality out of the box and can be deployed into any container including tomcat and servicemix.

ServiceMix can be frustrating because often times you are locked into certain version of projects like Camel, CXF and WSS4J. You can manually upgrade the container to contain the versions that you need but this can be difficult. However, the ServiceMix team with version 4.5.x has been a lot better about releasing minor versions to accommodate this. When building a WAR, you just select your project versions/build/deploy.

The other thing about an OSGi container is that not all projects have OSGi ready bundles for you. For example, in the past I needed Apache POI with specific functionality. I had to go ahead and create the OSGi bundle on my own.

The advantages to the OSGi container are that the bundles you build are very small in size and not bloated with jar files and you can have different versions of bundles running at the same time. However as Wulfgar says, if you don't need this functionality, it might be easier to stay clear of it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T03:08:59.363

根据我自己的经验。

ServiceMix 和一般的 OSGi 往往会使您的部署模型过于复杂。

如果您没有利用 OSGi 的好处，即注册服务、创建片段包等，并且您正在做您通常使用 Tomcat、Jetty 等所做的事情，我会避开。

另一方面，如果您正在创建小型、可重用的捆绑包，并希望引入消息传递、队列和其他 ESB 类型的功能等服务，则根据我的经验，ServiceMix 为我提供了我期望从ESB。

我也在使用[OBR](http://felix.apache.org/site/apache-felix-osgi-bundle-repository.html)，它极大地简化了依赖关系的解决。使用 ServiceMix（具体来说是 Apache Karaf），目前似乎没有办法*不*安装可选依赖项，这让我很伤心，不得不处理包冲突。

# jquery - jQuery检查高度是否改变

> ID：13001322
> 
> 赞同：0
> 
> 时间：2012-10-21T19:22:14.550
> 
> 标签：jquery

行。所以我使用下面的代码来调整 div 的高度，但由于设计是流畅的（我不希望它固定）。它工作得很好，但是一旦高度改变而不重新加载页面，高度就会有错误的值。

因此，我需要添加某种检查高度是否已更改，然后在不重新加载页面的情况下对其进行更新。**我只想要 jQuery 解决方案**，请不要提交任何 CSS 解决方案，因为该脚本也将用于不是其他人的孩子或父母的 div。

```
 $("#conten_area .sticky_note:has(.right_panel)").each(function (index, value) {
    var $this = $(this);
        current = $this.height();
        current = current+22;

        $this.find(".right_panel").height(current);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:31:00.033

以下应该做你需要的。没有侦听器可用于其他代码所做的更改或用户交互，除非您创建自定义事件并从其他代码触发它以运行该`resizePanels`函数。

```
function resizePanels() {
    $("#conten_area .sticky_note:has(.right_panel)").height( function(index, height) { 
        $this.find(".right_panel").height(height +22);
    });
}

/* resize panels when window resized*/
$(window).resize(function(){
     resizePanels();
})

/* resize panels on page load*/
$(function(){
    resizePanels();

}) 
```

​</p>

# c# - 我想将 union 用作带有字节数组的 C#

> ID：13001327
> 
> 赞同：4
> 
> 时间：2012-10-21T19:22:34.563
> 
> 标签：c#, union, packets

我对串行通信中的消息解析有所了解，有许多不同形式的数据包。但它们都是由字节数组发送的。

所以我想使用联合来解析每条消息。但效果不佳。以下代码是我出错的示例代码

```
[StructLayout(LayoutKind.Explicit, Size=12)]
public struct UnionPacket
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=12)]
    public byte[] data;

    [FieldOffset(0)]
    public float Time;
    [FieldOffset(4)]
    public Int16 CoordX;
    [FieldOffset(6)]
    public Int16 CoordY;
    [FieldOffset(8)]
    public byte Red;
    [FieldOffset(9)]
    public byte Green;
    [FieldOffset(10)]
    public byte Blue;
    [FieldOffset(11)]
    public byte Alpha;
} 
```

如果这是可能的，它会非常高兴，但事实并非如此。此代码发生 TypeLoadException “...因为它包含偏移量 0 处的对象字段，该对象字段未正确对齐或被非对象字段重叠。”

所以我改变了一些这样的代码

```
[StructLayout(LayoutKind.Explicit, Size= 12)]
public struct UnionPacket
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 12)]
    [FieldOffset(0)]
    public byte[] data;

    //[FieldOffset(0)]
    //public float Time;
    [FieldOffset(4)]
    public Int16 CoordX;
    [FieldOffset(6)]
    public Int16 CoordY;
    [FieldOffset(8)]
    public byte Red;
    [FieldOffset(9)]
    public byte Green;
    [FieldOffset(10)]
    public byte Blue;
    [FieldOffset(11)]
    public byte Alpha;
} 
```

为了测试，我只是禁用了偏移量为 0 的时间字段，这并没有发生异常。但是，如果我更改其他字段，它不会更改字节数组。我认为字节数组的实际内存位置是在其他堆中分配的，所以无法完成。

有没有办法在 C# 中解决这个问题？只有 C++ 或 C 可以解决这个问题吗？如果我将它与继承一起使用，有可能吗？

PS对不起我的英语不好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T20:39:38.780

我不是 100% 确定您要做什么，但是：

第一种方法，如果将数组与固定/不安全的关键字一起使用，则可以将数组存储在结构中。我不知道这对你来说是否可行。所以有这样的代码应该可以工作：

```
[StructLayout(LayoutKind.Explicit, Size = 12)]
public unsafe struct UnionPacket
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 12)]
    [FieldOffset(0)]
    public fixed byte data[12];

    [FieldOffset(0)]
    public float Time;
    [FieldOffset(4)]
    public Int16 CoordX;
    [FieldOffset(6)]
    public Int16 CoordY;
    [FieldOffset(8)]
    public byte Red;
    [FieldOffset(9)]
    public byte Green;
    [FieldOffset(10)]
    public byte Blue;
    [FieldOffset(11)]
    public byte Alpha;
} 
```

当然，你必须在 VS 中启用不安全的代码块并使用它来包装你的结构：

```
unsafe
{
    var u = new UnionPacket();
    for (byte i = 0; i < 12; i++)
    {
         u.data[i] = i;
    }
    Console.WriteLine(u.Time);
    Console.WriteLine(u.CoordX);
    Console.WriteLine(u.CoordY);        
    Console.WriteLine(u.Red);
    Console.WriteLine(u.Green);
    Console.WriteLine(u.Blue);
    Console.WriteLine(u.Alpha);
} 
```

其他方法是 - 只是忘记结构内的这个数组，并使用以下方式处理解析`Marshal.Copy`：

```
[StructLayout(LayoutKind.Explicit, Size = 12)]
public struct UnionPacket2
{
    [FieldOffset(0)]
    public float Time;
    [FieldOffset(4)]
    public Int16 CoordX;
    [FieldOffset(6)]
    public Int16 CoordY;
    [FieldOffset(8)]
    public byte Red;
    [FieldOffset(9)]
    public byte Green;
    [FieldOffset(10)]
    public byte Blue;
    [FieldOffset(11)]
    public byte Alpha;
}

static void Main(string[] args)
{
    var len = Marshal.SizeOf(typeof(UnionPacket2));
    var buffer = new byte[len];
    for (byte i = 0; i < len; i++)
    {
        buffer[i] = i;
    }

    var ptr = Marshal.AllocHGlobal(len);
    Marshal.Copy(buffer, 0, ptr, len);
    var u = (UnionPacket2)Marshal.PtrToStructure(ptr, typeof(UnionPacket2));
    Marshal.FreeHGlobal(ptr);
    Console.WriteLine(u.Time);
    Console.WriteLine(u.CoordX);
    Console.WriteLine(u.CoordY);
    Console.WriteLine(u.Red);
    Console.WriteLine(u.Green);
    Console.WriteLine(u.Blue);
    Console.WriteLine(u.Alpha);
} 
```

# llvm - 在新通道、LLVM 中使用现有通道生成的信息

> ID：13001330
> 
> 赞同：2
> 
> 时间：2012-10-21T19:22:40.160
> 
> 标签：llvm

我想问的是，我们可以将现有通行证生成的信息用于新的通行证吗？如果是，那么如何？
例如 -loops 给出了自然循环的信息，那么我们可以通过调用它来将这些信息用于新的 pass。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:28:23.663

您可以通过覆盖依赖传递将传递标记为依赖于另一个传递`getAnalysisUsage()`，然后通过调用访问该传递的实例`getAnalysis()`。然后，您可以在该实例上调用您想要的任何方法以从中获取信息。

# javascript - 为什么 el.style.backgroundImage 在此功能上下文中不起作用？

> ID：13001333
> 
> 赞同：3
> 
> 时间：2012-10-21T19:22:47.830
> 
> 标签：javascript

我为这个问题写了一个答案：[根据 url 的新背景](https://stackoverflow.com/questions/13000944/new-background-according-to-url)，我在答案中发布的代码是检查 URL 是否存在特定字符串，如果存在，则更改给定元素的背景图像。

所以！我是我，我想我会尝试避免使用 jQuery，并使用以下更传统的 vanilla JavaScript 方法：

```
var images = {
    'halloween' : '/images/newbackground.jpg',
    'christmas' : '/images/xmasbackground.jpg'
};

var url = document.location.href,
    elem = document.getElementById('elementThatYouWantToStyle');

for (var keyword in images){
    if (images.hasOwnProperty(keyword) && url.indexOf(keyword) !== -1) {
        elem.style.backgroundImage = images[keyword];
    }
} 
```

[来源](https://stackoverflow.com/a/13001019/82548)。

然后我认为我会转换为功能方法，所以它变成了这样：

```
var images = {
    'halloween': 'http://davidrhysthomas.co.uk/img/dexter.png',
    'christmas': 'http://davidrhysthomas.co.uk/img/mandark.png'
};

function setBG(el, map, url) {
    if (!el || !map) {
        return false;
    }
    else {
        var url = url || document.location.href,
            el = el.nodeType == 1 ? el : document.getElementById(el);
        for (var keyword in map) {
            if (map.hasOwnProperty(keyword) && url.indexOf(keyword) !== -1) {
                el.style.backgroundImage = encodeURIComponent(map[keyword]);
            }
        }
    }
}

setBG('one', images, 'http://some.domain.com/with/halloween.jpg');
setBG(document.getElementById('two'), images, 'http://some.domain.com/with/christmas.jpg'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VsZ4f/1/)。

现在，如果我在循环内`console.log()`的`if`评估中添加一个，`for...in`它表明我们正在进入循环，并且控制台[表明我对 DOM 节点、图像对象、URL 有一个准确的引用（传递给函数) 并且正在从对象中获取正确的值](http://jsfiddle.net/davidThomas/VsZ4f/2/)。

*但是*，我尝试设置`el.style.backgroundImage`属性的以下行*不起作用*（无论我是否将我的逻辑明显缺陷？为什么不被设置？`map[keyword]``encodeURIComponent()`*`el.style.backgroundImage`*

 *（顺便说一句，JS Fiddle 的 JS Lint*似乎*对此很满意（除了重新定义现有变量 (`url`和`el`) 以实现回退/默认）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T19:28:49.587

您正在声明一个已定义为参数的局部变量`url`，并且您还需要使用.`var url``url``url(http:/xxxx)`

更改为此（`var`在 url 前面删除`url`并添加`url()`周围的 url）：

```
function setBG(el, map, url) {
    if (!el || !map) {
        return false;
    }
    else {
        url = url || document.location.href;
        el = el.nodeType == 1 ? el : document.getElementById(el);
        for (var keyword in map) {
            if (map.hasOwnProperty(keyword) && url.indexOf(keyword) !== -1) {
                el.style.backgroundImage = 'url(' + map[keyword] + ')';
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T19:28:27.350

除非您将URL`backgroundImage`包装在`url()`.

```
el.style.backgroundImage = 'url(' + map[keyword] + ')'; 
```

[**小提琴**](http://jsfiddle.net/ult_combo/VsZ4f/3/)

* * *

此外，您不应该[`encodeURIcomponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)使用整个 URL，否则它甚至会对协议`:`和`/`'s 进行编码，从而导致 404（由于现在缺少协议）被解释为相对 URL：

> 获取[http://fiddle.jshell.net/_display/http%3A%2F%2Fdavidrhysthomas.co.uk%2Fimg%2Fdexter.png](http://fiddle.jshell.net/_display/http%3A%2F%2Fdavidrhysthomas.co.uk%2Fimg%2Fdexter.png) 404（未找到）

相反，为了更安全地编码完整的 URI，您可以使用[`encodeURI`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)：

```
el.style.backgroundImage = 'url("' + encodeURI(map[keyword]) + '")'; 
```

[**小提琴**](http://jsfiddle.net/ult_combo/VsZ4f/8/)

**注意：** MDN 提到，`encodeURI`在不同的浏览器中可能无法按预期使用 GET 请求，即包含查询字符串的 URL。我无法重现该问题。

* * *

同样正如@jfriend00 所指出的，`var`关键字 before`url`是不必要的，因为它已经属于函数范围，因为它被声明为*正式参数*。阅读更多：[JavaScript 作用域和提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)*

# ios - 是否可以将 iOS 应用程序移植到 Windows 商店 Metro 应用程序

> ID：13001337
> 
> 赞同：0
> 
> 时间：2012-10-21T19:23:27.353
> 
> 标签：ios, microsoft-metro, windows-runtime, windows-store-apps

我想将一个简单的 iOS 应用程序移植到一个 Windows Metro 应用程序。

它基本上是一个围绕 a`UINavigationController`和`UIWebView`. （链接点击将新推`UIWebView`入`UINavigationController`）

这是可行的吗？这样做会有多困难？

我是否必须在服务器端进行重大更改？有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:35:05.543

[如果它真的是一个包含在导航控制器中的 Web 视图，则端口本身应该相当简单，您应该能够在 Windows 商店应用程序（即WebView](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)）中以类似的方式包装事物

除非您在创建站点时非常小心，否则端口的大部分可能是确保该应用程序在*所有分辨率*下都能正常运行。iOS 支持的可能分辨率相当少，而 Windows 商店应用程序支持 Windows 8 支持的任何分辨率（即几乎任何当前和/或未来的屏幕分辨率）您或多或少需要使用某种[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)。

# c# - 序列化数据太大

> ID：13001339
> 
> 赞同：1
> 
> 时间：2012-10-21T19:23:29.510
> 
> 标签：c#, serialization, protobuf-net

我为每个播放器服务器端序列化数据，大小约为 128kb。我序列化了一个 [255,255] 布尔数组，这是映射所必需的，我可以使用哪些替代方法，因为我听说 gzip 实际上会增加大小？

我听说过 protobuf-net，但它没有记录，互联网上也没有例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T21:33:58.113

我要做的第一件事是：不要将数据存储在一个`bool[,]`- 效率非常低下，而且存储起来真的很痛苦。我会编写一个将其填充到平面的包装器`byte[]`：

```
public sealed class BitGrid
{
    public BitGrid() {
        // 255 * 255 = 32 bytes per row, 255 rows
        bytes = new byte[8160];
    }
    public BitGrid(byte[] data)
    {
        if (data == null) throw new ArgumentNullException("data");
        if (data.Length != 8160) throw new ArgumentException("data");
        this.bytes = data;
    }

    readonly byte[] bytes;

    public bool this[byte x, byte y]
    {
        get
        {
            int xByte = x / 8, xBit = x % 8;
            byte val = bytes[(32 * y) + xByte];
            switch (xBit)
            {
                case 0: return (val & 1) != 0;
                case 1: return (val & 2) != 0;
                case 2: return (val & 4) != 0;
                case 3: return (val & 8) != 0;
                case 4: return (val & 16) != 0;
                case 5: return (val & 32) != 0;
                case 6: return (val & 64) != 0;
                case 7: return (val & 128) != 0;
            }
            throw new InvalidOperationException("oops!");
        }
        set
        {
            int xByte = x / 8, xBit = x % 8;
            int offset = (32 * y) + xByte;
            byte val = bytes[offset];
            if (value)
            {
                switch (xBit)
                {
                    case 0: val |= 1; break;
                    case 1: val |= 2; break;
                    case 2: val |= 4; break;
                    case 3: val |= 8; break;
                    case 4: val |= 16; break;
                    case 5: val |= 32; break;
                    case 6: val |= 64; break;
                    case 7: val |= 128; break;
                }
            }
            else
            {
                switch (xBit)
                {
                    case 0: val &= 254; break;
                    case 1: val &= 253; break;
                    case 2: val &= 251; break;
                    case 3: val &= 247; break;
                    case 4: val &= 239; break;
                    case 5: val &= 223; break;
                    case 6: val &= 191; break;
                    case 7: val &= 127; break;
                }
            }

            bytes[offset] = val;
        }
    }
    public byte[] ToArray()
    {
        return (byte[])bytes.Clone();
    }
} 
```

然后序列化它，它只是：

```
byte[] data = grid.ToArray();
// store "data" 
```

并反序列化，它只是：

```
byte[] data = ...
grid = new BitGrid(data); 
```

您可以使用/方法保存/加载`byte[]`磁盘到磁盘或从磁盘加载，或者如果您有其他数据要存储，那么任何标准序列化程序都可以与. 此数据将始终为 8160 字节 - 略低于 8k。`File.ReadAllBytes``File.WriteAllBytes``byte[]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:29:02.910

您可以使用（一维）[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)进行序列化。这会将位打包成字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T19:33:26.977

如果将布尔值表示为位并将序列化为二进制，则只有大约 8 KB。

如果您需要作为文本，请使用 base64 序列化二进制文件，这将使其大​​约 12 KB。

将二维数组展平为一维数组，并从中生成一个`BitArray`。

例子：

```
bool[] bools = { true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true };

BitArray bits = new BitArray(bools);
byte[] bytes = new byte[3];
bits.CopyTo(bytes, 0);

Console.WriteLine(BitConverter.ToString(bytes));
Console.WriteLine(Convert.ToBase64String(bytes)); 
```

输出：

```
FF-FF-0F
//8P 
```

# c - 如何跳过一行中的第一个字符 - C

> ID：13001340
> 
> 赞同：0
> 
> 时间：2012-10-21T19:23:36.930
> 
> 标签：c

我有一个简单的程序，它读取一行，包含 3 个数字。我需要跳过第一个数字，这是“产品”中的代码。

所以，我只需要阅读第二个和第三个字符。

我怎样才能做到这一点？

到目前为止的代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int calculate_price (number, value)
{
    int price=0;
    price= number*value;
    return price;
}

int main(void)
{
    int number, value, u,price;
    FILE  *bill, *total_price;
    bill= fopen("bill.txt","rt");
    total_price= fopen("total_price.txt","wt");

    if (bill== NULL)
    {
        printf("The file cannot be open.\nQuitting the program.\n");
        exit(1);
    }

    if (total_price== NULL)
    {
        printf("The file canno be written.\nQuitting the program.\n");
        exit(1);
    }

    while (fscanf(bill, "%d %d",&number, &value) != EOF)
    {
        u=calculate_price(number, value);
        fprintf(total_price,"The total price is %d\n", u);
    }
    printf("File created sucessfully. Check the file.\n");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:30:22.583

这应该适合你：

```
fscanf(bill, "%*d %d %d", &number, &value) 
```

来自 scanf 文档：

> 可选的 '*' 赋值抑制字符：scanf() 按照转换规范的指示读取输入，但丢弃输入。不需要相应的指针参数，并且此规范不包括在 scanf() 返回的成功分配计数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:25:59.957

```
int main(void)
{
    int number, value, u,price;
    int dummy; //this is a dummy var 
```

...

```
while (fscanf(bill, "%d %d %d",&dummy, &number, &value) != EOF)
{
    u=calculate_price(number, value);
    fprintf(total_price,"The total price is %d\n", u);
}
printf("File created sucessfully. Check the file.\n"); 
```

**编辑**之前我使用 char 作为假人，因为不知何故我首先误解了这个问题，但我更正它是一个 int ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T19:25:43.843

尝试这样的事情：

```
fscanf(bill, "%d %d %d", &product, &number, &value) 
```

...然后忽略`product`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T19:25:57.233

最简单的方法是`scanf`将数字转换为虚拟（未使用）变量：

```
int product, number, value;
...
while(fscanf(bill, "%d %d %d", &product, &number, &value)) {
    ...
} 
```

# ruby - 获取季度的开始/结束日期

> ID：13001341
> 
> 赞同：3
> 
> 时间：2012-10-21T19:23:39.910
> 
> 标签：ruby, date

我将如何计算日期的[季度开始/结束日期](http://en.wikipedia.org/wiki/Calendar_year)？例如，如果我给出`"2012-10-11"`我想要的方法：`{ :begin_date => '2012-10-01', :end_date => '2012-12-31' }`

```
def quarter_dates(date = Date.today)
  # TODO...
  return {
    :begin_date => begin_date,
    :end_date => end_date
  }
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T19:56:58.490

[ActiveSupport](https://rubygems.org/gems/activesupport)[`beginning_of_quarter`](http://api.rubyonrails.org/classes/Date.html#method-i-beginning_of_quarter)仅为此提供[`end_of_quarter`](http://api.rubyonrails.org/classes/Date.html#method-i-end_of_quarter)：

```
require 'active_support/core_ext/date/calculations'

def quarter_dates(date = Date.today)
  {
    begin_date: date.beginning_of_quarter,
    end_date: date.end_of_quarter
  }
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T19:46:51.513

像这样的东西应该工作：

```
def quarter_dates(date = Date.today)
  start_month = date.month - (date.month - 1) % 3
  start_date  = Date.new(date.year, start_month, 1)

  {
    :begin_date => start_date,
    :end_date   => (start_date >> 3) - 1
  }
end 
```

为了帮助您理解，请参阅以下内容：

```
(1..12).map { |month| month - (month - 1) % 3 }
#=> [1, 1, 1, 4, 4, 4, 7, 7, 7, 10, 10, 10] 
```

日期的运算符`>>`将在`n`几个月后返回日期，`- 1`并将返回前一天的日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:49:17.263

## 参考：

使用此处提供的季度日期范围：[http ://en.wikipedia.org/wiki/Calendar_year](http://en.wikipedia.org/wiki/Calendar_year)

> 1.  第一季度：1月初至3月底
> 2.  第二季度：4月初至6月底
> 3.  第三季度：7月初至9月底
> 4.  第四季度：10月初至12月底

## [日期](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)和[范围](http://www.ruby-doc.org/core-1.9.3/Range.html)语法：

一个简单的解决方案将使用如下逻辑：

```
# Is today's date in Q4?

(Date.parse('2012-10-01')..Date.parse('2012-12-31')).cover?(Date.today) 
```

## 解决方案：

按照这个逻辑：

```
def quarter_dates(date = Date.today)

  4.times do |i|
    start = Date.parse("#{date.year}-#{i*3+1}-01")
    if (start..(start >> 3 - 1)).cover?(date)
      return {
        :begin_date => start,
        :end_date => (start >> 3) - 1
      }
    end
  end

end 
```

有些地方有点脏，但我认为它应该给你一个良好的开端。

# glassfish-3 - Apex 侦听器和 Glassfish 3 不断给我 HTTP 状态 403 - 访问请求的资源已被拒绝

> ID：13001348
> 
> 赞同：0
> 
> 时间：2012-10-21T19:24:38.400
> 
> 标签：glassfish-3, oracle-apex

我坚持了一整天试图弄清楚这一点。我已经检查了逐步文档中的所有设置。任何人都可以给我一些线索。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:24:14.093

看来我必须取消部署 apex 侦听器并确保使用正确领域的服务器配置并再次部署它。解决了

# asp.net - sql server 更新插入语句

> ID：13001349
> 
> 赞同：2
> 
> 时间：2012-10-21T19:24:39.817
> 
> 标签：asp.net, sql-server

我有一个存储过程，它首先检查一些记录是否存在。如果已经存在，则执行更新语句（如果更新语句工作正常，则返回受影响的行，否则返回值为 -1000 的变量），否则它选择值为 -2000 的变量。

问题是如果我在 sql server 中执行它可以正常工作，但是当我从 C# 调用它时，它返回 current_indent('') 或者只返回 -1 没有 -1000 或 -2000。

```
 USE [youfuntube]
    GO
    ALTER PROCEDURE [dbo].[usp_change_pass]     
    @e_mail varchar(60),
@old_pass varchar(27),
@new_pass varchar(27)
    AS
    BEGIN
declare @exist int;
Set @exist =0;

Select @exist=COUNT( userinfo_signup.e_mail) from userinfo_signup where userinfo_signup.e_mail=@e_mail;
if(@exist>0)
BEGIN
    SET @exist=0;
    SELECT @exist= COUNT ( userinfo_signup.e_mail) from userinfo_signup Where userinfo_signup.e_mail=@e_mail And userinfo_signup.password=@old_pass;
    if(@exist>0)
        Begin
            UPDATE userinfo_signup
            Set password=@new_pass
            Where e_mail=@e_mail AND password=@old_pass;
            Select IDENT_CURRENT( 'userinfo_signup');
        End
    ELSE
        begin
            Set @exist=-1000;
            SELECT @exist;
        end
    END
ELSE
    BEGIN
        SET @exist=-2000;
        Select @exist;
END
  END
  GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:03:59.377

我会尝试使用 MERGE 命令而不是 if 存在。这里简单介绍一下命令：http: [//blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete /](http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/)

# html - 将 div 内的 div 和 div 内的 div 居中对齐

> ID：13001351
> 
> 赞同：1
> 
> 时间：2012-10-21T19:24:59.927
> 
> 标签：html, center, vertical-alignment, alignment

我在中心（水平）对齐我的一个 div 和中心（垂直）的另一个 div 时遇到问题。

水平 div 是网站中间部分（按钮）的包装。

垂直 div 是按钮之间“Eller”的包装。

[http://www.vilduhelst.dk](http://vilduhelst.dk)

我已经尝试过使用“Margin: 0px auto;” 财产，根本没有任何结果。

这是我的 CSS 代码：

```
body{
background: url(media/pattern.png);
}

.headerdiv{
text-align:center;
margin-top:50px;
width:223px;
height:121px;
background: url(media/logo.png) no-repeat bottom;
margin-left:auto;
margin-right:auto;

}

.topbardiv{
padding-top:60px;
text-align:center;
background: url(media/HeaderDepression_shadow.png) no-repeat bottom;
}

 #buttons{
margin-top:100px;
width:100%;
height:227px;
text-align:center;

}

.buttonscontent{
width:90%;
margin: 0px auto;
}

.reddiv{
float:left;
display:inline;
background: url(media/RedButtonShadow.png) no-repeat bottom;

}

.redbutton{
background: url(media/RedButton.png) no-repeat bottom;
width:387px;
height:227px;
border:none;
display:inline;
margin-bottom:25px;
}

.redbutton:hover{
background: url(media/RedButtonHover.png) no-repeat bottom;
}

.redbutton:active{
background: url(media/RedButtonOnclick.png) no-repeat bottom;
}

.textdiv{
text-align:center;
float:left;
padding-left:30px;
padding-right:30px;
height:200px;
}

.textdivcontent{
background: url(media/Eller.png) no-repeat;
height:95px;
width:129px;

}

.bluediv{
display:inline;
float:left;
background: url(media/RedButtonShadow.png) no-repeat bottom;
}

.bluebutton{
background: url(media/BlueButton.png) no-repeat bottom;
width:387px;
height:227px;
border:none;
display:inline;
margin-bottom:25px;

}

.bluebutton:hover{
background: url(media/BlueButtonHover.png) no-repeat bottom;
}

.bluebutton:active{
background: url(media/BlueButtonOnclick.png) no-repeat bottom;
}

.footerseperation{
padding-top:175px;
text-align:center;
background: url(media/FooterSeperation.png) no-repeat bottom;
}

.copyright{
background: url(media/copyright.png) no-repeat bottom;
margin-left:auto;
margin-right:auto;
width:205px;
height:24px;
} 
```

这是我的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"     "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
<head>
    <title> Hvad vil du helst? - Dilemma</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <div class="headerdiv">

    </div>

    <div class="topbardiv">

    </div>

        <div id="buttons">

            <div class="buttonscontent">

                <div class="reddiv">
                    <input type="button" class="redbutton" />
                </div>

                <div class="textdiv">
                    <div class="textdivcontent">

                    </div>
                </div>

                <div class="bluediv">
                    <input type="button" class="bluebutton" />
                </div>

            </div>

        </div>

        <div class="footerseperation">

        </div>

        <div class="copyright">
        </div>
</body>
</html> 
```

# python - Project Euler #10 - Python 错误的结果

> ID：13001354
> 
> 赞同：0
> 
> 时间：2012-10-21T19:25:10.740
> 
> 标签：python

[欧拉计划 #10](http://projecteuler.net/problem=10)

我正在使用以下代码：

```
import math

def is_prime(num):
    num_sqrt=int(math.sqrt(num))+1
    for i in range(2, num_sqrt):
        if(num%i == 0):
            return False
    return True

prime_sum=3
counter=2

for a in range(5, 2000000, 2):
    if(is_prime(a)):
        counter = counter +1
        print a, counter
        prime_sum=prime_sum+a

print prime_sum 
```

结果我得到了`142913828920`

上述程序输出的最后 10 行是：

```
1999859 148925
1999867 148926
1999871 148927
1999889 148928
1999891 148929
1999957 148930
1999969 148931
1999979 148932
1999993 148933
142913828920 
```

网站[http://www.numberempire.com/primenumbers.php](http://www.numberempire.com/primenumbers.php)确认 1999993 是第 148933 个素数（-> [http://www.numberempire.com/primenumbers.php?number=1999993&action=check](http://www.numberempire.com/primenumbers.php?number=1999993&action=check)）。

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:34:37.840

您正在`prime_sum`错误地初始化变量。前两个素数是 2 和 3，所以它应该是 5（不是 3）。在现代数学中，1 通常不被认为是素数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:28:42.473

It violates the spirit of Project Euler to post code purporting to be a whole solution (or even an attempt at a whole solution). It's an even greater breach of spirit to post an answer.

imho.

Gerry

# c++ - 创建类型结构的指针数组

> ID：13001356
> 
> 赞同：0
> 
> 时间：2012-10-21T19:25:29.450
> 
> 标签：c++, arrays, pointers

```
struct Vertex{
    int num;
    int low;
    bool seen;
    Vertex *parent;
    Vertex(){
        num = 0; low = 0; seen = false; parent = NULL;
    }
}; 
```

这是结构。问题是当我尝试创建一个 Vertex 类型的数组时，调试器指出它是非指针类类型。这就是我声明它的方式：

```
Vertex *mark;
mark = new Vertex[numVert]; 
```

（标记在类中声明，赋值在默认构造函数中完成）。

我之前已经完全像这样声明了指针数组。它现在不起作用的原因是什么？

```
Graph::Graph(int v){
int i;
numVert = v;
count = 0;
mark = new Vertex[numVert];
matrix = new int*[numVert];
for (i=0;i<numVert;i++){
    mark[i]->seen = false;
    matrix[i] = new int[numVert];
    for (int j=0; j<numVert;j++)
        matrix[i][j]=0;
    }
} 
```

这是它最初被调用的地方。它声明它在数组的分配和它的'seen'成员的分配上都是非指针类型的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:33:58.877

线

```
mark = new Vertex[numVert]; 
```

在内存中分配`numVert`对象（调用每个对象的默认构造函数）并返回第一个对象的地址。在这方面，您的代码是完全合法的。

调试器说对象`mark`指向的不是指针，这是正确的（它是一个对象数组）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-21T19:36:01.147

尝试这个：

```
Vertex **mark[numVert]; 
mark = new Vertex *[numVert]; 
```

# azure - 了解 Azure 缓存服务

> ID：13001360
> 
> 赞同：2
> 
> 时间：2012-10-21T19:25:57.243
> 
> 标签：azure

通过缓存，我们基本上是指复制数据以加快访问速度。例如 -

*   将经常使用的数据从数据库存储到内存中。
*   在客户端浏览器中存储网页的静态内容。

云托管已经使用最近的数据中心 ( `CDN`) 为用户提供内容。我的问题是，如何`Caching Service`使它更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:22:27.937

CDN 用于通过引入更接近客户的透明代理数据中心来提高服务数据中心和客户之间的交付性能。CDN 通常设置为缓存 - 以便来自不同客户的请求可以由相同的“CDN 应答”提供服务，而无需调用源服务数据中心。此配置主要用于卸载对 jpeg、javascript 等共享资源的请求。

Azure 缓存服务用于服务数据中心内的服务背后。与内置的 ASP.NET 缓存不同，Azure 缓存作为单独的服务运行，并且可以在服务器/服务之间共享。通常，您的服务会使用它来存储跨会话或创建成本高的信息 - 例如来自数据库的查询结果。你在交易：

*   缓存项目的内存值（时间/金钱）
*   创建项目的成本（时间/金钱）
*   您希望重复使用该项目的次数。
*   信息的“新鲜度”

例如，您可以使用内存缓存来减少查询 Azure 表的次数，因为您希望多次重复使用相同的信息，执行查询的延迟很高，并且您可以忍受可能“过时”的信息”。这样做可以为您节省资金并提高系统的整体性能。

您通常会将进程外 Azure 缓存与机器内/进程内缓存“分层”，这样对于频繁查询，您可以按如下方式提取信息：

1.  最佳 - 首先查看本地/本地缓存
2.  更好 - 查看开箱即用的 Azure 服务缓存，然后使用结果加载本地缓存
3.  好 - 调用/查询昂贵的资源，使用结果加载 Azure 缓存和本地缓存

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T12:24:50.473

在说任何话之前，我想向您指出这一点（非常相似的讨论）： [使用缓存还是 CDN 更好？](https://stackoverflow.com/questions/12916430/is-better-use-cache-or-cdn/12937173#12937173)

话虽如此，这就是 CDN 和缓存可以提高您网站性能的方式。

**CDN**：此服务可帮助您对最终用户保持“封闭”状态。使用 CDN，您的网站内容将分布在一个服务器系统上，每个服务器都在自己的位置。每台服务器都将保存您站点的冗余副本。当访问者访问时，CDN 系统将识别他/她的位置并从最近的服务器（也称为 POP 或代理）提供内容。

例如：从澳大利亚访问时，您将成为澳大利亚服务器的服务器。从美国访问时，您将成为美国服务器等的服务器......

CDN 对我来说最有用的是您的网站在其直接区域之外运行。（即 CDN 对您没有帮助，因为您的网站推广本地锁匠服务，只有来自您所在城市的访问者。只要您的原始服务器就在附近......）

此外，整体覆盖范围并不重要。您只需要确保网络覆盖所有与您的一天 2 天操作相关的位置。

**缓存**：提供对静态或/和常用内容对象的更快访问。例如，如果您的主页上有一张图片，并且该图片被所有访问者一次又一次地下载，您应该缓存它，以便回访者已经将它存储在他/她的 PC 中（在浏览器缓存）。这将节省时间，因为本地资源将快速加载并节省带宽 - 因为图像将从访问者的计算机而不是从您的服务器加载。

CDN 和缓存通常结合使用，因为此设置允许您将缓存存储在 CDN 网络上。

此外，这种双重设置还可以帮助提高缓存效率 - 例如，它可以通过将智能算法引入“顶级”CDN 层来帮助进行动态缓存。

这是有关[动态缓存](http://www.incapsula.com/the-incapsula-blog/item/414-advanced-caching-dynamic-through-learning)的更多信息（也很好地介绍了 HTTP 缓存指令）

正如您可能已经知道的那样，通过阅读上面提到的帖子，没有一种方法更好，并且它们在结合时处于最佳状态。

希望这能回答

总帐

# android - 使用 MediaPlayer 多次重叠播放同一个文件

> ID：13001363
> 
> 赞同：8
> 
> 时间：2012-10-21T19:26:13.763
> 
> 标签：android, android-mediaplayer

**我的android应用程序目前正在发生什么：**

我将一个简单的图像映射到一个按钮，让它在点击时播放声音。每次单击时，我都会在我的原始文件夹中创建一个带有声音文件的 MediaPlayer 对象，我为该 MediaPlayer 对象设置一个 OnClickListener，它会停止播放文件并释放它，然后我播放 MediaPlayer 对象。

**定义部分的代码：**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_activity);
    ImageButton start = (ImageButton) findViewById(R.id.imageButton1);
    start.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            MediaPlayer play = MediaPlayer.create(MainActivity.this, R.raw.dvno);
            play.setOnCompletionListener(new OnCompletionListener() {
                public void onCompletion(MediaPlayer mp) {
                    mp.stop();
                    mp.release();
                    mp = null;
                }
            });
            play.start();
        }
    });
} 
```

**它出什么问题了：**

它工作正常并且不会崩溃，但它对内存来说很糟糕，而且通常非常慢。我希望用户尽可能快地连续多次单击该按钮，然后听到声音在重叠的情况下一遍又一遍地瞬间播放。在每次单击时创建一个新的 MediaPlayer 对象并等待它完成并释放会消耗太多资源，并且声音通常滞后于实际按下按钮。我希望能够创建一个单一的声音作为 MediaPlayer 对象，可以在自身重叠的同时播放。

**可能的解决方案：**

在 onCreate 而不是 onClick 范围内创建单个最终 MediaPlayer 对象，并以某种方式使用线程在每次单击时启动 MediaPlayer 对象。我读到这可能是一个可能的解决方案，但我以前从未使用过线程，我不知道它们是否比我当前的代码慢，如果不慢，所以我想知道是否有不使用可能更简单的线程的解决方案。在这一点上，操纵单个 MediaPlayer 的状态以使其自身重叠似乎是不可能的，但也许我错了。

这会因为非法状态而使程序崩溃吗？如果没有，这会比我想要的慢吗？如果没有，任何人都可以建议修复我的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T19:39:11.650

我建议您为此使用 SoundPool 而不是 MediaPlayer。教程在[这里](http://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool)

# php - PHP 上传限制和 cURL

> ID：13001366
> 
> 赞同：0
> 
> 时间：2012-10-21T19:26:30.387
> 
> 标签：php, apache, curl, upload, amazon-s3

我正在使用具有 2MB 限制的共享主机来使用 php 上传文件。所以我想知道如果我使用 cURL 将超过 2MB 的文件上传到我的 S3 amazon，它会工作吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T22:51:15.663

看看[这个](http://aws.amazon.com/articles/1434)。

这样您就可以完全避免通过您的网络服务器上传文件，这意味着没有最大尺寸问题和更少的工作量。您只需指定回调 URL 即可。

# java - 将所有 Maven 依赖项添加到 Arquillian

> ID：13001371
> 
> 赞同：26
> 
> 时间：2012-10-21T19:26:54.580
> 
> 标签：java, jakarta-ee, maven, jboss-arquillian

如何将 POM 中的所有依赖项添加到 arquillian？

```
Maven.resolver().loadPomFromFile("pom.xml").importRuntimeDependencies()
                .as(File.class); 
```

我找到了那条线，但我`Maven`在 intellij 中是红色的，因为它没有找到类。我不知道我需要哪些依赖项。还是有更好的方法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-06-07T14:57:56.707

## 添加 Arquillian 依赖项

将 Arquillian 依赖项添加到您的`pom.xml`：

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.jboss.arquillian</groupId>
            <artifactId>arquillian-bom</artifactId>
            <version>1.1.8.Final</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
    </dependencies>
</dependencyManagement> 
```

将 ShrinkWrap 解析器（Maven 实现）添加到您的`pom.xml`：

```
<dependency>
    <groupId>org.jboss.shrinkwrap.resolver</groupId>
    <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
    <scope>test</scope>
</dependency> 
```

如果您使用的是 JUnit，请将 Arquillian JUnit 容器添加到您的`pom.xml`：

```
<dependency>
    <groupId>org.jboss.arquillian.junit</groupId>
    <artifactId>arquillian-junit-container</artifactId>
    <scope>test</scope>
</dependency> 
```

## 导入 Maven 依赖项

在您的测试类中，在使用 注释的方法中`@Deployment`，使用以下行导入运行时依赖项：

```
File[] files = Maven.resolver().loadPomFromFile("pom.xml")
        .importRuntimeDependencies().resolve().withTransitivity().asFile(); 
```

并使用以下方法将依赖项添加到您的部署中`addAsLibraries(files)`：

```
WebArchive war = ShrinkWrap.create(WebArchive.class)
                           .addClass(MyClass1.class)
                           .addClass(MyClass2.class)
                           .addClass(MyClass3.class)
                           .addAsLibraries(files); 
```

## 如果您使用 JUnit，这就是您的测试类的样子

```
import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.asset.EmptyAsset;
import org.jboss.shrinkwrap.api.spec.WebArchive;
import org.jboss.shrinkwrap.resolver.api.maven.Maven;
import org.junit.Test;
import org.junit.runner.RunWith;
import static org.junit.Assert.*;
import java.io.File;

@RunWith(Arquillian.class)
public class MyTestClassWithMavenDependencies {

    @Deployment
    public static WebArchive createDeployment() {

        // Import Maven runtime dependencies
        File[] files = Maven.resolver()
                            .loadPomFromFile("pom.xml")
                            .importRuntimeDependencies()
                            .resolve()
                            .withTransitivity()
                            .asFile();

        // Create deploy file    
        WebArchive war = ShrinkWrap.create(WebArchive.class)
                                   .addClass(MyClass1.class)
                                   .addClass(MyClass2.class)
                                   .addClass(MyClass3.class)
                                   .addAsLibraries(files);

        // Show the deploy structure
        System.out.println(war.toString(true)); 

        return war;
    }

    // Create your tests here
} 
```

* * *

[**注 1：**上述解决方案已使用 Arquillian 进行了测试`1.1.8.Final`。[检查文档](http://arquillian.org/modules/core-platform/#artifacts)中最新版本的 Arquillian 工件。]

[**注意 2：**有关如何解决依赖关系的更多详细信息，请查看[ShrinkWrap Resolvers 文档](https://github.com/shrinkwrap/resolver#resolving-dependencies)。]

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T18:36:10.147

我和你有同样的错误。这是因为收缩包装版本不正确。在第二段代码中查看正确的版本。

```
package alehro.testgf2;

import java.io.File;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.Archive;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.WebArchive;
import org.jboss.shrinkwrap.resolver.api.maven.Maven;
import org.joda.time.DateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;

import alehro.p1.C1;
import alehro.p1.C2;

@RunWith(Arquillian.class)
public class Test1 {

    @Deployment
    public static Archive<?> createTestArchive()  {
         File[] libs = Maven.resolver().loadPomFromFile("pom.xml").importRuntimeAndTestDependencies().asFile();

        WebArchive res = ShrinkWrap.create(WebArchive.class, "test.war");
        for(File file : libs){
            res.addAsLibrary(file);
        }       
        res.addPackages(true, "alehro.p1");

        return res;          

    }
    @Test
    public void test1(){
            //third party lib
        DateTimeFormatter inputDF = DateTimeFormat.forPattern("d MMM yyyy HH:mm:ss Z");
        DateTime dt1 = inputDF.parseDateTime("28 Nov 2012 23:23:23 +04");           
        Assert.assertNotNull(dt1);  

            //all classes from alehro.p1
        Assert.assertEquals("Failure", "I'm C1", C1.getMyName()) ;
        Assert.assertEquals("Failure", "I'm C2", C2.getMyName()) ;

    }
} 
```

我在解决 Maven 依赖项时遇到了困难。以下是可行的解决方案，但我相信它可以进一步简化。

```
<dependencies>
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <scope>test</scope>

    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-glassfish-remote-3.1</artifactId>
        <scope>test</scope>
        <version>1.0.0.CR3</version>
    </dependency>

    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-api</artifactId>
        <version>2.0.0-alpha-5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
        <version>2.0.0-alpha-5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-api-maven</artifactId>
        <version>2.0.0-alpha-5</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.jboss.shrinkwrap.resolver</groupId>
            <artifactId>shrinkwrap-resolver-bom</artifactId>
            <version>2.0.0-alpha-5</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian</groupId>
            <artifactId>arquillian-bom</artifactId>
            <version>1.0.3.Final</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>

    </dependencies>
</dependencyManagement> 
```

最初的想法来自这里：[如何将 Maven 工件添加到我的 ShrinkWrap 档案中？](https://community.jboss.org/wiki/HowToIAddMavenArtifactsToMyShrinkWrapArchives)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-21T20:43:39.813

这篇 dzone 文章[Using the ShrinkWrap Maven Resolver for Arquillian Tests](http://java.dzone.com/articles/using-shrinkwrap-maven)可能很有用。它建议：

```
<dependency>
  <groupId>org.jboss.shrinkwrap.resolver</groupId>
  <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
</dependency> 
```

当您不知道它在哪个工件中时，您可以找到一个类的另一种方法是使用[search.maven.org](http://search.maven.org/)。这是您要查找的课程的搜索：

*   [fc:"org.jboss.shrinkwrap.resolver.api.maven.Maven"](http://search.maven.org/#search%7Cga%7C1%7Cfc%3A%22org.jboss.shrinkwrap.resolver.api.maven.Maven%22)

它显示了包含该类的工件。但是，该类位于 API jar 中，您还需要上述和上述文章中提到的实现 jar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T06:27:52.153

The org.jboss.shrinkwrap.resolver.api.maven.Maven class is included by shrinkwrap-resolver-impl-maven 2.0.0-beta-1 or later.

# grails - 检查用户是否登录 grails Titan

> ID：13001378
> 
> 赞同：1
> 
> 时间：2012-10-21T19:27:33.357
> 
> 标签：grails, login, titanium-mobile

我正在构建一个移动应用程序，该应用程序连接到我的使用 spring 安全核心的 grails 应用程序。我在钛工作室构建应用程序。我如何检查用户在移动应用程序上有一个打开的会话。我使用以下代码登录：

```
 var xhr = Ti.Network.createHTTPClient();
           var url = "http://localhost:8080/FYP/j_spring_security_check";
           var postData = "";
           postData += 'j_username=' + usernameField.value;
           postData += '&j_password=' + passwordField.value;
           postData += '&_spring_security_remember_me=on';
           Ti.API.debug(url);
           xhr.open("POST", url);
           xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
           xhr.onload = function() {

                var response = JSON.parse(xhr.responseText);
                win.close({animate:true});
                slidingMenu.open({animate:true});
               if( response.error ){
                 alert( response.error );
               } else {
                 //logged in now do something
               }
           };
           xhr.onerror = function(){
             Ti.API.error( "Error Logging in" );   
           };
           xhr.send(postData); 
```

但是我如何检查用户是否已经登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:58:21.563

我只是使用应用程序级别的变量。在需要保护数据的情况下，我总是将存储的用户名和密码传递给服务器，因此每次都必须进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:25:48.000

在 grails 中使用自定义方法

```
springsecurityservice.isLoggedIn() 
```

并`GET`提出请求:)

# javascript - jQuery SerialScroll 循环参数

> ID：13001380
> 
> 赞同：2
> 
> 时间：2012-10-21T19:27:46.337
> 
> 标签：javascript, jquery, scrollto, serialscroll

大家——我目前正在使用 SerialScroll（和 ScrollTo）来支持我网站上的下一个和上一个功能。SerialScroll 中是否有设置允许循环参数在到达系列末尾时继续向右移动，而不是一直向左滚动回到开头？如果我有四个部分（例如 a、b、c、d），它将从 a --> b --> c --> d --> a --> b --> 等开始，而无需向后滚动c 和 b 当它循环到 a 时。

相反，当用户使用上一个按钮时，我正在寻找相同的功能。例如 d --> c --> b --> a --> d --> c --> etc. 当它循环到 d 时，不通过 b 和 c 向后滚动。

我没有使用 AutoScroll 选项，而是要求我的用户单击下一个或上一个按钮。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:39:31.207

我不太了解，但我认为他们想要一个重复的循环，但要连续。

这个我可以帮忙。

[http://jquery.malsup.com/cycle2/demo/carousel.php](http://jquery.malsup.com/cycle2/demo/carousel.php)

# scala - 访问 ExecutionContext

> ID：13001381
> 
> 赞同：4
> 
> 时间：2012-10-21T19:27:51.390
> 
> 标签：scala, akka, future

我有这个特质

```
trait NonBlockingGoodness extends DataStore {
  import akka.dispatch.{ Future, ExecutionContext }
  import akka.util.duration._
  import akka.util.Timeout

  implicit val ec = ExecutionContext.fromExecutorService(yourExecutorServiceGoesHere)
  implicit lazy val timeout = Timeout(5 seconds)     
} 
```

我想访问`ExecutionContext`像这样的另一个特征

```
trait AsyncGoodness extends NonBlockingGoodness {
  import akka.dispatch.Future

  def doSomething = {
    Future { "Future is the bomb." }
  } 
```

但是，我收到了错误

```
Could not find implicit value for parameter executor: akka.dispatch.ExecutionContext 
```

**更新：** 我想出了如何获得`ExecutionContext`范围

```
trait AsyncGoodness extends NonBlockingGoodness {
  import akka.dispatch.ExecutionContext
  import akka.dispatch.Future

  def doSomething()(implicit executor: ExecutionContext) = {
    Future { "Future is the bomb." }
  } 
```

但是，我有一个后续问题。由于我可能有不止一种方法`AsyncGoodness`使用`ExecutionContext`，有没有办法在`trait`级别而不是像我上面所做的那样在每个方法中传递它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:57:25.803

我知道你宁愿不必导入任何额外的东西，但这样的东西应该适合你。

```
trait NonBlockingGoodness {
  import scala.concurrent.{ Future, ExecutionContext }
  import scala.concurrent.util.duration._
  import akka.util.Timeout

  object Implicit {
     implicit val ec = ExecutionContext.Implicits.global
     implicit lazy val timeout = Timeout(5 seconds)
  }

}

trait AsyncGoodness extends NonBlockingGoodness {
  import scala.concurrent.Future
  import Implicit._
  def doSomething = {
    Future { "Future is the bomb." }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:31:43.173

事实证明，我需要做的就是明确指定`ec`编译器使用它的返回类型。这是工作代码

```
trait NonBlockingGoodness extends DataStore {
  import akka.dispatch.{ Future, ExecutionContext }
  import akka.util.duration._
  import akka.util.Timeout

  implicit val ec: ExecutionContext = ExecutionContext.fromExecutorService(yourExecutorServiceGoesHere)
  implicit lazy val timeout = Timeout(5 seconds)     
}

trait AsyncGoodness extends NonBlockingGoodness {
  import akka.dispatch.Future

  def doSomething = {
    Future { "Future is the bomb." }
  } 
```

# java - 显示 ArrayList 中的文本

> ID：13001403
> 
> 赞同：1
> 
> 时间：2012-10-21T19:30:44.690
> 
> 标签：java, arraylist, jtextfield

我正在尝试将存储在 ArrayList 中的数据显示到 JtextField 中。例如，我想在数组中的点 0 处获取 (ID,Name,Age,Gender) 并将它们显示到 JtextFields 中。

我已经尝试了下面的代码，但它没有按预期工作：

```
for (int i = 0; i < GPSDataEnter.size(); i++) {
    LatTextData.append((String) GPSDataEnter.get(i));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:34:22.677

试试这个：

```
string ArrayData = string.Empty;
    ArrayList listData = new ArrayList();
        foreach (string textItem in listData)

        {

        ArrayData = ArrayData + ", " + textItem;

        }

   textBox1.setText(ArrayData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:34:59.073

您可以使用 JTextField 的 .setText() 方法。这是文档[http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html)

一个简短的例子：

```
ArrayList<String> myList = new ArrayList<String>();

... Fill up the list somehow ...

JTextField myField = new JTextField();
myField.setText(myList.get(0)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-11T11:00:19.930

试试这个：

```
for (int i = 0; i < MyArrayList.size(); i++) {
    MyJTextField.setText(MyJTextField.getText() + MyArrayList.get(i) + "\n");
} 
```

您的探针正在重写！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T19:38:13.373

我想你的 ArrayList 是

```
ArrayList<String> arrayList; 
```

然后，

```
JTextField.setText(arrayList[i]); //index of arrayList; 
```

# java - 如何使用java上传多个文件

> ID：13001405
> 
> 赞同：4
> 
> 时间：2012-10-21T19:31:17.107
> 
> 标签：java, file, ftp

我希望有人可以帮助我（再一次）。

我有大量的 smmll 文件（超过 4000 个），每个文件只有几 K。我用 java 编写了一个 FTP 程序，它将单独传输每个文件，但这需要很长时间。此外，握手开销似乎使问题变得更糟。

我想做的是打开 FTP 连接发送所有文件，然后再次关闭它。

我知道这在 FTP 中是可能的，但是如何在 java 中实现这一点超出了我的范围。

我目前将文件名放在一个数组中，因此解析它们是没有问题的。我尝试调用以下类并将文件名传递给它，但几个小时后它仍然每秒移动大约 1 个文件。

```
 package website;

    import java.io.BufferedOutputStream;
    import java.io.FileInputStream;
    import java.io.IOException;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.net.URLConnection;

    public class ftpUpload {

public ftpUpload(String target, String savename, String localFilePath) {

    URL url;
    try {
        url = new URL(target + savename + ";type=i");

        URLConnection con = url.openConnection();
        BufferedOutputStream out = 
            new BufferedOutputStream(con.getOutputStream());
        FileInputStream in = 
            new FileInputStream(localFilePath + savename);

        int i = 0;
        byte[] bytesIn = new byte[1024];
        while ((i = in.read(bytesIn)) >= 0) {
            out.write(bytesIn, 0, i);
        }
        out.close();
        in.close();

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

    } 
```

有没有办法可以使用 ftp 站点用户名和密码打开连接，然后将文件发送给它，最后关闭连接？

在我看来，这比创建多个线程同时发送文件更容易。

任何建议都非常受欢迎。

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:39:12.610

我认为使用 URLConnection 在一个会话中发送多个文件是不可能的，这意味着您需要为每个文件打开和关闭会话的开销。

[来自commons net](http://commons.apache.org/net/)的FTPClient确实支持一个会话中的多个操作。例如（省略异常处理）：

```
FTPClient ftp = new FTPClient();
ftp.connect("ftp.example.com");
ftp.login("admin", "secret");
ftp.setFileType(FTPClient.BINARY_FILE_TYPE);

for(File file : files) {
    InputStream in = new FileInputStream(file);
    ftp.storeFile(file.getName(), in);
    in.close();
}

ftp.disconnect(); 
```

这应该会有所帮助。

如果您仍然需要更好的性能，除了使用多线程之外，我没有看到任何其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:22:01.893

经过大量测试后，我发现公共服务器的多个 ftp 线程存在可靠性问题，这正是我在这种情况下所需要的。大多数（如果不是全部）ftp 服务器限制了最大连接数，并且还限制了来自同一 IP 地址的最大并发连接数。来自同一 IP 的两个并发连接似乎是您被允许的唯一保证的最大值。上面建议的现实选项是压缩文件并 ftp 单个文件。当文件到达那里时，您可以使用 php 脚本解压缩文件（只要服务器支持解压缩，您需要检查它是否包含在 php 构建中）。最后，如果像我一样，您需要上传超过 10,000 个文件，许多 ftp 服务器不会显示超过 9998 个文件（10,000 个，包括 . 和 ..

# java - 如何将 java 小程序与 javascript 一起使用

> ID：13001407
> 
> 赞同：0
> 
> 时间：2012-10-21T19:31:28.707
> 
> 标签：java, javascript, asp.net-mvc, applet

我如何使用 java 到 javascript：

步骤1：

我在 netBeans “Java 应用程序”中创建：

```
package com.mkyong.applet;

import java.applet.Applet;
import java.awt.FlowLayout;
import java.awt.TextArea;

public class JavaScriptToJava extends Applet{

    TextArea textBox;

    public void init(){
        setLayout(new FlowLayout());
        textBox = new TextArea(5,40);
        add(textBox);
    }

    public void appendText(String text){
        textBox.append(text);
    }       
} 
```

建成。获取复制文件`...\build\classes\com\mkyong\applet\JavaScriptToJava.class`到`~/Content/applets/`

第2步：

创建html视图：

```
<script type="text/javascript">
    $(document).ready(function() {
        document.AppletABC.appendText('welcome to mkyong dot com');
    })
</script>

<h1>Javascript acess Applet method</h1>
<applet width=300 height=100 id="AppletABC" code="com.mkyong.applet.JavaScriptToJava.class" codebase="~/Content/applets/JavaScriptToJava.class">
</applet> 
```

加载此页面，我看到“插件不是”一词。

我究竟做错了什么？我需要调用java

更新：

js错误：

> document.AppletABC.appendText('欢迎来到 mkyong dot com'); 未找到函数 appletABC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:26:50.410

使用标签**存档解决了问题**

# c# - “Microsoft JScript 运行时错误：无法获取属性‘长度’的值：对象为空或未定义”在 ModalPopupExtender 中

> ID：13001408
> 
> 赞同：1
> 
> 时间：2012-10-21T19:31:48.177
> 
> 标签：c#, javascript, asp.net, runtime, modalpopupextender

我正在使用 C# 和 asp.net 来执行以下操作。

当客户点击发送按钮时，我需要有一个确认弹出窗口。当客户按下“确定”时，我需要继续执行函数背后的代码。为此，我使用了 asp.net ModalPopupExtender。并在后面的代码中为“确定”和“取消”点击事件创建了 2 个函数。我的aspx代码如下：

```
<!-- Panel -->              

             <asp:Panel ID="pnlIssues" runat="server"  BorderColor="Black" BorderStyle="Outset"  BorderWidth="2" BackColor="Wheat" Width="400px"  Height="106px">                                                       

             <asp:UpdatePanel ID="UpdatePanel1" runat="server">
             <ContentTemplate>                            

             <asp:Button ID="btnWarning" runat="server"  Text = "Cancel" OnClick ="RefreshAfterCancel_Click" CausesValidation="false"  />
             <asp:Button ID="btnOK" runat="server" Text = "OK" OnClick="TransmitAfterOK_Click" CausesValidation="false"/>
              </ContentTemplate>
           </asp:UpdatePanel>    

            </asp:Panel>  

            <ajaxToolkit:ModalPopupExtender ID="WarningModal" TargetControlID="dummyLink2" BehaviorID="WarningModal"  PopupControlID="pnlIssues" runat="server" ViewStateMode="Enabled" CancelControlID="btnWarning" OkControlID = "btnOK">
             </ajaxToolkit:ModalPopupExtender>

              <asp:HyperLink ID="dummyLink2" runat="server" NavigateUrl="#" /> 
```

这是后面的代码：

```
protected void TransmitButton_Click(object sender, EventArgs e)
    {            
        WarningModal.Show();     

    }

    protected void RefreshAfterCancel_Click(object sender, EventArgs e)
    {
        try
        {

            Response.Redirect("~/ManageCases.aspx?CaseID=" + GlobalData.CaseID.ToString());

        }
        catch { }
    }

    protected void TransmitAfterOK_Click(object sender, EventArgs e)
    {

        .......} 
```

但是当我单击传输按钮时，它会打开弹出窗口，当我单击“确定”时，它会给我错误：

“Microsoft JScript 运行时错误：无法获取属性 'length' 的值：对象为空或未定义”。

当我单击“中断”并继续时，它会做它应该做的事情。我不明白为什么它会给出错误。此错误仅显示在 Internet Explorer 中。它在 FF 和 Chrome 中运行良好。另外，我在我的母版页中使用 RADScriptManager（如果有帮助的话）。

任何帮助将不胜感激。我一直试图解决这个问题两天没有任何运气。我已经尝试了针对此错误消息回答的所有提示，但仍然对我不起作用。先感谢您。

# youtube-api - 自动生成频道的 gdata youtube 提要

> ID：13001410
> 
> 赞同：7
> 
> 时间：2012-10-21T19:32:30.720
> 
> 标签：youtube-api

我试图弄清楚是否有可能为自动生成的 youtube 频道（又名“主题”）获取 gdata 提要。

例如，这里是 JPop 频道：

> [http://www.youtube.com/channel/HC9BkB0bbvR-4](http://www.youtube.com/channel/HC9BkB0bbvR-4)

如果这是一个用户，我知道我可以得到这样的提要：`http:// gdata.youtube.com/feeds/base/users/{username}/uploads`. 但由于它不是用户，因此不起作用。

我知道我可以进行类似的搜索：`http:// gdata.youtube.com/feeds/api/videos?v=2&q=jpop`，但这并不完全相同。

这个问题之前在[旧的 Youtube Developer Forum](https://groups.google.com/forum/?fromgroups=#!searchin/youtube-api-gdata/topics/youtube-api-gdata/SB3Jbengfvg/RDzQeZdh_lEJ)上被问过，但当时它不可用。

我查看了所有 API 文档以查看是否已更改，但找不到任何参考。

我希望这里的人可能知道它是否已更改，文档尚未更新，或者该功能是否有预期的 ETA？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:40:50.857

`HC`您可以像订阅任何其他频道一样订阅自动生成的主题频道（以 开头的频道）。

但是，如果您只想获取与频道关联的视频列表，则需要使用即将发布的 API v3，并且可以根据基础主题进行搜索。您可以使用以下方法获取与给定频道相关的主题 ID `channels.list(id=CHANNEL_ID)`：

[https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.channels.list?part=topicDetails&id=HC9BkB0bbvR-4](https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.channels.list?part=topicDetails&id=HC9BkB0bbvR-4)

（v3 目前尚未公开发布，因此您需要使用 Google APIs Explorer。）

这将返回 (Freebase) 主题 id `/m/025g__`，然后您可以使用它来执行`search.list(topicId=TOPIC_ID, q=BLAH, type=video)`

```
https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.search.list?part=snippet&type=video&q=j+pop&topicId=%252Fm%252F025g__ 
```

不幸的是，您现在无法在 v3 中进行仅指定 a`topicId=`而没有 a的搜索`q=`，但这是一个有望很快修复的错误。所以你确实需要`q=`暂时为参数指定一些有意义的东西，而我只是使用`j pop`.

# safari-extension - Safari 5.1 扩展开发错误-> event.userInfo 在尝试获取选定文本时返回 null

> ID：13001415
> 
> 赞同：0
> 
> 时间：2012-10-21T19:32:36.017
> 
> 标签：safari-extension

我正在尝试创建一个简单的 safari 扩展。我当前的 Safari 版本是 5.1.7，在 Snow Leopard 中运行。

我有 2 个文件：

全局.html

```
<!DOCTYPE HTML>
<script>
     safari.application.addEventListener("command", performCommand, false);  

function performCommand(event) {
 if (event.command === "traducir") {
    var query = event.userInfo;
    alert(query);
    query = query.replace(/\s+/g,"+");
    var newTab = safari.application.activeBrowserWindow.openTab();  
    newTab.url = "http://translate.google.es/#en/es/" + query ;
 }
}

</script> 
```

和注入的脚本：injected.js

```
document.addEventListener("contextmenu", handleMessage, false);

function handleMessage(msgEvent) {
  var sel = '';
  sel = window.parent.getSelection()+'';
  sel = sel.replace(/^\s+|\s+$/g,"");
  safari.self.tab.setContextMenuEventUserInfo(msgEvent, sel);
} 
```

扩展非常简单：

1-当用户选择一个文本或单词时，单击右键并选择引发功能的上下文菜单的项目。

2- 注入的文件获取所选文本的值，并通过 userInfo 与 global.html 共享。

3- global.html 脚本打开一个带有谷歌翻译网址的新标签。

问题是 event.userInfo 始终为 NULL。我在谷歌搜索，所有的例子都是这样的，我不知道问题出在哪里，为什么它总是返回 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:11:14.797

这可能是由于 Extension Builder 中的“访问级别”设置过于严格。尝试将下拉菜单设置为“全部”，然后勾选“包括安全页面”复选框。

# json - 自定义 JSON 输出 CakePHP

> ID：13001418
> 
> 赞同：3
> 
> 时间：2012-10-21T19:33:09.817
> 
> 标签：json, cakephp, json-view

```
 $user = $this->User->find( 'all' );
    $this->set( 'users', $user ); 
```

我的控制器中有这段代码。

在我看来，我有这个。

```
echo json_encode( compact( 'users' ) ); 
```

它像这样输出json

```
 {
    "users": [{
        "User": {
            "user_id": "2",
            "email": "email@test.com",
            "name": "Blah"
        }]
    }
} 
```

无论如何要格式化它以删除包装在“用户”中的整个数组，并删除每个作为“用户”成员的对象。

这使得在前端使用起来更加困难。我希望它看起来像这样。

```
[{
    "user_id": "2",
    "email": "email@test.com",
    "name": "Blah"
}] 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T20:18:28.857

我不完全理解“***删除包含在“用户”中的整个数组***”和“***删除作为“用户”成员的每个对象”的***意思，但是根据您想要的输出格式示例，您需要提取并将要编码的确切数据传递给`json_encode`，而不是使用 传递所有内容`compact`。

可以使用[`Set`](http://book.cakephp.org/1.2/en/view/640/Set)或[`Hash`](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)类进行提取（取决于您的 Cake 版本）

假设您的模型以默认的 CakePHP 格式返回数据，例如：

```
json_encode(Set::extract('/User/.', $users)); 
```

应该给你一个这样的结构：

```
[{
    "user_id": "2",
    "email": "email@test.com",
    "name": "Blah"
}] 
```

并且有多个用户，它应该看起来像这样

```
[{
    "user_id": "1",
    "email": "foo@test.com",
    "name": "Bar"
},
{
    "user_id": "2",
    "email": "email@test.com",
    "name": "Blah"
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T08:41:29.120

像这样使用：

```
$users= (Set::extract('/User/.', $users));
pr($users); 
```

它将`Model`从结果数组中删除，然后`json_encode`或任何进一步的使用。

更多库函数[Set class Here](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)和[Hash class Here](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)

# xaml - winrt xaml 合并资源

> ID：13001421
> 
> 赞同：3
> 
> 时间：2012-10-21T19:33:48.147
> 
> 标签：xaml, windows-runtime, resourcedictionary, mergeddictionaries

我需要将应用程序样式分成几个 xaml 文件。但我还需要定义一些共享值，例如

```
<x:Double x:Key="SharedValue">100</x:Double> 
```

在单个文件中用于在其他文件中定义的样式中使用此值。例如：

```
<Style x:Name="SomeStyle" TargetType="TextBox">
     <Setter Property="Width" Value="{StaticResource SharedValue}"/>
</Style> 
```

在另一个资源字典文件中：

```
<Style x:Name="AnotherStyle" TargetType="Button">
     <Setter Property="Height" Value="{StaticResource SharedValue}"/>
</Style> 
```

但是当我尝试在 App.xaml 文件中定义合并的资源字典时

```
<Application.Resources>
    <ResourceDictionary >
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="DefinedValues.xaml"/>
            <ResourceDictionary Source="Styles1.xaml"/>
            <ResourceDictionary Source="Styles2.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

我得到这个运行时异常：“消息 =”找不到具有名称/键 SharedValue 的资源”

你能告诉我这样做是否可行以及我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T04:33:28.213

如果您在其他合并词典之间存在依赖关系，则使用合并词典可能会有些棘手。

当您有多个应用程序范围的资源时，声明的顺序很重要。它们以声明的相反顺序解决，因此在您的情况下，您应该有顺序。

```
<Application.Resources>
<ResourceDictionary >
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Styles1.xaml"/>
        <ResourceDictionary Source="Styles2.xaml"/>
        <ResourceDictionary Source="DefinedValues.xaml"/>

    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

此外，您可能需要引用 Styles1.xaml 中的其他 ResourceDictionary。这在 Styles1.xaml 中对我有用。

```
<ResourceDictionary "...">

  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="SharedValues.xaml" />
  </ResourceDictionary.MergedDictionaries>

  <Style x:Name="AnotherStyle"
         TargetType="Button">
    <Setter Property="Height"
            Value="{StaticResource SharedValue}" />
  </Style>
</ResourceDictionary> 
```

# php - 如何在sql中从一个表到另一个表的数据替换过程中处理空值？

> ID：13001423
> 
> 赞同：0
> 
> 时间：2012-10-21T19:34:02.623
> 
> 标签：php, mysql, sql

我有一家电子商务商店，每周一次，仓库会在另一张桌子上放一次只改变价格的产品。如何用另一个表中所选产品的新价格更新第一个表中的价格？如果不能只使用 mysql，请随意使用一些 php。

我尝试了这个命令，但是当 SELECT 没有找到匹配项时，它会将我的原始价格更改为 0，而不是让它们保持不变。

```
UPDATE product_catalogue pc
SET pc.price = (SELECT new_price
                FROM product_catalogue_updated pcu
                WHERE pc.product_id = pcu.product_id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:40:50.883

```
UPDATE product_catalogue pc,product_catalogue_updated pcu 
SET pc.price = pcu.new_price 
WHERE pc.product_id = pcu.product_id 
```

在使用此查询之前备份您的数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:40:56.553

这是一种可能的解决方案：

```
UPDATE product_catalogue pc
SET pc.price = (
  SELECT new_price
  FROM product_catalogue_updated pcu
  WHERE pc.product_id = pcu.product_id
)
WHERE pc.product_id IN (
  SELECT pcu.product_id FROM product_catalogue_updated pcu
) 
```

~~这也可能有效：~~

这不起作用（但会很好）：

```
UPDATE product_catalogue pc
SET pc.price = (
  SELECT new_price
  FROM product_catalogue_updated pcu
  WHERE pc.product_id = pcu.product_id
) AS pprice
WHERE pprice IS NOT NULL 
```

# android - SoundManager 和 monitorenter 和 monitorexit

> ID：13001424
> 
> 赞同：2
> 
> 时间：2012-10-21T19:34:08.363
> 
> 标签：android, monitor, android-audiomanager

我尝试使用monitorenter和monitorexite来控制声音，这是我使用的代码，但这对我不起作用这些错误显示：monitorenter无法解析为变量，monitorenter无法解析为变量，localObject无法解析为变量

```
 public static SoundManager getInstance()
 {
  monitorenter;
    try
    {
      if (_instance == null)
        _instance = new SoundManager();
      SoundManager localSoundManager = _instance;
      monitorexit;
      return localSoundManager;
    }
    finally
    {
      localObject = finally;
      monitorexit;
    }
    throw localObject;
} 
```

# java - 打印出数组列表中的所有对象

> ID：13001427
> 
> 赞同：13
> 
> 时间：2012-10-21T19:34:26.657
> 
> 标签：java, arrays, printing, arraylist

我需要能够打印出我的数组列表中的学生对象（所有变量）。这可能吗？当我尝试打印时，它会输出这种东西，例如`student.Student@82701e`。我认为这是`hexadecimal`什么

这是我的代码：

```
package student;

public class Student {

    private String studentName;
    private String studentNo;
    private String email;
    private int year;

    public Student() {
        this.studentName = null;
        this.studentNo = null;
        this.email = null;
        this.year = -1;
    }

    public Student(String nName, String nNum, String nEmail, int nYr) {
        this.studentName = nName;
        this.studentNo = nNum;
        this.email = nEmail;
        this.year = nYr;
    }

    public void setStudentName(String newStudentName) {
        this.studentName = newStudentName;
    }

    public void setStudentNo(String newStudentNo) {
        this.studentNo = newStudentNo;
    }

    public void setEmail(String newEmail) {
        this.email = newEmail;
    }

    public void setYear(int newYear) {
        this.year = newYear;
    }

    public String getStudentName() {
        return studentName;
    }

    public String getStudentNo() {
        return studentNo;
    }

    public String getEmail() {
        return email;
    }

    public int getYear() {
        return year;
    }
}

package student;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class studentTest {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        List<Student> Students = new ArrayList();

        Student student1 = new Student();

        student1.setStudentName("Bob Marley");
        student1.setStudentNo("N0002");
        student1.setEmail("student2@student.com");
        student1.setYear(2);

        Students.add(student1);

        Student student2 = new Student();

        student2.setStudentName("Bill Harvey");
        student2.setStudentNo("N0003");
        student2.setEmail("student3@student.com");
        student2.setYear(2);

        Students.add(student2);

        Student student3 = new Student();

        student3.setStudentName("John Beans");
        student3.setStudentNo("N0004");
        student3.setEmail("student4@student.com");
        student3.setYear(2);

        Students.add(student3);

        System.out.println("Add new students: ");
        System.out.println("Enter number of students to add: ");
        int countStudents = input.nextInt();

        for (int i = 0; i < countStudents; i++) {
            Student newStudents = new Student();

            System.out.println("Enter details for student: " + (i + 1));

            System.out.println("Enter name: ");
            newStudents.setStudentName(input.next());

            System.out.println("Enter Number: ");
            newStudents.setStudentNo(input.next());System.out.println("Search by student number: ");

            System.out.println("Enter email: ");
            newStudents.setEmail(input.next());

            System.out.println("Enter year: ");
            newStudents.setYear(input.nextInt());
            Students.add(newStudents);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-21T19:40:07.887

类中的重写`toString()`方法`Student`如下：

```
 @Override
   public String toString() {
        return ("StudentName:"+this.getStudentName()+
                    " Student No: "+ this.getStudentNo() +
                    " Email: "+ this.getEmail() +
                    " Year : " + this.getYear());
   } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-21T19:36:10.643

每当您打印类的任何实例时，都会调用类的`default` `toString`实现`Object`，它会返回您所获得的表示形式。它包含**两个部分**： -`Type`和`Hashcode`

所以，在**student.Student@82701e**作为输出 ->

*   `student.Student`是`Type`, 和
*   `82701e`是个`HashCode`

所以，你需要重写`toString`你的类中的一个方法`Student`来获得所需的`String representation`： -

```
@Override
public String toString() {
    return "Student No: " + this.getStudentNo() + 
           ", Student Name: " + this.getStudentName();
} 
```

因此，当您从您的`main`班级打印您的`ArrayList`时，它将`toString`为每个实例调用该方法，`overrided`而不是您在`Object`班级中的那个：-

```
List<Student> students = new ArrayList();

// You can directly print your ArrayList
System.out.println(students); 

// Or, iterate through it to print each instance
for(Student student: students) {
    System.out.println(student);  // Will invoke overrided `toString()` method
} 
```

在上述两种情况下，将调用类中`toString`重写的方法，`Student`并打印每个实例的适当表示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T19:35:44.563

你必须在你的类中定义`public String toString()`方法。`Student`例如：

```
public String toString() {
  return "Student: " + studentName + ", " + studentNo;
} 
```

# jquery - cookie 中每个值的 jQuery

> ID：13001430
> 
> 赞同：1
> 
> 时间：2012-10-21T19:34:46.473
> 
> 标签：jquery, arrays, function, each

我有一个 cookie，我需要提取它的值并在每个值上运行一个函数。不确定如何分隔这些值......所以这就是我正在使用的内容：

```
var cookie = [1,2,3],
    val = cookie.methodThatSplitsEachValueIntoASeparateObject;

val.each(function(){
    //I'm running on 1, 2, and 3!
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:36:10.787

简单[`for`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)循环：

```
for (var i = 0; i < cookie.length; i++) {
    var val = cookie[i];
    // alert(val);
} 
```

jQuery[`each()`](http://api.jquery.com/jQuery.each/)方法：

```
$.each(cookie, function(i, val) {
    // alert(val);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:37:24.237

也许你遍历数组？

```
for(var i=0;i<cookies.length;i++) {
//Create object from cookies[i]
} 
```

希望有帮助。

# asp.net-mvc - 从 app_data 中删除 .mdf 文件导致异常无法将文件附加为数据库

> ID：13001441
> 
> 赞同：49
> 
> 时间：2012-10-21T19:35:44.290
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我首先使用 VS 2012 MVC4 代码构建 Web 应用程序。为了`.mdf`在更改模型后重新创建文件，我从 VS 的 app_data 目录中手动删除了该文件。我以前做过几次，没有任何问题。

现在我收到一个例外：

> *基础提供程序在打开时失败。==> 无法将文件附加 `MYDB.mdf`为数据库`'MYDB'`。*

我将感谢您对如何重新创建`.mdf`文件的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-12-02T20:24:12.230

为我解决了这个问题，从包管理器控制台运行这些命令：

```
 sqllocaldb.exe stop v11.0
  sqllocaldb.exe delete v11.0 
```

进而：

```
 Update-Database 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-22T16:01:26.670

使用 SQL Server 对象资源管理器删除数据库，而不仅仅是删除解决方案资源管理器中的 .mdf 文件。否则，SQL Server 实例仍然认为数据库名称已被使用，并且下次您尝试将数据库附加到相同名称时，它将无法正常工作。请参阅此 MSDN 页面中有关初始目录的部分：

[http://msdn.microsoft.com/en-us/library/jj653752.aspx#initialcatalog](http://msdn.microsoft.com/en-us/library/jj653752.aspx#initialcatalog)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T18:27:43.303

再次尝试从 SQL Management Studio 中删除它。它会抱怨不再有物理文件，但会从对象浏览器中删除（刷新后你会看到）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-17T05:02:55.050

从应该工作的连接字符串中删除此行；）

“AttachDbFilename=|DataDirectory|whateverdatabasename-20130917064511.mdf”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T19:38:13.593

退出 localhost iis express 并重试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-25T16:33:57.690

我删除了我的 DBContext 类并在我的 MVC 项目中重新创建了它。然后在 App_Data 中重新创建 .mdf 文件

# deployment - Teamcity MSBuild 将构建输出复制到新文件夹

> ID：13001450
> 
> 赞同：2
> 
> 时间：2012-10-21T19:36:13.267
> 
> 标签：deployment, msbuild, teamcity

我已经设法让 Teamcity 运行并连接到 bitbucket，我想要的最后一步是将 MVC 4 项目复制到服务器上的另一个文件夹中，以便将 xcopy 部署到 Web 主机上。

我正在使用 MSBUILD 作为构建代理。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T07:13:38.547

首选方法是在 MSBuild 中使用发布目标。

1.  **使用运行器类型MSBuild**添加新的构建步骤
***   设置`Build file path`为您的 Web 项目`csproj`文件*   设置`Target`为`Clean;Build;Publish`*   设置`Command line parameters`为`/p:Configuration=Release;PublishDir=\\your\target\path`**

 **希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:26:13.623

您可以使用 CommandLine buildrunner 进行 xcopy。就个人而言，我什至不会将结果复制到不同的服务器。

对于部署，我将在 Teamcity 中有一个部署项目，该项目通过 wget 从 Teamcity Rest-Api 获取所需的工件并将其上传到托管服务提供商。这也可以在 CommandLine buildrunner 中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T17:26:30.293

一般设置下

点击“显示高级选项”

在 Artifact Paths 下，您可以指定要放在新文件夹下的内容

```
**/* => target_directory 
```

或者您可以将文件压缩并放在这样的新文件夹下

```
**/* => newfolder/mypackage.zip 
```

在此处查看更多详细信息：[https ://www.jetbrains.com/help/teamcity/2019.2/configuring-general-settings.html#ConfiguringGeneralSettings-ArtifactPaths](https://www.jetbrains.com/help/teamcity/2019.2/configuring-general-settings.html#ConfiguringGeneralSettings-ArtifactPaths)**

# zend-framework - 安装 Zend 服务器后 phpmyadmin 出现黑屏

> ID：13001451
> 
> 赞同：0
> 
> 时间：2012-10-21T19:36:27.643
> 
> 标签：zend-framework, phpmyadmin

我在 Ubuntu 12.0.4 LTE 上安装了 LAMP。然后我安装了phpmyadmin。一切都很好。我用 phpadmin 做了很多数据库管理....

然后我安装了 Zend CE 服务器。现在，phpmyadmin 抛出一个空白页面。没有登录屏幕。

所以，我再次以相同的顺序重新安装了我的 VPS。没运气。相同的行为。

这一次，我按顺序安装了 Apache、Mysql、PHP 和 Zend 服务器。然后我安装了 phpmyadmin....不幸的是，phpmyadmin 上仍然是空白页面。

有什么帮助吗？...在​​此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:16:30.860

首先，对于所有对我的上述问题提出建议的人，谢谢！

当然，我不得不更深入地挖掘论坛和线程，以找到这个问题的具体根本原因和解决方案……花了几个小时……终于，我解决了！感谢 php.net 上的以下错误讨论链接。

[https://bugs.php.net/bug.php?id=25876](https://bugs.php.net/bug.php?id=25876)

我厌倦了那里的许多建议修复，但它们没有帮助。最终解决问题的建议粘贴在下面（以便将功劳归于正确的所有者）：

* * *

[2011-03-03 12:18 UTC] htmlcompressor dot com 上的评论如果您遇到以下错误：“致命错误：session_start(): 无法初始化存储模块：文件（路径：）在....”确保您已在 php.ini 中设置会话保存路径： session.save_path = "/tmp" 默认情况下似乎已禁用。

* * *

我发誓使用开源软件很难！我一个人在这个问题上花了一整天。我的目标是构建一些软件，但我还没有实现它！！

# ios - 在缩小父 uiview 的同时保持 uilabel 大小和字体大小不变

> ID：13001452
> 
> 赞同：0
> 
> 时间：2012-10-21T19:36:34.917
> 
> 标签：ios, user-interface, user-controls, uilabel, uigesturerecognizer

我正在实现一个带有轨迹栏的应用程序，它本身就是一个视图，它需要显示最小值和最大值（与栏关联的变量），所以我在它的左上角和右上角添加了两个标签。在没有启用滑块的情况下考虑这样的事情：

![http://tdwiki.daverabellink.net/images/4/42/TrackbarSample.jpg](../Images/d9d0e8026b9a67c28bf40d2203617ad4.png)

我希望能够通过捏合手势缩小或放大此视图，并且以下代码可以正常工作：

```
-(void) handlePinch:(UIPinchGestureRecognizer *)gr
{
    //Shrinking
    if(gr.scale < 1)
    {
        //Get screen width
        CGFloat screenWidth = [UIScreen mainScreen].bounds.size.width;
        //If the view's would be size is smaller than half the screen's size then don't do anything
        //Otherwise shrink the view
        if(self.frame.size.width * gr.scale >= screenWidth / 2)
        {
            //Only scale on x axis, y axes stays the same
            self.transform = CGAffineTransformScale(self.transform, gr.scale, 1);
        }

    }
    //Magnifying
    else if (gr.scale > 1) 
    {
        //Only scale on x axis, y axes stays the same
        self.transform = CGAffineTransformScale(self.transform, gr.scale, 1);
    }

    //Set scale amount back to 1
    gr.scale = 1;
} 
```

问题是当视图缩小时，左上角和右上角的标签也缩小了，它们的字体变小了。由于我只水平缩放视图，这看起来很奇怪。我想设置标签的大小常量并缩小视图内的所有其他内容。

我试图在缩小后用原始标签的大小分配一个新的框架矩形，但没有用。你有什么提示吗？

编辑：设置 minimumFontSize 属性也不起作用（我不尝试 minimumScaleFactor，因为我仍在使用 ios 5 sdk）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:54:28.063

我认为这种行为实际上是由你有标签的视图控制的——它不受标签本身的控制。UIView 的 autoresizesSubviews 属性默认为 YES，当 UIView 缩小时，它会使视图内的任何内容都缩小。由于您的捏合手势实际上附加到标签后面的视图而不是标签本身，因此您的捏合正在缩小视图，然后视图会缩小标签。尝试设置 autoresizesSubviews = NO，让我知道这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:49:45.570

我找到了将我的轨迹栏与支持捏合手势的视图分开的解决方案。事先在其中包含跟踪栏是糟糕的设计，请在处理更复杂的东西之前检查您的 ui 设计。

# ruby-on-rails - 迭代现有的问题列表并提供答案

> ID：13001453
> 
> 赞同：0
> 
> 时间：2012-10-21T19:37:05.727
> 
> 标签：ruby-on-rails, forms, associations

在我的应用程序中，一个`call_for_submission`has_many `questions`。我希望正在制作的用户`submission`能够看到每个`question`，并能够提供`answer`. 所以一个`question`has_one`answer`和一个`submission`has_many `answers`。

如何`call_for_application's` `questions`在`submission`编辑视图中遍历 a 并为 a 提供表单字段`answer`？我在`submission`编辑视图中已经做到了这一点，`cocoon`用于动态字段：

```
= simple_form_for @submission do |f|
    #... other code

    - @questions.each do |question|
      = question.question_text
      = f.simple_fields_for :answers do |answer|
        = render 'answer_fields', :f => answer
      %p
        .links
          = link_to_add_association('<i class="icon-plus"></i> Add answer'.html_safe, f, :answers) 
```

但我无法弄清楚这些关联应该是什么。`answer`属于 a`submission`和 a吗`question`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:52:30.770

据我所知，我认为你们的关系是错误的。

我将删除 and 之间的关系`answers`，`questions`并引入 and 之间的`submissons`关系`questions`。

```
# submission.rb
has_many :questions

# question.rb
belongs_to :submission 
```

对于嵌套形式的部分，看看这个 railscast：[http: //railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

实际上，即使主题和关系设置也与您的情况相似。

# cakephp - saveAssociated cakephp 的问题

> ID：13001460
> 
> 赞同：0
> 
> 时间：2012-10-21T19:37:34.547
> 
> 标签：cakephp, cakephp-2.0

我在尝试保存包含 4 张图片的文章时遇到了一些问题。问题是我需要使用文章 ID 来命名图片`article_id."-"$i`

因为我每篇文章只有 4 张图片，所以 $i 应该是从 1 到 4 或从 0 到 3。

现在的问题是，为了实现这一点，我需要创建并保存文章模型，以便我可以使用一个 id，但是在执行所有脚本以制作拇指并形成名称之后，当我去 Article->saveAssociated () 我已经创建了两次文章记录！！我试图在保存之前将 id 设置为“-1”，但什么也没有......

任何建议将不胜感激！！！

**代码：**

```
public function add() {

    if ($this->request->is ( 'ajax' )) {
        $this->layout = 'ajax';
    } else {
        $this->layout = 'default';
    }

    if ($this->request->is ( 'post' )) {

        $this->Article->create ();

        $this->request->data ['Article'] ['time_stamp'] = date ( 'Y-m-d H:i:s', time () );  

        if ($this->Article->save($this->request->data) ) { 

        for ($i=0; $i<4; $i++){

            $img_path = "./images/";
            $extension[$i] = end(explode('.', $this->request->data['Image'][$i]['image']['name']));

            $this->request->data['Image'][$i]['image'] = array('name'=>$this->Article->id."-".$i,  'tmp_name' => $this->request->data['Image'][$i]['image']['tmp_name']);
        //  $this->request->data['Image'][$i]['name'] = $this->Article->id."-".$i;

            $this->request->data['Image'][$i]['ext']= $extension[$i];

            $target_path[$i] = $img_path . basename($this->request->data['Image'][$i]['image']['name'].".".$extension[$i]);

            if(!move_uploaded_file($this->request->data['Image'][$i]['image']['tmp_name'], $target_path[$i])) {

                die(__ ( 'Fatal error, we are all going to die.' ));

            }else{

                $this->Resize->img($target_path[$i]);
                $this->Resize->setNewImage($img_path.basename($this->request->data['Image'][$i]['image']['name']."t.".$extension[$i]));
                $this->Resize->setProportionalFlag('H');
                $this->Resize->setProportional(1);
                $this->Resize->setNewSize(90, 90);
                $this->Resize->make();

            }
            }

            $this->Article->id;
            pr($this->Article->id);
            $this->Article->saveAssociated($this->request->data, array('deep' => true));
            //$this->redirect ( array ('action' => 'view', $this->Article->id ) );
            pr($this->Article->id);
            exit;   
            $this->Session->setFlash ( __ ( 'Article "' . $this->request->data ["Article"] ["name"] . '" has been saved' ) );

        } else {
            $this->Session->setFlash ( __ ( 'The article could not be saved. Please, try again.' ) );
        }

}

    $items = $this->Article->Item->find ( 'list' );
    $payments = $this->Article->Payment->find ( 'list' );
    $shippings = $this->Article->Shipping->find ( 'list' );

    $this->set ( compact ( 'items', 'payments', 'shippings' ) );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:13:43.463

代替

```
$this->Article->saveAssociated(); 
```

这将再次保存文章，只需使用以下内容单独保存图像：

```
foreach($this->request->data['Image'] as &$image) {
    $image['name'] = 'whatever_you_want' . $this->Article->id;
    $image['article_id'] = $this->Article->id;
}
$this->Article->Image->save($this->request->data['Image']); 
```

另一种选择（不一定更好 - 只是另一种选择）只是将新创建的文章附加`id`到现有`Article`数组，然后`saveAssociated()`. 如果文章`id`的数据中有一个，它将更新而不是创建。我建议上面的第一个答案，但是 - 只是集思广益其他选项，以防这有助于某人的情况：

```
// 1) save the Article and get it's id
// 2) append the `id` into the Article array
// 3) do your image-name manipulation using the id
// 4) saveAssociated(), which updates the Article and creates the Images 
```

# objective-c - 动画未通过另一个视图控制器执行

> ID：13001465
> 
> 赞同：0
> 
> 时间：2012-10-21T19:38:26.073
> 
> 标签：objective-c, ios, cocoa-touch

我正在尝试根据单独的类文件中发生的情况在一个视图中触发动画。它得到了方法，它确实吐出了两个`NSLog`语句，但没有提交`UIView Animation`

**这是代码：**

视图控制器.h

```
@interface ViewController : UIViewController {

}

-(void)closeMenu; 
```

视图控制器.m

```
-(void)closeMenu{

    //close the menu
    NSLog(@"Got here");

    [UIView animateWithDuration:0.6 animations:^{

        [UIView setAnimationBeginsFromCurrentState:YES]; // so it doesn't cut randomly, begins from where it is

        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        [menuView setFrame:CGRectMake(menuView.frame.origin.x, -menuView.frame.size.height, menuView.frame.size.width, menuView.frame.size.height)];

    }];

    NSLog(@"Got here2");

} 
```

OtherClass.m （注释代码可能与本题无关，实际应用中当然还在使用，只是觉得可能更容易理解）

```
#import "ViewController.h"

...

//- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
//{
    ViewController *foo = [[[ViewController alloc] init] autorelease];

    //SelectableCellState state = subItem.selectableCellState;
    //NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
    //switch (state) {
        //case Checked:
            //NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

            //close the menuView

            [foo closeMenu];

            //break;
        //case Unchecked:
            //NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
            //break;
        //default:
            //break;
    //}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:45:49.753

您将老式动画与基于块的动画混合在一起。例如，在文档中，它声明`setAnimationBeginsFromCurrentState`：

> 在 iOS 4.0 及更高版本中不鼓励使用此方法。相反，您应该使用 animateWithDuration:delay:options:animations:completion: 方法来指定动画和动画选项。

我不是 100% 确定这是否受支持。您应该至少将您的动画代码更改为：

```
[UIView animateWithDuration:0.6
                      delay:0.0
                    options:UIViewAnimationOptionBeginFromCurrentState|UIViewAnimationOptionCurveEaseInOut  
                 animations:^{
    [menuView setFrame:CGRectMake(menuView.frame.origin.x, -menuView.frame.size.height, menuView.frame.size.width, menuView.frame.size.height)];

                            }
                 completion:nil]; 
```

除此之外，它似乎应该工作。如果有任何其他影响框架，它可能会导致问题。可能值得计算动画块之前的帧。翼：

```
CGRect newFrame = CGRectMake(menuView.frame.origin.x, -menuView.frame.size.height, menuView.frame.size.width, menuView.frame.size.height)

[UIView animateWithDuration...:^{ menuView.frame = newFrame; }...]; 
```

**编辑：**哦等等，看起来你正在分配/初始化对象`(void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem`，并调用它的方法，但视图不在视图层次结构中。您需要在屏幕上显示的实例上调用动画。希望这有意义吗？

**编辑2：**要在已经显示的实例上调用它，通常需要将它存储在实例变量中。我不能确切地说你的情况如何，但通常它的形式是：

```
@interface OtherClass () {
    ViewController* m_viewController;
}
@end

....

- (void)viewDidLoad // Or where ever you first create your view controller
{
    ...
    // If you're adding a ViewController within another ViewController, you probably need View Controller Containment
    m_viewController = [[ViewController alloc] init];
    [self addChildViewController:m_viewController];
    [m_viewController didMoveToParentViewController:self];
    [self.view addSubview:m_viewController.view];
    ...
}

// If you're using ARC code, the dealloc wouldn't typically be necessary
- (void)dealloc
{
    [m_viewController release];
    [super dealloc];
}

//- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
//{
    //SelectableCellState state = subItem.selectableCellState;
    //NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
    //switch (state) {
        //case Checked:
            //NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

            //close the menuView

            [m_viewController closeMenu];

            //break;
        //case Unchecked:
            //NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
            //break;
        //default:
            //break;
    //}
    } 
```

如果您需要从类外部访问它，这还不够，请使用属性。IE

**头文件**

```
@property (nonatomic, strong) ViewController* myViewController 
```

**.m 文件**

```
// Use it as such
[self.myViewController closeMenu]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:47:41.227

那个动画代码真的很奇怪。您正在混合新旧 UIView 动画代码，我认为您不能这样做（但我可能是错的）。

由于您已经开始使用基于块的 API，我建议您走这条路线（Apple 推荐同样的方法）。

有一种与您使用的方法类似的方法，它采用名为`animateWithDuration:delay:options:animations:completion:`. 您可以传入 0 来表示延迟，并传入一个空块，该块需要 BOOL 来完成。

您要为选项传递的两个标志是`UIViewAnimationOptionBeginFromCurrentState`和`UIViewAnimationOptionCurveEaseInOut`。

你的代码看起来像这样

```
[UIView animateWithDuration:0.6 
                      delay:0.0
                    options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionCurveEaseInOut  
                 animations:^{
                    // set your frame here...
                    [menuView setFrame:CGRectMake(menuView.frame.origin.x,
                                                  -menuView.frame.size.height,
                                                  menuView.frame.size.width,
                                                  menuView.frame.size.height)];
               } completion:^(BOOL finished){}]; 
```

# android - Windows下的Cmake Opencv for Android...找不到iostream

> ID：13001468
> 
> 赞同：1
> 
> 时间：2012-10-21T19:38:41.597
> 
> 标签：android, opencv, cmake

我正在尝试为 opencv 运行 cmake_android.cmd 脚本，详见此处： [http ://opencv.willowgarage.com/wiki/Android2.3.0#Windows_.28native.29](http://opencv.willowgarage.com/wiki/Android2.3.0#Windows_.28native.29)

所以我可以得到一个 OpenCV.mk 文件与 Android 一起使用

所以我启动 cmd.exe 当我在`opencv\android` 运行时`scripts\cmake_android.cmd`

它达到大约 3% 并失败，因为它找不到 iostream

```
[  3%] Building CXX object 3rdparty/libtiff/CMakeFiles/libtiff.dir/tif_stream.cxx.o
C:\opencv\3rdparty\libtiff\tif_stream.cxx:31:20: error: iostream: No such file or directory 
```

这是我的 wincfg.cmd 文件

```
:: variables required for OpenCV build ::
:: Note: all pathes should be specified without tailing slashes!
SET ANDROID_NDK=C:\android-ndk-r8b-windows\android-ndk-r8b
SET CMAKE_EXE=C:\Program Files (x86)\CMake 2.8\bin\cmake.exe
SET MAKE_EXE=%ANDROID_NDK%\prebuilt\windows\bin\make.exe

:: variables required for android-opencv build ::
SET ANDROID_SDK=C:\Program Files (x86)\Android\android-sdk
SET ANT_DIR=C:\opencv\android\apache-ant-1.8.4
SET JAVA_HOME=C:\Program Files\Java\jdk1.7.0_09

:: configuration options ::
:::: general ARM-V7 settings
SET ANDROID_ABI=armeabi-v7a
SET BUILD_DIR=build

:::: uncomment following lines to compile for old emulator or old device
::SET ANDROID_ABI=armeabi
::SET BUILD_DIR=build_armeabi

:::: uncomment following lines to compile for ARM-V7 with NEON support
::SET ANDROID_ABI=armeabi-v7a with NEON
::SET BUILD_DIR=build_neon

:::: uncomment following lines to compile for x86
::SET ANDROID_ABI=x86
::SET BUILD_DIR=build_x86

:::: other options
::SET ANDROID_NATIVE_API_LEVEL=8   &:: android-3 is enough for native part of OpenCV but android-8 is required for Java API 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:01:33.807

对于 NDK r8b，您需要来自存储库的最新 OpenCV。

OpenCV 2.4.2 版本支持从 r5 到 r8 的 NDK。来自 sourceforge 和 Google Play 的预构建 Android 二进制文件是使用 NDK r8 编译的。

# objective-c - 坚固的物体会在segue上被破坏吗？

> ID：13001470
> 
> 赞同：1
> 
> 时间：2012-10-21T19:38:55.883
> 
> 标签：objective-c, ios, uitableview, memory-management, segue

我有一个带有表格视图和导航栏中添加按钮的 iPhone 应用程序。表格视图有一个自定义`NSObject`保存它的数据，称为`dataBase`. `dataBase`是`(strong, nonatomic) @property`这个表视图的一个。表视图有一个公共方法，允许将新数据添加到`dataBase`. 单击添加按钮时，会出现一个新视图，可让您设置与新单元格相同的视图。在点击保存按钮时，另一个 segue 用于调用公共方法，将信息添加到`dataBase`. 但是，当调用第二个 segue 时，原始`dataBase`对象消失了，这意味着`dataBase`. 这在 segues 中是可以预期的吗？为了使对象保持活动状态，我需要传递对象本身吗？

抱歉，如果这是一个非常菜鸟的问题，我是 iOS 编程和引用计数内存管理的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:53:52.513

这与 segue 无关，所以不要自己混淆这个问题。

引用计数对象的基本处理是，只要至少有一个对该对象的引用，它就不会被释放。但是，一旦引用计数达到零，对象将被释放。

所以，如果你想让一个对象保持“活跃”，那么你需要以某种方式保持对它的引用。如果您希望您的数据库在程序的整个生命周期内都存在，通常的模式是使用“单例”对象。这可以通过多种方式实现。一个简单的方法是模仿常见的单例模式：

```
@interface Database : NSObject
    + (Database*)sharedInstance;
    // other stuff for your class
@end

@implementation Database
    + (Database*)sharedInstance {
        static Database *instance;
        static dispatch_once_t onceToken;
        dispatch_once(&onceToken, ^{
            instance = [[Foo alloc] init];
            // Any other initialization necessary...
        });
        return instance;
    }
@end 
```

这些`dispatch_once`东西确保了多线程应用程序（**所有**iOS 应用程序都应该是）的正确性。

现在，当您需要“共享”`Database`对象时...

```
Database *database = [Database sharedInstance]; 
```

该`dispatch_once`代码除了使其成为线程安全之外，还将确保创建代码只运行一次。函数内部的静态对象将保留对该对象的引用，因此它永远不会被释放......并且在程序的整个生命周期中都存在。

这是处理这种情况的一种常见模式，但还有许多其他模式。关键是，如果你想要一个对象存在，你必须保持对它的引用。将其传递给每个视图控制器，或将其保存在“公共”位置，或在不需要时将其存档到磁盘，并在以后需要时重新水合它……有很多方法可以做到……

# vim - 如何在不使用鼠标的情况下突出显示 gVim 中的多行？

> ID：13001471
> 
> 赞同：3
> 
> 时间：2012-10-21T19:38:57.037
> 
> 标签：vim

Vim 菜鸟在这里。我正在尝试选择多行代码来复制和粘贴到其他区域。有没有办法不使用鼠标来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:25:50.263

其他一些根本不使用视觉模式的方法：

**使用标记**

1.  在某处留下标记`ma`

2.  搬到别处

3.  从这里拉到那里`y'a`

**使用搜索动作**

1.  在要拉出的部分末尾本地化一些唯一标记

2.  `y/foo<cr>`使用（向前搜索）或`y?bar<cr>`（向后搜索）从这里拉到那里

**使用文本对象**

1.  确定什么文本对象将映射到您要拉动的内容：

    *   内/外字，`iw`/`aw`

    *   内/外对，`i'"([{<`/`a'"([{<`

    *   内部/外部 html 标记，`it`/`at`

    *   句子，`s`

    *   段落，`p`

    *   “堵塞”，`]`

    *   …</p>

2.  拉那个文本对象，比如说，`yip`

**使用其他动作**

*   拉到函数末尾：`y]}`

*   拉到文件末尾：`yG`

**上述所有具有视觉模式的解决方案**

*   `V'ay`

*   `V/foo<cr>y`

*   `V?bar<cr>y`

*   `Vipy`， ETC。

*   `V]}y`

*   `VGy`

* * *

`:h motion.txt`希望会让你大吃一惊，就像它对我的一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:41:53.930

您可以将光标放在要复制的第一行，然后键入要复制`nyy`的`n`行数。例如，键入`2yy`以复制光标下的两行。

然后，您可以使用`p`.

您还可以通过将光标放在某处并按住 Shift 来选择多行。将光标移动到所需选择的末尾并停止按 Shift。`y`然后使用 just （而不是）复制`yy`并粘贴`p`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:44:19.567

是的，在正常模式类型中`V[direction]`，您将突出显示多行。如果您不想要整行，请使用`v`而不是`V`. 要复制它，请点击`y`并移动到要粘贴的区域并点击`p`。要删除它，而不是`y`使用`x`.

或者，您可以简单地使用`[number of lines]yy`来拉出一些行或`[number of lines]dd`剪切一些行。在这种情况下，粘贴是相同的。

# c - Vigenere 加密

> ID：13001475
> 
> 赞同：-2
> 
> 时间：2012-10-21T19:39:16.487
> 
> 标签：c, encryption, c89, vigenere

我写了一些代码，其中使用了 Vigenere 加密。这是一个用于加密/解密任何文件的简单程序。

```
#include<stdio.h>
/*
LANGUAGE: C.
STANDARD: C89.

ABOUT PROGRAM:
This is a simple program for encrypting/decrypting any files.
The size of source file coincide with size of result file.
For encryption of file are use any string key. For decrypting, 
you must to use the same key, which was used for encryption.

NOTES:
The Vigenere encryption are used in it. 
Info at the site: http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher.
This simple algorithm is often used at commercial products. The 
Vigenere's algorithm are using a string key, and 'XOR' for 
encrypting/decrypting information.

WARNING!
The use of this method, doesn't give 100% of a warranty 
for protection of your information. Don't create the keys, 
consisting of identical characters, for example" "aaaaa", 
"zzz", "xxxx" e.t.c. - it is very feeble protection!
Don't forget your encrypting keys... :)

SYNTAX OF USING:

vigenere StringKey SourceFileName ResultFileName

where:
vigenere - program name;
StringKey - string key for encrypting/decrypting;
SourceFileName - source file name;
ResultFileName - result file name;

EXAMPLE OF USING:
vigenere "G5$hj4*df7f3+x" "c:\temp\source.txt" "c:\temp\result.txt"

*/
int main(int argc, char *args[]){
    /****************************************************/
    /* All variables must be defined on top in function, otherwise 
    some compilers can't compile this code (for example - MS 
    Visual Studio 2012\. */
    char ch; /* The next char for encrypting/decrypting. */
    char *x; /* String key. */
    FILE *srcFile; /* Source file. */
    FILE *trgFile; /* Result file. */   
    /****************************************************/

    /* The first argument always is a program file name. */
    if (4 != argc)
        return 1; /* Invalid arguments count. */

    if (!*args[1] || !*args[2] || !*args[3])
        return 2; /* Contains the empty argument. */

    x = args[1];
    if ((srcFile = fopen(args[2], "rb")) != NULL){
        if ((trgFile = fopen(args[3], "wb")) != NULL){          
            while((ch = getc(srcFile)) != EOF){
                if(!*x++)
                    x = args[1];
                putc((ch ^= *x), trgFile);
            }           
            fclose(trgFile);
        }
        else
            return 4;  /* Result file wasn't created. */
        fclose(srcFile);
    }
    else
        return 3; /* Source file wasn't opened. */
    return 0; /* Successful operation. */
} 
```

但是这段代码并不总是能很好地工作。我不明白为什么会发生。我对每个字节进行异或。我已经在[此类 TXT 文件](http://download51.files.attachmail.ru/5ZHBA7/5e8e590804e5655d02cbc6acf2a6b703/sources.zip)上测试了此代码。我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:41:39.217

```
 char ch;

 /* ...  */

 while((ch = getc(srcFile)) != EOF) 
```

`ch`必须是一个`int`. `EOF`被定义为负数`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:52:19.590

除了 ouah 的回答之外，指针值增量看起来不正确。

您的`if`陈述 ,`if(!*x++)`是不好的，原因有两个：

1.  通过在实际 XOR 操作之前进行增量，您将跳过初始循环中键的第一个字符。
2.  如果您已经到达空终止字符，则增加指针是没有意义的。

更好的代码是：

```
while((ch = getc(srcFile)) != EOF){
    putc((ch ^= *x), trgFile);
    if(!*++x)
        x = args[1];
} 
```

# ios - UIViewController 旋转视图但不调整它的大小

> ID：13001477
> 
> 赞同：0
> 
> 时间：2012-10-21T19:39:59.493
> 
> 标签：ios, uiview, uiviewcontroller

我最近在我的 iOS 游戏中添加了一个 UIViewController，但遇到了一些困难。我将视图添加到视图控制器中，当我旋转手机时，视图会旋转以保持直立。我的问题是视图在应该处于横向时保持纵向模式，底部不在屏幕上，屏幕右侧没有绘制任何内容。

这是我的 UIViewController 的代码：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        CGRect screenBounds = [[UIScreen mainScreen] bounds];

        _glView = [[[OpenGLView alloc] initWithFrame:screenBounds] autorelease];
        [self.view addSubview:_glView];
    }
    return self;
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:34:39.697

我不确定你的 OpenGLView 类是什么，但如果这是一些 UIView 衍生品，你可以尝试设置`autoresizingMask`你`_glView`的。`(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)`

# php - 错字3 4.7 没有后端（空白页）

> ID：13001479
> 
> 赞同：0
> 
> 时间：2012-10-21T19:40:09.870
> 
> 标签：php, content-management-system, typo3

我在 IIS8 上安装了当前版本的typo3 (4.7)。我想登录后端（../typo3/backend.php），但只有一个空白页面。没有错误什么都没有。在源代码中我可以看到很多行，但是在外面没有可见的页面，没有登录什么都只是空白。

有人可能有一个想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:07:49.243

这似乎是 Internet Explorer 8 中的一个错误。它在 Firefox 16.x 中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T10:01:19.713

要查看产生空白页面的错误类型，通过添加更改 /typo3/typo3conf/localconf.php 非常有用

```
$TYPO3_CONF_VARS['SYS']['displayErrors'] = '1'; 
```

# java - Weka：属性选择期间的监督离散问题和错误“没有足够的训练实例”

> ID：13001480
> 
> 赞同：3
> 
> 时间：2012-10-21T19:40:36.160
> 
> 标签：java, attributes, selection, weka, labels

过去一个月左右，我一直在自学 Weka API（我是学生）。我正在编写一个程序，该程序将过滤一组特定的数据并最终为其构建一个贝叶斯网络，而一周前我已经完成了我的离散化类和属性选择类。就在几天前，我意识到我需要将我的离散化函数更改为有监督的，并最终使用默认的 Fayyad & Irani 方法，在我这样做之后，我开始在我的属性选择类中出现这个错误：

```
Exception in thread "main" weka.core.WekaException: 
weka.attributeSelection.CfsSubsetEval: Not enough training instances with class labels (required: 1, provided: 0)!
at weka.core.Capabilities.test(Capabilities.java:1138)
at weka.core.Capabilities.test(Capabilities.java:1023)
at weka.core.Capabilities.testWithFail(Capabilities.java:1302)
at weka.attributeSelection.CfsSubsetEval.buildEvaluator(CfsSubsetEval.java:331)
at weka.attributeSelection.AttributeSelection.SelectAttributes(AttributeSelection.java:597)
at weka.filters.supervised.attribute.AttributeSelection.batchFinished(AttributeSelection.java:456)
at weka.filters.Filter.useFilter(Filter.java:663)
at AttributeSelectionFilter.selectionFilter(AttributeSelectionFilter.java:29)
at Runner.main(Runner.java:70) 
```

我在更改之前的属性选择工作得很好，所以我认为我可能在我的离散化类中做错了。这个问题的另一部分与此有关，因为我还注意到我的离散类似乎并没有真正对数据进行离散化；它只是将所有数字数据放入 ONE 范围内，而不是像 Fayyad & Irani 那样在战略上对其进行分箱。

这是我的离散类：

```
import weka.core.Instances;
import weka.filters.Filter;
import weka.filters.supervised.attribute.Discretize;
import weka.filters.unsupervised.attribute.NumericToNominal;

public class DiscretizeFilter
{
    private Instances data;
    private boolean sensitiveOption;
    private Filter filter = new Discretize();

    public DiscretizeFilter(Instances data, boolean sensitiveOption)
    {
        this.data = data;
        this.sensitiveOption = sensitiveOption;
    }

    public Instances discreteFilter() throws Exception
    {
        NumericToNominal nm = new NumericToNominal();
        nm.setInputFormat(data);
        Filter.useFilter(data, nm);
        Instances nominalData = nm.getOutputFormat();

        if(sensitiveOption)//if the user wants extra sensitivity
        {
            String options[] = new String[1];
            options[0] = options[0];
            options[2] = "-E";
            ((Discretize) filter).setOptions(options);
        }
        filter.setInputFormat(nominalData);
        Filter.useFilter(nominalData,filter);
        return filter.getOutputFormat();
    }
} 
```

这是我的属性选择类：

```
import weka.attributeSelection.BestFirst;
import weka.attributeSelection.CfsSubsetEval;
import weka.core.Instances;
import weka.filters.supervised.attribute.AttributeSelection;

public class AttributeSelectionFilter 
{
    public Instances selectionFilter(Instances data) throws Exception
    {
        AttributeSelection filter = new AttributeSelection();

        for(int i = 0; i < data.numInstances(); i++)
        {
            filter.input(data.instance(i));
        }
        CfsSubsetEval eval = new CfsSubsetEval();
        BestFirst search = new BestFirst();
        filter.setSearch(search);
        filter.setEvaluator(eval);

        filter.setInputFormat(data);
        AttributeSelection.useFilter(data, filter);

        return filter.getOutputFormat();
    }

    public int attributeCounter(Instances data)
    {
        return data.numAttributes();
    }
} 
```

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:55:59.077

Weka 在内部将属性值存储为双精度值。似乎抛出了一个异常，因为数据集中的每个实例 ( `data`) 都“缺少一个类”，即无论出于何种原因，都被赋予了一个内部类属性值 NaN（“不是数字”）。我建议仔细检查`data's`类属性是否正确创建/设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:45:01.387

我想通了，是我误解了 Discretize 类中方法“outputFormat()”的描述。相反，我从 useFilter() 获得了过滤后的实例，这解决了我的问题！我只是给属性选择过滤器提供了错误的数据类型。

# scala - Play2.0：致命错误重启？

> ID：13001483
> 
> 赞同：9
> 
> 时间：2012-10-21T19:40:52.383
> 
> 标签：scala, playframework, playframework-2.0, akka

我使用带有 scala 的 playframework 2.0.4。我使用“play dist”部署应用程序，然后使用“./start”脚本启动它。

最近，我的生产实例没有足够的内存并崩溃了。我有一个错误

```
Uncaught error from thread [play-akka.actor.promises-dispatcher-456] shutting down JVM since 'akka.jvm-exit-on-fatal-error' is enabled 
```

并且播放过程已经死了。

有没有办法禁用 akka.jvm-exit-on-fatal-error 并将其设置为在崩溃时重新启动播放应用程序？这是一个生产环境，一个未运行的应用程序并没有真正的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:36:45.597

我认为如果应用程序像这样崩溃，Akka 环境可能处于不一致的状态，并且试图挽救它可能无法正常工作。

相反，我会使用[monit](http://mmonit.com/monit/)等工具来研究[流程监督](http://en.wikipedia.org/wiki/Process_Supervision)

# c++ - 在 C++ 中实现正态分布的均匀比例

> ID：13001485
> 
> 赞同：3
> 
> 时间：2012-10-21T19:41:21.790
> 
> 标签：c++, random, normal-distribution

我知道这可以通过定义泪珠形状并接受落在该区域内的点（来自统一生成器）来完成。

我试图在 C++ 中通过生成两个统一的随机数 x 和 y 来定位点 (x,y)，然后检查该点是否在该区域内。

我的代码本身没有问题，但是我的逻辑在这里有缺陷吗？我还没有找到合适的图形方式来检查这是否是真正的正态分布。

这是应该工作的代码：

```
typedef unsigned long long int Ullong;
typedef double Doub;

struct Normaldev : Ran {
    Doub mu,sig;

    Normaldev (Doub mmu, Doub ssig, Ullong i)
        : Ran (i), mu(mmu), sig(ssig){}

    Doub dev() {

      Doub u, v, x, y, q;
        do {
          u=Doub();
          v=1.7156*(Doub()-0.5);
          x=u-0.449871;
          y=abs(v)+0.386595;
          q=x*x+y*(0.19600*y-0.25472*x);
        } while(q>0.27597 && (q>0.27846 || v*v>-4*log(u)*u*u));

        return mu+sig*v/u;
     }
}; 
```

我用我对 C++ 的基本知识尽可能多地更改了数字食谱书中建议的代码，但 Ran 到底应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:32:11.593

> 我用我对 C++ 的基本知识尽可能多地更改了数字食谱书中建议的代码，但 Ran 到底应该是什么？

Ran 是 NormalDev 的父类。它没有在您提供的代码中定义。根据代码，它似乎是一个非常通用的随机数类，它`unsigned long long int`在其构造函数中采用种子。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-20T16:58:09.650

请查看“C 中的数字食谱”的第 3 版，第 364-369 页。您会发现 Box-Muller 返回两个正态分布的随机变量，即“u”和“v”。所以第一次调用函数时，你计算两个变量但只返回'u'。该函数的第二次调用除了返回 'v' 什么都不做。

```
double  u, v;
double  sigma = 1.0
double  mean  = 0.0;
int     flag  = 0;

double boxMuller()
{
    if (flag == 1) {
        flag  = 0;
        return v * sigma + mean;
    }
    double help;
    do {
        u = Doub() - 0.5;
        v = Doub() - 0.5;
        help      = u * u + v * v;
    } while (help >= 0.25);
    help = sqrt( log( help * 4.0 ) / help * -2.0 );
    u   *= help;
    v   *= help;
    flag = 1;
    return u * sigma + mean;
} 
```

相比之下，Ratio-of-Uniforms 方法必须在每次调用时（而不是每秒）计算一个新的随机变量。

所以我测量了时间，并更喜欢使用上面的 Box-Muller 代码。

# jquery - 精灵，按方向改变图片

> ID：13001486
> 
> 赞同：2
> 
> 时间：2012-10-21T19:41:27.713
> 
> 标签：jquery, jquery-plugins, direction

我正在尝试在 Spritely 插件中为游泳鱼制作动画。

```
var lastX = 0;
var count = 0;
$('#fish1').sprite(
{
    fps: 2, 
    no_of_frames: 1,
    on_first_frame: function(obj) 
    {
        count++;
        if (count > 4)
        {
            if (lastX < obj.position.left) 
            {
                obj.fps(2).spState(1);                                      
            }
            else 
            {
                obj.fps(2).spState(2);
            }
            lastX = obj.position.left;
            count = 0;
        }                   
    }
})
.spRandom(
{
    top: 0, 
    bottom: $(document).height()-308, 
    left: 0, 
    right: $(document).width()-498, speed: 10000
}); 
```

这是我的鱼的定义。有人可以告诉我，如何检测随机移动的方向？我的解决方案适用于何时设置第一帧，我最后一个 X 位置与鱼的位置。

但这不起作用。有人能帮我吗？

# django - django模板：获取字典值

> ID：13001490
> 
> 赞同：1
> 
> 时间：2012-10-21T19:42:02.407
> 
> 标签：django, templates

我的视图函数执行以下操作：

```
search_parameters = {"words": "hello"}
return render('mypage.html', {'results': results, 'search_parameters':search_parameters}) 
```

在我的模板中，我认为我可以通过以下方式获得“你好”：

```
{{search_parameters.words}} 
```

但它是空白的。

起作用的是像这样循环遍历每个值

```
{% for key,value in search_parameters.items %} 
```

但我真的很想避免每次需要从字典中获取值时都这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T23:43:45.443

就像 miki725 指出的那样，您缺少请求 arg

```
search_parameters = {"words": "hello"}
return render( request, 'mypage.html', {'results': results, 'search_parameters':search_parameters} ) 
```

那么你可以按照你的意愿做 {{ search_parameters.words }}

# android - 让 robolectric 与 android 兼容包一起工作

> ID：13001492
> 
> 赞同：1
> 
> 时间：2012-10-21T19:42:08.510
> 
> 标签：android, robolectric

我尝试使用 Robolectric 为我的 Android 应用程序运行测试，该应用程序使用 android-support 包。在我的 onCreate() 方法中，我调用

```
getSupportLoaderManager().initLoader(0, null, this); 
```

不幸的是，getSupportLoaderManager() 在这里返回 null。我是否必须准备任何东西才能使兼容性类可用于 robolectric？

我的测试项目的类路径中有 android.jar (android-8) 和 android-support-v4.jar，以及 robolectric-1.2 快照版本。

测试类：

```
@RunWith(RobolectricTestRunner.class)
public class HoebAppActivityTest {

    @Test
    public void shouldStartActivity() {
            final MyActivity activity = new MyActivity();
            System.out.println(activity.getSupportLoaderManager()); // return null

            activity.onCreate(null);
    }
} 
```

编辑：

```
System.out.println(Robolectric.directlyOnFullStack(activity)
            .getSupportLoaderManager()); 
```

输出 android.support.v4.app.LoaderManagerImpl@9a90b9 所以我想，我只需要将它反馈给活动？好像我离这里越来越近了。

Edit2：我试图绑定我自己的 ShadowFragmentActivity：

```
@Implements(FragmentActivity.class)
public class ShadowFragmentActivity extends
    com.xtremelabs.robolectric.shadows.ShadowFragmentActivity {
@RealObject
private FragmentActivity realActivity;

@Implementation
public LoaderManager getSupportLoaderManager() {
    return Robolectric.directlyOnFullStack(realActivity)
            .getSupportLoaderManager();
}
} 
```

与

```
Robolectric.bindShadowClass(ShadowFragmentActivity.class); 
```

这似乎暂时有效。我将不得不进一步尝试看看它是否符合我的要求。不知道这是否是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T04:31:29.937

Robolectric 1.x 对 Android 支持库的支持很差。Robolectric 2.0 明显更好，并且完全支持片段。今天刚刚发布了一个alpha：

```
<dependency>
  <groupId>org.robolectric</groupId>
  <artifactId>robolectric</artifactId>
  <version>2.0-alpha-1</version>
<dependency> 
```

# java - 获取 APNG 图像的元数据

> ID：13001497
> 
> 赞同：1
> 
> 时间：2012-10-21T19:43:14.833
> 
> 标签：java, png, apng

我目前正在尝试获取 apng 图像的元数据。我已经能够完美地从一个 apng 文件中获取不同的帧，并且我正在使用 PNGJ（一个非常棒的独立 Java 库，用于读取和写入 PNG 图像），但我无法获得针对每个 apng 帧存储的不同信息就像每一帧的延迟。

我目前只能通过使用获取存储在标题部分中的简单 png 图像信息

```
PngReader pngr = FileHelper.createPngReader(File);
pngr.imgInfo; 
```

但我不知道如何将信息存储在 fcTL 块中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:05:31.443

看看你目前是如何从 fdAT 读取 4 字节整数 'seq' 的。

您可以以同样的方式从 fcTL 读取信息。

请记住，有些信息在 fcTL 中存储为 4 个字节，有些为 2 个字节，有些为 1 个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T01:40:24.147

您省略了您正在使用[PNGJ](https://code.google.com/p/pngj)库的信息。[正如我在另一个答案](https://stackoverflow.com/questions/12859424/extracting-png-files-from-apng-in-java)中提到的，这个库不解析 APGN 块（fcTL、fdAT）。它加载它们（您可以在 ChunksList 属性中检查它们），但它们将被设置为“未知”块，因此二进制数据将以原始形式保留。如果您想查看 fcTL 块的内容，您可以自己解析二进制文件，或者自己实现该块类型的逻辑并将其注册到阅读器中（[这里是自定义块的示例](http://code.google.com/p/pngj/source/browse/pnjg/src/ar/com/hjg/pngj/test/SampleCustomChunk.java)）。

# iphone - iPhone在摇晃期间执行代码

> ID：13001501
> 
> 赞同：0
> 
> 时间：2012-10-21T19:43:59.760
> 
> 标签：iphone, progress-bar, shake

我有以下代码：

```
- (void) motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event{
    if (motion == UIEventSubtypeMotionShake){
        NSLog(@"Detected a shake"); }
} 
```

此代码在摇动开始时为 NSLogs，或者我可以实现 motionEnded，然后在摇动结束时将 NSLog，但我想要的是在摇动期间执行代码（iPhone 摇动时进度条从 0 到 100）。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:49:51.903

在运动开始回调中，您应该创建一个执行函数的线程。该功能应该在“摇晃”期间执行您想做的事情。当调用 motionEnded 回调时，您应该终止线程。

查看 NSThread 文档以获取更多信息。

最值得注意的是：

*   [-initWithTarget：选择器：对象：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/occ/instm/NSThread/initWithTarget%3aselector%3aobject%3a)
*   [-开始](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/occ/instm/NSThread/start)
*   [-取消](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html#//apple_ref/occ/instm/NSThread/cancel)

# c - 向C中的结构分配双指针内存

> ID：13001502
> 
> 赞同：0
> 
> 时间：2012-10-21T19:44:01.837
> 
> 标签：c, pointers, struct, dynamic-memory-allocation, double-pointer

找不到此代码有什么问题，它在输入正好 4 个值时按预期工作，但在第五次调用时（甚至在它要求 scanf 之前）它总是给我这个错误： *** glibc detected****./a2: 双重释放或损坏 (fasttop): 0x0916e018 ** **

 *这是我的程序的一些代码：

```
typedef struct {
  int i;
  char str[25];
} typeX;

int main(){
  int dSize = 0;
  int *dSizePtr = &dSize;
  dPointer = (typeX **)malloc(sizeof(typeX *)); // makes an array of pointers
  int i;
  for (i = 0; i < 100; i++)
    makeElement(dPointer, dSizePtr); // Puts values into those pointers
  free(dPointer);
  return 0;
}

void makeElement(dPointer **, int *dSizePtr){
  dPointer = (typeX **)realloc(dPointer, sizeof(typeX *)*(*dSizePtr+1)); // grow the array by one
  if (typeX == NULL)
    return; // some kind of quit statement, just return for now

  dPointer[*dSizePtr] = (typeX *)malloc(sizeof(typeX)); // make a new pointer in the array
  scanf("%s", dPointer[*dSizePtr]->str); // input the values of the struct (have to use scanf)
  char input[20]; 
  scanf("%s", input);
  dPointer[*dSizePtr]->int = atoi(input);

  ++(*dSizePtr);
} 
```

我知道我不必制作 dSizePtr，我可以传入 &dSize，但是我的程序当前设置的方式（这不完全相同，只是为了可读性而压缩），这就是我必须通过的方式它。

老实说，我不知道为什么会出现这个错误。一直在查看我的代码几个小时并在线阅读并没有找到解决方案。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:47:40.440

问题是你的函数`makeElement`得到的值`dPointer`，而不是它的引用。当你`realloc`数据时，最初分配的块被释放。但是范围之外的 dPointer`makeElement`没有改变；

运行时错误被延迟，因为实际内存分配的数量大于 sizeof(typeX*)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:05:20.633

这条线导致双重释放。

```
dPointer = (typeX **)realloc(dPointer, sizeof(typeX *)*(*dSizePtr+1)); // grow the array by one 
```

对于调用者中循环的前几次迭代，内存块足够大，realloc() 不必做任何事情，因此它返回传递给它的相同指针。但是在某些时候内存块太小了，realloc() 必须分配一个新的内存块并返回一个指向它的指针。该返回的指针在 makeElement() 中分配给 dPointer，但**它不会更改 caller 中 dPointer 的值**。因此，调用者继续将旧的 dPointer 值传递给 makeElement()，后者将其传递给 realloc()，后者注意到该指针已被释放（通过调用 realloc() 扩展了数组的大小）。*

# c - 输出返回错误结果

> ID：13001510
> 
> 赞同：-1
> 
> 时间：2012-10-21T19:44:24.177
> 
> 标签：c, function

```
#include <stdio.h>

#define GA_OF_PA_NEED 267.0

int getSquareFootage(int squareFootage);
double calcestpaint(int squareFootage);
double printEstPaint(double gallonsOfPaint);

int main(void)

{
  //Declaration
  int squareFootage = 0;
  double gallonsOfPaint = 0;

  //Statements
  getSquareFootage(squareFootage);
  gallonsOfPaint = calcestpaint(squareFootage);
  gallonsOfPaint = printEstPaint(gallonsOfPaint);
  system("PAUSE");
  return 0;
}

int getSquareFootage(int squareFootage)
{
  printf("Enter the square footage of the surface: ");
  scanf("%d", &squareFootage);
  return squareFootage;
}

double calcestpaint( int squareFootage)
{
  return (double) (squareFootage * GA_OF_PA_NEED);    
}
double printEstPaint(double gallonsOfPaint)
{

  printf("The estimate paint is: %lf\n",gallonsOfPaint);
  return gallonsOfPaint;
} 
```

为什么我的输出显示gallonsOfPaint 为0.0，没有错误，一切似乎在逻辑上都是正确的。calc 函数中的计算语句似乎有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:47:32.920

您需要分配结果`getSquareFootage(squareFootage);`：

```
squareFootage = getSquareFootage(squareFootage); 
```

由于`squareFootage`是按值传递而不是按引用传递，换句话说，无论您在函数中对其进行多少更改，它都不会在函数之外产生任何影响。或者，您可以通过引用传递它：

```
void getSquareFootage(int * squareFootage)
{
     printf("Enter the square footage of the surface: ");
     scanf("%d", squareFootage);
} 
```

这将被称为：

```
getSquareFootage(&squareFootage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:48:27.357

像这样正确`squareFootage=getSquareFootage();`

无需传递参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:23:40.620

您没有更新变量 squareFootage。当您调用 calcestpaint(squareFootage) 时，您将值 0 作为参数传递。

# c# - 如何使用 LINQ 在未知子元素位置选择子节点

> ID：13001511
> 
> 赞同：1
> 
> 时间：2012-10-21T19:44:50.930
> 
> 标签：c#, xml, linq, xpath

我的 XML 文件包含类似于以下内容的结构：

```
<root>
    <Manager name="1">
        <Manager name="2">
            <Employee name="3">
        </Manager>
        <Manager name="abe">
        </Manager>
        <Employee name="4">
        <Employee name="5">
    </Manager>
</root> 
```

XML 提供一个树视图，并且根据用户在树视图中单击的位置，我要么想检索单击的员工（这很容易，因为我可以使用`treeview.SelectedNode`），或者如果单击是在根节点上，或者一个经理节点，经理下的第一个员工。

IE

*   单击`root`应显示详细信息`Employee 4`（第一个 Employee 记录在`Manager 1`直接下`root`）。
*   点击`Manager 1`也应该显示`Employee 4`。
*   单击`Manager 2`应显示`Employee 3`.
*   单击`Manager Abe`不会产生任何结果。
*   `Employee 5`仅在直接点击该员工时显示。

也有可能`Manager 1`在他手下没有任何直接雇员。在这种情况下，单击 root 应该会在第一个有员工的经理下产生第一个 Employee。因此，如果我们假设`Employee 4`并且`Employee 5`不在`Manager 1`，单击 root 将产生`Employee 3`。

我尝试使用,和, 的一些不同变体`Element`，但有点卡住了。`Elements``Descendant``Descendants`

我想我可以为每个单独的组合（即 和 ）编写场景`rootClicked`，`managerClicked`这`employeeClicked`是我最初所做的，但我正在寻找一些希望更容易维护的东西，代码方面。

我非常希望使用 root.Element("Employee") 会有所帮助，但这会引发`Could not find an implementation of the query pattern for source type 'System.Xml.Linq.XEelement'. 'select' not found`错误。

任何人都可以为我提供解决我的问题所需的一点点推动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:03:14.560

**使用 XPath**：

```
ClickedNode.XPathEvaluate
    ("self::Employee | self::Manager/Employee[1] | self::root/Manager[1]/Employee[1]") 
```

* * *

**更新**：

回答已编辑的问题：

**使用**：

```
 ClickedNode[self::Employee]
|
 ClickedNode[not(self::Employee)]/descendant-or-self::Manager[Employee][1]/Employee[1] 
```

**这选择**：

一个。单击的节点，如果它是“员工”

或者：

湾。单击节点的第一个子`Employee`节点的第一个子节点，即管理器并有一个子节点`Employee`

**并且，如果 ClickedNode 是`XElement`（或`XNode`），则执行**以下操作：

```
 ClickedNode.XPathEvaluate
        (self::*[self::Employee]
      | self::node()[not(self::Employee)]
                       /descendant-or-self::Manager[Employee][1]/Employee[1]
        ) 
```

* * *

**最后，这是一个完整的 C# 代码**：

**一个名为的静态类`TestLinqXpath`**：

```
using System.Xml.Linq;
using System.Xml.XPath;

namespace TestLinqXpath
{
    public  static class TestLinqXpath
    {
        public static XElement SelectNearestDescendantEmployee(XElement clicked)
        {
            string Expr =
@"(self::*[self::Employee]
 | self::node()[not(self::Employee)]
           /descendant-or-self::Manager[Employee][1]/Employee[1]
   )";
            XElement result = clicked.XPathSelectElement(Expr);

            return result;
        }
    }
} 
```

**和广泛的测试**：

```
using System;
using System.Xml.Linq;
using System.Xml.XPath;

namespace TestLINQ_Xml
{
    class Program
    {
        static void Main(string[] args)
        {
            Test();
        }

        static void Test()
        {
            string xml = 
@"<root>
    <Manager name='1'>
        <Manager name='2'>
            <Employee name='3'/>
        </Manager>
        <Manager name='abe'>
        </Manager>
        <Employee name='4'/>
        <Employee name='5'/>
    </Manager>
</root>";
            XElement top = XElement.Parse(xml);

            XElement cliked1 = top;
            XElement res1 = TestLinqXpath.TestLinqXpath.SelectNearestDescendantEmployee(cliked1);
            Console.WriteLine(res1.ToString());

            XElement cliked2 = top.XPathSelectElement("Manager[@name='1']");
            XElement res2 = TestLinqXpath.TestLinqXpath.SelectNearestDescendantEmployee(cliked2);
            Console.WriteLine(res2.ToString());

            XElement cliked3 = top.XPathSelectElement(".//Manager[@name='2']");
            XElement res3 = TestLinqXpath.TestLinqXpath.SelectNearestDescendantEmployee(cliked3);
            Console.WriteLine(res3.ToString());

            XElement cliked4 = top.XPathSelectElement(".//Manager[@name='abe']");
            XElement res4 = TestLinqXpath.TestLinqXpath.SelectNearestDescendantEmployee(cliked4);
            Console.WriteLine((res4 != null) ? res4.ToString() : "null");

            XElement cliked5 = top.XPathSelectElement(".//Employee[@name='5']");
            XElement res5 = TestLinqXpath.TestLinqXpath.SelectNearestDescendantEmployee(cliked5);
            Console.WriteLine(res5.ToString());
        }
    }
} 
```

**运行此测试时，会产生所需的正确结果：**

```
<Employee name="4" />
<Employee name="4" />
<Employee name="3" />
null
<Employee name="5" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:05:14.840

这个**linq2xml**应该做

```
doc.Descendants("Manager").Where(n=>n.Attribute("name").Value=="yourManagerID")
.Select(
x=>x.Elements("Employee").Count()!=0 
?
x.Elements("Employee").First().Attribute("name").Value
:
x.Elements("Manager").First().Element("Employee").Atrribute("name").Value
); 
```

# java - 随机选择二维数组中的唯一元素

> ID：13001512
> 
> 赞同：3
> 
> 时间：2012-10-21T19:45:05.327
> 
> 标签：java, algorithm

嗨，我正在做一项任务，但我对二维数组的概念有点落伍了。我正在编写一个随机选择二维数组中的元素的方法体。但是，我不完全确定何时解决该问题。

我正在考虑使用随机数生成器来选择一个随机元素。虽然我首先需要的是首先用一个值填充整个盒子的长度。在这种情况下，二维数组框的尺寸为 20x20，值为零。所以我希望二维数组完全用零填充。虽然如果我使用随机数生成器，那么在整个框尺寸首先用零填充之前，是否有可能再次使用生成器随机选择的元素？

对不起，很长的文字块。基本上我要问的是是否有一种方法可以使用随机数生成器仍然随机生成数字但不重复以前使用的任何数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:49:33.237

一种选择是使用`Collections.shuffle(allCells)`.

另一种选择是使用以下算法，通过跟踪剩余的未使用单元：

```
1\. Find a random number from 0 to size of the set - 1 .
2\. Remove number at position `randomNumber` from the set.
3\. Go to 1. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:50:58.903

我会这样：

```
 int [][] myArray = new int[4][5]; //Any size and type
        int totalEmenent = myArray.length *myArray[0].length;
        int indexToSelect = (int)(Math.random()*totalEmenent);
        int xIndex = (int)indexToSelect/myArray.length;
        int yIndex = indexToSelect%myArray.length;
        int selectElement = myArray[xIndex][yIndex]; 
```

如果您希望每次都选择唯一索引：

```
 int [][] myArray = new int[4][5]; //Any size and type
        int totalEmenent = myArray.length *myArray[0].length;
        String selectedIndex = "";
        int numberOfSelect = 10; //Any number< totalEmenent

         for(int indx=0; indx< numberOfSelect; indx++){
              int indexToSelect = (int)(Math.random()*totalEmenent);
              //generate random until its unique
              while(selectedIndex.indexOf(String.valueOf(indexToSelect))> 0){
                   indexToSelect = (int)(Math.random()*totalEmenent);
              }
              selectedIndex = selectedIndex+indexToSelect;
              int xIndex = (int)indexToSelect/myArray.length;
              int yIndex = indexToSelect%myArray.length;
              int selectElement = myArray[xIndex][yIndex];
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:00:24.547

从我上面读到的...你想用 0 填充一个 20x20 2D 数组，但你想通过每次在数组中选择一个随机位置来做到这一点，并且你不想“重新填充”一个插槽.

最快的方法是创建一个包含所有可能位置的数组（在这种情况下，即 0..399，如果您认为 value/20 = 第一个索引，并且 value%20 = 第二个索引，例如125 = 数组[125/20][125%20] 或数组[6][5]，看到了吗？）

所以，首先，用值 0..399 填充这个数组位置 [400]。

```
int [][] box = new int[20][20];
int [] locations = new int[400];
for ( int i = 0; i < 400; i++ ) locations[i] = i; 
```

然后，从上限 399 开始，生成一个从 0 到上限的随机数 loc，并使用位置 [loc] 作为当前索引填充 0，然后将位置 [位置] 与位置 [上限] 交换，减少上限为 1，然后继续。到时间上限达到 0 时，您将使用所有位置。

```
int cap = 399;
Random rand = new Random();
while ( cap >= 0 ) {
    int rnd = rand.nextInt(cap+1);
    int loc = locations[ rnd ];
    box[loc%20][loc/20] = 0;   // Here's where we set the value 0 into the 2D array
    // now swap the location selected with the value at the "end" of the current list.
    // hmm, forget the swapping, let's just bring that value in from the end.
    locations[rnd] = locations[cap];
    cap--;  // "shrink" the current list, eliminating the value we just put at the end from consideration.
} 
```

那应该这样做。您应该能够看到这永远不会从“位置”数组中选择相同的值，因为循环结束时的交换将位置值放在索引 0 的边界之外以进行上限。下一次循环时，不可能再次选择该值（或任何其他已使用的值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:22:26.420

在填充数组时，您可以有一个数组列表来添加每个单元格的索引（比如 i，j），然后生成随机数

```
Arraylist<int[]> ar=new Arraylist();
//inside loop for populating array
    yourArray[i][j]=whatever;
    ar.add({i,j});
//loop ends

int index=new Random().nextInt(ar.size());
int[] arrayIndex=ar.get(index);
ar.remove(index);
row=arrayIndex[0];
column=arrayIndex[1];
(Type)randomElement=yourArray[row][column]; 
```

# youtube-api - Youtube API - 相关语言代码与 lr 参数

> ID：13001516
> 
> 赞同：0
> 
> 时间：2012-10-21T19:45:39.860
> 
> 标签：youtube-api

我认为related_lang_languageCode 不起作用或者我不明白如何... ...在语言限制的情况下，它只能找到特定语言的视频（我同意）但使用 orderby=relevance_lang_languageCode 它不插入（在至少）首先是来自该特定语言的视频......例如：

```
http://gdata.youtube.com/feeds/api/videos?vq=MSI%20GTX%20680%20Twin&orderby=relevance_lang_de 
```

它似乎工作......但是

```
http://gdata.youtube.com/feeds/api/videos?vq=MSI%20GTX%20680%20Twin&orderby=relevance_lang_it 
```

即使

```
http://gdata.youtube.com/feeds/api/videos?vq=MSI%20GTX%20680%20Twin&lr=it 
```

找到来自意大利语的视频...你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:24:56.027

如果要检索意大利语视频，请使用`lr=it`. `orderby=relevance_lang_it`如果要检索按与意大利语使用者的相关性排序且全部为意大利语的结果，则可以将其与一起使用。这两个参数不是非此即彼的。

[http://gdata.youtube.com/feeds/api/videos?q=MSI%20GTX%20680%20Twin&orderby=relevance_lang_it&v=2&lr=it](http://gdata.youtube.com/feeds/api/videos?q=MSI%20GTX%20680%20Twin&orderby=relevance_lang_it&v=2&lr=it)

的文档`orderby=`解释说，即使您指定`relevance_lang_LC`，结果也不能保证使用该语言。

[https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#orderbysp](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#orderbysp)

# python - 你可以在一行中移动两个画布对象吗？

> ID：13001523
> 
> 赞同：0
> 
> 时间：2012-10-21T19:46:45.757
> 
> 标签：python, canvas, refactoring

我试图在这里重构一些代码，使其更易于管理和阅读友好。我目前坚持使用这种对我来说似乎非常简单的巨大方法，我想看看我是否可以再分解它：

```
def moveCircle(self, event):
    if event.keysym == "Up":
        self.canvas.move("circle", 0, -5)
        self.canvas.move("text", 0, -5)
        self.y1 -= 5
        self.y2 -= 5
    elif event.keysym == "Down":
        self.canvas.move("circle", 0, 5)
        self.canvas.move("text", 0, 5)
        self.y1 += 5
        self.y2 += 5
    elif event.keysym == "Left":
        self.canvas.move("circle", -5, 0)
        self.canvas.move("text", -5, 0)
        self.x1 -= 5
        self.x2 -= 5
    elif event.keysym == "Right":
        self.canvas.move("circle", 5, 0)
        self.canvas.move("text", 5, 0)
        self.x1 += 5
        self.x2 += 5
    self.canvas.update 
```

我有两个画布对象，“圆圈”和“文本”，每次用户按下其中一个箭头键时，它们都会移动相同的值。唯一改变的是方向（duh）。我的 x1、x2、y1 和 y2 的实例变量在程序中用于对这个问题不重要的目的（你知道。我确实需要它们，并以这种方式递减）。我所希望的是一个神奇的`self.canvas.move("circle" && "text", 0, 5)`或类似的荒谬的东西。（显然，该命令不存在，但我想知道是否有更简洁的方法可以做到这一点，或者我只是发疯了）

作为记录，我也尝试过`self.y1 = self.y2 -= 5`，编译器抛出了一个错误，所以这很糟糕。任何人都知道如何同时减少和减少相同数量的多个值？那将是超级酷的豆子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:14:52.573

如果你把它分开可能会更易于管理

```
def moveCircle(self, event):
    dif = { 
                    "Up":(0,-5),
                    "Down":(0,5),
                    "Left":(-5,0),
                    "Right":(5,0),
            }   
    self.moveCanvas(*(dif[event.keysym]))
    self.canvas.update

def moveCanvas(self, xdif, ydif):
    self.canvas.move("circle", xdif, ydif)
    self.canvas.move("text", xdif, ydif)
    self.x1 += xdif
    self.x2 += xdif
    self.y1 += ydif
    self.y2 += ydif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:08:51.927

您可以使用每个方向的单位向量定义字典。就像是：

uvs = {'right': 1,0, 'up': 0,-1...}

然后对于每次移动，获取要移动的每个元素的当前位置，添加单位向量（和所需的缩放比例），然后重新定位元素。

# php - 从选定的 jquery 自动完成字段向服务器发送 id 值

> ID：13001525
> 
> 赞同：0
> 
> 时间：2012-10-21T19:46:54.110
> 
> 标签：php, mysql, jquery-ui

我正在尝试从自动完成字段发送 id 值...到目前为止，我的表单中有类似的内容，当我输入某些内容时，它可以让我得到查询的结果..

```
require_once("../classes/classmodels.php");

$tra=new Aggrekomodels();

if(isset($_GET['client']))
    die (json_encode($tra->get_proyectos_clientes($_REQUEST['term'])));

<form id="formempl">
    <input type="text" name="client" id="autoclient" />
    <input id="add" type="submit" />
</form> 
```

现在，我要做的是发送 _id_employee_ 而不是自动完成的文本。到目前为止，我的 js 中有这个。

```
function autocompleteProjects(){

    $( "#autoclient" ).autocomplete({
        source: 'projects/add_projects.php?client=1'
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:03:26.127

您需要使用[自动完成选择事件](http://api.jqueryui.com/autocomplete#event-select)从 JSON 响应中解析出 ID，然后在表单中添加隐藏字段，以便在提交表单时发送 ID：

```
$("#autoclient").autocomplete({
    source: 'projects/add_projects.php?client=1',
    select: function(event, ui) {
         // add hidden field with the selected item id
         $("#formempl")
              .append("<input id='employer_id' type='hidden' />").val(ui.item.id);
    }
}); 
```

# ember.js - 来自 Ember 自己网站的原型代码不起作用——有什么想法吗？

> ID：13001535
> 
> 赞同：0
> 
> 时间：2012-10-21T19:47:39.203
> 
> 标签：ember.js

在 ember 网站的**[教程页面](http://emberjs.com/guides/router_primer/#toc_fetching-data)**上有几个广泛的代码示例，它们都以特定方式失败。由于这应该是表面上用于指导新手如何在 ember 中编码的原型 ember 代码，所以我不知所措。知道ember的人可以看看代码。（一个例子就在我列出的那个书签的正上方，包括模板和 js。

具体来说，主根页面模板有一个仅由子页面写入的插座“页脚”，但是当您导航回主页（根/索引）页面时，该插座仍然显示来自子页面的信息，它不应该。同样的事情发生在名为“traversal”的模板上，其出口仅由子页面写入，但当您导航回根目录时，该出口仍会在其中显示信息。

我确实在 API 文档中遇到了一个函数`disconnectOutlet`，但它说您几乎不必使用它，而且它不在示例代码中。我试过了——显然实际上已经不在 api 中了。

如果你想运行上面的代码，你需要从 ember 站点获得以下内容：

```
 <link rel="stylesheet" href="css/style.css">
  <script src="js/libs/jquery-1.7.2.min.js"></script>
  <script src="js/libs/handlebars-1.0.rc.1.js"></script>
  <script src="js/libs/ember-1.0.pre.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:06:55.820

正如你所提到的，`disconnectOutlet`是由这个[pull request](https://github.com/emberjs/ember.js/pull/1277)添加的。您可以使用它从控制器中删除 outletView（按名称）。例如，`myOutletViewName`在退出某个路由时从 applicationController 中移除：

```
 aRoute: Ember.Route.extend({
    exit: function(router) {
      router.applicationController.disconnectOutlet('myOutletViewName')
    }
  }) 
```

请注意，如果您`{{outlet}}`在模板中使用，而不指定名称，则默认名称是`view`这样的：

```
router.applicationController.disconnectOutlet('view') 
```

# asp.net - 子虚拟目录中的 HttpModule

> ID：13001538
> 
> 赞同：1
> 
> 时间：2012-10-21T19:47:53.410
> 
> 标签：asp.net, iis-7, content-management-system

我正在尝试将我的网站托管在 CMS 的子目录中。

为了进行一些初始化，我创建了一个 HttpModule 并将其添加到我的子虚拟目录的 web.config 中……但它似乎没有被调用……不确定在子虚拟目录中是否可能.

在父 CMS 下托管我的子站点并能够执行一些初始化代码的首选方式是什么？

# haskell - 从 lambda 项到组合项的转换

> ID：13001544
> 
> 赞同：6
> 
> 时间：2012-10-21T19:49:01.520
> 
> 标签：haskell, lambda-calculus, equivalence, k-combinator, s-combinator

假设有一些数据类型来表达 lambda 和组合项：

```
data Lam α = Var α                   -- v
           | Abs α (Lam α)           -- λv . e1
           | App (Lam α) (Lam α)     -- e1 e2
             deriving (Eq, Show)

infixl 0 :@
data SKI α = V α                     -- x
           | SKI α :@ SKI α          -- e1 e2
           | I                       -- I
           | K                       -- K
           | S                       -- S
             deriving (Eq, Show) 
```

还有一个函数可以获取 lambda 项的自由变量列表：

```
fv ∷ Eq α ⇒ Lam α → [α]
fv (Var v) = [v]
fv (Abs x e) = filter (/= x) $ fv e
fv (App e1 e2) = fv e1 ++ fv e2 
```

将 lambda 项转换为组合项抽象消除规则可能很有用：

```
convert ∷ Eq α ⇒ Lam α → SKI α 
```

1) T[x] => x

```
convert (Var x) = V x 
```

2) T[(E₁ E₂)] => (T[E₁] T[E₂])

```
convert (App e1 e2) = (convert e1) :@ (convert e2) 
```

3) T[λx.E] => (KT[E]) （如果 x 在 E 中不自由出现）

```
convert (Abs x e) | x `notElem` fv e = K :@ (convert e) 
```

4) T[λx.x] => 我

```
convert (Abs x (Var y)) = if x == y then I else K :@ V y 
```

5) T[λx.λy.E] => T[λx.T[λy.E]] （如果 x 在 E 中自由出现）

```
convert (Abs x (Abs y e)) | x `elem` fv e = convert (Abs x (convert (Abs y e))) 
```

6) T[λx.(E₁ E₂)] => (ST[λx.E₁] T[λx.E₂])

```
convert (Abs x (App y z)) = S :@ (convert (Abs x y)) :@ (convert (Abs x z))

convert  _ = error ":[" 
```

这个定义是无效的，因为`5)`：

```
Couldn't match expected type `Lam α' with actual type `SKI α'
In the return type of a call of `convert'
In the second argument of `Abs', namely `(convert (Abs y e))'
In the first argument of `convert', namely
  `(Abs x (convert (Abs y e)))' 
```

所以，我现在拥有的是：

```
> convert $ Abs "x" $ Abs "y" $ App (Var "y") (Var "x")
*** Exception: :[ 
```

我想要的是（希望我计算正确）：

```
> convert $ Abs "x" $ Abs "y" $ App (Var "y") (Var "x")
S :@ (S (KS) (S (KK) I)) (S (KK) I) 
```

**问题**：

如果 lambda 项和组合项具有不同类型的表达式，那么如何`5)`正确表述呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:35:27.977

这里最好为组合器和 lambda 表达式提供一个通用的数据类型。请注意，您的类型已经有很大的重叠（`Var`, `App`），并且在 lambda 表达式中使用组合子并没有什么坏处。

我们要消除的唯一可能性是在组合子术语中使用 lambda 抽象。我们可以使用索引类型来禁止它们。

在下面的代码中，术语的类型由该术语中嵌套的 lambda 抽象的数量参数化。`convert`函数返回`Term Z a`，这里的`Z`意思是零，所以返回的项中没有 lambda 抽象。

有关单例类型的更多信息（此处使用了一点），请参阅论文[Dependently Typed Programming with Singletons](http://www.cis.upenn.edu/~eir/papers/2012/singletons/paper.pdf)。

```
{-# LANGUAGE DataKinds, KindSignatures, TypeFamilies, GADTs, TypeOperators,
    ScopedTypeVariables, MultiParamTypeClasses, FlexibleInstances #-}

data Nat = Z | Inc Nat

data SNat :: Nat -> * where
  SZ :: SNat Z
  SInc :: NatSingleton n => SNat n -> SNat (Inc n)

class NatSingleton (a :: Nat) where
  sing :: SNat a

instance NatSingleton Z where sing = SZ
instance NatSingleton a => NatSingleton (Inc a) where sing = SInc sing

type family Max (a :: Nat) (b :: Nat) :: Nat
type instance Max Z a = a
type instance Max a Z = a
type instance Max (Inc a) (Inc b) = Inc (Max a b)

data Term (l :: Nat) a where
  Var :: a -> Term Z a
  Abs :: NatSingleton l => a -> Term l a -> Term (Inc l) a
  App :: (NatSingleton l1, NatSingleton l2)
      => Term l1 a -> Term l2 a -> Term (Max l1 l2) a
  I   :: Term Z a
  K   :: Term Z a
  S   :: Term Z a

fv :: Eq a => Term l a -> [a]
fv (Var v) = [v]
fv (Abs x e) = filter (/= x) $ fv e
fv (App e1 e2) = fv e1 ++ fv e2
fv _ = []

eliminateLambda :: (Eq a, NatSingleton l) => Term (Inc l) a -> Term l a
eliminateLambda t =
  case t of
    Abs x t ->
      case t of
        Var y
          | y == x -> I
          | otherwise -> App K (Var y)
        Abs {} -> Abs x $ eliminateLambda t
        App a b -> S `App` (eliminateLambda $ Abs x a)
                     `App` (eliminateLambda $ Abs x b)
    App a b -> eliminateLambdaApp a b

eliminateLambdaApp
  :: forall a l1 l2 l . 
     (Eq a, Max l1 l2 ~ Inc l,
      NatSingleton l1,
      NatSingleton l2)
  => Term l1 a -> Term l2 a -> Term l a
eliminateLambdaApp a b =
  case (sing :: SNat l1, sing :: SNat l2) of
    (SInc _, SZ    ) -> App (eliminateLambda a) b
    (SZ    , SInc _) -> App a (eliminateLambda b)
    (SInc _, SInc _) -> App (eliminateLambda a) (eliminateLambda b)

convert :: forall a l . Eq a => NatSingleton l => Term l a -> Term Z a
convert t =
  case sing :: SNat l of
    SZ -> t
    SInc _ -> convert $ eliminateLambda t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:18:22.620

让我们考虑方程 T[λx.λy.E] => T[λx.T[λy.E]]。

我们知道 T[λy.E] 的结果是一个 SKI 表达式。由于它是由案例 3、4 或 6 之一产生的，因此它要么是 I，要么是应用程序 ( `:@`)。

因此 T[λx.T[λy.E]] 中的外层 T 必须是情况 3 或 6 之一。您可以在代码中进行这种情况分析。对不起，我没有时间写出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T17:09:16.130

关键的见解是 S、K 和 I 只是常数 Lam 项，就像 1、2 和 3 是常数 Ints 一样。通过对“转换”函数进行逆操作来进行规则 5 类型检查将非常容易：

```
nvert :: SKI a -> Lam a
nvert S = Abs "x" (Abs "y" (Abs "z" (App (App (Var "x") (Var "z")) (App (Var "y") (Var "z")))))
nvert K = Abs "x" (Abs "y" (Var "x"))
nvert I = Abs "x" (Var "x")
nvert (V x) = Var x
nvert (x :@ y) = App (nvert x) (nvert y) 
```

现在我们可以使用 'nvert' 来进行规则 5 类型检查：

```
convert (Abs x (Abs y e)) | x `elem` fv e = convert (Abs x (nvert (convert (Abs y e)))) 
```

我们可以看到左边和右边是相同的（我们将忽略守卫），除了左边的 'Abs y e' 被右边的 'nvert (convert (Abs ye))' 替换。由于 'convert' 和 'nvert' 互为倒数，我们*总是*可以用 'nvert (convert x)' 替换任何 Lam 'x' ，同样我们总是可以用 'convert (nvert x)' 替换任何 SKI 'x' ，所以这是一个有效的方程。

不幸的是，虽然它是一个有效的方程，但它不是一个有用的函数定义，因为它不会导致计算进行：我们只会永远来回转换'Abs y e'！

为了打破这个循环，我们可以用“提醒”替换对“nvert”的调用，我们应该稍后再做。我们通过向 Lam 添加一个新的构造函数来做到这一点：

```
data Lam a = Var a                   -- v
           | Abs a (Lam a)           -- \v . e1
           | App (Lam a) (Lam a)     -- e1 e2
           | Com (SKI a)             -- Reminder to COMe back later and nvert
             deriving (Eq, Show) 
```

现在规则 5 使用这个提醒而不是“nvert”：

```
convert (Abs x (Abs y e)) | x `elem` fv e = convert (Abs x (Com (convert (Abs y e)))) 
```

现在我们需要兑现我们回来的承诺，制定一个单独的规则，用对“nvert”的实际调用替换提醒，如下所示：

```
convert (Com c) = convert (nvert c) 
```

现在我们终于可以打破循环了：我们知道 'convert (nvert c)' 总是与 'c' 相同，所以我们可以将上面的行替换为：

```
convert (Com c) = c 
```

请注意，我们对“convert”的最终定义实际上根本没有使用“nvert”！不过，它仍然是一个方便的功能，因为涉及 Lam 的其他功能可以使用它来处理新的“Com”案例。

你可能已经注意到我实际上将这个构造函数命名为“Com”，因为它只是一个包装好的 COMbinator，但我认为采取稍微长一点的路线比仅仅说“在 Lams 中包装你的 SKI”更能提供信息:)

如果您想知道为什么我将该功能称为“nvert”，请参阅[http://unapologetic.wordpress.com/2007/05/31/duality-terminology/](http://unapologetic.wordpress.com/2007/05/31/duality-terminology/) :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-09T17:46:09.633

Warbo 是对的，组合子是常数 lambda 项，因此转换函数是
`T[ ]:L -> C`L 是 lambda 项的集合，C 是组合项的集合，并且 C ⊂ L 。

所以规则没有打字问题`T[λx.λy.E] => T[λx.T[λy.E]]`

[这](https://github.com/au-arena/LambdaToCombinator)是Scala中的一个实现。

# css - 如何避免在 CSS 中继承 opacity 属性？

> ID：13001549
> 
> 赞同：-1
> 
> 时间：2012-10-21T19:49:25.803
> 
> 标签：css, opacity

我在 CSS 文件中设置了一个`div`元素，`opacity: 0.7;`因为我希望其中的文本不透明。我在 this 中显示了一些图像`div`，但是这些图像带有继承的 opacity 属性。结果是不透明的图像。

是否可以为图像赋予 CSS 属性以不继承`div`包含它们的不透明度？如果没有，我怎样才能避免图像不透明？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:03:17.017

如果您使用`opacity`允许*文本*具有部分透明度，则只需设置`color`元素的 ：

```
#elemId {
    color: rgba(0,0,0,0.7);
} 
```

这可以让您避免调整`opacity`属性，并且*应该*在所有支持该`opacity`属性的浏览器中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:58:49.563

唯一的办法就是定位。这是一篇来自 CSS Tricks 的精彩文章：http: [//css-tricks.com/non-transparent-elements-inside-transparent-elements/](http://css-tricks.com/non-transparent-elements-inside-transparent-elements/)

使用`position: relative;`和一个最高值使元素相互叠加。

如果您只是想让背景透明，那么您可以`rgba()`在背景中使用该值。

**编辑：**

这是一个疯狂的想法。您可以使用 PHP GD 来呈现带有灰色背景（透明）的图像，并带有您希望在正确位置显示的白色文本。然后使用`mask-box-image`或`mask-image`CSS 属性并将其设置为渲染图像。

当然，如果您的内容不是动态的，那么您可以在 Photoshop/任何程序中制作图像。

从浏览器到 GD 渲染，抗锯齿不会相同，但如果您不想使用定位，这是最好的 hack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-20T10:12:55.527

在您的 css 中添加以下代码

z-索引：111

有用。

# upload - 为 Arduino 上传配置 Xbee 的命令是什么？

> ID：13001553
> 
> 赞同：2
> 
> 时间：2012-10-21T19:49:46.030
> 
> 标签：upload, arduino, xbee

我想使用我的 xbee 收音机上传到 arduino uno，但似乎无法正常工作。我已经将 xbee 配置为可以发送和接收序列，所以我错过了什么？为什么上传失败？

我使用 xctu 将波特率设置为 115200 并在连接到我的电脑的 xbee 上设置广播模式。在 uno 上也是如此，并使用测试草图将任何接收到的串行数据从 arduino 发送到 xbee。

当我输入 xctu 时，我会返回我输入的内容，所以我知道这是来自 arduino

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:59:08.827

不止于此。上传需要重置 Arduino。uno 上的 xbee 没有能力执行此操作，并且默认情况下通常也不连接到复位引脚。

最好的解决方案是获得一个硬件内置设施的 Arduino Fio。使用 uno，您将需要连接一些额外的电子设备，但这是一项非常简单的工作。

一旦您的硬件处于良好状态，您将需要使用 xctu 来应用这些设置。该设置将与 Fio 使用的相同... [http://arduino.cc/en/Main/ArduinoBoardFioProgramming](http://arduino.cc/en/Main/ArduinoBoardFioProgramming)

本文似乎将所需的 xbee 命令和硬件放在一起 [http://www.faludi.com/itp_coursework/meshnetworking/XBee/XBee_program_Arduino_wireless.html](http://www.faludi.com/itp_coursework/meshnetworking/XBee/XBee_program_Arduino_wireless.html)

# f# - 玩弄 F# 类型并迷路

> ID：13001555
> 
> 赞同：0
> 
> 时间：2012-10-21T19:49:53.160
> 
> 标签：f#, c#-to-f#, f#-3.0, f#-scripting

我一直在阅读 F# 并决定尝试一下。我从一个有点涉及的例子开始，我想出了并立即迷路了。我想知道是否有人可以分享一些想法。

我想编写一个名为的方法，该方法`ComparisonStrategy<'T>`返回一个`IEqualityComparer<'T>`. 它接受可变长度的`ComparisonWhichAndHow<'T>`实例。类型`ComparisonWhichAndHow<'T>`可以是：

1.  type 的一个函数`('T -> *)`，它是一种选择单个字段进行比较的方法
2.  一个 2 元组，`('T -> 'U, IEqualityComparer<'U>)`如果您不希望使用默认值`Equals`或`GetHashCode`用于`'U`.

我已经尝试在 Visual Studio 上画了一段时间，但我什至无法正确地获得函数声明部分。我有点肯定，如果我能克服这个问题，我将能够实现方法体，但似乎我做不到。

编辑：

这是我到目前为止尝试过的代码。

我正在努力实现以下两件事。

1.  想出一种为每个对象生成相等方法的通用方法。
2.  有时某些业务操作可能需要比较 2 个对象的某些字段，以及它们的子对象的某些字段。不是一个完整的比较。我正在尝试使编写这些代码更简洁

这是我到目前为止所拥有的：

```
module Failed =
    open System.Collections.Generic
    open System

    type ComparsionOption<'T, 'U> =
        | Compare of ('T -> 'U)
        | CompareWith of ('T -> 'U) * IEqualityComparer<'U>

    // TO USE: [<ParamArray>] 
    // TODO: this method returns a dummy for now
    let CompareStrategy (opts : ComparsionOption<'T, _> array) =
        EqualityComparer<'T>.Default

    // How it's used

    type Person(name : string, id : Guid) = 
        member this.Name = name
        member this.ID = id

    let fullCompare : EqualityComparer<Person> =
        CompareStrategy [|Compare(fun (p : Person) -> p.Name);
                            CompareWith((fun (p : Person) -> p.ID), EqualityComparer<Guid>.Default)|] // error here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:27:20.490

从另一个角度来看问题，您似乎希望能够构建以两种不同方式（您指定）执行比较的对象，然后组合它们。

让我们首先看看构建执行比较的对象的两种方法。您可以用 表示两者`IEqualityComparer<'T>`。第一个接受一个函数`'T -> Something`并对结果进行比较。你可以像这样定义一个函数：

```
/// Creates a comparer for 'T values based on a predicate that 
/// selects some value 'U from any 'T value (e.g. a field)
let standardComparer (f:'T -> 'U) = 
  { new IEqualityComparer<'T> with
      member x.Equals(a, b) = 
        (f a).Equals(b)  // Call 'f' on the value & test equality of results
      member x.GetHashCode(a) = 
        (f a).GetHashCode() } // Call 'f' and get hash code of the result 
```

该函数`'T -> 'U`使用 F# 泛型，因此您可以投影任何类型的字段（该类型必须具有可比性）。第二个原始函数也采用`'T -> 'U`，但它也采用值比较器`'U`而不是使用默认值：

```
/// Creates a comparer for 'T values based on a predicate & comparer
let equalityComparer (f:'T -> 'U) (comparer:IEqualityComparer<'U>) = 
  { new IEqualityComparer<'T> with
      member x.Equals(a, b) = 
        comparer.Equals(f a, f b) // Project values using 'f' and use 'comparer'
      member x.GetHashCode(a) =
        comparer.GetHashCode(f a) } // Similar - use 'f' and 'comparer' 
```

现在您说您想采用以上述两种方式之一创建的一系列值来构建一个单一的比较策略。我不完全确定你的意思。*当所有*指定的比较器报告它们相等时，您是否希望两个对象相等？

假设是这种情况，您可以编写一个组合两个`IEqualityComparer<'T>`值的函数，并在两个比较器报告它们相等时将它们报告为相等，如下所示：

```
/// Creates a new IEqualityComparer that is based on two other comparers
/// Two objects are equal if they are equal using both comparers.
let combineComparers (comp1:IEqualityComparer<'T>) (comp2:IEqualityComparer<'T>) =
  { new IEqualityComparer<'T> with
      member x.Equals(a, b) =
        comp1.Equals(a, b) && comp2.Equals(a, b) // Combine results using &&
      member x.GetHashCode(a) =
        // Get hash code of a tuple composed by two hash codes
        hash (comp1.GetHashCode(a), comp2.GetHashCode(a)) } 
```

这实际上实现了您需要的所有功能。如果你有一些 object `Person`，你可以像这样构造比较器：

```
// Create a list of primitive comparers that compare 
// Name, Age and ID using special 'idComparer'
let comparers =
  [ standardComparer (fun (p:Person) -> p.Name);
    standardComparer (fun (p:Person) -> p.Age);
    equalityComparer (fun (p:Person) -> p.ID) idComparer ]

// Create a single comparer that combines all of them...
let comparePerson = comparers |> Seq.reduce combineComparers 
```

您可以使用重载方法等将其包装在更加面向对象的接口中，但我认为上面的示例显示了您在解决方案中需要的所有重要组件。

顺便说一句：在示例中，我使用[F# 对象表达式](http://msdn.microsoft.com/en-us/library/dd233237.aspx)来实现所有功能。

# html - 块元素中的块元素；不知道怎么用 在这种情况下正确

> ID：13001560
> 
> 赞同：1
> 
> 时间：2012-10-21T19:50:29.460
> 
> 标签：html, css

我有一个入门网页设计课程的作业，到目前为止它真的很容易，但是当教授介绍 div 和 span 标签时，我真的失去了动力，陷入了低谷。我已经很晚才注册这门课程，幸运的是，关于 div 和 span 的作业明天就要交了。

到目前为止，我一直在广泛使用 w3schools 以及 StackOverflow 本身，但我真的找不到我的问题的具体答案，或者我找到的答案远远超出了我的“技能水平”。

我想模仿提供给我的网站；未提供源代码，仅提供最终产品外观的图像，以及图像、文本大小等资源。这是作业本身的链接。

[http://www.cosc.brocku.ca/Offerings/2P89/2P89%20Assign2.pdf](http://www.cosc.brocku.ca/Offerings/2P89/2P89%20Assign2.pdf)

我自己已经完成了前几部分，但是我迷失了任务中更丰富的部分。我需要制作一个大的 div 元素（我假设），并且在其中我需要更多的 div 元素。我已经到了这个区域：

“在主标题下方是页面的整体内容区域，对电影的总体评分为 32%，几位评论家的评论，以及右侧的电影概述。这些内容总共占据 800 像素的宽度，并在页面。如果页面水平调整大小，则此 800px 部分应动态移动，使其在页面上保持水平居中。整个部分有一个 4px 灰色实心边框，圆半径为 20px，大小应足够大以包含其所有内容.（提示：参见教科书第 4.3 节关于使内容适合的内容。）”

链接中的图像是它应该看起来的样子，到目前为止，我在圆形边框部分上方拥有所有内容更丰富的所有内容。到目前为止，这是我所拥有的：

```
<!doctype html>
<html>
    <head>
        <link rel="shortcut icon" href="http://www.cosc.brocku.ca/Offerings/2P89/Images/rotten.gif" 

type="image/x-icon">
        <title>Abraham Lincoln: Vampire Hunter - Rancid Tomatoes</title>
        <link href="abe.css" type="text/css" rel="stylesheet" />
    </head>
    <body>
        <div class="banner" style="background: url

(http://www.cosc.brocku.ca/Offerings/2P89/Images/bannerbg.png) repeat-x;width:100%;height:50px;">
            <img src="http://www.cosc.brocku.ca/Offerings/2P89/Images/banner.png" alt="">
        </div>
        <h1>Abraham Lincoln: Vampire Hunter (2012)</h1>
        <div class="reviewshell">
            <div class="reviewleft">hi</div>
        </div>
    </body>
</html> 
```

...和样式表...

```
.banner {
    margin:0px;
    text-align:center;
}
.reviewshell {
    margin-left:auto;
    margin-right:auto;
    border:4px solid;
    border-radius:20px;
    border-color:grey;
    width: 800px;
}
.reviewleft {
    margin:0px;
    text-align:left;
}
.reviewright {
}
.reviewbottom {
}
body {
    background-image:url("http://www.cosc.brocku.ca/Offerings/2P89/Images/background.png");
    background-attachment:fixed;
    font-size:8pt;
    font-family:Verdana, Tahoma, sans-serif;
    margin:0px;
}
h1 {
    text-align:center;
    font-size:24pt;
    font-family:Tahoma, Verdana, sans-serif;
    font-weight:bold;
    text-shadow:#999999 3px 3px;
}
blockquote {
}
a:link {
}
a:visited {
}
ul.a {
} 
```

如果在这里不赞成家庭作业帮助，我提前道歉；我已经在 HTML 上阅读了大约 9 个小时，但我不知道如何继续。不幸的是，周日没有教授或助教。

编辑; 我可能应该提到我不需要一个具体的答案，只需要一个指向可以帮助我弄清楚的页面或指南的链接。w3schools 很深入，但我还是看不懂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:02:58.447

该段基本上意味着“将主要内容放在具有以下样式的 div 中”：

*   `width: 800px`;
*   `margin-left`并将`margin-right: auto;`其居中
*   `border: 4px solid gray`
*   `border-radius: 20px;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:00:17.273

这是一个相当不错的 Smashing Magazine 教程：[http ://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/](http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/)

如果没有人提供更好的答案，我可以为您编写指南...

HTH。

# c++ - 在静态构造函数调用的运算符 new 中访问 std::map

> ID：13001562
> 
> 赞同：1
> 
> 时间：2012-10-21T19:50:56.490
> 
> 标签：c++, static

1）我的项目中有一些静态类，它们在它们的构造函数中分配变量。

```
class StaticClass
{
public:
    char *var;
    StaticClass()
    {
        var=new char[100];
    }
};
static StaticClass staticClass; 
```

2) 我已经覆盖了 new 和 delete 运算符，并让它们跟踪 std::unordered_map 中的所有当前分配

```
unordered_map<void*,size_t> allocations;

void* operator new[](size_t size)
{
    void *p=malloc(size); 
    if (p==0) // did malloc succeed?
        throw std::bad_alloc(); // ANSI/ISO compliant behavior
    allocations[p]=size;
    return p;
} 
```

当我的程序启动时， staticClass 的构造函数在分配的构造函数之前被调用，因此 operator new() 尝试在初始化之前将 size 插入到分配中，这会出错。

以前，当我遇到静态构造顺序的问题时，我只是将 std::map 设置为一个 NULL 指针，然后在第一次使用时对其进行初始化，以确保它在我第一次插入时有效：

```
unsorted_map<void*,size_t> *allocations=NULL;

//in code called by static constructor:
if(allocations==NULL)
    allocations=new unsortedmap()
//now safe to insert into allocations 
```

但是，这将不再起作用，因为我将在 operator new() 中调用 new，从而创建一个无限递归循环。

我知道我可能可以通过制作另一个特殊版本的 operator new 来解决这个问题，该版本需要一些令牌参数来区分它，并使用它来初始化分配，但是在更一般（学习）的意义上，我更愿意以某种方式要么

a) 强制分配在 StaticClass 之前初始化（最好）

b）有某种方法可以调用默认运算符 new 而不是我的覆盖（我认为这是不可能的，但是......）

c）其他一些更通用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:58:24.060

避免初始化顺序问题的一种简单方法是将静态对象包装在函数中：

```
unordered_map<void*,size_t> &allocations()
{
  static unordered_map<void*,size_t> static_map;
  return static_map;
} 
```

然后像这样使用它：

```
void* operator new[](size_t size)
{
    void *p=malloc(size); 
    if (p==0) // did malloc succeed?
        throw std::bad_alloc(); // ANSI/ISO compliant behavior
    allocations()[p]=size;
    return p;
} 
```

但是，您仍然会在内部使用 operator new 冒 std::unordered_map 的风险。

# c# - 是否可以在 C# 中有一个名为 bool 的字段？

> ID：13001566
> 
> 赞同：4
> 
> 时间：2012-10-21T19:51:12.093
> 
> 标签：c#, json, elasticsearch

我正在玩 C# 的弹性搜索，我想使用 C# 中序列化为 JSON 的匿名类型创建查询。但是我遇到了一个问题，因为我需要一部分看起来像这样的 JSON：

```
{"bool": {<unimportant for question>}} 
```

这将转换为具有名为 bool 的字段的 ac# 类。这可能吗？（我的猜测是没有......）

我想我需要自定义序列化，或者弹性搜索可能会为 bool 提供一些其他替代名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:52:06.700

如果要将变量命名为与关键字相同的名称，可以在它们前面加上`@`.

布尔@bool =假；

我会尽可能避免在所有情况下这样做。这简直令人困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:58:39.517

您可以在`[DataMember]`属性中设置名称，但您需要使用真实的类（不是匿名的）。

```
using System;
using System.Collections;
using System.IO;
using System.Runtime.Serialization;
using System.Xml;

// You must apply a DataContractAttribute or SerializableAttribute 
// to a class to have it serialized by the DataContractSerializer.
[DataContract()]
class Enterprise : IExtensibleDataObject
{

    [DataMember(Name = "bool")]
    public bool CaptainKirk {get; set;}

    // more stuff here
} 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:58:29.173

使用该`DateMember`属性指定序列化名称是什么：

```
[DataMember(Name = "bool")]
public string MyBoolean { get; set; } 
```

另请参阅：[JavaScriptSerializer.Deserialize - 如何更改字段名称](https://stackoverflow.com/questions/1100191/javascriptserializer-deserialize-how-to-change-field-names)

# javascript - 使用复选框进行验证

> ID：13001567
> 
> 赞同：0
> 
> 时间：2012-10-21T19:51:13.730
> 
> 标签：javascript, jquery, validation

我是 javascript 新手。我想对我的复选框进行验证。我有这个 html

```
<input type="checkbox" name="acceptTerms"/>
<input type="submit" name="subscribe" value="Enter now" title="Enter now" /> 
```

当您提交时，您没有选中该复选框。复选框必须获得类“错误”。当您选中复选框时。比形式必须是 sumit。如何用 jQuery / js 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:54:35.943

尝试以下操作：

```
$('#yourForm').submit(function(e){
    var $check = $('input[name=acceptTerms]');
    if (!$check.is(':checked')) {
       $check.addClass('error');
       e.preventDefault()
    }
})

$('input[name=acceptTerms]').change(function(){
     if (this.checked) $(this).removeClass('error')
}) 
```

# java - java LinkedHashSet

> ID：13001568
> 
> 赞同：6
> 
> 时间：2012-10-21T19:51:17.903
> 
> 标签：java, hash, scjp, linkedhashset

我一直在为 OCJP（前 SCJP）学习，我遇到了以下使用 LinkedHashSet 的示例：

```
public class Test{

    int size;

    public Test(int s){
       this.size = s;
    }

    @Override
    public boolean equals(Object obj) {
         return (this.size == ((Test)obj).size);
    }

    public static void main(String[] args) {
      LinkedHashSet<Test> s = new LinkedHashSet<Test>();
      s.add(new Test(1));
      s.add(new Test(2));
      s.add(new Test(1));
      System.out.println(s.size());
    }
} 
```

现在，问题是在以下情况下显示什么：
1) 实现保持不变
2) hashCode 的覆盖被插入到类 Test 中，如下所示：

```
public int hashCode() {return size/5}; 
```

运行和编译代码表明，第一种情况下 set 的大小是 3，而第二种情况下是 2。为什么？

在情况 1 中，虽然 equals 方法被覆盖，但它永远不会被调用。这是否意味着如果 hashCode 方法没有被覆盖， add() 方法不会检查对象是否相等？
在情况 2 中，具有给定实现的 hashCode 和给定的 Test 对象集总是返回相同的数字。这与默认的 hashCode 实现有什么不同，为什么会导致 equals 被调用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T19:55:22.607

如果您不覆盖`hashCode()`，那么您的每个实例都将具有从类中一些预定义的散列算法计算*的**散列*码`Object`。因此，您的所有实例都可能具有*不同的哈希码*值（虽然这不确定）。意味着，每个实例都将进入自己的*bucket*。

现在，即使您重写`equals()`的方法基于某些属性使两个实例相等，它们的*哈希码*仍然不同。

因此，具有不同哈希码的两个实例永远不会相等。所以*集合的大小*是 3。因为它没有任何重复。

* * *

但是，当您`hashCode()`使用以下实现覆盖时：-

```
public int hashCode() {return size/5}; 
```

它将为 same 返回相同的值`size`。因此，具有相同值的实例将`size`具有相同的*哈希码*，并且由于您已经在方法中`equals`基于`size``equal``Set``Set.size()`

**道德**`hashCode()`： -每当您覆盖方法时，您应该始终覆盖`equals()`，以维护两种方法之间的一般合​​同。

**`hashcode`和`equals`方法之间的一般合**​​同：-

*   当两个对象相等时，它们的hashcode必须相等
*   当两个对象不相等时，它们的hashcode可以相等
*   hashCode 算法应该始终为同一个对象生成相同的值。
*   如果两个对象的 hashCode 不同，它们将不相等
*   总是`same attributes`用来计算`hashCode`你用来比较两个实例的

**强烈建议至少阅读一次**：-

*   [**`Effective Java - Item#9: Always override hashCode when you override equals`**](http://my.safaribooksonline.com/book/programming/java/9780137150021/methods-common-to-all-objects/ch03lev1sec2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T19:57:00.913

散列结构依赖于`hashCode()`在 java 中表示的散列算法。当您将某些东西放入`HashMap`（或`LinkedHashSet`在您的情况下）时，jvm 会调用`hashCode()`正在插入此结构中的对象。当它没有被覆盖时，将使用类中的默认值，而且效率很低——所有对象都进入它们自己的存储桶`hashCode()`。`Object`

当您覆盖`hashCode()`示例中显示的方式时，示例中的所有对象都将进入同一个存储桶。然后（当一个接一个添加它们时），与 进行比较`equals()`。这就是为什么在第一种情况下（当`equals()`不调用时）你得到 3 的大小，而在第二种情况下 - 2。

# c# - 我需要一个慢速 C# 函数

> ID：13001578
> 
> 赞同：41
> 
> 时间：2012-10-21T19:51:56.477
> 
> 标签：c#, performance, cpu-usage, wait, performance-testing

对于我正在做的一些测试，我需要一个大约需要 10 秒才能执行的 C# 函数。它将从 ASPX 页面调用，但我需要该函数来消耗服务器上的 CPU 时间，而不是渲染时间。对 Northwinds 数据库的慢速查询会起作用，或者一些非常慢的计算。有任何想法吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-21T20:13:55.100

尝试计算第 n 个素数来模拟 CPU 密集型工作 -

```
public void Slow()
{
    long nthPrime = FindPrimeNumber(1000); //set higher value for more time
}

public long FindPrimeNumber(int n)
{
    int count=0;
    long a = 2;
    while(count<n)
    {
        long b = 2;
        int prime = 1;// to check if found a prime
        while(b * b <= a)
        {
            if(a % b == 0)
            {
                prime = 0;
                break;
            }
            b++;
        }
        if(prime > 0)
        {
            count++;
        }
        a++;
    }
    return (--a);
} 
```

需要多少时间取决于系统的硬件配置。

因此，尝试将输入设为 1000，然后增加或减少输入值。

此功能将模拟 CPU 密集型工作。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-21T20:01:22.363

可以说，最简单的此类功能是：

```
public void Slow()
{
    var end = DateTime.Now + TimeSpan.FromSeconds(10);
    while (DateTime.Now < end)
           /* nothing here */ ;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-21T20:03:04.607

您可以使用“while”循环使 CPU 忙碌。

```
 void CpuIntensive()
    {
        var startDt = DateTime.Now;

        while (true)
        {
            if ((DateTime.Now - startDt).TotalSeconds >= 10)
                break;
        }
    } 
```

此方法将在 while 循环中停留 10 秒。此外，如果您在多个线程中运行此方法，则可以使所有 CPU 内核都忙。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-10-17T21:16:55.253

为了最大限度地利用多个核心，我稍微调整了@Motti 的答案，得到了以下信息：

```
Enumerable
  .Range(1, Environment.ProcessorCount) // replace with lesser number if 100% usage is not what you are after.
  .AsParallel()
  .Select(i => {
    var end = DateTime.Now + TimeSpan.FromSeconds(10);
    while (DateTime.Now < end)
      /*nothing here */ ;
    return i;
  })
  .ToList(); // ToList makes the query execute. 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-10-21T20:02:38.737

这是单个线程/CPU 上的 CPU 密集型，持续 10 秒。

```
var endTime = DateTime.Now.AddSeconds(10);

while(true) {
   if (DateTime.Now >= endTime) 
      break;
} 
```

作为旁注，您通常不应该这样做。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-11T20:46:29.313

只需使用
`Thread.Sleep(number of milliseconds here);`
您将不得不添加`using System.Threading;`

# javascript - javascript 表单计算返回 NaN

> ID：13001580
> 
> 赞同：0
> 
> 时间：2012-10-21T19:52:12.253
> 
> 标签：javascript, checkbox, textbox, radio, nan

我有一个订单表格和一个 JavaScript，它应该从文本框（数量 * 价格）、复选框和收音机中计算总计，但我错过了一些东西，因为我收到了 NaN 错误。有人可以帮我解决吗？非常感谢。

[演示](http://jsbin.com/asosos/21/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:58:14.670

就像许多人评论的那样，您的代码存在一些严重的缺陷。我不会重复这些问题，但是，它们非常重要，随着您对所使用的技术越来越熟悉，您应该学习。

你得到一个**NaN**的原因就是这个。您的 fields 对象是一个数组。您的代码以任意索引填充字段数组，即**fields[f] = 0**；

当您为索引填充数组时，例如 5，您的代码会执行此**字段 [5] = 0** ;。使用此语句，您从拥有一个空数组**[]**变为拥有一个包含 6 个条目的数组，其中前 5 个条目默认为 undefined **[undefined, undefined, undefined, undefined, undefined, 0]**。

现在稍后在您的代码中，当您进行求和并添加数组条目（使用 eval 准备一个字符串）时，这些**...undefined+0+undefined+8...**会产生 Not A Number 错误。

相反，防止这种情况的一种方法是将条目**推送到字段数组中，例如：**

```
if (userInputs[f].value)
{
  fields.push(userInputs[f].value);
}
else
{
  fields.push(0);
} 
```

push 将在数组末尾添加一个条目。如果你**push(0) ，** **[]**将变为**[0]**。

# android - 如何使 gps 权限可选？

> ID：13001584
> 
> 赞同：4
> 
> 时间：2012-10-21T19:52:50.973
> 
> 标签：android, permissions

我的应用程序支持 GPS。在代码中，我检查了 GPS 硬件的可用性。不幸的是，市场上没有 gps 的人无法安装我的应用程序。如何使用 ot GPS 可选，即使设备上没有 GPS，用户也可以安装它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:56:21.160

在清单中添加`android:required="false"`到您的权限

例如

```
<uses-feature android:name="android.hardware.location.gps" android:required="false" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:39:06.770

采用

```
<uses-feature
    android:name="android.hardware.location.gps"
    android:required="false" /> 
```

在您的清单文件中。

# c# - 使用 web api HttpResponseMessage 输出图像

> ID：13001588
> 
> 赞同：29
> 
> 时间：2012-10-21T19:53:19.383
> 
> 标签：c#, asp.net-web-api

我正在尝试使用以下代码从 asp.net web api 输出图像，但响应正文长度始终为 0。

```
public HttpResponseMessage GetImage()
{
    HttpResponseMessage response = new HttpResponseMessage();
    response.Content = new StreamContent(new FileStream(@"path to image"));
    response.Content.Headers.ContentType = new MediaTypeHeaderValue("image/jpeg");

    return response;
} 
```

有小费吗？

作品：

```
 [HttpGet]
    public HttpResponseMessage Resize(string source, int width, int height)
    {
        HttpResponseMessage httpResponseMessage = new HttpResponseMessage();

        // Photo.Resize is a static method to resize the image
        Image image = Photo.Resize(Image.FromFile(@"d:\path\" + source), width, height);

        MemoryStream memoryStream = new MemoryStream();

        image.Save(memoryStream, ImageFormat.Jpeg);

        httpResponseMessage.Content = new ByteArrayContent(memoryStream.ToArray());

        httpResponseMessage.Content.Headers.ContentType = new MediaTypeHeaderValue("image/jpeg");
        httpResponseMessage.StatusCode = HttpStatusCode.OK;

        return httpResponseMessage;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:47:10.977

以下内容：

1.  确保路径正确（呃）

2.  确保您的路由正确。您的控制器是 ImageController，或者您已经定义了一个自定义路由来支持其他控制器上的“GetImage”。（你应该得到一个 404 响应。）

3.  确保打开流：

    `var stream = new FileStream(path, FileMode.Open);`

我尝试了类似的东西，它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-19T19:38:01.920

除了 ByteArrayContent，您还可以使用 StreamContent 类来更有效地处理流。

# ruby-on-rails - Rails 无尽页面/无限滚动

> ID：13001593
> 
> 赞同：5
> 
> 时间：2012-10-21T19:54:33.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, infinite-scroll, will-paginate

我正在使用 twitter bootstrap 和 will_paginate，并且我有一个表，我想在该表上实现无限滚动。

该表是固定长度并且已经滚动。我最近关注了 Railscasts Episode #114 的修订版，但它对我不起作用。当我滚动到表格底部时，它说获取更多文章，但实际上并没有获取更多文章。

这是我的代码：

**文章.js.coffee：**

```
jQuery ->
  if $('.pagination').length
          $(articles).scroll ->
                  url = $('.pagination .next_page').attr('href')
                  if url &&  $(articles).scrollTop() > $(document).height() -             
                  $(articles).height() + 585
                      $('.pagination').text('Fetching more players...')
                      $.getScript(url)
$(articles).scroll() 
```

**索引.js.erb：**

```
$('#articles').append('<%= j render(@articles) %>');
<% if @articles.next_page %>
  $('.pagination').replaceWith('<%= j will_paginate(@articles) %>');
<% else %>
  $('.pagination').remove();
<% end %> 
```

我的控制器和表格都称为文章。我不知道它是否不起作用，因为它是一个表格而不是整个页面。

如果我需要发布更多文件，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:07:58.080

我是按照 railscasts 的第 114 集弄明白的，但我必须进行一些更改才能使其正常工作。

这是我的新代码：

**文章.js.coffee**

```
jQuery ->
   if $('.pagination').length
      $('#articles_table').scroll ->
              url = $('.pagination .next_page').attr('href')          
              if url &&  $('#articles_table')[0].scrollHeight -    
              $('#articles_table').scrollTop() < 700                  
                      $('.pagination').text('Fetching more users...')
                      $.getScript(url)
$('#articles_table').scroll() 
```

**index.html.erb**

```
<table class="table table-striped table-bordered span8 table-condensed"     
 id="articles_table" >
<thead class="header">
  <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Description</th>
      <th>Created_At</th>
  </tr>
</thead>
<tbody>
<%= render @articles %>

</tbody> 
```

**index.js.erb**

```
$('#articles_table').append('<%= j render(@articles) %>');
<% if @articles.next_page %>
$('.pagination').replaceWith('<%= j will_paginate(@articles) %>');
<% else %>
$('.pagination').remove();
<% end %> 
```

**_article.html.erb**

```
<tr>
      <td> <%= article_counter +1 %> </td>
      <td> <%= article.Title %> </td>
      <td> <%= article.Description %> </td>
      <td> <%= article.Created_At %> </td>
</tr> 
```

我只需要稍微改变一下 javascript 以使其适合我，然后创建一个部分。javascript 的更改是因为我使用的是固定长度的表格，而不是整个页面。

# javascript - 使用 JavaScript/jQuery 临时启用/禁用“点击声音”

> ID：13001596
> 
> 赞同：0
> 
> 时间：2012-10-21T19:54:46.310
> 
> 标签：javascript, android, jquery, browser

`div`用作带有`onclick`事件的自定义按钮，我希望能够打开/关闭浏览器“点击声音” 。

```
$(".button").click(function(e)
{
  if ($(this).attr("disabled") !== "disabled")
  {
    // my code
  }
  else
  {
    e.preventDefault();
  }
}); 
```

我尝试使用`preventDefault`，但它并没有禁用声音并且浏览器无论如何都会播放“点击声音”。如何管理此默认浏览器功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:02:00.860

您无法关闭此声音。`.preventDefault()`停止按钮上的默认操作（例如回发/关注链接/等）。“点击声音”不是您网站的一部分，而是浏览器/操作系统功能。你无法控制这一点。

# c# - 如何编写一个函数来确定一个键是否按下并且是否通过了延迟？

> ID：13001598
> 
> 赞同：2
> 
> 时间：2012-10-21T19:55:16.463
> 
> 标签：c#, refactoring, key, stopwatch

我现在有一个看起来像这样的函数：

```
public static bool IsKeyDownWithDelayPassed(Keys key, int delay)
{
    bool timeElapsed = stopWatch.ElapsedMilliseconds > delay;

    bool isKeyDown = currentKeyboardState.IsKeyDown(key);

    if (timeElapsed && isKeyDown)
    {
        stopWatch.Restart();
    }

    return timeElapsed && isKeyDown;
} 
```

这非常有效，但一次只能使用一个键。例如，如果我想使用箭头键并进行对角线移动（同时按住右箭头键和下箭头键），它就不起作用。

我想到了一个涉及`Dictionary`映射`Keys`到`Stopwatch`es 的解决方案，但这似乎有点过于复杂。我是否遗漏了可以简化此任务的内容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:47:06.143

用这个：

```
Dictionary<Keys, DateTime> keytimes = new Dictionary<Keys, DateTime>();

public bool IsKeyDownWithDelayPassed(Keys key, long delay)
{
    if(!keytimes.Keys.Contains(key) || keytimes[key] == DateTime.MinValue)
        return false;
    long elapsed = DateTime.Now.Ticks - keytimes[key].Ticks;    
    return delay < elapsed;
}

private void KeyDownEvent(object sender, KeyEventArgs e)
{
    keytimes[e.KeyData] = DateTime.Now;
}

private void KeyUpEvent(object sender, KeyEventArgs e)
{
    keytimes[e.KeyData] = DateTime.MinValue;
} 
```

# xml - 使用 XSLT 转换从 XML 生成类似于 treegrid 的 HTML

> ID：13001600
> 
> 赞同：2
> 
> 时间：2012-10-21T19:55:31.283
> 
> 标签：xml, xslt, xslt-1.0

我必须从给定的 XML 创建看起来像 treegrid 的 html。

树形网格示例： [TreeGrid](http://dhtmlx.com/docs/products/dhtmlxTreeGrid/index.shtml)

我的 xslt 几乎完成了，我只需要应用一些边距来看起来有层次。

XML 是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<rows>

  <row id="FOLDER1">
    <cell image="blank.gif">Folder 1</cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell></cell>
    <cell sum="1">$23</cell>
    <row id="FOLDER2">
      <cell image="blank.gif">Folder 2</cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell></cell>
      <cell sum="2">$11</cell>
      <row id="FOLDER3">
        <cell image="blank.gif">Folder 3</cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell></cell>
        <cell sum="3">$44</cell>
        <row id="pro1">
          <cell image="blank.gif">Product 1</cell>
          <cell>324234</cell>
          <cell>3.00</cell>
          <cell>Kilo</cell>
          <cell>1.00</cell>
          <cell>No</cell>
          <cell>€ 33.33</cell>
          <cell>€ 33.33</cell>
        </row>
        <row id="pro2">
          <cell image="blank.gif">Product 2</cell>
          <cell>4354354</cell>
          <cell>1.00</cell>
          <cell>Kilo</cell>
          <cell >0.50</cell>
          <cell>No</cell>
          <cell>€ 2.53</cell>
          <cell>€ 1.26</cell>
        </row>

      </row>
      <row id="pro3">
        <cell image="blank.gif">Product 3</cell>
        <cell>435436</cell>
        <cell>10.00</cell>
        <cell>Kilo</cell>
        <cell>Yes</cell>
        <cell>€ 0.36</cell>
        <cell>€ 3.60</cell>
      </row>

    <row id="pro4">
      <cell image="blank.gif">Product 4</cell>
      <cell>435435</cell>
      <cell>3.28</cell>
      <cell>Kilo</cell>
      <cell>1.00</cell>
      <cell>No</cell>
      <cell>€ 17.38</cell>
      <cell>€ 17.38</cell>
    </row>
    <row id="NEWCAT_59">
        <cell image="blank.gif">&lt;strong&gt;+ Add new category&lt;/strong&gt;</cell>
      </row>
      <row id="NEWSEMING_59">
        <cell image="blank.gif">&lt;strong&gt;+ Add new product&lt;/strong&gt;</cell>
      </row>
   </row>
  </row>

</rows> 
```

XSLT 是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>
    <xsl:template match="/rows">
        <table>
            <tr>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>8</th>
            </tr>
            <xsl:apply-templates select="row"/>
        </table>
    </xsl:template>

    <xsl:template match="row">
        <tr>
            <xsl:apply-templates select="cell"/>
        </tr>
        <xsl:apply-templates select="row"/>
    </xsl:template>

    <xsl:template match="cell">

        <xsl:variable name="img" select="../@id"/>
        <xsl:variable name="cellvalue" select="."/>
        <xsl:variable name="cellattribute" select="./@image"></xsl:variable>

        <xsl:if test="$cellvalue!='&lt;strong&gt;+ Add new category&lt;/strong&gt;' and $cellvalue!='&lt;strong&gt;+ Add new product&lt;/strong&gt;' ">

            <td>
             <xsl:choose>

            <xsl:when test="starts-with($img, 'FOLDER') and $cellattribute='blank.gif'">
        <img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif"></img>
        <xsl:value-of select="."/>
            </xsl:when>

            <xsl:otherwise>
                    <div style="margin-left:20px;display: inline;"><xsl:value-of select="."/></div>
                    </xsl:otherwise>

              </xsl:choose>
            </td>

        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

文件夹 2 在文件夹 1 中，文件夹 2 和文件夹 3 都在文件夹 1 中。所以我需要文件夹 2 中的单元格比文件夹 1 中的单元格更靠右，同样适用于文件夹 3 或任何其他XML 中的文件夹。

预期输出：

```
<html><head></head><body><table>
    <tbody><tr>
        <th>1</th>
        <th>2</th>
        <th>3</th>
        <th>4</th>
        <th>5</th>
        <th>6</th>
        <th>7</th>
        <th>8</th>
    </tr>
    <tr>
        <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif">Folder 1</td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">$23</div>
        </td>
    </tr>
    <tr>
        <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="
    margin-left: 20px;
">Folder 2</td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">$11</div>
        </td>
    </tr>
    <tr>
        <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="
    margin-left: 40px;
">Folder 3</td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;"></div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">$44</div>
        </td>
    </tr>
    <tr>
        <td>
            <div style="margin-left: 60px;display: inline;">Product 1</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">324234</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">3.00</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">No</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 33.33</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 33.33</div>
        </td>
    </tr>
    <tr>
        <td>
            <div style="margin-left: 60px;display: inline;">Product 2</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">4354354</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">0.50</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">No</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 2.53</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 1.26</div>
        </td>
    </tr>
    <tr>
        <td>
            <div style="margin-left: 40px;display: inline;">Product 3</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">435436</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">10.00</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">Yes</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 0.36</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 3.60</div>
        </td>
    </tr>
    <tr>
        <td>
            <div style="margin-left: 40px;display: inline;">Product 4</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">435435</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">3.28</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">No</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 17.38</div>
        </td>
        <td>
            <div style="margin-left:20px;display: inline;">€ 17.38</div>
        </td>
    </tr>
    <tr>
    </tr><tr>
</tr></tbody></table></body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T04:24:16.193

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="/">
  <html>
    <head/>
    <body>
      <xsl:apply-templates select="rows" />
    </body>
  </html>
</xsl:template>

<xsl:template match="rows">
  <table>
    <tbody><tr>
      <xsl:for-each select="row[1]/cell">
        <th><xsl:value-of select="position()" /></th>
      </xsl:for-each>
    </tr>
    <xsl:apply-templates select="descendant::row" />  
  </tbody>
  </table>
</xsl:template>  

<xsl:template match="row[contains(cell[1],'Add new ')]" />

<xsl:template match="row">
  <tr>
    <xsl:apply-templates select="cell" />
  </tr>  
</xsl:template>

<xsl:template name="style">
  <xsl:param name="margin" select="0" />
  <xsl:param name="display" select="'inline'" />
  <xsl:variable name="v1">
    <xsl:if test="$margin &gt; 0">
      <xsl:value-of select="concat('margin-left:',$margin,'px;')" />
    </xsl:if>
    <xsl:if test="$display">
      <xsl:value-of select="concat('display: ',$display,';')" />
    </xsl:if>
  </xsl:variable>  
  <xsl:if test="$v1">
    <xsl:attribute name="style"><xsl:value-of select="$v1" /></xsl:attribute>
  </xsl:if>
</xsl:template>

<xsl:template match="cell[position()=1][starts-with(../@id,'FOLDER')]" priority="3">
  <!-- First column for FOLDER rows -->
  <td>
    <img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif">
      <xsl:call-template name="style">
        <xsl:with-param name="margin" select="(count(ancestor::row) - 1)*20" />
        <xsl:with-param name="display" select="''" />
       </xsl:call-template>
     </img>
  <xsl:value-of select="." />
  </td>  
</xsl:template>

<xsl:template match="cell[position()=1]" priority="2">
  <!-- First column for non-FOLDER rows -->
  <td>
     <div>
      <xsl:call-template name="style">
        <xsl:with-param name="margin" select="(count(ancestor::row) - 1)*20" />
       </xsl:call-template>
       <xsl:value-of select="." />
     </div>
  </td>  
</xsl:template>

<xsl:template match="cell" priority="1">
  <!-- Subsequent columns -->
  <td>
     <div>
      <xsl:call-template name="style">
        <xsl:with-param name="margin" select="20" />
       </xsl:call-template>
       <xsl:value-of select="." />
     </div>
  </td>  
</xsl:template>

</xsl:stylesheet> 
```

**...将提供的输入转换为...**

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body>
    <table>
      <tbody>
        <tr>
          <th>1</th>
          <th>2</th>
          <th>3</th>
          <th>4</th>
          <th>5</th>
          <th>6</th>
          <th>7</th>
          <th>8</th>
        </tr>
        <tr>
          <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="">Folder 1</td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">$23</div>
          </td>
        </tr>
        <tr>
          <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="margin-left:20px;">Folder 2</td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">$11</div>
          </td>
        </tr>
        <tr>
          <td><img alt="neso" src="http://www.deporteandaluz.com/web/includes/dhtmlx/imgs/csh_winstyle/minus.gif" style="margin-left:40px;">Folder 3</td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">
            </div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">$44</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:60px;display: inline;">Product 1</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">324234</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">3.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">No</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 33.33</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 33.33</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:60px;display: inline;">Product 2</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">4354354</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">0.50</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">No</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 2.53</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 1.26</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:40px;display: inline;">Product 3</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">435436</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">10.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Yes</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 0.36</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 3.60</div>
          </td>
        </tr>
        <tr>
          <td>
            <div style="margin-left:40px;display: inline;">Product 4</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">435435</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">3.28</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">Kilo</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">1.00</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">No</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 17.38</div>
          </td>
          <td>
            <div style="margin-left:20px;display: inline;">€ 17.38</div>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html> 
```

## 注意事项

1.  此解决方案不适用于嵌套在表中的表。但从上下文来看，我认为这不是问题是一个很好的选择。

2.  这不是一个特别严格的解决方案。相反，它强调可读性。如果更简洁的解决方案对您很重要，请告诉我，我会相应地制作。

3.  与左侧边距样式相关的转换规则对我来说并不清楚。我做了以下假设。

    *   行的头列具有与输入“行”节点的元素深度成比例的边距。
    *   所有其他列的固定边距为 20 像素。

# c - 使用 fread() 将二进制文件转换为结构时遇到问题

> ID：13001602
> 
> 赞同：2
> 
> 时间：2012-10-21T19:55:59.617
> 
> 标签：c, struct, binaryfiles, fread

我无法使用 fread() 将二进制文件转换为结构的链接列表。

结构：

```
struct MdbRec {
    char name[16];
    char  msg[24];
}; 
```

相关代码：

```
 FILE *file;
    file = fopen( argv[1], "rb" );

    struct List db;
    initList(&db);
    struct MdbRec *data = (struct MdbRec *)malloc(sizeof(struct MdbRec));
    struct Node *last;
    while( fread( data, 40, 1, file ) )
    {
            struct MdbRec *message = (struct MdbRec *)malloc(sizeof(struct MdbRec));
            message = data;
            if( !db.head )
            {
                    last = addFront( &db, message );
                    db.head = last;
            }
            else
                    last = addAfter( &db, last, message );
            if( fseek( file, 40, SEEK_CUR ) != 0)
                    break;
            printf("read\n");
    }
    free(data);
    removeAllNodes( &db ); 
```

addFront() 和 addAfter 是链表结构的方法，用于分配数据字段的空间。

当我用 Valgrind 运行它时，它表明我成功地分配了 2 个内存。一个显然是数据变量。其他 568 个字节让我很困惑。Valgrind 说错误来自我运行 fread() 时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:59:53.510

这是内存泄漏：

```
struct MdbRec *message = (struct MdbRec *)malloc(sizeof(struct MdbRec));
message = data; 
```

as `message`is 现在指向`data`并且不再指向刚刚的`malloc()`d 内存，现在无法访问。我怀疑您实际上是要*复制* `data`到`message`：

```
*message = *data; 
```

其他要点：

*   使用前检查结果`fopen()`。
*   似乎没有理由不使用堆栈分配的对象`data`，这将避免对其进行不必要的动态分配管理。
*   `fread()`指定要读取的对象大小的参数 ,容易`40`出错。任何更改`struct MdbRec`都会破坏它：`sizeof(struct MdbRec)`改为使用。
*   强制转换 of 的返回值`malloc()`是不必要的，并且可能很危险（请参阅[Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:59:55.557

```
struct MdbRec *message = (struct MdbRec *)malloc(sizeof(struct MdbRec));
message = data; 
```

您重新分配了 a`struct MdbRec`并丢弃了它。

# android - android中的图像自动滚动

> ID：13001603
> 
> 赞同：2
> 
> 时间：2012-10-21T19:56:01.183
> 
> 标签：android, image, animation, scroll

我想为外太空类型的游戏创建一个图像自动滚动。为了更准确，我想加载 2 个背景图像，它使用一个占据整个屏幕的图像并自动滚动它以创建背景图像正在移动的动画。不要与自动滚动和自动切换到另一个图像混淆。我的意思是像使用 1 张图像移动背景一样自动滚动。

我做了一些研究，但我看到的是让我感到困惑的 Java 代码段。如果可能的话，谁能给我一个例子？从 xml 加载图像（我应该使用 imageview 吗？还是只设置布局的背景图像？）以及我应该如何在 java 代码中处理它以使图像自动滚动。

有什么想法吗？谢谢！抱歉问得太多了。

# php - 如何用 phpunit 测试这个类，它使用到数据库的连接

> ID：13001605
> 
> 赞同：2
> 
> 时间：2012-10-21T19:56:18.663
> 
> 标签：php, phpunit, integration-testing

我在另一个文档中读到，具有与数据库连接的方法的类必须通过集成测试进行测试。我试图找到一个例子，但我没有找到任何，只有理论。我对测试的经验很少。能给我举个例子？一个链接？，一些东西（而不仅仅是理论，因为我读了很多），像这样的东西？我认为这不是一个奇怪的案例。如果它可能与 php 和 sql 或类似。

如果您不了解集成测试，您如何测试此类问题？

```
class database{

public $server;
public $database;
public $password;
public $user;
public $descriptor;

function __construct(){
$this->server="localhost";
$this->database="mydb";
$this->user="stackoverflow";
$this->password="1234";

$this->descriptor=mysql_connect($this->server,$this->user,$this->password);
mysql_select_db($this->database,$this->descriptor); 
}

function make_request($query){
$response=mysql_query($query,$this->descriptor);
return $response;
}

function close_connection(){
mysql_close($this->descriptor);
}

function number_rows($result_query){
return mysql_num_rows($result_query);
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:59:14.313

查看[PHPUnit](http://www.phpunit.de/manual/3.6/en/goals.html)进行单元测试。然后，您可以使用[模拟对象](http://www.phpunit.de/manual/3.0/en/mock-objects.html)来模拟依赖项（数据库调用）以返回虚拟数据。因为您正在尝试测试某个逻辑单元而不是您的数据库层，所以它应该是可以接受的，并且可以让您对您的代码正常工作有一定的信心。

另一种选择是使用集成测试，但这需要您在测试的设置和拆卸中投入大量精力。您需要确保您的测试所需的任何数据都存在于您的数据库中。通常将事务用于这些类型的测试，然后您可以在完成运行这些测试后回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T04:17:47.200

您要测试的是哪个代码？是使用您的`database`课程的代码吗？如果是这样，您不需要引入 PDO，因为您的`database`类已经提供了一个抽象（好吧，如果`public $descriptor`是私有的会更安全）。因此，您应该首先模拟您的`database`类，然后测试使用它的代码。PHPUnit 有一个[复杂的模拟系统](http://www.phpunit.de/manual/3.7/en/test-doubles.html)。

您可能想要测试的另一件事是这个`database`类本身？在这种情况下，您将不得不接受 MySQL 数据库依赖，以及给您带来的速度冲击。为该测试设置一个完全专用的 MySQL 数据库。如果您不介意速度下降，请考虑在函数中创建数据库并在`setUp()`函数中的每次测试后将其删除`tearDown()`。

您可能想要测试的第三件事是您的网站（或其他）作为一个整体工作，并连接到数据库等。这是功能测试（也称为集成测试）。如果您的系统提供 Web 服务 API，那么您可以使用它来测试它。否则，您可以使用 Selenium（仍然使用 PHPUnit）通过远程控制真实浏览器进行测试。如果您的测试只从数据库中读取，您可以使用您的实时系统；但是假设写入会在某个时候发生会更明智，因此使用自己的专用测试数据库对网站的测试版本进行测试。

功能测试的优势在于它是高级别的，测试组件之间的所有交互，测试最终用户将使用的系统。不利的一面是，当测试失败时，它只会告诉您出了点问题，而不是确切地说应该归咎于哪个组件。所以我们有单元测试来单独测试每个组件。

我知道你这比你想要的更多的文本，更少的代码！但你实际上问了一个相当理论的问题！只需尝试为此代码设置一些单元测试，观察在使用它们的第一个月会出现什么问题，你就会明白为什么以及在哪里使用模拟。

# java - HypergraphDB Netbeans 设置

> ID：13001608
> 
> 赞同：1
> 
> 时间：2012-10-21T19:56:56.980
> 
> 标签：java, netbeans, nosql, berkeley-db

我想用 Java 中的 HypergraphDB 做一些事情。我对这种语言和 IDE Netbeans 不是很熟悉。我按照描述 HGDB 安装的步骤进行操作：[链接到教程](http://www.hypergraphdb.org/learn?page=IntroInstall&project=hypergraphdb) 现在我想用 Java 编写一个示例（使用 NetbeansIDE）。

所以我创建了新项目，添加了对下载库的引用。好的，现在我可以使用 HGDB 导入包了。我的`main`方法中唯一的东西是`HyperGraph HG = new HyperGraph(dbLocation);`. 此代码编译。但是得到以下运行时错误：

```
 run:
checkpoint kbytes:0
checkpoint minutes:0
java.lang.IllegalStateException: There is 1 existing transaction opened against the Environment.
Aborting open transactions ...
aborting <Transaction id="28">
    at com.sleepycat.je.Environment.close(Environment.java:383)
    at org.hypergraphdb.storage.bje.BJEStorageImplementation.shutdown(BJEStorageImplementation.java:178)
    at org.hypergraphdb.HGStore.close(HGStore.java:355)
    at org.hypergraphdb.HyperGraph.open(HyperGraph.java:392)
    at org.hypergraphdb.HyperGraph.open(HyperGraph.java:213)
    at org.hypergraphdb.HyperGraph.<init>(HyperGraph.java:200)
    at hgdbtest.HgdbTest.main(HgdbTest.java:16)
Exception in thread "main" org.hypergraphdb.HGException: java.lang.NoSuchMethodError: org.hypergraphdb.storage.bje.LinkBinding.objectToEntry(Ljava/lang/Object;Lcom/sleepycat/je/DatabaseEntry;)V
    at org.hypergraphdb.HyperGraph.open(HyperGraph.java:395)
    at org.hypergraphdb.HyperGraph.open(HyperGraph.java:213)
    at org.hypergraphdb.HyperGraph.<init>(HyperGraph.java:200)
    at hgdbtest.HgdbTest.main(HgdbTest.java:16)
Caused by: java.lang.NoSuchMethodError: org.hypergraphdb.storage.bje.LinkBinding.objectToEntry(Ljava/lang/Object;Lcom/sleepycat/je/DatabaseEntry;)V
    at org.hypergraphdb.storage.bje.BJEStorageImplementation.store(BJEStorageImplementation.java:234)
    at org.hypergraphdb.HGStore.store(HGStore.java:119)
    at org.hypergraphdb.HGTypeSystem.addPrimitiveTypeToStore(HGTypeSystem.java:185)
    at org.hypergraphdb.HGTypeSystem.bootstrap(HGTypeSystem.java:234)
    at org.hypergraphdb.HyperGraph.open(HyperGraph.java:355)
    ... 3 more
Java Result: 1
BUILD SUCCESSFUL (total time: 4 seconds) 
```

我猜这是由 BerkeleyDB 的原生 API 引起的。

根据教程，在项目选项中，我将`-Djava.library.path=$HGDB_ROOT/lib/native/$PLATFORM`运行卡上的参数作为 VM 选项提供。我使用库的完整路径而不是系统变量。我在 Windows7 中的操作系统。我不确定是否使用斜杠、反斜杠或双反斜杠作为路径分隔符。？

所以一个简单的问题是：我如何设置 IDE 以使用 HypergraphDB？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:56:18.047

从堆栈跟踪来看，您使用的是最新版本的 HyperGraphDB。在该版本中，未使用本机 API。相反，它只是 Java 库。您必须在运行时类路径中包含 BerkeleyDB Java 版 5.0.34 jar。您可以从 Oracle [http://www.oracle.com/technetwork/products/berkeleydb/downloads/index.html](http://www.oracle.com/technetwork/products/berkeleydb/downloads/index.html)或 HyperGraphDB Maven 存储库获取它：http: [//hypergraphdb.org/maven/org/hypergraphdb/ hgbdbje/1.2/hgbdbje-1.2.jar](http://hypergraphdb.org/maven/org/hypergraphdb/hgbdbje/1.2/hgbdbje-1.2.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T22:00:27.563

我遇到过同样的问题。我通过修复 HyperGraphDB 应用程序所依赖的库的顺序来修复它（偶然）。库**je-[version].jar**必须在**db-[version].jar之上（因此要在之前引用）**

# entity-framework - 更改了 Edmx 并出现错误

> ID：13001613
> 
> 赞同：1
> 
> 时间：2012-10-21T19:57:18.960
> 
> 标签：entity-framework, entity-framework-5

我尝试更改实体表名称并遇到错误。我刚刚重命名了**TblRecord**，因为名称来自表名

这里有什么错误以及如何解决它？

* * *

**错误 ：**

```
+       _innerException {"The specified table does not exist. [ Records ]"} System.Exception {System.Data.SqlServerCe.SqlCeException} 
```

* * *

**Edmx 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
      <Schema Namespace="Xz.Business.Matches.Store" Alias="Self" Provider="System.Data.SqlServerCe.4.0" ProviderManifestToken="4.0" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
        <EntityContainer Name="XzBusinessMatchesStoreContainer">
          <EntitySet Name="Records" EntityType="Xz.Business.Matches.Store.Records" store:Type="Tables" />
        </EntityContainer>
        <EntityType Name="Records">
          <Key>
            <PropertyRef Name="Record" />
          </Key>
          <Property Name="Record" Type="nvarchar" Nullable="false" MaxLength="100" />
          <Property Name="Relations" Type="nvarchar" MaxLength="450" />
        </EntityType>
      </Schema>
    </edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="Xz.Business.Matches" Alias="Self" p1:UseStrongSpatialTypes="false" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns:p1="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
        <EntityContainer Name="RecordzEntities" p1:LazyLoadingEnabled="true">
          <EntitySet Name="Records" EntityType="Xz.Business.Matches.TblRecord" />
        </EntityContainer>
        <EntityType Name="TblRecord">
          <Key>
            <PropertyRef Name="Record" />
          </Key>
          <Property Name="Record" Type="String" Nullable="false" MaxLength="100" Unicode="true" FixedLength="false" />
          <Property Name="Relations" Type="String" MaxLength="450" Unicode="true" FixedLength="false" />
        </EntityType>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
      <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2009/11/mapping/cs">
        <EntityContainerMapping StorageEntityContainer="XzBusinessMatchesStoreContainer" CdmEntityContainer="RecordzEntities">
          <EntitySetMapping Name="Records">
            <EntityTypeMapping TypeName="Xz.Business.Matches.TblRecord">
              <MappingFragment StoreEntitySet="Records">
                <ScalarProperty Name="Record" ColumnName="Record" />
                <ScalarProperty Name="Relations" ColumnName="Relations" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
        </EntityContainerMapping>
      </Mapping>
    </edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2009/11/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
        <DesignerProperty Name="CodeGenerationStrategy" Value="None" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams></Diagrams>
  </Designer>
</edmx:Edmx> 
```

*这是 EF5 和 VS12*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:01:05.757

如果您在数据库中重命名表，则需要更新 EDMX 中的映射。错误消息是自我描述的。

如果您无法`TblRecord`从 edmx 设计器中删除模型并使用新名称重新添加它`Record`。

# php - php中反向的strpos函数

> ID：13001614
> 
> 赞同：26
> 
> 时间：2012-10-21T19:57:34.767
> 
> 标签：php, string, strpos

strpos函数反向

我想找到一种可以反向找到字符位置的方法。例如倒数的最后一个“e”开始计数。

从例子

```
$string="Kelley";
$strposition = strpos($string, 'e'); 
```

它会给我位置1。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-21T20:00:32.887

```
int strrpos ( string $haystack , string $needle [, int $offset = 0 ] ) 
```

在 haystack 字符串中查找最后一次出现 needle 的数字位置。

[http://php.net/manual/en/function.strrpos.php](http://php.net/manual/en/function.strrpos.php)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-21T20:00:34.680

您需要的是[strrpos](http://www.php.net/manual/en/function.strrpos.php)来查找字符串中最后一次出现的子字符串的位置

```
$string = "Kelley";
$strposition = strrpos($string, 'e');
var_dump($strposition); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T20:00:42.877

尝试这个：

```
strrpos() 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-03T06:48:48.907

`strripos`并为结果`strrpos`添加`$needle`长度，例如：

```
<?php
$haystack = '/test/index.php';
$needle   = 'index.php';

echo strrpos($haystack, $needle);//output: 6 
```

另一种方法是[`strrev`](http://php.net/manual/en/function.strrev.php)用于从末尾检索位置，例如：

```
<?php
$haystack = 'Kelley';
$needle   = 'e';

echo strpos(strrev($haystack), strrev($needle));//Output: 1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-21T20:01:09.237

尽可能简单：strrpos()

这将返回从右边第一次出现的字符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-21T20:02:57.367

```
function rev ($string, $char)
{
    if (false !== strrpos ($string, $char))
    {
        return strlen ($string) - strrpos ($string, $char) - 1;
    }
}

echo rev ("Kelley", "e"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-21T04:42:46.277

简单的功能，你可以添加：

```
 function stripos_rev($hay,$ned){
    $hay_rev = strrev($hay);
    $len = strlen($hay);
    if( (stripos($hay_rev,$ned)) === false ){
        return false;
    } else {
        $pos = intval(stripos($hay_rev,$ned));
        $pos = $len - $pos;
    }
    return $pos;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-18T19:37:42.493

唯一有效的解决方案是此功能：

```
function strpos_reverse ($string, $search, $offset){
    return strrpos(substr($string, 0, $offset), $search);
} 
```

# regex - sed 条件替换变量

> ID：13001616
> 
> 赞同：3
> 
> 时间：2012-10-21T19:58:10.893
> 
> 标签：regex, sed

我在一个文件中有一堆代码编号，它们的格式通常为 integer.integer 第一个整数是必需的，第二个可能是空的。例如 123.45 或 12.345 和 12 都是有效的代码号。

我想使用 sed 将这些行中的每一行更改为

```
job{123}subjob{45}
job{12}subjob{345}
job{12} 
```

到目前为止我有

```
sed -e 's/codenumber{\([0-9]*\)\.*\([0-9]*\)}/job{\1}subjob{\2}/g' 
```

这导致

```
job{123}subjob{45}
job{12}subjob{345}
job{12}subjob{} 
```

有没有办法让 sed 意识到当变量 \2 为空时，打印一个默认值，比如 0。因此给定示例的最后一行会说

```
job{12}subjob{0} 
```

我想这可以通过两次 sed 运行来实现，但我很感兴趣是否可以通过一次运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:51:51.413

您可以简单地扩展您的`sed`命令来修补空的子作业编号：

```
sed -e 's/codenumber{\([0-9]*\)\.*\([0-9]*\)}/job{\1}subjob{\2}/g' \
    -e 's/subjob{}/subjob{0}/g' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:01:35.373

我认为这在 sed 中是不可能的。但实际上你可以进行两次 sed 运行（它们非常快，所以这应该不是问题），第二次是

```
sed -e 's/subjob\{\}//g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T23:52:04.167

这可能对您有用（GNU sed）：

```
sed 's/codenumber/job/;s/\./}subjob{/;/subjob/!s/$/subjob{0}/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T17:39:17.283

我知道，有点太晚了，而且没有回答问题，但是如果有人像我一样来到这里，并且不介意改用 Perl，那么表达式是：

```
s/codenumber{([0-9]*)\.*([0-9]*)}/job{$1}subjob{${\($2?$2:"0")}}/g 
```

例如在：

```
echo -e 'codenumber{123.45}\ncodenumber{12.345}\ncodenumber{12}' | perl -e 'while(<STDIN>) { print s/codenumber{([0-9]*)\.*([0-9]*)}/job{$1}subjob{${\($2?$2:"0")}}/gr;}' 
```

因此，关键是 Perl 允许您`${\(EXPRESSION)}`在正则表达式中也使用字符串插值，并使用 Perl 表达式根据匹配的值计算替换。

# ios - DetailViewController 上的标题

> ID：13001619
> 
> 赞同：0
> 
> 时间：2012-10-21T19:58:36.360
> 
> 标签：ios, title

我创建了一个 NavigationBar 和 DetailView，但是当我在 tableView 上选择一行时，没有设置 DetailView 的标题。我该如何设置？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:30:40.343

如果你在`UINavigationController`s 中正确使用了视图控制器，那么你只需要设置视图的标题：

```
self.title = @"Title"; 
```

听上去，您已经手动将导航栏放置在视图中，这意味着您需要获取实例，并自己更改其中的文本。

```
// Set a "tag" to the Navigation Bar, in Interface Builder or via code (navigationBat.tag = 200;)
UINavigationBar* bar = [self.view viewWithTag:200];
bar.title = @"Title"; 
```

为了在正确的位置执行此操作，您需要在选择表视图行时执行此操作。您需要设置为表视图的委托。

```
self.tableView.delegate = self;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    self.title = @"Title"; // Or whatever mode you're using to set the title
} 
```

# scala - Scala - 从元组到映射

> ID：13001625
> 
> 赞同：1
> 
> 时间：2012-10-21T19:59:03.537
> 
> 标签：scala, map

*我希望如果我发布已解决的问题并要求一个更漂亮的解决方案是可以的，这样我就可以看到它是如何正确完成的*

我想要一个使用 ProcessID 映射的所有进程名称的列表。像`"notepad.exe" -> 4242` Ofc 这样的东西可以有多个实例，所以它应该是这样的`"notepad.exe" -> List(4242,7171)`

我有一个方法给我一个元组

```
private def extractProcess(s: String): (String, Int) = {
    val process = s.split(" ").filterNot(str => str == "")
    (process(0), process(1).toInt)
} 
```

输出将是`("Notepad.exe",4242)`

processList 包含来自 Windows 任务列表的原始字符串，看起来像这样

```
svchost.exe                   4464 Services                   0        47.656 K 
```

现在我想创建一个包含所有进程的地图，我已经这样做了

```
val process: Map[String, List[Int]] = Map()
    processList.drop(5).map(s => {
      val element = extractProcess(s)
      if (process contains element._1) {
        val p = process get element._1
        process(element._1) = p.get ::: List(element._2)
      } else {
        process(element._1) = List(element._2)
      }
    }) 
```

*我删除了前 5 个元素，因为它们不是必需的*

现在输出看起来像这样

```
...
(tasklist.exe,List(5036))
(NLClientApp.exe,List(2812))
(wininit.exe,List(444))
(SearchFilterHost.exe,List(5476))
(svchost.exe,List(656, 732, 928, 964, 992, 1036, 1140, 1360, 2168, 4464, 4764, 5048))
... 
```

这就是我想做的。有没有更好的方法来创建地图？

我总是认为比功能更重要，很难有不同的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:09:45.217

可以像这样更简单：

```
processList.drop(5).map(extractProcess).groupBy(_._1).mapValues(_.map(_._2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T20:15:20.567

```
processList.drop(5).map(extractProcess).groupBy(_._1).mapValues(_.map(_._2)) 
```

# javascript - 用于 html 控件的 javascript 中的选定索引更改事件

> ID：13001634
> 
> 赞同：2
> 
> 时间：2012-10-21T20:00:10.477
> 
> 标签：javascript, events, select, drop-down-menu, selectedindexchanged

我有一个 HTML 控件：

```
<select id="grade"> 
```

我想在选定的索引更改事件上获取下拉列表的选定值。

我尝试添加以下代码，该代码将在下拉选择更改时调用，但似乎不起作用。还有什么建议吗？

```
$("#grade").on('change', function() { 
alert("hi"); 
}); 
```

另外，如何在 Java Script 中获取选定的值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-10-10T07:31:11.633

对于那些不需要 jQuery 的人来说，这是一个替代方案：

```
<select id="grade" onchange="OnGradeChanged(this.value);">
     <option value="1">1</option>
     <option value="2">2</option>
</select>
<script>
function OnGradeChanged(value){
     alert(value);
}
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T20:04:58.713

你也可以试试：

```
$(document).ready(function(){
  $('#grade').change(function() {
    alert('Handler for .change() called.');
    alert($(this).val()); 
  });
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T20:07:34.617

如果运行代码时 ID=grade 不存在，则需要将处理程序委托给页面中的永久资产。这可以是从元素或正文或文档本身向上树的任何元素选择器。无论选择器是否已经存在或将来存在，此方法都将起作用

```
$(document).on('change',"#grade", function() { 
     alert( $(this).val())
}); 
```

如果 ID 确实存在，那么只要您将其包装在其中，您的代码就应该可以工作`*document.ready*`

```
$(function(){
/* your code*/

}) 
```

# delphi - 在 Inno 设置中使用 StringToColor

> ID：13001640
> 
> 赞同：0
> 
> 时间：2012-10-21T20:00:41.360
> 
> 标签：delphi, inno-setup

我想为表单上的标签（TNewStaticText - 属性颜色：TColor；读写；）分配一些颜色。

我将颜色存储为“$RRGGBB”（字符串），我想使用 Delphi 函数 StringToColor() 将其转换为 TColor，但如果我在脚本中使用此函数，Inno Setup 会显示错误。如何告诉 Inno Setup 使用此函数或如何在 Inno 中将 String 转换为 TColor 以将其与此属性一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T21:23:35.003

正如安德烈亚斯在对问题的评论中提到的那样，没有内置功能。您可以自己制作，例如：

```
function StringToRGB(ColorStr: string): Integer;
var
  r, g, b: Integer;
begin
  r := StrToInt(Copy(ColorStr, 1, 3));
  g := StrToInt('$' + Copy(ColorStr, 4, 2));
  b := StrToInt('$' + Copy(ColorStr, 6, 2));
  Result := (r or (g shl 8) or (b shl 16));
end; 
```

如果你一直在存储你的颜色`$BBGGRR`，你可以简单地将它转换为

```
StrToInt(ColorStr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T04:56:19.417

Sertac Akyuz 的方法很好，但我在写完这个问题后几分钟就解决了这个问题，抱歉 :) 这是我的功能 - 还有一点处理：

```
function StringToColor(Color: String): TColor;
var
    RR, GG, BB: String;
    Dec: Integer;
begin
    { Change string Color from $RRGGBB to $BBGGRR and then convert to TColor }
    if((Length(Color) <> 7) or (Color[1] <> '$')) then
        Result := $000000
    else
    begin
        RR := Color[2] + Color[3];
        GG := Color[4] + Color[5];
        BB := Color[6] + Color[7];
        Dec := StrToInt('$' + BB + GG + RR);
        Result := TColor(Dec);
    end;
end; 
```

整个魔术函数**StrToInt()**将字符串转换为整数 - 但是如果在字符串之前添加“$”，它会将字符串视为十六进制数，它将自动转换为十进制数。结果是从该数字创建的整数 TColor。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:04:43.067

@Andreas Rejbrand：

当我下载 Inno 的源代码时，我注意到源代码中有函数 StringToColor()。这是 Compiler.pas 的片段：

```
type
  TColor = $7FFFFFFF-1..$7FFFFFFF;

const
  clScrollBar = TColor(COLOR_SCROLLBAR or $80000000);
  clBackground = TColor(COLOR_BACKGROUND or $80000000);
  clActiveCaption = TColor(COLOR_ACTIVECAPTION or $80000000);
  clInactiveCaption = TColor(COLOR_INACTIVECAPTION or $80000000);
  clMenu = TColor(COLOR_MENU or $80000000);
  clWindow = TColor(COLOR_WINDOW or $80000000);
  clWindowFrame = TColor(COLOR_WINDOWFRAME or $80000000);
  clMenuText = TColor(COLOR_MENUTEXT or $80000000);
  clWindowText = TColor(COLOR_WINDOWTEXT or $80000000);
  clCaptionText = TColor(COLOR_CAPTIONTEXT or $80000000);
  clActiveBorder = TColor(COLOR_ACTIVEBORDER or $80000000);
  clInactiveBorder = TColor(COLOR_INACTIVEBORDER or $80000000);
  clAppWorkSpace = TColor(COLOR_APPWORKSPACE or $80000000);
  clHighlight = TColor(COLOR_HIGHLIGHT or $80000000);
  clHighlightText = TColor(COLOR_HIGHLIGHTTEXT or $80000000);
  clBtnFace = TColor(COLOR_BTNFACE or $80000000);
  clBtnShadow = TColor(COLOR_BTNSHADOW or $80000000);
  clGrayText = TColor(COLOR_GRAYTEXT or $80000000);
  clBtnText = TColor(COLOR_BTNTEXT or $80000000);
  clInactiveCaptionText = TColor(COLOR_INACTIVECAPTIONTEXT or $80000000);
  clBtnHighlight = TColor(COLOR_BTNHIGHLIGHT or $80000000);
  cl3DDkShadow = TColor(COLOR_3DDKSHADOW or $80000000);
  cl3DLight = TColor(COLOR_3DLIGHT or $80000000);
  clInfoText = TColor(COLOR_INFOTEXT or $80000000);
  clInfoBk = TColor(COLOR_INFOBK or $80000000);

  clBlack = TColor($000000);
  clMaroon = TColor($000080);
  clGreen = TColor($008000);
  clOlive = TColor($008080);
  clNavy = TColor($800000);
  clPurple = TColor($800080);
  clTeal = TColor($808000);
  clGray = TColor($808080);
  clSilver = TColor($C0C0C0);
  clRed = TColor($0000FF);
  clLime = TColor($00FF00);
  clYellow = TColor($00FFFF);
  clBlue = TColor($FF0000);
  clFuchsia = TColor($FF00FF);
  clAqua = TColor($FFFF00);
  clLtGray = TColor($C0C0C0);
  clDkGray = TColor($808080);
  clWhite = TColor($FFFFFF);
  clNone = TColor($1FFFFFFF);
  clDefault = TColor($20000000);

type
  TColorEntry = record
    Value: TColor;
    Name: string;
  end;

const
  Colors: array[0..41] of TColorEntry = (
    (Value: clBlack; Name: 'clBlack'),
    (Value: clMaroon; Name: 'clMaroon'),
    (Value: clGreen; Name: 'clGreen'),
    (Value: clOlive; Name: 'clOlive'),
    (Value: clNavy; Name: 'clNavy'),
    (Value: clPurple; Name: 'clPurple'),
    (Value: clTeal; Name: 'clTeal'),
    (Value: clGray; Name: 'clGray'),
    (Value: clSilver; Name: 'clSilver'),
    (Value: clRed; Name: 'clRed'),
    (Value: clLime; Name: 'clLime'),
    (Value: clYellow; Name: 'clYellow'),
    (Value: clBlue; Name: 'clBlue'),
    (Value: clFuchsia; Name: 'clFuchsia'),
    (Value: clAqua; Name: 'clAqua'),
    (Value: clWhite; Name: 'clWhite'),
    (Value: clScrollBar; Name: 'clScrollBar'),
    (Value: clBackground; Name: 'clBackground'),
    (Value: clActiveCaption; Name: 'clActiveCaption'),
    (Value: clInactiveCaption; Name: 'clInactiveCaption'),
    (Value: clMenu; Name: 'clMenu'),
    (Value: clWindow; Name: 'clWindow'),
    (Value: clWindowFrame; Name: 'clWindowFrame'),
    (Value: clMenuText; Name: 'clMenuText'),
    (Value: clWindowText; Name: 'clWindowText'),
    (Value: clCaptionText; Name: 'clCaptionText'),
    (Value: clActiveBorder; Name: 'clActiveBorder'),
    (Value: clInactiveBorder; Name: 'clInactiveBorder'),
    (Value: clAppWorkSpace; Name: 'clAppWorkSpace'),
    (Value: clHighlight; Name: 'clHighlight'),
    (Value: clHighlightText; Name: 'clHighlightText'),
    (Value: clBtnFace; Name: 'clBtnFace'),
    (Value: clBtnShadow; Name: 'clBtnShadow'),
    (Value: clGrayText; Name: 'clGrayText'),
    (Value: clBtnText; Name: 'clBtnText'),
    (Value: clInactiveCaptionText; Name: 'clInactiveCaptionText'),
    (Value: clBtnHighlight; Name: 'clBtnHighlight'),
    (Value: cl3DDkShadow; Name: 'cl3DDkShadow'),
    (Value: cl3DLight; Name: 'cl3DLight'),
    (Value: clInfoText; Name: 'clInfoText'),
    (Value: clInfoBk; Name: 'clInfoBk'),
    (Value: clNone; Name: 'clNone'));

function IdentToColor(const Ident: string; var Color: Longint): Boolean;
var
  I: Integer;
begin
  for I := Low(Colors) to High(Colors) do
    if CompareText(Colors[I].Name, Ident) = 0 then
    begin
      Result := True;
      Color := Longint(Colors[I].Value);
      Exit;
    end;
  Result := False;
end;

function StringToColor(const S: string): TColor;
begin
  if not IdentToColor(S, Longint(Result)) then
    Result := TColor(StrToInt(S));
end; 
```

正如你所看到的，Inno 有它自己的**StringToColor()**实现，它也可以按名称解析颜色 [如 IdentToColor('clBlack')]。

我希望快速破解如何从脚本中使用这个函数，但似乎这个函数没有被拉到公共接口（ScriptFunc_R.pas 或 ScriptFunc_C.pas）。

# git - 如何通过 Git Hub 从以前的开发人员手中接管 Git 存储库？

> ID：13001642
> 
> 赞同：2
> 
> 时间：2012-10-21T20:00:46.307
> 
> 标签：git, github

我最近接手了一个开发项目，该项目的 Git 存储库链接到托管在 Git Hub 上的远程存储库。

我对托管项目的服务器具有完全访问权限并拥有 Git 存储库。

我在 Git Hub 上有自己的帐户，想继续使用当前的存储库。

更新服务器上的存储库的最佳方法是什么，所以它使用我的远程存储库？

以前的开发人员不再可用，因此我无法访问他们的 Git Hub 帐户或联系他们以请求任何内容。该存储库作为私有托管在 Git Hub 上。

我对使用 Git 不是 100% 有信心，只是想要一些建议来避免我可能导致的任何意外问题 :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:10:43.850

1.  在 GitHub 上使用正确的名称创建新的存储库。

2.  `https:`将查看 github 上的 repo 时找到的克隆地址复制到剪贴板

3.  从仓库中的 git 命令行：

    ```
    > git remote rm *name of old remote repo* 
    ```

    上面的行将旧回购与您的回购解除关联（但如果您愿意，可以再次添加回来）

    ```
    > git remote add origin *paste from clipboard* 
    ```

    上面的这一行向您的仓库添加了一个新的远程仓库，别名为“origin”

    ```
    > git push origin 
    ```

    最后一行会将您的提交历史记录和所有源代码发送到新的遥控器。完成此操作后，您的代码应该在新 repo 下的 github 中可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T20:05:17.923

只需在您的帐户下创建一个同名的存储库。制作一个新的遥控器或更改现有遥控器的 url 并推送到它。完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T20:04:13.543

如果您有存储库的副本，那么您只需将其上传到 GitHub。有关如何执行此操作的详细说明（带有屏幕截图），请参阅 GitHub 帮助页面[Create A Repo 。](https://help.github.com/articles/create-a-repo)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T20:06:00.313

如果您没有对 GitHub 存储库的管理访问权限，那么您将无法对其进行任何操作。它永远不会是你的。你所能做的就是创建一个新的 repo，让旧的 repo 慢慢腐烂。这会让某些人感到困惑，因此最好联系老开发人员，以便他可以为您提供对当前存储库的管理访问权限。

但是，如果您对 repo 有写权限，则可以简单地清除当前文件并在其中保留一个文件，例如`MOVED_TO_NEW_LOCATION.TXT`或其他文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T20:09:30.997

存储库不会被占用，而只是被拉取（如果是第一次，则被克隆）。一旦你克隆/拉取 repo，你就拥有了一切，你可以用它做任何事情。

1.  从服务器克隆
2.  如果需要，推送您的私人 GitHub 存储库。

# objective-c - 如何将 char* 转换为浮点 xcode

> ID：13001649
> 
> 赞同：1
> 
> 时间：2012-10-21T20:01:48.610
> 
> 标签：objective-c, xcode, sqlite, floating-point

我需要将“字段”转换为浮点类型。能怎么办？

```
 char *field = (char *) sqlite3_column_text(statment, 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:05:13.193

假设浮点值存储在字符串列中，可以使用`sqlite3_column_double`SQLite 的函数：

```
float field = (float)sqlite3_column_double(statement, 1); 
```

SQLite 会为您自动转换，但使用浮点类型的列会是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:35:35.067

如果您要转换数值，也可以采用这种方式。

```
 char c = 0x010;
        char* ch = &c;
        float f = ((float)(*ch));
        float* fl = &f;
        printf("\n%f\n",*fl); 
```

# c++ - 用于 c/c++ 的 dos.h 中的 sound/delay/nosound 函数

> ID：13001650
> 
> 赞同：1
> 
> 时间：2012-10-21T20:01:51.567
> 
> 标签：c++, c, winapi, codeblocks

如何获得语言 C/C++（已下载？？）的版本，其中功能 sound、nosound、delay 存在于库 DOS.H 中？例如，它在 code::blocks 上的 c/c++ 版本中不存在。为了使用/找到声音/无声音/延迟功能，我该怎么做？感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:03:36.667

下载（叹气）TurboC/TurboC++ 的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:44:17.760

在 Windows 程序中，您可以使用 win32 函数：

*   [`Sleep()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)作为替代品`delay()`
*   [`Beep()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679277%28v=vs.85%29.aspx)作为`sound()`++组合的替代`delay()`品`nosound()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T17:36:35.600

如果你有以上 win 7，，下载 borland Turbo c++ 使用 dos 框听 500 毫秒的哔声，使用以下代码，

```
#include<iostream.h>
#include<conio.h>
#include<dos.h>
void main()
{clrscr();  //for clearing the screen...
int x;
x=1000;         // here 1000 is the frequency of the sound 
sound(x);       //u can directly write integer in the place of x
delay(500);
nosound();      //it is necessary to close the sound or u will keep on hearing

getch();        // to wait at the end of program
} 
```

# java - url 收割机并发问题，ConcurrentModificationException

> ID：13001651
> 
> 赞同：0
> 
> 时间：2012-10-21T20:01:57.290
> 
> 标签：java, concurrency

嗨，我正在尝试进行递归 .pdf url 收获，但遇到 ConcurrentModificationException .. 我不明白这是怎么发生的，我对并发也不太了解；我将非常感谢您对这是如何发生的以及如何解决它的一些见解。

```
public class urlHarvester {
    private URL rootURL;
    private String fileExt;
    private int depth;
    private HashSet<String> targets;
    private HashMap<Integer, LinkedList<String>> toVisit;

public urlHarvester(URL rootURL, String fileExt, int depth) {
    this.rootURL = rootURL;
    this.fileExt = fileExt;
    this.depth = depth;
    targets = new HashSet<String>();
    toVisit = new HashMap<Integer, LinkedList<String>>();
    for (int i = 1; i < depth + 1; i++) {
        toVisit.put(i, new LinkedList<String>());
    }
    doHarvest();
}

private void doHarvest() {
    try {
        harvest(rootURL, depth);
        while (depth > 0) {
            for (String s : toVisit.get(depth)) {
                toVisit.get(depth).remove(s);
                harvest(new URL(s),depth-1);
            }
            depth--;
        }   
    } catch (Exception e) {
        System.err.println(e);
        e.printStackTrace();
    }   
    for (String s : targets) {
        System.out.println(s);
    }

}

private void harvest(URL url, int depth) {
    try {
        URLConnection urlConnection = url.openConnection();
        InputStream inputStream = urlConnection.getInputStream();
        Scanner scanner = new Scanner(new BufferedInputStream(inputStream));
        java.lang.String source = "";
        while (scanner.hasNext()) {
            source = source + scanner.next();
        }   
        inputStream.close();
        scanner.close();

        Matcher matcher = Pattern.compile("ahref=\"(.+?)\"").matcher(source);
        while(matcher.find()) {
            java.lang.String matched = matcher.group(1);
            if (!matched.startsWith("http")) {
                if (matched.startsWith("/") && url.toString().endsWith("/")) {
                    matched = url.toString() + matched.substring(1);
                } else if ((matched.startsWith("/") && !url.toString().endsWith("/"))
                        || (!matched.startsWith("/") && url.toString().endsWith("/"))) {
                    matched = url.toString() + matched;
                } else if (!matched.startsWith("/") && !url.toString().endsWith("/")) {
                    matched = url.toString() + "/" + matched;
                }
            }
            if (matched.endsWith(".pdf") && !targets.contains(matched)) {
                targets.add(matched);System.out.println("ADDED");
            }
            if (!toVisit.get(depth).contains(matched)) {
                toVisit.get(depth).add(matched);
            }
        }
    } catch (Exception e) {
        System.err.println(e);
    }
} 
```

主要调用类：

```
urlHarvester harvester = new urlHarvester(new URL("http://anyasdf.com"), ".pdf", 5); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:05:21.567

该错误可能与并发无关，而是由此循环引起的：

```
for (String s : toVisit.get(depth)) {
    toVisit.get(depth).remove(s);
    harvest(new URL(s),depth-1);
} 
```

要在迭代时从集合中删除项目，您需要使用`remove`迭代器中的方法：

```
List<String> list = toVisit.get(depth); //I assume list is not null
for (Iterator<String> it = list.iterator(); it.hasNext();) {
    String s = it.next();
    it.remove();
    harvest(new URL(s),depth-1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:08:50.683

`ConcurrentModificationException`尝试在迭代对象时直接从集合中删除对象时抛出A。

当您尝试从以下位置删除条目时会发生这种情况`toVisit` `HashMap`：

```
for (String s : toVisit.get(depth)) {
   toVisit.get(depth).remove(s); <----
   ... 
```

您可以使用迭代器而不是尝试直接从您的集合中删除：

```
Iterator<String> iterator = toVisit.get(depth).iterator();
while (iterator.hasNext()) {
   String s = iterator.next();
   iterator.remove();
   harvest(new URL(s),depth-1);
} 
```

# php - HTML/PHP - 促销代码使用限制

> ID：13001653
> 
> 赞同：0
> 
> 时间：2012-10-21T20:02:06.400
> 
> 标签：php, html, sql, ajax, database

所以我有一个网站，您可以在其中注册并使用特定的注册码。但是，我想将注册码的总使用次数限制为 20 次。因此，前 20 名使用它的人将获得它，然后它将被锁定，这意味着其他人无法使用注册码。所以如果我有这个输入字段：

```
Registration code: <input type="text" id="registration_code">​ 
```

然后我只想将该字段变灰，或者在达到限制时使其不可点击。我对如何做到这一点的想法是对文本字段进行 ajax 调用，它调用一个 php 文件来检查它已经使用的次数。这样做的方式是，我的数据库中有一个特定的 1 列表，它从 0 值开始，每次使用代码时都会递增。php可以检索该号码，如果它`<=20`被锁定，则保持打开状态。

然而，这似乎是一个非常迂回的方法，我希望堆栈有一些更好的想法。有谁知道如何最好地处理这种情况？

# ios6 - 默认 MPVolumeView 样式

> ID：13001655
> 
> 赞同：1
> 
> 时间：2012-10-21T20:02:10.523
> 
> 标签：ios6, mpvolumeview

为什么 iOS 6 SDK 仍然使用旧的 MPVolumeView 控件的样式。我想使用 Apple 的默认音乐应用程序中的默认样式。

老一： ![在此处输入图像描述](../Images/fd68f95016c6f9bc07ecac5ee85a96a3.png)

新的一个：

![在此处输入图像描述](../Images/69e630a4f182626242ecacfcfb0e124c.png)

有什么方法可以在我的项目中使用新的吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:33:18.160

还有另一种方法可以在不使用 UISlider 控件的情况下执行此操作。

```
UIImage *minImage = [UIImage imageNamed:@"bar-bg"];
UIImage *maxImage = [UIImage imageNamed:@"bar-bg-active"];
UIImage *tumbImage= [UIImage imageNamed:@"circle"];

// 276 x 14 px images used for min and max
// so i need to make the images into very small images by making resizable otherwise it strechs very ugly
minImage = [minImage resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 0)];
maxImage = [maxImage resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 20)];

[volumeManager setMinimumVolumeSliderImage:minImage forState:UIControlStateNormal];
[volumeManager setMaximumVolumeSliderImage:maxImage forState:UIControlStateNormal];
[volumeManager setVolumeThumbImage:tumbImage forState:UIControlStateNormal]; 
```

而volumeManager是

```
@property (strong, nonatomic) IBOutlet MPVolumeView *volumeManager; 
```

# xml - WCF 服务绑定能够接收带有 Bare bodystyle 的 XML

> ID：13001656
> 
> 赞同：2
> 
> 时间：2012-10-21T20:02:15.477
> 
> 标签：xml, wcf, binding, basichttpbinding, spml

我正在构建一个实现 SPML 标准的 WCF 服务。这意味着一个端点需要能够接收大量 XML 请求，这些请求被解释为添加/修改/删除命令。所有 XML 请求都以标准定义的请求名称标签开始。

例如：

```
<SOAP:Header />
<SOAP:Body>
    <ns0:addRequest xmlns:ns0='urn:oasis:names:tc:SPML:1:0'>
        <identifier type='urn:oasis:names:tc:SPML:1:0#GUID'>
            <id>uid=Z3SP</id>
        </identifier>
        <attributes>
            <ns1:attr xmlns:ns1='urn:oasis:names:tc:DSML:2:0:core'
                name='sn'>
                <ns1:value>Bobby</ns1:value>
            </ns1:attr>             
        </attributes>
    </ns0:addRequest>
</SOAP:Body> 
```

我的问题是是否可以将 xml 发送到 WCF 服务而不将 xml 包装在标识 wcf 服务方法名称的标记中。

我尝试在 webservice 方法上设置以下内容。

`WebInvoke(BodyStyle = WebMessageBodyStyle.Bare)`

但是我无法让它在`basicHttpBinding`.

这可能使用 a`basicHttpBinding`吗？

# layout - 带有简单数据的 d3js 堆栈图

> ID：13001657
> 
> 赞同：3
> 
> 时间：2012-10-21T20:02:15.490
> 
> 标签：layout, stack, d3.js

我需要一个非常基本的示例来创建一个像[这个示例](http://bl.ocks.org/3020685)这样的堆栈图，其中包含这样的预定义数组：

```
var data = [[ 1,  4,  2,  7],
            [21,  2,  5, 10],
            [ 1, 17, 16,  6]] 
```

无论我做什么都会产生错误。例如 TypeError：数据未定义。到目前为止，这是我的简化代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="http://d3js.org/d3.v2.js?2.9.5"></script>
<script>

var margin = {top: 20, right: 30, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var data = [[ 1,  4,  2,  7],
            [21,  2,  5, 10],
            [ 1, 17, 16,  6]];

var x = d3.scale.linear()
    .range([0, width])
    .domain([0,3]);

var y = d3.scale.linear()
    .range([height, 0])
    .domain([0,25]);

var z = d3.scale.category20c();

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var stack = d3.layout.stack(data)
      .offset("zero")
      .values(function(d) { return d; })
      .x(function(d, i) { return i; })
      .y(function(d) { return d; });

var area = d3.svg.area()
    .x(function(d, i) { return x(i); })
    .y0(function(d) { return y(d.y0); })
    .y1(function(d) { return y(d.y0 + d.y); });

svg.selectAll(".layer")
      .data(stack)
      .enter().append("path")
      .attr("class", "layer")
      .attr("d", function(d) { return area(d.values); })
      .style("fill", function(d, i) { return colors[i]; });

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T22:32:44.437

[您可以在http://jsfiddle.net/DyrsK/2/](http://jsfiddle.net/DyrsK/2/)看到一个工作示例。

通常，我发现稍微排列输入数据以进入`d3`预期的默认形式更容易。对于此示例，我获取了您的数据并计算了`x`,`y`和`y0`值，然后将其传递给默认堆栈布局。

```
var data = [[ 1,  4,  2,  7],
            [21,  2,  5, 10],
            [ 1, 17, 16,  6]];

// permute the data
data = data.map(function(d) { 
    return d.map(function(p, i) { 
        return {x:i, y:p, y0:0};
    });
}); 
```

我认为有一种更简单的方法可以做到这一点，但是由于您的输入数据是一个值，但该函数希望它是一个参考值，所以我在使用`out()`函数时遇到了麻烦。这意味着无法使用计算出的偏移量来更新值，因此返回的数据始终等于输入值。`d3.layout.stack()``out()``stack()`

在让堆栈函数工作之后，其余的几乎都来自您链接到的示例：

```
var stack = d3.layout.stack()
      .offset("zero")

var layers = stack(data);

var area = d3.svg.area()
    .interpolate('cardinal')
    .x(function(d, i) { return x(i); })
    .y0(function(d) { return y(d.y0); })
    .y1(function(d) { return y(d.y0 + d.y); });

svg.selectAll(".layer")
      .data(layers)
      .enter().append("path")
      .attr("class", "layer")
      .attr("d", function(d) { return area(d); })
      .style("fill", function(d, i) { return colors(i); }); 
```

希望这可以帮助！

# php - 如何在mysql中将数据从一个表插入另一个表？

> ID：13001658
> 
> 赞同：0
> 
> 时间：2012-10-21T20:02:16.553
> 
> 标签：php, mysql

我有一个带有记录的网格，它们有一个复选框`<input name="id[]" value="<?php echo $valor->id ?>" type="checkbox" class="check" />`，我正在尝试将选定的记录复制到另一个表

```
$sql = "INSERT INTO `pendientes` SELECT * FROM clientes WHERE id = $idcopia"; 
mysql_query($sql); 
```

但我不知道如何发送 ID，我的想法是选择一个复选框并使用“复制”按钮发送 ID，但也许还有另一种方式。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-21T20:08:12.187

大多数浏览器不发送复选框的值，只发送单词`"on"`。为了解决这个问题，您可以将“值”作为键传递给数组：

```
<input type="checkbox" name="id[<?php echo $valor->id; ?>]" class="check" /> 
```

然后在 PHP 端：

```
$idlist = implode(",",array_map("intval",array_keys($_POST['id'])));
$sql = "INSERT INTO `pendientes` SELECT * FROM `clientes` WHERE `id` IN (".$idlist.")";
mysql_query($sql); 
```

# jsxgraph - JSXgraph 多边形标签位置

> ID：13001660
> 
> 赞同：0
> 
> 时间：2012-10-21T20:02:27.133
> 
> 标签：jsxgraph

如何更改多边形的标签位置？

```
p = this.board.create('polygon',[p1,p2,p4,p3],{
  withLines:false,
  withLabel: true,
  name: function () {
    return "lala  " + p1.Dist(p2).toFixed(2) + "m";
  },
  id: p3.X() + "_" + p4.Y()
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:42:55.227

在 JSXGraph 中，多边形标签默认居中。您可以按标签提供偏移值（以像素为单位）：{ offset:[xoff, yoff] }

请参阅[http://jsxgraph.uni-bayreuth.de/wiki/index.php/Positioning_of_labels](http://jsxgraph.uni-bayreuth.de/wiki/index.php/Positioning_of_labels)。

# php - 像 PageSpeed 一样优化/无损压缩图像

> ID：13001672
> 
> 赞同：2
> 
> 时间：2012-10-21T20:03:56.193
> 
> 标签：php

我压缩JPEG图像如下：

```
function convert_img($img_source) {
    $img_destination = $img_source;
    $max_width = 150;
    $max_height = 150;
    $src = imagecreatefromjpeg($img_source);
    list($width,$height) = getimagesize($img_source);
    $x_ratio = $max_width/$width;
    $y_ratio = $max_height/$height;

    if ($width <= $max_width && $height <= $max_height) {
        $tn_width = $width;
        $tn_height = $height;
        } elseif ($x_ratio * $height < $max_height) {
            $tn_height = ceil($x_ratio * $height);
            $tn_width = $max_width;
        } else {
            $tn_width = ceil($y_ratio * $width);
            $tn_height = $max_height;
    }

    $tmp = imagecreatetruecolor($tn_width,$tn_height);
    imagecopyresampled($tmp,$src,0,0,0,0,$tn_width,$tn_height,$width,$height);
    imagejpeg($tmp,$img_destination,80);
    imagedestroy($src);
    imagedestroy($tmp);
} 
```

问题是我总是得到一个比 PageSpeed 建议的尺寸大一点的图像。

例如对于大小为 8.85KB 的图像，PageSpeed 建议我可以将此大小减小 356B。

如何压缩我的图像并使它们具有尽可能小的尺寸？为了使 PageSpeed 不建议任何内容并获得 100 分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-13T07:16:48.723

压缩只能损害质量。音乐和视频也是如此。

```
imagejpeg($image, $destination_url, $quality); 
```

# installation - Inno Setup 如何在安装过程中编辑ini文件

> ID：13001677
> 
> 赞同：2
> 
> 时间：2012-10-21T20:04:45.040
> 
> 标签：installation, inno-setup, edit, ini

我正在制作一个需要在安装过程中编辑 INI 文件的安装程序。在这种情况下，我只需要编辑该 ini 文件中的两个键。

这两个：

```
filename: rev.ini; Section: Emulator; Key: Language; 
filename: rev.ini; Section: steamclient; Key: PlayerName; 
```

我希望安装程序允许我选择语言或使用我从一开始就在语言菜单中选择的默认语言，以及 PlayerName。选择写我想要的任何名字。我没有看到这样的东西。只在 inifile 中读取或放置已建立的值。

这是我的代码：

```
; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!
#include "botva2.iss"
#include "BASS_Module.iss"
#define MyAppName "XXX"
#define MyAppVersion "XXX"
#define MyAppPublisher "XXX"
#define MyAppURL "example.com"

[Setup]
; NOTE: The value of AppId uniquely identifies this application.
; Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppID={{AA8DB34C-8DE2-468C-8A3A-0DADD1A9C38E}
AppName={#MyAppName}
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={pf}\
DefaultGroupName={#MyAppName}
LicenseFile=Log1.rtf
InfoBeforeFile=Log2.rtf
InfoAfterFile=Log3.rtf
OutputDir=Output Installer\
OutputBaseFilename=XXX 2xxx-2xxx
SetupIconFile=xxx.ico
Compression=lzma2/Ultra64
SolidCompression=true
InternalCompressLevel=Ultra64
Uninstallable=false
WizardImageFile=fondosetup.bmp
WizardSmallImageFile=0.bmp
CreateAppDir=true
UsePreviousAppDir=true
DirExistsWarning=no
AllowCancelDuringInstall=false

[Languages]
Name: "default"; MessagesFile: "compiler:Default.isl"
Name: "catalan"; MessagesFile: "compiler:Languages\Catalan.isl"
Name: "french"; MessagesFile: "compiler:Languages\French.isl"
Name: "german"; MessagesFile: "compiler:Languages\German.isl"
Name: "italian"; MessagesFile: "compiler:Languages\Italian.isl"
Name: "portuguese"; MessagesFile: "compiler:Languages\Portuguese.isl"
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl"

[CustomMessages]
default.AppCheckError=xxx was not found, please select the Installation Folder of xxx!
spanish.AppCheckError=xxx no fué encontrado, porfavor selecciona la Carpeta de Instalación de xxx!
french.AppCheckError=xxx n'a pas été trouvé, s'il vous plaît sélectionnez le dossier d'installation de xxx!
german.AppCheckError=xxx nicht gefunden wurde, wählen Sie bitte das Installationsverzeichnis von xxx!
catalan.AppCheckError=xxx no s'ha trobat, si us plau, seleccioneu la carpeta d'instal · lació de xxx!
italian.AppCheckError=xxx non è stato trovato, si prega di selezionare la cartella di installazione di xxx!
portuguese.AppCheckError=xxx não foi encontrado, selecione a pasta de instalação do xxx!

[Files]
Source: "xxx\*"; DestDir: {app}; Flags: ignoreversion recursesubdirs createallsubdirs; 
Source: ISSkin.dll; DestDir: {tmp}; Flags: dontcopy; 
Source: Styles\LegendsIV.cjstyles; DestDir: {tmp}; Flags: dontcopy
Source: IsUtilsHb.dll; DestDir: {tmp}; Flags: dontcopy; 
Source: SplashScreen.png; DestDir: {tmp}; Flags: dontcopy;
Source: "BASS_Files\*";  DestDir: {tmp}; Flags: dontcopy
Source: Music.mp3;  DestDir: {tmp}; Flags: dontcopy
Source: logo.png; Flags: dontcopy; DestDir: {tmp}; 
Source: ISLogo.dll; Flags: dontcopy; DestDir: {tmp}; 

; --- Generated by InnoSetup Script Joiner version 3.0, Jul 22 2009, (c) Bulat Ziganshin <Bulat.Ziganshin@gmail.com>. More info at http://issjoiner.codeplex.com/

; --- Source: Verificar ExE.iss ------------------------------------------------------------
[code]
function NextButtonClick1(PageId: Integer): Boolean;
begin
    Result := True;
    if (PageId = wpSelectDir) and not FileExists(ExpandConstant('{app}\left4dead2.exe')) then begin
        MsgBox(ExpandConstant('{cm:AppCheckError}'), mbInformation, MB_OK);
        Result := False;
        exit;
    end;
end;

[Setup]

; --- Source: About.iss ------------------------------------------------------------
[Code]
{ RedesignWizardFormBegin } // Don't remove this line!
// Don't modify this section. It is generated automatically.
var
  AboutButton: TNewButton;
  URLLabel: TNewStaticText;

procedure AboutButtonClick(Sender: TObject); forward;
procedure URLLabelClick(Sender: TObject); forward;

procedure RedesignWizardForm;
begin

  { AboutButton }
  AboutButton := TNewButton.Create(WizardForm);
  with AboutButton do
  begin
    Name := 'AboutButton';
    Parent := WizardForm;
    Left := ScaleX(10);
    Top := ScaleY(327);
    Width := ScaleX(75);
    Height := ScaleY(23);
    Caption := 'Info';   // aqui se escribe lo que quiero ver en el about
    OnClick := @AboutButtonClick;
  end;

  { URLLabel }
  URLLabel := TNewStaticText.Create(WizardForm);
  with URLLabel do
  begin
    Name := 'URLLabel';
    Parent := WizardForm;
    Cursor := crHand;
    Caption := 'WEB'; // nombre q desea poner q redirecciona al enlace
    Font.Color := clRed;  // color
    Font.Height := -11;
    Font.Name := 'Tele-Marines'; //nombre del font
    ParentFont := False;
    OnClick := @URLLabelClick;
    Left := ScaleX(105);
    Top := ScaleY(335);
    Width := ScaleX(97);
    Height := ScaleY(14);
  end;

  AboutButton.TabOrder := 5;
  URLLabel.TabOrder := 6;

end;

procedure URLLabelClick(Sender: TObject);
var
  ErrorCode: Integer;
begin
  ShellExecAsOriginalUser('open', 'www.example.com', '', '', SW_SHOWNORMAL, ewNoWait, ErrorCode);
end;                        //aqui ponen el enlace de su perfil o pagina

procedure AboutButtonClick(Sender: TObject);
begin
  MsgBox('Version 2xxx XXX', mbInformation, mb_Ok);
end;    //edit the version file here

procedure InitializeWizard2();
begin
  RedesignWizardForm;

end;

[Setup]

; --- Source: Audio.iss ------------------------------------------------------------
[code]
procedure InitializeWizard3();
begin
  ExtractTemporaryFile('BASS.dll');
  ExtractTemporaryFile('Music.mp3');

  BASS_Init(ExpandConstant('{tmp}\Music.mp3')) // se copea en los temporarles de tu pc
end;

[Setup]

; --- Source: LOGO XXX.iss ------------------------------------------------------------
[Code]
procedure Logo_Init(Wnd :HWND); external 'ISLogo_Init@files:ISLogo.dll stdcall';
procedure Logo_Draw(FileName: PChar; X, Y: Integer); external 'ISLogo_Draw@files:ISLogo.dll stdcall';
procedure Logo_Free(); external 'ISLogo_Free@files:ISLogo.dll stdcall';

procedure InitializeWizard4();
var
LogoPanel: TPanel;
begin
LogoPanel := TPanel.Create(WizardForm);
with LogoPanel do begin
Top := 326;
Left := 140;
Width := 100;
Height := 37;
Parent := WizardForm;
BevelOuter := bvNone;
end
ExtractTemporaryFile('logo.png');
Logo_Init(LogoPanel.Handle)
Logo_Draw (ExpandConstant('{tmp}\logo.png'), 0 , 0);
end;

[Setup]

; --- Source: Skin Setup.iss ------------------------------------------------------------
[Code]
// Importing LoadSkin API from ISSkin.DLL
procedure LoadSkin(lpszPath: String; lpszIniFileName: String);
external 'LoadSkin@files:isskin.dll stdcall';

// Importing UnloadSkin API from ISSkin.DLL
procedure UnloadSkin();
external 'UnloadSkin@files:isskin.dll stdcall';

// Importing ShowWindow Windows API from User32.DLL
function ShowWindow(hWnd: Integer; uType: Integer): Integer;
external 'ShowWindow@user32.dll stdcall';

function InitializeSetup5(): Boolean;
begin
    ExtractTemporaryFile('LegendsIV.cjstyles');
    LoadSkin(ExpandConstant('{tmp}\LegendsIV.cjstyles'), '');
    Result := True;
end;

procedure DeinitializeSetup5();
begin
    // Hide Window before unloading skin so user does not get
    // a glimse of an unskinned window before it is closed.
    ShowWindow(StrToInt(ExpandConstant('{wizardhwnd}')), 0);
    UnloadSkin();
end;

[Setup]

; --- Source: Splashpng.iss ------------------------------------------------------------
[Code]
function SplashScreen(hWnd: Integer; pathPng: String; nSleep: Integer): Integer;
external 'SplashScreen@files:IsUtilsHb.dll stdcall';

procedure InitializeWizard6();
var SplashFileName: String;
begin
SplashFileName := ExpandConstant('{tmp}\SplashScreen.png');
ExtractTemporaryFile('SplashScreen.png');
SplashScreen (StrToInt(ExpandConstant('{hwnd}')), SplashFileName, 2000);
end;

[Setup]

; --- Source: Texto Transparente Banner.iss ------------------------------------------------------------
[code]
var
  PageNameLabel, PageDescriptionLabel: TLabel;

procedure InitializeWizard7();
begin

  PageNameLabel := TLabel.Create(WizardForm);
  with PageNameLabel do
  begin
    Left := ScaleX(10); // mover el titulo de arriba (menor izq o mayor der)
    Top := ScaleY(10);
    Width := ScaleX(300); // ancho del titulo de texto arriba
    Height := ScaleY(14); // altura del titulo de texto de arriba
    AutoSize := False;
    WordWrap := True;
    Font.Color := clWhite; // color de texto
    Font.Style := [fsBold];
    ShowAccelChar := False;
    Transparent := True;
    Parent := WizardForm.MainPanel;
  end;

  PageDescriptionLabel := TLabel.Create(WizardForm);
  with PageDescriptionLabel do
  begin
    Left := ScaleX(15); // mover la descripcion de abajo (menor izq o mayor der)
    Top := ScaleY(25);
    Width := ScaleX(475); // ancho de la descripcion de texto abajo
    Height := ScaleY(30); // altura de la descripcion de texto abajo
    AutoSize := False;
    WordWrap := True;
    Font.Color := clWhite; // color de texto
    ShowAccelChar := False;
    Transparent := True;
    Parent := WizardForm.MainPanel;
  end;

  with WizardForm do
  begin
    PageNameLabel.Hide;
    PageDescriptionLabel.Hide;
    with MainPanel do
    begin
      with WizardSmallBitmapImage do
      begin
        Left := ScaleX(0); // mover la imagen  (menor izq o mayor der)
        Top := ScaleY(0);
        Width := Mainpanel.Width;
        Height := MainPanel.Height;
      end;
    end;
  end;
end;

procedure CurPageChanged7(CurPageID: Integer);
begin
  PageNameLabel.Caption := WizardForm.PageNameLabel.Caption;
  PageDescriptionLabel.Caption := WizardForm.PageDescriptionLabel.Caption;
end;

[Setup]

; --- Source: Texto Transparente Menú.iss ------------------------------------------------------------
[code]
function NextButtonClick8(CurPageID: Integer): Boolean;
begin
  Result := True;
end;

function GetCustomSetupExitCode8(): Integer;
begin
  Result := 1;
end;

procedure InitializeWizard8();
var
  WLabel1, WLabel2,
  FLabel1, FLabel2: TLabel;
begin
  WizardForm.WelcomeLabel1.Hide;
  WizardForm.WelcomeLabel2.Hide;
  WizardForm.FinishedHeadingLabel.Hide;
  WizardForm.FinishedLabel.Hide;
  WizardForm.WizardBitmapImage.Width := 500; // tamaño de imagen bienvendia ancho
  WizardForm.WizardBitmapImage.Height := 315; // tamaño de imagen bienvendia altura

  WLabel1 := TLabel.Create(WizardForm); // PAGINA BIENVENIDO..
  WLabel1.Left := ScaleX(40); // mover el titulo de arriba (menor izq o mayor der)
  WLabel1.Top := ScaleY(30);
  WLabel1.Width := ScaleX(301); // ancho del cuadro de texto arriba
  WLabel1.Height := ScaleY(65); // altura del cuadro de texto de arriba
  WLabel1.AutoSize := False;
  WLabel1.WordWrap := True;
  WLabel1.Font.Name := 'Arial'; // nombre del font
  WLabel1.Font.Size := 13; // tamaño de texto
  WLabel1.Font.Style := [fsBold];
  WLabel1.Font.Color:= clWhite; // color de texto  
  WLabel1.ShowAccelChar := False;
  WLabel1.Caption := WizardForm.WelcomeLabel1.Caption;
  WLabel1.Transparent := True;
  WLabel1.Parent := WizardForm.WelcomePage;

  WLabel2 :=TLabel.Create(WizardForm);
  WLabel2.Top := ScaleY(110);
  WLabel2.Left := ScaleX(40); // mover el titulo de abajo (menor izq o mayor der)
  WLabel2.Width := ScaleX(301); // ancho del cuadro de texto abajo
  WLabel2.Height := ScaleY(300); // altura del cuadro de texto de abajo
  WLabel2.AutoSize := False;
  WLabel2.WordWrap := True;
  WLabel2.Font.Name := 'arial'; // nombre del font
  WLabel2.Font.Color:= clWhite; // color de texto
  WLabel2.ShowAccelChar := False;
  WLabel2.Caption := WizardForm.WelcomeLabel2.Caption;
  WLabel2.Transparent := True;
  WLabel2.Parent := WizardForm.WelcomePage;

  WizardForm.WizardBitmapImage2.Width := 500; // tamaño de imagen final ancho
  WizardForm.WizardBitmapImage2.Height := 315; // tamaño de imagen final altura

  FLabel1 := TLabel.Create(WizardForm); // PAGINA FINAL..
  FLabel1.Left := ScaleX(40); // mover el titulo de arriba (menor izq o mayor der)
  FLabel1.Top := ScaleY(100);
  FLabel1.Width := ScaleX(301); // ancho del cuadro de texto arriba
  FLabel1.Height := ScaleY(75); // altura del cuadro de texto de arriba
  FLabel1.AutoSize := False;
  FLabel1.WordWrap := True;
  FLabel1.Font.Name := 'arial'; // nombre del font
  FLabel1.Font.Size := 16; // tamaño de texto
  FLabel1.Font.Style := [fsBold];
  FLabel1.Font.Color:= clWhite; // color de texto
  FLabel1.ShowAccelChar := False;
  FLabel1.Caption := WizardForm.FinishedHeadingLabel.Caption;
  FLabel1.Transparent := True;
  FLabel1.Parent := WizardForm.FinishedPage;

  FLabel2 :=TLabel.Create(WizardForm);
  FLabel2.Top := ScaleY(110);
  FLabel2.Left := ScaleX(40); // mover el titulo de abajo (menor izq o mayor der)
  FLabel2.Width := ScaleX(301); // ancho del cuadro de texto abajo
  FLabel2.Height := ScaleY(300); // altura del cuadro de texto de abajo
  FLabel2.AutoSize := False;
  FLabel2.WordWrap := True;
  FLabel2.Font.Name := 'arial'; // nombre del font
  FLabel2.Font.Color:= clWhite; // color de texto
  FLabel2.ShowAccelChar := False;
  FLabel2.Caption := WizardForm.FinishedLabel.Caption;
  FLabel2.Transparent := True;
  FLabel2.Parent := WizardForm.FinishedPage;
end;

[Setup]

; --- Dispatching code ------------------------------------------------------------

[Code]

function NextButtonClick(CurPageID: Integer): Boolean;
begin
  Result := NextButtonClick1(CurPageID); if not Result then exit;
  Result := NextButtonClick8(CurPageID); if not Result then exit;
end;

procedure InitializeWizard();
begin
  InitializeWizard2();
  InitializeWizard3();
  InitializeWizard4();
  InitializeWizard6();
  InitializeWizard7();
  InitializeWizard8();
end;

procedure DeinitializeSetup();
begin
  DeinitializeSetup5();
end;

function InitializeSetup(): Boolean;
begin
  Result := InitializeSetup5(); if not Result then exit;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  CurPageChanged7(CurPageID);
end;

function GetCustomSetupExitCode(): Integer;
begin
  Result := GetCustomSetupExitCode8(); if Result>0 then exit;
end;

[Registry]
Root: HKCU; SubKey: {app}\XXXTeam; ValueType: string; ValueName: InstallPath;
Root: HKCU; SubKey: {app}\XXXTeam; ValueType: string; ValueName: Version;

[Ini]
Filename: "rev.ini"; Section: Emulator; Key: Language;
Filename: "rev.ini"; Section: steamclient; Key: PlayerName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:38:25.527

如果您将该`[Languages]`部分中的行放入单独的文件（在本例中为`c:\Languages.txt`），则以下预处理器脚本将生成脚本，该脚本将添加到位于可用语言的自定义页面列表上的组合框中并选择当前语言。在该自定义页面上还将是用于输入玩家姓名的编辑框。语言名称连同输入的名称将存储在`Setup.ini`文件中，并存储到选定的应用程序目录中。预处理后的脚本保存为`c:\PreprocessedScript.iss`文件。

***Languages.txt 内容：***

请注意，`Languages.txt`文件中的每个项目都必须具有确切的格式：

*   名称和语言文件（路径）必须用`""`字符括起来
*   文件（路径）必须只包含一个文件（不能使用分隔的文件列表）

```
Name: "default"; MessagesFile: "compiler:Default.isl"
Name: "catalan"; MessagesFile: "compiler:Languages\Catalan.isl"
Name: "french"; MessagesFile: "compiler:Languages\French.isl"
Name: "german"; MessagesFile: "compiler:Languages\German.isl"
Name: "italian"; MessagesFile: "compiler:Languages\Italian.isl"
Name: "portuguese"; MessagesFile: "compiler:Languages\Portuguese.isl"
Name: "spanish"; MessagesFile: "compiler:Languages\Spanish.isl" 
```

***脚本文件：***

该`ConvertLanguageName`函数是从 InnoSetup 源中借用（和修改）的...

```
#define LanguageFile "c:\Languages.txt"
#define LanguageName
#define LanguageIndex
#define LanguageCount
#define FileLine
#define FileHandle
#dim LanguageList[65536]
#sub ProcessFileLine
  #if FileLine != ""
    #expr LanguageList[LanguageCount] = FileLine
    #expr LanguageCount = ++LanguageCount
  #endif  
#endsub
#for {FileHandle = FileOpen(LanguageFile); \
  FileHandle && !FileEof(FileHandle); \
  FileLine = FileRead(FileHandle)} \
  ProcessFileLine
#if FileHandle
  #expr FileClose(FileHandle)
#endif
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Languages]
#sub AddLanguageItemSection
  #emit LanguageList[LanguageIndex]
#endsub
#for {LanguageIndex = 0; LanguageIndex < LanguageCount; LanguageIndex++} AddLanguageItemSection

[INI]
Filename: "{app}\Setup.ini"; Section: "Emulator"; Key: "Language"; String: "{code:GetLanguageName}"; Flags: createkeyifdoesntexist 
Filename: "{app}\Setup.ini"; Section: "SteamClient"; Key: "PlayerName"; String: "{code:GetPlayerName}"; Flags: createkeyifdoesntexist

[Code]
var  
  NameEdit: TNewEdit;
  LanguageCombo: TNewComboBox;
  LanguageNames: TStringList;

function ConvertLanguageName(const Value: string): string;
var
  I: Integer;
  WideCharCode: Word;
begin
  Result := '';
  I := 1;
  while I <= Length(Value) do 
  begin
    if Value[I] = '<' then 
    begin
      WideCharCode := StrToInt('$' + Copy(Value, I + 1, 4));
      I := I + 6;
    end
    else 
    begin
      WideCharCode := Ord(Value[I]);
      I := I + 1;
    end;
    SetLength(Result, Length(Result) + 1);
    Result[Length(Result)] := Chr(WideCharCode);
  end;
end;

function GetLanguageName(const Value: string): string;
begin
  Result := LanguageNames[LanguageCombo.ItemIndex];
end;

function GetPlayerName(const Value: string): string;
begin
  Result := NameEdit.Text;
end;

procedure InitializeWizard;
var
  PlayerSettingsPage: TWizardPage;
  NameLabel: TLabel;
  LanguageLabel: TLabel;
begin
  PlayerSettingsPage := CreateCustomPage(wpWelcome, 'Caption', 'Description');

  NameLabel := TLabel.Create(WizardForm);
  NameLabel.Parent := PlayerSettingsPage.Surface;
  NameLabel.Left := 0;
  NameLabel.Top := 0;
  NameLabel.Caption := 'Name';
  NameEdit := TNewEdit.Create(WizardForm);
  NameEdit.Parent := PlayerSettingsPage.Surface;
  NameEdit.Left := 0;
  NameEdit.Top := NameLabel.Top + NameLabel.Height + 4;
  NameEdit.Width := 250;

  LanguageNames := TStringList.Create;
  #sub AddLanguageInternalNames
    #define GetLanguageInternalName(str S) \
      Local[0] = Copy(S, Pos("Name:", S) + Len("Name:")), \
      Local[1] = Copy(Local[0], Pos("""", Local[0]) + 1), \
      Copy(Local[1], 1, Pos("""", Local[1]) - 1)
    #emit '  LanguageNames.Add(''' + GetLanguageInternalName(LanguageList[LanguageIndex]) + ''');'    
  #endsub
  #for {LanguageIndex = 0; LanguageIndex < LanguageCount; LanguageIndex++} AddLanguageInternalNames

  LanguageLabel := TLabel.Create(WizardForm);
  LanguageLabel.Parent := PlayerSettingsPage.Surface;
  LanguageLabel.Left := 0;
  LanguageLabel.Top := NameEdit.Top + NameEdit.Height + 8;
  LanguageLabel.Caption := 'Language';
  LanguageCombo := TNewComboBox.Create(WizardForm);
  LanguageCombo.Parent := PlayerSettingsPage.Surface;
  LanguageCombo.Left := 0;
  LanguageCombo.Top := LanguageLabel.Top + LanguageLabel.Height + 4;
  LanguageCombo.Width := NameEdit.Width; 
  LanguageCombo.Style := csDropDownList;  
  #sub AddLanguageDisplayNames
    #define GetLanguageDisplayName(str S) \
      ReadIni(S, "LangOptions", "LanguageName")
    #define GetLanguageFile(str S) \
      Local[0] = Copy(S, Pos("MessagesFile:", S) + Len("MessagesFile:")), \
      Local[1] = Copy(Local[0], Pos("""", Local[0]) + 1), \
      StringChange(Copy(Local[1], 1, Pos("""", Local[1]) - 1), "compiler:", CompilerPath)
    #expr LanguageName = GetLanguageDisplayName(GetLanguageFile(LanguageList[LanguageIndex]))
    #emit '  LanguageCombo.Items.Add(ConvertLanguageName(''' + LanguageName + '''));'
  #endsub
  #for {LanguageIndex = 0; LanguageIndex < LanguageCount; LanguageIndex++} AddLanguageDisplayNames
  LanguageCombo.ItemIndex := LanguageNames.IndexOf(ActiveLanguage);
end;

procedure DeinitializeSetup;
begin
  LanguageNames.Free;
end;

#expr SaveToFile("c:\PreprocessedScript.iss") 
```

# c++ - 如何在不访问 vblank 的情况下实现平均 60（或 30，或其他数字）FPS？

> ID：13001688
> 
> 赞同：0
> 
> 时间：2012-10-21T20:05:38.637
> 
> 标签：c++, windows, frame-rate

如何在不访问垂直回扫中断的情况下在我的游戏中实现平均 60（或 30）[FPS ？](http://en.wikipedia.org/wiki/Frame_rate)（某些驱动程序不提供 vblank 中断。）

我不想浪费 CPU 时间以比显示器显示的速度更快的速度传送帧，但同时我不想让平均帧速率下降到比显示器显示速率低得多，因为这会剥夺玩家的及时反馈。

我正在使用 OpenGL，但是对于 GDI 或几乎任何东西，原理应该是相同的。我主要不关心避免撕裂，而是保持[实时控制](http://www.measurepolis.fi/alma/ALMA%20Human%20Reaction%20Times%20as%20a%20Response%20to%20Delays%20in%20Control%20Systems.pdf)的错觉，即组合输入和输出滞后低。

我相信这必须有某种标准模式。（定期计时器？睡觉？）我使用的是 Windows（地铁前），但也非常欢迎更通用的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:49:51.600

您添加的评论更明确地表明您担心撕裂：显然您应该使用在调用时激活的双缓冲，`ChoosePixelFormat()`但您仍然必须获得正确的时机才能没有撕裂：

*   在您调用`SwapBuffers()`. 这给了你 1/60 秒；如果您需要更多，您必须暂时降低到例如 30fps。

*   您可以立即调用下一个 SwapBuffers，但如果这样做，您将消耗 100% 的 cpu，因为从第 1 点开始，您应该在它之后立即重绘后台缓冲区。为避免这种情况，如果剩余时间足够，您应该*尝试*睡眠，例如`QueryPerformanceCounter/Frequency`，用于确定距离下一个 1/60 秒还剩多少时间：如果超过例如 8 毫秒`Sleep(1)`，则忙等待不使帧速率发生变化太多了。

# jquery - 绑定和取消绑定 mouseover mouseon

> ID：13001693
> 
> 赞同：2
> 
> 时间：2012-10-21T20:06:56.617
> 
> 标签：jquery

我在绑定 mouseover mouseon 事件时遇到问题。

我可以用 off 来解绑它们

```
$('.overview li a img').off('mouseover mouseon'); 
```

但似乎不起作用。

```
$('.overview li a img').on('mouseover mouseon'); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T20:09:20.700

没有`mouseon`事件。有：

*   [`mousedown()`](http://api.jquery.com/mousedown/)
*   [`mouseenter()`](http://api.jquery.com/mouseenter/)
*   [`mouseleave()`](http://api.jquery.com/mouseleave/)
*   [`mousemove()`](http://api.jquery.com/mousemove/)
*   [`mouseout()`](http://api.jquery.com/mouseout/)
*   [`mouseover()`](http://api.jquery.com/mouseover/)

此外，您应该使用处理函数来绑定事件：

```
$(".overview li a img").on("mouseover", function() {
    console.log("Mouse is over");
}); 
```

这是每次触发事件时执行的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:13:50.907

```
$('.overview li a img').on({'mouseover mouseenter':function(event){
  alert("hello");
}},null,null); 
```

或者

```
$('.overview li a img').on({'mouseover':function(event){
  alert("hello")}, 
  'mouseenter':function(event){
  alert("world");
}},null,null); 
```

应该可以工作，因为 .on() 函数需要一个函数来绑定。

# php - MySQL - mysql 日期格式后缀（1st, 2nd, 3rd...）

> ID：13001694
> 
> 赞同：1
> 
> 时间：2012-10-21T20:07:12.697
> 
> 标签：php, mysql

我怀疑是否存在，但我只是想知道是否可以将后缀直接应用于 MySQL 查询中的日期编号，而不必再次使用 PHP 攻击它？换句话说，我目前正在查询

```
DATE_FORMAT(Date,"%d %b %y") 
```

这给了我12 年 7 月**13**日。我可以得到一个将在12 年 7 月**13**日提供的查询吗？

如果不是，应用后缀的最有效方法是什么？目前，我正在将字符串分解成一个数组，通过一个函数运行 day 变量以应用正确的后缀，然后再次将所有变量连接在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:12:46.417

尝试

```
DATE_FORMAT(Date,"%D %b %y") 
```

来自 DATE_FORMAT 的 MySQL 手册：

%D 带有英文后缀的月份中的某天（0th、1st、2nd、3rd，...）

# mysql - 如何进行分页选择查询并从多个分片中获取聚合结果

> ID：13001696
> 
> 赞同：0
> 
> 时间：2012-10-21T20:07:21.817
> 
> 标签：mysql, sql, sharding, data-paging

在分片环境中，数据将被拆分到各种机器/分片。我想知道如何创建一个返回分页结果的查询（例如第 2 页，10 个结果或第 10 页，20 个结果）？

我知道它与主键有关。使用单个 RDBMS 很容易，因为您有一个自动增量列，因此很容易获取最后 10 个项目并返回分页数据。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T15:58:42.047

我为[ScaleBase](http://www.scalebase.com/)工作，它是一个完整的横向扩展解决方案的制造商，如果你愿意，它是一个“自动分片机”，分析数据和 SQL 流，在 DB 节点之间拆分数据，负载平衡读取，并在运行时聚合结果- 所以你不必！

你可以看到我对这个线程关于自动增量的回答：[Sharding and ID generation as instagram](https://stackoverflow.com/questions/12997895/sharding-and-id-generation-as-instagram)

另外，看看我在[http://database-scalability.blogspot.com/](http://database-scalability.blogspot.com/)上关于 Pinterest 的帖子，然后和现在......

具体来说 - 将多个分片的结果合并为 1 个结果是地狱。可能是边缘情况，GROUP BY，ORDER BY，JOINs，LIMIT，HAVING。我必须说，在 SB 我们支持大多数组合，这花了我们很长时间。诚然，我们需要通用地做，虽然你可以“弯曲”到专有......但仍然......

# c - 使用 linux 内核中定义的结构时出错

> ID：13001700
> 
> 赞同：2
> 
> 时间：2012-10-21T20:07:57.230
> 
> 标签：c, linux-kernel

我在`/usr/src/linux-3.2/include/linux/unistd.h`linux内核中定义了一个结构：

```
#ifndef _LINUX_UNISTD_H_
#define _LINUX_UNISTD_H_

struct threadinfo_struct {
    int pid;
    int nthreads;
    int *tid;
};

/*
 * Include machine specific syscall numbers
 */
#include <asm/unistd.h>

#endif /* _LINUX_UNISTD_H_ */ 
```

在编译和安装内核，然后从它启动之后，我尝试编译并运行这个程序：

```
#include <stdio.h>
#include <linux/unistd.h>
int main(void) {
    struct threadinfo_struct *ti = (struct threadinfo_struct*) malloc(sizeof(struct threadinfo_struct));
    // ...
    return 0;
} 
```

但是，当我尝试这样做时，我在编译程序时遇到错误：

```
test.c: In function 'main':
test.c:4:78: error: invalid application of 'sizeof' to incomplete type 'struct threadinfo_struct' 
```

为什么我会收到此错误，我该如何解决？鉴于我对 linux 内核非常陌生，这对我来说很难找到很多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:14:28.113

该文件`/usr/src/linux-3.2/include/linux/unistd.h`不在标准包含路径上。

用户空间应用程序有自己的构建环境。您包括位于 的文件`/usr/include/linux/unistd.h`。大多数内部内核结构都没有为用户空间应用程序定义。

如果你真的需要定义这个结构，那么你需要将文件从 linux 树复制到你的项目目录，或者通过添加`-isystem/usr/src/linux-3.2/include/`选项来调整 gcc 命令。

但是，后者会造成很大的混乱，所以最好只复制文件。

# c++ - 不使用 boost 的简单字符串解析

> ID：13001702
> 
> 赞同：1
> 
> 时间：2012-10-21T20:08:03.477
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

我正在为我的 C++ 课做作业，我希望能得到一些帮助。我在使用 C++ 编码时遇到的最大问题之一是解析字符串。我找到了解析字符串的更长更复杂的方法，但是我需要编写一个非常简单的程序，只需将字符串解析为 2 个部分：一个命令和一个数据部分。例如：`Insert 25`这会将其拆分为 Insert 和 25。

我计划使用字符串数组来存储数据，因为我知道它只会将字符串分成 2 个部分。但是，我还需要能够读取不需要解析的字符串，例如`Quit`

在不使用诸如 boost 之类的外部库的情况下完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:11:46.647

最*简单*的可能是这样的：

```
string s;
int i;

cin >> s;
if (s == "Insert")
{
    cin >> i;
    ... // do stuff
}
else if (s == "Quit")
{
    exit(0);
}
else
{
    cout << "No good\n";
} 
```

如果您需要很好地处理用户错误、可扩展性等，最简单的方法可能不太好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:15:00.573

您可以使用 , 从流中读取字符串[`getline`](http://www.cplusplus.com/reference/string/getline/)，然后通过查找`' '`字符串中空格字符的第一个位置并使用该[`substr`](http://www.cplusplus.com/reference/string/string/substr/)函数两次（对于空格左侧的命令和右侧的数据）来进行拆分空间）。

```
while (cin) {
     string line;
     getline(cin, line);
     size_t pos = line.find(' ');
     string cmd, data;
     if (pos != string::npos) {
         cmd = line.substr(0, pos-1);
         data = line.substr(pos+1);
     } else {
         cmd = line;
     }
     cerr << "'" << cmd << "' - '" << data << "'" << endl;
} 
```

这是[ideone 上演示的链接](http://ideone.com/q6AteO)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T20:15:25.560

这是另一种方式：

```
string s("Insert 25");
istringstream iss(s);
do
{
   string command; int value;
   iss >> command >> value;
   cout << "Values: " << command << " " << values << endl;
} while (iss); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:58:19.927

我喜欢将流用于此类事情。

```
int main()
{
    int Value;
    std::string Identifier;
    std::stringstream ss;
    std::multimap<std::string, int> MyCollection; 

    ss << "Value 25\nValue 23\nValue 19";

    while(ss.good())
    {
            ss >> Identifier;
            ss >> Value;
            MyCollection.insert(std::pair<std::string, int>(Identifier, Value));
    }

    for(std::multimap<std::string, int>::iterator it = MyCollection.begin(); it != MyCollection.end(); it++)
    {
            std::cout << it->first << std::endl;
            std::cout << it->second << std::endl;
    }

    std::cin.get();
    return 0;
} 
```

这样您就可以将数据转换为所需的格式。并且流会自动在空格上拆分。如果您使用文件，它与 std::fstream 的工作方式相同。

# c - 在内存中的地址 0x200 处声明一个指向整数的指针

> ID：13001704
> 
> 赞同：2
> 
> 时间：2012-10-21T20:08:22.127
> 
> 标签：c, memory, pointers

我有几个疑问，我记得有些地方我无法手动将变量放在内存中的特定位置，但后来我遇到了这段代码

```
#include<stdio.h>
void main()
{
int *x;
x=0x200;
printf("Number is %lu",x); // Checkpoint1
scanf("%d",x);
printf("%d",*x);
} 
```

是我们不能把它放在一个特定的位置，还是我们不应该把它放在一个特定的位置，因为我们不知道它是否是一个有效的位置？

此外，在这段代码中，直到第一个检查点，我得到的输出是 512。然后是 Seg Fault。

有人可以解释为什么吗？0x200 不是有效的内存位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:10:26.760

在一般情况下 -**您将获得的行为是未定义的**- 一切都可能发生。

例如，在 linux 中，前 1GB 是为内核保留的，所以如果你尝试访问它 - 你会得到一个 seg 错误，因为你试图在用户模式下访问内核内存。

不知道它在 Windows 中是如何工作的。

* * *

[linux声明的参考](http://linux-mm.org/HighMemory)：

> 目前，32 位 x86 架构是最流行的计算机类型。在这种架构中，传统上 Linux 内核将 4GB 的虚拟内存地址空间分成 3GB 用于用户程序和 1GB 用于内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:15:38.617

添加到@amit 写的内容：

在windows中也是一样的。一般来说，所有保护模式操作系统都是相同的。由于 DOS 等不再存在，因此除了内核模式（km-drivers）和嵌入式系统之外的所有系统都相同。

操作系统管理允许您写入哪些内存页面，并放置标记，如果写入其他页面，CPU 会自动引发访问冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:38:31.017

直到“检查点”，您还没有访问内存位置 0x200，所以一切正常。

我`x`在函数中有一个局部变量`main`。它的类型是“指向 int 的指针”。`x`分配值 0x200，然后打印该值。但是 x 的*目标*还没有被访问过，所以到目前为止，是否`x`持有有效的内存地址并不重要。

然后`scanf`尝试写入你传入的内存地址，也就是存储在`x`. 然后你会得到一个段错误，这肯定是尝试写入任意内存地址的可能结果。

那么你有什么疑问呢？当您遇到明显无效的代码时，是什么让您认为这可能有效？

写入特定的内存地址*可能*在某些条件下有效，但通常极不可能。在所有现代操作系统下，普通程序无法控制其内存布局。操作系统决定程序代码、堆栈和全局变量等初始内容的去向。操作系统可能还会使用一些内存空间，并且不需要告诉您它正在使用什么。相反，您请求内存（通过创建变量或通过调用内存分配例程），然后使用它。

因此，写入特定地址很可能会获得尚未分配的内存或用于其他目的的内存。这些都不好，即使您确实设法命中了一个实际上可写的地址。如果您破坏程序的其他变量之一使用的一些数据怎么办？或者你的程序的其他部分破坏了你刚刚写的值？

你永远不应该选择一个特定的硬编码内存地址，你应该使用一个你知道是变量的地址，或者你从类似`malloc`.

# android - 检索 TextView 单击的行号

> ID：13001706
> 
> 赞同：0
> 
> 时间：2012-10-21T20:08:25.480
> 
> 标签：android, textview, row, clickable

这里真的很愚蠢的问题，但无法找到答案谷歌搜索。

我有一个可点击的文本视图。如何检索被点击的行号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:20:23.143

这个问题并不是那么愚蠢，因为据我所知，没有内置的方法可以做到这一点。

但是，您可以使用：

*   [`getLineHeight()`](http://developer.android.com/reference/android/widget/TextView.html#getLineHeight%28%29)确定每行在 TextView 中的高度和
*   [`MotionEvent#getY()`](http://developer.android.com/reference/android/view/MotionEvent.html#getY%28int%29)在[OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)中计算点击了哪一行。

* * *

基本示例：

```
textView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_UP) {
            float line = FloatMath.floor(event.getY() / textView.getLineHeight());
            Toast.makeText(getBaseContext(), "" + line, Toast.LENGTH_SHORT).show();
        }
        return false;
    }
}); 
```

从`getLineHeight()`文档中：

> 请注意，文本中的标记可能会导致个别行高于或低于此高度，并且布局可能包含额外的第一行或最后一行填充。

因此，如果您修改了上面列出的任何属性，您也需要考虑到这一点。

# asp.net-mvc - ASP.NET MVC 4 图像上传有问题

> ID：13001710
> 
> 赞同：3
> 
> 时间：2012-10-21T20:08:55.217
> 
> 标签：asp.net-mvc, image

我正在尝试将图像与其他字段一起上传。[一直在关注这里](https://stackoverflow.com/questions/2000525/having-trouble-uploading-files-in-asp-net-mvc)和[这里](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0)的例子

但是，似乎图像对象没有传递给控制器​​，我找不到任何错误。

这是视图：

```
@model Project.Models.ContentNode
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm("Create", "News", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>News</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>
        @*Image upload field*@
        <div class="editor-field">
            <input type="file" name="file" />
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Body)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => model.Body)
            @Html.ValidationMessageFor(model => model.Body)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

以下是控制器方法：

```
public ActionResult Create()
        {
            var model = new ContentNode();
            return View( model );
        }

        [HttpPost]
        public ActionResult Create(ContentNode nyF, HttpPostedFileBase imageData)
        {
            // Get the type of content from DB
            var k = (from ct in _db.ContentTypes
                     where ct.ID == 1
                     select ct).Single();

            var curUser = (from u in _db.Users
                           where u.Username == User.Identity.Name
                           select u).Single();

            nyF.Author = curUser;
            nyF.ContentType = k;
            nyF.dateCreated = DateTime.Now;

            _db.ContentNodes.Add(nyF);
            _db.SaveChanges();

            // Process image
            if ((imageData != null && imageData.ContentLength > 0))
            {
                var fileName = Path.GetFileName(imageData.FileName);
                var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
                imageData.SaveAs(path);
            }
            else
            {
                return Content("The image object wasn't received");
            }

            return View(nyF);
        } 
```

我一遍又一遍地阅读了整件事，但看不到错误。这里有人愿意指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:14:59.487

输入文件的名字需要和action参数匹配

```
<input type="file" name="file" /> 
```

应该

```
<input type="file" name="imageData" /> 
```

或者您更改您的操作参数名称

```
public ActionResult Create(ContentNode nyF, HttpPostedFileBase file) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:35:30.703

您可以在 post 方法中使用 Request.Files 上传文件。您可以使用以下代码验证上传的文件。

Request.Files[0].ContentLength

# clips - 使用多个值查找事实

> ID：13001718
> 
> 赞同：0
> 
> 时间：2012-10-21T20:09:43.057
> 
> 标签：clips

```
 (defglobal ?*myGlobal* = 0)

    (deftemplate myTemp
        (slot one)
        (slot second)
        (slot third)
        (slot fourth) 
```

)

```
 (find-fact ((?p myTemp)) (eq ?p:one aValue)) 
```

我想根据多个值匹配一个事实；上面的代码只使用一个值匹配事实。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:36:11.330

您可以只使用布尔子句：

```
(assert (myTemp (one asd) (second jhg))
        (myTemp (one asd) (second kjh))
        (myTemp (one bvc) (second jhg))
        (myTemp (one bvc) (second jhg) (third qwe)))

(find-fact ((?p myTemp)) (or (eq ?p:one bvc) (eq ?p:third qwe))
(<Fact-4>)

(find-fact ((?p myTemp)) (or (eq ?p:one bvc) (eq ?p:second jhg))
(<Fact-1>)

(find-all-fact ((?p myTemp)) (or (eq ?p:one bvc) (eq ?p:second jhg))
(<Fact-1> <Fact-3> <Fact-4>) 
```

# cassandra - phpcassa 创建列族

> ID：13001721
> 
> 赞同：1
> 
> 时间：2012-10-21T20:10:22.093
> 
> 标签：cassandra, phpcassa

创建`column family`with时出现一个非常奇怪的错误`phpcassa`，这是我的代码：

```
 $sys = new SystemManager("127.0.0.1:9160");

    $attr = array("comparator" => "UTF8Type");

    $data = $sys->create_column_family("my_key_space", "user_likes", $attr); 
```

所以我实际上不确定它是否是有效代码，但我很确定它是，所以这是我得到的错误： `TTransportException [ 0 ]: TSocket: timed out reading 4 bytes from 127.0.0.1:9160`

我在很长的加载时间（可能是 30-60 秒）后收到此错误，但任何其他代码（如检索或插入数据）都可以正常工作，那会是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:40:00.137

我相信属性名称应该是`"comparator_type"`而不是`"comparator"`.

至于为什么服务器没有响应，您可能会在 Cassandra 日志中找到异常或堆栈跟踪。如果您使用的是最新版本的 Cassandra（如 1.1.5 或 1.1.6），我建议在[Cassandra JIRA](http://issues.apache.org/jira/browse/CASSANDRA)中打开一张票，因为它应该返回错误而不是超时。

# windows - Windows 命名管道无效

> ID：13001729
> 
> 赞同：0
> 
> 时间：2012-10-21T20:11:11.910
> 
> 标签：windows, pipe, named-pipes, handlers

我不知道为什么这个管道无效。对我来说一切都很好。这只是一个测试，我不写也不读。任何人都可以告诉我有什么问题吗？

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

#define BUFSIZE 4096

int main()
{
    HANDLE hPipe;

    LPTSTR Pipename = TEXT("\\\\.\\pipe\\mypipe");

    printf("Start Server\n");

    for(;;)
    {
        hPipe = CreateNamedPipe( Pipename,
                                 PIPE_ACCESS_DUPLEX,
                                 PIPE_TYPE_MESSAGE | PIPE_READMODE_MESSAGE | PIPE_WAIT,
                                 PIPE_UNLIMITED_INSTANCES,
                                 BUFSIZE,
                                 BUFSIZE,
                                 NMPWAIT_USE_DEFAULT_WAIT,
                                 NULL );

        if ( hPipe == INVALID_HANDLE_VALUE )
        {
            printf("CreatePipe failed");
            return 0;
        }

        CloseHandle(hPipe);
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:53:00.167

如果没有有关错误的更多详细信息，则很难提供帮助。但是，作为一般规则，使用 CreateNamedPipe 创建服务器，然后使用 ConnectNamedPipe。在客户端，您现在可以使用 ConnectNamedPipe 在服务器端等待的 CreateFile。

# c# - 带有 Metro 的 SQLite - 无法加载 sqlite3.dll

> ID：13001731
> 
> 赞同：1
> 
> 时间：2012-10-21T20:11:25.400
> 
> 标签：c#, xaml, sqlite, microsoft-metro

我无法在 Metro 应用程序中使用 SQLite 创建数据库。

**说明：** 我继续收到关于加载 SQLite3.dll 失败的运行时异常。

**观察：** 我观察到数据库目录永远不会在应用程序包的 LocalState 目录中创建。观察到这一点后，我在运行时实现了文件路径创建，并将 sqlite3.dll 放到了预期的位置。

然而，我仍然收到加载 SQLite3.dll 失败的异常。

1.  我利用 SQLite 的 CRUD 代码编译得很好。
2.  SQLite 依赖项（packages.config、SQLite.cs 和 sqlite3.dll）位于单独的 Metro 类库中，而不是应用程序的可执行项目中。
3.  sqlite3.dll 基于 ARM 处理器。
4.  sqlite3.dll 设置为内容，始终复制。

**代码：**

```
 SQLiteAsyncConnection connection = new SQLiteAsyncConnection(DATABASE_DIRECTORY_NAME);
    return await connection.CreateTableAsync<Service>(); 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:12:24.727

我得到了同样的错误。之后我将 sqlite3.dll 放在项目的根文件夹中，sqlite3.dll 设置为 Content, Copy Always。之后它开始工作了

# macros - 使用未声明的标识符 assert Xcode

> ID：13001735
> 
> 赞同：4
> 
> 时间：2012-10-21T20:11:59.733
> 
> 标签：macros, llvm, assert, xcode4.5

我正在使用 Xcode 4.5 和 LLVM 4.1 来编译我正在处理的一些代码。

我反复得到的错误是：“错误：使用未声明的标识符'assert'；

正确的包含在标题中（#include cassert（我也尝试过#include assert.h）但没有运气。

其他人获取了我的确切代码并在另一台运行相同设置的计算机上编译它（Mac OSX 10.8、Xcode 4.5、LLVM 4.1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:36:38.077

我和你的错误完全相同。就我而言，事实证明包含路径上还有另一个 assert.h（CMake 为 gmplib 引入了错误的包含路径。我在 make VERBOSE=1 时发现了错误的包含路径）。不确定这里是否相同。LLVM 本身对这样一个旧的头文件应该没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T07:05:46.740

今天碰到这个，我已经`Always Search User Paths`开机了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T22:08:29.823

这些错误是否发生在[boost](http://www.boost.org/)代码中？如果是这样，您可以通过在构建设置中包含以下预处理器定义来关闭断言（并消除错误）。

```
BOOST_DISABLE_ASSERTS 
```

# android - 如何拦截点击TextView中的链接？

> ID：13001737
> 
> 赞同：11
> 
> 时间：2012-10-21T20:12:04.107
> 
> 标签：android, hyperlink, textview

我有 TextView，它包含带有标签的 HTML。我需要拦截用户对此链接的点击，获取“href”参数的值，检查它并打开我的活动，如果它是本地链接，或者如果它链接到另一个站点则打开浏览器。

我试图搜索并找到[它](http://blog.elsdoerfer.name/2009/10/29/clickable-urls-in-android-textviews/)，但我不明白如何在我的情况下使用它。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T04:51:28.087

有这个方法：[https ://stackoverflow.com/a/3452944/1799219](https://stackoverflow.com/a/3452944/1799219)

它真正做的就是将链接传递给您自己的活动（因为链接通常传递给其他活动），然后您提取 URL。

# javascript - Javascript Prototypes - 我们不能只添加到对象中吗？

> ID：13001738
> 
> 赞同：-1
> 
> 时间：2012-10-21T20:12:22.130
> 
> 标签：javascript, prototypejs

使用 Codeacadam 了解 JavaScript。我已经达到了原型对我的所有代码都产生重大影响的地步。我理解简单来说，原型是一种向类添加方法或属性的方式。找到原始类并在您忘记在哪里之前将属性/方法弹出到其中不是更方便吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:15:03.750

实际上，javascript 中没有真正的类，因为您可以在 Java 或 C++ 中拥有它们。你所拥有的只是某种**假课程**。

有几种方法可以为 javascript 变量赋予对象行为，`prototype`这就是其中之一。另外两个**使用对象字面量**（就好像你在写一个 json 对象）和**使用单例函数**。

你可以在这里看到一个很好的解释：[http ://www.phpied.com/3-ways-to-define-a-javascript-class/](http://www.phpied.com/3-ways-to-define-a-javascript-class/)

# java - 在 Java 1.5 中编译 WS 客户端 - 缺少类似 WebService 的注释

> ID：13001739
> 
> 赞同：2
> 
> 时间：2012-10-21T20:12:34.593
> 
> 标签：java, web-services, jax-ws, java-metro-framework

我正在开发一个应作为 Web 服务客户端的应用程序。

我已经使用 wsimport 实用程序基于 WSDL 文件生成了源文件。它在我使用 JDK 1.7 的开发机器上运行良好（例如，它编译和运行良好）。

我什至无法在测试环境中编译应用程序，我有 JDK 1.5。我收到一堆错误，如下所示：

```
Cannot find symbol: class WebMethod 
```

怀疑问题出在较低版本的 JDK 上。

我应该怎么做才能解决这个问题，例如更新应用程序以兼容 Java 1.5？

它必须运行一个独立的控制台应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:31:03.960

您是对的，它是您的 JDK 的一个功能，`JAX-WS`（注释）包含在 v1.6 的 J2SE JDK 中。在 1.5 中不存在。[它作为Project Metro](http://metro.java.net/1.2/docs/index.html)存在于 JDK 之外，[示例代码](https://stackoverflow.com/a/12870543/1530938)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T15:09:04.813

您可以使用带有选项的`wsimport`实用程序重新生成源类。`-target 2.0`

生成的源代码与*jdk 1.5*兼容，并且不使用 @WebService 和 @WebMethod 注释（在 jdk 1.6 中引入）。

客户端类将使用*javax.xml.ws*包中包含的*@WebServiceClient*注解 生成

 *```
@WebServiceClient(name = "ContestService", targetNamespace = "", wsdlLocation = "file:/C:/sviluppo/Lavoro/ContestWS/contestWS.wsdl") 
```*

# android - Android意图无法使应用程序可以从浏览器启动

> ID：13001740
> 
> 赞同：2
> 
> 时间：2012-10-21T20:12:42.130
> 
> 标签：android, android-intent

我正在尝试使用以下代码来实现这一点：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
         <intent-filter>
            <data android:scheme="ttest" />
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

在 Eclipse 上单击“调试”将正确启动我的应用程序。但是转到浏览器并键入“ttest://foo”不会按预期启动应用程序。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:00:58.230

我在运行 ICS 的 HTC Sensation、运行 2.3.3 的三星和 4.0.3 模拟器上做了一些测试。我无法让任何 URL 意图处理在 HTC 上工作，但在三星或模拟器上没有问题。你有机会使用 HTC 手机吗？显然 HTC 有一个问题：[标准意图 URI 损坏？](https://stackoverflow.com/questions/11780090/standard-intent-uri-broken)

# javascript - 在触摸开始时将类添加到正文而不是 .scroll()

> ID：13001745
> 
> 赞同：5
> 
> 时间：2012-10-21T20:13:40.920
> 
> 标签：javascript, jquery, ios, mobile, scroll

`<body>`当用户滚动时，我有一些 JavaScript 用于向我的元素添加一个类：

```
var $body = $('body');
$(window).scroll(function() {
    $body.addClass('scrolling');
    var scroll = $(window).scrollTop();
    if (scroll <= 1) {
        $body.removeClass('scrolling');
    }
}); 
```

这在桌面浏览器上运行良好，但在 iOS（可能还有其他移动设备）上，该类仅在触摸*释放*时添加，而不是在用户第一次触摸屏幕滚动时添加。

如何调整此脚本以在触摸时触发此类，同时对于标准桌面用户仍能正常工作？

这是一个 Fiddle 显示此脚本的实际操作：http: [//jsfiddle.net/alecrust/AKCCH/](http://jsfiddle.net/alecrust/AKCCH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:10:19.957

您可以使用 ontouchstart、ontouchmove 和 ontouchend 来处理触摸事件。

```
var $body = $('body');

if ("ontouchstart" in document.documentElement)
{
  $(window).bind('touchmove',function(e){
    e.preventDefault();

    $body.addClass('scrollingTouch');
  });

  $(window).bind('touchend',function(e){
    e.preventDefault();

    var scroll = $(window).scrollTop();
    if (scroll <= 1) {
        $body.removeClass('scrollingTouch');
    }
  });
}
else
{
  $(window).scroll(function() {
      $body.addClass('scrolling');
      var scroll = $(window).scrollTop();
      if (scroll <= 1) {
          $body.removeClass('scrolling');
      }
  });
} 
```

这是一个有效的 jsfiddle：http: [//jsfiddle.net/BLrtr/](http://jsfiddle.net/BLrtr/)

可能会有一些并发症，所以我建议您阅读[本文](http://www.devinrolsen.com/basic-jquery-touchmove-event-setup/)以了解它们。此外，您可能需要检查这些[3rd 方库](http://www.queness.com/post/11755/11-multi-touch-and-touch-events-javascript-libraries)以进行触摸事件处理。

# python - 如何避免轮询 django/python 网络服务器？

> ID：13001747
> 
> 赞同：0
> 
> 时间：2012-10-21T20:13:46.800
> 
> 标签：python, django, web-applications

我正在创建一个需要不断轮询我的 django 网络服务器以获取更新的网络应用程序。有没有办法避免这种投票？就像服务器可以在更新时发送推送消息，或者客户端为事件注册回调，并且服务器在发生变化时触发回调。

我知道 ASP.net 等中有信号框架，但我想要一些可以与 Django 一起使用的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:55:34.933

从根本上说，作为 HTML5 的一部分的[Web 套接字](http://en.wikipedia.org/wiki/WebSocket)就是为此目的而设计的，即客户端和服务器之间通过 http 协议进行双向通信，而备受关注的很少有应用程序服务器已经实现，甚至更少的 http 服务器实际上甚至开始支持它.

虽然有一些包：

*   [django-websocket](http://pypi.python.org/pypi/django-websocket)*   [django-socketio](http://pypi.python.org/pypi/django-socketio/)

已经在 django 中启用了它，它们不会对您的 http 服务器做任何事情，如果您单独使用 django 很少，这是因为 django 对于分发静态内容（如图像或任何其他静态文件）效率不高，除了分配工作负载外，我们还依赖 nginx、apache 之类的东西。不幸的是，它们不支持 Web 套接字，因此它们往往会破坏客户端和应用程序服务器之间的通信，即使它是首先启动的，具体取决于实现。

根据我个人的经验，nginx 会在 60 秒后中断通信，因为这是任何打开的默认分配时间。

据我所知，node.js 可能是目前使用 Web 套接字的最佳服务器。

根据您要实现的目标，如果定期轮询似乎有效，您可以尝试长轮询，基本上连接保持打开状态，直到将新数据推送回客户端与定期轮询相比，定期轮询是在某个时间间隔完成的，请注意，您可能必须配置您的 http 服务器以不终止长期打开的连接并运行 django 多线程，因为每个连接都将使用一个实例。

# clojure - 在 Clojure 函数中使用条件的替代方法，这样我就可以返回一个值

> ID：13001754
> 
> 赞同：1
> 
> 时间：2012-10-21T20:14:27.790
> 
> 标签：clojure, return, conditional-statements

我刚开始使用clojure，我正在做一个有趣的项目。在下面的函数中，我只是想显示一些博客文章（带有一些选项）。使用“as”选项，我想让客户端代码能够在 vector`[]`和 map之间进行选择`{}`。`(into [] results)`我只有`(when)`. 我想`(when)`只是返回`nil`，因为它就像一个隐含的`(do)`. 现在对我来说很明显，`(when)`像这样在末尾使用是结束您希望返回值的函数的错误方法。我怎样才能让它工作？

```
(ns yf.models.post
  (:require [clojure.java.jdbc :as sql]
            [clojure.string :as str])
  (:use [yf.models.helpers :only [date-format]]))

(defn all [& {:keys [order limit roots-only as]}]
  (sql/with-connection (System/getenv "DATABASE_URL")
    (sql/with-query-results results
      [(str 
        "SELECT
          id,
          body,"
          (date-format "created") ","
          (date-format "modified")
        "FROM post a"
        (when (true? roots-only)
          " WHERE NOT EXISTS (SELECT child_id from post_map b
                          WHERE a.id=b.child_id) ")
        (when (and
                (string? (order :column))
                (string? (order :dir))
                (or 
                  (= (:dir order) "asc")
                  (= (:dir order) "desc")))
          (str " ORDER BY a." (:column order) " " (:dir order)))
        (when (and
                (instance? Number limit)
                (pos? limit))
          (str " LIMIT " limit)))]
      (when (and                     ;this is where the problem is
              (string? as)
              (not (str/blank? as)))
        (when (= as "vector")
          (into [] results))
        (when (= as "map")
          (into {} results)))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:34:09.567

问题不在于`(when)`总是返回`nil`——它并不总是返回`nil`；它返回表达式集合中最后的任何内容。`(when)`是一个使用 ' 的宏，`(if)`而`(do)`这正是`(do)`它的作用：执行表达式列表并返回集合中最后一个表达式的值。

我尝试了`(case)`宏，它可以工作：

```
...
(case as
  "vector" (into [] results)
  "map" (into {} results)) 
```

或者，更好（感谢 kotarak）：

```
(into (empty as) results) 
```

哪里`as`像`vector`（`"vector"`我认为与 相反）

# javascript - Backbone.js 构建复杂模型（模型变成模型）

> ID：13001756
> 
> 赞同：3
> 
> 时间：2012-10-21T20:14:54.340
> 
> 标签：javascript, backbone.js

有没有办法在 Backbone.js 中构建更复杂的模型，让我通过一个例子来解释：

这是一个 Json 会话对象：

```
{
    id: "17",
    notes: "",
    start: "2012-10-18T15:57:41.511Z",
    end: "2012-10-18T19:22:31.875Z",
    sessionType: {
        id: "1",
        name: "Life Style",
    }
} 
```

从服务器检索 Session 对象时，我想要一个 SessionType Backbone.Model 以便在该对象周围添加一些业务逻辑。

到目前为止，我只能检索具有虚拟 SessionType 的对象会话，我无法在其上添加任何逻辑，因为它不属于任何 Backbone 模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:35:32.187

You can try this:

```
window.SessionType = Backbone.Model.extend({

    initialize:function () {
    },

}); 
```

Then in your session model, have a method:

```
window.Session = Backbone.Model.extend({

    initialize:function () {
    },

    getSessionType () {
        return new SessionType(this.get('sessionType'));
    }

}); 
```

Now you can call the `getSessionType()` method which returns a model that can have your logic.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:40:14.723

@Amulya 100% 正确。但是，如果您想要会话模型而不必调用 getSessionType()，我会考虑使用内置的 parse 方法并从那里创建模型。

如果您的 Session 模型与您的模型相关，我会考虑使用[Backbone Relational](https://github.com/PaulUithol/Backbone-relational)。由于 Backbone 不处理关系，因此上面列出的插件可以很好地填补空白，而无需过多的体力劳动。

# c++ - 将整数除以双精度会丢失精度

> ID：13001759
> 
> 赞同：0
> 
> 时间：2012-10-21T20:15:01.063
> 
> 标签：c++, math

我试图将一个整数除以一个双精度值，但我相信它会失去精度..

```
#include <cmath>
#include <cstdio>
int main()
{
    double t=5465/54.0;
    double t1=(double)5465/(double)(t);
    double t3 = 5465.0/101.203;
    printf("%lf %lf %lf\n",t,t1,t3);
    return 0;
} 
```

对于上面的代码值，`t3 = 54.0003`正如预期的那样，但对于 t1，它变成`54`而不是获得与 t3 相同的值。我不明白我在做什么错

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:21:54.827

5465/54.0 的值为 101.203703704（保留 9 位小数）。在您的代码中，您正在使用它

```
 double t3 = 5465.0/101.203; 
```

截断结果

```
 double t=5465/54.0; 
```

出于`101.203`某种未知的原因。因此，由于截断，您正在计算 2 个不同的值。本质上，您期望这两个计算是相同的，但是

```
 5465.0/101.203 != 5465/101.203703704 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:22:08.900

当然，结果会有所不同。您使用 101.203 而不是 101.203703704。

# algorithm - 执行松弛 m 次的 Dijkstra 算法

> ID：13001762
> 
> 赞同：1
> 
> 时间：2012-10-21T20:15:12.047
> 
> 标签：algorithm, graph-algorithm, dijkstra

在 Dijkstra 算法中，**松弛***最多* 被调用**m 次**（其中 m = #edges）。我试图找出一些具体的图形示例，确实执行了 m 次放松。我知道每次找到到给定节点的更便宜的路径时都会发生放松，但我无法真正“想象”这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:05:00.590

如评论中所述，一棵树就是一个例子。带循环的示例是具有以下边的 n 个顶点（其中 n 为奇数）的图：

(1, 2) 成本 1

(2, 3) 的成本 1

(1, 3) 成本 10

,

(3, 4) 成本 1

(4, 5) 的成本 1

(3, 5) 成本 10

...

(n - 2, n - 1) 成本 1

(n - 1, n) 成本 1

(n - 2, n) 成本 10

从顶点 1 开始的 Dijkstra 算法总是会首先放松昂贵的 1->3、3->5、5->7、7->9、... (n - 2)->n 边，然后会找到更长的边但更便宜的路径。

给定的图表很好地说明了为什么在 Dijkstra 算法中需要优先级队列。在随机图上，使用简单的队列并在每次边松弛后将顶点推回往往工作得非常快，但在这种情况下，这样的算法将在指数时间内运行。

# java - 如何告诉 Eclipse 使用来自不同库的不同版本的包进行构建？

> ID：13001770
> 
> 赞同：1
> 
> 时间：2012-10-21T20:16:54.277
> 
> 标签：java, android, eclipse, mobile, package

我目前正在尝试使用 Android 4.1.2 Java 库构建一个 android 应用程序。

不幸的是，我想使用更新版本的 org.json 包，它出现在该库中。

我可以告诉 Eclipse 不要使用 Android 4.1.2 Jar 中的 org.json 包吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:30:15.267

如果通过构建路径中的两个不同 JAR 可以使用带有包的同一个类，那么您将无法正确执行此操作。

**您可以尝试的一个步骤**是将新 jar 放在构建路径 UI的`order`使用`Order and Export`选项卡的顶部。`Eclipse`

最好的方法是更新文件系统中的 Android Lib 文件夹，并用新的 JAR 替换旧的 jar。

**请注意：**当您尝试使用与软件包提供的 JAR 不同的 JAR 时，可能会出现**兼容性问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:32:40.643

听起来您遇到了 Java 包名称冲突。不幸的是，由于 Android 中的代码是预先打包的，最好的办法是重命名较新的 json 包并使用它来避免使用预构建的包。

# amazon-ec2 - Amazon EC2 终止实例（免费套餐）

> ID：13001772
> 
> 赞同：23
> 
> 时间：2012-10-21T20:17:08.857
> 
> 标签：amazon-ec2, instance

我在亚马逊上使用免费套餐。我有一个微型实例，我终止了它。如果我创建另一个（微型）实例，亚马逊会开始向我收费吗？我仍然可以在实例列表中看到我已终止的实例，但我无法启动或重新启动它。我可以以某种方式从列表中删除它吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-22T09:56:54.363

您无法对终止的实例执行任何操作。它会在列表中显示，直到删除后一小时。在那之后，它将从列表中删除。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-21T20:21:03.587

AWS 仅对正在运行的实例向您收费，只要您在任何时候只运行一个实例，就不会向您收费。并且不能对已终止的实例执行任何操作，这些实例会在终止后 1 小时消失。

**更新：价格发生了变化** 现在免费套餐为您提供 12 个月 750 小时/月的“微型实例”。超过 750 小时或 1 年后，不是免费的。随着这些帖子变老，最好自己在这里查看： http: [//aws.amazon.com/ec2/pricing/](http://aws.amazon.com/ec2/pricing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-12T08:47:10.023

尝试这个...

```
 var terminateInstancesRequest = new TerminateInstancesRequest();
    terminateInstancesRequest.InstanceIds = new List<string>() { InstanceId };
    bool isError = true;
    while (isError)
    {
     try
     {
         amazonEc2client.TerminateInstances(terminateInstancesRequest);
         isError = false;
     }
     catch (Exception ex)
     {
         Console.WriteLine(ex.Message + "\n" + ex.StackTrace);
         isError = true;
     }
    } 
```

# c++ - *(ptra + 0).prop 和 (*(ptra + 0)).prop 的有效性

> ID：13001774
> 
> 赞同：0
> 
> 时间：2012-10-21T20:17:21.827
> 
> 标签：c++

为什么 `*(ptra + 0).prop`无效且`(*(ptra + 0)).prop`有效？. 我知道点运算符的左侧必须有一个结构。但我仍然很困惑。有人可以向我解释两者之间的区别吗？

```
class myobj 
{
public:
    int v;
};

int main()
{

    myobj *ptra = new myobj[2]();

    *(ptra + 0).v = 12 //Error

    (*(ptra + 0)).v = 12 ; //OK

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:22:21.120

因为then`operator .`具有[更高的优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)`operator *`，所以

```
*(ptra + 0).v 
```

方法

```
*((ptr + 0).v) 
```

并不是

```
(*(ptra + 0)).v 
```

`*((ptr + 0).v)`这是不正确的语法，因为`(ptr + 0)`不是类或联合，所以没有任何成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:21:35.223

像这样的错误是由于**运算符优先级**造成的。在这种情况下，第一个被执行的操作符是`operator.`，第二个被执行的是 ins `operator*`。这就是为什么一行可以编译而另一行不编译的原因，即使它们看起来非常相似。

要覆盖此运算符优先级，请使用括号，如

```
(1 + 2) * 3 = 9 
```

与

```
1 + 2 * 3 = 7. 
```

# android - 更改 Gridview 的图像

> ID：13001777
> 
> 赞同：1
> 
> 时间：2012-10-21T20:17:35.543
> 
> 标签：android, gridview

我有一个快速的问题。

如果我在另一个 Activity 中选择 RadioButton，我想更改 GridView 的图像。简而言之：我想从 Activity B 更改 Activity A 的 Gridview 图像。遗憾的是我得到了 NULLPOINTER。

这是我的 B 代码：

单选按钮1：

```
 SavePreferences("a0", "1"); 
```

单选按钮2：

```
 SavePreferences("a0", "2"); 
```

我的保存偏好

```
 private void SavePreferences(String key, String value){
        SharedPreferences sharedPreferences = getSharedPreferences("sharedPreferences2",           MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit(); 
```

所以这里是活动A

```
 public String a0 = "1";
 public Integer a1;     
 public Integer a2;
     public Integer a3;
     public Integer a4; 
     public Integer a5;
     public Integer a6; 
```

在 OnCreate

```
 SharedPreferences sharedPreferences = getSharedPreferences("sharedPreferences2", MODE_PRIVATE);
    String a0 = sharedPreferences.getString("a0", "1");
    Log.i("MyActivity", "3:a0= " + a0 );

   if ( a0.equals("1"))

   {         Log.i("MyActivity", "4:a0= " + a0 );

     a1=R.drawable.ic_launcher;
     a2=R.drawable.ic_launcher;
     a3=R.drawable.ic_launcher; 
     a4=R.drawable.ic_launcher; 
     a5=R.drawable.ic_launcher; 
     a6=R.drawable.ic_launcher; 

   }
   if ( a0.equals("2"))
   {                    Log.i("MyActivity", "6:a0= " + a0 );

        a1=R.drawable.test; 
    a2=R.drawable.test;
    a3=R.drawable.test; 
    a4=R.drawable.test; 
    a5=R.drawable.test; 
    a6=R.drawable.test; 

  } 
```

这是我的 ImageAdapter

```
public class ImageAdapter extends BaseAdapter {

[....]

    public Integer[] mThumbIds = {

           a1 , a2,
            a3, a4,
            a5 , a6,

    };

    } 
```

我设置了一些日志来查看问题所在。Log 3 说 a0 = 1 但 Log 4 没有反应。

所以我的代码没有进入 if 循环，虽然 a0 == 1 ??

谁能解释一下，问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:21:05.787

伙计，您的代码中有一些错误，由于疏忽的编码风格，这些错误不太明显。此外，您粘贴示例的方式也不清楚，因为代码脱离了上下文。您应该将每个代码片段粘贴到相关的 Class.method 中，如下所示：

```
class Foo {
  ...
  public bar() {
    ...
    some code;
    ...
  }
}; 
```

但是我想我知道问题出在哪里：适配器中的变量与活动中的变量不同。mThumbsId 不受您设置活动成员的方式的影响。

您应该创建一个采用 id 数组的构造函数，以便在创建适配器时传递所需的数据：

```
public class ImageAdapter extends BaseAdapter {
  Integer mThumbIds[];
  Context mContext;
  ...
  ImageAdapter(Context context, Integer thumbs[]) {
    mContext = context;
    mThumbIds = thumbs;
  }
} 
```

也请停止使用 Integer a1...a6 和 String a0 等变量。很容易让他们感到困惑。改用数组，然后你也可以愉快地将它传递给上面描述的 Adapter 构造函数：

```
public Class FooActivity extends Activity {
  ...
  Integer imageSetLauncher = {
    R.drawable.ic_launcher,
    R.drawable.ic_launcher,
    R.drawable.ic_launcher,
    R.drawable.ic_launcher,
    R.drawable.ic_launcher,
    R.drawable.ic_launcher
  };

  Integer imageSetTest = {
    R.drawable.test,
    R.drawable.test,
    R.drawable.test,
    R.drawable.test,
    R.drawable.test,
    R.drawable.test
  };

  public void onCreate(Bundle savedInstanceState) {
    ImageAdapter adapter;
    if (a0 == "1") {
      adapter = new ImageAdapter(this, imageSetLauncher);
    }
    if (a0 == "2") {
      adapter = new ImageAdapter(this, imageSetTest);
    }
  }
  ...
}; 
```

最后，另一个风格问题，请观察哪些变量需要是公共的和私有的。如果您不需要访问类之外的变量，但您将其公开，那么您可能会从另一个错误的类中访问它。

示例中构造函数的参数 mContext 与您的问题无关，只是在绘制视图时您当然需要它。

干杯!

# cryptoapi - CryptVerifyMessageSignatureWithKey 的 ASN1 格式公钥？

> ID：13001779
> 
> 赞同：1
> 
> 时间：2012-10-21T20:17:43.490
> 
> 标签：cryptoapi, asn.1

我正在尝试使用 C++ 中的 Cripto API 构建一个签名/解码函数对。

签名过程似乎没问题，但我在让解码部分工作时遇到问题。因为我不依赖证书，所以我使用的是 CryptSignMessageWithKey 和 CryptVerifyMessageSignatureWithKey。但是，对 CryptVerifyMessageSignatureWithKey 的调用返回 CRYPT_E_ASN1_BADTAG 错误。在互联网上寻找问题时，我发现了一两个关于类似主题的讨论，但我无法从他们那里收集到一些解决方案。

我所有的代码都是基于 Crypto API 的。它的相关（我认为）部分是：

```
CryptAcquireContext(&hCryptProv, cryptContainerName, MS_ENHANCED_PROV, PROV_RSA_FULL, 0);

...

CryptGetUserKey(hCryptProv, AT_SIGNATURE, &hKey);

...

CryptExportKey(hKey, NULL, PUBLICKEYBLOB, 0, pbKeyBlob, &dwKeyBlobLen);

...

sigParams.cbSize = sizeof(CRYPT_KEY_VERIFY_MESSAGE_PARA);
sigParams.dwMsgEncodingType = (PKCS_7_ASN_ENCODING | X509_ASN_ENCODING);
sigParams.hCryptProv = NULL;

publicKeyInfo.Algorithm.pszObjId = szOID_RSA_RC4;
publicKeyInfo.Algorithm.Parameters.cbData = 0;
publicKeyInfo.Algorithm.Parameters.pbData = NULL;
publicKeyInfo.PublicKey.pbData = pbKeyBlob;
publicKeyInfo.PublicKey.cbData = dwKeyBlobLen;
publicKeyInfo.PublicKey.cUnusedBits = 0;

...

// ***** ERROR: CRYPT_E_ASN1_BADTAG
CryptVerifyMessageSignatureWithKey(&sigParams, &publicKeyInfo, pbBuffer, dwCount, decodedBlob, &dwCount); 
```

我是否应该以某种方式将从 CryptExportKey 获得的公钥转换为 ASN1，并将其存储在 publicKeyInfo.PublicKey.pbData 中？如果是这样，我该怎么做？

我在这里想念什么？

问候，并提前感谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:03:53.770

正如 Andrew7Webb 在[http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/b4d1eb0e-d4c1-46f0-80f4-8110a0e26be9](http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/b4d1eb0e-d4c1-46f0-80f4-8110a0e26be9)中所建议的那样，通过准备解决了`CERT_PUBLIC_KEY_INFO`问题。`CryptExportPublicKeyInfo`

# ruby-on-rails - Rails 3.2.8 - 如何从模块内部的 application_controller.rb 获取方法？

> ID：13001780
> 
> 赞同：-2
> 
> 时间：2012-10-21T20:17:47.587
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的控制器/application_controller.rb 中有以下方法

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private

  def check_api_credential(api_key)
    if Credential.find_by_key(api_key)
      true
    else
      false
    end
  end

end 
```

在直接位于控制器文件夹下的所有控制器中，都可以使用此方法。

但是控制器文件位于 controllers/api/v1/photos_controller.rb

```
module Api
  module V1
    class PhotosController < ActionController::Base
      respond_to :json

      def create
        redirect_to root_url if check_api_credentials(params[:params][2])
        if Photo.create(params[:params][0])
          render 'success'
        else
          render 'failure'
        end
      end
    end
  end
end 
```

当我尝试保存时，我得到未定义的方法'check_api_credentials'

如何从 application_controllers.rb 访问这些方法？它们位于控制器文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:21:15.780

```
class ApplicationController < ActionController::Base

class PhotosController < ActionController::Base 
```

不敲门吗？所有其他“直接在控制器文件夹下”的控制器都继承自`ApplicationController`，但`PhotosController`不是 的子级`ApplicationController`，而是它的兄弟。这就是为什么它没有看到方法。

你没有继承的原因是`PhotosController`什么`ApplicationController`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:04:47.900

在您的控制器或您需要在不同位置调用私有方法的地方，您可以尝试一种`try:`方法。所以在你的代码中，

```
 def create
    redirect_to root_url if try: check_api_credentials(params[:params][2])
    if Photo.create(params[:params][0])
      render 'success'
    else
      render 'failure'
    end
  end 
```

或许能解决 不确定...只需尝试添加并运行它...

# c++ - std::string 内存泄漏

> ID：13001784
> 
> 赞同：5
> 
> 时间：2012-10-21T20:18:08.653
> 
> 标签：c++, string, valgrind, std

我有这个类`AppController`和功能`connectPlayer`：

```
/* AppController.h */
    class AppController
    {
          // Some other declarations ...
      private:
            static const string TAG;
    };

/* AppController.cpp */

#include "AppController.h"
const string AppController::TAG = "AppController";

AppController::AppController() {
    /* some code here...*/
}

void AppController::connectPlayer() {
    std::string port;
    std::string host;
    port = CM->getMenu()->getData("PORT");
    host = CM->getMenu()->getData("HOST");
    this->setState("Connecting...");
    Logger::info(TAG, "Port: " + port);
    Logger::info(TAG, "Host: " + host);
} 
```

当我执行程序时，我从 valgrind 得到这个：

```
==7848== 25 bytes in 1 blocks are definitely lost in loss record 160 of 671
==7848==    at 0x402842F: operator new(unsigned int) (vg_replace_malloc.c:255)
==7848==    by 0x4210A83: std::string::_Rep::_S_create(unsigned int, unsigned int, std::allocator<char> const&) (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
==7848==    by 0x4212CF7: char* std::string::_S_construct<char const*>(char const*, char const*, std::allocator<char> const&, std::forward_iterator_tag) (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
==7848==    by 0x4212E65: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) (in /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16)
==7848==    by 0x8080501: AppController::connectPlayer() (in /home/maine/Escritorio/taller7542/UltimaVersion/src/main) 
```

有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T20:29:32.970

您`std::string`在全局范围内有对象：`AppController::TAG`.

当应用程序以不正常的方式完成时，您会遇到这些全局对象的 valgrind 错误。大概没什么好担心的。

如果您（不能/不想）更改您的程序 - 请阅读此文档：http: [//valgrind.org/docs/manual/manual-core.html#manual-core.suppress](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)以摆脱这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:28:46.510

有时，valgrind 会给出误报。这意味着即使 valgrind 说你失去了记忆，实际上你没有。

唯一需要担心的是当您调用该`exit()`函数时，如[本](https://stackoverflow.com/questions/3687539/c-valgrind-possible-leaks-on-stl-string)问题所述。

如果你不想再看到这些警告，你可以创建一个**抑制文件**，为 valgrind 提供一些关于哪些错误可以忽略的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T09:48:00.453

当我在全局范围内的类中有一个字符串时，我曾经见过这个问题。Valgrind 一直抱怨我在泄漏内存。我只是在退出时“删除”了对象，错误就消失了。

# c - __try/__finally 在 UNIX 中等效

> ID：13001786
> 
> 赞同：0
> 
> 时间：2012-10-21T20:18:17.260
> 
> 标签：c, unix, exception-handling

我有一个主要用 C 编写的库，它的某些部分应该是线程安全的，我使用全局自旋锁来保护代码的关键部分。

现在我的问题是：
我应该从受自旋锁保护的关键部分内部调用用户的一些回调，以防这些回调产生异常，在 Windows 上，我在 C 中有一个_try */* _finally 能够离开即使发生错误，关键部分也是如此。我也可以在 UNIX 上完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:22:41.363

这称为结构化异常处理。它可以通过使用`setjmp`和来完成`longjmp`。它已经在 C 语言中使用了很长时间。有关详细信息，请参见：[http ://www.freetype.org/david/reliable-c.html](http://www.freetype.org/david/reliable-c.html)

# jquery - 如何锁定/冻结/临时禁用 jQuery-ui 可拖动事件？

> ID：13001787
> 
> 赞同：0
> 
> 时间：2012-10-21T20:18:22.643
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

以此为例。

[http://jsbin.com/ufarif/6/](http://jsbin.com/ufarif/6/)

如果左侧位置小于 80，我想冻结元素不被拖动到左侧。但是，如果我返回 false，则用户根本无法拖动元素（甚至向右拖动）。

`handle.draggable('disable');``stop`在触发事件之前完全忽略。

`return`或`return true`不停止拖动。

请注意，我知道该`containment`选项，但是，我的条件是动态的，`containment`并且不将函数作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:17:41.963

您可以覆盖被拖动元素的位置。

这个小提琴是位置覆盖的一个例子：http: [//jsfiddle.net/QvRjL/74/](http://jsfiddle.net/QvRjL/74/)

这个小提琴是一个例子，你可以如何检查拖动的元素是否靠近容器的边框：http: [//jsfiddle.net/pPn3v/22/](http://jsfiddle.net/pPn3v/22/)

```
$(document).mousemove(function(e){
   window.mouseXPos = e.pageX;
   window.mouseYPos = e.pageY;
}); 

$('[id^="drag-"]').each(function() {
    $(this).draggable({
        opacity: 0.7,
        cursorAt: { top: 15, left: 50 },        
        scroll: true,
        stop: function(){},  
        drag : function(e,ui){            
            //Force the helper position
            ui.position.left = window.mouseXPos - $(this).draggable('option','cursorAt').left;
            ui.position.top = window.mouseYPos- $(this).draggable('option','cursorAt').top; 
        });
}); 
```

# java - 将 ArrayList 转换为字符串

> ID：13001791
> 
> 赞同：4
> 
> 时间：2012-10-21T20:18:28.387
> 
> 标签：java, list

我有一个`ArrayList`，我需要将它转换为一个字符串。

字符串中的每个值都将在标记内，并用逗号分隔，如下所示：

```
ArrayList list = [a,b,c]

String s = " ’a’,’b’,’c’ "; 
```

我正在寻找有效的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T20:26:35.223

**您可以按照以下步骤操作： -**

*   创建一个空[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)实例

    ```
    StringBuilder builder = new StringBuilder(); 
    ```

*   迭代你的`list`

*   对于每个元素，将每个元素的表示附加到您的 StringBuilder 实例

    ```
    builder.append("'").append(eachElement).append("', "); 
    ```

*   现在，由于剩下最后一个逗号，您需要删除它。您可以使用`StringBuilder.replace()`删除最后一个字符。

您可以查看文档[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)以了解有关您可以使用的各种方法的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:29:20.420

Maybe an overkill here but providing a more functional approach through [Guava](http://code.google.com/p/guava-libraries/):

```
import com.google.common.base.Function;
import com.google.common.base.Joiner;
import com.google.common.collect.Collections2;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

public class Main {

    public static void main(String ... args){
        List<String> list = new ArrayList(){{add("a");add("b");add("c");}};
        Collection<String> quotedList = Collections2.transform(list,new Function<String, String>() {
            @Override
            public String apply(String s) {
                return "'"+s+"'";
            }
        });
        System.out.println(Joiner.on(",").join(quotedList));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:48:23.327

使用来自 Apache org.apache.commons.lang3.StringUtils 的 StringUtils 库；

```
 StringUtils.join(list, ", "); 
```

或者

```
String s = (!list.isEmpty())? "'" + StringUtils.join(list , "', '")+ "'":null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:22:34.770

看一下 StringBuilder 和 StringBuffer：

[字符串缓冲区](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)

[字符串生成器](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)

# c++ - C ++ 11中的范围（失败）？

> ID：13001792
> 
> 赞同：3
> 
> 时间：2012-10-21T20:19:03.950
> 
> 标签：c++, exception, c++11, destructor

我写了一个非常简单的解决方案，但是有人笑了，发现了一个缺陷，如下所示[http://ideone.com/IcWMEf](http://ideone.com/IcWMEf)

```
#include <iostream>
#include <ostream>
#include <functional>
#include <exception>
using namespace std;

// Wrong scope(failure)
class FailBlockT
{
    typedef function<void()> T;
    public:
    T t;
    FailBlockT(T t)
    {
        this->t=t;
    }
    ~FailBlockT()
    {
        if (std::uncaught_exception())
        {
            t();
        }
    }
};

struct Test
{
    ~Test()
    {
        try
        {
            FailBlockT f([]()
            {
                cout << "failure" << endl;
            });
            // there is no any exception here, but "failure" is printed.
            // See output below
        }
        catch(...)
        {
            cout << "some exception" << endl;
        }
    }
};

int main()
{
    try
    {
        Test t;
        throw 1;
    }
    catch(int){}
    return 0;
} 
```

简而言之，问题是我的代码看起来`std::uncaught_exception()`。当抛出异常并执行正常的析构函数时。如果我在那里使用范围故障，它会查看`std::uncaught_exception()`并认为对象范围由于异常而丢失，而不是简单地走出范围。

我想不出任何好的解决方案来**区分正常离开范围与在其中抛出异常**。是的，我知道在 dtors 中抛出是一个坏主意，但这就是为什么我没有注意到这个问题，因为我从不抛出异常。

我如何区分/解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T21:16:57.103

> 没有抛出异常，但它认为它有。

抛出了一个异常，*只是**不是从那里开始的*。

C++11 中没有机制可以询问“是否从我下面的代码中抛出了异常，而*不是*从调用堆栈中其他地方的代码中抛出的异常？” `std::uncaught_exception`正在做它应该做的事情：说明在调用函数时当前是否存在正在解决的异常。有，所以它返回`true`。

C++17 增加`std::uncaught_exceptions`（注意复数），可用于检测差异。使用这样的工具，您可以使您的`FailBlock`对象工作：

```
template<typename Func>
class FailBlockT
{
private:
    int e_count_;
    T t_;

public:
    FailBlockT(T t) : e_count_(std::uncaught_exceptions()), t_(t) {}

    FailBlock(const FailBlock &) = delete; //The type should not be mobile.

    ~FailBlockT()
    {
        if (std::uncaught_exceptions() != e_count_)
        {
            t_();
        }
    }
}; 
```

`std::uncaught_exceptions()`返回调用时引发堆栈展开的异常数。如果在对象的构造函数和析构函数期间数字相同（假设它是堆栈对象），则不会调用析构函数，因为在使用此类型的位置引发了异常。

但是，如果没有这个工具，您就无法区分引发范围退出的异常而不是在恰好发生异常展开时退出范围。因此，您将不得不像其他人一样硬着头皮*抓住*异常。

或者只是不要把这个`FailBlock`东西放在析构函数中。在我看来，那些应该直接进入可以实际抛出的常规函数​​（而析构函数永远不应该抛出）。在我看来，您担心的是一个没有任何实际意义的角落案例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T07:44:47.603

> 我想不出任何好的解决方案来区分通常离开范围与在其中抛出异常。

检查[stack_unwinding 库](https://github.com/panaseleus/stack_unwinding)- 我已经在 C++ 中实现了范围（失败）和范围（成功）功能。

它基于平台特定的函数 uncaught_exception_count。它类似于标准库中的 std::uncaught_exception，但它不是返回布尔结果，而是返回 unsigned int 显示当前未捕获异常的计数。

目前它在 {Clang 3.2, GCC 3.4.6, GCC 4.1.2, GCC 4.4.6, GCC 4.4.7, MSVC2005SP1, MSVC2008SP1, MSVC2010SP1, MSVC2012} x {x32, x64} 上进行了测试。

[在 C++11 中，可以使用](https://github.com/panaseleus/stack_unwinding/blob/master/examples/boost_scopes_cpp11.cpp)以下语法：

```
try
{
    int some_var=1;
    cout << "Case #1: stack unwinding" << endl;
    scope(exit)
    {
        cout << "exit " << some_var << endl;
        ++some_var;
    };
    scope(failure)
    {
        cout << "failure " << some_var << endl;
        ++some_var;
    };
    scope(success)
    {
        cout << "success " << some_var << endl;
        ++some_var;
    };
    throw 1;
} catch(int){}
{
    int some_var=1;
    cout << "Case #2: normal exit" << endl;
    scope(exit)
    {
        cout << "exit " << some_var << endl;
        ++some_var;
    };
    scope(failure)
    {
        cout << "failure " << some_var << endl;
        ++some_var;
    };
    scope(success)
    {
        cout << "success " << some_var << endl;
        ++some_var;
    };
} 
```

在 C++98 中，它有点[吵](https://github.com/panaseleus/stack_unwinding/blob/master/examples/boost_scopes.cpp)：

```
try
{
    cout << "Case #1: stack unwinding" << endl;
    BOOST_SCOPE_EXIT(void) { cout << "exit" << endl; } BOOST_SCOPE_EXIT_END
    SCOPE_FAILURE(void) { cout << "failure" << endl; } SCOPE_FAILURE_END
    SCOPE_SUCCESS(void) { cout << "success" << endl; } SCOPE_SUCCESS_END
    throw 1;
} catch(int){}
{
    cout << "Case #2: normal exit" << endl;
    BOOST_SCOPE_EXIT(void) { cout << "exit" << endl; } BOOST_SCOPE_EXIT_END
    SCOPE_FAILURE(void) { cout << "failure" << endl; } SCOPE_FAILURE_END
    SCOPE_SUCCESS(void) { cout << "success" << endl; } SCOPE_SUCCESS_END
} 
```

此外，库具有[UNWINDING_AWARE_DESTRUCTOR](https://github.com/panaseleus/stack_unwinding#unwinding-aware-destructor)功能。[示例](https://github.com/panaseleus/stack_unwinding/blob/master/examples/unwinding_aware_destructor.cpp)：

```
struct DestructorInClass
{
    UNWINDING_AWARE_DESTRUCTOR(DestructorInClass,unwinding)
    {
        cout << "DestructorInClass, unwinding: "
             << ( unwinding ? "true" : "false" ) << endl;
    }
}; 
```

但是，在某些情况下，UNWINDING_AWARE_DESTRUCTOR 可能会[给出错误的结果](http://boost.2283326.n4.nabble.com/scope-exit-D-style-scope-failure-and-scope-success-in-C-tp4636441p4636477.html)（尽管范围（成功）和范围（失败）功能不受此类问题的影响）。

# html - 对于跨分辨率平台，字体大小（百分比）类似于 14px

> ID：13001794
> 
> 赞同：1
> 
> 时间：2012-10-21T20:19:10.497
> 
> 标签：html, css

我希望在我的网站中以百分比设置我的字体大小，因为我的整个网站都是基于宽度百分比的，并且可以像普通电脑显示器一样从移动设备上查看。

所以我希望获得类似于 14px 的字体大小百分比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:21:38.277

您应该考虑改用[em 单位](http://www.w3.org/WAI/GL/css2em.htm)。

# php - mysql union 或只加入一个查询

> ID：13001795
> 
> 赞同：2
> 
> 时间：2012-10-21T20:19:10.973
> 
> 标签：php, mysql, join, mysqli, union

我需要找到一种更好的方法来获得我们网店中每件商品价格的折扣，具体取决于客户拥有的价格表或价格表/折扣表。我认为这可以只用一个查询而不是我今天的 5 个查询来完成，但我真的不知道从哪里开始。

我们所有的客户都有一个价目表，有些客户同时有价目表和一个额外的折扣表。今天我们有大约 25 个不同的价格表和大约 100 个额外的折扣表。所有价目表的结构都相同；他们有一个价格组和百分比折扣。

例如价格表 01 可能看起来像

一个 20

乙 35

C 20

额外折扣清单以不同的方式构建，并且可以具有固定的价格或百分比。它还具有三个不同的优先级：基于商品代码的折扣（具有优先级 1）、基于类别（具有优先级 2）和基于价格组（具有优先级 3）。

折扣清单 0013 可能如下所示：

在文章选项卡中

PL-2344-444 40 (%)

P-0455-23 200 (瑞典克朗)

在类别选项卡中

C12 50 (%)

N12 35 (%)

今天我有三个不同的查询，看看我是否在折扣列表中获得成功：

首先，我检查我是否在优先级 1 中被击中：（FIXED 返回 f 和 PERCENTAGE r）

```
SELECT DISCOUNT, FIXED, PERCENTAGE FROM PUPRIREG 
WHERE ARTCODE = 'JO-23455' AND DISCOUNTLIST = '0013' 
```

如果上面返回 0，我做第二个查询，优先级 2：

```
SELECT DISCOUNT, FIXED, PERCENTAGE FROM PUPRIREG 
WHERE CATEGORY = 'C15' AND DISCOUNTLIST = '0013' 
```

最后一个优先级3：

```
SELECT DISCOUNT, FIXED, PERCENTAGE FROM PUPRIREG 
WHERE PRICEGROUP = 'F' AND DISCOUNTLIST = '0013' 
```

如果没有额外的折扣列表返回 0，我会从价格表中获得折扣

从 PUPRIREG 中选择折扣，其中 PRICELIST = '01' AND PRICEGROUP = 'F'

我调用如下函数 $discount = discount($articlecode, $category, $pricegroup);

```
function discount($articlecode, $category, $pricegroup){

$articlecode = sanitizingData($articlecode); 

$category = sanitizingData($category);

$pricegroup = sanitizingData($pricegroup);

// do priority 1

// prio 2

// prio 3

// pricelist

return $discount;

} 
```

如果有人能告诉我如何做到这一点，我会很高兴。我正在使用 mysqli 和 php。

非常感谢

最好的问候琳达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:38:58.753

您可以使用联合进行查询：

```
(SELECT DISCOUNT, FIXED, PERCENTAGE, 1 priority FROM PUPRIREG 
    WHERE ARTCODE = 'JO-23455' AND DISCOUNTLIST = '0013')
union
(SELECT DISCOUNT, FIXED, PERCENTAGE, 2 priority FROM PUPRIREG 
    WHERE CATEGORY = 'C15' AND DISCOUNTLIST = '0013')
union
(SELECT DISCOUNT, FIXED, PERCENTAGE, 3 priority FROM PUPRIREG 
    WHERE PRICEGROUP = 'F' AND DISCOUNTLIST = '0013')
union
(SELECT DISCOUNT, 0 fixed, 0 percentage, 4 priority FROM PUPRIREG
    WHERE PRICELIST = '01' AND PRICEGROUP = 'F')
order by priority; 
```

额外的人工`priority`列和顺序确保您获得正确排序的折扣。

# javascript - 为什么我不能从外部服务器加载外部脚本而 Modernizr.load 可以？

> ID：13001796
> 
> 赞同：1
> 
> 时间：2012-10-21T20:19:11.533
> 
> 标签：javascript, xmlhttprequest, modernizr

我一直有这个疑问，我想在从该 URL 加载脚本之前测试一个 URL 是否存在，但是我尝试这样做的方式失败了，因为我正在使用 XMLHTTPRequests 并且很多人都知道，当你使用此方法从服务器获取文件，它与执行 GET 的脚本不同，您将返回`is not allowed by Access-Control-Allow-Origin`.

那么，为什么`Modernizr.load()`方法理论上可以加载脚本，而我什至看不到那里是否真的有东西呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:30:45.807

Because `Modernizr.load()`, like @dm03514 mentions, loads the script not through XMLHttpRequest, but by inserting a `<script` tag **which doesn't have the cross-domain restriction**. It then tries to check if the script loaded correctly, but that's not an easy task and it may not be possible in all browsers. For more detail you can see this recopilation of the support of different browsers for the various options available for checking success of loading scripts/css: [http://pieisgood.org/test/script-link-events/](http://pieisgood.org/test/script-link-events/)

As for why XMLHttpRequest fails, you can read more about cross-domain restrictions at MDN: [https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

Some motivations for using script loaders are:

1.  Loading scripts based on conditions like what yepnope and YUI do
2.  Load scripts asynchronously for performance reasons ( tags block the rendering of the page).
3.  Dependency injection (load resources that other scripts need, this is what requirejs does)
4.  Load scripts when certain events happen (load hew functionality when a user clicks on a tab)

Also when you use script loaders, you usually load everything from them, including your application code, so that your application code has access to all dependencies. The require.js model (google AMD modules) is a great way of organizing your app. It allows you to write small modules that do specific tasks and reuse them, instead of one big file that does everything.

# scala - 播放框架异步结果

> ID：13001797
> 
> 赞同：3
> 
> 时间：2012-10-21T20:19:13.777
> 
> 标签：scala, asynchronous, playframework, playframework-2.0, variance

我改变了一个功能：

```
def submit = Action { request =>
  signupForm.bindFromRequest()(request).fold(
    // Form has errors
    errors => BadRequest(html.signup.form(errors)),

    // We got a valid User value, display the summary
    user => {
      // intensive computation involving database
      Ok("okay")
    }
  )
} 
```

至

```
def submit = Action { request =>
  val result = Akka.future {
    signupForm.bindFromRequest()(request).fold(
      // Form has errors
      errors => BadRequest(html.signup.form(errors)),

      // We got a valid User value, display the summary
      user => {
        // intensive computation involving database
        Ok("okay")
      }
    )
  }
  Async {
    result
  }
} 
```

我得到以下编译错误：

```
[error]  found   : play.api.mvc.SimpleResult[_ >: java.lang.String with play.api.templates.Html <: java.io.Serializable]
[error]  required: play.api.mvc.SimpleResult[_1(in value result)] where type _1(in value result) >: java.lang.String with play.api.templates.Html <: java.io.Serializable
[error] Note: java.io.Serializable >: _1, but class SimpleResult is invariant in type A.
[error] You may wish to define A as -A instead. (SLS 4.5)
[error]       signupForm.bindFromRequest()(request).fold(
[error]                                                 ^
[error] one error found 
```

错误消息似乎与方差有关。有谁明白发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:12:16.267

`BadRequest`正在返回类型`SimpleResult[Html]`
`Ok`正在返回类型`SimpleResult[String]`

如果您制作`BadRequest`并`Ok`返回相同的类型，那么它将起作用。

尝试做`Ok(Html("ok"))`- 或实际呈现页面。

# php - 全局访问变量

> ID：13001798
> 
> 赞同：0
> 
> 时间：2012-10-21T20:19:15.817
> 
> 标签：php, global-variables

用户登录后，我希望能够保存 userId 以供以后在应用程序中使用。我在应用程序中检索用户名的唯一位置是通过登录控制器从登录表单中获取。但是，我的应用程序中的结构是从登录控制器传递给我的主控制器的唯一内容是 HTML。

当然，我可以将 userId 包含在传递回主控制器的 HTML 内的隐藏字段中，但这似乎太 hacky。

那么，有没有一种方法可以保存一个值（在这种情况下是用户名），以便可以从其他类/命名空间/函数访问它？我读过一些关于“全球”的文章，但还没有设法让它在我的应用程序中工作。

**来自 LoginController.php：**

```
if ($loginView->TriedToLogin()){
    $loginUsername = $loginView->GetUserName();   //Retrieved from form
    $loginPassword = $loginView->GetPassword();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:33:37.297

Upon login, you need to store your user token in a session.

See: [http://au1.php.net/manual/en/features.sessions.php](http://au1.php.net/manual/en/features.sessions.php)

Store user when logging in:

```
$_SESSION['user_id'] = 32; // fetch from your user provider 
```

You can then write a class/function that utilises the session to check their login status and fetch their details when required.

Like so:

```
function getUserId()
{
    return isset($_SESSION['user_id']) ? $_SESSION['user_id'] : false;
}

function isLoggedIn()
{
    return isset($_SESSION['user_id']) && is_numeric($_SESSION['user_id']);
} 
```

Then use anywhere in your application:

```
echo isLoggedIn() ? getUserId() : 'Anonymous'; 
```

Also, for great information on how to build an MVC framework, check out "[Create your own framework... on top of the Symfony2 Components](http://fabien.potencier.org/article/50/create-your-own-framework-on-top-of-the-symfony2-components-part-1)".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:24:15.970

如果它只是您想要存储的用户名，我会选择`$_SESSION[]`.

它在（共享）托管环境中不是最安全的，但`session_start();`使用存储的数据在页面上调用第一件事非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:22:02.077

会议怎么样？

> PHP 中的会话支持包括一种在后续访问中保留某些数据的方法。

[http://de2.php.net/manual/en/features.sessions.php](http://de2.php.net/manual/en/features.sessions.php)

# matlab - 如何在Matlab中查找矩阵是否为奇异矩阵

> ID：13001800
> 
> 赞同：15
> 
> 时间：2012-10-21T20:19:51.657
> 
> 标签：matlab, matrix

我使用下面的函数从我的优化器中为给定的一组猜测 lambda 生成 beta。

运行时，我经常收到以下警告消息：

警告：矩阵对于工作精度来说是奇异的。在 NSS_betas 中 9 在 DElambda 在 19 在 Individual_Lambdas 在 36

我希望能够从解决方案集中排除任何形成奇异矩阵的 beta，但是我不知道如何测试它？

我一直在尝试使用 rcond() 但我不知道在哪里切断单数和非单数之间的界限？

当然，如果 Matlab 正在生成警告消息，它已经知道矩阵是否是单数的，所以如果我能找到该变量的存储位置，我可以使用它吗？

```
function betas=NSS_betas(lambda,data)

mats=data.mats2'; 
lambda=lambda;
yM=data.y2';
nObs=size(yM,1);
G= [ones(nObs,1) (1-exp(-mats./lambda(1)))./(mats./lambda(1)) ((1-exp(-mats./lambda(1)))./(mats./lambda(1))-exp(-mats./lambda(1))) ((1-exp(-mats./lambda(2)))./(mats./lambda(2))-exp(-mats./lambda(2)))];

betas=G\yM;
r=rcond(G);

end 
```

感谢您的建议：

在将 lambda 值设置为相等之后，我测试了下面的所有三个示例，因此得到了一个奇异矩阵

```
 if (~isinf(G))
  r=rank(G);
  r2=rcond(G);
  r3=min(svd(G)); 
 end 
```

r=3，r2=2.602085213965190e-16；r3=1.075949299504113e-15；

所以在这个测试中，rank() 和 rcond() 工作假设我采用下面给出的基准值。

但是，当我有两个接近但不完全相等的值时会发生什么？

我怎样才能决定什么是太接近了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T07:09:02.980

`rcond`是去这里的正确方法。如果它接近零的机器精度，则您的矩阵是奇异的。我通常会选择：

```
if( rcond(A) < 1e-12 )
    % This matrix doesn't look good
end 
```

您可以尝试使用适合您需要的值，但使用 MATLAB 对矩阵求逆，甚至接近奇异矩阵会产生垃圾结果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-21T20:27:32.173

您可以将 的结果`rank(G)`与 的列数进行比较`G`。如果秩小于列维数，您将有一个奇异矩阵。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T03:06:10.083

您还可以通过以下方式检查：

```
min(svd(A))>eps 
```

并验证最小奇异值是否大于 eps 或与您的需求相关的任何其他数值公差。（代码将返回 1 或 0）

[这里有更多关于它的信息](https://www.sciencedirect.com/science/article/pii/S0096300306009040)......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T16:09:24.963

条件编号`(Maximal singular value/Minimal singular value)`是另一个好方法：

```
 cond(A) 
```

它使用`svd`. 它应该尽可能接近 1。非常大的值意味着矩阵几乎是奇异的。`Inf`意味着它是精确的单数。

请注意，其他答案中提到的几乎所有方法都以某种方式使用`svd`：

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-09T07:42:09.050

有专门针对这个问题设计的工具，恰当地称为“秩揭示矩阵分解”。据我所知（虽然有点旧），判断`n x n`矩阵`A`是否非奇异的一个足够好的方法是使用

`det(A) <> 0 <=> rank(A) = n`

并使用 A 的秩揭示[QR 分解](https://en.wikipedia.org/wiki/RRQR_factorization)：

```
AP = QR 
```

其中`Q`是正交的，`P`是一个置换矩阵，`R`是一个上三角矩阵，具有对角元素的大小沿对角线减小的性质。

# sql - Codeigniter ActiveRecord 更新 SQL 错误

> ID：13001804
> 
> 赞同：0
> 
> 时间：2012-10-21T20:21:00.527
> 
> 标签：sql, codeigniter, activerecord

我正在研究 CI 2.1.3 并遇到以下问题。我在这里做错了什么？有没有我需要做或知道的阅读或知识。

### Codeigniter ActiveReocrd 更新语法

```
$data['spun'] = TRUE;
$this->db->update('registered', $data, 
                  "registered_id = $registration['registered_id']"); 
```

### 我所期望的

```
UPDATE `registered` SET `spun` = 1 WHERE `registered_id` = 1 
```

### CI 生成了什么

```
UPDATE `registered` SET `spun` = 1 WHERE `id` = 1 
```

### DB 表（括号内）

注册（**注册ID**，注册名称，...，旋转）；

### 编辑 1

我也尝试了以下方法，但 CI 给出了相同的 SQL。

```
$this->db->update('registered', $data, 
                  array('registered_id' => $registration['registered_id'])); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:41:26.900

我认为解决方案非常简单。你可以简单地这样做：

```
$data['spun'] = TRUE;
$this->db->update('registered', $data, 
                        array('registered_id' => $registration['registered_id']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:51:54.253

基于代码点火器文档：

[http://codeigniter.com/user_guide/database/active_record.html#update](http://codeigniter.com/user_guide/database/active_record.html#update)

你应该使用：

```
$data['spun'] = TRUE;
$this->db->where('registered_id', $registration['registered_id']);
$this->db->update('registered', $data); 
```

# android - 为什么这种布局不起作用？安卓

> ID：13001807
> 
> 赞同：-1
> 
> 时间：2012-10-21T20:21:10.957
> 
> 标签：android, listview

我有这个布局文件作为我的主要活动的布局。当我没有线性布局和中间的两个文本视图时，列表视图起作用了。但是，当我将它们放在文件中时，视图不会显示列表视图内容。谁能告诉什么问题？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

      <LinearLayout    
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal">
        <TextView
            android:id="@+id/today_header"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:layout_height="70dip"
            android:textColor="#dc6800"
            android:textSize = "20sp"
            android:paddingTop="12dip"
            android:paddingLeft="10dip"

           >
        </TextView>
        <TextView
            android:id="@+id/today_total"
            android:layout_width="fill_parent"
            android:layout_weight="3"
            android:layout_height="70dip"
            android:textSize = "6sp"
            android:textColor="#4A4A4A"
            android:paddingTop="20dip"
            android:paddingRight="25dip"
            android:textStyle="bold"
             />

    </LinearLayout>
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:26:31.910

这是因为 LinearLayout 设置为 `android:layout_height="fill_parent"` TextViews，它们占据了整个屏幕，因为您为它们设置了权重，因此 TextViews 的实际高度没有得到应用。

将其更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

      <LinearLayout    
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">
        <TextView
            android:id="@+id/today_header"
            android:layout_width="fill_parent"
            android:layout_weight="2"
            android:layout_height="70dip"
            android:textColor="#dc6800"
            android:textSize = "20sp"
            android:paddingTop="12dip"
            android:paddingLeft="10dip"

           >
        </TextView>
        <TextView
            android:id="@+id/today_total"
            android:layout_width="fill_parent"
            android:layout_weight="3"
            android:layout_height="70dip"
            android:textSize = "6sp"
            android:textColor="#4A4A4A"
            android:paddingTop="20dip"
            android:paddingRight="25dip"
            android:textStyle="bold"
             />

    </LinearLayout>
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:36:26.973

这将为您的每个元素提供屏幕高度的 1/3。使用 Layout_weight 的值来改变每个元素占据的 screen_height 的数量。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/today_header"
        android:layout_width="fill_parent"
        android:layout_weight="3"
        android:layout_height="0dip"
        android:textColor="#dc6800"
        android:textSize = "20sp"
        android:paddingTop="12dip"
        android:paddingLeft="10dip"

       >
    </TextView>
    <TextView
        android:id="@+id/today_total"
        android:layout_width="fill_parent"
        android:layout_weight="3"
        android:layout_height="0dip"
        android:textSize = "6sp"
        android:textColor="#4A4A4A"
        android:paddingTop="20dip"
        android:paddingRight="25dip"
        android:textStyle="bold"
         />

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="3"/>

</LinearLayout> 
```

# .net - C /CLI 数据表 AsEnumerable 未找到

> ID：13001812
> 
> 赞同：1
> 
> 时间：2012-10-21T20:21:37.397
> 
> 标签：.net, c++-cli

我正在尝试在 C++/CLI 中的 .Net 中的 DataTable 上使用 AsEnumerable 扩展方法，而 Intellisense 找不到它。我已经将 System.Data.DataSetExtensions 添加到项目的引用中。但这并没有改变什么。

当我在 C# 中尝试同样的事情时，它工作正常。

是否可以在 C++/CLI 中使用 AsEnumerable ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:24:30.367

C++/CLI 不支持扩展方法。您必须像普通方法一样调用这些方法在您的情况下，`System::Data::DataTableExtensions::AsEnumerable(dataTable)`.

# arrays - 逐行解析数组并将其分解为更多数组

> ID：13001814
> 
> 赞同：4
> 
> 时间：2012-10-21T20:21:50.803
> 
> 标签：arrays, perl, function, return

我仍然在学习 Perl，并且知道我还有很长的路要走，我一直在阅读 O'Reilly 的 Perl 书籍，还参加了一些关于 Udemy 的课程，甚至还完成了关于 Perl 的 Lynda 课程。

我正在尝试编写一个备份程序来满足我的需求，但我似乎很难使用我的一个功能。

```
sub list {
    my @zfs_temp = `zfs list`;
    foreach (@zfs_temp) {
    my ($name, $used, $available, $refer, $mount) = split(/\s+/);
    push(@name, $name);
    push(@used, $used);
    push(@available, $available);
    push(@refer, $refer);
    push(@mount, $mount);
#    print "@name, @used, @available, @refer, @mount\n";
    return (@name, @used, @available, @refer, @mount);
    }
} 
```

似乎我只回了一条线，我真的不确定我做错了什么，有人能指出我正确的方向吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:27:17.897

您的问题是您过早返回。

```
sub list {
    my @zfs_temp = `zfs list`;
    my (@name, @used, @available, @refer, @mount); #declared ahead of time and scoped appropriately 
    foreach (@zfs_temp) {
        my ($name, $used, $available, $refer, $mount) = split(/\s+/);
        push(@name, $name);
        push(@used, $used);
        push(@available, $available);
        push(@refer, $refer);
        push(@mount, $mount);
    }
    return (@name, @used, @available, @refer, @mount); #note how it's outside the loop now

 } 
```

否则，您只需在循环一次后返回，可能不是您想要的。

此外，您应该使用`my`. 否则 Perl 会抱怨`use strict`你应该始终使用它。

欢迎使用 Perl！

编辑：

正如 Joel 所指出的，您可能希望返回对这些数组的引用。这很容易做到，只需使用：

```
return (\@name, \@used, \@available, \@refer, \@mount); 
```

如果您对此感到困惑，请查看[perlref 。](http://perldoc.perl.org/perlref.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T20:30:01.720

您将在一次迭代后返回。将 return 放在循环之外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:46:38.997

数组可能非常笨拙，从这里看起来有点尴尬。这是一个更惯用的版本，它返回以挂载名称为键的散列的 hashref（并假设它们是唯一的）。我不必`zfs`测试，所以这是未经测试的，但它应该是正确的，并且`Dumper`电话应该清楚地说明发生了什么。

```
use strict;
use warnings;
use Data::Dumper;
$Data::Dumper::Terse = 1;

print Dumper( list() );

sub list {
    my %info;
    for ( qx { zfs list } )
    {
        my ( $name, $used, $available, $refer, $mount ) = split;
        $info{$name} = {
            used => $used,
            available => $available,
            refer => $refer,
            mount => $mount,
        };
    }
    \%info;
} 
```

如果你仍然要使用数组，这个语法会让返回变得不那么尴尬——

```
return \( @name, @used, @available, @refer, @mount ); 
```

# vb.net - 打印所有可滚动的文本框

> ID：13001816
> 
> 赞同：0
> 
> 时间：2012-10-21T20:21:55.373
> 
> 标签：vb.net, printing, streamreader

在 VB.NET 中编程还有另一个小问题。我有一个`TextBox`使用 .txt 从 txt 文件填充的`StreamReader`. 基本上我有一个打印选项，但只能打印中显示的内容`TextBox`，如果在`TextBox`更下方有更多信息需要滚动，则不会打印（希望这是有道理的！）。有什么办法可以解决这个问题，以便打印所有信息？

这是我的代码：

```
Imports System.Drawing.Printing

Public Class JobList
    Private Sub JobList_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim objReader As New System.IO.StreamReader("C:\test\JobLog.txt", True)
        txtJL.Text = objReader.ReadToEnd
        objReader.Close()
    End Sub

    Private Sub printText(ByVal sender As System.Object, ByVal ev As PrintPageEventArgs)
        Dim font As New Font("Arial", 16, FontStyle.Regular)
        ev.Graphics.DrawString(txtJL.Text, font, Brushes.Black, 100, 100)
    End Sub

    Private Sub btnPrint_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPrint.Click
        Dim printDoc As New PrintDocument
        AddHandler printDoc.PrintPage, AddressOf Me.printText
        printDoc.Print()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:34:44.867

[如何从`StreamReader`MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)上打印，向下滚动 - 有一个示例。它可能需要稍作修改才能从 a 打印`String`，然后您可以传入`TextBox.Text`它。或者只是使用原样并从`StreamReader`- 打印 - 无论如何应该得到相同的结果。

# javascript - 使用 javascript 创建和提交表单

> ID：13001830
> 
> 赞同：37
> 
> 时间：2012-10-21T20:22:52.390
> 
> 标签：javascript

我正在尝试创建一个表单并立即使用 javascript 提交它，但我无法弄清楚我做错了什么。这是我的代码：

```
function autoLogIn(un, pw) {
var form = document.createElement("form");
document.body.appendChild(form);
form.method = "POST";
form.action = "login.php";
var element1 = document.createElement("<INPUT NAME='un' TYPE='hidden' VALUE='"+un+"'>");  
 form.appendChild(element1);
var element2 = document.createElement("<INPUT NAME='pw' TYPE='hidden' VALUE='"+pw+"'>"); 
form.appendChild(element2);
form.submit();
} 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-10-21T20:28:12.953

问题是 createElement 不接受 HTML。它接受一个标记名并返回一个 DOM 元素。然后，您可以将此元素的 value 属性设置为您需要的值。

```
function autoLogIn(un, pw) {
    var form = document.createElement("form");
    var element1 = document.createElement("input"); 
    var element2 = document.createElement("input");  

    form.method = "POST";
    form.action = "login.php";   

    element1.value=un;
    element1.name="un";
    form.appendChild(element1);  

    element2.value=pw;
    element2.name="pw";
    form.appendChild(element2);

    document.body.appendChild(form);

    form.submit();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T20:32:59.477

Modified code: [jsfiddle](http://jsfiddle.net/C6SPh/1/).

```
function autoLogIn(un, pw) {
   var form = document.createElement("form");
   document.body.appendChild(form);
   form.method = "POST";
   form.action = "login.php";
   var element1 = document.createElement("INPUT");         
    element1.name="un"
    element1.value = un;
    element1.type = 'hidden'
    form.appendChild(element1);
    var element2 = document.createElement("INPUT");         
    element2.name="pw"
    element2.value = pw;
    element2.type = 'hidden'
    form.appendChild(element2);
    form.submit();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-09T18:24:36.110

您也可以进行 Saurabh Chauhan 响应，但不将动态元素添加到主体此解决方案是所有动态解决方案。

```
 var myform = document.createElement("form");
    myform.action = "myForm.aspx";
    myform.method = "post";

    product = document.createElement("input");
    product.value = "value";
    product.name = "name";

    myform.appendChild(product);
    myform.submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-06T16:31:50.167

我创建了一个函数来执行此操作：

```
function PostDataRedirect(data, dataName, location) {
var form = document.createElement("form");

form.method = "POST";
form.action = location;

if (data.constructor === Array && dataName.constructor === Array) {
    for (var i = 0; i < data.length; i++) {
        var element = document.createElement("input");
        element.type = "hidden";
        element.value = data[i];
        element.name = dataName[i];
        form.appendChild(element);
    }
} else {
    var element1 = document.createElement("input");
    element1.type = "hidden";
    element1.value = data;
    element1.name = dataName;
    form.appendChild(element1);
}

document.body.appendChild(form);

form.submit(); 
} 
```

提问的用法：

```
PostDataRedirect([ un, pw ], ["un", "pw"], "login.php"); 
```

# linux - nasm 等价于 set 指令

> ID：13001832
> 
> 赞同：0
> 
> 时间：2012-10-21T20:22:59.417
> 
> 标签：linux, assembly, nasm

有谁知道 nasm 是否具有与我习惯使用它的“set”指令等效的功能，因此根据 cmp 的结果在 eax 中设置位，但 nasm 似乎无法识别它，只是想知道是否有替代使用xor 并转向计算 cmp 的结果。我正在尝试执行以下操作

```
cmp eax,ecx
setl al
movzbl al,eax 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:16:02.887

这与 2012 年 3 月 12 日的 NASM 2.10 组装得很好：

```
; file: set.asm
bits 16

cmp ecx, eax
setl al
movzx eax, al 
```

我把它组装成`nasm -f bin set.asm`.

**编辑**：我在所有地方都颠倒了操作数的顺序，因为您似乎在编写代码时考虑到了 AT&T 语法（不适用于 NASM），其中操作数的顺序相反。

# c# - watIn - 在 winform 中使用计时器

> ID：13001833
> 
> 赞同：0
> 
> 时间：2012-10-21T20:23:13.127
> 
> 标签：c#, multithreading, timer, watin

我正在使用 WatiN 来处理我正在开发的应用程序。在应用程序中，我得到了一个网站列表：`List<string> sites;`

我有一个计时器，我每隔几秒就会运行一次，以加载和发送数据或从当前站点获取数据。

当我尝试运行此代码时，什么也没发生，甚至没有异常。我不知道为什么。

```
private void watiNMethod()
    {
        Settings.AutoStartDialogWatcher = false;

                Settings.AutoStartDialogWatcher = false;
                ie = new IE(webBrowser1.ActiveXInstance);

                ie.GoTo(sites[runing]);
                ie.WaitForComplete();
                MessageBox.Show("done loading");
    }

    int runing;
    Thread watInThread;
    private void button1_Click(object sender, EventArgs e)
    {
        timer = new System.Windows.Forms.Timer();

        timer.Start();

        watInThread = new Thread(watiNMethod);
        watInThread.SetApartmentState(ApartmentState.STA);

        runing = 0;

    }

    private void timer_tick(object sender, EventArgs e)
    {

        if (runing <= sites.Count)
        {
            watInThread.Start();
        }
        else
        {
            timer.Stop();
        }

        runing++;
    } 
```

我希望能够加载到 Web 浏览器控件，等待他使用 WatiN 方法完成，然后将数据发送到站点或只是从他那里获取数据。

我不知道怎么做，因为我必须使用线程在控件内运行 WatiN `WebBrowswer`。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:56:30.157

我不认为你在设置计时器。滴答？！？

```
timer = new System.Windows.Forms.Timer();
timer.Tick += new EventHandler(this.timer_tick);
timer.Start(); 
```

# objective-c - 大书呆子牧场目标-c：第18章-继承

> ID：13001836
> 
> 赞同：0
> 
> 时间：2012-10-21T20:23:38.723
> 
> 标签：objective-c

我目前正在通过“大书呆子牧场”一书学习objective-c。我重复了第 18 章中的代码，但我遇到了错误。使用 64 位 macos 10.6 巫婆实际版本的 xcode。

编译器说：

> 构建目标 BMITime
> 
> CompileC /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/Objects-normal/x86_64/main.o BMITime/main.m normal x86_64 目标- c com.apple.compilers.llvm.clang.1_0.compiler cd /Users/pm/Dropbox/objective-c/BMITime setenv LANG en_US.US-ASCII /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault。xctoolchain/usr/bin/clang -x objective-c -arch x86_64 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-缺少原型 -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -W括号 -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable - Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-选择器 -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10。 7.sdk -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10。7 -g -Wno-conversion -Wno-sign-conversion "-DIBOutlet=**属性**((iboutlet))" "-DIBOutletCollection(ClassName)=**属性**((iboutletcollection(ClassName)))" "-DIBAction=void)**属性**((ibaction)" -iquote /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/BMITime-generated-files.hmap -I/Users/ pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/BMITime-own-target-headers.hmap -I/Users/pm/Library/Developer/Xcode/ DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/BMITime-all-target-headers.hmap -iquote /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/中间体/BMITime.build/Debug/BMITime.build/BMITime-project-headers。hmap -I/Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Products/Debug/include -I/Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/ BMITime.build/Debug/BMITime.build/DerivedSources/x86_64 -I/Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/DerivedSources -F/ Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Products/Debug -include /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/PrecompiledHeaders/BMITime-Prefix- bbjacqhmgaerfrhblktcvkpzzntb/BMITime-前缀。pch -MMD -MT 依赖项 -MF /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/Objects-normal/x86_64/main.d --序列化诊断 /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/Objects-normal/x86_64/main.dia -c /Users/pm/ Dropbox/objective-c/BMITime/BMITime/main.m -o /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/Build/Intermediates/BMITime.build/Debug/BMITime.build/Objects-normal/ x86_64/main.obuild/Objects-normal/x86_64/main.dia -c /Users/pm/Dropbox/objective-c/BMITime/BMITime/main.m -o /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/构建/中间体/BMITime.build/Debug/BMITime.build/Objects-normal/x86_64/main.obuild/Objects-normal/x86_64/main.dia -c /Users/pm/Dropbox/objective-c/BMITime/BMITime/main.m -o /Users/pm/Library/Developer/Xcode/DerivedData/BMITime-cjqpmtvlmdoeiecyxbofznzjgpij/构建/中间体/BMITime.build/Debug/BMITime.build/Objects-normal/x86_64/main.o
> 
> /Users/pm/Dropbox/objective-c/BMITime/BMITime/main.m:21:10: 错误：'Employee' 没有可见的@interface 声明选择器'setWeightInKilos:' [person setWeightInKilos:96]；^ /Users/pm/Dropbox/objective-c/BMITime/BMITime/main.m:22:10: 错误：'Employee' 没有可见的@interface 声明选择器'setHeightInMeters:' [person setHeightInMeters:1.8]；^ /Users/pm/Dropbox/objective-c/BMITime/BMITime/main.m:26:22: 错误：'Employee' 没有可见的@interface 声明选择器'bodyMassIndex' float bmi = [person bodyMassIndex]; ^ 产生 3 个错误。

我的代码如下所示：

主文件

```
#import <Foundation/Foundation.h>
#import "Employee.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // Erstellt eine Instanz von Person
        Employee *person = [[Employee alloc] init];

        // Gibt den Instanzvariablen interessante Werte
        [person setWeightInKilos:96];
        [person setHeightInMeters:1.8];
        [person setEmployeeID:15];

        // Ruft die Methode bodyMassIndex auf
        float bmi = [person bodyMassIndex];
        NSLog(@"Employee %d has a BMI of %f", [person employeeID], bmi);

    }
    return 0;
} 
```

人.h

```
#import <Foundation/Foundation.h>

// Die Klasse Person erbt alle Instanzvariablen
// und Methoden, die von der Klasse NSObject definiert wurden
@interface Person : NSObject
{
    // Sie hat zwei Instanzvariablen
    float heightInMeters;
    int weightInKilos;
}
@property float heightInMeters;
@property int weightInKilos;

// Diese Methode berechnet den Body-Mass-Index
- (float)bodyMassIndex;
@end 
```

员工.h

```
#import <Foundation/Foundation.h>
#import "Person.h"

@interface Employee : NSObject
{
    int employeeID;
}
@property int employeeID;
@end 
```

员工.m

```
#import "Employee.h"

@implementation Employee

@synthesize employeeID;

@end 
```

人.m

```
#import "Person.h"

@implementation Person

@synthesize heightInMeters, weightInKilos;

- (float)bodyMassIndex
{
    //return weightInKilos / (heightInMeters * heightInMeters);
    float h = [self heightInMeters];
    return [self weightInKilos] / (h * h);
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:31:32.230

> error: no visible @interface for 'Employee' declares the selector 'setWeightInKilos'
> error: no visible @interface for 'Employee' declares the selector 'setHeightInMeters'
> error: no visible @interface for 'Employee' declares the selector 'bodyMassIndex'

Don't have the book, but it would seem to me that `Employee` should inherit `Person`, not `NSObject`.

That would give `Employee` the missing properties/function by inheritance.

# python - 将内置函数重定向到包装类

> ID：13001846
> 
> 赞同：0
> 
> 时间：2012-10-21T20:24:42.970
> 
> 标签：python, python-3.x

我想创建一个包装类，其行为方式与包装对象完全相同（有一些特定例外）。我目前遇到的问题是内置函数。如何将内置函数重定向到包装对象？

```
class Wrapper:
    def __init__(self, wrapped):
        object.__setattr__(self, '_wrapped', wrapped)
    def __getattr__(self, name):
        return getattr(object.__getattribute__(self, '_wrapped'), name)

class Foo:
    def __init__(self, val):
        self.val = val
    def __abs__(self):
        return abs(self.val)

foo = Wrapper(Foo(-1))
print(foo.val) # Okay
print(abs(foo)) # TypeError: bad operand type for abs(): 'Wrapper' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:37:42.950

您可以动态创建一个新类，它是 and 的子类`Wrapper`，`Foo`因此您将拥有所需的所有属性：

```
class Wrapper:
    def __new__(self, wrapped):
        cls = type(wrapped)
        new_type = type(cls.__name__ + '_wrapped', (Wrapper, cls), {})
        return object.__new__(new_type)

    def __init__(self, wrapped):
        self._wrapped = wrapped
    def __getattr__(self, name):
        return getattr(self._wrapped, name) 
```

所以现在你可以这样做：

```
>>> foo = Wrapper(Foo(-1))
>>> abs(foo)
1
>>> type(foo)
<class '__main__.Foo_wrapped'> 
```

PS：

*   您不需要`object.__getattr__`（或`__setattr__`）在`__init__`and`__getattr__`函数中获取和设置此属性。
*   您可能希望缓存此操作以避免在每个新对象上创建一个新类。

# macos - Mac OS X 上用于 gnuplot 的 wxt 终端

> ID：13001847
> 
> 赞同：2
> 
> 时间：2012-10-21T20:24:54.343
> 
> 标签：macos, gnuplot, macports

我已经使用 安装`gnuplot`在我的 Mac OS X 10.8 上`MacPort`，但据我了解，`AquaTerm`现在只有终端可供我使用（`wxt`是“未知或模棱两可的终端类型”）。但是，我`wxt`非常需要终端。是否可以使用（或不使用）安装一些补丁`MacPort`，以便启用此终端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:22:35.913

卸载当前版本的 Gnuplot，然后安装 gnuplot 的`+wxt` **变体**。

`port variants gnuplot`列出可用的变体。

`sudo port install gnuplot +wxwidgets`安装这个变体，但要小心它可能与`wxwidgets_devel`.

# vba - 从 Vba 中的多个工作表中收集平均值

> ID：13001856
> 
> 赞同：2
> 
> 时间：2012-10-21T20:26:08.270
> 
> 标签：vba, excel

我需要从几个工作表中计算某个范围的平均值（“C2：C11”）到一个新的工作表中。如果添加了新工作表并将数据输入到指定范围，该功能应该仍然有效。

到目前为止我有这个

……

```
Sheets.Add

Dim myavg As Collection
Set myavg = New Collection

For Each wsheet In Worksheets
   myavg.Add wsheet.Range("B2:B11")
Next    
For i = 1 To myavg.Count
   avg1 = Application.WorksheetFunction.Average(Range("B2:B11"))
Next

curColumn = 5
curRow = 4

For i = 1 To myavg.Count
   ActiveSheet.Cells(curRow, curColumn).Value = avg1
   curRow = curRow + 1
Next 
```

...

它将一个数字返回到新工作表的所需范围内，并且不准确

请帮助我理解我做错了什么。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:27:33.240

先不管 a 是否`Collection`适合这个任务，让我们检查一下你的代码：

一般
您可能已经这样做了，但它警告重复
使用`Option Explicit`并标记所有变量

*你的代码*

```
Sheets.Add 
```

`Worksheet`这会在 active中添加一个新的`Workbook`，并将其放在当前活动的工作表之前，然后激活新工作表。
**问题：** 您依靠默认行为来获取新的`Worksheet`，您无法确定新工作表的位置，并且您没有参考它。
**建议：**
获取对工作簿对象的引用并在整个代码中使用它

```
Dim wb As Workbook
Set wb = ActiveWorkbook 
```

控制添加到工作簿的内容、位置和方式

```
Dim wsSummary as Worksheet
Set wsSummary = wb.Worksheets.Add(After:=wb.Worksheets(wb.Worksheets.Count))
wsSummary.Name = "Summary" 
```

* * *

*你的代码*

```
For Each wsheet In Worksheets
    myavg.Add wsheet.Range("B2:B11")
Next 
```

这会从书中的每个内容中创建一个`Collection`of ，包括我们刚刚创建的那个。我猜你不想包括那个。为了便于维护，您应该创建一个变量来保存范围并在整个代码中使用它。让我们应用上述内容`Range``Worksheet`

```
Dim wsheet as WorkSheet
Dim RangeAddress As String
RangeAddress = "B2:B11"
For Each wsheet In wb.Worksheets
    If wsheet.name <> wsSummary.Name Then
        myavg.Add wsheet.Range(RangeAddress)
    End If
Next 
```

* * *

*你的代码*

```
For i = 1 To myavg.Count
    avg1 = Application.WorksheetFunction.Average(Range("B2:B11"))
Next 
```

**问题：** 您正在迭代`Collection`但没有在循环中引用它。每次通过您计算`avg1`，然后在下一个循环中覆盖它。
每次通过循环时，您都会计算活动工作表上某个范围的平均值（这将是刚刚添加的空白新 工作
**表**
）连续的行。因此，让我们将平均值存储在一个数组中，以便稍后放在汇总表上。请注意，如果任何一个`Range`为空，`Average`将导致错误。

```
Dim avg() as Variant
Redim avg(1 to myavg.Count, 1 To 1)
For i = 1 To myavg.Count
    avg(i, 1) = Application.WorksheetFunction.Average(myavg(i))
Next 
```

* * *

*你的代码*

```
curColumn = 5
curRow = 4

For i = 1 To myavg.Count
    ActiveSheet.Cells(curRow, curColumn).Value = avg1
    curRow = curRow + 1
Next 
```

**问题：**
此代码只是将最后计算的值`avg1`放在连续的行上

将结果放到新工作表上：将平均值收集到一个数组中，让我们把它放到工作表上

```
Dim curColumn as Long, curRow As Long
curColumn = 5
curRow = 4

wsSummary.Cells(curRow, curColumn).Resize(UBound(avg, 1), 1) = avg 
```

* * *

到目前为止，没有被删除的是`Error Handling`. 代码出错的方式有很多种，因此将其包含`Error Handling`在代码中是明智之举。例如，如果已经有一个名为“摘要”的工作表怎么办？如果`Average`返回错误怎么办？

* * *

谈到这是否是一个好方法，应该清楚的是，在创建了一个数组来保存结果之后，可以在工作簿的传递中填充该数组。

像这样的东西

```
Sub Demo()
    Dim wb As Workbook
    Set wb = ActiveWorkbook

    Dim RangeAddress As String
    RangeAddress = "B2:B11"

    Dim wsSummary As Worksheet

    Dim avg() As Variant
    ReDim avg(1 To wb.Worksheets.Count, 1 To 1)
    For i = 1 To UBound(avg, 1)
        With wb.Worksheets(i).Range(RangeAddress)
            If WorksheetFunction.Count(.Value) > 0 Then
                avg(i, 1) = WorksheetFunction.Average(.Value)
            Else
                avg(i, 1) = "No Values On Sheet"
            End If
        End With
    Next

    Dim curColumn As Long, curRow As Long
    curColumn = 5
    curRow = 4

    On Error Resume Next
    Set wsSummary = wb.Worksheets("Summary")
    If Err.Number <> 0 Then
        ' Summary sheet does not exist, create it
        Err.Clear
        On Error GoTo 0
        Set wsSummary = wb.Worksheets.Add(After:=wb.Worksheets(wb.Worksheets.Count))
        wsSummary.Name = "Summary"
    Else
        On Error GoTo 0
        ' Summary sheet already exists
        ' what do you wnat to do?
    End If

    wsSummary.Cells(curRow, curColumn).Resize(UBound(avg, 1), 1) = avg

End Sub 
```

此代码可能仍然存在问题，具体取决于您的确切要求（例如，如果“摘要”表已经存在，这将在平均循环中处理它）

# mysql - 如果记录存在则添加 WHERE 子句

> ID：13001859
> 
> 赞同：2
> 
> 时间：2012-10-21T20:26:14.577
> 
> 标签：mysql, left-join, exists

我正在处理一个查询，其中我有三个要加入的表，但是第三个表可能有也可能没有相关记录。

我目前有：

```
 SELECT table1.val, table2.val, table.3.val 
  FROM
      table1
      LEFT JOIN table2
          ON table1.val = table2.val
      LEFT JOIN table3 
          ON table.3.val = table2.val
  WHERE
      table1.name = "name" 
      AND table3.name = 'certain name'
  ORDER BY table1.val ASC 
```

我怎样才能写这个，以便如果`'certain name'`不存在，则从and子句`table3`中省略该部分？我实际上选择了更多字段，但这应该足以说明问题。`WHERE``SELECT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:33:50.517

如果您的意思是结果表单`table3`应该只可见，如果`table3.val`等于`table2.val`AND`table3.name`应该等于`'certain name'`，那么这将适合您：

```
SELECT table1.val, table2.val, table.3.val 
FROM table1
LEFT JOIN table2
ON table1.val = table2.val
LEFT JOIN table3 
ON table.3.val = table2.val AND table3.name = 'certain name'
WHERE table1.name = "name" 
ORDER BY table1.val ASC 
```

毕竟，这`LEFT JOIN`是为了……

# java - java swing相交线与圆点

> ID：13001866
> 
> 赞同：2
> 
> 时间：2012-10-21T20:26:39.413
> 
> 标签：java, swing, math, geometry

> **可能重复：**
> [圆线碰撞检测](https://stackoverflow.com/questions/1073336/circle-line-collision-detection)

我有个问题。我需要找到A点。 ![在此处输入图像描述](../Images/271c16bffeed11e81edd19fbdb772a09.png)

我怎样才能做到最好？

编程语言是Java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:46:54.753

给定：圆心 C=[x2,y2] 和半径 R 从 C 到 B=[x1,y2] 的线段计算它们的交点。

这很容易，因为端点之一是圆的中心。您必须从 C 向 B 走 R 的距离。距离保证您最终会在圆上，方向保证您最终会在射线 C->B 上。您仍然需要检查交叉点是否位于路段上。

如果您有矢量库，这是伪代码

```
- offset = B-C
- if length_square(offset) < R^2 output "no intersection"
- offset_a = normalize(B-C) * R
- output C + offset_a 
```

没有库，代码会更长：

```
- off_x = x1-x2;
- off_y = y1-y2;

- ls = off_x*off_x + off_y*off_y
- if ls < R*R
-- return an empty array, meaning "no intersections"

- scale = R / sqrt(ls)
- res_x = off_x * scale + x2
- res_y = off_y * scale + y2
- return [[off_x, off_y]] 
```

# java - 如何更改maven的java路径

> ID：13001867
> 
> 赞同：0
> 
> 时间：2012-10-21T20:26:40.080
> 
> 标签：java, maven-2, mahout

我正在尝试使用 maven2 编译 mahout，但出现错误：“嵌入式错误：未找到 tools.jar：/usr/lib/jvm/java-6-openjdk-i386/jre/../lib/tools。 jar”所以我想如果我将路径从jre更改为jdk，就会找到tools.jar。但问题是如何改变maven2的路径？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:14:01.750

我在另一个线程中找到了解决方案： [Why maven ignores my JAVA_HOME?](https://stackoverflow.com/questions/3350722/why-maven-ignores-my-java-home)

重新安装 jdk 也对我有用： sudo apt-get install openjdk-6-jdk

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T22:27:19.423

You will need both Java JDK and JRE.

${java.home} specifies the path to the current JRE_HOME environment use with relative paths to get for example: ${java.home}../bin/java.exe

And with a JDK for example in c:\jdk the maven ${java.home} is pointing to c:\jdk\jre

# node.js - 如何从 Socket.IO 向数组 (MongoDB) 添加数据？(node.js)

> ID：13001871
> 
> 赞同：3
> 
> 时间：2012-10-21T20:27:17.863
> 
> 标签：node.js, mongodb, express, socket.io, mongoose

我有以下 MongoDB Schema

```
//MongoDB Schema    

var Line = new Schema({
    id    : Number,
    user  : String,
    text  : String,
});

var Story = new Schema ({
    sid: {type: String, unique: true, required: true},
    maxlines: {type: Number, default: 10}, // Max number of lines per user
    title: {type: String, default: 'Select here to set a title'},
    lines: [Line],
}); 
```

对于一个特定的故事，MogoDB 中的数据如下所示：

```
{
__v: 0,
_id: ObjectId("5084559945a0a23c1b000002"),
lines: [{
        "id": 1,
        "user": "Joe",
        "text": "This is line number 1"
    },
    {
        "id": 2,
        "user": "Adam",
        "text": "This is line number 2"
    },
    {
        "id": 3,
        "user": "John",
        "text": "This is line number 3"
    },
],
maxlines: 10,
sid: "lJOezsysf",
title: "A New Story!"
} 
```

我正在使用 Socket.Io 与服务器通信并将消息推送给其他用户

```
// when the client emits 'sendline', this listens and executes
    socket.on('sendline', function (data) {
        // we tell the client to execute 'updatestory' with 2 parameters
        io.sockets.in(socket.room).emit('updatestory', socket.username, data);  
        Story.findOne({ sid: socket.room }, function(err, story){

           **    What would go here to update MongoDB? **

            console.log(socket.room);
        });
    }); 
```

我如何使用上述内容从 socket.io 添加数据并将其保存到 MogoDB？

```
socket.room has the same value as sid on Mongo so it finds the correct entry.
socket.username = user
data = text 
```

我尝试使用以下内容来保存数据，但出现错误，我希望它在“Line”数组中创建一个具有下一个 id 的新条目。

```
Story.Lines.User = socket.username;
Story.Lines.text = data;
Story.save(); 
```

我将使用什么方法将其推送到数据库？

***** 编辑*******

 **设法让它工作，好像我使用的是故事而不是故事。

我在下面使用的代码：

```
 Story.findOne({ sid: socket.room }, function(err, story){   
    story.lines.push({ 
    user: socket.username, 
    text: data,
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:55:15.163

```
Story.findOne({ sid: socket.room }, function(err, story){
    story.foo = socket.room.foo;
    story.save(function(err, story){
      res.send("Story updated");
    });
}); 
```**

# ruby - soap4r - 未初始化的常量 REXML::Element

> ID：13001872
> 
> 赞同：2
> 
> 时间：2012-10-21T20:27:21.347
> 
> 标签：ruby, soap4r

我正在尝试在我的 rails 项目（ruby 版本 1.9.3）中使用 soap4r 和 jira4r

在 Gemfile 我有：

```
gem 'soap4r', :git => 'git://github.com/felipec/soap4r.git'
gem 'jira4r-jh' 
```

当我尝试在我的模型中运行时

```
require "jira4r/jira-tool"

model Mymodel

  def mydef

    jira = Jira4R::JiraTool.new(2, "http://my.website.com/")
    jira.login("test@test.com","password")

  end
end 
```

我收到一个错误：

```
uninitialized constant REXML::Element

rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:129:in `_obj2soap'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:54:in `block (2 levels) in objs2soap'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:52:in `upto'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:52:in `block in objs2soap'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:560:in `block in protect_mapping'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:533:in `protect_threadvars'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:549:in `protect_mapping'
rubyjedi-soap4r (1.5.8.01) lib/soap/mapping/mapping.rb:51:in `objs2soap'
rubyjedi-soap4r (1.5.8.01) lib/soap/rpc/proxy.rb:475:in `request_rpc_enc'
rubyjedi-soap4r (1.5.8.01) lib/soap/rpc/proxy.rb:457:in `request_rpc'
rubyjedi-soap4r (1.5.8.01) lib/soap/rpc/proxy.rb:412:in `request_body'
rubyjedi-soap4r (1.5.8.01) lib/soap/rpc/proxy.rb:127:in `call'
rubyjedi-soap4r (1.5.8.01) lib/soap/rpc/driver.rb:151:in `call' 
```

但是如果我在独立的非 Rails ruby​​ 项目中运行相同的代码，它可以正常工作。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:44:43.463

通过添加固定

```
require 'rexml/document' 
```

# sql - 是否可以使用另一个表中的值作为 DATEADD 函数中的间隔？

> ID：13001876
> 
> 赞同：0
> 
> 时间：2012-10-21T20:27:53.913
> 
> 标签：sql, sql-server, case, where, dateadd

我有一个包含日期（smalldatetime）的**事件表。**我有一个**间隔**表（int）（几天前）应该发送提醒的时间 - `DATEADD(D, *interval*, GETDATE())`。

我正在尝试编写一个 SQL 语句来获取今天应该发送提醒的所有事件（基于`GETDATE()`DATEADD 函数。这不是我首先获取所有间隔并在循环中运行 SQL，将每个间隔传递为DATEADD 函数中的参数。

有什么想法我会怎么做？

```
**dbo.events**
id (int) PK
date (smalldatetime)
customerID (int)

**dbo.intervals**
id (int) PK
daysBefore (int)
customerID (int) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T20:34:58.520

是的。你应该自己尝试过

```
create table t(val int);
insert into t values(4),(7),(10)

select DATEADD(D, val, GETDATE()) from t 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/1d74a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:33:51.377

答案是肯定的。由于缺少提供的信息，我无法为您绘制此查询。但是，是的，你可以。

举个例子：

```
MyTable:
ID    Interval    Date
1     1           10-10-2001

SELECT ID, DATEADD(D, Interval, GETDATE()) AS NewDate FROM MyTable

SELECT e.*
FROM [events] e
INNER JOIN [interval] i on e.customerID = i.customerID
WHERE e.date = DATEADD(D, i.daysBefore, 
                   DATEADD(D, 0, 
                       DATEDIFF(D, 0, GETDATE()))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T20:42:26.080

感谢大家展示这是如何可能的。我想这将是如何编写 SQL，除非有更有效的方法？

```
SELECT *
FROM events
WHERE date IN (
    SELECT DATEADD(D,daysBefore,DATEADD(D, 0, DATEDIFF(D, 0, GETDATE())))
    FROM interval
    WHERE events.customerID = customerID); 
```

**[SQLFiddle](http://sqlfiddle.com/#!3/ba053/4)**

# c# - asp.net c#中的类魔术方法，如php

> ID：13001879
> 
> 赞同：0
> 
> 时间：2012-10-21T20:28:12.483
> 
> 标签：c#, asp.net

我知道很多 php，但我是 asp.net 的新手。

在 asp.net 中，诸如 php?(__construct()、__isset() __get() __set() __destruct() 等类中存在魔术方法，例如，我如何在 asp.net c# 中做到这一点：

```
class foo
{
    public $name;

    public function __contruct($name){
        $this->name = $name;
    }

    public function getName(){
        return $name;
    }
}

$test = new Foo("test");
echo $test->getName(); //prints test 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-14T07:44:21.307

如果您真的缺少魔法方法，您可以在 C# 中创建一个动态基类（前提是您使用的是 .NET 4.0+）：

```
 public abstract class Model : DynamicObject
{
    public virtual object __get(string propertyName)
    {
        return null;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        if ((result = this.__get(binder.Name)) != null)
            return true;
        return base.TryGetMember(binder, out result);
    }

    public virtual void __set(string propertyName, object value)
    {
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        this.__set(binder.Name, value);
        return true;
    }
} 
```

创建一个派生自该类型的新类型并使用“动态”关键字进行实例化：

```
dynamic myObject = new MyModelType();

myObject.X = 42;  //  calls __set() in Model
Console.WriteLine(myObject.X); //  calls __get() in Model 
```

简而言之，如果您愿意，您可以在 C# 中实现非常相似的行为（请参阅MSDN 上的[DynamicObject](https://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject(v=vs.100).aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:44:43.633

```
class Foo
{
    private string name;  //don't use public for instance members

    public Foo(string name){
        this.name = name;
    }

    public string getName
    {
      get{
        return this.name;
      }
    }
}

Foo test = new Foo("test");

Console.WriteLine(test.getName); 
```

*   在C#中，Constructor是一个与类名同名且没有返回类型的函数

*   您可以在变量前面加上它们的数据类型，例如`int x`,`string y`或`var xyz`;

*   没有像 Java/PHP 中的 getter/setter 方法，它使用属性。所以属性不会有 getXXX() 或 setXXX() 。这是您设置属性的方式

例子

```
string _name;
public string Name
{
    get { return _name; }
    set { _name = value; }
}

//Usage

Foo f = new Foo();
f.Name = "John";
string name = f.Name; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-21T20:42:00.720

C# 中的等价物是这样的：

```
public class Foo
{
  public string Name { get; set; }

  public Foo(string name)
  {
    Name = name;
  }

  public string GetName()
  {
    return Name;
  }
}

var test = new Foo("test");
Console.WriteLine(test.GetName()); 
```

如您所见，C# 中有“魔法”。我已经帮助你入门，所以现在你可以去学习 C#。

# c++ - std::ostringstream 和 flush 成员函数

> ID：13001880
> 
> 赞同：0
> 
> 时间：2012-10-21T20:28:22.243
> 
> 标签：c++

为什么这么多人在这样的情况下对 std::ostringstream 对象使用 flush() 成员函数：

```
#include <iostream>
#include <sstream>

int main()
{
   float f = 12.345f / 100;
   std::ostringstream ios;
   ios << f;
   ios.flush();
   std::cout << f << " : " << ios.str() << std::endl;
} 
```

没有此调用的输出将是相同的。

所以为什么？我什么时候应该使用 flush() 成员函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:30:36.560

There is no good reason to use flush in that situation. I'd be interested to know where these so many people are. Personally I can't recall ever seeing flush used like that.

Most of the time I would put code like that down to superstition. Someone had a bug, which they never understood, but they tried flush and mysteriously the bug went away. Using flush wasn't the real reason the bug went away but it's use stuck.

You should use flush on a buffered stream when you want to buffered data to be output immediately.

# jquery - 将 Head.js 与 jQuery Mobile 集成的问题

> ID：13001881
> 
> 赞同：0
> 
> 时间：2012-10-21T20:28:23.327
> 
> 标签：jquery, jquery-mobile, head.js

我正在尝试将 head.js 的 javascript 加载器部分与我的 JQM 网站集成。

我有几个问题：

1.  在某些页面上，我看到我尝试加载的脚本块在页面上加载了 3-4 次 head.js。
2.  在所有页面上，我都看到了大量无样式内容 (FOUT)。样式最终会加载。

以下是说明每个问题的一些示例代码：

```
 <!DOCTYPE html> 
    <html> 
    <head> 
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Main Menu</title> 

    <!-- JQM CSS -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

    <!-- Custom Theme CSS -->
    <link rel="stylesheet" href="themes/cayce.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css" />

    <script src="js/head.load.min.js"></script>
    <script>
    head.js("http://code.jquery.com/jquery-1.8.2.min.js", "js/custom.js", "http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js");
    </script>

    </head>  
    <body>
    <div data-role="page" id="landing">

    <div data-role="header">
    <h1>Main Menu</h1>
    <div class="header-sub">
    <div class="logo">
    <a href="WebCatPageServer.exe?Landing">
    <img src="themes/images/logo.png" width="100" height="49" alt="Company Logo">
    </a>
    </div>
    </div>

    <!-- Search Bar-->
    <div class="ui-body ui-body-b">
    <fieldset>
    <form name="Search" id="searchform" method="post" action="WebCatPageServer.exe">
    <input name="Action" type="hidden" value="Search"/>
    <input name="PrevSearchText" type="hidden" value="" />
    <input name="Start" type="hidden" value="1" />
    <input name="New" type="hidden" value="YES" />
    <input name="Refine" type="hidden" value="NO" />
    <label for="search-basic"></label>
    <input type="search" name="Search Term" id="search-basic" placeholder="Enter Part #'s or Keywords" tabindex="1"/>
    </form>
    </fieldset>
    </div><!-- /Search Bar -->

    </div><!-- /header -->

    <div data-role="content">
    <ul data-role="listview" data-inset="true">
    <li><a href="SPI_TOCLink" data-theme="c">Browse Products</a></li>

    <!-- SPI_HTML_ShowSearchMenu -->
    <li><a href="SPI_SearchLink" id="SPI_CurrMenuSearch" data-prefetch>SPI_SearchMenuText</a></li>
    <!-- SPI_HTML_ShowSearchMenu -->

    <!-- SPI_HTML_AllowKits -->
    <li><a href="SPI_KitsLink" data-theme="c" id="viewjobs" data-prefetch>View Jobs</a></li>
    <!-- SPI_HTML_AllowKits -->

    <!-- SPI_HTML_AllowOrderPlacement -->
    <li><a href="SPI_ShopingCartLink" data-theme="c" data-prefetch>Shopping Cart</a></li>
    <!-- SPI_HTML_AllowOrderPlacement -->

    <!-- SPI_HTML_AllowSales -->
    <li><a href="SPI_SalesLink" id="SPI_CurrMenuSales" data-prefetch>SPI_SalesMenuText</a></li>
    <!-- SPI_HTML_AllowSales -->

    <!-- SPI_HTML_ShowMyAccountMenu -->
    <li><a href="SPI_MyAccountLink" data-theme="c" data-prefetch>SPI_MyAccountMenuText Dashboard</a></li>
    <!-- SPI_HTML_ShowMyAccountMenu -->

    <li><a href="SPI_LogoutLink">Logout</a></li>

    </ul><!-- /listview -->
    </div><!-- /Content--> 

    <div data-role="footer">

    </div><!-- /footer -->
    </div><!-- /page -->
    </body>
    </html>

     <!DOCTYPE html> 
        <html> 
        <head> 
        <meta charset="ISO-8859-1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
        <title>Login</title> 

        <!-- JQM CSS -->
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

        <!-- Custom Theme CSS -->
        <link rel="stylesheet" href="themes/cayce.css" />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/custom.css" />

        </head>  
        <body>
        <div data-role="page" id="login">

        <div data-role="header">
        <h1>Login</h1>
        <div class="header-sub">
        <div class="logo">
        <a href="WebCatPageServer.exe?Landing">
        <img src="themes/images/logo.png" width="100" height="49" alt="Company Logo">
        </a>
        </div>
        </div>
        </div>

        <div data-role="content">
        <div class="ui-bar text-center">
        <p>Please enter your <strong>Username</strong> and <strong>Password</strong> below to log in to the SPI_Cname Mobile Web Store.</p>
        </div>

        <!-- SPI_HTML_UnknownLogin
        <div class="ui-bar ui-bar-e text-center">
        <br>
        <h2>Please Try Again</h2>
        <p>Either the Username or Password you entered doesn't match our records. Please try logging in again.</p>
        </div>
        <br>
        SPI_HTML_UnknownLogin -->

        <!-- SPI_HTML_ExpiredLogin
        <div class="ui-bar ui-bar-e text-center">
        <br>
        <h2>Please Log In Again</h2>
        <p>Either your session has expired or you logged in on another computer. Please log in again.</p>
        </div>
        <br>
        SPI_HTML_ExpiredLogin -->

        <!-- SPI_HTML_SessionLogout
        <div class="ui-bar ui-bar-e text-center">
        <br>
        <h2>You've Logged Out.</h2>
        <p>You have successfully logged out of SPI_Cname online.</p>
        </div>
        <br>
        SPI_HTML_SessionLogout -->

        <div class="ui-body ui-body-c">
        <form name="Form" method="post" action="WebCatPageServer.exe">
        <input name="Action" type="hidden" value="Login" class="hidden" />
        <input name="Request" type="hidden" value="SPI_PageRequest" />

        <div data-role="fieldcontain">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" tabindex="1" value=""/>
        </div>

        <div data-role="fieldcontain">
        <label for="password">Password</label>
        <input type="password" name="password" id="password" tabindex="2" value=""/>
        </div>

        <div data-role="controlgroup" style="width:100%; text-align:center">
        <input name="loginbutton" type="submit" data-theme="b" style="width:100%;" value="Sign In" tabindex="3"/>
        </div>

        </form>
        </div><!-- /ui-body ui-body-c -->

        <br>

        <ul data-role="listview" data-inset="true">
        <!-- SPI_HTML_GuestLogin
        <li><a href="href="javascript:document.Form.Username.value='guest';document.Form.Password.value='guestpassword';document.Form.submit();">Guest Login</a></li>
        SPI_HTML_GuestLogin -->
        <li><a href="tel://SPI_CPNum">Call Us: SPI_CPNum</a></li>
        <li><a href="WebCatPageServer.exe?Account_Request" id="accountrequest">Request Online Account</a></li>
        </ul><!-- /listview -->

        </div><!-- /content -->

        <div data-role="footer">

        </div><!-- /footer -->

        <!-- Start headjs -->
        <script src="js/head.load.min.js"></script>
        <script>
        head.js("http://code.jquery.com/jquery-1.8.2.min.js", "js/custom.js", "http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js", function() {
        $('#login').on('pageshow', function () {
        $(':input:visible:enabled:first').focus();
        });

        });<!-- End headjs -->
        </script>  
        </div><!-- /page -->
        </body>
        </html> 
```

需要注意的几点：

1.  我在全球范围内禁用了ajax。
2.  我正在使用单页模板（多页）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:05:09.250

FOUC/FOUT 是 jQuery Mobile 和 jQuery UI 等框架的典型代表，因为一旦 dom 准备好，它们就会以编程方式应用样式。

尝试删除 headJS，并直接插入您的 jquery & mobile。如果没有区别，那只是因为它们就是这样工作的。

如果您仍然看到 FOUC/FOUT，请尝试查看一些框架，例如 320up、bootstrap 和类似的，因为它们是基于 CSS 的框架，而不是基于 javascript 的框架。

黄金法则通常是 CSS 在 TOP，JS 在 BOTTOM

# php - how to store array data with commas in db?

> ID：13001888
> 
> 赞同：-1
> 
> 时间：2012-10-21T20:29:18.533
> 
> 标签：php, mysql, phpmyadmin

Iam trying to insert Array data (ie., checkbox values) into Mysql db (using Phpmyadmin)

when I try to store, iam getting as 'Array' for the field "forms" in db..

please someone tell me what changes I have to do for the below code, so I can store all the array values (seperated with commas in my db)

here is the code:

```
if(isset($_POST['forms']) && $_POST['forms']!=''){
        $table = $wpdb->prefix . "eshop_orders";
        $forms=$wpdb->escape($_POST['forms']);

        $query1=$wpdb->query("UPDATE $table SET forms='$forms' where checkid='$checkid' limit 1");
    } 
```

waiitng for replies..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:33:50.667

Since `$forms` is an array, you either need to [`serialize()`](http://php.net/serialize) it or convert it into a string before inserting. Which method you choose is up to you and what makes more sense.

```
// convert to comma separated string
$forms = $wpdb->escape( implode(',', $_POST['forms']) );

// or

// serialize the PHP array, use unserialize when you retrieve it
$forms = $wpdb->escape( serialize($_POST['forms']) ); 
```

# msysgit - 如何通过添加日期时间来配置 Git bash 提示符？

> ID：13001902
> 
> 赞同：6
> 
> 时间：2012-10-21T20:30:42.833
> 
> 标签：msysgit, git-bash

我的 msysgit Git bash 命令行提示现在看起来像这样：

```
GitUserName@WorkStationName WorkSpacePath (BranchName) 
```

我想在那条线前面有一个时间戳，比如`HH:mm`（`hours:minutes`）。

有谁知道我怎么能轻松做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-09T04:50:25.027

我发现使用该文件`\Git\etc\profile.d\git-prompt.sh`，您可以添加如下所示的行以将日期时间添加到您的提示中

`PS1="$PS1"'\[\033[35m\]\D{%F %T} '`（如[这里](http://bneijt.nl/blog/post/add-a-timestamp-to-your-bash-prompt/)所见的格式细节）

我的提示目前看起来像这样

`2015-11-08 23:48:08 Sean@pc-01 /c/dev/projects`

```
PS1='\[\033]0;$MSYSTEM:${PWD//[^[:ascii:]]/?}\007\]' # set window title
PS1="$PS1"'\n'                 # new line
PS1="$PS1"'\[\033[35m\]\D{%F %T} '
PS1="$PS1"'\[\033[32m\]'       # change to green
PS1="$PS1"'\u@\h '             # user@host<space>
PS1="$PS1"'\[\033[35m\]'       # change to purple
#PS1="$PS1"'$MSYSTEM '          # show MSYSTEM
PS1="$PS1"'\[\033[33m\]'       # change to brownish yellow
PS1="$PS1"'\w'                 # current working directory
if test -z "$WINELOADERNOEXEC"
then
    GIT_EXEC_PATH="$(git --exec-path 2>/dev/null)"
    COMPLETION_PATH="${GIT_EXEC_PATH%/libexec/git-core}"
    COMPLETION_PATH="${COMPLETION_PATH%/lib/git-core}"
    COMPLETION_PATH="$COMPLETION_PATH/share/git/completion"
    if test -f "$COMPLETION_PATH/git-prompt.sh"
    then
        . "$COMPLETION_PATH/git-completion.bash"
        . "$COMPLETION_PATH/git-prompt.sh"
        PS1="$PS1"'\[\033[36m\]'  # change color to cyan
        PS1="$PS1"'`__git_ps1`'   # bash function
    fi
fi
PS1="$PS1"'\[\033[0m\]'        # change color
PS1="$PS1"'\n'                 # new line
PS1="$PS1"'$ '                 # prompt: always $ 
```

注意：使用的答案`$(/bin/date)`对我不起作用，因为我认为我很难找到`\Git\usr\bin\date.exe`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T06:08:57.703

如果按日期表示当前时间/日期，则[此示例](http://maketecheasier.com/8-useful-and-interesting-bash-prompts/2009/09/04)可以提供帮助：

```
 PS1="\n\[\033[35m\]\$(/bin/date)\n\[\033[32m\]\w\n\[\033[1;31m\]\u@\h: \[\033[1;34m\]\$(/usr/bin/tty | /bin/sed -e 's:/dev/::'): \[\033[1;36m\]\$(/bin/ls -1 | /usr/bin/wc -l | /bin/sed 's: ::g') files \[\033[1;33m\]\$(/bin/ls -lah | /bin/grep -m 1 total | /bin/sed 's/total //')b\[\033[0m\] -> \[\033[0m\]" 
```

![带有日期的 git 提示符](../Images/42af44ef6be106040cf28441113f18ad.png)

它使用`$(/bin/date)`并且是一个多行提示，包含日期/时间、完整路径、用户和主机、活动终端，甚至文件计数和空间使用情况。

它说明了如何将日期集成到自己的 git 提示符中。

* * *

[OP](https://stackoverflow.com/users/1094598/deblendewim) deblendwim[评论](https://stackoverflow.com/questions/13001902/msysgit-configure-git-bash-prompt-by-adding-datetime/13005798#comment17663105_13005798)：

> 我还想知道如何在不立即在提示符中运行它的情况下更改它。
> 将配置文件从以下位置更改：

```
if test -z "$WINELOADERNOEXEC" then PS1='\[\033]0;$MSYSTEM:\w\007 \033[32m\]\u@\h \[\033[33m\w$(__git_ps1)\033[0m\] $ ' else PS1='\[\033]0;$MSYSTEM:\w\007 \033[32m\]\u@\h \[\033[33m\w\033[0m\] $ ' 
```

> 进入

```
if test -z "$WINELOADERNOEXEC" then PS1='\[\033]0;$MSYSTEM:\w\007 \[\033[36m\]\t \[\033[32m\]\u@\h \[\033[33m\w$(__git_ps1)\033[0m\] $ ' else PS1='\[\033]0;$MSYSTEM:\w\007 \[\033[36m\]\t \[\033[32m\]\u@\h \[\033[33m\w\033[0m\] $ ' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-18T23:04:21.477

[seangwright](https://stackoverflow.com/users/939634/seangwright)给出的答案[有效](https://stackoverflow.com/a/33602726/1307183)，但它会覆盖您的全局配置。如果你往里面看，你会看到：`\Git\etc\profile.d\git-prompt.sh`

```
if test -f ~/.config/git/git-prompt.sh
then
    . ~/.config/git/git-prompt.sh
else
    PS1='\[\033]0;$TITLEPREFIX:$PWD\007\]' # set window title
    PS1="$PS1"'\n'                 # new line
    # ... 
```

这意味着您可以仅覆盖您的用户帐户的配置，这可能是首选，因为对 Git Bash 的任何更新都不会覆盖该文件。您所要做的就是创建该`~/.config/git`文件夹（如果它不存在），然后将您的配置保存在文件中`git-prompt.sh`（完整路径`~/.config/git/git-prompt.sh`）。脱离最新的 Git Bash 配置，它可能看起来像这样：

```
PS1='\[\033]0;$TITLEPREFIX:$PWD\007\]' # set window title
PS1="$PS1"'\n'                 # new line

# THE FOLLOWING LINE ADDS THE TIMESTAMP
PS1="$PS1"'\[\033[35m\]\D{%F %T} ' 

PS1="$PS1"'\[\033[32m\]'       # change to green
PS1="$PS1"'\u@\h '             # user@host<space>
PS1="$PS1"'\[\033[35m\]'       # change to purple
PS1="$PS1"'$MSYSTEM '          # show MSYSTEM
PS1="$PS1"'\[\033[33m\]'       # change to brownish yellow
PS1="$PS1"'\w'                 # current working directory
if test -z "$WINELOADERNOEXEC"
then
  GIT_EXEC_PATH="$(git --exec-path 2>/dev/null)"
  COMPLETION_PATH="${GIT_EXEC_PATH%/libexec/git-core}"
  COMPLETION_PATH="${COMPLETION_PATH%/lib/git-core}"
  COMPLETION_PATH="$COMPLETION_PATH/share/git/completion"
  if test -f "$COMPLETION_PATH/git-prompt.sh"
  then
    . "$COMPLETION_PATH/git-completion.bash"
    . "$COMPLETION_PATH/git-prompt.sh"
    PS1="$PS1"'\[\033[36m\]'  # change color to cyan
    PS1="$PS1"'`__git_ps1`'   # bash function
  fi
fi
PS1="$PS1"'\[\033[0m\]'        # change color
PS1="$PS1"'\n'                 # new line
PS1="$PS1"'$ '                 # prompt: always $ 
```

# ruby-on-rails - Rails - 下拉（选择）月/年

> ID：13001904
> 
> 赞同：11
> 
> 时间：2012-10-21T20:30:57.257
> 
> 标签：ruby-on-rails, html-select

1.  如何在 Rails 中创建包含所有月份的下拉菜单？
2.  如何创建一个下拉列表，其中包含从当前年份和未来 8 年（2012 年、2013 年... 2020 年）开始的年份列表？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-21T21:01:12.570

几个月：

```
<%= select_month(Date.today) %> 
```

（`Date.today`参数将默认为当前月份 - 使用`select_month(1)`默认为一月）

多年来：

```
<%= select_year(Date.today, :start_year => Date.today.year, :end_year => 8.years.from_now.years) %> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-19T19:28:46.883

```
<%= f.select :month, 1..12 %>

<%= f.select :year, Date.today.year.. 8.years.from_now.year %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-30T07:34:01.370

@alex 答案的一个小补充，

默认情况下，如果你这样做

> select_month（日期。今天，字段名称：'开始'）

它将生成名称为“date[start]”的选择标签。如果您希望它不是 date[]，请添加 :prefix 选项，如下所示：

> select_month(Date.today, field_name: 'start', 前缀: 'timer')

这将呈现名称为“timer[start]”的选择标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-28T16:34:40.880

如果您希望下拉列表显示实际月份名称而不是月份编号，请添加到 @Diego：

```
<%= f.select :end_date, Date::MONTHNAMES[1..12] %> 
```

然后是这一年：

```
<%= f.select :end_date, Date.today.year.. 8.years.from_now.year %> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-08T07:25:20.480

这是选择月份和年份的组合

```
<%= f.month_field(Date.today) :month %> 
```

阅读更多：[https ://guides.rubyonrails.org/form_helpers.html](https://guides.rubyonrails.org/form_helpers.html)

# ruby-on-rails-3 - How to save the facebook comment in database after posting it to facebook in rails application?

> ID：13001911
> 
> 赞同：2
> 
> 时间：2012-10-21T20:31:32.403
> 
> 标签：ruby-on-rails-3, facebook-comments

I want to save the facebook comment in my database of rails application after user posts it on facebook from my application.

Say there is facebook comment box added to my site. Now when user enters facebook post and clicks on "comment" or "post" button provided by facebook. The comment is currently posted on facebook but i want it to post in facebook as well as save it to my application's database.

Thanks in advance for any help,

# python - 当你调用`if key in dict`时会发生什么

> ID：13001913
> 
> 赞同：6
> 
> 时间：2012-10-21T20:32:03.110
> 
> 标签：python, hash, dictionary, equality

我有一个类（我们称之为`myClass`），它同时实现了`__hash__`和`__eq__`。我还有一个将对象`dict`映射`myClass`到某个值的方法，计算需要一些时间。

在我的程序过程中，许多（数百万）`myClass`对象被实例化。这就是我使用`dict`来跟踪这些值的原因。

但是，有时新`myClass`对象可能等同于旧对象（由`__eq__`方法定义）。因此，与其再次计算该对象的值，我宁愿只`myClass`在`dict`. 为了做到这一点，我做到了`if myNewMyClassObj in dict`。

这是我的问题：

当我使用该`in`子句时，会调用什么，`__hash__`或者`__eq__`？使用 a 的重点`dict`是它的 O(1) 查找时间。所以 then`__hash__`必须被调用。但是如果不是等价的方法呢`__hash__`？`__eq__`在这种情况下，我会得到误报`if myNewMyClassObj in dict`吗？

跟进问题：

我想尽量减少`dict`我`myClass`的`dict`. 再一次，似乎`__eq__`需要在计算时调用`if myNewClassObj in dict`，这会将 a`dict`的 O(1) 查找时间污染为 O(n) 查找时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T20:38:58.563

首先，`__hash__(myNewMyClassObj)`被调用。如果在字典中没有找到具有相同散列的对象，则 Python 假定`myNewMyClassObj`不在字典中。（请注意，Python 要求每当`__eq__`两个对象的计算结果相等时，它们`__hash__`必须相同。）

如果`__hash__`在字典中找到一些具有相同内容的对象，则`__eq__`对它们中的每一个进行调用。如果`__eq__`它们中的任何一个评估为相等，则`myNewMyClassObj in dict_`返回 True。

因此，您只需要确保两者`__eq__`都`__hash__`快速。

对于您的后续问题：是的，`dict_`仅存储一组等效`MyClass`对象中的一个（由 定义`__eq__`）。（正如设置的那样。）

请注意，`__eq__`仅在具有相同哈希并分配给相同存储桶的对象上调用。此类对象的数量通常非常少（`dict`实现可以确保这一点）。所以你仍然有（大致）`O(1)`查找性能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T20:38:06.787

`__hash__`将永远被调用；`__eq__`如果对象确实在字典中，或者具有相同哈希的另一个对象在字典中，将被调用。哈希值用于缩小可能键的选择范围。键按哈希值分组到“桶”中，但是对于查找，Python 仍然必须检查桶中的每个键是否与查找键相等。请参阅[http://wiki.python.org/moin/DictionaryKeys](http://wiki.python.org/moin/DictionaryKeys)。看看这些例子：

```
>>> class Foo(object):
...     def __init__(self, x):
...         self.x = x
...     
...     def __hash__(self):
...         print "Hash"
...         return hash(self.x)
... 
...     def __eq__(self, other):
...         print "Eq"
...         return self.x == other.x
>>> Foo(1) in d
Hash
Eq
10: True
>>> Foo(2) in d
Hash
Eq
11: True
>>> Foo(3) in d
Hash
Eq
12: True
>>> Foo(4) in d
Hash
13: False 
```

在那个例子中，你可以看到`__hash__`总是被调用。 `__eq__`当对象在字典中时，每次查找都会调用一次，因为它们都有不同的哈希值，所以一次相等性检查足以验证具有该哈希值的对象确实是被查询的对象。 `__eq__`在最后一种情况下没有调用，因为 dict 中没有一个对象具有与 相同的哈希值`Foo(4)`，因此 Python 不需要继续使用`__eq__`.

```
>>> class Foo(object):
...     def __init__(self, x):
...         self.x = x
...     
...     def __hash__(self):
...         print "Hash"
...         return 1
... 
...     def __eq__(self, other):
...         print "Eq"
...         return self.x == other.x
>>> d = {Foo(1): 2, Foo(2): 3, Foo(3): 4}
Hash
Hash
Eq
Hash
Eq
Eq
>>> Foo(1) in d
Hash
Eq
18: True
>>> Foo(2) in d
Hash
Eq
Eq
19: True
>>> Foo(3) in d
Hash
Eq
Eq
Eq
20: True
>>> Foo(4) in d
Hash
Eq
Eq
Eq
21: False 
```

在这个版本中，所有对象都具有相同的哈希值。在这种情况下`__eq__`总是被调用，有时会被多次调用，因为哈希不区分值，所以 Python 需要显式检查字典中所有值的相等性，直到找到相等的值（或发现它们都不等于它正在寻找的一个）。有时它会在第一次尝试时找到它（`Foo(1) in dict`上面），有时它必须检查所有值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T20:38:07.597

__hash__ 定义了对象放入的桶， __eq__ 仅当对象在同一个桶中时才被调用。

# c++ - C++ : error LNK2019: unresolved external symbol

> ID：13001914
> 
> 赞同：0
> 
> 时间：2012-10-21T20:32:03.843
> 
> 标签：c++, external, symbols, lnk2019

> **Possible Duplicate:**
> [What is an undefined reference/unresolved external symbol error and how do I fix it?](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

So I have compared my issue to the vast library of problems that have spawned from this category on this site. I still have no clue as to why my compiler is complaining.

So let me give a short briefing on what it is I want to do with my program. I am researching elevator algorithms. I want to implement priority queues using a binary heap.

I have got the source code from mark allen wiess website. For the heaps.

I am constructing my own reqnode class that represents the nodes of the binary tree.

reqnode = request node.

The scenario is: A user makes a request. I service the request. I am working with multiple requests. Thus I have to use a priority, on which user to satisfy first.

This is my header file for my binary heap.

```
#include <vector>
using namespace std;

BinaryHeap class.

CONSTRUCTION: with no parameters or vector containing items.

template <class Comparable>
class BinaryHeap
{
public:
BinaryHeap( );
BinaryHeap( const vector<int> & v );

bool isEmpty( ) const;
const Comparable & findMin( ) const;

void insert( const Comparable & x);
void deleteMin( );
void deleteMin( Comparable & minItem );
void makeEmpty( );

private:
int theSize;  // Number of elements in heap
vector<Comparable> Array;    // The heap Array

void buildHeap( );
void percolateDown( int hole );
}; 
```

These are the functions defined for my binary heap.

```
#include "binaryHeap.h"
using namespace std;

// Construct the binary heap.
template <class Comparable>
BinaryHeap<Comparable>::BinaryHeap( )
: Array( 11 ), theSize( 0 )
{
}

// Insert item x into the priority queue, maintaining heap order.
// Duplicates are allowed.

template <class Comparable>
void BinaryHeap<Comparable>::insert( const Comparable & x) 
{
Array[ 0 ] = x;   // initialize sentinel
if( theSize + 1 == Array.size( ) )
    Array.resize( Array.size( ) * 2 + 1 );

  // Percolate up
int hole = ++theSize;
for( ; x < Array[ hole / 2 ]; hole /= 2 )
    Array[ hole ] = Array[ hole / 2 ];
Array[ hole ] = x;
}

// Find the smallest item in the priority queue.
// Return the smallest item, or throw UnderflowException if empty.
template <class Comparable>
const Comparable & BinaryHeap<Comparable>::findMin( ) const
{
if( isEmpty( ) ){
    cout << "heap empty" << endl; //throw UnderflowException( );
    break;
}
return Array[ 1 ];
}

// Remove the smallest item from the priority queue.
// Throw UnderflowException if empty.
template <class Comparable>
void BinaryHeap<Comparable>::deleteMin( )
{
if( isEmpty( ) ){
    cout << "heap empty" << endl; //throw UnderflowException( );
    break;
}

Array[ 1 ] = Array[ theSize-- ];
percolateDown( 1 );
}

// Remove the smallest item from the priority queue
// and place it in minItem. Throw UnderflowException if empty.
template <class Comparable>
void BinaryHeap<Comparable>::deleteMin( Comparable & minItem )
{
minItem = findMin( );
Array[ 1 ] = Array[ theSize-- ];
percolateDown( 1 );
}

// Establish heap-order property from an arbitrary
// arrangement of items. Runs in linear time.
template <class Comparable>
void BinaryHeap<Comparable>::buildHeap( )
{
for( int i = theSize / 2; i > 0; i-- )
    percolateDown( i );
}

// Test if the priority queue is logically empty.
// Return true if empty, false otherwise.
template <class Comparable>
bool BinaryHeap<Comparable>::isEmpty( ) const
{
return theSize == 0;
}

// Make the priority queue logically empty.
template <class Comparable>
void BinaryHeap<Comparable>::makeEmpty( )
{
theSize = 0;
}

// Internal method to percolate down in the heap.
// hole is the index at which the percolate begins.
template <class Comparable>
void BinaryHeap<Comparable>::percolateDown( int hole )
{
int child;
Comparable tmp = Array[ hole ];

for( ; hole * 2 <= theSize; hole = child )
{
    child = hole * 2;
    if( child != theSize && Array[ child + 1 ] < Array[ child ] )
        child++;
    if( Array[ child ] < tmp )
        Array[ hole ] = Array[ child ];
    else
        break;
}
Array[ hole ] = tmp;
} 
```

This is my header file for reQnode

```
class reqNode//create a node that takes in several properties.
{
public:
reqNode(){  //default constructor
static priority = start = destination = timestamp = start_time = finish_time = -1;
}

reqNode(const reqNode &copy){       //copy constructor
priority = copy.priority;
start = copy.start;
destination = copy.destination;
timestamp = copy.timestamp;
start_time = copy.start_time;
finish_time = copy.finish_time;
}

reqNode & operator=(const reqNode & copy){
priority = copy.priority;
start = copy.start;
destination = copy.destination;
timestamp = copy.timestamp;
start_time = copy.start_time;
finish_time = copy.finish_time;

return *this;
}

int priority, start, destination, timestamp, start_time, finish_time;
bool direction;

bool operator<(reqNode &rhs){
if(this->priority < rhs.priority)
return true;
else
return false;
}

void setPriority(int x){
priority=x;
}
}; 
```

This is my driver implementation

```
#include <iostream>
#include <fstream>
#include <string>
#include "binaryHeap.h"
#include "reqnode.h"

#include <algorithm>
using namespace std;

void setNode(reqNode nizzode, int priority)
{
nizzode.priority = priority;
}

int main()
{
int numItems = 10000;
BinaryHeap<reqNode> h;
int i = 37;
reqNode x;
reqNode * temp;

for( i = 37; i != 0; i = ( i + 37 ) % numItems ){
temp = new reqNode;
temp->setPriority(i);
h.insert( *temp );
}

for( i = 1; i < numItems; i++ )
{
h.deleteMin( x );
if( x.priority != i )
cout << "Oops! " << i << endl;
}

for( i = 37; i != 0; i = ( i + 37 ) % numItems ){
temp = new reqNode;
temp->setPriority(i);
h.insert( *temp );
}

temp = new reqNode;
temp->setPriority(i);
h.insert( *temp );

return 0;
} 
```

Finally, These are the errors that haunt me!

```
1>Driver2.obj : error LNK2019: unresolved external symbol "public: void __thiscall BinaryHeap<class reqNode>::deleteMin(class reqNode &)" (?deleteMin@?$BinaryHeap@VreqNode@@@@QAEXAAVreqNode@@@Z) referenced in function _main
1>Driver2.obj : error LNK2019: unresolved external symbol "public: void __thiscall BinaryHeap<class reqNode>::insert(class reqNode const &)" (?insert@?$BinaryHeap@VreqNode@@@@QAEXABVreqNode@@@Z) referenced in function _main
1>Driver2.obj : error LNK2019: unresolved external symbol "public: __thiscall BinaryHeap<class reqNode>::BinaryHeap<class reqNode>(void)" (??0?$BinaryHeap@VreqNode@@@@QAE@XZ) referenced in function _main
1>C:\Users\Aaron Artis\Documents\Visual Studio 2010\Projects\Elevator_Algo_Remix1\Debug\Elevator_Algo_Remix1.exe : fatal error LNK1120: 3 unresolved externals 
```

I'm unsure of where to pinpoint this problem. I had a previous linker error. I resolved it. This one just seems like a doozy.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:36:24.857

Don't put template definitions in the .CPP file - they need to be in the .H file, else the compiler can't expand them.

Probably, you shouldn't even need `BinaryHeap.c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:38:35.733

您的编译器正在抱怨，因为它找到了函数构造函数和的**声明**，但没有找到**定义**。`deleteMin``insert`

 **这是因为您的定义必须在 .cpp 文件中。

将它们直接放在 binaryHeap.h 文件中，在类声明之后，解决了这个问题。

考虑为模板函数执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:37:11.337

It looks like the definition of the constructor and the two methods is in a CPP file; they need to be in a header file.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:39:01.423

简短回答：您应该将`BinaryHead<>`' 的声明和定义放在同一个文件中，因为这是一个模板类。

长答案：阅读[这个 Stackoverflow 答案](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)，其中详细解释了事情。**

# google-apps-script - Script times out in a loop containing 750 rows and 16 columns

> ID：13001916
> 
> 赞同：0
> 
> 时间：2012-10-21T20:32:27.780
> 
> 标签：google-apps-script

I have a Google Apps Script that I'm using to Bulk email recipients on the same domain. The Script essentially sends them a link to a Google Doc containing a monthly report. The values for the report come from a Spreadsheet:

*   Access a spreadsheet containing 16 columns and 750 rows
*   Read the email address from the EMAIL column
*   Access a Google Doc which is essentially a template of the monthly report, make a copy of the template for each email address retrieved from the spreadsheet and using values from the columns essentially do a find a replace on the Doc. In my app I allow the user to select the template and then I store that templateId in ScriptDB
*   Send an email to each of the recipients with a link to the monthly report - each report is unique since the columns values represent a user.

The biggest problem with this script is that it times out after 5 minutes of execution. Last time I tried to run it, it sent out 145 emails out of the 750 email target.

Template Selector Code

```
function selectTemplate() {
 var app = UiApp.createApplication().setTitle("Select Template").setHeight(400).setWidth(500);
 var doclisthandler = app.createServerHandler('templateSelectionHandler');
 var closeHandler = app.createServerHandler('closeSelectionHandler');
 app.createDocsListDialog().showDocsPicker().addSelectionHandler(doclisthandler).addCloseHandler(closeHandler);
 SpreadsheetApp.getActiveSpreadsheet().show(app);

}

/**
Function to retrieve the template ID from ScriptDb
**/

function setTemplateId(){
  var db = ScriptDb.getMyDb();
  /**we dont query for a specific ID because by default we only store one template so we will
  always have one record
 **/
  var results = db.query({});
  while (results.hasNext()) {
      var result = results.next();
      var jsonResults = Utilities.jsonStringify(result);

  }
  Logger.log(jsonResults);
  var jsonTemplate = Utilities.jsonParse(jsonResults);
  var templateId = jsonTemplate.template_id;
  return templateId;
} 
```

This is the code that sends the email:

```
function sendEmail(){

  var mySheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();  
  var range = mySheet.getDataRange();

  var myRange = range.offset(1, 0, range.getNumRows()-1);

  var curFeatures = range.getValues();
  var curCols = new ColNumbers(curFeatures[0], COLS_KEYAPPCOLS);

  var currentTime = new Date();
  var payrollYear = currentTime.getYear();
  var payMonth = mySheet.getSheetName();
  var hours = currentTime.getHours();
  var minutes = currentTime.getMinutes();

  try{
    //check if folder exists before you create one
    var monthFolder = DocsList.getFolder("Report-" + mySheet.getSheetName() + "," + payrollYear);
  }catch(e){
    //create a folder to hold the current pay slips
    var monthFolder = DocsList.createFolder("Report-" + mySheet.getSheetName() + "," + payrollYear);
    Logger.log(monthFolder.getName());

  }

  myRange.getValues().forEach( function( recipient, index, data ){

    var staffNumber = recipient[curCols.staffNumber];
    Logger.log("staff Number " + staffNumber);
    var staffName = recipient[curCols.name];
    Logger.log("staffName " + staffName);
    var subject = "Report - " + staffName + ", " + payMonth + "-" + payrollYear;
    var emailAddress = recipient[curCols.email];
    var adminAllowance = recipient[curCols.admin];
    var respAllowance = recipient[curCols.resp];
    var topUpAllowance = recipient[curCols.topup];
    var arrears = recipient[curCols.arrears];
    var overtime = recipient[curCols.overtime];
    var grossPay = recipient[curCols.gross];
    var paye = recipient[curCols.paye];
    var mubasa = recipient[curCols.mubasa];
    var loan = recipient[curCols.loan];
    var rent = recipient[curCols.rent];
    var nssf = recipient[curCols.nssf];
    var net = recipient[curCols.net];
    var totalDed = recipient[curCols.totalded];

    var templateid = setTemplateId(); // get template file id
    if(templateid == ""){
      Browser.msgBox("No template has been selected. Please select the correct template");
      return;
    }

    var docName = "Report details - " + staffNumber;
    //if email address is not empty do all the cool stuff like sending the data
    if(emailAddress != ""){
      var copyDoc = DocsList.getFileById(templateid).makeCopy(docName);      
      copyDoc.addToFolder(monthFolder);

      var docid = copyDoc.getId();
      Logger.log("Document ID " + docid);

      var doc = DocumentApp.openById(docid);

      //set permissions for the doc
      Logger.log("permission to view doc " + docid + " assigned to " + emailAddress);
      doc.addViewer(emailAddress);
      var docURL = doc.getUrl();
      var body = doc.getActiveSection();
      body.replaceText("%MONTH%", payMonth);
      body.replaceText("%YEAR%", payrollYear);
      body.replaceText("%STAFFNAME%", staffName);
      body.replaceText("%PAYE%", paye);  
      body.replaceText("%OVERTIME%", overtime); 
      body.replaceText("%GROSS%", grossPay);  
      body.replaceText("%NSSF%", nssf); 
      body.replaceText("%MUBASA%", mubasa);  
      body.replaceText("%NET%", net);  
      body.replaceText("%ARREARS%", arrears); 
      body.replaceText("%TOTALDED%", totalDed); 
      body.replaceText("%LOAN%", loan);
      body.replaceText("%RENT%", rent);
      body.replaceText("%ADMIN%", adminAllowance);
      body.replaceText("%RESP%", respAllowance);
      body.replaceText('%TOPUP%', topUpAllowance);

      //email message

      doc.saveAndClose();

       Logger.log("Sending email to " + emailAddress + " at " + hours + ":" + minutes);
      try{
         MailApp.sendEmail(emailAddress, 
                      subject, "", 
                      {htmlBody: message
                       },
                       attachment: docName,
                       name: "Report"
                      });
      }catch(e){
       Logger.log(e); 
      }

    }else{
         Logger.log("no email address found for staff member " + staffName);                  

        }

  });

} 
```

I'd really appreciate some pointers on how I can optimize this script inorder for it not to timeout.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:14:24.633

我建议您修改您的脚本以一次处理 75 或 100 个项目，跟踪您在脚本属性（或其他地方）中的位置，并稍后继续，直到它处理了 750 个项目。这应该每 5 分钟左右在计时器触发器上启动。

发送完所有内容后，请关闭触发器并在需要时重新启动它。触发器可以很容易地以编程方式设置。

# sql - 将文本字段中的时间值与当前时间进行比较

> ID：13001920
> 
> 赞同：1
> 
> 时间：2012-10-21T20:32:46.450
> 
> 标签：sql, regex, postgresql

在 PostgreSQL 中，我有一个文本列，其中包含以这种格式表示事件的开始和停止时间的值：“15:00-17:00”（例如，这是一个从下午 3 点开始到下午 5 点结束的事件）。我需要编写一个 SQL 查询来返回事件尚未结束的行。例如，如果我在 16:48 查询，会返回上面的事件，因为它还不是 17:00。如果有帮助，我只关心小时值，分钟可以忽略。

如果数据在适当的时间字段中，这将是微不足道的，但是当数据是文本时，我对如何做到这一点有点困惑。我假设我可以使用某种正则表达式来解析第二个小时的值，并可能将它与 CURRENT_TIME 结合起来进行某种比较，但我不确定如何将它们放在一起。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:30:05.360

```
SELECT *
FROM   tbl
WHERE  now()::time BETWEEN left(time_col, 5)::time
                   AND    right(time_col, 5)::time 
```

这将返回表`tbl`中*当前本地时间* `now()::time`位于列中编码的开始和结束之间的所有行`time_col`——这意味着它们已经开始，但尚未结束。`time_col`这显然需要与您的问题中的模式完全匹配的格式良好的字符串。

[`left()`并`right()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)已在 PostgreSQL 9.1 中引入。在旧版本中，您可以用`substr()`已经提供的 @lserni 等表达式替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:52:30.173

您可以将文本与伪日期字段进行比较。您甚至可以查看分钟，因为它们仍然按字典顺序排列。

```
... WHERE SUBSTR(datefield, 7, 5) >= to_char(NOW(), 'HH24:MI'); 
```

或许

```
... WHERE split_part(datefield, '-', 2) >= to_char(NOW(), 'HH24:MI'); 
```

您还可以使用正则表达式进行检查，以防万一您得到“17:00 到 23:00”或其他内容：

```
... WHERE substring(datefield from '\d\d:\d\d$') >= to_char(NOW(), 'HH24:MI')
    AND   substring(datefield from '^\d\d:\d\d') <= to_char(NOW(), 'HH24:MI'); 
```

最后一次检查应该自动忽略格式错误的日期。

# css - 您如何处理 WordPress 中的动态 CSS？

> ID：13001922
> 
> 赞同：5
> 
> 时间：2012-10-21T20:33:07.647
> 
> 标签：css, wordpress, dynamic-css

我需要一些用于 WordPress 插件的 CSS 是动态的，并且想知道什么是最好的或最常用的方法。我目前正在使用方法二，但 IE9 有问题。所以我认为动态 CSS 可能有更好的解决方案，并提出了这些：

## 1.) 包含一个带有`wp_head`钩子的样式块

**临：**

*   没有额外的服务器请求

**反对：**

*   根据每页上的大量数据的大小
*   不那么漂亮
*   不可缓存

## 2.)`admin_url('admin-ajax.php?action=my_css')`在链接标签中使用

**临：**

*   即时创建 CSS（并使用 Transient API 缓存它）
*   用途`wp_enqueue_style`
*   可缓存的过期标头

**魂斗罗**

*   需要加载`wp-load.php`
*   在 IE9 上不起作用（[为什么？](https://stackoverflow.com/questions/12997674/ie9-doesnt-allow-dynamic-style-with-php-and-content-type-text-css)）

## 3.) 创建一个关于更改的 CSS 文件

**临**

*   快速地
*   无需加载整个 WordPress ( `wp-load.php`)

**魂斗罗**

*   不是很动态
*   需要某些文件夹的写入规则
*   可能已过期或缺少脚本问题或缺少权限的原因

我不喜欢方法一，因为不是每个页面都需要样式，方法二在 IE9 上不起作用。

我应该选择第三个还是有什么缺点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:47:00.280

PHP 没有内置的持久缓存，您会受到一定程度的限制。如果您可以保证您将拥有`memcached`、、`APC`甚至是文件写入权限，那么您可以使用这些方法中的任何一种来缓存您的 CSS，并使用密钥检索它。您不需`wp-load.php`要这样做，因此您的性能将比必须加载所有插件等有所提高。

也就是说，根据 Microsoft 文章[MIME-Handling Change: text/css ，假设您在输出 CSS 之前进行了设置，那么您的动态 CSS](http://msdn.microsoft.com/en-us/library/ie/gg622939%28v=vs.85%29.aspx)*应该*可以在 IE9 中工作。`header('Content-type: text/css');`

综上所述，您可以尝试#1 和#2 的混合方法-如果您不能保证您具有文件写入权限，那么听起来#3 已经过时了。要实现，只需检测`user-agent`请求浏览器的，并设置一个函数来输出您的 CSS。如果**不是**IE9，您可以使用钩子函数包含样式表`admin_url('admin-ajax.php?action=my_css')`并调用您的输出，如果**是**IE9，您可以通过从钩子调用函数将样式表包含在标头中`wp_head`。这样，您就可以为大多数客户端缓存 CSS，并为 IE 解决问题 - 您对页面大小等的缺点是有效的……但它是 IE9。

只要您能够缓存每个客户端的 CSS，那么您通常只查看一个额外的请求，`wp-load.php`该请求不应该对性能造成太大影响。

您可以使用检查 IE9`if (false!==strpos('MSIE 9;', $_SERVER['HTTP_USER_AGENT']))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-20T05:56:56.310

我创建了一个名为[wp-dynamic-css](https://github.com/askupasoftware/wp-dynamic-css)的库，它允许您从动态内容生成 CSS。

该库允许您使用特殊语法来表示 CSS 文件中的变量。

这是它的使用方法：

```
// 1\. Load the library
require_once 'wp-dynamic-css/bootstrap.php';

// 2\. Enqueue the stylesheet (using an absolute path, not URL)
wp_dynamic_css_enqueue( 'my-dynamic-style', 'path/to/my-style.css' );

// 3\. Set the callback function (used to convert variables to actual values)
function my_dynamic_css_callback( $var_name )
{
   return get_theme_mod($var_name);
}
wp_dynamic_css_set_callback( 'my-dynamic-style', 'my_dynamic_css_callback' ); 
```

现在假设您有一个`my-style.css`使用以下代码调用的文件：

```
body {
   background-color: $body_bg_color;
} 
```

例如，如果调用`get_theme_mod('body_bg_color')`返回 value `#fff`，`my-style.css`则将编译为：

```
body {
   background-color: #fff;
} 
```

# ruby - 来自 Mongrel 的错误：“HTTP 元素 REQUEST_PATH 长于 1024 允许的长度”

> ID：13001923
> 
> 赞同：0
> 
> 时间：2012-10-21T20:33:13.950
> 
> 标签：ruby, http, mongrel

我有一个在运行 Mongrel 的服务器上运行查询的网站。查询语法可能非常复杂，我刚刚运行了一个查询（HTTP 请求），它产生了这个错误。

欢迎所有解决方法。

编辑：这是完整的 ajax 命令：

```
 $.ajax({
        type: "POST",
        url:    '/parsequery/' + jsonQuery,
        beforeSend: function(x) { // this is needed because otherwise jquery doesn't see the returned data as json
            if(x && x.overrideMimeType) {
                x.overrideMimeType("text/html");
            }
        },
        datatype: 'json',
        success: function(data, textStatus) {
            if (parsedOK(data)) {
                executeQuery(jsonQuery);
            }
            else {
                handleFailedParse(data);
            }

        },
        error:  function(jaXHR, textStatus, errorThrown) {
            alert("error sending request: " + textStatus)
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:44:23.253

您应该为此使用 HTTP POST。许多服务器和浏览器实现对查询长度有严格的限制，大约在 1 kByte 或 2 kBytes 左右。

所以而不是

```
<form action="http://www.example.org/foo" method="get"> 
```

你应该做

```
<form action="http://www.example.org/foo" method="post"> 
```

如果您不通过表单进行请求，您可以使用 jQuery，例如：

```
$.post("/foo", {"param1": "foo", "param2": "bar"}, function(data) {
  alert("post successful!");
}); 
```

有关示例，请参见此处：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

当然服务器端需要处理 POST 请求。但是从编程的角度来看，在服务器端从 GET 更改为 POST 应该是微不足道的。

# matlab - 生成 0 和 1 的序列，使得在任何试验后出现 1 的概率为 0.3

> ID：13001929
> 
> 赞同：0
> 
> 时间：2012-10-21T20:33:51.890
> 
> 标签：matlab, probability

我正在尝试生成 0 和 1 的随机序列，这样任何时候生成序列时，1 的概率都是 0.3。我在 Matlab 中尝试了以下内容

```
%%clear all; %%close all;clc; %%(rand(1,10)<=0.3) 
```

问题是每次我运行它时，我都会得到不同比例的 1。任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T22:34:41.300

如果你想最后得到*0.3*的比例，你可以这样做：

```
n=1000; %should be a multiple of 10.
x=[ones(1,n*3/10) zeros(1,n*7/10)];
x=x(randperm(n)); 
```

基本上，它创建一个`0.3`比例为的数组`1`。

然后，它随机排列它。

# c# - WPF - Unable to bind properties of control in ContentPresenter to parent control

> ID：13001939
> 
> 赞同：3
> 
> 时间：2012-10-21T20:35:16.880
> 
> 标签：c#, wpf, binding, contentcontrol, contentpresenter

I have a custom control that is used in a form, this control combines a label and a textbox. When the form is in read only mode the control is changed to show a label instead of the textbox. To do this, I have defined a Content Template for my control, as follows:

```
<Style TargetType="{x:Type Controls:FormFieldControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>

                    <AdornerDecorator Grid.Column="1"
                                      Visibility="{Binding RelativeSource={RelativeSource AncestorType=Controls:FormFieldControl}, 
                                                   Path=IsReadOnly, 
                                                   Converter={StaticResource BooleanToInverseVisibilityConverter}, 
                                                   Mode=OneWay}">
                        <ContentPresenter Name="ContentPresenter" />
                    </AdornerDecorator>

                    <AdornerDecorator Grid.Column="1"
                                      Visibility="{Binding RelativeSource={RelativeSource AncestorType=FormFieldControl}, 
                                      Path=IsReadOnly, Converter={StaticResource BooleanToVisibilityConverter}, 
                                      Mode=OneWay}">
                        <ContentPresenter Name="ReadOnlyContentPresenter" />
                    </AdornerDecorator>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

`ReadOnlyContentPresenter`'s content is a label that's been applied the following style:

```
<Style x:Key="ReadOnlyFormFieldControl" TargetType="{x:Type Label}">
    <Setter Property="Width" Value="400" />
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=Controls:FormFieldControl}, 
                               Path=ReadOnlyWidth, 
                               Converter={StaticResource IsSetConverter}}"
                     Value="True">
            <Setter Property="Width" 
                    Value="{Binding RelativeSource={RelativeSource AncestorType=Controls:FormFieldControl}, Path=ReadOnlyWidth}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

This works fine for about 80 controls, but when I add more controls to the form then the binding in the label style fails to find the source (error 4):

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='MyProject.Controls.FormFieldControl', AncestorLevel='1''. BindingExpression:Path=ReadOnlyWidth; DataItem=null; target element is 'Label' (Name=''); target property is 'ReadOnlyWidth' (type 'Double?') 
```

The same happens with the style applied to the editable part of the control. I think the issue is related to the amount of controls being processed, if I move the code of control no. 81 (failing) right above control no. 80 (working), the binding in control no. 81 works now, but the one in control no. 80 fails. I did this for several controls, and the behaviour is consistent.

I'm still not clear as to how the `AdornerDecorator` works exactly, and while investigating I found this [question](https://stackoverflow.com/questions/9096759/using-more-than-144-adorners) that mentions a problem with having more than 144 adorners in an adornerlayer, so I removed the `AdornerDecorator`'s in my code only to find that the binding issue that was happening to controls no. 81 and over is now happening to all my `FormFieldControl`'s.

Finally, I decided to try with `ContentControl`'s instead of `ContentPresenter`'s in my control template. This works fine for all the controls in the form. I know that `ContentPresenter` is a lightweight form of `ContentControl` and that it's more suitable to use inside a content template than the`ContentControl` is. However, I don't quite understand why the bindings fail when using a `ContentPresenter` and work when using a `ContentControl`.

I also find it odd that only a limited set of controls work, and when not using the AdornerDecorator none of them will find the binding source.

Has anyone come across something similar? Is there something I'm doing wrong with the `ContentPresenter`? Or if this is expected behaviour, could someone help me understand what's going on?

Any ideas are appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T10:24:42.890

我认为原因可能是这个：

```
var contentPresenter = new ContentPresenter { Content = new Button() };
var contentControl = new ContentControl { Content = new Button() };
if ((contentPresenter.Content as FrameworkElement).Parent == null)
    Debug.WriteLine("ContentPresenter won't let you get ancestors");
if ((contentControl.Content as FrameworkElement).Parent != null)
    Debug.WriteLine("ContentControl will let you get ancestors"); 
```

两行都显示，这意味着 contentPresenter 是罕见的未正确设置“父”属性的 FrameworkElement 之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:01:40.937

从您的问题中不清楚标签是仅显示文本框中的内容还是必须显示自定义标签，但如果是前者，那么我认为您应该只使用`IsReadOnly`已经提到的属性。

您可以定义一个自定义，它在只读时`ControlTemplate`隐藏背景和边框，`TextBox`使其看起来好像只是一个`Label`.

试试这个简单的例子：

```
<StackPanel>
    <StackPanel.Resources>
        <Style x:Key="{x:Type TextBox}"
               TargetType="{x:Type TextBoxBase}">
            <Setter Property="SnapsToDevicePixels"
                    Value="True" />
            <Setter Property="OverridesDefaultStyle"
                    Value="True" />
            <Setter Property="KeyboardNavigation.TabNavigation"
                    Value="None" />
            <Setter Property="FocusVisualStyle"
                    Value="{x:Null}" />
            <Setter Property="MinWidth"
                    Value="120" />
            <Setter Property="MinHeight"
                    Value="20" />
            <Setter Property="AllowDrop"
                    Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBoxBase}">
                        <Border Name="Border"
                                CornerRadius="2"
                                Padding="2"
                                Background="AliceBlue"
                                BorderBrush="Black"
                                BorderThickness="1">
                            <ScrollViewer Margin="0"
                                          x:Name="PART_ContentHost" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsReadOnly"
                                     Value="True">
                                <Setter TargetName="Border"
                                        Property="Background"
                                        Value="Transparent" />
                                <Setter TargetName="Border"
                                        Property="BorderBrush"
                                        Value="Transparent" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </StackPanel.Resources>
    <TextBox Margin="50,25"
             Name="tb" />

    <Button Content="Switch modes"
            Margin="50,25"
            Click="Button_Click" />
</StackPanel> 
```

您将需要以下按钮单击处理程序来切换只读模式：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    tb.IsReadOnly = !tb.IsReadOnly;
} 
```

这是`TextBox`可编辑时的结果：

![在此处输入图像描述](../Images/d1de72dab2ccc0b7efb4f524649d4f7e.png)

这`TextBox`就是只读时的样子。

![在此处输入图像描述](../Images/92ede2947375ee40daec7ac103f41a63.png)

# objective-c - UITableView 高度基于单元格数

> ID：13001944
> 
> 赞同：14
> 
> 时间：2012-10-21T20:36:22.130
> 
> 标签：objective-c, ios, uitableview

我有一个具有可变行数（单元格）的 UITableView - 这些行的高度是恒定的。我想要的是使 UITableView 的高度取决于行数。

另外，我希望 UITableView 能够完全包裹单元格，所以底部没有填充。因此，如果一个单元格的高度为 60，则一个单元格的 tableview 应该是 60，两个单元格应该是 120，等等......

提前致谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-21T20:41:24.403

您可以访问您的数据源以查找将显示的单元格数量。将此数字乘以一行的高度，即可得到整个表格视图的高度。要更改表格视图的高度，您可以更改其 frame 属性。

`rowHeight`您可以通过访问其属性来访问表格视图的一行的（恒定）高度。如果使用名为 的数组的对象填充表视图，则`myArray`可以使用以下代码：

```
CGFloat height = self.tableView.rowHeight;
height *= myArray.count;

CGRect tableFrame = self.tableView.frame;
tableFrame.size.height = height;
self.tableView.frame = tableFrame; 
```

您还可以通过询问表格视图本身而不是数据对象来了解表格视图将包含多少行。像这样的东西应该工作：

```
NSInteger numberOfCells = 0;

//finding the number of cells in your table view by looping through its sections
for (NSInteger section = 0; section < [self numberOfSectionsInTableView:self.tableView]; section++)
    numberOfCells += [self tableView:self.tableView numberOfRowsInSection:section];

CGFloat height = numberOfCells * self.tableView.rowHeight;

CGRect tableFrame = self.tableView.frame;
tableFrame.size.height = height;
self.tableView.frame = tableFrame;

//then the tableView must be redrawn
[self.tableView setNeedsDisplay]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T06:36:11.677

我就是这样解决的。

```
CGFloat height = self.mMyTicketTable.rowHeight;

float h = height * [self.mArrEName count];
if(h > 410.0)
{
    self.mMyTicketTable.frame = CGRectMake(0, 50, self.mMyTicketTable.frame.size.width, 410);
}
else
{
    self.mMyTicketTable.frame = CGRectMake(0, 50, self.mMyTicketTable.frame.size.width, h);
}
NSLog(@"h:%f", h); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T06:51:12.287

实现这个 UITableView 委托方法。每当创建一个单元格行时，它都会为每个单元格分配高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
     return 60.0f;
} 
```

并在 viewDidLoad 方法中实现此代码

```
[yourTableView setFrame:CGRectMake(yourTableView.frame.origin.x, yourTableView.frame.origin.y, yourTableView.frame.size.width,(60.0f*([yourArray count])))]; 
```

**注意：-** yourArray 是一个 NSArray，其中包含要创建多少行的数据。

或者

如果 yourArray 动态获取值，则在获取值后调用此方法。

```
-(void)setHeightOfTableView
{

    /**** set frame size of tableview according to number of cells ****/
    float height=60.0f*[yourArray count];

[yourTableView setFrame:CGRectMake(yourTableView.frame.origin.x, yourTableView.frame.origin.y, yourTableView.frame.size.width,(60.0f*([yourArray count])))];
} 
```

我希望它有效。谢谢

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-14T05:12:16.977

我根据@timvermeulen 的代码创建了一个函数来设置 uitableview 高度

```
-(void)setTableViewheightOfTable :(UITableView *)tableView ByArrayName:(NSArray *)array
{    
    CGFloat height = tableView.rowHeight;
    height *= array.count;

    CGRect tableFrame = tableView.frame;
    tableFrame.size.height = height;
    tableView.frame = tableFrame;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-14T12:19:47.187

您可以使用委托方法`tableView:numberOfRowsInSection:`动态设置 UITableView 高度，如下所示：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    CGFloat numberOfRows =  self.myArray.count;

    CGRect tableViewFrame = tableView.frame;
    tableViewFrame.size.height = numberOfRows * tableView.rowHeight;
    tableView.frame = tableViewFrame;

    return numberOfRows;
} 
```

还要记住定义`rowHeight`启动表视图的位置：

```
self.myTableView.rowHeight = 60.0; 
```

...但是如果您的目标只是隐藏表格中的空单元格，则应向其添加一个空视图`tableFooterView`并忽略上面的所有代码（因此请先尝试此行）：

```
self.myTableView.tableFooterView = [UIView new]; 
```

# javascript - jQueryUI icons do not center when rendered inside Menu Widget

> ID：13001947
> 
> 赞同：0
> 
> 时间：2012-10-21T20:37:06.193
> 
> 标签：javascript, jquery-ui

Can I fix these buttons so the icons center inside them? This only occurs inside a Menu widget. In my screenshot, you can see how they are aligned top left to the buttons. I have one button outside the menu as an example of it working there. The code creating the buttons is the same. jQuery 1.8.2 and jQueryUI 1.9.0

```
 $(".save").button({
            text: false,
            icons: { primary: "ui-icon-disk" }
        }).click(function () { alert('Save not implemented yet'); return false; });

        $(".Delete").button({
            text: false,
            icons: { primary: "ui-icon-trash" }
        }).click(function () { alert('Delete not implemented yet'); return false; }); 
```

![screenshot of jQueryUI menu widget and mis-rendered icons](../Images/c59f8f920c7f5db2def504ccb12bba24.png)

# html - 在 div 的底部移动 span

> ID：13001949
> 
> 赞同：1
> 
> 时间：2012-10-21T20:37:14.490
> 
> 标签：html, css

只想在框底部移动“更多...”：在 [此处输入链接描述](http://jsfiddle.net/cHKF4/12/)

```
 <div id="box1">
  <span class="more">More...</span>
  </div>

.more {
    margin: 4px 4px;
    left: 0px;
    bottom: 0px;
}

#box1 {
    float: left;
    margin: 10px auto;
    border-style: solid;
    border-width: 3px;
    border-color: #55fff3;
    height: 120px;
    width: 500px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T20:39:53.930

在跨度上设置绝对定位，在边界框上设置相对定位。

```
<div id="box1">
    <span class="more">More...</span>
</div>

.more {
    margin: 4px 4px;
    left: 0px;
    bottom: 0px;
    position: absolute;
}

#box1 {
    float: left;
    margin: 10px auto;
    border-style: solid;
    border-width: 3px;
    border-color: #55fff3;
    height: 120px;
    width: 500px;
    position: relative;
} 
```

请参阅[更新的 jsFiddle](http://jsfiddle.net/cHKF4/13/)以获取实时示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T20:40:23.103

您可以`position: absolute`用于`more span`

居住：

[http://jsfiddle.net/cHKF4/16/](http://jsfiddle.net/cHKF4/16/)

您可以在这里查看使用**position**。

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

# c# - 如何以编程方式查找多播组

> ID：13001950
> 
> 赞同：3
> 
> 时间：2012-10-21T20:37:15.197
> 
> 标签：c#, udp, multicast

无论如何可以找到以编程方式（C#）加入我的 NIC 上的 IP 多播组吗？类似于（在 Windows cmd 中）-

```
netsh interface ip show joins 
```

我找不到它。。谢谢。

# jquery - 如何在 TinyMCE 中添加保存按钮（jQuery 自定义主题）

> ID：13001951
> 
> 赞同：1
> 
> 时间：2012-10-21T20:37:23.293
> 
> 标签：jquery, tinymce, wysiwyg

这是 TinyMCE 网站上关于 jQuery 自定义主题的示例：http: [//fiddle.tinymce.com/K9baab](http://fiddle.tinymce.com/K9baab)

几个小时以来，我一直试图弄清楚如何添加一个按钮来保存内容（=发布表单）。我不想在表单中添加提交按钮，而是在 TinyMCE 的菜单栏中添加一个按钮。

这是怎么做到的？

我通过添加以下行尝试了最合乎逻辑的事情：

```
'<input type="checkbox" id="save" data-mce-command="save" /><label for="save">Save</label>' + 
```

这会添加一个按钮，但是当我单击它时不会发布表单。

请指教。

问候，

罗尔

# java - java中全局常量的OOP设计

> ID：13001953
> 
> 赞同：0
> 
> 时间：2012-10-21T20:37:43.250
> 
> 标签：java, oop, inheritance

所以我的问题是我是否有一个父类与子类的组成相关。假设父亲有一百万个儿子。现在我有一个全局常量，叫做头发颜色，所有儿子都一样。所以在我儿子的课堂上会有如下声明：

```
private final String HAIR_COLOR = "red"; 
```

我的问题是，将全局常量 HAIR_COLOR 作为父类中的公共变量在子类中使用 getter 方法会更好，还是应该保持现在的状态？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:40:58.080

您应该首先定义要使用的常量。如果只有子类应该知道它，那么将它放在父类中是一个糟糕的设计。因为它是不可变的，所以将常量设为 public 并没有什么坏处。如果常量数据是敏感的并且您不想公开它，则将其设为私有是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:45:36.953

创建一个抽象类并在其中声明 HAIR_COLOR。并且所有子类将仅从该类继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:01:41.623

在我看来，最好的方法如下：

```
public class Father {

    // ...

}

public abstract class AbstractSon extends Father {
    public static final String HAIR_COLOR = "red";

    // ...

}

public class ConcreteSon extends AbstractSon {

    // ...

} 
```

# perl - 为什么这个标量值返回一个 int 1？（咀嚼）

> ID：13001954
> 
> 赞同：0
> 
> 时间：2012-10-21T20:37:44.973
> 
> 标签：perl

$receiver 返回 1。

```
print "Who is receiving this message?:";
my $receiver = chomp(my $r = <STDIN>);
print $receiver; 
```

另外，我在哪里可以找到更多关于 chomp 的文档？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T20:41:00.923

[`chomp`](http://perldoc.perl.org/functions/chomp.html)`$/`返回从其参数列表中每个字符串的末尾删除的输入记录分隔符（无论是什么）字符数。应该使用它：

```
chomp(my $reciever = <STDIN>); 
```

`chomp`可以在数组和列表上使用，我认为这是此功能的原因：

```
my $count = chomp(@array); 
```

的文档`chomp`在[`perldoc -f chomp`](http://perldoc.perl.org/functions/chomp.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T20:40:39.673

它返回从所有参数中删除的字符总数。

见[http://perldoc.perl.org/functions/chomp.html](http://perldoc.perl.org/functions/chomp.html)

相反，您可能想要`chomp(my $receiver = <STDIN>);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T20:40:37.853

因为`chomp`返回从其参数中删除的换行符的数量。查看[`perldoc -f chomp`](http://perldoc.perl.org/functions/chomp.html)更多信息。

你可能想要的是`chomp(my $receiver = <STDIN>);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T20:46:34.257

因为你用错了。

```
use Modern::Perl; 
my $receiver; 
chomp($receiver = <STDIN>); 
say "Result: " . $receiver;' 
```

更多信息：

```
perldoc -f chomp 
```

或[http://perldoc.perl.org/functions/chomp.html](http://perldoc.perl.org/functions/chomp.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T14:21:55.050

Chomp 执行“就地”删除并返回删除的字符数。

这是错误的：

```
my $var = <STDIN>;
my $result = chomp ($var);  ### here, $result will have '1' and not the chomped string of <STDIN> 
```

这是对的：

```
my $var = <STDIN>;
chomp ($var); 
```

# objective-c - 在 Mac 中为新文件类型添加预览

> ID：13001955
> 
> 赞同：1
> 
> 时间：2012-10-21T20:37:51.860
> 
> 标签：objective-c, macos, finder, quicklook

我正在开发一个使用新文件类型和扩展名的应用程序。什么控制 Finder 中文件的预览？我知道如何将文件图标更改为自定义图标，但要实际预览文件，例如 .jpg、.txt 或 .csv 吗？是由 Quick Look 管理的还是什么？

# embedded - SPI通信中CPOL/CPHA设置的使用

> ID：13001956
> 
> 赞同：2
> 
> 时间：2012-10-21T20:37:58.217
> 
> 标签：embedded, microcontroller, spi, serial-communication

谁能给我现实生活中的例子，说明 SPI 通信中的 4 种 CPOL/CPHA 配置模式有用吗？我了解它们的工作原理，但不知道何时使用它们。由于非标准实现，出于兼容性目的，我很快就阅读了一些参考，这是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-25T09:13:24.917

SPI 接口允许在两条线路（MOSI 和 MISO）上同时发送和接收数据。时钟极性 (CPOL) 和时钟相位 (CPHA) 是定义 SPI 总线使用的时钟格式的主要参数。根据 CPOL 参数，SPI 时钟可能是反相的或非反相的。CPHA 参数用于改变采样相位。如果 CPHA=0，则在前导（第一个）时钟沿采样数据。如果 CPHA=1，则数据在后沿（第二个）时钟沿采样，无论该时钟沿是上升沿还是下降沿。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:31:14.943

我有一块使用 SPI 连接闪存、实时时钟和加速度计的板。这些器件的数据表分别为 CPOL/CPHA 指定了不同的设置。因此，当微控制器打开特定设备的 SPI 接口时，它会为该设备适当地配置 SPI 控制器。我认为这四种不同的模式没有什么意义。您只需要使用您打算与之交互的设备指定的模式。某些设备可能在不止一种模式下工作。在这种情况下，请使用方便的模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T12:07:57.940

让我尝试解决为什么要引入 4 种模式的问题。我无法提供任何确凿的证据，但我相信这是一个可能的解释：

首先 - SPI 非常简单，它是关于串行发送一些比特流，具有单独的时钟和数据线，SPI 模式控制时钟极性和相位。鉴于 SPI 的简单性，例如，实现 SPI 从设备所需的只是一个串行输入移位寄存器，如[74HC595](http://www.ti.com/product/sn74hc595)（参见[示例应用程序](http://www.ermicro.com/blog/?p=1050)）。

现在，虽然 SPI 设备制造商显然可以同意一种普遍使用的模式，但我相信引入了其他模式以简化与简单移位寄存器的接口。有许多可用的，对时钟极性/相位有各种要求 - SPI 模式可以更容易地连接它们而无需任何胶合逻辑。

# java - java RSA多重加密

> ID：13001960
> 
> 赞同：0
> 
> 时间：2012-10-21T20:38:18.347
> 
> 标签：java

我用对称密钥加密我的消息，对称密钥本身必须用不同的 RSA 公钥进一步加密。当我尝试实现上述内容时，出现以下错误：

```
javax.crypto.IllegalBlockSizeException: The input was invalid: Invalid input length.
        at com.rsa.shareCrypto.j.hD.engineDoFinal(Unknown Source)
        at javax.crypto.Cipher.doFinal(Cipher.java:2087)
        at wrap1.main(wrap1.java:69) 
```

有没有办法解决这个问题？

我需要做这样的事情[[[[key]PK-A]PK-B]PK-C]，其中PK-A = A的公钥，类似PK-B和PK-C。

以下是我在这里尝试的代码是代码

`String InitialKey = "2011BCSChampionA";`

```
byte[] initkey = InitialKey.getBytes();
// First level encryption of the key 
```

`KeyPairGenerator keyGen = KeyPairGenerator.getInstance("RSA");`

```
keyGen.initialize(1024);
KeyPair keypair = keyGen.genKeyPair();
PrivateKey privateKey = keypair.getPrivate();
PublicKey publicKey = keypair.getPublic();
Cipher cipher = Cipher.getInstance("RSA");
cipher.init(Cipher.ENCRYPT_MODE, publicKey);
byte[] cipherData = cipher.doFinal(initkey);
// Second level of encryption
KeyPairGenerator keyGen1 = KeyPairGenerator.getInstance("RSA");
keyGen1.initialize(1024);
KeyPair keypair1 = keyGen1.genKeyPair();
PrivateKey prvKey = keypair1.getPrivate();
PublicKey pubKey = keypair1.getPublic();
Cipher cipher1 = Cipher.getInstance("RSA");
cipher1.init(Cipher.ENCRYPT_MODE, pubKey);
byte[] cipherData_new = cipher1.doFinal(cipherData); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T20:45:33.790

您应该填充数据以满足加密算法要求，或者您应该创建`Cipher`指向要使用的填充的类的实例，例如：

```
cipher = Cipher.getInstance("DES/ECB/PKCS5Padding"); 
```

由于您需要使用非对称密钥，请按以下方式初始化密码：

```
cipher = Cipher.getInstance("RSA/ECB/PKCS5Padding"); 
```

# objective-c - 从子层 cocos2d 中的菜单调用父场景中的方法

> ID：13001961
> 
> 赞同：0
> 
> 时间：2012-10-21T20:38:23.307
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在向我的 gamePlay 场景添加一个图层（hudLayer），然后向我要从中运行功能的那个图层添加一个菜单`- (void) pauseGame { method in here }`

我正在尝试这样实现：

```
- (void) addPauseButton: (CCScene *) parent {
pauseButton = [CCMenuItemImage itemWithNormalImage:@"pause.png" selectedImage:nil target:parent selector:@selector(pauseGame:)];
pause = [CCMenu menuWithItems:pauseButton, nil];
[hudLayer addChild: pause];
if (device == @"iPad") {
    pause.position = ccp(40,40);
}
else if (device == @"iPhoneFive") {
    pause.position = ccp(290,30);
}
else {
    pause.position = ccp(290,30);
}
}

- (id)init {

if( (self=[super init])) {
    paused = FALSE;
    CGSize screenSize = [CCDirector sharedDirector].winSize;

    hudLayer = [[[CCLayer alloc] init] autorelease];
    [self addChild:hudLayer z:2]; // adds hudLayer

    gameLayer = [[[CCLayer alloc] init] autorelease];
    [self addChild:gameLayer z:1];

    pauseMenu = [[[CCLayer alloc] init] autorelease];
    [self addChild:pauseMenu z:4];

    [self setupWorld];
    [self addPauseButton:self];   //calls method to add pause button to hudLayer sending it the scene as a variable

    CGPoint offScreenPoint = ccp(screenSize.width+(screenSize.width/2), 0);

    pauseMenu.position = offScreenPoint;

    self.motionManager = [[[CMMotionManager alloc] init] autorelease];
    motionManager.deviceMotionUpdateInterval = 1.0/60.0;
    if (motionManager.isDeviceMotionAvailable) {
        [motionManager startDeviceMotionUpdates];
    }
    self.iPadBool = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad;

    if (iPadBool) {
        device = @"iPad";
    }
    else if (screenSize.height > 490) {
        device = @"iPhoneFive";
    }
    else {
        device = @"iPhone";
    }
    NSLog(@"the current device is a, %@", device);
    [self schedule:@selector(update:)];

}
return self;
} 
```

但是，这会引发错误：***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[gamePlay pauseGame:]: unrecognized selector sent to instance 0x11d310e0”根本不知道为什么：/任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:02:36.623

选择器应该是

```
@selector(pauseGame) 
```

没有冒号。它不带参数。方法应该是：

```
-(void) pauseGame
{
} 
```

# java - 在运行时创建通用 DAO 接口

> ID：13001966
> 
> 赞同：0
> 
> 时间：2012-10-21T20:38:47.967
> 
> 标签：java, generics, proxy, dry

```
public interface  GenericDAO<T>{
   // some methods
}
public interface PersonGenericDAO extends GenericDAO<Person> {}
public interface TeacherGenericDAO extends GenericDAO<Teacher> {}
public interface StudentGenericDAO extends GenericDAO<Student> {} 
```

我有一个库，它通过这些接口创建代理实例，如下所示：

```
creator.onDemand(PersonGenericDAO.class); 
```

我只想创建一个静态方法来删除不必要的接口。但我对此一无所知。

```
public static <X> GenericDAO<X> getGenericDAO(X type){
   // return ?????????? 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:02:55.460

使参数 a `Class<X>`：

```
public static <X> GenericDAO<X> getGenericDAO(Class<X> type){
   return new HibernateDAO<X>();
} 
```

并将其称为

```
GenericDao<Person> personDao = getGenericDAO(Person.class); 
```

# java - 在 Java 中对 String 和 Object 使用 equals() 方法

> ID：13001971
> 
> 赞同：9
> 
> 时间：2012-10-21T20:39:13.387
> 
> 标签：java, string, equals

```
Object o1 = new Object();
Object o2 = new Object();
//o1=o2;
System.out.println(o1.equals(o2)); 
```

它返回`false`。`true`如果评论被删除，它可以返回。

* * *

为什么同一件事不适用于`String`班级？

```
String s1=new String();
String s2=new String();
System.out.println(s1.equals(s2)); 
```

它返回`true`。为什么？（因为`String`使用实习生或其他涉及的东西？）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-21T20:40:42.387

因为**[String 的 equals()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)**比较的是内容，而不是对象本身。

> 公共布尔等于（对象anObject）
> 
> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是`String`表示与此对象相同的字符序列的对象时，结果才为真。

```
 /* String.equals() */
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = count;
        if (n == anotherString.count) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = offset;
            int j = anotherString.offset;
            while (n-- != 0) {
                if (v1[i++] != v2[j++])
                    return false;
            }
            return true;
        }
    }
    return false;
} 
```

（链接到[String.equals()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.equals%28java.lang.Object%29)的来源）

**[与Object 的等号](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)**对比：

> 类的equals方法`Object`实现了对象上最有区别的可能等价关系；也就是说，对于任何非空引用值`x`and `y`，当且仅当`x`and`y`引用同一个对象（`x == y`具有值`true`）时，此方法才返回 true。

```
/* Object.equals() */
public boolean equals(Object obj) {
    return (this == obj);
} 
```

（链接到[Object.equals()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Object.java#Object.equals%28java.lang.Object%29)的来源）

另外，不要忘记`equals()`函数的契约：

> equals 方法在非空对象引用上实现等价关系：
> 
> *   它是**自反**的：对于任何非空引用值`x`，`x.equals(x)`都应该返回 true。
> *   它是**对称**的：对于任何非空引用值`x`和`y`，`x.equals(y)`当且仅当`y.equals(x)`返回 true 时才应返回 true。
> *   它是可**传递**的：对于任何非空引用值`x`、`y`和`z`，如果`x.equals(y)`返回`true`和`y.equals(z)`返回`true`，则`x.equals(z)`应该返回`true`。
> *   它是**一致**的：对于任何非空引用值`x`和`y`，多次调用`x.equals(y)`一致返回`true`或一致返回`false`，前提是没有修改对象上相等比较中使用的信息。
> *   对于任何非空引用值`x`，`x.equals(null)`应该返回`false`。

还推荐阅读：

*   **[对象.hashCode()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode%28%29)**
*   **[有效的 Java（布洛赫）](https://rads.stackoverflow.com/amzn/click/com/0321356683)**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-21T20:41:10.910

`equals`for`Object`比较内存引用。
这就是为什么它是错误的，因为它们是不同`Object`的
`equals`，因为`String`被覆盖以基于字符进行比较。
您有 2 个空`String`对象，这就是`equals`返回的原因`true`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T21:09:20.080

`==`比较对象/字符串/任何东西的地址

`.equals()`旨在使用对象的内部状态进行比较。

所以：

`new Object() == new Object() => false`- 内存中不同地址的两个独立对象。

`new String("a") == new String("a") => false`- 相同的情况 - 字符串对象的两个单独地址。

`new String("a").equals(new String("a")) => true`- 地址不同，但 Java 将采用一个对象状态 ('a') 并与其他对象状态 ('a') 进行比较，发现它们相等并报告为真。

使用 equals() 方法，您可以以任何适合您的程序的方式对比较进行编码。

`intern()`是一个有点不同的故事。它旨在为相同的字符序列返回相同的对象（地址）。当您多次构造相同的字符串时，减少所需的内存量很有用。

`new String("aaa").intern()`如果曾经有人创建过“aaa”字符串，将在机器内存中寻找，并将返回字符串的第一个实例......如果没有找到 - 当前的将被列为第一个和所有进一步的“aaa”。实习生() 和 new`String("aaa").intern()`并将`("a"+"aa").intern()`返回那个“第一个”实例。

当心：`"aaa".intern()`操作不是很快，如果您将实习所有字符串 - 您将节省一些内存，但会丢失相当多的 CPU 工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-21T20:42:11.930

类中的`equals`实现`Object`只比较引用。这是源代码：

```
public boolean equals(Object obj) {
return (this == obj);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-21T20:45:40.777

如果要使其以其他方式运行，则需要在类中重写 equals 方法。默认情况下，它检查两个引用是否引用同一个对象。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-08T16:20:30.677

类的`equals()`Method`Object`不知道如何比较字符串，它只知道如何比较对象。为了比较字符串，字符串类将覆盖`equals()`Method 并比较其中的字符串。

`Object.equals()`将仅比较引用，其中`String.equals()`将比较值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-28T14:01:56.317

有趣的是，不像`Sting`不会`StringBuffer`覆盖该`equals()`方法。它的功能与`Object`类相同。

# ruby-on-rails - 结合 kaminari 和acts-as-taggable-on

> ID：13001973
> 
> 赞同：2
> 
> 时间：2012-10-21T20:39:37.660
> 
> 标签：ruby-on-rails, ruby, tags, acts-as-taggable-on, kaminari

我正在尝试在我正在构建的网站上同时使用acts-as-taggable-on 和 kaminari，并且两者在技术上都可以正常工作，但是这种行为是不利的。

现在，我的标签 indeces 应该是分页的，但是网址有点难看，看起来像`/page/3?tag=herp`. 第一页和不需要分页的标签页显示为`/tag/herp`. 理想情况下，我想做`/tag/herp/page/3`.

这是我的相关部分`routes.rb`：

```
root to: 'posts#index'
resources :posts do
  get 'page/:page', action: :index, on: :collection
end

match "about" => "static_pages#about", as: :about
match "portfolio" => "portfolios#index", as: :portfolio

# Tags
get 'tags/:tag', to: 'posts#index', as: :tag 
```

# java - 从多个继承的类返回一个抽象类

> ID：13001977
> 
> 赞同：0
> 
> 时间：2012-10-21T20:40:01.263
> 
> 标签：java

我正在尝试执行以下操作：

```
abstract class G {
    protected var = 0;
}

class G1 extends G {
    var = 1;
}

class G2 extends G {
    var = 2;
}

// This is where I'm having a problem
public G method() {
    switch(someVar) {
        case x:
            return new G1();
        case y:
            return new G2();
    }
 } 
```

Java 抱怨该方法必须返回 G 类型。我应该如何返回 G1 或 G2（它们都扩展了 G）？很可能我正在接近这个完全错误的......

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:42:33.133

您的问题与继承无关；`G`在您的开关不属于`case x`or的情况下，您必须抛出异常或返回某种类型的东西`case y`。

例如：

```
public G method() {
    switch(someVar) {
        case x:
            return new G1();
        case y:
            return new G2();
        default:
            // You can return null or a default instance of type G here as well.
            throw new UnsupportedOperationException("cases other than x or y are not supported.");
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:46:36.417

`switch-case`在您的块中添加默认选项：

```
 default: .... 
```

它抱怨是因为 if `someVar`is not`x`或者`y`then 它没有任何 return 声明。

**或者**，您可以添加一个默认值，`return statement in the end` 例如

```
 public G method() {
    switch(someVar) {
       case x:
        return new G1();
       case y:
        return new G2();
     }
     return defaultValue; // return default
  } 
```

# java - 有没有原生的Android App Splash Screen分步教程

> ID：13001978
> 
> 赞同：-1
> 
> 时间：2012-10-21T20:40:20.200
> 
> 标签：java, android, native, splash-screen

如果有关于制作 Android 应用程序启动画面的详细教程，我真的很感激。

请帮助我。

我看到一些启动画面在加载时显示全屏广告。如果我能学到这一点，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:43:10.210

**不要在安卓上使用闪屏！**

尽管图形密集型游戏实际上是在后台加载资源，但每个使用闪屏的应用程序都是错误的。

这包括 facebook、skype、wunderlist 等，等等，等等……每一个。错误的！

**编辑：**

链接到一篇长篇博文，进一步解释为什么不在 Android 上使用启动画面：

[http://cyrilmottier.com/2012/05/03/splash-screens-are-evil-dont-use-them/](http://cyrilmottier.com/2012/05/03/splash-screens-are-evil-dont-use-them/)

博客作者是 Android 和 iOS 的开发人员，被 Google 认可为 Android 平台上的 Google 开发专家，并且有很[长的列表](http://cyrilmottier.com/about/)会议，他经常做关于 android 的演示。

只是为了将帖子中的一些数据带到社区，它解释了以下主要主题：

*   启动画面阻止用户使用应用程序
*   大多数时候，没有必要
*   在框架之外显示启动图像或启动画面
*   添加曾经查看过的资源会增加 APK 的大小
*   实现出色的启动画面非常困难且乏味
*   用户在发布时不关心品牌
*   闪屏表示单入口点应用程序
*   在多任务环境中，启动图像没有任何意义。

我建议任何对该主题感兴趣的人阅读全文。

# php - 如何获得两个日期之间天差量的整数？

> ID：13001979
> 
> 赞同：0
> 
> 时间：2012-10-21T20:40:21.513
> 
> 标签：php

好的，我有一些代码（我认为它在某些地方可能是混乱和多余的 - 请注意，这是关于总统选举，看看哪个候选人做得更好，因此是罗姆尼的）：

```
$romneytime = intval($twitromney["timestamp"]);
$romneydate = date('m/d/Y', $romneytime);
$romlinearray = array();
$romlinearray["date"] = null;
$romlinearray["value"] = null;
$romneydiffobj = date_diff(date_create_from_format('m/d/Y', $dateromney),  date_create_from_format('m/d/Y', $romneydate));
$romneydiff = $romneydiffobj->format('%d')

var_dump($romneydiff); 
```

出于某种原因，`var_dump($romneydiff);`没有发布任何数据。

代码应该是取一个时间戳的整数，把它变成日期格式，然后和另一个日期比较，然后输出两个日期的差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:49:03.323

使用 DateTime 对象和 diff() 方法返回 DateInterval，然后使用 format 获取与 DateInterval 的差异

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

# mysql - 如何优化我的查询？

> ID：13001981
> 
> 赞同：2
> 
> 时间：2012-10-21T20:40:26.220
> 
> 标签：mysql, optimization, join

我编写了一个查询来从 WordPress 数据库中提取报告。查询速度慢得令人难以置信，所以我想对其进行优化。我做了一些研究，无法理解什么是加快查询速度的最佳方法（即使我写了，我也几乎不明白我做了什么。）有人能指出我优化这个的正确方向吗慢查询。

```
SELECT
wp1.meta_value as firstName,
wp2.meta_value as middleName,
wp3.meta_value as lastName,
wp5.meta_value as email2,
wp6.meta_value as address,
wp7.meta_value as city,
wp8.meta_value as state,
wp9.meta_value as zip,
wp10.meta_value as country,
wp11.meta_value as phone,
wp12.meta_value as dateOfBirth
FROM wp99_usermeta wp1
JOIN wp99_usermeta wp2 ON wp1.user_id = wp2.user_id and wp2.meta_key = 'middle_name'
JOIN wp99_usermeta wp3 ON wp1.user_id = wp3.user_id and wp3.meta_key = 'last_name'
JOIN wp99_usermeta wp5 ON wp1.user_id = wp5.user_id and wp5.meta_key = 'email2'
JOIN wp99_usermeta wp6 ON wp1.user_id = wp6.user_id and wp6.meta_key = 'street_address'
JOIN wp99_usermeta wp7 ON wp1.user_id = wp7.user_id and wp7.meta_key = 'city'
JOIN wp99_usermeta wp8 ON wp1.user_id = wp8.user_id and wp8.meta_key = 'state'
JOIN wp99_usermeta wp9 ON wp1.user_id = wp9.user_id and wp9.meta_key = 'zip'
JOIN wp99_usermeta wp10 ON wp1.user_id = wp10.user_id and wp10.meta_key = 'country'
JOIN wp99_usermeta wp11 ON wp1.user_id = wp11.user_id and wp11.meta_key = 'phone'
JOIN wp99_usermeta wp12 ON wp1.user_id = wp12.user_id and wp12.meta_key = 'date_of_birth'
WHERE wp1.meta_key = 'first_name' 
```

默认`wp_usermeta`表结构：

```
CREATE TABLE `wp_usermeta` (
  `umeta_id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` bigint(20) unsigned NOT NULL DEFAULT '0',
  `meta_key` varchar(255) DEFAULT NULL,
  `meta_value` longtext,
  PRIMARY KEY (`umeta_id`),
  KEY `user_id` (`user_id`),
  KEY `meta_key` (`meta_key`)
) ENGINE=***  DEFAULT CHARSET=utf8 AUTO_INCREMENT=15 ; 
```

尝试 ALTER TABLE 建议。这在第 5 行给了我一个错误

ALTER TABLE wp99_usermeta ADD INDEX meta_key__user_id (meta_key, user_id) ;

```
SELECT
wp1.meta_value as firstName,
wp2.meta_value as middleName,
wp3.meta_value as lastName,
wp5.meta_value as email2,
wp6.meta_value as address,
wp7.meta_value as city,
wp8.meta_value as state,
wp9.meta_value as zip,
wp10.meta_value as country
FROM wp99_usermeta wp1
JOIN wp99_usermeta wp2 ON wp1.user_id = wp2.meta_key__user_id = 'middle_name'
JOIN wp99_usermeta wp3 ON wp1.user_id = wp3.meta_key__user_id = 'last_name'
JOIN wp99_usermeta wp5 ON wp1.user_id = wp5.meta_key__user_id = 'email2'
JOIN wp99_usermeta wp6 ON wp1.user_id = wp6.meta_key__user_id = 'street_address'
JOIN wp99_usermeta wp7 ON wp1.user_id = wp7.meta_key__user_id = 'city'
JOIN wp99_usermeta wp8 ON wp1.user_id = wp8.meta_key__user_id = 'state'
JOIN wp99_usermeta wp9 ON wp1.user_id = wp9.meta_key__user_id = 'zip'
JOIN wp99_usermeta wp10 ON wp1.user_id = wp10.meta_key__user_id = 'country'
WHERE wp1.meta_key = 'first_name' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:08:35.307

我会添加一个化合物`(meta_key, user_id)`：

```
ALTER TABLE wp99_usermeta
    ADD INDEX meta_key__user_id 
      (meta_key, user_id) ; 
```

通过上述添加，现有`(meta_key)`索引是多余的，您可以将其删除。但是@biziclop 指出这可能会干扰插件和/或 WordPress 自我更新（数据库）过程。因此，您可以留下它，也许可以在 WordPress 开发者论坛上询问有关添加/删除索引的影响/问题的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:20:41.280

您可以使用以下方法尝试一些乐趣`GROUP BY`：

```
SELECT
  MAX( IF( meta_key = 'first_name', meta_value , NULL ) AS firstName,
  MAX( IF( meta_key = 'last_name',  meta_value , NULL ) AS lastName,
  ...
FROM wp99_usermeta
GROUP BY user_id 
```

如果您必须过滤实体，您可以执行类似的操作：

```
SELECT
  MAX( IF( b.meta_key = 'first_name', b.meta_value , NULL ) AS firstName,
  MAX( IF( b.meta_key = 'last_name',  b.meta_value , NULL ) AS lastName,
  ...
FROM wp99_usermeta a
JOIN wp99_usermeta b
WHERE a.meta_key = 'first_name'
  AND a.meta_value = 'Joe'
GROUP BY user_id 
```

# android - 如何遵循致命信号 11 (SIGSEGV)

> ID：13001982
> 
> 赞同：3
> 
> 时间：2012-10-21T20:40:27.233
> 
> 标签：android, tesseract, segmentation-fault

我正在开发一个带有用于 OCR 的 opencv 和 tesseract 的 android 应用程序。我使用了[guat.am](http://gaut.am/making-an-ocr-android-app-using-tesseract/)的基本 OCR 中的一些代码，

```
Bitmap bmp = Bitmap.createBitmap(ima.cols(), ima.rows(), Bitmap.Config.ARGB_8888);
        Utils.matToBitmap(imagethre, bmp,true);

        TessBaseAPI baseApi = new TessBaseAPI();
        baseApi.setDebug(true);
        baseApi.init(DATA_PATH, lang);
        baseApi.setImage(bmp);
        String recognizedText = baseApi.getUTF8Text(); 
```

这不是路径或语言或类似问题的问题，因为这是可行的，但有时，对于某些图片它可以工作，但对于其他图片则不行...

我怎样才能按照该错误知道发生了什么？

我发布的代码的最后一行中的应用程序崩溃

调试我现在看到应用程序在调用 TessBaseApi.class 时崩溃，特别是这一行：

```
String text = nativeGetUTF8Text(); 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:13:30.367

好吧，我找不到确切的方法，但是我的方法只是在每一行之后打印 Log 语句，如果有时失败，则记录直到打印该点为止。因此，让您知道不存在日志的行导致了错误。

# javascript - 客户端操作 MongoDB 数据而不发送到服务器

> ID：13001989
> 
> 赞同：1
> 
> 时间：2012-10-21T20:40:52.340
> 
> 标签：javascript, html, google-maps, mongodb, flask

我有很多 GPS 点需要在 Google 地图中使用。从 JSON 加载时，文档大约为 150MB。谷歌地图可以很好地处理这个问题。

我建立的一个网站让用户可以选择 20-50 个点并用附加信息标记它们。这需要发送到服务器，服务器做一些处理，并再次发回GPS点。

我正在寻找加速此应用程序的方法。

不幸的是，考虑到我们奇怪的要求，对这些数据进行稀疏采样并不是解决方案。

我看到了两个瓶颈。一种是初始转移给客户。我的目标是在本地进行所有处理，并且仅在处理完成时将 150MB 推回服务器。另一个瓶颈是查询时间，考虑到传输时间，这似乎不需要那么长时间。

使用 HTML5 本地存储会对此有帮助吗？还有比这更好的解决方案吗？

我目前的设置方式：

1.  用户访问网站。
2.  该网站从另一个查询 MongoDB 并提供 JSON 响应的数据库服务器请求 JSON。
3.  浏览器下载该 JSON 并在地图上绘制点。

我在想我可以插入 2 到 3 之间的东西，这些东西会写入本地存储并让用户在本地操作这些东西。但是有更好的方法吗？

更多详细信息：这是一个内部数据管理工具，可能由 4 个人在使用 LAN 速度的建筑物中使用。但它仍然很慢。每页加载可能需要 10 秒。

# c - 为什么这个 GtkFrame 上没有边框？

> ID：13001990
> 
> 赞同：3
> 
> 时间：2012-10-21T20:40:52.990
> 
> 标签：c, gtk, frame, gtk3

我正在阅读教程`GtkFrame`，我已经编译了一些代码示例，但与教程的 screnhoot 不同，但我使用的程序`GtkFrame`没有边框。

以下代码：

```
#include <gtk/gtk.h>

int main( int   argc,
          char *argv[] )
{
  /* GtkWidget is the storage type for widgets */
  GtkWidget *window;
  GtkWidget *frame;
  GtkWidget *button;
  GtkWidget *label;
  gint i;

  /* Initialise GTK */
  gtk_init(&argc, &argv);

  /* Create a new window */
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title(GTK_WINDOW(window), "Frame Example");

  /* Here we connect the "destroy" event to a signal handler */ 
  g_signal_connect (G_OBJECT (window), "destroy",
                      G_CALLBACK (gtk_main_quit), NULL);

  gtk_widget_set_size_request(window, 300, 300);
  /* Sets the border width of the window. */
  gtk_container_set_border_width (GTK_CONTAINER (window), 10);

  label = gtk_label_new("foo");

  /* Create a Frame */
  frame = gtk_frame_new(NULL);
  gtk_container_add(GTK_CONTAINER(frame), label);
  gtk_widget_set_size_request(frame, 30, 30);

  gtk_container_add(GTK_CONTAINER(window), frame);

  /* Set the frame's label */
  gtk_frame_set_label( GTK_FRAME(frame), "GTK Frame Widget" );

  /* Set the style of the frame */
  gtk_frame_set_shadow_type( GTK_FRAME(frame), GTK_SHADOW_ETCHED_OUT);

  gtk_widget_show(frame);

  /* Display the window */
  gtk_widget_show (window);

  /* Enter the event loop */
  gtk_main ();

  return(0);
}
/* example-end */ 
```

生成程序：

![在此处输入图像描述](../Images/c5b62fea3e71ac31135c3d1eba2fbf7d.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:02:20.150

这是 GTK 错误[659926](http://bugzilla.gnome.org/show_bug.cgi?id=659926)。然而，这似乎主要是因为 Adwaita 主题（默认 GNOME 3 主题）忽略了框架，所以也许改变主题（使用 gnome-tweak-tool，如果你想使用 GUI）就可以了. 然而，我认为框架在许多 GUI 中被滥用，并且经常导致界面丑陋，因为它们增加了视觉混乱。越少越好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T18:32:00.273

您是否尝试过设置框架的阴影类型？

```
gtk_frame_set_shadow_type (GTK_FRAME (frame), GTK_SHADOW_TYPE_IN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-29T15:14:52.157

你必须使用 CSS。

CSS 文件示例：

```
frame#LINMONI_Frame_Inactiv {
    color: grey;
    border-style:solid;
    border-width: 8px;
    border-color: grey;
    background-color: white;
} 
```

在创建 gtkwidgets 之后：

```
 GtkCssProvider *provider;
    GdkScreen *screen;
    GdkDisplay *display;

    provider = gtk_css_provider_new();
    display = gdk_display_get_default();
    screen = gdk_display_get_default_screen(display);
    gtk_style_context_add_provider_for_screen(screen, GTK_STYLE_PROVIDER(provider),GTK_STYLE_PROVIDER_PRIORITY_USER);
    gsize bytes_read;
    gsize bytes_written;
    GError *error = NULL;
    if (!gtk_css_provider_load_from_path(provider,g_filename_to_utf8("yourcssfilename.css, csCompleteFileName.GetLength(),&bytes_read, &bytes_written, &error), NULL)){
        if (error){
            Trace_Error("gtk_css_provider_load_from_path=%s\n",error->message);
        }
    }
    g_object_unref(provider); 
```

# c++ - c++ 非完全构造的对象释放

> ID：13001997
> 
> 赞同：2
> 
> 时间：2012-10-21T20:41:28.640
> 
> 标签：c++, exception, exception-handling

**代码 ：**

```
#include<iostream>
using namespace std;
class A{
    public:
    A(){cout << "A() Constructor " << endl;
        throw 1;
    }

};

int main(){
A* p=0;
cout << p << endl; // p value is 0
try{
p=new A(); // object is not fully constructed, no address is returned to p. for future deallocation

}
catch(...){cout << "Exception" << endl;}
cout << p << endl; // this will output that p has the value 0,proof that no address was returned to p.

} 
```

为堆中的一个对象分配内存，内存的地址被传递给构造函数，但是当构造函数时`throw 1;`，类型的对象`A`不会被认为是一个完全构造的对象。所以没有指针会返回指针p。如果我理解错误，请随时纠正我。

**问题：**
**1）**所以我的问题是在这种情况下如何为 A 对象释放内存。我不是在谈论析构函数调用，而是内存的释放。

**2）**当我在函数`A`内部创建一个本地类型的对象时呢？`main`显然它也不会完全建成。这个对象什么时候被释放（当然是在调用完全构造的子对象的析构函数之后）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T20:44:01.490

1) 解除分配已为您完成。

2）如果它是一个本地对象，它一开始就没有被分配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T20:46:06.907

当构造函数抛出为该对象分配的内存时，会自动释放，顺便说一句，不会调用析构函数。您不需要解除分配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T20:49:38.473

完成的分配`new A()`由多个步骤组成：

1.  使用分配内存`operator new(sizeof(A))`。
2.  尝试在分配的内存中默认构造一个对象。
3.  默认构造失败时，`operator delete(x)`使用之前获得的地址调用。

更一般地，如果您使用重载的`operator new()`，例如`new(allocator) A()`调用`operator new(size_t, Alloctor)`（其中`allocator`可转换为`Allocator`），`operator delete()`则调用对应的。

作为异常抛出的一部分，所有部分构造的子对象也被销毁（以它们构造的相反顺序）。也就是说，如果从对象的构造函数中抛出异常，您不需要关心清理（假设所有子对象都正确地照顾它们分配的资源）。这与对象是在堆上还是在堆栈上分配无关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-04T12:32:05.133

在 CPP 中，constructor(ctor) 调用的顺序是：

*   virtual base class：virtual base ctor，按照深度优先顺序调用。
*   基类：定义类时根据派生声明调用基类的顺序。
*   非静态成员对象
*   派生类ctor；

以相反的顺序调用析构函数（dtor）。

CPP 确保完全构造的对象（非指针）的资源将被释放。

有 RAII (Resource Acquisition Is Initialization)。我们使用对象包装原始指针来分配内存，然后在 dtor 中释放内存。如果派生对象由于（内存不足、异常等）而部分构造，则将调用成员对象 dtor。

在上面的简单示例中，没有分配资源，因此没有资源泄漏。

但是如果有成员指针在 throw 之前分配内存，就会出现内存泄漏。如果我们将内存包装在一个类中，并将这个类的一个对象作为一个组件（使用 RAII），那么就不会有内存泄漏。