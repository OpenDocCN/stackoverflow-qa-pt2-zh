# StackOverflow 问答 16086000-16086999

# javascript - 从网页中检索变量

> ID：16086007
> 
> 赞同：-2
> 
> 时间：2013-04-18T14:40:55.540
> 
> 标签：javascript, variables, cookies

我需要从您需要登录的网站中检索一些变量。为了解决同源策略，我在我的服务器上放置了一个 proxy.php。这可以从不需要登录的站点中检索变量...

但是，如何从需要登录的网站检索数据？

是否可以下载“登录”cookie 并放在我的服务器上？或者是否可以手动打开此站点，然后通过参考打开的浏览器屏幕检索 javascript 中的变量？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:50:21.830

是的，您可以在 javascript 中创建具有一些唯一 ID 的 cookie，并将其记录保存在服务器端存储中，并且在登录期间，您可以将客户端的 cookie 详细信息与 cookie 的服务器端详细信息进行匹配，然后执行您的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:50:29.387

这是要被很多用户使用吗？

如果是这样，那么用户应该如何信任您？他们会将他们的用户名和密码发送到您的服务器吗？

如果您只为自己使用它，您可以在 firefox 中使用 force cors 插件（安装点击视图 => 工具栏 => 插件栏并点击右下角的“cors”文本）。通过该活动，您可以向任何站点发送 xmlhttprequest。

如果您希望该服务可供您网站的用户使用但只使用一个帐户，您可以查看 curl 但它可能不是线程保存（多个用户同时使用它）。如果是这种情况，我建议删除此问题并将其重新发布为 PHP 问题。如何 PHP 代理 xhr 请求。

# maven - javadoc的动态生成

> ID：16086014
> 
> 赞同：1
> 
> 时间：2013-04-18T14:41:06.633
> 
> 标签：maven, javadoc

我有一个生成 javadoc 的项目。

我有另一个项目，它使用了上述项目的一部分。是否可以定义一个仅从上述项目生成 javadoc 到我定义它的执行（仅包括特定包）？

目前，我对上述项目有一个 javadoc 依赖项，它为我提供了整个 javadoc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:01:02.043

嗯，是的，也不是。您可以使用[<excludePackageNames>标签配置](http://maven.apache.org/plugins/maven-javadoc-plugin/examples/exclude-package-names.html)[maven-javadoc-plugin](http://maven.apache.org/plugins/maven-javadoc-plugin/)以排除包（并因此包括其他包），例如

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <configuration>
       <excludePackageNames>com.excluded.package.*</excludePackageNames>
    </configuration>
</plugin> 
```

根据您的用例（以及所需的工作量），另一个可行的解决方案是将当前项目拆分为两个单独的项目，例如`com.company.example.api`and `com.company.example.implementation`，然后只为该`api`项目生成 javadoc。

# jquery - 在加载时折叠自定义 jquery 手风琴

> ID：16086016
> 
> 赞同：1
> 
> 时间：2013-04-18T14:41:07.723
> 
> 标签：jquery, jquery-ui, customization, accordion

我正在修改的 HTML 主题附带了一个自定义手风琴，我只想弄清楚如何在加载时将它们全部折叠（或者在加载时打开第三个选项；任何一个都可以）。

```
(function() {

    var $container = $('.acc-container'),
        $trigger   = $('.acc-trigger');

    $container.hide();
    $trigger.first().addClass('active').next().show();

    var fullWidth = $container.outerWidth(true);
    $trigger.css('width', fullWidth);
    $container.css('width', fullWidth);

    $trigger.on('click', function(e) {
        if( $(this).next().is(':hidden') ) {
            $trigger.removeClass('active').next().slideUp(300);
            $(this).toggleClass('active').next().slideDown(300);
        }
        e.preventDefault();
    });

    // Resize
    $(window).on('resize', function() {
        fullWidth = $container.outerWidth(true)
        $trigger.css('width', $trigger.parent().width() );
        $container.css('width', $container.parent().width() );
    });

})(); 
```

JQuery 根本不是我的强项，所以任何关于设置它的帮助都会让我很高兴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:45:03.460

如果您删除或更改：

`$trigger.first().addClass('active').next().show();`

至

`$trigger.get(2).addClass('active').next().show();`

这应该选择第三个打开，或删除该行以使它们全部折叠。

# php - CodeIgniter，PHP和会话被销毁时重新加载首页

> ID：16086024
> 
> 赞同：2
> 
> 时间：2013-04-18T14:41:32.727
> 
> 标签：php, codeigniter, session

我正在尝试创建一个用户应该能够注册、登录和注销的网页。这一切都很好，但是，用户需要按两次退出按钮才能重新加载页面，或者至少我是这样看的......

这是一些代码：

这是我的页面顶部，带有登录/注销选项

```
<div id="topmenu">
        <?php

        if(!isset($_SESSION['check'])) {
        echo ' Welcome, <a href="/index.php/login/">Log In</a> <a href="/index.php/register/">Register</a> ';
        }
        else {
        echo ' Welcome, ' .$_SESSION['name'] .'! <a href="/index.php/login/destroy/">Sign Out</a>'; 
        }

        ?>
</div> 
```

这是登录控制器中的destroy函数的作用

```
public function destroy()
    {
        session_destroy();
        $this->load->view('frontpage');
    } 
```

当按下退出按钮时，会加载首页视图，但是顶部的这个栏（顶部菜单 div）保持不变，并且仍然显示退出选项，即使会话已被破坏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:39:39.053

来自[PHP.net](http://us2.php.net/manual/en/function.session-destroy.php)：

> session_destroy() 销毁与当前会话关联的所有数据。**它不会取消设置与会话关联的任何全局变量，也不会取消**设置会话 cookie。

您必须强制页面加载，例如重定向，才能摆脱它。

替换 **$this->load->view('frontpage');** 使用 **重定向（“首页”）；** 重定向到名为 frontpage 的控制器或 **redirect(current_url());** 重定向到当前页面。

您还可以使用 CI 的[session 类](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)获得更好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:18:36.620

在下次重新加载之前，变量仍将被初始化，使用 unset($_SESSION['check']) 手动取消设置检查变量或使用重定向。

# jquery - 滚动到 JQuery 对话框的顶部

> ID：16086026
> 
> 赞同：-2
> 
> 时间：2013-04-18T14:41:40.917
> 
> 标签：jquery, jquery-dialog

我有一个 JQuery 对话框，其中有一个长表单（带有滚动条）。当我点击保存按钮时，表单顶部会显示一些消息。但是对话框已经向下滚动，用户无法注意到顶部的消息。

点击保存按钮后如何向上滚动？

我已经看到问题[jQuery Dialog scroll to element in dialog](https://stackoverflow.com/questions/9888585/jquery-dialog-scroll-to-element-in-dialog)和[How to scroll to specific item using jQuery?](https://stackoverflow.com/questions/2905867/how-to-scroll-to-specific-item-using-jquery) 但无法使其工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:54:47.433

称呼

```
$("elementswithoverflowautoinsidelightbox").animate ({scrollTop: 0}); 
```

# android - Android Ant 和 TeamCity

> ID：16086029
> 
> 赞同：0
> 
> 时间：2013-04-18T14:41:49.900
> 
> 标签：android, ant, teamcity, build.xml

是否可以从 AndroidManifest.xml 文件中获取 android:versionCode 和 android:versionName 并在我的 Ant build.xml 文件中使用它们？我想在编译时将这些值合并到我的 APK 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:03:23.860

我相信您可以使用 XMLProperties 任务来实现这一点。

```
<xmlproperty file="AndroidManifest.xml"/> 
```

应该给你：

```
manifest(android:versionCode)="1"
manifest(android:versionName)="1.0" 
```

根据[Ant 手册中的定义，](http://ant.apache.org/manual/Tasks/xmlproperty.html)虽然我没有尝试/测试过。

# firefox - XUL/Firefox：在加载插件时创建新的浏览器窗口

> ID：16086031
> 
> 赞同：0
> 
> 时间：2013-04-18T14:41:56.240
> 
> 标签：firefox, firefox-addon, xul, add-on

我正在开发引导式 Firefox 插件。在我的`startup`函数中，我正在构建对象的新实例，它使用以下代码创建新的 Firefox 窗口：

```
function createWindow (cb) {
    const appHiddenWindow = Services.appShell.applicationProvidedHiddenWindow
        , hidden = Services.appShell.hiddenDOMWindow;

    // For definition of OpenBrowserWindow() see
    //   http://mxr.mozilla.org/mozilla-central/source/browser/base/content/browser.js
    // Prior to Firefox 20 "private" option is silently ignored
    let parent = appHiddenWindow ? hidden : RecentWindow.getMostRecentBrowserWindow()
      , window = parent.OpenBrowserWindow({ private: true });
    window.addEventListener("load", onWindowLoad);
    return window;

    function onWindowLoad (e) {
        window.removeEventListener("load", onWindowLoad);
        window.gBrowser.addEventListener("pageshow", onPageShow);
    }

    function onPageShow (e) {
        dump("onPageShow\n");
        try {
            cb(window);
        } catch (e) {}
    }
} 
```

由于一些我不知道的原因，这段代码在不同情况下的行为不同：在 20 之前的 Firefox 上，如果它在应用程序启动时执行，`onPageShow`回调永远不会触发。我认为这是因为`gBrowser`'s`selectedBrowser` 只是不加载主页并在`about:blank`加载后停止。当我手动重新激活我的扩展程序时（当 Firefox 已经加载时），为什么它会在新窗口中加载主页？

将主页加载到`selectedBrowser`（在较新的 Fx 版本中）时出现问题：在这种情况下，它不会开始加载由我指定的 URL，而是继续加载我的主页。

那么如何确定是否`gBrowser`要加载主页？为什么它在应用程序启动和插件重新激活时表现不同？

*PS：要使上述代码正常工作，必须执行这些操作`import`并使用以下后备：*

```
Cu.import("resource://gre/modules/Services.jsm");
try {
    Cu.import("resource:///modules/RecentWindow.jsm");
} catch (e) { // Firefox prior to v20
    var RecentWindow = {
        getMostRecentBrowserWindow: function ()
            Services.wm.getMostRecentWindow("navigator:browser")
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:13:11.770

看来我的一些假设是错误的。我不必等到`pageshow`活动。经过长时间的研究，我发现了这个[错误](https://bugzilla.mozilla.org/show_bug.cgi?id=364304)。根据它，有一个观察者通知`browser-delayed-startup-finished`足以开始做我不得不做的事情`window`。

# python - 在windows中使用python在linux上运行远程perl脚本

> ID：16086032
> 
> 赞同：1
> 
> 时间：2013-04-18T14:41:56.557
> 
> 标签：python, linux, windows, perl, ssh

我需要从 Windows 机器连接到远程 Linux 服务器并执行 Perl 脚本。我试过使用

```
command = "perl /usr/local/xfer/file.pl -ssh root@"+hostname+" -pw password -batch"
pid = subprocess.Popen(command, shell=True) 
```

但它告诉我`Can't open perl script "usr/local/xfer/file.pl'": No such file or directory.`

我在这里做错了什么，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:55:49.410

上面的命令在 Windows 上使用 Perl 安装，但您说该脚本位于 Linux 服务器上。

因此，您需要将调用包装在对 ssh 的调用中：

```
child = subprocess.Popen(['plink', '-ssh', 'user@server', 'perl', '/usr/local/xfer/file.pl', 
            '-ssh', 'root@'+hostname, '-pw', 'password', '-batch'], shell=True) 
```

注意：**永远不要**使用“字符串命令”版本`subprocess.Popen()`，总是将命令和参数作为**列表**传递。

回到您的问题：这将以所有其他列表元素作为参数开始`plink`（命令行版本的 Putty，因为 Windows 没有）。`ssh(1)`

请注意，必须运行 Putty 代理才能使其工作，否则`plink`会要求输入密码。有关详细信息，请参阅手册。

# ios - iOS - 存储用户数据的最佳实践

> ID：16086034
> 
> 赞同：0
> 
> 时间：2013-04-18T14:41:57.100
> 
> 标签：ios, cocoa-touch, nsuserdefaults

我创建了一个文件系统，用户可以在其中创建文件夹来组织他们的“东西”。问题是我需要每个文件夹的一些信息（即超时、颜色、id 等），而这些信息不能仅通过 NSFileManager 类获得。

因此，我没有创建物理文件夹，而是考虑使用某种数据库创建虚拟文件夹。

我想使用 NSUserDefaults 来存储所有数据，但我一直在阅读并且无法确定它是否正确。我知道它可以完成这项工作，但它是正确的工具吗？

# visual-studio-2010 - 在 VS2010 中创建的静态库在 CVI 中不可链接

> ID：16086035
> 
> 赞同：0
> 
> 时间：2013-04-18T14:41:59.963
> 
> 标签：visual-studio-2010, static-libraries, c89, cvi

我用 VS2010 创建了一个简单的静态 Ansi-C90 库。我能够在 VS2010 中创建一个 C++ 项目，导入并全面测试 lib。

我打开了一个 LabWindows CVI 项目并尝试在那里导入 lib 文件。

不幸的是，没有太多事情要做 - 我得到的唯一消息是：“读取外部模块时遇到错误的标头：'Release\mylib.obj'”

有什么方法可以调查我的 lib 文件有什么问题吗？是否有一些 VS2010 不遵循的标准格式？

* * *

编辑＃1：

我确定了问题的可能来源，但我目前无法检查。VS2010 不会编译为静态单线程库 - 该功能已被删除。CVI 可能无法处理静态多线程库。

我还在 NI 论坛上发布了这个问题。

编辑＃2：

NI 论坛链接已损坏 - 我认为它的 NI 有问题并提供了一个[Google 搜索](http://www.google.de/#sclient=psy-ab&q=NI+Forum+%22CVI+can+not+link+VS2010+static+lib+files%22)链接来发帖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T22:17:46.290

NI 论坛中的用户[Mohan](http://forums.ni.com/t5/user/viewprofilepage/user-id/1296)在那里发布了答案。

需要更改 Visual Studio 中的一个选项，以便 CVI 可以导入文件：

`Properties`-> `General`->`Whole Program Optimization`

默认为：“ `Use Link Time Code Generation`”

必须改为：“ `No Whole Program Optimization`”

# .net - 用于调用 .net web 服务的示例 Powershell 脚本

> ID：16086037
> 
> 赞同：0
> 
> 时间：2013-04-18T14:42:02.513
> 
> 标签：.net, web-services, powershell

我有一个托管在 IIS7 上的 .net webservice (WS)。此 WS 具有更新数据库的方法。我必须每两个小时调用一次这个方法。我正在考虑编写一个 Powershell 脚本来调用该方法，并且 Powershell 脚本本身将由 NT 调度程序每两个小时执行一次。我在 Google 上搜索了一个示例 powershell 脚本，但找不到任何内容。我是 Powershell 的新手。任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:50:44.990

首先查看`New-WebServiceProxy`cmdlet 的帮助和代码示例。在控制台中输入：

```
Get-Help New-WebServiceProxy -Online 
```

# ios - 如何处理 iOS Web 视图本机键盘上的返回键？

> ID：16086040
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:42:06.653
> 
> 标签：ios, html, input, uiwebview

在我的 iOS 应用程序中，我有一个带有文本字段的 UIWebView。我想回应被点击的 Return 键。我怎么做？

我能否以某种方式访问​​ UITextField，以便实现 UITextFieldDelegate 方法 textFieldShouldReturn？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T01:55:44.267

您需要为此做一些 JavaScript 技巧。

在您的 HTML 文档中，为您的文本输入控件绑定一个 keyup 事件回调，（上次我检查时，不知何故 UIWebView 不会为返回键触发 keypress 事件，因此 keyup 事件是您最好的选择）

在此回调中，让 Web 视图转到自定义 URL 方案。例如下面：

```
var input = document.getElementById('textInput');
input.onkeyup = function(){window.location = 'callback://keyup'}; 
```

然后您可以在 UIWebView 的委托中处理此 URL 方案

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([request.URL.scheme isEqualToString:@"callback"]) {
        // Do what you want

        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T15:55:20.063

uiwebview 不能 uitextfieldDelegate 。尝试阅读 Apple 文档

# typescript - MarkerCluster LeafletJS 插件 TypeScript 定义文件创建

> ID：16086043
> 
> 赞同：7
> 
> 时间：2013-04-18T14:42:13.840
> 
> 标签：typescript, leaflet

我正在使用 LeafletJS 绘制平面图。我最近在 DevIntersection 学习了一点关于 TypeScript 的知识，并想开始转换我所有的 JS 以使用它。幸运的是，有人已经为 Leaflet 创建了定义文件，但我使用的插件之一没有（MarkerCluster）。

我已经将插件编译到了可以编译的地步（在传单定义文件中添加了一些小内容之后），但是当我尝试使用它时，我看不到它的任何方法（参见下面的用法示例）。我也尝试从中创建一个定义文件，但它创建的是空的（使用 tsc --declaration）。由于 Leaflet 和插件的定义文件有点长，我上传了它们：

[传单.d.ts](https://hostr.co/Sso8WTHkm1Oy)，[传单.markercluster.ts](https://hostr.co/OsEvazBr5Xcu)

用法：

```
/// <reference path="typings/jquery/jquery.d.ts" />
/// <reference path="typings/jqueryui/jqueryui.d.ts" />
/// <reference path="typings/leaflet/leaflet.d.ts" />
/// <reference path="typings/leaflet.markercluster.ts" />

module FloorPlans
{
    export class Floor
    {
        deskMarkers : L.MarkerClusterGroup; // <-- Compile error
        peopleMarkers: L.MarkerClusterGroup; // <-- Compile error
        tileLayer: L.TileLayer;
        desks = new Object();
        people = new Object();

        constructor(public floorName: string, public floorID: number) { }

    }
} 
```

错误：

> “L”类型的值不存在“MarkerClusterGroup”属性

关于从这里去哪里的任何想法或指导？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:26:50.007

在 JavaScript 中创建“类”有很多不同的约定，而 TypeScript 对它们一无所知。您在 leaflet.markercluster.ts 中拥有的是合法的 JavaScript，因此也是合法的 TypeScript，但由于 TypeScript 能够理解它们，因此它没有分解为类，这就是为它生成的声明文件为空的原因。

除了在极少数情况下，声明文件是手动创建的，这可能就是您在这里要做的。它可能会以这样的方式开始：

```
/// <reference path="leaflet.d.ts" />
declare module L {
    export class MarkerClusterGroup extends FeatureGroup {
        initialize(options: any): void;
        addLayer(layer:ILayer):MarkerClusterGroup;
        addLayer(layer:LayerGroup):MarkerClusterGroup;
        // and so on and so forth
    }
} 
```

我必须自己创建几个声明文件，经过短暂的学习曲线，这并不太难。我发现[这篇博](http://www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Complex-TypeScript-Definitions-Made-Easy/)文对入门非常有帮助（如果你正在阅读这篇文章，请向史蒂夫提供道具），然后通过示例学习绝对类型。

一旦您对您的声明文件感到满意，请记住回馈给确定类型以获得温暖的模糊感觉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-19T17:51:09.703

在我看来，贡献从来没有发生过，所以我只是为 Leaflet.markercluster 提交了一个 PR 到[definitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped)以获得那些温暖和模糊的感觉:)

拥有大多数常见选项，但如果有人添加更多（并编写更多测试！），显然会很高兴

[https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/leaflet.markercluster/index.d.ts](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/leaflet.markercluster/index.d.ts)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T15:21:48.627

`leaflet.marketcluster.ts`似乎只是 JavaScript 代码，它不包含任何 TypeScript 类声明。

您应该创建一个定义文件`leaflet.marketcluster.d.ts`（并将原始`leaflet.marketcluster`代码保留为 JavaScript）：

```
declare module L {

    export interface MarkerClusterGroupOptions {
        maxClusterRadius?: number;
        // etc.
    },

    export class MarkerClusterGroup extends FeatureGroup {
        initialize(options: MarkerClusterGroupOptions);
        addLayer(layer: LayerGroup);
        // etc.
    }

    //etc ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-07T04:36:38.643

我有同样的问题并通过安装这些得到解决：

```
$ npm i leaflet.markercluster
$ npm i --save @types/leaflet.markercluster 
```

# c# - 第一次调用 .net 网络服务很慢

> ID：16086045
> 
> 赞同：8
> 
> 时间：2013-04-18T14:42:27.027
> 
> 标签：c#, vb.net, web-services, .net-4.0, asmx

我正在从我的 .net winforms 应用程序中调用 .net webservice，两者都在框架 4.0 中。在程序执行期间，webservice 第一次调用方法时，调用大约需要 10-12 秒。随后的调用大约需要 1-2 秒。后续调用，即使重新创建了 Web 引用实例，仍然需要大约 1-2 秒。winforms应用重启后，第一次调用延迟再次出现，但后续调用有响应。

Web 引用的实例是在调用发生之前创建的，而不是延迟的一部分。

正在生成用于 winforms 应用程序的 XmlSerializers（据我所知并已使用，但我不确定如何验证这一点）。

由于 web 服务端的首次运行编译，延迟没有发生。这是一个全天都在使用的生产网络服务，它的应用程序池保留在内存中。据我所知，延迟发生在客户端或客户端和服务器之间的第一次调用，但不是后续调用。

不知道接下来要检查什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T16:01:15.030

正如**spender**所指出的，这个问题与代理检测有关。在 Internet Explorer 中关闭它可以解决问题，但在我的情况下不可行。

相反，有一种解决方法可以绕过默认代理的使用，从而绕过自动检测。

将这些条目添加到 app.config 允许某些 URL 绕过代理：

```
<configuration>
    <system.net>
        <defaultProxy>
            <bypasslist>
                <add address="server/domain name" />
            </bypasslist>
        </defaultProxy>
    </system.net>
</configuration> 
```

可以在此处找到更多信息：[MSDN 上的 <defaultProxy Element>](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T05:47:40.313

尝试将代理设置为空的 WebProxy，即：

```
request.Proxy = new WebProxy(); 
```

或者您可以使用 system.net 部分中的 defaultProxy 键覆盖应用程序的 .Config 文件中的代理设置。以下禁用自动代理检测：

```
<configuration >
  <system.net>
    <defaultProxy>
      <proxy bypassonlocal="true" usesystemdefault="false" />
    </defaultProxy>
</system.net>
</configuration> 
```

[http://weblog.west-wind.com/posts/2005/Dec/14/Slow-Http-client-calls-from-ASPNET-20-Make-sure-you-check-your-Proxy-Settings](http://weblog.west-wind.com/posts/2005/Dec/14/Slow-Http-client-calls-from-ASPNET-20-Make-sure-you-check-your-Proxy-Settings)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-26T14:29:15.393

为 necro-add 道歉，但是这个问题对我来说已经出现了很多次，而且我有一个习惯，每次都会忘记这个问题的所有方面。所以这是列表（其他人提到的一些）

*   更改您的 System.ServiceModel.BasicHttpBinding 以便 BypassProxyOnLocal 和 UseDefaultWebProxy 都为假。（您可以决定是在配置文件中还是通过代码来执行此操作。）
*   将项目“Build”属性中的“Generate Serialization Assembly”更改为“On”而不是“Auto”</li>
*   确保您使用的是现代 .NET 框架。例如，在第一次请求时，4.6.1 比 4.5.2 快大约 60 MS。
*   对 Release Executable 进行性能测试，而不是在 VisualStudio 中（VS 在初始调用上增加了大量额外的开销，这在实际的 release .exe 构建中*没有*反映出来。）
*   如果您正在使用持续运行的服务/站点，请务必考虑在启动时向服务器发送一个虚拟请求 - 只是为了让 .NET 预先序列化连接。同样，如果您正在编写一个运行和退出应用程序，请考虑在程序启动时编写一个后台虚拟请求。
*   确保您连接的服务不会经常回收。每次应用程序池在 IIS 服务上回收时，回收后进入的第一个请求可能需要一段时间。
*   确保您连接的服务没有休眠。默认情况下，服务在 20 分钟不活动后休眠 - 并且下一个进入的请求具有类似于回收后请求的延迟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T14:51:16.857

我已经在我的***basicHttpBinding***上添加了这些设置，禁用了自动代理检测并在第一次执行时获得了很大的加速。如果您进入 Intranet 环境，或者您知道根本不需要任何代理，这当然可以很好地工作。

**bypassProxyOnLocal="假"**

**使用DefaultWebProxy="假"**

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T14:48:39.210

我已经多次遇到这个问题 - 我讨厌它！大声笑虽然我从未最终解决它，但您可以尝试一些事情。首先，在启动过程中调用 Web 服务，并首先消除“痛苦”！其次，尝试弄乱 Web 服务的 IIS 应用程序池 - 使其永远不会自行回收，或者至少在早上的非神圣时间或每 10000 个请求时这样做。

我知道这可能不是一个很好的答案，但希望它有点帮助！

* * *

编辑 ：

部分问题在于 Web 服务并非“始终”启动 - 它会进入休眠状态、回收等，直到需要。值得一读的是保持网络服务的活力、5 个 9 的正常运行时间等！

# javascript - 使用 JavaScript 变量存储访问 SharePoint 列表

> ID：16086047
> 
> 赞同：0
> 
> 时间：2013-04-18T14:42:29.180
> 
> 标签：javascript, sharepoint, sharepoint-2010

我昨天开始使用 javascript，我正在尝试从 sharepoint 2010 列表中获取一些信息，我想将其打印到表格中。以下代码在body标签中：

```
<script type="text/javascript">
    ExecuteOrDelayUntilScriptLoaded(mainFunction, "sp.js");
    var typeNumber = "1520";
    var statusArray = new Array(3);
    try {
        function mainFunction() {
            var clientContext = new SP.ClientContext.get_current();
            var oList = clientContext.get_web().get_lists().getByTitle('Projektstatus');

            //empty Query string cause there are some problems with a lookup field
            var emptyCamlQuery = new SP.CamlQuery();

            this.collListItem = oList.getItems(emptyCamlQuery);
            clientContext.load(collListItem);
            clientContext.executeQueryAsync(Function.createDelegate(this, this.onQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));
            document.write(statusArray[2]);
        }

        function onQuerySucceeded(sender, args) {
            var listItemInfo = '';
            var i = 0;
            var listItemEnumerator = collListItem.getEnumerator();
            while (listItemEnumerator.moveNext()) {
                var oListItem = listItemEnumerator.get_current();
                if (oListItem.get_item('Title').match(typeNumber)) {
                    statusArray[i] = oListItem.get_item('KPI_Status');

                    //Works fine
                    alert("nummer:" + i + statusArray[i]);

                    i++;
                }
            }
        }
        function onQueryFailed(sender, args) {
            alert('Request failed. ' + args.get_message() + '\n' + args.get_stackTrace());
        }

        var tableOutput = "<table><tr><th>Indikatortyp</th><th>KPI-Status</th></tr>" +
                        "<tr><td>Kosten</td><td>" + statusArray[2] + "</td></tr>" +
                        "<tr><td>Technik</td><td>" + statusArray[1] + "</td></tr>" +
                        "<tr><td>Termin</td><td>" + statusArray[0] + "</td></tr>" +
                    "</table>"
        document.write(tableOutput);
    } catch (e) {
        alert(e);
    }
</script> 
```

带有警报的输出工作正常，但是当我想在表中打印 statusArray 时，这不起作用，因为变量未定义。我认为问题可能出在 createDelegate() 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:18:59.747

问题是因为您使用全局变量 statusArray 并且创建表的代码位于 onQuerySucceeded 之外。

我的建议是： - 封装 statusArray 变量 - 在 onQuerySucceeded 中移动表的创建

# highcharts - 如何强制 Highcharts 中的多个 y 轴具有共同的零

> ID：16086049
> 
> 赞同：14
> 
> 时间：2013-04-18T14:42:31.967
> 
> 标签：highcharts

请参阅此[JSFiddle](http://bit.ly/ZBSE25)。如何让 y 轴零对齐？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T15:41:38.400

简短的回答是：你不能。

您可以调整轴缩放、填充和刻度位置等，并可能得到您想要的，但没有设置来完成此操作。

但是有一个功能请求，您可以将您的投票和/或评论添加到：

[http://highcharts.uservoice.com/forums/55896-general/suggestions/2554384-multiple-axis-alignment-control](http://highcharts.uservoice.com/forums/55896-general/suggestions/2554384-multiple-axis-alignment-control)

编辑：OTOH，我不得不提一下，像这样的双轴图表通常是显示数据的一种非常糟糕的方式，并邀请用户进行无效的比较。

虽然大多数人总是试图将所有内容放在一个图表中，但多个图表通常是更好的解决方案。

FWIW

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-21T13:59:07.127

在添加此功能之前，一个简单的解决方法是确保两个轴的最大/最小比率相同。例如，主 y 轴的最小值和最大值为 -20 和 40，则最大值/最小值比率为 -2。现在假设第二个 y 轴的最大值为 25。如果我们将此轴的最小值设置为 25/-2 (=-12.5)，那么 y=0​​ 线将与两个轴对齐。

有一个标志来自动设置它会更好;-)

编辑：像下面这样的东西对我来说没问题：

```
yAxis0Extremes = chart.yAxis[0].getExtremes();
yAxisMaxMinRatio = yAxis0Extremes.max / yAxis0Extremes.min;
yAxis1Extremes = chart.yAxis[1].getExtremes();
yAxis1Min = (yAxis1Extremes.max / yAxisMaxMinRatio).toFixed(0);
chart.yAxis[1].setExtremes(yAxis1Min, yAxis1Extremes.max); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-19T08:11:35.030

You can set min / max value for first yAxis and use linkedTo to second axis, but I'm not sure if you expect this effect:

[http://jsfiddle.net/qkDXv/2/](http://jsfiddle.net/qkDXv/2/)

```
yAxis: [{ // Primary yAxis
            labels: {
                format: '{value}°C',
                style: {
                    color: '#89A54E'
                }
            },
            title: {
                text: 'Temperature',
                style: {
                    color: '#89A54E'
                }
            },
            min:-250,
            max:50
            //linkedTo:1
        }, { // Secondary yAxis
            title: {
                text: 'Rainfall',
                style: {
                    color: '#4572A7'
                }
            },
            labels: {
                format: '{value} mm',
                style: {
                    color: '#4572A7'
                }
            },
            opposite: true,
            linkedTo:0
        }], 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T04:24:58.367

我知道已经两年了。但是，与先前答案中给出的现有解决方案相比，我确实找到了更好的解决方案。我的解决方案仍然使用 setExtremes 为 yAxis 设置最小值、最大值，但具有更好的异常处理，这对任何情节都非常`show()`好`hide()`。解决方案：[链接](http://nguyenvinhlinh.github.io/etc/2015/07/28/Highchart,-forcing-two-yAxis-to-have-common-zero.html)
Github：[链接](https://github.com/nguyenvinhlinh/Highchart-BalanceCommonZero)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-03T11:49:18.677

您可以按照以下代码轻松完成 -

您只需要找到相对 y 轴的哪个点与第一个 y 轴的零相交并将 opp y 轴的最小值设置为（该点 * -1）

在我的例子中，yaxis[1] 形成主 y 轴，yaxis[0] 形成相反的 y 轴

```
 }, function(chart) { // on complete
        var factor = chart.yAxis[1].min  / chart.yAxis[1].tickInterval
        var tick = chart.yAxis[0].tickInterval;
        var _min = chart.yAxis[0].tickInterval * factor 
        chart.yAxis[0].update({ min: _min });
        chart.yAxis[0].update({ tickInterval: tick });

    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T20:12:27.093

最简单的方法是为每个轴提供相同的最小值/最大值。在绘图调用之前根据数据确定一个好的最小值/最大值将非常简单（组合数组，将最小值/最大值向下取整/向上取整，这将是我的方法）。

```
pretend this is code so I can link to jsFiddle 
```

更新[了小提琴](http://jsfiddle.net/qkDXv/1/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-10T06:27:33.073

我对所有答案都有疑问，因为它不支持负 Y 轴上的值。为了以 0 为中心，我应用了以下逻辑

找到系列的最小值/最大值并填充它，使 0 居中

```
if(max > 0  && min < 0){
{
   const diff = max + min;
   if(diff > 0){
      min = min - diff
   }
   else{
      max = max + -1 * diff
   }
} 
else if (max > 0){
   max = min * -1
}
else{
   min = max * -1
} 
```

然后在图表上定义轴时，使用上面的最小值/最大值，这将确保 0 显示在中心

# ios - AFNetworking enqueRequestOperations 在调用所有 AFJSONRequestOperation 完成之前触发完成

> ID：16086051
> 
> 赞同：2
> 
> 时间：2013-04-18T14:42:38.593
> 
> 标签：ios, afnetworking

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://twitter.com"]];

NSURL *url = [NSURL URLWithString:@"https://alpha-api.app.net/stream/0/posts/stream/global"];
NSURLRequest *r = [NSURLRequest requestWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:r success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"App.net Global Stream: %@", JSON);
} failure:nil];
AFJSONRequestOperation *operation1 = [AFJSONRequestOperation JSONRequestOperationWithRequest:r success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"App.net Global Stream: %@", JSON);
} failure:nil];

[client enqueueBatchOfHTTPRequestOperations:@[operation, operation1] progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {

} completionBlock:^(NSArray *operations) {
    NSLog(@"%@", operations);
}]; 
```

enqueueBatchOfHTTPRequestOperations 在 operation 和 operation1 阻塞之前触发完成。

确实阅读了[https://github.com/AFNetworking/AFNetworking/issues/362](https://github.com/AFNetworking/AFNetworking/issues/362)并尝试使用 dispatch_group 进行可能的修复，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T22:12:07.893

更改您的代码以使用 AFHTTPRequestOperation 而不是 AFJSONRequestOperation 并使用 NSJSONSerialization 手动解析 JSON，您会发现在所有操作都按要求完成后触发队列完成块。

# vba - 文件导出 - 奇怪的字符

> ID：16086066
> 
> 赞同：0
> 
> 时间：2013-04-18T14:43:09.657
> 
> 标签：vba, file-io, excel, binary, codepages

我被要求复制以下 Excel VBA 代码发送的文件。问题在于“for”循环中包含的数据的导出。数量“.111”在导出文件中写为“øSã=”，“.222”写为“øSc>”，“.333”写为“ú~ª>”。

我不完全确定这里发生了什么。但无论如何，我将数据发送到的目标遗留系统都能够正确读取这些数据（即，它被转换回原始值）。

有没有人对正在发生的事情以及如何复制此行为以便可以读取我的文件有任何想法？

```
Type Rigo_File
Status As Integer
Invio As Integer
Codice As String * 13
Quantita As Single
Udm As Integer End Type

Type type_file
Partita As String * 10
Macchina As String * 25
articolo As String * 25
colore As String * 25
note As String * 25
urgenza As Integer
Invio As String * 3
Righi(20) As Rigo_File
End Type

Dim NrOpen As Integer
Dim NomeFile As String, NomeFileTmp As String
Dim Rigo_File
Dim type_file
Dim typeM As type_file
Dim c As Integer

Sub CREATEFILE()
FILEDIR = "C:\"
FILENAMEE = "TESTFILE1.txt"

Partita = Right(Cells(1, 3), 10)
Macchina = Left(Cells(2, 3), 25)
articolo = Left(Cells(3, 3), 25)
colore = Left(Cells(4, 3), 25)
note = Left(Cells(5, 3), 25)
urgenza = CDbl(Cells(6, 3))

With typeM
.Partita = Partita
.Macchina = Macchina
.articolo = articolo
.colore = colore
.note = note
.urgenza = urgenza
.Invio = "001"
For ci = 1 To 20
.Righi(ci).Status = True
.Righi(ci).Invio = 1
.Righi(ci).Codice = Cells(8 + ci, 2)
.Righi(ci).Quantita = Cells(8 + ci, 3)
.Righi(ci).Udm = 1
Next ci
End With

NrOpen = FreeFile
On Error GoTo 0

Open FILEDIR & FILENAMEE For Random Access Write Shared As #NrOpen Len = Len(typeM)

Put #NrOpen, 1, typeM
Close #NrOpen 
```

结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:43:49.963

`Put #`以一种二进制格式写入数据 - 前面有长度字节的字段，将数字转换为二进制和其他有用的东西。只要您使用`Get #`重新读取数据，这没有问题。尽管您的文件不是严格人类可读的。

如果要编写纯文本 ASCII 数据，请使用`Print #`or`Write #`代替，并观察这两者之间的细微差别（分隔符、终止 CR+LF 等）。

您可能还需要在or语句中`TypeM`单独指定每个元素- 我不确定这两个是否会接受用户定义的对象。`Print #``Write #`

**但请注意**：可以读取由创建的文件的目标系统`Put #`可能会拒绝由`Print #`或创建的文件`Write #`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:37:07.217

经过一番打猎后，我发现了以下内容：

```
 Dim bArray As Byte()
    Dim val As Single = 0.111
    Dim sChars as String
    Dim arrChars as String()
    Dim sFinal as string

    bArray = BitConverter.GetBytes(val)
    sChars = BitConverter.ToString(bArray)
    arrChars = Split(sChars, "-")
    For Each sChar as string in arrChars
        sFinal & = ChrW(Convert.ToInt32(sChar, 16))
    Next 
```

这与 Put# 方法和 BinaryWriter.Write 方法执行相同类型的转换，无需写入文件。

# c++ - C++ Qt 从 QNetworkRequest 获取 HTTP 标头

> ID：16086077
> 
> 赞同：0
> 
> 时间：2013-04-18T14:43:38.967
> 
> 标签：c++, qt, http-headers, qnetworkaccessmanager

我正在开发一个 Qt C++ 应用程序。我需要下载一些文件（可能很大）并向用户显示下载进度。要执行此任务，我使用以下代码：

```
QNetworkAccessManager* networkManager = new QNetworkAccessManager();

QNetworkRequest request(fileUrl); //fileUrl is a QUrl variable
QVariant responseLength = request.header(QNetworkRequest::ContentLengthHeader);
int fileSize = responseLength.toInt();
ui->progressBar->setMaximum(fileSize);
QNetworkReply reply = networkManager->get(request);
QObject::connect(reply, SIGNAL(downloadProgress(qint64,qint64)),
                 this, SLOT(downloadProgressChanged(qint64,qint64))); 
```

`downloadProgressChanged`带有此代码的插槽在哪里：

```
void downloadProgressChanged(qint64 downloaded, qint64 total)
{
    ui->progressBar->setValue(ui->progressBar->value() + 1);
    ui->labelProgress->setText(QString::number((downloaded / 1024)));
} 
```

（我使用命名为 QProgressBar`progressBar`来显示进度，使用命名为 QLabel`labelProgress`来显示下载的千字节）。

我的问题是我无法访问 Content-Length 标头（`int fileSize`值为 0），因此无法显示操作进度。我检查了我的网络服务器上的 HTTP 标头 - Content-Length 工作正常。

在[这个 SO 问题](https://stackoverflow.com/questions/6778118/reading-http-headers)中，我读到我可以使用`QNetworkReply::metaDataChanged()`信号，但是如何使用它来显示进度？文档说可以在下载**已经开始**时发出信号，但是我需要在下载开始**之前**获取标题内容- 以设置我的进度条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-05T18:53:03.440

这不是您从请求中获取标头信息的方式：

```
QNetworkRequest request(fileUrl); //fileUrl is a QUrl variable
QVariant responseLength = request.header(QNetworkRequest::ContentLengthHeader);
int fileSize = responseLength.toInt();
ui->progressBar->setMaximum(fileSize); 
```

尝试使用 QNetworkAccessManager 发出请求，然后从它返回的回复中获取所需的标头。有一种特殊的方法可以仅从请求中检索标头信息：

```
QNetworkAccessManager::head(const QNetworkRequest & request) 
```

由于 Qt 的网络 API 是异步的，所以你必须将 QNetworkAccessManager 的 finished(QNetworkReply*) 信号连接到一个 slot，并获取 slot 中的 header 信息。

这是我的做法：

```
void MainWindow::on_download_button_clicked(){
    QUrl url("http://someurl");
    QNetworkAccessManager * manager = new QNetworkAccessManager(this);
    connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(getHeaders(QNetworkReply*)));
    manager->head(QNetworkRequest(url));
}

void MainWindow::getHeaders(QNetworkReply * reply){
    if (reply->operation() == QNetworkAccessManager::HeadOperation){
        int content_length = reply->header(QNetworkRequest::ContentLengthHeader).toInt();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:50:21.057

您是否尝试过使用 readyRead 信号？在插槽中，您可以准备 GUI。像这样的东西应该做的工作：

```
connect(reply, SIGNAL(readyRead()), this, SLOT(updateProgressBar())) 
```

# windows-phone-8 - 保持专注于Windows Phone 8中的文本框

> ID：16086079
> 
> 赞同：1
> 
> 时间：2013-04-18T14:43:46.377
> 
> 标签：windows-phone-8

继续关注 windows phone 中的文本框，我只想要 SMS 应用程序（第一方应用程序）的行为。

我有带有文本框和应用栏按钮的页面。当我输入一些文本并点击应用程序栏按钮时，它会失去文本框焦点和键盘，但在 SMS 应用程序中并非如此。

如何将焦点保持在文本框中？

目前，当我按下按钮时，我正在尝试集中注意力，但现在发生了一些闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:29:29.497

You can set focus on `TextBox` manually using [`Focus()`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.focus.aspx) method call. It returns `true` or `false` depending on how successful the operation was (focus not always can be set).

# android - 当用户接近 GoogleMaps API V2 上的标记时添加声音

> ID：16086080
> 
> 赞同：1
> 
> 时间：2013-04-18T14:43:49.313
> 
> 标签：android, google-maps

我使用带有新 API 2.0 的 GoogleMaps 开发了一个应用程序，该应用程序正在运行并且一切正常，基本上它显示了用户的位置和一些标记，这些标记划定了意大利某些城市的禁区。当用户接近一个制造商时，我想添加一个声音，但似乎没有方法可以与地图上添加的对象进行交互。我的想法，一个非常糟糕的想法，是使用用户的坐标和标记坐标矩阵，然后检查用户附近的位置；缓慢而糟糕，我可以看到它。

所以我的问题是：

有没有一种通用的方法来检查用户何时靠近 POI 并向该侦听器添加声音？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:55:28.827

希望我的回答对你有所帮助。:)

使用 LocationManager 和 LocationListener。您可以实时获取用户的gps位置。操作系统将“Location”推送到您应该为 LocationListener 实现的“onLocationChanged()”。检查听众位置和标记的纬度/经度之间的距离。当用户接近 500m 时播放声音（也许..）

仅供参考，您可以同时请求 GPS 和网络定位。您可能知道网络位置不准确。如果您需要更精确的用户位置，请使用 GPS 位置。

```
mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 0f, mLocationListenerGPS);
mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 5000, 0f, mLocationListenerNetwork); 
```

如果您不需要定位，请不要忘记删除请求。

```
mLocationManager.removeUpdates(mLocationListenerGPS);
mLocationManager.removeUpdates(mLocationListenerNetwork); 
```

请勿长时间使用定位。定位使用巨大的电池。

# javascript - 如何验证 Facebook 应用程序以使用 javascript API 访问公共页面提要？

> ID：16086082
> 
> 赞同：0
> 
> 时间：2013-04-18T14:43:54.027
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 Facebook API 访问公共 Facebook 页面的帖子，但即使使用所有正确的凭据，我似乎也无法进行身份验证。FB.api 返回：

```
{"error":{"type":"http","message":"unknown error"}} 
```

并且在“访问令牌 1：第 1 行”中记录了一个错误

```
Uncaught ReferenceError: TRJg376YTvXfk6sMur4Mggh5YnU is not defined access_token:1 
```

（匿名函数）

这是我正在使用的代码：

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<div id="fb-root"></div>
<button name="my_full_name" onclick="connectToFacebook()" value="My Name" />

<script>
function connectToFacebook() {

    FB.api('https://graph.facebook.com/oauth/access_token',
    'get',
    {client_id:'xxxxxxxxxx', client_secret:'xxxxxxxxxx',grant_type:'client_credentials'}, //client_credentials
        function(response) {
            alert(JSON.stringify(response));
        });

        FB.api("/publicpage/feed",
                function (response) {
                    console.log(response);
                });

    }
</script> 
```

他们的网站上没有很好的记录！有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T06:58:20.677

是的，文档令人困惑，但你错了，全都错了。按照这篇[文章](http://www.loginworks.com/technical-blogs/404-working-with-facebook-javascript-sdk)了解 Facebook Javascript SDK 的基本设置。

在那篇文章中，它一直在使用用户访问令牌，但是当您想访问页面的公共帖子时，您可以使用**应用访问令牌**。应用访问令牌的好处是它永不过期。最终是你的选择。

使用当前登录用户的访问令牌获取公开帖子

```
function getPosts() {           

       FB.api('/thepcwizardblog/feed', { limit: 10 }, function (response) {
            for (var i = 0, l = response.data.length; i < l; i++) {
                var post = response.data[i];
                var userid = post.from.id;

                var msg;

                if (post.message) {                        
                    msg = post.message;                        
                }
                else {                
                    msg = post.description;                        
               }

               console.log(userid + msg);
            }
        });
} 
```

使用应用访问令牌获取公开帖子

```
function getPosts() {           

       FB.api('/thepcwizardblog/feed?access_token='+accessToken+'', { limit: 10 }, function (response) {
            for (var i = 0, l = response.data.length; i < l; i++) {
                var post = response.data[i];
                var userid = post.from.id;

                var msg;

                if (post.message) {                        
                    msg = post.message;                        
                }
                else {                
                    msg = post.description;                        
               }

               console.log(userid + msg);
            }
        });
} 
```

[您可以从此处](https://developers.facebook.com/tools/access_token/)获取应用程序的访问令牌。

**[编辑]**

不要使用 CBroe 在评论中建议的应用访问令牌。

# liferay - XForms - 使用 Portlet 的单独部署无法加载资源

> ID：16086085
> 
> 赞同：0
> 
> 时间：2013-04-18T14:44:06.173
> 
> 标签：liferay, portlet, orbeon, xforms

过滤的 xform 资源有问题 - javascript、css 和图像。我们尝试使用 OrbeonPortletXFormsFilter 和 Trampoline servlet 写入响应整个表单或使用 request.setAttribute(“oxf.xforms.renderer.document”, xformXml) 在 liferay portlet 中显示 xform。结果是一样的 - 呈现了表单，但没有找到 javascript 和 CSS，所有表单都分散了。表单操作也不起作用。谢谢你。

我的配置：

portlet.xml

```
 <portlet>
        <portlet-name>xForm-portlet</portlet-name>
        <portlet-class>com.xform.XFormPortlet</portlet-class>
        <init-param>
            <name>oxf.main-processor.name</name>
            <value>{http://www.orbeon.com/oxf/processors}pipeline</value>
        </init-param>
        <init-param>
            <name>oxf.main-processor.input.config</name>
            <value>oxf:/config/prologue-portlet.xpl</value>
        </init-param>
        <init-param>
            <name>oxf.error-processor.name</name>
            <value>{http://www.orbeon.com/oxf/processors}pipeline</value>
        </init-param>
        <init-param>
            <name>oxf.error-processor.input.config</name>
            <value>oxf:/config/error.xpl</value>
        </init-param>
        <supports>
            <mime-type>text/html</mime-type>
            <portlet-mode>view</portlet-mode>
        </supports>
        <portlet-info>
            <title>Xform Portlet</title>
        </portlet-info>
    </portlet>
<filter>
    <filter-name>orbeon-forms-portlet-xforms-filter</filter-name>
    <filter-class>org.orbeon.oxf.portlet.OrbeonPortletXFormsFilter</filter-class>
    <lifecycle>RENDER_PHASE</lifecycle>
    <lifecycle>ACTION_PHASE</lifecycle>
    <lifecycle>RESOURCE_PHASE</lifecycle>
    <init-param>
        <name>oxf.xforms.renderer.context</name>
        <value>/orbeon</value>
    </init-param>
</filter>   
<!-- Map the Orbeon portlet XForms filter -->
<filter-mapping>
<filter-name>orbeon-forms-portlet-xforms-filter</filter-name>
    <portlet-name>xForm-portlet</portlet-name>
</filter-mapping> 
```

web.xml

```
<filter>
    <filter-name>orbeon-xforms-filter</filter-name>
    <filter-class>org.orbeon.oxf.servlet.OrbeonXFormsFilter</filter-class>
    <init-param>
      <param-name>oxf.xforms.renderer.context</param-name>
      <param-value>/orbeon</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>orbeon-xforms-filter</filter-name>
    <url-pattern>/orbeon/*</url-pattern>
  </filter-mapping>

 <servlet>
    <servlet-name>orbeon-trampoline-servlet</servlet-name>
    <servlet-class>org.orbeon.oxf.portlet.OrbeonTrampolineServlet</servlet-class>
    <init-param>
      <param-name>oxf.xforms.renderer.context</param-name>
      <param-value>/orbeon</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>orbeon-trampoline-servlet</servlet-name>
    <url-pattern>/xforms-trampoline</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:48:44.780

此时的答案是此功能不适用于 Orbeon Forms 4.0。已输入[一个问题。](https://github.com/orbeon/orbeon-forms/issues/959)

# eclipse - 使用 pydev 打开文件时 Eclipse 崩溃

> ID：16086087
> 
> 赞同：0
> 
> 时间：2013-04-18T14:44:10.333
> 
> 标签：eclipse, crash, pydev

每次我尝试使用 pydev 的 python 编辑器打开一个模块时，整个 Eclipse 都会崩溃，我不知道为什么。

该文件放置在根目录中，使用（内置）文本编辑器打开。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:52:39.237

在您提供一些背景信息之前，没有人能够回答您的问题。

1.  自eclipse以来文件的扩展名可能会根据扩展名不同地打开文件。尝试在文本编辑器中打开文件，而不是默认的。
2.  操作系统版本
3.  日食版
4.  在您尝试打开的文件及其所在目录上设置的文件所有权和权限。
5.  目录路径或文件名是否有有趣的字符。空格以外的标点符号`.`

# vb.net - 停止同时运行的多个程序

> ID：16086088
> 
> 赞同：-2
> 
> 时间：2013-04-18T14:44:11.913
> 
> 标签：vb.net, process

这就是问题所在。在我们的计划中，我们有一个附加组件（机器视觉），客户可以自行编辑。我们在 VB.NET 2010 中为这个插件提供了一个模板。然后他们复制这个模板并重命名它（他们喜欢的任何名字），并编辑一些东西。问题是我想限制客户一次打开此模板的多个副本。

显然我选择了单个实例，但由于它们实际上是不同的程序，这只会阻止它们打开同一个模板两次。我的第一个想法是我可以更改进程名称并在程序集名称前面放置一些通用的（myCompany - ），但我认为这是不可能的。我想知道是否有人知道另一种检查该程序是否打开的方法。显然，我们可以编辑我们的模板以在其模板的所有副本中放置一些东西（可以检查），但我想不出任何可用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:21:05.623

我不明白您为什么要阻止模板多次显示。我从未尝试过这样的事情，但我会尝试使用 System.Diagnostics.Process.Kill，并杀死该程序的任何新实例。因此，您将需要您的程序来监视进程名称是否多次启动，并终止除第一次之外的每次启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:09:11.120

感谢所有的评论。实际上，我今天早上才开始工作。这更像是一件杂乱无章的事情。视觉程序（模板）连接到硬件相机。该相机只能连接一次，因此当第二个模板打开时，它会出现错误。

我想出的解决方法是——客户将所有这些文件夹放在 Vision 文件夹中，并被指示将该文件夹命名为与程序集或进程名称相同的名称，所以我只是在文件夹中搜索并将终止启动如果已经打开了任何文件夹名称的程序，则表单。也许有点乱，但它是有效的。

# javascript - 数据表和服务器端处理 - 按需加载

> ID：16086090
> 
> 赞同：4
> 
> 时间：2013-04-18T14:44:33.020
> 
> 标签：javascript, jquery-datatables

我已经使用 DataTables 构建了简单的表，并且我成功连接了服务器端脚本以使用数据填充我的表。

在我的表格上方，我有 2 个复选框和 2 个日期选择来指定过滤条件。当我的页面加载时，我的表格被填满，因为在启动时数据表正在从服务器中提取第一页数据。

我想禁用第一次初始数据加载，所以当页面加载时我会得到空表，然后在我选择标准并按下“加载”按钮后，数据将被加载。

我知道如何将过滤条件添加到服务器参数，我需要做的是在用户单击按钮后从服务器加载数据。

下面是我的数据表脚本：

```
var myTable= $('table#myTable').dataTable({
    "table-layout": "fixed",
    "bJQueryUI": true,
    "sDom": '<"H"lpr>t<"F"ip>',
    "iDisplayLength": 25,
    "aLengthMenu": [[25, 50, 100, 500], [25, 50, 100, 500]],
    "bSort": false,
    "sPaginationType": "full_numbers",
    "bPaginate": true,
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "Data.asmx/Sales",
    "fnServerData": function(sSource, aoData, fnCallback) {
        var sEcho = aoData[0].value;
        var iDisplayStart = aoData[3].value;
        var iDisplayLength = aoData[4].value;

        $.ajax({
            contentType: "application/json; charset=utf-8",
            type: "POST",
            url: sSource,
            //below are my parameters
            data: "{'sEcho': '" + sEcho
                + "','iDisplayStart': '" + iDisplayStart
                + "','iDisplayLength': '" + iDisplayLength
                + "'}",
            success: function(msg) {
                fnCallback(msg.d);
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(XMLHttpRequest.status);
                alert(XMLHttpRequest.responseText);
            }
        });
    },
    "bAutoWidth": false,
    "aoColumns": [{
            "sType": "numeric",
            "mData": "Nr",
            "sWidth": "50px"
        }, {
            "sType": "string",
            "mData": "Name"
        }, {
            "sType": "string",
            "mData": "Surname"
        }]
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-30T09:54:22.643

您只需将 iDeferLoading 参数指定给数据表，其中包含您的表在 DOM 中已包含的记录数，如果没有记录，则为 0。

```
$(document).ready(function() {
$('#example').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "scripts/server_processing.php",
    "iDeferLoading": 0
} );
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:10:06.883

`.dataTable()`在需要表格之前不要调用该方法。下面的例子：

```
var myTable = null,
    dtOptions = {
        "table-layout": "fixed",
        "bJQueryUI": true,
        //...rest of options...
    };

$('#button').click(function (e) {
    myTable = $('table#myTable').dataTable(dtOptions);
}); 
```

或者，如果您在表初始化后不需要访问选项：

```
$('#button').click(function (e) {
    myTable = $('table#myTable').dataTable({
        "table-layout": "fixed",
        "bJQueryUI": true,
        "sDom": '<"H"lpr>t<"F"ip>',
        "iDisplayLength": 25,
        "aLengthMenu": [[25, 50, 100, 500], [25, 50, 100, 500]],
        "bSort": false,
        "sPaginationType": "full_numbers",
        "bPaginate": true,
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "Data.asmx/Sales",
        "fnServerData": function(sSource, aoData, fnCallback) {
            var sEcho = aoData[0].value;
            var iDisplayStart = aoData[3].value;
            var iDisplayLength = aoData[4].value;

            $.ajax({
                contentType: "application/json; charset=utf-8",
                type: "POST",
                url: sSource,
                //below are my parameters
                data: "{'sEcho': '" + sEcho
                    + "','iDisplayStart': '" + iDisplayStart
                    + "','iDisplayLength': '" + iDisplayLength
                    + "'}",
                success: function(msg) {
                    fnCallback(msg.d);
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.status);
                    alert(XMLHttpRequest.responseText);
                }
            });
        },
        "bAutoWidth": false,
        "aoColumns": [{
                "sType": "numeric",
                "mData": "Nr",
                "sWidth": "50px"
            }, {
                "sType": "string",
                "mData": "Name"
            }, {
                "sType": "string",
                "mData": "Surname"
            }]
    });
}); 
```

# cluster-computing - 在不共享 POF 配置的情况下连接到多个 Coherence 集群

> ID：16086091
> 
> 赞同：0
> 
> 时间：2013-04-18T14:44:33.347
> 
> 标签：cluster-computing, connect, extend, oracle-coherence

我有一个问题，即 .NET 应用程序试图通过 Extend 连接到两个完全不相关的 Coherence 集群。两个集群都使用自己的 POF 配置。根据我迄今为止所做的研究，唯一的解决方案似乎是将集群的缓存和 POF 配置结合到客户端上的一组 Coherence XML 配置文件中。这意味着配置混合在一起并强制依赖于两个集群：集群 X 中定义的 POF 对象必须为集群 Y 所知，反之亦然。这种依赖是不可接受的。有没有办法不混合两个集群的配置，让它们完全独立，并且仍然让 .NET 客户端连接到两者？我听说使用不同的类加载器连接到不同的集群可能会有所帮助。如果属实，这将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T16:25:14.890

您应该能够指定要在远程缓存方案序列化程序中使用的 POF 配置，而不是在全局 pof 配置的覆盖文件中：

```
<serializer>
  <instance>
    <class-name>com.tangosol.io.pof.ConfigurablePofContext</class-name>
    <init-params>
      <init-param>
        <param-type>String</param-type>
        <param-value>pof-config.xml</param-value>
      </init-param>
    </init-params>
  </instance>
</serializer> 
```

# mysql - 在查询中排除字符的最快方法

> ID：16086092
> 
> 赞同：0
> 
> 时间：2013-04-18T14:44:34.347
> 
> 标签：mysql, performance

我想合并两个表，但想排除任何以“？”开头的名称。（实际上任何包含“？”，但所有违规者都以“？”开头。）

```
SELECT NAME, AGE, LOCATION 
FROM TABLEONE
WHERE NAME NOT LIKE CONCAT('?%')
UNION ALL
SELECT NAME, AGE, LOCATION 
FROM TABLETWO
WHERE NAME NOT LIKE CONCAT('?%')
LOCK IN SHARE MODE; 
```

这真的很慢。我可以通过更好的查询或索引来加快速度吗？

它使用的是 concat，因为这是我继承的代码。我希望 concat 不是最佳选择，但我想我会在收到代码时显示代码。

我的理解是索引在通配符搜索中没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:06:51.347

使用 REGEXP 相同：

```
SELECT NAME, AGE, LOCATION FROM TABLEONE WHERE NAME REGEXP '^([^?])'
UNION ALL
SELECT NAME, AGE, LOCATION FROM TABLETWO WHERE NAME REGEXP '^([^?])' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:17:12.857

如果名称以 ? 开头的所有条目有什么特别之处，您可能希望在数据库中有另一个字段来标记它们。仅使用名称并不好-您会遇到这样的问题，而且速度很慢。

# java - 使用 Indy 和 Delphi 发送 JSON 编码对象

> ID：16086101
> 
> 赞同：3
> 
> 时间：2013-04-18T14:45:07.333
> 
> 标签：java, delphi, http, post, indy

我已经在这个问题上工作了太多小时而没有真正取得任何进展。我有一个有效的旧解决方案，但我正在尝试将其移植到 Indy 以使代码更可靠且更易于维护。

我们有一个 servlet，它处理使用 HTTP POST 消息发送给它的请求。消息有一个参数，“command”，它的值决定了 servlet 应该做什么。

目前我有这个：

```
procedure TIndyLoginServer.SendRequest(Command, Json: string; Request: TRequest);
var
  Params: TIdStrings;
  ServerResponse: string;
begin
  // Build parameters
  Params := TStringList.Create();
  Params.Add('command=' + Command);

  try
    // Content type should really be 'application/json' but then the parameters stop working
    FIndyHttp.Request.ContentType := 'application/x-www-form-urlencoded'; 
    ServerResponse := FIndyHttp.Post(FUrl, Params);
    Request.OnRequestFinished(ServerResponse, '', '');
  except
    on E: EIdHTTPProtocolException do
    begin
      Request.OnRequestFinished('', E.Message, '');
    end;
    on E: EIdSocketError do
    begin
      if E.LastError = Id_WSAETIMEDOUT then      
        Request.OnRequestTimedOut();
    end;
    on E: EIdException do
    begin
      Request.OnRequestFinished('', E.Message, '');
    end;
  end;
end; 
```

这种工作，命令到达 servlet 并开始按预期工作。问题是，除了参数之外，我还需要能够将 JSON 编码的对象与 POST 请求一起发送。Java servlet 使用以下代码行接收 JSON 编码的对象

```
final BufferedReader r = req.getReader(); 
```

“req”显然是传入的 POST 请求，缓冲的读取器稍后用于解码对象。但是，我一生都无法弄清楚如何以 servlet 可以读取数据的方式将 JSON 字符串附加到 TidHTTP 实例。

有没有人有任何建议或例子我可以看看？我所发现的只是如何发送文件。也许这就是我要找的？

以及如何在不破坏参数列表的情况下将请求的内容类型设置为“application/json”？如果我更改它，POST 请求仍会到达服务器，但不再找到“命令”参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:08:53.713

主要是一个提示：当您使用“application/x-www-form-urlencoded”时，服务器端希望看到键/值对，例如：

```
key1=value1&key2=value2 etc. 
```

在这种情况下，您可以将 JSON 文本作为键的值发送，例如：

```
{...}
Params.Add('command=' + Command);
Params.Add('jsonText=' + json);
FIndyHttp.Request.ContentType := 'application/x-www-form-urlencoded'; 
ServerResponse := FIndyHttp.Post(FUrl, Params);
{...} 
```

使用“application/json”对 HTTP 服务器说：请求的整个主体（标头之后的部分）将包含 JSON 文本。

在 PHP 中，我可以使用“输入流”访问请求的“正文”：

```
$jsonText = file_get_contents("php://input")
$jsonObject = json_decode($jsonText ) 
```

尝试在 JAVA 中找到类似的东西？

**更新：**

似乎 TIdStrings 将请求准备为“application/x-www-form-urlencoded”。正如[Remy Lebeau 建议](https://stackoverflow.com/a/12200237/1022219)的那样，将您的 JSON 字符串保存到 TStream 后代（例如 tMemoryStream）并按原样传输（即 RAW）。tIdHttp.POST 有一个接受 TStream 的覆盖。在这种情况下尝试 TIdHTTP.Request.ContentType = 'application/json'。它应该这样工作吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:54:27.557

我想我解决了。我不确定这是最漂亮的方式，但它似乎可以满足我的要求。

这是代码！

```
procedure TIndyLoginServer.SendRequest(Command, Json: string;
  Request: TRequest);
var
  JsonToSend: TIdStringStream;
  ServerResponse: string;
  Url: string;
begin
  // Build parameters
  JsonToSend := TIdStringStream.Create(Json);

  try
    try
      FIndyHttp.Request.Accept := 'application/json';
      FIndyHttp.Request.ContentType := 'application/json';
      FIndyHttp.Request.ContentEncoding := 'utf-8';

      Url := FUrl +'?command=' + Command;
      ServerResponse := FIndyHttp.Post(Url, JsonToSend);

      Request.OnRequestFinished(ServerResponse, '', '');
    except
      on E: EIdHTTPProtocolException do
      begin
        Request.OnRequestFinished('', E.Message, '');
      end;
      on E: EIdSocketError do
      begin
        if E.LastError = Id_WSAETIMEDOUT then
          Request.OnRequestTimedOut();
      end;
      on E: EIdException do
      begin
        Request.OnRequestFinished('', E.Message, '');
      end;
    end;
  finally
    JsonToSend.Free();
  end;
end; 
```

# xml - wsdl 是否需要是有效的 wsdl 文件才能正常工作

> ID：16086102
> 
> 赞同：0
> 
> 时间：2013-04-18T14:45:09.377
> 
> 标签：xml, wsdl, xsd, schema

我的问题一开始可能听起来很奇怪，但需要确定。

我从客户端收到以下 wsdl，我可以在 SoapUI 中成功导入并在我的应用程序中使用。但是当我尝试验证 wsdl 文件时，它会抛出 12 个错误

```
<wsdl:types>
    <schema  targetNamespace="http://abc.com:9080/product/services/12WebService/types/"
        xmlns="http://www.w3.org/2001/XMLSchema">
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <element name="Message">
            <complexType>
                <sequence>
                     <any minOccurs="0"/>
                </sequence>
            </complexType>
        </element>
    </schema>
    <schema targetNamespace="http://abc.com:9080/nproduct/services/12WebService/types/"
        xmlns="http://www.w3.org/2001/XMLSchema">
        <import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <element name="Response">
            <complexType>
                <sequence>
                     <any minOccurs="0"/>
                </sequence>
            </complexType>
        </element>
    </schema>
</wsdl:types>
<wsdl:message name="Message">
    <wsdl:part name="Message" element="types:Message"/>
</wsdl:message>
<wsdl:message name="Response">
    <wsdl:part name="Response" element="types:Response"/>
</wsdl:message>
<wsdl:portType name="12WebServiceImpl">
    <wsdl:operation name="process12">
        <wsdl:input message="tns:Message" name="Message"/>
        <wsdl:output message="tns:Response" name="Response"/>
        <wsdl:fault message="tns:Response" name="Response"/>
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="12WebServiceSoapBinding" type="tns:12WebServiceImpl">
    <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="process12">
        <wsdlsoap:operation soapAction="http://abc.com:9080/product/services/12WebService/process12"/>
        <wsdl:input name="Message">
            <wsdlsoap:body namespace="http://abc.com:9080/product/services/12WebService" use="literal"/>
        </wsdl:input>
        <wsdl:output name="Response">
            <wsdlsoap:body namespace="http://abc.com:9080/product/services/12WebService" use="literal"/>
        </wsdl:output>
        <wsdl:fault name="Response">
            <wsdlsoap:body namespace="http://abc.com:9080/product/services/12WebService" use="literal"/>
        </wsdl:fault>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="12WebService">
    <wsdl:port binding="tns:12WebServiceSoapBinding" name="12WebService">
        <wsdlsoap:address location="http://abc.com:9080/product/services/12WebService"/>
    </wsdl:port>
</wsdl:service> 
```

所以，是否`wsdl`需要有效。我要回客户那里更正吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T09:43:20.657

我认为必须验证 wsdl 文件。
XML命名规则：[http ://www.w3schools.com/xml/xml_elements.asp](http://www.w3schools.com/xml/xml_elements.asp)

> XML 命名规则 XML 元素必须遵循以下命名规则：
> 
> 名称可以包含字母、数字和其他字符
> 名称不能以数字或标点字符
> 开头 名称不能以字母 xml（或 XML 或 Xml 等）开头
> 名称不能包含空格
> 可以使用任何名称，不保留任何单词。

# java - 我需要 servlet 来进行服务器端 Java 编程吗？

> ID：16086103
> 
> 赞同：13
> 
> 时间：2013-04-18T14:45:14.730
> 
> 标签：java, tomcat, servlets

我需要编写一个小型服务器来处理来自 Android 应用程序的请求。（用户向服务器发送一个数字，服务器对从每个用户收到的数字进行一些数学运算 - 比如说平均值 - 并返回它）。

我刚刚从 Oracle ( [http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html) ) 阅读了这个简单的介绍。

它解释了如何让服务器监听特定的门。普通java，不需要特殊应用程序（如Tomcat）。

我知道人们通常使用“servlet”（使用 Tomcat）来完成这种事情。这是为什么？有什么优势？我不能像那个简单教程中描述的那样编写一个示例服务器，并让它始终在计算机上运行吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T14:55:23.630

使用套接字非常简单。首先。

你创建你的服务器类，你让它绑定到一个端口，然后你就走了。

评论中涵盖的第一个障碍是多线程。但是一个简单的生产者/消费者模式将很快为您解决这个问题。

您将遇到的下一个问题是**协议**。

*   谁先说话？

*   你如何回应？

*   如何处理无效请求？

*   如果流在请求期间崩溃会发生什么？

*   您是否为每个请求打开一个新套接字，或者客户端是否保留一个套接字并写入多个请求？

*   也许你想要某种非阻塞 IO？

这就是 HTTP 的用武之地，它是一种通过 TCP/IP 进行通信的协议（实际上可以通过任何东西，你可以使用纸片和自行车）。它定义了上述所有问题（以及更多问题）的答案。

因此，您运行一个网络服务器（tomcat、glassfish），它处理原始套接字并发送正确的信息。

servlet 是一种抽象，当 Tomcat 有一个连接并且它已经协商了压缩、加密等时，它会将请求传递给 servlet。

servlet 不必担心原始套接字，它读取请求并写入响应。

值得指出的是，HTTP 并不是唯一的协议，它只是碰巧用于网络浏览的一种协议。网络服务器使用的也是如此。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-18T14:50:44.620

您不需要 servlet。

Servlet 很有帮助，因为它们为您管理套接字处理，但缺点是您需要一个容器（例如 Tomcat）来运行您的 servlet。你可能想看看[Netty](http://netty.io/)，它真的是为做你所说的工作而构建的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T15:04:53.587

Servlet 是 Java 中处理 HTTP 协议的标准方式。

**如果**您想使用 HTTP 进行客户端-服务器通信*，并且*想在服务器端使用 Java，**那么**您应该使用 servlet。

Servlet 是使用 Java 在 Internet 中进行通信的一种简单而有效的解决方案。根据您的需要，rancidfishbreath 建议的 Netty 是一个有效的替代方案，但我推荐使用 Tomcat 的 servlet，因为它是一个更简单的解决方案。必须使用 Tomcat 不是问题：它轻巧且免费。

由于 bmorris591 已经解释的原因，放弃使用原始套接字的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T18:42:35.490

您可能希望将 Java 以外的其他东西视为服务器端解决方案。也许[Node.js](http://nodejs.org/)、[PHP](http://us.php.net/)甚至[Ruby on Rails](http://rubyonrails.org/)可能是更好的、没有花里胡哨的选择。我可能会列出 100 多个选项（Python、Django 等，等等），它们比尝试学习 Java 和 Servlet 以及随之而来的所有东西要简单得多。您不一定需要让 Java 应用程序与 Java 应用程序对话，并且有很多选项可以让简单的 HTTP 服务器运行不需要大量学习曲线的自定义解决方案。

# c# - SimpleInjector - 如何使用 LifetimeScopeLifestyle 注册许多泛型类型的实现？

> ID：16086121
> 
> 赞同：4
> 
> 时间：2013-04-18T14:46:19.290
> 
> 标签：c#, dependency-injection, inversion-of-control, simple-injector

在回答[这个问题](https://stackoverflow.com/questions/16064902/dependency-injection-in-unit-of-work-pattern-using-repositories/16085891#16085891)时，我无法找出使用`LifetimeScopeLifestyle`SimpleInjector 中的实例注册许多泛型类型实现的最佳技术。

这种注册形式的推荐方法是这样的：

```
container.RegisterManyForOpenGeneric(typeof(IRepository<>), 
    typeof(IRepository<>).Assembly); 
```

但这不允许`LifetimeScopeLifestyle`传入的实例。

下面是我想出的，但我知道它没有足够的弹性，因为它正在检查任何通用接口，而不是专门`IRepository<>`的 . 谁能告诉我该怎么做？

```
public static void Configure(Container container)
{
    var lifetimeScope = new LifetimeScopeLifestyle();

    container.Register<IUnitOfWork, UnitOfWork>(lifetimeScope);

    //this query needs improvement
    var registrations =
        from type in typeof(IRepository<>).Assembly.GetExportedTypes()
        where typeof(IRepository).IsAssignableFrom(type)
            && type.IsClass
            && !type.IsAbstract
        from service in type.GetInterfaces()
        where service.IsGenericType
        select new { Service = service, Implementation = type };

    foreach (var registration in registrations)
    {
        container.Register(registration.Service, 
            registration.Implementation, lifetimeScope);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:38:58.817

**TLDR：**

```
container.RegisterManyForOpenGeneric(
    typeof(IRepository<>),
    lifetimeScope, 
    typeof(IRepository<>).Assembly); 
```

首先，您的查询是错误的。它应该是：

```
var registrations =
    from type in
        typeof(IRepository<>).Assembly.GetExportedTypes()
    where !service.IsAbstract
    where !service.IsGenericTypeDefinition
    from @interface in type.GetInterfaces()
    where @interface.IsGenericType
    where @interface.GetGenericTypeDefinition() ==
        typeof(IRepository<>)
    select new { Service = @interface, Impl = type }; 
```

其次，该框架包含一个`GetTypesToRegister`为您获取这些类型的方法，其中不包括装饰器类型：

```
var repositoryTypes =
    OpenGenericBatchRegistrationExtensions.GetTypesToRegister(
        container, typeof(IRepository<>), 
        typeof(IRepository<>).Assembly);

var registrations =
    from type in repositoryTypes
    from @interface in type.GetInterfaces()
    where @interface.IsGenericType
    where @interface.GetGenericTypeDefinition() ==
        typeof(IRepository<>)
    select new { Service = @interface, Impl = type }; 
```

但它变得更好了，容器包含一个方法的重载，该`RegisterManyForOpenGeneric`方法接受一个回调委托，允许您按如下方式进行注册：

```
container.RegisterManyForOpenGeneric(
    typeof(IRepository<>),
    (service, impls) =>
    {
        container.Register(service, impls.Single(),
            lifetimeScope);
    }, 
    typeof(IRepository<>).Assembly); 
```

但最重要的是，该框架包含`RegisterManyForOpenGeneric`接受`Lifetime`. 因此，您可以将注册简化为以下内容：

```
container.RegisterManyForOpenGeneric(
    typeof(IRepository<>),
    lifetimeScope, 
    typeof(IRepository<>).Assembly); 
```

# oracle11g - Oracle SQL 11g - 下一个工作日查询

> ID：16086122
> 
> 赞同：0
> 
> 时间：2013-04-18T14:46:21.733
> 
> 标签：oracle11g

美好的一天，我正在编写一些代码，其中 -

1) 如果在工作日（周一至周四）东部时区（美国）下午 5:00 之后和工作日东部时区（美国）上午 7:59:59 之前提交请求，则日期将更改为下一个业务一天@ 8:00 AM。

2) 如果请求是在周五下午 5:00 到下周一上午 7:59:59 之前提交的，则时间会按上述方式累计。

3）然后，代码需要检查另一个日期字段以比较“接受”时间（在提交日期或“新”日期的 4 小时内）。

例如：

如果请求 001 是在 2013 年 4 月 17 日凌晨 02:00 提交的，则其新日期将为 2013 年 4 月 17 日上午 8:00。

如果请求 002 是在 04/17/2013 06:45PM 提交的，那么它的新日期将是 04/18/2013 08:00AM。

如果请求 003 是在 04/20/2013 05:45AM（这是星期六）提交的，那么它的新日期将是 04/22/2013 08:00AM。

我一直在将代码拼凑在一起，希望能在最终的代码中将它们整合在一起。

* * *

这就是我到目前为止所拥有的（对于日期转换代码）

```
 ,CASE 
        WHEN to_date(('DATE_REQUESTED'),'DAY',nls_date_language = English) in ('Friday','Saturday'))
        THEN NEXT_DAY(to_date(('DATE_REQUESTED'),'Monday') + 8 / 24)
        ELSE DATE_REQUESTED 
    END as Weekend_Converted 
```

* * *

用于检查请求是否在 4 小时内被接受的代码

```
 SELECT RIT_Request_v.*
     ,CASE 
     WHEN DATE_ACCEPTED IS NULL THEN 'NOT ACKNOWLEDGED'
     WHEN DATE_ACCEPTED > (DATE_REQUESTED + 4 / 24) THEN 'OVER 4 HOURS'
     ELSE 'WITHIN 4 HOURS'
     END AS Acknowledgement

     FROM RIT.RIT_Request_v

     WHERE (("DATE_REQUESTED") BETWEEN trunc(sysdate, 'YYYY') AND trunc(sysdate)) 
```

* * *

正如我在下面的评论之一中所述，我更新了我的代码，现在出现“无效标识符”错误 -

```
 SELECT RIT_Request_v.*
    ,CASE WHEN TO_CHAR(DATE_REQUESTED,'D') IN (1,6,7)
          THEN NEXT_DAY(DATE_REQUESTED,'MONDAY')
          ELSE DATE_REQUESTED + 1 END AS Weekend_Converted

    ,CASE WHEN DATE_ACCEPTED IS NULL THEN 'NOT ACKNOWLEDGED'
          WHEN WEEKEND_CONVERTED IS NULL THEN 'NOT ACKNOWLEDGED'
          WHEN DATE_ACCEPTED > (DATE_REQUESTED + 4 / 24) THEN 'OVER 4 HOURS'
          WHEN DATE_ACCEPTED > (Weekend_Converted + 4 / 24) THEN 'OVER 4 HOURS'
          ELSE 'WITHIN 4 HOURS' END AS Acknowledgement

    FROM RIT.RIT_Request_v

    WHERE (("DATE_REQUESTED") BETWEEN trunc(sysdate, 'YYYY') AND trunc(sysdate))

                AND FORM_ID IN         (2011,2014,5007,5036,5039,7007,10000,10001,10005,10007,10011,10024,10025,10029,10032,10033,10034,10035,10036,10037,11011,11013,11999,36001) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:52:28.247

您`case`生成的`weekend_converted`唯一似乎是在原始版本中处理周末，并且似乎混淆了周五的任何内容；更新的版本将每个日期都转移到第二天或下周一的同一时间，既丢失了`08:00`部分，又丢失了在工作日的大部分时间里，您根本不会转移这一天。

您在第二个版本中获得了“无效标识符”，因为您正在定义`weekend_converted`伪列，然后尝试在同一级别的查询中使用它，这是不允许的。您需要在其中定义一个级别，然后在外部引用它`select`。

这似乎涵盖了您的规则，但我没有用任何额外的日期对其进行测试：

```
select r.*,
    case
        when to_char(date_requested, 'DY',
                'NLS_DATE_LANGUAGE=English') in ('SAT', 'SUN')
            or (to_char(date_requested, 'DY',
                'NLS_DATE_LANGUAGE=English') = 'FRI'
                and extract(hour from cast(date_requested as timestamp)) >= 17)
        then trunc(next_day(date_requested, 'MON')) + interval '8' hour
        when extract(hour from cast(date_requested as timestamp)) >= 17
        then trunc(date_requested) + interval '1' day + interval '8' hour
        when extract(hour from cast(date_requested as timestamp)) < 8
        then trunc(date_requested) + interval '8' hour
        else date_requested
    end as clock_start
from rit_request_v r; 
```

虽然，`NLS_DATE_LANGUAGE`如果您不知道它将在哪里运行，虽然强制是一个好主意，但该`next_day`函数要求 day 参数使用您的本地语言，因此您最好在整个会话中设置它而不是在每个功能的基础。

无论如何，这给出了：

```
DATE_REQUESTED   DATE_ACCEPTED       FORM_ID CLOCK_START
---------------- ---------------- ---------- ----------------
2013-04-17 02:00 2013-04-17 11:59       5007 2013-04-17 08:00
2013-04-17 18:45 2013-04-18 11:59       5007 2013-04-18 08:00
2013-04-13 05:45                        5007 2013-04-15 08:00 
```

然后，您可以将其用作内联视图或 CTE：

```
with t as (
select r.*,
    case
        when to_char(date_requested, 'DY',
                'NLS_DATE_LANGUAGE=English') in ('SAT', 'SUN')
            or (to_char(date_requested, 'DY',
                'NLS_DATE_LANGUAGE=English') = 'FRI'
                and extract(hour from cast(date_requested as timestamp)) >= 17)
        then trunc(next_day(date_requested, 'MON')) + interval '8' hour
        when extract(hour from cast(date_requested as timestamp)) >= 17
        then trunc(date_requested) + interval '1' day + interval '8' hour
        when extract(hour from cast(date_requested as timestamp)) < 8
        then trunc(date_requested) + interval '8' hour
        else date_requested
    end as clock_start
from rit_request_v r
where date_requested between trunc(sysdate, 'YYYY') and trunc(sysdate)
and form_id in (2011, 2014, 5007, 5036, 5039, 7007, 10000, 10001, 10005, 10007, 10011, 10024, 10025, 10029, 10032, 10033, 10034, 10035, 10036, 10037, 11011, 11013, 11999, 36001)
)
select t.*,
    case
        when date_accepted is null then 'NOT ACKNOWLEDGED'
        when date_accepted > (clock_start + interval '4' hour)
        then 'OVER 4 HOURS'
        else 'WITHIN 4 HOURS'
    end as acknowledgement
from t; 
```

这使：

```
DATE_REQUESTED   DATE_ACCEPTED       FORM_ID CLOCK_START      ACKNOWLEDGEMENT
---------------- ---------------- ---------- ---------------- ----------------
2013-04-17 02:00 2013-04-17 11:59       5007 2013-04-17 08:00 WITHIN 4 HOURS
2013-04-17 18:45 2013-04-18 11:59       5007 2013-04-18 08:00 WITHIN 4 HOURS
2013-04-13 05:45                        5007 2013-04-15 08:00 NOT ACKNOWLEDGED 
```

我可以参考，`clock_start`因为它是在较低级别定义的，在这种情况下是在 CTE 中。

您会注意到我的日期与您的日期格式完全不同。通常我会说您应该将这些字段包装在一个`to_char()`显示中，但是（a）不清楚这是否会显示在 SQL*Plus 或任何地方，或者会输入其他内容并应保留为日期；如果您确实更改了会话以检查 NLS_DATE_LANGUAGE 那么您可以在那里设置 NLS_DATE_FORMAT 。再次取决于你在哪里运行它。

您可能还会`sysdate`在错误的级别上进行检查。事实上，它将包括`clock_start`今天 08:00 的任何时间，因为它正在调整预调整时间。如果将其移到外部，`select`则可以检查它`clock_start`是否在该日期范围内。当然，您也可能是故意这样做的。

希望有帮助...

# php - 将 lighttpd 服务器移植到 Android

> ID：16086124
> 
> 赞同：0
> 
> 时间：2013-04-18T14:46:30.037
> 
> 标签：php, android, mysql, arm, lighttpd

我正在尝试将 lighttpd 移植到 android，以便用户可以通过从浏览器中点击 localhost:port 从那里执行 php 脚本，但我的脚本无法正常工作

这是运行时java代码

```
公共类 RunTimeProvider {
    布尔 isLoaded = false;

```
ProcessBuilder mysqlBuilder = new ProcessBuilder(new String[] {
        "/data/data/com.Punk.Qs/mysqld",
        "--defaults-file=/data/data/com.Punk.Qs/my.ini",
        "--user=root",
        "--language=/data/data/com.Punk.Qs/share/mysql/english" });

ProcessBuilder phpBuilder = new ProcessBuilder(new String[] {
        "/data/data/com.Punk.Qs/php-cgi-ext", "-c",
        "data/data/com.Punk.Qs/php.ini" });
ProcessBuilder lighttpdBuilder = new ProcessBuilder(new String[] {
        "/data/data/com.Punk.Qs/lighttpd", "-f",
        "data/data/com.Punk.Qs/lighttpd.conf" });

public void execute() {
    File fphp = new File("/data/data/com.Punk.Qs/php-cgi-ext");
    File flighttp = new File("/data/data/com.Punk.Qs/lighttpd");
    File fmysql = new File("/data/data/com.Punk.Qs/mysqld");
    if (fphp.exists() && flighttp.exists() && fmysql.exists()) {

        try {
            Runtime.getRuntime().exec(
                    "chmod 777 /data/data/com.Punk.Qs/lighttpd");
            lighttpdBuilder.start();

            //NativeApp(
                    "/data/data/com.Punk.Qs/lighttpd -f data/data/com.Punk.Qs/lighttpd.conf",
                    "lighttpd");

            Log.w("Lighttpd Started ", "Lighttpd successfully started");
        } catch (IOException e) {

            Log.w("Lighttpd Startup failed ", e);
            new ErrorLogger("Lighttpd", e.toString());
        }
        try {
            Runtime.getRuntime().exec(
                    "chmod 777 /data/data/com.Punk.Qs/mysqld");
            mysqlBuilder.start();
            //NativeApp(
                    "/data/data/com.Punk.Qs/mysqld --defaults-file=/data/data/com.Punk.Qs/my.ini --user=root --language=/data/data/com.Punk.Qs/share/mysql/english",
                    "mySQl");
            Log.d("mySQL Started ", "mySQL successfully started");
        } catch (IOException e) {
            Log.w("mySQL Startup failed ", e);
            new ErrorLogger("mySQl", e.toString());
        }
        try {
            Runtime.getRuntime().exec(
                    "chmod 777 /data/data/com.Punk.Qs/php-cgi-ext");
            phpBuilder.start();
            //NativeApp(
                    "/data/data/com.Punk.Qs/php-cgi-ext -c data/data/com.Punk.Qs/php.ini",
                    "phpCgi");

            Log.d("PHP Started ", "PHP successfully started");
        } catch (IOException e) {
            Log.w("PHP Startup failed ", e);
            new ErrorLogger("phpCgi", e.toString());

        }
    } else {
        Log.w("Error Runime Lib", "RunTime Libs is missing");

    }
    // return b;

}

public void NativeApp(String cmd, String tag) {

    Process nativeApp = null;

    Log.d("Executing :", cmd);
    try {

        nativeApp = Runtime.getRuntime().exec(cmd);
    } catch (IOException e) {
        Log.e("RunTime Error : ", e.toString());
        new ErrorLogger("RunTime", e.toString());
    }

    BufferedReader reader = new BufferedReader(new InputStreamReader(
            nativeApp.getInputStream()));
    int read;
    char[] buffer = new char[4096 * 8];
    StringBuffer output = new StringBuffer();
    try {

        while ((read = reader.read(buffer)) > 0) {
            output.append(buffer, 0, read);
        }

        reader.close();
    } catch (IOException e) {
        Log.e("IO Error : ", e.toString());
        new ErrorLogger("IO", e.toString());
    }

    // Waits for the command to finish.
    try {
        nativeApp.waitFor();
    } catch (InterruptedException e) {

        Log.e("InterruptedException : ", e.toString());
        new ErrorLogger("IntExp", e.toString());
    }

    String nativeOutput = output.toString();
    if (nativeOutput != null)
        isLoaded = true;
    Log.d("Output from : " + cmd, nativeOutput);
    new ErrorLogger("RunLib", nativeOutput);
} 
```

}

方法 RunTimePRvider().execute()
```

当用户点击 Button 时将被调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T12:43:40.033

做到这一点的最好方法是去一个开源项目[，](https://github.com/DroidPHP/DroidPHP)并通过代码副本`assets` ，然后在你的设备或模拟器上检查它我也使用过这个项目来使用`php`和`lighthttpd``android..`

# sparql - GraphStore and Datasets in SPARQL Update 1.1

> ID：16086128
> 
> 赞同：0
> 
> 时间：2013-04-18T14:47:00.407
> 
> 标签：sparql

According to SPARQL Update 1.1\. "A Graph Store is a mutable container of RDF graphs managed by a single service.". I was wondering if a GraphStore (in SPARQL Update) is the same with an RDF Dataset (in SPARQL Query). Or a GraphStore is a container of RDF Datasets.And if so, then what happening with the default graph that must be unique.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:57:57.117

RDF 数据集是一个不可变的东西——它是一个值，你不能改变。参见 1

Graph Store 就像一个编程语言集——它是可变的。

# email - 使用 Flash 消息让用户选择启动功能

> ID：16086130
> 
> 赞同：0
> 
> 时间：2013-04-18T14:47:01.733
> 
> 标签：email, cakephp, cakephp-2.3, flash-message

我是 cakephp 的新手。
我需要知道是否有办法让我的应用用户选择发送通知电子邮件或不发送消息。

我已经用谷歌搜索了它，但我没有找到答案......听起来很奇怪，因为这种方法几乎在每个应用程序中都使用......

就像是：

```
 $this->setFlash('Do you wish to send a notification email?', //yes or no);

    //and if the choice is 'Yes'
    $this->sendEmail(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:01:03.727

据我了解，蛋糕中的闪光*仅*用于通知目的。
但是，我已经设法使用 javascript 做到这一点（或类似的东西）。

从视图中，您可以添加一个在 flash div 上添加“是或否”按钮的函数（使用 firebug 或类似的东西检查其 id），并将这些按钮绑定到实际发送消息的 ajax 调用。

就像是

```
<script>
$(function() {
    $('#div_of_the_flash_msg'.append('<div id="yes-button">Yes</div> or 
                                      <div id="no-button">No</div>));

    $('#yes-button, #no-button').on('click', function() {
        $.ajax(/*parameters for the ajax call to the controller with the $this->sendEmail() action*/);
     });
});
</script> 
```

这就是我为这些案例所做的，但我不能 100% 确定这是最好的方法......

它也可以完成（也许，从未做过），创建一种新的 Flash 消息，如`flash_send_email`类，并且在该构造函数中已经定义了按钮及其各自的 javascript，所以当在上面设置 Flash 消息时就像

```
$this->Session->setFlash('Do you wish to send a notification email?', 'flash_send_email'); 
```

并且 flash_send_email.ctp （在 Views 中的 Elements 文件夹内）应该类似于

```
<div class="your-class">
    <?php echo $message //that's the message you send by parameter on the controller?>
    <div id="yes-button">Yes</div> or <div id="no-button">No</div>
</div>
<script>
      //same script as above to handle the click situations
</script> 
```

同样，第二种方法我没有尝试过，但如果你想在多个视图中显示这种消息，基本上是相同的，只是更可重用。

说了这么多，我仍然认为 Flash 消息应该仅用于通知目的，与用户的任何其他交互都可以通过自定义 div、弹出窗口等进行。考虑一下，也许使用 Flash 并不是绝对必要的这个。

# html - 如何在非 http html 上进行文件访问？

> ID：16086131
> 
> 赞同：1
> 
> 时间：2013-04-18T14:47:01.840
> 
> 标签：html

我尝试使用本地打开的 html 文件中的文件系统 api，而不是通过 web。因此没有关联的域。

是否有允许在本地启动 html 时使用本地文件的 api（例如 file:///abc.html）。

我试过了

```
window.requestFileSystem 
```

和 webkit 变体。但是，这仅在从 **[http://abc.html](http://abc.html)**调用时有效，但在调用**file://abc.html**时无效：

我在 Windows 上使用 chrome 26...

# php - AJAX 调用成功但抛出未定义索引错误

> ID：16086137
> 
> 赞同：0
> 
> 时间：2013-04-18T14:47:40.333
> 
> 标签：php, javascript, jquery, ajax, google-api

我有一个将数据传递到另一个 php 文件 createTest2.php 的 ajax 调用，如下所示。

但是 createTest2.php 文件抛出错误

“注意：未定义的索引：第 2 行 C:\xampp\htdocs\TestProj\Test\createTest2.php 中的 aaa

调用者.php

```
$(document).ready(function(){
    $("#button_submit").click(function() 
  {

    $.ajax({
      type:"POST",
      url:"createTest2.php",
      data:{aaa : "UNIT_TEST"},
      success:function()
      {
        alert("success");
      }
    });
 });
}); 
```

createTest2.php

```
$test_name = $_POST['aaa']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:21:02.797

您的代码/脚本没有任何问题。我在我的本地主机上尝试过，它可以工作。

确保错误报告配置正确，因为它正在打印一条通知，该通知也将传递给您的 ajax 结果。

要删除它，请在您的 php 代码之上使用这些`createTest2.php`：（在您调用任何内容之前，就在第一个 php 开始标记之后）

```
<?php
ini_set("DISPLAY_ERRORS",0);
error_reporting(0); 
```

请注意，它只是 a`NOTICE`而不是`ERROR`您的问题中指出的 a 。希望有帮助。;)

** 更新：有人说建议修复通知而不是仅仅隐藏它们，只是让你知道..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:48:36.717

在引号中给出数据属性，

*改变*

```
 data:{aaa : "UNIT_TEST"}, 
```

*至*

```
data:{"aaa" : "UNIT_TEST"}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:53:18.707

尝试发送是作为数据查询（使用参数将对象转换为数据查询）

```
$(document).ready(function(){
    $("#button_submit").click(function() 
  {
    var params = $.param({aaa : "UNIT_TEST"});

    $.ajax({
      type:"POST",
      url:"createTest2.php",
      data: params,
      success:function()
      {
        alert("success");
      }
    });
 });
}); 
```

# objective-c - 从 NSMutable 数组中移除精灵

> ID：16086138
> 
> 赞同：0
> 
> 时间：2013-04-18T14:47:42.923
> 
> 标签：objective-c, arrays, cocos2d-iphone

我正在做一个 cocos2d 项目，并希望使用一组精灵。

我创建数组：

```
NSMutableArray *ssprites; 
```

然后我在 init 方法中添加一些东西：

```
CCSprite *obssprite = [CCSprite spriteWithFile:@"/Users/Desktop/Programs/physics test/physics test/Resources/Icon-Small@2x.png"];  
            obssprite.position=ccp(position,5);

            [self addChild: obssprite];

            [ssprites addObject: obssprite]; 
```

然后稍后我想删除精灵：

```
for( int i=0; i<[ssprites count];i++) {
    CCSprite *spr = (CCSprite *) [ssprites objectAtIndex:i];
        if(YES) {    //this is just for test, the actual program uses an actual condition

            [spr removeFromParentAndCleanup: YES];
            [ssprites removeObjectAtIndex:i];
        }

} 
```

但由于某种原因，精灵停留在屏幕上。我应该如何修复代码以实际删除精灵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:24:55.407

正如乔在他的评论中提到的那样，您正在循环遍历精灵数组并在循环中删除它们。因此，第一次删除索引 0 处的对象然后递增`i`到 1，它现在实际上“指向”原始数组中索引 2 处的对象（之前位于索引 1 的对象现在位于索引 0）。在我看来，您正在删除每隔一个对象？

不管这个问题如何，从您正在循环的数组中删除元素绝不是一个好主意。你需要这个数组吗？如果您只是使用 CCNode 的子数组（从您的代码看来，每个精灵都添加到父精灵和您自己的精灵数组）怎么办。

* * *

您可以使用这个简单的代码看到这一点

```
NSMutableArray *ssprites = [NSMutableArray arrayWithObjects:@"obj1", @"obj2", @"obj3", @"obj4", @"obj5", nil];
for(int i = 0; i < [ssprites count]; i++) 
{
    NSString *spr = (NSString *) [ssprites objectAtIndex:i];

    NSLog(@"removing %@", spr);

    [ssprites removeObjectAtIndex:i];
} 
```

我建议你像这样改变你的代码

```
NSMutableArray *spritesToRemove = [[NSMutableArray alloc] init];

for (CCSprite *spr in ssprites)
{
    if (YES) // Your condition goes here
    {
        // Remove the sprite from its parent here.
        [spr removeFromParentAndCleanup:YES];
        // However, leave the "spr" in ssprites array - just "mark" it for deletion.
        [spritesToRemove addObject:spr];
    }
}

[ssprites removeObjectsInArray:spritesToRemove]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:54:04.090

尝试：

```
//..
[self removeChild:spr cleanup: YES]
//.. 
```

# c# - 如何使用标志属性

> ID：16086141
> 
> 赞同：4
> 
> 时间：2013-04-18T14:47:49.790
> 
> 标签：c#, enums

我项目的开发人员实现了以下枚举

```
[Flags]
public enum Permissions
{
    Overview = 1,
    Detail = 3,
    Edit = 7,
    Delete = 31,
    Block = 39, // Requires Edit = 7, and It's own location = 32\. Therefore 7 + 32 = 39.
    Unblock =  71, // Requires Edit = 7, and It's own location = 64\. Therefore 7 + 64 = 71.
    All = int.MaxValue
} 
```

现在，如您所见，他已经制作了`Details = 3`. 他这样做的原因是Details（应该是2）也包括概述（2+1=3）。

我一直认为做这些事情的方法是在枚举中使用 2 的幂，并在枚举之外进行任何 oring 和 anding。这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:55:08.963

为了使枚举用户的生活更轻松，在枚举中定义组合并没有错。也就是说，忽略构成组合的各种 2 的幂选项可能是一个短视的决定（不灵活且难以理解的代码）决定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T14:57:14.893

[Docs](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)建议以 2 的幂定义标记的枚举常量，但没有限制使用任何可能的值定义标记的枚举常量。

> 以 2 的幂定义枚举常数，即 1、2、4、8 等。这意味着组合枚举常量中的各个标志不重叠。

# sql - UPDATE 列，其中另一列 LIKE 特定字符串

> ID：16086142
> 
> 赞同：0
> 
> 时间：2013-04-18T14:47:53.613
> 
> 标签：sql, rows

我试图弄清楚如何做到这一点，但没有运气，所以我寻求帮助......

我有一个名为 products 的表，我需要在一个名为 refresh_time 的列中更新在另一个名为“ref”的列中喜欢“-295”的所有行

我试过了

```
UPDATE products SET refresh_time = "2014-10-26 08:33:29" WHERE products.ref LIKE "295-" 
```

没运气..

任何帮助都非常感谢..在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:51:06.810

您需要在 LIKE 模式中使用通配符。并使用单引号。

`LIKE '295-%'`

[http://www.w3schools.com/sql/sql_like.asp](http://www.w3schools.com/sql/sql_like.asp)

# html - HTML5 播放器 - 无后备

> ID：16086143
> 
> 赞同：0
> 
> 时间：2013-04-18T14:47:56.047
> 
> 标签：html, html5-video, html5-audio

我正在寻找一个 HTML5 音频/视频播放器。我需要在每个浏览器中都有相同的图形渲染（每个浏览器都有自己的）和相同的控制器（例如，Firefox 只有关闭/打开音量的按钮，但不允许您设置中间值，如例如发生在 Chrome 上）。

互联网上有很多软件，也很有效，但所有这些都提出了一个备用播放器，通常在闪存中。但我不想要一个后备播放器，我找不到任何适合我的情况的东西！

我可以修改其中任何一个并删除备用文件和代码，但我想知道您是否知道某些已经存在的内容，并且如果浏览器不支持 HTML5 或媒体类型不受支持，则会向用户显示警告消息.

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:14:10.407

我发现了这个： http:
[//www.leanbackplayer.com](http://www.leanbackplayer.com)

允许您自由选择使用哪种回退，包括无或字符串。

效果很好，不错。

# fortran - Fortran77 定义数组，第一列是整数变量，第二列是字符串变量

> ID：16086149
> 
> 赞同：0
> 
> 时间：2013-04-18T14:48:15.357
> 
> 标签：fortran

如何在第一列中使用整数变量定义数组，在第二列中定义字符串变量？

例如：`mELF`理想情况下，数组的第一列和第三列将包含数字，第三列包含字符串。我让它只适用于整数，但现在我想混合不同类型的变量。是否可以？

```
 INTEGER, save :: mELF(11000, 11000, 11000)
  DATA mELF/11000*11000*11000*0/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:56:14.117

不，不可能在 FORTRAN77 或任何更新版本的语言中混合数组元素的类型。在一个数组中，所有元素必须是相同的类型（和种类）。

在现代 Fortran，即 90 及更高版本中，您可以定义派生类型，例如：

```
type my_type
  integer :: col1, col3
  character(len=16) :: col2
end type 
```

然后声明一个数组，例如

```
type(my_type), dimension(:), allocatable :: my_array 
```

现在您有了一个数据结构，您可以使用诸如

```
my_array % col2

my_array(1:12) % col1

my_array(2:6) % col2(5:8) 
```

等等。

# mysql - 使用 CodeIgniter Active Record 语句

> ID：16086152
> 
> 赞同：2
> 
> 时间：2013-04-18T14:48:23.860
> 
> 标签：mysql, codeigniter, activerecord

我正在寻找一种在 CodeIgniter 中使用 Active Record 来构建查询的方法。

我目前的代码是这样的：

```
$this->db->   like('responsible', $user->id);
$this->db->or_like('accountable', $user->id);
$this->db->or_like('consulted',   $user->id);
$this->db->or_like('informed',    $user->id);

// Get the tasks, but only with the correct start or end date
$tasks = $this->db->get_where('level_' . $this->config->item('answer_level'), array('date_end' => $offset, 'ccode' => $user->country));

// Check if tasks exist
if($tasks->num_rows() > 0){
    // Tasks have been found that should have been finished!
    echo $tasks->num_rows() . " tasks found for " . $user->first_name . " that should have been finished!\n";
    $last_month_tasks = $tasks->result();
}

unset($tasks); 
```

这会产生以下 SQL：

```
SELECT *
FROM (`level_3`)
WHERE `date_start` =  -5
AND `ccode` =  'GB'
AND  `responsible`  LIKE '%5%'
OR  `accountable`  LIKE '%5%'
OR  `consulted`  LIKE '%5%'
OR  `informed`  LIKE '%5%' 
```

但我需要它来生成这个 SQL：

```
SELECT * 
FROM (`level_3`)
WHERE  `date_start` = -5
AND  `ccode` =  'GB'
AND (
`responsible` LIKE  '%5%'
    OR  `accountable` LIKE  '%5%'
    OR  `consulted` LIKE  '%5%'
    OR  `informed` LIKE  '%5%'
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:35:14.797

CodeIgniter 的 ActiveRecord 不支持查询和子句的嵌套。您必须像这样手动执行此操作：

```
$this->db->select('*');
$this->db->from('level_' . $this->config->item('answer_level'));
$this->db->where(array('date_end' => $offset, 'ccode' => $user->country));
$this->db->where("(responsible LIKE '%5%' OR accountable LIKE '%5%' OR consulted LIKE '%5%' OR informed LIKE '%5%')");
$tasks = $this->db->get(); 
```

# c# - 使用 Ionic.Zip c# 进行即时压缩

> ID：16086157
> 
> 赞同：1
> 
> 时间：2013-04-18T14:48:35.933
> 
> 标签：c#, zip

我正在尝试从流创建一个 zip 文件并返回一个流，我的问题是我不想将任何数据存储在本地硬盘或内存中。我正在使用`Ionic.Zip`图书馆

```
 Stream output = new MemoryStream();
        using (ZipFile zip = new ZipFile())
        {
            Stream s = ftpManager.GetFileStream("/mydoc.docx");
            ZipEntry e = zip.AddEntry("Content-From-Stream.bin", s);
            e.Comment = "The content for entry in the zip file was obtained from a stream";
            //zip.AddFile("Readme.txt");
            zip.Save(output);
        }
        if (output != null)
        {
            ftpManager.Upload(output, "/MohamedTest/mydoc.zip");
        } 
```

这段代码有很多问题，

*   首先，我使用的 MemoryStream 并不可取
*   二、压缩文件压缩后为空

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:26:47.363

最有可能的输出位置设置为压缩后流的末尾，请检查此。而且，除非您将实现一些代理流（它将处理 .Write 方法并将此数据发送到 FTP），否则您需要内存/文件流来存储压缩数据。

# delphi - Delphi Chromium Embedded - 创建并获取 cookie

> ID：16086160
> 
> 赞同：0
> 
> 时间：2013-04-18T14:48:41.817
> 
> 标签：delphi, cookies, chromium-embedded

我在我的应用程序中使用了 Delphi Chromium Embedded。我应该需要将用户的帐户信息保存在 cookie 中。我知道有 CefCookieManager 可以做到这一点，但我无法找到正确的程序来存储和获取 cookie 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-14T07:50:41.450

感谢 Dmitry 的评论，在调用之后`VisitAllCookies`，`OnCookiesVisited`事件将被所有保存的 cookie 触发（一个接一个）。

可能需要在被触发`VisitAllCookies`后调用。`OnFrameAttached`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-18T15:41:36.370

```
Uses 
  ceflib;

const
DefaultCookiesDir = 'Cookies/';

implementation
{$R *.dfm}

procedure TForm1.Button2Click(Sender: TObject);
var
  CookieManager: ICefCookieManager;
  CookiesPath : String;
begin
  CookiesPath := ExtractFilePath(Application.ExeName) + DefaultCookiesDir + 'User1';
  CookieManager := TCefCookieManagerRef.GetGlobalManager;
  CookieManager.SetStoragePath(CookiesPath);
  Chromium1.Load('www.vk.com');
end; 
```

# javascript - Handle file download from ajax post

> ID：16086162
> 
> 赞同：460
> 
> 时间：2013-04-18T14:48:45.007
> 
> 标签：javascript, jquery, ajax

I have a javascript app that sends ajax POST requests to a certain URL. Response might be a JSON string or it might be a file (as an attachment). I can easily detect Content-Type and Content-Disposition in my ajax call, but once I detect that the response contains a file, how do I offer the client to download it? I've read a number of similar threads here but none of them provide the answer I'm looking for.

Please, please, please do not post answers suggesting that I shouldn't use ajax for this or that I should redirect the browser, because none of this is an option. Using a plain HTML form is also not an option. What I do need is to show a download dialog to the client. Can this be done and how?

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2014-05-22T03:26:33.713

Don't give up so quickly, because this can be done (in modern browsers) using parts of the FileAPI:

```
var xhr = new XMLHttpRequest();
xhr.open('POST', url, true);
xhr.responseType = 'blob';
xhr.onload = function () {
    if (this.status === 200) {
        var blob = this.response;
        var filename = "";
        var disposition = xhr.getResponseHeader('Content-Disposition');
        if (disposition && disposition.indexOf('attachment') !== -1) {
            var filenameRegex = /filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;
            var matches = filenameRegex.exec(disposition);
            if (matches != null && matches[1]) filename = matches[1].replace(/['"]/g, '');
        }

        if (typeof window.navigator.msSaveBlob !== 'undefined') {
            // IE workaround for "HTML7007: One or more blob URLs were revoked by closing the blob for which they were created. These URLs will no longer resolve as the data backing the URL has been freed."
            window.navigator.msSaveBlob(blob, filename);
        } else {
            var URL = window.URL || window.webkitURL;
            var downloadUrl = URL.createObjectURL(blob);

            if (filename) {
                // use HTML5 a[download] attribute to specify filename
                var a = document.createElement("a");
                // safari doesn't support this yet
                if (typeof a.download === 'undefined') {
                    window.location.href = downloadUrl;
                } else {
                    a.href = downloadUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                }
            } else {
                window.location.href = downloadUrl;
            }

            setTimeout(function () { URL.revokeObjectURL(downloadUrl); }, 100); // cleanup
        }
    }
};
xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
xhr.send($.param(params, true)); 
```

Or if using jQuery.ajax:

```
$.ajax({
    type: "POST",
    url: url,
    data: params,
    xhrFields: {
        responseType: 'blob' // to avoid binary data being mangled on charset conversion
    },
    success: function(blob, status, xhr) {
        // check for a filename
        var filename = "";
        var disposition = xhr.getResponseHeader('Content-Disposition');
        if (disposition && disposition.indexOf('attachment') !== -1) {
            var filenameRegex = /filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;
            var matches = filenameRegex.exec(disposition);
            if (matches != null && matches[1]) filename = matches[1].replace(/['"]/g, '');
        }

        if (typeof window.navigator.msSaveBlob !== 'undefined') {
            // IE workaround for "HTML7007: One or more blob URLs were revoked by closing the blob for which they were created. These URLs will no longer resolve as the data backing the URL has been freed."
            window.navigator.msSaveBlob(blob, filename);
        } else {
            var URL = window.URL || window.webkitURL;
            var downloadUrl = URL.createObjectURL(blob);

            if (filename) {
                // use HTML5 a[download] attribute to specify filename
                var a = document.createElement("a");
                // safari doesn't support this yet
                if (typeof a.download === 'undefined') {
                    window.location.href = downloadUrl;
                } else {
                    a.href = downloadUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                }
            } else {
                window.location.href = downloadUrl;
            }

            setTimeout(function () { URL.revokeObjectURL(downloadUrl); }, 100); // cleanup
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2013-04-18T15:00:21.320

Create a form, use the POST method, submit the form - there's no need for an iframe. When the server page responds to the request, write a response header for the mime type of the file, and it will present a download dialog - I've done this a number of times.

You want content-type of application/download - just search for how to provide a download for whatever language you're using.

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2016-07-04T07:56:04.153

I faced the same issue and successfully solved it. My use-case is this.

"*Post JSON data to the server and receive an excel file. That excel file is created by the server and returned as a response to the client. Download that response as a file with custom name in browser*"

```
$("#my-button").on("click", function(){

// Data to post
data = {
    ids: [1, 2, 3, 4, 5]
};

// Use XMLHttpRequest instead of Jquery $ajax
xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    var a;
    if (xhttp.readyState === 4 && xhttp.status === 200) {
        // Trick for making downloadable link
        a = document.createElement('a');
        a.href = window.URL.createObjectURL(xhttp.response);
        // Give filename you wish to download
        a.download = "test-file.xls";
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click();
    }
};
// Post data to URL which handles post request
xhttp.open("POST", excelDownloadUrl);
xhttp.setRequestHeader("Content-Type", "application/json");
// You should set responseType as blob for binary responses
xhttp.responseType = 'blob';
xhttp.send(JSON.stringify(data));
}); 
```

The above snippet is just doing following

*   Posting an array as JSON to the server using XMLHttpRequest.
*   After fetching content as a blob(binary), we are creating a downloadable URL and attaching it to invisible "a" link then clicking it.

Here we need to carefully set few things at the server side. I set few headers in Python Django HttpResponse. You need to set them accordingly if you use other programming languages.

```
# In python django code
response = HttpResponse(file_content, content_type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") 
```

Since I download xls(excel) here, I adjusted contentType to above one. You need to set it according to your file type. You can use this technique to download any kind of files.

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-04-18T15:00:45.400

What server-side language are you using? In my app I can easily download a file from an AJAX call by setting the correct headers in PHP's response:

## Setting headers server-side

```
header("HTTP/1.1 200 OK");
header("Pragma: public");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");

// The optional second 'replace' parameter indicates whether the header
// should replace a previous similar header, or add a second header of
// the same type. By default it will replace, but if you pass in FALSE
// as the second argument you can force multiple headers of the same type.
header("Cache-Control: private", false);

header("Content-type: " . $mimeType);

// $strFileName is, of course, the filename of the file being downloaded. 
// This won't have to be the same name as the actual file.
header("Content-Disposition: attachment; filename=\"{$strFileName}\""); 

header("Content-Transfer-Encoding: binary");
header("Content-Length: " . mb_strlen($strFile));

// $strFile is a binary representation of the file that is being downloaded.
echo $strFile; 
```

This will in fact 'redirect' the browser to this download page, but as @ahren alread said in his comment, it won't navigate away from the current page.

It's all about setting the correct headers so I'm sure you'll find a suitable solution for the server-side language you're using if it's not PHP.

## Handling the response client side

Assuming you already know how to make an AJAX call, on the client side you execute an AJAX request to the server. The server then generates a link from where this file can be downloaded, e.g. the 'forward' URL where you want to point to. For example, the server responds with:

```
{
    status: 1, // ok
    // unique one-time download token, not required of course
    message: 'http://yourwebsite.com/getdownload/ska08912dsa'
} 
```

When processing the response, you inject an `iframe` in your body and set the `iframe`'s SRC to the URL you just received like this (using jQuery for the ease of this example):

```
$("body").append("<iframe src='" + data.message +
  "' style='display: none;' ></iframe>"); 
```

If you've set the correct headers as shown above, the iframe will force a download dialog without navigating the browser away from the current page.

## Note

Extra addition in relation to your question; I think it's best to always return JSON when requesting stuff with AJAX technology. After you've received the JSON response, you can then decide client-side what to do with it. Maybe, for example, later on you want the user to click a download link to the URL instead of forcing the download directly, in your current setup you would have to update both client and server-side to do so.

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2017-08-30T19:06:06.467

Here is how I got this working [https://stackoverflow.com/a/27563953/2845977](https://stackoverflow.com/a/27563953/2845977)

```
$.ajax({
  url: '<URL_TO_FILE>',
  success: function(data) {
    var blob=new Blob([data]);
    var link=document.createElement('a');
    link.href=window.URL.createObjectURL(blob);
    link.download="<FILENAME_TO_SAVE_WITH_EXTENSION>";
    link.click();
  }
});
```

## Updated answer using [download.js](http://danml.com/download.html)

```
$.ajax({
  url: '<URL_TO_FILE>',
  success: download.bind(true, "<FILENAME_TO_SAVE_WITH_EXTENSION>", "<FILE_MIME_TYPE>")
});
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2016-03-07T19:05:21.370

For those looking for a solution from an Angular perspective, this worked for me:

```
$http.post(
  'url',
  {},
  {responseType: 'arraybuffer'}
).then(function (response) {
  var headers = response.headers();
  var blob = new Blob([response.data],{type:headers['content-type']});
  var link = document.createElement('a');
  link.href = window.URL.createObjectURL(blob);
  link.download = "Filename";
  link.click();
}); 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2020-04-19T23:52:17.890

For those looking for a more modern approach, you can use the `fetch API`. The following code shows how to download a spreadsheet file.

```
fetch(url, {
    body: JSON.stringify(data),
    method: 'POST',
    headers: {
        'Content-Type': 'application/json; charset=utf-8'
    },
})
.then(response => response.blob())
.then(response => {
    const blob = new Blob([response], {type: 'application/application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'});
    const downloadUrl = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = downloadUrl;
    a.download = "file.xlsx";
    document.body.appendChild(a);
    a.click();
}) 
```

I believe this approach to be much easier to understand than other `XMLHttpRequest` solutions. Also, it has a similar syntax to the `jQuery` approach, without the need to add any additional libraries.

Of course, I would advise checking to which browser you are developing, since this new approach won't work on IE. You can find the full browser compatibility list on the following [link][1].

**Important**: In this example I am sending a JSON request to a server listening on the given `url`. This `url` must be set, on my example I am assuming you know this part. Also, consider the headers needed for your request to work. Since I am sending a JSON, I must add the `Content-Type` header and set it to `application/json; charset=utf-8`, as to let the server know the type of request it will receive.

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2014-05-23T12:44:31.757

I see you've already found out a solution, however I just wanted to add some information which may help someone trying to achieve the same thing with big POST requests.

I had the same issue a couple of weeks ago, indeed it isn't possible to achieve a "clean" download through AJAX, the Filament Group created a jQuery plugin which works exactly how you've already found out, it is called [jQuery File Download](https://github.com/filamentgroup/jQuery-File-Download) however there is a downside to this technique.

If you're sending big requests through AJAX (say files +1MB) it will negatively impact responsiveness. In slow Internet connections you'll have to wait *a lot* until the request is sent and also wait for the file to download. It isn't like an instant "click" => "popup" => "download start". It's more like "click" => "wait until data is sent" => "wait for response" => "download start" which makes it appear the file double its size because you'll have to wait for the request to be sent through AJAX and get it back as a downloadable file.

If you're working with small file sizes <1MB you won't notice this. But as I discovered in my own app, for bigger file sizes it is almost unbearable.

My app allow users to export images dynamically generated, these images are sent through POST requests in base64 format to the server (it is the only possible way), then processed and sent back to users in form of .png, .jpg files, base64 strings for images +1MB are huge, this force users to wait more than necessary for the file to start downloading. In slow Internet connections it can be really annoying.

My solution for this was to temporary write the file to the server, once it is ready, dynamically generate a link to the file in form of a button which changes between "Please wait..." and "Download" states and at the same time, print the base64 image in a preview popup window so users can "right-click" and save it. This makes all the waiting time more bearable for users, and also speed things up.

**Update Sep 30, 2014:**

> Months have passed since I posted this, finally I've found a better approach to speed things up when working with big base64 strings. I now store base64 strings into the database (using longtext or longblog fields), then I pass its record ID through the jQuery File Download, finally on the download script file I query the database using this ID to pull the base64 string and pass it through the download function.

**Download Script Example:**

```
<?php
// Record ID
$downloadID = (int)$_POST['id'];
// Query Data (this example uses CodeIgniter)
$data       = $CI->MyQueries->GetDownload( $downloadID );
// base64 tags are replaced by [removed], so we strip them out
$base64     = base64_decode( preg_replace('#\[removed\]#', '', $data[0]->image) );
// This example is for base64 images
$imgsize    = getimagesize( $base64 );
// Set content headers
header('Content-Disposition: attachment; filename="my-file.png"');
header('Content-type: '.$imgsize['mime']);
// Force download
echo $base64;
?> 
```

*I know this is way beyond what the OP asked, however I felt it would be good to update my answer with my findings. When I was searching for solutions to my problem, I read lots of **"Download from AJAX POST data"** threads which didn't give me the answer I was looking for, I hope this information helps someone looking to achieve something like this.*

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-03-11T12:17:07.887

I want to point out some difficulties that arise when using the technique in the accepted answer, i.e. using a form post:

1.  You can't set headers on the request. If your authentication schema involves headers, a Json-Web-Token passed in the Authorization header, you'll have to find other way to send it, for example as a query parameter.

2.  You can't really tell when the request has finished. Well, you can use a cookie that gets set on response, as done by [jquery.fileDownload](https://github.com/johnculviner/jquery.fileDownload), but it's FAR from perfect. It won't work for concurrent requests and it will break if a response never arrives.

3.  If the server responds with a error, the user will be redirected to the error page.

4.  You can only use the content types supported by a [form](https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4). Which means you can't use JSON.

I ended up using the method of saving the file on S3 and sending a pre-signed URL to get the file.

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2017-09-01T09:28:56.687

Here is my solution using a temporary hidden form.

```
//Create an hidden form
var form = $('<form>', {'method': 'POST', 'action': this.href}).hide();

//Add params
var params = { ...your params... };
$.each(params, function (k, v) {
    form.append($('<input>', {'type': 'hidden', 'name': k, 'value': v}));
});

//Make it part of the document and submit
$('body').append(form);
form.submit();

//Clean up
form.remove(); 
```

Note that I massively use JQuery but you can do the same with native JS.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-07-22T20:29:31.430

As others have stated, you can create and submit a form to download via a POST request. However, you don't have to do this manually.

One really simple library for doing exactly this is [jquery.redirect](https://github.com/mgalante/jquery.redirect). It provides an API similar to the standard `jQuery.post` method:

```
$.redirect(url, [values, [method, [target]]]) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-05-06T23:58:14.457

This is a 3 years old question but I had the same problem today. I looked your edited solution but I think that it can sacrifice the performance because it has to make a double request. So if anyone needs another solution that doesn't imply to call the service twice then this is the way I did it:

```
<form id="export-csv-form" method="POST" action="/the/path/to/file">
    <input type="hidden" name="anyValueToPassTheServer" value="">
</form> 
```

This form is just used to call the service and avoid to use a window.location(). After that you just simply have to make a form submit from jquery in order to call the service and get the file. It's pretty simple but this way you can make a download using a **POST**. I now that this could be easier if the service you're calling is a **GET**, but that's not my case.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-22T01:05:35.493

I used this [FileSaver.js](https://github.com/eligrey/FileSaver.js). In my case with csv files, i did this (in coffescript):

```
 $.ajax
    url: "url-to-server"
    data: "data-to-send"
    success: (csvData)->
      blob = new Blob([csvData], { type: 'text/csv' })
      saveAs(blob, "filename.csv") 
```

I think for most complicated case, the data must be processed properly. Under the hood FileSaver.js implement the same approach of the answer of [Jonathan Amend](https://stackoverflow.com/users/530630/jonathan-amend).

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-10-27T12:54:16.217

see: [http://www.henryalgus.com/reading-binary-files-using-jquery-ajax/](http://www.henryalgus.com/reading-binary-files-using-jquery-ajax/) it'll return a blob as a response, which can then be put into filesaver

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-04-13T08:24:50.997

To get [Jonathan Amends](https://stackoverflow.com/users/530630/jonathan-amend) [answer](https://stackoverflow.com/a/23797348/4472911) to work in Edge I made the following changes:

```
var blob = typeof File === 'function'
    ? new File([this.response], filename, { type: type })
    : new Blob([this.response], { type: type }); 
```

to this

```
var f = typeof File+"";
var blob = f === 'function' && Modernizr.fileapi
    ? new File([this.response], filename, { type: type })
    : new Blob([this.response], { type: type }); 
```

I would rather have posted this as a comment but I don't have enough reputation for that

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-03-13T09:38:35.673

Here is my solution, gathered from different sources: Server side implementation :

```
 String contentType = MediaType.APPLICATION_OCTET_STREAM_VALUE;
    // Set headers
    response.setHeader("content-disposition", "attachment; filename =" + fileName);
    response.setContentType(contentType);
    // Copy file to output stream
    ServletOutputStream servletOutputStream = response.getOutputStream();
    try (InputStream inputStream = new FileInputStream(file)) {
        IOUtils.copy(inputStream, servletOutputStream);
    } finally {
        servletOutputStream.flush();
        Utils.closeQuitely(servletOutputStream);
        fileToDownload = null;
    } 
```

Client side implementation (using jquery):

```
$.ajax({
type: 'POST',
contentType: 'application/json',
    url: <download file url>,
    data: JSON.stringify(postObject),
    error: function(XMLHttpRequest, textStatus, errorThrown) {
        alert(errorThrown);
    },
    success: function(message, textStatus, response) {
       var header = response.getResponseHeader('Content-Disposition');
       var fileName = header.split("=")[1];
       var blob = new Blob([message]);
       var link = document.createElement('a');
       link.href = window.URL.createObjectURL(blob);
       link.download = fileName;
       link.click();
    }
}); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-04-01T14:07:17.143

Below is my solution for downloading multiple files depending on some list which consists of some ids and looking up in database, files will be determined and ready for download - if those exist. I am calling C# MVC action for each file using Ajax.

And Yes, like others said, it is possible to do it in jQuery Ajax. I did it with Ajax success and I am always sending response 200.

So, this is the key:

```
 success: function (data, textStatus, xhr) { 
```

And this is my code:

```
var i = 0;
var max = 0;
function DownloadMultipleFiles() {
            if ($(".dataTables_scrollBody>tr.selected").length > 0) {
                var list = [];
                showPreloader();
                $(".dataTables_scrollBody>tr.selected").each(function (e) {
                    var element = $(this);
                    var orderid = element.data("orderid");
                    var iscustom = element.data("iscustom");
                    var orderlineid = element.data("orderlineid");
                    var folderPath = "";
                    var fileName = "";

                    list.push({ orderId: orderid, isCustomOrderLine: iscustom, orderLineId: orderlineid, folderPath: folderPath, fileName: fileName });
                });
                i = 0;
                max = list.length;
                DownloadFile(list);
            }
        } 
```

Then calling:

```
function DownloadFile(list) {
        $.ajax({
            url: '@Url.Action("OpenFile","OrderLines")',
            type: "post",
            data: list[i],
            xhrFields: {
                responseType: 'blob'
            },
            beforeSend: function (xhr) {
                xhr.setRequestHeader("RequestVerificationToken",
                    $('input:hidden[name="__RequestVerificationToken"]').val());

            },
            success: function (data, textStatus, xhr) {
                // check for a filename
                var filename = "";
                var disposition = xhr.getResponseHeader('Content-Disposition');
                if (disposition && disposition.indexOf('attachment') !== -1) {
                    var filenameRegex = /filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;
                    var matches = filenameRegex.exec(disposition);
                    if (matches != null && matches[1]) filename = matches[1].replace(/['"]/g, '');
                    var a = document.createElement('a');
                    var url = window.URL.createObjectURL(data);
                    a.href = url;
                    a.download = filename;
                    document.body.append(a);
                    a.click();
                    a.remove();
                    window.URL.revokeObjectURL(url);
                }
                else {
                    getErrorToastMessage("Production file for order line " + list[i].orderLineId + " does not exist");
                }
                i = i + 1;
                if (i < max) {
                    DownloadFile(list);
                }
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {

            },
            complete: function () {
                if(i===max)
                hidePreloader();
            }
        });
    } 
```

C# MVC:

```
 [HttpPost]
 [ValidateAntiForgeryToken]
public IActionResult OpenFile(OrderLineSimpleModel model)
        {
            byte[] file = null;

            try
            {
                if (model != null)
                {
                    //code for getting file from api - part is missing here as not important for this example
                    file = apiHandler.Get<byte[]>(downloadApiUrl, token);

                    var contentDispositionHeader = new System.Net.Mime.ContentDisposition
                    {
                        Inline = true,
                        FileName = fileName
                    };
                    //    Response.Headers.Add("Content-Disposition", contentDispositionHeader.ToString() + "; attachment");
                    Response.Headers.Add("Content-Type", "application/pdf");
                    Response.Headers.Add("Content-Disposition", "attachment; filename=" + fileName);
                    Response.Headers.Add("Content-Transfer-Encoding", "binary");
                    Response.Headers.Add("Content-Length", file.Length.ToString());

                }
            }
            catch (Exception ex)
            {
                this.logger.LogError(ex, "Error getting pdf", null);
                return Ok();
            }

            return File(file, System.Net.Mime.MediaTypeNames.Application.Pdf);
        } 
```

As long as you return response 200, success in Ajax can work with it, you can check if file actually exist or not as the line below in this case would be false and you can inform user about that:

```
 if (disposition && disposition.indexOf('attachment') !== -1) { 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-05-21T15:15:55.260

there is another solution to download a web page in ajax. But I am referring to a page that must first be processed and then downloaded.

First you need to separate the page processing from the results download.

1) Only the page calculations are made in the ajax call.

```
$.post("CalculusPage.php", { calculusFunction: true, ID: 29, data1: "a", data2: "b" },

       function(data, status) 
       {
            if (status == "success") 
            {
                /* 2) In the answer the page that uses the previous calculations is downloaded. For example, this can be a page that prints the results of a table calculated in the ajax call. */
                window.location.href = DownloadPage.php+"?ID="+29;
            }               
       }
);

// For example: in the CalculusPage.php

    if ( !empty($_POST["calculusFunction"]) ) 
    {
        $ID = $_POST["ID"];

        $query = "INSERT INTO ExamplePage (data1, data2) VALUES ('".$_POST["data1"]."', '".$_POST["data2"]."') WHERE id = ".$ID;
        ...
    }

// For example: in the DownloadPage.php

    $ID = $_GET["ID"];

    $sede = "SELECT * FROM ExamplePage WHERE id = ".$ID;
    ...

    $filename="Export_Data.xls";
    header("Content-Type: application/vnd.ms-excel");
    header("Content-Disposition: inline; filename=$filename");

    ...

```

I hope this solution can be useful for many, as it was for me.

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-08-31T16:09:28.543

If response is an **Array Buffer**, try this under onsuccess event in Ajax:

```
 if (event.data instanceof ArrayBuffer) {
          var binary = '';
          var bytes = new Uint8Array(event.data);
          for (var i = 0; i < bytes.byteLength; i++) {
              binary += String.fromCharCode(bytes[i])
          }
          $("#some_id").append("<li><img src=\"data:image/png;base64," + window.btoa(binary) + "\"/></span></li>");
          return;
      } 
```

*   where event.data is response received in success function of xhr event.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-06-04T17:56:58.903

I needed a similar solution to @alain-cruz's one, but in nuxt/vue with multiple downloads. I know browsers block multiple file downloads, and I also have API which returns a set of csv formatted data.I was going to use JSZip at first but I needed IE support so here is my solution. If anyone can help me improve this that would be great, but it's working for me so far.

API returns:

```
data : {
  body: {
    fileOne: ""col1", "col2", "datarow1.1", "datarow1.2"...so on",
    fileTwo: ""col1", "col2"..."
  }
} 
```

page.vue:

```
<template>
  <b-link @click.prevent="handleFileExport">Export<b-link>
</template>

export default = {
   data() {
     return {
       fileNames: ['fileOne', 'fileTwo'],
     }
   },
  computed: {
    ...mapState({
       fileOne: (state) => state.exportFile.fileOne,
       fileTwo: (state) => state.exportFile.fileTwo,
    }),
  },
  method: {
    handleExport() {
      //exportFileAction in store/exportFile needs to return promise
      this.$store.dispatch('exportFile/exportFileAction', paramsToSend)
        .then(async (response) => {
           const downloadPrep = this.fileNames.map(async (fileName) => {
           // using lodash to get computed data by the file name
           const currentData = await _.get(this, `${fileName}`);
           const currentFileName = fileName;
           return { currentData, currentFileName };
         });
         const response = await Promise.all(downloadPrep);
         return response;
       })
       .then(async (data) => {
         data.forEach(({ currentData, currentFileName }) => {
           this.forceFileDownload(currentData, currentFileName);
         });
       })
       .catch(console.error);
    },
    forceFileDownload(data, fileName) {
     const url = window.URL
         .createObjectURL(new Blob([data], { type: 'text/csv;charset=utf-8;' }));
     const link = document.createElement('a');
     link.href = url;
     link.setAttribute('download', `${fileName}.csv`);
     document.body.appendChild(link);
     link.click();
   },
} 
```

# c++ - boost ptree：添加更多具有相同名称和属性的节点

> ID：16086163
> 
> 赞同：4
> 
> 时间：2013-04-18T14:48:51.640
> 
> 标签：c++

我正在尝试编写一个具有更多节点和属性的xml，名称与此相同：

```
<ParameterSet>
    <ParameterSetType Name="AAAA">
    </ParameterSetType>
    <ParameterSetType Name="BBBB"> 
    </ParameterSetType>
    <ParameterSetType Name="CCCC">
    </ParameterSetType>
</ParameterSet> 
```

我尝试使用`pt.put()`仅获取最后一个元素

```
<ParameterSet>
    <ParameterSetType Name="CCCC">
    </ParameterSetType>
</ParameterSet> 
```

并`pt.add()`获得一个具有所有属性的节点

```
<ParameterSet>
    <ParameterSetType Name="AAAA" Name="BBBB" Name="CCCC">
    </ParameterSetType>
</ParameterSet> 
```

做我想做的事的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:24:24.223

根据属性树文档`pt.add()`绝对是正确使用的功能：

```
template<typename Type>    self_type & add(const path_type & path, const Type & value); 
```

> 如果路径标识的节点不存在，则创建它，包括其所有缺失的父节点。如果节点已存在，则添加具有相同键的兄弟节点。将新创建的节点的值设置为给定的参数，使用提供的翻译器进行翻译。

这次再次参考本教程中的文档，给出了以下将字符串从 std::list 添加到属性树的示例：

```
BOOST_FOREACH(const std::string &name, m_modules)
      pt.add("debug.modules.module", name); 
```

结果如下：

```
<debug>
   <modules>
        <module>Finance</module>
        <module>Admin</module>
        <module>HR</module>
    </modules>
</debug> 
```

# c# - 带有 MemoryStream 的 xml 末尾有很多意想不到的“nul”字符

> ID：16086165
> 
> 赞同：5
> 
> 时间：2013-04-18T14:48:54.703
> 
> 标签：c#, asp.net-mvc, linq-to-xml, memorystream, filecontentresult

我为用户编写了一个操作来下载生成的 xml，而不必将其写入服务器磁盘，但将其保存在内存中。

这是我的代码：

```
public FileContentResult MyAction()
{
  MemoryStream myStream = new MemoryStream();
  XDocument xml = GenerateXml(...);
  xml.Save(myStream );
  myStream .Position = 0;
  return File(myStream.GetBuffer(), "text/xml", "myFile.xml");
} 
```

一切似乎工作正常，XML 是正确的，我可以下载文件，但我不明白为什么我的文件末尾有 691920 个“nul”字符（这些字符的数量似乎与长度有关的xml）：

![在此处输入图像描述](https://i.stack.imgur.com/YsysT.png)

他们是从哪里来的？我怎样才能摆脱它们？

[更新] 我试过这个：

```
public FileContentResult MyAction()
{
  XDocument xml = GenerateXml(...);
  byte[] bytes = new byte[xml.ToString().Length * sizeof(char)];
  Buffer.BlockCopy(xml.ToString().ToCharArray(), 0, bytes, 0, bytes.Length);
  return File(bytes, "text/xml", "myFile.xml");
} 
```

而且我没有得到“nul”字符。所以我想是 MemoryStream 在文件末尾添加了额外的字符。因此，在我的示例中，第二个代码解决了我的问题。

但我也生成了一个我无法阅读的 Word 文档（xxx.docx 无法打开，因为内容有问题）。我想我在这里有同样的问题，内存流在文件末尾添加了额外的字符并损坏了它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T14:53:13.987

问题是您正在调用`myStream.GetBuffer()`. 该[`GetBuffer()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)方法返回由 使用的*底层*数组`MemoryStream`，包括任何不包含真实数据的“备用”部分。从文档中：

> 请注意，缓冲区包含可能未使用的已分配字节。例如，如果将字符串“test”写入 MemoryStream 对象，则从 GetBuffer 返回的缓冲区长度为 256，而不是 4，其中 252 个字节未使用。要仅获取缓冲区中的数据，请使用 ToArray 方法；但是，ToArray 会在内存中创建数据的副本。

而不是使用`GetBuffer()`，使用[`ToArray()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx)- 或使用流的长度来了解实际使用多少缓冲区。

请注意，在您更新的代码中，您基本上是将字符串转换为 UTF-16 - 这很可能意味着它的大小是所需大小的两倍，并且它也可能不遵循它声称的编码。我不会推荐这种方法。

# asp.net-mvc - 具有不同名称的字段上的外键

> ID：16086168
> 
> 赞同：0
> 
> 时间：2013-04-18T14:49:01.267
> 
> 标签：asp.net-mvc

我创建了一个名为 tbGeneralOptions 的表，其中包含对我的应用程序中问题的一些默认答案。选项为 Yes、No、N/A，其值分别为 1、2、3。

```
public class tbGeneralOption
{
    public int tbGeneralOptionID { get; set; }

    [Required(ErrorMessage = "Please enter an Option")]
    [Display(Name = "Option")]
    public string OptionName { get; set; }

    public virtual ICollection<tbFamilyMember> tbFamilyMember { get; set; }
    public virtual ICollection<tbFamily> tbFamily { get; set; }

} 
```

在我的 tbFamilyMember 表中，我将上述选项中的值存储在 Disability 和 PhotoPermission 字段中。

```
public class tbFamilyMember
{
    [Display(Name = "Family Member ID")]
    public int tbFamilyMemberID { get; set; }

    [Display(Name = "Family ID")]
    public int tbFamilyID { get; set; }

    [Required(ErrorMessage = "Please select a Role")]
    [Display(Name = "Role")]
    public int tbFamilyRoleID { get; set; }

    [Display(Name = "Firstname")]
    public string Firstname { get; set; }

    [Display(Name = "Surname")]
    public string Surname { get; set; }

    [Required(ErrorMessage = "Please select if the Family Member has a disability")]
    [Display(Name = "Disability")]
    public int Disability { get; set; }

    [Required(ErrorMessage = "Please select if the Family Member has given permission for photographs")]
    [Display(Name = "Photo Permission")]
    public int PhotoPermission { get; set; }

    public virtual tbFamily tbFamily { get; set; }
    public virtual tbFamilyRole tbFamilyRole { get; set; }
    public virtual tbGeneralOption tbGeneralOption { get; set; }
} 
```

我现在的问题是如何在我的视图中显示存储值的 OptionName。

我假设我可以通过外键建立链接，但如果字段名称不匹配，可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:59:05.627

根据您在下面的评论，您根本不需要`tbGeneralOption`，因为您的每种类型的选项是固定的和静态的 - 选项不是动态添加的。因此，您应该在具有选项的类型上创建选项作为布尔属性。此外，您可以删除这些选项的错误消息，因为根据定义，选项不是必需的。

我删除了属性`tbFamilyID`，`tbFamilyRoleID`因为您已经在底部引用了 family 和 familyRole 并且可以在此处访问 ID，以防您需要显示它们，而您可能不应该这样做。这是家庭成员的更新模型：

```
public class tbFamilyMember
{
    public int tbFamilyMemberID { get; set; }

    [Display(Name = "Firstname")]
    public string Firstname { get; set; }

    [Display(Name = "Surname")]
    public string Surname { get; set; }

    [Display(Name = "Disability")]
    public bool Disability { get; set; }

    [Display(Name = "Photo Permission")]
    public bool PhotoPermission { get; set; }

    public virtual tbFamily tbFamily { get; set; }
    public virtual tbFamilyRole tbFamilyRole { get; set; }
} 
```

# jquery - jQuery - 循环遍历具有特定属性的元素

> ID：16086174
> 
> 赞同：22
> 
> 时间：2013-04-18T14:49:16.657
> 
> 标签：jquery, custom-attributes, each

我知道如何遍历下面的输入，搜索具有特定“测试人员”类别的输入

我是这样做的：

```
<input type='text' name='firstname' class="testing" value='John'>
<input type='text' name='lastname' class="testing" value='Smith'>

<script type="text/javascript">
$(document).ready(function(){

 $.each($('.testing'), function() { 
   console.log($(this).val());
 });

});
</script> 
```

它按预期输出“John”、“Smith”。

我不想使用`class="testing"`并使用自定义属性：`testdata="John"`.

所以这就是我要做的：

```
<input type='text' name='firstname' testdata='John'>
<input type='text' name='lastname' testdata='Smith'> 
```

我的目标是使用 inside 自动填充每个输入的值`testdata`，但只有那些检测到具有该`testdata`属性的值。

`$.each`这是我使用循环失败的尝试：

```
$.each($('input').attr('testdata'), function() {
  var testdata = $(this).attr('testdata');
  $(this).val(testdata);    
}); 
```

我得到这个回复：`Uncaught TypeError: Cannot read property 'length' of undefined` 谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-18T14:55:29.923

这里它使用 HTML5`data-*`属性：

HTML：

```
<input type='text' name='firstname' data-test='John'>
<input type='text' name='lastname' data-test='Smith'> 
```

JS：

```
$("input[data-test]").each(function(){
    var testdata = $(this).data('test');
    $(this).val(testdata);
}); 
```

它在这里工作：http: [//jsfiddle.net/SFVYw/](http://jsfiddle.net/SFVYw/)

一个更短的方法是使用这个 JS：

```
$("input[data-test]").val(function(){
    return $(this).data('test');
}); 
```

在内部，它与其他 JS 代码相同，但更简洁一些。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-18T14:50:46.653

```
$("input[testdata]").each(function(){
  alert($(this).attr('testdata'));
 // do your stuff
}); 
```

[**工作演示**](http://jsfiddle.net/mohammadAdil/q7jcM/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-31T15:27:25.473

如果您想选择具有特定属性名称的输入并且您有这些 html 输入：

```
<input type='text' name='user1' fieldname="user" class="testing" value='John1'>
<input type='text' name='user2' fieldname="user" class="testing" value='Smith1'>
<input type='text' name='admin1' fieldname="admin" class="testing" value='John2'>
<input type='text' name='admin2' fieldname="admin" class="testing" value='Smith2'> 
```

您只能像这样循环管理员：

```
$("input[fieldname='admin']").each(function(){
    alert($(this).val());
}); 
```

同样，您可以只为用户循环：

```
$("input[fieldname='user']").each(function(){
    alert($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-14T12:08:55.333

为了遍历所有具有`testdata`属性的元素并为其属性分配表单字段，请尝试

```
$("[testdata]").each(function(){
    $(this).val($(this).attr('testdata'))
}) 
```

[适用于我猜的所有元素]

# java - Spring的组件扫描在外部jar中找不到类

> ID：16086177
> 
> 赞同：2
> 
> 时间：2013-04-18T14:49:22.197
> 
> 标签：java, spring

我是 Spring 的新手，我会将我的类接口“自动装配”到它在外部 jar 中的实现类。

这是一个罐子的代码：

```
@Component
public class MongoSpring implements IMongo {

     MongoSpring() throws UnknownHostException {
        System.out.println("mongo template builder");
    }

    @Required
    public void save()  {
        System.out.println("mongo template save");
    }
} 
```

类接口：

```
@Component
public interface IMongo {
    void save();
} 
```

我制作自动连线的课程

```
@Component
public class Core {
    @Autowired
    public IMongo db ;

    public void run () {

        log.info("core ");
        db.save();
    } 
```

主要班

```
public class MongoApp {

    private static ApplicationContext context;

    public static void main(String[] args) throws Exception {

         context = new ClassPathXmlApplicationContext("path.xml");

         Core c = (Core)context.getBean(Core.class);
         c.run();
      }
} 
```

豆文件：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

        <context:annotation-config />
        <context:component-scan base-package="org.spring.mongodb.example" />

    </bean>
</beans> 
```

当我运行它给我以下错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'core': Injection of autowired dependencies failed; 
nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: public org.spring.mongodb.example.IMongo org.spring.mongodb.example.Core.db; 
nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [org.spring.mongodb.example.IMongo] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. 
Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

[...]

我能做些什么？我正在使用带有 STS 的 spring 3.2.0

* * *

我已经从界面和@Require 中删除了@Component，但没有改变。Jar 文件在类路径中，并且包是正确的。谢谢

# c# - 什么可能导致 System.TypeLoadException？

> ID：16086178
> 
> 赞同：31
> 
> 时间：2013-04-18T14:49:22.680
> 
> 标签：c#, visual-studio, ssh, windows-ce, smart-device

我正在使用 C# 使用 VS2008 开发 Honeywell Dolphin 6100 的应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

我想添加一个可以将文件从本地设备发送到远程服务器的功能。我找到了可以保证这一点的库“ [Tamir.SharpSSH ”。](http://www.tamirgal.com/blog/page/SharpSSH.aspx)我在控制台应用程序和普通 Windows 窗体应用程序上测试了代码，它运行良好。但是当我尝试在 winCE 设备上使用相同的代码时，我得到一个 TypeLoadException 并且我有错误消息：

```
无法从程序集“Tamir.SharpSSH”加载类型“Tamir.SharpSsh.SshTransferProtocolBase”，   
版本=1.1.1.13，文化=中性，PublicKeyToken=null'。

```

我使用的代码如下：

```
SshTransferProtocolBase sshCp = new Scp(Tools.GlobalVarMeth.hostName, Tools.GlobalVarMeth.serverUserName);
sshCp.Password = Tools.GlobalVarMeth.serverUserpassword;
sshCp.Connect();

string localFile = Tools.GlobalVarMeth.applicationPath + "/" + fileName + ".csv";
string remoteFile = Tools.GlobalVarMeth.serverRemoteFilePath + "/" + fileName + ".csv";

sshCp.Put(localFile, remoteFile);

sshCp.Close(); 
```

有人对此有任何想法吗？我将不胜感激！！！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-18T14:59:40.660

它可以是任何数量的东西。可能的原因是：

*   找不到该程序集
*   找不到您的程序集所依赖的程序集
*   找到程序集，但类型不在其中
*   类型的静态构造函数抛出异常

最好的办法是使用 Fusion 日志查看器来帮助诊断它。文档在这里：

[http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx)

（仅供参考，“Fusion”是设计程序集加载系统的团队的代号；不幸的是，代号最终出现在交付产品的文件名中。这个东西应该被称为“AssemblyBindingLogViewer.exe”或一些这样的事情。）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-08-25T13:19:00.713

Eric Lippert 的回答完美地描述了这种情况。

我只想添加一个关于此异常的帮助页面通常不涵盖的案例的快速答案。

我为一些开源的东西（Akka.Net，命名它）创建了一个快速而肮脏的测试项目，我将项目本身命名为“Akka”。

它完美地构建，但在启动时它会抛出关于 Akka.dll 中的类的类型加载异常。

这只是因为我的可执行文件 (akka.exe) 和引用 (akka.dll) 具有相同的名称。我花了几分钟才弄清楚这一点（我从复制本地、目标平台、确切版本等开始）。

这是您首先想到的非常愚蠢但并非强制的第一件事（特别是因为我将 nuget 用于依赖项），所以我认为分享它可能会很有趣：如果您的 EXE 和依赖项具有相同的名称，您将遇到 TypeLoadException。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-22T07:38:28.597

这几乎把我逼疯了……

我不知道我是如何管理这个的，但由于某种原因，我在 GAC 中有一个旧版本的 DLL。尝试在那里寻找旧组件并将其删除。

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T14:51:58.597

这可能是由许多事情引起的，MSDN 说：

> 当公共语言运行时找不到程序集、程序集中的类型或无法加载类型时，将引发 TypeLoadException。

所以很明显找不到类型，要么缺少程序集，要么缺少类型，要么运行时配置之间存在冲突。

有时可能会出现问题，因为您引用的程序集与您使用的程序集是不同的平台类型（32 位/64 位等）。

我建议捕获异常并更详细地检查它以确定它遇到的问题。

* * *

**根据我之前的信息**

有时我看到这个问题的出现是因为（出于某种原因）引用的程序集实际上无法解析，即使它已被引用和加载。

当涉及 AppDomain 边界时，我通常会看到这一点。

我发现有时可以解决问题的一种方法（但仅当程序集已经在 AppDomain 中时）是此代码段：

```
AppDomain.CurrentDomain.AssemblyResolve += (s, e) =>
{
   return AppDomain.CurrentDomain.GetAssemblies()
      .SingleOrDefault(asm => asm.FullName == e.Name);
} 
```

就像我说的，当 AppDomains 参与时我看到了这个问题，当程序集确实已经被引用和加载时，这似乎解决了这个问题。我不知道为什么框架无法解决引用本身。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-30T12:15:01.263

您可以通过启用注册表中的某些设置从 .NET Compact Framework 中获取加载程序日志文件。[.NET Compact Framework](http://www.microsoft.com/en-us/download/details.aspx?id=13442)的Power Toys包含一个名为 NETCFLogging 的工具，它可以为您设置注册表值。

此处记录了注册表值：

[http://msdn.microsoft.com/en-us/library/ms229650(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/ms229650(v=VS.90).aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-01T04:51:49.580

就我而言，问题原来是命名空间冲突。我在解决方案中有多个启动项目，它们的 Main() 在类 Program 中，我发现我在同一个命名空间中定义了多个 Program 类，尽管在不同的程序集中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-27T13:41:06.600

确保名称（命名空间、类名等）是它们应有的名称。当我不得不重新开始我的项目并且我从模板中复制了我的类的内容并且未能将类名从“模板类”更改为正确的名称时出现此错误（它应该与项目名称匹配） .

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-22T12:37:54.440

typeName 字符串参数必须是完全限定的类型名称

例如：Activator.CreateInstance("assemblyFullName","namespace.typename")

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-16T12:18:21.860

就我而言，问题是我有两个项目在一个解决方案中使用相同的库。我只在第一个项目中更新了 DLL。因此，当我构建解决方案时，第二个项目将覆盖第一个项目的 DLL（项目构建顺序）。

> 例子：
> 
> 解决方案：
> 
> --主要项目
> 
> ------MyDll v5.3.2.0
> 
> - 原型
> 
> ------MyDll v5.0.0.0

在第二个项目中更新 DLL 后问题消失了。

# algorithm - N+1皇后算法

> ID：16086180
> 
> 赞同：1
> 
> 时间：2013-04-18T14:49:27.430
> 
> 标签：algorithm, enumeration, backtracking, brute-force, n-queens

我希望提高算法的速度，以计​​算 N+1 皇后问题的解决方案数量（将`N+1`皇后放在`NxN`棋盘上，有 1 个棋子）。我基本上使用蛮力与回溯相结合，我首先将棋子放在棋盘上的随机位置（没有没有边缘的正方形的边缘和角落），然后我才开始使用回溯放置皇后。这种方法很容易，但也很慢。什么算法会更快？

我正在考虑首先在棋子的每一侧放置一个棋子和 4 个皇后，但我不确定这会提高计算速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:55:59.190

当您要计算问题的**所有**解决方案时，将棋子首先放在随机位置是行不通的。您必须将棋子放在**每个位置**。我相信这里最好的算法是回溯，但你仍然可以做一些优化。在 n-queen 问题中，一个重要的一点是利用解的对称性，所以我想你也可以在这里做到这一点。有一个解决方案，它的所有 4 个旋转和它们的镜像也是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:54:13.280

您自己的建议听起来是正确的，因为它从任何解决方案都需要满足的基本约束开始，而不是事后验证每个候选解决方案。

对于穷举搜索问题，最大的加速通常出现在您实施**提前退出**规则时：一旦一个皇后攻击另一个皇后，您就不再放置任何皇后，并为最后一个皇后进入一个新的方格。与仅在所有棋子都放在棋盘上时才检查相互攻击的详尽搜索相比，这将大大减少搜索空间。

棋盘上的棋子位置`NxN`可以减少到内部`(N-2)x(N-2)`子板上，您可以使用 8 倍旋转/镜像对称将其进一步减少到该内部正方形的八分圆之一。

# selenium-webdriver - 接缝对话上下文基础

> ID：16086181
> 
> 赞同：1
> 
> 时间：2013-04-18T14:49:30.660
> 
> 标签：selenium-webdriver, seam2, jboss-arquillian

我是 Seam 的新手，我也在尝试与 Arquillian 一起前进。

在我们的 Selenium (WebDriver) 测试的设置中，我尝试使用使用实体管理器的构建器类，因此 UI 测试的范围仅针对其目的。

但是，我最终收到一个错误，因为对话上下文不存在。我知道解决这个问题的方法很复杂，但我想快速跟上进度，足以让这一切顺利进行。我有一些关于这个主题的参考资料，稍后我将用它们来填补空白。

我意识到这是模糊的。为了获得一些有用的反馈，我还需要提供哪些其他信息？

***编辑：***

我正在将此作为解决方案：[https](https://docs.jboss.org/author/display/ARQ/Seam+2) ://docs.jboss.org/author/display/ARQ/Seam+2 ，但我的堆栈中出现以下问题的根本原因：

```
Caused by: java.lang.IllegalArgumentException: WEB-INF/web.xml not found in classloader sun.misc.Launcher$AppClassLoader@3182f0db
    at org.jboss.shrinkwrap.api.asset.ClassLoaderAsset.<init>(ClassLoaderAsset.java:70)
    at org.jboss.shrinkwrap.api.asset.ClassLoaderAsset.<init>(ClassLoaderAsset.java:45)
    at org.jboss.shrinkwrap.impl.base.container.WebContainerBase.setWebXML(WebContainerBase.java:94)
    ... 55 more 
```

唯一的 web.xml 位置在 qa 之外的另一个项目中，但在 pom.xml 中被引用为依赖项。

重申一下，当我尝试在我的设置中使用构建器组件进行 Selenium (WebDriver) UI 测试时，我正在尝试解决不存在的 Seam 对话上下文。我想学习如何将所有这些东西放在一起，因为我现在还不熟悉这个技术堆栈。

# android - 如何正确地将 EditText（在第二个活动中创建 TextView 的第一个活动中）作为 TextView 传递给第三个活动？

> ID：16086182
> 
> 赞同：0
> 
> 时间：2013-04-18T14:49:31.713
> 
> 标签：android, android-activity, textview, android-edittext

我有一个登录按钮，按下该按钮会将用户发送到另一个活动，并将在 TextView 中发布用户名。那部分工作正常。问题是当我尝试将第二个活动 TextView 中的用户名传递给第三个活动 TextView 时，它没有显示出来。android:hint 显示为文本，所以我知道 xml 很好。我已经尝试了在这个网站上可以找到的每一种“putExtra”意图。我想我只是错过了一些东西..帮助。我对 android 完全陌生，所以请嘲笑新手 :)

活动二

```
 public class DashboardActivity extends Activity {
UserFunctions userFunctions;
Button btnLogout;
Button scanButton;
Button userinfo;
Button help;
Button receipt;
TextView showmsg;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /**
     * Dashboard Screen for the application
     * */        
    // Check login status in database
    userFunctions = new UserFunctions();
    if(userFunctions.isUserLoggedIn(getApplicationContext())){
        setContentView(R.layout.dashboard);

        scanButton = (Button) findViewById(R.id.scanButton);
        btnLogout = (Button) findViewById(R.id.btnLogout);
        userinfo =  (Button) findViewById(R.id.userinfo);
        help =  (Button) findViewById(R.id.help);
        receipt = (Button)findViewById(R.id.receipt);
        showmsg = (TextView)findViewById(R.id.showmsg);

        Intent in = getIntent();
        if (in.getCharSequenceExtra("usr") != null) {
            final TextView setmsg = (TextView)findViewById(R.id.showmsg);
            setmsg.setText("User: "+in.getCharSequenceExtra("usr"));                
        }

        btnLogout.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                userFunctions.logoutUser(getApplicationContext());
                Intent login = new Intent(getApplicationContext(), LoginActivity.class);
                login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(login);
                // Closing dashboard screen
                finish();
            }
        });

        // Link to CC
        scanButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        MyScanActivity.class);
                startActivity(i);
                finish();
            }
        });

        // Create a customer receipt
        receipt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent intent = new Intent(DashboardActivity.this, ReceiptActivity.class));
                intent.putExtra("TextView",showmsg);
                startActivity(intent);
                finish();
            }
        });

        // Link to User info
        userinfo.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        UserInfoActivity.class);
                startActivity(i);
                finish();
            }
        });

        // Link to Help info
        help.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        HelpActivity.class);
                startActivity(i);
                finish();
            }
        });

    }else{
        // user is not logged in show login screen
        Intent login = new Intent(getApplicationContext(), LoginActivity.class);
        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(login);
        // Closing dashboard screen
        finish();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:12:08.580

@Smulian朱利安：

有一个错误。您正在传递组件**TextView**传递给下一个意图，而您应该只传递它的文本。

您目前正在这样做：

```
intent.putExtra("TextView",showmsg); 
```

但你应该这样做

```
Bundle extras = myIntent.getExtras();
 extras .putString("TextView",showmsg.getText().toString()); 
```

在第三个活动中你应该得到这个值：

```
bundle = getIntent().getExtras();
bundle.getString("TextView"); 
```

然后将此值设置到您的文本视图中。

```
TextView yourTV = ((TextView) findViewById(R.id.your_textview_id));
yourTV.setText(bundle.getString("TextView")); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:01:35.777

登录后，尝试将用户名保存在其中`SharedPreferences`，然后您可以随时随地获取它的价值：

保存用户名：

```
SharedPreferences prefs = getSharedPreferences("prefs", Context.MODE_PRIVATE);
prefs.edit().putString("username", username).commit(); 
```

从 yourActivity 检索用户名的值：

```
SharedPreferences prefs = getSharedPreferences("prefs", Context.MODE_PRIVATE);
String username = prefs.getString("username");
yourTextView.setText(username); 
```

# regex - 在 R 中使用正则表达式来解析字符串

> ID：16086184
> 
> 赞同：1
> 
> 时间：2013-04-18T14:49:38.037
> 
> 标签：regex, r

我有一个这样的字符串：

```
vmstat_webserver01.20130102 
```

我需要使用正则表达式来选择“_”和“。”之间的值。

我试过这个：

```
grep("(_.*)+.", name, value=TRUE) 
```

没有工作任何指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:52:18.440

你可以这样做`gsub()`：

```
name <- 'vmstat_webserver01.20130102'
gsub('.*_(.*)\\..*', '\\1', name) 
```

# java - Spring，加载具有特定依赖关系的bean

> ID：16086186
> 
> 赞同：1
> 
> 时间：2013-04-18T14:49:44.963
> 
> 标签：java, spring

是否可以加载一个 bean（范围“原型”）告诉 Spring 使用特定的依赖项创建它？

例子：

*   依赖关系，“StoreA”和“StoreB”
*   我要加载的bean，“服务”

我可以告诉 Spring 有时用“StoreA”加载“Service”，有时用“StoreB”加载吗？

实际上，我发现的唯一解决方案是加载两个不同的应用程序上下文，每个应用程序上下文具有一组通用`<include .../>`指令和一个我已声明存储的特定指令（因此每个应用程序上下文都有一个存储声明）。我可以使用单个应用程序上下文做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:56:26.010

在这种情况下，我最常使用[FactoryBean](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/beans/factory/FactoryBean.html)。getObject() 方法可以定义您希望如何决定加载哪个存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:52:47.917

您可以使用它们的 id 来引用特定的 bean，因此在自动装配时使用

```
 @Qualifer("someBeanId") 
```

或在弹簧上下文中使用'ref'/'ref-local'

# c# - C# - 以编程方式在浏览器中打开弹出窗口

> ID：16086187
> 
> 赞同：0
> 
> 时间：2013-04-18T14:49:47.080
> 
> 标签：c#, tabs, popup, window

我有以下代码：

```
if (function.Equals("PopUp"))
            {
                Request req = new Request();
                string result = req.doRequest("function=" + function + "&num=" + trans_number, "http://localhost:4000/Handler.ashx");

                if (result.Equals("True") || result.Equals("true"))
                {
                    Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Transaction_Number.aspx', '_newtab')", true);
                }

                Session["result"] = result;
                Response.Redirect("Results.aspx");
            } 
```

此代码向服务器发出请求，如果结果为真，它应该创建一个新选项卡并将当前窗口重定向到 Results.aspx。

如果结果为假，它应该只重定向到 Results.aspx。

这段代码的主要问题是永远不会创建新选项卡，即使结果为真。但是，如果我注释掉除新选项卡代码之外的所有代码，则会创建新选项卡。

为什么会这样？我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:59:22.753

问题似乎是您在脚本可以执行之前进行了重定向。我也会尝试在脚本中进行重定向，所以像这样；

```
if (function.Equals("PopUp"))
{
    Request req = new Request();
    string result = req.doRequest("function=" + function + "&num=" + trans_number, "http://localhost:4000/Handler.ashx");

    if (result.Equals("True") || result.Equals("true"))
    {
        Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Transaction_Number.aspx', '_newtab')", true);
    }

    Session["result"] = result;

    Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.location.href = 'http://localhost:4000/Redirect.aspx.aspx'", true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:56:49.287

结果与您正在测试的结果不匹配肯定会出现问题。

`String.Equals()`可能并不总是与给定的字符串匹配，因为有时如果字符串已被实习，则引用可能不匹配。

我建议切换到 using`String.Compare()`或更好，但仅使用相等运算符：`==`

所以：

```
if (result == "True" || result == "true")
{
    Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Transaction_Number.aspx', '_newtab')", true);
} 
```

或者更好：

```
if (Convert.ToBoolean(result))
{
    Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Transaction_Number.aspx', '_newtab')", true);
} 
```

MSDN 有一些关于如何有效比较字符串的具体指南：

[http://msdn.microsoft.com/en-gb/library/vstudio/cc165449.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/cc165449.aspx)

# regex - 使用 AliasMatch 缩短 URL

> ID：16086190
> 
> 赞同：0
> 
> 时间：2013-04-18T14:49:54.163
> 
> 标签：regex, apache, mod-alias

我能够使以下配置起作用：-

```
Alias /webdoc /data/apps/jenkins/jobs

<Directory /data/apps/jenkins/jobs/[a-zA-Z0-9\-]+/workspace/target/docco>
  Order allow,deny
  Allow from all
</Directory> 
```

使用此配置，我可以使以下 URL 工作

```
http://myserver/webdoc/HCMS-JS/workspace/target/docco/horizontal/index.html 
```

但是，我想将 URL 缩短为如下所示：-

```
http://myserver/webdoc/HCMS-JS/horizontal/index.html 
```

我尝试了以下配置，但在尝试点击上述链接时我不断收到 404：-

```
AliasMatch ^/webdoc/([a-zA-Z0-9\-]+)/(.*) /data/apps/jenkins/jobs/$1/workspace/target/docco$2

<Directory /data/apps/jenkins/jobs/[a-zA-Z0-9\-]+/workspace/target/docco>
  Order allow,deny
  Allow from all
</Directory> 
```

我怎样才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:01:57.483

您的 AliasMatch 缺少斜线：

```
AliasMatch ^/webdoc/([a-zA-Z0-9\-]+)/(.*) 
```

这里的第一场比赛将是`HCMS-JS`。第二个将是`horizontal/index.html`。这意味着结果将是

```
/data/apps/jenkins/jobs/HCMS-JS/workspace/target/doccohorizontal/index.html 
```

因此，您需要将行更改为

```
AliasMatch ^/webdoc/([a-zA-Z0-9\-]+)/(.*) /data/apps/jenkins/jobs/$1/workspace/target/docco/$2 
```

插入您未捕获的斜线。

寻找这类问题的一个好地方是 apache 错误日志。它应该告诉您它找不到的文件是什么。

# php - PHP 函数未在命令行中定义

> ID：16086193
> 
> 赞同：1
> 
> 时间：2013-04-18T14:50:05.403
> 
> 标签：php

某些函数在被 Web 浏览器调用时被定义，但在命令行模式下变得未定义，这似乎很奇怪。

例如，

```
<?php
echo function_exists('mb_detect_encoding') ? 'yes' : 'no';
?> 
```

当它在浏览器中运行时，它会打印“yes”，这意味着该函数已经定义。

但是当我在命令行中运行这段代码时，它会打印“否”

为什么？我在命令行模式下错过了哪些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:52:01.677

在 linux 上，您应该检查 /etc/php5/cli/conf.d 是否已启用。否则尝试从另一个环境复制，例如 /etc/php5/apache2/conf.d

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:00:36.617

该命令`php -m`列出您的活动模块（*扩展*）。

要查看它是否处于活动状态，请`mbstring`在此列表中搜索。如果它不存在，它可能是：

*   仅在 apache_handler php.ini 中启用

或者

*   在 cli php.ini 中禁用

将一个添加`extension=mbstring.so`到您的全局 php.ini 以启用它。（如果它被构建为共享库。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:53:04.710

这是因为您的发行版选择了编译时选项。似乎他们已经在 cli 解释器中启用了它，但没有在 apache 模块中启用它。

检查 mbstring 扩展的[安装说明](http://php.net/manual/en/mbstring.installation.php)。如果你真的需要它，你必须自己编译 php。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:53:28.773

通过命令行 (CLI) 调用脚本时，请确保使用与 Web 服务器在执行 PHP 时使用的相同的配置文件。

来自“php --help”：

> -c | 在此目录中查找 php.ini 文件

如今，模块 mb_string 就是其中之一，是动态加载的......

# c# - 使用 QueryBuilder 的父子过滤器

> ID：16086197
> 
> 赞同：0
> 
> 时间：2013-04-18T14:50:15.467
> 
> 标签：c#, entity-framework, filtering, parent-child, objectquery

假设我有 3 个表：表 Employee、EmploymentHistory 和 Languages。一名员工可以有多种语言和工作经历。

员工

```
ID  Name    Email
1   AAA aaa@gmail.com
2   BBB bbb@gmail.com
3   CCC ccc@gmail.com 
```

工作经历

```
ID  EmployeeID   Company         Position
1   1            Devon Energy    aaa
2   2            Emric           bbb
3   3            Capcom          ccc 
```

语

```
ID  EmployeeID  Language    Level
1   1           English     Expert
2   2           Dutch       Expert
3   3           Franch      Expert 
```

如何使用 ObjectQuery QueryBuilder 应用过滤器？示例：我想过滤 devon 公司的员工。它应该是员工“AAA”。

```
var emp = Translate(context.Employees.Include("EmploymentHistories"));

public ObjectQuery<T> Translate<T>(ObjectQuery<T> objectQuery)
{
      objectQuery.Where("it.EmploymentHistories.Company = 'Devon Energy'"); // EmploymentHistories.Company is not found. How can I filter through it included property
} 
```

注意：我使用 QueryBuilder 进行高级过滤。

此致，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:51:39.583

经过 1 天的极度痛苦，我终于找到了解决方案。我使用了microsoft [Dynamic LINQ](http://www.scottgu.com/blogposts/dynquery/dynamiclinqcsharp.zip)提供的动态linq来解决这个问题

# java - java中的Euler Project 5，为什么会有不同的结果？

> ID：16086200
> 
> 赞同：2
> 
> 时间：2013-04-18T14:50:23.680
> 
> 标签：java, algorithm

```
/* Smallest multiple */
/*
 * 2520 is the smallest number that can be divided by each
 *  of the numbers from 1 to 10 without any remainder.What 
 *  is the smallest positive number that is evenly divisible 
 *  by all of the numbers from 1 to 20?
 */
public class SmallestMultiple {
    public static int gcd(int m, int n){
        if(n>m){
            int temp = m;
            m = n;
            n = temp;
        }
        int gcdNum = m;
        while(m != 0){
            m = gcdNum%n;
            gcdNum = n;
            n = m;
        }
        return gcdNum;
    }
    private static int lcm(int m, int n){
        return m*n/gcd(m,n);
    }
    static int multiple(int start, int end){
        if(start > end){
            int temp = end;
            end = start;
            start = temp;
        }
        else if(start == end)
            return start;
        else
            return lcm(end, multiple(start, end-1));
        return multiple(start, end);
    }
    public static void main(String[] args) {
        System.out.println(multiple(11,19)); // line a--Which is equal to multiple(1,19) 
        System.out.println(multiple(11,20)); // line b--Which is equal to multiple(1,20)
    }
} 
```

我认为multiple(1,19) 和multiple(1,20) 的答案会得到相同的结果。但是使用我的代码，它们是不同的，**multiple(1,19)=232792560**（正确答案）和**multiple(1,20)=18044195**这是错误答案！！！我知道有很多更简单的算法，但我只想知道我的问题在哪里......谁能告诉我问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:02:46.003

计算时`int`溢出

```
Prelude> 232792560 * 20
4655851200
Prelude> it `quotRem` (2^32)
(1,360883904) 
```

从而获得`360883904 / 20 = 18044195`.

你可以

*   使用`long`或
*   计算`m * (n/gcd(n,m))`

避免溢出（第二种方法不会让你走得更远，如果上限是 23，`int`太小而无法容纳结果）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:04:45.037

您的问题几乎只是整数溢出。

Java 中最大的`int`数字是`Integer.MAX_VALUE = 2147483647`.

在某些时候，您尝试运行`lcm( 20, 232792560 )`. 后者是 的结果`multiplay(1,19)`。

在您的函数内部，您尝试计算`m*n/gcd(m,n)`.

随着`m == 20`,`n == 18044195`和`gcd(m,n) == 20`, 这得到`20 * 18044195 / 20`.

第一个产品实际上是`20 * 18044195 == 4655851200`，它大于`Integer.MAX_VALUE`，因此会发生溢出并且您的总结果运行不佳。

一种解决方案是在任何地方切换到一种`long`类型，其最大值为`Long.MAX_VALUE == 9223372036854775807`.

# jquery - jQuery改变HTML元素的样式

> ID：16086201
> 
> 赞同：118
> 
> 时间：2013-04-18T14:50:25.310
> 
> 标签：jquery, html, css

我有一个 HTML 列表

```
<div id="header" class="row">
    <div id="logo" class="col_12">And the winner is<span>n't...</span></div> 
    <div id="navigation" class="row"> 
        <ul id="pirra">
            <li><a href="#">Why?</a></li>
            <li><a href="#">Synopsis</a></li>
            <li><a href="#">Stills/Photos</a></li>
            <li><a href="#">Videos/clips</a></li>
            <li><a href="#">Quotes</a></li>
            <li><a href="#">Quiz</a></li>
        </ul>
    </div> 
```

它可以很好地在 CSS 更改时水平显示

```
div#navigation ul li { 
    display: inline-block;
} 
```

但现在我想用 jQuery 来做，我使用：

```
$(document).ready(function() {
    console.log('hello');
    $('#navigation ul li').css('display': 'inline-block');
}); 
```

但不起作用，我用 jQuery 设置元素样式有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2013-04-18T14:51:13.200

用这个：

```
$('#navigation ul li').css('display', 'inline-block'); 
```

另外，正如其他人所说，如果您想一次进行多个 css 更改，那么您将添加花括号（用于对象表示法），它看起来像这样（如果您想更改，例如，“背景-color' 和 'position' 除了 'display'）：

```
$('#navigation ul li').css({'display': 'inline-block', 'background-color': '#fff', 'position': 'relative'}); //The specific CSS changes after the first one, are, of course, just examples. 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-18T14:51:27.953

```
$('#navigation ul li').css('display', 'inline-block'); 
```

不是冒号，是逗号

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-18T14:52:22.030

```
$('#navigation ul li').css({'display' : 'inline-block'}); 
```

那里似乎是一个错字...语法错误:))

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-02T08:43:51.900

您还可以像这样指定多个样式值

```
$('#navigation ul li').css({'display': 'inline-block','background-color': '#ff0000', 'color': '#ffffff'}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-01T10:00:41.797

我认为您也可以使用此代码：并且您可以更好地管理您的类 css

```
<style>
   .navigationClass{
        display: inline-block;
        padding: 0px 0px 0px 6px;
        background-color: whitesmoke;
        border-radius: 2px;
    }
</style>
<div id="header" class="row">
    <div id="logo" class="col_12">And the winner is<span>n't...</span></div> 
    <div id="navigation" class="row"> 
        <ul id="pirra">
            <li><a href="#">Why?</a></li>
            <li><a href="#">Synopsis</a></li>
            <li><a href="#">Stills/Photos</a></li>
            <li><a href="#">Videos/clips</a></li>
            <li><a href="#">Quotes</a></li>
            <li><a href="#">Quiz</a></li>
        </ul>
    </div>
 <script>
    $(document).ready(function() {
$('#navigation ul li').addClass('navigationClass'); //add class navigationClass to the #navigation .

});
 </script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-05T10:53:33.490

用jquery改变风格

**尝试这个**

```
$('#selector_id').css('display','none'); 
```

您还可以在单​​个查询中更改多个属性

尝试这个

```
$('#replace-div').css({'padding-top': '5px' , 'margin' : '10px'}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-28T13:23:15.863

`<div>`获取 a中具有特定**id**的第二个元素并更改样式：

```
var post_id = 7;
var heart = $('#' + post_id).children().eq(1);
heart.css('color','red'); 
```

**注意：**这似乎很明显，但它困扰着我，也可能发生在你身上。确保您要修改的样式*是 div 本身的*，而不是*该 div 内的样式*。因此，例如，您可能有类似的东西：

```
<div class="loves_it"><i class="fas fa-heart" style="color:gray"></i></div> 
```

并且显然`css()`Jquery 的方法不起作用。所以请确保它如下所示：

```
<div class="loves_it" style="color:gray"><i class="fas fa-heart"></i></div> 
```

# io - 如何使用see读取文件并将内容放入Prolog中的列表中？

> ID：16086203
> 
> 赞同：2
> 
> 时间：2013-04-18T14:50:26.463
> 
> 标签：io, prolog

我正在使用 SWI Prolog 研究 Prolog，我发现关于如何从文件中读取文本数据并使用**see**内置谓词将其打印在屏幕上的许多困难。

我有这个程序，它使用读取模式中的**打开**谓词和与该文件关联的**流来读取文件的内容**

```
readFile(InputFile, TextList):- open(InputFile, read, Stream),
                                readCharacter(Stream, TextList),
                                close(Stream),
                                !.

readCharacter(Stream,[]):- at_end_of_stream(Stream).    %condizione di uscita

readCharacter(Stream,[Char|Rest]):-
                                 get0(Stream,Char),
                                 readCharacter(Stream,Rest). 
```

这很简单，但我问我是否可以使用**see谓词来实现相同的行为，以将输入流****从**用户（控制台）更改为另一个文件，然后使用内置的 see 关闭此流（返回给用户）谓词：

我在想这样的事情：

```
readFileSee(InputFile, TextList) :- see(InputFile),
                                    read_from_file(TextList),
                                    seen. %or maybe: see(user). 
```

但是现在，与前面的工作示例不同，我没有调用**get0谓词的****Stream**变量，所以我不知道怎么回事。

 **有人可以帮我解决这个问题，读取 InputFile 的内容并将此内容放入 TextList 列表中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:51:20.400

Edinburgh I/O 很方便，但有点小故障，因为它的工作原理是搞乱全局状态。这个想法是使用不带流参数的读写谓词。你假装你正在从标准输入读取或写入标准输出。然后，在调用以这种方式工作的代码之前，将全局输入或输出流更改为要读取或写入的文件。

因此，假设您要读取三个原子字符。你可能会写：

```
read_three([A,B,C]) :- get_char(A), get_char(B), get_char(C). 
```

这适用于标准输入：

```
?- read_three(X).
|: abc

X = [a, b, c]. 
```

为了让它与文件一起工作，你用一个 包装它`seeing(OldStream), see(filename), ..., seen, see(OldStream)`，你的代码在该`...`部分中。例如，我们可以这样做：

```
read_three(Filename, Three) :- 
    % the wrapper to switch files
    seeing(OldStream), see(Filename), 

    % your code
    read_three(Three), 

    % the wrapper to switch back
    seen, see(OldStream). 
```

使用它，你需要有一个文件名来读取，但它可能看起来像这样：

```
?- read_three('clone.sh', X).
X = [#, !, /]. 
```

这里的关键是你没有传递一个显式的流实例，你只是依赖于隐式使用标准输入或输出的谓词来完成他们的工作。换句话说，如果您的谓词`Stream`使用 Edinburgh I/O，则它们都不应该有参数，您也不应该使用`open/3`.

编写的包装器是类似的：`telling(OldStream), tell(Filename), ..., told, tell(OldStream).`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:56:19.740

考虑`library(pio)`改用：用 DCG 描述文件内容，然后将`phrase_from_file/2`其应用于文件。**

# php - 当另一个用户以相同的形式从另一个下拉列表中进行选择时更改下拉列表值

> ID：16086205
> 
> 赞同：0
> 
> 时间：2013-04-18T14:50:28.920
> 
> 标签：php, javascript

我的问题是：如何根据用户从另一个下拉列表中选择的内容更改一个列表中的选项值。我的问题是这两个列表都必须填充查询。

```
<label for="category"></label>
          <select name="category" id="category">
          <option value="0" >Choose Category</option>

<?php foreach(Categories::find_all() as $id) :?>
        <?php echo "<option value=".$id->id .">". $id->cat_name."</option>"; ?>
        <?php endforeach?> 
```

```
<label for="sub_category"></label>
          <select name="sub_category" id="sub_category">
          <option value="0" >Choose Sub Category</option>

<?php foreach(Categories_sub::find_by_cat_id(????) as $id) :?>
    <?php echo "<option value=".$id->id .">". $id->cat_sub_name."</option>"; ?>
    <?php endforeach?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:59:52.270

我将通过以下方式之一执行此操作，都涉及 javascript：

1、当第一个选择框值发生变化时，用AJAX加载第二个选择框（去掉当前的第二个选择框）。

2\. 打印出所有选择框。然后用javascript显示和隐藏右边的选择框。这不涉及 AJAX，但您需要使用 PHP 检查第一个选择框，以检查应该处理哪个第二个选择框。

我会建议像 jQuery 这样的框架来做这两个选项之一。

# python - 是否可以使用活动语言订购 Django 模型？

> ID：16086207
> 
> 赞同：3
> 
> 时间：2013-04-18T14:50:30.530
> 
> 标签：python, django, django-models, internationalization

我正在研究 Django 1.5.1，我想知道以下问题：是否可以在可翻译字段的模型中定义排序，使用`django-transmeta`和使用用户正在访问管理员的活动语言？

到目前为止，我实现了使用翻译字段并使用默认语言而不是活动语言进行排序，因为如果我从 Meta 类（或从 ModelAdmin 类）调用方法，调用`get_language()`总是返回定义的默认值。`settings.py`

这是我正在处理的代码，感谢您的帮助：

```
class StartupType(models.Model):

    __metaclass__ = TransMeta

    name = models.CharField(_("Name"), max_length=30, unique=True)
    slug = models.SlugField(_("Slug"), max_length=30, unique=True, editable=False)

    class Meta:

        verbose_name = _("Startup type")
        verbose_name_plural = _("Startup types")
        translate = (
            "name",
        )
        ordering = [
            "name_" + LANGUAGE_CODE,
        ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:35:49.603

根据[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.ordering)，您可以定义一种`get_ordering()`使用动态订单的方法：

```
# admin.py
from django.contrib import admin
from .models import StartupType

class StartupTypeAdmin(admin.ModelAdmin):
    def get_ordering(self, request):
        language_code = request.LANGUAGE_CODE[:2]
        return ('name_%s' % language_code,)

admin.site.register(StartupType, StartupTypeAdmin) 
```

这也适用于使用`get_language()`而不是`request.LANGUAGE_CODE`.

如果您仍然没有获得正确的语言，请确保您在 Session 中间件**之后**`settings.py`添加了 Locale 中间件，例如：

```
MIDDLEWARE_CLASSES = ( 
    'django.middleware.common.CommonMiddleware', 
    'django.contrib.sessions.middleware.SessionMiddleware', 
    'django.middleware.locale.LocaleMiddleware', 
    'django.middleware.csrf.CsrfViewMiddleware', 
    'django.contrib.auth.middleware.AuthenticationMiddleware', 
    'django.contrib.messages.middleware.MessageMiddleware', 
    'django.middleware.clickjacking.XFrameOptionsMiddleware', 
) 
```

**编辑：**添加了在模型上定义动态排序的替代方法。

如果您还想设置`ordering`模型类，似乎有点复杂，这是我能想到的最好的：

```
from django.db import models
from django.db.models.options import Options
from django.utils.translation import get_language
from django.utils.translation import ugettext_lazy as _

from transmeta import TransMeta, get_real_fieldname

class TranslatedOptions(Options):
    @property
    def ordering(self):
        lang = get_language()[:2]
        return [get_real_fieldname(f, lang) for f in self.orig_ordering]

    @ordering.setter
    def ordering(self, value):
        self.orig_ordering = value

class TransMetaOrdering(TransMeta):
    def __new__(cls, name, bases, attrs):
        new_class = super(TransMetaOrdering, cls).__new__(cls, name, bases, attrs)
        options = TranslatedOptions(None)
        for k, v in new_class._meta.__dict__.iteritems():
            setattr(options, k, v)
        new_class._meta = options
        return new_class

class StartupType(models.Model):
    __metaclass__ = TransMetaOrdering

    name = models.CharField(_("Name"), max_length=30)
    slug = models.SlugField(_("Slug"), max_length=30, editable=False)

    class Meta:
        verbose_name = _("Startup type")
        verbose_name_plural = _("Startup types")
        translate = (
            "name",
        )
        ordering = (
            "name",
        ) 
```

这将用一个类型的新对象替换`StartupType._meta`（类型的对象），该对象将作为动态属性公开。`django.db.models.options.Options``TranslatedOptions``ordering`

# google-apps-script - 更改了安全设置，现在我无法运行任何脚本

> ID：16086209
> 
> 赞同：0
> 
> 时间：2013-04-18T14:50:33.633
> 
> 标签：google-apps-script

我进入我的帐户安全设置并清理了几个我不再使用的旧应用程序，单击删除访问。然后我回到我正在处理（并且工作正常）的 Google App Script 并尝试运行它：

```
Cannot connect to Gmail (line 6, file "Code")
Line 6 = var threads = GmailApp.getInboxThreads(); 
```

试图编辑一些代码并保存

> 很抱歉，我们无法获取授权凭据。请稍等，然后重试。

尝试创建一个新脚本并为其命名，等了 30 分钟并重新启动了我的机器，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:27:16.257

只需清除缓存重新授权关闭浏览器然后再次打开，一切都应该正常工作，否则您应该访问此链接[Gmail 帮助](http://support.google.com)
如果您找不到问题，然后向谷歌发送电子邮件至[联系谷歌](http://support.google.com/bin/static.py?hl=en&page=portal_contact_options.cs)

# javascript - 灵活使用 Math.random

> ID：16086213
> 
> 赞同：3
> 
> 时间：2013-04-18T14:50:44.747
> 
> 标签：javascript, string, random, operators

我想创建一个 4 字母长的字符串，随机包含字符串中的任何字母：“ROYGBV”。

我所做的是这样的：

```
function generateSolution(){
    var colors = "ROYGBV";
    var str = "";
    for (var i=0; i<4; i++) {
        var loc = Math.ceil( Math.random()*colors.length );
        str += colors.charAt(loc);
    }

    return str;
} 
```

但这似乎不对，这是为什么呢？

另外，这是来自练习的解决方案：

```
str += colors.charAt((Math.random() * 6) | 0); 
```

我在我的解决方案中使用了 Math.ceil 来防止像 4.333123 等随机浮点数。如果不对随机数进行四舍五入，此解决方案如何工作？

另外，`|`运营商是什么意思？第二个解决方案中的随机化实际上是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:55:34.547

是`|`按[位或运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#.7C_%28Bitwise_OR%29)。由于 JavaScript 中的按位运算仅适用于 32 位整数，因此这是将 aa 数舍入为 0 的简写方式。在您的情况下，它相当于：

```
colors.charAt(Math.floor((Math.random() * 6))); 
```

该数字需要被取整而不是向上取整，就像您当前正在使用的那样`ceil`，否则您将错过数组的第一个元素（位于索引 0 处）。

[以下是从规范](http://es5.github.com/#x11.10)转换为整数的完整详细信息：

> 产生式 A : A @ B，其中 @ 是上述产生式中的位运算符之一，计算如下：
> 
> 1.  令*lref*为评估*A*的结果。
> 2.  令*lval*为 GetValue( *lref* )。
> 3.  令*rref*为评估*B*的结果。
> 4.  设*rval*为 GetValue( *rref* )。
> 5.  令*lnum*为 ToInt32( *lval* )。
> 6.  设*rnum*为 ToInt32( *rval* )。
> 7.  返回将按位运算符 @ 应用于 lnum 和 rnum 的结果。结果是一个带符号的 32 位整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:57:29.543

尝试这个

```
function generateSolution() {
    var colors = "ROYGBV",
        str = "",
        l = colors.length,
        i = 0;

    while (i < 4) {
        var loc = Math.floor(Math.random() * l);
        str += colors.charAt(loc);

        i += 1;
    }

    return str;
}

console.log(generateSolution()); 
```

在[jsiddle](http://jsfiddle.net/Xotic750/R3AAR/)

你需要Math.floor，| 只是执行 32 位地板的按位方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:54:35.027

你想要`Math.floor()`而不是`Math.ceil()`. Javascript 数组是从零开始的，因此您需要介于 0 和 5 之间的值。

# html - 在 Firefox 中工作的东西在 chrome 中出错

> ID：16086216
> 
> 赞同：1
> 
> 时间：2013-04-18T14:50:51.373
> 
> 标签：html, google-chrome, firefox, iframe, request

我在 chrome 中遇到了一些问题，而在 Firefox 中没有问题：
单击我制作的一种按钮时，没有发送任何请求。
尝试使用 Web 控制台为 iframe 提供源时，没有任何反应，没有发送请求，也没有给出错误。我的代码是：

```
 <ul id="navigation" style="height: 500px; border-right-width: 1px; padding-top: 0px; padding-bottom: 0px;">
    <li><a class="link1" id="save_li">Save</a></li>
    <li><a class="link2" id="recover_li">Recover</a></li>

</ul>
<div id="frame_div" style="height: 500px; width: 574px; padding-left: 146px;">
  <iframe id="frame_opened" style="width: 100%;" height="100% overflow-x:hidden; overflow-y:hidden;" scrolling="no">
</div> 
```

js（在窗口加载时调用）：

```
 function addListeners()
   {
     document.getElementById('save_li').addEventListener('click', function () {
            frame_opened.src="save.php";
            }, false);
      document.getElementById('recover_li').addEventListener('click', function () {
            frame_opened.src="recover.php";
            }, false);
   } 
```

CSS：

```
 #navigation {
  float: left;
  border-right:1px solid #999;
  padding:10px 0px;
  width:20%;
  padding-left: 1px;
}
#navigation a  {
  display:block;
  background:url(navigation.png);
  height:47px;
  text-indent:-9000px;
} 
```

知道我该怎么做吗？

# javascript - 禁用 jQuery 按钮 - 仍然没有食谱

> ID：16086221
> 
> 赞同：2
> 
> 时间：2013-04-18T14:51:04.460
> 
> 标签：javascript, jquery-mobile

浏览互联网以查找如何禁用按钮：

```
<td valign="center" halign="left"><a href="#" id="save-user" data-role="button" data-inline="true" data-theme="b" data-icon="check">Save</a></td> 
```

大多数食谱都没有结果：

```
$('#operator-modify').ready( function () {
// None of the below disable button
//$("#save-user").attr("disabled", true).button("refresh");
//$('#save-user').addClass('ui-state-disabled').attr('disabled', true);
//$('#save-user').attr('disabled', 'disabled').addClass( 'ui-state-disabled');
}); 
```

最后 - 如何启用/禁用按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:36:11.050

当您使用链接标签作为[按钮](http://api.jquerymobile.com/button)（即添加`data-role="button"`）时，JQM buttonMarkup 插件会应用按钮小部件标记/样式，但实际上并**不会**创建按钮小部件。由于您实际上没有按钮小部件，因此您不能使用按钮小部件方法（启用、禁用等），而是禁用或启用您的*“按钮”*，您需要添加/删除`ui-disabled`该类。

`$('#save-user').addClass("ui-disabled");`

这是一个简单的[jsBin](http://jsbin.com/osofez/1/)

附带说明一下，如果您不使用按钮进行导航，您可能想要使用表单按钮 ( `input`, `button`)，如果您确实使用常规按钮，那么您可以改用 JQM 按钮[禁用](http://api.jquerymobile.com/button/#method-disable)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:05:19.677

jQuery mobile 有几种类型的按钮。“基础”页面中的第一个是`<a data-role="button">`. 这种类型的按钮可以通过应用`.ui-disabled`类来禁用：

```
$('#operator-modify').ready( function () {
   $('#save-user').addClass('ui-disabled');
}); 
```

[文档](http://api.jquerymobile.com/button/)中有关于样式为按钮的链接的注释。

> **注意**：按钮样式的链接具有与下面真正的基于表单的按钮相同的视觉选项，但有一些重要的区别。基于链接的按钮不是`button`插件的一部分，仅使用底层`buttonMarkup`插件来生成按钮样式，因此不支持表单按钮方法（启用、禁用、刷新）。如果您需要禁用基于链接的按钮（或任何元素），可以使用 JavaScript 自己应用禁用的类 ui-disabled 来实现相同的效果。

其他类型的按钮是`<input type="button">`和`<button>`。这种类型的按钮可以通过调用“按钮”小部件的“禁用”方法来禁用。

```
$('#operator-modify').ready( function () {
   $('#save-user').button('disable');
}); 
```

完整示例：http: [//jsfiddle.net/xH7W3/3/](http://jsfiddle.net/xH7W3/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:57:12.357

你所拥有的不是一个按钮。这是一个 html 锚标记。这就是按钮相关的禁用功能对您不起作用的原因。

如果您可以将`<a>`标签更改为`<button>`标签，`<input type="button" />`那么以下应该可以工作。 `$("#save-user").attr("disabled", true);`

如果您不能将其更改为按钮，则可以添加样式类以使超链接看起来被禁用（灰色和鼠标光标正常而不是指针），并防止默认单击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:56:57.683

您不是要禁用按钮，而是要禁用锚`<a>`标记。

当它不应该去任何地方/做任何事情时，要么转换为使用`<button>`，要么使用`.click()`返回。`false`

您可能还需要在“禁用”时为您的锚定义另一种样式

我建议使用`<button>`，虽然...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-18T15:00:35.743

您正在使用锚 <a> 元素。它没有禁用之类的属性。要禁用锚元素，您可以执行以下操作：

```
$("#save-user").click(function(e) { 
    e.preventDefault(); 
}); 
```

preventDefault 确保任何 HTML / 浏览器反应都将被取消。

如果您只想禁用一个按钮，它可以是输入 <input> 元素或 <button> 元素，您可以简单地执行以下操作：

```
<input type="button" value="Click Me" disabled/> 
```

# asp.net - 从代码隐藏中选择单选按钮

> ID：16086222
> 
> 赞同：0
> 
> 时间：2013-04-18T14:51:05.470
> 
> 标签：asp.net, radiobuttonlist

`RadioButtons`我的aspx 页面上有一组三个：

在`pageLoad`我使用以下代码从后面的代码中设置默认值：

```
rbListAccess.Items.FindByText("Page1ScoreCard POC").Selected = true;
rbListMetricType.Items.FindByText("Non-Percentage").Selected = true;
rbListMetricInterval.Items.FindByText("Monthly").Selected = true; 
```

这工作正常。

在编辑链接上，我正在从后端获取数据并使用获取的数据集中的数据列再次设置值，但它无法正常工作。未正确选择值。我无法理解这个问题。随机一次或两次设置正确的一/二：

```
rbListAccess.Items.FindByText(ds.Tables[0].Rows[0]["ToBeFilledBy"].ToString()).Selected = true;
rbListMetricType.Items.FindByText(ds.Tables[0].Rows[0]["MetricType"].ToString()).Selected=true;

rbListMetricInterval.Items.FindByText(ds.Tables[0].Rows[0]["MetricInterval"].ToString()).Selected = true; 
```

请让我知道这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:57:06.883

`ClearSelection()`在为它分配新值之前，您可能希望使用方法清除选择。

```
rbListAccess.ClearSelection(); // add this for all your radiobuttons
rbListMetricType.ClearSelection();
rbListMetricType.ClearSelection();

rbListAccess.Items.FindByText(ds.Tables[0].Rows[0]["ToBeFilledBy"].ToString()).Selected = true;
rbListMetricType.Items.FindByText(ds.Tables[0].Rows[0]["MetricType"].ToString()).Selected=true;
rbListMetricInterval.Items.FindByText(ds.Tables[0].Rows[0]["MetricInterval"].ToString()).Selected = true; 
```

# controller - javaFX 2- 控制器内的监听器

> ID：16086231
> 
> 赞同：0
> 
> 时间：2013-04-18T14:51:23.737
> 
> 标签：controller, javafx-2, listener

想在控制器中使用拖放功能（见下文）。但由于 tableView.getParent() 为 NULL，我的监听器无法正常工作。你能在这里帮忙吗？我不想将代码移动到主类。

```
public class CenterController implements Initializable {
@FXML public TableView<Swap> tableView;
public void initialize(URL location, ResourceBundle resources) {
loadDragDrop(tableView.getParent());
}
 public void loadDragDrop(final Node n){
        n.setOnDragOver(new EventHandler<DragEvent>() {
            @Override
            public void handle(DragEvent event) {
                Dragboard db = event.getDragboard();
                if (db.hasFiles()) {
                    event.acceptTransferModes(TransferMode.COPY);
                } else {
                    event.consume();
                }
            }
        });
    n.setOnDragDropped(new EventHandler<DragEvent>() {
            @Override
            public void handle(DragEvent event) {
                Dragboard db = event.getDragboard();

                boolean success = false;
            event.setDropCompleted(success);
                event.consume();
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:16:11.197

简单的把未初始化的代码放在一个runLater中：

```
Platform.runLater(new Runnable() {

    @Override
    public void run() {
        // youre code goes here ;-)
    }
}); 
```

# unix - 为什么 tr -d 用 - 替换目标？

> ID：16086241
> 
> 赞同：1
> 
> 时间：2013-04-18T14:51:56.880
> 
> 标签：unix, tr

根据 tr 人的说法：

-d, --delete 删除 SET1 中的字符，不翻译

然而

```
$ echo "abc" | tr "a" -d 
-bc 
```

现在可以使用附加命令将其删除，例如

```
echo "abc" | tr "a" -d | sed 's/-//' 
```

但我在这里错过了什么吗？为什么 delete 用 - 替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:55:44.097

你这样做是不对的。`SET1`正如手册所说，您之前通过了该选项`tr [-Ccu] -d string1`。所以你的命令应该是`echo "abc" | tr -d "a"`.

该命令`tr "a" -d`将全部替换`a`为`-`. 试试下面的命令，你会弄清楚发生了什么更好..

```
echo "abc" | tr "a" de

echo "abc" | tr "a" +e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:59:43.573

您的选项和参数的顺序错误：

```
tr "a" -d 
```

标准命令行语法是在所有非选项参数之前提供选项，如下所示：

```
tr -d a 
```

在这种语法下，第一个非选项参数（或显式参数`--`）终止选项处理，命令行上之后的所有其他内容都是一个参数。

一些命令像`gcc`传统上打破了这个约定并将选项与参数混合在一起。在这种情况下，通常是因为选项和参数的顺序很重要（通常，选项仅适用于它们之后的参数，而不适用于它们之前的参数）。

此外，一些命令放宽了规则并允许在每种情况下将选项与参数混合，但这是非标准的，通常不应该使用，特别是如果您希望代码尽可能兼容/可移植。

# asp-classic - 提交表单在asp中不起作用

> ID：16086245
> 
> 赞同：1
> 
> 时间：2013-04-18T14:51:59.783
> 
> 标签：asp-classic

在网站上发送电子邮件时，我在提交表单时遇到了问题。该表格可在以下位置找到。

[http://www.someone.com/medicallights/contact.htm](http://www.someone.com/medicalights/contact.htm)

我正在使用 SMTPsvg.Mailer 对象发送电子邮件。服务器是否支持此对象，如果支持，我们可以使用远程主机属性中的 localhost。我也试过 CDONTS.New | MailCDO.Message 但这些也不能正常工作。请向托管公司的支持部门询问此问题。

以下代码用于发送电子邮件。

设置 Mailer = Server.CreateObject("SMTPsvg.Mailer")

```
Mailer.RemoteHost = "localhost" 
Mailer.ReturnReceipt = false
Mailer.ConfirmRead = false
Mailer.Priority = 1
Mailer.Urgent = false
Mailer.Timeout = 30

Mailer.FromName = "someone.com"
Mailer.FromAddress = "info@someone.com"
Mailer.AddRecipient "que33@gmail.com", "que33@gmail.com"
Mailer.Subject = "CONTACT US Request"
Mailer.BodyText = Body

SendMail = Mailer.SendMail 
```

我在另一个网站上使用相同的代码，它工作完美，但这个不是，两个网站的联系表格都向同一个地址发送电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:44:31.003

您的表单的链接不起作用。我想查看表单的 HTML，以及读取提交数据的 ASP 代码。我也同意 John 的建议，即您使用 CDOSYS 代码发送邮件。那可能是你的问题。这是我为我的 CMS 创建的功能，以便在页面需要发送电子邮件时使用：

```
<%
function email(s_from,s_reply_to,s_recipients,s_bcc,s_subject,s_msg,s_type,s_msg_error_add,s_remote_host)

    if (s_msg_error_add<>"") then s_msg_error_add = "<hr>" & vbCrLf & s_msg_error_add
    if (s_remote_host="default") then s_remote_host = application("s_mail_server")
    if (s_remote_host="") then s_remote_host = "localhost"
    s_remote_host=lcase(s_remote_host)

    's_recipients looks like "Scott <scott@domain.net>; Sue <andy@domain.net>" etc

    s_from = replace(s_from,","," ",1,-1,1)
    s_from = replace(s_from,"  "," ",1,-1,1)
    s_from = replace(s_from,"[","<",1,-1,1)
    s_from = replace(s_from,"]",">",1,-1,1)

    if (s_reply_to<>"") then
        s_reply_to = replace(s_reply_to,","," ",1,-1,1)
        s_reply_to = replace(s_reply_to,"  "," ",1,-1,1)
        s_reply_to = replace(s_reply_to,"[","<",1,-1,1)
        s_reply_to = replace(s_reply_to,"]",">",1,-1,1)
    end if

    s_recipients = replace(s_recipients,",",";",1,-1,1)
    s_recipients = replace(s_recipients,"  "," ",1,-1,1)
    s_recipients = replace(s_recipients,"[","<",1,-1,1)
    s_recipients = replace(s_recipients,"]",">",1,-1,1)

    if (s_bcc<>"") then 
        s_bcc = replace(s_bcc,","," ",1,-1,1)
        s_bcc = replace(s_bcc,"  "," ",1,-1,1)
        s_bcc = replace(s_bcc,"[","<",1,-1,1)
        s_bcc = replace(s_bcc,"]",">",1,-1,1)
    end if

    err.clear

    Dim MailerConfig
    Dim Mailer
    Dim strRet
    dim sch

    strRet = ""
    sch = "http://schemas.microsoft.com/cdo/configuration/"

    Set MailerConfig = CreateObject("CDO.Configuration")
    Set Mailer = CreateObject("CDO.Message")

    With MailerConfig.Fields
        '.Item(sch & "sendusing") = 2 'send using port - if err then this is really "SendUsingMethod"
        '.Item(sch & "sendusingmethod") = 2 'send using port - if err then this is really "SendUsingMethod"
        .Item(sch & "smtpconnectiontimeout") = 900
        '.Item(sch & "smtpauthenticate") = 1 'use basic (clear-text) authentication
        .Item(sch & "smtpserver") = s_remote_host
        '.Item(sch & "smtpserverport") = 25
        '.Item(sch & "sendusername") = SMAUTHUSER
        '.Item(sch & "sendpassword") = SMAUTHPASS
        .Update
    End With
    Mailer.Configuration = MailerConfig

    'Mailer.Fields(cdoImportance) = 1
    'Mailer.Fields("urn:schemas:mailheader:X-MSMail-Priority") = 1
    'Mailer.Fields("urn:schemas:mailheader:X-Mailer") = ""
    'Mailer.Fields.Update

    '-- Set the Mail Properties

    'on error resume next

    Mailer.From = s_from
    Mailer.To = s_recipients
    if (s_reply_to<>"" and s_reply_to<>"na") then Mailer.ReplyTo = s_reply_to

    b_redirect=false

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 72, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    if (s_bcc<>"" AND s_bcc<>"na" AND s_bcc<>"n/a") then Mailer.BCC = s_bcc

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 79, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    Mailer.Subject = s_subject

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 86, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    if (s_type="html") then
        Mailer.AutoGenerateTextBody = True
        s_msg = replace(s_msg,vbCrLf,"<br>",1,-1,1)
    else
        Mailer.AutoGenerateTextBody = False         
    end if

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 103, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    Mailer.MimeFormatted = False

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 110, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    if (s_type = "text") then
        Mailer.TextBody = fn_dirty(s_msg)
    else
        's_msg_html = replace(s_msg,vbCrLf,"<br>",1,-1,1)
        s_msg_html = s_msg
        Mailer.HTMLBody = fn_dirty(s_msg_html)
    end if

    if (err.number<>0 and err.number<>13) then
        session("msg") = "Error in i_fn_email_cdo.asp line 123, Error: " & err.number & "<br>" & err.description
        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    '-- Fire off the email message

    Mailer.Send

    if (err.number<>0 and err.number<>13) then
        Select Case err.Number
            Case -2147220973
                strRet = " Failure to Send Report Message - Server Not Found" & vbCrLf & " Error: " & err.Number & " - " &  err.Description
            Case -2147220975
                strRet = " Failure to Send Report Message - Server Authentication Failed" & vbCrLf & " Error: " & err.Number & " - " & err.Description
            Case Else
                strRet = " Failure to Send Report Message - Error: " & err.Number & " - " & err.Description
        End Select

        msg = "<br>Error in i_fn_email_cdo.asp: " & strRet & "<br><br>"

        msg = msg & "remote host = " & s_remote_host & "<br>"
        s_from = replace(s_from,"<","[",1,-1,1)
        s_from = replace(s_from,">","]",1,-1,1)
        s_reply_to = replace(s_reply_to,"<","]",1,-1,1)
        s_reply_to = replace(s_reply_to,">","[",1,-1,1)
        s_recipients = replace(s_recipients,"<","[",1,-1,1)
        s_recipients = replace(s_recipients,">","]",1,-1,1)
        s_bcc = replace(s_bcc,"<","[",1,-1,1)
        s_bcc = replace(s_bcc,">","]",1,-1,1)

        msg = msg & "from = " & s_from & "<br>"
        msg = msg & "to = " & s_recipients & "<br>"
        msg = msg & "subject = " & s_subject & "<br>"
        msg = msg & "recipients = " & s_recipients & "<br><br>"

        if (s_type = "text") then
            msg = msg & s_msg
        else
            msg = msg & s_msg_html
        end if
        msg = msg & "<br>"      
        msg = msg & s_msg_error_add
        session("msg") = msg
        Set Mailer = Nothing
        set MailerConfig = nothing

        if (b_redirect) then response.redirect ("error_report.asp?send_mail=yes")
    end if

    Set Mailer = Nothing
    set MailerConfig = nothing

    email = true

end function

Function fn_dirty(FixWhat)
    if (isnull(FixWhat) or FixWhat="") then
        FixWhat=""
    else
        FixWhat=trim(FixWhat)
        FixWhat=replace(FixWhat,"<ahref","<a href",1,-1,1)
        FixWhat=replace(FixWhat,"<spanclass","<span class",1,-1,1)
        FixWhat=replace(FixWhat,"  "," ",1,-1,1)
        FixWhat=replace(FixWhat,"&#146;","'",1,-1,1)
        FixWhat=replace(FixWhat,"&apos;","'",1,-1,1)
        FixWhat=replace(FixWhat,"%27","'",1,-1,1)
        FixWhat=replace(FixWhat,"&#39;","'",1,-1,1)
        FixWhat=replace(FixWhat,"&#146;","'",1,-1,1)
        FixWhat=replace(FixWhat,"&#47;","/",1,-1,1)
        FixWhat=replace(FixWhat,"''''","'''",1,-1,1)
        FixWhat=replace(FixWhat,"&#34;",chr(34),1,-1,1)
        FixWhat=replace(FixWhat,"%22",chr(34),1,-1,1)
        FixWhat=replace(FixWhat,chr(13) & chr(10),"",1,-1,1)
        FixWhat=replace(FixWhat,"title=","alt=",1,-1,1)
        FixWhat=replace(FixWhat,"src=" & chr(34) & chr(32),"",1,-1,1)
        FixWhat=replace(FixWhat,"src=" & chr(34) & "/images","src=" & chr(34) & "images",1,-1,1)
        FixWhat=replace(FixWhat,"background=" & chr(34) & chr(32),"background=" & chr(34) & chr(34) & chr(32),1,-1,1)
        FixWhat=replace(FixWhat,"x=" & chr(34) & chr(32)," ",1,-1,1)
        FixWhat=replace(FixWhat,"&amp;","&",1,-1,1)
        FixWhat=replace(FixWhat,"amp;","&",1,-1,1)
        FixWhat=replace(FixWhat,"&amp;","&",1,-1,1)
        FixWhat=replace(FixWhat,"&&","&",1,-1,1)
        FixWhat=replace(FixWhat,"&&","&",1,-1,1)
        FixWhat=replace(FixWhat,"&lt;","<",1,-1,1)      
        FixWhat=replace(FixWhat,"&gt;",">",1,-1,1)
        FixWhat=replace(FixWhat,"//<![CDATA[","",1,-1,1)
        FixWhat=replace(FixWhat,"//]]","",1,-1,1)
        FixWhat=replace(FixWhat,"<TABLE","<table",1,-1,1)       
        FixWhat=replace(FixWhat,"<TBODY>","<tbody>",1,-1,1)
        FixWhat=replace(FixWhat,"<TR","<tr",1,-1,1)             
        FixWhat=replace(FixWhat,"<TD","<td",1,-1,1) 
        FixWhat=replace(FixWhat,"</TR>","</tr>",1,-1,1)             
        FixWhat=replace(FixWhat,"</TD>","</td>",1,-1,1) 

        FixWhat=replace(FixWhat,"<html><br>","<html>",1,-1,1)
        FixWhat=replace(FixWhat,"<head><br>","<head>",1,-1,1)       
        FixWhat=replace(FixWhat,"<body><br>","<body>",1,-1,1)
        FixWhat=replace(FixWhat,"<br><tbody>","<tbody>",1,-1,1)
        FixWhat=replace(FixWhat,"<tbody><br>","<tbody>",1,-1,1)
        FixWhat=replace(FixWhat,"<br><tr>","<tr>",1,-1,1)
        FixWhat=replace(FixWhat,"<tr><br>","<tr>",1,-1,1)
        FixWhat=replace(FixWhat,"<br><td","<td",1,-1,1)
        FixWhat=replace(FixWhat,"<br></html>","</html>",1,-1,1)
    end if
    fn_dirty=FixWhat
End Function
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T08:31:41.977

问题可能是这条线..

```
Mailer.RemoteHost = "localhost" 
```

如果 localhost 未配置为该用户/域的发送/中继，它将失败而不给出任何指示。如果您已经为您的站点配置了邮件服务器，请尝试将其设置为 RemoteHost。您可以使用 alias.domain 或 IP 号码。

# android - 我们可以让列表视图表现得像可扩展列表视图吗

> ID：16086253
> 
> 赞同：0
> 
> 时间：2013-04-18T14:52:20.527
> 
> 标签：android

我们可以让一个`ListView`行为像一个`ExpandableListView`吗？我有一个带有按钮的标题，`ListView`在它下面。单击标题按钮可以`expand/collapse?`

![在此处输入图像描述](https://i.stack.imgur.com/YYj4o.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:54:56.543

[Slide Expandable ListView](http://www.androidviews.net/2012/12/slide-expandable-listview/)是一个很棒的开源视图，可以为您工作。

# paypal - PayPal 保险库存储 - 安全地发送信用卡信息

> ID：16086267
> 
> 赞同：3
> 
> 时间：2013-04-18T14:52:49.443
> 
> 标签：paypal, credit-card, pci-dss, pci-compliance, braintree

我正在评估一些支付网关选项，并正在查看 PayPal 的保险库选项（类似于 Braintree 的保险库）。

我发现，在 Braintree 的保险库存储中，我可以安全地（加密）发送信用卡信息以存储在他们的服务器上，从而避免了 PCI 合规性问题的必要性。

PayPal 的保险库存储 API 是否有类似的方式来发送加密的信用卡信息？我正在查看他们的文档，似乎我需要将未加密的数据发送到他们的保险库。

我做这个假设错了吗？我会非常感兴趣，因为这将使我放弃 Paypal 并使用 Braintree 作为我们的支付网关服务。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:22:31.863

根据您具体要使用的 PayPal 服务，PayPal 和 Payflow 都有类似的服务。您可以在 PayPal 的开发者网站上找到有关[PayPal 保险柜的信息。](https://developer.paypal.com/webapps/developer/docs/api/#vault)如果您想使用 Payflow，您可以让 Payflow 存储客户的信用卡信息。查看[Payflow Gateway 开发人员指南](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/payflowgateway_guide.pdf)。第 76 页包含有关数据上传功能的信息。

# rest - 图 API 搜索类型“页面”似乎坏了？

> ID：16086269
> 
> 赞同：1
> 
> 时间：2013-04-18T14:52:55.020
> 
> 标签：rest, facebook-graph-api

我实现了图形 API 来搜索页面。( `&type=page`) API 大约 2 天前停止提供结果，而我的代码没有被更改。我从 REST 请求中得到的`https://graph.facebook.com/search?q={query}&type=page&limit=50&access_token={token}` 只是：

```
{
   "data": [

   ]
} 
```

有人有类似问题吗？提前感谢您对此的任何评论。

编辑：
好的......这开始变得神秘了。使用 Facebook API 资源`https://developers.facebook.com/tools/explorer/`
管理器，我输入了从任何其他客户端（我自己的浏览器、正常发送请求的服务器、Firefox 的 REST 客户端应用程序）运行的完全相同的查询，然后再次：所有返回空白，除了那个来自官方资源管理器，提供一流的结果。
所以它可能不是访问令牌，可能不是查询本身（因为它已经过测试）。
嗯...是时候提交错误报告了吗？您还想到了哪些其他解密正在发生的事情的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:29:35.437

I searched the graph api in similar ways earlier using a script I've made. The scripts purpose was to try to find fanpages for a given company. I wanted to narrow down the number of results so the query included the city which the company was located. This script worked fine just before christmast atleast. Today I fired it up again, something had changed. First the search required an access_token, second it returned an empty resultset. I can no longer include the company city in the query, as this turns out to not find anything. If I search for the company name I get results, but far to many of them.

# android - 将数据插入到 android sqlite 数据库不起作用

> ID：16086270
> 
> 赞同：0
> 
> 时间：2013-04-18T14:52:56.430
> 
> 标签：android, database, sqlite, insert

大家好，我正在尝试将数据插入到 sqlite db，但是当我单击插入按钮时，什么都没有发生，没有强制关闭，没有错误，没有成功/不成功的 toast 消息，什么都没有。当我单击查看数据库信息按钮时，没有插入数据到数据库。我早些时候这样做了，没有问题，但这次我找不到我出错的地方，请帮助我提前非常感谢你。

* * *

**主要活动**

```
package com.example.sql;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {

    Button insert,viewd;
    EditText name,age;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        name = (EditText)findViewById(R.id.etname);
        age = (EditText) findViewById(R.id.etage);

        insert = (Button)findViewById(R.id.btninsert);
        viewd = (Button)findViewById(R.id.btnview);

        insert.setOnClickListener(this);
        viewd.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.buttonclick);

        switch (v.getId()) {

        case R.id.btninsert:

            boolean status = true;

            try{

            String name1 = name.getText().toString();
            String age1 = age.getText().toString();

            SQLActivity entry = new SQLActivity(MainActivity.this);
            entry.open();

            entry.passDataToEntry(name1,age1);
            entry.close();

            mpButtonClick.start();

            }
            catch (Exception e) {
                // TODO: handle exception
                status=false;

                String error = e.toString();

                Log.e("Exception found ",error);

            }
            finally{
                if(status)
                {
                    Toast.makeText(getApplicationContext(), "Successfully Inserted", Toast.LENGTH_SHORT).show();

                }
            }

            break;

        case R.id.btnview:
            Intent i = new Intent("com.example.sql.VIEW");
            startActivity(i);
            break;
        }

    }   
} 
```

* * *

**SQLActivity**

```
package com.example.sql;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class SQLActivity {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "p_name";
    public static final String KEY_AGE = "p_age";

    private static final String DATABASE_NAME = "SQLDB";
    private static final String DATABASE_TABLE = "data_table";
    private static final int DATABASE_VERSION = 1;

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper
    {

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT , " + KEY_NAME + " TEXT NOT NULL , "
                    + KEY_AGE + " TEXT NOT NULL);" 
                      );

            String y = "CREATE TABLE " + DATABASE_TABLE + " (" + KEY_ROWID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT , " + KEY_NAME + " TEXT NOT NULL , "
                    + KEY_AGE + " TEXT NOT NULL);";

            //System.out.println("query" + y);
            Log.d("query", y);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w("TaskDBAdapter", "Upgrading from version " +
                    oldVersion + " to " +
                    newVersion + ", which will destroy all old data");

            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);

            onCreate(db);

        }

    }

    public SQLActivity(Context c)
    {
        ourContext = c;
    }

    public SQLActivity open() throws SQLException
    {
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close()
    {
        ourHelper.close();
    }

    public long passDataToEntry(String name1, String age1) {
        // TODO Auto-generated method stub

        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name1);
        cv.put(KEY_AGE, age1);
        int i = (int)ourDatabase.insert(DATABASE_TABLE, null, cv);
        String MY_TAG="";
        Log.d(MY_TAG,"Value= "+i);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);

    }

    public String getData() {
        // TODO Auto-generated method stub
        String[] columns = new String[]{KEY_NAME,KEY_AGE};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";

        int iRow = c.getColumnIndex(KEY_ROWID);
        int iName = c.getColumnIndex(KEY_NAME);
        int iAge = c.getColumnIndex(KEY_AGE);

        for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
        {
            result = result + c.getString(iName) + " " + c.getString(iAge) + "\n";
        }

        return result;
    }

} 
```

* * *

**activity_main.xml**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="28dp"
        android:text="Name"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/etname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="14dp"
        android:ems="10"
        android:inputType="textPersonName" />

    <TextView
        android:id="@+id/tvinfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="40dp"
        android:text="Age"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/etage"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" />

    <Button
        android:id="@+id/btninsert"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="130dp"
        android:text="Insert" />

    <Button
        android:id="@+id/btnview"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="View" />

</LinearLayout> 
```

* * *

**日志猫**

```
04-18 22:43:50.625: E/Zygote(33): setreuid() failed. errno: 2
04-18 22:43:56.095: E/Zygote(33): setreuid() failed. errno: 17
04-18 22:43:56.985: E/BatteryService(59): usbOnlinePath not found
04-18 22:43:56.985: E/BatteryService(59): batteryVoltagePath not found
04-18 22:43:56.985: E/BatteryService(59): batteryTemperaturePath not found
04-18 22:43:56.995: E/SurfaceFlinger(59): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
04-18 22:44:01.455: E/EventHub(59): could not get driver version for /dev/input/mouse0, Not a typewriter
04-18 22:44:01.455: E/EventHub(59): could not get driver version for /dev/input/mice, Not a typewriter
04-18 22:44:02.105: E/System(59): Failure starting core service
04-18 22:44:02.105: E/System(59): java.lang.SecurityException
04-18 22:44:02.105: E/System(59):   at android.os.BinderProxy.transact(Native Method)
04-18 22:44:02.105: E/System(59):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
04-18 22:44:02.105: E/System(59):   at android.os.ServiceManager.addService(ServiceManager.java:72)
04-18 22:44:02.105: E/System(59):   at com.android.server.ServerThread.run(SystemServer.java:184)
04-18 22:44:02.665: E/SoundPool(59): error loading /system/media/audio/ui/Effect_Tick.ogg
04-18 22:44:02.675: E/SoundPool(59): error loading /system/media/audio/ui/KeypressStandard.ogg
04-18 22:44:02.675: E/SoundPool(59): error loading /system/media/audio/ui/KeypressSpacebar.ogg
04-18 22:44:02.675: E/SoundPool(59): error loading /system/media/audio/ui/KeypressDelete.ogg
04-18 22:44:02.675: E/SoundPool(59): error loading /system/media/audio/ui/KeypressReturn.ogg
04-18 22:44:03.755: E/ThrottleService(59): Could not open GPS configuration file /etc/gps.conf
04-18 22:44:05.005: E/logwrapper(147): executing /system/bin/tc failed: No such file or directory
04-18 22:44:05.045: E/logwrapper(148): executing /system/bin/tc failed: No such file or directory
04-18 22:44:05.065: E/logwrapper(149): executing /system/bin/tc failed: No such file or directory
04-18 22:44:10.423: E/HierarchicalStateMachine(59): TetherMaster - unhandledMessage: msg.what=3 
```

* * *

**查看活动**

```
package com.example.sql;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class ViewActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view);

        TextView tv = (TextView)findViewById(R.id.tvinfo);
        SQLActivity info = new SQLActivity(this);
        info.open();
        info.getData();
    }

} 
```

* * *

**视图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Data...." />

    <TextView
        android:id="@+id/tvinfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="DB Info" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T12:06:07.570

这是简单的 SQlite 数据库 试试这个并将其与您的场景相匹配。

注册适配器.java

```
package com.example.registrationform;
        import android.content.ContentValues;
        import android.content.Context;
        import android.database.Cursor;
        import android.database.sqlite.SQLiteDatabase;

    public class RegistrationAdapter {
        SQLiteDatabase database_ob;
        RegistrationOpenHelper openHelper_ob;
        Context context;

        public RegistrationAdapter(Context c) {
            context = c;
        }

        public RegistrationAdapter opnToRead() {
            openHelper_ob = new RegistrationOpenHelper(context,
                    openHelper_ob.DATABASE_NAME, null, openHelper_ob.VERSION);
            database_ob = openHelper_ob.getReadableDatabase();
            return this;

        }

        public RegistrationAdapter opnToWrite() {
            openHelper_ob = new RegistrationOpenHelper(context,
                    openHelper_ob.DATABASE_NAME, null, openHelper_ob.VERSION);
            database_ob = openHelper_ob.getWritableDatabase();
            return this;

        }

        public void Close() {
            database_ob.close();
        }

        public long insertDetails(String fname, String lname) {
            ContentValues contentValues = new ContentValues();
            contentValues.put(openHelper_ob.FNAME, fname);
            contentValues.put(openHelper_ob.LNAME, lname);
            opnToWrite();
            long val = database_ob.insert(openHelper_ob.TABLE_NAME, null,
                    contentValues);
            Close();
            return val;

        }

        public Cursor queryName() {
            String[] cols = { openHelper_ob.KEY_ID, openHelper_ob.FNAME,
                    openHelper_ob.LNAME };
            opnToWrite();
            Cursor c = database_ob.query(openHelper_ob.TABLE_NAME, cols, null,
                    null, null, null, null);

            return c;

        }

        public Cursor queryAll(int nameId) {
            String[] cols = { openHelper_ob.KEY_ID, openHelper_ob.FNAME,
                    openHelper_ob.LNAME };
            opnToWrite();
            Cursor c = database_ob.query(openHelper_ob.TABLE_NAME, cols,
                    openHelper_ob.KEY_ID + "=" + nameId, null, null, null, null);

            return c;

        }

        public long updateldetail(int rowId, String fname, String lname) {
            ContentValues contentValues = new ContentValues();
            contentValues.put(openHelper_ob.FNAME, fname);
            contentValues.put(openHelper_ob.LNAME, lname);
            opnToWrite();
            long val = database_ob.update(openHelper_ob.TABLE_NAME, contentValues,
                    openHelper_ob.KEY_ID + "=" + rowId, null);
            Close();
            return val;
        }

        public int deletOneRecord(int rowId) {
            // TODO Auto-generated method stub
            opnToWrite();
            int val = database_ob.delete(openHelper_ob.TABLE_NAME,
                    openHelper_ob.KEY_ID + "=" + rowId, null);
            Close();
            return val;
        }

    } 
```

openhelper.java

```
package com.example.registrationform;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class RegistrationOpenHelper extends SQLiteOpenHelper {
    public static final String DATABASE_NAME = "REGISTRATION_DB";
    public static final String TABLE_NAME = "REGISTRATION_TABLE";
    public static final String TABLE_NAME_ONE = "REGISTRATION_TABLE_ONE";
    public static final int VERSION = 1;
    public static final String KEY_ID = "_id";
    public static final String FNAME = "F_NAME";
    public static final String PKEY_ID = "pid";
    public static final String PROFILE = "profile";
    public static final String LNAME = "L_NAME";
    public static final String SCRIPT = "create table " + TABLE_NAME + " ("
            + KEY_ID + " integer primary key autoincrement, " + FNAME
            + " text not null, " + LNAME + " text not null );";

    public static final String PROFILE_TABLE = "create table " + TABLE_NAME_ONE + " ("
            + PKEY_ID + " integer primary key autoincrement, " + PROFILE
            + " text not null, );";

  /* public static final String PROFILE_TABLE="create table profiletable(profileid integer primary key autoincrement,profilename text null);";
   public static final String VALUE_TABLE="create table valuetable(id integer primary key autoincrement,value text null,delay );";
   */

    public RegistrationOpenHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(SCRIPT);
        db.execSQL(PROFILE_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("drop table " + TABLE_NAME);
        db.execSQL("drop table "+TABLE_NAME_ONE);
        onCreate(db);
    }

} 
```

注册活动.java

```
package com.example.registrationform;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class RegistrationActivity extends Activity {
    RegistrationAdapter adapter;
    RegistrationOpenHelper helper;
    EditText fnameEdit, lnameEdit;
    Button submitBtn, resetBtn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.register);
        fnameEdit = (EditText) findViewById(R.id.et_fname);
        lnameEdit = (EditText) findViewById(R.id.et_lname);
        submitBtn = (Button) findViewById(R.id.btn_submit);
        resetBtn = (Button) findViewById(R.id.btn_reset);
        adapter = new RegistrationAdapter(this);

        submitBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                String fnameValue = fnameEdit.getText().toString();
                String lnameValue = lnameEdit.getText().toString();
                long val = adapter.insertDetails(fnameValue, lnameValue);
                // Toast.makeText(getApplicationContext(), Long.toString(val),
                // 300).show();
                finish();
            }
        });
        resetBtn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                fnameEdit.setText("");
                lnameEdit.setText("");
            }
        });

    }
} 
```

MainActivity.java

```
package com.example.registrationform;

    import android.app.Activity;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.os.Bundle;
    import android.support.v4.widget.SimpleCursorAdapter;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.Button;
    import android.widget.ListView;

    public class MainActivity extends Activity {
        RegistrationAdapter adapter_ob;
        RegistrationOpenHelper helper_ob;
        SQLiteDatabase db_ob;
        ListView nameList;
        Button registerBtn;
        Cursor cursor;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            nameList = (ListView) findViewById(R.id.lv_name);
            registerBtn = (Button) findViewById(R.id.btn_register);
            adapter_ob = new RegistrationAdapter(this);

            String[] from = { helper_ob.FNAME, helper_ob.LNAME };
            int[] to = { R.id.tv_fname, R.id.tv_lname };
            cursor = adapter_ob.queryName();
            SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this,
                    R.layout.row, cursor, from, to);
            nameList.setAdapter(cursorAdapter);
            nameList.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView arg0, View arg1, int arg2,
                        long arg3) {
                    // TODO Auto-generated method stub
                    Bundle passdata = new Bundle();
                    Cursor listCursor = (Cursor) arg0.getItemAtPosition(arg2);
                    int nameId = listCursor.getInt(listCursor
                            .getColumnIndex(helper_ob.KEY_ID));
                    passdata.putInt("keyid", nameId);
                    Intent passIntent = new Intent(MainActivity.this,
                            EditActivity.class);
                    passIntent.putExtras(passdata);
                    startActivity(passIntent);
                }
            });
            registerBtn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    Intent registerIntent = new Intent(MainActivity.this,
                            RegistrationActivity.class);
                    startActivity(registerIntent);
                }
            });

        }

        @Override
        public void onResume() {
            super.onResume();
            cursor.requery();

        }

    } 
```

编辑活动.java

```
package com.example.registrationform;

    import android.app.Activity;
    import android.database.Cursor;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;

    public class EditActivity extends Activity {
        RegistrationAdapter regadapter;
        RegistrationOpenHelper openHelper;
        int rowId;
        Cursor c;
        String fNameValue, lNameValue;
        EditText fname, lname;
        Button editSubmit, btnDelete;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.editregister);
            fname = (EditText) findViewById(R.id.et_editfname);
            lname = (EditText) findViewById(R.id.et_editlname);
            editSubmit = (Button) findViewById(R.id.btn_update);
            btnDelete = (Button) findViewById(R.id.btn_delete);

            Bundle showData = getIntent().getExtras();
            rowId = showData.getInt("keyid");
            // Toast.makeText(getApplicationContext(), Integer.toString(rowId),
            // 500).show();
            regadapter = new RegistrationAdapter(this);

            c = regadapter.queryAll(rowId);

            if (c.moveToFirst()) {
                do {
                    fname.setText(c.getString(1));
                    lname.setText(c.getString(2));

                } while (c.moveToNext());
            }

            editSubmit.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    regadapter.updateldetail(rowId, fname.getText().toString(),
                            lname.getText().toString());
                    finish();
                }
            });
            btnDelete.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    regadapter.deletOneRecord(rowId);
                    finish();
                }
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:32:14.537

在 ViewActiviy 中设置文本

```
tv.setText(info.getData());
info.close(); 
```

# android - 从另一个类继承时，PhoneStateListener 不起作用

> ID：16086271
> 
> 赞同：0
> 
> 时间：2013-04-18T14:53:00.613
> 
> 标签：android, inheritance, phone-state-listener

我正在尝试从一个类继承一个函数。它包括注册一个 PhoneStateListener。以下是我尝试在 Main.java 中继承的函数。

```
 public Main(Context context) {
    this.mContext = context;
}

    @Override
protected void onCreate(Bundle savedInstanceState) {
        ...
     registerPhoneStateListener();
     }

public void registerPhoneStateListener() {
 myPhoneStateListener = new MyPhoneStateListener();
 telephonyManager = (TelephonyManager) mContext
            .getSystemService(Context.TELEPHONY_SERVICE);
 telephonyManager.listen(myPhoneStateListener,
            PhoneStateListener.LISTEN_CALL_STATE);
     } 
```

myPhoneStateListener 是 Main.java 中的一个公共类

```
 public class MyPhoneStateListener extends PhoneStateListener {...} 
```

这是我另一堂课的编码。

```
Main main =new Main(this);
main.registerPhoneStateListener(); 
```

PhoneStateListener 在 Main.java 中工作正常，但在另一个类中不工作。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:27:56.320

在我看来是有区别的。如果您运行 Activity，那么 SO 会设置正确的东西以使 Activity 正常工作。如果您使用 new 进行活动，则不是同一件事。

# jquery - 用 jquery 显示图像的一部分

> ID：16086276
> 
> 赞同：0
> 
> 时间：2013-04-18T14:53:06.037
> 
> 标签：jquery, css, image

我正在做一个可视化，计算可以返回分数（例如 23.43、4.3、39.79，...）。我需要为结果中的每个整数显示图标（例如 23 -> 23 个图标，4--> 4 个图标，39 -> 39 个图标）。

现在它还应该打破分数部分的图标，可能是小数，但可能会缩小到四分之一。例如 23.43 --> 23 个图标和 0.4（或 0.5，如果四分之一）图标的水平部分，4.3 --> 4 个图标和 0.3（或 0.25）图标的 x 部分，39.79 --> 39 个图标和图标 x 部分的 0.8（或 0.75），以此类推。

我怎么能这样做？我看到了一些在 CSS 中使用背景的方法，但这看起来并不是我所需要的。我更喜欢一些 jquery 的方式来做到这一点。

编辑：这里是我想要做的事情的图像

![在此处输入图像描述](https://i.stack.imgur.com/JVykl.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:55:32.223

我个人会将此图像设置`background-image`为 a `<div>`，并设置`width`为图像宽度的倍数（例如 23.4 * 宽度）`background-repeat`和`repeat-x`.

如果你特意拒绝使用背景，那么将JS 中的`overflow`to`hidden`和 use a设置为. 这样，由于溢出，最后一个可以是“半可见”的。`loop``document.createElement``image``div`

**编辑：**

为了解决这个问题，您需要设置换行符。例如，看到您的图像是 21px 宽，假设一行中的最大图像数是 20（840px 宽）。

假设您需要放置 75.5 张图像。

首先，您创建一个`div`宽度为 840 像素的图像并将`75.5 - (75.5 % 20)`图像放在那里。它应该创建三行图像。然后你把剩下`75.5 % 20 = 15.5 => 16 images`的（同样，最后的第 16 张图像将是半可见的。`div``15.5 * 21`

**编辑2：**

如果图像的宽度发生变化，可以采用一种新技术：只使用一个`div`固定宽度的图像来放置任何你喜欢的东西。将所有图像放入其中。`div`在页面颜色的最后一个`image`不透明背景之后添加一个新的：

[http://jsfiddle.net/qTb8T/1/](http://jsfiddle.net/qTb8T/1/)

**HTML：**

```
<div id="wrapper">
    <div id="overlay">
</div> 
```

**CSS：**

```
#wrapper {
     background: blue;
    width: 700px;
}
#overlay {
    background: blue;
    display: inline-block;
    position: relative; 
} 
```

**JS：**

```
var count = 75.5,
    ceil = Math.ceil(count),
    image = 'http://jsfiddle.net/img/logo.png',
    overlay = $('#overlay'),
    wrapper = $('#wrapper'),
    hide = ceil - count;

for(var i = 0; i < ceil; i++) {
    var img = document.createElement('img');
    img.src = image;
    wrapper.prepend(img);
}

overlay.css({
    'width': img.clientWidth,
    'left': -img.clientWidth * hide,
    'height': img.clientHeight,
}); 
```

# php - PHP函数从特定节点开始构建树

> ID：16086278
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:53:07.180
> 
> 标签：php, mysql, recursion, tree

我有一张代表机构的表格。每个机构可能有也可能没有父母（fk_organismo）。没有父 (fk_organismo = NULL) 的机构是根机构。

![表结构](https://i.stack.imgur.com/KzjP3.jpg)

任何人都可以帮助我使用可以构建完整分层树的**php**函数（递归或非递归），并且还可以接收可选参数：fk_organismo（parent_agency_id）。如果这个参数不为NULL，树应该从这个特定的机构开始建？

1.  **我必须在一棵树上展示所有机构**
2.  **必须显示从特定代理开始的所有子代理的树**

*我还想我将不得不构建两 (2) 个单独的 SQL 查询，一个用于获取所有机构，另一个用于从特定机构获取所有孩子，但不确定......*

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:17:41.340

我在想这样的事情（已修复，经过测试）

```
$conn = new mysqli("hostname","user","password","database");
if($conn->connect_errno) {
    printf("Connect failed: %s\n",$conn->connect_error);
    exit();
}

function dbToTree(){
//Set up your connection to mysql first
    global $conn;

    $sql = "SELECT * FROM `database`.`table` WHERE `fk_organismo` IS NULL ORDER BY `id` ASC LIMIT 1000;";

    $result = $conn->query($sql);

    for($i = 0; $db_array[$i] = $result->fetch_array(MYSQLI_ASSOC); $i++);

    array_pop($db_array); //The last part of the array is empty, remove it

    foreach($db_array as $row => $columns){
        $db_tree[$columns['nombre']]['info'] = $columns; //Tree root is ID of agency

        $db_tree[$columns['nombre']]['children'] = find_children($columns['id']);
    }
    return $db_tree;
}

function find_children($fk_organismo){
        global $conn;
        $sql = "SELECT * FROM `database`.`table` WHERE `fk_organismo` = " . $fk_organismo . " ORDER BY id desc";
        //die($sql);
        $result = $conn->query($sql);
        if(!$result) return NULL;
        for($i = 0; $tmp[$i] = $result->fetch_array(MYSQLI_ASSOC); $i++);

        array_pop($tmp);
        foreach($tmp as $tmp_row => $tmp_columns){
            $return[$tmp_columns['nombre']]['info'] = $tmp_columns;
            $return[$tmp_columns['nombre']]['children'] = find_children($tmp_columns['id']);
        }
        if(empty($return)) return NULL;
        return $return;
} 
```

# menu - 更改 Gantry v4 菜单颜色

> ID：16086281
> 
> 赞同：3
> 
> 时间：2013-04-18T14:53:11.243
> 
> 标签：menu, background-color, joomla3.0

我似乎无法弄清楚如何更改菜单颜色或为 Joomla 的 Gantry 4 中的菜单栏添加背景。厌倦了默认的灰色或深灰色。

我可以通过 .less 文件而不是菜单本身来更改字体和选择。

Gantry 网站上的文档过于笼统。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T20:20:19.483

还要检查：`menu-light.less`&`menu-dark.less`在`less\`目录中。

RocketTheme 的人不建议编辑编译后的 CSS（但正如 @Adriana 所指出的那样，它工作得很好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T16:06:00.197

嗨，您可能注意到 joomla 的 Gantry 框架使用[Less](http://lesscss.org/)来真正了解如何更改模板上的内容，您首先必须了解 less 是如何工作的，即使 Gantry 会为您编译较少的文件。少它太棒了，所以值得。基本上，您使用代码以更经济的巧妙方式定义 css，然后将其编译成更高效的 css 文件

如果您像我们的朋友所说的那样更改已编译的文件，那根本没有意义，因为一旦您再次编译（并且您将），这些文件将被覆盖，您的所有工作都会丢失。

我会给你方向，你会发现它并不像看那么难。

1- 在模板管理器 - 样式 - 菜单样式下检查您在龙门模板上选择的菜单。

2- 在您的 less 文件夹中，您将看到每个菜单样式的 less 文件，其中包含主要变量，例如 menu-dark.less 尝试理解变量和颜色并更改它们以查看是什么。

3-在同一个文件夹中，您有 menu.less 并且使用前一个文件中的变量完成了魔术。您会看到，例如定义第一级菜单，您将拥有如下内容：

```
&.l1 {
    > li.active {
        background: @menuActiveBack; 
```

这样 menuActiveBack 变量将是级别 1 的活动 li 的背景值。

4-最后一部分将是 menu-hovers.less，我认为它过于复杂，因为不需要有不同的文件来进行悬停，但它确实存在。

您可以控制 CSS 压缩、编译等待时间和调试头，以及在 Extensions → Template Manager → gantry → Advanced → Less Compiler 中使用 Clear Cache 按钮手动清除缓存。

更多信息：[ganty less 文档](http://www.gantry-framework.org/documentation/joomla/advanced/less_css.md)

希望它有助于开始......

快乐编码，

爱德华多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T12:44:50.923

使用 FireBug 或类似工具来查找默认 CSS 样式。

创建一个文件`/templates/gantry/css/gantry-custom.css`并添加您自己的 CSS 以覆盖默认 CSS。

这是一种比编辑编译或其他模板更少或 css 文件更好的方法，这些文件可以在编译期间或更新模板时被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T17:28:37.067

我花了大约半个小时来浏览“css-compiled”文件夹中的“menu”css文件。

你可以找到所有的 css 来改变 Gantry 默认菜单的背景和颜色。我也在使用 Gantry v4。

到这里：

Joomla>模板>龙门>css-compiled>menu-675c76.....

请查看我的图片以查看我的结果： [http ://dream2unite.com/images/misc/GANTRY-MENU-675c76.png](http://dream2unite.com/images/misc/GANTRY-MENU-675c76.png)

# matlab - 为分组条形图matlab添加间距

> ID：16086288
> 
> 赞同：1
> 
> 时间：2013-04-18T14:53:19.373
> 
> 标签：matlab

我有两组数据 4ACH 和 6ACH：和 4 个子组：

```
 4ACH           6ACH
    0.04485625  0.04265625
    1.881133333 0.595466667
    1.152166667 0.613
    1.842835802 0.401030556
    0.3139072   0.170007298
    -----
    0.04485625  0.04265625
    0.002466667 0.000133333
    1.152166667 0.613
    0.003676543 0.000462346
    0.3139072   0.170007298
    ----
    0.000628571 0.00005
    0.001266667 0.0002
    1.152166667 0.613
    0.001048457 0.000462346
    0.30285028  0.159355735
    ------
    0.04485625  0.04265625
    0.001266667 0.0002
    1.152166667 0.613
    0.002796914 0.000777778
    0.30285028  0.159355735 
```

`bar([4ach 6ach])`给我： ![在此处输入图像描述](https://i.stack.imgur.com/lgHA1.png)

如何在红线所在的位置添加不同的间距？这是正确的，但对于 r。[分组条形图](https://stackoverflow.com/questions/3007120/grouped-bar-graph)我怎样才能得到第二行文字？我记得看到一些关于 text 命令的东西。这显示了如何获取分组标签，但我无法完全解决此示例： [如何在 MATLAB 中调整 3-D 条形分组和 y 轴标签？](https://stackoverflow.com/questions/3601434/how-can-i-adjust-3-d-bar-grouping-and-y-axis-labeling-in-matlab)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:59:02.170

一种解决方案是在您的表格中插入零而不是'----'或者试试这个

```
bar([[4ACH(1:5) 6ACH(1:5)];[0 0];[4ACH(6:10) 6ACH(6:10)];...
[0 0];[4ACH(11:15) 6ACH(11:15)]]) 
```

# java - 多边形“修复”算法

> ID：16086292
> 
> 赞同：3
> 
> 时间：2013-04-18T14:53:43.323
> 
> 标签：java

我给你带来了一个可能很复杂的问题，我很想得到你的帮助。请允许我直奔主题：

我需要一种算法或逻辑，在该算法或逻辑中，我使用鼠标（例如正方形）绘制一个形状，它变成一个完美的正方形，所有 4 个边都是直线并且完全规则。一个人画的正方形几乎不是完美的，但我希望它经过这个算法的“过滤器”之后，变成这样。

我希望的一个很好的例子是在游戏 Trine 中，向导的工作原理类似：你在屏幕上画一个形状，它变成最接近的形状，也就是说，如果你画一个类似于正方形的东西，它就会变成一个完美的方形盒子，但如果你画一个三角形，它就会变成一个完美的三角形盒子。就像它检测到它是什么样的形状，然后绘制一个更好的版本。

我想要这个游戏，只是为了让你知道这一切的目标是什么。

请帮我弄清楚这背后的算法或逻辑，或者至少告诉我这种动作的名称是什么（：

PS我添加了一个简单的图像，所以我的意图变得更加清晰=）

![](https://i.stack.imgur.com/koedh.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:36:02.893

如果我必须执行此任务，我将存储可识别的模式，并尝试为它们进行匹配。

从用户绘制的点中获取 minX、maxX、minY、maxY 值，这将帮助您缩放图案。选择缩放比例，使图案的纵横比为 X 和 Y 纵横比的平均值。

图案可以由一定数量的直线组成。模式匹配如果

*   没有超出阈值的点
*   图案中每个关键点附近至少有一个用户绘制的点

如果您匹配了图案，您将获得图案的关键点（计算图案的中心，以及尺寸/纵横比）。然后您可以用您的图像替换用户绘制的点 - 这可能与用于匹配的模式完全不同（想象一个圆圈）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:19:57.147

You don't have just an arbitrary shape, you also have the shape's path. So try counting corners. Decide on a angle threshold that will represent a corner. For each point, sample the next consecutive x number of points. Measure the angle between the first half and second half. If the angle surpasses your threshold, consider it a corner. (Obviously select the point that give you the best angle with the least amount of error, not just the first one that surpasses the threshold.) Mark the location of the corners and draw your shape to match.

Ellipses & lines: if no angles are detected, sample a few segments. Measure the orientation. If they are very similar, then line. If very different, then ellipse. If ellipse, find the bounding box and draw inside.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:37:54.823

有很多方法可以做到这一点。你可以做到的一种方法是创建一个识别这些形状的神经网络。我会生成带有随机扰动的圆形、正方形、线条和三角形的变体，以复制“手绘”版本。然后，您希望将其表示为二维数组（其中已绘制的位置为 1，未绘制的位置为 0）。然后，您可以将此二维数组转换为`n x n`元素。神经网络的输出将是一个包含四个元素的向量，每个元素代表一条线、圆、正方形或三角形。然后，你将使用随机扰动的图像训练这个神经网络，直到你最终得到一个神经网络，它可以识别具有低于某个错误阈值的错误的输入。这实际上与识别手写数字非常相似。

其他方式包括：

*   [塑造上下文](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/shape/sc_digits.html)。
*   [k-均值聚类](http://en.wikipedia.org/wiki/K-means_clustering)
*   [支持向量机](http://en.wikipedia.org/wiki/Support_vector_machine)

# javascript - 使用滑块更新流动图表

> ID：16086293
> 
> 赞同：0
> 
> 时间：2013-04-18T14:53:44.750
> 
> 标签：javascript, jquery, flot

嗨，我有两个脚本，想制作其中一个。我将滑块的值放入图表中，但如果我使用滑块，图表不会进行更改。我尝试了不同的 plot.draw(); 但我没有找到可行的解决方案。

我应该做什么？你能帮我吗？

```
$(function () {

    /*--------------------------------------------------
    Plugin: Slider
    --------------------------------------------------*/

    /* Increment Slider */
    $( "#incrementSlider" ).slider({
        range: "min",
        value:1500,
        min: 0,
        max: 10000,
        step: 100,
        slide: function( event, ui ) {
            $( "#incrementAmount" ).text ("TXT: " +  ui.value + "€");

        }
    });

    $( "#incrementAmount" ).text ( "TXT: " + $( "#incrementSlider" ).slider( "value" ) + "€" );

    var ds = [];
    var data = [];

    ds.push ([[1,$( "#incrementSlider" ).slider( "value" )]]);
    ds.push ([[1,$( "#incrementSlider" ).slider( "value" ) - $( "#incrementSlider" ).slider( "value" ) / 100 * 19,5]]);
    ds.push ([[1,$( "#incrementSlider" ).slider( "value" ) / 100 * 19,5]]);

    data.push ({
        data: ds[0], 
        label: 'Graph1', 
        bars: {
        barWidth: 0.15, 
            order: 1
        }
    });
    data.push   ({
        data: ds[1], 
        label: 'Graph2', 
        bars: {
        barWidth: 0.15, 
            order: 2
        }
    });
    data.push ({
        data: ds[2], 
        label: 'Graph3', 
        bars: {
        barWidth: 0.15, 
            order: 3
        }
    });

    Charts.vertical ('#vertical-chart', data);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:53:12.557

plot.draw() 不会重置数据或缩放轴，重新绘制整个图表会更容易（在性能方面你不会注意到差异）

# windows-phone-7 - windows phone 7 在 https 上收不到脚本和 js 文件

> ID：16086294
> 
> 赞同：0
> 
> 时间：2013-04-18T14:53:47.557
> 
> 标签：windows-phone-7, jquery-mobile, https

无法解决我遇到的关于 windows phone jquery mobile https 和 asp.net mvc 2 的问题。我的本地主机上有一个 asp.net mvc 2 应用程序。有些页面需要 https 连接，所以当我使用我的 windows 手机浏览页面时一切都很好（jquery mobile 呈现正常），直到我接受 https 消息并转到 https 页面然后它显示所有没有 javascript 和 css 的 html 内容（白色背景和黑色文本，jquery mobile 不工作，隐藏的 div 现在可见等等）。似乎 windows phone 在这个特定的场景中阻止了 https 上的文件。很奇怪的问题，尤其是在 Iphone 上一切正常。无论是 http 还是 https，Iphone 都能很好地呈现一切。我不会尝试粘贴任何代码，因为我不知道从哪里开始，并且该应用程序太大而无法粘贴代码片段。只是想知道是否有人有类似的问题，或者有任何想法如何克服这个问题。

谢谢。

编辑：通过搜索论坛，我偶然发现了服务器上的自签名证书问题并使用 windows phone 访问页面，不知道这是否是确切的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:23:49.277

我想我找到了解决问题的方法，因为我认为我需要将相同的自签名证书添加到我在服务器上生成的手机中。在 iphone 上不是必需的，但出于某种原因 Windows Phone 需要它。

# html - 如何在其中使用 iframe 标记时减少加载 jsp 页面的时间？

> ID：16086297
> 
> 赞同：1
> 
> 时间：2013-04-18T14:53:51.077
> 
> 标签：html, jsp, jsp-tags

我有一个 jsp 页面，我在其中使用 iframe 填充另一个 jsp 页面，现在的问题是当页面（主页）被加载之后，我正在使用 iframe 的 div 被加载，不幸的是该页面需要时间来加载所以它显示在那个 div 上空白了一段时间。那么任何人都可以告诉我在加载 iframe 时应该如何加载我的页面（主页）吗？

```
<body>
        <p>welcome to stcak</p>
        <div id="pageId">
            <iframe src="innerPage.jsp" frameborder="0" width="1000" height="510"></iframe>
        <div>
        </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:09:37.297

我想你是在问如何加载你的主页，然后加载你的 iframe。如果是这种情况，那么您可以使用一些简单的 ajax。在这种情况下，我使用 jQuery 在加载了主页的其余部分后设置 iframe 的源。

这样你的主页就会加载，一旦完成，你就可以告诉 iframe 加载。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script src="jquery-1.9.0.min.js"></script>
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){ 
$('#myIframe').attr('src','innerPage.jsp');
});
//]]>
</script>
</head>
<body>
<p>welcome to stack</p>
<div id="pageId">
    <iframe src="" id="myIframe" frameborder="1" width="1000" height="510"></iframe>
</div>
<p>content that should display prior to iframe load...</p>
</body>
</html> 
```

# c - gettimeofday 的奇怪行为

> ID：16086301
> 
> 赞同：0
> 
> 时间：2013-04-18T14:54:04.230
> 
> 标签：c, variables, global-variables

我想获得一个线程进入临界区和另一个线程进入 ARM CortexA8 上的同一临界区之间的经过时间。为此，我一直在 C 中使用函数 gettimeofday()。

```
 void *Thread1_Routine ();     //Create the Semaphore
void *Thread2_Routine (); //Wait for Thread1_Routine's Semaphore
void configured_malloc_behavior();
void Calc_Dif_Time (struct timeval *time1,struct timeval *time2);

//Definition to represent the time
typedef struct te_tim96
{
    int64_t sec;
    int32_t usec;
}te_tim96;
//Variables to save the time
struct timeval t1,t2;
//Variable to control the order enter Critical zone
char lock=0;
int count=0;

//Variable to make the create the mutex
pthread_mutex_t mutex;

int main (void)
{
    //Variables define threads
    pthread_t threadadd1, threadadd2;
    pthread_attr_t attr1, attr2;
    struct sched_param p1, p2;

    //Configured malloc behavior
    configured_malloc_behavior();

    //Init the Thread
    pthread_mutex_init(&mutex, NULL);

    //Define Threads
    pthread_attr_init(&attr1);
    pthread_attr_init(&attr2);
    //Thread1
    pthread_attr_setschedpolicy(&attr1, SCHED_FIFO);
    p1.sched_priority= 98; //This is lower than Thread2
    pthread_attr_setschedparam(&attr1, &p1);
    //Thread2
    pthread_attr_setschedpolicy(&attr2, SCHED_FIFO);
    p2.sched_priority= 99;
    pthread_attr_setschedparam(&attr2, &p2);
//End define Threads

//Init the gpio63 as Output
    do Stuff()  

//Create the threads                                            
    pthread_create(&threadadd1,&attr1,&Thread1_Routine, NULL);
    pthread_create(&threadadd2,&attr2,&Thread2_Routine, NULL);

//Wait to end the Threads ()
    pthread_join(threadadd1, NULL);
    pthread_join(threadadd2, NULL);
    return 0;
}

//Thread Producer
void *Thread1_Routine (void)
{
//Variable to write in gpio/value
char value=1;
    while (count<MAXCOUNT)
    {
        sleep (3);
        pthread_mutex_lock(&mutex);
        lock=lock+1;    //Increment variable lock to indicate that the Thread Producer was done.
        gettimeofday(&t1, NULL);
        pthread_mutex_unlock(&mutex);
    }
    pthread_exit(NULL);
}

//Thread Consumer
void *Thread2_Routine (void)
{
//Variable to write in gpio/value
char value=0;
    while (count<MAXCOUNT)
    {
    //Wait for the semaphore is free!!!!!
        while (lock=0);
        pthread_mutex_lock(&mutex);
        lock=lock-1;    //Decrement variable lock to indicate that the Thread Producer was done.
        gettimeofday(&t2, NULL);
        Calc_Dif_Time(&t1, &t2); //Function to calculate the latency and plot it
        pthread_mutex_unlock(&mutex);
        count++; //To incremate the count of how many time goes the thread are made
    }
    pthread_exit(NULL);
}

void Calc_Dif_Time (struct timeval *time1,struct timeval *time2)
{
struct te_tim96 Tmeasure1, Tmeasure2;
double Elapsedtime;
//TmeasureY=tY
Tmeasure1.sec=(*time1).tv_sec;
Tmeasure1.usec=(*time1).tv_usec;
Tmeasure2.sec=(*time2).tv_sec;
Tmeasure2.usec=(*time2).tv_usec;

//Calculate
    //Part in sec to miliseconds
    Elapsedtime=(Tmeasure2.sec-Tmeasure1.sec)*1000;
    //Part in usec to miliseconds
    Elapsedtime+=(Tmeasure2.usec-Tmeasure1.usec)*0.001;

    //Work with the rest of the division to convert usec to miliseconds
    printf("Time to create the Semaphore[%lld.%6ld] Time to take the Semaphore[%lld.%6ld] Elapsed Time [%f ms]\n", Tmeasure1.sec, Tmeasure1.usec, Tmeasure2.sec, Tmeasure2.usec, Elapsedtime);
    Elapsedtime=0; //Reset Elapsedtime to the next measure
    } 
```

该程序没有错误，但是当我执行它时，我的问题是控制台显示以下结果：

> ./R_T_Measure4
> 
> 是时候创建 Semaphore[0\. 0]获取信号量的时间[4878.153276]经过的时间[4878153.276000 ms]
> 
> 是时候创建 Semaphore[0\. 0]获取信号量的时间[4878.153886]经过的时间[4878153.886000 ms]

这个结果显示了 t1 变量可能没有很好地指向或重新启动。但我不知道在这种情况下我忽略了，因为 t2 效果很好。

任何帮助将不胜感激

-问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:04:57.650

您的`while`循环没有等待锁被释放。当你这样做时`while (lock=0);`，它总是会返回`0`，你会立即结束你的循环，它也会弄乱你的锁定，因为你正在设置你的`lock`变量。你应该使用`while (lock == 0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:03:34.697

您总是`Calc_Dif_Time`从线程 2 调用，因此如果线程 2 在线程 1`t1`未初始化之前获得锁

# sql - 计算除连续天之外的所有行的差异？

> ID：16086304
> 
> 赞同：1
> 
> 时间：2013-04-18T14:54:10.157
> 
> 标签：sql, sql-server, join

我有一张如下表。我想根据以下计算连续行之间的日期差异（以秒为单位）：

*   如果日期相差超过一天，那么我们继续计算差异
*   如果日期相差超过一天，并且第二个日期的值为 84600 的连续天数，那么我想先合并日期，然后再计算差异

我目前正在做一个自加入来处理第一种情况，但不确定是否有处理第二种情况的好方法。有什么建议吗？

下面还举了一个例子：

```
CREATE TABLE #TEMP(Person VARCHAR(100), StartTime Datetime, TotalSeconds INT)

INSERT INTO #TEMP VALUES('A',   '2013-02-20',   49800); -- We want to take the difference with the next row in this case
INSERT INTO #TEMP VALUES('A',   '2013-02-25',   3000); -- Before taking the difference, I want to first merge the next four rows because 5th March is followed by three days with the value 86400
INSERT INTO #TEMP VALUES('A',   '2013-03-05',   2100); 
INSERT INTO #TEMP VALUES('A',   '2013-03-06',   86400);
INSERT INTO #TEMP VALUES('A',   '2013-03-07',   86400);
INSERT INTO #TEMP VALUES('A',   '2013-03-08',   86400);
INSERT INTO #TEMP VALUES('A',   '2013-03-09',   17100);
INSERT INTO #TEMP VALUES('B',   '2012-04-24',   22500);
INSERT INTO #TEMP VALUES('B',   '2012-04-26',   600);
INSERT INTO #TEMP VALUES('B',   '2012-04-27',   10500);
INSERT INTO #TEMP VALUES('B',   '2012-04-29',   41400);
INSERT INTO #TEMP VALUES('B',   '2012-05-04',   86100);

SELECT *
FROM #TEMP

DROP TABLE #TEMP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:11:50.933

下面处理第二种情况：

```
select Person, MIN(StartTime) as StartTime, MAX(StartTime) as maxStartTime
from (SELECT *,
             dateadd(d, - ROW_NUMBER() over (partition by person order by StartTime), StartTime) as thegroup
      FROM #TEMP t
     ) t
group by Person, thegroup 
```

它将一个人的所有时间段分组，连续的日期合并为一个时间段（具有开始时间和结束时间）。诀窍是分配一个序列号，使用`row_number()`然后从`StartTime`. 对于一组连续的日期，这种差异是恒定的——因此外部`group by`.

您可以使用`with`语句将其放入查询中，然后在连续行之间获得所需的差异。

# mysql - 无法在 ruby on rails 中执行编辑操作

> ID：16086313
> 
> 赞同：0
> 
> 时间：2013-04-18T14:54:28.993
> 
> 标签：mysql, ruby-on-rails

我是 ruby​​ on rails 的新手，我刚刚创建了一个小项目，用于添加、更新和删除 mysql db 中的记录

我能够成功地从 ruby​​ 应用程序的 mysql db 添加和删除记录

但问题只是当我尝试更新现有记录时

我的代码如下，

# 控制器：

```
class BookController < ApplicationController
def list
      @books = Book.find(:all)
   end
   def show
      @book = Book.find(params[:id])
   end
   def new
      @book = Book.new
      @subjects = Subject.find(:all)
   end
   def create
      @book = Book.new(params[:book])
      if @book.save
            redirect_to :action => 'list'
      else
            @subjects = Subject.find(:all)
            render :action => 'new'
      end
   end
   def edit
      @book = Book.find(:all)

      @subjects = Subject.find(:all)
   end
   def update
      @book = Book.find(params[:id])
      if @book.update_attributes(params[:book])
         redirect_to :action => 'show', :id => @book
      else
         @subjects = Subject.find(:all)
         render :action => 'edit'
      end
   end
   def delete
      Book.find(params[:id]).destroy
      redirect_to :action => 'list'
   end
   def show_subjects
      @subject = Subject.find(params[:id])
   end
end 
```

# 列表 HTML：

```
<% if @books.blank? %>
<p>There are not any books currently in the system.</p>
<% else %>
<p>These are the current books in our system</p>
<ul id="books">
<% @books.each do |c| %>
<li>
<%= link_to c.title, {:action => 'show', :id => c.id} -%>

<b><%= link_to "edit",  {:action => 'edit', :id => c.id} %></b>

<b> <%= link_to "Delete", {:action => 'delete', :id => c.id},
:confirm => "Are you sure you want to delete this item?" %></b>
</li>
<% end %>
</ul>
<% end %>
<p><%= link_to "Add new Book", {:action => 'new' }%></p>

Edit HTML:
=========
<h1>Edit Book Detail</h1>
<%= form_tag(:action=> "update") do%>

<p><label for="book_title">Title</label>:
<%= text_field 'book', 'title' %></p>
<p><label for="book_price">Price</label>:
<%= text_field 'book', 'price' %></p>
<p><label for="book_subject">Subject</label>:
<%= collection_select(:book, :subject_id,
                         @subjects, :id, :name) %></p>
<p><label for="book_description">Description</label><br/>
<%= text_area 'book', 'description' %></p>
<%= submit_tag "Save changes" %>
<%end %>
<%= link_to 'Back', {:action => 'list' } %> 
```

当我尝试从 URL 编辑记录时，出现以下异常`http://localhost:3000/book/edit/5`，

```
Showing C:/app/app/views/book/edit.html where line #5 raised:

undefined method `title' for #<Array:0x33315c0>
Extracted source (around line #5):

2: <%= form_tag(:action=> "update") do%>
3: 
4: <p><label for="book_title">Title</label>:
5: <%= text_field 'book', 'title' %></p>
6: <p><label for="book_price">Price</label>:
7: <%= text_field 'book', 'price' %></p>
8: <p><label for="book_subject">Subject</label>: 
```

顺便说一句，我正在使用 rails3、ruby1.2 和 mysql5.5。

由于我处于学习曲线中，如果有人可以在这个问题上帮助我，那将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:06:10.753

出于某种原因，当该`edit`方法的通常意图是编辑其中一个时，您正在加载所有书籍记录。

为了解决这个问题，你应该定义一个`before_filter`处理加载记录的钩子：

```
class BookController < ApplicationController
  # Set a handler for loading the book for most actions, except those
  # where loading a single book is not relevant.
  before_filter :load_book, :except => [ :index, :new, :create ]

  def edit
    @subjects = Subject.find(:all)
  end

  def update
    # Call the update_attributes method that will throw an exception if
    # an error occurs.
    @book.update_attributes!(params[:book])

    redirect_to :action => 'show', :id => @book

  rescue ActiveRecord::RecordInvalid
    # This exception is triggered if there was an error saving the record
    # because of a validation problem.

    # Trigger 'edit' action
    edit
    # Render as if on 'edit' page
    render :action => 'edit'
  end

protected
  def load_book
    @book = Book.find(params[:id])
  end
end 
```

需要注意的是，任何时候调用模型中的任何一个`find(:all)`或`all`在模型上调用时，都存在耗尽所有系统内存并使应用程序和运行它的服务器崩溃的风险。除非您可以确定记录的数量很少，否则分页是绝对必要的。

使用 a`before_filter`可以更轻松地将各种冗余`find`调用合并到一个位置，并且可以使错误处理更简单。

# r - 如何用 sapply 循环一个函数？

> ID：16086317
> 
> 赞同：0
> 
> 时间：2013-04-18T14:54:39.607
> 
> 标签：r, function, sapply

我想计算二次方程的不同 y 值的根。但是当我运行以下代码时出现我不明白的错误。如果 y 只是一个数值，而不是向量 c(0.6,0.4,0.9)，它可以工作。我错误地使用 sapply 还是将变量传递给错误的函数？

```
# Paramters for quadratic poly
a<-0.875
b<-0.3779
c<-0.098
y<- c(0.6,0.4,0.9)

# quadratic function
fun<-function(x) c-y+b*x+a*x^2

# Finding root in specific interval function
root<- function (x) uniroot(fun,c(0,2))$root

# Finding roots for a list of y values
res<-sapply(y,root) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:02:31.803

例如，您可以这样做：

```
 sapply(y,function(y) uniroot(fun,c(0,2),y=y,c=c,a=a,b=b)) 
```

# c# - 计算结束日期给定开始日期和持续时间（以天为单位）

> ID：16086320
> 
> 赞同：1
> 
> 时间：2013-04-18T14:54:45.247
> 
> 标签：c#, asp.net, oracle, date-arithmetic

我正在使用 oracle 中的存储过程开发 ac#.net 解决方案，该解决方案根据提供的开始日期和周末持续时间计算结束日期。

即开始日期：01/3/2013 转发天数：10

开始日期 = (05/5/2011) - 10 天（包括周末）

开始日期 = 06/02/2013

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:56:36.677

使用`AddDays`方法`DateTime`

```
DateTime startDate = new DateTime(2013,3,1);
var endDate = startDate.AddDays(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:57:22.777

您可以在 Oracle 中通过多种方式执行此操作。我建议这种`INTERVAL`方式，因为它是标准的：

```
SELECT yourdate + INTERVAL '10' DAY, ... 
```

周围的单引号`10`是必需的。

“旧”方法是在日期上加 10；Oracle 将其视为天数：

```
SELECT yourdate + 10, ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:58:11.887

```
//DateTime start_date = ...
DateTime end_date = start_date.AddDays(10); 
```

# sql - SQL SERVER：检查变量是否为空，然后为 Where 子句分配语句

> ID：16086322
> 
> 赞同：11
> 
> 时间：2013-04-18T14:54:50.297
> 
> 标签：sql, sql-server, sql-server-2008, tsql, case

我正在尝试在 sql 的 WHERE 子句中实现类似下面的内容。

```
if (@zipCode ==null)
begin
([Portal].[dbo].[Address].Position.Filter(@radiusBuff) = 1)   
end
else if(@zipCode !=null)
begin
([Portal].[dbo].[Address].PostalCode=@zipCode )
end 
```

我尝试了以下方法：

```
WHERE ((@zipCode IS NOT NULL AND ([Portal].[dbo].[Address].PostalCode=@zipCode)) OR (@zipCode IS NULL AND ([Portal].[dbo].[Address].Position.Filter(@radiusBuff) = 1))) 
```

这是错误的。任何人都可以帮助制定确切的陈述。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T16:16:52.317

当 COALESCE 没有帮助时，is null 是我用于此类事情的语法。

尝试：

```
if (@zipCode is null)
  begin
    ([Portal].[dbo].[Address].Position.Filter(@radiusBuff) = 1)   
  end
else 
  begin
    ([Portal].[dbo].[Address].PostalCode=@zipCode )
  end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-18T15:46:59.997

Isnull() 语法是为这种事情内置的。

```
declare @Int int = null;

declare @Values table ( id int, def varchar(8) )

insert into @Values values (8, 'I am 8');

-- fails
select *
from @Values
where id = @Int

-- works fine
select *
from @Values
where id = isnull(@Int, 8); 
```

对于您的示例，请记住，您可以将范围更改为另一个用于复杂布尔逻辑的不同变量的谓词。唯一需要注意的是，如果您需要检查不同的数据类型，则需要对其进行不同的转换。因此，如果我添加另一行但希望指定 8 的 int 以及类似于“重复”的文本的引用，我可以再次引用回到第一个变量的“isnull”但返回完全不同的结果数据类型对不同领域的不同参考。

```
declare @Int int = null;

declare @Values table ( id int, def varchar(16) )

insert into @Values values (8, 'I am 8'), (8, 'I am 8 repeat');

select *
from @Values
where id = isnull(@Int, 8)
and def like isnull(cast(@Int as varchar), '%repeat%') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:21:51.720

尝试案例陈述

```
WHERE
CASE WHEN @zipCode IS NULL THEN 1
ELSE @zipCode
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-25T10:28:44.730

`is null`可用于检查`null`数据是否来自查询，如下例所示：

```
 declare @Mem varchar(20),@flag int
select @mem=MemberClub from [dbo].[UserMaster] where UserID=@uid
if(@Mem is null)
begin
    set @flag= 0;
end
else
begin
    set @flag=1;
end
return @flag; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-04T06:21:26.203

尝试以下操作：

```
if ((select VisitCount from PageImage where PID=@pid and PageNumber=5) is NULL)
begin
    update PageImage
    set VisitCount=1
    where PID=@pid and PageNumber=@pageno
end 
else
begin
    update PageImage 
    set VisitCount=VisitCount+1
    where PID=@pid and PageNumber=@pageno
end 
```

# asp.net - 使用 SqlBulkCopy SqlRowsCopied 更新标签

> ID：16086324
> 
> 赞同：0
> 
> 时间：2013-04-18T14:55:02.683
> 
> 标签：asp.net, sql, vb.net, sqlbulkcopy

我有一个简单的 Web 应用程序，它从 CSV 文件中读取记录并将它们存储在数据库表中。然后我`SqlBulkCopy`使用批量将记录复制到 SQL 数据库中。插入一切都很好。我正在尝试使用`OnSqlRowsCopied`and给用户一些反馈`NotifyAfter`。目标是更新包含在 an 中的标签，`UpdatePanel`以显示在当前`NotifyAfter`间隔复制的记录数。但是，标签在完成之前不会更新`SqlBulkCopy`。我可以看到`s_OnSqlRowsCopied`事件正在使用`Debug.WriteLine`. 标签不会更新的原因是什么，我该如何克服这个问题？

# 代码背后

```
Imports System.Data.SqlClient

Public Class WebForm1
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Dim filePath As String
Dim rowsCopied As String

Public Sub btnGetCSV_Click(sender As Object, e As EventArgs) Handles btnGetCSV.Click

    filePath = System.IO.Path.GetFullPath(fileUpload1.PostedFile.FileName)
    lblInfo.Text = filePath

End Sub

Protected Sub btnToSQL_Click(sender As Object, e As EventArgs) Handles btnToSQL.Click

    Dim cs As String = System.Web.Configuration.WebConfigurationManager.ConnectionStrings("csMediaPortal").ConnectionString
    CopyData(CSVtoDataTable(lblInfo.Text.ToString()), cs)

End Sub

Private Function CSVtoDataTable(filePath As String) As DataTable

    Dim dt As DataTable = Nothing
    Dim sourcePath As String = String.Empty
    Dim csvFile As String = String.Empty
    Dim conString As String = String.Empty
    Dim conn As OleDb.OleDbConnection = Nothing
    Dim adapter As OleDb.OleDbDataAdapter = Nothing
    Dim selString As String = String.Empty

    Try
        sourcePath = System.IO.Path.GetDirectoryName(filePath)
        csvFile = System.IO.Path.GetFileName(filePath)
        conString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & sourcePath & ";Extended Properties=""text;HDR=No;FMT=FixedLength"""
        conn = New OleDb.OleDbConnection(conString)
        selString = "Select * From " & csvFile
        adapter = New OleDb.OleDbDataAdapter(selString, conn)
        dt = New DataTable(System.IO.Path.GetFileNameWithoutExtension(filePath))
        conn.Open()
        adapter.Fill(dt)
        conn.Close()
    Catch ex As Exception
        lblInfo.Text = ex.Message
    Finally
        adapter.Dispose()
        conn.Dispose()
    End Try

    Return dt

End Function

Protected Sub CopyData(sourceTable As DataTable, cs As String)

    Using s As SqlBulkCopy = New SqlBulkCopy(cs, SqlBulkCopyOptions.UseInternalTransaction)

        s.DestinationTableName = "test"
        s.BatchSize = 1000

        Try
            AddHandler s.SqlRowsCopied, AddressOf s_OnSqlRowsCopied

            s.NotifyAfter = 900
            s.WriteToServer(sourceTable)

        Catch ex As Exception

            DirectCast(DirectCast(HttpContext.Current.Handler, Page).FindControl("lblInfo"), Label).Text = "Commit Error: " & ex.Message

        End Try

        s.Close()

    End Using
End Sub

Protected Sub s_OnSqlRowsCopied(sender As Object, e As SqlRowsCopiedEventArgs)

    Me.lblProgress.Value = e.RowsCopied.ToString()
    Me.UpdatePanel1.Update()
    Debug.WriteLine(e.RowsCopied)

End Sub

End Class 
```

# 网页表格

```
 <%@ Page Language="vb" CodeBehind="WebForm1.aspx.vb" Inherits="CSVUpload.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <div>
            <asp:FileUpload ID="fileUpload1" runat="server" />
            <asp:Button ID="btnGetCSV" runat="server" Text="Post" OnClick="btnGetCSV_Click" />
            <asp:Label ID="lblInfo" runat="server" Text="Label"></asp:Label>
        </div>

        &nbsp;<asp:Button ID="btnToSQL" runat="server" Text="Insert To SQL" OnClick="btnToSQL_Click" />
        <div>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <input runat="server" type="text" id="lblProgress" value="0" />

                </ContentTemplate>
            </asp:UpdatePanel>

        </div>
    </form>
</body>
</html> 
```

# sql - 在数据资源管理器中获取非整数结果

> ID：16086325
> 
> 赞同：0
> 
> 时间：2013-04-18T14:55:02.900
> 
> 标签：sql, integer, decimal, dataexplorer

[Stack Exchange 数据资源管理器](https://data.stackexchange.com/)允许对 Stack Exchange 数据库进行 SQL 查询。以下[查询](https://data.stackexchange.com/jewish%20life%20and%20learning/query/109122)——</p>

```
select
  month(CreationDate) month,
  year(CreationDate) year,
  sum(case when lower(left(Title,2))='wh' then 1 else 0 end)/count(*) wh,
  (select sum(Score)/count(*)
   from Posts u
   where
     month(CreationDate)=month(t.CreationDate) and
     year(CreationDate)=year(t.CreationDate) and
     lower(left(Title,2))='wh' and
     PostTypeId=1 -- question
  ) wh_score,
  sum(Score)/count(*) score,
  (select sum(AnswerCount)/count(*)
   from Posts u
   where
     month(CreationDate)=month(t.CreationDate) and
     year(CreationDate)=year(t.CreationDate) and
     lower(left(Title,2))='wh' and
     PostTypeId=1 -- question
  ) wh_answers,
  sum(AnswerCount)/count(*) answers
from Posts t
where PostTypeId=1 -- question
group by month(CreationDate), year(CreationDate)
; 
```

—[由](https://stackoverflow.com/a/16076790)[Scorpi0](https://stackoverflow.com/users/128662/scorpi0)提供 — 在结果中产生所有整数值：所有内容都被舍入或截断（我不知道是哪个）。（这在列中特别烦人，`wh`因此每个值都是`0`.）有没有办法强制小数或值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:04:55.600

像很多语言一样，当你做 1/2 时，它执行 1 除以 2 并返回商，所以这里是 0。

```
n/m => n = m * q + r
1/2 => 1 = 2 * 0 + 1 
```

让我们务实一点：只需乘以小数，如下所示：

```
(sum(AnswerCount) * 1.0)/count(*) 
```

你会得到十进制而不是整数。

# flash - 单击 swf 文件不适用于 IE

> ID：16086329
> 
> 赞同：0
> 
> 时间：2013-04-18T14:55:11.847
> 
> 标签：flash, internet-explorer-10

我创建了一个带有 swf 对象的 html 页面。我为该对象的父 div 绑定单击事件。Click 在 FireFox 中有效，但在 IE10 中单击无效，只有双击触发 click 事件。在 IE10 中让单击对 swf 对象或其父 div 起作用的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:59:20.020

我认为这是一个与专利相关的问题。对你来说不是问题。看看这个链接。

forums.adobe.com/thread/11976

# c++ - 投射 ssize_t 或 size_t

> ID：16086331
> 
> 赞同：12
> 
> 时间：2013-04-18T14:55:17.150
> 
> 标签：c++, casting, size-t

在我的项目中使用的源文件中，有`ssize_t`和`size_t`变量之间的比较：

```
ssize_t sst;
size_t st;

if(sst == st){...} 
```

我想摆脱警告：

```
warning: comparison between signed and unsigned integer expressions 
```

但我不确定，我应该将哪个变量转换为另一个变量？

```
if((size_t)sst == st){...} 
```

或者

```
if(sst == (ssize_t)st){...} 
```

什么更安全、更好、更清洁？谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-18T15:13:29.877

这个问题没有一个正确的答案。有几个可能的答案，这取决于您对这些变量可能采用的值*的先验知识。*

*   如果您知道这`sst`是非负数，那么您可以安全地`sst`转换为`size_t`，因为这不会改变值（顺便说一下，如果您根本没有转换，就会发生这种情况）。

*   如果`sst`可能是负数，但您知道它`st`永远不会大于`SSIZE_MAX`，那么您可以安全地`st`转换为`ssize_t`，因为这不会改变值。

*   如果`sst`可能是负数，并且`st`可能大于`SSIZE_MAX`，那么两种转换都不正确；任何一个都可能更改值，从而导致不正确的比较。相反，您将执行以下操作`if (sst >= 0 && (size_t)sst == st)`。

如果您*不确定*前两种情况之一是否适用，请选择第三个选项，因为它在所有情况下都是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:06:01.407

只要两个值都在 的正可表示范围内，任何一个都可以正常工作`ssize_t`。

如果任何一个值*都不*是，您最终可能会遇到麻烦 - 在测试是否相等之前检查这些情况：

```
if ((sst >= 0) && (st <= SSIZE_MAX) && (sst == (ssize_t)st))
{
  ...
} 
```

（我相信 C++ 的人会建议你完全避免使用 C 风格的演员——我毫不怀疑有人会发表评论或回答，并让你知道在 C++ 中这样做的正确方法。）

# ruby-on-rails - 如何用 Capybara 进行部分测试？

> ID：16086332
> 
> 赞同：2
> 
> 时间：2013-04-18T14:55:17.613
> 
> 标签：ruby-on-rails, rspec, capybara

在普通视图规范文件中，我可以使用 Capybara 测试视图。

```
require 'spec_helper'

describe 'site/login' do
  subject { page }
  before { visit login_path }
  it { should have_selector('#login form') }
end 
```

使用 Rspec 我可以测试部分。

```
require 'spec_helper'

describe 'site/sidebar' do
  it "displays the login form" do
    render :partial => "site/sidebar"
    expect(rendered).to match /form/
  end
end 
```

同样使用 Capybara 我可以测试视图

```
require 'spec_helper'

describe 'site/sidebar' do
  let!(:rendered) { render :partial => "site/sidebar" }
  let(:page) { Capybara::Node::Simple.new(rendered) }
  it { page.should have_selector('form') }
end 
```

最后一个似乎可以工作，但感觉有点hacky。Capybara 中是否存在诸如此类的方法`visit_partial`？我以为我可以找到类似的东西，`Capybara::Driver::Base`但我找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:09:36.743

你的hacky方法对我来说很好。如果您有很多部分，您可以使用共享上下文：

```
shared_context "Rendered partial" do
  let!(:rendered) { render :partial => partial }
  let(:page) { Capybara::Node::Simple.new(rendered) }
  subject { page }
end

describe "My partial" do
  let(:partial) { "site/sidebar" }
  include_context "Rendered partial"
  it { should have_selector('form') }
end 
```

# c++ - 在后台运行一个 gui 程序

> ID：16086336
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:55:24.897
> 
> 标签：c++, windows, visual-studio, user-interface, service

我创建了一个将运行另一个程序的 Windows 服务。但现在我想运行一个有 gui 但在后台运行的程序，所以我不希望 gui 可见。这是我用于[服务的代码](http://code.msdn.microsoft.com/windowsdesktop/CppWindowsService-cacf4948)

**但我无法编辑 gui 程序**

有没有办法从服务程序将 gui 设置为隐藏或设置 visible = false ？

该服务是使用 Visual Studio 在 C++ 中创建的 Windows 服务

我使用 CreateProcess 来启动 exe 文件，这是我用来从服务运行程序的代码：

```
path = "C:\MyDirectory\MyFile.exe";

STARTUPINFO info={sizeof(info)};
PROCESS_INFORMATION processInfo;
if (CreateProcess(path, cmd, NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo))
{
    ::WaitForSingleObject(processInfo.hProcess, INFINITE);
    CloseHandle(processInfo.hProcess);
    CloseHandle(processInfo.hThread);
} 
```

是否可以在不编辑程序本身的情况下隐藏 gui？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:17:28.690

最接近的可能是设置`wShowWindow`STARTUPINFO 结构的成员。即使这样，它也只有在应用程序`nCmdShow`尊重`WinMain`.

```
STARTUPINFO info = {0};

info.dwFlags = STARTF_USESHOWWINDOW;
info.wShowWindow = SW_HIDE;

if (CreateProcess(path, cmd, NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo))
{
    //...
} 
```

# sencha-touch-2 - 在 Sencha Touch 2.2.0 上无法启用默认浏览器滚动

> ID：16086341
> 
> 赞同：3
> 
> 时间：2013-04-18T14:55:33.967
> 
> 标签：sencha-touch-2

新的 Sencha Touch 2.2.0 有一个关于可滚动的新配置参数，以不使用 Ext.scroll.Scroller，但实际上这不起作用。

我正在使用它来激活容器上的溢出滚动：

```
{
    scrollable: null,
    style: 'overflow:auto; -webkit-overflow-scrolling: touch;'
} 
```

如何使用本机滚动？

为什么我需要它？因为我需要使用galaxy-tab-1，所以新的Ext.scroll.Scroller 比2.1.1 版本快，但是这个平板电脑上的渲染速度很慢，新的Ext.scroll.Scroller 正在尝试渲染40 fps，平板电脑正在缓慢显示。

实际上 setFps() 在此版本中不起作用，例如：

```
Econtainer.getScrollable().getScroller().setFps(10); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:06:16.930

默认情况下，新的 Ext.util.Translatable 具有缓慢的 PreferredTranslationMethod。

您可以使用：

```
scrollable: {
    direction: 'both',
    translatable: {
        translationMethod: 'scrollposition'
    }
}, 
```

或者

```
scrollable: {
    direction: 'both',
    translatable: {
        translationMethod: 'csstransform'
    }
}, 
```

或者

```
scrollable: {
    direction: 'both',
    translatable: {
        translationMethod: 'cssposition'
    }
}, 
```

# android - 如何在android中建立蓝牙连接？

> ID：16086343
> 
> 赞同：1
> 
> 时间：2013-04-18T14:55:36.703
> 
> 标签：android, bluetooth

我想连接到这个设备：[http ://www.rhydolabz.com/index.php?main_page=product_info&products_id=479](http://www.rhydolabz.com/index.php?main_page=product_info&products_id=479)

我尝试使用`BluetoothChat`示例中的类。但它没有用。它说`unable to connect device`。

然后我尝试在 try catch 中使用以下代码

```
 // Create a Socket connection: need the server's UUID number
Method m = d.getClass().getMethod("createRfcommSocketToServiceRecord", new Class[] { int.class });
socket = (BluetoothSocket) m.invoke(d, 1);
socket.connect();
Log.d("WCAM", ">>Client connectted");
inputStream = socket.getInputStream();
outputStream = socket.getOutputStream();
socket.close();
Toast.makeText(this, "Bluetooth is Connected", Toast.LENGTH_LONG).show(); 
```

我收到以下错误

```
04-18 20:45:01.660: W/System.err(6780): java.lang.NoSuchMethodException: createRfcommSocketToServiceRecord [int]
04-18 20:45:01.660: W/System.err(6780):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
04-18 20:45:01.660: W/System.err(6780):     at java.lang.Class.getMethod(Class.java:915)
04-18 20:45:01.660: W/System.err(6780):     at com.xpleria.wirelesscontroller.Login.onStart(Login.java:90)
04-18 20:45:01.660: W/System.err(6780):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
04-18 20:45:01.670: W/System.err(6780):     at android.app.Activity.performStart(Activity.java:4475)
04-18 20:45:01.670: W/System.err(6780):     at android.app.Activity.performRestart(Activity.java:4526)
04-18 20:45:01.670: W/System.err(6780):     at android.app.Activity.performResume(Activity.java:4531)
04-18 20:45:01.670: W/System.err(6780):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
04-18 20:45:01.670: W/System.err(6780):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
04-18 20:45:01.670: W/System.err(6780):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1173)
04-18 20:45:01.670: W/System.err(6780):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 20:45:01.680: W/System.err(6780):     at android.os.Looper.loop(Looper.java:137)
04-18 20:45:01.680: W/System.err(6780):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-18 20:45:01.680: W/System.err(6780):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 20:45:01.680: W/System.err(6780):     at java.lang.reflect.Method.invoke(Method.java:511)
04-18 20:45:01.680: W/System.err(6780):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
04-18 20:45:01.680: W/System.err(6780):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
04-18 20:45:01.680: W/System.err(6780):     at dalvik.system.NativeStart.main(Native Method) 
```

无论如何我可以修改我的代码..？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:33:43.507

几点注意事项：

a) 变量 d 的类别是什么并不明显。我假设它是蓝牙设备

b) 如果我对 1) 的假设是正确的，它找不到方法 createRfcommSocketToServiceRecord(int)，因为实际方法是[createRfcommSocketToServiceRecord(UUID)。](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord%28java.util.UUID%29)

c）我不清楚，为什么要使用反射来获得这种方法。您可以直接在您的对象上调用它。

d) 有一个文档说：“提示：如果您要连接到蓝牙串行板，请尝试使用众所周知的 SPP UUID 00001101-0000-1000-8000-00805F9B34FB。但是，如果您要连接到 Android 对等体那么请生成您自己的唯一 UUID。”。我认为它可能适用于你。

**更新 1**

关于直接使用。

你的代码应该是

```
 d.createRfcommSocketToServiceRecord(someUUID); 
```

因为 createRfcommSocketToServiceRecord 是 BluetoothDevice 的一个方法。

关于UUID。看看这个：

[Android：获取蓝牙设备的uuid](https://stackoverflow.com/questions/4949509/android-obtaining-uuid-of-a-bluetooth-device)

[Android：蓝牙 UUID 如何工作？](https://stackoverflow.com/questions/13964342/android-how-do-bluetooth-uuids-work)

# jquery - 使用jquery将事件附加到表单提交

> ID：16086345
> 
> 赞同：3
> 
> 时间：2013-04-18T14:55:43.427
> 
> 标签：jquery

我们有一个大约 100 个 jsp 页面的大型应用程序。当我们提交表单（使用 javascript）时，光标不会改变。有没有办法动态拦截表单提交并使用 jquery 更改光标？不幸的是，使用命名形式的选择器可能是不可能的。另外，希望通过将函数包含在一个公共 js 文件中来保持所有表单的通用函数。

我尝试了以下代码，但没有奏效。有没有办法有一个类似于我在下面尝试的选择器？

```
function cursorwait(e) {
    document.body.className = 'wait';
}

$(function () {
    var jspform = $('form');
    var fmsubmit = jspform.onsubmit;

    jspform.onsubmit = function () {
        cursorwait();
        if (fmsubmit) {
            fmsubmit.call(jspform);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:58:26.950

```
$('form').submit(function(){
  document.style.cursor = 'wait';
}); 
```

非常原始，但我相信可以满足您的要求。

跟进：

*   `.submit()`是 jQuery 提供的事件绑定器（因此无需尝试使用`onsubmit`并兼容跨浏览器）
*   这只会向提交“添加功能”——它不会干扰、拒绝或以其他方式阻止表单提交（例如，使用客户端验证并且表单失败）——这将需要额外的逻辑来处理这种情况。
*   我将光标样式应用于整个文档，但您可以在同一代码块中轻松添加正文类。

# google-apps-script - 电子表格中的 Google 脚本

> ID：16086351
> 
> 赞同：0
> 
> 时间：2013-04-18T14:55:56.867
> 
> 标签：google-apps-script, google-sheets

有没有办法在 Google Drive 中有一个电子表格，其中脚本可以防止修改/编辑？有谁知道这是否是脚本编辑器中的一个选项？

还有一件事我想问。如何对其 Google 脚本中的代码进行源代码控制？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T14:59:47.683

WRT 隐私/脚本保护：请参阅有关此问题的评论和答案：[如何保护 Google 电子表格中的 Apps 脚本代码？](https://stackoverflow.com/questions/16075446/how-to-protect-the-google-app-script-code-in-google-spreadsheet).

源代码控制？请参阅[备份 Gapps 源](https://stackoverflow.com/questions/14385008/backing-up-gapps-source)。脚本编辑器中的版本跟踪是初级的，所以你应该考虑在外部进行源代码控制——你必须习惯于复制和粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-17T19:49:26.413

不，你不能这样做。

该脚本以文档权限运行。

如果您对文档具有编辑权限，则您也对脚本具有编辑权限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T15:02:40.960

这是 Google 电子表格开发人员指南。

[https://developers.google.com/apps-script/reference/spreadsheet/](https://developers.google.com/apps-script/reference/spreadsheet/)

# c# - 如何在 C# 中使用本地数据库中的数据在文本框中显示列表框项

> ID：16086371
> 
> 赞同：0
> 
> 时间：2013-04-18T14:57:11.053
> 
> 标签：c#, database, textbox, listbox

嗨，我是编程新手，目前正在从事一个项目，该项目允许用户使用文本框将其注册数据输入本地数据库。该代码的工作原理是将项目添加到数据库中，并且在我按下“Show_users”按钮后，它会将它们显示在 listBox_users 列表框中。

我的问题是，当我从 listBox_users 中选择一个名称时，它应该在上部 textBox'es 中显示有关所选用户的数据，我曾经使用我为 listBox_users 创建的事件首先输入数据，但我得到一个“无法从已关闭的数据库中读取数据”的错误。

```
namespace Userform
{
public partial class Form1: Form
{
    SqlCeDataReader rdr;

    public Form1()
    {
        InitializeComponent();
    }

    // Some code between...

    private void button_ShowUsers_Click(object sender, EventArgs e) //code that shows users in listBox
    {

        var dt = new DataTable();
        string connectionString2 = @"Data Source=MyDatabase;Password=xxxxxx;";

        using (var cn = new SqlCeConnection(connectionString2))
        using (var cmd = new SqlCeCommand("Select * From Users", cn))
        {
            cn.Open();

            using (var reader = cmd.ExecuteReader())
            {
                dt.Load(reader);
                var results = (from row in dt.AsEnumerable()
                               select new
                               {
                                   //UserID = row.Field<int>("ID"),
                                   FirstName = row.Field<string>("Firsname"),
                                   LastName = row.Field<string>("Lastname"),
                                   FullName = row.Field<string>("Firstname") + " " + row.Field<string>("Lastname")
                               }).ToList();

                listBox_users.DataSource = results;
                listBox_users.DisplayMember = "FullName";

                rdr = cmd.ExecuteReader();
                }
            }
        }

    //I made an event for the listBox_users:

    private void listBox_users_SelectedIndexChanged(object sender, EventArgs e) 
    //event code that should show listbox selected data in the textBoxes
    {            
        if (listBox_inimesed.SelectedItem != null && rdr != null)
        {
            try
            {
                if (rdr.Read())
                {

                    textBox1_firstname.Text = rdr.GetString(1);
                    textBox2_lastname.Text = rdr.GetString(2);
                    textBox3_email.Text = rdr.GetString(3);
                    textBox4_address.Text = rdr.GetString(4);
                    dateTimePicker1.Value = rdr.GetDateTime(5);
                    richTextBox_info.Text = rdr.GetString(6);
                }
                else MessageBox.Show("Object not found");
            }
            finally
            {
                rdr.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:01:43.853

您正在使用的阅读器所依赖的连接已在 button_ShowUsers_Click 事件中关闭。

尝试跨事件共享连接和 DataReader 不是一个好习惯。这将导致未正确处理的打开连接。更好的做法是在每个事件方法中创建 Connection、Command 和 DataReader。通过使用“使用”语句，它们将在每种方法中正确关闭和处理。您还可以删除类级别变量“rdr”。

```
namespace Userform
{
    public partial class Form1 : Form
    {
        const string connectionString2 = @"Data Source=MyDatabase;Password=xxxxxx;";

        public Form1()
        {
            InitializeComponent();
        }

        // Some code between...

        private void button_ShowUsers_Click(object sender, EventArgs e) //code that shows users in listBox
        {
            var dt = new DataTable();

            using (var cn = new SqlCeConnection(connectionString2))
            using (var cmd = new SqlCeCommand("Select * From Users", cn))
            {
                cn.Open();

                using (var reader = cmd.ExecuteReader())
                {
                    dt.Load(reader);
                    var results = (from row in dt.AsEnumerable()
                                   select new
                                   {
                                       //UserID = row.Field<int>("ID"),
                                       FirstName = row.Field<string>("Firsname"),
                                       LastName = row.Field<string>("Lastname"),
                                       FullName = row.Field<string>("Firstname") + " " + row.Field<string>("Lastname")
                                   }).ToList();

                    listBox_users.DataSource = results;
                    listBox_users.DisplayMember = "FullName";
                }
            }
        }

    //I made an event for the listBox_users:

        private void listBox_users_SelectedIndexChanged(object sender, EventArgs e)
        //event code that should show listbox selected data in the textBoxes
        {
            if (listBox_inimesed.SelectedItem != null)
            {
                using (var cn = new SqlCeConnection(connectionString2))
                using (var cmd = new SqlCeCommand("Select * From Users", cn))
                {
                    cn.Open();

                    using (var reader = cmd.ExecuteReader())
                    {
                        if (reader.Read())
                        {
                            textBox1_firstname.Text = reader.GetString(1);
                            textBox2_lastname.Text = reader.GetString(2);
                            textBox3_email.Text = reader.GetString(3);
                            textBox4_address.Text = reader.GetString(4);
                            dateTimePicker1.Value = reader.GetDateTime(5);
                            richTextBox_info.Text = reader.GetString(6);
                        }
                        else MessageBox.Show("Object not found");
                    }
                }
            }
        }
    }
} 
```

# api - 我的 Netflix API 密钥/应用程序的状态已禁用

> ID：16086375
> 
> 赞同：2
> 
> 时间：2013-04-18T14:57:18.570
> 
> 标签：api, netflix

我知道最近 Netflix[宣布他们不再发布新的公共 API 开发人员密钥](http://developer.netflix.com/blog/read/Changes_to_the_Public_API_Program)，但是我在两个月前拿到了我的密钥，用于开发中的概念验证项目。

我刚刚开始着手实现 Netflix API 数据，并在我的帐户/应用程序信息中注意到状态已禁用。

我对 API 进行的任何调用都会返回“403 Developer Inactive”响应。

我刚刚向 publicapi[at]netflix.com 发送了电子邮件，看看他们是否可以启用它，但我也认为我应该看看是否有人在这里有任何信息，因为 Netflix 建议“开发人员在 StackOverflow 上继续他们的对话，标签为“netflixapi””。

任何信息将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T02:56:35.910

他们不回复电子邮件，因此可以节省您的时间。他们不会发布或重新激活现有密钥。

# css - SCSS 扩展嵌套选择器并覆盖嵌套规则集

> ID：16086377
> 
> 赞同：24
> 
> 时间：2013-04-18T14:57:22.293
> 
> 标签：css, sass

好的，所以我有一个带有嵌套选择器的占位符：

```
%block {
  .title {
    font-size:12px;
  }
} 
```

我想扩展它并添加到`.title`类中：

```
.superblock {
  @extend %block;
  .title {
    font-weight:bold;
  }
} 
```

我想要的答案是这样的：

```
.superblock .title {
  font-size: 12px;
  font-weight: bold; } 
```

然而，我得到的答案是这样的：

```
.superblock .title {
  font-size: 12px; }

.superblock .title {
  font-weight: bold; } 
```

我做错了什么还是这就是它的工作原理？为了澄清我想合并它。如果我直接在 %block 中添加一些东西`.superblock`并像另一个`.superblock2`扩展 %block 一样添加它们，它们会毫无问题地合并。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-18T15:15:57.620

Sass 没有“合并”重复选择器的功能。在 CSS 编译完成后，您需要找到另一个实用程序来执行此操作。

该`@extend`指令不仅仅是一种使用类代替 mixin 的方法（类似于 LESS 样式的 mixin 调用）。`@extend`当您扩展普通类而不是扩展类时，为什么会以这种方式工作变得很清楚：

```
.block {
  font-size:12px;
}

.foo {
    @extend .block;
    font-weight: bold;
} 
```

输出：

```
.block, .foo {
  font-size: 12px;
}

.foo {
  font-weight: bold;
} 
```

使用扩展类只会抑制原始类名的发射。

既然您已经了解了为什么`@extend`会以这种方式工作，*您还想要什么`@extend`优惠吗？* 如果答案是否定的，那么您需要使用 mixin：

```
@mixin block {
    // styles
    .title {
        font-size: 12px;
        @content;
    }
}

.superblock {
    @include block {
        font-weight: bold;
    }
} 
```

输出：

```
.superblock .title {
  font-size: 12px;
  font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:19:47.247

这差不多。SASS 单独生成扩展声明。

而且它没有按选择器对声明进行分组的功能，它不是那么聪明。

但是您不必担心 CSS 的清洁度。现代网络服务器提供 CSS gzipped，所有的重复都将被很好地压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T14:08:43.430

LESS可以做到这一点。但是你会写：

```
.superblock {
  .title {
    .block .title;
  }
} 
```

不确定它是否也适用于@extend。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-09-07T16:42:40.270

你可以使用一个工具，我用它来清理 css [https://github.com/addyosmani/grunt-uncss](https://github.com/addyosmani/grunt-uncss)

“使用 UnCSS 从项目中删除未使用的 CSS 是一项艰巨的任务。”

# sql - 如何在中间初始毫秒访问中删除句点

> ID：16086383
> 
> 赞同：1
> 
> 时间：2013-04-18T14:57:36.030
> 
> 标签：sql, ms-access, ms-access-2010

我有两张桌子，一张桌子需要在另一张桌子上找到匹配项。

假设我有 table1 和 Masterfiles 表。Table1 具有与 Masterfiles 相同的名称字段。

但是 table1 名称字段具有不同的值，因为它只有中间名，而 Masterfiles 有中间名。

现在我想从名为“Gender”的 Masterfiles 中获取另一个字段值，因为 table1 在性别字段上没有值。

该表如下所示：

```
Table1                              Masterfiles

Name             Gender             Name                      Gender
Smith, John E.                      Smith, John Estaw         M
Canard, Donald R                    Canard, Donald Reever     M 
```

由于我在 table1 中有很多记录需要获取性别字段的值，因此我需要以编程方式进行。

目前我有以下代码：

```
Dim db As Database
Dim rs As DAO.Recordset
Dim rs2 As DAO.Recordset

Dim strSQL As String

Set db = CurrentDb

Set rs = db.OpenRecordset("Table1")

Do While Not rs.EOF
    strSQL = "SELECT [Name], Gender FROM Masterfiles WHERE [Name] Like '%" & Me!txtName & "%'"

    Set rs2 = db.OpenRecordset(strSQL)

    If rs2.RecordCount > 0 Then
        rs!Gender = rs2!Gender
    End If
Loop 
```

但是此代码不会得到任何结果，因为 table1 中 Name 字段的某些值在中间首字母中有句点，而其他行没有句点。请参考上面的示例数据。“Smith, John”的中间首字母有句号，而“Canard, Donald”没有句号。

那么如何查询 Masterfiles 并获取 Gender 字段的值并将其放入 table1 性别字段中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:12:36.117

你在 VB 中有名字；最好`.`在搜索之前使用 VB 删除名称末尾的任何内容：

```
Dim searchName as String

If Me!txtName.Substring(Me!txtName.Length - 1,1) = '.' Then
    searchName = Me!txtName.Substring(0,Me!txtName.Length - 1)
Else
    searchName = Me!txtName
End If

strSQL = "SELECT [Name] FROM Masterfiles WHERE [Name] Like '%" & searchName & "%'" 
```

但是，从长远来看，您可能应该修复您的设计：

*   给每个人一个在所有表格中都相同的数字 ID。
*   将名称拆分为第一个、中间和最后一个字段。
*   使用单个表来存储个人独有的所有信息。然后使用 ID 将其链接到其他表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:03:37.490

```
 strSQL = "SELECT [Name], Gender FROM Masterfiles WHERE [Name] Like '%" & replace(Me!txtName,".","") & "%'" 
```

# java - 传递一个 HashMap 使用 JAXB 通过 SOAP

> ID：16086385
> 
> 赞同：5
> 
> 时间：2013-04-18T14:57:53.920
> 
> 标签：java, soap, jaxb, schema, wsdl2java

我正在尝试通过 SOAP 传递 Hashmap。我正在使用 CXF wsdl2java 创建我的模式。我已经为我的 HashMap 创建了一个包装类，因为 Hashmap 本身不能通过线路传递。

然后，我创建了适配器以将该 Hashmap 变形为我的 wsdl 的已知类型，但是当我的 wsdl 创建时，它添加了一些不需要的抽象映射。下面是代码：

这是我的 HashMap 包装类

```
@XmlRootElement(name = "testTO")
public class TestTO {

    private HashMap<String, Object> mapTest;

    public TestTO(){
        this.mapTest = new HashMap<String, Object>();
    }

    @XmlJavaTypeAdapter(MapAdapter.class)
    public HashMap<String, Object> getMapTest() {
        return mapTest;
    }

    public void setMapTest(HashMap<String, Object> mapTest) {
        this.mapTest = mapTest;
    }

} 
```

这是 MyMap 类，其中是已知的模式类型

```
@XmlJavaTypeAdapter(MapAdapter.class)
public class MyMap extends HashMap<String, Object>{
    public final List<Entry> entryList = new ArrayList<Entry>();
} 
```

这是该列表包含上面的条目类：

```
public class Entry {

    @XmlAttribute
    public String key;

    @XmlElements({
            @XmlElement(name = "byte", type = byte.class),
            @XmlElement(name = "short", type = short.class),
            @XmlElement(name = "int", type = int.class),
            @XmlElement(name = "long", type = long.class),
            @XmlElement(name = "float", type = float.class),
            @XmlElement(name = "double", type = double.class),
            @XmlElement(name = "char", type = char.class),
            @XmlElement(name = "boolean", type = boolean.class),

            @XmlElement(name = "ByteWrapper", type = Byte.class),
            @XmlElement(name = "ShortWrapper", type = Short.class),
            @XmlElement(name = "IntegerWrapper", type = Integer.class),
            @XmlElement(name = "LongWrapper", type = Long.class),
            @XmlElement(name = "FloatWrapper", type = Float.class),
            @XmlElement(name = "DoubleWrapper", type = Double.class),
            @XmlElement(name = "Character", type = Character.class),
            @XmlElement(name = "BooleanWrapper", type = Boolean.class),

            @XmlElement(name = "BigDecimal", type = BigDecimal.class),
            @XmlElement(name = "String", type = String.class),
            @XmlElement(name = "Date", type = Date.class)
    })
    public Object value;

    public Entry() {
        this.key = null;
        this.value = null;
    }

    public Entry(String key, Object value) {
        this.key = key;
        this.value = value;
    }

    public String getKey() {
        return key;
    }

    public Object getValue() {
        return value;
    }

} 
```

这是我的适配器：

```
public class MapAdapter extends XmlAdapter<MyMap, Map<String, Object>> {

    @Override
    public MyMap marshal(Map<String, Object> v) throws Exception {
        MyMap myMap = new MyMap();

        for ( Map.Entry<String, Object> e : v.entrySet() ) {
            Entry entry = new Entry();
            entry.key = e.getKey();
            entry.value = e.getValue();

            myMap.entryList.add(entry);
        }
        return myMap;
    }

    @Override
    public Map<String, Object> unmarshal(MyMap v) throws Exception {
         Map<String, Object> map = new HashMap<String,Object>();
            for ( Entry e : v.entryList ) {
                map.put(e.key, e.value);
            }
     return map;
    }

} 
```

但我的 wsdl 正在生成以下内容：

```
<xs:element minOccurs="0" name="foo" type="tns:testTO"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="testTO">
<xs:sequence>
<xs:element minOccurs="0" name="mapTest" type="tns:myMap"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="myMap">
<xs:complexContent>
<xs:extension base="tns:hashMap">
<xs:sequence>
<xs:element maxOccurs="unbounded" minOccurs="0" name="entryList" nillable="true" type="tns:entry"/>
</xs:sequence>
</xs:extension>
</xs:complexContent>
</xs:complexType>
<xs:complexType name="hashMap">
<xs:complexContent>
<xs:extension base="tns:abstractMap">
<xs:sequence/>
</xs:extension>
</xs:complexContent>
</xs:complexType>
<xs:complexType abstract="true" name="abstractMap">
<xs:sequence/>
</xs:complexType>
<xs:complexType name="entry">
<xs:sequence>
<xs:choice minOccurs="0">
<xs:element name="byte" type="xs:byte"/>
<xs:element name="short" type="xs:short"/>
<xs:element name="int" type="xs:int"/>
<xs:element name="long" type="xs:long"/>
<xs:element name="float" type="xs:float"/>
<xs:element name="double" type="xs:double"/>
<xs:element name="char" type="xs:unsignedShort"/>
<xs:element name="boolean" type="xs:boolean"/>
<xs:element name="ByteWrapper" type="xs:byte"/>
<xs:element name="ShortWrapper" type="xs:short"/>
<xs:element name="IntegerWrapper" type="xs:int"/>
<xs:element name="LongWrapper" type="xs:long"/>
<xs:element name="FloatWrapper" type="xs:float"/>
<xs:element name="DoubleWrapper" type="xs:double"/>
<xs:element name="Character" type="xs:unsignedShort"/>
<xs:element name="BooleanWrapper" type="xs:boolean"/>
<xs:element name="BigDecimal" type="xs:decimal"/>
<xs:element name="String" type="xs:string"/>
<xs:element name="Date" type="xs:dateTime"/>
</xs:choice>
</xs:sequence>
<xs:attribute name="key" type="xs:string"/>
</xs:complexType> 
```

我查看了我在这里找到的多个其他案例，但没有一个能够解决我的问题，我什至参考了[http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/ annotation/adapters/XmlAdapter.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html) 但 wsdl 到 java 似乎正在搞乱架构。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-06T07:10:07.893

我相信您不必使用最新的 JAXB 版本编写自定义`XmlAdapter`编组/解组。`Map<String, Object`下面的示例对我来说很好。

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "foo")
public class Foo {
  private Map<String, Object> map = new HashMap<String, Object>();

  public Map<String, Object> getMap() {
    return params;
  }
} 
```

这导致了一个模式：

```
<xs:complexType name="foo">
  <xs:sequence>
    <xs:element name="map">
      <xs:complexType>
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="entry">
            <xs:complexType>
              <xs:sequence>
                <xs:element minOccurs="0" name="key" type="xs:string"/>
                <xs:element minOccurs="0" name="value" type="xs:anyType"/>
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType> 
```

然后你应该能够解组以下 xml：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://your.org/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <soapenv:Header/>
   <soapenv:Body>
      <foo>
        <params>
            <entry>
               <key>string</key>
               <value xsi:type="xs:string">5</value>
             </entry>
             <entry>
                <key>integer</key>
                <value xsi:type="xs:int">54</value>
             </entry>
        </params>
      </foo>
   </soapenv:Body>
</soapenv:Envelope> 
```

只是不要忘记 xs 和 xsi 命名空间。您甚至可以将自定义类型作为值传递，而不仅仅是简单的 xsi 类型。然后你必须确保你已经指定了正确的`xsi:type.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-24T14:28:18.960

我想出的适用于我正在寻找的解决方案与 polbotinka 提到的类似，但我为日期添加了额外的绑定和适配器。我的界面上的所有对象都扩展了 TestTO 类，作为一种让每个对象以映射格式传递灵活属性的方法。这是我所做的：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="TestTO", namespace="test/common")
public abstract class TestTO {

    @XmlJavaTypeAdapter(MapAdapter.class)
    private Map<String, Object> elements;
} 
```

然后，此类将生成如下模式（这是由 CXF-Java2Wsdl 插件生成的我的整体 WSDL 的一部分）：

```
<xs:complexType abstract="true" name="testTO">
<xs:sequence>
  <xs:element name="elements">
    <xs:complexType>
      <xs:sequence>
        <xs:element maxOccurs="unbounded" minOccurs="0" name="entry">
          <xs:complexType>
            <xs:sequence>
              <xs:element minOccurs="0" name="key" type="xs:string"/>
              <xs:element minOccurs="0" name="value" type="xs:anyType"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:sequence> 
```

然后我在生成过程中使用了以下绑定文件：

```
 <jaxws:bindings wsdlLocation="wsdl/TestImpl.wsdl" 
        xmlns:jaxws="http://java.sun.com/xml/ns/jaxws" 
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
        xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
        jaxb:version="2.1">
  <jaxws:bindings node="wsdl:definitions/wsdl:types/xs:schema[@targetNamespace='http://namespace.goes.here']">
        <jaxb:bindings node="//xs:complexType[@name='testTO']//xs:element[@name='elements']">
            <jaxb:property>
                <jaxb:baseType name="java.util.Map&lt;String,Object&gt;" />
            </jaxb:property>
        </jaxb:bindings>
        <jaxb:serializable/>
  </jaxws:bindings>
</jaxws:bindings> 
```

从 CXF-Wsdl2Java 生成的 TestTO 版本如下所示：

```
 @XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "testTO", propOrder = {
    "elements"
})
public abstract class TestTO {

    @XmlElement(required = true, type = TestTO.Elements.class)
    protected Map<String, Object> elements;

    public Map<String, Object> getElements() {
        return elements;
    }

    public void setElements(Map<String, Object> value) {
        this.elements = value;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "entry"
    })
    public static class Elements {

        protected List<TestTO.Elements.Entry> entry;

        public List<TestTO.Elements.Entry> getEntry() {
            if (entry == null) {
                entry = new ArrayList<TestTO.Elements.Entry>();
            }
            return this.entry;
        }

        @XmlAccessorType(XmlAccessType.FIELD)
        @XmlType(name = "", propOrder = {
            "key",
            "value"
        })
        public static class Entry {

            protected java.lang.String key;
            protected java.lang.Object value;

            public java.lang.String getKey() {
                return key;
            }

            public void setKey(java.lang.String value) {
                this.key = value;
            }

            public java.lang.Object getValue() {
                return value;
            }

            public void setValue(java.lang.Object value) {
                this.value = value;
            }
        }
    }
} 
```

所以现在生成的类有一个 Map 接口，它会自动转换为内部列表类。所以我想创建一个适配器来将一些数据类型转换成我想要使用的类型。在这种情况下，日期是特定的，因为我通常使用 JAXB 绑定文件从模式进行日期转换，但由于模式是“anyType”，因此绑定文件将不起作用。因此，上面的 MapAdapter.class 用于将地图内输入对象上的 XmlGregorianCalendars 转换为日期。

```
 public class MapAdapter extends XmlAdapter<TestTO.Elements, Map<String, Object>>{
    @Override
    public Map<String, Object> unmarshal(TestTO.Elements v) throws Exception {
        Map<String, Object> map = new HashMap<String, Object>();

        if(v != null && v.entry != null){
            for(Entry e : v.entry){
                if(e.getValue() instanceof XMLGregorianCalendar)
                    map.put(e.getKey(), ((XMLGregorianCalendar)e.getValue()).toGregorianCalendar().getTime());
                else
                    map.put(e.getKey(), e.getValue());
            }
        }
        return map;
    }

    @Override
    public TestTO.Elements marshal(Map<String, Object> v) throws Exception {
        TestTO.Elements b = new TestTO.Elements();
        if(v == null) 
            return null;
        for(java.util.Map.Entry<String, Object> e : v.entrySet()){
            Entry newEntry = new Entry();
            newEntry.setKey(e.getKey());
            newEntry.setValue(e.getValue());
            b.getEntry().add(newEntry);
        }
        return b;
    }
} 
```

为了使这个适配器工作，我必须有一个“生成的类”版本来模仿内部的 Elements 类。所以我有一个 common.adapter.TestTO.class 是生成的，还有一个 common.normal.TestTO.class 是我的所有其他类在我的接口上扩展的一个。

这是我在客户端生成中使用的插件配置：

```
<plugin>
                <groupId>org.apache.cxf</groupId>
                <artifactId>cxf-codegen-plugin</artifactId>
                <version>${cxf.version}</version>
                <executions>
                    <execution>
                        <id>generate-sources</id>
                        <phase>generate-sources</phase>
                        <configuration>

                            <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                            <wsdlOptions>
                                <wsdlOption>
                                    <wsdl>${basedir}/src/main/resources/META-INF/wsdl/TestImpl.wsdl</wsdl>
                                    <bindingFiles>
                                        <bindingFile>${basedir}/src/main/resources/META-INF/binding.xml</bindingFile>
                                    </bindingFiles>
                                </wsdlOption>
                            </wsdlOptions>
                        </configuration>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

# android - 你如何将Javascript加载到android webview中？

> ID：16086389
> 
> 赞同：1
> 
> 时间：2013-04-18T14:57:59.467
> 
> 标签：android, webview, loaddata

HTML 代码：

```
<!DOCTYPE html>
    <html>
        <head>
            <script src="resource://jquery.min.js"></script>
        </head>
        <body>
        </body>
    </html> 
```

我想拦截协议（资源：//）并将 Javascript 手动加载到 webview 中。所以我可以将第三方库存储在 android 资产中。

我尝试覆盖 WebViewClient 的 onLoadResource ，然后使用 webView.loadData **(data, mimeType, encoding);** 但它不起作用，因为应用程序进入了无限循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:12:46.173

找到了答案，而且效果很好！我已经通过 google 和 stackoverflow 多次搜索过这个问题，但没有得到正确的答案。最后我的室友第一次尝试就成功了。

[来自资产的 Android WebView Javascript](https://stackoverflow.com/questions/9414312/android-webview-javascript-from-assets)

# draggable - 剑道网格，可拖动

> ID：16086390
> 
> 赞同：0
> 
> 时间：2013-04-18T14:58:06.450
> 
> 标签：draggable, kendo-grid

我在我的基诺网格中实现了以下内容：jsfiddle.net/JBeQn/

我想要实现的是这个；当用户拖动一行时，它下面的任何行都会随着拖动的行越过它而改变样式。

有没有人有一个如何实现这一目标的例子？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:40:32.503

我希望我理解你的正确，但这对你有帮助吗？

[http://demos.kendoui.c​​om/web/grid/foreignkeycolumn.html](http://demos.kendoui.com/web/grid/foreignkeycolumn.html)

[http://demos.kendoui.c​​om/web/grid/column-reordering.html](http://demos.kendoui.com/web/grid/column-reordering.html)

```
 reorderable: true,
                    resizable: true,    
                    groupable: true, 
```

# r - 如何让相同的忽略属性/名称？

> ID：16086391
> 
> 赞同：3
> 
> 时间：2013-04-18T14:58:10.113
> 
> 标签：r

```
> str(a)
 Named int [1:5] 0 0 0 0 0
 - attr(*, "names")= chr [1:5] "Var2" "Var3" "Var4" "Var5" ...
> str(b)
 Named int [1:5] 0 0 0 0 0
 - attr(*, "names")= chr [1:5] "Var1" "Var2" "Var3" "Var4" ...
> identical(a,b)
[1] FALSE 
```

我意识到`identical`不仅要比较向量内容，还要比较名称。

如何避免名称检查而不手动删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:12:02.523

你可以考虑这个`compare`包：

```
library(compare)
a <- c(Var2=0, Var3=0, Var4=0)
b <- c(Var1=0, Var2=0, Var3=0)
compare(a, b, allowAll=TRUE)
# TRUE
#  renamed
#  dropped names 
```

该函数尝试一些不同的转换来查看它是否可以使值相等。在这种情况下，它重命名了对象并删除了名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:07:01.240

This gives the desired result:

```
> identical( unname(a), unname(b))
[1] TRUE 
```

This gives a useful result but misleading information:

```
> mapply("==", a ,b)
Var2 Var3 Var4 Var5 Var6 
TRUE TRUE TRUE TRUE TRUE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T15:02:49.163

使用`all.equal`：

```
a <- c(Var2=0, Var3=0, Var4=0)
b <- c(Var1=0, Var2=0, Var3=0)
all.equal(a, b)
# [1] "Names: 3 string mismatches" 
```

它告诉你名字是不匹配的。

```
b <- c(Var1=0, Var2=0, Var3=1)
all.equal(a, b)
# [1] "Names: 3 string mismatches"  "Mean absolute difference: 1" 
```

# postgresql - PostgreSQL 全文搜索：为什么搜索这么慢？

> ID：16086398
> 
> 赞同：5
> 
> 时间：2013-04-18T14:58:20.353
> 
> 标签：postgresql, full-text-search, full-text-indexing

我有一个小型 PostgreSQL 数据库（~~3,000 行）。

我正在尝试在其中一个文本字段（“正文”）上设置全文搜索。

问题是任何查询都非常慢（超过 35 秒！！！）。

我想问题出在数据库选择顺序扫描模式的事实......

这是我的查询：

```
 SELECT
        ts_rank_cd(to_tsvector('italian', body), query),
        ts_headline('italian', body, to_tsquery('torino')),
        title,
        location,
        id_author
    FROM
        fulltextsearch.documents, to_tsquery('torino') as query
    WHERE
        (body_tsvector @@ query)
    OFFSET
        0 
```

这是解释分析：

```
 QUERY PLAN                                    
----------------------------------------------------------------------------------------------------------------------------
Limit  (cost=0.00..1129.81 rows=19 width=468) (actual time=74.059..13630.114 rows=863 loops=1)
->  Nested Loop  (cost=0.00..1129.81 rows=19 width=468) (actual time=74.056..13629.342 rows=863 loops=1)
     Join Filter: (documents.body_tsvector @@ query.query)
     ->  Function Scan on to_tsquery query  (cost=0.00..0.01 rows=1 width=32) (actual time=4.606..4.608 rows=1 loops=1)
     ->  Seq Scan on documents  (cost=0.00..1082.09 rows=3809 width=591) (actual time=0.045..48.072 rows=3809 loops=1)
Total runtime: 13630.720 ms 
```

这是我的桌子：

```
mydb=# \d+ fulltextsearch.documents;
                                              Table "fulltextsearch.documents"
    Column     |       Type        |                               Modifiers                               | Storage  | Description
---------------+-------------------+-----------------------------------------------------------------------+----------+-------------
 id            | integer           | not null default nextval('fulltextsearch.documents_id_seq'::regclass) | plain    |
 id_author     | integer           |                                                                       | plain    |
 body          | character varying |                                                                       | extended |
 title         | character varying |                                                                       | extended |
 location      | character varying |                                                                       | extended |
 date_creation | date              |                                                                       | plain    |
 body_tsvector | tsvector          |                                                                       | extended |
Indexes:
    "fulltextsearch_documents_tsvector_idx" gin (to_tsvector('italian'::regconfig,     COALESCE(body, ''::character varying)::text))
    "id_idx" btree (id)
Triggers:
    body_tsvectorupdate BEFORE INSERT OR UPDATE ON fulltextsearch.documents FOR EACH ROW EXECUTE PROCEDURE tsvector_update_trigger('body_tsvector', 'pg_catalog.italian', 'body')
Has OIDs: no 
```

我确定我遗漏了一些明显的东西......

有什么线索吗？

.

.

.

===**更新**=============================================== ==========================

感谢您的建议，我想出了这个（更好的）查询：

```
SELECT
    ts_rank(body_tsvector, query),
    ts_headline('italian', body, query),
    title,
    location
FROM
    fulltextsearch.documents, to_tsquery('italian', 'torino') as query
WHERE
    to_tsvector('italian', coalesce(body,'')) @@ query 
```

这是相当好的，但总是很慢（13+秒......）。

我注意到注释掉“ts_headline()”行的查询速度快如闪电。

这是解释分析，它最终使用索引，但对我没有多大帮助......：

```
EXPLAIN ANALYZE SELECT
clock_timestamp() - statement_timestamp() as elapsed_time,
    ts_rank(body_tsvector, query),
    ts_headline('italian', body, query),
    title,
    location
FROM
    fulltextsearch.documents, to_tsquery('italian', 'torino') as query
WHERE
    to_tsvector('italian', coalesce(body,'')) @@ query

 Nested Loop  (cost=16.15..85.04 rows=19 width=605) (actual time=102.290..13392.161 rows=863 loops=1)
   ->  Function Scan on query  (cost=0.00..0.01 rows=1 width=32) (actual time=0.008..0.009 rows=1 loops=1)
   ->  Bitmap Heap Scan on documents  (cost=16.15..84.65 rows=19 width=573) (actual time=0.381..4.236 rows=863 loops=1)
         Recheck Cond: (to_tsvector('italian'::regconfig, (COALESCE(body, ''::character varying))::text) @@ query.query)
         ->  Bitmap Index Scan on fulltextsearch_documents_tsvector_idx  (cost=0.00..16.15 rows=19 width=0) (actual time=0.312..0.312 rows=863 loops=1)
               Index Cond: (to_tsvector('italian'::regconfig, (COALESCE(body, ''::character varying))::text) @@ query.query)
 Total runtime: 13392.717 ms 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:12:40.197

你错过了两件事（相当明显）：

1 你已经设置`'italian'`了`to_tsvector()`但你没有指定它`to_tsquery()`

保持两者一致。

2 您已编制索引`COALESCE(body, ...)`，但这不是您要搜索的内容。

规划器并不神奇——只有当您要搜索的内容时，您才能使用索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:31:13.387

最后，在您的回答和评论的帮助下，并通过谷歌搜索，我确实通过在完整结果集的子集（我感兴趣的结果页面）上运行 ts_headline() （我想是一个非常繁重的函数）来解决在）：

```
 SELECT
        id,
        ts_headline('italian', body, to_tsquery('italian', 'torino')) as headline,
        rank,
        title,
        location
    FROM (
        SELECT
            id,
            body,
            title,
            location,
            ts_rank(body_tsvector, query) as rank
        FROM
            fulltextsearch.documents, to_tsquery('italian', 'torino') as query
        WHERE
            to_tsvector('italian', coalesce(body,'')) @@ query
        LIMIT 10
        OFFSET 0
    ) as s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T13:40:34.543

我通过预先计算 ts_rank_cd 并将其存储在语料库中流行术语（高出现率）的表中解决了这个问题。搜索查看此表以获取查询词的排序文档排名。如果不存在（对于不太流行的术语），它将默认动态创建 ts_rank_cd。

请看一下这篇文章。

[https://dba.stackexchange.com/a/149701](https://dba.stackexchange.com/a/149701)

# java - 带有保险丝的未知错误 524

> ID：16086408
> 
> 赞同：0
> 
> 时间：2013-04-18T14:59:01.030
> 
> 标签：java, ls, fuse

我尝试使用 fuse 在已安装目录上执行“ls -l”命令，但收到以下错误消息：

> 未知错误 524

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:10:36.730

如果你用谷歌搜索`Java "Unknown error 524"`你会发现一些命中，以及一些可能的原因。一个常见的主题似乎是您正在某种 FUSE 文件系统上做某事。它通常似乎与锁定有关，尽管在这里似乎并非如此。

一般来说，这似乎是您正在使用的 FUSE 文件系统实现的限制。

在这种情况下，如果您在`ls`从 Java 中作为外部命令运行时遇到问题，则根本不可能是 Java 的错。`ls`命令正在执行的操作会引发错误。

# sql - 如何将数据保存在 csv 文件中，然后使用 sql 将其发送到文件夹？

> ID：16086409
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:59:02.057
> 
> 标签：sql, oracle11g

我在 plsql 开发人员中使用 oracle 11g。我的要求是数据检索应该是自动的。这意味着当查询 oracle 表中的数据时，数据应转换为 .csv 文件，然后将其发送到某个特定文件夹。

例子：

假设 student_sub1 表有所有学生的 subject1 数据。当我编写像 select * from student_sub1 where student=1 这样的查询时，student1 数据应该转换为 .csv 文件，然后 .csv 文件应该转到 student1 文件夹。

因此，我请求您建议我如何编写一个 sql 代码将数据转换为 .csv 文件并创建一个文件夹以使用 oracle 发送该文件。

你的意见对我帮助很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:02:46.953

看看[这篇](https://stackoverflow.com/questions/4168398/how-to-export-query-result-to-csv-in-oracle-sql-developer)文章是否有帮助。当您从 sql developer 运行查询时，该解决方案有效。

编辑：顺便说一句，如果你希望它出现在脚本中。然后我认为您可以使用 spool 命令运行它以将结果输出到文件中。像这样的东西。

```
关闭回声
       关闭反馈
       假脱机 student1.csv;
       从 student1 中选择 id||','||name||','||grade；
       脱线；

```

# perl - sed、awk、Perl 或其他用于去交错文本文件

> ID：16086413
> 
> 赞同：1
> 
> 时间：2013-04-18T14:59:09.280
> 
> 标签：perl, shell, text, sed, awk

我想要一个相对紧凑的命令来执行文本文件的逐行去交错，即

```
a1
a2
a3
a4
b1
b2
b3
b4
c1
c2
c3
c4
d1
d2
d3
d4 
```

映射到

```
a1
b1
c1
d1
a2
b2
c2
d2
a3
b3
c3
d3
a4
b4
c4
d4 
```

交织深度应该是可调的。这些行本身不包含任何有用的结构来帮助该过程，上面的示例只是一个用于演示目的的玩具示例。我可以使用什么工具来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:07:33.493

基本上，您正在做的是将数据读入二维数组。当您读入它时，您可以（例如）将数据逐行放入数组中。

然后当你写出数据时，你逐列遍历数组。调整您所做的（去）交错只需要不同大小的数组（或者至少您*使用*不同数量的数组，尽管如果您选择，您可以将数组大小本身固定）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:01:27.280

`sort`可以做到！

```
$ sort -k1.2 your_file 
```

`-k1.2`从第二个字符开始按第一个字段排序。

输出：

```
a1
b1
c1
d1
a2
b2
c2
d2
a3
b3
c3
d3
a4
b4
c4
d4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:24:43.723

**更新**

终于明白了你的问题，感谢`TLP`，我建议这个解决方案。它需要命令行上的深度和输入文件名：

```
$ perl deinter.pl 4 interleaved.txt 
```

并将重新排序的数据打印到 STDOUT。

```
use strict;
use warnings;

my $depth = shift;
my @data = <>;

for my $start (0 .. $depth-1) {
  for (my $i = $start; $i < @data; $i += $depth) {
    print $data[$i];
  }
} 
```

**输出**

```
a1
b1
c1
d1
a2
b2
c2
d2
a3
b3
c3
d3
a4
b4
c4
d4 
```

* * *

**以前的解决方案**

这是一种将整个文件读入内存的技术，构建一组用于比较的键，并对数据的索引进行排序，以便它们可以以新的顺序打印。

通过修改提取键字段的正则表达式并更改排序块以使排序顺序正确，可以根据您的目的对其进行更改。

如果您的文件很大，那么可能只需要在内存中构建键数组，并将文件中的其余数据保留为在输出时读取。

```
use strict;
use warnings;

open my $fh, '<', 'interleaved.txt' or die $!;
my @data = <$fh>;

my @keys = map [ /^(.)(.)/ ], @data;

my @sorted = sort {
  $keys[$a][1] <=> $keys[$b][1] or
  $keys[$a][0] cmp $keys[$b][0]
} 0 .. $#keys;

print $data[$_] for @sorted; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:46:16.307

根据您的新要求，根据元素在文件中的位置重新排序元素：

```
use strict;
use warnings;

my @sorted;
my $depth = 4;     # the adjustable interleaving depth

while (<DATA>) {  
    my $num = ($. % $depth) - 1;  # $. is input line number
    push @{ $sorted[$num] }, $_;
}
for (@sorted) {
    print @$_;
}

__DATA__
a1
a2
a3
a4
b1
b2
b3
b4
c1
c2
c3
c4
d1
d2
d3
d4 
```

`<DATA>`请注意，可以通过更改为`<>`并运行以下命令在输入文件上测试脚本：

```
perl script.pl input.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T21:18:16.050

这可能对您有用（GNU sed 和排序）：

```
sed '1{x;s/^/1/;x};G;s/\n/\t/p;x;y/1234/2341/;x;d' file|sort -sk2|sed 's/\t.*//' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T16:14:28.160

我想感谢他们的投入和回答，这激发了解决方案`Borodin`。`TLP`好丑，不过我喜欢

```
awk 'BEGIN{v=4}{now=(NR-1)%v; STOR[now] = STOR[now] "\n" $0;} END {for (v in STOR) print STOR[v]}' 
```

它还具有打印虚假换行符的缺陷（嗯，附加到数组开头的换行符），但我可以处理。

编辑：

换行符的解决方案：

```
awk 'BEGIN{v=4}{now=(NR-1)%v; STOR[now] = STOR[now] "\n" $0;} END {for (v in STOR) print substr(STOR[v],2)}' 
```

# php - 将 config ini 之类的字符串点分隔值转换为实际的数组键

> ID：16086423
> 
> 赞同：1
> 
> 时间：2013-04-18T14:59:41.723
> 
> 标签：php

在配置中得到一个多维数组和一个字符串，我需要在不使用 eval 的情况下将其转换为数组键。这个问题的实际用途是我从 mongodb 获得了一个大文档，该文档被转换为多维数组。但是我需要从配置文件中定义特定的数组节点。

这个想法是创建一个配置文件作为数组键层次结构的表示

在 config.ini 上，以下值是一些示例。

```
colorattribute = attribute.color
wholesaleprice = prices.wholesale 
```

来自 mongoDb 的示例响应

```
<?php
$products = array(
                'product_name' => 'iTouch',
                'brand_name' => 'Apple',
                'attributes' => array ( 'color' => 'black',
                                        'size' => '5 in'
                                      ),
                'prices' => array(
                                    'wholesale' => 135,
                                    'retail' => 200,
                                ),
                ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:04:43.620

```
 function recurseKeys(array $keys,array $array){
    $key = array_shift($keys);
    if(!isset($array[$key])) return null;
    return empty($keys) ?
      $array[$key]:
      recurseKeys($keys,$array[$key];
 }

 var_dump(recurseKeys(explode('.',$testConfig),$products); 
```

# r - R模拟逆正态分布

> ID：16086424
> 
> 赞同：1
> 
> 时间：2013-04-18T14:59:42.690
> 
> 标签：r, distribution

我想知道 R 中是否有任何函数可以用来模拟与正态分布相反的分布？相反，我的意思不是从低值开始，逐渐增加到峰值，然后逐渐减少，我希望这个分布从高值开始，然后逐渐减少到小值，然后增加到初始值。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:07:11.063

如果您正在寻找一个开始高、低并结束高的概率分布，请尝试`beta`使用`alpha`= `beta`=进行分布`0.5`。在 R 中：

```
rb <- rbeta(1000, 0.5, 0.5)
hist(rb) 
```

它产生介于 之间的值`(0,1)`，您可能希望适当地缩放和/或移动它。

# java - HttpSessionListener 中的事务提交未持久化到 DB

> ID：16086433
> 
> 赞同：1
> 
> 时间：2013-04-18T15:00:08.690
> 
> 标签：java, spring, tomcat, jta

我最近开始使用 JBossTM 以便在多个数据库连接上使用 JTA，这非常成功。如果我尝试从任何控制器执行事务，它可以正常工作。

但是，我最近开始尝试从 HttpSessionListener 的实例中持久化实体，以便我可以跟踪用户会话，但我无法让持久化工作。我敢肯定，我在这里缺少一些非常简单的东西，但任何提示都会受到欢迎。

问题是，尽管一切似乎都运行正常（日志方面），但实际上没有任何东西被提交到数据库中。在尝试持久保存到没有事务管理器的数据库之前（在我切换到 JBossTM 之前），我已经看到了这个错误，但似乎无法破解它。

以下是我的 application-context.xml 的相关位：

```
<tx:annotation-driven transaction-manager="transactionManager" />

<bean class="com.arjuna.ats.jta.TransactionManager" factory-method="transactionManager" id="arjunaTransactionManager"/>
<bean class="com.arjuna.ats.jta.UserTransaction" factory-method="userTransaction" id="arjunaUserTransaction"/>

<bean class="org.springframework.transaction.jta.JtaTransactionManager" id="transactionManager">
  <property name="transactionManager">
    <ref bean="arjunaTransactionManager"/>
  </property>
  <property name="userTransaction">
    <ref bean="arjunaUserTransaction"/>
  </property>
</bean>

<jee:jndi-lookup id="CoreDS" jndi-name="java:/comp/env/jdbc/CoreDS" resource-ref="true" />

<bean id="coreEMW" class="org.springframework.orm.jpa.support.SharedEntityManagerBean"
    p:entityManagerFactory-ref="coreEMF"/>

<bean id="coreEMF" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="CoreDS"/>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
    </property>
</bean>

<bean id="sessionDAO" class="core.dao.SessionDAOImpl"
    p:entityManager-ref="coreEMW" />

<bean name="openEntityManagerInViewInterceptor"
      class="org.springframework.orm.jpa.support.OpenEntityManagerInViewInterceptor"
      p:entityManagerFactory-ref="coreEMF" />

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

<bean id='jdbcTemplate' class='org.springframework.jdbc.core.JdbcTemplate'
    p:dataSource-ref='CoreDS' /> 
```

web.xml

```
<listener>
    <listener-class>core.util.SessionListener</listener-class>
</listener> 
```

会话监听器.java

```
public class SessionListener implements HttpSessionListener {
    private static Log log = LogFactory.getLog(SessionListener.class);

    @Override
    @Transactional
    public void sessionCreated(HttpSessionEvent event) {
        getDAO(event).save(new Session(event.getSession().getId(),Calendar.getInstance()));
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent event) {
        ....
    }   

    private SessionDAO getDAO(HttpSessionEvent event){
        HttpSession session = event.getSession();

        ApplicationContext ctx = 
            WebApplicationContextUtils.
                  getWebApplicationContext(session.getServletContext());

        SessionDAO dao = 
                      (SessionDAO) ctx.getBean("sessionDAO");

        return dao;
    }
} 
```

持久性.xml

```
<persistence version="1.0" xmlns="...">
 <persistence-unit name="BPSCorePU" transaction-type="RESOURCE_LOCAL">
 <provider>org.hibernate.ejb.HibernatePersistence</provider>
 <non-jta-data-source>java:comp/env/jdbc/BPSCoreDS</non-jta-data-source>
 ...
 <class>core.model.Session</class>
 <exclude-unlisted-classes>false</exclude-unlisted-classes>
 <properties>
   <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
 </properties>
</persistence-unit>
</persistence> 
```

日志（虽然您可以看到提交，但 Session 对象未持久化）

```
2013-04-18 15:47:41,763 [core.util.SessionListener] TRACE - sessionCreated(): C5A37E5CC12FF19C277769DA8B97BF0A
2013-04-18 15:47:41,798 [com.arjuna.ats.jta] TRACE - BaseTransaction.getStatus
2013-04-18 15:47:41,854 [com.arjuna.ats.arjuna] TRACE - Loading class com.arjuna.ats.internal.arjuna.coordinator.CheckedActionFactoryImple
2013-04-18 15:47:41,873 [com.arjuna.ats.jta] TRACE - BaseTransaction.begin
2013-04-18 15:47:41,882 [com.arjuna.ats.arjuna] TRACE - Loading class com.arjuna.ats.arjuna.recovery.ActionStatusService
2013-04-18 15:47:41,889 [com.arjuna.ats.arjuna] TRACE - Loading class com.arjuna.ats.internal.arjuna.objectstore.ShadowNoFileLockStore
2013-04-18 15:47:41,891 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.createHierarchy(/tmp/jbosstm/tx/a/ShadowNoFileLockStore/defaultStore/)
2013-04-18 15:47:41,900 [com.arjuna.ats.arjuna] INFO  - ARJUNA012163: Starting service com.arjuna.ats.arjuna.recovery.ActionStatusService on port 32882
2013-04-18 15:47:41,910 [com.arjuna.ats.arjuna] TRACE - Loading class com.arjuna.ats.internal.arjuna.utils.SocketProcessId
2013-04-18 15:47:41,912 [com.arjuna.ats.arjuna] INFO  - ARJUNA012337: TransactionStatusManagerItem host: 127.0.0.1 port: 32882
2013-04-18 15:47:41,913 [com.arjuna.ats.arjuna] TRACE - OutputObjectState::OutputObjectState()
2013-04-18 15:47:41,914 [com.arjuna.ats.arjuna] TRACE - Loading class com.arjuna.ats.internal.arjuna.objectstore.ShadowNoFileLockStore
2013-04-18 15:47:41,914 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.createHierarchy(/tmp/jbosstm/tx/a/ShadowNoFileLockStore/defaultStore/)
2013-04-18 15:47:41,915 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.write_committed(0:ffffc0a80036:8073:5170078d:0, /Recovery/TransactionStatusManager)
2013-04-18 15:47:41,916 [com.arjuna.ats.arjuna] TRACE - ShadowingStore.write_state(0:ffffc0a80036:8073:5170078d:0, /Recovery/TransactionStatusManager, StateType.OS_ORIGINAL)
2013-04-18 15:47:41,916 [com.arjuna.ats.arjuna] TRACE - ShadowingStore.genPathName(0:ffffc0a80036:8073:5170078d:0, /Recovery/TransactionStatusManager, StateType.OS_ORIGINAL)
2013-04-18 15:47:41,916 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.genPathName(0:ffffc0a80036:8073:5170078d:0, /Recovery/TransactionStatusManager, 11)
2013-04-18 15:47:41,918 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.openAndLock(/tmp/jbosstm/tx/a/ShadowNoFileLockStore/defaultStore/Recovery/TransactionStatusManager/0_ffffc0a80036_8073_5170078d_0, FileLock.F_WRLCK, true)
2013-04-18 15:47:41,918 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.createHierarchy(/tmp/jbosstm/tx/a/ShadowNoFileLockStore/defaultStore/Recovery/TransactionStatusManager/0_ffffc0a80036_8073_5170078d_0)
2013-04-18 15:47:41,927 [com.arjuna.ats.arjuna] TRACE - FileSystemStore.closeAndUnlock(/tmp/jbosstm/tx/a/ShadowNoFileLockStore/defaultStore/Recovery/TransactionStatusManager/0_ffffc0a80036_8073_5170078d_0, null, java.io.FileOutputStream@283a0f10)
2013-04-18 15:47:41,927 [com.arjuna.ats.arjuna] INFO  - ARJUNA012170: TransactionStatusManager started on port 32882 and host 127.0.0.1 with service com.arjuna.ats.arjuna.recovery.ActionStatusService
2013-04-18 15:47:41,928 [com.arjuna.ats.arjuna] TRACE - StateManager::StateManager( 2, 0 )
2013-04-18 15:47:41,928 [com.arjuna.ats.arjuna] TRACE - BasicAction::BasicAction()
2013-04-18 15:47:41,929 [com.arjuna.ats.arjuna] TRACE - BasicAction::Begin() for action-id 0:ffffc0a80036:8073:5170078d:2
2013-04-18 15:47:41,929 [com.arjuna.ats.arjuna] TRACE - BasicAction::actionInitialise() for action-id 0:ffffc0a80036:8073:5170078d:2
2013-04-18 15:47:41,930 [com.arjuna.ats.arjuna] TRACE - ActionHierarchy::ActionHierarchy(1)
2013-04-18 15:47:41,931 [com.arjuna.ats.arjuna] TRACE - ActionHierarchy::add(0:ffffc0a80036:8073:5170078d:2, 1)
2013-04-18 15:47:41,934 [com.arjuna.ats.arjuna] TRACE - BasicAction::addChildThread () action 0:ffffc0a80036:8073:5170078d:2 adding Thread["ajp-bio-8010"-exec-1,5,main]
2013-04-18 15:47:41,935 [com.arjuna.ats.arjuna] TRACE - BasicAction::addChildThread () action 0:ffffc0a80036:8073:5170078d:2 adding Thread["ajp-bio-8010"-exec-1,5,main] result = true
2013-04-18 15:47:41,938 [com.arjuna.ats.arjuna] TRACE - TransactionReaper::instantiate()
2013-04-18 15:47:41,939 [com.arjuna.ats.arjuna] TRACE - TransactionReaper::TransactionReaper ( 9223372036854775807 )
2013-04-18 15:47:41,941 [com.arjuna.ats.arjuna] TRACE - ReaperThread.run ()
2013-04-18 15:47:41,942 [com.arjuna.ats.arjuna] TRACE - Thread Thread[Transaction Reaper,5,main] sleeping for 9223370670558313865
2013-04-18 15:47:41,942 [com.arjuna.ats.arjuna] TRACE - TransactionReaper::insert ( BasicAction: 0:ffffc0a80036:8073:5170078d:2 status: ActionStatus.RUNNING, 60 )
2013-04-18 15:47:41,944 [com.arjuna.ats.arjuna] TRACE - ReaperElement::ReaperElement ( BasicAction: 0:ffffc0a80036:8073:5170078d:2 status: ActionStatus.RUNNING, 60 )
2013-04-18 15:47:41,944 [com.arjuna.ats.arjuna] TRACE - ReaperThread.run ()
2013-04-18 15:47:41,944 [com.arjuna.ats.arjuna] TRACE - TransactionReaper::check ()
2013-04-18 15:47:41,944 [com.arjuna.ats.arjuna] TRACE - TransactionReaper::check - comparing 1366296521944
2013-04-18 15:47:41,945 [com.arjuna.ats.arjuna] TRACE - Thread Thread[Transaction Reaper,5,main] sleeping for 59999
2013-04-18 15:47:41,946 [com.arjuna.ats.arjuna] TRACE - ReaperWorkerThread.run ()
2013-04-18 15:47:41,946 [com.arjuna.ats.arjuna] TRACE - Thread Thread[Transaction Reaper Worker 0,5,main] waiting for cancelled TXs
2013-04-18 15:47:42,091 [dao.BaseDAOImpl] TRACE - Persisting
2013-04-18 15:47:42,091 [dao.BaseDAOImpl] DEBUG - adtest Shared EntityManager proxy for target factory [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@1dcd8d1f]
2013-04-18 15:47:42,091 [dao.BaseDAOImpl] DEBUG - adtest core.model.Session@6229abca
2013-04-18 15:47:42,120 [com.arjuna.ats.jta] TRACE - BaseTransaction.getStatus
2013-04-18 15:47:42,120 [com.arjuna.ats.jta] TRACE - TransactionImple.getStatus
2013-04-18 15:47:42,121 [com.arjuna.ats.jta] TRACE - BaseTransaction.getStatus
2013-04-18 15:47:42,121 [com.arjuna.ats.jta] TRACE - TransactionImple.getStatus
2013-04-18 15:47:42,121 [com.arjuna.ats.jta] TRACE - BaseTransaction.commit
2013-04-18 15:47:42,121 [com.arjuna.ats.jta] TRACE - TransactionImple.commitAndDisassociate
2013-04-18 15:47:42,121 [com.arjuna.ats.arjuna] TRACE - BasicAction::End() for action-id 0:ffffc0a80036:8073:5170078d:2
2013-04-18 15:47:42,122 [com.arjuna.ats.arjuna] TRACE - BasicAction::removeChildThread () action 0:ffffc0a80036:8073:5170078d:2 removing TSThread:1
2013-04-18 15:47:42,122 [com.arjuna.ats.arjuna] TRACE - BasicAction::removeChildThread () action 0:ffffc0a80036:8073:5170078d:2 removing TSThread:1 result = true
2013-04-18 15:47:42,122 [com.arjuna.ats.arjuna] TRACE - TransactionReaper::remove ( BasicAction: 0:ffffc0a80036:8073:5170078d:2 status: ActionStatus.COMMITTED ) 
```

所有已编辑以删除客户详细信息，因此可能存在一些错误

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-03T15:38:29.797

对于现在发现这一点的任何人，我最终直接进入数据源并运行插入查询。

```
@Override
@Transactional
public void sessionCreated(HttpSessionEvent event) {
    log.trace("sessionCreated(): "+event.getSession().getId());

    JdbcTemplate select = new JdbcTemplate(getDS(event));
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String datetime = sdf.format(Calendar.getInstance().getTime());

    select.update("INSERT INTO sessions (username, session, started) VALUES ('','"+event.getSession().getId()+"','"+datetime+"')");
}
private DataSource getDS(HttpSessionEvent event){
    HttpSession session = event.getSession();

    ApplicationContext ctx = 
        WebApplicationContextUtils.
              getWebApplicationContext(session.getServletContext());

    DataSource dao = 
                  (DataSource) ctx.getBean("BPSCoreDS");

    return dao;
} 
```

# google-translate - 如何向谷歌网络翻译器添加标志？

> ID：16086438
> 
> 赞同：2
> 
> 时间：2013-04-18T15:00:31.507
> 
> 标签：google-translate

我是这个谷歌网络翻译的新手。我想在我在这里使用的每种语言前面添加标志。

这是我的代码：

```
<div id="google_translate_element">
    </div>
        <script type="text/javascript">
            function googleTranslateElementInit() {
                new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'ar,de,en,fr,ru,zh-CN', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, multilanguagePage: true}, 'google_translate_element');
            }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</div> 
```

请问如何向谷歌网络翻译器添加标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T10:06:45.547

```
<style type="text/css">
    .translation-links {
     text-align:right;
     position:absolute;
     right:0px;
 top:3px;
 }
 .translation-links img {
    filter:alpha(opacity=100);
    -moz-opacity: 1.0;
    opacity: 1.0;
    border:0;
    cursor: pointer;
    margin-right:8px;
    height:24px;
    width:24px;
    }
.translation-links img:hover {
    filter:alpha(opacity=30);
    -moz-opacity: 0.30;
    opacity: 0.30;
    }
  </style>

 <div class="translation-links">
  <a class="english" data-lang="English"><img alt="English" title="English" src="En_flag.png"></a>
  <a class="spanish" data-lang="Spanish"><img alt="Spanish" title="Spanish" src="Es_flag.png"></a>
  <a class="french" data-lang="French"><img alt="French" title="French" src="Fr_flag.png"></a>
  <a class="german" data-lang="German"><img alt="German" title="German" src="De_flag.png"></a>
</div>

<div id="google_translate_element" style="display:none;"></div>
<script type="text/javascript">
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', autoDisplay: false},     'google_translate_element'); //remove the layout
  }
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"     type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

<script type="text/javascript">
function triggerHtmlEvent(element, eventName)
{
    var event;
    if(document.createEvent) {
        event = document.createEvent('HTMLEvents');
        event.initEvent(eventName, true, true);
        element.dispatchEvent(event);
    }
    else {
    event = document.createEventObject();
        event.eventType = eventName;
        element.fireEvent('on' + event.eventType, event);
    }
}

       <!-- Flag click handler -->
       var jq = $.noConflict();
 jq('.translation-links a').click(function(e)
{
    e.preventDefault();
    var lang = jq(this).data('lang');
    jq('#google_translate_element select option').each(function(){
    if(jq(this).text().indexOf(lang) > -1) {
        jq(this).parent().val(jq(this).val());
        var container = document.getElementById('google_translate_element');
        var select = container.getElementsByTagName('select')[0];
        triggerHtmlEvent(select, 'change');
    }
    });
});

</script> 
```

# ios - 仅更改默认 backBarButtonItem 的位置

> ID：16086441
> 
> 赞同：1
> 
> 时间：2013-04-18T15:00:36.193
> 
> 标签：ios, ipad, alignment, uinavigationbar, backbarbuttonitem

所以我在我的 iPad 应用程序中有一个自定义导航栏，它比默认的 44 像素栏（52 像素高）略大。我希望导航栏中的所有项目都居中对齐，除了一个项目，后退按钮之外，我已经能够做到这一点。我不想使用自定义后退按钮，而只是使用默认按钮并将其位置向下推一点，使其与导航栏的中心对齐。我一直无法找到一个明确的答案，并且不确定它是否可能。有人做过这样的事情吗？

[http://cl.ly/image/0g3f2M260B3C](http://cl.ly/image/0g3f2M260B3C)

更新 ：

这可以做到，我在这里找到了答案：[UIBarButtonItem Offset？](https://stackoverflow.com/questions/11604899/uibarbuttonitem-offset)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:03:36.557

好的，但是我们不能改变自定义`back`按钮的位置，所以尝试通过自定义来实现那个。

默认情况下，后退按钮的位置是中心，所以我们不能改变那个位置。

# python - Python将字符串+变量+字符串存储到变量中

> ID：16086445
> 
> 赞同：-2
> 
> 时间：2013-04-18T15:00:54.640
> 
> 标签：python, variables, text

我有一个难题，文件名的中间会改变，但开头和结尾将保持不变。我试图将最终结果存储在一个变量中，但我对如何做到这一点感到困惑。

```
ips=['10.240.10.5','10.232.10.5','10.200.10.5','10.200.10.6','10.232.10.6','10.240.10.6','10.200.10.7','10.200.10.7']

for i in ips:
        sessionFile = 'sdee_sid_' . i[0] . '.data'
        f = open(sessionFile, r)
        subscription = f.read() 
```

我收到 sessionFile 变量的错误...

```
File "closeallSDEEsession.py", line 8
    sessionFile = "sdee_sid_" . i[0] . ".data"
                                             ^ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:02:50.600

python中没有字符串连接运算符，只需使用`+`：

```
'sdee_sid_' + i + '.data' 
```

或[类似 printf 的字符串格式](http://docs.python.org/2/library/stdtypes.html#string-formatting)：

```
'sdee_sid_%s.data' % i 
```

或[新型字符串格式](http://docs.python.org/2/library/string.html#formatstrings)：

```
'sdee_sid_{}.data'.format(i) 
```

请注意，这`i[0]`是 的第一个字符`i`，可能不是您想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:02:43.963

这个：

```
sessionFile = 'sdee_sid_' . i[0] . '.data' 
```

应该：

```
sessionFile = 'sdee_sid_' + i[0] + '.data' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:03:05.767

改变

```
sessionFile = 'sdee_sid_' . i[0] . '.data' 
```

至

```
sessionFile = 'sdee_sid_%s.data' % i[0] 
```

我也认为你想要`i`而不是`i[0]`因为后者是你正在迭代的列表中当前字符串的第一个字符。

# c# - 无法在本地用户目录中使用 AppSettings 部分创建配置文件

> ID：16086449
> 
> 赞同：1
> 
> 时间：2013-04-18T15:01:08.357
> 
> 标签：c#, oop, configuration-files

当配置文件位于应用程序目录中时，我可以从 .config 文件中读取并将更改写回它。由于用户权限，我现在想更改它并将我的 .config 文件移动到 users/xxx/local 目录。我已经了解到您需要将 SectionInformation.AllowExeDefinition 属性更改为 ConfigurationAllowExeDefinition.MachineToLocalUser 但我无法更改 AppSettings 部分的此属性。

这就是我从 AppSettings 中读取的方式

```
//Read COM Port settings
UIModel_settings.COMport = System.Configuration.ConfigurationManager.AppSettings.Get("COMPort"); 
```

这就是我写 AppSettings 的方式

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal); 
config.AppSettings.Settings["COMPort"].Value = UIModel_settings.COMport;
config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection("appSettings"); 
```

当我运行时，我在 Save 方法中遇到锁定错误：ConfigurationSection 属性在锁定时无法编辑。

任何想法如何解决这一问题？或者我如何在我的本地用户目录下创建这个文件？

谢谢

杰尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T19:23:23.540

在您的项目中，您是否有设置文件项（例如 Settings.settings）？

如果是这样，这将生成一个带有静态 Default 属性的 Settings 类，您可以使用它来访问 appSettings 元素。如果没有，那么您可以尝试从解决方案资源管理器 -> 项目 -> 添加项目 -> 设置文件中添加一个。

```
UIModel_settings.COMport = Settings.Default.COMPort; 
```

# servicestack - 如何获取客户端的IP？

> ID：16086451
> 
> 赞同：3
> 
> 时间：2013-04-18T15:01:12.820
> 
> 标签：servicestack

我编写了一个自托管的 servicestack 服务器和一个客户端，它们都是桌面应用程序。在我非常基本的 PING 测试服务中，我试图检索客户端的 IP。服务器位于 192.168.0.87:82，客户端我在同一台计算机和另一台计算机上尝试过，但 RemoteIp 和 UserHostAddress 始终返回 192.168.0.87:82。XRealIp 为空。我也试过base.Request.RemoteIp，但仍然是192.168.0.87:82。

我究竟做错了什么？

```
public RespPing Any(ReqPing request)
    {
        string IP = base.RequestContext.Get<IHttpRequest>().RemoteIp;
        string MAC = request.iTransactionInfo.MAC;

        Log(MAC,IP, base.RequestContext.Get<IHttpRequest>().RemoteIp + base.RequestContext.Get<IHttpRequest>().XRealIp + base.RequestContext.Get<IHttpRequest>().UserHostAddress);

        RespPing response = new RespPing { Result = "PONG" };

        return response;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T08:35:11.373

用：

```
HttpListenerRequest iHttpListenerRequest = (HttpListenerRequest)base.RequestContext.Get<IHttpRequest>().OriginalRequest;

string IP = iHttpListenerRequest.RemoteEndPoint.ToString().Split(':')[0]; 
```

`Request.RemoteIP`一直给我服务器地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-05T19:19:32.600

服务堆栈.4.0.38

字符串 IP = base.Request.RemoteIp；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-04T03:29:52.043

fwiw 我不得不做一些有点不同的事情：

```
HttpListenerRequest iHttpListenerRequest = (HttpListenerRequest)base.RequestContext.Get<IHttpRequest>().OriginalRequest;
string ip = iHttpListenerRequest.RemoteEndPoint.Address.ToString(); 
```

# c# - 换行 WallPost Facebook C#

> ID：16086452
> 
> 赞同：1
> 
> 时间：2013-04-18T15:01:16.883
> 
> 标签：c#, html, facebook, facebook-graph-api, oauth

我正在使用以下代码从我的 c# .net 应用程序在 facebook 上发布：

```
 var fb = new FacebookClient(token);
   string url = string.Format("{0}/{1}", uid, "feed");
   var argList = new Dictionary<string, object>();
   argList["message"] = phought; //message to be posted
   argList["link"] = VIDEOURL;
   object postId = fb.Post(url, argList); 
```

但是当我的帖子包含换行符时，例如：

```
Hi
I 
am
going
out 
```

它显示为：

`Hi \ni \nam \ngoing\nout`

我希望我的代码在 facebook 墙上显示输出，就像我在不显示 html 字符的情况下共享的一样，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:28:51.580

下面的代码绝对有效：

```
var fb= new FacebookClient(token);
fb.Post("me/feed", new {message = "line 1\r\nline 2"}); 
```

在 FB 上，这个帖子：

```
line 1 
line 2 
```

所以你应该看看你的输入字符串“phought”是否有问题！

# python - Python直接路径文件打印问题？

> ID：16086458
> 
> 赞同：0
> 
> 时间：2013-04-18T15:01:30.497
> 
> 标签：python, file, directory

所以我有一个脚本需要打印到不同目录中的文件。我给出了绝对路径，python 不喜欢它。

这是文件所在的位置： `C:\Users\Owner\Documents\Senior_design\QT_Library\build-TransmitterPlot-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug\numbers.txt`

（我知道，路径很长，但是 QT 绘图仪使文件名很长）

我输入：

```
textfile = open('C:\Users\Owner\Documents\Senior_design\QT_Library\build-TransmitterPlot-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug\numbers.txt', 'w') 
```

我得到这个错误：

```
IOError: [Errno 22] invalid mode ('w') or filename: 
```

我读过我可以使用相对路径，但我不确定如何为它提供一个包含这么多目录的相对路径。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:11:40.843

问题是 python 将路径中的反斜杠解释为转义序列：

```
>>> 'C:\Users\Owner\Documents\Senior_design\QT_Library\build-TransmitterPlot-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug\numbers.txt'
'C:\\Users\\Owner\\Documents\\Senior_design\\QT_Library\x08uild-TransmitterPlot-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug\numbers.txt' 
```

请注意，两者都`\b`被`\n`翻译成别的东西。改用“原始”字符串：

```
>>> r'C:\Users\Owner\Documents\Senior_design\QT_Library\build-TransmitterPlot-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug\numbers.txt'
'C:\\Users\\Owner\\Documents\\Senior_design\\QT_Library\\build-TransmitterPlot-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug\\numbers.txt' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:10:18.383

[我相信这里](https://stackoverflow.com/questions/15141761/region-ioerror-errno-22-invalid-mode-w-or-filename)的答案可能会有所帮助。

本质上，您的反斜杠会导致问题。

# ios - 如何正确使用标签栏控制器？

> ID：16086463
> 
> 赞同：0
> 
> 时间：2013-04-18T15:01:56.303
> 
> 标签：ios, xcode, uitabbarcontroller, storyboard, uistoryboardsegue

我的应用程序使用不同的主细节，它包含在带有 tableView 的初始 ViewController 中，但是当用户单击导航控制器中的添加按钮时，我需要使用以下函数发送一个对象：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"AddDGV"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        [[segue destinationViewController] setDetailView:object];
    }
} 
```

当目标是另一个 ViewController 时，代码可以正常工作，但我的应用程序被设计为使用 TabBarController 而不是 ViewController。此 TabBar 有 2 个选项卡，每个选项卡都有不同的导航控制器，第一个是标识符“AddDGV”的目标。我创建了 .m/.h 文件并在情节提要中关联了该类，并将实例变量“DetailView”设置为 ID。

```
@property (strong, nonatomic) id detailItem; 
```

问题是编译器不知道这个变量，因为命令`[segue destinationViewController]`包含视图控制器，其内容应该显示在 segue 的末尾。由于 segue 的结尾是 TabBarController，因此该功能不起作用。

有人知道怎么解决吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T03:03:38.147

对输出进行类型转换

```
[segue destinationViewController] 
```

如下

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"AddDGV"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        [(YourDestinationViewController *)[segue destinationViewController] setDetailView:object];
    }
} 
```

# regex - 正则表达式查找只有一个斜杠的 URL

> ID：16086468
> 
> 赞同：0
> 
> 时间：2013-04-18T15:02:11.583
> 
> 标签：regex, url

我正在测试一个网站，并且需要使用正则表达式来定位我想要包含在测试中的页面。

我将只定位在 URL 中都有一个斜杠的产品页面（这些 URL 中不显示 http://）。

以下是我需要匹配的 URL：

我想要的看起来像这样 www.mysite.com/just-on-slash

我不想要的看起来像这样：www.mysite.com/more-than-one/slash www.mysite.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:35:52.820

这应该适用于您的情况：`^[^/]+/?[^/]+$`

为了使答案是通用的，最后只需要一个斜杠`/?`，如下所示： `^[^/]+/?[^/]+/?$`

# jquery - 保持 jQuery datetimepicker 打开

> ID：16086476
> 
> 赞同：0
> 
> 时间：2013-04-18T15:02:34.817
> 
> 标签：jquery, twitter-bootstrap, datetimepicker

让我分享我的确切情况。我有两个输入

```
<input type="text" id="dt1" readonly="readonly" />
<input type="text" id="dt2" readonly="readonly" /> 
```

我已经设置了日期选择器，如下所示

```
$("#dt1").datepicker({
            showOn: "button",
            buttonImage: "../images/calender.gif",
            buttonImageOnly: true,
            changeMonth: true,
            changeYear: true,
            onSelect: function (dateText, inst) {
                $("#dt2").datepicker("show");
            }
        });

 $("#dt2").datepicker({
            showOn: "button",
            buttonImage: "../images/calender.gif",
            buttonImageOnly: true,
            changeMonth: true,
            changeYear: true,
            onSelect: function (dateText, inst) {
                $("#dt1").datepicker("show");
            }
        }); 
```

现在我正在做的是，在选择一个日期选择器时，我正在打开另一个日期选择器。

在通过萤火虫检查标记时，我发现只有一个`datepicker div`为两个日期选择器处理。

因此，通过单击 imageButton 它将设置该 div`display:block;`并且焦点从那里丢失它将设置该 div`display:none;`

所以问题是，在选择一个日期选择器时，它将显示另一个日期选择器，但在第一个日期选择器的 onclose 事件之后将被调用，这将设置该日期选择器的 div `display:none`。所以第二个日期选择器将不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:51:43.160

作为解决方案，

我打开第一个日期选择器`onClose`的第二个日期选择器而不是`onSelect`.

```
 $("#dt1").datepicker({
            showOn: "button",
            buttonImage: "../images/calender.gif",
            buttonImageOnly: true,
            changeMonth: true,
            changeYear: true,
            onSelect: function (dateText, inst) {
            },
            onClose: function (dateText) {
                $('#dt2').focus();
            }
        }); 
```

现在它对我来说工作正常。

# git - 用git合并两个分支时发生冲突

> ID：16086484
> 
> 赞同：0
> 
> 时间：2013-04-18T15:02:47.847
> 
> 标签：git, merge, branch, conflict, git-merge

我在合并 2 个分支时遇到问题。我有一个包含以下内容的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<language xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="sk" xsi:noNamespaceSchemaLocation="language.xsd">
  <topic name="topicName">
    <section name="sectionName">
      <pair key="key_1" state="0">value 1</pair>
      <pair key="key_2" state="0">value 2</pair>
    </section>
  </topic>
</language> 
```

那么下面的案例：

分支“master”仅在 xml 文件中将“状态”从“0”更改为“1”。IE

```
<?xml version="1.0" encoding="utf-8"?>
<language xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="sk" xsi:noNamespaceSchemaLocation="language.xsd">
  <topic name="topicName">
    <section name="sectionName">
      <pair key="key_1" state="1">value 1</pair>
      <pair key="key_2" state="1">value 2</pair>
    </section>
  </topic>
</language> 
```

然后将更改提交并推送到中央存储库。

分支“测试”添加了一个新节点。IE ：

```
<?xml version="1.0" encoding="utf-8"?>
<language xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="sk" xsi:noNamespaceSchemaLocation="language.xsd">
  <topic name="topicName">
    <section name="sectionName">
      <pair key="key_1" state="0">value 1</pair>
      <pair key="key_2" state="0">value 2</pair>
      <pair key="key_3" state="0">value 3</pair>
    </section>
  </topic>
</language> 
```

然后将更改提交并推送到中央存储库。

当我在“master”分支中合并“Test”分支时，我遇到了冲突。IE

```
[master] git pull origin Test 
```

冲突的文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<language xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="sk" xsi:noNamespaceSchemaLocation="language.xsd">
  <topic name="topicName">
    <section name="sectionName">
<<<<<<< HEAD
      <pair key="key_1" state="1">value 1</pair>
      <pair key="key_2" state="1">value 2</pair>
=======
      <pair key="key_1" state="0">value 1</pair>
      <pair key="key_2" state="0">value 2</pair>
      <pair key="key_3" state="0">value 3</pair>
>>>>>>> b872e7d1bbbe281482baefa73e322a34c475aa92
    </section>
  </topic>
</language> 
```

我不明白为什么这些变化会导致冲突。我可以保证文件上没有其他更改，例如空格、制表符或新行。（我已经多次重现这种冲突）

当我使用合并工具打开冲突文件时，它显示没有冲突。它只显示更改，合并工具不会自动合并新行。（我使用 git 版本 1.7.10.4）

有人可以解释为什么会发生这种情况以及如何避免这种冲突。

提前致谢。

**编辑**：我正在寻找更好的合并工具来解决 git 冲突。我找到了**kdiff3**。当我执行命令时：

```
git mergetool --tool kdiff3 sk.xml 
```

该工具没有显示，但它确实自动解决了冲突。我很高兴。

现在我的问题：
1\. 为什么 git 不能这样做？
2\. “kdiff3”可以通过trusted，那它解决冲突好不好？我手动检查了我发布的这种类型的冲突，它很好地解决了冲突。但是有没有可能，这个工具可能会不正确地自动合并文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:41:25.330

虽然我们人类认识到第一个分支只是将`0`一对行中的每一行上的一个字符更改为`1`，但大多数 diff/merge 工具并不这样看。这些程序是面向行的。
2行被删除。在那里插入了 2 条新行。任何相似性都无关紧要。

第二个分支插入另一行，但在哪里？我们知道它在该`</section>`行之前，但它之前的 2 行被另一个分支引用以删除。唯一相同的是`<section ... >`线。

一个人可能会合理地猜测`key_3`应该在两个新`key_1`&`key_2`行之后插入新行，但是没有合理的方法可以以编程方式确定这一点。

谨慎行事并非没有道理。

避免这种情况需要面向字节/字符的差异工具，但也有价格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:49:31.843

master 和 Test 分支上的两行都发生了变化。这是合并冲突的典型案例。

Git 不知道，键 1 和 2 的状态现在应该是 1（因为它在 master 上）还是 0（因为它在 Test 上）。我们必须手动解决这个问题。

# jquery - jquery scrollTo 或动画到顶部？

> ID：16086485
> 
> 赞同：-3
> 
> 时间：2013-04-18T15:02:48.270
> 
> 标签：jquery, jquery-animate, scrollto

我正在使用这个[插件](http://tympanus.net/Tutorials/ThumbnailGridExpandingPreview/)：

*   打开插件
*   如果您单击图像，它会打开一个大图像。当你关闭它时，身体应该向上滚动。

我想在点击关闭时滚动到顶部。！

也许：添加一个类`self.$item.addClass( 'not-expanded' );`可以工作吗？但没有。

```
 if ($('.not-expanded').is(':visible')) {
         $('html').animate({top:'110px'}, 800 );
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:21:18.733

显然，关闭大图像的唯一方法是单击 div 右上角的十字。我建议您进入 .js 文件，当您单击十字时，该文件会为 div 的“slideUp”设置动画，并使用滚动顶部向该动画添加回调函数。

# android - 嵌套首选项屏幕在 Android 中的屏幕方向更改时关闭

> ID：16086487
> 
> 赞同：2
> 
> 时间：2013-04-18T15:02:49.320
> 
> 标签：android, screen-orientation, preference, preferencescreen

我最近偶然发现了一个问题。

我正在使用这样的嵌套 PreferenceScreen：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<PreferenceScreen
    android:key="pref_name"
    android:title="@string/pref_title" >

</PreferenceScreen> 
```

当我的屏幕焦点位于嵌套首选项屏幕上并且我更改屏幕方向时，嵌套首选项屏幕关闭。

我也试过包括：

```
android:configChanges="orientation|keyboardHidden" 
```

在 AndroidManifest.xml 中，但没有工作。

有人对此有解决方案吗？

**编辑可能的解决方案：**

我确实找到了解决方案。我以为是这一行：

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-22T15:25:26.697

知道了。为了防止嵌套屏幕在旋转时关闭，您需要确保父屏幕被赋予一个键值。而已。例如：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" 
    android:key="useless_key">

    <PreferenceScreen
        android:key="pref_name"
        android:title="@string/pref_title" >
    </PreferenceScreen>
</PreferenceScreen> 
```

旁注，虽然覆盖 onConfigChanges 解决了这个问题，但您几乎不应该这样做。它完全改变了 Activity 的正常行为方式。轮换只是配置更改发生的众多原因之一。如果您的 Activity 无法正确处理旋转，那么它在处理其他条件时也会失败。查看这篇有见地[的帖子](https://stackoverflow.com/a/7990543/1243753)了解更多信息。

# batch-file - 在多个音乐文件上运行命令行

> ID：16086490
> 
> 赞同：0
> 
> 时间：2013-04-18T15:02:54.953
> 
> 标签：batch-file, directory, command, flac

我正在使用名为 metaflac ( [http://flac.sourceforge.net/documentation_tools_metaflac.html](http://flac.sourceforge.net/documentation_tools_metaflac.html) ) 的 CLI 程序从计算机上的各种 FLAC 音乐文件中删除填充。在批处理文件（与 metaflac.exe 位于同一文件夹中）中使用以下命令可成功完成单个文件的此任务：

metaflac --dont-use-padding --remove --block-type=PADDING "filename.flac"

我必须为数千个文件执行此操作，并且不想手动/单独执行所有操作。有没有一种简单的方法可以简单地将这个命令指向一个目录并让它作用于那里的每个文件？这会节省我很多时间。

谢谢！

我正在使用 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:24:57.843

当然。`cmd`您可以使用提示符中的单行来完成此操作。

```
for /f "delims=" %I in ('dir /s /b *.flac') do metaflac --dont-use-padding --remove --block-type=PADDING "%I" 
```

如果要将其放入`.bat`脚本中，请在两个地方都更改`%I`为。`%%I`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:24:47.200

```
for /f "delims=" %%i in ('dir /s /b /a-d "C:\start\directory\*.flac"') do (
 metaflac --dont-use-padding --remove --block-type=PADDING "%%~fi"
) 
```

应该为您执行此操作，从“C:\start\directory”扫描整个目录树以查找所有文件，并使用您的参数对每个`.flac`文件执行。`metaflac`

为了安全起见，建议您先尝试一个小的复制子树。

# javascript - 使用正则表达式替换 XML 属性值

> ID：16086492
> 
> 赞同：0
> 
> 时间：2013-04-18T15:02:57.693
> 
> 标签：javascript, xml, regex, replace

我有一个 svg 存储在一个字符串中。它的一部分看起来像：

```
var str = '<svg version="1.1" width="1400px">'; 
```

我正在寻找一种解决方案来替换任何给定属性的值。现在，如果我想更改`width`，我正在执行以下操作：

```
var prop = "width";
var newValue = "100px";
var regex = new RegExp(prop + '="[^"]*');
str = str.replace(regex, prop + '="' + newValue); 
```

有没有办法用一个正则表达式来做到这一点，这样我就不必在之后构建一个字符串？

或者换一种说法，什么是正则表达式，当前面有一个特定的字符串时，它只会选择引号之间的文本？

`fill="**howCanISelectThisText?**"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:21:58.440

最好使用缓冲区并将其视为真正的 HTML 对象；

[JSfiddle](http://jsfiddle.net/Allendar/5jqpq/)

**HTML**

```
<div id="hidden"></div> 
```

**CSS**

```
#hidden {
    display: none; 
} 
```

**JavaScript**

```
var hidden = document.getElementById('hidden');
var str = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" fill="#ffffff"  width="1400px" height="180px" viewBox="0 0 1400 180" enable-background="new 0 0 1400 180" xml:space="preserve">';
hidden.innerHTML = str;

var prop = "width";
var newValue = "100px";

var svgObject = hidden.getElementsByTagName('svg')[0];
svgObject.setAttribute(prop, newValue)

console.log(svgObject.getAttribute('width'));

// Done
str = hidden.innerHTML;

// When you're done, empty hidden buffer
hidden.innerHTML = ''; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:24:42.580

这*不是*正则表达式的工作！这是 XML 解析器的工作。所有“现代”浏览器（这意味着 IE 9+）都应该内置一个。它被称为`DOMParser`。

[文档：[https ://developer.mozilla.org/en-US/docs/Parsing_and_serializing_XML](https://developer.mozilla.org/en-US/docs/Parsing_and_serializing_XML)]

它使用起来非常简单，甚至比正则表达式更容易！这是一个例子：

```
var str = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" fill="#ffffff"  width="1400px" height="180px" viewBox="0 0 1400 180" enable-background="new 0 0 1400 180" xml:space="preserve">';

var parser = new DOMParser;
var serializer = new XMLSerializer;

// Your string doesn't have a close tag, it won't parse without one
var doc = parser.parseFromString(str+'</svg>', 'application/xml');

doc.documentElement.setAttribute('width', '100px');

// The serializer will self-close the element, let's remove that
str = serializer.serializeToString(doc).replace('/>', '>');

console.log(str); 
```

演示：http: [//jsfiddle.net/qpu33/](http://jsfiddle.net/qpu33/)

# c# - Telerik 从不同的表格中添加两个单元格

> ID：16086495
> 
> 赞同：0
> 
> 时间：2013-04-18T15:03:07.113
> 
> 标签：c#, telerik

我在 Telerik 有两个单独的表。是否可以将它们的内容添加在一起？内容是两个浮点值。这看起来应该相对简单（也许是），但我还没有成功地做到这一点。我已经尝试过这样的事情`=(table1.Cell1.Value + table2.Cell1.Value)`，但它给了我一个错误，说表格单元格值不在当前上下文中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:35:22.640

所以我最终只是制作了一个新的存储过程。这将收集我需要的信息。然后，我创建了一个新的 sql 数据源，并在单独的表中将其用作“总计”表。获得应该/可能的东西的一种非常迂回的方法非常简单。无论如何，它很丑陋，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:17:01.930

这是可能的，并且可以在客户端使用 Javascript 来完成。在服务器端，我将直接访问这两个数据源，并将数据绑定到接收计算输出的第三个控件。

如果您想进一步讨论，请告诉我

# c# - 使用 WebAPI 自托管服务的最大并发连接数 - Windows 7

> ID：16086498
> 
> 赞同：4
> 
> 时间：2013-04-18T15:03:14.040
> 
> 标签：c#, .net, asp.net-web-api

我有一个使用 WebAPI 的 SelfHost 功能编写的 Windows 服务。

我想知道如果安装在 Windows 7 机器（企业版）上，该服务可以处理多少并发连接

根据我可以找到的信息，在 Windows 7 上运行 IIS 时，最大连接数为 20。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T15:23:58.287

Windows 客户端操作系统作为服务主机不可行，因为 Microsoft 对它们可以接受的连接数量进行了严格限制。在所有版本的 Windows 7 和 8 中都是如此。

# date - 如何使用 Apache POI XSSF 事件模型检查日期是否使用 1904 窗口

> ID：16086504
> 
> 赞同：7
> 
> 时间：2013-04-18T15:03:28.087
> 
> 标签：date, apache-poi, xssf

我正在编写一个使用 Apache POI 事件模型（SAX/XSSF）导入 xlsx 文件的程序。我快完成了，但我无法得到正确的日期。

我正在解析具有日期值的单元格

```
<c r="D1" s="1">
    <v>41319.558333333334</v>
</c> 
```

我正在使用`org.apache.poi.ss.usermodel.DateUtil`课程来获取日期：

```
DateUtil.getJavaCalendar(doble date, bool use1904windowing); 
```

我应该通过什么`use1904windowing`来获得正确的日期？我暂时使用`false`，因为这为我的测试工作簿提供了正确的日期，但我知道我应该从某个地方读取该值。

有一条`DateWindow1904Record`二进制 xls 格式的记录，我使用 HSSF 读取。它在 XSSF 中的对应物是什么？还是我应该一直使用`false`？

**编辑**：@rgettman 回答为我指出了解决方案，但它并不完整。在事件模型中，您没有 xssfWorkbook 对象，您不能只获取它的 getCTWorkbook()。

相反，您可以直接从 InputStream 创建 CTWorkbook：

```
OPCPackage pkg = OPCPackage.open(filename);
XSSFReader r = new XSSFReader( pkg );
InputStream workbookXml = r.getWorkbookData();
CTWorkbook ctWorkbook = CTWorkbook.Factory.parse(workbookXml);
boolean isDate1904 = ctWorkbook.getWorkbookPr().getDate1904(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-12T17:54:29.900

编辑部分中描述的代码可以编译，但在 POI 3.9 中始终返回 null CTWorkbookPr 下面的代码实际上解析了工作簿前缀：

```
OPCPackage pkg = OPCPackage.open(filename);
XSSFReader r = new XSSFReader( pkg );
InputStream workbookXml = r.getWorkbookData();
WorkbookDocument doc = WorkbookDocument.Factory.parse(workbookXml);
CTWorkbook wb = doc.getWorkbook();
CTWorkbookPr prefix = wb.getWorkbookPr();
boolean isDate1904 = prefix.getDate1904();
pkg.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T17:17:38.713

可以确定 XSSF 中是否设置了 1904 日期格式。不幸的[`isDate1904()`](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFWorkbook.html#isDate1904%28%29)是`protected`，在`XSSFWorkbook`. 但是有一个变通方法，因为`XSSFWorkbook`使用该方法公开了其底层 XML bean，因此成为可能[`getCTWorkbook()`](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFWorkbook.html#getCTWorkbook%28%29)。

```
boolean isDate1904 = false;
CTWorkbook internalWorkbook = xssfWorkbook.getCTWorkbook();
CTWorkbookPr workbookPr = internalWorkbook.getWorkbookPr();
if (workbookPr != null)
{
    isDate1904 = workbookPr.getDate1904();
} 
```

此代码检查底层 XML bean 以确定`date1904`它是否设置了属性。也可以`CTWorkbookPr`使用该方法使用相同的 XML bean ( )设置该标志`setDate1904(boolean)`。

# c++ - 不同类型的嵌套容器

> ID：16086511
> 
> 赞同：2
> 
> 时间：2013-04-18T15:03:37.440
> 
> 标签：c++, stl

我是 STL 的新手，想知道实现这一点的最佳方法：我想用不同类型的元素嵌套容器。我的想法是一个集合，它的元素可以是向量或地图。

通过这种方式，我可以遍历该集合，将通用操作应用于其所有元素。同时，对元素的一些操作将依赖于矢量或地图类型。但是，我假设所有元素都必须属于同一类型。

是否有替代方案来实施这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:11:23.093

您不能将两种不同类型的对象放入标准容器中。您要做的就是将容器“包裹”在另一个“知道”它实际持有的对象类型的对象中。`boost::variant<T1, T2 ... >`是一种相对标准的做法。如果您不能使用 boost 库，那么您可能会发现这样的东西可以正常工作：

```
struct wrapper
{
     int type;  // or enum 
     union {
         vector v;
         map m;
     } content;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:21:45.493

语言并不真正支持您尝试做的事情，虽然您可以使其工作，但它不会简单或优雅。sftrabbit 建议的方法（一旦你修复了语法:)）可以让你成功，但迭代需要创建一个访问者，可能需要一个函子来应用于元素；为了能够在有序容器中使用它，您需要将其包装在提供排序的类型中......

您预期设计的另一个问题是`std::set`不允许修改嵌套元素，这基本上意味着一旦将容器添加到容器中，`std::set`它们就会变得不可变。如果这没问题，您可以采用不同的方法，只需在包含到外部*后*`std::vector<ElementType*>`保持 a指向所有现有元素。这将让您以更简单的线性方式迭代所有元素。*`std::set`*

 *一个更简单的解决方案可能是创建一个类来替换外部容器并在内部`std::set`为每个嵌套容器保存两个不同的（再次假设不变性不是问题，或者如果需要，可以使用不同的容器）：

```
class Container {
   std::set<std::vector<Type>> d_vectors;
   std::set<std::map<Key,Type>> d_maps;
... 
```

然后该`Container`类型可以包含迭代内部容器的函数。

再说一次，您可能想重新审视最初的问题，并发现有一些更简单的方法一开始就不需要这个……而且可能更干净。*

# web-services - 在 REST Web 服务中使用查询字符串

> ID：16086513
> 
> 赞同：11
> 
> 时间：2013-04-18T15:03:41.997
> 
> 标签：web-services, rest, query-parameters, path-parameter

我认为使用 REST Web 服务的一个主要特征和原因是使用路径参数而不是查询参数。但是许多公开可用的 REST Web 服务使用查询参数。

我认为查询参数不应该在 REST Web 服务中使用是错误的吗？是否有关于不在 REST Web 服务中使用查询参数的建议或规则？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-21T18:44:51.240

查询字符串仍然可以在 REST Web 服务中使用，只是方式不同。

您必须将 URL 视为资源的*键*。URL 是资源的唯一标识符。例如

```
http://example.com/products/123   -- where 123 is the id of the products. 
```

访问`/products`将返回完整的产品列表。添加 id 将返回特定产品。

* * *

### 为每个过滤器使用斜线的问题

如果您想以特定方式订购产品怎么办？有人会说

```
http://example.com/products/united-states 
```

好吧，现在乍一看有些模棱两可。美国是身份证吗？好吧，可以通过将 id 表示为来解决歧义`\d+`。正确的。

好的，所以我们的第一个由单词组成的参数是一个国家。

现在假设我们要添加更多过滤器，让我们尝试添加更多斜线。

```
http://example.com/products/united-states/home/asc 
```

但我不只想要美国产品！但还是想要家用产品。

```
http://example.com/products/home/asc 
```

等等……家是一个国家吗？我现在不确定，这有点模棱两可......如果我明天想添加另一个过滤器怎么办？我会怎么做...添加更多的斜线？

URL 变得杂乱无章，充满了模棱两可的参数，这些参数起初是可选的，但由于模棱两可而变得强制性。

* * *

### 我的建议

对我来说，正确的方法是将**查询字符串**用于特定于查询的内容。因为，我可以以任何我想要的方式对查询进行排序，它仍然是同一个查询。我查询产品。

所以表格应该是这样的

```
http://example.com/products -- all products
http://example.com/products/{id} -- specific one
http://example.com/products/?country=united-sites -- filtered 
```

这样，您可以随时添加新过滤器，并保持 URL 清晰且即使您更改过滤器也不会中断。

* * *

### 更多信息

如果你想了解更多信息，我真的非常建议你**看看**David Zülke的**[这次会议，他是为 Symfony 框架工作的人。](http://www.youtube.com/watch?feature=player_embedded&v=NEWTPFzt2-E)**他谈到了很多关于 REST Web 服务的事情，但他也专门谈到了 URL，以及如何构建它们*（主要是 16 到 30 分钟）*。

你也可以看看**[apigee网站](http://apigee.com/about/api-best-practices)**。他们有很多关于 REST 的视频（和书籍）。更具体地说，[这个视频](http://apigee.com/about/api-best-practices/restful-api-design-second-edition)，这是真正的主题。

# excel - 使用宏在 Excel 中多次启动命令

> ID：16086514
> 
> 赞同：0
> 
> 时间：2013-04-18T15:03:44.317
> 
> 标签：excel, vba

我在电子表格的自定义选项卡中有一个命令。我想在我的电子表格中以不同的条件多次启动此命令，即每次我想运行命令时都会更改一个单元格。结果相应地写入以单元格值命名的新工作表中。

要从宏运行命令，我将它放在快速访问工具栏中。

```
ActiveCell.Value = "2"
Application.SendKeys "%4"
ActiveCell.Value = "3"
Application.SendKeys "%4"
ActiveCell.Value = "4"
Application.SendKeys "%4" 
```

只有最后一个 SendKeys 命令运行。等待只会延迟而不是让它工作。

有什么建议么？

编辑：错字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:56:08.443

VBA 具有内置的事件侦听器，例如单元格更改。例如：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)

End Sub 
```

每次进行更改时，您都可以使用类似的方法来运行宏。您通常还需要在运行时禁用监听，否则您将创建一个无限循环:)

# asp.net - ASP.Net 应用程序自我更新

> ID：16086518
> 
> 赞同：1
> 
> 时间：2013-04-18T15:03:59.097
> 
> 标签：asp.net

我正在尝试让现有的 asp.net Web 应用程序从其内部进行更新。我们有很多不同的客户端使用应用程序，它们都有不同的连接字符串，所以它不能只是一个简单的部署。

我目前正在部署到文件系统，压缩和上传（没有 web.config），客户端会相应地下载和提取。我不喜欢这样，因为它需要在服务器上或为应用程序创建共享。

因此，我在应用程序中创建了一个 signalR 集线器，用于下载文件并将其解压缩。这可行，但是页面在开始提取时会停止从集线器返回信息，因为我猜是因为应用程序正在重新启动。

有没有办法让它在应用程序中工作并报告它的进度，如果我可以帮助它，我不想使用任何外部的东西我只是想更新它，就像你从内部更新 Wordpress 一样。

编辑：只想指出我使用了一个集线器，这样我就可以显示压缩文件下载百分比的实时进度和提取进度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:20:17.933

我们有一个基于这个想法的定制系统。

诀窍是有一个单独的更新应用程序。该应用程序公开了一个 Web 服务，该服务接受包含应用程序部署文件的签名请求。然后，请求存储在本地队列中并由服务处理，该服务：

1.  停止应用程序池
2.  解压新版本
3.  使用本地存储的属性重写配置模板文件
4.  启动应用程序池并在出现任何问题时返回 ping

我们在我们的主要办公室需要的是一个新版本的应用程序，然后分发到周围的所有位置（目前大约 20 个）。没有什么大问题。

分发子系统是多年前在内部开发的，并且基于.net，只是因为我们当时还没有找到任何可以满足我们要求的东西。从那以后，我们没有尝试搜索任何可以做同样事情的第三方工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:53:14.317

尽管尝试了几件事，但我无法让它工作，所以我创建了一个控制台应用程序，其中为每个客户端修改了一个配置文件，他们可以自己运行，甚至添加为计划任务，这似乎工作得很好。

# java - GCD，欧几里得算法

> ID：16086520
> 
> 赞同：-3
> 
> 时间：2013-04-18T15:04:02.557
> 
> 标签：java

我似乎找不到这个错误的解决方案..请不要评判我。初学者在这里。

```
import java.util.Scanner;
public class GreatestCommonDivisor {

    public static void main(String[] args) {
        Scanner kbd = new Scanner(System.in);
        int num1;
        int num2;
        int gcd;
        boolean again = false;

        do {
            System.out.print("First positive integer: ");
            num1 = inputPosInt();

        System.out.print("Second positive integer: ");          
            num2 = inputPosInt();
            //....
            gcd = gcd();
            (again) = tryAgain();
        } while (again);    {
                System.out.println("Thank you for testing this program.");
        }

    }

   public static int inputPosInt () {
        Scanner kbd = new Scanner(System.in);
         int num;

        num = kbd.nextInt();

        if (num < 0) {
            System.out.println("Entered integer value is non-positive.");
            return 0;
        }
         return num;

    }

    public static int gcd(int num1, int num2) {

     if (num2==0) {
        return num1; 
            }
     return gcd(num2,num1%num2);
}

    public static boolean tryAgain() {
        Scanner kbd = new Scanner(System.in);
        System.out.print("Would you like to try again? [Y/N]");
        char again;
        again = kbd.nextLine().charAt(0);
        if (again == 'y' || again == 'Y') {
            return true;
        }

        else if (again == 'n' || again == 'N') {
            System.exit(0);
        }

        return false;
    }

} 
```

该程序需要 2 个正整数输入，并使用欧几里得算法求解其 GCD。

错误：gcd = gcd(); ^ 必需：int，int 找到：无参数原因：实际参数列表和形式参数列表长度不同 1 错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:06:17.937

调用`gcd`函数时，需要传入两个整数作为参数。在您的情况下，这两个整数可能是您读入的两个整数。因此，它可能看起来像：

```
gcd = gcd(num1, num2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:06:43.043

当你有`gcd = gcd();`你没有传递它需要的参数时。您的方法定义是`public static int gcd(int num1, int num2)`，它需要两个整数。

调用的一个例子是`gcd = gcd(54, 24)`. 在你的情况下，你可能想要`gcd = gcd(num1, num2)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:09:05.667

您正在调用该方法`gcd(int, int)`，但没有在`gcd()`.

所写的`gcd(int, int)`方法将要求您给它两个整数作为输入。

# android - 不断将移动应用程序与服务器同步

> ID：16086522
> 
> 赞同：0
> 
> 时间：2013-04-18T15:04:04.407
> 
> 标签：android, ios, client-server, real-time

我开始构建一个移动应用程序（android和ios），该应用程序需要有一些“管道”才能与服务器持续同步少量信息（某种可以随时更改的用户设置）时间），最终用户需要一直从数据服务器获取一些设置......

我需要了解解决此问题的最佳方法是什么，因为我知道我可以每 1 秒向服务器发送一次请求，但我不认为这是最好的解决方案。

我的信息量非常小（200个字符）......

某种实时信息...

任何方向都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:30:04.390

This link to a previous stackoverflow question looks to answer your question...

You would just need to place your polling code in their "Messaging" method.

[https://stackoverflow.com/a/14590774/2208006](https://stackoverflow.com/a/14590774/2208006)

# php - CakePHP：如何控制 find() 方法返回的数据结构

> ID：16086523
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:04:08.807
> 
> 标签：php, arrays, cakephp, cakephp-2.0

在我的`TestsController.php`我正在使用该`find()`方法...

```
$r = $this->Question->find('all', array('conditions' => $conditions )); 
```

...结果数据如下所示：

```
array(
    (int) 0 => array(
        'Question' => array(
            'id' => '2',
            'created' => '2013-02-13 14:15:16',
            'modified' => '2013-04-18 09:10:03'
        ),
    ), ... 
```

请注意数组中的每个项目是如何包装在*另一个*数组中的。我想让该数组的结构与我在其他地方使用它的方式保持一致，以便它可以很好地与元素和其他代码一起使用，当我在控制器中设置变量时期望结构匹配......

```
$question = $this->Question->findById($id);
$this->set('question', $question); 
```

...这导致：

```
array(
    'Question' => array(
        'id' => '1',
        'created' => '2013-04-04 15:25:54',
        'modified' => '2013-04-04 15:25:54'
    ), ... 
```

我知道的唯一区别是第二个示例使用了该方法，并且第一个示例中的 位于不同模型的控制器内`findById()`也可能相关。`find()`

**有没有办法让它们匹配？**

（我知道我可以手动重新排列数据，`array_map()`但我宁愿理解为什么它们不同而不必这样做。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:43:42.923

正如@dave 所说，当期望多条记录时，很自然地有编号的数组，就像 find('list')、find('all') ......好吧，除了 find('first') 之外的每个人。
只需了解您期望获得的记录类型即可。

但是，如果您决定更改该功能并将每条记录作为编号数组以使其保持一致，则有一种方法可以仅更改一个文件。

在您的 AppModel 中

```
public function afterFind($results, $primary = false) {
    if(!Set::numeric(array_keys($results)) {
        $results= array($results);
    }

    return $results;
} 
```

这样，你所有的 find() 方法都会返回

```
array(
(int) 0 => array(
    'Question' => array( /*data*/ ),
), ... 
```

哪怕只是一张唱片。

*警告*：我没有在 AppModel 中尝试过，只是在特定情况下，所以测试功能并不断调整代码，直到涵盖所有情况。有些事情可能会产生错误：`$results`没有结果，以及从其他模型检索相关数据时。所以要小心，因为这个功能不是确定的，你必须玩一点（可能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:29:48.030

当您使用 find 时，它需要多个结果，当您使用 findById 时，它需要一个。自然地，第一个方法返回一个数组数组，因此您可以迭代每个项目。如果您只希望拿回一件物品，那么您应该可以这样做：

```
$r = $this->Question->find('all', array('conditions' => $conditions ));
$r = $r[0]; 
```

如果您使用的是较新版本的 PHP，您甚至可以执行以下操作：

```
$r = $this->Question->find('all', array('conditions' => $conditions ))[0]; 
```

# c# - 从提升的进程 C# 重定向输出

> ID：16086529
> 
> 赞同：0
> 
> 时间：2013-04-18T15:04:35.427
> 
> 标签：c#, redirect

我需要从 C# 运行一个提升的进程，并且我需要它来重定向输入和输出。由于这三个都做是不可能的，我想我可能想出了一个解决方法，但它似乎不起作用。

```
 Process p = new Process();

        string command1 = "/s " + path + "\\script1.script";

        p.StartInfo = new ProcessStartInfo("diskpart",command1)

        {

            UseShellExecute = true,

            CreateNoWindow = false,

            Verb="runas"

        };

        p.Start();

        p.WaitForExit(); 
```

这样可行。它使用刚刚执行的脚本调用 DiskPart `list volume`。我想将输出捕获到`outfile1.txt`. 当我从终端运行以下命令时，它可以工作： `diskpart /s script1.script>outfile1.txt` 但是，当我修改`command1`为时`"/s " + path + "\\script1.script>+path+"\\outfile1.txt"`，我从 DiskPart 收到一个错误，它无法打开或读取我的文件。我究竟做错了什么？

编辑

没有找到解决方案，但我找到了解决方法。

我试图获取 USB 驱动器的驱动器号，然后我想将其设置为只读。但是，使用`DriveInfo.Name`我能够得到它。（如果调用它会更有帮助`DriveInfo.driveLetter`）然后我相应地编写了我的 DiskPart 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:14:33.510

您的 command1 中可能有语法错误。您说您将其更改为：

> "/s " + 路径 + "\script1.script>+path+"\outfile1.txt"

我认为您想要的是（缺少一个双引号）：

> “/s” + 路径 + “\script1.script>” + 路径 + “\outfile1.txt”

如果不是这种情况，当您使用终端命令 - “diskpart /s script1.script>outfile1.txt” - 作为 command1 时会发生什么？您可能想查看其他 stackoverflow 主题以在 C# 中运行命令：

[运行命令提示符命令](https://stackoverflow.com/questions/1469764/run-command-prompt-commands "运行命令提示符命令")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T07:19:51.293

没有找到解决方案，但我找到了解决方法。

我试图获取 USB 驱动器的驱动器号，然后我想将其设置为只读。但是，使用`DriveInfo.Nam`e 我能够得到它。（如果调用它会更有帮助`DriveInfo.driveLetter`）然后我相应地编写了我的 DiskPart 脚本。

# php - PHP mysql在结果中添加重复项

> ID：16086541
> 
> 赞同：0
> 
> 时间：2013-04-18T15:05:09.857
> 
> 标签：php, mysql, duplicates

我有一个数据库，每次有人下载文件时都会存储信息。每次下载文件（根据客户要求）时，它都会捕获名称电子邮件和日期戳。

我希望能够连接到数据库并添加所有重复的条目。因此，如果电子邮件 a@a.com 有 10 个结果，它将打印“a@a.com；10 次下载”。

这是我到目前为止所尝试的。但是它在页面上超时：

```
function userFile($id) // $id = File ID
 {
    $order = "SELECT * FROM downloads WHERE dl_id='$id'";
    $result = mysql_query($order);
    while($row=mysql_fetch_array($result)){     
        $email = $row['email'];
        $order = "SELECT * FROM downloads WHERE email='$email'";
        $result = mysql_query($order);
        $num_rows = mysql_num_rows($result);
        print $row['email'] . ' ' . $num_rows;
    }
 } 
```

必须有一种更简单或更好的方法来做到这一点。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:09:25.963

```
function userFile ($id) // $id = File ID
{
    $order = "SELECT COUNT(*) AS `count`, email FROM downloads WHERE dl_id='$id' GROUP BY email"
    $result = mysql_query($order);
    while($row = mysql_fetch_array($result)) {
        print "{$row['email']}; {$row['count']} downloads.\n"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:10:11.337

让 MySQL 为您完成这项工作。如果我正确理解您的要求，您需要这样的查询：

```
SELECT email, COUNT(*) AS num_rows
FROM downloads
WHERE dl_id='$id'
GROUP BY email 
```

然后您的 PHP 代码将如下所示：

```
function userFile($id) // $id = File ID
 {
    $order = "SELECT email, COUNT(*) AS `num_rows` FROM downloads WHERE dl_id='$id' GROUP BY email";
    $result = mysql_query($order);
    while($row=mysql_fetch_array($result)){     
        $email = $row['email'];
        $num_rows = $row['num_rows'];
        print $email . ' ' . $num_rows;
    }
 } 
```

我今天没有可用的 PHP，所以请注意这是未经测试的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:08:24.423

您应`GROUP BY`在`COUNT`.

```
SELECT *,COUNT(1) FROM downloads WHERE `email`='$email' GROUP BY `email` 
```

# jquery - 隐藏和显示多个选择

> ID：16086543
> 
> 赞同：2
> 
> 时间：2013-04-18T15:05:13.420
> 
> 标签：jquery

我有 2 个选择，我想根据第二个选择的值删除第一个选择的值。例如：如果我从第二个选择中选择值 1 和 2，我希望隐藏值 2,3,4,5，如果在第二个选择中值为 3，我希望隐藏值 1,2,3：

选择1：

```
<select name="select1">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
</select> 
```

选择2：

```
<select name="select2">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select> 
```

这是在选择 1 或 2 的情况下隐藏的代码：

```
var ary=[2,3,4,5];
$('[name=select1] option').filter(function(){
return ($.inArray(parseInt(this.value),ary) >-1);}).hide(); 
```

此代码适用于隐藏，但我有一个问题。当代码在值 1 和 2 上隐藏 2、3、4、5 时，在第二次选择中选择值 3 只显示值 1，因为其他值是隐藏的。我使用 show() 解决了这个问题。然后显示 2,3,4,5 但我无法隐藏值 1 因为 return :// 我试过这个，它不会工作：

```
var ary=[4,5];
var ary2=[1];
$('[name=select1] option').filter(function(){
return ($.inArray(parseInt(this.value),ary) >-1);}).hide()&&($.inArray(parseInt(this.value),arry2) >-1);}).show(); 
```

我还尝试调用另一个总是刷新 select1 的函数，显示它所有的值，并且在这个函数中只使用隐藏，我认为这是正确的方法，但我不知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:39:28.940

在这里摆弄这个：http: [//jsfiddle.net/8ZuGE/](http://jsfiddle.net/8ZuGE/)

请注意，我想在这里添加列表项可能会更有效率，但你明白了：

```
var $resetValues = $('#select1').find("option");

$('#select2').on('change', function() {
    var selected = $("option:selected", this).val();
    // Reset select1
    $('#select1').empty();
    $resetValues.each(function() {
         $('#select1').append($(this));
    });

    var array; // Hidden values
    if(selected > 0 && selected < 3) {
        array = [2,3,4,5];
    } else {
        array = [1,2,3];
    }

    $('#select1 option').filter(function() {
        return ($.inArray(parseInt($(this).val()), array) != -1);
    }).remove();
}); 
```

# android - Android App 中 Spinner 上的文本颜色问题

> ID：16086550
> 
> 赞同：0
> 
> 时间：2013-04-18T15:05:21.937
> 
> 标签：android

我有这个问题：

我的 Android 应用程序中有一个 Spinner (ComboBox)，它填充了一个 SimpleCursorAdapter，其中包含来自数据库的数据。Spinner 已正确填充，问题是它以白色显示项目，即使我将属性 android:textColor = "#000000" 放在声明 Spinner 的 XML 文件（布局）中...

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:30:47.350

`Spinner` doesn't have an attribute named "**android:textColor**".

You can set it in `Adapter` or use Custom Spinner

**Links to set Spinner text color :**

*   [Link 1](https://stackoverflow.com/a/9613363/1329126)
*   [Link 2](https://stackoverflow.com/a/6159199/1329126)
*   [Link 3](http://www.coderzheaven.com/2011/02/20/how-to-create-custom-layout-for-your-spinner-in-android-or-customizable-spinner-2/)

# http - 适用于 Windows Mobile 的 Amazon DynamoDB

> ID：16086553
> 
> 赞同：0
> 
> 时间：2013-04-18T15:05:38.890
> 
> 标签：http, amazon-dynamodb, windows-mobile-6.5

我需要在 Win Mobile 应用程序中使用 DynamoDB（我正在使用 VS2008 和 Smart Device 项目）。我可以在亚马逊网站上找到很多不同平台的 SDK，但找不到适用于 Win Mobile 的 SDK。我可以通过一些现有的 SDK 使用一些技巧来处理这个问题吗？如果不是，那么最好找到一些使用 HTTP 的示例（REST api 或类似的东西）。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T15:54:16.093

.NET C# SDK 是开源的，可以在[GitHub](https://github.com/aws/aws-sdk-net)上找到。
我很长时间没有使用 .NET CF，所以我不知道 .NET SDK sln 使用的框架与您使用的紧凑框架之间的区别。

如果它没有自动链接，也许您可​​以获取与 DynamoDB 相关的部分，并使用 .NET CF 就绪库填充缺失的部分。

我认为从已经强大的项目开始更有意义，然后再次实施 REST。

# c - 简单的curses.h程序，终端没有显示

> ID：16086558
> 
> 赞同：1
> 
> 时间：2013-04-18T15:05:49.440
> 
> 标签：c, macos, netbeans

我必须在我的学校项目中使用 curses.h 库。我们在 NetBeans 中编程。我正在尝试在我的 Mac 上创建一个简单的程序，一切似乎都很好。代码编译完成，打开了一个新的终端窗口，但没有任何显示，只需按 [Enter] 即可关闭终端。我已经包含了 curses.h 库，在调试选项中设置了 -lcurses（我也尝试过 main.c -lcurses）。有一个截图。 [屏幕](http://img594.imageshack.us/img594/459/screenxv.png) 我应该设置什么吗？你能帮我吗？

编辑：

它真的很简单的代码：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <curses.h>

 int main(int argc, char** argv) {

 initscr();

 printw("test");
 refresh();

 endwin();

 return (EXIT_SUCCESS);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:21:03.400

尝试在和`getch()`之间添加等待用户输入。你的程序结束得太快了。`refresh()``endwin()`

# android - 如果我想添加可拖动/可移动的对象，要使用什么布局、视图和设计？

> ID：16086559
> 
> 赞同：0
> 
> 时间：2013-04-18T15:06:00.690
> 
> 标签：android, android-layout, android-view

如果我必须设计一个允许用户将扑克牌添加到屏幕并拖动它们以移动它们的应用程序，我应该使用哪些视图、布局和元素？

可以从任何按钮添加卡片或从任何其他视图拖动卡片。

目前我在 GridView 中添加所有卡片，它们被翻转、添加或删除，我的目标是摆脱那个 GridView。

我一直在到处寻找答案，但我不知道该问什么，我尝试了“如何在视图内移动对象”等，但没有运气。我相信应该用画布来完成，但在学习所有我想知道的东西之前，我是否朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:36:03.350

由于Android支持多种屏幕配置，所以你首先应该考虑是应该用Android的普通API开发游戏还是使用OpenGL开发游戏。

如果你使用Android的普通API，可以使用很多布局，但我认为最合适的是FrameLayout（利用孩子的边距使被拖到屏幕上的任何地方），并根据你需要的视图到你需要展示的东西。例如，如果您只显示卡片的图像，请为它们使用 ImageView。

编辑：如果您支持的最小 API 是 11 或更高版本，您可以使用[**更新的 API 命令**](http://developer.android.com/guide/topics/ui/drag-drop.html)进行拖放。

另一个编辑：如果您希望继续使用 gridView ，请查看[**此解决方案**](http://www.androidviews.net/2012/12/pageddragdropgrid/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:30:06.387

我建议在点击 StackOverflow 之前查看官方文档：http:
[//developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

# iframe - 尝试在 iframe 中执行拖放时出现 MoveTargetOutOfBoundsError

> ID：16086562
> 
> 赞同：3
> 
> 时间：2013-04-18T15:06:04.063
> 
> 标签：iframe, drag-and-drop, webdriver, watir-webdriver

我正在尝试为 Web 应用程序自动化一些测试，并且许多测试需要在`<iframe>`. 我将一个锚点从一个 jspContainer 拖到同一个 jspContainer 中的另一个`<iframe>`。`Selenium::WebDriver::Error::MoveTargetOutOfBoundsError:`尝试执行拖放操作时，我不断收到。尝试使用该`hover`方法时，我也遇到了同样的错误。但是当我使用该`click`方法单击锚点时，它可以正常工作，并且我可以看到链接突出显示，就好像它已被单击一样。下面是我的一些代码，并通过 irb 输出。

```
 irb(main):048:0> a = b.frame(:id => "Iframe").link(:text => "anchor")
    => #<Watir::Anchor:0x..f02685d6 located=false selector={:text=>"anchor", :tag_name=>"a"}>
    irb(main):049:0> c = b.frame(:id => "Iframe").div(:id => "drop")
    => #<Watir::Div:0x5ed628c6 located=false selector={:id=>"drop", :tag_name=>"div"}>
    irb(main):050:0> a.wd.location
    => #<struct Selenium::WebDriver::Point x=295, y=339>
    irb(main):051:0> c.wd.location
    => #<struct Selenium::WebDriver::Point x=30, y=329>
    irb(main):052:0> c.style
    => "width: 250px; height: 100px;"
    irb(main):053:0> b.frame(:id => "Iframe").locate
    => #<Watir::FramedDriver:0x24f3738 @element=#<Selenium::WebDriver::Element:0x..fc6af7d56 id="{11f61368-a4ea-4d
    a9-9084-6307abcda2aa}">, @driver=#<Selenium::WebDriver::Driver:0x..f97d59986 browser=:firefox>>
    irb(main):054:0> a.drag_and_drop_on c
Selenium::WebDriver::Error::MoveTargetOutOfBoundsError: Given coordinates (432, 542) are outside the document.
 Error: MoveTargetOutOfBoundsError: The target location (432, 544) is not on the webpage.
    irb(main):056:0* a.hover
Selenium::WebDriver::Error::MoveTargetOutOfBoundsError: Given coordinates (432, 542) are outside the document.
 Error: MoveTargetOutOfBoundsError: The target location (432, 544) is not on the webpage.
    irb(main):059:0* a.click
    => [] 
```

我注意到的一件事是在设置变量`a`和 c 时 irb 的输出说`located=false`。但是我可以使用`exists?`、`click`和`flash`方法来表明 watir-webdriver 确实知道这些元素在哪里。任何帮助或建议将不胜感激。

我正在使用 watir-webdriver 0.6.2、Firefox 18.0.2、Windows 7 64 位

# git - 用本地替换远程 Git 存储库

> ID：16086566
> 
> 赞同：0
> 
> 时间：2013-04-18T15:06:06.137
> 
> 标签：git, version-control

我在 GitHub 上有一个遥控器，上面有一个不再使用的旧版本的网站。从那以后，我对本地副本进行了重大更改，并希望将这些更改合并到。有没有办法可以做到这一点并保留远程存储库中已经存在的历史记录。

是否只是将旧的 .git 目录复制到新项目并`git push --force`用我的本地更改替换远程版本？如果可能的话，我想保留相同的远程仓库（及其历史）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:13:31.417

我想你的问题已经在[那里](https://stackoverflow.com/questions/1425892/how-do-you-merge-two-git-repositories)得到了回答。

此外，将所有文件从一个 repo 移动到另一个 repo 将保留目标 repo（但不是旧 repo）的历史记录，因此如果您只需要保留其中一个 repo 的历史记录，则可以这样做。

# php - preg_match 具有特定字符串结构的正则表达式

> ID：16086569
> 
> 赞同：-2
> 
> 时间：2013-04-18T15:06:08.943
> 
> 标签：php, regex, preg-match

编辑：我将收到可以是任何字符串的用户输入。我只想标记那些具有特定结构的字符串。

```
// Flag
$subject = 'Name 1 : text / Name 2 : text';

// Flag
$subject = 'Name 1 : text / Name 2 : text / Name 3';

// Flag
$subject = 'Name 3 / Name 2 / Name 3';

// Do NOT flag
$subject = 'Name 1 : text, Name 2, text, Name 3';

// Do NOT flag
$subject = 'This is another string'; 
```

所以基本上标记每个至少有 1 个正斜杠的字符串。这可以用正则表达式完成吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:24:22.613

我很可能误解了你想要什么，但我认为这可能是你想要的（没有正则表达式）：

```
<?php
    $subject = 'Name 1 : text / Name 2 : text / Name 3';

    $subjectArray = array();
    $explode = explode(' / ', $subject);
    for ($i = 0; $i < count($explode); $i++) {
        list($name, $text) = explode(' : ', $explode[$i]);
        $subjectArray[] = array(
            'name' => $name,
            'text' => $text
        );
    }
    print_r($subjectArray);
?> 
```

这将输出：

```
Array
(
    [0] => Array
        (
            [name] => Name 1
            [text] => text
        )

    [1] => Array
        (
            [name] => Name 2
            [text] => text
        )

    [2] => Array
        (
            [name] => Name 3
            [text] => 
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:13:49.420

您需要`same structure`清楚地定义您的规则，但只是为了让您开始遵循 reges 将适用于您的两个示例：

```
$re='#^Name\s+\d+\s*:\s*\w+\s*/\s*Name\s+\d+\s*:\s*\w+(?:\s*/\s*Name\s+\d+)?$#i';
if (preg_match($re, $str, $match))
   print_r($match); 
```

# java - 如何使用java设置IE代理？

> ID：16086576
> 
> 赞同：1
> 
> 时间：2013-04-18T15:06:35.387
> 
> 标签：java, internet-explorer, proxy

我有一个 Java 代理程序，用来监听 Internet Explorer 的请求，但是当我启动程序时，我必须在浏览器的 Internet 设置中设置代理。如何在 Java 程序中自动设置浏览器的设置？

当我使用以下方式时，它没有用。

```
 Properties prop = System.getProperties();
    prop.setProperty("http.proxyHost", "127.0.0.1");
    prop.setProperty("http.proxyPort", "3000"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:14:33.773

此[Microsoft 支持](http://support.microsoft.com/kb/819961)链接解释了如何在注册表中设置 IE 代理设置。因此，要从 Java 中执行此操作，您需要确定一个合适的 Java 库来与 Windows 注册表通信。

* * *

你尝试的方式没有工作的机会。您的代码实际上是在调整 JVM 内存中“系统”属性的代理设置。这不会影响其他任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:14:00.393

我不认为您可以从 java 更改 ie 设置，即使有办法更改系统文件（使用受信任的小程序），也不建议这样做。您在那里尝试的是设置默认使用的 java 程序代理。

另外，如果我正确理解您的问题，除非您在浏览器中设置代理，否则您无法访问 java 程序，因此您的 java 程序甚至可能不是在 ie 中运行的小程序，并且就该程序而言，它有无法控制 ie 实例。

# javascript - JavaScript JIT 的显式控制？

> ID：16086583
> 
> 赞同：2
> 
> 时间：2013-04-18T15:07:00.757
> 
> 标签：javascript, standards, jit

我正在编写一些代码（用于音频处理），​​这些代码严重依赖现代 JavaScript 优化来提高性能。我动态生成 JS 方法来对 Int32Arrays 的内容进行一系列算术运算，并且我希望这些方法尽可能快地运行。“魔术”优化效果很好，我知道如何帮助它，但我想知道是否有改进的方法。

我突然想到，如果我有办法告诉 JavaScript 引擎“这个方法总是会运行得很热，并且它的参数类型永远不会改变”，那就太好了。这样，（1）编译器可能会更快更好地工作，并且（2）如果参数的类型错误，或者由于其他原因优化失败，我可以获得异常而不是默默地退回到解释器。

有谁知道这种标准或倡议？或者如果做不到这一点，是否有分析工具可以准确地查看我的代码是如何优化的（在 Chrome、Firefox 和 Safari 中）？

* * *

**更新**

关于 asm.js——我没听说过——这听起来很酷，而且它有很多对这类工作有用的技巧。

据我了解，asm.js 本身只是编写高度优化的 JavaScript 的约定，而不是 JS 引擎的新规范。但是，它确实定义了一种标记合规代码部分的方法（通过将行`"use asm";`放在方法的开头），目的是让未来的 JS 引擎对此做出响应并使用特殊的 Ahead-of-Time (AOT) 编译器在这些部分，如果代码不符合关于类型安全等更严格的标准，则向控制台报告错误。

AFAICT Mozilla 已经[开始](https://bugzilla.mozilla.org/show_bug.cgi?id=840282)使用 AOT 编译器，Google 正在[认真](https://code.google.com/p/v8/issues/detail?id=2599)讨论 V8 的问题。我找不到关于 JavaScriptCore 计划的任何信息，我也不会屏住呼吸来讨论 IE。

但它确实回答了我的问题，我猜——如果我现在生成使用 asm.js 验证的代码，没有缺点，而且在未来的浏览器中我可能会遇到性能提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:15:40.440

Chrome 的 V8 引擎有很多用于此类调试的选项。我想你会发现这篇博文很有用：

[针对 V8 进行优化 - 简介](http://floitsch.blogspot.com/2012/03/optimizing-for-v8-introduction.html)

（这实际上是一系列帖子，因此如果您继续阅读，您可以进入更高级的选项。）

# asp.net - 禁用/启用 Telerik RadTreeView 中的客户端所有复选框

> ID：16086584
> 
> 赞同：0
> 
> 时间：2013-04-18T15:07:04.337
> 
> 标签：asp.net, telerik, radtreeview

我需要禁用 Telerik RadTree 中的所有复选框。我怎么能做到这一点？

诀窍是，这些不是 HTML 控件，但似乎是通过图像、CSS 和 javascript 模仿这些的东西。例如，RadTreeView 节点的 HTML 如下所示：

```
 <div class="rtMid">
  <span class="rtSp"></span>
  <span class="rtMinus"></span>
  <span class="rtUnchecked"></span>
  <span class="rtIn">Item text</span>
  </div> 
```

最好的，阿斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:43:26.297

只需重新定义其`onclick`javascript 事件，使其不会触发。

这应该适用于每个浏览器：

```
onclickEvent = "if (event.cancelable) {event.preventDefault();}else {event.returnValue = false;} return false;"; 
```

这是我认为最好的跨浏览器解决方案：

```
onclickEvent = "this.checked = !this.checked;"; 
```

# c# - 如何只忽略svn中的一行？

> ID：16086585
> 
> 赞同：4
> 
> 时间：2013-04-18T15:07:05.137
> 
> 标签：c#, tortoisesvn

我的配置文件中有一行代码：

```
<appSettings>
    <add key="Microsoft.ServiceBus.ConnectionString" value="Endpoint=sb://{ComputerName}/ServiceBusDefaultNamespace;StsEndpoint=https://{ComputerName}:9355/ServiceBusDefaultNamespace;RuntimePort=9354;ManagementPort=9355" />
  </appSettings> 
```

你可以在那里看到 {ComputerName}。此名称取决于当前计算机名称。如果我使用一些源代码控制工具，我会在其他计算机项目中遇到问题，因为我的 connectionString 无法运行。

我怎样才能避免这个问题？

我不能在 svn 中忽略这个文件，因为我将来会发生变化，我可能会丢失这些变化。

也许这个问题可以在 svn 层或 Visual Studio 中解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:14:24.097

您可以使用`localhost`而不是计算机名称，或者使用该占位符并在运行时替换它。

或者您可以将此密钥放入不进入源代码控制的单独配置文件中：

```
<!-- In your regular app.config/web.config -->
<appSettings file="user.config">
  <!-- You can have normal stuff here -->
</appSettings>

<!-- In a file called user.config -->
<appSettings>
  <add key="whatever" value="JoesMachine" />
</appSettings> 
```

user.config 根本不在源代码管理中，只需要存在于每个人的机器上。当您设置新的开发人员时，这是一个额外的步骤，但它可能对您有用。（如果它是 Windows 应用程序，而不是 Web 应用程序，请确保在项目中的 user.config 上将复制到输出目录设置为始终复制，以便它进入您的 bin 目录。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:16:19.963

你不能忽略一行。

一般当你有一个必须由所有人修改的配置文件时，你使用[这种方法](https://subversion.apache.org/faq.html#ignore-commit)。

由于您使用的是 Visual Studio，因此您可以通过为构建创建不同的配置并在构建时使用这些配置来修改最终配置文件来避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:13:49.650

在配置中有占位符文本，就像现在一样，在初始化的代码中使用 Environment.MachineName 替换占位符文本。我什至会将占位符文本分配为配置设置，这样您就永远不会对其进行硬编码。

# jquery - $(window).load 从外部 .js 文件调用时返回未定义的函数

> ID：16086586
> 
> 赞同：3
> 
> 时间：2013-04-18T15:07:08.387
> 
> 标签：jquery

我有一个 main.js 外部文件，我在其中实现：

```
function initialize() {
...
} 
```

和我调用的 main.php 文件：

```
<script type="text/javascript" src="./main.js"></script> 
```

然后我打电话：

```
$(window).load(function() {
  initialize();
} 
```

我知道 window.load 会在所有内容都加载并准备就绪后触发代码。

为什么会返回`ReferenceError: initialize is not defined`？

**编辑：**这是我的样本形式的代码：

```
// # main.js.php file

<?php 
session_start();
include_once("include/functions.php"); 
session_write_close();

?>

var elements = [];

var element = { 
    container: "",
    visible: false,

    init : function(div) {
    ....
    }
};

function initialize() {
    elements.push(element.initialize("mydiv")); 
}

// # main.php file
<?php
session_start();
include_once("include/functions.php"); 
include_once("include/db_engine.php"); 

session_write_close();
}
?>
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<meta http-equiv="Content-Type" content="text/html" />
    <link rel="stylesheet" type="text/css" href="./css/stile.css" media="all" />
    <script type="text/javascript" src="./js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="./main.js.php"></script>

    <script type="text/javascript"> 

        $(window).load(function() {
              initialize();
        });

    </script>
</head>
<body>
    <div id="mydiv"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:07:17.957

```
var elements = [];

var element = { 
    container: "",
    visible: false,

    init : function(div) {
    //...
       return 'hello world';
    }
};

function initialize() {
    elements.push(element.init("mydiv")); //was a typing error 
} 
```

您的对象定义并`function initialize()`仅推`["hello world"]`送给`elements`给定的函数，**而不是**整个`var element= {...}`对象。

**和额外的锻炼**

```
 $(window).load(function() {
        //initialize();
        console.log('window call');
    });
    $(document).ready(function() {
        //initialize();
        console.log('document call');
    }); 
```

火灾..

**第一：** `'document call'` **第二：** `'window call'`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T16:31:04.347

好的，我自己解决了..从cookies中回显一些PHP变量是一个错字...无论如何感谢所有人:-)顺便说一句：它只需调用function init() { ... }

# php - 如何克服，“PHP 注意：使用未定义的常量”

> ID：16086589
> 
> 赞同：-4
> 
> 时间：2013-04-18T15:07:15.063
> 
> 标签：php

我的朋友，能够毫无错误地运行它：

```
$A = $_GET[a]; 
```

但是，我无法运行此 get[]，因为它给了我以下错误消息：

`Use of undefined constant a - assumed 'a'`

有没有办法可以更改 PHP 设置，让我可以像我的朋友一样运行代码？

非常感谢！

我知道你必须这样写：

```
$A = $_GET['a']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:08:58.650

您可以关闭通知，但这就像忽略汽车上的检查引擎灯...

```
// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE); 
```

你应该检查它是否设置...

```
$A = !empty($_GET['a']) ? $_GET['a'] : null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:09:24.133

如果 a 应该是一个字符串，它应该用引号括起来。否则 PHP 将假定它是一个常量（因为它前面没有 $）并且在这种情况下，它没有被定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:10:09.057

如果要将 A 用作常量，则必须将其定义为常量。关闭错误报告只会隐藏错误......它仍然不会神奇地修复您的代码。

```
define("A", $_GET['a']); 
```

# php - 我的 PHP 中的小错误我找不到。意外的 T_VARIABLE

> ID：16086591
> 
> 赞同：0
> 
> 时间：2013-04-18T15:07:23.223
> 
> 标签：php, forms, error-handling

我正在尝试使用当前语法解析表单，并且我很确定大部分内容都是正确的。我只是不断收到此错误：解析错误：语法错误，第 13 行 /home/pftech/public_html/wp-content/themes/pureflo/formhandler.php 中的意外 T_VARIABLE。我真的迷失了这可能是什么以及为什么它导致整个表格失败。请对此事提供任何帮助，我们将不胜感激。刚刚迷路了。谢谢！

```
<?php
/**
 * Template Name: Form Handler
 */
?>  
 <?php
    if(isset($_GET['zip'])){
        $sandiego = array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173', '92562', '92563', '92590', '92591', '92592', '92596');
      if (in_array($_GET['zip'], $sandiego)){
          $urls = array();
            if($_GET["office"] == 1) { 
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/"
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/"
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/"
            } else {
                $urls[] = "http://50.22.79.62/~pftech/water-delivery-service/"
                $urls[] = "http://50.22.79.62/~pftech/coffee-delivery/"
                $urls[] = "http://50.22.79.62/~pftech/water-filtration-systems/"
            }
            if($_GET['selection'] < 3 && $_GET['selection'] >= 0) {
                $URL = $urls[$_GET['selection']];
                header("Location: $URL?zip=$_GET[zip]");
            } else header("Location: http://50.22.79.62/~pftech/nationwide/"); 
        } else {
            header("Location: http://50.22.79.62/~pftech/nationwide/");
        }
    }
    exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:08:53.860

`;`每行后没有分隔符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:10:54.910

此代码有效

```
 <?php
/**
 * Template Name: Form Handler
 */
?>  
 <?php
    if(isset($_GET['zip'])){
        $sandiego = array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173', '92562', '92563', '92590', '92591', '92592', '92596');
      if (in_array($_GET['zip'], $sandiego)){
          $urls = array();
            if($_GET["office"] == 1) { 
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
            } else {
                $urls[] = "http://50.22.79.62/~pftech/water-delivery-service/";
                $urls[] = "http://50.22.79.62/~pftech/coffee-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/water-filtration-systems/";
            }
            if($_GET['selection'] < 3 && $_GET['selection'] >= 0) {
                $URL = $urls[$_GET['selection']];
                header("Location: $URL?zip=$_GET[zip]");
            } else header("Location: http://50.22.79.62/~pftech/nationwide/"); 
        } else {
            header("Location: http://50.22.79.62/~pftech/nationwide/");
        }
    }
    exit;
?> 
```

我添加了`;`这结束了一个 php 函数

# android - Android：LinearLayout 中奇怪的权重反转

> ID：16086592
> 
> 赞同：13
> 
> 时间：2013-04-18T15:07:25.500
> 
> 标签：android, android-linearlayout, android-view

这是我正在处理的 xml 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <ScrollView 
        android:layout_weight="2" 
        android:id="@+id/scrollConfirm" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

  </ScrollView>

  <LinearLayout 
      android:layout_marginTop="20px"
      android:layout_weight="1" 
      android:id="@+id/imageNumpad" 
      android:orientation="vertical" 
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent">
        <ImageView android:src="@drawable/myicon"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:background="#FFFFFF"
        />
   </LinearLayout>
</LinearLayout> 
```

由于我已经设置了 ScrollView`layout_weight="2"`和 LinearLayout（子），`layout_weight="1"`因此我预计 ScrollView 将使用 LinearLayout 两倍的可用空间。但我得到相反的结果。ScrollView 比 LinearLayout 小。而如果我为 ScrollView`layout_weight="1"`和 LinearLayout设置`layout_weight="2"`，则 ScrollView 大于 LinearLayou。

这怎么可能？？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-18T15:10:27.873

权重是相反的，因为您使用`match_parent`的是`layout_height`. 当总和大于 时，权重用于分配剩余的空白空间或带走空间`LinearLayout`。将您的高度设置为**0dip**它将起作用。

即，`layout_height = "0dip"`为 both`ScrollView`和 inner设置`LinearLayout`。

**参考 ：**

[将 layout_weight 与 Android 布局一起使用](http://www.chess-ix.com/blog/the-use-of-layout_weight-with-android-layouts/)

# scala - 带有 Guice 和 Cucumber JUnitRunner 的 Scala 的 Cucumber JVM？

> ID：16086596
> 
> 赞同：0
> 
> 时间：2013-04-18T15:07:36.623
> 
> 标签：scala, guice, cucumber-jvm, cucumber-junit

我们正在为 Scala 使用 Cucumber JVM，随着应用程序的增长，图片中的 cucumber-guice 也会很好。

问题是我看不到任何有关如何操作的可用示例/教程/文档。

我确实有一个工作的 @RunWith(classOf[Cucumber]) RunCukesTest 类，它启动，找到 .feature 文件和 StepDefinition 类。问题是这个 Cucumber 类在没有 Guice 的情况下实例化了步骤定义，并且我的所有注入都保持为空，导致我的测试失败。

也许有一种方法可以将 Cucumber 配置为使用 GuiceFactory 和 cucumber-guice.properties，就像[配置 cucumber-guice](https://stackoverflow.com/questions/12404434/configuring-cucumber-guice)一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T15:05:52.473

我试图弄清楚这如何与 cucumber-scala 库一起使用。在浏览源代码时，我得到了该库中没有设计依赖注入的印象。不幸的是，以下讨论证实了这一点：

[https://github.com/cucumber/cucumber-jvm/issues/469](https://github.com/cucumber/cucumber-jvm/issues/469)

可能有一种方法可以使用蛋糕模式添加依赖项......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T15:32:24.893

我成功地将 Guice 与 cucumber-jvm 一起使用。Cucumber 原生支持 guice。这是我的设置 - 我的模块定义在`cucumber-guice.properties`看起来像的内容中 `guiceModule=com.ios.app.modules.TestModule`。`cucumber-guice.properties`放在`src/test/resources`文件夹下。我认为您还需要下面的这种依赖关系，

```
<dependency>
    <groupId>info.cukes</groupId>
    <artifactId>cucumber-guice</artifactId>
    <version>1.1.2</version>
</dependency> 
```

# javascript - 在页面加载原型上设置容器的最小高度

> ID：16086602
> 
> 赞同：1
> 
> 时间：2013-04-18T15:07:57.170
> 
> 标签：javascript, css, prototypejs, pageload

好的，所以我尝试使用原型在页面加载时动态设置容器的最小高度，以便页面正确显示。我的页眉和页脚高度等于 345px，所以我试图将我的主容器 div 的最小高度设置为窗口的内部高度减去页面加载时的这些尺寸，因此即使这些 fiv 中没有内容的页面也会正确显示。这是我到目前为止所尝试的：

```
document.observe("dom:loaded", function() {
    var minHeight = window.innerHeight;
    minHeight -= 345;
    $('main-container').style.minHeight = minHeight;
}); 
```

和：

```
document.observe("dom:loaded", function() {
    var minHeight = window.innerHeight;
    minHeight -= 345;
    $('main-container').setStyle({
        minHeight : minHeight
    });
}); 
```

我知道脚本会通过 document.observe 函数中的警报在页面加载时触发，但它不会添加高度或引发任何错误。有任何想法吗？

**编辑**

感谢@Andrew 的回答，当用户调整大小并认为我会分享时，我还添加了此代码：

```
Event.observe(window, 'resize', function() {
    var minHeight = window.innerHeight;
    minHeight -= 345;
    $('main-container').setStyle({
        'min-height' : minHeight+'px'
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:50:46.840

不`minHeight : minHeight`应该`'min-height' : minHeight+'px'`

# shell - Unix：将 sed 命令保存在变量中，回显它，然后执行它

> ID：16086606
> 
> 赞同：2
> 
> 时间：2013-04-18T15:08:02.473
> 
> 标签：shell, unix, sed

我想在执行之前执行一个（例如`sed`）命令和`echo`它。

我试图将命令保存在变量中。
然后，`echo`它并执行它：

```
command="sed -i 's/FOO/BAR/g' myFile";
echo "Command: \"$command\"" ;
$command ; 
```

我得到的错误：

```
Command: "sed -i 's/FOO/BAR/g' myFile"
sed: -e expression #1, char 1: unknown command: `'' 
```

**我应该如何转义单引号？**（或者我可以使用双引号吗？）

我用谷歌搜索了它，但没有找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:39:16.983

简单的答案是删除单引号：sed 将它们解释为 sed 程序的一部分：

```
command="sed -i s/FOO/BAR/g myFile"
$command 
```

这显然不适用于更复杂的 sed 脚本（例如，那些包含空格或分号的脚本）。

假设您使用具有数组（bash、ksh、zsh）的 shell，正确答案是：

```
command=(sed -i 's/FOO/BAR/g' myFile)
echo "Command: \"${command[*]}\""
"${command[@]}"  # the quotes are required here 
```

见[http://www.gnu.org/software/bash/manual/bashref.html#Arrays](http://www.gnu.org/software/bash/manual/bashref.html#Arrays)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:39:37.003

的使用`$command`绕过了外壳扩展，因此单引号在参数中传递给`sed`. 要么松开单引号，要么使用`eval $command`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:50:23.683

定义一个方便的函数来回显任何给定的命令，然后运行它。

```
verbosely_do () {
  printf 'Command: %s\n' "$*";  # printf, not echo, because $@ might contain switches to echo
  "$@";
}

verbosely_do sed -i 's/FOO/BAR/g' myFile 
```

这会给你：

```
Command: sed -i s/FOO/BAR/g myFile 
```

然后执行 sed(1) 命令。

# java - 为什么 datatable 会在我的表中添加更多内容

> ID：16086609
> 
> 赞同：-2
> 
> 时间：2013-04-18T15:08:08.520
> 
> 标签：java, jsf

这是我的jsf：

```
 <h:dataTable class="pretty" value="#{ftController.ftDataModel}" var="item">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Amount"/>
                        </f:facet>
                    </h:column>
                    <h:column >
                        <f:facet class="right" name="header">
                            <h:outputText value="Date"/>
                        </f:facet>
                    </h:column>
                    <h:column>      
                        <h:outputLink   value="index.jsf"><h:outputText value="#{item.ftType}"/></h:outputLink><br />
                          <h:outputText class="red" id="amount"   value="#{item.amount}"></h:outputText> <h:outputText value="&#160;" /><h:outputText  style="font-size:12px" class="gray" value="TL" />
                    </h:column>
                    <h:column class="right" >
                        <h:outputText id="date"    value="#{item.date}"></h:outputText> 
                    </h:column>
                </h:dataTable> 
```

但是，html 输出是这样的：

```
<table class="pretty">
<thead>
<tr>
<th scope="col">Amount</th>
<th scope="col">Date</th>
<th scope="col"></th>
<th scope="col"></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td><a href="index.jsf" class="ui-link">Person</a><br><span id="j_idt8:j_idt21:0:amount" class="red">34500.6</span>&nbsp;<span class="gray" style="font-size:12px">TL</span></td>
<td><span id="j_idt8:j_idt21:0:date">10/14/2012</span></td>
</tr>
<tr>
<td></td>
<td></td>
<td><a href="index.jsf" class="ui-link">Person</a><br><span id="j_idt8:j_idt21:1:amount" class="red">3444.78</span>&nbsp;<span class="gray" style="font-size:12px">TL</span></td>
<td><span id="j_idt8:j_idt21:1:date">10/15/2012</span></td>
</tr>
</tbody>
</table> 
```

`<th>`它在金额和日期下为前增加了额外的费用。它还添加了`<td>s`为什么？这里有什么问题？我该如何解决？为什么要加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:22:02.123

`<f:facet>`只需与行数据`<h:column>` **一起**嵌套。您在代码中告诉 JSF 的是创建 4 列，其中前两列将包含空行数据和定义的标题文本，而后两列将反转所有内容。像这样修复它：

```
 <h:dataTable class="pretty" value="#{ftController.ftDataModel}" var="item">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Amount"/>
                    </f:facet>
                    <h:outputLink   value="index.jsf"><h:outputText value="#{item.ftType}"/></h:outputLink><br />
                      <h:outputText class="red" id="amount"   value="#{item.amount}"></h:outputText> <h:outputText value="&#160;" /><h:outputText  style="font-size:12px" class="gray" value="TL" />
                </h:column>
                <h:column >
                    <f:facet class="right" name="header">
                        <h:outputText value="Date"/>
                    </f:facet>
                    <h:outputText id="date"    value="#{item.date}"></h:outputText> 
                </h:column>
            </h:dataTable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:15:13.963

这是因为您 `<h:column>` 的数据表中有 4 个。并且 3rd 和 4th 没有**name**属性，所以它是空白的。

# c# - WF 4.5。将 C# 表达式与外部类引用一起使用

> ID：16086612
> 
> 赞同：3
> 
> 时间：2013-04-18T15:08:22.207
> 
> 标签：c#, workflow-foundation

我正在尝试使用新的 WF 4.5 功能 - C# 表达式来编译动态活动。它一直有效，直到我在表达式中添加一个外部类。

如果表达式包含基本对象，则它被遵守。如果我添加对外部类的引用，则会生成错误“找不到类型或命名空间名称 'xxxxx'（您是否缺少 using 指令或程序集引用？）”

那么，问题是如何为 C# 表达式引用外部类？

PS 它适用于 VisualBasic 表达式类型

谢谢

```
//Compiled without errors
var errorCodeWorkflow = new DynamicActivity
{
    Name = "DynamicActivity",
    Implementation = () => new WriteLine
    {
        Text = new CSharpValue<String>
        {
            ExpressionText = "new Random().Next(1, 101).ToString()"
        }
     }
};

CompileExpressions(errorCodeWorkflow);
WorkflowInvoker.Invoke(errorCodeWorkflow);

//Error 

using System;
using System.Activities;
using System.Activities.Expressions;
using System.Activities.Statements;
using System.Activities.XamlIntegration;
using System.Collections.Generic;
using System.Linq;
using Microsoft.CSharp.Activities;

namespace CSharpExpression 
{
    class Program
    {
        static void Main()
        {
            var errorCodeWorkflow = new DynamicActivity
            {
                Name = "MyScenario.MyDynamicActivity3",
                Properties =
                {
                    new DynamicActivityProperty
                    {
                        Name = "Address",
                        Type = typeof(InArgument<MailAddress>),
                    },
                },
                Implementation = () => new WriteLine
                {
                    Text = new CSharpValue<String>
                    {
                        ExpressionText = "\"MyDynamicActivity \" + Address.DisplayName"
                    }
                }
            };

            CompileExpressions(errorCodeWorkflow);
            WorkflowInvoker.Invoke(errorCodeWorkflow, new Dictionary<String, Object> { { "Address", new MailAddress { DisplayName = "TestDisplayName" } } });
        }

        static void CompileExpressions(DynamicActivity dynamicActivity)
        {
            var activityName = dynamicActivity.Name;
            var activityType = activityName.Split('.').Last() + "_CompiledExpressionRoot";
            var activityNamespace = string.Join(".", activityName.Split('.').Reverse().Skip(1).Reverse());

            var settings = new TextExpressionCompilerSettings
            {
                Activity = dynamicActivity,
                Language = "C#",
                ActivityName = activityType,
                ActivityNamespace = activityNamespace,
                RootNamespace = "CSharpExpression",
                GenerateAsPartialClass = false,
                AlwaysGenerateSource = true,
                ForImplementation = true
            };

            var results = new TextExpressionCompiler(settings).Compile();

            if (results.HasErrors)
            {
                throw new Exception("Compilation failed.");
            }

            var compiledExpressionRoot = Activator.CreateInstance(results.ResultType, new object[] { dynamicActivity }) as ICompiledExpressionRoot;
            CompiledExpressionInvoker.SetCompiledExpressionRootForImplementation(dynamicActivity, compiledExpressionRoot);
        }
    }

    public class MailAddress
    {
        public String Address { get; set; }
        public String DisplayName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T08:31:38.870

我在使用非动态活动时遇到了一个相同的问题，现在已经检查了使它工作所需的条件：

### 概括

1.  添加对的引用`System.Xaml`

2.  移动`MailAddress`到不同的命名空间。

3.  添加一些`Dynamic Activity`关于你的课程来自哪里的信息：

```
var impl = new AttachableMemberIdentifier(typeof(TextExpression), "NamespacesForImplementation");
var namespaces = new List<string> { typeof(MailAddress).Namespace };
TextExpression.SetReferencesForImplementation(dynamicActivity, new AssemblyReference { Assembly = typeof(MailAddress).Assembly });
AttachablePropertyServices.SetProperty(dynamicActivity, impl, namespaces); 
```

为了得到这个答案，我需要深入研究`TextExpressionCompiler`源代码，这样可能会有更优雅的东西。

* * *

### 非动态活动

如果您不使用动态活动，则调用`CompileExpressions`将按此处所述进行更改：http: [//msdn.microsoft.com/en-us/library/jj591618.aspx](http://msdn.microsoft.com/en-us/library/jj591618.aspx)。

将通过删除“ForImplementation”部分来修改向活动添加信息：

```
var impl = new AttachableMemberIdentifier(typeof(TextExpression), "Namespaces");
var namespaces = new List<string> { typeof(MailAddress).Namespace };
TextExpression.SetReferences(nonDynamicActivity, new AssemblyReference { Assembly = typeof(MailAddress).Assembly });
AttachablePropertyServices.SetProperty(nonDynamicActivity, impl, namespaces); 
```

* * *

### 工作代码

```
using System;
using System.Activities;
using System.Activities.Expressions;
using System.Activities.Statements;
using System.Activities.XamlIntegration;
using System.Collections.Generic;
using System.Linq;
using System.Xaml;
using ExternalNamespace;
using Microsoft.CSharp.Activities;

namespace CSharpExpression 
{
    class Program
    {
        static void Main()
        {
            var errorCodeWorkflow = new DynamicActivity
            {
                Name = "MyScenario.MyDynamicActivity3",
                Properties =
                {
                    new DynamicActivityProperty
                    {
                        Name = "Address",
                        Type = typeof(InArgument<MailAddress>),
                    },
                },
                Implementation = () => new WriteLine
                {
                    Text = new CSharpValue<String>
                    {
                        ExpressionText = "\"MyDynamicActivity \" + Address.DisplayName"
                    }
                }
            };

            var impl = new AttachableMemberIdentifier(typeof(TextExpression), "NamespacesForImplementation");
            var namespaces = new List<string> { typeof(MailAddress).Namespace };
            TextExpression.SetReferencesForImplementation(errorCodeWorkflow, new AssemblyReference { Assembly = typeof(MailAddress).Assembly });
            AttachablePropertyServices.SetProperty(errorCodeWorkflow, impl, namespaces);

            CompileExpressions(errorCodeWorkflow);
            WorkflowInvoker.Invoke(errorCodeWorkflow, new Dictionary<String, Object> { { "Address", new MailAddress { DisplayName = "TestDisplayName" } } });
        }

        static void CompileExpressions(DynamicActivity dynamicActivity)
        {
            var activityName = dynamicActivity.Name;
            var activityType = activityName.Split('.').Last() + "_CompiledExpressionRoot";
            var activityNamespace = string.Join(".", activityName.Split('.').Reverse().Skip(1).Reverse());

            var settings = new TextExpressionCompilerSettings
            {
                Activity = dynamicActivity,
                Language = "C#",
                ActivityName = activityType,
                ActivityNamespace = activityNamespace,
                RootNamespace = "CSharpExpression",
                GenerateAsPartialClass = false,
                AlwaysGenerateSource = true,
                ForImplementation = true
            };

            var results = new TextExpressionCompiler(settings).Compile();

            if (results.HasErrors)
            {
                throw new Exception("Compilation failed.");
            }

            var compiledExpressionRoot = Activator.CreateInstance(results.ResultType, new object[] { dynamicActivity }) as ICompiledExpressionRoot;
            CompiledExpressionInvoker.SetCompiledExpressionRootForImplementation(dynamicActivity, compiledExpressionRoot);
        }
    }
}

namespace ExternalNamespace
{
    public class MailAddress
    {
        public String Address { get; set; }
        public String DisplayName { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:15:28.420

听起来您需要一个 using 语句来指定外部类所在的命名空间。

例如：

使用我的命名空间；

# regex - 正则表达式：测试整个字符串

> ID：16086614
> 
> 赞同：0
> 
> 时间：2013-04-18T15:08:30.300
> 
> 标签：regex

我正在学习如何使用正则表达式，我在这个问题上遇到了一些困难。

假设我输入了一个数字，如果该数字包含至少一个 7，但没有 9，则输入对整个数字返回 true。

例如： `123456789`应该返回false，而 的输入`12345678`应该返回true for `12345678`。

应该为此使用什么正则表达式？

我知道这些条款`7+`并`[^9]`参与其中，但我不完全确定如何使其在具有这些特定条件的整个数字上返回 true（当我希望它返回 true 时`7+[^9]`，输入`12345678`123456 9 时返回 true ）。`78``12345678`

对不起，如果我的问题措辞不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:11:23.713

您可以尝试以下方法：`^[0-8]*7[0-8]*$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:20:52.390

您可以积极向前看，以断言数字中至少有一个 7：

```
^(?=.*7)[0-8]++$ 
```

第一部分`(?=.*7)`是零宽度断言，它测试至少有一个 7。它通过断言模式`.*7`存在来做到这一点 - 即任何后面跟着 7 的东西。

第二部分`[0-8]++`检查数字中的所有数字是否在 0-8 之间。`++`是一个或多个字符的所有格匹配。所以这个数字必须至少有一位数。

**编辑**

处理@AbsoluteƵERØ的评论，如果你想确保这个数字是一个实数，即第一个数字不为零，你也可以简单地断言

```
^(?=.*7)(?!0)[0-8]++$ 
```

# ruby-on-rails - (#5) Heroku Rails APP 出现未经授权的源 IP 地址错误

> ID：16086615
> 
> 赞同：12
> 
> 时间：2013-04-18T15:08:32.430
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, heroku

当有人尝试通过 facebook 登录时，我的 Heroku 应用程序 (RoR) 开始抛出此错误。

`(#5) Unauthorized source IP address`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T15:08:32.430

发生这种情况是因为我的 heroku 机器的 IP 地址（与其他应用程序共享）被 facebook 列入黑名单。

**我的heroku应用程序的简单重启解决了这个问题。**

我联系了 Heroku 支持，他们告诉我他们对此无能为力，这很公平，**facebook 是阻止**该 IP 传入连接的人。

他们建议我使用静态 IP 解决方案，并联系 facebook 将我的 IP 列入白名单，并为此建议我使用 AddOn。**[Proximo](https://addons.heroku.com/proximo)**可以使您的应用程序具有静态 IP 地址，但我认为它的可扩展性不是很高（太贵了）。（我还没有尝试过）

所以，我看到这篇文章在谈论在亚马逊上使用微型 linux EC2 实例，并[在此处](https://stackoverflow.com/questions/13350188/heroku-static-ip-for-sftp)使用代理服务器制作静态 IP ，我认为如果问题仍然存在，我会尝试一下。

**编辑**

在这个[facebook 错误报告](https://developers.facebook.com/bugs/649166715098648?browse=search_517e6e9f8d7339772696301)中，facebook 工作人员表示他们将继续阻止来自任何恶意应用程序的传入连接，如果您的 IP 与其中一个共享，他们将无能为力。他们还建议使用静态 IP 解决方案，如果您想确保这个问题不会再次发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T13:17:14.907

I've just launched [QuotaGuardStatic](https://www.quotaguardstatic.com/static-ip) as a cheaper alternative to Proximo. Works on Heroku but you have to sign-up directly for now as we are only in alpha testing as a Heroku add-on.

# c - 使用没有嵌套 while 循环的滑动窗口删除注释

> ID：16086617
> 
> 赞同：5
> 
> 时间：2013-04-18T15:08:38.603
> 
> 标签：c, sliding-window

我正在尝试使用 c 代码从 ac 文件中删除注释和字符串。我会坚持对示例进行评论。`n`我有一个滑动窗口，所以我`n-1`在任何特定时刻都只有角色。我正在尝试找出一种`whiles`尽可能不使用嵌套的算法，但我需要一段时间才能`getchar`通过输入。我的第一个想法是 while through find when `n=* and (n-1)=/`then while through until `n=/ and (n-1)=*`，但考虑到这是嵌套的 while 我觉得它效率低下。如果必须，我可以这样做，但我想知道是否有人有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:47:59.897

正确地做到这一点比人们最初想象的要复杂，正如这里的其他评论巧妙地指出的那样。我强烈建议编写一个表驱动的 FSM，使用状态转换图来获得正确的转换。试图用 case 语句做比几个州更多的事情是非常容易出错的 IMO。

这是一个点/graphviz 格式的图表，您可以从中直接编写一个状态表。请注意，我根本没有测试过这个，所以 YMMV。

该图的语义是，当您看到 时`<ch>`，如果该状态中的其他输入均不匹配，则它是一个失败。文件结尾在除 之外的任何状态下都是错误，任何`S0`未明确列出的字符或`<ch>`. 扫描的每个字符都会打印，除非在注释中（`S4`和`S5`），以及在检测到开始注释时（`S1`）。在检测到开始注释时，您必须缓冲字符，如果它是错误的开始，则打印它们，否则在确定它确实是注释时将它们丢弃。

在点图中，`sq`是单引号`'`，`dq`是双引号`"`。

```
digraph state_machine {
    rankdir=LR;
    size="8,5";

    node [shape=doublecircle]; S0 /* init */;
    node [shape=circle];

    S0  /* init */      -> S1  /* begin_cmt */ [label = "'/'"];
    S0  /* init */      -> S2  /* in_str */    [label = dq];
    S0  /* init */      -> S3  /* in_ch */     [label = sq];
    S0  /* init */      -> S0  /* init */      [label = "<ch>"];
    S1  /* begin_cmt */ -> S4  /* in_slc */    [label = "'/'"];
    S1  /* begin_cmt */ -> S5  /* in_mlc */    [label = "'*'"];
    S1  /* begin_cmt */ -> S0  /* init */      [label = "<ch>"];
    S1  /* begin_cmt */ -> S1  /* begin_cmt */ [label = "'\\n'"]; // handle "/\n/" and "/\n*"
    S2  /* in_str */    -> S0  /* init */      [label = "'\\'"];
    S2  /* in_str */    -> S6  /* str_esc */   [label = "'\\'"];
    S2  /* in_str */    -> S2  /* in_str */    [label = "<ch>"];
    S3  /* in_ch */     -> S0  /* init */      [label = sq];
    S4  /* in_slc */    -> S4  /* in_slc */    [label = "<ch>"];
    S4  /* in_slc */    -> S0  /* init */      [label = "'\\n'"];
    S5  /* in_mlc */    -> S7  /* end_mlc */   [label = "'*'"];
    S5  /* in_mlc */    -> S5  /* in_mlc */    [label = "<ch>"];
    S7  /* end_mlc */   -> S7  /* end_mlc */   [label = "'*'|'\\n'"];
    S7  /* end_mlc */   -> S0  /* init */      [label = "'/'"];
    S7  /* end_mlc */   -> S5  /* in_mlc */    [label = "<ch>"];
    S6  /* str_esc */   -> S8  /* oct */       [label = "[0-3]"];
    S6  /* str_esc */   -> S9  /* hex */       [label = "'x'"];
    S6  /* str_esc */   -> S2  /* in_str */    [label = "<ch>"];
    S8  /* oct */       -> S10 /* o1 */        [label = "[0-7]"];
    S10 /* o1 */        -> S2  /* in_str */    [label = "[0-7]"];
    S9  /* hex */       -> S11 /* h1 */        [label = hex];
    S11 /* h1 */        -> S2  /* in_str */    [label = hex];
    S3  /* in_ch */     -> S12 /* ch_esc */    [label = "'\\'"];
    S3  /* in_ch */     -> S13 /* out_ch */    [label = "<ch>"];
    S13 /* out_ch */    -> S0  /* init */      [label = sq];
    S12 /* ch_esc */    -> S3  /* in_ch */     [label = sq];
    S12 /* ch_esc */    -> S12 /* ch_esc */    [label = "<ch>"];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:02:16.050

用一个`while`循环编写的算法可能如下所示：

```
while ((c = getchar()) != EOF)
{
    ... // looking at the byte that was just read

    if (...) // the symbol is not inside a comment
    {
        putchar(c);
    }
} 
```

要确定输入是否`char`属于评论，您可以使用状态机。在下面的例子中，它有 4 个状态；还有遍历到下一个状态的规则。

```
int state = 0;
int next_state;
while ((c = getchar()) != EOF)
{
    switch (state)
    {
        case 0: next_state = (c == '/' ? 1 : 0); break;
        case 1: next_state = (c == '*' ? 2 : c == '/' ? 1 : 0); break;
        case 2: next_state = (c == '*' ? 3 : 2); break;
        case 3: next_state = (c == '/' ? 0 : c == '*' ? 3 : 2); break;
        default: next_state = state; // will never happen
    }

    if (state == 1 && next_state == 0)
    {
        putchar('/'); // for correct output when a slash is not followed by a star
    }
    if (state == 0 && next_state == 0)
    {
        putchar(c);
    }
    state = next_state;
} 
```

上面的例子非常简单：它不能`/*`在非注释上下文中正常工作，比如在 C 字符串中；它不支持`//`评论等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T23:53:46.980

由于您只想对缓冲区使用两个字符并且只使用一个 while 循环，因此我建议使用第三个字符来跟踪您的状态（无论是否跳过文本）。我为您编写了一个测试程序，其中包含解释逻辑的内联注释：

```
// Program to strip comments and strings from a C file
//
//  Build:
//     gcc -o strip-comments strip-comments.c
//
//  Test:
//     ./strip-comments strip-comments.c

#include <stdio.h>
#include <sys/types.h>
#include <sys/uio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

/* The following is a block of strings, and comments for testing
 * the code.
 */
/* test if three comments *//* chained together */// will be removed.
static int value = 128 /* test comment within valid code *// 2;
const char * test1 = "This is a test of \" processing"; /* testing inline comment */
const char * test2 = "this is a test of \n within strings."; // testing inline comment
// this is a the last test

int strip_c_code(FILE * in, FILE * out)
{
   char      buff[2];
   char      skipping;

   skipping = '\0';
   buff[0]  = '\0';
   buff[1]  = '\0';

   // loop through the file
   while((buff[0] =  fgetc(in)) != EOF)
   {
      // checking for start of comment or string block
      if (!(skipping))
      {
         // start skipping in "//"  comments
         if ((buff[1] == '/') && (buff[0] == '/'))
            skipping = '/';

         // start skipping in "/*"  comments
         else if ((buff[1] == '/') && (buff[0] == '*'))
            skipping = '*';

         // start skipping at start of strings, but not character assignments
         else if ( ((buff[1] != '\'') && (buff[0] == '"')) &&
                   ((buff[1] != '\\') && (buff[0] == '"')) )
         {
            fputc(buff[1], out);
            skipping = '"';
         };

         // clear buffer so that processed characters are not interpreted as
         // end of skip characters.
         if ((skipping))
         {
            buff[0] = '\0';
            buff[1] = '\0';
         };
      };

      // check for characters which terminate skip block
      switch(skipping)
      {
         // if skipping "//" comments, look for new line
         case '/':
         if (buff[1] == '\n')
            skipping = '\0';
         break;

         // if skipping "/*" comments, look for "*/" terminating string
         case '*':
         if ((buff[1] == '*') && (buff[0] == '/'))
         {
            buff[0]  = '\0';
            buff[1]  = '\0';
            skipping = '\0';
         };
         break;

         // if skipping strings, look for terminating '"' character
         case '"':
         if ((buff[1] != '\\') && (buff[0] == '"'))
         {
            skipping = '\0';
            buff[0]  = '\0';
            buff[1]  = '\0';
            fprintf(out, "NULL"); // replace string with NULL
         };
         break;

         default:
         break;
      };

      // if not skipping, write character out
      if ( (!(skipping)) && ((buff[1])) )
         fputc(buff[1], out);

      // shift new character to old character position
      buff[1] = buff[0];
   };

   // verify that the comment or string was terminated properly
   if ((skipping))
   {
      fprintf(stderr, "Unterminated comment or string\n");
      return(-1);
   };

   // write last character
   fputc(buff[1], out);

   return(0);
}

int main(int argc, char * argv[])
{
   FILE * fs;

   if (argc != 2)
   {
      fprintf(stderr, "Usage: %s <filename>\n", argv[0]);
      return(1);
   };

   if ((fs = fopen(argv[1], "r")) == NULL)
   {
      perror("fopen()");
      return(1);
   };

   strip_c_code(fs, stdout);

   fclose(fs);

   return(0);
}

/* end of source file */ 
```

我还在 Github 上发布了这段代码，以便于下载和编译：

[https://gist.github.com/syzdek/5417109](https://gist.github.com/syzdek/5417109)

# php - 将 HTML 变量传递给 JAVASCRIPT 和 PHP 的 simplemodal 联系表单

> ID：16086618
> 
> 赞同：5
> 
> 时间：2013-04-18T15:08:40.597
> 
> 标签：php, javascript, simplemodal

我是 javascript 新手，有一些 PHP 经验，主要使用 HTML 和 css 样式。我从 Eric Martin 的网站下载了 simplemodal 联系表格，看起来非常不错。我能够在这个位置的测试网站中实现模态弹出联系表：

[http://www.patagonia-tours.net/tours/patagonia.htm](http://www.patagonia-tours.net/tours/patagonia.htm)

在此页面中，我列出了三个不同的旅行，我希望访问者对每个旅行都进行询问/提问，为此我添加了模态表单。

我需要解决两件事：

## 1号

将一个变量从 HTML 传递到 JAVASCRIPT，该变量将作为旅游名称，使用此变量作为联系表单的标题。我弄清楚了这个变量在contact.js文件中的位置，并被命名为'title'。

这是调用模态表单的三个按钮的 HTML 代码：

```
<div id='contact-form'>
    <input type='button' name='contact' value='Ask a question / book' class='tour-button button-white' title='Tour: El Calafate / Ushuaia / Torres del Paine'>
</div> 

<div id='contact-form'>
        <input type='button' name='contact' value='Ask a question / book' class='tour-button button-white' title='Tour: Ushuaia / Australis / Paine / Calafate'>
    </div>

<div id='contact-form'>
        <input type='button' name='contact' value='Ask a question / book' class='tour-button button-white' title="Tour: Ushuaia / Puerto Madryn"> 
```

需要将 HTML 中的 title 属性的值传递给 javascript 中的 'title' 变量。

## 2号

我需要将相同的变量传递给 PHP 脚本 (contact.php)，这样我就可以将它用作电子邮件中的主题，然后知道访问者对哪个旅游感兴趣，老实说，我现在不知道该怎么做（我确实尝试了一些变体但没有成功）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:29:44.103

As mentioned in my comment you cannot have duplicate ID values or else javascript does not know which one to grab (as it expects only one, you stop at the first);

if you change your ID's to classes you can do something like this:

```
<div id='contact-form'>
    <input type='button' name='contact' value='Ask a question / book' class='tour-button contact button-white' title="Tour: Ushuaia / Puerto Madryn">
</div>

var buttons = document.getElementsByClassName('tour-button');
for( var i = 0, l = buttons.length; i < l; i++ ) {
    buttons[i].addEventListener('click', function() { alert( this.title ); }, false);
} 
```

as for Number 2, you should ask this in a new question with the code you have tied.

edit:

Assuming you have the variable defined somewhere else as `var title = '';` or just `var title;` then change the above code to this:

```
var buttons = document.getElementsByClassName('tour-button');
for( var i = 0, l = buttons.length; i < l; i++ ) {
    buttons[i].addEventListener('click', function() { title = this.title; }, false);
} 
```

that assigns to the variable 'title' the value of the title in the last button clicked. If you are trying to do changes on the click action I suggest you also put that code in the event handler for the button clicks.

# ios - 为突出显示状态设置背景图像会删除自动突出显示

> ID：16086625
> 
> 赞同：0
> 
> 时间：2013-04-18T15:08:54.473
> 
> 标签：ios, uibutton

我正在实现 UIButton 的复选框子类。有 2 个背景图像（开/关）和 4 个概念状态：

*   `on`- 在图像上/未突出显示
*   `off`- 关闭图像/未突出显示
*   `on & pressed`- 在图像上/突出显示
*   `off & pressed`- 关闭图像/突出显示

如果我将背景图像设置为仅打开和关闭（`UIControlStateNormal`和`UIControlStateSelected`），则按钮在按住时会突出显示。

但是，当 时`on & pressed`，它使用关闭图像（正如预期的那样，因为状态是`UIControlStateSelected | UIControlStateHighlighted`，所以它使用正常状态图像）

因此，我将背景图像设置为`UIControlStateSelected | UIControlStateHighlighted`打开图像，但现在禁用了编程突出显示 - 我假设因为如果您为该状态设置特定的背景图像，逻辑是您可能想要覆盖突出显示。

我不想使用第三张图片，是否可以设置背景图片`UIControlStateSelected | UIControlStateHighlighted`并仍然应用程序化突出显示？

`[self setAdjustsImageWhenHighlighted:YES];`设置背景图像后我已经打电话了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:36:40.230

我猜您使用`UIButton`的类型不是“自定义”，而是“圆角矩形”。在这种情况下，设置背景图像可能会产生意想不到的副作用，请参阅我[之前的问题](https://stackoverflow.com/questions/15481204/uibutton-setting-background-image-to-the-disabled-state-changes-display-of-the)。
我建议将按钮类型更改为“自定义”。然后当然你必须自己定义所有属性。

# google-drive-api - 是否可以在不访问整个驱动器或使用驱动器应用程序的情况下访问单个谷歌驱动器文件？

> ID：16086627
> 
> 赞同：3
> 
> 时间：2013-04-18T15:08:59.630
> 
> 标签：google-drive-api, picker

过去，我使用旧的 Google Docs API 和 Google Picker 来访问来自 Google Docs 的单个私人文件。我有一个访问令牌来访问该文件。

使用 Google Drive，我必须使用 Google Drive 应用程序来完成此操作，但在我看来，这似乎太多的工作流程（先安装应用程序然后使用选择器）来访问单个私人 Google Drive Docs 文件。

有没有比安装应用程序或不请求读取用户的整个 Google Drive 权限更简单的方法来访问单个私人 Google Drive Docs 文件？

更新：@Izak 正在与我一起解决这个问题。请允许我添加一些细节。真正的问题是，当您使用 drive.file 范围时，exportLinks 中的 url 不再起作用。对于我们的用例，我们想要获取文档的 html 表示，因此我们使用 exportLinks 功能。使用 drive.file 并尝试下载 text/html 版本时，响应为 404 状态。如果您使用 drive.readonly，exportLinks 可以正常工作。我的猜测是 drive.file 不足以使用导出工具。也许有人可以确认？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:45:27.460

您可以使用相对受限的身份验证范围，仅允许按文件访问：

```
https://www.googleapis.com/auth/drive.file 
```

如果您知道文件 ID，则可以检索其元数据和内容。有关范围的更多详细信息，请参见[https://developers.google.com/drive/scopes](https://developers.google.com/drive/scopes)

`exportLinks`正在为文档文件返回。如果您在插入和更新期间转换文件，它们将可用。看看`convert`插入时的参数：[https ://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# c# - 解析字符串数组以检查有多少次有一个值

> ID：16086628
> 
> 赞同：0
> 
> 时间：2013-04-18T15:09:05.100
> 
> 标签：c#, asp.net-mvc, arrays, loops

假设我有这个字符串数组：

```
string[] arrayToParse = {2, G, R, G, B}; 
```

我需要解析数组以检查字符串存在多少次，以便最终得到如下值：

```
2
GG
R
B 
```

因此，每次循环检测是否有另一个相同的字符串时，他都会“连接”，然后将值添加到列表中。

如果我再举一个例子： `string[] arrayToParse2 = {2, Q, T, T, U, U}` 应该以这些值结束：

```
2
Q
TT
UU 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:10:58.027

使用 LINQ（`GroupBy`方法）和`string.Join`：

```
string[] arrayToParse = {"2", "G", "R", "G", "B"};

string[] results = arrayToParse.GroupBy(x => x)
                               .Select(g => string.Join(string.Empty, g))
                               .ToArray(); 
```

适用于您的两个样本输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:12:47.927

您可以使用 Linq：

```
var stringGroups = arrayToParse.GroupBy(str => str); 
```

现在您可以使用以下命令显示这些组`String.Join`：

```
foreach(var group in stringGroups)
    Console.WriteLine(string.Join("", group)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:17:47.753

我会采用[LINQ](http://msdn.microsoft.com/en-us/library/bb397933.aspx)方法。如果它不可用或者您不想使用它，这里有一个更长的版本（如果您从未使用过 LINQ，则更容易理解）。

```
string[] arrayToParse = {2, G, R, G, B};
List<String> parsedList = new List<String>

foreach(String sToParse in arrayToParse)
{
  if (parsedList.Count <= 0)
     parsedList.Add(sToParse);

  else
  foreach(String sInParsedList in parsedList)
  {
     if(sToParse == sInParsedList)
        sInParsedList += sToParse;

     else
     parsedList.Add(sToParse);
  }

 string[] parsedArray = parsedList.ToArray(); 
```

# java - 是否可以在 AlertDialog 中打开网页？

> ID：16086632
> 
> 赞同：0
> 
> 时间：2013-04-18T15:09:08.790
> 
> 标签：java, android, webview, web, android-alertdialog

我想在警报对话框中打开一个网站，但我不知道该怎么做。有什么技巧可以让它工作吗？警报对话框应将用户带到警报对话框本身内的网页

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:11:11.163

据我所知，您无法使用 web 视图打开警报对话框。但是您可以做的是创建一个 WebView 活动并将其放入您的清单中，即 Theme="XXXX/XXX.Dialog"。这将使它看起来像一个对话窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:18:44.843

无法在警报对话框中打开网页。相反，您可以使用模式窗口打开一个网站。

# solr - 使用 OR 的日光浴室过滤器查询

> ID：16086644
> 
> 赞同：1
> 
> 时间：2013-04-18T15:09:40.510
> 
> 标签：solr, solarium

我想用 Solarium 创建一个过滤查询，使用很多 OR。sql等价物是

```
select * from myTable where myValue in (1,3,5,6,9); 
```

我为过滤器查询创建的字符串是这样的：

```
spr:1 OR spr:3 OR spr:5 OR spr:6 OR spr:9 
```

当我执行查询时，会抛出此错误：

```
Exception: Solr HTTP error: OK (400) {"error":{"msg":"undefined field text","code":400}} 
```

毫无疑问，该字段存在于我的架构中并且它包含正确的值。使用 solr admin，我可以手动执行过滤查询并获得预期的结果。

有人可以指出我正确的方向吗？当然，如果需要，我很乐意发布更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T08:50:20.233

这可能是一个老问题，但解决方案是这样的：

```
spr:(1 OR 3 OR 5 OR 6...) 
```

# build - MS 构建条件

> ID：16086645
> 
> 赞同：0
> 
> 时间：2013-04-18T15:09:49.090
> 
> 标签：build, msbuild, build-automation

我在项目的属性组中有几个条件语句：

```
<PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
</PropertyGroup> 
```

我想弄清楚它们是什么意思？`Condition = blank`和`Platform = blank`？但是标签有实际数据吗？这实际上是如何解释的？

是说配置可以是任何东西，平台可以是任何东西，还是说属性组只适用于Configuration=Debug|Platform=x86？

如果我的假设是正确的，我可以复制整个属性组并将配置和平台的值设置为`Release`，`AnyCPU`如下所示：

```
<PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Release</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
</PropertyGroup> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:12:07.240

如果属性`Configuration == ''`然后将其设置为 Debug 它与 Platform 相同，则您在未指定时设置默认值

# ios - 所需类型 NSNumber 给定类型 __NSCFString 错误

> ID：16086646
> 
> 赞同：5
> 
> 时间：2013-04-18T15:09:54.273
> 
> 标签：ios, objective-c, core-data

我遇到了一个核心数据错误，我不知道如何修复。

我基本上是将对象的所有数据提取到字典中，将数据显示到表单中，并且某些字段允许编辑，然后尝试在提交时将数据存储回对象。

但是，在设置所有新/更新的值时，我得到了错误

`Unacceptable type of value for attribute: property = "totalLocations"; desired type = NSNumber; given type = __NSCFString; value = 7.`

这是处理此特定属性的代码...

```
 //grab the value from the property

    if (myObject.totalLocations)
    [data setObject:myObject.totalLocations forKey:@"totalLocations"];

    // store it back to the object
    _myObject.totalLocations = [data objectForKey:@"totalLocations"]; 
```

除了这两行之外，该属性没有太多使用。它可以修改，但不能由用户在此特定屏幕上修改

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:13:59.347

`totalLocations`您的核心数据实体中的类型`Integer`是`myObject.totalLocations`NSString 吗？如果是，您应该像这样设置核心数据：

```
[data setValue:[NSNumber numberWithInteger:[myObject.totalLocations integerValue]] forKey:@"totalLocations"]; 
```

我设置托管对象的方式是这样的：

```
- (void)insertNewPromo:(NSDictionary *)promoJson
{
  NSManagedObjectContext *context = [self.promoFetchedResultsController managedObjectContext];
  NSEntityDescription *entity = [[self.promoFetchedResultsController fetchRequest] entity];
  NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

  // Checking if inappropriate data are in the JSON to avoid some crashes.
  if ([[promoJson objectForKey:@"id"] isKindOfClass:[NSNull class]])
      [newManagedObject setValue:nil forKey:@"id"];
  else
      [newManagedObject setValue:[NSNumber numberWithInteger:[[promoJson objectForKey:@"id"] integerValue]] forKey:@"id"];
  ...
  ...
  NSError *error = nil;
  if (![context save:&error])
  {
      if (DEBUG_ON == 1)
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
      abort();
  }
} 
```

的`id`对象`promoJson`是一个 NSString

# com - GObject 和 COM 对象模型的兼容性

> ID：16086648
> 
> 赞同：1
> 
> 时间：2013-04-18T15:10:02.437
> 
> 标签：com, vtable, gobject

[GObject](http://en.wikipedia.org/wiki/GObject)通过使用一些约定在纯 C 中实现对象：静态方法只是将实例结构作为第一个参数的函数。虚拟方法被实现为类结构（一种 vtable）中的函数指针。您可以通过将[父类 struct 放置在子类 struct 中](https://stackoverflow.com/a/1114360/143091)来进行继承，依此类推。

COM 是一个不同的对象系统，在 Windows 中使用，[旨在与 C++ 的内存布局相一致](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/05/68017.aspx)（至少与 MSVC 编译器一致）。对象有一个vtable，你可以得到一个接口指针，然后你可以调用对象的方法。使用的调用约定与上述约定非常相似（相同？），您将实例指针作为第一个参数传递。

现在，我想知道，**是否可以创建一个在 COM 中也有效的 GObject 类/对象？**我正在考虑例如在实例结构的开头放置一个指向类结构的指针，并编写一些胶水代码。然后我是否能够 QueryInterface 指向我的 GObject 子类的指针并在其上调用虚拟方法？

如果它会起作用，你能概述一下如何吗？

如果它不起作用，那么对象系统有什么区别使它不可能？

# java - 在 Java 中实现 GridBagLayout 的问题

> ID：16086649
> 
> 赞同：1
> 
> 时间：2013-04-18T15:10:04.310
> 
> 标签：java, layout, awt, layout-manager, gridbaglayout

我正在尝试在 Java 中实现 GridBagLayout 以实现我必须为我正在构建的程序制作的登录对话框。我要进行干净的 Google 登录。我遇到的主要问题是我设置的约束`GridBagConstraints`不起作用。这是我希望对话框的样子。

![使用 java 的简单登录对话框](https://i.stack.imgur.com/fNyBj.png)

这是我要实现的对话框的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Login_Dialog extends JDialog{

    // SEtting up the required components for the sign in

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    protected JLabel username_Label = new JLabel("Username");
    protected JLabel password_Label = new JLabel("Username");

    protected JTextField username_Field = new JTextField(30);
    protected JTextField password_Field = new JTextField(30);

    protected JButton sign_In = new JButton("Sign in!");

    public Login_Dialog() {
        setSize(600,400);
        setTitle("Sign in");

        setLayout(new GridBagLayout());

        GridBagConstraints c = new GridBagConstraints();

        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 0;
        c.gridy = 0;

        add(username_Label);

        c.fill = GridBagConstraints.HORIZONTAL;
//      c.weightx = 0.5;
        c.gridx = 1;
        c.gridy = 0;

        add(username_Field);

        c.fill = GridBagConstraints.HORIZONTAL;
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 2;

        add(password_Label);

        c.fill = GridBagConstraints.HORIZONTAL;
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 4;

        add(password_Field);

        c.fill = GridBagConstraints.HORIZONTAL;
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 5;

        add(sign_In);

        setVisible(true);

    }

} 
```

更新：

我做了一些改变，似乎我达到了我想要的结果。现在的问题是一切都居中并且按钮的长度太宽。另外，我希望文本字段和标签更大。

这是更新的`GridBagLayout`

```
//cusotmization of buttons
        Dimension signD = sign_In.getPreferredSize();
        signD.height = 50;
        signD.width = 30;

        sign_In.setPreferredSize(signD);

        GridBagConstraints c = new GridBagConstraints();

        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 0;
        c.gridy = 0;

        add(username_Label,c);

        c.fill = GridBagConstraints.HORIZONTAL;
//      c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 1;

        add(username_Field,c);

        c.fill = GridBagConstraints.HORIZONTAL;
//      c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 2;

        add(password_Label,c);

        c.fill = GridBagConstraints.HORIZONTAL;
//      c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 3;

        add(password_Field,c);
//      
//      c.fill = GridBagConstraints.HORIZONTAL;
//      c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 5;
//      
        add(sign_In,c); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:14:17.420

您必须在`add()`

例子 ：

```
add(username_Field, c); 
```

`c`你的 GridBagConstraints在哪里。

这是一个完整的例子：

```
package gui;

import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.WindowConstants;

@SuppressWarnings("serial")
public class LoginPanel extends JPanel
{
    private static final Dimension TFIELD_SZ = new Dimension(120, 20);

    public LoginPanel()
    {
        super(new GridBagLayout());

        final GridBagConstraints cst = new GridBagConstraints();
        cst.insets = new Insets(0, 5, 0, 5);
        cst.weightx = 0.5;
        cst.weighty = 0.5;
        cst.anchor = GridBagConstraints.LINE_START;

        // Username
        cst.gridx = 0;
        cst.gridy = 0;
        this.add(new JLabel("Username:"), cst);
        cst.gridy = 1;
        cst.gridwidth = 2;
        final JTextField uTField = new JTextField();
        uTField.setMinimumSize(TFIELD_SZ);
        uTField.setPreferredSize(TFIELD_SZ);
        this.add(uTField, cst);

        // Password
        cst.gridwidth = 1;
        cst.gridy = 2;
        this.add(new JLabel("Password:"), cst);
        cst.gridy = 3;
        cst.gridwidth = 2;
        final JTextField pwTField = new JTextField();
        pwTField.setMinimumSize(TFIELD_SZ);
        pwTField.setPreferredSize(TFIELD_SZ);
        this.add(pwTField, cst);

        // Buttons
        cst.anchor = GridBagConstraints.CENTER;
        cst.gridy = 4;
        cst.gridwidth = 1;
        this.add(new JButton("Sign in"), cst);
        cst.gridx = 1;
        this.add(new JButton("Sign up"), cst);

    }

    public static void main(final String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                final JDialog myDialog = new JDialog();
                myDialog.setTitle("Sign in");
                myDialog.setSize(180, 170);
                myDialog.setContentPane(new LoginPanel());
                myDialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
                myDialog.setVisible(true);
            }
        });
    }
} 
```

# sql-server-2008 - 输入 - 对存储过程的同一调用中的输出参数 - C#

> ID：16086652
> 
> 赞同：0
> 
> 时间：2013-04-18T15:10:08.363
> 
> 标签：sql-server-2008, c#-3.0

```
using (var con = connection)
            {
                con.Open();
                using (var cmd = new SqlCommand("usp_Students", con))
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    SqlParameter sp = cmd.Parameters.AddWithValue("@StudentIDs", studentId);
                    sp.SqlDbType = SqlDbType.Structured;
                    cmd.ExecuteNonQuery();
                }
            } 
```

我正在向存储过程输入一个值，但在这种情况下，我也想取回一个值。我怎样才能在上面的代码中合并输出？

```
CREATE PROCEDURE usp_Students
      @StudentId Students READONLY,
      @NumberOfStudents INT OUTPUT, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T06:59:37.427

试试这个方法

```
using (var con = connection)
{
    con.Open();
    using (var cmd = new SqlCommand("usp_Students", con))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        SqlParameter sp = cmd.Parameters.AddWithValue("@StudentIDs", studentId);
        sp.SqlDbType = SqlDbType.Structured;

        SqlParameter code = new SqlParameter("@NumberOfStudents", SqlDbType.Int);
        code.Direction = ParameterDirection.Output;
        cmd.Parameters.Add(code);

        cmd.ExecuteNonQuery();

        // Getting output value
        int NumberOfStudent = Convert.ToInt32(cmd.Parameters["@NumberOfStudents"].Value);

    }
} 
```

谢谢

马诺伊

# jquery - 使用 stop() 暂停后恢复动画很慢

> ID：16086661
> 
> 赞同：13
> 
> 时间：2013-04-18T15:10:26.327
> 
> 标签：jquery, jquery-animate

这里有点新手。我有一个轻微故障的动画。我相信这是一个排队问题，但我只想要一个悬停/暂停效果，从我的阅读中我觉得我正在为这个解决方案走错路。

> > 我理解队列的方式是处理一系列较小的动画在不同的时间触发，以达到较大的效果。我一直在做大量的阅读，但我觉得这是我想要实现的错误解决方案。我的研究是悬停/动画然后悬停/动画向下。我只是想恢复动画，所以我再次觉得我走错了路。我正在努力寻找本机解决方案，但我知道有各种插件。
> > 
> > 我留下评论以显示我去过的地方。如果希望将这些剥离，请务必提及，以便我下次知道。

**我想要实现的目标**：悬停，幻灯片停止，悬停，幻灯片恢复。

**我的问题**：当鼠标反复悬停/移出时，动画会大大减慢。

**我尝试过的有限或没有成功**：

1.  清除队列并将结果输出到控制台，它仍然变慢。
2.  将左侧位置值设置为当前左侧值，没有运气。
3.  队列计数器应该准确，位于幻灯片下方。

**JS Fiddle 在这里找到**：http : [//jsfiddle.net/qWQCQ/](http://jsfiddle.net/qWQCQ/)
**JS Fiddle 在这里停止值**：http : [//jsfiddle.net/qWQCQ/1/](http://jsfiddle.net/qWQCQ/1/)

**下面的代码示例**：

**Javascript**：

```
$("document").ready(function(){

//----------------------------------------CONFIG--------------------------------------------------------------

var resetNum = 0;//FOR RESET PURPOSE
var itemRightMargin = 10;//YOUR MARGIN VALUE
var itemWidth = 100;//WIDTH OF YOUR IMAGES, NOT INCLUDING M/P

//----------------------------------------END CONFIG----------------------------------------------------------

$('.w-slides .first').clone().appendTo('.w-slides').removeClass('first').addClass('last');

var clipWidth = (itemRightMargin+itemWidth)*$('.w-slides li').length;
var containerWidth = clipWidth-itemRightMargin;
var clipCapacity = $('.w-slides li').length;
var animation = (containerWidth*-1)+itemWidth;

//SET THE STRUCTURE
$('.w-slideshow').css('width', itemWidth);
$('.w-multi').css('width', containerWidth);
$('.w-slides').css('width', clipWidth);
$('.w-slides li').css({'float':'left', 'width':itemWidth, 'margin-right':itemRightMargin+'px'});

$('.w-slides li:last').css('margin-right', 0);
$('.w-slideshow, .w-multi').css({'padding':resetNum});
$('.w-multi').css({'margin':resetNum});

function animateMe(){
$('.w-multi').animate({left:animation}, 6000, 'linear', function()
    {
        $('.w-multi').css('left', 0);   
        animateMe();
    });
}

$('.w-multi').hover(function(){
        $(this).stop(false, false);
        //$(this).stop().animate({left:animation}, 6000, 'linear');
        //var thisPosition = $(this).css('left');
        //alert(thisPosition);
        //$(this).css('left',thisPosition);
        var queueNum = $('.w-multi').queue('fx').length;
        //(function(){console.log($(this).queue('fx').length);});
        $('#queue').html(queueNum);
        //$(this).queue(function(){console.log($(this).queue('fx').length);});
},
function(){
        animateMe();    
    });

animateMe();
}); 
```

**HTML**：

```
<div>
    <div class="w-slideshow">
        <div class="w-multi">
        <ul class="w-slides">
            <li class="first"><a href="#"><img src="http://www.littleredplanedesign.com/labs/rotator/rotator-images/xmen-1.jpg" /></a></li>
            <li><a href="#"><img src="http://www.littleredplanedesign.com/labs/rotator/rotator-images/xmen-2.jpg" /></a></li>
            <li><a href="#"><img src="http://www.littleredplanedesign.com/labs/rotator/rotator-images/xmen-3.jpg" /></a></li>
            <li><a href="#"><img src="http://www.littleredplanedesign.com/labs/rotator/rotator-images/xmen-4.jpg" /></a></li>
            <li><a href="#"><img src="http://www.littleredplanedesign.com/labs/rotator/rotator-images/xmen-5.jpg" /></a></li>
        </ul>
        </div>

    </div>
    <div id="queue" style="width:150px; margin:0 auto; margin-top:20px;">Num of items in queue = </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:46:20.853

^(首先，+1 是一个非常详细的问题。)

* * *

问题是你总是给动画 6,000 毫秒来完成。如果你将动画暂停一半，你已经完成了一半的工作；但是你仍然给动画 6,000 毫秒以在恢复时完成，这就是它执行速度较慢的原因。

为了解决这个问题，我们需要一点：

![在此处输入图像描述](https://i.stack.imgur.com/PRZbX.gif)

您希望动画发生的速度（以像素/毫秒而不是更传统的公里/小时衡量）可以通过以下方式计算：

```
var speed = Math.abs(animation / 6000); 
```

然后您的`animateMe`函数需要更新以计算动画完成的时间，基于动画必须行进的距离和静态速度：

```
function animateMe() {
    var el = $('.w-multi');
    var distance = Math.abs(animation - el.position().left);
    var time = distance / speed;

    el.animate({
        left: animation
    }, time, 'linear', function () {
        $('.w-multi').css('left', 0);
        animateMe();
    });
} 
```

这可以在这里看到：http: [//jsfiddle.net/qWQCQ/3/](http://jsfiddle.net/qWQCQ/3/)

# tfs - 在开发网站上使用 Team Foundation Server

> ID：16086663
> 
> 赞同：2
> 
> 时间：2013-04-18T15:10:28.047
> 
> 标签：tfs

我们想开始使用 Team Foundation Server 来跟踪 .aspx 文件的版本。我们目前使用共享驱动器在一个 asp.net 网站上进行开发，并以 Visual Studio 作为编辑器。

当我们在 Team Foundation Server 中设置路径时，它就在我们的本地驱动器和带有 TFS 的盒子之间。这并不理想，因为它不会将更改实时推送到我们的开发站点（单独的框）。

有没有办法签出、编辑和签入我们处理的文件，以便它们也出现在 IIS 服务器上的共享驱动器上？还是我们必须在本地处理它们，然后将它们复制回服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:40:52.333

有几种选择。

1.  很简单：一旦您签入更改，就可以使用[Robocopy之类的工具将文件从本地机器推送到开发服务器。](http://en.wikipedia.org/wiki/Robocopy)这将很容易设置，但没有利用完整的 TFS 功能，您可能会覆盖服务器上的其他开发人员更改。

2.  高级：使用自动构建。如果您使用“默认”构建模板，这将编译您的网站解决方案，并且在构建输出中您将有一个文件夹，其中包含名为“已发布网站”的文件夹，它将包含您将代码部署到服务器所需的一切。一旦你有了这个，你可以使用[MSDeploy 将代码发布到 IIS](https://stackoverflow.com/questions/2636153/how-can-i-get-tfs2010-to-run-msdeploy-for-me-through-msbuild?rq=1)

使用构建的其他优点

*   您可以针对每个构建的代码运行代码分析
*   当有人签入无法编译的代码时，您会立即知道
*   您可以在构建环境中针对您的代码运行单元测试
*   要进入服务器，您**必须**签入，因此您可以确信您没有发布未签入到源代码管理的代码
*   您可以在同一构建中同时在调试和发布模式下进行编译，从而降低调试代码交付的风险
*   您可以获得有关代码流失、单元测试代码覆盖率和构建失败等内容的报告，这将有助于提高您交付的代码的质量，并帮助您了解开发工作流程中的弱点。
*   减少听到“它在我的机器上工作”的次数

如果您是 TFS 新手，那么这可能会让人望而生畏。我建议您设置一个自动化构建，它只不过是构建您的解决方案。然后，您可以将构建输出复制到开发服务器。一旦您对此感到满意，然后开始考虑增强构建。例如打开代码分析真的很容易。如果您正在编写单元测试，它们也应该很容易集成到构建中。设置 MSDeploy 需要更多时间和知识。

# python - 在 python 中使用超级对撞机

> ID：16086667
> 
> 赞同：16
> 
> 时间：2013-04-18T15:10:37.673
> 
> 标签：python, audio, mp3, sound-synthesis, supercollider

我想做一些实时声音处理，我听说过[supercollider](http://supercollider.sourceforge.net/)

它看起来很棒，但我想坚持使用 python，因为“正常”编程是问题所在。

有没有办法将 python 脚本作为模块加载到 supercollider 或对立面？

意味着将库导入我的 python 代码并使用 supercollider 功能？

我在网上没有找到太多关于它的信息，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T20:57:34.437

我不知道 SuperCollider 的 python 实现，但是使用[OpenSoundControl](http://opensoundcontrol.org/)在 SC 和 Python 之间进行通信非常容易。下面是一些示例代码，展示了如何将控制信息从 Python 发送到 SC（此处用作音频引擎）。首先是SC部分：

```
s.boot;

(
SynthDef( \sin, { | amp = 0.01, freq = 333, trig = 1 |
    var env, sig;
    env = EnvGen.kr( Env.asr( 0.001, 0.9, 0.001 ), trig, doneAction: 0 );
    sig = LFTri.ar( [ freq, freq * 0.999 ], 0.0, amp ) * env;
    Out.ar( [ 0 ], sig * 0.6 );
}).add;

h = Synth( \sin, [ \amp, 0.4 ] );

x = OSCFunc( { | msg, time, addr, port |
    var pyFreq;

    pyFreq = msg[1].asFloat;
    ( "freq is " + pyFreq ).postln;
    h.set( \freq, pyFreq );
}, "/print" );
) 
```

现在是 Python 部分：

```
import pyOSC3
import time, random
client = pyOSC3.OSCClient()
client.connect( ( '127.0.0.1', 57120 ) )
msg = pyOSC3.OSCMessage()
msg.setAddress("/print")
msg.append(500)
client.send(msg) 
```

因此，您仍然需要在 SC 中编写一些代码（以生成音频类型，以及在 Python 和 SC 之间建立连接），但您可以在 Python 中完成其他所有操作。请参阅教程页面的链接以获得更深入的解释（以及使用 SC 的基本解释）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-17T15:38:20.840

FoxDot ( [http://foxdot.org/](http://foxdot.org/) ) 可能会提供您正在寻找的内容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-03T04:56:02.333

没试过，但[supriya](https://github.com/josiah-wolf-oberholtzer/supriya)看起来很有希望......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-23T01:01:39.917

你也可以使用 Python-osc。（我真的很喜欢那个！）@caseyanderson 关于没有 python 实现是正确的。你可以用 pip 抓取它： `pip install python-osc`并从这里导入`import pythonosc` 或抓取：[https ://pypi.python.org/pypi/python-osc](https://pypi.python.org/pypi/python-osc)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-19T23:15:37.493

我也找不到任何合适的东西，所以我创建了一个轻量级模块[python-supercollider](https://github.com/ideoforms/python-supercollider/)，它允许您使用 SuperCollider 服务器进行综合，并使用 Python 3 进行控制和排序逻辑。

它是 SuperCollider OSC 命令集的包装器，遵循与 SC 客户端语言相同的模式：

```
from supercollider import Server, Synth

server = Server()
synth = Synth(server, "sine", { "freq" : 440.0, "gain" : -12.0 })
synth.set("freq", 880.0) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-14T14:09:02.137

我更新了@caseyanderson 的答案，因为 OSC python 模块似乎已经过时了。代码仍然来自[本教程，](https://github.com/caseyanderson/workshops/blob/master/supercollider/python_SC/python_to_sc.md)它展示了如何将控制信息从 Python 发送到 SC（这里用作音频引擎）。首先是 SC 部分（未更改）：

```
s.boot;

(
SynthDef( \sin, { | amp = 0.01, freq = 333, trig = 1 |
    var env, sig;
    env = EnvGen.kr( Env.asr( 0.001, 0.9, 0.001 ), trig, doneAction: 0 );
    sig = LFTri.ar( [ freq, freq * 0.999 ], 0.0, amp ) * env;
    Out.ar( [ 0 ], sig * 0.6 );
}).add;

h = Synth( \sin, [ \amp, 0.4 ] );

x = OSCFunc( { | msg, time, addr, port |
    var pyFreq;
    pyFreq = msg[1].asFloat;
    ( "freq is " + pyFreq ).postln; h.set( \freq, pyFreq );
}, '/print' );
) 
```

然后是 Python 部分（更新，基于[python-osc](https://pypi.org/project/python-osc/)）：

```
from pythonosc import udp_client
client = udp_client.SimpleUDPClient("127.0.0.1", 57120) #default ip and port for SC
client.send_message("/print", 440) # set the frequency at 440 
```

您必须首先执行 SC 部分。您应该听到 330 Hz 的正弦波。python 部分将正弦波的频率更改为 440 Hz。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-04-15T09:57:02.327

我的教授和一些同学开发了这个库 sc3nb，它可以用来从 Python 中寻址、编码和操作 SuperCollider。它适用于 OSC，但语法更简单。

[图书馆代码](https://github.com/thomas-hermann/sc3nb)

[教程](https://github.com/thomas-hermann/sc3nb/blob/master/examples/sc3nb-examples.ipynb)

示例（教程中的更多详细信息）：

```
import sc3nb as scn
sc = scn.startup()  # startup sc3 sclang, boot server, load

#easy communication with Server Command Refs
sc.cmd(r"""
             #your SuperCollider-code here
       """)
sc.msg(...)
sc.bundle(...) 
```

# android - 无法启动接收器异常

> ID：16086668
> 
> 赞同：0
> 
> 时间：2013-04-18T15:10:40.997
> 
> 标签：android, broadcastreceiver

问题：应用程序有时会在启动时抛出异常，但并非总是如此。我不明白为什么有时会发生这种情况，但有时不会。任何建议将不胜感激。

一些日志：

```
04-18 17:58:12.437: E/AndroidRuntime(26208): FATAL EXCEPTION: main
04-18 17:58:12.437: E/AndroidRuntime(26208): java.lang.RuntimeException: Unable to start receiver com.cm.clou.ContactsListUpdateReceiver: java.lang.NullPointerException
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1805)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.app.ActivityThread.access$2400(ActivityThread.java:117)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.os.Looper.loop(Looper.java:130)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at java.lang.reflect.Method.invoke(Method.java:507)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at dalvik.system.NativeStart.main(Native Method)
04-18 17:58:12.437: E/AndroidRuntime(26208): Caused by: java.lang.NullPointerException
04-18 17:58:12.437: E/AndroidRuntime(26208):    at com.cm.clou.ConversationsListActivity.notifyAdaper(ConversationsListActivity.java:270)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at com.cm.clou.ContactsListUpdateReceiver.onReceive(ContactsListUpdateReceiver.java:17)
04-18 17:58:12.437: E/AndroidRuntime(26208):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794) 
```

收货人代码：

```
public class ContactsListUpdateReceiver extends BroadcastReceiver {

    public static final String TAG = ContactsListUpdateReceiver.class.getSimpleName();

    @Override
    public void onReceive(Context context, Intent intent) {
        String message = intent.getStringExtra("message");
        if (message != null) {
            Log.d(TAG, "Uslishali otvet ot servisa po apdejtu contactov: " + message);
            ConversationsListActivity.notifyAdaper(context);
        }
    }

} 
```

在清单中：

```
<receiver
    android:name="com.cm.clou.ContactsListUpdateReceiver"
    android:enabled="true"
    android:exported="false" >
    <intent-filter>
        <action android:name="com.cm.clou.ACTION_CONTACTS_LIST_UPDATE" />
    </intent-filter>
</receiver> 
```

还有我的 notifyAdaper 代码：

```
private static ConversationsListCursorAdapter conversationsListCursorAdapter = null;
@SuppressLint("NewApi")
    public static void notifyAdaper(Context context) {

        Uri uri = ClouContentProvider.CONVERSATIONS_CONTENT_URI;
        Cursor cursor = null;

        if (android.os.Build.VERSION.SDK_INT < 11) {
            cursor = context.getContentResolver().query(uri, null, null, null, null);
        } else {
            CursorLoader cursorLoader = new CursorLoader(context, uri, null, null, null, null);
            cursor = cursorLoader.loadInBackground();
        }

        conversationsListCursorAdapter.changeCursor(cursor);
        conversationsListCursorAdapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:17:00.837

看起来你从不实例化`conversationsListCursorAdapter`.

您需要在访问它之前对其进行实例化。

# wpf - 当按钮不多且不同视图的大部分重叠时，组织功能区按钮的正确方法是什么？

> ID：16086669
> 
> 赞同：0
> 
> 时间：2013-04-18T15:10:45.123
> 
> 标签：wpf, ribbon, ribbon-control

我正在使用以前没有功能区的应用程序。我们正在对应用程序功能的访问方式进行重大更改，但不会对功能本身进行更改。

该应用程序提供了可以插入其他应用程序的功能，因此当我们的应用程序的选项卡处于活动状态时，我们希望显示一个上下文选项卡。

当用户选择我们应用程序的一个选项卡时，上下文选项卡将出现“我的应用程序”，并且它将具有功能按钮。

我们的问题来了，因为大多数“标签”或报告是 3 种不同的类型。

他们中的大多数是“查看者”，他们只是显示信息，所以可用的按钮就像“展开部分”之类的东西。

然后我们有“编辑器”选项卡，允许查看信息，但您还可以编辑它。所以我们仍然会有与“查看器”相同的按钮，但还会有“删除”、“保存”等，这些按钮会根据特定条件启用。

最后，我们有一个选项卡，当它显示时，它具有与编辑器相同的按钮（查看器 + 编辑器的特殊按钮）以及更多具有特定于该选项卡的功能的按钮。

分布将类似于：

7 位观众 => 有 8 个按钮

7 个编辑器 => 带有 3 个附加按钮（加上查看器的 8 个按钮）

1 个特殊选项卡 => 带有查看器和编辑器的所有按钮以及 4 个专用按钮。

我一直[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/cc872782.aspx#contextualTabs)阅读，试图决定以一种可用的方式并符合微软指南的更好的方式来组织功能区上的这些按钮，但我很困惑。

根据您对此的看法，有几种可能的方式来组织功能区上的按钮。

*   最简单的方法是始终拥有所有按钮，并为相应的报告启用它们。但这会导致在许多情况下会有许多按钮不适用于所选视图。

*   我们可以有几个选项卡： 在一个选项卡中拥有所有情况下通用的查看器按钮。另一个选项卡中的“编辑器”专用按钮。最后是特殊报告按钮的附加选项卡。但我觉得由于它们不是太多的按钮，这种做法会迫使用户进行不必要的点击，不太好用。

我们无法更改底层功能（所有这些不同报告中的分离），因为我们只是封装了一个遗留应用程序。

您在这方面可以给我的任何建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:37:18.210

我在其他地方跟进了这个问题，最后我得到了一个关于他们在这个问题上的立场的 Microsoft 回答。[你可以在这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/6aed8acb-605a-4961-85ee-d12f1a51458b/#9b7d1800-cb00-484f-94c7-7d497f4eb375)找到整个线程

在这种情况下，指南并不倾向于一件事或另一件事。测试人员可以使用更具体的可用性研究来确定在特定场景中哪个更好。

虽然答案基本上是我猜到的（做最适合你的情况），但我提出这个问题的原因是因为使用功能区的许可协议的一部分说你必须遵循微软指南来创建功能区。在这种特定情况下，我不清楚指南建议的路径是什么。

# integration-testing - 应用程序的集成和资格测试

> ID：16086676
> 
> 赞同：0
> 
> 时间：2013-04-18T15:11:07.050
> 
> 标签：integration-testing

我正在尝试使用 来实现计算器`JAVA`，因此我遵循以下阶段：

1.  需求分析（规格）
2.  UML 图
3.  编程
4.  单元测试
5.  集成和资格测试

对于我正在使用的单元测试，`JUnit`但我不知道完成第五阶段需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:37:46.227

集成测试是软件测试中的一个阶段，其中将各个软件模块组合在一起并作为一个组进行测试。例如，您可以使用 JBoss Arquillian ( [http://www.jboss.org/arquillian](http://www.jboss.org/arquillian) )。也可以使用 Spring+JUnit 与您的应用程序交互。

# c# - C# - 将 C# 变量传递给 JavaScript

> ID：16086679
> 
> 赞同：1
> 
> 时间：2013-04-18T15:11:17.153
> 
> 标签：c#, javascript, string

我在 C# 中有以下代码行：

```
Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Transaction_Number.aspx?num=<%=trans_number%>', '_newtab')", true); 
```

现在，trans_number 是我的 C# 代码隐藏中的一个变量。我的问题是，当我处理查询字符串（num 变量）时，结果总是：

```
<%trans_number%> 
```

而不是该变量的内容。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T15:13:48.047

我认为，你可以很容易地解决这个问题......也许：

```
Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Transaction_Number.aspx?num=" + trans_number + "', '_newtab')", true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:28:12.610

您有一个与变量连接的字符串，然后又嵌入到另一个字符串中。`String.Format`当您使用中间变量和方法时，这样的问题往往会消失：

```
string url = String.Format(@"http://localhost:4000/Transaction_Number.aspx?num={0}", trans_number);
string js = String.Format("window.open('{0}', '_newtab')", url);

Page.ClientScript.RegisterStartupScript(Page.GetType(), null, js, true); 
```

# angularjs - 为什么 Angular $timeout 会阻止端到端测试？

> ID：16086681
> 
> 赞同：7
> 
> 时间：2013-04-18T15:11:21.977
> 
> 标签：angularjs, timeout, end-to-end

我制定了一个指令，用于向用户显示通知消息。为了显示我写的通知：

```
$scope.$watch($messaging.isUpdated, function() {
    $scope.messages = $messaging.getMessages();
    if ($scope.messages.length > 0) {
        $timeout(function() {
            for (var i = 0; i < $scope.messages.length; i++) {
                if (i + 1 < $scope.messages.length) {
                    $messaging.removeMessage($scope.messages[i]);
                } else {
                    $messaging.removeMessage($scope.messages[i]);
                }
            }
        }, 5000);
    }
}); 
```

我使用 $timeout 来确保消息在屏幕上停留 5 秒。

现在我想对其进行端到端测试，以便确保显示通知。问题是当显示通知时，端到端也像通知消息一样超时。这使得无法检查是否显示了正确的通知。.

这是我的测试代码：

```
it('submit update Center', function() {
    input('center.Name').enter('New Name');
    input('center.Department').enter('New Department');
    input('center.Contact').enter('New contact');
    input('center.Street').enter('New street');
    input('center.City').enter('New city');
    input('center.Country').enter('New Country');
    element('button#center_button').click();

    expect(element('.feedback').count()).toBe(1);
    expect(element('.feedback:first').attr('class')).toMatch(/success/);

    expect(element('.error.tooltip').count()).toBe(0);
}); 
```

我想避免使用 javascript setTimeout() 并希望有另一个（Angular）解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T14:42:50.490

坏消息，伙计。这是 AngularJs 中的一个已知问题。这里有讨论[，这里](https://groups.google.com/forum/?fromgroups=#!topic/angular/e2CfWnHjvfU)有一个“某种程度上相关”的[问题](https://github.com/angular/angular.js/issues/1472)。

幸运的是，您可以通过汇总自己的`$timeout`服务、手动调用`setTimeout`和调用来解决此`$apply`问题（这是我提到的讨论中的建议）。这真的很简单，虽然它真的很丑。一个简单的例子：

```
app.service('myTimeout', function($rootScope) {
  return function(fn, delay) {
    return setTimeout(function() {
      fn();
      $rootScope.$apply();
    }, delay);
  };
}); 
```

请注意，这与 Angular 不兼容`$timeout`，但您可以根据需要扩展您的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:36:39.183

关于你的小便条 if/else 语句

```
$scope.$watch($messaging.isUpdated, function() {
$scope.messages = $messaging.getMessages();
if ($scope.messages.length > 0) {
    $timeout(function() {
        for (var i = 0; i < $scope.messages.length; i++) {
            if (i + 1 < $scope.messages.length) {
                $messaging.removeMessage($scope.messages[i]);
            } else { /**** unnecessay else here *****/
                $messaging.removeMessage($scope.messages[i]);
            }
        }
    }, 5000);
}}); 
```

# facebook - 某些用户无法访问 Facebook 页面相册

> ID：16086685
> 
> 赞同：1
> 
> 时间：2013-04-18T15:11:27.783
> 
> 标签：facebook

我有一个 Facebook 页面 (id: 134536769931125) 有多个应用程序为页面创建相册并即时上传照片。除了一个之外，它对所有这些都正常。

当我使用我的开发者帐户时，我可以查看所有相册和照片。但是当我使用另一个帐户（也是 FB 开发人员，但不是应用程序的开发人员，而不是页面的管理员）时，我只能看到两个生成的相册，而看不到最后一个。

相册是使用相同的脚本创建的，并使用相同的脚本上传照片，只是相册设置不同。

我还尝试使用 Graph API Explorer ( [https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/) ) 探索专辑，只有在使用具有“user_photos”权限的访问令牌时，才会为第一个用户列出所有专辑。并且该专辑根本没有为其他用户列出。

然而，专辑的隐私设置为“所有人”。与工作设置相比，没有不同的设置。我认为所有专辑都应该公开。

您还可以尝试从 Graph API Explorer 查看数据。以下是专辑 ID 531022926949172（工作）425250747526391（工作）539720712746060（不工作）

Facebook 方面是否存在导致此行为的更改/错误？

欢迎任何回复。感谢您阅读这么长的帖子，但我找不到更短的方法来详细描述:)

一切顺利，多鲁克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:32:57.267

我收到的错误如下： { "error": { "message": "Unsupported get request.", "type": "GraphMethodException", "code": 100 } }

我发现其他人在[Unsupported get request in Facebook Graph API](https://stackoverflow.com/questions/13739609/unsupported-get-request-in-facebook-graph-api)遇到了这个问题。看看接受的答案是否有效，并告诉我..

# html - 如何使用 Lift 框架获取从片段传递的 HTML 页面中的参数

> ID：16086687
> 
> 赞同：4
> 
> 时间：2013-04-18T15:11:44.107
> 
> 标签：html, web-applications, lift

我想开发一个 Lift web 应用程序，我有一个索引页面，这里有一个正文：

```
<div id="main" class="lift:surround?with=default&at=content">
  <div> App </div> 
  <div>
    <form method="post" class="lift:DumbForm">
       <table>
            <tr><td> Email:</td> <td><input name="email" type="text"></td></tr>
            <tr><td> Password:</td> <td><input name="pwd" type="password"></td></tr>
            <tr><td> Name:</td> <td><input name="name" type="text"></td></tr>
            <tr><td><input type="submit" value="Sign in"></td> <td><input type="reset" value="Reset"></td></tr>
        </table>
    </form>
  </div> 
</div> 
```

使用相应的片段（文件“DumbForm.scala”）：

```
package code
package snippet

import net.liftweb._
import http._
import scala.xml.NodeSeq

/**
 * A snippet that grabs the query parameters
 * from the form POST and processes them
 */
object DumbForm {
  def render(in: NodeSeq): NodeSeq = {  
    // use a Scala for-comprehension to evaluate each parameter
    for {
      r <- S.request if r.post_? // make sure it's a post
      name <- S.param("name") // get the name field
    } {
      S.notice("Nom: "+name)
      S.redirectTo("/hello")
    }

    // pass through the HTML if we don't get a post and
    // all the parameters
    in
  }
} 
```

我想将此片段中的属性“名称”传递给另一个视图，即 HTML 页面（“hello.html”），它将获取并显示该名称。

**但是我不知道如何将片段中的“name”参数传递给视图（hello.html），以及如何在视图中获取此参数？！**

此刻，我的 hello.html 有：

```
<body>
<p> Hello ... (you must display the name!)</p>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:34:28.480

要执行您想做的事情，您只需将表单直接指向`hello.html`已安装的位置。我假设它`hello`在同一条路径上。

**哑形式.html**

```
<div id="main" class="lift:surround?with=default&at=content">
  <div> App </div> 
  <div>
    <form method="post" action="hello">
       <table>
            <tr><td> Email:</td> <td><input name="email" type="text"></td></tr>
            <tr><td> Password:</td> <td><input name="pwd" type="password"></td></tr>
            <tr><td> Name:</td> <td><input name="name" type="text"></td></tr>
            <tr><td><input type="submit" value="Sign in"></td> <td><input type="reset" value="Reset"></td></tr>
        </table>
    </form>
  </div> 
</div> 
```

**你好.html**

```
<div data-lift="ShowHelloSnippet">
  <p>Hello <span name="paramname"></span></p>
</div> 
```

**片段**

```
class ShowHelloSnippet {
  def render = {
    "@paramname" #> S.param("name")
  }
} 
```

* * *

更多的 Lift 方法是使用 Lift 的[SHtml 表单元素](http://scala-tools.org/mvnsites/liftweb-2.0/framework/scaladocs/net/liftweb/http/SHtml%24object.html)：

**哑形式.html**

```
<div id="main" class="lift:surround?with=default&at=content">
  <div> App </div> 
  <div>
    <form method="post" data-lift="FormHandlerSnippet">
       <table>
            <tr><td> Email:</td> <td><input name="email" type="text"></td></tr>
            <tr><td> Password:</td> <td><input name="pwd" type="password"></td></tr>
            <tr><td> Name:</td> <td><input name="name" type="text"></td></tr>
            <tr><td><input id="submitbutton" type="submit" value="Sign in"></td> <td><input type="reset" value="Reset"></td></tr>
        </table>
    </form>
  </div> 
</div> 
```

片段

```
class MyFormResponse(
    var email:String="", 
    var password:String="", 
    var name:String ="")

class FormHandlerSnippet {

  def render = {
     val responseForm = new MyFormResponse()
     "@email" #> SHtml.text("", (valueSupplied) => {
        responseForm.email = valueSupplied
     }) &
     "@pwd" #> SHtml.password("", (valueSupplied) => {
        responseForm.password = valueSupplied
     }) &
     "@name" #> SHtml.text("", (valueSupplied) => {
        responseForm.name = valueSupplied
     }) &
     "#submitbutton" #> SHtml.submit("Sign In", () => {
        S.redirectTo("/hello", () => ShowHelloSnippet.myVals(Full(responseForm)))
     })
  }
} 
```

**你好.html**

```
<div data-lift="ShowHelloSnippet">
  <p>Hello <span name="paramname"></span></p>
</div> 
```

**片段**

```
object ShowHelloSnippet {
  object myVals extends RequestVar[Box[MyFormResponse]](Empty)
}

class ShowHelloSnippet {
  def render = "*" #> {
    ShowHelloSnippet.myVals.get.map { r =>
      "@paramname" #> r.name
    }
  }
} 
```

这将在对象上设置表单值，然后执行有状态重定向，该重定向设置值以`ShowHelloSnippet`供您在页面被重定向后使用。作为两者的替代方案，您可以使用 Ajax 在同一页面上简单地显示值。

# c# - 将 Datagrid Columnheader 背景绑定到数据表行

> ID：16086689
> 
> 赞同：0
> 
> 时间：2013-04-18T15:11:46.443
> 
> 标签：c#, wpf, binding, datagrid

我想根据绑定到 DataGrid 的数据表中的一行来为我的 DataGrid ColumnHeader 着色。但是我该怎么做呢？我在 Datagrid.Row 上使用的方法不起作用，因为显然没有我可以使用的“列”属性。

我想出了这个，所以我可以在我的 Colorconverter 中使用整个 DataGrid，但是我无法找到一种方法来确定当前呈现的是哪个 Columnheader。

XAML：

```
 <DataGrid x:Name="excelDataTable_ExcelData">
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource AncestorType=DataGrid}, Converter={StaticResource ExcelColumnColorConverter}}"></Setter>
        </Style>
    </DataGrid> 
```

颜色转换器背后的代码：

```
public object Convert(object value, Type targetType, object parameter,   System.Globalization.CultureInfo culture)
{
    var col = (System.Data.DataColumn)value;
    var colStateObj = col.Table.Rows[col.Table.Rows.Count-1][col.ColumnName];
    Enums.RowState colorValue = (Enums.RowState)Enum.Parse(typeof(Enums.RowState), colStateObj.ToString());

    switch (colorValue)
    {
        case Enums.RowState.HeaderRow:
            return Brushes.Gainsboro;
        case Enums.RowState.isIncluded:
            return Brushes.LightGreen;
        case Enums.RowState.NotIncluded:
            return Brushes.LightSalmon;
        default:
            return Brushes.Azure;
    }
}

/// <summary>
/// Converts the value of the hidden Color row to a color on the Data table.
/// </summary>
/// <param name="value">The value</param>
/// <param name="targetType">The type of the binding target.</param>
/// <param name="parameter">The converter parameter.</param>
/// <param name="culture">The culture</param>
/// <returns>
/// EThe converted value or NULL
/// </returns>
/// <exception cref="System.NotImplementedException">Not implemented because it is not needed</exception>
public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:53:27.033

我终于找到了一个解决方案，使用多重绑定：

XAML：

```
 <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background">
                        <Setter.Value>
                            <MultiBinding Converter="{StaticResource ExcelColumnColorConverter}">
                                <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}"></Binding>
                                <Binding RelativeSource="{RelativeSource self}" Path="Column"></Binding>
                            </MultiBinding>
                        </Setter.Value>
                    </Setter>
                </Style> 
```

转换器：

```
 public class ExcelColumnColorConverter : IMultiValueConverter
    {
   public object Convert(object[] value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (!(value[1] == null))
            {
                var dgrid = (DataGrid)value[0];
                var colHeader = ((DataGridTextColumn)value[1]).Header.ToString();

                var dView = (System.Data.DataView)dgrid.ItemsSource;
                var table = dView.Table;

                var rowstateObj = table.Rows[table.Rows.Count - 1][colHeader];
                Enums.RowState colorValue = (Enums.RowState)Enum.Parse(typeof(Enums.RowState), rowstateObj.ToString());

                switch (colorValue)
                {
                    case Enums.RowState.HeaderRow:
                        return Brushes.Gainsboro;
                    case Enums.RowState.isIncluded:
                        return Brushes.LightGreen;
                    case Enums.RowState.NotIncluded:
                        return Brushes.LightSalmon;
                    default:
                        return Brushes.Azure;
                }
            }
            else
            {
                return null;
            }

        } 
```

# svn - Tortoise SVN 错误“此平台不支持符号链接”

> ID：16086691
> 
> 赞同：4
> 
> 时间：2013-04-18T15:11:54.093
> 
> 标签：svn, tortoisesvn, symlink

当我尝试更新我的项目的子文件夹时，乌龟 SVN 给了我错误

```
Working copy "c:\project\extensions" locked.
"c:\project\extensions" is already locked 
```

我试图从`\extensions`关卡和`c:\project`关卡中进行清理，这两者都给了我-

```
Cleanup failed to process the following paths:
c:\projects
Symbolic links are not supported on this platform 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:23:23.273

尽管 Subversion 可以对符号链接进行版本控制，但 Windows 上的 Subversion 不支持它们（真正的符号链接支持直到 Windows 7 发布才出现在 NTFS 中）。您的存储库的其他用户之一显然已经创建、添加和提交了一个或多个符号链接。

代替符号链接，IIRC Subversion 将为您提供一个文本文件，其中包含一个注释，告诉您该符号链接指向的位置。

您将需要要求其他用户删除符号链接，可能用文件级外部替换它们以模拟行为。这并不理想，但如果您有使用存储库的 Windows 客户端，那么您现在真正可以做的就是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-17T17:16:25.053

现在看来，此问题是由 OneDrive 同步有问题的文件引起的，该文件显示为 TortoiseSVN 的符号链接。我通过将文件复制到非 One Drive 支持的位置来解决它，从那里更新 SVN，一切正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-25T05:09:42.390

TortoiseSVN 1.8 开始支持符号链接。似乎此错误消息是不支持它们的日子遗留下来的。应报告给开发人员进行调整。

# android - 混淆 JAR 的 Android 库项目

> ID：16086692
> 
> 赞同：1
> 
> 时间：2013-04-18T15:11:56.317
> 
> 标签：android, eclipse, obfuscation, proguard, library-project

我有一个巨大的 android 库项目。而且我必须混淆从视图扩展的类。

我无法理解 proguard 的使用。我应该怎么做？你能一步一步描述我需要做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T22:51:01.990

Android SDK 不会像这样混淆库项目，只会混淆完整的应用程序（包括它们的库）。

但是，您可以自己运行 ProGuard，其配置类似于 ProGuard 手册 > 示例 >[典型库](http://proguard.sourceforge.net/manual/examples.html#library)中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:07:11.487

我认为您的问题与stackoverflow问题非常相似......请参阅此问题......[在这里](https://stackoverflow.com/questions/2531187/android-and-obfuscation) 我相信你会找到一些有用的步骤，也可能会得到答案...... ...

[https://stackoverflow.com/questions/2531187/android-and-obfuscation](https://stackoverflow.com/questions/2531187/android-and-obfuscation)

# django - Django：如何显示与models.ManyToManyField给定的单个关联的数据列表

> ID：16086693
> 
> 赞同：0
> 
> 时间：2013-04-18T15:12:01.370
> 
> 标签：django, django-templates, django-views

我是新手，也许这是一个愚蠢的问题，所以提前感谢您的帮助。我想在模板中看到由特定导演执导的电影列表。以下文件是我目前创建的，请在文件中添加更正。

这是models.py：

```
from django.db import models

class Genere_Film( models.Model ):
    genere = models.CharField( max_length=25 )
    def __unicode__(self):
        return self.genere
    class Meta:
        verbose_name_plural = "Generi_Film"

class Anno( models.Model ):
    anno = models.CharField( max_length=4 )
    def __unicode__(self):
        return self.anno
    class Meta:
        verbose_name_plural = "Anno"

class Durata( models.Model ):
    durata = models.CharField( max_length=5 )
    def __unicode__(self):
        return  self.durata
    class Meta:
        verbose_name_plural = "Durata"

class Attore( models.Model ):
    nome = models.CharField( max_length=30 )
    cognome = models.CharField( max_length=30 )
    foto = models.CharField( max_length=100 )
    data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
    def __unicode__(self):
        return self.nome + " " + self.cognome + " " + self.foto
    class Meta:
        verbose_name_plural = "Attori"

class Regista( models.Model ):
    nome = models.CharField( max_length=30 )
    cognome = models.CharField( max_length=30 )
    foto = models.CharField( max_length=100 )
    data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
    def __unicode__(self):
        return self.nome + " " + self.cognome + " " + self.foto
    class Meta:
        verbose_name_plural = "Registi"

class Studio( models.Model ):
    nome = models.CharField( max_length=30 )
    foto = models.CharField( max_length=100 )
    data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
    def __unicode__(self):
        return self.nome #+ " " + self.foto
    class Meta:
        verbose_name_plural = "Studi"

class Trailer( models.Model ):
   trailer = models.CharField( max_length=100 )
   data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
   def __unicode__(self):
        return self.trailer
        class Meta:
            verbose_name_plural = "Trailers"

class Film( models.Model ):
    titolo = models.CharField( max_length=39 )
    trama = models.CharField( max_length=1000 )
    locandina = models.CharField( max_length=100 )
    copertina = models.CharField( max_length=100 )
    trailer = models.ForeignKey( Trailer )
    data_inserimento = models.DateField( null=True, verbose_name="data d'inserimento" )
    anno = models.ForeignKey( Anno )
    durata = models.ForeignKey( Durata )
    attori = models.ManyToManyField( Attore )
    registi = models.ManyToManyField( Regista )
    studi = models.ManyToManyField( Studio )
    generi = models.ManyToManyField( Genere_Film )
    def __unicode__(self):
        return self.titolo + " " + self.trama + " " + self.locandina + " " + self.copertina
    class Meta:
        verbose_name_plural = "Film" 
```

这是 urls.py：

```
from django.conf.urls.defaults import *

urlpatterns = patterns('',    
    (r'^Film$', 'Database.views.film'),
) 
```

这是views.py：

```
from django.shortcuts import render_to_response
from django.template import RequestContext
from models import *

def film(request):
    film = Film.objects.all()
    return render_to_response('Film.html', { 'film': film, }) 
```

这是模板.html：

```
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:26:59.007

您需要将导演 ID 传递给 url：

```
urlpatterns = patterns('',    
    url(r'^film/$', 'Database.views.film'),
    url(r'^film/director/(?P<director_id>\d+)/$', 'Database.views.film', name="films_by_director"),
) 
```

然后在视图中按它过滤：

```
def film(request, director_id=None):
    film = Film.objects
    if director_id:
        director = get_object_or_404(Regista, id=director_id)
        film = film.filter(registi=director)
    else:
        film = film.all()
    return render_to_response('Film.html', { 'film': film, }) 
```

在模板列表中，例如：

```
<ul>
{% for f in film %}
    <li>{{ f }}</li>
{% endfor %}
</ul> 
```

# java - 烧烤条形码生成器不显示带有网络应用程序的条形码编号

> ID：16086694
> 
> 赞同：2
> 
> 时间：2013-04-18T15:12:01.423
> 
> 标签：java, spring, web, barcode

我在一个独立的 Java 应用程序中尝试使用烧烤条码生成器，并且能够打印带有图像中显示的条码编号的条码。

![在此处输入图像描述](https://i.stack.imgur.com/JWEJL.png)

但是当我从 Spring Web 应用程序执行相同的方法时，生成的条码不显示条码编号，如下图所示。我使用相同的文件路径来保存图像并对目录具有完整的 rw 权限。你有这方面的线索吗，谢谢

![在此处输入图像描述](https://i.stack.imgur.com/PDdK9.png)

我正在使用下面的代码片段

```
barcode = BarcodeFactory.createCode128A(barcode_Id);
File f = new File("/opt/rd/barcode/"+barcode_Id+".png");
BarcodeImageHandler.savePNG(barcode, f); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T21:09:27.283

我已经在 Grails 中解决了这个问题，为我的条形码设置字体并覆盖**Barcode中的****calculateSize()**方法：

 **```
private Dimension calculateSize(){
    Dimension d = new Dimension();
    if(EnvironmentFactory.getEnvironment() instanceof HeadlessEnvironment)
    try
    {

        if(font == null)
        {
            d = draw(new SizingOutput(font, getForeground(), getBackground()), 0, 0, barWidth, barHeight);
        } else
        {
            java.awt.FontMetrics fontMetrics = getFontMetrics(font);
            d = draw(new SizingOutput(font, fontMetrics, getForeground(), getBackground()), 0, 0, barWidth, barHeight);
        }
    }
    catch(OutputException e)
    {
        e.printStackTrace();
    }
    else
    try
    {
        java.awt.FontMetrics fontMetrics = null;
        if(font != null)
        fontMetrics = getFontMetrics(font);
        d = draw(new SizingOutput(font, fontMetrics, getForeground(), getBackground()), 0, 0, barWidth, barHeight);
    }
    catch(OutputException e) { }
    return d;
} 
```

sourceforge 中的[这个线程可以更清楚地说明这个问题。](http://sourceforge.net/p/barbecue/discussion/266281/thread/786e8818)**

# angularjs - 通过复选框单击使用指令更改输入类型

> ID：16086696
> 
> 赞同：3
> 
> 时间：2013-04-18T15:12:04.367
> 
> 标签：angularjs, angularjs-directive

我的主要目标是通过单击复选框将密码的输入类型更改为文本。

理解 DOM 操作应该在指令中完成，并且在阅读[AngularJS: can't change input type](https://stackoverflow.com/questions/15148456/angularjs-cant-change-input-type)

我盯着我的指令如下（ [jsfiddle](http://jsfiddle.net/arcayne/K6Qgm/5/)中包含的所有代码）

```
 <div ng-app="SignComponents">
     <bca-sign-up-password> </bca-Sign-Up-Password>
 </div> 
```

但是我还没有真正使它起作用。. . 有什么建议么？我正在以有角度的方式解决它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:38:23.443

首先，`element.html`是一个方法而不是一个属性，所以你覆盖了`scope.$watch`回调中的函数。其次，每个人（您自己、Angular、浏览器）都更容易更改输入类型：

[http://jsfiddle.net/K6Qgm/6/](http://jsfiddle.net/K6Qgm/6/)

```
scope.$watch('viewPasswordCheckbox', function (newValue) {
    element.find('input')[1].type = newValue ? 'password' : 'text';
}); 
```

编辑：如果您确实需要支持旧版本的 IE（以上适用于 9），您可以将输入渲染两次并像这样显示/隐藏它：http: [//jsfiddle.net/K6Qgm/7/](http://jsfiddle.net/K6Qgm/7/)

```
function (newValue) {
    var show = newValue ? 2 : 1,
        hide = newValue ? 1 : 2,
        elements = element.find('input');
    elements[hide].style.display = 'none';
    elements[show].style.display = '';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:13:58.547

使用`ng-hide`and`ng-show`比手动操作更好，对于指令模板可能是这样的：

```
<div>
  <input
    required
    type="text"
    name="password"
    class="input password"
    placeholder="Password"
    ng-hide="viewPassword"
    ng-model="user.Password"
  >
  <input
    required
    name="password"
    type="password"
    class="input password"
    placeholder="Password"
    ng-show="viewPassword"
    ng-model="user.Password"
  >
  <input type="checkbox" class="btn btn-mini" ng-click="showPassword()">
</div> 
```

链接功能：

```
var linker = function(scope, element, attrs){
  scope.viewPassword = true;
  scope.showPassword = function(){
    scope.viewPassword = !scope.viewPassword;
  };
}; 
```

工作示例[plunker](http://plnkr.co/edit/quaUskeMRtMPSFoonbRw?p=preview)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T23:42:58.400

如何创建 2 个输入字段，一个输入类型=文本，第二个输入类型=密码指向相同的 ng-model=user.password”，并使用复选框（showpassword）来控制显示哪个输入。

```
<input ng-hide="showpassword" type="password" name="password" class="form-control" placeholder="Password"   ng-model="user.password" />
<input ng-show="showpassword" type="text" name="password" class="form-control" ng-model="user.password" />
<input type="checkbox" ng-model="showpassword" ng-checked="false"> Show Password 
```

# c# - 为 Base64 图像序列化包装 ImageSource

> ID：16086697
> 
> 赞同：2
> 
> 时间：2013-04-18T15:12:06.283
> 
> 标签：c#, wpf, image

我有一个 WPF 控件，其中包含带有图像的面板。我正在尝试序列化它，以便它可以独立加载，而不必在本地文件夹中包含图像。

我知道我可以将图像存储为 Base64 字符串，然后可能将其加载备份，但我想做的是包装 ImageSource 类以接受 Base64 字符串作为源。

我稍微研究了 ImageSource 类，我相信我只是不太了解它是如何工作的。当我在自定义包装类中实现 ImageSource 时，我得到了 2 个我不清楚的方法：

1.  元数据

2.  创建实例核心

我想知道是否有人可以对这些方法有所了解，或者指出一个不会让我回到 MSDN 文档的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T19:13:28.403

这个类包装了一个从 base64 字符串属性初始化的 BitmapImage：

```
public class Base64BitmapImage : BitmapSource
{
    private BitmapImage bitmap;
    private string base64Source;

    public string Base64Source
    {
        get { return base64Source; }
        set
        {
            base64Source = value;
            bitmap = new BitmapImage();

            if (DecodeFailed != null)
            {
                bitmap.DecodeFailed += DecodeFailed;
            }

            using (var stream = new MemoryStream(Convert.FromBase64String(base64Source)))
            {
                bitmap.BeginInit();
                bitmap.CacheOption = BitmapCacheOption.OnLoad;
                bitmap.StreamSource = stream;
                bitmap.EndInit();
            }

            if (DecodeFailed != null)
            {
                bitmap.DecodeFailed -= DecodeFailed;
            }

            bitmap.Freeze();
        }
    }

    public override event EventHandler<ExceptionEventArgs> DecodeFailed;

    public override bool IsDownloading
    {
        get { return false; }
    }

    public override PixelFormat Format
    {
        get { return bitmap != null ? bitmap.Format : base.Format; }
    }

    public override double DpiX
    {
        get { return bitmap != null ? bitmap.DpiX : base.DpiX; }
    }

    public override double DpiY
    {
        get { return bitmap != null ? bitmap.DpiY : base.DpiY; }
    }

    public override double Width
    {
        get { return bitmap != null ? bitmap.Width : base.Width; }
    }

    public override double Height
    {
        get { return bitmap != null ? bitmap.Height : base.Height; }
    }

    public override int PixelWidth
    {
        get { return bitmap != null ? bitmap.PixelWidth : base.PixelWidth; }
    }

    public override int PixelHeight
    {
        get { return bitmap != null ? bitmap.PixelHeight : base.PixelHeight; }
    }

    public override ImageMetadata Metadata
    {
        get { return bitmap != null ? bitmap.Metadata : base.Metadata; }
    }

    public override void CopyPixels(Array pixels, int stride, int offset)
    {
        if (bitmap != null)
        {
            bitmap.CopyPixels(pixels, stride, offset);
        }
    }

    public override void CopyPixels(Int32Rect sourceRect, Array pixels, int stride, int offset)
    {
        if (bitmap != null)
        {
            bitmap.CopyPixels(sourceRect, pixels, stride, offset);
        }
    }

    public override void CopyPixels(Int32Rect sourceRect, IntPtr buffer, int bufferSize, int stride)
    {
        if (bitmap != null)
        {
            bitmap.CopyPixels(sourceRect, buffer, bufferSize, stride);
        }
    }

    protected override Freezable CreateInstanceCore()
    {
        var instance = new Base64BitmapImage();
        instance.bitmap = bitmap;
        instance.base64Source = base64Source;
        return instance;
    }
} 
```

它可以这样使用：

```
<Image>
    <Image.Source>
        <local:Base64BitmapImage Base64Source="..."/>
    </Image.Source>
</Image> 
```

# sql - Oracle SQL Developer - 如何删除生成的 DDL 中的双引号

> ID：16086698
> 
> 赞同：3
> 
> 时间：2013-04-18T15:12:06.847
> 
> 标签：sql, oracle, oracle-sqldeveloper, ddl

我正在使用 Oracle SQL Developer 3.0。当我在 DEPT 模式下编写 BONUSES 表时，作为示例，它会生成这个 DDL。

```
CREATE TABLE "DEPT"."BONUSES" 
(   "NEW_EMPLOYEE_ID" NUMBER, 
    "BONUS" NUMBER DEFAULT 100
) ; 
```

我不希望包含双引号。我查看了“工具”->“首选项”，但找不到“关闭”时要关闭的设置。是否可以压制引号，有谁知道该怎么做？

谢谢你，悉尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:26:22.473

尝试这个：

1.  右键单击您的表格并选择“编辑”

2.  点击“DDL”

3.  选择“创建”

这与在右侧面板上选择“SQL”标签不同，您不会添加双引号或模式名称。

我正在使用 SQL Developer 3.2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:47:41.403

胜利者，

你的指示效果很好。

为了您阅读的乐趣，我找到了这个链接：

[https://kr.forums.oracle.com/forums/thread.jspa?messageID=10628798](https://kr.forums.oracle.com/forums/thread.jspa?messageID=10628798)

这听起来不像是 Oracle 开发人员将此问题发布给他们自己的人以征求意见/评论吗？:) 他们应该提供一个设置来关闭或打开它。

谢谢

# c# - 如何在 Telerik Grid (MVC, Razor) 上设置最大行数

> ID：16086699
> 
> 赞同：0
> 
> 时间：2013-04-18T15:12:07.000
> 
> 标签：c#, asp.net-mvc, razor, telerik

有没有办法在 Telerik Grid 上设置最大行数？

例如，我只想让客户介绍最多 15 行或最少 1 行，或者抛出一个错误，即最大为“x”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:19:17.400

我发现了如何解决这个问题。

```
.ClientEvents(x => {
    x.OnEdit("CheckRows");
    x.OnDelete("CheckRows"); })

<script>
 function CheckRows(e) {   
        var grid = $('#Grid').data('tGrid');
        var button = $("#Grid .t-grid-toolbar .t-grid-add");
        if (grid.insertedDataItems().length - grid.deletedDataItems().length > 15) 
        {
            button.hide();
        }
        else
        {
            button.show();
        }
      }
</script> 
```

# powershell - 在powershell脚本中将路径作为变量传递

> ID：16086702
> 
> 赞同：0
> 
> 时间：2013-04-18T15:12:10.600
> 
> 标签：powershell

我想在我的 powershell 脚本中将路径作为变量（读取主机）传递。它不工作给出错误

找不到路径，因为它不存在

我的代码

```
$a=read-host
$b=read-host
Copy-item $a $b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:15:22.467

我们很难真正找出问题所在，因为我们不知道您输入的确切内容。将下面的代码放入脚本中以查看路径是否有效：

```
$a = Read-Host
$b = Read-Host
'Copying from {0} to {1}' -f $a, $b
Copy-Item $a $b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:20:22.233

如果路径存在，则使用 Test-Path 它返回一个布尔值

```
if(Test-Path $a){
     Copy-Item $a $b
} 
```

# ubuntu - 在 Ubuntu 上构建 NumPy 1.7.1

> ID：16086706
> 
> 赞同：5
> 
> 时间：2013-04-18T15:12:17.947
> 
> 标签：ubuntu, build, numpy

我是 Ubuntu 和 Python 的新手，所以请多多包涵。我需要**NumPy 1.7.1**中包含的一些功能。然而，我的 Ubuntu 12.04 LTE 附带**NumPy 1.6.x**，而*sudo apt-get update*并没有让它变得更高。

所以我去了 sourceforge 并按照 userguide.pdf 中给出的说明**进行**[操作](http://sourceforge.net/projects/numpy/files/NumPy/1.7.0/)。我已经弥补：

 **> python setup.py build --fcompiler=gnu95

，即我已经（从看起来成功）构建了 NumPy 1.7.1。问题是：我现在该怎么办？我应该将一些目录移动到某个地方，如果是的话，在哪里？*userguide.pdf*就停在这里，没有提供更多信息。

这是第一次，我曾经尝试过，所以请善待;-)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:05:47.340

当我从源代码安装一些 python 包时，我通常会这样做

```
python setup.py build [options]
python setup.py install --user 
```

最后一步将包安装在 ~/.local/lib/pythonX.X/site-packages/ 中。这个目录在系统目录之前被扫描（所以使用这个版本）。此外，您不需要 sudo 也不会冒险弄乱 apt 安装的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T03:52:42.643

如果您需要将 NumPy 升级到较新的版本（具体不是 1.7.1），您可以使用`pip`：

```
sudo apt-get install python-pip
sudo pip install numpy --upgrade 
```

它将在 Ubuntu 12.04 上安装 NumPy 1.8.1：

```
import numpy
numpy.version.version
>>> '1.8.1' 
```**

# scala - 尾递归失败（可能是因为隐式 cons 转换）

> ID：16086707
> 
> 赞同：1
> 
> 时间：2013-04-18T15:12:21.067
> 
> 标签：scala, implicit-conversion, tail-recursion

我有一个我认为是相当简单的尾递归函数。但是，`@tailrec`告诉我不然。

```
 @tailrec
  def _next(continue : String, current : List[Long], first : Boolean ) : Stream[Long]  = {
    current match {
      case head :: tail => head #:: _next(continue, tail, false) //this line breaks tailrec
      case Nil if first => empty
      case _ => {
        val (nc, nl) = getIds(continue)
        _next(nc, nl, true)
      }
    }
  } 
```

这向我展示了

```
[error] could not optimize @tailrec annotated method _next: it contains a recursive call not in tail position
[error]  case head :: tail => head #:: _next(continue, tail, false)
[error]                                     ^ 
```

它可能与我从 eclipse: 收到的隐式通知有关`- Implicit conversions found: _next(continue, tail, false) => consWrapper(_next(continue, tail, false))`，但不幸的是，这并不能帮助我解决问题。

我该如何解决这个问题，并且，对于布朗尼点，我认为这会尾递归在哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:16:20.167

问题是代码中的最后一个操作不是调用`_next`，而是`Stream`cons 操作`#::`。

一种解决方案是使用 a`StreamBuilder`来构建您的流并将其保留`StreamBuilder`为累加器变量。

```
 @tailrec
  def _next(continue : String, current : List[Long], first : Boolean, acc: Stream.StreamBuilder[Long]) : Stream[Long]  = {
    current match {
      case head :: tail =>
        acc += head
        _next(continue, tail, false, acc)
      case Nil if first => acc.result
      case _ => {
        val (nc, nl) = getIds(continue)
        _next(nc, nl, true, acc)
      }
    }
  } 
```

这不是特别有效 -如果您使用而不是`StreamBuilder`向其中添加整个集合，则更合适。出于这个原因，请考虑将您的代码更改为以下内容：`++=``+=`

```
 @tailrec
  def _next(continue : String, current : List[Long], first : Boolean, acc: Stream.StreamBuilder[Long]) : Stream[Long]  = {
    current match {
      case Nil =>
        acc.result
      case list =>
        acc += list
        val (nc, nl) = getIds(continue)
        _next(nc, nl, true, acc)
    }
  } 
```

# c# - C# 泛型：简化类型签名

> ID：16086708
> 
> 赞同：16
> 
> 时间：2013-04-18T15:12:22.523
> 
> 标签：c#, generics

如果我有一个看起来像这样的通用 Item 类：

```
abstract class Item<T>
{
} 
```

还有一个看起来像这样的项目容器：

```
class Container<TItem, T>
    where TItem : Item<T>
{
} 
```

由于 TItem 依赖于 T，是否可以简化 Container 的类型签名，使其只接受一个类型参数？我真正想要的是这样的：

```
class Container<TItem>
    where TItem : Item   // this doesn't actually work, because Item takes a type parameter
{
} 
```

所以我可以按如下方式实例化它：

```
class StringItem : Item<string>
{
}

var good = new Container<StringItem>();
var bad = new Container<StringItem, string>(); 
```

当 TItem 是 StringItem 时，编译器应该能够推断出 T 是字符串，对吧？我该如何做到这一点？

所需用途：

```
class MyItem : Item<string>
{
}

Container<MyItem> container = GetContainer();
MyItem item = container.GetItem(0);
item.MyMethod(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:37:02.607

我认为这应该做你想要的。显然你现在`Container<string>`不这样做`Container<StringItem>`，但由于你没有包含使用示例，我看不出这是一个问题。

```
using System.Collections.Generic;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var myContainer = new Container<string>();

            myContainer.MyItems = new List<Item<string>>();
        }
    }

    public class Item<T> { }

    public class Container<T>
    {
        // Just some property on your container to show you can use Item<T>
        public List<Item<T>> MyItems { get; set; }
    }
} 
```

这个修订版怎么样：

```
using System.Collections.Generic;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var myContainer = new Container<StringItem>();

            myContainer.StronglyTypedItem = new StringItem();
        }
    }

    public class Item<T> { }

    public class StringItem : Item<string> { }

    // Probably a way to hide this, but can't figure it out now
    // (needs to be public because it's a base type)
    // Probably involves making a container (or 3rd class??)
    // wrap a private container, not inherit it
    public class PrivateContainer<TItem, T> where TItem : Item<T> { }

    // Public interface
    public class Container<T> : PrivateContainer<Item<T>, T>
    {
        // Just some property on your container to show you can use Item<T>
        public T StronglyTypedItem { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:59:14.407

我认为您的问题的一种可能的解决方案是添加接口`IItem`，代码结构将如下所示。

```
interface IItem { }

abstract class Item<T> : IItem { }

class Container<TItem> where TItem : IItem { }

class StringItem: Item<string> { } 
```

现在你可以拥有`Container<StringItem>`：

```
var container = new Container<StringItem>(); 
```

# android - Android IllegalStateException：调用 notifyDataSetChanged 时片段已激活

> ID：16086709
> 
> 赞同：0
> 
> 时间：2013-04-18T15:12:28.270
> 
> 标签：android, android-fragments

我是 Android 新手，在我对活动生命周期的理解中似乎仍然缺少一些东西。我有一个使用`FragmentActivity`. 自定义`ViewPager`管理选项卡的显示，在其中一个选项卡中，我想要一个简单的向下钻取，能够使用硬件“返回”按钮返回到上一个视图的级别。

`Fragment`我通过检查标志的值（确定我们在下钻中的位置）将适当的替换到选项卡中来实现此下钻：

```
public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

@Override
public Fragment getItem(int position) {
   Fragment fragment; 

   switch (position) {
   case 0 : 
     if (stateFlag == 0) fragment = (Fragment) new InitialFragment();
     else fragment = (Fragment) new FinalResultsFragment();
     break;
   case 1: 
     fragment = (Fragment) new SecondTabFragment();
     break;
    default:
     fragment = (Fragment) new ThirdTabFragment();
     break;
  }

  return fragment;
} 
```

要回到“以前的”片段，我这样做：

```
@Override
public void onBackPressed() {
    int p = mViewPager.getCurrentItem();

    switch (p) {
    case 0:
        if (stateFlag == 0)) {
            super.onBackPressed();
        } else {
            stateFlag = 0;
            mViewPager.getAdapter().notifyDataSetChanged();
            mViewPager.setCurrentItem(0);
        }
        break;
    default:
        super.onBackPressed();
        break;
    }
 } 
```

这工作正常，直到我尝试改变方向。`Fragment`s 成功地从该更改中返回，但是当我在该状态下尝试按“后退”按钮时，`FinalResultsFragment`我得到了

```
IllegalStateException: Fragment already active
E/AndroidRuntime(1094):     at android.support.v4.view.PagerAdapter.notifyDataSetChanged(PagerAdapter.java:276) 
```

为什么方向的变化会破坏代码的这个特定部分？

编辑：

因此，如果我打开应用程序，第一个选项卡处于活动状态，我按下一个按钮，在该选项卡中加载不同的片段，然后按下返回按钮 - 一切都很好，第一个片段已按预期加载。

但是如果我打开应用程序，第一个选项卡处于活动状态，我按下一个按钮，在该选项卡中加载不同的片段，旋转屏幕，片段重新加载就好了，然后按下返回按钮 - 崩溃！

编辑：

这是完整的错误日志： http: [//pastebin.com/ESDTstsm](http://pastebin.com/ESDTstsm)

# mdx - MDX 查询百分位数 25、50 和 75

> ID：16086711
> 
> 赞同：1
> 
> 时间：2013-04-18T15:12:29.240
> 
> 标签：mdx, percentile

我有一个问题，但我无法找到我正在寻找的答案（无论是在这个论坛中还是在其他论坛中）：

*   我需要计算第 25 个百分位数、中位数（第 50 个百分位数）和第 75 个百分位数。

换句话说：我需要在 SSRS 的 MDX 查询中写入它来告诉我哪些数据是第 25 位、中位数和第 75 位

到目前为止，我所能找到的并不是每个人的确切值

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T18:16:28.833

我一直在为自己的数据处理同样的问题。我遇到的麻烦是找出 Median() 函数。以下是我如何解释函数的参数：

微软的定义：MEDIAN(Set_Expression [, Numeric_Expression])

我的解释： Set_Expression 是一组值，用于定义在评估中位数之前将度量求和的粒度

Numeric_Expression 是求和的度量，然后对这组总和进行排序和评估以找到中位数

在我的情况下，要找到整个数据集的直线中位数，我根本不想对这些值求和。为了防止计算任何总和，我将 key 属性用于具有 1-1 基数的维度与包含我正在使用的度量的事实表中的记录。到目前为止，我看到的唯一缺陷是，有时当记录数为偶数时，中位数会返回一个整数，而两个中间记录的平均值应该会导致一个以 0.5 结尾的数字。例如，中间两条记录的值为 16 和 17，函数返回 17 而不是 16.5。由于这是一个小缺陷，我现在愿意忽略它。

这是我使用中值函数的计算结果：

```
WITH MEMBER Measures.[Set Median] AS MEDIAN(
    [Dimension].[Key Attribute].MEMBERS
    ,Measures.[Non-summable Measure]
) 
```

我使用了 Median 和 TopCount 的组合来获得第 75 个百分位数。我使用 TopCount 将中位数的集合限制为数据的后半部分，因为 TopCount 按降序对数据进行排序。我将解释我是如何理解 TopCount 的：

微软的定义：TopCount(Set_Expression, Count [, Numeric_Expression])

我的解释： Set_Expression 是一组值，将从中返回所需数量的元组

Count 是从集合中返回的元组数

Numeric_Expression 是将用于按降序对集合进行排序的值

我希望 Median 函数使用查询中返回的事实表中的后半部分记录，因此我再次使用与事实表具有 1-1 基数的维度表的键，并将其排序为我想从中找到中值的度量。

这是我对成员进行编码的方式：

```
MEMBER Measures.[75th Percentile] AS MEDIAN(
    TOPCOUNT(
        [Dimension].[Key Attribute].MEMBERS
        ,Measures.[Fact Table Record Count] / 2
        ,Measures.[Non-summable Measure]
    )
    ,Measures.[Non-summable Measure]
) 
```

到目前为止，这个函数组合从我的数据集中返回了真正的第 75 个百分位数。为了获得第 25 个百分位数，我尝试用 BOTTOMCOUNT 替换代码中的 TOPCOUNT，这应该做同样的事情，只是按升序对数据进行排序，以使用前半部分记录而不是后半部分。不幸的是，我无法从这个函数组合中得到除了 NULL 之外的任何东西，所以我愿意接受关于如何获得第 25 个百分位数的建议。

这是我的最终查询的样子：

```
SELECT
    {
        Measures.[Set Median]
        ,Measures.[25th Percentile]
        ,Measures.[75th Percentile]
    } ON 0
    ,[Dimensional row members here] ON 1
FROM [Cube]
WHERE
    [Non-axis dimensional filter members here] 
```

# c# - VB.NET 执行顺序

> ID：16086713
> 
> 赞同：4
> 
> 时间：2013-04-18T15:12:35.447
> 
> 标签：c#, .net, vb.net, return

我目前正在将一些 VB 源代码转换为 C#。虽然我知道有转换器可以自动执行此操作，并且我实际上可以使用这个特定的 dll 而无需重写它，但我只是部分地这样做，以便更好地理解 VB。与其期望写它，但它至少帮助我能够阅读它。

不过，在这样做时，我遇到了一些非常令人困惑的事情。以下代码片段是示例，但我在整个程序中都看到了它。

**VB源代码：**

```
Friend Function AllocateObjectNumber() As Long
    AllocateObjectNumber = _nextFreeObjectNumber
    _nextFreeObjectNumber += 1
    _objectAllocatedCount += 1
End Function 
```

**我翻译的 C# 代码：**

```
 internal long AllocateObjectNumber()
    {
        cvNextFreeObjectNumber += 1;
        cvObjectAllocatedCount += 1;
        return cvNextFreeObjectNumber;
    } 
```

我不明白的是 VB 使用的流控制。我知道`AllocateObjectNumber += 1`使用它代替`return cvNextFreeObjectNumber`，但是如果此行出现在两个变量的递增之前，那么该代码如何不被视为不可访问？根据我对C#的理解，这个方法的第一行会立即回到调用方法，整个方法基本上就是一个伪Property。

有什么有用的解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T15:15:36.633

VB 方法更类似于将值存储在临时变量中：

```
internal long AllocateObjectNumber()
{
    var nextNumber = _nextFreeObjectNumber
    cvNextFreeObjectNumber += 1;
    cvObjectAllocatedCount += 1;
    return nextNumber;
} 
```

在 VB 中，`function = value`语法不做`return`- 所以之后的代码可以继续运行。当该方法结束时，您使用的值将成为首先调用它的任何内容的“返回”值。

您可以`function = value`在同一方法中多次使用该语法，作为在不同条件下返回不同结果的一种方式，而无需我在示例中使用的临时变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T15:19:02.433

> 根据我对 C# 的理解，这个方法的第一行会立即返回调用方法

但它不是 C# 代码，而是 VB 代码。`AllocateObjectNumber = _nextFreeObjectNumber`不返回，它*只是*分配一个返回值。实际返回在方法的末尾。

大多数人实际上会编写与 C# 代码相同的 VB 代码，即`Return`显式使用。assign-to-method-name 样式是旧 VB 版本的残余，它是从函数返回值的*唯一*方法。在 VB.NET 中，您可以同时使用两者。

# sorting - 在 extJs 中对 treeStore 进行排序，弄乱了应用程序

> ID：16086715
> 
> 赞同：1
> 
> 时间：2013-04-18T15:12:46.557
> 
> 标签：sorting, extjs4, extjs4.1

我有一个treeStore（'planScreenStore'），我通过以下方式访问它：

```
 updateStore : function() {

                    rootNodeID = globals.GlobalModel.planList.scope._id;
                    var planScreenStoreRootNode = this.planScreenStore.getRootNode();

                    if (!(planScreenStoreRootNode === undefined)) {
                        planScreenStoreRootNode.removeAll();
                    }
                    if (globals.GlobalModel.planList.children.length > 0) {
                        planScreenStoreRootNode.appendChild(
                                globals.GlobalModel.planList.children);
                        globals.GlobalModel.planList.children = planScreenStoreRootNode;
                        globals.GlobalModel.planListForCreateNewPlan = planScreenStoreRootNode;
                    } 
```

我必须根据其字段“文本”对 treeStore 进行排序。我已经能够通过以下两种方式做到这一点：

```
 updateStore : function() {
                    debugger;
                    rootNodeID = globals.GlobalModel.planList.scope._id;
                    var planScreenStoreRootNode = this.planScreenStore.getRootNode();

                    if (!(planScreenStoreRootNode === undefined)) {
                        planScreenStoreRootNode.removeAll();
                    }
                    if (globals.GlobalModel.planList.children.length > 0) {
                        planScreenStoreRootNode.appendChild(
                                globals.GlobalModel.planList.children);
                        globals.GlobalModel.planList.children = planScreenStoreRootNode;
                        globals.GlobalModel.planListForCreateNewPlan = planScreenStoreRootNode;
                    }
                        this.planScreenStore.sort('text','ASC'); 
```

另一个：

```
 updateStore : function() {
                    debugger;
                    rootNodeID = globals.GlobalModel.planList.scope._id;
                    var planScreenStoreRootNode = this.planScreenStore.getRootNode();

                    if (!(planScreenStoreRootNode === undefined)) {
                        planScreenStoreRootNode.removeAll();
                    }
                    if (globals.GlobalModel.planList.children.length > 0) {
                        planScreenStoreRootNode.appendChild(
                                globals.GlobalModel.planList.children);
                        globals.GlobalModel.planList.children = planScreenStoreRootNode;
                        globals.GlobalModel.planListForCreateNewPlan = planScreenStoreRootNode;
                    }

                    planScreenStoreRootNode.sort(function(n1, n2) {
                        debugger ;
                        var v1 = n1.data['text'].toUpperCase();
                        var v2 = n2.data['text'].toUpperCase();

                        if (v1 < v2)
                            return -1;
                        else if (v1 > v2)
                            return 1;
                        return 0;
                    }); 
```

我用这两种方法都得到了想要的结果，但不知何故，在这两种情况下，我的应用程序在执行排序后崩溃，而它在没有应用任何排序的情况下完全正常工作。是否与我访问 NodeInterface (planScreenRootNode) 的方式有关。我该如何解决这个问题？

# ios - 购买完整版时更改应用名称

> ID：16086718
> 
> 赞同：0
> 
> 时间：2013-04-18T15:12:54.980
> 
> 标签：ios, in-app-purchase

我有一个实施了 IAP 的 2 版本应用程序。我的问题是：有没有办法在没有 lite 的情况下将应用程序名称（xxxx lite）更改为（xxxx）？

当然，这应该是一个代码的东西，而不是更改 info.plist 上的名称，因为这只有在我购买应用程序时才会解决。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:18:58.113

通过代码，无法更改出现在图标下方的名称。当然，如果您的应用名称显示在正在运行的应用中的任何位置，您可以根据需要更改该名称。

# python - 根据标签 id 解析 XML 以匹配评论和文本

> ID：16086719
> 
> 赞同：0
> 
> 时间：2013-04-18T15:13:00.927
> 
> 标签：python, dictionary, python-2.7, xml-parsing, beautifulsoup

（更新）：添加代码以根据它们的 id 匹配值。问题：为什么两个字典中的匹配 id u'1' 和 'u'0' 都无法识别？

（代码目标）：我正在编写一个脚本，该脚本从 .docx 文件中获取注释文本，并通过 xml 标签 ID 将其与注释匹配。我设法提取了评论标签、文本和 ID。我现在需要匹配这些。我的策略是创建两个字典：1）一个以 id 作为键，将注释文本作为值，2）第二个以 id 作为键，将注释作为值。

然后我计划遍历这两个字典，如果它们的键（即 id）匹配，我想制作匹配的注释文本/注释对的元组。我在创建字典时遇到问题，并且收到错误消息，指出我创建字典的语法无效。我不太明白为什么。有任何想法吗？

```
from bs4 import BeautifulSoup as Soup
f = open('transcript.xml','r')
soup = Soup(f)
#print soup.prettify()

textdict = {}
for i in soup.find_all('w:commentrangestart'):

       # variable 'key' is assigned to the tag id
    key = i.parent.contents[1].attrs['w:id']

       #variable 'value' is assigned to the tag's text
    value= ''.join(i.nextSibling.findAll(text=True)

       # key / value pairs are added to the dictionary 'text_d'
    textdict[key]=value

print textdict

commentdict = {}
for i in soup.find_all('w:comment'):
    key = i.attrs['w:id']
    value= ''.join(i.findAll(text=True)
    commentdict[key]=value
print commentdict

## OUTPUT {u'1': u'contradictory about news', u'0': u'something about news'}
##        {u'1': u'News; comment; negative', u'0': u'News; comment'}

## Added Code
for key in set(textdict) & set (commentdict):
    if textdict[key] == commentdict[key]:
        print 'yay' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:15:15.330

你有一个语法错误，因为你没有关闭括号：

```
value= ''.join(i.nextSibling.findAll(text=True)
                                # -------------^ missing ) 
```

您还错过了另外几行：

```
value= ''.join(i.findAll(text=True)
                    # -------------^ missing ) 
```

# c# - DataAdapter 无命令填充

> ID：16086727
> 
> 赞同：0
> 
> 时间：2013-04-18T15:13:32.827
> 
> 标签：c#, sql, dataset, dataadapter

我试图在不使用命令的情况下填充我的数据适配器。我有一个手动填充的数据集，但是当我尝试使用我的 dataAdapter 附加此数据集时，我开始出现“在调用 'Fill' 之前尚未初始化 Select 命令属性”。这是我的代码有人对此有想法吗？

谢谢

```
OleDbDataAdapter ad1=new OleDbDataAdapter(cmd);
OleDbDataAdapter ad2=new OleDbDataAdapter(cmd2);
OleDbDataAdapter ad3 = new OleDbDataAdapter();

DataSet ds = new DataSet();
DataTable db1=new DataTable();
DataTable db2=new DataTable();
DataTable db3 = new DataTable();
ds.Tables.Add();

ad1.Fill(db1);
ad2.Fill(db2);
int i;
foreach (DataRow r in db2.Rows)
{
    i = 0;
    foreach (DataRow rc in db1.Rows)
    {
        if (r[0].ToString() == rc[0].ToString())
        {
            i = 1;
        }
    }
    if (i == 0) { ds.Tables[0].ImportRow(r); }

}
ad3.Fill(ds); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:01:07.840

我不完全确定您要在这里完成什么，从您的描述中不清楚。您已经在 DataSet 中放置了数据：

```
 ds.Tables[0].ImportRow(r); 
```

此外，任何类型的数据适配器都必须至少有一个关联的 SELECT 命令才能填充数据表或数据集。

你能更清楚地描述你的目标吗？您是否尝试将表添加到数据集中？从一些外部来源填充它？查看您导入的行？

# sql - 如何优化此 SQL 查询？

> ID：16086732
> 
> 赞同：1
> 
> 时间：2013-04-18T15:13:51.467
> 
> 标签：sql, oracle, query-optimization

我在 Oracle 上下文中有 3 个表，我们称它们`t1, t2, t3`为具有以下结构：

*   `t1 : t1_ID, t1_name, ...`
*   `t2 : t1_ID, t3_name, ...`
*   `t3 : t3_name, randomCol1, randomCol2, randomCol3, ...`

我想要的是一个给我这样的结果的查询：

> t0_name | 随机数

所以我做了这个查询：

```
 SELECT t1.t1_name, t3.randomCol1 AS randomCol
      FROM t1
      JOIN t2 ON t1.t1_ID=t2.t1_ID
      JOIN t3 ON t2.t3_name=t3.t3_name
      WHERE t3.randomCol1 LIKE '_%'
    UNION
      SELECT t1.t1_name, t3.randomCol2 AS randomCol
      FROM t1
      JOIN t2 ON t1.t1_ID=t2.t1_ID
      JOIN t3 ON t2.t3_name=t3.t3_name
      WHERE t3.randomCol2 LIKE '_%'
    UNION
      SELECT t1.t1_name, t3.randomCol3 AS randomCol
      FROM t1
      JOIN t2 ON t1.t1_ID=t2.t1_ID
      JOIN t3 ON t2.t3_name=t3.t3_name
      WHERE t3.randomCol3 LIKE '_%' 
```

因为我希望 randomCols 的所有值都以单列开头，`_`并与链接到它们的 t1_name 配对。为了提供更多的信息，randomCol1 和 randomCol2 几乎相同（它们都不是同时为 null 并且具有几乎相同的值），而 randomCol3 通常为 null。

* * *

我知道这在性能方面很糟糕，所以我试图改进它。

因此，我在网上搜索了各种优化此解决方案的方法（例如使用 UNION ALL 之类的东西），但没有给我想要的确切结果。

所以我的问题如下： **您知道如何优化此查询吗？**

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:37:34.467

当您执行`union`or`union all`时，Oracle 可能会多次执行子查询。`unpivot`您可以使用或使用 a来解决此问题，`cross join`如下所示：

```
SELECT t1.t1_name,
       (case when n.n = 1 then t3.randomCol1
             when n.n = 2 then t3.randomCol2
             when n.n = 3 then t3.randomCol3
        end) AS randomCol
FROM t1 JOIN
     t2
     ON t1.t1_ID=t2.t1_ID JOIN
     t3
     ON t2.t3_name=t3.t3_name cross join
     (select 1 as n from dual union all select 2 from dual union all select 3) n
where n.n = 1 and LEFT(t3.randomCol1, 1) = '_' or
      n.n = 2 and LEFT(t3.randomCol2, 1) = '_' or
      n.n = 3 and LEFT(t3.randomCol3, 1) = '_' 
```

我将 替换为`like`因为`left`是`'_'`的通配符`like`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:42:44.137

一种可能的变体：

```
 select * from
  (SELECT t1.t1_name, 
          case l.l
              when 1 then t3.randomCol1 
              when 2 then t3.randomCol2 
              when 3 then t3.randomCol3
          end AS randomCol
   FROM (select level l from dual connect by level <= 3) l
   CROSS JOIN t1
   JOIN t2 ON t1.t1_ID=t2.t1_ID
   JOIN t3 ON t2.t3_name=t3.t3_name
   WHERE '_' in (substr(t3.randomCol1,1,1),
                 substr(t3.randomCol2,1,1),
                 substr(t3.randomCol3,1,1))
  ) where randomCol like '_%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:32:50.523

在 SQL Server 中，它类似于

```
SELECT t0_name, randomCol
FROM (SELECT t0_name, randomCol1, randomCol2, etc)
      FROM t0
      JOIN t01 ON t0.t0_ID=t1.t0_ID
      JOIN t1 ON t01.t1_name=t1.t1_name) p
UNPIVOT (randomCol FOR items in (randomCol1, randomCol2, etc)) unpvt
WHERE randomCol like '_%' 
```

我认为在 Oracle 中也是一样的：参见[这篇文章](http://www.oracle-base.com/articles/11g/pivot-and-unpivot-operators-11gr1.php)

# c# - c#如何在不停止主线程的情况下在2个函数调用之间暂停

> ID：16086734
> 
> 赞同：3
> 
> 时间：2013-04-18T15:13:57.070
> 
> 标签：c#, multithreading

c#如何在不停止主线程的情况下在2个函数调用之间暂停

```
Foo();
Foo(); // i want this to run after 2 min without stopping main thread

Function Foo()
{
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:33:10.077

```
 Task.Factory.StartNew(Foo)
                .ContinueWith(t => Task.Delay(TimeSpan.FromMinutes(2)))
                .ContinueWith(t => Foo()); 
```

**请不要睡在线程池上。绝不**

“线程池中只有有限数量的线程；线程池旨在高效执行大量短任务。它们依靠每个任务快速完成，使线程可以返回池中并用于下一个任务。” 更多[在这里](https://stackoverflow.com/questions/6305814/sleeping-in-a-pooled-c-sharp-thread)

**为什么`Delay`？它在`DelayPromise`内部与 a 一起使用`Timer`**，效率更高，效率更高

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:16:44.563

尝试：

```
Task.Factory.StartNew(() => { foo(); })
    .ContinueWith(t => Thread.Sleep(2 * 60 * 1000))
    .ContinueWith(t => { Foo() }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:16:22.277

如何使用`Timer`：

```
var timer = new Timer();
timer.Interval = 120000;
timer.Tick += (s, e) =>
{
    Foo();
    timer.Stop();
}
timer.Start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:16:42.573

尝试生成一个新线程，如下所示：

```
new Thread(() => 
    {
         Foo();
         Thread.Sleep(2 * 60 * 1000);
         Foo();
    }).Start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T15:27:30.933

```
var testtask = Task.Factory.StartNew(async () =>
    {
        Foo();
        await Task.Delay(new TimeSpan(0,0,20));
        Foo();
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T15:20:57.493

您可以使用[Timer Class](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)。

```
using System;
using System.Timers;

public class Timer1
{
    private static System.Timers.Timer aTimer;

    public void Foo()
    {
    }

    public static void Main()
    {
        Foo();

        // Create a timer with a two minutes interval.
        aTimer = new System.Timers.Timer(120000);

        // Hook up the Elapsed event for the timer.
        aTimer.Elapsed += new ElapsedEventHandler(Foo());

        aTimer.Enabled = true;
    }

    // Specify what you want to happen when the Elapsed event is  
    // raised. 
    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        Foo();
    }
} 
```

该代码尚未经过测试。

# ruby-on-rails - 在 Controller#show 中显示不同的部分

> ID：16086743
> 
> 赞同：0
> 
> 时间：2013-04-18T15:14:23.417
> 
> 标签：ruby-on-rails

我有 3 个不同的部分，每个代表此过程的不同步骤：`"_overview.slim"`、`"_setup.slim"`和`"_submit.slim"`. 我想`"show.slim"`一次只显示这 3 个不同的部分，并且在用户单击“转到下一步”时一个接一个地显示。我如何在`show`控制器的操作中完成此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:29:38.020

假设在你的节目中，有一个“下一个”按钮来触发下一个部分。

在“下一步”按钮中，我可以在单击时传递一个 param[:page1] 和所有必要的参数。在'Show'中，如果有param[:page1]，则显示_partial1.html.erb

一切都一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:24:50.400

因此，如果我是你，我会将所有三个部分都渲染到你的显示视图中，并使用 Javascript 和 CSS 来管理每个部分的显示时间。如果将这些部分中的每一个都放在一个 div 中，那么它很容易使用 JQuery 的隐藏和显示方法，链接到“转到下一步”按钮的单击事件。要做到这一点，您根本不必触摸您的控制器。

# javascript - 将多维数组的特定值加在一起Javascript

> ID：16086744
> 
> 赞同：0
> 
> 时间：2013-04-18T15:14:23.927
> 
> 标签：javascript, arrays, add, multidimensional-array

好的，所以我有一个多维数组，它本身包含 9 个数组。这些嵌套数组中的每一个都包含 10 个数值。为了简单起见，假设一切看起来像这样：

```
var MyArray = [
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10]
] 
```

我正在尝试编写一个函数，该函数将获取每个嵌套数组的第一个索引（在本例中为全 1）并将它们加在一起，将此值推送到数组或对象。然后，我需要这个函数继续，添加下一个索引的所有值，下一个，依此类推。最后，我应该有一个包含 10 个值的数组（或者一个对象也可以在这里工作）。值将是：

```
1+1+1+1+1+1+1+1+1,
2+2+2+2+2+2+2+2+2,
3+3+3+3+3+3+3+3+3... 
```

...依此类推，这样新数组的实际值将是：

```
[9, 18, 27, 36, 45, 54, 63, 72, 81] 
```

这里的问题是我需要通过灵活/动态来实现，这样它就可以在 MyArray 只有 6 个数组的情况下工作，或者嵌套数组每个只有 4 个值。它应该适用于任意数量的嵌套数组，每个数组都有自己的值数量（尽管每个嵌套数组将包含彼此相同数量的值！）。

通过 JavaScript 和/或 jQuery 完成此任务的最佳方法是什么？请注意，我也可以以这种方式将值输出到对象：

```
{1:9, 2:18, 3:27, 4:36, 5:45, 6:54, 7:63, 8:72, 9:81} 
```

我尝试从另一个 StackOverflow 线程使用与此类似的代码来获取一个对象，但它正在返回

```
{1:NaN, 2:NaN, 3:NaN, etc.} 
```

该线程可以在这里找到：

[Javascript多维数组：添加值](https://stackoverflow.com/questions/10487970/javascript-multidimensional-array-add-values)

我正在使用 Otto 提供的“下划线”方法和 jQuery $.each 部分。

任何人都可以在这里提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:34:49.410

像这样的东西

```
 var myData = [
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
     [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 ];

 var summed = [];

 myData[0].forEach(function (arr, index) {
     var sum = myData.reduce(function (a, b) {
         return a + b[index];
     }, 0);

     summed.push(sum);
 });

 console.log(summed); 
```

在[jsfiddle 上](http://jsfiddle.net/Xotic750/KqzVD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:24:06.447

一个简单的数组解决方案如下：

```
var results= [];

for (var i=0;i<MyArray.length;i++) {
    for(var j=0; j<MyArray[i].length; j++) {
        if(results[j] == undefined) { results[j] = 0; }
          results[j] = results[j]+data[i][j];

    }
} 
```

注意这一`if(results[j]==undefined)`行——这可能是你没有做的。如果你忽略它，你会得到`NaN`所有的行，因为你正在向一个数字添加一个未定义的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:49:05.023

这是另一个解决方案：

```
var MyArray = [
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10],
[1,2,3,4,5,6,7,8,9,10]
]

var results= [];

MyArray.map(function(a){
    for(var i=0;i<a.length;i++){
        if(results.length === a.length){
            results[i] = results[i] + a[i];
        }else{
            results.push(a[i]);
        }
    }
}); 
```

[http://jsfiddle.net/uMPAA/](http://jsfiddle.net/uMPAA/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-13T05:50:52.243

另一种对多维数组中的列求和的方法（基于[Lodash 4](https://lodash.com/docs/4.17.11#unzip)）。

```
var arrays = [
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
];

function sum_col(arrays) {
  return _.map(_.unzip(arrays), _.sum);
}

console.log(sum_col(arrays));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"></script>
```

# xslt - 在 CDATA 文本中解析 HTML

> ID：16086755
> 
> 赞同：2
> 
> 时间：2013-04-18T15:14:55.613
> 
> 标签：xslt, xslt-1.0

CDATA 中的数据将被解析为 Html。

```
<?xml version="1.0" encoding="utf-8" ?>
<test>
  <test1>
    <![CDATA[ &lt;B&gt; Test Data1 &lt;/B&gt; ]]>
  </test1>

  <test2>
    <![CDATA[ &lt;B&gt; Test Data2 &lt;/B&gt; ]]>
  </test2>

  <test3>
    <![CDATA[ &lt;B&gt; Test Data3 &lt;/B&gt; ]]>
  </test3>
 </test> 
```

从上面的输入 xml 我需要将输出解析为 html。

但我得到的输出为

```
<B>Test Data1</B>
<B>Test Data2</B>
<B>Test Data3</B> 
```

但实际输出我需要文本以粗体显示。

```
**Test Data1
Test Data2
Test Data3** 
```

输入来自外部系统。我们无法更改 CDATA 中的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:52:44.303

解析为 HTML 只能使用扩展函数（或使用 XSLT 2.0 和用 XSLT 2.0 编写的 HTML 解析器），但如果您想创建 HTML 输出并将`testX`元素的内容输出为 HTML，那么您可以使用例如

```
<xsl:template match="test/*[starts-with(local-name(), 'test')]">
  <xsl:value-of select="." disable-output-escaping="yes"/>
</xsl:template> 
```

但是请注意，这`disable-output-escaping`是一个可选的序列化功能，并非所有用例中的所有 XSLT 处理器都支持。例如，Mozilla 浏览器中的客户端 XSLT 不受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:38:09.340

如果您必须继续使用 XSLT 1.0，则必须运行两次转换过程。

1.  第一个复制您的 xml 但通过使用 disable-output-escaping="yes" 生成内容来删除 CDTA （参见@Martin Honnen 的回答）

2.  在第二个路径中，您可以访问 html 部分。

但这只有在 html 部分遵循格式良好的 xml (xhtml) 的角色时才有可能。如果不是 xsltproc 中的输入开关可能有助于使用 html，例如：

```
 --html: the input document is(are) an HTML file(s) 
```

另请参阅：[转换内容在 CDATA 内的 xml 元素](https://stackoverflow.com/a/2068986/2115381)

# mongodb - ObjectIds 上的 MongoDb ensureIndex

> ID：16086757
> 
> 赞同：0
> 
> 时间：2013-04-18T15:15:00.523
> 
> 标签：mongodb

在始终具有 ObjectId 值的字段上执行 ensureIndex 是否值得？

基本上我们有一个用户集合和“东西”集合。stuff 中的事物（单行）将始终与集合中的用户相关。因此，我们将该用户的 ObjectId 存储在该事物的一个字段中。

```
{
   'thingTitle': 'Title',
   'owner': ObjectId(fromUserCollection)
} 
```

大多数情况下，用户将始终拥有多个对象。是否值得在上面放置一个 ensureIndex ？此外，ensureIndex 与 ObjectIds 的行为如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:50:08.517

如果您正在查询该字段，例如。`db.thing_collection.find({user: userObjectId})`您将需要该字段的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:20:46.030

是的，确保事物集合上的索引将对您的应用程序的查找性能产生良好的影响:)

# sql - 使用 ADO 获取 Excel 的行号

> ID：16086758
> 
> 赞同：1
> 
> 时间：2013-04-18T15:15:09.767
> 
> 标签：sql, excel, vbscript, adodb, vba

我们正在尝试根据某些条件获取特定记录集的行号。考虑下表

```
Name    Id
abc     1
cde     2
efg     3 
```

现在，如何获取员工“cde”的行号或记录集号（根据下面的代码，我们需要得到结果为 2）。请对此有任何帮助。

```
Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H0001
strSource="C:\Test.xls"
strConnection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strSource          & ";Extended Properties=""Excel 8.0;HDR=Yes;"";"  
Set conn = CreateObject("ADODB.Connection")   
Set objRecordSet = CreateObject("ADODB.Recordset")
conn.Open strConnection 
objRecordset.Open "Select Name FROM [sheet1$] Where Id = 2", conn, adOpenStatic,     adLockOptimistic, adCmdText
msgbox objRecordset.GetString
conn.Close 
Set conn = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:09:45.890

最好的方法是在 Excel 文件中放置一个与行号具有相同数据的列。然后查询该列。这是一个万无一失的解决方案。

但是，如果由于某种原因你不能这样做，那么试试这个：

```
Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H1
Dim RowNumber 
Dim SqlStmt 

strSource = "C:\Temp\Test.xls"
strConnection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strSource & ";Extended Properties=""Excel 8.0;HDR=Yes;"";"
Set conn = CreateObject("ADODB.Connection")
Set objRecordset = CreateObject("ADODB.Recordset")
conn.Open strConnection

SqlStmt = "Select Name, Id FROM [sheet1$]"      ''-- you can optimize this query if your Id is in ascending order. e.g. "Select Name, Id FROM [sheet1$] Where Id <= 4"
objRecordset.Open SqlStmt, conn, adOpenStatic, adLockOptimistic, adCmdText
objRecordset.Find "Id = 4"
RowNumber = objRecordset!ID + 1  ''-- +1 for Header row.
conn.Close
Set conn = Nothing

MsgBox RowNumber 
```

# ajax - 通过 Ajax 传递数组数组

> ID：16086759
> 
> 赞同：1
> 
> 时间：2013-04-18T15:15:12.667
> 
> 标签：ajax, arrays, multidimensional-array

我正在尝试通过 ajax 调用将数组数组传递给我的 php 脚本。

```
var myArray=$('input#thisIsAnArray').val();

var dataString='passedArray='+myArray;

$.ajax({
     type: "POST",
     dataType: "json",
     url: "includes/myPhp.php",
     data: dataString,
     success:function(){

               }

}); 
```

然后在我的 Php.php 中：

```
print_r($_POST['passedArray'][0][0]); 
```

我收到这个迟钝的信息：

```
 Fatal error: Cannot use string offset as an array 
```

这没有任何意义，因为我使用整数来访问数组而不是字符串。

JSON对象结构为：

```
0>
 0>
  admin_id: 1
  status: 1
  date: 1366300373
  outcome_id: 1
  rank: 1
 1>
  admin_id: 2
  status: 2
  date: 1366300373
  outcome_id: 5
  rank: 6 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:21:22.717

请记住，`dataType`in`jQuery.ajax()`只是来自 HTTP 调用的**预期响应。**所以你想要在这里做的是指定`contentType`.

更多信息[在这里](http://api.jquery.com/jQuery.ajax/)。

另外，我真的不知道 PHP 如何解析您发送的数据，因此请确保`=`此处有效。

编辑：请您向我解释一下这些数字`0>`是`1>`什么意思？因为据我所知[JSON](http://www.json.org/)看起来根本不是那样的。

JSON 中的数组就是这样写的：

```
[
    "first value": 1,
    "second value": "a string",
    "and so on": 500,
    "note that the last key does not need a comma",
    "and a key does not need to have a value assigned to it"
] 
```

数组数组是这样写的：

```
[
    ["key": "value in an array which itself is contained in an array"],
    ["second array here"],
    ["and last array, without comma"]
] 
```

# javascript - 隐藏表格中的元素

> ID：16086761
> 
> 赞同：0
> 
> 时间：2013-04-18T15:15:14.963
> 
> 标签：javascript, css

我在表格中有一个 HTML 表单。我希望隐藏一些元素，除非用户在文本字段中写“意大利”。该脚本可以很好地禁用我想隐藏的文本字段：

```
if (e.value == 'Italy' && e.name == 'birth'){
        document.getElementById('comune_nascita').disabled = false
        document.getElementById('provincia_nascita').disabled = false
    } else if (e.name == 'birth'){
        document.getElementById('comune_nascita').disabled = true
        document.getElementById('provincia_nascita').disabled = true        
    } 
```

现场示例：[JSFiddle](http://jsfiddle.net/xAKh4/)（尝试在“出生州”字段中写“意大利”）。

我只是不想禁用文本字段：我希望它完全不可见。

所以我添加`<tr id='italy_b' style='display:none'>`了包含文本字段的 HTML 元素，并像这样转换脚本：

```
if (e.value == 'Italy' && e.name == 'birth'){
    document.getElementById('italy_b').style.display = 'block'
} else if (e.name == 'birth'){
    document.getElementById('italy_b').style.display = 'none'
} 
```

但是，在此处尝试并查看错误：[jsfiddle](http://jsfiddle.net/xAKh4/1/)。当您在“出生州”字段中写入“意大利”时，会出现其他文本字段，**但它们完全不在表格中**！

我该如何解决这个问题？他们为什么要离开桌子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:24:50.513

很简单，您在`display: block`表格行上进行设置。默认情况下，表行不是阻塞的，它们是`display: table-row`. 改变这个，它会工作。

```
document.getElementById('italy_b').style.display = 'table-row'; 
```

jsFiddle：http: [//jsfiddle.net/xAKh4/7/](http://jsfiddle.net/xAKh4/7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T15:24:48.820

这不是`block`你应该放的，而是`table-row`：

```
if (e.value == 'Italy' && e.name == 'birth'){
    document.getElementById('italy_b').style.display = 'table-row'
} else if (e.name == 'birth'){
    document.getElementById('italy_b').style.display = 'none'
} 
```

看到这个小提琴：http: [//jsfiddle.net/xAKh4/5/](http://jsfiddle.net/xAKh4/5/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:25:08.053

当您想要显示行时，请尝试使用 CSS 显示属性“table-row”而不是“block”。

```
function hideItaly(e){

    if (e.value == 'Italy' && e.name == 'birth'){
        document.getElementById('italy_b').style.display = 'table-row'
    } else if (e.name == 'birth'){
        document.getElementById('italy_b').style.display = 'none'
    }

    if (e.value == 'Italy' && e.name == 'residency'){
        document.getElementById('italy_r').style.display = 'table-row'
    } else if (e.name == 'residency'){
        document.getElementById('italy_r').style.display = 'table-row'
    }

} 
```

[http://jsfiddle.net/xAKh4/2/](http://jsfiddle.net/xAKh4/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:24:35.840

您的问题与`display:block`. 这就是块的作用，它给出了新的一行。

所以试试这个： `style.display = '';`

（只需将其保留为空字符串而不是“块”）

# forms - 如何设计表单继承

> ID：16086763
> 
> 赞同：0
> 
> 时间：2013-04-18T15:15:15.923
> 
> 标签：forms

我需要为各种业务流程设计大约 20 个表单。我们必须为大约 10 个国家/地区执行此操作，并且需要某种形式的对象优先方法，因为每个国家/地区都有不同的业务规则和一些不同的数据位。但是，其中一些国家之间也有共同的数据。

例如，我们有 5 位数据，4 位是每个国家通用的，1 位是各个国家专用的。例如常见的姓名、地址、电话、男性/女性 例如奖金支付

这是一个问题，您如何在企业应用程序中轻松管理所有代码更改，而不会使代码过于笨拙？

不仅仅是语言，本质上是由列出标签名称的配置代码驱动的......而且每个表单的大部分设计都可能来自全球表单，然后来自本地表单，本地到本地具体国家。

是否有某种方法可以即时构建动态表单，以便您为每个国家/地区拥有 1 个表单 ProcessBonus，该表单从 MainForm 继承字段，然后在后台检查配置类以动态构建每个国家/地区的表单？

我试图避免有 10 种表格类型，然后为每个国家/地区提供另外 100 种本地表格，那将远远超过 1000 种表格并且无法管理，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:04:35.587

实际上你需要实现的是多重继承。.Net 技术、PHP、FLEX 等一些其他语言不支持多重继承。因此，*接口*被用作实现多重继承的技巧。

您可以在此链接中找到接口的实现。

[http://www.codersource.net/MicrosoftNet/CBasicsTutorials/CNetTutorialInterfaces.aspx](http://www.codersource.net/MicrosoftNet/CBasicsTutorials/CNetTutorialInterfaces.aspx)

# jquery - 使用 jQuery .each() 时，是否可以使用非匿名函数？

> ID：16086769
> 
> 赞同：8
> 
> 时间：2013-04-18T15:15:28.930
> 
> 标签：jquery, refactoring, each

我有这个代码块，我发现它特别长且难以理解：调用堆栈中充满了隐式函数和隐式添加的参数。换句话说，我想通过将 each 中调用的函数与 each 本身分开来澄清我的代码。

看那个例子：

```
$(xml).find('group').each(function () {
    var groupName = $(this).attr('name');
    // There is here around 100 lines of codes I would like to split in 
    // at least five functions, And I'm sure it is possible to use named functions
    // instead of implicit ones, no ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:16:56.623

尝试传递函数引用

**[现场演示](http://jsfiddle.net/rajaadil/rDrAJ/)**

```
$(xml).find('group').each(myfun);

function myfun(i, item)
{
    alert(item.id);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:21:27.183

你也可以这样做：

```
$(xml).find('group').each(function(){
    yourFunction();
}); 
```

# html - 无缝视频循环 HTML 5 Video.js

> ID：16086771
> 
> 赞同：1
> 
> 时间：2013-04-18T15:15:39.557
> 
> 标签：html, video, video.js

真的不知道如何让我的视频无缝循环。

目前，当它开始循环时会有轻微的停顿，我正在使用 video.js，这对我来说是全新的。

这是我在 DW 中的代码，

```
<video width="640" height="264" id="my_video_1" class="video-js vjs-default-skin" poster="1.png" preload="none" p controls loop  >
      <source src="1.mp4" type='video/mp4'>
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:18:16.423

使用“预加载”选项预加载视频。使用“循环”选项循环播放视频。

详细信息：[https ://github.com/zencoder/video-js/blob/master/docs/options.md](https://github.com/zencoder/video-js/blob/master/docs/options.md)

# .net - configurationElementCollection 的元素内的 nameValueCollection

> ID：16086773
> 
> 赞同：0
> 
> 时间：2013-04-18T15:15:42.370
> 
> 标签：.net, configuration, app-config

如何在 configurationElementCollection 的元素内使用 nameValueCollection？
像这样的东西：

```
 <connectionsSection>
    <vendors>
      <add name="nhonho" userName="name" password="password">
        <add key="someKey" value="someValue" />        
      </add>
    </vendors>
  </connectionsSection> 
```

我已经创建了配置元素“供应商”。

```
public class Connections : ConfigurationSection
{
    private static string SectionName = "connectionsSection";

    private static Connections _section;

    public static Connections Section
    {
        get
        {
            return _section ??
                (_section = (Connections)ConfigurationManager.GetSection(SectionName));
        }
    }

    [ConfigurationProperty("vendors")]
    public VendorCollection Vendors
    {
        get
        {
            return base["vendors"] as VendorCollection;
        }
    }
}

public class VendorCollection : ConfigurationElementCollection
{
    private IList<VendorElement> _vendors = new List<VendorElement>();

    public override ConfigurationElementCollectionType CollectionType
    {
        get
        {
            return ConfigurationElementCollectionType.AddRemoveClearMap;
        }
    }

    public VendorElement Get(string proName)
    {
        return BaseGet(proName) as VendorElement;
    }

    public void Add(VendorElement element)
    {
        BaseAdd(element);
    }

    public void Clear()
    {
        BaseClear();
    }
    public void Remove(VendorElement element)
    {
        BaseRemove(element.Name);
    }

    public void Remove(string name)
    {
        BaseRemove(name);
    }

    public void RemoveAt(int index)
    {
        BaseRemoveAt(index);
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new VendorElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((VendorElement)element).Name;
    }
}

public class VendorElement : ConfigurationElement
{
    [ConfigurationProperty("name")]
    public string Name { get { return base["name"] as String; } }

    [ConfigurationProperty("userName")]
    public string UserName { get { return base["userName"] as String; } }

    [ConfigurationProperty("password")]
    public string Password { get { return base["password"] as String; } }

    [ConfigurationProperty("", IsDefaultCollection= true)]
    public NameValueCollection Extensions
    {
        get { return base[""] as NameValueCollection; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:32:54.897

我错误地找到了一个解决我的问题的 bitbucket 项目的链接。

```
/// <summary>
/// Hold name value collection - allow duplication of name and values
/// sample :
/// <something>
///     <add name="name1" value="value1" />
///     <add name="name1" value="value1" />
/// </something>
/// </summary>
public class NameValueCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new NameValueElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        //to allow duplication of value
        return element.ElementInformation.LineNumber;
    }
}
/// <summary>
/// this is the value element
/// </summary>
public class NameValueElement : ConfigurationElement
{
    [ConfigurationProperty("name")]
    public string Name
    {
        get { return (String)this["name"]; }
        set { this["name"] = value; }
    }

    [ConfigurationProperty("value")]
    public string Value
    {
        get { return (String)this["value"]; }
        set { this["value"] = value; }
    }
} 
```

src：[https ://bitbucket.org/kkurni/custom-configuration-element/src/13997e83b899/NameValueCollection.cs](https://bitbucket.org/kkurni/custom-configuration-element/src/13997e83b899/NameValueCollection.cs)

# php - 获取有关 500 错误的表单数据

> ID：16086774
> 
> 赞同：9
> 
> 时间：2013-04-18T15:15:48.470
> 
> 标签：php, iis, internal-server-error

当我们的网站遇到内部服务器错误时，我正在尝试收集信息。我们有许多应用程序从未设置过正确的错误日志记录，当出现问题时，我们的客户不会向我们提供最好的信息来处理。我想做的是，当 500 发生时，我想收集有关问题发生位置的数据，例如：

*   用户所在的页面
*   与页面关联的任何数据（$_GET、$_POST 等）

我已经使用以下配置在我们的服务器（IIS 7）上设置了自定义错误页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpErrors errorMode="Custom">
            <remove statusCode="500" />
            <error statusCode="500" path="/error.php?code=500" responseMode="ExecuteURL" />
        </httpErrors>
    </system.webServer>
</configuration> 
```

在那个页面上，我只是 var_dump-ing $_POST 和 $_GET 以查看其中是否有任何内容进入错误页面，但它没有。我对 500 错误的目标是：

*   在出错时收集有关页面/用户的数据
*   向支持团队发送有关包含所收集数据的问题的电子邮件

有什么方法可以收集这些数据并让自定义错误页面看到它？

错误.php：

```
switch($ErrorCode){
    case '500':
         var_dump($_REQUEST, $_POST, $_GET);
         echo "internal server error";
         break;
} 
```

在所有情况下 $_POST 都是空的，即使我提交了一个表单来得到这个错误并且 $_GET 包含这个（这是有道理的）：

```
array(2) {
  ["code"]=>
  string(3) "500"
  ["500;http://icom-sbs/test_php"]=>
  string(0) ""
} 
```

**4/19 更新**

我尝试了一些想法，主要是将有用的数据存储在会话变量中。我试图将一些表单数据存储在给出错误的测试页面上的会话变量中，但它从未进入会话。似乎服务器检测到页面上将发生错误，因此它甚至从未执行页面上的任何代码并立即执行错误页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T07:12:28.937

我认为您需要在服务器级别而不是 php 级别记录详细信息，因为当发生 500 内部错误时，php 甚至可能不会初始化。如果您使用的是 apache，您可以查看

[http://httpd.apache.org/docs/1.3/mod/mod_log_config.html#logformat](http://httpd.apache.org/docs/1.3/mod/mod_log_config.html#logformat)

错误日志肯定会为您提供请求 url、远程地址和获取参数（查询字符串）。但我不确定发布数据。可能您可以对日志格式进行一些更改，以在某个级别转储整个标题和原始数据。

但我敢肯定，当服务器实际放弃并且 php 没有启动时，在 php 级别的日志记录会在某些时候跳过......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T22:40:43.817

如果您的服务器开始解释 php 文件并且在发生此 500 错误之后，这意味着您的代码中发生了一些致命错误。它可能是任何东西，从简单的错字到达到执行时间限制。

在 PHP 中捕获致命错误的最好也是唯一的方法是使用[register_shutdown_function](http://www.php.net/register_shutdown_function "register_shutdown_function")。您应该在工作文件之上定义它：

```
function handle_fatal() {
    $error = error_get_last(); // PHP 5.2+
    if($error !== NULL){
        $error_landing_page = '[FATAL] '.$error['message'].' in '.$error['file'].':'.$error['line'] . '<br/>GET:<br/>' . print_r($_GET, true) . '<br/>POST:<br/>' . print_r($_POST, true);
        // mail here if you need that and include $_GET, $_POST variables - this will be the last state before error occurred
        exit($error_landing_page);
    }
}

register_shutdown_function('handle_fatal'); 
```

简单的测试用例：

```
// put handling function at the very beginning
function handle_fatal() {/*...*/}
register_shutdown_function('handle_fatal');

// now do some logic
if($_GET['page'] == 'dupa'){
    $_POST['subpage'] = 1; // more and more logic
    $obj = new Dupa(); // class not found exception
} 
```

这就是我从示例中得到的 handle_fatal ：

```
[FATAL] Class 'Dupa' not found in /var/www/index.php:22
GET:
Array ( [page] => dupa )
POST:
Array ( [subpage] => 1 ) 
```

毕竟你应该知道捕捉这些错误[并不总是最好的主意](https://stackoverflow.com/a/277443/277937)，你应该小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:45:00.473

我相信您可以在 PHP 中设置自定义错误处理程序。困难的是，一些错误可能会导致 PHP 死掉并返回 500 而不会触发错误处理程序。好的一面是它应该很容易在站点范围内实现，而无需进行大量更改。

[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

您应该能够在 $_SERVER 全局中找到大部分相关信息。您还可以查看 debug_backtrace 函数，该函数将为您提供堆栈跟踪。

[http://php.net/manual/en/function.debug-backtrace.php](http://php.net/manual/en/function.debug-backtrace.php)

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:20:12.403

`$_SERVER`如果有任何感兴趣的东西，请检查阵列。

我进行了一些研究，如果您使用的是 ASP，您将能够在[Server.GetLastError](http://msdn.microsoft.com/en-us/library/ms524846%28v=vs.90%29.aspx)中获取错误详细信息，这使我相信 IIS 可能会通过`$_SERVER`数组传递信息。

# oracle - 需要我知道数据库和表名的列名

> ID：16086776
> 
> 赞同：0
> 
> 时间：2013-04-18T15:16:01.003
> 
> 标签：oracle, oracle11g

我知道数据库和表名，需要找到一个列名。如表中的示例`emp`；我知道数据 7369 和表名为`emp`，我需要将列名作为`empno`。我的表有数百列，搜索每个列名变得越来越困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:23:37.323

您别无选择，只能在每一列中进行搜索。请注意，尽管此值可能会出现在多个列中和/或在单个列中出现多次。没有办法限制它在整个表格中出现的频率。

这是数据库的重点；存储在列中的所有内容，最重要的是，该列具有*意义*。如果您将存储在列中的数据与含义分离，那么您将不得不搜索所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:15:37.270

两个步骤，不使用游标或复杂的pl/sql，只使用SQL Plus。

1.  生成您的搜索查询：

    选择选择'|| COLUMN_NAME || ',count(*) from emp where ' || 列名 || ' = 7369 按 '|| 分组 COLUMN_NAME || ';'
    从 cols where table_name = 'EMP';

例如：

```
--------------------------------------------------------------------------------------
select SECOND,count(*) from TESTER where SECOND = 7369 group by SECOND; 
```

（在我的环境中，Second 是表 TESTER 中的一列）

捕获输出，清理标题等，然后运行它。

它将返回匹配的每一列，以及匹配的行数。

# glassfish - 当远程 JMS 队列无法访问时，asadmin start-domain 失败

> ID：16086781
> 
> 赞同：0
> 
> 时间：2013-04-18T15:16:04.557
> 
> 标签：glassfish, jms, asadmin

我有 2 台服务器 A 和 B 在它们上面运行 glassfish 3.1.2.2 应用程序服务器。两者都使用 JMS 队列进行通信，到目前为止效果很好。如果网络连接因任何原因中断，我可以在服务器 B（配置为连接到 A 的远程队列的服务器）的日志中看到它尝试重新连接，并且实际上总是在 A 启动时成功这样做再次。

但问题是，如果我*在*服务器 A 无法访问时尝试在 B 上重新启动 glassfish 实例，启动过程将在重试后失败并保持在一种未定义/不可用状态，即 java 进程已启动，一些端口已打开，但应用程序未启动 - 甚至管理控制台也未启动。

恕我直言 glassfish 启动过程不应该等待队列连接，这应该在某种后台进程中完成。

你们有没有人经历过类似的事情？有什么我可以配置/调整来解决这种行为的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:23:05.093

没关系，它似乎已经修复了自己:(重新启动计算机后，移除部署的耳朵并再次部署它就可以了。从那时起我就没有遇到过这种行为。

# haskell - 堆栈空间溢出（可能与mapM有关）

> ID：16086782
> 
> 赞同：3
> 
> 时间：2013-04-18T15:16:07.123
> 
> 标签：haskell, lazy-evaluation, strictness

我正在编写一个程序，该程序创建一个 shell 脚本，其中包含一个用于目录中每个图像文件的命令。目录中有 667,944 张图片，所以我需要妥善处理严格/懒惰的问题。

这是一个简单的例子，它给了我`Stack space overflow`。如果我给它更多空间使用它确实有效`+RTS -Ksize -RTS`，但它*应该*能够以很少的内存运行，立即产生输出。因此，我一直在阅读 Haskell wiki 和有关 Haskell 的 wikibook 中有关严格性的内容，试图找出解决问题的方法，我*认为*这是让我感到悲伤的 mapM 命令之一，但我仍然没有对严格性的理解不够，无法对问题进行排序。

我在 SO 上发现了一些其他似乎相关的问题（[Haskell 中的 mapM 是否严格？为什么这个程序会出现堆栈溢出？](https://stackoverflow.com/questions/3358913/is-mapm-in-haskell-strict-why-does-this-program-get-a-stack-overflow)以及[Haskell 的 mapM 不懒惰吗？](https://stackoverflow.com/questions/3270255/is-haskells-mapm-not-lazy)），但启蒙仍然让我望而却步。

```
import System.Environment (getArgs)
import System.Directory (getDirectoryContents)

genCommand :: FilePath -> FilePath -> FilePath -> IO String
genCommand indir outdir file = do
  let infile = indir ++ '/':file
  let angle = 0 -- have to actually read the file to calculate this for real
  let outfile = outdir ++ '/':file
  return $! "convert " ++ infile ++ " -rotate " ++ show angle ++ 
    " -crop 143x143+140+140 " ++ outfile

main :: IO ()
main = do
  putStrLn "#!/bin/sh"
  (indir:outdir:_) <- getArgs
  files <- getDirectoryContents indir
  let imageFiles = filter (`notElem` [".", ".."]) files
  commands <- mapM (genCommand indir outdir) imageFiles
  mapM_ putStrLn commands 
```

* * *

编辑：**测试#1**

这是示例的最新版本。

```
import System.Environment (getArgs)
import System.Directory (getDirectoryContents)
import Control.Monad ((>=>))

genCommand :: FilePath -> FilePath -> FilePath -> IO String
genCommand indir outdir file = do
  let infile = indir ++ '/':file
  let angle = 0 -- have to actually read the file to calculate this for real
  let outfile = outdir ++ '/':file
  return $! "convert " ++ infile ++ " -rotate " ++ show angle ++ 
    " -crop 143x143+140+140 " ++ outfile

main :: IO ()
main = do
  putStrLn "TEST 1"
  (indir:outdir:_) <- getArgs
  files <- getDirectoryContents indir
  putStrLn $ show (length files)
  let imageFiles = filter (`notElem` [".", ".."]) files
  -- mapM_ (genCommand indir outdir >=> putStrLn) imageFiles
  mapM_ (\filename -> genCommand indir outdir filename >>= putStrLn) imageFiles 
```

我用命令编译它`ghc --make -O2 amy2.hs -rtsopts`。如果我用命令运行它`./amy2 ~/nosync/GalaxyZoo/table2/images/ wombat`，我会得到

```
TEST 1
Stack space overflow: current size 8388608 bytes.
Use `+RTS -Ksize -RTS' to increase it. 
```

如果我改为使用 command 运行它`./amy2 ~/nosync/GalaxyZoo/table2/images/ wombat +RTS -K20M`，我会得到正确的输出......最终：

```
TEST 1
667946
convert /home/amy/nosync/GalaxyZoo/table2/images//587736546846572812.jpeg -rotate 0 -crop 143x143+140+140 wombat/587736546846572812.jpeg
convert /home/amy/nosync/GalaxyZoo/table2/images//587736542558617814.jpeg -rotate 0 -crop 143x143+140+140 wombat/587736542558617814.jpeg 
```

...等等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:32:00.430

这实际上不是严格性问题（*），而是评估顺序问题。与惰性求值的纯值不同，一元效应必须以确定的顺序发生。`mapM`执行给定列表中的每个操作并收集结果，但在执行整个操作列表之前它无法返回，因此您不会获得与纯列表函数相同的流式处理行为。

在这种情况下，最简单的解决方法是在同`genCommand`一个. 请注意，它不会遇到同样的问题，因为它没有构建中间列表。`putStrLn``mapM_``mapM_`

```
mapM_ (genCommand indir outdir >=> putStrLn) imageFiles 
```

上面使用了“kleisli 组合算子” [`>=>`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3a-62--61--62-)，除了一元函数外，`Control.Monad`它类似于函数组合算子`.`。您还可以使用普通绑定和 lambda。

```
mapM_ (\filename -> genCommand indir outdir filename >>= putStrLn) imageFiles 
```

对于更复杂的 I/O 应用程序，您希望在小型单子流处理器之间具有更好的可组合性，您应该使用诸如[`conduit`](http://hackage.haskell.org/package/conduit)或之类的库[`pipes`](http://hackage.haskell.org/package/pipes)。

另外，请确保您使用`-O`或进行编译`-O2`。

(*) 确切地说，这*也是*一个严格性问题，因为除了在内存中构建一个大的中间列表之外，惰性还会导致`mapM`构建不必要的 thunk 并用完堆栈。

**编辑**：所以看来罪魁祸首可能是`getDirectoryContents`。查看函数的[源代码](http://hackage.haskell.org/packages/archive/directory/latest/doc/html/src/System-Directory.html#getDirectoryContents)，它本质上与`mapM`.

为了进行流式目录列表，我们需要使用[`System.Posix.Directory`](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/unix-2.5.1.0/System-Posix-Directory.html)不幸的是使程序与非 POSIX 系统（如 Windows）不兼容。您可以通过例如使用延续传递样式流式传输目录内容

```
import System.Environment (getArgs)
import Control.Monad ((>=>))

import System.Posix.Directory (openDirStream, readDirStream, closeDirStream)
import Control.Exception (bracket)

genCommand :: FilePath -> FilePath -> FilePath -> IO String
genCommand indir outdir file = do
  let infile = indir ++ '/':file
  let angle = 0 -- have to actually read the file to calculate this for real
  let outfile = outdir ++ '/':file
  return $! "convert " ++ infile ++ " -rotate " ++ show angle ++
    " -crop 143x143+140+140 " ++ outfile

streamingDirContents :: FilePath -> (FilePath -> IO ()) -> IO ()
streamingDirContents root cont = do
    let loop stream = do
            fp <- readDirStream stream
            case fp of
                [] -> return ()
                _   | fp `notElem` [".", ".."] -> cont fp >> loop stream
                    | otherwise -> loop stream
    bracket (openDirStream root) loop closeDirStream

main :: IO ()
main = do
  putStrLn "TEST 1"
  (indir:outdir:_) <- getArgs
  streamingDirContents indir (genCommand indir outdir >=> putStrLn) 
```

以下是您可以使用以下方法执行相同操作的方法`conduit`：

```
import System.Environment (getArgs)

import System.Posix.Directory (openDirStream, readDirStream, closeDirStream)

import Data.Conduit
import qualified  Data.Conduit.List as L
import Control.Monad.IO.Class (liftIO, MonadIO)

genCommand :: FilePath -> FilePath -> FilePath -> IO String
genCommand indir outdir file = do
  let infile = indir ++ '/':file
  let angle = 0 -- have to actually read the file to calculate this for real
  let outfile = outdir ++ '/':file
  return $! "convert " ++ infile ++ " -rotate " ++ show angle ++
    " -crop 143x143+140+140 " ++ outfile

dirSource :: (MonadResource m, MonadIO m) => FilePath -> Source m FilePath
dirSource root = do
    bracketP (openDirStream root) closeDirStream $ \stream -> do
        let loop = do
                fp <- liftIO $ readDirStream stream
                case fp of
                    [] -> return ()
                    _  -> yield fp >> loop
        loop

main :: IO ()
main = do
    putStrLn "TEST 1"
    (indir:outdir:_) <- getArgs
    let files    = dirSource indir $= L.filter (`notElem` [".", ".."])
        commands = files $= L.mapM (liftIO . genCommand indir outdir)

    runResourceT $ commands $$ L.mapM_ (liftIO . putStrLn) 
```

这样做的好处`conduit`是，您重新获得了使用诸如管道版本`filter`和`mapM`. 操作员在`$=`链中向前传输内容`$$`并将流连接到消费者。

不太好的事情是现实世界很复杂，编写高效且健壮的代码需要我们在资源管理方面跳过一些障碍。这就是为什么所有操作都在`ResourceT`monad 转换器中工作的原因，它跟踪例如打开的文件句柄，并在不再需要它们时迅速和确定地清理它们，或者例如，如果计算被异常中止（这与使用惰性 I /O 并依靠垃圾收集器最终释放任何稀缺资源）。

然而，这意味着我们**a)**需要运行最终生成的管道操作，`runResourceT`并且**b)**我们需要显式地将 I/O 操作提升到转换后的 monad，`liftIO`而不是能够直接编写 eg `L.mapM_ putStrLn`。

# sql - 使用 Aggregate 和 Max 函数

> ID：16086783
> 
> 赞同：0
> 
> 时间：2013-04-18T15:16:08.217
> 
> 标签：sql, sql-server-2008, case, aggregate-functions

我在使用 SQL Server 时遇到以下查询问题。

```
SELECT  
        emp_id= CASE employee_id
        WHEN ''
            THEN RTRIM(last_name) + '_' + RTRIM(first_name)
            + '_' + RTRIM(gender) + '_'
            + RTRIM(race_ethnicity_code) + '_'
            + RTRIM(high_degree_code) + '_' + RTRIM(position_code) + '_'
            + RTRIM(assignment_code)
            ELSE employee_id
            END , 
        last_name, first_name, 
        assign_perc, 
            assignment_num,
        CAST((total_salary)AS NUMERIC (18,2))* CAST((assign_perc) AS NUMERIC (18,2)) AS salary,
        total_salary
FROM employee 
ORDER BY last_name, first_name, district_name 
```

我的脚本是一个简单的列提取，当 emp_id 为空时，通过 case 语句为它创建一个唯一键。我遇到的问题是，当该人有多项任务时，将 assign_perc 与 total_Salary 相乘，而当该销售人员仅列出一次时，则获得最高薪水。例如 - 我的预期结果：

![在此处输入图像描述](https://i.stack.imgur.com/pYZpO.gif)

John Smith 只是一名兼职工作人员，他的一项任务只列出一次，因此他的 assign_perc 将小于 1，但我仍然需要最高工资而不是总工资 (assign_perc*total_salary)。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:41:27.093

如上所述，这非常混乱，因为您需要使用 CASE 语句来确定虚拟`employee_id`. 如果您可以将此 CASE 语句重构为 udf，或者将结果存储在表中，那会简单*得多！*

为了澄清这将要做什么 - 您希望将表连接到`employee`包含每个员工计数的表上。计数表如下所示：

```
SELECT employee_id, COUNT(*) AS employee_count
FROM employee
GROUP BY employee_id 
```

将它们连接在一起看起来像这样：

```
SELECT ...
FROM employee
JOIN (SELECT employee_id, COUNT(*) AS employee_count
      FROM employee
      GROUP BY employee_id) ec
ON employee.employee_id = ec.employee_id 
```

您计算的薪水现在将变为：

```
 CASE 
            WHEN ec.employee_count > 1 
                THEN CAST((total_salary)AS NUMERIC (18,2))* CAST((assign_perc) AS NUMERIC (18,2)) 
            ELSE total_salary 
        END AS salary, 
```

下面是用怪异的 CASE 语句代替“employee_id”的完整查询：

```
SELECT  
        CASE employee.employee_id
        WHEN ''
            THEN RTRIM(last_name) + '_' + RTRIM(first_name)
            + '_' + RTRIM(gender) + '_'
            + RTRIM(race_ethnicity_code) + '_'
            + RTRIM(high_degree_code) + '_' + RTRIM(position_code) + '_'
            + RTRIM(assignment_code)
            ELSE employee.employee_id
            END AS emp_id, 
        last_name, first_name, 
        assign_perc, 
        assignment_num,
        CASE 
            WHEN ec.employee_count > 1 
                THEN CAST((total_salary)AS NUMERIC (18,2))* CAST((assign_perc) AS NUMERIC (18,2)) 
            ELSE total_salary 
        END AS salary,
        total_salary
FROM employee
JOIN (SELECT CASE employee.employee_id
        WHEN ''
            THEN RTRIM(last_name) + '_' + RTRIM(first_name)
            + '_' + RTRIM(gender) + '_'
            + RTRIM(race_ethnicity_code) + '_'
            + RTRIM(high_degree_code) + '_' + RTRIM(position_code) + '_'
            + RTRIM(assignment_code)
            ELSE employee.employee_id
            END AS employee_id, COUNT(*) employee_count 
      FROM employee
      GROUP BY CASE employee.employee_id
        WHEN ''
            THEN RTRIM(last_name) + '_' + RTRIM(first_name)
            + '_' + RTRIM(gender) + '_'
            + RTRIM(race_ethnicity_code) + '_'
            + RTRIM(high_degree_code) + '_' + RTRIM(position_code) + '_'
            + RTRIM(assignment_code)
            ELSE employee.employee_id
            END) ec 
  ON CASE employee.employee_id
        WHEN ''
            THEN RTRIM(last_name) + '_' + RTRIM(first_name)
            + '_' + RTRIM(gender) + '_'
            + RTRIM(race_ethnicity_code) + '_'
            + RTRIM(high_degree_code) + '_' + RTRIM(position_code) + '_'
            + RTRIM(assignment_code)
            ELSE employee.employee_id
            END = ec.employee_id
ORDER BY last_name, first_name, district_name 
```

# javascript - 如何使用 javascript 将 HTML 中所有 100% 高度的图像更改为 50% 高度

> ID：16086784
> 
> 赞同：-4
> 
> 时间：2013-04-18T15:16:13.500
> 
> 标签：javascript, html

我有一些 HTML 文件（我不知道那会是什么），通过使用 javascript 我需要调整所有高度为 100% 的图像的大小，以便它们的高度为 50%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:20:13.743

如果您只使用 javascript，您需要做的是通过标记名获取所有元素

```
var imgs=document.getElementsByTagName("img");
for(var i in imgs){
  if(imgs[i].height=="100%"){
       img[i].height="50%";
  }
} 
```

堆栈溢出确实不是人们为您工作的好地方。

# javascript - 使用 jQuery 的 $().on('mouseenter',function(){}) 比使用 $().mouseenter(function(){}) 有优势吗？

> ID：16086785
> 
> 赞同：3
> 
> 时间：2013-04-18T15:16:18.793
> 
> 标签：javascript, jquery

我经常看到这样的代码：

```
$("#thing").on("mouseenter",function(){ Do stuff }); 
```

就个人而言，我几乎总是写：

```
$("#thing").mouseenter(function(){ Do stuff }); 
```

同样，我经常写

```
$("#thing").click(function(){}) 
```

但我看到人们将其纠正为（是的，我知道在 v. 1.7+ 中`on`更`bind`受欢迎，所以它本质上是相同的偏好问题）：

```
$("#thing").bind("click",function(){}) 
```

我是否在做“错误”的事情，我没有看到的两个功能之间是否存在深刻差异？它似乎总是做我想做的事，所以它从来都不是一个实际问题，但我很想知道是否有我忽略的理论考虑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:18:42.080

不是真的，它只是在源代码中看到的`mouseenter`函数调用`on`（或者如果没有参数调用）快一点：`trigger`

```
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
    "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
    "change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

    // Handle event binding
    jQuery.fn[ name ] = function( data, fn ) {
        return arguments.length > 0 ?
            this.on( name, null, data, fn ) :
            this.trigger( name );
    };
}); 
```

如您所见，许多事件也可以这样说。

就个人而言，当我不需要特殊功能时，我更喜欢使用`mouseenter`(or等) 函数：在我看来，使用 jQuery 的一大优势是它使代码不那么冗长且更具可读性。我认为你不应该被纠正，问问纠正你的人他为什么这样做。`click``on`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:23:14.977

通常，特定的事件喜欢`.click`或`$.post`是快捷方式。它们的作用与使用`.on`and`$.ajax`函数相同，但后者通常具有更大的灵活性。EG`.on`可以绑定多个事件，而`.click`只订阅点击。同样适用于该`$.ajax`功能，还有更多选项，因为快捷方式设置了某些默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:18:52.963

两者之间没有实际区别，简写函数（`.click()`,`.mouseover()`等）调用`.on()`以实际绑定事件处理程序。直接使用的唯一“优势”`.on()`是您没有第二次函数调用的额外开销；我怀疑这可能是微不足道的，但这是一个非常过早的优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:19:18.607

这不一定是错误的，但与正常方式相比，它有其优势。

通过将事件“绑定”到您的父容器`$(parent).on(event, target, function() { //foobar });`，您可以将新的目标元素添加到您的容器中，而不必重复 jquery 来绑定事件。

# javascript - 弹出窗口中按钮的“onclick”仅适用一次

> ID：16086786
> 
> 赞同：0
> 
> 时间：2013-04-18T15:16:19.497
> 
> 标签：javascript, jquery, jquery-mobile, popup

我有一个导入 jquery mobile 的 html/php 网页（文件名为 searchresults.php）。当您进入页面时，网址通常类似于

```
www.domain.com/searchresults.php?&sort="off"&max="5" 
```

在此示例中，排序关闭，仅显示 5 个项目。在该页面上有一个按钮，它打开一个弹出窗口，我希望用户能够更改这些设置。我使用内置的 jquery 移动弹出窗口。在该弹出窗口中，您可以打开/关闭“排序”，并且可以输入新的最大值。弹出窗口上有一个“确定”按钮，用于确认您的新设置。它看起来像这样：

```
<a href="" id="okbutton" data-role="button" onclick="sortAgain();">OK</a> 
```

sortAgain(); javascript中的函数如下所示：

```
function sortAgain();
{
    //some code to get the necessary variables//
    ...

    //change the href of the button so you reload the page
    document.getElementById("okbutton").href = "searchresults.php" + "?keyword=" + var1 + "&sort=" + var2 + "&max=" + var3
 } 
```

所以，基本上，就在“确定”按钮导航到另一个页面之前，我设置了它应该导航的页面的href。

该方案有效，并且从服务器再次获取 searchresults.php 文件并重新解释（使用 url 中的新变量）。

但是，如果我在更改一次后尝试再次更改设置，则弹出窗口什么也不做！换句话说，弹出窗口上 ok 按钮的 href 保持为空，并且不调用 javascript 函数 sortAgain()。我不明白为什么它第一次调用 onclick 方法非常好，但随后拒绝再次调用它？

我认为这与弹出 html 代码是 searchresult.php 文件的一个组成部分这一事实有关，并且指向同一页面的hrefing会产生问题？弹出是纯html，弹出代码中不涉及php。再次，它第一次运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:20:21.723

您应该查看如何通过 JavaScript 附加事件。见这里：[javascript附加事件](https://stackoverflow.com/questions/10335343/javascript-attaching-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:23:42.540

在 JQM 中设置点击处理程序时需要使用“pageinit”事件：http: [//api.jquerymobile.com/category/events/](http://api.jquerymobile.com/category/events/)

这是一个如何在页面首次加载时绑定点击处理程序的示例。

```
$( document ).on( "pageinit", "#that-page", function() {
    $('#okbutton').on( "click", "#that-page", function( e ) { 
        $(this).attr("href", "searchreslts.php");
    });
}); 
```

# vb.net - 如何为 Lucky 7 制作实时比分计数器（vb 游戏）

> ID：16086790
> 
> 赞同：1
> 
> 时间：2013-04-18T15:16:22.323
> 
> 标签：vb.net, visual-studio-2010

我使用 vb 代码制作了一个简单的游戏，幸运 7 在 Visual Basic 上。分数计数器无法正常工作，例如，如果我赢了一次游戏（在 3 个插槽之一中获得 7），我得到 10 分，分数标签变为 10。如果我继续按下旋转按钮并获胜同样，分数标签仍然停留在数字 10 上，并没有更改为 20。

这是我编写的旋转按钮的代码：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Dim rand = New Random
    Dim slots = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
    Dim score = 0
    For i = 0 To 2
        slots(i) = rand.Next(10)
    Next

    Label1.Text = (slots(0).ToString)
    Label2.Text = (slots(1).ToString)
    Label3.Text = (slots(2).ToString)

    If slots(0) = 7 Or slots(1) = 7 Or slots(2) = 7 Then
        score = score + 10  
        Label4.Text = (score.ToString)
        PictureBox1.Visible = True 
    Else
        PictureBox1.Visible = False
    End If

End Sub 
```

我是否需要添加一个while循环或类似的东西来使分数随着我赢得比赛而改变多次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:28:36.107

您需要在类级别移动变量声明。

目前，您在单击按钮时创建它。因此，每次单击时，都会删除该`score`变量并重新创建它。

移动

```
Dim score = 0 
```

行如下：

```
'Assuming your Form is called Form1
Public Class Form1 Inherits Form

Dim score = 0

     Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
     'Your current code
     End Sub

 End Class 
```

你的问题就解决了。

您可能应该阅读一些[有关范围的文档](http://msdn.microsoft.com/en-us/library/ms973875.aspx)。

关于你的小错误的摘录：

*如果在过程中声明变量，但在任何 If 语句之外，则范围是直到 End Sub 或 End Function。变量的生命周期是直到过程结束。*

# geocoding - Zip-Centroid 地理编码：是否有 zip+4 质心

> ID：16086795
> 
> 赞同：4
> 
> 时间：2013-04-18T15:16:51.580
> 
> 标签：geocoding, zipcode, street-address, centroid

有按邮政编码质心进行的地理编码，但是否有一个 zip+4 质心，它会更细化但不是街道地址粒度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:03:11.070

就在这里。我在[SmartyStreets](http://smartystreets.com/)工作，我们在那里验证和地理编码街道地址。ZIP+4 大约是块级的，这听起来像是您正在寻找的。有一些服务提供这种类型的地理编码，包括我们的[LiveAddress](http://smartystreets.com/products)。

如果您不需要超精确的地理编码（例如，如果您要跳伞到好友的屋顶上），那么 ZIP+4 很可能也是最实惠的选择。屋顶级精度数据必须手动收集（由 Google 等公司），因此非常昂贵。

所以是的，可以通过 ZIP+4 质心进行地理编码，它通常会让你在目标的大约一个街区内。

# c++ - 从 Iunknown 转换为另一种类型

> ID：16086804
> 
> 赞同：2
> 
> 时间：2013-04-18T15:17:19.533
> 
> 标签：c++, command-line-interface

我需要将一个变量从 Iunknown 类型转换为另一种类型（SpaceClaim::Api::V10::Session^）我正在使用 c /cli 我找不到任何解决方案

在这里修复该prb是代码：

```
 gcroot<SpaceClaim::Api::V10::Session^>  m_piApplication;  

STDMETHODIMP CEMWCADLinkCtrl::SetEMWCADLinkApplication(IUnknown* pCADApplication)
 {  
if ( pCADApplication == NULL ) 
return S_FALSE;  
 m_piApplication = (SpaceClaim::Api::V10::Session^)pCADApplication;  //error
  return S_OK;  } 
```

PLZ如果有人怎么能帮助生病非常感谢thks，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:33:41.757

IUnknown 是所有 COM 对象的基类，而 C++/CLI 引用类将 .NET 对象作为其基类。没有从一个到另一个的转换，因为它们没有任何关系。如果你使用 C++，你应该调用 pCADApplication->QueryInterface() 来获取你真正需要的接口，然后调用它的方法。我强烈建议使用 ATL 智能指针来帮助管理引用计数（以及许多其他通常有用的 COM 帮助函数）。

# java - 应用程序意外停止，请重试。安卓

> ID：16086805
> 
> 赞同：0
> 
> 时间：2013-04-18T15:17:21.110
> 
> 标签：java, android, xml, eclipse

我做了一个简单的android应用程序的开头，它运行良好，但是由于我添加了一个pitcure，我有错误：“应用程序已意外停止，再试一次”。我发现了很多关于这个主题的话题，但我没有成功解决我的问题。这是我自己做的第一个真正的应用程序，我希望你能帮助我。在 logcat 我有：

```
04-18 14:59:13.926: E/AndroidRuntime(331): FATAL EXCEPTION: main
04-18 14:59:13.926: E/AndroidRuntime(331): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.joignabilite/com.example.joignabilite.Identification}: android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.RelativeLayout
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-18 14:59:13.926: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
04-18 14:59:13.926: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:507)
04-18 14:59:13.926: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-18 14:59:13.926: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-18 14:59:13.926: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method)
04-18 14:59:13.926: E/AndroidRuntime(331): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.RelativeLayout
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
04-18 14:59:13.926: E/AndroidRuntime(331):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-18 14:59:13.926: E/AndroidRuntime(331):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.Activity.setContentView(Activity.java:1657)
04-18 14:59:13.926: E/AndroidRuntime(331):  at com.example.joignabilite.Identification.onCreate(Identification.java:12)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-18 14:59:13.926: E/AndroidRuntime(331):  ... 11 more
04-18 14:59:13.926: E/AndroidRuntime(331): Caused by: java.lang.reflect.InvocationTargetException
04-18 14:59:13.926: E/AndroidRuntime(331):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-18 14:59:13.926: E/AndroidRuntime(331):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
04-18 14:59:13.926: E/AndroidRuntime(331):  ... 21 more
04-18 14:59:13.926: E/AndroidRuntime(331): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f060001 a=-1 r=0x7f060001}
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.content.res.Resources.loadDrawable(Resources.java:1681)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.View.<init>(View.java:1951)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.View.<init>(View.java:1899)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.view.ViewGroup.<init>(ViewGroup.java:286)
04-18 14:59:13.926: E/AndroidRuntime(331):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:173)
04-18 14:59:13.926: E/AndroidRuntime(331):  ... 24 more 
```

我的活动：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@style/AppTheme"
android:orientation="horizontal"
tools:context=".Identification" >

<TextView
    android:id="@+id/headerFond"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:background="@drawable/header_band"
    tools:ignore="SelectableText" />

<TextView
    android:id="@+id/headerLogo2"
    android:layout_width="40dp"
    android:layout_height="30dp"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:background="@drawable/logo2_part2"
    tools:ignore="SelectableText" />

<TextView
    android:id="@+id/headerLogo1"
    android:layout_width="80dp"
    android:layout_height="40dp"
    android:layout_toLeftOf="@id/headerLogo2"
    android:background="@drawable/logo2_part1"
    tools:ignore="SelectableText" />

</RelativeLayout> 
```

我的标识.java：

```
package com.example.joignabilite;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class Identification extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_identification);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.identification, menu);
    return true;
}

} 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.joignabilite"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.joignabilite.Identification"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:33:35.540

由于以下行，您会收到错误消息：

```
android:background="@style/AppTheme" 
```

该`background`属性只占用`@drawable`和`@color`资源。你不能在那里提供样式。

# javascript - 使用停留在左边框上的粘性 div 进行水平滚动

> ID：16086812
> 
> 赞同：12
> 
> 时间：2013-04-18T15:17:37.580
> 
> 标签：javascript, jquery, css, html

我有两行数据（绿色）和一个标题（红色），它们应该始终可见：

查看我已有的示例：

[http://jsfiddle.net/j9C8R/33/](http://jsfiddle.net/j9C8R/33/)

现在红色标题与内容一起滚动，但它应该保持在现在的位置，但随着内容垂直滚动（MS Excel 样式）。

如何实现这一点（最好只使用 CSS）。

**更新**：重要的是红色标题与相应的内容一起垂直滚动，但在水平滚动时坚持左边缘。

```
.main {
  background-color: blue;
  overflow: scroll;
  height: 200px;
  width: 400px;
}

.row {
  height: 50px;
  overflow: scroll;
  clear: both;
  width: 1000px;
  background-color: yellow;
}

.sticky,
.content {
  float: left;
  width: 150px;
  border: 1px solid black;
}

.sticky {
  background-color: red;
}

.content {
  background-color: green;
}
```

```
<div class="main">
  <div class="row">
    <div class="sticky">Sticky header A</div>
    <div class="content">ContentA</div>
    <div class="content">ContentA</div>
    <div class="content">ContentA</div>
    <div class="content">ContentA</div>
  </div>
  <div class="row">
    <div class="sticky">Sticky header B</div>
    <div class="content">ContentB</div>
    <div class="content">ContentB</div>
    <div class="content">ContentB</div>
    <div class="content">ContentB</div>
  </div>
  <div class="row">
    <div class="sticky">Sticky header C</div>
    <div class="content">ContentC</div>
    <div class="content">ContentC</div>
    <div class="content">ContentC</div>
    <div class="content">ContentC</div>
  </div>
  <div class="row">
    <div class="sticky">Sticky header D</div>
    <div class="content">ContentD</div>
    <div class="content">ContentD</div>
    <div class="content">ContentD</div>
    <div class="content">ContentD</div>
  </div>
  <div class="row">
    <div class="sticky">Sticky header E</div>
    <div class="content">ContentE</div>
    <div class="content">ContentE</div>
    <div class="content">ContentE</div>
    <div class="content">ContentE</div>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T15:45:55.980

**更新**

请注意，下面的内容现在有点过时了，因为我们有 css [position sticky](https://developer.mozilla.org/en-US/docs/Web/CSS/position)

**原帖**

我认为通过纯 css 实现您的目标是不可能的，因为通常使用粘性的项目，`position:fixed`不幸的是相对于视口修复了它们。

通过使用 javascript（在本例中为 jquery 库）和绝对定位，您应该能够实现您所追求的：

**新款式：**

```
.row {
    height:50px;
    overflow:scroll;
    clear:both;
    width:1000px;
    position:relative; //for the absolute positioning of sticky
    background-color:yellow;
    padding-left:150px; //this is the size of your sticky column so it doesn't cover content when fully left
    box-sizing:border-box;//this is so the padding doesn't add extra width to your 1000px
}

.sticky {
    background-color:red;
    position:absolute; left:0; top:0;
} 
```

**javascript:**

```
$('.main').scroll(function() {
    $(this).find('.sticky').css('left', $(this).scrollLeft());
}); 
```

[http://jsfiddle.net/j9C8R/36/](http://jsfiddle.net/j9C8R/36/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:27:06.493

好的，我已经报废了您的东西并制作了一个全新的东西，我只是没有将东西包裹在相对位置的容器中，但您至少可以设法做到这一点

垂直滚动很容易，但是如果您希望水平滚动并移动标题，（CSS不会只做）

[**演示**](http://jsfiddle.net/j9C8R/16/)

CSS

```
.head {
    background-color: #f00;
    width: 300px;
    position: absolute;
    left: 100px;
}

.head table {
    width: 100%;
}

.body {
    position: relative;
    left: 100px;
    top: 20px;
    width: 300px;
    height: 50px;
    overflow-y: auto;
}

.body table {
    width: 100%;
}

.body td {
    width: 100px;
}

.head table td {
    width: 100px;
}

.left {
    position: absolute;
    background-color: #0f0;
    width: 90px;
    top: 40px;
} 
```

# jquery - SlickGrid 自定义过滤器

> ID：16086814
> 
> 赞同：1
> 
> 时间：2013-04-18T15:17:42.393
> 
> 标签：jquery, search, filter, slickgrid

在这里搜索，似乎找不到答案。

我用 SlickGrid 设置了一个非常复杂的网格。

搜索功能位于自定义工具栏中。我将它连接到网格函数的调用。

例如：

[HTML]

```
 <input name='name' id='id' class='searchable'> 
```

[JS]

```
$('.searchable').on('change' , function() {
     var searchTerm = {};     
         searchTerm[$(this).attr('name')] = $(this).val();

     dataview.setFilterArgs(searchTerm);
     dataview.refresh();
}); 
```

我可以看到参数传递给自定义过滤器

```
var customFilter = function(item, args) {
    ***$.each(args , function(key , val) {
        if (val!=='' && val!==null) {
           return (item[key] == val);
        }
    });***
return true;
} 
```

[!] 问题是当你在 $.each 里面时，如果你“返回”它只会跳过循环。但是在函数之外没有任何返回。

**但是网格上什么也没有发生。什么都没有被过滤**

这是我的设置

```
dataview = new Slick.Data.DataView();
grid = new Slick.Grid(grid_id , dataview , columns , options);
grid.selectionModel(new Slick.RowSelectionModel());

grid.init();

dataview.beginUpdate();
dataview.setItems(gridData);
dataview.setFilter(customFilter);
dataview.endUpdate(); 
```

我一直在关注 github 上的两个过滤器示例。但除此之外我看不出有什么不同

如果我用

```
dataview = new Slick.Data.DataView({inlineFilters: true}); 
```

我收到一个错误：

未捕获的 SyntaxError：未定义的标签“_coreloop”（slick.dataview.js 行：639）

尝试阅读代码但缺少注释......所以我真的不知道问题出在哪里。

有人遇到类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T10:04:12.260

如果您将 dataView 和 columnFilters 声明为全局变量，则可以调用此函数：

```
function SetfilterOnGrid(SearchPhrase) {
    columnFilters = {"1": SearchPhrase};
    dataView.refresh();
} 
```

数字“1”是列 ID SearchPhrase 是您在网格中搜索的短语

至于清除过滤器，您可以使用此功能：

```
function ClearFilterOnGrid()
{
    columnFilters = {};
    dataView.refresh();
} 
```

# c# - 将可空字节映射到枚举时出现 C# AutoMapper 异常

> ID：16086815
> 
> 赞同：3
> 
> 时间：2013-04-18T15:17:46.770
> 
> 标签：c#, .net, exception, enums, automapper

我正在使用 AutoMapper ( [http://automapper.org/](http://automapper.org/) ) 自动将一个对象映射到另一个对象。

源对象：

```
public partial class SrcObject
{
    public int Id { get; set; }

    ...

    public Nullable<byte> QcRea { get; set; }
    public Nullable<byte> QcPyg { get; set; }

    ...

} 
```

目标对象：

```
[DataContract]
public class DstObject
{
    [DataMember]
    public int Id { get; set; }

    ...

    [DataMember]
    public QualityControlState QcRea { get; set; }

    [DataMember]
    public QualityControlState QcPyg { get; set; }

    ...
} 
```

枚举：

```
public enum QualityControlState
{
    Ok = 0,
    Warning = 1,
    Error = 2
} 
```

映射器：

```
Mapper.CreateMap<DateTime, Nullable<DateTime>>().ConstructUsing(MessageDtoConverter.ToNullable);
Mapper.CreateMap<float, Nullable<float>>().ConstructUsing(MessageDtoConverter.ToNullable);
Mapper.CreateMap<short, Nullable<short>>().ConstructUsing(MessageDtoConverter.ToNullable);
Mapper.CreateMap<QualityControlState, Nullable<byte>>().ConstructUsing(MessageDtoConverter.ToNullable);
Mapper.CreateMap<Nullable<byte>, QualityControlState>().ConstructUsing(MessageDtoConverter.ToQualityControlState);
Mapper.CreateMap<byte, Nullable<byte>>().ConstructUsing(MessageDtoConverter.ToNullable);
Mapper.CreateMap<bool, Nullable<bool>>().ConstructUsing(MessageDtoConverter.ToNullable);
Mapper.CreateMap<int, Nullable<int>>().ConstructUsing(MessageDtoConverter.ToNullable);

Mapper.CreateMap<SrcObject, DstObject>()
    .ForMember(d => d.RawResults, s => s.Ignore())
    .ForMember(d => d.CorrectedImage, s => s.Ignore())
    .ForMember(d => d.SegmentedImage, s => s.Ignore())
    .ForMember(d => d.QcReaRotationAngleVertical, s => s.Ignore())
    .ForMember(d => d.ReatoHCW, s => s.Ignore());

Mapper.AssertConfigurationIsValid(); 
```

映射方法：

```
public static QualityControlState ToQualityControlState(Nullable<byte> value)
{
    return (value != null) ? (QualityControlState)Enum.Parse(typeof(QualityControlState), value.ToString()) : QualityControlState.Ok;
}

public static Nullable<DateTime> ToNullable(DateTime value)
{
    return (value != null) ? value : new DateTime();
}

public static Nullable<float> ToNullable(float value)
{
    return (value != null) ? value : 0.0f;
}

public static Nullable<short> ToNullable(short value)
{
    return (value != null) ? value : (short)0;
}

public static Nullable<byte> ToNullable(QualityControlState value)
{
    return (value != null) ? (byte)value : (byte)0;
}

public static Nullable<byte> ToNullable(byte value)
{
    return (value != null) ? value : (byte)0;
}

public static Nullable<bool> ToNullable(bool value)
{
    return (value != null) ? value : false;
}

public static Nullable<int> ToNullable(int value)
{
    return (value != null) ? value : 0;
} 
```

例外：

```
_innerException = 
{"Object reference not set to an instance of an object."}

base {System.Exception} =
{"\r\n\r\nMapping types:\r\nNullable`1 -> QualityControlState\r\nSystem.Nullable`1[[System.Byte, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] -> QualityControlState\r\n\r\nDestination path:\r...

MemberName = "QcRea"

SourceType =
{Name = "Nullable`1" FullName = "System.Nullable`1[[System.Byte, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]"}

DestinationType =
{Name = "QualityControlState" FullName = "QualityControlState"} 
```

似乎没有调用我的“可空到枚举”的自定义映射器。

Mapper.AssertConfigurationIsValid() 没有问题。

但为什么？我该如何转换？

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:15:42.173

尝试使用`TypeConverter`. 像这样的东西应该工作：

```
public class QualityControlStateTypeConverter
                           : TypeConverter<Nullable<byte>, QualityControlState>
{
    protected override QualityControlState ConvertCore(Nullable<byte> source)
    {
        return (source != null)
            ? (QualityControlState)Enum.Parse(typeof(QualityControlState),
                                              source.ToString())
            : QualityControlState.Ok;
    }
} 
```

在您的映射配置中使用它，如下所示：

```
Mapper.CreateMap<Nullable<byte>, QualityControlState>()
      .ConvertUsing(new QualityControlStateTypeConverter()); 
```

我用这段代码测试了它，它似乎工作正常：

```
var qcs = Mapper.Map<Nullable<byte>, QualityControlState>(null); // OK
qcs = Mapper.Map<Nullable<byte>, QualityControlState>(0);        // OK
qcs = Mapper.Map<Nullable<byte>, QualityControlState>(1);        // Warning
qcs = Mapper.Map<Nullable<byte>, QualityControlState>(2);        // Error
qcs = Mapper.Map<Nullable<byte>, QualityControlState>(3);        // 3 
```

# c# - 运行 LAN WCF 服务

> ID：16086819
> 
> 赞同：0
> 
> 时间：2013-04-18T15:17:51.903
> 
> 标签：c#, wcf, sockets, ssl, https

我正在尝试创建一个客户端-服务器应用程序，服务器在用户机器上运行。我正在研究使用 WCF 或 Sockets，但我有几个问题。

我想使用 WCF，但似乎用户需要管理员权限才能启动服务。如果 WCF 服务在托管应用程序（例如 Windows 服务）中运行，用户是否需要管理员权限？使用套接字似乎不需要管理员权限来打开相关端口。

HTTPS 安全性如何在 WCF 中发挥作用？由于这是一个 LAN 程序（用户从客户端与他们自己的机器交谈），我是否需要购买证书并将其安装在他们的机器上？如果可能，我宁愿避免这种情况，因为正在传输的数据不敏感。如果我将 SSLStream 用于套接字，这会是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:26:36.700

有很多问题，:)，所以对其中一部分的回答非常简短：

1.  您甚至可以在控制台应用程序中托管 WCF。Windows 服务可能不需要在 pc 上安装管理属性。

2.  对于 HTTPS——你不必购买证书，你可以自己创建——网上有很多例子。但是 - 如果您的数据不敏感 - 您可能可以使用简单的 http。

# windows-8 - 尝试创建 Windows 商店应用程序包时出现“签名失败”错误

> ID：16086820
> 
> 赞同：0
> 
> 时间：2013-04-18T15:17:52.520
> 
> 标签：windows-8, visual-studio-2012, microsoft-metro, windows-store-apps

我整天都在与这个奇怪的错误作斗争。我已经开发了一个 Windows 商店（Metro）应用程序并在过去成功创建了一个应用程序包。

但是今天突然，我无法创建应用程序包并收到一条错误消息：`Failed to sign 'C:\Users\XX\Documents\Visual Studio 2012\Projects\XX\AppPackages\XX_1.0.2.5_AnyCPU_Test\XX_1.0.2.5_AnyCPU.appx'. SignTool Error: An unexpected internal error has occurred.` 错误详细信息将我指向文件 Microsoft.AppXPackage.targets 到以下行：`<SignAppxPackage AppxPackageToSign="@(FinalAppxPackageItem)"`

谁可以解决这个问题并创建应用程序包？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:22:17.727

您是否应用了 Visual Studio 2012 更新 2 ？在这个最近的服务包中（从本月开始），它们是与应用程序认证相关的一些变化。无论如何，升级可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:59:07.750

没有任何帮助，最后我通过创建一个全新的应用程序，然后从原始应用程序复制文件来解决它。问题仍然存在，所以我开始从项目中排除文件夹，直到我找到一个不需要的文件夹，该文件夹由于某种原因造成了问题......

终于修好了！

# python - Pythonic 方式：基于类成员和另一个数组对数组项进行排序

> ID：16086821
> 
> 赞同：0
> 
> 时间：2013-04-18T15:17:57.827
> 
> 标签：python, arrays, sorting

我已经尝试了所有我能想象的，但似乎无法得出一个有效的解决方案。

我需要根据它们的 ID 对一组类对象进行排序，以便该 ID 与另一个列表中的相同。

```
class Item:
  def __init__(self,i):
    self.i = i

itemList = [Item(2),Item(1),Item(4),Item(3)]
indexList = [3,1,2,4] 
```

预期输出：

```
itemList_sorted = [Item(3), Item(1), Item(2), Item(4)] 
```

我在这里看到了一个类似的强烈反对的问题[，](https://stackoverflow.com/questions/13703612/sorting-an-array-based-on-another-array)但该解决方案对我没有帮助，因为我不能使用函数并且需要将每个项目的成员与另一个数组中的索引进行比较。

```
itemList.sort(key=lambda x: x.i - indexList.index) # Wrong
itemList.sort(key=indexList.index,cmp=lambda x,y: x.i==y) # Wrong 
```

有没有一种 Pythonic 方法可以在不诉诸 C 类循环的情况下完成此操作？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:22:55.520

使用`sorted(..., key)`：

```
sorted(itemList, key=lambda item: indexList.index(item.i)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:25:22.313

如果您可以假设 indexlist 中的每个索引都是`i`您`Item`的一个，那么您可以作弊并按顺序创建它们：

```
itemList = [Item(i) for i in indexList] 
```

如果这不是一个选项，您可以排序：

```
itemList.sort(key=lambda x: indexList.index(x.i)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:36:32.590

其他答案解决了如何正确进行排序 - 但我觉得你在这里采取了错误的方法。为什么不只是建立一个新列表而不是尝试对旧列表进行排序？

```
[next(y for y in itemList if y.i == x) for x in indexList] 
```

请注意，这实际上应该比 using 更快`sort`，后者必须`indexList`为每个*O(n log n)*比较搜索一次。

# jpa - 使用 JPA entityManager 时，为什么必须在删除之前合并？

> ID：16086822
> 
> 赞同：11
> 
> 时间：2013-04-18T15:17:59.460
> 
> 标签：jpa, merge, jpa-2.0, entitymanager

一段时间以来，我一直想知道为什么在使用 JPA 时，我必须像这样编写删除方法：

```
@Transactional
public void delete(Account account)
{
    if (entityManager.contains(account))
    {
        entityManager.remove(account);
    }
    else
    {
        entityManager.remove(entityManager.merge(account));
    }
} 
```

由于事务以这种方法开始和结束，因此可能不需要包含，但我仍然想知道为什么 remove 不能只采用非托管对象。是否因为需要对其进行管理才能知道该对象的 id 是什么？任何其他见解都会很高兴听到。我只是想了解 JPA 删除的方式和原因。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-18T17:38:38.697

删除操作可以级联到实体的关联。

为了能够知道要删除哪些关联实体，实体管理器不能依赖分离的实体，因为根据定义，这个分离的实体并不反映实体的最新状态，也不一定拥有它的所有递归加载的级联关联。

因此，*如果*它接受一个分离的实体，`remove()`则必须为您决定：要么合并分离的实体并根据分离的实体包含的内容执行删除操作，要么只是加载与分离的实体具有相同 ID 的实体，然后执行基于加载实体的操作。

它不需要为您做出决定，它只需要一个附加的实体。这样，你决定你想要什么。

# c# - 用不同的语言保存价格

> ID：16086832
> 
> 赞同：0
> 
> 时间：2013-04-18T15:18:29.690
> 
> 标签：c#, decimal

在我们的应用程序中，您可以切换默认语言。我们也有产品的价格。我想知道将这些价格保存到数据库中的最佳方法是什么。

我们在荷兰使用逗号作为小数分隔符，但美国人使用点作为小数分隔符。

在我的表单中，我有两个文本框：一个用于整数，一个用于小数。我现在的情况是，在第一个文本框中我的值为 2，而在另一个文本框中我有 00（所以我有 2 欧元和 0 美分）。当我将其保存到数据库时，它存储 200.00。

我需要做什么才能存储 2.00 而不是 200.00？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:41:26.827

我们现在将金额存储为美分。当从数据库中检索金额时，我们将此金额除以 100 和用户的文化信息。

# javascript - KnockoutJS + KoGrid - 作为 ko.observable(object) 子级的可观察数组不会触发更新

> ID：16086833
> 
> 赞同：1
> 
> 时间：2013-04-18T15:18:31.587
> 
> 标签：javascript, knockout.js, kogrid

**上下文**
我目前正在探索结合 KoGrid 的 KnockoutJS。
我有一个包含多个字段*（也绑定到字段）*的对象，以及我想在 KoGrid 中显示的**子对象**列表。

**jsfiddle**
我准备了一个 jsFiddle 来说明我遇到的问题：http:
[//jsfiddle.net/kPmAJ/4/](http://jsfiddle.net/kPmAJ/4/)

**问题**：
我的视图模型包含一个**可观察的** *foo*，其中包含*父*对象。
在这个父对象中，有一个属性**children**，它是一个**observableArray**包含对象

KoGrid 必将`$root.foo().children`

如果**在初始化绑定之前**填充了数组，则此方法有效。
但是，该对象之后被替换（数据通过 AJAX 加载并且可以重新加载），并且显然**KoGrid 项目绑定丢失了**。

我在想，由于我的 viewmodel 上的**foo -object 是一个****observable**，如果 foo 被替换，这将触发 KoGrid 正在观察里面的数组进行更新。这确实适用于 foreach 绑定。

显然 KoGrid 并没有触发。

--

我在这里做错了什么，还是我在 KoGrid 中遇到了问题？

**代码（仅供参考。见提琴手;））**

```
var SampleObject = function (data) {
    this.id = new ko.observable(data ? data.id : null);
    this.children = new ko.observableArray([]);

    if(data) {
        var childrenMapped = [];
        $(data.children).each(
            function()  {
                childrenMapped.push(new SampleChildObject(this));
            }
        );
        this.children(childrenMapped);
    }
}

var SampleChildObject = function (data) {
    this.name = new ko.observable(data ? data.name : null);
};

var vm = {
    foo: new ko.observable('John Doe'),
    bar: new ko.observable(
            new SampleObject(
            {
                id: 1234,
                children: []
            })
        )
};

ko.applyBindings(vm);

// Returns from an AJAX-call instead, so can't be before applyBindings
vm.bar(new SampleObject(
            {
                id: 1234,
                children: [
                    { name: 'test1' },
                    { name: 'test2' },
                    { name: 'test3' }]
            })); 
```

-

```
<div style="height: 500px;"
data-bind="koGrid: { data: bar().children }"></div>

<ul data-bind="foreach: bar().children">
    <li data-bind="text: name"></li>
</ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T13:13:01.073

发生的事情是 koGrid 绑定没有更新处理程序，因此它没有响应 bar 中的任何更改。

koGrid 确实会观察可观察的数组 children，但如果我们要将 bar().children 中的值替换为从 Ajax 调用返回的值，则网格会更新。

像这样：

```
function (data) {

    var childrenMapped = [];

    $(data.children).each(

        function()  {

            childrenMapped.push(new SampleChildObject(this));

});
    bar().children(childrenMapped);

    bar().id(data.id); 
```

});

您还应该检查应该解决此问题的映射插件。 [ko映射](http://knockoutjs.com/documentation/plugins-mapping.html)

# linux - 我如何在避免“参数过多”的同时进行 grep

> ID：16086834
> 
> 赞同：6
> 
> 时间：2013-04-18T15:18:32.363
> 
> 标签：linux, bash, grep

我试图清理一些垃圾邮件并遇到了问题。队列中的文件数量太大，以至于我通常的命令无法处理。它会给我一个关于太多论点的错误。

我通常这样做

```
grep -i user@domain.com 1US* | awk -F: '{print $1}' | xargs rm 
```

1US* 可以是 1US[a-zA-Z] 之间的任何值。我唯一能做的就是运行这个可怕的装置。它的一个文件，包括 1USa、1USA、1USb 等，贯穿整个字母表。我知道他们必须是一种更有效地运行它的方法。

```
grep -s $SPAMMER /var/mailcleaner/spool/exim_stage1/input/1USa* | awk -F: '{print $1}' | xargs rm
grep -s $SPAMMER /var/mailcleaner/spool/exim_stage1/input/1USA* | awk -F: '{print $1}' | xargs rm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:22:06.050

您可以使用它`find`来查找名称以模式“1US”开头的所有文件。然后，您可以将输出通过管道传输到 xargs ，这将确保参数列表不会增长太多并处理 grep 调用。请注意，我使用空字节来分隔 xargs 的文件名。这避免了有*问题*的文件名的问题。;)

```
find -maxdepth 1 -name '1US*' -printf '%f\0' | xargs -0 grep -u user@domain | awk ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:58:01.170

运行几个 grep 实例。代替

```
grep -i user@domain.com 1US* | awk '{...}' | xargs rm 
```

做

```
(for i in 1US*; do grep -li user@domain "$i"; done) | xargs rm 
```

注意 -l 标志，因为我们只需要匹配的文件名。这将加快 grep（在第一次匹配时终止）并使您的 awk 脚本不再需要。这可以通过检查 grep 的返回状态并调用 rm 来改进，而不是使用 xargs（xargs 非常脆弱，IMO）。如果你问，我会给你更好的版本。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T18:29:19.610

使用 xargs 比使用“find ... -exec grep”更有效，因为您创建的进程更少等。

解决此问题的一种方法是：

```
ls 1US* | xargs grep -i user@domain.com | awk -F: '{print $1}' | xargs rm 
```

但更容易的是：

```
find . -iname "1US*" -exec rm {} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:53:28.623

的`-exec`参数在`find`这里很有用，我自己在类似的情况下使用过这个。

例如

```
# List the files that match
find /path/to/input/ -type f -exec grep -qiF spammer@spammy.com \{\} \; -print
# Once you're sure you've got it right
find /path/to/input/ -type f -exec grep -qiF spammer@spammy.com \{\} \; -delete 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T16:23:20.377

使用`find`and 循环代替`xargs`.

```
find . -name '1US*' | \
while read x; do grep -iq user@domain "$x" && rm "$x"; done 
```

这使用管道和循环而不是参数（for`grep`和`rm`），并防止与参数限制相关的问题。

# actionscript-3 - AS3/Flash 如何在网络摄像头中禁用自动背光校正

> ID：16086841
> 
> 赞同：0
> 
> 时间：2013-04-18T15:18:43.617
> 
> 标签：actionscript-3, actionscript, camera, webcam

我正在开发一个使用网络摄像头的 AS3 Flash 程序。

该应用程序从中获取位图并进行详细说明。

我的问题是，在最初的 4-5 秒内，网络摄像头会尝试校正背光并且图像模糊。

有办法解除这个吗？如果是，如何？

我用这个简单的代码获取了摄像头：

```
cam = Camera.getCamera();
cam.setQuality(0, 80);
cam.setMode(533, 400, 20); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:06:42.890

Flash 无法控制这一点。这种行为可能与其他凸轮不同。

# android - viewpager 中的多窗格片段

> ID：16086843
> 
> 赞同：4
> 
> 时间：2013-04-18T15:18:46.517
> 
> 标签：android, android-viewpager, fragment, pager

我目前正在开发一个有望像“电子书”播放器一样的应用程序。在阅读了许多与 Fragment 相关的教程后，我决定采用“Fragment/Viewpager”的方法。

更详细一点，我决定遵循 Linden Darling 的关于嵌套片段的精彩教程 https://plus.google.com/100467024733771542884/posts/24HcFW5hEiV。

我为每个单独的书页创建了一个“webview”片段，它有自己的布局。因此，如果我的书由 6 页组成，那么我将拥有 BookPage1Fragment、BookPage2Fragment、BookPage3Fragment、BookPage4Fragment、BookPage5Fragment、BookPage6Fragment 等。我设法让它在 viewpager 中工作，所以所有在片段中滑动等工作正常。问题是，屏幕上一次只能看到一个片段。我想要两个片段（多窗格），在大型设备上运行应用程序时，横向和单窗格（一次一个片段）在较小的设备或纵向视图上运行时。我想显示一个两个窗格布局，其中一个片段左侧和一个片段右侧。

请参见下面的代码：

```
public class ParentFragment extends Fragment {

public static final String TAG = ParentFragment.class.getSimpleName();

public static ParentFragment newInstance() {
return new ParentFragment();
}

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setRetainInstance(true);
}

@Override

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle            savedInstanceState) {
return inflater.inflate(R.layout.fragment_parent, container, false);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
super.onViewCreated(view, savedInstanceState);

ViewPager mViewPager = (ViewPager) view.findViewById(R.id.viewPager);
mViewPager.setAdapter(new MyAdapter(getChildFragmentManager()));
}

public static class MyAdapter extends FragmentPagerAdapter {
public MyAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public int getCount() {
    return 6;
}

/*

@Override
public Fragment getItem(int position) {
    Bundle args = new Bundle();
    args.putInt(TextViewFragment.POSITION_KEY, position);
    return TextViewFragment.newInstance(args);
}

*/

@Override
public Fragment getItem(int position) {
    switch (position) {
    case 0:
        return new BookPage1Fragment();
    case 1:
        return new BookPage2Fragment();
    case 2:
        return new BookPage3Fragment();
    case 3:
        return new BookPage4Fragment();
    case 4:
        return new BookPage5Fragment();
    case 5:
        return new BookPage6Fragment();

    default:
        return getItem(0);
    }
}

@Override
public CharSequence getPageTitle(int position) {
    return "Fragment # " + position;
}

}

} 
```

基本上在横向模式下出现两个片段，在纵向模式下一次出现一个片段，就像 developer.blogspot [http://android-developers.blogspot.in/2011/02/android-30-fragments-上的示例描述的那样api.html](http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html)，但嵌入在 viewpager 中。

这是我的 main.layout。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout> xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     />

</RelativeLayout> 
```

这是我的 webview 片段

```
public class WebViewFragment extends Fragment {

 @SuppressLint("SetJavaScriptEnabled")
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View mainView = (View) inflater.inflate(R.layout.fragment_web, container, false);
        WebView myWebView = (WebView) mainView.findViewById(R.id.webview);
        myWebView.loadUrl("file:///android_asset/Ebook-001.html");

        myWebView.setWebViewClient(new MyWebViewClient());
        myWebView.getSettings().setBuiltInZoomControls(true); 
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setSupportZoom(true);
        myWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);   
        myWebView.getSettings().setAllowFileAccess(true); 
        myWebView.getSettings().setDomStorageEnabled(true);
        myWebView.getSettings().setUseWideViewPort(true);
        myWebView.getSettings().setLoadWithOverviewMode(true);
            return mainView;
        }

    } 
```

这是我的 webview 片段布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

所以总而言之，我想：

1：在viewpager中横向显示两个片段，纵向显示单个。

2：不管设备大小都使用一个activity，并在运行时决定是在布局中合并片段（创建多窗格设计）还是交换片段（创建单窗格设计）

希望这一切都有意义！提前感谢您的任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-01T10:05:23.607

您必须为横向模式创建一个布局文件。您必须在 res 文件夹中创建一个具有 layout-land 名称的文件。在该文件夹中创建一个同名的布局，并将其放置在布局文件中。Android 会在屏幕显示时自动访问它更改为横向模式。

# python - Python按模式拆分字符串

> ID：16086847
> 
> 赞同：6
> 
> 时间：2013-04-18T15:19:00.027
> 
> 标签：python, regex, string, split

我有像`"aaaaabbbbbbbbbbbbbbccccccccccc"`. 字符的数量可能不同，有时字符串内可能会有破折号，例如`"aaaaa-bbbbbbbbbbbbbbccccccccccc"`.

有没有什么聪明的方法可以拆分它`"aaaaa"`，获取它的索引`"bbbbbbbbbbbbbb"`，`"ccccccccccc"`或者只是获取索引，而不遍历每个字符串？如果破折号位于模式之间，则它可以在左侧或右侧结束，只要它始终处理相同。

任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T15:25:37.593

正则表达式`MatchObject`结果包括匹配的索引。剩下的就是匹配重复的字符：

```
import re

repeat = re.compile(r'(?P<start>[a-z])(?P=start)+-?') 
```

仅当给定字母字符 ( `a`- `z`) 至少重复一次时才会匹配：

```
>>> for match in repeat.finditer("aaaaabbbbbbbbbbbbbbccccccccccc"):
...     print match.group(), match.start(), match.end()
... 
aaaaa 0 5
bbbbbbbbbbbbbb 5 19
ccccccccccc 19 30 
```

匹配结果的[`.start()`](http://docs.python.org/2/library/re.html#re.MatchObject.start)and[`.end()`](http://docs.python.org/2/library/re.html#re.MatchObject.end)方法为您提供输入字符串中的确切位置。

匹配中包含破折号，但不包含非重复字符：

```
>>> for match in repeat.finditer("a-bb-cccccccc"):
...     print match.group(), match.start(), match.end()
... 
bb- 2 5
cccccccc 5 13 
```

如果您希望`a-`零件匹配，只需将 替换`+`为`*`乘数：

```
repeat = re.compile(r'(?P<start>[a-z])(?P=start)*-?') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:25:01.343

怎么用`itertools.groupby`？

```
>>> s = 'aaaaabbbbbbbbbbbbbbccccccccccc'
>>> from itertools import groupby
>>> [''.join(v) for k,v in groupby(s)]
['aaaaa', 'bbbbbbbbbbbbbb', 'ccccccccccc'] 
```

这会将`-`它们作为自己的子字符串，这些子字符串很容易被过滤掉。

```
>>> s = 'aaaaa-bbbbbbbbbbbbbb-ccccccccccc'
>>> [''.join(v) for k,v in groupby(s) if k != '-']
['aaaaa', 'bbbbbbbbbbbbbb', 'ccccccccccc'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:35:21.273

```
str="aaaaabbbbbbbbbbbbbbccccccccccc"
p = [0] 
for i, c in enumerate(zip(str, str[1:])):
    if c[0] != c[1]:
        p.append(i + 1)
print p

# [0, 5, 19] 
```

# gwt - GWT，CssStyle被多次注入

> ID：16086848
> 
> 赞同：3
> 
> 时间：2013-04-18T15:19:01.283
> 
> 标签：gwt, uibinder, clientbundle

我使用 ClientBundle 和 CssResources 已经有一段时间了，但注意到我的样式被注入了很多次。我也可以指出的一件事是我使用了很多`<ui:with field='resources' type='com.vf.client.resources.Resources' />`在我的模板中，我怀疑这是在创建我的 clientBundle 的多个副本。甚至可能导致这种情况的一件事是，我使用了 Ray Ryan 将我的视图缓存在我的客户端工厂中的概念，因此某些视图是在附加到 DOM 之前创建的。在我的基本视图中，我在资源上使用提供的=true，以便希望不要让 UiBinder 为我生成一个新的。这可能不起作用，我怀疑并且 ui:with 正在创建一个新副本并忽略提供的=true。我在 Chrome 和 Firebug 中使用了开发人员工具来查看，在这两种情况下，样式都被注入了很多次。不知道如何在不从我的所有 UiBinder 模板中删除我的 Resources 类的情况下解决这个问题，这会做很多工作。任何想法表示赞赏。

```
/**
 * 
 * @author chris
 */
public abstract class ViewImpl extends Composite implements IView, RequiresResize {

    @UiField(provided = true)
    public final Resources resources;

}

public interface Resources extends ClientBundle, CellTable.Resources, CellList.Resources, DataGrid.Resources {

    /**
     * These are the obfuscated styles.
     * 
     * @return
     */
    @Source({ "default.css", "default-external.css"})
    public Style style();
} 
```

**更新**

我一直在使用工厂/单例，只是为了确保它只创建一个。当应用程序启动时，我在我的 ClientFactory 实现中创建了这个 Resources ClientBundle。在我的应用程序开始时，我在我的风格上调用 ensureEnjected，从那时起，我的代码中永远不会调用 ensureInjected。

这是我的工厂，它只是获取我的单身请求工厂。我曾经在我的界面中使用静态初始化程序，但不久前我搬到了这里，希望能解决我的多种样式问题。

```
import com.google.gwt.core.client.GWT;

public class ResourcesFactory {

    private static Resources instance = null;

    private ResourcesFactory() {
    }

    public static final Resources getResources() {
        if (instance == null) {
            instance = GWT.create(Resources.class);
        }

        return instance;
    }
} 
```

我的客户端包仅在此处初始化和注入。

```
 @Override
    public void onModuleLoad() {
        if (Window.Location.getParameterMap().containsKey("debug")) {
            Window.alert("Remote Debugging will be enabled, see server log for debug information");
            RemoteDebugService.enable();    
        }

        try {
            clientFactory = ClientFactory.INSTANCE;
            masterLayoutPanel = clientFactory.getMasterLayoutPanel();
        } catch (Exception e) {
            logger.log(Level.SEVERE, "Unable to instantiate the ClientFactory", e);
            Window.alert("SOMEBODY BROKE THE BUILD, add ?debug to the url to enable remote debugging" + e.getMessage());
        }

        RootLayoutPanel.get().add(masterLayoutPanel);
        StyleInjector.inject(clientFactory.getResources().style().getText());

        PlaceHistoryHandler historyHandler = new PlaceHistoryHandler(clientFactory.getPlaceHistoryMapper());
        PlaceController placeController = clientFactory.getPlaceController();

        // Start PlaceHistoryHandler with our PlaceHistoryMapper
        historyHandler.register(placeController, clientFactory.getEventBus(), defaultPlace);

        startApplication(clientFactory, historyHandler);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T16:26:25.297

到目前为止，我至少发现了一个我做错的问题，这导致我的风格被多次注入。首先是我将 CellTable 和 Datagrid 样式定义在我的单个样式表中，但是在注入这种样式时，它会被多次注入。在下面的代码中，default.css 包含我对整个 Web 应用程序的所有 css 定义，包括单元格表和单元格网格样式。我在应用程序开始时注入了这些，当然 cellTableStyle() 和单元格 dataGridStyle() 注入了整个样式表。

```
public interface Resources extends ClientBundle, CellTable.Resources, CellList.Resources, DataGrid.Resources {

...

    /**
     * {@link CellTable.Style} styles
     */
    @Source("default.css")
    Style cellTableStyle();

    /**
     * {@link DataGrid.Style} styles
     */
    @Source("default.css")
    Style dataGridStyle();

    /**
     * These are the obfuscated styles.
     * 
     * @return
     */
    @Source({ "default.css", "default-external.css" })
    public Style style(); 
...

} 
```

如果以这种方式声明样式，则样式表应分解为单独的样式表，并且仅包含相关样式或实现我的主要样式来实现这些接口并删除额外依赖的样式实现。

```
public interface Resources extends ClientBundle, CellTable.Resources, CellList.Resources, DataGrid.Resources {

...

    /**
     * {@link CellTable.Style} styles
     */
    @Source("celltable.css")
    Style cellTableStyle();

    /**
     * {@link DataGrid.Style} styles
     */
    @Source("datagrid.css")
    Style dataGridStyle();

    /**
     * These are the obfuscated styles.
     * 
     * @return
     */
    @Source({ "default.css", "default-external.css" })
    public Style style(); 
...

} 
```

这是可以将样式传递给 CellTable 样式并且样式只会被注入一次的实现。请注意，该样式实现了所有需要的表格、网格和列表样式。

```
public interface Resources extends ClientBundle, CellTable.Resources, CellList.Resources, DataGrid.Resources {

...

 public interface Style extends CssResource, ProgressWidget.Style, CellTable.Style, CellList.Style, DataGrid.Style {
    ...

}

    /**
     * Single style that can be used for all my cell table resources 
     * and the default styles.
     * 
     * @return
     */
    @Source({ "default.css", "default-external.css" })
    public Style style(); 
...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:09:35.923

多次注射到底是什么意思？

ClientBundle 基本上是 Singleton 的（请参阅此线程[Will 从多个 UiBinders 中引用单个 ClientBundle 类会花费什么？](https://stackoverflow.com/questions/8330660/will-referring-to-a-single-clientbundle-class-from-multiple-uibinders-cost-anyth)）。
因此，您是否使用它甚至都没有关系`provided=true`。

但是，如果您真的想避免使用 ClientBundle 代理，您可以使用`Gin`或 a`Factory`实例化（`GWT.create`或神奇地通过 `@Inject`）`ClientBundle`一次并将其注入您的`Views`，但我猜在编译的代码中它不会有太大的不同。

# excel - 在电子表格中，我想将具有负值的单元格复制到另一个有负值下限的单元格

> ID：16086851
> 
> 赞同：0
> 
> 时间：2013-04-18T15:19:05.040
> 
> 标签：excel, spreadsheet, google-sheets

在电子表格单元格 B1 中，值为 -1200。

我希望单元格 B2 复制 B1 的值并将其限制（验证？）不小于 -800。

我正在使用谷歌文档，但如果这些功能在谷歌文档中不可用，我也可以使用 excel。

编辑：如果 B1 的值为 2000，则 B2 的值应为 2000。如果 B1 的值为 -2000，则 B2 的值应为 -800

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:30:58.397

Excel & Google Spreadsheets

```
=Max(B1,-800) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:26:37.817

Excel 公式会很简单，在 Google 电子表格中可能类似：

在 B2 中，输入这个公式：

`=If(B1<-800,-800,B1)`

这是在说：

如果 B1 中的值*小于*-800，则输入值“-800”。否则，使用 B1 中的值。这有效地为公式设置了“下限”或下限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T15:30:17.723

You don't need any maths here. I'm using Excel but I think it is pretty similar in Google.

Suppose that B3 holds floor, no constants in formulae :-)

B2 => =if( b1 > $b$3; b1; $b$3)

b3 position is fixed so you can copy the expression

# asp.net - 十进制值变成另一个值

> ID：16086854
> 
> 赞同：1
> 
> 时间：2013-04-18T15:19:13.023
> 
> 标签：asp.net, parameters, sqldatasource

为什么当我将此参数传递给 sqldatasource 参数时，我看到正确的默认值但参数值不正确？我不知道这两种类型的参数之间的区别，我一直认为默认值是我感兴趣的。我想发送数据库值 7.5 而不是 75，有人可以帮我吗？

```
Parameter prm_prezzo = new Parameter("cc_prezzo", DbType.Decimal, newValues["PREZZO"].ToString().Replace(",", ".")); 
```

![在此处输入图像描述](https://i.stack.imgur.com/ASfas.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:03:36.037

解决了，但我会让专家考虑一下，因为我不清楚：

我发布的第一条指令将“，”替换为“。” 因为没有替换“，”转义存储过程

这样做...

```
Parameter prm_prezzo = new Parameter("cc_prezzo", DbType.Decimal);
prm_prezzo.DefaultValue = newValues["PREZZO"].ToString(); 
```

...我有正确的值并且存储过程没有转义...

但我不明白这两种方法之间的区别：-0

# android - 在 TextView.setText() 中获取 applicationContext

> ID：16086855
> 
> 赞同：0
> 
> 时间：2013-04-18T15:19:16.417
> 
> 标签：android, nullpointerexception, textview, subclass

我正在构建一个`TextView`子类来更改插入到`android:text`. 例如，我想将整个文本大写，但为了确保需要它，我需要访问 Application 实例（我有一个布尔值来判断它是否必须大写）。

我实现了这个子类：

```
public class UpperTextView extends TextView {

private Context context;

public UpperTextView(Context context) {
    super(context);
    this.context = context;
}

public UpperTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    this.context = context;
}

public UpperTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;
}

@Override
public void setText(CharSequence text, BufferType type) {
    //I get a NullPointerException here since var context is null
    Context applicationContext = context.getApplicationContext();

    if (text != null && applicationContext instanceof MyApplication && applicationContext.doUppercase()) {

        MyApplication myApp = (MyApplication) applicationContext;
        myApp.getLanguagesController().getLocalizedString(text.toString().toUpperCase());
    }
    super.setText(text, type);
}
} 
```

在布局中，我有这样声明

```
 <my.package.UpperTextView
            android:id="@+id/foo"
            android:text="bar"/> 
```

调用时出现 NullPointerException `context.getApplicationContext()`。

有人已经遇到过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:28:48.020

我认为你应该试试这个：

```
this.getContext().getApplicationContext() 
```

这不应该返回空指针异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:21:37.483

检查下面的链接以了解何时使用 getApplicationContext() 以及何时使用 Activity Context

[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context)

大多数时候最好使用 Activity 上下文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:23:33.063

这是不正确的本地化方式。检查以下链接：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

# .net - HttpWebRequest.Timeout 是 SendTimeout 还是 ReceiveTimeout？

> ID：16086856
> 
> 赞同：0
> 
> 时间：2013-04-18T15:19:18.177
> 
> 标签：.net, sockets, httpwebrequest

我猜内部**HttpWebRequest**类是使用`System.Net.Sockets.Socket`类实现的。

如果是，那么设置其`Timeout`属性的等价物是什么？设置它的[*socket.SendTimeout*](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.sendtimeout.aspx)属性，或者更确切地说是[*socket.ReceiveTimeout*](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx)属性？

PS：请不要通过反编译代码来回答这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:56:22.287

对于 WCF 请求，您可以在配置请求绑定时设置 Send 或 ReceiveTimout。

根据您正在执行的操作（TCP、HTTP/s、管道等），有许多不同的绑定类型，但通常设置超时如下所示：

```
Dim xbinding As System.ServiceModel.NetTcpBinding = _
          New System.ServiceModel.NetTcpBinding    

With xbinding
   .SendTimeout = New TimeSpan(0, 10, 0)
   .ReceiveTimeout = New TimeSpan(0, 10, 0) ' ten minutes
   ' you can also set your message limits and such in here. 
End With 
```

显然，您在主机方面做了同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:01:55.117

[WebRequest.Timeout 属性文档](http://msdn.microsoft.com/en-us/library/system.net.webrequest.timeout.aspx)中的备注部分说：

> Timeout 属性仅影响使用 GetResponse 方法发出的同步请求。

这表明您正在接收数据，这意味着设置它类似于设置套接字的`ReceiveTimeout`属性。

也就是说，后来的评论指出：

> WebRequest 类是一个抽象类。WebRequest 实例在运行时的实际行为由 WebRequest.Create 方法返回的后代类确定。有关默认值和异常的更多信息，请参阅后代类的文档，例如 HttpWebRequest 和 FileWebRequest。

所以它真的取决于具体的类。[例如， HttpWebRequest.Timeout](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)的行为有些不同。

在这种情况下`HttpWebRequest`，`Timeout`调用时，本质上是一个套接字接收缓冲区超时`GetResponse`。但`Timeout`也适用于`GetRequestStream`，它没有真正的 Socket 类似物。再次注意，这仅适用于*同步*请求。

# apache - 如何从 apache web 服务器引用 apache cxf 库

> ID：16086860
> 
> 赞同：2
> 
> 时间：2013-04-18T15:19:26.037
> 
> 标签：apache, service, web, classpath, cxf

当我使用 Eclipse 部署我的 apache cxf Web 服务时，我必须在 Web 部署程序集中包含 apache cxf 库，以便它在我的生产 apache Web 服务器上部署它时工作。这是一个问题，因为它使war 文件非常大，因为包含了cxf 库。如果我排除该库，war 文件会小得多，但即使 apache cxf 库位于实时服务器上，当它部署在实时服务器上时 Web 服务也不起作用。

我的假设是我需要某种类路径引用，以便实时服务器可以看到 apache cxf 安装，但我不熟悉如何执行此操作，因为我是 apache 新手。

谢谢，杰西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T02:15:35.003

将 cxf jar 放在文件夹 tomcat/lib 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T20:55:47.087

好的，这个解决方法对我有用：

我们可以在文件中的`common.loader`变量上设置 CXF lib 路径。`$CATALINA_HOME/conf/catalina.properties`您可以添加（在逗号之后）如下内容：

```
common.loader=....,/path/to/cxf/home/lib/*.jar 
```

我找不到在 tomcat 上设置环境变量的方法，以便获得类似：`${cxf.home}/lib/*.jar`. 我试着`-Dcxf.home=$CXF_HOME`在几个地方放了，`catalina.sh`但它从来没有把它捡起来:(-希望以后有人能帮忙。

重启tomcat，它会占用cxf jars

# c - 当使用 -Wmissing-prototypes 时，如何抑制 GCC 警告没有中断例程的原型？

> ID：16086863
> 
> 赞同：2
> 
> 时间：2013-04-18T15:19:30.730
> 
> 标签：c, embedded, compiler-warnings, interrupt, mplab

我正在使用 MPLABX（Microchip 产品的 IDE）和 XC16 编译器（基于 GCC）在 C 中编写嵌入式代码。

我`-Wmissing-prototypes`用来确保我的所有功能都有原型。我的问题是我有很多中断服务例程，这导致编译器也抱怨缺少这些的原型。

因为用户软件从不直接调用 ISR 函数，所以我不想将它们的原型放在我的代码中的任何位置。

*除了*中断服务例程（即，用 标记的函数）之外，有什么方法可以显示缺少原型的警告`__attribute__((interrupt,auto_psv))`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:37:54.100

我听从了 Carl Norum 的建议，只是在函数定义的正上方添加了函数原型。

举个例子：

```
void __attribute__((interrupt,auto_psv)) _SPI2ErrInterrupt(void);
void _SPI2ErrInterrupt(void)
{
    // Do ISR stuff...
} 
```

# sql - MongoDB中的SQL查询

> ID：16086864
> 
> 赞同：0
> 
> 时间：2013-04-18T15:19:34.147
> 
> 标签：sql, mongodb

我只想做这个简单的事情，但 Eclipse 不会让我使用 find() 方法，我不明白为什么这是它在 mongodb.org 上解释的方式。有人能看到我做错了什么吗？它是folk.find() 方法，只要我不在那里设置任何条件它就可以工作（namn：“Robert”）

```
Mongo mongo= new Mongo();
DB db = mongo.getDB("Helly");
long startTime= System.currentTimeMillis();
DBCollection folk = db.getCollection("folk");
BasicDBObject document = new BasicDBObject();
document.put("namn", "Robert");
document.put("efternamn", "Brismo");
document.put("ålder", 34);

BasicDBObject documentDetail = new BasicDBObject();
documentDetail.put("ålder", 47);
documentDetail.put("hårfärg", "brun");
documentDetail.put("skostorlek", "44");

document.put("Utseende", documentDetail);
folk.insert(document);
DBCursor cursor= folk.find({namn:"Robert"});
while(cursor.hasNext()){
DBObject obj=cursor.next();
System.out.println(obj);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:41:21.837

要对 查询进行查找`namn`，您需要使用 的实例`BasicDBObject`并将其用作查询：

```
BasicDBObject query = new BasicDBObject("namn", "Robert");
DBCursor cursor= folk.find(query);
try {
    while(cursor.hasNext()) {
       // .. do something
       System.out.println(cursor.next());
    }
}
finally {
    cursor.close();
} 
```

[入门文档](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-java-driver/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T00:30:58.493

另一种选择是使用 QueryBuilder 类，如下所示。

```
// Connect to the Mongo database
Mongo mongoConn = new Mongo("localhost", 27017);
DB mongoDb = mongoConn.getDB("TESTDB");
DBCollection collection = mongoDb.getCollection("folk");

// Building the query parameters
QueryBuilder qFinder= new QueryBuilder();
qFinder.put("name").is("Robert");

// Fetching the records for the query. get() method will convert QueryBuilder -&gt; DBObject class of query parameters
DBCursor dbCursor = collection.find(qFinder.get());

while(dbCursor.hasNext()) {
// Do something with the code
System.out.println(dbCursor.next());
} 
```

querybuilder 的优点是您可以轻松链接查询，例如 qFinder.put("name").is("Robert").and("age").gt(25); 等等。参考：[我的博文](https://dpancs.wordpress.com/2014/11/11/mongodb-java-driver-querybuilder-class/)

# delphi - 是否有必要从通用容器管理 TEnumerator 的生命周期？

> ID：16086867
> 
> 赞同：4
> 
> 时间：2013-04-18T15:19:41.133
> 
> 标签：delphi

如果我调用对象的`GetEnumerator`方法`Generics.Collections`，是否需要在完成后显式释放枚举器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T15:20:54.070

是的，您确实需要释放枚举器。谁打电话`GetEnumerator`就拥有它返回的东西。

当它是一个`for/in`循环时，编译器编写代码并确保枚举器对象被释放。当你调用它时，你的工作就是处理枚举器。

这实际上是一个非常容易为自己回答的问题。只需创建一个调用它`GetEnumerator`并失败的程序`Free`。使用内存管理器的工具来检查对象是否泄漏。

```
uses
  System.Generics.Collections;

begin
  ReportMemoryLeaksOnShutdown := True;
  with TList<Integer>.Create do
  begin
    GetEnumerator;
    Free;
  end;
end. 
```

这导致以下泄漏报告：

> 发生了意外的内存泄漏。意外的小块泄漏是：
> 
> *   13 - 20 字节：TList.TEnumerator x 1

# youtube-api - 为什么从 YouTube 数据 API 返回的视频说明会被截断？

> ID：16086868
> 
> 赞同：3
> 
> 时间：2013-04-18T15:19:46.540
> 
> 标签：youtube-api

根据这个：

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/aA-w-I0Eduo](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/aA-w-I0Eduo)

我需要向[http://gdata.youtube.com/feeds/api/users/USERNAME/uploads](http://gdata.youtube.com/feeds/api/users/USERNAME/uploads)发出经过身份验证的请求，以获得完整的描述。这行得通。但是，当我在 URL 中添加任何 API 参数时，描述会恢复为截断形式。例如

[https://gdata.youtube.com/feeds/api/users/USERNAME/uploads?orderby=published](https://gdata.youtube.com/feeds/api/users/USERNAME/uploads?orderby=published)

关于如何将这些参数放入请求并仍然获得完整描述的任何想法？这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T21:06:29.690

[这篇博](http://youtube-eng.blogspot.com/2012/03/keeping-things-fresh_23.html)文对此进行了解释；添加这些参数会更改您的请求，使其违反搜索索引，该索引具有截断的描述。

# c# - Assert.That 与 Assert.True

> ID：16086870
> 
> 赞同：41
> 
> 时间：2013-04-18T15:19:50.103
> 
> 标签：c#, unit-testing, nunit

更喜欢什么：

```
Assert.That(obj.Foo, Is.EqualTo(true)) 
```

或者

```
Assert.True(obj.Foo) 
```

对我来说，这两个断言都是等价的，那么应该首选哪一个？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-18T15:23:38.463

在这种特殊情况下，没有区别：您将看到大致相同详细程度的输出（即，它告诉您预期评估为的事物`true`已评估为`false`）。同样适用

```
Assert.IsTrue(obj.Foo); 
```

和

```
Assert.That(obj.Foo, Is.True); 
```

您的团队应该选择一种断言风格，并在所有测试中坚持使用它。如果您的团队更喜欢这种`Assert.That`风格，那么您应该使用`Assert.That(obj.Foo, Is.True)`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-18T16:04:08.430

`Assert.That`称为基于约束的模型。它很灵活，因为该方法采用`IConstraint`类型参数。这意味着您可以使用更通用的层次结构或调用结构来构建代码，传入任何旧的`IConstraint`. 这意味着您可以构建自己的[自定义约束](http://www.nunit.org/index.php?p=equalConstraint&r=2.5.8)

那是设计问题。正如大家所说，无论您做什么，仍然需要提供体面的错误消息反馈。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-18T15:34:57.137

好吧，你在 CI 服务器上执行了你的测试套件，不幸的是，其中一个失败了。您打开日志并查看下一条消息

> ```
> BusinessLogicTests.LoginTests.UserAutoLoginTests failed: expected true but was false 
> ```

现在，如果您看到的所有信息都是 AutoLoginTests bool 中的某个地方预期为真，但收到错误，那么您到底怎么会得到这个测试发生的错误？现在您需要转到测试用例的源文件并查看哪些断言失败了。你看

```
Assert.True(obj.Foo) 
```

令人惊讶的是.. 仍然很难判断出了什么问题，除非您在 1 小时前开发了这个模块。您仍然需要更深入地研究测试源和可能的生产源，甚至调试您的代码，以便您最终弄清楚，您在函数调用中拼错了变量或使用了错误的谓词来过滤注册用户。因此，您阻止了测试的即时反馈，这是非常有价值的。

我的观点是，你的断言有多流畅（这也是相关的）并不重要，但在测试失败的情况下你暴露了什么信息以及你能多快得到失败的根本原因，即使你工作了很长时间以前有这个功能

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-18T15:26:13.020

这有点挑剔，但恕我直言，我认为在这种情况下`Assert.That`是不必要的冗长，因此可以被视为混淆。换句话说，`Assert.True`它更简洁、更直接、更易于阅读和理解。

为了更挑剔一点，我建议使用`Assert.IsTrue`API 而不是`Assert.True`因为，恕我直言，`IsTrue`“阅读”更好。

# c# - 按字母顺序序列化 JSON

> ID：16086873
> 
> 赞同：2
> 
> 时间：2013-04-18T15:20:04.910
> 
> 标签：c#, json, string, serialization, deserialization

情况就是这样，我首先从模型的每个类的对象中生成 2 个 JSON。一个 JSON 来自我当前的模型版本，另一个来自它的先前版本。我的工作是比较每个 JSON 以找出 2 个模型之间的差异。

问题是，对象的属性没有按照从一个 JSON 到另一个 JSON 的相同顺序序列化。

有没有办法两个按字母顺序序列化一个具有所有属性的对象，这样我就可以轻松地比较两个字符串？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:36:24.203

如果您只想对 2 个 json 字符串进行一次比较，则网络上有此资源

[http://tlrobinson.net/projects/javascript-fun/jsondiff](http://tlrobinson.net/projects/javascript-fun/jsondiff)

在 Json.Net 中，JToken 上有一个 DeepEquals 可用。

```
var json1 = JToken.Parse(jsonString1);
var json2 = JToken.Parse(jsonString2);
var jsonEqual = JToken.DeepEquals(json1, json2); 
```

如果您想完全按照您的要求订购序列化，请参阅这篇文章。

[https://stackoverflow.com/a/11309106/1181408](https://stackoverflow.com/a/11309106/1181408)

更新 - 显示订单序列化工作正常。

```
public class OrderedContractResolver : DefaultContractResolver
{
    protected override System.Collections.Generic.IList<JsonProperty> CreateProperties(System.Type type, MemberSerialization memberSerialization)
    {
        return base.CreateProperties(type, memberSerialization).OrderBy(p => p.PropertyName).ToList();
    }
}

public class JsonSerializationTest1
{
    public string Test1 { get; set; }
    public string MyTest2 { get; set; }
    public string Test2 { get; set; }
    public string Test10 { get; set; }
}

public class JsonSerializationTest2
{
    public string Test10 { get; set; }
    public string Test1 { get; set; }
    public string MyTest2 { get; set; }
    public string Test2 { get; set; }
}

[TestMethod]
    public void TestJsonOrder()
    {
        var test1 = new JsonSerializationTest1 { Test1 = "abc", MyTest2 = "efg", Test10 = "hij", Test2 = "zyx" };
        var test2 = new JsonSerializationTest2 { Test1 = "abc", Test10 = "hij", Test2 = "zyx", MyTest2 = "efg" };

        var test1Json = JsonConvert.SerializeObject(test1);
        var test2Json = JsonConvert.SerializeObject(test2);

        Assert.AreNotEqual(test1Json, test2Json);

        var settings = new JsonSerializerSettings()
        {
            ContractResolver = new OrderedContractResolver()
        };

        var json1 = JsonConvert.SerializeObject(test1, Formatting.Indented, settings);
        var json2 = JsonConvert.SerializeObject(test2, Formatting.Indented, settings);

        Assert.AreEqual(json1, json2);

    } 
```

# matlab - MATLAB 查找并将函数应用于重复索引的值

> ID：16086874
> 
> 赞同：2
> 
> 时间：2013-04-18T15:20:10.067
> 
> 标签：matlab, matrix, mean

我有一个 352x11 矩阵，由具有 10 个数据点的第 1 列索引。一些索引值是重复的。我想找到重复的索引并计算重复试验的平均数据点（如果可能的话，避免循环）。

例如，

```
x =

   26   77.5700   17.9735   32.7200
   27   40.5887   16.6100   31.5800
   28   60.4734   18.5397   33.6200
   28   35.6484   27.2000   54.8000
   29   95.3448   19.0000   37.7300
   30   82.7273   30.4394   39.1400 
```

最终得到：

```
ans =

   26   77.5700   17.9735   32.7200
   27   40.5887   16.6100   31.5800
   28   48.0609   22.8699   44.2150
   29   95.3448   19.0000   37.7300
   30   82.7273   30.4394   39.1400 
```

我在想如果我用

```
J = find(diff(x(:,1))==0); 
```

为了找到重复值的位置，我可以将函数应用到 的相应位置`x`，但是我从哪里开始呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:40:28.233

一种更通用的方法将`unique`用于查找唯一索引值：

```
[U, ix, iu] = unique(x(:, 1)); 
```

然后`accumarray`：

```
[c, r] = meshgrid(1:size(x, 2), iu);
y = accumarray([r(:), c(:)], x(:), [], @mean); 
```

### 解释

要处理的输入值实际上是 的*第二个*参数`accumarray`。

的*第一个*参数`accumarray`是一个矩阵，每一行是（累积的）输出矩阵中的一组索引，它对应于作为第二个参数给出的向量中匹配行的一个值。

将输出视为元胞数组。第二个参数是输入值，第一个参数中的每一行告诉输出矩阵的哪个单元格`accumarray`应该存储相应的输入值。当输出“单元格数组”完成时，一个函数（`mean`在我们的例子中）被应用于每个单元格。

### 例子

这是一个带有较小矩阵的简短示例：

```
x = [27, 10, 8;
     28, 20, 10;
     28, 30, 50]; 
```

我们通过以下方式找到唯一值：

```
[U, ix, iu] = unique(x(:, 1)); 
```

Vector`U`存储唯一值，并`iu`指示与每一行关联的值的索引（请注意，在此解决方案中，我们没有使用 for `ix`）。在我们的例子中，我们得到：

```
U = 
    27
    28

iu =
    1
    2
    2 
```

现在我们申请`accumarray`：

```
[c, r] = meshgrid(1:size(x, 2), iu);
y = accumarray([r(:), c(:)], x(:), [], @mean); 
```

`meshgrid`使用并`[r(:), c(:)]`产生一组索引的花哨技巧：

```
[r(:), c(:)] =
     1     1
     2     1
     2     1
     1     2
     2     2
     2     2
     1     3
     2     3
     2     3 
```

这些是输入值的索引`x(:)`，它是等价于的列向量`x`：

```
x(:) =
    27
    28
    28
    10
    20
    30
     8
    10
    50 
```

积累过程：

*   第一个值 27 进入输出矩阵中的单元格 <1,1>。
*   第二个值 28 进入输出矩阵中的单元格 <2,1>。
*   第三个值 28 进入输出矩阵中的单元格 <2,1>。

看看刚刚发生了什么？两个值 28 在同一个单元格中累积（最终它们将被平均）。该过程继续：

*   第四个值 10 进入输出矩阵中的单元格 <1,2>。

等等...

一旦所有值都存储在单元格中，该函数`mean`将应用于每个单元格，我们得到最终的输出矩阵：

```
y =
    27    10     8
    28    25    30 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T15:37:41.817

您可以应用`accumarray`到多个列[，如此处所示](https://stackoverflow.com/questions/4350735/is-there-an-accumarray-that-takes-matrix-as-val)

```
labels = x(:,1) - min(x(:, 1)) + 1; 
labels = [repmat(labels(:),size(x,2),1), kron(1:size(x,2),ones(1,numel(labels))).'];             
totals = accumarray(labels,x(:),[], @mean); 
```

这是改编自[Gnovice 的](https://stackoverflow.com/users/52738/gnovice)代码。

为了让它适用于您的代码，您需要删除前面的所有零

```
totals(find(mean((totals == zeros(size(totals)))')), :) = []; 
```

这导致所需的

```
 26.0000   77.5700   17.9735   32.7200
   27.0000   40.5887   16.6100   31.5800
   28.0000   48.0609   22.8699   44.2100
   29.0000   95.3448   19.0000   37.7300
   30.0000   82.7273   30.4394   39.1400 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:31:43.513

您可能会发现[`accumarray`](http://www.mathworks.com/help/matlab/ref/accumarray.html)有用`@mean`：

假设第一列包含`1 .. k`some的值`k <= size(x,1)`，您可以使用计算输出的每一列

```
col = accumarray( x(:,1), x(:,2), [], @mean ); % second column 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:37:27.337

给你输入

```
x = [ ...
    26   77.5700   17.9735   32.7200; ...
    27   40.5887   16.6100   31.5800; ...
    28   60.4734   18.5397   33.6200; ...
    28   35.6484   27.2000   54.8000; ...
    29   95.3448   19.0000   37.7300; ...
    30   82.7273   30.4394   39.1400]; 
```

您可以使用`unique`.

```
%Get index of unique values (1 - N)
[~, ~, ix] = unique(x(:,1)) 
```

然后你可以使用这个数组来重建你的矩阵，将重复的值与你选择的函数结合起来。

```
%Use accumarry to rebuild the matrix one column at a time
result = [...
    accumarray( ix, x(:,1), [], @max )  ...  %Many functions works here, as all inputs are the same.  E.G.  @mean, @max, @min
    accumarray( ix, x(:,2), [], @mean ) ...  %Use mean to combine data, per problem statement.
    accumarray( ix, x(:,3), [], @mean ) ...
    accumarray( ix, x(:,4), [], @mean ) ...
    ] 
```

# xml - 如何从 data.frame R 生成 xml

> ID：16086878
> 
> 赞同：1
> 
> 时间：2013-04-18T15:20:22.697
> 
> 标签：xml, r, dataframe

我想从 R 中的数据框生成一个 xml 文件。这是一个示例：

数据框

```
x y z
1 2 'bla'
3 4 'blou'
5 7 'bli' 
```

xml结果：

```
 <xml>
    <tuple x="1" y="2" z="bla" \>
    <tuple x="3" y="4" z="blou" \>
    <tuple x="5" y="7" z="bli" \>
 </xml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:43:55.517

这是您正在寻找使用该`XML`软件包的内容

```
dat <- data.frame(x=c(1,3,5), y=c(2,4,7), z=c("bla", "blou", "bli"))
dat$z <- as.character(dat$z)
library(XML)
top <- newXMLNode("xml")
newXMLNode("tuple", attrs = dat[1,], parent = top)
newXMLNode("tuple", attrs = dat[2,], parent = top)
newXMLNode("tuple", attrs = dat[3,], parent = top)
top 
```

给出输出：

```
<xml>
 <tuple x="1" y="2" z="bla"/>
 <tuple x="3" y="4" z="blou"/>
 <tuple x="5" y="7" z="bli"/>
</xml> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:48:23.900

也许这样的事情会有所帮助：

```
d <- data.frame(x=1:3, y=3:5, z=c("foo", "bar", "baz"))
cat(paste("<xml>", paste('<tuple x="', d$x, '" y="', d$y, '" z="', d$z, '" \\>"', sep="", collapse="\n"), "</xml>", sep="\n"), "\n")
## <xml>
## <tuple x="1" y="3" z="foo" \>"
## <tuple x="2" y="4" z="bar" \>"
## <tuple x="3" y="5" z="baz" \>"
## </xml> 
```

# python - Python 2.7 中的线程

> ID：16086881
> 
> 赞同：1
> 
> 时间：2013-04-18T15:20:30.943
> 
> 标签：python, multithreading, global-variables

我是 Python 新手。我试图用一个强大的读者优先级来编写读写器问题，由于某种原因，python 不考虑我的全局变量'nor'。线程定义有问题吗？

```
import threading

readers=threading.BoundedSemaphore(1)

writers=threading.BoundedSemaphore(1)

mutex=threading.BoundedSemaphore(1)

nor=0
class reader(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
    def run(self):
        while(1):
            writers.acquire()
            mutex.acquire()
            if(nor==0):
                readers.acquire()
            nor=nor+1
            mutex.release()

            print "I just read\n"

            mutex.acquire()
            if(nor==1):
                readers.release()

            nor=nor-1
            mutex.release()
            writers.release()

class writer(threading.Thread):
  def _init__(self):
          threading.Thread.__init__(self)
  def run(self):
      while(1):        
         writers.acquire()
         readers.acquire()

        print "I just wrote\n"

        writers.release()
        readers.release()

r1=reader()
r2=reader()
r3=reader()
w1=writer()
w2=writer()

r1.start()
r2.start()
r3.start()
w1.start()
w2.start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:24:38.443

尝试小费

```
global nor 
```

在你的课堂内，在 nor 调用之前。后

```
def run(self): 
```

# javascript - Highcharts.js DateTime on x axis coming from JSON only displays number

> ID：16086888
> 
> 赞同：3
> 
> 时间：2013-04-18T15:21:02.667
> 
> 标签：javascript, asp.net-mvc, datetime, highcharts

I'm struggling with a simple line graph with highcharts.js. I have some json data coming in from an asp.net mvc controller:

```
public JsonResult GetSensorLineData(string SensorName)
    {
        List<SensorMeasurement> result= this.SQLSensorMeasuresRepository.FindAllMeasurements(SensorName).ToList();

        List<string> days = new List<string>();
        List<decimal> values = new List<decimal>();

        foreach (var item in result)
        {
            values.Add(item.Value);
            days.Add(item.DateTime.ToString());
        }

        dynamic data = new
        {
            Categories=days,
            Values = values
        };

        return Json(data, JsonRequestBehavior.AllowGet);
    } 
```

In my cshtml file I'm doing this:

```
 homeDataService.init('@this.BaseUrl()');

        homeDataService.getTemperatureLineData("Roomtemperature", function myfunction(data) {
            var dataCategories=[];

            for (var i = 0; i < data.Categories.length; i++) {
                var strVal = data.Categories[i];
                var dateTimeParts = strVal.split(" ");
                var datePart = dateTimeParts[0];
                var timePart = dateTimeParts[1];

                var dateParts = datePart.split(".");
                var timeParts = timePart.split(":"); //german DateTime String coming from ASP.NET

                var date = new Date(dateParts[2], (dateParts[1] - 1), dateParts[0], timeParts[0], timeParts[1]);
                data.Categories[i]=(date.getTime());

            }
            var chart;
            $('#temperature-line').highcharts({
                chart: {
                    type: 'line'
                },
                title: {
                    text: ''
                },
                subtitle: {
                    text: ''
                },
                xAxis: {
                    type: 'datetime',
                    categories:data.Categories,
                    minorTickInterval: 10,
                    minTickInterval:10,

                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Temperature'
                    }
                },

                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Temperature',
                    data: data.Values
                }]
            });

        }); 
```

As you can see I'm transforming the german datetime so that highcharts can interpret it. However it doesn't. I only get this output: ![enter image description here](https://i.stack.imgur.com/SywkZ.png)

UPDATE: Ok now I'm returning from the Controller:

![enter image description here](https://i.stack.imgur.com/uPXru.png)

and I changed the chart code to (see below) but when I run this the browser just hangs. What am I doing wrong?

```
var chart;
            $('#temperature-line').highcharts({
                chart: {
                    type: 'line'
                },
                title: {
                    text: ''
                },
                subtitle: {
                    text: ''
                },
                xAxis: {
                    type: 'datetime'

                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Temperature'
                    }
                },

                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Temperature',
                    data: data
                }]
            });

        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:38:42.843

You can't use a datetime axis and categories together - it's strictly one or the other for axis type.

You will need to either remove the categories, and send your timestamps as your data x values, or format the dates the way you want them displayed and use them as categories.

If you are displaying time series data, it always makes more sense to use the datetime values instead of categories.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T07:11:17.710

Use this code

Datetime.TimeOfDay.TotalMilliseconds

```
 var StatusOK = from u in counters
     where u.StatusID == 1
     select new { x = LogDate.Value.TimeOfDay.TotalMilliseconds, y = u.CountOK };

return jScript.Serialize(counters.ToArray()); 
```

or

```
(DateTime.Now-new DateTime(1970,1,1)).TotalMilliseconds 
```

and set in Highcharts for compatible with .NET Datetime Type:

```
 Highcharts.setOptions({
        global: { useUTC: true } }); 
```

and set xAxis in Highcharts :

```
 xAxis: {
        type: 'datetime',
        tickPixelInterval: 100, 
        maxZoom:  60 
    }, 
```

# perl - Perl 中的 DBI fetchrow_array 方法是否有任何最大大小限制？

> ID：16086895
> 
> 赞同：-2
> 
> 时间：2013-04-18T15:21:29.187
> 
> 标签：perl, dbi

我正在使用模块中的`fetchrow_array`方法[`DBI`](https://metacpan.org/module/DBI)使用 Perl 获取一些数据。

它最多获取 850,000 行，但数据的实际大小为 640 万行。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:05:46.303

我假设您的意思是`fetchall_arrayref`因为这些`fetchrow_*`方法一次返回 1 行。

您是否[按照文档](https://metacpan.org/module/DBI#fetchall_arrayref)的建议检查了错误？

> 如果发生错误，fetchall_arrayref 会返回到目前为止获取的数据，可能没有。您应该在之后检查 $sth->err（或使用 RaiseError 属性）以发现数据是否完整或由于错误而被截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T01:53:06.040

显然 fetchrow_array 内存不足。我在我的应用程序中看到了这一点。尝试选择一个 OUTFILE。

# ios - 调用 UIActivityViewController 后 UIView 消失

> ID：16086898
> 
> 赞同：1
> 
> 时间：2013-04-18T15:21:42.517
> 
> 标签：ios, uiview, interface-builder, uiactivityviewcontroller

我的视图控制器中有两个子视图，都嵌入在 UIScrollview 中。其中一个是 UIView 的子类，另一个是在界面构建器中创建的，其中包含按钮等，但也被我的视图控制器引用...

我使用共享按钮来调用 UIActivityViewController 工作正常。唯一的问题是当我点击 Facebook/Twitter 并分享图像时（效果很好） - 它消失了，但是当我返回时，我在 IB 中创建的 UIView 不可见，它的任何按钮/元素等也不可见。

我在 UIActivity 的完成处理程序中做了一个 nslog，它仍然存在，没有隐藏，并且它的所有子视图的计数返回 19。还要检查它的框架，这很好，所以我不知道它为什么不显示。

非常感谢任何帮助！

```
NSString *textToPost = @"Text to post";
UIImage *anImage = [self.player imageOfView];
NSArray *activityItems = @[textToPost, anImage];

UIActivityViewController *activityVC = [[UIActivityViewController alloc]initWithActivityItems:activityItems applicationActivities:nil];
activityVC.excludedActivityTypes = @[UIActivityTypePrint];

[self presentViewController:activityVC animated:YES completion:nil];
[activityVC setCompletionHandler:^(NSString *activityType, BOOL completed) {
    NSLog(@"input view status %i/n number of subviews%i", self.inputView.hidden, [self.inputView.subviews count]);
    NSLog(@"%@", NSStringFromCGRect(self.inputView.frame));

}]; 
```

输出：

输入视图状态 0/n 子视图数19 {{0, 0}, {320, 438}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:29:25.483

well if all are there then may be subview hides by some other view so try with `bringSubviewToFront`: it may be helps you.

```
 [yourview bringSubviewToFront:self.view]; 
```

# mysql - 用于查找差异的 MySQL 语法

> ID：16086899
> 
> 赞同：0
> 
> 时间：2013-04-18T15:21:45.390
> 
> 标签：mysql

我有两个不同列的表。但有些列是相同的。假设`first_name`, `last_name`,`email`这两张表是一样的。

*   `table 1`已满。
*   `table 2`正在由表单填写，因此它将始终小于或等于`table 1`.

我需要帮助编写一个查询，以便我检查`table 2`并`table 1`返回所有缺失的`first_name`, `last_name`, , , `email`,`table 1`尚未在`table 2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:26:11.710

不确定此请求是否可行，您可以尝试一下：

```
SELECT first_name, last_name, email 
FROM table1 t1
LEFT JOIN table2 t2 ON t1.email = t2.email
WHERE t2.email IS NULL; 
```

# grails - Grails Cassandra ORM

> ID：16086901
> 
> 赞同：0
> 
> 时间：2013-04-18T15:21:48.390
> 
> 标签：grails, orm, cassandra

我正在尝试使用 Cassandra ORM 插件将 Grails 中的域对象持久保存到 Cassandra 数据库。我之前使用 GORM 成功地将其持久化到 H2，但是我想尝试一下 Cassandra。

对象定义如下：

```
 package gibb1

class newCassa {
    UUID uuid
    String name
    String score

     static cassandraMapping = [
            primaryKey: "uuid", // Want "payID" primaryKey, but right now it might not even be present.
            explicitIndexes: ["name"]           
    ]
} 
```

但是我收到以下错误：

```
| Error 2013-04-18 11:04:16,533 [localhost-startStop-1] ERROR CassandraOrmGrailsPlugin  - Exception adding ORM methods to gibb1.newCassa 
```

我在这里发布问题是因为我找不到插件开发者的联系信息： [https ://github.com/bflorian/cassandra-orm](https://github.com/bflorian/cassandra-orm)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:26:20.093

使用 cassandra ORM 插件，您必须手动创建列族，如果未正确创建列族，则会引发奇怪的错误。

您是否创建了任何列族？

# c# - 如何对 Web Api 操作进行后调用？

> ID：16086903
> 
> 赞同：2
> 
> 时间：2013-04-18T15:21:49.767
> 
> 标签：c#, asp.net, asp.net-web-api

我创建了一个 Web API 操作，如下所示

```
[HttpPost]
public void Load(string siteName, string providerName, UserDetails userDetails)
{
// implementation
} 
```

我为此注册的路线如下（不确定是否正确？）：

```
 config.Routes.MapHttpRoute(
             name: "loadUserDetails",
             routeTemplate: "sites/{siteName}/User/Load/{providerName}/{userDetailsList}",
             defaults: new
             {
                 controller = "User",
                 action = "Load",
                 providerName = UrlParameter.Optional
             }); 
```

providerName 参数应该是可选的，我正在使用 Xml 序列化。

该操作应响应以下 url 示例：

```
http://www.domain.com/sites/site1/user/load/provider1/[some user details in the post]
or
http://www.domain.com/sites/site1/user/load/[some user details in the post] 
```

我怎样才能对此操作进行后期调用，以便我可以测试我的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:27:06.187

来自：[带有 post 的 HTTP 请求](https://stackoverflow.com/questions/4015324/http-request-with-post)

```
HttpWebRequest request =
    (HttpWebRequest)WebRequest.Create(@"http:\\domain.com\page.asp");

ASCIIEncoding encoding = new ASCIIEncoding();
string postData = "username=user";
postData += "&password=pass";
byte[] data = encoding.GetBytes(postData);

request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = data.Length;

using (Stream stream = request.GetRequestStream())
{
    stream.Write(data,0,data.Length);
}

HttpWebResponse response = (HttpWebResponse)request.GetResponse();

string responseString = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:26:00.570

如果您的问题是如何测试您的操作，您可以使用[Fidler](http://fiddler2.com/)。

见[http://www.mehdi-khalili.com/fiddler-in-action/part-2](http://www.mehdi-khalili.com/fiddler-in-action/part-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:22:40.900

使用 RestSharp 和 Web 请求查看来自此处的响应：

[http://pooyakhamooshi.blogspot.co.uk/2013/04/how-to-post-request-to-web-api-web.html](http://pooyakhamooshi.blogspot.co.uk/2013/04/how-to-post-request-to-web-api-web.html)

# php - 在 PHP 回显中使用 DateTime

> ID：16086904
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:21:50.797
> 
> 标签：php, date, datetime

我已设置变量以显示当前年份，如下所示：

```
$now = new DateTime();
$year $now->format("Y"); 
```

我正在使用这样的回声：

```
echo $str='Hello World, year is $year'; 
```

但是，这没有显示年份，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:24:23.597

代替

```
echo $str='Hello World, year is $year'; 
```

经过

```
echo $str="Hello World, year is $year"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:24:00.550

首先，您忘记了`=`的运算符`$year`，然后将其放在`$year`单引号内并尝试回显它，这**将不起作用**，因为变量只有在双引号内回显时才能起作用，而不是单引号。

```
$now = new DateTime();
$year = $now->format("Y");
$str = 'somthing';

echo $str."Hello World, year is $year"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:24:09.873

1.  您`=`的变量赋值中缺少符号
2.  您将字符串放在单引号中，以防止变量被插值

.

```
$now = new DateTime();
$year = $now->format("Y");
echo "Hello World, year is $year"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T15:24:10.137

如果要回显变量，则需要使用双引号而不是单引号

```
echo "Hello World, year is $year"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-18T15:25:11.813

PHP 只解析变量的双引号中的字符串。将您的 String 括在 " 或使用字符串 concatinator 。

> echo 'Hello World, year is' 。$年；

或者

> echo "Hello World, year is $year";

除此之外，您还尝试回显变量分配...

# android - Android：没有对话框的 TimePicker

> ID：16086913
> 
> 赞同：2
> 
> 时间：2013-04-18T15:22:04.297
> 
> 标签：android, widget

我想展示一个没有对话框的 TimePicker。我把它放到我的布局文件中，但它显示为空：

```
<TimePicker
    android:id="@+id/ui_dialog_alert_msg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp" /> 
```

# css-position - 如何以任意大小将对象放置在屏幕中间？

> ID：16086918
> 
> 赞同：0
> 
> 时间：2013-04-18T15:22:18.377
> 
> 标签：css-position

这是我的全部代码（抱歉 h1 不是英文，但没关系，因为所有的段落都是虚拟文本。）[http://jsfiddle.net/sBKYH/](http://jsfiddle.net/sBKYH/)

我的定位

```
.vizitka{
position:relative;
top:50%;
margin: 232px 0 0 438px;
} 
```

所以我的问题是我在笔记本电脑上处理这个网页，一切都很完美。但是当我在我的电脑（屏幕更大）上打开网站时，我的卡片向左移动。我怎样才能把我的卡片放在中间，这样它们就不会受到屏幕尺寸的影响？而且当我改变浏览器窗口的大小时，而不是在缓慢上升时停留在卡片中间。关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:27:25.967

尝试

```
.vizitka{  
  margin:232px auto 0;
  ...
} 
```

# ruby-on-rails - 如何在我的 Rails 应用程序中验证 jquery 自动完成功能？

> ID：16086920
> 
> 赞同：0
> 
> 时间：2013-04-18T15:22:20.537
> 
> 标签：ruby-on-rails, jquery-ui, validation, google-maps, jquery

我非常简单的 Rails 应用程序有一个具有两种方法的模型：

：从到

我为表单中的 :to 和 :from 使用了很棒的 (Google Maps API) 驱动的 address-rails-picker 应用程序来自动完成用户输入的任何位置。

但是，我在编写强制用户选择自动完成位置而不是编写用户想要的任何乱码的验证时确实遇到了麻烦。

我想我可能需要使用回调。到目前为止，这是我的代码：

```
 class Post < ActiveRecord::Base
    attr_accessible :from, :to
    validates :from, :presence => true, confirmation: true
    validates :to, :presence => true

    before_validation do
    self.from = from.find_by_address-picker-input(from)
    self.to = to.find_by_address-picker-input(to)

      end
     end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:24:18.397

你不能只使用 Rails 来做到这一点，因为地址选择器是纯 JavaScript。我能想到的一种方法是添加一个隐藏字段作为标志。如果用户手动更改输入字段，则设置此标志。然后验证这个标志。

# ios - Xcode 未在源代码中显示 OCMock 验证错误

> ID：16086921
> 
> 赞同：1
> 
> 时间：2013-04-18T15:22:23.080
> 
> 标签：ios, xcode, unit-testing, ocmock

在 Xcode 中进行单元测试时，如果我使用`OCUnit` `STAssertX`方法、`OCHamcrest`断言或`OCMockito`，当其中任何一个引发错误时，我可以看到 Xcode 在编辑器中将该行标记为红色。但是，使用`OCMock`Xcode 并不会以红色显示该行，因此我必须检查问题选项卡以查看哪个测试方法失败。你知道有什么办法可以解决这个问题吗？我真的很想在验证失败时看到红色的验证行。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:28:06.493

OCMock 的`verify`方法通过抛出异常来工作，这是您可以利用的。

```
STAssertNoThrows([myMock verify], @"Unexpected!"); 
```

如果失败`STAssertNoThrows`，Xcode 将突出显示。`verify`

**编辑**

宏可以使它看起来更好：

```
#define STVerify(MOCK) STAssertNoThrow([MOCK verify], @"Mock failed to verify")
STVerify(myMock); 
```

# eclipselink - 作为 JPA 提供者从 Hibernate 迁移到 Eclipse 链接

> ID：16086922
> 
> 赞同：1
> 
> 时间：2013-04-18T15:22:24.410
> 
> 标签：eclipselink

我们正计划从 Hibernate 4.0 迁移到 eclipse 链接，因为我们的 JPA 提供商可以让我知道如果有人沿着这条路走下去需要付出什么样的努力。

我很热衷，因为多租户在 eclipse 链接中更胜一筹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-19T07:50:49.567

迟到的答案，但我相信这个问题可能与其他人有关，答案可能比看起来更复杂。

我只考虑 100% 的标准 JPA 使用。有一些可能至关重要的差异。例如：

*   默认情况下，Hibernate 不缓存。默认情况下，EclipseLink 会大量缓存。您必须查看有关如何迁移缓存的文档。
*   默认情况下，即使在 Java SE 环境中，Hibernate 也可以找到（扫描）类，EclipseLink 不这样做。两者都按照规定在 EE 环境中进行。
*   两个提供程序都存在错误，即使使用 100% JPA，您也可能经常遇到一些错误，具体取决于映射的复杂性、您是否以及如何使用 JPQL 等。我们实践中的示例：
    *   Hibernate 不会为跨连接的删除生成正确的 SQL，例如`delete from Dog d where d.breed.name = 'collie'`：（[链接](https://hibernate.atlassian.net/browse/HHH-9711)）
    *   或者更奇特的 EclipseLink 删除`@OneToMany`引用非`@Id`属性（[链接](https://bugs.eclipse.org/bugs/show_bug.cgi?id=332309)）的实体
    *   作为另一个示例，虽然现在已修复，但 EclipseLink 中的惰性列表上的 Java 8 流也存在问题，因为它们被滥用`Vector`（扩展了一个而不维护超类的受保护字段的不变量）。

考虑到两个项目中都有多少错误打开（这本身可能是预期的），当您尝试来回迁移时，您可能会遇到错误交火。

所以总结一下：

*   注意 JPA 提供者的细节，其中 JPA 规范不是特定的（有许多未指定的行为留给提供者）。隐式缓存设置就是一个例子。您需要阅读 JPA 提供者文档以使用提供者的正确属性等。
*   注意错误。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:18:05.927

简短的回答。这取决于。

长答案。如果您使用 100% 标准 JPA，这可能是微不足道的，或者如果您直接使用 Hibernate API，您可能不得不重写所有内容。

最佳答案。如果您使用 JPA，这将是不平凡的，但不是一个令人发指的时间承诺。

# r - 在 constrOptim (R) 中寻找约束矩阵

> ID：16086932
> 
> 赞同：1
> 
> 时间：2013-04-18T15:22:59.867
> 
> 标签：r, optimization, continuous-integration, simulation

我想设置约束`constrOptim`以优化以下功能：

```
logistic<-function(b,x,target){
  b1<-b[1]
  b2<-b[2]
  log<-function(x){1/(1+exp(-(b1+b2*x)))}
  abs(mean(log(x))-target)
} 
```

优化`target=.75`通常可以使用

```
optim(c(1,1),logistic,x=data,target=.75,hessian=TRUE,method='SANN') 
```

方法 SANN 似乎是必要的，因为该函数是不可微的。

约束条件是 b2>0（条件 1）或 b2<0（条件 2），而 b1 可以是任何实数。但是如何将此功能扩展到`constrOptim`？具体来说，我不知道如何指定参数`ui`和`ci`.

在这些限制条件下进行优化的替代方法也受到欢迎。谢谢。

**编辑** 我认为我找到了一个解决方法。`logistic`我们通过重新定义找到约束 b2<0

```
logistic_lt<-function(b,x,target){
  b1<-b[1]
  b2<-b[2]
  if(b2>0){b2<-b2*(-1)}
  log<-function(x){1/(1+exp(-(b1+b2*x)))}
  abs(mean(log(x))-target)
} 
```

我仍然对涉及 constrOptim 的解决方案感兴趣。

# jsf - 调用 j_security_check 后出现 404 错误

> ID：16086934
> 
> 赞同：1
> 
> 时间：2013-04-18T15:23:02.483
> 
> 标签：jsf, tomcat7

我的 Web 应用程序中发生的最奇怪的事情。这是`<security-constraint>`web.xml 的部分：

```
 <security-constraint>
        <web-resource-collection>
            <web-resource-name>Non-secure resources</web-resource-name>
            <url-pattern>/js/*</url-pattern>
            <url-pattern>/theme/*</url-pattern>
            <url-pattern>/login.jsp</url-pattern>
            <url-pattern>/logout.faces</url-pattern>
            <http-method>GET</http-method>
        </web-resource-collection>
    </security-constraint>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Secure resources</web-resource-name>
            <url-pattern>/faces/*</url-pattern>
            <url-pattern>/fragments/*</url-pattern>
            <url-pattern>/pages/*</url-pattern>
            <url-pattern>*.faces</url-pattern>
            <url-pattern>*.jsp</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>AllAuthenticated</role-name>
        </auth-constraint>
        <user-data-constraint>
            <transport-guarantee>NONE</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>map</realm-name>
        <form-login-config>
            <form-login-page>/login.jsp</form-login-page>
            <form-error-page>/loginError.jsp</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <role-name>AllAuthenticated</role-name>
    </security-role> 
```

当用户通过 访问应用程序时`http://<host-name>/<context-path>/`，用户将被转发到登录页面，成功登录后一切正常。但是如果用户通过 访问应用程序`http://<host-name>/<context-path>/login.jsp`，在成功登录后，用户会收到 404 错误消息，并且浏览器中的 URL 是`http://<host-name>/<context-path>/j_security_check`。

任何人都知道为什么会发生这种情况以及我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T16:46:53.763

您必须将这些行添加到您的 web.xml ：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
<filter-name>springSecurityFilterChain</filter-name>
<url-pattern>/*</url-pattern>
<dispatcher>REQUEST</dispatcher>
<dispatcher>FORWARD</dispatcher> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T00:18:26.813

您应该在 web.xml 中添加此元素。

```
<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/j_security_check</url-pattern>
</servlet-mapping> 
```

# java - 如何将文本文件中的数据读入Java中的数组

> ID：16086935
> 
> 赞同：1
> 
> 时间：2013-04-18T15:23:03.147
> 
> 标签：java, arrays, file

我在编程作业上遇到问题。我需要从 txt 文件中读取数据并将其存储在并行数组中。txt 文件内容的格式如下：

```
Line1: Stringwith466numbers
Line2: String with a few words
Line3(int): 4
Line4: Stringwith4643numbers
Line5: String with another few words
Line6(int): 9 
```

注意：“Line1:”、“Line2:”等仅用于显示目的，实际上不在 txt 文件中。

正如你所看到的，它以三个模式进行。txt 文件的每个条目是三行，两个字符串和一个 int。

我想将第一行读入一个数组，第二行读入另一个，第三行读入一个 int 数组。然后将第四行添加到第一个数组中，将第 5 行添加到第二个数组中，将第 6 行添加到第三个数组中。

我试图为此编写代码，但无法正常工作：

```
//Create Parallel Arrays
String[] moduleCodes = new String[3];
String[] moduleNames = new String[3];
int[] numberOfStudents = new int[3];

String fileName = "myfile.txt";

readFileContent(fileName, moduleCodes, moduleNames, numberOfStudents);

private static void readFileContent(String fileName, String[] moduleCodes, String[] moduleNames, int[] numberOfStudents) throws FileNotFoundException {

        // Create File Object 
        File file = new File(fileName);

        if (file.exists())
        {

            Scanner scan = new Scanner(file);
            int counter = 0;

            while(scan.hasNext())
            {

                String code = scan.next();
                String moduleName = scan.next();
                int totalPurchase = scan.nextInt();

                moduleCodes[counter] = code;
                moduleNames[counter] = moduleName;
                numberOfStudents[counter] = totalPurchase;

                counter++; 

            }

        }

    } 
```

上面的代码不能正常工作。当我尝试打印出数组的一个元素时。它为字符串数组返回 null，为 int 数组返回 0，这表明读取数据的代码不起作用。

任何建议或指导都非常感谢，因为它在这一点上变得令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:29:10.110

只有 ' 被打印的事实`null`表明该文件不存在或为空（如果打印正确）。

进行一些检查以确保一切正常是个好主意：

```
if (!file.exists())
  System.out.println("The file " + fileName + " doesn't exist!"); 
```

或者您实际上可以跳过上面的内容，也可以在代码中取出该`if (file.exists())`行并让其`FileNotFoundException`抛出。

另一个问题是`next`按空格分割事物（默认情况下），问题是第二行有空格。

`nextLine`应该管用：

```
String code = scan.nextLine();
String moduleName = scan.nextLine();
int totalPurchase = Integer.parseInt(scan.nextLine()); 
```

或者，更改分隔符也应该有效：（使用您的代码）

```
scan.useDelimiter("\\r?\\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:28:21.383

你正在阅读行，所以试试这个：

```
while(scan.hasNextLine()){
    String code = scan.nextLine();
    String moduleName = scan.nextLine();
    int totalPurchase = Integer.pasreInt(scan.nextLine().trim());

    moduleCodes[counter] = code;
    moduleNames[counter] = moduleName;
    numberOfStudents[counter] = totalPurchase;
    counter++; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:24:49.117

```
 String code = scan.nextLine();
  String moduleName = scan.nextLine();
  int totalPurchase = scan.nextInt();
  scan.nextLine() 
```

这将在读取后将扫描仪移动到适当的位置`int`。

# java - Jtextarea高度动态增加

> ID：16086942
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:23:27.767
> 
> 标签：java, swing, jtextarea

我在netbeans中编码，我的问题是每当我在jtextarea中动态添加文本时，textarea应该根据内容增加它的高度，以便显示完整的内容，我不想要jtextarea的滚动条。我已经关闭了两个滚动条。

```
 int i=0;
      jtextArea.setText("hello");
      while(i<20){
         jtextArea.setText(jtextArea.getText()+"\nhello");
          i++;
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:44:55.160

行为取决于您使用的布局管理器。例如，JFrame 默认使用 BorderLayout。因此，您可以执行以下操作：

```
JTextArea textArea = new JTextArea();
frame.add(textArea. BorderLayout.NORTH); 
```

现在文本区域将是框架的宽度，并且会随着您的键入而增长，直到框架上没有更多空间。

> 我已经关闭了两个滚动条

如果您不想使用滚动窗格，请不要创建滚动窗格。只需将文本区域直接添加到框架中即可。

# asp.net - “包含 App_data 文件夹中的文件”选项在哪里？

> ID：16086943
> 
> 赞同：3
> 
> 时间：2013-04-18T15:23:28.750
> 
> 标签：asp.net, visual-studio-2010, publishing, app-data

根据这个[答案](https://stackoverflow.com/a/1570909/240564)，当您发布 ASP.NET 应用程序时，它应该是选项“包含 App_data 文件夹中的文件”。但我没有看到它： ![在此处输入图像描述](https://i.stack.imgur.com/qMr0h.png)

在哪儿？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T16:08:39.383

我不相信该选项在最新的 Visual Studio 中。

相反，您应该能够通过右键单击解决方案资源管理器中的文件并单击“属性”将构建操作更改为“内容”。

这应该将它们包括在发布过程中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-16T07:14:29.373

我使用了 After Build Target。只需在部署时创建一个空文件夹。

将此添加到项目文件 .csproj 的末尾

```
<Target Name="CreateDirectories" AfterTargets="GatherAllFilesToPublish">   
    <MakeDir Directories="$(OutputPath)App_Data\"/>  
</Target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-16T22:04:35.030

1.  在已发布应用程序的根文件夹下手动创建 App_Data 文件夹
2.  右键单击 App_Data 文件夹并选择**Publish App_Data 文件夹**。
3.  将一个项目添加到 App_Data 文件夹中，并将该项目设置为包含在发布中。

[https://forums.asp.net/t/2126248.aspx?App_Data+folder+missing+in+release](https://forums.asp.net/t/2126248.aspx?App_Data+folder+missing+in+release)

# gwt - GWT 程序未运行

> ID：16086947
> 
> 赞同：1
> 
> 时间：2013-04-18T15:23:37.837
> 
> 标签：gwt

当我运行我的项目时，出现以下错误：无法找到或加载主类 com.google.gwt.dev.GWTShell

我已经用 sdk 和 GWT 设计器安装了 google 插件。由于发生此错误，我不明白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:47:30.290

`com.google.gwt.dev.GWTShell`已弃用，并且在 GWT 的更高版本中不再使用。

[`com.google.gwt.dev.DevMode`](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#an_example_launch)是用于启动 GWT 开发模式的一种。

**参考 -**

1.  **简单的编译和调试**- [https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging)

2.  高级**[SuperDevMode](http://geekbybit.blogspot.in/2013/03/diy-working-with-gwt-codeserver-tomcat.html)** - [https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#SuperDevMode](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#SuperDevMode)

# javascript - 将变量传递给我的 erb 代码

> ID：16086950
> 
> 赞同：1
> 
> 时间：2013-04-18T15:23:38.720
> 
> 标签：javascript, ruby-on-rails, ajax, jquery, erb

在我的 ruby​​ on rails 应用程序中，我有一个列出一些记录的视图。

我在页面上也有一些过滤器，上面有 javascript onclick 事件，用于检索他们的 id 并过滤页面上的记录。

单击的按钮的 id 存储在 javascript 变量中

```
var selected = []; 
```

在我的 index.html.erb 中，我想使用我的 selected[] 数组的值从数据库中检索数据并过滤索引页面。

我在其他帖子中看到我们无法将 javascript 变量传递给 erb 代码，因为后者是在服务器中执行的。

如何使用 ajax 或其他方式将我选择的 id 传递给我的 erb 函数？

```
 <% Post.recent(**selected**).each do |post| %>
       .....
    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:58:11.797

我能想到的唯一方法是提交一个带有哈希`selected`一部分的表单`params`，然后我想你可以做到。

例如

`<input type='hidden' value="selected['cool', 'fun', 'happy', 'ruby']" />`

然后可以在您的控制器中访问 this `params[:selected]`，并从那里您可以将其设置为实例变量，如

```
@selected = params[:selected] 
```

# python - 重新定义python模块的类/模型

> ID：16086951
> 
> 赞同：0
> 
> 时间：2013-04-18T15:23:39.500
> 
> 标签：python, django, module

我想在我的应用程序中使用`django-achievements`（[链接](https://github.com/ssaboum/django-achievements/tree/master/achievements)）模块，但它的模型中缺少一些字段。例如，我想在`CharField`其中添加徽章/成就图片的路径。我还需要为此修改模块的`engine.py`文件。

这样做的正确方法是什么？将该模块下载到我的主应用程序文件夹并修改原始文件，或者我可以以某种方式重新定义原始`models.py`和`engine.py`本地的一些方法/类而不修改原始文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:36:15.490

我会说 fork 它并直接对源进行自己的修改。如果这是一项改进，您可以创建一个拉取请求并将您的代码贡献给实际的存储库（不是必需的，您可以随时保留它供自己使用）。

# python - Python 并读取包含字符串和数字列表的文本文件

> ID：16086955
> 
> 赞同：1
> 
> 时间：2013-04-18T15:23:54.433
> 
> 标签：python, text-files

这是一个与许多人相似的问题，但并不完全相同。我有一个包含大约 400,000 行文本的文本文件。每一行本质上是一个列表。例如它看起来像`[ 'a','b',1,2,'c',3,'d and , e string', 45]`

我可以使用以下代码读取文本文件的每一行：

```
with open('myfile.txt') as f:
    content = f.readlines() 
```

问题是每一行都被读取为一个字符串。我想获取列表中的每个项目。所以我想我会做（对于每一行）：

```
content[line].split(',') 
```

这几乎可以工作，但我遇到了一个问题。很多时候，在我的文本文件中，列表中有一个带有逗号的字符串（从上面我有'd and , e string'）。我不希望这个字符串被拆分，但希望它作为一个项目。

如果这不成立，因为我想从我的文本文件中取行`[ 'a','b',1,2,'c',3,'d and , e string', 45]`并且我想要 8 个单独的元素

```
'a'
'b'
1 
2
'c'
3
'd and , e string'
45 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:41:36.337

[帝斯曼](https://stackoverflow.com/users/487339/dsm)对

```
from ast import literal_eval

# use generator 
# instead of allocating 
# 400 000 lists at a time
your_lists = (literal_eval(s) for s in open('filename.txt')) 
```

# rtc - 报告以查看计划的完成日期

> ID：16086956
> 
> 赞同：1
> 
> 时间：2013-04-18T15:23:59.657
> 
> 标签：rtc, rational-team-concert

假设我们有一个计划，其中所有工作项都用故事点正确估计。我们有一个已知的团队速度。

使用这些信息，我希望能够大致了解所有工作项何时完成，无论是在哪个 sprint 或日期之前完成。目标是使用该报告来计划项目并查看更改（删除/添加工作项，删除/添加人员）将如何影响完成日期。

感觉应该存在这样的东西，但我还没有找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:05:31.637

对于任何计划，我都没有看到此功能（结束日期）。

我只知道为带有[**计划快照**](https://jazz.net/library/article/658)[的正式计划提供的建议结束日期](https://jazz.net/library/article/658)**：**

 **> 计划快照捕获计划的当前状态、计划中的工作项及其时间表、拥有计划的团队区域以及为其创建计划的迭代。您可以在计划视图的快照选项卡上管理快照。提供三种类型的快照：

...

*   **建议**：此类快照适用于传统项目，例如使用**正式项目管理流程模板**创建的项目。
    通常，在将资源分配给项目之前会创建提议的快照。
    在这种类型的快照中捕获的开始日期和结束日期会填充建议的开始日期和建议的结束日期，这些日期默认显示在计划的[**计划差异**](https://jazz.net/library/article/658#ScheduleVariance)视图中。一次只能存在一个提议的快照。

![建议的结束日期](https://i.stack.imgur.com/f87hZ.png)

但这可能不是您要寻找的，因为您已经分配了资源，并且具有已知的*团队*（即资源组）速度**

# tree - 有没有办法从一般树转换为二叉搜索树？

> ID：16086958
> 
> 赞同：0
> 
> 时间：2013-04-18T15:24:00.597
> 
> 标签：tree, binary-tree, binary-search-tree

我知道如何从一般树转换为二叉树就好了，

```
 a             a
    / | \          /
   b  c  d   ->   b
                   \
                    c
                     \
                      d 
```

我只是被问到如何从一般树转换为二叉搜索树。我的想法是，问我的人不是指二叉搜索树（我问他，他说他是），或者他从课堂笔记中误解了一些东西。无论如何，有人听说过这样做吗？一般树到二叉搜索树？我给他的答案是先转换成二叉树，然后排序得到二叉搜索树。这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:29:12.183

我认为你只需要`traverse`初始树并将每个节点插入到`binary search tree`. 之后，您将初始树转换为 BST。

要遍历树，[请单击此处](http://en.wikipedia.org/wiki/Tree_traversal)

有关二叉搜索树信息和插入方法，[请单击此处](http://en.wikipedia.org/wiki/Binary_search_tree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T23:20:09.123

**

> 这是我创建的一种算法，可以将树数据结构转换为 2 度树真（二叉树）。以下是树节点的节点结构。

**

```
template<class T>
class Node
{
public:
  T _data;    // The Node Data

  std::vector<Node<T>*> _link;   // Possible OutLinks from the Node.

  Node(){}

  void setValue(T D){ _data = D; }

  T getValue()const{ return _data; }

  ~Node(){}
};

Following is the tree adapter.

template <class T> 

class tree{

  Node<T>*_root;  // The Pointer holding the root node.

  int _degree;

  std::string _type; // shows the tree type,Binary Or Any other outdegree 

//degrees.

public:

  tree(){ _degree = 0; _root = NULL; }

  tree(Node<T>*R, int D) :_root(R),_degree(D){}

 Node<T>* getRoot()const{ return _root; }

 ~tree(){ _root = NULL; }
};

//.........
//This is the Algorithm for converting a x-order tree to a binary tree.

///*This Template function is used to convert a general tree into a binary tree  

without loosing any nodes,with the same root node.*/

template<class T> 

tree<T> makeBinaryTree(tree<T> _tree){

  Node<T>* node = _tree.getRoot();

  Node<T>* root = new Node<T>;

  root = node;

  int i = 0;

  int k = 0;

  std::queue<Node<T>*> que;  // que used to save the links other than the 

leftmost one.

  std::stack<Node<T>*> s1;   // stack for saving the tree nodes,while going deep 
into left

  std::stack<char>s2;

  Node<T>* s3;

  char flag = ' ';

  while (true){

    while (root&&flag!='A'){

      s1.push(root);

      if (root->_link[0] == NULL && root->_link.size())

        s2.push('C');

      else if (root->_link.size() > 1){

        s2.push('B');

      }

      else

        s2.push('A');

      root = root->_link[0];

    }

    if (s1.empty())break;

    root = s1.pop();

    flag = s2.pop();

    if (flag == 'C'){  // handles the deep left node with any number of nodes 

other than in socket 0.

      while (true){

        i = 1;

        if (root->_link[0] == NULL&&root->_link.size() == 0){ flag = 'A'; break; 

}
        if (root->_link.size() >= 1){

          while (true)

          {

            if (root->_link[i]){

              root->_link[0] = root->_link[i];

              root->_link.erase(i);

              if (root->_link.size() > 1){

                s1.push(root);

                s2.push('B');

              }

              break;

            }

            ++i;

          }

          root = root->_link[0];

        }

      }

    }

    if (flag == 'B'){ // any node except the deep left node that has more links 

from it.

      i = root->_link.size()-1;

      k = i-1;

      while (K!=0){

        root->_link.at(k)->_link.push(root->_link.at(k + 1));

        --k;

      }

      s3->_link[1] = root->_link[1];

      root->_link.erase[1];

    s1.push(root);

    s2.push('A');
      // Now You have to manage link 1 of s3.

      s3 = s3->_link[1];

      if (s3->_link.size()){

        //TODO...

        //Testing...

        root = s3;

      }

      //AT the end 

      s3 = NULL;

    }

    if (flag == 'A'){   // the safe nodes,i.e having only one node from it 

,other than the deep left node

      s3 = root;

    }

  }//end of main while loop.

return (new tree<T>(node,2));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-26T02:09:44.107

您可以按照给定的步骤进行转换：

***对于每个节点 N 将其左孩子作为左孩子，将其右兄弟作为右孩子***

这样，树的根子树将没有右子树，因为它没有任何右兄弟。例如： [转换的通用树](https://i.stack.imgur.com/dxBvC.png)

按照以下步骤，您将获得： [结果二叉树](https://i.stack.imgur.com/wz5Dl.png)

# javascript - 我应该使用更改还是输入事件来保存数据？

> ID：16086959
> 
> 赞同：2
> 
> 时间：2013-04-18T15:24:02.213
> 
> 标签：javascript, jquery, events, sql-update, client-side

我仍在学习通过 jQuery 和 Javascript 做事的最佳方式。我有几个输入文本框，我想在进行更改时立即更新记录。

过去从 Winforms 的角度处理类似事件，我会在处理程序中处理文本更改或获取/丢失焦点事件。我知道“输入”和“更改”是输入元素的粗略等价物。

我想确保 100% 的时间在更改文本时进行更改。我对使用“输入”事件的担忧是可能涉及的开销，而我对“更改”事件的担忧是超出事件处理范围的事情（例如浏览器关闭、会话到期等）会发生并阻止更新。

我更喜欢使用“输入”，但每次有人键入或删除字符时都会命中数据库的想法让我担心。如果我有办法防止我上面提到的情况，“改变”就可以了。

底线是：如果开销不是问题，则“输入”；如果有一种方法（我目前不知道）可以确保保存所有内容，则可能通过处理另一个事件来“更改”。

我应该怎么办？谢谢！

# python - UnboundLocalError：调用函数输出时

> ID：16086960
> 
> 赞同：0
> 
> 时间：2013-04-18T15:24:03.450
> 
> 标签：python

我想将值列表从 0、1 和 2 转换为 2,2；1,2 和 1,1。我写了一个应该这样做的函数：

```
def dec2(code):                      
    if code == 0:
        ret_val = '2','2'
    elif code == 1:
         ret_val = '1','2'
    elif code == 2:
         ret_val = '1','1'
    else:
        ret_val = '0','0'
    return ret_val 
```

只要我在现成的列表上运行它，它似乎工作正常：

```
In [87]: a=[1,2,1,2]

In [88]: b=[dec2(x) for x in a]

In [89]: b
Out[89]: [('1', '2'), ('1', '1'), ('1', '2'), ('1', '1')] 
```

但是，当我尝试使用它来替换字典值时，我得到 UnboundLocalError.:

```
In [82]: gtps
Out[82]: {11: [1, 2, 1, 2], 22: [2, 2, 1, 1], 33: [1, 9, 0, 2]}
[86]: for k,v in gtps.iteritems():
....:     tmp=[dec2(x) for x in v]
....:     all[k]=tmp
....:
....:
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)

UnboundLocalError: local variable 'ret_val' referenced before assignment 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:36:19.870

您发布的代码在任何情况下都不能 raise `UnboundLocalError`，因此您的 ipython 会话中混杂了一些东西。

我会改用这个：

```
_code_map = {0: ('2', '2'), 1: ('1','2'), 2: ('1','1')}
def dec2(code):
    return _code_map.get(code, ('0', '0')) 
```

# geolocation - 如何使用纬度和经度坐标从某个位置获取时区？

> ID：16086962
> 
> 赞同：390
> 
> 时间：2013-04-18T15:24:09.853
> 
> 标签：geolocation, timezone, latitude-longitude

给定一个位置的纬度和经度，如何知道该位置的有效时区？

在大多数情况下，我们正在寻找 IANA/Olson 时区 ID，尽管某些服务可能只返回 UTC 偏移量或其他一些时区标识符。请阅读[时区标签信息](https://stackoverflow.com/tags/timezone/info)了解详情。

* * *

## 回答 #1

> 赞同：531
> 
> 时间：2013-04-18T15:24:09.853

**时区定位网络服务**

*   [谷歌地图时区 API](https://developers.google.com/maps/documentation/timezone/)
*   [必应地图时区 API](https://docs.microsoft.com/bingmaps/rest-services/timezone/)
*   [Azure 地图时区 API](https://docs.microsoft.com/en-us/rest/api/maps/timezone)
*   [GeoNames 时区 API](http://www.geonames.org/export/web-services.html#timezone)
*   [时区数据库 API](https://timezonedb.com/api)
*   [AskGeo](https://askgeo.com/) - 商业（但[可以说比 GeoNames 更准确](https://stackoverflow.com/a/5519523/634824)）
*   [GeoGarage Time Zone API](https://www.geogarage.com/blog/news-1/post/geogarage-time-zone-api-31) - 商业，专注于航海时区。

**原始时区边界数据**

*   [Timezone Boundary Builder](https://github.com/evansiroky/timezone-boundary-builder) - 从 OpenStreetMaps 地图数据构建时区 shapefile。包括海岸线附近的领海。

以下项目以前是时区边界数据的来源，但不再积极维护。

*   [tz_world](http://efele.net/maps/tz/world/) - 来自 Eric Muller 的原始 shapefile 数据
*   [whereonearth-timezone](https://github.com/straup/whereonearth-timezone) - 合并了 WOEDB 数据的 GeoJSON 版本

**时区地理位置离线实现**

使用时区边界生成器数据的实现

*   [node-geo-tz](https://github.com/evansiroky/node-geo-tz) - JavaScript 库（仅限 Node.js）
*   [时间空间](https://github.com/mapbox/timespace)- JavaScript 库
*   [tz-lookup-oss](https://github.com/darkskyapp/tz-lookup-oss/) - JavaScript 库
*   [GeoTimeZone](https://github.com/mj1856/GeoTimeZone) - .NET 库
*   [地理时区](https://github.com/minube/geo-timezone)- PHP 库
*   [timezonefinder](https://github.com/MrMinimal64/timezonefinder) - Python 库
*   [ZoneDetect](https://github.com/BertoldVdb/ZoneDetect) - C 库
*   [时间形状](https://github.com/RomanIakovlev/timeshape)- Java 库
*   [TimeZoneMap](https://github.com/dustin-johnson/timezonemap) - Java 和 Android 库
*   [lutz](https://github.com/ateucher/lutz) - R 库
*   [go-tz](https://github.com/ugjka/go-tz) -Go 库
*   [时区查找](https://github.com/evanoberholster/timezoneLookup)- Go 库
*   [docker-timezone-lookup](https://hub.docker.com/repository/docker/tobias74/timezone-lookup) - docker 容器包装 node-geo-tz

使用旧 tz_world 数据的实现

*   [latlong](https://github.com/bradfitz/latlong) - Go 库（也请阅读[这篇文章](https://plus.google.com/u/0/+BradFitzpatrick/posts/XVyy1bAzkZd)。）
*   [TimeZoneMapper](https://sites.google.com/a/edval.biz/www/mapping-lat-lng-s-to-timezones) - Java 库
*   [tzwhere](https://github.com/mattbornski/tzwhere) - JavaScript/节点库
*   [pytzwhere](https://github.com/pegler/pytzwhere) - Python 库
*   [timezone_finder](https://github.com/gunyarakun/timezone_finder) - Ruby 库
*   [LatLongToTimeZone](https://github.com/drtimcooper/LatLongToTimezone) - Java 和 Swift 库
*   [现在几点了？](https://derickrethans.nl/what-time-is-it.html)- 描述 PHP 和 MongoDB 的博客文章
*   [rundel/时区](https://github.com/rundel/timezone)- R 库

**调用其中一种 Web 服务的库**

*   [timezone](https://rubygems.org/gems/timezone) - 调用 GeoNames 的 Ruby gem
*   [AskGeo](https://askgeo.com/#libraries)有自己的库，用于从 Java 或 .Net 调用
*   [GeoNames](http://www.geonames.org/export/client-libraries.html)拥有几乎所有内容的客户端库

**自托管网络服务**

*   [geo2tz](https://github.com/noandrea/geo2tz) - 基于[时区查找](https://github.com/evanoberholster/timezoneLookup)，可通过 Docker 映像获得

**其他想法**

*   [使用 R-Tree](https://stackoverflow.com/a/5584826/634824)查找最近的城市
*   [使用 MySQL](https://stackoverflow.com/a/13849653/634824)查找最近的城市

*如果您知道任何其他人，请更新此列表*

另外，请注意，最近城市方法可能不会产生“正确”的结果，只是一个近似值。

**转换为 Windows 区域**

列出的大多数方法都将返回 IANA 时区 ID。如果您需要转换为 Windows 时区以与`TimeZoneInfo`.NET 中的类一起使用，请使用[TimeZoneConverter](https://github.com/mj1856/TimeZoneConverter)库。

**不要使用 zone.tab**

[tz 数据库](https://en.wikipedia.org/wiki/Tz_database)包含一个名为[`zone.tab`](https://en.wikipedia.org/wiki/Zone.tab). 该文件主要用于提供时区列表供用户选择。它包括每个时区的参考点的纬度和经度坐标。这允许创建突出这些点的地图。例如，查看[moment-timezone 主页](https://momentjs.com/timezone/)上显示的交互式地图。

虽然使用此数据从纬度和经度坐标解析时区可能很诱人，但请考虑这些是点而不是边界。最好的办法是确定*最近*的点，在许多情况下这不是正确的点。

考虑以下示例：

                            ![时区示例艺术](https://i.stack.imgur.com/tjd5u.png)

两个方块代表不同的时区，其中每个方块中的黑点是参考位置，例如可以在 zone.tab 中找到的内容。蓝点代表我们试图为其查找时区的位置。显然，这个位置在左侧的橙色区域内，但如果我们只看离参考点最近的距离，它将解析为右侧的绿色区域。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-05T17:21:16.637

How about this solution for node.js [https://github.com/mattbornski/tzwhere](https://github.com/mattbornski/tzwhere)

And its Python counterpart: [https://github.com/pegler/pytzwhere](https://github.com/pegler/pytzwhere)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-07T11:24:14.807

我们[Teleport](http://teleport.org)刚刚开始[开放我们的 API](http://developers.teleport.org/api/getting_started/)，其中一个用例还公开了坐标的 TZ 信息。

例如，可以通过以下方式请求我们所有可用的 TZ 坐标信息：

```
curl -s https://api.teleport.org/api/locations/59.4372,24.7453/?embed=location:nearest-cities/location:nearest-city/city:timezone/tz:offsets-now | jq '._embedded."location:nearest-cities"[0]._embedded."location:nearest-city"._embedded."city:timezone"' 
```

这将返回以下内容

```
{
  "_embedded": {
    "tz:offsets-now": {
      "_links": {
        "self": {
          "href": "https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/offsets/?date=2015-09-07T11%3A20%3A09Z"
        }
      },
      "base_offset_min": 120,
      "dst_offset_min": 60,
      "end_time": "2015-10-25T01:00:00Z",
      "short_name": "EEST",
      "total_offset_min": 180,
      "transition_time": "2015-03-29T01:00:00Z"
    }
  },
  "_links": {
    "self": {
      "href": "https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/"
    },
    "tz:offsets": {
      "href": "https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/offsets/{?date}",
      "templated": true
    },
    "tz:offsets-now": {
      "href": "https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/offsets/?date=2015-09-07T11%3A20%3A09Z"
    }
  },
  "iana_name": "Europe/Tallinn"
} 
```

对于我使用[./jq](https://stedolan.github.io/jq/)进行 JSON 解析的示例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-08T16:34:35.733

下面介绍如何使用 Google 的脚本编辑器在 gsheet 中获取 timezoneName 和 timeZoneId。

[![ ](https://i.stack.imgur.com/ZXmrF.png)](https://i.stack.imgur.com/ZXmrF.png)

第 1 步：获取Google 时区 API[的 API 密钥](https://developers.google.com/maps/documentation/timezone/start)

步骤 2\. 创建一个新的 gsheet。在“工具”菜单下单击“脚本编辑器”。添加以下代码：

```
function getTimezone(lat, long) {  
  var apiKey = 'INSERTAPIKEYHERE'
  var url = 'https://maps.googleapis.com/maps/api/timezone/json?location=' + lat + ',' + long + '&timestamp=1331161200&key=' + apiKey 
  var response = UrlFetchApp.fetch(url);
  var data = JSON.parse(response.getContentText());
  return data["timeZoneName"];
} 
```

步骤 3\. 保存并发布您的`getTimezone()`函数并使用它，如上图所示。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-01T23:51:10.727

您可以使用[geolocator.js](https://github.com/onury/geolocator)轻松获取时区等...

它使用需要密钥的 Google API。所以，首先你配置地理定位器：

```
geolocator.config({
    language: "en",
    google: {
        version: "3",
        key: "YOUR-GOOGLE-API-KEY"
    }
}); 
```

**如果您有坐标，请获取 TimeZone：**

```
geolocator.getTimeZone(options, function (err, timezone) {
    console.log(err || timezone);
}); 
```

**示例输出：**

```
{
    id: "Europe/Paris",
    name: "Central European Standard Time",
    abbr: "CEST",
    dstOffset: 0,
    rawOffset: 3600,
    timestamp: 1455733120
} 
```

**找到然后获取 TimeZone 等**

如果没有坐标，可以先定位用户位置。

下面的示例将首先尝试 HTML5 Geolocation API 来获取坐标。如果失败或被拒绝，它将通过 Geo-IP 查找获得坐标。最后，它将获得时区等等......

```
var options = {
    enableHighAccuracy: true,
    timeout: 6000,
    maximumAge: 0,
    desiredAccuracy: 30,
    fallbackToIP: true, // if HTML5 fails or rejected
    addressLookup: true, // this will get full address information
    timezone: true,
    map: "my-map" // this will even create a map for you
};
geolocator.locate(options, function (err, location) {
    console.log(err || location);
}); 
```

**示例输出：**

```
{
    coords: {
        latitude: 37.4224764,
        longitude: -122.0842499,
        accuracy: 30,
        altitude: null,
        altitudeAccuracy: null,
        heading: null,
        speed: null
    },
    address: {
        commonName: "",
        street: "Amphitheatre Pkwy",
        route: "Amphitheatre Pkwy",
        streetNumber: "1600",
        neighborhood: "",
        town: "",
        city: "Mountain View",
        region: "Santa Clara County",
        state: "California",
        stateCode: "CA",
        postalCode: "94043",
        country: "United States",
        countryCode: "US"
    },
    formattedAddress: "1600 Amphitheatre Parkway, Mountain View, CA 94043, USA",
    type: "ROOFTOP",
    placeId: "ChIJ2eUgeAK6j4ARbn5u_wAGqWA",
    timezone: {
        id: "America/Los_Angeles",
        name: "Pacific Standard Time",
        abbr: "PST",
        dstOffset: 0,
        rawOffset: -28800
    },
    flag: "//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/2.3.1/flags/4x3/us.svg",
    map: {
        element: HTMLElement,
        instance: Object, // google.maps.Map
        marker: Object, // google.maps.Marker
        infoWindow: Object, // google.maps.InfoWindow
        options: Object // map options
    },
    timestamp: 1456795956380
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-13T19:10:22.980

1.  网上有几个来源包含时区的 geojson 数据（[这是一个](https://github.com/straup/whereonearth-timezone)，[这是](https://github.com/candu/efele-tz-world-geojson/blob/master/tz_world.geojson)另一个）

2.  使用几何库从 geojson 坐标（shapely [[](http://toblerity.org/shapely/manual.html) python]、[GEOS](http://trac.osgeo.org/geos/) [c++]、[JTS](http://tsusiatsoftware.net/?f) [java]、[NTS](https://github.com/NetTopologySuite/NetTopologySuite) [.net]）创建多边形对象。

3.  将您的 lat/lng 转换为点对象（但是您的库表示该对象）并检查它是否与时区多边形相交。

    ```
    from shapely.geometry import Polygon, Point

    def get_tz_from_lat_lng(lat, lng):
        for tz, geojson in timezones.iteritems():
            coordinates = geojson['features'][0]['geometry']['coordinates']
            polygon = Polygon(coordinates)
            point = Point(lng, lat)
            if polygon.contains(point):
                return tz 
    ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-18T12:41:47.703

**披露：我是下面描述的 docker-image 的作者**

我已经将[https://github.com/evansiroky/node-geo-tz](https://github.com/evansiroky/node-geo-tz)包装在一个非常简单的 docker-container 中

> [https://hub.docker.com/repository/docker/tobias74/timezone-lookup](https://hub.docker.com/repository/docker/tobias74/timezone-lookup)

您可以使用以下命令启动 docker-container

```
docker run -p 80:3000 tobias74/timezone-lookup:latest 
```

这会在端口 3000 上公开本地主机上的查找服务。然后您可以通过以下方式进行时区查找

```
curl "localhost:3000/timezone?latitude=12&longitude=34" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-19T10:44:07.743

[https://en.wikipedia.org/wiki/Great-circle_distance](https://en.wikipedia.org/wiki/Great-circle_distance)

这是使用 JSON 数据的一个很好的实现： [https ://github.com/agap/llttz](https://github.com/agap/llttz)

```
public TimeZone nearestTimeZone(Location node) {
    double bestDistance = Double.MAX_VALUE;
    Location bestGuess = timeZones.get(0);

    for (Location current : timeZones.subList(1, timeZones.size())) {
        double newDistance = distanceInKilometers(node, current);

        if (newDistance < bestDistance) {
            bestDistance = newDistance;
            bestGuess = current;
        }
    }

    return java.util.TimeZone.getTimeZone(bestGuess.getZone());
}

  protected double distanceInKilometers(final double latFrom, final double lonFrom, final double latTo, final double lonTo) {
        final double meridianLength = 111.1;
        return meridianLength * centralAngle(latFrom, lonFrom, latTo, lonTo);
    }

    protected double centralAngle(final Location from, final Location to) {
        return centralAngle(from.getLatitude(), from.getLongitude(), to.getLatitude(), to.getLongitude());
    }

    protected double centralAngle(final double latFrom, final double lonFrom, final double latTo, final double lonTo) {
        final double latFromRad = toRadians(latFrom),
                lonFromRad = toRadians(lonFrom),
                latToRad   = toRadians(latTo),
                lonToRad   = toRadians(lonTo);

        final double centralAngle = toDegrees(acos(sin(latFromRad) * sin(latToRad) + cos(latFromRad) * cos(latToRad) * cos(lonToRad - lonFromRad)));

        return centralAngle <= 180.0 ? centralAngle : (360.0 - centralAngle);
    }

    protected double distanceInKilometers(final Location from, final Location to) {
        return distanceInKilometers(from.getLatitude(), from.getLongitude(), to.getLatitude(), to.getLongitude());
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-19T17:51:35.480

认识到这是一个比大多数人想象的更复杂的问题确实很重要。在实践中，我们中的许多人也愿意接受一套适用于“尽可能多的情况”的工作代码，其中至少可以识别出致命问题并将其最小化。因此，我将所有这些内容和 OP 的精神牢记在心。最后，对于那些试图将 GPS 转换为时区并最终目标是拥有一个对位置敏感的时间对象（更重要的是帮助提高来自本 wiki 的时间对象的平均实现的质量）的其他人的实用价值，这里是我在 Python 中生成的内容（请随意编辑）：

```
import pytz
from datetime import datetime
from tzwhere import tzwhere

def timezoned_unixtime(latitude, longitude, dt):
    tzw = tzwhere.tzwhere()
    timezone_str = tzw.tzNameAt(latitude, longitude)
    timezone = pytz.timezone(timezone_str)
    timezone_aware_datetime = timezone.localize(dt, is_dst=None)
    unix_time = (timezone_aware_datetime - datetime(1970, 1, 1, tzinfo=pytz.utc)).total_seconds()
    return unix_time

dt = datetime(year=2017, month=1, day=17, hour=12, minute=0, second=0)
print timezoned_unixtime(latitude=40.747854, longitude=-74.004733, dt=dt) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-05T17:46:34.797

如果您想使用 geonames.org，请使用此代码。（但 geonames.org 有时很慢）

```
String get_time_zone_time_geonames(GeoPoint gp){

        String erg = "";

        double Longitude = gp.getLongitudeE6()/1E6;
        double Latitude = gp.getLatitudeE6()/1E6;

        String request = "http://ws.geonames.org/timezone?lat="+Latitude+"&lng="+ Longitude+ "&style=full";

        URL time_zone_time = null;

        InputStream input;
       // final StringBuilder sBuf = new StringBuilder();

        try {
            time_zone_time = new URL(request);

        try {
            input = time_zone_time.openConnection().getInputStream();

        final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
            final StringBuilder sBuf = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sBuf.append(line);
                }
            } catch (IOException e) {
                    Log.e(e.getMessage(), "XML parser, stream2string 1");
            } finally {
                try {
                    input.close();
                } catch (IOException e) {
                    Log.e(e.getMessage(), "XML parser, stream2string 2");
                }
            }

             String xmltext = sBuf.toString();

             int startpos = xmltext.indexOf("<geonames");
             xmltext = xmltext.substring(startpos);

            XmlPullParser parser;
            try {
                parser = XmlPullParserFactory.newInstance().newPullParser();

            parser.setInput(new StringReader (xmltext));

            int eventType = parser.getEventType();  

            String tagName = "";

            while(eventType != XmlPullParser.END_DOCUMENT) {
                switch(eventType) {

                    case XmlPullParser.START_TAG:

                          tagName = parser.getName();

                        break;

                    case XmlPullParser.TEXT :

                        if  (tagName.equalsIgnoreCase("time"))
                          erg = parser.getText();  

                    break;   

                }

                try {
                    eventType = parser.next();
                } catch (IOException e) {

                    e.printStackTrace();
                }

            }

            } catch (XmlPullParserException e) {

                e.printStackTrace();
                erg += e.toString();
            }

            } catch (IOException e1) {

                e1.printStackTrace();
            }

            } catch (MalformedURLException e1) {

                e1.printStackTrace();
            }

        return erg;

 } 
```

并将其用于：

```
GeoPoint gp = new GeoPoint(39.6034810,-119.6822510);
String Current_TimeZone_Time = get_time_zone_time_geonames(gp); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-11-05T17:23:39.377

好的，这是没有正确 NTP 时间的简短版本：

```
String get_xml_server_reponse(String server_url){

URL xml_server = null;

String xmltext = "";

InputStream input;

try {
    xml_server = new URL(server_url);

    try {
        input = xml_server.openConnection().getInputStream();

        final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
        final StringBuilder sBuf = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) 
            {
                sBuf.append(line);
            }
           } 
        catch (IOException e) 
          {
                Log.e(e.getMessage(), "XML parser, stream2string 1");
          } 
        finally {
            try {
                input.close();
                }
            catch (IOException e) 
            {
                Log.e(e.getMessage(), "XML parser, stream2string 2");
            }
        }

        xmltext =  sBuf.toString();

    } catch (IOException e1) {

            e1.printStackTrace();
        }

    } catch (MalformedURLException e1) {

      e1.printStackTrace();
    }

 return  xmltext;

} 

long get_time_zone_time_l(GeoPoint gp){

        String raw_offset = "";
        String dst_offset = "";

        double Longitude = gp.getLongitudeE6()/1E6;
        double Latitude = gp.getLatitudeE6()/1E6;

        long tsLong = System.currentTimeMillis()/1000;

        if (tsLong != 0)
        {

        // https://maps.googleapis.com/maps/api/timezone/xml?location=39.6034810,-119.6822510&timestamp=1331161200&sensor=false

        String request = "https://maps.googleapis.com/maps/api/timezone/xml?location="+Latitude+","+ Longitude+ "&timestamp="+tsLong +"&sensor=false";

        String xmltext = get_xml_server_reponse(request);

        if(xmltext.compareTo("")!= 0)
        {

         int startpos = xmltext.indexOf("<TimeZoneResponse");
         xmltext = xmltext.substring(startpos);

        XmlPullParser parser;
        try {
            parser = XmlPullParserFactory.newInstance().newPullParser();

             parser.setInput(new StringReader (xmltext));

             int eventType = parser.getEventType();  

             String tagName = "";

             while(eventType != XmlPullParser.END_DOCUMENT) {
                 switch(eventType) {

                     case XmlPullParser.START_TAG:

                           tagName = parser.getName();

                         break;

                     case XmlPullParser.TEXT :

                        if  (tagName.equalsIgnoreCase("raw_offset"))
                          if(raw_offset.compareTo("")== 0)                               
                            raw_offset = parser.getText();  

                        if  (tagName.equalsIgnoreCase("dst_offset"))
                          if(dst_offset.compareTo("")== 0)
                            dst_offset = parser.getText();  

                        break;   

                 }

                 try {
                        eventType = parser.next();
                    } catch (IOException e) {

                        e.printStackTrace();
                    }

                }

                } catch (XmlPullParserException e) {

                    e.printStackTrace();
                    erg += e.toString();
                }

        }      

        int ro = 0;
        if(raw_offset.compareTo("")!= 0)
        { 
            float rof = str_to_float(raw_offset);
            ro = (int)rof;
        }

        int dof = 0;
        if(dst_offset.compareTo("")!= 0)
        { 
            float doff = str_to_float(dst_offset);
            dof = (int)doff;
        }

        tsLong = (tsLong + ro + dof) * 1000;

        }

  return tsLong;

} 
```

并将其用于：

```
GeoPoint gp = new GeoPoint(39.6034810,-119.6822510);
long Current_TimeZone_Time_l = get_time_zone_time_l(gp); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-11-06T12:37:24.243

通过使用纬度和经度获取以下代码为我工作的当前位置的时区

```
String data = null;         
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
Location ll = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
double lat = 0,lng = 0;
if(ll!=null){
    lat=ll.getLatitude();
    lng=ll.getLongitude();
}
System.out.println(" Last known location of device  == "+lat+"    "+lng);

InputStream iStream = null; 
HttpURLConnection urlConnection = null;
try{
    timezoneurl = timezoneurl+"location=22.7260783,75.8781553&timestamp=1331161200";                    
    // timezoneurl = timezoneurl+"location="+lat+","+lng+"&timestamp=1331161200";

    URL url = new URL(timezoneurl);                
    // Creating an http connection to communicate with url 
    urlConnection = (HttpURLConnection) url.openConnection(); 

    // Connecting to url 
    urlConnection.connect();                

    // Reading data from url 
    iStream = urlConnection.getInputStream();

    BufferedReader br = new BufferedReader(new InputStreamReader(iStream));

    StringBuffer sb  = new StringBuffer();
    String line = "";
    while( ( line = br.readLine())  != null){
        sb.append(line);
    }
    data = sb.toString();
    br.close();

}catch(Exception e){
    Log.d("Exception while downloading url", e.toString());
}finally{
    try {
        iStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    urlConnection.disconnect();
}

try {
    if(data!=null){
        JSONObject jobj=new JSONObject(data);
        timezoneId = jobj.getString("timeZoneId");

        SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
        format.setTimeZone(TimeZone.getTimeZone(timezoneId));

        Calendar cl = Calendar.getInstance(TimeZone.getTimeZone(timezoneId));
        System.out.println("time zone id in android ==  "+timezoneId);

        System.out.println("time zone of  device in android == "+TimeZone.getTimeZone(timezoneId));
        System.out.println("time fo device in android "+cl.getTime());
    }
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-03T04:25:25.590

尝试此代码以使用 Java 中的 Google Time Zone API 与当前 NTP 时间客户端并正确 UTC_Datetime_from_timestamp 转换：

```
String get_xml_server_reponse(String server_url){

    URL xml_server = null;

    String xmltext = "";

    InputStream input;

    try {
        xml_server = new URL(server_url);

        try {
            input = xml_server.openConnection().getInputStream();

            final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
            final StringBuilder sBuf = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) 
                {
                    sBuf.append(line);
                }
               } 
            catch (IOException e) 
              {
                    Log.e(e.getMessage(), "XML parser, stream2string 1");
              } 
            finally {
                try {
                    input.close();
                    }
                catch (IOException e) 
                {
                    Log.e(e.getMessage(), "XML parser, stream2string 2");
                }
            }

            xmltext =  sBuf.toString();

        } catch (IOException e1) {

                e1.printStackTrace();
            }

        } catch (MalformedURLException e1) {

          e1.printStackTrace();
        }

     return  xmltext;

  }     

 private String get_UTC_Datetime_from_timestamp(long timeStamp){

    try{

        Calendar cal = Calendar.getInstance();
        TimeZone tz = cal.getTimeZone();

        int tzt = tz.getOffset(System.currentTimeMillis());

        timeStamp -= tzt;

        // DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",Locale.getDefault());
        DateFormat sdf = new SimpleDateFormat();
        Date netDate = (new Date(timeStamp));
        return sdf.format(netDate);
    }
    catch(Exception ex){
        return "";
     }
    } 

 class NTP_UTC_Time
 {
     private static final String TAG = "SntpClient";

     private static final int RECEIVE_TIME_OFFSET = 32;
     private static final int TRANSMIT_TIME_OFFSET = 40;
     private static final int NTP_PACKET_SIZE = 48;

     private static final int NTP_PORT = 123;
     private static final int NTP_MODE_CLIENT = 3;
     private static final int NTP_VERSION = 3;

     // Number of seconds between Jan 1, 1900 and Jan 1, 1970
     // 70 years plus 17 leap days
     private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

     private long mNtpTime;

     public boolean requestTime(String host, int timeout) {
         try {
             DatagramSocket socket = new DatagramSocket();
             socket.setSoTimeout(timeout);
             InetAddress address = InetAddress.getByName(host);
             byte[] buffer = new byte[NTP_PACKET_SIZE];
             DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);

             buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

             writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET);

             socket.send(request);

             // read the response
             DatagramPacket response = new DatagramPacket(buffer, buffer.length);
             socket.receive(response);          
             socket.close();

             mNtpTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);            
         } catch (Exception e) {
           //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
             return false;
         }

         return true;
     }

     public long getNtpTime() {
         return mNtpTime;
     }

     /**
      * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
      */
     private long read32(byte[] buffer, int offset) {
         byte b0 = buffer[offset];
         byte b1 = buffer[offset+1];
         byte b2 = buffer[offset+2];
         byte b3 = buffer[offset+3];

         // convert signed bytes to unsigned values
         int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
         int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
         int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
         int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

         return ((long)i0 << 24) + ((long)i1 << 16) + ((long)i2 << 8) + (long)i3;
     }

     /**
      * Reads the NTP time stamp at the given offset in the buffer and returns 
      * it as a system time (milliseconds since January 1, 1970).
      */    
     private long readTimeStamp(byte[] buffer, int offset) {
         long seconds = read32(buffer, offset);
         long fraction = read32(buffer, offset + 4);
         return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);        
     }

     /**
      * Writes 0 as NTP starttime stamp in the buffer. --> Then NTP returns Time OFFSET since 1900
      */    
     private void writeTimeStamp(byte[] buffer, int offset) {        
         int ofs =  offset++;

         for (int i=ofs;i<(ofs+8);i++)
           buffer[i] = (byte)(0);             
     }

 }

 String get_time_zone_time(GeoPoint gp){

        String erg = "";
        String raw_offset = "";
        String dst_offset = "";

        double Longitude = gp.getLongitudeE6()/1E6;
        double Latitude = gp.getLatitudeE6()/1E6;

        long tsLong = 0; // System.currentTimeMillis()/1000;

        NTP_UTC_Time client = new NTP_UTC_Time();

        if (client.requestTime("pool.ntp.org", 2000)) {              
          tsLong = client.getNtpTime();
        }

        if (tsLong != 0)
        {

        tsLong = tsLong  / 1000;

        // https://maps.googleapis.com/maps/api/timezone/xml?location=39.6034810,-119.6822510&timestamp=1331161200&sensor=false

        String request = "https://maps.googleapis.com/maps/api/timezone/xml?location="+Latitude+","+ Longitude+ "&timestamp="+tsLong +"&sensor=false";

        String xmltext = get_xml_server_reponse(request);

        if(xmltext.compareTo("")!= 0)
        {

         int startpos = xmltext.indexOf("<TimeZoneResponse");
         xmltext = xmltext.substring(startpos);

        XmlPullParser parser;
        try {
            parser = XmlPullParserFactory.newInstance().newPullParser();

             parser.setInput(new StringReader (xmltext));

             int eventType = parser.getEventType();  

             String tagName = "";

             while(eventType != XmlPullParser.END_DOCUMENT) {
                 switch(eventType) {

                     case XmlPullParser.START_TAG:

                           tagName = parser.getName();

                         break;

                     case XmlPullParser.TEXT :

                        if  (tagName.equalsIgnoreCase("raw_offset"))
                          if(raw_offset.compareTo("")== 0)                               
                            raw_offset = parser.getText();  

                        if  (tagName.equalsIgnoreCase("dst_offset"))
                          if(dst_offset.compareTo("")== 0)
                            dst_offset = parser.getText();  

                        break;   

                 }

                 try {
                        eventType = parser.next();
                    } catch (IOException e) {

                        e.printStackTrace();
                    }

                }

                } catch (XmlPullParserException e) {

                    e.printStackTrace();
                    erg += e.toString();
                }

        }      

        int ro = 0;
        if(raw_offset.compareTo("")!= 0)
        { 
            float rof = str_to_float(raw_offset);
            ro = (int)rof;
        }

        int dof = 0;
        if(dst_offset.compareTo("")!= 0)
        { 
            float doff = str_to_float(dst_offset);
            dof = (int)doff;
        }

        tsLong = (tsLong + ro + dof) * 1000;

        erg = get_UTC_Datetime_from_timestamp(tsLong);
        }

  return erg;

} 
```

并将其用于：

```
GeoPoint gp = new GeoPoint(39.6034810,-119.6822510);
String Current_TimeZone_Time = get_time_zone_time(gp); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-02-10T23:57:42.240

来自古比：

```
import geocoders
g = geocoders.GoogleV3()
place, (lat, lng) = g.geocode('Fairbanks')
print place, (lat, lng)
Fairbanks, AK, USA (64.8377778, -147.7163889)
timezone = g.timezone((lat, lng))
print timezone.dst 
```

绑定`America/Anchorage.dst`方法`DstTzInfo`

**美国/安克雷奇 LMT-1 天，标准时间 14:00:00**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-14T15:33:38.960

**对于我们这些使用 Javascript 并希望通过 Google API 从邮政编码获取时区的**人来说，这是一种方法。

1.  通过地理位置获取纬度/经度
2.  通过将时区传递到[时区 API](https://developers.google.com/maps/documentation/timezone/start?utm_source=google&utm_medium=cpc&utm_campaign=FY18-Q2-global-demandgen-paidsearchonnetworkhouseads-cs-maps_contactsal_saf&utm_content=text-ad-none-none-DEV_c-CRE_433476780412-ADGP_Hybrid%20%7C%20AW%20SEM%20%7C%20SKWS%20~%20Time%20Zone%20API-KWID_43700039136946363-kwd-538188851010-userloc_9001865&utm_term=KW_%2Btime%20%2Bzone%20%2Bapi-ST_%2Btime%20%2Bzone%20%2Bapi&gclid=EAIaIQobChMI66HVxtaz6QIVB2yGCh2QnwFuEAAYASAAEgKOXPD_BwE)来获取时区。
    *   在此处使用[Luxon](https://moment.github.io/luxon/)进行时区转换。

注意：我的理解是邮政编码在各个国家/地区并不是唯一的，因此这可能最适合在美国使用。

```
const googleMapsClient; // instantiate your client here
const zipcode = '90210'
const myDateThatNeedsTZAdjustment; // define your date that needs adjusting
// fetch lat/lng from google api by zipcode
const geocodeResponse = await googleMapsClient.geocode({ address: zipcode }).asPromise();
if (geocodeResponse.json.status === 'OK') {
  lat = geocodeResponse.json.results[0].geometry.location.lat;
  lng = geocodeResponse.json.results[0].geometry.location.lng;
} else {
  console.log('Geocode was not successful for the following reason: ' + status);
}

// prepare lat/lng and timestamp of profile created_at to fetch time zone
const location = `${lat},${lng}`;
const timestamp = new Date().valueOf() / 1000;
const timezoneResponse = await googleMapsClient
  .timezone({ location: location, timestamp: timestamp })
  .asPromise();

const timeZoneId = timezoneResponse.json.timeZoneId;
// adjust by setting timezone
const timezoneAdjustedDate = DateTime.fromJSDate(
  myDateThatNeedsTZAdjustment
).setZone(timeZoneId); 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2014-01-27T19:56:28.307

如果您希望避免使用 Web 服务，则可以从浏览器中检索该信息，如下所示：

```
var d = new Date();
var usertime = d.toLocaleString();

//some browsers / OSs provide the timezone name in their local string
var tzsregex = /\b(ACDT|ACST|ACT|ADT|AEDT|AEST|AFT|AKDT|AKST|AMST|AMT|ART|AST|AWDT|AWST|AZOST|AZT|BDT|BIOT|BIT|BOT|BRT|BST|BTT|CAT|CCT|CDT|CEDT|CEST|CET|CHADT|CHAST|CIST|CKT|CLST|CLT|COST|COT|CST|CT|CVT|CXT|CHST|DFT|EAST|EAT|ECT|EDT|EEDT|EEST|EET|EST|FJT|FKST|FKT|GALT|GET|GFT|GILT|GIT|GMT|GST|GYT|HADT|HAEC|HAST|HKT|HMT|HST|ICT|IDT|IRKT|IRST|IST|JST|KRAT|KST|LHST|LINT|MART|MAGT|MDT|MET|MEST|MIT|MSD|MSK|MST|MUT|MYT|NDT|NFT|NPT|NST|NT|NZDT|NZST|OMST|PDT|PETT|PHOT|PKT|PST|RET|SAMT|SAST|SBT|SCT|SGT|SLT|SST|TAHT|THA|UYST|UYT|VET|VLAT|WAT|WEDT|WEST|WET|WST|YAKT|YEKT)\b/gi;

//in other browsers the timezone needs to be estimated based on the offset
var timezonenames = {"UTC+0":"GMT","UTC+1":"CET","UTC+2":"EET","UTC+3":"EEDT","UTC+3.5":"IRST","UTC+4":"MSD","UTC+4.5":"AFT","UTC+5":"PKT","UTC+5.5":"IST","UTC+6":"BST","UTC+6.5":"MST","UTC+7":"THA","UTC+8":"AWST","UTC+9":"AWDT","UTC+9.5":"ACST","UTC+10":"AEST","UTC+10.5":"ACDT","UTC+11":"AEDT","UTC+11.5":"NFT","UTC+12":"NZST","UTC-1":"AZOST","UTC-2":"GST","UTC-3":"BRT","UTC-3.5":"NST","UTC-4":"CLT","UTC-4.5":"VET","UTC-5":"EST","UTC-6":"CST","UTC-7":"MST","UTC-8":"PST","UTC-9":"AKST","UTC-9.5":"MIT","UTC-10":"HST","UTC-11":"SST","UTC-12":"BIT"};

var timezone = usertime.match(tzsregex);
if (timezone) {
    timezone = timezone[timezone.length-1];
} else {
    var offset = -1*d.getTimezoneOffset()/60;
    offset = "UTC" + (offset >= 0 ? "+" + offset : offset);
    timezone = timezonenames[offset];
}

//there are 3 variables can use to see the timezone
// usertime - full date
// offset - UTC offset time
// timezone - country

console.log('Full Date: ' + usertime);
console.log('UTC Offset: ' + offset);
console.log('Country Code Timezone: ' + timezone); 
```

在我目前的情况下，它正在打印：

**完整日期：** ‎27‎/‎01‎/‎2014‎‎16‎:‎53‎:‎37 **UTC 偏移量：** UTC-3 **国家代码时区：** BRT

希望它会有所帮助。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2019-12-02T05:23:19.247

```
 function jsonpRequest(url, data)
{
    let params = "";
    for (let key in data)
    {
        if (data.hasOwnProperty(key))
        {
            if (params.length == 0)
            {
                params += "?";
            }
            else
            {
                params += "&";
            }
            let encodedKey = encodeURIComponent(key);
            let encodedValue = encodeURIComponent(data[key]);
            params += encodedKey + "=" + encodedValue;
         }
    }
    let script = document.createElement('script');
    script.src = url + params;
    document.body.appendChild(script);
}

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}
let lat_ini=[]; let lon_ini=[];
function showPosition(position) {
  lat_ini= position.coords.latitude;
  lon_ini= position.coords.longitude;
}
////delay time between lines
function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
///////
function getGMT()
{
  getfinalGMT()
  getLocation()
  async function sample() {
    await sleep(2000);
let lat_str=lat_ini.toString();
let lng_str=" "+lon_ini.toString();

  let url = "https://api.opencagedata.com/geocode/v1/json";
  let data = {
    callback: "displayGMT",
    q: lat_str + lng_str,
    key: "fac4471073a347019196c1291e6a97d7"
  }
  jsonpRequest(url, data)
}
 sample();
 }
let your_GMT=[];
function displayGMT(data)
{
your_GMT=(Number(data.results[0].annotations.timezone.offset_string))
console.log(your_GMT)
}
/////
function getfinalGMT()
{
let lat=document.getElementById("lat_id").value; let lng=document.getElementById("lng_id").value;
let lat_str=lat.toString();
let lng_str=" "+lng.toString();

  let url = "https://api.opencagedata.com/geocode/v1/json";
  let data = {
    callback: "displayfinalGMT",
    q: lat + lng_str,
    key: "fac4471073a347019196c1291e6a97d7"
  }
  jsonpRequest(url, data)
 }
let final_GMT=[];
function displayfinalGMT(data)
{
final_GMT=(Number(data.results[0].annotations.timezone.offset_string))
console.log(final_GMT)
}
/////clock

const hourHand = document.querySelector('[data-hour-hand]')
const minuteHand = document.querySelector('[data-minute-hand]')
const secondHand = document.querySelector('[data-second-hand]')
  let dif_overall=[];
function setClock() {
   let gmt_diff=Number(your_GMT-final_GMT)/100
   if (gmt_diff>12){
      dif_overall=gmt_diff-12
   }
   else{
     dif_overall=gmt_diff
   }
    console.log(dif_overall)
  const currentDate = new Date()
  const secondsRatio = currentDate.getSeconds() / 60
  const minutesRatio = (secondsRatio + currentDate.getMinutes()) / 60
  const hoursRatio = (minutesRatio + currentDate.getHours() - dif_overall ) / 12
  setRotation(secondHand, secondsRatio)
  setRotation(minuteHand, minutesRatio)
  setRotation(hourHand, hoursRatio)
}

function setRotation(element, rotationRatio) {
  element.style.setProperty('--rotation', rotationRatio * 360)
}
function activate_clock(){
setClock()
setInterval(setClock, 1000)
}
```

```
*, *::after, *::before {
  box-sizing: border-box;
}

body {
  background: linear-gradient(to right, hsl(200, 100%, 50%), hsl(175, 100%, 50%));
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  overflow: hidden;
}

.clock {
  width: 200px;
  height: 200px;
  background-color: rgba(255, 255, 255, .8);
  border-radius: 50%;
  border: 2px solid black;
  position: relative;
}

.clock .number {
  --rotation: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  text-align: center;
  transform: rotate(var(--rotation));
  font-size: 1.5rem;
}

.clock .number1 { --rotation: 30deg; }
.clock .number2 { --rotation: 60deg; }
.clock .number3 { --rotation: 90deg; }
.clock .number4 { --rotation: 120deg; }
.clock .number5 { --rotation: 150deg; }
.clock .number6 { --rotation: 180deg; }
.clock .number7 { --rotation: 210deg; }
.clock .number8 { --rotation: 240deg; }
.clock .number9 { --rotation: 270deg; }
.clock .number10 { --rotation: 300deg; }
.clock .number11 { --rotation: 330deg; }

.clock .hand {
  --rotation: 0;
  position: absolute;
  bottom: 50%;
  left: 50%;
  border: 1px solid white;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  transform-origin: bottom;
  z-index: 10;
  transform: translateX(-50%) rotate(calc(var(--rotation) * 1deg));
}

.clock::after {
  content: '';
  position: absolute;
  background-color: black;
  z-index: 11;
  width: 15px;
  height: 15px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
}

.clock .hand.second {
  width: 3px;
  height: 45%;
  background-color: red;
}

.clock .hand.minute {
  width: 7px;
  height: 40%;
  background-color: black;
}

.clock .hand.hour {
  width: 10px;
  height: 35%;
  background-color: black;
}

/* Background Styles Only */

@import url('https://fonts.googleapis.com/css?family=Raleway');

* {
    font-family: Raleway;
}

.side-links {
  position: absolute;
  top: 15px;
  right: 15px;
}

.side-link {
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  margin-bottom: 10px;
  color: white;
  width: 180px;
  padding: 10px 0;
  border-radius: 10px;
}

.side-link-youtube {
  background-color: red;
}

.side-link-twitter {
  background-color: #1DA1F2;
}

.side-link-github {
  background-color: #6e5494;
}

.side-link-text {
  margin-left: 10px;
  font-size: 18px;
}

.side-link-icon {
  color: white;
  font-size: 30px;
}
```

```
 <input type="text" id="lat_id" placeholder="lat"><br><br>
  <input type="text" id="lng_id" placeholder="lng"><br><br>
<button class="text" onClick="getLocation()">Location</button>
<button class="text" onClick="getGMT()"> GMT</button>
<button class="text" onClick="activate_clock()"> Activate</button>
<div class="clock">
  <div class="hand hour" data-hour-hand></div>
  <div class="hand minute" data-minute-hand></div>
  <div class="hand second" data-second-hand></div>
  <div class="number number1">1</div>
  <div class="number number2">2</div>
  <div class="number number3">3</div>
  <div class="number number4">4</div>
  <div class="number number5">5</div>
  <div class="number number6">6</div>
  <div class="number number7">7</div>
  <div class="number number8">8</div>
  <div class="number number9">9</div>
  <div class="number number10">10</div>
  <div class="number number11">11</div>
  <div class="number number12">12</div>
</div>
```

# c# - 我在哪里可以找到 System.Windows.Media ？媒体不存在

> ID：16086966
> 
> 赞同：0
> 
> 时间：2013-04-18T15:24:12.450
> 
> 标签：c#

我试过了：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Data;
using System.Text;
using System.Windows.Forms;
using AviFile;
using ScreenShotDemo;
using System.Threading;
using System.Windows. 
```

在我的新课程中，但在底部 system.Windows 中。没有媒体

我使用 Visual c# pro 2012 和 .net 4.5 尝试将其添加为参考，在 .net 和 COM 中查找它，但它不存在。

我需要它的原因是在我的代码中我有 PixelFormat 并且它不存在：

```
Bitmap bmpScreenShot = new Bitmap(currentScreen.Bounds.Width,
currentScreen.Bounds.Height,
PixelFormat.Format32bppArgb); 
```

PixelFormat 不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:26:58.057

您需要将 System.Drawing.Imaging 添加到您的 using 语句中。

您通常可以通过右键单击有问题的项目并选择“解决”轻松找到需要包含的内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-23T03:37:59.950

我正在写这个答案，就像我一样，花了几个小时试图找到一个`using System.Windows.Media`，但无法获得 BitmapImage。只需使用`using Windows.UI.Xaml.Media.Imaging`. 它工作得很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:26:17.627

System.Windows.Media 需要引用 PresentationCore.dll 和

Pixelformat 需要引用 System.Drawing.dll。

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)的参考。

# python - 子进程 stdin.write 期间管道损坏

> ID：16086970
> 
> 赞同：2
> 
> 时间：2013-04-18T15:24:27.887
> 
> 标签：python, subprocess, pipe

我与用于标记句子的服务器交互。此服务器在端口上本地启动`2020`。

例如，如果我通过下面使用的客户端`Je mange des pâtes .`在端口上发送`2020`，服务器会回答`Je_CL mange_V des_P pâtes_N ._.`，结果总是只有一行，如果我的输入不为空，结果总是一行。

我目前必须通过此服务器标记 9 568 个文件。前 9 483 个文件按预期标记。之后，输入流似乎已关闭/已满/其他，因为`IOError`当`Broken Pipe`我尝试在`stdin`.

当我跳过前 9 483 个第一个文件时，最后一个文件被标记为没有任何问题，包括导致第一个错误的文件。

我的服务器没有产生任何错误日志，表明发生了一些可疑的事情......我是否处理错误？一段时间后管道出现故障是否正常？

```
log = codecs.open('stanford-tagger.log', 'w', 'utf-8')
p1 = Popen(["java",
            "-cp", JAR,
            "edu.stanford.nlp.tagger.maxent.MaxentTaggerServer",
            "-client",
            "-port", "2020"],
           stdin=PIPE,
           stdout=PIPE,
           stderr=log)

fhi = codecs.open(SUMMARY, 'r', 'utf-8') # a descriptor of the files to tag

for i, line in enumerate(fhi, 1):
    if i % 500:
        print "Tagged " + str(i) + " documents..."
    tokens = ... # a list of words, can be quite long
    try:
        p1.stdin.write(' '.join(tokens).encode('utf-8') + '\n')
    except IOError:
        print 'bouh, I failed ;(('
    result = p1.stdout.readline()
    # Here I do something with result...
fhi.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:14:06.030

除了我的评论，我可能会建议其他一些更改...

```
for i, line in enumerate(fhi, 1):
    if i % 500:
        print "Tagged " + str(i) + " documents..."
    tokens = ... # a list of words, can be quite long
    try:
        s = ' '.join(tokens).encode('utf-8') + '\n'
        assert s.find('\n') == len(s) - 1       # Make sure there's only one CR in s
        p1.stdin.write(s)
        p1.stdin.flush()                        # Block until we're sure it's been sent
    except IOError:
        print 'bouh, I failed ;(('
    result = p1.stdout.readline()
    assert result                               # Make sure we got something back
    assert result.find('\n') == len(result) - 1 # Make sure there's only one CR in result
    # Here I do something with result...
fhi.close() 
```

...但鉴于还有一个我们一无所知的客户端/服务器，有很多地方可能会出错。

如果您将所有查询转储到一个文件中，然后使用类似...的命令行从命令行运行它，它是否有效？

```
java .... < input > output 
```

# android - 在 MULTIPLE textViews 中设置 textColor

> ID：16086972
> 
> 赞同：3
> 
> 时间：2013-04-18T15:24:34.840
> 
> 标签：android, xml

我想更改很多 textViews 的 textColor，并设置为红色。现在，这是我的 xml 代码，第一个 textView 更改为 red ：

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minWidth="150dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/data1_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Latitude" 
            android:textColor="#FF0000"/>

        <TextView
            android:id="@+id/data1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Latitude_val" />

        <TextView
            android:id="@+id/data2_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Longitude" />

        <TextView
            android:id="@+id/data2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Longitude_val" />

        <TextView
            android:id="@+id/data3_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Altitude" />

        <TextView
            android:id="@+id/data3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Altitude_val" />

        <TextView
            android:id="@+id/data4_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Vitesse GPS" />

        <TextView
            android:id="@+id/data4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Vitesse GPS_val" />
    </LinearLayout> 
```

如您所见，textViews 在线性布局内，但遗憾的是，您不能只`android:textColor`在布局参数中使用。

这里我只显示了4个textViews，但是还有很多，我不想给每个一个参数一个一个（想象一下，如果我想在那之后改变颜色......）

是否有某种标签来指示一堆 textViews 的样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-02T12:02:06.843

像这样的东西会为你工作。

```
 private void setTextColor()
    {
    /*put id(s) of all the TextView you want to change the color of,
    In an array and call setTextColor() for all the array items*/
    int textViews[]={R.id.data1_text,R.id.data1,R.id.data2_text,R.id.data2,R.id.data3_text,R.id.data3};
    for(int i=0;i<textViews.length;i++)
    ((TextView)findViewById(textViews[i])).setTextColor(Color.RED);
    } 
```

现在，`setTextColor()`从你的`onCreate()`方法调用。
您还可以创建类似的功能来设置文本大小和其他好东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:42:00.763

您可以以编程方式为编辑文本添加颜色，例如：

```
EditText et = (EditText) findViewById(R.id.edit1);
// to set text color using RGB code
et.setTextColor(Color.parseColor("#FF0000")); 
```

您也可以在 XML 中执行此操作，例如：

```
android:textColor="#FF0000" 
```

**或者，如果您首先在/res/values/mycolor.xml**中为颜色创建 xml 定义，则更好，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<color name="red">#ff0000</color>
<color name="green">#00ff00</color>
<color name="blue">#0000ff</color>
</resources> 
```

并设置editText的颜色，如：

```
 android:textColor="@android:color/white" 
```

并以编程方式喜欢：

```
 et.setTextColor(R.color.white); 
```

希望能帮助到你;

# java - List.add() 类预期

> ID：16086984
> 
> 赞同：1
> 
> 时间：2013-04-18T15:24:50.520
> 
> 标签：java, list

我正在大学里上 Java 课。我的导师实际上是一位从 C 派生的语言的老师，所以她无法弄清楚这段代码是怎么回事。我在这个页面上读到[http://docs.oracle.com/javase/6/docs/api/java/util/List.html](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)我可以使用语法“list[].add(int index, element)”来将特定对象或计算添加到特定索引中，从而减少了所需的编码量。我要创建的程序是用于 D&D 的随机统计生成器，用于练习。给出错误的方法如下：

//StatGenrator 与 ActionListener 一起使用

```
private String StatGenerator ()
{
        int finalStat;
        String returnStat;

        //Creates an empty list.
        int[] nums={};

        //Adds a random number from 1-6 to each list element.
        for (int i; i > 4; i++)
            nums[].add(i, dice.random(6)+1); //Marks 'add' with "error: class expected"

        //Sorts the list by decending order, then drops the
        //lowest number by adding the three highest numbers 
        //in the list.            
        Arrays.sort(nums);
        finalStat = nums[1] + nums[2] + nums[3]; 

        //Converts the integer into a string to set into a 
        //texbox.
        returnStat = finalStat.toString();
        return returnStat;
} 
```

我的最终目标是使用某种排序列表或删除集合中最小值的方法。该方法的要点是从 1-6 生成 4 个随机数，然后将最低的去掉，将最高的三个相加。最后一个数字将是文本框的文本，因此它被转换为字符串并返回。代码的其余部分正常工作，我只是在使用这种方法时遇到了问题。

如果有人有任何想法，我会全力以赴。我进行了一些研究，发现了一些关于使用 ArrayList 制作新 List 对象的信息，但我不确定它的语法。最后一点，我尝试在另一个问题中寻找这种语法，但我在 stackoverflow 上的任何地方都找不到它。抱歉，如果我在某处遗漏了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:27:50.460

'int nums[]' 不是一个列表，它是一个数组。

```
List<Integer> intList = new ArrayList<>(); 
```

例如，创建一个新的 ArrayList。

您可以使用以下语法直接访问列表中的元素：

```
intList.get(0); // Get the first Element 
```

您可以使用 Collections 类对列表进行排序：

```
Collections.sort(intList); 
```

以下是有关 Java 集合的一些信息：http: [//docs.oracle.com/javase/tutorial/collections/](http://docs.oracle.com/javase/tutorial/collections/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:27:42.170

数组是固定大小的，因此您需要在开始时为所有插槽分配空间。然后将数字放入数组分配给`nums[i]`. 不需要 add() 方法。

```
int[] nums = new int[4];

for (int i = 0; i < 4; i++)
    nums[i] = dice.random(6) + 1;

Arrays.sort(nums);
finalStat = nums[1] + nums[2] + nums[3]; 
```

* * *

或者，如果您真的想要一个动态大小的数组，请使用 ArrayList。ArrayList 可以增长和缩小。

```
List<Integer> nums = new ArrayList<Integer>();

for (int i = 0; i < 4; i++)
    nums.add(dice.random(6) + 1);

Collections.sort(nums);
finalStat = nums.get(1) + nums.get(2) + nums.get(3); 
```

请注意，由于 ArrayList 是一个类而不是内置类型，因此语法有多么不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:28:35.280

> nums[].add(i, dice.random(6)+1); //用“错误：预期的类”标记“添加”

您正在尝试`add`在数组上使用。List 是一个动态数组，但这并不意味着**array == List**。您应该改用 List 。

```
 List<Integer> nums=new ArrayList<Integer>();

//Adds a random number from 1-6 to each list element.
for (int i; i > 4; i++)
    nums.add(i, dice.random(6)+1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:29:49.237

您正在混合数组和列表。

看看教程：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

[http://docs.oracle.com/javase/tutorial/collections/index.html](http://docs.oracle.com/javase/tutorial/collections/index.html)

# facebook - 向 Facebook 发送电子邮件并收到错误 POL-P8

> ID：16086985
> 
> 赞同：2
> 
> 时间：2013-04-18T15:24:53.543
> 
> 标签：facebook, email, smtp

我使用 SwiftMailer 向 facebook 用户发送邮件。有时我收到来自 facebook 邮件服务器的回复说：554 5.7.1 POL-P8 [http://postmaster.facebook.com/response_codes?#pol-m](http://postmaster.facebook.com/response_codes?#pol-m)消息被拒绝（回复 DATA 命令的结尾））

请告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T16:39:16.297

我不确定，但这可能是由于域名的 SPF 记录无效或不存在造成的。

查看更多：[http ://en.wikipedia.org/wiki/Sender_Policy_Framework](http://en.wikipedia.org/wiki/Sender_Policy_Framework)

# c# - CQRS 按特定顺序运行处理程序

> ID：16086986
> 
> 赞同：1
> 
> 时间：2013-04-18T15:24:54.313
> 
> 标签：c#, events, cqrs, handlers

我有 2 个处理程序删除和重新排序图片的运行订单，并希望获得一些最佳解决方案的建议。

在 UI 上一些图片被删除，用户点击删除按钮。整个流程，删除命令直到实际删除物理文件的事件处理程序被启动。

然后用户立即对剩余的图片进行分类。从重新排序命令到文件系统的重新排序事件处理程序的新流程再次触发。

已经存在并发问题。如果没有完成删除，则无法正确应用重新排序。目前这个问题是用某种锁来处理的。创建一个临时文件，然后在删除流程结束时将其删除。当该文件存在时，另一个线程（根据用户操作重新排序或删除）等待。

这不是一个理想的解决方案，并希望对其进行更改。潜在的解决方案也必须非常快（当然当前的解决方案不是很快的），因为 UI 在订购结束时通过 JSON 调用进行更新。

在稍后的实现中，我们正在考虑使用事件队列，但目前我们陷入了困境。

任何想法将不胜感激！谢谢你，摩苏'！

编辑：我们通过在客户端使用 Javascript 数据管理器解决了其他最终一致性问题。基本上是乐观主义者并欺骗用户！:) 我开始相信这也是去这里的方式。但是我怎么知道文件系统中的数据何时更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:45:03.127

Here is one thought on this. What exactly you are reordering? Pictures? Based on, say, date. Why there is command for this? The result of this command going to be seen by everyone or just this particular user?

I can only guess, but it looks like you've got a presentation question here. There is no need to store pictures in some order on the write side, it's just a list of names and links to the file storage. What you should do is to store just a little field somewhere in the user settings or collection settings: Date ascending or Name descending. So you command Reorder should change only this little field. Then when you are loading the gallery this field should be read first and based on this you should load one or another view. Since the store is cheap nowadays, you can store differently sorted collections on the read side for every sort params you need.

To sum up, Delete command is changing the collection on the write side, but Reoder command is just user or collection setting. Hence, there is no concurrency here.

**Update**

Based on your comments and clarifications.

1.  Of course, you can and, probably, should restrict user actions only by one at the time. If time of deletion and reordering is reasonably short. It's always a question of type of user experience you are asked to achieve. Take a usual example of ordering system. After an order placed, user can almost immediately see it in the UI and the status will be something like *InProcess*. Most likely you won't let user to change the order in any way, which means you are not going to show any user controls like Cancel button(of course this is just an example). Hence, you can use this approach here.
2.  If 2 users can modify the same physical collection, you have no choice here - you are working with shared data and there should be kind of synchronization. For instance, if you are using sagas, there can be a couple of sagas: Collection reordering saga and Deletion saga - they can cooperate. Deletion process started first - collection aggregate was marked as deletion in progress and then right after this reordering saga started, it will attempt to start the reordering process, but since deletion saga is inprocess, it should wait for DeletedEvent and continue the process afterwards.The same if Reordering operation started first - the Deletion saga should wait until some event and continue after that event arrived.

**Update**

Ok, if we agreed not touch the file system itself, but the aggregate which represents the picture collection. The most important concurrency issues can be solved with optimistic concurrency approach - in the data storage a unique constraint, based on aggregate id and aggregate version, is usually used.

Here are the typical steps in the command handler:

This is the common sequence of steps a command handler follows:

1.  Validate the command on its own merits.
2.  Load the aggregate.
3.  Validate the command on the current state of the aggregate.
4.  Create a new event, apply the event to the aggregate in memory.
5.  Attempt to persist the aggregate. If there's a concurrency conflict during this step, either give up, or retry things from step 2.

Here is the link which helped me a lot some time ago: [http://www.cqrs.nu/](http://www.cqrs.nu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:22:03.933

最大的建议非常受欢迎，通常它们适用。

有时很难解释实现的所有细节，但有一个细节应该提到：我们存储图片的方式意味着当重新排序时，所有图片路径（以及所有链接）都会发生变化。

一位同事想到了简单地删除这部分的好主意。这意味着即使顺序会改变图片的路径也将保持不变。在 UI 端，显示顺序中的图片索引与其路径之间会有一个映射，这意味着除了删除时，无需再更改文件系统。

由于我们希望对我们的用户尽可能宽容，这对我们来说是最好的解决方案。我认为，总的来说，当出现并发问题时，这也是一种好方法。可以去掉并发吗？

# python - 请求如何在 python rq 中得到通知？

> ID：16086992
> 
> 赞同：1
> 
> 时间：2013-04-18T15:25:03.733
> 
> 标签：python, asynchronous, worker

我是否正确理解了[http://python-rq.org/](http://python-rq.org/)，因为它在后台对作业进行排队，但触发作业的请求从未收到有关结果的通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T16:27:07.783

我认为完成工作后你可以回调通知工作已经完成。

# html - 应用程序应该将 html 内容或 markdown 内容保存到数据库中吗？

> ID：16086994
> 
> 赞同：2
> 
> 时间：2013-04-18T15:25:04.843
> 
> 标签：html, editor, markdown, epiceditor

我现在正在构建一个简单的应用程序，其中包括编辑博客等内容。我有一些选择，例如 tinymc，一个很好的 html 编辑器，我打算使用它。但后来我发现了一些关于降价的东西，它很容易使用，现在也很流行。在 Markdown 支持的编辑器中，EpicEditor 是一个不错的选择。由于某些原因，WYSIWYGs 很糟糕而且很复杂。所以我决定使用降价编辑器。

然后在node.js服务器端，我有两种存储内容的选择，要么是markdown，要么是html，就像在cod中一样，它首先将markdown解析为html，然后将其保存到数据库中。

```
app.post('/post', function(req, res){
    var currentUser = req.session.user,
        html = markdown.makeHtml(req.body.post),
        post = new Post(currentUser.name, req.body.title, html);
    post.save(function(err){
        if(err){
            req.flash('error', err); 
            return res.redirect('/');
        }
        req.flash('success', 'scc!');
        res.redirect('/');
    });
}); 
```

将 html 保存到数据库的好处是，应用在加载内容时不需要从 markdown 解析为 html。而将markdown保存到数据库的好处是，当用户想再次编辑内容时，客户端更容易编辑markdown内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:06:14.983

一般来说，最好保留原始输入，然后（按需）将其转换为目标视图。这使您可以将原始输入呈现回来以供以后编辑，并将原始输入转换为不同格式的不同视图（例如，如果您想将数据放入电子邮件中，您可以将降价保留为文本的纯文本电子邮件的版本）。

也就是说，Markdown 到 HTML 的成本可能很高（就 CPU 而言），因此您可能希望在输入时（或首次查看时）将其转换为 HTML，然后缓存结果（可能在与降价存储）。不过，您仍然应该保留原始输入。

# android - Android InApp 计费 V3 - 订阅验证

> ID：16086997
> 
> 赞同：0
> 
> 时间：2013-04-18T15:25:08.470
> 
> 标签：android, in-app-purchase, in-app-billing

Android [InApp billing](http://developer.android.com/google/play/billing/billing_subscriptions.html)的文档中写着`With In-app Billing Version 3, the failed or expired subscription is no longer returned when you call getPurchases.`

这到底是什么意思？
在 V3 中是否可以通过[开发人员 API](http://developer.android.com/google/play/billing/billing_subscriptions.html#play-dev-api)验证订阅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:11:19.987

每当您的应用程序需要知道用户购买的所有内容时，它必须调用一个名为`getPurchases()`. 这将返回一个`json`对象，其中包含用户已购买的所有产品 ID 的详细信息。

**是**的，您可以使用基于 http 的 API 从后端服务器验证或取消订阅。

# jquery - .animate 回调在其他 .animate 加载 2 次

> ID：16086999
> 
> 赞同：0
> 
> 时间：2013-04-18T15:25:10.233
> 
> 标签：jquery, callback, scrolltop

我想做这个：

1.  从顶部滚动到 440
2.  `#detail`用动画打开
3.  加载我的`id.html`内心`#detail`
4.  对此 HTML 内容制作了 CSS 动画

我想一步一步地做到这一点：

第 2 步/ 在第 1 步之后执行/

第 3 步/ 在第 2 步之后执行/

第 4 步/ 在第 3 步之后执行/

但我有一个问题：我的`.load`函数执行了两次。我不明白为什么。

```
$('html,body').animate({scrollTop:(440)}, 1300,'easeInSine', function() {
    $('#detail').animate({height: detail_height}, 800, function() {
        $('#detail').load('pages/web/' + id + '.html', function() {
            //do something
    });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:27:58.787

当您`n`为元素设置动画时，回调将发生`n`多次。这是预期的行为。

如果您希望获得单个回调来为多个元素设置动画，请使用 Promise 对象。

```
$('html,body').animate({scrollTop:(440)}, 1300,'easeInSine').promise().done(function() {
    $('#detail').animate({height: detail_height}, 800, function() {
        $('#detail').load('pages/web/' + id + '.html', function() {
            //do something
        });
    });
}); 
```

另一种方法是只选择 html 或 body，而不是两者。