# StackOverflow 问答 14988000-14988999

# ios - 将 UIAppearance 用于单独的 UI 元素

> ID：14988002
> 
> 赞同：-2
> 
> 时间：2013-02-20T19:09:42.370
> 
> 标签：ios, uikit, uiappearance

我想用来将我的应用程序`UIAppearance`中所有字体的大小设置`UIButtons`为 15，并将我的应用程序中所有字体的大小设置`UILabels`为 10。这就是我所拥有的：

```
UIFont *dinMediumFont = [UIFont fontWithName:@"DINPro-Medium" size:15];
[[UILabel appearanceWhenContainedIn:[UIButton class], nil] setFont:dinMediumFont];

UIFont *dinBoldFontBig = [UIFont fontWithName:@"DINPro-Bold" size:10];
[[UILabel appearanceWhenContainedIn:nil] setFont:dinBoldFontBig]; 
```

但是，我希望按钮的字体`UINavigationBars`更小，我尝试添加：

```
UIFont *smallerFont =[UIFont fontWithName:@"DINPro-Medium" size:15];
[[UILabel appearanceWhenContainedIn:[UIButton class], [UINavigationBar class], nil] setFont:smallerFont]; 
```

但字体保持为默认值......为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:34:57.217

导航栏中的按钮不是它的任何子类的实例`UIButton`；相反，它们是`UIBarButtonItem`.

`UIBarButtonItem`的文本实际上不是一个`UILabel`实例：您的第二个代码段将需要在的外观代理上设置属性，而不是在代理`UILabel`的外观上设置属性。`UIButton``font``UIBarButtonItem`

# css - 如何将图像作为英雄单元的背景？

> ID：14988013
> 
> 赞同：1
> 
> 时间：2013-02-20T19:10:12.523
> 
> 标签：css, twitter-bootstrap

到目前为止，我的 css 中有这个：

```
hero-unit {
        background-image: myark.jpg;    
} 
```

看起来很明显，但它不起作用。

```
.hero_unit{
           } 
```

也不行。对不起。如果你不知道，我是新手。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T19:11:57.530

尝试

```
.hero-unit {
  background-image: url(myark.jpg);    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:14:03.813

你似乎错过了一些东西：

```
.hero-unit {
        background-image: url('myark.jpg');    
} 
```

这应该适合你。你错过了财产的`url()`一部分。`background-image`

# c++ - 让 QObject 在执行函数之前等待它的监听器

> ID：14988015
> 
> 赞同：1
> 
> 时间：2013-02-20T19:10:13.533
> 
> 标签：c++, qt, signals-slots, qobject

我正在使用结构光，我有我写`QCamera`的`QProjector`课程。当投影仪投射一个图案时，它必须等待所有连接的相机捕捉到该图案，然后才能移动到下一个。

我现在的模型是这样的：

*   `QProjector`投影图像并发出信号`patternProjected(Pattern*)`。
*   Connected `QCamera`s 接收信号并连接到投影仪的`hold()`信号（见下文）。然后相机开始异步捕获图像并`frameCaptured(cv::Mat)`在完成后发射。

以前我`hold()`在`QProjector`. 希望投影仪等待它的相机会调用

```
connect(projector,SIGNAL(hold()),camera,SLOT(wait()))` 
```

哪里`camera->wait()`是一个虚拟函数。然后，在 中`projector->disconnectNotify()`，投影仪检查是否`receivers(SIGNAL(hold()))`为零。如果是，则投影仪将移动到其队列中的下一个图案；如果没有，它会再等一些。

这种方法是一团糟，甚至行不通——不能保证投影仪在发射`patternProjected()`和接收来自相机的连接之间不会移动到下一个模式。

任何人都有一种更清洁的方法，最好是一种更符合`QObject`哲学的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:14:41.423

您可以在`QProjector`with中初始化一个成员变量`receivers(SIGNAL(hold()))`，并且每次调用该插槽时，都将其递减。当计数器到达`0`时，您重新初始化`receivers(SIGNAL(hold()))`并投射另一个模式。

当然，在这种情况下`hold()`是一个可怕的（非语义）名称，您应该将其重命名为`patternRead()`或类似的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:33:13.097

您可以像这样提供一个中介对象：

```
//startWork increments some internal counter
connect(camera_1...n, SIGNAL(captureStarted()), mediator, SLOT(startWork()))

//stopWork decrements the counter, when counter reaches 0 emits trigger()
connect(camera_1...n, SIGNAL(captureFinished()), mediator, SLOT(stopWork()))

//startCapture emits captureStarted
connect(projector, SIGNAL(patternProjected()), camera_1...n, SLOT(startCapture())

//projectNext emits patternProjected
connect(mediator, SIGNAL(trigger()), projector, SLOT(projectNext())) 
```

# cruisecontrol.net - CruiseControl.Net 间歇性检测 SVN 修改

> ID：14988019
> 
> 赞同：1
> 
> 时间：2013-02-20T19:10:32.297
> 
> 标签：cruisecontrol.net, ccnet-config

我正在使用 ccnet 1.6。我的构建服务器和 svn 服务器时钟同步非常接近（小于 30 秒的差异）。我的 ccnet 配置文件具有轮询 SVN 修改的正确设置，如下所示：

```
 <triggers>
            <intervalTrigger name="continuous" seconds="30" buildCondition="IfModificationExists" initialSeconds="30"/>
        </triggers>

<sourceControlProvider type="svn" autoGetSource="true">
                <trunkUrl>xxx</trunkUrl>
                <executable>C:\Program Files\CollabNet\Subversion Client\svn.exe</executable>
                <username>brian</username>
                <password>xxx</password>
                <cleanCopy>true</cleanCopy>
            </sourceControlProvider> 
```

当我提交任何东西时，构建被触发，我是 brian，为 sourceControlProvider 提供的用户名。一个团队成员进行了提交，并且为他间歇性地触发了构建。也许它对我来说也是间歇性触发的，但我似乎总是很幸运并在我提交时触发构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:56:22.310

您可以尝试使用修订号而不是时间戳来检测更改。

这可以使用“revisionNumbers”属性来启用。

检查文档：[http://cruisecontrolnet.org/projects/ccnet/wiki/Subversion_(svn)](http://cruisecontrolnet.org/projects/ccnet/wiki/Subversion_(svn))

# java - 当休眠模块尝试为 sqlserver 加载 JNetDirect 驱动程序时，Jboss 7 出现 ClassNotFoundException

> ID：14988020
> 
> 赞同：0
> 
> 时间：2013-02-20T19:10:34.897
> 
> 标签：java, sql-server, hibernate, jboss7.x

我在 CentOS 6.3 下运行 Jboss 7.1.1。我有一场能够在 Jboss 4.0.2 下运行的战争（旧的，我知道，这就是我们要更新的原因），但我很难让它在 Jboss 7 下运行。

在我的 META-INF/MANIFEST.MF 文件下，我有以下条目：

```
Dependencies: com.jnetdirect,org.hibernate 
```

在我的 META-INF/jboss-deployment-structure.xml 我有：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
  <deployment>
      <dependencies>
            <module name="org.hibernate" export="true" />
            <module name="com.jnetdirect" export="true" />
      </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

我创建了 {JBOSS_HOME}/modules/com/jnetdirect/main 文件夹，并在其中放置了 JSQLConnect.jar、JSQLConnect.jar.index 和 module.xml。

我的 module.xml 文件包含：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.jnetdirect">
    <resources>
        <resource-root path="JSQLConnect.jar"/>
    </resources>
    <dependencies>
        <module name="javax.api"/>
        <module name="javax.transaction.api"/>
        <module name="javax.servlet.api" optional="true"/>
    </dependencies>
</module> 
```

我的 JSQLConnect.jar。包含 的输出`jar -tf JSQLConnect.jar`，我`.class`从使用 vim 和`:%s/.class//`

当我`./standalone.sh`从 {JBOSS_HOME}/bin 运行时，我得到以下信息：

```
13:38:12,402 ERROR [stderr] (MSC service thread 1-1) org.hibernate.HibernateException: Specified JDBC Driver com.jnetdirect.jsql.JSQLDriver class not found
13:38:12,402 ERROR [stderr] (MSC service thread 1-1)    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:104)
<snip>
13:38:12,430 ERROR [stderr] (MSC service thread 1-1) Caused by: java.lang.ClassNotFoundException: com.jnetdirect.jsql.JSQLDriver from [Module "org.hibernate:main" from local module loader @34985fc6 (roots: /usr/local/src/jboss-as-7.1.1.Final/modules)]
13:38:12,434 ERROR [stderr] (MSC service thread 1-1)    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
<snip>
13:38:12,452 INFO  [stdout] (MSC service thread 1-1) com.cs.common.cache.SessionFactoryCache.processRequest : Exception : org.hibernate.HibernateException: Specified JDBC Driver com.jnetdirect.jsql.JSQLDriver class not found
13:38:12,453 INFO  [stdout] (MSC service thread 1-1)    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:104)
<snip>
13:38:12,484 INFO  [stdout] (MSC service thread 1-1) Caused by: java.lang.ClassNotFoundException: com.jnetdirect.jsql.JSQLDriver from [Module "org.hibernate:main" from local module loader @34985fc6 (roots: /usr/local/src/jboss-as-7.1.1.Final/modules)]
13:38:12,484 INFO  [stdout] (MSC service thread 1-1)    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) 
```

我尝试在我的standalone.xml 中包含以下内容：

```
 <subsystem xmlns="urn:jboss:domain:datasources:1.0">
        <datasources>
            <datasource jndi-name="java:jboss/datasources/REDACTED" pool-name="REDACTED" enabled="true" use-java-context="true">
                <connection-url>jdbc:JSQLConnect://redacted.net:1433;DatabaseName=REDACTED</connection-url>
                <driver>jnetdirect</driver>
                <security>
                    <user-name>redacted</user-name>
                    <password>redacted</password>
                </security>
            </datasource>
            <drivers>
                <driver name="jnetdirect" module="com.jnetdirect">
                    <driver-class>com.jnetdirect.jsql.JSQLDriver</driver-class>
                </driver>
            </drivers>
        </datasources>
    </subsystem> 
```

当我这样做时，我在启动时看到以下条目：

```
13:38:09,720 WARN  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010402: Unable to instantiate driver class "com.jnetdirect.jsql.JSQLDriver": java.lang.ClassNotFoundException: com.jnetdirect.jsql.JSQLDriver from [Module "com.jnetdirect:main" from local module loader @34985fc6 (roots: /usr/local/src/jboss-as-7.1.1.Final/modules)]
13:38:09,748 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
13:38:09,755 INFO  [org.jboss.as.security] (MSC service thread 1-3) JBAS013100: Current PicketBox version=4.0.7.Final
13:38:09,769 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
13:38:09,771 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
13:38:09,786 ERROR [org.jboss.as.controller.management-operation] (ServerService Thread Pool -- 27) Operation ("add") failed - address: ([
    ("subsystem" => "datasources"),
    ("jdbc-driver" => "jnetdirect")
]) - failure description: "JBAS010434: Unable to instantiate driver class \"com.jnetdirect.jsql.JSQLDriver\". See log (WARN) for more details" 
```

但是和以前一样的 ClassNotFoundException。

有趣的是，当我关闭服务器时，我看到以下内容：

```
13:38:17,424 INFO  [org.jboss.as.server.deployment] JBAS015877: Stopped deployment common.war in 40ms
13:38:17,426 INFO  [org.jboss.as.controller] JBAS014774: Service status report
JBAS014776:    Newly corrected services:
      service jboss.jdbc-driver.jnetdirect (new available)

13:38:17,430 INFO  [org.jboss.as] JBAS015950: JBoss AS 7.1.1.Final "Brontes" stopped in 39ms 
```

我正在删除standalone/log 和standalone/tmp 目录，以及每次运行之间的common.war.deployed 文件。

我想既然这是一个休眠问题，我应该添加`com.jnetdirect`到休眠模块的依赖项中，但这并没有帮助。

我已经查看了[jboss 7 AS 的 sqlserver 数据源、](https://stackoverflow.com/questions/8400332/jboss-7-as-datasource-for-sqlserver) JBoss [7 上的 JDBC Postgresql 驱动程序](https://stackoverflow.com/questions/14873924/jdbc-postgresql-driver-on-jboss-7)、[如何将 Jboss-as-7.1.1 与 Postgresql](https://stackoverflow.com/questions/12403428/how-to-connect-jboss-as-7-1-1-with-postgresql)和[https://community.jboss.org/thread/202025](https://community.jboss.org/thread/202025)连接，尽管没有这些是特定于 JNETDirect 的。

（由于高层的订单，我们正在使用 JNETDirect，所以我无法切换到另一个 JDBC 驱动程序）

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:49:14.707

原来问题出在模块中的我的 .index 文件上。我删除了它，它加载得很好。不知道 .index 文件应该用于什么或为什么我的文件被破坏了。

# jwplayer - 我如何将此 m3u8 嵌入到 jw 播放器中

> ID：14988021
> 
> 赞同：9
> 
> 时间：2013-02-20T19:10:35.723
> 
> 标签：jwplayer, m3u8

这里是新手，所以如果你能对我有耐心，我真的很感激。

现在我有这个网址

```
http://213.202.73.8:1234/data/channels/ARENA1\. m3u8 
```

我想把它嵌入到我的 JW 播放器中，我有 JW 播放器 5 和 6 所以无论是最简单的，有人可以帮助兄弟吗，我需要什么代码来嵌入它，以便它在 JW 播放器上播放如果可能的话。

如果您可以编写完整的代码，那么我可以理解因为我在这里说的是一个新手，但学习速度很快，哈哈。

干杯伙计们

**更新：**

好的，所以我有点摆弄，然后环顾四周想出了这个代码：

```
<script type='text/javascript' src='jwplayer2/jwplayer.js'></script>

<div id='mediaplayer'></div>

<script type="text/javascript">
jwplayer('mediaplayer').setup({
'id': 'playerID',
'width': '480',
'height': '270',
'file': 'http://213.202.73.8:1234/data/channels/ARENA1\. m3u8',
'image': '/thumbs/bunny.jpg',
'modes': [
{type: 'html5'},
{type: 'flash', src: 'player.swf'},
{type: 'download'}
]
});
</script> 
```

所以它在 safari 中工作得很好，但在 chrome、IE 或 Firefox 中却不行它试图加载一些东西，但在播放器中什么也没有，哈哈。

干杯伙计们

**更新 2：**

如果它是指向该站点的链接，则为：[http://testersite.byethost22](http://testersite.byethost22)。com/test.html

**更新 3：**

我也试过另一个，这次它说“视频无法加载，要么是因为服务器或网络失败，要么是因为不支持格式：”http://video.popler.tv:554/publishlive/4funtv/播放列表.m3u8"

你可以在这里看到：http://testersite.byethost22。com/u。html 它只在 safari 中这样说，与之前的 chrome 等问题相同，但现在当我点击 chrome 中的播放器时，它只是下载了一个 playlist.m3u8

希望有人可以帮助，干杯

更新 4：

好的，所以如果你去这里：[http](http://testersite.byethost22.com/test5.html) : //testersite.byethost22.com/test5.html 并尝试用 idevice 播放它，你会看到它运行良好，但在我的电脑上使用 chrome、firefox 它根本不起作用，我绝望了现在，伙计们，如果有人可以帮助我在 chrome 和 firefox 上进行这项工作，我会非常高兴，并且是一个非常快乐的快乐人！正如我所说，jwp5 或 jwp6 都可以，只要它适用于 chrome 和 firefox，我真的不介意。谢谢大家，请有人帮助大声笑，是的，我知道某些网址中存在空白，但我不得不这样做，因为我没有足够的声誉点来发布超过 2 个链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T20:01:19.747

您在这里使用的是 JW Player 5，它不支持桌面上的 HLS (M3U8)（在 Flash 中）。只有 JW6 Premium 支持此功能。这是一个演示 - [http://www.longtailvideo.com/support/jw-player/29393/hls-adaptive-stream](http://www.longtailvideo.com/support/jw-player/29393/hls-adaptive-stream)

更新，这里是代码，它只适用于 JW6 Premium：

```
<div id="myElement"></div>

<script>
    jwplayer("myElement").setup({
      image: "/uploads/myPoster.jpg",
      file: "/uploads/myManifest.m3u8",
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T08:19:28.073

实际上 JW Player 6 广告版支持 M3U8，它说广告版但没有显示广告，你把这个播放器放在你的 .html 文件中或者你想让这个播放器播放你的直播流或 m3u8 播放列表的任何地方，这里是我编译的代码：

```
<head>
    <style>*{margin:0;padding:0;}</style>
    <script data-cfasync="false" src="http://jwpsrv.com/library/SakQCEfSEeOHhRIxOQfUww.js"></script>
</head>
<body>
   <div id="playerjxJRqLMFuJaA_wrapper" style="position: relative; display: block; width: 100%; height: 490px;">
      <a id="beforeswfanchor0" href="#playerjxJRqLMFuJaA" tabindex="0" title="Flash start" style="border:0;clip:rect(0 0 0 0);display:block;height:1px;margin:-1px;outline:none;overflow:hidden;padding:0;position:absolute;width:1px;" data-related-swf="playerjxJRqLMFuJaA"></a>

      <object type="application/x-shockwave-flash" data="http://p.jwpcdn.com/6/12/jwplayer.flash.swf" width="100%" height="100%" bgcolor="#000000" id="playerjxJRqLMFuJaA" name="playerjxJRqLMFuJaA" class="jwswf swfPrev-beforeswfanchor0 swfNext-afterswfanchor0" tabindex="0">
         <param name="allowfullscreen" value="true">
         <param name="allowscriptaccess" value="always">
         <param name="seamlesstabbing" value="true">
         <param name="wmode" value="opaque">
       </object>

       <a id="afterswfanchor0" href="#playerjxJRqLMFuJaA" tabindex="0" title="Flash end" style="border:0;clip:rect(0 0 0 0);display:block;height:1px;margin:-1px;outline:none;overflow:hidden;padding:0;position:absolute;width:1px;" data-related-swf="playerjxJRqLMFuJaA"></a>

       <div id="playerjxJRqLMFuJaA_aspect" style="display: none;">
       </div>

       <div id="playerjxJRqLMFuJaA_jwpsrv" style="position: absolute; top: 0px; z-index: 10;"><div class="afs_ads" style="width: 1px; height: 1px; position: absolute; background: transparent;">&nbsp;
       </div>
    </div>

  <script data-cfasync="false" type="text/javascript">
    jwplayer('playerjxJRqLMFuJaA').setup({
    file: 'http://proxy-031.dc3.dailymotion.com/sec(11eb80ed8bb344d448fb7eff4cafbe08)/video/754/581/309185457_mp4_h264_aac_hd_hfr.m3u8',
    file: 'http://proxy-031.dc3.dailymotion.com/sec(11eb80ed8bb344d448fb7eff4cafbe08)/video/754/581/309185457_mp4_h264_aac_hd_hfr.m3u8',
        aboutlink: 'http://skysports.com',
        controls: 'true',
        title: 'Football Live Streamings.Com',
        width: '100%',
        height: '490',
        stretching: 'uniform',
        autostart: 'true',
        primary: 'flash',
        skin: 'vapor',
        androidhls: 'true',     
    });
  </script>

</body> 
```

# xaml - 从 xaml 中的已知子节点获取网格的另一个子节点

> ID：14988029
> 
> 赞同：0
> 
> 时间：2013-02-20T19:10:58.047
> 
> 标签：xaml, windows-8

我有四个网格，每个网格都有一个 Button 和 ListView

```
<Grid Grid.Row="0">
     <Grid.RowDefinitions>
     <RowDefinition Height="*"/>
     <RowDefinition Height="*"/>
     </Grid.RowDefinitions>
     <Button Click="ButtonBase_OnClick">
     <ListView .....
     </ListView>
</Grid> 
```

存在的所有按钮都调用相同的事件“ButtonBase_OnClick”。我的挑战是如何获取与生成单击事件的按钮位于同一网格中的按钮的 ListView 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:58:33.450

您可以遍历树并获取 ListView。假设只有一个 ListView 与 Button 平行，这样的事情应该可以工作......

```
private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
{
    var par = (sender as Control).Parent;
    var gri = (par as Grid);
    if (gri != null)
    {
        foreach (var c in gri.Children)
        {
            if (c is ListView)
            {
                // do something
            }
        }
    }
} 
```

您也可以通过命名约定来做到这一点。将您的按钮命名为“BlahButton”，这意味着“BlahListView”是并行列表视图。你也可以使用像[Tag](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.tag.aspx)这样的通用钩子。

# java - 使用 Maven 创建一个包含已编译类和 javadoc 的 jar

> ID：14988041
> 
> 赞同：10
> 
> 时间：2013-02-20T19:11:46.497
> 
> 标签：java, maven, jar, javadoc

我正在尝试为我们的产品生成一个包含 API SDK 的 jar 文件，以便我们的客户可以创建插件并针对我们的 API 进行编译。我们作为 API SDK jar 的一部分提供的所有类/接口也包含在我们的主要产品中，因此 API 开发人员不需要将我们的 API SDK jar 包含到他们的插件 jar 中。因此，我不担心我们的 API SDK jar 的大小。但是，我想让插件开发人员的生活更轻松，并且只提供一个包含已编译类和 javadoc 的 jar 文件（这样开发人员可以在开发时将内联注释视为自动完成功能的一部分）。

我们使用 Maven 编译，我在 API SDK pom.xml 中添加了以下配置：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.7</version>
            <executions>
                <execution>
                    <id>attach-javadoc</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这可行，但是这会生成两个 jar 文件 - 一个带有已编译的类，一个带有 javadoc。相反，我想只生成一个包含所有内容的 jar 文件。

我们目前使用 Maven 来编译这个项目，但是我们可以自由地使用其他构建工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:12:20.600

你可以这样做 ：

*   将 javadoc 目标附加到准备包
*   将 javadoc 输出目录指定为 target/classes

jar 插件将创建一个 jar，其中包含目标/类中的所有内容（包括生成的 javadocs）

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.7</version>
            <executions>
                <execution>
                    <id>attach-javadoc</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>javadoc</goal>
                    </goals>
                    <configuration>
                        <reportOutputDirectory>${project.build.directory}/classes/</reportOutputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T21:03:05.840

你看过[组装插件](http://maven.apache.org/plugins/maven-assembly-plugin/)吗？

Assembly 插件可以创建一个 jar 格式的程序集（实际上是一个带有 MANIFEST.MF 文件的 zip 格式的程序集）。您可以在程序集中同时指定*classes*目录和*apidocs*目录。把一个 MANIFEST.MF 放在那里，你就完成了。

幸运的是，可以通过在阶段的部分中将`javadoc:javadoc`目标配置为*构建*生命周期的一部分。这意味着生成的 JavaDocs 应该可用于 Assembly 插件。[`<build>`](https://maven.apache.org/plugins/maven-javadoc-plugin/usage.html)`pom.xml``generate-sources`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:16:26.120

好吧，事实上，事情实际上可以以更简单的方式完成。

使用以下命令创建`sources`jar 工件`maven-source-plugin`：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-source-plugin</artifactId>
        <version>2.2.1</version>
        <executions>
          <execution>
            <id>attach-sources</id>
            <phase>verify</phase>
            <goals>
              <goal>jar-no-fork</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

这样，您的项目会将源代码部署到您的工件存储库。

然后在您的 IDE 的 Maven 配置中，您可以简单地打开源工件的下载，这实际上意味着您的 IDE 将具有 javadocs，当然，如果您的代码中有适当的注释。

这样，您也可以正确分离工件。

除此之外，David W. 和 ben75 的回答也是有效的方法。

# ruby - 如何从 Sinatra 中的模型访问记录器？

> ID：14988042
> 
> 赞同：2
> 
> 时间：2013-02-20T19:11:50.683
> 
> 标签：ruby, logging, sinatra

以下在请求的上下文中起作用：

```
get '/' do
  logger.info 'got /'
  ... 
```

但在一个模型中，

```
class Foo
  def bar
    logger.info 'bar'
    ... 
```

Sinatra 抛出错误：`NameError: undefined local variable or method 'logger' for main:Object`

如何从模型中访问 Sinatra 记录器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:49:41.170

我相信 Sinatra 使用机架式记录器。来自自述文件。[http://www.sinatrarb.com/intro.html#Logging](http://www.sinatrarb.com/intro.html#Logging)

> Sinatra 将使用它在 env['rack.logger'] 中找到的任何内容。

您可以使用 env['rack.logger'] 访问记录器。或者您可以实现自己的应用程序记录器（与 Sinatra 分开），以便单独保存您的 .log 并使用您的设置（严重级别、日志轮换等）。这是一个简单的例子。

```
module App
  extend self
  attr_accessor :log

  # init
  self.log = Logger.new('log/application.log', 10, 5242880)
  self.log.level = Logger::DEBUG  # could DEBUG, ERROR, FATAL, INFO, UNKNOWN, WARN

  self.log.formatter = proc { |severity, datetime, progname, msg|
                              "#{severity} :: #{datetime.strftime('%Y-%m-%d :: %H:%M:%S')} :: #{progname} :: #{msg}\n" 
end 
```

然后从您的课程中，使用以下方法之一：

```
App.log.debug "some debug msg" 
App.log.info  "some info msg"
App.log.error "some error msg" 
```

# visual-studio-2010 - IntelliTrace 告诉我我点击了 OK 按钮，而我没有

> ID：14988046
> 
> 赞同：0
> 
> 时间：2013-02-20T19:12:05.160
> 
> 标签：visual-studio-2010, intellitrace

这很奇怪，也许它是 VS2010 中的一个选项/设置......

我正在运行我的 vb.net 程序，它遇到了一个严重错误，我有一条 MSGBOX 消息要显示。但是，它不显示它只是终止程序......在屏幕右侧有一个 IntelliTrace 窗口，它说：

**用户提示：**显示“发生严重错误.....”

**用户提示：**单击“确定” 用户单击消息框中的“确定”按钮

*但我没有*！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:57:15.747

发生这种情况是因为我在完成验证输入时正在关闭表单，这意味着程序没有显示 MessageBox 的活动窗口，所以它只是假设 OK 并继续！

以后，我必须记得让表格保持打开状态，直到所有可能与之相关的操作都完成！！！

# facebook - 从页面共享时，Facebook 未显示正确的图像

> ID：14988053
> 
> 赞同：0
> 
> 时间：2013-02-20T19:12:35.090
> 
> 标签：facebook, facebook-graph-api, social-networking

当我将图像 URL 传递给 Facebook 以供某人发布到他们的页面（即：www.facebook.com/dialog/feed？）时，它不会使用 picture= 变量提取正确的图像。我分配它[http://cbcoupons.com/imagegen.php?type=CouponSaved&coupon=192](http://cbcoupons.com/imagegen.php?type=CouponSaved&coupon=192)但它放弃了 &coupon=192。

Facebook 分享的示例 URL 为： [https ://www.facebook.com/dialog/feed?app_id=162054587279357&link=http://cbcoupons.com/249/0/Restaurants+/Puerto+Vallarta&picture=http:// cbcoupons.com/imagegen.php?type=CouponSaved&coupon=192&name=Chicken%20Fajita%20Deal!&caption=Puerto%20Vallarta&description=Chicken%20Fajita%20Deal!%20-%201/2%20Price%20Chicken%20Fajita%20when%20you% 20buy%201%20at%20regular%20price%20&redirect_uri=http://cbcoupons.com/](https://www.facebook.com/dialog/feed?app_id=162054587279357&link=http://cbcoupons.com/249/0/Restaurants+/Puerto+Vallarta&picture=http://cbcoupons.com/imagegen.php?type=CouponSaved&coupon=192&name=Chicken%20Fajita%20Deal!&caption=Puerto%20Vallarta&description=Chicken%20Fajita%20Deal!%20-%201/2%20Price%20Chicken%20Fajita%20when%20you%20buy%201%20at%20regular%20price%20&redirect_uri=http://cbcoupons.com/)

发布的图片是 cbcoupons.com/imagegen.php?type=CouponSaved。

如何才能实际使用 &coupon=(whatever #) ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:37:24.857

您必须对字符串进行 URL 编码，以便它可以接受“&”字符。否则，Facebook 提要 API 会将其视为另一个参数。试试： [http ://cbcoupons.com/imagegen.php?type=CouponSaved%26coupon=192](http://cbcoupons.com/imagegen.php?type=CouponSaved%26coupon=192)

# concurrency - cobegin/coend 块的最大值和最小值

> ID：14988055
> 
> 赞同：0
> 
> 时间：2013-02-20T19:12:43.287
> 
> 标签：concurrency, operating-system

基于以下代码，我需要找到**x 的最小和最大最终值**

```
x=1
i=1

cobegin

while (i<4)    while (i<4)
  begin          begin
    x=x*2          x=x*2
    i=i+1          i=i+1 
  end            end

coend 
```

我认为**x 可以具有的最小值是 8**，如果循环按顺序执行。并且**x 可以有的最大值是 16**，如果程序先进入其中一个循环，切换到另一个循环并执行它直到 x=8 和 i=4，并完成第一个循环，然后 x=16 和 i= 5\. 它是否正确？我是否错过了 x 可能更大或更低的任何情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:24:47.280

你提出的答案是正确的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:27:16.733

这取决于是否是原子操作（这意味着在获取的值`i=i+1`和设置之前`x=x*2`不会发生任何事情）。`i`

## 如果不是原子的：

**最大值：** x = 64

```
x = 1
i = 1
x = 2 (from 1)
x = 4 (from 2)
i = 2 (from 1+2) // get i=1 for both
x = 8 (from 1)
x = 16 (from 2)
i = 3 (from 1+2) // get i=2 for both
x = 32 (from 1)
x = 64 (from 2) 
```

**最小值：** x = 4

```
x = 1
i = 1
x = 2 (from 1+2) // get x=1 for both
i = 2 (from 1)
i = 3 (from 2)
x = 4 (from 1)
i = 4 (from 2) 
```

## 如果是原子的：

**最大值：** x = 16

```
x = 1
i = 1
x = 2 (from 1)
x = 4 (from 2)
i = 2 (from 1)
i = 3 (from 2)
x = 8 (from 1)
x = 16 (from 2)
i = 4 (from 1)
i = 5 (from 2) 
```

**最小值：** x = 8

```
x = 1
i = 1
x = 2 (from 1)
x = 4 (from 2)
i = 2 (from 1)
i = 3 (from 2)
x = 8 (from 1)
i = 4 (from 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T23:42:02.523

事实证明，在非原子情况下，最小值为 2，最大值为 512。

对于 x=2：

```
Process 2 (right loop) executes the [MOV r1, x] assembly instruction of line x=x*2, then switches to Process 1 (left loop). 
Process 1 loops until x=16 and i=4, then it exits.
Back to process 2, which executes [MUL r1, r1], [MOV x,r1], completing the line x=x*2\. It then executes i++, yielding i=5, and exits the loop. 
The final value of x is 2. 
```

对于 x=512：

```
Process 2 executes x=x*2 (x=2) and [MOV r1,i], then switches.
Process 1 loops, yielding (x=4,i=2), (x=8,i=3), (x=16,i=4), then switches.
Process 2 executes [inc r1] and [MOV i,r1]. Now i=2\. Process 2 loops and executes x=x*2 (x=32), then [mov r1,i], and switches with i=2.
Process 1 loops, yielding (x=64,i=3), (x=128,i=4), then switches.
Process 2 executes [inc r1] and [MOV i,r1]. Now i=3\. Process 2 loops and executes x=x*2 (x=256), then [mov r1,i], and switches.
Process 1 loops, yielding (x=512,i=4), then switches.
Process 2 executes [inc r1] and [MOV i,r1]. Now i=4.
Process 1 and 2 exit. x=512 and i=4. 
```

# ios - MFMessageComposeViewController 在末尾插入一个新行

> ID：14988060
> 
> 赞同：1
> 
> 时间：2013-02-20T19:12:54.977
> 
> 标签：ios, mfmessagecomposeview, imessage

我为 iOS 制作了一个小应用程序，我使用 Apple`MFMessageComposeViewController`发送 SMS/iMessage。很快我就看到它总是`\n`在要发送的文本末尾插入一个新行 ( )。我检查了它在使用它的其他应用程序中的表现`MFMessageComposeViewController`，结果发现新行也出现在那里，所以这不应该是我的错。

有没有办法告诉`MFMessageComposeViewController`不要插入这个烦人的行，或者在显示视图控制器后自己删除它的可能性？

# twitter-bootstrap - 使用 Twitter Bootstrap 的 4 列到 2 列

> ID：14988062
> 
> 赞同：12
> 
> 时间：2013-02-20T19:12:58.060
> 
> 标签：twitter-bootstrap

我有一个 4 列的流体布局：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span3">A</div>
        <div class="span3">B</div>
        <div class="span3">C</div>
        <div class="span3">D</div>
    </div>
</div>

[  A  ][  B  ][  C  ][  D  ] 
```

对于移动设备，引导程序将列呈现在另一列之下，效果很好：

```
[            A             ]
[            B             ]
[            C             ]
[            D             ] 
```

但对于平板电脑，我想要 2 列 2：

```
[      A     ][      B     ]
[      C     ][      D     ] 
```

是否可以通过引导程序在本地实现这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:04:26.400

我发现 Zurb Foundation ( [http://foundation.zurb.com/docs/grid.php#threeBlockEx](http://foundation.zurb.com/docs/grid.php#threeBlockEx) ) 提供了这种功能，但我想继续使用 Twitter Bootstrap。所以我设法添加了一个自定义规则，基于 Foundation 使用的技术：

```
@media (min-width: 768px) and (max-width: 979px) {
    .row-fluid > [class*=span]:nth-child(2n+1) {
      clear: both;
      margin-left: 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-09T14:55:30.183

添加到 Emilie 的答案中，您还需要重置列的宽度，

```
@media (min-width: 768px) and (max-width: 979px) {
    .row-fluid > [class*=span]:nth-child(2n+1) {
        clear: both;
        margin-left: 0;
    }

    .row-fluid .span3 {
        width: 48.61878453038674%;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:34:31.513

您只需要覆盖`@media`查询中与平板电脑对应的跨度的 CSS。

所以你可以尝试这样的事情：

```
// Tablets & small desktops only
@media (min-width: 768px) and (max-width: 979px) {
  [class*=span] {
    width: 50%;
  }
} 
```

当然，可能需要进行调整。由于填充和边距，宽度实际上可能不是 50%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T00:19:00.140

唔。我在我的 CSS 中尝试了这两个规则，但它们都不适合我。遗憾的是，BS 2.0 中缺少这一点。我希望他们在 BS 3.0 中添加它！

谢谢，

JK

# python - 如何在 Django Haystack - elasticsearch 中构建单个应用程序的索引？

> ID：14988068
> 
> 赞同：1
> 
> 时间：2013-02-20T19:13:28.643
> 
> 标签：python, django, django-haystack

我使用 Django Haystack 和 elasticsearch 作为我的搜索后端。

当我向我的项目添加一个新应用程序时，似乎我必须运行以下命令来重建索引：

> ./manage.py 重建索引

问题是，我有一些非常大的应用程序已经编入索引。

考虑到应用程序最初以数千条记录开始而不是一一收集，我怎么能只索引新应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:39:20.373

[https://django-haystack.readthedocs.org/en/latest/management_commands.html?highlight=update_index#update-index](https://django-haystack.readthedocs.org/en/latest/management_commands.html?highlight=update_index#update-index)

```
./manage.py update_index 
```

此命令可以指定单个应用程序运行，也可以更新在特定时间范围内已更新的对象的索引。这使得索引过程更加高效，因此非常值得学习如何充分利用它。

# jquery - 如何使用 JSON 数据填充文本字段

> ID：14988070
> 
> 赞同：0
> 
> 时间：2013-02-20T19:13:45.560
> 
> 标签：jquery

我有

```
jQuery(document).ready(function(){
 $('#location_search').autocomplete(
    {
     source:'suggest_location.php',
     minLength:1});
    }); 
```

它返回 JSON 数据：

```
[
    {
        "label" : "EB\u0130 Konukevi",
        "value" : "EB\u0130 Konukevi, 32.791, 39.888",
        "hor" : "32.791",
        "ver" : "39.888"
    },
    {
        "label" : "EB\u0130 Gretwes",
        "value" : "EB\u0130 Gretwes, 32.491, 39.488",
        "hor" : "32.491",
        "ver" : "39.488"
    }
] 
```

当我选择其中一个位置时，它会填充 location_search 字段。

选择位置后，如何使用 hor 和 ver 填充隐藏的文本输入（带有 id 的 ver 和 hor）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:20:10.937

我想我了解您在寻找什么...尝试使用[select 事件](http://api.jqueryui.com/autocomplete/#event-select)：

```
$('#location_search').autocomplete({
    source:'suggest_location.php',
    minLength:1,
    select: function( event, ul ) {
       //do something with hor, ver
       $('#hor').val(ul.item.hor); 
       $('#ver').val(ul.item.ver);
    } 
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/yTMwu/50/](http://jsfiddle.net/dirtyd77/yTMwu/50/)

# web-services - 将 Web 服务数据插入 SQL Server Management Studio

> ID：14988073
> 
> 赞同：1
> 
> 时间：2013-02-20T19:14:18.007
> 
> 标签：web-services, sql-server-2008, import

我希望将当前存储在 Web 服务中的数据导入 SQL Server 2008 中的新表中。

这可以通过查询吗？例子会很有帮助。到目前为止，我阅读的文档包括创建 Web 服务或使用我的 VB (2008) 版本中不存在的 Visual Basic 模板。

任何提示或技巧将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:22:46.627

SSIS 提供了一个“Web 服务任务”——我会先检查一下。

[http://msdn.microsoft.com/en-us/library/ms140114%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms140114%28v=sql.100%29.aspx)

# position - VB.NET 双控。MouseHover 一次不执行两个动作。和飞行工具栏不成形

> ID：14988074
> 
> 赞同：1
> 
> 时间：2013-02-20T19:14:17.900
> 
> 标签：position, toolbar, mousehover

我正在使用两种形式。一个作为主要形式，另一个作为上`Fly toolbar (Windows 7 style)`。我的第一个问题是： 1\. 我设置 Mouserhover 来实现两个任务 A. 显示 Form2 B 设置 Opacity = 1 下面是代码：

```
Private Sub form1_MouseHover(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.MouseHover

    form2.RightToLeftLayout = Me.RightToLeftLayout
    form2.Show()
    Me.Opacity = 1
End Sub 
```

它显示表单 2，但不透明度是默认值，即 0.8 *在表单加载事件中设置）似乎控制传递给了表单 2。我想要实现的第二件事是，在表格 1 的顶部获取表格 2。

.

# sql - 将 2 个 varchar 属性转换为日期时间时出错

> ID：14988085
> 
> 赞同：0
> 
> 时间：2013-02-20T19:15:15.583
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个数据库，其中`CREATEDATE`和`CREATETIME`存储在 2 个单独的属性中作为 varchars。我试图将这两个组合成一个`smalldatetime`属性。

当我运行以下转换时，我收到错误：

`The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.`

```
UPDATE UsersTemp
SET Created =   CONVERT(datetime, CAST(CONVERT(date, CreateDateIMF, 102)AS varchar(50)) 
            + ' ' +
            CASE WHEN LEN(CreateTime) = 6 THEN 
                 Left(CreateTime, 2) + ':' + SUBSTRING(CreateTime, 2, 2)
            ELSE 
                 Left(CreateTime, 1) + ':' + SUBSTRING(CreateTime, 1, 2)
            END
            + ':' + Right(CreateTime, 2), 120) 
```

*（是的，这是凌乱的 SQL，但以我可以更好地使用它的方式获取这些数据只是暂时的）*

在使用整套设备时，我尝试了许多不同的方法，但我似乎无法让它发挥作用。

在 a 中尝试上述参数时`SELECT`，日期工作正常，因此问题存在于时间字段中，但我不确定如何更正。

示例原始数据：

```
CREATEDATEIMF
 20120220
 20040415
 20040415
 20040415
 20040415
 20040415
 20040415
 20040415
 20040415
 20050510

CREATETIME
 160401
 142304
 142304
 142304
 142304
 142304
 142304
 142304
 142304
 44427 
```

我已经确认时间是 HMMSS。（请注意，在短时间内没有前导 0）

此数据是来自旧 COBOL 程序的转储。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:19:45.270

```
DECLARE @x TABLE (CREATEDATE VARCHAR(32), CREATETIME VARCHAR(32));

INSERT @x VALUES
('20120101','142304'),
('20120101','44427');

SELECT CONVERT(DATETIME, 
  CREATEDATE + ' ' + STUFF(STUFF(RIGHT('00' 
  + CREATETIME, 6), 5, 0, ':'), 3, 0, ':'))
FROM @x; 
```

所以在你的情况下，

```
UPDATE dbo.UsersTemp SET Created = CONVERT(DATETIME, 
  CREATEDATE + ' ' + STUFF(STUFF(RIGHT('000000' 
  + CREATETIME, 6), 5, 0, ':'), 3, 0, ':')); 
```

现在，由于您选择使用*错误*的数据类型存储日期/时间数据，因此无法保证您拥有的所有值实际上都会正确转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:20:56.190

```
SELECT RIGHT('000000' + CAST(createtime AS VARCHAR(6)), 6) paddedCreateTime
FROM yourTable 
```

应该使 44427 看起来像 044427 但我不确定这是否是您的问题所在

# algorithm - 我知道如何检查 4 邻域，但如何在这里结合呢？

> ID：14988087
> 
> 赞同：0
> 
> 时间：2013-02-20T19:15:29.670
> 
> 标签：algorithm, matlab, pixels, neighbours

假设我们要检查 4 邻域`matlab`，我认为我们可以执行以下操作（如果我错了，请纠正我）：

```
I = imread('cameraman.tif');
structured_element = [0,1,0;1,1,1;0,1,0];
o = imdilate(I,structured_element); 
```

现在，我有以下声明，我正在尝试实施（现在已经尝试了一段时间）：

```
among all pixels p " that belong to" Supp(F)\Ck
being 4-neighbours of Ck,
select the pixel p that minimizes the distance d(F,Ck"union"{p})
and let Cnew = Ck "union" {p} 
```

我不想用一些术语混淆你，但会给你它们的价值，可以决定做什么。

*Supp(F)*具有[此处](https://www.dropbox.com/s/27njm020tldh3yn/support.mat?n=13215274)的值。

*Ck*有[这里的值](https://www.dropbox.com/s/8rcqy7kaeolfaoz/Ck.mat?n=13215274)

*F*是[此处显示的图像](https://www.dropbox.com/s/xohl4i5earnxht8/fuzzysegmented.jpg?n=13215274)

基于此，我们如何实现上面的行？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T00:11:20.977

首先，为了清楚起见，您正在使用论文“通过特征距离最小化对空间模糊集进行去模糊化”中描述的去模糊化算法。该术语`Ck`最初是`k = 0`为：

```
Core(f) = {x is a member of a set X | m(x) >= m(y) for all y in X} 
```

其中`f`是一些离散的灰度二维图像，`m(x)`定义为范围为 的隶属函数，`[0, 1]`由`X`属于 的域的点对组成`f`。然后，`Supp(f)`由 那些点形成`m(x) > 0`。对于 0 为黑色的灰度图像`f`，这意味着任何非黑色都在`Supp(f)`.

所以，这里有一个输入`f`（也代表`Supp(f)`）`Core(f)`、 和`Supp(f)\Core(f)`。在 Matlab 术语中，`Core(f)`由下式给出：`core = f; core(f ~= max(max(f))) = 0;`

![在此处输入图像描述](../Images/324ef4dc933e112be46c3539e4864e65.png) ![在此处输入图像描述](../Images/fb9461db88b3b60654c8a4dbdb863c40.png) ![在此处输入图像描述](../Images/1933084a3acb71981e0ecdff30d6ceb3.png)

现在我们可以解决问题中的问题了。首先：“...在属于 Supp(F)\Ck 的所有像素 p 中是 Ck 的 4 个邻居...”可以翻译为：

```
allp = imdilate(core, strel('diamond', 1)) - core;
allp_in_f = (allp/255) .* f; 
```

假设输入的类型是`uint8`。第二个语句通过将它们设置为 0 来丢弃不在其中的点`Supp(f)`，但在此示例中没有这样的点。此步骤的结果如下图所示：

![在此处输入图像描述](../Images/c2f9e5db877e40b813e1eb78470aa996.png)

现在：“...选择最小化距离 d(F,Ck union {p}) ...”的像素 p。此时，`p`最后一张图像中的任何像素都将其最小化，假设度量是 L-infinity（切比雪夫，棋盘，...），但即使我们选择 L-1 范数，除对角线像素外的所有像素都会满足它. 或者，另一种解释（如果我们完全忽略该论文，因为问题中没有提到它）：距离考虑 中的强度`f`，并且该方法需要最小化加权（强度）距离的方法。在这种情况下，以及对于未来的迭代（该方法是一种迭代方法，在论文中进行了描述），最简单的方法是从显示的最后一张图像中获得的边界执行泛洪填充。这种洪水填充将以广度优先的方式完成，`f`您将回溯并确定`p`最小化距离的像素。这种方法也称为波前传播。

# php - 为全局变量 php 赋值时得到意外的输出

> ID：14988088
> 
> 赞同：0
> 
> 时间：2013-02-20T19:15:32.787
> 
> 标签：php, global-variables

我正在尝试执行这个 php 程序，但我得到了一个意外的输出。

```
<?php
$abc;
function test(){
    $abc="world";
}
test();
echo "hello ".$abc;?> 
```

`Output : hello`
`Expected output : hello world`

我是 php 新手。请任何人告诉我我在这段代码中犯了什么错误。
我知道，如果我放弃它`$abc="world"`的范围，`function test()`它将起作用。
我应该怎么做才能从函数中为全局变量赋值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:32:23.170

您可以`$abc`在类内部定义，然后使用`$this`.

```
 <?php 
  class xyz {
   public $abc = '';
   function test(){
    $this->abc = "world";
  }
 }

$a = new xyz();
$a->test();
echo "hello ". $a->abc;
?> 
```

[演示](http://codepad.org/2fGWL4IC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:17:20.460

使用全局变量通常被认为是不好的做法，但您可以使用`global`关键字来执行此操作。

```
<?php
$abc;
function test(){
    global $abc;
    $abc="world";
}
test();
echo "hello ".$abc;?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:17:20.750

`$abc`in`test`是本地的。如果要访问全局变量，则必须`global $abc`在函数内部使用来指定它。

看[这里](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T19:17:56.137

您需要告诉 PHP 编译器您要使用全局 $abc 变量，如下所示：

```
$abc;
function test() {
    global $abc;
    $abc="world";
}
test(); 
```

因为 php 中变量的作用域和 javascript 不同，比如你可能从那里跨过去了。

在函数中定义的任何变量自然是 PHP 中该函数的私有变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T19:18:20.557

您在 test() 中编辑的 $abc 与全局 $abc 不同。以您想要的方式修复您的代码：

```
<?php
$abc;
function test(){
    global $abc;
    $abc="world";
}
test();
echo "hello ".$abc;
?> 
```

# extjs - 如何使用两个 extjs 组合框组成一个新组件？

> ID：14988096
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:16:08.733
> 
> 标签：extjs, extjs4

我必须使用两个组合框，第一个组合框选择类别，第二个组合框在第一个组合框中设置的类别中进行搜索。我想将它们打包在一起成为一个新组件（拥有自己的 xtype 等）。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:42:58.530

```
Ext.define('DoubleCombo', {
    extend: 'Ext.Panel', // or Ext.Component e.t.c
    alias: 'widget.doubleCombo',
    items: [{
        xtype: 'combobox',
        ...
    },{
        xtype: 'combobox',
        ...
    }]
}); 
```

你可以使用 xtype: 'doubleCombo'。有关组件，请参阅本指南：[http ://docs.sencha.com/ext-js/4-1/#!/guide/components](http://docs.sencha.com/ext-js/4-1/#!/guide/components)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:43:06.963

```
Ext.define('MyApp.view.MyContainer', {
    extend: 'Ext.container.Container',
    alias:'widget.myxtype',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'combobox',
                    fieldLabel: 'Label'
                },
                {
                    xtype: 'combobox',
                    fieldLabel: 'Label'
                }
            ]
        });

        me.callParent(arguments);
    }
}); 
```

# ruby-on-rails - rails devise 应用程序 - 支持用户帐户/配置文件设置

> ID：14988097
> 
> 赞同：0
> 
> 时间：2013-02-20T19:16:14.197
> 
> 标签：ruby-on-rails, devise

我使用 devise (2.2.3) 开发了一个基本的 rails 3.2 应用程序进行身份验证。现在我需要添加对用户帐户/配置文件设置的支持。最终用户可以更新的附加属性（配置文件/帐户）是用户模型的一部分。

我需要关于如何支持这一点的建议？UsersController 的哪个动作会满足要求？我在 UsersController 中添加了一个编辑操作。当我运行“rake routes”时，我得到以下信息

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update 
```

cancel_user_registration GET /users/cancel(.:format) devise/registrations#cancel user_registration POST /users(.:format) devise/registrations#create new_user_registration GET /users/sign_up(.:format) devise/registrations#new edit_user_registration GET /users /edit(.:format) devise/registrations#edit PUT /users(.:format) devise/registrations#update DELETE /users(.:format) devise/registrations#destroy **edit_user GET /users/:id/edit(.:格式）用户#编辑用户 GET /users/:id(.:format) users#show** root / home#index

提交编辑表单后，表单会使用 PUT 向“/users/1/edit”发送一条消息，我收到 No route matches [PUT]“/users/1/edit”的路由错误

这是修改用户设置的正确方法吗？表格应该贴上“PUT”吗？如果是这样，我如何使用 PUT 而不是 GET 进行路由条目？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:51:41.800

如果您希望用户能够更新“他们的”`User`对象，那么您需要在`routes.rb`. 就像是：

```
resource :users => [:edit, :update] 
```

你的表格应该是 PUTing to `/users/:id`not `/users/:id/edit`。

设置完成后，您将能够使用表单助手创建表单以供用户编辑`User`对象。您需要在这里考虑安全性，并确保他们不会更新他们不应访问的字段。

Rails 执行 PUT 请求是正确的，因为 Rails 的主要租户之一是尝试使一切都 RESTful。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:54:38.940

```
edit_user GET    /users/:id/edit(.:format)      users#edit 
```

这很好，因为去 users/:id/edit 只是**获取**表单。然后填写表格，按下“提交”的动作将向 /users/:id 发出**PUT**请求。你只是错过了第二部分。

杰里米的回答应该解决路线问题。

# c++ - 在 Windows 上打开 MPI C++ 链接错误 (MPI::Datatype::Free)

> ID：14988099
> 
> 赞同：2
> 
> 时间：2013-02-20T19:16:24.727
> 
> 标签：c++, mpi

我正在尝试为 Windows 构建一个简单的 Open MPI 应用程序。我已经安装了 OpenMPI-v1.6.2（64 位）的二进制文件。我还安装了 Visual Studio 2010。机器是 Windows 7 x64。

当我尝试编译一个使用 MPI::Send() 的简单程序时，我收到一个链接器错误，指出它无法解析 MPI::Datatype::Free()。

这是一个最小的例子：

```
#include <mpi.h>
#include <iostream>

int main( int argc, char** argv ) {
    MPI::Init(argc,argv);

    // Meant to run with 2 processes.
    if (MPI::COMM_WORLD.Get_rank() == 0) {
        int data;
        MPI::COMM_WORLD.Recv(&data,1,MPI_INT,1,0);
        std::cout << "received " << data << std::endl;
    } else {
        int data = 0xdead;
        std::cout << "sending " << data << std::endl;
        MPI::COMM_WORLD.Send(&data,1,MPI_INT,0,0);
    }

    MPI::Finalize();
} 
```

当我编译它时：

```
mpic++ send_compile.cpp -o send_compile.exe -DOMPI_IMPORTS -DOPAL_IMPORTS -DORTE_IMPORTS 

Microsoft (R) C/C++ Optimizing Compiler Version 16.00.40219.01 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.

cl : Command line warning D9035 : option 'o' has been deprecated and will be removed in a future release
send_compile.cpp
Microsoft (R) Incremental Linker Version 10.00.40219.01
Copyright (C) Microsoft Corporation.  All rights reserved.

/out:send_compile.exe 
/out:send_compile.exe 
"/LIBPATH:C:\Program Files (x86)\OpenMPI_v1.6.2-x64/lib" 
libmpi_cxx.lib 
libmpi.lib 
libopen-pal.lib 
libopen-rte.lib 
advapi32.lib 
Ws2_32.lib 
shlwapi.lib 
send_compile.obj 
send_compile.obj : error LNK2001: unresolved external symbol "public: virtual void __cdecl MPI::Datatype::Free(void)" (?Free@Datatype@MPI@@UEAAXXZ)
send_compile.exe : fatal error LNK1120: 1 unresolved externals 
```

该程序可以在附近的 Ubuntu 机器上编译和运行，没有任何问题。我不知道问题是什么。Open MPI 的文档没有说明任何关于添加 CPP 定义（OMPI_IMPORTS、OPAL_IMPORTS、ORTE_IMPORTS）的内容，这些定义的缺失导致了与此类似的其他链接器错误。不过，我找不到有关此特定问题的任何信息。

我尝试使用 dumpbin 来获取 MPI 安装的 .lib 文件中的符号，但没有找到对该函数名称的任何引用。我也没有在 MPI 标头中找到任何答案。

我在 C 语言中有一个类似的程序，可以在这台 Windows 机器上编译和运行良好。我不知道我在 C++ 上做错了什么。有人可以指出我正确的方向吗？

# java - 尝试对字符串数组进行排序

> ID：14988100
> 
> 赞同：-2
> 
> 时间：2013-02-20T19:16:26.153
> 
> 标签：java

我编写了下面的程序来对输入字符串进行排序，并输出一个按字典顺序排序的列表。

好像有问题，谁能帮我看看？

```
import java.util.ArrayList;
import java.util.Scanner;

public class Problem3 
{
    public static void main(String[] args) 
    {
        Scanner scanner = new Scanner(System.in);
        String statement = scanner.nextLine();
        screen(statement);
    }
    public static void screen(String statement)  // sorting mechanism 
    {
        String token[]= statement.split(" ");
        String smallestSoFar=token[0]; 
        ArrayList<String> list = new ArrayList<String>();
        for(int i=0; i<token.length;i++)
        {
            smallestSoFar=token[i];
            for(int e=i; e<token.length; e++)
            {
                if(token[e].compareTo(smallestSoFar)<0)  // inputting the // ...lexicographically sorted word into a new list
                {
                    smallestSoFar=token[e]; 
                    list.add(smallestSoFar);                
                }
            }
            System.out.println(list);
        }           
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:49:17.097

问题是如果任何元素后面跟着一个较小的元素，它不会被打印出来（并且较大的元素将被打印两次）。而且您的打印位置错误（应该在循环之后）。

你可以简单地使用

```
Arrays.sort(token) 
```

或者

```
list = new ArrayList<String>(Arrays.asList(token));
Collections.sort(list); 
```

对数组进行排序。

如果你想坚持自己的方式，我会这样做：

```
boolean[] checked = new boolean[token.length];
int checkedCount = 0;
while (checkedCount < token.length)
{
    int smallestIndex = -1;
    for(int i = 0; i < token.length; i++)
    {
        if (!checked[i] &&
            (smallestIndex == -1 || token[i].compareTo(token[smallestIndex]) < 0))
        {
            smallestIndex = i;
        }
    }
    checked[smallestIndex] = true;
    checkedCount++;
    list.add(token[smallestIndex]);
}
System.out.println(list); 
```

# php - 使用 javascript（和 PHP）获取 Swatch Internet 时间

> ID：14988101
> 
> 赞同：2
> 
> 时间：2013-02-20T19:16:27.777
> 
> 标签：php, javascript, jquery, time

我想让我的用户能够选择[Swatch Internet Time](http://en.wikipedia.org/wiki/Swatch_Internet_Time)作为他们的时间格式。

我现在如何尝试：

```
function startTime(){
    var d = new Date(),
        h = d.getHours(),
        m = d.getMinutes(),
        s = d.getSeconds(),
        time = "@"+parseFloat((h*3600+m*60+s*1)*0.01157,10).toString().replace(/(\.\d{1,2})\d*$/, "$1");

    $('#time').html(time);
} 
```

根据描述，样本时间是无时区偏移的，因此使用用户的系统时间将不起作用。

我能想到的另一种方法是向 php 文件发送 ajax 请求，该文件通过内置`date('B')`函数返回当前的样本时间，但是我不能使用 2 位小数，而且还会产生不必要的流量。

```
$.ajax({type:'GET',url:'../time.php'}).done(function(data){ var time = data }); 
```

时间.php：

```
<?php echo date("B") ?> 
```

必须有某种方式以某种`@###.##`格式返回样本时间，我很想知道。

该`startTime()`函数被调用 using `setInterval(startTime,750)`，所以我需要一个可以在那个时间段内工作的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:24:00.590

JavaScript 有一个函数`.getTimezoneOffset()`，它以分钟为单位返回 GMT 的偏移量。

只需将瑞士比尔时区偏移（+60 分钟）减去当地时区偏移即可。差异应该是为您提供 Swatch 时间的偏移量。然后在此基础上进行节拍计算。

您也可以只使用`.getUTCHours()`,`.getUTCMinutes()`等，这基本上是 GMT。格林威治标准时间比瑞士比尔早一小时。因此，您只需在计算中添加一个小时即可获得 Swatch 时间。

演示：http: [//jsfiddle.net/qF8Bt/](http://jsfiddle.net/qF8Bt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T15:59:27.627

我想让@JohnBoker 在评论中提出的解决方案更加明显。一个由 Paul Philippov 编写的[JavaScript Date 类扩展](https://themactep.com/beats/js)，我一直在使用它。该方法采用一个参数，该参数指定要返回的小数位数。

```
function startTime(){
    var d = new Date(),
        time = d.toInternetTime(2);

    $('#time').html(time);
}
setInterval(startTime,500); 
```

在下面尝试一下：

```
function startTime() {
    var d = new Date(),
        time = d.toInternetTime(2);

    $('#time').html(time);
}
setInterval(startTime, 500)
```

```
body{margin:0}#time{font-family:monospace;display:block;width: 100%;font-size:2em;height:2em;display:block;text-align:center;position:absolute;top:calc(50% - 1em)}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://themactep.com/js/ppds.date.js"></script>
<span id=time></span>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-01T01:54:30.433

我只是有理由编写一个样本节拍功能，所以将在这里发布以供后代使用：

```
function getSwatchBeat(date, places = 3) {
  return (((+date + 3.6e6) % 8.64e7) / 8.64e4).toFixed(places);
}

let d = new Date();
console.log(`Current swatch beat for ${d.toLocaleString()} is ${getSwatchBeat(d, 1)}`);
```

它只是将 UTC 时间增加 1 小时以适应 Biel，然后除以一天的千分之一。我不知道 PHP 函数返回多少小数位，但这很容易调整。

# multithreading - 我们真的需要运行所有这 1000 个线程吗？

> ID：14988102
> 
> 赞同：12
> 
> 时间：2013-02-20T19:16:31.847
> 
> 标签：multithreading

在 Windows 8 中使用花哨的新任务管理器，我注意到对我来说是一个惊喜，当前使用/运行的线程大约 1k。

因为我刚刚对多线程软件和游戏背后的教程和理论产生了共鸣。我的假设是，如果您想从软件中获得最佳性能，那么当有工作要做时，每个逻辑处理器应该始终至少有一个线程。因为该处理器否则将“未使用”。

但是看到我已经在运行大约 1000 个线程，难道所有处理器都已经开始工作了吗？

如果其他 50 个左右的进程已经在使用处理能力，为什么还要使用多线程？管理所有这 1000 个线程不会占用足够的 CPU 资源吗？为什么我作为程序员应该处理线程而不是操作系统？如果它给每个进程一个线程，我的软件不是仍然是“多线程”的吗？

使用更多线程只是一种更高级的进程优先级方式吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T19:20:53.213

我会说，可能不会。虽然这个问题有点修辞，但请看一下 Jeffrey Richter 撰写的这篇文章/书籍摘录，[停止疯狂](http://blogs.msdn.com/b/microsoft_press/archive/2011/03/25/jeffrey-richter-excerpt-4-from-clr-via-c-third-edition.aspx)（来自[CLR 通过 C#](https://rads.stackoverflow.com/amzn/click/com/0735667454)的书）。它只讨论你问的那些事情。

> 如果我们只关心原始性能，那么任何机器上的最佳线程数都与该机器上的 CPU 数量相同。[...] 所有线程仍然有一个内核对象、内核模式堆栈和其他分配给它们的资源。这种因为便宜而随意创建线程的趋势必须停止。线程并不便宜——相反，它们很昂贵，所以要明智地使用它们。

我强烈推荐那本书。非常值得从前到后阅读，虽然它相当大，约 900 页。

多线程虽然是一个*非常复杂*的主题，并且不能简单地用几行来回答，但它高度依赖于您要实现的目标。与往常一样，这取决于您必须测量/评估/优化任何解决方案以获得最佳性能。但是，一般来说，只是例行地抛出线程可能不是一个好主意。附带说明一下，托管线程分配 1 MB 堆栈内存，这意味着在 .NET 应用程序中创建（并保持）线程可能非常浪费。

此外，仅仅因为胎面*存在*并不*意味着*它正在消耗完整的核心。它*可能会*做一些工作，但它也可能会闲置并等待一些工作发生（这是最有可能的情况，否则您的整体 CPU 消耗将不断接近 100 而不是 0）。然而，它们*确实*消耗，或者更准确地说，浪费了系统资源。

尽管引入了许多技术以使它们更易于使用（各种并行框架等），但引入线程会给您的应用程序增加大量额外的复杂性。但是，潜在的复杂性仍然存在，有时伪装成无害的，但随时准备爆发出它的真实本质（时序问题、死锁、调试复杂性等）。

简而言之，您可能会说，“除非有理由，否则不要使用多线程”。
即便如此，t(h) 还是轻描淡写。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-28T13:33:08.313

我喜欢 Jokob 的回答，我觉得大部分重要的观点已经提出：

*   1k 线程（全局）并不意味着它们完全运行：它们可能都在等待
*   一般来说，考虑系统中的*全局*线程数是非常具有误导性的（请参阅下面的说明）
*   线程（不仅）用于并行编程：它们用于需要多行执行的情况（例如，当您阻塞等待网络响应时，但您仍需要更新 UI 并使其保持响应，或者当您在同一进程中执行低优先级任务（拼写检查、代码检查等）时，...）。毕竟，线程早在多核 CPU 之前就已经存在并且很有用了！
*   然而现在我们经常看到“疯狂”：线程太多。这并不新鲜：早期网络（网络？）服务器的第一个案例之一：每个连接一个线程（！）。愚蠢，浪费。我们继续，现在我们使用线程池（以及更精致的东西，比如 I/O 完成端口）和（最近的）异步编程。

然而，即使在线程池的情况下，线程数也是每个进程的（除非您使用系统线程池，从 Windows2000 开始可用）；因此，如果您有 50 个进程，每个进程都希望从 4 核系统中获得最大优势，那么您在全球范围内拥有合理数量的 200 个线程（并且，通常，线程池的最佳内核数约为 2 倍，以获取 I/O 块和等待考虑）。

这是很自然的，你必须考虑每个进程，而不是整个操作系统。想想如果你对所有进程使用一个有硬限制的集中式线程池会发生什么。假设一个应用程序接受所有这些：你有什么选择？不，你不能有一个硬的、操作系统范围的限制。每个应用程序基本上都是独立的。这是“现代”（1990 年代）操作系统强制执行的模型，这些操作系统基于隔离进程和虚拟私有地址空间，例如 NT 和 Linux：您在操作系统中独处，不应该关心其他操作系统（有时这是强烈的强制执行，例如在内存的情况下）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T23:12:29.333

简单来说，操作系统让所有应用程序都感觉像是在自己的机器（计算机）上运行。例如，32 位应用程序理论上有 4GB 内存，而物理计算机有 2GB。操作系统正在使用分时多路复用等技术来提供此功能。通过这种机制，您可以观察到这 1K 个线程。（我在一个连接了 28 个用户的终端服务器上看到了 72K。）由于创建线程是昂贵的，程序员只创建一次线程，当任务通过诸如互斥锁、信号量等机制完成时让线程休眠......

那是因为你看到很多线程和 1% 的 CPU 使用率。如果您想查看线程使用了多少 CPU 资源，请查看线程或应用程序的 CPU 时间。这为正在发生的事情提供了更多线索。

# mockito - Powermock 没有可用的模拟最后一次通话

> ID：14988104
> 
> 赞同：0
> 
> 时间：2013-02-20T19:16:34.650
> 
> 标签：mockito, easymock, powermock

从以下位置运行代码：

```
http://www.jayway.com/2009/05/17/mocking-static-methods-in-java-system-classes/ 
```

![在此处输入图像描述](../Images/2c5885d0fbec03ed5fe64496ef932847.png)

我收到以下错误。有人见过这个吗？谢谢！

```
java.lang.IllegalStateException: no last call on a mock available
at org.easymock.EasyMock.getControlForLastCall(EasyMock.java:520)
at org.easymock.EasyMock.expect(EasyMock.java:498)
at ff.MockStaticExampleTest.mockStaticExample(MockStaticExampleTest.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:66)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:312)
at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)
at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:94)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:121)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)
at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:101)
at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:53)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:27:48.563

解决了看这篇文章的答案：

[https://groups.google.com/forum/?fromgroups=#!topic/powermock/-KBBTWEg5eM](https://groups.google.com/forum/?fromgroups=#!topic/powermock/-KBBTWEg5eM)

# css - CSS 100% 高度（同时保持纵横比）技巧触发循环 WebKit 重绘错误

> ID：14988107
> 
> 赞同：0
> 
> 时间：2013-02-20T19:16:40.257
> 
> 标签：css, google-chrome, safari, webkit

我正在使用这种非常棒的 CSS 技术来强制`<li>`与他们的父母一样高`<ol>`/`<ul>`同时保持我选择的纵横比。

这个想法是制作一个具有目标纵横比的透明 GIF 或 PNG，然后使用该图像按`<li>` *比例*拉伸.

HTML：

```
<ol>
  <li>
    <img src="1x1.gif" height="1" width="1">
    <div class="content">
      …
    </div>
  </li>
</ol> 
```

CSS：

```
ol  { height: 50%; } /* half the height of the viewport, let's say */
li  { height: 100%; position: relative; display: inline-block; }
img { height: 100%; width: auto; }
.content { position: absolute; top: 0; right: 0; bottom: 0; left: 0; } 
```

甜的。问题是，如果您`<ol>`通过调整视口的大小来调整 的大小，WebKit 不会费心重新计算 的大小`<img>`，并且您的纵横比会被拍摄。但是，如果您右键单击`<div class="content">`并选择“检查元素”，它会自动调整大小！当你实施[这个令人发指的重绘黑客](https://stackoverflow.com/a/3485654/802047)时也是如此：

```
var image = $('img').get(0);
var oldDisplay = image.style.display;

image.style.display = 'none';
image.offsetHeight; // Secret sauce
image.style.display = oldDisplay; 
```

真的，我正在尝试根据 an`<img>`的大小来调整 an 的大小，`<li>`其大小基于`<img>`. 我怀疑 WebKit 中有一个优化这种循环引用的方法。该怎么办？

这是一个 JSFiddle，您可以在其中亲自体验该错误：http: [//jsfiddle.net/steveluscher/H5Mkm/](http://jsfiddle.net/steveluscher/H5Mkm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:52:05.147

这可能远非一个答案——但我只是使用了相同的隐藏图像技术来使周围的 div 拉伸并保持纵横比。对我来说效果很好。也许你可以忽略 js，看看 CSS/HTML 在我的小提琴中是如何工作的：http: [//jsfiddle.net/kthornbloom/H2G7z/5/](http://jsfiddle.net/kthornbloom/H2G7z/5/)

```
 . 
```

# c# - 在 Windows 商店应用程序中刷新数据

> ID：14988128
> 
> 赞同：1
> 
> 时间：2013-02-20T19:17:28.197
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps

我正在创建一个具有一些 Web 服务调用的 Windows 商店应用程序。目前我使用一个按钮事件来进行 Web 服务调用，但我希望该应用程序每 5 分钟自动执行一次。按钮事件现在放置在 MainPage.xaml.cs 中执行此操作的最佳方法是什么 Windows 商店应用程序中是否有任何计时器事件？

```
 public async void GetWebServiceDataButton(object sender, RoutedEventArgs e)
    {
     ........
     .........
     Retrieve data from web service
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:20:32.857

这里要粘贴的代码有点多，所以我会先添加适当的链接，我也会为那些使用 HTML/JS 的人提供。

对于使用 HTML/JS 的用户，请参阅： [在 Windows 8 应用程序中使用 setTimeout 的计时器](http://devhammer.net/blog/w8wil-3-timers-using-settimeout-in-a-windows-8-app#.USUhumbTmos)

使用 cs/xaml 虽然您仍然可以为此使用 js，具体取决于您希望如何完成此操作： [How to submit a work item using a timer](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj248675.aspx)

对于重复计时器，请参阅： [如何创建定期工作项](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj248676.aspx)

现在，在您的情况下，即使应用程序未运行，您是否也需要发生这种情况？如果是这样，那么您将需要一个最多每 15 分钟左右运行一次 [的后台任务创建并注册一个后台任务](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977055.aspx)

因此，基本方案如下（来自 msdn 页面），但如果您想要取消它的方法，该网站也提供了该方案。请注意，当您的应用程序暂停或终止时，这将停止运行，即您的应用程序已关闭或不再是活动应用程序约五秒钟。

```
 var period = TimeSpan.FromMinutes(5);

var timer = ThreadPoolTimer.CreatePeriodicTimer((source) =>
    {
        //do your query/work here
        Dispatcher.RunAsync(CoreDispatcherPriority.High,
        () =>
        {
           // Now that work is done, safely access UI components here to update them
        });
    }, period); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:32:39.500

您可以使用系统事件后台任务，如果您希望在您的应用程序未运行时使其工作。

即使您的应用程序没有运行，它也会至少每 15 分钟唤醒一次。

# c++ - 多个 C++ 源文件中使用的命名空间

> ID：14988131
> 
> 赞同：0
> 
> 时间：2013-02-20T19:17:40.653
> 
> 标签：c++, namespaces, extern

我有一个 DLL 项目，其中包含一个`.h`文件，该文件在命名空间中定义了一个类和相关变量。这是使用 VS 2008 的 Windows XP。虽然很明显，这是一个 gstreamer 程序 :-)

`receiverList`我想要命名空间中的变量`IPC_RECEIVER`，但我想在该命名空间之外查看它，例如在相应的`IPC_SENDER`命名空间中。

```
// IPC-Receiver..h

#ifndef IPCRECEIVER_H_
   #define IPCRECEIVER_H_

   namespace IPC_RECEIVER
   {  
   ....  class declaration.
   }
   typedef std::list<IPC_RECEIVER::GstReceiver*>             ReceiverList_t;
   typedef std::list<IPC_RECEIVER::GstReceiver*>::iterator   ReceiverListIter_t;

#endif /* IPCRECEIVER_H_ */ 
```

然后是一个 cpp 文件，其中变量 g_receiverList 在 IPC_RECEIVE 命名空间中声明，但不在任何类中。

```
// IPC-ReceeiverAPIs.cpp
#include "IPC-Receiver.h"

namespace IPC_RECEIVER
{
   ReceiverList_t    g_receiverList;    // list to track receivers
   ...
} 
```

最后是第三个文件

```
// IPC-Receiver.cpp

#include "IPC-Receiver.h"

extern ReceiverList_t  g_receiverList;  

namespace IPC_RECEIVER
{
   GstReceiver::GstReceiver()
   {
      g_receiverList.push_back( this );
   }
} 
```

当我编译这个我得到这个错误：

```
Error   1   error LNK2001: unresolved external symbol 
   "class std::list<class IPC_RECEIVER::GstReceiver *,
   class std::allocator<class IPC_RECEIVER::GstReceiver *> > g_receiverList" 
   (?g_receiverList@@3V?$list@PAVGstReceiver@IPC_RECEIVER@
   @V?$allocator@PAVGstReceiver@IPC_RECEIVER@@@std@@@std@@A)
   IPC-Receiver.obj 
```

我尝试了在 extern 和构造函数中添加命名空间名称的各种组合。

和

```
IPC_RECEIVER::g_receiverList.push_back( this ); 
```

我得到：

```
Error   1   error C2039: 'g_receiverList' : is not a member of 
'IPC_RECEIVER'  x:\Projects\IPC-dll\IPC-dll\IPC-Receiver.cpp    54  IPC-dll 
```

与

```
extern ReceiverList_t  IPC_RECEIVER::g_receiverList; 
```

我收到两个错误：

```
Error   2   error C2039: 'g_receiverList' : is not a member of 'IPC_RECEIVER'   x:\Projects\IPC-dll\IPC-dll\IPC-Receiver.cpp    22    
Error   2   error C2039: 'g_receiverList' : is not a member of 'IPC_RECEIVER'   x:\Projects\IPC-dll\IPC-dll\IPC-Receiver.cpp    55 
```

其中 22 和 54 是`g_receiverList`使用的行。

使用`::`而不是`IPC_RECEIVER::`也不起作用。

那么，我该如何进行这项工作：在一个文件的命名空间中声明一个变量并在另一个文件中使用它？

这是链接顺序问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:25:39.120

您需要将 extern 放在命名空间中

```
namespace IPC_RECEIVER
{
   extern ReceiverList_t    g_receiverList;
} 
```

然后将其与不在 IPC_RECEIVER 命名空间内的代码中的限定名称一起使用。

例如

```
void main() {
   IPC_RECEIVER::g_receiverList.push_back(...);
} 
```

在您的示例中，您位于 IPC_RECEIVER 命名空间中，因此您不需要该`IPC_RECEIVER::`位。

# asp.net - 保存图片到sql数据库

> ID：14988133
> 
> 赞同：1
> 
> 时间：2013-02-20T19:17:43.783
> 
> 标签：asp.net, sql, image

我目前正在尝试将图像写入数据库，但是我看过和尝试过的文章是一行又一行的代码；这到底是行不通的。

我只是想知道是否有人知道任何文章；或者如果有人能指出我正确的方向。

谢谢！

顺便说一句，我使用的是 asp.net 4.0；并且正在尝试写入 sql 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:27:07.283

这篇 ASPSnippets 文章解决了将网页文件上传到 SQL 的问题（使用 MP3，但任何文件的概念都相同）：

[将 MP3 音频文件保存到数据库并在带有播放和下载选项的 ASP.Net GridView 中显示](http://www.aspsnippets.com/Articles/Save-MP3-Audio-Files-to-database-and-display-in-ASPNet-GridView-with-Play-and-Download-option.aspx)

文章中有多个截图/代码片段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:25:58.170

您需要将图像序列化为二进制格式，然后将其保存到数据库中。

如果您使用的是 sql server 我发现了这篇文章（他很好）：

[http://www.eggheadcafe.com/articles/20020929.asp](http://www.eggheadcafe.com/articles/20020929.asp)

[http://www.redmondpie.com/inserting-in-and-retrieving-image-from-sql-server-database-using-c/](http://www.redmondpie.com/inserting-in-and-retrieving-image-from-sql-server-database-using-c/)

非常简短的例子：

```
 MemoryStream ms = new MemoryStream();
 image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
 bool staus = _usersLogic.saveUserPicture(userID, ms.ToArray()); 
```

在这一行：

```
bool staus = _usersLogic.saveUserPicture(userID, ms.ToArray()); 
```

我正在发送一个`UserID`和图像作为`binary`格式在存储库中运行，该存储库负责将用户图片保存到我的数据库

这`ms.ToArray()`是您需要保存在数据库中的内容

当您想从数据库中取回图片时，您应该使用：

```
imgUser.Src = "data:image/png;base64," + Convert.ToBase64String(_user.Picture); 
```

# c# - 为什么我不能在带有命名空间的 XML 数据上使用 XPath？

> ID：14988134
> 
> 赞同：0
> 
> 时间：2013-02-20T19:17:45.063
> 
> 标签：c#, xpath, xml-namespaces, linq-to-xml, xelement

我正在使用以下代码：

```
 string testingXML = "<Policy><Activity xmlns=\"http://schemas.microsoft.com/netfx/2009/xaml/activities\"></Activity></Policy>";

            var xmlReader = XmlReader.Create( new StringReader(testingXML) );
            var myXDocument = XDocument.Load( xmlReader );
            var namespaceManager = new XmlNamespaceManager( xmlReader.NameTable );
            namespaceManager.AddNamespace("", "http://schemas.microsoft.com/netfx/2009/xaml/activities");

            var result = myXDocument.XPathSelectElement(
                "/Policy/Activity",
                namespaceManager
            );

            var result2 = myXDocument.XPathSelectElement(
                "/Policy",
                namespaceManager
            ); 
```

并尝试使用`namespaceManager`我的理解，这应该有助于解决我的问题。但是，如果我运行上面的代码，`result`变量会以 null的`result2`形式返回（确实以 XElement 的形式返回）。

这不应该工作吗？我是否错误地设置了命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:21:07.397

您必须始终在 XPaths 中使用显式前缀来引用与 null 不同的命名空间中的节点 - 即：

```
 namespaceManager.AddNamespace("msact", "http://schemas.microsoft.com/netfx/2009/xaml/activities");

        var result = myXDocument.XPathSelectElement(
            "/Policy/msact:Activity",
            namespaceManager
        ); 
```

这是 XPath 设计的工作方式——它与具体的实现无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:21:50.887

你正在`XmlReader`与`Linq2xml`

在 Linq2xml 中应该是

```
XDocument doc=XDocument.Parse(testingXML);
XNamespace ns="http://schemas.microsoft.com/netfx/2009/xaml/activities";
doc.Element(ns+"Activity"); 
```

# intuit-partner-platform - 需要 IPP.NET QBO 的错误处理示例

> ID：14988136
> 
> 赞同：0
> 
> 时间：2013-02-20T19:17:50.083
> 
> 标签：intuit-partner-platform, quickbooks-online

我将编写代码以将日记帐分录、发票和贷项通知单插入 Quickbooks Online。我可以在一个循环中一次插入一个，或者我可以使用批处理，我认为它使用 BatchRequest 和 BatchResponse。谁能告诉我一个错误处理的例子，我可以用它来验证插入或向用户报告失败的原因？我对单个事务插入和从 BatchResponse 获取错误的示例感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:41:21.640

如果发生错误，DevKit 将抛出异常。此处列出了例外情况：

[http://developer.intuit.com/IntuitDataServicesSDK/?topic=html/714c1b2e-3473-fadd-0753-358ebb114480.htm](http://developer.intuit.com/IntuitDataServicesSDK/?topic=html/714c1b2e-3473-fadd-0753-358ebb114480.htm)

# php - 消失再出现的php类

> ID：14988138
> 
> 赞同：0
> 
> 时间：2013-02-20T19:18:03.547
> 
> 标签：php, git, apache, svn

我正在使用 git 将 php 应用程序部署到 apache Web 服务器。部署后，一些文件只是随机恢复到最后一个状态。如果我添加了一个新的类文件，该文件就会消失，并且我会收到一个缺少类的错误。然后它回来了。其他人遇到了一个类似的问题，他使用 SVN 进行部署，并且他的配置类消失了，直到他重新启动 apache -Server 版本：Apache/2.2.15 (Unix)。有没有人遇到过类似的问题？网络服务器也在使用 webmin

# html - 修改 Shopify 购物车高度

> ID：14988140
> 
> 赞同：0
> 
> 时间：2013-02-20T19:18:12.567
> 
> 标签：html, css, shopify

所以这可能是一个愚蠢的问题，但我已经尝试将样式放在任何地方，但我无法让它工作，所以这是我的问题。

我使用 shopify 创建了一个购物网站，然后将其移植到我们的网站中，我们只使用了 iframe（因为网站的其余部分，包括页眉和页脚都在 wordpress 中）。因此，我们取消了 iframe 的滚动条并将其限制在正确的高度，以使主页和产品页面显示在页面中间。

问题是，如果您将大量商品添加到购物车中，它会变得大于 iframe 高度并切断结帐和贝宝按钮......

我已经修改了#cartform 本身，添加了 max-height: ... !important; 没有变化...然后我修改了 #cartform 表添加 max-height: ... !important; 没有变化......然后一直到顶部div并添加与上面相同的内容，它所做的只是将背景颜色向上移动，但它并没有缩小表格。

html中的基本布局是：

```
 <div id="col-main" class="full content">
      <form id="cartform" class="clearfix" method="post" action="/cart">
         <table class="items">
            <colgroup></colgroup>
         </table>
      </form>
   </div> 
```

我还加入了萤火虫并更改包含产品列表的所有不同块的高度。我什至将 style="" 添加到它们自己的块中（如上所示），但仍然没有......

我只是想知道是否有人尝试过这样做，遇到同样的问题，或者可以让我了解发生了什么以及如何解决它。我唯一能想到的是列表是动态生成的（将购物车中的每个产品添加到要显示的表格中）。但我只是不明白为什么桌子不会受到高度的限制。或者当包含它的 div 设置为较小的高度时，整个表格如何保持可见。

任何帮助，将不胜感激。

谢谢，

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:57:54.373

愚蠢的错误......也没有在样式中添加“溢出：滚动”。出于某种原因，我认为 auto 是默认设置。但在进一步审查可见是默认...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:45:25.850

Alan，我可能有点晚了，但作为替代方案，您也可以将 Shopify 商店嵌入 wordpress 网站。Shopify 有一个免费的应用程序可以做到这一点。

[Shopify 网站](http://www.shopify.com/blog/5856736-upgraded-shopify-widget-embed-your-online-store-anywhere#axzz2LdBiWVcw)上有更多相关信息。

# java - 以 /（斜杠）开头的字符串中的 JSON/Jettison 格式错误

> ID：14988141
> 
> 赞同：0
> 
> 时间：2013-02-20T19:18:13.703
> 
> 标签：java, json

我想要这个 JSON：

```
{"lala":{"any":1,"/doc/h2":1}} 
```

但是使用 Jetisson ( [http://jettison.codehaus.org/](http://jettison.codehaus.org/) )，如下例所示：

```
 JSONObject extractJson = new JSONObject();
  int i = 1;

  extractJson.put("lala", new JSONObject()
      .put("any",1)
      .put("/doc/h" + (i+1), 1)  # HERE!
    );

  System.out.println(extractJson.toString()); 
```

返回这个：

```
 {"lala":{"any":1,"\/doc\/h2":1}} 
```

在任何 '/' 前面有一个额外的 '\'

我的问题是：为什么？我怎样才能生成正确的json？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:48:31.023

如果您可以选择切换库，[GSON](http://code.google.com/p/google-gson/)可以轻松做到这一点：

```
JsonObject jsonObj = new JsonObject();
jsonObj.addProperty("field1", 5);
jsonObj.addProperty("/doc/h2", 1);
System.out.println(jsonObj.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:26:57.103

默认情况下，您的库（jettison）似乎会转义。这对于 json 来说是可以的，任何解析器都应该能够在解析时再次取消转义它们。

显然，根据[JSON：为什么要转义正斜杠？](https://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped)这是因为 HTML，特别是脚本标签。

如果你真的不希望他们在那里，你有几个选择：

*   查看您的库文档，了解默认情况下如何不转义。
*   改变图书馆。

# plot - 我如何在 gnuplot 中插入离散值，例如 n = 1,2,3,4,5...

> ID：14988142
> 
> 赞同：1
> 
> 时间：2013-02-20T19:18:14.217
> 
> 标签：plot, gnuplot

您好，我需要在 gnuplot 中绘制一个函数：

```
h(x) = ((sin(x/2))**2)/((sin(n*x/2))**2) 
```

我不知道如何设置

```
n = ...-2,-1,0,1,2... 
```

或者也许

```
n = 1,2,3,4... 
```

我该怎么做？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:46:22.783

gnuplot 中的函数定义可以采用多个参数：

```
h(x,n) = ((sin(x/2))**2)/((sin(n*x/2))**2) 
```

如果要绘制此类函数的范围，可以使用以下`for`结构：

```
plot for [i=-2:2] h(x,i) 
```

或`do for`：

```
do for [i=-2:2] {
    plot h(x,i)
    print i # or do other stuff
} 
```

# sql - 当 table1 中只有一个数据插入时触发从 table2 复制数据

> ID：14988147
> 
> 赞同：1
> 
> 时间：2013-02-20T19:18:22.543
> 
> 标签：sql, sql-server, triggers

我有这个触发器

```
CREATE TRIGGER TriggerPickup
    ON dbo.Pickup
    AFTER INSERT 
    AS BEGIN
INSERT INTO dbo.Pickup( PickupProxy,PickupHispanic,EthnCode,CategCode,AgencyID)
         SELECT
              Clients.ClientProxy, Clients.Hispanic, Clients.EthnCode, Clients.CategCode,Clients.AgencyID
         FROM
             dbo.Clients,Pickup
             where   Pickup.ClientID =Clients.ClientID
    END 
```

但是，如果我提交这样的插入语句。它应该从客户端表中提取数据并插入到我插入 ID 和日期的同一行中，但是它会创建新记录并将数据放入其中。

```
INSERT INTO Pickup (ClientID, PickupDate)
VALUES (13144, '2010-11-20'); 
```

它没有从客户表中复制任何数据它只是插入空行 ![select * from pick 是什么样子的](../Images/0b3ee1a5d983b56f9c4fed3c9f49d237.png) 任何想法发生了什么以及我在这个查询中的错误在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:42:59.600

您需要将[INSTEAD OF INSERT](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.105%29.aspx)触发器或 AFTER 触发器与 UPDATE 语句一起使用

```
CREATE TRIGGER TriggerPickup ON dbo.Pickup
INSTEAD OF INSERT
AS BEGIN
  INSERT dbo.Pickup( PickupDate,
                    PickupProxy, PickupHispanic, EthnCode, CategCode, AgencyID)
  SELECT i.PickupDate, 
         c.ClientProxy, c.Hispanic, c.EthnCode, c.CategCode, c.AgencyID
  FROM dbo.Clients c JOIN inserted i ON i.ClientID = c.ClientID
END 
```

触发后

```
CREATE TRIGGER TriggerPickup ON dbo.Pickup
FOR INSERT
AS BEGIN
  UPDATE p
  SET p.PickupProxy = c.ClientProxy,
      p.PickupHispanic = c.PickupHispanic,
      p.EthnCode = c.EthnCode,
      p.CategCode = c.CategCode,
      p.AgencyID = c.AgencyID
  FROM inserted i JOIN dbo.Clients c ON i.ClientID = c.ClientID
                  JOIN dbo.Pickup p ON i.PickupID = p.PickupID
END 
```

# np-complete - 我如何证明 2-CNF 不是 NP 完全的？

> ID：14988148
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:18:30.270
> 
> 标签：np-complete

我想知道如何证明 2-CNF 不是 NP-hard 或 NP complete？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:24:25.003

已知 2-CNF 可满足性在 P 中。因此，如果您能够证明它不是 NP 完全的，则可以得出 P ≠ NP。因此，没有人知道如何证明这一点。

# android - Android限制使用序列号安装应用程序

> ID：14988149
> 
> 赞同：1
> 
> 时间：2013-02-20T19:18:31.857
> 
> 标签：android

构建具有序列号供用户使用该应用程序的应用程序是一种好习惯吗？（像大多数桌面应用程序一样）

如果是这样，通过序列号保存用户已经*购买*应用程序的状态的好方法是什么（说明 SharedPreferences 和数据库文件很容易被黑客入侵）？

如果不是，原因是什么？

编辑：我的国家（印度尼西亚）无法向 Google Play 出售付费应用程序（[来源](http://support.google.com/googleplay/android-developer/answer/150324?hl=en)），我还没有注册到 Google Play。我应该如何自行管理付费申请？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:27:52.463

这看起来像一个安全问题。对于付费应用，我相信开发人员更多地依赖 Google Play 商店来照顾他们，他们无法安装/使用他们没有付费的应用。如果有人提取apk，他可以做的最大的事情是安装在更多设备上，如果你有一个root设备，这相当简单。

任何开发人员通常更关心的是保护应用程序免受逆向工程和源代码盗窃，而不是安装程序。为了使您的应用程序免受逆向工程的影响，您应该在将应用程序发布到 Play 商店之前混淆应用程序源。

希望这可以帮助。

# sencha-touch-2 - index.html 文件中有什么内容？

> ID：14988150
> 
> 赞同：0
> 
> 时间：2013-02-20T19:18:37.613
> 
> 标签：sencha-touch-2

我正在使用 Sencha Touch 2 构建我的第一个应用程序之一，我在网上找不到要在 index.html 中准确链接的内容，因为我正在网上学习教程，但我收到一个空白屏幕（问题是从索引文件）。正如我所说，我希望得到一些帮助，我在互联网上找不到任何东西。

```
<script id="microloader" type="text/javascript" src="touch/microloader/development.js"></script>
<script src="../touch-2.1.1/sencha-touch-debug.js" type="text/javascript"></script>
<script src="app.js" type="text/javascript"></script>
<link href="../touch-2.1.1/resources/css/sencha-touch.css" rel="stylesheet" type="text/css" />
<link href="resources/css/app.css" rel="stylesheet" type="text/css" /> 
```

而且我已经使用 Sencha Cmd 来生成我的应用程序。我使用的浏览器是 Chrome 版本 24。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:03:35.000

Firstly if you are starting you should not write files on your own, you should generate project using Sencha Cmd. Here are details:

[http://docs.sencha.com/touch/2-1/#!/guide/command_app](http://docs.sencha.com/touch/2-1/#!/guide/command_app)

and if you want to learn what to do after that you should go through this brilliant tutorial [http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)

Still you get blank page please show index.html file.

BTW which browser you are using?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:40:11.083

我发现问题出在代码中，而不是在索引文件中，因为我没有正确引用文件。

谢谢 ：）

# android - 重置为默认首选项不更新 EditTextPreferences

> ID：14988153
> 
> 赞同：0
> 
> 时间：2013-02-20T19:18:42.883
> 
> 标签：android, edittextpreference

我正在尝试实施重置为默认选项，这是我设置的一部分。它的作用是恢复为默认值。我的问题是，当我重置所有内容时，如何使用 newValue 更新 EditTextPreference 值？它仅在退出活动并返回到活动后更新。首选项已正确更新，但不是 EditTextP 的实际内容。感谢您花时间阅读本文！

```
@Override
                public void onClick(DialogInterface dialog, int which) {

                    SharedPreferences preferences = 
                            PreferenceManager.getDefaultSharedPreferences(PreferencesActivity.this); 
                    SharedPreferences.Editor editor = preferences.edit(); 

                    editor.clear();                         
                    editor.commit();

                    PreferenceManager.setDefaultValues(PreferencesActivity.this, R.xml.preferences, true);                      
                    editor.commit();                                                    

                    CheckBoxPreference enableEdit = (CheckBoxPreference)findPreference("IsChecked");    
                    enableEdit.setChecked(false);

                } }); 
```

# c# - 实体框架急切加载多级异常

> ID：14988155
> 
> 赞同：6
> 
> 时间：2013-02-20T19:19:02.133
> 
> 标签：c#, .net, entity-framework, entity-framework-5

好的，所以根据[这个页面](http://msdn.microsoft.com/en-us/data/jj574232.aspx)`Select`，实体框架应该通过在`Include`方法中使用 a 来急切地加载多个级别。

我有以下代码：

```
var reports = _context.Reports
    .Include(rt => rt.Fields)
    .Include(rt => rt.Fields.Select(f => f.FieldType))
    .Include(rt => rt.Fields.Select(f => f.FieldType.FieldIdentifier)); 
```

然而，这会`InvalidOperationException`在调用第二个包含时引发“无效的表达式类型”。异常来自`EntityFrameworkHelper.CollectRelationalMemebers`.

我也尝试过对`Include`相关属性使用字符串，但这也失败了（如果可能的话，我宁愿避免使用字符串）。

我正在使用 .NET 4.0 的 EF 5.0 DLL。我的 EF 类是老式的 database-first `EntityObject`。

有谁知道原因，如果我能对这个异常做些什么？

编辑：

使用字符串版本时：

```
var reports = _context.Reports
    .Include("Fields")
    .Include("Fields.FieldType")
    .Include("Fields.FieldType.FieldIdentifier")); 
```

它抛出`InvalidOperationException`- 表达式类型无效。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T20:44:35.323

您有多余的包含。您只需要最后一个包含，它将包含该路径中的任何内容。例子：

```
var reports = _context.Reports
    .Include(rt => rt.Fields.Select(f => f.FieldType.FieldIdentifier)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:14:55.340

问题最终是`Include`我们使用的 DLL 中的第 3 方扩展方法优先于实体框架的`Include`. 第 3 方正在抛出异常。删除后问题就解决了。

扩展方法的问题之一......

感谢大家的帮助。

# objective-c - 为什么 Apple 标头没有 NSError** 参数的 __autoreleasing？

> ID：14988157
> 
> 赞同：3
> 
> 时间：2013-02-20T19:19:04.760
> 
> 标签：objective-c, cocoa, automatic-ref-counting, out-parameters

为什么 Apple 的方法不`NSError**`声明为`NSError * __autoreleasing *`？

[过渡到 ARC 发行说明](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)似乎表明它们应该是 (?)。

例如，NSFileManager.h 中的所有例程。但我实际上没有看到*任何*使用过渡到 ARC 发行说明中所述的 Apple 标头：

```
and the method declaration would typically be:

-(BOOL)performOperationWithError:(NSError * __autoreleasing *)error; 
```

可能是因为支持所有`NSError * error = nil;`声明都暗示的遗留代码库，`strong`所以如果Apple放在`__autoreleasing`那里，`__autoreleasing`每次都会导致创建一个临时局部变量？我唯一能想到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:21:12.227

指向 Objective-C 对象的双指针隐含地`__autoreleasing`由[LLVM 规范](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#indirect-parameters)指定。

# php - htaccess 返回索引

> ID：14988158
> 
> 赞同：0
> 
> 时间：2013-02-20T19:19:11.317
> 
> 标签：php, .htaccess

我目前正在开发一个项目，该项目具有以下链接方法如果链接是
`www.foo.com/sub/foo.php?o=1000`它会打开 MyContacts

`www.foo.com/sub/foo.php?o=608`它打开 XYZ

...整个网站都建立在此之上，只有数字发生了变化。

但是您可以直接访问这些文件： `www.foo.com/sub/file1000.php`

所以我现在的问题是，是否可以重定向到

`www.foo.com/sub/foo.php?o=1`- （索引页面）如果链接不是`www.foo.com/sub/foo.php`

我想这可以或可以在 .htaccess 中完成，但我对 .htaccess 编程一无所知。

泰，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:26:03.910

这可以通过 .htaccess 来完成，但通常我会建议您从 documentroot 中删除您不希望直接访问的任何内容。PHP 仍然可以访问位于公共目录下的文件。

如果你使用.htaccess，一定要设置特定的规则，否则所有的图片和css请求都会被重定向回索引

否则，您也可以在 foo.php 中添加一行：

```
define('ISINCLUDED', 'YES'); 
```

并在每个 foo10000.php 中：

```
if(!defined('ISINCLUDED')) return; 
```

# javascript - 我可以添加或减去 jQuery 值和 JavaScript 值吗？

> ID：14988161
> 
> 赞同：-2
> 
> 时间：2013-02-20T19:19:25.213
> 
> 标签：javascript, jquery, html, nan

```
function moves_like_jagger(event) {
var MouseX=event.clientX;
for(i=1;i<l+1;i++) {
    helper=".d"+i;
    amount=(MouseX-$(this).width/2)*layer[i-1];
}} 
```

当 jQuery 出现时，就会出现这个问题。在这种情况下，我想使用 jQuery 来访问 id、class 等，但是当我运行这个脚本并用 document.write(amount) 写入“amount”时，我得到了 NaN。 .. 我测试了它，它是因为 jQuery。`$(this).width`不返回任何数字，而是返回一个脚本。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:21:19.343

> "$(this).width" 不返回数字，而是返回一个脚本。问题是什么？

jQuery 对象的`width`属性是一个函数，而不是一个数字。

调用它，并改用它的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:21:31.877

那是因为 jQuery.width() 是一个函数，而不是一个属性。改变

```
amount=(MouseX-$(this).width/2)*layer[i-1]; 
```

至

```
amount=(MouseX-$(this).width()/2)*layer[i-1]; 
```

# security - 不需要 UserProvider 的自定义身份验证

> ID：14988162
> 
> 赞同：2
> 
> 时间：2013-02-20T19:19:25.740
> 
> 标签：security, authentication, symfony, symfony-2.1

我在网上为我的配置寻找解决方案，但找不到满足我需求的东西。到目前为止，我已经为此工作了整整 3 天，但我无法使其正常工作，我确信有几件事我不明白。

我正在分支 2.1 上开发我的 symfony 应用程序。

为了使这个简短。我有一个要用于身份验证的网络服务。

这是我要实现的流程：

1.  用户提交凭据
2.  这些凭据（需要用户名和密码）发送到我的网络服务
3.  如果用户名/密码正确，webservice 会给出一个数组，其中包含用户名、角色和除密码之外的其他内容。（如果凭证不正确，将返回一个包含一个字段的数组）
4.  一旦 web 服务给出“大”数组，我希望用户被认为是经过身份验证的。
5.  在返回的角色函数中，我希望 Symfony 安全组件给用户相应的授权。
6.  我想避免为浏览的每个页面调用网络服务。

我不知道是否可以使用 Symfony 来实现这一点，当然这个工作流程似乎不是更安全，但我看不到使用这个 web 服务的另一种方式。

最后，我不需要 UserProvider，因为我的身份验证是在远程服务上进行的。但显然，Symfony 组件需要一个用户提供者（不管它的类型）。

我提前谢谢你

编辑：为了简单起见，是否可以在 UserProvider 类（实现 UserProviderInterface）的 loadUserByUsername() 函数中传递变量 $username 以外的东西？除了他/她的用户名之外，我还需要让用户通过才能检索用户对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:22:06.657

AuthenticationProvider 通常会调用 UserProvider.loadUserByUsername。在您的情况下，无需调用它。您的身份验证方法可以负责创建用户并传回令牌。

经过身份验证的令牌最终会在会话中结束。

问题是，默认情况下，当下一个请求进来时，系统将从会话中检索令牌/用户，然后调用 UserProvider.refreshUser($user)，它再次默认使用 loadUserByUsername 重新加载用户。

因此，您需要创建自己的用户提供程序，并让 refreshUser 返回相同的用户。您将需要一个 loadUserByUsername 来满足接口，但绝不应该调用它。

如果您确实想从 Web 服务定期刷新您的用户，那么您需要添加自己的侦听器以从会话中加载令牌并覆盖默认行为。

# performance - 如何对 Rebol 中的一系列函数进行基准比较？

> ID：14988163
> 
> 赞同：4
> 
> 时间：2013-02-20T19:19:30.497
> 
> 标签：performance, benchmarking, timing, rebol

我最近询问了[在 Rebol 中计算换行符的最快/最有效的方法](https://stackoverflow.com/questions/14765993/whats-the-fastest-most-efficient-way-to-count-lines-in-rebol)——我现在需要确定在给定情况下哪种方法最好。

一些示例场景：短文本，更少的换行；短文本，许多换行符；中/长文本，许多换行符（代码）；中/长文本，更少的换行符（文章）。

我有一些不确定性：如果我一个接一个地运行，第二个测试会被第一个测试污染吗？对于不同的场景（优化）需要不同的功能与一个功能适合所有人（方便）会有多大的差异？我需要 Rebol 2.7.8 和[Rebol 3](http://rebolsource.net/)的基准。

这是我想测试的特定功能集，尽管也欢迎更通用的答案：

```
reduce [
    "@rebolek"
    func [text [string!] /local i][
        parse text [(i: 1) any [thru newline (++ i)]] i
    ]

    "@darius"
    func [text [string!] /local tmp][
        tmp: sort join text "^/"
        1 + subtract index? find/last tmp "^/" index? find tmp "^/"
    ]

    "@endo64"
    func [text [string!]][
        (length? text) - (length? remove-each v text [v = #"^/"])
    ]

    "@BrianH"
    function [text [string!]] [
        i: 1
        find-all text newline [++ i]
        i
    ]

    "@MaxV"
    func [text [string!]][
        write %.mytext text
        text: read/lines %.mytext
        delete %.mytext
        length? text
    ]
] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T21:13:08.007

在 REBOL（R2 和 R3）中进行分析的挑战是三重的。定时、循环和内存使用。

## 定时：

在某些操作系统上，默认时间并不精确（如 Windows）。这可以通过创建更大的循环来很大程度上缓解，这些循环基本上将测试扩展到可接受的时序裕量。您还可以创建更好的计时器，例如我为 windows ( [chrono-lib.r](http://www.rebol.org/view-script.r?script=windows-chrono.r) ) 构建的 chrono lib。

它还包括一个延时功能，使测试块变得容易（基本上是一个更精确的 'DT for windows）。

## 循环：

这是一件显而易见的事情，当您计时，为了消除一些操作系统/多任务开销，您运行代码多次并将重复次数除以得到平均值。这通常足以得到一个好主意。

但是，在 rebol 中，循环本身的成本相当高。迭代函数有它们自己的不可忽略的开销。因此，在循环某些代码之前，请确保您使用的循环是最佳的，尤其要确保您使用本机迭代器函数，因为循环最终可能比您尝试分析的代码慢。在 R2 中，FOREACH 和 LOOP 在大多数情况下是更快的循环。FOREACH 在开始循环之前有一点绑定开销，但在我的广泛测试中，这产生了不可估量的影响，因为它只发生一次并且与几秒钟的运行无关。

在 R3 中，由于 R2 中的一些夹层循环已经成为原生的，因此迭代器函数得到了速度提升，因此您必须检查它们才能看到。

## 记忆：

这是事情变得难以预测的地方。REBOLs GC 在分析时非常具有侵入性。它不仅速度慢，而且不可预测，实际上无法优化，并且随着 REBOL 内存占用量的增加而减慢（实际上，比人们意识到的要多得多）。

多少？让我们来看看：

这是我必须对内存使用和执行速度进行基准测试的脚本。它会生成一个图形，可以向我展示一个与另一个的关系。它有一个关闭垃圾收集器的选项......你会看到它如何影响分析......有和没有的图形很能说明问题：

```
rebol [
    title: "profiling tests with graphics"
    author: "Maxim Olivier-Adlhoch"
    purpose:  "given a few metrics and code blocks, will plot out the time and memory use for each repetition."
]

;----
; test metrics
loops: 2000
repetitions: 500

;----
; test options
turn-off-garbage-collector?: false

;----
; output gfx prefs
mem-color: red
time-color: sky
bg-color: black
gfx-size: 600x400
margins: 100x100
lw: 2 ; line-width
label-color: white * .85
border-color: gray * 0.5
slices: 10 ; how many labels on the edges of the graphics.

;----
; globals
plot-data: []

;----
;- functions
platform: does [
     select [
        1 AMIGA
        2 OSX
        3 WIN32
        4 LINUX
    ] system/version/4
]

;----
; make sure timer resolution is decent on all platforms
;----
either ( platform = 'WIN32 ) [
    either exists? %libs/windows-chrono.r  [
        do %libs/windows-chrono.r
    ][
        ask "download and save windows-chrono from rebol.org ?  ^/^/    * press ENTER to confirm^/    * press ESCAPE to halt."
        make-dir %libs/
        write %libs/windows-chrono.r read  http://www.rebol.org/download-a-script.r?script-name=windows-chrono.r
        print "windows chrono downloaded"
    ]
][
    ; on other platforms, the OS timer resolution tends to be better, we can just use delta-time
    time-lapse: :delta-time
]
;   time-lapse: :delta-time

;----
; TEST CODE INITIALISATIONS
blk: make block! repetitions

print "===================="
print "running tests"

;----
; SETUP TEST OPTION(S)
if turn-off-garbage-collector? [
    recycle/off
]

;--------------------------------------------
; PERFORM AND PLOT TESTS
;--------------------------------------------
repeat i repetitions [
    ;--------------------------------------------
    ; PUT YOUR LOOP INIT CODE HERE:
    ;--------------------------------------------
    tmp: last append/only blk copy []
    time: time-lapse [

        loop loops [
            ;--------------------------------------------
            ; PUT YOUR TEST CODE HERE:
            ;--------------------------------------------
            ; here we just accumulate RAM...
            append tmp make string! 1000
        ]
    ]
    memory: stats
    append plot-data reduce [ time memory]
    prin "."
]

;-------------------------
; extract plot data scale
;-------------------------
time-x: 0:00
stat-y: 0

foreach [time stat] plot-data [
    time-x: max time-x time
    stat-y: max stat-y stat
]

time-scale: (gfx-size/y / to-decimal time-x )
mem-scale:  gfx-size/y / stat-y

print ""
?? time-scale
?? mem-scale

;-------------------------
; build gfx
;-------------------------

;-------
; lines
i: 0
mem-line: compose [line-width lw pen (mem-color ) line () ]
time-line: compose [line-width lw pen (time-color ) line () ]
foreach [time ram] plot-data [
    time: to-decimal time
    ;?? time
    ;print time * time-scale

    append mem-line margins + to-pair  reduce [ x: to-integer (i / (repetitions - 1) * gfx-size/x) to-integer ( ram  * mem-scale  )]
    append time-line margins + to-pair reduce [ x                                            to-integer ( time * time-scale  )]
    i: i + 1
]

;------
;scales
scale-drw: compose [
    line-width 1
    pen (border-color) box (margins) (margins + gfx-size)
]

repeat i (slices + 1) [
    ii: i - 1
    append scale-drw reduce [
        'pen mem-color
        'text margins + to-pair reduce [ -50   (gfx-size/y - (ii / slices * gfx-size/y ) ) - 5 ]
             rejoin [ to-string round/to (ii / slices * stat-y / 1'000'000) 0.01  " MB" ]

        'pen time-color
        'text margins + to-pair reduce [ gfx-size/x   (gfx-size/y - (ii / slices * gfx-size/y ) ) - 5 ]  
             rejoin [ to-string round/to (1000 * ii / slices * to-decimal time-x) 0.1   "ms" ]

        'pen border-color
        'text margins + to-pair reduce [ ((ii / slices * gfx-size/x ) )    gfx-size/y + 10 ]  
             rejoin [ to-string to-integer( ii / slices * repetitions)   ]
    ]
]

view layout compose/deep  [
    box (margins * 2 + gfx-size) bg-color effect [draw [
        translate (0x1 * (margins * 2 + gfx-size)) scale 1 -1.0  (mem-line) (time-line) 
        reset-matrix
        (scale-drw)
    ]]
] 
```

随意复制和编辑这个脚本，它是一个非常简单的绘图机制......我相信你可以添加额外的曲线（比如你正在测试的函数的输出值）。

在此脚本的顶部，您可以看到有一个禁用 GC 的选项...在此循环中的测试代码中，我们只分配 RAM，以查看 GC 如何影响整体性能。

这是启用 GC 的运行： ![在此处输入图像描述](../Images/0e0fb139cc84cde59687872bafcc4886.png)

您可以看到执行受到阻碍，因为 GC 一直在监视和中断进程。

随着 RAM 的增加（红线），执行速度不断减慢。请注意，所有块都是预先分配的，因此这不是由于内部内存复制造成的。

这是禁用 GC 的运行： ![在此处输入图像描述](../Images/1fc988e2d21d68056fe1d291034410a6.png)

您可以清楚地看到操作的线性程度。

您在两次运行中的不规则跳跃是由于正常的操作系统多任务处理造成的。

请注意，两个测试中的最佳速度是相同的。大约 5 毫秒……但平均而言，在启用 GC 的运行中变得越来越糟。

出于这个原因，当我测试任何代码时，我总是将 GC 关闭，除非代码生成的即时内存很快将任务运行到内存不足。或者，您可以在代码中的关键点回收/关闭回收/开启，以缓解这部分问题。当调用 recycle/on 时，如果超出阈值，它将立即进行清理。

请注意，内存分配的复杂性对 GC 有影响。不仅是 RAM 的数量，而且正在构建的值的数量也会产生很大的影响。使用上面的分析器，您可以构建指数级缓慢的算法，当它们开始实时时，这些算法在 300MB 时几乎无法使用。

绑定和创建许多复杂的对象，这将完全破坏 rebol 中任何速度的伪装。如果要创建大型数据集，最好使用块层次结构而不是对象层次结构。

我希望上面的脚本能帮助你描述一些你想要测试的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T23:15:46.640

在[R3 中对高分辨率时间的更改中](http://www.rebol.net/r3blogs/0293.html)，Carl Sassenrath 描述了 Rebol 3 中改进的（超过 Rebol 2）计时器。您可以获得`stats/timer`分辨率为几微秒的时间戳。要测量时间增量，`delta-time`请按如下所示使用，但请参阅有关在 CPU 频率变化中获取增量的准确性的博客文章。

其中发现了几个要点：

*   在启动时，在任何初始化之前，它被设置为 0:00:00.0
*   在分频之前计算具有高分辨率计时器滴答声的增量（在 Win32 上）

和一些例子：

准确显示总启动时间的脚本：

```
Rebol [file: %boot-time.r]
print stats/timer 
```

正弦函数计时的简单示例：

```
delta-time [loop 100 [sine 123]] 
```

# mysql - 非规范化建议

> ID：14988165
> 
> 赞同：4
> 
> 时间：2013-02-20T19:19:33.643
> 
> 标签：mysql, optimization, nosql, denormalization

我有一个学区数据库（其中约 15,000 个，并且还在不断增长）以及每个学区员工可获得的退休计划/福利。数据被很好地标准化：

*   一个地区记录与 0 或*n 个*退休计划选项相关联（其中*n* < 10 分布在 3 个连接表中）
*   一个地区记录与 0 或*n 个*福利相关联（其中*n*接近 40 来自 1 个连接表）
*   一个地区还与其他一些关联数量很少的事物相关联。

现在客户要报告。他们希望以一种非常动态的方式进行报告（想想一个 iTunes 智能播放列表，其中可以为任何地区、计划或福利的任何财产添加/删除规则）。我需要允许他们查询一个地区的任何财产、它的退休计划或它的福利并返回*所有东西*。

为了使事情简单（现在）并避免重复数据，我设置了几个视图（嘘，我知道）只允许我以任何 1 个区记录有效地具有 1- 的方式访问数据与视图的一对一关系以及与`all_retirement_plans`视图的一对一记录`all_benefits_plans`。这为我提供了一组干净的连接，从而产生了一个统一的结果集，但显然伴随着它自己的一组问题，我迟早会遇到这些问题......

也就是说，随着更多数据的添加，它会变得*异常缓慢。*

我正在寻找一些关于非规范化的建议。我考虑过一个报表，它可以完成视图的工作，但可以被索引。我还考虑过将整套地区数据转储到 MongoDB（或类似的）。我敢肯定还有其他选择，但我会玩试错游戏，所以我希望这里的人能以一种让我处于合理解决方案的范围内的方式为我提供建议。

最重要的是，我需要能够存储约 15,000 条（并且还在增长）地区记录以及大量额外的元数据，然后以非常精细的级别报告这些数据。除了我自己的想法之外，有人有任何想法或建议吗？我正在努力解决我知道即将发生的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:27:49.823

我希望这会有所帮助，因为我最近在将数据从关系迁移到面向文档（非规范化）方面做了很多工作。

将数据移动到 Mongo 的一些选项：

1.  您可以轻松地将数据从 MySQL 写入 Mongo 并保留您的关系表。无需转换，只需直接移动数据即可。Mongo 具有可以输出到新集合的 map/reduce。虽然很慢。=( 如果你直接移动一个视图，Mongo 有一个聚合框架，它对于生成新文档非常强大。

2.  理想情况下，您将在 MySQL 中编写您的“文档”，然后将它们移过来。我使用 MySQL 的经验是使文档非常扁平。您可以通过 group_concat 发挥创意来添加结构。你基本上 group_concat 一些数据和手动 JSON 字符串在一起。（丑陋，但它有效）

3.  Mongo 擅长*处理*文档。真的，真的很棒。如果您想使用非规范化数据，我强烈推荐它。

4.  这可能有点矫枉过正，但我​​们使用 Mule ESB 将数据从 MySQL 移动到 Mongo。您可以在那里进行更复杂/棘手的转换，但有一个学习曲线。

5.  在 SQL Server 中，您可以将查询输出为 XML。如果您可以在 MySQL 中找到一个库来执行此操作，那么从 XML 到 JSON 的跳转很容易。我们已经能够在 SQL Server 中运行超过 10 万条记录的查询并非常快速地输出 XML。

如果您想了解任何一点的更多详细信息，请告诉我。=)

# ios - 拖动滚动 UITableView 本身而不是其内容

> ID：14988166
> 
> 赞同：0
> 
> 时间：2013-02-20T19:19:33.243
> 
> 标签：ios, ipad, uitableview, scroll

我在 iPad 应用程序中有几个表格 UI，每个 UITableView 都嵌入在一个更大的灰色背景 UIView 中，而后者又嵌入到全屏、清晰的 UIView 中（以检测灰色 UI 之外的点击作为信号解雇它）。

视图控制器拥有顶级 UIView 并将自己设置为嵌入表的数据源和委托协议的委托。

除了最新的 UI 外，所有 UI 都按预期工作：当我在表格上上下拖动时，内容会上下滚动，当滚动超出内容的顶部/底部时会露出空白区域。当我在滚动到表格顶部/底部之外时释放拖动，内容会反弹回表格的整个高度。

但是在这个最新的 UI 中，当我上下拖动时，整个表格视图会滚动而不是其内容，从而将灰色背景暴露在表格视图的顶部/底部之外。

这会导致两个问题：我无法到达最初可见的表格单元格之外的任何表格单元格，并且当拖过底部时，表格不会反弹回其全高。前者显然比后者差，但两者都不好。

据我所知，管理这些 UI 的 .xib 文件和代码对所有人来说都是相同的。（这是我创建它们时的意图。）我找不到任何区别，当然没有任何区别可以解释这种行为。

任何人都可以提供建议，我应该在哪里寻找是什么让表格视图本身滚动，而不是它的内容？

我可以在 Xcode 4 中发布 .xib 的代码片段和屏幕截图，但正如我所说，它们在这些 UI 中似乎都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:22:49.927

发现了问题。

我在 UITableView 上调用以在右侧绘制圆角，同时将左侧角保持为正方形（因此每个表格单元格的 imageView 中的图标不会被切掉角）。

代码来自 InfinixSoft 网站上的一篇博文：http: [//infinixsoft.com/2012/09/rounding-up-the-corners-of-a-uiview](http://infinixsoft.com/2012/09/rounding-up-the-corners-of-a-uiview)

正是这个调用导致整个表格视图滚动，而不仅仅是其内容。删除此调用解决了问题。

我希望这个答案可以帮助其他开发人员。

# javascript - 如何在 GitHub 上分叉我自己的要点？

> ID：14988168
> 
> 赞同：4
> 
> 时间：2013-02-20T19:19:44.777
> 
> 标签：javascript, github, gist

我如何分叉我自己的 GitHub 要点？

一种可能性：在 gist 上发布了一个脚本，但我不知道如何在我的 gitHub 上安装它。在这种情况下，解释如何使用脚本以及它在做什么。

[（重新）分叉任何要点，包括你自己的](https://gist.github.com/johan/1306266)

```
<!-- language: lang-js -->
// ==UserScript==
// @name           (Re)fork any gist, including your own
// @namespace      https://github.com/johan
// @description    Adds a "fork" button to gists missing one at gist.github.com, so you can create multiple forks
// @match          https://gist.github.com/*
// @include        https://gist.github.com/*
// ==/UserScript==

if (/^\/\d+/.test(location.pathname) &&
    !document.querySelector('a img[alt="fork"]')) {
  var i = document.createElement('img')
    , a = document.createElement('a')
    , u = document.querySelector('img.button').src
    , p = document.querySelector('.title');

  a.title = 'Create another fork of this gist';
  a.style.cssText = 'float: right; margin: 4px 7px 0';
  a.addEventListener('click', fork);
  a.appendChild(i);

  i.alt = 'fork';
  i.src = u.replace(/[^\/]*$/, 'fork_button.png');
  i.className = 'button';

  p.appendChild(a);
}

function fork(e) {
  var f = document.body.appendChild(document.createElement('form'));
  f.method = 'POST';
  f.action = '/fork' + location.pathname;
  f.appendChild(document.querySelector('input[name=authenticity_token]'));
  f.submit();
  return false;
} 
```

StackOverflow 展示了如何创建自己的[GitHub 存储库](https://stackoverflow.com/questions/3772684/how-can-i-fork-my-own-github-repository)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T15:01:43.547

试试[Fork your own Gist](https://gist.github.com/U-D13/7085254)小书签。

它为您自己的 Gist添加了一个功能齐全的*Fork按钮。*

如果页面中已存在*Fork*按钮，则此小书签将为其设置焦点，而不是添加另一个按钮。

更改是暂时的，一旦您离开该 Gist，该按钮就会消失（单击*Fork*按钮也会为您执行此操作）。

# azure-sql-database - 更改 SQL Azure 上的标识列

> ID：14988184
> 
> 赞同：1
> 
> 时间：2013-02-20T19:20:39.517
> 
> 标签：azure-sql-database

我有一个作为主键的列，并在 SQL Azure 数据库中设置为标识。

我需要更改种子值（从不同的数字继续），但 Azure 门户的用户界面不允许编辑该字段。我还看到许多帖子表明它无法完成，但它们已经很老了。

那么，可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:43:36.087

实际上，我已经环顾四周，研究，试验和测试，并且有一种简单的方法可以做到这一点，其中不包括创建新表。它使用这样的脚本：

```
SET IDENTITY_INSERT MyTable ON
GO

INSERT INTO MyTable (IDdata, Field2, Field3)
       VALUES (154337, 'A', 'B')
GO

SET IDENTITY_INSERT MyTable OFF
GO 
```

我希望你知道 IDdata 列是我的身份列，我打开了一秒钟然后又关闭了。

为我做了工作。请分享知识，这样其他人就不必像我一样挣扎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:42:53.547

您不能在 Azure SQL 中将 DBCC CHECKIDENT 与 RESEED 选项一起使用。您必须使用正确的种子值创建一个新表并将旧数据加载到其中，重命名表，然后删除旧表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T11:15:26.477

我设法找到了一个解决方案，尽管它有点笨拙，来更新种子列。

基本上，添加和删除项目，直到达到正确的 ID。在下面的示例中，这将为用户表重新设定种子，因此下一个新项目的 Id 为 3500。

```
BEGIN TRANSACTION
GO

DECLARE @max_id int

SELECT @max_id = max([Id]) FROM users

WHILE (@max_id < 3499)
BEGIN
    INSERT INTO Users (Username, Password) VALUES ('','')
    SELECT @max_id = max([Id]) FROM Users
    DELETE FROM Users WHERE [Id] = @max_id
END

COMMIT 
```

# c++ - 是否允许在 C++ std::map 中插入空值？

> ID：14988185
> 
> 赞同：2
> 
> 时间：2013-02-20T19:20:40.027
> 
> 标签：c++, std, stdmap

我正在考虑棋盘设计，并想做一些类似的事情：

```
typedef std::map <std::string, CheckerPiece> MapType;
MapType CheckerBoard;

CheckerBoard.insert({"a1", null}); 
```

这是允许的，还是有办法做类似的事情？这个想法是我想保持棋盘状态，同时将 CheckerPiece 对象从一个位置移动到另一个位置。

*编辑：* 按照同样的思路，是否可以执行以下操作：

```
CheckerBoard.insert({"a1", new CheckerPiece()}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T19:23:05.767

您的地图不`CheckerPiece`包含指针，因此您尝试执行的操作甚至都不会编译，除非您有一个隐式构造函数，`CheckerPrice`该构造函数将指针作为参数。这忽略了`null`在`C++`. 假设你的意思是`NULL`or `nullptr`，你不能插入其中任何一个，或者结果

```
new CheckerPiece() 
```

进入你的地图，期间。上面的表达式返回一个指向 的指针`CheckerPiece`。

C++ 没有类型空值的概念（除非您专门设计了一个）。一种解决方法是使用为您提供可选语义的包装器类型，即允许您检查是否已“设置”某些内容。一个例子是[boost::optional](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html)。

这是一个未经测试的示例：

```
#include <boost/optional.hpp>

boost::optional<CheckerPiece> piece;

if (piece) {
  // piece is not set, we should never get here
}

piece.reset(CheckerPiece( constructor arguments...));

if (piece) {
  // piece is set, use it!
  piece.move();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:51:14.093

`CheckerPiece`看起来像什么？最明显的解决方案是添加对应于缺少一块的额外可能性。Pieces 真的没有任何行为，你也不需要它们；您实际上只需要有关正方形状态的信息：红色、黑色或空，以及是否加冕（如果为空则忽略）。

我可能会补充一点，将棋盘作为地图可能也不是最精明的解决方案。我会选择类似的东西：

```
CheckerPiece board[10][10]; 
```

（或者，如果您想支持本地变体，而不仅仅是国际标准检查器，模板参数`CheckerPiece board[N][N]`在哪里）。`N`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:24:02.320

如果要使用指针/堆分配的 CheckerPieces，则必须将映射定义为使用 a`CheckerPiece*`而不是 a 。在 C++ 中没有“这里没有对象”值`CheckerPiece`这样的东西。`null`在不使用第三方库的情况下指示可选对象的规范方法是使用指针并将其设置为`nullptr`如果可选元素不存在。

我可能会用它`boost::optional`来表示 CheckerPiece 可能位于也可能不在给定位置，除非您有不能使用第三方库的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:19:20.977

改变你对董事会的定义。

棋盘或棋盘状态是`<checker piece, location>`. 任何不在此容器中的棋盘位置都被视为空。任何不处于棋盘状态的检查器都已被捕获。

有了这个概念，就不需要一个空检查块，也不需要比较一个检查块是否为 NULL。

在计划移动或创建移动历史时，您可以使用棋盘状态容器。

我建议创建将使用给定的板状态绘制板的函数。这消除了尝试从棋盘状态容器中表示每次移动时的实际棋盘的问题。

# asp.net - 我网站的客户正在请求其中带有 javascript:false 的 URL。为什么？

> ID：14988199
> 
> 赞同：2
> 
> 时间：2013-02-20T19:21:24.287
> 
> 标签：asp.net, .net, iis

我们的 .Net 4.5 生产网站正在接收多个请求，如下所示：

*   [http://fakeurl.com/folder/javascript:false](http://fakeurl.com/folder/javascript:false)
*   [http://fakeurl.com/javascript:false](http://fakeurl.com/javascript:false)

这些请求被.Net请求验证拦截，但我想了解这些请求来自哪里。用户是有效用户，由于某种原因，他们的浏览器似乎将“javascript:false”附加到请求中

*   Mozilla/4.0+兼容;+MSIE+8.0;+Windows+NT+6.0;+Trident/4.0;+FunWebProducts;+SLCC1;+.NET+CLR+2.0.50727;+Media+Center+PC+5.0;+InfoPath .1;+.NET+CLR+3.5.30729;+.NET+CLR+3.0.30618;+FunWebProducts;
*   Mozilla/5.0+(兼容;+MSIE+9.0;+Windows+NT+6.1;+Win64;+x64;+Trident/5.0

有谁知道 javascript:false 来自哪里？如果我们不能阻止用户浏览器发送这个额外的字符串，有没有办法从请求中去除无效字符而不是抛出异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:03:12.883

这些请求来自用户代理无意识地遵循一个`<a href="javascript:false">`或类似的。他们是伪装浏览器用户代理的机器人。机器人将 javascript URL 解释为相对 URL，因为它们有问题或者它们的人类所有者不在乎。

这是您运行网站时的正常现象。你会在日志中看到各种疯狂的东西。

# php - 将键值对数组插入mysql数据库

> ID：14988200
> 
> 赞同：0
> 
> 时间：2013-02-20T19:21:23.900
> 
> 标签：php, javascript, jquery, html, codeigniter

你好，给你们/gals的快速问题

我有一个 javascript 对象，在控制台中显示如下。

```
Object { 10= "a@a.com", 18="b@b.com", 20="c@c.com"} 
```

通过 AJAX 将此对象传递给后端 CI 控制器，我使用 CI 创建了以下函数。

```
function NewEMail(){
 //this is the array coming from ajax
 $test = $this -> input -> post('sendValue');
 print_r($test);

 if(is_array($test)){
  foreach($test as $t){
  //Insert the values in to the db from here.
  }
 }
} 
```

php 对 print_r 的响应如下

```
Array([10] => a@a.com [18] => b@b.com [20] => c@c.com) 
```

我想将每个元素和值推送到新行，如下所示。

**EMAIL_TABLE**

```
| id | cus_id | email   |  
| 1  | 10     | a@a.com |  
| 2  | 18     | b@b.com |   
| 3  | 20     | c@c.com | 
```

***'id'***是自动递增的，如何从数组中读取和存储**'cus_id'**和**'email' 。**

任何帮助我解决这个问题的帮助或指示将不胜感激！

感谢您的阅读，问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:23:50.683

将 id 设置为表中的 auto_increment 主键列。

```
create table email (
    id int unsigned primary key auto_increment,
    cus_id int unsigned,
    email varchar(50)
);

insert into email (cus_id, email) values ('$cusid', '$email'); 
```

id 然后会自行处理，您所要做的就是在插入时不理会它。

循环执行此操作的 PHP 代码：

```
foreach ($test as $cusid => $email) {
    $querystring = "insert into users (cus_id, email) values ('$cusid', '$email')";
    myqsli_query($querystring);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:41:14.280

你可以试试这个：

```
$test = $this->input->post('sendValue');

if( is_array($test) ){
    $data = array();
    foreach ($test as $cusid => $email) {
        $data[] = array('cus_id' => $cusid, 'email' => $email);
    }

    $this->db->insert_batch('tablename', data);
} 
```

# ios - QuickLook，删除除完成按钮外的所有工具栏按钮

> ID：14988201
> 
> 赞同：2
> 
> 时间：2013-02-20T19:21:31.717
> 
> 标签：ios, xcode, quicklook, qlpreviewcontroller

我正在使用 Quicklook 显示一些 PDF 文件，用户只需要查看文件然后单击完成即可。默认 UI 提供了更多选项，例如复制或打印电子邮件。UI 还显示完成按钮旁边的箭头，可以导航到其他可用文件。我需要删除这两个（隐藏）。现在我浏览了一下，大多数帖子都在讨论继承 QLPreviewController 和自定义新类。所以我以以下方式执行此操作：

```
 @interface MyQLViewer : QLPreviewController <QLPreviewControllerDataSource, QLPreviewControllerDelegate> { 
```

}

并在 .m 文件中

```
- (void)viewWillAppear:(BOOL)animated
{
   [super viewWillAppear:animated];
   [[self navigationItem] setRightBarButtonItem:nil];
} 
```

现在在我自己的项目中，我有一个 MyQLViewer 属性，我在 xib 的 viewdidload 事件中 [MyQLViewer alloc] init]。

这是行不通的。我错过了什么？

谢谢。

![在此处输入图像描述](../Images/9e8f4be8e087581f39e67449363ec9c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T10:16:10.080

据我所知，不再可能使用 iOs 6 禁用右键，您可以在此处阅读更多信息： [http ://www.cimgf.com/2012/07/11/a-better-fullscreen-asset-viewer-快速浏览/](http://www.cimgf.com/2012/07/11/a-better-fullscreen-asset-viewer-with-quicklook/)

更新：这个解决方法对我有用。如果文档加载需要几个瞬间，则延迟调用它会重新添加

```
- (void)removeActionButton  {

    if(removeShareCounter > 13){
        [removeButtonTimer invalidate];

    }
    else{
        //iOs doesn't support setRightBarButtonItem to nil
        if ([self iOsEqual:6]) {
            [self inspectSubviewsForView:self.view];
        }
        else{
            [self.navigationItem setRightBarButtonItem:nil animated:NO];
        }
        removeShareCounter++;
    }
}

- (void)inspectSubviewsForView:(UIView *)view
{
    if(view != NULL){
        if ([view isKindOfClass:[UINavigationBar class]])
        {
            UINavigationBar *bar = (UINavigationBar *)view;
            if ([[bar items] count] > 0)
            {
                UINavigationItem *navItem = [[bar items] objectAtIndex:0];
                [self performSelectorOnMainThread:@selector(removeShareButton:) withObject:navItem waitUntilDone:YES];
            }
        }
        else{
            for (UIView *subView in view.subviews) {
                [self inspectSubviewsForView:subView];
            }    
        }
    }
}

-(void)removeShareButton: (UINavigationItem *)navItem{
    [navItem setRightBarButtonItems:nil animated:NO];
} 
```

# sql-server - 从存储过程中导出 csv

> ID：14988209
> 
> 赞同：0
> 
> 时间：2013-02-20T19:22:14.193
> 
> 标签：sql-server, stored-procedures, csv

sql 2008 存储过程中有没有办法将数据转储到带有列标题的 CSV 文件中？我必须使用 BCP 吗？我曾经为此使用 openrowset，但 64 位版本的 sql 2008 上没有喷气驱动器。

我不想使用 sqlcmd 从命令行执行此操作它必须在存储过程中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:39:59.510

**64 位驱动程序：**
Microsoft Access Database Engine 2010 Redistributable [http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d)

**有关如何在此处使用的详细信息：http:**
[//social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/33436d82-085c-43e4-b991-a2d0d701c8fc](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/33436d82-085c-43e4-b991-a2d0d701c8fc)

**来自链接的回答：**
现在有一个 64 位驱动程序可用，您可以在这里下载它：

Microsoft Access 数据库引擎 2010 可再发行组件 [http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d)

这将注册一个在服务器对象 -> 链接服务器 -> 提供程序下列出的驱动程序，名称为“Microsoft.ACE.OLEDB.12.0”，您必须将其用作提供程序字符串。

64 位 OLEDB 提供程序的连接字符串：对于 CSV/文本文件，将“文本”添加到 OLEDB 连接字符串的扩展属性中。重要提示：对于新的 12.0 驱动程序和文本文件，schema.ini 文件是 csv/text 文件目录中的必需文件，否则您将收到“找不到可安装的 ISAM”错误。schema.ini 文档可以在这里找到： [//msdn.microsoft.com/en-us/library/ms709353 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms709353(VS.85).aspx)

如果您要连接到 Microsoft Office Excel 数据，请将“Excel 14.0”添加到 OLEDB 连接字符串的扩展属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:25:41.517

我们已在多个实例中成功使用此代码：

[http://prosqlserver.com/blog/2011/07/02/sqlclr-procedure-to-export-query-sp-results-into-csv/](http://prosqlserver.com/blog/2011/07/02/sqlclr-procedure-to-export-query-sp-results-into-csv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:40:37.927

你可以检查这个例子：

[http://granadacoder.wordpress.com/2009/12/22/sql-server-data-to-a-jet-database/](http://granadacoder.wordpress.com/2009/12/22/sql-server-data-to-a-jet-database/)

我正在导出到 Jet 数据库（又名“Microsoft Access”）。

您可能可以相当容易地转换为 Excel。

但是代码可以放入存储过程中。

# java - Java Spring 休眠和 Spring 中的 JPA

> ID：14988214
> 
> 赞同：1
> 
> 时间：2013-02-20T19:22:38.233
> 
> 标签：java, spring, jpa

在 hibernate 和 spring 的顶部使用 JPA 有什么好处。我在谷歌上看到了很少的项目和主题，他们使用 JPA + Hibernate + Spring，但我找不到很好的解释。

还分别何时使用 JPA 和何时使用 Hibernate。

如果有人帮助我理解，我真的很感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:26:35.117

`JPA`只是一个 API `Java Persistence API`，. 它是使用持久化服务的接口。就其本身而言，它除了提供元数据之外什么都不做。

`Hibernate`是`JPA`. 它是一个`ORM`框架。它提供了实际的持久化服务。它通过读取`JPA`元数据（注释）来做到这一点。

`Spring`只是框架的集合。它的框架之一支持使用`Hibernate`. 例如，在使用数据库时，您通常希望将多个操作包装在一个事务中。如果您只使用`Hibernate`，您将不得不不断重写代码来包装您的操作，但`Spring`提供了为您执行此操作的事务管理支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:27:30.367

JPA 和 Hibernate 是一回事。JPA 是 API（接口、抽象类、规范），Hibernate 是这个 API 的实现之一。

您可以使用 Hibernate 并继续使用其专有的非标准 API，但没有真正的优势，因为您可以使用标准 API 做同样的事情，您将能够在其他项目中使用不同的实现。

Spring 被用作另一个级别，提供依赖注入、声明式事务和更多服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:29:24.643

**JPA**使用标准化的 ORM 编程模型简化了实体持久性。换句话说，它抽象了持久层，以减少应用程序代码和 ORM 提供者之间的依赖关系。

这种标准化 (JPA) 为您提供了一种在 JPA 持久性提供程序（例如 Hibernate、OpenJPA 等）之间切换的方法。

来自 Pro Spring 3 (Clarence Ho)：

> JPA 定义了 JPA 持久性提供者应该实现的一组通用概念、注释、接口和其他服务（所有这些都放在 javax.persistance 包下）。当按照 JPA 标准进行编程时，开发人员可以随意切换底层提供者，就像切换到另一个 JEE 兼容的应用服务器，用于在 JEE 标准上开发的应用程序一样。

关于你的另一个问题

> 还分别何时使用 JPA 和何时使用 Hibernate。

**JPA**以增加复杂性为代价来促进模块化。这种权衡是否值得取决于您项目的复杂性。

**Hibernate** closes the gap between the relational data structure in the RDBMS and the Object Oriented model in Java. This mature and tested library allows you to focus on your business logic using objects and saving time writing boiler-plate code needed to interact with databases.

# c - *** 检测到 glibc *** ./m: free(): 在尝试释放堆内存时下一个大小无效（快速）

> ID：14988217
> 
> 赞同：0
> 
> 时间：2013-02-20T19:22:52.760
> 
> 标签：c, linux, memory-management, free, glibc

我有一个小代码，它在堆上分配一些内存，然后在使用后尝试释放它。我在内存映射中收到此错误。

代码是::

```
void merge(int *arr, int start, int mid, int end)
{
     int i = 0, j = 0, k = 0, tmp1 = 0, siz = 0;
     int *pt = NULL;
     j = start, k = mid+1, tmp1 = start;

     siz = (end - start) + 1;

     if ((pt = malloc(siz * sizeof(int))) == NULL) /* line 32 */
     {
         printf("\n ERROR Aloocating mem \n");
         return;
     }

     while (j <= mid && k <= end)
     {
        if (arr[j] <= arr[k])
        {
          pt[tmp1] = arr[j];
          ++j;
          ++tmp1;
        }
        if (arr[j] > arr[k])
        {
          pt[tmp1] = arr[k]; /* line 48 */
          ++k;
          ++tmp1;
        }

      } 
       while (j <= mid)
       {
          pt[tmp1] = arr[j]; /* line 56 */
          ++tmp1;
          ++j;
       }
        while (k <= end)
        {
           pt[tmp1] = arr[k];
           ++k;
           ++tmp1;
        }

        for (i = 0; i < siz; i++)
        {
           arr[end] = pt[end]; /* line 69 */
           --end;
        }   

        free(pt);   
    } 
```

我得到的错误是::

```
*** glibc detected *** ./m: free(): invalid next size (fast): 0x0940c008 ***
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6(+0x6b161)[0x213161]
/lib/tls/i686/cmov/libc.so.6(+0x6c9b8)[0x2149b8]
/lib/tls/i686/cmov/libc.so.6(cfree+0x6d)[0x217a9d]
./m[0x80486d8]
./m[0x8048562]
./m[0x8048526]
./m[0x8048542]
./m[0x804874b]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6)[0x1bebd6]
./m[0x8048441]
======= Memory map: ========
001a8000-002fb000 r-xp 00000000 08:01 1535       /lib/tls/i686/cmov/libc-2.11.1.so
002fb000-002fd000 r--p 00153000 08:01 1535       /lib/tls/i686/cmov/libc-2.11.1.so
002fd000-002fe000 rw-p 00155000 08:01 1535       /lib/tls/i686/cmov/libc-2.11.1.so
002fe000-00301000 rw-p 00000000 00:00 0 
00483000-0049e000 r-xp 00000000 08:01 1712996    /lib/ld-2.11.1.so
0049e000-0049f000 r--p 0001a000 08:01 1712996    /lib/ld-2.11.1.so
0049f000-004a0000 rw-p 0001b000 08:01 1712996    /lib/ld-2.11.1.so
007f8000-00815000 r-xp 00000000 08:01 1708381    /lib/libgcc_s.so.1
00815000-00816000 r--p 0001c000 08:01 1708381    /lib/libgcc_s.so.1
00816000-00817000 rw-p 0001d000 08:01 1708381    /lib/libgcc_s.so.1
00b38000-00b39000 r-xp 00000000 00:00 0          [vdso]
08048000-08049000 r-xp 00000000 08:01 1317230    /home/abhi/Desktop/ad/A1/misc/m
08049000-0804a000 r--p 00000000 08:01 1317230    /home/abhi/Desktop/ad/A1/misc/m
0804a000-0804b000 rw-p 00001000 08:01 1317230    /home/abhi/Desktop/ad/A1/misc/m
0940c000-0942d000 rw-p 00000000 00:00 0          [heap]
b7600000-b7621000 rw-p 00000000 00:00 0 
b7621000-b7700000 ---p 00000000 00:00 0 
b777e000-b777f000 rw-p 00000000 00:00 0 
b778c000-b7790000 rw-p 00000000 00:00 0 
bf8b5000-bf8ca000 rw-p 00000000 00:00 0          [stack]
Aborted 
```

我浏览了一些关于 SO 的类似问题的答案，并了解到这是一个内存错误。

所以我用 valgrind 运行编码并得到以下输出（不是完整的输出）

```
==4494== 
==4494== Invalid write of size 4
==4494==    at 0x8048650: merge (merge.c:48)
==4494==    by 0x8048561: merge_sort (merge.c:20)
==4494==    by 0x8048525: merge_sort (merge.c:18)
==4494==    by 0x8048541: merge_sort (merge.c:19)
==4494==    by 0x8048766: main (merge.c:89)
==4494==  Address 0x41920ac is 4 bytes after a block of size 8 alloc'd
==4494==    at 0x4023AB8: malloc (vg_replace_malloc.c:207)
==4494==    by 0x80485CB: merge (merge.c:32)
==4494==    by 0x8048561: merge_sort (merge.c:20)
==4494==    by 0x8048525: merge_sort (merge.c:18)
==4494==    by 0x8048541: merge_sort (merge.c:19)
==4494==    by 0x8048766: main (merge.c:89)
==4494== 
==4494== Invalid write of size 4
==4494==    at 0x8048680: merge (merge.c:56)
==4494==    by 0x8048561: merge_sort (merge.c:20)
==4494==    by 0x8048525: merge_sort (merge.c:18)
==4494==    by 0x8048541: merge_sort (merge.c:19)
==4494==    by 0x8048766: main (merge.c:89)
==4494==  Address 0x41920b0 is 8 bytes after a block of size 8 alloc'd
==4494==    at 0x4023AB8: malloc (vg_replace_malloc.c:207)

==4494== Invalid read of size 4
==4494==    at 0x80486D5: merge (merge.c:69)
==4494==    by 0x8048561: merge_sort (merge.c:20)
==4494==    by 0x8048541: merge_sort (merge.c:19)
==4494==    by 0x8048766: main (merge.c:89)
==4494==  Address 0x41920ec is 8 bytes after a block of size 12 alloc'd
==4494==    at 0x4023AB8: malloc (vg_replace_malloc.c:207)
==4494==    by 0x80485CB: merge (merge.c:32)
==4494==    by 0x8048561: merge_sort (merge.c:20)
==4494==    by 0x8048541: merge_sort (merge.c:19)
==4494==    by 0x8048766: main (merge.c:89) 
```

我无法纠正`malloc`对我来说看起来不错的问题。我正在分配`siz * sizeof(int)`字节（我的机器上的 int 是 4 个字节），然后以 if 数组的形式使用分配的内存。

如果有人指出我正在做的错误并解释原因，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:36:11.053

为了正确扩展 Daniel 并指出这`pt[end]`是不正确的，假设以下函数调用：

```
int values[] = { 0, 1, 2, 3, 4, 5, 6, 7 };
merge(values, 4, 5, 6); 
```

在中，为 (6 - 4) + 1 = s `merge`分配的 pt 足够大。设置为 4。在第 48 行，您可以，但这是，并且您在!之外的内存上写入`3 int``tmp1``pt[tmp1] = arr[k]``pt[4] = arr[0]``pt`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T19:37:33.640

您使用 tmp1 作为索引，并将其初始化`start`为 0 而不是 0。详细信息：

```
 j = start, k = mid+1, tmp1 = start;

 siz = (end - start) + 1;

 if ((pt = malloc(siz * sizeof(int))) == NULL) 
```

`pt`从 0 到 (end-start) + 1，但您开始使用 index 访问它`tmp1 = start`。

`tmp1`应该是 0。具体来说，如果`end`是 10，并且`start`是 8，您将分配 3 个字节......并且您不希望`tmp1`索引在 3 元素数组中从 8 开始！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T19:26:22.563

```
arr[end] = pt[end]; 
```

访问`pt`越界，除非`start == 0`. 的最后一个有效索引`pt`是`end-start`。

此外，在

```
 while (j <= mid && k <= end)
 {
    if (arr[j] <= arr[k])
    {
      pt[tmp1] = arr[j];
      ++j;
      ++tmp1;
    }
    if (arr[j] > arr[k])
    {
      pt[tmp1] = arr[k];
      ++k;
      ++tmp1;
    }

  } 
```

在第二个`if`中，`j`可以大于`mid`- 如果它是`== mid`在迭代开始时 - 您最好将第二个替换`if`为`else`.

# javascript - 如何从 Knockoutjs toJS() 中排除某些属性

> ID：14988220
> 
> 赞同：16
> 
> 时间：2013-02-20T19:23:03.030
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我有以下模型：

```
var model = {
   A: 'One',
   B: 'Two',
   C: 'Three'
}; 
```

我将各种 UI 元素绑定到这些字段，效果很好。但是，我将模型转换回 JavaScript 对象，以便可以将任何更改保存到服务器：

```
var goingToServer = ko.toJS(model); 
```

`goingToServer`将包括属性 A、B 和 C。但是，假设属性 C 是一个永远不会改变的巨大数据块。我想避免将其发送回服务器。

有没有办法在将模型转换回 JavaScript 对象时`toJS()` *只*包含一组预定义的字段？

我一直在调查的一件事是[Knockout Mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)。它有一个名为*include*的设置，记录如下：

> 将您的视图模型转换回 JS 对象时，默认情况下，映射插件将仅包含原始视图模型的一部分的属性，但它还将包含 Knockout 生成的 _destroy 属性，即使它不是原始对象的一部分. 但是，您可以选择自定义此数组：

但是，这个插件似乎不像文档中那样工作，因为它`ko.mapping.toJS()`仍然包括 A、B 和 C，即使我传入`include`一个`['A', 'B']`. 我猜这个功能旨在包括原始模型中没有的*其他字段。*

有没有办法在将模型转换回 JavaScript 对象时排除某些属性，而不是做一些 hacky，例如生成对象并在发送到服务器之前手动删除我不想要的属性？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T19:30:31.383

你试过`ignore`关键字吗？它与 include 有类似的用法：

```
var mapping = {
    'ignore': ["propertyToIgnore", "alsoIgnoreThis"]
}
var viewModel = ko.mapping.toJS(data, mapping); 
```

当您对服务器数据进行原始映射时，您可以只使用忽略，然后当您将其转换回 JS 时，它根本不会出现在您的对象上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T23:02:08.703

如果我们在 vm.Payment 下有一个复杂的对象模型实例，可观察引用为：

```
{
    "Summary": { 
        "Count": 12,
        "PaymentAmount": 1500,
        "PaymentMethod": "Cheque",
        "PaymentDate": "2015-04-08T22:38:48.552Z",
        "AgentOid": 1208795,
        "AgentName": "Asere Ware"
    }
    //[...]
}
```

并且只需要忽略一些内部属性，那么：

```
var mapping = {
    'ignore': ['Summary.PaymentMethod', 'Summary.PaymentDate'] //avoid lost some initialized values.
};
// map updating existing observable (Payment) under my ViewMode (vm) with source "data" JSON object.
ko.mapping.fromJS(data, mapping, vm.Payment);
```

这是 vm.Payment 内容的结果，其中仅保留了 PaymentMethod 和 PaymentDate：

```
{
    "Summary": { 
        "Count": 0,
        "PaymentAmount": 0,
        "PaymentMethod": "Cheque",
        "PaymentDate": "2015-04-08T22:38:48.552Z",
        "AgentOid": undefined,
        "AgentName": undefined
    }
    //[...]
}
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T21:04:59.927

好的，尽管我希望有更好的方法，但我已经找到了一种可行的解决方案。诀窍是在映射插件中*忽略这些字段，然后将它们手动添加为计算字段。*调用时，计算字段永远不会出现在生成的 JavaScript 对象`toJS`中。

```
// Utility function to quickly generate a computed field
ko.readonly = function (value)
{
   return ko.computed(function ()
   {
      return value;
   });
};

// View Model
var ViewModel = function (project)
{
   var readonly = ['B', 'C', 'D']; // Fields I want to ignore
   var mapping = {
      'ignore': readonly //Read-only properties, we'll add these manually as computed fields
   };

   // Use Mapping plugin to make everything observable, except the fields above
   ko.mapping.fromJS(project, mapping, this);

   // Now loop through the read only array and add these fields in as computed
   for(var i = 0; i < readonly.length; i++)
   {
      var field = readonly[i];
      this[field] = ko.readonly(project[field]);
   }
} 
```

我现在可以正常绑定到这些视图模型：

```
ko.applyBindings(new ViewModel(data)); 
```

# javascript - 是否可以按名称删除锚点？

> ID：14988223
> 
> 赞同：1
> 
> 时间：2013-02-20T19:23:09.563
> 
> 标签：javascript, html

我为客户购买了一个 Magento 扩展，并且该扩展在代码上应用了一个该死的 html 锚（该扩展有一个地穴，所以我无法访问代码），我需要删除它。看看我通过按 Ctrl + U 查看源代码得到了什么：

```
<script type="text/javascript">
            Event.observe(window, 'load', function() {
                $('processing-cerebrum-all-observer-AdminhtmlDashboardIndexLicenseProcessor').hide();
                window.location.hash="LicenseExpireChart";
            });
        </script>

        <a name="LicenseExpireChart"></a> 
```

这真的让我很烦，因为我想看到仪表板页面的顶部，页面加载后它被迫滚动到锚点。如何使用 javascript/jquery 完全删除此代码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:23:20.320

上面给出的答案完全正确，但有更好的方法 - vanilla-js：

```
var els = document.getElementsByName('LicenseExpireChart');
for (var i = 0, l = els.length; i < l; i++) { els[i].parentNode.removeChild(els[i]); } 
```

[证明性证据](http://jsperf.com/find-and-remove-jquery-vs-vanilla-js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:26:21.070

试试这个：

```
$('a[name="LicenseExpireChart"]').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:27:44.953

.remove() 方法从 DOM 中取出元素

```
$('a[name="LicenseExpireChart"]').remove(); 
```

# azure - 调试时的 Windows Azure 缓存 - 请求超时

> ID：14988225
> 
> 赞同：7
> 
> 时间：2013-02-20T19:23:23.713
> 
> 标签：azure, azure-caching

我在使用带有模拟器的 Windows Azure 缓存时遇到问题（即，在本地，而不是云上）。

我的系统配置是：

*   视窗 8
*   Visual Studio 2012 更新 1
*   Azure SDK 和模拟器 1.8
*   Windows Azure 缓存 1.8.1
*   网络 API
*   .NET 4.5

问题是：我们的服务器使用（角色）Windows Azure 缓存进行会话管理等。一旦服务器收到来自客户端的请求，它就开始与 Windows Azure 缓存通信以放置/获取一些对象（例如，会话对象）。然后发生“超时”异常 (Microsoft.ApplicationServer.Caching.DataCacheException) 并且服务器变得无响应，在 Visual Studio 的输出日志中显示以下消息。

```
...
iisexpress.exe Error: 0 : ERROR: <DistributedCache.RoutingClient> 25cb6980-94c5-4e72-  adee-cd58defff7fe:SendMsgAndWait: Request TimedOut, msgId = 77

A first chance exception of type 'Microsoft.ApplicationServer.Caching.DataCacheException' occurred in Microsoft.ApplicationServer.Caching.Client.dll

'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Debugger.Runtime\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Runtime.dll'
iisexpress.exe Error: 0 : The thread '<No Name>' (0x16d0) has exited with code 0 (0x0).

The thread '<No Name>' (0x1a00) has exited with code 0 (0x0).
The thread '<No Name>' (0x2298) has exited with code 0 (0x0).

ERROR: <DistributedCache.RoutingClient> e91ff46b-870c-4d83-8eef-6bdb718baab9:SendMsgAndWait: Request TimedOut, msgId = 78

iisexpress.exe Warning: 0 : Microsoft.WindowsAzure.ServiceRuntime Verbose: 500 : Role instance status check starting

Microsoft.WindowsAzure.ServiceRuntime Verbose: 502 : Role instance status check succeeded: Ready

WARNING: <SimpleSendReceiveModule> DeadServerCallback Called, Server URI: [net.tcp://127.255.0.0:20004], Underlying exception - 

A first chance exception of type 'Microsoft.ApplicationServer.Caching.DataCacheException' occurred in Microsoft.ApplicationServer.Caching.Client.dll

iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> DeadServerCallback Called, Server URI: [net.tcp://127.255.0.0:20004], Underlying exception - 

iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> DeadServerCallback: Matches My Server, Cleaning Pending Requests

iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> 48c1dd7f-f54d-40a8-9990-25af48b91eb1:Request - 79, result - Status=SendFailed[System.Net.Sockets.SocketException (0x80004005): An existing connection was forcibly closed by the remote host

   at System.Net.Sockets.Socket.Send(IList`1 buffers)

   at Microsoft.ApplicationServer.Caching.TcpSocketChannel.Send(IList`1 buffers, TimeSpan timeout)]

iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> DeadServerCallback: Matches My Server, Cleaning Pending Requests

A first chance exception of type 'Microsoft.ApplicationServer.Caching.DataCacheException' occurred in Microsoft.ApplicationServer.Caching.Client.dll

iisexpress.exe Warning: 0 : WARNING: <DistributedCache.SocketClientChannel.1> Request 81 to host net.tcp://127.255.0.0:20004/ failed Status=ChannelOpening

iisexpress.exe Warning: 0 : WARNING: <DistributedCache.SocketClientChannel.1> Request 80 to host net.tcp://127.255.0.0:20004/ failed Status=ChannelOpening

iisexpress.exe Warning: 0 : WARNING: <SimpleSendReceiveModule> 8ec8ff74-1f04-49da-8ff5-529d0697542f:Request - 81, result - Status=ChannelOpening

iisexpress.exe Warning: 0 : A first chance exception of type 'Microsoft.ApplicationServer.Caching.DataCacheException' occurred in Microsoft.ApplicationServer.Caching.Client.dll 
```

当这种情况开始发生时，服务器刚刚关闭（即，正在运行，但没有响应）。

知道为什么会这样吗？它与Windows 8有关吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T15:39:09.567

我也遇到了这个问题，并将其追溯到一台机器上的 Hyper-V 虚拟以太网适配器。禁用我安装的两个适配器修复了 Azure 缓存中的超时错误。在这台机器上，我可以继续保持连接到网络/互联网。

在另一台机器上没有安装 Hyper-V，禁用以太网适配器（从互联网断开连接）“修复”了这个问题。因此，要运行我的应用程序，我必须每次都先断开网络连接。

在这两台机器上，开发 Azure 缓存在为缓存服务器（例如 127.255.0.0、127.255.0.1、127.255.0.2 等）进行 IP 查找时似乎存在问题，它适用于一些请求，然后开始超时。当与网络断开连接时，它始终可以工作。

在我开始遇到问题之前的几个月，这对我来说在两台 Windows 8 机器上都运行良好。

# 更新

刷新 DNS 缓存为我解决了这个问题，现在它可以在连接到网络时工作。 `ipconfig /flushdns`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T03:58:43.547

我无法完全确认这一点，但问题似乎与 azure 缓存 dll 中的旧协议有关。

我可以通过在我的默认缓存上运行此配置来解决这个问题：

```
<dataCacheClient name="default" isCompressionEnabled="false" maxConnectionsToServer="4" useLegacyProtocol="false" > 
```

希望这可以帮助

# sql - asp/sql 多条记录集记录未找到

> ID：14988226
> 
> 赞同：0
> 
> 时间：2013-02-20T19:23:26.567
> 
> 标签：sql, asp-classic, recordset

我没有使用 ASP 或 SQL 的经验，但我的任务是为我的组织重新创建/改进工具。该工具根据邮政编码搜索两种产品的可用性。我需要使用单独的查询搜索两个表，并显示两组结果。（每个表都包含一个名为“zip”的列，需要单独处理，因此我无法使用连接。）

看起来我已经成功地创建了这两个记录集，并且在大多数情况下，我都收到了两个查询的结果。我遇到的问题是当没有找到第一个查询的记录时，第二个似乎没有运行。

这是处理第一个查询结果的代码：

```
if ors.EOF then
response.write("not found")

else if ors("flag") = 1 then
response.write("flag is 1")

elseif ors("flag") = 2 then
response.write("flag is 2")

elseif ors("flag") = 3 then
response.write("flag is 3")

else
response.write("something else")

end if 
```

这是第二个的代码：

```
if ors2.EOF then
response.write("not found")

else
response.write("found")

end if 
```

它一定与“if ors.EOF then”语句有关，但我不知道如何解决它。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:19:10.117

查看上面的代码，您的 if / else if 逻辑是否不正确？当您的第一次查询没有记录时，您是否看到第二次打印的任何内容？您的代码可能正在编译：

```
if ors.EOF then
   response.write("not found")
else 
   if ors("flag") = 1 then
      response.write("flag is 1")
   elseif ors("flag") = 2 then
      response.write("flag is 2")
   elseif ors("flag") = 3 then
      response.write("flag is 3")
   else
      response.write("something else")
   end if

   if ors2.EOF then
      response.write("not found")
   else
      response.write("found")
end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:57:18.417

很高兴你解决了你的问题，我可以建议一个 case 语句而不是 if else 语句:)

```
if ors.EOF then
  response.write "not found"
else
  select case ors("flag")
    case 1,2,3 : response.write "flag is " & ors("flag")
    case else  : response.write "something else"
  end select
end if

if ors2.EOF then response.write "not found" else response.write "found" 
```

# android - 从 ZIP 文件输出 Android 批量文件

> ID：14988227
> 
> 赞同：0
> 
> 时间：2013-02-20T19:23:30.780
> 
> 标签：android, performance, zip, fileoutputstream

我从网上下载了一个非常大的 zip 文件，然后想将它解压缩到我的应用程序的存储中。现在这需要相当长的时间，我想知道是否有任何关于如何加快速度的建议。我知道对于 SQLite 数据库，您可以通过调用 beginTransaction() 进行批量插入，并且想知道实际文件输出是否有类似的东西。这是我到目前为止所得到的：

```
ZipInputStream zis = new ZipInputStream(new BufferedInputStream(is));
BufferedInputStream in = new BufferedInputStream(zis);
BufferedOutputStream bos;
byte buffer[] = new byte[8 * 1024];
int n;
try {
ZipEntry ze = null;

while ((ze = zis.getNextEntry()) != null)
{
    String name = ze.getName();
    if (!ze.isDirectory() && !name.contains("MACOSX"))
    {
        name = prefix + ze.getName();
        name = name.replace('/', '_');
        bos = new BufferedOutputStream(mContext.openFileOutput(name, Context.MODE_PRIVATE));

        while ((n = in.read(buffer)) > 0)
            bos.write(buffer, 0, n);

        Log.i("Update", name + " is saved to internal storage.");
        zis.closeEntry();
        bos.close();
    }
}
} finally {
in.close();
zis.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:34:01.717

您逐字节读取和写入数据。尝试一次读取和写入更多数据，而不是使用一些缓冲区。对于一个非常大的文件，一个字节一个字节的文件可能太多了，即使对于手机 SSD 来说也是如此，很多小尺寸的写入对于这些设备来说是最具挑战性的。

```
 byte buffer [] = new byte[2048];
  int n;
  while ( (n = in.read(buffer) > 0) {
    fos.write(buffer, 0, n);
  } 
```

# c++ - AutoHotkey_L 中是否有修改 DLL 调用功能的标准协议？

> ID：14988230
> 
> 赞同：2
> 
> 时间：2013-02-20T19:23:45.740
> 
> 标签：c++, security, dll, autohotkey

我一直在查看 AutoHotkey_L 源代码（它是 C++），目的是修改它以控制出于安全目的我们正在开发的应用程序可以进行哪些 DLL 调用。源代码中有一个预处理器指令，可以非常简单地消除 DLL 功能，但是我们仍然需要为应用程序进行一些 DLL 调用，我们只希望对这些进行严格控制，而不是允许 DLL 调用整个 WinAPI .

我假设存在用于消除 DLL 调用功能的预处理器指令，因为其他开发人员也有类似的愿望来限制从 AutoHotkey 进行 DLL 调用的能力。我的问题是是否有类似的方法来控制 DLL 功能而不完全消除它。还是我最好的办法是深入研究负责进行 DLL 调用的源代码方法，并找出我可以控制传入的参数以仅允许某些调用的位置？我查看了 AutoHotkey 论坛并没有发现任何有用的信息。

如果有帮助，这里是指令如何控制 DLL 调用的快速片段：

这是配置头文件中的预处理器定义（config.h 第 9-14 行）：

```
#ifdef _MSC_VER
    #if defined(WIN32_PLATFORM) || defined(_WIN64)
    #define ENABLE_DLLCALL
    #define ENABLE_REGISTERCALLBACK
    #endif
#endif 
```

下面是一个入口点示例，其中 ENABLE_DLLCALL 指令控制是否可以访问 DLL 功能（script.cpp 第 7910-7916 行）。作为参考，这里的 bif 变量是一个 BuiltInFunctionType ，它被分配了被调用的内置函数，然后被添加到一个返回的 Func 对象中：

```
#ifdef ENABLE_DLLCALL
else if (!_tcsicmp(func_name, _T("DllCall")))
{
    bif = BIF_DllCall;
    max_params = 10000; // An arbitrarily high limit that will never realistically be reached.
}
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:48:32.750

添加了预处理器指令以在编写与 x64 兼容的 DllCall 代码之前为 x64 构建 AutoHotkey。这对于限制可以调用哪些外部函数没有帮助。

要限制可以调用哪些函数或 dll，您可以修改在 script2.cpp 中定义的 GetDllProcAddress()。例如，如果您要启用的所有功能都在您构建的 dll 中，您可以将其预加载到`sStdModule`数组中并禁用用于显式指定 dll 文件的代码。您可能还需要修改顶部附近的 switch 语句`BIF_DllCall`以禁止按地址调用函数。

请注意，即使您限制了可以调用的函数，用户仍然可能通过指定不正确的参数类型来利用 DllCall。一种更安全的方法是编写自己的“内置”函数，即使它们只是特定外部函数的简单包装。

# openssl - 如何在 OpenSSL 中跳过域名验证？

> ID：14988232
> 
> 赞同：1
> 
> 时间：2013-02-20T19:23:50.887
> 
> 标签：openssl

我在 OpenSSL 中同时使用服务器和客户端身份验证。

```
SSL_CTX_set_verify(ctx, SSL_VERIFY_PEER | SSL_VERIFY_FAIL_IF_NO_PEER_CERT, NULL); 
```

但是客户端通常没有有效的域名，所以我想在验证过程中跳过域名检查。定制的验证回调函数可能会，但鉴于我对 OpenSSL 的了解有限，我会寻求一些帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T04:50:37.180

> 如何在 OpenSSL 中跳过域名验证？

没有必要跳过它，因为它不是由当前的 OpenSSL 实现执行的。当前的实现包括 0.9.8、1.0.0 和 1.0.1。

但是，根据[OpenSSL Change Log](http://www.openssl.org/news/changelog.html)，OpenSSL 1.0.2 和 1.1.0 将包括主机名验证：

> *) 将主机名、电子邮件地址和 IP 地址检查与证书验证相结合。支持签入 opensl 实用程序的新验证选项。[史蒂夫汉森]
> 
> *) 对主机名和电子邮件检查功能的修复和通配符匹配支持。添加手册页。[Florian Weimer（红帽产品安全团队）]
> 
> *) 根据证书检查主机名电子邮件或 IP 地址的新功能。添加选项 x509 实用程序以打印针对证书的检查结果。[史蒂夫汉森]

根据更改日志，有一个`-verify_name`选项，但我没有看到它被合并到哪里。`apps.c`似乎响应`-verify_hostname`开关。但`s_client`不响应任一开关，因此不清楚如何为客户端实施或调用主机名检查。

# asp.net - 用于在 asp.net Web 表单中重写页面的 url 重写模块规则

> ID：14988233
> 
> 赞同：0
> 
> 时间：2013-02-20T19:23:51.993
> 
> 标签：asp.net, iis, iis-7, web-config, url-rewrite-module

我正在尝试在我正在开发的一个应用程序中使用 Microsoft Url Rewrite 并用于测试目的，例如我有这个 url：`http://localhost:65532/MyWebsite/Page.aspx?PID=16483`它将给我我想要的页面，那里的一切看起来都很好，但是当我尝试进行 url 重写时使用此规则：

```
 <rule name="Page View" enabled="true" stopProcessing="true">
                    <match url="actor/^([a-zA-Z0-9_\-+]+)/?$" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="Page.aspx?N={R:1}&amp;PID={R:2}" />
                </rule> 
```

并尝试打开以下页面：

```
http://localhost:65532/MyWebsite/actor/bruce-willis/C-62 
```

我收到一个找不到页面的错误，你认为我应该如何处理我的情况？一切都在 IIS 和页面中设置。提前致谢， Laziale

# java - java.lang.OutOfMemoryError：

> ID：14988234
> 
> 赞同：3
> 
> 时间：2013-02-20T19:23:57.953
> 
> 标签：java, servlets, jdbc

我正在尝试从从数据库中检索到的字节创建视频文件。该程序在几个小时前运行良好。上传大文件后，当我尝试检索它时，它正在产生错误`java.lang.OutOfMemoryError:`

我的代码是：

```
 conn = prepareConnection();
    StringBuilder sb=new StringBuilder(1024);
    sb.append("select videoname,videoid,videofull from ").append(uname.trim()).append("video");
    String sql=sb.toString();

    stmt = conn.prepareStatement(sql);
    ResultSet rs = stmt.executeQuery();

    while(rs.next()){
         byte[] videoData = rs.getBytes("videofull");       //#57
         int vid=rs.getInt("videoid");
         StringBuilder sb1 = new StringBuilder();
         sb1.append(vid);
         String videoid=sb1.toString();
         String vname=rs.getString("videoname");
         File file=new File("C:/Users/JamesPJ/Documents/skypark/skypark/WebContent/sp/resources/videos/"+vname+""+videoid+".mp4");

        if(file.exists() && !file.isDirectory()){
            continue;
        }
        else
        {
         FileOutputStream output = new FileOutputStream(file);
         IOUtils.write(videoData, output);
         output.close();
        }
       }
    request.setAttribute("uname", uname);
    RequestDispatcher dispatcher = request.getRequestDispatcher("/VideoList");
    if(dispatcher != null) {
        dispatcher.forward(request, response);
    } 
```

控制台输出为：

```
Exception in thread "http-bio-8080-exec-3" java.lang.OutOfMemoryError: Java heap space
at oracle.sql.BLOB.getBytes(BLOB.java:217)
at oracle.jdbc.driver.T4CBlobAccessor.getBytes(T4CBlobAccessor.java:462)
at oracle.jdbc.driver.OracleResultSetImpl.getBytes(OracleResultSetImpl.java:716)
at oracle.jdbc.driver.OracleResultSet.getBytes(OracleResultSet.java:402)
at skypark.VideoFileCreator.doGet(VideoFileCreator.java:57)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at skypark.VideoStream.processRequest(VideoStream.java:48)
at skypark.VideoStream.doGet(VideoStream.java:64)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 
```

请任何人告诉我这个错误告诉我什么。我需要纠正的内容......谢谢......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T20:23:21.963

这里，

```
byte[] videoData = rs.getBytes("videofull"); 
```

您将整个文件内容存储在服务器的内存中。你知道，一个字节的 a`byte[]`吃掉了 Java 的一个字节的内存。例如，如果您只有 500MB 内存并且文件超过 500MB，那么您将得到这个错误。请注意，当 10 个用户同时请求 50MB 的视频文件时，您也会得到它。因此，按照其他答案的建议增加 Java 内存只是一个临时解决方案，并没有经过深思熟虑。

您需要以类似的方式获取它，`InputStream`以便在内部仅分配几个（千）字节作为内存中的流式缓冲区，而不是整个文件内容。

```
InputStream videoData = rs.getBinaryStream("videofull"); 
```

并将其写入所需的输出流，`IOUtils#copy()`而不是使用（不要忘记在最后关闭它们！）。

```
FileOutputStream output = new FileOutputStream(file);
try {
    IOUtils.copy(videoData, output);
} finally {
    IOUtils.closeQuietly(output);
    IOUtils.closeQuietly(videoData);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:37:26.100

由于视频文件的大小很大，它已经完成了堆中的所有内存。您必须通过将 VM 参数设置为 -Xmx1024m 来增加堆大小。这会将您的堆空间增加到 1 GB。如果问题仍然存在，那么您必须使用 java vm visual 来分析程序的哪个部分消耗更多内存，并且您应该采用其他方法来减少它。将堆空间增加到 1 GB 以上并不是解决堆空间问题的好方法。

如果您从 Eclipse 之类的 IDE 运行程序，请将您的配置设置为作为配置模式运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:25:24.647

该错误表明您内存不足。您需要将更少的东西加载到内存中，或者增加可用的内存总量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T19:26:18.200

错误告诉：

```
OutOfMemoryError: Java heap space 
```

您需要更多堆空间：您可以配置 VM 以使用更多堆空间。

选项 `-Xmx`

示例： `-Xmx256m` 对于 256 MB 的最大堆空间

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T19:27:50.070

使用 -Xmx 标志来增加分配给 JVM 的堆空间。-Xmx1500m 例如。

如果从 cli 执行，这很容易

`java -Xmx2000m youMainJavaFile`

如果您是从 eclipse 等执行，则需要进入选项并告诉它在执行 JVM 时添加此标志。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T19:29:09.457

`Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector`.

Oracle 文档说，这意味着您应该增加运行程序的 JVM 的内存限制。增加堆大小：

```
JVM_ARGS="-Xmx1024m" 
```

这会将堆大小设置为 1024mb。或者您可以在您的 IDE 中执行此操作，在运行配置中提供`-Xmx1024m`VM 参数将正常工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-20T20:00:55.060

在 IOUtils.write 内部使用 output.flush()，这样缓冲的字节将被写入目标并且缓冲区被清除。没有什么会留在记忆中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-20T20:01:12.990

```
StringBuilder sb1 = new StringBuilder();
     sb1.append(vid);
     String videoid=sb1.toString(); 
```

这是一种方法，这是另一种方法：

```
 String videoId = new String(new Integer(rs.getInt("videoid"))); 
```

此外，了解什么/如何分配 java 堆空间：

```
 -Xms<size>        set initial Java heap size
    -Xmx<size>        set maximum Java heap size
    -Xss<size>        set java thread stack size 
```

要将 Java 程序 HelloWorld 的最小堆设置为 64 MB，最大堆设置为 256 MB： java -Xms64m -Xmx256m HelloWorld 如果您使用的是 IDE，则必须在服务器启动时更改参数。高温高压

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-20T19:25:45.133

您的**堆太小**，无法容纳应用程序分配的所有对象。

最简单的解决方案是**增加堆大小**。例如`-Xms1g -Xmx1g`

或者，您可以尝试分析应用程序以查看内存分配来自何处并优化该代码路径。

# ios - 我应该请求 ios / 服务器什么访问令牌

> ID：14988241
> 
> 赞同：1
> 
> 时间：2013-02-20T19:24:18.090
> 
> 标签：ios, facebook, token

我正在构建一个与 facebook 集成的 ios 应用程序，并且想知道获取用户访问令牌的最佳方法是什么，我将能够在我的服务器上使用它来运行查询。我也有点担心这些令牌会持续多久。任何帮助将不胜感激，谢谢！

# javascript - 检索并显示用户 facebook homefeed

> ID：14988243
> 
> 赞同：0
> 
> 时间：2013-02-20T19:24:24.800
> 
> 标签：javascript, facebook, facebook-graph-api

所以我正在尝试 Facebook API 功能，最终让身份验证工作正常工作。但现在我正在尝试显示用户提要，更具体地说，只有故事/消息/描述（不知道区别）本身： ![来自 Graph API Explorer 的屏幕截图](../Images/8b5c20d72083c73a2cedd34c29f03ca6.png)

所以，我有这个代码：

```
function testAPI() {
  console.log('Welcome!  Fetching your information.... ');
  FB.api('/me', function(response) {
    console.log('Good to see you, ' + response.name + '.');
    alert('Good to see you, ' + response.name + '.');
  });
  FB.api('/me/home', function(response) {
    console.log(response.data);
  });
} 
```

这给了我一堆包含不同故事等的数组，如下所示： ![控制台截图](../Images/b3e22dc03176043c911fb8eff52d17c0.png)

现在，我想要的是如何只显示描述本身，一个接一个。你会怎么做？这个问题可能与 JS 本身的关系比 Facebook 更直接，但他们使用了一些特殊的标签和名称。也许使用某种 foreach 代码可以解决问题？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:43:58.817

如果您在 chrome 或 firebug 中运行 console.dir(response.data) ，则将为数据数组中的每个对象显示每个属性。

从那里您可以执行以下操作

for(var i=0, len = response.data.length; i < len; i++){ console.log(response.data[i].propertyNameYouWant

}

# javascript - 创建和调用 jQuery 插件

> ID：14988248
> 
> 赞同：1
> 
> 时间：2013-02-20T19:24:39.580
> 
> 标签：javascript, jquery, jquery-plugins

我在这个网站上遇到了很多 jQuery Plugin Patters（样板文件）：

[Github jQuery 插件模式](https://github.com/jquery-boilerplate/patterns/tree/master/patterns)

尽管如此，我仍在寻找更远的地方，但我找不到任何可以按预期工作的东西。我对 jQuery 的了解很少，但我想如果我开始为自己创建一些小插件，我会赚到最好的……只是为了好玩和了解更多。

例如，我喜欢这种模式： [Best Options Pattern](https://raw.github.com/jquery-boilerplate/patterns/master/patterns/jquery.best.options.plugin-boilerplate.js)

它看起来很干净，对我来说很好。但是我不确定为什么我不能像我们可以找到的所有其他插件一样调用该插件......例如 backstretch JS 或 Make it Retina......它是这样调用的。

```
$.backstretch('path to image');

$.makeItRetina(); 
```

所以我已经尝试了所有我认为可能有效的方法，从上面的模式调用插件的唯一方法如下：

```
$(document).pluginName(); 
```

而且我不想那样......如果它只是看起来更好和简化

```
$.pluginName(); 
```

任何人都可以告诉我如何做到这一点的路径/方式？我真的很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:26:46.630

如果你想扩展 jQuery 对象本身（在 上调用方法`$`）不要扩展`$.fn`，只需扩展`$`。

当您扩展 (add methods to)`$.fn`时，它们是通过调用`$(selector).method`而不是`$.method`您正在寻找的语法调用的，这不需要与 JavaScript 相关的特殊行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:31:12.877

尝试：

```
var plug = $(document).pluginName(); 
```

然后调用 plug.makeItRetina(); 或 plug.backstretch('图像路径');

希望这可以帮助。

编辑：不正确，但留下评论，以防我学到的教训可以被其他人学到。:)

# android - 如何创建这样的按钮组？

> ID：14988251
> 
> 赞同：1
> 
> 时间：2013-02-20T19:24:53.820
> 
> 标签：android, xml, layout

我是 android 编程新手，想要有这样一个按钮组：

[https://www.dropbox.com/s/4x3l797iwgdaha1/2013-02-20%2020.12.57.png](https://www.dropbox.com/s/4x3l797iwgdaha1/2013-02-20%2020.12.57.png)

我尝试通过仪表板布局（来自 Google IO）创建这样的布局，但它看起来不像这样，因为距离（仪表板中的“边距”。

有没有人建议如何像您在屏幕截图中看到的那样创建“ButtonGroup”布局？

提前致谢！

尼克尔伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:38:29.707

`android:padding`将和添加`android:gravity`到`TableLayout`.

* * *

```
 <TableLayout 
 android:layout_width="fill_parent" 
 android:layout_height="fill_parent" 
 android:stretchColumns="2"
 android:shrinkColumns="2"
 xmlns:android="http://schemas.android.com/apk/res/android">
  <TableRow>
   <ImageButton 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  
    android:src="@drawable/ursrouce"
    />
  <ImageButton 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  
    android:src="@drawable/ursrouce"
    />
    </TableRow>
    <TableRow>
    <ImageButton 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  
    android:src="@drawable/ursrouce"
    />
   <ImageButton 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  
    android:src="@drawable/ursrouce"
    />
   </TableRow>
 </TableLayout> 
```

* * *

您可以在需要后添加水平和垂直分隔符`<ImageButton>`

垂直的 ：：

```
<View
     android:layout_width="1dip"
     android:layout_height="fill_parent"
     android:layout_marginTop="30dp"
     android:layout_marginBottom="30dp"
     android:background="#FF0000FF"
     /> 
```

水平的 ：：

```
<View
     android:layout_width="fill_parent "
     android:layout_height="1dip"
     android:background="#FF0000FF"
     /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:30:11.977

如果要制作这种通用格式，可以使用具有两行的 TableLayout，每行有两列，否则，列数设置为 2 的 gridview 也可以为您提供类似的外观。

# .htaccess - htaccess 从 Windows 服务器重写到 linux 框

> ID：14988254
> 
> 赞同：0
> 
> 时间：2013-02-20T19:25:08.817
> 
> 标签：.htaccess

我有一个像这样的旧网站 URL： [http ://www.test.com/partners/redirects.aspx?product=MobileDevice](http://www.test.com/partners/redirects.aspx?product=MobileDevice)

目前这个 URL 重定向到一个外部站点，我们称之为[http://www.google.com](http://www.google.com)。这发生在大约 10 年前开发的一些简陋的旧管理员门户上。

该站点位于 Windows 环境中。我们正在从 Windows 转向 Linux 环境和 php。

如何在 linux 端进行此重定向？

我试过这个：

```
Redirect 301 /partners/redirects\.aspx\?product\=MobileDevice http://www.google.com 
```

它没有用。我尝试了`.` `?` `=`转义（with `\`）但没有转义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:51:55.287

我认为你不需要逃避任何事情。`Redirect 301 /partners/redirects.aspx?product=MobileDevice http://www.google.com`应该管用。但是你说你尝试过这个。

我认为您的 Apache 实例不允许处理 .htaccess 文件。检查您的 VirutalHost 或全局 Apache 配置以查看是否`AllowOverride All`在某处声明。否则，Apache 将忽略 .htaccess 文件中的大多数（如果不是全部）指令。

**编辑：**

做更多的研究，这是完全相同的问题的另一个问题。[带有字符串数据的 URL 的 Apache 永久重定向（问号）](https://stackoverflow.com/questions/9182585/apache-redirect-permanent-for-url-with-data-in-string-question-mark)

似乎查询字符串对您不起作用。您可能需要更改此答案，以便它在不携带查询字符串的情况下盲目重定向。所以你最终会得到类似的东西

```
RewriteEngine on
RewriteBase / 

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /partners/redirects.aspx\?product=MobileDevice [NC]  
RewriteRule ^ http://www.google.com [L,R=301] 
```

# javascript - 以编程方式测试特定 css 属性的兼容性（在 textarea 上调整大小支持）

> ID：14988255
> 
> 赞同：5
> 
> 时间：2013-02-20T19:25:09.387
> 
> 标签：javascript, jquery, jquery-ui, css, cross-browser

我正在跨浏览器网站上实现可调整大小的文本区域。现在在 FF/Chrome/Safari 中，如下：

```
 textarea{
     resize: both;
  } 
```

奇迹般有效。一点点嗅探把我带到了这里：

[http://www.w3schools.com/cssref/css3_pr_resize.asp](http://www.w3schools.com/cssref/css3_pr_resize.asp)

我在哪里了解到 Opera 和 IE 不支持此属性。

没什么大不了的，以下 javascript 可以处理检测，其中包含一个 jquery UI 调用来`resizable()`包装功能：

```
 if ((navigator.userAgent.indexOf('Trident') != -1) || (navigator.userAgent.indexOf('MSIE') != -1) || (navigator.userAgent.indexOf('Opera') != -1)){ 
```

但是，我不喜欢明确的浏览器检查。有没有办法以编程方式测试对特定 css 属性的支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:35:40.677

检查 textarea 的样式声明是否为“resize”返回未定义，如果返回，则不支持：

```
var txtarea = document.createElement('textarea');

if (txtarea.style.resize != undefined) {
    //resize is supported
} 
```

这是一个[**FIDDLE**](http://jsfiddle.net/RHSAA/1/)来测试它。它在 Chrome 和 Opera 中返回 OK，我在 Opera 中测试了 CSS 属性“resize”，它似乎工作得很好，所以它在 Opera 中受支持。正如预期的那样，测试在 IE 中返回“不支持”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:34:32.143

在上面的 adeneo 的帮助下，最终的通用解决方案如下：

```
 var shims_property_for_element, supports_property_on_element;

 shims_property_for_element = function(prop, elem, method, attrs) {
   if (!supports_property_on_element(prop, elem)) {
     return $(function() {
       var numEles;
       $(elem)[method](attrs);
       numEles = $(elem).length;
       return window.setInterval((function() {
         if ($(elem).length !== numEles) {
           numEles = $(elem).length;
           return $(elem)[method](attrs);
         }
       }), 1000);
     });
   }
 };

 supports_property_on_element = function(prop, elem) {
   var e, len, vendors;
   e = document.createElement(elem);
   if (prop in e.style) {
     return true;
   }
   return false;
 }; 
```

在这种特殊情况下，然后转换为以下调用：

```
 shims_property_for_element('resize', 'textarea', "resizable") 
```

# php - 插入数据时Ajax Php Mysql检索确认

> ID：14988256
> 
> 赞同：1
> 
> 时间：2013-02-20T19:25:09.917
> 
> 标签：php, javascript, jquery, mysql, ajax

我有以下 ajax 调用，用于通过服务器上托管的 php 文件将表单发送到 mysql 数据库：

```
 <script type"text/javascript">
$(document).ready(function(){
    $("form#submit").submit(function() {
    // we want to store the values from the form input box, then send via ajax below
    var fname     = $('#fname').attr('value');
    var lname     = $('#lname').attr('value'); 

        $.ajax({
            type: "POST",
            url: "jquery-ajax-control.php",
            data: "fname="+ fname + "&lname=" + lname,
            success: function(){
                $('form#submit').hide();
                //$('form#submit :input').val("");
                $('div.success').fadeIn();
            }
        });
    return false;
    });
});
</script> 
```

还有我的 php：

```
<?php

    include ("db.php");

    // CLIENT INFORMATION
    $fname        = htmlspecialchars(trim($_POST['fname']));
    $lname        = htmlspecialchars(trim($_POST['lname']));

    $addClient  = "INSERT INTO clients (fname,lname) VALUES ('$fname','$lname')";
    mysql_query($addClient) or die(mysql_error());

?> 
```

在成功功能上，我想从 php 或 mysql 检索警报消息，以确保将数据插入数据库中，因为 ajax 即使连接断开，它也会成功，并且我将 php 文件托管在另一台服务器上。我怎么能那样做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:31:22.647

让 jquery-ajax-control.php 脚本返回此信息（可能编码为 JSON 字符串），然后在成功函数中对其进行解析。

这是一个在警报中显示 PHP 脚本输出的示例（如果请求成功）：

```
 $.ajax({
        type: "POST",
        url: "jquery-ajax-control.php",
        data: "fname="+ fname + "&lname=" + lname,
        success: function(message) {
            alert(message);
        }
    }); 
```

您只需要更改您的 PHP 脚本以根据发生的情况返回消息。

您还可以修改您的 PHP 脚本以返回正确的 HTTP 状态代码（例如，如果有错误，则返回 500）并使用 jQuery 允许 ajax 方法的各种回调函数来检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:34:56.150

首先，如果您不使用 jsonp 进行调用，则从另一台服务器调用 php 会出现错误。

对于下一部分，如果您的 php 文件由于连接断开而出现任何错误，您可以通过 php 的响应发送错误并从 jquery ajax 回调函数成功获取它。

您还可以在回调函数中获取消息并通过 javascript 警报消息显示它。

# jquery - Google 的 jquery CDN 脚本链接是否因为某种原因缺少前导“https：”？

> ID：14988258
> 
> 赞同：6
> 
> 时间：2013-02-20T19:25:19.860
> 
> 标签：jquery, cdn, broken-links

我有一段时间不用抓取链接了，但是当 jquery 未定义错误开始出现时，我注意到 CDN 脚本链接中的 url 缺少前导“http:”或“https:”。它显然会创建一个断开的链接。我想知道这是故意的还是谷歌的错误。任何见解都会很棒。

前任： `<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>`

应该？？： `<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>`

[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T19:28:35.963

`//`会给它一个真实的协议。这意味着如果您正在访问，`http://example.com`那么 cdn 链接也将使用`http://`，而如果您正在访问`https://example.com`，那么 cdn 链接也将使用`https`。

# go - 在非默认目录中安装 Go 包

> ID：14988259
> 
> 赞同：1
> 
> 时间：2013-02-20T19:25:20.510
> 
> 标签：go

我在 Go 中创建了一个 API，我在其中安装了两个包，`go get`并创建了另外四个供我自己使用。一切似乎都很好。但是，我想移动包所在的位置，以便可以在我的 Git 目录中拥有所有内容。

根据我的阅读，它应该像将`GOPATH`变量更改为新目录并`go get`再次运行以进行测试一样简单。这个对吗？如果是，我做错了什么吗？下面是我运行时在终端（Mac OS X）中显示的内容`go env`。如果任何其他信息有用，请告诉我。谢谢。

```
GOARCH="amd64"
GOBIN=""
GOCHAR="6"
GOEXE=""
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread -fno-common"
GOHOSTARCH="amd64"
GOHOSTOS="darwin"
GOOS="darwin"
GOPATH="/Applications/MAMP/htdocs/git/cbi/api"
GOROOT="/usr/local/go"
GOTOOLDIR="/usr/local/go/pkg/tool/darwin_amd64"
CGO_ENABLED="1" 
```

我应该澄清一下，默认情况下 my`GOPATH`是一个空字符串。我尝试将它更新到上面的目录，因为我希望在那里安装新的包，并且还让 Go 查找我创建并放置在那里的任何包。

我`GOPATH`通过运行设置我的变量：

```
export GOPATH="/Applications/MAMP/htdocs/git/cbi/api" 
```

完成此操作后，我可以看到当我键入时变量已设置`go env`。但是，如果我退出终端然后重新打开它并`go env`再次运行，`GOPATH`则不会设置变量。不保存有什么原因吗？我应该以另一种方式设置它而不是导出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:21:03.290

如果不设置 GOPATH 变量，包将安装在 GOROOT 中，不推荐。如果要将 GOPATH 设置为“/Applications/MAMP/htdocs/git/cbi/api”，请确保将代码目录放在“/Applications/MAMP/htdocs/git/cbi/api/src/”中。

```
但是，如果我退出终端然后重新打开它，然后再次运行“go env”，则不会设置 GOPATH 变量。

```

就像 jeremy 说的，你应该在 bash 配置文件中设置环境变量。在 mac os 中，将其添加到您的 $HOME/.profile : `export GOPATH=/Applications/MAMP/htdocs/git/cbi/api`。顺便说一句，您可以指定多个 GOPATH，例如，`export GOPATH=/path/to/gopath1:/path/to/gopath2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T14:41:28.393

我的方法是通过将以下内容放入项目目录中的 env.sh 来启动一个新的 Go 项目

```
export GOPATH=$PWD
export PATH=$GOPATH/bin:$PATH 
```

然后我总是在新的终端窗口中开始工作之前“获取”这个文件，即

```
. env.sh 
```

然后当我使用“go get”时，它会将所有下载的源代码放入当前项目文件夹中，我可以将其提交到我选择的版本控制系统。这是这种方法的优点：所有内容都保存在一个目录树中，可以轻松进行版本控制。

如果我碰巧忘记了 source env.sh，Go 命令通常会立即失败，因为我没有 /usr/local/go 文件的写入权限，这是放置它们的默认位置。所以我很快发现我没有忘记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:07:00.737

请确保 GOPATH 有三个子文件夹：src,pkg/linux_amd64(这个和操作系统有关),bin

更多细节可以参考：[GOPATH](http://code.google.com/p/go-wiki/wiki/GOPATH)和[Build](http://golang.org/pkg/go/build/)

# javascript - jquery ui自动完成获取结果

> ID：14988261
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:25:24.853
> 
> 标签：javascript, jquery, jquery-ui-autocomplete

我需要一个事件，它为我提供 jquery ui 自动完成创建的列表中选定点的数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:30:08.740

您在寻找“选择”事件吗？

```
$( ".selector" ).autocomplete({
  select: function( event, ui ) {
       //Put your code here:
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:29:50.837

事件名称是**select**。选择项目时触发。

[您可以在jQuery 文档](http://docs.jquery.com/UI/API/1.8/Autocomplete#events)中找到更多详细信息

# iphone - iPhone - 使用phonegap检测首次启动

> ID：14988264
> 
> 赞同：5
> 
> 时间：2013-02-20T19:25:38.613
> 
> 标签：iphone, cordova

我正在尝试检测新安装的应用程序的首次启动并显示该应用程序的许可协议。用户必须接受许可或离开应用程序。

有谁知道我如何使用Phonegap做到这一点？我已经搜索了这些主题，但似乎在任何地方都找不到。

谢谢你

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T05:08:16.500

您可以使用本地存储来跟踪应用启动次数。

```
var applaunchCount = window.localStorage.getItem('launchCount');

//Check if it already exists or not
if(applaunchCount){
   //This is a second time launch, and count = applaunchCount
}else{
  //Local storage is not set, hence first time launch. set the local storage item
  window.localStorage.setItem('launchCount',1);

  //Do the other stuff related to first time launch
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-25T15:11:45.213

现在 iOS 可能会清除 localStorage，所以你不能指望它是持久的。

对于真正的持久存储，一种选择是文件系统插件

[https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file)

请注意，如果您的 APP 被卸载，您的持久文件很可能也会被删除。这对这个应用程序来说可能很好。

# openlayers - OpenLayers 中的十进制度

> ID：14988273
> 
> 赞同：1
> 
> 时间：2013-02-20T19:25:55.087
> 
> 标签：openlayers, coordinate-systems

伙计们...

我正在寻找一个我认为很容易解决的问题，但我就是找不到答案。

我正在使用 OpenStreetLayers 开发 SaaS。我习惯了 Google API，但我想学习 OSM。

如何将我的坐标系更改为十进制度？我的坐标系显示如下：-4363377.97 | -1756393.59 在 OpenLayers.Control.MousePosition。我无法使用 Gmaps Latlon 将我的地图“居中”，例如“center: new OpenLayers.LonLat(-46.645203,-23.553917)”

这是我的代码：

```
 <div id="map" class="mapa"></div>
<script src="OpenLayers.js"></script>
<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script>
var map;

function init() {
    map = new OpenLayers.Map('map', {
        layers: [
            new OpenLayers.Layer.Google(
                "Google Streets", 
                {numZoomLevels: 20}

            ),

        ],
        center: new OpenLayers.LonLat(-23.553917, -46.645203)
                    ,zoom: 10,

    }
    );
 map.addControl(
                new OpenLayers.Control.MousePosition({
                    div:document.getElementById("coor"),
                    prefix: 'EPSG:3857 coordinates:',
                    separator: ' | ',
                    numDigits: 2,
                    emptyString: 'Mouse fora do mapa.'

                })
            );
        /*  map.addControl(new OpenLayers.Control.MousePosition( {id: "coor", formatOutput: formatLonlats} ));
}
</script> 
```

请给点光明，对我的英语感到抱歉。

谢谢大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:30:47.233

您可以使用变换和两个投影从度数转换为十进制数：

```
 var lonlat = new OpenLayers.LonLat(lon, lat).transform(projection1,projection2); 
```

请参阅：[http ://dev.openlayers.org/docs/files/OpenLayers/BaseTypes/LonLat-js.html#OpenLayers.LonLat.transform](http://dev.openlayers.org/docs/files/OpenLayers/BaseTypes/LonLat-js.html#OpenLayers.LonLat.transform)

通常的预测是 EPSG:4326 和 EPSG:3857。可能还有其他方法...

# javascript - 使用 .prototype 声明方法的效果？

> ID：14988274
> 
> 赞同：2
> 
> 时间：2013-02-20T19:25:58.067
> 
> 标签：javascript, object

请看这个带有原型区域方法的简单圆形类的示例：

```
var Circle = function(radius) {
    this.radius = radius;
}

Circle.prototype.area = function() {
   return Math.PI*this.radius*this.radius;
} 
```

上面声明的 area 函数与最初声明为 Circle 的公共方法有什么区别？无论哪种方式，圆的各个实例都有自己的区域，不是吗？有什么不同？？

```
this.area = function(){return Math.PI*this.radius*this.radius;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:29:26.570

`this.area = function(){}`创建一个*新*函数并将其分配给 的`area`属性`this`。 *一次*`Circle.prototype.area = function(){}`创建一个函数，并将其分配给构造函数创建的对象。*`prototype``Circle()`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T19:29:55.250

如果你在构造函数中声明它，那么每个实例`Circle`都会有一个单独的函数副本。这只会浪费资源，因为所有`Circle`对象都可以共享相同的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:35:35.850

`this`指向函数对象的一个​​实例，`.prototype`“指向”创建实例的函数构造函数（只有一个）。通常在经典继承中，一个类创建对象实例。但是在 JavaScript 中，因为没有类，所以“函数构造函数”会创建对象实例。有时我也听到人们说“函数对象”。*

# css - 980px 换行，左侧 1px 和边框 + 2 页脚，其下方大小相同，未正确对齐

> ID：14988283
> 
> 赞同：0
> 
> 时间：2013-02-20T19:26:24.003
> 
> 标签：css, layout, html, border, fixed

我面临的问题

布局：在页面顶部有一个980px宽度的菜单，以固定位置为中心，当网站向下滚动时它保持不变

下面的两个 div 都居中：

980px 环绕，1px 左右黑色边框

在它的正下方有一个宽度为 982px 的页脚，它没有正确对齐 - 它向左粘贴 1px

可以在这里看到

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:52:48.167

你可以使用：

```
 -moz-box-sizing: border-box; 
     -webkit-box-sizing: border-box;
             box-sizing: border-box; 
```

并将宽度设置为 980px；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:31:03.540

解决此问题的一种廉价方法是删除它：

```
.home #footer {
  border: medium none;
} 
```

然后在#footer 中添加：

```
#footer {
 position: relative;
 left: 1px
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:56:15.723

也许不是您要找的东西，但我认为您的`#footer-facebook`条形图也缺少 2 个像素`width`。

我又检查了一次，在我看来，这些 div 的大小不同，你遇到的问题是 982px，而其他的是 980px。

# php - 如果没有 JavaScript 则重定向

> ID：14988290
> 
> 赞同：0
> 
> 时间：2013-02-20T19:26:54.477
> 
> 标签：php, apache, redirect, noscript

这是我的情况：

我正在尝试将禁用 JavaScript 的用户重定向到我的 Apache 服务器上的 PHP 生成页面（而不是 AJAX 生成页面）。

我目前正在使用：

`<noscript> <meta http-equiv="refresh" content="0; url=http://mydomain/no_js.php"> </noscript>`

有没有办法在页面加载之前重定向用户？

PS：如果不是那么比我目前使用的更快吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:29:57.393

如果您需要重定向，请将 PHP 版本设为默认版本，如果启用了 javascript，则重定向。不过，我会避免这种情况，根本没有重定向，只是根据是否启用/禁用 javascript 显示在同一页面上。如果启用，您可以显示 javascript 项目。我通常在页面正文中有一个类名 no-script 并在启用 javascript 时将其删除，然后您可以使用 CSS 来定位基于该标签显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:37:14.830

不确定这是否会满足您的需求，但这里有：

1.  首先，创建一个页面来检查 javascript 是否处于活动状态
2.  其次，如果javascript处于活动状态，则重定向到正确的页面
3.  如果不是，则重定向到在其不活动时创建的页面

这样，没有启用 js 的页面永远不会在没有启用 js bwing 的情况下出现。一点也不。如果您**真的**需要脚本，请大声疾呼...

# html - 使用下拉菜单中选择的颜色选项更新地图多边形和地图图例？

> ID：14988293
> 
> 赞同：0
> 
> 时间：2013-02-20T19:26:56.640
> 
> 标签：html, css, map, d3.js, colorbrewer

我是一名新手程序员，试图用 d3 制作交互式地图。到目前为止，我已经能够通过从下拉菜单中选择 Colorbrewer CSS 颜色方案来更新 SVG 等值线（分位数）地图中多边形的颜色。

```
d3.select("select#ColorSelection")
    .on("keyup", function() {d3.selectAll("svg#Mapsvg").attr("class", this.value)})
    .on("change", function() {d3.selectAll("svg#Mapsvg").attr("class", this.value)}); 
```

但是，无论在下拉菜单中选择了哪种其他配色方案，地图图例的颜色框都停留在蓝色配色方案上。这是一个[例子](http://i1299.photobucket.com/albums/ag70/geomapper123/MapLegendColorNotUpdating_zps3903674a.png)。我尝试了一些事情，例如添加仅复制上面代码的附加代码，但将“svg#Mapsvg”替换为地图图例“svg#Legendsvg”，但没有任何运气。

如何使用从下拉菜单中选择的相同配色方案更新地图图例（“svg#Legendsvg”）和地图本身？

如果我错过了一些非常基本的东西，请提前道歉。谢谢你尽你所能的帮助！

这是地图图例颜色框的代码，供参考：

```
var legends = d3.select('svg#Legendsvg')
var legendbars = legends.selectAll('rect')
        .data(legend)
        .enter()
        .append('rect')
        .attr('x', 5)
        .attr('y', function(d, i) {return (i*30)+25})
        .attr('height',28)
        .attr('width',30)
        .attr('class', function (d) {return quants(d)} )
        ; 
```

下拉菜单的参考代码：

```
 <p>Color Scheme: 
        <select id="ColorSelection">
        <option value="Blues" selected>Blues</option>
        <option value="Greys">Greys</option>
        <option value="Greens">Greens</option>
        <option value="Oranges">Oranges</option>
        <option value="Reds">Reds</option>
        <option value="Purples">Purples</option>
        <option value="YlGn">Yellow-Green</option>
        <option value="YlGnBu">Yellow-Green-Blue</option>
        <option value="GnBu">Green-Blue</option>
        <option value="BuGn">Blue-Green</option>
        <option value="PuBuGn">Purple-Blue-Green</option>
        <option value="PuBu">Purple-Blue</option>
        <option value="BuPu">Blue-Purple</option>
        <option value="RdPu">Red-Purple</option>
        <option value="PuRd">Purple-Red</option>
        <option value="OrRd">Orange-Red</option>
        <option value="YlOrRd">Yellow-Orange-Red</option>
        <option value="YlOrBr">Yellow-Orange-Brown</option>
        </select></br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:33:48.400

看来您实际上并没有为您的图例栏赋予 id 值`Legendsvg`。因此，如果您尝试使用#Legendsvg d3 进行选择，将无法获得您尝试选择的元素。尝试添加

```
.attr(id, "Legendsvg") 
```

到您的图例创建语句，然后将您的 keyup / change 功能编辑为：

```
{d3.selectAll("svg#Mapsvg, svg#Legendsvg")... 
```

# z3 - SMT中量化算术的推理限制是什么？

> ID：14988298
> 
> 赞同：8
> 
> 时间：2013-02-20T19:27:17.700
> 
> 标签：z3, smt, cvc4

我在以下看似微不足道的基准测试中尝试了几个 SMT 求解器（CVC3、CVC4 和 Z3）：

```
(set-logic LIA)
(set-info :smt-lib-version 2.0)
(assert (forall (( x Int)) (forall ((y Int)) (= y x))))
(check-sat)
(exit) 
```

求解器都返回未知数。我知道这是一个无法确定的片段（非线性），但我期待会有一些简单的实例化启发式方法可以解决它。我还尝试使用常量添加一些额外的断言，但它没有帮助。

有没有办法解决这些问题？ SMT 中量化算术的推理限制是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T22:01:52.670

垫是正确的，`qe`预处理器可能相当昂贵。[此外，它对来自VCC](http://vcc.codeplex.com/)、[Poirot](http://research.microsoft.com/en-us/projects/poirot/)、[Dafny](http://research.microsoft.com/en-us/projects/dafny/)、[VeriFast](http://www.cs.kuleuven.be/~bartj/verifast/)、[Why3](http://why3.lri.fr/)和[ESCJava2](http://kindsoftware.com/products/opensource/ESCJava2/)等软件验证工具的公式无效。它无效，因为这些应用程序生成的公式还包含未解释的函数、数组等。

正如 Pad 的回答所暗示的，Z3 是引擎的集合。它提供 API 和命令，允许用户选择将使用哪个引擎（或引擎组合）来解决问题。当用户只是说`(check-sat)`试图猜测解决输入公式的最佳引擎是什么时。猜测是基于输入公式的结构和用户提供的注释（例如：`set-logic`命令）。我们正在不断扩展自动检测的片段集，以及我们提供的引擎集。

话虽如此，令人尴尬的是，Z3 错过了一个片段，例如`LIA`并且没有自动对其应用`qe`程序。对于`LIA`公式，`qe`通常是最佳选择。基于 E-matching 或 MBQI 的替代方案无效，因为它们适用于完全不同的片段。

我刚刚[提交](http://z3.codeplex.com/SourceControl/changeset/97bf9418f721)了检测代码`LIA`（即使`set-logic`未使用）。该更改已在`unstable`（工作中）分支中可用。它将在明天的夜间版本和下一个正式版本中提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:39:55.797

您的示例属于线性整数算术 (LIA) 类别。

LIA 即[Presburger 算术](http://en.wikipedia.org/wiki/Presburger_arithmetic)承认量词消除 (qe) 尽管 qe 过程的时间复杂度高得令人望而却步。

我不确定 CVC3 和 CVC4 是否支持 LIA 的量词消除，但在 Z3 中你可以这样做

```
(set-logic LIA)
(set-info :smt-lib-version 2.0)
(assert (forall (( x Int)) (forall ((y Int)) (= y x))))
(check-sat-using (then qe smt)) 
```

从[Rise4Fun 执行](http://rise4fun.com/Z3/t5c)，我得到了`unsat`结果。

这里的`qe`策略是应用 end-game tactic 之前的预处理步骤`smt`。

# internationalization - 没有输出转义的 symfony i18n 对象

> ID：14988309
> 
> 赞同：1
> 
> 时间：2013-02-20T19:28:04.267
> 
> 标签：internationalization, escaping, symfony-1.4

我在 Symfony 1.4 和 Doctrine 中遇到了一个问题，即在没有输出转义的情况下获取 i18n 对象的值。

通常我这样做只是`$object->getDescription(ESC_RAW);`为了让值不被转义。当我想获得对象的特定翻译时，问题就出现了。如何指定文化和逃避策略？我还没有找到任何关于此的文档。我可以将多个参数作为数组或类似的东西传递：`$object->getDescription(array('fr', ESC_RAW));`？

这是我的架构的相关部分：

```
Object:
  actAs:
    Timestampable: ~
    I18n:
      fields:           [name, description]
  columns:
    name:               { type: string(255), notnull: true }
    description:        { type: string(1000) }
    user_id:            { type: integer }
  relations:
    User:               { class: sfGuardUser, local: user_id, foreign: id, type: one, foreignType: many, foreignAlias: Objects } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T15:41:41.737

尝试：

```
sfOutputEscaper::unescape($object->Translation['fr']->description); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T07:50:27.030

```
 $object->Translation['fr']->getDescription(ESC_RAW); 
```

这应该可以解决问题:)

# asp.net - OAuthWebSecurity - 没有 OpenID

> ID：14988312
> 
> 赞同：0
> 
> 时间：2013-02-20T19:28:35.553
> 
> 标签：asp.net, oauth, oauth-2.0, dotnetopenauth

DotNetOpenAuth OAuthWebSecurity 是否仅适用于 OpenID 提供者？

```
OAuthWebSecurity.RegisterClient(new CutomOAuth2Client("ID", "KEY"), "CustomProvider", null); 
```

或者我可以将我的整个身份验证基于不实现 OpenID 的外部 OAuth 提供程序吗？如果我想为 facebook 开发一个客户端，但 facebook 不是 OpenId 提供者，这种情况很可能发生......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:39:18.583

是的，您可以将身份验证基于外部 OAuth 提供程序。我刚刚发布了这篇 SO 帖子：[如何让用户使用 SoundCloud 登录我的网站，](https://stackoverflow.com/questions/14973017/how-to-authenticate-soundcloud-via-oauth2)详细说明了如何`OAuth2Client`基于 SoundCloud 进行自定义……尽管使用自定义 GitHub 客户端实现它对我来说要容易得多。

Facebook OAuth 客户端内置于 VS 2012 - [Using OAuth Providers with MVC 4](http://www.asp.net/mvc/overview/getting-started/using-oauth-providers-with-mvc)，所以我认为您不需要制作自定义客户端，除非您不需要做一些事情。

其他有用的阅读：[OpenID 和 OAuth 有什么区别？](https://stackoverflow.com/questions/1087031/whats-the-difference-between-openid-and-oauth)

# iphone - UIActivityViewController - 无法理解这个内存泄漏

> ID：14988315
> 
> 赞同：0
> 
> 时间：2013-02-20T19:28:42.830
> 
> 标签：iphone, ios, objective-c, memory-leaks, uiactivityviewcontroller

有人可以告诉我为什么以下代码在 Instruments 中泄漏吗？

```
UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
activityController.excludedActivityTypes = [NSArray arrayWithObjects:@"a",@"b", nil];

[self presentViewController:activityController animated:YES completion:nil];
[activityController release]; 
```

仪器显示行泄漏：

```
activityController.excludedActivityTypes = [NSArray arrayWithObjects:@"a",@"b", nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:18:25.137

以下应该可以解决问题（__block 和完成）

```
__block UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
activityController.excludedActivityTypes = [NSArray arrayWithObjects:@"a",@"b", nil];

[self presentViewController:activityController animated:YES completion:^{ activityController.excludedActivityTypes=nil; activityController=nil;}];
[activityController release]; 
```

另请参阅此[SO](https://stackoverflow.com/questions/13442910/nsarray-excludedactivities-leaks-memory-even-when-using-arc-and-setting-it-to-n)

# ajax - 处理（在 servlet 中）将 JSP 片段加载到当前 JSP 页面的 AJAX 请求

> ID：14988316
> 
> 赞同：0
> 
> 时间：2013-02-20T19:28:48.670
> 
> 标签：ajax, jsp, servlets

如果我简单地将请求视为标准 doPost... 意思是，我只是转发到与我的 JSP 片段对应的 URL，那么该片段是否会因为它是 AJAX 请求而加载到当前 JSP 页面中？还是会像常规的整页请求一样替换原始页面？

为了将部分 JSP 加载到当前 JSP 页面中，您必须在 servlet 中使用 PrintWriter（逐行读取 JSP 文件并将其写出）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:32:17.723

第一部分是对的。您可以将 AJAX 请求完全视为另一个请求，并执行将生成页面片段的 JSP。JavaScript 函数将接收这个片段，并且可以用它做任何事情：将它附加到页面的某个部分，用这个片段替换一个部分，等等。

# .net - 第一次插入表是否有效地锁定了整个表？

> ID：14988319
> 
> 赞同：2
> 
> 时间：2013-02-20T19:28:58.790
> 
> 标签：.net, sql, sql-server, locking, transactionscope

**场景：**
嵌入在包装器 TransactionScope(TransactionScopeOption.Required) 中的 TransactionScope(TransactionScopeOption.Suppress) 查询。在“抑制”查询之前，还有另一个与包装“必需”TransactionScope 关联的查询。

这两个查询只在一张表上重叠。前面的“必需”查询插入到表中，后面的“抑制”查询从表中选择。忽略这是多么愚蠢，“抑制”查询只会读取未锁定的行，因此不会包括新插入的结果。

**行为：**
我看到的行为是，如果表中有行，则插入将成功，然后选择将读取未锁定的行，然后继续。但是，如果表为空，则 Insert 会成功，但 Select 会因为被 Insert 阻塞而卡住。

**问题：**
我想要获得的是对在这种情况下如何跟踪锁定的概念性理解。我曾经认为表锁定是一种位切换，其中表被锁定或解锁，但它似乎更像是一个带有 NOT EXISTS 的 CASE 语句；在没有解锁行的情况下，表被锁定而不是表被解锁，但其中的每一行当前都处于锁定状态。

我能够找到的所有内容都表明确实存在不同级别的锁定（表、行、页面等），但我找不到任何明确说明表为空且存在行锁的内容在插入数据时，隐含表锁。最初我预计 Select 会简单地返回 Null，但由于这不是我认为我会联系专家的行为，看看是否有人可以给我一个明确的理解。

**注意：**
RDBMS：SQL Server 2012
.NET Framework：4.0
核心行为：如果在插入之前表中存在记录，则两个查询都会成功，但如果在插入之前表为空，则选择会被插入阻止。

桌子：

```
Create Table Random(ID Int Identity, Word Varchar(50), TimeInserted DateTime) 
```

插入查询：

```
Insert Random(Word, TimeInserted)
Select 'Word', GetDate() 
```

选择查询：

```
Select Max(TimeInserted)
From Random
Where Word Like 'A%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:53:28.977

TransactionScope 的默认 IsolationLevel 是“Serializable”。根据[Msdn](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel%28v=vs.90%29.aspx)的说法，在这个隔离级别中“易失性数据可以读取但不能修改，事务期间不能添加新数据”。“可序列化”非常容易出现死锁。

SQLTransaction 的默认 IsolationLevel 是 ReadCommitted。尝试像这样声明您的事务范围

```
using (var scope = new System.Transactions.TransactionScope(TransactionScopeOption.Required, new TransactionOptions() { IsolationLevel = IsolationLevel.ReadCommitted, Timeout = TransactionManager.MaximumTimeout})) 
```

它可能会解决您的问题。

有关[MSDN](http://msdn.microsoft.com/en-us/library/system.transactions.isolationlevel%28v=vs.90%29.aspx)的更多信息：

> 最高的隔离级别 Serializable 提供了对中断事务的高度保护，**但要求每个事务在允许任何其他事务对数据进行操作之前完成**。

# azure - 什么构成计算小时或成本/小时

> ID：14988323
> 
> 赞同：27
> 
> 时间：2013-02-20T19:29:12.497
> 
> 标签：azure, amazon-ec2, cloud

**前言**

我一直在寻找基于云的托管解决方案，尤其是 MS Azure 和亚马逊的 EC2。他们，[微软](http://www.windowsazure.com/en-us/pricing/details/#header-2)和[亚马逊](http://aws.amazon.com/ec2/#onDemandPricing)，有描述“成本/小时”/“计算小时”的定价表。

**问题**

当他们说“成本/小时”或“计算小时”时，一小时是多少？在 ASP.NET 应用程序的情况下，它是应用程序池处于活动状态的时间量吗？或者，您的应用程序处于活动状态的时间量？或者，它是否以某种方式与每小时/分钟的传入请求有关？

如果应用程序不活动（服务请求）是否有可能不计入总成本计算，从而减少总“计算时间”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T06:44:09.857

大卫和迈克的好答案。*让我补充一点：与其考虑应用程序*，不如考虑*虚拟机*。当该虚拟机启动时（即使处于停止状态，也会分配虚拟机），您需要付费。您可以在该虚拟机实例中轻松启动和停止应用程序：可能是 Web 应用程序、后台渲染进程等。无论您是消耗 0% 的 CPU 还是 100% 的 CPU，您都需要为该虚拟机按时钟小时付费。

请注意，即使使用云服务（Web 和辅助角色），您最终还是要处理虚拟机。Web 角色或辅助角色的每个实例都是其自己的 Windows Server 虚拟机。

哦，网站保留实例也是如此。

关于关闭应用程序以节省计费时间的问题：例如，如果您有一个每晚运行一两个小时的进程，那么请考虑将该进程放在它自己的云服务（或虚拟机）中。到了运行它的时候，将它部署到它的命名槽（yourname.cloudapp.net），让它运行直到任务完成，然后删除部署。现在托管您的进程的虚拟机实例运行 2 小时，而不是 24 小时。您*不能*做的是将 Web 或辅助角色的计数减少到零。因此，如果您有一个具有 2 个实例的 Web 角色和一个工作人员角色来做一些夜间工作，那么您不能在任务完成后将计数设置为零工作人员角色实例。这就是为什么我建议将夜间任务放在自己的部署中。

**编辑**自过去几个月以来，情况发生了一些变化。特别是，2013 年 6 月宣布了以下内容：

*   计费现在是*每分钟*而不是*每小时*。这适用于虚拟机、云服务（web/worker）、网站和移动服务。
*   您现在可以停止虚拟机而不删除它们，并且在虚拟机停止时停止计费。*注意：如果没有其他虚拟机在同一部署中运行，您将丢失分配的 IP 地址。为防止 IP 丢失，您需要停止虚拟机，但将其保持在预配置状态，这意味着您仍需要为停止的虚拟机付费，但您会保留 IP 地址。同样，此警告仅适用于没有其他虚拟机运行的情况。*

[您可以在此处](http://weblogs.asp.net/scottgu/archive/2013/06/03/windows-azure-announcing-new-dev-test-offering-biztalk-services-ssl-support-with-web-sites-ad-improvements-per-minute-billing.aspx)阅读 ScottGu 关于每分钟和停止的 VM 更新的博客文章。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-20T19:45:06.400

一个小时计为您的应用程序部署的时间（运行与否，是否被访问）。一小时是一个“挂钟”小时 - 这意味着如果您在上午 10:45 部署并在上午 11:05 删除，您需要支付两个小时（10 点钟和 11 点钟）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T22:35:32.663

更清楚地说，部署您的应用程序的时间是指托管您的应用程序的服务器/s 实例处于活动状态的时间。实际上，时间是以时钟小时来衡量的。

[已编辑] Azure 虚拟机（IaaS 模型）上“停止”的 VM 不再消耗计算时间，在您决定删除 VM 之前，您将只按存储/托管磁盘计费。

# c# - 使用 Code First 和外键获取数据

> ID：14988328
> 
> 赞同：1
> 
> 时间：2013-02-20T19:29:20.223
> 
> 标签：c#, visual-studio-2010, entity-framework, ado.net

我认为这将是直截了当的事情，但已经一整天了，我仍然找不到答案。让我们举一个非常简单的例子。我们有一堂课`Post`：

```
 public class Post
{
    public string Content { get; set; }

    public int BlogId { get; set; }
    public virtual Blog Blog { get; set; }
} 
```

还有`Blog`类：

```
 public class Blog
{
    public string Name { get; set; }

    public virtual List<Post> Posts { get; set; }
} 
```

现在，当我使用`Blog`数据时（尤其是在 dataGridView 中），我可以通过在 dataGridView 中设置属性名称来访问每个属性的值。唯一不能直接访问的数据是我从 post 中通过外键获取的数据。

如何获取`Post.Content`数据库中的每一行？因为现在我只能`Post`在我的 dataGridView 中设置，它返回类似`System.Data.Entity.DynamicProxy...`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:35:52.870

您可以像这样创建 DTO 类型

```
public class PostDto
{
    public string Blog { get; set; }
    public string Content { get; set; }
} 
```

填充它

```
var dtos = from b in db.Blogs
           from p in b.Posts
           select new PostDto {
                                 Blog = b.Name,
                                 Content = p.Content
                              }; 
```

并绑定`dtos.ToList()`到 DGV。DGV 不支持可扩展行，因此只能显示平面结构。如果您不想要重复的博客名称，您可以考虑使用两个网格的主从布局。

# google-apps-script - Google Ui 脚本计时器倒计时。我不能将数字减少到 9 以下 :(

> ID：14988335
> 
> 赞同：0
> 
> 时间：2013-02-20T19:29:49.957
> 
> 标签：google-apps-script

我真的很沮丧，因为我对倒数计时器一无所知......当我终于找到这个脚本时，我操纵它以便从分钟和秒而不是几秒开始倒计时......但只需运行它看看问题出在哪里...帮助！！！！

```
function doGet(e) {
var TIMER_SEC = '3:12';
var app = UiApp.createApplication();
//var button = app.createButton('Start/Pausa');
var timerDisplay = app.createLabel().setId('timerDisplay');
var timerValue = app.createTextBox().setId('timerValue').setName('timerValue').setVisible(false);
var chk = setTime(TIMER_SEC, app, timerDisplay, timerValue);
app.add(timerDisplay);
app.add(timerValue);
app.add(chk);
//app.add(button);
return app;
}

function handleTimer(e){
var app = UiApp.getActiveApplication();
var a;
var b=":0";
var t = e.parameter.timerValue;
var timerDisplay = app.getElementById('timerDisplay');
if(t!='0:00'){
if(t.substr(2,2)=="00"){
a=parseInt(t.substr(0,1))-1;
t=a.toString().concat(':59');
}
else{
a=parseInt(t.substr(2,2))-1;
if(a<10){
t=t.substr(0,1).concat(':0' + a.toString());
}
else{
t=t.substr(0,2).concat(a);
}
}
var timerValue = app.getElementById('timerValue');
var chk = setTime(t, app, timerDisplay, timerValue);
Utilities.sleep(1000);
chk.setValue(true,true);
}
else {
timerDisplay.setText('Finish!');
}
return app;
}

function setTime(time, app, timerDisplay, timerValue) {
timerDisplay.setText(time);
timerValue.setValue(time);
var handlerTimer = app.createServerHandler('handleTimer');
handlerTimer.addCallbackElement(timerValue);
var chk = app.createCheckBox('chk').addValueChangeHandler(handlerTimer).setValue(true,true).setVisible(false);
return chk;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:08:25.260

替换`parseInt`为`Number`

变成这样并且可以工作......（但我想它可能会更简单......）[在这里测试](https://script.google.com/macros/s/AKfycbwe3TkARRtiAIVJDMWIrofv2GaChuxlD6-iwfshjS6hS9xDsxJu/exec)

```
function handleTimer(e){
var app = UiApp.getActiveApplication();
var a;
var b=":0";
var t = e.parameter.timerValue;
var timerDisplay = app.getElementById('timerDisplay');
if(t!='0:00'){
if(t.substr(2,2)=="00"){
a=Number(t.substr(0,1))-1;
t=a.toString().concat(':59');
}
else{
a=Number(t.substr(2,2))-1;
if(a<=9){
t=t.substr(0,1).concat(':0' + a.toString());
}
else{
t=t.substr(0,2).concat(a);
}
}
var timerValue = app.getElementById('timerValue');
var chk = setTime(t, app, timerDisplay, timerValue);
Utilities.sleep(1000);
chk.setValue(true,true);
}
else {
timerDisplay.setText('Finish!');
}
return app;
} 
```

**编辑：**我猜这个版本有点简单，而且很容易根据您的需要进行定制...... [在这里测试](https://script.google.com/macros/s/AKfycbwm-LMtqr_PcZHKJBksKVDc8pFoPUVkfRxjd5D9u0YHLCHaeq4f/exec)

```
function doGet() {
  var app = UiApp.createApplication().setTitle('Counter/Timer').setStyleAttribute('padding','35');
  var Panel = app.createVerticalPanel();
  var counter = app.createHTML().setId('counter').setHTML('<B>Timer = wait</B>').setStyleAttribute('fontSize','40px');// set start display
  var clo = app.createTextBox().setName('clo').setId('clo').setValue('192').setVisible(false);//set start value in seconds
  var handler1 = app.createServerHandler('loadData1').addCallbackElement(Panel);
  var chk1 = app.createCheckBox('test1').addValueChangeHandler(handler1).setVisible(true).setId('chk1').setVisible(false);
  app.add(Panel.add(chk1).add(counter).add(clo));
  chk1.setValue(true,true);
  return app}

function loadData1(e) {
  var app = UiApp.getActiveApplication();
  var xx = Number(e.parameter.clo);
  var disp = app.getElementById('counter')
  xx-- ;// replace by xx++ to count upwards
  if(xx<0){ // and change comparison accordingly
  disp.setHTML('Time Over')
  return app
  }
  var cnt = app.getElementById('clo').setValue(xx)
  disp.setHTML('<B>'+T(xx)+'</B>')
  Utilities.sleep(500);
  var chk1 = app.getElementById('chk1').setValue(false,false)
  Utilities.sleep(500);
  var chk1 = app.getElementById('chk1').setValue(true,true)
  return app;
}

function T(val){
  var min = parseInt(val/60);
  var sec = val-(60*min);
  if(sec<10){sec='0'+sec}
  if(min<10){min='0'+min}
  var st = 'Timer = '+min+':'+sec;
  return st
} 
```

# c - C 编程：一个计算文本文件中字数的程序？

> ID：14988338
> 
> 赞同：2
> 
> 时间：2013-02-20T19:29:52.533
> 
> 标签：c, arrays, file-io, malloc

我正在尝试实现计算文本文件中单词数的函数。

到目前为止，这是我的尝试。

```
#include <stdio.h>
#include <string.h>

int main()
{
  FILE *fp;
  char word[1000];
  int count = 0, i;
  int *ptr = NULL;

  printf("Enter filename: ");
  scanf("%s", word);
  fp = fopen(word, "r");

  while(fscanf(fp, "%s", word) != EOF) //dynamically allocate contents of the file into word
    ptr = (int *)malloc(sizeof(int));
  for(i = 0; i < 4000; i++)
  {
    if(word[i] == ' ')
      count++;
  }
  printf("Total: %d", count);
  return 0;
}//main 
```

当我使用 gcc- 编译时，我得到了类似*"variable ' `ptr`' set but not used" 之*类的错误，但我以为我在将文件内容动态分配到`word[80]`.

我认为我的单词计数器有严重问题......当明显有 200 多个单词时，它也会返回 0。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:42:27.537

> 嗯，但我以为我在将文件内容动态分配到word[80]时使用了它？

不，你一次又一次地设置它：

```
int *ptr = NULL;   // <-- pointer is set to null

while(fscanf(fp, "%s", word) != EOF) 
  ptr = (int *)malloc(sizeof(int)); // ptr is being set to some memory, again and again
                                    // also this could be a nice memory leak 
```

所以这就是为什么你有 gcc 告诉你“变量'ptr'设置但没有使用”，因为你不使用它。

所以问题：

1.  ptr 已设置但未使用
2.  将 (sizeof int) 字节分配给 (int *)
3.  内存泄漏，不断过度写入`ptr`
4.  `fscanf()`返回成功分配的数量，您应该使用它而不是 EOF
5.  `word[]`长度为 1000，但您正在循环到`4000`
6.  通过将`fscanf()`结果放入“单词”中，您会不断覆盖其中的内容
7.  你不应该放弃`malloc()`
8.  `"%s"`应该真的是`"%999s"`限制输入的长度，但是 1000 我认为无论如何你都是安全的。

这就是我从头顶上看到的全部内容，尝试修复它们，看看你会得到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:46:55.380

```
#include <stdio.h>

int main()
{
  FILE *fp;
  int count = 0;
  char word[15], c;

  printf("Enter filename: ");
  scanf("%s", word);
  fp = fopen(word, "r");
  if(fp == NULL)
    return -1;

  while((c = fgetc(fp)) != EOF) {
    if(c == ' ')
      count++;
  }

  fclose(fp);
  printf("Total: %d", count+1);

  return 0;
} 
```

这真的很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:34:50.233

你这里有很多问题。`fscanf(fp, "%s", word)`每次调用时都会从文件中抓取一个新单词并将其存储在单词缓冲区中。您的 while 循环没有打开/关闭大括号，因此对于您从文件中读取的每个单词，您将分配一个新的 int*。从文件中读取所有内容后，您将遍历文件中最后一个单词的单词缓冲区并计算空格，但您迭代的是 4000 而不是 1000。尝试搜索“C++ word count”而且我相信您将能够在比我输入此答案的时间更短的时间内找到有效的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T19:45:07.367

从您的评论*“将文件的内容动态分配到单词中”*来看，您似乎对代码的实际作用有些困惑：

```
while(fscanf(fp, "%s", word) != EOF)
    ptr = (int *)malloc(sizeof(int)); 
```

实际上重复调用`fscanf`直到`EOF`返回。尽管每次`fscanf`调用都会从文件中读取单词并将其存储到临时缓冲区 ( `word`) 中，但这个循环的主体没有任何意义。它动态分配足够大的内存以容纳 1 个整数并`ptr`指向该内存（已分配但从未释放的内存，这也会产生内存泄漏）。

您可以检查返回值`fscanf`是否等于`1`，因为此函数*“返回成功匹配和分配的输入项的数量”*。您的`while`循环实际上应该如下所示：

```
while(fscanf(fp, "%s", word) == 1)
    count++; 
```

另请注意，您`char word[1000];`定义了一个长度数组`1000`，但您的`for`循环有 4000 次迭代，并且您试图访问数组边界之外的元素，这会导致**未定义的行为**。此外，您的循环逻辑`for`似乎更倾向于计算`' '`存储在`word`. 这个循环对你一点用处都没有，把它去掉就行了。

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T19:53:35.060

```
#include <stdio.h>
#include <string.h>

int main()
{
  FILE *fp;
  char word[1000];
  int count = 0, i;
/*  (why. What are you doing with this?)
  int *ptr = NULL;
*/

  printf("Enter filename: ");
  scanf("%s", word);
  fp = fopen(word, "r");

  while(fscanf(fp, "%s", word) != EOF) //dynamically allocate contents of the file into     word
count++;
/*
    ptr = (int *)malloc(sizeof(int));
  for(i = 0; i < 4000; i++)
  {
    if(word[i] == ' ')
      count++;
  }
*/

  printf("Total: %d \n", count);   // added a newline, always nice to end that way
  return 0;
}//main 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T19:59:07.677

我修改了你的只是为了告诉你要拿出什么。您可以通过对文件运行“wc”并从文件中获取字数来验证它在 Linux 上是否有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T19:36:20.783

不幸的是，您的程序有很多问题。对于初学者来说，'word' 上有一个索引溢出（它分配了 1000 个字节，但你的索引运行到 4000）。

为什么每次在 while 循环中读取字符串时都分配一个整数？

你的程序应该看起来更像这样：

```
char buffer[1000];
int count = 0;
while(fscanf(fp, "%s", buffer) != EOF) count++; 
```

编辑：对不起，我以为你在读字符，上面现在应该反映了变化。

# java - xpath 无法区分相似的链接文本

> ID：14988343
> 
> 赞同：0
> 
> 时间：2013-02-20T19:29:57.687
> 
> 标签：java, html, xpath, webdriver

我有一个 html 页面，上面有两个链接，链接文本相似：

“**记录办公室**”和“**布鲁克林记录办公室**”

如果我使用这个 xpath，它将找到第二个链接：“//a[starts-with(.,'Brooklyn')]” - 到目前为止一切顺利。

但是，如果使用相同的 xpath 但查找第一个链接（以单词 'Office' 开头），它不起作用："//a[starts-with(.,'Office')]" - 'Unable定位元素'

我尝试使用正则表达式（'^Office'），但没有奏效。我尝试了“包含”而不是“开始于”，但这也不起作用，因为一个字符串是另一个字符串的子字符串。

欢迎任何建议！

编辑

我阅读了规范，我认为它会起作用：如果 string1 以 string2 开头，则返回 true：starts-with(string1, string2)

我模拟了一些 xml 以在在线测试仪中进行测试：

```
<?xml version="1.0"?>
    <note>
        <record>
          <a>Office</a>
          <a>Brooklyn Office</a>
        </record>
    </note> 
```

我发现无法通过“starts-with”或“contains”指向第一个节点（“Office”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:12:46.267

`//a[text()='Office of Records']`和`//a[text()='Brooklyn Office of Records']`

不要使事情过于复杂；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:49:48.193

问题解决了！所以，这不起作用： //a[starts-with(.,'Office')]

这样做了：/*/record/a[starts-with(.,'Office')]

# windows - Delphi中的剪贴板操作

> ID：14988344
> 
> 赞同：10
> 
> 时间：2013-02-20T19:29:58.510
> 
> 标签：windows, delphi, delphi-2009, terminal-services, rds

本地工作站：Win 7

终端服务器：Win 2008 服务器

Outlook：2003 在本地工作站上运行。

我正在尝试将 Outlook 消息从本地工作站复制和粘贴到终端服务器。

使用下面的代码，我可以将文件从本地工作站复制并粘贴到服务器...

```
TmyMemoryStream = class(TMemoryStream);

...

procedure TmyMemoryStream.LoadFromIStream(AStream : IStream);
var
  iPos : Int64;
  aStreamStat : TStatStg;
  oOLEStream: TOleStream;
begin
  AStream.Seek(0, STREAM_SEEK_SET, iPos);
  AStream.Stat(aStreamStat, STATFLAG_NONAME);
  oOLEStream := TOLEStream.Create(AStream);
  try
    Self.Clear;
    Self.Position := 0;
    Self.CopyFrom( oOLEStream, aStreamStat.cbSize );
    Self.Position := 0;
  finally
    oOLEStream.Free;
  end;
end; 
```

...但是当我尝试复制和粘贴 Outlook 邮件时，流大小 ( `aStreamStat.cbSize`) 为 0。我能够获取邮件主题（文件名），但无法读取流内容。

我的代码有什么问题？

完整的单元代码：

```
unit Unit1;

interface
uses
  dialogs,
  Windows, ComCtrls, ActiveX, ShlObj, ComObj, StdCtrls, AxCtrls,
  SysUtils, Controls, ShellAPI, Classes, Forms;

type

  {****************************************************************************}

  TMyDataObjectHandler = class;

  PFileDescriptorArray = Array of TFileDescriptor;

  {****************************************************************************}

  TMyDataObjectHandler = class(TObject)
  strict private
    CF_FileContents            : UINT;
    CF_FileGroupDescriptorA    : UINT;
    CF_FileGroupDescriptorW    : UINT;
    CF_FileDescriptor          : UINT;
    FDirectory                 : string;
    function  _CanCopyFiles(const ADataObject : IDataObject) : boolean;
    function  _DoCopyFiles(const ADataObject : IDataObject) : HResult;
    //function  _ExtractFileNameWithoutExt(const FileName: string): string;
    function  _CopyFiles(AFileNames: TStringList): HResult;
    procedure _GetFileNames(AGroup: PDropFiles; var AFileNames: TStringList);
    procedure _ProcessAnsiFiles(ADataObject: IDataObject; AGroup: PFileGroupDescriptorA);
    function  _ProcessDropFiles(ADataObject: IDataObject; AGroup: PDropFiles): HResult;
    procedure _ProcessFileContents(ADataObject: IDataObject; Index: UINT; AFileName: string; AFileSize : Cardinal);
    function  _ProcessStorageMedium(ADataObject: IDataObject; AMedium: STGMEDIUM; AFilename: string; AFileSize : Cardinal): HResult;
    function  _ProcessStreamMedium(ADataObject: IDataObject; AMedium: STGMEDIUM; AFileName: String; AFileSize : Cardinal): HResult;
    procedure _ProcessUnicodeFiles(ADataObject: IDataObject; AGroup: PFileGroupDescriptorW );
    function  _CanCopyFile(AFileName: string): boolean;
  public
    constructor Create; reintroduce;
    destructor Destroy; override;
    function  CanCopyFiles(const ADataObject : IDataObject; const ADirectory : string) : boolean;
    procedure CopyFiles(const ADataObject : IDataObject; const ADirectory : string);
  end;

  {****************************************************************************}

  TMyMemoryStream = class( TMemoryStream )
  public
    procedure LoadFromIStream(AStream : IStream; AFileSize : Cardinal);
    function GetIStream : IStream;
  end;

  {****************************************************************************}

implementation

{------------------------------------------------------------------------------}

{ TMyDataObjectHandler }

function TMyDataObjectHandler.CanCopyFiles(const ADataObject : IDataObject; const ADirectory : string): boolean;
begin
  Result := IsDirectoryWriteable( ADirectory);
  if Result then
  begin
    Result := _CanCopyFiles(ADataObject);
  end;
end;

{------------------------------------------------------------------------------}

constructor TMyDataObjectHandler.Create;
begin
  inherited Create;
  CF_FileContents         := $8000 OR RegisterClipboardFormat(CFSTR_FILECONTENTS)     AND $7FFF;
  CF_FileGroupDescriptorA := $8000 OR RegisterClipboardFormat(CFSTR_FILEDESCRIPTORA)  AND $7FFF;
  CF_FileGroupDescriptorW := $8000 OR RegisterClipboardFormat(CFSTR_FILEDESCRIPTORW)  AND $7FFF;
  CF_FileDescriptor       := $8000 OR RegisterClipboardFormat(CFSTR_FILEDESCRIPTOR)   AND $7FFF;
end;

{------------------------------------------------------------------------------}

destructor TMyDataObjectHandler.Destroy;
begin
  //
  inherited;
end;

{------------------------------------------------------------------------------}

procedure TMyDataObjectHandler.CopyFiles(const ADataObject : IDataObject; const ADirectory : string);
begin
  FDirectory := ADirectory;
  _DoCopyFiles(ADataObject);
end;

{------------------------------------------------------------------------------}

function TMyDataObjectHandler._CanCopyFiles(const ADataObject : IDataObject) : boolean;
var
  eFORMATETC : IEnumFORMATETC;
  OLEFormat  : TFormatEtc;
  iFetched   : Integer;
begin
  Result := false;
  if Succeeded(ADataObject.EnumFormatEtc(DATADIR_GET, eFormatETC)) then
  begin
    if Succeeded(eFormatETC.Reset) then
    begin
      while(eFORMATETC.Next(1, OLEFormat, @iFetched) = S_OK) and (not Result) do
      begin
        Result := ( OLEFormat.cfFormat = CF_FileGroupDescriptorW )
                  or
                  ( OLEFormat.cfFormat = CF_FileGroupDescriptorA )
                  or
                  ( OLEFormat.cfFormat = CF_HDROP );
      end;
    end;
  end;
end;

{------------------------------------------------------------------------------}

function  TMyDataObjectHandler._CanCopyFile( AFileName : string ) : boolean;
begin
  Result := not FileExists( ExpandUNCFileName(FDirectory + ExtractFileName(AFileName)) );
end;

{------------------------------------------------------------------------------}

function  TMyDataObjectHandler._CopyFiles(AFileNames : TStringList) : HResult;
var
  i: Integer;
begin
  Result := S_OK;
  i := 0;
  while(i < AFileNames.Count) do
  begin
    if _CanCopyFile(AFileNames[i]) then
    begin
      Copyfile( Application.MainForm.Handle, PChar(AFileNames[i]), PChar(FDirectory + ExtractFileName(AFileNames[i])), false );
    end;
    inc(i);
  end;
end;

{------------------------------------------------------------------------------}

procedure TMyDataObjectHandler._GetFileNames(AGroup: PDropFiles; var AFileNames : TStringList);
var
  sFilename : PAnsiChar;
  s         : string;
begin
  sFilename := PAnsiChar(AGroup) + AGroup^.pFiles;
  while (sFilename^ <> #0) do
  begin
    if (AGroup^.fWide) then
    begin
      s := PWideChar(sFilename);
      Inc(sFilename, (Length(s) + 1) * 2);
    end
    else
    begin
      s := PWideChar(sFilename);
      Inc(sFilename, Length(s) + 1);
    end;
    AFileNames.Add(s);
  end;
end;

{------------------------------------------------------------------------------}

function TMyDataObjectHandler._ProcessDropFiles(ADataObject: IDataObject; AGroup: PDropFiles) : HResult;
var
  sFiles    : TStringList;
begin
  Result := S_OK;
  sFiles := TStringList.Create;
  try
    _GetFileNames( AGroup, sFiles );
    if (sFiles.Count > 0) then
    begin
      Result := _CopyFiles( sFiles );
    end;
  finally
    sFiles.Free;
  end;
end;

{------------------------------------------------------------------------------}

function TMyDataObjectHandler._ProcessStorageMedium(ADataObject: IDataObject; AMedium: STGMEDIUM; AFilename : string; AFileSize : Cardinal) : HResult;
var
  StorageInterface     : IStorage;
  FileStorageInterface : IStorage;
  sGUID                : PGuid;
  iCreateFlags         : integer;
begin
  Result := S_OK;
  if _CanCopyFile(AFileName) then
  begin
    sGUID := nil;
    StorageInterface := IStorage(AMedium.stg);
    iCreateFlags := STGM_CREATE OR STGM_READWRITE OR STGM_SHARE_EXCLUSIVE;
    Result := StgCreateDocfile(PWideChar(ExpandUNCFileName(FDirectory + AFilename)), iCreateFlags, 0, FileStorageInterface);
    if Succeeded(Result) then
    begin
      Result := StorageInterface.CopyTo(0, sGUID, nil, FileStorageInterface);
      if Succeeded(Result) then
      begin
        Result := FileStorageInterface.Commit(0);
      end;
      FileStorageInterface := nil;
    end;
    StorageInterface := nil;
  end;
end;

{------------------------------------------------------------------------------}

function TMyDataObjectHandler._ProcessStreamMedium(ADataObject: IDataObject; AMedium: STGMEDIUM; AFileName : String; AFileSize : Cardinal) : HResult;
var
  Stream : IStream;
  myStream: TMyMemoryStream;
begin
  Result := S_OK;
  if _CanCopyFile(AFileName) then
  begin
    Stream := ISTREAM(AMedium.stm);
    if (Stream <> nil) then
    begin
      myStream := TMyMemoryStream.Create;
      try
        myStream.LoadFromIStream(Stream, AFileSize);
        myStream.SaveToFile(ExpandUNCFileName(FDirectory + AFileName));
      finally
        myStream.Free;
      end;
    end;
  end;
end;

{------------------------------------------------------------------------------}

procedure TMyDataObjectHandler._ProcessFileContents(ADataObject: IDataObject; Index: UINT; AFileName : string; AFileSize : Cardinal);
var
  Fetc: FORMATETC;
  Medium: STGMEDIUM;
begin
  Fetc.cfFormat := CF_FILECONTENTS;
  Fetc.ptd := nil;
  Fetc.dwAspect := DVASPECT_CONTENT;
  Fetc.lindex := Index;
  Fetc.tymed := TYMED_HGLOBAL or TYMED_ISTREAM or TYMED_ISTORAGE;
  if SUCCEEDED(ADataObject.GetData(Fetc, Medium)) then
  begin
    try
      case Medium.tymed of
        TYMED_HGLOBAL  : ;
        TYMED_ISTREAM  : _ProcessStreamMedium(ADataObject, Medium, AFileName, AFileSize);
        TYMED_ISTORAGE : _ProcessStorageMedium(ADataObject, Medium, AFileName, AFileSize);
        else ;
      end;
    finally
      ReleaseStgMedium(Medium);
    end;
  end;
end;

{------------------------------------------------------------------------------}

procedure TMyDataObjectHandler._ProcessAnsiFiles(ADataObject: IDataObject; AGroup: PFileGroupDescriptorA);
var
  I         : UINT;
  sFileName : AnsiString;
  iSize     : Cardinal;
begin
  for I := 0 to AGroup^.cItems-1 do
  begin
    sFileName := AGroup^.fgd[I].cFileName;
    if (AGroup^.fgd[I].dwFlags and FD_FILESIZE) = FD_FILESIZE then
    begin
      iSize := (AGroup^.fgd[I].nFileSizeLow and $7FFFFFFF);
    end
    else
    begin
      iSize := 0;
    end;
    _ProcessFileContents(ADataObject, I, string(sFileName), iSize);
  end;
end;

{------------------------------------------------------------------------------}

procedure TMyDataObjectHandler._ProcessUnicodeFiles(ADataObject : IDataObject;
                                                  AGroup      : PFileGroupDescriptorW);
var
  I: UINT;
  sFileName: WideString;
  iSize: Cardinal;
begin
  for I := 0 to AGroup^.cItems-1 do
  begin
    sFileName := AGroup^.fgd[I].cFileName;
    if (AGroup^.fgd[I].dwFlags and FD_FILESIZE) = FD_FILESIZE then
    begin
      iSize := (AGroup^.fgd[I].nFileSizeLow and $7FFFFFFF);
    end
    else
    begin
      iSize := 0;
    end;
    _ProcessFileContents(ADataObject, I, sFileName, iSize);
  end;
end;

{------------------------------------------------------------------------------}

function TMyDataObjectHandler._DoCopyFiles(const ADataObject : IDataObject) : HResult;
var
  Fetc       : FORMATETC;
  Medium     : STGMEDIUM;
  Enum       : IEnumFORMATETC;
  Group      : Pointer;
begin
  Result := ADataObject.EnumFormatEtc(DATADIR_GET, Enum);
  if FAILED(Result) then
    Exit;
  while (true) do
  begin
    Result := (Enum.Next(1, Fetc, nil));
    if (Result = S_OK) then
    begin
      if (Fetc.cfFormat = CF_FILEGROUPDESCRIPTORA)   or
         (Fetc.cfFormat = CF_FILEGROUPDESCRIPTORW)  or
         (Fetc.cfFormat = CF_HDROP) then
      begin
        Result := ADataObject.GetData(Fetc, Medium);
        if FAILED(Result) then
          Exit;
        try
          if (Medium.tymed = TYMED_HGLOBAL) then
          begin
            Group := GlobalLock(Medium.hGlobal);
            try
              if Fetc.cfFormat = CF_FILEGROUPDESCRIPTORW then
              begin
                _ProcessUnicodeFiles(ADataObject, PFileGroupDescriptorW(Group));
                break;
              end
              else if Fetc.cfFormat = CF_FILEGROUPDESCRIPTORA then
              begin
                _ProcessAnsiFiles(ADataObject, PFileGroupDescriptorA(Group));
                break;
              end
              else if Fetc.cfFormat = CF_HDROP then
              begin
                _ProcessDropFiles(ADataObject, PDropFiles(Group));
                break;
              end;
            finally
              GlobalUnlock(Medium.hGlobal);
            end;
          end;
        finally
          ReleaseStgMedium(Medium);
        end;
      end;
    end
    else
      break;
  end;
end;

{------------------------------------------------------------------------------}

//function TMyDataObjectHandler._ExtractFileNameWithoutExt(const FileName: string): string;
//begin
//  Result := ChangeFileExt(ExtractFileName(FileName), EmptyStr);
//end;

{------------------------------------------------------------------------------}

{ TMyMemoryStream }

function TMyMemoryStream.GetIStream: IStream;
var
  oStreamAdapter : TStreamAdapter;
  tPos           : Int64;
begin
  oStreamAdapter := TStreamAdapter.Create(Self);
  oStreamAdapter.Seek(0, 0, tPos);
  Result := oStreamAdapter as IStream;
end;

procedure TMyMemoryStream.LoadFromIStream(AStream : IStream; AFileSize : Cardinal);
var
  iPos : Int64;
  aStreamStat         : TStatStg;
  oOLEStream: TOleStream;
  HR: Int64;
begin
  oOLEStream := TOLEStream.Create(AStream);
  try
    Self.Clear;
    Self.Position := 0;
    try
      HR := Self.CopyFrom( oOLEStream, 0 );
    except
    on E : Exception do
    begin
      showMessage(E.ClassName + ' ' + E.Message);
    end;
    end;
    Self.Position := 0;
  finally
    oOLEStream.Free;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T17:48:14.677

问题是在 CF_FILEDESCRIPTORW 或 CF_FILEDESCRIPTORA Windows 提供不支持 Seek 功能且不支持正确 StreamStat.cbSize 字段的 IStream 的情况下。因此有必要从 TFileDescriptor 记录的 nFileSizeLow 和 nFileSizeHigh 字段中获取流大小。同样不可能使用 TStream.CopyFrom(oOLEStream, **0** ) 因为在零秒参数的情况下 TStream 调用不受支持的 Seek 函数，因此您有 EOleSysError 异常。

# sql - 文字日期格式转数字日期格式

> ID：14988346
> 
> 赞同：2
> 
> 时间：2013-02-20T19:30:01.240
> 
> 标签：sql, ms-access-2010, datetime-format

我正在 MS Access 2010 中创建一个查询。我必须比较两个字符串并找到周期时间。

**1：** 2013 年 2 月 12 日星期三上午 12:47

**2：** 2012 年 11 月 15 日下午 4:03:32

我试图将一种格式转换为其他格式，但我没有足够的知识。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:55:05.787

如果您从第一个字符串中丢弃工作日名称，则可以使用`CDate`将其转换为日期/时间值。这是一个即时窗口会话...

```
DateString1 = "Wednesday, February 12, 2013 12:47 AM"
? Mid(DateString1, InStr(DateString1, " "))
 February 12, 2013 12:47 AM
Date1 = CDate(Mid(DateString1, InStr(DateString1, " ")))
? Date1
2/12/2013 12:47:00 AM 
```

尽管我给出的子字符串`CDate`以空格开头，`CDate`但不在乎。

您的第二个字符串看起来适合`CDate`原样。

```
DateString2 = "11/15/2012 4:03:32 PM"
Date2 = CDate(DateString2)
? Date2
11/15/2012 4:03:32 PM 
```

一旦你有了两个日期/时间值，你就可以计算你的周期时间。我不确定您的想法，但这里有一些替代方案供您考虑。

```
? Date1 - Date2
 88.3635185185121 
? DateDiff("d", Date2, Date1)
 89 
? DateDiff("h", Date2, Date1)
 2120 
```

# jquery - 为什么我的 ajax 脚本会重新加载我的页面

> ID：14988351
> 
> 赞同：0
> 
> 时间：2013-02-20T19:30:23.160
> 
> 标签：jquery, html, ajax

我正在使用 ajax 提交表单。那么我使用的脚本只是为了测试一些纯文本回显的表单`processform.php`。但是，当我单击提交按钮时，没有任何警报并且页面被重新加载。

这不是`return false`应该防止它。当我删除 ajax 部分时，一切都很顺利。

我在哪里做错了？

```
$("#submit").click(function(){
      $("#sidebar .message").show();
      $(".sidebar-content").hide();

      $.ajax({
        type: "POST",
        url: "processform.php",
        data: { name: "John", location: "Boston" }
      }).done(function( msg ) {
        alert( "Data Saved: " + msg );
      });

      return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:33:39.130

简单的解决方案：将提交按钮更改为 type="button" 而不是 "submit"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:32:51.840

如果元素`#submit`是一个按钮或带有 的输入`type="submit"`，它可能会触发一个默认行为，将数据发送到表单操作发生的任何地方。

您可以将类型更改为`type="button"`不具有提交数据的默认行为的类型，也可以在单击处理程序中使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)来阻止默认行为。

```
$("#submit").click(function(e){
    e.preventDefault();
    ...
}); 
```

如果您希望在您的 ajax 请求成功时触发警报，您​​可以使用`success`选项而不是`.done()`.

```
$("#submit").click(function () {
    $("#sidebar .message").show();
    $(".sidebar-content").hide();

    $.ajax({
        type: "POST",
        url: "processform.php",
        data: {
            name: "John",
            location: "Boston"
        },
        success: function(msg) {
            alert("Data Saved: " + msg);
        },
        error: function() {
            alert("Error occurred");
        }
    });

    return false;
}); 
```

[jsfiddle](http://jsfiddle.net/fhSL2/)

# c# - 在 N-Tier 应用程序中使用 DTO 时的 OrderBy

> ID：14988357
> 
> 赞同：3
> 
> 时间：2013-02-20T19:30:48.750
> 
> 标签：c#, entity-framework, sorting, architecture, dto

我有一个用 C# 编写的分层应用程序 -

> 前端 - （获取页面`Customers`）
> 
> 商务 - （`CustomerService`和`Customer`班级）
> 
> 数据合同 - ( `CustomerDTO`)
> 
> 数据访问 - (`UnitOfWork`和`Repositories`)

数据库有一个包含一百多列（很多是冗余的）的 Customer 表，所以我使用 DTO 在业务层填充 Customer 对象。在Customer 类中，我也将许多字段的名称从它们的数据库名称中更改，例如ID 更改为CustomerID，FName 更改为Firstname。

前端使用业务层的服务来获取客户，例如`GetAll(), GetByID(int customerID).`

我也想在`GetPaged method`下面提供一个类似的。

客户服务类

```
public IEnumerable<Customer> GetPaged(
               Func<IQueryable<Customer>, IOrderedQueryable<Customer>> orderBy, 
               int skip, 
               int take)
{
     foreach (var customerDTO in 
                     unitOfWork.CustomerRepository.GetPaged(orderBy, skip, take))
     {
          yield return new Customer(customerDTO);
     }
} 
```

但这行不通，因为`CustomerRepository`期望`orderBy`基于`CustomerDTO`not the `Customer`。

我不想让前端知道任何关于`CustomerDTO`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:35:26.643

`enum`您可以使用可用的订单选项公开一个，然后`GetPaged`您只需根据收到的枚举值创建 OrderBy。

可能的实施可能是：

```
public enum OrderCustomersBy
{
    FirstNameAsc, FirstNameDesc, AgeAsc, AgeDesc
} 
```

在客户服务中：

```
private IOrderedQueryable<CustomerDTO> GetOrderBy(OrderCustomersBy orderOption)
{
    IOrderedQueryable<CustomerDTO> orderBy = null;

    switch (orderOption)
    {
        case OrderCustomersBy.FirstNameAsc: 
            // Create order by...
            break;
        case OrderCustomersBy.FirstNameDesc: 
            // Create order by...
            break;
        case OrderCustomersBy.AgeAsc: 
            // Create order by...
            break;
        case OrderCustomersBy.AgeDesc: 
            // Create order by...
            break;
        default:
            throw new NotImplementedException("Order option not implemented: " + orderOption.ToString());
    }

    return orderBy;
}

public IEnumerable<Customer> GetPaged(Func<IQueryable<Customer>> func, OrderCustomersBy orderOption, int skip, int take)
{
    IOrderedQueryable<CustomerDTO> orderBy = this.GetOrderBy(orderOption);

    foreach (var customerDTO in unitOfWork.CustomerRepository.GetPaged(orderBy, skip, take))
    {
        yield return new Customer(customerDTO);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:03:40.257

我看到两个问题：首先，您如何将业务实体映射到 DTO，其次，您如何在任何列上执行排序？

将业务实体映射到 DTO。这可以通过多种方式完成。举几个例子：可以使用 AutoMapper，您可以使用属性进行简单的映射（该属性将包含 customDTO 或数据库列的属性名称（使用数据库列可能会否定 DTO 的值））或者您可以从数据库驱动它，数据库方法有点笨拙和元。

我会按照评论中的建议使用动态顺序。是的，它确实增加了一层抽象，但它减少了维护。

**动态排序依据**

```
 public static IQueryable<T> OrderBy<T>(this IQueryable<T> items, string propertyName, SortDirection direction)
    {
        var typeOfT = typeof(T);
        var parameter = Expression.Parameter(typeOfT, "parameter");
        var propertyType = typeOfT.GetProperty(propertyName).PropertyType;
        var propertyAccess = Expression.PropertyOrField(parameter, propertyName);
        var orderExpression = Expression.Lambda(propertyAccess, parameter);

        string orderbyMethod = (direction == SortDirection.Ascending ? "OrderBy" : "OrderByDescending");
        var expression = Expression.Call(typeof(Queryable), orderbyMethod, new[] { typeOfT, propertyType }, items.Expression, Expression.Quote(orderExpression));
        return items.Provider.CreateQuery<T>(expression);
    } 
```

一天结束时，当我更改实体时，我对更改应用程序中其他位置的代码不感兴趣。

# java - 跨不同项目重用 Java 包

> ID：14988365
> 
> 赞同：0
> 
> 时间：2013-02-20T19:31:29.097
> 
> 标签：java, eclipse, maven, code-reuse

我是一名使用 Eclipse 和 Maven 的 Java 开发人员。我在一个项目中创建了一些模块，我想在未来的项目中重用它们。有没有使用 Maven 完成此任务的标准方法？

我不喜欢在其他项目中包含类路径的想法。我正在寻找一种使用 Maven 发布和共享某些特定包的方法，并且随着时间的推移，我应该为自己拥有一个一致的 Java 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:37:17.817

您可以使用 mvn clean package install 在您的存储库中发布那些已经存在的 jar，然后将它们作为依赖项添加到新项目中的 pom 文件中，无论您选择使用它们的位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:46:25.953

这是一个非常常见的用例，并且很好地涵盖了 maven 多模块项目。检查链接以获取简单示例[http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects)。对于本地开发，运行 mvn install 就足够了。在更大的项目或共享环境中，您将需要一个 Maven 存储库。

**更新：**

替代链接：[使用 Maven 和 Gradle 构建多模块项目](http://andresalmiray.com/multi-module-project-builds-with-maven-and-gradle/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T21:34:53.417

如果您想重用一些代码，那么您将不得不制作一个新的工件并将其添加为您的过度交付物的依赖项。正如 tigran 所提到的，这可以通过使用 maven 多模块架构很好地完成，但您可以使用其他几个项目创建一个新的可交付成果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T21:50:58.213

如果您可以为要重用的类构建一个 jar，则可以将它们部署到 Maven 存储库以供其他项目将来重用。但是，根据我目前阅读的评论，您需要源代码级别共享之类的东西。我假设您使用 Windows 平台进行开发。您可以使用联结或符号链接在不同项目之间的源代码级别进行链接。此外，大多数现代版本控制系统（如 Accurev/Clearcase）都支持符号链接。

# iphone - 启动应用商店对话框？

> ID：14988371
> 
> 赞同：1
> 
> 时间：2013-02-20T19:31:38.587
> 
> 标签：iphone, ios, ipad

我刚刚在 iOS 6 中注意到，在您的默认邮件应用程序中，如果您点击一个 iTunes URL，一个应用程序商店对话框实际上会打开，显示应用程序的详细信息。

没有重定向到应用商店！此框显示屏幕截图、描述等，就好像您已经在应用商店中一样。

我想知道是否可以从我自己的应用程序中启动这个盒子。我目前使用 itms-apps://，它自然会离开我的应用程序，然后进入应用程序商店。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:45:23.233

如果你只为 iOS 6+ 开发，你可以使用[SKStoreProductViewController](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html)。

像这样的东西：

```
SKStoreProductViewController *storeViewController = 
          [[SKStoreProductViewController alloc] init];

    storeViewController.delegate = self;

    NSDictionary *parameters =
         @{SKStoreProductParameterITunesItemIdentifier: 
              [NSNumber numberWithInteger:333700869]}; //Identifier of the item you want to buy.

    [storeViewController loadProductWithParameters:parameters 
         completionBlock:^(BOOL result, NSError *error) {
        if (result)
            [self presentViewController:storeViewController
                               animated:YES
                             completion:nil];
    }]; 
```

（[本](http://www.techotopia.com/index.php/Making_Store_Purchases_with_the_SKStoreProductViewController_Class)教程中的代码。）

# objective-c - 从堆栈中弹出时，ARC UIViewController 没有被解除分配

> ID：14988372
> 
> 赞同：1
> 
> 时间：2013-02-20T19:31:39.583
> 
> 标签：objective-c, automatic-ref-counting

我有一个基于导航的应用程序，我在我的应用程序中疯狂地使用 MBProgressHud。当它出现时，我转换为 ARC，我经历了很多应用程序崩溃，我不明白为什么。我开始使用分析工具，发现我的内存消耗已经达到了顶峰。我进入了我所有的视图控制器，并重载了它们的 dealloc 方法，以包括对 NSLog 的写出，以告诉我它们是否正在被释放。令我惊讶的是，没有一个使用 MBProgressHUD 的 ViewController 被释放。

我这样称呼 MBProgressHUD：

```
HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[self.navigationController.view addSubview:HUD];
HUD.delegate = self;
HUD.labelText = @"Retrieving Signature";
[HUD showWhileExecuting:@selector(getSignature) onTarget:self withObject:nil animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:45:34.887

完成 MBProgressHUD 后，您需要通过将代理设置为 Nil、从超级视图中删除并最后将 HUD 设置为 nil 来清理 HUD。

```
HUD.delegate = nil;
[HUD removeFromSuperview];
HUD=nil; 
```

# ruby-on-rails - 从来自另一个模块的值中插入一个字符串

> ID：14988373
> 
> 赞同：1
> 
> 时间：2013-02-20T19:32:04.400
> 
> 标签：ruby-on-rails, ruby

我的“**模型**”文件夹中自己的文件中有一个这样的模块：

```
module IntervalUnits
  VALUES = [MONTHLY, QUARTERLY, YEARLY].freeze

  MONTHLY = 0
  QUARTERLY = 1
  YEARLY = 2
end 
```

然后在我的“ **helpers** ”文件夹中，我有另一个文件，在 RaiseError 的某个地方我也想从上面的文件中显示这些值。我怎样才能做到这一点？

我知道字符串插值是这样`"#{stuff}"`的，但是当它是我从另一个文件（如我发布的上面那个文件）中读取的那些常量的数组时，我不确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:41:30.050

首先，您需要先定义常量，然后再将它们分配给数组。否则，您将收到如下异常：

> NameError: 未初始化的常量 IntervalUnits::MONTHLY

重新排序变量声明后，只需使用模块的命名空间引用您的常量。例如：

```
module IntervalUnits
  MONTHLY   = 0
  QUARTERLY = 1
  YEARLY    = 2

  VALUES    = [MONTHLY, QUARTERLY, YEARLY].freeze
end

IntervalUnits::VALUES
# => [0, 1, 2] 
```

# safari - 如何在 iPad 的 Safari 浏览器中模拟 Web 应用程序

> ID：14988376
> 
> 赞同：0
> 
> 时间：2013-02-20T19:32:13.230
> 
> 标签：safari

我有一个使用 MVC3 和 SQL Server 2008 的 Intranet Web 应用程序。我的一些用户将来会使用平板电脑来访问这个应用程序。

我的问题是，在实际为我的用户发行 iPad 之前，我如何在 iPad Safari 浏览器环境中模拟这个应用程序？是否有可用的模拟器，我可以在我的 Windows 环境中下载并测试以查看体验如何？

# ruby-on-rails - 使用 Piwik + Ruby on Rails 跟踪目标转换中的自定义变量

> ID：14988383
> 
> 赞同：2
> 
> 时间：2013-02-20T19:32:29.160
> 
> 标签：ruby-on-rails, ruby, matomo, goal-tracking

我正在测试 Piwik 是否适合我的 Ruby on Rails 应用程序的分析和跟踪。出于测试目的，我在 localhost 上运行 piwik，跟踪也在 localhost 上运行的 rails 应用程序。Piwik 跟踪由 piwik_analytics gem 集成，为了跟踪目标转换，我使用了 piwik-tracker gem。我所有的目标都是手动转换的（通过从控制器调用目标转换方法）。

我的问题是我希望通过自定义变量（范围：访问）记录目标转换，但这似乎不起作用。自定义变量设置正确，目标转化记录正确，但目标转化无法按自定义变量的值排序。

在我的应用程序中，有三种不同类型的用户，我希望按用户类型跟踪他们的操作。为此，我定义了一个包含用户类型的自定义变量。我已经在 application.haml.html 的 piwik_tracking_tag 中设置了这个变量，因为我事先无法知道入口页面。我看到变量设置正确，因为访问是由这个变量记录的。目标也被正确转换。

但是，在目标面板中，当我单击“按自定义变量”选项时，我看到每种不同用户类型的转化次数为 0。

我想知道这是否是 Piwik 问题，而不是由我引起的。在调用目标跟踪方法时，我也尝试过（重新）设置自定义变量

```
piwik.request.custom_variable(1,"Role","user_role").track_goal(1) 
```

但这没有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T21:49:44.330

@marflar：我们切换到客户端跟踪（并将 Piwik 更新为我发布此问题后发布的版本），然后通过自定义变量查看开始工作。然而，Piwik 随机无法追踪一些目标，所以最后我们放弃了 Piwik 并选择了我们一直满意的 Mixpanel。

# vba - 在 Excel 中使用 Solver 进行 VBA 宏优化不返回最佳变量

> ID：14988387
> 
> 赞同：2
> 
> 时间：2013-02-20T19:32:40.860
> 
> 标签：vba, excel, solver

我正在尝试优化 Excel 中的三个参数，以尽量减少实验值和理论值之间的误差。我在 for 循环中对每个参数使用 Solver，一次一个。但是，我想迭代这个求解器循环（循环内循环），直到实验值和理论值的误差小于某个目标值。

我的实验值为`$K25`.
我的理论值（根据我的模型方程计算）是`$J$25`.
我需要优化的参数是`$C$4`, `$C$5`,`$C$6`

当我运行以下 VBA 代码时，我在 `$C$4`,`$C$5`中的参数`$C$6`不会改变它们的初始值。但是，宏编译得很好，没有错误。有谁可以帮我离开这里吗？

这是代码：

```
Sub Macro3()
    Application.ScreenUpdating = False
    SolverReset
    Dim j As Integer
    For j = 1 To 100 Step 1
        If "$J$25" > "$K$25" Then
            Dim i As Integer, s As String
            For i = 4 To 6 Step 1
            s = Format(i, "0")
                SolverOk SetCell:="$J$25", MaxMinVal:=2, ValueOf:=0, ByChange:="$C$" & s, Engine:= _
                1, EngineDesc:="GRG Nonlinear"
                SolverOptions MaxTime:=0, Iterations:=1000000, Precision:=0.000001, Convergence _
                :=0.00001, StepThru:=False, Scaling:=True, AssumeNonNeg:=True, Derivatives:=1
                SolverOptions PopulationSize:=100, RandomSeed:=0, MutationRate:=0.075, Multistart _
                :=False, RequireBounds:=True, MaxSubproblems:=0, MaxIntegerSols:=0, _
                IntTolerance:=1, SolveWithout:=False, MaxTimeNoImp:=30
                SolverOk SetCell:="$J$25", MaxMinVal:=2, ValueOf:=0, ByChange:="$C$" & s, Engine:= _
                1, EngineDesc:="GRG Nonlinear"
                SolverSolve (True)
                SolverReset
            Next i
        End If
    Next j
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:09:58.227

我不确定您是否需要在 VBA 中执行此操作，因为您正在寻找的正是 Solver 应该做的 - 修改一组参数，以便最大化/最小化其他东西！

因此，您需要做的就是将公式插入`=ABS(J25-K25)`另一个单元格。该单元格将显示您的实验值和理论值之间的差值。现在设置您的求解器，以便通过更改您的三个参数来最小化这个单元格——您就完成了！（请注意，您可以在“通过更改可变单元格”字段中提供多个单元格！）

如果你想坚持你的方法，这里是语法正确的代码。请注意，我尚未对其进行测试 - 但仅纠正了通过查看代码可以发现的错误。希望这将是一个很好的起点。事实上，看看这种方法，我相信你最终会得到错误的结果，因为每次运行只优化一个变量 - 因此你永远不会研究由两个或三个参数组合产生的任何影响！

无论如何，这是您的代码：

```
Sub RunSolver()
    Dim j As Integer, i As Integer

    Application.ScreenUpdating = False
    SolverReset

    For j = 1 To 100
        Application.Statusbar = j & "/100"
        If Range("$J$25") > Range("$K$25") Then
            For i = 4 To 6
                SolverOk SetCell:=Range("$J$25"), MaxMinVal:=2, ValueOf:=0, ByChange:=Range("$C$" & i), Engine:= _
                1, EngineDesc:="GRG Nonlinear"
                SolverOptions MaxTime:=0, Iterations:=1000000, Precision:=0.000001, Convergence _
                :=0.00001, StepThru:=False, Scaling:=True, AssumeNonNeg:=True, Derivatives:=1
                SolverOptions PopulationSize:=100, RandomSeed:=0, MutationRate:=0.075, Multistart _
                :=False, RequireBounds:=True, MaxSubproblems:=0, MaxIntegerSols:=0, _
                IntTolerance:=1, SolveWithout:=False, MaxTimeNoImp:=30
                SolverSolve (True)
                SolverReset
            Next i
        End If
    Next j

    Application.StatusBar = False
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T10:05:35.700

您可以仔细检查代码中的那一行：

```
Engine:= 1, EngineDesc:="GRG Nonlinear" 
```

根据[MS 文档](https://msdn.microsoft.com/EN-US/library/office/ff839427.aspx)：

*   1 对于单纯形 LP 方法，
*   2 对于 GRG 非线性方法，或
*   3 进化方法。

可能，您的目标函数是**非线性**的，并且您认为您正在使用 GRG 非线性求解器，因为您在**EngineDesc**参数下提到了它。这是不正确的。这只是一个描述参数。

您实际使用的求解器是**Simplex LP**，其值为**1**。

更改为**2**以使用**GRG 非线性求解器**。

# ios - 按钮方向问题

> ID：14988394
> 
> 赞同：0
> 
> 时间：2013-02-20T19:32:59.243
> 
> 标签：ios, objective-c, uibutton, orientation

我以编程方式创建了一个按钮，并将其框架指向我在情节提要上创建的另一个按钮，当方向改变时，它不会像应有的那样停留在中间。

我也创建了一个`UIImageview`，但是当方向改变时它保持在中间

```
@property (nonatomic, weak) IBOutlet UIImageView *logoImage;
@property (nonatomic, weak) IBOutlet UIButton *loginButton;
@property (strong, nonatomic) UIButton* popUpButton;

UIImage *logOutButtonImage=[UIImage imageNamed:@"Button - Logout.png"];
    _popUpButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [_popUpButton setBackgroundImage:logOutButtonImage forState:UIControlStateNormal];
    _popUpButton.frame=_loginButton.frame;
     [_popUpButton addTarget:self action:@selector(didPressLink:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:_popUpButton]; 
```

故事板上的图像和按钮，它们在中间

![在此处输入图像描述](../Images/3f9f14256320789dbe962bfa4757591f.png)

图像的属性

![在此处输入图像描述](../Images/49076e9f246d78394c14f1a779aecf7c.png)

button'属性

![在此处输入图像描述](../Images/1f03e1cb7332716bd809cc09e5e509e3.png)

结果：

`didload`无论方向如何，在视图上都可以正常工作：

![在此处输入图像描述](../Images/340b65f9ef53aa7195ebff2459ec53a3.png)

方向改变时不会停留在中间

![在此处输入图像描述](../Images/844e193e058be6dad5a71e33b8f32268.png)

为什么按钮不留在中间，我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:38:25.940

放`autoresizing mask`

```
_popUpButton.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

# angularjs - 在 Angular 中测试过滤器的存在

> ID：14988395
> 
> 赞同：5
> 
> 时间：2013-02-20T19:32:59.877
> 
> 标签：angularjs, jasmine, karma-runner

我是单元测试的新手并试图掌握事物。我正在尽力遵循本教程：[http](http://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html#testing-filters) ://www.yearofmoo.com/2013/01/full-spectrum-testing-with-angularjs-and-testacular.html#testing-filters 。在我的 AngularJS 应用程序中，我有一个需要测试的过滤器。我已经正确设置并运行了 Node、Testacular 和 Jasmine。我要测试的过滤器非常简单：

```
myApp.filter('bill_ship', function () {
    return function (userData) {
        var output = "---";
        switch (userData) {
            case "0":
                output = "Billing";
                break;
            case "1":
                output = "Shipping";
                break;
        }
        return output;
    }
}); 
```

我以为我的测试设置正确，但它始终失败。

```
describe("Unit Testing: Filters - ", function() {
    beforeEach(angular.mock.module('prismApp', ['bill_ship']));

    //BillShip Filter
    it('should have a bill-ship filter: ', inject(function($filter){
        expect($filter('bill_ship')).not.toEqual(null);
    }));
}); 
```

它失败并显示以下消息：错误：参数“fn”不是函数，从 bill_ship 获取字符串。

那么......我在哪里做错了？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-07T12:31:30.640

如果其他人想知道（我花了一些时间才发现）我认为[@MBielski](https://stackoverflow.com/users/1843509/mbielski)注入过滤器的方式有点令人困惑，但肯定能完成这项工作！但是，我发现这是将过滤器注入 jasmine 单元测试环境以进行测试的好方法。

这是过滤器定义：

```
angular.module('prismApp.filters', [])

  .filter('billShip', function () {
    return function (userData) {
      // define filter
      ...
    }
  }); 
```

和测试：

```
describe("Unit Testing: Filters - ", function() {
  var billShip;

  // load the module
  beforeEach(module('prismApp.filters'));

  // load filter function into variable
  beforeEach(inject(function ($filter) {
    billShip = $filter('billShip');
  }));

  // test billShip filter
  it('should have a bill-ship filter: ', function () {
    // test away!
    expect(billShip).not.toEqual(null);
    expect(billShip("0")).toEqual("Billing");
    ...
  });
}); 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:15:51.493

好的，这就是为什么我不应该在没有咖啡因的情况下编码......

当您将要测试的文件放入配置文件时，它会很有帮助。男孩，我觉得自己很愚蠢。

# python - dataReceived() 中的扭曲接收数据

> ID：14988396
> 
> 赞同：3
> 
> 时间：2013-02-20T19:33:00.850
> 
> 标签：python, twisted

我正在尝试使用 Twisted 框架编写服务器，并希望多次接收数据

```
class Echo(Protocol):
    def connectionMade(self):
        print " got connection from : " + str(self.transport.getPeer())

    def dataReceived(self, data):

        '''
        get the client ip
        '''
        if(len(data)>40):
            '''
            initial setup message from the client
            '''
            client_details = str(self.transport.getPeer())#stores the client IP as a string
            i = client_details.find('\'')#process the string to find the ip
            client_details = client_details[i+1:]
            j = client_details.find('\'')
            client_ip = client_details[:j]

            '''
            Extract the port information from the obtained text
            ''' 
            data = data.split('@')
            port1 = data[0]
            port2 = data[1]
            port3 = data[2]

       if int(data) == 1:
           method1(client_ip,port1)

       if int(data) == 2:
           method2(client_ip,port2) 
```

我的问题：只有当它从客户端接收到包含适当整数数据的消息时，才会调用 method1 和 method2。有没有一种方法可以让我等待客户端接收 dataReceived() 方法中的数据，还是应该在 dataReceived() 方法本身中按顺序进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:37:41.637

当接收到一些数据时调用该`dataReceived`方法。为了等待接收更多数据，您只需返回 from`dataReceived`以便再次调用它。

此外，TCP 不是基于消息的，它是基于流的。您的`dataReceived`方法不能指望始终收到完整的消息，因此您的示例代码不正确。 有关更多信息，请参阅 Twisted Matrix Labs 网站上的[这个常见问题。](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith)

# python - 有没有办法在 argparse 中添加一个已经创建的解析器作为子解析器？

> ID：14988397
> 
> 赞同：9
> 
> 时间：2013-02-20T19:33:05.493
> 
> 标签：python, command-line-arguments, argparse

通常，要在其中添加子解析器，`argparse`您必须执行以下操作：

```
parser = ArgumentParser()
subparsers = parser.add_subparser()
subparser = subparsers.add_parser() 
```

我遇到的问题是我试图添加另一个命令行脚本，它有自己的解析器，作为我的主脚本的子命令。是否有捷径可寻？

* * *

编辑：为了澄清，我有一个`script.py`看起来像这样的文件：

```
def initparser():
    parser = argparse.ArgumentParser()
    parser.add_argument('--foo')
    parser.add_argument('--bar')
    return parser

def func(args):
    #args is a Namespace, this function does stuff with it

if __name__ == '__main__':
    initparser().parse_args() 
```

所以我可以这样运行：

```
python script.py --foo --bar 
```

我正在尝试编写一个`app.py`带有几个子命令的命令行界面的模块，因此我可以运行类似的东西：

```
python app.py script --foo --bar 
```

我希望能够直接使用我从 initparser() 创建的解析器作为子解析器，而不是将所有`initparser()`逻辑复制并粘贴到。`app.py`这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-31T01:53:34.830

你可以使用`parents`参数

```
p=argparse.ArgumentParser()
s=p.add_subparsers()
ss=s.add_parser('script',parents=[initparser()],add_help=False)
p.parse_args('script --foo sst'.split()) 
```

`ss`是一个解析器，它共享为 定义的所有参数`initparser`。任何一个都`add_help=False`需要`ss`的不是两次定义。`initparser``-h`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:39:17.760

您可能想看看[shlex](http://docs.python.org/2/library/shlex.html)模块，因为在我看来，您正试图破解shlex 模块`ArgumentParser`来做一些实际上并不打算做的事情。

话虽如此，如果没有您要解析的确切内容的示例，很难找出一个好的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T20:34:25.070

我认为您的问题可以通过 argparse 的声明性包装器来解决。我写的那个叫做[Argh](http://argh.rtfd.org)。它有助于将命令的定义（以及所有与参数相关的东西）与组装（包括子解析器）和调度分开。

# c# - 将 POST 中的 JSON 从 WP8 发送到 AppEngine - 错误 500

> ID：14988398
> 
> 赞同：0
> 
> 时间：2013-02-20T19:33:07.943
> 
> 标签：c#, json, google-app-engine, http-post, windows-phone-8

您好我正在尝试将以下 JSON 字符串发送到 AppEngine 服务器。字符串如下所示：

```
{"param2":50.0,"param1":50.0,"additionalParams":{"param3":"123","userID":"1234561"}} 
```

我用于发送它的代码如下：

```
public async Task<string> SendJSONData(string urlToCall, string JSONData)
    {
        // server to POST to
        string url = urlToCall;

        // HTTP web request
        var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
        httpWebRequest.ContentType = "action";
        httpWebRequest.Method = "POST";

        // Write the request Asynchronously 
        using (var stream = await Task.Factory.FromAsync<Stream>(httpWebRequest.BeginGetRequestStream,
                                                                 httpWebRequest.EndGetRequestStream, null))
        {
            //create some json string
            string json = JSONData;

            // convert json to byte array
            byte[] jsonAsBytes = Encoding.UTF8.GetBytes(json);

            // Write the bytes to the stream
            await stream.WriteAsync(jsonAsBytes, 0, jsonAsBytes.Length);
        }

        WebResponse response = await httpWebRequest.GetResponseAsync();
        StreamReader requestReader = new StreamReader(response.GetResponseStream());
        String webResponse = requestReader.ReadToEnd();
        return webResponse;
} 
```

我已经使用 Fiddler 嗅探了发送到服务器的内容：

```
POST http://server.appspot.com/method HTTP/1.1
Accept: */*
Content-Length: 85
Accept-Encoding: identity
Content-Type: action
User-Agent: NativeHost
Host: server.appspot.com
Connection: Keep-Alive
Cache-Control: no-cache
Pragma: no-cache

{"param2":50.0,"param1":50.0,"additionalParams":{"param3":"123","userID":"1234561"}} 
```

请注意，我已经使用“Content-Type”参数进行了实验，将其设置为“text/plain”和“application/json”。仍然来自服务器的答案看起来像这样：

```
HTTP/1.1 500 Internal Server Error
Date: Wed, 20 Feb 2013 18:54:34 GMT
Content-Type: text/html; charset=UTF-8
Server: Google Frontend
Content-Length: 466

<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>500 Server Error</title>
</head>
<body text=#000000 bgcolor=#ffffff>
<h1>Error: Server Error</h1>
<h2>The server encountered an error and could not complete your request.<p>If the            problem persists, please <A HREF="http://code.google.com/appengine/community.html">report</A> your problem and mention this error message and the query that caused it.</h2> 
```

## 

我应该怎么做才能收到所需的“OK”响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:37:16.397

好的，问题是我的 POST 中缺少“action”参数。解决方法如下所示：

```
 // Write the request Asynchronously 
    using (var stream = await Task.Factory.FromAsync<Stream>
    (httpWebRequest.BeginGetRequestStream,httpWebRequest.EndGetRequestStream, null))
    {
        //create some json string
        string json = "action="+JSONData;

        // convert json to byte array
        byte[] jsonAsBytes = Encoding.UTF8.GetBytes(json);

        // Write the bytes to the stream
        await stream.WriteAsync(jsonAsBytes, 0, jsonAsBytes.Length);
    } 
```

# sql - SSRS 报告需要很长时间才能显示，但处理速度很快

> ID：14988401
> 
> 赞同：1
> 
> 时间：2013-02-20T19:33:12.043
> 
> 标签：sql, sql-server, wpf, reporting-services

**编辑**
我正在编写一份新报告，并试图制作一份空白报告。即使是这个也需要大约 12 秒才能出现。显然有问题，但我想在重新安装之前尝试您可能拥有的解决方案。

我的应用程序有几个 SSRS 报告。它们都是列出数据的简单表格。在设计器的预览选项卡中，它们都在 1-3 秒内出现。他们使用的 SQL 查询或存储过程都执行得足够快。报告托管在一个 ReportViewer 中，位于一个 tabcontrol 内。

我的问题是，这些报告大多要连续生成20次左右，每次都有不同的参数，在实际应用中出现一个报告需要12秒或更长时间，这是一个很大的问题。什么可能导致这种放缓？

这是我拥有的最简单报告的示例，但仍然需要太多时间：

```
**Table Users**
Id uniqueidentifier PK
Name varchar(50)
Salary decimal
TimeInBank decimal
Enabled bit 
```

该表少于 100 行，没什么特别的。查询：

> 从 Enabled=1 的用户中选择 *

在执行日志中，该报告具有以下统计信息：

```
TimeRendering: 79
TimeProcessing: 54
TimeDataRetrieval: 22
Status: rsSuccess
ByteCount: 5305
RowCount: 7 
```

这些数字似乎没有错，但从我按下按钮到我看到报告的那一刻仍然需要至少 12 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:23:29.393

如果报告中的数据不经常更改，您可以考虑缓存报告：http: [//msdn.microsoft.com/en-us/library/ms155927.aspx](http://msdn.microsoft.com/en-us/library/ms155927.aspx)

您可能仍然想首先弄清楚瓶颈是什么，但至少报告的查看者不必在此期间等待。

# ruby-on-rails - 表单生成器（集合）出现红宝石错误，预期组，得到字符串

> ID：14988402
> 
> 赞同：0
> 
> 时间：2013-02-20T19:33:12.020
> 
> 标签：ruby-on-rails, ruby, string, forms

我是 ruby​​ 新手，遇到了问题

```
= simple_form_for @user do |f|

  .form-inputs
    = f.input :name
    = f.input :email
    = f.input :group_id, collection: Group.all.collect {|c| [c.name, c.id]}
  .form-actions
    = f.button :submit 
```

给我一条错误消息的行是这样的：

```
= f.input :group, collection: Group.all.collect {|c| [c.name, c.id]} 
```

同样的事情

```
= f.input :group, collection: @groups 
```

用户：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :group
  belongs_to :group 
```

群组：

```
class Group < ActiveRecord::Base
  attr_accessible :description, :name
  has_many :users 
```

我还使用了gem“移民”，它创建了外键和这个迁移：

```
class AddKeys < ActiveRecord::Migration
  def change
    add_foreign_key "users", "groups", :name => "users_group_id_fk"
  end
end 
```

[我在这里](http://guides.rubyonrails.org/form_helpers.html)看到了关于集合和表单构建器的警告。当我使用

```
= f.input :group_id, collection: @groups 
```

它甚至在加载页面之前提示我一条错误消息（而不是在提交表单之后）

```
undefined method `group_id' 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:45:45.110

根据[Simple Form 文档](https://github.com/plataformatec/simple_form#associations)，您应该使用`f.input :group`，而不是`f.input :group_id`。美妙之处在于您不必传入集合，它会自动完成：

```
f. input :group 
```

这应该呈现一个选择输入，其中列出了您的组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:40:52.770

将您的模型从 Group 更改为 XGroup 或 Group 以外的任何东西，我认为您与 ActiveRecord 的 Group 冲突

# node.js - 节点服务器监听 8080 端口，EC2 只能在 8080 上工作，网站不工作

> ID：14988404
> 
> 赞同：-2
> 
> 时间：2013-02-20T19:33:14.137
> 
> 标签：node.js, amazon-web-services, amazon-ec2, amazon

我的 EC2 实例在 ec2:8080 启动并运行，因为我的节点服务器正在侦听端口 8080。但我想将我的实例作为 cname 连接到域下的网站（在 namecheap）。cname 只接受 ec2 而不是 ec2:8080，所以我的代码不会上去。这可能是一个简单的修复，有什么帮助吗？（我的安全组接受所有端口，所以不是这样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:54:58.030

您需要将域的 DNS 设置指向您的公共 DNS 或 EC2 提供的弹性 IP。从那里，您需要在您的安全组中允许一个例外，允许 HTTP 流量通过端口 8080。假设 DNS 更改传播，您应该能够通过以下方式访问在端口 8080 上运行的节点服务器上的实例：

```
http://your.public.dns.address:8080/ 
```

**或者**

```
http://elastic.ip:8080 
```

希望有帮助。

# c# - 确保此代码文件中定义的类与“继承”属性匹配 3

> ID：14988405
> 
> 赞同：0
> 
> 时间：2013-02-20T19:33:14.947
> 
> 标签：c#, asp.net, sitecore

我最近继承了另一个供应商的项目，我正试图将它变成一个可用的 Visual Studio 2010 解决方案。

我目前遇到的错误是：

> 确保此代码文件中定义的类与'inherits' 属性匹配，并且它扩展了正确的基类（例如Page 或UserControl）。

我发现这个问题已经多次提出，但在这种情况下似乎没有一个解决方案有效。以下是有问题的代码：

~/layouts/Header.ascx.cs

```
using System;
using Client._Classes.Global;
using Client._Classes.Helpers;
using Client._Classes.Utilities;

namespace Layouts.layouts_Header
{

    public partial class layouts_Header : BaseControl
    {
        private void Page_Load(object sender, EventArgs e)
        {

        }

        protected void lnkSignIn_OnClick(object sender, EventArgs e)
        {
            Session["CurrentPageURL"] = Sitecore.Context.RawUrl;
            Response.Redirect("/en/Community/Register.aspx");
        }

        protected void btnSearchSubmit_OnClick(object sender, EventArgs e)
        {
            string redirectURL = "/en/Search%20Results.aspx?cx=005917832522243245879:kpcudcaotoo&cof=FORID:11&ie=UTF-8&q=" + txtSearchQueryStr.Text;

            Response.Redirect(redirectURL);
        }

    }

} 
```

~/layouts/Header.ascx

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="~/layouts/Header.ascx.cs" Inherits="Layouts.layouts_Header.layouts_Header" %> 
```

BaseControl.cs

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.UI.WebControls;
using System.Globalization;

using Sitecore.Data.Items;
using Sitecore.Diagnostics;
using Sitecore.Web;
using Sitecore.SharedSource.Data.Comparers.ItemComparers;
using Sitecore.Data.Fields;
using Sitecore.SharedSource.Searcher;
using Sitecore.SharedSource.Searcher.Parameters;
using Sitecore.SharedSource.Searcher.Utilities;
using Sitecore.Collections;

using Client._Classes.Utilities;
using Client._Classes.Helpers;
using Client._Classes.Global;

namespace Client._Classes.Global
{
    public class BaseControl : System.Web.UI.UserControl
    {
        ...
    }
} 
```

应该注意的是，其他几个 .ascx 控件也继承自 BaseControl，并且似乎没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:05:45.257

我认为问题在于您的命名空间名称以您的类名结尾：

```
namespace Layouts.layouts_Header
{
    public partial class layouts_Header // * snip * 
```

尝试`layouts_Header`从您的命名空间中删除该部分，然后将`Inherits`属性的值更改为`Layouts.layouts_Header`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:28:18.440

提供给我的解决方案似乎包含这样的文件夹结构：

> /temp/installation_history/681FBB6D58774C7D96B37D1353B7441E/layouts

其中包含 Header.ascx 和 Header.ascx.cs 的副本。当我从项目中排除 Header.ascx 和 Header.ascx.cs 的实际副本时，我发现了这些文件。

一旦我删除了临时文件夹及其所有内容，就编译了解决方案。感谢大家的建议。

# actionscript-3 - 加载外部 swf - 尺寸不正确

> ID：14988407
> 
> 赞同：0
> 
> 时间：2013-02-20T19:33:25.403
> 
> 标签：actionscript-3, flash, external, away3d

我有一个主要的 swf 文件。它有一个简单的空影片剪辑，实例名称为 mc_external_swf。

现在我使用文档类来加载一个外部 swf 文件。外部文件加载并可见，但其尺寸不适合在影片剪辑容器内，来自外部 swf 的一些内容在影片剪辑容器外部重叠。请看下图。

这是用于加载外部 swf 文件的代码。

```
 var _swfLoader:Loader;
    var _swfContent:MovieClip;

    function goToPlay(e:MouseEvent=null):void
    {
        loadSWF("agameFLA.swf");
    }       

    public function loadSWF(path:String):void 
    {
       var _req:URLRequest = new URLRequest();
       _req.url = path;

       _swfLoader = new Loader();
       setupListeners(_swfLoader.contentLoaderInfo);

       _swfLoader.load(_req);
    }

    function setupListeners(dispatcher:IEventDispatcher):void 
    {
       dispatcher.addEventListener(Event.COMPLETE, addSWF);
    }

    function addSWF(event:Event):void 
    {
       event.target.removeEventListener(Event.COMPLETE, addSWF);
       event.target.removeEventListener(ProgressEvent.PROGRESS, preloadSWF);
       _swfContent = event.target.content;
       mc_external_swf.addChild(_swfContent);
    } 
```

这是外部文件本身的代码 - （其文档类）

```
package
{
import away3d.cameras.Camera3D;
import away3d.cameras.lenses.PerspectiveLens;
import away3d.containers.ObjectContainer3D;
import away3d.containers.Scene3D;
import away3d.containers.View3D;
import away3d.controllers.HoverController;
import away3d.entities.Mesh;
import away3d.materials.ColorMaterial;
import away3d.primitives.CubeGeometry;

import flash.display.MovieClip;

public class Main extends MovieClip
{
    public var _view : View3D;
    private var _scene:Scene3D;
    private var _camera : Camera3D;
    private var _hoverController:HoverController;

    private var _container:ObjectContainer3D;
    private var _cube:CubeGeometry;
    private var _cubeMaterial:ColorMaterial;
    private var _cubeMesh:Mesh;

    public function Main()
    {   
        addEventListener(Event.ADDED_TO_STAGE,init);
    }

    private function init(e:Event):void
    {
        removeEventListener(Event.ADDED_TO_STAGE,init);
        iniScene();
        iniObjects();
    }

    private function iniScene():void
    {           
        _scene = new Scene3D();

        _view = new View3D();
        _view.backgroundColor = 0x666666;
        _view.antiAlias = 4;

        _camera= new Camera3D();
        _camera.lens = new PerspectiveLens(60);
        _hoverController = new HoverController(_camera, null, 180, 0);
        _hoverController.distance = 400;
        _hoverController.steps = 16;
        _view.camera = _camera;

        this.addChild(_view);
    }

    private function iniObjects():void
    {
        _container = new ObjectContainer3D();
        _cube = new CubeGeometry(100, 100, 100, 20, 20, 20);

        _cubeMaterial = new ColorMaterial(0x0000FF);

        _cubeMesh = new Mesh(_cube, _cubeMaterial);
        _cubeMesh.mouseEnabled = true;
        _container.addChild(_cubeMesh);
        _view.scene.addChild(_container);
        this.addEventListener(Event.ENTER_FRAME, _onEnterFrame);
        _onResize();
    }

    private function _onResize(e:Event=null):void
    {
        _view.width = stage.stageWidth;
        _view.height = stage.stageHeight;
    }

    private function _onEnterFrame(e:Event):void
    {
        _view.render();
    }
} 
```

}

![截屏](../Images/0c44fe37126e0298d17fab828a6e6c97.png)

它可能发生在 away3d 库中。我曾尝试加载其他 swf，但它们非常适合。但是这个 swf 尤其不适合在影片剪辑容器中。我认为它与 away3d 中的 view3d 有关，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:24:46.887

我见过的所有关于 Stage3D（或 Away3D 等库）的教程都在主类中包含以下代码：

```
public function Main()
{
    //wait until stage object is ready
    addEventListener(Event.ADDED_TO_STAGE, addedHandler);
} 

private function addedHandler(event:Event):void
{
    removeEventListener(Event.ADDED_TO_STAGE, addedHandler);
    stage.align = "TL"; //or use StageAlign.TOP_LEFT;
    stage.scaleMode = "noScale"; //or use StageScaleMode.NO_SCALE;
} 
```

它将阻止 swf 缩放。

# java - 构建 protobuf 示例应用程序的问题

> ID：14988408
> 
> 赞同：6
> 
> 时间：2013-02-20T19:33:33.707
> 
> 标签：java, protocol-buffers

我是 protobufs 的新手，并试图了解有关使用它们的更多信息。我已经下载了从[这里](http://code.google.com/p/protobuf/downloads/list)打包的 protobuf 。存档的示例文件夹中有一个 README.txt 文件，它提供了有关如何构建 2 个示例应用程序的说明。但是，当我按照这些说明构建 java 应用程序时：

```
make java 
```

我收到很多错误，然后是：

> 100 个错误
> ：*** [javac_middleman] 错误 1

所有 100 个错误似乎都与类路径相关，因为这是一个典型示例：

> com/example/tutorial/AddressBookProtos.java:37：错误：com.google.protobuf 包不存在

关于如何通过这个的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:20:08.917

问题是由于某种原因`protobuf`jar 在编译期间没有添加到类路径中。要修复它，您应该在 java 编译行的末尾打开`examples/Makefile`并添加 。**`-cp protobuf-java-2.4.1.jar`**`javac AddPerson.java ListPeople.java com/example/tutorial/AddressBookProtos.java`

PS如果你用maven构建你的protobufs，jar位于`~/.m2/repository/com/google/protobuf/protobuf-java/2.4.1/protobuf-java-2.4.1.jar`（jar的版本可能不同）

# html - 指定响应式网页设计的最大尺寸

> ID：14988414
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:34:02.937
> 
> 标签：html, responsive-design

我刚开始使用 HTML5。我明白使用流体设计是 RWD 不可或缺的一部分。因此，我没有在 px 中指定宽度，而是按百分比使用它。有两个问题。

1）我发现自己创建了更多断点并为每个点指定不同的宽度。如何阻止这种情况？

2）此外，我想知道是否有任何方法可以阻止内容在指定宽度（例如 1024 像素（58 em）之后调整大小）我不希望应用程序进一步调整大小，因为输入元素看起来很尴尬并且超出了这一点。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T04:01:37.163

如果您刚开始使用响应式设计，您可能需要考虑使用已建立的框架之一，例如[引导程序](http://twitter.github.com/bootstrap/)或[基础](http://foundation.zurb.com)……还有其他几个不错的框架。

它将为您节省大量时间，并且您所问的问题将由框架本身管理。

FWIW，我不反对为响应式设计推出自己的解决方案，但要获得良好的跨浏览器/平台结果，还有很多东西要学，我认为它们有很多用途，值得认真研究。

祝你好运！

# typescript - AmCharts 的 TypeScript 声明

> ID：14988415
> 
> 赞同：4
> 
> 时间：2013-02-20T19:34:03.277
> 
> 标签：typescript, amcharts

我正在寻找 AmCharts 的 TypeScript 声明文件。如果有人有，请分享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T21:12:03.337

我决定自己定义。这就是我最终的结果：

（不再工作）：[https ://github.com/borisyankov/DefinitelyTyped/tree/master/amcharts](https://github.com/borisyankov/DefinitelyTyped/tree/master/amcharts)

这项工作已被接管，现在最新版本位于：

工作链接：[https ://www.npmjs.com/package/@types/amcharts](https://www.npmjs.com/package/@types/amcharts)

# php - 将 PDF 填写的表格提交给 PHP 脚本，然后通过电子邮件将 PDF 作为附件发送

> ID：14988416
> 
> 赞同：0
> 
> 时间：2013-02-20T19:34:09.707
> 
> 标签：php, pdf

我有这个脚本，它是不久前发布的，它可以工作，但是......在 Safari 作品中找到（通过浏览器）没有问题。FireFox & Opera 强制您打开 Acrobat 阅读器。当您从 Acrobat Reader 提交时（待命），提交的 php 脚本会发送带有附件的电子邮件，但 Acrobat Reader 会挂起“正在接收数据...”然后超时。带附件的电子邮件工作正常。Chrome 在浏览器中打开提交`pdf`但停留在`pdf`页面上不会重定向。从 Chrome 发送的附件在电子邮件中，但它是空的，pdf 文件没有打开。我的问题是：Acrobat Reader 等待接收什么？以及 Chrome 发生了什么？

这是代码

```
$fileatt = date("d-m-Y-His") . ".pdf";  // Creates unique PDF name from the date 
copy('php://input',"pdfs/".$fileatt); // Copies the pdf form data to a folder named pdfs 
$fileatt = "pdfs/".$fileatt; // Path to the file gives the pdfs folder plus the unique       file name we just assigned
$fileatt_type = "application/pdf"; // File Type 
$fileatt_name = "Application Form_".$fileatt.".pdf"; // Filename that will be used for the   file as the attachment when it is sent

$email_from = "mywebsite"; // Who the email is from 
$email_subject = "Completed online Applications"; // The Subject of the email 
$email_message = "Please find a recent online application attached.
";
$email_message .= "Any problems please email me...
"; // Message that the email has in it 

$email_to = "youremail@yourserver.com"; // Who the email is to 

$headers = "From: ".$email_from;

//no need to change anything else under this point

$file = fopen($fileatt,'rb'); 
$data = fread($file,filesize($fileatt)); 
fclose($file); 

$semi_rand = md5(time()); 
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x"; 

$headers .= "\nMIME-Version: 1.0\n" . 
"Content-Type: multipart/mixed;\n" . 
" boundary=\"{$mime_boundary}\""; 

$email_message .= "This is a multi-part message in MIME format.\n\n" . 
"--{$mime_boundary}\n" . 
"Content-Type:text/html; charset=\"iso-8859-1\"\n" . 
"Content-Transfer-Encoding: 7bit\n\n" . 
$email_message .= "\n\n"; 

$data = chunk_split(base64_encode($data)); 

$email_message .= "--{$mime_boundary}\n" . 
"Content-Type: {$fileatt_type};\n" . 
" name=\"{$fileatt_name}\"\n" . 
//"Content-Disposition: attachment;\n" . 
//" filename=\"{$fileatt_name}\"\n" . 
"Content-Transfer-Encoding: base64\n\n" . 
$data .= "\n\n" . 
"--{$mime_boundary}--\n"; 

$ok = @mail($email_to, $email_subject, $email_message, $headers); 

if($ok) { 
  unlink($fileatt); //NOW WE DELETE THE FILE FROM THE FOLDER pdfs 
  Header("Location: nextpage.php"); //where do we go once the form has been submitted.

} else { 
  die("Sorry but the email could not be sent. Please go back and try again!"); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T17:26:12.827

Acrobat Reader 正在等待数据……任何数据。回显确认收到表格的内容。Chrome 发送的是 FDF，而不是 PDF。我不认为附件实际上是空的，但它必须能够打开 FDF 中提到的 PDF。

# android - 获取其他应用的内存类

> ID：14988423
> 
> 赞同：2
> 
> 时间：2013-02-20T19:35:10.660
> 
> 标签：android

getMemoryClass() 和 getLargeMemoryClass() 返回调用应用程序的内存类。是否可以获得另一个正在运行的进程的内存类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:43:15.820

如果您阅读它的文档[`getMemoryClass`](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)说：

> 返回当前设备的每个应用程序的近似内存类。

对于任何应用程序都是一样的。*它是当前设备*的内存类。

要检测应用程序是否使用大堆选项，请尝试使用[`PackageManager.getApplicationInfo`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29). 您应该能够阅读[`flags`](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#flags). [`FLAG_LARGE_HEAP`](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#FLAG_LARGE_HEAP)我认为无论如何它都会起作用；`flags`文档不包括它，但`FLAG_LARGE_HEAP`文档引用了`flags`.

# android - 什么是 com.sec.android.provider.* 应用程序？

> ID：14988424
> 
> 赞同：10
> 
> 时间：2013-02-20T19:35:10.727
> 
> 标签：android, database, sqlite, provider

我知道这不是代码问题。但是，我尝试处理一些存储在目录中的数据库，例如`/data/data/com.sec.android.provider.*`.

提供商签名中的“sec”是什么意思？是否取决于制造商？

一个例子：内容提供者在三星上`call_logs`读取数据库。`/data/data/com.sec.android.provider.logsprovider`什么在 HTC 上读取相同的内容提供商？

我有点困惑...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T21:29:49.420

> 但是，我尝试处理存储在 /data/data/com.sec.android.provider.* 等目录中的一些数据库。

这些不是 Android SDK 的一部分。

> 提供商签名中的“sec”是什么意思？

三星电子公司是我的猜测。

# jquery - 从 jQuery 1.7.1 迁移到 jQuery 1.9.2

> ID：14988437
> 
> 赞同：2
> 
> 时间：2013-02-20T19:36:10.253
> 
> 标签：jquery, jquery-ui

我已将 jQuery 1.7.1 替换为 jQuery 1.9.2，并且在我的一些自定义构建 ui 脚本和 jQuery 提供的 UI 库中也看到了以下错误。以下是错误。

我也将 jQuery UI 库升级到 1.10.0

以下是我一直面临的错误还有更多。

```
Uncaught TypeError: Cannot read property 'element' of undefined  
'e.widget._close'  
(anonymous function)  
e.widget.close  
(anonymous function)  
'_on.blur'  
u  
b.event.dispatch  
v.handle 

Uncaught TypeError: Object [object Object] has no method 'menu'

cannot call methods on myCustomOverlay prior to initialization; attempted to call method 'isOpen' 
```

有什么需要我注意的吗？请指导我如何从 1.7.1 迁移到 1.9.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:38:49.263

许多旧代码库已被完全修改，或在最新的 1.9 版本中被弃用，因此，迁移插件已可用于恢复一些已删除的功能，以帮助您将项目转换到更新版本的 jQuery。

[您可以在此处](http://jquery.com/download/)的官方下载页面上找到 jQuery Migrate 插件。[您还拥有@dgvid 在此处](http://jquery.com/upgrade-guide/1.9/)提到的迁移指南。

# c# - 浮点数学，63.500000 x 2 = 127000000

> ID：14988447
> 
> 赞同：3
> 
> 时间：2013-02-20T19:36:46.567
> 
> 标签：c#, .net, hardware

以下代码有问题：

```
private const int movementMultiplier = 2;

void Test() {
    XmlNode xnXCoordinate = xd.SelectSingleNode("/data/x");
    XmlNode xnYCoordinate = xd.SelectSingleNode("/data/y");

    int xLoc = Convert.ToInt32(Convert.ToSingle(xnXCoordinate.InnerText)) * movementMultiplier;
    int yLoc = Convert.ToInt32(Convert.ToSingle(xnYCoordinate.InnerText)) * movementMultiplier;
} 
```

此代码在具有给定值/结果的客户端 PC（通过 Bootcamp 运行 Windows 的〜2009 MacBook）上运行：

```
xnXCoordinate.InnerText = 63.500000
xnYCoordinate.InnerText = 242.000000

XLoc = 127000000
yLoc = 484000000 
```

当我运行它时，我想出了：

```
xnXCoordinate.InnerText = 63.500000
xnYCoordinate.InnerText = 242.000000

XLoc = 128
yLoc = 484 
```

不知何故`Convert.ToInt32(Convert.ToSingle(x))`，似乎忘记了小数位。这发生在多台 PC 上（但是我从来没有访问过测试）。这里似乎发生了某种类型的浮点数学错误，但我不确定是什么。谁能建议发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:41:44.413

关于什么

```
Convert.ToInt32(Convert.ToSingle(x, CultureInfo.InvariantCulture) ) 
```

?

（修复感谢皮特的评论）

# c++ - 使用 ITaskScheduler、ITask 接口的计划任务问题

> ID：14988449
> 
> 赞同：1
> 
> 时间：2013-02-20T19:36:52.453
> 
> 标签：c++, winapi, com, scheduled-tasks

下面的代码执行没有任何错误，但任务没有执行，我没有在控制面板中看到它。请帮忙

```
HRESULT CreateOnceActionTask(const wchar_t* taskName, const wchar_t* programPath, const wchar_t* params)
{
    HRESULT hr = S_OK;

    CComPtr<ITaskScheduler> taskScheduler;
    if(FAILED(hr = CoCreateInstance(CLSID_CTaskScheduler, NULL, CLSCTX_INPROC_SERVER,   IID_ITaskScheduler, (void**)&taskScheduler)))
        ReturnErrorMsg(hr, L"Failed to get IID_ITaskScheduler");

    // create task
    CComPtr<ITask> task;
    if(FAILED(hr = taskScheduler->NewWorkItem(taskName, CLSID_CTask, IID_ITask, (IUnknown**)&task)))
    {
        //if(FAILED(hr = taskScheduler->Activate(taskName, IID_ITask, (IUnknown**) &task)))
        ReturnErrorMsg(hr, L"Failed to create task");

        //taskScheduler->Delete(taskName);

        //return S_OK;
    }

    if(FAILED(hr = task->SetApplicationName(programPath)))
        ReturnErrorMsg(hr, L"Failed to set SetApplicationName");

    if(FAILED(hr = task->SetParameters(params)))
        ReturnErrorMsg(hr, L"Failed to set SetParameters");

    if(FAILED(hr = task->SetTaskFlags(TASK_FLAG_DELETE_WHEN_DONE)))
        ReturnErrorMsg(hr, L"Failed to set task flags");

    // save task
    CComPtr<IPersistFile> persistTask;  
    if(FAILED(hr = task->QueryInterface(IID_IPersistFile, (void **)&persistTask)))
        ReturnErrorMsg(hr, L"Failed to save task with IPersistFile");   

    if(FAILED(hr = persistTask->Save(NULL,TRUE)))
        ReturnErrorMsg(hr, L"Failed to save task with IPersistFile");

    // create trigger
    CComPtr<ITaskTrigger> taskTrigger;
    CComPtr<IPersistFile> persistTrigger = NULL;    
    WORD wTrigNumber = 0;

    if (FAILED(hr = task->CreateTrigger(&wTrigNumber, &taskTrigger)))
        ReturnErrorMsg(hr, L"Failed to createTrigger");

    // create trigger description
    TASK_TRIGGER triggerStruct = {0};
    ZeroMemory ( &triggerStruct, sizeof (TASK_TRIGGER) );
    triggerStruct.cbTriggerSize = sizeof (TASK_TRIGGER);
    triggerStruct.TriggerType = TASK_TIME_TRIGGER_ONCE;

    // 10 minutes from now
    COleDateTime oDate = COleDateTime::GetCurrentTime() + COleDateTimeSpan(0, 0, 1, 0);

    triggerStruct.wBeginYear    = oDate.GetYear();
    triggerStruct.wBeginMonth   = oDate.GetMonth();
    triggerStruct.wBeginDay     = oDate.GetDay();
    triggerStruct.wStartHour    = oDate.GetHour();
    triggerStruct.wStartMinute  = oDate.GetMinute();

    // associate the trigger with the task
    if (FAILED(hr = taskTrigger->SetTrigger(&triggerStruct)))
        ReturnErrorMsg(hr, L"Failed to set trigger for the task");

    if (FAILED(hr = task->QueryInterface(IID_IPersistFile, (void **) &persistTrigger)))
        ReturnErrorMsg(hr, L"Failed to get IPersistFile for trigger");

    if (FAILED(hr = persistTrigger->Save(NULL, FALSE)))
        ReturnErrorMsg(hr, L"Failed to save trigger");

    if (FAILED(hr = task->Run()))
        ReturnErrorMsg(hr, L"Failed to run task");

    return S_OK;
} 
```

# php - codeigniter 的 url 问题

> ID：14988450
> 
> 赞同：1
> 
> 时间：2013-02-20T19:37:04.720
> 
> 标签：php, codeigniter

我在[以下 url](http://helios.hud.ac.uk/u0862025/CodeIgniter/index.php/form)有一个示例，它将用户发送到基本表单。

表单的代码如下；

```
<?php  echo validation_errors(); ?>

<?php echo form_open('form'); ?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<div><input type="submit" value="Submit" /></div>

</form> 
```

如果我理解正确，一旦用户按下“提交”，它应该返回名为“表单”的控制器。但它没有按预期工作。

我希望它提交给`index.php/form`，而不是提交给`/index.php/index.php/form`

随意在上面的 url 上测试网站并自己查看问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:51:09.870

我刚刚查看了您的源代码并注意到了这一点：

```
<form action="http://helios.hud.ac.uk/u0862025/CodeIgniter/index.php/index.php/form" method="post" accept-charset="utf-8"> 
```

其中显示两个“index.php”。这可能意味着您在基本 url 和索引页面配置中设置了“index.php”。您应该从这些来源之一中删除“index.php”，最好从您的 base_url 中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:32:39.170

检查配置文件中的 base_url()。如果它是正确的，那么你可以这样写：

```
<?php  echo validation_errors(); ?>

<?php echo form_open('controller_name/function_name'); 
      // controller name write your name of controller 
      // and function name write your function 
?>

<h5>Username</h5>
<input type="text" name="username" value="" size="50" />

<div><input type="submit" value="Submit" /></div>

<?php echo form_close(); // don't forget to close correct ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T07:35:45.237

我曾经遇到过这种情况，问题是我在`./application/config/config.php`文件中的 base_url 中包含了 index.php，请检查并删除（如果存在）。您也可以通过从 index_page 键中删除 index.php 来解决您的问题，但在 base_url 中包含 index.php 不是一个好习惯。

# spring - hibernate-cfg.xml 和属性占位符

> ID：14988451
> 
> 赞同：0
> 
> 时间：2013-02-20T19:37:07.303
> 
> 标签：spring, hibernate

我`hibernate-cfg.xml`使用构建文件中的 Ant hibernatecfg 任务创建我的文件。我`org.springframework.orm.hibernate3.LocalSessionFactoryBean`在 configLocation 属性 ( `classpath:hibernate.cfg.xml`) 中的 sessionFactory bean ( ) 中引用了该文件。在我的 bean 定义文件中，我还有一个 propertyConfigurer ( `org.springframework.beans.factory.config.PropertyPlaceholderConfigurer`)。

propertyConfigurer 会在`hibernate.cfg.xml`文件中进行替换，还是我必须硬编码该文件中的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:54:53.373

Spring 不会解析`hibernate.cfg.xml`.

# qt - 计数 QString 参数

> ID：14988455
> 
> 赞同：1
> 
> 时间：2013-02-20T19:37:15.833
> 
> 标签：qt, qstring

您知道如何计算 a 中可能参数的数量`QString`吗？

我想做类似的事情：

```
int argumentCount = countArguments(QString("This is the %1 argument, this is the %2 one")`); 
```

结果应该在哪里`argumentCount == 2`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:59:47.720

您可以使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)和`QString::count`函数：

```
QString str1("%1%2 test test %3 %4 %555");
int n = str1.count(QRegExp("%\\d+"));//n == 5 
```

**更新：** 因为 QString 的 arg 数字可以在 1-99 范围内，所以可以使用这个 reg-exp：

```
QString str1("%1%2 test test %3 %4 %555");
int n = str1.count(QRegExp("%\\d{1,2}(?!\\d)"));//n == 4 
```

# python - 新的 python dot 版本未检测到已安装的模块？

> ID：14988457
> 
> 赞同：0
> 
> 时间：2013-02-20T19:37:17.640
> 
> 标签：python, pip

使用 Python 2.6.7 的 /usr/local/bin 安装使其与 Python 2.6.1 分开（请参阅[在 Mac 上将 Python 升级到 2.6](https://stackoverflow.com/questions/1541776/upgrade-python-to-2-6-on-mac)），当我尝试时，我的新 2.6.7 二进制文件找不到我的 2.6 模块运行代码。据我了解，2.6.1 和 2.6.7 应该共享模块，因为它们都是 2.6 模块。

```
ImportError: No module named unicodecsv 
```

如果我想使用我的新`/usr/local/bin/python`（2.6.7）来运行我的程序，我在使用 2.6.1 时安装了 pip 模块，我错过了哪些关键步骤？路径问题？使用`/usr/bin/python`仍然可以毫无问题地导入模块。

我已经确认`/usr/local/bin/pip install unicodecsv`（和`pip-2.6 install`）只是告诉我我已经拥有了我需要的东西：

```
Requirement already up-to-date: unicodecsv in /Library/Python/2.6/site-packages 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:56:52.490

`python -c "import sys; print sys.path"`在知道模块在哪里获得正确路径的表现良好的二进制文件上使用。（谢谢你，[乔恩克莱门茨](https://stackoverflow.com/users/1252759/jon-clements)。）

创建或更新`PYTHONPATH`环境变量以捕获这些路径，以便您的新二进制文件搜索正确的位置。

例如，在 bash 中，只需将其添加到`.bash_profile`： `EXPORT PYTHONPATH=path:from:above:sys_path:inquiry`

然后重新执行激活：`. ~/.bash_profile`

# algorithm - 元素混合算法

> ID：14988458
> 
> 赞同：0
> 
> 时间：2013-02-20T19:37:18.660
> 
> 标签：algorithm, mixing

不确定标题。

这是我需要的。

例如，让这组元素 20*A、10*B、5*C、5*D、2*E、1*F 我需要混合它们，所以没有两个相同的元素彼此相邻，我也可以例如说我不希望 B 和 C 彼此相邻。元素必须均匀分布（如果有 2 个 E，则一个应该接近开始/第一半，第二个接近结束/后半。元素的数量当然可以改变。

我还没有做过这样的事情。是否有这种算法的一些知识库，我在哪里可以找到一些提示和方法来解决这种问题，还是我必须自己做所有的数学？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:30:09.857

我认为解决方案很简单。

`x`从一个初始化为值的数组开始，`empty`这样您需要放置的每个项目都有一个空间。

然后，对于`(item, frequency)`按频率降序排列的每一对，从第一个时隙开始在交替时隙中分配`item`值。`x``empty`

以下是它对您的示例的工作方式：

```
20*A    A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A
10*B    ABABABABABABABABABABA_A_A_A_A_A_A_A_A_A
 5*C    ABABABABABABABABABABACACACACACA_A_A_A_A
 2*E    ABABABABABABABABABABACACACACACAEAEA_A_A
 1*F    ABABABABABABABABABABACACACACACAEAEAFA_A 
```

此时我们失败了，因为`x`仍然有一个空槽。请注意，我们可以从一开始就确定这一点，因为我们需要在 s 之间至少有 19 个插槽`A`，但我们只有 18 个其他项目。

**更新**

列奥尼达斯现在解释说，物品应该“均匀”分布（也就是说，如果我们有 k 个特定种类的物品，并且有 n 个插槽要填充，那么 n/k 个插槽的每个“桶”必须包含一个该类型的物品。

我们可以通过分散分配而不是简单地使用交替插槽来适应这种限制。在这种情况下（让我们假设 2 Fs，这样我们就可以解决这个问题），我们会有

```
20*A    A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A_A
10*B    ABA_ABA_ABA_ABA_ABA_ABA_ABA_ABA_ABA_ABA
 5*C    ABACABA_ABACABA_ABACABA_ABACABA_ABACABA
 2*E    ABACABAEABACABA_ABACABAEABACABA_ABACABA
 2*F    ABACABAEABACABAFABACABAEABACABAFABACABA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:42:29.373

你可以递归地解决这个问题：

```
def generate(lastChar, remDict):
    res = []
    for i in remDict:
        if i!=lastChar):
            newRemDict = remDict
            newRemDict[i]-=1
            subres = generate(i,newRemDict)
            res += [i+j for j in subres]
    return res 
```

请注意，我忽略了角落条件和许多需要完成的检查。但只显示了核心递归。如果剩余字母中有超过一半+1是同一个字母，您也可以退出追求一个分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T16:37:17.223

我遇到了类似的问题，在评估了各种指标后，我想出了抓取第一个通过源数组的比例小于通过结果数组的比例的项目的想法。在某些情况下，所有这些值都可能显示为 1，例如，在合并一组偶数数组的中途 - 一切都完成了一半 - 所以在这种情况下我从第一个数组中抓取一些东西。

该解决方案确实使用了源数组顺序，这是我想要的。如果调用例程想要合并数组 A、B 和 C，其中 A 有 3 个元素，而 B 和 C 有 2 个元素，我们应该得到 A,B,C,A,B,C,A，而不是 A,C,B ,A,C,B,A 或其他可能性。我发现选择我的第一个“过期”的源数组（通过比例低于我们的整体进度），我得到了一个很好的所有数组间距。

Python 中的源代码：@classmethod def intersperse_arrays(cls, arrays: list): # 这里的一般想法是在我们下降时在所有数组之间产生尽可能平衡的结果。

```
 # Make sure we don't have any component arrays of length 0 to worry about.
    arrays = [array for array in arrays if len(array) > 0]

    # Handle basic cases:
    if len(arrays) == 0:
        return []
    if len(arrays) == 1:
        return arrays[0]

    ret = []
    num_used = []
    total_count = 0
    for j in range(0, len(arrays)):
        num_used.append(0)
        total_count += len(arrays[j])

    while len(ret) < total_count:
        first_overdue_array = None
        first_remaining_array = None
        overall_prop = len(ret) / total_count

        for j in range(0, len(arrays)):
            # Continue if this array is already done.
            if len(arrays[j]) <= num_used[j]:
                continue
            current_prop = num_used[j] / len(arrays[j])
            if current_prop < overall_prop:
                first_overdue_array = j
                break
            elif first_remaining_array is None:
                first_remaining_array = j

        if first_overdue_array is not None:
            next_array = first_overdue_array
        else:
            # Think this only happens in an exact tie.  (Halfway through all arrays, for example.)
            next_array = first_remaining_array

        if next_array is None:
            log.error('Internal error in intersperse_arrays')
            break   # Shouldn't happen - hasn't been seen.

        ret.append(arrays[next_array][num_used[next_array]])
        num_used[next_array] += 1

    return ret 
```

在给出的示例中使用时，我得到：

```
ABCADABAEABACABDAFABACABADABACDABAEABACABAD 
```

（看起来很合理。）

# java - 如何在 Java 日历 API 中使用儒略日数？

> ID：14988459
> 
> 赞同：8
> 
> 时间：2013-02-20T19:37:20.170
> 
> 标签：java, date, calendar, timestamp, julian-date

Julian Day Numbers 是一种将时间戳表示为自 UTC 公元前 4713 年 1 月 1 日中午以来的连续天数（和小数天数）的方法 Java 7 SE API 不包含对这种格式的支持。使用过 SQLite 数据库的开发人员可能使用过 strftime() 函数提供的原生 Julian Day 支持。

将时间戳表示为儒略日数的优点包括：

*   日期和时间可以以原始数据类型（双精度）表示为毫秒精度
*   一年中的几天比一天中的几秒钟更具体
*   如果这种精度不重要，则绕过“闰秒”问题
*   日期之间的天数算术是微不足道的；排序优先级很容易确定
*   非常轻巧

缺点

*   Java 日期/时间 API 没有对 JDN 的内置支持
*   不适合非常精确的时间测量
*   仅针对 UTC 定义，必须从 UTC 映射到本地时间
*   不适合向最终用户展示；必须在显示前转换/格式化

儒略日数常用于天文计算，其定义高度标准化并被接受。同样，修改后的儒略日数（从 UTC 时间 1858 年 11 月 17 日午夜开始计算）是标准定义并用于航空航天应用（参见[http://tycho.usno.navy.mil/mjd.html](http://tycho.usno.navy.mil/mjd.html)）。

对于广泛使用日期/时间算术或时间排序的应用程序（或者如果持久化轻量级原语比持久化时间戳更有吸引力），在内部将日期和时间表示为 JDN 或 MJD 可能对您有意义。

以下代码定义了便于使用 Java 日期/时间/日历 API 使用儒略日数或修改后的儒略日数的函数。该代码基于 Jean Meeus 的“Astronomical Algorithms”，1991 年第 1 版中发表的算法。

```
public class JulianDay {

    private static final int YEAR = 0;
    private static final int MONTH = 1;
    private static final int DAY = 2;
    private static final int HOURS = 3;
    private static final int MINUTES = 4;
    private static final int SECONDS = 5;
    private static final int MILLIS = 6;

    :
    :

    // Converts a timestamp presented as an array of integers in the following
    // order (from index 0 to 6): year,month,day,hours,minutes,seconds,millis
    // month (1-12), day (1-28 or 29), hours (0-23), min/sec (0-59) to a
    // Modified Julian Day Number.
    // For clarity and simplicity, the input values are assumed to be well-formed;
    // error checking is not implemented in the snippet.

    public static double toMJD(int[] ymd_hms) {

        int y = ymd_hms[YEAR];
        int m = ymd_hms[MONTH];
        double d = (double) ymd_hms[DAY];

        d = d + ((ymd_hms[HOURS] / 24.0) +
                 (ymd_hms[MINUTES] / 1440.0) +
                 (ymd_hms[SECONDS] / 86400.0) +
                 (ymd_hms[MILLIS] / 86400000.0));

        if (m == 1 || m == 2) {
            y--;
            m = m + 12;
        }

        double a = Math.floor(y / 100);
        double b = 2 - a + Math.floor(a / 4);

        return (Math.floor(365.25 * (y + 4716.0)) +
               Math.floor(30.6001 * (m + 1)) +
               d + b - 1524.5) - 2400000.5;  // for Julian Day omit the 2400000.5 term
    }

    // Converts an Modified Julian Day Number (double) to an integer array representing
    // a timestamp (year,month,day,hours,mins,secs,millis). Works for all positive JDN

    public static int[] toTimestamp(double mjd) {

        int ymd_hms[] = { -1, -1, -1, -1, -1, -1, -1 };
        int a, b, c, d, e, z;

        double jd = mjd + 2400000.5 + 0.5;  // if a JDN is passed as argument,
                                            // omit the 2400000.5 term
        double f, x;

        z = (int) Math.floor(jd);
        f = jd - z;

        if (z >= 2299161) {
            int alpha = (int) Math.floor((z - 1867216.25) / 36524.25);
            a = z + 1 + alpha - (int) Math.floor(alpha / 4);
        } else {
            a = z;
        }

        b = a + 1524;
        c = (int) Math.floor((b - 122.1) / 365.25);
        d = (int) Math.floor(365.25 * c);
        e = (int) Math.floor((b - d) / 30.6001);

        ymd_hms[DAY] = b - d - (int) Math.floor(30.6001 * e);
        ymd_hms[MONTH] = (e < 14)
                ? (e - 1)
                : (e - 13);
        ymd_hms[YEAR] = (ymd_hms[MONTH] > 2)
                ? (c - 4716)
                : (c - 4715);

        for (int i = HOURS; i <= MILLIS; i++) {
            switch(i) {
                case HOURS:
                    f = f * 24.0;
                    break;
                case MINUTES: case SECONDS:
                    f = f * 60.0;
                    break;
                case MILLIS:
                    f = f * 1000.0;
                    break;  
            }
            x = Math.floor(f);
            ymd_hms[i] = (int) x;
            f = f - x;
        }   

        return ymd_hms;
    }
} 
```

此处也提供了此答案：[How can I convert between a Java Date and Julian day number?](https://stackoverflow.com/questions/5655034/how-can-i-convert-between-a-java-date-and-julian-day-number) . 在当前帖子中，提供了该算法的参考资料以及更多讨论。上述算法的实现也不包含 Java API 依赖项（除了数学函数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-09T04:20:08.067

# java.time

Java 8 及更高版本中内置的 java.time 框架取代了与 Java 的最早版本捆绑在一起的旧日期时间类。请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。大部分功能已在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)[中](http://www.threeten.org/threetenbp/)进一步适应 Android 。

java.time 类包括[`java.time.temporal.JulianFields`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/JulianFields.html#MODIFIED_JULIAN_DAY). 此类提供了三种实现，[`TemporalField`](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/TemporalField.html)以对 Julian 仅日期值（无时间）提供有限支持。因此，您可以获得整数天数，而不是`double`问题中要求的天数。仔细阅读该类文档，以确保它符合您的期望。请注意，与大多数其他 java.time 类不同，这些 Julian 类忽略任何与 UTC 的偏移量或时区信息（始终被视为本地日期）。

*   [JULIAN_DAY](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/JulianFields.html#JULIAN_DAY) → 从第 0 天（即儒略历中的公元前 4713 年 1 月 1 日）开始的天数（-4713-11-24 [Gregorian](https://en.wikipedia.org/wiki/Gregorian_calendar)）。
*   [MODIFIED_JULIAN_DAY](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/JulianFields.html#MODIFIED_JULIAN_DAY) → 类似于 JULIAN_DAY 但减去`2_400_000.5`（基本上删除儒略日期数的前两位）。请注意，此处的结果比上述项目的儒略日期数**少一个 (-1) 。**
*   [RATA_DIE](https://docs.oracle.com/javase/8/docs/api/java/time/temporal/JulianFields.html#RATA_DIE) → 与上述两项类似，它是一个纪元的天数。但这里的时代是[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)的日期`0001-01-01`。

在此示例中，我们从 .的 ISO 8601 日期开始`1970-01-01`。

```
LocalDate localDate = LocalDate.of ( 1970 , 1 , 1 );
long julianDate = JulianFields.JULIAN_DAY.getFrom ( localDate );
long modifiedJulianDate = JulianFields.MODIFIED_JULIAN_DAY.getFrom ( localDate );
long rataDie = JulianFields.RATA_DIE.getFrom ( localDate ); 
```

> 本地日期：1970-01-01 | 朱利安日期：2440588 | 修改朱利安日期：40587 | 模数：719163

# 三十-额外

ThreeTen [-Extra](http://www.threeten.org/threeten-extra/)项目是未来可能添加到 java.time 的实验性试验场。该名称来自定义 java.time的[JSR 310 。](https://jcp.org/en/jsr/detail?id=310)

[该库在其儒略历系统](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/chrono/JulianChronology.html)（[年表](http://docs.oracle.com/javase/8/docs/api/java/time/chrono/Chronology.html)）中包括对儒略日期的额外支持。与 Java 8 中的支持一样，此库仅限于仅日期值（没有部分日期或时间）。

使用这个库，您可以实例化[`JulianDate`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/chrono/JulianDate.html)对象。

许多方法和功能供您检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-19T06:18:09.443

我知道这不是 Java 日历 API，但也许你应该试试[Jodd](http://jodd.org)工具。

```
JulianDateStamp julianStamp = new JulianDateStamp(julianDays);
JDateTime jdate = new JDateTime(julianStamp);
Date date = new Date(jdate.getTimeInMillis()); 
```

这非常适合：

*   2113488,2746855323 -> 1074.06.01 18:35
*   2453479,5866961805 -> 2005.04.19 02:04

[阅读更多](http://jodd.org/doc/jdatetime.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:56:26.470

如果您愿意移出核心 JDK 类，那么[Joda](http://joda-time.sourceforge.net/ "乔达")可能是一个解决方案。Joda 支持儒略历系统。从他们的文档页面：

```
Chronology julianChrono = JulianChronology.getInstance();
DateTime dt = new DateTime(1066, 10, 14, 0, 0, 0, julianChrono); 
```

那将是儒略历系统中的黑斯廷斯战役 1066。

# javascript - Windows 8 WinJS 应用程序中的应用程序启动是否有唯一的会话 ID？

> ID：14988461
> 
> 赞同：1
> 
> 时间：2013-02-20T19:37:26.110
> 
> 标签：javascript, windows-8, winjs

每当用户启动应用程序时，我都会尝试获取唯一的会话 ID。每次用户进入应用程序时都应创建此 ID。Windows 8 WinJS API 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:43:00.857

由于随机性和非常非常非常罕见的冲突机会（重复 id），会话 ID 是并且可能将始终基于 GUID

如果使用 csharp（我知道你不在这里，我会解决这个问题），只需在 cs 中的应用程序启动时创建一个

```
 var id = Guid.NewGuid(); 
```

由于您使用的是 WinJS，因此没有内置的 Guid 支持，因此您可以创建一个 Windows Store 组件以与您的应用程序一起分发，从而使用 csharp 来创建它，或者在 JavaScript 中生成一个从（请赞成源 SO post如果适用，请在此处链接）：

[在 JavaScript 中创建 GUID/UUID？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)

```
 function s4() {
  return Math.floor((1 + Math.random()) * 0x10000)
             .toString(16)
             .substring(1);
};

function guid() {
  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
         s4() + '-' + s4() + s4() + s4();
}

var uuid = guid(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:57:55.657

这是我选择的 GUID 创建功能...

```
createGuid: function () {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    }); 
```

如果你看它太久，你的头会爆炸，所以只需插入并使用它:)

# java - 无法通过 Spring 加载数据库驱动程序，但可以在类路径中手动找到它

> ID：14988464
> 
> 赞同：0
> 
> 时间：2013-02-20T19:37:42.803
> 
> 标签：java, spring, tomcat

尝试使用在 Tomcat 下运行的 Spring 创建数据源时，我在数据库驱动程序类上遇到 ClassNotFoundException。但是，我能够直接从同一个数据访问组件（通过`Class.forName`和`getClass().getClassLoader().loadClass()`）加载驱动程序类。驱动程序 jar 仅安装在一处 ( `$CATALINA_HOME/lib`)。

Spring 配置文件中的数据源定义：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

Spring 配置文件中的 DAO 定义：

```
<bean id="countryDao" class="com.mycompany.pmo.dao.CountryDao">
    <constructor-arg ref="dataSource"/>
</bean> 
```

DAO 本身：

```
public class CountryDao {
    private NamedParameterJdbcTemplate jdbcTemplate;

    public CountryDao(DataSource dataSource) {
        jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
    }

    public List<Country> getCountries() {
        //I can manually load the driver class here
        String sql = "select * from ref.country";

        Map<String, Object> namedParameters = new HashMap<String, Object>();
        //next line is line 34, where the stack trace starts
        return jdbcTemplate.query(sql, namedParameters,new CountryMapper());
    }
} 
```

堆栈跟踪：

```
Feb 20, 2013 2:18:35 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/PMO] threw exception [Request processing failed; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class '"com.microsoft.sqlserver.jdbc.SQLServerDriver"'] with root cause
java.lang.ClassNotFoundException: "com.microsoft.sqlserver.jdbc.SQLServerDriver"
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.commons.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1420)
    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:662)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:702)
    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:166)
    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:172)
    at com.mycompany.pmo.dao.CountryDao.getCountries(CountryDao.java:34) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:44:49.547

`jar`不应该在`$CATALINA_HOME/lib`. 它应该在`WEB-INF/lib`您的网络应用程序中。我相信`$CATALINA_HOME/lib`会被用来加载和运行`Tomcat`，但是你的app类路径依赖是从`WEB-INF/lib`.

如果您在 IDE 中开发并在其中运行程序，则可能还必须将 jar 添加到项目构建路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:50:15.433

正如@Sotirios Delimanolis 提到的（+1）尝试将罐子放在`WEB-INF/lib`您的应用程序下。

使用您的手动代码找到该类并且无法通过 Spring 找到该类的事实表明问题出在类加载器中。当您调用时，`Class.forName()`您肯定使用的是系统类加载器，因此该类是从 catalina lib 目录加载的。我无法解释为什么当你`getClass().getClassLoader().loadClass()`从你的 DAO 调用它时它会起作用：在这种情况下，应该使用相同的应用程序类加载器。但可能我对 Spring 本身如何与类加载器一起玩的了解不够深入。

# c# - 从自定义界面使用 SVN 命令

> ID：14988465
> 
> 赞同：0
> 
> 时间：2013-02-20T19:37:43.560
> 
> 标签：c#, .net, windows, svn, command-line

我正在寻找自动化可用于 TortoiseSVN 的 GUI。我不想使用提供的网址并手动输入网址，而是想保存我每天切换到的各种网址，然后单击按钮将我的工作副本切换到我选择的一个。

TortioseSVN 的“TortioseProc.exe Switch”命令在未来版本 (1.8) 之前不支持 /url 参数，这使我无法将这些轻松嵌入到我们内部网某处的锚标记（由 Tortiose 支持）中。

使用与 1.7 版本兼容的标准 svn CLI，我能够执行切换并自动关闭命令行，但是我不知道如何从 Web 界面执行这些操作，因为我不熟悉桌面开发我不知道一个合理的桌面解决方案。

我来找你 StackOverflow，希望你知道一个轻量级的桌面替代方案，它不需要在用户端进行太多设置，或者更好的是（网络开发人员）网络解决方案。

我想澄清一下，我不是在寻找实际的代码，而是在寻找能够让我满足这些要求的库或语言，因为我希望在我的工作场所向更多的开发人员开放这个解决方案，并且更希望能够轻松采用的东西（不是一个凌乱的设置）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:44:31.053

从 Windows/.NET 应用程序（无论是 IIS 中的 ASP.NET 还是独立应用程序），最好的方法是[SharpSVN](http://sharpsvn.open.collab.net)。

第二个地方是围绕命令行客户端编写一个包装器。

# mysql - mysql查询一对多关系

> ID：14988467
> 
> 赞同：0
> 
> 时间：2013-02-20T19:37:52.920
> 
> 标签：mysql, sql

```
+---------+    +-----------+   +---------+
| USER    |    | USER_LANG |   | LANG    |
| id_user |    | id_user   |   | id_lang |
| name    |    | id_lang   |   | name    |
|         |    | years     |   |         |
+---------+    +-----------+   +---------+ 
```

我想编写查询以同时在数据库中保存来自用户和 user_lang 的数据......是否有一些插入连接或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:45:57.263

尝试这个

```
 INSERT INTO LANG (id_lang,name) 
   VALUES    (SELECT ul.id_lang ,u.name 
              FROM `USER` u
              INNER JOIN `USER_LANG` ul 
              ON  u.id_user = ul.id_user 
              ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:44:43.343

如果表结构相同；这是可能的。但在您的情况下，您将不得不使用多个查询。如果要确保表数据之间的完整性，请使用存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:40:29.160

不，没有。您一次只能从多个表中选择或删除。

# ios - 将 UIBarButtonSystemItemAdd 推送到不同的视图控制器

> ID：14988472
> 
> 赞同：0
> 
> 时间：2013-02-20T19:38:21.447
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller

我正在尝试将添加按钮推送到不同的视图控制器，但我没有使用情节提要。该按钮出现，但单击时不执行任何操作。这是我的代码：

```
-(void)pushLogin
{
    [self.navigationController pushViewController:[[AddListingViewController alloc] init]   animated:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.navigationItem.title = @"Listings";

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc]
        initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
                             target:nil
                                  action:@selector(pushLogin)];
    self.navigationItem.rightBarButtonItem = addButton;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:40:52.963

Target 应该是 viewcontroller，而不是 nil

```
 UIBarButtonItem *addButton = [[UIBarButtonItem alloc]
        initWithBarButtonSystemItem:UIBarButtonSystemItemAdd
                             target:self
                                  action:@selector(pushLogin)]; 
```

# c#-4.0 - 通过 BookSleeve 反序列化 RedisMessage 的正确方法是什么？

> ID：14988473
> 
> 赞同：0
> 
> 时间：2013-02-20T19:38:21.813
> 
> 标签：c#-4.0, deserialization, booksleeve

我创建了以下单例类来处理 Redis 连接，并公开 BookSleeve 功能：

```
public class RedisConnection
{
    private static RedisConnection _instance = null;
    private BookSleeve.RedisSubscriberConnection _channel;
    private readonly int _db;
    private readonly string[] _keys;                        // represent channel name

    public BookSleeve.RedisConnection _connection;

    /// <summary>
    /// Initialize all class parameters
    /// </summary>
    private RedisConnection(string serverList, int db, IEnumerable<string> keys) 
    {
        _connection = ConnectionUtils.Connect(serverList);
        _db = db;
        _keys = keys.ToArray();

        _connection.Closed += OnConnectionClosed;
        _connection.Error += OnConnectionError;

        // Create a subscription channel in redis
        _channel = _connection.GetOpenSubscriberChannel();

        // Subscribe to the registered connections
        _channel.Subscribe(_keys, OnMessage);

        // Dirty hack but it seems like subscribe returns before the actual
        // subscription is properly setup in some cases
        while (_channel.SubscriptionCount == 0)
        {
            Thread.Sleep(500);
        }
    }

    /// <summary>
    /// Do something when a message is received
    /// </summary>
    /// <param name="key"></param>
    /// <param name="data"></param>
    private void OnMessage(string key, byte[] data)
    {
        // since we are just interested in pub/sub, no data persistence is active
        // however, if the persistence flag is enabled, here is where we can save the data

        // The key is the stream id (channel)
        //var message = RedisMessage.Deserialize(data);
        var message = Helpers.BytesToString(data);

        if (true) ;

        //_publishQueue.Enqueue(() => OnReceived(key, (ulong)message.Id, message.Messages));
    }

    public static RedisConnection GetInstance(string serverList, int db, IEnumerable<string> keys) 
    {
        if (_instance == null)
        {
            // could include some sort of lock for thread safety
            _instance = new RedisConnection(serverList, db, keys);
        }

        return _instance;
    }

    private static void OnConnectionClosed(object sender, EventArgs e)
    {
        // Should we auto reconnect?
        if (true)
        {
            ;
        }
    }

    private static void OnConnectionError(object sender, BookSleeve.ErrorEventArgs e)
    {
        // How do we bubble errors?
        if (true)
        {
            ;
        }
    }
} 
```

由于以下错误，在`OnMessage()`,`var message = RedisMessage.Deserialize(data);`中被注释掉：

> RedisMessage 由于其保护级别而无法访问。

RedisMessage 是 BookSleeve 中的一个抽象类，我有点不明白为什么我不能使用它。

我遇到了这个问题，因为当我向通道 (pub/sub) 发送消息时，我可能想在 OnMessage() 中对它们做一些事情——例如，如果设置了持久性标志，我可能会选择开始记录数据。问题是此时数据已序列化，我希望将其反序列化（为字符串）并将其保存在 Redis 中。

这是我的测试方法：

```
 [TestMethod]
    public void TestRedisConnection()
    {
        // setup parameters
        string serverList = "dbcache1.local:6379";
        int db = 0;

        List<string> eventKeys = new List<string>();
        eventKeys.Add("Testing.FaucetChannel");

        BookSleeve.RedisConnection redisConnection = Faucet.Services.RedisConnection.GetInstance(serverList, db, eventKeys)._connection;

        // broadcast to a channel
        redisConnection.Publish("Testing.FaucetChannel", "a published value!!!");

    } 
```

由于我无法使用该`Deserialize()`方法，因此我创建了一个静态帮助器类：

```
public static class Helpers
{
    /// <summary>
    /// Serializes a string to bytes
    /// </summary>
    /// <param name="val"></param>
    /// <returns></returns>
    public static byte[] StringToBytes(string str)
    {
        try
        {
            byte[] bytes = new byte[str.Length * sizeof(char)];
            System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
            return bytes;
        }
        catch (Exception ex) 
        { 
            /* handle exception omitted */
            return null;
        }
    }

    /// <summary>
    /// Deserializes bytes to string
    /// </summary>
    /// <param name="bytes"></param>
    /// <returns></returns>
    public static string BytesToString(byte[] bytes)
    {
        string set;
        try
        {
            char[] chars = new char[bytes.Length / sizeof(char)];
            System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
            return new string(chars);
        }
        catch (Exception ex)
        {
            // removed error handling logic!
            return null;
        }
    }

} 
```

不幸的是，这没有正确地将字符串反序列化回其原始形式，我得到的是这样的：⁡异汢獩敨⁤庆畲㩥ㄠ，而不是实际的原始文本。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:02:58.067

`RedisMessage` represents a pending request that is about to be sent to the server; there are a few concrete implementations of this, typically relating to the nature and quantity of the parameters to be sent. It makes *no sense* to "deserialize" (or even "serialize") a `RedisMessage` - that is not their purpose. The only thing it is *sensible* to do is to `Write(...)` them to a `Stream`.

If you want *information* about a `RedisMessage`, then `.ToString()` has an overview, but this is not round-trippable and is frankly intended for debugging.

`RedisMessage` is an `internal` class; an implementation detail. Unless you're working on a pull request to the core code, you should never need to interact with a `RedisMessage`.

At a similar level, there is `RedisResult` which represents a response coming back from the server. If you want a quick way of getting data from that, fortunately that is much simpler:

```
object val = result.Parse(true); 
```

(the `true` means "speculatively test to see if the data looks like a `string`"). But again, this is an `internal` implementation detail that you should not have to work with.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:06:28.260

显然这是一个编码类型问题，同时，稍微看一下[这个链接](http://beecy.net/post/2009/01/10/byte-array-to-string-csharp.aspx)，我简单地添加了 UTF8 的编码类型，输出看起来很好：

```
 #region EncodingType enum
    /// <summary> 
    /// Encoding Types. 
    /// </summary> 
    public enum EncodingType 
{ 
    ASCII, 
    Unicode, 
    UTF7, 
    UTF8 
} 
#endregion 

#region ByteArrayToString 
/// <summary> 
/// Converts a byte array to a string using Unicode encoding. 
/// </summary> 
/// <param name="bytes">Array of bytes to be converted.</param> 
/// <returns>string</returns> 
public static string ByteArrayToString(byte[] bytes) 
{ 
    return ByteArrayToString(bytes, EncodingType.Unicode); 
} 
/// <summary> 
/// Converts a byte array to a string using specified encoding. 
/// </summary> 
/// <param name="bytes">Array of bytes to be converted.</param> 
/// <param name="encodingType">EncodingType enum.</param> 
/// <returns>string</returns> 
public static string ByteArrayToString(byte[] bytes, EncodingType encodingType) 
{ 
    System.Text.Encoding encoding=null; 
    switch (encodingType) 
    { 
        case EncodingType.ASCII: 
            encoding=new System.Text.ASCIIEncoding(); 
            break;    
        case EncodingType.Unicode: 
            encoding=new System.Text.UnicodeEncoding(); 
            break;    
        case EncodingType.UTF7: 
            encoding=new System.Text.UTF7Encoding(); 
            break;    
        case EncodingType.UTF8: 
            encoding=new System.Text.UTF8Encoding(); 
            break;    
    } 
    return encoding.GetString(bytes); 
} 
#endregion 
```

**- 更新 -**

更简单：`var message = Encoding.UTF8.GetString(data);`

# ssl - Dropwizard 和 SSL

> ID：14988478
> 
> 赞同：12
> 
> 时间：2013-02-20T19:38:29.323
> 
> 标签：ssl, configuration, https, dropwizard

我似乎无法将 Dropwizard 配置为使用 ssl。

我创建了一个密钥

```
openssl genrsa -des3 -out server.key 1024 
```

和证书

```
openssl req -new -key server.key -days 365 -out server.crt -x509 
```

并将其导入密钥库

```
keytool -import -file server.crt -keystore keystore.jks 
```

从那里，我将 keystore.jks 文件与 dropwizard 的 config.yaml 文件一起放入 /src/main/resources。

然后我尝试根据手册为dropwizard配置ssl：

```
http:
  ssl:
    keyStore: ./keystore.jks
    keyStorePassword: ******** 
```

但是，当我导航到登录页面时，它只能在没有 https: 的情况下工作，并在使用 https 时给出错误 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL 协议错误。

我还缺少其他步骤吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T15:21:01.460

我在邮件列表上发帖，Codahale 很快就做出了回应。我没有在 http: 部分下的配置 yaml 文件中设置非阻塞+ssl 连接器。投入

```
connectorType: nonblocking+ssl 
```

修复了一切。感谢 dropwizard 向导！

# python - 熊猫版的 rbind

> ID：14988480
> 
> 赞同：96
> 
> 时间：2013-02-20T19:38:34.887
> 
> 标签：python, r, dataframe, pandas

在 R 中，您可以通过使用 rbind 将一个数据帧的列粘贴到另一个数据帧的底部来组合两个数据帧。在 pandas 中，你如何完成同样的事情？这似乎异常困难。

由于我不明白的原因，使用附加会导致可怕的混乱，包括 NaN 和其他事情。我只是想“绑定”两个看起来像这样的相同帧：

编辑：我以一种愚蠢的方式创建 DataFrame，这导致了问题。附加=rbind 到所有意图和目的。请参阅下面的答案。

```
 0         1       2        3          4          5        6                    7
0   ADN.L  20130220   437.4   442.37   436.5000   441.9000  2775364  2013-02-20 18:47:42
1   ADM.L  20130220  1279.0  1300.00  1272.0000  1285.0000   967730  2013-02-20 18:47:42
2   AGK.L  20130220  1717.0  1749.00  1709.0000  1739.0000   834534  2013-02-20 18:47:43
3  AMEC.L  20130220  1030.0  1040.00  1024.0000  1035.0000  1972517  2013-02-20 18:47:43
4   AAL.L  20130220  1998.0  2014.50  1942.4999  1951.0000  3666033  2013-02-20 18:47:44
5  ANTO.L  20130220  1093.0  1097.00  1064.7899  1068.0000  2183931  2013-02-20 18:47:44
6   ARM.L  20130220   941.5   965.10   939.4250   951.5001  2994652  2013-02-20 18:47:45 
```

但是我得到了一些可怕的东西：

```
 0         1        2        3          4         5        6                    7       0         1       2        3          4          5        6                    7
0     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   ADN.L  20130220   437.4   442.37   436.5000   441.9000  2775364  2013-02-20 18:47:42
1     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   ADM.L  20130220  1279.0  1300.00  1272.0000  1285.0000   967730  2013-02-20 18:47:42
2     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   AGK.L  20130220  1717.0  1749.00  1709.0000  1739.0000   834534  2013-02-20 18:47:43
3     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN  AMEC.L  20130220  1030.0  1040.00  1024.0000  1035.0000  1972517  2013-02-20 18:47:43
4     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   AAL.L  20130220  1998.0  2014.50  1942.4999  1951.0000  3666033  2013-02-20 18:47:44
5     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN  ANTO.L  20130220  1093.0  1097.00  1064.7899  1068.0000  2183931  2013-02-20 18:47:44
6     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   ARM.L  20130220   941.5   965.10   939.4250   951.5001  2994652  2013-02-20 18:47:45
0     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   ADN.L  20130220   437.4   442.37   436.5000   441.9000  2775364  2013-02-20 18:47:42
1     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   ADM.L  20130220  1279.0  1300.00  1272.0000  1285.0000   967730  2013-02-20 18:47:42
2     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN   AGK.L  20130220  1717.0  1749.00  1709.0000  1739.0000   834534  2013-02-20 18:47:43
3     NaN       NaN      NaN      NaN        NaN       NaN      NaN                  NaN 
```

我不明白为什么。我开始想念 R :(

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-20T20:05:49.260

啊，这与我创建 DataFrame 的方式有关，与我如何组合它们无关。总而言之，如果您使用循环和如下语句创建框架：

```
Frame = Frame.append(pandas.DataFrame(data = SomeNewLineOfData)) 
```

**您必须忽略索引**

```
Frame = Frame.append(pandas.DataFrame(data = SomeNewLineOfData), ignore_index=True) 
```

或者您稍后在组合数据时会遇到问题。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2018-08-17T13:37:22.180

[`pd.concat`](https://pandas.pydata.org/pandas-docs/stable/merging.html)将服务[`rbind`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/cbind.html)于 R中的目的。

```
import pandas as pd
df1 = pd.DataFrame({'col1': [1,2], 'col2':[3,4]})
df2 = pd.DataFrame({'col1': [5,6], 'col2':[7,8]})
print(df1)
print(df2)
print(pd.concat([df1, df2])) 
```

结果将如下所示：

```
 col1  col2
0     1     3
1     2     4
   col1  col2
0     5     7
1     6     8
   col1  col2
0     1     3
1     2     4
0     5     7
1     6     8 
```

如果您仔细阅读文档，它还将解释其他操作，如 cbind、..etc。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-02-20T20:14:06.343

这对我有用：

```
import numpy as np
import pandas as pd

dates = np.asarray(pd.date_range('1/1/2000', periods=8))
df1 = pd.DataFrame(np.random.randn(8, 4), index=dates, columns=['A', 'B', 'C', 'D'])
df2 = df1.copy()
df = df1.append(df2) 
```

产量：

```
 A         B         C         D
2000-01-01 -0.327208  0.552500  0.862529  0.493109
2000-01-02  1.039844 -2.141089 -0.781609  1.307600
2000-01-03 -0.462831  0.066505 -1.698346  1.123174
2000-01-04 -0.321971 -0.544599 -0.486099 -0.283791
2000-01-05  0.693749  0.544329 -1.606851  0.527733
2000-01-06 -2.461177 -0.339378 -0.236275  0.155569
2000-01-07 -0.597156  0.904511  0.369865  0.862504
2000-01-08 -0.958300 -0.583621 -2.068273  0.539434
2000-01-01 -0.327208  0.552500  0.862529  0.493109
2000-01-02  1.039844 -2.141089 -0.781609  1.307600
2000-01-03 -0.462831  0.066505 -1.698346  1.123174
2000-01-04 -0.321971 -0.544599 -0.486099 -0.283791
2000-01-05  0.693749  0.544329 -1.606851  0.527733
2000-01-06 -2.461177 -0.339378 -0.236275  0.155569
2000-01-07 -0.597156  0.904511  0.369865  0.862504
2000-01-08 -0.958300 -0.583621 -2.068273  0.539434 
```

如果您还没有使用最新版本的`pandas`我强烈建议升级。现在可以使用包含重复索引的 DataFrame 进行操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-20T00:42:37.267

```
import pandas as pd 
import numpy as np 
```

如果您有这样的**DataFrame**：

```
array = np.random.randint( 0,10, size = (2,4) )
df = pd.DataFrame(array, columns = ['A','B', 'C', 'D'], \ 
                           index = ['10aa', '20bb'] )  ### some crazy indexes
df

      A  B  C  D
10aa  4  2  4  6
20bb  5  1  0  2 
```

你想**添加**一些**NEW ROW**这是一个列表（或另一个可迭代对象）：

```
List = [i**3 for i in range(df.shape[1]) ]
List
[0, 1, 8, 27] 
```

**您应该使用zip()**函数将列表转换为字典，其中键等于 DataFrame 中的列：

```
Dict = dict(  zip(df.columns, List)  )
Dict
{'A': 0, 'B': 1, 'C': 8, 'D': 27} 
```

比您可以使用**append()**方法添加新字典：

```
df = df.append(Dict, ignore_index=True)
df
    A   B   C   D
0   7   5   5   4
1   5   8   4   1
2   0   1   8   27 
```

**注意**索引被删除。

是的，它不像R 中的**cbind()**那样简单:(

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-17T00:28:38.860

`dplyr`的`bind_rows`做同样的事情。

在 python 中，你可以这样做：

```
>>> from datar.all import bind_rows, head, tail
>>> from datar.datasets import iris
>>> 
>>> iris >> head(3) >> bind_rows(iris >> tail(3))
   Sepal_Length  Sepal_Width  Petal_Length  Petal_Width    Species
      <float64>    <float64>     <float64>    <float64>   <object>
0           5.1          3.5           1.4          0.2     setosa
1           4.9          3.0           1.4          0.2     setosa
2           4.7          3.2           1.3          0.2     setosa
3           6.5          3.0           5.2          2.0  virginica
4           6.2          3.4           5.4          2.3  virginica
5           5.9          3.0           5.1          1.8  virginica 
```

我是[`datar`](https://github.com/pwwang/datar)包的作者。如果您有任何问题，请随时提交问题。

# c - 了解代码示例是否受 CPU 限制或内存限制

> ID：14988481
> 
> 赞同：7
> 
> 时间：2013-02-20T19:38:37.417
> 
> 标签：c, performance, optimization, sse

对于那些致力于程序优化和性能调整的人来说，一个普遍的问题是，您如何确定您的代码是受 CPU 限制还是受内存限制？我总体上理解这些概念，但是如果我说“y”的负载和存储量以及“2y”的计算量，人们如何找到瓶颈？

您还可以弄清楚您将大部分时间花在哪里，并说，如果您在每次循环迭代中将“x”数量的数据加载到缓存中（如果它的内存受限），那么您的代码会运行得更快吗？除了反复试验，还有什么精确的方法可以确定这个“x”吗？

是否有任何工具可以使用，比如 IA-32 或 IA-64 架构？VTune 有帮助吗？

例如，我目前正在执行以下操作：

我有 26 个 8*8 复数双精度矩阵，我必须为这 26 个矩阵中的每一个执行一个长度为 8 的（~4000）个向量的 MVM（矩阵向量乘法）。我使用 SSE 来执行复数乘法。

```
/*Copy 26 matrices to temporary storage*/
for(int i=0;i<4000;i+=2){//Loop over the 4000 vectors 
    for(int k=0;k<26;k++){//Loop over the 26 matrices
       /*
        Perform MVM in blocks of '2' between kth matrix and 
        'i' and 'i+1' vector
       */     

    }
} 
```

26 个矩阵占用 26kb（L1 高速缓存为 32KB），我已将向量布局在内存中，这样我就有了 stride'1' 访问权限。一旦我对具有 27 个矩阵的向量执行 MVM，我就不会再次访问它们，所以我认为缓存阻塞不会有帮助。我使用了矢量化，但我仍然停留在 60% 的峰值性能上。

我尝试将 64 个向量复制到临时存储中，对于外部循环的每次迭代，我认为它们会在缓存中并提供帮助，但它只会降低性能。我尝试以下列方式使用 _mm_prefetch()：当我完成大约一半的矩阵时，我将下一个 'i' 和 'i+1' 向量加载到内存中，但这也没有帮助。

假设它的内存受限，我已经完成了所有这些，但我想确定。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:43:00.407

据我了解，最好的方法是分析您的应用程序/工作负载。根据输入数据，应用程序/工作负载的特性可能会有很大差异。然而，这些行为可以用几个[阶段](http://dl.acm.org/citation.cfm?id=859657)Ref [[2](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1261391&tag=1) , [3](http://dl.acm.org/citation.cfm?id=1899021) ] 来量化，并且直方图可以广泛地说明要优化的工作负载的最频繁路径。您提出的问题还需要针对架构的基准程序 [如 SPEC2006、PARSEC、Media bench 等]，并且很难笼统地回答（并且是计算机架构研究的一个积极部分）。但是，对于特定情况，可以针对不同的内存层次说明定量结果。您可以使用以下工具：

*   性能
*   O型材
*   VTune
*   LikWid
*   LLTng

和其他监控和模拟工具来获取应用程序的分析跟踪。您可以查看性能计数器，如 IPC、CPI（用于 CPU 绑定）和内存访问、缓存未命中、缓存访问，以及其他内存计数器以确定内存边界。如 IPC、每周期内存访问 (MPC)，通常用于确定应用程序/工作负载的内存边界。为了专门改进矩阵乘法，我建议使用[LAPACK](http://www.mathworks.com/company/newsletters/news_notes/clevescorner/winter2000.cleve.html)中的优化算法。

# java - 基元数组或对象初始化

> ID：14988492
> 
> 赞同：0
> 
> 时间：2013-02-20T19:39:06.847
> 
> 标签：java, string, initialization

字符串对象数组可以创建为

// 可接受的声明和初始化

```
line 1: String[]s = new String[2];
line 2: String[]s = new String[]{"a","b"}; 
```

// 下面的 init 对我来说也不错，但是编译器出错了

```
line 3: String[] s = new String[2] { "a", "b" }; 
```

**1) 为什么我不能在第 3 行**指定数组的大小？
2) 当我使用第 3 行创建数组时，字符串“a”和“b”是在堆上还是在字符串池中创建的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T19:40:20.903

1.  你不能同时初始化一个数组并指定它的大小，这只是多余的。

2.  所有字符串文字都存储在常量池中，并且发生在代码运行之前，即类加载时。

另请注意，`new String[]`使用初始化程序甚至是多余的：

```
String[] s = {"a","b"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:50:00.997

这样做是为了防止歧义。

如果 [] 中的数字与您传递的实际对象数量不匹配，系统该怎么办？

因此，数组的大小由传递给初始化程序的对象数定义。

* * *

第二个问题有点不对。Java 对象总是在堆上创建。

您的情况下的 String 对象取自 String 对象池，因为您使用文字，编译器可以轻松地在运行时实现它们的值。

# c - 释放指针

> ID：14988498
> 
> 赞同：3
> 
> 时间：2013-02-20T19:39:37.317
> 
> 标签：c, pointers, malloc

这只是一个一般性问题，但例如在 Windows 上，如果我创建一个指向要`hostent`使用的结构的指针，`gethostbyname()`我是否必须释放该指针的内存，或者它是否为我处理。我的假设是，由于我没有特别要求`malloc`这不是我的工作。任何人都可以为我澄清这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:41:44.670

根据msdn

> 由 gethostbyaddr 和 gethostbyname 函数返回的 hostent 结构的内存由 Winsock DLL 从线程本地存储内部分配。无论在线程上调用多少次 gethostbyaddr 或 gethostbyname 函数，都只分配和使用一个 hostent 结构。如果要在同一线程上对 gethostbyaddr 或 gethostbyname 函数进行其他调用，则必须将返回的 hostent 结构复制到应用程序缓冲区。否则，返回值将被同一线程上的后续 gethostbyaddr 或 gethostbyname 调用覆盖。当线程退出时，分配给返回的 hostent 结构的内部内存由 Winsock DLL 释放。

因此，唯一需要释放它的是将其内容复制到分配的内存中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:45:15.283

在这种情况下，`gethostbyname`您不必担心释放存储空间。

通常，返回指针的函数应该记录调用者对指针的责任。您可能需要释放它，将其传递给另一个函数，或者在这种情况下不必做任何事情。

作为[`strdup`](http://pubs.opengroup.org/onlinepubs/009604599/functions/strdup.html)反例，您应该调用`free`.

# .net - 获取 Windows 可执行文件的功能

> ID：14988499
> 
> 赞同：0
> 
> 时间：2013-02-20T19:39:48.350
> 
> 标签：.net, windows, reflection, executable

我正在寻找从 Windows 程序集（exe、dll、ocx）中检索函数枚举的解决方案。我相信 WMI 中有一些工具，但我找不到。它必须接近 .NET 的 System.Reflection 功能，但我需要独立分析 Windows 可执行平台，并且 System.Reflection 仅适用于 .NET 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:11:52.090

反射是某些语言的一个特性。一般的可执行文件或二进制文件可能不包含（很多）关于内部函数的信息。

PE 格式的二进制文件确实列出了导出的函数（尽管不一定按名称）。您可以使用 Visual Studio 附带的名为`dumpbin`. 例如，`dumpbin /exports`将列出导出的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T22:38:48.400

如果您想要完整的签名信息，这些是您的选择。

*   托管：您可以使用反射
*   COM：一些导出 COM 对象的二进制文件将支持[`IDispatch`](http://msdn.microsoft.com/en-us/library/ms221608.aspx)，这将允许您查询公开的 API。
*   对于其他一切，您将不得不去调试符号。如前所述，二进制文件不需要存储签名数据，因此它们不会保留它。您可以使用[`DIA`SDK](http://msdn.microsoft.com/en-us/library/x93ctkx8.aspx)查询 .PDB 文件，但请记住，大多数开发人员不会提供完整的符号文件。
*   如果您没有符号，那么任何导出函数的名称都是您将获得的最接近的东西（并且正是当符号不可用时调试器依赖的名称）。要以编程方式访问它，请参阅[`PE COFF`](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)规范。

# azure - 带有“.”的 ASP.NET MVC 路由 不在 Azure 中工作

> ID：14988502
> 
> 赞同：1
> 
> 时间：2013-02-20T19:39:54.787
> 
> 标签：azure, asp.net-mvc-4

我有简单的路线图，例如：

```
routes.MapRoute("Test", "test/{action}/{id}", new {controller = "Test", action = "Index", id = ""}); 
```

我的路线如下：

```
"/test/do-something/1.0.1" 
```

在 IIS7+ 上的本地测试和自托管 .NET 4.5 中完全可以正常工作

但是，当我在 Azure 中托管它时，它似乎存在包含两个“.”的 ID 的问题，告诉我“*您要查找的资源已被删除、名称已更改或暂时不可用。* ”。
当我更改它的路径时，`"/test/do-something/1"`它也可以在 Azure 上运行。

为什么 Azure 似乎禁止 ID 带有“。” 我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:36:35.493

我建议在您的 id 中使用“-”而不是“。” （句号），它在搜索引擎优化方面更友好。

如果你真的想让它与句点一起工作，你可以使用一个名为**URLScan**的工具。

[什么是 URLScan？](http://www.iis.net/learn/extensions/working-with-urlscan/urlscan-faq)

有一个配置选项：

> **AllowDotInPath=0**
> 
> 默认情况下，此选项设置为 0。如果此选项设置为 0，则 URLScan 拒绝任何包含多个句点 (.) 的请求。这可以防止通过在 URL 的路径信息或查询字符串部分中放置安全文件扩展名来伪装对危险文件扩展名的请求。例如，如果此选项...

[这](http://support.microsoft.com/kb/326444/en-us)是配置的链接。

# ruby - 在 Ruby 中，为什么堆栈跟踪中没有变量名？

> ID：14988504
> 
> 赞同：3
> 
> 时间：2013-02-20T19:39:58.270
> 
> 标签：ruby, debugging, exception, stack-trace

在具有关联（例如`Post belongs_to user`）的 rails 应用程序中，一个常见的例外是：

```
NoMethodError: undefined method `user' for nil:NilClass 
```

无处不在，这使初学者相信这`user`是零。为什么我们没有更直观的错误，例如以下？

```
NoMethodError: `@post' is a nil:NilClass and doesn't have the method `user' 
```

编辑：为什么这被否决了？这个问题是合法的。我想知道是否有技术原因阻止这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T19:48:59.740

首先，我不同意原来的说法。该消息清楚地表明 user 是未定义的方法，而不是变量或值。我不确定有人如何根据此消息认为 user 是一个变量。

但是，您的问题的答案是，在调用“用户”方法时，目标对象已经从引用它的任何变量中加载。调用“用户”的调用逻辑不知道该对象来自何处。它可能是一个局部变量、一个实例变量、一个常量……无法判断。此外，Rails 的“whiny nil”逻辑发生在 method_missing 实现中，远离对象的原始访问；原始变量查找的上下文甚至不再在范围内。

# php - FB.event.subscribe comment.create 在没有用户操作的情况下采取行动

> ID：14988508
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:40:06.800
> 
> 标签：php, facebook, if-statement, comments

好的，这是我的问题。一旦在 facebook 评论中发表评论（以通知作者已发表评论），我正在尝试将电子邮件发送给个别帖子的作者。评论框位于 K2 项目中（在 Joomla 中）。

FB.event.subscribe comment.create 正在工作，我只用 alert('fired'); 这很好用。但是当我输入 PHP 时，它只会开始向每次有人进入页面时给定的第一封电子邮件发送电子邮件。我如何让它仅在创建或添加评论时发送电子邮件？

```
<script>
    window.fbAsyncInit = function(){ 
        FB.Event.subscribe('comment.create', function(response){
            <?php
                if ($this->item->author->name = 'Author1'){
                    $to = "author1@mydomain.com";
                }else if ($this->item->author->name = 'author2'){
                    $to = "author2@mydomain.com";
                };
                $subject = "Test mail";
                $message = "Hello! This is a simple email message. live run";
                $from = "admin@mydomain.com";
                $headers = "From:" . $from;
                mail($to,$subject,$message,$headers);
            ?>;
        });
    };
</script> 
```

**编辑** 请[从外部文件中点击此链接 PHP 变量？](https://stackoverflow.com/questions/14992143/php-variable-from-external-file)有关此主题的完整解决方案以及我在这里尝试完成的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:42:02.607

PHP 在*服务器端*执行。在触发回调时，PHP 已经执行（请求页面时）。

相反，您需要在回调中对 PHP 脚本进行 AJAX 调用，该脚本将执行您需要执行的任何操作：

```
window.fbAsyncInit = function(){ 
    FB.Event.subscribe('comment.create', function(response){
        $.post('/sendemail.php');
    });
}; 
```

将其余代码放入`sendemail.php`

这假设您使用的是 jQuery。

**注意：**这是一个非常糟糕的主意，因为在没有任何验证的情况下，用户可以重复发送请求`sendemail.php`并从某人的邮箱中发送垃圾邮件。考虑安全性、速率限制等。

# ssis - 如何修复 SSIS 生成的平面文件中缺少的列值？

> ID：14988511
> 
> 赞同：1
> 
> 时间：2013-02-20T19:40:21.203
> 
> 标签：ssis

我有一个将数据导出到 .CSV 文件的平面文件目标。

在进行数据验证时，我注意到有些行缺少字段的值`Remarks`。

我面临的问题是并非所有行都缺少值，但只有其中一些行缺少值。

### 平面文件连接管理器设置：

*   列数据类型设置为**`DT_STR`**带长度**`200`**。
*   文本限定符是**`"`**
*   标题行分隔符是**`{CR}{LF}`**

以下是一些正确导出的示例值：

```
Multiple repairs # 20021089 
```

这里有几行似乎有问题：

```
1\. #20026982-exterior debirs and demo with permits
2\. ID # 20005495 hearing 
```

# java - Mysql数据库异常

> ID：14988513
> 
> 赞同：1
> 
> 时间：2013-02-20T19:40:22.053
> 
> 标签：java

**线程“main”java.lang.Error 中的异常：未解决的编译问题：类型不匹配：无法从 java.sql.Statement 转换为 com.mysql.jdbc.Statement**

> 我是java的初学者我正在尝试使用mysql数据库我已经从mysql.com下载了mysql-connector-java-5.1.23-bin.jar文件并且我已经将此jar文件添加到我的项目的构建路径中但是以下代码中有错误 **线程“main”java.lang.Error中的异常：未解决的编译问题：类型不匹配：无法从java.sql.Statement转换为com.mysql.jdbc.Statement**

* * *

```
package com.example.demo;

import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement;

public class DBConnect
{
private static final String userName = "root";
private static final String userpwd = "sverma";
private static final String CONN_STR = "jdbc:mysql://localhost:3306/phpweb_db";

public static void main(String[] args) throws SQLException
{

    Connection conn = null;
    Statement st = null;
    ResultSet rs = null;

    try
    {
        DriverManager.getConnection(CONN_STR, userName, userpwd);
        st=conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
        rs = st.executeQuery("select * from user");
        rs.last();
        System.out.println("No of rows: " + rs.getRow());

        // System.out.println("Connected Successfully...");
    }
    catch (SQLException e)
    {
        System.err.println(e);

    }
    finally
    {
        if (rs != null)
        {
            rs.close();
        }
        if (st != null)
        {
            st.close();
        }
        if (conn != null)
        {
            conn.close();
        }
    }
} 
```

}

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:46:16.743

错误的课程

```
import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement; 
```

应该

```
import java.sql.Connection;
import java.sql.Statement; 
```

* * *

事实上，java 将所有内容与特定的数据库引擎解耦。永远不需要导入 MySQL（或 ProgressSQL 或 ...）类。

为了让这些类在运行时可用，在`try`, 之后获得连接之前的第一件事是：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

这种技术将允许从配置文件中读取所有字符串，并编写独立于数据库的代码。

* * *

缺少：conn = ...

```
conn = DriverManager.getConnection(CONN_STR, userName, userpwd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-29T09:27:48.207

```
package com.example.demo;

import java.sql.*;

public class DBConnect
{
private static final String userName = "root";
private static final String userpwd = "sverma";
private static final String CONN_STR = "jdbc:mysql://localhost:3306/phpweb_db";

public static void main(String[] args) throws SQLException
{

    Connection conn;
    Statement st;
    ResultSet rs;

    try
    {
        Class.forName("com.mysql.jdbc.Driver");
        DriverManager.getConnection(CONN_STR, userName, userpwd);
        st=conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
        rs = st.executeQuery("select * from user");
        rs.last();
        System.out.println("No of rows: " + rs.getRow());

        // System.out.println("Connected Successfully...");
    }
    catch (SQLException e)
    {
        System.err.println(e);

    }
    finally
    {
        if (rs != null)
        {
            rs.close();
        }
        if (st != null)
        {
            st.close();
        }
        if (conn != null)
        {
            conn.close();
        }
    }
} 
```

# .htaccess - 确保 www. 在浏览器 URL 栏中

> ID：14988514
> 
> 赞同：0
> 
> 时间：2013-02-20T19:40:25.193
> 
> 标签：.htaccess, url, mod-rewrite, browser

当我输入我的网站地址时，它并不总是输入 www。在它面前。

这是因为我键入 domain.com 而不是添加 www。在前面，因为这样更快。

我必须使用什么代码来确保即使我输入 domain.com 它也总是添加 www。在前。

（我相信这与 .htaccess mod_rewrite 功能有关？

谢谢你，乍得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:47:41.513

在您的`.htaccess`文件中，添加以下行（替换`mywebsite.com`为您的真实网站）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    #redirects all requests to www.mywebsite.com
    RewriteCond %{HTTP_HOST} !^www\.mywebsite\.com
    RewriteRule (.*) http://www.mywebsite.com/$1 [R=301,L]
</IfModule> 
```

请注意，正如 google 建议[的](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=44231)那样，最好使用 301 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:47:33.157

```
//Rewrite to www
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com[nc]
RewriteRule ^(.*)$ http://www.domain.com/$1 [r=301,nc] 
```

# python - 条形图比较各个领域的数据

> ID：14988515
> 
> 赞同：1
> 
> 时间：2013-02-20T19:40:26.727
> 
> 标签：python, graph, matplotlib

我正在尝试比较两个不同模型的不同字段，并且每个字段的可接受值不同，即一个字段可以取一百万作为值，而另一个字段可以取 100 作为最大值。我想比较同一个条形图中的所有字段。

```
 field1  | field2  | field3
Mod1 | 468     | 28,000  | 800,000,000
Mod2 | 162     |  2,000  | 228,000,000 
```

我正在考虑取 Mod2 相对于 Mod1 的百分比（并将 Mod1 值视为 100%）并绘制条形图。这样，我们可以比较 Mod2 值与 Mod1 值有多小，并且所有不同的字段都可以轻松地放在同一个图表中（最大 y 值为 100）。在栏的顶部，提及实际值。

还有其他经典的方法吗？另外，如何使用 python matplotlib 实现上述想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:05:04.080

根据[Nicolas P. Rougier 在 matplotlib 教程的相应部分中](http://www.loria.fr/~rougier/teaching/matplotlib/#bar-plots)给出的示例，一个快速的解决方案是：

```
import numpy as np
import matplotlib.pylab as plt

mod1 = np.array([ 468, 28000, 800000000 ])
mod2 = np.array([ 162, 2000, 228000000 ])

proc = mod2.astype(float) / mod1.astype(float)

for ii, bar in enumerate(proc):
    plt.bar(ii, bar)
    plt.text(ii + 0.4, bar + 0.01, "%.2f" % bar, ha='center', va='bottom')
plt.ylim(0, 1.0)
plt.show() 
```

轴刻度、颜色等，然后​​您可以根据需要轻松微调。

# css - 覆盖 Wordpress 默认样式表

> ID：14988518
> 
> 赞同：0
> 
> 时间：2013-02-20T19:40:33.933
> 
> 标签：css, wordpress, wordpress-theming

再会。

我正在使用 Wordpress 主题，并且想添加自己的自定义 CSS。现在我尝试在 header.php 文件中的所有其他 php 样式表调用之后添加我自己的单独样式表。我尝试在外观>编辑器中编辑样式表，我什至在我的所有样式中添加了 !important。但是 Wordpress 不断用默认样式表覆盖我的样式。

现在我在functions.wp-styles.php中阅读了一些关于注册/排队样式表的信息，但是那里的代码对我来说是法语......我不知道在哪里添加我的css......

这是functions.wp-styles.php页面中的代码：我应该在这里定义它吗？对你的帮助表示感谢！

```
<?php
/**
 * BackPress styles procedural API.
 *
 * @package BackPress
 * @since r79
 */

/**
 * Display styles that are in the queue or part of $handles.
 *
 * @since r79
 * @uses do_action() Calls 'wp_print_styles' hook.
 * @global object $wp_styles The WP_Styles object for printing styles.
 *
 * @param array|bool $handles Styles to be printed. An empty array prints the queue,
 *  an array with one string prints that style, and an array of strings prints those styles.
 * @return bool True on success, false on failure.
 */
function wp_print_styles( $handles = false ) {
    if ( '' === $handles ) // for wp_head
        $handles = false;

    if ( ! $handles )
        do_action( 'wp_print_styles' );

    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );

        if ( !$handles )
            return array(); // No need to instantiate if nothing is there.
        else
            $wp_styles = new WP_Styles();
    }

    return $wp_styles->do_items( $handles );
}

/**
 * Adds extra CSS.
 *
 * Works only if the stylesheet has already been added.
 * Accepts a string $data containing the CSS. If two or more CSS code blocks are
 * added to the same stylesheet $handle, they will be printed in the order
 * they were added, i.e. the latter added styles can redeclare the previous.
 *
 * @since 3.3.0
 * @see WP_Scripts::add_inline_style()
 */
function wp_add_inline_style( $handle, $data ) {
    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );
        $wp_styles = new WP_Styles();
    }

    return $wp_styles->add_inline_style( $handle, $data );
}

/**
 * Register CSS style file.
 *
 * @since r79
 * @see WP_Styles::add() For additional information.
 * @global object $wp_styles The WP_Styles object for printing styles.
 * @link http://www.w3.org/TR/CSS2/media.html#media-types List of CSS media types.
 *
 * @param string $handle Name of the stylesheet.
 * @param string|bool $src Path to the stylesheet from the root directory of WordPress. Example: '/css/mystyle.css'.
 * @param array $deps Array of handles of any stylesheet that this stylesheet depends on.
 *  (Stylesheets that must be loaded before this stylesheet.) Pass an empty array if there are no dependencies.
 * @param string|bool $ver String specifying the stylesheet version number. Set to null to disable.
 *  Used to ensure that the correct version is sent to the client regardless of caching.
 * @param string $media The media for which this stylesheet has been defined.
 */
function wp_register_style( $handle, $src, $deps = array(), $ver = false, $media = 'all' ) {
    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );
        $wp_styles = new WP_Styles();
    }

    $wp_styles->add( $handle, $src, $deps, $ver, $media );
}

/**
 * Remove a registered CSS file.
 *
 * @since r79
 * @see WP_Styles::remove() For additional information.
 * @global object $wp_styles The WP_Styles object for printing styles.
 *
 * @param string $handle Name of the stylesheet.
 */
function wp_deregister_style( $handle ) {
    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );
        $wp_styles = new WP_Styles();
    }

    $wp_styles->remove( $handle );
}

/**
 * Enqueue a CSS style file.
 *
 * Registers the style if src provided (does NOT overwrite) and enqueues.
 *
 * @since r79
 * @see WP_Styles::add(), WP_Styles::enqueue()
 * @global object $wp_styles The WP_Styles object for printing styles.
 * @link http://www.w3.org/TR/CSS2/media.html#media-types List of CSS media types.
 *
 * @param string $handle Name of the stylesheet.
 * @param string|bool $src Path to the stylesheet from the root directory of WordPress. Example: '/css/mystyle.css'.
 * @param array $deps Array of handles (names) of any stylesheet that this stylesheet depends on.
 *  (Stylesheets that must be loaded before this stylesheet.) Pass an empty array if there are no dependencies.
 * @param string|bool $ver String specifying the stylesheet version number, if it has one. This parameter
 *  is used to ensure that the correct version is sent to the client regardless of caching, and so should be included
 *  if a version number is available and makes sense for the stylesheet.
 * @param string $media The media for which this stylesheet has been defined.
 */
function wp_enqueue_style( $handle, $src = false, $deps = array(), $ver = false, $media = 'all' ) {
    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );
        $wp_styles = new WP_Styles();
    }

    if ( $src ) {
        $_handle = explode('?', $handle);
        $wp_styles->add( $_handle[0], $src, $deps, $ver, $media );
    }
    $wp_styles->enqueue( $handle );
}

/**
 * Remove an enqueued style.
 *
 * @since WP 3.1
 * @see WP_Styles::dequeue() For parameter information.
 */
function wp_dequeue_style( $handle ) {
    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );
        $wp_styles = new WP_Styles();
    }

    $wp_styles->dequeue( $handle );
}

/**
 * Check whether style has been added to WordPress Styles.
 *
 * By default, checks if the style has been enqueued. You can also
 * pass 'registered' to $list, to see if the style is registered,
 * and you can check processing statuses with 'to_do' and 'done'.
 *
 * @since WP unknown; BP unknown
 * @global object $wp_styles The WP_Styles object for printing styles.
 *
 * @param string $handle Name of the stylesheet.
 * @param string $list Optional. Defaults to 'enqueued'. Values are
 *  'registered', 'enqueued' (or 'queue'), 'to_do', and 'done'.
 * @return bool Whether style is in the list.
 */
function wp_style_is( $handle, $list = 'enqueued' ) {
    global $wp_styles;
    if ( ! is_a( $wp_styles, 'WP_Styles' ) ) {
        if ( ! did_action( 'init' ) )
            _doing_it_wrong( __FUNCTION__, sprintf( __( 'Scripts and styles should not be registered or enqueued until the %1$s, %2$s, or %3$s hooks.' ),
                '<code>wp_enqueue_scripts</code>', '<code>admin_enqueue_scripts</code>', '<code>init</code>' ), '3.3' );
        $wp_styles = new WP_Styles();
    }

    return (bool) $wp_styles->query( $handle, $list );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:10:08.833

您必须在 functions.php 页面中创建一个函数 - 它位于主题根目录中......

```
function wpse87681_enqueue_custom_stylesheets() {
    if ( ! is_admin() ) {
        wp_enqueue_style( 'mytheme-custom', get_template_directory_uri() . '/custom.css' );
    }
}
add_action( 'wp_enqueue_scripts', 'wpse87681_enqueue_custom_stylesheets', 10 ); 
```

只需将 custom.css（这是您的自定义代码）也添加到根文件夹（与 functions.php 相同的文件夹）。我相信这会成功

代码最后一行引用的 10 是默认优先级。如果第一次不起作用，请尝试将优先级设为 11

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:45:19.027

JetPack 插件适合您吗？它们提供了自定义 css 模块功能，您可以选择添加到现有 CSS 或替换主题的 CSS。如果你还没有，我建议你先看看这个。

[JetPack 自定义 CSS](http://jetpack.me/support/custom-css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:27:09.183

DextrousDave 的反应很好。

但是，我建议您制作一个子主题，而不是将文件添加到主题文件夹中。原因是如果您在进行更改后更新主题，它将清除您的更改。要制作子主题，请在“主题”文件夹中创建一个新文件夹，然后将其命名为您喜欢的任何名称（BackpressChildTheme 或 DavidVanStaden 等）。

然后添加一个样式表（“style.css”），并在顶部包含以下代码：

```
/*
Theme Name:     Backpress Child Theme, or whatever you want to call it
Theme URI:      http://notreallynecessary.com
Description:    Child theme for the BackPress theme 
Author:         David Van Staden
Author URI:     http://davidvanstaden.com/about/
Template:       BackPress
Version:        0.1.0
*/ 
```

请注意，最重要的行是“模板：”，确保与“父”主题（BackPress）的*文件夹名称相匹配。*

接下来添加一个空白的 php 文件，functions.php，并添加 DextrousDave 建议的函数，除了它说 get_template_directory_uri 的地方，将其更改为 get_stylesheet_directory_uri。

Now, if you update your theme, all your changes that are made in your child theme will be preserved.

# android - Android：如何制作这种弹出菜单？

> ID：14988519
> 
> 赞同：-2
> 
> 时间：2013-02-20T19:40:33.667
> 
> 标签：android, checkbox, popupmenu

一个相当简单的问题，我相信。

在我的 Android 手机（运行 Android 2.3.3）上，我偶尔会遇到我非常喜欢的弹出菜单。它们不是上下文菜单，也不是选项菜单——至少，我相信它们不是。

例如：如果您安装了 Skype，并且您尝试呼叫联系人，弹出菜单会询问您是否要使用拨号器或 Skype 来完成此操作。当它出现时，它会将当前活动灰显，而不关闭它或打开一个新活动。

有人知道这种菜单叫什么，以及我是如何创建它的吗？

更准确地说，我希望当用户在我的应用程序中启用某个复选框时显示此菜单。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:46:51.230

那是当您发送意图做某事时出现的操作菜单，即。调出拨号器。如果有多个选项可以执行相同的操作，您将看到此对话框以选择您想要执行的操作。

当您想分享图片或其他内容时，也会看到这一点

![在此处输入图像描述](../Images/eeb1b6c4da56f6c66df3d0cce424f60c.png)

如果您有第三方启动器并按下主页按钮，您也会看到这一点，以便操作系统知道您要使用哪个应用程序来显示主屏幕。

基本上它是一个自定义对话框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T19:51:19.023

我认为您所说的是自定义对话框？告诉我这是不是错了。但是，如果您想要的是自定义对话框，这里有一些链接可以帮助您入门

[Android - 未填满父屏幕的活动](https://stackoverflow.com/questions/1903590/android-activity-that-does-not-fill-the-parent-screen)

[http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application](http://www.helloandroid.com/tutorials/how-display-custom-dialog-your-android-application)

# javascript - 数组的访问索引

> ID：14988527
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:40:58.860
> 
> 标签：javascript, arrays

这是我的代码：

```
function Todo(id, task, who, dueDate) {
    this.id = id;
    this.task = task;
    this.who = who;
    this.dueDate = dueDate;
    this.done = false;
}

var todos = new Array();

window.onload = init;

function init() {
    var submitButton = document.getElementById("submit");
    submitButton.onclick = getFormData;
    var searchButton = document.getElementById("button");
    searchButton.onclick = search;
}

//function creates objects    

function search() {
      for (var i = 0; i < todos.length; i++) {
         var todoObj = todos[i].who;
         console.log(todoObj[0]);
        }
    } 
```

我创建的两个对象的值分别是“jane”和“scott”。这在控制台中返回的首先是“j”，然后是“s”。所以它正在访问两个对象中的第一个字母。当我只输入 console.log(todoObj); 它返回“jane”和“scott”。我需要能够单独访问每个名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:44:28.283

```
todos = [ { who:"jane", ...}, {...} ]
todos[i] = { who:"jane", ...}
todos[i].who = "jane"
todos[i].who[0] = 'j' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:44:38.497

摆脱索引。你已经拥有了价值。

```
 console.log(todoObj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:33:15.057

```
var todoObj = todos[i].who; // returns the string jane or scott depending on the index
console.log(todoObj[0]); // will print out the first character of the string assigned in todoObj 
```

你需要做的是

```
var todoObj = todos[i]; // returns the Todo object
console.log(todoObj.who); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T19:45:25.637

您正在访问第一个`console.log(todoObj[0])`，因此会出现“f”或“s”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T19:56:51.883

当你这样做时

```
var todoObj = todos[i].who; 
```

你把当前对象的 who 字段放到 todoObj 中。因此， todoObj[1] 等于 who 数组的第一个块。如果您想处理整个对象，请执行以下操作：

```
var todoObj = todos[i] 
```

并得到名字

```
 todoObj.who 
```

# javascript - Chrome 扩展动态添加脚本

> ID：14988530
> 
> 赞同：1
> 
> 时间：2013-02-20T19:41:08.227
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, content-security-policy

在 Chrome 扩展程序中，以下代码

```
**background.js**
var elt = document.createElement("script");
elt.type="text/javascript";
elt.innerHTML = "alert('hello world');";
document.getElementsByTagName("head")[0].appendChild(elt); 
```

抛出此错误

```
Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' 'unsafe-eval'". 
```

尽管我在 manifest.js 中有这一行

```
 "content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

有什么想法为什么会抛出这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:10:06.240

没有机制可以放宽对执行内联 JavaScript 的限制。特别是，设置包含的脚本策略**`unsafe-inline`**将不起作用。

它正在以下状态下工作：

### 清单.json

```
{
    "name": "Page Action Demo",
    "description": "This demonstrates Page Action",
    "manifest_version": 2,
    "version": "1",
    "content_scripts": [
        {
            "matches": [
                "https://www.google.co.in/*"
            ],
            "js": [
                "myscript.js"
            ]
        }
    ],
    "permissions": [
        "https://www.google.co.in/*"
    ]
} 
```

### myscript.js

```
var elt = document.createElement("script");
elt.type="text/javascript";
elt.innerHTML = "alert('hello world');";
document.getElementsByTagName("head")[0].appendChild(elt); 
```

如果这没有帮助，您可以分享相关代码吗？

# mysql - 每次迭代都附加到 sql 结果上

> ID：14988537
> 
> 赞同：0
> 
> 时间：2013-02-20T19:41:31.327
> 
> 标签：mysql

大家下午好，我有一种情况，我需要在每次父循环迭代后继续将 MySQL 结果附加到现有结果中。我正在使用的示例如下所示：

```
while ($record = mysql_fetch_row($result,MYSQL_ASSOC)) {
   $result2 = mysql_query("SELECT * FROM Products WHERE id='".$record['target']."'");
} 
```

我希望为“while”循环的每次迭代附加到 $result2 上，以便我可以在 $result2 中有一个完整的列表，以后可以处理。我怎样才能完成这项任务？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:26:21.057

你为什么不使用这个`IN`方法，而不是运行未知数量的查询，这真的会减慢你的应用程序？然后在 1 个查询中获取所有结果。像：

```
$ids = "";
while ($record = mysql_fetch_row($result,MYSQL_ASSOC)) {
    if( $record['target'] )
    {
        $ids .= "," . $record['target']
    }
    else
    {
        $ids = $record['target'];
    }
}
$result2 = mysql_query("SELECT * FROM Products WHERE id IN (".$ids.")"); 
```

现在`$result2`包含以前的所有产品`$result`；

更多信息

1.  [MySQL 输入](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:23:02.447

我相信这就是你要找的。

```
 <?
    $resultSetQueue     = Array();
    $results             = Array();
    $resultSetQueue[]    = mysqli_query("SELECT * FROM Products WHERE <Initial Criteria>");

    for($i = 0; $i < count($resultSetQueue); $i++){
        $in = "";
        while($row = mysql_fetch_assoc($resultSetQueue[$i])){
           $in                 .=  $row['target']. ",";
           $results[]           =   $row;
        }
        $resultSetQueue[]       =   mysqli_query("SELECT * FROM Products WHERE id IN (". substr($in, 0, strlen($in) - 2). ")");
?> 
```

每个查询结果集都被添加到结果集队列中，当它进入 for($i... 循环时进行处理。

不过要小心。这有可能无限循环（直到达到内存使用限制）。

编辑：更好的查询方法 - 使用 IN。

# uitableview - TableView 显示两个选定的行

> ID：14988538
> 
> 赞同：1
> 
> 时间：2013-02-20T19:41:38.470
> 
> 标签：uitableview, xamarin.ios, selection

我在代码中设置选定的行，选择了正确的行（突出显示）。然后我点击 TableView 中的另一行，该行被选中，但前一行仍然突出显示。相反，如果我在选择差异行之前点击第一行，则该行将成为唯一突出显示的行。在我点击最初选择的（在代码中设置）行之前，无论我选择哪些其他行，它都会保持突出显示。

知道为什么表格不重置突出显示吗？

谢谢，瑞克

# c# - 任何带有浮点运算的.NET 图像处理库？

> ID：14988539
> 
> 赞同：0
> 
> 时间：2013-02-20T19:41:42.190
> 
> 标签：c#, image-processing, aforge

我开发了一个数字/科学应用程序，它使用`Scipy.ndimage`Python 中的图像处理例程执行一些步骤，现在我需要将此功能移植到 Visual Studio 2010 中的 C#。

问题是，在 Scipy/Numpy 中，我将图像转换为灰度，然后在加载后立即转换为浮点数组，并执行每个操作（模糊、亮度/对比度、伽马校正、相乘和合并、中心- 质量检测和许多其他）在浮点空间中以增加精度。我不需要保存生成的图像，只需从中提取派生的位置数据（尽管如果需要，我可以轻松地转换回来并再次保存为图像）。

我开始研究 AForge.NET，但大多数操作似乎都在灰度 8bpp 或最多 16bpp 上。

因此，我有三个选择：

1.  找到一些具有浮点图像格式和方法的库；
2.  将图像转换为`double[,]`（不知道如何从`System.Drawing.Bitmap`），并浪费大量时间尝试从其他数值库中获取所需的方法；
3.  继续使用 16bpp 灰度，并接受它，尽管我有充分的理由认为它可能会降低我的结果质量。

非常欢迎任何帮助或见解，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:00:28.573

为什么不看看[Emgu](http://www.emgu.com/wiki/index.php/Main_Page)？这为您提供了 OpenCV 的托管包装器，并支持与双精度/浮点精度之间的转换。

有关使用该库的一些简单示例，请参见[此处](http://www.emgu.com/wiki/index.php/Working_with_Images)。

# ruby - Ruby 枚举器性能问题

> ID：14988547
> 
> 赞同：2
> 
> 时间：2013-02-20T19:42:11.063
> 
> 标签：ruby, performance, benchmarking

根据我之前的相关[问题](https://stackoverflow.com/questions/14978084/get-slice-of-an-enumerator-effectively)，我发现使用`Enumerator`类生成无限序列时存在巨大的性能差距。在我确实相信问题在于`Enumerable`方法之前`take`，`drop`但以下基准并未证实这一说法。

创建自然数生成器并以区间 (10e7-10, 10e7> 显示数字的示例：

```
require 'benchmark'

nats_range = (1..Float::INFINITY)
nats_enum = Enumerator.new {|y| i=1; loop { y << i; i+=1 }}

puts "#{'_'*79+"\n"}Benchmarking Enumerable methods on Range ..."
puts Benchmark.measure { print nats_range.take(10**7).drop(10**7-10), "\n" }

puts "#{'_'*79+"\n"}Benchmarking Enumerable methods on Enumerator ..."
puts Benchmark.measure { print nats_enum.take(10**7).drop(10**7-10), "\n" }

$ ruby a.rb 
_______________________________________________________________________________
Benchmarking Enumerable methods on Range ...
[9999991, 9999992, 9999993, 9999994, 9999995, 9999996, 9999997, 9999998, 9999999, 10000000]
  1.570000   0.010000   1.580000 (  1.576761)
_______________________________________________________________________________
Benchmarking Enumerable methods on Enumerator ...
[9999991, 9999992, 9999993, 9999994, 9999995, 9999996, 9999997, 9999998, 9999999, 10000000]
 15.620000   0.020000  15.640000 ( 15.665156) 
```

使用 Enumerator 的等效代码要慢 10 倍！

我在这里问是否有人可以解释这种巨大的差异。我是否不正确地使用枚举器？这是当前 Ruby 实现中已知的回归吗？

核磁共振红宝石 1.9.3p385

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:12:49.927

`Enumerator`s 基于`Fiber`s，您可以将其视为非常轻量级的线程。（实际上，它们是协程。）

`Range`用于`succ`迭代和`<=`确定它是否已经结束。

因此，您的示例使用了 2000 万次对and的`Range`方法调用，这两种方法都经过了高度优化，基本上或多或少地直接映射到对应的汇编指令。`Fixnum#succ``Fixnum#<=`

您的`Enumerator`示例使用了 2000 万次调用`Enumerator::Yielder#<<`（谁知道那是多么昂贵）`Fixnum#+` *以及*1000 万次`Fiber`上下文切换。我可以很容易地想象`Fiber`上下文切换比简单`Fixnum`操作贵 10 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:07:00.087

我不认为你在问正确的问题。

如果您需要 10 个元素并且正在生成和存储 100 亿个元素，那么首先您的算法可能有问题。

`Enumerator`此外，将 a与 a进行比较是没有意义的`Range`，因为它`Range`不可能给你你所寻求的答案。

运行微基准测试很有趣，但请记住，它们通常**毫无意义**。无论如何，这就是我得到的更合理的限制。

```
class AllNumbers
  include Enumerable
  def each
    i = 0
    loop { yield i += 1 }
  end
end

custom = AllNumbers.new
enum = Enumerator.new do |y|
  i=0
  loop { y << i+=1 }
end
range = 1..Float::INFINITY
require 'fruity'

limit = 1000
compare do
  using_range        {  range.take(limit) }
  using_enumerator   {   enum.take(limit) }
  using_custom_class { custom.take(limit) }
end 
```

结果让我有点吃惊：

```
using_custom_class is faster than using_range by 20.0% ± 10.0%
using_range is faster than using_enumerator by 70.0% ± 10.0% 
```

我不会猜到的。实际上，`Range#each`不是针对整数进行优化的，而是针对整数`+=`进行优化的。

# gmail - Gmail 中邮件发件人上的图标

> ID：14988554
> 
> 赞同：1
> 
> 时间：2013-02-20T19:42:45.410
> 
> 标签：gmail

在 GMail Web 客户端的这个小截图中，您可以看到一条消息的发件人姓名 (chess.com) 有一个与之关联的小图标（棋子）。它不是域的 favicon （尽管它与它非常相似，）而且我从来没有设置任何特别的东西，也没有将 chess.com 添加到任何地址簿或其他客户端数据库中。有谁知道这是如何实现的，以及电子邮件发件人如何可能包含这样的图标？

![显示图标的邮件客户端屏幕截图](../Images/6fd9527c01746b07e76813b6a46a8100.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:17:30.873

可能只是该字符是某种字体的字符。

看看您是否可以像选择角色一样选择它。

# python - 在python中导入/线程

> ID：14988556
> 
> 赞同：1
> 
> 时间：2013-02-20T19:42:50.630
> 
> 标签：python, multithreading, import, pygame

我的项目：

*   pygame 中的一个 GUI，它有一个按钮网格
*   游戏加载器
*   许多游戏都需要使用 GUI

全部在单独的 .py 文件中

应用程序加载器应该启动 GUI，用户单击 GUI 上的一个按钮，使游戏加载器加载特定的游戏，然后用户通过单击 GUI 上的一些其他按钮与游戏逻辑进行交互，游戏状态也显示在图形用户界面。

我不确定如何在 python 中构建它，因为游戏加载器应该导入 GUI，但是 GUI 是否需要导入游戏加载器来调用加载特定游戏的方法？和游戏文件的类似交互？

GUI 是一个可以选择的选项，因为我有可以执行相同功能的硬件，并且它们也可以相互协同工作。

它有点像所有三个组件都需要能够相互调用函数，但 import 只允许这是一种方式。有没有办法让导入就像不同的文件都是同一个文件的一部分一样？而不是他们相互导入？

我已经尝试了很多不同的东西，导入，线程等，但无法得到任何工作，非常感谢任何帮助

对不起，措辞不佳的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:35:54.553

任何游戏都是关于事件循环的。

所以要构建你的游戏：

1.  有一个代表游戏加载器循环的模块，它呈现这些按钮的 GUI。一个好的做法是在事件循环之外和之前渲染大多数（甚至全部）GUI，然后让事件循环+一堆 if-else 语句来监听按钮点击。
2.  让每个按钮单击代表一个特定事件，并将单击每个按钮后会发生的事情委托给单独的函数，这些函数负责导入和加载特定的游戏模块（其他 .py 文件）。
3.  您可以交替主窗口的行为，这样游戏加载器 GUI 就消失了，特定游戏会获取并重用它，或者只是为特定游戏生成另一个窗口。
4.  [Alt to 2] 您可以将实际游戏逻辑放置在单个模块中的不同线程中，该模块还承载游戏加载程序循环。正确使用这种方式可能会带来更灵敏的整体游戏体验（例如，退出游戏会回到运行游戏加载器循环的另一个线程，而它仍然在内存中很热）

一个糟糕的说明如何做到这一点：

```
import pygame
import game_module_one  # your game logic
# two, three, four...

# Your game loader
def main():
    # Initialise window
    pygame.init()
    window = pygame.display.set_mode((1024, 768))
    # Bunch of rendering jobs, set fonts, draw buttons, etc.

    # Event loop
    while 1:
        for event in pygame.event.get():
            if event.type == QUIT:
                return
            elif event.type == "start_game_one":
                do_game_one(window)
            #...

# Game one loading function
def do_game_one(window):
    # do something to that window if you intend to
    pygame.display.flip()
    game_one_module.start() 
```

考虑鼠标、事件、显示和表面的[参考](http://pygame.org/docs/ref/)

希望这可以帮助。

# ios - 从 Git 中检索核心数据托管对象模型

> ID：14988566
> 
> 赞同：0
> 
> 时间：2013-02-20T19:43:23.090
> 
> 标签：ios, xcode, git, core-data, core-data-migration

我目前在 App Store 中有一个使用 Core Data 的应用程序的 v1.1。

我正在通过为即将发布的现有实体添加一些属性来对 Core Data 模式进行简单的更改。由于我的幼稚，我从发布版本对现有的 Core Data 托管对象模型进行了上述更改。

在阅读[本](http://www.raywenderlich.com/27657/how-to-perform-a-lightweight-core-data-migration)关于轻量级迁移的指南时，我遇到了这个问题：

> 因此，绝对不能对已发布版本的应用程序的托管对象模型进行更改。也就是说，如果您的应用程序已经在 App Store 中，请不要更改该版本的托管对象模型中的任何内容。

这显然让我很担心，因为这是我在开发即将发布的版本时一直在做的事情。我一直在使用 Git，并且一直致力于。**从这些 Git 修订版中恢复未触及的托管对象模型最不痛苦的方法是什么（假设 Git 中的某些修订版确实包含它）。**

**更新/编辑**- 迁移当前用户的核心数据存储对我来说并不重要，因为大部分数据都可以重新下载，而且我正在使用核心数据来创造更流畅的体验。**仅使用当前修改的 Core Data 托管对象模型会导致任何问题/崩溃吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:59:21.323

您将需要浏览您的提交历史，`git log`这是一种方法，并找到您想要回滚到的点。请注意您想要的提交的提交哈希。

`git checkout commit-hash path/to/file`

有关完整说明，请参阅[此 SO 答案](https://stackoverflow.com/a/215731/620197)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:01:02.970

我只是从 Git 中签出包含您发布的模型的修订版。然后将该模型复制到您当前的修订版中。那时，您可以创建一个新的模型版本，然后尽情享受。

如果您不想搞砸所有这些，您可以创建一个全新的模型并定义您的应用程序以使用该新模型，这将需要您将所有内容重新下载到该新模型和一个新的持久存储中。如果你走这条路，我还会编写一些代码来从他们的设备中删除旧模型和持久存储文件。

不过，我认为第一条路线应该不会太麻烦。

# java - 旋转 JLabel 文本的垂直方向

> ID：14988573
> 
> 赞同：0
> 
> 时间：2013-02-20T19:43:40.967
> 
> 标签：java, swing

我尝试`JLabel`根据选定的角度 30、90 等旋转文本。我写了`CustomJLabel`课：

```
public CustomJLabel extends JLabel {

    private int angle=360; //setter and getters

    @Override 
    public void paintComponent(Graphics g) {   
        super.paintComponent(g);   
        Rectangle rectangle = g2d.getClipBounds(); 
        g2d.rotate((getAngle() * java.lang.Math.PI) / 4, rectangle.getCenterX(), rectangle.getCenterY());   
    } 
} 
```

主.java：

```
CustomJLabel cst=new CustomJLabel ();
cst.setAngle(value);
cst.repaint();
cst.setSize(getPrefferedsize()); 
```

运行上述代码时。它根据角度正确旋转了文本。但它不正确的矩形形状。请检查以下图片。

水平 (360)

![水平(360)](../Images/72cff245f896f4776d6929c3131ff7e4.png)

垂直 (90)

![在此处输入图像描述](../Images/2de6317cca1379a82c10a9668e6bf0dd.png)

![在此处输入图像描述](../Images/2de6317cca1379a82c10a9668e6bf0dd.png)

请观察红色圆圈，图像垂直 90 度并检查。这是缺少的顶线和底线`JLabel`。为什么它不见了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:03:55.167

召回[`Graphics`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html)指定以下内容：

> 绘制图形轮廓的操作通过使用像素大小的笔穿过像素之间的无限细路径进行操作，该笔垂下并位于路径上锚点*的右侧* ^(* 。)

当您绘制一个使用恒等变换`Rectangle`返回的尺寸`getClipBounds()`时，它将在右侧和底部被剪裁。当您使用不同的变换绘制相同`Rectangle`的内容时，结果将以部分取决于舍入误差的方式被裁剪。

^(* 强调添加。)

# android - Listview 中的 EditText 问题

> ID：14988574
> 
> 赞同：2
> 
> 时间：2013-02-20T19:43:43.647
> 
> 标签：android, android-layout, android-listview, android-edittext, android-softkeyboard

我有一个`ListView`，它有自定义适配器（它保存字符串）。每个`row`包含一个`EditText`.

## 活动布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#fdf7e9"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.16"
        android:background="@drawable/top_bar" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:orientation="vertical"
            android:padding="5dip" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/editAccount"
                android:textColor="#fffdf8eb" />
        </RelativeLayout>
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.72"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/listPhoneNumber"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="#fdf7e9"
            android:cacheColorHint="#fdf7e9"
            android:divider="@android:color/transparent"
            android:dividerHeight="0dp"
            android:fadingEdgeLength="15dip"
            android:footerDividersEnabled="false"
            android:focusable="false"
            android:headerDividersEnabled="false" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/bottomBtns"
        style="@android:style/ButtonBar"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.13"
        android:background="@drawable/bottom_bar"
        android:baselineAligned="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/updateAccount"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.5"
            android:text="@string/menu_quit_account" />

        <Button
            android:id="@+id/cancelEditAccount"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="0.5"
            android:text="@string/cancel" />
    </LinearLayout>

</LinearLayout> 
```

## 行布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fffdf7e9"
    android:longClickable="true"
    android:orientation="horizontal"
    android:descendantFocusability="beforeDescendants"
    android:paddingBottom="5dip"
    android:paddingTop="5dip" >

    <TextView
        android:id="@+id/phoneNumberDescript"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="5dp"
        android:text="č. 1 : "
        android:textColor="#ad865d"
        android:width="50dip" />

    <EditText
        android:id="@+id/phoneNumberText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:layout_marginRight="55dp"
        android:layout_toRightOf="@+id/phoneNumberDescript"
        android:focusable="true"
        android:paddingLeft="10dip"
        android:singleLine="true"
        android:textColor="#ff3c2415" />

    <ImageButton
        android:id="@+id/deletePhoneNumber"
        android:layout_width="40dip"
        android:layout_height="40dip"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:layout_marginRight="10dip"
        android:background="@drawable/delete" />

    <TextView
        android:id="@+id/numberId"
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:visibility="invisible" />

</RelativeLayout> 
```

## 我想要的是：

如果我单击 ListView 中的 EditText，我想放置整个布局以查看我在其中写入的内容。

## 问题：

单击后，它会向上推整个布局，直到我将第一个字母写入 EditText 或再次单击聚焦的 EditText。之后布局向下滚动，但并没有失去焦点，因为我可以继续写输入，但我看不到我在写什么，因为它被软键盘隐藏了。

ListView 也有 Header 和 Footer，它们也有 EditTextes。使用这些 EditTextes 问题是相同的：**在第一个字母之后或重复单击它之后，布局滚动回正常位置。**

* * *

在我的清单中`android:windowSoftInputMode="adjustPan"`

我也试过`numbersListView.setItemsCanFocus(true)`

# java - openCSV 没有读取我的整个文件

> ID：14988577
> 
> 赞同：5
> 
> 时间：2013-02-20T19:44:14.157
> 
> 标签：java, opencsv

我有一个 Java 应用程序，我正在使用 openCSV 读取文件（非常大）。然后，我将第 4 列（如果有影响，最终将添加另一列或两列）列放入 HashSet 并将其输出到新文件。这一切似乎工作正常，但我发现它只是读取文件的一部分（272,948 行中的 131,544 行）。这是 openCSV 或 Java 的一般限制，还是有办法解决这个问题？

我的参考代码：

```
public static void main(String[] args) throws IOException {
    String itemsFile = new String();        
    String outFile = new String();
    itemsFile = "items.txt";        
    outFile = "so.txt";
    CSVReader reader = null;
    try {
        reader = new CSVReader(new FileReader(itemsFile), '\t');
    } catch (FileNotFoundException e) {
        System.out.println(e.getMessage());
        e.printStackTrace();
    }

    String[] nextLine;
    HashSet<String> brands = new HashSet<>();               
    while ((nextLine = reader.readNext()) != null) {
        brands.add(nextLine[4]);            
    }               

    String[] brandArray = new String[brands.size()];
    Iterator<String> it = ((HashSet<String>) brands).iterator();
    int listNum = 0;
    while (it.hasNext()) {
        Object brand = (Object) it.next();
        brandArray[listNum] = (String) brand;
        listNum++;
    }

    CSVWriter writer = new CSVWriter(new FileWriter(outFile), '\n');
    writer.writeNext(brandArray);           
    writer.close();
} 
```

如果我的代码乱七八糟，我深表歉意，这是我第一个真正的“已完成”Java 应用程序。非常感谢任何帮助。

我什至尝试从 txt 文件中删除这些行，以确保它没有挂在某个字符或其他东西上，但无论如何它似乎都停在那条线上

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T15:44:59.393

好的，感谢用户@Michael 在聊天中解决了这个问题。显然 openCSV 无法处理这么大的文件，因为它不是流式传输的。所以我研究了流式传输这个文件，它工作得很好。

这是结束代码：

```
public static void main(String[] args) throws IOException {

    String fileName = new String();
    fileName = "items.txt";
    String outputFile = new String();
    outputFile = "so.txt";      
    String thisLine;
    HashSet<String> brand = new HashSet<>();
    FileInputStream fis = new FileInputStream(fileName);
    @SuppressWarnings("resource")
    BufferedReader myInput = new BufferedReader(new InputStreamReader(fis));
    while ((thisLine = myInput.readLine()) != null) {
        String[] line = thisLine.split("\t");
        if (line[20].equals("1")) {
            if (!line[2].equals("") && !line[2].equals(" ")
                    && !line[2].equals(null)) {                 
                if(line[2].indexOf("'") > -1){
                    System.out.println(line[2]);
                    line[2] = line[2].replace("'", "\'");
                    System.out.println(line[2]);
                }

                brand.add(line[2]);
            }
        }
        if (!line[3].equals("") && !line[3].equals(" ")
                && !line[3].equals(null)) {             
                line[3] = line[3].replace("'", "\'");               
            brand.add(line[3]);
        }
        if (!line[4].equals("") && !line[4].equals(" ")
                && !line[4].equals(null)) {
            if(line[4].indexOf("'") > -1){
                System.out.println(line[4]);
                line[4] = line[4].replace("'", "\'");
                System.out.println(line[4]);
            }

            brand.add(line[4]);
        }
    }

    String[] brands = brand.toArray(new String[brand.size()]);

    try {
        FileWriter fstream = new FileWriter(outputFile);
        BufferedWriter bw = new BufferedWriter(fstream);
        for (int i = 0; i < brands.length; i++) {

            if (i == 0) {
                bw.write("'" + brands[i] + "'");
            } else {
                bw.write(",'" + brands[i] + "'");
            }
        }           

        bw.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
        e.printStackTrace();
    }
} 
```

感谢大家对此的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-13T15:49:53.313

对我来说，当一行的结尾与 bufferedReaders 缓冲区的结尾重合时，问题是 OpenCSV 3.4 中的一个错误。

此测试显示错误：

```
 @Test
    void readWithBufferSize() throws IOException {

        for (int bufferSize = 2; bufferSize <= 3; bufferSize++) {
            // A <CR> <LF> B <NULL>
            byte[] content = {65, 13, 10, 66, 0};

            InputStream is = new ByteArrayInputStream(content);
            BufferedReader bfReader = new BufferedReader(new InputStreamReader(is), bufferSize);
            CSVReader reader = new CSVReader(bfReader);

            List<String> rows = new ArrayList<>();
            String[] cols;
            while((cols = reader.readNext()) != null) {
                rows.add(String.join(",", cols));
            }

            System.out.printf("buffer size: %d rows: %s%n", bufferSize, String.join(",", rows));
            // this fails for bufferSize = 3
            assert (rows.size() == 2);
        }
    } 
```

# asp.net - 如何显示多个嵌套/动态表

> ID：14988578
> 
> 赞同：2
> 
> 时间：2013-02-20T19:44:14.230
> 
> 标签：asp.net, dynamic-data, dynamic-tables

我正在使用 asp.net 并希望动态生成多个表，然后在网页上显示每个表。所以

在 Environments.aspx.cs 文件中：

1.  查询数据库以获取数据并发现应该创建多少表
2.  使用循环创建和定义每个表（无论是 1 还是 50）。每个表有 6 列，行取决于返回的数据

可能在 Environments.aspx 文件中：

1.  显示创建的每个表。我应该完全控制桌子的位置。

我想避免创建一个大表来保持用户友好的外观。如果有人可以提供一个简短的代码示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:28:27.753

这是一个示例。我希望它能让你继续前进。

![在此处输入图像描述](../Images/99d953d7b3a5bfd5bd7c677f85362cda.png)

```
<asp:ListView runat="server" ID="ListView1" ItemPlaceholderID="Panel1" 
    OnItemDataBound="ListView_ItemDataBound">
    <LayoutTemplate>
        <asp:Panel runat="server" ID="Panel1"></asp:Panel>
    </LayoutTemplate>
    <ItemTemplate>
        <%#Eval("Name") %>
        <asp:GridView runat="server" ID="GridView1" AutoGenerateColumns="False">
            <Columns>
                <asp:BoundField DataField="LastName" HeaderText="LastName" />
                <asp:BoundField DataField="FirstName" HeaderText="FirstName" />
            </Columns>
        </asp:GridView>
    </ItemTemplate>
</asp:ListView>

public class House
{
    public int HouseId { get; set; }
    public string Name { get; set; }
    public List<User> Users { get; set; }
}

public class User
{
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public List<House> Houses
{
    get
    {
        return new List<House>
            {
                new House
                    {
                        HouseId = 1,
                        Name = "House One",
                        Users = new List<User>()
                            {
                                new User {UserId = 1, FirstName = "John", LastName = "Newton"},
                                new User {UserId = 2, FirstName = "Marry", LastName = "Newton"},
                                new User {UserId = 3, FirstName = "Joe", LastName = "Newton"}
                            }
                    },
                new House
                    {
                        HouseId = 1,
                        Name = "House Two",
                        Users = new List<User>()
                            {
                                new User {UserId = 6, FirstName = "Newton", LastName = "Doe"},
                                new User {UserId = 7, FirstName = "Jack", LastName = "Doe"},
                                new User {UserId = 8, FirstName = "Lewis", LastName = "Doe"}
                            }
                    }
            };
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ListView1.DataSource = Houses;
        ListView1.DataBind();
    }
}

protected void ListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    var house = e.Item.DataItem as House;
    var gridView = e.Item.FindControl("GridView1") as GridView;

    gridView.DataSource = house.Users;
    gridView.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:17:13.980

不知道我是否明白你的要求。我在您的评论中看到您有 1 个选择命令。否则，你能举例说明它应该是什么样子吗？

如果您想要一种方法来获得所有表格看起来都相同的东西，您可以尝试使用中继器。

编辑：使用网格视图可能比表格更容易，因为您只需在 ItemDataBound 中将数据集绑定到中继器中的网格视图。

环境.aspx：

```
<asp:Repeater ID="repeatExample" runat="server" OnItemDataBound="repeatExample_ItemDataBound">
     <ItemTemplate>
          //Place table here
     </ItemTemplate>
</asp:Repeater> 
```

环境.aspx.cs：

```
private void bindRepeater()
    {
        //Get all your info using a stored procedure
        //ExampleClassDAL being where my code to call the stored proc is and return a 
        //List of DataSets (You would have to code a way to get multiple dataset for each table in your page.)
        List<DataSet> dsExample = ExampleClassDAL.StoredProcGetAllTheStuff();
        //Add extra code here if needed
        [...]
        //Bind the repeater
        repeatTournois.DataSource = dsExample ;
        repeatTournois.DataBind();
    }

 protected void repeatExample_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
       //Fill your table here using the DataSource
       DataSet ds = ((DataSet)e.Item.DataItem);
       [...]
    } 
```

希望这有帮助。

PS我没有尝试数据集列表。它可能不起作用。

# tfs - 如何获取 tfs 构建关联的变更集和工作项？

> ID：14988587
> 
> 赞同：0
> 
> 时间：2013-02-20T19:44:42.317
> 
> 标签：tfs, nant, tfsbuild

我想要 tfs build 关联变更集和工作项的值有两个原因 - 1）通过我的自定义项目文件进行报告/电子邮件确认 2）检查与变更集和工作项相关的文件

我怎样才能做到这一点？任何人都可以给我一个详细的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:28:14.097

如果您有“创建报告”权限，这很容易。试试看，有问题我帮你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:13:02.850

获取 msbuild 社区任务并尝试以下操作：

```
<MSBuild.Community.Tasks.Tfs.TfsVersion LocalPath="$(MSBuildProjectDirectory)">
  <Output TaskParameter="Changeset" PropertyName="Changeset" />
</MSBuild.Community.Tasks.Tfs.TfsVersion> 
```

# string - 链接：符号问题“（可能是编码问题）

> ID：14988589
> 
> 赞同：0
> 
> 时间：2013-02-20T19:44:45.467
> 
> 标签：string, encoding, hyperlink, str-replace, double-quotes

我在我的页面上生成了一个链接

```
<a href="#" onClick="loadList(5); return false;">5</a> 
```

问题是当我点击链接时，它会将我重定向到

```
<a #" onClick="loadList(4); return false; 
```

在我进行检查时，在 Google Chrome 中，我看到生成的 HTML 是

```
<a href="#&quot; onClick=&quot;loadList(5); return false;">5</a> 
```

我的问题是我正在使用外部类并从不同的函数（作为字符串）获取`<a href="#`字符串`">5</a>`，我无法控制它。我唯一能做的就是字符串函数，例如`str_replace`. 我试图`"`在从函数获得的字符串中找到子字符串，但无济于事。

这可能是编码问题吗？

我该如何解决这个奇怪的现象？

谢谢！

编辑：

该页面是[http://www.belgiumdiamonds.net/en/diamond-collection-test](http://www.belgiumdiamonds.net/en/diamond-collection-test)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:58:22.797

给定URL看问题就清楚了。Inspect 元素显示 Chrome 如何解析 HTML，而不是真正的 HTML。

分页来自这个 ajaxed 页面

[http://www.belgiumdiamonds.net/index.php/tools/blocks/diamond_list/list_display](http://www.belgiumdiamonds.net/index.php/tools/blocks/diamond_list/list_display)

所以看看它的来源。

```
<a href='#" onClick="loadList(2); return false;' > 
```

注意不匹配的引号

```
<a href='#" onClick="loadList(2); return false;' >
        ^ ^ here 
```

和

```
<a href='#" onClick="loadList(2); return false;' >
                    ^                          ^ here 
```

链接仍然出现的原因是您有一对看似有效的引号，创建了这个 URL：`#" onClick="loadList(2); return false;`这显然是错误的。

现在，如果您无法解决此问题，您需要向我们展示该类的相关代码和/或您如何调用该函数来创建分页。可能是执行错误而不是班级。如果它是类，你可以扩展它并修复它，或者像你尝试的那样用 str_replace 贴上创可贴，但这肯定会起作用：

```
 $the_anchor=str_replace("'", '"', $the_anchor); 
```

# angularjs - 将属性作为对象属性获取到指令 AngularJs

> ID：14988593
> 
> 赞同：2
> 
> 时间：2013-02-20T19:44:57.700
> 
> 标签：angularjs, angularjs-directive

我为我的应用程序编写通用滑块指令，我需要指定例如 HTML 代码中的控制按钮，如下所示：

```
<div class="slide-wrapper" data-sample-values="{prevbtn: '.previous', nextbtn: '.next'}"></div> 
```

例如，如何将这些值作为对象属性放入指令中？

或者也许还有另一种方法可以执行可重复指令？以及如何将这些元素与父范围隔离？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:22:29.583

```
myApp.directive('slideWrapper', function() {
   return {
      restrict: 'C',
      scope: { getValues: '&sampleValues' },  // creates an isolate scope
      link:  function(scope, element, attrs) {
         var values = scope.getValues();  // evaluates expression in context of parent scope
         ...
      } 
   }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T22:21:39.713

做这样的事情：
`scope.$watch(function () { return scope.$eval(attrs.sampleValues); }, function (newValue) {...});`

# filter - 对 AngularJS 的输出 HTML 应用过滤器

> ID：14988598
> 
> 赞同：9
> 
> 时间：2013-02-20T19:45:06.630
> 
> 标签：filter, escaping, angularjs

我在 AngularJS`autolink`和`nl2br`.

**`autolink`:**将 URL 字符串转换为`<a>`具有属性的标记`rel="nofollow" target="_blank"`。我尝试将 ngSanitize 与 linky 过滤器一起使用，但它没有向其中添加上面的 2 个属性，也没有提供使用现有 API 的方法。

**`nl2br`:**将新行转换为`<br>`标签。

我想在我的 HTML 中应用这 2 个过滤器`{{ comment }}`，`{{ comment | autolink | nl2br }}`但过滤器是在 AngularJS 进行 HTML 转义之前应用的，这会导致`<a>`and`<br>`也被转义。基本上，我想在转义发生**后应用过滤器。**

有没有办法用 AngularJS 做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T20:28:36.643

如果您的 HTML 中有标准插值，Angular 将转义它：

```
<div> {{ var | filter1 | filter2 }} </div> 
```

整个表达式的结果将被转义。

您想要的是`ng-bind-html-unsafe` [（此处的文档）](http://docs.angularjs.org/api/ng.directive%3angBindHtmlUnsafe)。您可以表达与上述基本相同的内容：

```
<div ng-bind-html-unsafe='var | filter1 | filter2'></div> 
```

现在表达式的结果将不会被清理，并将作为 div 的内容插入。

**编辑：**请注意，还有[`ng-bind-html`](http://docs.angularjs.org/api/ngSanitize.directive%3angBindHtml)，它仍然会生成 HTML，但会首先对其进行清理（[`$sanitize`docs](http://docs.angularjs.org/api/ngSanitize.%24sanitize)）。

`ng-bind-html`存在于`ngSanitize`模块中，因此您必须确保已在`angular.module`调用中将其声明为依赖项。

# iphone - 使用后端数据构建 iOS 应用的最佳实践

> ID：14988600
> 
> 赞同：1
> 
> 时间：2013-02-20T19:45:14.577
> 
> 标签：iphone, mysql, ios, sqlite, postgresql

我刚刚学习 iOS SDK，想知道处理各种数据的最佳实践/设计模式是什么。我看到 iOS 的核心数据包括在我的 iPhone/iPad 上运行的版本 os SQLLite。与设备和服务器有关的数据通常如何存储。

例如，像 Path 或 Instagram 这样的应用程序如何存储他们的所有数据？将数据存储在设备上并同步到 Web 服务器上的数据库是最佳做法吗？哪些类型的数据库通常用于此目的？

（如果需要，我可以澄清任何事情。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:03:02.180

大多数应用程序通过 HTTP 创建 API，通常使用 JSON。大多数信息（尽管通常不是二进制文件）都存储在某种数据库中。一些应用程序选择像 MySQL 或 PostgreSQL 这样的 SQL 数据库，而其他应用程序选择被归类为 NoSQL 数据库的东西，如 MongoDB 或 Redis。

服务器架构的选择与应用程序本身无关，您会看到开发人员不时更换他们的大部分服务器技术。

基本上，任何流行的 Web 框架和数据存储最初都是不错的选择，因此请使用您喜欢的任何内容。

# c - 谜题：谁赢了比赛？

> ID：14988612
> 
> 赞同：4
> 
> 时间：2013-02-20T19:45:38.487
> 
> 标签：c, algorithm, time-complexity, puzzle, space-complexity

一群孩子围成一圈。第一个孩子被选中，他们从那个孩子开始顺时针计数，直到达到一个固定的数字（n，在游戏开始时给出）。当计数达到 n 时，第 n 个位置的孩子被淘汰。游戏从下一个孩子开始再次继续，直到剩下一个孩子。您的目标是打印直到最后一个孩子的位置。

> 例如，如果有 10 个孩子，固定数 n 为 6，那么最后一个孩子的位置是 3。

有没有更好的编程算法来解决这个问题？

> PS 我知道我们可以使用数组或其他数据结构轻松地做到这一点。我只想要最好的策略，最好是数学方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:11:07.170

我认为最简单的方法仍然是写一个重复（几乎是维基百科所说的，给 Jan Dvorak 投票）：

```
T(1) = 0
T(c) = (T(c-1)+n) mod c 
```

或者，写成 C（没有递归）：

```
int non_fatal_josephus(int children, int n) {
    int result = 0;
    for(int i=2; i<=children; i++)
        result = (result + n) % i;

    return result + 1; //to make it one-based
} 
```

复发解释：

T(c) 的意思是“如果我们从 c 个孩子开始，哪个孩子会赢”。

T(1) = 0 因为如果我们只有 1 个孩子，她已经赢了（第 1 个孩子，索引 0）。

一般情况是我们总是消除第n个孩子（索引n-1），一旦我们消除了她，我们就重新开始计数（c-1）个孩子，但这一次，我们不是从索引0开始，而是从索引 n。这解释了 +n：T(c-1) 假设计数从 0 开始。我们使用 +n 来移动子索引，就好像我们从索引 n 开始一样。

# c++ - STL 容器速度与阵列

> ID：14988617
> 
> 赞同：5
> 
> 时间：2013-02-20T19:46:02.223
> 
> 标签：c++, arrays, performance, stl, hpc

我刚开始从事一个速度非常重要的科学项目 (HPC)。我目前正在设计数据结构。该项目的核心是双值的 3D 网格，用于求解偏微分方程。

由于这里的速度可能比代码的简单性更受关注，我想知道与通常的 C 样式数组相比，STL 的性能如何。在我的例子中，因为它是一个 3D 网格，所以我在考虑 a) 具有线性索引的一维向量 b) 3 个向量的向量或 c) 一维 c 样式数组或 d) 三维 c 样式大批。

我查找了较旧的问题，但我只发现了有关构造/破坏的问题（这在这里并不重要，因为数据结构仅在程序启动时创建一次 - 快速索引和计算很重要）或不同 STL 容器的比较。

感谢帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T20:00:28.483

很难（甚至不可能）提前说相对表现会是什么。通常，在现代机器上，使用平面向量，并计算其中的索引，将优于向量的向量的向量；在较旧的机器上，情况正好相反。（在现代机器上，由于局部性差，乘法通常比页面丢失便宜。在旧机器上，乘法很昂贵，而且没有缓存，所以局部性没有影响。）

此外，根据机器和库的实现，`std::vector`对这个平面向量使用 an 可能比使用指向内存的简单指针更昂贵（或者它可能不是——你无法提前知道）。我仍然会先选择向量，将所有内容小心地包装在控制类中，如果仍然存在性能问题，请切换到指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T19:49:24.020

1D 和 3D 阵列的内存布局将相同，并且类似于线性`std::vector`. 我会采用这种方法：一个一维向量和一个内联函数来映射到适当的位置。

另一方面，向量的向量具有完全不同的布局，因为向量中的数据不存储在对象内部，而是动态分配和引用。这意味着 a 中的两个不同行`std::vector<std::vector<int>>`可能位于内存中完全不相关的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T19:50:24.370

向量将在内部执行您需要手动执行的操作以处理单独大小的原始数组，因此只要正确使用它们，向量应该执行与执行相同任务的原始数组相同的操作。

例如，单个向量的性能应该与一维 c 数组相同，向量向量的性能应该与使用原始指针数组大致相同，其中每个元素都指向一个数组。

但是，如果 3d 数组具有统一的维度大小（即，不是参差不齐的数组），那么向量会支付额外的成本来单独管理它们的大小（例如，它们必须单独存储它们的大小）。如果在编译时已知任何维度大小，那么最好使用“STL”容器“std::array `, because it won't have that unnecessary overhead. You can even have multi-dimentional`std::arrays”：

```
template<typename T, int Planes, int Rows, Cols>
using Matrix = std::array<std::array<std::array<T,Cols>,Rows>,Planes>; 
```

虽然没有严格要求，但这应该与 相同`T arr[Planes][Rows][Cols];`，但没有原始 c 数组的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:46:17.793

在 HPC 中广泛使用的动态分配静态（就分配后的不变维度而言）数组对象是平面数组和涂料向量的组合。基本上，这个想法是分配一大块平坦的内存，然后在其中构建一个指针树。对于二维数组，树只是指向每行开头的指针的简单线性列表。对于 3D 数组，树有两个级别，每个第二级元素都指向对应于第一级的 2D 切片中的一行。将涂料向量树放在分配内存的开头允许您直接应用`[]`索引运算符，例如`A[i][j][k]`，但必须小心，因为它`&A[i]`不是`i`第 -th 2D 切片的开头。

这种方法的一个问题是涂料向量树的大小可能会变得非常大。例如，对于 64 位机器上的 1000x1000x1000 数组，此数据结构的大小为 1000x1000x8 字节或几乎 8 MiB。对于某些数据访问模式，这可能会占用宝贵的缓存空间。

# actionscript-3 - 影片剪辑中的多个精灵序列

> ID：14988620
> 
> 赞同：0
> 
> 时间：2013-02-20T19:46:15.693
> 
> 标签：actionscript-3, movieclip, sprite

总结——我有一个碟子动画片段，它的时间轴上有 2 个精灵序列：1）循环运行灯（ff-10）和 2）破坏动画（ff11-20）。我希望运行灯循环直到发生命中事件，然后我想要破坏动画。我想将我的所有命令保留在碟子或文档类中。目前我只能通过在 f10 的碟子时间轴中放置一个“gotoAndPlay(1)”来完成这项工作。我是新手，但我认为这是一种 as2 风格。

我想这也可以通过为碟子分配一个enterframe事件侦听器并在当前帧== 10时循环来工作。这似乎很贵，尤其是如果有多个碟子。

非常感谢您对此方案的任何评论或建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:47:43.650

当您已经可以通过您提到的一行代码来执行此操作时，我认为您不必添加一个 ENTER_FRAME 事件侦听器进行循环。

我认为鉴于您描述的场景（将两个动画都放在一个时间线上），您采用的方法已经足够好了。

当然，有多种方法可以做同样的事情。可能是您可以从代码中完成所有动画，或者您可以将动画拆分为符号，并在发生命中事件时添加和删除相关符号。

如果您真的担心将一行代码放入时间线中，我的建议是“不要成为纯粹主义者”。与您发布 ENTER_FRAME 事件处理程序相比，您对 gotoandplay(1) 的建议对我来说更容易理解。

# symfony - 无法使 Symfony 2 UniqueEntity 工作

> ID：14988621
> 
> 赞同：1
> 
> 时间：2013-02-20T19:46:16.963
> 
> 标签：symfony, doctrine-orm, entity

我正在尝试在我的实体中使用 UniqueEntity 验证，但它不起作用。我已经阅读了几个小时，但仍然没有找到解决方案。我想这很容易看到，但我以前从未使用过它。

当我在数据库中保留一个具有相同数据的新实体/记录时，它会中断 SQL 错误，或者如果表列上没有唯一索引，则会插入记录。

这是我的实体

[http://pastebin.com/EwsT5QGy](http://pastebin.com/EwsT5QGy)

欢迎任何帮助，因为我似乎无法自己弄清楚：？

# mysql - 从删除查询中排除特定记录

> ID：14988622
> 
> 赞同：0
> 
> 时间：2013-02-20T19:46:22.970
> 
> 标签：mysql

假设我有一些这样的数据（日期类型的东西，月/日/年/标志/用户列）

```
1 - 1 - 2013 flag:1 user:123456
1 - 2 - 2013 flag:0 user:123456
1 - 3 - 2013 flag:0 user:123456
1 - 4 - 2013 flag:0 user:123456
1 - 5 - 2013 flag:1 user:123456
3 - 1 - 2013 flag:1 user:987654
3 - 2 - 2013 flag:0 user:987654
3 - 3 - 2013 flag:0 user:987654
3 - 4 - 2013 flag:0 user:987654
3 - 5 - 2013 flag:1 user:987654 
```

我想从用户 123456 中删除除第一条记录之外的所有记录。我试过：

```
DELETE FROM table 
WHERE year = 2013 
AND user = 123456 
AND (month != 1 AND day != 1 AND year != 2013 AND flag != 1) 
```

国旗很重要。我很难过。我试过 NOT IN 这样的：

```
DELETE 
FROM table 
WHERE year = 2013 
AND user = 123456 
NOT IN (SELECT * 
        FROM table 
        WHERE month = 1 AND day = 1 AND year = 2013 AND flag = 1) 
```

但我不能不上班。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:53:20.993

您的第一个查询失败，因为`year = 2013`并且`year != 2013`不可能。试试下面的修改版本。

```
DELETE FROM table 
WHERE year = 2013 
AND user = 123456 
AND NOT (month = 1 AND day = 1 AND year = 2013 AND flag = 1) 
```

# java - Spring Jms 每秒警告消息

> ID：14988626
> 
> 赞同：2
> 
> 时间：2013-02-20T19:46:33.067
> 
> 标签：java, spring, jms, spring-jms

Java - 弹簧 - JMS

我正在使用带有 JMS 侦听器的 Spring，以下是我的代码片段。

```
report.broker.url=failover:(tcp://w-dlapp00:5061?daemon=true;tcp://w-dlapp01:5061?daemon=true)?randomize=false&timeout=3000 
```

spring 上下文，我发现问题在于它发出警告，因为队列 w-dlapp00:5061 已关闭，但由于它处于故障转移状态，另一个队列正在工作 - 我怎样才能摆脱这个警告？

```
<!-- Active MQ changes -->
  <bean id="connectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
      <value>${royality.report.broker.url}</value>
    </property>
  </bean>

  <bean id="destinationRoyaltyReport" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="${royality.report.queue}"/>
  </bean>

  <bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="connectionFactory"/>
    <property name="defaultDestination" ref="destinationRoyaltyReport"/>
  </bean>

  <jms:listener-container connection-factory="connectionFactory">
    <jms:listener destination="${royality.report.markingrid.queue}" ref="royaltyReportListener" method="onReceivedRoyaltyReportGridRequest"/>
    <jms:listener destination="${royality.report.queue}" ref="royaltyReportListener" method="onReceivedRoyaltyReportViewRequest"/>
  </jms:listener-container>
  <!-- Active MQ changes --> 
```

当我查看日志文件时，它充满了 JMS 信息和 WARN 语句，如下所示，无法弄清楚发生了什么。有警告消息似乎有些东西正在崩溃？

```
2013-02-20 14:34:28,691 [org.springframework.jms.listener.DefaultMessageListenerContainer#0-1] WARN  [DefaultMessageListenerContainer.java:834] : id[] Setup of JMS message listener invoker failed for destination 'royaltyReportMarkInGridQueue' - trying to recover. Cause: Failover timeout of 3000 ms reached.
2013-02-20 14:34:31,763 [org.springframework.jms.listener.DefaultMessageListenerContainer#1-1] WARN  [DefaultMessageListenerContainer.java:834] : id[] Setup of JMS message listener invoker failed for destination 'royaltyReportQueue' - trying to recover. Cause: Failover timeout of 3000 ms reached.
2013-02-20 14:34:31,767 [org.springframework.jms.listener.DefaultMessageListenerContainer#0-1] INFO  [FailoverTransport.java:507] : id[] Failover timed out after 3073ms
2013-02-20 14:34:31,768 [org.springframework.jms.listener.DefaultMessageListenerContainer#0-1] WARN  [DefaultMessageListenerContainer.java:888] : id[] Could not refresh JMS Connection for destination 'royaltyReportMarkInGridQueue' - retrying in 5000 ms. Cause: Failover timeout of 3000 ms reached.
2013-02-20 14:34:34,838 [org.springframework.jms.listener.DefaultMessageListenerContainer#1-1] INFO  [FailoverTransport.java:507] : id[] Failover timed out after 3073ms
2013-02-20 14:34:34,838 [org.springframework.jms.listener.DefaultMessageListenerContainer#1-1] WARN  [DefaultMessageListenerContainer.java:888] : id[] Could not refresh JMS Connection for destination 'royaltyReportQueue' - retrying in 5000 ms. Cause: Failover timeout of 3000 ms reached.
2013-02-20 14:34:39,839 [org.springframework.jms.listener.DefaultMessageListenerContainer#0-1] INFO  [FailoverTransport.java:507] : id[] Failover timed out after 3065ms
2013-02-20 14:34:39,841 [org.springframework.jms.listener.DefaultMessageListenerContainer#0-1] WARN  [DefaultMessageListenerContainer.java:888] : id[] Could not refresh JMS Connection for destination 'royaltyReportMarkInGridQueue' - retrying in 5000 ms. Cause: Failover timeout of 3000 ms reached.
2013-02-20 14:34:42,910 [org.springframework.jms.listener.DefaultMessageListenerContainer#1-1] INFO  [FailoverTransport.java:507] : id[] Failover timed out after 3068ms
2013-02-20 14:34:42,910 [org.springframework.jms.listener.DefaultMessageListenerContainer#1-1] WARN  [DefaultMessageListenerContainer.java:888] : id[] Could not refresh JMS Connection for destination 'royaltyReportQueue' - retrying in 5000 ms. Cause: Failover timeout of 3000 ms reached. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:28:37.887

它只是意味着它无法连接到`failover`传输中的任何一个服务器。请注意，您有`timeout=3000`导致传输引发异常的原因。容器不断重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:13:48.437

ActiveMQ 的日志记录由 Log4J“log4j.properties”文件控制。

您可以定义希望记录器显示的消息级别（警告、错误等），以及应在何处打印日志（控制台、log_file 等）。

在您的情况下，您可以禁用日志文件的 WARN 日志并在其他位置打印它们。

我个人想看看我的消息是在哪里发送的，以及故障转移是否无法发送到 ID 更喜欢知道的主机之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:06:59.497

而不是使用 ; 在我使用“，”的两个经纪人之间，似乎正在工作

[看这里了解详情](http://activemq.apache.org/failover-transport-reference.html)

# python - 使用经过验证的正确设置未加载 Django 静态文件

> ID：14988627
> 
> 赞同：1
> 
> 时间：2013-02-20T19:46:38.367
> 
> 标签：python, django, python-2.7, django-staticfiles

我在 Ubuntu 12.10 上运行 Django 1.4 和 Python 2.7。我在一个开发人员团队中工作，从昨天到今天似乎发生了一些变化，我似乎无法使用 runserver 在本地加载静态文件。我们有一个运行良好的开发环境。所有其他开发人员本地环境都运行良好。我们的生产环境运行良好。作为一个团队，我们有点难过，希望社区能够对这个问题有所了解。

以下是项目的相关部分：

项目.urls

```
if settings.TEMPLATE_DEBUG:
    urlpatterns += patterns('django.views.static',
        (r'^media/(?P<path>.*)$', 'serve', {
            'document_root': settings.MEDIA_ROOT}),
        (r'^static/(?P<path>.*)$', 'serve', {
            'show_indexes': True,
            'document_root': settings.STATIC_ROOT}),
    ) 
```

项目.settings.dev

```
from __init__ import *

DEBUG = True
TEMPLATE_DEBUG = True 
```

项目设置

```
PROJECT_ROOT = os.path.join(os.path.dirname(__file__), '..')
STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')
STATIC_URL = '/static/' 
```

项目结构：

```
project
 --apps/
   --<dozens of apps>
 --settings/
   --__init__.py
   --dev.py
 --staticfiles/
 --templates/
 --__init__.py
 --manage.py
 --tests.py
 --urls.py 
```

我已删除`project/static/`并运行`manage.py collectstatic`，它将 404 静态文件复制到`project/static/`from `project/staticfiles/`。

如果我然后运行，`manage.py runserver`我可以看到该站点，但没有加载静态样式/文件。

请注意，似乎没有其他人遇到此问题。我们都使用来自 Github 的相同代码库。从字面上看，我没有理由面对这个问题，而其他人则没有。有任何想法吗？我正在考虑只在本地使用 Apache2 并设置 .wsgi 文件并完全跳过 Django 服务器 - 但我真的不想这样做。

编辑 1：我注意到 Django 服务器确实抱怨了一些静态文件。

```
[20/Feb/2013 16:59:40] "GET /accounts/login/ HTTP/1.1" 302 0
[20/Feb/2013 16:59:40] "GET /dashboard/ HTTP/1.1" 200 8645
[20/Feb/2013 16:59:40] "GET /static/js/libs/less/less.js HTTP/1.1" 404 950
[20/Feb/2013 16:59:40] "GET /static/less/proton-app.less HTTP/1.1" 404 950
[20/Feb/2013 16:59:40] "GET /static/CACHE/js/987f5472f2f9.js HTTP/1.1" 404 950
[20/Feb/2013 16:59:41] "GET /static/CACHE/js/d5e323c0aed6.js HTTP/1.1" 404 950
[20/Feb/2013 16:59:41] "GET /static/images/favicon.png HTTP/1.1" 404 950 
```

我很抱歉。是的，有一些与静态文件相关的 404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:34:11.493

我无法找到针对此问题的基于代码的解决方案。为了解决这个问题，我删除了项目并删除了我的虚拟环境。然后我重新创建了我的虚拟环境，从 github 获取了我的 fork 并重新设置了整个项目环境。

现在它正在工作。*耸耸肩*

# angularjs - AngularJS：HTML 编译器如何安排编译顺序？

> ID：14988631
> 
> 赞同：4
> 
> 时间：2013-02-20T19:46:54.887
> 
> 标签：angularjs, angularjs-directive

当一个页面上的多个元素有多个指令时，Angular 的 HTML 编译器是如何安排编译顺序的？

假设我有以下标记，其中 alpha、beta 和 gamma 是自定义 Angular 指令，

```
<html ng-app>
  <alpha><beta></beta></alpha>
  <gamma></gamma>
</html> 
```

编译器对它们的工作顺序是什么？是 alpha => gamma => beta 吗？还是 alpha => beta => gamma？

更复杂一点，考虑 alpha 指令的模板有另一个自定义指令，称为 foo。foo 什么时候被编译？编译完上述所有指令之后？还是在编译 alpha 之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:46:52.073

我在 AngularJS 邮件列表中问了同样的问题，Peter Bacon Darwin 给出了一个很好的答案，并用 jsfiddle 进行了演示。[关联](https://groups.google.com/d/topic/angular/3HsNz4ncnYA/discussion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:42:23.757

**关于一个元素的多个指令**：

这是使用指令“优先级”属性处理的。从文档：`Once all directives for a given DOM element have been identified they are sorted by priority and their compile() functions are executed.`

请参阅[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

**关于指令编译顺序**：

Angular 将遍历 DOM - 即按照元素在 DOM 树中出现的顺序拾取元素。从文档：`Compile: traverse the DOM and collect all of the directives. The result is a linking function.`

请参阅[http://docs.angularjs.org/guide/compiler](http://docs.angularjs.org/guide/compiler)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T10:33:30.703

[其他答案和https://docs.angularjs.org/api/ng/service/$compile](https://docs.angularjs.org/api/ng/service/$compile)的 $compile 函数的 Angular 文档中很好地描述了链接和编译函数的顺序：

1.  自顶向下编译和预链接（先是父，然后是子）
2.  以相反的方式发布链接
3.  同一元素上的指令由它们的优先级属性处理

另外： 4\. 在指令中使用**templateUrl**选项时，该指令在模板加载之前不会编译，但编译器会继续编译其他指令。这将破坏上述编译/链接顺序。

# embedded - 检查 CPU 缓存

> ID：14988633
> 
> 赞同：0
> 
> 时间：2013-02-20T19:47:13.007
> 
> 标签：embedded, firmware

有没有办法在大多数现代 CPU 上使用 JTAG 来查看缓存（指令和/或数据）？否则，有没有其他方法可以检查缓存内容，而不是低级硬件辅助工具？

谢谢，马克

# solr - Solr 返回糟糕和无效的拼写建议

> ID：14988635
> 
> 赞同：1
> 
> 时间：2013-02-20T19:47:19.320
> 
> 标签：solr, django-haystack

我试图找到一种方法来改进 Solr 提供的拼写建议，同时尽可能多地保留好的建议。一项特殊的搜索让我非常头疼：

“黄花”

搜索此 Solr 时提供建议“黄色花”

据我所知，这是来自该领域的一个部分，用于生成看起来像“鲜花。它”的建议

这只是我在这个特定查询中遇到的许多问题中的一个（我相信他们还有很多其他问题，但我专注于解决这个问题）。以前，我在使用省略号连接单词时遇到问题，例如：

"花...a" => "黄花a"

我已经厌倦了各种事情，比如在查询中添加 spellcheck.accuracy ，但我发现这在排除无效建议之前排除了有效建议（它在 0.7 时排除了“acet”=>“acer”，但没有排除“flowerse” "直到 0.9)。我试过 onlyMorePopular 对真和假，都没有明显的效果。

我正在考虑尝试使用 thresholdTokenFrequency，但我感觉我会失去很多有效的建议，比如可能只出现在索引中一次的专有名称。

同理：搜索“flowerse”会得到类似“flowers”的建议，而不是更合适的“flowers”建议。

我可以做些什么来改进拼写建议的结果，甚至只是列出永远不会被建议或类似的单词？

为什么当搜索词是我的索引中最常见的词之一时，Solr 会建议这种奇怪的词组合，这些词组合不能出现超过几次？

文本字段类型定义：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
        <charFilter class="solr.PatternReplaceCharFilterFactory" pattern="(…|[\.]{2,})" replacement=" " />
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
</fieldType> 
```

建议字段定义：

`<field name="suggestions" type="text" indexed="true" stored="true" multiValued="true" termVectors="true" termPositions="true" termOffsets="true" />`

请求处理程序：

```
<requestHandler name="standard" class="solr.SearchHandler" default="true">
    <lst name="defaults">
        <str name="echoParams">explicit</str>
        <str name="spellcheck.onlyMorePopular">false</str>
        <str name="spellcheck.extendedResults">false</str>
        <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
        <str>spellcheck</str>
    </arr>
</requestHandler> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:45:28.227

感谢您发布您的 fieldType 定义。基于此，我认为您的问题与使用 EnglishPorterFilterFactory 和 WordDelimiterFilterFactory 有关。这两个过滤器工厂正在更改被标记化的值（由 Solr 存储在字段中）以最大化搜索结果。因此，您将被提供这些词干和分隔值作为拼写建议，我相信这不是您所期望的行为。

在这种情况下，我建议对删除这两个过滤器工厂的建议字段使用不同的 fieldType 作为起点，以查看您的拼写建议是否得到改进。因为我相信您想要的拼写建议更能代表传递给 Solr 以进行索引的值，而不是 Solr 如何存储它们以最大化搜索结果。

另请注意，[EnglishPorterFilterFactory 已被弃用](http://lucene.apache.org/solr/api-3_6_0/org/apache/solr/analysis/EnglishPorterFilterFactory.html)，建议您改用[SnowballPorterFilterFactory](http://wiki.apache.org/solr/LanguageAnalysis#Notes_about_solr.SnowballPorterFilterFactory)。

# javascript - 在 html5 中绘制线性方程

> ID：14988637
> 
> 赞同：0
> 
> 时间：2013-02-20T19:47:24.583
> 
> 标签：javascript, html, html5-canvas

我正在使用本教程：[http ://www.html5canvastutorials.com/labs/html5-canvas-graphing-an-equation/](http://www.html5canvastutorials.com/labs/html5-canvas-graphing-an-equation/)

在该`drawEquation`方法内部，还有另一个方法`transformContext`（第 153 行）被调用：

```
transformContext = function() {
        var context = this.context;

        // move context to center of canvas
        this.context.translate(this.centerX, this.centerY);

        /*
         * stretch grid to fit the canvas window, and
         * invert the y scale so that that increments
         * as you move upwards
         */
        context.scale(this.scaleX, -this.scaleY);
      }; 
```

这种方法可以绘制引用 a 的方程`0,0 origin`，而不是画布的左上角原点（我知道这一点，因为我将其注释掉并观察了结果）。但是，我不明白这种方法内部发生了什么。a`translate`到画布的中心和a如何`scale`使从原点绘制方程成为可能？

代码中的注释也不是很有帮助。移动上下文或拉伸上下文是如何产生这种效果的？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:07:46.043

当您调用`translate()`上下文时，这会添加到稍后将绘制事物的 x 和 y 坐标。因此，例如，假设我这样做：

```
context.translate(100, 200);
context.fillRect(0, 0, 30, 40); 
```

矩形实际上会在 (100, 200, 30, 40) 处绘制，因为我在绘制它之前进行了翻译。

scale() 方法具有类似的效果，但不是将 x 和 y 相加，而是将它们相乘。如果其中一个比例因子是负数，那么这会产生翻转沿该轴绘制的任何内容的效果。

所以，假设我这样做：

```
context.translate(100, 200);
context.scale(30, -30); 
```

现在我画一条线：

```
context.moveTo(0, 0);
context.lineTo(5, 8); 
```

这相当于：

```
context.moveTo(0 * 30 + 100, 0 * -30 + 200);
context.lineTo(5 * 30 + 100, 8 * -30 + 200); 
```

因此，平移和缩放的效果是，原点现在位于 (100, 200)，沿 x 方向移动 1 向右移动 30，沿 y 方向移动 1 向上移动 30。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:18:46.793

它本身并不是真正从原点绘制的。事实上，方程式抽屉甚至不知道存在轴。该函数只是根据它对画布的了解进行绘制。它知道画布宽度，并且知道您告诉它将画布宽度划分为多少个“单位”（在这种情况下为 20x20，因为“比例”在每个轴上从 -10 到 10；这些参数在`minX`、`minY`、 ETC）。

它可以在中心（上下文）逐个像素地绘制东西，从 -minX （向左偏移）开始到 maxX （向右偏移），然后根据每个比例单位的像素数。在这种情况下，发生的顺序略有不同（比例在绘制之前应用，在第 136 行），但这就是要点。

# html - 使用 HTML5 播放 MKV 时没有声音

> ID：14988638
> 
> 赞同：8
> 
> 时间：2013-02-20T19:47:30.070
> 
> 标签：html, audio, video, html5-video

我正在尝试使用 HTML5 播放 .MKV 文件。视频工作正常，但没有声音，我无法取消静音。

```
<video src="video.mkv" type='video/x-matroska' codecs='theora, vorbis'></video> 
```

我正在使用 Chrome 24。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-08-02T06:29:35.680

这是因为使用了音频编解码器。Chrome 可能不支持它。不，除了找出它正在使用的音频编解码器并更改它或获取支持它的浏览器扩展之外，我不知道如何修复它。我将聘请您将视频转换为不同的格式，如 MP4/OGG。

```
<video width="500px" controls>
  <source src="yourvideo.mp4" type="video/mp4">
  <source src="yourvideo.ogg" type="video/ogg">
  Your browser does not support HTML video.
</video> 
```

你可以 VLC 网络插件。配置并使其工作需要几个步骤。

阅读更多关于[https://wiki.videolan.org/Documentation:WebPlugin#Input_object](https://wiki.videolan.org/Documentation:WebPlugin#Input_object)

```
<embed id="divxplayer" type="video/divx" width="1024" height="768" 
src ="path_to_file" autoPlay=\"true\" 
pluginspage=\"http://go.divx.com/plugin/download/\"></embed> 
```

与此相关的其他问题：[如何在网络浏览器中播放 MKV 视频](https://stackoverflow.com/questions/21192713/how-to-playback-mkv-video-in-web-browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T19:24:28.603

您应该将其转换为这些格式的 MP4、WebM 或 Ogg。我认为，MP4 是最好的，因为它是压缩的（小尺寸/快速加载）。尝试转换程序，如“xilisoft video conveter”或任何在线音频转换器。这里的代码：

```
<!DOCTYPE html> 
<html> 
<body> 

<video width="400" controls>
  <source src="yourfile.mp4" type="video/mp4">
  <source src="yourfile.ogg" type="video/ogg">
  Your browser does not support HTML video.
</video>

</body> 
</html> 
```

# javascript - 使用 Javascript/JQuery 进行 XML/XSL 转换

> ID：14988645
> 
> 赞同：5
> 
> 时间：2013-02-20T19:47:51.557
> 
> 标签：javascript, jquery, xml, xslt

谁能告诉我是否有一种方法可以在客户端使用 Javascript 或 JQuery 进行 XML/XSLT 转换，这种方法适用于所有主要浏览器？（Chrome、Safari、Firefox 和 IE）？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T23:15:28.910

我应该从一开始就说明我编写了这个脚本，但是如果您只想进行一些转换并将一些参数传递给您的 XSLT（没什么花哨的），那么您可以尝试[Magic XML](http://tomdavies.azurewebsites.net/magicxml/)。

您还可以通过`data-`在 DOM 元素上设置一些属性来让它自动提取数据并应用转换。例如...

```
<div data-xml="example.xml" data-xslt="transform.xslt"></div> 
```

...会自动从 example.xml 中提取数据并将 transform.xslt 应用到它。

它适用于 Opera、Chrome、Firefox 和 IE，并且是开源的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T16:58:34.007

Have you considered [Saxon CE](http://www.saxonica.com/ce/index.xml)? It used to require a commercial licence for deployment but the latest version has been released as open source.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:31:50.360

有[一个客户端示例](https://www.w3schools.com/xml/xsl_client.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:46:26.850

我和[Sarissa](http://sourceforge.net/projects/sarissa/)有过相当好的经历。一些 XForms 引擎支持的转换接口也是一种在客户端管理转换的便捷方式。

# java - 多个 Spring 应用程序（OpenJPA、Tomcat）应该如何使用单个对象存储？

> ID：14988646
> 
> 赞同：1
> 
> 时间：2013-02-20T19:47:52.130
> 
> 标签：java, spring, tomcat, openjpa

允许多个 Spring 应用程序共享一组持久域对象的技术有哪些？

这是 Spring 3.0，使用 OpenJPA [和 Postgres 数据库，但这无关紧要]，全部在 Tomcat 7 服务器中运行。我有两个应用程序（一个提供相当典型的 Web MVC 接口，一个提供 SOAP Web 服务），每个应用程序都访问相同的底层实体。

如果我分别部署三个模块（实体、MVC 和 Web 服务），并且如果实体是唯一具有持久性上下文、实体管理器等的模块，那么其他模块如何获取实体管理器，检索并更新对象等？

除了将它们合并到单个 EAR 中并进行部署之外，还有其他选择吗？

# twisted - 在扭曲的 runInteraction 中手动提交事务是否很糟糕？

> ID：14988648
> 
> 赞同：1
> 
> 时间：2013-02-20T19:48:02.773
> 
> 标签：twisted

我有一个用 Twisted 编写的守护进程。它的范围和功能迅速增长，需要从头开始重建以正确处理当前的工作量。

守护进程在 runInteraction 中执行此操作：

1.  选择一行（在这种情况下，从“useraccount”中获取一行）
2.  抓取并处理多个 API 端点（针对该用户）
3.  从 API 端点插入数据
4.  将原始行的数据库记录更新为“成功更新”

第 2 步和第 3 步中发生的活动量稳步增长到需要将其重构为多个 runInteractions 和一些额外的数据库日志记录的地方。

我目前正在重写这个，但需要几天才能投入生产。

在我到达那一点之前，手动调用“COMMIT;ROLLBACK;”是不是很糟糕？在交易的光标上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:40:22.633

这取决于您使用的确切数据库，但是是的，它可能很糟糕，虽然并不可怕。通过发出 COMMIT;ROLLBACK 作为 SQL 而不是 Python 方法调用，您可能会弄乱底层数据库库对您正在进行的事务的想法。但大多数情况下，请记住，您的服务器可能会在执行此工作的中途崩溃；关键`runInteraction`在于它为您提供了一个事务性的工作块，这些工作将一次性执行。如果您不在乎您的数据库最终可能会不一致，并且它正在工作，那么它可能没问题。

# php - 什么是真正的 Quickbooks Online API？

> ID：14988649
> 
> 赞同：4
> 
> 时间：2013-02-20T19:48:26.350
> 
> 标签：php, api, sdk, quickbooks, quickbooks-online

我已经研究了一段时间，我真的找不到合适的解决方案。我发现这个 PHP API 应该可以帮助解决所有这些问题，但它不起作用——或者不清楚如何正确设置它。

这是我尝试使用的 PHP api ~~[https://code.intuit.com/sf/frs/do/viewRelease/projects.php_devkit/frs.php_devkit.latest_sources](https://code.intuit.com/sf/frs/do/viewRelease/projects.php_devkit/frs.php_devkit.latest_sources)~~

*   更新链接：[https ://github.com/consolibyte/quickbooks-php](https://github.com/consolibyte/quickbooks-php)

*   更新的快速入门指南： http: [//www.consolibyte.com/docs/index.php/PHP_DevKit_for_QuickBooks_-_Intuit_Partner_Platform_Quick-Start](http://www.consolibyte.com/docs/index.php/PHP_DevKit_for_QuickBooks_-_Intuit_Partner_Platform_Quick-Start)

我能够在 ipp 开发者网站上连接 OAUTH，这很好。但我无法获得任何数据。

我只是想通过我们的快速手册为我的公司自动化一些流程 - 在线商店集成。

基本上我只是不明白该怎么做才能从在线快速手册中获得一份采购订单列表。任何人都可以对此有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T20:40:01.527

该代码工作得很好 - 你只是做错了什么。（我知道——我是那个代码的开发者，我*每天* *都* *在*用它做你想做的事情）。

话虽如此，由于您没有发布*任何*代码或*任何*错误消息，因此没有人能够帮助您。

**发布一些代码或错误消息。**

其他细节：

> 但我无法获得任何数据。

为什么不？你得到什么具体的错误？你的代码是什么样的？您想获取什么类型的数据？

> 我只是想通过我们的快速手册为我的公司自动化一些流程 - 在线商店集成。

*如果您正在构建的只是为您的*公司提供一次性/自定义集成，那么您就走错了路。Intuit Anywhere（OAuth 的东西）仅适用于 SaaS 应用程序（请参见此处的常见问题解答：[https](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ) ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0080_FAQ ，特别是这个：“我想集成我的自定义（非SaaS，单租户）解决方案与 Intuit Anywhere。我可以这样做吗？”）。

相反，您应该使用 qbXML。下载稳定版： [QuickBooks PHP DevKit](http://consolibyte.com/downloads/quickbooks-php-devkit/)

并查看 docs/example_online_edition.php

*Intuit 的qbXML* （不是 Intuit Anywhere）文档的其余部分在这里：http: [//developer.intuit.com/qbsdk-current/common/newosr/index.html](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)

> 基本上我只是不明白该怎么做才能从在线快速手册中获得一份采购订单列表。

不幸的是，您会发现 QuickBooks Online 可用的两个 API 都不支持获取采购订单。

Intuit 提供的所有 QuickBooks Online API 始终不完整。都不支持采购订单。如果您确实需要采购订单支持，请改用适用于 Windows 的 QuickBooks。

**如果您需要更多帮助/遇到问题，请确保发布您的代码和任何错误消息，以便我们可以进一步帮助您！！！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T13:00:12.780

试试这个开发套件：

[https://github.com/consolibyte/quickbooks-php](https://github.com/consolibyte/quickbooks-php)

这是一个很好的 sdk，对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T18:18:20.263

`curl`看起来（1）或其他东西应该不会太难。[https://developer.intuit.com/apiexplorer?apiname=V3QBO#PurchaseOrder](https://developer.intuit.com/apiexplorer?apiname=V3QBO#PurchaseOrder)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T16:04:13.153

Quickbooks 放弃链接的速度似乎比创建链接的速度更快。我正在尝试使用 QuickBooks API 接口构建 SAAS 应用程序，但找不到上面提到的 SAAS 内容，并且链接已失效。

有谁知道上面提到的两个不同的 API 现在是否已合并？

# sql - SQL Server Linked Server with Oracle - 问题：Select * x Select Columns

> ID：14988659
> 
> 赞同：0
> 
> 时间：2013-02-20T19:49:01.367
> 
> 标签：sql, performance, oracle, linked-server

我`OPENQUERY`在 SQL SERVER 2008 R2 上遇到性能问题：当我运行时：

```
select 
*
from openquery([LINKEDSERVER],'
            SELECT
            COLUMN1,COLUMN2,COLUMN3...(45 columns at all)
            FROM ORACLE_TABLE
            WHERE X>Y') 
```

超过 5 分钟的响应时间（是的，5 分钟）。但是，如果我`select`在 Oracle 端仅使用一列运行相同的操作：

```
select 
*
from openquery([SERVER],'
            SELECT
            COLUMN1
            FROM ORACLE_TABLE
            WHERE X>Y') 
```

响应时间为 17 秒（10.000 条记录）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:59:07.117

双方的等待事件是什么？查询计划是什么？

进程是否在等待网络流量？如果是这样，大概 45 列数据有更多的数据要通过网络传输。如果我们假设它是 45 倍的数据，并且在更快的情况下，17 秒中的 7 秒用于网络流量，那么从一列数据到 45 列数据将使网络等待事件的数量增加 7 秒* 44 列 = 308 秒。因此，如果没有更多信息，通过将您通过网络发送的数据量增加 45 倍来从 17 秒缩短到 5 分钟似乎至少可能是合理的。

当然，如果您告诉我们这`column1`是一个大图像，而其他 44 列是`CHAR(1)`每列消耗一个字节的列，那么网络流量的增加就不是性能变化的合理解释。

是否被`column1`索引？如果是这样，当您想要获取所有 45 列时，可能会有一个非常不同的计划。也许第一个查询计划表明 Oracle 只需扫描一个小的覆盖索引，而第二个计划表明它必须进行更昂贵的表扫描。

# ruby-on-rails - Rails 的控制器如何工作？

> ID：14988661
> 
> 赞同：2
> 
> 时间：2013-02-20T19:49:13.673
> 
> 标签：ruby-on-rails, controller, controller-actions

1.) 是否可以创建不直接与模型交互的控制器动作？（即上传要解析的文件，然后添加到数据库模型中）

2.) 控制器的操作顺序是什么？我不明白控制器操作如何实例化视图，并对用户输入的参数变量做出反应。

有人能解释一下吗，谢谢。

第 II 部分 - 路由无模型表单

因此，对于我当前的上传表单，我有 2 个操作，一个上传操作（从用户获取文件），我希望将其路由到 parse_upload 操作（操作在 upload.html.erb 视图中上传的文件）：

路线.rb：

```
::Application.routes.draw do
    devise_for :users
    resources :revenue_models do
        get 'upload', :on => :collection
        put 'parse_upload',:on => :collection
    end
    root :to => "home#index"
 end 
```

行动：

```
# UPLOAD multiple files from an Exel Doc; integrate them accordingly
def upload
    @uploaded_doc = { :workbook => RubyXL::Parser.new }     
end
# Parse the uploaded file
def parse_upload
@worksheet = RubyXL::Parser.parse(params[:uploaded_doc]       
                  [:workbook]).worksheets[0].extract_data
end 
```

upload.html.erb （我希望此上传表单将其参数推送到 parse_upload 操作）

```
<%= form_tag(:url => {:controller => "revenue_models", :action => "parse_upload"}, :html => {:method => "put", :multipart => true}) do %>
    <%= file_field(:uploaded_doc, :workbook) %>
<%= submit_tag("Upload") %>     
<% end %> 
```

目前我在提交文件时遇到路由错误：没有路由匹配 [POST] "/revenue_models/upload"

我假设一切正常，直到从上传表单路由到 [parse_upload] 操作。我尝试在下面遵循您的更多答案，但由于在我的情况下，我没有使用以现有模型为中心的表单，我有点迷茫。任何线索是什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:03:14.443

1) 是的，当然，控制器根本不需要与任何模型一起使用，或者它们可以与数千个模型一起使用。不要与脚手架混淆。控制器通常位于模型之上的事实是因为它的主要职责是与该模型进行交互，但这不是规则。

2) Rack 完成 HTTP 堆栈后，它被分派到您的路由（在 config/routes.rb 中定义），然后路由器将其分派到您在该文件中指定的控制器/方法。如果您想查看当前应用程序中的所有路线，请输入：“rake routes”。

控制器从机架接收参数。http 请求参数被整齐地打包到一个散列中，并以您可以方便地使用 params() 方法访问的方式发送。除了读取参数之外，控制器不会对参数做任何事情。

至于视图，它们不是由控制器分派的。当控制器调用 render()、render_to_string()、render_with() 等时，相应的视图模板以及布局（您可以指定或由控制器默认设置）被加载和处理（转换为一个字符串，然后通过 HTTP 响应发送出去）。这里唯一的魔力是控制器中的实例变量对视图可用（它们本身可以用作实例变量）

我希望这为你解决了一些问题.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:10:37.837

1）是的，绝对是，控制器“动作”不必处理模型，即

```
ThingController < ApplicationController
  def status
    @status = system("#{Rails.root}/lib/mystatusscript");
  end
end 
```

当 URL 到达服务器时调用动作，并查询路由表，并确定控制器和动作。所以如果你把它放在你的 routes.rb 中：

```
match "/whatever" => "things#status" 
```

并输入

```
http://localhost:3000/whatever 
```

ThingsController (app/controllers/things_controller.rb) 中的状态操作将被调用。

接下来会发生什么，默认情况下，因为你没有告诉它做任何其他事情，rails 将查找 app/views/things/status.html.erb，并渲染它，即：

```
The stats is <%= @status %> 
```

但是你可以防止这种情况，并让 Rails 做其他事情，可能的例子：

```
ThingController < ApplicationController
  def status
    @status = system("#{Rails.root}/lib/mystatusscript");
    render :js=>"$('#status_retreived').show();"
  end
end  

ThingController < ApplicationController
  def status
    system("#{Rails.root}/lib/do_something_server_side");
    render :nothing=>true
  end
end  

ThingController < ApplicationController
  def status
    @status = system("#{Rails.root}/lib/mystatusscript");
    render action=>:edit
  end
end 
```

额外的

让我们做一个表格，看看会发生什么

假设你在 app/views/things/edit.html.erb 中有这个：

```
<%= form_for @thing do |f| %>
  <%= f.input :name %>
  <%= f.submit %>
<% end %> 
```

假设您在 routes.rb 中有这些路线：

```
get '/things/:id/edit' => 'things#edit'
put '/things/:id/update' => 'things#update' 
```

你的控制器有：

```
def update
  @thing = Thing.find(params[:id])
  @thing.attributes = params[:thing]
  @thing.save
end
def edit
  @thing = Thing.find(params[:id])
end 
```

所以这是流程，你用'/things/100/edit'点击你的应用程序

调用编辑操作，实例变量@thing 设置为id 为100 的记录。然后呈现edit.html.erb 视图，显示名称字段的编辑屏幕和提交按钮。

当您单击“提交”时，您将 PUT 到“/things/100/update”

由于路径被定义为“/things/:id/update”的方式，当您进入更新操作时，params[:id] 将包含 100，并且 params[:thing] 将包含表单发布的内容，即您的参数可能包含：

```
params[:thing][:name]
params[:thing][:city]
....
params[:thing][:zip] 
```

ID被抽象成params[:id]，表单数据在params[:thing]

更多的

rails 为你做了很多自动 url 生成，它非常聪明，例如，在 edit.html.erb 中，你有这个：

```
<%= form_for @thing do |f| %>
  <%= f.input :name %>
  <%= f.submit %>
<% end %> 
```

如果您查看生成的 HTML，您会看到如下内容：

```
<form id="edit_thing_100" method="put" action="/things/100/update"> 
```

rails 是如何知道进行更新而不是创建的？因为它检查了@thing 并注意到它之前已经保存到数据库中，所以它不是新记录，所以它必须是更新。

因此，在您看来，您通常会创建各种 URI，这些 URI 通过链接、提交按钮等发送到服务器。当在 routes.rb 中查找它们时，会调用相应控制器中的相应操作。

上传文件

比您想象的要容易，首先您需要添加文件上传字段并稍微更改表单：

```
<%= form_for @thing do ,:html=>{:multipart=>true} |f| %>
  <%= f.input :name %>
  <%= f.file_field :upload %>
  <%= f.submit %>
<% end %> 
```

现在，在更新操作中，您可以执行以下操作：

```
def update
  filename = params[:thing][:upload].original_filename
  filetype = params[:thing][:upload].content_type
  filedata = params[:thing][:upload].read

  File.open("#{Rails.root}/filestorage/#{filename}","wb") { |f| f.write(filedata) } 

  @thing = Thing.find(params[:id])

  @thing.attributes = params[:thing]
  @thing.uploadstoredin = "#{Rails.root}/filestorage/#{filename}"
  @thing.save
end 
```

因为您制作了多部分表单，并且将属性 :upload 声明为 file_field，所以在发布参数时，:upload 参数有三个额外的方法（original_filename、content_type 和 read），Rails MAGIC！

# ios - 用于抓取网页或调用 API（尤其是 iTunes）的最快服务？

> ID：14988664
> 
> 赞同：1
> 
> 时间：2013-02-20T19:49:27.967
> 
> 标签：ios, api, search-engine, web-crawler, itunes

我们需要每天为所有 iOS 应用下载元数据。我们计划通过爬取 iTunes 网站和使用 iTunes 搜索 API 来提取信息。由于有 700K+ 应用程序，我们需要一种有效的方法来做到这一点。

一种方法是在 EC2 上设置一堆脚本并并行运行它们。在我们踏上这条道路之前，是否有像 80legs 这样的服务被人们用来完成类似的任务？本质上，我们想要一些东西来帮助我们非常快速地抓取数十万个页面（或进行一堆 API 调用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:33:46.780

您可能需要查看 Apple 的[Enterprise Partner Feed (EPF)](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html)。它可能**比**获得一堆 EC2 机器或建立爬行基础设施来抓取数据要便宜得多。从 EFP 描述本身：

> 企业合作伙伴源是来自 iTunes 和 App Store 的完整元数据集的数据源。**附属合作伙伴可以将 iTunes 和 App Store 目录的各个方面完全整合到网站或应用程序中。**

EPF 有两种进给模式

> iTunes 以两种模式生成 EPF 数据：
> 
> 全模式
> 增量模式
> 
> 完整的导出文件每周生成一次，其中包含生成当天的 iTunes 元数据的完整快照。增量导出每天生成并包含自上次完全导出以来添加或修改的记录。增量导出相对于它们所基于的完整导出进行定位。

显然，当您想要填充数据时，您将使用完整模式，然后您将使用增量模式进行每日更新。

祝你好运。

# jquery - Jquery ajax 完成回调没有响应 201

> ID：14988666
> 
> 赞同：12
> 
> 时间：2013-02-20T19:49:29.800
> 
> 标签：jquery, coffeescript, jquery-deferred

我有这样一个ajax帖子：

```
$.post("/api/v1/payment_methods/create_credit_card", values)
.done (response) ->
  console.log("GOOD JOB")
.fail (response) ->
  console.log("Adas") 
```

响应是 201，但是，done 似乎没有捕获它，而是会失败。我认为 201 会被认为是成功的，并且会被 done 捕获。关于为什么它不起作用的任何想法？

注意：上面的代码在coffeescript中，这并没有真正影响问题，但解释了我的语法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T19:59:27.733

所以我们找出了问题所在，JSON.parse 抛出了一个语法错误——所以发送的值不是有效的 JSON 格式。发布者无法在 chrome 中看到语法错误，但 firebug 显示了该错误。

这表明每当 Javascript 抛出异常时，响应可能仍然是 200、201、202 等 - 但由于语法错误，将触发 fail() 函数。

*编辑*- 你也应该使用不同的响应，许多使用 200 - OK，但我建议在这种情况下使用 202 - ACCEPTED。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:00:19.860

查看源代码，成功应该在 200 - 300 和 304 之间触发。另一种方法是显式调用 statusCode：

```
$.ajax({
  statusCode: {
    201: function() {
      console.log("HERE");
    }
  }
}); 
```

# java - 如何根据数据库中的类名执行代码

> ID：14988667
> 
> 赞同：0
> 
> 时间：2013-02-20T19:49:39.910
> 
> 标签：java

我的应用程序需要根据某些业务逻辑向客户发送一些通知（将来）。我需要将所有这些通知与数据库中的一些基本信息一起保存（将它们称为 SMSJob 或 EmailJob 等工作）。其中一列将具有每个特定作业的类名。现在将有另一个逻辑，它将查询数据库并获取所有这些作业并开始一个接一个地执行它们。正如 Mikhail 和 Arsen 所建议的，我可以使用反射根据类的名称创建所有类的实例。

有没有类似的东西我可以参考代码。简而言之，我只是想实现石英提供的类似功能。我有非常严格的时间表，所以对文章或代码的任何引用都会对我有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:51:46.277

你需要使用反射。如果您的类实现`Runnable`接口，请执行以下操作：

```
Class <?> clazz = Class.forName (classNameFromDB);
Runnable runnable = (Runnable)clazz.newInstance ();
runnable.run (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:57:38.137

您的类需要使用例如`execute()`方法为它们覆盖一些基本接口。从数据库中检索它们后，您可以使用反射来执行它们。

# ruby-on-rails - 匹配类似于 `pages/1/2/3/4/mass_edit` 的路由

> ID：14988668
> 
> 赞同：0
> 
> 时间：2013-02-20T19:49:40.287
> 
> 标签：ruby-on-rails, routes

我希望能够匹配一个id*数组*而不是单个 id。

我在路由文件中有这个。

```
resources :pages do
  member do
    get "mass_edit"
  end
end 
```

但正如你所知道的，它只支持格式的路由`pages/1/mass_edit`。

我需要支持类似`pages/1/2/3/mass_edit`或 pages/1/2/3/4/10/111/1111/mass_edit` 等格式的路线。像这样的 URL 是通过执行 mass_edit_page_path([1,2,3]) 生成的。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:55:01.587

也许这可以解决问题：

```
resources :pages do
  match "mass_edit/:ids" => 'pages#mass_edit'
end 
```

然后在你的控制器中：

```
def mass_edit
  parse_ids
  # do your edit thing using @ids
end

def parse_ids
  @ids = params[:ids].split(',').map(&:to_i).uniq
end 
```

网址：

```
/pages/mass_edit/1,5,3,24,63 
```

# unix - 如何使用 mule 在 UNIX 中执行命令/脚本文件？

> ID：14988678
> 
> 赞同：1
> 
> 时间：2013-02-20T19:50:29.087
> 
> 标签：unix, mule

H，

我正在尝试找出使用 mule 在 UNIX 框中执行命令/脚本文件的最佳方法。

有人可以确认这是否是通过 mule 在 unix 中执行命令的正确方法吗？

```
<script:component>
<script:script engine="groovy">
def command = "echo hello|/usr/lib/sendmail -v test@test.com"
println "$command"
def cmd = command.execute()
</script:script>
</script:component> 
```

有没有其他方法可以在 unix 中执行 sh / command 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:59:55.337

正如您目前所做的那样，使用 Groovy 可能是最简单和最干净的方法。

希望在您的实际应用程序中，您不会使用 shell 脚本来发送电子邮件：Mule 有一个 SMTP 端点来执行此操作：D

# c# - 用户控件中的 UpdatePanel 不更新客户端控件

> ID：14988681
> 
> 赞同：0
> 
> 时间：2013-02-20T19:50:43.893
> 
> 标签：c#, asp.net, ajax

我已经为此挠头好几个小时了。我有一个用户控件，其中包含标签、文本框等。所有这些都包含在更新面板中。我在 uc 中有一个按钮，单击该按钮会更改标签。

当我将此 uc 放入表单/页面时，无论我做什么，我都看不到标签发生变化。它已更改为服务器端，但未更改为客户端。我总是尝试更新模式，以触发器为条件，我尝试了一切。脚本管理器很好，如果我将代码复制到它自己的页面，它就可以正常工作。脚本管理器在页面上，而不是 uc，所以不是这样。

有没有人有这个或任何例子？

aspx：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/KezberProjectManager.Master" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="KezberProjectManager.WebForm1" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>
<%@ Register assembly="KezberProjectManager" namespace="KezberProjectManager" tagprefix="cc1" %>

<%@ Register src="ProjectView.ascx" tagname="ProjectView" tagprefix="uc1" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div>

            <uc1:ProjectView ID="ProjectView1"  runat="server" PID="76"  />

 </div>

</asp:Content> 
```

UC:

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ProjectView.ascx.cs" Inherits="KezberProjectManager.ProjectView1" %>
<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>    
<style type="text/css">
        .style1
        {
            width: 100%;
        }
    </style>
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" ChildrenAsTriggers="false" runat="server">
    <ContentTemplate>
        <asp:Panel ID="pnl" runat="server">
    <div id="kez_header">
        <table class="style1">
            <tr>
                <td>
                    <h4 runat="server" id="main_label">
                        Project</h4>
                </td>
                <td align="right" valign="middle">
                    <asp:Button ID="btnTasks" runat="server" CssClass="btn btn-primary"
                        Text="Tasks" Width="81px" onclick="btnTasks_Click" />

                </td>
            </tr>
        </table>
    </div>
     <div class="form-horizontal">
        <div class="control-group">
            <label class="control-label" for="<%=txtTitle.ClientID%>">
                Title</label>
            <div class="controls">
                <asp:TextBox ID="txtTitle" placeholder="Title" runat="server"></asp:TextBox>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="<%=txtDescription.ClientID%>">
                Description</label>
            <div class="controls">
                <asp:TextBox ID="txtDescription" placeholder="Description" runat="server" Rows="3" TextMode="MultiLine"></asp:TextBox>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="<%=lblEstimatedHours.ClientID%>">
                Estimated Hours</label>
            <div class="controls">
              <label class="checkbox label-block">
                    <div id="lblEstimatedHours" runat="server">
                        Data</div>
                </label>
            </div>
        </div>
     <div class="control-group">
            <label class="control-label" for="<%=txtColor.ClientID%>">
                Color</label>
            <div class="controls">
                <asp:TextBox ID="txtColor" runat="server" Width="80px" MaxLength="6"></asp:TextBox>
                <asp:FilteredTextBoxExtender ID="txtColor_FilteredTextBoxExtender" 
                    runat="server" TargetControlID="txtColor" ValidChars="0123456789abcdefABCDEF">
                </asp:FilteredTextBoxExtender>
                <asp:ColorPickerExtender ID="txtColor_ColorPickerExtender" runat="server" 
                    TargetControlID="txtColor" SampleControlID="btnColor" PopupButtonID="btnColor">
                </asp:ColorPickerExtender>
                <asp:Button ID="btnColor" runat="server" Text="" CssClass="btn-color" Width="25px" />
            </div>
        </div>
        <asp:Button CssClass="btn" ID="btnEdit" runat="server" Text="Save Changes" onclick="btnEdit_Click" 
          />
    </div>
    </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnEdit" EventName="Click" />
    </Triggers>
</asp:UpdatePanel> 
```

uc代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Transactions;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using LibKezberProjectManager;
using LibKezberProjectManager.Logic;
using LibKezberProjectManager.Utility;
using LibKezberProjectManager.Web;

namespace KezberProjectManager
{
    public partial class ProjectView1 : System.Web.UI.UserControl
    {
        private int workingID = -1;
        private string pid;
        private Project workingProject = null;

        public String PID
        {
            get
            {
                return pid;
            }
            set
            {
                pid = value;
                if (!HandleRequestType())
                {
                    HandleOnClickDisabled();
                    HandleMainLabel();

                    pnl.DefaultButton = "btnEdit";

                    if (workingProject != null)
                    {
                         PopulateEditMode();
                    }
                }

            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnTasks_Click(object sender, EventArgs e)
        {
           // Response.Redirect(String.Format("Tasks.aspx?id={0}", workingProject.ProjectID));
        }

        public void HandleOnClickDisabled()
        {
            //btnEdit.Attributes.Add("onclick", "this.disabled=true;" + GetPostBackEventReference(btnEdit).ToString());
        }

        public bool HandleRequestType()
        {
            string strId = pid;
            bool invalidPage = false;

            //id is required, can be new or valid id
            if (strId == null)
            {
                invalidPage = true;
            }
            else
            {
                int.TryParse(strId, out workingID);

                workingProject = ProjectManager.GetProject(workingID);
                //must be valid project
                if (workingProject == null)
                {
                    invalidPage = true;
                }

            }

            if (invalidPage)
            {
                //Response.Redirect("Forbidden.aspx");
            }

            return invalidPage;
        }

        public void HandleMainLabel()
        {
            main_label.InnerText = workingProject.ProjectTitle;
        }

        public void PopulateEditMode()
        {
            txtTitle.Text = workingProject.ProjectTitle;
            txtDescription.Text = workingProject.ProjectDescription;
            if (workingProject.EstimatedHours != null)
                lblEstimatedHours.InnerText = workingProject.EstimatedHours.ToString();
            else
                lblEstimatedHours.InnerText = "";

            if (workingProject.Color != null)
            {
                System.Drawing.Color color = System.Drawing.Color.FromArgb((int)workingProject.Color);
                txtColor.Text = String.Format("{0:X2}{1:X2}{2:X2}", color.R, color.G, color.B);
            }

        }

        protected void btnEdit_Click(object sender, EventArgs e)
        {
            KezErrorList errors = new KezErrorList();
            bool didSomething = false;
            bool changedColor = false;

            using (var scope = new TransactionScope())
            {
                try
                {
                    if (txtTitle.Text != workingProject.ProjectTitle
                        && txtTitle.Text.Length > 0)
                    {
                        didSomething = true;

                        bool success = ProjectManager.ChangeProjectTitle(
                            workingProject.ProjectID, txtTitle.Text);

                        if (!success)
                        {
                            errors.Add("There was a problem changing the title.");
                        }
                    }
                    else if (txtTitle.Text != workingProject.ProjectTitle)
                    {
                        errors.Add("A title is required.");
                    }

                    if (txtDescription.Text != workingProject.ProjectDescription)
                    {
                        didSomething = true;

                        bool success = ProjectManager.ChangeProjectDescription(
                            workingProject.ProjectID, txtDescription.Text);

                        if (!success)
                        {
                            errors.Add("There was a problem changing the description.");
                        }
                    }

                    try
                    {
                        System.Drawing.Color color =
                            ColorConversion.GetSystemDrawingColorFromHexString("#" + txtColor.Text);

                        if (workingProject.Color == null || color.ToArgb() != (int)workingProject.Color)
                        {
                            changedColor = true;
                            if (!ColorManager.ChangeProjectColor(workingProject.ProjectID, color.ToArgb()))
                            {
                                errors.Add("There was a problem changing the color.");
                            }
                        }
                    }
                    catch (Exception)
                    {
                        errors.Add("The color provided is invalid.");
                    }

                    if (errors.Count() == 0 && didSomething)
                    {
                        if (!SyncManager.Instance.UpdateProject(workingProject))
                        {
                            errors.Add("There was a problem syncing with 1 or more sources.");
                        }
                    }

                    if (errors.Count() == 0)
                    {
                        scope.Complete();
                    }
                }
                catch (Exception ex)
                {
                    errors.Add("An unknown error has occured.");
                }

            }

                if (errors.Count() > 0)
                {
                   // master.ShowErrorAlert(errors.GetErrorString());
                }
                else if (didSomething || changedColor)
                {
                    //master.ShowSuccessAlert();
                    //refresh
                    if (workingProject != null)
                    {
                        workingProject = ProjectManager.GetProject(workingProject.ProjectID);
                    }

                    HandleMainLabel();
                    PopulateEditMode();
                }

                UpdatePanel1.Update();
        }
    }
} 
```

掌握：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="KezberProjectManager.master.cs" Inherits="KezberProjectManager.KezberProjectManager" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet"/>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href="assets/css/kezblu.styles.css" rel="stylesheet"/>

    <style type="text/css">

    </style>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
    <script type="text/javascript" src="assets/js/kezcommon.js"></script>
    <script type="text/javascript">

        $(document).ready
    (
        function () {

            createAutoClosingAlert('.success_alert', 6000);
        }
    );

        function createAutoClosingAlert(selector, delay) {
            var alert = $(selector).alert();
            window.setTimeout(function () { $(alert).slideUp() }, delay);
        }

</script>  

    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">

    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true">
    </asp:ScriptManager>
           <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="default.aspx">KezBlu</a>
          <div class="nav-collapse collapse">
            <ul class="nav">

<asp:Repeater runat="server" id="MenuRepeater">
  <headertemplate>

  </headertemplate>
  <itemtemplate>
     <%# Eval("Content") %>
  </itemtemplate>
  <footertemplate>

  </footertemplate>
 </asp:Repeater>

              </ul>
             <div id="auth">
                 <asp:HyperLink id="lnkSignIn" runat="server">Sign In</asp:HyperLink>
                 <br />
                 <asp:LinkButton ID="lnkSignOut" runat="server" onclick="lnkSignOut_Click">Sign Out</asp:LinkButton>

             </div>

          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div id="wrap">
       <div id="content">
           <div id="alerts">
               <div class="bs-docs-example">
              <div runat="server"  id="success_alert" class="success_alert alert alert-success fade in">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                   <div runat="server" id="success_alert_text">
                </div>
              </div>
             </div>
              <div class="bs-docs-example">
              <div runat="server" id="error_alert" class="error_alert alert alert-error fade in">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <div runat="server" id="error_alert_text">
                </div>
              </div>
             </div>
            </div>
       <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

       </asp:ContentPlaceHolder>
       </div>

    </div>
    </form>
      <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:56:42.507

我相信您缺少用户控件中公开公开 UpdateMode 属性和内部 UpdatePanel 控件的 Update 方法的代码。您需要这样做，以便外部源可以显式刷新用户控件的内容。您需要以下内容：

```
public UpdatePanelUpdateMode UpdateMode
{
    get { return this.UpdatePanel1.UpdateMode; }
    set { this.UpdatePanel1.UpdateMode = value; }
}

public void Update()
{
    this.UpdatePanel1.Update();
} 
```

您现在可以将用户控件添加到您的 .aspx 页面并以声明方式设置内部 UpdatePanel 控件的 UpdateMode 属性：

```
<div>
    <uc1:ProjectView ID="ProjectView1" runat="server" UpdateMode="Conditional" />
</div> 
```

这个过程在以下文档中有很好的解释：

[将 ASP.NET UpdatePanel 控件与用户控件一起使用](http://msdn.microsoft.com/en-us/library/bb398780%28v=vs.100%29.aspx)

# cocoa-touch - 从一个类访问 NSTimer 到另一个类

> ID：14988682
> 
> 赞同：0
> 
> 时间：2013-02-20T19:50:50.563
> 
> 标签：cocoa-touch, ios6

我有 one.m 类，并且在 one.m 类中定义了 NSTimer

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:2.6
                                 target:self
                               selector:@selector(updateView:)
                               userInfo:nil
                                repeats:YES]; 
```

我如何在 mainviewcontroller 中访问这个 NSTimer 来暂停和恢复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:54:21.990

您可以将计时器设为属性，然后从`MainViewController`类中访问它。像这样

```
@interface One: UIDelegate {
    //variables
}
@property(nonatomic, retain) NSTimer* myTimer;

@implementation One
@synthesize myTimer;
//other

@implementation MainViewController
One *one = [[One alloc]init];
one.myTimer; //now you can access the timer 
```

# java - 我在服务器套接字上接受客户端连接时发现了一个 IOException。现在怎么办？

> ID：14988685
> 
> 赞同：2
> 
> 时间：2013-02-20T19:51:07.777
> 
> 标签：java, sockets, io, ioexception, serversocket

[从ServerSocket#accept](http://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#accept%28%29)`IOException`抛出它时表示什么？ 我的意思是：如果我有一个循环接受连接，它将在这里被阻止：

`Socket client = serverSocket.accept();`

如果我在`catch`接受`IOException`期间，这是否意味着我应该关闭服务器套接字，即它很严重，或者我记录异常并返回接受连接，`serverSocket.accept()`就像什么都没发生一样？即服务器套接字功能齐全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:21:59.213

You can get these from running out of file descriptors. Another possibility is SocketTimeoutException, if you have set a timeout and it expires. Another is that the server socket got closed asynchronously. Only the last of these is necessarily fatal.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:18:52.633

我只见过一种情况，accept 抛出异常：打开的文件太多。根据您的应用程序，您可以等待并再次进入接受，关闭尝试关闭/绑定/接受的循环或失败。我们已经实施了这两种策略，但总是以失败告终。同样，如果您的客户寿命短暂，您可能会康复。我们的客户长寿...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T19:56:59.293

从 API 文档：

> IOException 如果在等待连接时发生 I/O 错误。

这意味着如果在这里抛出异常，事情就会变糟。例如端口忙，网络适配器不可用等。所以，请稍等片刻，然后重新连接。如果再次发生这种情况，则无济于事。您无法连接到所选端口。

换端口？更换地址？关闭应用程序并显示错误消息？:(

# html - 如果一张桌子没有头，它应该有一个身体吗？

> ID：14988688
> 
> 赞同：1
> 
> 时间：2013-02-20T19:51:15.297
> 
> 标签：html, html-table, markup

如果 a`table`不包含 a `thead`，是否`tbody`仍应包含？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:58:00.350

从浏览器的角度来看，总是存在一个`tbody`，即使你不插入它。是可选的`tbody`，除非您有`thead`or`tfoot`标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:57:43.830

不，它不是必需的，您可以将`<table>`and`<tr> <td>`用于行和列。

# python - 如果密码无效，则使 AES 解密失败

> ID：14988689
> 
> 赞同：5
> 
> 时间：2013-02-20T19:51:18.203
> 
> 标签：python, encryption, aes

我最近使用 PyCrypto 在一个项目中使用 AES 编写了自己的加密方法。我使用哈希生成一个 32 字节的密码，并使用 CBC 将其提供给 AES-256 位加密。文件输入是使用 PKCS#7 填充以符合可被 16 整除的填充。

我可以毫无意外地加密和解密文件，并且最初与输出文件一起加密的输入文件具有相同的 SHA-256 哈希值。

我发现的唯一问题是，如果我提供了*错误*的密码，解密仍然会发生。这是我正在做的事情的一个问题，因为如果密码错误，我需要快速解密失败。

我怎样才能做到这一点？我听说过其他 AES 加密方法，但 PyCrypto 似乎只支持 ECB、CBC、CFB、OFB、CTR 和 OpenPGP。如何实现加密的强 AES，如果没有正确的密码，它将无法解密？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:09:39.610

确保密文在更改后不会解密的最佳方法是添加身份验证标签。身份验证标签用于提供密文的身份验证和完整性。

该标签可以由密文上的 MAC（例如，使用 SHA-256 的 AES-CMAC 或 HMAC）组成。然而，这需要第二个密钥是安全的。

另一种方法是使用经过身份验证的加密，例如 GCM。GCM 使用单个密钥并生成身份验证标签（大小可配置）。

确保使用正确生成的 IV。IV 可以作为密文的前缀，并且在计算身份验证标签时*应该*包括在内），并且不要忘记您的纯文本的大小可能不会被隐藏。

您应该在解密密文*之前*验证标签的正确性。

*请注意，一般情况下，您不应该对密码进行加密，除非您以后需要访问准确的密码。要验证密码，请改用 PBKDF2。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:12:47.063

AES（或任何其他加密算法）没有任何东西可以让您知道您是否拥有正确的密钥。也就是说，当您真正想要在数学领域之外使用密码学时，这是一个非常有用的功能。

您需要做的是在消息的开头添加一个具有已知值的块，这样在解密第一个块后，您可以将其与已知值进行比较，并知道您是否拥有错误的密钥。如果您要加密的数据有一个已知的标头，您可以改用它。

或者，您可以将密钥的加密哈希（例如 SHA-256）与消息一起发送，攻击者只有在破解哈希的情况下才能恢复密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:25:15.780

要提供所需的快速失败属性，您需要在被加密的数据前添加一个标头。我建议使用与已知常数“[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)”连接的随机“混杂”[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)（类似于加密[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)） ；混杂因素的存在，就像盐一样，提供了一种针对基于预先计算表的攻击的防御措施。

有了这样的标头，您只需解密标头并验证幻数字段；如果它与已知常数不匹配，则密钥无效。如果匹配，则丢弃标头并处理输入的其余部分。

# c# - 如何检查某事物是否等于 C# 中的任何值列表

> ID：14988691
> 
> 赞同：5
> 
> 时间：2013-02-20T19:51:24.733
> 
> 标签：c#

[什么是 IF 语句中的 OR 运算符](https://stackoverflow.com/q/2158580/258482)

我在很久以前就问过这个问题，当我得到（非常有帮助的）答案时，我认为你应该可以说`if (title == "User greeting" || "User name") {do stuff}`。现在，如果不清楚为什么这不起作用，请参考另一个问题及其接受的答案。

但是，我想知道是否有一种方法可以提供任意字符串列表来检查某些内容是否等于其中任何一个。像`if(Array.OR(title, { "User greeting", "User name" })) continue;`这样的事情还是我在黑暗中拍摄？似乎实现起来相当简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T19:55:27.853

您可以尝试包含运算符：

```
String[] array = {"One", "Two", "Three"};
if (array.Contains("One"))
{
     //Do stuff       
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:21:52.117

CorrugatedAir 的示例非常好，但是如果需要，您可以将其包含在内。

```
if (new string[] { "test1", "test2", "test3" }.Contains("test1")) Console.WriteLine("it works"); 
```

它确实有效：http: [//ideone.com/QzbvKV](http://ideone.com/QzbvKV)（感谢 Soner）

所以我的代码看起来像：`if (new string[] { "User greeting", "User name" }.Contains(title)) Console.WriteLine("title contained");`

[http://ideone.com/PYugJu](http://ideone.com/PYugJu)

PS感谢Soner的链接，我以前从未听说过ideone！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-12T10:28:19.053

更全面、更灵活的解决方案，支持字符串比较：

```
using System;
using System.Collections.Generic;
using System.Linq;

public static class StringExtensions
{
    public static bool EqualsAny(this string target, StringComparer comparer, params string[] values)
    {
        return target.EqualsAny(comparer, (IEnumerable<string>) values);
    }

    public static bool EqualsAny(this string target, params string[] values)
    {
        return target.EqualsAny((IEnumerable<string>)values);
    }

    public static bool EqualsAny(this string target, StringComparer comparer, IEnumerable<string> values)
    {
        return values.Contains(target, comparer);
    }

    public static bool EqualsAny(this string target, IEnumerable<string> values)
    {
        return values.Contains(target, StringComparer.OrdinalIgnoreCase);
    }
} 
```

用法：

```
if (title.EqualsAny("User greeting", "User name"))
{
    //do stuff
} 
```

PS重复@Servy的话：这样的解决方案适用于一小组值，对于大集合考虑使用Dictionary、HashSet等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T19:59:19.170

在这种情况下，您可以使用**[Enumerable.Contains()](http://msdn.microsoft.com/en-us/library/bb352880.aspx)**方法。这种方法的*优点是，只要找到匹配的元素，枚举就会终止*。

> 使用默认相等比较器确定序列是否包含指定元素。

```
string[] fruits = { "apple", "banana", "mango", "orange", "passionfruit", "grape" };
string fruit = "mango";
bool hasMango = fruits.Contains(fruit); 
```

这是一个**[演示](http://ideone.com/OvRKgx)**。

不要忘记添加`System.Linq`命名空间。

# php - 实时更新后获取数据

> ID：14988692
> 
> 赞同：5
> 
> 时间：2013-02-20T19:51:31.563
> 
> 标签：php, facebook, real-time

我有一个可以访问用户提要的应用程序。我根据本教程为应用程序设置了实时更新： [//developers.facebook.com/docs/reference/api/realtime/](http://developers.facebook.com/docs/reference/api/realtime/)

本质上，当用户向他们的提要发布操作时，我成功地从 Facebook 接收到我的回调链接的信息。信息如下所示：

```
{"object":"user","entry":[{"uid":"629498222","id":"629498222","time":1361371026,"changed_fields":["feed"]}]} 
```

我的烦恼从这里开始。我读过的关于实时更新的每个教程都在这一点上完结，没有真正解释如何获取更新的真实数据。

所以我正在尝试各种各样的事情，特别是下面的一段代码，来获取用户的提要，以便我可以访问最新的帖子。这是在我的回调 php 文件中：

```
 $app_token_url = 'https://graph.facebook.com/oauth/access_token?client_id='
               .$app_id.'&client_secret='.$app_secret
               .'&grant_type=client_credentials';
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $app_token_url);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 $res = curl_exec($ch);
 parse_str($res, $token);

 if (isset($token['access_token'])) {
  curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/629498222/feed'
                              .'?access_token='
                              .$token['access_token']);
   $res = curl_exec($ch);
   if ($res && $res != 'null') {
     print_r($res);
   }
} 
```

结果并不如预期。我得到该用户的帖子，但前提是它们是公开的。即使应用程序可以访问用户流，我也没有得到该用户的所有帖子。知道为什么吗？

任何帮助是极大的赞赏。我真的需要一种方法来通过从发布更新的用户那里获取实际数据来完成实时更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T23:08:38.903

实时服务的主要目的是让应用程序知道它们缓存的数据何时过时并且应该刷新。它并非旨在成为“内容订阅”服务。

因此，当您收到通知时，预计您会单独调用更新的信息（例如，当用户下次登录时）。特别是从用户的流中读取，可能是 read_stream 权限未授予应用程序令牌的情况，尽管我找不到任何确定的文档来确认这一点。我发现的最接近的是此页面底部的“应用程序访问令牌的其他功能” [https://developers.facebook.com/docs/opengraph/howtos/publishing-with-app-token/](https://developers.facebook.com/docs/opengraph/howtos/publishing-with-app-token/)

# php - 来自没有控制器的模块的 ZF2 配置

> ID：14988697
> 
> 赞同：3
> 
> 时间：2013-02-20T19:51:47.737
> 
> 标签：php, zend-framework2

我目前正在构建一个模块以在多个项目中用作可重用库，但是由于它是一个库，因此不需要控制器。例如，我正在尝试为 Marketo soap API 创建一个 zf2 模块。用户在 /ROOT/config/autoload/local.php 中添加他们的密钥和 wsdl 位置。配置将包括类似'marketo'=>array()，

现在我遇到的问题是我想让自己和使用该模块的其他人能够执行类似...

```
$marketo = new \Marketo\Client\Client(); 
```

并在 \Marketo\Client\Client() 类中让构造函数读取 $config['marketo']; 的数组键；

然而，我可以将所有这些都放在一个 ini 文件中，但我更愿意让它与 zf2 中的其他所有内容在配置方面保持相似。

所以总结一下，我想获得一个合并的zend配置的数组键，以便在类中使用，比如......

```
class Marketo{
    private $key;
    private $pass;
    public function __construct(){
        $c = \Zend\Config\Config('marketo);
        $this->key = $c['key'];
        $this->pass = $c['pass'];
    }
} 
```

**============ 根据以下答案，自 ZF 2.1.1 起完全有效的解决方案 =============**

模块结构如下所示（使用新示例，以便我可以重新开始）+ 表示目录名称 - 表示文件名

```
modules
  - Application /* Standard setup with an IndexController */
  - Cybersource /* The new module to be added */
      + config
         - module.config.php
      + src
         + Cybersource
            + Client
               - Client.php
            + ServiceFactory
               - ClientServiceFactory.php
      - Module.php
      - autoload_classmap.php 
```

**模块.config.php**

```
return array(
    'service_manager' => array(
        'factories' => array(
            'Cybersource\Client\Client' => 'Cybersource\ServiceFactory\ClientServiceFactory',
        )
    ),
    'cybersource' => array(
        'Endpoint' => 'https://ics2wstest.ic3.com/commerce/1.x/transactionProcessor', // test environment
        'WSDL' => 'https://ics2wstest.ic3.com/commerce/1.x/transactionProcessor/CyberSourceTransaction_1.80.wsdl',
        'TXKey' => '',
        'MerchID' => '',
    ),
); 
```

**客户端.php**

```
namespace Cybersource\Client;

class Client {

    private $config;

    public function __construct($config) {
        $this->config = $config;
    }

    public function getConfig() {
        return $this->config;
    }

} 
```

**客户端服务工厂.php**

```
namespace Cybersource\ServiceFactory;

use Cybersource\Client\Client;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class ClientServiceFactory implements FactoryInterface {

    public function createService(ServiceLocatorInterface $serviceLocator) {
        $config = $serviceLocator->get('Config');

        return new Client($config['cybersource']);
    }

} 
```

**模块.php**

```
namespace Cybersource;
use Zend\ModuleManager\Feature\ConfigProviderInterface;

class Module implements ConfigProviderInterface {

    public function getAutoloaderConfig() {
        return array(
            'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
            )
        );
    }

    public function getConfig() {
        return include __DIR__ . '/config/module.config.php';
    }

} 
```

**autoload_classmap.php**

```
<?php
// Generated by ZF2's ./bin/classmap_generator.php
return array(
    'Cybersource\Module'                              => __DIR__ . '/Module.php',
    'Cybersource\Client\Client'                       => __DIR__ . '/src/Cybersource/Client/Client.php',
    'Cybersource\ServiceFactory\ClientServiceFactory' => __DIR__ . '/src/ServiceFactory/ClientServiceFactory.php',
); 
```

**在 application.config.php 中激活模块后，我可以在我的应用程序模块上的 IndexController 中使用它，方法是：**

```
<?php

namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
class IndexController extends AbstractActionController {

    public function indexAction() {
        $c = $this->getServiceLocator()->get('Cybersource\Client\Client');
        $conf = $c->getConfig();
        var_dump($conf);
        return new ViewModel();
    }

} 
```

上面的控制器输出将转储配置的输出，因为我向 Client 类添加了一个名为 getConfig() 的函数以用于显示/测试目的。

再次感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:15:02.767

您应该定义一个`ServiceFactory`来创建您的`Client`. ServiceFactory 可以获取合并的模块配置并将其设置在您的客户端上。现在你已经完全分离了，你的类甚至可以在没有 Zend\Config 的情况下重用。如果您有很多配置选项，您可以创建一个单独的配置类扩展`\Zend\StdLib\AbstractOptions`并将其传递给您的客户端。

```
namespace Marketo\Service;

class ClientServiceFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        //Get the merged config of all modules
        $configuration = $serviceLocator->get('Config');
        $configuration = $configuration['marketo'];

        $client = new \Marketo\Client\Client($configuration['key'], $configuration['pass']);
    }
} 
```

现在在服务定位器中注册您的客户工厂。`module.config.php`在或中执行此操作`Module.php`

```
public function getServiceConfig()
{
    return array('factories' => array(
        'marketo_client' => 'Marketo\Service\ClientServiceFactory'
    );
} 
```

用户现在可以从 ServiceManager 获取您的客户端。所有配置都整齐地设置。

```
$sm->get('marketo_client'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:28:15.840

您可能会定义一个模块，如下所示：

```
<?php

namespace Marketo;

use Zend\ModuleManager\Feature\ConfigProviderInterface;

class Module implements ConfigProviderInterface
{
    public function getConfig()
    {
        return array(
            'service_manager' => array(
                'factories' => array(
                    'Marketo\Client\Client' => 'Marketo\ServiceFactory\ClientServiceFactory',
                ),
            ),
            'marketo' => array(
                'key'  => 'DEFAULT',
                'pass' => 'DEFAULT',
            ),
        );
    }
} 
```

注意：我更喜欢使用`getConfig`over，`getServiceConfig`因为它更灵活（可覆盖），并且在设置应用程序时方法调用会被缓存。

然后`Marketo\ServiceFactory\ClientServiceFactory`：

```
<?php

namespace Marketo\ServiceFactory;

use Marketo\Client\Client;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class ClientServiceFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $config = $serviceLocator->get('Config');

        return new Client($config['marketo']['key'], $value['marketo']['pass']);
    }
} 
```

之后，您将能够通过调用以下命令（例如在控制器中）从服务定位器中拉出 Marketo 客户端：

```
$marketoClient = $this->getServiceLocator()->get('Marketo\Client\Client'); 
```

在这一点上，`Marketo\Client\Client`无论如何，你的构建`key`都`pass`设置为`DEFAULT`.

让我们继续并通过创建一个`config/autoload/marketo.local.php`文件来覆盖它（在您的应用程序根目录中，而不是在模块中！）：

```
<?php

return array(
    'marketo' => array(
        'key'  => 'MarketoAdmin',
        'pass' => 'Pa$$w0rd',
    ),
); 
```

这是非常重要的，因为你永远不应该重新分发你的`key`and `pass`，所以把这个文件放到`.gitignore`or `svn:ignore`！

所以基本上我们在这里所做的是：

1.  设置服务管理器配置以使用服务工厂来实例化我们的 Marketo 客户端
2.  设置服务工厂以使用合并配置（服务名称`'config'`：）来实例化 Marketo 客户端
3.  为实际应用实例添加本地配置
4.  通过服务定位器检索 Marketo 服务。

# javascript - 如何从d3中的文件中读取数据

> ID：14988698
> 
> 赞同：2
> 
> 时间：2013-02-20T19:51:51.473
> 
> 标签：javascript, d3.js

我有以下格式的文件中的数据..

```
{"name":1, "children": [2,3,4,5,6]}
{"name":2, "children": [12,13,54,25,16]}
{"name":3, "children": [22,34,43,25,26]} 
```

基本上我试图得到这样的可视化：http: [//mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

但不是直接加载json..我想从这个文件中查找它..所以，类似：`{"name":1, "children": [2,3,4,5,6]}` 然后我点击2..然后它读取节点2的子节点并进一步填充图形？

所以基本上，而不是加载完整的json ..我想让它可以交互，用户只需点击节点，然后我查找它并进一步填充它。我该怎么做呢。我不是 js 方面的专家 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:15:00.660

如果你真的想加载数据，你可以使用 JQuery ( [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) )

否则，您可以使用 d3 的 json 函数来加载数据，但只显示特定的分​​支（例如过滤）

如果您的问题是 json 文件太大而无法加载到内存中，那么您可以通过使用 HTML 5 的 FileReader 读取文件来手动完成，然后将选定的块传递给 d3。

# ios - 在后台执行 AFHTTPOperation 并返回结果

> ID：14988699
> 
> 赞同：2
> 
> 时间：2013-02-20T19:51:58.620
> 
> 标签：ios, objective-c, objective-c-blocks, afnetworking

我目前正在开发一个 iOS 应用程序，我使用 AFNetworking 与远程 API 进行通信。我想做的是制作不同的函数来返回 API 响应。我目前的代码是：

```
-(void)requestMethod:(NSString *)method arguments:(id)arguments
{
    NSDictionary *parameters=@{@"jsonrpc": @"2.0", @"method": method, @"params": arguments};
   [httpClient postPath:methodPath parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSError *error;
        NSDictionary *responseParsed=[NSJSONSerialization JSONObjectWithData:responseObject options:NSJSONReadingMutableContainers error:&error];

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"%@",error);
    }];

} 
```

现在这段代码由块执行，当我收到来自服务器的响应时调用。当在任何线程上调用时会返回某个方法的响应的函数的最佳实现是什么？喜欢：

```
-(NSArray *)getUsersFromAPI; 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:59:28.693

您可以使您的方法以生成的 NSArray 作为参数的块，并将其作为 arg 传递给 fetching 函数：

```
-(void)getUsersFromAPIWithResponse:(void(^)(AFHTTPRequestOperation *operation, NSArray *users))responseBlock {
    NSDictionary *parameters=@{};
    [httpClient postPath:methodPath parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSError *error;
        NSArray *responseParsed = //do something cool;
        responseBlock(operation, responseParsed);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"%@",error);
    }];
} 
```

# android - 像Battery Widget Reborn一样的电池圈

> ID：14988701
> 
> 赞同：2
> 
> 时间：2013-02-20T19:52:01.217
> 
> 标签：android, canvas, battery

我正在尝试根据电池百分比画一个圆圈。我有以下代码：

```
Bitmap.Config conf = Bitmap.Config.ARGB_8888; // see other conf types
Bitmap bmp = Bitmap.createBitmap(200, 200, conf);

Paint mPaint = new Paint();
mPaint.setDither(true);
mPaint.setColor(Color.BLUE);
mPaint.setStyle(Paint.Style.STROKE);
mPaint.setStrokeJoin(Paint.Join.ROUND);
mPaint.setStrokeCap(Paint.Cap.ROUND);
mPaint.setStrokeWidth(5);

circle = new Path();
circle.addCircle(100, 100, level, Direction.CW);

Canvas canvas = new Canvas(bmp);
canvas.drawPath(circle, mPaint); 
```

我正在尝试类似于 Battery Widget Reborn，它是基于百分比绘制的圆形路径，有人可以帮忙。

编辑：

下面是我想要完成的一个镜头

![百分比圆的图像](../Images/74a4e8c46d3cb72af7acb74bc5ae14d5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T19:33:46.347

您可以将此类用作完整的工作示例。您也可以在视图中添加文本，但这超出了问题范围......

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.RectF;
import android.view.View;

public class DrawView extends View {

    Paint mPaint = new Paint();

    public DrawView(Context context) {
        super(context);            
    }

    @Override
    public void onDraw(Canvas canvas) {

        Paint mPaint = new Paint(Paint.FILTER_BITMAP_FLAG |
                Paint.DITHER_FLAG |
                Paint.ANTI_ALIAS_FLAG);
        mPaint.setDither(true);
        mPaint.setColor(Color.GRAY);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeWidth(1);

        int size = 200;
        int radius = 190;
        int delta = size - radius;
        int arcSize = (size - (delta / 2)) * 2;
        int percent = 42;

        //Thin circle
        canvas.drawCircle(size, size, radius, mPaint);

        //Arc
        mPaint.setColor(Color.parseColor("#33b5e5"));
        mPaint.setStrokeWidth(15);
        RectF box = new RectF(delta,delta,arcSize,arcSize);
        float sweep = 360 * percent * 0.01f;
        canvas.drawArc(box, 0, sweep, false, mPaint);

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:25:05.977

您应该可以使用`Path.addArc()`. 您只需要定义封闭矩形的边界、起始角度以及要扫描的度数。

就像是：

```
RectF box = new RectF(0,0,bmp.getWidth(),bmp.getHeight());
float sweep = 360 * level * 0.01f;
circle.addArc(box, 0, sweep); 
```

# c++ - Wifi 原始数据传输

> ID：14988702
> 
> 赞同：0
> 
> 时间：2013-02-20T19:52:03.673
> 
> 标签：c++, c, linux, wlanapi

我正在尝试实现一个安装在两台 PC 中的程序，允许使用 802.11 传输原始数据包数据。好吧，我想通过 Wifi 接口与外部设备通信。该设备有一个 RS232-wlan 模块。为了从可能的 PC 上命令设备，我必须根据设备通信协议发送命令和消息。有什么想法可以开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:54:23.503

尝试 lorcon 库获取原始数据包

[https://code.google.com/p/lorcon/](https://code.google.com/p/lorcon/)

# android - OnActionItemClicked 中的错误

> ID：14988705
> 
> 赞同：2
> 
> 时间：2013-02-20T19:52:13.380
> 
> 标签：android

我有一个非常奇怪的问题。我在使用 SherlockActionBar 时成功设置了上下文操作栏。当我选择其中一个操作模式按钮时，显示吐司消息可以正常工作。当我用我的方法调用交换它时`saveRing()`，我会强制关闭。错误必须在我的`saveRing()`方法之内，但我无法弄清楚。`saveRing`当我从弹出的上下文菜单中调用它时，该方法运行良好。

我的保存环（）：

```
public boolean saveRing(int raw_resource, String title) {
        byte[] buffer = null;
        InputStream fIn = getBaseContext().getResources()
                .openRawResource(raw_resource);
        int size = 0;

        try {
            size = fIn.available();
            buffer = new byte[size];
            fIn.read(buffer);
            fIn.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            return false;
        }

        String path = "/sdcard/media/audio/ringtones/";
        String filename = title + ".mp3";

        boolean exists = (new File(path)).exists();
        if (!exists) {
            new File(path).mkdirs();
        }
        FileOutputStream save;
        try {
            save = new FileOutputStream(path + filename);
            save.write(buffer);
            save.flush();
            save.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        }
        sendBroadcast(
                new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri
                        .parse("file://" + path + filename)));

        File k = new File(path, filename);

        ContentValues values = new ContentValues();
        values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
        values.put(MediaStore.MediaColumns.TITLE, title);
        values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
        values.put(MediaStore.Audio.Media.ARTIST, "Epic Meal Time ");
        values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
        values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
        values.put(MediaStore.Audio.Media.IS_ALARM, false);
        values.put(MediaStore.Audio.Media.IS_MUSIC, false);

        Uri pURI = MediaStore.Audio.Media.getContentUriForPath(k
                .getAbsolutePath());

        // remove entry every time so we don't get duplicate entries and have a
        // problem setting a 2nd time
        getContentResolver().delete(
                pURI,
                MediaStore.MediaColumns.DATA + "=\"" + k.getAbsolutePath()
                        + "\"", null);

        Uri nURI = getContentResolver().insert(pURI,
                values);

        RingtoneManager.setActualDefaultRingtoneUri(this,
                RingtoneManager.TYPE_RINGTONE, nURI);
        Toast.makeText(this, title + " Ringtone set",
                Toast.LENGTH_LONG).show();

        return true;
    } 
```

日志猫：

```
02-19 21:38:47.691: E/AndroidRuntime(20492): FATAL EXCEPTION: main
02-19 21:38:47.691: E/AndroidRuntime(20492): java.lang.NullPointerException
02-19 21:38:47.691: E/AndroidRuntime(20492):    at vartanian.android.epicmealtimepro.Tab3Fragment$mActionModeCallback.onActionItemClicked(Tab3Fragment.java:346)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.actionbarsherlock.internal.ActionBarSherlockNative$ActionModeCallbackWrapper.onActionItemClicked(ActionBarSherlockNative.java:243)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.policy.impl.PhoneWindow$DecorView$ActionModeCallbackWrapper.onActionItemClicked(PhoneWindow.java:2552)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.app.ActionBarImpl$ActionModeImpl.onMenuItemSelected(ActionBarImpl.java:931)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.view.menu.ActionMenuView.invokeItem(ActionMenuView.java:514)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.view.menu.ActionMenuItemView.onClick(ActionMenuItemView.java:99)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at android.view.View.performClick(View.java:4091)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at android.view.View$PerformClick.run(View.java:17036)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at android.os.Handler.handleCallback(Handler.java:615)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at android.os.Looper.loop(Looper.java:137)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at android.app.ActivityThread.main(ActivityThread.java:4962)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at java.lang.reflect.Method.invokeNative(Native Method)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at java.lang.reflect.Method.invoke(Method.java:511)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
02-19 21:38:47.691: E/AndroidRuntime(20492):    at dalvik.system.NativeStart.main(Native Method)
02-19 21:38:49.262: I/Process(20492): Sending signal. PID: 20492 SIG: 9 
```

谢谢！编辑：这是我在第 346 行的代码：`ma.saveRing(R.raw.quaq_language, values[2]);`

有错误的行取决于 ListFragment 中的哪个项目调用 CAB。我用这样的`switch`语句设置它：

```
case R.id.ringtone:
                switch (viewId) {
                case 0:
                    ma.saveRing(R.raw.ohhh_gurllll, values[0]);
                    break;
                case 1:
                    ma.saveRing(R.raw.pork_balls, values[1]);
                    break; 
```

`viewId`是 ListFragment 中的位置。问题似乎是 values[] 为空，但我不知道为什么。这是它被初始化的地方：

```
public class Tab3Fragment extends SherlockListFragment {

    String[] values = new String[] { "Ohh Gurl", "Pork Balls", "Language",
            "Really Good Idea", "Rice Paper Bacon Condom",
            "Rise and Shine", "Roll One Up Homie",
            "Save The Hate For Twitter", "Snap, Crackle, Pop",
            "Let's Get Girls", "Spanish",
            "We Make Steak Look Like Cabbage", "Wake Up McDonalds",
            "Super Moist", "Stupid, Tasty Birds", "Bacon Moment",
            "Today We Eat Smart", "We Are Gonna Die On Youtube",
            "Drunk Off Pancakes", "Ketchup", "We Eat All Our Babies",
            "Maximum Meat Experience", "Stop Hating", "What Up Bitches",
            "Whatcha Know About Bullets",
            "Whatcha Know About Terrible Food", "CANADA", "Beiber Concert",
            "Ending Riceism", "You Ain't Got What We Got", "F*cking Noob",
            "Constructed Meat Base", "Want Some Of These Nuts" }; 
```

这是填充数组适配器的字符串数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:08:49.293

So I finally figured it out. I passed getSherlockActivity() into my saveRing() and used that context throughout the method. I'm not sure why there was a problem with using the `SherlockFragmentActivity` context but this is how it looks:

```
public boolean saveRing(int raw_resource, String title, Context context) {
        byte[] buffer = null;
        InputStream fIn = context.getResources()
                .openRawResource(raw_resource);
        int size = 0;

        try {
            size = fIn.available();
            buffer = new byte[size];
            fIn.read(buffer);
            fIn.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            return false;
        }

        String path = "/sdcard/media/audio/ringtones/";
        String filename = title + ".mp3";

        boolean exists = (new File(path)).exists();
        if (!exists) {
            new File(path).mkdirs();
        }
        FileOutputStream save;
        try {
            save = new FileOutputStream(path + filename);
            save.write(buffer);
            save.flush();
            save.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        }
        context.sendBroadcast(
                new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri
                        .parse("file://" + path + filename)));

        File k = new File(path, filename);

        ContentValues values = new ContentValues();
        values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
        values.put(MediaStore.MediaColumns.TITLE, title);
        values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
        values.put(MediaStore.Audio.Media.ARTIST, "Epic Meal Time ");
        values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
        values.put(MediaStore.Audio.Media.IS_NOTIFICATION, false);
        values.put(MediaStore.Audio.Media.IS_ALARM, false);
        values.put(MediaStore.Audio.Media.IS_MUSIC, false);

        Uri pURI = MediaStore.Audio.Media.getContentUriForPath(k
                .getAbsolutePath());

        // remove entry every time so we don't get duplicate entries and have a
        // problem setting a 2nd time
        context.getContentResolver().delete(
                pURI,
                MediaStore.MediaColumns.DATA + "=\"" + k.getAbsolutePath()
                        + "\"", null);

        Uri nURI = context.getContentResolver().insert(pURI,
                values);

        RingtoneManager.setActualDefaultRingtoneUri(context,
                RingtoneManager.TYPE_RINGTONE, nURI);
        Toast.makeText(context, title + " Ringtone set",
                Toast.LENGTH_LONG).show();

        return true;
    } 
```

# c - loadrunner 为每个 VUser 上传唯一的文件

> ID：14988706
> 
> 赞同：2
> 
> 时间：2013-02-20T19:52:15.747
> 
> 标签：c, file-upload, loadrunner

我想在每次运行 VUser 脚本时上传一个唯一的文件（如 Controller 场景中的 Vuser 数），我在不同的论坛上找到了一些示例，并将它们放在一起尝试完成此任务：

```
Action()
{

char command[100];
sprintf(command, “copy C:\\source_dir\\srcFile.txt C:\\source_dir\\srcFile-%s.txt”,              
lr_eval_string (”{iteration_number}”));
system(command);

web_submit_data("FileUpload",
"Action={URL}",
"Method=POST",
"EncType=multipart/form-data",
"TargetFrame=",
"RecContentType=text/html",
"Mode=HTML",
ITEMDATA,
"Name=File", "Value=C:\\source_dir\\srcFile-%s.txt", "File=yes", ENDITEM,
LAST);

sprintf(command, “del C:\\source_dir\\srcFile-%s.txt”, lr_eval_string (”{iteration_number}”));
system(command);

return 0;

} 
```

然而，这个脚本每次都会创建 100 个文件，这不是我想要的共犯。1.如何修改我的脚本以创建 100 个唯一文件（一次）。2.然后在控制器中为每个 VUser 运行一次上传（web_submit_data 函数）。3.然后到底删除文件？

也许将文件生成放在 init 中，将文件删除放在 VUser 脚本的末尾部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:15:51.400

你有几个选择。

1.  您可以预先生成测试期间需要的所有文件，然后将完全限定的文件名作为唯一参数传递给虚拟用户脚本。如果文件位于负载生成器上，那么您将需要处理一些读取争用，这将影响您的虚拟用户，因为他们都在争夺驱动器上的读取头。如果文件位于网络附加存储上，那么您也需要将文件通过网络移动到负载生成器，然后再从生成器中移出进行上传。如果在测试期间将文件单独放在小型辅助驱动器（SSD）上，则可以显着提高读取访问权限。
2.  您可以即时创建文件。(a) 定义随机文件大小 (b) 定义随机文件名 (c) 在本地上下文中写入文件 (d) 在脚本中使用文件进行上传 (e) 删除文件。所有这些都将在迭代的上下文中进行，假设上传的文件对于每个用户的每次迭代都需要具有唯一的文件名和大小。为此，您必须在性能测试期间违反许多关于使用硬盘的最佳实践规则。你会有几十个？数百？所有虚拟用户线程都在争夺对本地磁盘子系统的访问权限，这通常是减慢所有虚拟用户的方法，因为 CPU 被发送用于高优先级 I/O 中断任务并远离用户进程，加上不可避免的等待当您的线程创建|写入|读取然后删除文件时，硬盘驱动器的读/写磁头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:33:27.890

我认为您的脚本几乎就在那里。我看到的问题是您正在创建的文件没有足够唯一的文件名。您的 100 个用户中的每一个都将从相同的迭代编号开始。

您可以尝试类似的方法，在脚本的参数列表中创建一个名为“ **vuser** ”的新参数，并将其分配类型为“ **Vuser ID** ”。当您在控制器中运行它时，这将填充为单个 vuser 的编号。这将确保您的用户在使用文件时不会互相踩踏。将此添加到您的文件名中，如下所示：

```
sprintf(command, "copy C:\\source_dir\\srcFile.txt C:\\source_dir\\srcFile-%s%s.txt,              
lr_eval_string ("{iteration_number}")
lr_eval_string ("{vuser}") ); 
```

只要您的所有用户都在 Controller 中的同一组中，这将起作用。如果您在多个组中使用它，那么通过将“组名”参数添加到文件名来执行相同的操作。

# c# - 现在不支持 Xna，有什么更好的选择？

> ID：14988709
> 
> 赞同：10
> 
> 时间：2013-02-20T19:52:20.743
> 
> 标签：c#, xna, slimdx, sharpdx

Xna 不受支持，不幸的是我最近开始了游戏编程（约 9 个月）。什么是更好的选择，DirectX 或 OpenGL。

现在，我认为 DirectX 或 OpenGL 没有 C# 的官方库，那么对于新手来说，哪一个会更好呢？

我听说过诸如 Mono、SharpDx 和 SlimDx 之类的东西。但是 DirectX 与 OpenGl 相比有什么优势吗，反之亦然。

另外，这些 Mono、SharpDx 和 SlimDx 叫什么？他们有特定的名字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:46:07.720

XNA 状态不足为奇……
我记得我们曾经有过托管 DirectX :)

我认为如果你以 Windows 操作系统为目标，你应该使用 VS2012/C#，因为到目前为止 VS 是最丰富、最直接、最方便的 IDE。C# 作为语言本质上是非常学术的——在 MS 对与 OOP/OOD 相关的抽象数学模型进行实质性调查之前，该语言没有任何内容。因此，从这个意义上说，他们充当“大叔”，确保尽可能多地清除潜伏在开发者路径中的不良设计或设计缺陷。
换句话说，要使某些东西工作起来要困难得多在 C# 中存在设计缺陷。
**从这个意义上说，DirectX 只是一堆 DLL，您可以将其合并到您的游戏中以提供您想要的 UI。**

如果您打算针对更多操作系统，我会推荐 Code-Blocks 作为 IDE 和 OPENGL 作为您的 UI 提供程序，但请记住，它是 C++ 编程不太方便，更不用说您将打开您的应用程序出现特定错误，这可能发生在特定操作系统的..

您的最后一个选项是基于 Java 的，它为您提供了我提到的两个选项的好处，但执行速度会慢 44% 左右，这在我看来是一个不错的游戏选择。

在选择开发路径时，您需要非常仔细地考虑您的预算，例如，考虑在跨平台情况下对游戏进行 QA 与仅在 Windows 中进行 QA 的成本……</p>

# c# - 如何在 C# 中打开和关闭系列

> ID：14988720
> 
> 赞同：0
> 
> 时间：2013-02-20T19:52:57.943
> 
> 标签：c#, graph, charts, data-visualization

我正在尝试构建一个 FFT 绘图程序。我已经得到了 FFT 所需的一切，但现在我一直在进行绘图。我想让用户打开输入数据和输出数据的绘图。我希望他们能够将它们放在同一个图表上。目前我得到的代码是

```
if(myCheckBox.Checked == true)
{
for(int i = 0 ; ...)
      {chart is filled}
}
else
{
  turn off series being displayed  
} 
```

这是我遇到严重麻烦的其他部分，并希望得到一些指示（哈！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:00:17.953

要在 MSChart 中隐藏系列，请以`Enabled`这种方式使用该属性：

```
msChart.Series["Series"].Enabled = false; 
```

并再次展示它：

```
msChart.Series["Series"].Enabled = true; 
```

# r - 在 R 中，“通过命名空间加载（而不是附加）”是什么意思？

> ID：14988722
> 
> 赞同：37
> 
> 时间：2013-02-20T19:53:17.060
> 
> 标签：r, package

**在 R 中， “通过命名空间加载（而不是附加）”**的包是什么意思`sessionInfo()`？

**编辑**：

例如：

```
> sessionInfo()

R version 2.15.2 (2012-10-26)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

---->>>> loaded via a namespace (and not attached):
---->>>> [1] tools_2.15.2 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T20:06:13.813

It means the package (In this case R) can access the package functions/objects, but the user can not without explicitly loading the tools package where as stats, graphics, etc. are loaded and ready to go for the user.

Here's an example:

```
sessionInfo()
file_ext("file.com")
tools::file_ext("file.com")
sessionInfo() 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-20T22:04:15.507

当评估`library(foo)`时，R 首先将包 foo 加载到内存中，然后将包附加到`search()`路径。其他操作，例如`loadNamespace("foo")`or `foo::fun`，或者当第三方指示它从 foo 导入符号时，加载包但不将其附加到搜索路径。由于 R 是一种动态语言，每个函数调用都涉及对可用符号的遍历以找到第一个匹配的符号。通过分离附加和加载操作并因此限制要搜索的符号数量，它很有效，并且避免了不必要的名称冲突。

在上面的示例中，工具包已加载，但（尚未）附加。当在 R 命令提示符下键入符号时，R 首先在全局名称空间中查找符号（返回的第一个元素`search()`，如果未找到，则在 的连续元素中查找`search()`。由于未附加工具，因此工具中的符号为没有解决。

```
> file_ext
Error: object 'file_ext' not found 
```

`tools::file_ext`尽管如此，无论工具是否在搜索路径上，都可以通过 访问它们。

# c# - 如何更改 RadListPicker 中 selectedIndex 的值

> ID：14988726
> 
> 赞同：0
> 
> 时间：2013-02-20T19:53:26.963
> 
> 标签：c#, telerik, windows-phone-8, itemssource, selectedvalue

在我的 Windows Phone 应用程序中，我重写了使用一些信息`OnNavigatedTo`填充 a 的方法。`RadListPicker`我有两个数组：一个是大小为 n 的预填充 DateTime 数组，第二个是大小为 n 的预填充字符串数组。我想将这两个数组分配给`RadListPicker`，这样字符串数组就是显示的内容，即用户认为是选择的内容，而 DateTimeArray 是 RadListPicker.SelectedValue 返回的内容。

当我以这种方式尝试时，调试器中断

```
private void ShowResults(DateTime[] arrayDateTime, string[] arrayString, timeTypeEnum timeType)
        {
            radListPicker.ItemsSource = arrayString;
            radListPicker.SelectedValue = arrayDateTime;
            radListPicker.SelectedIndex = 4;
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:50:56.893

奇怪的是，这个值`arrayDateTime`是 a`DateTime[] Array`所以你需要选择 ItemIndex 或一些序数值，例如

```
radListPicker.SelectedValue = arrayDateTime[radListPicker.SelectedItemIndex]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T07:26:29.780

你在这里混合类型。首先，您将字符串类型的项目填充到列表选择器中。然后，稍后您告诉列表选择器选择 DateTime 类型的值。您需要确保两个数组都包含相同的类型（例如，两个带有字符串对象的数组或两个带有 DateTime 对象的数组）。

在谷歌上快速搜索我发现设置所选项目也可以使用

```
radListPicker.SelectedItems.Add(); 
```

因此，在您的情况下，当两个数组都具有相同类型的元素时，您可以使用：

```
private void ShowResults(DateTime[] selectedItems, DateTime[] allItems, timeTypeEnum timeType)
{
    radListPicker.ItemsSource = allItems;
    for (var item in selectedItems)
        radListPicker.SelectedItems.Add(item);
} 
```

# objective-c - 在 ARC 下正确定义静态 NSString* c 样式数组

> ID：14988735
> 
> 赞同：3
> 
> 时间：2013-02-20T19:53:58.620
> 
> 标签：objective-c, automatic-ref-counting

在我的实现文件中，我有一个 NSString* 的静态二维 c 样式数组，定义为：

```
static NSString* TheColorArray[][3] = {
    [RedType] = {@"red", @"blah", @"YES"},
    [BlueType] = {@"blue", @"yadda", @"YES"},
    .....
} 
```

有问题的方法访问数组，如下所示：

```
-(NSString*)value:(NSInteger)value {
    return TheColorArray[value][0];
} 
```

这一切似乎在大约 99% 的时间里都能正常工作......但是当它无法工作时，它总是会失败`EXC_BAD_ACCESS - KERN_INVALID_ADDRESS at 0x11`

我已经验证我的`value`参数没有超出数组的范围。地址似乎很奇怪`0x11`......这意味着数组尚未初始化。

那么这里发生了什么？对于 ARC 和 c 风格的数组，我需要注意一些“问题”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:55:57.830

文档清楚地表明*结构*不能包含 ARC 对象，我们可以争辩说这也适用于多维数组基准，尽管它没有这么说。你试过这个：

`static NSString __unsafe_unretained * TheColorArray[][3] = ...`

这会将此处分配的对象从 ARC 中取出，并消除编译器在不应该出现的地方积极清空的任何可能性。

假设这就是问题所在。也许如果您能够退后一步使用调试器，您能否看到它出错时正在取消引用的符号？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:00:45.977

事实证明，Crashlytics 没有正确报告崩溃。根据 iPad 上的“真实”崩溃报告，该地址不是 0x11，而是看起来更像合法地址的东西。经过进一步测试，我发现有一种极端情况`value`不在我的数组范围内，导致崩溃。

鉴于一切，我仍将转向对象`NSArray*`，`NSString*`因为我还不明白 ARC 是否能很好地与 c 样式数组一起工作。

# java - 通过按下 JButton 运行外部 jar 文件

> ID：14988741
> 
> 赞同：0
> 
> 时间：2013-02-20T19:54:30.537
> 
> 标签：java, swing, jar, jbutton, launch

我正在尝试运行与按下 JButton 不同的目录中的 jar 文件。

我有按钮和 GUI 设置，但我不知道如何启动单独的 jar 文件。

我在这个代码块中放了什么

```
private void jButton1MouseReleased(java.awt.event.MouseEvent evt) {                                       

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:00:55.380

尝试这个

```
try {
    Desktop.getDesktop().open(new File("F:\\Folder\\Folder\\folder\\yourprogram.jar"));
} catch (IOException ex) {
    System.out.println(ex.getMessage());
} 
```

例如打开一个 .exe 文件（通过 java 打开 ODBC DSN）

```
 try {
        Desktop.getDesktop().open(new File("C:\\Windows\\SysWOW64\\odbcad32.exe"));
    } catch (IOException ex) {
        try{
            Desktop.getDesktop().open(new File("C:\\Windows\\System32\\odbcad32.exe"));
        }catch(Exception exx)
        {
            System.out.println(exx.getMessage());
        }
    } 
```

# ruby - 使用 JSON 将哈希数组写入文件？

> ID：14988742
> 
> 赞同：4
> 
> 时间：2013-02-20T19:54:37.077
> 
> 标签：ruby, arrays, json, hashmap

目前我正在这样做：

```
badLinks = Array.new
badLinksFile = File.new(arrayFilePath + 'badLinks.txt', 'w+')
badLinksFile.puts badLinks.to_json 
```

该数组`badLinks`包含哈希并且是：

```
brokenLink = Hash.new
brokenLink[:onPage] = @lastPage
brokenLink[:link] = @nextPage
badLinks.push(brokenLink) 
```

当我查看文件时，它是空的。这应该工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:32:47.390

有几件事要检查：

```
badLinksFile = File.new(arrayFilePath + 'badLinks.txt', 'w+') 
```

应该可能`'w'`代替' `w+`'。从 IO 文档：

```
  "w" | 只写，截断现有文件
       | 长度为零或创建一个新文件进行写入。
  -----+-------------------------------------------- ------------
  "w+" | 读写，将现有文件截断为零长度
       | 或创建一个新文件进行读写。

```

我会更像这样编写代码：

```
bad_links = []

brokenLink = {
  :onPage => @lastPage,
  :link => @nextPage
}

bad_links << brokenLink

File.write(arrayFilePath + 'badLinks.txt', bad_links.to_json) 
```

这没有经过测试，但它更有意义，并且是惯用的 Ruby。

# java - 在 CLASSPATH 上永久添加文件

> ID：14988745
> 
> 赞同：1
> 
> 时间：2013-02-20T19:54:48.327
> 
> 标签：java, macos, command-line, classpath

我需要在我的 CLASSPATH 上添加一些文件，所以我使用以下命令：

```
export CLASSPATH=$CLASSPATH:/usr/local/lib/antlr-4.0-complete.jar 
```

尽管每次重置终端时，我都必须再次添加类路径。有没有办法可以在类路径上永久添加上述文件？

命令在 OSX 上执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:57:21.060

您应该编辑一个名为的文件`~/.profile`并添加

```
export CLASSPATH=$CLASSPATH:/usr/local/lib/antlr-4.0-complete.jar 
```

到那个文件。如果`~/.profile`不存在则创建它。每次启动新的 shell 会话时都会执行该文件。

# jquery - 使用 jQuery 将页脚固定在底部

> ID：14988747
> 
> 赞同：-1
> 
> 时间：2013-02-20T19:54:57.370
> 
> 标签：jquery, html, css, firefox

我试图让 div.col-wrapper 使用绝对位置在高分辨率屏幕上粘在 firefox 的底部，但由于某种原因，它与 jQuery 幻灯片效果相混淆。我用完了可能的解决方案，除了在 jQuery 中让它坚持到底。

jQuery

```
$(document).ready(function(){
    $(".box").show();
    $(".list").hide();

$(".wbut").click(function(){
    $(".wbut").hide("fade");
    $(".box").hide("fade");
    $(".list").show("slide", { direction: "down" }, 1000);
});

$(".wbut2").click(function(){
    $(".box").show();
    $(".wbut").show();
    $(".list").hide("slide", { direction: "down" }, 1000);
});

  }); 
```

css

```
.list {
background: #d1d1d1;
}

.col-wrapper {
width: 100%;
position: relative;
bottom: 0;
left: 0;
background: #d1d1d1;
box-shadow: 0px -5px 8px #777;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:31:40.883

我将绝对位置添加到错误的元素。它应该是 .list 而不是 .col-wrapper

# java - 将意图转移到 if 语句中

> ID：14988749
> 
> 赞同：0
> 
> 时间：2013-02-20T19:54:59.213
> 
> 标签：java, android, android-intent

我有以下代码：

```
buttons[i].setOnClickListener(new View.OnClickListener()
{
  @Override 
  public void onClick(View v) 
  {
    try{
      startActivity(new Intent(names[x][0]));
    }
    catch(ActivityNotFoundException e){
      if (x==1) {
        Intent intent = newIntent(Intent.ACTION_VIEW,Uri.parse("market://details?id=uk.co.nickfines.RealCalc"));
      }
    }
    try {
      startActivity(intent);
    } catch (ActivityNotFoundException f) {
      // Google Play Store app not available.
    }
  }
}); 
```

在我发表声明后它开始`intent cannot be resolved to a variable`出错。在我这样做之前一切正常。问题是什么？`startActivity(intent)``Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=uk.co.nickfines.RealCalc")``if`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:05:14.597

您的变量`intent`是在块内定义的，因此它仅在块中可见。如果您想在其他块中使用它，请将其定义向上移动。或将开始活动移至您的`catch`街区。无论如何，您在其他地方与它无关，因为只有当异常被抛出并且`x==1`意图存在时。

还有更多推荐。有常见的java编码约定。阅读您的代码非常*困难。*我已经为您格式化并解决了您的问题。这是它的样子。

```
 buttons[i].setOnClickListener(new View.OnClickListener() {
        @Override 
        public void onClick(View v) {
        try{
            startActivity(new Intent(names[x][0]));
        } catch(ActivityNotFoundException e) {
            if (x==1) {
                Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=uk.co.nickfines.RealCalc"));
                try {
                    startActivity(intent);
                } catch (ActivityNotFoundException f) {
                }
            }
        }

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:01:00.540

试试这个 ：

```
buttons[i].setOnClickListener(new View.OnClickListener()
{
    @Override 
    public void onClick(View v) 
    {
        Intent intent;
        try{
            startActivity(new Intent(names[x][0]));
        }
        catch(ActivityNotFoundException e){
            if (x==1) {
                intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=uk.co.nickfines.RealCalc"));
            }
        }
        try {
            startActivity(intent);
        } catch (ActivityNotFoundException f) {
        // Google Play Store app not available.
        }
    }
    // TODO Auto-generated method stub
}
); 
```

您的意图是 if 语句的本地

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:03:05.407

在尝试创建应用程序之前，请先学习一些基本的 Java。

在这里，您仅在 catch 块中定义意图：

```
catch(ActivityNotFoundException e){
    if (x==1) {Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=uk.co.nickfines.RealCalc"));
} 
```

意图的范围仅在该块中，因此`startActivity(intent);`如您所见，将给出编译器错误。

```
Intent intent;
try{
    startActivity(new Intent(names[x][0]));
} catch(ActivityNotFoundException e) {
    if (x==1){
       intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=uk.co.nickfines.RealCalc"));
    }
}
try {
    if(intent!=null){
        startActivity(intent);
    }
} catch (ActivityNotFoundException f) {
    // Google Play Store app not available.
} 
```

那`if(x==1)`看起来很邪恶。它在做什么？

# ruby-on-rails - 安装 io 控制台时出错

> ID：14988757
> 
> 赞同：1
> 
> 时间：2013-02-20T19:55:28.727
> 
> 标签：ruby-on-rails, ruby

我一直在对一些不会更新的 gem 进行故障排除。这是最后一个，我似乎无法找到解决方案。非常感谢任何帮助。提前致谢。

```
C:\Downloads\Software>gem update  
Updating installed gems  
Updating io-console  
Temporarily enhancing PATH to include DevKit...  
Building native extensions.  This could take a while...  
ERROR:  Error installing io-console:  
        ERROR: Failed to build gem native extension.  

        C:/Ruby193/bin/ruby.exe extconf.rb  
checking for rb_w32_map_errno() in ruby.h... yes  
checking for sys/ioctl.h... no  
checking for rb_io_get_write_io() in ruby/io.h... yes  
checking for dup3() in unistd.h... no  
creating Makefile  

make  
generating console-i386-mingw32.def  
compiling console.c  
console.c: In function 'console_dev':  
console.c:688:2: warning: implicit declaration of function 'rb_cloexec_open'  
linking shared-object io/console.so  
console.o: In function `console_dev':  
C:\Ruby193\lib\ruby\gems\1.9.1\gems\io-console-0.4.1/console.c:688: undefined re
ference to `rb_cloexec_open'  
C:\Ruby193\lib\ruby\gems\1.9.1\gems\io-console-0.4.1/console.c:695: undefined re
ference to `rb_cloexec_open'  
collect2: ld returned 1 exit status  
make: *** [console.so] Error 1  

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/io-consol
e-0.4.1 for inspection.  
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/io-console-0.4.1/./gem_mak
e.out  
Nothing to update 
```

当我尝试创建一个新应用程序时，我得到了这个：

```
C:\Sites\rails_projects>rails new simple_cms -d mysql  
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Co
uld not find railties (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.7
.7, json-1.5.4, minitest-4.6.1, minitest-2.5.1, rake-10.0.3, rake-0.9.2.2, rdoc-
3.12.1, rdoc-3.9.5] (Gem::LoadError)
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `
to_spec'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
        from C:/RailsInstaller/Ruby1.9.3/bin/rails:18:in `<main>' 
```

# opengl - Clojure 在运行时编辑代码拆分为不同的文件

> ID：14988759
> 
> 赞同：4
> 
> 时间：2013-02-20T19:55:43.037
> 
> 标签：opengl, emacs, clojure, lwjgl, nrepl

我最近一直在尝试使用 lwjgl 库在 Clojure 中测试 OpenGL。我从这段代码开始：

```
(ns test.core
  (:import [org.lwjgl.opengl Display DisplayMode GL11]))

(defn init-window
  [width height title]
  (Display/setDisplayMode (DisplayMode. width height))
  (Display/setTitle title)
  (Display/create))

(defn update
  []
  (GL11/glClearColor 0 0 0 0)
  (GL11/glClear GL11/GL_COLOR_BUFFER_BIT))

(defn run
  []
  (init-window 800 600 "test")
  (while (not (Display/isCloseRequested))
    (update)
    (Display/update))
  (Display/destroy))

(defn -main
  [& args]
  (.start (Thread. run))) 
```

这在 emacs 中运行良好，使用 nREPL 插件，我可以启动它并在它运行时更改某些内容（例如调用`glClearColor`）。

我决定把它分成两个单独的文件，这样我就可以重用这个`init-window`函数：

```
(ns copengl.core
  (:import [org.lwjgl.opengl Display DisplayMode GL11]))
(defn init-window
  [width height title]
  (Display/setDisplayMode (DisplayMode. width height))
  (Display/setTitle title)
  (Display/create))

(defn mainloop
  [{:keys [update-fn]}]
  (while (not (Display/isCloseRequested))
    (update-fn)
    (Display/update))
  (Display/destroy)) 

(defn run
  [data]
  (init-window (:width data) (:height data) (:title data))
  (mainloop data))

(defn start
  [data]
  (.start (Thread. (partial run data)))) 
```

然后在一个单独的文件中

```
(ns test.core
  (:import [org.lwjgl.opengl Display DisplayMode GL11])
  (:require [copengl.core :as starter]))

(def -main
  [& args]
  (starter/start {:width 800 :height 600 :title "Test" :update-fn update}) 
```

然而，这并不能让我在跑步时改变。我必须关闭窗口然后`-main`再次执行以查看更改。

到目前为止，我已经尝试将最后两个代码摘录放入一个文件中，但也没有成功。但是，如果我将调用从更改`update-fn`为我的更新函数 ( `update`) 的名称，而它们在同一个文件中，我可以在它运行时进行更改。

我猜这是因为当我创建带有更新函数的地图时，它传递了实际函数，所以如果我`update`通过使用 nREPL 插件重新定义来评估它，则没有效果，因为该`mainloop`函数正在使用该函数 - 不查找符号`update`并使用它。

有没有办法在两个文件之间拆分代码，同时仍然能够在运行时更改代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:46:35.287

通过放在`#'`var 名称前面，将 var update 而不是当前包含在 var update 中的函数传递给它。这将导致每次调用更新函数时都在 var 中查找它的内容。

```
(def -main
  [& args]
  (starter/start {:width 800 :height 600 :title "Test" :update-fn #'update}) 
```

这对性能的影响很小，这就是为什么它不是默认设置，尽管它在这种情况下非常有用并且成本很低。

# javascript - 如何在 AngularJS 中的不同控制器之间进行交互

> ID：14988760
> 
> 赞同：6
> 
> 时间：2013-02-20T19:55:45.113
> 
> 标签：javascript, angularjs

简单的例子。我有一个球员。它分为 2 个部分：歌曲部分（当前播放）和播放列表部分。

我有 2 个控制器（实际上我将有 2 个控制器，这就是我要问的原因）：SongCtrl 和 PlalistCtrl；

但是它们之间如何交互呢？例如：当我开始播放歌曲时，我还需要在播放列表中突出显示它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T20:21:21.633

最好的方法是使用服务。假设您有一个负责播放歌曲的服务（过于简化）：

```
.factory( 'musicPlayer', function() {
  var currentSongId;

  // public API
  return {
    getCurrentSong: function () { return currentSongId; },
    setCurrentSong: function ( id ) { currentSongId = id; }
  };
}); 
```

然后，您可以在播放列表中使用它：

```
.controller( 'PlaylistCtrl', function ( $scope, musicPlayer ) {
  $scope.isCurrentSong = function( idx ) {
    if ( $scope.currentSong == idx ) return true;
  };

  $scope.play = function( idx ) {
    musicPlayer.setCurrentSong( idx );
  };

  $scope.$watch( function () { 
    return musicPlayer.getCurrentSong()
  }, function ( id ) {
    $scope.currentSong = id;
  }); 
}); 
```

所以你的视图可以访问它：

```
<li ng-repeat="song in songs" ng-class="{ active: isCurrentSong($index) }">
  <a ng-click="play($index)">{{song.name}}</a>
</li> 
```

您可以在其他控制器中以类似方式访问它以获取当前正在播放的歌曲。没有更多细节，很难更具体，但这是最佳实践方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:00:57.650

`directives`您可以使用或让控制器相互交互`services`。

关于你的例子：

```
hen I start playing song I need also highlight it inside of playlist. 
```

在这种特殊情况下，您应该避免直接从控制器更改 DOM。例如，您可以有一个`directive`突出显示播放列表中正在播放的歌曲，

# function - 对于 VBScript，子程序有什么好处？

> ID：14988761
> 
> 赞同：4
> 
> 时间：2013-02-20T19:55:48.370
> 
> 标签：function, vbscript, subroutine

我可能只是误解了两者之间的区别：如果子程序和函数之间的唯一区别是函数可以选择返回值而子程序没有，那么在什么情况下您会使用子程序？为什么不总是使用函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:06:32.207

当我需要不返回任何信息但仅因其副作用而被调用的“命名代码段”时，我会使用 Subs。当我需要返回一些信息（并且（通常）没有副作用）的“命名代码段”时，我会使用函数。我很高兴我可以在 VBScript 中明确说明我的意图。

**补充：为什么@AutomatedChaos 的提议（评论）被误导了：**

1.  在设计完成之前，您不应该编写代码。要么您不需要检查文件删除操作的结果（然后编写一个 Sub），要么您必须检查（然后编写一个函数）。你可能稍后会意识到你犯了一个错误，但你必须改变的不仅仅是 npc 的类型。
2.  在函数中检查一个动作的结果是一个承诺，即您的脚本将**始终**合理地处理该动作的失败（因为函数的每次调用都必须检查返回值）。自由地授予将此类函数调用为 Sub 的许可会使此承诺无效。

# python - 清理面向公众的 API 的最佳实践？

> ID：14988762
> 
> 赞同：2
> 
> 时间：2013-02-20T19:55:53.253
> 
> 标签：python, postgresql, nginx, memcached, pyramid

作为我们服务的一部分，我们正在构建公开可用的 API，允许用户在我们的平台上执行简单的任务（主要用于自动化目的）（如评论、关闭已完成的任务和创建新任务）。

API 是基于 HTTPS 的，需要以使用您的登录名和密码调用 /login 的形式进行授权才能接收令牌（可以在您的个人资料中取消验证）。如果重要的话，我们会使用金字塔、postgresql 和 nginx。

这是我的第一个此类项目，我想知道我应该如何保护这个东西不吃掉我们所有的传输或处理能力（其中一些 API 函数非常繁重）。我想在一个示例的上下文中考虑它，其中某人在他的脚本（使用我们的 API）中犯了小错误，并且它会在同一任务下每秒发布评论（或列出该任务的所有评论）。2天。

如果我强制所有读取通过缓存（例如，在接下来的 10 秒内有效），那么它会命中我们的 memcached 服务器而不是 postgres 基础 - 是否足以解决这个问题（因此其他用户不会受到影响）或只是傻？

如果我要检查某种计时器并等待至少 5 秒，然后再进行另一次写入（两次写入之间的 5 秒） - 可以吗？或者我会通过计时器检查杀死我们的服务器？

我想这更多是关于清理公共 API 的最佳实践的问题，因此它不会咬它的创建者。你怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:13:11.317

您正在寻找的是[速率限制](http://en.wikipedia.org/wiki/Rate_limiting)。如果没有更多关于如何编写 API 的知识，我无法就如何实现它给你具体的建议，但你最好的办法是限制 API 使用者的速率，这样他们就不会对你的服务的其他用户产生不利影响。

# python - 打印数字，看不懂错误

> ID：14988763
> 
> 赞同：0
> 
> 时间：2013-02-20T19:55:54.150
> 
> 标签：python, python-3.x

我的（简单）代码在最后一行给出了错误。我究竟做错了什么？

问题：

> 循环并以接收到的相同顺序打印出数字列表中的所有偶数。不要打印序列中 237 之后的任何数字。

我究竟做错了什么？

```
numbers = [951, 402, 984, 651, 360, 69, 408, 319, 601, 485, 980, 507, 725, 547, 544, 
615, 83, 165, 141, 501, 263, 617, 865, 575, 219, 390, 984, 592, 236, 105, 942, 941, 
386, 462, 47, 418, 907, 344, 236, 375, 823, 566, 597, 978, 328, 615, 953, 345, 
399, 162, 758, 219, 918, 237, 412, 566, 826, 248, 866, 950, 626, 949, 687, 217, 
815, 67, 104, 58, 512, 24, 892, 894, 767, 553, 81, 379, 843, 831, 445, 742, 717, 
958, 609, 842, 451, 688, 753, 854, 685, 93, 857, 440, 380, 126, 721, 328, 753, 470, 
743, 527]
# your code goes here
for number in numbers:
    if number <= 237 and number % 2 == 0:
        continue
        print numbers 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:57:26.777

您需要丢失`continue`，它会将循环移动到下一次迭代。我认为您正在寻找`break`（当您找到时`237`）。

只需 print `number`，但要`print()`为 Python 3 创建一个函数。

```
for number in numbers:
    if number == 237:
        break
    if number % 2 == 0:
        print(number) 
```

# php - 使用 AJAX 从 php 设置返回值

> ID：14988765
> 
> 赞同：-6
> 
> 时间：2013-02-20T19:56:07.937
> 
> 标签：php, ajax

我现在太困惑了……我的 index.html 包含一个简单的`HTML form`，我正在使用`POST`我将值发送到一个`php`文件，该文件最终执行一些数据库操作并返回一些消息……就这么简单。问题是我无法在 index.html 文件中打印此消息。有人帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:58:59.207

将 index.html 设为 index.php 并将您的 php 代码移动到索引文件的顶部，然后将表单提交给自身。这允许您使用 echo 或类似方法进行实时用户反馈 - 无需 AJAX :)

# xml - 不寻常的 XSLT 转换 - XML 的结构化

> ID：14988770
> 
> 赞同：2
> 
> 时间：2013-02-20T19:56:37.810
> 
> 标签：xml, xslt, transformation

我遇到了一些不寻常的问题。我的任务是“结构化 XML”。这是一个输入 XML（示例）：

```
<documents>
  <document>Review</document>
  <document_id>REV#1</document_id>
  <item>List of terms</item>
  <item_id>10</item_id>
  <item_description>Terms used in documents</item_description>
  <item_attribute>Term</item_attribute>
  <item_attribute_name>SA</item_attribute_name>
  <item_attribute_value>Some Attribute</item_attribute_value>
  <item_attribute_name>SOA</item_attribute_name>
  <item_attribute_value>Some Other Attribute</item_attribute_value>

  <document>Interface</document>
  <document_id>AC-163</document_id>
  <item>List of terms</item>
  <item_id>15</item_id>
  <item_description>Another item</item_description>
  <item_attribute>Term</item_attribute>
  <item_attribute_name>Name#1</item_attribute_name>
  <item_attribute_value>Att#1</item_attribute_value>
  <item_attribute_name>Name#2</item_attribute_name>
  <item_attribute_value>Att#2</item_attribute_value>
</documents> 
```

我应该做的是将其转换为以下实体结构：

文档 1..* 文档 1..1 项目 1..* 项目 1..1 属性 1..* 属性

这意味着：元素'documents'可能包含许多'document'，'document'仅包含一个名为'items'的元素，元素'items'可能包含许多元素'item'，等等。

上述示例的预期输出为：

```
<documents>
    <document>
        <document_id>REV#1</document_id>
        <items>
            <item>
                <id>10</id>
                <description>Terms used in documents</description>
                <attributes>
                    <attribute>
                        <name>SA</name>
                        <value>Some Attribute</value>
                    </attribute>
                    <attribute>
                        <name>SOA</name>
                        <value>Some Other Attribute</value>
                    </attribute>
                </attributes>
            </item>
        </items>
    </document>
    <document>
        <document_id>AC-163</document_id>
        <items>
            <item>
                <id>15</id>
                <description>Another item</description>
                <attributes>
                    <attribute>
                        <name>Name#1</name>
                        <value>Att#1</value>
                    </attribute>
                    <attribute>
                        <name>Name#2</name>
                        <value>Att#2</value>
                    </attribute>
                </attributes>
            </item>
        </items>
    </document>
</documents> 
```

我在这项任务中遇到了一些麻烦……请问您有什么帮助吗？这是一些不寻常的“结构化”xml - 你有什么想法吗？

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:10:29.877

如果您使用 XSLT 2.0，这应该很容易通过[XSLT 分组](http://www.xml.com/pub/a/2003/11/05/tr.html)实现，但如果您被 XSLT 1.0 卡住，这里有一个与 XSLT 1.0 兼容的解决方案。

### 样式表

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <!-- Identity transform -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="document">
    <!-- Store the unique ID of the current element into a variable. -->
    <xsl:variable name="id" select="generate-id()"/>

    <xsl:copy>
      <xsl:apply-templates select="following-sibling::document_id[1]"/>
      <items>
        <!--
        Apply all <item_attribute_name> elements whose first preceding
        <document> sibling is the element that's currently being processed. This
        is to keep from processing *all* of the rest of the
        <item_attribute_name> elements in the document.
        -->
        <xsl:apply-templates select="following-sibling::item
          [preceding-sibling::document[1][generate-id() = $id]]"/>
      </items>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="item">
    <xsl:variable name="id" select="generate-id()"/>

    <xsl:copy>
      <xsl:apply-templates select="following-sibling::item_id[1]"/>
      <xsl:apply-templates select="following-sibling::item_description[1]"/>
      <attributes>
        <xsl:apply-templates select="following-sibling::item_attribute_name
          [preceding-sibling::item[1][generate-id() = $id]]"/>
      </attributes>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="documents">
    <xsl:copy>
      <xsl:apply-templates select="document"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="item_description">
    <description>
      <xsl:apply-templates/>
    </description>
  </xsl:template>

  <xsl:template match="item_id">
    <id>
      <xsl:apply-templates/>
    </id>
  </xsl:template>

  <xsl:template match="item_attribute_name">
    <attribute>
      <name>
        <xsl:apply-templates/>
      </name>

      <xsl:apply-templates select="following-sibling::item_attribute_value[1]"/>
    </attribute>
  </xsl:template>

  <xsl:template match="item_attribute_value">
    <value>
      <xsl:apply-templates/>
    </value>
  </xsl:template>

  <xsl:template match="item_attribute"/>

</xsl:stylesheet> 
```

### 输入

```
<documents>
  <document>Review</document>
  <document_id>REV#1</document_id>
  <item>List of terms</item>
  <item_id>10</item_id>
  <item_description>Terms used in documents</item_description>
  <item_attribute>Term</item_attribute>
  <item_attribute_name>SA</item_attribute_name>
  <item_attribute_value>Some Attribute</item_attribute_value>
  <item_attribute_name>SOA</item_attribute_name>
  <item_attribute_value>Some Other Attribute</item_attribute_value>

  <document>Interface</document>
  <document_id>AC-163</document_id>
  <item>List of terms</item>
  <item_id>15</item_id>
  <item_description>Another item</item_description>
  <item_attribute>Term</item_attribute>
  <item_attribute_name>Name#1</item_attribute_name>
  <item_attribute_value>Att#1</item_attribute_value>
  <item_attribute_name>Name#2</item_attribute_name>
  <item_attribute_value>Att#2</item_attribute_value>
</documents> 
```

### 输出

```
<?xml version="1.0"?>
<documents>
  <document>
    <document_id>REV#1</document_id>
    <items>
      <item>
        <id>10</id>
        <description>Terms used in documents</description>
        <attributes>
          <attribute>
            <name>SA</name>
            <value>Some Attribute</value>
          </attribute>
          <attribute>
            <name>SOA</name>
            <value>Some Other Attribute</value>
          </attribute>
        </attributes>
      </item>
    </items>
  </document>
  <document>
    <document_id>AC-163</document_id>
    <items>
      <item>
        <id>15</id>
        <description>Another item</description>
        <attributes>
          <attribute>
            <name>Name#1</name>
            <value>Att#1</value>
          </attribute>
          <attribute>
            <name>Name#2</name>
            <value>Att#2</value>
          </attribute>
        </attributes>
      </item>
    </items>
  </document>
</documents> 
```

# javascript - 在 KnockoutJS 可观察数组中交换元素

> ID：14988771
> 
> 赞同：0
> 
> 时间：2013-02-20T19:56:41.930
> 
> 标签：javascript, knockout.js

我想知道是否有一种简单的方法可以使用 KnockoutJS 在可观察数组中交换 2 个元素。我认为下面的函数可以解决问题，但我相信我在这里遗漏了一些东西。

```
self.swap = function () {
    var tmp = self.dataArray()[0];
    self.dataArray()[0](self.dataArray()[1]);
    self.dataArray()[1](tmp);
} 
```

设置 tmp 变量按预期工作，但是当我尝试自己设置数组成员时，我收到错误“对象不支持属性或函数 0”

# javascript - 在一个 Google Analytics 帐户下跟踪多个域名

> ID：14988774
> 
> 赞同：1
> 
> 时间：2013-02-20T19:56:52.133
> 
> 标签：javascript, google-analytics, cross-domain

我已经在这里阅读了[大约 100 次](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#keyComponents)文档，但我无法弄清楚这一点。

我有一个平台，它基本上在一个后端之上创建欺骗域名：

1.  mysite.com
2.  yourface.com
3.  例子.com

由于所有域都指向同一个根索引文件，因此我希望有一个 Google Analytics 跟踪代码，我可以将它放在页脚中，以跟踪所有这些域上的活动。

现在，我正在使用以下内容，它只跟踪 mysite.com 上的活动（而不是其他活动）：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_setDomainName', 'mysite.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_getLinkerURL','mysite']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我知道我可以设置单独的配置文件，但这违背了需要聚合数据的意义。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:12:38.850

罪魁祸首大概是这个

```
 _gaq.push(['_setDomainName', 'mysite.com']); 
```

因为这会将 GA cookie 限制为 mysite.com 域。如果您完全放弃 setDomainName 调用，它应该跟踪部署代码的所有域（如果您想查看某个特定域的数据，则需要按主机名进行过滤）。

也就是说，如果我理解正确并且您的域使用相同的后端但独立于前端；如果域之间存在流量，您需要设置跨域跟踪才能正确跟踪（否则用户会话将在用户访问另一个域时结束）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:03:16.077

在 Google Analytics（分析）仪表板中，单击右侧的**Admin**以进入 Account Administration 页面。然后点击**您的帐户名称，**您将进入您正在使用 Analytics 跟踪的内容列表。然后单击“**新建属性”**按钮将下一个网站添加到您的帐户。每个网站都有自己的 javascript 代码，必须在您将其安装到您的网站之前由 Google Analytics 生成，因此您必须为要跟踪的每个网站完成此过程。

# html - 边框的 CSS3 过渡

> ID：14988777
> 
> 赞同：0
> 
> 时间：2013-02-20T19:57:15.070
> 
> 标签：html, css

当您将鼠标悬停在列表项上时，我正在尝试为红色边框添加一个过渡，但该过渡仅在您悬停时才起作用。

是否可以为红色边框添加过渡，以便在悬停时滑出？这是代码[http://jsbin.com/ewilix/3/edit](http://jsbin.com/ewilix/3/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:12:20.003

您必须为初始左边框指定与悬停状态相同的属性，但宽度为 0：

```
#conteneur-menu2 ul li a {
    text-decoration: none;
    font-size: 25px;
    padding: 4px;
    display: block;
    color: white;
    width: 230px; 
    transition: all 2s;
    line-height: 20px;
    border-left-style: solid;
    border-left-color: red;
    border-left-width: 0px;
} 
```

# php - 将单张照片上传转换为多张照片上传（支持 iPhone）

> ID：14988778
> 
> 赞同：0
> 
> 时间：2013-02-20T19:57:18.973
> 
> 标签：php, file-upload

我遵循了一个教程，该教程帮助我制作了一个非常基本的表单，以允许用户将图像上传到我的服务器（以及从他们的手机）。

我想允许多个文件上传，但我不确定如何转换我的 PHP 脚本。

如何将以下用于单张照片上传的工作代码转换为多张照片上传？

以下是我的代码的相关部分：

**索引.php：**

```
<form action="upload.processor.php" enctype="multipart/form-data" id="upload" method="post" name="Upload">
   <input id="file" name="file" type="file" accept="image/*" capture="camera" />
   <input id="submit" name="submit" type="submit" value="Upload!">
</form> 
```

**上传.processor.php：**

```
<?php 

    // make a note of the current working directory, relative to root. 
    $directory_self = str_replace(basename($_SERVER['PHP_SELF']), '', $_SERVER['PHP_SELF']); 

    // make a note of the directory that will receive the uploaded file 
    $uploadsDirectory = $_SERVER['DOCUMENT_ROOT'] . $directory_self . 'img/'; 

    // make a note of the location of the upload form in case we need it 
    $uploadForm = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'index.php'; 

    // make a note of the location of the success page 
    $uploadSuccess = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'upload.success.php'; 

    // fieldname used within the file <input> of the HTML form 
    $fieldname = 'file'; 

    // possible PHP upload errors 
    $errors = array(1 => 'php.ini: Max file size exceeded.', 
                    2 => 'HTML form: Max file size exceeded.', 
                    3 => 'File upload was only partial.', 
                    4 => 'No file was attached.'); 

    // check the upload form was actually submitted else print the form 
    isset($_POST['submit']) 
        or error('The upload form is required.', $uploadForm); 

    // check for PHP's built-in uploading errors 
    ($_FILES[$fieldname]['error'] == 0) 
        or error($errors[$_FILES[$fieldname]['error']], $uploadForm); 

    // check that the file we are working on really was the subject of an HTTP upload 
    @is_uploaded_file($_FILES[$fieldname]['tmp_name']) 
        or error('Not an HTTP upload.', $uploadForm); 

    // validation to make sure the uploaded file is in fact an image. 
    @getimagesize($_FILES[$fieldname]['tmp_name']) 
        or error('Only image uploads are allowed!', $uploadForm); 

    // make a unique filename for the uploaded file and check it is not already 
    // taken... if it is already taken keep trying until we find a vacant one 
    // sample filename: 1140732936-filename.jpg 
    $now = time(); 
    while(file_exists($uploadFilename = $uploadsDirectory.$now.'-'.$_FILES[$fieldname]['name'])) { 
        $now++; 
    } 

    // move the file to its final location and allocate the new filename to it 
    @move_uploaded_file($_FILES[$fieldname]['tmp_name'], $uploadFilename) 
        or error('Receiving directory has incorrect permissions.', $uploadForm); 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:00:40.490

您将遍历 $_FILES[$fieldname] 以获取基于您的表单的文件数组。所以遍历数组然后处理文件。

所以：

```
foreach($_FILES[$fieldname] => $singleFile) {
   // check for PHP's built-in uploading errors 
    ($singleFile['error'] == 0) 
        or error($errors[$singleFile['error']], $uploadForm); 

    // check that the file we are working on really was the subject of an HTTP upload 
    @is_uploaded_file($singleFile['tmp_name']) 
        or error('Not an HTTP upload.', $uploadForm); 

    // validation to make sure the uploaded file is in fact an image. 
    @getimagesize($singleFile['tmp_name']) 
        or error('Only image uploads are allowed!', $uploadForm); 

    // make a unique filename for the uploaded file and check it is not already 
    // taken... if it is already taken keep trying until we find a vacant one 
    // sample filename: 1140732936-filename.jpg 
    $now = time(); 
    while(file_exists($uploadFilename = $uploadsDirectory.$now.'-'.$singleFile['name'])) { 
        $now++; 
    } 

    // move the file to its final location and allocate the new filename to it 
    @move_uploaded_file($singleFile['tmp_name'], $uploadFilename) 
        or error('Receiving directory has incorrect permissions.', $uploadForm);

} 
```

# c# - 为什么这个正则表达式不允许这个文本？

> ID：14988783
> 
> 赞同：0
> 
> 时间：2013-02-20T19:57:38.853
> 
> 标签：c#, regex, validation

我有一个用户名验证器`IsValidUsername`，我正在测试“baconman”，但它失败了，有人可以帮我解决这个正则表达式吗？

```
if(!Regex.IsMatch(str, @"^[a-zA-Z]\\w+|[0-9][0-9_]*[a-zA-Z]+\\w*$")) {
    isValid = false;
} 
```

我希望限制是：（非常接近）

1.  长度在 5 到 17 个字符之间
2.  至少包含一个字母
3.  没有空间
4.  没有特殊字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:02:38.003

您正在不必要地转义：如果您将正则表达式编写为在字符串之外以 @ 开头，则不需要两个 \ - 一个就可以了。

任何一个：

```
@"\w" 
```

或者

```
"\\w" 
```

**编辑：**我没有说清楚：现在由于双重转义，您正在寻找正则表达式中的 \ 和 w。所以你的比赛需要 [some character]\w 来匹配（例如：“a\w”或“a\wwwwww”将匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:10:04.180

您的要求最好在普通 C# 中得到满足。它们不能很好地映射到正则表达式。只需使用 LINQ 对它们进行编码，它可以像在`IEnumerable<char>`.

此外，理解字符串的查询比理解符合您要求的正则表达式要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:53:39.707

作为正则表达式的一部分，可以做所有事情，但是它并不漂亮:-)

```
^(\w(?=\w*[a-zA-Z])|[a-zA-Z]|\w(?<=[a-zA-Z]\w*)){5,17}$ 
```

它做了 3 次检查，总是导致 1 个字符被匹配（所以我们可以在最后执行长度检查）

1.  该字符是 [a-zA-Z] 之前的任何单词字符 \w
2.  或者它是 [a-zA-Z]
3.  或者它是 [a-zA-Z] 之后的任何单词字符 \w

# soap - 在 SOAP 中向现有输出数据类型添加新字段的解决方法

> ID：14988786
> 
> 赞同：4
> 
> 时间：2013-02-20T19:57:51.770
> 
> 标签：soap, jax-ws

根据[IBM 的这篇关于 SOAP 中向后兼容性的文章，](http://www.ibm.com/developerworks/webservices/library/ws-backward/index.html)他们指出在不违反合同的情况下，不能将新字段添加到输出类型中。该页面的相关片段来自标题为*“现有数据类型中的新的可选字段*”的部分...

> 您可以将元素添加到现有的 complexType，只要将其设为可选（使用 minOccurs="0" 属性）。但小心点。仅当将其封闭的 complexType 作为新服务的输入接收时，添加一个可选元素才是一个微小的变化。**新服务无法返回带有新字段的 complexType。**如果旧客户端要接收新字段，则客户端**反序列化将失败**，因为客户端不知道新字段。

这是 2004 年为 WSDL 1.1 规范编写的。在 WSDL 1.2 规范下，这仍然适用吗？有没有办法为新的未知字段定义“忽略”的默认行为？该声明也似乎是特定于实现的，还是符合规范的？

我正在努力解决发展返回复杂业务对象的 SOAP 服务的问题。当消费者为他们找到用例时，将添加新字段。我想避免为了简单地添加新字段而保留 N 个版本的服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:58:02.183

从我个人的经验来看，情况仍然如此。我认为您主要关心的是版本控制方法。您可以查看：[http](http://www.ibm.com/developerworks/webservices/library/ws-version/) ://www.ibm.com/developerworks/webservices/library/ws-version/ ，或更接近主页的[Web 服务 API 版本控制](https://stackoverflow.com/questions/1679322/web-services-api-versioning)。

# node.js - 代理从 Nginx 到 Socket.io 的 Websocket 流量（无 SSL）

> ID：14988791
> 
> 赞同：3
> 
> 时间：2013-02-20T19:58:07.503
> 
> 标签：node.js, nginx, express, websocket, socket.io

从昨天开始，nginx 开始支持 websocket 连接，因此我试图让我的 nginx-nodejs-socket.io 应用程序在没有 harproxy 等的情况下工作（虽然运气不太好）。

我想要实现的是 nginx 仅将 websocket 连接请求发送到支持的服务器，或者更准确地说是 websocket 服务器，socket.io，同时 nginx 将提供 php 文件，以及**包括 html 文件在内**的所有静态内容.我根本不想 express 提供静态内容（如果可能的话）。

这是我的 nginx.conf

```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;
events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    gzip  on;

    upstream backend {
        server 127.0.0.1:8080;
    }

    server {
        listen       80;
        server_name  localhost;

        charset UTF-8;

        #access_log  logs/host.access.log  main;

        location / {
            root   /website/html_public;
            index  index.php index.html index.htm;
        }       
        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /website/html_public;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        location ~ \.php$ {
        root           /website/html_public;
        try_files      $uri =404;
        fastcgi_pass   unix:/tmp/php5-fpm.sock;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include        fastcgi_params;
        }

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        location ~ /\.ht {
            deny  all;
        }

         location /connection {
         proxy_pass http://backend;  
         proxy_http_version 1.1;
         proxy_set_header Upgrade $http_upgrade;
         proxy_set_header Connection "upgrade";
             }
       }

    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   /website/html_public;
    #        index  index.php index.html index.htm;
    #    }
    #}
} 
```

这是我在节点中的 server.js 文件

```
var express = require('express');
var app     = express();
var port    = 8080;

/* HTTP Server*/

server = require('http').createServer(app);
server.listen(port);
app.use(express.logger(':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms'));
app.use(express.static(__dirname + '/html_public'));
app.use(express.favicon());

app.set('view engine', 'jade');
app.set('view options', { layout: false });
app.set('views', __dirname + '/views');

app.get('/', function(req, res){
    res.render('index.html');

});

/*
* Web Sockets
*/
io   = require('socket.io').listen(server),
io.configure('production', function(){
io.enable('browser client etag');
io.set('log level', 1);
io.set('transports', [ 'websocket', 'htmlfile', 'xhr-polling', 'jsonp-polling' ]);
});

console.log('Chat Server started with Node '+ process.version +', platform '+ process.platform + 'to port %d',port); 
```

从我的客户，我尝试像这样连接：

```
socket = new io.connect('http://localhost/connection'); 
```

现在，问题是当我尝试正常连接时，键入 localhost，我在 chrome 控制台上看到： `**GET http://localhost/socket.io/socket.io.js 404 (Not Found)**`，并且当在浏览器中键入时，`http://localhost/connection`我收到**“Cannot GET /connection”**，这告诉我 nginx 不能正常代理 websockets以我目前的配置。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:14:54.993

让我猜猜，你想要：

```
location /connection {
    proxy_pass http://backend/;
    ...
} 
```

但是你有：

```
location /connection {
    proxy_pass http://backend;
    ...
} 
```

[http://nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T12:17:48.430

只是为了确保，你有 Nginx 版本 1.3.13 吗？（例如 Nginx 的 PPA 还没有那个版本。）

# javascript - 以编程方式禁用 CSS 文本选择

> ID：14988792
> 
> 赞同：1
> 
> 时间：2013-02-20T19:58:11.770
> 
> 标签：javascript, css

这似乎是重复的，但请继续阅读，因为它并非如此......我认为...... :) 我在这里遵循了答案：[如何使用 CSS 或 JavaScript 禁用文本选择？](https://stackoverflow.com/questions/3779534/how-to-disable-text-selection-with-css-or-js)有点扭曲。我想以编程方式禁用某些字段的选择，我在[Chrome](http://en.wikipedia.org/wiki/Google_Chrome)中使用：

```
node.style.webkitUserSelect="none"; 
```

哪个工作正常。但是，我为 Firefox 尝试了以下操作：

```
node.style.mozUserSelect="none"; 
```

但这不起作用。我还没有尝试过任何其他浏览器。有不同的方法可以做到这一点吗？所有 CSS 规则都是这样的“文档化标准”吗：

```
.rule {
    some-css-selector: value;
} 
```

可以像下面这样翻译成 JavaScript 吗？

```
node.style.someCssSelector="value"; 
```

或者只是运气在某些情况下会起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:05:27.970

对于带前缀的属性，前缀以大写字母开头，所以`node.style.MozUserSelect="none";`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:07:58.827

一种选择是创建一个 CSS 样式，然后以编程方式将该类添加到您想要的项目中：

**HTML**

```
<div id="container">
  This is some text that should not be selectable!
</div> 
```

**CSS**

```
.noselect {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
} 
```

**JS**

```
var container = document.getElementById("container");
container.className += " noselect"; 
```

[jsfiddle](http://jsfiddle.net/PpBwb/)

# ios - iOS：是否允许缓存 Game Center 用户名？

> ID：14988798
> 
> 赞同：1
> 
> 时间：2013-02-20T19:58:37.517
> 
> 标签：ios, game-center

是否允许在我自己的网络数据库中缓存 Game Center 用户名（只有用户名，没有其他数据）还是违反 Apple 的政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T18:45:13.997

请参阅 App Store 审查指南的第 6.3 节 - 获取 Game Center 信息可能会导致您被从开发者计划中删除（我假设您的所有应用程序都将被下架）。所以，来自苹果的一个非常严格的“不”。

# python - 损坏的记忆代码

> ID：14988801
> 
> 赞同：0
> 
> 时间：2013-02-20T19:58:47.753
> 
> 标签：python, memoization

我有一系列数字，我需要找到它们的总和。第一次迭代操作的值是 1，第二次是 20。接下来的每次迭代都使用公式 n * (n + 1) / 2 中的前一个结果，所以第三次迭代，比如 i03 = 20 * (20 + 1) / 2，第四个，i04 = i03 * (i03 + 1) / 2。这一直持续到 i20 = i19 * (i19 + 1) / 2 的第 20 次迭代。我想使用记忆来做到这一点。这是我的代码：

```
def outFun():
    def sumFun(squares, total = 0, CONST = 20):
        if squares > 2:
            total = sumFun(squares - 1) * int((sumFun(squares - 1) + 1) / 2)
        elif not squares - 2:
            total = CONST
        return total

    return 1 + sumFun(20) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:03:41.927

你在打电话

```
sumFun(squares - 1) 
```

两次！

为什么不引入一个变量来存储结果呢？就像是：

```
if squares > 2:
    nextResult = sumFun(squares - 1)
    total = nextResult * ((nextResult + 1) / 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T02:50:27.920

我是这样理解您的问题的：您有一个公式`x_n = x_{n-1} * (x_{n-1} + 1)/2`，其递归基定义为`x_1 = 20`（或`x_2 = 20`？从您的描述中不清楚）。解决递归的最有效方法是自下而上的方法，当您从 开始时`x_1`，然后计算`x_2`等。替代方法是使用动态编程/记忆：

```
mem={}
def f(x):
    if x == 1:   # base case
        return 20
    if not x in mem:    # if we did not calculate it before - calculate
        mem[x] = f(x-1) * (f(x-1) +1) / 2
    return mem[x]   # otherwise return it

print f(1)    
print f(2)
print f(3) 
```

印刷

```
20
210
22155 
```

`f(20)`打印起来有点大，所以我将打印其中的位数：

```
print "number of digits: %s" % len(str(f(20)))

number of digits: 530115 
```

代码在我的桌面上运行大约需要 9 秒：

```
import timeit
mem={}
print "Execution time: %s" % timeit.Timer("len(str(f(20)))",
                            setup = "from __main__ import f").timeit(1) 
```

# python - 可以用上下文管理器模拟词汇范围吗？

> ID：14988815
> 
> 赞同：3
> 
> 时间：2013-02-20T19:59:28.257
> 
> 标签：python

在[之前的](https://stackoverflow.com/questions/14986856)一篇文章中，我询问了如何避免`tmp`模式中的中间变量，例如：

```
tmp = <some operation>
result = tmp[<boolean expression>]
del tmp 
```

...`tmp`熊猫对象在哪里。例如：

```
tmp = df.xs('A')['II'] - df.xs('B')['II']
result = tmp[tmp < 0]
del tmp 
```

我对这种模式的看法基本上来自对诚实至善的词法作用域¹的渴望，即使经过多年的 Python 编程，它也不会消亡。在 Python ²中，我通过显式调用`del`,

我突然想到*可以*使用上下文管理器来模拟 Python 中的词法作用域。它看起来像这样：

```
with my(df.xs('A')['II'] - df.xs('B')['II']) as tmp:
    result = tmp[tmp < 0] 
```

为了能够模拟词法作用域，上下文管理器类需要有一种方法来`del`获取调用作用域中的变量，该变量被分配了由其（上下文管理器的）“**输入**”方法返回的值。

例如，大量的作弊行为：

```
import contextlib as cl

# herein lies the rub...
def deletelexical():
    try: del globals()['h']
    except: pass

@cl.contextmanager
def my(obj):
    try: yield obj
    finally: deletelexical()

with my(2+2) as h:
    print h
try:
    print h
except NameError, e:
    print '%s: %s' % (type(e).__name__, e)
# 4
# Name error: name 'h' is not defined 
```

当然，问题是要`deletelexical`真正实施。可以做到吗？

`tmp`编辑：正如 abarnert 指出的那样，如果周围范围中存在预先存在，则`deletelexical`不会恢复它，因此它几乎不能被视为词汇范围的模拟。正确的实现必须将任何现有`tmp`变量保存在周围范围内，并在 with 语句的末尾替换它们。

* * *

¹例如，在 Perl 中，我会使用以下代码对上述内容进行编码：

```
my $result = do {
    my $tmp = $df->xs('A')['II'] - $df->xs('B')['II'];
    $tmp[$tmp < 0]
}; 
```

或在 JavaScript 中：

```
var result = function () {
    var tmp = df.xs('A')['II'] - df.xs('B')['II'];
    return tmp[tmp < 0];
}(); 
```

编辑：响应 abarnert 的帖子和评论：是的，在 Python 中可以定义

```
def tmpfn():
    tmp = df.xs('A')['II'] - df.xs('B')['II']
    return tmp[tmp < 0] 
```

...并且这确实可以防止命名空间与此后无用的名称混淆`tmp`，但它通过将命名空间与此后无用的名称混淆来做到这一点`tmpfn`。JavaScript（还有 Perl，BTW 等）允许***匿名***函数，而 Python 不允许。无论如何，我认为 JavaScript 的匿名函数是获取词法作用域的一种有点麻烦的方法。它肯定比没有好，我大量使用它，但它远不如 Perl 的好（我所说的后者不仅是指 Perl 的`do`声明，还包括它提供的各种其他方式来控制范围，包括词汇和动态）。

²我不需要提醒这样一个事实，即只有极少数的 Python 程序员对词法作用域持反对意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:24:49.173

在等效的 JavaScript 中，您可以这样做：

```
var result = function () {
    var tmp = df.xs('A')['II'] - df.xs('B')['II'];
    return tmp[tmp < 0];
}(); 
```

换句话说，为了获得额外的词法作用域，您正在创建一个新的本地函数并使用它的作用域。你可以在 Python 中做同样的事情：

```
def tmpf():
    tmp = df.xs('A')['II'] - df.xs('B')['II']
    return tmp[tmp < 0]
result = tmpf() 
```

它具有完全相同的效果。

这种效果并不是你想象的那样。超出范围仅意味着它是可以收集的垃圾。这正是一个真正的词法作用域会给你的，但这不是你想要的（一种在某个时候确定性地销毁某些东西的方法）。是的，它通常会在 CPython 2.7 中执行您想要的操作，但这不是语言功能，而是实现细节。

但是您的想法在仅使用函数的问题之上增加了一些问题。

您的想法使`with`声明中的所有定义或反弹都发生了变化。JS 等价物不这样做。您所说的更像是 C++ 范围保护宏而不是`let`语句。（一些不纯的语言允许您`set!`在 a 中 -bind 新名称，该名称`let`将存在于 之外`let`，您可以将其描述为在主体内隐含的词法范围`nonlocal everything-but-the-let-names`，但这仍然很奇怪。尤其是在已经有 a 的语言中重新绑定和变异之间的强烈区别。）

此外，如果您已经有一个具有相同名称的全局变量`tmp`，则此`with`语句将删除它。这不是`let`语句或任何其他常见形式的词法作用域所做的。（如果`tmp`是局部变量而不是全局变量呢？）

如果您想使用上下文管理器模拟词法范围，那么您真正需要的是一个可以恢复`globals`和/或`locals`退出时的上下文管理器。或者可能只是一种在临时`globals`和/或`locals`. （我不确定这是否可能，但你明白了——比如将 的主体`with`作为`code`对象并将其传递给`exec`。）

或者，如果您想允许重新绑定以逃避范围，但不允许新绑定，请遍历`globals`和/或`locals`并删除所有新内容。

或者，如果您只想删除特定的东西，只需编写一个`deleting`上下文管理器：

```
with deleting('tmp'):
    tmp = df.xs('A')['II'] - df.xs('B')['II']
    result = tmp[tmp < 0] 
```

没有理由将表达式推送到`with`语句中并尝试找出它绑定的内容。

# javascript - highcharts：工具提示显示样条曲线但不显示散点图

> ID：14988820
> 
> 赞同：1
> 
> 时间：2013-02-20T19:59:40.340
> 
> 标签：javascript, jquery, highcharts

我正在使用此代码生成 Highcharts 工具提示：

```
tooltip: {
shared: true,
crosshairs: true,
formatter: function () {
    var s = '<b>' + Highcharts.dateFormat('%e. %b %Y, %H:00', this.x) + '</b>';

    $.each(this.points, function (i, point) {
        s += '<br/>' + point.series.name + ': ' + point.y + ' m/s';
    });

    return s;
} 
```

}

它非常适用于将样条曲线用于 defaultSeriesType 的图表，但不适用于散点图。

请参阅此 Fiddle [http://jsfiddle.net/s83aT/](http://jsfiddle.net/s83aT/)以了解样条曲线和散点图。

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:30:13.010

在 Sebastian Bochan 指出“共享：真实”是问题的一部分之后，我对此进行了更多研究，这就是我发现的内容以及我最终如何解决问题的方式。无论出于何种原因，问题中链接的小提琴都被搞砸了。

```
shared: true 
```

如果图表中有多个系列并且希望将所有系列显示在同一工具提示中，则需要。在我的情况下，这是我制作的其他情节的剩余部分，但在我最初的问题所涉及的单个系列情节中不需要。

对于单系列图，不应使用“shared: true”。它默认为“shared: false”，因此根本不需要包含“shared”。

这是我现在使用的格式化程序代码，它适用于所有单个系列，无论是样条曲线还是散点图：

```
tooltip: {
    crosshairs: true,
    formatter: function () {
        return '<b>' + Highcharts.dateFormat('%e. %b %Y, %H:00', this.x) +
                '</b> ' + this.series.name + ': ' + this.y + ' deg';
    }
}, 
```

有关样条图和散点图的实际操作，请参见[http://jsfiddle.net/Reality_Extractor/pNFYL/ 。](http://jsfiddle.net/Reality_Extractor/pNFYL/)

# algorithm - 是否有用于生成一系列随机事件结果的 O(1) 算法？

> ID：14988824
> 
> 赞同：3
> 
> 时间：2013-02-20T20:00:05.847
> 
> 标签：algorithm, random, language-agnostic

假设我有一个例程，当被调用时，它将使用 RNG 并返回`True`30% 的时间，`False`否则。这很简单。`True`但是，如果我想模拟调用该例程 100 亿次会得到多少结果呢？

在一个循环中调用它 100 亿次将花费太长时间。将 100 亿乘以 30% 将产生 30 亿的统计预期结果，但不会涉及实际的随机性。*（结果正好是*30 亿的可能性也不是很大。）

是否有一种算法可以模拟这样一系列随机事件的聚合结果，这样如果它被多次调用，它给出的结果将显示与实际运行它多次模拟的随机序列相同的分布曲线，运行在O(1) 时间（即随着要模拟的系列长度的增加不需要更长的运行时间）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T20:48:48.600

我会说 -**它可以在 O(1) 中完成！**

[描述您的情况的二项分布](http://en.wikipedia.org/wiki/Binomial_distribution)（在某些情况下）可以通过正态分布来近似。它可以在两者`n*p`和`n*(1-p)`大于 5 时完成，所以`p=0.3`它可以为 all 完成`n > 17`。什么时候`n`变得非常大（如数百万），近似值越来越好。

[使用Box–Muller 变换](http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform)可以很容易地计算出具有正态分布的随机数。您需要做的就是两个介于 0 和 1 之间的随机数。Box-Muller 变换从`N(0,1)`分布中给出两个随机数，称为标准正态。`N(μ, σ2)`可以使用`X = μ + σZ`公式来实现，其中`Z`是标准正态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:55:07.050

经过更深入的思考，我可以提出这个 Python 解决方案，它在 O(log(n)) 中工作并且不使用任何近似值。但是，对于较大的 n，@MarcinJuraszek 的解决方案更合适。

*   首先，我生成一个 Python 列表，其中包含[Cumulative Binomial Distribution function](http://en.wikipedia.org/wiki/Binomial_distribution#Cumulative_distribution_function)的值。
*   后来我使用[逆变换采样](http://en.wikipedia.org/wiki/Inverse_transform_sampling)。

第一步的成本是 O(n)——但你只需要做一次。第二步的成本只是 O(log(n))——本质上是二分查找的成本。由于代码有很多依赖关系，你可以看一下这个截图：

![带有显示分布的图的屏幕截图](../Images/f40dcce4c7b5a6c88e41c050b6451bc2.png)

```
import numpy.random as random
import matplotlib.pyplot as pyplot
import scipy.stats as stats
import bisect

# This is the number of trials.
size = 6;

# this generates in memory an object, which contains
# a full information on desired binomial
# distribution. The object has to be generated only once.
# THIS WORKS IN O(n).
binomialInstance = stats.binom(size, 0.3)

# this pulls a probabilty mass function in form of python list
binomialTable = [binomialInstance.pmf(i) for i in range(size + 1)]

# this pulls a python list from binomialInstance, first
# processing it to produce a cumulative distribution function.
binomialCumulative = [binomialInstance.cdf(i) for i in range(size + 1)]

# this produces a plot of dots: first argument is x-axis (just
# subsequent integers), second argument is our table.
pyplot.plot([i for i in range(len(binomialTable))], binomialTable, 'ro')
pyplot.figure()
pyplot.plot([i for i in range(len(binomialCumulative))], binomialCumulative, 'ro')

# now, we can cheaply draw a sample from our distribution.
# we can use bisect to draw a random answer.
# THIS WORKS IN log(n).
cutOff = random.random(1)
print "this is our cut-off value: " + str(cutOff)
print "this is a number of successful trials: " + str(bisect.bisect(binomialCumulative, cutOff))
pyplot.show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:58:03.627

正如其他评论者所提到的，您可以使用二项分布。但是，由于您要处理大量样本，您应该考虑使用正态分布近似。

# mysql - 返回未来的营业时间

> ID：14988831
> 
> 赞同：0
> 
> 时间：2013-02-20T20:00:26.137
> 
> 标签：mysql

`"Open Till at least"`我正在尝试通过过滤器搜索场地。

我遇到的问题是，有些场馆在 to 的几个小时内营业，而有些场馆的`8AM`营业时间`6PM`是`10PM`to `3AM`。一位 Nice SO 成员帮助我创建了此代码，但是当我尝试修改它以进行搜索时，我注意到了一个问题。

如果我查询一个开放`till at least 20:00`的场地，并且场地开放时间是从`11AM`到`21:00`，那么一切*正常*。

但是如果我查询一个开放时间的场地`till at least 20:00`并且营业时间是 from `21:00`to `03:00`，则`closed`返回。

如何显示仍然关闭的场馆的营业时间？

这是我的代码：

```
SELECT
e.VENUE_NAME,
hrs.opening_day,
hrs.opening_time,
hrs.closing_time
FROM hours_of_operation hrs join venues e
  on hrs.venue_id = e.id
     and not is_closed
     and ((hrs.opening_day=date_format('$phpWhenDate' - INTERVAL (closing_time<opening_time and time('$phpWhenDate')<closing_time) DAY, '%a'))
          AND (closing_time<opening_time XOR
         (time('$phpWhenDate') >= least(opening_time,closing_time)
          and time('$phpWhenDate') < greatest(opening_time, closing_time)))) 
```

`dataWhenDate`看起来像这样：2013-02-21 04:00:00

基本上，我使用滑块来选择我希望场地至少开放多长时间，并生成要发送的日期。

感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:26:03.527

`21:00`严格来说，在和之间开放的场所，`03:00`在查询开放时间时应该返回为关闭`till at least 20:00`，因为它仅在 21:00 开放。如果我是用户，它实际上会误导我，如果`opening hours till at least 20:00`会显示一个仅在`21:00`.

如果您只是想显示哪些场所在之后开放，`20:00`那么只需`20:00`与场所的开放时间和关闭时间进行比较，如果其中任何一个大于`20:00`之后开放的时间`20:00`（但您可能需要添加星号向用户解释过去开放`20:00`包括在 ) 之后开放的场馆`20:00`。

# scala - 以 Joda 时间计算距给定日期和时间的秒数

> ID：14988838
> 
> 赞同：0
> 
> 时间：2013-02-20T20:00:52.450
> 
> 标签：scala, akka, jodatime

我正在尝试使用 Joda Time 库来帮助我安排向 Akka 中的 Actor 发送一些消息。

我想安排每天早上 8:30 发送电子邮件。为此，我必须告诉调度程序要等待多少秒（或毫秒），直到发送下一条消息。

我想考虑夏令时（以确保它总是在 8:30 左右触发，而不是 7:30 或 9:30）所以我将使用`LocalDate`and `LocalTime`。

所以，基本上，我有：

`targetDate = LocalDate.now().plusDays(1)`和`targetTime = new LocalTime(8, 30)`

和

`rightNow = LocalDateTime.now()`

我想知道什么是构成`targetDateTime`基于的最佳方法`targetDate`，`targetTime`所以我可以用它来计算时间差`rightNow`

我知道我可以创建一个新`LocalDateTime`的，从中提取构造函数的所有值，`targetDate`但是`targetTime`：有没有更优雅的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:22:19.497

到目前为止，我已经解决了：

`targetDateTime = targetDate.toLocalDateTime(targetTime)`

`secondsToWait = Seconds.secondsBetween(rightNow, targetDateTime)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T06:36:35.817

`targetDate`如果您有and `targetTime`（如您的问题中给出的），则获取 targetDateTime 很容易：

```
targetDateTime = targetDate.toDateTime(targetTime); 
```

获取`Duration`现在和之间的秒数`targetDateTime`：

```
new Duration(new DateTime(), targetDateTime).getStandardSeconds(); 
```

该方法被称为标准秒，因为它假定每秒是 1000 毫秒的标准秒。正如其 javadoc 所说，目前所有年表只有标准秒。

但是您也可以简单地使用毫秒（不需要转换假设）：

```
new Duration(new DateTime(), targetDateTime).getMillis(); 
```

*免责声明：我只是看到这是一个 scala 问题，因此您可能必须纠正任何语法差异，因为我不精通 scala。*

# testing - 如何在 JavaScript 中获得肯定答案的总和？

> ID：14988849
> 
> 赞同：-1
> 
> 时间：2013-02-20T20:01:13.917
> 
> 标签：testing, button, sum, radio

我想做一个简单的测试，通过单选按钮提问和回答标记，但我被卡住了。

我有 6 个单独的测试，全部由 10 个问题组成，您将在代码中看到。我用10个问题做了两个测试，我的问题是让他们自己个性化，这样我就能得到不同的答案。

我想要的是当有人标记“是”然后他/她在测试结束时得到肯定答案或“是”答案的总和。

这是代码：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript">
        function DisplayPrice(price){
            var val1 = 0;
            for( i = 0; i < document.form1.price.length; i++ ){
                if( document.form1.price[i].checked == true ){
                    val1 = document.form1.price[i].value;
                }
            }

            var val2 = 0;
            for( i = 0; i < document.form2.price2.length; i++ ){
                if( document.form2.price2[i].checked == true ){
                    val2 = document.form2.price2[i].value;
                }
            }

            var val3 = 0;
            for( i = 0; i < document.form3.price3.length; i++ ){
                if( document.form3.price3[i].checked == true ){
                    val3 = document.form3.price3[i].value;
                }
            }

            var val4 = 0;
            for( i = 0; i < document.form4.price4.length; i++ ){
                if( document.form4.price4[i].checked == true ){
                    val4 = document.form4.price4[i].value;
                }
            }

            var val5 = 0;
            for( i = 0; i < document.form5.price5.length; i++ ){
                if( document.form5.price5[i].checked == true ){
                    val5 = document.form5.price5[i].value;
                }
            }

            var val6 = 0;
            for( i = 0; i < document.form6.price6.length; i++ ){
                if( document.form6.price6[i].checked == true ){
                    val6 = document.form6.price6[i].value;
                }
            }

            var val7 = 0;
            for( i = 0; i < document.form7.price7.length; i++ ){
                if( document.form7.price7[i].checked == true ){
                    val7 = document.form7.price7[i].value;
                }
            }

            var val8 = 0;
            for( i = 0; i < document.form8.price8.length; i++ ){
                if( document.form8.price8[i].checked == true ){
                    val8 = document.form8.price8[i].value;
                }
            }

            var val9 = 0;
            for( i = 0; i < document.form9.price9.length; i++ ){
                if( document.form9.price9[i].checked == true ){
                    val9 = document.form9.price9[i].value;
                }
            }

            var val10 = 0;
            for( i = 0; i < document.form10.price10.length; i++ ){
                if( document.form10.price10[i].checked == true ){
                    val10 = document.form10.price10[i].value;
                }
            }

            var sum=parseInt(val1) + parseInt(val2) + parseInt(val3) + parseInt(val4) + parseInt(val5) + parseInt(val6) + parseInt(val7) + parseInt(val8) + parseInt(val9) + parseInt(val10);
            document.getElementById('totalSum').value=sum;
        }
    </script>
<style type="text/css">
body,td,th {
    color: #03C;
}
body {
    background-color: #999;
    text-align: left;
}
</style>
</head>
<body>
<h2><strong>TEST 1</strong></h2>
<form name="form1" id="form1" runat="server">
  <h3><br>
    QUESTION1.
      <input id="rdo_1" type="radio" value="1" name="price" onClick="DisplayPrice(this.value);">
      YES
      <input id="rdo_2" type="radio" value="0" name="price" onClick="DisplayPrice(this.value);">
      NO<br>
    </h3>
</form>
    <form name="form2" id="form2" runat="server">
      <h3><br>
        QUESTION2.
        <input id="rdo_1" type="radio" value="1" name="price2" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price2" onClick="DisplayPrice(this.value);">
        NO<br>
      </h3>
    </form>
<form name="form3" id="form3" runat="server">
  <h3><br>
    QUESTION3.
    <input id="rdo_1" type="radio" value="1" name="price3" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price3" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form4" id="form4" runat="server">
  <h3><br>
    QUESTION4.
    <input id="rdo_1" type="radio" value="1" name="price4" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price4" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form5" id="form5" runat="server">
  <h3><br>
    QUESTION5.
    <input id="rdo_1" type="radio" value="1" name="price5" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price5" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form6" id="form6" runat="server">
  <h3><br>
    QUESTION6.
    <input id="rdo_1" type="radio" value="1" name="price6" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price6" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form7" id="form7" runat="server">
  <h3>QUESTION7.
        <input id="rdo_1" type="radio" value="1" name="price7" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price7" onClick="DisplayPrice(this.value);">
        NO<br>
    </h3>
</form>
<form name="form8" id="form8" runat="server">
  <h3><br>
    QUESTION8.
        <input id="rdo_1" type="radio" value="1" name="price8" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price8" onClick="DisplayPrice(this.value);">
        NO<br>
  </h3>
</form>
<form name="form9" id="form9" runat="server">
  <h3><br>
    QUESTION9.
        <input id="rdo_1" type="radio" value="1" name="price9" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price9" onClick="DisplayPrice(this.value);">
        NO<br>
  </h3>
</form>
<form name="form10" id="form10" runat="server">
  <h3>QUESTION10.
    <input id="rdo_1" type="radio" value="1" name="price10" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price10" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<p>&nbsp;</p>
<h2><strong>TEST 2</strong></h2>
<form name="form1" id="form11" runat="server">
  <h3><br>
    QUESTION1.
    <input id="rdo_3" type="radio" value="1" name="price" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form2" id="form12" runat="server">
  <h3><br>
    QUESTION2.
    <input id="rdo_3" type="radio" value="1" name="price2" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price2" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form3" id="form13" runat="server">
  <h3><br>
    QUESTION3.
    <input id="rdo_3" type="radio" value="1" name="price3" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price3" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form4" id="form14" runat="server">
  <h3><br>
    QUESTION4.
    <input id="rdo_3" type="radio" value="1" name="price4" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price4" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form5" id="form15" runat="server">
  <h3><br>
    QUESTION5.
    <input id="rdo_3" type="radio" value="1" name="price5" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price5" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form6" id="form16" runat="server">
  <h3><br>
    QUESTION6.
    <input id="rdo_3" type="radio" value="1" name="price6" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price6" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form7" id="form17" runat="server">
  <h3>QUESTION7.
    <input id="rdo_3" type="radio" value="1" name="price7" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price7" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form8" id="form18" runat="server">
  <h3><br>
    QUESTION8.
    <input id="rdo_3" type="radio" value="1" name="price8" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price8" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form9" id="form19" runat="server">
  <h3><br>
    QUESTION9.
    <input id="rdo_3" type="radio" value="1" name="price9" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price9" onClick="DisplayPrice(this.value);">
    NO <br>
  </h3>
</form>
<form name="form10" id="form20" runat="server">
  <h3><br>
    QUESTION10.
    <input id="rdo_3" type="radio" value="1" name="price10" onClick="DisplayPrice(this.value);">
    DA
    <input id="rdo_4" type="radio" value="0" name="price10" onClick="DisplayPrice(this.value);">
    NE<br>
  </h3>
</form>
<h2>Score &quot;TEST1&quot;
  <input type="text" name="totalSum" id="totalSum" value="" size="3" readonly="readonly">
</h2>
<h2>Score &quot;TEST2&quot;
  <input type="text" name="totalSum2" id="totalSum2" value="" size="3" readonly="readonly">
</h2>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:49:10.300

我已经编辑了您的[javascript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)以使其在 Google Chrome 中运行。我概括了您引用表单元素的方式。

```
function DisplayPrice(price){

        var mysum=0, mysum2 =0, mysm3=0, mysum4=0, num, ele, frm,f,e;

        for(f in document.forms)
        {
            frm = document.forms[f];
            for(e in frm.elements)
            {
                ele = frm.elements[e];
                if (ele.checked && ele.value)
                {
                    // based on ID we decide if TEST1 or TEST2 is counting
                    num = parseInt(frm.id.substr(4),10);
                    if (num < 11) {
                           mysum = mysum + parseInt(ele.value,10);
                    } else if (num < 21) {
                           mysum2 = mysum2 + parseInt(ele.value,10);
                    } else if (num < 31 ) {
                           mysum3 = mysum3 + parseInt(ele.value,10);
                    } else {
                           mysum4 = mysum4 + parseInt(ele.value,10);
                    }
                }
            }
        }

        document.getElementById('totalSum').value=mysum;
        document.getElementById('totalSum2').value=mysum2;
        document.getElementById('totalSum3').value=mysum3;
        document.getElementById('totalSum4').value=mysum4;

    } 
```

为大家提供一个有效的[JSFiddle](http://jsfiddle.net/DvUH8/5/)来测试这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:47:25.500

编辑：这是新代码...：/

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <script type="text/javascript">
        function DisplayPrice(price){

            var mysum=0, mysum2 =0, mysum3 =0, mysum4 =0, num, ele, frm,f,e;

            for(f in document.forms)
            {
                frm = document.forms[f];
                for(e in frm.elements)
                {
                    ele = frm.elements[e];
                    if (ele.checked && ele.value)
                    {
                        num = parseInt(frm.id.substr(4),10);
                        if (num < 11) {
                               mysum = mysum + parseInt(ele.value,10);
                        } else {
                               mysum2 = mysum2 + parseInt(ele.value,10);
                        if (num < 21) {
                               mysum3 = mysum3 + parseInt(ele.value,10);
                        } else {
                               mysum4 = mysum4 + parseInt(ele.value,10);
                        }

                         }
                    }
                }
            }

            document.getElementById('totalSum').value=mysum;
            document.getElementById('totalSum2').value=mysum2;
            document.getElementById('totalSum3').value=mysum3;
            document.getElementById('totalSum4').value=mysum4;
        }

window.DisplayPrice=DisplayPrice;
    </script>
<style type="text/css">
body,td,th {
    color: #03C;
}
body {
    background-color: #999;
    text-align: left;
}
</style>
</head>
<body>
 <h2><strong>TEST 1</strong></h2>
<form name="form1" id="form1" runat="server">
  <h3><br>
    QUESTION1.
      <input id="rdo_1" type="radio" value="1" name="price" onClick="DisplayPrice(this.value)">
      YES
      <input id="rdo_2" type="radio" value="0" name="price" onClick="DisplayPrice(this.value);">
      NO<br>
    </h3>
</form>
    <form name="form2" id="form2" runat="server">
      <h3><br>
        QUESTION2.
        <input id="rdo_1" type="radio" value="1" name="price2" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price2" onClick="DisplayPrice(this.value);">
        NO<br>
      </h3>
    </form>
<form name="form3" id="form3" runat="server">
  <h3><br>
    QUESTION3.
    <input id="rdo_1" type="radio" value="1" name="price3" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price3" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form4" id="form4" runat="server">
  <h3><br>
    QUESTION4.
    <input id="rdo_1" type="radio" value="1" name="price4" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price4" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form5" id="form5" runat="server">
  <h3><br>
    QUESTION5.
    <input id="rdo_1" type="radio" value="1" name="price5" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price5" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form6" id="form6" runat="server">
  <h3><br>
    QUESTION6.
    <input id="rdo_1" type="radio" value="1" name="price6" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price6" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form7" id="form7" runat="server">
  <h3>QUESTION7.
        <input id="rdo_1" type="radio" value="1" name="price7" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price7" onClick="DisplayPrice(this.value);">
        NO<br>
    </h3>
</form>
<form name="form8" id="form8" runat="server">
  <h3><br>
    QUESTION8.
        <input id="rdo_1" type="radio" value="1" name="price8" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price8" onClick="DisplayPrice(this.value);">
        NO<br>
  </h3>
</form>
<form name="form9" id="form9" runat="server">
  <h3><br>
    QUESTION9.
        <input id="rdo_1" type="radio" value="1" name="price9" onClick="DisplayPrice(this.value);">
        YES
        <input id="rdo_2" type="radio" value="0" name="price9" onClick="DisplayPrice(this.value);">
        NO<br>
  </h3>
</form>
<form name="form10" id="form10" runat="server">
  <h3>QUESTION10.
    <input id="rdo_1" type="radio" value="1" name="price10" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_2" type="radio" value="0" name="price10" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<p>&nbsp;</p>
<h2><strong>TEST 2</strong></h2>
<form name="form1" id="form11" runat="server">
  <h3><br>
    QUESTION1.
    <input id="rdo_3" type="radio" value="1" name="price" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form2" id="form12" runat="server">
  <h3><br>
    QUESTION2.
    <input id="rdo_3" type="radio" value="1" name="price2" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price2" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form3" id="form13" runat="server">
  <h3><br>
    QUESTION3.
    <input id="rdo_3" type="radio" value="1" name="price3" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price3" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form4" id="form14" runat="server">
  <h3><br>
    QUESTION4.
    <input id="rdo_3" type="radio" value="1" name="price4" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price4" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form5" id="form15" runat="server">
  <h3><br>
    QUESTION5.
    <input id="rdo_3" type="radio" value="1" name="price5" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price5" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form6" id="form16" runat="server">
  <h3><br>
    QUESTION6.
    <input id="rdo_3" type="radio" value="1" name="price6" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price6" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form7" id="form17" runat="server">
  <h3>QUESTION7.
    <input id="rdo_3" type="radio" value="1" name="price7" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price7" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form8" id="form18" runat="server">
  <h3><br>
    QUESTION8.
    <input id="rdo_3" type="radio" value="1" name="price8" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price8" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form9" id="form19" runat="server">
  <h3><br>
    QUESTION9.
    <input id="rdo_3" type="radio" value="1" name="price9" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price9" onClick="DisplayPrice(this.value);">
    NO <br>
  </h3>
</form>
<form name="form10" id="form20" runat="server">
  <h3><br>
    QUESTION10.
    <input id="rdo_3" type="radio" value="1" name="price10" onClick="DisplayPrice(this.value);">
    DA
    <input id="rdo_4" type="radio" value="0" name="price10" onClick="DisplayPrice(this.value);">
    NE<br>
  </h3>
</form>
<h2><strong>TEST 3</strong></h2>
<form name="form1" id="form21" runat="server">
  <h3><br>
    QUESTION1.
    <input id="rdo_3" type="radio" value="1" name="price" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form2" id="form22" runat="server">
  <h3><br>
    QUESTION2.
    <input id="rdo_3" type="radio" value="1" name="price2" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price2" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form3" id="form23" runat="server">
  <h3><br>
    QUESTION3.
    <input id="rdo_3" type="radio" value="1" name="price3" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price3" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form4" id="form24" runat="server">
  <h3><br>
    QUESTION4.
    <input id="rdo_3" type="radio" value="1" name="price4" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price4" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form5" id="form25" runat="server">
  <h3><br>
    QUESTION5.
    <input id="rdo_3" type="radio" value="1" name="price5" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price5" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form6" id="form26" runat="server">
  <h3><br>
    QUESTION6.
    <input id="rdo_3" type="radio" value="1" name="price6" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price6" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form7" id="form27" runat="server">
  <h3>QUESTION7.
    <input id="rdo_3" type="radio" value="1" name="price7" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price7" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form8" id="form28" runat="server">
  <h3><br>
    QUESTION8.
    <input id="rdo_3" type="radio" value="1" name="price8" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price8" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form9" id="form29" runat="server">
  <h3><br>
    QUESTION9.
    <input id="rdo_3" type="radio" value="1" name="price9" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price9" onClick="DisplayPrice(this.value);">
    NO <br>
  </h3>
</form>
<form name="form10" id="form30" runat="server">
  <h3><br>
    QUESTION10.
    <input id="rdo_3" type="radio" value="1" name="price10" onClick="DisplayPrice(this.value);">
    DA
    <input id="rdo_4" type="radio" value="0" name="price10" onClick="DisplayPrice(this.value);">
    NE<br>
  </h3>
</form>
<h2><strong>TEST 4</strong></h2>
<form name="form1" id="form31" runat="server">
  <h3><br>
    QUESTION1.
    <input id="rdo_3" type="radio" value="1" name="price" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form2" id="form32" runat="server">
  <h3><br>
    QUESTION2.
    <input id="rdo_3" type="radio" value="1" name="price2" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price2" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form3" id="form33" runat="server">
  <h3><br>
    QUESTION3.
    <input id="rdo_3" type="radio" value="1" name="price3" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price3" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form4" id="form34" runat="server">
  <h3><br>
    QUESTION4.
    <input id="rdo_3" type="radio" value="1" name="price4" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price4" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form5" id="form35" runat="server">
  <h3><br>
    QUESTION5.
    <input id="rdo_3" type="radio" value="1" name="price5" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price5" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form6" id="form36" runat="server">
  <h3><br>
    QUESTION6.
    <input id="rdo_3" type="radio" value="1" name="price6" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price6" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form7" id="form37" runat="server">
  <h3>QUESTION7.
    <input id="rdo_3" type="radio" value="1" name="price7" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price7" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form8" id="form38" runat="server">
  <h3><br>
    QUESTION8.
    <input id="rdo_3" type="radio" value="1" name="price8" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price8" onClick="DisplayPrice(this.value);">
    NO<br>
  </h3>
</form>
<form name="form9" id="form39" runat="server">
  <h3><br>
    QUESTION9.
    <input id="rdo_3" type="radio" value="1" name="price9" onClick="DisplayPrice(this.value);">
    YES
    <input id="rdo_4" type="radio" value="0" name="price9" onClick="DisplayPrice(this.value);">
    NO <br>
  </h3>
</form>
<form name="form10" id="form40" runat="server">
  <h3><br>
    QUESTION10.
    <input id="rdo_3" type="radio" value="1" name="price10" onClick="DisplayPrice(this.value);">
    DA
    <input id="rdo_4" type="radio" value="0" name="price10" onClick="DisplayPrice(this.value);">
    NE<br>
  </h3>
</form>
<h2>Score &quot;TEST1&quot;
  <input type="text" name="totalSum" id="totalSum" value="" size="3" readonly="readonly">
</h2>
<h2>Score &quot;TEST2&quot;
  <input type="text" name="totalSum2" id="totalSum2" value="" size="3" readonly="readonly">
</h2>
<h2>Score &quot;TEST3&quot;
  <input type="text" name="totalSum3" id="totalSum3" value="" size="3" readonly="readonly">
</h2>
<h2>Score &quot;TEST3&quot;
  <input type="text" name="totalSum4" id="totalSum4" value="" size="3" readonly="readonly">
</h2>
</body> 
```

# orchardcms - 从主站点发布果园内容项目

> ID：14988852
> 
> 赞同：1
> 
> 时间：2013-02-20T20:01:23.283
> 
> 标签：orchardcms, multi-tenant

假设我正在尝试从我的主要果园网站向租户发布一篇文章。我将如何创建一个模块，我可以在其中选择我想要发布的内容，然后将其发布给我想要的租户。我会使用 xmlrpc 发布到它还是有另一种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:10:41.337

它已经完成了。

有关演示，请参阅[http://www.youtube.com/watch?v=2VpIOjSJwFo&feature=share&list=PL49EB89430968C7D4 ，有关该功能的讨论，请参阅](http://www.youtube.com/watch?v=2VpIOjSJwFo&feature=share&list=PL49EB89430968C7D4)[http://orchard.codeplex.com/discussions/402151](http://orchard.codeplex.com/discussions/402151)。这很可能会出现在 1.7 中。

# php - 如何使这个重写规则起作用？

> ID：14988854
> 
> 赞同：1
> 
> 时间：2013-02-20T20:01:26.173
> 
> 标签：php, apache, mod-rewrite, url-rewriting

我正在尝试做的是一个非常简单的想法，但不知何故它不起作用。我需要这个重写规则才能工作：

```
RewriteRule ^([a-zA-Z0-9-]+)/?([a-zA-Z0-9-=]*)$ index.php?op=$1&$2 [L,NC] 
```

我认为这几乎是不言自明的，但我希望规则将第一个正则表达式组作为`op`参数传递，第二个正则表达式组原封不动地传递给脚本。像这样：

> [http://example.org/view/?post_slug=awesome-apache-mods](http://example.org/view/?post_slug=awesome-apache-mods) --> [http://example.org/index.php?op=view&post_slug=awesome-apache-mods](http://example.org/index.php?op=view&post_slug=awesome-apache-mods)

这里的问题是第一部分工作得很好，这意味着`op`参数设置正确但第二部分丢失了。我的意思是字面上输了。当我发出`print_r($_GET)`时，只有`op`参数。

```
Array
(
    [op] => view
) 
```

我想知道这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:24:48.500

我使用 preg_match_all 测试了您的模式，它与 URL 不匹配，因为 _ 未在模式中定义，但是当我添加 _ 时，它与 URL 匹配：

```
$text = 'view/?post_slug=awesome-apache-mods';
$pattern = '/^([a-zA-Z0-9-]+)\/\?([a-zA-Z0-9_=-]*)$/';
preg_match_all($pattern, $text, $out);
print_r($out); 
```

那么你的 .htaccess 模式应该是这样的：

```
^([a-zA-Z0-9-]+)/\?([a-zA-Z0-9_=-]*)$ [L,NC, QSA] 
```

如果 /view 是恒定的，最好使用它：

```
RewriteRule ^([a-zA-Z0-9_-=]*)$ index.php?op=view&$2 [L,NC, QSA] 
```

# c# - 在运行时从 IList 创建未知类型的 IQueryable

> ID：14988856
> 
> 赞同：1
> 
> 时间：2013-02-20T20:01:28.230
> 
> 标签：c#, reflection, iqueryable

我有一个类型实体的 IList。

我有一个字符串表示从实体派生的类的类型。

我需要使用字符串将我的 IList 转换为从 Entity 派生的 Type 的 IQueryable。

遗憾的是，实体和派生类的程序集不是执行程序集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:11:36.083

这是动态 linq 和反射的方法

```
var list = new List<Company>()
{
    new Company { Foo = "1", NoEmployees = 1 },
    new Company { Foo = "3", NoEmployees = 3 }
};

MethodInfo method = typeof(Queryable).GetMethods().Where(x => x.Name == "AsQueryable" && x.IsGenericMethod).First();
MethodInfo generic = method.MakeGenericMethod(new Type[] { Type.GetType(typeString) });

var queryable = (IQueryable)generic.Invoke(null, new object[] { list });

var result = queryable.Select("new (NoEmployees)").Where("NoEmployees > 2").OfType<object>().ToList(); 
```

下次请更明确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:42:30.260

请提供更多信息，这是我能想到的唯一可能是您想要的。

```
var queryable = new List<dynamic>();
foreach(var entity in IList<Entity>)
{
    dynamic companyProfile = Convert.ChangeType(entity, Type.GetType(typeString));
    if (companyProfile.CompanyProfileId == "something")
        queryable.Add(companyProfile);
    // Do Stuff
}
// Do Stuff 
```

# email - 用于电子邮件跟踪的 Google 电子表格功能

> ID：14988857
> 
> 赞同：0
> 
> 时间：2013-02-20T20:01:29.190
> 
> 标签：email, templates, spreadsheet, tracking

我正在尝试学习如何在 Google 电子表格中创建用于跟踪模板电子邮件成功率的函数。这是[示例](https://docs.google.com/spreadsheet/ccc?key=0AppkK6kryA8qdGNuTmtjdXZiUklBZEg1N3JWMWpmcmc&usp=sharing)。

C2、D2 和 E2 中的“模板跟踪”表的功能是什么？

本质上，如果“电子邮件跟踪”列 D 中存在一个值，则计算它（如果没有，则不要）并根据“电子邮件跟踪”列中的“模板编号”在“模板跟踪”表的适当位置创建总和C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:32:50.223

虽然仍然没有关于函数的结论，但我确实发现使用数据透视表是一种非常简单的解决方法。

可以看到[这里的样子。](https://docs.google.com/spreadsheet/ccc?key=0AppkK6kryA8qdEpUSXdDbGpRNDRDVTd0ak1wRWo5MVE&usp=sharing)

欢迎任何关于函数的进一步想法，但希望这对可能想要使用它的其他人有所帮助。

# html - 具有最大宽度的中心 div

> ID：14988860
> 
> 赞同：0
> 
> 时间：2013-02-20T20:01:42.663
> 
> 标签：html, center

我有 2 个 div 应用了最大宽度，可以按照我的意愿进行操作。一个的最大宽度为 900 像素，而其他的为 820 像素，如果窗口尺寸变小，它们会缩小。

```
<div id="componentWrapper">
    <div class="thumbContainer"></div>
</div>

#componentWrapper{
  position:absolute;
  height:190px;
  width:100%;
  max-width:500px;
  top:50%;
  background:red;
  margin-top:-85px;
}

#componentWrapper .thumbContainer{
  top:0px;
  left:0px;
  height:180px;
  max-width:420px;
  margin-left:40px;
  margin-right:40px;
  background:green;
  overflow:hidden;
} 
```

[http://jsfiddle.net/DzgQ3/1/](http://jsfiddle.net/DzgQ3/1/)

如果可能的话，我现在正在尝试使用纯 CSS 将其居中。即使窗口的大小小于外部元素的当前宽度，它也需要保持居中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:07:23.137

margin:auto; usually works for such things.

# youtube-api - 获取 YouTube 用户个人资料失败，某些帐户出现 401 Unauthorized

> ID：14988876
> 
> 赞同：0
> 
> 时间：2013-02-20T20:02:40.527
> 
> 标签：youtube-api

通过使用没有 YouTube 频道/用户名的帐户进行身份验证并调用 Get User 方法（[https://gdata.youtube.com/feeds/api/users](https://gdata.youtube.com/feeds/api/users/default) ），我能够在[OAuth 2.0 Playground中复制此问题](https://developers.google.com/oauthplayground)[/默认](https://gdata.youtube.com/feeds/api/users/default)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:02:40.527

可以在没有 YouTube 频道的情况下拥有 YouTube 帐户（即拥有 YouTube 用户名）。Google 将此称为未关联的帐户。

如果您在未链接的帐户上调用 YouTube API 2.0 版中定义的某些方法，将引发 401 Unauthorized 错误。事实证明，有一个相对未记录的 YouTube API 版本（2.1 版）可以为未链接的帐户启用功能。

更多信息：[http ://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html](http://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html)

我只需将版本标头从 更改为即可修复[OAuth 2.0 Playground](https://developers.google.com/oauthplayground)中的错误。`GData-Version: 2.0``GData-Version: 2.1`

# php - While/foreach 循环返回同一行的四个

> ID：14988879
> 
> 赞同：0
> 
> 时间：2013-02-20T20:02:56.953
> 
> 标签：php, loops, foreach, while-loop, repeat

我似乎无法弄清楚为什么这个脚本会这样做，所以我需要有更多经验/更好的眼睛的人来告诉我问题是什么。我似乎无法在网上其他地方找到任何东西，但我的搜索字词可能是错误的。这组 While/Foreach 循环工作得很好，只是它会吐出同一行四次：

```
 $squery = "SELECT username, name FROM name_records";
   $sresult = mysql_query($squery);
   while($srow = mysql_fetch_array($sresult)) {
        foreach ($srow as $scell) {
        $username = $srow['username'];
             $name = $srow['name'];
             $queryi = "SELECT SUM(totalseconds) FROM gradpoint WHERE username = '$username'";
             $resulti = mysql_query($queryi) or die(mysql_error());
             while($rowi = mysql_fetch_array($resulti)){
                  $total = $rowi['SUM(totalseconds)'];
                  $minutes = $total / 60;
                  echo $name ." has worked for " .$minutes ." minutes today! Good jorb!<p/>";
             }
         }
 } 
```

如果 name_records 表中的前两个条目是“Bob Ross, br01234”和“Alfred Hitchcock, ah43210”，那么上面的代码会输出：

```
 Bob Ross has worked for 342 minutes today! Good jorb!
 Bob Ross has worked for 342 minutes today! Good jorb!
 Bob Ross has worked for 342 minutes today! Good jorb!
 Bob Ross has worked for 342 minutes today! Good jorb!
 Alfred Hitchcock has worked for 187 minutes today! Good jorb!
 Alfred Hitchcock has worked for 187 minutes today! Good jorb!
 Alfred Hitchcock has worked for 187 minutes today! Good jorb!
 Alfred Hitchcock has worked for 187 minutes today! Good jorb! 
```

为什么是四个？为什么？！我尝试了几种不同的方法来修复它（对不起，我不记得我现在尝试了什么），但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:06:48.897

问题是您正在遍历列。删除 foreach 循环，你应该会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:07:05.777

我认为问题来自foreach：

```
 //foreach ($srow as $scell) {
    $username = $srow['username'];
         $name = $srow['name'];
         $queryi = "SELECT SUM(totalseconds) FROM gradpoint WHERE username = '$username'";
         $resulti = mysql_query($queryi) or die(mysql_error());
         while($rowi = mysql_fetch_array($resulti)){
              $total = $rowi['SUM(totalseconds)'];
              $minutes = $total / 60;
              echo $name ." has worked for " .$minutes ." minutes today! Good jorb!<p/>";
         }
     //} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:09:57.340

您可以通过直接从数据库中查询所需内容并迭代简单结果来简化代码。

```
SELECT name, username, sum(gradpoint.totalseconds) as total FROM name_records, gradpoint where name_records = gradpoint.username group by gradpoint.username 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:10:17.087

你可以通过某种加入和组来实现你想要的。有点像：

```
 $squery = "SELECT nr.username, nr.name, SUM(g.totalseconds) as totsec FROM name_records nr, gradpoint g
WHERE g.username=nr.username
GROUP BY nr.username,nr.name"; 
```

可能工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T20:18:58.633

```
$query = "
SELECT u.*, (SUM(g.totalseconds) / 60) as sum
FROM name_records u
JOIN gradpoint g
ON  u.username = g.username
GROUP BY u.username;
";
$result = mysql_query($query);
while($row = mysql_fetch_array($result)) {
    echo $row['name'] . " has worked for " . $row['sum'] . " minutes today! Good jorb!<br/>";
} 
```

还包括除以 60。

# iphone - iOS 特定媒体查询

> ID：14988880
> 
> 赞同：2
> 
> 时间：2013-02-20T20:02:58.043
> 
> 标签：iphone, ios, css, ipad, media

有谁知道使用媒体查询仅针对 iOS 设备的方法？我正在寻找一种方法给 iPhone (1,3G,3GS,4,4S,5) 用户一种体验，给 iPad (1,2,3,mini) 用户另一种体验，以及其他所有人（桌面、安卓、 windows phone, bb) 默认体验。

我觉得我的选择有限，因为许多手机具有相似的宽度和参数。有谁知道在特定于 iPhone 和特定于 iPad 的媒体查询中使用什么？

到目前为止，我已经使用以下代码锁定了 iPhone 5：

```
@media screen and (device-aspect-ratio: 40/71){} 
```

和 iPhone 4 和 4S：

```
@media
only screen and (-webkit-min-device-pixel-ratio : 2) and (orientation:portrait),
only screen and (min-device-pixel-ratio : 2)  and (orientation:portrait){}

@media screen and (-webkit-min-device-pixel-ratio : 2) and (orientation:landscape), screen and (min-device-pixel-ratio : 2) and (orientation:landscape){} 
```

我在这里看到了与此类似的问题，但还没有找到解决此特定用例的问题。

这是在电子邮件中使用的，所以我无法使用 javascript。仅限媒体查询...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:09:56.790

媒体查询只能推断[出一些媒体特征](http://www.w3.org/TR/css3-mediaqueries#media1)，并且旨在根据特征提供不同的内容，而不是品牌或型号。

您可以做的最好的事情可能是针对列出的每个设备的确切设备宽度：这里有人已经提供了作为指示，作为指示，[如何专门匹配 iPad 的尺寸](https://stackoverflow.com/questions/2678297/how-to-target-css-for-ipad-but-exclude-safari-4-desktop-using-a-media-query?rq=1)。

问题在于，在众多设备中，有些设备具有相同的尺寸（以及 webkit 浏览器——[这可以通过黑客来推断](http://www.smipple.net/snippet/joost.kiens/Using%20media%20queries%20to%20target%20webkit)）。总而言之，在确定相关设备的深奥品牌或操作系统功能方面，CSS 甚至比 JS 更差。

# javascript - Move Selection to next word using JavaScript

> ID：14988886
> 
> 赞同：1
> 
> 时间：2013-02-20T20:03:48.497
> 
> 标签：javascript

I have some html text i.e.

```
This is line1 
```

I can get the initial user selection using `window.getSelection()` assume it is 'This'. On a click of a button, I like the user selection to move to the next word i.e. 'is'. How can I do this? I currently have the following code which does not work:

```
function myFunction()
{
var selection=window.getSelection();
selection.collapse(selection.focusNode, 0);
selection.modify("move","forward","word");
selection.extend(selection.focusNode, selection.focusOffSet);
} 
```

and this is't good for me, because even the earlier word stays selected

```
var selection = window.getSelection();
selection.modify("extend", "forward", "word"); 
```

# python - Reading POST body with bottle.py

> ID：14988887
> 
> 赞同：20
> 
> 时间：2013-02-20T20:03:54.940
> 
> 标签：python, post, python-2.7, bottle

I am having trouble reading a POST request with `bottle.py`.

The request sent has some text in its body. You can see how it's made here on line 29: [https://github.com/kinetica/tries-on.js/blob/master/lib/game.js](https://github.com/kinetica/tries-on.js/blob/master/lib/game.js).

You can also see how it's read on a `node`-based client here on line 4: [https://github.com/kinetica/tries-on.js/blob/master/masterClient.js](https://github.com/kinetica/tries-on.js/blob/master/masterClient.js).

However, I haven't been able to mimic this behavior on my `bottle.py`-based client. The [docs](http://bottlepy.org/docs/0.11/api.html#bottle.BaseRequest.body) say that I can read the raw body with a file-like object, but I can't get the data neither using a for loop on `request.body`, nor using `request.body`'s `readlines` method.

I'm handling the request in a function decorated with `@route('/', method='POST')`, and requests arrive correctly.

Thanks in advance.

* * *

EDIT:

The complete script is:

```
from bottle import route, run, request

@route('/', method='POST')
def index():
    for l in request.body:
        print l
    print request.body.readlines()

run(host='localhost', port=8080, debug=True) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-20T21:30:41.453

你试过简单`postdata = request.body.read()`吗？

以下示例显示使用原始格式读取发布的数据`request.body.read()`

它还会将正文的原始内容打印到日志文件（而不是客户端）。

为了显示对表单属性的访问，我向客户端添加了返回“姓名”和“姓氏”。

为了测试，我从命令行使用 curl 客户端：

```
$ curl -X POST -F name=jan -F surname=vlcinsky http://localhost:8080 
```

对我有用的代码：

```
from bottle import run, request, post

@post('/')
def index():
    postdata = request.body.read()
    print postdata #this goes to log file only, not to client
    name = request.forms.get("name")
    surname = request.forms.get("surname")
    return "Hi {name} {surname}".format(name=name, surname=surname)

run(host='localhost', port=8080, debug=True) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-05T08:06:57.067

用于处理 POST 数据的简单脚本。POST 数据写入终端并返回给客户端：

```
from bottle import get, post, run, request
import sys

@get('/api')
def hello():
    return "This is api page for processing POSTed messages"

@post('/api')
def api():
    print(request.body.getvalue().decode('utf-8'), file=sys.stdout)
    return request.body

run(host='localhost', port=8080, debug=True) 
```

将 json 数据 POST 到上述脚本的脚本：

```
import requests
payload = "{\"name\":\"John\",\"age\":30,\"cars\":[ \"Ford\", \"BMW\",\"Fiat\"]}"
url = "localhost:8080/api"
headers = {
  'content-type': "application/json",
  'cache-control': "no-cache"
  }
response = requests.request("POST", url, data=payload, headers=headers)
print(response.text) 
```

# sql-server - 我可以授予数据库用户在架构中创建视图的权限吗？

> ID：14988895
> 
> 赞同：4
> 
> 时间：2013-02-20T20:04:41.380
> 
> 标签：sql-server, sql-server-2008

我想设置一个安全情况，我的数据库用户（“ApplicationUser”）有权在模式中创建、更改和删除视图。

如果我执行语句

```
GRANT ALTER ON SCHEMA :: MySchema TO ApplicationUser; 
```

然后连接数据库并执行语句：

```
CREATE VIEW [MySchema].[MyView] AS SELECT * FROM SomeTable 
```

我收到错误消息

```
CREATE VIEW permission denied in database 'MyDatabase'. 
```

是否可以按照我想要的方式配置安全性，或者我必须在整个数据库上授予“ALTER”？或者是其他东西？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T20:14:15.743

```
create schema myschema authorization ApplicationUser
GO

grant create view to ApplicationUser
GO 
```

为此，您需要更改架构的授权，这可能会产生其他后果，或者使用数据库 DDL 触发器之类的东西。

对于现有架构，请执行以下操作：

```
alter authorization on schema::myschema to ApplicationUser 
```

就像我说的，这种方式应该谨慎行事。对于另一种方式[http://msdn.microsoft.com/en-us/library/ms186406(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186406(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-23T15:20:12.377

我能够做到这一点...

1.  将数据库的创建视图/选择权限授予角色
2.  为我想要查看的架构授予该角色的更改权限
3.  对于我不想拥有视图的架构，拒绝更改该角色的权限

这是我的语法...

```
USE [database];
CREATE ROLE [role];
GRANT SELECT TO [role];
GRANT CREATE VIEW TO [role];
GRANT ALTER ON SCHEMA::[schema 1] TO [role];
DENY ALTER ON SCHEMA::[schema 2] TO [role];

--TEST 
/*
EXECUTE AS USER = '[user w/role]';
CREATE VIEW [schema 1].test AS (select 'test' as 'test');
DROP VIEW [schema 1].test
CREATE VIEW [schema 2].test AS (SELECT 'test' AS 'test');
DROP VIEW [schema 2].test 
REVERT
*/ 
```

# css - 页脚下的间隙 - 粘性页脚？

> ID：14988896
> 
> 赞同：0
> 
> 时间：2013-02-20T20:04:45.550
> 
> 标签：css, footer

我在这里有一个演示来说明我的问题。

[http://www.ttmt.org.uk/forum/](http://www.ttmt.org.uk/forum/)

它是页眉、内容和页脚。内容将页脚推到窗口下方，但页脚下方仍有间隙。

为什么页脚下方有空隙？

我需要一个粘性页脚吗？

响应式布局的最佳粘性页脚是什么？

提前感谢您的帮助。

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <title>Title of the document</title>
      <meta name="description" content="">
      <meta name="keywords" content="">
      <meta name="robots" content="">

      <style type="text/css">

        /* http://meyerweb.com/eric/tools/css/reset/ 
           v2.0b1 | 201101 
           NOTE: WORK IN PROGRESS
           USE WITH CAUTION AND TEST WITH ABANDON */

        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, figcaption, figure, 
        footer, header, hgroup, menu, nav, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            outline: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }
        /* HTML5 display-role reset for older browsers */
        article, aside, details, figcaption, figure, 
        footer, header, hgroup, menu, nav, section {
            display: block;
        }
        body {
            line-height: 1;
        }
        ol, ul {
            list-style: none;
        }
        blockquote, q {
            quotes: none;
        }
        blockquote:before, blockquote:after,
        q:before, q:after {
            content: '';
            content: none;
        }

        /* remember to define visible focus styles! 
        :focus {
            outline: ?????;
        } */

        /* remember to highlight inserts somehow! */
        ins {
            text-decoration: none;
        }
        del {
            text-decoration: line-through;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        /* CLEAR FIX */

        .clear {
            clear: both;
        }

        .group:after {
            content: ".";
              display: block;
              height: 0;
              clear: both;
            visibility: hidden;
        }

        *html .group {
            height:1%;
        }

        *:first-child+html .group {
            min-height: 1px;
        }

        .clear {
            clear:both;
        }

        /* END CLEAR FIX */

        body{
            font:1em Helvetica, sans-serif;
        }
        #page{
            max-width:1000px;
            margin:0 auto;
        }   

        header{
            background:blue;
            height:100px;
        }

        .pageContent{
            padding:50px 0;
            background:#eee;
        }

        footer{
            background:#b5b6b9;
            width:1000px;
            margin:0 auto;
        }

        footer ul{
            float:left;
            margin:0 20px 0 0;
        }
        footer ul li:first-of-type a{
            text-transform:uppercase;
            font-weight:bold;
        }
        footer a{
            display:inline-block;
            color:white;
            font-size:.8em;
            padding:1px;
        }

      </style>

      </head>

    <body>

        <div id="page">

          <header class="group">
            <h2>Header</h2>
          </header>  

            <section class="pageContent">
                <h2>Content</h2>
                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

                  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

            </section>

      <footer class="group">
        <h2>Footer</h2>

            <ul>
              <li><a href="#">One</a></li>
            </ul>

            <ul>
              <li><a href="#">Two</a></li>
              <li><a href="#">2-1</a></li>
              <li><a href="#">2-2</a></li>
              <li><a href="#">2-3</a></li>
              <li><a href="#">2-4</a></li>
            </ul>

            <ul>
              <li><a href="#">Three</a></li>
              <li><a href="#">3-1</a></li>
              <li><a href="#">3-2</a></li>
              <li><a href="#">3-3</a></li>
              <li><a href="#">3-4</a></li>
              <li><a href="#">3-5</a></li>
              <li><a href="#">3-6</a></li>
            </ul>

      </footer>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:14:04.530

删除这个：

```
.group::after {
  height: 0; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:30:17.423

我见过的唯一一个 100% 工作的粘性页脚是这个：http: [//jsfiddle.net/DU3uf/](http://jsfiddle.net/DU3uf/)

**HTML**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title of the document</title>
</head>
<body>
    <div id="wrapper">
        <header>

        </header>
        <section>

        </section>
        <div id="push"></div>
    </div>
    <footer>

    </footer>
</body>
</html> 
```

**CSS**

```
html, body { width:100%; height:100%; }
#wrapper { width:100%; min-height:100%; height:auto; margin:0 auto -100px; }
#wrapper > header { width:100%; height:100px; background-color:#333; }
#wrapper > section { width:100%; height:400px; background-color:#FFF; }
#push { width:100%; height:100px; clear:both; }
footer { width:100%; height:100px; background-color:#1BA1E2; } 
```

[它与引导程序http://getbootstrap.com/](http://getbootstrap.com/)使用的相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:15:45.057

```
.group::after {
  content: ".";
  display: block;
  height: 0;
  clear: both;
  visibility: hidden;
} 
```

删除这个`height: 0;`

# android - Oauth 2 on an Android app

> ID：14988897
> 
> 赞同：11
> 
> 时间：2013-02-20T20:04:47.700
> 
> 标签：android, oauth, oauth-2.0

So i need to be able to use Oauth for the login part on my Android application(not for Twitter, google,etc...) it's a private application. The rest of the app uses rest services w/ the authenticated token.

Here basically i'm looking for any tips, a library or an article recommendation. Most of the articles i found are about how to login to Google's services and such.

Thanks,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T18:58:51.277

检查这个：[scribe](https://github.com/fernandezpablo85/scribe-java)这很简单。

这是 Oauth2.0 “权威”引用的库列表：

[oauth.net/2](http://oauth.net/2/)

# c# - using wpf from powershell

> ID：14988903
> 
> 赞同：0
> 
> 时间：2013-02-20T20:05:06.343
> 
> 标签：c#, wpf, powershell, binding

I’ve started playing around with powershell. At the moment I’m trying to load a C# class which displays a WPF window, so for so good. A TextBlock placed in the window binds to a Property in the class. (I’ve tested the binding in a CmdLine Application and it works fine)… but when I load the class from powershell using add-tape the binding won’t work.

What am I doing wrong?

```
$a =@"
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

public class TestClass : INotifyPropertyChanged
    {
        private bool _showed = false;
        private String _myString;

        public String MyString
        {
            get { return _myString; }
            set
            {
                _myString = value;
                if (!_showed)
                    ThreadStuff();
                OnPropertyChanged("MyString");
            }
        }

        public TestClass()
        {
        }

        public TestClass(String value)
        {
            _myString = value;
        }

        private void ThreadStuff()
        {
            _showed = true;
            var thread = new Thread(new ThreadStart(() =>
            {
                CreateWindow();
                System.Windows.Threading.Dispatcher.Run();
            }))
            {
                IsBackground = true
            };
            thread.SetApartmentState(ApartmentState.STA);
            thread.Start();
        }

        private void CreateWindow()
        {
            var w = new Window();
            var g = new Grid();
            g.RowDefinitions.Add(new RowDefinition { Height = new GridLength(1, GridUnitType.Star) });
            g.RowDefinitions.Add(new RowDefinition { Height = new GridLength(1, GridUnitType.Star) });
            g.ColumnDefinitions.Add(new ColumnDefinition { Width = new GridLength(1, GridUnitType.Star) });
            g.ColumnDefinitions.Add(new ColumnDefinition { Width = new GridLength(1, GridUnitType.Star) });

            for (int i = 0; i < g.RowDefinitions.Count; i++)
            {
                for (int j = 0; j < g.ColumnDefinitions.Count; j++)
                {
                    var b = new Button { Content = new TextBlock { Text = i.ToString() } };
                    Grid.SetRow(b, i);
                    Grid.SetColumn(b, j);
                    g.Children.Add(b);
                }
            }

            var t = new TextBlock();
            var binding = new Binding { Source = MyString, Mode = BindingMode.OneWay };
            t.SetBinding(TextBlock.TextProperty, binding);

            (g.Children[g.Children.Count - 1] as Button).Content = t;

            w.Content = g;
            w.Show();
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected virtual void OnPropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
                handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
"@

Add-Type -TypeDefinition $a -ReferencedAssemblies presentationcore, presentationframework, windowsbase, "System.Xaml"

$test = New-Object TestClass
$test.MyString = 'hi from powershell' 
```

Btw. I’m working with powershell for the first time (I’ve just worked with C# until now ). In the end it is my goal to load a Xaml file as view and a C# file as view mode, put them together and set the property of the vm from powershell (Yes it is totally stupide and it would be much easier to write a normal WPF application… but I’ve to do it this way…school now a days^^ )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:28:33.400

你用的是什么版本的powershell？您的代码在 Win8 上的 Powershell 3.0 中为我“工作”。

我说“工作”是因为它的工作方式与我通过 C# 控制台应用程序运行它时的工作方式相同：

*   在你设置之前什么都不会发生`MyString`
*   第一次设置时`MyString`，会弹出一个GUI，右下象限包含值`MyString`
*   `MyString`（绑定未正确设置，因此更新时文本不会更新`MyString`）的后续修改没有任何反应

如果这是您想要的行为，并且它根本不起作用，那么它可能是旧版本 PS 的问题。

我怀疑您的真正问题是绑定不起作用。那是因为这一行：

```
var binding = new Binding { Source = MyString, Mode = BindingMode.OneWay }; 
```

应该

```
var binding = new Binding { Source = this, Mode = BindingMode.OneWay, Path = new PropertyPath("MyString") }; 
```

进行这种更改后，C# 控制台应用程序和 powershell 中的一切似乎都很好。

# amazon-web-services - 如果我切换云提供商，我会失去搜索排名吗？

> ID：14988905
> 
> 赞同：0
> 
> 时间：2013-02-20T20:05:22.833
> 
> 标签：amazon-web-services, seo, cloud

我的网站托管在 AWS 上。我的营销页面托管在 HubSpot 上。我有指向两个主机（www.mypage.com -> AWS 和 info.mypage.com -> HubSpot）的 CNAME 记录。

Q1：info.mypage.com 页面的搜索排名是否也归功于我的主站点？也就是说，如果我的目标网页做得很好，谷歌会提高我的主站点的排名吗？

Q2：如果我将营销内容转移到 AWS，Google 会重置我的搜索排名吗？或者它是否遵循新的 CNAME 别名，从而在搜索中为我的登录页面提供相同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:07:06.523

1.  不，每个页面都根据自己的优点进行排名。（但是当涉及到垃圾邮件和质量控制时，您网站上其他页面上的内容质量差/低质量可能会损害整个网站的排名）。

2.  如果您的 URL 没有更改，那么这对搜索引擎应该是透明的。

# mime-types - Correct MIME type for multipart MJPEG stream over http?

> ID：14988910
> 
> 赞同：9
> 
> 时间：2013-02-20T20:05:39.807
> 
> 标签：mime-types, mjpeg

Chrome always throws a warning for my MJPEG stream:

```
Resource interpreted as Image but transferred with MIME type multipart/x-mixed-replace 
```

Is there maybe a better MIME type to use that can fix this? Can I just use 'Image', even though it IS a multipart stream?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-15T06:45:37.463

从网络上的不同资源中， ie更常用的`MIME`类型是. [如此视频](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-types-definitions.html#table-video-types)[类型](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-types-definitions.html#table-video-types)表中所示，它采用的视图仅略有不同。`M-JPEG``Motion JPEG``video/x-motion-jpeg``GStreamer``video/x-jpeg`[`MIME`](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-types-definitions.html#table-video-types)

类型的网络资源`MJPEG` `MIME`是：

1.  [html快速](http://www.htmlquick.com/reference/mime-types.html)

2.  [站点点](https://www.sitepoint.com/web-foundations/mime-types-complete-list/)

3.  [哈佛网站](http://hul.harvard.edu/ois/systems/wax/wax-public-help/mimetypes.htm)

4.  [IBM 网站](http://publib.boulder.ibm.com/infocenter/cmgmt/v8r3m0/index.jsp?topic=/com.ibm.vc.doc/vidprmst24.htm)

# asp.net - Listview if statement

> ID：14988916
> 
> 赞同：1
> 
> 时间：2013-02-20T20:06:00.583
> 
> 标签：asp.net

I have this code in my listview:

```
<td>
<asp:TextBox ID="Used_For_Neighborhood_AnalysisTextBox" runat="server" Text='<%# Bind("[Used For Neighborhood Analysis]") %>' /> 
</td> 
```

I would like to check if this value equals Yes then make it --Yes-- in bold.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:47:41.347

```
<style>
    .myYes { font-weight: bold; }
</style>

<asp:TextBox ID="TextBox1" runat="server" 
    Text='<%# Convert.ToBoolean(Eval("[Used For Neighborhood Analysis]").ToString()) ? "--Yes--" : "" %>'
    CssClass='<%# Convert.ToBoolean(Eval("[Used For Neighborhood Analysis]").ToString()) ? "myYes" : "" %>'>
</asp:TextBox> 
```

你想使用[Eval](http://weblogs.asp.net/leftslipper/archive/2007/06/29/how-asp-net-databinding-deals-with-eval-and-bind-statements.aspx)。否则，您将不得不在 OnItemDataBound 内进行绑定。

作为一个好的做法，请避免在列名中使用空格。

# extjs - Sencha Touch 2 : Not able to add the tabpanel as an item in the panel

> ID：14988917
> 
> 赞同：0
> 
> 时间：2013-02-20T20:06:01.370
> 
> 标签：extjs, sencha-touch, sencha-touch-2

I am trying to add a tabpanel as an item in the panel but it does not work as expected.

I have defined tabpanel as a separate view as below.

```
Ext.define("WU.view.WUTabPanel", {
    extend: "Ext.tab.Panel",
    alias: "widget.wuTabPanel",
    config: {
             tabBar: {
                    docked: 'bottom'
                },
                 items: [

                    {
                      title: 'Home',
                      iconCls: 'home',
                      html: 'Home Screen',
                    },
                    {
                        title: 'Send Money',
                        iconCls: 'favorites',
                        html: 'Contact Screen',

                    }
                    ]

        },

}); 
```

This is my main view where I am trying to add the tabPanel inside the Panel.

```
Ext.define('WU.view.WUHomePage', {
    extend : 'Ext.Panel',
    requires : [ 'Ext.Toolbar', 'Ext.TitleBar', 'Ext.dataview.List', 'Ext.Ajax', 'Ext.data.proxy.Ajax' ],
    xtype : 'homePage',
    alias : 'widget.wuHomePageView',

    config : {
        fullscreen : true,
        title : 'MainMenu',
        // iconCls : 'mainMenuhome',
        disabledCls : 'mainMenuhome',
        items : [
                {
                    xtype : 'titlebar',
                    title:'Main Menu',
                    items : [ {
                        text : 'Back',
                        ui:'back',
                        id : 'homePageBack',
                        align : 'left',
                        handler : function(btn) {
                            console.log('HomePaga  >> Back to Login');
                            this.up('homePage').fireEvent('backButtonCommand', this,'homePage');
                        }
                    } ]
                },
                {
                    xtype : 'list',
                    id : 'mainList',
                    title : 'Sample',
                    height : '100%',
                },
                    itemTpl : '<div class = mainList>'
                             '<div class = listArrowImage><img class= mArrowImage src={arrow}></img></div>'
                        </div>',

                }, 
                {
                    xtype: 'wuTabPanel',
                }, 
                ],

    },
}); 
```

When the mainPage is rendered,the tab bar is not appeared in the bottom and leave the hollow space in the bottom.

Is there any issue with the configuration? Any better ideas on how to achieve this part? In my application, there are 7-8 views and all have same tabbar in the bottom.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:15:41.113

您似乎试图将标题栏、高度 100% 列表和选项卡面板放入一个全屏组件中。我确定标题栏很好（如果它是停靠的工具栏），但您的列表试图占据所有高度，并且没有为选项卡面板留下任何高度。请记住，选项卡面板不是选项卡栏，两者兼而有之。如果您希望底部栏控制所有主要视图，请将您的列表设置为选项卡面板项目之一。

# java - 如何循环二维数组中的元素以构造“Ruby 函数式”中的字符串

> ID：14988918
> 
> 赞同：1
> 
> 时间：2013-02-20T20:06:02.490
> 
> 标签：java, ruby, functional-programming, ruby-1.9.3

Ruby 大量使用“函数式概念”中的函数，例如**map、each**。它们确实依赖于一个 **独立的函数**，在 Ruby 中称为**块。**

循环二维数组是很常见的，创建一个关于元素的字符串。

在java中，它可能看起来像

```
 public String toString(){
        String output = "[";
        for (int i =0; i<array.length; i++) {
            output+= "Row "+(i+1)+" : ";
            for (int j=0; j<array[0].length;j++ ) {
                output += array[i][j]+", ";
            }
            output += "\n";
        }

        return output += "]";
    } 
```

我尝试在“Ruby 函数式”中重写这样的东西，但我认为仍有一些改进。例如。我想删除可变变量**输出**

```
 def to_s
        output = "[\n"
        @data.each_with_index do |row,i|
            output << "Row #{i+1} : "
            row.each { |num| output << "#{num}," }
            output << "\n"
        end

        output+"]"
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:52:51.383

每当您看到这种模式时：

1.  初始化一个累加器（在你的情况下`output`）
2.  在某些集合的每次迭代中修改累加器（在您的情况下附加到它）
3.  返回累加器

那是 a `fold`，或者用 Ruby 术语来说是 a `inject`。

实际上，这有点重言式。A`fold`是一种通用的迭代方法：可以通过迭代集合的元素来表示的*所有*内容也可以表示为`fold`集合上的 a。换句话说：（包括！）上的*所有*方法也可以定义为原始方法而不是.`Enumerable``each``inject``each`

这样想：集合可以是空的，也可以是当前元素。没有第三种选择，如果您涵盖了这两种情况，那么您已经涵盖了所有内容。好吧，`fold`有两个参数：一个告诉它当集合为空时要做什么，一个告诉它如何处理当前元素。或者，换一种说法：您可以将集合视为一系列指令，并且`fold`是这些指令的解释器。指令只有两种：`END`指令和`VALUE(el)`指令。您可以将这两个指令的解释器代码提供给`fold`.

在 Ruby 中，第二个参数不是参数列表的一部分，它是块。

那么，它看起来像什么`fold`？

```
def to_s
  @data.each_with_index.inject("[\n") do |acc, (row, i)|
    acc + "Row #{i+1} : #{row.join(',')}\n"
  end + ']'
end 
```

如果您对是否`each_with_index`可能会用一些非功能性杂质感染您的代码感到好奇，请放心，您可以通过在累加器中包含索引来轻松摆脱它：

```
def to_s
  @data.inject(["[\n", 1]) do |(s, i), row|
    [s + "Row #{i} : #{row.join(',')}\n", i+1]
  end.first + ']'
end 
```

另请注意，在第一种情况下*，*我们`each_with_index`实际上并没有对累加器做任何“有趣”的事情，不像第二种情况，我们使用它来保持索引计数。事实上，第一种情况实际上是 的一种受限形式`fold`，它并没有使用它的全部力量。它真的只是一个`map`：

```
def to_s
  "[\n" + @data.map.with_index(1) do |row, i|
    "Row #{i} : #{row.join(',')}\n"
  end.join + ']'
end 
```

在我个人看来，在这里使用（可变）字符串而不是字符串连接实际上是完全可以的：

```
def to_s
  "[\n" << @data.map.with_index(1) do |row, i|
    "Row #{i} : #{row.join(',')}\n"
  end.join << ']'
end 
```

这使我们免于创建一些不必要的字符串对象，但更重要的是：它更加地道。真正的问题是*共享*可变状态，但我们在这里没有共享可变字符串：当`to_s`返回时，它的调用者*确实*可以访问该字符串，但`to_s`它自己已经返回，因此不再可以访问它。

如果你想得到真正的花哨，你甚至可以使用字符串插值：

```
def to_s
  %Q<[\n#{@data.map.with_index(1) do |row, i|
    "Row #{i} : #{row.join(',')}\n"
  end.join}]>
end 
```

不幸的是，这不仅破坏了 IRb 的语法突出显示，而且还破坏了我的大脑;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T21:49:30.120

这是一个没有可变变量的方法：

```
def to_s
  (
    [ "[" ] +
    @data.map.with_index { |row,i| "Row #{i+1} : #{row * ','}" } +
    [ "]" ]
  ).join("\n")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:47:18.223

同样的东西，但更短，块更少。

```
 def to_s
        output = "[\n"
        @data.each_with_index do |row,i|
            output << "Row #{i+1} : #{row.join(',')}\n"
        end

        output+"]"
    end 
```

# ruby - 尝试使用 rbenv 安装 ruby 1.9.3 但不断获得 ruby 1.8

> ID：14988920
> 
> 赞同：0
> 
> 时间：2013-02-20T20:06:11.303
> 
> 标签：ruby, version, rbenv

这是我运行并尝试使用 rbenv 安装 ruby​​ 1.9.3-p0 的命令列表，但每次运行时`ruby --version`我都会得到 1.8.23。我不确定这是为什么？

```
Anderss-MacBook-Pro:anchor anderskitson$ ruby --version
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
Anderss-MacBook-Pro:anchor anderskitson$ rbenv install 1.9.3-p0
Downloading yaml-0.1.4.tar.gz...
-> http://dqw8nmjcqpjn7.cloudfront.net/36c852831d02cf90508c29852361d01b
Installing yaml-0.1.4...
Installed yaml-0.1.4 to /Users/anderskitson/.rbenv/versions/1.9.3-p0

Downloading ruby-1.9.3-p0.tar.gz...
-> http://dqw8nmjcqpjn7.cloudfront.net/8e2fef56185cfbaf29d0c8329fc77c05
Installing ruby-1.9.3-p0...
Installed ruby-1.9.3-p0 to /Users/anderskitson/.rbenv/versions/1.9.3-p0

Downloading rubygems-1.8.23.tar.gz...
-> http://dqw8nmjcqpjn7.cloudfront.net/178b0ebae78dbb46963c51ad29bb6bd9
Installing rubygems-1.8.23...
Installed rubygems-1.8.23 to /Users/anderskitson/.rbenv/versions/1.9.3-p0

Anderss-MacBook-Pro:anchor anderskitson$ ruby --version
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
Anderss-MacBook-Pro:anchor anderskitson$ rbenv global 1.9.3-p0
Anderss-MacBook-Pro:anchor anderskitson$ ruby --version
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
Anderss-MacBook-Pro:anchor anderskitson$ rbenv version
1.9.3-p0 (set by /Users/anderskitson/.rbenv/version)
Anderss-MacBook-Pro:anchor anderskitson$ 
```

**更新**

我为 rbenv global 发布了这个

```
Anderss-MacBook-Pro:anchor anderskitson$ $ rbenv global 1.9.3-p0
-bash: $: command not found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:32:35.483

`rbenv global`在使用rbenv 安装 ruby​​ 版本后，您需要设置希望 shell 使用的 ruby​​ 版本。

```
$ rbenv global 1.9.3-p0 
```

有关更多信息，请参阅[这些文档](https://github.com/sstephenson/rbenv/#rbenv-global)。

# c# - Can I remotely run an ACCESS query on a DB located on an FTP server?

> ID：14988921
> 
> 赞同：2
> 
> 时间：2013-02-20T20:06:12.460
> 
> 标签：c#, sql, ms-access, ftp

I want to run a sql query on ms-access database that is located at ftp server and get only the result back of that query in my application written in c#. Is it possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:11:22.397

不可以。JET 必须能够通过标准 SMB 或本地位置打开文件。

看看您是否可以先使用某些工具将 FTP 位置映射到 SMB 类型的共享。或者将文件复制到本地。

**编辑：一种可能的解决方法（基于@baconsah 的回答）**

您实际上可以通过将文件写入 FTP 服务器来改进@baconsah 的设计。然后在远程服务器上有一个进程来获取写入，然后在该点进行查询并使结果在 FTP 输出上可用。您失去了延迟，但增加了复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:26:00.657

一个可怕的替代方案是让 access 数据库在远程系统上运行查询，在定时作业的基础上，并将结果输出到该 ftp 目录中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:51:36.997

您可以使用 FTP 命令`quote`或`literal`在 FTP 服务器计算机上执行程序（或 VBS 脚本）。

您的“解决方案”可以按如下方式工作：

1.  将 SQL 命令文本作为文件传输到 FTP 服务器

2.  运行在 ms-access 数据库上执行 SQL 命令的远程命令

3.  将第 2 步的结果传输回本地计算机

如前所述，这种情况是不可靠的、缓慢的、不安全的、需要错误处理的，......

# python - Pydev will not function correctly (i.e. imports raising errors)

> ID：14988926
> 
> 赞同：1
> 
> 时间：2013-02-20T20:06:34.783
> 
> 标签：python, eclipse, import, pydev

I'm on Mac OSX, and am running on Mountain Lion. A year or so ago, I installed PyGame so I could program in Eclipse. I was pretty satified, although the lack of code completion threw me off a bit. I plowed through it, and have managed to put up with everything so far. Then, today, I decided to try some PyOpenGL. I installed it using pip, and I copied and pasted he following code into my windows (I'm going to continue here as the actual code isnt the problem). Almost everything gives a warning. Almost everything. The sidebar is a solid wall of yellow.

Lines of code like

```
glBegin(GL_TRIANGLES) 
```

give me errors like

```
undefined variable: GL_TRIANGLES
undefined variable: glBegin 
```

Even going into Eclipse>Preferences>Pydev>Editor>Code Analysis and telling Eclipse to ignore undefined variables doesnt help. Other modules like Pygame do this for me too.

This bothers me. A lot. And I really don't want to be forced back into LWJGL and java.

Is there any way I can fix this problem once and for all?

```
#!/usr/bin/env python

from OpenGL.GL import *
from OpenGL.GLU import *

import pygame

def pyramid():

   glBegin(GL_TRIANGLES)

   glColor3f(1.0, 0.0, 0.0)      #   // Red
   glVertex3f(0.0, 1.0, 0.0)      #   // Top Of Triangle (Front)
   glColor3f(0.0, 1.0, 0.0)      #   // Green
   glVertex3f(-1.0, -1.0, 1.0)      #      // Left Of Triangle (Front)
   glColor3f(0.0, 0.0, 1.0)      #   // Blue
   glVertex3f(1.0, -1.0, 1.0)      #   // Right Of Triangle (Front)

   glColor3f(1.0, 0.0, 0.0)      #   // Red
   glVertex3f(0.0, 1.0, 0.0)      #   // Top Of Triangle (Right)
   glColor3f(0.0,0.0, 1.0)         #   // Blue
   glVertex3f(1.0, -1.0, 1.0)      #   // Left Of Triangle (Right)
   glColor3f(0.0, 1.0, 0.0)      #   // Green
   glVertex3f(1.0, -1.0, -1.0)      #      // Right Of Triangle (Right)

   glColor3f(1.0, 0.0, 0.0)      #   // Red
   glVertex3f(0.0, 1.0, 0.0)      #   // Top Of Triangle (Back)
   glColor3f(0.0,1.0, 0.0)         #   // Green
   glVertex3f(1.0, -1.0, -1.0)      #   // Left Of Triangle (Back)
   glColor3f(0.0, 0.0, 1.0)      #   // Blue
   glVertex3f(-1.0, -1.0, -1.0)   #      // Right Of Triangle (Back)

   glColor3f(1.0, 0.0, 0.0)      #   // Red
   glVertex3f(0.0, 1.0, 0.0)      #   // Top Of Triangle (Left)
   glColor3f(0.0, 0.0, 1.0)      #   // Blue
   glVertex3f(-1.0, -1.0, -1.0)   #      // Left Of Triangle (Left)
   glColor3f(0.0, 1.0, 0.0)      #   // Green
   glVertex3f(-1.0, -1.0, 1.0)      #      // Right Of Triangle (Left)

   glEnd()

   glBegin(GL_QUADS)

   glColor3f(0.0, 0.0, 1.0)
   glVertex3f(-1.0, -1.0, -1.0)
   glColor3f(0.0, 1.0, 0.0)
   glVertex3f(1.0, -1.0, -1.0)
   glColor3f(0.0, 0.0, 1.0)
   glVertex3f(1.0, -1.0, 1.0)
   glColor3f(0.0, 1.0, 0.0)
   glVertex3f(-1.0, -1.0, 1.0)

   glEnd()

def cube():
   glBegin(GL_QUADS)

   glColor3f(0.0, 1.0, 0.0)      #   // Set The Color To Green
   glVertex3f(1.0, 1.0, -1.0)      #   // Top Right Of The Quad (Top)
   glVertex3f(-1.0, 1.0, -1.0)      #   // Top Left Of The Quad (Top)
   glVertex3f(-1.0, 1.0, 1.0)      #   // Bottom Left Of The Quad (Top)
   glVertex3f(1.0, 1.0, 1.0)      #   // Bottom Right Of The Quad (Top)

   glColor3f(1.0, 0.5, 0.0)      #   // Set The Color To Orange
   glVertex3f(1.0, -1.0, 1.0)      #   // Top Right Of The Quad (Bottom)
   glVertex3f(-1.0, -1.0, 1.0)      #      // Top Left Of The Quad (Bottom)
   glVertex3f(-1.0, -1.0, -1.0)   #      // Bottom Left Of The Quad (Bottom)
   glVertex3f(1.0, -1.0, -1.0)      #      // Bottom Right Of The Quad (Bottom)

   glColor3f(1.0, 0.0, 0.0)      #   // Set The Color To Red
   glVertex3f(1.0, 1.0, 1.0)      #   // Top Right Of The Quad (Front)
   glVertex3f(-1.0, 1.0, 1.0)      #   // Top Left Of The Quad (Front)
   glVertex3f(-1.0, -1.0, 1.0)      #      // Bottom Left Of The Quad (Front)
   glVertex3f(1.0, -1.0, 1.0)      #   // Bottom Right Of The Quad (Front)

   glColor3f(1.0, 1.0, 0.0)      #   // Set The Color To Red
   glVertex3f(1.0, -1.0, -1.0)      #   // Top Right Of The Quad (Back)
   glVertex3f(-1.0, -1.0, -1.0)   #   // Top Left Of The Quad (Back)
   glVertex3f(-1.0, 1.0, -1.0)      #      // Bottom Left Of The Quad (Back)
   glVertex3f(1.0, 1.0, -1.0)      #   // Bottom Right Of The Quad (Back)

   glColor3f(0.0, 0.0, 1.0)      #   // Set The Color To Blue
   glVertex3f(-1.0, 1.0, 1.0)      #   // Top Right Of The Quad (Left)
   glVertex3f(-1.0, 1.0, -1.0)      #   // Top Left Of The Quad (Left)
   glVertex3f(-1.0, -1.0, -1.0)   #      // Bottom Left Of The Quad (Left)
   glVertex3f(-1.0, -1.0, 1.0)      #   // Bottom Right Of The Quad (Left)

   glColor3f(1.0, 0.0, 1.0)      #   // Set The Color To Violet
   glVertex3f( 1.0, 1.0, -1.0)      #   // Top Right Of The Quad (Right)
   glVertex3f( 1.0, 1.0, 1.0)      #   // Top Left Of The Quad (Right)
   glVertex3f( 1.0, -1.0, 1.0)      #   // Bottom Left Of The Quad (Right)
   glVertex3f( 1.0, -1.0, -1.0)   #      // Bottom Right Of The Quad (Right)

   glEnd()

if __name__ == "__main__":

   from sys import exit

   print ("Initalizing...")

   resolution = (400, 300)

   pygame.init()
   screen = pygame.display.set_mode(resolution, pygame.OPENGL|pygame.DOUBLEBUF)

   print ("Doing GL stuff...")
   glViewport(0, 0, resolution[0], resolution[1])

   glMatrixMode(GL_PROJECTION)
   glLoadIdentity()
   gluPerspective(45.0, float(resolution[0]) / resolution[1], 0.1, 1000.0)

   glMatrixMode(GL_MODELVIEW)
   glLoadIdentity()

   print ("More GL stuff...")
   glEnable(GL_DEPTH_TEST)

   glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST)

   glShadeModel(GL_SMOOTH)
   glClearColor(0.0, 0.0, 0.0, 0.0)

   print ("Minor details...")
   clock = pygame.time.Clock()

   rot_tri = 0
   rot_quad = 0

   import random

   print ("Mainloop...")
   while True:

      for event in pygame.event.get():

         if event.type == pygame.QUIT:
            pygame.quit()
            exit()

      glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

      glLoadIdentity()
      glTranslatef(-1.5, 0.0, -6.0)
      glRotatef(rot_tri, 0.0, 1.0, 0.0)
      pyramid()

      glLoadIdentity()
      glTranslate(1.5, 0.0, -6.0)
      glRotatef(rot_quad, 1.0, 0.0, 0.0)
      cube()

      rot_tri += 2.0
      rot_quad -= 1.5

      pygame.display.set_caption("hello_opengl.py FPS: %i" % clock.get_fps())

      pygame.display.flip()
      clock.tick() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:11:35.620

我在 Eclipse 和 PyOpenGL 中使用 PyDev 没有任何问题。我安装了 OpenGL `pip install pyopengl`，然后进入 Window > Preferences > PyDev > Interpreter - Python。在不更改任何内容的情况下点击应用。出现提示时，选择适当的解释器进行刷新。完成后，关闭首选项，然后关闭文件 > 重新启动。这立即起作用：

```
from OpenGL.GL import GL_TRIANGLES 
```

# git - 在 git log 中显示所有存储

> ID：14988929
> 
> 赞同：63
> 
> 时间：2013-02-20T20:06:53.470
> 
> 标签：git, git-log, git-stash

我想看到`git log`输出中的所有存储。有谁知道是否有办法做到这一点？

编辑：我想查看日志中的所有提交——*包括*存储提交。我尝试了命令：

```
git log --date-order --all 
```

但它只返回最顶层的存储。我也希望看到代表其他存储的提交。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-20T20:32:44.157

您可以使用`git stash list`. 也许您可以编写一个脚本来显示两者`git stash list`，`git log`并将其与别名一起使用。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-03-14T16:53:31.223

我来这里是为了和@jbialobr 做同样的事情，在阅读了以前的答案后，我做了更多的挖掘，并提出了以下内容。

@msmt 的答案为您提供了存储日志，您可以使用它来获取要在 git 日志中使用的哈希。

`git reflog show --format="%h" stash`只为您提供所有存储的哈希值，然后可以将其传递给 git log 命令，例如

`git log --date-order --all $(git reflog show --format="%h" stash)`

我个人现在使用的完整命令是

`git log --oneline --graph --decorate --all $(git reflog show --format="%h" stash)`

在 centos 上的 git 版本 2.5.1 上测试

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-20T20:11:20.943

不明白你的意思。stash 是一个分支，您可以使用`git log -g stash`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-05T16:37:35.663

另一种简单的方法是`git reflog show stash`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-21T13:29:25.613

完整命令：

`git log --oneline --graph --all $(git stash list --format="%H")`

藏匿处的清单：

`git stash list --format="%H"`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-18T15:16:34.317

**获取包含所有内容的树形图：所有分支，所有存储在您的指尖......**

* * *

*扩展来自 SicoAnimal 的一个[超级有用的答案](https://stackoverflow.com/a/35993495/5109693)，因此您不必输入所有这些内容（对于没有任何 Git UI 的远程 SSH 会话尤其有用）* ...

* * *

**1.设置git别名：**

```
# Short and sweet: hashes and graph with all branches and stashes
git config --global alias.l \
    '!sh -c '"'"' git log --oneline --graph --all --decorate $(git reflog show --format="%h" stash --) '"'"' '

# Same as above + dates and emails
git config --global alias.ll \
    '!sh -c '"'"' git log --graph --all --date=format:"'"%Y-%m-%d %H:%M"'" --pretty=format:"'"%C(yellow)%h%Creset%C(auto)%d%Creset %C(cyan)%cd%Creset %s %C(green)(%ce)%Creset"'" $(git reflog show --format="%h" stash --) '"'"' ' 
```

**2.使用别名**：

```
# Short and sweet: hashes and graph with all branches and stashes
git l

# Same as above + dates and emails
git ll 
```

**3\. 甜蜜的结果**：

请注意，您可以看到所有存储，而不仅仅是给定提交上的最新存储（用箭头显示）。

[![在此处输入图像描述](../Images/3b3da830c372f34287365c955913f76f.png)](https://i.stack.imgur.com/WEkdu.png)

* * *

改进空间：

```
# In case there are no stashes you get one-liner error message.
# The rest works as expected. Not sure how to fix it.
me@mymachine:~/projects/experiment/latest-angular-ten$ git l
fatal: bad revision 'stash'
* 00a696b (HEAD -> master) initial commit 
```

* * *

参考：

[如何使用带参数的嵌套命令创建 Git 别名？](https://stackoverflow.com/a/43881240/5109693)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2022-01-21T03:52:30.597

对于 git 版本 2.2.3 或更高版本，您可以简单地[`--reflog`](https://git-scm.com/docs/git-log/#Documentation/git-log.txt---reflog)使用`git log`.

```
git log --graph --oneline --all --reflog 
```

此外，[它还显示悬空提交](https://stackoverflow.com/a/34548567/9157799)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-12T08:01:14.487

如果您负担得起图形 GUI，请查看`gitk`.

它以视觉上不吸引人但非常紧凑和有用的形式向您显示分支、标签、远程分支存储等。它通常与包管理器中的“git”包一起提供，如果你也有“tk”（它使用的 GUI 工具包），它也可以工作。

# jquery - Only show specific div with anchor

> ID：14988930
> 
> 赞同：0
> 
> 时间：2013-02-20T20:06:59.100
> 
> 标签：jquery, html, tags, anchor

First of all, my coding skills are very basic so please bear with me.

I am making a website for an art exhibition which has many people contributing.

I have a page called profiles.html which contains all of the profile of the people who have contributed.

Each profile is contented within a DIV called profiles along with an anchor tag of the persons name.

If people go to the website www.example.com/profiles.html they will see all of the profiles.

However when they go to
www.example.com/profiles.html#example.name they will only see the profile of that person.

I have looked around the internet to try and find answers but I have not found any.

UPDATE:

A follow up question. Is it possible to show/ load extra content in the profiles.html#examplename that would not be seen in profiles.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:13:56.633

假设你有：

*   `class="profile"`每个配置文件的包装器
*   以及每个 pofile 包装器上的 id，与您的哈希匹配（如“example.name”）

然后我相信你想要这样的东西：

```
// On page load
$(document).ready(function(){

    // React to clicks on anchors
    window.onhashchange = hashChanged;

    // React to directly type urls
    hashChanged();

});

// When the URL hash (#something) changes
function hashChanged() {
    // hide all profiles
    $('.profile').hide();
    // get the current hasj minus '#'
    var profileId = window.location.hash.substr(1);
    // show only the appropriate profile
    $('#' + profileId).show();
} 
```

# c# - 如何在 C# 中的 Web 表单中创建事件？

> ID：14988935
> 
> 赞同：-2
> 
> 时间：2013-02-20T20:07:09.443
> 
> 标签：c#, asp.net, webforms

我是一名计算机科学专业的学生，​​我现在在 Web 应用程序中。我知道如何在 WinForm 中创建事件（您只需双击要使用的任何内容），但我只是不知道如何在 Web 表单中进行。我正在使用 Visual Studio 2012。说这是我的控制：

```
<asp:Button ID="playButton" runat="server" Text="Play" /> 
```

如何在 Form1.aspx.cs 类中创建事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T20:08:50.583

您可以自己附加事件处理程序，而不是使用 IDE 为您附加事件，无论您处于哪种类型的环境中：

```
SomeEvent += myEventHandler; 
```

`myEventHandler`具有正确签名的方法在哪里。如果您键入上述代码，Visual Studio 还将提供一个选项，用于自动为您生成适当签名的方法（如果尚不存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:34:01.577

我认为您正在寻找的是：

在您发布的代码片段中，只需添加属性 OnClick，如下所示：

```
<asp:Button ID="playButton" runat="server" Text="Play" OnClick="playButton_Click"/> 
```

在您的 aspx.cs（代码隐藏）类中，您放置以下代码：

```
protected void playButton_Click(object sender, EventArgs e)
{
   //put your code/logic here
} 
```

网上有很多例子供初学者在 asp.net 上使用，只要谷歌一下，你就会发现很多示例代码（甚至在堆栈溢出中）。

最好的祝福。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:08:33.697

这是使用 Visual Studio IDE 创建默认事件的另一种简单方法：

1.  将按钮添加到页面并通过“设计”选项卡查看
2.  突出显示按钮以使其成为焦点（执行步骤 3 和 4，或跳至选项 #2）
3.  查看属性窗口并选择代表控件事件的小闪电按钮。
4.  **在“单击”**右侧的区域中双击以生成默认事件。

选项 #2：只需双击设计器视图中的按钮即可生成事件，就像您在 WinForms 应用程序中习惯的那样。

这将打开代码窗口，您将在您刚刚选择的控件的事件中。

# ruby-on-rails-3 - gmaps4rails 选择范围

> ID：14988941
> 
> 赞同：0
> 
> 时间：2013-02-20T20:07:44.493
> 
> 标签：ruby-on-rails-3, gmaps4rails

我有 gmaps4rails 工作以显示所有位置。但是，我想使用他们的位置显示带有工作订单的地图。工单belongs_to 位置。

在工作订单控制器中，这将显示所有位置：

```
 @json = Location.all.to_gmaps4rails 
```

但是，这不会显示工单位置：

```
 @json = Workorder.location.all.to_gmaps4rails 
```

这是视图代码：

```
 <%= gmaps("markers" => {"data" => @json, "options" => {"list_container" => "markers_list"} }) %>
   <strong><ul id="markers_list">  </ul></strong> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:25:55.310

`belongs_to`指定与另一个类的一对一关联（它只返回一个条目）。

`to_gmaps4rails`是一个来自 Enumerable 的方法（它期望在一个数组上被调用）。

此外，您不能直接从类调用关系（它不是类方法，它是实例方法）：Workorder.location.all.to_gmaps4rails

应该是：a_work_order = WOrkorder.first a_work_order.location

并与它一起使用`to_gmaps4rails`

```
[a_work_order.location].to_a.compact.to_gmaps4rails 
```

它并不漂亮，但它涵盖了何时`location`返回`nil`以及何时返回。

# javascript - HTML/CSS/JavaScript 是否定义了表示系统主题颜色的常量？

> ID：14988943
> 
> 赞同：2
> 
> 时间：2013-02-20T20:07:46.840
> 
> 标签：javascript, html, css, colors

HTML/CSS/JavaScript 是否定义了表示系统主题颜色的常量？我的意思是用户可以在操作系统（或浏览器）控制面板中定义的那些颜色。像标准窗口内容背景和文本颜色等。

这个想法是让网站默认尊重用户偏好，在深色背景上显示浅色文本，以防用户在他的系统中使用这样的主题（同时遵循奥卡姆剃刀原则，避免引入额外配置）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:17:36.660

是的你可以，

打开 firebug 并更改一些 css 声明，如颜色：ActiveBorder 或查看[webdesign.about.com/od/colorcharts/l/blsystemcolors.htm](http://webdesign.about.com/od/colorcharts/l/blsystemcolors.htm)或在网上搜索“css 系统颜色”

*   ActiveBorder ：活动窗口边框。
*   ActiveCaption ：活动窗口标题。
*   AppWorkspace 多文档界面的背景色。
*   背景 桌面背景。
*   ButtonFace 三维显示元素的面颜色。
*   ButtonHighlight 3D 显示元素的暗阴影（用于远离光源的边缘）。
*   ButtonShadow 三维显示元素的阴影颜色。
*   ButtonText 按钮上的文本。
*   CaptionText 标题、大小框和滚动条箭头框中的文本。
*   GrayText 灰色（禁用）文本。如果当前显示驱动程序不支持纯灰色，则此颜色设置为 #000。
*   突出显示控件中选择的项目。
*   HighlightText 在控件中选择的项目的文本。
*   InactiveBorder 非活动窗口边框。
*   InactiveCaption 非活动窗口标题。
*   InactiveCaptionText 非活动标题中文本的颜色。
*   InfoBackground 工具提示控件的背景颜色。
*   InfoText 工具提示控件的文本颜色。
*   菜单 菜单背景。
*   MenuText 菜单中的文本。
*   滚动条 滚动条灰色区域。
*   ThreeDDarkShadow 三维显示元素的暗阴影。
*   ThreeDFace 三维显示元素的面颜色。
*   ThreeDHighlight 高亮显示三维显示元素的颜色。
*   ThreeDLightShadow 三维显示元素的光颜色（面向光源的边缘）。
*   ThreeDShadow 三维显示元素的暗阴影。
*   窗口 窗口背景。
*   WindowFrame 窗口框架。
*   WindowText 窗口中的文本。

为了[更好地参考](http://www.w3.org/TR/CSS21/ui.html#system-colors) **unor**关于系统颜色的建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:24:39.800

**CSS 2.1**指定“[系统颜色](http://www.w3.org/TR/CSS21/ui.html#system-colors)”：

> 除了能够为文本、背景等分配预定义的颜色值外，CSS2 还引入了一组命名颜色值，允许作者以将颜色集成到操作系统的图形环境中的方式指定颜色。

例子：

> 要将段落的前景色和背景色设置为用户窗口的前景色和背景色，请编写以下代码：
> 
> ```
> p { color: WindowText; background-color: Window } 
> ```

在**CSS Color Module Level 3**中，这些系统颜色已被[弃用](http://www.w3.org/TR/css3-color/#css-system)，“支持 CSS3 UI '<code>appearance' 属性”。但似乎这也已被[删除](http://www.w3.org/TR/css3-ui/#changes-list)（您仍然可以在[较旧的草稿](http://www.w3.org/TR/2003/WD-css3-ui-20030703/#appearance)中找到它）。

# python - 简单的烧瓶/gevent 请求没有同时运行

> ID：14988944
> 
> 赞同：4
> 
> 时间：2013-02-20T20:07:50.397
> 
> 标签：python, flask, gevent

我有这个简单的烧瓶/gevent 演示代码。

```
#!/usr/bin/env python
import gevent
from gevent.pywsgi import WSGIServer
from gevent import monkey
monkey.patch_socket()

from flask import Flask, Response

app = Flask(__name__)

@app.route('/')
def stream():
    def gen():
        for i in range(10):
            yield "data: %d\r\n" % i
            gevent.sleep(1)
    return Response(gen())

if __name__ == '__main__':
    http = WSGIServer(('', 5000), app)
    http.serve_forever() 
```

当我运行它并在浏览器中打开多个 url 时，除了一个之外，它们都被阻止。我究竟做错了什么？

我试过用 monkey.patch_all() 运行它，并用它运行它`gunicorn streaming:app -k gevent`- 它仍然在浏览器中阻塞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:21:09.483

浏览器中的多个选项卡将被阻止。这并不意味着 gevent/gunicorn 没有同时运行请求。我尝试了并发 curl 请求和 XmlHttpRequest - 它按预期工作。还要注意 curl 缓冲输出。需要“\r\n”才能使其逐行打印。

旁注：感谢 #pocoo 上的 mitsuhiko 解决它。如果你还没有尝试过烧瓶，你应该。mitushiko 和烧瓶都很棒。

# javascript - 使 jQuery UI 选择菜单“不更改”“更改”事件的值

> ID：14988945
> 
> 赞同：1
> 
> 时间：2013-02-20T20:07:56.073
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-selectmenu

我正在使用您可以在[此处](https://github.com/fnagel/jquery-ui/wiki/Selectmenu)找到的“fnagel jQuery UI Selectmenu Widget” 。当基于某些条件触发**更改**事件时，我想让小部件**不选择**新选项。

 **通常这是由`return false;`change 事件中的 ' ' 完成的。但它不起作用。我在这里创建了一个[小提琴](http://jsfiddle.net/shaunakv1/TFquL/1/)。

有人可以通过不选择更改事件的值来帮助我使小提琴工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T21:54:24.973

您可以手动保存和恢复值，[jsfiddle here](http://jsfiddle.net/ec2Jg/)。

1.  将数据属性添加到您的选择元素：

    ... data-prev-selected="1" ...

2.  将此代码用于更改事件：

    ```
    var someCondition = true; // hardcoded for now

    // Undo new selection
    if ( someCondition ) {
        var prevIdx = $('select#speedA').attr('data-prev-selected');
        $('select#speedA').selectmenu("index", prevIdx);
        return;
    }

    // Save new index
    var idx = $('select#speedA').selectmenu("index");
    $('select#speedA').data('data-prev-selected', idx); 
    ```**

# jquery - 将字符串数组传递给 Parse.com REST API 查询

> ID：14988946
> 
> 赞同：0
> 
> 时间：2013-02-20T20:07:56.983
> 
> 标签：jquery

"$in" 方法需要一个数组，而有问题的列是一个字符串，所以我需要使用 jQuery 从这里开始：

```
[123,456,789] 
```

对此：

```
["123,"456","789"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:57:43.550

干得好。我认为不需要太多解释：

```
arr = $.map(arr, function(val) { return val.toString(); }); 
```

如果你有浮点值而不是整数，你可能想要使用[`.toFixed` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)方法而不是调用`.toString()`.

# javascript - 在哪里可以找到 V8 DOM 方法实现 (document.createElement()) 的“javascript”源代码？

> ID：14988947
> 
> 赞同：1
> 
> 时间：2013-02-20T20:07:56.633
> 
> 标签：javascript, html, dom, v8

我需要重写 document.createElement() 方法，我正在网上寻找 javascript 源代码以获得一些想法。我搜索了[http://code.google.com/p/v8/source/browse](http://code.google.com/p/v8/source/browse)但似乎搜索返回了来自所有 svn 源（甚至是不相关的库）的结果，这使得它变得混乱。我浏览了svn中的代码，当然有C++源代码，但显然没有javascript实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:23:03.233

你不应该，通常也不能，重写原生 DOM 方法。诸如`createElement`客户端 EMACscript 实现的“接近表面”的方法，具有受保护的范围，并且根本无法被“用户空间”脚本复制。

在 的情况下`createElement`，您可能能够在某些浏览器中覆盖对象的`createElement`功能`document`（见下文），但您也会很快发现它在某些现有客户端/版本上崩溃和烧毁。此外，您无法更改的原型，`document`因为它没有。

但是，您可以**轻松**无风险地创建一个小型包装函数：

```
var createElement = function (ele_type, attrs) {
    var ele = document.createElement(ele_type);
    if (!ele)
        return false;

    for (var idx in attrs) {
        if ((idx == 'styles' || idx == 'style') && typeof attrs[idx] == 'object') {
            for (var prop in attrs[idx]){ele.style[prop] = attrs[idx][prop]}
        } else if (idx == 'html') {
            ele.innerHTML = attrs[idx]
        } else {
            ele.setAttribute(idx, attrs[idx]);
        }
    }

    // now fire any custom events or do whatever you needed to do

};

var myNewDiv = createElement ('div', {'id':'myNewDiv', 'styles':{'color':'red'}}); 
```

这使您有机会在创建新元素时实现自定义代码。无论实现差异如何，它都适用于所有浏览器，并且与您今天编写的任何其他代码一样面向未来。

上面提到的另一条路线，它不是跨浏览器或保证明天也能工作，是覆盖`createElement`活动`document`实例的功能。这种方法的问题在于文档对象不是由规范定义的——它是特定于实现的。*今天*，Firefox（例如）将允许您覆盖此功能，但这可能会更改，恕不另行通知。

```
document.createElement = function(originalDocumentCreate) {
    return function() {
        var ele = originalDocumentCreate.apply(this, arguments);

        // now fire any custom events or do whatever you needed to do

        return ele;
    };
}(document.createElement); 
```

另请参阅：[https :](https://stackoverflow.com/a/11727842/610573) *//stackoverflow.com/a/11727842/610573（代码概念归功于 Esailija）*

# c# - 使用 JavaScriptSerializer ASP.NET 反序列化 JSON 片段

> ID：14988949
> 
> 赞同：1
> 
> 时间：2013-02-20T20:08:02.177
> 
> 标签：c#, asp.net, json

是否可以`Deserialize`只使用 JSON 的一个片段[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)？我不需要来自 JSON 的所有数据，只需要一个部分。

JSON 数据如下所示：

```
// **** snip ****
{
    "response":  {
        some data
    }
},
"forecast":  {
    "txt_forecast":  {
    "date": "7:00 AM PST",
    "forecastday":  [ // <-- section needed
        {
            some data....
        },
        .........
        {
            some data....
        }
    ]
},
"simpleforecast":  {
    "forecastday":  [
        more data
    ]
}
// **** snip **** 
```

这是我需要解析的部分：

```
"forecastday":  [ // <-- section needed
    {
        some data....
    },
    .........
    {
        some data....
    }
] 
```

我尝试使用`forecast`对象（整个数据的片段），但它返回 null。

```
var jsonData = new WebClient().DownloadString(url);
JavaScriptSerializer ser = new JavaScriptSerializer();
forecast_class forecast = ser.Deserialize<forecast_class>(jsonData); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:28:06.763

像这样的东西对你有用吗

```
var dictObj = new JavaScriptSerializer().Deserialize<Dictionary<string, object>>(jsonData);
var jsonNew = new JavaScriptSerializer().Serialize(dictObj["forcast"]); 
```

# c++ - Opengl纹理2D瓦片地图

> ID：14988950
> 
> 赞同：0
> 
> 时间：2013-02-20T20:08:05.187
> 
> 标签：c++, 2d, textures, tile

我在 2D 平铺地图上加载和应用纹理时遇到了一点问题。我正在像这样绘制我的地图 -

```
for (int x = 0; x < m_SceneManager->getWorld()->TILEX; x++)
{
    //loop through the height of the map
    for (int y = m_SceneManager->getWorld()->TILEY; y > -1; --y)
    {
        switch(m_SceneManager->getMap()->cMap[x][y])
        {
            case 0:
                m_SceneManager->createTurf("Grass01.png", y*tileY, x*tileX);
            break;
            case 1:
                m_SceneManager->createTurf("Rock01.png", y*tileY, x*tileX, 1);
            break;
            case 2:
                m_SceneManager->createTurf("Grass01.png", y*tileY, x*tileX, 1);
                m_SceneManager->createTurf("Tree01.png", y*tileY, x*tileX, 0, 64, 64);
            break;
        }
    }
} 
```

这就是我阅读纹理文本文件的方式 -

```
std::ifstream maptex;

maptex.open(texfile);

if(maptex.is_open())
{
    while(map.good())
    {
        maptex >> m_Tile;
        maptex >> m_Eq;
        maptex >> m_Type;
        maptex >> m_Filename;
    }
}

maptex.close(); 
```

两者都是两个独立的功能。M_Tile 是 cMap[][] 编号，m_Filename 是纹理文件名。我必须删除该开关并从此文本文件中加载。

# sql - 不同的case语句Mssql

> ID：14988951
> 
> 赞同：0
> 
> 时间：2013-02-20T20:08:07.483
> 
> 标签：sql, sql-server, tsql, distinct

是否可以在 mssql. 像这样的东西。

```
 select 
  sum(case when distinct(Ocid) and Code = 200 then 1 
  else 0 end) as something
  from mytable 
```

如果我不想修改 from 子句，是否可以通过其他方式进行修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:16:28.190

我很确定你想做什么是行不通的。

`Ocid`这将检查整个表中是否只有一个。

```
select 
  sum(case when Code = 200 then 1 
      else 0 end) as something
from mytable
having count(distinct Ocid) = 1 
```

`Ocid`这将计算具有`Code`200的distinct ：

```
select sum(something)
from
(
  select 
    count(*) as count,
    (case when max(Code) = 200 then 1 
     else 0 end) as something
  from mytable
  group by ocid
) a
where count = 1 
```

[SQLFiddle](http://www.sqlfiddle.com/#!6/10809/1)。

**编辑：**我不太确定你想做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:47:43.093

这是我迄今为止最好的，但这不是你想要的。您可以使用 CTE 或子查询或其他任何方式轻松完成，但我不确定您是否可以按照您的要求进行操作。

```
Select  Sum(bah)
From   (Select  1 As bah
        From    mytable mt2
        Where   mt2.Code = 200
        Group   By mt2.Ocid
        Having  Count(mt2.Ocid) = 1) n 
```

我对你的回答是，“不”，如果不做额外的修改，就不可能做你想做的事情。您将永远陷入此错误的死胡同：

```
Msg 130, Level 15, State 1, Line 5
Cannot perform an aggregate function on an expression containing an aggregate or a subquery. 
```

# installation - NSIS ZipDLL 插件不工作

> ID：14988952
> 
> 赞同：1
> 
> 时间：2013-02-20T20:08:09.553
> 
> 标签：installation, zip, nsis

我正在尝试做一个简单的安装程序，我想将一个 zip 文件复制到我的安装目录，并在那里解压缩它的内容，但现在它只复制我的 zip，而不是解压缩它。

这是我的代码

```
;--------------------------------
;Include Modern UI
        !include "MUI2.nsh"
;--------------------------------
;General
    Name "App"  ; Name of the app to install
    OutFile "setup.exe" ; Name of the app installer
    InstallDir "c:\app\"    ; App install directory (default C:)
    InstallDirRegKey HKCU "Software\App" "" ; Get installation folder from registry if available
    RequestExecutionLevel user ;Request application privileges for Windows Vista
    Caption "App"
;--------------------------------
;Interface Settings
  !define MUI_ABORTWARNING
;--------------------------------
;Language Selection Dialog Settings
    ;Remember the installer language
    !define MUI_LANGDLL_REGISTRY_ROOT "HKCU" 
    !define MUI_LANGDLL_REGISTRY_KEY "Software\App" 
    !define MUI_LANGDLL_REGISTRY_VALUENAME "Language"
;--------------------------------
;Pages
  !insertmacro MUI_PAGE_WELCOME
  !insertmacro MUI_PAGE_LICENSE "License.txt"
  !insertmacro MUI_PAGE_COMPONENTS
  !insertmacro MUI_PAGE_DIRECTORY
  !insertmacro MUI_PAGE_INSTFILES
  !insertmacro MUI_PAGE_FINISH
  ;!insertmacro MUI_UNPAGE_WELCOME
  ;!insertmacro MUI_UNPAGE_CONFIRM
  ;!insertmacro MUI_UNPAGE_INSTFILES
  ;!insertmacro MUI_UNPAGE_FINISH
;--------------------------------
;Languages
  !insertmacro MUI_LANGUAGE "English"   ; Default English
    !insertmacro MUI_LANGUAGE "Spanish" ; Spanish
;--------------------------------
; ZIP Handling
    !include "ZipDLL.nsh"
;--------------------------------
;Installer Sections
Section "XAMPP" App
  SetOutPath "$INSTDIR"
    File App.zip
  WriteRegStr HKCU "Software\App" "" $INSTDIR   ; Store installation folder
  ; WriteUninstaller "$INSTDIR\Uninstall.exe"               ; Create uninstaller
    ; !insertmacro ZIPDLL_EXTRACT "$INSTDIR\App.zip" "$INSTDIR" "<ALL>"
    !insertmacro ZIPDLL_EXTRACT "C:\App\App.zip" "c:\App\" "<ALL>"
SectionEnd
;--------------------------------
;Descriptions
  ;Language strings
  LangString DESC_App ${LANG_ENGLISH} "The server modules necesary to install app."
    LangString DESC_App ${LANG_SPANISH} "Los modulos del servidor necesarios para instalar app"

  ;Assign language strings to sections
  !insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN
    !insertmacro MUI_DESCRIPTION_TEXT ${App} $(DESC_App)
  !insertmacro MUI_FUNCTION_DESCRIPTION_END
;--------------------------------
;Uninstaller Sections
;Section "Uninstall"
;  ;ADD YOUR OWN FILES HERE...
;  Delete "$INSTDIR\Uninstall.exe"
;  RMDir "$INSTDIR"
;  DeleteRegKey /ifempty HKCU "Software\App"
;SectionEnd
;--------------------------------
;Installer Functions
    Function .onInit
        !insertmacro MUI_LANGDLL_DISPLAY
    FunctionEnd
;--------------------------------
;Uninstaller Functions
;   Function un.onInit
;       !insertmacro MUI_UNGETLANGUAGE
;   FunctionEnd
;-------------------------------- 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:44:02.463

将 RequestExecutionLevel 设置为 admin 时它也不起作用？假设您要安装到程序文件，则必须这样做（尽管它也不会将 zip 解压缩到该文件夹​​）。你确定文件到位了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:02:42.420

我正在使用 NSIS 的便携版本来编译我的安装程序。然后我在我的电脑上安装了完整版，同样的脚本现在可以完美运行。

# javascript - Wordpress 表单上的 jQuery

> ID：14988954
> 
> 赞同：0
> 
> 时间：2013-02-20T20:08:12.203
> 
> 标签：javascript, jquery, html, ajax, wordpress

我正在 WordPress 上处理此代码。不知道如何绕过它。

所以，我有一个 Wordpress 主题的四个文件输入。此表单用于编辑广告，并填写从数据库中检索到的信息。如果有图片，则隐藏输入并显示一个文本字段和一个按钮。

我想要做的是，单击按钮并隐藏/删除文本字段和按钮。并且，在它使文件输入出现之后。

这就是我尝试实现它的方式：

```
 <script language="text/javascript">
                        $(function(){
                            $('#btn1').click(function(){
                                        $.ajax({
                                            url:"/wp-admin/admin-ajax.php",
                                            type:'POST',
                                            data:'action=my_special_action',
                                            success:function(results)
                                            {
                                                //  alert(results);
                                                $("#pic1").attr('type','file');
                                            }
                                        });
                                    }
                            );
                        });

                  </script>
              <?php for ($i=1;$i<=get_option('wpClassifieds_max_img_num','4');$i++):
                        if($i <= $num_rows) {
                            $ad_photos = mysql_fetch_array($res);
                            $upload_array = wp_upload_dir();
                            $upload_array['subdir'] = "awpcp"; ?>
                              <div class="pictures">
                                <label><?php _e('Picture', "wpct");?> <?php echo $i?></label>
                                <textarea id="text<?php echo $i; ?>" name="text<?php echo $i; ?>" readonly><?php echo $ad_photos["image_name"];?></textarea>
                                <button id="btn<?php echo $i?>" name="btn<?php echo $i?>" />remove
                                <input type="hidden" name="pic<?php echo $i?>" id="pic<?php echo $i?>" value="<?php echo $_POST["pic".$i];?>" />
                              </div>
                                <?php }else{ ?>
                                    <div class="pictures">
                                        <label><?php _e('Picture', "wpct");?> <?php echo $i?></label>
                                        <input type="file" name="pic<?php echo $i?>" id="pic<?php echo $i?>" value="<?php echo $_POST["pic".$i];?>" />
                                    </div>
                              <?php } endfor; ?> 
```

你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:34:07.030

将所有 jQuery 代码包装在 Wordpress 中，如下所示：

替换`$(function(){`为`jQuery(function ($) {`

基本上，Wordpress 以一种不会与其他想要访问“$”字符的库冲突的方式设置 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:57:41.903

您不想使用`$('#btn1')`，因为该脚本仅适用于带有 ID 的按钮`#btn1`。

做这样的事情：

```
jQuery('.pictures button').on('click', function() {
  // If you need button ID
  var button_id = jQuery(this).attr('id');

  // Hide the text area
  jQuery(this).prev('textarea').hide(); 
  // And button
  jQuery(this).hide();
  // Show Input field
  jQuery(this).next('input').show(); 

}); 
```

我没有添加`ajax`，因为我不知道这样做的目的。

# xml - 继承的复杂类型中的元素顺序

> ID：14988971
> 
> 赞同：0
> 
> 时间：2013-02-20T20:08:56.667
> 
> 标签：xml, xsd, complextype

我有一个用于验证 XML 文件的 XSD 架构。

在 XSD 模式中，我创建了一个复杂类型，其中包含一个属性组和一个选项，它本身包含一个重复元素“_output”。

我的复杂类型：

```
<xs:complexType name="base_action">
    <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="_output" minOccurs="0" maxOccurs="unbounded"/>
    </xs:choice>
    <xs:attributeGroup ref="action"/>
</xs:complexType> 
```

我还有其他元素（带有自己的子元素）继承自该复杂类型。

这种继承元素的一个例子：

```
<xs:element name="ex_elem" minOccurs="0">
    <xs:complexType>
        <xs:complexContent>
            <xs:extension base="cockpit_base_action">
                <xs:choice minOccurs="0" maxOccurs="unbounded">
                    <xs:element name="to" minOccurs="0"/>
                    <xs:element name="from" minOccurs="0"/>
                </xs:choice>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:element> 
```

现在，在 XML 中，这将起作用：

```
<ex_elem>
    <_output/>
    <from>0</from>
    <to>1</to>
</ex_elem> 
```

但不是这个：

```
<ex_elem>
    <from>0</from>
    <_output/>
    <to>1</to>
</ex_elem> 
```

或这个 ：

```
<ex_elem>
    <from>0</from>
    <to>1</to>
    <_output/>
</ex_elem> 
```

据我了解，复杂类型的选择不能与继承元素的选择混为一谈。这对我来说是个问题，因为有些地方我想把 _output 放在顶部以外的地方。

我希望能够使用该元素而不必担心序列。有没有办法这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:50:34.123

在 XSD 1.0 中，基本类型的任何扩展都会创建一个序列，其第一个成员是旧的内容模型，第二个成员是扩展添加到内容模型的顶部。所以你的 cockpit_base_action 扩展的有效内容模型是

```
<xs:sequence>
  <xs:choice minOccurs="0" maxOccurs="unbounded">
    <xs:element name="_output" 
                minOccurs="0" 
                maxOccurs="unbounded"/>
  </xs:choice> 
  <xs:choice minOccurs="0" maxOccurs="unbounded">
    <xs:element name="to" minOccurs="0"/>
    <xs:element name="from" minOccurs="0"/>
  </xs:choice>
</xs:sequence> 
```

在 XSD 1.1 中，您可以将基本类型更改为使用 xs:all，并在扩展中使用 xs:all，以获得您想要的效果。

或者（在 1.0 或 1.1 中），您可以更改扩展名以接受您想要的语言。像这样的东西应该有你想要的效果：

```
<xs:extension base="cockpit_base_action">
  <xs:sequence minOccurs="0">
    <xs:choice>
      <xs:element name="to">
      <xs:element name="from"/>
    </xs:choice>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="_output"/>
      <xs:element name="to">
      <xs:element name="from"/>
    </xs:choice>
  </xs:sequence>
</xs:extension> 
```

我省略了选项元素的子元素的出现指示符，因为它们对接受的语言没有影响：当包含选项（或包含它的序列）是可选的时，它们必然是可选的；当包含的选择可以这样做时，它们必然可以无限制地重复。

# javascript - 在 Meteor 中为把手模板返回多个值

> ID：14988977
> 
> 赞同：1
> 
> 时间：2013-02-20T20:09:34.157
> 
> 标签：javascript, meteor

我如何在 Meteor 中做到这一点？

```
Template.foo.bar = function() {

someVar = return value of some other function
return SomeCollection and someVar;

} 
```

- - - -模板 - -

```
{{#each someCollection}}
{{someVar}} {{someCollectionField}}
{{/each}} 
```

在普通的 javascript 中，我可以只使用一个数组来返回多个值它在 Meteor 中是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:14:17.020

您可以返回一个 js 对象并使用把手来通过它

客户端js

```
Template.foo.bar = function() {
    someVar = getmyotherfunction();
    return {
            SomeCollection: SomeCollection.find({...}),
            someVar: someVar
           };

} 
```

客户端html

```
<template name="foo">
    {{#each bar.SomeCollection}}
        {{bar.someVar}} 
        {{someCollectionField}}
    {{/each}}
</template> 
```

您可以在每个循环中访问车把内的 bar 值，并仅用于`.`获取内部对象。数组也可以，用于`.0`获取数组中的第一项，0 是索引。

# javafx-2 - 动态 AnchorPane 对齐

> ID：14988980
> 
> 赞同：0
> 
> 时间：2013-02-20T20:09:39.040
> 
> 标签：javafx-2, javafx, scenebuilder

我正在尝试以编程方式将单个图像插入到我的应用程序中。图像确实显示在其 AnchorPane 中，但问题是 AnchorPane（以及 ImageView）似乎卡在窗口的左上角。

此 AnchorPane 是 ScrollPane 的子项。我希望我的图像/AnchorPane 与 ScrollPane 的顶部中心对齐，而不是左上角。AnchorPane 的动态居中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:36:55.997

要动态居中[AnchorPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/AnchorPane.html)，请将其放在[StackPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html)中。

* * *

要将 放在`AnchorPane`的顶部中心`StackPane`，请调用

[StackPane.setAlignment（节点，Pos.TOP_CENTER）](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/StackPane.html#setAlignment%28javafx.geometry.Pos%29)

```
AnchorPane anchorPane = new AnchorPane();
...
StackPane stackPane = new StackPane();
stack.getChildren().add(anchorPane);
StackPane.setAlignment(anchorPane, Pos.TOP_CENTER); 
```

# ruby-on-rails-3 - 仅在 rails 3 中使用特定方法访问列

> ID：14988981
> 
> 赞同：1
> 
> 时间：2013-02-20T20:09:41.533
> 
> 标签：ruby-on-rails-3, attr-accessor, attr-accessible

假设我有一个`User`具有两个属性的模型：`:name`和`:age`。我希望该`:age`列只能由“def 操作年龄（）”（某种方法）访问。这也包括，`user.update_attributes!(:age => 10)`预计会抛出异常。是否可以在 Rails 3 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T16:16:43.723

如果您没有在 attr_accessor 中列出姓名和年龄，则无法直接读取和写入这些字段。

# php - Postgres 查询需要能够在 $to 中用于电子邮件

> ID：14988988
> 
> 赞同：0
> 
> 时间：2013-02-20T20:09:58.850
> 
> 标签：php, html, postgresql, email, syntax-error

我有一份报告需要每天发给商店经理。除了需要给商店经理发电子邮件的 $to 部分外，一切正常。我知道这与通常围绕电子邮件的单引号有关，但我无法让它与我尝试过的所有东西一起正常工作。有人可以让我知道我错过了什么吗？

```
$store_managers = $db->getOne("SELECT users.email, store_managers.store FROM users, store_managers
            WHERE users.user_id = store_managers.user_id
            AND store_managers.store = $sNum[$row]");
   if(DB::isError($store_managers)) { echo '<div class="error">Error: - '.$store_managers->getDebugInfo().'</div>';}

$to = '$store_managers';

$headers  = "From: $from\r\n";
$headers .= "CC: $ccList1\r\n";
$headers .= "Content-type: text/html\r\n";

$subject = 'This is a TEST.';

$message = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'
<html><head></head><body>';
$message .= '<h3>THIS IS A TEST.</h3>';
$message .= '<br /><h5>'.$store_managers.'</h5>'; 
```

注意：最后使用的消息语法不适用于该`$to`字段。我不断收到一封死信...保存在等中的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:23:05.850

这段代码中与此相关的明显错误`$to`是这一行：

```
$to = '$store_managers'; 
```

因为当被单引号括起来时，`$store_managers`变量不会被插值。你不想要这些单引号，而是这样做：

```
$to = $store_managers; 
```

# android - Android：快速位图模糊？

> ID：14988990
> 
> 赞同：33
> 
> 时间：2013-02-20T20:10:04.577
> 
> 标签：android, image-processing, blur, convolution

在过去的三天里，我一直在寻找一种内置的、硬件加速的使用 android 模糊位图的方法。我偶然发现了某些变通方法，例如缩小位图并再次放大它，但这种方法产生的结果质量很低，不适合我的图像识别要求。我还读到使用着色器或 JNI 实现卷积是一个不错的方法，但我不敢相信 Android 框架中没有针对这个非常常见的目的的内置解决方案。目前我已经用 Java 编写了一个自写的卷积实现，但速度慢得令人尴尬。我的问题是：

*   Android框架中真的*没有内置解决方案吗？*
*   如果没有：在实现和维护的仍然合理复杂性的情况下加速卷积的最有效方法是什么？我们应该使用 JNI、着色器还是完全不同的东西？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-02-20T20:10:04.577

我终于找到了一个合适的解决方案：

*   [RenderScript](http://developer.android.com/guide/topics/renderscript/compute.html)允许实现大量计算，这些计算透明地扩展到执行设备上可用的所有内核。我得出的结论是，就性能和实现复杂性的合理平衡而言，这是比 JNI 或着色器更好的方法。
*   从 API 级别 17 开始，API 提供了[ScriptIntrinsicBlur](http://developer.android.com/reference/android/renderscript/ScriptIntrinsicBlur.html)类。这正是我一直在寻找的，即高级的、硬件加速的高斯模糊实现。
*   [ScriptIntrinsicBlur](http://developer.android.com/reference/android/support/v8/renderscript/ScriptIntrinsicBlur.html)现在是支持 Froyo 及更高版本 (API>8) 的 android 支持库 (v8) 的一部分。[支持 RenderScript 库](http://android-developers.blogspot.in/2013/09/renderscript-in-android-support-library.html)的 android 开发者博客文章有一些关于如何使用它的基本技巧。

但是，关于`ScriptIntrinsicBlur`该类的文档非常少见，我花了更多时间来找出正确的调用参数。为了模糊一个名为 的普通`ARGB_8888`类型位图`photo`，这里它们是：

```
final RenderScript rs = RenderScript.create( myAndroidContext );
final Allocation input = Allocation.createFromBitmap( rs, photo, Allocation.MipmapControl.MIPMAP_NONE, Allocation.USAGE_SCRIPT );
final Allocation output = Allocation.createTyped( rs, input.getType() );
final ScriptIntrinsicBlur script = ScriptIntrinsicBlur.create( rs, Element.U8_4( rs ) );
script.setRadius( myBlurRadius /* e.g. 3.f */ );
script.setInput( input );
script.forEach( output );
output.copyTo( photo ); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-27T22:42:42.393

可能最苛刻的要求是实时模糊，这意味着您可以随着视图的变化进行实时模糊。在这种情况下，模糊不应超过 10 毫秒左右（在 16 毫秒/60 fps 上留出一些游戏空间）才能看起来平滑。即使在不那么高端的设备（galaxy s3 甚至更慢）上，也可以通过正确的设置实现这种效果。

以下是如何提高重要性递减的性能：

1.  使用缩小的图像：这会极大地减少像素模糊。当您想要真正的模糊图像时，它也适用于您。图像加载和内存消耗也大大降低。

2.  使用 Renderscript ScriptIntrinsicBlur - 截至 2014 年，Android 中可能没有更好/更快的解决方案。我经常看到的一个错误是 Renderscript 上下文没有被重用，而是在每次使用模糊算法时创建。请注意，`RenderScript.create(this);`在 Nexus 5 上大约需要 20 毫秒，因此您要避免这种情况。

3.  重用位图：不要创建不必要的实例并始终使用相同的实例。当您需要非常快速的模糊时，垃圾收集起着主要作用（需要 10-20 毫秒来收集一些位图）。也只裁剪和模糊你需要的东西。

4.  对于实时模糊，可能是由于上下文切换，不可能在另一个线程中进行模糊（即使使用线程池），只有主线程足够快以保持视图及时更新，我看到线程滞后 100-300 毫秒

有关更多提示，请参阅我的其他帖子[https://stackoverflow.com/a/23119957/774398](https://stackoverflow.com/a/23119957/774398)

顺便提一句。我在这个应用程序中做了一个简单的实时模糊：[github](https://github.com/patrickfav/BlurTestAndroid)，[Playstore](https://play.google.com/store/apps/details?id=at.favre.app.blurbenchmark)

# git - 排除特定类型的文件提交到 github

> ID：14988994
> 
> 赞同：0
> 
> 时间：2013-02-20T20:10:18.290
> 
> 标签：git, github

我是 git 新手，到目前为止我还没有找到一个简单的方法来做到这一点。

我正在尝试将文件夹上传到我的远程存储库，但我不希望上传某些类型的文件。我需要一些语法方面的指导，以防止上传这些类型的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T20:14:13.623

您可以在文件中指定您的文件名`.gitignore`。

在以下链接中阅读它：

[http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Ignoring-Files](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Ignoring-Files)

# java - 将鼠标悬停在 JButtons 上并显示一条消息

> ID：14988996
> 
> 赞同：4
> 
> 时间：2013-02-20T20:10:25.107
> 
> 标签：java, swing, tooltip, jbutton, mousemotionevent

我想将鼠标悬停在我的 GUI（地图）上的多个 JButton 上并显示该位置的名称，例如曼彻斯特和伦敦。我的代码适用于一个按钮，但它不适用于一个以上的按钮，并`out`为所有按钮位置打印最后一条消息（因为我有 10 个按钮）。

如果`button1`为真，则通过我的`paintComponent()`方法在指定区域的 GUI 上绘制文本。

我该如何解决这个问题？

```
button1.addMouseMotionListener(this);
button2.addMouseMotionListener(this); 
```

```
public void mouseMoved(MouseEvent arg0)
{
    if(button1.contains(arg0.getPoint()))
    {
        button1  = true;
        out = "test 1";
        repaint();
    }

    if(!button1.contains(arg0.getPoint()))
    {
        b1 = false;
        out = " ";
        repaint();
    }//same for all 10 buttons but change variables
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T20:23:28.590

为什么不使用已经存在的工具提示 API？

```
button.setTooltip("Manchester"); 
```

您甚至可以使用 HTML 文本来生成格式化的结果。

```
button.setTooltip("<html>Manchester<br>53.4800° N, 2.2400° W</html>"); 
```

如果图像被嵌入，您甚至可以提供图像......

```
button.setTooltip("<html><img src=" + getClass().getResource("/someimage") + "/>Manchester<br>53.4800° N, 2.2400° W</html>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:15:44.217

*   请勿使用`MouseListener`或`MosueMotionListener`from `JButton`，此方法在 中正确实现`JButtons API`，

*   没有理由，我找不到`repaint()`用于这份工作的理由

*   另一种方法是添加`ChangeListener`到`JButton`派生的相关事件并从中获取相关事件`ButtonModel`

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译，只需`JFrame`一个`JButton`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-10T18:07:44.457

那么这个答案对于 JDK 8 用户来说是很酷的，所以试试看：

对于常规文本

```
buttonyoumade.setToolTipText("Text you choose"); 
```

对于 html 使用

```
anotherbuttonyoumade.setToolTipText("<html> any valid html code </html>"); 
```

# c++ - 为什么 GNU 的文档没有将 pubseekoff 列为 basic_streambuf 的成员？

> ID：14988997
> 
> 赞同：1
> 
> 时间：2013-02-20T20:10:27.163
> 
> 标签：c++, gcc

这个问题可能很愚蠢，但这是我第一次进入 gcc 文档。

我知道它是`basic_streambuf::pubseekoff()`模板类的公共成员函数，`basic_streambuf`但它没有在[GNU 的 libstdc++ 文档](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00258.html)中列出。为什么是这样 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:16:10.807

简而言之，文档解析器弄错了，并将其列为*友*元函数。如果您点击页面底部的源文件链接并查看源代码，您会发现`pubseekoff`它应该是一个成员函数。

见第 241 行：http: [//gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a01071_source.html](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a01071_source.html)

# math - 根据外部div的尺寸确定内部div尺寸的公式？

> ID：14988999
> 
> 赞同：0
> 
> 时间：2013-02-20T20:10:36.543
> 
> 标签：math, html, pixels

假设我有一个 765px 宽 x 530px 高的容器 div。

我想用 30 个较小的 div 动态填充尽可能多的 div。由于容器 div 是一个矩形，因此填充 div 也应该是一个矩形。基本上，我不想要正方形，我想要填充空间。

公式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:45:08.083

使用 30，您可以制作 5 x 6 的网格，因此将高度除以 6，宽度除以 5，或者高度除以 5，宽度除以 6。如果 div 必须具有整数大小，您将无法填充宽度或高度但是有 6，因为两者都不能被 6 整除...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:01:49.797

让我看看我是否可以为您扩展一下您的问题。

您有一个具有 width`w`和 height的容器`h`，并且您想用`n`相同大小的矩形填充它。您想找到`x`, `y`, 这样`x * y = n`, 但您希望大约`w/x`等于赏心悦目。`h/y``1xn`

首先，如果`n`是一个素数，您要么需要稍微放松一下假设，要么最终得到一堆薄片。否则，我将遍历 的所有因子`n`，并为每个因子`x`计算`y=n/x`，然后计算`w/x`和`h/y`。然后选择`|w/x - h/y|`最小的那对，您将拥有最多的“方形” div，您可以将它们放入该容器的网格中。

在你的情况下。`w`=765 和`h`=530。30 的因数是 1、2、3、5、6、10、15、30。我们考虑以下对，这将导致以下 div 大小（向下舍入）：

*   (1, 30) - (765, 17)
*   (2, 15) - (382, 35)
*   (3, 10) - (255, 53)
*   (5, 6) - (153, 88)
*   (6, 5) - (127, 106)
*   (10, 3) - (76, 176)
*   (15, 2) - (51, 265)
*   (30, 1) - (25, 530)

在这种情况下，这对的最小差异与`(127, 106)`您使用公式得出的相同，但您可以想象，如果您有一个又长又薄的容器，或者由于某种原因您更喜欢使用子 div不同的纵横比不是方形的。在这种情况下，您会选择最合适的部门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:57:25.273

因此，要找到每件的宽度和高度，其中 N 是您拥有的件数（在这种情况下为 30），H 是要填充的盒子的高度（在这种情况下是 530），W 是要填充的盒子的宽度填充（在这种情况下为 765）...

```
eachPieceWidth = floor(W/ceil(sqrt(N)))
eachPieceHeight = floor(H/(N/ceil(sqrt(N))) 
```

导致...

```
eachPieceWidth = floor(765/ceil(sqrt(30)))
eachPieceHeight = floor(530/(30/ceil(sqrt(30))) 
```

导致...

```
eachPieceWidth = 127
eachPieceHeight = 106 
```