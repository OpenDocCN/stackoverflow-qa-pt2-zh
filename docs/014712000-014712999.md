# StackOverflow 问答 14712000-14712999

# android - Android StatelistDrawable 导致按钮缩小

> ID：14712002
> 
> 赞同：1
> 
> 时间：2013-02-05T16:19:45.310
> 
> 标签：android, button, gradient, statelistdrawable

我有一个 StatelistDrawable 作为按钮背景的问题。首先 - 我必须在运行时创建按钮背景，因为我通过 web 服务接收颜色值（渐变、边框......）。一旦我为“禁用”按钮添加状态（我希望禁用的按钮显示为灰色......），按钮就会缩小！

我创建了一个派生自 StateListDrawable 的自定义类（[我的自定义 StatelistDrawable 的源代码](http://pastebin.com/embed_js.php?i=yQUDSvyV)）。

这是结果... [http://i50.tinypic.com/2m4ai2s.jpg](http://i50.tinypic.com/2m4ai2s.jpg)

我不知道如何实现这一点，但我确实需要一个在运行时生成并支持渐变和圆角矩形的 StatelistDrawable。有谁能够帮我？

问候马丁

- - - - - - -编辑 - - - - - - - -

我忘了提到这个问题并不影响所有设备/安卓版本。例如，LG Optimus 2x（带有官方 ICS）一切都很好。在带有 CM10.1 的 HTC Sensation 上，设置背景 StatelistDrawable 后按钮会缩小。

现在，我有一个愚蠢的解决方法（在应用背景可绘制后设置填充）......

# python - 使用 Python 生成 SQL 语句以一次将多行插入 MySQL 数据库

> ID：14712004
> 
> 赞同：5
> 
> 时间：2013-02-05T16:19:47.257
> 
> 标签：python, mysql, sql, database, insert

我正在尝试生成一个变量，该变量可用于将多行插入 MySQL 数据库或保存到文件中。

由于我是 python 新手，我的脑海里现在嗡嗡作响着我必须学习的所有新概念，我正在寻找一点保证，我的方法是一个好的方法。

将多个项目插入表的 SQL 语法如下：

```
INSERT INTO 'tablename' ('column1', 'column2') VALUES
  ('data1', 'data2'),
  ('data3', 'data4'),
  ('data5', 'data6'),
  ('data7', 'data8'); 
```

这是我的代码：

```
import shelve

shelf = shelve.open('test.db', flag='r')

sql = "INSERT INTO 'myTableName' ( "
sql += ", ".join(shelf.itervalues().next())
sql = " ) VALUES "
for s in shelf: 

  sql += "( "
  sql += ', '.join(['\'%s\'' % ( value ) for (key, value) in shelf[s].items()])
  sql += " ),"

shelf.close()

print sql 
```

它几乎可以工作（它有一个尾随，而不是 ; 在最后的 sql 添加上），但我确信必须有一个更简洁的方法。你能告诉我它是什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T16:24:05.030

不要从字符串连接生成 SQL。请改用 SQL 参数：

```
cursor = connection.cursor()

cursor.executemany('INSERT INTO 'tablename' ('column1', 'column2') VALUES (%s, %s)',
        [sub.values() for sub in shelf.values()]) 
```

然后数据库可以*重用*该`INSERT`语句（它为它准备一个查询计划），数据库客户端层将为您处理引用，并且您可以防止 SQL 注入攻击启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-12T05:43:29.647

由于该问题专门询问如何生成 SQL 插入语句，而不是如何插入 SQL 数据库，因此我提供以下代码：

```
def sterilize(s):
    if type(s) is str:
        return s.replace("'", "`").replace("\n", " ")
    else:
        return s

class insert_writer:
    def __init__(self, table_name, file_name, batch_size=42069):
        self.table_name = table_name
        self.file_name = file_name
        self.count = 0
        self.rows = 0
        self.batch_size = batch_size
        self.schema = []

    def __enter__(self):
        self.out_stream = open(self.file_name, "w")
        return self

    def __exit__(self, *args):
        self.out_stream.write(";\n")
        self.out_stream.close()

    def add_row(self, row_data):
        items = list(row_data.items())
        items.sort()
        keys = [x[0] for x in items]
        values = ["'%s'" % sterilize(x[1]) for x in items]
        output = ""
        if self.rows is 0:
            self.schema = keys

        if keys != self.schema:
            print(f"row {self.rows}: {keys} mismatches {self.schema}\n")

        if self.count is 0:
            output += ";\nINSERT INTO "
            output += self.table_name
            output += "(" + ", ".join(keys) + ") VALUES "
            output += "\n(" + ", ".join(values) + ")"
        else:
            output += ",\n(" + ", ".join(values) + ")"

        self.count = self.count + 1 if self.count < self.batch_size - 1 else 0
        self.rows += 1
        self.out_stream.write(output) 
```

# asp.net-mvc - 无法通过循环浏览文件夹来显示图像

> ID：14712008
> 
> 赞同：1
> 
> 时间：2013-02-05T16:19:53.500
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的 ASP.NET 项目中包含该`img`文件夹下的图像。我正在尝试自动化显示图像的过程，而无需手动添加每个图像。

我试过：

```
@foreach (var image in Directory.GetFiles(Server.MapPath("/img/portfolio/engagement")))
{
    <li class="span3"><a href="#" class="thumbnail"><img src="@image"/></a></li>
} 
```

这输出：

```
 <ul class="thumbnails">
            <li class="span3"><a href="#" class="thumbnail"><img src="C:\Users\Cody\Documents\CMBS\CodySolution\CodySolution\img\portfolio\engagement\IMG_0093.jpg"/></a></li>
            <li class="span3"><a href="#" class="thumbnail"><img src="C:\Users\Cody\Documents\CMBS\CodySolution\CodySolution\img\portfolio\engagement\IMG_0130.jpg"/></a></li>
            <li class="span3"><a href="#" class="thumbnail"><img src="C:\Users\Cody\Documents\CMBS\CodySolution\CodySolution\img\portfolio\engagement\IMG_0144.jpg"/></a></li>
            <li class="span3"><a href="#" class="thumbnail"><img src="C:\Users\Cody\Documents\CMBS\CodySolution\CodySolution\img\portfolio\engagement\IMG_9931.jpg"/></a></li>
    </ul> 
```

这行不通。图片不显示，当我尝试点击直接链接时，它告诉我`A potentially dangerous Request.Path value was detected from the client (:).`

做我想做的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:26:35.127

发生这种情况是因为`Server.MapPath`为您提供了 Web 应用程序驻留在服务器上的物理目录。

尝试`Url.Content()`改用。这将为您提供一个 http 路径，例如`http://www.yoursite.com/Content/file.jpg`

例如：

```
var path = "~/Content/Whatever/";
var listOfFileNames = Directory.GetFiles(Server.MapPath(path))
    .Select(p => path + Path.GetFileName(p));

@foreach (var item in listOfFileNames)
{
    <img src="@Url.Content(item)" />
} 
```

# svn - 颠覆：忽略项目，但仅在分支上

> ID：14712009
> 
> 赞同：0
> 
> 时间：2013-02-05T16:19:55.230
> 
> 标签：svn, tortoisesvn

假设我有一个二进制数据文件“foo”，我想在分支“dev”上进行版本化，而不是在分支“feature”上。如果我当前的工作副本是“功能”，我可以简单地忽略 foo 而不会影响“功能”分支的“foo”版本控制吗？当我将“dev”合并到“feature”时，也许在从“feature”合并到“dev”之前，会发生什么？

**上下文：** 我们有一个开发环境，人们在他们自己的分支中处理功能，然后合并到“开发”分支，最终合并到主干进行构建。一旦我们的本地更改稳定，我们应该先将“dev”合并到我们自己的分支中，然后再将我们自己的分支合并到“dev”中。我想从合并中保留我的本地“foo”文件，并且永远不要提交它，尽管它在“dev”上受版本控制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:29:54.683

首先要做的事情是：不要签入二进制文件。曾经。

其次 - 回答你的问题 - 它会很混乱......你可以做以下任何一个：

*   将其添加到`svn:ignore`dev 分支上，然后通过`svn:merginfo`在功能分支上进行编辑来阻止该变更集进行合并，这样变更集就不会被无意合并（您会忘记将其从合并中排除 - 这是人为的）
*   将它添加到 ~/.subversion/config 中的全局忽略。这将影响您的所有工作副本。此路径将导致您忘记在您希望时检查分支/功能上二进制文件的更新。

我强烈敦促您永远不要签入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:25:47.663

在分支上设置 svn 忽略。但是，在合并后，您必须小心保留或覆盖该属性。

# ruby-on-rails - Rails 应用程序的 Heroku 部署因 phony_normalize 而失败

> ID：14712011
> 
> 赞同：1
> 
> 时间：2013-02-05T16:19:58.150
> 
> 标签：ruby-on-rails, heroku

我是我的 Ruby on Rails 应用程序的 Heroku 部署的新手，我遇到了一个非常奇怪的情况。我正在尝试使用 phony_rails gem 部署应用程序。这在我的本地（Windows）机器上的开发和生产（使用 Postgres 的生产）上都可以很好地部署，但在 Heroku 上部署时会失败。具体来说，这里是 Heroku 堆栈跟踪的开始。

```
2013-02-05T16:05:26+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/phony_rails-0.1.12/lib/phony_rails.rb:74:in `block in phony_normalize': No attribute phone found on User (PhonyRails) (ArgumentError)
2013-02-05T16:05:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/phony_rails-0.1.12/lib/phony_rails.rb:73:in `each'
2013-02-05T16:05:26+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/phony_rails-0.1.12/lib/phony_rails.rb:73:in `phony_normalize'
2013-02-05T16:05:26+00:00 app[web.1]:   from /app/app/models/Users/user.rb:89:in `<class:User>'
2013-02-05T16:05:26+00:00 app[web.1]:   from /app/app/models/Users/user.rb:55:in `<top (required)>' 
```

user.rb 的第 89 行有问题的代码是这样的

```
phony_normalize :phone, :default_country_code => 'US' 
```

看了下 phony_rails 的源码后，发现如下（ArgumentError 在第 74 行）

```
# Use this method on the class level like:
#   phony_normalize :phone_number, :fax_number, :default_country_code => 'NL'
#
# It checks your model object for a a country_code attribute (eg. 'NL') to do the normalizing so make sure
# you've geocoded before calling this method!
def phony_normalize(*attributes)
  options = attributes.last.is_a?(Hash) ? attributes.pop : {}
  options.assert_valid_keys :country_code, :default_country_code, :as
  if options[:as].present?
    raise ArgumentError, ':as option can not be used on phony_normalize with multiple attribute names! (PhonyRails)' if attributes.size > 1
    raise ArgumentError, "'#{options[:as]}' is not an attribute on #{self.name}. You might want to use 'phony_normalized_method :#{attributes.first}' (PhonyRails)" if not self.attribute_method?(options[:as])
  end
  attributes.each do |attribute|
    raise ArgumentError, "No attribute #{attribute} found on #{self.name} (PhonyRails)" if not self.attribute_method?(attribute)
    # Add before validation that saves a normalized version of the phone number
    self.before_validation do
      set_phony_normalized_numbers(attributes, options)
    end
  end
end 
```

这是来自 User 模型的 attr_accesible 调用

```
attr_accessible :email, :name, :password, :password_confirmation, :rights, :right_ids,
:address_one, :address_two, :city, :state, :zip, :phone, :institutions, :institution_ids 
```

看起来我在 Heroku 上的 User 模型没有找到 :phone 属性，尽管它在 attr_accessible 方法和数据库中。有谁知道发生了什么？我在网上找不到任何关于 Heroku 和 phony_rails 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:53:25.250

所以看起来我真的不了解 Heroku 部署。问题是我在部署到 Heroku 后没有迁移我的数据库（我想我认为这会自动发生）。在我找到关于 https://gist.github.com/njvitto/362873>here 的信息后，一切都奏效了。

# javascript - GWT JSNI 返回一个 js 函数

> ID：14712014
> 
> 赞同：4
> 
> 时间：2013-02-05T16:20:11.037
> 
> 标签：javascript, gwt, d3.js

如何从 GWT 中的 JSNI返回 JavaScript*函数？*我尝试了以下方式：

```
/* JSNI method returning a js-function */
public static native JavaScriptObject native_getFunction() /*-{
    return function(a,b){
        //do some stuff with a,b
    }
}-*/; 
```

将函数存储在变量中

```
/* outside from GWT: store the function in a variable */
JavaScriptObject myFunction = native_getFunction(); 
```

之后使用该函数会产生以下错误消息：

```
(TypeError): object is not a function 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T18:38:01.563

这对我有用。声明这些方法：

```
public static native JavaScriptObject native_getFunction() /*-{
    return function(a,b){
        //do some stuff with a,b
    }
}-*/;

private native void invoke(JavaScriptObject func)/*-{
    func("a", "b");
}-*/; 
```

然后，您以这种方式使用这些方法：

```
JavaScriptObject func = native_getFunction();
invoke(func); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:01:43.073

让我们考虑`appName.nochache.js(GWT)` 你 `Homepage.html`

在`homepage.html`

```
<script>
    function printMyName(name) {
        alert("Hello from JavaScript, " + name);
    }
    </script> 
```

在您的 Gwt 中：

在您的 Gwt 源代码中，您可以通过 JSNI 访问 sayHello() JS 函数：

```
native void printMyNameInGwt(String name) /*-{
  $wnd.printMyName(name); // $wnd is a JSNI synonym for 'window'
}-*/; 
```

您也可以将它们分配给变量

```
native void printMyNameInGwt(String name) /*-{
  var myname =$wnd.printMyName(name); // return that for your purposes
}-*/; 
```

注意：如果您正在调用任何外部文件的 js 方法，这些文件应该使用`<script>` 标签附加到您的 html 页面上......

# c++ - c++ 命名空间/标识符问题

> ID：14712025
> 
> 赞同：0
> 
> 时间：2013-02-05T16:20:27.307
> 
> 标签：c++, namespaces, identifier

我是 C++ 的新手，在理解如何同时处理多个命名空间时遇到了困难。在我的 MVC 应用程序中，视图需要对控制器的引用来转发操作，而控制器需要对视图的引用来显示某些内容。

我已经从我的应用程序中删除了几乎所有内容，我仍然有很多关于命名空间和未声明标识符的编译错误。这是剥离的代码：

```
 #ifndef _geometria
#define _geometria

namespace core_stuff {

/*this namespace contains Model and Controller */

class Model {

public:
    Model();
    //void doSomething();

};

class Controller {

public:
    Controller();
    void setView(ui_stuff::View v);

};

}

namespace ui_stuff {

/*this namespace contains View and other UI classes libraries, not included here because I am semplifying the whole stuff */

class View {

public:
    View();
    void setController(core::Controller c);

};

}

#endif 
```

这是实现：

```
#include "geometria.h"
#include <iostream>

//implementation of core_stuff namespace  

core_stuff::Model::Model() { }

core_stuff::Controller::Controller() { }

void core_stuff::Controller::setView(ui_stuff::View v) {
//do some kind of operation in my view
}

//implementation of ui_stuff namespace*/

ui_stuff::View::View() { /* */ }

void ui_stuff::View::setController(core_stuff::Controller c) {
//do some kind of operation on the controller
}

/* main */
int main (int nArgs, char* args[]) {
core_stuff::Model m;
core_stuff::Controller c;
ui_stuff::View v;
v.setController(c);
c.setView(v);
} 
```

一长串编译错误中的第一个涉及

```
void setView(ui_stuff::View v); 
```

头文件中的行，无法访问 ui_stuff 命名空间：

第 (20) 行：错误 C2653：“ui_stuff”不是类或命名空间的名称

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:25:24.467

`ui_stuff::View`在使用它之前，您需要一个前向声明

```
namespace ui_stuff
{
    class View; // a forward declaration of ui_stuff::View
}

namespace core_stuff
{
   class Controller {
       void setView(ui_stuff::View& v);
   };
}

namespace ui_stuff
{
   class View
   {
   public:
        void setController(core_stuff::Controller& c);
   };
} 
```

我也把它作为参考传递了。这可能就是您想要的（不是视图的副本）。

**一个简短的解释为什么我改变了你的**声明：你不能通过`View`值传递给. 这是因为，当您按值传递时，必须定义您传递的整个对象。您不能在视图之前完全定义控制器，因为控制器依赖于视图的完整定义。但是出于同样的原因，您不能在控制器之前定义视图，因此“通过引用”位。`Controller` **`Controller``View`**

 **一旦声明了两个类，您就可以定义它们相互交互的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:29:48.147

正如 dutt 所说，C++ 是按顺序解析的。这意味着在 C++ 代码的每一行，编译器只知道到目前为止定义的内容。

要解决您的问题，您应该将 ui_stuff 移到核心内容之前，但您还应该查看类存根。例子：

```
namespace ui_stuff {
class View; //This class exists but I will not define it yet.
} 
```

问题是您**不能**将视图作为副本传递，因为您不知道究竟什么是视图。但是，您可以作为*指针*或*引用*传递（因为指针和引用都不需要知道数据的大小）。

所以，在你的代码中，而不是这样做：

```
class Controller {

public:
    Controller();
    void setView(ui_stuff::View v);

}; 
```

你会这样做：

```
class Controller {

public:
    Controller();
    void setView(ui_stuff::View& v);

}; 
```

`&`表示您期望引用现有视图，而不是新副本。**

# database - 如何对未填充到 JSP 页面中标准结果表的数据库结果进行排序

> ID：14712031
> 
> 赞同：0
> 
> 时间：2013-02-05T16:20:39.827
> 
> 标签：database, jsp, sorting, servlets

我有一个标准的 tomcat webapp，它正在查询 MySQL 数据库并将结果从 servlet 发送回 JSP。JSP 在没有传统数据表的情况下显示结果，而是通过在加载时使用脚本将结果填充到它们各自的 HTML 表中（每个结果行一个表）。

这是一个粗略的代码片段，展示了我如何填充 JSP 页面：

```
<html>
  <body>
    ...

    <%
      String[][] results = ((String[][])session.getAttribute("results"));
      for (int i = 0; i < results.length; i++)
      {
         String[] rowResult = (String[])results[i];
         String tableId   = "table_" + i;
         String attribOne = rowResult[0];
         String attribTwo = rowResult[1];
    %>

    <table id="<%= tableId %>" >
      <script>
        var table = document.getElementById("<%= tableId %>");
        table.setAttribute("attribOne", "<%= attribOne %>");
        table.setAttribute("attribTwo", "<%= attribTwo %>");
      </script>
      ...
    </table>

    <%
      }
    %>

  </body>
</html> 
```

我想知道在页面上最初填充结果后重新排序（排序）我的结果的最佳方式。页面顶部有一个下拉菜单，其值对应于每个要排序的表上的属性。实际上，我需要根据用户的排序选择来移动表格。

我考虑了以下选项：

*   **将多个结果集从 Servlet 传递到 JSP 页面，如果选择了不同的排序属性，则重新显示（刷新？）页面。** 这种方法的**缺点**很多。我必须在数据库中运行多个数据库查询（代价高昂），将同一结果集的多个副本返回给 JSP（效率低下），并且可能不得不刷新页面（烦人），而只想重新排列结果

*   **使用 JavaScript/jQuery 重新排列页面上的表格。** 这可能很难实现，并且可能需要很长时间来处理/重新显示。我不想让用户等待很长时间才能重新订购结果。

如果你们中的任何人可以对这些发表评论或就如何处理这个问题提供任何其他建议，我将不胜感激。

-鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:15:10.943

由于您已经列出了 2 个最明显的解决方案，因此这里有一个值得尝试的替代方案。

您可以定义一个 POJO 类来存放数据，而不是作为 String[][] 传递给 JSP。

**例子**

```
 Class Row{
  String attribOne;
  String attribTwo
} 
```

这样您就可以将其作为 List< list > 传递给 jsp

如果数据不是很大，您可以将它放在会话变量中，并使用[java.util.Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)以多种方式对其进行排序。

唯一的缺点是表中的每个可排序列都有多个比较器。

当然不是最佳解决方案，我为您提供了一个替代方案，但如果您在 JS 中执行此操作，它肯定会避免额外的 Db 调用/浏览器停止**。**

好吧，只是我的 2 美分

# javascript - 刷新表单结果而不刷新页面

> ID：14712034
> 
> 赞同：0
> 
> 时间：2013-02-05T16:20:54.980
> 
> 标签：javascript, jquery, ajax

这是对我的结构的解释，以便更好地理解我正在尝试做的事情。

我有一个初始表格，您可以在其中选择一个项目。提交初始表单后，您会得到一个包含多行和多列的表格，最后还有三个按钮。其中一个按钮会打开一个带有另一个表单的模式窗口，您可以在其中编辑表格的某些值。

当我保存并关闭表单时，我添加了一个`window.parent.location.reload();`刷新父页面并显示新的编辑。不幸的是，这会问我是否想在父页面上重新提交表单，这可能很烦人！我需要一种方法来刷新父表单的结果而不是整个页面，而不会一直出现对话框。此外，chrome 会清除父表单中的所有先前数据，并将父页面重新加载到其初始状态。

初始表格

```
<form class="form-horizontal" action="surveyCategories.cfm" method="post">
        <input type="hidden" name="post" value="1">
            <select name="survey" class="span3">
                <option value="">Select a Survey to Edit</option>
                <cfloop query="surveys">
                <option value="#id#">#name#</option>
                </cfloop>
            </select>
            <input type="submit" class="btn btn-primary" value="Submit">
        </form> 
```

带有按钮的结果表：（这是我关闭模式后需要刷新的表）

```
 <form name="list" method="post" action="surveyCategories.cfm" > 
     <input type="hidden" name="listFormPost" value="1">
      <table class="table table-hover">  
      <tr>
        <th>Select</th><th>Survey Name</th><th>Category</th><th>Category Weight</th>
      </tr>

        <cfloop query="categories">
            <tr>
                <td><input class="checkbox" type="checkbox" name="mark" value="#recID#"></td>
                <td>#name#</td>
                <td>#categoryname#</td>
                <td>#cweight#</td>
           </tr>    
        </cfloop>
       </table> 

<hr />

<div class="pull-left">
<a href="##addCategory" role="button" class="btn btn-success" data-toggle="modal">Add Category</a>

<a href="##update" role="button" class="btn btn-warning" data-toggle="modal">Update</a>

<button class="btn btn-danger" type="button" onClick="dlte(mark); window.parent.location.reload();" >Delete</button>
</div>
</form> 
```

模态窗口：

```
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
    <h3 id="myModalLabel">Update</h3>
    <div id="results"></div>
  </div>
  <div class="modal-body">
     <form name="update" action="updateSCpair.cfm" method="post">
        <input type="hidden" name="post2" value="1">
        <input type="hidden" name="surveyid" value="#categories.surveyid#" >

        <input type="text" value="#categories.name#" class="input-xlarge" disabled> <br />

        <select name="categories" onChange="handleCategoryChange();">
            <option value="" selected >Select a Category</option>
            <cfloop query="ratingCat">
              <option value="#ratingCat.categoryid#"  >#ratingCat.categoryName#</option>
            </cfloop>
        </select>
        <br />
        <input id="score"  name="score" class="span3" type="text"  required >

  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true" onClick="window.parent.location.reload();">Close</button>
    <button class="btn btn-primary" type="button" onClick="upd();" >Save changes</button>

    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:54:08.070

您将要使用 AJAX。

```
<!DOCTYPE html>
<html>
   <head>
   <script>
     function showModal(){ /*code to show modal*/}
     function hideModel(){ /*code to hide modal*/}

     function updateParentForm(jsonObject){
       var parentFormNameInput = document.getElementById('parent_form_name');
       parentFormNameInput.value = jsonObject.name;
     }

     function submitForm() {
       var xmlhttp;
       if (window.XMLHttpRequest){
         // code for IE7+, Firefox, Chrome, Opera, Safari
         xmlhttp=new XMLHttpRequest();
       } else {
         // code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
       }

       xmlhttp.onreadystatechange=function readyStateChange(){
         if (xmlhttp.readyState==4 && xmlhttp.status==200){
           // Lets assume you're responding back with a JSON string:
           // { "name": "submitted name" }
           var jsonObject = JSON.parse(xmlhttp.responseText);
           updateParentForm(jsonObject);
           hideModal();
         }
       }
       xmlhttp.open("POST","submit.cfm",true);
       xmlhttp.send("name=" + document.getElementById('modal_name').value);
  }
</script>
</head>
<body>

  <div id="myDiv"><h2>Let's submit a form!</h2></div>

  <!-- HERE IS OUR BUTTON TO DISPLAY THE MODAL -->
  <button type="button" onclick="showModal()">Show Modal Form</button>

  <!-- 
    Our modal HTML might look like this:
    <form>
      <input name="modal_name" id="modal_name" />
      <button type="button" onclick="submitForm()">Submit</button>
    </form>
  -->

  <form>
    <input name="name" id="parent_form_name" />
  </form>

</body>
</html> 
```

submitForm 方法负责跨浏览器的兼容性。onreadystatechange 事件在响应的生命周期内被多次触发。

您只关心 4 的 readyState 和 200 的状态。在此示例中，您的 submit.cfm 以 JSON 响应，以便于解析。

您使用 xmlhttp.send 方法发送名称值。对于多个参数，将每个参数与 & 即 xmlhttp.send('name=bill&age=30') 连接起来。

代码借自：[http ://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first](http://www.w3schools.com/ajax/tryit.asp?filename=tryajax_first)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:30:21.003

你可以试试类似的东西。

`window.location = 'http://yourlocation';`

如果这不起作用，那么您可以通过 AJAX 提交表单。请看[这里，](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)或者如果您使用的是 jQuery，[请看这里](http://api.jquery.com/jQuery.ajax/)

# java - Hadoop查找任务尝试的主机名

> ID：14712038
> 
> 赞同：1
> 
> 时间：2013-02-05T16:21:07.157
> 
> 标签：java, hadoop, mapreduce

在将 map reduce 作业提交到 hadoop 时，我试图以编程方式确定哪些任务尝试在集群中的哪个 tasktracker 上运行。我发现我可以像这样从 JobClient 获取大部分任务数据：

`jobClient.getMapTaskReports(jobID)`

但不是任务尝试成功的机器的主机名。有人知道如何从任务尝试 ID 中获取主机名吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T18:59:18.780

[JobClient](http://javasourcecode.org/html/open-source/hadoop/hadoop-1.0.3/org/apache/hadoop/mapred/JobClient.html)在提交时为您提供所谓的[NetworkedJob 。](http://javasourcecode.org/html/open-source/hadoop/hadoop-1.0.3/org/apache/hadoop/mapred/JobClient.NetworkedJob.html)它有一个名为`getTaskCompletionEvents`.

这将返回一个发生的数组`TaskCompletionEvent`，其中[包含运行 task 的 tasktracker 的 HTTP 地址](http://javasourcecode.org/html/open-source/hadoop/hadoop-1.0.3/org/apache/hadoop/mapred/TaskCompletionEvent.html#getTaskTrackerHttp%28%29)。

从那时起，您可以从 URL 解析主机。

# java - 如何在 JDeveloper 的调试中评估自定义表达式

> ID：14712040
> 
> 赞同：2
> 
> 时间：2013-02-05T16:21:07.213
> 
> 标签：java, eclipse, debugging, expression, jdeveloper

在 Eclipse 中，您可以在调试中编写一个随机表达式并对其进行评估。这是我的代码：

```
public static void main(String... args) {
     int x = 3;
*    System.out.print(x);
} 
```

在断点我想看表达式

> X

然后显示3。

但是，如果我看一个自定义表达式，例如：

> 新的 java.util.Date()

它应该返回当前日期，它显示

> ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:40:24.953

如果您在调试模式下使用检查选项，它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:02:10.390

我认为问题在于它不允许您调用构造函数，至少不能直接调用。但是，您可以有点狡猾并使用反射，即

```
Class.forName("java.util.Date").newInstance() 
```

因为您的手表表达式为您提供了一个新的日期。

可能与 Eclipse 让您做的事情不完全一样，但在某些事情上仍然有用。

# javascript - LocalStorage 不适用于全新安装的 iOS 应用程序

> ID：14712043
> 
> 赞同：0
> 
> 时间：2013-02-05T16:21:15.913
> 
> 标签：javascript, cordova, backbone.js, local-storage

我有一个使用 Phonegap 和 Backbone 的 iOS 应用程序，并且在通过 xCode 或 Testflight 全新安装应用程序时，本地存储不会保留发送给它的任何值。在每个屏幕上，本地存储值都为空。但是，如果应用程序退出然后重新启动，本地存储似乎工作正常。即使我从 xCode 再次安装该应用程序也很好，它仅在删除应用程序和全新安装时不起作用。有任何想法吗？这是我的本地存储线：

```
window.localStorage.setItem("user_name", "emailaddress"); 
```

更新 1：这个问题实际上似乎与骨干有关。在我的主要 home_view.js 声明中，我调用：

```
var View = require('./view');
var template = require('./templates/home'); 
var Posts = require('../models/posts');
var user_name = window.localStorage.getItem("user_name"); 
```

然后在渲染函数中 user_name 为 null 但这似乎解决了这个问题：

```
 if (user_name == null) {
        location.reload();
    } 
```

如果我设置：

```
 var user_name = window.localStorage.getItem("user_name"); 
```

在渲染函数中，user_name 是为 homeview.js 定义的，但不在任何其他 js 文件中。

# ios - 将数组内容正确存储到带有键的字典中

> ID：14712045
> 
> 赞同：0
> 
> 时间：2013-02-05T16:21:16.290
> 
> 标签：ios, json, nsarray

我有这个：

```
NSURL *url = [NSURL URLWithString:@"http://www.ios.com/ios/responseScript.php"];
NSError *error = nil;
NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:&error];
NSMutableArray *someArray = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];
NSLog(@"Array Retrieved: %@", someArray); 
```

它清楚地从站点获取 json 数据。PHP 数组是这样创建的：

```
$simpleProduct = array("John"=>"Employee","Jane"=>"Student","Jhonson"=>"Somejob","Mike"=>"Nothing");
echo json_encode($simpleProduct); 
```

当打印上面的objective-c代码的结果时，它显示如下：

> 2013-02-05 19:17:37.910 testProducts[26786:c07] 检索到的数组：{ Jane = Student；Jhonson = 一些工作；约翰 = 员工；迈克 = 没有；}

现在我希望将这些数据插入到字典（NSMutableDictionary）中，例如 Jane 是键，Student 是值。对于所有其他对，依此类推。

如何才能做到这一点？

我是 iOS 开发新手 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:27:50.157

为什么不直接得到这样的结果

```
NSDictionary *someDictionary = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error]; 
```

它使您的生活更轻松，并且只需通过这样的键访问值

```
NSString *jane= [someDictionary objectForKey:@"Jane"]; 
```

# python - 正则表达式提取嵌套模式

> ID：14712046
> 
> 赞同：2
> 
> 时间：2013-02-05T16:21:18.180
> 
> 标签：python, regex, python-3.x

> **可能的重复：**
> [用 Python 中的正则表达式匹配嵌套结构](https://stackoverflow.com/questions/1099178/matching-nested-structures-with-regular-expressions-in-python)

我无法解决这个问题。我有一个类似于以下的字符串：

```
Lorem ipsum dolor sit amet [@a xxx yyy [@b xxx yyy [@c xxx yyy]]] lorem ipsum sit amet 
```

我的任务是提取命令（它们总是以**[@开头并以****]**结尾）及其子命令。结果像

```
[
    [@a xxx yyy [@b xxx yyy [@c xxx yyy]]], # the most outer
    [@b xxx yyy [@c xxx yyy]],              # the middle one
    [@c xxx yyy]                            # the inner most
] 
```

将不胜感激。问题是这类命令可能出现在很长的文本消息中，因此“高性能”解决方案会很好。

我大部分时间都在玩弄一些正则表达式模式，比如

```
(\[@.*?\]\s) # for the outer one 
```

但我没有看到匹配中间和内部的光线。为了使它更复杂，嵌套命令的数量是可变的......可能一些特殊的正则表达式是解决方案吗？我已经阅读了前瞻和后瞻，但不知道如何在这种特殊情况下使用它们。

谢谢一堆！

**更新**

@Cyborgx37 将我指向另一个使用 pyparsing 包的帖子。有一个没有外部包或库的解决方案会很好。但是 pyparsing 绝对可以解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:45:15.823

C# 有递归/嵌套的 RegEx，我不相信 Python 有。您可以对以前的结果重新运行 RegEx 搜索，但这可能比仅制作自定义解析器效率低（RegEx 对这种简单搜索的开销）。您搜索“[@”和“]”的文本不是很复杂。

这是一个可以完成这项工作的自定义解析器（在 JavaScript 中）。

```
var txt = "Lorem ipsum dolor sit amet [@a xxx yyy [@b xxx yyy [@c xxx yyy]]] lorem ipsum sit amet";
function parse(s) {
    var stack = [];
    var result = [];
    for(var x=0; x<s.length; x++) {
        var c = s.charAt(x);
        if(c == '[' && x+1 < s.length-1 && s.charAt(x+1) == '@') {
            for(var y=0; y<stack.length; y++)
                stack[y] += "[@";
            stack.push("[@");
            x++;
        } else if(c == ']' && stack.length > 0) {
            for(var y=0; y<stack.length; y++)
                stack[y] += "]";
            result.push(stack.pop());
        } else {
            for(var y=0; y<stack.length; y++)
                stack[y] += c;
        }
    }
    return result;
}
parse(txt); 
```

它快速遍历文本的所有字符（仅一次）并使用堆栈和 if...if else...else 条件分别推送、弹出和修改该堆栈中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:25:49.160

所以来自 ac# 背景，我不确定这会有所帮助，*但是*，我想既然你必须解析内部命令，为什么不直接存储命令的内容，然后再次运行你的正则表达式函数内部数据？我知道我可能遗漏了一些东西，但这就是我至少会尝试的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:03:34.317

难怪你无法解决这个问题。有一种关于形式语言的形式语言理论。Noam Chomsky 描述了四种语言类别——称为[Chomsky 层次结构](http://en.wikipedia.org/wiki/Chomsky_hierarchy)。正则表达式确实能够描述语言的简单类别——正则语言。但是，具有嵌套配对结构的语言不属于正则语言，它们不能被正则表达式描述/接受。

最容易实现的一种解析器是基于对解析语言元素的函数的递归调用的解析器。

# mysql - 如何捕获有关用户访问网站次数的统计信息

> ID：14712051
> 
> 赞同：0
> 
> 时间：2013-02-05T16:21:23.013
> 
> 标签：mysql

```
visited     200 days, 1 consecutive 
```

如何以类似于 Stackoverflow 在配置文件中提供的方式捕获有关用户访问站点的次数和连续天数的统计信息。

下表就足够了吗？

```
create table visit_stats (id, user_id, date) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:14:32.433

是的，当然这已经足够了。

您可以通过以下方式获取用户访问量：

```
SELECT COUNT(*) FROM visit_stats WHERE user_id=? 
```

并且必须通过检查从一次访问到另一次访问的距离，使用子选择来解决连续的天数。

# mysql - 为什么这个使用 union all 的查询不起作用

> ID：14712052
> 
> 赞同：1
> 
> 时间：2013-02-05T16:21:23.257
> 
> 标签：mysql, sql, select

我有以下查询：

```
SELECT a.status, count(a.status) FROM
(SELECT 'Delivered' AS status
UNION ALL SELECT 'Buffered'
UNION ALL SELECT 'Not Delivered'
UNION ALL SELECT 'Not Reported') a
LEFT JOIN 
bulk_sms_numbers
ON a.status = bulk_sms_numbers.delivery_status
WHERE bulk_sms_id = 52
GROUP BY a.status; 
```

和以下结果：

```
+-----------+-----------------+
|  status   | count(a.status) |
+-----------+-----------------+
| Buffered  |              10 |
| Delivered |            3200 |
+-----------+-----------------+ 
```

我希望结果集包含联合所有查询中列出的所有可能状态

我需要的示例输出。

```
+---------------+-----------------+
|    status     | count(a.status) |
+---------------+-----------------+
| Buffered      |              10 |
| Delivered     |            3200 |
| Not Delieverd |               0 |
| Not Reported  |               0 |
+---------------+-----------------+ 
```

我正在使用 MySql

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:23:04.910

将条件从`WHERE`子句移入`ON`，以便过滤将在加入时进行，而不是在最终结果列表中。

```
SELECT a.status, count(a.status) 
FROM
    (
        SELECT 'Delivered' AS status
        UNION ALL SELECT 'Buffered'
        UNION ALL SELECT 'Not Delivered'
        UNION ALL SELECT 'Not Reported'
    ) a
    LEFT JOIN bulk_sms_numbers
        ON a.status = bulk_sms_numbers.delivery_status AND 
            bulk_sms_id = 52
GROUP BY a.status; 
```

*   [SQLFiddle 演示示例](http://www.sqlfiddle.com/#!2/87b1c/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:24:40.580

尝试将 WHERE 条件移入 ON 子句并使用 OUTER 连接。

```
SELECT a.status, count(a.status) FROM
(SELECT 'Delivered' AS status
UNION ALL SELECT 'Buffered'
UNION ALL SELECT 'Not Delivered'
UNION ALL SELECT 'Not Reported') a
LEFT OUTER JOIN 
bulk_sms_numbers
ON a.status = bulk_sms_numbers.delivery_status
AND bulk_sms_id = 52
GROUP BY a.status; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:02:59.760

我最终使用了这样的查询：

```
SELECT cnt, IFNULL(delivery_status, 'Not Reported') delivery_status FROM (
    SELECT delivery_status, count(delivery_status) cnt FROM bulk_sms_numbers WHERE bulk_sms_id = 52 GROUP BY delivery_status
) x 
```

然后在php中我将所有状态的默认值设置为0

```
$data = $db->fetchAll($q, array($aid, $reference));

$statuses = array(
    'Buffered' => 0,
    'Delivered' => 0,
    'Not Delivered' => 0,
    'Not Reported' => 0,
);

foreach ($data as $value) {
    $statuses[$value['delivery_status']] = $value['cnt'];
} 
```

虽然这解决了我的问题，但不是我问题的答案。我想找到一个纯 sql 答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:23:31.090

尝试也给所有列名并将其更改`ON`为有条件的

```
SELECT a.status, count(a.status) FROM
(SELECT 'Delivered' AS status
UNION ALL SELECT 'Buffered' As status
UNION ALL SELECT 'Not Delivered' as status
UNION ALL SELECT 'Not Reported' as status) a
LEFT JOIN 
bulk_sms_numbers
ON a.status = bulk_sms_numbers.delivery_status
AND bulk_sms_id = 52
GROUP BY a.status; 
```

# java - 将值加倍到 TextView

> ID：14712063
> 
> 赞同：0
> 
> 时间：2013-02-05T16:21:53.620
> 
> 标签：java, android, textview, double

我试图以 0.0 小时显示时间。所以我想将分钟除以 60 得到 .xx

这就是我所拥有的，但在 . 即使输入的分钟数是奇数...

```
double hoursLeftMins = hoursRemaining + (minsRemaining/60);
recommendTime.setText(Double.toString(hoursLeftMins)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:23:46.920

如果将`minsRemaining`表达式`int`更改为

```
double hoursLeftMins = hoursRemaining + (minsRemaining/60.0); 
```

说明：如果将两个整数相除，小数部分将被截断。为了保留小数部分，除以`60.0`，以便将数字视为实数，而不是整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:37:35.470

对于这种算术，我建议切换到 BigDecimal，而不是 double。在 BigDecimal 中，可以轻松控制小数点后的位数和舍入方式。Double.toString 可能会提供比您想要的更多的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:26:27.287

如果你想变得更灵活，何不试试 TimeUnit？

```
long millis = ... //Total time in milliseconds
String time = String.format("%d min, %d sec", 
TimeUnit.MILLISECONDS.toMinutes(millis),
TimeUnit.MILLISECONDS.toSeconds(millis) - TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(millis))
             ); 
```

# angularjs - 如何优化使用 ng-repeat 和 ng-include 构建的嵌套表负载？

> ID：14712064
> 
> 赞同：1
> 
> 时间：2013-02-05T16:21:55.590
> 
> 标签：angularjs

目前 Chrome 会在大约 6 秒内加载大小为 40x15 的表格。它比 goog.editor.Table 慢得多。我需要至少减少两次加载时间。

```
<script type="text/ng-template" id="grid_item_renderer.html">
<span ng-switch on="cell.type">
    <textarea ng-switch-when="simple" class="cell-text-area simple-cell" ng-model="cell.data">{{cell.data}}</textarea>
    <span ng-switch-when="grid">
        <table class="declarative-grid-table" border="1" bordercolor="#CCC" cellspacing="0" tabindex="0">
            <tr ng-repeat="row in cell.data.grid" >
                <td ng-repeat="cell in row" class="declarative-grid-cell">
                    <span ng-include="'grid_item_renderer.html'"></span>
                </td>
            </tr>
        </table>
    </span>
    <span ng-switch-default>unexpected cell type</span>
</span>
</script>
<table class="declarative-grid-table" border="1" bordercolor="#CCC" cellspacing="0"  tabindex="0">
<tr ng-repeat="row in declarativeGrid" class="declarative-grid-row">
    <td ng-repeat="cell in row" class="declarative-grid-cell">
        <span ng-include="'grid_item_renderer.html'"></span>
    </td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:32:25.880

使用 Angular，您可以通过创建自定义指令来优化您可能需要的任何内容。如果您遇到嵌套 ng-repeats 的性能问题，可能是时候推出您自己的指令，以编程方式构建表的 DOM 元素。它会更快，开销也更少，因为您的自定义指令创建的 $watches 和范围会更少。

# google-sheets - 在多个单元格中搜索

> ID：14712069
> 
> 赞同：0
> 
> 时间：2013-02-05T16:22:13.747
> 
> 标签：google-sheets

我使用的工作公式是：

```
 =IF(ISNUMBER(SEARCH($K$5;E3));"x";"") 
```

简而言之，如果 K5 匹配 E3，则显示 ax。如何将搜索区域扩展到 E3:F3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:35:02.980

假设您想在 E3 或 F3 等于 K5 时显示 X，那么我将使用 =if(or(E3=K5,F3=K5),"x","")

您提供的公式不会验证 K5 是否与 E3 匹配，而是在 E3 中查找 K5 的值。这意味着如果 E3 为 157 且 K5 为 5，则使用您当前的公式，您的公式将返回“x”，因为 5 包含在 157 中。

# windows - 有没有办法打开/读取 .PRI 文件？（包资源索引 - 在 Windows 应用商店应用中使用）

> ID：14712070
> 
> 赞同：10
> 
> 时间：2013-02-05T16:22:21.970
> 
> 标签：windows, resources, microsoft-metro, compiled

我需要从**SOURCE.PRI**文件中获取一些资源，修改某些值，然后创建**TARGET.PRI**文件，该文件的内容与**SOURCE.PRI 完全相同**，除了上面提到的修改值。

有几个**PRI**文件扩展名，我指的是 Windows Store 应用程序使用的已编译资源文件（[更多信息](http://msdn.microsoft.com/en-us/library/windows/apps/hh694557.aspx)）。

我假设，由于**.PRI**文件已经编译，因此无法使用简单的文本解析器逐个字符地读取它们。

因此，我正在寻找一种编译和反编译**.PRI**文件的方法。

有没有人找到办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-07T14:56:56.433

在[这个 github 项目](https://github.com/PFCKrutonium/Windows-10-Login-Background-Changer)中，他们编辑了**.pri**文件以更改登录屏幕。

你可以试着看看他们在那里做了什么，以及如何用你自己的项目来完成它。

*虽然这个问题已经很久没有问过了，但我认为在这里有一个答案仍然很好，可以指导任何有兴趣这样做并到达这里的人。*

# python - 在 Python 中从头开始构建桶列表直方图

> ID：14712071
> 
> 赞同：0
> 
> 时间：2013-02-05T16:22:22.277
> 
> 标签：python, histogram

我正在研究[Think Python](http://www.greenteapress.com/thinkpython/)，并且有一个[练习](http://www.greenteapress.com/thinkpython/thinkCSpy/html/chap09.html)，您将编写一个执行以下操作的函数：

*   作为参数：（`L`数字列表）和`n`（和 int）
*   `n`以子列表 列表的形式返回直方图
    *   每个子列表表示 中的数字所涵盖范围的细分，并包含一个 int 表示该细分中有`L`多少个元素`L`

所以我们正在查看一系列数字，将该范围分成`n`相等的桶，并用这些桶构建直方图。本练习之前的部分展示了在处理区间 [0.0, 1.0) 中的随机浮点数列表时如何构建这样的函数。它查看元素在该区间中的位置（这只是它的值），将其乘以`n`，然后转换为 int （在过程中截断）。这会在 [0, n) 中产生一个 int，它是合适的桶索引。

这里的区别在于我们不是在预定的（和方便的）间隔内工作。这就是我想出的。我想知道是否有更优雅的方式来做到这一点。我将我的区间计算为`max(L) - min(L)`，但必须添加一些额外的，否则 in 中的最大元素`L`将获得 n 的索引（超出范围），而它应该得到 n - 1。我调用了 little extra `extraBit`。

```
def histogram(L, n):
    hist = [0] * numBuckets
    minVal = min(L)
    maxVal = max(L)
    extraBit = .0000000000001
    interval = (maxVal - minVal) + extraBit

    for i in L:
        placement = (i - minVal) / interval
        index = int(placement * numBuckets)
        hist[index] = hist[index] + 1

    return hist 
```

有没有更漂亮的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:59:22.840

我上周写了自己的：

```
def frequency_count(itt, nr_bins, minn=None, maxx=None):
    ret = []
    if minn == None:
        minn = min(itt)
    if maxx == None:
        maxx = max(itt)
    binsize = (maxx - minn) / float(nr_bins) #man, do I hate int division

    #construct bins
    ret.append([float("-infinity"), minn, 0]) #-inf -> min
    for x in range(0, nr_bins):
        start = minn + x * binsize
        ret.append([start, start+binsize, 0])
    ret.append([maxx, float("infinity"), 0]) #maxx -> inf

    #assign items to bin
    for item in itt:
        for binn in ret:
            if binn[0] <= item < binn[1]:
                binn[2] += 1        
    return ret 
```

这个允许您获取值的一部分而不是整个范围。它通过添加 -inf->min 和 max->inf catchall 存储桶解决了您的溢出问题。我不知道这是否适合你。

# jquery-ui - jQuery UI 可排序“portlets” - 触发占位符细节？

> ID：14712072
> 
> 赞同：1
> 
> 时间：2013-02-05T16:22:27.253
> 
> 标签：jquery-ui, jquery-ui-sortable

我有一个应用程序的实现，它在“portlets”风格的界面中使用 jQuery UI Sortable，就像他们在这里的例子：http: [//jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets)

我在使“目标”占位符以真正的一致性变得可见时遇到了一些问题。我有 4 个可分类容器：1 个是全宽的，2 个是 50% 宽的，另一个是全宽的。这个想法是，用户可以通过将“portlet”拖到 100% 区域之一来制作全尺寸的“portlet”。

有用。

但是，我不能可靠地使顶部的“占位符”出现。我四处移动鼠标，将它移到其他 portlet 上，*有时*它会出现，以便我可以将小部件放在那里。

我只想消除“有时”变量。在 Sortable 交互提供的众多行为参数中，我需要调整哪些？还有任何相关的CSS因素吗？（填充等）。

我会提供示例代码，但这不切实际..我使用默认值调用：

`$('.widgetContainer').sortable({connectWith: ".widgetContainer"});`

至于 CSS，网站上有一个继承链，因此我很难隔离（当然也不是不可能）。可以说，这些规则至少已经到位：

```
.placeholder { float: left; margin-bottom: 10px; }
.widgetContainer { float: left; padding-bottom: 20px; } 
```

# android - 通过 Handler 向尚未创建的 Activity 发送消息

> ID：14712076
> 
> 赞同：0
> 
> 时间：2013-02-05T16:22:41.710
> 
> 标签：android, multithreading, android-activity, handler, message

我正在开发一个 Android 应用程序。这个应用程序包含两个活动。

*   主要活动
*   次要活动（从主要活动中调用）

我有一个线程使用该`handler`机制将消息传递给主活动，并且此活动显示图像。

我希望这个图标显示在两个活动中。但是，如果我确定主要活动尚未创建，我不能对次要活动说同样的话。那么，如果我尝试将消息从线程发送到尚未创建的 Activity 会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:31:48.103

> 我希望这个图标显示在两个活动中。但是，如果我确定主要活动尚未创建，我不能对次要活动说同样的话。

一次只能激活一个 Activity，因此您需要将公共数据保存在某种类型的[数据存储](https://developer.android.com/guide/topics/data/data-storage.html)中（如[SharedPreference](https://developer.android.com/reference/android/content/SharedPreferences.html)），或者您可以使用全局变量，或者您可以在 Intents 中来回传递这些信息。

无论您选择哪种方法，它都需要在下一个 Activity 开始时可用。我建议使用 SharedPreferences，因为它们相对简单，并且在应用程序关闭时不会被删除。

# c# - 通过ajax请求获取剩余会话时间而不更新会话

> ID：14712077
> 
> 赞同：3
> 
> 时间：2013-02-05T16:22:46.617
> 
> 标签：c#, asp.net-mvc, session, jquery, popupwindow

我正在写会话提醒，它会弹出并倒计时会话时间。问题出在客户端计时器上，它不知道其他浏览器选项卡中的会话更新。所以我需要在显示提醒弹出窗口之前通过服务器端的 ajax 请求检查时间。通过这样做，剩余的会话时间不应被更新。

我正在使用 IIS 8、.NET MVC 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:41:01.790

您可以将您的控制器标记为无会话，也许这可以帮助您。

尝试将此属性添加到您的控制器类：

```
[SessionState(SessionStateBehavior.Disabled)]
public class MyController
{
    .... 
```

# macos - Mac Automator：shell 脚本只有一行

> ID：14712079
> 
> 赞同：0
> 
> 时间：2013-02-05T16:22:50.717
> 
> 标签：macos, automator

我有一个用于服务的 Automator 脚本，如下所示：

```
Receives as text in any application. Input is entire selection, does not replace selected text.
-> Run Shell Script (/bin/bash) "expand -t 4" pass input to stdin
-> Copy to Clipboard 
```

没有设置其他选项。这个想法是我可以选择一些代码，然后在剪贴板中放置一个去标签的版本，而不必将代码粘贴到 BBEdit 中进行去标签。

该服务仅生成所选文本的第一行。删除 shell-script 操作会将所有选定的文本放到剪贴板上。跑步

```
expand -t 4 < /path/to/tabbed.file > result.file 
```

产生整个输入文件的转换内容。将命令替换为“wc”可以显示合理的行数、单词数和字符数。

因此，问题似乎在于通过来自 Automator 服务输入的标准输入将多于一行的选择传递给 expand(1)。我没有从 expand(1) 手册页中看到任何相关内容。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:39:42.240

试试这个 AppleScript：

```
on run {input}
    set the clipboard to (do shell script "expand -t 4 <<< " & quoted form of (input as text))
end run 
```

# permissions - Opencart VqMod 权限问题

> ID：14712081
> 
> 赞同：2
> 
> 时间：2013-02-05T16:22:52.617
> 
> 标签：permissions, opencart

我最近复制了一个 opencart 安装来创建一个开发环境。我遇到的问题是 vqmod 文件被“锁定”了。我没有权限在新的开发环境中更新它们，如果我在 ftp 服务器上删除它们，下次加载该页面后它们会以某种方式重新出现。任何帮助都是极好的。这让我发疯并阻止我做出必要的改变！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:27:25.037

vQmod 缓存文件在每次页面加载时根据需要生成。确保您使用的是最新版本（当前为 2.3.0）。如果您无法为他们删除文件夹，您应该能够重命名该文件夹，然后创建一个您可以访问的新文件夹，并且您的服务器应该能够写入该文件夹。如果这不可能备份您的 xml 文件`/vqmod/xml/`，则完全删除 vQmod，并上传新副本，然后将所有 xml 文件复制到`/vqmod/xml/`

# angularjs - How to deep watch an array in angularjs?

> ID：14712089
> 
> 赞同：325
> 
> 时间：2013-02-05T16:23:15.723
> 
> 标签：angularjs, watch

There is an array of objects in my scope, I want to watch all the values of each object.

This is my code:

```
function TodoCtrl($scope) {
  $scope.columns = [
      { field:'title', displayName: 'TITLE'},
      { field: 'content', displayName: 'CONTENT' }
  ];
   $scope.$watch('columns', function(newVal) {
       alert('columns changed');
   });
} 
```

But when I modify the values, e.g. I change `TITLE` to `TITLE2`, the `alert('columns changed')` never popped.

How to deep watch the objects inside an array?

There is a live demo: [http://jsfiddle.net/SYx9b/](http://jsfiddle.net/SYx9b/)

* * *

## 回答 #1

> 赞同：539
> 
> 时间：2013-02-05T18:04:20.910

You can set the 3rd argument of `$watch` to `true`:

```
$scope.$watch('data', function (newVal, oldVal) { /*...*/ }, true); 
```

See [https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch)

Since Angular 1.1.x you can also use $watchCollection to watch shallow watch (just the "first level" of) the collection.

```
$scope.$watchCollection('data', function (newVal, oldVal) { /*...*/ }); 
```

See [https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watchCollection](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watchCollection)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-08-08T06:43:11.383

There are performance consequences to deep-diving an object in your $watch. Sometimes (for example, when changes are only pushes and pops), you might want to $watch an easily calculated value, such as array.length.

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2013-02-05T16:34:37.257

If you're going to watch only one array, you can simply use this bit of code:

```
$scope.$watch('columns', function() {
  // some value in the array has changed 
}, true); // watching properties 
```

[example](http://jsfiddle.net/4DN5S/)

But this will not work with multiple arrays:

```
$scope.$watch('columns + ANOTHER_ARRAY', function() {
  // will never be called when things change in columns or ANOTHER_ARRAY
}, true); 
```

[example](http://jsfiddle.net/qsMhq/3/)

To handle this situation, I usually convert the multiple arrays I want to watch into JSON:

```
$scope.$watch(function() { 
  return angular.toJson([$scope.columns, $scope.ANOTHER_ARRAY, ... ]); 
},
function() {
  // some value in some array has changed
} 
```

[example](http://jsfiddle.net/Egr2T/)

As @jssebastian pointed out in the comments, `JSON.stringify` may be preferable to `angular.toJson` as it can handle members that start with '$' and possible other cases as well.

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-08-29T18:35:14.963

It's worth noting that in Angular 1.1.x and above, you can now use [$watchCollection](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watchCollection) rather than $watch. Although the $watchCollection appears to create shallow watches so it won't work with arrays of objects like you expect. It can detect additions and deletions to the array, but not the properties of objects inside arrays.

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-11-07T16:01:42.887

Here is a comparison of the 3 ways you can watch a scope variable with examples:

**$watch()** is triggered by:

```
$scope.myArray = [];
$scope.myArray = null;
$scope.myArray = someOtherArray; 
```

**$watchCollection()** is triggered by everything above AND:

```
$scope.myArray.push({}); // add element
$scope.myArray.splice(0, 1); // remove element
$scope.myArray[0] = {}; // assign index to different value 
```

**$watch(..., true)** is triggered by EVERYTHING above AND:

```
$scope.myArray[0].someProperty = "someValue"; 
```

**JUST ONE MORE THING...**

**$watch()** is the only one that triggers when an array is replaced with another array even if that other array has the same exact content.

For example where `$watch()` would fire and `$watchCollection()` would not:

```
$scope.myArray = ["Apples", "Bananas", "Orange" ];

var newArray = [];
newArray.push("Apples");
newArray.push("Bananas");
newArray.push("Orange");

$scope.myArray = newArray; 
```

Below is a link to an example JSFiddle that uses all the different watch combinations and outputs log messages to indicate which "watches" were triggered:

[http://jsfiddle.net/luisperezphd/2zj9k872/](http://jsfiddle.net/luisperezphd/2zj9k872/)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-03-23T05:23:11.237

**$watchCollection** accomplishes what you want to do. Below is an example copied from angularjs website [http://docs.angularjs.org/api/ng/type/$rootScope.Scope](http://docs.angularjs.org/api/ng/type/$rootScope.Scope) While it's convenient, the performance needs to be taken into consideration especially when you watch a large collection.

```
 $scope.names = ['igor', 'matias', 'misko', 'james'];
  $scope.dataCount = 4;

  $scope.$watchCollection('names', function(newNames, oldNames) {
     $scope.dataCount = newNames.length;
  });

  expect($scope.dataCount).toEqual(4);
  $scope.$digest();

  //still at 4 ... no changes
  expect($scope.dataCount).toEqual(4);

  $scope.names.pop();
  $scope.$digest();

  //now there's been a change
  expect($scope.dataCount).toEqual(3); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-10-10T02:34:18.640

This solution worked very well for me, i'm doing this in a directive:

scope.$watch(attrs.testWatch, function() {.....}, true);

the true works pretty well and react for all the chnages (add, delete, or modify a field).

Here is a working plunker for play with it.

[Deeply Watching an Array in AngularJS](http://plnkr.co/edit/evoBgCkMAIkMivE2OoM8?p=preview)

I hope this can be useful for you. If you have any questions, feel free for ask, I'll try to help :)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-01-09T19:29:20.933

In my case, I needed to watch a service, which contains an address object also watched by several other controllers. I was stuck in a loop until I added the 'true' parameter, which seems to be the key to success when watching objects.

```
$scope.$watch(function() {
    return LocationService.getAddress();
}, function(address) {
    //handle address object
}, true); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-04T16:56:08.387

Setting the `objectEquality` parameter (third parameter) of the `$watch` function is definitely the correct way to watch ALL properties of the array.

```
$scope.$watch('columns', function(newVal) {
    alert('columns changed');
},true); // <- Right here 
```

[Piran](https://stackoverflow.com/users/1402988/piran) answers this well enough and mentions `$watchCollection` as well.

**More Detail**

The reason I'm answering an already answered question is because I want to point out that [wizardwerdna](https://stackoverflow.com/users/1243227/wizardwerdna)'s answer is not a good one and should not be used.

The problem is that the digests do not happen immediately. They have to wait until the current block of code has completed before executing. Thus, watch the `length` of an array may actually miss some important changes that `$watchCollection` will catch.

Assume this configuration:

```
$scope.testArray = [
    {val:1},
    {val:2}
];

$scope.$watch('testArray.length', function(newLength, oldLength) {
    console.log('length changed: ', oldLength, ' -> ', newLength);
});

$scope.$watchCollection('testArray', function(newArray) {
    console.log('testArray changed');
}); 
```

At first glance, it may seem like these would fire at the same time, such as in this case:

```
function pushToArray() {
    $scope.testArray.push({val:3});
}
pushToArray();

// Console output
// length changed: 2 -> 3
// testArray changed 
```

That works well enough, but consider this:

```
function spliceArray() {
    // Starting at index 1, remove 1 item, then push {val: 3}.
    $testArray.splice(1, 1, {val: 3});
}
spliceArray();

// Console output
// testArray changed 
```

Notice that the resulting length was the same even though the array has a new element and lost an element, so as watch as the `$watch` is concerned, `length` hasn't changed. `$watchCollection` picked up on it, though.

```
function pushPopArray() {
    $testArray.push({val: 3});
    $testArray.pop();
}
pushPopArray();

// Console output
// testArray change 
```

The same result happens with a push and pop in the same block.

**Conclusion**

To watch every property in the array, use a `$watch` on the array iteself with the third parameter (objectEquality) included and set to true. Yes, this is expensive but sometimes necessary.

To watch when object enter/exit the array, use a `$watchCollection`.

Do NOT use a `$watch` on the `length` property of the array. There is almost no good reason I can think of to do so.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-11T08:42:46.203

```
$scope.changePass = function(data){

    if(data.txtNewConfirmPassword !== data.txtNewPassword){
        $scope.confirmStatus = true;
    }else{
        $scope.confirmStatus = false;
    }
};
```

```
 <form class="list" name="myForm">
      <label class="item item-input">        
        <input type="password" placeholder="ใส่รหัสผ่านปัจจุบัน" ng-model="data.txtCurrentPassword" maxlength="5" required>
      </label>
      <label class="item item-input">
        <input type="password" placeholder="ใส่รหัสผ่านใหม่" ng-model="data.txtNewPassword" maxlength="5" ng-minlength="5" name="checknawPassword" ng-change="changePass(data)" required>
      </label>
      <label class="item item-input">
        <input type="password" placeholder="ใส่รหัสผ่านใหม่ให้ตรงกัน" ng-model="data.txtNewConfirmPassword" maxlength="5" ng-minlength="5" name="checkConfirmPassword" ng-change="changePass(data)" required>
      </label>      
       <div class="spacer" style="width: 300px; height: 5px;"></div> 
      <span style="color:red" ng-show="myForm.checknawPassword.$error.minlength || myForm.checkConfirmPassword.$error.minlength">รหัสผ่านต้องมีจำนวน 5 หลัก</span><br>
      <span ng-show="confirmStatus" style="color:red">รหัสผ่านใหม่ไม่ตรงกัน&lt;/span>
      <br>
      <button class="button button-positive  button-block" ng-click="saveChangePass(data)" ng-disabled="myForm.$invalid || confirmStatus">เปลี่ยน</button>
    </form>
```

# ios - iOS - 无法部署到 iOS 6.1 模拟器或将部署目标设置为 iOS 6.1

> ID：14712090
> 
> 赞同：0
> 
> 时间：2013-02-05T16:23:16.997
> 
> 标签：ios, ios6

我的应用程序被拒绝，因为它在运行 iOS 6.1 的 iPhone 5 上崩溃。所以我试图在这个版本上进行测试，但我意识到我的这个应用程序的 xCode 没有在运行 iOS 6.1 的 iPhone 5 中运行模拟器的选项

我怎样才能让它在那个配置下运行？

我目前的目标是 6.0 iPhone。当我尝试将“部署目标”设为 6.1 时，我没有该选项。它仅适用于 6.0...但我的其他应用程序的 xCode 确实具有 6.1 选项。为了启用它，我应该改变什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:25:08.240

您需要更新到包含 6.1 模拟器和 SDK 的 Xcode 4.6。在 AppStore 中执行此操作。

如果您需要在 Xcode 中安装不同的模拟器，请转到首选项，然后转到下载部分

![在此处输入图像描述](../Images/dd6ca65625916fa6f307be1fb48a76e7.png)

# python - Python poll - 属性错误

> ID：14712091
> 
> 赞同：1
> 
> 时间：2013-02-05T16:23:18.973
> 
> 标签：python, linux

我正在尝试使用`poll()`python 轮询一个进程。[关联](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.poll)

我不明白，我正在为它提供一个积分值来轮询。例如：值为`14870`

```
14870
Traceback (most recent call last):
  File "test.py", line 29, in <module>
    parse_file(input_csv[0])
  File "test.py", line 24, in parse_file
    ret = pid[r].poll()
AttributeError: 'int' object has no attribute 'poll' 
```

我未能在文档中找到关于它是什么数据类型的任何地方..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:25:24.200

`poll`是对象的方法，`Popen`就像`pid`是对象的属性一样`Popen`：

```
process = Popen(['some','command'])
print(process.pid)
process.poll() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:30:59.007

您可以执行以下操作：

```
from os import system
_proc_status = system('/proc/' + str(pid) + '/status') 
```

# sparql - 关于 DBPedia Access

> ID：14712092
> 
> 赞同：3
> 
> 时间：2013-02-05T16:23:21.883
> 
> 标签：sparql, jena, dbpedia

我对 DBPedia 很陌生，我不知道如何以及从哪里开始。我对此进行了一些研究，据我了解，我们可以使用 SPARQL 查询语言（Apache Jena）访问数据。所以我开始下载[Ontology Infobox Properties](http://wiki.dbpedia.org/Downloads38#ontology-infobox-properties)的 .ttl 文件。之后我提取了这个文件，它几乎有 2GB。我的问题从这里开始没有一个编辑器无法打开这个文件。我访问此文件的示例程序在这里...

```
public class OntologyExample {
public static void main(String[] args) {
    FileManager.get().addLocatorClassLoader(
            OntologyExample.class.getClassLoader());
    Model model = FileManager
            .get()
            .loadModel("D:\\Dell XPS\\DBPEDIA\\instance_types_en.ttl\\instance_types_en.ttl");

    String q = "SELECT * WHERE { "
            + "?e <http://dbpedia.org/ontology/series> <http://dbpedia.org/resource/The_Sopranos>  ."
            + "?e <http://dbpedia.org/ontology/releaseDate> ?date"
            + "?e <http://dbpedia.org/ontology/episodeNumber>  ?number   "
            + "?e <http://dbpedia.org/ontology/seasonNumber>   ?season"
            + " }" + "ORDER BY DESC(?date)";

    Query query = QueryFactory.create(q);
    QueryExecution queryExecution = QueryExecutionFactory.create(query,
            model);
    ResultSet resultSet = queryExecution.execSelect();
    ResultSetFormatter.out(System.out, resultSet, query);
    queryExecution.close();
}
} 
```

所以这个程序的输入是那个 2GB 的文件。所以我只是运行了这个示例程序，它抛出了异常，比如

```
Exception in thread "main" com.hp.hpl.jena.n3.turtle.TurtleParseException: GC overhead limit exceeded
at com.hp.hpl.jena.n3.turtle.ParserTurtle.parse(ParserTurtle.java:63)
at com.hp.hpl.jena.n3.turtle.TurtleReader.readWorker(TurtleReader.java:33)
at com.hp.hpl.jena.n3.JenaReaderBase.readImpl(JenaReaderBase.java:119)
at com.hp.hpl.jena.n3.JenaReaderBase.read(JenaReaderBase.java:84)
at com.hp.hpl.jena.rdf.model.impl.ModelCom.read(ModelCom.java:268)
at com.hp.hpl.jena.util.FileManager.readModelWorker(FileManager.java:403)
at com.hp.hpl.jena.util.FileManager.loadModelWorker(FileManager.java:306)
at com.hp.hpl.jena.util.FileManager.loadModel(FileManager.java:258)
at jena.tutorial.OntologyExample.main(OntologyExample.java:18)

Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded
at java.util.Arrays.copyOfRange(Unknown Source)
at java.lang.String.<init>(Unknown Source)
at org.apache.jena.iri.impl.LexerPath.yytext(LexerPath.java:420)
at org.apache.jena.iri.impl.AbsLexer.rule(AbsLexer.java:81)
at org.apache.jena.iri.impl.LexerPath.yylex(LexerPath.java:711)
at org.apache.jena.iri.impl.AbsLexer.analyse(AbsLexer.java:52)
at org.apache.jena.iri.impl.Parser.<init>(Parser.java:108)
at org.apache.jena.iri.impl.IRIImpl.<init>(IRIImpl.java:65)
at org.apache.jena.iri.impl.AbsIRIImpl.create(AbsIRIImpl.java:692)
at org.apache.jena.iri.IRI.resolve(IRI.java:432)
at com.hp.hpl.jena.n3.IRIResolver.resolve(IRIResolver.java:167)
at com.hp.hpl.jena.n3.turtle.ParserBase._resolveIRI(ParserBase.java:198)
at com.hp.hpl.jena.n3.turtle.ParserBase.resolveIRI(ParserBase.java:192)
at com.hp.hpl.jena.n3.turtle.ParserBase.resolveQuotedIRI(ParserBase.java:183)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.IRI_REF(TurtleParser.java:737)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.IRIref(TurtleParser.java:680)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.GraphTerm(TurtleParser.java:496)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.VarOrTerm(TurtleParser.java:420)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.TriplesSameSubject(TurtleParser.java:150)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.Statement(TurtleParser.java:97)
at com.hp.hpl.jena.n3.turtle.parser.TurtleParser.parse(TurtleParser.java:67)
at com.hp.hpl.jena.n3.turtle.ParserTurtle.parse(ParserTurtle.java:49)
... 8 more 
```

我正在从我的 Eclipse 运行此代码，这里是我的 Eclipse .ini 首选项。

```
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms1024m
-Xmx2048m 
```

所以我的问题是

1.  我怎样才能访问这种大文件。
2.  如何以正确的方式使用 DBPedia。

所以请帮助我，我被困在这里。我正在做一个关于 DBpedia 的项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T01:01:28.897

您可以使用 Jena 的 ARQ 对 DBpedia 数据运行 SPARQL 查询，如果您要进行大量查询和数据处理，下载数据并在本地使用它很有用。要做到这一点，特别是对于像 DBpedia 这样大的数据，您可能不应该尝试将其加载到内存模型中，而是使用 TDB 和 Fuseki 来设置可以运行查询的 SPARQL 端点。这已在[此答案](https://stackoverflow.com/a/16610663/1281433)中针对不同的数据集进行了讨论。

但是，由于您才刚刚开始，使用[公共 DBpedia SPARQL 端点](http://dbpedia.org/sparql)可能要容易得多。在那里，您可以输入 SPARQL 查询并以各种格式检索结果。您问题中的查询格式有点错误，但很容易清理；清理和工作查询如下。

```
SELECT * WHERE {
    ?e <http://dbpedia.org/ontology/series> <http://dbpedia.org/resource/The_Sopranos>  .
    ?e <http://dbpedia.org/ontology/releaseDate> ?date .
    ?e <http://dbpedia.org/ontology/episodeNumber> ?number .
    ?e <http://dbpedia.org/ontology/seasonNumber> ?season .
}
ORDER BY DESC(?date) 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=SELECT+*+WHERE+%7B%0D%0A++++%3Fe+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2Fseries%3E+%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2FThe_Sopranos%3E++.%0D%0A++++%3Fe+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FreleaseDate%3E+%3Fdate+.%0D%0A++++%3Fe+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FepisodeNumber%3E+%3Fnumber+.%0D%0A++++%3Fe+%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2FseasonNumber%3E+%3Fseason+.%0D%0A%7D%0D%0AORDER+BY+DESC%28%3Fdate%29&format=text%2Fhtml&timeout=30000&debug=on)

DBpedia wiki 实际上有一整页关于在线访问 DBpedia [Accessing the DBpedia Data Set over the Web](http://wiki.dbpedia.org/OnlineAccess)，这将使您了解如何访问数据。wiki 上的另一个页面，[DBpedia 数据集](http://wiki.dbpedia.org/Datasets)将告诉您更多关于*可用*数据的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-02T17:50:26.983

我正在使用[TDB](http://jena.apache.org/documentation/tdb/)，您还有一些易于使用且比 Eclipse 快得多的命令行工具。[您可以从他们的下载页面](https://repository.apache.org/content/repositories/snapshots/org/apache/jena/apache-jena/2.10.2-SNAPSHOT/)下载最新版本。您可以使用`tdbloader2`将`.ttl`文件加载到存储中，然后`tdbquery`也可以在命令行或 Eclipse 中使用它来查询它，就像现在一样：

```
Dataset dataset = TDBFactory.createDataset( "path" );
Query query = QueryFactory.create( "SELECT * WHERE { "
        + "?e <http://dbpedia.org/ontology/series> <http://dbpedia.org/resource/The_Sopranos>  ."
        + "?e <http://dbpedia.org/ontology/releaseDate> ?date ."
        + "?e <http://dbpedia.org/ontology/episodeNumber>  ?number  . "
        + "?e <http://dbpedia.org/ontology/seasonNumber>   ?season ."
        + " }" + "ORDER BY DESC(?date)" );
QueryExecution qexec = QueryExecutionFactory.create( query, dataset );
ResultSet results = qexec.execSelect(); 
```

据我了解，您应该`.`在每个 SPARQL-triple 之后制作一个，只有最后一个是可选的。可能是命令行工具用完了堆空间。只需使用文本编辑器打开`tdbloader2`或应用程序并将标签更改为您喜欢的大小，例如：`tdbquery``-Xmx`

```
JVM_ARGS=${JVM_ARGS:--Xmx4096M} 
```

还要确保`JENAROOT`按照链接中的说明进行设置。

# r - 在 R 中标记 Y 轴

> ID：14712095
> 
> 赞同：0
> 
> 时间：2013-02-05T15:27:45.707
> 
> 标签：r

假设我需要将 x 和 y 的序列绘制为：

```
x <- seq(0, 10, by =0.001)
gx1 <- exp(-(x^2))
plot(x, gx1, type="l", lty=1, lwd=3,
xlab="x", ylab="G_b(x)",ylim=c(0,1)) 
```

但我想在 Y 轴上添加 $\bar{f}_k(x)$ 作为标签。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:53:40.180

尝试，

```
plot(x, gx1, type="l", lty=1, lwd=3, xlab="x", 
ylab=expression(bar(f)[b](x)),ylim=c(0,1)) 
```

我找到了解决方案

[将 LaTeX 放入 R 图中](https://stackoverflow.com/questions/1395105/getting-latex-into-r-plots)

克里斯托弗·杜波依斯

# php - 用于生成excel和硬输入的php代码

> ID：14712098
> 
> 赞同：0
> 
> 时间：2013-02-05T16:23:35.037
> 
> 标签：php, excel

```
 $column = str_replace(',',' ', $rows[address]);
        $column = addslashes($column);
        $column = str_replace("\n", " ",$column);
        $contents.= $column."\t";

        $contents.="\n";
    }
header("Content-type: application/ms-excel");
header("Content-Disposition: attachment; filename=Confirmed.xls");
print $contents; 
```

如何在不替换“/n”的情况下放置地址字段，因为它是一个地址字段，我想以一种好的方式在单元格中显示它......替换“返回”使我的地址成为单行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T16:32:27.890

创建电子表格可能会遇到许多问题，当我遇到此类问题时，我最终将地址字段拆分为多个列。我很久以前写了一篇关于这个的文章希望这对[http://www.anchorx.com/ali/2011/02/27/create-spreadsheet-with-php/有帮助](http://www.anchorx.com/ali/2011/02/27/create-spreadsheet-with-php/)

# php - 插入网站帖子时出现mysql语法错误

> ID：14712109
> 
> 赞同：0
> 
> 时间：2013-02-05T16:23:55.610
> 
> 标签：php, mysql, sql, database

我正在编写网站的服务器端，我用它来存储帖子

```
if(!(mysql_query("INSERT INTO `post-data`(`site`, `source`, `meta-desc`, `title`, `figure`, `post`,`date`, `tags`, `category`) VALUES ('$this->site','$url','$this->meta_desc','$this->title','$this->figure',htmlentities($this->body),NOW(),'','')"))){
            echo mysql_error();
            die("DB_in_post Error");} 
```

我没有问题，因为当我测试示例帖子时出现 mysql 语法错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ' 附近使用的正确语法
> 
> 作为一个人'在第 20 行

当我使用 htmlentities 我看到这个错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'hello'、'world'、'foo' => 'bar' 附近使用的正确语法）；
> 
> 如果你想'在线

[Post_Link](http://s17.postimage.org/j3ahq6ljj/Capture.jpg)这是来自帖子部分出错的图像，该帖子是关于编码的

所以知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:25:48.943

看起来像您调用的引用问题`htmlentities()`（我改为`mysql_real_escape_string()`）

```
"INSERT INTO `post-data`
     (`site`, `source`, `meta-desc`, `title`, `figure`, `post`,`date`, `tags`, `category`) 
VALUES (
    '$this->site',
    '$url',
    '$this->meta_desc',
    '$this->title',
    '$this->figure',
    '" . mysql_real_escape_string($this->body) ."',
    NOW(),
    '',
    ''
)" 
```

# android - 意图查询/过滤器似乎有问题

> ID：14712110
> 
> 赞同：1
> 
> 时间：2013-02-05T16:23:59.800
> 
> 标签：android, android-manifest, intentfilter

TL：博士；版本：

*   清单中有 2k 行，一个活动有 4 个意图过滤器，50 个 mimeTypes，400 个文件扩展
*   应用程序通过操作 SEND 打开与打印相关的每个文件（从 txt 到 xls、tiff、vcs...）
*   但没有不可打印的文件（视频、apk 等）

*   从第 3 方资源管理器打开单个文件时，过滤器正常工作

*   当对 MULTIPLE 文件 (SEND_MULTIPLE) 执行相同操作时，如果 ONE 文件匹配，过滤器将正常工作

**问题：**

使用时

```
List<ResolveInfo> resolveList = ctx.getPackageManager().queryIntentActivities(i, PackageManager.MATCH_DEFAULT_ONLY); 
```

在包含视频（即不可打印）的 Uri 应用程序中，提供了我的应用程序，即使清单中的意图过滤器应该过滤掉。（就像从 3rd 方应用程序打开文件时一样。）

请参阅文档：http: [//developer.android.com/reference/android/content/pm/PackageManager.html#MATCH_DEFAULT_ONLY](http://developer.android.com/reference/android/content/pm/PackageManager.html#MATCH_DEFAULT_ONLY)

...所以清单必须是正确的，但查询似乎没有过滤... =/

有什么建议或想法吗？

# c++ - 如何定义未定义大小的向量

> ID：14712112
> 
> 赞同：5
> 
> 时间：2013-02-05T16:24:03.630
> 
> 标签：c++, vector, size

我是一个初学者，我想在 cpp 中编写一个循环，其中一个向量的大小未知，由 if 函数确定。基本上我想将此 MATLAB 代码转换为 cpp 代码：

```
v(1)=A(1);
for i=2:length(A)
     if (abs((A(i)-v))>10^(-5))
       v=[v;A(i)];      
     end
end 
```

代码中很清楚，在循环开始之前，v的大小并没有确定，我怎么在cpp中写这个代码呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:28:09.707

在 C++ 中，如果我们想要一个可以添加值并在运行时扩展的值容器，我们使用`std::vector`. 如您所见，它是根据您的目的恰当地命名的。matlab 行`v=[v;A(i)];`，它连接来自`A`with的值`v`，等效于使用[`std::vector::push_back`](http://www.cplusplus.com/reference/vector/vector/push_back/)函数：`v.push_back(A[i]);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:28:17.710

标准 C++ 库有一个类[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)，如注释之一所示。该类`vector`没有预定义的大小；当您添加成员对象时，向量的大小会动态增长。总体上了解标准 C++ 库，尤其是向量，可能值得一读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-08T14:45:57.853

以下代码可用于定义未定义大小的向量。

```
vector<string> v; 
```

请记住，因为`<string>`您需要以下头文件：

```
#include<string> 
```

毕竟，您可以使用以下`push_back()`功能推送元素 -

```
v.push_back('a');
v.push_back('b');
v.push_back('c');
v.push_back('c'); 
```

向量还有一些其他有用的功能，您可以关注 -

```
front();
back();
begin();
end();
rbegin();
rend();    
max_size();
capacity();
resize();
empty();
at(n); 
```

阅读这些功能及其用法的详细信息。

# file - 读取文件内容并使用 ksh 拆分

> ID：14712117
> 
> 赞同：0
> 
> 时间：2013-02-05T16:24:17.057
> 
> 标签：file, split, ksh

我们使用 ksh 脚本来安装一个产品。

我有另一个配置文件，我需要从我的主脚本中读取这个配置文件

配置文件内容：

> BPWS_Instance_1:Linux:x86_64:YES:/hosting/download:BPWS_Linux_64.jar paymon_Instance_1:Linux:i686:YES:/hosting/download:paymon_Linux_32.jar

所以现在在我的主脚本中读取配置文件如果我有**BPWS_Instance_1**（这是实例名称），它正在Linux OS 64 位处理器（**Linux:x86_64 ）上运行（** **YES** = *Running* ），那么我需要得到来自位置**/hosting/download**的 BPWS_Linux_64.jar 文件。

 ****有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:35:25.567

尝试这样的事情

#!/bin/ksh

CONF_FILE=你的配置文件路径

在阅读 LINE 时

做

```
echo "${LINE}" | grep "^BPWS_Instance_1:Linux:x86_64:YES:" >/dev/bull 2>&1

if [[ $? -eq 0 ]] then

    DOWNLOAD_PATH=`echo $LINE | cut -d: -f5`

    DOWNLOAD_FILE=`echo $LINE | cut -d: -f6`

    # Do your copy there
    # cp "${DOWNLOAD_PATH}/${DOWNLOAD_FILE} your path
fi 
```

完成<“$CONF_FILE”****

# cakephp - CakePHP 2.3 控制台模式：无法加载所选模式

> ID：14712118
> 
> 赞同：1
> 
> 时间：2013-02-05T16:24:24.920
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我的 CakePHP 2.3 应用程序有许多插件，我使用内置的模式迁移来维护数据库表结构。

其中一些工作没有问题，但在其他人我收到以下错误：

```
Richs-MacBook-Pro:mhd rich$ ./Console/cake schema update -p PipPages
Welcome to CakePHP v2.3.0 Console
---------------------------------------------------------------
App : mhd
Path: /Users/rich/sites/mhd/
---------------------------------------------------------------
Cake Schema Shell
---------------------------------------------------------------
The chosen schema could not be loaded. Attempted to load:
File: /Users/rich/sites/mhd/Plugin/PipPages/Config/Schema/schema.php
Name: PipPage 
```

我只想指出几点。我的插件名为`PipPages`. 在输出中，它说它正在尝试加载架构`PipPage`- 我应该以不同的方式命名我的插件吗？

我已经三重检查了`schema.php`该插件是否存在该文件`PipPages`，但也许应该将该插件命名`PipPage`为与模式外壳一起使用？

在书中，他们给出了一个复数示例：[http ://book.cakephp.org/2.0/en/plugins.html#plugin-configuration](http://book.cakephp.org/2.0/en/plugins.html#plugin-configuration)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:24:12.287

似乎 CakePHP 需要一个单一的插件名称，但要解决这个问题，您可以将`name`参数传递到 Schema Shell 中：

`./Console/cake schema update -p PipPages PipPages`

这似乎允许更新运行而没有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T11:33:39.137

我刚刚遇到了与未加载模式有关的类似问题。与插件无关，一般只是更新模式。

```
bash-3.2$ ./Console/cake schema update -s 14

Welcome to CakePHP v2.4.5 Console
---------------------------------------------------------------
App : app
Path: /var/sites/e/example.com/public_html/app/
---------------------------------------------------------------
Cake Schema Shell
---------------------------------------------------------------
The chosen schema could not be loaded. Attempted to load:
File: /var/sites/e/example.com/public_html/app/Config/Schema/schema_14.php
Name: App 
```

`schema_14.php`是我想升级到的版本，但我想我也会尝试使用不同的版本。由于某种原因`schema_10.php`实际上有效。归结为已将错误的类名添加到模式文件中。

**schema_10.php**

```
class AppSchema extends CakeSchema { 
```

**schema_14.php**

```
class Schema extends CakeSchema { 
```

重命名`Schema`为`AppSchema`in`schema_14.php`成功了。

两者都是使用 CakePHP v2.4.5 生成的。我能想到的唯一会导致这种情况的是在生成模式时`bake`从不同的目录（即使用不同的`-app <app>`参数）调用。

# security - 基于声明的身份验证是否比基本身份验证更安全？

> ID：14712119
> 
> 赞同：1
> 
> 时间：2013-02-05T16:24:29.447
> 
> 标签：security, basic-authentication, saml, claims-based-identity

我一直是服务领域的开发人员，使用基本身份验证（与 SSL 结合使用以保护传输）或使用基于声明的身份验证（在 .NET 中使用 WIF）。

我认为这个问题有一个基于构成不同身份验证机制的整体*强度*因素的明确答案。这不是基本身份验证的简单性与 CBA 拥有 SSO 和集中式身份验证存储的能力的比较。

我听到的反对基本身份验证的论点是，您无法真正识别用户是他们所说的那个人。如果凭据被泄露，则可能会被欺骗。显然，对于 CBA，签署 SAML 令牌以保证发行和身份使得这是一种更彻底的授权方法？但是，如果我无论如何都拥有用户的凭据，我是否还不能通过 CBA 进入该服务？

这是真的吗？CBA 是一种更彻底、更安全的用户身份验证方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T16:20:28.173

CBA 可能更安全，但这取决于 IDP 端的配置。如果 IDP 仅需要用户名和密码来颁发令牌，那么由于您解释的原因，它似乎并不更安全。

我将在这里使用 AD FS 作为 IDP 来说明它如何比仅进行基本身份验证更安全。ADFS 可以配置为禁用不安全的端点。您还可以将 AD FS 配置为在发出声明之前执行基于 2FA 或 MFA 的身份验证。在这些情况下，因为获得声明更难，而且如果应用程序只能由 CBA 访问，它确实变得更加安全。

CBA 的优势不仅仅是可以强制执行的更安全的身份验证方法。它对开发人员的好处在于通过将用户属性卸载到 IDP 来简化获取用户属性。我相信您已经知道这一点，但对于该线程的未来读者来说，“ [基于声明的身份和访问控制指南](http://claimsid.codeplex.com/)”可能是一本好书。

# javascript - Windows 应用商店应用程序 - 从辅助磁贴启动时执行单个任务

> ID：14712120
> 
> 赞同：5
> 
> 时间：2013-02-05T16:24:32.333
> 
> 标签：javascript, windows-8, microsoft-metro, windows-store-apps, winjs

我有一个创建辅助磁贴的 Windows 应用商店应用程序。单击磁贴时，我希望应用程序执行，实际上是一个离线功能（即，我不想回到应用程序，但希望应用程序做某事然后退出）。所以在这种情况下，我想启动电子邮件客户端，例如。这是我到目前为止的位置：

```
app.addEventListener("activated", function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {

        if (args.detail.arguments !== "") {
            // Activation arguments are present that 
            // were declared when the secondary tile was pinned to Start.
            args.setPromise(WinJS.UI.processAll().done(function () {
                var emailaddress = args.detail.arguments;
                var promise = Email.SendNewMail.sendEmail(emailaddress);
                //promise.complete();
                return;
            }));

        } else if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }
... 
```

电子邮件功能在这里：

```
 sendEmail: function sendEmail(addess, subject, body) {
        var mailto = new Windows.Foundation.Uri("mailto:?to=" + addess + "&subject=" + subject + "&body=" + body);
        return Windows.System.Launcher.launchUriAsync(mailto);
    } 
```

我目前得到的错误是“对象已与其客户端断开连接” - 我认为这是由程序在承诺完成之前退出引起的。在 WInRT 中如何实现这种行为？

更新：

我从 MS 那里得到了反馈，如果这是否可行，他们的回应是肯定不支持的，因为以编程方式退出应用程序违反了认证要求 3.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T05:41:33.707

辅助磁贴似乎并非旨在启动第三方应用程序：

> 辅助磁贴使用户能够将特定内容和深层链接（对固定应用程序内部特定位置的引用）从 Windows 应用商店应用程序 [原文如此] 推广到“开始”屏幕。

[来源：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465372.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465372.aspx)]

我尝试了多种方法来纠正您的问题，但这里似乎存在时间问题。不调试时，您的上述代码（有或没有像`then`or之类的 Promise 完成函数调用`done`）对我来说每次都会失败，无论您是否将代码置于就绪、加载或激活事件中。

然而，在我的测试中，通过以几种不同的方式包装你的启动功能，我能够让它在*没有错误的情况下工作：*

1.  超时使用`setTimeout`超过 1 秒的任何超时
2.  使用消息对话框`Windows.UI.Popups.MessageDialog`

两者都以您的承诺完成回调结束，并调用`window.close();`以退出应用程序。

使用[Eight.js](http://eight.codeplex.com)作为消息传递路径的示例：（似乎是最干净的可用解决方案，但显然不会在后台执行启动，也不是最用户友好的）：

```
Eight.Message.confirmAsync("Send the email?", function (doSend) {
    if (!doSend) return;

    Email.SendNewEmail.sendEmail(emailaddress).done(function (e) {
        window.close();
    });
}); 
```

[**注意：**我认为这两种解决方案都很老套，我相信你会同意的。实际上，没有人在后台启动。我在任何地方都找不到任何文档来支持在不启动您的应用程序的情况下执行此操作。对我来说，这似乎是一个错误，如果可以的话，我会尝试打开一个技术支持事件以获得更清洁的解决方案。如果没有，您可以尝试一些真正的 Microsoft 人员居住的[Windows Store Apps 论坛。](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/threads)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:32:10.210

那么你可以使用 的`then()`来[`launchUriAsync()`](http://msdn.microsoft.com/en-US/library/windows/apps/hh701480)处理应用程序：

```
Email.SendNewMail.sendEmail(emailaddress).then(function (success) {
    if (success) {
        window.close()
    } else {
        // Display error message
    }
}); 
```

# iphone - 阅读 iOS Bundle 信息

> ID：14712121
> 
> 赞同：1
> 
> 时间：2013-02-05T16:24:32.493
> 
> 标签：iphone, ios, ipad, bundle

我想知道iOS 设备上外部应用程序的当前应用程序中的**捆绑版本/id 是什么。**我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:27:58.520

如果其他应用程序是您开发的，您可以使用[自定义 URL 方案](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)来确定是否安装了特定版本。

对于您要检查的每个版本，您必须将 URL 方案添加到您的其他应用程序。这个想法是 URL 方案仅包含当前和以前版本的 URL 方案。

*1.0*版只有`com.you.your-other-app.1.0`. 然而，
版本*1.2*`com.you.your-other-app.1.0`有两个或多个 URL 方案：和`com.you.your-other-app.1.2`.

然后，您可以使用以下命令检查是否在任何应用程序中安装了该应用程序的特定版本：

```
BOOL is10Installed = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"com.you.your-other-app.1.0://"]];
BOOL is12Installed = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"com.you.your-other-app.1.2://"]]; 
```

**更新：**
我在我的两个相互通信的应用程序中使用它，以确定是否支持特定功能。这可能非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:28:31.370

您处于应用沙盒中。您无法与除您的应用程序之外的其他应用程序进行通信。

要获取正在运行的应用程序的版本：

```
[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"] 
```

# solr - 有多个 SOLR 战争文件共享同一个 solr_home 是错误的吗？

> ID：14712128
> 
> 赞同：2
> 
> 时间：2013-02-05T16:24:43.043
> 
> 标签：solr

我们有两个 JBOSS 服务器，每个服务器都有一个 SOLR 战争文件 (SOLR 3.6.1)。它们都共享相同的 solr_home 目录和相关的子目录，包括数据和索引目录。在任何时候，一个或两个 war 文件都可能正在处理搜索或上传（使用 DataImportHandler）。我们在处理上传时间歇性地得到锁定异常，例如

org.apache.lucene.store.LockObtainFailedException：锁获取超时：NativeFSLock@/sharedDirectory/blah/blah/solr_home/././myCoreData/index/write.lock

我们还遇到了正在解决的 OutOfMemory 错误。OutOfMemory 错误可能会导致 Lock 错误，所以我不确定修复 OutOfMemory 问题是否会解决 Lock 问题，或者我们的方法是否错误？

让两个 SOLR 应用程序共享相同的 solr_home、锁定文件等是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:46:00.377

这是无效的。

您的实例将一直踩着对方的脚。改为查看[SolrCloud](http://wiki.apache.org/solr/SolrCloud)复制（不是分片）（Solr 4+）。然后，您将在每个核心中拥有完整的数据集。

# android - Android：以 UDP/TCP 接收数据

> ID：14712129
> 
> 赞同：2
> 
> 时间：2013-02-05T16:24:43.437
> 
> 标签：android, tcp, udp, wifi

在我的 Android 应用程序中，我必须从 Wifi 连接（UDP 和 TCP）获取数据。

这是我的 UDP 代码：

```
try {
                // Create new UDP-Socket
                socket = new DatagramSocket(SERVERPORT);

                while (isRunning) {

                    byte[] buf = new byte[50];
                    DatagramPacket packet = new DatagramPacket(buf,
                            buf.length);
                    socket.receive(packet);
                    String str = new String(buf, 0, packet.getLength());
                    packet.setLength(buf.length);

                    Message msg = handler.obtainMessage();
                    Bundle b = new Bundle();
                    b.putString("getStr", str);
                    msg.setData(b);
                    handler.sendMessage(msg);

                } 
```

对于 TCP ：

```
try {
                s = new Socket(SERVERIP, SERVERPORT);

                BufferedReader in = new BufferedReader(
                        new InputStreamReader(s.getInputStream()));

                while (!s.isClosed()) {

                    String strTcp = in.readLine().toString();
                    Message msg = handler.obtainMessage();
                    Bundle b = new Bundle();
                    b.putString("getStr", strTcp + "\n");
                    msg.setData(b);

                    handler.sendMessage(msg);

                } 
```

它工作正常，但我的问题是：

我的 Wifi 设备发送一个数据序列（总是相同的字符串序列），当我在 TCP 中收到 1250 个字符串时，我在 UDP 中只收到 400 个字符串。UDP 通常不是比 TCP 工作得更快吗？

我在 iPhone 上尝试了相同的测试，它工作正常，UDP 获得与 TCP 一样多的值。

所以有什么问题？阻塞 UDP 函数 receive() 有问题吗？

谢谢！

**编辑**

我已经用不同的设备测试了代码：UDP 在三星 Galaxy Tab (Android 3.1) 上运行良好，我收到所有数据，但在其他设备 (Android 4.0) 上我只收到 1/3 的数据。

好像是硬件问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:14:59.930

TCP和UDP之间的主要区别在于TCP是：

> .. 提供从一台计算机上的程序到另一台计算机上的另一个程序的可靠、有序的八位字节流传递。

[维基百科 - TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)

而UDP：

> .. 使用简单的传输模型和最少的协议机制。[1](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)它没有握手对话，因此将底层网络协议的任何不可靠性暴露给用户程序。由于这通常是基于不可靠媒体的 IP，因此无法保证交付、订购或重复保护。

[维基百科 - UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)

换句话说，如果您使用 UDP/数据报套接字，您必须自己实现握手/纠错。我还注意到在您的代码中，您为接收数据报套接字分配了一个大小为 50 的缓冲区。如果套接字接收到溢出缓冲区的数据，它将简单地返回一个 50 字节的完整缓冲区并忽略其余部分；溢出的数据丢失。

当您在 iPhone 上尝试它时，您确定没有在幕后为您进行某种纠错吗？（我没有iPhone开发经验）

# javascript - 混合 Primefaces 3.5 和 Richfaces 4.3，捆绑的 jQuery 会不会冲突？

> ID：14712130
> 
> 赞同：1
> 
> 时间：2013-02-05T16:24:46.017
> 
> 标签：javascript, jquery, jsf-2, primefaces, richfaces

我正在开发一个 JSF 项目，我必须在其中集成两个组件库。在上一个版本中，主要问题是 jquery.js 版本和 jQuery 中的附加实现。我查看了 PrimeFaces 和 RichFaces 库的新版本，我注意到它们都具有相同的 jquery.js 版本。我可以在没有冲突的情况下同时使用两者吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T18:58:57.393

我尝试同时使用 Richfaces 4.3.2 和 Primefaces 3.5，因为它们都包含相同的 jQuery 版本 1.8.3，但是非常**失败**。

如果 head-script 命令的检查没有帮助。

这个观察可能会对您有所帮助：问题甚至仍然存在，因为我完全删除了所有 primefaces 组件；删除 primefaces.jar（或回到 primefaces 3.3.1）确实**解决**了问题。

# google-chrome - Chrome 是否支持音频元素的 oncanplaythrough？

> ID：14712131
> 
> 赞同：0
> 
> 时间：2013-02-05T16:24:49.030
> 
> 标签：google-chrome, html5-audio

我在 Ubuntu 12.04 上使用 Chrome for Linux，一切都是最新的。Chrome 似乎不支持 oncanplaythrough DOM 级别 0 事件，至少来自 JavaScript。我尝试使用`new Audio()`and创建音频对象`document.createElement('audio')`。该事件在 Firefox 中有效，就像它应该的那样，我在任何地方都找不到其他人有相同问题或这是一个问题的信息，所以它是一个错误吗？DOM level 2 'canplaythrough' 事件工作得很好，但我需要能够清除匿名事件回调，所以这对我来说不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:59:34.323

这可能与什么样的音频格式以及您如何提供它有关。

不同的浏览器对如何处理网络中的文件有不同的要求。例如，可能需要 HTTP 范围标头支持，或者音频文件可能需要以特殊方式设置持续时间标头。

我已经看到这个事件被触发了，所以我很确定你可以得到它，至少在特定条件下是这样。

也许您可以阐明如何构建和提供音频文件？也许是一个 jsfiddle.net 可重复的例子？

一些背景：

[http://www.gamasutra.com/blogs/ChrisKhoo/20120618/172573/The_HTML5_audio_troubleshooting_guide.php](http://www.gamasutra.com/blogs/ChrisKhoo/20120618/172573/The_HTML5_audio_troubleshooting_guide.php)

# c# - Live Connect - 异步和等待阻塞 UI

> ID：14712132
> 
> 赞同：1
> 
> 时间：2013-02-05T16:24:52.243
> 
> 标签：c#, windows-phone-8, async-await, live-connect-sdk

现在我想我明白为什么会发生这种情况了，所以我想我的问题是如何修改代码以按照我的意愿行事。

首先是代码。

```
private void btnLiveSignin_Click(object sender, RoutedEventArgs e)
{
    var LoggedIn = Login();

    busy.Visibility = System.Windows.Visibility.Visible;  // Display the please wait message

    if (LoggedIn.Result)
    {
        // Do something 
    }
}

public async Task<bool> Login()
{
    try
    {
        var e = await lac.InitializeAsync(Scopes);

        if (e.Status == LiveConnectSessionStatus.Connected)
        {
            client = new LiveConnectClient(e.Session);

            // do some stuff now that we are connected

            return true;
        }
        else
        {
            // not connected so do something

            return false;
        }
    }
    catch (Exception ex)
    {
        return false;
    }
} 
```

基本上，当用户单击一个按钮时，它会将他们登录到他们的 Windows 实时帐户，并且在发生这种情况时会出现一条消息，要求用户请稍候。

您可以猜到 UI 锁定，因此消息永远不会出现。如何更改它以使 UI 不锁定？

我在使用事件之前使用 windows phone 7.5 完成了此操作，因为 sdk 没有使用异步，并且效果很好。这是否需要混合使用异步和事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:35:49.637

您的处理程序缺少的是`async`and `await`。

因为您将`Login`方法标记为 async 并使其返回任务，所以您已将其设置为*awaitable*，这样就可以将事件处理程序重写为：

```
private async void btnLiveSignin_Click(object sender, RoutedEventArgs e)
{
    var loginTask = this.Login();

    busy.Visibility = System.Windows.Visibility.Visible; 

    await loginTask;

    if(loginTask.Result)
    {
       // Do something 
    }
} 
```

将事件处理程序标记为`async`向调用者指示它将异步完成。什么`await`是“信号”，您希望在继续之前等待任务完成。这意味着事件处理程序可以将“不完整”的结果返回给调度程序（UI 线程），调度程序将在后台运行而不会中断 UI。

作为一项规则，一旦你开始在你的代码中使用`async`和`await`，你应该尝试“从头到尾”使用它们。

`async`并且`await`在编译器如何将它们转换为“真实”代码方面有点曲折，所以如果您需要阅读更多有关该主题的内容以完全理解它们，请不要感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:33:30.360

您需要`await`完成任务而不是进行阻塞等待（这是想要`Result`的）。

```
private async void btnLiveSignin_Click(object sender, RoutedEventArgs e)
{
    busy.Visibility = System.Windows.Visibility.Visible;  // Display the please wait message

    if(await Login())
    {
       // Do something 
    }
} 
```

# javascript - 获取html输入标签值

> ID：14712135
> 
> 赞同：0
> 
> 时间：2013-02-05T16:25:03.957
> 
> 标签：javascript, html

为什么这段代码不起作用？是否需要“id”属性？

```
<html>
<head>
<script language="JavaScript">
  function pprint(){
   var a = tf.value;
   document.write(a);
     }
 </script>
</head>
<body>
<input type="text" name="tf"  value="Test">
<input type="button" onClick="pprint()" value="print" >
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:31:37.110

在表单中，`name`属性需要用 ( , ) 对填充`$_POST`或`$_GET`全局变量。`name``value`

Javascript 不会仅从名称中识别元素。因此，您最好使用该`id`属性。

```
<input type="text" name="tf" id="tf"  value="Test"> 
```

而在你的 Javascript 中，你可以直接调用`document.getElementById('tf')`来获取元素。

像这样的东西。

```
document.write(document.getElementById('tf').value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:28:55.137

两个变化。'tf' 是一个 'id' 并获取 javascript 中的元素。还有上面建议的“警报”。

```
<html>
<head>
<script language="JavaScript">
  function pprint(){
   var tf = document.getElementById('tf');
   var a = tf.value;
   alert(a);
  }
 </script>
</head>
<body>
<input type="text" id="tf"  value="Test">
<input type="button" onClick="pprint()" value="print" >
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:39:02.430

> 为什么这段代码不起作用？

Javascript 并没有像您期望的那样为您提供准备好使用的元素句柄。您必须通过其名称、ID、标签名称或通过其父表单（如果有的话）来获取元素。

> 是否需要“id”属性？

不，不需要 ID 来获取元素的句柄。按名称获取元素的示例：

```
function pprint(){
    var a = document.getElementsByName("tf")[0].value;
    console.log(a);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T16:53:10.470

在使用 JavaScript 时，如果你想访问任何元素，你可以选择使用：

1.  document.getElementById (id)
2.  document.getElementByName]（名称）

您可以使用以下代码：

```
<script language="JavaScript">
  function pprint(){
    // If you want to use element Id
      var a = document.getElementById('tf').value;
      document.write(a);
    // If you want to access by element name
      var b = document.getElementsByName('tf')[0].value;
      document.write(b);
 }
 </script> 
```

[JsFiddle 上的工作演示](https://jsfiddle.net/73G2R/3/)

1.  [W3 学校上的 document.getElementById](https://www.w3schools.com/jsref/met_doc_getelementbyid.asp)
2.  [W3 学校上的 document.getElementByName](https://www.w3schools.com/jsref/met_doc_getelementsbyname.asp)

# c# - 获取加载 XDocument 的位置

> ID：14712140
> 
> 赞同：0
> 
> 时间：2013-02-05T16:25:13.573
> 
> 标签：c#, linq-to-xml

我`XDocument`目前正在使用并试图找到最初加载文档的属性：

例如，这将加载位于 url 的文件：

```
XDocument doc = XDocument.Load(url); 
```

为了节省，我需要做：

```
XDocument.Save(url) 
```

我可能需要传递`doc`给另一个类中的另一个方法并将其保存回该位置而不传递 URL。

'url' 值是否存储在 doc 对象中的任何位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:33:16.290

使用该[`XObject.BaseUri`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xobject.baseuri.aspx)物业。

但不要将其设置为`null`，您必须使用 set 加载文档`LoadOptions.SetBaseUri`：

```
XDocument doc = XDocument.Load(url, LoadOptions.SetBaseUri ); 
```

# c# - 在 asp:Calendar 中显示周数

> ID：14712143
> 
> 赞同：1
> 
> 时间：2013-02-05T16:25:21.530
> 
> 标签：c#, asp.net

有没有更简单的方法在 asp:Calendar 控件中显示周数？我找到[了这篇](http://www.codeproject.com/Articles/24183/Adding-week-numbers-to-ASP-NET-Calendar-Control)文章，但它是 2008 年的帖子。认为现在可能有更简单的方法吗？

我正在使用 asp.net c# 4.0 进行开发。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:32:01.710

您可以使用该`DayRender`事件并将星期数添加到单元格中：

```
protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
    int weeknum = CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(
            e.Day.Date,
            CultureInfo.CurrentCulture.DateTimeFormat.CalendarWeekRule,
            CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek
    );
    e.Cell.Controls.Add(new LiteralControl(string.Format("({0})", weeknum)));
} 
```

如果这还不够可爱，因为它总是将星期数添加到单元格中，请使用[您的链接](http://www.codeproject.com/Articles/24183/Adding-week-numbers-to-ASP-NET-Calendar-Control)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:29:18.100

相同的语法应该仍然有效。请记住，不同文化中的周计算方式不同，如果您看到第 53 周，则没有错误！

```
using System.Globalization;

CultureInfo cultInfo = CultureInfo.CurrentCulture;
int weekNumNow = cultInfo.Calendar.GetWeekOfYear(DateTime.Now,
                         cultInfo.DateTimeFormat.CalendarWeekRule,
                         cultInfo.DateTimeFormat.FirstDayOfWeek); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:20:12.143

我已经设法使该代码也可以更改周数，这是代码：

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        eventsDayView.DataLoad(DateTime.Now);
        calendar.SelectedDate = DateTime.Now;
        calendar.TodaysDate = DateTime.Now;
        calendar.VisibleDate = DateTime.Today;
        addWeekNumberColumn();
    }
}

private void addWeekNumberColumn()
{
    // Get the date shown in the calendar control
    DateTime curMonth = calendar.VisibleDate;

    // Find first day of the current month
    curMonth = Convert.ToDateTime(curMonth.Year.ToString() + "-" + curMonth.Month.ToString() + "-01");

    // Build javascript
    string jscript = "<script type='text/javascript'> addWkColumn('" + calendar.ClientID + "', " + getISOWeek(curMonth).ToString() + ");</script>";

    // Add script to page for execution of addWkColumn javascript function
    Page.ClientScript.RegisterStartupScript(this.GetType(), "AddWeeknumbers", jscript);
}

// Helper function to find ISO week
private int getISOWeek(DateTime day)
{
    return System.Globalization.CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(day, System.Globalization.CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
}

protected void calendar_OnVisibleMonthChanged(object sender, MonthChangedEventArgs e)
{
    calendar.VisibleDate = e.NewDate;
    addWeekNumberColumn();
} 
```

ASP：

```
<script type="text/javascript">
        function addWkColumn(tblId, wkStart) {
            var tbl = document.getElementById(tblId);
            var tblBodyObj = tbl.tBodies[0];
            for (var i = 0; i < tblBodyObj.rows.length; i++) {
                // Month Header
                if (i == 0) {
                    // Add extra colspan column
                    tblBodyObj.rows[i].cells[0].colSpan = 8;
                }
                // Week Header
                if (i == 1) {
                    // Add week column headline
                    var newCell = tblBodyObj.rows[i].insertCell(0);
                    newCell.innerHTML = 'wk';
                    newCell.style.fontSize = '8px';
                    newCell.style.fontWeight = 'bold';
                    newCell.style.verticalAlign = 'bottom';
                    newCell.style.backgroundColor = '#ffffee';
                }
                // Normal row
                if (i >= 2) {
                    // Add the weeknumbers 
                    var newCell = tblBodyObj.rows[i].insertCell(0);
                    newCell.innerHTML = wkStart;
                    wkStart += 1;
                    if (wkStart == 53) {
                        wkStart = 1;
                    }
                    newCell.style.fontSize = '8px';
                    newCell.style.backgroundColor = '#ffffee';
                }
            }
        }
    </script>

<asp:Calendar ID="calendar" runat="server" Font-Names="Tahoma" Font-Size="11px" NextMonthText="&raquo;"
                                                    PrevMonthText="&laquo;" SelectMonthText="&raquo;" SelectWeekText="&rsaquo;" CssClass="myCalendar"
                                                    BorderStyle="None" CellPadding="1" OnSelectionChanged="calendar_SelectionChanged" OnDayRender="calendar_dayrender"
                                                    meta:resourcekey="calendarResource1" FirstDayOfWeek="Monday" OnVisibleMonthChanged="calendar_OnVisibleMonthChanged">
                                                    <DayHeaderStyle CssClass="myCalendarDayHeader" />
                                                    <DayStyle CssClass="myCalendarDay" />
                                                    <NextPrevStyle CssClass="myCalendarNextPrev" />
                                                    <OtherMonthDayStyle ForeColor="Gray" />
                                                    <SelectedDayStyle Font-Bold="True" />
                                                    <SelectorStyle CssClass="myCalendarSelector" />
                                                    <TitleStyle CssClass="myCalendarTitle" />
                                                    <TodayDayStyle ForeColor="Red" Font-Bold="True" />
                                                </asp:Calendar> 
```

# c# - 从数组进行绑定更新

> ID：14712147
> 
> 赞同：0
> 
> 时间：2013-02-05T16:25:43.000
> 
> 标签：c#, .net, wpf, arrays, data-binding

我不确定数组是否真的是这里的问题，但我有一个矩形，当引发 MouseUp 事件时，我想将它从窗口的一侧移动到另一侧。我将此矩形绑定到一个数组元素，并且 MouseUp 事件处理程序方法更改了该数组的值。我知道处理程序方法可以正常工作，因为它可以很好地拉出一个消息框，只是不切换矩形的位置。

注意：数组是必须的，这只是测试这些概念的代码，不是我的实际项目。

解决此问题的最简单方法也将不胜感激。

C#代码：

```
namespace WPFTestingApplication
{
    public static class GridProperties
    {
        public static int[] gridColumn = { 0 };
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Rect_MouseUp_1(object sender, MouseButtonEventArgs e)
        {
            GridProperties.gridColumn[0] = 1;
        }
    }
} 
```

XAML 代码：

```
<Window x:Class="WPFTestingApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WPFTestingApplication"
        Title="MainWindow" Height="200" Width="400">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Rectangle Name="Rect" Grid.Column="{Binding [0], Source={x:Static local:GridProperties.gridColumn}, Mode=OneWay}" Fill="DarkGray" Margin="5" MouseUp="Rect_MouseUp_1"/>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:31:18.440

Okay, so here's where we have to put away the Windows Forms mentality (heh). In WPF you need to think about the separation between *functionality* and *appearance*. That is, you allow your code (c#) to determine the functionality aspect, and then do some templating in xaml to give it the appearance.

The functionality you actually want is that of a **Thumb**. A thumb already has the dragging functionality built into it, so you just need to create a template to give it it's appearance.

First take a look at this:

[http://wpf.2000things.com/tag/dragging/](http://wpf.2000things.com/tag/dragging/)

I would approach this by creating your own class that derives from thumb like this:

```
// Although the visual template we're applying is a circle,
// the FUNCTIONALITY is primarily that of a thumb. So that's what 
// we'll use. A thumb is essentially a 'draggable thing'.
class DragCircle : System.Windows.Controls.Primitives.Thumb
{      
    public DragCircle()
    {
        // Thumbs _track_ movement, but they don't actually move. We have to handle this ourselves.
        // We do this by setting the Canvas.Left/Canvas.Top attached properties. Of course, for this
        // to work our DragCircle has to be placed on a Canvas, otherwise there's no-one to read the property.
        // IMPORTANT! In order to read the Canvas position later, it needs to have a record in the WPF 
        // dependency property table. So for now we'll just set it to '0' as a default.
        Canvas.SetLeft (this, 0);
        Canvas.SetTop (this, 0);

        // The drag-delta event occurs when the Thumb is dragged. 'delta' represents "change" just like
        // we all learned in calculus.
        this.DragDelta += new System.Windows.Controls.Primitives.DragDeltaEventHandler(DragCircle_DragDelta);
    }

    void DragCircle_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
    {
        // Read the Canvas location from the WPF database.
        Double currentX = Canvas.GetLeft(this);
        Double currentY = Canvas.GetTop(this);

        // Now update the canvas attached properties using the drag-delta ('change in position').
        // Note that Canvas.SetLeft is just a helper function that maps to the attached property: 
        //  this.SetValue(Canvas.TopProperty, SOME_VALUE);
        Canvas.SetLeft(this, currentX + e.HorizontalChange);
        Canvas.SetTop(this, currentY + e.VerticalChange);
    }
} 
```

Then just createa template like this:

```
<Window.Resources>
    <Style TargetType="lol:DragCircle">
        <Setter Property="Foreground" Value="LightGreen" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="lol:DragCircle">
                    <Ellipse Width="20" Height="20" Fill="{TemplateBinding Foreground}" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Foreground" Value="Orange" />
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources> 
```

Now drop it onto a canvas, and you're done.

```
<Canvas>
    <lol:DragCircle Canvas.Left="100" Canvas.Top="200" />
    <lol:DragCircle Canvas.Left="50" Canvas.Top="50" />
    <lol:DragCircle Canvas.Left="300" Canvas.Top="400" />
</Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:21:01.283

The array is the problem. You should read up on [INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx), nothing you bind to will be updated without it.

If you can, change your array to an `ObservableCollection` which implements `INotifyPropertyChanged` for changes to its elements. You can index it just like it's an array.

You may also have issues with storing the property collection in a static class. Static classes and properties don't have property changed notifications. If it's possible for the GridProperties to be a property on the window class that will be easier. Then, set the DataContext of the window to itself.

Something like this works for your example. Can't tell if you have something more complicated in your actual project though.

C#:

```
public partial class MainWindow : Window
{
    public ObservableCollection<int> GridProperties { get; private set; }

    public MainWindow()
    {
        InitializeComponent();
        GridProperties = new ObservableCollection<int>();
        GridProperties.Add(0);
        DataContext = this;
    }

    private void Rect_MouseUp_1(object sender, MouseButtonEventArgs e)
    {
        GridProperties[0] = 1;
    }
} 
```

xaml:

```
<Grid>
    <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Rectangle Name="Rect" Grid.Column="{Binding GridProperties[0]}" Fill="DarkGray" Margin="5" MouseUp="Rect_MouseUp_1"/>
</Grid> 
```

# sql-server - 具有已知列数的数据透视表

> ID：14712156
> 
> 赞同：2
> 
> 时间：2013-02-05T16:26:22.133
> 
> 标签：sql-server, sql-server-2008, pivot, pivot-table

我有一张看起来像这样的桌子

```
OutputTablesID    Label    ColumnOrder
  236             text          1
  236             text          2
  236             text          3
   .                .           .
   .                .           .
   .                .           . 
  236             text         25 
```

我需要桌子看起来像这样

```
OutputTablesID   1>>2>>3>>4>>5>>6>>7>>8>>9>>10>>11>>12>>13>>14>>15

 236>>>>>>>>>Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text 
```

我已经尝试过从现有数据透视表中使用的代码，但我不能在聚合函数中使用 Label，因为它是一个文本字符串。

这是我在数据透视表上的尝试

```
 Create  FUNCTION [dbo].[ColOrder] 
(   
)

RETURNS TABLE 

AS

RETURN 

(
   SELECT     OutputTablesId, Label, 1,2,3,4,5,6,7,8,9,10,11,12
    from 
    (
       SELECT OCL.Label, OCL.OutputTablesId
       FROM OCL
    ) AS D
    PIVOT 
    (
        sum(Label) 
        FOR ColumnOrder IN ([1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
    ) AS P 
```

感谢您的意见和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:30:21.120

您的代码非常接近，但您尝试使用 a`sum()`将`varchar`不起作用。如果您将聚合函数更改为`max()`then 它应该可以工作：

```
select OutputTablesID, [1], [2], [3], [25]
from
(
  select OutputTablesID, Label, ColumnOrder
  from yourtable
) src
pivot
(
  max(label)
  for ColumnOrder in ([1], [2], [3], [25]) -- put other ColumnOrder values here
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7025c/2)

如果要将其创建为函数，则可以使用：

```
create function dbo.colorder()
returns table
as
return
select OutputTablesID, [1], [2], [3], [25]
from
(
  select OutputTablesID, Label, ColumnOrder
  from yourtable
) src
pivot
(
  max(label)
  for ColumnOrder in ([1], [2], [3], [25])  -- put other ColumnOrder values here
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/962a3/2)

结果是：

```
| OUTPUTTABLESID |    1 |    2 |    3 |   25 |
----------------------------------------------
|            236 | text | text | text | text | 
```

# mongodb - 如何将“17-DEC-1980”等日期字符串转换为 MongoDB 的日期格式？

> ID：14712158
> 
> 赞同：1
> 
> 时间：2013-02-05T16:26:26.667
> 
> 标签：mongodb, date

我有一些数据，格式如`17-DEC-1980`. 如何将其转换为 Date 对象并插入 MongoDB？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T23:13:27.813

Javascript 控制台（此代码取决于时区）：

```
d = Date.parse('17-DEC-1980'); // 345844800000 
```

然后将此值放入 mongodb 请求中：

```
> new Date(345844800000)
ISODate("1980-12-16T20:00:00Z") // copy from MongoDB shell 
```

Node.js ( `example.js`) ：

```
var http = require('http');

http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});

    var mongodb = require('mongodb');
    var server = new mongodb.Server("127.0.0.1", 27017, {});
    new mongodb.Db('se', server, {}).open(function (error, client) {
      if (error) throw error;
      var collection = new mongodb.Collection(client, 'test_collection');

      d = Date.parse('17-DEC-1980');
      collection.insert({dt: new Date(d)}, {safe:true}, function(err, objects) {
        if (err) console.warn(err.message);
        if (err && err.message.indexOf('E11000 ') !== -1) {
          // this _id was already inserted in the database
        }
      });
    });

  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

# math - 枫除以零

> ID：14712160
> 
> 赞同：0
> 
> 时间：2013-02-05T16:26:27.570
> 
> 标签：math, fft, maple, divide-by-zero

这是我的工作。我不知道为什么当我在傅里叶级数中使 n=3 时，枫树会吐出除以零的误差。我需要一些建议来解决这个问题。n=1 和 n=2 的傅立叶级数完美绘制。这仅在 n=3 及以上时才开始成为问题。我认为这可能是我定义 f(x) 的方式的问题，但我尝试了多种方法来定义它，我得到了相同的结果。新来的枫树，所以对我放轻松。

这是我工作的一些图片的链接：

```
page1: http://tinypic.com/r/34iqmfa/6    
page2: http://tinypic.com/r/2rzruvm/6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:39:27.567

代码中的所有`forget()`调用都只是为了尝试清除以前存储的结果，以便时间比较可能更公平。如果您愿意，您可以删除对`forget()`and的所有调用。`time()`

我想你希望你的各种`ffsN`程序从 1 加到 N，而不是只加第 N 项（从 N 到 N）。所以我做了最后一个参数`ffs`be i=1..N 而不是 i=N 类似于你所拥有的。

你可以用纯粹的符号方式来处理这个问题，或者你可以用数字计算系数。您还可以尝试重新使用在先前调用中计算的系数（精确符号或浮点数），这些系数添加了较少的项。如果您要使用“前 2 项的总和”、“前 5 项的总和”等来比较图表，这会产生可衡量的性能差异。获得这种重用的一种方法是使用递归过程with `option remember`，下面针对精确系数和浮点系数方法完成。

我应用`simplify`了精确的符号系数，将它们折叠成更预期的东西。（想想正交性。）我还使用了`value`and inert `Int`*`Sum`而不是 active `int`and `sum`or `add`，但这只是为了让我也可以在不做任何符号工作的情况下获得浮点系数。

这在 Maple 15 中运行。如果它没有运行，请大声喊叫，然后请说明你的版本。

```
restart:
f:=x->sin(3*x)/x:
an:=1/Pi*Int(f(t)*cos(n*t),t=-Pi..Pi):
bn:=1/Pi*Int(f(t)*sin(n*t),t=-Pi..Pi):
ffs:=unapply(Sum(an*cos(n*x)+bn*sin(n*x),n=1..N),[x,N]):

a0:=1/(2*Pi)*int(f(t),t=-Pi..Pi):

a0+simplify(value(ffs(x,1)));
evalf(%);

seq(a0+simplify(value(ffs(x,i))),i=0..3);

seq(evalf(a0+ffs(x,i)),i=0..3);

forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
G5:=[seq(a0+simplify(value(ffs(x,i))),i=0..5)]:
plot(G5,x=-Pi..Pi);
time()-st;

forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
H5:=[seq(evalf(a0+ffs(x,i)),i=0..5)]:
plot(H5,x=-Pi..Pi);
time()-st;

ffsrecursive:=proc(x,N) option remember, system;
  if N<=0 then return evalf(a0);
  else
     return procname(x,N-1)+evalf(eval(an*cos(N*x)+bn*sin(N*x),n=N));
  end if;
end proc:

ffsrecursive(x,3);

ffsrecursiveexact:=proc(x,N) option remember, system;
  if N<=0 then return a0;
  else
     return procname(x,N-1)+simplify(value(eval(an*cos(N*x)+bn*sin(N*x),n=N)));
  end if;
end proc:

ffsrecursiveexact(x,3);

forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
S5exact:=[seq(ffsrecursiveexact(x,i),i=0..5)]:
plot(S5exact,x=-Pi..Pi);
time()-st;

forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
S5:=[seq(ffsrecursive(x,i),i=0..5)]:
plot(S5,x=-Pi..Pi);
time()-st;

# difference w.r.t. f(x)
forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
plot([seq(ffsrecursive(x,i)-f(x),i=15..19)],x=-Pi..Pi);
time()-st;

# difference w.r.t. f(x)
forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
plot([seq(a0+simplify(value(ffs(x,i)))-f(x),i=15..19)],x=-Pi..Pi);
time()-st;

# difference w.r.t. f(x)
forget(evalf): forget(int): forget(`evalf/int`):
forget(Si): forget(Ci): forget(ffsrecursive): forget(value):
st:=time():
H15_19diff:=[seq(a0+evalf(ffs(x,i))-f(x),i=15..19)]:
plot(H15_19diff,x=-Pi..Pi);
time()-st; 
```

[附录] 提交者只要求一种简单的方法。这是确切的非递归方法（上述4种方法）。

```
restart:

f:=x->sin(3*x)/x:
an:=1/Pi*Int(f(t)*cos(n*t),t=-Pi..Pi):
bn:=1/Pi*Int(f(t)*sin(n*t),t=-Pi..Pi):

ffs:=unapply(Sum(an*cos(n*x)+bn*sin(n*x),n=1..N),[x,N]):

a0:=1/(2*Pi)*int(f(t),t=-Pi..Pi):

G5:=seq(a0+simplify(value(ffs(x,i))),i=0..5);

plot([f(x), G5],x=-Pi..Pi,
     legend=[f(x),"n=0","n=1","n=2","n=3","n=4","n=5"],
     color=[black,gold,cyan,green,blue,magenta,red]); 
```

![在此处输入图像描述](../Images/e379f740ca66c2ecc62c84c08918c1fb.png)

# susy-compass - Susy 在全宽 div 中居中内容

> ID：14712165
> 
> 赞同：3
> 
> 时间：2013-02-05T16:26:36.993
> 
> 标签：susy-compass

我想将 div 中的内容居中，同时允许 div 占据屏幕的整个宽度。我在标题中有一个重复 x 的背景图像，并且必须在将内容居中时拉伸屏幕的整个长度。我知道我可以在下面的示例中添加一个 div 作为容器，但这会在 html 中添加很多非语义标记。susy 容器包含已添加到我项目的包装器中。

```
<body>
  <div class="wrapper">
    <header>
      <div class="container">
         centered content goes here...
      </div>
    <header>
  </div>
<body> 
```

有没有办法用 Susy 做到这一点，而不需要额外的内部容器 div。如果只是标题就好了，但我的标记在很多地方都需要这个。最后它看起来像任何 CSS 网格框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:03:57.023

你有几个可行的选择。真的，你可以在 CSS 中找到任何解决方案，你都可以使用 Susy 来帮助你。Susy 容器与自己编写 CSS 并没有什么特别之处。苏西只是为你做数学。

最健壮/最明显的方法确实需要 1 个包装器，但是您的`<header>`元素将很好地发挥该作用，并且除了容器和标头之外，您不需要额外的 div：

```
<header>
  <div class="container">
    content...
  </div>
</header> 
```

我使用的另一种方法是使用生成的内容创建整页背景（仅使用标题）。这需要知道标题的高度：

```
header {
  @include container;
  &:before {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    left: 0;
    height: 6em; // the height of your header.
  }
} 
```

或将 overflow-x 设置为隐藏在您的身体上：

```
body { overflow-x: hidden; }

header {
  @include container;
  position: relative;
  &:before {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
} 
```

这可能还需要一些 z-index 调整才能正常工作。

如果您发现另一种您更喜欢的 css/html 方法（我很想看到一个），并且您不知道如何使其与 Susy 一起使用，我很乐意向您展示。

# mysql - 外键约束允许删除父级

> ID：14712170
> 
> 赞同：2
> 
> 时间：2013-02-05T16:26:50.110
> 
> 标签：mysql

我对外键约束有疑问。所以我做了两个像这样的简单表格用于测试目的。

```
mysql> EXPLAIN parent;
+-------+---------+------+-----+---------+----------------+         
| Field | Type    | Null | Key | Default | Extra          |      
+-------+---------+------+-----+---------+----------------+      
| id    | int(11) | NO   | PRI | NULL    | auto_increment |      
+-------+---------+------+-----+---------+----------------+      
1 row in set (0.01 sec)                                          

mysql> EXPLAIN child;                                            
+-----------+---------+------+-----+---------+----------------+  
| Field     | Type    | Null | Key | Default | Extra          |  
+-----------+---------+------+-----+---------+----------------+  
| id        | int(11) | NO   | PRI | NULL    | auto_increment |  
| parent_id | int(11) | NO   | MUL | NULL    |                |  
+-----------+---------+------+-----+---------+----------------+ 
```

现在我在创建表时没有指定外键约束。我后来添加如下。

```
ALTER TABLE child                                                      
ADD CONSTRAINT parent_fk FOREIGN KEY(parent_id) REFERENCES parent(id); 
```

我检查了`engine`用于表格及其`InnoDB`. 我的问题是...

1.  为什么它不限制我删除父项中有多个依赖子记录的记录？默认情况下它应该限制我对吗？

2.  如果我在添加外键约束之前在外键字段上创建索引，它会按预期工作。我每次都需要创建这样的索引吗？

3.  在创建表后添加任何类型的约束是一种不好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:35:02.283

`ALTER TABLE`MySQL 在用于添加新的外键约束时需要字段索引。根据父表中的索引检查约束，因此如果没有索引，则不会进行检查。

[14.6.4.4。外键约束](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)

> 当您使用 ALTER TABLE 向表添加外键约束时，请记住首先创建所需的索引。

并且：

> 偏离 SQL 标准：如果父表中有几行具有相同的引用键值，则 InnoDB 在外键检查中的行为就像其他具有相同键值的父行不存在一样。例如，如果您定义了 RESTRICT 类型约束，并且有一个包含多个父行的子行，则 InnoDB 不允许删除任何这些父行。
> 
> InnoDB 根据与外键约束对应的索引中的记录，通过深度优先算法执行级联操作。

要回答您的具体问题：

1）它不会限制您，因为您尚未创建所需的索引。如他们的文档中所述，算法使用与约束对应的索引。

2) 见#1。是的，除非在将行添加到父表之前 FK 就位。

3）不，这不是坏习惯。你只需要明确你的意图。例如，您想在`ALTER`ing 表后检查参照完整性吗？这是一个可能有用的问题：[Force InnoDB to recheck foreign keys on a table/tables?](https://stackoverflow.com/questions/2250775/force-innodb-to-recheck-foreign-keys-on-a-table-tables)

# javascript - string.replace() 用 RegEx 替换错误字符

> ID：14712171
> 
> 赞同：3
> 
> 时间：2013-02-05T16:26:58.050
> 
> 标签：javascript, regex, node.js

我正在尝试使用正则表达式（javascript）来移动文本中的句点。文本如下所示：

```
This is a text with ending period on wrong line
.
This is a another line 
```

我使用这个正则表达式：

```
summary.replace(/[\n\r]\.[\s\n\r]/gm, '.\r') 
```

使它看起来像这样：

```
This is a text with ending period on wrong line.
This is a another line 
```

但相反，它看起来像这样：

```
This is a text with ending period on wrong line
.his is a another line 
```

无法弄清楚我的正则表达式有什么问题。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:35:36.873

我建议您使用 JSON.stringify 输出编码为 JSON 的结果，以查看是否仍然存在任何空白字符（如换行符）。我还会为您的字符类使用量词，以便它可以一次匹配多个字符

```
/[\n\r]?\.[\s\n\r]*/gm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:38:56.617

使用这个正则表达式

```
[\n\r]+\.(?=[\s\n\r]+) 
```

将其替换为`.`

# solr - 拆分 Solr 响应时间

> ID：14712175
> 
> 赞同：1
> 
> 时间：2013-02-05T16:27:08.613
> 
> 标签：solr, response-time

除了 Qtime 之外，是否可以从 Solr 检索任何其他时间。如果不是，是否有可能测量 QTime 未包含的时间，即（引用 Solr 术语），响应编写器格式化/流式传输到客户端的响应所花费的时间。有什么好的资源可以让我了解这些东西吗？在网上搜索，我发现只有部分和不清楚的信息。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:22:16.297

您可以使用[debugQuery=on](http://wiki.apache.org/solr/CommonQueryParameters#Debugging)选项检查各个组件的响应时间。

例如

```
<lst name="timing">
<double name="time">9.0</double>
<lst name="prepare">
  <double name="time">1.0</double>
  <lst name="org.apache.solr.handler.component.QueryComponent">
    <double name="time">1.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.FacetComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.MoreLikeThisComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.HighlightComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.StatsComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.DebugComponent">
    <double name="time">0.0</double>
  </lst>
</lst>
<lst name="process">
  <double name="time">8.0</double>
  <lst name="org.apache.solr.handler.component.QueryComponent">
    <double name="time">6.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.FacetComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.MoreLikeThisComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.HighlightComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.StatsComponent">
    <double name="time">0.0</double>
  </lst>
  <lst name="org.apache.solr.handler.component.DebugComponent">
    <double name="time">2.0</double>
  </lst>
</lst> 
```

# c# - 重复的类/实体映射 在流畅的 NHibernate 中

> ID：14712178
> 
> 赞同：0
> 
> 时间：2013-02-05T16:27:14.683
> 
> 标签：c#, asp.net-mvc-3, fluent-nhibernate

**编辑：在帖子末尾添加了 HBM 映射。**

我有一个相当大的类库，涉及继承。我正在使用 Fluent NHibernate 将类映射到 MS SQL 2008 以在 Azure 中托管它。

我相当确定映射是正确的。我们使用鉴别器值来区分列（而不是表）上的类。但是，每当我尝试生成映射时，都会收到一个错误，即类/实体之一是重复的。

```
Duplicate class/entity mapping FolkeLib.MMOBash.Bash 
```

这发生在这里：

```
private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
            .Database(
                MsSqlConfiguration.MsSql2008.Dialect("NHibernate.Dialect.MsSql2008Dialect")
                .ConnectionString(c => 
                    c.FromConnectionStringWithKey("FolkeConnString"))
                .ShowSql())
            .Mappings(m => 
                m.FluentMappings.AddFromAssemblyOf<Account>())
            .ExposeConfiguration(cfg => 
                new SchemaUpdate(cfg).Execute(false, true))
            .Diagnostics(diag => diag.Enable().OutputToConsole())
            .BuildSessionFactory();
    } 
```

类层次结构是这样的

*   信息
    *   评论
    *   论坛留言
        *   文章
            *   图片
                *   重击

Bash 继承自 Image，Image 继承自 Article，以此类推。它们都有不同的鉴别器值。消息映射定义如下：

```
public class MessageMap : ClassMap<Message>
{
    MessageMap()
    {
        Id(x => x.Id);
        DiscriminateSubClassesOnColumn("MessageType").SqlType("int32");
        Map(x => x.CreationDate).Index("ArticleCreationDate");
        Map(x => x.ModificationDate);
        Map(x => x.LastChildCreationDate);
        References(x => x.Author);
        References(x => x.RootMessage).Nullable(); ;
        References(x => x.ParentMessage).Nullable(); ;
    }
} 
```

（还有更多属性，但我认为它们无关紧要）。请注意，RootMessage 和 ParentMessages 本身就是“消息”类型。这可能是根本原因吗？

Bash 映射是这样的：

```
public class BashMap : SubclassMap<Bash>
{
    BashMap()
    {
        DiscriminatorValue(5);
        Map(x => x.Game);
        Map(x => x.Language);
        References(x => x.ApprovedBy);
    }
} 
```

我已经为此花费了数小时，但我不知道为什么会出现重复的类/实体映射错误。

**编辑：故障排除更新。**

按照下面的建议，我添加了这段代码：

```
public ActionResult Zogzog()
    {
        List<string> types = new List<string>();
        foreach (var module in typeof(Account).Assembly.GetModules())
        {
            foreach (var type in module.GetTypes())
            {
                if (typeof(IMappingProvider).IsAssignableFrom(type))
                {
                    types.Add(type.ToString());
                }                    
            }   
        }
        ViewBag.Types = types;
        return View();
    } 
```

视图的输出是这样的：

> FolkeLib.Calendar.EventRoleMap
> 
> FolkeLib.Calendar.LocationMap
> 
> FolkeLib.Calendar.RegistrationMap
> 
> FolkeLib.Calendar.RoleMap
> 
> FolkeLib.Domain.AccountMap
> 
> FolkeLib.Domain.AccountBanMap
> 
> FolkeLib.Domain.CommunityMap
> 
> FolkeLib.Domain.ContactEntryMap
> 
> FolkeLib.Domain.ContactTypeMap
> 
> FolkeLib.Domain.ForumMap
> 
> FolkeLib.Domain.ReadMessageMap
> 
> FolkeLib.Domain.RssFeedMap
> 
> FolkeLib.Domain.SkinMap
> 
> FolkeLib.Domain.GroupMap
> 
> FolkeLib.Domain.LanguageMap
> 
> FolkeLib.Domain.MenuMap
> 
> FolkeLib.Domain.MenuItemMap
> 
> FolkeLib.Domain.MessageMap
> 
> FolkeLib.Domain.PollMap
> 
> FolkeLib.Domain.PollAnswerMap
> 
> FolkeLib.Domain.PollVoteMap
> 
> FolkeLib.Domain.QuoteMap
> 
> FolkeLib.Domain.MessageReportMap
> 
> FolkeLib.Game.CharacterMap
> 
> FolkeLib.Domain.RssChannelMap
> 
> FolkeLib.Domain.SiteMap
> 
> FolkeLib.Domain.SiteApplicationModuleMap
> 
> FolkeLib.Domain.StaticTextMap
> 
> FolkeLib.Domain.TagMap
> 
> FolkeLib.Domain.VoteMap

我似乎没有重复，但是 Message 的孩子似乎都没有出现。我不确定这是否正常（它们是 SubclassMap 类型，这里显示的是 ClassMap 类型），但这是在评论中提出的。

**编辑**：这是 Fluent 生成的 Message.hbm.xml 文件。正如我们所见，某些类（Bash、Article 等）多次显示为子类，有时具有不同的鉴别器值！

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class xmlns="urn:nhibernate-mapping-2.2" name="FolkeLib.Domain.Message, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" table="`Message`">
    <id name="Id" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Id" />
      <generator class="identity" />
    </id>
    <discriminator type="String">
      <column name="MessageType" sql-type="int32" />
    </discriminator>
    <property name="CreationDate" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="CreationDate" index="ArticleCreationDate" />
    </property>
    <property name="ModificationDate" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="ModificationDate" />
    </property>
    <property name="LastChildCreationDate" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="LastChildCreationDate" />
    </property>
    <property name="Text" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Text" />
    </property>
    <property name="Locked" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Locked" />
    </property>
    <property name="Score" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Score" />
    </property>
    <property name="Hidden" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Hidden" />
    </property>
    <property name="Deleted" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="Deleted" />
    </property>
    <property name="AuthorIp" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="AuthorIp" />
    </property>
    <property name="PublicationDate" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <column name="PublicationDate" />
    </property>
    <many-to-one class="FolkeLib.Domain.Account, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="Author">
      <column name="Author_id" />
    </many-to-one>
    <many-to-one class="FolkeLib.Domain.Account, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="Locker">
      <column name="Locker_id" not-null="false" />
    </many-to-one>
    <many-to-one class="FolkeLib.Domain.Message, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="RootMessage">
      <column name="RootMessage_id" not-null="false" />
    </many-to-one>
    <many-to-one class="FolkeLib.Domain.Message, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="ParentMessage">
      <column name="ParentMessage_id" not-null="false" />
    </many-to-one>
    <many-to-one class="FolkeLib.Domain.Site, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="Site">
      <column name="Site_id" not-null="true" />
    </many-to-one>
    <many-to-one class="FolkeLib.Domain.Forum, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="Forum">
      <column name="Forum_id" />
    </many-to-one>
    <many-to-one class="FolkeLib.Domain.Account, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="DeletedBy">
      <column name="DeletedBy_id" />
    </many-to-one>
    <subclass name="FolkeLib.Domain.Comment, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="2" />
    <subclass name="FolkeLib.Domain.ForumMessage, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="3">
      <property name="Title" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <column name="Title" />
      </property>
      <subclass name="FolkeLib.Calendar.Event, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="6">
        <bag lazy="true" name="RoleSet" table="EventEventRole">
          <key>
            <column name="Event_id" />
          </key>
          <many-to-many class="FolkeLib.Calendar.EventRole, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
            <column name="EventRole_id" />
          </many-to-many>
        </bag>
        <property name="Duration" type="System.TimeSpan, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <column name="Duration" />
        </property>
        <property name="RecurringDays" type="System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <column name="RecurringDays" />
        </property>
        <property name="FirstTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <column name="FirstTime" />
        </property>
        <property name="LastTime" type="System.DateTime, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <column name="LastTime" />
        </property>
        <many-to-one class="FolkeLib.Calendar.Location, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="Location">
          <column name="Location_id" />
        </many-to-one>
      </subclass>
      <subclass name="FolkeLib.Domain.Article, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="1">
        <subclass name="FolkeLib.Domain.Image, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="1">
          <property name="Name" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="Name" />
          </property>
          <property name="Extension" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="Extension" />
          </property>
          <property name="Public" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="Public" />
          </property>
          <property name="ForAdults" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="ForAdults" />
          </property>
          <subclass name="FolkeLib.MMOBash.Bash, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="5">
            <property name="Game" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
              <column name="Game" />
            </property>
            <property name="Language" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
              <column name="Language" />
            </property>
            <many-to-one class="FolkeLib.Domain.Account, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="ApprovedBy">
              <column name="ApprovedBy_id" />
            </many-to-one>
          </subclass>
        </subclass>
      </subclass>
      <subclass name="FolkeLib.Domain.Article, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="4">
        <bag name="TagSet" table="TagToArticle">
          <key>
            <column name="Article_id" />
          </key>
          <many-to-many class="FolkeLib.Domain.Tag, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
            <column name="Tag_id" />
          </many-to-many>
        </bag>
        <bag name="ImageSet" table="ImageToArticle">
          <key>
            <column name="Article_id" />
          </key>
          <many-to-many class="FolkeLib.Domain.Image, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
            <column name="Image_id" />
          </many-to-many>
        </bag>
        <property name="ExtraText" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
          <column name="ExtraText" />
        </property>
        <subclass name="FolkeLib.Domain.Image, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="1">
          <property name="Name" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="Name" />
          </property>
          <property name="Extension" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="Extension" />
          </property>
          <property name="Public" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="Public" />
          </property>
          <property name="ForAdults" type="System.Boolean, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <column name="ForAdults" />
          </property>
          <subclass name="FolkeLib.MMOBash.Bash, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" discriminator-value="5">
            <property name="Game" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
              <column name="Game" />
            </property>
            <property name="Language" type="System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
              <column name="Language" />
            </property>
            <many-to-one class="FolkeLib.Domain.Account, FolkeLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" name="ApprovedBy">
              <column name="ApprovedBy_id" />
            </many-to-one>
          </subclass>
        </subclass>
      </subclass>
    </subclass>
  </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:04:28.573

有人找到原因了。另一个类的映射出现错误：

这就是问题所在：

```
public class ArticleListMap : SubclassMap<Article>
{
   ArticleListMap()
   {
      DiscriminatorValue(1);
   }
}

public class ArticleMap : SubclassMap<Article>
{
   ArticleMap()
   {
      DiscriminatorValue(4);
      Map(x => x.ExtraText);
      HasManyToMany(x => x.TagSet);
      HasManyToMany(x => x.ImageSet);
   }
} 
```

而不是从`SubclassMap<ArticleList>`I继承 ArticleListMap `SubclassMap<Article>`（这是一个打字错误）。由于它们具有不同的鉴别器，但从同一个类继承，确实存在一个重复的映射，而不是“传播”到子类。

# php - 使用 php 编译 C++ 代码

> ID：14712179
> 
> 赞同：-1
> 
> 时间：2013-02-05T16:27:21.450
> 
> 标签：php, compilation

我正在为我们学校开发一个在线法官（*比如 topcoder/codeforces.com*）。
但我不知道如何开始——如何使用 php 评估某人的 c++ 代码。
另请注意，代码将使用 c++ & 我需要提供一些存储在文件中的输入。
我在设计站点（在 php 中）和测试产生的输出方面没有问题。
如果我可以使用一些外部站点（我没有服务器，资金较少所以免费服务器！），那将是有利的。

谢谢你。-亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:39:28.093

最明显的方法是通过上传源的 system/exec 调用编译器。大概这是唯一的办法。我怀疑 PHP 是否存在 C++ 解析器/解释器（理论上可行，但非常复杂且毫无意义）。

如果您没有专用主机，这将很难做到，因为很可能每个主机提供商都在阻止对 system/exec 的调用，即使他们没有，您也无法访问编译器。

如果您不完全信任您的用户（您的同学可以破解），您还必须“沙盒”您从代码构建的应用程序。您需要确保没有人能够读取您的文件系统/删除文件/连接到数据库等。您可以通过以下一项或多项来做到这一点：

*   仅授予对您信任的标头/库的封闭列表的访问权限（数学等）
*   以仅为此目的创建的用户身份运行应用程序（最简单的解决方案）
*   使用虚拟机
*   等等

您可以检查：

[从头开始创建在线法官](https://stackoverflow.com/questions/1019731/creating-an-online-judge-from-scratch)

也许这会很有用：

[https://github.com/anomit/loki](https://github.com/anomit/loki)

# c++ - 使用 QT 的菜单栏应用程序

> ID：14712185
> 
> 赞同：3
> 
> 时间：2013-02-05T16:27:47.127
> 
> 标签：c++, macos, qt

想知道使用 QT 是否可以制作菜单栏/任务栏应用程序，例如此处描述的菜单栏应用程序[http://blog.shpakovski.com/2011/07/cocoa-popup-window-in-status-bar.html](http://blog.shpakovski.com/2011/07/cocoa-popup-window-in-status-bar.html) .

我知道可以触发对话框和打开窗口的各种系统托盘图标，但很好奇是否可以集成完整的应用程序/对话框。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T19:29:40.577

这是一个有趣的问题，我以前从未想过这样做。经过一番快速的谷歌搜索，我找到了以下答案：

[系统托盘示例 QT 4.8](http://doc.qt.io/qt-4.8/qt-desktop-systray-example.html)
[系统托盘示例 QT 5](http://doc.qt.io/qt-5/qtwidgets-desktop-systray-example.html)

我不确定这是否是您想要的，但您似乎可以将整个窗口应用程序集成到此系统托盘图标。这至少是编写托盘图标程序的开始。

**编辑**：更新了新文档的链接。

# algorithm - 堆 - 对未知输入执行 DeleteMax 操作 - 实现

> ID：14712187
> 
> 赞同：0
> 
> 时间：2013-02-05T16:27:58.687
> 
> 标签：algorithm, data-structures, heap, complexity-theory

我需要你的帮助，试图找出/获得一个简单证明的方法。

假设给定一个具有 n 个不同元素的最大堆，并且 x 是深度 D 中的堆中的一个元素（在表示堆的树中）。现在假设我们正在执行一系列 DeleteMax 操作。

1.  在从堆中提取 x 之前，需要执行的最大 DeleteMax 操作数是多少。

2.  在从堆中提取 x 之前，需要执行的最小 DeleteMax 操作数是多少。

***笔记：***

我相信我确实设法证明了第二个，即如果 x 和他的父母是堆中最大的元素，那么 x 将在 D+1 DeleteMax 操作之后被提取（其中 D 个专门用于提取他的父母）。

我刚刚发现第一个方法不太顺利，我不确定我需要使用什么方法来证明它是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T04:44:40.150

我想你是对的。当只有 x 的父母和祖父母大于 x 时，会发生第二种情况，而不是堂兄弟、叔叔等……只有与根成一直线的前辈。

当只有 x 的孩子小于 x 时，将发生第一种情况。因此，如果堆的高度为 H，则最大值将是高度为 H 的完整堆减去高度为 HD 的完整堆。

# ios - 发布到朋友的墙 Facebook iOS SDK 3.1

> ID：14712190
> 
> 赞同：1
> 
> 时间：2013-02-05T16:28:06.760
> 
> 标签：ios, facebook, facebook-graph-api, ios6, facebook-ios-sdk

根据 Facebook 开发者路线图 ( [https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/) )，他们说除了使用提要对话框外，我们将无法发布到朋友墙，但提要对话框在 iOS SDK 上已弃用3.1

就我而言，哪种方法更好？我需要一个用户从他的朋友列表中选择，然后将链接发布到他们的墙上。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:22:16.593

您可以使用提要对话框。我认为FB将不得不保留这一点。我的应用程序现在使用它们很好。

[https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

```
- (IBAction)publishButtonAction:(id)sender {
    // Put together the dialog parameters
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Facebook SDK for iOS", @"name",
                                   @"Build great social apps and get more installs.", @"caption",
                                   @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                                   @"https://developers.facebook.com/ios", @"link",
                                   @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
                                   nil];

    // Invoke the dialog
    [self.facebook dialog:@"feed" andParams:params andDelegate:self];

    // (here's another typical example of how to call that...)
    [FBWebDialogs presentFeedDialogModallyWithSession:
            YourFBSessionClass.activeSession
            parameters: params
            handler: nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:36:09.390

看看我的问题[Post to Friends wall on Facebook failed with Social Framework in iOS 6](https://stackoverflow.com/questions/14332314/post-to-friends-wall-on-facebook-failed-with-social-framework-in-ios-6#comment20418219_14332314)

我最终通过电子邮件使用他的 Facebook 用户名 (username@facebook.com) 向 Facebook 朋友发送邀请消息

# css - 禁用 Firefox 的 11 折叠，使其宽度小于 01 或 02

> ID：14712196
> 
> 赞同：0
> 
> 时间：2013-02-05T16:28:25.803
> 
> 标签：css, firefox, text

现在在 Firefox 中，1 没有零和其他数字那么宽。这会降低日期列表的美观度。似乎只是11的问题。01和10似乎不受影响。

> 2012-09-30 23:56:54
> 2012-11-14 11:12:56
> 2012-12-30 12:12:56
> 2013-02-05 12:12:56

请注意，使用 Firefox 浏览器时，第二个日期/时间没有那么长。有没有办法让我再次正常化/为我的网页“关闭”这个新的 Firefox 功能？

由于这是一个小问题，我对切换字体不感兴趣。我更喜欢一个简单的 CSS 规则，如果有的话。

**编辑**我特别指的是 Arial 字体，这是我看到的截图。第二行文本中有两个 11。因此，它比没有 11 的其他行短两个像素。

![在此处输入图像描述](../Images/6b2ac508a6322574802295a90c4335a8.png)

# ios - IOS 上带有 CollectionView 的弹出框

> ID：14712198
> 
> 赞同：1
> 
> 时间：2013-02-05T16:28:26.143
> 
> 标签：ios, objective-c, ipad, popover, collectionview

我想知道当我单击集合视图中的项目时是否有使用 Popover 的框？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:08:17.117

当然可以。

您只需要计算 UICollectionViewCell 位置的 CGRect 即可。请注意，此计算可能因您的集合布局而异。然后你可以使用类似这样的代码：

```
[popoverController presentPopoverFromRect:cellRect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

# ssms - 如何使用正则表达式识别 SSMS 中重复 9 次的相同数字？

> ID：14712204
> 
> 赞同：1
> 
> 时间：2013-02-05T16:28:48.983
> 
> 标签：ssms

我正在尝试创建一个正则表达式语句来识别 9 个相同的重复数字。我认为 `field like '0^9|1^9|2^9|3^9|4^9|5^9|6^9|7^9|8^9|9^9'` 可行，但有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:36:08.753

像这样的东西（对于标准 reg exp）：

```
(\d)\1{8,} 
```

`\d`将匹配任何数字（第一个），并且`\1`是对内部匹配项的向后引用，`(...)`并且`{8,}`需要向后引用 8 倍以上。

**编辑**

我只是意识到这个问题与 ssms 有关，所以你可以使用这个：

```
{\d}\1^8 
```

# android - 谷歌驱动集成

> ID：14712205
> 
> 赞同：1
> 
> 时间：2013-02-05T16:28:50.920
> 
> 标签：android, google-drive-api

我已在我的 android 应用程序中集成了 Google Drive。我在两台设备上进行了测试——三星 Galaxy S Advance 和三星 Galaxy Pocket (GT-S5300)，两者都使用相同的 android 版本 2.3.6。

在第一个设备上一切正常，但在第二个设备上我得到一个异常 No Activity found to handle

`Intent { act=com.google.android.gms.common.account.CHOOSE_ACCOUNT (has extras) }`

当我这样称呼时

`context.startActivityForResult(mCredential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);`

有人知道有什么问题吗？

# html - ASP.NET MVC - 浏览器不断记住不同模型的输入

> ID：14712208
> 
> 赞同：4
> 
> 时间：2013-02-05T16:28:53.433
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3

我有两个这样的模型：

```
public class Register 
{
    public string Login {get;set;}
    public string Password {get;set;}
}

public class Login
{
   public string LoginField {get;set;}
   public string PasswordField {get;set;}
} 
```

现在，在我的每个页面上，我都有登录框，当我进入注册页面时，我的浏览器会自动完成登录框中的字段，并将相同的数据放入注册表中！这是为什么？为什么浏览器会缓存具有不同 ID 的字段的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:32:50.893

> 这是为什么？为什么浏览器会缓存具有不同 ID 的字段的信息？

我想这是设计使然。`autocomplete`您可以通过将属性添加到您不想自动完成的输入字段来关闭自动完成：

```
@Html.TextBoxFor(x => x.Username, new { autocomplete = "off" }) 
```

# html - 如何防止显示器在观看 html 5 动画时休眠

> ID：14712211
> 
> 赞同：21
> 
> 时间：2013-02-05T16:29:03.273
> 
> 标签：html, webpage, sleep, monitor

有没有办法防止显示器在网页上休眠？

我有一个不需要用户交互的 html 动画页面。显示器可以在此期间休眠，我想防止这种情况发生。

在 Hulu 上观看视频时，我注意到显示器不休眠，因此必须有一些方法来防止这种情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T14:58:21.093

关于 Flash 的讨论让我感到疑惑，所以我做了一个简单的动作，只循环一个简短的 flv 文件。瞧，当在此页面上时，显示器不睡觉！所以我需要做的就是制作一个只是页面背景颜色的小电影，然后在我不希望显示器休眠的页面上循环播放。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T16:38:42.540

这在纯 HTML 中是不可能的。Hulu 这样做是因为它是基于 Flash 的，并且插件可以访问 OS 层，这是 JS 或 HTML 所没有的。因此，唯一的方法是在 HTML5 规范中添加一个新段落。

我想浏览器会在全屏时禁用睡眠，但有待验证。

有关更多信息，请参阅[此帖子](http://productforums.google.com/d/msg/youtube/C72RHsRYDpo/XE15rBP3gZUJ)。

# c# - LinqToSql 动态插入

> ID：14712216
> 
> 赞同：2
> 
> 时间：2013-02-05T16:29:25.480
> 
> 标签：c#, linq-to-sql

我目前有一个 Linq to Sql 实现，它需要很长时间来进行插入，所以我试图使用紧凑的插入语句来加速它，但仍然使用 linq to sql 的执行命令。

我有一个`string[]`我试图`object[] parameters`像这样传递给 ExecuteCommand 的参数。

```
string sqlStart = "INSERT INTO BusinessContacts (Guid,BusinessId,Name,Email,Address,City,State,PostalCode,Phone,URL) VALUES ";
string sqlParams = "(NewId(),1,{{{0}}},{{{1}}},{{{2}}},{{{3}}},{{{4}}},{{{5}}},{{{6}}},{{{7}}}),";
string[] values = new string[8000];
int curParam = -1;
sbSqlValues.Append(sqlStart);
foreach (var email in emails) {
    sbSqlValues.AppendFormat(sqlParams, ++curParam, ++curParam, ++curParam, ++curParam, ++curParam, ++curParam, ++curParam, ++curParam);
    curParam -= 8;
    values[++curParam] = email.Name;
    values[++curParam] = (email.Email);
    values[++curParam] = (email.Address);
    values[++curParam] = (email.City);
    values[++curParam] = (email.State);
    values[++curParam] = (email.PostalCode);
    values[++curParam] = (email.Phone);
    values[++curParam] = (email.URL);
}
sbSqlValues.Remove(sbSqlValues.Length - 1, 1);
inserted += ExecuteCommand(sbSqlValues.ToString(), values); 
```

但即使我传递了一个字符串数组，我仍然收到异常：`A query parameter cannot be of type 'System.Object'.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:56:59.847

尝试：`(object[])values`作为第二个参数。C# 编译器将 转换`string[]`为单元素`params`。

# javascript - jQuery textchange 插件不起作用

> ID：14712220
> 
> 赞同：0
> 
> 时间：2013-02-05T16:29:35.160
> 
> 标签：javascript, jquery

我试图将“jQuery textchange 插件”添加到我的代码中。这是：[http ://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

这是我的代码的一部分，我认为这就足够了：

page.html：

```
//...other code
<script type="text/javascript" src="resources/javascripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="resources/javascripts/jquery.textchange.js"></script>
<script type="text/javascript" src="resources/javascripts/formscript.js"></script>
//...other code 

//...
<input type="text" placeholder='placeholder' class='necess'>
//...other code 
```

fornscritp.js：

```
//...other code

$(document).ready(function() {
    $(".necess").bind("hastext", function () {
        alert('YES');
    });
}); 
```

* * *

因此，当我开始在 INPUT 中输入内容时，我想看到消息“是”，但不幸的是它不起作用。

我尝试使用“textchange”并尝试将标签从 INPUT 更改为 TEXTAREA，就像网站上的示例一样，但它也没有帮助。

我花了几个小时尝试谷歌搜索，但没有找到答案。甚至以为我用错了这个插件。

请告诉我我做错了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:38:13.240

所以，我想我已经找到了答案。上面代码中的一切都是正确的。但我也有一些“脚本”行，我在其中添加了另一个 jQuery 库。当我删除这一行时，一切都开始了。我通过分析这个页面的代码和资源发现了这个错误：

[http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

（只需下载所有内容，并在发现可能导致错误但未找到的内容时评论每一行）所以，现在一切正常。我能给有这样错误的人的唯一建议是更加注意你的代码:)

# mysql - DBD::mysql::db do failed: 你的 SQL 语法有错误；尝试从 Mozilla 安装“石蕊”应用程序时

> ID：14712221
> 
> 赞同：0
> 
> 时间：2013-02-05T16:29:37.563
> 
> 标签：mysql

我正在尝试安装[石蕊](http://mxr.mozilla.org/mozilla/source/webtools/litmus/INSTALL)

在 Ubuntu 12.04 上

现在在运行populatedb.pl -r

我得到错误：

```
Checking for missing/new database tables...
Creating table testdays ...
DBD::mysql::db do failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'testday_id smallint(6) not null primary key auto_increment,
         last_update' at line 1 at ./populatedb.pl line 123.
Could not create table 'testdays'. Please check your database access. 
```

我更改了第 122 行，如下所示；

```
 #$dbh->do("CREATE TABLE $tabname (\n$fielddef\n) TYPE = MYISAM") 
```

这是默认设置：但搜索后，似乎 TYPE 应该替换为 ENGINE

```
$dbh->do("CREATE TABLE $tabname (\n$fielddef\n) ENGINE = MYISAM") 
```

现在这会产生语法错误。

至于数据库访问：

在 /etc/mysql/my.cnf

```
#bind-address       = 127.0.0.1 
```

评论！

在mysql中；

```
mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY "<the password>"; 
```

## 填充b.pl

```
#!/usr/bin/perl -w
# -*- mode: cperl; c-basic-offset: 8; indent-tabs-mode: nil; -*-

# ***** BEGIN LICENSE BLOCK *****
# Version: MPL 1.1
#
# The contents of this file are subject to the Mozilla Public License Version
# 1.1 (the "License"); you may not use this file except in compliance with
# the License. You may obtain a copy of the License at
# http://www.mozilla.org/MPL/
#
# Software distributed under the License is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
# for the specific language governing rights and limitations under the
# License.
#
# The Original Code is Litmus.
#
# The Initial Developer of the Original Code is
# the Mozilla Corporation.
# Portions created by the Initial Developer are Copyright (C) 2006
# the Initial Developer. All Rights Reserved.
#
# Contributor(s):
#   Chris Cooper <ccooper@deadsquid.com>
#   Zach Lipton <zach@zachlipton.com>
#   Frederic Wenzel <fwenzel@mozilla.com>
#
# ***** END LICENSE BLOCK *****

use strict;
use Getopt::Long;
use Litmus::Config;
use DBI;
$|++;

my $reset_db;
my $help;
GetOptions('help|?' => \$help,'r|resetdb' => \$reset_db);

if ($help) {
  &usage;
  exit;
}

unless (-e "data/") {
    system("mkdir", "data/");
}
system("chmod -R 777 data/");
unless (-e "localconfig") {
     open(OUT, ">localconfig");
         print OUT <<EOT;
our \$db_host = "";
our \$db_name = "";
our \$db_user = "";
our \$db_pass = "";

our \$user_cookiename = "litmus_login";
our \$sysconfig_cookiename = "litmustestingconfiguration";

our \$sendmail_path = "/usr/sbin/sendmail";

our \$tr_host = "";
our \$tr_name = "";
our \$tr_user = "";
our \$tr_pass = "";

our \$bugzilla_auth_enabled = 0;
our \$bugzilla_db = "bugzilla";
our \$bugzilla_host = "localhost";
our \$bugzilla_user = "litmus";
our \$bugzilla_pass = "litmus";

# uncomment and define this to enable memcaching
# our \$memcache_settings => {
#     servers => [ 'localhost:11211', '192.168.254.2:11211' ],
#     namespace => 'litmus:',
# };
EOT
        close(OUT);
        print "Go edit 'localconfig' with your configuration and \n";
        print "run this script again.\n";
        exit;
} 

# Create database tables, in large part borrowed from the old-school
# --TABLE-- code in checksetup.pl:
print "\nChecking for missing/new database tables...\n";
our %table;
do 'schema.pl'; # import the schema (%table)
my $dbh = DBI->connect("dbi:mysql:;$Litmus::Config::db_host", 
    $Litmus::Config::db_user,
    $Litmus::Config::db_pass) || 
        die "Could not connect to mysql database $Litmus::Config::db_host";

my @databases = $dbh->func('_ListDBs');
    unless (grep($_ eq $Litmus::Config::db_name, @databases)) {
       print "Creating database $Litmus::Config::db_name ...\n";
       if (!$dbh->func('createdb', $Litmus::Config::db_name, 'admin')) {
            my $error = $dbh->errstr;
            die "Could not create database $Litmus::Config::db_name: $error\n";
    }
}
$dbh->disconnect if $dbh;

$dbh = DBI->connect(
    "dbi:mysql:$Litmus::Config::db_name:$Litmus::Config::db_host",
    $Litmus::Config::db_user,
    $Litmus::Config::db_pass);

# Get a list of the existing tables (if any) in the database
my $sth = $dbh->table_info(undef, undef, undef, "TABLE");
my @tables = @{$dbh->selectcol_arrayref($sth, { Columns => [3] })};

# go throught our %table hash and create missing tables
while (my ($tabname, $fielddef) = each %table) {
    next if grep($_ eq $tabname, @tables);
    print "Creating table $tabname ...\n";

    $dbh->do("CREATE TABLE $tabname (\n$fielddef\n) TYPE = MYISAM")
    #$dbh->do("CREATE TABLE $tabname (\n$fielddef\n) ENGINE = MYISAM")
    #$dbh->do("CREATE TABLE $tabname $fielddef ENGINE = MYISAM")
        or die "Could not create table '$tabname'. Please check your database access.\n";
}

# populate the database with the default data in populatedb.sql:
if ($reset_db) {
  my $data_file = "populatedb.sql";

  print "Populating tables with default data...";
  my $cmd = "mysql --user=$Litmus::Config::db_user --password=$Litmus::Config::db_pass $Litmus::Config::db_name < $data_file"
;
  my $rv = system($cmd);
  if ($rv) {
    die "Error populating database $Litmus::Config::db_name";
  }
  print "done.\n";
}

# UPGRADE THE SCHEMA
# Now we need to deal with upgrading old installations by adding new fields 
# and indicies to the schema. To do this, we use the helpful Litmus::DBTools 
# module.
#
# NOTE: anything changed here must also be added to schema.pl for new 
# installations 
use Litmus::DBTools;
my $dbtool = Litmus::DBTools->new($dbh);

# ZLL: Authentication System fields
$dbtool->DropField("users", "is_trusted");
$dbtool->AddField("users", "bugzilla_uid", "int default '1'");
$dbtool->AddField("users", "password", "varchar(255)");
$dbtool->AddField("users", "realname", "varchar(255)");
$dbtool->AddField("users", "is_admin", "tinyint(1) default '0'");
$dbtool->AddField("users", "irc_nickname", "varchar(32)");
$dbtool->DropIndex("users", "email");
$dbtool->DropIndex("users", "irc_nickname");
$dbtool->AddUniqueKey("users","email","(email)");
$dbtool->AddUniqueKey("users","irc_nickname","(irc_nickname)");
$dbtool->AddKey("users","bugzilla_uid","(bugzilla_uid)");
$dbtool->AddKey("users","realname","(realname)");
$dbtool->AddKey("users","is_admin","(is_admin)");

# replace enums with more portable and flexible formats:
$dbtool->ChangeFieldType("products", "enabled", 'tinyint(1) default "1"');

$dbtool->DropField("test_result_logs", "log_path");
$dbtool->AddField("test_result_logs", "log_text", "longtext");
$dbtool->AddKey("test_result_logs", "log_text", "(log_text(255))");

$dbtool->AddField("test_results", "valid", "tinyint(1) default '1'");
$dbtool->AddField("test_results", "vetted", "tinyint(1) default '0'");
$dbtool->AddField("test_results", "validated_by_user_id", "int(11) default '0'");
$dbtool->AddField("test_results", "vetted_by_user_id", "int(11) default '0'");
$dbtool->AddField("test_results", "validated_timestamp", "datetime");
$dbtool->AddField("test_results", "vetted_timestamp", "datetime");
$dbtool->AddKey("test_results", "valid", "(valid)");
$dbtool->AddKey("test_results", "vetted", "(vetted)");
$dbtool->AddKey("test_results", "validated_by_user_id", "(validated_by_user_id)");
$dbtool->AddKey("test_results", "vetted_by_user_id", "(vetted_by_user_id)");
$dbtool->AddKey("test_results", "validated_timestamp", "(valid)");
$dbtool->AddKey("test_results", "vetted_timestamp", "(vetted)");
$dbtool->DropField("test_results", "validity_id");
$dbtool->DropField("test_results", "vetting_status_id");
$dbtool->DropTable("validity_lookup");
$dbtool->DropTable("vetting_status_lookup");

$dbtool->RenameTable("test_groups","testgroups");
$dbtool->AddField("testgroups", "enabled", "tinyint(1) NO NULL default '1'");
$dbtool->AddKey("testgroups","enabled","(enabled)");
$dbtool->DropField("testgroups", "obsolete");
$dbtool->DropField("testgroups", "expiration_days");

$dbtool->AddField("subgroups", "enabled", "tinyint(1) NOT NULL default '1'");
$dbtool->AddKey("subgroups","enabled","(enabled)");
$dbtool->AddField("subgroups", "product_id", "tinyint(4) NOT NULL");
$dbtool->AddKey("subgroups","product_id","(product_id)");
$dbtool->DropField("subgroups", "testgroup_id");

$dbtool->AddField("users", "enabled", "tinyint(1) NOT NULL default '1'");
$dbtool->AddKey("users","enabled","(enabled)");
$dbtool->DropField("users", "disabled");

$dbtool->DropTable("test_status_lookup");

# Remove reference to test_status_lookup
$dbtool->RenameTable("tests","testcases");
$dbtool->AddField("testcases", "enabled", "tinyint(1) NOT NULL default '1'");
$dbtool->AddKey("testcases","enabled","(enabled)");
$dbtool->DropIndex("testcases", "test_id");
$dbtool->RenameField("testcases", "test_id", "testcase_id");
$dbtool->AddKey("testcases","testcase_id","(testcase_id)");
$dbtool->AddKey("testcases","summary_2","(summary, steps, expected_results)");
$dbtool->ChangeFieldType("testcases", "community_enabled", 'tinyint(1) default "1"');
$dbtool->AddField("testcases", "product_id", "tinyint(4) NOT NULL");
$dbtool->AddKey("testcases","product_id","(product_id)");
$dbtool->DropField("testcases", "subgroup_id");

$dbtool->DropIndex("test_results", "test_id");
$dbtool->RenameField("test_results", "test_id", "testcase_id");
$dbtool->AddKey("test_results","testcase_id","(testcase_id)");
$dbtool->RenameField("test_results", "buildid", "build_id");
$dbtool->ChangeFieldType("test_results", "build_id", 'int(10) unsigned');
$dbtool->AddKey("test_results","build_id","(build_id)");
$dbtool->DropIndex("test_results", "result_id");
$dbtool->RenameField("test_results", "result_id", "result_status_id");
$dbtool->AddKey("test_results","result_status_id","(result_status_id)");
$dbtool->DropField("test_results", "platform_id");

$dbtool->AddField("branches", "enabled", "tinyint(1) NOT NULL default '1'");
$dbtool->AddKey("branches","enabled","(enabled)");

$dbtool->DropField("platforms", "product_id");

$dbtool->AddField("subgroup_testgroups", "sort_order", "smallint(6) NOT NULL default '1'");
$dbtool->AddKey("subgroup_testgroups","sort_order","(sort_order)");
$dbtool->AddField("testcase_subgroups", "sort_order", "smallint(6) NOT NULL default '1'");
$dbtool->AddKey("testcase_subgroups","sort_order","(sort_order)");
$dbtool->DropField("subgroups", "sort_order");
$dbtool->DropField("testcases", "sort_order");

$dbtool->AddField("users", "authtoken", "varchar(255)");
$dbtool->DropIndex("users", "key contact_info_fulltext (email, realname, irc_nickname)");
$dbtool->AddFullText("users", "key", "contact_info_fulltext (email, realname, irc_nickname)");

# zll 2006-06-15: users.irc_nickname cannot have a unique index, since 
# many users have a null nickname:
$dbtool->DropIndex("users", "irc_nickname");
$dbtool->AddKey("users", "irc_nickname", "(irc_nickname)");

# this should be a normal index, not a fulltext index
$dbtool->DropIndex("users", "key contact_info (email, realname, irc_nickname)");
$dbtool->AddKey("users", 'contact_info (email, realname, irc_nickname)', '');

# make logs have a many-to-many relationship with test_results
$dbtool->DropIndex("test_result_logs", "test_result_id");
$dbtool->DropField("test_result_logs", "test_result_id");

$dbtool->AddField("test_results", "is_automated_result", "tinyint(1) not null default '0'");

$dbtool->AddField("test_runs", "recommended", "tinyint(1) not null default '0'");
$dbtool->AddKey("test_runs", 'recommended (recommended)', '');
$dbtool->AddField("test_runs", "version", "smallint(6) not null default '1'");
$dbtool->AddKey("test_runs", 'version (version)', '');
$dbtool->AddField("test_runs", "sort_order", "tinyint(2) not null default '1'");
$dbtool->AddKey("test_runs", 'sort_order (sort_order)', '');
$dbtool->AddField("test_run_testgroups", "sort_order", "smallint(6) not null default '1'");
$dbtool->AddKey("test_run_testgroups", 'sort_order (sort_order)', '');

# zll: upgrade to new-world group permission system
# do this in a separate package to avoid namespace polution if we're 
# creating the intial db
$dbtool->RenameField("users", "is_admin", "is_admin_old");
package CreateAdminGroups;
require 'Litmus/DB/SecurityGroup.pm';
Litmus::DB::SecurityGroup->import();
Litmus::DB::SecurityGroup->upgradeGroups();
$dbtool->DropField("users", "is_admin_old");

package main;

$dbtool->ChangeFieldType("test_result_bugs", "test_result_id", 'int(11) NOT NULL');
$dbtool->DropPrimaryKey('test_result_bugs');
$dbtool->AddPrimaryKey('test_result_bugs',"(test_result_id,bug_id)");

$dbtool->AddKey('security_groups', '(grouptype)', '');
$dbtool->AddKey('security_groups', 'idtype (group_id, grouptype)', '');

$dbtool->RenameField("locale_lookup", "abbrev", "locale_abbrev");

$dbtool->AddField('branches','creator_id','int(11) not null');
$dbtool->AddField('branches','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('branches','creation_date','timestamp not null');
$dbtool->AddKey('branches', 'creator_id (creator_id)', '');
$dbtool->AddKey('branches', 'last_updated (last_updated)', '');
$dbtool->AddKey('branches', 'creation_date (creation_date)', '');

$dbtool->AddField('opsyses','creator_id','int(11) not null');
$dbtool->AddField('opsyses','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('opsyses','creation_date','timestamp not null');
$dbtool->AddKey('opsyses', 'creator_id (creator_id)', '');
$dbtool->AddKey('opsyses', 'last_updated (last_updated)', '');
$dbtool->AddKey('opsyses', 'creation_date (creation_date)', '');

$dbtool->AddField('platforms','creator_id','int(11) not null');
$dbtool->AddField('platforms','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('platforms','creation_date','timestamp not null');
$dbtool->AddKey('platforms', 'creator_id (creator_id)', '');
$dbtool->AddKey('platforms', 'last_updated (last_updated)', '');
$dbtool->AddKey('platforms', 'creation_date (creation_date)', '');

$dbtool->AddField('products','creator_id','int(11) not null');
$dbtool->AddField('products','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('products','creation_date','timestamp not null');
$dbtool->AddKey('products', 'creator_id (creator_id)', '');
$dbtool->AddKey('products', 'last_updated (last_updated)', '');
$dbtool->AddKey('products', 'creation_date (creation_date)', '');

$dbtool->AddField('subgroups','creator_id','int(11) not null');
$dbtool->AddField('subgroups','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('subgroups','creation_date','timestamp not null');
$dbtool->AddKey('subgroups', 'creator_id (creator_id)', '');
$dbtool->AddKey('subgroups', 'last_updated (last_updated)', '');
$dbtool->AddKey('subgroups', 'creation_date (creation_date)', '');

$dbtool->ChangeFieldType("test_result_bugs", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
");
$dbtool->ChangeFieldType("test_result_comments", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMES
TAMP");
$dbtool->ChangeFieldType("test_result_logs", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
");
$dbtool->ChangeFieldType("test_results", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP");
$dbtool->ChangeFieldType("test_runs", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP");

$dbtool->ChangeFieldType("testcases", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP");

$dbtool->ChangeFieldType("testdays", "last_updated", "timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP");
$dbtool->AddField('testdays','creator_id','int(11) not null');
$dbtool->AddField('testdays','creation_date','timestamp not null');
$dbtool->AddKey('testdays', 'creator_id (creator_id)', '');
$dbtool->AddKey('testdays', 'creation_date (creation_date)', '');

$dbtool->AddField('testgroups','creator_id','int(11) not null');
$dbtool->AddField('testgroups','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('testgroups','creation_date','timestamp not null');
$dbtool->AddKey('testgroups', 'creator_id (creator_id)', '');
$dbtool->AddKey('testgroups', 'last_updated (last_updated)', '');
$dbtool->AddKey('testgroups', 'creation_date (creation_date)', '');

$dbtool->AddField('users','last_updated','timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP');
$dbtool->AddField('users','creation_date','timestamp not null');
$dbtool->AddKey('users', 'last_updated (last_updated)', '');
$dbtool->AddKey('users', 'creation_date (creation_date)', '');

$dbtool->ChangeFieldType("test_results", "build_id", "bigint(14) unsigned DEFAULT NULL");
$dbtool->ChangeFieldType("test_run_criteria", "build_id", "bigint(14) unsigned DEFAULT NULL");
$dbtool->ChangeFieldType("testdays", "build_id", "bigint(14) unsigned DEFAULT NULL");

print "Schema update complete.\n\n";

print "Done.\n";

exit;

#########################################################################
sub usage() {
  print "./populatedb.pl [-h|--help] [-r|--resetdb]\n";
} 
```

----------------------------> SQL查询

这就是我得到的：

```
DBD::mysql::st execute failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE = MYISAM' at line 10 at ./populatedb.pl line 123.
Creating table build_type_lookup ...
mysql query: CREATE TABLE build_type_lookup (
build_type_id tinyint(4) not null primary key auto_increment,
     name varchar(64) not null,

     index(name)
) TYPE = MYISAM
DBD::mysql::st execute failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE = MYISAM' at line 6 at ./populatedb.pl line 123.
Creating table testgroups ...
mysql query: CREATE TABLE testgroups (
testgroup_id smallint(6) not null primary key auto_increment,
     product_id tinyint(4) not null,
     name varchar(64) not null,
     enabled tinyint(1) default "1",
         branch_id smallint(6) not null,     
         last_updated timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
         creation_date timestamp not null,
         creator_id int(11) not null,

     index(product_id),
     index(name),
     index(enabled),
         index(branch_id),
         index(last_updated),
         index(creation_date),
         index(creator_id)
) TYPE = MYISAM 
```

# javascript - 如何在 AngularJS 中处理锚散列链接

> ID：14712223
> 
> 赞同：324
> 
> 时间：2013-02-05T16:29:38.017
> 
> 标签：javascript, angularjs, anchor, hashtag

你们中有人知道如何在**AngularJS**中很好地处理锚散列链接吗？

我有一个简单的常见问题页面的以下标记

```
<a href="#faq-1">Question 1</a>
<a href="#faq-2">Question 2</a>
<a href="#faq-3">Question 3</a>

<h3 id="faq-1">Question 1</h3>
<h3 id="faq-2">Question 2</h3>
<h3 id="fa1-3">Question 3</h3> 
```

当单击上述任何链接时，AngularJS 拦截并将我路由到一个完全不同的页面（在我的情况下，一个 404 页面，因为没有与链接匹配的路由。）

我的第一个想法是创建一个匹配“ **/faq/:chapter** ”的路由，并在相应的控制器中检查`$routeParams.chapter`匹配的元素，然后使用 jQuery 向下滚动到它。

但后来 AngularJS 又惹恼了我，无论如何都只是滚动到页面顶部。

那么，这里的任何人过去做过类似的事情并且知道一个好的解决方案吗？

编辑：切换到 html5Mode 应该可以解决我的问题，但无论如何我们都必须支持 IE8+，所以我担心这不是一个可接受的解决方案：/

* * *

## 回答 #1

> 赞同：379
> 
> 时间：2013-02-05T21:14:00.133

你正在寻找[`$anchorScroll()`](https://docs.angularjs.org/api/ng/service/$anchorScroll).

[这是（蹩脚的）文档。](https://docs.angularjs.org/api/ng/service/$anchorScroll)

[这是来源。](https://github.com/angular/angular.js/blob/master/src/ng/anchorScroll.js)

基本上你只需要注入它并在你的控制器中调用它，它就会滚动到任何带有 id 的元素`$location.hash()`

```
app.controller('TestCtrl', function($scope, $location, $anchorScroll) {
   $scope.scrollTo = function(id) {
      $location.hash(id);
      $anchorScroll();
   }
});

<a ng-click="scrollTo('foo')">Foo</a>

<div id="foo">Here you are</div> 
```

[这是一个 plunker 来演示](http://plnkr.co/edit/PCO051UJS8EHbdkmFV40?p=preview)

**编辑：将此与路由一起使用**

像往常一样设置您的角度路由，然后只需添加以下代码。

```
app.run(function($rootScope, $location, $anchorScroll, $routeParams) {
  //when the route is changed scroll to the proper element.
  $rootScope.$on('$routeChangeSuccess', function(newRoute, oldRoute) {
    $location.hash($routeParams.scrollTo);
    $anchorScroll();  
  });
}); 
```

您的链接将如下所示：

```
<a href="#/test?scrollTo=foo">Test/Foo</a> 
```

这是一个[使用路由和 $anchorScroll 演示滚动的 Plunker](http://plnkr.co/edit/De6bBrkHpojgAbEvHszu)

**甚至更简单：**

```
app.run(function($rootScope, $location, $anchorScroll) {
  //when the route is changed scroll to the proper element.
  $rootScope.$on('$routeChangeSuccess', function(newRoute, oldRoute) {
    if($location.hash()) $anchorScroll();  
  });
}); 
```

您的链接将如下所示：

```
<a href="#/test#foo">Test/Foo</a> 
```

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2013-04-10T20:13:01.617

就我而言，我注意到如果我修改了`$location.hash()`. 以下技巧奏效了..

```
$scope.scrollTo = function(id) {
    var old = $location.hash();
    $location.hash(id);
    $anchorScroll();
    //reset to old to keep any additional routing logic from kicking in
    $location.hash(old);
}; 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2015-07-19T20:33:18.487

`target="_self"`创建链接时无需更改任何路由或其他任何需要使用的东西

例子：

```
<a href="#faq-1" target="_self">Question 1</a>
<a href="#faq-2" target="_self">Question 2</a>
<a href="#faq-3" target="_self">Question 3</a> 
```

**并在您的html**元素 中使用该`id`属性，如下所示：

 **```
<h3 id="faq-1">Question 1</h3>
<h3 id="faq-2">Question 2</h3>
<h3 id="faq-3">Question 3</h3> 
```

没有必要使用评论中指出/提到的## ;-)

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2014-04-02T07:34:41.630

```
<a href="##faq-1">Question 1</a>
<a href="##faq-2">Question 2</a>
<a href="##faq-3">Question 3</a>

<h3 id="faq-1">Question 1</h3>
<h3 id="faq-2">Question 2</h3>
<h3 id="faq-3">Question 3</h3> 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2013-10-14T18:57:10.717

如果你总是知道路线，你可以像这样简单地附加锚点：

```
href="#/route#anchorID 
```

`route`当前的角度路线在哪里并与页面上的某个位置`anchorID`匹配`<a id="anchorID">`

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-01-27T04:27:33.167

`$anchorScroll`适用于此，但在更新的 Angular 版本中有更好的方法来使用它。

现在，`$anchorScroll`接受哈希作为可选参数，因此您根本不必更改`$location.hash`。（[文档](https://docs.angularjs.org/api/ng/service/$anchorScroll)）

这是最好的解决方案，因为它根本不影响路线。我无法让任何其他解决方案发挥作用，因为我正在使用 ngRoute 并且一旦我设置路由就会重新加载`$location.hash(id)`，然后`$anchorScroll`才能发挥它的魔力。

以下是如何使用它...首先，在指令或控制器中：

```
$scope.scrollTo = function (id) {
  $anchorScroll(id);  
} 
```

然后在视图中：

```
<a href="" ng-click="scrollTo(id)">Text</a> 
```

此外，如果您需要考虑固定导航栏（或其他 UI），您可以像这样设置 $anchorScroll 的偏移量（在主模块的运行功能中）：

```
.run(function ($anchorScroll) {
   //this will make anchorScroll scroll to the div minus 50px
   $anchorScroll.yOffset = 50;
}); 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2013-07-29T16:05:17.993

这是我使用指令的解决方案，它看起来更像 Angular-y，因为我们正在处理 DOM：

[Plnkr 在这里](http://plnkr.co/edit/Sl2V4u3tVzsqEj7ttgNi?p=preview)

[github](https://github.com/khalilravanna/scrollTo)

## 代码

```
angular.module('app', [])
.directive('scrollTo', function ($location, $anchorScroll) {
  return function(scope, element, attrs) {

    element.bind('click', function(event) {
        event.stopPropagation();
        var off = scope.$on('$locationChangeStart', function(ev) {
            off();
            ev.preventDefault();
        });
        var location = attrs.scrollTo;
        $location.hash(location);
        $anchorScroll();
    });

  };
}); 
```

## HTML

```
<ul>
  <li><a href="" scroll-to="section1">Section 1</a></li>
  <li><a href="" scroll-to="section2">Section 2</a></li>
</ul>

<h1 id="section1">Hi, I'm section 1</h1>
<p>
Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. 
 Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris. 
Hi mindless mortuis soulless creaturas, imo evil stalking monstra adventus resi dentevil vultus comedat cerebella viventium. 
Nescio brains an Undead zombies. Sicut malus putrid voodoo horror. Nigh tofth eliv ingdead.
</p>

<h1 id="section2">I'm totally section 2</h1>
<p>
Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. 
 Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris. 
Hi mindless mortuis soulless creaturas, imo evil stalking monstra adventus resi dentevil vultus comedat cerebella viventium. 
Nescio brains an Undead zombies. Sicut malus putrid voodoo horror. Nigh tofth eliv ingdead.
</p> 
```

我使用了 $anchorScroll 服务。为了抵消伴随哈希变化的页面刷新，我继续并取消了 locationChangeStart 事件。这对我有用，因为我有一个连接到 ng-switch 的帮助页面，刷新基本上会破坏应用程序。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-02-05T18:23:07.700

尝试为角度路由设置哈希前缀`$locationProvider.hashPrefix('!')`

完整示例：

```
angular.module('app', [])
  .config(['$routeProvider', '$locationProvider', 
    function($routeProvider, $locationProvider){
      $routeProvider.when( ... );
      $locationProvider.hashPrefix('!');
    }
  ]) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-09-11T13:06:08.803

我在我的应用程序的路由逻辑中解决了这个问题。

```
function config($routeProvider) {
  $routeProvider
    .when('/', {
      templateUrl: '/partials/search.html',
      controller: 'ctrlMain'
    })
    .otherwise({
      // Angular interferes with anchor links, so this function preserves the
      // requested hash while still invoking the default route.
      redirectTo: function() {
        // Strips the leading '#/' from the current hash value.
        var hash = '#' + window.location.hash.replace(/^#\//g, '');
        window.location.hash = hash;
        return '/' + hash;
      }
    });
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-06-18T12:22:45.750

这是一篇旧帖子，但我花了很长时间研究各种解决方案，所以我想分享一个更简单的解决方案。只需添加标签`target="_self"`即可`<a>`为我修复它。该链接有效，并将我带到页面上的正确位置。

但是，Angular 仍然会在 URL 中使用 # 注入一些奇怪的东西，因此在使用此方法后，使用后退按钮进行导航等可能会遇到麻烦。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-06-24T14:48:29.940

这可能是 ngView 的一个新属性，但我已经能够`angular-route`使用该`ngView autoscroll`属性和“双哈希”使其锚散列链接一起使用。

[ngView（见自动滚动）](https://docs.angularjs.org/api/ngRoute/directive/ngView "带有自动滚动功能的 ngView")

（以下代码与 angular-strap 一起使用）

```
<!-- use the autoscroll attribute to scroll to hash on $viewContentLoaded -->    
<div ng-view="" autoscroll></div>

<!-- A.href link for bs-scrollspy from angular-strap -->
<!-- A.ngHref for autoscroll on current route without a location change -->
<ul class="nav bs-sidenav">
  <li data-target="#main-html5"><a href="#main-html5" ng-href="##main-html5">HTML5</a></li>
  <li data-target="#main-angular"><a href="#main-angular" ng-href="##main-angular" >Angular</a></li>
  <li data-target="#main-karma"><a href="#main-karma" ng-href="##main-karma">Karma</a></li>
</ul> 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-12-03T19:07:35.623

我可以这样做：

```
<li>
<a href="#/#about">About</a>
</li> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-02-05T17:04:56.193

这是通过创建将滚动到指定元素的自定义指令（使用硬编码的“faq”）的一种肮脏的解决方法

```
app.directive('h3', function($routeParams) {
  return {
    restrict: 'E',
    link: function(scope, element, attrs){        
        if ('faq'+$routeParams.v == attrs.id) {
          setTimeout(function() {
             window.scrollTo(0, element[0].offsetTop);
          },1);        
        }
    }
  };
}); 
```

[http://plnkr.co/edit/Po37JFeP5IsNoz5ZycFs?p=preview](http://plnkr.co/edit/Po37JFeP5IsNoz5ZycFs?p=preview)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-05-19T20:32:43.520

```
<a href="/#/#faq-1">Question 1</a>
<a href="/#/#faq-2">Question 2</a>
<a href="/#/#faq-3">Question 3</a> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-04-06T13:11:03.160

如果您不喜欢使用`ng-click`这里的替代解决方案。它使用 a`filter`根据当前状态生成正确的 url。我的示例使用*ui.router*。

**好处是用户将看到链接悬停在哪里。**

```
<a href="{{ 'my-element-id' | anchor }}">My element</a> 
```

过滤器：

```
.filter('anchor', ['$state', function($state) {
    return function(id) {
        return '/#' + $state.current.url + '#' + id;
    };
}]) 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-11-17T11:13:54.300

我使用 ng-route 的解决方案是这个简单的指令：

```
 app.directive('scrollto',
       function ($anchorScroll,$location) {
            return {
                link: function (scope, element, attrs) {
                    element.click(function (e) {
                        e.preventDefault();
                        $location.hash(attrs["scrollto"]);
                        $anchorScroll();
                    });
                }
            };
    }) 
```

html看起来像：

```
<a href="" scrollTo="yourid">link</a> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-10-24T01:55:34.440

您可以尝试使用[anchorScroll](http://docs.angularjs.org/api/ng.%24anchorScroll)。

[例子](http://plnkr.co/edit/QeU4oPJ1f0tx5b0tyFFX?p=preview)

所以控制器将是：

```
app.controller('MainCtrl', function($scope, $location, $anchorScroll, $routeParams) {
  $scope.scrollTo = function(id) {
     $location.hash(id);
     $anchorScroll();
  }
}); 
```

和观点：

```
<a href="" ng-click="scrollTo('foo')">Scroll to #foo</a> 
```

...锚ID没有秘密：

```
<div id="foo">
  This is #foo
</div> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-10-22T02:59:39.897

我试图让我的 Angular 应用在​​加载时滚动到一个锚点，并遇到了 $routeProvider 的 URL 重写规则。

经过长时间的实验，我确定了这一点：

1.  从 Angular 应用模块的 .run() 部分注册一个 document.onload 事件处理程序。
2.  在处理程序中，通过执行一些字符串操作找出原始的锚标记应该是什么。
3.  用剥离的锚标记覆盖 location.hash（这会导致 $routeProvider 立即用它的“#/”规则再次覆盖它。但这很好，因为 Angular 现在与 URL 4 中发生的事情同步）调用$anchorScroll()。

```
angular.module("bla",[]).}])
.run(function($location, $anchorScroll){
         $(document).ready(function() {
	 if(location.hash && location.hash.length>=1)    		{
			var path = location.hash;
			var potentialAnchor = path.substring(path.lastIndexOf("/")+1);
			if ($("#" + potentialAnchor).length > 0) {   // make sure this hashtag exists in the doc.                          
			    location.hash = potentialAnchor;
			    $anchorScroll();
			}
		}	 
 });
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-11-21T00:59:33.910

我不是 100% 确定这是否一直有效，但在我的应用程序中，这给了我预期的行为。

假设您在**关于**页面上，并且您有以下路线：

```
yourApp.config(['$routeProvider', 
    function($routeProvider) {
        $routeProvider.
            when('/about', {
                templateUrl: 'about.html',
                controller: 'AboutCtrl'
            }).
            otherwise({
                redirectTo: '/'
            });
        }
]); 
```

现在，在你的 HTML

```
<ul>
    <li><a href="#/about#tab1">First Part</a></li>
    <li><a href="#/about#tab2">Second Part</a></li>
    <li><a href="#/about#tab3">Third Part</a></li>                      
</ul>

<div id="tab1">1</div>
<div id="tab2">2</div>
<div id="tab3">3</div> 
```

**综上所述**

在锚点之前包含页面名称对我有用。让我知道你的想法。

**缺点**

这将重新渲染页面，然后滚动到锚点。

**更新**

更好的方法是添加以下内容：

```
<a href="#tab1" onclick="return false;">First Part</a> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-03-24T09:58:27.117

轻松获得滚动功能。它还支持**动画/平滑滚动**作为附加功能。*Angular Scroll*库的详细信息：

**Github** - [https://github.com/oblador/angular-scroll](https://github.com/oblador/angular-scroll)

**鲍尔**：`bower install --save angular-scroll`

**npm**：`npm install --save angular-scroll`

**Minfied 版本**- 只有 9kb

**平滑滚动（动画滚动）** - 是

**滚动间谍**- 是的

**文档**- 优秀

**演示**- [http://oblador.github.io/angular-scroll/](http://oblador.github.io/angular-scroll/)

希望这可以帮助。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-04-02T08:19:14.817

见[https://code.angularjs.org/1.4.10/docs/api/ngRoute/provider/$routeProvider](https://code.angularjs.org/1.4.10/docs/api/ngRoute/provider/) _

> [reloadOnSearch=true] - {boolean=} - 当只有 $location.search() 或 $location.hash() 改变时重新加载路由。

将其设置为 false 对我来说没有上述所有内容就可以了。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-04-26T21:02:39.210

基于@Stoyan，我提出了以下解决方案：

```
app.run(function($location, $anchorScroll){
    var uri = window.location.href;

    if(uri.length >= 4){

        var parts = uri.split('#!#');
        if(parts.length > 1){
            var anchor = parts[parts.length -1];
            $location.hash(anchor);
            $anchorScroll();
        }
    }
}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-01-12T13:11:13.937

在路线更改时，它将滚动到页面顶部。

```
 $scope.$on('$routeChangeSuccess', function () {
      window.scrollTo(0, 0);
  }); 
```

将此代码放在您的控制器上。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2015-02-04T19:51:00.753

在我看来@slugslog 有它，但我会改变一件事。我会改用替换，所以你不必重新设置它。

```
$scope.scrollTo = function(id) {
    var old = $location.hash();
    $location.hash(id).replace();
    $anchorScroll();
}; 
```

[文档](https://docs.angularjs.org/guide/$location)搜索“替换方法”

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2015-04-21T17:57:33.683

上面的解决方案都不适合我，但我只是尝试了这个，它奏效了，

```
<a href="#/#faq-1">Question 1</a> 
```

所以我意识到我需要通知页面从索引页面开始，然后使用传统的锚点。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2015-04-24T23:15:29.470

我正在使用 AngularJS 1.3.15，看起来我不需要做任何特别的事情。

[https://code.angularjs.org/1.3.15/docs/api/ng/provider/](https://code.angularjs.org/1.3.15/docs/api/ng/provider/) $anchorScrollProvider

因此，以下内容在我的 html 中适用于我：

```
<ul>
  <li ng-repeat="page in pages"><a ng-href="#{{'id-'+id}}">{{id}}</a>
  </li>
</ul>
<div ng-attr-id="{{'id-'+id}}" </div> 
```

我根本不需要对我的控制器或 JavaScript 进行任何更改。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-03-30T16:09:55.047

有时在 angularjs 应用程序哈希导航中不起作用，并且引导 jquery javascript 库广泛使用这种类型的导航，使其工作添加`target="_self"`到锚标记。例如`<a data-toggle="tab" href="#id_of_div_to_navigate" target="_self">`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-07-08T14:42:02.867

试试这个将解决锚问题。

```
app.run(function($location, $anchorScroll){
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();

            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
}); 
```**

# javascript - jquery选择元素的方法

> ID：14712227
> 
> 赞同：0
> 
> 时间：2013-02-05T16:29:49.557
> 
> 标签：javascript, jquery

以下代码之间的真正区别是什么：

```
<p>Maizere1</p>
<p>Maizere2</p>
<p>Maizere3</p>
<script>
$("p").text($(this).text()).get(0);

vs

$("<p>").text($(this).text()).get(0);//actually this line is what giving me trouble 
```

```
what does $("<p>"> this do?
i heard that $("<p>") will first actually check where the element exist or not ,if not only will create element 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:31:50.837

`$('<p>')`不是一个有效的 jquery[选择器](http://api.jquery.com/element-selector/ "选择器")，但它会创建一个`<p>`我认为不是您要在这里解决的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:34:20.230

`$("p")`- 选择 p 元素
`$("<p>")`- 动态创建 p 元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T16:34:45.570

`$("<p>")`创建一个新元素，您可以在选择它们`.append()`时将其添加到 dom 中。`$("p")`

正确的是这样使用`$("<p>")`：`$("<p />")`. 但是 jQuery 两者都允许。

例子：

```
<p></p>

$("p").append($("<p>test</p>").addCLass("test")); 
```

结果：

```
<p class="test">
  <p>test</p>
</p> 
```

# c++ - 函数的前向声明搞砸了，说 args 是未声明的标识符

> ID：14712232
> 
> 赞同：0
> 
> 时间：2013-02-05T16:29:53.350
> 
> 标签：c++, function, forward-declaration, function-calls

这是我的代码：

*   主头文件.h

    ```
    void displaygrid(int (* _grid)[10][10] , string msg ); 
    ```

*   东西.cpp

    ```
    #include <string>
    #include "mainheader.h"

    void displaygrid(int (* _grid)[10][10], string msg = "" )
    {
       //body goes here
    } 
    ```

编译器在标题中的前向声明行说：

> _grid 和 string 是未声明的标识符

不过既然只是原型，应该不用担心存在`_grid`吧？

此外，标头包含在字符串之后，但它也不知道字符串。看起来它试图调用函数而不是前向声明。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:31:54.750

因为`string`你必须使用`std::string`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:35:25.277

它需要了解标头中的 __grid 以及字符串前向声明与否。你至少需要在`struct __grid;`它上面的某个地方放置一个或类似的东西，这样它就可以知道它是什么。字符串也一样...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:35:56.930

您需要`#include <string>`在您的`mainheader.h`和引用`string`为`std::string`. 您还需要包括获得所需的任何内容`_grid`：

```
//mainheader.h
#include <string>
void displaygrid(int (* _grid)[10][10] , std::string msg ); 
```

相关帖子[在这里](https://stackoverflow.com/questions/14698205/c-headers-redefining-declaring-mixup/14698224#14698224)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:35:26.987

您还需要头文件中的默认参数，而不是实现中的默认参数，因为您希望调用它的代码*知道*可以`msg`默认。

# php - 获取字符串未正确发送变量

> ID：14712236
> 
> 赞同：1
> 
> 时间：2013-02-05T16:30:09.480
> 
> 标签：php, ajax, get

至少我认为这是我的问题^基本上，它真的很简单，我将一个 ajax 制作的 get 字符串发送到一个 php 脚本，但是该字符串显然没有被正确分解。

阿贾克斯片段：

```
xmlhttp.open("GET","ajaxQuery.php?name="+str+"&identifier="+id,true);
xmlhttp.send(); 
```

PHP

```
//variables sent from Ajax
$owner = $_GET['name'];
$identifier = $_GET['identifier']; 
```

由于某种原因`$_GET['identifier']`是空的。一个`print_r($_GET)`告诉我：

```
Array
(
[name] => John Doeidentifier=1
) 
```

name is `John Doe`and the `id`is 1，但由于某种原因，它们没有分开，据我所知，我的 Get 字符串编译正确有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:35:36.210

由于其中一个字符串中的空格，该 url 可能已损坏。要解决此问题，您需要对每个变量进行编码，以便正确处理空格和其他特殊字符

`xmlhttp.open("GET","ajaxQuery.php?name="+encodeURIComponent(str)+"&identifier="+encodeURIComponent(id),true);`

# gnuplot - 将键放在 gnuplot 中的多图图下方

> ID：14712251
> 
> 赞同：3
> 
> 时间：2013-02-05T16:30:52.943
> 
> 标签：gnuplot

正如标题所示，我想将图例放置在多图图下方。我只为其中一个图添加了图例，因为所有的线型都相同。我遇到的问题是，如果我通过添加键`set key below`，绘图本身会被调整大小以适合画布内的（大）键。我宁愿保持地块的大小。我尝试使用 将密钥添加为多图中的附加图`set key inside`，但如果它太大，则密钥可能会与图重叠。我正在使用 epslatex 终端。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T17:40:54.107

这是一种使用一些函数来帮助调整绘图中边距位置的方法：

```
#!/usr/bin/env gnuplot

### n: change this parameter to equal the number of data sets to be plotted
n = 3
# t: top margin in pixels
t = 75.0
# b: key height in pixels (bottom margin)
b = 300.0
# h: height of output in pixels
h = 150.0*n + t + b

### define functions to help set top/bottom margins
top(i,n,h,t,b) = 1.0 - (t+(h-t-b)*(i-1)/n)/h
bot(i,n,h,t,b) = 1.0 - (t+(h-t-b)*i/n)/h

### first set up some basic plot parameters
set term pngcairo enhanced size 800,h font 'FreeMono-Bold,14'
set output 'bigkey.png'

set title 'Big Key Plot'
set ylabel 'Y Axis'

set multiplot layout (n+1),1
### First plot
# change only plot command here
currentplot = 1
set tmargin at screen top(currentplot,n,h,t,b)
set bmargin at screen bot(currentplot,n,h,t,b)
unset key
unset xtics
plot sin(1*x) title 'Line 1', \
     sin(2*x) title 'Line 2', \
     sin(3*x) title 'Line 3', \
     sin(4*x) title 'Line 4', \
     sin(5*x) title 'Line 5', \
     sin(6*x) title 'Line 6', \
     sin(7*x) title 'Line 7'
### Middle plot
# copy and paste this code to make more middle plots
currentplot = currentplot + 1
set tmargin at screen top(currentplot,n,h,t,b)
set bmargin at screen bot(currentplot,n,h,t,b)
unset title
replot
### Last plot
# change only plot command here
currentplot = currentplot + 1
set tmargin at screen top(currentplot,n,h,t,b)
set bmargin at screen bot(currentplot,n,h,t,b)
set xlabel 'X Axis'
set xtics
replot
### Last (key) plot
set tmargin at screen bot(n,n,h,t,b)
set bmargin at screen 0
set key center center
set border 0
unset tics
unset xlabel
unset ylabel
set yrange [0:1]
plot 2 t 'Line 1', \
     2 t 'Line 2', \
     2 t 'Line 3', \
     2 t 'Line 4', \
     2 t 'Line 5', \
     2 t 'Line 6', \
     2 t 'Line 7'

unset multiplot 
```

结果如下： ![在此处输入图像描述](../Images/8ff0e5ffb284db2926ec6bf208fbafd8.png)

您必须手动调整的内容是绘图的数量和底部边距的大小，这是绘制关键点的位置。评论通常会说明您必须在哪里进行更改。

我将密钥单独放在一个情节中，以便很容易保持其他情节的大小完全相同。当 y 范围为 0 到 1 时绘制数字 2 可防止线条显示在关键图中。

这主要基于我[在这里](https://stackoverflow.com/questions/13848783/gnuplot-do-not-overlap-lines/13850518#13850518)的回答，这就是为什么我的情节都很感人。如果您想要图之间的间隙，您可以使用附加边距参数调整 top() 和 bot() 函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T18:10:49.480

如果没有更多细节，很难知道这是否有用，但 gnuplot 允许您以绝对值指定键的位置：

```
set key at screen 0.5,screen 0.1 #for example 
```

这可能使您可以将其移动到您想要的任何位置...

# python - BeautifulSoup 串

> ID：14712256
> 
> 赞同：0
> 
> 时间：2013-02-05T16:31:07.857
> 
> 标签：python, beautifulsoup

我如何从这个 HTML 中获得 500,000 英镑的价格？

```
<p class="price" id="price-detail">
<span class="price-modifier">From</span>
        £500,000
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:37:32.990

使用类`.next_sibling`查找元素的结果`price-modifier`？

```
print unicode(soup.find(class_='price-modifier').next_sibling) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T20:46:18.203

它不是一个非常优雅的解决方案，但它可以替代 Martijn 的建议：

```
p = soup('p',{'id':'price-detail'})[0]
modifier = p('span',{'class':'price-modifier'})[0].contents[0]
price = p.findAll(text=True)

if modifier in price:
    price.remove(modifier)

print ' '.join(x for x in price) 
```

# gwt - ChartWrapper：“无法读取未定义的属性‘计数’”

> ID：14712259
> 
> 赞同：1
> 
> 时间：2013-02-05T16:31:15.657
> 
> 标签：gwt, google-visualization, jsni

当我想使用 Google Visualization API 的 ChartWrapper 时，我遇到了一个奇怪的问题，我使用 smartgwt 和 JSNI 方法将图表放入窗口，我成功使用了普通图表（PieChart，LineChart ...），但使用ChartWrapper 我有一个无法解决的错误：

```
"Cannot read property 'count' of undefined" 
```

ChartWrapper call 'count' 中没有属性

我用教程的例子

```
google.load('visualization', '1');   // Don't need to specify chart libraries!
google.setOnLoadCallback(drawVisualization);
function drawVisualization() {
    var wrapper = new google.visualization.ChartWrapper({
      chartType: 'ColumnChart',
      dataTable: [['', 'Germany', 'USA', 'Brazil', 'Canada', 'France', 'RU'],
                  ['', 700, 300, 400, 500, 600, 800]],
      options: {'title': 'Countries'},
      containerId: 'vis_div'
    });
    wrapper.draw();
  } 
```

我也试图绘制一个 ChartEditor（我使用官方页面中的一个简单示例）但我也有同样的错误：

# scala - Play 2.0 / Scala：加载模块参考配置损坏？

> ID：14712264
> 
> 赞同：1
> 
> 时间：2013-02-05T16:31:34.103
> 
> 标签：scala, playframework-2.0, sbt

我已经开始将一些功能提取到一个单独的 Play 模块中，以及一些默认配置，我将它们放入`conf/reference.conf`模块中的文件中，如[Typesafe 的`Config`库](https://github.com/typesafehub/config#longer-examples)中所述。这种配置可以很好地获取，例如通过在模块上下文中运行的功能测试。

但是，一旦我尝试根据所述模块启动应用程序，我似乎遇到了一些类加载器问题，例如，我从 Akka 子系统收到一些奇怪的抱怨：

`No configuration setting found for key 'akka.version'`

一旦我从我的模块中删除文件（没有其他更改），这个异常就会消失`reference.conf`，但显然应用程序将不再工作。目前，模块配置在一个文件`conf/module-reference.conf`中，我`include`在主应用程序的配置中。这有效，但我想摆脱`include`.

我怀疑我`reference.conf`以某种方式影响了 Akka 提供的那个。以前有人遇到过这个问题吗？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:25:17.433

看起来我是一些奇怪的文件系统不一致的受害者：

*   我正在使用将模块部署到 Play 的本地存储库`play publish-locally`
*   这个相同的存储库位于 Eclipse 的构建路径上（使用 创建`play eclipsify`）
*   有时，Play 主应用程序似乎会在模块的 JAR 以某种方式损坏时拾取它

### 解决方法：

*   关闭日食
*   在本地部署模块
*   运行主应用程序的干净构建

使用此过程，应用程序的配置工作正常。

### 提示

在研究这个问题时，我发现了 Typesafe 的 Config 库的一个有用功能。您可以使用以下代码行获取整个配置树，包括每个条目的来源：

```
val configDump: String = current.configuration().underlying.root().render() 
```

例如，将其转储到文件中以供进一步分析。

# asp.net-mvc - 用户可以通过表单在 SQL 数据库中创建表吗？

> ID：14712265
> 
> 赞同：0
> 
> 时间：2013-02-05T16:31:35.783
> 
> 标签：asp.net-mvc

我正在开发一个新项目，该项目将允许用户通过一个简单的表单创建新的派对活动，我需要将这些数据存储为每个新活动的新表。我想知道的是用户是否可以通过提交表单在我的数据库中创建新表？我知道您可以将数据写入列，但我不知道您是否真的可以编写带有列的实际表。

我正在使用 MVC 4，这对我来说有点新鲜，我不确定这样的事情是否可能，所以想在我转向备用路径之前检查以确保。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:34:59.700

*首先：* **停止使用那个设计**

在继续之前阅读此页面：[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)

您的数据库的架构应如下所示：

```
users
id,name,etc...

parties
id,user_id,date,etc... 
```

使用您的方式，您将在路上遇到大量问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:35:39.093

> 我想知道的是用户是否可以通过提交表单在我的数据库中创建新表？

当然这是可能的。如果在 ASP.NET MVC 中提交表单后无法在数据库中插入记录，那么这个框架将是无用的垃圾。

> 我知道您可以将数据写入列，但我不知道您是否真的可以编写带有列的实际表。

您可以查看普通[`ADO.NET`](http://msdn.microsoft.com/en-us/library/e80y5yhx.aspx)或 ORM，例如[`Entity Framework`](http://msdn.microsoft.com/en-US/data/ef)它们都允许您查询关系数据库。[顺便说一句，您可以考虑阅读http://asp.net/mvc](http://asp.net/mvc)站点上的一些入门教程。这是[`one example`](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)你可能会经历的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:36:20.123

是的，您可以编写 SQL DDL 语句。“ [CREATE TABLE](http://en.wikipedia.org/wiki/Data_definition_language#CREATE_TABLE_statement) ” 是您在这种情况下需要使用的具体表达式。根据您使用的数据库，它可能采用不同的语法

# python - 汇总来自多个文件的列的值

> ID：14712268
> 
> 赞同：2
> 
> 时间：2013-02-05T16:31:41.100
> 
> 标签：python

我在这里有一个小问题，我试图总结来自多个文件（50）的条目，每个文件都包含 3 列。例如，使用前 3 个文件：file1.txt、file2.txt、file3.txt，它们看起来像：

文件 1.txt：

```
2 3 4
1 5 6
5 4 7 
```

文件2.txt：

```
1 2 1
2 3 2
4 3 1 
```

文件 3.txt：

```
6 1 1
1 3 0
3 4 5 
```

所以我的问题是我如何总结来自 50 个文件的第一列、第二列和第三列的所有条目，最终得到一个看起来像这样的文件：

输出.txt：

```
9 6 6
4 11 8
12 11 13 
```

我已经阅读了 50 个文件并附加了它们，但实际上我在逐个汇总条目时遇到了麻烦。

所以我这样做了：

```
for p in range(50):
    locals()['first_col%d' % p] = []
    locals()['second_col%d' % p] = []
    locals()['third_col%d' % i] = []

for i in range(1,50):
    f = open("file"+str(i)+".txt","r")
    for line in f:
        locals()['fist_col%d' % i].append(float(line.split()[0]))
        locals()['second_col%d' % i].append(float(line.split()[1]))
        locals()['third_col%d' % i].append(float(line.split()[2]))

f.close() 
```

我正在尝试将其放入一个循环中，该循环将读取所有 first_cols（first_col1、first_col2、first_col3 等）、second_cols 和 third_cols 并总结条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:14:22.850

```
#!/usr/bin/python
b_list = []
for l in range(1,4):
    file=open('/Users/sgeorge/file%i.txt' % l, 'r')
    m1=[(i.strip()) for i in file]
    for j in m1:
        b_list.append(filter(None,[(k.strip()) for k in j]))
#print b_list
a = [[0,0,0],[0,0,0],[0,0,0]]
for i in range(0,9,3):
    a[0][0] += int(b_list[i][0])
    a[0][1] += int(b_list[i][1])
    a[0][2] += int(b_list[i][2])
for i in range(1,9,3):
    a[1][0] += int(b_list[i][0])
    a[1][1] += int(b_list[i][1])
    a[1][2] += int(b_list[i][2])

for i in range(2,9,3):
    a[2][0] += int(b_list[i][0])
    a[2][1] += int(b_list[i][1])
    a[2][2] += int(b_list[i][2])

for j in a:
    print j[0],j[1],j[2] 
```

**输出：**

```
$ python stack.py 
9 6 6
4 11 8
12 11 13 
```

上面的脚本只处理三个文件`file1.txt`（`file2.txt`和`file3.txt`）

如果要处理 50 个此类文件，请使用以下命令：

```
#!/usr/bin/python
b_list = []
for l in range(1,51):
    file=open('/Users/sgeorge/file%i.txt' % l, 'r')
    m1=[(i.strip()) for i in file]
    for j in m1:
        b_list.append(filter(None,[(k.strip()) for k in j]))
#print b_list
a = [[0,0,0],[0,0,0],[0,0,0]]
for i in range(0,150,3):
    a[0][0] += int(b_list[i][0])
    a[0][1] += int(b_list[i][1])
    a[0][2] += int(b_list[i][2])
for i in range(1,150,3):
    a[1][0] += int(b_list[i][0])
    a[1][1] += int(b_list[i][1])
    a[1][2] += int(b_list[i][2])

for i in range(2,150,3):
    a[2][0] += int(b_list[i][0])
    a[2][1] += int(b_list[i][1])
    a[2][2] += int(b_list[i][2])

for j in a:
    print j[0],j[1],j[2] 
```

**更新：**

```
>>> a=1
>>> b=1.1
>>> type(a)
<type 'int'>
>>> type(b)
<type 'float'>
>>> float(a)+float(b)
2.1
>>> 
```

**我上面的脚本不会处理`float`数字。对于相同的处理，请使用以下命令：**

```
#!/usr/bin/python
b_list = []
for l in range(1,4):
    file=open('/Users/sgeorge/file%i.txt' % l, 'r')
    m1=[(i.strip()) for i in file]
    for j in m1:
        b_list.append(j.replace('\n','').split(' '))
#print b_list
a = [[0,0,0],[0,0,0],[0,0,0]]
for i in range(0,9,3):
    a[0][0] += float(b_list[i][0])
    a[0][1] += float(b_list[i][1])
    a[0][2] += float(b_list[i][2])
for i in range(1,9,3):
    a[1][0] += float(b_list[i][0])
    a[1][1] += float(b_list[i][1])
    a[1][2] += float(b_list[i][2])
for i in range(2,9,3):
    a[2][0] += float(b_list[i][0])
    a[2][1] += float(b_list[i][1])
    a[2][2] += float(b_list[i][2])
for j in a:
    print j[0],j[1],j[2] 
```

**输出：**

```
$ python stack.py 
9.0 6.0 6.0
4.0 11.0 8.0
12.0 11.0 13.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:38:36.580

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html) 加载到 numpy 数组中，然后对数组求和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:05:41.960

```
In [1]: import numpy as np

In [2]: from StringIO import StringIO

In [3]: txt ="""2 3 4
   ...: 1 5 6
   ...: 5 4 7"""

In [4]: f = StringIO(txt)

In [5]: arr = np.loadtxt(f,dtype = int)

In [6]: np.sum(arr,axis = 0)
Out[6]: array([ 8, 12, 17]) 
```

# apache - 为什么在这种情况下我不能在 htaccess 中重定向？

> ID：14712272
> 
> 赞同：0
> 
> 时间：2013-02-05T16:31:56.770
> 
> 标签：apache, .htaccess

我想使用 htaccess 重定向 javascript 文件的 url：

从：

```
http://www.domain.co.uk/tracking/tracking.js 
```

至：

```
http://www/domain.co.uk/Templates/domain.co.uk/tracking/tracking.js 
```

在尝试了很多事情之后，现在我有了这个：

```
RewriteEngine on
RewriteRule tracking/tracking.js? http://www.domain.co.uk/Templates/domain.co.uk/js/tracking.js [L] 
```

问题是，使用此配置，我只能访问编写 ......../tracking/tracking.js/ 的 javascript 代码（文件）（最后带有斜线，但我不想要它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:50:25.807

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.domain\.co\.uk)$ [NC]
RewriteRule ^(tracking/tracking\.js)$ http://%1/Templates/domain.co.uk/$1 [L,R=301,NC] 
```

# sql - 如何从字符串中获取值

> ID：14712273
> 
> 赞同：-4
> 
> 时间：2013-02-05T16:31:57.267
> 
> 标签：sql, tsql

如何从 A 列中像这样从查询 sql 中获取代码和子代码

格式 ：

```
[very long name | code | subcode] 
```

例如

```
[Pear | S01 | 10]
[Pineapple | S01 | 9] 
```

PS：没有方括号，但管道分隔符是真实的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:43:55.643

尝试这个; [演示 - 用表格更新](http://sqlfiddle.com/#!3/2e19d/2)

```
--declare @s varchar(50)='[Pineapple | S01 | 9]'

select substring(yourColumn,ind1 + 1,ind2-(ind1 +1)) code, 
       substring(yourColumn,ind2 + 1,len(yourColumn)-(ind2 + 1)) subcode
FROM ( 
  SELECT yourColumn, charindex('|',yourColumn,1) ind1, 
         charindex('|',yourColumn,charindex('|',yourColumn,1)+1) ind2 
  FROM yourTable
) X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:52:43.490

假设您的代码始终是三个字母，您可以使用一些内置函数来帮助您：

```
WITH Data(Sample) AS
(
    SELECT 'Pear | S01 | 10' UNION
    SELECT 'Pineapple | S01 | 9'
)
SELECT
    SUBSTRING([Sample], CHARINDEX(' | ', [Sample], 1) + 3, 3) AS Code,
    REVERSE(SUBSTRING(REVERSE([Sample]), 1, 
        CHARINDEX(' | ', REVERSE([Sample]), 1) - 1)) AS SubCode
FROM
    data 
```

# tfs - TFS：分支时如何维护项目引用

> ID：14712275
> 
> 赞同：2
> 
> 时间：2013-02-05T16:32:04.663
> 
> 标签：tfs, branch

我们的 Visual Studio 2010 解决方案包括六个项目。六个中的一个是主应用程序，其余五个是在主应用程序中配置为项目引用的类库。我们的 TFS 源代码控制结构如下：

*   TeamProject\ClassLibries\Class1
*   TeamProject\ClassLibries\Class2 。.
*   TeamProject\WindowsApps\Application1

我需要创建一个 Application1 的分支，所以我有这个：

*   TeamProject\WindowsApps\Application1
*   TeamProject\WindowsApps\Application1-NewFeature

我的问题是，当我为 Application1 创建分支时，是否还需要为五个项目引用创建分支，无论它们是否使用新功能进行更新？如果这样做，是否需要手动更新项目引用，以便 Application1-NewFeature 知道引用 Class1-NewFeature 而不仅仅是 Class1？当我将新功能合并回主分支时，是否需要重新更新项目引用？分支对我来说是全新的，恐怕我会有一堆失控的分支和项目引用。这种情况的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:49:37.463

实际上，我发现最好将整个*解决方案*或解决方案系统分支。它不会*重复*文件，因此在您的分支中拥有您不会更改的项目并不是什么大问题。

具有讽刺意味的是，我使用的一个经验法则是，通过项目引用引用的任何内容都应该分支在一起。

# r - R 基本图形中的默认文本大小是多少？

> ID：14712277
> 
> 赞同：7
> 
> 时间：2013-02-05T16:32:22.437
> 
> 标签：r, graphics, fonts, size

我必须写一份文件，说明真的很严格。所有图形（轴标签、刻度标签、图例）内的文本大小必须为 7pt。由于某些原因，我使用基本图形包，不能使用像 ggplot2 这样的额外包。在`?par`“图形**”**（`cex`

 **R图形的默认字体大小是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:47:14.127

对于 R 的所有图形设备，默认文本大小为 12 磅，但可以通过`pointsize`在打开图形设备的函数中包含一个参数来重置它。来自`?pdf`：

> pointsize：要使用的默认点大小。严格来说，以 bp 为单位，即 1/72 英寸，但大约以磅为单位。默认为“12”。

例如，像这样打开一个设备：

```
## pdf
pdf("plot.pdf", pointsize=7)

## bitmap
bmp("plot.bmp", pointsize=7)

## graphics window on screen
x11(pointsize=7)

## etc., etc.  (See ?Devices for a list of available graphics devices.) 
```

然后，在绘制到它之后，用 . 关闭它`dev.off()`。**

# php - 使用来自多个表的信息输入新的/编辑现有的数据库记录

> ID：14712278
> 
> 赞同：0
> 
> 时间：2013-02-05T16:32:23.217
> 
> 标签：php, html, mysql, sql

因此，我有一个根据规范构建的模拟电话网站的数据库。我的数据库有一个叫做电话的表，一个叫做操作系统的表和一个叫做制造商的表。我需要创建一个表格以将新手机输入数据库。我遇到的问题是：

我基本上需要获取表格以将新记录添加到**电话**表中。但是，**phones**表也会从其他表中提取数据。这方面的一个例子是我如何将操作系统（iOS、Android、BlackBerry 和 Windows Phone）分别存储在**操作系统**表中，并且每个操作系统都分配了一个 ID（1、2、3 和 4）以及存储制造商在**制造商**表（HTC、Samsung、Apple 等），每个表都有一个自动增量 ID。我不确定如何设计表单，以便用户可以简单地使用表单将新手机添加到数据库中，或者可以在需要时将新的制造商/操作系统添加到数据库中。我必须假设添加手机/编辑现有手机的用户无法访问数据库，所以显然他们不知道制造商 ID 1 是 Apple、2 三星等。

我基本上需要结合使用 HTML 表单和随附的 PHP 页面，以便可以从数据库中添加、编辑或删除手机。在表单设计方面我会做什么，我需要使用什么 PHP 才能从多个表中添加/编辑/删除数据？

对于冗长的帖子感到抱歉，但我们将不胜感激，如果需要更多详细信息，请随时询问。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:47:39.830

对于一个简单/快速的解决方案，@Anthony Grist 的回答可以做到。但是，如果您的目标是构建一个可以自己“生活”的自动化系统，您需要`<select>`使用已经存在的选项从 PHP 构建一个，并允许用户`<select>`通过不同的 CRUD 在其中添加内容。这样做的问题是允许用户插入 iOS、iOS 5、iOS 6、iOSasdf 等；如他们所愿，因为您无法阻止这么多。如果这是您想去的情况，我建议您创建一个表格，您将使用`<select>`该表格来提供您将拥有的表格`operation_system`和`table_name`. 如果要添加新的操作系统，您将使用 PHP 为该操作系统创建一个新表，然后将其名称添加到所述表中。当用户在选择选项中选择一个操作系统时，您将选择该表并将记录插入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:39:04.093

对于选择制造商和操作系统，`<select>`元素是显而易见的选择。它创建了一个带有可选选项的下拉菜单，在传递的值和用户看到的值之间存在潜在的分离。

所以，如果你有这个：

```
<select name="manufacturer">
    <option value="1">Apple</option>
    <option value="2">HTC</option>
    <option value="3">Samsung</option>
</select> 
```

然后用户会看到 Apple、HTC 和三星作为选项。如果他们选择了三星，那么实际提交的参数值是`3`（对应于表中的 id）。

# php - 通过键值检索数组的子数组

> ID：14712279
> 
> 赞同：1
> 
> 时间：2013-02-05T16:32:26.360
> 
> 标签：php, arrays

我有以下数组（例如，真实的更大）

```
Array
(
    [0] => Array
        (
            [984ab6aebd2777ff914e3e0170699c11] => Array
                (
                  [id] => 984ab6aebd2777ff914e3e0170699c11
                  [message] => Test1

        )

    [1] => Array
        (
            [ca403872d513404291e914f0cad140de] => Array
                (
                  [id] => ca403872d513404291e914f0cad140de
                  [message] => Test2
                )

        )

    [2] => Array
        (
            [ca403872d513404291e914f0cad140de] => Array
                (
                  [id] => ca403872d513404291e914f0cad140de
                  [message] => Test3

        )

    [3] => Array
        (
            [ca403872d513404291e914f0cad140de] => Array
                (
                  [id] => ca403872d513404291e914f0cad140de
                  [message] => Test4
                )

        )
) 
```

现在我想以某种方式“访问”具有给定 ID 的子数组，例如访问 ID 为 984ab6aebd2777ff914e3e0170699c11 的子数组，然后继续在这样的 foreach 中使用该数组..

```
foreach ($array_with_specific_id as $event) {
    echo $event['message'];
} 
```

这可能吗？

编辑：

在我的模型中生成数组的 DB 代码：

```
 public function get_event_timeline($id)
   {
     $data = array();
      foreach ($id as $result) {
          $query = $this->db->query("SELECT * FROM event_timeline WHERE id = ?", array($result['id']));
          foreach ($query->result_array() as $row)
          {
               array_push($data, array($row['id'] => $row));
          }
      }

      return $data;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:44:27.180

从数据库中填充数组时，您可以创建一个额外的`$index`数组，如下所示：

```
$index = array (
    '984ab6aebd2777ff914e3e0170699c11' => ReferenceToElementInData,
    'ca403872d513404291e914f0cad140de' => ReferenceToElementInData,
    // ...
) 
```

这可以让您通过它们的 id 快速访问元素，而无需额外的 foreach 循环。当然它需要额外的内存，但这应该没问题，因为你只会保存对原始数据的引用。但是，测试一下。

这里有一个例子：

```
public function get_event_timeline($id)
{
  $data = array();

  // create an additional index array
  $index = array();

  // counter 
  $c=0;

  foreach ($id as $result) {
      $query = $this->db->query("SELECT * FROM event_timeline WHERE id = ?", array($result['id']));

      // every entry in the index is an array with references to entries in $data
      $index[$result['id']] = array();

      foreach ($query->result_array() as $row)
      {
           array_push($data, array($row['id'] => $row));
           // create an entry in the current index
           $index[$row['id']][] = &$data[$c];
           $c++;
      }
  }

  return array (
      'data' => $data,
      'index' => $index
  );
} 
```

现在您可以通过索引数组访问元素，而无需额外的 foreach 循环：

```
$entry = $index['984ab6aebd2777ff914e3e0170699c11'][0]; 
```

如果每个有多个结果`$id`（正如您在评论中提到的，您可以使用大于零的索引访问它们：

```
$entry = $index['984ab6aebd2777ff914e3e0170699c11'][1];
$entry = $index['984ab6aebd2777ff914e3e0170699c11'][2]; 
```

您可以`$id`通过调用获取每个项目的数量

```
$number = count($index['984ab6aebd2777ff914e3e0170699c11']); 
```

这与数据库中用于加速查询的索引非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:37:04.973

我可能只是摆脱了包含数组，因为它似乎没有必要。但是，您可以执行以下操作：

```
function get_message($specific_id, $arrays) {
    foreach($arrays as $array) {
        if(in_array($specific_id, $array)) {
            return $array['message'];
        }
    }
} 
```

我没有机会对此进行测试，但它*应该可以*工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:44:12.780

```
function doTheJob($inputArray, $lookingFor) {

    foreach ($inputArray as $subArray) {
        foreach ($subArray as $subKey => $innerArray) {
            if ($subKey == $lookingFor) {
                return $innerArray;
            }
        }
    }
    return NULL;
} 
```

或者，您可以使用`array_filter`而不是 external `foreach`。

# ruby-on-rails - 在表单中将 bootstrap-datepicker-rails 添加到 date_select

> ID：14712281
> 
> 赞同：6
> 
> 时间：2013-02-05T16:32:31.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, twitter-bootstrap, datepicker

所以，我有一个使用“日期选择”的表单，它为每个使用的日期选择（年、月和日）呈现三个选择框。

相反，我想使用 datepicker，并且我已按照[此处](https://github.com/Nerian/bootstrap-datepicker-rails)的说明进行操作。但是，我不知道如何在视图中的表单中实际实现日期选择器。

我在 application.js 中使用以下行...

```
$('.datepicker').datepicker() 
```

...所以我想我需要给选择框类.datepicker？

```
<%= form_for @project do |f| %>
    <div class="text_field">
        <%= f.label :title%>
        <%= f.text_field :title%>
    </div>
    <div class="text_field">
        <%= f.label :description%>
        <%= f.text_field :description%>
    </div>
    <div class="dropdown">
        <%= f.label :start_date%>
        <%= date_select :start_date, :startdate %>
    </div>
    <div class="dropdown">
        <%= f.label :end_date%>
        <%= date_select :end_date, :enddate%>
    </div>
    <div class="select">
        <%= f.label :title%>
    </div>
    <div class="submit">
        <%= f.submit "Spara" %>
    </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T16:37:58.090

尝试 ：

```
<%= date_select :start_date, :startdate , :class => 'datepicker' %> 
```

编辑：我已经在我的机器上复制了您的代码并发现了可能的错误：

此 gem 在文本字段中选择日期，而不是在`date-select` . 输入应该是`text_field`，它看起来像这样：

```
<%= f.text_field :date, :class => 'datepicker' %> 
```

如 gem 的安装指南中所述，您应该确保`require`在您的`application.css`和`application.js`. 更重要的一件事：`projects.js.coffee`确保 DOM 已加载，如下所示：

```
jQuery ->
  $('.datepicker').datepicker() 
```

# java - 如何从上下文菜单打开图像视图？

> ID：14712283
> 
> 赞同：0
> 
> 时间：2013-02-05T16:32:31.490
> 
> 标签：java, android, eclipse, image, menu

我试图从我的上下文菜单中打开一个图像视图，但是，我不知道该怎么做。单击上下文菜单中的某个项目时，我需要出现一个图像视图。我怎样才能做到这一点？我需要自定义菜单，还是可以从上下文菜单打开图像视图？对此有什么想法吗？先感谢您。这是我的代码。

```
package com.carouseldemo.main;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;

import android.view.MenuInflater;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

public class MainActivity extends Activity {

@Override
public boolean onCreateOptionsMenu(Menu menu) {
super.onCreateOptionsMenu(menu);
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.testmenu1, menu);
// your code...
return true;} // true if you want the menu to be displayed; false otherwise
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // Just prepare ourself for unexpected arguments...

    if (menuInfo == null) {
        return;
    }
    if (!(menuInfo instanceof AdapterContextMenuInfo)) {
        return;
    }

    AdapterContextMenuInfo mi = (AdapterContextMenuInfo) menuInfo;

    switch (mi.position) {
    case 0:

        menu.add("Product 1");

        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 1:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 2:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 3:
        menu.add("mouse menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 4:
        menu.add("panda menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 5:
        menu.add("rabbit menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    default:
        break;
    }
    super.onCreateContextMenu(menu, v, menuInfo);
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Carousel carousel = (Carousel) findViewById(R.id.carousel);
    carousel.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(CarouselAdapter<?> parent, View view,
                int position, long id) {
            CarouselItem item = (CarouselItem) parent.getChildAt(position);

            // HERE: Force context menu
            carousel.showContextMenuForChild(item);
            Toast.makeText(
                    MainActivity.this,
                    String.format("%s has been clicked",
                            ((CarouselItem) parent.getChildAt(position))
                                    .getName()), Toast.LENGTH_SHORT).show();

        }

        @Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {

            // TODO Auto-generated method stub

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // TODO Auto-generated method stub
            return false;
        }});

    carousel.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(CarouselAdapter<?> parent, View view,
                int position, long id) {

            final TextView txt = (TextView) (findViewById(R.id.selected_item));

            switch (position) {
            case 0:
                txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                break;
            case 1:
                txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                break;
            case 2:
                txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                break;
            case 3:
                txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                break;
            case 4:
                txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                break;
            case 5:
                txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami, Japan)");

                break;
            }

        }

        public void onNothingSelected(CarouselAdapter<?> parent) {
        }

    });

    registerForContextMenu(carousel);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:48:45.250

我认为最好和最简单的方法是使用自定义布局在对话框中显示您的图像，如此处所述。

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

您只需在对话框布局中放置一个 ImageView，并将所选图像作为它的源。

希望它会有所帮助。

# python - 如何在 PyQt 中创建自定义形状 QPushBtn

> ID：14712290
> 
> 赞同：2
> 
> 时间：2013-02-05T16:33:00.440
> 
> 标签：python, qt, pyqt

我想在 pyqt 中创建自己的 Qpushbutton 形状。谁能告诉我如何创建这个谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:58:12.170

我认为你应该使用 QT-Stylesheets 来设置 QPushButton 的样式

```
self.Qpushbutton.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                    "border:1px solid rgb(255, 170, 255);") 
```

或`border-image`为其添加图片

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T23:38:51.720

这是一个使用`QRegion`和`setMask`自定义窗口形状、`QPalette`更改背景颜色和`setStyleSheet`其他属性的示例：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.region = QtGui.QRegion(QtCore.QRect(0, 0, 222, 222), QtGui.QRegion.Ellipse)
        self.setMask(self.region)

        self.palette = QtGui.QPalette()
        self.palette.setBrush(QtGui.QPalette.Background, QtGui.QColor('grey').dark(150))
        self.setPalette(self.palette)

        self.setWindowFlags(QtCore.Qt.FramelessWindowHint)

        self.label = QtGui.QLabel(self)
        self.label.setText("A round widget!")
        self.label.setStyleSheet("QLabel { background-color : lightblue; color : white; }")
        self.label.setAlignment(QtCore.Qt.AlignCenter)

        self.layout = QtGui.QHBoxLayout(self)
        self.layout.addWidget(self.label)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.resize(222, 222)
    main.show()

    sys.exit(app.exec_()) 
```

# python - 对多个用户使用 multiprocessing.Manager() 会导致权限被拒绝

> ID：14712291
> 
> 赞同：0
> 
> 时间：2013-02-05T16:33:01.477
> 
> 标签：python, multithreading, unix, multiprocessing

我有一个以 root 身份运行的进程，需要分离线程才能以各种用户身份运行。这部分工作正常，但我需要一种在子进程和父进程之间进行通信的方法。

当我尝试将 multiprocessing.Manager() 与某些列表、字典、锁、队列等一起使用时，它总是在降低权限的进程上出现权限被拒绝错误。

有没有办法授予用户或 PID 访问权限来解决这个问题？

代表我遇到的基本代码（以root身份运行）：

```
#!/usr/bin/env python
import multiprocessing, os
manager = multiprocessing.Manager()
problematic_list = manager.list()
os.setuid(43121) # or whatever your user is
problematic_list.append('anything') 
```

结果：

```
root@liberator:/home/bscable# python asd.py
Traceback (most recent call last):
  File "asd.py", line 8, in <module>
    problematic_list.append('anything')
  File "<string>", line 2, in append
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 755, in _callmethod
    self._connect()
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 742, in _connect
    conn = self._Client(self._token.address, authkey=self._authkey)
  File "/usr/lib/python2.7/multiprocessing/connection.py", line 169, in Client
    c = SocketClient(address)
  File "/usr/lib/python2.7/multiprocessing/connection.py", line 293, in SocketClient
    s.connect(address)
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 13] Permission denied
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/util.py", line 261, in _run_finalizers
    finalizer()
  File "/usr/lib/python2.7/multiprocessing/util.py", line 200, in __call__
    res = self._callback(*self._args, **self._kwargs)
  File "/usr/lib/python2.7/multiprocessing/managers.py", line 625, in _finalize_manager
    process.terminate()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 137, in terminate
    self._popen.terminate()
  File "/usr/lib/python2.7/multiprocessing/forking.py", line 165, in terminate
    os.kill(self.pid, signal.SIGTERM)
OSError: [Errno 1] Operation not permitted 
```

第一个例外似乎在这里很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:10:08.120

Python（至少 2.6）使用 UNIX 套接字进行通信，如下所示：

```
/tmp/pymp-eGnU6a/listener-BTHJ0E 
```

我们可以抓取该路径并更改其权限，如下所示：

```
#!/usr/bin/env python
import multiprocessing, os, grp, pwd
manager = multiprocessing.Manager()
problematic_list = manager.list()

fullname = manager._address
dirname = os.path.dirname(fullname)

gid = grp.getgrnam('some_group').gr_gid
uid = pwd.getpwnam('root').pw_uid # should always be 0, but you never know

os.chown(dirname, uid, gid)
os.chmod(dirname, 0770)

os.chown(fullname, uid, gid)
os.chmod(fullname, 0770)

os.setgid(gid)
os.setuid(43121) # or whatever your user is
problematic_list.append('anything') 
```

* * *

# python - 基于循环计数器的python matplotlib轴标签下标

> ID：14712292
> 
> 赞同：2
> 
> 时间：2013-02-05T16:33:04.850
> 
> 标签：python, unicode, matplotlib, labels

我正在使用 python 和 matplotlib 来生成图形输出。我在一个循环中创建多个图，并希望循环计数器用作 y 轴标签上的索引。如何让循环计数器（变量）显示为下标？

这是我所拥有的：

`axis_ylabel = plt.ylabel(u"\u03b1 [\u00b0]", rotation='horizontal', position=(0.0,0.9))`

导致：

α [°]

（我使用 unicode 而不是 Tex，因为 dvipng 在此系统上不可用。）

我想要这样的东西：

```
for i in range(1,3):  
  axis_ylabel = plt.ylabel(u"\u03b1" + str(i) + u" [\u00b0]", rotation='horizontal', position=(0.0,0.9)) 
```

毫不奇怪，这给出了：

α1 [°]
α2 [°]

我真正想要的是作为下标的数字。如何将转换为字符串与创建下标的命令结合起来？在 unicode 环境中无法识别包含“_”以生成下标。此外，我仍然需要 python/matplotlib 来识别这个下标命令应该影响以下变量。
有什么想法吗？

**编辑**

我做到了这一点：

```
axis_ylabel = plt.ylabel(u"\u03b1" + r"$_" + str(i) + r"$" + u" [\u00b0]", rotation='horizontal', position=(0.0,0.9)) 
```

-- 这会产生一个下标字符。但是，它**不是**整数值的转换，而是不同的符号。

**编辑 2**
我正在使用 python 2.6.6 和 matplotlib 0.99.1.1。`<>`在in处插入任何类型的字符串`r"$<>$"`都不会显示该字符串，而是显示完全不同的字符。我已将此问题作为一个[新问题](https://stackoverflow.com/questions/14733605/python-matplotlib-label-title-wrong-character)发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:15:21.570

Matplotlib 提供了自己的数学表达式引擎，称为`mathtext`.
从[文档](http://matplotlib.org/users/mathtext.html#subscripts-and-superscripts)中：

> 请注意，您不需要安装 TeX，因为 matplotlib 提供了自己的 TeX 表达式解析器、布局引擎和字体。

所以也许尝试使用以下内容：

```
for i in range(1,3):
    plt.ylabel(
           r"$\alpha_{:d} [\degree]$".format(i),
           rotation='horizontal',
           position=(0.0,0.9)) 
```

您还可以在以下位置使用 Unicode `mathtext`：

> 如果特定符号没有名称（STIX 字体中的许多更晦涩的符号也是如此），也可以使用 Unicode 字符：

```
 ur'$\u23ce$' 
```

# bash - 使用给定文件中的适当值更新特定条目

> ID：14712296
> 
> 赞同：2
> 
> 时间：2013-02-05T16:33:18.777
> 
> 标签：bash, shell

如何使用给定文件中的适当值更新特定条目，

假设我有一个文件名 hello.conf，

```
/agent/process="starthelloJava",start="/opt/starthello.sh",start_dir="/opt/hello",start_args=""
/agent/process="stophelloJava",stop="/opt/stophello.sh",stop_dir=/opt/hello",stop_args="",stop_timeout="30" 
```

更新`starthelloJava`与

```
start_args="-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/" 
```

输出

```
/agent/process="starthelloJava",start="/opt/starthello.sh",start_dir="/opt/hello",start_args="-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/" 
```

清空`start_args`进程`starthelloJava`

```
/agent/process="starthelloJava",start="/opt/starthello.sh",start_dir="/opt/hello",start_args=""
/agent/process="stophelloJava",stop="/opt/stophello.sh",stop_dir=/opt/hello",stop_args="",stop_timeout="30" 
```

我正在做的方式很长，我正在根据输入重写整个文件。

这是我的方法，效率不高

```
cp hello.conf hello.conf_bak
remove entry first
cat /opt/CSCObac/agent/conf/agent.conf_bak | grep -v /opt/starthello.sh  > hello.conf
echo "/agent/process=\"starthelloJava\",start=\"/opt/starthello.sh\",start_dir=\"/opt/hello\",start_args=\"-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/\" >> hello.conf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:20:58.273

```
set -- '-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/'
sed -i -r "s!(.*starthelloJava.*=).*!\1\"$1\"!" hello.conf 
```

或清空值

```
set -- ''
sed -i -r "s!(.*starthelloJava.*=).*!\1\"$1\"!" hello.conf 
```

# ruby-on-rails - 在另一个页面上设计登录表单

> ID：14712299
> 
> 赞同：2
> 
> 时间：2013-02-05T16:33:33.350
> 
> 标签：ruby-on-rails, devise

我希望在我的主页上添加一个设计登录表单（称为主页的模型）

我发现了这一点，但卡在了放置某些位和工作的地方！

[http://pupeno.com/2010/08/29/show-a-devise-log-in-form-in-another-page/](http://pupeno.com/2010/08/29/show-a-devise-log-in-form-in-another-page/)

```
<h2>Sign in</h2>

<% form_for resource_name, resource, :url => session_path(resource_name) do |f| -%>
  <p><%= f.label :email %></p>
  <p><%= f.text_field :email %></p>

  <p><%= f.label :password %></p>
  <p><%= f.password_field :password %></p>

  <% if devise_mapping.rememberable? -%>
    <p><%= f.check_box :remember_me %> <%= f.label :remember_me %></p>
  <% end -%>

  <p><%= f.submit "Sign in" %></p>
<% end -%>

<%= render :partial => "shared/devise_links" %> 
```

和（不知道放在哪里）

```
module ContentHelper
  def resource_name
    :user
  end

  def resource
    @resource ||= User.new
  end

  def devise_mapping
    @devise_mapping ||= Devise.mappings[:user]
  end
end 
```

我的设计被设置为“成员”，所以任何帮助都会很棒:) 干杯

# java - 获取 Javadoc 生成以在摘要表中包含特定于注释的格式

> ID：14712300
> 
> 赞同：0
> 
> 时间：2013-02-05T16:33:37.857
> 
> 标签：java, annotations, javadoc

我正在使用类似于 Guava 的[`@Beta`](http://docs.guava-libraries.googlecode.com/git/javadoc/index.html?com/google/common/annotations/Beta.html)注释将接口/类/方法标记为未准备好发布（我也有一个`@Alpha`注释）。

有没有办法让它在方法摘要表中做一些特别的事情（例如添加一个 CSS 类“beta”，这样我就可以把它涂成黄色或添加一个警告图标或其他东西）？

查看 Guava 文档中的[`com.google.guava.base.Predicates`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicates.html). 该方法`Predicates.assignableFrom()`已标记`@Beta`，但仅出现在详细的方法描述中，而不是汇总表中。

# python - 无法使用 Python 连接 Unix 域套接字：没有这样的文件或目录

> ID：14712307
> 
> 赞同：0
> 
> 时间：2013-02-05T16:34:02.817
> 
> 标签：python, c, unix-socket

我有几段代码来建立一个 Unix 域套接字和使用这个套接字的服务。虽然这里有一些令人困惑的错误导致失败。

创建 Unix 域套接字的代码是用 c 编写的：

```
#include <sys/socket.h>
#include <sys/stat.h>
#include <sys/wait.h>
#include <sys/un.h>
#include <unistd.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <signal.h>
#include <errno.h>

int main(int ac, char *av[])
{
if (ac != 4) {
    printf("Usage: %s dummy-fd sockpath binary\n", av[0]);
    exit(-1);
    }

    char *sockpn = av[2];
    char *bin = av[3];

    int srvfd = socket(AF_UNIX, SOCK_STREAM, 0);
    if (srvfd < 0) {
    perror("socket");
    exit(-1);
    }

    fcntl(srvfd, F_SETFD, FD_CLOEXEC);

    struct stat st;
    if (stat(sockpn, &st) >= 0) {
    if (!S_ISSOCK(st.st_mode)) {
        fprintf(stderr, "socket pathname %s exists and is not a socket\n",
            sockpn);
        exit(-1);
    }

    unlink(sockpn);
    }

    struct sockaddr_un addr;
    addr.sun_family = AF_UNIX;
    snprintf(&addr.sun_path[0], sizeof(addr.sun_path), "%s", sockpn);
    if (bind(srvfd, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
        fprintf(stderr, "WARNING: cannot bind to socket %s (%s), exiting\n",
                sockpn, strerror(errno));
    exit(-1);
    }

    // allow anyone to connect; for access control, use directory permissions
    chmod(sockpn, 0777);

    listen(srvfd, 5);
    signal(SIGCHLD, SIG_IGN);
    signal(SIGPIPE, SIG_IGN);

    for (;;) {
    struct sockaddr_un client_addr;
    unsigned int addrlen = sizeof(client_addr);

    int cfd = accept(srvfd, (struct sockaddr *) &client_addr, &addrlen);
    if (cfd < 0) {
        perror("accept");
        continue;
    }

    int pid = fork();
    if (pid < 0) {
        perror("fork");
        close(cfd);
        continue;
    }

    if (pid == 0) {
        // Child process
        dup2(cfd, 0);
        dup2(cfd, 1);
        close(cfd);

        execl(bin, bin, 0);
        perror("execl");
        exit(-1);
    }

    close(cfd);
    }
} 
```

使用此 sock 的客户端 Python 如下（unixclient.py）：

```
def call(pn, req):
    sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
    sock.connect(pn)
    sock.send(req)
    sock.shutdown(socket.SHUT_DOWN)
    data = ""
    while True:
        buf = sock.recv(1024)
        if not buf:
             break
        data += buf
    sock.close()
    return data 
```

我通过导入这个文件并调用函数在另一个 Python 代码中触发这段客户端代码`call`：（**“/jail/zoobar/echosvc”和“/jail/zoobar/echosvc/sock”都将失败）**

```
 resp = call("/jail/zoobar/echosvc", str1) 
```

那里发生错误，表明：

```
 FIle "zoobar/unixclient.py", line 8, in call
    sock.connect(pn)
   File "<string>", line 1, in connect
   error: [ERROR 2] No such file or directory 
```

但是我发誓该目录和套接字确实存在（/jail/zoobar/echosvc/sock），并且权限也是正确的（777），所以我无法理解这个奇怪的错误。有人知道吗？

我非常感谢您抽出时间提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:21:49.543

看起来您正在尝试打开错误的文件名。代码如下所示：

```
resp = call("/jail/zoobar/echosvc", str1) 
```

但是你说“文件存在”：

```
/jail/zoobar/echosvc/sock 
```

尝试将您的呼叫线路更改为：

```
resp = call("/jail/zoobar/echosvc/sock", str1) 
```

# tomcat - Ubuntu Tomcat7 java.lang.ClassNotFoundException: org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory

> ID：14712308
> 
> 赞同：28
> 
> 时间：2013-02-05T16:34:15.153
> 
> 标签：tomcat, ubuntu, jdbc, datasource, tomcat7

我正在尝试在 Ubuntu 12.X 下的 Tomcat 7 中设置 JDBC 数据源，因此我在 context.xml 文件中添加了以下内容：

```
<Resource name="jdbc/myDS" auth="Container" type="javax.sql.DataSource"
    maxActive="5" maxIdle="2" maxWait="5000"
    driverClassName="org.postgresql.Driver" username="usr" password="***" url="jdbc:postgresql://localhost:5432/db" /> 
```

显然，使用正确且经过测试的数据库用户名和密码。当我重新启动 Tomcat 时，我收到此错误：

```
Feb 05, 2013 1:10:01 PM org.apache.catalina.core.NamingContextListener addResource
WARNING: Failed to register in JMX: javax.naming.NamingException: Could not create resource factory instance [Root exception is java.lang.ClassNotFoundException: org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory] 
```

我用谷歌搜索，发现 JDBC 驱动程序必须复制到 $CATALINA_HOME/lib 文件夹，所以我将 postgresql-9.2-1000.jdbc4.jar 复制到 /usr/share/tomcat7/lib，但没有帮助. 我尝试将文件复制到其他位置，结果相同。

另一种尝试是将 /usr/share/tomcat7/lib 中的 tomcat-dbcp.jar 符号链接从 ../../java/tomcat-dbcp-7.0.30.jar 更改为 ../../java/tomcat- dbcp.jar。唯一的变化是我只收到一个警告而不是四个，但数据源也不起作用。

爪哇版：

```
jdoe@sever:~$ java -version
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.4) (7u9-2.3.4-0ubuntu1.12.10.1)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

任何提示，非常欢迎。

干杯。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-08T13:46:31.010

存储库`tomcat-dbcp-7.0.30.jar`中的库已损坏。

将其替换为：

`sudo wget -O /usr/share/java/tomcat-dbcp-7.0.30.jar http://search.maven.org/remotecontent?filepath=org/apache/tomcat/tomcat-dbcp/7.0.30/tomcat-dbcp-7.0.30.jar`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-16T15:08:32.897

原因是 Tomcat7 的 Ubuntu 构建/打包过程中存在问题。如果我正确理解了这个问题，Apache 从二进制文件构建 tomcat-dbcp.jar，而 Ubuntu 仅从源代码构建包。Ubuntu 项目最终需要更改 Java 包名称，这往往会给我们这些可怜的用户带来麻烦。血淋淋的细节可以在[Ubuntu 问题列表](https://bugs.launchpad.net/ubuntu/+source/tomcat6/+bug/283852)中找到。

我找到的解决方案是在定义资源时给数据源工厂命名。在一种情况下，我有一个 META-INF/context.xml 文件，其中包含：

```
<Resource name="jdbc/myDataSource"
    auth="Container"
    type="javax.sql.DataSource"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://localhost:3306/myDatabase"
    username="username" password="password"
    validationQuery="SELECT COUNT(*) FROM MY_TABLE"
    factory="org.apache.commons.dbcp.BasicDataSourceFactory" /> 
```

关键元素是“工厂”声明，它覆盖了内置默认值。

在我们的生产机器上，资源在 server.xml 文件的 GlobalNamingResources 元素中定义。仅在 Ubuntu 系统上需要指定工厂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T14:32:31.333

我在 CentOS 上遇到了同样的问题。我通过从站点下载一个新的 tomcat 副本并将 tomcat-dbcp.jar 上传到我的在线服务器库来解决这个问题，重新启动服务器:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-19T19:42:57.303

我在使用 Tomcat 7.0.55 的 Fedora 20 上遇到了同样的问题。我在文件路径和文件名中用 7.0.55 替换了 7.0.30，这对我有用。不知道为什么，但是这个文件在 tomcat 7 的 YUM 安装中完全丢失。没有它就不能使用数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T20:43:46.480

做到了。

确保如果 tomcat-dbcp-7.0.30.jar 文件没有以下大小，那么它可能已损坏，您可能需要用上面的 sudo wget 命令替换它。

-rw-r--r-- 1 根 235411 2013 年 5 月 1 日 tomcat-dbcp-7.0.30.jar

lrwxrwxrwx 1 根 2013 年 1 月 10 日 22 日 tomcat-dbcp.jar -> tomcat-dbcp-7.0.30.jar

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-06T11:44:57.270

如果您不想修补 tomcat，您也可以（在 CentOS 上）将以下内容添加到 JAVA_OPTS（例如，通过将其添加到 /usr/share/tomcat/conf/context.xml

```
JAVA_OPTS="-Djavax.sql.DataSource.Factory=org.apache.commons.dbcp.BasicDataSourceFactory" 
```

# java - OSGi Classloader 没有找到一个类并且不让我包含它

> ID：14712310
> 
> 赞同：0
> 
> 时间：2013-02-05T16:34:22.023
> 
> 标签：java, osgi, classloader

我正在为第三方 OSGi 容器编写插件。该插件的代码如下所示：

```
  资源 r=factory.getInstance().getResource("test");
  字符串 s=r.getList()[0];

```

它在第二行失败，如下所示：

```
引起：java.lang.reflect.InvocationTargetException
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        在 java.lang.reflect.Method.invoke(Method.java:597)
        在 org.eclipse.equinox.internal.ds.model.ServiceComponent.activate(ServiceComponent.java:206)
        ... 34 更多
引起：java.lang.NoClassDefFoundError: com/thirdparty/list
        在 user1.SampleCode.main(SampleCode.java:20)
        ... 39 更多
引起：java.lang.ClassNotFoundException：com.thirdparty.list
        在 org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:489)
        在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:405)
        在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:393)
        在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        ... 42 更多

```

然后，当我尝试将缺少的类包含到插件 JAR 中时，我得到一个不同的错误：

```
引起：java.lang.reflect.InvocationTargetException
        在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        在 java.lang.reflect.Method.invoke(Method.java:597)
        在 org.eclipse.equinox.internal.ds.model.ServiceComponent.activate(ServiceComponent.java:206)
        ... 34 更多
原因：java.lang.LinkageError：加载程序约束违规：加载程序（org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader 的实例）先前为名为“com/thirdparty/list”的不同类型启动加载
        在 java.lang.ClassLoader.defineClass1（本机方法）
        在 java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
        在 java.lang.ClassLoader.defineClass(ClassLoader.java:615)
        在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:183)
        在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:576)
        在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:546)
        在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:477)
        在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass_LockClassLoader(ClasspathManager.java:465)
        在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:445)
        在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:211)
        在 org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:376)
        在 org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:452)
        在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:405)
        在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:393)
        在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
        在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        在 user1.SampleCode.main(SampleCode.java:20)
        ... 39 更多

```

到底是怎么回事？似乎类加载器知道我需要的类，并且不会让我使用它，甚至不会包含我自己的副本。

# java - 如何使用jackson将java对象序列化为xml属性？

> ID：14712312
> 
> 赞同：9
> 
> 时间：2013-02-05T16:34:33.600
> 
> 标签：java, json, xml-serialization, jackson

有没有办法通过jackson将java var（例如int）序列化为xml属性？我找不到任何特定的 jackson 或 json 注释（@XmlAttribute @javax.xml.bind.annotation.XmlAttribute）来实现这一点。

例如

```
public class Point {

    private int x, y, z;

    public Point(final int x, final int y, final int z) {
        this.x = x;
        this.y = y;
        this.z = z;
    }

    @javax.xml.bind.annotation.XmlAttribute
    public int getX() {
        return x;
    }
    ...
} 
```

我想要的是：

```
<point x="100" y="100" z="100"/> 
```

但我得到的是：

```
<point>
    <x>100</x>
    <y>100</y>
    <z>100</z>
</point> 
```

有没有办法获取属性而不是元素？感谢帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T18:44:30.217

好的，我找到了解决方案。

如果您使用 jackson-dataformat-xml，则无需注册 AnotaionIntrospector

```
File file = new File("PointTest.xml");
XmlMapper xmlMapper = new XmlMapper();
xmlMapper.writeValue(file, new Point(100, 100, 100)); 
```

缺少的 TAG 是

@JacksonXmlProperty(isAttribute=true)

所以只需将吸气剂更改为：

```
@JacksonXmlProperty(isAttribute=true)
public int getX() {
    return x;
} 
```

它工作正常。只需按照以下方法：

[https://github.com/FasterXML/jackson-dataformat-xml](https://github.com/FasterXML/jackson-dataformat-xml)

> @JacksonXmlProperty 允许为属性指定 XML 命名空间和本地名称；以及是否将属性编写为 XML 元素或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:18:21.427

你注册[了 JaxbAnnotationIntrospector](http://wiki.fasterxml.com/JacksonJAXBAnnotations)吗？

```
ObjectMapper mapper = new ObjectMapper();
AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();
// make deserializer use JAXB annotations (only)
mapper.getDeserializationConfig().setAnnotationIntrospector(introspector);
// make serializer use JAXB annotations (only)
mapper.getSerializationConfig().setAnnotationIntrospector(introspector); 
```

# c# - 出现错误：“viewState MAC 验证失败。”

> ID：14712315
> 
> 赞同：0
> 
> 时间：2013-02-05T16:34:41.070
> 
> 标签：c#

我收到错误消息：“viewstate MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保`<machineKey>`配置指定相同的 validationKey 和验证算法。不能在集群中使用 AutoGenerate。”

如果我不通过负载均衡器，我不会使用此错误。如果我通过负载均衡器，大约 50% 的时间会出现此错误。负载均衡器具有粘性会话。

My config file is like this: validationKey='2EEA416CEFC6D6BE856ED57B97FB9CA7DFACE17C073125949A1D682C80A44BB2AD887DDDC13DBFB0954F1000FEE5757E99693F222F8E28CAA2E6DAB8C4F99E0C' decryptionKey='877478B2F33A74226ABEF55FDCC1A76E43F1BBEA6241A592' validation='SHA1' />

```
<pages enableViewStateMac="false"> 
```

所以，我已经有了 enableViewStateMac="false"。我怎样才能使零星的错误消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:38:09.727

您需要受负载平衡器影响的所有服务器使用相同的机器密钥，这样当视图状态生成到服务器 1 并发布到服务器 2 时，服务器 2 可以验证视图状态，因为服务器 1 和 2 使用相同的密钥。

更多信息：[http ://technet.microsoft.com/en-us/library/cc731979%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc731979%28v=ws.10%29.aspx)

编辑：

此外，如果您使用一些 CSRF 保护，则必须确保有一种方法可以在服务器之间保留该信息。（一些 CSRF 保护方案指定了一个视图状态键）。

# c# - 与多个项目文件共享 Codesmith 属性

> ID：14712325
> 
> 赞同：0
> 
> 时间：2013-02-05T16:35:10.190
> 
> 标签：c#, .net, csla, codesmith

我正在使用 codesmith 生成我们的 CSLA 层，并有 3 个单独的 Codesmith 项目 (.csp) 来生成

*   CSLA 业务对象
*   数据访问
*   脚手架单元测试

这些项目文件中的每一个都有一个目标数据库表列表，格式为：

```
<property name="EditableChild">
    ....
    <tableList>
      <table>
        <owner>dbo</owner>
        <name>Table1</name>
      </table>
      <table>
        <owner>dbo</owner>
        <name>Table2</name>
      </table>
    </tableList>
 </property> 
```

我显然不想在三个地方保留该列表。有什么方法可以在 Codesmith 项目文件之间共享相同的表列表，而无需将它们合并到一个项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:11:27.457

我为 CodeSmith Tools 工作。目前这是不可能的，但我已将其添加到积压工作中。如果您可以像在 app.config 中使用连接字符串一样指定包含内容的源文件，那就太好了。

我真的很想移动 csla 以使用 xml 文件来生成实体。但是，很多人不想维护这个 xml 文件 :(。但是，这将解决这个问题。您始终可以使用属性网格中的复制到剪贴板功能，然后将属性粘贴到其他输出中csp. 这将有助于使这些文件保持同步。

# grails - 我可以配置数据源特定的“全局”休眠映射吗？

> ID：14712327
> 
> 赞同：2
> 
> 时间：2013-02-05T16:35:15.643
> 
> 标签：grails, grails-orm, hibernate-mapping

我知道我可以在 Config.groovy 中指定全局映射

```
grails.gorm.default.mapping = {
   ...
} 
```

但是，在具有多个数据源（Grails >= 2.0.3）的项目中，是否可以配置仅特定于某个数据源的“全局”映射？

我的用例是我有不同的遗留数据库，它们具有不同的表示`boolean`字段的约定（例如`BIT`和`CHAR(1)`），我希望能够分别映射一次。

# perl - 如何在 PHP 的 print_r($_GET) 等 perl 脚本中转储所有查询变量？

> ID：14712330
> 
> 赞同：0
> 
> 时间：2013-02-05T16:35:19.220
> 
> 标签：perl, cgi

我有一个从浏览器运行的 perl 脚本。我将查询变量传递给它，但查询变量的显示就像`johndoe%40test%2Ecom`而不是`johndoe@test.com`

我想调试变量以查看它们在脚本开头的显示方式。

在 PHP 中，它会在访问 url 时：

```
http://localhost/dump-variables.php?foo=1&bar=2&bis=johndoe%40test%2Ecom 
```

PHP 脚本将包含以下代码：

```
header('Content-type: text/plain');
print_r($_GET); 
```

结果将是：

```
Array
(
    [foo] => 1
    [bar] => 2
    [bis] => johndoe@test.com
) 
```

Perl 版本：5.010001

### 重要的提示

我正在处理的系统上没有任何特殊访问权限（root / sudo）-因此可能必须通过源包含模块...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:42:40.510

您已标记此 CGI，所以我首先建议[使用更有效](http://plackperl.org/)的 .

但是，如果您要使用 CGI，并假设使用 CGI.pm，那么（来自[CGI.pm 文档](https://metacpan.org/module/CGI#FETCHING-THE-PARAMETER-LIST-AS-A-HASH%3a)）：

```
use CGI;
use Data::Dump qw/ddx/;
my $q = CGI->new();
print $q->header('text/plain');
my %params = $q->Vars;

print "Content-type: text/plain\n\n"; # had to add this

ddx \%params; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:40:03.827

试试 Data::Printer [http://metacpan.org/pod/Data::Printer](http://metacpan.org/pod/Data::Printer) 添加即可

```
 use DDP;
  ...

 p $_GET 
```

# viewport - IE10 中台式机与平板电脑的不同视口

> ID：14712332
> 
> 赞同：0
> 
> 时间：2013-02-05T16:35:20.370
> 
> 标签：viewport, internet-explorer-10

我的网站有 800 像素到 1280 像素之间的流畅设计。（我很欣赏现在许多显示分辨率都超过了这个值）。

在 10 英寸平板电脑中，站点显示最佳，视口宽度设置为 800 像素，允许平板电脑将其缩放到其窗口大小。这样字体大小合适，并且由于显示器较小，图像不会受到模糊的影响。

桌面浏览器忽略视口元标记并显示在 800 像素和 1280 像素之间，以及超出此范围的背景。

然而，Windows 8 上的 IE10 在台式机和平板电脑上都实现了视口标签，因此在台式机上实现了 800px 布局。这会在较大的显示器上导致无法接受的模糊图像和巨大的文本。

使用 CSS 我能找到的最好的方法是这样的（假设 Windows Surface 的宽度为 1366px）：

```
@media screen and (max-width: 1023px) {
    @-ms-viewport { width: 800px; }
}

@media screen and (min-width: 1024px) and (max-width: 1366px) {
    @-ms-viewport { width: 1024px; }
}

@media screen and (min-width: 1367px) {
    @-ms-viewport { width: device-width; }
} 
```

这仍然意味着桌面将具有缩放的图像和文本，除非显示器的分辨率超过 1366 像素。鉴于 Surface 具有与许多台式机相似的原始分辨率，在媒体查询中使用 max-device-width 似乎并没有提供太多帮助。

或者，我可以检测平板电脑并使用 Javascript 设置视口宽度，或者使用 PHP 检测它并提供不同的样式表。

毫无疑问，有更好的方法来做到这一点，最好是使用 CSS？

谢谢，感谢任何建议。

# c++ - SDL_TTF 和 OPENGL 一起工作的麻烦

> ID：14712334
> 
> 赞同：0
> 
> 时间：2013-02-05T16:35:24.543
> 
> 标签：c++, opengl, sdl-ttf

对于我正在开发的游戏，我希望将 OpenGL 用于大量图形和`SDL_TTF`文本。我可以让两者都工作，但不能同时工作。这是我的代码（基于 Lazy Foo）：

```
#include "SDL/SDL.h"
#include "SDL/SDL_ttf.h"
#include "GL/gl.h"

const bool useOpenGl = true;

//The surfaces
SDL_Surface *message = NULL;
SDL_Surface *screen = NULL;

//The event structure
SDL_Event event;

//The font that's going to be used
TTF_Font *font = NULL;

//The color of the font
SDL_Color textColor = {255, 255, 255};

void apply_surface(int x, int y, SDL_Surface* source, SDL_Surface* destination, SDL_Rect* clip = NULL)
{
    //Holds offsets
    SDL_Rect offset;

    //Get offsets
    offset.x = x;
    offset.y = y;

    //Blit
    SDL_BlitSurface(source, clip, destination, &offset);
}

bool init()
{
    SDL_Init (SDL_INIT_EVERYTHING);
    if (useOpenGl)
    {
        screen = SDL_SetVideoMode (1280, 720, 32, SDL_SWSURFACE | SDL_OPENGL); //With SDL_OPENGL flag only opengl is sceen, without only text is
    } else {
        screen = SDL_SetVideoMode (1280, 720, 32, SDL_SWSURFACE);
    }

    TTF_Init();

    SDL_WM_SetCaption ("TTF Not Working With OpenGL", NULL);

    if (useOpenGl)
    {
        glClearColor(1.0, 0.0, 0.0, 0.0);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0.0, screen->w, screen->h, 1.0, -1.0, 1.0);
        glEnable(GL_BLEND);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    }

    return true;
}

bool load_files()
{
    font = TTF_OpenFont ("arial.ttf", 28);

    return true;
}

void clean_up()
{
    SDL_FreeSurface (message);

    TTF_CloseFont (font);
    TTF_Quit();

    SDL_Quit();
}

int main(int argc, char* args[])
{
    //Quit flag
    bool quit = false;

    init();
    load_files();

    if (useOpenGl)
    {
        glClear(GL_COLOR_BUFFER_BIT); //clearing the screen
        glPushMatrix();

        glBegin(GL_QUADS);
        glColor3f(1.0, 0.0, 0.0);
        glVertex2f(0, 0);
        glColor3f(0.0, 1.0, 0.0);
        glVertex2f(1280, 0);
        glColor3f(0.0, 0.0, 1.0);
        glVertex2f(1280, 720);
        glColor4f(0.5, 0.5, 1.0, 0.1);
        glVertex2f(0, 720);
        glEnd();

        glPopMatrix();
        glFlush();
    }

    //Render the text
    message = TTF_RenderText_Solid (font, "The quick brown fox jumps over the lazy dog", textColor);

    //Apply the images to the screen
    apply_surface (0, 150, message, screen);

    //I'm guessing this is where the problem is coming from
    SDL_GL_SwapBuffers();
    SDL_Flip (screen);

    while (quit == false)
    {
        while (SDL_PollEvent (&event))
        {
            if (event.type == SDL_QUIT)
            {
                quit = true;
            }
        }
    }

    clean_up();

    return 0;
} 
```

如果变量`useOpenGl`设置为 false 程序将只使用`SDL_TTF`，如果设置为 true 它将同时使用`SDL_TTF`OpenGL 和 OpenGL。从玩弄它，问题似乎在于我在创建窗口时是否使用“SDL_OPENGL”标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:37:11.010

SDL_TTF 使用软件渲染，不兼容 OpenGL 模式。

您可能需要寻找另一个库，例如[FTGL](http://sourceforge.net/projects/ftgl/develop)或[freetype-gl](http://code.google.com/p/freetype-gl/)。

# javascript - jQuery.trigger() 函数后的回调

> ID：14712337
> 
> 赞同：7
> 
> 时间：2013-02-05T16:35:27.493
> 
> 标签：javascript, jquery, events, callback

我这里有个小问题。我必须触发一个包含 $.post() 的事件来加载表单并将其分配给 DOM。完成后，我编辑了表单的字段。

我试过：

```
$.when(function(){
    $('#type_rank_field').trigger('change'); //calls the $.post() to load the form
})
 .done(function(){
    $('#quest_'+questions[i].split('|')[1]).children('option[value="'+questions[i].split('|')[0]+'"]').attr('selected',true);
}); 
```

不幸的是，这不起作用，如果我就这样离开它：

```
$('#type_rank_field').trigger('change');
$('#quest_'+questions[i].split('|')[1]).children('option[value="'+questions[i].split('|')[0]+'"]').attr('selected',true); 
```

变化甚至看起来像这样：

```
 $('#type_rank_field').live('change',function(){
        var id = $(this).children('option:selected').attr('id');
        var id_edited = get_id_from_id(id);
        $.post('ajax/load_questions_of_rank.ajax.php',{id: id_edited},function(data){
            //alert(data);
            $('#rank_fields').html(data);
        });
    }); 
```

然后在表单正确加载并附加到 DOM 之前执行表单编辑。对于 JavaScript 人来说，这可能是一个愚蠢的问题，但我主要是一个 PHP 人，所以不要残忍:-)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T16:43:51.117

可以分离出你的`change`处理程序代码吗？像这样的东西：

```
$('#type_rank_field').on('change',function(){
    handleChange($(this));
});

function handleChange(elem, callback) {
    var id = elem.children('option:selected').attr('id');
    var id_edited = get_id_from_id(id);
    $.post('ajax/load_questions_of_rank.ajax.php',{id: id_edited},function(data){
        //alert(data);
        $('#rank_fields').html(data);
        if (typeof callback === "function") {
            callback(data);
        }
    });
}; 
```

`change`然后，您可以`handleChange`在 AJAX 调用完成时调用传递回调来执行，而不是触发：

```
handleChange($("#type_rank_field"), function(data) {
    $('#quest_'+questions[i].split('|')[1])
        .children('option[value="'+questions[i].split('|')[0]+'"]')
        .attr('selected',true);
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T16:48:29.490

从您的事件处理程序返回承诺对象：

```
$(document).on('change','#type_rank_field',function(){
    var id = $(this).children('option:selected').attr('id');
    var id_edited = get_id_from_id(id);
    return $.post('ajax/load_questions_of_rank.ajax.php',{id: id_edited},function(data){
        //alert(data);
        $('#rank_fields').html(data);
    });
}); 
```

然后`triggerHandler()`改用。

```
var promise = $('#type_rank_field').triggerHandler('change');
promise && promise.done(function(){
    // do stuff
}); 
```

这是一个显示正在使用的功能的简单示例：http: [//jsfiddle.net/WQPXt/](http://jsfiddle.net/WQPXt/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T16:56:52.367

我认为我们必须在发布后添加回调

```
$('#type_rank_field').on('change', function(ev, cb){
    var id = $(this).children('option:selected').attr('id');
    var id_edited = get_id_from_id(id);
    $.post('ajax/load_questions_of_rank.ajax.php',{id: id_edited},function(data){
        //alert(data);
        $('#rank_fields').html(data);
        // add after callback to make sure that html is inserted
        if(typeof cb == "function"){
           cb.apply($(this)) // this apply with the jq object context or another context u want
        }
 }); 
```

触发器更改将如下所示

```
$('#type_rank_field').trigger('change', [function(){
  $('#quest_'+questions[i].split('|')[1]).children('option[value="'+questions[i].split('|')[0]+'"]').attr('selected',true);
}]); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-05T16:38:05.797

[`.live`](http://api.jquery.com/live/)自 v1.7 起已在 jQuery 中弃用，并已在 v1.9 中删除。

您应该将其替换为[`.on()`](http://api.jquery.com/on/).

`.on`有 2 个用于绑定元素的签名，而`.live`只有 1 个。

如果元素在您绑定时存在，您可以这样做：

```
$('.element').on('click', function(){
  .......
}); 
```

您甚至可以使用速记：

```
$('.element').click(function(){
  .........
}); 
```

如果该元素当时不存在，或者将添加新元素（这是`.live`通常使用的），则需要使用“事件委托”：

```
$(document).on('click', '.element', function(){
  ........
}); 
```

注意：您希望绑定到最近的静态元素，而不是总是`document`.

同时，如果您将 jQuery 升级到最新版本，可以使用[**jQuery Migrate 插件来恢复功能。**](http://jquery.com/upgrade-guide/1.9/#jquery-migrate-plugin)`.live()`

# android - Android：在照片上保存带有图像的照片

> ID：14712344
> 
> 赞同：0
> 
> 时间：2013-02-05T16:35:42.187
> 
> 标签：android, camera, image

当我用我的 Android 相机拍照时，`imageview3`我的屏幕上有一张图像 ( ) 我想与我的照片一起保存。

这是我的`onPictureTaken`方法

```
public void onPictureTaken(byte[] data, Camera camera) {
    File imagesFolder = new File(Environment.getExternalStorageDirectory(), "/Ker");
    imagesFolder.mkdirs();
    String fileName = "Ker_.jpg";
    output = new File(imagesFolder, fileName);
    ImageView view = (ImageView) gameactivity.findViewById(R.id.imageView3);
    view.setDrawingCacheEnabled(true);
    Bitmap b = view.getDrawingCache();
    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(output);
    } catch (FileNotFoundException e1) {
        e1.printStackTrace();
    }
    b.compress(CompressFormat.JPEG, 95, fos);
    try {
        fos.write(data);
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
        catch (IOException e) {
        e.printStackTrace();
    }
    camera.stopPreview();
} 
```

当我打开文件夹时，保存的图片只有`imageview3`黑色背景。为什么没有保存真实的相机视图？

**编辑** 我也在尝试使用画布：

```
output = new File(imagesFolder, fileName);
            ImageView view = (ImageView) gameactivity.findViewById(R.id.imageView3);
            view.setDrawingCacheEnabled(true);
            Bitmap b = view.getDrawingCache();   
            FileOutputStream fos = null;
            try {
                fos = new FileOutputStream(output);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
              catch (IOException e) {
                    e.printStackTrace();
            }
            FileOutputStream fos2 = null;
            b.compress(CompressFormat.JPEG, 95, fos2);

            try {
                Bitmap bitmap = BitmapFactory.decodeFileDescriptor(fos.getFD());
                Bitmap bitmap2 = BitmapFactory.decodeFileDescriptor(fos2.getFD());
                Canvas canvas = new Canvas(bitmap);
                canvas.drawBitmap(bitmap2, null, null);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

那是对的吗？如何将画布保存到我的 sdcard 上的文件中（即将画布中的数据写入文件输出流）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:14:08.247

您将图像视图的 JPEG 和相机中的 JPEG 附加到一个文件中。

为每个文件创建一个单独的文件输出流，并将来自 Bitmap.compress() 和 onPictureTaken 数据数组的数据写入它们自己的流中。

如果要将两个图像组合成一个图像，则需要将数据数组解码为位图，然后使用 Canvas 将 ImageView 位图和相机捕获的位图以您的排列方式绘制到画布上想要，然后将其保存为单个 jpeg。

您不能简单地将两个压缩的 JPEG 比特流连接在一起；文件格式不能那样工作。

# facebook - Angular Js：FB 登录不会更新我的 $scope 值

> ID：14712345
> 
> 赞同：1
> 
> 时间：2013-02-05T16:35:44.897
> 
> 标签：facebook, angularjs

我无法使用 Angular js 打印 fb 名称。我不确定出了什么问题。在下面的代码中，“no_name”被打印出来。JSON 警报正确显示。

```
I have this view code trying to print l from the scope 
<div ng-controller="TestCtrl">
{{n}}
</div>

This is the controller code:
function TestCtrl($scope){

$scope.n="no_name";// default value

    FB.login(function(response) {// fb login as soon as the ui loads
        if (response.authResponse) {
            FB.api('/me', function(response) {
                alert(JSON.stringify(response));
                $scope.n=response.name;
            });
        } else {
            //do nothing..
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T16:41:40.103

我假设，FB 是一些外部模块，它不知道 AngularJS 及其事件周期（或`$scope.$apply()`我认为不是那么描述性的调用）

在这种情况下，您应该包装回调，以更改您的范围`$apply`：

```
 FB.login(function(response) {// fb login as soon as the ui loads
        if (response.authResponse) {
            FB.api('/me', function(response) {
                alert(JSON.stringify(response));
                $scope.$apply(function() {
                   $scope.n=response.name;
                });
            });
        } else {
            //do nothing..
        }
    }); 
```

# git - 我应该如何合并很久以前签出的分支

> ID：14712348
> 
> 赞同：1
> 
> 时间：2013-02-05T16:35:50.060
> 
> 标签：git

感觉我应该刷新一下我对 git 的了解。比如说，我有提交 A1 A2 .. AM .. AN 的分支，其中 AM 离 AN 很远（在 AM 之后，实际上有很多、数百个实际上是其他提交，包括合并）。

一些分支 B 已经从 AM 签出，所以这个分支看起来像 AM B1 B2 B3 B4 ...

现在我想将 B 合并回 A，并且正如预期的那样，得到很多不同的冲突。出乎意料的是，几乎所有这些冲突都与我在分支 B 中根本没有接触过的文件有关。

我只能假设所有这些冲突都是由于 AM 是一个相当古老的分支。我的问题是：将 B 合并到 A 的最佳方法是什么？我能想到的最佳策略是创建一个分支 A1 A2 .... AM B1 B2 .... AN 并尝试将其合并回 A1 ... AN。我怎样才能做到这一点？我应该尝试吗？可能在我对 git 合并如何完成的理解中，我缺少一些基本的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:41:30.943

确实，您需要识别和理解这些冲突。这不是流程问题，您的树中有问题。如果，正如您断言的那样，“AM”是两个分支上 HEAD 的祖先，并且提交“AM..AN”不会触及在“B1..B4”中修改的文件，那么您不应该在这些文件上遇到冲突，期间. 您的事实意味着您对树的状态有误，可能是因为那里有修改文件的合并提交，或者因为进行了变基使得“AM”（实际提交，而不仅仅是另一个使用相同的消息提交）实际上并不是两个分支的共享祖先。

# joomla-sef-urls - Joomla | 启用 SEF 会删除 index.php，但会返回 404 页面。通过 index.php/page 可见页面。怎么修？

> ID：14712350
> 
> 赞同：0
> 
> 时间：2013-02-05T16:35:51.637
> 
> 标签：joomla-sef-urls

我正在运行 Joomla 2.5.8，我正在尝试删除愚蠢的 index.php，以便拥有 SEO 友好的 URL。然而.. 当启用并重建'菜单时，当我单击菜单项时，该站点转到没有 /index.php/ 的页面，但它返回一个 404 页面。但是，当我在域和页面之间手动键入 /index.php/ 时，我看到的是正常页面。

几点注意事项

> 我将 htaccess.txt 更改为 .htaccess
> 
> ```
> I removed the '#' before RewriteBase /
> 
> I added 'cms' to the directory path (RewriteBase /cms ) Since Joomla is in the /cms folder
> 
> However, the htaccess is in the SAME folder as Joomla itself, they both lie in a subfolder
> 
> In the root folder, where a different website is stored, there also lies a .htaccess file 
> ```

有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T10:00:06.197

听起来你的配置没问题。带有 RewriteBase /CMS 的 htaccess 应该在 /CMS 文件夹中。在 Joomla 中，您应该启用 sef 规则并启用 mod_rewrite 选项。

这可能只是一个缓存清除问题。

# sql - 使用sql从三个表中选择结果

> ID：14712352
> 
> 赞同：0
> 
> 时间：2013-02-05T16:36:05.053
> 
> 标签：sql, select, multiple-tables

我想从三个表中得到一个结果。我不知道如何编写 sql 查询。请帮我。

```
"I want to display Name,Username and Product_Name where Id=007"

table "register"

Name  Username  Id
Arj   arjun     007
xyz   abcd      008
abcd  asdf      007

table "products"

Product_Id   Product_Name   Price
101           Clothes        200
102           Games          100

table "purchase"     //products.Product_Id=purchase.Item

Username   item    Id
arjun      102     007
abcd       101     008
asdf       102     007 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:43:25.080

应该是这样的

```
SELECT * FROM
register r
JOIN purchase p on p.username = r.username
JOIN products pr on pr.product_id = p.item 
```

您可以修改此基本代码以包含特定列并添加 where 和 order 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:39:41.350

试试这个查询：

```
SELECT a.Name,a.Username,c.Product_Name
FROM  register as a
JOIN purchase as b on a.Username=b.Username
JOIN products as c on b.item=c.Product_Id 
```

它应该像这样工作。要阅读有关 SQL 连接的更多信息，请尝试：[http ://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:40:11.830

```
SELECT Username, Id, Product_Name 
FROM register 
INNER JOIN purchase ON purchase.Id = register.Id 
INNER JOIN products ON purchase.Item = products.Product_Id
WHERE Id = '007' 
```

附带说明：您也不应该将用户名保存在购买表中。

# jaxb - JAXB 在运行时忽略方法

> ID：14712355
> 
> 赞同：1
> 
> 时间：2013-02-05T16:36:09.233
> 
> 标签：jaxb

我有一堂课是第 3 方课。我可以在 Java 7 中编组和解组，但不能在 Java 6 中编组。原因是它包含以下方法 public PrintWriter getLogWriter() 并且 PrintWriter 没有默认构造函数。我没有使用这种方法，并且该值始终为空。我只想忽略这个方法，但我没有源代码。我正在寻找最简单的方法来做到这一点。

# android - android按钮从屏幕上消失

> ID：14712360
> 
> 赞同：0
> 
> 时间：2013-02-05T16:36:29.763
> 
> 标签：android, button

我正在使用图标示例设计按钮，并希望在未按下图标时为黑色，按下时变为白色。编码如下：

## 在布局 xml 中：

```
<Button
     android:layout_height="wrap_content"
     android:layout_width="fill_parent"
     android:layout_weight="1"
     android:background="@drawable/icon_new_btn"
     android:scaleType="fitXY"                
     android:id="@+id/newBtn" /> 
```

## 在 icon_new_btn.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true" >         
        <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
            <solid android:drawableTop="@drawable/icon_new_white"
                android:background="@android:color/transparent"/>> 
        </shape>    
    </item>

    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android">            
            <solid android:drawableTop="@drawable/icon_new"
                android:background="@android:color/transparent"/>                        
        </shape>
    </item>

</selector> 
```

## 问题1（似乎使用以下修改解决）：

整个按钮在屏幕上变得不可见（它仍然可以在该屏幕位置按下！）。我如何修改上述编码以满足定义的目的？谢谢！！

## 修改但新的问题（问题2）：

以下修改后的布局和选择器似乎解决了上述问题1。但是分辨率变得更差，图标扭曲并且看起来更大。第一个和第二个图标见下面的截图，使用下面的修改代码（图标 3 到 6 只是简单地使用`android:drawableTop="@drawable/icon_save"` ，没有任何按下效果并显示更高的分辨率）：

![在此处输入图像描述](../Images/6267e50df05299e1a9b99545d818e9f7.png)

## 修改布局

```
 <Button
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:background="@drawable/icon_new_btn"
            android:scaleType="fitXY"                
            android:id="@+id/newBtn" /> 
```

## 修改选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/icon_new_white"
          android:state_pressed="true" />    

    <item android:drawable="@drawable/icon_new" />
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:44:39.943

您的图形被扭曲的原因是因为它被设置为背景。要解决此问题，您可以改用`ImageButton`：

```
<ImageButton
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:src="@drawable/icon_new_btn"
        android:background="@null"
        android:id="@+id/newBtn" /> 
```

此外，您已指定`android:scaleType="fitXY"`. 您可能想要`android:scaleType="centerInside"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:47:49.907

嗨，我正在为您发布答案。在 res/layout 中创建 4 个 xml 文件。

状态.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Button Focused-->
    <item   android:state_focused="true"
            android:state_pressed="false"
            android:drawable="@layout/state1"
            />
<!-- Button Focused Pressed-->
    <item   android:state_focused="true"
            android:state_pressed="true"
             android:drawable="@layout/state1"
            />
<!-- Button Pressed-->
    <item   android:state_focused="false"
            android:state_pressed="true"
             android:drawable="@layout/state1"
            />
<!-- Button Default Image-->
    <item   android:drawable="@layout/state2"/>

</selector> 
```

state1.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" shape="rectangle">
<!--this is to give gradient effect -->
<gradient   android:angle="270"
               android:startColor="#6b6b6b"
               android:endColor="#0e0e0e"
               />
<!-- this is make corners of button rounded -->
<corners    android:topLeftRadius="5dip"
               android:bottomRightRadius="5dip"
               android:topRightRadius="5dip"
               android:bottomLeftRadius="5dip"/>

</shape> 
```

state2.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" shape="rectangle">
<!--this is to give gradient effect -->
<gradient   android:angle="270"
            android:startColor="#e7ff47"
            android:endColor="#90a501"
            />
<!-- this is make corners of button rounded -->
<corners    android:topLeftRadius="5dip"
               android:bottomRightRadius="5dip"
               android:topRightRadius="5dip"
               android:bottomLeftRadius="5dip"/>

</shape> 
```

在 activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="183dp"
        android:text="Click Here To Change Color" 
        android:background="@layout/state"/>

</RelativeLayout> 
```

Java 文件 MainActivity.java

```
package com.example.getimage;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

多数民众赞成在享受编码:)

# php - GroceryCRUD 布局

> ID：14712363
> 
> 赞同：1
> 
> 时间：2013-02-05T16:36:38.123
> 
> 标签：php, codeigniter, grocery-crud

我正要问我在使用 CodeIgniter 和 GroceryCRUD 作为扩展库制作 Web 时遇到的问题。

我正在使用这个 $output（与 gcrud zip 包的示例.php 相同的方式）来显示表格。

然后我将 $output 放在我的网页中间（在一些标题之后）在一个包装器（a [div]）中，其样式（css）中没有高度的值/定义。我还在包装 div 之后（外部）放置了一个 [footer]，并带有（[footer] 的）位置：relative;。

问题是，如果我的表格（使用 $output 生成）比屏幕长，我的页脚只是放在屏幕底部，而表格实际上比屏幕（窗口）长。

然后，当我向下滚动时，页脚停留在我的表格包装器的中间，而不是放在最后，在 $output 表的 div 包装器之后，就像它是故意堆叠在包装器 div 的中间一样。

我想要的只是将页脚放在包装器 div 之后。

你有什么想法吗？提前致谢。

附言。我想知道是不是因为表格是在页脚之后呈现的。页脚放置在表格完成之前（因为它假定包装器 div 为空）。所以页脚堆叠在表格的顶部。那么，如果我们可以订购布局的解析，是否有可能？（Javascript）。我几乎不知道js，或者我几乎一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:31:21.060

尝试使用 CSS 并使用 CSS 函数 padding 和 margin 调整页脚的位置。

# css - 在 div 上显示 none/block 不起作用

> ID：14712364
> 
> 赞同：1
> 
> 时间：2013-02-05T16:36:43.260
> 
> 标签：css, html, hide, block

我正在尝试让它工作，但我无法弄清楚为什么它不会，有没有办法解决这个问题，即查看错误

我想要实现的是当我将鼠标悬停在 stat1 div 上时在 showhim div 中显示信息，但它不会发生。

我把它放在这里：

[http://jsfiddle.net/ksvrY/39/](http://jsfiddle.net/ksvrY/39/)

```
<div id="post-wrap">
   <div class="showhim" id="stat1_text">
        This is some example test<br />
        This is another line<br />
        And another one<br />
        And a final one
  </div>

    <div id="stat1" class="stat1">
        <a href="#">Hover over this div</a>
    </div>
</div>

.showhim
{
    display: none;
    margin-bottom: 30px;
}

.stat1:hover .showhim
{
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:38:08.940

**编辑：**正如保罗所指出的，您可以使用兄弟选择器。所以在这种情况下，实际上有一种方法可以用纯 css 做到这一点

`.stat1`不是 的父级`.showhim`。

您可以使用 JavaScript。所以像（使用jQuery）：

```
$('.stat1').mouseover(function(){
  $('.showhim').show();
}).mouseout(function(){
  $('.showhim').hide();
}); 
```

见[http://jsfiddle.net/ksvrY/50/](http://jsfiddle.net/ksvrY/50/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:39:15.260

要使其正常工作，`.showhim`需要是 的子元素`.stat1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T16:58:31.573

你可以做一个兄弟选择。

```
<div id="post-wrap">
<div id="stat1" class="stat1">
    <a href="#">Hover over this div</a>
</div>

 <div class="showhim" id="stat1_text">
    This is some example test<br />
    This is another line<br />
    And another one<br />
    And a final one
</div>

.showhim
{
  display: none;
  margin-bottom: 30px;
}

.stat1:hover ~ .showhim
{
  display: block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T18:16:17.257

同意保罗

这是另一个解决方案：

搬入：`.showhim`_`#stat1`

```
<div id="post-wrap">
    <div id="stat1" class="stat1">
        <a href="#">Hover over this div</a>
        <div class="showhim" id="stat1_text">
            This is some example test<br />
            This is another line<br />
            And another one<br />
            And a final one
        </div>
    </div>
</div> 
```

# jquery - 使用 jQuery 进行表单验证。任何输入的解决方案

> ID：14712371
> 
> 赞同：0
> 
> 时间：2013-02-05T16:37:08.420
> 
> 标签：jquery, forms, default-value

我尝试使用适合任何输入的通用公式验证表单。任何人都可以告诉我出了什么问题以及如何解决？

在这里查看现场：http: [//jsfiddle.net/qSzBb/](http://jsfiddle.net/qSzBb/)

```
$(function() {
    $("#form").submit(function(e) {
        var defaultValue = $(this).prop('defaultValue') ; // store de default value
        var valid = true; //assume valid form

        if (this.value = this.defaultValue){ 
            e.preventDefault();
            this.value = this.defaultValue + "is missing";
            valid = false;
        }

        if (valid) {
            $("#form").submit();
        }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:17:31.660

问题是您正在循环表单而不是表单中的输入。请看这个[小提琴](http://jsfiddle.net/qSzBb/2/)或这个

```
$(function() {

$("#form").submit(function(e) {

    var inpts = $("#form").children('input'), valid = true;
    inpts.each(function(idx)
    {
        var i = $(inpts[idx]);
        var defaultValue = i.prop('defaultValue');
        if (i.value = defaultValue)
        { 
            valid = false;
        }

    });

    if (!valid) 
    {
        alert('dsfsdf');
        e.preventDefault();
    }

}); 
```

});

# c# - 使用 Windows 窗体启动外部浏览器

> ID：14712372
> 
> 赞同：0
> 
> 时间：2013-02-05T16:37:10.610
> 
> 标签：c#, winforms

我编写了一个程序来处理将 html 文件放入并从 cms 中对话出来。在这个程序中，我有一些代码，以便您可以在不同的浏览器上预览。但是，当我运行它时，我得到一个未处理的异常，指出“无法启动进程，因为没有提供文件名。”

*   这只发生在尝试启动 chrome 或 firefox 时，IE 工作正常。
*   只有当我通过 Advanced Installer 运行我的程序并将其安装到我的机器上时，它才会发生，它在直接从 VS2012 以发布模式构建它时工作。

我的代码如下：

```
if (chk_ExternalBrowser.Checked)
{
    string ffTempFilePath = "\"" + tempFilePath + "\"";//tempFilePath is an absolute path to the html file

    Process.Start(browserPaths[1], ffTempFilePath);//launch FF, browserPaths[1] contains an absolute path to firefox.exe
} 
```

提前感谢您提供的任何见解。

**更新：** 错误是因为我没有用引号括起 browserPaths[1] 的内容。现在我没有收到任何错误，但是打开了一个 Windows 资源管理器窗口而不是 firefox 浏览器。我修改后的代码如下：

```
if (chk_ExternalBrowser.Checked)
{
    string ffTempFilePath = "\"" + tempFilePath + "\"";//after this line ffTempFilePath == \"C:\\Users\\<username ommitted>\\Documents\\Visual Studio 2012\\Projects\\Local_IMP\\Local_IMP\\bin\\Release\\TEMP.html\"

    string tempTest = "\"" + browserPaths[1] + "\"";//after this line tempTest == \"C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe\"
    Process.Start(tempTest, ffTempFilePath);//launch FF
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:54:52.767

原来我只输入了 \n 来结束我的文件中的一行而不是 \r\n 所以我只在第 1 行读取了 IE 的正确性，而不是后续行的其他行

# javascript - 使用 AngularUI 作为热键

> ID：14712374
> 
> 赞同：0
> 
> 时间：2013-02-05T16:37:17.973
> 
> 标签：javascript, angularjs

我正在使用 AngularUI 按键指令，但它给我带来了问题。我能够创建一个文本字段并将一个按键事件附加到它（基本上它正是 AngularUI 页面上的演示中的内容）。

```
<textarea ui-keypress="{13:'keypressCallback($event)'}"> 
```

我正在尝试为页面上的按钮注册热键，当我将相同的 ui-keypress 事件附加到按钮（或页面正文）时，它不起作用。我怎样才能让我的热键工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:44:54.387

建立你的。我所做的方法是创建 2 个指令，一个用于 keypress，一个用于 keyup

在你创建了你的模块（我称之为 yourapp）之后，你就创建了你的指令。

```
yourapp.directive('keyPress', function () {
  return function (scope, elm, attrs) {
    elm.bind('keypress', function (e) {
      var intKey = (window.Event) ? e.which : e.keyCode;
      if (intKey === attrs.key) {
        if (scope.theater === 1) {
          scope.$apply(attrs.keyPress);
        }
      }
    });
  };
});

yourapp.directive('keyUp', function () {
  return function (scope, elm, attrs) {
    elm.bind('keyup', function (e) {
      var intKey = (window.Event) ? e.which : e.keyCode;
      if (intKey === attrs.key) {
        if (scope.theater === 1) {
          scope.$apply(attrs.keyUp);
        }
      }
    });
  };
}); 
```

所以你可以这样使用它：

```
<div key-press="doSomething()" key="13"> // enter
<div key-up="doSomething()" key="27"> // esc 
```

**注意**：这`(window.Event) ? e.which : e.keyCode;`将使其跨浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:28:16.293

尝试 keyup 或 keydown，有些键不能与 keypress 一起使用（ui-keyup、ui-keydown 也存在）。

# php - MySQLi 错误处理？

> ID：14712379
> 
> 赞同：1
> 
> 时间：2013-02-05T16:37:31.433
> 
> 标签：php, architecture, mysqli

我在程序 MySQL 之后开始使用 OO-MySQLi，但我遇到了问题。

在生产环境中，我的系统将所有错误显示为自定义页面。MySQLi 错误也是一个“错误”，我想抓住它们，但在文档中只描述了一种方法：

```
if (!$mysqli->query("SET a=1")) {
    exit('An error occurred: ' . $mysqli->error);
} 
```

（仅举例）。这是一个非常糟糕的方法，因为在我的系统中，当错误发生时我正在做很多事情，比如日志记录、调用事件等。

当然，我可以扩展 mysqli 类，例如：

```
class myMysqli {
    public function __construct(/* ... */)
    {
        parent::__construct(/* ... */);
    }

    public function query(/* .. */)
    {
        parent::query(/* ... */);

        if($this->errno !== 0)
        {
            // An error occurred
        }
    }
}
$mysqli = new myMysqli(/* ... */);
$mysqli->query(/* ... */); 
```

但是这样我需要扩展几乎**所有**可能发生错误的方法。此外，MySQLi 提供了有其自身错误的准备好的语句（mysqli_stmt 类）！

你能知道处理 MySQLi 错误的更好方法吗？先感谢您。

* * *

**添加**

关于例外：我是否正确理解，有例外我需要做这样的事情：

```
try {
    $mysqli->query(/* ... */);
} catch (Exception $e) {
    // An error occurred
} 
```

但这类似于

```
if(!$mysqli->query(/* ... */))
{
    // An error occured
} 
```

有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T11:37:46.527

首先，**您的旧方法是错误的。**

```
exit('An error occurred: ' . $mysqli->error); 
```

一般来说，这是一种不好的做法，也不应该与 mysqli 一起使用。

你真正想要的是错误/异常**处理程序**。您可以在其中执行任何操作，例如记录、调用事件、显示页面。

异常优于常规错误 - 因此，将您的 mysqli 设置为异常模式，如其他答案所示，然后在错误处理程序中捕获所有错误。而 try..catch**仅**在您有不同的特定操作来处理错误时才必须使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-28T23:00:59.430

我使用这样的 try...catch 方法...

```
try {
    // get result of record from 'id'
    $query = "SELECT * FROM models WHERE id =$id";
    $result = $mysqli->query($query);

    if (!$result) {
        throw new Exception($mysqli->error());      
    } 
    $row = $result->fetch_array(); 
 }
 catch (Exception $e)  
 {
     echo "We are currently experiencing issues. Please try again later.";
     echo $e->getMessage();
 } 
 finally
 {
      $result->free();
 } 
```

这些帮助有用？

你使用'try'来测试一个条件，如果它返回真(!$result)就抛出一个异常。并使用“catch”来捕捉可能发生的所有其他事情！

# java - source 1.3（使用 -source 5 或更高版本来启用泛型）

> ID：14712384
> 
> 赞同：9
> 
> 时间：2013-02-05T16:37:35.177
> 
> 标签：java, maven-2, bamboo

我正在使用 Maven 2.x，带有 maven 插件的 Atlassian Bamboo 我的构建 jdk 配置设置为 1.6，并且我在 pom.xml 文件中没有任何 jdk 版本强制设置。

当我在我的 IDE 中编译项目时，它工作正常，但是当我在竹子中编译时，它给了我以下错误。

我已经在任务中检查了我配置的 jdk 版本是 1.6，我还尝试从 pom 中的 maven 插件强制执行 jdk 版本，但效果不佳。你们中的一些人可能知道这里发生了什么？

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

in -source 1.3
(use -source 5 or higher to enable generics)
        List<String> matchedList = findMatchPhrase(keyword, expression);

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T16:40:52.297

将以下属性添加到您的`pom.xml`.

```
<properties>
    <maven.compiler.target>1.6</maven.compiler.target>
    <maven.compiler.source>1.6</maven.compiler.source>
</properties> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T03:13:05.850

另一种不涉及修改 pom 的方法是在命令行中指定源和目标：

```
mvn install -Dmaven.compiler.source=1.6 -Dmaven.compiler.target=1.6 
```

请注意，通常应避免这种情况，因为无法保证以这种方式可重复构建。

# java - (通用类).this.revalidate(); 在 Mac 上

> ID：14712385
> 
> 赞同：1
> 
> 时间：2013-02-05T16:37:39.853
> 
> 标签：java, macos, swing

我正在使用带有 1.6.0_37 Java 的 2010 Mac，使用 DrJava 进行编译。revalidate 方法无法编译，我收到以下错误：

```
2 errors found:
File: /Users/#########/compsci/Final/ConnectFourFrame.java  [line: 123]
Error: /Users/#########/compsci/Final/ConnectFourFrame.java:123: cannot find symbol
symbol  : method revalidate()
location: class ConnectFourFrame 
```

这是引起错误的方法：

```
try 
{ 
  //display in window 
  updateTitleBar(); 
  ObjectInputStream ois = new ObjectInputStream(new FileInputStream(currentFile)); 
  colorGrid = (Color[][]) ois.readObject(); 
  makeGrid(); 
  for(int k = 0; k < 6; k++) 
  { 
    for(int l = 0; l < 7; l++) 
    { 
      if (colorGrid[k][l]==null) 
      { 
        grid[k][l] = new BlankTile(new Point(k, l)); 
      } 
      else if (colorGrid[k][l].equals(Color.red)) 
      { 
        grid[k][l] = new RedTile(new Point(k, l)); 
      } 
      else if (colorGrid[k][l].equals(Color.black)) 
      { 
        grid[k][l] = new BlackTile(new Point(k, l)); 
      }                              
    } 
  }                        
  putNewGrid(); 
  String currentColor = (String) ois.readObject(); 
  ois.close(); 
  ConnectFourFrame.this.repaint(); 
  ConnectFourFrame.this.revalidate();  //This is the offending line
  gp.revalidate(); 
  gp.repaint(); 
} 
```

而外部类是ConnectFourFrame（扩展了JFrame并实现了Runnable）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:27:50.423

`Component.revalidate()`是 Java 7 中的新功能。大概您在 Windows 上使用 7，而不是在 Mac 上使用 6。

如果您需要您的代码在 Java 6 上工作，那么您必须以不同的方式做事。Component.revalidate的[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#revalidate%28%29)说

> 这是一种方便的方法，旨在帮助应用程序开发人员避免手动查找验证根。基本上相当于先调用`invalidate()`这个组件上的方法，然后再调用`validate()`最近的验证根上的方法。

由于 a`JFrame`本身就是一个验证根，因此您应该能够将`revalidate`调用替换为`invalidate()`后跟`validate()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:32:13.410

1.  永远不要使用`try - catch - finally blo`ck 内的 GUI 状态进行管理（对所有程序语言都有效）

2.  以这种形式（您在此处发布的代码）任何打破 Swing GUI 刷新的异常

3.  `ois.close();`应移至`finally block`,

4.  您的问题是切换线路顺序并从中`JFrame`删除`(re)``revalidate``ConnectFourFrame.this.validate(); and then ConnectFourFrame.this.repaint();`

5.  没理由用`invalidate`for `Java versions > Java5`，这个方法全部`LayoutManagers API`正确实现

6.  in`Java7`已添加`revalidate() for JFrame`到 API 中，`validate()`用于次要 Java 版本

# c++ - 数组中的随机字符串

> ID：14712398
> 
> 赞同：0
> 
> 时间：2013-02-05T16:38:12.117
> 
> 标签：c++, arrays, string, random

由于未知原因，我无法在 C++ 上定义字符串数组。我需要从这个数组中随机获取一个字符串。

一直在尝试以下：

`string bands[] = { "Rammstein", "Slipknot", "Franz Ferdinand", "Gorillaz" };`

我收到以下错误：

```
error C2146: syntax error : missing ';' before identifier 'bands'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C3845: 'SpurdoSparde::Form1::bands': only static data members can be initialized inside a ref class or value type 
```

提醒一下，我正在使用 Windows 窗体应用程序。不确定它是否有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:43:49.927

看来您不包括`string`和/或不包括`using std::string`. 以下作品：

```
#include <string>

int main()
{
  std::string bands[] = { "Rammstein", "Slipknot", "Franz Ferdinand", "Gorillaz" };
} 
```

如果您追求动态大小的字符串集合，您应该更喜欢`std::vector<std::string>`C 样式的数组。如果您需要固定大小，如果您没有 C++11，请查看`std::array<std::string, N>`or`tr1`或替代方案。`boost`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:43:50.190

您没有包含`#include <string>`或需要将`std::`命名空间限定符添加到您的类型：

```
std::string bands[] = { ... }; 
```

更喜欢这个而不是做`using namespace std;`。

此外，您~~可能~~更喜欢使用 a`std::vector`而不是普通的旧 C 样式数组：

```
std::vector<std::string> bands = { ... }; 
```

# c# - Mono 中不一致的 Reflection.Emit 支持？

> ID：14712399
> 
> 赞同：3
> 
> 时间：2013-02-05T16:38:13.130
> 
> 标签：c#, mono, reflection.emit

我一直在为 .NET 开发一种自定义语言的编译器，它目前使用 System.Reflection.Emit 但是当我想在 Mono 上运行它时（它在 MS .NET 上运行良好，2.0 和 4.0 CLR）我运行在处理 GenericTypeParameterBuilder 时会遇到一堆异常，最具体地说是这个：

```
Unhandled Exception: System.NotSupportedException: The invoked member is not supported in a dynamic module.
at System.Reflection.Emit.TypeBuilder.check_created () [0x00012] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\corlib\System.Reflection.Emit\TypeBuilder.cs:1678 
at System.Reflection.Emit.TypeBuilder.InternalResolve () [0x00000] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\corlib\System.Reflection.Emit\TypeBuilder.cs:1653 
at System.Reflection.Emit.GenericTypeParameterBuilder.InternalResolve () [0x00000] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\corlib\System.Reflection.Emit\GenericTypeParameterBuilder.cs:93 
at System.Reflection.MonoGenericClass.InternalResolve () [0x00021] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\corlib\System.Reflection\MonoGenericClass.cs:105 
at System.Reflection.Emit.TypeBuilder.DefineDefaultConstructor (MethodAttributes attributes) [0x00030] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\corlib\System.Reflection.Emit\TypeBuilder.cs:484 
at System.Reflection.Emit.TypeBuilder.CreateType () [0x0017f] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\corlib\System.Reflection.Emit\TypeBuilder.cs:788 
at dotC.CType.CreateType () [0x00000] in <filename unknown>:0 
at dotC.Compiler.Save () [0x00000] in <filename unknown>:0 
at dotC.Compiler.Compile () [0x00000] in <filename unknown>:0 
at dotC.Dev.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

现在运行它的代码非常复杂，因此很难复制粘贴特定的代码，但我尝试编译的代码结构如下所示：

```
public class Foo<T> { }
public class Bar<T> : Foo<T> { } 
```

当我尝试编译应该从 Foo<T> 继承的 Bar<T> 类时会出现问题，其中提供给 Foo 的通用参数是来自 bar 的 T。

所以我的问题是：这是 Mono SRE 中的一个已知问题吗？有没有办法解决这个问题？它是否固定在新的单声道测试版或其他东西中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:10:49.787

这当然看起来像一个错误。似乎`DefineDefaultConstructor`在设置父类型之前显式调用子类型的类型构建器并调用`CreateType`将解决它，至少在最简单的情况下是这样。

**编辑**

或者，为子类型显式定义构造函数（可能只是调用基本构造函数并返回）看起来即使在设置父类型之后它也可以工作，因此这可能是一种更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:57:57.527

我试图在从 git 编译的最新单声道上复制此问题，但无法复制此问题。它可能已经被修复了。我使用的代码：

```
var assembly = AppDomain.CurrentDomain.DefineDynamicAssembly(
    new AssemblyName("test"), AssemblyBuilderAccess.RunAndSave);
var module = assembly.DefineDynamicModule("test.dll");
var foo = module.DefineType("Foo");
foo.DefineGenericParameters("T");
var bar = module.DefineType("Bar");
bar.DefineGenericParameters("T");
bar.SetParent(foo);
foo.CreateType();
bar.CreateType(); 
```

# c# - 如何在gridview中将字符串列排序为日期时间列

> ID：14712400
> 
> 赞同：3
> 
> 时间：2013-02-05T16:38:14.343
> 
> 标签：c#, asp.net, linq, datetime, gridview

我想在我的网格视图中订购一列，`datetime`但我觉得它是作为字符串订购的：

# 我的代码：

```
if (SortExpression.ToString() == "TransDate")
{
    if (SortDirection == SortDirection.Ascending)
    {
        gv_Details1.DataSource = TransactionList.OrderBy(t =>  DateTime.Parse(t.TransDate)).ToList<UserTransactionDTO>();
    }
    else
    {
        gv_Details1.DataSource = TransactionList.OrderByDescending(t => DateTime.Parse(t.TransDate)).ToList<UserTransactionDTO>();
    }
} 
```

* * *

# 我的 aspx ：

```
 <asp:BoundField DataField="TransDate" HeaderText="Date" SortExpression="TransDate"> 
```

* * *

部分结果::

```
23/12/2012 09:51
27/9/2012 11:36
3/10/2012 12:28
2/10/2012 10:51 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T19:24:30.803

我认为问题在于您`DateTime.Parse`在 linq 排序中的使用，并且您的字符串存在第一部分和第二部分可能是日期或月份的情况......请记住解析是逐项进行的，所以只是因为第一个解析方式不这并不意味着第二个将以相同的方式解析。

您的区域默认值可能是月份第一，这对第一对夫妇不起作用，因此它知道第一部分是天，因此它使用该格式。对于最后几个日期，第一部分确实适用于月份，因此它按照默认值首先解析月份。或相反亦然 ：）

尝试`DateTime.ParseExact`像这样使用：

```
CultureInfo provider = CultureInfo.InvariantCulture;
string format = "dd/MM/yyyy hh:mm";

gv_Details1.DataSource = TransactionList.
    OrderBy(t =>  DateTime.ParseExact(t.TransDate, format, provider)).
    ToList<UserTransactionDTO>(); 
```

希望我选择了正确的格式，但如果不只是调整它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:37:56.973

结果看起来不像是对我排序的字符串...下面是一个使用字符串解析和列表正确排序的快速示例

```
static void Main(string[] args)
{
    List<String> datestrings = new List<string>()
    {
        "12/23/2012 09:51",
        "9/27/2012 11:36",
        "10/2/2012 12:28",
        "10/3/2012 10:51"
    };
    List<DateTime> dates = datestrings.Select(a => DateTime.Parse(a)).OrderBy(a => a).ToList();
    foreach (var d in dates)
    {
        Console.WriteLine(d);
    }

    Console.ReadLine();
} 
```

以上正确排序您的字符串。

我将首先确保在您设置数据集后由于某种原因网格不会对您进行重新排序，方法是存储`TransactionList.OrderBy(t => Da...`在一个临时变量中并确保它在设置数据源之前正确排序。

接下来，我将检查您的日期是否存在文化问题（或使用 ParseExact）（尽管您以当前顺序发送的内容对我没有任何影响）。

最后，我没有跟上 asp 绑定的速度，但也许你绑定到数据集的方式需要你指定它是一个日期，如下面的链接所示：[http ://forums.asp.net/t/ 1001482.aspx/1](http://forums.asp.net/t/1001482.aspx/1)

该网站的摘录建议：

```
< asp:boundfield datafield="Your_Date_Column" dataformatstring="{0:MMMM d, yyyy}" htmlencode="false" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:44:33.243

当我仅通过 SQL 执行此操作时，我在附加到网格视图的 T-SQL 代码中添加了一个“order by”语句。

# windows - 以编程方式在 R 控制台中设置字体和字体大小？

> ID：14712401
> 
> 赞同：6
> 
> 时间：2013-02-05T16:38:15.377
> 
> 标签：windows, r, user-interface, console

是否可以像使用“编辑-> GUI 首选项”一样以**编程方式设置**[控制台字体和字体大小](https://stackoverflow.com/questions/6918614/specifying-the-font-in-an-r-console-multiplatform-solutions)？这个函数的外观如何？我在窗户上。

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T17:27:17.150

在 Windows 上（至少），`$R_HOME/etc/Rconsole`配置文件为控制台和寻呼机设置了许多可选参数。这是您可以手动编辑以更改默认字体和字体大小的部分：

```
## Font.
# Please use only fixed width font.
# If font=FixedFont the system fixed font is used; in this case
# points and style are ignored. If font begins with "TT ", only
# True Type fonts are searched for.
font = TT Courier New
points = 10
style = normal # Style can be normal, bold, italic 
```

要从活动 R 会话的命令行更改值，您可以使用该`loadRconsole()`函数。它读入一个包含上述形式指令的文本文件，这将覆盖`Rconsole`R 启动时读取的值。这是一个例子：

```
temp <- tempfile()
cat("points = 13\n", file = temp)
cat("style = italic\n", file = temp, append = TRUE)
loadRconsole(file = temp)

## And then, to reset to the defaults:
loadRconsole(file = file.path(R.home(), "etc/Rconsole")) 
```**

# python - Pymongo 游标限制（1）返回超过 1 个结果

> ID：14712402
> 
> 赞同：11
> 
> 时间：2013-02-05T16:38:17.500
> 
> 标签：python, mongodb, pymongo

这些都是我收藏的所有文件：

```
{
    "_id" : ObjectId("5110291e6ee1c31d5b275d01"),
    "d" : 24,
    "s" : [
        1,
        2,
        3
    ]
}
{
    "_id" : ObjectId("511029266ee1c31d5b275d02"),
    "d" : 24,
    "s" : [
        4,
        5,
        6
    ]
}
{
    "_id" : ObjectId("5110292e6ee1c31d5b275d03"),
    "d" : 24,
    "s" : [
        7,
        8
    ]
} 
```

这是我要运行的查询：

```
mongo = get_collection(self.collection_name)
res = mongo.find().sort([('_id', -1)]).skip(1).limit(1) 
```

`get_collection()`是我制作的一个辅助方法。遍历光标 ，`res`只生成一个文档：

```
res = mongo.find().sort([('_id', -1)]).skip(1).limit(1)
for document in res:
    print document

> {u's': [4.0, 5.0, 6.0], u'_id': ObjectId('511029266ee1c31d5b275d02'), u'd': 24.0} 
```

但是，使用偏移量访问 res 会为第 0 和第 1 个元素返回两个不同的文档：

```
res = mongo.find().sort([('_id', -1)]).skip(1).limit(1)
pprint(res[0])
> {u'_id': ObjectId('511029266ee1c31d5b275d02'), u'd': 24.0, u's': [4.0, 5.0, 6.0]}
pprint(res[1])
> {u'_id': ObjectId('5110291e6ee1c31d5b275d01'), u'd': 24.0, u's': [1.0, 2.0, 3.0]} 
```

这是一个错误吗？`limit(1)`应该只返回一个结果，不是吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T16:51:57.320

[文档](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.__getitem__)说这个关于游标的索引访问：

> 先前应用于此游标的任何限制都将被忽略。

# c++ - 为什么谷歌在成员变量之后命名访问器和修改器？

> ID：14712404
> 
> 赞同：6
> 
> 时间：2013-02-05T16:38:30.900
> 
> 标签：c++, oop, coding-style, encapsulation, google-style-guide

[http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Function_Names#Function_Names](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Function_Names#Function_Names)

> 常规函数大小写混合；访问器和修改器匹配变量的名称：MyExcitingFunction()、MyExcitingMethod()、my_exciting_member_variable()、set_my_exciting_member_variable()。

对用户隐藏实现细节不是封装的全部意义，因此他/她不知道访问器/突变器方法是否返回/修改成员变量？如果我更改变量名称或更改它在对象中的存储方式怎么办？

**编辑：**

如果我有一个实例变量`int foo_`，它看起来很简单

```
int foo() const { return foo_; } 
```

但是如果我添加另一个返回的方法，`foo_ + 2`我应该命名 if`bar`还是`GetBar`？

```
int bar() const { return foo_ + 2; }
int GetBar() const { return foo_ + 2; } 
```

如果我选择`GetBar`并稍后决定将返回值缓存在另一个成员变量`bar_`中，我是否必须将方法重命名为`bar`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:41:50.720

实际上，封装的意义在于隐藏一个类的*内部工作*，而不一定是隐藏事物的名称。成员变量的名称无关紧要；这是访问器或修改器提供 *的间接级别。*

拥有访问器使您能够更改类的内部工作方式（包括成员变量的名称），而不会破坏类与外部世界的接口。类的用户不必关心实现细节，包括在类内部命名什么，而只关心从外部看到*的类的行为。*

换句话说，类的用户*不应该依赖 Google 的样式指南来确定他们是否正在修改成员变量。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T16:40:18.967

因为谷歌风格指南仅供谷歌员工遵循。相反 - 它不是一个很好的风格指南。

举个例子——他们明确禁止通过非常量引用传递，因为它可能会“令人困惑”。

所以你是对的，它违背了封装的目的。不要用它来引导自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T17:16:56.190

在考虑一个类时，它可能在概念上具有可见状态，可以由客户端访问。这种状态如何在类中表示是另一回事，这就是访问器（getter 和 setter）隐藏的内容。我自己的命名约定也做出了这种区分：如果函数在概念上是 getter 或 setter，它具有属性的名称，通常是名词；否则，它是一个动词。我区分了函数获取或设置在概念上不是类的一部分的情况（例如，部分取决于参数）、具有动词`get`或`set`名称的情况，以及函数实际修改的情况什么是概念上的属性，在这种情况下它们不是。

其余的，就像大多数风格指南一样，并不是每个人都完全同意这个。例如，我不确定我是否喜欢他们的命名约定。它们被称为命名约定，因为它们就是：任意约定。唯一真正的硬性规则是必须区分类型、宏和其他内容，并且名称不应以下划线开头或结尾。（还有一些更软的规则：我会非常怀疑最终使局部变量的名称比全局变量的名称更长的约定。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:14:56.470

我可能对常识的假设太过分了，但我很确定保留已发布的界面优先于遵循命名指南。

由于您的原始`bar`/`GetBar`函数*不是*访问器，我认为它应该遵循常规名称指南并被调用`GetBar`。

如果您稍后引入`bar_`，以便在某种意义上该函数成为访问器，我很确定您不应该删除`GetBar`. 我想您也可以添加一个函数`bar()`，定义为执行相同的操作，但我*认为*我不会将样式指南解释为要求这样做。

我也很确定，一旦您发布的接口包含您（和调用者）认为是“访问器”的函数，封装无论如何在某种程度上都是窗外的，因为您正在谈论的状态对象而不是其行为。仅仅因为函数在当前实现中返回成员变量的值并不意味着它必须被记录为访问器。但是，如果您*坚持*编写公开认可为访问器的函数，Google 会告诉您如何命名它们。典型的例子是，一个足够笨的数据记录对象可能有合理的访问器，因为整个类被公开定义为一组可能有一点行为的字段。

我之前已经读过几次该风格指南，但我从未在 Google 工作过，所以我不知道他们的代码审查如何在实践中应用它。我应该认为，一个如此规模的组织不可能在每个细节上都*完全一致。*所以你的猜测可能和我的一样好。

# email - 下订单时如何在 Magento 中触发电子邮件？

> ID：14712407
> 
> 赞同：3
> 
> 时间：2013-02-05T16:38:42.147
> 
> 标签：email, magento, triggers

我需要以下解决方案：1) 客户下订单 2) 店主收到没有价格信息的电子邮件（例如装箱单）

我需要编辑哪些文件（我已经阅读了很多帖子，他们似乎没有提到文件路径）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:19:14.077

实现这一目标的两种可能方法：

1.  您可以为该类创建一个模型重写，并通过使用不同的模板向店主发送电子邮件来`Mage_Sales_Model_Order`覆盖该函数`Mage_Sales_Model_Order::sendNewOrderEmail`

2.  您可以将配置条目“Sales Email/Order/Send Order Email Copy To”设置为空（这样店主不会收到与客户相同的电子邮件），并实现观察者捕获事件`sales_order_place_after`。在观察者函数中，您可以使用没有价格信息的模板向店主发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:06:36.937

我知道我有一个黑客......然后我不再拥有它了。我尽我所能，现在，我们正在抄送自己的客户通知电子邮件。一旦我们完成了网站升级，我将不得不阅读我的 hack。我很确定它`app/core/Mage/Sales/Model/Order.php`可能在`public function sendNewOrderEmail()`

看这张照片： ![Magento 交易电子邮件](../Images/a8faa0654121545391ca107201e7089e.png)

我记得在发送客户通知后在文件中进行硬编码，我们向管理员发送了另一个文件，但将交易订单通知电子邮件的模板 ID 硬编码为 8。现在，不知何故，我正在以“正确的方式”进行操作，但是不知道我是如何触发此交易电子邮件的，同时客户订单通知也会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:11:41.273

使您在该模块中的自定义模块在“sales_order_save_after”之后发送一个事件。在观察者文件中捕获此事件并将您的自定义编码放在观察者身上。 [读这个](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

# jna - jna CoCreateInstance

> ID：14712408
> 
> 赞同：1
> 
> 时间：2013-02-05T16:38:43.460
> 
> 标签：jna

我正在尝试在具有图标的 Windows 7 中创建一个链接。我为此使用 JNA 库。我在调用 CoCreateInstance 时遇到问题。它返回错误。首先，我不确定 IShellLink 的 GUID 是否正确（我不是 Windows 程序员）。以下是我到目前为止的代码。一旦获得指向 IShellLink 的指针，我就需要填写链接的参数（目标、图标、描述等）。我正在从以下链接（[http://www.codeproject.com/Articles/11467/How-to-create-short-cuts-link-files](http://www.codeproject.com/Articles/11467/How-to-create-short-cuts-link-files)）中找到的 C 代码对该调用进行建模。我知道我可以为此使用 mklink 命令，但它确实可以选择添加图标和描述。

```
private void createLink(){
    Pointer reserved = null; //Must be null
    int dwCoInit = 0;

    HRESULT oleInitResult = Ole32.INSTANCE.CoInitializeEx(reserved,dwCoInit);
    if(oleInitResult.equals(W32Errors.S_OK)){
        GUID rclsid = Ole32Util.getGUIDFromString("{e82a2d71-5b2f-43a0-97b8-81be15854de8}"); //Shell object
        GUID riid = Ole32Util.getGUIDFromString("{000214EE-0000-0000-C000-000000000046}"); //CLSID of the IShellLink object
        PointerByReference ppv = new PointerByReference();
        HRESULT oleCreateResult = Ole32.INSTANCE.CoCreateInstance(rclsid,null,ObjBase.CLSCTX_INPROC,riid,ppv);
        if(oleCreateResult.equals(W32Errors.S_OK)){

        }else{
            System.out.println("Failed to create link error "+oleCreateResult.intValue());
        }
    }
    Ole32.INSTANCE.CoUninitialize();
} 
```

#####################C++示例代码

```
/*
--------------------------------------------------------------------------------
Description: Creates the actual 'lnk' file (assumes COM has been initialized).
Parameters: pszTargetfile    - File name of the link's target, must be a non-empty string.
pszTargetargs    - Command line arguments passed to link's target, may be an empty string.
pszLinkfile      - File name of the actual link file, must be a non-empty string.
pszDescription   - Description of the linked item. If this is an empty string the description is not set.
iShowmode        - ShowWindow() constant for the link's target. Use one of:
                       1 (SW_SHOWNORMAL) = Normal window.
                       3 (SW_SHOWMAXIMIZED) = Maximized.
                       7 (SW_SHOWMINNOACTIVE) = Minimized.
                     If this is zero the showmode is not set.
pszCurdir        - Working directory of the active link. If this is an empty string the directory is not set.
pszIconfile      - File name of the icon file used for the link.  If this is an empty string the icon is not set.
iIconindex       - Index of the icon in the icon file. If this is < 0 the icon is not set.
Returns: HRESULT value >= 0 for success, < 0 for failure.
--------------------------------------------------------------------------------
*/
static HRESULT CreateShortCut(LPSTR pszTargetfile, LPSTR pszTargetargs, LPSTR pszLinkfile, LPSTR pszDescription, 
int iShowmode, LPSTR pszCurdir, LPSTR pszIconfile, int iIconindex) {
HRESULT       hRes;                  /* Returned COM result code */
IShellLink*   pShellLink;            /* IShellLink object pointer */
IPersistFile* pPersistFile;          /* IPersistFile object pointer */
WORD          wszLinkfile[MAX_PATH]; /* pszLinkfile as Unicode string */
int           iWideCharsWritten;     /* Number of wide characters written */
hRes = E_INVALIDARG;
if (
       (pszTargetfile != NULL) && (strlen(pszTargetfile) > 0) &&
       (pszTargetargs != NULL) &&
       (pszLinkfile != NULL) && (strlen(pszLinkfile) > 0) &&
       (pszDescription != NULL) && 
       (iShowmode >= 0) &&
       (pszCurdir != NULL) && 
       (pszIconfile != NULL) &&
       (iIconindex >= 0)
) {
    hRes = CoCreateInstance(&CLSID_ShellLink,     /* pre-defined CLSID of the IShellLink object */
                            NULL,                 /* pointer to parent interface if part of aggregate */
                            CLSCTX_INPROC_SERVER, /* caller and called code are in same process */
                            &IID_IShellLink,      /* pre-defined interface of the IShellLink object */
                            &pShellLink);         /* Returns a pointer to the IShellLink object */
    if (SUCCEEDED(hRes))
    {
      /* Set the fields in the IShellLink object */
      hRes = pShellLink->lpVtbl->SetPath(pShellLink, pszTargetfile);
      hRes = pShellLink->lpVtbl->SetArguments(pShellLink, pszTargetargs);
      if (strlen(pszDescription) > 0)
      {
        hRes = pShellLink->lpVtbl->SetDescription(pShellLink, pszDescription);
      }
      if (iShowmode > 0)
      {
        hRes = pShellLink->lpVtbl->SetShowCmd(pShellLink, iShowmode);
      }
      if (strlen(pszCurdir) > 0)
      {
        hRes = pShellLink->lpVtbl->SetWorkingDirectory(pShellLink, pszCurdir);
      }
      if (strlen(pszIconfile) > 0 && iIconindex >= 0)
      {
        hRes = pShellLink->lpVtbl->SetIconLocation(pShellLink, pszIconfile, iIconindex);
      }

      /* Use the IPersistFile object to save the shell link */
      hRes = pShellLink->lpVtbl->QueryInterface(pShellLink,        /* existing IShellLink object */
                                                &IID_IPersistFile, /* pre-defined interface of the IPersistFile object */
                                                &pPersistFile);    /* returns a pointer to the IPersistFile object */
      if (SUCCEEDED(hRes))
      {
        iWideCharsWritten = MultiByteToWideChar(CP_ACP, 0, pszLinkfile, -1, wszLinkfile, MAX_PATH);
        hRes = pPersistFile->lpVtbl->Save(pPersistFile, wszLinkfile, TRUE);
        pPersistFile->lpVtbl->Release(pPersistFile);
      }
      pShellLink->lpVtbl->Release(pShellLink);
    }

  }
  return (hRes);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T18:39:07.347

结果很简单。因此，如果您点击此页面，您可能会按照以下说明节省几天时间：根据 com4j 站点中的说明生成 shell32.dll 的映射：http://com4j.java.net/tutorial.html [然后](http://com4j.java.net/tutorial.html) 只需调用以下命令创建图标。一旦你知道，这很简单。

```
IWshShell3 shellLink = ClassFactory.createWshShell();
Com4jObject obj =  shellLink.createShortcut(linkPath.getAbsolutePath());
IWshShortcut link = obj.queryInterface(IWshShortcut.class);
link.workingDirectory(desktopPath.getAbsolutePath());
link.description("My Link");
link.arguments(" Hello ");
link.iconLocation(iconPath.getAbsolutePath());
link.targetPath(javawsPath.getAbsolutePath());
link.setName("Test Link");
link.save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:58:52.530

我通过更改 GUID 修复了对 CoCreateInstance 的调用。下面是代码，它返回OK。但是现在我得到了指针，我不确定如何设置我需要的参数（链接名称、目标名称、描述、图标）。有人有什么建议吗？

```
GUID rclsid = Ole32Util.getGUIDFromString("{00021401-0000-0000-C000-000000000046}"); //CLSID_ShellLink 
if (W32Errors.FAILED(hr.intValue())) { 
    Ole32.INSTANCE.CoUninitialize(); 
    throw new Exception("Shell Object GUID failed."); 
}       
GUID riid = Ole32Util.getGUIDFromString("{000214EE-0000-0000-C000-000000000046}"); //CLSID of the IShellLink object
PointerByReference ppv = new PointerByReference();
hr = Ole32.INSTANCE.CoCreateInstance(rclsid,null,WTypes.CLSCTX_LOCAL_SERVER,riid,ppv);
if(hr.equals(W32Errors.S_OK)){
    Pointer type = ppv.getValue();

}else{
    System.out.println("Failed to create link error "+hr.intValue());
} 
```

# iphone - 使用 AFNetworking JSON 解析获取空 UITable

> ID：14712409
> 
> 赞同：0
> 
> 时间：2013-02-05T16:38:47.857
> 
> 标签：iphone, json, ios6, youtube-api, afnetworking

我正在尝试使用 AFNetworking AFJSONRequestOperation 解析 JSON 数据。但由于某种原因，我得到了一个空的 UITable。

我设法在没有 AFNetworking 的情况下做到了。

有人可以看看我的代码[谷歌驱动器](http://docs.google.com/folder/d/0B1EPIKZI6a5sSzVWdXh6VU1POWs/edit?usp=sharing)

```
 #import "AFNetworking.h"

    #import "AFJSONRequestOperation.h"

    @interface KKViewController ()

    @end

@implementation KKViewController

@synthesize  movies = _movies, count = _count;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.movies = [[NSArray alloc] init];

   // get data from youtube

 NSURL *url = [[NSURL alloc] initWithString:@"http://gdata.youtube.com/feeds/api/playlists/PL0l3xlkh7UnvLdr0Zz3XZZuP2tENy_qaP?v=2&alt=jsonc&max-results=50"];

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        self.movies = [JSON valueForKeyPath:@"data.items.video"];

        // NSLog(@@, video)

        //

        self.count = [JSON valueForKeyPath:@"data.items.video.thumbnail"];
        [self.activityIndicatorView stopAnimating];
        [self.tableView setHidden:NO];
        [self.tableView reloadData];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.

    if (self.movies && self.movies.count) {
        return self.movies.count;
    } else {
        return 0;
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellID = @"Cell Identifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellID];
    }

    NSDictionary *movie = [self.movies objectAtIndex:indexPath.row];

    NSDictionary *countt = [self.count objectAtIndex:indexPath.row];
    cell.textLabel.text = [movie objectForKey:@"title"];
    cell.detailTextLabel.text = [movie objectForKey:@"uploader"];

    NSURL *url = [[NSURL alloc] initWithString:[countt objectForKey:@"hqDefault"]];
    [cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder"]];

    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end

  [1]: https://docs.google.com/folder/d/0B1EPIKZI6a5sSzVWdXh6VU1POWs/edit?usp=sharing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:43:39.787

1.  您应该将启动代码从 viewDidLoad 移动到 viewWillAppear

2.  numberOfSectionInTableView 应该返回 1 而不是 0

# c# - 自定义配置部分 - 删除不需要的集合标签

> ID：14712410
> 
> 赞同：2
> 
> 时间：2013-02-05T16:38:52.000
> 
> 标签：c#, .net, configuration

我为 app.config 中的自定义嵌套配置集合创建了自己的一组类。您可以在下面看到我必须使用的当前配置。我想知道的是如何修改我的类，这样我就不需要 AutoSyncConfiguration 和 WatchedFolders 元素。我希望生成的配置部分如下所示：

```
<custom>
  <BackupLocation Name="S3" Details="AccessKey=asdf;SecretKey=asdf;BucketName=asdf">
    <WatchedFolder Name="test1" LocalFolder="C" RemoteFolder="Z" FileSpec="*"></WatchedFolder>
    <WatchedFolder Name="test2" LocalFolder="D" RemoteFolder="X" FileSpec="*.doc"></WatchedFolder>
  </BackupLocation>
  <BackupLocation Name="External" Details="MappedDrive=X;">
    <WatchedFolder Name="test" LocalFolder="D" RemoteFolder="XPhotos" FileSpec="*.jpeg"></WatchedFolder>
  </BackupLocation>
</custom> 
```

以下是我的课程、我的 app.config 的相关部分以及获取自定义配置的代码行：

```
public class Custom : ConfigurationSection
{
    [ConfigurationProperty("AutoSyncConfiguration")]
    public BackupLocationElementCollection AutoSyncConfiguration
    {
        get { return this["AutoSyncConfiguration"] as BackupLocationElementCollection; }
    }
}
public class BackupLocationElementCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new BackupLocationElement();
    }
    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((BackupLocationElement)element).Name;
    }
    public override ConfigurationElementCollectionType CollectionType
    {
        get { return ConfigurationElementCollectionType.BasicMap; }
    }
    protected override string ElementName
    {
        get { return "BackupLocation"; }
    }
    public BackupLocationElement this[int index]
    {
        get { return (BackupLocationElement)BaseGet(index); }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    }
    new public BackupLocationElement this[string backupName]
    {
        get { return (BackupLocationElement)BaseGet(backupName); }
    }
    public bool ContainsKey(string key)
    {
        bool result = false;
        object[] keys = BaseGetAllKeys();
        foreach (object obj in keys)
        {
            if ((string)obj == key)
            {
                result = true;
                break;
            }
        }
        return result;
    }
}

public class BackupLocationElement : ConfigurationElement
{
    [ConfigurationProperty("Name", IsRequired = true, IsKey = true)]
    public string Name
    {
        get { return this["Name"] as string; }
        set { this["Name"] = value; }
    }

    [ConfigurationProperty("Details", IsRequired = true, IsKey = false)]
    public string Details
    {
        get { return this["Details"] as string; }
        set { this["Details"] = value; }
    }

    [ConfigurationProperty("WatchedFolders")]
    public WatchedFolderElementCollection WatchedFolders
    {
        get { return this["WatchedFolders"] as WatchedFolderElementCollection; }
    }
}

public class WatchedFolderElementCollection : ConfigurationElementCollection
{
    protected override ConfigurationElement CreateNewElement()
    {
        return new WatchedFolderElement();
    }
    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((WatchedFolderElement)element).Name;
    }
    public override ConfigurationElementCollectionType CollectionType
    {
        get { return ConfigurationElementCollectionType.BasicMap; }
    }
    protected override string ElementName
    {
        get { return "WatchedFolder"; }
    }
    public WatchedFolderElement this[int index]
    {
        get { return (WatchedFolderElement)BaseGet(index); }
        set
        {
            if (BaseGet(index) != null)
            {
                BaseRemoveAt(index);
            }
            BaseAdd(index, value);
        }
    }
    new public WatchedFolderElement this[string folderName]
    {
        get { return (WatchedFolderElement)BaseGet(folderName); }
    }
    public bool ContainsKey(string key)
    {
        bool result = false;
        object[] keys = BaseGetAllKeys();
        foreach (object obj in keys)
        {
            if ((string)obj == key)
            {
                result = true;
                break;
            }
        }
        return result;
    }
}

public class WatchedFolderElement : ConfigurationElement
{
    [ConfigurationProperty("Name", IsRequired = true, IsKey = true)]
    public string Name
    {
        get { return this["Name"] as string; }
        set { this["Name"] = value; }
    }

    [ConfigurationProperty("LocalFolder", IsRequired = true, IsKey = false)]
    public string LocalFolder
    {
        get { return this["LocalFolder"] as string; }
        set { this["LocalFolder"] = value; }
    }

    [ConfigurationProperty("RemoteFolder", IsRequired = true, IsKey = false)]
    public string RemoteFolder
    {
        get { return this["RemoteFolder"] as string; }
        set { this["RemoteFolder"] = value; }
    }

    [ConfigurationProperty("FileSpec", IsRequired = true, IsKey = false)]
    public string FileSpec
    {
        get { return this["FileSpec"] as string; }
        set { this["FileSpec"] = value; }
    }
} 
```

以下是我的 app.config：

```
<configuration>
  <configSections>
    <section name="custom" type="AutoSync.Custom, AutoSync" />
  </configSections>

  <custom>
    <AutoSyncConfiguration>
      <BackupLocation Name="S3" Details="AccessKey=asdf;SecretKey=asdf;BucketName=asdf">
        <WatchedFolders>
            <WatchedFolder Name="test1" LocalFolder="C" RemoteFolder="Z" FileSpec="*"/>
        </WatchedFolders>
      </BackupLocation>
      <BackupLocation Name="External" Details="MappedDrive=X;">
        <WatchedFolders>
            <WatchedFolder Name="test" LocalFolder="D" RemoteFolder="XPhotos" FileSpec="*.jpeg" />
        </WatchedFolders>
      </BackupLocation>
    </AutoSyncConfiguration>
  </custom>
</configuration> 
```

我的代码如下：

```
Custom config = (Custom)ConfigurationManager.GetSection("custom"); 
```

有人能告诉我如何成功折叠我的配置部分以摆脱“未使用”的元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:16:47.910

我看不出如何通过简单地添加一两行代码来完成，因为它只是 .NET 配置如何序列化/反序列化集合。一种解决方案可能是 - 创建您自己的类型转换器 - `ConfigurationConverterBase`. 将其应用于您的`AutoSyncConfiguration`财产。在转换器中做任何你想序列化/反序列化集合的事情。

# mongodb - MongoDB 更新满足条件的子数组的字段

> ID：14712413
> 
> 赞同：1
> 
> 时间：2013-02-05T16:38:59.980
> 
> 标签：mongodb

我遇到了一个问题，我需要更新在更大数组中包含的数组中找到的特定字段，该数组与**MongoDB v2.2.3**中的某些条件匹配。

我有以下 mongodb 示例文档。

```
{
  _id: ObjectId("50be30b64983e5100a000009"),
  user_id: 0
  occupied: {
    Greece: [
      {
        user_id: 3,
        deadline: ISODate("2013-02-08T19:19:28Z"),
        fulfilled: false
      },
      {
        user_id: 4,
        deadline: ISODate("2013-02-16T19:19:28Z"),
        fulfilled: false
      }
    ],
    Italy: [
      {
        user_id: 2,
        deadline: ISODate("2013-02-15T19:19:28Z"),
        fulfilled: false
      }
    ]
  }
} 
```

数组中的每个国家/地区`occupied`都有自己的一组数组。

我想要做的是找到`user_id`为 0 的文档，仅在数组中搜索具有并将其各个“已完成”字段更改为 true`occupied.Greece`的元素。`"deadline": {$gt: ISODate(current-date)}`

我尝试了`$`and`$elemMatch`运算符，但它们只匹配查询中的第一个数组元素，而我需要它根据给定条件匹配**所有**符合条件的元素并进行更新，而无需多次运行相同的查询或处理数组客户端。

是否没有针对单个文档中的通用更新的服务器端解决方案？我正在使用 PHP 进行开发，尽管对此的解决方案应该是通用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:16:43.817

恐怕这是不可能的。从[文档中](http://docs.mongodb.org/manual/reference/operator/positional/#_S_)：

> 请记住，位置`$`运算符充当更新**查询选择器的****第一个匹配**项的占位符。[强调不是我的]

 **这在[SERVER-1243](https://jira.mongodb.org/browse/SERVER-1243)下的 MongoDB Jira 中进行了跟踪。

jira 中有很多相关的功能请求，主要是在“[虚拟集合](https://jira.mongodb.org/browse/SERVER-142)”主题下。**

# ruby-on-rails - 从字符串中删除 1 个反斜杠（Ruby）

> ID：14712414
> 
> 赞同：0
> 
> 时间：2013-02-05T16:39:02.037
> 
> 标签：ruby-on-rails, ruby, backslash

我通过解析其他站点获得了 html 文本。我有这个代码：

```
"<div class=\"asset-body\"><div class=\"user-icon\"><img src=\"http://l-userpic.livejournal.com/119811849/13265658\" alt=\"\" height=\"100\" width=\"100\"><br></div><a name=\"cutid1\"></a><br><br>Травка очень помогает при больных почках.<br>У вас болят почки?<br>-нет<br>-Жаль. Очень жаль.<br><br>***<br><br>профессия вождя - это точное соотнесение обещания и выполнения.<br><br>***<br><br>Есть порой у нас забота Отводить навет и ложь. Если стоишь ты чего-то, Без врагов не проживешь. Различать врагов не сложно; Так на свете повелось: Чем враги твои ничтожней, Тем безудержней их злость.<br><br>***<br><br>Чтобы не случилось—ничего не принимайте близко к сердцу. Немногое на свете долго бывает важным<br><br>***<br>\"Great minds discuss ideas. Average minds discuss events. Small minds discuss people.\" - Elenanor Roosevelt <br>\"Великие умы обсуждают идеи. Средние умы обсуждают события. Низшие умы обсуждают людей.\" - Элеонор Рузвельт<br>***<br><br><br><br><a name=\"cutid1-end\"></a></div>" 
```

我想使用这段代码，但是这些“\”符号到处都是。
我尝试了不同类型的 gsubing, &q{ code } 但没有帮助。

我该怎么做？谢谢

**回答：** 我已经了解如何解决这个问题。做就是了：

```
"<div class=\"user-icon\">".gsub("\"","'") => "<div class='user-icon'>" 
```

希望它会帮助任何人:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:53:33.387

反斜杠实际上并不存在。它正在转义双引号，因为没有其他方法可以将它们与围绕整个字符串文字的那些区分开来。您不必删除它们；实际上你不能，因为他们不在那里。

# visual-studio - Visual Studios sln 文件解决方案属性或性能？

> ID：14712421
> 
> 赞同：4
> 
> 时间：2013-02-05T16:39:27.143
> 
> 标签：visual-studio

我正在使用 Mercurial 作为我们的版本控制的团队项目。最近，我注意到在将最新更改合并到我的分支后，.sln 文件中出现了以下更改。

```
GlobalSection(SolutionProperties) = preSolution
    HideSolutionNode = FALSE
EndGlobalSection 
```

更改为：

```
GlobalSection(Performance) = preSolution
    HasPerformanceSessions = true
EndGlobalSection 
```

没有明显的差异，一切似乎都可以构建，但我不确定这种更改是否会导致任何潜在问题。我们也很困惑为什么会发生这种变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:37:36.770

我相信 HideSolutionNode 默认为 true，直到您向解决方案添加第二个项目（至少在 vs2010 和可能 2012 中）。 HasPerformanceSessions 可能是由于有人试图在代码上运行分析器。这些都不应该影响您的解决方案的编译。

# mongodb - Grails+mongoDB：无法序列化地图

> ID：14712428
> 
> 赞同：0
> 
> 时间：2013-02-05T16:39:42.833
> 
> 标签：mongodb, grails, grails-orm

我在我的应用程序中使用了一个名为 PublishedState 的枚举。在我开始重构以支持 i18n 之前，我可以正常保存它。

以下是 Theme 域类的相关部分：

```
class Theme {

     Map<String, String> name  //language locale to name

     Map<String,PublishedState> state   //country locale to state

...
} 
```

现在以下代码不起作用：

```
Theme theme = new Theme(
name: [en: 'english name'],
state: [en: PublishedState.DRAFT]
)
assert theme.validate()
theme.save() 
```

我收到以下错误：

```
java.lang.IllegalArgumentException: can't serialize class com.example.myapp.PublishedState
at org.bson.BasicBSONEncoder._putObjectField(BasicBSONEncoder.java:234)
at org.bson.BasicBSONEncoder.putMap(BasicBSONEncoder.java:274)
at org.bson.BasicBSONEncoder._putObjectField(BasicBSONEncoder.java:196)
at org.bson.BasicBSONEncoder.putObject(BasicBSONEncoder.java:140)
at org.bson.BasicBSONEncoder.putObject(BasicBSONEncoder.java:86)
at com.mongodb.DefaultDBEncoder.writeObject(DefaultDBEncoder.java:27)
at com.mongodb.OutMessage.putObject(OutMessage.java:142)
at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:252)
at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:211)
at com.mongodb.DBCollection.insert(DBCollection.java:57)
at org.grails.datastore.mapping.mongo.MongoSession$1.doInDB(MongoSession.java:153)
at org.springframework.data.mongodb.core.MongoTemplate.execute(MongoTemplate.java:352)
at org.grails.datastore.mapping.mongo.MongoSession.flushPendingInserts(MongoSession.java:129)
at org.grails.datastore.mapping.core.AbstractSession.flush(AbstractSession.java:238)
at org.grails.datastore.mapping.mongo.MongoSession.flush(MongoSession.java:113)
at org.grails.datastore.gorm.support.DatastorePersistenceContextInterceptor.flush(DatastorePersistenceContextInterceptor.java:90)
at Console$_run_closure3_closure6_closure8.doCall(Console.groovy:74)
at Console$_run_closure3_closure6.doCall(Console.groovy:73)
at Console$_run_closure3_closure6.doCall(Console.groovy) 
```

我找不到任何关于它的信息，只有关于保存列表和枚举集合的旧错误，这些应该已经解决了

我正在使用 Grails 版本：2.2.0，和 mongo 插件：mongodb:1.0.0.GA

有任何想法吗？

太感谢了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-10T14:56:21.640

BasicBSONEncoder._putObjectField 不支持枚举。一个快速的解决方法是执行 ourEnum.toString() 甚至更好的 yourEnum.name() （因为 .name() 给出了字符串中枚举的确切名称并且不能被覆盖）。

希望能帮助到你。

# html - 即使使用不同的文本，也保持链接框大小相同

> ID：14712430
> 
> 赞同：0
> 
> 时间：2013-02-05T16:39:46.570
> 
> 标签：html

在制作菜单时，我的 ancor 链接上有悬停效果。我填充这些以更改它们的大小，因为高度/宽度不起作用。现在的问题是由于填充框的宽度不同，因为它们中的文本长度不同。如何使我的 ancor 链接大小相同？

# amazon-web-services - 每周复制或复制 Amazon RDS MYSQL

> ID：14712432
> 
> 赞同：0
> 
> 时间：2013-02-05T16:39:55.433
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

保持 Amazon RDS UAT 数据库每周从该数据库的生产版本更新的最佳实践是什么？我们正在考虑镜像生产 RDS，但我们不希望 UAT 中的任何更改反映在生产中。因此，考虑每周备份生产并将其恢复到 UAT，但这很耗时。如果 UAT 最初是从生产中恢复某个时间点，我们能否将生产快照应用到 UAT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:25:43.920

RDS 提供了两种数据库备份/恢复机制。您可以利用自动备份来允许时间点数据库恢复/创建。或者，您可以利用数据库快照制作可用于创建新 RDS 实例的手动或自动快照。

以下是来自 AWS RDS 常见问题的更多信息：http: [//aws.amazon.com/rds/faqs/#23](http://aws.amazon.com/rds/faqs/#23)

# asp.net-mvc - ASP.NET MVC 4 模型封装渲染视图错误

> ID：14712433
> 
> 赞同：2
> 
> 时间：2013-02-05T16:39:56.130
> 
> 标签：asp.net-mvc, vb.net, razor, entity-framework-4

我需要将多个模型传递给一个视图，并且我希望视图是强类型的（因此，如果我可以帮助它，我想在不使用将每个模型传递给 ViewBag 的情况下这样做）。

```
Public Class TestModels
    Public Class TestDetail

        Public firstModel As firstModelHere ' An entity
        Public secondModel As secondModelHere ' An entity

        Sub New()
            firstModel = Nothing
            secondModel = Nothing
        End Sub

    End Class
End Class 
```

我在模型目录中拥有自己的独立文件。我将封装模型传递给我的视图，如下所示：

```
@ModelType Website.TestModels.TestDetail
@Html.LabelFor(Function(model) model.firstModel.userName)
@Html.LabelFor(Function(model) model.secondModel.lastName) 
```

我在控制器中设置了 firstModel 和 secondModel 并将模型传递给查看。当我去编译我的项目时，我得到了几十个错误（见下文），我该如何解决这个问题？我只是希望能够从我的视图中访问封装在另一个类中的多个模型。提前致谢。

```
Error   134 'ViewBag' is not declared. It may be inaccessible due to its protection level.
Error   129 'Context' is not declared. It may be inaccessible due to its protection level.
Error   138 'Layout' is not declared. It may be inaccessible due to its protection level.
Error   131 sub 'Execute' cannot be declared 'Overrides' because it does not override a sub in a base class.
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:47:17.880

如果我遗漏了编码技巧或模式，请原谅我，但为什么在“TestModels”类内有“TestDetail”类？

如果您只是想将多个模型传递给一个视图，我会制作单个视图模型，并为您想要传递给视图的每个实体提供一个属性。

**View Model** - 用于封装您要在视图中访问的模型

```
Public Class TestModel   
    Public Property FirstModel As FirstEntity ' An entity
    Public Property SecondModel As SecondEntity ' An entity
End Class 
```

**控制器动作**

```
Function Index() As ActionResult
    ' Create models to pass to the view.
    Dim a As New FirstModel
    Dim b As New SecondModel

    ' Create model to pass the models in.
    Dim model As New TestModel
    With model
        .firstModel = a
        .secondModel = b
    End With

    Return View(model)
End Function 
```

# python - Pandas 向量化字符串方法，命名为 capture

> ID：14712434
> 
> 赞同：1
> 
> 时间：2013-02-05T16:39:58.383
> 
> 标签：python, regex, pandas

如果我格式错误或以其他方式破坏了我的问题，请提前道歉......

我是 pandas（和 python）的新手，并且一直在慢慢地尝试将学到的东西应用到我自己的数据集上。

我有一个稀疏的授权数据数据框，其中许多单元格为空（或等效），其中许多应该能够通过规范化来消除。此外，每个项目编号都包含可用于验证其他单独提供的字段（年份、授予人、研究活动等）的信息。

项目编号如下所示：

```
0             None,
1             None,
2     3C06RR018774,
3     3C06RR018774,
4     1C06RR018796,
5     1C06RR018796,
6     3C06RR018863,
7     3C06RR018863,
8     1C06RR020099,
9     1C06RR020099,
10    1C06RR020117, 
```

我编写的正则表达式看起来像：

```
reobj = re.compile(r"""
(?P<type>[0-9]+)
(?P<act>[A-Z]+[0-9]+)
(?P<ic>[A-Z]{2})
(?P<serial>[0-9]{1,6})""",
flags=re.X) 
```

我很确定这是可行的，因为：

```
m = core.str.match(reobj) 
```

给出：

```
0                     None
1                     None
2     (3, C06, RR, 018774)
3     (3, C06, RR, 018774)
4     (1, C06, RR, 018796)
5     (1, C06, RR, 018796)
6     (3, C06, RR, 018863)
7     (3, C06, RR, 018863)
8     (1, C06, RR, 020099)
9     (1, C06, RR, 020099)
10    (1, C06, RR, 020117) 
```

但是我无法取出组 m.groups()：

```
AttributeError: 'Series' object has no attribute 'groups' 
```

我似乎也无法挖掘出解析的位，m.str.get(1)：我也得到与 m.str[0] 相同的错误

```
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-44-2a7675586aff> in <module>()
----> 1 m.str.get(1)

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/strings.pyc in get(self, i)
    668     @copy(str_get)
    669     def get(self, i):
--> 670         result = str_get(self.series, i)
    671         return self._wrap_result(result)
    672 

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/strings.pyc in str_get(arr, i)
    551     """
    552     f = lambda x: x[i]
--> 553     return _na_map(f, arr)
    554 
    555 

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/strings.pyc in _na_map(f, arr, na_result)
     87 def _na_map(f, arr, na_result=np.nan):
     88     # should really _check_ for NA
---> 89     return _map(f, arr, na_mask=True, na_value=na_result)
     90 
     91 

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/strings.pyc in _map(f, arr, na_mask, na_value)
     96         mask = isnull(arr)
     97         try:
---> 98             result = lib.map_infer_mask(arr, f, mask.view(np.uint8))
     99         except (TypeError, AttributeError):
    100             def g(x):

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/lib.so in pandas.lib.map_infer_mask (pandas/lib.c:39584)()

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pandas/core/strings.pyc in <lambda>(x)
    550     items : array
    551     """
--> 552     f = lambda x: x[i]
    553     return _na_map(f, arr)
    554 

IndexError: list index out of range 
```

但是， m.str[:1] 确实挖掘出来：

```
0     None
1     None
2      (3)
3      (3)
4      (1)
5      (1)
6      (3)
7      (3)
8      (1)
9      (1)
10     (1) 
```

我认为我的主要误解是编译匹配对象在系列中的迭代，但归根结底，我希望能够将每个组与同一行中的另一个字段进行比较，以在内部验证数据集：

```
m.group('ic') == data['IC'] 
```

虽然理想情况下能够跨行以类似数组的方式一次比较所有捕获的组......

任何指导，甚至只是朝着正确方向健康的推动，将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:04:36.020

`str.match`正在返回一个元组，而不是`match`对象：

```
>>> c.str.match(reobj)
0                      []
1                      []
2    (3, C06, RR, 018774)
3    (3, C06, RR, 018774)
Name: 1
>>> type(c.str.match(reobj)[2])
<type 'tuple'> 
```

不过，我们可以得到它们：

```
>>> m = c.map(reobj.match)
>>> m
0                                    None
1                                    None
2    <_sre.SRE_Match object at 0xa1f4c28>
3    <_sre.SRE_Match object at 0xa05aee8>
Name: 1 
```

有了它们，虽然有点难看，但我们可以得到一个`Series`比较`data["IC"]`：

```
>>> m.map(lambda x: x.group("ic") if x else None)
0    None
1    None
2      RR
3      RR
Name: 1 
```

请注意，这些组也存储在`groupindex`：

```
>>> reobj.groupindex
{'ic': 3, 'type': 1, 'serial': 4, 'act': 2} 
```

所以你可以以编程方式循环它们。无论如何，HTH。

# powershell - 将文件列表复制到目录

> ID：14712435
> 
> 赞同：17
> 
> 时间：2013-02-05T16:39:58.857
> 
> 标签：powershell, powershell-2.0

有一个文件夹，里面有很多文件。只有一些文件需要复制到不同的文件夹。有一个列表，其中包含需要复制的文件。

我尝试使用复制项，但由于目标子文件夹不存在，抛出异常“找不到路径的一部分”</p>

有没有简单的方法来解决这个问题？

```
$targetFolderName = "C:\temp\source"
$sourceFolderName = "C:\temp\target"

$imagesList = (
"C:\temp\source/en/headers/test1.png",
"C:\temp\source/fr/headers/test2png"
 )

foreach ($itemToCopy in $imagesList)
{
    $targetPathAndFile =  $itemToCopy.Replace( $sourceFolderName , $targetFolderName ) 
    Copy-Item -Path $itemToCopy -Destination   $targetPathAndFile 
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T17:31:20.233

试试这个作为你的 foreach 循环。它在复制文件之前创建目标文件夹和必要的子文件夹。

```
foreach ($itemToCopy in $imagesList)
{
    $targetPathAndFile =  $itemToCopy.Replace( $sourceFolderName , $targetFolderName )
    $targetfolder = Split-Path $targetPathAndFile -Parent

    #If destination folder doesn't exist
    if (!(Test-Path $targetfolder -PathType Container)) {
        #Create destination folder
        New-Item -Path $targetfolder -ItemType Directory -Force
    }

    Copy-Item -Path $itemToCopy -Destination   $targetPathAndFile 
} 
```

# javascript - submit() 事件未在表单上触发

> ID：14712438
> 
> 赞同：2
> 
> 时间：2013-02-05T16:40:05.530
> 
> 标签：javascript, jquery

我试图在提交表单后禁用表单的提交按钮，以防止重复发布。虽然我可以禁用该按钮，但我也无法让表单实际提交。

这是jQuery：

```
// Disable submit button after click to prevent double posting
$(document).ready(function () {
    $('#add_pin :submit').on('click', function (e) {

        $(this).prop('disabled', true);    

    });
}); 
```

这将成功禁用该按钮，仅此而已。

我试过`$(this).submit()`在 .prop() 之后添加，但它仍然没有做任何事情。

HTML 只是：

```
<form action="http://example.com/add" method="post" accept-charset="utf-8" id="add_pin" enctype="multipart/form-data">
// input fields
<input type="submit" name="submit" value="Add Pin" class="radius button">
</form> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:46:51.907

最好使用表单的`onsubmit`事件而不是提交按钮的`click`事件，因为`onsubmit`它将处理来自输入键的提交以及被单击的提交按钮。

```
$(document).ready(function () {

    $('#add_pin').submit(function(){
        $(this).find('input[type=submit]').prop('disabled', true);
    });

}); 
```

# ios - 为什么我的 CvVideoCamera 会覆盖整个视图？

> ID：14712444
> 
> 赞同：3
> 
> 时间：2013-02-05T16:40:22.047
> 
> 标签：ios, opencv, storyboard

因此，我正在使用 CvVideo 相机：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.videoCamera = [[CvVideoCamera alloc] initWithParentView:imageView];
    self.videoCamera.delegate = self;
    self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionBack;
    self.videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPresetiFrame960x540;
    self.videoCamera.defaultAVCaptureVideoOrientation = AVCaptureVideoOrientationPortrait;
    self.videoCamera.defaultFPS = 30;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self.videoCamera start];
} 
```

我的故事板如下所示：

![在此处输入图像描述](../Images/baab8b8530bc77bd1a77de38f5e2de67.png)

当视图加载时，该栏短暂可见，而视图的其余部分为白色。然后当相机启动时，它会填满整个屏幕。为什么要这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-03T11:08:49.183

您是否尝试过使用不同的父视图？

```
UIView *camView = [[UIView alloc] initWithFrame:CGRectMake(10, 10, 300, 400)];
[self.view addSubview:camView];
self.videoCamera = [[CvVideoCamera alloc] initWithParentView:camView]; 
```

# entity-framework - EF Code First 数据库迁移 - 如何从迁移中排除列？

> ID：14712449
> 
> 赞同：0
> 
> 时间：2013-02-05T16:40:38.973
> 
> 标签：entity-framework, ef-code-first, database-migration

我有一个类，我使用数据库迁移来更新相应的表。但是，我想将一个字段放入不应迁移到数据库的类中。

有没有我可以用来执行此操作的属性？

就像是

```
[IgnoreColumn]
public bool Selected { get; set; } 
```

仅忽略数据库更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:44:50.727

是的，您可以忽略属性：

```
 modelBuilder.Entity<YourEntity>().Ignore(p=>p.foobar); 
```

# c++ - C++ 堆错误_CrtlsValidHeapPointer(pUserData)

> ID：14712450
> 
> 赞同：1
> 
> 时间：2013-02-05T16:40:39.387
> 
> 标签：c++, diamond-problem

使用 MSVC 编译后，我的程序在运行时触发断言失败：**_CrtlsValidHeapPointer(pUserData)**，但代码对我来说看起来不错...

```
class A
{
    int a;
public:
    A();
    A(int);
    virtual ~A();
    void setA(int);
    int getA();
    virtual void function()=0;
};

class B : virtual public A
{
    int b;
public:
    B();
    B(int,int);
    void setB(int);
    int getB();
    void function();
};

class C : virtual public A
{
    int c;
public:
    C();
    C(int,int);
    void setC(int);
    int getC();
    void function();
};

class D :public B,public C
{
    int d;
public:
    D();
    D(int,int,int,int);
    void setD(int);
    int getD();
    void function();
}; 
```

* * *

```
int _tmain(int argc, _TCHAR* argv[])
{
    A **p = new A*[4];
    int i;
    for(i=0;i<4;i++)
    {
        p[i]=new D(4,3,12,1);
    }
    for(i=0;i<4;i++)
    {
        p[i]->function();
    }
    for(i=0;i<4;i++)
    {
        delete p[i]; //the assertion fails when attempting to delete p[1]
    }
    delete[] p;
    system("pause");
    return 0;
} 
```

* * *

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:49:10.473

你需要一个虚拟析构函数`A`。它不必在这里做任何事情，但它必须声明为`virtual`.

通常，如果通过指向基类型的指针删除派生类型的对象，则基类型**必须**具有虚拟析构函数。

# asp.net - 过程或函数“xyz”指定的参数过多

> ID：14712451
> 
> 赞同：5
> 
> 时间：2013-02-05T16:40:46.807
> 
> 标签：asp.net, stored-procedures, formview

我知道这种类型的问题在 SO 上至少被问了十几次，但我已经浏览了我可以在这里找到的所有以前的问题和答案，但我发现没有一个适用。我在我的页面上使用了几个 FormView 对象，现在想要添加编辑其中一个的选项。FormView 由链接到存储过程的 SqlDataSource 填充，因此我创建了一个存储过程来更新记录并将其添加到 SqlDataSource，现在看起来像这样：

```
<asp:SqlDataSource ID="TestSqlDataSource" runat="server" 
                   SelectCommandType="StoredProcedure" 
                   ConnectionString="<%$ ConnectionStrings:development %>" 
                   SelectCommand="usp_GetNewTestDetails" 
                   UpdateCommand="usp_UpdateTest" 
                   UpdateCommandType="StoredProcedure" 
                   onupdating="TestSqlDataSource_Updating">
    <SelectParameters>
        <asp:SessionParameter SessionField="TestID" Name="TestID"/>
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="testId" Type="Int32"/>
        <asp:Parameter Name="testerLicense" Type="Int32" />
        <asp:Parameter Name="premiseOwner" Type="String" />
        <asp:Parameter Name="premiseAddress" Type="String" />
        <asp:Parameter Name="premiseCity" Type="String" />
        <asp:Parameter Name="premiseState" Type="String" />
        <asp:Parameter Name="premiseZip" Type="String" />
        <asp:Parameter Name="protectionType" Type="String" />
        <asp:Parameter Name="testType" Type="String" />
        <asp:Parameter Name="repairs" Type="String" />
        <asp:Parameter Name="notes" Type="String" />
        <asp:Parameter Name="testDate" Type="DateTime" />
        <asp:Parameter Name="employerName" Type="String" />
        <asp:Parameter Name="employerAddress" Type="String" />
        <asp:Parameter Name="phoneNumber" Type="String" />
        <asp:Parameter Name="emailAddress" Type="String" />
        <asp:Parameter Name="dataEntryName" Type="String" />
        <asp:Parameter Name="dataEntryPhone" Type="String" />
        <asp:Parameter Name="signature" Type="String" />
        <asp:Parameter Name="entryDate" Type="DateTime" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

当我尝试更新记录时，我收到一条错误消息，提示我的查询中的参数太多。我已经三重检查了我的代码中的参数是否与我的存储过程中的参数完全匹配（名称、编号甚至顺序）。

在试图寻找答案时，我偶然发现了[这篇文章](https://stackoverflow.com/a/5757120/933524)，它引用[了这个网站](http://web.archive.org/web/20120606031904/http://www.whitworth.org/2006/01/16/how-to-troubleshoot-procedure-or-function-has-too-many-arguments-specified-in-aspnet-20/)（不得不去archive.org，因为原来的似乎已经关闭了）。我应用了他们建议的向`trace`函数添加参数的方法。我发现在我的存储过程中，选择过程中有一些“查找”值不在更新过程中。我要更新的表只有测试人员的 ID，但用户也想看到他们的名字，所以它引用了那个表，但是在 FormView 中，这些字段在编辑模式下是只读的，所以他们可以不要试图改变它。所有其他参数都排成一行……只有那些查找值是关闭的。

我认为通过包含要传递的特定参数列表，它只会使用这些参数，但这似乎是不正确的。现在我很困惑，因为我已经指定了参数，而且我看不到它们被选择存储过程中的参数覆盖的任何地方。我在哪里告诉它不要使用那些只读值？

我不想将它们从原始存储过程中删除，因为用户将需要它们。到目前为止，我想出的一种解决方法是将它们添加到存储过程中，然后永远不要使用它们。尽管我相当肯定这会起作用，但它只是掩盖问题而不是解决问题。

* * *

**编辑：**附加代码，每个请求

这是将参数输出到`trace`函数的方法：

```
protected void TestSqlDataSource_Updating(object sender, SqlDataSourceCommandEventArgs e)
{
    for (int i = 0; i < e.Command.Parameters.Count; i++)
    {
        Trace.Write(e.Command.Parameters[i].ParameterName);
        if (e.Command.Parameters[i].Value != null)
        {
            Trace.Write(e.Command.Parameters[i].Value.ToString());
        }
    }
} 
```

* * *

这是用于更新的存储过程：

```
ALTER PROCEDURE [dbo].[usp_UpdateTest]
    @testId INT ,
    @testerLicense INT ,
    @premiseOwner VARCHAR(50) ,
    @premiseAddress VARCHAR(150) ,
    @premiseCity VARCHAR(50) ,
    @premiseState VARCHAR(2) ,
    @premiseZip VARCHAR(10) ,
    @protectionType VARCHAR(11) ,
    @testType VARCHAR(2) ,
    @repairs VARCHAR(200) ,
    @notes VARCHAR(300) ,
    @testDate DATETIME ,
    @employerName VARCHAR(50) ,
    @employerAddress VARCHAR(150) ,
    @phoneNumber VARCHAR(25) ,
    @emailAddress VARCHAR(60) ,
    @dataEntryName VARCHAR(50) ,
    @dataEntryPhone VARCHAR(25) ,
    @signature VARCHAR(50) ,
    @entryDate DATETIME
AS 
    BEGIN
        SET NOCOUNT ON;

        UPDATE  dbo.Tests
        SET     TesterLicense = @testerLicense ,
                PremiseOwner = @premiseOwner ,
                PremiseAddress = @premiseAddress ,
                PremiseCity = @premiseCity ,
                PremiseState = @premiseState ,
                PremiseZip = @premiseZip ,
                ProtectionType = @protectionType ,
                TestType = @testType ,
                Repairs = @repairs ,
                Notes = @notes ,
                TestDate = @testDate ,
                EmployerName = @employerName ,
                EmployerAddress = @employerAddress ,
                PhoneNumber = @phoneNumber ,
                EmailAddress = @emailAddress ,
                DataEntryName = @dataEntryName ,
                DataEntryPhone = @dataEntryPhone ,
                Signature = @signature ,
                EntryDate = @entryDate 
        WHERE TestID = @testId
    END 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T21:04:17.357

最终我自己解决了这个问题。这与 Visual Studio 根据存储过程的架构为我创建模板这一事实有关。当模板自动生成时，该`<EditItemTemplate>`部分中的每个文本框都会像这样生成：

```
<asp:TextBox ID="TestIDTextBox" runat="server" Text='<%# Bind("TestID") %>'/> 
```

事实证明，这是`Bind`造成这种情况的声明。VS 自动为使用`Bind`. 虽然我被引导相信该`<UpdateParameters>`部分应该覆盖这一点，但它实际上是相反的。`Bind`我能够通过将这些字段上的代码从更改为来防止这几个只读字段传回它们的参数`Eval`：

```
<asp:TextBox ID="TestIDTextBox" runat="server" Text='<%# Eval("TestID") %>'/> 
```

现在完美运行。

* * *

**附录：**

发现这也会在另一个方向上导致同样的问题。如果您将不想编辑的字段标记为`Eval`但需要包含在更新中（例如行 ID），则它将不起作用，这一次是因为参数太少。我现在想知道该`<UpdateParameters>`部分的目的是什么，因为它似乎没有遵循任何内容......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-15T19:53:31.490

您可以在例如 OnDeleting 事件 (e.Command.Parameters.RemoveAt(i)) 期间删除不需要的参数。

# java - 事务回滚后 Spring 不会关闭休眠会话

> ID：14712453
> 
> 赞同：1
> 
> 时间：2013-02-05T16:40:47.740
> 
> 标签：java, spring, hibernate

我试图在我的服务层中捕获一个 ConstraintViolationException 并重新抛出一个用户定义的检查异常。我在控制器中捕获异常并将错误对象添加到我的 BindingResult。我正在使用声明性事务管理我试图让我的 DAO 成为一个存储库并添加了一个 PersistenceExceptionTranslationPostProcessor 来捕获一个弹簧翻译的异常。我还添加了一个 txAdvice 来回滚所有 throwable。我的异常确实被捕获，但我收到错误 500：

```
Hibernate: insert into user (email, password, first_name, last_name, userType) values (?, ?, ?, ?, 1)
[acme]: [WARN ] - 2013-Feb-05 11:12:43 -  SqlExceptionHelper:logExceptions(): SQL Error: 1062, SQLState: 23000
[acme]: [ERROR] - 2013-Feb-05 11:12:43 -  SqlExceptionHelper:logExceptions(): Duplicate entry 'admin' for key 'email_unique'
[acme]: [DEBUG] - 2013-Feb-05 11:12:43 -  HibernateTransactionManager:processCommit(): Initiating transaction commit
[acme]: [DEBUG] - 2013-Feb-05 11:12:43 -  HibernateTransactionManager:doCommit(): Committing Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]
[acme]: [ERROR] - 2013-Feb-05 11:12:43 -  AssertionFailure:<init>(): HHH000099: an assertion failure occured (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in com.test.model.AdminUser entry (don't flush the Session after an exception occurs)
[acme]: [DEBUG] - 2013-Feb-05 11:12:43 -  HibernateTransactionManager:doRollbackOnCommitException(): Initiating transaction rollback after commit exception
org.hibernate.AssertionFailure: null id in com.test.model.AdminUser entry (don't flush the Session after an exception occurs)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:79)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:194)
    at org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:156)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:225)
    at org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1213)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:402)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:468)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754) 
```

我的控制器：

```
@RequestMapping (method = RequestMethod.POST) 
    @Transactional
    public String registerAdmin(@Valid @ModelAttribute("user") AdminUser user, BindingResult bindingResult, ModelMap model)  {
        if (bindingResult.hasErrors()) {
            return "admin/admins/form";
        } 
        else if (!user.getPassword().equals(user.getConfirmPassword())) {
            bindingResult.addError(new ObjectError("user.confirmPassword", "Passwords don't match"));
            return "admin/admins/form";
        }
        else {
            user.setPassword(passwordEncoder.encodePassword(user.getPassword(), null));
            try {
                userService.save(user);
                return "redirect:/admin/admins";
            } catch(ApplicationException ce) {
                bindingResult.addError(new ObjectError("user.email", "Email already registered"));
                return "admin/admins/form";
            }

        }

    } 
```

我的 Spring 配置的一部分：

```
 <context:component-scan base-package="com.test.dao, com.test.service" />
     <context:property-placeholder location="/WEB-INF/spring.properties"/>  

    <import resource="springapp-security.xml"/>

    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

    <bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/testdb?zeroDateTimeBehavior=convertToNull"/>
    <property name="username" value="test"/>
    <property name="password" value="test"/>
  </bean>

  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="myDataSource"/>
    <property name="mappingLocations" value="classpath*:com/test/model/hbm/**/*.hbm.xml" />

    <property name="hibernateProperties">
      <value>
        hibernate.dialect=org.hibernate.dialect.MySQL5Dialect
        hibernate.show_sql=true
      </value>
    </property>
  </bean>

 <tx:annotation-driven />
  <bean id="transactionManager"
            class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>
  <tx:advice id="txAdvice">
  <tx:attributes>
  <tx:method name="*" rollback-for="Throwable" />
  </tx:attributes>
</tx:advice> 
```

服务层：

```
public class UserServiceImpl implements UserDetailsService, UserService {

    private UserDAO dao;

    @Override
    public void save(User c) throws ApplicationException {
        try {
            dao.save(c);
        } catch(DataIntegrityViolationException cve) {
            throw new ApplicationException("email already registered");
        }
    } 
```

如果我没有捕捉到运行时异常，我不会得到休眠异常（不要刷新会话..）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:16:01.590

您可能希望从控制器中删除事务注释并将其添加到服务层。

服务层如下所示。如果您的服务层抛出已检查的异常，您可以将其添加到您的注释中，这样甚至不会尝试提交插入。

```
public class UserServiceImpl implements UserDetailsService, UserService {

private UserDAO dao;

@Override
@Transactional(rollbackFor=ApplicationException.class)
public void save(User c) throws ApplicationException {
    try {
        dao.save(c);
    } catch(DataIntegrityViolationException cve) {
        throw new ApplicationException("email already registered");
    }
} 
```

当前在您的代码中发生的情况是事务没有被回滚，而是必须回滚，因为它实际上试图提交数据，但由于数据库约束，事务必须回滚。通过使用 @Transactional(rollbackFor=ApplicationException.class) 强制回滚，它不会允许事务执行提交，但它会回滚，并且您的应用程序仍会将错误添加到 BindingResult。

# ruby-on-rails - 无法通过 Homebrew 启动弹性搜索服务器

> ID：14712461
> 
> 赞同：14
> 
> 时间：2013-02-05T16:41:10.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

所以我通过brew安装了elasticsearch：

```
$ brew install elasticsearch 
```

然后当我运行弹性搜索服务器时：

```
elasticsearch -f -D es.config=/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml 
```

我收到此错误：

```
{0.20.4}: Setup Failed ...
- FailedToResolveConfigException[Failed to resolve config path [/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml], tried file path [/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml], path file [/usr/local/Cellar/elasticsearch/0.20.4/config/usr/local/Cellar/elasticsearch/0.19.3/config/elasticsearch.yml], and classpath] 
```

我怎样才能解决这个问题？欢迎任何想法和建议。

**我这样做了，它对我有用：**

获取包裹：

```
$ curl -k -L -o elasticsearch-0.20.2.tar.gz http://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.20.2.tar.gz 
```

解压：

```
$ tar -zxvf elasticsearch-0.20.2.tar.gz 
```

运行弹性搜索服务器：

```
./elasticsearch-0.20.2/bin/elasticsearch -f 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T16:54:44.410

尝试

```
elasticsearch -f -Des.path.conf=/usr/local/Cellar/elasticsearch/0.19.3/config/ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-26T00:29:25.910

这很奇怪，我的安装要求我运行弹性搜索略有不同。我让它运行：

**安装**

```
$ brew update
$ brew install elasticsearch 
```

**运行弹性搜索**

```
$ elasticsearch --config=/usr/local/opt/elasticsearch/config/elasticsearch.yml 
```

正如@karmi 所说，`brew info elasticsearch`展示了如何在您的系统上运行弹性搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-20T10:16:07.017

2021 年的情况并没有改变。

`elasticsearch`Homebrew 停止分发, 和的较新版本`kibana`，尽管您仍然可以在`homebrew-core`.

这是因为 Homebrew 遵循 OSI 的开源许可证定义。弹性软件使用的新许可证与其不兼容，Homebrew 使用 rufuses 分发它们。

因此，**elastic 开始使用自己的自定义 tap 分发这些软件**。

```
# tap maintained by elastic organization
# https://github.com/elastic/homebrew-tap
brew tap elastic/tap

brew install elastic/tap/elasticsearch-full
# brew install elastic/tap/kibina-full
# brew install elastic/tap/logstash-full 
```

# javascript - AngularJS文件拖放指令

> ID：14712463
> 
> 赞同：21
> 
> 时间：2013-02-05T16:41:17.787
> 
> 标签：javascript, html, file-upload, angularjs, angularjs-directive

这个例子几乎完成了我想在 Angular-js 中移植的内容：[HTML5 File API](http://html5demos.com/file-api#view-source)。

我一直在尝试搜索一些指令示例，但是我发现了大量使用 DOM 或不是为 Angular 1.0.4 编写的旧示例。

基本上这是纯js代码：

```
var holder = document.getElementById('holder'),
    state = document.getElementById('status');

if (typeof window.FileReader === 'undefined') {
  state.className = 'fail';
} else {
  state.className = 'success';
  state.innerHTML = 'File API & FileReader available';
}

holder.ondragover = function () { this.className = 'hover'; return false; };
holder.ondragend = function () { this.className = ''; return false; };
holder.ondrop = function (e) {
  this.className = '';
  e.preventDefault();

  var file = e.dataTransfer.files[0],
      reader = new FileReader();
  reader.onload = function (event) {
    console.log(event.target);
    holder.style.background = 'url(' + event.target.result + ') no-repeat center';
  };
  console.log(file);
  reader.readAsDataURL(file);

  return false;
}; 
```

我能想到的唯一可能的方法是创建一个指令

```
edo.directive('fileDrag', function () {
  return {
    restrict: 'A',
    link: function (scope, elem) {
      elem.bind('ondrop', function(e){
        e.preventDefault();
        var file = e.dataTransfer.files[0], reader = new FileReader();
          reader.onload = function (event) {
          console.log(event.target);
          holder.style.background = 'url(' + event.target.result + ') no-repeat center';
        };
        console.log(file);
        reader.readAsDataURL(file);

        return false;
      });
    }
  };
}); 
```

但是（1）它不起作用，（2）在我修复它之前，我想知道是否存在某些东西或者我是否做得正确，

非常感谢任何提示或帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-24T12:47:17.847

要将评论合并为答案，请更改`ondrop`为`drop`、添加`e.stopPropagation()`、更改`holder`为`elem`。

```
edo.directive('fileDrag', function () {
  return {
    restrict: 'A',
    link: function (scope, elem) {
      elem.bind('drop', function(e){
        e.preventDefault();
        e..stopPropagation();
        var file = e.dataTransfer.files[0], reader = new FileReader();
          reader.onload = function (event) {
          console.log(event.target);
          elem.style.background = 'url(' + event.target.result + ') no-repeat center';
        };
        console.log(file);
        reader.readAsDataURL(file);

        return false;
      });
    }
  };
}); 
```

我正在做类似的事情，这是我的工作解决方案：

HTML

```
app.directive("dropzone", function() {
    return {
        restrict : "A",
        link: function (scope, elem) {
            elem.bind('drop', function(evt) {
                evt.stopPropagation();
                evt.preventDefault();

                var files = evt.dataTransfer.files;
                for (var i = 0, f; f = files[i]; i++) {
                    var reader = new FileReader();
                    reader.readAsArrayBuffer(f);

                    reader.onload = (function(theFile) {
                        return function(e) {
                            var newFile = { name : theFile.name,
                                type : theFile.type,
                                size : theFile.size,
                                lastModifiedDate : theFile.lastModifiedDate
                            }

                            scope.addfile(newFile);
                        };
                    })(f);
                }
            });
        }
    }
});
```

```
div[dropzone] {
    border: 2px dashed #bbb;
    border-radius: 5px;
    padding: 25px;
    text-align: center;
    font: 20pt bold;
    color: #bbb;
    margin-bottom: 20px;
}
```

```
<div dropzone>Drop Files Here</div>
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-14T14:20:22.367

防止默认事件，并从原始事件中获取文件。都可以在指令中实现。您应该传递函数，用于处理文件以属性 on-file-drop。拖动时还将“拖动”类添加到 dropzone 元素。在视图中它看起来像这样：

```
<div file-dropzone on-file-drop="myFunction">This is my dropzone </div> 
```

指示：

```
function fileDropzoneDirective() {
    return {
        restrict: 'A',
        link: fileDropzoneLink
    };
    function fileDropzoneLink($scope, element, attrs) {
        element.bind('dragover', processDragOverOrEnter);
        element.bind('dragenter', processDragOverOrEnter);
        element.bind('dragend', endDragOver);
        element.bind('dragleave', endDragOver);
        element.bind('drop', dropHandler);

        function dropHandler(angularEvent) {

            var event = angularEvent.originalEvent || angularEvent;
            var file = event.dataTransfer.files[0];
            event.preventDefault();
            $scope.$eval(attrs.onFileDrop)(file);

        }
        function processDragOverOrEnter(angularEvent) {
            var event = angularEvent.originalEvent || angularEvent;
            if (event) {
                event.preventDefault();
            }
            event.dataTransfer.effectAllowed = 'copy';
            element.addClass('dragging');
            return false;
        }

        function endDragOver() {
            element.removeClass('dragging');
        }
    }
} 
```

# c# - ToUpper() 有时会改变字符 (µ -> M)

> ID：14712464
> 
> 赞同：3
> 
> 时间：2013-02-05T16:41:22.240
> 
> 标签：c#, .net, character

> **可能重复：**
> [.net micro (µ) 希腊字母大写问题](https://stackoverflow.com/questions/9616984/net-micro-greek-letter-uppercase-issue)

我有一个将所有字符串转换为大写的函数。我只是使用`string.ToUpper()`方法。

嗯，它正在工作。但是对于某些角色来说，ToUpper() 正在做一些奇怪的事情。就像 for 一样`µ`，a`µ.ToUpper()`是一个`M`。为什么？我怎样才能避免这种情况？如果有大写字符，则只是大写字符:)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:44:04.957

在进行字符串转换时指定区域性或使用**[InvariantCulture 。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)**例如：

```
"µ".ToUpper(CultureInfo.InvariantCulture) 
```

或者

```
"µ".ToUpperInvariant() 
```

返回`µ`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T16:44:52.960

你可以使用方法[`String.ToUpperInvariant()`](http://msdn.microsoft.com/en-us/library/system.string.toupperinvariant.aspx)。

在这种方法中，使用了不变的区域性。

这个方法和调用完全一样`myString.ToUpper(CultureInfo.InvariantCulture);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:43:48.990

这很可能是*与文化相关的问题*，使用[String.ToUpper Method (CultureInfo)](http://msdn.microsoft.com/en-us/library/24kc78ka%28v=vs.100%29.aspx)，您可以在其中指定*不变*文化。

# css - prestashop 主题中的 Chrome 和 firefox 中的 CSS 绝对位置不同

> ID：14712471
> 
> 赞同：1
> 
> 时间：2013-02-05T16:41:41.987
> 
> 标签：css, css-position, prestashop

我正在修复一个 prestashop 主题，我正准备为一个非常小的问题撕毁我的头发。我有一个搜索绝对位于我的导航旁边，但顶部比 chrome 中的 firefox 低 10px，所以基本上，如果它在 firefox 中居中，它在 chrome 上挂得很低。下面是我的搜索框 css：

```
#search_block_top {
background: none repeat scroll 0 0 transparent;
height: 30px;
position: absolute;
right: 20px;
top: 215px;/*this is correct in firefox*/
z-index: 1005;
} 
```

您可以在此处查看该站点：http: [//goo.gl/sfFYT](http://goo.gl/sfFYT) reset 给出了我的样式表，我尝试手动将搜索块的字体大小和行高设置为零，但它没有奏效。我不知道该怎么办。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:47:47.550

抱歉，我没有查看我之前的答案，并给出了完全重复的答案。撤回。这是新的：

```
#menu {
    overflow: hidden;
}

#search_block_top {
    top: 205px; /* you can modify the original rule */
} 
```

主要思想：为#menu创建一个BFC`overflow: hidden;`

PS：该代码令人难以置信。:(

远离那个，并有一个美好的一天。

# sql - 如何使用 AND 和 OR 形成 SQL 查询？

> ID：14712473
> 
> 赞同：0
> 
> 时间：2013-02-05T16:41:44.857
> 
> 标签：sql, sql-server-2008, select

我想编写一个查询，返回 X 列中的所有非空单元格，其值不是 2、5 或 8。我这样做对吗？因为我的结果肯定看起来不对。

```
SELECT *
FROM [Example].[dbo].[table]
WHERE X <> '' AND (X <> '2' OR X <> '5' OR X <> '8'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:44:04.167

空，你的意思是`NULL`（*什么都没有*）并且`empty string` **不等于**所以`null`你应该使用特殊条件来过滤掉非`NULL`值使用`IS NOT NULL`

```
WHERE X IS NOT NULL AND 
      X NOT IN('', '2', '5', '8'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:43:46.520

```
SELECT *
FROM [Example].[dbo].[table]
WHERE X <> '' AND  X IS NOT NULL AND X NOT IN ('2','5','8') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T16:43:55.370

就个人而言，我会这样写：

```
SELECT *
FROM [Example].[dbo].[table]
WHERE ISNULL(X,'') <> ''
AND X not in ('2','5','8'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T16:44:36.047

您没有在此查询中考虑 NULLS。

```
X IS NOT NULL 
```

我会拿出你的“或”，然后按照你想要的所有这些标准而不是一个或另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T17:45:36.833

似乎所有其他答案都集中在`NULL`明确过滤，但我想我会指出这`NULL`是一种特殊情况，`NULL NOT IN`任何事情都不是真的。这会将您的查询简化为；

```
SELECT * FROM myTable WHERE X NOT IN ('', '2','5','8') 
```

这将选择 X 不是`NULL`'2'、'5'、'8' 或空字符串的所有行。

如果你想`NULL` *被包含*，你必须做一些奇怪的构造；

```
SELECT * FROM myTable WHERE X IS NULL OR X NOT IN ('', '2', '5', '8'); 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!6/8995c/1)。

# git - 将我的 Github 用户名更改为 SnakeCase 会破坏什么吗？

> ID：14712475
> 
> 赞同：7
> 
> 时间：2013-02-05T16:41:45.150
> 
> 标签：git, github, rename, case-sensitive, account

所以我阅读[了如何安全地更改 github 帐户名？](https://stackoverflow.com/questions/10889436/how-to-safely-change-github-account-name)

但是，如果我只是将我的用户名从更改`stevemoser`为`SteveMoser`那不应该破坏我的任何回购，对吗？还是 Git 区分大小写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:23:58.450

刚刚对其进行了测试，它会破坏克隆 url ( `git://`, `ssh`) *（至少在 windows* .

虽然，Web Url 仍然可以使用，因为它们不区分大小写。

# c# - XNA C# 在 3D 中创建 HUD

> ID：14712477
> 
> 赞同：0
> 
> 时间：2013-02-05T16:41:53.730
> 
> 标签：c#, 3d, xna, xna-4.0, hud

我想在 3D 显示器上创建一个简单的标签。像[这样](http://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/XNA_Text_HUD_Component.png/220px-XNA_Text_HUD_Component.png)的东西。

我尝试使用 SpriteBatch 和 SpriteFont，但这只会给我带来更多问题。另外，我通过了一些对我没有帮助的教程。

你有我的教程或任何解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:47:36.307

我通常将我的 3D 绘图代码和 UI 代码拆分为两个 SpriteBatch。这样，我可以将一个矩阵应用于 3D 视图，并将一个不同的矩阵应用于 2D 屏幕覆盖。

# ios - 使用 NSPredicate 获取一对多关系值

> ID：14712479
> 
> 赞同：3
> 
> 时间：2013-02-05T16:41:56.403
> 
> 标签：ios, objective-c, macos, core-data, nspredicate

我有实体部门和员工的核心数据模型，从部门到员工（部门-->>员工）有一对多关系。我需要获取两个日期之间员工加入日期的所有部门。

如何为此设置谓词？？？

谢谢你....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:23:47.170

我认为你需要一个子查询：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(employees, $e, $e.joinDate >= %@ AND $e.jointDate >= %@).@count > 0",
     fromDate, toDate] 
```

`employees`*是从Department*到*Employee*的一对多关系。

（请参阅“NSExpression 类参考”中的[expressionForSubquery:usingIteratorVariable:predicate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSExpression_Class/Reference/NSExpression.html#//apple_ref/occ/clm/NSExpression/expressionForSubquery%3ausingIteratorVariable%3apredicate%3a) :，其中记录了类似的问题和 SUBQUERY 解决方案）。

# installation - 在 InstallShield 中搜索部分注册表项

> ID：14712484
> 
> 赞同：1
> 
> 时间：2013-02-05T16:42:41.883
> 
> 标签：installation, installshield

作为我们安装过程的一部分，我们必须安装 Adob​​e Acrobat XI。根据[Adob​​e](http://www.adobe.com/devnet-docs/acrobatetk/tools/AdminGuide/basics.html?highlight=acrobat%20guid)：

> GUID的构造和解码的基本公式如下：
> 
> **Acrobat：示例：AC76BA86-1033-F400-7760-100000000002**
> 
> [产品系列]-[语言代码]-[其他语言]-[产品类型]-[许可证类型][主要版本][主要次要版本]

因为我知道密钥位于`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`并且我知道密钥以开头，`{AC76BA86-`所以我想简单地搜索以该序列开头的密钥，以便我可以检查它以确定我们是否需要安装 Acrobat。

有没有办法在 InstallShield 的安装脚本中进行部分注册表项搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:22:17.903

Adobe 正在破坏他们的产品代码，我真的不建议与该游戏一起玩。

但是，如果您阅读第 2.11.3 节，您会发现所有读者都共享 A6EADE66-0000-0000-484E-7E8A45000000 的通用升级代码。

这允许您使用升级表/FindRelatedProducts 根据此 UpgradeCode 搜索 ProductCodes。使用“仅检测”设置，找到的 ProductCode 将分配给您选择的属性。

没有自定义操作，没有混蛋的 ProductCode GUIDS。简单，容易......“它只是工作”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T22:59:02.420

看起来最好的方法是使用`RegDBQueryKey(<registry path>, REGDB_KEYS, <returnList>)`获取子键列表，然后检查列表中的每个键以查看它是否以我正在寻找的部分值开头。

# php - 如何将可选单词与 RegEx 匹配而不使用反向引用？

> ID：14712485
> 
> 赞同：0
> 
> 时间：2013-02-05T16:42:43.423
> 
> 标签：php, regex

我对反向引用和可选字符串的冲突性质有点困惑。

假设我想找到一个 URL，并且可以选择在前面添加 http://，我会这样做`(http:\/\/)...`，对吗？但这不会创建一个我可以使用 \1 或 $1 访问的反向引用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:47:58.427

所以你想要一个[非捕获子模式](http://www.php.net/manual/en/regexp.reference.subpatterns.php)：

```
(?:http:\/\/)
 ^^ 
```

此外，我建议您更改分隔符，这样您就不需要转义所有斜杠，例如：

```
preg_replace('@(?:http://)@', ...) 
```

# c# - 如何随着窗口大小的变化动态测量 wpf 中的网格宽度/高度

> ID：14712489
> 
> 赞同：3
> 
> 时间：2013-02-05T16:42:50.063
> 
> 标签：c#, wpf, canvas, grid, ellipse

我想要做的总体是在画布上添加一个椭圆，以表示当高尔夫球推杆从该圆的中心以某个角度击打时，高尔夫球在圆的圆周上的位置。为此，我使用了两个图像，其中一个是一个分成多个部分的圆圈来表示球被击中的角度。另一个图像只是一个旋转的推杆头，以表示球杆击球的角度。此图像位于圆形图像的顶部。蓝色椭圆代表球的位置。请参阅以下链接中从我的应用程序中获得的图像输出：

[所需的应用程序输出](https://www.dropbox.com/s/5lvd5xfhm0hyklf/FaceAngle.jpg)

为此，我基本上使用以下代码计算了网格的宽度和高度：

```
public FacePage()
{
    InitializeComponent();
    GridGraphs.SizeChanged += GridGraphs_SizeChanged;
}

void GridGraphs_SizeChanged(object sender, SizeChangedEventArgs e)
{
    GetMeasurements();
}

private void GetMeasurements()
{
    GridGraphs.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));

    double width = GridGraphs.DesiredSize.Width;
    double height = GridGraphs.DesiredSize.Height;

    RotatePutter(width, height);
} 
```

然后将宽度和高度传递给 RotatePutter() ，其中宽度和高度除以二以获得网格的中心点，如下所示：

```
public void RotatePutter(double width, double height)
{

    double radius = width * 0.5;
    double centerX = width * 0.5;
    double centerY = height * 0.5;

    Random ran = new Random();
    double angle = ran.Next(-15, 15);

    if (angle >= 0)
    {
        if (angle <= 5)
        {
            lblShotStaus.Content = "Square";
        }
        else
        {
            lblShotStaus.Content = "Open";
        }
    }
    else
    {
        lblShotStaus.Content = "Closed";
    }

    double angleradians = (angle * (Math.PI / 180));

    Point putterCentre = new Point(0.5, 0.5);

    imgPutter.RenderTransformOrigin = putterCentre;

    RotateTransform rt = new RotateTransform(angle, 0.5, 0.5);
    imgPutter.RenderTransform = rt;

    BallLocation(radius, angleradians, centerX, centerY);
} 
```

中心点、半径、角度和推杆图像在这里旋转，半径、角度弧度、centerX 和 centerY 被传递给 BallLocation 以计算球的位置，如下所示：

```
public void BallLocation(double rad, double anglerad, double centerX, double centerY)
{
    Ellipse ellipse = new Ellipse();

    double xBallPoint = (centerX - (rad * Math.Cos(anglerad)));
    double yBallPoint = (centerY - (rad * Math.Sin(anglerad)));

    ellipse.Height = 10;
    ellipse.Width = 10;
    ellipse.Fill = new SolidColorBrush(Colors.Aqua);

    Canvas.SetLeft(ellipse, xBallPoint);
    Canvas.SetTop(ellipse, yBallPoint);
    canvasFaceAngle.Children.Add(ellipse);
} 
```

这在全屏中可以正常工作，一旦我更改窗口的大小，球的位置对于它被击中的角度都是错误的。

有没有人知道如何随着窗口大小的变化动态地获取网格宽度和高度，以便计算椭圆（球）的正确位置。或者也欢迎任何其他完成此操作的替代方式。提前致谢。

这是我的xml：

```
<UserControl x:Class="HoleMorePuttsApplication.Pages.FacePage"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="40*"/>
        <ColumnDefinition Width="60*"/>
    </Grid.ColumnDefinitions>
    <Viewbox Grid.ColumnSpan="1">
        <Label Content="Face Angle Page" FontWeight="Bold" />
    </Viewbox>
    <Grid Name="GridGraphs" Column="1">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Name="columnLeft" Width="50*"/>
            <ColumnDefinition Name="columnRight" Width="50*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Name="rowTop" Height="70*"/>
            <RowDefinition Name="rowBottom" Height="30*"/>
        </Grid.RowDefinitions>

        <Image x:Name="imgAngles"  Source="C:\Users\BernardWork\Documents\Work\Net\PuttingApp\Images\360Angles.jpg" Grid.ColumnSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"/>
        <Image x:Name="imgPutter"   Source="C:\Users\BernardWork\Documents\Work\Net\PuttingApp\Images\Putter.jpg" Opacity="0.5" Margin="130,105,70,105" Grid.ColumnSpan="2" HorizontalAlignment="Left" VerticalAlignment="Bottom"/>
        <Label x:Name="lblShotStaus" Content="Label" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"/>
        <Canvas Name="canvasFaceAngle" Grid.ColumnSpan="2" Grid.Row="0" RenderTransformOrigin="0.543,0.511"></Canvas>

    </Grid>

</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:56:23.123

如果我理解正确，我相信问题可能出在：

```
double width = GridGraphs.DesiredSize.Width;
double height = GridGraphs.DesiredSize.Height; 
```

您正在调用没有提供边界的 Measure ，这意味着它将告诉您在`Grid`没有限制的情况下的大小（因此，`DesiredSize`）。the`DesiredSize`和 the`ActualSize`可能是两个非常不同的值。

在上述情况下，`SizeChanged`方法的 args 将为您提供所需的内容。

```
void GridGraphs_SizeChanged(object sender, SizeChangedEventArgs e)
{
    RotatePutter(e.NewSize.Width, e.NewSize.Height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:56:00.550

因此，如果目标只是获取网格宽度/高度，则**ActualWidth**和**ActualHeight**属性应该为您提供该信息。不过需要注意的一件事是：当*Grid*控件随窗口一起改变大小时，*Canvas*控件不会。换句话说，如果您读取网格的实际宽度/高度，它应该对应于窗口的一侧，但如果您读取画布的实际宽度/高度，它可能会给您错误的信息。

# mysql - VB.Net重用sql连接

> ID：14712494
> 
> 赞同：0
> 
> 时间：2013-02-05T16:42:58.473
> 
> 标签：mysql, vb.net

我是vb.net的新手，请问有没有办法重用sql连接命令？

这是我的 main.vb 的代码：

```
 Dim ServerString As String = "Server=localhost;User Id=root;Password=;Database=pos"
 Dim SQLConnection As MySqlConnection = New MySqlConnection

 Private Sub Main_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    SQLConnection.ConnectionString = ServerString

    Try
        If SQLConnection.State = ConnectionState.Closed Then
            SQLConnection.Open()
        Else
            SQLConnection.Close()
        End If
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

因为我想在我的其他课程中使用它，所以我不想以每种形式重新编写这段代码。任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:48:21.640

重用连接（或任何其他非托管资源）通常不是一个好主意。您应该尽快处理它们。

但是无论如何总是创建一个新连接没有问题，因为默认情况下您使用的是[ADO.NET 连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)。所以你不是在创建（和打开）一个新的物理连接。实际上，当您关闭/处置它时，您只是告诉池一个连接现在可以在其他地方重用。当你打开它时，它不能在其他地方使用，这就是为什么总是关闭它很重要。

因此始终使用[`Using`-statement](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)。

```
Public Shared Function GetColumn1(column2 As Int32) As String
    Dim sql = "SELECT Column1 From dbo.tableName WHERE Column2=@Column2 ORDER BY Column1 ASC"
    Using con = New SqlConnection(connectionString)
        Using cmd = New SqlCommand(sql, con)
            cmd.Parameters.AddWithValue("@Column2", column2)
            Try
                con.Open()
                Using rd = cmd.ExecuteReader()
                    If rd.Read() Then
                        Dim Column1 As String = rd.GetString(0)
                        Return Column1
                    Else
                        Return Nothing
                    End If
                End Using
            Catch ex As Exception
                ' log the exception here or do not catch it '
                ' note that you don't need a Finally to close the connection '
                ' since a Using-Statement disposes the object even in case of exception(which also closes a connection implicitely)
            End Try
        End Using
    End Using
End Function 
```

上面是一个示例方法来证明你不应该重用任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:55:30.387

这就是我通常所做的：我创建一个类，例如 ConnectDB，并在该类中创建一个方法，例如 GetConnection。这是代码：

```
Imports System.Data
Imports System.Data.SqlClient

Public Class ConnectDB

    Public Shared Function GetConnection() As SqlConnection
        Dim dbConnString As String = "Data Source=(local);Initial Catalog=Northwind;Integrated Security=True"
        Return New SqlConnection(dbConnString)
    End Function
End Class

Then from the method that needs a connection to the database, I call this function.  Here is a sample code:

Imports System.Data.SqlClient

Public Class EmployeeDB

    Public Shared Function GetEmployees() As List(Of Employee)
        Dim con As SqlConnection = ConnectDB.GetConnection()
        Dim selectStmt As String = "SELECT * FROM Employees"
        Dim selectCmd As New SqlCommand(selectStmt, con)
        Dim employees As New List(Of Employee)

        Try
            con.Open()
            Dim reader As SqlDataReader = selectCmd.ExecuteReader()
            Do While reader.Read
                Dim employee as New Employee

                employee.LastName = reader("LastName").ToString
                employee.FirstName = reader("FirstName").ToString
                ...
                employees.Add(employee)
            Loop
            reader.Close()
         Catch ex As Exception
             Throw ex
         Finally
             con.Close()
         End Try
         Return employees
    End Function
End Class 
```

您还可以修改`selectStmt`字符串以包含过滤条件、参数和排序顺序，就像上面 Tim 的示例一样，并包含`selectCmd.Parameters.AddWithValue("@<parameterName>", value)`每个参数。

# arrays - 用数组调用 swf，不能在 flash 中使用我的字符串

> ID：14712495
> 
> 赞同：0
> 
> 时间：2013-02-05T16:43:04.577
> 
> 标签：arrays, string, actionscript-3, flash

我试图让我的 SWF 加载器与一个数组一起工作，这样我就可以使用按钮通过一个代码调用我的 swf 文件。这是我遇到的问题：

场景 1，图层“动作”，第 2 帧，第 68 1067 行：将 Array 类型的值隐式强制转换为不相关的 String 类型。

我对数组、字符串或编码不太擅长，我不太确定问题出在哪里，我明白了，我的数组和我的字符串基本上不能一起工作，但我不知道怎么做修复它，如果它可以修复/使用我正在使用的代码。

只是一些帮助并被指出正确的方向将是一种享受

```
var swfList:Array = ["imagegallery.swf", "videoplayer.swf"];
var SWFLoader = new Loader;
var SWFRequest = new URLRequest (swfList) ;
SWFLoader.load (SWFRequest) ;

function loadSWF(file:String, container:MovieClip=null):void
{
if(container == null) container = MovieClip(root);

if(SWFLoader != null)
{
    if(SWFLoader.parent) SWFLoader.parent.removeChild(SWFLoader);
}

addChild (SWFLoader);
}

vidPlayer_btn.addEventListener (MouseEvent.CLICK, goVidPlayer);

function goVidPlayer (e:MouseEvent):void
{
loadSWF("videoplayer.swf");
}
imageGallery_btn.addEventListener(MouseEvent.CLICK, goImageGallery);
function goImageGallery(e:MouseEvent):void
{
loadSWF("imagegallery.swf");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:42:12.863

要访问数组中的项目，请使用以下格式：

```
var SWFRequest = new URLRequest(swfList[i]); 
```

其中 i 是数组中的位置（从零开始）。例如：

```
var SWFRequest = new URLRequest(swfList[0]); 
```

给出相同的结果：

```
var SWFRequest = new URLRequest("imagegallery.swf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:59:12.820

取消了数组，但仍然“两个按钮都有一个代码，而不是两个单独的代码”。

```
// Looks unnecessary
// var swfList:Array = ["imagegallery.swf", "videoplayer.swf"];

// Transfer inside loadSWF()
// var SWFRequest = new URLRequest (swfList); // needs a url String parameter
// SWFLoader.load (SWFRequest);

var SWFLoader = new Loader();  // Don't forget the parenthesis

vidPlayer_btn.addEventListener (MouseEvent.CLICK, goVidPlayer);
imageGallery_btn.addEventListener(MouseEvent.CLICK, goImageGallery);

function goVidPlayer (e:MouseEvent):void
{
    loadSWF("videoplayer.swf");
}

function goImageGallery(e:MouseEvent):void
{
    loadSWF("imagegallery.swf");
}

function loadSWF(file:String, container:MovieClip=null):void
{
    // What for?
    // if(container == null) container = MovieClip(root);

    if(SWFLoader != null)
        if(SWFLoader.parent)
            SWFLoader.parent.removeChild(SWFLoader);

    var SWFRequest = new URLRequest (file) ;
    SWFLoader.load (SWFRequest);
    addChild (SWFLoader);
} 
```

# java - 如何修改使用 FileInputStream 读取的文本文件的文本

> ID：14712496
> 
> 赞同：0
> 
> 时间：2013-02-05T16:43:06.417
> 
> 标签：java, text, file-io

我必须使用签名是这样的方法

```
aMethod(FileInputStream); 
```

我这样称呼那个方法

```
FileInputStream inputStream = new FileInputStream(someTextFile);
aMethod(inputStream); 
```

我想删除/编辑一些从 someTextFile 中读取的字符，然后再将其传递给`aMethod(inputStream)`;

我无法更改 aMethod 的签名或重载它。而且，它只需要一个 InputStream。如果方法将字符串作为参数，那么我不会问这个问题。

我是 InputStream 菜鸟。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:51:36.347

您可以将字符串转换为输入流

```
String str = "Converted stuff from reading the other inputfile and modifying it";
InputStream is = new ByteArrayInputStream(str.getBytes()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:24:02.190

您是否查看过另一个可能符合您要求的`FilterInputStream`扩展类？`InputStream`从类的文档

> FilterInputStream 包含一些其他输入流，它用作其基本数据源，可能沿途转换数据或提供附加功能。

另请查看[this](https://stackoverflow.com/questions/7743534/filter-seach-and-replace-array-of-bytes-in-an-inputstream) question，它似乎也与您的问题相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:51:47.800

这可能会有所帮助。它会抓取你的 .txt 文件。然后它将加载它并逐行遍历。您必须填写评论区域才能做您想做的事。

```
 public void parseFile() {
    String inputLine;
    String filename = "YOURFILE.txt";
    Thread thisThread = Thread.currentThread();
    ClassLoader loader = thisThread.getContextClassLoader();
    InputStream is = loader.getResourceAsStream(filename);
    try {
        FileWriter fstream = new FileWriter("path/to/NEWFILE.txt");
        BufferedWriter out = new BufferedWriter(fstream);
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(is));
        while((inputLine = reader.readLine()) != null) {

            String[] str = inputLine.split("\t");
            if(/* IF WHAT YOU WANT IS IN THE FILE ADD IT */) {
                // DO SOMETHING OR ADD WHAT YOU WANT
                out.append(str);
                out.newLine();
            }
        }
        reader.close();
        out.close();
    } catch (Exception e) {
        e.getMessage();
    }
} 
```

# r - plot3d - 一次有两个地块

> ID：14712497
> 
> 赞同：12
> 
> 时间：2013-02-05T16:43:14.513
> 
> 标签：r, plot, rgl

`plot3d()`产生一个我可以扭转和旋转的 3d 图。但是当我`plot3d()`再次调用时，以前的情节消失了，取而代之的是这个情节。

我怎样才能让它打开一个新的 XQuartz 窗口，而不是用新的 3d 绘图替换旧窗口。

本质上，我想同时打开两个 3d 图。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T17:04:06.703

像这样：

```
 library(rgl)

 open3d()
 x <- sort(rnorm(1000))
 y <- rnorm(1000)
 z <- rnorm(1000) + atan2(x,y)
 plot3d(x, y, z, col=rainbow(1000))

 open3d()
 x <- sort(rnorm(20))
 y <- rnorm(20)
 z <- rnorm(20) + atan2(x,y)
 plot3d(x, y, z, col=rainbow(20)) 
```

`open3d`这里的关键是在第二个情节之前调用打开一个新的*“设备”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T21:04:39.450

您可能会发现第二个 rgl 绘图窗口只是恰好放置在先前窗口的顶部。如果您移动第二个窗口，您将看到第一个窗口仍然存在（尽管现在没有“焦点”状态。）无需绘制设备以保持它们可用。您更改获得焦点的窗口`rgl.set`：

```
> open3d()
[1] 3     # might have been "1"
> open3d()
[1] 4    # Now move that 2nd  window to the side 
> rgl.set(3)
#Focus is returned to the first window. 
```

您不能同时激活 2 个窗口（在获取命令的意义上），但您可以让它们都可见，如果一个设置为旋转，它会在焦点转移到另一个窗口后继续旋转。`plot3d`如果您设置`add=TRUE`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-11T13:44:08.053

“一次打开两个 3d 图”的替代方法是使用[mfrow3d](https://rdrr.io/rforge/rgl/man/mfrow3d.html) from `library("rgl")`。它的工作方式与`par("mfrow")`经典 R相同。

以下改编代码（来自[此处](https://stackoverflow.com/a/14712894/3294674)）在一个窗口中生成两个并排的 3D 图（2 列）：

```
library(rgl)

mfrow3d(1, 2)
x <- sort(rnorm(1000))
y <- rnorm(1000)
z <- rnorm(1000) + atan2(x,y)
plot3d(x, y, z, col=rainbow(1000))

x <- sort(rnorm(20))
y <- rnorm(20)
z <- rnorm(20) + atan2(x,y)
plot3d(x, y, z, col=rainbow(20)) 
```

# java - 爪哇 | 操作员

> ID：14712500
> 
> 赞同：1
> 
> 时间：2013-02-05T16:43:31.553
> 
> 标签：java, operators

我在我的初学者 Java 编程课上有这个问题，我在我的书中找不到一个单一的 '|' 表示作为操作员。

问题是：

```
int j = 0;    
if ((8 > 4) | (j++ == 7))
    System.out.println("j = " + j); 
```

j = 1吗？

解释为什么。

这本书解释了 OR 运算符“||” 有例子，但它没有显示这个单一的“|”。运算符的含义是否在两者之间改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:47:53.367

是的，意思变了，`||`是逻辑`or`运算符，`|`而是按位`or`。

由于此运算符在位级别操作 (...)，因此它不会像 , 那样短路`||`，这意味着即使第一个操作数是`true`，也会计算第二个操作数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T16:45:31.173

如果您使用`||`and`&&`形式，而不是这些运算符的`|`and`&`形式，Java 将不会费心单独计算右侧操作数。

```
Boolean b = true;
if(b || foo.test())
{
   //we entered without calling test()
}

if(b | foo.test())
{
   //we entered  calling test()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:45:03.340

`|`-> 这是按位 OR 运算符执行按位包含 OR 运算并执行两个操作数（右和左）。

> 按位或“|” 如果操作数中的一个或两个位为 1，则运算符产生 1。但是，如果两个位都为 0，则此运算符产生 0。更准确地说，或“|” 运算符在所有情况下都返回 1，除非两个操作数的位都为 0。

```
if ((8 > 4) | (j++ == 7)) System.out.println("j = " + j); 
```

这里`8>4`将返回`true`并将`j++ == 7`返回`false`。所以它将是`if(true|false)`，这里按位运算符将返回`true`或 1 并打印 j 的值，该值在 j++ 之后变为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:56:47.080

运算符是按位或，`|`但您可能会问为什么有人会对布尔变量使用按位或？

逻辑或运算符 ( `||`) 有一个称为短路的特性，这意味着如果左操作数的计算结果为`true`，则不会进行进一步的处理，甚至右手操作数也不会*计算*。但是按位 OR 运算符`|`总是对两个操作数求值，如果应用于布尔操作数，则对它们都求值，然后对结果应用简单的或。

在您的情况下`(j++ == 7)`，无论`8 > 4`. 操作员不会发生这种情况`||`。所以`j`会加一，程序的输出是`1`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-05T16:46:33.550

答案是否定的，因为 j 被初始化为 0，但此后从未赋值。因此 j 的值始终保持为 0。

# ios - 当 UITableVC 包含在另一个 VC 中时未找到单元标识符

> ID：14712501
> 
> 赞同：0
> 
> 时间：2013-02-05T16:43:32.110
> 
> 标签：ios, objective-c, uitableview

我正在尝试使用一些自定义单元格创建一个表格视图，但我遇到了问题。一切都设置正确，当我将此 UITableVC 用作初始 VC 时，一切正常。但是当我尝试将它作为子 VC 添加到另一个 VC 时，我收到此错误：

```
Assertion failure in -[UITableView dequeueReusableCellWithIdentifier:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:4460
2013-02-05 18:37:25.704 SalesBot[16284:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'unable to dequeue a cell with identifier Statement Cell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

我没有更改任何其他内容，我只是将情节提要中的箭头移动到另一个 VC 以使其成为初始值。

这是我将 UITableVC 子类作为子类添加到另一个 VC 的方法：

```
self.statementTableViewController = [[SBStatementTableViewController alloc] init];
[self.view addSubview:self.statementTableViewController.view];
[self.statementTableViewController.view setFrame:self.contentFrame]; 
```

这是我如何使单元格出列：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Statement Cell";
    SBStatementCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...

    return cell;
} 
```

*我知道上面的代码只是iOS6，我以后会担心iOS 5 :)*

我猜单元格标识符在某种程度上不是“全局”的，并且 tableVC 在它是另一个 VC 的孩子时看不到它们？

如果您需要查看更多代码，请帮助并告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:59:41.313

即使你还没有跟进你的代码，我敢打赌这是你的问题。

**取自：** [dequeueReusableCellWithIdentifier:forIndexPath 中的断言失败：](https://stackoverflow.com/questions/12737860/assertion-failure-in-dequeuereusablecellwithidentifierforindexpath)

您正在使用 dequeueReusableCellWithIdentifier:forIndexPath: 方法。该方法的文档说明了这一点：

```
Important: You must register a class or nib file using the 
registerNib:forCellReuseIdentifier: or registerClass:forCellReuseIdentifier:
method before calling this method. 
```

您没有为重用标识符“Cell”注册 nib 或类。

查看您的代码，您似乎希望 dequeue 方法在没有单元格可以给您的情况下返回 nil。您需要使用 dequeueReusableCellWithIdentifier: 来实现该行为：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

注意 dequeueReusableCellWithIdentifier: 和 dequeueReusableCellWithIdentifier:forIndexPath: 是不同的方法。

# jquery - jquery砌体文件准备问题

> ID：14712513
> 
> 赞同：0
> 
> 时间：2013-02-05T16:43:53.447
> 
> 标签：jquery, jquery-masonry

我已经启动了一个站点，但 Jquery Masonry 仍然存在问题。我已经阅读了几乎所有关于使用 Document Ready 与 Window Load 的帖子。除了包含我的问题答案的帖子之外的所有人。

这是网站：[http ://www.buckysspecialspice.com](http://www.buckysspecialspice.com)

有时负载很好。今天它没有。

我的函数文件是这样的。如果我使用 Document Ready，则帖子块有时会合并在一起，直到调整浏览器大小为止。如果我使用 Window Load 所有帖子块按行加载。

任何建议都会很棒。

```
// MASONRY

function anaximander_masonry() {
if (!is_admin()) {
    wp_register_script('jquery_masonry', get_template_directory_uri(). '/js/jquery.masonry.min.js', array('jquery'), '2.0.110526' );
    wp_enqueue_script('jquery_masonry');
    add_action('wp_footer', 'anaximander_add_masonry');

    function anaximander_add_masonry() { ?>
        <script>
            jQuery(window).load(function($){
              var $container = $('img');

                $container.imagesLoaded(function(){
                    $('#masonry-index').masonry({
                        itemSelector: '.index-post-container',
                        isAnimated: true,
                      columnWidth : 3
                    });
                });
            });
        </script>
    <?php 
    }
}
}

add_action('init', 'anaximander_masonry'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:03:32.463

@author您可能想要$（window）.load，因为它会在发射之前等待所有内容（包括图片）加载，然后通过砌体重新排列东西。但是.imagesLoaded 是什么？它只是在选择器中的图像加载后触发回调吗？为什么有那个和 $(window).load？

另外，我会使用“jQuery”而不是“$”，因为它似乎不起作用（编辑：有人打败了我）

# bash - bash - $PWD 未列出文件名（仅文件路径）

> ID：14712524
> 
> 赞同：0
> 
> 时间：2013-02-05T16:44:08.787
> 
> 标签：bash

我完全不熟悉 bash 脚本，但是我遇到了 php 的 sendmail 路由通过的以下脚本，因此我可以跟踪任何可能由垃圾邮件发送者组成的脚本。

这很好用，但是 $PWD 变量不显示文件名，它只显示文件的工作目录。

Bash 脚本：/usr/local/bin/sendmail2

```
#!/bin/sh
# Logging sendmail wrapper

SENDMAIL="/usr/sbin/sendmail -t -i"
LOGFILE="/home/mail.log"

DT=`date "+%Y-%m-%d %H:%M:%S"`
DTFN=`date "+%Y%m%d-%H%M%S"`
#TMPFP=`tempfile --prefix=lsm_`
TMPFP=`mktemp`

cat | tee "$TMPFP" | $SENDMAIL $*
RETVAL=$?

TO=`grep "To:" <"$TMPFP"`
rm -f "$TMPFP"

echo "$DT: $PWD sent $TO" >> $LOGFILE

exit $RETVAL 
```

测试脚本：/home/mysite/test.php：

```
<?php
$to = "my@email.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "my@email.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "Mail Sent.";
?> 
```

php.ini：

```
sendmail_path = "/usr/local/bin/sendmail2" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:48:44.463

好吧，`${PWD}`是“打印工作目录”的缩写（`pwd`是那个命令），因此它只会给你工作目录。这是设计使然。

此外，工作目录不一定与脚本的完整路径有任何关系（您的`sendmail2`脚本和调用的 php-script 都不是`sendmail2`）。

# c# - 在具有 ui/非 ui 线程差异的 WPF 中使用 PInvoke

> ID：14712527
> 
> 赞同：0
> 
> 时间：2013-02-05T16:44:26.540
> 
> 标签：c#, c++, wpf, multithreading, pinvoke

我从 WPF 应用程序中的 c# 代码访问 c++ dll 库。从ui线程访问dll时我没有问题。但是我需要 UI 在 c++ dll 的代码运行时做出响应。所以我尝试从另一个线程访问它。但是当我第一次尝试在非 ui 线程中调用相同的函数（我从 ui 线程调用）**时**，函数返回但返回值表明函数中存在内部错误。但是，当我从非 ui 线程运行代码**一次或两次以上**时，它会成功返回一个非错误值。我没有 dll 的源代码，所以我不确定里面发生了什么。

c++ 函数

```
UINT32 myfunc1() 
```

在 C# 中

```
[DllImport("mydll.dll")]
public static extern uint myfunc1(); 
```

我如何到达 ui 线程中的代码

```
uint errorCode = myfunc1(); // returns 0 means no error occured 
```

我如何在非 ui 线程中获取代码

```
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (s, args) => { args.Result = myfunc1(); };
// 1st call args.Result is 10 means internal error ocurred
// 2nd call args.Result is sometimes 0 and sometimes 10
// 3rd or later calls args.Result is 0 means no error occured
worker.RunWorkerCompleted += doSth();
worker.RunWorkerAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:17:13.560

它“可能”与线程上使用的 Apartment 模型有关。

您的 UI 线程将使用 STA（单线程单元）模型...它依赖于消息循环进行同步/序列化访问。

您`BackgroundWorker`将使用 MTA（多线程单元）模型。

该 DLL 库中可能有一些代码依赖于在 UI/STA 线程中运行以进行正确同步，例如一些 COM 调用。它有时有效，有时无效的原因可能是由于竞争条件......由于缺乏同步。

可以指定一个线程是一个 STA ......但不是在`BackgroundWorker`线程上，因为它们是由 a 创建和管理的`ThreadPool`，并且总是设置为使用 MTA 单元模型，被重用等......和一个线程必须在它开始之前设置它的公寓状态......之后它就无法更改。

因此，改为创建一个新的`Thread`集合，将其公寓设置为 STA，并泵出一个消息循环。

*   [如何将后台工作线程设置为单线程单元？](https://stackoverflow.com/questions/4685237/how-can-i-make-a-background-worker-thread-set-to-single-thread-apartment)

*   [如何在 C# 的后台工作人员中使用 Web 浏览器对象](https://stackoverflow.com/questions/13579407/how-to-use-web-browser-object-in-background-worker-in-c-sharp)

*   [http://bytes.com/topic/c-sharp/answers/823166-can-backgroundworker-single-threaded-apartment](http://bytes.com/topic/c-sharp/answers/823166-can-backgroundworker-single-threaded-apartment)

# c# - 通过编程格式化 Web.Config 文件

> ID：14712536
> 
> 赞同：-1
> 
> 时间：2013-02-05T16:44:54.700
> 
> 标签：c#, web-config, formatting

我正在通过 installshield 安装我的网络应用程序。从中调用用 C# 准备的自定义 dll 来修改 web.config 文件中的属性。

但问题是在成功将我的内容部署到 inetpub 之后，web.config 文件看起来有点丑陋和分散注意力。

那么我们可以像在 Visual Studio 中那样运行 CTRL+K+D 之类的东西来使它看起来格式正确吗？

我的意思是通过以编程方式格式化我的 web.config 文件。

问候， 帕万

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:56:55.760

您可以在编写配置时使用 XmlTextWriter.Formatting 属性。请看这篇文章：[在 C# 中格式化 XML](http://www.yetanotherchris.me/home/2009/9/9/formatting-xml-in-c.html)

这可能是您需要的。

# datetime - SAS（24 小时）时间转换为分钟

> ID：14712543
> 
> 赞同：1
> 
> 时间：2013-02-05T16:45:15.437
> 
> 标签：datetime, type-conversion, sas

我正在尝试将 24 小时时间值转换为分钟

从：

```
(TIME)
17:00:00 
16:55:00
17:30:00 
```

到：

```
(NUM)
1060
993
1038 
```

目前我将时间值乘以 60 `17*60`, `16.55*60`,`17.30*60`

我将如何做到这一点？我做对了吗？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:48:21.240

SAS 时间值存储为秒。无论如何，如果它确实是一个“时间”值，而不是字符串。因此，您可以除以 60，而不是相乘。

```
data want;
input timeval TIME9.;
minutes=timeval/60;
format minutes BEST12.;
format timeval TIME9.;
put timeval= minutes=;
datalines;
17:00:00
16:55:00
17:30:00
;;;;
run; 
```

如果它不是存储为时间值（数字）而是作为字符串存储，则需要 INPUT(timeval,TIME9.) 才能执行此操作；所以

```
minutes = input(timeval,TIME9.)/60; 
```

会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:51:31.643

不知道这与 SQL 有什么关系，但一般来说，假设*小时*是 0-23 而不是 0-12 带有上午/下午指标，这个伪代码

```
 ( 60.0 * hours )    // convert 0-23 hours to minutes
+ minutes             // minutes don't need conversion
+ ( seconds / 60.0 )  // convert 0-59 seconds to fractional minute 
```

应该给你从一天开始的偏移量（午夜，00:00:00）作为小数分钟数。如果您有上午/下午指标，则需要将其考虑在内，如下所示：

```
 ( 60.0 * ( hours + ( isPM ? 12 : 0 ) ) ) // convert 0-23 hours to minutes
+ minutes                                  // minutes don't need conversion
+ ( seconds / 60.0 )                       // convert 0-59 seconds to fractional minutes 
```

# c - 为什么相同的函数在链接其他目标文件后表现不同？

> ID：14712545
> 
> 赞同：0
> 
> 时间：2013-02-05T16:45:18.700
> 
> 标签：c, r, openssl, rcpp

我正在处理仅在 debian 系统上发生的 R 扩展错误。

该`SSL_CTX_new`函数会在运行时**检测到堆栈粉碎**，这可能表明发生了段错误。

为了理解这个错误，我编写了一个独立的测试函数：

```
#include <Rcpp.h>
#include <openssl/ssl.h>
RcppExport SEXP test() {
    BEGIN_RCPP

    SSL_library_init();
    SSL_CTX_new(SSLv23_client_method());

    END_RCPP
} 
```

此功能通常独立运行。

但是，在将我现有的项目与测试功能链接后，它会**检测到堆栈粉碎**

为什么相同的函数在链接其他目标文件后表现不同？谁能给我一些提示？谢谢！

* * *

这是我的项目：[https](https://github.com/wush978/RMessenger) ://github.com/wush978/RMessenger 。到目前为止，它在 debian 上崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:54:00.273

R 处理自己的内存管理。Valgrind内存分析器/调试器之前已经成功使用过，网上也有一些帖子。

如果我正确理解了您的帖子，那么 SSL 例程可能正在做一些让 R 感到不安的事情。您将不得不对其进行调试。您在此处发布的内容不构成可重现的错误报告。

您可能还会发现在 rcpp-devel 列表中获得的反馈很有帮助。

# c# - 如何从模板调用方法？

> ID：14712546
> 
> 赞同：0
> 
> 时间：2013-02-05T16:45:26.370
> 
> 标签：c#, templates, generics, data-structures, struct

我有这个 C# WinForms 代码，其中我有几个不同`structs`的，所有功能都以相同的方式。因此，我没有编写单独的函数来添加或删除项目，而是尝试使用模板。

例如，这是一个`struct`和`List<>`我用来存储它的对应的`objects`：

```
public struct Alias
{
    public string alias;
    public string aliasSource;

    public static bool IsValid(...); //This function exists in all the structs
};

List<Alias> aliases; 
```

这是从外部使用的函数，用于添加别名：

```
public void AddAlias(Alias iAlias)
{
    AddGenericStructItem<Alias>(iAlias, aliases);
} 
```

这是进行加法的实际功能：

```
private void AddGenericStructItem<T>(T genericStructItem, List<T> genericList)
{
    string outputError;
    if (T.IsValid(genericStructItem, out outputError)) //< -- Problem in the 'T' being used in the far left
    {
        if (genericList.Contains(genericStructItem))
        {
            MessageBox.Show("ERROR 82ha5jb :: Item already exists");
        }
        else
        {
            genericList.Add(genericStructItem);
        }
    }
    else
    {
        MessageBox.Show(outputError);
    }
} 
```

问题出现在`T.IsValid...`零件中。编译器给我以下错误`T`：

```
'T' is a 'type parameter', which is not valid in the given context 
```

有没有办法解决？我所有的`structs`人都有一个`IsValid`具有相同设置的功能，所以重复编写相同的代码似乎很愚蠢，以防我在这里不使用模板......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:49:06.480

你不能那样做。唯一的选择是将`where`泛型参数的约束定义为某种接口或基类类型。但是你不能用结构和静态成员来做到这一点。如果将结构更改为类，则可以执行以下操作：

```
public interface IValidatable
{
   bool IsValid(out outputError);
}

public class Alias : IValidatable
{
    public string alias;
    public string aliasSource;

    public bool IsValid(out outputError) { ... };
}; 
```

现在您可以应用约束：

```
private void AddValidatableItem<T>(T item, List<T> list)
   where T : IValidatable
{
    string outputError;
    if (!item.IsValid(out outputError))
    {
        MessageBox.Show(outputError);
        return;
    }

    if (list.Contains(item))
    {
        MessageBox.Show("ERROR 82ha5jb :: Item already exists");
        return;
    }

    list.Add(item);       
} 
```

顺便说一句，您可以利用 C# 扩展方法并使此方法成为可验证项列表的扩展：

```
public static void AddValidatableItem<T>(this List<T> list, T item)
    where T : IValidatable 
```

这将允许您调用列表上的方法：

```
aliases.AddValidatableItem(newAlias); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:51:42.563

您不能使用约束来告诉编译器您的对象上将存在静态方法。如果它确实需要是静态的，则需要使用反射来调用该方法：

```
var methodInfo = typeof(T).GetMethod("IsValid", BindingFlags.Static|BindingFlags.Public);
if (methodInfo != null)
{
    object[] parameters = new object[] { genericStructItem, null };
    if ((bool)methodInfo.Invoke(null, parameters))
    {
        // It's valid!
    }
    else
    {
        string error = (string)parameters[1];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:01:58.440

C# 泛型与 C++ 中的模板有*很大*不同，尽管语法看起来很相似。

当你说

```
T.IsValid(genericStructItem, out outputError); 
```

听起来您希望编译器替换`T`为`Alias`给您

```
Alias.IsValid(genericStructItem, out outputError); 
```

这不是泛型的工作方式。您需要找到另一种调用方式`IsValid`，例如反射或向结构添加通用接口。

我也*强烈*考虑使用类而不是结构。我不知道你选择结构的原因，但一般来说有几个*不*使用结构的原因，特别是如果它们需要是可变的。

# php - 通过单击相应按钮删除图像

> ID：14712549
> 
> 赞同：0
> 
> 时间：2013-02-05T16:45:34.410
> 
> 标签：php, javascript, image, file, button

我有一个包含大量图像和其他文件夹/目录的文件夹/目录。

**我正在使用以下代码显示这些文件的预览：**

```
<?php
      $images=array();  
        $dir_handler = opendir('test') or die("Unable to open path");  
        $i=0;    
        while($file = readdir($dir_handler))
        {            
        if(is_dir($file)) 
        continue;        
        else if($file != '.' && $file != '..' && $file != 'index.php')
        {                    
        $images[$i]=$file;
        $i++;     
        }       
        }      
        sort($images);

        for($i=0; $i<sizeof($images); $i++) 
        {              

        echo "<a href=".chr(34).$path.$images[$i].chr(34)."><img style='border:1px solid #666666; width:100px;height:100px; margin: 10px;' src='test/".$images[$i]."'/><input type='button' value='nok[]'></a>";

        }        closedir($dir);
?> 
```

问题是我想为每个文件（每个图像或文件夹）分配一个单独的按钮，这样通过单击每个按钮，其对应的图像（或文件夹/目录）就会从主文件夹中删除，不再显示为预览。

另一个小问题是上面的代码没有显示文件夹的预览。为什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:50:42.970

您总是显示图像，您需要检查 $images 数组值是图像还是文件夹。然后对显示器做一些不同的事情。

要删除文件或文件夹，请分别使用以下函数：

```
unlink();
rmdir(); 
```

[http://www.php.net/manual/en/function.rmdir.php](http://www.php.net/manual/en/function.rmdir.php)

[http://php.net/manual/en/function.unlink.php](http://php.net/manual/en/function.unlink.php)

要在图像之前添加文件夹列表，请将代码更改为：

```
<?php
  $images=array();  
  $folders = array();
    $dir_handler = opendir('test') or die("Unable to open path");  
    $i=0;    
    while($file = readdir($dir_handler))
    {            
    if(is_dir($file)) {
         $folders[count($folders)] = $file;
    }   
    else if($file != '.' && $file != '..' && $file != 'index.php')
    {                    
    $images[$i]=$file;
    $i++;     
    }       
    }      
    sort($images);

    foreach($folders as $folder){

     echo "<a href='#'>$folder</a>";
    }

    for($i=0; $i<sizeof($images); $i++) 
    {              

    echo "<a href=".chr(34).$path.$images[$i].chr(34)."><img style='border:1px solid #666666; width:100px;height:100px; margin: 10px;' src='test/".$images[$i]."'/><input type='button' value='nok[]'></a>";

    }   

 closedir($dir);
?> 
```

然后，您所要做的就是在视图中构建文件夹的可视元素，并链接到一个函数，该函数将在需要时执行 unlink() 和 rmdir()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:52:45.830

这里有几个问题。

第一个问题：为什么不显示文件夹预览？这是因为您通过循环 $images 数组来显示预览，但您没有向该数组添加目录（请参阅您的代码，检查它是否为 is_dir，然后调用“继续；”）。如果要包含目录，则应将它们包含在 $images 数组中（或对它们执行其他操作）。

第二个问题：如何删除？您需要扩展现有的 PHP 脚本或编写另一个脚本。您将在删除图标上创建一个链接；链接的 href 将指向新的（或现有的）PHP 脚本，您可以将要删除的文件夹或文件作为参数传入。如果是文件夹，则使用 rmdir()。如果是文件，则使用 unlink()。如果您需要，我稍后可以为您提供更多帮助。

# ruby-on-rails-3 - 设计 ldap 身份验证只是给出无效的用户名或密码错误

> ID：14712552
> 
> 赞同：2
> 
> 时间：2013-02-05T16:45:52.313
> 
> 标签：ruby-on-rails-3, devise, ldap

我已按照设计 ldap github 站点中的教程进行操作。当我尝试登录时，我在日志中得到了这个：

```
Started POST "/users/sign_in" for 127.0.0.1 at Tue Feb 05 11:37:04 -0500 2013
  Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"Cl2fTO6guIUMNVCV2+TXSZRNR56RFqiAurbicwyfito=",    "commit"=>"Sign in", "user"=>{"remember_me"=>"0", "password"=>"[FILTERED]", "login"=>"jchoi"}, "utf8"=>"���"}
  SQL (7.9ms)   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc,    a.attnotnull
  FROM pg_attribute a LEFT JOIN pg_attrdef d
  ON a.attrelid = d.adrelid AND a.attnum = d.adnum
  WHERE a.attrelid = '"users"'::regclass
  AND a.attnum > 0 AND NOT a.attisdropped
  ORDER BY a.attnum

   User Load (1.1ms)  SELECT "users".* FROM "users" WHERE "users"."login" = 'jchoi' LIMIT 1
   SQL (3.4ms)   SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
   FROM pg_attribute a LEFT JOIN pg_attrdef d
   ON a.attrelid = d.adrelid AND a.attnum = d.adnum
   WHERE a.attrelid = '"users"'::regclass
   AND a.attnum > 0 AND NOT a.attisdropped
   ORDER BY a.attnum

    LDAP: LDAP dn lookup: =jchoi
    LDAP: LDAP search for login: =jchoi
    LDAP: Authorizing user =jchoi,ou=Root,dc=complay,dc=com
    LDAP: LDAP dn lookup: =jchoi
    LDAP: LDAP search for login: =jchoi
    Completed   in 53ms
     Processing by Devise::SessionsController#new as HTML
     Parameters: {"authenticity_token"=>"Cl2fTO6guIUMNVCV2+TXSZRNR56RFqiAurbicwyfito=", "commit"=>"Sign in", "user"=>{"remember_me"=>"0", "password"=>"[FILTERED]", "login"=>"jchoi"}, "utf8"=>"���"}
     Rendered devise/shared/_links.erb (1.6ms)
     Rendered devise/sessions/new.html.erb within layouts/application (13.8ms)
     Completed 200 OK in 23ms (Views: 20.7ms | ActiveRecord 
```

这是否意味着 ldap 连接通过并且我的 ruby​​ 代码有问题，或者它无法访问和检查我的用户名和密码，只是抛出了无效的用户名和密码错误？

谢谢

# flash - grails 在执行时在视图中显示 Flash 消息

> ID：14712553
> 
> 赞同：1
> 
> 时间：2013-02-05T16:45:59.013
> 
> 标签：flash, grails, view, controller, message

在我看来，我有一个用于我的闪存消息的部分：

```
<g:if test="${flash.message}">
    <section id="flashTile">
        <div class="alert fade in">
            <a class="close" data-dismiss="alert" href="#">&times;</a>
        <p>${flash.message}</p>
        </div>
    </section>
</g:if> 
```

在视图的某个时刻，我在控制器中调用了一个动作：

```
<g:form action="doAction">
   <g:submitButton class="ghbtn" name="doAction" />                 
</g:form> 
```

控制器动作类似于：

```
def doAction() {
    try {
        flash.message = 'Computing...'
        webserviceService.compute()
        flash.message = 'Computed'
        redirect(action: "list")
        return
    } catch (Exception e2) {
        flash.message = 'Could not compute'
        redirect(action: "list")
        return
    }
} 
```

当我单击`doAction`按钮并`webserviceService.compute()`成功执行时，我收到“已计算”消息；发生错误时，我收到“无法计算”消息。这工作正常。

由于`webserviceService.compute()`执行需要几秒钟，我想通知用户系统收到请求并正在处理它，否则用户可能无法正常工作并再次单击按钮。

我添加了另一个 Flash 消息“正在计算...”，它应该在单击后立即显示，`doAction`直到执行 web 服务。

工作流程应如下所示：

单击`doAction`-> 显示“正在计算...”

`webserviceService.compute()`已执行 -> '正在计算...' 替换为 '已计算' 或 '无法计算'

这里唯一的问题是“计算...”永远不会出现。对此有任何提示吗？

* * *

感谢您的提示。我现在已将表格更改为

```
<g:form action="calculate" onsubmit="return calculating()"> 
```

和

```
<script type="text/Javascript">                      
    function calculating() {   
        alert("come here");
        return true;
</script> 
```

我想更改 flash.message 而不是警报行，但到目前为止我还没有发现任何有用的东西。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:56:31.087

您对请求/响应周期的工作方式存在根本性的误解。基于此：

```
flash.message = 'Computing...'
webserviceService.compute()
flash.message = 'Computed'
redirect(action: "list")
return 
```

是什么让您认为“计算”将永远回归视图？它不会。您将不得不对您的问题应用一些 JavaScript。

您可以按照 JoshDM 的说明禁用该按钮，或者使用 JavaScript 显示一条消息，告诉用户等待。两者都需要在提交按钮的单击事件上发生。

这里也有一个 Ajax 解决方案，但考虑到您目前的理解，恐怕这会让您此时的事情变得复杂。

# html - 在 IE 中使用带有 css 'zoom' 属性的 'area' 的 'alt' 和 'title' 标签

> ID：14712555
> 
> 赞同：0
> 
> 时间：2013-02-05T16:46:01.400
> 
> 标签：html, css

在以下脚本中，`area`标签定义为图像地图中心内的可点击区域。`alt`标记指定区域的文本，属性`zoom`控制放大级别为 50% 缩小原始图像：

```
<style type="text/css">
    #myimg {zoom:50%; -moz-transform:scale(50%); -webkit-transform:scale(50%);}
</style>

<img src="http://www.content.onemexico.net/rosa.jpg" id="myimg" width="640" height="640" usemap="#themap">
<map name="themap">
    <area shape="rect" coords="240,240,400,400" alt="RosesByAlt" title="RosesByTitle" href="#">
</map> 
```

除 Internet Explorer (IE-9) 之外的所有主要浏览器中都会显示可点击区域的描述文本。

我尝试了`title`属性而不是`alt`，但仍然没有出现文本。

请任何人都可以帮助使用 Internet Explorer 使用缩放属性使描述文本出现在可点击区域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:58:40.497

IE9 使用标准的 CSS`transform`属性。它需要一个前缀，但它确实支持它。因此，如果您只是想支持 IE9，则根本不需要`zoom`。你应该能够做到这一点：

```
#myimg {
    -ms-transform:scale(0.5);
    -o-transform:scale(0.5);
    -moz-transform:scale(0.5);
    -webkit-transform:scale(0.5);
    transform:scale(0.5);
} 
```

如果您需要支持 IE8 或更早版本，那么您将需要`zoom`或 类似的东西，但要注意它`zoom`与`scale`;不同。表面上它可能有一些相似之处，但它的工作原理却大不相同，如果你使用它，你会得到一些奇怪的效果。

所以我建议不要使用`zoom`，即使是旧的 IE 版本。最好使用 IE 的`matrix`过滤器或 polyfill 脚本将`transform`样式支持反向移植到旧的 IE 中。此处提供的[答案可能会对您有所帮助](https://stackoverflow.com/questions/10651734/css-transforms-in-ie7)

另请注意，我还添加了属性的无前缀版本：您应该始终提供所有属性的无前缀版本，即使还没有浏览器支持它，因为在将来的某个时间它们都会全部丢弃支持他们的前缀版本，此时如果您没有标准版本，您的代码将会中断。

# c++ - git 和视觉工作室 2010 快递

> ID：14712556
> 
> 赞同：2
> 
> 时间：2013-02-05T16:46:14.403
> 
> 标签：c++, git, visual-studio-express

我使用 Visual Studio 2010 Express 已经有一段时间了，并且玩过一些大型项目已经有一段时间了。由于我接近 50-60 个文件和数千行代码，因此我决定对所有内容进行一些源代码控制，以便项目更容易在我的所有设备之间更新和访问，同时也可以备份。

我以前使用过 git 并且对它很满意，但是现在当我提交并将其推送到 bitbucket.org 上的远程存储库时，我发现 .vcxproj 文件在保留正确文件结构的同时也保留了包含和它从中推送的设备的 lib 目录，这意味着当下拉到另一台计算机时，那些 include/lib 目录将在错误的目录中查找，这意味着我每次拉/推时都必须修改所有这些目录。

我的问题，无论如何我可以将文件推送到存储库，以便解决方案保留文件夹设置，而不是包含和 lib 目录设置？

编辑：

经过一些研究，我在 Visual Studio 中查看了这些所谓的属性表，这些文件可以添加到您的项目中。您设置的设置优先于项目的设置，但是如果您将单个属性文件添加到项目中然后推送 .sln 文件以及没有该 .props 的各种 .vcxproj 文件，则会出现障碍文件，然后其他人从存储库中克隆，它不会打开，因为它显然需要该道具文件。

我想要的是远程存储库中的默认 .props 文件，当克隆过来时，不再跟踪该文件，然后该用户可以自己编辑它。我对 git 的了解还不够，无法做到这一点。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:01:30.583

我不确定您的问题到底是什么，但这是我的理解：

1.  您的项目文件包含绝对路径（例如“C:\myproj\include”）。将这些替换为相对路径（例如“.\include”）。"$(SolutionDir)" 变量有帮助：如果您的解决方案文件是 C:\myproj\myproj.sln，则 "$(SolutionDir)include" 与 "C:\myproj\include" 相同。您可以分别在 Project Properties > Configuration Properties > C/C++ 和 Linker 中更改包含和库目录。

2.  你的项目需要第三方库——比如 boost——而这些在你的项目之外，比如 C:\boost。不幸的是，Windows/VS 没有第三方库的标准位置，因此您可以：

    *   将库包含在您的项目中。这对于小型库来说非常好，但它不是您想要使用诸如 boost 之类的东西，它既大又趋于广泛使用。
    *   要求所有设备在同一位置设置这些库，例如 C:\sdk
    *   在项目中使用环境变量，如$(SDK_DIR)，所有设备都必须设置该环境变量。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:15:40.790

你所追求的是 git 的涂抹和清洁过滤器。您必须为清理编写一个脚本，但 sed 可能会很好地完成这项工作，您不需要真正的 xml 解析。

# jquery - 如果用户选择是，则进行条件验证

> ID：14712561
> 
> 赞同：-3
> 
> 时间：2013-02-05T16:46:35.133
> 
> 标签：jquery, jquery-validate, conditional

我有一个使用 jQuery 验证脚本`jquery.validate.js`

我需要的是当用户选择是时 - 需要额外信息（必填字段），如果用户选择否 - 很好，继续

尝试了很长时间没有成功 - 添加

非常感谢您的帮助！

这是我的 PHP 代码：

```
// If form type is radio, display as a radio button with yes/no answers
            if ($form_type == 'radio')
            {
            echo "<input type=\"radio\" name=\"screen_184\"  value=\"Yes\" checked /> <label>Yes</label> <input type=\"radio\" name=\"screen_184\"  value=\"No\" /> <label>No</label><br /><br />"; 

                // If from type is radio and additional information is required, display a textarea 
                if ($extra_info == 'Yes')
                {
                                   if ($row['required'] == 'Yes') {$class = 'required';} else {$class = 'input_field';}
                echo "<textarea class=\"$class\" maxlegth=\"500\" name=\"screentext_184\" /></textarea></li><br /><br />\n";
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:22:09.767

当你问一个关于 jQuery 的问题时，你需要展示你的 jQuery 代码，而不是你的 PHP。

但是，在 jQuery Valdiate 插件中，要`required`根据另一个字段的状态为一个字段设置条件`input`，请使用[`depends`](http://docs.jquery.com/Plugins/Validation/validate#toptions)如下...

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            "screentext_184": {
                required: {
                    depends: function(element) {
                        return $("input[name='screen_184'][value='Yes']").is(":checked");
                    }
                }
            }
        }
    });

}); 
```

**HTML**：

```
<form id="myform"> 
    Yes: <input type="radio" name="screen_184" value="Yes" />
    No: <input type="radio" name="screen_184" value="No" checked="checked" />
    <textarea name="screentext_184"></textarea>
    <input type="submit" />
</form> 
```

**工作演示：http: [//jsfiddle.net/qjhv6/](http://jsfiddle.net/qjhv6/)**

对于演示，在勾选`text` `input`“是”之前，该字段是可选的。`radio`

* * *

**编辑**：根据 Ryley 的评论，这可以进一步简化：

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            "screentext_184": {
                required: "input[name='screen_184'][value='Yes']:checked"
            }
        }  
    });

}); 
```

演示：http: [//jsfiddle.net/txryf/](http://jsfiddle.net/txryf/)

# java - 为什么快速联合加权中的索引在与更大的树合并时保持大小为 1？

> ID：14712562
> 
> 赞同：1
> 
> 时间：2013-02-05T16:46:37.317
> 
> 标签：java, algorithm, union-find

我一直在使用 coursera 上的课程研究算法。在第一堂课中，正在讨论快速联合加权。我明白了它的作用，我已经使用他们的代码对其进行了测试，并为它编写了一个小测试。

一切都很清楚，只有一点：当您创建两个对象的并集时，它会将具有最小树的对象添加到较大的对象中。同时，较大树的大小将随着较小树的大小在一个单独的数组中递增，该数组用于确定哪棵树更大。由于数组以每个索引的值 1 启动（每个节点本身基本上是 1 个对象的树），为什么该索引的值不设置为 0 而不是保持为 1？

为了说明这一点：

```
// Quick Union Weighted
ID: 0 1 2 3 4 5 6 7 8 9 
SZ: 1 1 1 1 1 1 1 1 1 1 

quw.union(2, 4);
ID: 0 1 2 3 2 5 6 7 8 9 
SZ: 1 1 2 1 1 1 1 1 1 1 

quw.union(5, 4);
ID: 0 1 2 3 2 2 6 7 8 9 
SZ: 1 1 3 1 1 1 1 1 1 1 

quw.union(2, 7);
ID: 0 1 2 3 2 2 6 2 8 9 
SZ: 1 1 4 1 1 1 1 1 1 1 

// Whereas I would've expected to end up with this 
// to point out that the index is empty. 
SZ: 1 1 4 1 0 0 1 0 1 1 
```

为什么合并索引的大小是 1 而不是 0？您可以在[此处](https://github.com/Vannevelj/Algorithms/tree/master/src/unionfind)找到对其进行测试的代码。[请注意，实现与讲师提供的示例](http://algs4.cs.princeton.edu/15uf/WeightedQuickUnionUF.java.html)相同，这就是为什么我假设我的代码是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:54:11.480

我认为这是因为节点本身的大小也是 1 并且没有任何子节点。但是它可以有孩子。我实际上对快速联合加权并不熟悉，但如果它有点像我见过的其他联合查找算法，你可以例如做

```
quw.union(0, 1);
ID: 0 0 2 3 2 2 6 2 8 9 
SZ: 1 1 4 1 1 1 1 1 1 1

quw.union(0, 2);
ID: 2 2 2 3 2 2 6 2 8 9 
SZ: 2 1 6 1 1 1 1 1 1 1 
```

所以现在 0 和 1 已经合并，从 0 开始的整个树再次与 2 合并，仍然使从 0 开始的子树大小为 2。

就像我说的，我不确定在 Quick-Union Weighted 中是否可行，但“1”的原因仍然是因为它本身也是 1 号。

# java - 如何在一个应用程序中管理 GUI 组件的启用/禁用

> ID：14712566
> 
> 赞同：1
> 
> 时间：2013-02-05T16:46:50.763
> 
> 标签：java, swing, user-interface, jbutton

我正在做一个有很多按钮和菜单的应用程序，我想在可以或不能执行附加到它们的操作时启用和禁用按钮和菜单项。即保存按钮和保存菜单项只有在有未保存的更改时才会被激活。

问题：我怎样才能有效地做到这一点/正确的方法是什么？

一种解决方案可以是每个按钮和菜单条目都有一个私有变量，并根据需要启用/禁用它。其他解决方案可以将 JToolBar 和 JMenu 的所有组件放在一个数组中并遍历所有组件并根据需要启用/禁用。但我认为有更好的解决方案。任何帮助或指导将不胜感激。

编辑：问题不是如何启用/禁用单个按钮或菜单项，我会知道如何管理应用程序的所有按钮和菜单项的状态。实现这一目标的最佳方法是什么？我已经解释了一些我一直在思考的解决方案，但没有一个能说服我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:52:16.773

该类`Action`已经支持这一点。请参阅[`Action#isEnabled`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html#isEnabled%28%29)和[`Action#setEnabled`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html#setEnabled%28boolean%29)方法。调用 setter 将触发一个事件，在该事件上`Action`设置 this 的 UI 将启用/禁用自身。

`Action`可以看作是您的 UI 按钮/菜单项/...的模型。所有状态都在模型中存储和更新，视图需要反映这一点（MVC 模式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:53:01.837

1）禁用点击使用：

`JButton#setEnabled(boolean)`

和

`JMenuItem#setEnabled(boolean)`

2）禁用`ActionListener`一段时间内使用私有布尔变量

```
public void actionPerformed (ActionEvent ae) {
    if (!enabled) return;

    // rest of code
} 
```

# ssrs-2008 - SSRS 报告显示为列出的目录

> ID：14712569
> 
> 赞同：7
> 
> 时间：2013-02-05T16:47:04.310
> 
> 标签：ssrs-2008, reporting

如何获取 SSRS 报告以显示网页视图？

当我转到 SSRS 报告页面时，它没有显示网页视图。它显示数据源、数据集和报告文件夹的列表。

进入报告文件夹后，我可以通过单击它们来调用报告，没有任何问题。

[https://docs.google.com/file/d/0B55EKwlB3BuINk1GeU9WRUoxM1E/edit?usp=sharing](https://docs.google.com/file/d/0B55EKwlB3BuINk1GeU9WRUoxM1E/edit?usp=sharing)

请看上面的图片。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T17:02:36.460

您正在浏览**报表服务器 Web 服务**，通常是`http://server/ReportServer`。听起来您在关注**Report Manager**网站，通常是`http://server/Reports`.

**网络服务网址：**

![在此处输入图像描述](../Images/49042217347e9fd0bff92f6ca8fa7475.png)

**报告管理器网址：**

![在此处输入图像描述](../Images/c24dc5732bd31c78ac36a4f23dd2d5d5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:42:56.467

连接到您的报表服务器并在 url 链接中键入以下内容： `127.0.0.1/reports`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-01T14:02:29.713

所有解决问题的好答案。

另一个建议是 Web Portal URL 绑定。添加 HTTPS 绑定时，我把它搞砸了。

# javascript - jQuery替换html文档中的开始和结束标签

> ID：14712576
> 
> 赞同：2
> 
> 时间：2013-02-05T16:47:34.507
> 
> 标签：javascript, jquery, html, jquery-plugins

我有以下 jQuery 代码片段，它应该将 [Button] Text Here [/Button] 之类的代码替换为：

```
<a class="button">Text Here</a> 
```

我拥有的javascript如下：

```
$(document).ready(function() {

    var buttonStart = $("body").html().replace(/\[Button\]*/ig,'<a class="button">');
    $("body").html(buttonStart);

    var buttonEnd = $("body").html().replace(/\[\/Button\]*/ig,'</a>');
    $("body").html(buttonEnd);

}); 
```

我遇到的问题是它不断替换我页面上与标签 [Button] [/B​​utton] 无关的其他元素。例如：

```
 <div id="MiddleBarLeft"></div> 
```

也被替换成

```
 <a class="button"><div id="MiddleBarLeft"></div></a> 
```

我上面的正则表达式不应该只查找 [Button] 和 [/Button] 标签吗？

另外，有没有其他有效的方法来解决这个问题？

谢谢

======================

更新..这是我的整个 HTML 文件，它替换了与我要替换的内容无关的元素

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head>

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type='text/javascript'>
    $(document).ready(function() {

        var buttonStart = $("body").html().replace(/\[Button\]/ig,'<a class="button">');
        $("body").html(buttonStart);

        var buttonEnd = $("body").html().replace(/\[\/Button\]/ig,'</a>');
        $("body").html(buttonEnd);

    });
    </script>

    <style>
    li{ 
    list-style:none;
        padding-top:10px;
        padding-bottom:10px;}   

    .button, .button:visited {
        background: #222 url(overlay.png) repeat-x; 
        display: inline-block; 
        padding: 5px 10px 6px; 
        color: #fff; 
        text-decoration: none;
        -moz-border-radius: 6px; 
        -webkit-border-radius: 6px;
        -moz-box-shadow: 0 1px 3px rgba(0,0,0,0.6);
        -webkit-box-shadow: 0 1px 3px rgba(0,0,0,0.6);
        text-shadow: 0 -1px 1px rgba(0,0,0,0.25);
        border-bottom: 1px solid rgba(0,0,0,0.25);
        position: relative;
        cursor: pointer
    }
    </style> 

    </head> 
        <body> 

     <div>          
           <ul>
            <li>[Button]Test[/Button]</li>
            <li></li>
            <li>Sample Text</li>
            </ul>
     </div>       

        </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:08:51.507

实际上，我进行了快速测试，但无法重现您的问题。请提供更多详细信息，例如示例。

两个技巧，可以提高性能：

1.  删除 RegExp 中的星号。我认为这是不必要的。

2.  只调用一次 $('body').html(buttonReplaced) ：

    ```
    var buttonReplaced = $("body").html()
                         .replace(/\[Button\]/ig,'<a class="button">')
                         .replace(/\[\/Button\]/ig,'</a>');
    $('body').html(buttonReplaced); 
    ```

3.  另一种解决方案：

    ```
    var buttonReplaced= $('body').html().replace(/\[Button\](.*?)\[\/Button\]/gi, '<a class="button">$1</a>');
    $('body').html(buttonReplaced); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:16:33.003

问题源于更换发生的方式 - 请考虑以下小提琴：http: [//jsfiddle.net/GYrYa/](http://jsfiddle.net/GYrYa/)

正如您所看到的，最后有两个按钮，即使只有一个 [Button][/Button] 语句 - 这是因为首先您要替换 [Button] ，`<a class='button'>`它会创建一个不匹配的标签。这会导致`</a>`在末尾添加一个。然后，您将 [/Button] 替换为`</a>`，这会创建另一个不匹配的标签 - 这一次`<a>`，在末尾。

更好的解决方案是：http: [//jsfiddle.net/GYrYa/1/](http://jsfiddle.net/GYrYa/1/)

编辑： http: [//jsfiddle.net/GYrYa/2/](http://jsfiddle.net/GYrYa/2/)省略脚本标签匹配

编辑2： http: [//jsfiddle.net/GYrYa/5/](http://jsfiddle.net/GYrYa/5/) - 最终解决方案，结合@Rain Diao非贪婪匹配

编辑3：添加了性能测试用例： http: [//jsperf.com/eithed-rsc3](http://jsperf.com/eithed-rsc3)，请阅读下面的讨论@Rain Diao's answer了解它的起源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:54:33.970

在您的正则表达式中使用 + 而不是星号。因为第一个也不匹配

```
$(document).ready(function() {

    var buttonStart = $("body").html().replace(/\[Button\]/ig,'<a class="button">');
    $("body").html(buttonStart);

    var buttonEnd = $("body").html().replace(/\[\/Button\]/ig,'</a>');
    $("body").html(buttonEnd);

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:59:49.263

我认为这段代码`$("body").html(buttonEnd)`；将替换 buttonStart。Mybe 你喊试试 append() 方法，像这样：`$("body").append(buttonEnd);`

# c# - 如何将输入作为数组 jQuery 提交

> ID：14712579
> 
> 赞同：0
> 
> 时间：2013-02-05T16:47:37.490
> 
> 标签：c#, jquery, json

我有以下 HTML：

```
<div id="tagType1">
    <input id="tag1" name="tagType1" value="tag1" type="checkbox" />
    <input id="tag2" name="tagType1" value="tag2" type="checkbox" />
    <input id="tag3" name="tagType1" value="tag3" type="checkbox" />
    <input id="tag4" name="tagType1" value="tag4" type="checkbox" />
</div>

<div id="tagType2">
    <input id="tag5" name="tagType2" value="tag5" type="checkbox" />
    <input id="tag6" name="tagType2" value="tag6" type="checkbox" />
    <input id="tag7" name="tagType2" value="tag7" type="checkbox" />
    <input id="tag8" name="tagType2" value="tag8" type="checkbox" />
</div> 
```

以及以下 jQuery：

```
 $.get($("#filter form").attr("action") + "/count", function (data, textStatus, jqXHR) {
        $('#workCount span').text(data.toString());
    }); 
```

以及以下方法：

```
public JsonResult Count(string[] tagType1 = null, string[] tagType2 = null)
{
    // Do something
} 
```

我的问题是，如何在 jQuery 中对来自两个容器的输入进行分组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:55:04.367

尝试使用 $(":input").serializeArray();

.serializeArray() 返回：数组

它将一组表单元素编码为名称和值的数组。

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:59:55.583

您可以使用 `traditional: true`

```
string[] tagType1 = //ALL OF THE TAG ONE COLLECTIONS 
string[] tagType2 = //ALL OF THE TAG TWO COLLECTIONS 

var params = { data2: tagType1, data2: tagType2 };
   $.ajax({
            type: "GET",
            url: "yoururl",
            data: params,
            dataType: "json",
            traditional: true
        }); 
```

行动：

```
public JsonResult Count(string[] data1, string[] data2)
{
    // Do something
} 
```

# ios - 让用户暂时禁用它后如何重新安排重复间隔通知？

> ID：14712581
> 
> 赞同：1
> 
> 时间：2013-02-05T16:47:40.850
> 
> 标签：ios, objective-c, xcode, notifications, uilocalnotification

在我们的应用程序中实施“请勿打扰模式”的最佳方法是什么？比如让用户选择在两个时段之间禁用通知。

我应该使用取消方法吗？

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

感谢您对要使用的特定组件的任何想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:47:58.057

您始终可以使用 bool 实例，当用户设置为“请勿打扰”时将变为 YES，而在禁用设置时变为 NO。因此，在发布通知之前，您可以使用 bool 实例控制“请勿打扰”是打开还是关闭。因此，您将能够更改整个应用程序的行为。如果您想指定一个时间段，请使用一个计时器，该计时器将触发一种方法，您可以在该方法中将 bool 设置为 NO，并在“请勿打扰”开启时发布应发布的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:50:34.610

我认为你的想法是正确的。您只需要找到一种单独的方式来存储未来的潜在通知，当用户在您的应用中切换您呈现为“请勿打扰”的任何内容时，您将取消所有预定的通知，当他们重新打开它们时，您只需全部重置。

# c++ - 将 uint16_t 和 char* 与 QMetaObject::invokeMethod() 一起使用

> ID：14712583
> 
> 赞同：6
> 
> 时间：2013-02-05T16:47:51.750
> 
> 标签：c++, qt

我想使用[QMetaObject::invokeMethod()从不同的线程异步调用插槽](http://qt-project.org/doc/qt-4.8/qmetaobject.html#invokeMethod)

包含插槽的类声明为：

```
class Paintable : public QObject {
  Q_OBJECT
  [...]
  public slots:
    void drawString(uint16_t x, uint16_t y, uint16_t size, const char* str, color c);
} 
```

调用invokeMethod的方法定义为：

```
void drawStringAsynchronously(uint16_t x, uint16_t y, uint16_t size, const char* str, color c) {
  QMetaObject::invokeMethod(paintable,
               "drawString",
               Qt::QueuedConnection,
               Q_ARG(uint16_t, x), Q_ARG(uint16_t, y), Q_ARG(uint16_t, size),
               Q_ARG(const char*, str), Q_ARG(color, c));
} 
```

（其中`paintable`类型为`Paintable*`）

但是 Qt 似乎无法在 invokeMethod 中使用 uint16_t 或 char* 因为在运行时我收到以下消息：

`QMetaMethod::invoke: Unable to handle unregistered datatype 'const char*'`

和

`QMetaMethod::invoke: Unable to handle unregistered datatype 'uint16_t'`

分别。

我能够使用成功注册我的自定义结构`color`，但是`qRegisterMetaType()`因为没有结构或类，这将不起作用。`uint16_t``char*`

如果有人能告诉我如何做或展示一个好的选择，我会很高兴。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T18:01:36.130

注册 uint16_t 的问题是这样的：它是一个 typedef，并且 Qt 已经注册了这个类型，但是它使用了不同的名称。由于 QMetaType 系统基于通过名称确定类型，这会导致问题。

您可以通过以下方式解决此问题：

```
Q_DECLARE_METATYPE(uint16_t) 
```

然后：

```
qRegisterMetaType<uint16_t>("uint16_t"); 
```

这将创建一个别名，以便可以使用该名称创建元类型。

# go - 内存消耗猛增

> ID：14712586
> 
> 赞同：1
> 
> 时间：2013-02-05T16:48:01.470
> 
> 标签：go, zlib

我有一个内存不断增长的程序。我不确定这是内存泄漏还是只是一个不断增长的缓冲区。

我成功隔离了问题，但还是找不到问题。

有一些奇怪的行为：如果我移除压缩部分，泄漏就会消失。所以我假设它在那里。但是，如果我（仅）删除开关中带有 chanTest 的子句，泄漏也会消失。有人可以确认这个问题并解释我为什么它有这样的行为吗？我正在使用 go1.0.3

谢谢！

这是程序：（它每 100 毫秒压缩一些虚拟数据）

```
package main

import (
    "bytes"
    "compress/zlib"
    "fmt"
    "time"
)

func main() {
    timeOut := time.NewTicker(100 * time.Millisecond)
    chanTest := make(chan int32)

    for {       
        L: for {  // timer part
            select {
                case resp := <- chanTest: // strange clause
                    fmt.Println("received stuff", resp)
                case <-timeOut.C:
                    fmt.Println("break")
                    break L
                }
           }
        timeOut = time.NewTicker(100 * time.Millisecond)

        // compression part
        data := []byte{1, 2, 3, 4, 5, 6, 7}
        var b bytes.Buffer
        w := zlib.NewWriter(&b)
        w.Write(data)
        w.Close()

        b.Reset()
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:08:21.853

您正在循环内开始一个新的 Ticker 而不调用`.Stop()`原始代码。由于 Ticker 以一定间隔运行，因此您最终会得到多个 Ticker 继续同时运行。

调用`.Stop()`停止前一个在*技术上*是可行的：

```
timeOut.Stop()
timeOut = time.NewTicker(100 * time.Millisecond) 
```

...但似乎违背了它的目的。相反，只是不要在循环中创建新的 Ticker，原来的将继续运行：

```
// timeOut = time.NewTicker(100 * time.Millisecond) // not needed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T07:43:59.077

在 2013 年 2 月 25 日（修订版 1c50db40d078）更新的 golang 提示中有针对此问题的修复。如果您运行`hg pull; hg update`更新 Go 的源代码并重新编译您的 Go 发行版，那么内存消耗问题应该会消失。

但是，仅此一项并不能使程序正确-它仅修复了异常高的内存消耗。需要调用正确的实现`timeout.Stop()`。

# php - PHP array_search 完全匹配

> ID：14712591
> 
> 赞同：0
> 
> 时间：2013-02-05T16:48:23.267
> 
> 标签：php

我有以下数组。请注意，有时参数较多，有时参数较少。

```
array(0 => 'param1: value1', 
      1 => 'param2: value2', 
      2 => 'param5: value5', 
      3 => 'param7: value7'); 
```

我需要将我感兴趣的参数的值放入变量中，例如 param1 和 param7，所以我决定使用 array_search 然后赋值。

例如

```
$value7 = array_search('param7:', $arr1);
$avalue7 = explode(':', $arr1[$value7]);
$value7 = $aValue7[1] 
```

但是它不起作用 - array_search 没有找到任何匹配项，很可能是因为它搜索完全匹配。欢迎任何建议或改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:53:09.837

为什么不使用关联数组？

```
$arr1 = array(
    "param1" => "value1",
    "param2" => "value2",
    ...   //complete it to the desired number of params
);

echo $arr1['param7']; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T16:53:04.990

用于`preg_grep()`在数组中搜索。见[http://php.net/manual/en/function.preg-grep.php](http://php.net/manual/en/function.preg-grep.php)

# c# - 如何通过基于 WCF 的 Web 服务获取 XML 输出

> ID：14712598
> 
> 赞同：0
> 
> 时间：2013-02-05T16:48:50.210
> 
> 标签：c#, asp.net, xml, wcf

我有一个基于 WCF 的 Web 服务，在该方法中我正在执行一个存储过程并填充数据集，然后最后返回数据集......就像一列和多行一样。但是我的要求现在不同了，因为我通过其他一些产品调用这个 web 服务，它期望像这样基于 XML 的输出。（它是一个示例 XML 格式）但我想要以相同的方式。那么我如何生成 xml 并将其返回..如果有人可以在给定的代码中进行更正，我将不胜感激，因为我不是 XML 人，这是我第一次处理 XML。我想要一些东西

```
<xml>
   <Approvers>
      <Approver>
          <Approvername>John</Approvername>
      </Approver>
   </Approvers>
</xml> 
```

我想遵循的示例 XML 格式。

![在此处输入图像描述](../Images/4629f02aebfdbb5e664d728fd09f0603.png)

```
public DataSet getRequisitionApprovers(string pEmail, string pLocationType)
        {
            //Read Datasource properties from Web.config file to access Oracle EBS Database 
            string SDataSource = System.Configuration.ConfigurationManager.AppSettings["SQLDataSource"].ToString();
            string SUserID = System.Configuration.ConfigurationManager.AppSettings["SQLUserID"].ToString();
            string SPassword = System.Configuration.ConfigurationManager.AppSettings["SQLPassword"].ToString();

            //Build connection string based on retrieved parameters from web.config file
            string connectionString = "Data Source=" + SDataSource + ";Persist Security Info=True;" + "User ID=" + SUserID + ";Password=" + SPassword;

            using (SqlConnection connection = new SqlConnection())
            {
                connection.ConnectionString = connectionString;
                connection.Open();

                SqlCommand command = connection.CreateCommand();

                command.CommandType = System.Data.CommandType.StoredProcedure;

                // Name of procedure or function to be execu
                command.CommandText = "Get_RequisitionApprovers";

                command.Parameters.Add(new SqlParameter("theEmail", SqlDbType.VarChar)).Value = pEmail;
                command.Parameters.Add(new SqlParameter("LocationType", SqlDbType.VarChar)).Value = pLocationType;

                //Create New DataSET & DataTable
                DataSet dsApprovers = new DataSet();
                DataTable dtApprovers = new DataTable();

                //Create DataTable Columns and define the data type 
                dtApprovers.Columns.Add("Approver1", typeof(string));

                //Add DataTable to DataSource
                dsApprovers.Tables.Add(dtApprovers);

                SqlDataReader reader = command.ExecuteReader();

                while (reader.Read())
                {
                    //Create new Data Row
                    DataRow theRow = dsApprovers.Tables[0].NewRow();

                    theRow[0] = reader[0].ToString() ;   //Add -> Approver

                    dsApprovers.Tables[0].Rows.Add(theRow);
                }

                return dsApprovers;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:16:21.557

正如您在视频中看到的那样，您非常接近于弄清楚这一点。

确保你设置了，`DataTable.TableName`因为如果你不这样做，它就不会序列化。

剩下的就是[设置 WCF 服务](https://www.youtube.com/watch?v=12PGpwy8SUY)并定义`WebMethod`从您的`DataTable`.

设置 WebService 后，定义 WebMethod 并返回 XML，如下所示：

```
//StringWriter requires System.IO
using System.IO;

//This are hypothetical Class and WebMethod names, of course
public class RequisitionApprovers : System.Web.Services.WebService
{
    [WebMethod]
    public string ReturnRequisitionApproversAsXMLString(DataSet ds)
    {
        StringWriter writer = new StringWriter();
        ds.WriteXml(writer, XmlWriteMode.IgnoreSchema);
        string xmlResult = writer.ToString();

        return xmlResult;
    }
} 
```

现在剩下的就是在需要的地方从 xml 字符串中删除 "\r\n" 和空格，最后你会得到一个干净的 xml 字符串来`WebMethod`返回。

# jquery - 在 CodeIgniter 中从 JSON 调用特定的控制器

> ID：14712603
> 
> 赞同：0
> 
> 时间：2013-02-05T16:49:05.857
> 
> 标签：jquery, json, codeigniter

有我的代码：

```
var formObject = {
    run : function(obj) {
        if (obj.val() === '') {
            obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
        } 
        else
       {
            var id = obj.attr('id');
            var v = obj.val();
            jQuery.getJSON('update.php', { id : id, value : v }, function(data) {
                if (!data.error) {
                    obj.next('.update').html(data.list).removeAttr('disabled');
                } else
                {
                    obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                }
            });
        }
    }
};
$(function() {
    $('.update').on("change", function() {
        formObject.run($(this));
    });
}); 
```

我需要调用特定的控制器才能自动填充选择表单。在这行代码中，我调用了一个 url：

```
jQuery.getJSON('update.php', { id : id, value : v }, function(data) 
```

我可以调用一个codeigniter视图而不是这个'update.php'文件，还是我必须以其他方式来做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:15:41.927

```
class Controller{       
    public function mymethod(){     
        //make sure its an ajax request
        if(!$this->input->is_ajax_request())
        {
            show_error('Invalid Request');
            return;
        }           
        if(!$this->input->post('id') OR !$this->input->post('val'))
        {
            echo(json_encode(array(
                'error'  : 1
            )));
            return;
        }
        $query_from_db = ''; //mysql query ?            
        if( $query_from_db )
        {
            //send to browser, no view
            return $this->output
                        ->set_content_type('application/json')
                        ->set_output(json_encode($query_from_db));
        }           
    }
}

/**
 * Put this global var in your main view 
 * So its avail to all your files
**/
var SITE = "<?=site_url()?>";

/** Somefile.js **/
;(function($){

    var formObject = {
        init : function(){
            if($("#formID")) this.run();//only load if a form with specific id exists
        },
        run : function(){
            //limited nested functions
            //only execution
            var update = function(obj){
                //check for empty value
                if(obj.val() == '')
                {
                    obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                    return;
                }

                var data  = {
                    id  : obj.attr('id'),
                    val : obj.val()
                };

                return doAjax(data); //doAjax function execution
            };

            var doAjax = function(data){
                return $.getJSON( SITE + "controller/mymethod", data, function(callback){
                    if(callback.error)
                    {
                        obj.nextAll('.update').html('<option value="">----</option>').attr('disabled', true);
                        return;
                    }

                    obj.next('.update').html(callback.list).removeAttr('disabled');

                });
            };

            $('.update').on("change", function() {
                update($(this));//update function execution
            });
        }
    }               
    $(function(){
        formObject.init();
    });
})(jQuery); 
```

# ember.js - Ember.js pre4 多重嵌套路由

> ID：14712608
> 
> 赞同：3
> 
> 时间：2013-02-05T16:49:45.823
> 
> 标签：ember.js

在 ember.js pre 4 中，我试图实现一个响应以下路由（以及其他路由）的路由：

```
/contact/[id]
/contact/edit
/contact/new
/contact/list
/contact/list/my
/contact/list/team
/contact/list/groups 
```

我可以管理的第一条路线（直到列表）：列表的变体（我的/团队/组）是我苦苦挣扎的地方。我只是得到一个：“没有路由在调用它时出现 URL '/contact/list/my' 错误。

关于如何实现这种嵌套，我尝试了多种变体。这是我目前的尝试：

```
 App.Router.map(function()
    {
        this.route("index");

        this.resource("contact", function(){
            this.route('new');
            this.route('show', { path: "/:contact_id" });
            this.route('edit', { path: "edit/:contact_id" });
        });

        this.resource("contact.list", function(){
            this.route("index");
            this.route("my");
        });

    }); 
```

查看 App.Router.router.recognizer.names：我看到以下输出：

```
contact.edit: Object
contact.index: Object
contact.list.index: Object
contact.list.my: Object
contact.new: Object
contact.show: Object
index: Object
__proto__: Object 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:08:12.993

这似乎对我有用：

```
 App.Router.map(function()
    {
        this.route("index");

        this.resource("contact", function(){
            this.route('new');
            this.route('show', { path: "/:contact_id" });
            this.route('edit', { path: "edit/:contact_id" });
            this.resource("contact.list", { path: "list/" },function(){
                this.route("index");
                this.route("my");
            });
        });
    }); 
```

# c# - 为什么会话状态与表单身份验证状态不同？

> ID：14712610
> 
> 赞同：0
> 
> 时间：2013-02-05T16:49:55.323
> 
> 标签：c#, asp.net, forms-authentication, session-state

也许我错过了一些关于此的基础知识，我只是不明白为什么表单身份验证不是构建在 Session 之上。

我在表单身份验证超时和会话超时方面遇到了一些问题，感谢像这样的博客文章，我了解如何解决这些问题[。](http://itworksonmymachine.wordpress.com/2008/07/17/forms-authentication-timeout-vs-session-timeout/)

但是他们为什么要分开呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:55:43.157

> 我只是不明白为什么表单身份验证没有构建在 Session 之上。

表单身份验证使用在所有应用程序中通用的 cookie。只有当前经过身份验证的用户名存储在 cookie 中。另一方面，会话可以存储任意大的值，因为它存储在服务器上。您不能将任意大数据保存到 cookie 中。会话状态有很多问题。例如，如果您在 Web 场中运行，则需要确保使用进程外会话持久性而不是默认的 InProc，以便 Web 场的所有节点可以共享相同的会话数据。就我个人而言，我从不在我的应用程序中使用会话。我要做的第一件事是确保禁用 web.config 中的所有会话状态：

```
<sessionState mode="Off" /> 
```

这样，我确信从事我项目的开发人员不会犯使用 ASP.NET 会话的错误。它们将原本打算是无状态的 Web 应用程序变成有状态的。

使用 cookie，您就不会遇到这样的问题。您可以将任意数量的节点投放到您的网络农场，以应对不断增加的用户负载，而无需担心服务器上的任何状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:55:51.557

基本的，因为有些人可能选择**只使用其中一个**，并且因为它们是两个不同的模块 - 并且都提供了制作自定义模块的界面。

一个用户也**可以在没有经过身份验证的情况下进行会话**。

还有一些其他人（比如我）可以制作完全自定义的会话模块，但保留身份验证模块。

所以这是两个不同的模块，它们不能连接。

# android - 没有发现处理 intene 的活动（act=Main）

> ID：14712612
> 
> 赞同：0
> 
> 时间：2013-02-05T16:50:08.107
> 
> 标签：android, eclipse

这是我的日志猫错误

> 02-05 16:31:12.441: E/AndroidRuntime(696): 致命异常: Thread-10 02-05 16:31:12.441: E/AndroidRuntime(696): android.content.ActivityNotFoundException: 没有找到处理 Intent 的活动{ act=MAIN } 02-05 16:31:12.441: E/AndroidRuntime(696): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409) 02-05 16:31:12.441: E/AndroidRuntime(696 ): 在 android.app.Instrumentation.execStartActivity(Instrumentation.java:1379) 02-05 16:31:12.441: E/AndroidRuntime(696): 在 android.app.Activity.startActivityForResult(Activity.java:2827) 02- 05 16:31:12.441: E/AndroidRuntime(696): 在 android.app.Activity.startActivity(Activity.java:2933) 02-05 16:31:12.441: E/AndroidRuntime(696): 在 sp.com。 Splash$1.run(Splash.java:26) 02-05 16:31:21.781: I/Process(696): 发送信号。PID：696 SIG：9

这是我的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="sp.com"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>

 <application
    android:icon="@drawable/my_icon"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".SPLASH"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.SPLASH" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Confirm1" >
    </activity>
    <activity android:name=".Malay" >
    </activity>
    <activity android:name=".Stall" >
    </activity>
    <activity android:name=".Western" >
    </activity>
    <activity android:name=".Confirm2" >
    </activity>
    <activity android:name=".Client" >
    </activity>
    <activity android:name=".Chinese" >
    </activity>
    <activity android:name=".MAIN" >
    </activity>
</application>

</manifest>
make i know why i cant run the program? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:03:39.477

您的错误是因为您编辑了清单，并且它不再有任何在其意图过滤器中具有 action.MAIN 的活动。

改变这个：

```
 <intent-filter>
        <action android:name="android.intent.action.SPLASH" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

对此：

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter> 
```

它应该可以正常工作。

# c++ - C++11 中的 CRTP 调度

> ID：14712617
> 
> 赞同：2
> 
> 时间：2013-02-05T16:50:20.223
> 
> 标签：c++, templates, c++11, crtp

假设我有以下代码：

```
template <class Derived>
class Base {
public:
   virtual void foo_impl() = 0;
   void foo() {
      static_cast<Derived*>(this)->foo_impl(); //A
      (*static_cast<Derived*>(this)).foo_impl(); //B
   }
};

class Derived : public Base<Derived> {
private:
   void foo_impl() {
      bar();
   }
}; 
```

几个问题：

A行会产生虚函数调用吗？尽管我在互联网上可以找到的大部分内容都建议以这种方式进行操作，但对我来说，考虑到指向 Derived 的指针实际上仍可能指向 Derived2 类型的对象，我看不到编译器如何进行静态调度：公共派生。

B 行是否解决了我在上一点中提出的问题（如果适用）？考虑到现在调用不再在指针上，因此使用 *. 将避免虚函数调用。但是如果编译器将取消引用的强制转换视为引用类型，它仍然可以生成虚函数调用......在这种情况下，解决方法是什么？

将 C++11 final 关键字添加到 foo_impl() 是否会改变编译器在任一（或任何其他相关）情况下的行为方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:54:26.337

> A行会产生虚函数调用吗？

**是**的。`foo_impl()`是虚拟的并`Derived`覆盖它。即使`foo_impl()`in`Derived`没有*明确*标记为`virtual`，它在基类中，这足以使其成为虚函数。

> B 行是否解决了我在上一点中提出的问题（如果适用）？

**没有**。调用是在指针上还是在引用上都没有关系：编译器仍然不知道您是在*派生自*`foo_impl()`的类的实例上调用函数，还是在 的直接实例上调用函数。因此，调用是通过 vtable 执行的。 *`Derived``Derived`*

 *看看我的意思：

```
#include <iostream>

using namespace std;

template <class Derived>
class Base {
public:
   virtual void foo_impl() = 0;
   void foo() {
      static_cast<Derived*>(this)->foo_impl();
      (*static_cast<Derived*>(this)).foo_impl();
   }
};

class Derived : public Base<Derived> {
public:
   void foo_impl() {
      cout << "Derived::foo_impl()" << endl;
   }
};

class MoreDerived : public Derived {
public:
   void foo_impl() {
      cout << "MoreDerived::foo_impl()" << endl;
   }
};

int main()
{
    MoreDerived d;
    d.foo(); // Will output "MoreDerived::foo_impl()" twice
} 
```

最后：

> 是否添加 C++11 final 关键字来`foo_impl()`更改编译器在任一（或任何其他相关）情况下的行为方式？

**理论上，是**的。该`final`关键字将使得无法在 的子类中覆盖该函数`Derived`。`foo_impl()`因此，当通过指向 的指针执行函数调用时`Derived`，编译器*可以*静态解析调用。但是，据我所知，C++ 标准并不*要求*编译器这样做。

**结论**：

无论如何，我相信你真正想做的不是在基类**中声明**`foo_impl()`函数。当您使用 CRTP 时，通常会出现这种情况。此外，如果您希望它访问的function ，则必须声明 class `Base<Derived>`a 。否则，您可以公开。`friend``Derived``Derived``private``foo_impl()``foo_impl()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T17:41:55.967

CRTP 的常见习惯用法不涉及在基中声明纯虚函数。正如您在其中一条评论中提到的那样，这意味着编译器不会强制定义派生类型中的成员（除了通过*use*，如果`foo`在基类中有任何使用，则需要在`foo_impl`派生类型中存在类型）。

虽然我会坚持常用的习惯用法并且不在基础中定义纯虚函数，但是，如果您真的觉得需要这样做，您可以通过添加额外的限定来禁用动态调度：

```
template <class Derived>
class Base {
public:
   virtual void foo_impl() = 0;
   void foo() {
      static_cast<Derived*>(this)->Derived::foo_impl();
      //                           ^^^^^^^^^
   }
}; 
```

额外限定条件的使用`Derived::`禁用动态调度，并且该调用将静态解析为`Derived::foo_impl`. 请注意，这将出现所有常见的警告：您有一个具有虚函数的类并为每个对象支付虚指针的成本，但是您不能在最派生的类型中覆盖该虚函数，就像在 CRTP 基础中的*使用*一样正在阻止动态调度...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:55:50.053

A 行和 B 行中多余的措辞对生成的代码完全没有影响。我不知道谁推荐这个（我从未见过），但在实践中，它唯一可能产生影响的时候是函数不是虚拟的。只需编写`foo_impl()`，并完成它。

如果编译器知道派生类型，有*一种方法可以避免调用虚函数。*我已经看到它用于类似向量的类（其中有不同的实现，例如向量的正常、稀疏等）：

```
template <typename T>
class Base
{
private:
    virtual T& getValue( int index ) = 0;
public:
    T& operator[]( int index ) { return getValue( index ); }
};

template <typename T>
class Derived : public Base<T>
{
private:
    virtual T& getValue( int index )
    {
        return operator[]( index );
    }
public:
    T& operator[]( index )
    {
        //  find element and return it.
    }
}; 
```

这里的想法是您通常只通过对基类的引用来工作，但如果性能成为问题，因为您`[]`在紧密循环中使用，您可以`dynamic_cast`在循环之前访问派生类，并`[]`在派生类上使用。*

# git - SVN 到 Git。新分支与新来源

> ID：14712619
> 
> 赞同：1
> 
> 时间：2013-02-05T16:50:24.097
> 
> 标签：git, svn, directory

我们正在从 SVN 迁移到 Git。

我在我们的服务器上设置了空的 Git 存储库。在我的本地机器上设置一个工作目录，并将完整的源代码从 SVN repo 下载到这个本地文件夹（工作目录）。我将所有这些文件推送到 master 分支并创建了两个分支，`dev`并且`staging`. 这一切都很好。

现在我想创建一个新的分支`v1.0`，使用完全不同的源（很多新功能）。我的计划是创建一个名为的新工作目录（本地文件夹）`v1.0`并将源（从另一个 SVN 存储库）导入到该文件夹​​。我想将此文件夹指向`v1.0`分支。

有人可以解释如何做到这一点的步骤吗？（我对 Git 还很陌生）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:57:04.777

如果项目完全不同，创建一个单独的 git repo 更有意义。从 svn 到 git 的主要理念变化是更喜欢为每个逻辑模块（例如库、程序等）拥有多个存储库。

但是，如果你真的想拥有一个带有 git 的 repo，你可以创建一个孤立分支：`git checkout --orphan v1.0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:30:45.270

如果我理解正确，您目前根本不关心将 svn-history 保存在您的 git 存储库中，为什么不做一些简单的事情：

```
$ cd project
$ git checkout -b v1.0
$ rm all files not needed
$ # the above could also just be "rm *", just be careful to not delete .git
$ cp -r /path/to/project-1.0/* .
$ git add .
$ commit -a -m "imported v1.0" 
```

git 应该自己找出哪些文件没有被触及，或者重命名，或者......

并将所有内容都放在一个存储库中，可以轻松挑选（在可能的情况下）

# c++ - 读取所有网络连接

> ID：14712624
> 
> 赞同：0
> 
> 时间：2013-02-05T16:50:33.270
> 
> 标签：c++, sockets, network-programming

我想阅读程序网络连接并列出它们。但我完全不知道该怎么做。挂钩套接字函数不是很聪明。

我需要这个来编写私人服务器。

怪异的

# jsf - 使用发送 HTTP POST 请求到外部站点

> ID：14712626
> 
> 赞同：5
> 
> 时间：2013-02-05T16:50:34.940
> 
> 标签：jsf, primefaces

`<h:form>`我想使用组件向另一台服务器发送 HTTP 发布请求。

我可以使用 HTML 组件向外部站点发送 POST 请求`<form>`，但`<h:form>`组件不支持此功能。

```
<form action="http://www.test.ge/get" method="post">
    <input type="text" name="name" value="test"/>
    <input type="submit" value="CALL"/>
</form> 
```

我怎样才能做到这一点`<h:form>`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T17:01:48.417

不能`<h:form>`用于提交到另一台服务器。默认情况下`<h:form>`提交到当前请求 URL。此外，它会自动添加额外的隐藏输入字段，例如表单标识符和 JSF 视图状态。此外，它会更改由输入字段名称表示的请求参数名称。这一切都会使它不适合将其提交到外部服务器。

只需使用`<form>`. 您可以在 JSF 页面中完美地使用纯 HTML。

* * *

**更新**：根据评论，您的*实际*问题是您不知道如何处理从您要发布到的 web 服务获得的 zip 文件，并且您实际上正在寻找错误方向的解决方案。

只需继续使用 JSF`<h:form>`并使用其通常的客户端 API 提交到 Web 服务，一旦你得到了 ZIP 文件`InputStream`（请不要`Reader`按照评论中的指示包装它，一个 zip 文件是二进制内容而不是字符内容），就通过`ExternalContext#getResponseOutputStream()`如下方式将其写入 HTTP 响应正文：

```
public void submit() throws IOException {
    InputStream zipFile = yourWebServiceClient.submit(someData);
    String fileName = "some.zip";

    FacesContext fc = FacesContext.getCurrentInstance();
    ExternalContext ec = fc.getExternalContext();
    ec.responseReset();
    ec.setResponseContentType("application/zip");
    ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\"");
    OutputStream output = ec.getResponseOutputStream();

    try {
        byte[] buffer = new byte[1024];
        for (int length = 0; (length = zipFile.read(buffer)) > 0;) {
            output.write(buffer, 0, length);
        }
    } finally {
        try { output.close(); } catch (IOException ignore) {}
        try { zipFile.close(); } catch (IOException ignore) {}
    }

    fc.responseComplete();
} 
```

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237q)

# django - 导入模型以将查询封装在属性中会导致循环导入问题

> ID：14712629
> 
> 赞同：0
> 
> 时间：2013-02-05T16:50:41.097
> 
> 标签：django, django-models, circular-dependency, project-structure

我的问题如下：有一段时间，我习惯于将我的应用程序的一些（最相关和可重用的）查询封装在我的 Django 模型中的属性中。

为此，我经常这样做：

```
from my_app.models import ModelBla

.....

class ModelBlehhh():
    @property
    def some_bla_things(self, bla):
        return ModelBla.objects.filter(.....) 
```

我一直认为这是一种很好的做法，并且在我的应用程序中经常使用它们中的大多数。

问题是：这些主要用于查询的导入声明妨碍了我的模型的关系结构。含义：在不创建循环导入问题的情况下，我无法创建用于查询的属性变得越来越频繁。

我的方法正确吗？有没有更好的方法来封装这些查询？你平常都做什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:15:40.870

我根本不明白你为什么需要这些属性，更不用说导入了。

如果您要根据当前模型过滤其他模型，那一定意味着您与该模型有关系。如果你有一个关系，那么你应该使用自动向后关系。所以与其说`SomeOtherModel.objects.filter(blah=self)`，你应该做`self.someothermodel_set.all()`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:55:55.227

```
Is there a better way to encapsulate these queries? 
```

实际上，你不应该让循环依赖吞噬你，而是去移除它。这将增加您在项目后期对数据库的访问。您可以通过仅在此阶段重新定义您的结构来删除循环导入，否则将来不及重构和纠正您错误的地方。

```
What do you usually do? 
```

基本上，这不是其他人所做的。这取决于您的应用程序的范围。如果您的应用程序是长期应用程序，那么您所做的就是错误的。只需制作一个可用于所有代码的存储库，并且代码可以在需要时访问它，而无需任何循环导入，即没有任何依赖关系。

# python - z3 在解析 SAT 模型时伪随机挂起

> ID：14712631
> 
> 赞同：0
> 
> 时间：2013-02-05T16:50:45.653
> 
> 标签：python, z3

我正在使用可用的 Python Z3 API 并使用非常标准的代码打印出 SAT 模型。

我将忽略无关的位（此处的[完整示例](http://nfgen.googlecode.com/svn/trunk/z3_py/share/fsm_rd_001.py "完整的示例代码在这里")），不管这里是大局：

```
for bits in range(HIGH, LOW, -1):
    var1, var2 ... varn = BitVecs('var1 var2 ... varn', bits)
    s = Solver();
    s.add(...)
    ...

    if(s.check() == sat):
      print "Sat, %d," %(bits),
      m = s.model()
      for d in m.decls():
          print "%s," % (d.name()),
      print " "
      print "ASSIGN, %d," %(bits),
      for d in m.decls():
          print "%s," % (m[d]),
    else:
       print "NotSat, %d," %(bits),
       print " "
       break
    print " " 
```

我得到的结果看起来像这样（95% 的时间）：

```
Sat, HIGH, VAR1, VAR2, VAR3 ... VARn
ASSIGN, HIGH, VAL1, VAL2, VAL3 ... VALn
Sat, HIGH-1, VAR1, VAR2, VAR3 ... VARn
ASSIGN, HIGH-1, VAL1, VAL2, VAL3 ... VALn
...
NotSat, SOMEVAL 
```

**但这是伪随机发生的（它只发生在特定问题上，但每次都在同一点再次发生）：**

```
Sat, HIGH, VAR1, VAR2, VAR3 ... VARn
ASSIGN, HIGH, VAL1, VAL2, VAL3 ... VALn
Sat, HIGH-1, VAR1, VAR2 
```

此时，python 继续无休止地运行。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:50:27.147

您在上面的链接中放置的脚本没有问题。只是很难解决`bits=6`. 可能无法满足，但Z3需要很长时间才能证明这一点。我附上了我在帖子末尾得到的输出。如果输出在您的系统中被截断，您可以尝试使用

```
sys.stdout.flush() 
```

在每次迭代结束时。它将强制 Python 将结果刷新到标准输出。当 Z3 不能在 x 毫秒内解决问题时，您也可以使用超时来中断 Z3。例如，要设置 60 秒的超时，您应该在后面包含以下命令`s = Solver()`

```
s.set("timeout", 60000) 
```

Z3 将返回`unknown`而不是`unsat`在达到超时时返回。您可以决定将超时解释为“可能” `unsat`。您也可以强制 Z3 显示详细消息。您可以使用它们来检查是否已死亡。要启用详细消息，我们应该包括

```
set_option("verbose", 10) 
```

Z3 将显示许多消息，例如：

```
(sat-restart :conflicts 28553852 :decisions 35506087 :restarts 39751 :clauses 11002 :learned 297311 :gc-clause 28045187 :memory 103.26 :time 6557.84) 
```

这是您的脚本在我的机器上生成的输出：

```
Sat, 28, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 28, 1194488, 20123428, 138352652, 27828345, 8323715, 255074345, 148059146, 45669120, 59311259, 36160098, 43520123, 171745797, 20100107, 55836791, 87065373, 174311427, 325679, 44106461, 17417102, 146868180, 120734802, 3190244, 68039782, 159445796, 61293076, 17065817, 207814763, 50496350,  
Sat, 27, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 27, 127374544, 2292862, 99672473, 2675455, 109553908, 31909971, 59861451, 41730414, 54510094, 63370004, 130863, 98670875, 52005358, 117596054, 103086442, 102094768, 85953361, 12855291, 113728523, 132186876, 133366378, 112477583, 20121855, 8079423, 95241842, 15701556, 108466982, 15861679,  
Sat, 26, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 26, 3948768, 14692617, 19776512, 120332, 24121729, 17236013, 34409608, 59052072, 34681936, 1114895, 13634601, 57705476, 2457863, 389249, 33615106, 34546177, 24264721, 21889794, 1217858, 34496580, 50476161, 50346252, 3080465, 34345251, 6372864, 42188865, 18025490, 5243087,  
Sat, 25, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 25, 21548816, 14681017, 11618883, 6687600, 17326840, 22114504, 25792662, 12517432, 12183, 20008097, 18027047, 324389, 17106676, 16967429, 29899522, 5050707, 29494411, 3188854, 11813403, 22317095, 3749937, 3097638, 741939, 21964992, 838083, 13687553, 33226832, 3673677,  
Sat, 24, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 24, 16510219, 16682171, 15519598, 10477281, 10481616, 11514364, 15334059, 14871548, 12107387, 14782459, 196543, 3931864, 12516875, 15925188, 15121231, 15631351, 3145572, 258039, 5197787, 3799546, 9433947, 785909, 1699323, 1569788, 9158599, 3662718, 3407842, 16662241,  
Sat, 23, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 23, 4337951, 7815728, 1113412, 31704, 1209944, 2591336, 857041, 1035016, 117610, 582206, 6597155, 6615137, 8129736, 5134355, 3227767, 471536, 3937363, 5257644, 6411017, 3152566, 1937690, 728177, 2962482, 4215659, 56802, 5118725, 6276097, 257728,  
Sat, 22, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 22, 312133, 421384, 1109512, 2098659, 1835070, 2388161, 1193540, 3289102, 3752454, 503811, 1012736, 3020290, 1313415, 77903, 3160288, 14050, 1852864, 281355, 3023648, 1089598, 1967040, 819952, 1753640, 21149, 487472, 1878019, 1197319, 1262740,  
Sat, 21, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 21, 64995, 390953, 1700562, 1302766, 1187453, 1314795, 842519, 1785696, 1988188, 1849171, 1571340, 1862031, 28668, 193211, 1179395, 1040004, 1226595, 1545878, 1328063, 2093106, 1139447, 799486, 383535, 2040975, 687303, 1112985, 1388153, 1241406,  
Sat, 20, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 20, 93862, 686853, 903880, 373532, 698796, 985932, 43949, 858080, 174578, 47915, 130848, 963016, 918415, 306040, 64325, 905514, 989578, 176359, 258604, 409504, 749645, 111586, 142798, 137078, 109451, 983229, 191657, 593861,  
Sat, 19, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 19, 339712, 331803, 160304, 13928, 53404, 107824, 136717, 102988, 67639, 319526, 265153, 132127, 145954, 156321, 86314, 284993, 343104, 8659, 329392, 25444, 20229, 52880, 73837, 251, 337296, 319499, 394354, 312610,  
Sat, 18, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 18, 69753, 52231, 229778, 3667, 247041, 206608, 53302, 208400, 61705, 69959, 3025, 43654, 181002, 65024, 53554, 78001, 160066, 90892, 213698, 188612, 1009, 74179, 90761, 127744, 78897, 78371, 200264, 258052,  
Sat, 17, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 17, 94080, 86358, 31782, 34292, 13221, 59266, 21383, 83749, 36259, 46854, 69743, 19914, 49596, 99267, 90828, 117346, 47637, 81456, 35700, 61188, 106663, 95584, 9133, 36216, 99132, 99996, 53923, 45459,  
Sat, 16, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 16, 40904, 29469, 60171, 20719, 15453, 46111, 50767, 7759, 63596, 21475, 63057, 52579, 60569, 19687, 24401, 31907, 64588, 56560, 49885, 62755, 48930, 7981, 62356, 48325, 32394, 3919, 57407, 58322,  
Sat, 15, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 15, 32194, 19956, 13227, 25303, 17374, 10815, 24304, 5607, 24348, 32193, 1918, 11934, 15820, 25935, 11118, 4074, 8702, 22939, 24402, 32200, 4028, 29086, 30003, 32530, 29046, 29372, 29790, 29925,  
Sat, 14, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 14, 1889, 9448, 3378, 8787, 4316, 2520, 711, 1008, 4875, 12380, 4810, 12690, 1714, 5968, 9034, 411, 811, 5646, 7224, 7685, 7944, 15440, 461, 7104, 14418, 4840, 4217, 3040,  
Sat, 13, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 13, 6647, 5951, 7359, 7805, 3069, 6007, 7119, 7791, 1023, 5879, 2943, 7023, 8051, 1791, 7925, 8079, 6071, 4607, 2015, 6651, 7667, 2815, 7487, 7421, 6847, 5883, 5999, 8118,  
Sat, 12, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 12, 1823, 1788, 3064, 3727, 1271, 3309, 3546, 3790, 955, 3562, 3825, 1499, 2287, 2539, 1767, 3869, 3419, 2934, 4017, 3495, 3050, 1655, 2033, 1532, 2686, 2877, 3036, 1935,  
Sat, 11, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 11, 1973, 751, 1782, 1771, 1523, 983, 1913, 735, 2019, 1963, 1991, 507, 958, 1018, 1275, 1659, 2003, 1263, 1343, 1847, 1375, 2034, 1907, 1899, 1532, 1463, 503, 1011,  
Sat, 10, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 10, 132, 9, 66, 40, 320, 5, 33, 136, 260, 96, 3, 20, 258, 130, 264, 17, 36, 129, 528, 10, 48, 384, 288, 65, 544, 514, 12, 80,  
Sat, 9, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 9, 416, 37, 388, 208, 22, 352, 274, 322, 112, 268, 193, 104, 196, 266, 385, 146, 296, 56, 11, 70, 69, 138, 336, 448, 324, 35, 261, 176,  
Sat, 8, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 8, 197, 46, 105, 225, 201, 60, 99, 92, 15, 150, 113, 149, 51, 27, 210, 53, 172, 163, 184, 54, 23, 57, 216, 240, 156, 43, 178, 29,  
Sat, 7, st14, st20, st9, st17_n, st3, st6_n, st15, st10, st15_n, st1, st11, st18, st19, st4_n, st5, st9_n, st8, st2, st2_n, st16, st6, st17, st13, st16_n, st4, st7, st12, st19_n,  
ASSIGN, 7, 46, 45, 15, 77, 78, 114, 57, 83, 108, 51, 106, 113, 23, 120, 43, 54, 92, 105, 60, 30, 71, 102, 53, 75, 29, 27, 89, 58, 
```

# c# - 将元素添加到对象列表时出错

> ID：14712632
> 
> 赞同：1
> 
> 时间：2013-02-05T16:50:50.297
> 
> 标签：c#, list, object

我希望动态创建对象并将其保存到列表中。当程序到达`add`在列表中添加对象的方法时，我得到一个错误：

> 你调用的对象是空的。

我在这里做错了什么？

```
List<Category> categoryList;

public Main(string firstname, string lastname, string status)
{
    InitializeComponent();
    label1.Text = (firstname + lastname + status).Trim();

    string connection = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\Trgovina.mdf;Integrated Security=True";
    SqlConnection cn = new SqlConnection(connection);

    try
    {
        cn.Open();
    }
    catch (Exception) { MessageBox.Show("Error occurred during database communication!"); }

    string sqlQuery = "SELECT * FROM Kategorije_art";
    SqlCommand categoryCommand = new SqlCommand(sqlQuery, cn);
    SqlDataReader categoryDataRead = categoryCommand.ExecuteReader();

    categoryList.Add(new Category(1, "a")); //ERROR ?!
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T16:52:45.993

您必须实际创建`List`实例

```
List<Category> categoryList= new List<Category>(); 
```

在第一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T16:54:38.410

您的成员 categoryList 未初始化。

尝试：

```
List<Category> categoryList = new List<Category>();

public Main(string firstname, string lastname, string status)
{
    InitializeComponent();
    label1.Text = (firstname+lastname+status).Trim();

    string connection = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\Trgovina.mdf;Integrated Security=True";
    SqlConnection cn = new SqlConnection(connection);

    try 
    {
        cn.Open();
    }
    catch (Exception) { MessageBox.Show("Error occurred during database communication!"); }

    string sqlQuery = "SELECT * FROM Kategorije_art";
    SqlCommand categoryCommand = new SqlCommand(sqlQuery, cn);
    SqlDataReader categoryDataRead = categoryCommand.ExecuteReader();

    categoryList.Add(new Category(1, "a")); //ERROR ?!
} 
```

另请注意，您可能应该将 SqlConnection 放在 using 块中，或者至少在其上调用 Close/Dispose，这样您就不会泄漏连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T16:52:41.767

你`categoryList`的没有初始化。将第一行更改为：

```
List<Category> categoryList = new List<Category>(); 
```

当您尝试访问`.Add(...)`空值的方法时，会出现空引用异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:13:45.117

您的错误行应如下所示：

```
categoryList = new List<Category>() { new Category(1,"a")}; 
```

所以您创建列表并添加一个创建的元素并将对该列表的引用存储在`categoryList`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T16:53:08.833

您命名`categoryList`的变量未初始化。所以它是空的。

您不能在未初始化的变量上调用任何方法。

尝试 ：

```
List<Category> categoryList= new List<Category>(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T16:53:18.560

你创造`categoryList = new List<Category>()`吗？

# php - 多个 curl 请求，何时关闭句柄？

> ID：14712633
> 
> 赞同：4
> 
> 时间：2013-02-05T16:50:53.470
> 
> 标签：php, curl

我对 curl`init()`和`close()`函数感到困惑。我想知道在每种情况下何时应该关闭 curl 句柄：
1\. 使用单个句柄来获取具有不同选项的“单个”URL。例如：

```
$curl=curl_init('google.com');
curl_setopt($curl,CURLOPT_FOLLOWLOCATION,true);
curl_exec($curl); 
```

现在我想将 FOLLOWLOCATION 设置为 false。我应该做 curl_close($curl)，然后从头开始做所有事情，或者只是设置选项并像这样再次执行它：

```
curl_setopt($curl,CURLOPT_FOLLOWLOCATION,false);
curl_exec($curl); 
```

2.使用单个句柄获取“多个” URL。例如：

```
$curl = curl_init('google.com');
curl_exec($curl); 
```

现在我想获取 stackoverflow.com。我应该关闭句柄并从头开始，还是我可以设置另一个 URL 而无需关闭句柄。像这样：

```
$curl = curl_init('stackoverflow.com');
curl_exec($curl); 
```

3.使用多个句柄获取多个 URL。这是我的代码：

```
$CONNECTIONS=10;
$urls=fopen('urls.txt','r');
while(!feof($urls))
{
   $curl_array=array();
   $curl=curl_multi_init();
   for($i=0;$i<$CONNECTIONS&&!feof($urls);$i++)             
            //create 10 connections unless we have reached end of file
   {
        $url=fgets($urls);                    //get next url from file
        $curl_array[$i]=curl_init($url);      
        curl_multi_add_handle($curl,$curl_array[$i]);
   }
   $running=NULL;
   do
   {
       curl_multi_exec($curl,$running);
   }while($running>0);
   for($i=0;$i<$CONNECTIONS;$i++)    
   {
       $response=curl_multi_getcontent($curl_array[$i]);
       curl_multi_remove_handle($curl,$curl_array[$i]);
       curl_close(($curl_array[$i]));
   }
   curl_multi_close($curl);
} 
```

可以看到：获取到每个单句柄的内容后，我从多句柄中取出句柄，关闭单句柄，然后在for循环后关闭多句柄。这种做法是正确的还是我过度关闭了把手？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:02:43.193

> 什么时候关闭手柄？

简而言之，完成后关闭它。

要解决您的具体问题：

1.  如果您打算重用 curl 句柄（单个资源），请在完成后将其关闭。
2.  如果您有多个 curl 句柄（多个资源），您可以将它们与显示的`curl_multi_*`函数一起运行，或者按顺序运行它们并在使用完该资源后关闭 curl 句柄（参见 #1）。
3.  这对我来说是正确的。

请注意，如果您正在重用 curl 句柄，请注意缓存、重定向和其他可能影响对同一资源的多个请求的[选项设置。](http://www.php.net/manual/en/function.curl-setopt.php)

我鼓励你开发你的代码来请求每个资源一次。

# javascript - javascript中的函数有作用域吗？

> ID：14712635
> 
> 赞同：3
> 
> 时间：2013-02-05T16:50:59.797
> 
> 标签：javascript, scope

如果函数有范围，它们应该在该范围内执行，但在这里我认为它是不同的查看代码：

```
function foo() {
    var privateVal = "Private Val";
    this.publicVal = "Public Val";

    var privateAlert = function (str) {
        alert(str + this.publicVal);
        alert(str + privateVal);
    }

    this.Run = function () //see here
    {
        privateAlert("Private Call: ");

        this.publicAlert = privateAlert;
        this.publicAlert("Public Call: ");

        privateAlert = this.publicAlert;
        privateAlert("Private Call: ");
        this.publicAlert("Public Call: ");
    }
}

var bar = new foo();
bar.Run(); 
```

当新对象创建时，`Run()`成为对象的公共方法或仅属于 var 的方法`bar`。该方法不应该能够从其中执行该`privateAlert()`函数；因为函数有作用域，它只能在它被声明的函数内执行，但是这个函数已经失去了它被创建的作用域并且它仍然被执行。请澄清一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:58:01.947

简单的解释：

1.  在函数内部声明的任何变量都不能在该函数外部访问。
2.  内部函数可以访问在其外部作用域上声明的变量（参见[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)）。

因此，您可以调用`privateAlert`from，`Run`因为两者都已在`foo`.

还有一件事：`Run`不是的私有方法，*而是*`bar`公共方法。

# java - Spring for Android 放。无法获取响应码

> ID：14712637
> 
> 赞同：0
> 
> 时间：2013-02-05T16:51:00.580
> 
> 标签：java, android, spring

我正在为 Android 使用 Spring，在使用 PUT 请求时我无法得到响应。有什么办法可以让这个工作吗？我真的很喜欢 android 的 spring，但我不知道如何得到它

[http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/#d4e146](http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/#d4e146)

这些是我正在谈论的方法：

```
 public void put(String url, Object request, Object... urlVariables) throws RestClientException;

 public void put(String url, Object request, Map<String, ?> urlVariables) throws RestClientException;

 public void put(String url, Object request, Map<String, ?> urlVariables) throws RestClientException; 
```

谢谢！

# hyperlink - mvc3 可点击链接转为明文

> ID：14712638
> 
> 赞同：1
> 
> 时间：2013-02-05T16:51:04.157
> 
> 标签：hyperlink, plaintext

有没有办法让我的网站以纯文本或某种形式显示标签和里面的内容？这样有些人可以复制整个事情..

我努力了

```
<plaintext>
<a href="mysite">my website</a>

</plaintext> 
```

但明文搞乱了所有其他标签......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:03:07.517

尝试用`<`和`&lt;` 替换each `>`，`&gt;`这样

```
<a href="mysite">my website</a> 
```

变成

```
&lt;a href="mysite"&gt;my website&lt;/a&gt; 
```

并在浏览器中呈现为

`<a href="mysite">my website</a>`

代替

> 我的网站

# xslt - for-each 不适用于我的 xslt

> ID：14712641
> 
> 赞同：0
> 
> 时间：2013-02-05T16:51:13.730
> 
> 标签：xslt, filemaker

尽管进行了广泛的搜索，但我遇到了一个无法解决的问题...这是 XML 的一部分。

```
<contributors>
<authors>
<author>Willett, C G</author>
<author>Tepper, J E</author>
<author>Kaufman, D S</author>
<author>Shellito, P C</author>
<author>Eliseo, R</author>
<author>Convery, K</author>
<author>Wood, W C</author>
</authors>
</contributors> 
```

我尝试使用此 xsl（摘录）将所有作者导入 Filemaker 单元格

```
<FIELD EMPTYOK="YES" MAXREPEAT="15" NAME="Author" TYPE="TEXT"/>
    <COL>
<DATA>
<xsl:for-each select="contributors/authors">
<xsl:value-of select="author">
</xsl:value-of>
</xsl:for-each>
</DATA>
</COL> 
```

不幸的是，只导入了名字。为什么？少了什么东西？

如果有人可以帮助我会很高兴...

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:57:17.373

您需要遍历`author`s，而不是遍历 s，`authors`因为只有一个`authors`，但有很多`author`s：

```
<xsl:for-each select="contributors/authors/author">
    <xsl:value-of select="concat(., ' ')" />
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:22:54.360

```
<FIELD EMPTYOK="YES" MAXREPEAT="15" NAME="Author" TYPE="TEXT"/>
  <COL>
    <DATA>
      <xsl:for-each select="contributors/authors/author">
        <xsl:value-of select="."/>
        <xsl:if test="position() &lt; last()">; </xsl:if>
      </xsl:for-each>
    </DATA>
  </COL> 
```

这将生成所有作者值的分号分隔列表。`<xsl:if>`那里是为了避免在最后一个作者姓名之后添加尾随分号。

# entity-framework - Entity Framework 5 - 从数据库加载实体后寻找执行自定义代码的中心点

> ID：14712645
> 
> 赞同：12
> 
> 时间：2013-02-05T16:51:35.853
> 
> 标签：entity-framework, entity-framework-5

我正在使用 Entity Framework 5 和 Code First 方法，并使用 Fluent API 进行实体配置。我的项目有一个特定的产品实体，它的一半数据来自数据库，另一半来自通过 WCF 客户端检索的数据合同（它是用于管理产品库存的第 3 方系统）。Data Contract 是 Product Entity 类的成员（我还没有决定的属性或方法）。

我不希望实体中包含任何 WCF 客户端逻辑。我更愿意将此逻辑保留在存储库代码（DbContext、DbSet 等）中。

那么在从数据库中检索到产品实体之后，是否有一种技术可以连接到实体框架（或拦截）？我应该注意到产品实体作为导航属性出现在其他实体上。如果挂钩或拦截是可能的，那么这意味着我可以在 EF 从数据库加载产品实体后立即从 SOAP 服务检索数据协定。我的项目的好处是 WCF 客户端检索代码不需要在整个应用程序中重复。

我的一个想法是为 Data Contract 实现 IDbSet，而 IDbSet 将负责检索它。然后以某种方式欺骗 EF 认为它是产品实体上的导航属性。但我不确定数据库 DbSet 是否可以在同一个 DbContext 中与非数据库 IDbSet 混合。还有另一个问题 - EF 如何知道从 IDbSet 植入中检索导航属性？在投入时间之前，我想知道这个想法是否可行。我也想知道从哪里开始寻找。

请注意，我使用 .NET 已经超过 10 年了，但是这个 EF5 的东西对我来说还是比较新的。

提前致谢。

-山姆

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T00:06:33.200

今天我在实体框架中发现了一个似乎是我正在寻找的事件。[ObjectContext.ObjectMaterialized 事件](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.objectmaterialized.aspx)。显然，DbContext 实现了 IObjectContextAdapter，而后者又公开了 ObjectContext。从那里我可以订阅 ObjectMaterialized 事件。

> *MSDN 读取*：在作为查询或加载操作的一部分从数据源中的数据创建新实体对象时发生。

下面的代码演示了我如何使用 ObjectMaterialized 事件来解决我的问题，其中我的一个偏好是有一个中心点来放置 WCF 客户端访问逻辑。

```
// seperate assembly - does not use Domain.Repositories assembly
namespace Domain.Models
{
    // the data contract
    [DataContract]
    public class ProductInventoryState
    {
        [DataMember]
        public int StockStatus { get; set; }

        [DataMember]
        public IEnumerable<String> SerialNumbers { get; set; }

        // etc....
    }

    // the entity
    public class Product
    {
        public Guid Key { get; set; }
        public string ProductCode { get; set; }
        public ProductInventoryState InventoryState { get; set; }
        // etc....
    }
}

// seperate assembly - uses Domain.Models assembly
namespace Domain.Repositories
{
    public class MainRepository : DbContext
    {
        public MainRepository()
        {
            ((IObjectContextAdapter)this).ObjectContext.ObjectMaterialized += ObjectContext_ObjectMaterialized;
        }

        protected void ObjectContext_ObjectMaterialized(object sender, ObjectMaterializedEventArgs e)
        {
            if (e.Entity == null)
                return;

            if (e.Entity is Product)
            {
                Product product = (Product)e.Entity;

                // retrieve ProductInventoryState from 3rd party SOAP API
                using (ThirdPartyInventorySystemClient client = new ThirdPartyInventorySystemClient())
                {
                    // use ProductCode to retrieve the data contract
                    product.InventoryState = client.GetInventoryState(product.ProductCode);
                }
            }
        }    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:10:34.943

1.）您可以编写自己的 EF 提供程序（但这不是一项小任务）

2.) 您可以将项目附加到上下文但不能保存它们。

entity.State 可以设置为附加后不修改。您还可以在保存更改之前从上下文中删除此类条目

3）您可以编写一个存储库门面，检查 EF 并检查位置 2 并组合结果。

关于导航属性的问题。您需要非常仔细地指定这些以避免出现问题。没有延迟加载，甚至没有建模。

我不会尝试亲自混合它们。
您可以告诉 EF 忽略某些属性。因此，您可以拥有一个不错的原始 POCO，但仅对数据库上的位进行建模。

然后 POCO 将收集其余部分。

我自己使用带有事件的门面来作用于上下文/DBset 上的 KEY 方法。所以我可以触发附加、获取、保存等事件。

祝你好运

# ruby-on-rails - 如何选择存在属性的模型

> ID：14712650
> 
> 赞同：0
> 
> 时间：2013-02-05T16:51:44.357
> 
> 标签：ruby-on-rails

对于这个问题的简单性，我真的很抱歉——我似乎有某种记忆失误！

如果 models.where(:colour => 'green').count 给出颜色属性为绿色的模型数量，我如何计算完全有颜色的模型数量？

models.where(:colour => true).count 显然不对...

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:00:10.293

使用`IS NOT NULL`：

```
models.where("colour IS NOT NULL").count 
```

# java - 如果在 Eclipse 中调用“Open Call Hierarchy”仅返回运行检查的方法，这意味着什么？

> ID：14712651
> 
> 赞同：2
> 
> 时间：2013-02-05T16:51:44.977
> 
> 标签：java, methods, call, hierarchy

我在 java 应用程序源代码中的 someMethod() 上调用“Open Call Hierarchy”。在结果窗口中，我只能看到 someMethod() 而没有任何其他方法。

“Open Call Hierarchy”的设置设置如下： 字段访问：所有参考 搜索范围：Sources、Required Projects、JRE Libraries 和 Application libraries 搜索范围：Workspace 最大调用深度：99（没有其他设置过滤器）

使用这些选项，我假设我的范围设置为在我的 Eclipse 工作区中签出的所有内容（所有代码）。

假设由于没有找到调用方方法，应用程序不使用 someMethod() 是否安全？

如果没有，你能帮我理解还有什么可以调用这个方法吗？我怎么知道是否有任何东西使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:59:18.083

可能存在通过反射和来自“Open Call Hierarchy”命令未搜索的本机方法的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:54:17.770

当我遇到这样的问题时，我通常只是简单地使用 Eclipse 功能 Search->File... 在工作区中的所有相关文件中搜索一个方法。这也将涵盖那些反射情况和本机用法，除非方法名是由迭代或其他动态构造确定的。

# asp.net - 在 web.config 中指定了错误的模块

> ID：14712653
> 
> 赞同：0
> 
> 时间：2013-02-05T16:51:48.727
> 
> 标签：asp.net, web-config

视觉工作室 2010

我的项目中引用了 System.Web.MVC 2 和 System.Web.Routing 4。

```
<add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
<add assembly="System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
```

指定模块时出现以下错误：

```
<add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule,System.Web.Routing, Version=4.0.0.0,Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

> 错误：指定了错误的模块。System.Web，版本 4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a

注意：我正在将 Kentico CMS 升级到新版本，他们现在也在使用路由。升级文档要添加一个3.5.0.0版本的模块。因为我引用了 4.0 版，所以我不能做 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:58:53.030

尝试

```
<add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /> 
```

# php - 寻找一种方法来检测使用 PHP 禁用的 javascript（不想在 html 中使用 noscript）

> ID：14712657
> 
> 赞同：1
> 
> 时间：2013-02-05T16:51:59.313
> 
> 标签：php, javascript

我想知道用户是否启用了 javascript，并且我不想在 HTML 中使用 no script 标签，因为我不希望用户下载 JavaScript 和 no script 标签的额外脚本。

有人有想法吗？

提前致谢，Din Bracha

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:57:20.150

您可以使用 AJAX 请求一个 php 页面，您可以在其中设置一个 cookie，该 cookie 将用作 JS 激活的标志。在 js 脚本中，您可以检查是否存在 cookie，如果已设置，则表示用户启用了 JS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:57:39.753

不幸的是，这不是您可以做到的。PHP 代码通常在浏览器呈现任何代码之前完全执行。

浏览器中 Javascript 的禁用不会在初始标头请求中报告给 PHP。您可以做的最接近的方法是使用 Javascript 对 PHP 进行 AJAX 调用以检测是否存在 Javascript。如果回调失败，那么您可以假设它已被禁用。

类似的问题：[PHP 可以检测 javascript 是否开启？](https://stackoverflow.com/questions/2172417/can-php-detect-if-javascript-is-on-or-not)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:59:14.977

```
test.php

<script>
//// query string
if(/[?&]js=1/g.test(window.location.href) == false)
    window.location.href += (window.location.href.indexOf("?") == -1 ? "?" : "&") + "js=1";
//// OR session cookie
if(document.cookie.search(/(^|;)js=1/) == -1) {
     document.cookie = "js=1; path=/";
     document.location.reload();
}
</script>

<?php
$_GET["js"];
////
$_COOKIE["js"];
?> 
```

有很多方法可以做到这一点。使用 JavaScript 在客户端设置 cookie，然后重新加载页面，或者执行上述操作并将查询字符串添加到 URL。PHP 可以检查 cookie 或查询字符串并设置会话变量，说明该用户启用了 JS。

# php - 无法通过 PHP 连接到 Access 数据库

> ID：14712661
> 
> 赞同：0
> 
> 时间：2013-02-05T16:52:12.210
> 
> 标签：php, ms-access, connection-string

我必须通过 PHP 建立与 Access 数据库的连接，但每次尝试时都会出现此错误：

> 致命错误：未捕获的异常“com_exception”

带消息：

> '**来源：** Microsoft OLE DB
> 服务组件
> **描述：** Das Format der Initialisierungszeichenfolge entspricht nicht den OLE DB-Angaben。在 E:\path\to\phpfile.php:93
> 堆栈跟踪：#0 E:\path\to\phpfile.php(93): com->Open('DRIVER={Microso...') #1 {主要}投入

德语文本的意思是“初始化字符串的格式在 OLE DB 语句中并不常见。

我的连接代码看起来像

```
$db = 'DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=" & Server.MapPath("\") & ("\\db\\db.mdb") & ";"';
$conn = new COM("ADODB.Connection"); 
$conn->Open($db); 
```

我不知道出了什么问题。在纯 ASP 中它可以正常工作，但在 PHP 中则不行。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:04:53.810

不要使用“ADODB.Connection”模块，而是使用 PDO，因为它是目前最好的选择并且是最佳实践，这里是文档： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

但是，如果 PDO 不适合您，那么请参阅 ODBC (PDO RECOMMENDED)，它是一个原生 PHP 模块。这是文档： http: [//php.net/manual/en/book.uodbc.php](http://php.net/manual/en/book.uodbc.php)
要开始连接，您可以这样做： `$connection = odbc_connect("Driver={Microsoft Access Driver (*.mdb)};Dbq=$mdbFilename", $user, $password);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:59:54.803

请改用[PDO](http://php.net/manual/en/book.pdo.php)。它可以通过 ODBC 连接：

```
$pathToMDB = "path/to/db.mdb";
$db = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=$pathToMDB", 'admin'); 
```

# python - matplotlib：子图背景（轴面+标签）颜色[或，图形/轴坐标系]

> ID：14712665
> 
> 赞同：3
> 
> 时间：2013-02-05T16:52:18.427
> 
> 标签：python, matplotlib

我有一个包含 3x2 子图的图形，我想在中间的一对子图上设置背景颜色，以便更清楚地知道哪个轴标签属于哪个子图。

构建子图时的设置`facecolor`仅更改由轴定义的区域的颜色；刻度和轴标签仍然绘制在`figure.patch`. 假设没有简单的方法可以做到这一点，我可以在`figure.axes`.

经过一番试验，似乎`figure.axes[x].get_position()`返回轴坐标（标准化坐标 [0.0-1.0]），但`Rectangle()`似乎需要显示坐标（像素）。此代码或多或少有效（ED：交互式，但是当输出到 png 时（使用 Agg 渲染器），矩形的定位完全关闭）：

```
import matplotlib.pyplot as plt
import matplotlib

f = plt.figure()
plt.subplot( 121 )
plt.title( 'model' )
plt.plot( range(5), range(5) )
plt.xlabel( 'x axis' )
plt.ylabel( 'left graph' )
plt.subplot( 122 )
plt.title( 'residuals' )
plt.plot( range(5), range(5) )
plt.xlabel( 'x axis' )
plt.ylabel( 'right graph' )
plt.tight_layout(pad=4)

bb = f.axes[0].get_position().transformed( f.transFigure ).get_points()
bb_pad = (bb[1] - bb[0])*[.20, .10]
bb_offs = bb_pad * [-.25, -.20]
r = matplotlib.patches.Rectangle( bb[0]-bb_pad+bb_offs, *(bb[1] - bb[0] + 2*bb_pad),
                                  zorder=-10, facecolor='0.85', edgecolor='none' )
f.patches.extend( [r] ) 
```

但似乎很hackish，感觉我错过了一些重要的事情。谁能解释一下，是否有更简单/更好的方法，如果有，它是什么？

由于我确实需要写入文件，因此我目前没有解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T02:27:47.097

只需使用`transform`kwarg to `Rectangle`，您就可以使用任何您想要的坐标系。

举个简单的例子：

```
import matplotlib.pyplot as plt
from matplotlib.patches import Rectangle

fig, axes = plt.subplots(3, 2)

rect = Rectangle((0.08, 0.35), 0.85, 0.28, facecolor='yellow', edgecolor='none',
                 transform=fig.transFigure, zorder=-1)
fig.patches.append(rect)
plt.show() 
```

![在此处输入图像描述](../Images/8a603d68840d464053ddd414fba2861e.png)

但是，如果您想更稳健地做事，并计算轴的范围，您可能会执行以下操作：

```
import matplotlib.pyplot as plt
from matplotlib.transforms import Bbox
from matplotlib.patches import Rectangle

def full_extent(ax, pad=0.0):
    """Get the full extent of an axes, including axes labels, tick labels, and
    titles."""
    # For text objects, we need to draw the figure first, otherwise the extents
    # are undefined.
    ax.figure.canvas.draw()
    items = ax.get_xticklabels() + ax.get_yticklabels() 
#    items += [ax, ax.title, ax.xaxis.label, ax.yaxis.label]
    items += [ax, ax.title]
    bbox = Bbox.union([item.get_window_extent() for item in items])
    return bbox.expanded(1.0 + pad, 1.0 + pad)

fig, axes = plt.subplots(3,2)

extent = Bbox.union([full_extent(ax) for ax in axes[1,:]])

# It's best to transform this back into figure coordinates. Otherwise, it won't
# behave correctly when the size of the plot is changed.
extent = extent.transformed(fig.transFigure.inverted())

# We can now make the rectangle in figure coords using the "transform" kwarg.
rect = Rectangle([extent.xmin, extent.ymin], extent.width, extent.height,
                 facecolor='yellow', edgecolor='none', zorder=-1, 
                 transform=fig.transFigure)
fig.patches.append(rect)

plt.show() 
```

![在此处输入图像描述](../Images/246b8e31f65bcaa87b57a49ce615b531.png)

# python - VPython：迭代一个函数以在每次运行时创建一条新曲线

> ID：14712669
> 
> 赞同：1
> 
> 时间：2013-02-05T16:52:29.037
> 
> 标签：python, vpython

我正在创建一个程序来找到以给定速度发射弹丸的最佳角度，以便击中给定距离之外的目标。

我有这个代码：

```
def Trajectory(angle):
    position = vector(0,0,0)
    poscurve.plot(pos=position)
    velocity = v0 * vector(cos(angle*pi/180), sin(angle*pi/180), 0)
    while (position.y > 0) or (velocity.y > 0):
        dx = velocity * dt  # update dx and dv
        dv = g * dt

        position = position + dx # apply the updates to velocity and position
        velocity = velocity + dv

        poscurve.plot(pos=position)
   return position 
```

问题是，这个程序以不同的角度多次重复这个功能。当它重复时，它将新曲线的第一个点连接到前一条曲线的最后一个点，因为该函数`poscurve.plot(pos=position)`每次都使用相同的。如何使函数在每次迭代此函数时生成一条新曲线？

（在此代码段之外定义了一些变量，程序在概念上工作正常，只是图表的外观）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T17:05:03.087

`poscurve`作为参数添加：

```
def Trajectory(angle,poscurve):
    position = vector(0,0,0)
    poscurve.plot(pos=position)
    velocity = v0 * vector(cos(angle*pi/180), sin(angle*pi/180), 0)
    while (position.y > 0) or (velocity.y > 0):
        dx = velocity * dt  # update dx and dv
        dv = g * dt

        position = position + dx # apply the updates to velocity and position
        velocity = velocity + dv

        poscurve.plot(pos=position)
   return position 
```

然后，`poscurve`每次都传入一个新的。您可以`gcurve`再次调用来创建一个新对象。

# ios - 如何制作一个字符串数组

> ID：14712678
> 
> 赞同：-3
> 
> 时间：2013-02-05T16:52:50.423
> 
> 标签：ios, arrays, string

两个问题：

**第一个问题：**

我想制作这样的字符串数组：

国家[1]=挪威；首都[1]=奥斯陆；

国家[2]=德国；首都[2]=柏林；

我该如何编写这段代码？它应该很简单，但我不明白我所看到的任何解释。我想我想使用 NSArray，因为我不想改变它们！我想主要问题是我如何声明这个数组！

**第二个问题：**

我可以在按钮文本中使用例如 Capital[2] 吗？这就像一个测验，如果 Country[2] 是给定的国家，我希望这成为选项之一。

/一个菜鸟

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:56:55.323

在 Obj-c 中声明 an 的最简单方法`NSArray`如下：

```
NSArray *Countries = @[@"Norway", @"Germany"];
NSArray *Capitals = @[@"Oslo", @"Berlin"]; 
```

然后，您可以稍后使用`[]`符号访问这些索引：

```
[myButton setTitle:Capitals[1] forState:UIControlStateNormal]; 
```

**记住**编程语言中的数组是 0 索引的！这意味着第一个元素是索引 0，第二个是索引 1，依此类推

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:56:17.550

**第一个答案**

给定您的示例，您可以使用数组文字来实现它：

```
NSArray* countries = @[@"Norway", @"Germany"];
NSArray* capitals = @[@"Oslo", @"Berlin"]; 
```

但是，首都城市与国家脱钩，它们有可能不同步。更好的表示形式是数组字典：

```
NSArray* countries = @[@{@"name":@"Norway", @"capital":@"Oslo"},
                       @{@"name":@"Germany", @"capital":@"Berlin"}]; 
```

**第二个答案**

当然可以！假设您在屏幕上有一个 UIButton，可通过 property 访问`button`。对于德国的原始数组，您可以使用：

```
[self.button setTitle:capitals[1] forState: UIControlStateNormal]; 
```

对于字典，您可以使用：

```
NSDictionary* selectedCountry = countries[1];
NSString* country = selectedCountry[@"name"];
NSString* capital = selectedCountry[@"capital"];
[self.button setTitle:capital forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T16:57:41.263

```
NSArray *country = @[@"Norway", @"Germany"];
NSArray *capital = @[@"Oslo", @"Berlin"];
NSString *capitalOfGermany = capital[1];

berlinButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[berlinButton setTitle:capitalOfGermany forState:UIControlStateNormal];
berlinButton.frame = CGRectMake(120, 200, 80, 20);

[self addSubview:berlinButton]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T16:57:43.857

这不是您想要的字符串数组，而是字典数组：

```
NSArray *countryArray = @[ @{@"Country" : @"Norway", @"Capital" : @"Oslo"},
                        @{@"Country" : @"Germany", @"Capital" : @"Berlin"} ]; 
```

**编辑**我更正了变量声明。

# lua - lua math.randomseed 什么也不返回

> ID：14712679
> 
> 赞同：-1
> 
> 时间：2013-02-05T16:52:53.430
> 
> 标签：lua

我有以下代码：

```
 APP.logevent('ostime:'..os.time())
   APP.logevent('random:'..math.random())
   APP.logevent(math.randomseed(os.time())) 
```

当我检查我的日志时，这就是我得到的：

```
Tue Feb  5 11:49:53 2013: ostime:1360082993
Tue Feb  5 11:49:53 2013: random:0.84018771715471
Tue Feb  5 11:49:53 2013: 
machinename:/usr/share/ajj# 
```

我没有收到任何错误消息....你能告诉我为什么调用 randomeseed() 失败了吗？我还尝试用数字替换随机种子中对“os.time（）”的调用......这似乎也不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:59:58.700

> lua math.randomseed 什么也不返回

这是不应该的。Lua 函数不需要返回值，并且 randomseed 没有真正的理由返回任何值。

> 你能告诉我为什么调用 randomeseed() 失败了吗？

它不是。

编辑：

> 我认为它会为我创建一个随机数。

就是[`math.random`](http://www.lua.org/manual/5.2/manual.html#pdf-math.random)这样。*种子*随机数生成器，也就是说它设置一个初始值，伪随机数生成器使用它来查找下一个伪随机值。对于给定的种子（包括默认种子，即您从不调用），您每次都会得到相同的伪随机值列表。[`randomseed`](http://www.lua.org/manual/5.2/manual.html#pdf-math.randomseed) *`randomseed`*

# html - 在 html 编辑器中插入电子邮件链接 (a href mailto:) 不会显示在网站上。但是点击它的（空白区域）会打开一封电子邮件到该地址

> ID：14712683
> 
> 赞同：0
> 
> 时间：2013-02-05T16:53:03.417
> 
> 标签：html

在 html 编辑器中插入电子邮件链接 (a href mailto:) 不会显示在网站上。但是在网站上单击它的（空白区域）会打开一封发送到该地址的电子邮件。

我尝试从另一个页面插入一个有效的电子邮件链接，但它在我正在创建的网页上仍然不可见。

谢谢。

阿诺德

# spring - Spring Security：设置 GrantedAuthorities

> ID：14712685
> 
> 赞同：31
> 
> 时间：2013-02-05T16:53:05.103
> 
> 标签：spring, security, authentication

无论如何要`List<GrantedAuthority>`在 Authentication/UserDetailsImpl 对象中设置？在我的应用程序中，我有两层安全性，一层用于登录（使用我的自定义登录身份验证器，在我`Authentication`使用 设置对象的类中`UsernamePasswordAuthenticationToken`），一层用于提示用户回答特定问题的“挑战问题”问题。

我想要做的是在用户回答挑战问题后，在登录过程中创建`GrantedAuthority`的 current中添加一个。`List<GrantedAuthority>`

这可能吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-07-04T08:31:08.907

你可以用下面的代码做到这一点：

```
Collection<SimpleGrantedAuthority> oldAuthorities = (Collection<SimpleGrantedAuthority>)SecurityContextHolder.getContext().getAuthentication().getAuthorities();
SimpleGrantedAuthority authority = new SimpleGrantedAuthority("ROLE_ANOTHER");
List<SimpleGrantedAuthority> updatedAuthorities = new ArrayList<SimpleGrantedAuthority>();
updatedAuthorities.add(authority);
updatedAuthorities.addAll(oldAuthorities);

SecurityContextHolder.getContext().setAuthentication(
        new UsernamePasswordAuthenticationToken(
                SecurityContextHolder.getContext().getAuthentication().getPrincipal(),
                SecurityContextHolder.getContext().getAuthentication().getCredentials(),
                updatedAuthorities)
); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-05-13T18:38:01.800

该`UserDetails.getAuthorities()`方法只返回一个`Collection<GrantedAuthority>`对象。您可以使用适当的`Collection`方法将您的新权限添加到该集合。

```
Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();
if (principal instanceof UserDetails) {
    ((UserDetails) principal).getAuthorities().add(New GrantedAuthorityImpl("ROLE_FOO"));
} 
```

细拉。

# mysql - mysql循环访问数据库的性能

> ID：14712690
> 
> 赞同：2
> 
> 时间：2013-02-05T16:53:19.160
> 
> 标签：mysql, database, performance, rdbms

很明显，在循环中执行数据库查询存在性能问题。但是如果查询被用作准备好的语句，它有什么区别吗？

最好将表连接在一起并获得结果或在循环中使用准备好的语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:05:41.873

*几乎*总是首选使用`join`，而不是遍历结果集以获得额外的结果。

 *关系数据库管理系统是为组合相关结果而构建的，并且这样做非常有效......此外，这将为您节省许多往返数据库的次数，如果过度使用，这可能会变得昂贵 - 无论您使用的是准备好的语句还是不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:14:19.030

准备好的语句的开销可能不会是输入的转义，而是与数据库的连接、重新连接或发送最终确定的 sql 语句的行为。你的代码和关系数据库之间的接口很可能是这个过程的慢点，而不是其他任何事情。

但是，就我而言，我通常会从一开始就选择最简单且最能够维护的东西，并且只有在性能实际上显示自己很慢时才担心性能。在单独的函数或方法中编写数据抓取功能，以便在性能证明需要优化时更改实现。

此时，您可以开始优化您的 sql，并使用连接或联合作为多个准备好的语句的替代方案。*

# python - 导入文件夹之外的用户制作模块

> ID：14712691
> 
> 赞同：0
> 
> 时间：2013-02-05T16:53:25.130
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中进行相对导入？](https://stackoverflow.com/questions/72852/how-to-do-relative-imports-in-python)

所以我试图包含一个模块，它是我的 python 文件中的一个文件夹，然后是多个文件夹。

所以文件夹层次结构如下：

```
\Folder\
    \Folder\First\
        \Folder\First\myPythonFile.py
    \Folder\Second\
        \Folder\Second\AnotherFolder\
            \Folder\Second\AnotherFolder\addedFile.py 
```

我想将 addedFile.py 包含到 myPythonFile.py 中。我不确定这是如何实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:04:49.010

从 2.5（可能是 2.4）开始，在 Python 中可以进行相对导入

如果你`__init__.py`在`Second`和`Second\AnotherFolder`文件夹中添加两个空文件，根据[PEP 328](http://www.python.org/dev/peps/pep-0328/)你可以写：

```
 from ..Second.AnotherFolder.addedFile import eggs 
```

里面`myPythonFile.py`

导入所需的模块（在我的示例中为*鸡蛋*）

（`__init__.py`在文件夹中添加文件会将它们转换为*包*）

**替代方法**

如果您不想为您的`Second`文件夹创建包，您可以更改 sys.path 以包含您的`Second\AnotherFolder`文件夹：

```
import sys
import os
sys.path.append(sys.path.append(os.path.abspath('../Second/AnotherFolder')))
import addedFile 
```

但我不赞成这种方法，原因在[这里](https://stackoverflow.com/questions/1893598/pythonpath-vs-sys-path)解释。

# php - 限制post sql结果

> ID：14712694
> 
> 赞同：1
> 
> 时间：2013-02-05T16:53:29.903
> 
> 标签：php, mysql, search-engine

我从头开始构建搜索引擎。

*   它扫描多个数据库中的许多不同表。
*   它仅搜索指定的列。
*   搜索词是`explode()`多词搜索的情况
*   它用 a 遍历`foreach`表。

我在用`LIMIT`. 我希望它只显示`DISTINCT`。

例如，如果我搜索`Joe Schmoe`我的代码将搜索`first = joe`然后 for `last = schmoe`，它会为每个搜索显示一个结果。但我希望它只显示两个搜索的一个结果。

```
<?php

echo "<h1>Search Results</h1>";

echo "<table style='width: 100%;'>";

$a = $_GET["q"];

$b = explode(" ", $a);

include 'db_connect3.php';

mysql_select_db("db440035579", $con);

foreach($b as $c){
$sql="SELECT * FROM users WHERE first LIKE '%$c%' || last LIKE '%$c%'";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
  {
  echo "<a href='applications.php?act=search&uid=$row[7]'>$row[5], $row[4]</a>";
  }
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:32:58.523

首先[http://bobby-tables.com/](http://bobby-tables.com/)

其次，插入`PDO`只需要几行代码。

第三，全文搜索要好得多。

**最后：**

使用阵列微缓存。我假设`$row[0]`是`user.id`. 这样你每次只能得到一件`ID`

```
$cache = array();    
foreach($b as $c){
    $sql="SELECT * FROM users WHERE first LIKE '%$c%' || last LIKE '%$c%'";

    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result)){
        $cache[$row[0]] = $row;
    }
}
foreach($cache as $row){
    echo "<a href='applications.php?act=search&uid=$row[7]'>$row[5], $row[4]</a>";
} 
```

# android - 操作栏列表导航宽度 - 换行内容

> ID：14712697
> 
> 赞同：11
> 
> 时间：2013-02-05T16:53:38.293
> 
> 标签：android, android-layout, android-actionbar

默认情况下，在操作栏列表中，所选项目的导航宽度与最宽项目一样宽。我想在所选项目中“包装内容”，因为它在 google+、gmail、maps android 应用程序中。

有人知道很热吗？

我试图覆盖导航适配器的getView，但它不起作用。看起来这个视图被另一个具有最宽项目宽度的视图包裹着。我还尝试了带有微调器的 actionbar.setCustom 视图，但微调器的行为是相同的。它使用最宽的项目宽度。

感谢所有建议、链接和帮助。

![当前状态](../Images/fa4bb077775c0a9d53f73a7bb172caaa.png)

![所需状态](../Images/b2e2cbe17d6265d1bcba192570dd0f3e.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T08:44:22.610

我遇到了同样的问题。似乎Android会为所有项目调用getView（）方法，最后将宽度设置为最宽项目的宽度。

所以这是我的解决方案：

1.  在您的代码中存储当前选定的部分（例如，您的示例中的部分），例如 selectedSection。实际上，您必须在 NavigationListener 的 onNavigationItemSelected() 方法中执行此操作。

2.  覆盖 SpinnerAdapter 的 getView() 方法，始终将其内容设置为 selectedSection。

3.  在 NavigationListener 的 onNavigationItemSelected() 方法中，将当前模式设置为 selectedSection 后，尝试调用 spinnerAdapter 的 notifyDataSetChanged() 方法。

这是示例代码：

```
final int selectedSection = 0;
final String sectionLabels[] = {"short sec", "long section", "looooonger section"};

final ArrayAdapter<String> arrayAdapter =
  new arrayAdapter<String>(this, simple_list_item_1) {
    @Override
    public int getCount() {
      // You need to implement here.
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      if (convertView == null) {
        convertView = LayoutInflater.from(getContext()).inflate(R.layout.you_entry, null);
      }
      TextView textView = (TextView) convertView.findViewById(R.id.you_text);
      // Set the text to the current section.
      textView.setText(sectionLabels[selectedSection]);
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
      // You need to implement here.
    }

  }

actionBar.setListNavigationCallbacks(navigationAdpater,
  new ActionBar.OnNavigationListener() {

    @Override
    public boolean onNavigationItemSelected(int itemPosition, long itemId) {
      // Store the current section.
      selectedSection = itemPosition;
      navigationAdpater.notifyDataSetChanged();
      return true;
    }
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-06T18:31:04.550

您需要覆盖适配器中的 getView() 方法并将布局参数设置到 textview 以包装内容。微调器将自动调整所选项目的大小。

我创建了一个从 ArrayAdapter 扩展的自定义适配器：

```
public class CustomAdapter extends ArrayAdapter<String> { 
```

之后，我重写了更改当前视图的 LayoutParams 的 getView() 方法：

```
@Override 
public View getView(final int position, final View convertView, final ViewGroup parent) {
            View view = convertView;
            if (null == view) {
                view = LayoutInflater.from(this.getContext())
                         .inflate(android.R.layout.simple_list_item1, null);
                ((TextView) view).setText(getItem(position));
            }
            final LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                                               LayoutParams.WRAP_CONTENT);
            view.setLayoutParams(params);
            return view;
} 
```

在您的活动中，创建适配器实例并使用它设置您的微调器：

```
List<String> stringList = new ArrayList<String>();
stringList.add("test1");
stringList.add("test12");
stringList.add("test123");
stringList.add("test1234");

final SpinnerAdapter adapter = new CustomAdapter(this.getContext(),
                                                 android.R.layout.simple_list_item1,
                                                 android.R.id.text1, 
                                                 stringList);
mySpinner.setAdapter(adapter); 
```

当您在列表中选择某些内容时，微调器将重新创建视图，将所选项目重新排序到第一个位置，并将其自身调整为内容的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T04:30:45.440

创建一个微调器并向其中添加文本视图。在微调器上，将 maxWidth 字段设置为您想要的任何值，这样就可以处理这个问题。另一种选择是设置

```
android:layout_width="0"
android_layout_weight="0.3" 
```

这意味着微调器将仅占据屏幕宽度的 1/3。

在您将设置的文本视图上：

```
android:singleLine="false"
android:ellipsize="end" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-07T08:11:55.970

这对我有用。重要的部分是这个。把上面的代码放在你的适配器上，并使用 selectedItemPosition 从对象数组中选择文本。

```
int selectedItemPosition = position;
    if (parent instanceof AdapterView) {
        selectedItemPosition = ((AdapterView) parent)
                .getSelectedItemPosition();
    } 
```

下面给出示例。

```
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = getLayoutInflater();
    final View spinnerCell;
    if (convertView == null) {
        // if it's not recycled, inflate it from layout
        spinnerCell = inflater.inflate(R.layout.layout_spinner_cell, parent, false);
    } else {
        spinnerCell = convertView;
    }
    int selectedItemPosition = position;
    if (parent instanceof AdapterView) {
        selectedItemPosition = ((AdapterView) parent)
                .getSelectedItemPosition();
    }

    TextView title = (TextView) spinnerCell.findViewById(R.id.spinnerTitle);
    title.setText(titles[selectedItemPosition]);
    return spinnerCell;
} 
```

如果您需要解释，请点击以下链接：[http ://coding-thoughts.blogspot.in/2013/11/help-my-spinner-is-too-wide.html](http://coding-thoughts.blogspot.in/2013/11/help-my-spinner-is-too-wide.html)

# matlab - 如何从二进制图像中删除圆圈但保留线条？

> ID：14712699
> 
> 赞同：4
> 
> 时间：2013-02-05T16:53:53.417
> 
> 标签：matlab, image-processing

在下图中，如何删除圆圈以仅保留线条？

![http://s4.postimage.org/wndlnwph9/morph.png](../Images/9a1f0ee22c160268a4127f13911899a1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T02:44:39.127

使用足够的结构元素进行形态学开场：

![在此处输入图像描述](../Images/4ca63625f439f1d0f226a00610a62548.png)

`Opening[f, DiskMatrix[7]]`

要完成整个任务，有几种方法，一些方法是从先前的结果中减去输入图像（您可能会尝试），还有一些不同的方法。其中一个不同的开始是细化输入图像，这会将不与线条重叠的圆圈减少到单个像素（或接近该像素，因为圆圈并不完美），您可以轻松删除这些像素。然后修剪此图像并检测线条（下图右图）。

![在此处输入图像描述](../Images/b954336aaeb76eb8e635b053143db353.png) ![在此处输入图像描述](../Images/1b801d1090055815ee8dc29213ab5851.png)

```
f = ImageCrop[Binarize[Import["http://i.stack.imgur.com/AurlZ.png"]]] (* Input *)
g = SelectComponents[Thinning[f], "Count", #1 > 10 &]          (* Second image *)
h = Pruning[g, 9];
lines = ImageLines[h, 0.1, Method -> "RANSAC", Segmented -> True];
Show[Dilation[h, 3], Graphics[{Thick, Red, Line /@ lines}]]    (* Third image *) 
```

您可以尝试通过考虑显示的第一张图像中检测到的圆圈以及靠近给定圆圈的线段的方向来补充给定连接组件中的红线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T17:11:54.907

使用圆形霍夫变换来检测圆圈，然后您可以删除它们。文件交换有几个文件可供您使用，例如[this one](http://www.mathworks.com/matlabcentral/fileexchange/26978-hough-transform-for-circles)或[this one](http://www.mathworks.us/matlabcentral/fileexchange/35223-circle-detection-using-hough-transforms)。Matlab 还提供了一个名为的工具[`imfindcircles`](http://www.mathworks.com/help/images/ref/imfindcircles.html) ，它可以做同样的事情。

# linux - scp 脚本在用户下完美运行，但在 cron 作业下神秘地失败

> ID：14712700
> 
> 赞同：0
> 
> 时间：2013-02-05T16:53:57.650
> 
> 标签：linux, security, cron, scp

我有一个 python 脚本，它执行 scp 操作以将文件从一台 Synology DiskStation（运行 Linux）传输到本地网络上的几台 Mac OSX 计算机。我已经在所有涉及的机器上设置了 RSA 私钥/公钥对。如果我以管理员用户身份从 NAS 驱动器调用此 python 脚本，那么一切都按预期工作。我的 NAS 驱动器 crontab 文件指定相同的管理员用户以完全相同的方式运行脚本。但是，scp 失败，退出状态代码为 1。

什么可能导致这种行为？

**[更新]**

使用 scp -v（或 scp -vv）报告更多信息。我还可以看到它提供了正确的密钥，并且身份验证按预期工作。现在我还注意到它在一些 OSX 机器上工作，但不是全部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:34:40.673

我验证了 .ssh/known_hosts 和 .ssh/authorized_keys 都适用于管理员，但不适用于 root。出于某种原因，当 python 脚本在 crontab 下运行时，检查的 .ssh/known_hosts 是 root known_hosts 而不是管理员用户 known_hosts。所以这个挑战是在 scp 命令期间提出的，因为它不是 tty，它只是检查了 root known_hosts 文件，没有找到远程主机并且失败了。将所有 OSX 远程主机添加到 known_hosts 文件后，它运行顺利。

我认为另一种（更安全）的解决方案可能是在管理员用户下安装一个单独的 crontab，但我所做的只是更快。

# ios - UIPicker 设置日期范围

> ID：14712704
> 
> 赞同：0
> 
> 时间：2013-02-05T16:54:09.417
> 
> 标签：ios, xcode

> **可能重复：**
> [UIDatePicker 设置最大日期](https://stackoverflow.com/questions/14694452/uidatepicker-set-maximum-date)

我正在使用此代码来阻止用户超过我设置的限制：

鉴于确实加载：

```
NSDate *Date=[NSDate date];
[DatePickerForDate setMinimumDate:Date];
[DatePickerForDate setMaximumDate:[Date dateByAddingTimeInterval: 63072000]]; //time interval in seconds 
```

而这个方法：

```
- (IBAction)datePickerChanged:(id)sender{
// When `setDate:` is called, if the passed date argument exactly matches the Picker's date property's value, the Picker will do nothing. So, offset the passed date argument by one second, ensuring the Picker scrolls every time.
NSDate* oneSecondAfterPickersDate = [DatePickerForDate.date dateByAddingTimeInterval:1] ;
if ( [DatePickerForDate.date compare:DatePickerForDate.minimumDate] == NSOrderedSame ) {
    NSLog(@"date is at or below the minimum") ;
    DatePickerForDate.date = oneSecondAfterPickersDate ;
}
else if ( [DatePickerForDate.date compare:DatePickerForDate.maximumDate] == NSOrderedSame   ) {
    NSLog(@"date is at or above the maximum") ;
    DatePickerForDate.date = oneSecondAfterPickersDate ;
}
} 
```

if 语句中的代码永远不会被调用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:33:45.687

Don't you want to finish [our discussion over here?](https://stackoverflow.com/questions/14694452/uidatepicker-set-maximum-date/14696824#14696824)

First, make sure the `datePickerChanged` is being called when DatePickerForDate's value is changed.

# java - CXF中“org.apache.cxf.resource.method”有什么意义？

> ID：14712705
> 
> 赞同：1
> 
> 时间：2013-02-05T16:54:10.133
> 
> 标签：java, rest, cxf, jax-rs, interceptor

我很惊讶在谷歌上没有得到任何关于`"org.apache.cxf.resource.method"`. 虽然，有很多拦截器使用它（在我给出的代码中）。

例如这个（在自定义中`FaultOutInterceptor`）：

```
private boolean isServiceResponseRequested(Message message) {
    Method method = (Method) message.getExchange().getInMessage()
            .get("org.apache.cxf.resource.method");
    if (method != null) {
        Class c = method.getReturnType();
        if (c != null) {
            if (c.getSimpleName().equals(
                    ServiceResponse.class.getSimpleName())) {
                return true;
            }
        }
    }
    return false;
} 
```

[AbstractAuthorizingInInterceptor](http://svn.apache.org/repos/asf/cxf/trunk/rt/core/src/main/java/org/apache/cxf/interceptor/security/AbstractAuthorizingInInterceptor.java)也有对它的引用。

有没有人介意解释“ `org.apache.cxf.resource.method`”的意义以及如何以及在哪里' `set`'它？

**编辑：** 作为实现期望的黑客，这就是我所做的：

我写了一个`inInterceptor`for `Phase.PRE_STREAM`，配置在`jaxrs:inInterceptors`和

```
handleMessage(Message message) 
{
   Message inMessage = message.getExchange().getInMessage();
   Method appMethod = //Logic to determine the method based on the request Url
   inMessage.put("org.apache.cxf.resource.method", appMethod);
} 
```

虽然，它给了我想要的结果，但它完全是一个 hack，看起来并不正确。任何意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T00:49:20.133

`org.apache.cxf.resource.method`CXF 选择的用于处理传入请求的 Java 方法。这由 CXF 在 Pre-Stream 阶段自动完成，通常通过检查 jaxrs:serviceBeans 的类和方法上的注释，特别是 @Path、@[HTTPMethod]、@Produces、@Consumes 等注释。

[如果您需要对 CXF 选择哪个方法进行更精细的控制，那么实现ResourceComparitor](http://cxf.apache.org/javadoc/latest-2.4.x/org/apache/cxf/jaxrs/ext/ResourceComparator.html)可能更合适，而不是实现一个拦截器来尝试从消息中解析这些数据。

# google-apps-script - 本周员工奖脚本修改不起作用

> ID：14712706
> 
> 赞同：-2
> 
> 时间：2013-02-05T16:54:15.267
> 
> 标签：google-apps-script

我已经修改了“本周最佳员工奖”，并且无法让它在提交后将准确的数据提取到我的文档中。

我的目标是：

1) 使用所需的详细信息填写表格

2) 让脚本收集这些详细信息并将它们插入到我的文档模板中的正确密钥持有者中

3）在带有标题更改的pdf中创建文档的“新”副本

4）电子邮件会很好但不是必需的，只要它保存新文档

我可以让它创建一个新文档并运行脚本，但它似乎没有从表单或电子表格中提取正确的（或任何）数据。它一直显示“未定义”，它应该显示我输入到表单中的值。请帮我看看我的错误。我确实花了几个小时试图弄清楚并重新编写代码。提前致谢！

以下是我正在使用的文档和电子表格、表单和脚本的链接。

[https://docs.google.com/document/d/1A34uyNyMzp3o8XBzmIGqqfvCH6ocpQWN4HaZ5f4AiDk/edit](https://docs.google.com/document/d/1A34uyNyMzp3o8XBzmIGqqfvCH6ocpQWN4HaZ5f4AiDk/edit)

[https://docs.google.com/spreadsheet/ccc?key=0AkKN7xCpxU54dENoZ0RoSnF1QXhQNnAyX3ZiNmVwRGc#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AkKN7xCpxU54dENoZ0RoSnF1QXhQNnAyX3ZiNmVwRGc#gid=0)

这是我当前的脚本：

```
function sendDocument() {
 var sheet = SpreadsheetApp.getActiveSheet();  
 var startRow = sheet.getLastRow();  // First row of data to process  
 var numRows = 1;   // Number of rows to process  // Fetch the range of cells  
 var dataRange = sheet.getRange(startRow, 1,2)  // Fetch values for each row in the Range.  
 var data = dataRange.getValues();  
for (i in data) {    
 var row = data[i];    
 var ID = row[1];  // First column    
 var facility_name = row[2];       // Second column  
// Get document template, copy it as a new temp doc, and save the Doc’s id
 var copyId   = DocsList.getFileById("1A34uyNyMzp3o8XBzmIGqqfvCH6ocpQWN4HaZ5f4AiDk")
            .makeCopy("Copy of Mail Merge Doc template"+' for '+facility_name)
            .getId();
// Open the temporary document
 var copyDoc  = DocumentApp.openById(copyId);
// Get the document’s body section
 var copyBody = copyDoc.getActiveSection();
// Replace place holder keys/tags,  
 copyBody.replaceText('keyFacilityName', facility_name);
 copyBody.replaceText('keyID', ID);
 var todaysDate =  Utilities.formatDate(new Date(), "GMT", "MM/dd/yyyy");
 copyBody.replaceText('keyTodaysDate', todaysDate);
// Save and close the temporary document
 copyDoc.saveAndClose();
// Convert temporary document to PDF by using the getAs blob conversion
 var pdf = DocsList.getFileById(copyId).getAs("application/pdf");
// Delete temp file
 DocsList.getFileById(copyId).setTrashed(false);  
}} 
```

我还在脚本开头尝试了以下两个选项，以从表单中“提取”数据以创建“新”文档，但没有成功...

```
// Global variables 
docTemplate = “1A34uyNyMzp3o8XBzmIGqqfvCH6ocpQWN4HaZ5f4AiDk”;
docName = “Copy of Mail Merge Doc template”;

function sendDocument() {
// Full name and email address values come from the spreadsheet form
   var ID = from-spreadsheet-form
   var facility_name = from-spreadsheet-form 
```

...继续上面的脚本...

和

```
// Global variables 
docTemplate = “1A34uyNyMzp3o8XBzmIGqqfvCH6ocpQWN4HaZ5f4AiDk”;
docName = “Copy of Mail Merge Doc template”;

function onFormSubmit(e) {
// Full name and email address values come from the spreadsheet form
   var ID = e.values[1];
   var facility_name = e.values[2]; 
```

...继续上面的脚本...

如果可能，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:39:51.557

你的剧本很……我该怎么说……近似？

我没有测试它，也看不到你的电子表格，因为你忘了让它们公开可见，但我可以建议脚本的第一部分，并在评论中进行一些更正和解释。

希望它能帮助你使它工作。

```
function sendDocument() {
 var sheet = SpreadsheetApp.getActiveSheet();  
 var startRow = sheet.getLastRow();  // First row of data to process  
 var numRows = 1;   // Number of rows to process  // Fetch the range of cells  
 var dataRange = sheet.getRange(startRow, 1,numRows,sheet.getLastColumn())  // Fetch values for each row in the Range. Needs 4 parameters :start row, start column, number of rows, number of columns 
 var data = dataRange.getValues();  //returns a 2D array with 0 indexed values : data[0] is row nr 1 and data[0][0] is first cell in this first row
for (i in data) {    
 var row = data[i];    
 var ID = row[0];  // First column is index 0   
 var facility_name = row[1];       // Second column is index 1 
```

既然您说文档创建工作正常，那么这些更改就有可能实现；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T03:28:38.923

这是我的新脚本，似乎运行良好。谢谢您的帮助。

```
function sendDocument() {
 var sheet = SpreadsheetApp.getActiveSheet();  
 var startRow = sheet.getLastRow();  // First row of data to process  
 var numRows = 1;   // Number of rows to process  // Fetch the range of cells  
 var dataRange = sheet.getRange(startRow, 1,numRows,sheet.getLastColumn())  // Fetch values for each row in the Range. Needs 4 parameters :start row, start column, number of rows, number of columns 
 var data = dataRange.getValues();  //returns a 2D array with 0 indexed values : data[0] is row nr 1 and data[0][0] is first cell in this first row
for (i in data) {    
 var row = data[i];    
 var ID_ = row[1];  // First column is index 0   
 var facility_name = row[2];       // Second column is index 1  
 var facility_type = row[3]; 
 var Length_ = row[4];
 var Acres_ = row[5]; 
 var Submission_Date = row[6];
 var email_address1 = row[7];
 var email_address2 = row[8];
// Get document template, copy it as a new temp doc, and save the Doc’s id
 var copyId   = DocsList.getFileById("1PsSwL9-w3R51C3RcWCuVwHWKYSxw9btJDVRuGgipDAI")
            .makeCopy("POD BBC Prickly Pear Contraction POD template"+' for '+ID_)
            .getId();
// Open the temporary document
 var copyDoc  = DocumentApp.openById(copyId);
// Get the document’s body section
 var copyBody = copyDoc.getActiveSection();
// Replace place holder keys/tags,  
 copyBody.replaceText('keyID', ID_);
 copyBody.replaceText('keyFacilityName', facility_name);
 copyBody.replaceText('keyFacilityType', facility_type);
 copyBody.replaceText('keyLength', Length_);
 copyBody.replaceText('keyAcres', Acres_);
 copyBody.replaceText('keySubmissionDate', Submission_Date);
// Save and close the temporary document
 copyDoc.saveAndClose();
// Convert temporary document to PDF by using the getAs blob conversion
 var pdf = DocsList.getFileById(copyId).getAs("application/pdf");
  // Attach PDF and send the email
   var subject = "POD BBC Prickly Pear Contraction"+' for '+ID_;
   var body    = "Document for POD BBC Prickly Pear Contraction"+' for '+ID_+" has been created.  Please see attached PDF";
   MailApp.sendEmail(email_address1, subject, body, {htmlBody: body, attachments: pdf});
   MailApp.sendEmail(email_address2, subject, body, {htmlBody: body, attachments: pdf});
// Delete temp file
 DocsList.getFileById(copyId).setTrashed(false);  
}} 
```

# php - Yii 形式和输入值

> ID：14712707
> 
> 赞同：2
> 
> 时间：2013-02-05T16:54:17.930
> 
> 标签：php, forms, input, yii

我尝试使用 Yii 框架。我有 5 个这样的输入

```
<div class="field">
    <?php echo $form->label($model, 'name') ?>
    <?php echo $form->textField($model, 'name'); ?>
    <?php echo $form->error($model, 'name', array('class' => 'label label-important')); ?>
</div> 
```

这是我在模型中的规则

```
public function rules() {
    return array(
        array('email, message', 'required', 'message' => 'Заполните поле'),
        array('email', 'email', 'message' => 'Некорректный емаил')
    ); 
```

}

如果用户未通过验证，则输入的所有值都将删除，除了电子邮件和消息。因为我需要“方法”。我如何在不需要的情况下保存表单的所有值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:14:28.977

如果您想在没有任何规则的情况下保存输入，则应将其定义为`safe`属性，这是一篇非常好的文章：[http ://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/)

# c# - 在 WPF/C# 中以自定义格式从 System.DateTime 获取给定月份的天数集合

> ID：14712708
> 
> 赞同：0
> 
> 时间：2013-02-05T16:54:19.093
> 
> 标签：c#, .net-4.0

我希望获得以下格式的日期列表：1 月 1 日、1 月 3 日.....1 月 30 日、1 月 31 日。

我可以通过调用 DateTime.DaysInMonth(2013,01); 自己生成这个集合；但这只是给了我“31”，所以我将不得不遍历它们并生成集合。但是是否已经有任何自定义方法可以轻松或以简单的方式做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:57:15.867

尝试使用下一个代码片段。考虑使用`MMM`DateTime 模式来提取月份名称

```
Enumerable.Range(1, DateTime.DaysInMonth(2012, 1))
          .Select(num => num +" Jan"); 
```

返回

```
1 Jan 
2 Jan 
3 Jan 
...
30 Jan 
31 Jan 
```

**编辑：** 要提取月份名称，您可以使用下一个代码段

```
var start = new DateTime(2012, 1, 1);
Enumerable.Range(0, DateTime.DaysInMonth(2012, 1))
          .Select(days => start.AddDays(days))
          .Select(day => day.ToString("d MMM")); // returns the same 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:59:31.733

您可以使用 Linq：

```
DateTime date = new DateTime(2013, 1, 1);
var cal = System.Globalization.CultureInfo.CurrentCulture.Calendar;
List<String> monthDates = Enumerable.Range(0, cal.GetDaysInMonth(date.Year, date.Month))
    .Select(i => date.AddDays(i).ToString("MMM d"))
    .ToList(); 
```

[**演示**](http://ideone.com/bPl90d)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:12:53.487

根据上面 Ilya Ivanov 的回答，如果您希望列表显示格式“Jan ??”，您可以执行以下操作：

```
var list = Enumerable.Range(1, DateTime.DaysInMonth(2012, 1)).Select(num => "Jan " + num); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:57:29.417

我认为没有任何内置方法可以做到这一点，但您可以轻松地执行以下操作：

```
DateTime.DaysInMonth(2013, 01).Select(x=> "Jan " + x.Tostring()).ToList(); 
```

您可以看到如何轻松参数化并从中创建自己的函数，从而获得不同的月份。

# iphone - 如何在 iOS 中进行渐变色更改？

> ID：14712712
> 
> 赞同：2
> 
> 时间：2013-02-05T16:54:31.467
> 
> 标签：iphone, ios, objective-c, xcode

我需要将视图的背景设置为渐变色，并且它必须根据以下视频中的时间链接逐渐改变它们的颜色。

[示例视频](http://www.youtube.com/watch?v=znWEfd9LMU0)

我尝试了一些图层动画，但不值得，因为我们不能逐渐改变图层的颜色。谁能告诉我怎么做这些东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:56:53.243

您已经以一致的时间间隔（时钟指针）更新 UI。只需在这些间隔更新渐变并将交叉淡入淡出添加到背景视图的图层。

```
CATransition *transition = [CATransition animation];
transition.duration = duration;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionFade;
[backgroundView.layer addAnimation:transition forKey:nil]; 
```

该`duration`值将是 UI 更新之间的时间。

# .htaccess - 如何使用 htaccess 文件从 url 中删除位？

> ID：14712713
> 
> 赞同：0
> 
> 时间：2013-02-05T16:54:32.973
> 
> 标签：.htaccess, url, joomla, rewrite

嗨，我正在为我的网站使用 joomla，我想删除我的网址之间的位。

原始网址：“/calums/index.php/component/jsjobs/jsjobs/employer/”

我想要的方式：“/calums/employer/”

如果有人可以帮助我弄清楚如何使用 htaccess 文件来做这件事，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:47:55.930

首先，您需要在 Joomla 中启用 SEF 以摆脱 /index.php/ 部分：

*   在全局配置中启用 sef（前两个复选框）
*   将您的 htaccess.txt 复制到 .htaccess

这是透明的，应该使您的 URL 看起来像这样：

/calums/component/jsjobs/jsjobs/employer/

然后，通过查看您的 URL，似乎组件 jsjobs 没有关联的菜单项。菜单项与视图相关联，因此您应该进入菜单管理器并添加一个新菜单项并尝试为 jsjobs 设置菜单项。你可能找不到一个完全匹配的，但你应该在那里。

一旦设置了菜单项（并清除了缓存），您应该开始看到 /component/jsjobs 至少被替换。如果没有生成正确 url 的菜单项，那么您可能必须在所需的组件/视图文件夹中创建一个 .xml 文件。此答案中的更多详细信息：[Joomla Development :: Probleme with URL Rewriting](https://stackoverflow.com/questions/14636402/joomla-developement-probleme-with-url-rewriting/14654862#14654862)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T17:11:34.220

我在stackoverflow上的第一个答案。尝试这个：

```
RewriteEngine on
RewriteRule ^(\w)/(\w)/(.*) $1/index.php/component/jsjobs/jsjobs/$2/$3 
```

# .net - 无需不断重新部署的 Windows Mobile 开发？（没有编辑和继续）

> ID：14712715
> 
> 赞同：0
> 
> 时间：2013-02-05T16:54:34.707
> 
> 标签：.net, windows-mobile, visual-studio-debugging, edit-and-continue

我正在使用 Visual Studio 2008 开发一个面向 Windows Mobile 6 的应用程序。开发本身非常简单，但我意识到当我进行常规开发时，我对 VB.NET 中的 Edit-And-Continue 有多么依赖。移动设备模拟器（和设备本身）似乎不支持编辑并继续，这意味着我必须编译我的应用程序，将其部署到模拟器，启动它并到达我正在使用的点（有时需要一两分钟），然后单步执行代码以查看发生了什么。虽然我可以即时更改变量值，但我无法更新任何代码 - 为此，我必须停止执行，更改代码，然后重复该过程。

它导致开发非常缓慢（我可以听到老前辈说“这就是我们那个时代的一切！在编译之前阅读！），我想知道是否有办法让它不那么痛苦。我我试图一次开发更大的代码，所以调试只是痛苦的爆发，但是当我调用错误的属性或附加到不正确的事件时，这仍然是一个非常令人沮丧的经历，然后我必须在制作一个之后重新开始换行。

我曾考虑同时开发一个 Windows 窗体应用程序，将所有窗体对象命名相同，然后在两者之间共享后端代码。这样，我就可以在 Winforms 应用程序上编译、解决错误、编辑并继续，然后在经过审查后将代码复制到我的移动应用程序中。有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:21:02.267

部署到模拟器，而不是设备。

不过，在分发应用程序之前，请在设备上进行测试！

模拟器将允许您逐步执行代码，编辑内存中运行的值，并在执行过程中将更改写入代码。

请注意，在您停止调试器并重新编译之前，您对代码所做的任何更改都不会执行，就像真实设备一样。但是，这些更改将在您下次运行代码时出现。

很多断点。

如果你有很多线程，断点会很烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T01:01:23.210

这正是我使用大量界面、良好的视图/模型分离和依赖软件服务的原因。我的大部分开发工作要么在桌面单元测试中完成，要么在设备上运行的小型“shim”应用程序中完成，而无需部署和启动整个应用程序。

基本上我的大部分项目都有桌面项目和设备项目，我在桌面上完成大部分功能性工作。我只在需要连接 UI 之类的东西时才使用设备。我不会（或很少）创建桌面 UI 来模拟设备 UI - 如果您这样做，则表明 UI 与业务逻辑过于耦合。

# c# - 如何获得 IXmlNamespaceResolver

> ID：14712718
> 
> 赞同：13
> 
> 时间：2013-02-05T16:54:39.990
> 
> 标签：c#, xml, xml-namespaces

我正在尝试调用需要 IXmlNamespaceResolver 对象的 XElement.XPathSelectElements() 重载。谁能告诉我如何获取（或制作）IXmlNamespaceResolver？我有一个要在查询中使用的命名空间列表

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-06T01:40:23.610

使用`new XmlNamespaceManager(new NameTable())`.

例如，如果您有一个使用如下命名空间的 XML 文档

```
var xDoc = XDocument.Parse(@"<m:Student xmlns:m='http://www.ludlowcloud.com/Math'>
    <m:Grade>98</m:Grade>
    <m:Grade>96</m:Grade>
</m:Student>"); 
```

然后你可以`Grade`通过做得到节点

```
var namespaceResolver = new XmlNamespaceManager(new NameTable());
namespaceResolver.AddNamespace("math", "http://www.ludlowcloud.com/Math");
var grades = xDoc.XPathSelectElements("//math:Student/math:Grade", namespaceResolver); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T17:51:02.350

您可以使用实现该接口的[XmlNamespaceManager](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.aspx)

使用接受 a 的构造函数，将via`XmlNameTable`的实例传递给它。然后您可以调用函数来添加命名空间：[`System.Xml.NameTable`](https://msdn.microsoft.com/en-us/library/system.xml.nametable.aspx)`new NameTable()``AddNamespace`

```
var nsMgr = new XmlNamespaceManager(new NameTable());
nsMgr.AddNamespace("ex", "urn:example.org");
nsMgr.AddNamespace("t", "urn:test.org");
doc.XPathSelectElements("/ex:path/ex:to/t:element", nsMgr); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-08T17:44:09.960

我在搜索如何使用 [XPathSelectElements()] 的重载来处理 SOAP 响应时发现了这篇文章，因此，我将发布我的答案，以防它对拥有多个命名空间定义的文档的其他人有用。就我而言，我有这样的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <queryResponse xmlns="http://SomeUrl.com/SomeSection">
      <response>
        <theOperationId>105</theOperationId>
        <theGeneraltheDetailsCode>0</theGeneraltheDetailsCode>
        <theDetails>
          <aDetail>
            <aDetailId>111</aDetailId>
            <theValue>Some Value</theValue>
            <theDescription>Some description</theDescription>
          </aDetail>
          <aDetail>
            <aDetailId>222</aDetailId>
            <theValue>Another Value</theValue>
            <theDescription>Another description</theDescription>
          </aDetail>
          <aDetail>
            <aDetailId>333</aDetailId>
            <theValue>And another Value</theValue>
            <theDescription>And another description</theDescription>
          </aDetail>
        </theDetails>
      </response>
    </queryResponse>
  </soap:Body>
</soap:Envelope> 
```

要创建 [XDocument]：

```
var theDocumentXDoc = XDocument.Parse( theDocumentContent ); 
```

要创建 [XmlNamespaceManager]，我使用：

```
var theNamespaceIndicator = new XmlNamespaceManager( new NameTable() );
theNamespaceIndicator.AddNamespace( "theSoapNS", "http://www.w3.org/2003/05/soap-envelope" );
theNamespaceIndicator.AddNamespace( "noSuffNS" , "http://SomeUrl.com/SomeSection" ); 
```

我用于前缀的名称（“theSoapNS”和“noSuffNS”）是任意的。使用便于阅读代码的名称。

要选择 [Envelope] 元素，我使用：

```
var theEnvelope = theDocumentXDoc.XPathSelectElement( "//theSoapNS:Envelope", theNamespaceIndicator ); 
```

要选择 [queryResponse] 元素：

```
var theQueryResponse = theDocumentXDoc.XPathSelectElement( "//theSoapNS:Envelope/theSoapNS:Body/noSuffNS:queryResponse", theNamespaceIndicator ); 
```

要选择 [theDetails] 中的所有详细信息：

```
var theDetails = theDocumentXDoc.XPathSelectElement( "//theSoapNS:Envelope/theSoapNS:Body/noSuffNS:queryResponse/noSuffNS:response/noSuffNS:theDetails", theNamespaceIndicator ); 
```

这是一个使用选择的示例程序 (C#6)：

```
//The usings you need:
using System;
using System.Linq;
using System.Xml;
using System.Xml.Linq;
using System.Xml.XPath;

namespace ProcessXmlCons
{
    class Inicial
    {
        static void Main(string[] args)
        {
            new Inicial().Tests();
        }

        private void Tests()
        {
            Test01();
        }

        private void Test01()
        {
            var theDocumentContent =
              @"<?xml version=""1.0"" encoding=""utf-8""?>
                    <soap:Envelope xmlns:soap=""http://www.w3.org/2003/05/soap-envelope"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
                        <soap:Body>
                        <queryResponse xmlns=""http://SomeUrl.com/SomeSection"">
                            <response>
                                <theOperationId>105</theOperationId>
                                <theGeneraltheDetailsCode>0</theGeneraltheDetailsCode>
                                <theDetails>
                                    <aDetail>
                                        <aDetailId>111</aDetailId>
                                        <theValue>Some Value</theValue>
                                        <theDescription>Some description</theDescription>
                                    </aDetail>
                                    <aDetail>
                                        <aDetailId>222</aDetailId>
                                        <theValue>Another Value</theValue>
                                        <theDescription>Another description</theDescription>
                                    </aDetail>
                                    <aDetail>
                                        <aDetailId>333</aDetailId>
                                        <theValue>And another Value</theValue>
                                        <theDescription>And another description</theDescription>
                                    </aDetail>
                                </theDetails>
                            </response>
                        </queryResponse>
                        </soap:Body>
                    </soap:Envelope>
                    ";

            var theDocumentXDoc = XDocument.Parse(theDocumentContent);
            var theNamespaceIndicator = new XmlNamespaceManager(new NameTable());
            theNamespaceIndicator.AddNamespace("theSoapNS", "http://www.w3.org/2003/05/soap-envelope");
            theNamespaceIndicator.AddNamespace("noSuffNS", "http://SomeUrl.com/SomeSection");

            var theEnvelope = theDocumentXDoc.XPathSelectElement("//theSoapNS:Envelope", theNamespaceIndicator);
            Console.WriteLine($"The envelope: {theEnvelope?.ToString()} ");

            var theEnvelopeNotFound = theDocumentXDoc.XPathSelectElement("//Envelope", theNamespaceIndicator);
            Console.WriteLine("".PadRight(120, '_')); //Visual divider
            Console.WriteLine($"The other envelope: \r\n {theEnvelopeNotFound?.ToString()} ");

            var theQueryResponse = theDocumentXDoc.XPathSelectElement("//theSoapNS:Envelope/theSoapNS:Body/noSuffNS:queryResponse", theNamespaceIndicator);
            Console.WriteLine("".PadRight(120, '_')); //Visual divider
            Console.WriteLine($"The query response: \r\n {theQueryResponse?.ToString()} ");

            var theDetails = theDocumentXDoc.XPathSelectElement("//theSoapNS:Envelope/theSoapNS:Body/noSuffNS:queryResponse/noSuffNS:response/noSuffNS:theDetails", theNamespaceIndicator);
            Console.WriteLine("".PadRight(120, '_')); //Visual divider
            Console.WriteLine($"The details: \r\n {theDetails?.ToString()} ");
            Console.WriteLine("".PadRight(120, '_')); //Visual divider

            foreach (var currentDetail in theDetails.Descendants().Where(elementToFilter => elementToFilter.Name.LocalName != "aDetail"))
            {
                Console.WriteLine($"{currentDetail.Name.LocalName}: {currentDetail.Value}");
            }

            //Not optimal. Just to show XPath select within another selection:
            Console.WriteLine("".PadRight(120, '_')); //Visual divider
            Console.WriteLine("Values only:");
            foreach (var currentDetail in theDetails.Descendants())
            {
                var onlyTheValueElement = currentDetail.XPathSelectElement("noSuffNS:theValue", theNamespaceIndicator);
                if (onlyTheValueElement != null)
                {
                    Console.WriteLine($"--> {onlyTheValueElement.Value}");
                }
            }
        }

    } //class Inicial
} //namespace ProcessXmlCons 
```

# javascript - 在 HTML 画布上旋转多边形

> ID：14712719
> 
> 赞同：2
> 
> 时间：2013-02-05T16:54:40.447
> 
> 标签：javascript, math, canvas

我正在尝试在画布上旋转 N 面多边形，但我遇到了坐标问题。这些形状似乎围绕着一个位于它们自身之外的原点旋转（我希望原点成为形状的中心）。任何提示将不胜感激。

```
var x = 50;
var y = 50;
var tranx;
var trany;

x -= tranx = x + shape.radius;
y -= trany = y + shape.radius;

elem.translate(tranx,trany);
elem.rotate(90 * radian);

var k = 0,
angle = 360/shape.sides;

elem.moveTo(x,y);

for (; k <shape.sides; k++) {
    elem.lineTo(x+=Math.cos( ( angle * k )* radian) * shape.radius, y+=Math.sin( ( angle * k )* radian) * shape.radius);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-16T23:24:16.577

我组合了几个函数来旋转正多边形。第一步是生成一个`<canvas>`完全独立的 (x, y) 坐标列表。需要注意的是，要获得相移（最终会导致多边形旋转），您必须将旋转添加到余弦和正弦函数中的语句中：

```
Math.cos(rotation + (i * 2 * Math.PI / numberOfSides))
Math.sin(rotation + (i * 2 * Math.PI / numberOfSides)) 
```

这是一个使用正多边形生成画布并围绕其自身原点旋转多边形的工作示例：

```
var canvas = document.querySelector('canvas');
var polygon = {
  sides: 3,
  radius: 50,
  phase: 0
};

document.addEventListener('click', function(e) {
  switch (e.target.id) {
    case "-side":
      polygon.sides--;
      break;
    case "+side":
      polygon.sides++;
      break;
    case "-phase":
      polygon.phase -= Math.PI / 12;
      break;
    case "+phase":
      polygon.phase += Math.PI / 12;
      break;
  }

  drawPolygon(canvas, polygon.sides, polygon.radius, polygon.phase);
});

function generateCoordinates(centerX, centerY, numberOfSides, radius, rotation) {
  var coordinates = [];
  for (var i = 0; i < numberOfSides; i++) {
    coordinates.push({
      x: parseFloat((centerX + radius * Math.cos(rotation + (i * 2 * Math.PI / numberOfSides))).toFixed(4)),
      y: parseFloat((centerY + radius * Math.sin(rotation + (i * 2 * Math.PI / numberOfSides))).toFixed(4))
    })
  }
  return coordinates;
};

function drawPolygon(canvas, numberOfSides, radius, rotation) {
  var context = canvas.getContext('2d');
  canvas.height = radius * 2;
  canvas.width = radius * 2;

  var coordinates = generateCoordinates(radius, radius, numberOfSides, radius, rotation);

  context.strokeStyle = "black";
  context.beginPath();

  coordinates.forEach(function(coordinate, index) {
    if (index === 0) {
      context.moveTo(coordinate.x, coordinate.y);
    } else {
      context.lineTo(coordinate.x, coordinate.y);
    }
  });
  context.closePath();
  context.stroke();
}

drawPolygon(canvas, polygon.sides, polygon.radius, polygon.phase);
```

```
<canvas></canvas>

<div>
  <button id="-side">fewer sides</button>
  <button id="+side">more sides</button>
</div>

<div>
  <button id="-phase">minus phase shift</button>
  <button id="+phase">plus phase shift</button>
</div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:53:29.817

嗯，第一个解决方案，有点 hack，如下：将参数 rotation_angle 添加到形状对象。然后你的循环应该以下列方式改变：

```
k=0;
elem.moveTo(
     x+=Math.cos( ( angle * k +shape.rotation_angle)* radian) * shape.radius,
     y+=Math.sin( ( angle * k +shape.rotation_angle)* radian) * shape.radius);
for(k=1;k<shape.sides;k++){
     elem.lineTo(
          x+=Math.cos( ( angle * k +shape.rotation_angle)* radian) * shape.radius,
          y+=Math.sin( ( angle * k +shape.rotation_angle)* radian) * shape.radius);
} 
```

第二种解决方案依赖于假设 elem 是画布上下文并且多边形的中心应该在坐标 (x,y) 处。

那么我猜，正确的顺序如下：

```
elem.translate(x,y); //Translate the origin to the center of polygon.
elem.rotate(rotation_angle); // Rotate the context around the origin
var k=0;
elem.moveTo(shape.radius,0);
for(k=1;k<shape.sides;k++){
   elem.lineTo(Math.cos(k*angle*radian)*shape.radius,
               Math.sin(k*angle*radian)*shape.radius);
} 
```

# android - 某些设备上的“Cookie 未启用错误”

> ID：14712721
> 
> 赞同：9
> 
> 时间：2013-02-05T16:54:44.517
> 
> 标签：android, facebook, cookies, facebook-login, facebook-authentication

我正在开发一个使用 Facebook 作为应用程序标准帐户创建流程的替代登录方法的应用程序。在某些设备上，Facebook 的网络对话身份验证会产生错误*“您的浏览器未启用 Cookie。请在您的安全首选项中进行调整”*。

到目前为止，我只在小型 Amazon Kindle Fire 和 Galaxy Tab 10.1 上看到过它。我已经验证了两台设备上都启用了 cookie，并且这些设备能够使用他们的库存网络浏览器登录 Facebook。在设备上重新安装我的应用程序没有任何效果，并且在启动 Web 对话框时，logcat 中不存在任何错误或警告。我正在使用适用于 Android 的最新 Facebook SDK 3.0。

对此问题的任何见解将不胜感激。

编辑：我还应该补充一点，我不确定 cookie 是否真的存在问题。如果我输入虚假密码，FB 对话框将尝试登录并失败并显示密码错误消息。如果我然后尝试使用真实密码再次登录，对话框将通过，一切都会顺利进行。FB 会话也已正确创建。仅当我首先尝试“真实”登录时才会出现 Cookie 错误，而不是第一次登录失败然后第二次登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:59:47.110

我遇到了同样的问题&我做了什么来解决这个问题_

1.  启动我的设备默认`Browser`
2.  进入选项菜单，
3.  `more`然后选择`settings`
4.  向下滚动，直到找到该`Accept cookies`选项。不应选中它旁边的框。选择该框将显示一个绿色复选标记并为 Web 浏览器启用 cookie。如果您想禁用 cookie，只需关闭复选框（在启用和禁用 cookie 的两种情况下进行测试）。

我希望这能解决你的问题。

# ios - IOS：显示登录屏幕

> ID：14712723
> 
> 赞同：-1
> 
> 时间：2013-02-05T16:54:52.860
> 
> 标签：ios, modalviewcontroller

我目前正忙于制作一个 ios 应用程序，并使用情节提要制作了以下界面：

![在此处输入图像描述](../Images/5fef60285de512914a1cd36b083b2d2f.png)

我是为 iPhone 制作应用程序的新手，我想到了以下问题。如果用户已登录，我想检查应用程序何时启动，如果没有，则会弹出并显示登录屏幕。我已经阅读了一些关于以模态方式显示它的内容，但是我该如何以编程方式做到这一点？我已经创建了一个 LoginViewController

编辑：

```
#import <UIKit/UIKit.h>

@interface DashboardViewController : UINavigationController

@property (nonatomic, strong) IBOutlet LoginViewController *LoginViewController;

@end 
```

它在第一个选项卡项的类中。

这是文件结构：

[http://i.imgur.com/MN9BYRg.png](https://i.imgur.com/MN9BYRg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:32:08.403

您知道，您应该将您的 loginViewController 链接到将调用 loginViewController 的视图控制器。

```
@interface MainViewController : UIViewController
@property (nonatomic, strong) IBOutlet LoginViewController *loginViewController; // link to IB 
```

然后，

```
[self presentModalViewController:self.loginViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:08:36.987

要以模态方式显示 viewController，您可以：

```
[self presentModalViewController:yourController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T02:02:38.777

您没有导入“LoginViewController”类。在“#import”下面添加“#import“LoginViewController.h”：

```
#import <UIKit/UIKit.h>
#import "LoginViewController.h" 
```

然后，您要在哪里显示 LoginViewController：

```
[self presentModalViewController:self.loginViewController animated:YES]; 
```

一个建议，对属性使用“弱”：

```
@property (nonatomic, weak) IBOutlet LoginViewController *loginViewController; 
```

# jquery - 来自ajax的jquery mobile动态html没有用小胡子格式化

> ID：14712724
> 
> 赞同：0
> 
> 时间：2013-02-05T16:54:53.020
> 
> 标签：jquery, html, dynamic, format, mustache

我正在使用带有 jquery mobile 的 mustache 模板引擎。我无法弄清楚为什么我的 html 没有使用 jqm 正确格式化。这是我的html/脚本：

```
 <body>
    <div id="john" data-role="page">
      <div id="header" data-role="header"></div>
      <div id="content" data-role="content"></div>
      <div id="footer" data-role="footer"></div>
    </div>
    <script>
        var data = {
            technique : "Knee Slide Pass",
            steps : ["Step 1", "Step 2", "Step 3"],
            msg : "Hard Works Pays Off"
        };
        $.get('template.html', function(templates) {
            var header = $(templates).filter('#tpl-header').html();
            var content = $(templates).filter('#tpl-content').html();
            var footer = $(templates).filter('#tpl-footer').html();
            $('#header').html(Mustache.to_html(header, data));
            $('#content').html(Mustache.to_html(content, data));
            $('#footer').html(Mustache.to_html(footer, data));
            //$('#footer').html(Mustache.to_html(footer, data)).trigger('create');
            //$this.trigger('create').trigger('refresh').page();

        });
    </script>
  </body> 
```

这是我的模板.html：

```
<div id="tpl-header">
  <h1>{{technique}}</h1>
</div>

<div id="tpl-content">
  <ul id="loader">
    {{#steps}}
    <li>
      {{.}}
    </li>
    {{/steps}}
  </ul>
</div>
<div id="tpl-footer">
  <h1>{{msg}}</h1>
</div> 
```

生成的网页确实有一个包含内容的页眉和页脚。但是，页眉非常大且位于左侧（与页脚相同）。如果我只是在 html 中硬编码页眉和页脚，它就可以工作。但是当 jqm 更新 html 时，它的格式不正确。我已阅读添加 .trigger('create') 但不起作用。任何人都可以请帮助，我已经在这方面工作太久了。提前致谢！

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:11:04.563

感谢大家的帮助和建议。我终于从谷歌上的各种来源和答案中弄清楚了该怎么做。我必须在我的脚本之前创建一个空的 div（顺便说一下，我发现 jqm 不会在后续页面的标题中运行脚本，只在主页上）。我将这个空 div 标记为“id=content”，然后在脚本中调用destroy，然后是page()：

```
<body>
    <div data-role="page" data-add-back-btn=true>
      <div id="content"></div>
      <script>
        var data = {
            technique : "Knee Slide Pass",
            steps : ["Step 11", "Step 22", "Step 3"]
        };

        $.get('template.html', function(template) {
            var content = $(template).filter('#tpl').html();
            $('#content').html(Mustache.to_html(content, data));
            $("div[data-role=page]").page("destroy").page();
        },"text");
      </script>
    </div>
  </body> 
```

此外，在我添加“文本”之前，上述内容仅在我的浏览器中有效，而在 android 应用程序中无效（只是 webview 中的空白页面）；作为 get 方法的一部分。

这是我第一次使用 jqm 并开发我的 droid 应用程序。对不起，如果这应该是我应该知道的。很多东西要学... :>

约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:01:50.883

这绝对是一个“页面刷新”问题。请记住，jQM 实际上会在页面加载时对页面进行自己的“解析”，这就是最初美化所有内容的方式。因此，当您添加 DOM 节点或内容时，您必须确保让 jQM 知道。

这是一个相关的问题：[jQuery Mobile Page refresh mechanism](https://stackoverflow.com/questions/7663078/jquery-mobile-page-refresh-mechanism)

我会尝试使用这条线：

```
$this.trigger('create').trigger('refresh').page(); 
```

->

```
$.mobile.activePage.trigger('create') 
```

或类似的规定。

理想情况下，您要做的实际上是在 DOM 中已经有一个页面，只需将新内容注入其中，然后调用`$.mobile.changePage("#pageId");`它。

# github - 如何仅嵌入要点中的某些行？

> ID：14712728
> 
> 赞同：25
> 
> 时间：2013-02-05T16:55:09.707
> 
> 标签：github, gist

Gist 允许您在网页中嵌入要点：

```
<script src="https://gist.github.com/dyoo/4627246.js"></script> 
```

我希望我可以让它只显示一个行范围子集。（用例：在一个要点中为博客文章编写一些代码。在整个博客文章中引用某些行来讨论这些行。）

这可能吗？我找不到它的文档，但是有什么方法可以做到吗？

* * *

作为我认为它*可能*如何工作的一个例子，GitHub 支持带有行号的 URI。例如，这里的`#L4-L8`锚点：

```
https://github.com/twitter/bootstrap/blob/master/docs/base-css.html#L4-L8 
```

我意识到 GitHub 显示*所有*行，仅*突出显示*这些行。而我问的是如何仅*显示*Gist 中的某些行。我只是举个例子，我猜它可能会起作用。

* * *

> ps 根据[How do I embed a single file from a GitHub gist with the new gist interface?](https://stackoverflow.com/questions/14206307/how-do-i-embed-a-single-file-from-a-github-gist-with-the-new-gist-interface) ，听起来这最近与我所问的方向相反：从要点中嵌入一个文件的能力最近消失了。我只想显示一个文件中的某些行。但我还是想问。此外，我认为这是一个不同的问题，这就是为什么我发布这个而不是评论现有问题的原因。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-02T07:14:39.117

Gist API 不提供任何这样的方式来嵌入部分要点。但是，您最终可以使用 javascript 自己完成。您可以使用一个很好的库：

[https://github.com/kashif-umair/gist-embed/](https://github.com/kashif-umair/gist-embed/)

您可以使用它嵌入部分要点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-04T21:46:57.513

你需要的是这样的：

[http://gist-it.appspot.com/](http://gist-it.appspot.com/)

```
# Embed the file robertkrimen/gist-it-example/example.js
<script src="http://gist-it.appspot.com/github/robertkrimen/gist-it-example/blob/master/example.js"></script>

# Embed without a footer
<script src="http://gist-it.appspot.com/github/robertkrimen/gist-it-example/blob/master/example.js?footer=0"></script>

# Show only the first and second line
<script src="http://gist-it.appspot.com/github/robertkrimen/gist-it-example/blob/master/example.js?slice=0:1"></script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-10T20:57:34.510

有一种方法可以在没有库的情况下做到这一点

复制嵌入并将以下内容附加到`src`属性`?file=the-name-of-your-file`

* * *

一个真实的例子

要点是[https://gist.github.com/dianjuar/8df3873cd9db49b7fcd86e74b57dd848](https://gist.github.com/dianjuar/8df3873cd9db49b7fcd86e74b57dd848)

因此，要在嵌入中仅显示名为 的文件`circleci-useful-env-variables-pr.sh`，我必须

```
<script src="https://gist.github.com/dianjuar/8df3873cd9db49b7fcd86e74b57dd848.js?file=circleci-useful-env-variables-pr.sh"></script> 
```

# javascript - 什么是改变现有css规则的好方法

> ID：14712729
> 
> 赞同：2
> 
> 时间：2013-02-05T16:55:11.070
> 
> 标签：javascript, css

我需要更改类的 css 属性的值，我发现我可以使用 document.styleSheets[i].rules 和 cssRules 来访问样式表数据并使用 style 属性修改每个属性，如下所述：[https://stackoverflow。 com/a/324533/826472](https://stackoverflow.com/a/324533/826472)

这是一个好主意还是我应该用 jQuery 做一个 $(".class-name").style("attribute", "value") 。

第一个解决方案看起来很漂亮，但我不确定，我没有经常看到它（根本没有）而且我没有看到检查器中的更改（仅在计算窗格中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:57:43.887

如果您能够使用它，我会说使用 jQuery 非常好。您链接中的示例看起来像是在输出样式，而不是更改它们。

`$(".class-name").css("attribute", "value")`

是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:11:11.430

您将无法通过 jQuery 更改现有的 CSS 规则。jQuery 只影响选定元素的内联样式，因此如果您事后在页面上加载新元素，它们将继承原始样式表的样式。

如果您的目标是编辑现有样式表，那么您唯一的选择是使用 CSS 对象模型（例如`cssRules`，等）。请记住，Chrome 检查器不允许您在以编程方式定义这些 CSS 规则后对其进行编辑，它只会将它们显示为只读（尽管它们确实出现在计算窗格之外）。

您可以使用像[css.js](https://github.com/radmen/css.js)或[JSS](https://github.com/Box9/jss)这样的轻量级库来帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:00:03.530

```
var someval = 144;
$('#id').css({'left':someval +'px'});
$('h3').css('color':'red'); 
```

点击[这里](http://api.jquery.com/css/)！

用它。爱它。

它会即时将内联样式放入您的标记中，并且可以正常工作。如果您想应用动态规则 - 这当然是您最好的选择。

此外，更好的做法可能是`.addClass`/`.removeClass`因为它更易于维护。

# c++ - 无法启动状态和状态之间的转换：收到各种错误

> ID：14712732
> 
> 赞同：2
> 
> 时间：2013-02-05T16:55:13.067
> 
> 标签：c++, qt, runtime-error, qstatemachine

我在使用[Qt 状态机时遇到了一些问题。](http://qt-project.org/doc/qt-4.8/statemachine-api.html)我永远无法执行状态：我遇到各种类型的错误，我无法弄清楚问题所在。有关错误和导致错误的代码的更多信息，请参阅下文。

这是我的主要功能：

```
int main(int argc, char *argv[])
{
    // Initialize the app
    // ... app initialization here
    QApplication app(argc, argv);

    // Create the state machine
    QStateMachine machine;

    MyState* ms1 = new MyState("ms1");
    MyState* ms2 = new MyState("ms2");
    QFinalState* fs = new QFinalState();

    ms1->addTransition(ms2);
    ms2->addTransition(fs);

    machine.addState(ms1);
    machine.addState(ms2);
    machine.addState(fs);
    machine.setInitialState(ms1);

    QObject::connect(&machine, SIGNAL(finished()), new Finisher(), SLOT(OnFinished()));
    machine.start();
    return app.exec();
} 
```

我在 中设置了断点`MyState`，但断点永远不会被击中并且`start`/`stop`方法永远不会执行（我实际上只希望`start`被调用）。应用程序直接进入`Finisher::OnFinished`方法。

这是我的状态类：

```
class MyState: public QState
{
    Q_OBJECT
private:
    QString _stateName;
public:
    MyState(QString stateName, QState * parent = 0):QState(parent), _stateName(stateName){}
    ~MyState(){}

public slots:
    void start()
    {
        qDebug() << _stateName << " start.";
        emit finished();
    }

    void stop()
    {
        qDebug() << _stateName << " stop.";
    }

signals:
    void finished();
    //void exited();
}; 
```

Finisher 非常简单：

```
class Finisher:public QObject
{
    Q_OBJECT
    public slots:
    void OnFinished()
    {
        qDebug() << "Finished!";
        QTimer::singleShot(0, QApplication::instance(), SLOT(quit()));
    }
}; 
```

我尝试了几件事，包括直接设置每个状态的父级：

```
// If I use the following code, I get an error 
// stating that "the state has already been added to this machine"
MyState* ms1 = new MyState("ms1");
MyState* ms2 = new MyState("ms2", ms1);
QFinalState* fs = new QFinalState(ms2);

ms1->addTransition(ms2);
ms2->addTransition(fs);

machine.addState(ms1);
machine.addState(ms2);
machine.addState(fs);
machine.setInitialState(ms1);
// .. and so on 
```

但是，当我似乎无法在`machine.addState`调用时添加状态时：

```
QStateMachine::addState: state has already been added to this machine
QStateMachine::addState: state has already been added to this machine
Unrecoverable error detected in running state machine: Missing initial state in
compound state '' 
```

我也试过只离开构造函数而不调用`machine.addState`：

```
QStateMachine machine;
MyState* ms1 = new MyState("ms1");
MyState* ms2 = new MyState("ms2", ms1);
QFinalState* fs = new QFinalState(ms2);

ms1->addTransition(ms2);
ms2->addTransition(fs);
machine.setInitialState(ms1);
// .. and so on 
```

但是，在这种情况下，我收到以下错误：

```
QState::setInitialState: state 0xa05e5e0 is not a child of this state (0x43fe94)

QStateMachine::start: No initial state set for machine. Refusing to start. 
```

最后一个很奇怪，因为我明确声明了初始状态`ms1`，然后我调用`start`了，所以我不知道那里有什么问题。有人对如何让这个例子起作用有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:58:17.317

没有什么像`start()`slot in `QState`- 但它存在于`QStateMachine`.

我想你想重新实现

```
virtual void    onEntry ( QEvent * event )
virtual void    onExit ( QEvent * event ) 
```

方法：

```
class MyState: public QState
{
    Q_OBJECT
private:
    QString _stateName;
public:
    MyState(QString stateName, QState * parent = 0):QState(parent), _stateName(stateName){}
    ~MyState(){}

protected:
   virtual  void onEntry(QEvent * event)
    {
        qDebug() << _stateName << " start.";
    }

   virtual  void onExit(QEvent * event)
    {
        qDebug() << _stateName << " stop.";
    }
signals:
    void finished();
    //void exited();
}; 
```

这工作得很好。

# xcode - 是否可以在 Xcode 中设置系统字体？

> ID：14712737
> 
> 赞同：4
> 
> 时间：2013-02-05T16:55:29.363
> 
> 标签：xcode, uilabel, retina-display, system-font

在 Xcode 中，我使用带有字体系统的固定 UILabel，在 IB 中设置文本并通过按设置大小以完全适合`Command``=`

如果我在 iPad 2 或 iPad 模拟器（非视网膜）上运行它，它会显示 OK。如果我在 iPad 3 或 iPad 模拟器（视网膜）上运行它，它有时会截断文本。文本截断示例：“Min.” 显示为“M ..”

经过一番搜索，我发现这是由于系统字体不同造成的：Helvetica on nonretina iPad。视网膜 iPad 上的 Helvetica Neue。因此，标签在设计时看起来不错，但在视网膜显示器上被切断了。Helvetica Neue 似乎稍微宽一些。如果我在 IB 中将字体硬编码为 Helvetica Neue 并按 Command-=，则将大小调整 1 个像素以适合字体。

Xcode 中的 IB 似乎正在使用 Helvetica。我可以在某处将其切换到 Helvetica Neue 吗？我宁愿切换 Xcode 中使用的字体，而不是将我所有的字体硬编码为 Helvetica Neue。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T07:50:14.893

您的直觉是正确的，您不想对特定字体进行硬编码，因为对系统字体的进一步更改会使您的应用看起来过时或尴尬。为避免这种情况，请使用 Autolayout（基于约束的布局）使标签动态适合文本。

请参阅 2013 年 WWDC 视频，特别是**Building User Interfaces for iOS7**以讨论类型系统的更新和**Take Control of Auto Layout in Xcode 5**以讨论实现布局更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T14:00:58.777

您所问的问题已在此处得到解答：[为 xcode 项目设置默认字体样式、颜色和大小](https://stackoverflow.com/questions/10638954/set-the-default-font-style-color-and-size-for-an-xcode-project)。这是该答案中引用的 WWDC 会话视频，并说明了如何自定义默认 UI：[https ://developer.apple.com/videos/wwdc/2012/?id=216](https://developer.apple.com/videos/wwdc/2012/?id=216)

# java - timepicker:- 如何显示上午和下午？

> ID：14712742
> 
> 赞同：0
> 
> 时间：2013-02-05T16:55:40.850
> 
> 标签：java, android

我的应用程序有时间选择器来选择我能够获取小时和分钟的时间，然后以编程方式通过短信发送，我可以使用发送小时和分钟

获取当前时间（）

获取当前分钟（）

我如何从时间选择器中获取上午和下午？可能吗？我不使用对话框，直接使用时间选择器

我希望时间采用这种格式，例如。下午 4:30

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:59:37.097

将`hourOfDay`永远是`24-hour`。如果您打开`dialog`with`is24HourView`设置为`false`，用户将不必处理`24-hour`格式化时间，但 Android 会将其转换为`24-hour`它调用的时间`onTimeSet()`。

来源：- 1）[如何从时间选择器获取 AM/PM](https://stackoverflow.com/a/2660148/519718)

2）[第二种方法](https://stackoverflow.com/a/11795693/519718)

您可以随时将 24 小时格式转换为 12 小时格式，执行如下操作

```
String s = "12:18:00";
DateFormat f1 = new SimpleDateFormat("hh:mm:ss");
Date d = f1.parse(s);
DateFormat f2 = new SimpleDateFormat("h:mma");
f2.format(d).toLowerCase(); // "12:18am" 
```

也通过[这个](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)文档

# c# - 从属于其 URL 包含问号（查询字符串）的订阅的 Google 阅读器获取提要项目？

> ID：14712751
> 
> 赞同：0
> 
> 时间：2013-02-05T16:56:00.267
> 
> 标签：c#, rest, oauth, google-reader

我正在尝试使用对[https://www.google.com/reader/api/0/stream/contents/feed/](https://www.google.com/reader/api/0/stream/contents/feed/) {FEED URL}?ot=1253052000&r的常规 GET 请求在 Google 阅读器中获取属于特定订阅的提要=n&xt=user/-/state/com.google/read&n=20&ck=1255646178892&client=myApplication.

一切似乎都很好，除非 URL 包含查询字符串，例如[http://www.aljazeera.com/Services/Rss/?PostingId=2007731105943979989](http://www.aljazeera.com/Services/Rss/?PostingId=2007731105943979989)。我收到错误，当我检查响应时，我被告知“在此服务器上找不到请求的 URL '/reader/api/0/stream/contents/feed/{SUBSCRIPTION URL MINUS QUERY STRING}'”。我知道订阅 URL 和请求 URL 的查询字符串不知何故混淆了。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:58:05.603

您想对提要 URL 进行 URL 编码。url 中有一种编码，可以将任何特殊字符转换为不会干扰查询操作的字符序列。当人们使用空格时，您会经常看到这一点，您的浏览器会将`%20`.

在 C# 中，我知道找到 UrlEncode 的地方是[HttpUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx)

## 更新

是的，[WebUtility.UrlEncode(string url)](http://msdn.microsoft.com/en-us/library/system.net.webutility.urlencode.aspx)方法也可以工作。

这个想法是，当您有要插入 url 的文本，但您不希望它影响 url 的行为/解析时，您可以对要插入的文本进行编码。显然，将一个网址插入另一个网址可能会导致不良结果，因此您放入 {FEED URL} 的网址是需要编码的。

例子：

```
// The ?, &, and :// will likely cause some interesting parsing by
// the target webserver.
var feedUrl = "http://site.com/url?a=1&b=2";

var serviceUrl = "https://www.google.com/reader/api/0/stream/contents/feed/{0}?ot=1253052000&r=n&xt=user/-state/com.google/read&n=20&ck=1255646178892&client=myApplication";

var resultUrl = string.Format(serviceUrl, WebUtility.UrlEncode(feedUrl)); 
```

结果网址将是：

```
https://www.google.com/reader/api/0/stream/contents/feed/http%3A%2F%2Fsite.com%2Furl%3Fa%3D1%26b%3D2?ot=1253052000&r=n&xt=user/-state/com.google/read&n=20&ck=1255646178892&client=myApplication 
```

哪个应该对你有用。

# python - 使用 inlineCallbacks

> ID：14712752
> 
> 赞同：8
> 
> 时间：2013-02-05T16:56:03.437
> 
> 标签：python, twisted, deferred

我是 Twisted 的新手，我正在尝试编写一个简单的资源来显示数据库中的名称列表，这是我的代码的一部分：

```
#code from my ContactResource class
def render_GET(self, request):
    def print_contacts(contacts, request):
        for c in contacts:
            request.write(c.name)
        if not request.finished:
            request.finish()
    d = Contact.find() #Contact is a Twistar DBObject subclass
    d.addCallback(print_contacts, request)
    return NOT_DONE_YET 
```

我的问题是：如何更改此方法以使用 inlineCallbacks 装饰器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T17:05:22.950

方法`render_GET`可能不会返回`Deferred`. 它可能只返回一个字符串或`NOT_DONE_YET`. 任何用 装饰的方法`inlineCallbacks`都将返回一个`Deferred`. 所以，你不能`render_GET`用`inlineCallbacks`.

当然，没有什么能阻止你调用你想要 in 的任何其他函数`render_GET`，包括返回 a 的函数`Deferred`。只需将其`Deferred`扔掉而不是从其返回`render_GET`（当然，请确保`Deferred`永远不会因失败而触发，或者将其扔掉，您可能会丢失一些错误报告......）。

因此，例如：

```
@inlineCallbacks
def _renderContacts(self, request):
    contacts = yield Contact.find() 
    for c in contacts:
        request.write(c.name)
    if not request.finished:
        request.finish()

def render_GET(self, request):
    self._renderContacts(request)
    return NOT_DONE_YET 
```

如果你打算使用 Twisted 进行任何严肃的 Web 开发，我建议至少看看[txyoga](https://readthedocs.org/projects/txyoga/)和[klein 。](http://dreid.org/programming/2012/03/28/klein-a-twisted.web-microframework/)即使您不想使用它们，它们也应该为您提供一些关于如何构建代码并完成各种常见任务的好主意。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-05T17:15:29.817

编辑：我没有找到如何将 twisted.web 与 inlineCallbacks 结合使用的示例，但这里有两个建议。第一个更好，但我不确定它是否有效。

```
@inlineCallbacks
def render_GET(self, request):
    contacts = yield Contact.find() 
    defer.returnValue(''.join(c.name for c in contacts)

@inlineCallbacks
def render_GET(self, request):
    contacts = yield Contact.find() 
    for c in contacts:
        request.write(c.name)
    if not request.finished:
        request.finish()
    defer.returnValue(NOT_DONE_YET) 
```

# php - .htaccess 和 php 重定向导致循环

> ID：14712754
> 
> 赞同：0
> 
> 时间：2013-02-05T16:56:08.840
> 
> 标签：php, .htaccess

嘿，我搜索了所有相关问题，但没有找到适合我的案例的任何解决方案。

**我有一个带有如下网址的脚本：**

```
htt://www.example.com/index.php/dosomthing/parametrs 
```

**现在我用这个：**

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

然后在我的默认控制器中检查用户是否登录，如果没有，我使用此类函数将其重定向到登录控制器：

```
function redirect($uri = '', $method = 'location', $http_response_code = 302)
    {
        $uri = $this->config['home_url'] . ltrim($uri, '/');

        switch($method)
        {
            case 'refresh'  : header("Refresh:0;url=".$uri);
                break;
            default         : header("Location: ".$uri, TRUE, $http_response_code);
                break;
        }

        $this->dija = null;

        exit;
    } 
```

它适用于本地主机，但在主机上它不起作用并导致重定向循环，我真的很沮丧，不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:18:06.880

将您的 RewriteRule 更改为：

```
RewriteRule ^(.*)$ index.php?$1 [L] 
```

在旧情况下，您总是重写到相同的旧 url，只是再次添加 index.php 部分，因为没有名为“index.php/”的文件

# arrays - 对字符数组进行排序

> ID：14712763
> 
> 赞同：-4
> 
> 时间：2013-02-05T16:56:31.990
> 
> 标签：arrays, algorithm, sorting

有一个由 100 个块组成的数组，这里每个块包含一种颜色，这种颜色随机来自一个字符数组 a,b,c,...,z。

例如：abdegihfda

现在您必须编写一个程序，该程序将返回具有以下条件的排序数组。

1.  应遵循以下交换顺序。

字符最大交换

一个 1

b 2

3

……

26

输出：aabddefhgi

我使用了以下方法。

//返回块数

int getNoOfBlocks();

//返回特定块的字母

字符 getData(int);

//交换值

无效交换块（int，int）；

无效排列块（无效）

{

int size = getNoOfBlocks();

```
for(int i = 0 ; i < size; i++)

    {

        int min = getData(i)-97;

        int pos = 0;

        int ascii = 0;

        for(int j = i + 1; j < size; j++)

            {

               ascii = getData(j)-97;

                if(min > ascii)

                  {

                      min = ascii;

                      pos = j;

                  }

            }

        swapBlock(i, pos+1);

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:46:04.743

您正在交换错误的元素，它应该是：

```
 swapBlock(i, pos); 
```

你的第一个循环也是错误的，它应该是：

```
 for(int i = 0 ; i < size - 1; i++) 
```

# c# - 使用 EF 5 和 MVC 4 未在相关表中获得结果

> ID：14712771
> 
> 赞同：0
> 
> 时间：2013-02-05T16:56:53.313
> 
> 标签：c#, entity-framework, asp.net-mvc-4, entity-relationship

C#/ASP.NET 的全新...

我有 2 个表：Administrators 和 AdministratorsRights。在 Administrators 表中，每个管理员都有一个 AdministratorsRightsID。这是我的管理员类（模型）：

```
public partial class administrator
{
    [Key]
    public int AdministratorID { get; set; }

    [Required]
    public int AdministratorsRightsID { get; set; }

    [Required]
    public string UserName { get; set; }

    [Required]
    public string LastName { get; set; }

    [Required]
    public string FirstName { get; set; }

    [Required]
    public string StandardID { get; set; }

    public virtual administratorsright RightsLevel { get; set; }

} 
```

这是我的控制器：

```
public ActionResult Index()
{
    return View(db.administrators.ToList());
} 
```

这是我的观点（剃刀）：

```
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.RightsLevel)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UserName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FirstName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.StandardID)
        </td>
        <td>
            @Html.ActionLink("Edit", "edit", new { id=item.AdministratorID }) |
            @Html.ActionLink("Details", "details", new { id=item.AdministratorID }) |
            @Html.ActionLink("Delete", "delete", new { id=item.AdministratorID })
        </td>
    </tr>
} 
```

除了视图中的 item.RightsLevel 之外，所有内容都会显示出来。我试图让它显示名称而不是 ID（系统管理员，而不是“1”）。我并不惊讶这不起作用，因为我没有告诉它查看哪一列，但问题是，我不知道在哪里做。我猜我的模型不正确，因为我怀疑所有这些逻辑都应该发生在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:00:44.870

这将取决于您的 AdministratorRights 表以及您拥有的字段。好消息是您可以在 DisplayFor 帮助器中更进一步，让它拉出正确的字段：

`@Html.DisplayFor(modelItem => item.RightsLevel.RightsLevelName)`

`RightsLevelName`您要显示的字段的实际名称在哪里。

# c# - NCache 查询性能问题

> ID：14712779
> 
> 赞同：3
> 
> 时间：2013-02-05T16:57:05.633
> 
> 标签：c#, server-side, load-testing, ncache

我正在评估 NCache 在正在进行的项目中作为“通读”缓存的用途 - 以减轻 SQL 服务器的负载。
在客户端，该项目有一个轮询例程，用于接收按上次轮询日期时间过滤的项目（在服务器端）。
轮询以固定间隔在单独的线程中发生。
客户端的伪代码
1）第一次获取：

1.  获取所有现有项目
2.  将**LastHandledDate**设置为现在

2）非首次获取（轮询线程）

1.  获取在**LastHandledDate之后创建的现有项目**
2.  **将 LastHandledDate**更新为现在

在服务器端，当接收到轮询查询时，会执行以下伪代码：

1.  查询 NCache 以获取**CreationDate** >= **LastHandledDate的所有匹配项**
2.  IF 查询结果为空
    1.  查询 SQL 数据库以获取**CreationDate** >= **LastHandledDate的所有匹配项**
    2.  如果查询不为空，则使用 SQL 查询结果更新 NCache
    3.  返回 SQL 查询结果
3.  ELSE 返回 NCache 查询结果

要查询 NCache，我使用的是它的 linq 提供程序，查询类似于 SQL 查询：

```
SELECT * FROM Messages WHERE Message.SessionId = 1234 AND Message.EntryDate >= ‘2012-10-6’ 
```

编辑：在测试期间，在客户端有一个线程以恒定速率添加新项目

服务器端部分托管在 Web 服务（IIS 中的 WCF）中。
在使用 100 个客户端对上述轮询设置进行了大约一个小时的负载测试后，我注意到 Web 服务正在执行的请求/秒稳步下降。

运行上面的设置，只从 NCache 读取，根本没有 SQL 读取（在服务器端伪代码中没有第**2段）在请求/秒中产生了相同的下降模式。**

我有几个问题：

*   似乎 NCache 的查询性能取决于缓存中的对象总数。类似解决方案（NoSQL / Distributed Cache）中是否存在这种情况
*   哪种 NoSQL/分布式缓存解决方案针对查询速度进行了优化？
*   也许在 NCache 中查询可以更优化？
*   也许我遗漏了一些东西——而且我的分布式缓存使用模式不正确——如何在我的用例中有效地使用分布式缓存，例如 NCache？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T15:56:43.513

尝试为您的课程使用**查询索引**。

我在缓存中使用了 100k 个项目（每个项目大小约为 250kb）并且没有任何性能问题。

# jquery - Jquery Hover 问题 - 多次调用脚本

> ID：14712784
> 
> 赞同：1
> 
> 时间：2013-02-05T16:57:17.650
> 
> 标签：jquery, hover

我有一个简单的脚本，其中一个按钮包含在一个带有标签 ID 的 DIV 中。悬停时显示另一个具有内容 id 的 div。两个 DIV 都包含在 ID 为 basket-top 的 DIV 中。悬停调用附加到此 div。这是HTML：

```
<div id="basket-top">
    <div id="content"><br />
            <br />
            content here<br />
            <br />
    </div>
    <div id="label">label here</div>
</div><!-- /basket-top --> 
```

这是JS：

```
$("#basket-top").hover( function () {
    $("#basket-top #content").slideDown(500);
}, function () {
    $("#basket-top #content").slideUp(500);
}); 
```

这工作正常，直到用户快速进出，一遍又一遍地调用该函数并且图层上下滑动几次。如果前一个动作没有完成，有没有办法阻止函数被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:03:52.163

首先，`"#basket-top #content"`这是不必要的，因为 ID 必须是唯一的。`"#content"`足够了。其次，参见 jQuery 的[.stop()](http://api.jquery.com/stop/)函数。

```
$("#basket-top").hover( function () {
    $("#content").stop(true,true).slideDown(500);
}, function () {
    $("#content").stop(true,true).slideUp(500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:18:49.223

`content`当您将鼠标悬停在上方时，这将显示除法`label`

```
$("#content").hide();
$("#label").hover(function () {
    $("#content").stop(true, true).slideDown(500);
}, function () {
    $("#content").stop(true, true).slideUp(500);
}); 
```

[**JsFIDDLE 在这里**](http://jsfiddle.net/aaaheatair/82Yhb/)

另外，在旁注中，您应该仔细检查您在此处提出的所有问题并接受正确的答案。当您发布新问题时，这将使其他人想要帮助您。并感谢那些花时间帮助你的人。

# python - 支持 gzip 的 urlgrabber

> ID：14712786
> 
> 赞同：0
> 
> 时间：2013-02-05T16:57:27.620
> 
> 标签：python

`Content-Encoding: gzip`使用[urlgrabber](http://urlgrabber.baseurl.org/)时处理文件的推荐方法是什么？

现在我正在像这样修补它：

```
g = URLGrabber(http_headers=(("Accept-Encoding", "gzip"),))
g.is_compressed = False # I don't know yet if the server will send me compressed data

# Backup current method of handling downloaded headers
try:
    PyCurlFileObject.orig_hdr_retrieve
except AttributeError:
    PyCurlFileObject.orig_hdr_retrieve = PyCurlFileObject._hdr_retrieve

def hdr_retrieve(instance, buf):
    r = PyCurlFileObject.orig_hdr_retrieve(instance, buf)
    if "content-encoding" in buf.lower() and "zip" in buf.lower():
        g.is_compressed = True
    return r
PyCurlFileObject._hdr_retrieve = hdr_retrieve

g.urlgrab(url, dest)

if g.is_compressed:
    # ungzip file here 
```

但它看起来不是很干净，我担心它也不是线程安全的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:34:38.570

我想我找到了一个线程安全的解决方案：

```
g = URLGrabber((http_headers=(("Accept-Encoding", "gzip"),)))
g.opts._set_attributes(grabber=g)
try:
    PyCurlFileObject.orig_setopts
except AttributeError:
    PyCurlFileObject.orig_setopts = PyCurlFileObject._set_opts

    def setopts(instance, opts={}):
        PyCurlFileObject.orig_setopts(instance, opts)
        grabber = instance.opts.grabber
        grabber.is_compressed = False

        def hdr_retrieve(buf):
            r = PyCurlFileObject._hdr_retrieve(instance, buf)
            if "content-encoding" in buf.lower() and "zip" in buf.lower():
                grabber.is_compressed = True
            return r

        instance.curl_obj.setopt(pycurl.HEADERFUNCTION, hdr_retrieve)
    PyCurlFileObject._set_opts = setopts 
```

但它仍然感觉不太“干净”:)

# c# - XNA 与列表中多个矩形的碰撞

> ID：14712792
> 
> 赞同：0
> 
> 时间：2013-02-05T16:57:43.257
> 
> 标签：c#, list, foreach, xna, collision

我正在重制一款非常老的游戏。有线条（蠕虫），你可以用箭头键控制它们。每个玩家都有一条线。问题是，当我尝试与当前的碰撞时我的矩形与列表中以前的矩形之一的位置不起作用..如果你能帮助我，那就太棒了..非常感谢..

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Texture2D dotTexture;
    Rectangle dotRectangle;
    Vector2 dotCenter;
    Vector2 dotPosition;
    float dotRotation;
    Vector2 dotVelocity;
    float dotSpeed = 1.5f;

    bool smrt1 = false;

    Texture2D previousDotTexture;
    List<Vector2> previousDotsList = new List<Vector2>();
    List<Rectangle> previousRecsList = new List<Rectangle>();

    Random random = new Random();

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        graphics.PreferredBackBufferHeight = 800;
        graphics.PreferredBackBufferWidth = 800;
    }

    protected override void Initialize()
    {            
        base.Initialize();
    }

    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);

        dotTexture = Content.Load<Texture2D>("dot2");
        dotPosition = new Vector2(random.Next(200, 600),random.Next(200, 600));

        previousDotTexture = Content.Load<Texture2D>("dot1");

    }

    protected override void UnloadContent()
    {

    }

    protected override void Update(GameTime gameTime)
    {
        if (Keyboard.GetState().IsKeyDown(Keys.Escape))
            this.Exit();

        if (Keyboard.GetState().IsKeyDown(Keys.Left))
            dotRotation += 0.1f;

        if (Keyboard.GetState().IsKeyDown(Keys.Right))
            dotRotation -= 0.1f;

        if (Keyboard.GetState().IsKeyDown(Keys.Space) && smrt1==true)
        {
            Thread.Sleep(500);
            dotPosition = new Vector2(random.Next(200, 600), random.Next(200, 600));
            previousDotsList.Clear();
            dotSpeed = 1.5f;
            smrt1 = false;
        }

        dotRectangle = new Rectangle((int)dotPosition.X, (int)dotPosition.Y, dotTexture.Width, dotTexture.Height);
        dotPosition = dotVelocity + dotPosition;
        dotCenter = new Vector2(dotRectangle.Width / 2, dotRectangle.Height / 2);

        dotVelocity.X = (float)Math.Sin(dotRotation) * dotSpeed;
        dotVelocity.Y = (float)Math.Cos(dotRotation) * dotSpeed;

        Vector2 previousDotsPos = dotPosition;
        Rectangle previousDotsRecs = new Rectangle((int)dotCenter.X, (int)dotCenter.Y, 2, 2);
        previousDotsList.Add(previousDotsPos);
        previousRecsList.Add(previousDotsRecs);

        CheckCollision();

        base.Update(gameTime);
    }

    private void CheckCollision()
    {
        foreach (Rectangle previousDotsRecs in previousRecsList)
        {
            if (dotRectangle.Intersects(previousDotsRecs))
            {
                smrt1 = true;
                dotSpeed = 0f;
            }
        }
    }

    private void DrawDots()
    {
        foreach (Vector2 previousDotsPos in previousDotsList)
            spriteBatch.Draw(previousDotTexture, previousDotsPos, Color.White);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.Black);

        spriteBatch.Begin();

        DrawDots();
        spriteBatch.Draw(dotTexture, dotPosition, null, Color.White, dotRotation, dotCenter, 1f, SpriteEffects.None, 0);

        spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:25:28.793

在我看来，你永远不会发生碰撞，因为每次游戏更新（每秒 30 次）你都会创建一个新的矩形，这并不好。所以你必须得到移动的矩形，在移动时增加它们的 x 和 y，然后检查交叉点。

# ios - 无法为此找到正确的日期格式 (NSDateFormatter)

> ID：14712801
> 
> 赞同：1
> 
> 时间：2013-02-05T16:58:12.193
> 
> 标签：ios, string, nsdate, nsdateformatter

我无法将这种字符串转换为 NSDate，请在这里帮帮我。我在下面做错了什么？

```
dateString = @"201302051614461";
NSDateFormatter *dateFormatter = [NSDateFormatter new];
[dateFormatter setDateFormat:@"YYYYMMddHHmmSSSSS"];
NSDate *date = [dateFormatter dateFromString:dateString];
NSLog(@"dateString: %@", dateString);
NSLog(@"date: %@", date); 
```

这将返回一个空日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:09:58.313

如果我像这样打破它`2013 02 05 16 14 46 1`
那么格式字符串是`@"yyyyMMddHHmmssS`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:12:36.757

`@"yyyyMMddHHmmssS"`-- YYYY 在很多情况下会给你错误的年份，而 capitol`S`是小数秒。

# c++ - 警告：新的非常量数组大小，无法验证初始化列表的长度

> ID：14712802
> 
> 赞同：2
> 
> 时间：2013-02-05T16:58:13.980
> 
> 标签：c++, gcc-warning

我面临与此类似的问题。

```
int j = 6;
int *k = new int[j]{4}; 
```

警告是：

```
warning: non-constant array size in new, unable to verify length 
of initializer-list [enabled by default] 
```

我只面临警告，没有错误，我使用 -std=gnu++11 运行

另外，我希望为每个实例调用构造函数。如果我打印数组值，所有

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:10:18.780

问题正是编译器告诉你的。

该维度仅在运行时已知，因此您只能使用运行时功能，例如：

```
std::vector<int> v(j, 4);
// `v` contains `j` ints, all initialised to `4` 
```

如果你有一个不能默认构造的元素类型，你可以就地构造元素：

```
std::vector<T> v;
v.reserve(j);
for (size_t i = 0; i < j; i++)
   v.emplace_back(ctor-args-here); 
```

您可能还可以使用初始化列表：

```
std::vector<T> v{
   T(ctor-args-here), T(ctor-args-here), T(ctor-args-here),
   T(ctor-args-here), T(ctor-args-here), T(ctor-args-here)
}; 
```

并且对象将被移动，或者最坏的情况是被复制。

这里的重点是向量元素*不需要*是默认可构造的。

（不幸的是，我不知道没有循环或代码重复的方法。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:23:26.683

据我所知，C++11 标准的第 8.5/16 节几乎消除了调用用户定义的构造函数以统一初始化类类型数组的所有元素的可能性。这是相关的文本（我已经剪掉了一些看起来不相关的列出的项目）：

> 初始化器的语义如下。目标类型是正在初始化的对象或引用的类型，源类型是初始化表达式的类型。如果初始化器不是单个（可能是带括号的）表达式，则未定义源类型。
> 
> — 如果初始值设定项是（无括号的）大括号初始化列表，则对象或引用是列表初始化的（8.5.4）。
> 
> — 如果初始值设定项是 ()，则对象是值初始化的。
> 
> — 否则，如果目标类型是数组，则程序格式错误。

# java - Install4j 安装程序在第一个欢迎屏幕之前停止，出现 NullPointerException

> ID：14712804
> 
> 赞同：1
> 
> 时间：2013-02-05T16:58:20.857
> 
> 标签：java, install4j

我们有一个 install4j 安装程序，它在“正在准备 install4j 向导”阶段结束时停止，就在“欢迎使用...安装向导”屏幕之前。这发生在两个客户（数千名）中，他们都运行 Windows 7。以前从未发生过这种情况，我们已经使用 install4j 多年了。安装程序不会挂起 - 您可以取消它。它只是停止。我们从其中一个日志文件中得到以下信息。我们已经发送了经过检查的替换 CD 等。我们尝试了“以管理员身份运行”。关于可能导致这种情况的任何想法？

```
java.lang.NullPointerException
    at java.awt.Dimension.<init>(Unknown Source)
    at javax.swing.plaf.basic.BasicProgressBarUI.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.preferredLayoutSize(Unknown Source)
    at java.awt.Container.preferredSize(Unknown Source)
    at java.awt.Container.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.preferredLayoutSize(Unknown Source)
    at java.awt.Container.preferredSize(Unknown Source)
    at java.awt.Container.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.ArrangeGrid(Unknown Source)
    at java.awt.GridBagLayout.arrangeGrid(Unknown Source)
    at java.awt.GridBagLayout.layoutContainer(Unknown Source)
    at java.awt.Container.layout(Unknown Source)
    at java.awt.Container.doLayout(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validate(Unknown Source)
    at java.awt.Window.show(Unknown Source)
    at java.awt.Component.show(Unknown Source)
    at java.awt.Component.setVisible(Unknown Source)
    at com.install4j.runtime.wizard.WizardBase.setVisible(Unknown Source)
    at com.install4j.runtime.wizard.WizardBase.showFrame(Unknown Source)
    at com.install4j.runtime.installer.frontend.WizardScreenExecutor.execute(Unknown Source)
    at com.install4j.runtime.installer.controller.Controller$1.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

java.lang.NullPointerException
    at java.awt.Dimension.<init>(Unknown Source)
    at javax.swing.plaf.basic.BasicProgressBarUI.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.preferredLayoutSize(Unknown Source)
    at java.awt.Container.preferredSize(Unknown Source)
    at java.awt.Container.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.preferredLayoutSize(Unknown Source)
    at java.awt.Container.preferredSize(Unknown Source)
    at java.awt.Container.getPreferredSize(Unknown Source)
    at javax.swing.JComponent.getPreferredSize(Unknown Source)
    at java.awt.GridBagLayout.GetLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.getLayoutInfo(Unknown Source)
    at java.awt.GridBagLayout.ArrangeGrid(Unknown Source)
    at java.awt.GridBagLayout.arrangeGrid(Unknown Source)
    at java.awt.GridBagLayout.layoutContainer(Unknown Source)
    at java.awt.Container.layout(Unknown Source)
    at java.awt.Container.doLayout(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validateTree(Unknown Source)
    at java.awt.Container.validate(Unknown Source)
    at com.install4j.runtime.wizard.StandardScreen$1.componentResized(Unknown Source)
    at java.awt.Component.processComponentEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:04:34.297

这很可能是由客户计算机上的特定（自定义？）外观引起的。因此，如果他们将外观重置为默认值，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T15:07:41.103

我有一个非常相似的堆栈跟踪，并根据上面 ben75 的答案在 Install4J 帮助（[http://resources.ej-technologies.com/install4j/help/doc/index.html](http://resources.ej-technologies.com/install4j/help/doc/index.html)）中找到以下内容

-Dinstall4j.nolaf=true

这解决了我在某些 Windows 7 和 Windows 8 系统上运行的安装程序的问题。

# parsing - LALR 语法解析

> ID：14712805
> 
> 赞同：1
> 
> 时间：2013-02-05T16:58:24.677
> 
> 标签：parsing, compiler-construction

假设我有语法（`LALR`解析）

```
 S->Ba|bBc 
```

可以使用某些解析器实际构建解析表（使用`action`和）吗`goto`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:27:31.027

有许多解析器可以满足您的要求。具有在线解析功能的解析器位于此[链接](http://www.supereasyfree.com/software/simulators/compilers/principles-techniques-and-tools/parsing-simulator/parsing-simulator.php)。这个解析器有很多可用的选项。这是您需要传递语法的实际实现，它将为您生成解析表。不确定`action`and `goto`。

`Yacc`也是你可以看看的。这是[链接](http://linux.die.net/man/1/yacc)。希望这对你有帮助..

# .net - psexec 和 process.start，waitforexit

> ID：14712807
> 
> 赞同：0
> 
> 时间：2013-02-05T16:58:29.913
> 
> 标签：.net, vb.net, psexec

任务：使用管理员帐户将文件从远程计算机复制到远程计算机

代码 ：

```
 psi.FileName = "cmd.exe"
    psi.Arguments = ParaStr
    psi.UserName = StrUserID
    psi.Password = ConvertToSecureString(txtAdminPassword.Text)
    psi.Domain = StrDomain
    psi.WindowStyle = ProcessWindowStyle.Normal
    psi.UseShellExecute = False
    Dim proc As New Process
    proc.StartInfo = psi
    proc.Start() 
```

ParaStr= /k psexec.exe -h /user AdminUser \SourceMachine cmd /c Copy \sourcepc\file1 \destpc\folder

所以在执行命令时，它会提示输入管理员密码，一旦验证，它会复制文件并结束

这工作正常

我想检查实际复制工作何时完成（文件大小未知，因此有时需要 3/4 小时以上）

我保持 cmd 窗口打开以查看进程是否结束，它将返回任务已完成或在命令提示符下失败的消息

当过程结束时，我如何通过 VB 检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:10:30.527

在控制台应用程序上，您可以设置进程退出代码并在父调用进程上检查相同的内容，并根据退出代码确定它是否成功

```
you can return it from Main if you declare your Main method to return an int, or call Environment.Exit(code) 
```

检查退出代码

```
 p.StartInfo = new ProcessStartInfo("RegSvr32");
        p.Start();

        p.WaitForExit();

        return p.ExitCode; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T18:16:36.907

你有没有尝试过这样的事情？

[http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/6dca867b-0881-4ff9-b336-d03761df0377](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/6dca867b-0881-4ff9-b336-d03761df0377)

`StandardOutput`一旦过程完成，您应该能够捕获。那应该给你成功/失败。然后就是关于如何在启动进程的 VB 应用程序中处理进程完成事件的全部内容。

# java - 使用 java 将附件上传到 zendesk

> ID：14712814
> 
> 赞同：1
> 
> 时间：2013-02-05T16:58:55.933
> 
> 标签：java

我正在尝试将附件上传到[zendesk](http://developer.zendesk.com/documentation/rest_api/attachments.html)。从您必须使用的 API 文档中

```
 curl -u username:password -H "Content-Type: application/binary" \
--data-binary @file.dat -X POST \
"https://helpdesk.zendesk.com/api/v2/uploads.json?filename=myfile.dat&token=                       {optional_token}" 
```

我正在尝试用 java 做同样的事情。我可以上传文件并接收正确的 json 响应。但是，如果我在 zendesk 服务器上打开文件，则无法识别该文件。如果我从命令行使用 curl 上传相同的文件，一切正常。我在这里做错了什么？这是我用来上传文件的java代码。

```
public static void main(String[] args) throws IOException {
    File file = new File("C:\\Users\\user\\Documents\\zendesk2\\Zendesk\\src\\main\\resources\\scrat.jpg");
    try {
        MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        multipartEntity.addPart("filename", new StringBody(file.getName()));
        FileBody fileBody = new FileBody(file, "application/octet-stream");
        multipartEntity.addPart("attachment", fileBody);

        // -u admin:password
        Credentials credentials = new UsernamePasswordCredentials("username", "passw");
        DefaultHttpClient httpClient = new DefaultHttpClient();
        httpClient.getCredentialsProvider().setCredentials(AuthScope.ANY, credentials);

        // -X POST
        HttpPost httpPost = new HttpPost("https://testserver.zendesk.com/api/v2/uploads.json");

        // @ - absolute path
        httpPost.setEntity(multipartEntity);

        // process response
        HttpResponse response = httpClient.execute(httpPost);

        HttpEntity resEntity = response.getEntity();

        if (resEntity != null) {
            long len = resEntity.getContentLength();
            if (len != -1 && len < 2048) {
// this result is being parsed with gson....
                System.out.println(EntityUtils.toString(resEntity));
            } else {
                // Stream content out
            }
        }

        httpClient.getConnectionManager().shutdown();

    } catch (Exception e) {
        //-f, fail silently}

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:44:03.573

我一直在[为 Zendesk 开发 Java 客户端](https://github.com/cloudbees/zendesk-java-client)。

*您可以使用当前0.0.3-SNAPSHOT*版本的代码上传附件。我可能会在不久的将来添加更多功能。

以下是 API 当前工作方式的一些示例代码：

```
ZenDesk zd = new ZenDesk.Builder("https://{{your domain}}.zendesk.com")
        .setUsername("...")
        .setToken("...") // or .setPassword("...")
        .build();

byte[] contents = new byte[file.length()];
FileInputStream fis = new FileInputStream(fis);
fis.read(contents);
fis.close();

Attachment.Upload upload = zd.createUpload(file.getName(), "application/binary", contents);

zd.close(); 
```

希望这会有所帮助（请注意，上面的示例代码并未针对异常进行整理，但应该为您提供 API 工作的基本方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T00:05:27.897

我知道这是旧的，但我花了一段时间才弄清楚如何做到这一点，我想分享。

1.  要将文件附加到工单，需要 3 个步骤。如果一张票不存在，则创建一张票（我知道，这应该很明显）并获取票号。
2.  为您的特定文件类型等创建上传，这将返回带有令牌属性的上传。
3.  通过使用包含单个令牌列表的注释引用票证 ID 来更新票证。

`Ticket ticket = zd.createTicket(ticket); Attachment.Upload upload = zd.createUpload(fileName, "application/binary", content); List tokens = new ArrayList<>(); tokens.add(upload.getToken()); Comment comment = new Comment(); comment.setBody("My upload"); comment.setTokenks(tokens); Ticket ticket = new Ticket(); ticket.setId(ticketId); ticket.setComment(comment); zd.upateTicket(ticket);`

# css - IE7中不显示按钮文本和按钮

> ID：14712816
> 
> 赞同：1
> 
> 时间：2013-02-05T16:59:07.113
> 
> 标签：css, internet-explorer-7

链接：[http](http://hyperiontx.cbstage.com/) ://hyperiontx.cbstage.com/ [注意：我没有制作小提琴，因为 jsfiddle 似乎不再兼容 IE7]

因此，使用兼容模式在 IE7 中打开此站点。右上角“搜索”按钮的文字没有显示，英雄区域的“阅读更多”按钮根本没有显示。我已经查看了两者的 CSS，只是不知道问题可能是什么 - 任何有 IE7 经验的人都可以解决这个问题吗？

**相关CSS**

右上角搜索按钮：

```
.block-search input[type="submit"] {
height: 26px;
width: auto;
padding: 0 6px;
color: white;
font-family: 'CantarellBold';
font-size: 12px;
font-weight: normal;
line-height: 0;
text-shadow: none;
text-transform: uppercase;
border-radius: 0;
border: none;
background: #71A655;
} 
```

英雄区“阅读原文”按钮：

```
.section-content a.button, .section-content input[type="reset"], .section-content input[type="submit"], .section-content input[type="button"] {
padding: 10px 12px;
color: white;
font-weight: normal;
line-height: 0;
text-shadow: none;
text-transform: uppercase;
background: #8cc65d;
background-image: -moz-linear-gradient(left top,#8cc65d 0%,#71a655 100%);
background-image: -webkit-gradient(linear,left top, right bottom,color-stop(0, #8cc65d),color-stop(1, #71a655));
background: -webkit-linear-gradient(left top, #8cc65d 0%, #71a655 100%);
background: -o-linear-gradient(left top, #8cc65d 0%, #71a655 100%);
background: -ms-linear-gradient(left top, #8cc65d 0%, #71a655 100%);
background: linear-gradient(left top, #8cc65d 0%, #71a655 100%);
border: none;
border-radius: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:10:48.763

从两个按钮中删除 css 属性 line-height:0 ，它们应该在 IE7 中显示。

# vb6 - 水晶报表5.2客户端？

> ID：14712821
> 
> 赞同：0
> 
> 时间：2013-02-05T16:59:30.953
> 
> 标签：vb6, crystal-reports

我收到了一个使用 Crystal Reports 的旧 vb6.0 应用程序的源代码。

原始项目文件显示：

```
Object={00025600-0000-0000-C000-000000000046}#5.2#0; Crystl32.OCX 
```

在我旧的 Visual Basic 6.0 安装 CD 中，我只有水晶报表 4.6 版。

当我尝试使用 Crystal Report Pro（4.6 版）从源代码打开其中一个 rpt 文件时，它会引发无法打开 rpt 错误。我怀疑 rpt 是使用“Crystal Report Pro 5.2 版”或类似的东西保存的。

你知道这个版本（5.2）是否存在吗？我怎样才能得到这个版本的水晶报告专业版的工作副本来编辑 rpts？

升级到较新的水晶版本是一个选项，只要它在 Visual Basic 6.0 中以相同的方式工作，即使用 Crystl32.ocx、相同的 API 等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:35:19.690

我有一个项目，我必须获取一些旧的 4.6 报告并使用版本 8 重新生成它们。我能够使用它，但我记得（大约 10 年）我必须重新生成 rpt 文件才能工作。我不得不做一些事情，比如打开它们并将它们重新保存为一个新文件。一点谷歌搜索表明 CR 仅支持旧报告的前向迁移（无法以旧格式保存），因此您的最后一段可能不会发生。

# c# - XNA 中的随机帧速率增加

> ID：14712828
> 
> 赞同：0
> 
> 时间：2013-02-05T16:59:57.253
> 
> 标签：c#, performance, optimization, xna

当我在 PC 上运行我的游戏（使用 c#/XNA 4.0 开发）时，我遇到了随机帧率***增加***。这些增加会在游戏过程中造成卡顿的影响。这通常发生在游戏启动时，并且频率足以令人讨厌.

例如 - 我的 FPS 计数器将从 62 跳到 85（导致轻微的卡顿）然后回到 62 并在 62/63 FPS 之间保持三分钟，然后跳到 78 然后再次回到 62/63。FPS 实际降至 60 以下的情​​况很少见。

关于发生了什么的任何想法？

***编辑 - 在下面添加了我的 FPS 代码 (02.06.2013)***

```
namespace Game
{
    class FPSDebuggerFont : Font
    {

        //int totalScore;

        //FramesPerSecond (FPS) debug variables
        int totalFrames = 0;
        int fps = 0;
        int elpaseMilliseconds = 1000;
        string fpsText;

        public FPSDebuggerFont(SpriteFont scoreFont, String text, Vector2 pos, Color color, float scale, float layerDepth)
            : base(scoreFont, text, pos, color, scale, layerDepth)
        {
        }

        public void FPSTime(GameTime gameTime)
        {
            //Algorithm for FPS debugging
            elpaseMilliseconds -= (float)gameTime.ElapsedGameTime.Milliseconds;
            if (elpaseMilliseconds < 0)
            {
                //FPS debugg info
                fps = totalFrames;
                elpaseMilliseconds = 1000;
                totalFrames = 0;
            }

        }

        public override void Update(GameTime gameTime)
        {
            FPSTime(gameTime);

        }

        public override void Draw(GameTime gameTime, SpriteBatch sB)
        {
            totalFrames++;
            fpsText = "Frames Per Second: " + fps;

            sB.DrawString(scoreFont, fpsText, pos, color, 0, Vector2.Zero, scale, SpriteEffects.None, layerDepth);

        }
    }
} 
```

为澄清起见，我不确定如何在不添加*整个*项目的情况下添加更多关于此的代码。但我当然可以添加更多信息；除了我的 Game 类，我还有两个使用 XNA 的 GameComponent 功能的类（SpriteManager、FontManager），每个类都包含自己的 Load Content、Update 和 Draw 方法，示例如下；

```
public class SpriteManager : Microsoft.Xna.Framework.DrawableGameComponent
{
    //Manager code
} 

public class FontManager : Microsoft.Xna.Framework.DrawableGameComponent
{
    //Manager code
} 
```

希望这些附加信息有所帮助。

***结束编辑***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:04:47.123

没有看到代码，它可能是任何东西。只要您`gameTime.ElapsedGameTime`在运动计算中使用它，它就不会导致任何口吃问题。

例如：

```
sprite.Location += sprite.Velocity * (float)gameTime.ElapsedGameTime.TotalSeconds; 
```

# java - 在 swt 中实现垂直侧边栏菜单？

> ID：14712834
> 
> 赞同：1
> 
> 时间：2013-02-05T17:00:12.473
> 
> 标签：java, menu, swt

目前我正在使用树作为菜单。

但是有没有办法在 SWT 中实现一个漂亮的菜单？（见图）

![在此处输入图像描述](../Images/2b68076436f667cc92e37624935fdad9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:11:10.683

我不确定“美丽”，但有[`CollapsibleButtons`](http://www.eclipse.org/nebula/widgets/collapsiblebuttons/collapsiblebuttons.php)来自[Nebula Project](http://www.eclipse.org/nebula/)的小部件。

它看起来像这样：

![在此处输入图像描述](../Images/dadecf0256f3d5a7f591ac0d75960b45.png)

如果这不是您想要的，我建议[您创建自己的](http://eclipse.org/articles/Article-Writing%20Your%20Own%20Widget/Writing%20Your%20Own%20Widget.htm) `Button`，看起来像您的屏幕截图中的那些，并将它们添加`RowLayout`到`Composite`充当侧边栏的 a 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:37:40.127

`CollapsibleButtons`看起来很合身，但它不会给你确切的外观和感觉。我之前确实用树实现了自定义菜单结构。这是方法，您实际上可以自定义`Treeitem`看起来像您想要的那样。通过下面的文章，您可以了解如何自定义绘制或调整边界`TreeItems`

[http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html](http://www.eclipse.org/articles/article.php?file=Article-CustomDrawingTableAndTreeItems/index.html)

# .htaccess - 使用 .htaccess 更改网址

> ID：14712835
> 
> 赞同：0
> 
> 时间：2013-02-05T17:00:12.140
> 
> 标签：.htaccess

我只想使用 htaccess 更改我网站的 url。请告诉我是否可以将网址“www.mysite.com/carbooking”更改为“www.mysite.com/cars”。“www.mysite.com/avaibletickets”到“www.mysite.com/tickets”等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:05:09.237

使用来自[Apache](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)`Redirect`的指令。例如：

```
Redirect /carbooking http://www.mysite.com/cars 
```

或重写规则：

```
RewriteEngine On
RewriteBase /
RewriteRule ^carbooking$ http://anvi.hostoi/cars [L] 
```

# c - 具有相同类型字段的结构上的 MPI_Allreduce 是否可移植？

> ID：14712837
> 
> 赞同：0
> 
> 时间：2013-02-05T17:00:13.077
> 
> 标签：c, mpi, reduce

考虑这样的事情：

* * *

```
typedef struct TS { 
    double a,b,c; 
} S; 

... 
S x,y; 
... 
MPI_Allreduce(&x, &y, 3, MPI_DOUBLE, MPI_SUM, MPI_COMM_WORLD); 
```

* * *

上面的代码是否完全可移植（不使用 MPI_Type_struct 和 all；结构中的所有变量都假定为相同类型）？同样在不同节点上使用不同硬件的情况下？

提前致谢， 杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:35:04.547

Hristo Iliev 完全正确；C 标准允许在字段之间进行任意填充。因此，不能保证这与三个双精度数组的内存布局相同，并且您的 reduce 可能会给您带来垃圾。

因此，您可以在这里采取两种不同的方法。一个是忽略这个问题，因为大多数 C 编译器可能会将其视为三个连续双精度数的数组。我通常根本不会提到这个作为一个选项，除非在这种情况下很容易测试假设。在您的代码中，您可以拥有

```
assert ( offsetof(S,b) == sizeof(double) );
assert ( offsetof(S,c) == 2*sizeof(double) ); 
```

如果您的代码通过断言进行，那么您很好。（请注意，这仍然不能保证其中两个结构的数组等效于 6 个连续双精度的数组......）

第二种方法是自己创建结构并减少操作以确保安全。真的，这不是太难，然后你知道它会起作用，所以这真的是要走的路；然后您可以安全地将该类型用于任何其他操作：

```
#include <stdio.h>
#include <stddef.h>
#include <mpi.h>

typedef struct TS {
    double a,b,c;
} S;

/* our reduction operation */
void sum_struct_ts(void *in, void *inout, int *len, MPI_Datatype *type){
    /* ignore type, just trust that it's our struct type */

    S *invals    = in;
    S *inoutvals = inout;

    for (int i=0; i<*len; i++) {
        inoutvals[i].a  += invals[i].a;
        inoutvals[i].b  += invals[i].b;
        inoutvals[i].c  += invals[i].c;
    }

    return;
}

void defineStruct(MPI_Datatype *tstype) {
    const int count = 3;
    int          blocklens[count];
    MPI_Datatype types[count];
    MPI_Aint     disps[count];

    for (int i=0; i < count; i++) {
        types[i] = MPI_DOUBLE;
        blocklens[i] = 1;
    }

    disps[0] = offsetof(S,a);
    disps[1] = offsetof(S,b);
    disps[2] = offsetof(S,c);

    MPI_Type_create_struct(count, blocklens, disps, types, tstype);
    MPI_Type_commit(tstype);
}

int main (int argc, char **argv) {

    int rank, size;
    MPI_Datatype structtype;
    MPI_Op       sumstruct;
    S   local, global;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    defineStruct(&structtype);
    MPI_Op_create(sum_struct_ts, 1, &sumstruct);

    local.a = rank;
    local.b = 2*rank;
    local.c = 3*rank;

    MPI_Reduce(&local, &global, 1, structtype, sumstruct, 0, MPI_COMM_WORLD);

    if (rank == 0) {
        printf("global.a = %lf; expected %lf\n", global.a, 1.*size*(size-1)/2);
        printf("global.b = %lf; expected %lf\n", global.b, 2.*size*(size-1)/2);
        printf("global.c = %lf; expected %lf\n", global.c, 3.*size*(size-1)/2);
    }

    MPI_Finalize();
    return 0;
} 
```

运行给

```
$ mpicc -o foo foo.c -std=c99

$ mpirun -np 1 ./foo
global.a = 0.000000; expected 0.000000
global.b = 0.000000; expected 0.000000
global.c = 0.000000; expected 0.000000

$ mpirun -np 2 ./foo
global.a = 1.000000; expected 1.000000
global.b = 2.000000; expected 2.000000
global.c = 3.000000; expected 3.000000

$ mpirun -np 3 ./foo
global.a = 3.000000; expected 3.000000
global.b = 6.000000; expected 6.000000
global.c = 9.000000; expected 9.000000

$ mpirun -np 12 ./foo
global.a = 66.000000; expected 66.000000
global.b = 132.000000; expected 132.000000
global.c = 198.000000; expected 198.000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:27:34.427

这种情况下的可移植性取决于三个`double`元素的结构是否可移植地等效于三个元素的数组`double`。我想说这对于大多数 C 编译器来说可能是正确的，但不会打赌它是否是 C 标准的一部分。

异构情况下的可移植性将`MPI_DOUBLE`通过 MPI 实现对类型进行的转换来保证。

# javascript - After Effects 对象模型是否可用于在 Adob e ExtendScript Toolkit 之外进行测试？

> ID：14712839
> 
> 赞同：3
> 
> 时间：2013-02-05T17:00:16.650
> 
> 标签：javascript, extendscript, after-effects

我实际上正在编写一个脚本，我更喜欢在我的浏览器中使用 Javascript 工具（例如 Live Reload、Mocha.js 和 Google Chrome 的检查器）对其进行测试。虽然，当我调用 app obect 方法时，我的浏览器会合法地返回错误。我是否可以包含一个 .js 或 .jsx 文件以便能够从 Adob​​e Extend Script Toolkit 中对其进行测试？或者它是一种秘密文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T22:13:57.757

你永远不会得到某些 AE-、ExtendScript API 特定的代码在其他 ECMA 主机上工作。您可以看到，即使使用 ExtendScript Toolkit，由于应用程序之间的差异，您（通常取决于）需要指定目标应用程序（工具包、AE、Illustrator 等）。您可以使用描述的方法测试基本的 ECMA；对于 ExtendScript 特定的代码，您必须使用适当的应用程序（AE/Toolkit 等）。

# php - 带有反斜杠的 ctags 的 Vim 关键字完成？

> ID：14712840
> 
> 赞同：2
> 
> 时间：2013-02-05T17:00:17.613
> 
> 标签：php, vim, ctags

我在 vim 中的 PHP 项目中使用 ctags 完成关键字。由于 ctags 不处理开箱即用的 PHP 命名空间，因此我在 ctags 命令中添加了一个正则表达式选项：

```
ctags (...) --regex-PHP='^namespace\s+([^;]*)/\1/c/' (...) 
```

这很好用：如果我输入，`Foo<Ctrl+N>`我会得到关于`Foo`、`Foo\Bar`等`Foo\Bar\Baz`的建议。

但是，当 vim 确定要在标签文件中查找的关键字时，反斜杠似乎算作单词分隔符。

换句话说，打字`Foo\Ba<Ctrl+N>`并*没有*给我`Foo\Bar\Baz`等方面的建议，这正是我所希望的。它只会建议实际上以开头的标签`Ba`（即没有我的命名空间）。

这也是跳转到标签时的问题。如果我`Foo\Bar\Baz`在光标下做`Ctrl+]`，它会带我到包含的文件`Baz`，它可能是也可能不是包含的文件`Foo\Bar\Baz`。如果反斜杠不被视为单词分隔符，我想这会更好。

那么，有没有办法让 vim 在进行标签查找时将反斜杠视为单词的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:07:06.123

在`~/.vim/after/ftplugin/php.vim`（这使得更改本地到 PHP 文件），添加以下内容：

```
:setlocal iskeyword+=\\ 
```

请注意，此更改还会影响其他内容，例如`w`动作、`aw`文本对象，甚至可能是语法突出显示。

# php - 如何识别导致加载的 .php 文件

> ID：14712842
> 
> 赞同：-2
> 
> 时间：2013-02-05T17:00:21.157
> 
> 标签：php, file, main

当脚本正在执行 main.php 文件并且所述文件调用 100 个 .php 文件时，我如何识别哪些 PHP 文件导致加载。

我的服务器管理员说他无法将导致加载的 .php 文件识别为正在运行的单个 php 文件。此文件进一步调用其他 php 文件。

所以他只看到一个 php 文件，即 main.php 文件。

所以我被困住了，需要像你这样的专家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:03:24.133

在某些代码执行之前添加此代码：

```
$start_time = microtime(TRUE); 
```

然后在代码执行后添加：

```
$stop_time = microtime(TRUE); 
```

该部分代码所用时间的值将是：

```
$time = $stop_time - $start_time; 
```

然后将该 $time 变量写入日志，您可以查看该日志以确定特定代码的不同部分所花费的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:04:52.553

使用分析器工具。

有几个不错的，但最常用的一个是内置在 xDebug 中。

安装 xDebug，设置配置选项以进行分析，然后运行您的程序。

这将创建一个分析器跟踪文件，您可以将其加载到 KCacheGrind 之类的工具中，以查看程序的哪些部分运行时间最长。

完整的说明和下载[可从 xDebug 站点获得](http://www.xdebug.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:04:50.033

你想要做的是分析

您可以使用 Xdebug 扩展轻松做到这一点。文档在这里[http://www.xdebug.org/docs/profiler](http://www.xdebug.org/docs/profiler)

您将有一张漂亮的表格，其中包含所有功能及其执行时间/内存使用情况。

# c# - 是否可以通过 C# 中的插件或应用程序重用现有进程？

> ID：14712845
> 
> 赞同：0
> 
> 时间：2013-02-05T17:00:26.100
> 
> 标签：c#, .net, plugins

我有一个必须解决的现有程序。它提供了一个相当不错的插件架构，但我遇到了一个问题。我需要创建一个命令行插件来检查程序是否已经在运行，然后将命令行参数传递给现有实例。

这可以使用插件吗？在这种情况下，最佳实践是使用消息传递系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:06:35.937

对于您描述的场景，我使用了通过 net.pipe 协议托管的 WCF 服务。基本上，我有一个合同，它定义了一个可以接收您将作为命令行参数提供的信息的端点。

当您的进程启动时，它首先会尝试联系此服务。如果服务可用，则意味着现有进程已启动并正在运行。在这种情况下，打开进程的通道，将数据发送给它，然后退出。如果该服务不可用，请启动该服务。

# c++ - 我可以更改 Code::Blocks 自动缩进的行为吗？

> ID：14712846
> 
> 赞同：4
> 
> 时间：2013-02-05T17:00:40.277
> 
> 标签：c++, visual-studio, editor, codeblocks, indentation

我曾经使用 Microsoft Visual Studio 2005 编写 C++ 代码，其中自动缩进的行为非常好。

但是当我尝试使用 Code::Blocks 时，我意识到自动缩进的行为很糟糕。

例如困扰我的一件事：

```
for (int i = 0; i < n; i++)
//it start from here in Code::Blocks

for (int i = 0; i < n; i++)
    //I want it to start from here like in Visual Studio 
```

`if`和_`while`

有什么办法可以改变 Code::Blocks 中自动缩进的行为，使其与 Microsoft Visual Studio 自动缩进一样好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-17T10:30:50.163

首先，确保`smart indent`已启用（设置 -> 编辑器 -> 智能缩进）。

在 Ubuntu 上它仍然不适合我，但是`codeblocks-contrib`使用

```
sudo apt-get install codeblocks-contrib 
```

修复了一些问题。它修复了 , ,的智能缩进`if`，但不适用于类和函数。如果有人知道如何解决其余问题，请告诉我。`while``for`

# python - 条目总和，Python

> ID：14712850
> 
> 赞同：0
> 
> 时间：2013-02-05T17:00:57.170
> 
> 标签：python

> **可能重复：**
> [汇总来自多个文件的列的值](https://stackoverflow.com/questions/14712268/summing-up-values-of-columns-from-multiple-files)

我在这里有一个小问题，我试图总结来自多个文件（50）的条目，每个文件都包含 3 列。例如，使用前 3 个文件：file1.txt、file2.txt、file3.txt，它们看起来像：

文件 1.txt：

```
2 3 4
1 5 6
5 4 7 
```

文件2.txt：

```
1 2 1
2 3 2
4 3 1 
```

文件 3.txt：

```
6 1 1
1 3 0
3 4 5 
```

所以我的问题是我如何总结来自 50 个文件的第一列、第二列和第三列的所有条目，最终得到一个看起来像这样的文件：

输出.txt：

```
9 6 6
4 11 8
12 11 13 
```

我已经阅读了 50 个文件并附加了它们，但实际上我在逐个汇总条目时遇到了麻烦。

所以我这样做了：

```
for p in range(50):
    locals()['first_col%d' % p] = []
    locals()['second_col%d' % p] = []
    locals()['third_col%d' % i] = []

for i in range(1,50):
    f = open("file"+str(i)+".txt","r")
    for line in f:
        locals()['fist_col%d' % i].append(float(line.split()[0]))
        locals()['second_col%d' % i].append(float(line.split()[1]))
        locals()['third_col%d' % i].append(float(line.split()[2]))

f.close() 
```

我试图想办法把它放在一个循环中，该循环将读取所有`first_cols`（`first_col1`、、、`first_col2`等`first_col3`），`second_cols`并`third_cols`总结条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:39:50.373

您可以使用`glob`通配符匹配文件名模式，然后明智地使用`zip`和滥用`literal_eval`（可能只想考虑转换为的生成器`int`） - 注意 - 这需要每个文件的列数和行数相同，否则会发生截断：

```
from glob import glob
from ast import literal_eval

filenames = glob('/home/jon/file*.txt')
files = [open(filename) for filename in filenames]
for rows in zip(*files):
    nums = [literal_eval(row.replace(' ', ',')) for row in rows]
    print map(sum, zip(*nums))

[9, 6, 6]
[4, 11, 8]
[12, 11, 13] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:31:49.830

这是您的代码片段

```
try:
    output_matrix=[[0,0,0],[0,0,0],[0,0,0]]
    for i in range (1,51):
        try:        
            f = open("file"+str(i)+".txt","r")
        except IOError, e:
            continue
        if not f:
            continue
        counter=0
        for line in f:
            row=line.split()
            for row_item in range(0,len(row)):
                output_matrix[counter][row_item]=output_matrix[counter][row_item]+int(row[row_item])
            counter=counter+1
    f = open("Output.txt","w")
    for i in range (0,len(output_matrix)):
        for j in range (0,len(output_matrix[i])):
            f.write(str(output_matrix[i][j]) + ' ')
        f.write('\n')
    f.close()
except Exception,e:
    print str(e) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:20:07.943

在使用空值初始化容器后，我有一个对每个文件求和的解决方案：

```
>>> import os
>>> def sum_files(path):
    result = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]
    for fil in os.listdir(path):
        full_path = os.path.join(path, fil)
        for line_nb, line in enumerate(open(full_path)):
            numbers = line.split()
            for col_nb, nb in enumerate(numbers):
                result[line_nb][col_nb] += int(nb)
    return result

>>> sum_files(path)
[[9, 6, 6], [4, 11, 8], [12, 11, 13]] 
```

# javascript - Javascript中的任何等效Java集合？

> ID：14712853
> 
> 赞同：1
> 
> 时间：2013-02-05T17:01:20.820
> 
> 标签：javascript, collections, letter

我必须将单词分解为 Javascript 中的字母集合。然后我需要能够 i) 检查一个字母是否属于该集合和 ii) 逐步删除该集合的字母。

例如，单词“cool”将被分解为“c”、“o”、“o”、“l”。如果我删除'o'、'a'和'l'，我应该只剩下'c'、'o'。

在 Javascript 中实现这一目标的正确数据结构是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:10:41.553

一串！

```
var str = 'cool'; 
```

要检查一个字符是否在字符串中：

```
if(str.indexOf('o') > -1) // the character is in the string 
```

要删除第一次出现的字符：

```
str = str.replace('o',''); 
```

如果您想修改字符串对象以提供这些操作的更多“逻辑”表示，您可以这样做：

```
String.prototype.contains = function(char){
    return this.indexOf(char) > -1;
};
String.prototype.remove = function(char){
    return this.replace(char,'');
}; 
```

你可以这样使用：

```
if ('cheese'.contains('che'))
   alert('Velviva!');

var str = 'hurt'.remove('r');   // 'hut'
    str = 'banana'.remove('n'); // 'baana'
    str = 'happy'.remove('c');  // 'happy' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T17:04:10.027

数组！您可以通过像这样简单地拆分字符串来获得一个：

```
var arr = "word".split(""); 
```

您可以使用 from 的方法`Array.prototype`来操作集合，就像您说的那样。例如，要删除 index 处的字符`1`：

```
arr.splice(1,1); 
```

让它再次成为一个字符串：

```
arr.join(''); 
```

如果您只想从字符串中读取特定字符，则可以直接访问其索引：

```
var str = "word";
str[1]; // "o" 
```

您还可以使用其他字符串方法来获得与数组相同的结果（请参阅[Shmiddty 的回答](https://stackoverflow.com/a/14713015/825789)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T17:06:23.500

JavaScript 的对象可用于此目的，例如：

```
var cool = "cool".split(""); // `cool` is an array of single-char strings
var crossIndex = {};
cool.forEach(function(entry) {
    crossIndex[entry] = true;
}); 
```

现在`crossIndex`有它是否有给定字母的标志，所以：

```
var letter = "c"; // for instance

if (crossIndex[letter]) {
    // It has it

    // If you want to remove it:
    delete crossIndex[leter];
}
else {
    // It doesn't have it
} 
```

# bash - 评论中的变量扩展

> ID：14712863
> 
> 赞同：9
> 
> 时间：2013-02-05T17:01:59.843
> 
> 标签：bash, preprocessor, sungridengine

是否可以在 bash 脚本内的注释中扩展变量？

我想编写一个脚本来输入[SGE](https://en.wikipedia.org/wiki/Oracle_Grid_Engine)。该`qsub`语法允许我使用 bash 脚本中以`#$`. 例如，

```
#$ -q all.q
#$ -S /bin/bash
#$ -V
#$ -m beas
#$ -o run_20120103.out 
```

我想要的是`-o`参数被动态设置为一个变量，比如`$1`. 所以我会天真地写

```
#$ -o run_${1}.out 
```

但是，由于该行以 a 开头，因此 bash 会忽略它并且不会扩展`#`变量。`$1`

有任何想法吗？一些 bash 预处理器？还有什么办法？

**编辑**我只是选择了`$1`一个例子。它也可以是`$FOO`or `$BAR`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T19:13:28.073

变量扩展发生在 shell 内存中，它不会影响文件。因此，bash 扩展什么并不重要。

相反，您可能可以生成要在运行中运行的脚本，并将所有内容扩展到位：

```
cat << EOF | qsub [options] -
#$ -o run_$1.out
cmds
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-27T14:23:40.737

要比接受的答案更具体一些 SGE，只需重定向标准输出`qsub`并解析作业 ID。然后，您可以使用它来更改作业名称`qalter`。

这是我用来提交和修改此类作业的脚本示例。

```
 for a in $args;
 do 
    qsub submission_script $a 1> job.txt
    jid=$(cat job.txt | tr -dc '0-9' | cut -c -6)
    qalter $jid -N $a
 done 
```

我确信有更多惯用的方法可以做到这一点，但这是第一次。

这种方法允许`submission_script`有它自己的论点。它还允许您以编程方式更改其他工作特征，而不仅仅是名称。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-12-18T20:56:49.113

我还在`qsub`SGE 中使用该命令来生成不同的输出或错误日志。例如，如果我想`TASK_ID`在脚本中包含

```
#$ -o run_${TASK_ID}.out 
```

不带括号写就可以了：

```
#$ -o run_$TASK_ID.out 
```

# sql-server - 如何从 xml 节点查询值？

> ID：14712864
> 
> 赞同：27
> 
> 时间：2013-02-05T17:02:13.287
> 
> 标签：sql-server, sql-server-2005, xpath, sqlxml

我有一个包含 XML 列的表：

```
CREATE TABLE Batches( 
   BatchID int,
   RawXml xml 
) 
```

xml 包含以下项目：

```
<GrobReportXmlFileXmlFile>
   <GrobReport>
       <ReportHeader>
          <OrganizationReportReferenceIdentifier>1</OrganizationReportReferenceIdentifier>
          <OrganizationNumber>4</OrganizationNumber>
       </ReportHeader>
  </GrobReport>
   <GrobReport>
       <ReportHeader>
          <OrganizationReportReferenceIdentifier>2</OrganizationReportReferenceIdentifier>
          <OrganizationNumber>4</OrganizationNumber>
       </ReportHeader>
  </GrobReport>
   <GrobReport>
       <ReportHeader>
          <OrganizationReportReferenceIdentifier>3</OrganizationReportReferenceIdentifier>
          <OrganizationNumber>4</OrganizationNumber>
       </ReportHeader>
  </GrobReport>
   <GrobReport>
       <ReportHeader>
          <OrganizationReportReferenceIdentifier>4</OrganizationReportReferenceIdentifier>
          <OrganizationNumber>4</OrganizationNumber>
       </ReportHeader>
  </GrobReport> 
```

我想要的是生成一个集合，其中包含：

```
OrganizationReportReferenceNumber  OrganizationNumber
=================================  ==================
1                                  4
2                                  4
3                                  4
4                                  4 
```

我试过了：

```
SELECT 
    foo.value('/ReportHeader/OrganizationReportReferenceIdentifier') AS ReportIdentifierNumber,
    foo.value('/ReportHeader/OrganizationNumber') AS OrginazationNumber
FROM CDRBatches.RawXML.query('/GrobReportXmlFileXmlFile/GrobReport/ReportHeader') foo 
```

但这不起作用。我试过了：

```
SELECT 
    foo.value('/ReportHeader/OrganizationReportReferenceIdentifier') AS ReportIdentifierNumber,
    foo.value('/ReportHeader/OrganizationNumber') AS OrginazationNumber
FROM RawXML.nodes('/GrobReportXmlFileXmlFile/GrobReport/ReportHeader') bar(foo) 
```

但这不起作用。**XPath**表达式_

```
/GrobReportXmlFileXmlFile/GrobReport/ReportHeader 
```

是正确的; 在任何其他 xml 系统中它返回：

```
<ReportHeader>
    <OrganizationReportReferenceIdentifier>1</OrganizationReportReferenceIdentifier>
    <OrganizationNumber>4</OrganizationNumber>
</ReportHeader>
<ReportHeader>
    <OrganizationReportReferenceIdentifier>2</OrganizationReportReferenceIdentifier>
    <OrganizationNumber>4</OrganizationNumber>
</ReportHeader>
<ReportHeader>
    <OrganizationReportReferenceIdentifier>3</OrganizationReportReferenceIdentifier>
    <OrganizationNumber>4</OrganizationNumber>
</ReportHeader>
<ReportHeader>
    <OrganizationReportReferenceIdentifier>4</OrganizationReportReferenceIdentifier>
    <OrganizationNumber>4</OrganizationNumber>
</ReportHeader> 
```

因此，从我想看到的查询中可以明显*看出*。在阅读了十几个 Stackover 问题和答案之后，我离解决问题还差得远。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-05T17:31:59.300

```
SELECT  b.BatchID,
        x.XmlCol.value('(ReportHeader/OrganizationReportReferenceIdentifier)[1]','VARCHAR(100)') AS OrganizationReportReferenceIdentifier,
        x.XmlCol.value('(ReportHeader/OrganizationNumber)[1]','VARCHAR(100)') AS OrganizationNumber
FROM    Batches b
CROSS APPLY b.RawXml.nodes('/CasinoDisbursementReportXmlFile/CasinoDisbursementReport') x(XmlCol); 
```

演示：[SQLFiddle](http://www.sqlfiddle.com/#!3/57935/1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T17:20:11.383

这行得通，已经过测试...

```
SELECT  n.c.value('OrganizationReportReferenceIdentifier[1]','varchar(128)') AS 'OrganizationReportReferenceNumber',  
        n.c.value('(OrganizationNumber)[1]','varchar(128)') AS 'OrganizationNumber'
FROM    Batches t
Cross   Apply RawXML.nodes('/GrobXmlFile/Grob/ReportHeader') n(c) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T17:09:00.053

尝试这个：

```
SELECT RawXML.value('(/GrobXmlFile//Grob//ReportHeader//OrganizationReportReferenceIdentifier/node())[1]','varchar(50)') AS ReportIdentifierNumber,
       RawXML.value('(/GrobXmlFile//Grob//ReportHeader//OrganizationNumber/node())[1]','int') AS OrginazationNumber
FROM Batches 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-26T09:24:07.887

如果表中只有一个 xml，则可以分两步进行转换：

```
CREATE TABLE Batches( 
   BatchID int,
   RawXml xml 
)

declare @xml xml=(select top 1 RawXml from @Batches)

SELECT  --b.BatchID,
        x.XmlCol.value('(ReportHeader/OrganizationReportReferenceIdentifier)[1]','VARCHAR(100)') AS OrganizationReportReferenceIdentifier,
        x.XmlCol.value('(ReportHeader/OrganizationNumber)[1]','VARCHAR(100)') AS OrganizationNumber
FROM    @xml.nodes('/CasinoDisbursementReportXmlFile/CasinoDisbursementReport') x(XmlCol) 
```

# sql - 从连接字符串调用函数

> ID：14712866
> 
> 赞同：0
> 
> 时间：2013-02-05T17:02:25.687
> 
> 标签：sql, postgresql, plpgsql, dynamic-sql

我有两个字符串：

*   'UPP'
*   '呃'

和值，例如'a'。

我需要调用函数`UPPER`（从两个字符串合成）并将值作为参数传递。
我怎样才能做到这一点？

（实际上，我需要将函数**交叉表**与列计数器连接起来......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:08:46.910

使用动态 SQL 的函数的存根可能如下所示：

```
CREATE OR REPLACE FUNCTION f_exec(text, text, text, OUT result text)
  RETURNS text AS
$func$
BEGIN
    EXECUTE 'SELECT ' || $1  || $2 || '($1)' -- last $1 not referring func param
    INTO   result
    USING  $3;
END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT f_exec('up', 'per', 'a') 
```

不要混淆，`$1`内部有自己的作用域`EXECUTE`，指的是`USING`子句传入的参数，而不是外部函数参数。

[此相关答案](https://stackoverflow.com/questions/7914325/insert-with-dynamic-table-name-in-trigger-function/7915100#7915100)或手册中[执行动态命令](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)一章中的更多背景信息。

### 警告

这为**SQL 注入**打开了大门！
阅读[关于 dba.SE 的相关问题下的建议以及手册中的“安全地](https://dba.stackexchange.com/questions/33894/store-a-formula-in-a-table-and-use-the-formula-in-a-function/34002)[编写`SECURITY DEFINER`函数”](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html#SQL-CREATEFUNCTION-SECURITY)一章。

在这种特殊情况下，有一种**避免 SQLi的***聪明*方法：

 **```
CREATE OR REPLACE FUNCTION f_exec(
   func1 text
  ,func2 text
  ,param text
  ,OUT result text) AS
$func$
DECLARE
   funcname text := (func1 || func2)::regproc;
BEGIN
   EXECUTE 'SELECT ' || funcname || '($1)::text'
   INTO   result
   USING  param;
END
$func$ LANGUAGE plpgsql; 
```

转换为[对象标识符类型`regproc`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)`$1`有效地清除了通过and注入除有效函数名之外的任何内容的所有尝试`$2`。该子句已经消除了通过( )`USING`注入代码的尝试。`$3``param`

还：

*   使用参数名称以减少混淆。
*   从函数定义中省略`RETURNING`子句，因为`OUT`参数会处理它。
*   将函数的结果转换为 ，`text`因为我们不知道函数的实际返回类型，并且 Postgres 中的每个数据类型都可以转换为`text`.
    该函数仍然需要接受一个`IN`类型的参数，`text`否则会出现异常。**

# user-interface - JFileChooser 是否生成特定于操作系统的路径？

> ID：14712867
> 
> 赞同：1
> 
> 时间：2013-02-05T17:02:28.467
> 
> 标签：user-interface, operating-system, jfilechooser

我正在开发一个 Java GUI，用户必须在其中选择一个输出目录。我想使用 JFileChooser 进行文件选择，但我担心操作系统的兼容性。我的 GUI 必须在 Windows、Mac 和 Linux 上运行，所以我想知道 JFileChooser 是否会在这三个平台上使用适当的路径语法（即 JFileChooser 将在 Windows 上用“\”分隔目录，在 UNIX 上用“/”分隔目录）。如果 JFileChooser 不是特定于操作系统的，它使用什么语法来描述路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:06:28.033

JFileChooser 自动在每个操作系统的相应目录上启动（`C:/`对于 windows，我相信 macs 的用户库和 Linux 的相应目录）。因此，正如常识所暗示的那样，JFileChooser 可在所有操作系统上使用。

如果不是这种情况，并且 JFileChooser 不是在所有操作系统上兼容，那么它很可能不是 java 的一个易于访问的部分，并且对于其他操作系统会有相应的对应部分。

# sharepoint - Sharepoint 中 Reporting Services 中报表的多参数字符串值（托管订阅）

> ID：14712871
> 
> 赞同：0
> 
> 时间：2013-02-05T17:02:38.993
> 
> 标签：sharepoint, reporting-services, ssrs-2008, multiparameter

我在尝试配置托管订阅（数据驱动）时遇到了很大的问题。我不知道如何从 Sharepoint 上的个性化列表中添加多值。

在我的报告查询中，我有以下条件：

```
and invent_dim.inventsiteid in (@p_Site) 
```

where`@p_site`是必须从其中搜索记录的“sitios”列表。

在正常的报告可视化中，它有一个组合框，可以根据用户的需要选择尽可能多的网站

![Sitios 多选](../Images/d266915f4f268c02e4f2c67fb8b79e31.png)

但是在托管订阅中，我尝试使用`''`, `,`, `""`, `multilines`,`multilines with ,`等...

我在网上找不到任何相关信息，我希望你能帮助我。我认为我唯一能做的就是重复收件人，但这对用户来说是很多工作。而且我无法在订阅配置中定义它，因为站点因收件人而异。

在此先感谢您的帮助！祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:46:21.263

您可以通过在参数默认值表达式中定义以下内容来做到这一点： `=join(yourParameter.Value,",")`

# ruby-on-rails - 黄瓜水豚检查数字范围

> ID：14712873
> 
> 赞同：0
> 
> 时间：2013-02-05T17:02:54.893
> 
> 标签：ruby-on-rails, cucumber, capybara

所以我正在构建一个简单的测试，无论经过一些计算我想在 X1 和 X2 之间的屏幕上显示一个数字。

这就是我目前正在做的，但它不起作用

```
Then /^I should see value between (\d+) and (\d+)$/ do |arg1, arg2|
find_field("resultado").value.should >= arg1.to_f
find_field("resultado").value.should <= arg2.to_f
end 
```

# ios - 如何使用 Bubblewrap HTTP 设置内容类型？

> ID：14712875
> 
> 赞同：1
> 
> 时间：2013-02-05T17:03:09.417
> 
> 标签：ios, ruby, http-headers, rubymotion

我正在尝试使用内容类型发布请求：application/x-www-form-urlencoded。但是当我使用 Charles（或 Fiddler）查看请求时，它会显示 application/json。

```
 HTTP.post(url, 
            {
                :headers => {"Content-Type" => "application/x-www-form-urlencoded"}
            }) do |response| 
            puts response
            puts response.body.to_str
        end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T12:31:21.360

```
BW::HTTP.post("http://foo.bar.com/", {payload: data, headers: {"Content-Type": "application/x-www-form-urlencoded"} }) do |response| 
```

# android - Android Web 视图在布局宽度更改时得到拉伸

> ID：14712876
> 
> 赞同：1
> 
> 时间：2013-02-05T17:03:11.600
> 
> 标签：android, android-webview

我在本机应用程序中渲染 webview 时遇到了困难，我在下面粘贴了一些屏幕截图，显示了每次更改宽度时 webview 的行为方式。

我也在使用抽屉菜单，每次打开菜单抽屉时，webview都会向右移动

加载 WEBVIEW 时的屏幕截图

![在此处输入图像描述](../Images/55094f98a7e88009147714dbae12dbab.png)

到现在为止似乎还不错，但是现在当我打开和关闭抽屉菜单时，它的宽度并没有变回 100%，而是保持在 50%

打开和关闭抽屉菜单后

![在此处输入图像描述](../Images/3c24b75a9ce6176189c5f83221c790cb.png)

当我打开抽屉菜单时，它也会模糊 webview

抽屉菜单打开时的屏幕截图

![在此处输入图像描述](../Images/76b439c3410683f8fd026fcbd005f463.png)

我也尝试了一些不同的 webview 设置，但没有一个有效，这里还有我的 webview java 代码

JAVA代码

```
 mWebView = (WebView) findViewById( R.id.webView1 );
             mWebView.getSettings().setJavaScriptEnabled(true);  
             mWebView.getSettings().setSupportZoom(false);
             mWebView.getSettings().setBuiltInZoomControls(false);
             // Load URL
             mWebView.loadUrl(requestUrl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:54:35.557

[根据我们的讨论](https://chat.stackoverflow.com/rooms/23986/discussion-between-paul-lammertsma-and-aman-virk)，问题似乎与`android-menudrawer`图书馆有关。具体来说，在抽屉打开后，硬件加速的小部件无法正确显示，[这一问题也描述了 MapView v2](https://github.com/SimonVT/android-menudrawer/issues/48#issuecomment-11875958)。

最基本的解决方案是通过 `android:hardwareAccelerated="false"`在清单中设置来禁用硬件加速，但我鼓励您探索更好的解决方案，例如[上述](https://github.com/SimonVT/android-menudrawer/issues/48#issuecomment-11875958)问题的作者建议的解决方案：

> 我发现了一个简单的 hack。
> 
> 您只需使用始终可见的内容占位符和透明覆盖创建 RelativeLayout。内容中的每个点击事件都可以正常工作，并且错误也消失了：
> 
> ```
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>                 android:layout_width="match_parent"
>                 android:layout_height="match_parent">
> 
>     <FrameLayout
>             android:id="@+id/fragment_placeholder"
>             android:layout_width="match_parent"
>             android:layout_height="match_parent" />
> 
>     <FrameLayout
>             android:layout_width="match_parent"
>             android:layout_height="match_parent"
>             android:background="@android:color/transparent" />
> 
> </RelativeLayout> 
> ```

# asp.net - 在 asp.net 中使用单个 sql 查询上传多个文件

> ID：14712878
> 
> 赞同：0
> 
> 时间：2013-02-05T17:03:18.560
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我正在使用文件上传控制..in asp.net..首先在临时目录中存储文件，然后当用户单击保存后，我将文件从临时移动到我想要的位置。问题是我必须使用 for 循环并为我的插入查询进行 5 次访问数据库以插入 5 条记录。但我想为此编写单个查询。我知道我可以发送我的图像名称以及图像路径逗号分隔。但由于我没有足够的 sql 知识，我不知道如何在 sql 中拆分逗号分隔的文件，然后使用光标插入它们。所以我请求一些在这里给我写一个示例查询。这样我就可以继续了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:19:03.347

使用可以将数据集作为 xml 传递给存储过程，并且在存储过程中，您可以使用 openXML 一次性插入多行

用于将数据集对象作为 xml 传递给存储过程的 C# 代码

```
 ...................................

    DataSet ds = new DataSet(); // assume dataset has records(in table object)
    string xmlString = ds.GetXml();

    SqlCommand cmd = new SqlCommand("your procedure name", "your Connection object");
    cmd.Parameters.Add(new SqlParameter("@XmlString",xmlString);
             ................................... 
```

存储过程，使用 openXML 进行批量插入

```
 ...................................

  DECLARE @XMLDocPointer INT    
  EXEC sp_xml_preparedocument @XMLDocPointer OUTPUT, @XmlString    

   INSERT INTO Employee
   (Name, Email, PhoneNo)    
   SELECT Name,Email,PhoneNo   
   FROM OPENXML(@XMLDocPointer,'/ROOT/DATA',2)    
   WITH  (Name VARCHAR(50),-- '@Name',     
         Email VARCHAR(50),-- '@Email',     
         PhoneNo VARCHAR(50) --'@PhoneNo')     

   EXEC sp_xml_removedocument @XMLDocPointer    
        ................................... 
```

阅读此完整示例 [http://www.codeproject.com/Articles/417181/Bulk-Insertion-of-Data-Using-Csharp-DataTable-and](http://www.codeproject.com/Articles/417181/Bulk-Insertion-of-Data-Using-Csharp-DataTable-and)

==================================================== ==================

如果您在 sql 中寻找拆分字符串，那么下面是您需要在 sqlserver 中创建的 sql 函数

```
create function f_split(@SourceSql varchar(8000),@StrSeprate varchar(10))
returns @temp 
table(a varchar(100))
begin    
 declare @i int    
 set @SourceSql=rtrim(ltrim(@SourceSql)) 
 set @i=charindex(@StrSeprate,@SourceSql)    
 while @i>=1    
 begin        
  insert @temp values(left(@SourceSql,@i-1))        
  set @SourceSql=substring(@SourceSql,@i+1,len(@SourceSql)-@i)        
  set @i=charindex(@StrSeprate,@SourceSql)    
 end    
 if @SourceSql<>'\'       
 insert @temp values(@SourceSql)    
 return 
end
go 
```

以及如何打电话

```
select * from dbo.f_split('1,2,3,4,5',',') 
```

然后使用光标你可以插入所有

对于拆分功能，请参阅这篇文章[http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85)

# android - 如何将edittext中的文本获取到数组

> ID：14712887
> 
> 赞同：0
> 
> 时间：2013-02-05T17:03:46.320
> 
> 标签：android

如何获取 EditText 的值，然后将其存储在我的数组中？

这是我的完整代码：

```
EditText op = (EditText)v.findViewById(R.id.operator);
array=new int [Integer.valueOf(op.getText().toString())];

for (i = 0;i<(array.length+1);i++){
    LayoutInflater inflater = MainActivity.this.getLayoutInflater();
    final View v2=inflater.inflate(R.layout.inputangka, null) ;
    new AlertDialog.Builder(MainActivity.this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("number of-"+(i-1)+":")
        .setView(v2)
        .setNeutralButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dlg, int sumthin) {
                EditText number = (EditText)v2.findViewById(R.id.number);
                int number1 = Integer.valueOf(number.getText().toString());
                array [i]= number1; //error line 
```

我的错误日志：

```
02-05 16:33:31.374: E/AndroidRuntime(431): java.lang.ArrayIndexOutOfBoundsException 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:06:07.700

发生这种情况是因为对于 ex，您在编辑文本中输入 5。现在您正在迭代循环，直到从初始值 0 开始小于 6。

当计数器达到 5 时，您的条件将变为 true 5 < 6，但数组大小为 5，您正在访问第 6 个元素。所以它抛出了`ArrayIindexOutOfBound Exception`.

要摆脱这个问题。

**尝试这个。**

```
for (i = 0; i<(array.length);i++){
    //Code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:48:24.377

看，你`onClick()`的循环完成后执行，因此值`i`比数组最后一个索引大一。作为一种解决方法，将该值保存到另一个临时整数变量中，然后发送它。那时它肯定会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:28:24.090

您只需要通过以下代码替换 for 条件。

```
for (i = 0;i<(array.length-1);i++){ 
```

它肯定会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T17:15:07.377

从中删除+1 `for (i = 0;i<(array.length+1);i++){`，它会像一个魅力一样工作。

# c++ - 使用命令行 LLDB 处理 Mac 上的全屏崩溃

> ID：14712888
> 
> 赞同：2
> 
> 时间：2013-02-05T17:03:47.157
> 
> 标签：c++, macos, fullscreen, lldb

我正在尝试在我正在开发的全屏 Mac 游戏中调试崩溃，但是当我连接了 LLDB 时，它只会导致游戏在崩溃发生时冻结，并且我无法摆脱游戏 -我需要在计算机上进行硬重置。有什么工具或偏好可以做到这一点吗？我用来重现崩溃的计算机没有多个显示器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:48:33.967

可以做两台电脑调试吗？在运行游戏的机器上设置一个 ssh 帐户，从你的非游戏运行机器远程登录（终端中的命令行），在你的游戏上运行命令行 lldb。( `process attach -n <appname>`)

过去，使用 gdb，Xcode 支持“远程调试”，这是这种安排（Xcode 在一台 Mac 上运行，您的全屏游戏在另一台 Mac 上运行）假设您已经正确配置了 ssh。我不相信 Xcode 目前支持使用 lldb 进行远程调试 -如果您在工作流程中需要此功能，我鼓励您在[http://bugreport.apple.com/上提交错误报告以注册您对该功能的需求。](http://bugreport.apple.com/)

如果您正在进行单机调试，恐怕我无法为您提供任何答案。

# javascript - 如何使用 Javascript 在页面上打印此内容的全部内容？

> ID：14712891
> 
> 赞同：-2
> 
> 时间：2013-02-05T17:04:02.753
> 
> 标签：javascript, arrays, loops, printing

我真的找不到在页面上打印数组内容的方法。任何人都可以帮忙吗？我已经从数据库中获取数据并将其循环到一个 javascript 数组中，现在只想在页面上显示它。

这是代码：

```
<html>

<head>

<script>

var items = {

<?php

   $con = mysql_connect("***","****","*****");
   if (!$con)
   {
    die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("learning_game", $con);

  $result = mysql_query("SELECT * FROM data");

  $first=true;
  while($row = mysql_fetch_array($result))
{
if (!$first){
echo ",";
}
  $first = false;
echo "{name='" . $row['word'] . "',image='" . $row['image'] ."'}";

 }

 mysql_close($con);

   ?>

   };

   </script>

   </head>

<body>

</body>

   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:12:10.257

```
<html>
  <head>
  </head>
  <body>
    <div></div>
    <script>
      var items = [
      <?php
      $con = mysql_connect("***","****","*****");
      if (!$con) {
        die('Could not connect: ' . mysql_error());
      }
      mysql_select_db("learning_game", $con);
      $result = mysql_query("SELECT * FROM data");
      $first = true;
      while ($row = mysql_fetch_array($result)) {
        if (!$first) {
          echo ",";
        }
        $first = false;
        echo "{name:'" . $row['word'] . "',image:'" . $row['image'] ."'}";
      }
      mysql_close($con);
      ?>
      ];
      for (var i = 0; i < items.length; i += 1) {
        document.getElementsByTagName('div')[0].innerHTML += items[i].name + ":" + items[i].image + "<br />\n";
      }
    </script>
  </body>
</html> 
```

请注意，`items`声明现在带有`[` `]`符号，所以它变成了一个数组，而不是一个对象。

在您回显名称和图像的行中，等号变为冒号 (:)。

以及完整的脚本必须移动到底部，因为您只能写入已经渲染（关闭）的元素。所以我`div`在组合中添加了一个新的，并写进去。

# php - mysqli最快的方式只发布一个结果

> ID：14712897
> 
> 赞同：0
> 
> 时间：2013-02-05T17:04:08.907
> 
> 标签：php, mysqli, fetch

我想知道是否可以在没有太多参数和字符串的情况下执行以下脚本...我认为可以删除很多内容...也许只有一个查询？

谢谢！

```
<?php
include("sqlvar.php");

$connection = new mysqli($host, $user, $pw, $db);
$marginidb = $connection->query("SELECT valore FROM DATIVENDITA WHERE parametro = 'margine'");
while($margine = $marginidb->fetch_object()) {
        $valoremargine = $margine->valore;
}
$connection->close();

echo $valoremargine;

$connection = new mysqli($host, $user, $pw, $db);
$ivadb = $connection->query("SELECT valore FROM DATIVENDITA WHERE parametro = 'iva'");
while($iva = $ivadb->fetch_object()) {
        $valoreiva = $iva->valore;
}
$connection->close();

echo $valoreiva;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:07:50.217

```
<?php
include("sqlvar.php");

$connection = new mysqli($host, $user, $pw, $db);

$marginidb = $connection->query("SELECT valore FROM DATIVENDITA WHERE parametro = 'margine' limit 1");
$margine = $marginidb->fetch_object();
echo $margine->valore;

$ivadb = $connection->query("SELECT valore FROM DATIVENDITA WHERE parametro = 'iva' limit 1");
$iva = $ivadb->fetch_object();
echo $iva->valore;

$connection->close();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:10:34.250

这是我认为您要的内容：

```
<?php
include("sqlvar.php");
$result = array();
$connection = new mysqli($host, $user, $pw, $db);
$marginidb = $connection->query("SELECT valore FROM DATIVENDITA WHERE parametro = 'margine' OR parametro = 'iva'");
while($margine = $marginidb->fetch_object()) {
        array_push($result, $margine->valore);
}
$connection->close();
print_r($result);
?> 
```

它的作用是将结果存储为一个数组，以便访问您将使用的第一个结果`$result[0]`，第二个将是`$result[1]`. 您可以使用循环遍历这些结果`foreach`。

# html - 社交媒体图标，不在 div 内居中

> ID：14712899
> 
> 赞同：3
> 
> 时间：2013-02-05T17:04:11.653
> 
> 标签：html, css, centering

不知道为什么，但是如果不使用 padding-left:130px ，我无法将图标放在页面中心；

这当然不理想，因为当您重新调整浏览器窗口大小时，图标无法正确居中。也许我需要更多的咖啡，但今天早上我可以使用堆垛机的帮助！

**[http://towerdive.net/](http://towerdive.net/)**

HTML

```
<div id="center2">
    <div id="social_icons">
        <p>
            Thanks for your interest in our blog!
            You can also find us here, as well as subscribe to our newsletter:
        </p>
        <ul>
            <li id="facebook">
                <a href="https://www.facebook.com/pages/Towerdive/497721103607131" title="Like us on Facebook"><img src="img/icon_facebook.png" alt="Facebook"/></a>
            </li>
            <li id="twitter">
                <a href="https://twitter.com/TowerDiveDotNet" title="Follow us on Twitter"><img src="img/icon_twitter.png" alt="Twitter"/></a>
            </li>
            <li id="newsletter">
                <a href="http://eepurl.com/uY5m9" title="Subscribe to our Newsletter"><img src="img/icon_newsletter.png" alt="Newsletter"/></a>
            </li>
        </ul>
    </div>
</div> 
```

CSS

```
#center2 {
    width: 100%;
}

#social_icons {
    margin: 0 auto;
    width: 400px;
    height: 250px;
    text-align: center;
}

#social_icons p {
    color: #e3cda4;
}

#social_icons ul {
    margin: 0 auto;
    list-style: none;
    text-align: center;
}

#social_icons ul li {
    float: left;
    padding-right: 10px;
} 
```

让我知道你们是否需要完整的 HTML 或 CSS！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:07:52.037

您可以为此使用**display:inline-block**。像这样写：

```
#social_icons ul li {
    display: inline-block;
    *display:inline;/* For IE7*/
    *zoom:1;/* For IE7*/
    vertical-align:top;
    padding-right: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:14:12.730

您当前使用浮动来水平显示导航列表。由于浮动，您无法在无序列表中间对齐列表项。

另一种技术是代替`float: left;`使用`display: inline-block;`. 列表项将水平显示，但也会考虑所有额外的空白。您将获得项目之间的额外边距（如 4px）。现在您可以`text-align: center;`在 UL 上使用来使列表项居中。

Chris Coyier 在这篇文章中描述了几种（简单的）锻炼：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# drupal - 如何创建规则以将菜单链接添加到节点？

> ID：14712907
> 
> 赞同：0
> 
> 时间：2013-02-05T17:04:49.490
> 
> 标签：drupal, drupal-7

如何创建将菜单链接添加到给定菜单中的节点的规则（带有规则）。

我想在 VBO 视图中包含此操作...我有数百个节点要更新，但它们并非都在同一个地方。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:15:40.607

您是否查看过[http://drupal.org/project/menu_link](http://drupal.org/project/menu_link)模块？请提供您的方案，我很乐意提供帮助

# ios - UIWebView 旋转重叠按钮

> ID：14712911
> 
> 赞同：1
> 
> 时间：2013-02-05T17:04:55.877
> 
> 标签：ios, uiwebview, overlapping, screen-rotation

我有一个`UIWebView`设置可以在纵向模式下到达页面的三个边缘。页面顶部有一个小空间，我放了几个`UIButton`s 和 a `UITextField`。

在页面加载时，我将网页加载到`UIWebView`纵向中，所有看起来都符合预期。当我要求模拟器向左或向右旋转到横向时，按钮会消失，或者在播放一点后最终会出现`UIWebView`在顶部的按钮后面。我希望像`UIWebView`在纵向模式下一样在按钮下方停止。

任何援助将不胜感激。

# javascript - 延迟 jQuery UI 自动完成焦点事件

> ID：14712915
> 
> 赞同：1
> 
> 时间：2013-02-05T17:04:59.100
> 
> 标签：javascript, jquery, ajax, jquery-ui, autocomplete

我正在使用 jQuery UI 库版本 1.8.23 中的自动完成小部件。我的代码如下所示：

```
$(this).autocomplete({
     autoFocus: true,
     minLength: 2,
     delay:     100,
     source:    function(request, response) {AutoCpl.getSource(request, response)},
     select:    function(e, ui)             {AutoCpl.getSelect( e, ui, $(this) )},
     open:      function(e, ui)             {AutoCpl.setOpen($(this))}
}); 
```

在 100 毫秒延迟后，我正在使用 AJAX 调用产品列表进行检索。一切正常，但焦点事件有问题。当它悬停在选择列表上时，我想显示产品详细信息。由于需要计算大量数据，我无法一次返回带有产品列表的产品详细信息。我需要使用另一个 AJAX 调用稍后在焦点事件中获取这些信息。因为有人可以在一次鼠标移动中将鼠标悬停在所有产品上，所以我无法进行 AJAX 调用并显示每个响应。我必须确定有人真的想查看特定产品的详细信息，所以我想等待一段时间进行 AJAX 调用。

我试图使用 Ben Alman 的 jQuery debouce 插件，但它不会按我想要的方式工作（或者我可能只是使用错误）。如果我尝试这种方式：

```
focus:     $.debounce(1000, App.getProductsDetails) 
```

事件延迟了 1 秒（没关系），但在 getProductsDetailt 中我无权访问事件和 ui 对象。我尝试了另一种方法：

```
focus:     function(e, ui){$.debounce(1000, App.getProductsDetails)} 
```

这次 getProductsDetails 甚至没有被调用，这并没有让我感到惊讶，因为据我所知 debounce 函数必须绑定到一个事件，即。$('#id').click($.debounce())。

我的问题是如何延迟焦点事件并同时访问焦点事件返回的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:19:05.097

经过几个小时的研究和尝试，我找到了答案。

$.debounce 函数传递所有参数，所以我需要做的就是向我的 AgetProductsDetails 方法添加参数：

```
App = {
    getProductsDetails: function(e, ui){
        console.log(ui);
    }
} 
```

所以这段代码：

```
 focus:     $.debounce(1000, App.getProductsDetails) 
```

很好。[debounce 插件的文档](http://benalman.com/code/projects/jquery-throttle-debounce/docs/files/jquery-ba-throttle-debounce-js.html)给了我一个线索。

我后来犯了错误...

# c# - 以编程方式将 IIS 应用程序池标识“用户”分配给组

> ID：14712916
> 
> 赞同：6
> 
> 时间：2013-02-05T17:05:01.820
> 
> 标签：c#, permissions, iis-7.5, application-pool, applicationpoolidentity

**问题：**当创建新的 IIS 应用程序池并将其设置为使用应用程序池标识获得权限时，我不确定如何将这些标识添加到用户组，例如管理员或性能计数器用户。

**背景：**我目前正在编写一个 C#.NET 库，它使用 Microsoft.Web.Administration 来执行以下操作：

*   检测是否安装了 IIS 7.x，如果安装了，是什么组件。
*   安装或升级 IIS 7.x 到提供的所需组件列表。
*   通过 IIS 创建/管理一个或多个网站。
*   每个网站自动创建/管理一个应用程序池

上下文是，可执行安装程序将使用此库在 Windows Server 操作系统上提供 Web 服务器和网站/服务的自动部署，作为更大软件部署的一部分。到目前为止，除了需要在应用程序池/网站创建时执行的一些权限的自动化之外，上述所有内容都已实现、测试并且（大部分）功能正常。

在我安装新网站的方法中，我创建了一个新的应用程序池并强制它使用应用程序池标识：

```
static public void InstallSite(string name, string path, int port)
{
    Site site;
    var appPoolName = ApplicationPoolBaseName + name;

    using (var iisManager = new ServerManager())
    {
        // Set up a custom application pool for any site we run.
        if (!iisManager.ApplicationPools.Any(pool => pool.Name.Equals(appPoolName)))
        {
            iisManager.ApplicationPools.Add(appPoolName);
            iisManager.ApplicationPools[appPoolName].ManagedRuntimeVersion = "v4.0";
        }
        iisManager.CommitChanges();
    }

    // ... other code here ('site' gets initialized) ...

    using (var iisManager = new ServerManager())
    {
        // Set anonymous auth appropriately
        var config = iisManager.GetWebConfiguration(site.Name);
        var auth = config.GetSection("system.web/authentication");
        auth.SetMetadata("mode", "Windows");
        var authSection = config.GetSection("system.webServer/security/authentication/anonymousAuthentication");
        authSection.SetAttributeValue("enabled", true);
        authSection.SetAttributeValue("userName", string.Empty); // Forces the use of the Pool's Identity.
        authSection = config.GetSection("system.webServer/security/authentication/basicAuthentication");
        authSection.SetAttributeValue("enabled", false);
        authSection = config.GetSection("system.webServer/security/authentication/digestAuthentication");
        authSection.SetAttributeValue("enabled", false);
        authSection = config.GetSection("system.webServer/security/authentication/windowsAuthentication");
        authSection.SetAttributeValue("enabled", false);

        iisManager.CommitChanges();
    }

    // ... other code here ...
} 
```

据我了解，这将是最佳安全实践，然后我将添加对特定网站的权限，以实现最低系统访问权限以外的任何内容。此过程的一部分是将这些应用程序池身份添加到用户组，例如管理员或性能监视器用户。这就是出现并发症的地方。

现在，正如[其他地方所记录](http://forums.iis.net/t/1156692.aspx)的那样，每个应用程序池标识都以以下格式存在，`IIS AppPool\\<pool_name>`但是这个假用户没有通过普通的 GUI 用户管理控件列出，并且似乎无法通过库访问，[例如在 SO 上](https://stackoverflow.com/questions/12843469/adding-local-user-to-local-admin-group)`System.DirectoryServices.AccountManagement`遵循这个示例时。此外，有关应用程序池标识的其他问题似乎与[从子网站中引用它](https://stackoverflow.com/questions/10101162/get-the-application-pool-identity-programmatically)有关，而不是从安装上下文中引用它。

那么，有谁知道正确的方法是什么

*   a) 以编程方式引用和访问应用程序池标识。
*   b) 通过添加用户组来授予应用程序池身份权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-20T15:12:20.697

谢谢你写得很好的问题。这正是我昨晚试图解决的问题，它给了我足够的继续，我终于能够拼凑出一个只使用托管代码的答案。我发现让框架找到虚拟用户并与之合作的三个步骤：

*   用于`new System.Security.Principal.NTAccount(@"IIS APPPOOL\<appPoolName>")`处理帐户。
*   用于`.Translate(typeof (System.Security.Principal.SecurityIdentifier))`将其转换为 SID
*   理解`Principal.FindByIdentity()`将 SID 视为一个组，而不是用户

最终的工作程序（我的测试是 Windows Server 2012）如下：

```
using System;
using System.DirectoryServices.AccountManagement;

namespace WebAdminTest
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var user = new System.Security.Principal.NTAccount(@"IIS APPPOOL\10e6c294-9836-44a9-af54-207385846ebf");
            var sid = user.Translate(typeof (System.Security.Principal.SecurityIdentifier));

            var ctx = new PrincipalContext(ContextType.Machine);

            // This is weird - the user SID resolves to a group prinicpal, but it works that way.
            var appPoolIdentityGroupPrincipal = GroupPrincipal.FindByIdentity(ctx, IdentityType.Sid, sid.Value);

            Console.WriteLine(appPoolIdentityGroupPrincipal.Name);
            Console.WriteLine(appPoolIdentityGroupPrincipal.DisplayName);

            GroupPrincipal targetGroupPrincipal = GroupPrincipal.FindByIdentity(ctx, "Performance Monitor Users");

            // Making appPoolIdentity "group" a member of the "Performance Monitor Users Group"
            targetGroupPrincipal.Members.Add(appPoolIdentityGroupPrincipal);
            targetGroupPrincipal.Save();

            Console.WriteLine("DONE!");
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:27:57.053

一个解决方案比我预期的要早出现，尽管它不是我喜欢的那个。[对于任何感兴趣的人，此 pinvoke 页面](http://www.pinvoke.net/default.aspx/netapi32.netlocalgroupaddmembers)上还有几个附加选项。托管解决方案对我不起作用，但使用 DllImport 的示例有效。我最终调整示例以处理基于将枚举映射到 SID 字符串的任意组，并包括另一个 DllImport：

```
[DllImport("advapi32.dll", SetLastError = true)]
static extern bool ConvertStringSidToSid(
    string StringSid,
    out IntPtr ptrSid); 
```

修改后的（工作）函数如下所示：

```
static public bool AddUserToGroup(string user, UserGroup group)
{
    var name = new StringBuilder(512);
    var nameSize = (uint)name.Capacity;
    var refDomainName = new StringBuilder(512);
    var refDomainNameSize = (uint)refDomainName.Capacity;
    var sid = new IntPtr();
    switch (group)
    {
        case UserGroup.PerformanceMonitorUsers:
            ConvertStringSidToSid("S-1-5-32-558", out sid);
            break;
        case UserGroup.Administrators:
            ConvertStringSidToSid("S-1-5-32-544", out sid);
            break;
        // Add additional Group/cases here.
    }

    // Find the user and populate our local variables.
    SID_NAME_USE sidType;
    if (!LookupAccountSid(null, sid, name, ref nameSize,
        refDomainName, ref refDomainNameSize, out sidType))
        return false;

    LOCALGROUP_MEMBERS_INFO_3 info;
    info.Domain = user;

    // Add the user to the group.
    var val = NetLocalGroupAddMembers(null, name.ToString(), 3, ref info, 1);

    // If the user is in the group, success!
    return val.Equals(SUCCESS) || val.Equals(ERROR_MEMBER_IN_ALIAS);
} 
```

希望这会引起其他人的兴趣，我仍然想知道是否有人遇到过有效的、完全托管的解决方案。

# c++ - 在 Matlab 中包装 c++ 代码以访问 Matlab 中的程序状态信息

> ID：14712919
> 
> 赞同：1
> 
> 时间：2013-02-05T17:05:03.597
> 
> 标签：c++, matlab, mex

我有一个更新系统的 c++ 程序。当我用 C++ 编写所有东西时，它看起来有点像这样

```
System S; //initialize a System object 'S'
while (notFinished)
{
    S.update1(inputVars1);
    S.update2(inputVars2);
} 
```

现在我想从 matlab 中调用各个更新函数，并能够在 matlab 中调试时随时使用访问函数（用 c++ 编写）来查看程序的状态。

所以matlab需要调用一些东西来实例化一个“系统”对象，然后它需要从原始系统对象调用各个系统方法。

假设我将单独的 mex 文件编译为`Initialize` `update1` `update2`和一些获取有关当前状态的信息`getState`。然后写一些matlab代码...

```
%matlab main
S = Initalize(); %mex file
while (notFinished)
    update1(S); %mex file
    keyboard; % access state information using "getState" mex function
    update2(S); %mex file
    keyboard; % access state information using "getState" mex function
end 
```

这基本上允许我在 Matlab 中调用和调试我的 C++ 程序算法，还是有另一种方法来解决整个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:59:29.340

我这样做的方法是使用“new”在 Initialize mex 函数中为 C++ 中的 System 创建一个指针。如果您在 64 位平台上，则将此指针转换为 64 位整数并创建具有该类型和值的 mxArray。从您的 Initialize 函数中返回此 mxArray。

对于以后调用您的其他 mex 文件，您应该将此 mxArray 作为输入传递。在这些文件中，您可以将其转换为指针并调用对象上的方法。

我还将采取进一步措施将整个事物包装在 MATLAB System 对象或常规对象中，而不是将指针值 S 暴露在对象之外。您需要对象上的方法来调用您的 mex 文件。如果您打算将其提供给其他人使用，则尤其需要这样做。其他人可能会意外覆盖或修改 S 导致崩溃。

最后，您需要一个删除指针 S​​ 的删除 mex 函数。如果您创建一个句柄类，那么您可以在析构函数中执行此操作。

# jquery - 如何打印 console.log 这个 0？

> ID：14712921
> 
> 赞同：0
> 
> 时间：2013-02-05T17:05:10.570
> 
> 标签：jquery, console

![在此处输入图像描述](../Images/547e398aa03d8e0f0ea21b2fa57ecc99.png)

这是`console.log($(this));`我试过的`console.log($(this).0);`，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:07:20.937

我猜你的意思是：

```
console.log( $(this).get(0) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:06:24.190

你会想要`console.log($(this)[0]);`

# php - 具有多个 LIKE 选项的 MySQL。什么是替代选择？

> ID：14712924
> 
> 赞同：2
> 
> 时间：2013-02-05T17:05:29.213
> 
> 标签：php, mysql, pdo, sql-like

我正在编写 PDO 准备，但我想知道是否有另一种编写它的好方法，以便它运行得更快。这是代码：

```
function comp_post_code($cat, $comp_post_code){
            global $DBH;
            $STH = $DBH->prepare("SELECT * from uk_data where 
                                    cat10 like :comp_post_code  AND (
                                    cat1 like :cat OR
                                    cat2 like :cat OR
                                    cat3 like :cat OR
                                    cat4 like :cat OR
                                    cat5 like :cat OR
                                    cat6 like :cat OR
                                    cat7 like :cat 

                                    )") ;
            $STH->bindValue(':cat', "%$cat%", PDO::PARAM_STR);
            $STH->bindValue(':comp_post_code', "$comp_post_code%", PDO::PARAM_STR);
            $STH->execute();
            $STH->setFetchMode(PDO::FETCH_ASSOC);
            return $STH;
            $DBH = Null;
            } 
```

我想要表中的完整数据，所以我正在使用 Select。* ....谢谢

编辑：- cat10 是邮政编码，cat 1 到 cat7 是类别。我需要搜索给定邮政编码中的类别。

这是表格格式：

```
CREATE TABLE IF NOT EXISTS `uk_data` (
  `slno` int(10) NOT NULL AUTO_INCREMENT,
  `comp_name` varchar(150) DEFAULT NULL,
  `comp_no` varchar(50) DEFAULT NULL,
  `comp_street` varchar(100) DEFAULT NULL,
  `comp_area` varchar(100) DEFAULT NULL,
  `comp_post_code` varchar(15) DEFAULT NULL,
  `comp_phone` varchar(100) DEFAULT NULL,
  `comp_phone1` varchar(100) DEFAULT NULL,
  `cat1` varchar(100) DEFAULT NULL,
  `cat2` varchar(100) DEFAULT NULL,
  `cat3` varchar(100) DEFAULT NULL,
  `cat4` varchar(100) DEFAULT NULL,
  `cat5` varchar(100) DEFAULT NULL,
  `cat6` varchar(100) DEFAULT NULL,
  `cat7` varchar(100) DEFAULT NULL,
  `cat8` decimal(9,6) DEFAULT NULL,
  `cat9` decimal(9,6) DEFAULT NULL,
  `cat10` varchar(15) DEFAULT NULL,
  PRIMARY KEY (`slno`),
  UNIQUE KEY `Phone` (`comp_phone`),
  KEY `cat10` (`cat10`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=74504 ; 
```

我正在使用的输出：

```
$uk_data_radious = comp_post_code($q,$pc_o);
            while (($row = $uk_data_radious->fetch()) !== false) {
            $comp_name[] = $row['comp_name'];
            $comp_phone[] = $row['comp_phone'];
            $comp_phone1[] = $row['comp_phone1'];
            $post_code[] = $row['cat10'];
            $post_code1[] = $row['comp_post_code'];
            $comp_no[] = $row['comp_no'];
            $comp_street[] = $row['comp_street'];
            $comp_area[] = $row['comp_area'];
            $cat1[] =  $row['cat1'];
            $cat2[] =  $row['cat2'];
            $cat3[] =  $row['cat3'];
            $cat4[] =  $row['cat4'];
            $cat5[] =  $row['cat5'];
            $cat6[] =  $row['cat6'];
            $cat7[] =  $row['cat7'];
            $distance_m[] = distance($Latitude[0],$Longitude[0],$row['cat8'],$row['cat9'],"M");
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:31:19.090

[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)在长字符串上的搜索效果更好。但它需要创建一个特殊的索引，并更改查询（并且与 InnoDB 表不兼容）。

这是相当多的工作。但是如果*类似*查询真的很慢，FTI（全文索引）是一个快速的选择。

--

保留*like*查询，您无能为力 - 当然除非改变您在列中组织数据的方式 - 即为了避免*like*。

为了以某种方式优化*like*查询，您可以将所有猫合并到一个列中（即添加一个新列*catx*），用一个不会出现在您的*猫*中的特殊字符分隔， like `:`，并且只执行一个“like”（这应该会加快一点）。例如

```
cat1: alpha
cat2: beta
cat3: gamma
... 
```

给

```
catx is :alpha:beta:gamma: 
```

并在 catx 上做类似的事情

```
catx like :cat 
```

*   要搜索特定的*猫*，请搜索“:mycat:”
*   搜索*cat*的一部分，以单词开头，搜索 ":start" 或
*   要搜索结束词，请搜索“end:”

类似搜索算法*在*长字符串上比在较小字符串上运行多次更有效。当搜索字符串超过 3 个字符时，MySQL 使用非常高效的[Turbo Boyer-Moore 算法。](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

但我必须警告你：这个策略有几个限制

*   不应出现在*猫中的特殊分隔符*
*   *对cat[1-7]*的任何更新都需要*catx*调整，因此如果*猫*可能会发生很大变化，那么这可能不是一个好的解决方案
*   这个解决方案通常适用于众所周知的数据——比如标识符——格式很少改变

根据经验，我认为您不能期望通过这种策略获得超过 25% 的收益。

# php - php zlib：如何从字符串变量动态创建内存中的 zip 文件？

> ID：14712925
> 
> 赞同：3
> 
> 时间：2013-02-05T17:05:29.227
> 
> 标签：php, dynamic, zip, zlib

这就是我需要的

```
$a=array('folder'=>'anyfolder','filename'=>'anyfilename','filedata'=>'anyfiledata'); 
```

我需要使用来自 $a 的压缩数据创建一个变量 $zip 并将这个 $zip 输出到浏览器窗口中

```
header('Content-type: application/octetstream');
echo $zip; 
```

我找到的所有库，它们打包文件并在磁盘上物理创建 zip 文件。我需要使用内存动态地执行此操作。有没有关于如何使用纯 php 的 zlib 并且不研究 zip 格式规范的示例？

UPD：
可以用[CreateZIP](http://www.phpclasses.org/package/2322-PHP-Create-ZIP-file-archives-and-serve-for-download.html)类完成吗？

UPPD：
是的。它可以 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:31:42.990

是的，[CreateZIP](http://www.phpclasses.org/package/2322-PHP-Create-ZIP-file-archives-and-serve-for-download.html)类做到了。

```
require_once('CreateZipFile.php');
$zip = new CreateZipFile;
$zip->addFile('anyfiledata', 'anyfilename');
$zip->addFile('anyfiledata2', 'anyfolder/anyfilename.anyext');
$zip->addDirectory('anyemptydirwouldbecreatedinthiszipfile');
header('Content-disposition: attachment; filename='.'zipfile.zip'.'');
header('Content-type: application/octetstream');
echo $zip->getZippedfile();
die(); 
```

非常感谢**Er。罗恰克乔汉**

# google-calendar-api - Icalendar ICS 更新在谷歌日历中不起作用

> ID：14712929
> 
> 赞同：13
> 
> 时间：2013-02-05T17:05:42.090
> 
> 标签：google-calendar-api, icalendar, rfc2445, rfc5545

我对 Gmail/Google 日历地址的 ICS 附件有些问题。当我必须编辑事件时，我会通过邮件发送更新，其中包含与原始事件相同 UID 的 ICS 文件。但是，GCalendar 添加了第二个事件。我该如何克服呢？

这是第一个 ICS 文件内容：

```
BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20130425T090000
DTEND:20130425T100000
DTSTAMP:20130206T101100
ORGANIZER;CN=Test test:mailto:test@test.com
ATTENDEE:test@test.eu
UID:CALEVENT_TS090519840000000005
DESCRIPTION:test
SUMMARY:test
LOCATION:Test
SEQUENCE:1
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR 
```

这是更新的 ICS 文件内容：

```
BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20130425T100000
DTEND:20130425T110000
DTSTAMP:20130206T101100
ORGANIZER;CN=Test test:mailto:test@test.com
ATTENDEE:test@test.eu
UID:CALEVENT_TS090519840000000005
DESCRIPTION:test
SUMMARY:test
LOCATION:Test
SEQUENCE:2
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR 
```

当我收到更新文件并单击“将此事件添加到日历”时，我会发现两个不同的事件。

这是原始的原始电子邮件：

```
Delivered-To: test@test.eu
Received: by 10.216.231.19 with SMTP id k19csp190640weq;
        Sat, 9 Feb 2013 08:01:11 -0800 (PST)
X-Received: by 10.194.7.136 with SMTP id j8mr15530679wja.38.1360425671327;
        Sat, 09 Feb 2013 08:01:11 -0800 (PST)
Return-Path: <test@test.eu>
Received: from mxavas8.aruba.it (mxavas8.aruba.it. [62.149.157.18])
        by mx.google.com with SMTP id 45si59706250eeg.83.2013.02.09.08.01.11;
        Sat, 09 Feb 2013 08:01:11 -0800 (PST)
Received-SPF: neutral (google.com: 62.149.157.18 is neither permitted nor denied by best guess record for domain of test@test.eu) client-ip=62.149.157.18;
Authentication-Results: mx.google.com;
       spf=neutral (google.com: 62.149.157.18 is neither permitted nor denied by best guess record for domain of test@test.eu) smtp.mail=test@test.eu
Received: (qmail 4991 invoked by uid 89); 9 Feb 2013 16:01:10 -0000
Delivered-To: test.eu-test@test.eu
Received: (qmail 4424 invoked by uid 89); 9 Feb 2013 16:01:04 -0000
Received: from unknown (HELO mxcmd03.ad.aruba.it) (10.10.10.67)
  by mxavas8.ad.aruba.it with SMTP; 9 Feb 2013 16:01:04 -0000
Received: from smtpdg11.aruba.it ([62.149.158.229])
    by mxcmd03.ad.aruba.it with bizsmtp
    id yFwi1k01A4xF4Fy01G14N7; Sat, 09 Feb 2013 17:01:04 +0100
Received: from localhost ([79.54.181.227])
    by smtpcmd04.ad.aruba.it with bizsmtp
    id yG141k0074umbYX01G140P; Sat, 09 Feb 2013 17:01:04 +0100
Date: Sat, 9 Feb 2013 17:01:04 +0100
Return-Path: test@test.eu
To: test@test.eu
From: Event notification <test@test.eu>
Reply-To: Event notification <test@test.eu>
Subject: New Event
Message-ID: <238497c6d05cffae45716486e74a8009@localhost>
X-Priority: 3
X-Mailer: PHPMailer 5.2.2 (http://code.google.com/a/apache-extras.org/p/phpmailer/)
MIME-Version: 1.0
Content-Type: multipart/mixed;
    boundary="b1_238497c6d05cffae45716486e74a8009"
X-Spam-Rating: mxavas8.ad.aruba.it 1.6.2 0/1000/N

--b1_238497c6d05cffae45716486e74a8009
Content-Type: multipart/alternative;
    boundary="b2_238497c6d05cffae45716486e74a8009"

--b2_238497c6d05cffae45716486e74a8009
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

test

        DateTimeRoom
        02/05/201309.00 - 10.15ROOM1

--b2_238497c6d05cffae45716486e74a8009
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;">
<style type="text/css">
<!--
    td{ background-color: #eee; }
-->
</style>
</head>
<body style="font-family: Arial, Helvetica, sans-serif; color: #333;">
<p style="text-align:center;"><img src="images/logo2.png" alt="Logo" /></p>
<hr style="border: 1px solid #ccc; width: 80%;" />
<div style=" width: 80%; margin: 10px auto;">
    <h4></h4>
    <h3>test</h3>
    <table style="width: 400px; table-layout: fixed; border: 1px solid #ccc;">
        <tr><th>Date</th><th>Time</th><th>Room</th></tr>
        <tr><td>02/05/2013</td><td>09.00 - 10.15</td><td>ROOM 1</td></tr>
    </table>
</div>
</body>
</html>

--b2_238497c6d05cffae45716486e74a8009--

--b1_238497c6d05cffae45716486e74a8009
Content-Type: text/calendar; name="event.ics"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="event.ics"

BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
PRODID:tsCalendar
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20130502T090000
DTEND:20130502T101500
DTSTAMP:20130209T170100
ORGANIZER:mailto:test@test.eu
ATTENDEE:mailto:test@test.eu
UID:CALEVENT_TS090519840000000013
DESCRIPTION:test
SUMMARY:test
LOCATION:ROOM1 (floor: prova)
SEQUENCE:1
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR

--b1_238497c6d05cffae45716486e74a8009-- 
```

以下是其他测试，其中 ORGANIZER 电子邮件与 Sender 电子邮件相同，ATTENDEE 电子邮件与 Receiver 电子邮件相同。

创建[http://tny.cz/6396ba62](http://tny.cz/6396ba62) 更新[http://tny.cz/08ac81c0](http://tny.cz/08ac81c0)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-03-31T06:54:00.980

提供的一些答案不是（完全）正确的。

简而言之，您的`ATTENDEE`资源需要更多参数来确保 Google 日历将其视为更新：

```
ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=
TRUE;CN=Recipient Name;X-NUM-GUESTS=0:mailto:recipient@gmail.com 
```

我有同样的问题并找到答案我：

1.  使用 Google 日历本身 + 更新的邀请向自己发送了邀请
2.  比较两个 .ics 文件
3.  在这两个 .ics 文件上运行许多不同的自生成变体，以找出真正需要的参数

这些是我的发现：

*   将 SEQUENCE 从 0 增加到 1（或者如果您想更新更新，则进一步增加）
*   `METHOD`必须是`REQUEST`(*1)
*   电子邮件`sender`不需要与（旁注：但是，在`ORGANIZER`Google 日历中无法*更新*`ORGANIZER`）
*   `ORGANIZER`不需要被列为`ATTENDEE`
*   电子邮件`recipient`必须是`ATTENDEE`
*   另外（如上所述），`ATTENDEE`需要额外的参数，而不仅仅是`:mailto`
*   `STATUS`不需要提供。编辑：在向谷歌日历/chrome/mac发送邀请时就是这种情况，但在其他组合中，邀请似乎没有得到正确的预览
*   文档中包含多行的参数应在下一行缩进一个空格
*   在 Google 日历生成的 iCalender 对象中，您可能会注意到太长的行在文档中被分成几行，但这不是必需的（例如，您可以提供一个很长的字符串的描述，只要确保它只需要一行*或*将其剪切成每行缩进一个空格的行）
*   额外提示：`UID`在原始邀请和更新中使用相同（这实际上不是必需的，但确保您的历史测试结果不受影响......）
*   额外提示 2：为了更容易测试，每次还要更改电子邮件的摘要和主题

清理示例：

```
BEGIN:VCALENDAR
PRODID:-//YourCompany/AppName//EN
VERSION:2.0
CALSCALE:GREGORIAN
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20180331T150000
DTEND:20180331T160000
DTSTAMP:20180331T150000 // make sure to populate this dynamically
ORGANIZER;CN=organizer@gmail.com:mailto:organizer@gmail.com
UID:BESTIDEVER123
ATTENDEE;CUTYPE=INDIVIDUAL;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=
TRUE;CN=Recipient Name;X-NUM-GUESTS=0:mailto:recipient@gmail.com
CREATED:20180331T150000  // make sure to populate this dynamically
DESCRIPTION:Best event evah
LAST-MODIFIED:20180331T150000 // make sure to populate this dynamically
LOCATION:
SEQUENCE:0 // don't forget to increment this!!
SUMMARY:A Wonderful Event
TRANSP:OPAQUE
END:VEVENT
END:VCALENDAR 
```

(*1) 我想不出的唯一问题是如何拥有一个`METHOD:PUBLISH`可以更新的 - 我正在尝试制作一个不应该回复的日历发布应用程序。如果有人能弄清楚这一点，我将不胜感激。:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-05T20:03:23.213

请参阅 RFC5546[更新事件](https://www.rfc-editor.org/rfc/rfc5546#section-4.2.3)

> 事件被移到不同的时间。“UID”属性（未更改）和“SEQUENCE”（碰撞为 1）属性的组合表示更新。

在您的情况下，鉴于您共享的内容，您可能需要在您的 ical 文件中添加一个 SEQUENCE 属性，并为您所做的每次更新增加它。

**更新：** 鉴于您添加的 ical 文件，您缺少以下文件的更新工作的组织者和与会者字段

```
BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
PRODID:pyICSParser
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20130425T090000
DTEND:20130425T100000
DTSTAMP:20130206T101100
ORGANIZER:mailto:organiser@example.com
ATTENDEE:mailto:attendee@example.com
UID:CALEVENT_TS090519840000000005
DESCRIPTION:test
SUMMARY:test
LOCATION:Test
SEQUENCE:1
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR 
```

此外，您需要将发件人的电子邮件地址与组织者的电子邮件地址相匹配，并且与与会者相同，如下所示的内容已通过谷歌日历进行了验证。

eml_as_string：

```
Subject: New Event
Message-ID: <238497c6d05cffae45716486e74a8009@localhost>
X-Priority: 3
X-Mailer: PHPMailer 5.2.2 (http://code.google.com/a/apache-extras.org/p/phpmailer/)
MIME-Version: 1.0
Content-Type: multipart/mixed;
boundary="b1_238497c6d05cffae45716486e74a8009"
X-Spam-Rating: mxavas8.ad.aruba.it 1.6.2 0/1000/N

--b1_238497c6d05cffae45716486e74a8009
Content-Type: multipart/alternative;
boundary="b2_238497c6d05cffae45716486e74a8009"

--b2_238497c6d05cffae45716486e74a8009
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

test

DateTimeRoom
02/05/201309.00 - 10.15ROOM1

--b2_238497c6d05cffae45716486e74a8009
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;">
<style type="text/css">
<!--
td{ background-color: #eee; }
-->
</style>
</head>
<body style="font-family: Arial, Helvetica, sans-serif; color: #333;">
<p style="text-align:center;"><img src="images/logo2.png" alt="Logo" /></p>
<hr style="border: 1px solid #ccc; width: 80%;" />
<div style=" width: 80%; margin: 10px auto;">
<h4></h4>
<h3>test</h3>
<table style="width: 400px; table-layout: fixed; border: 1px solid #ccc;">
    <tr><th>Date</th><th>Time</th><th>Room</th></tr>
    <tr><td>02/05/2013</td><td>09.00 - 10.15</td><td>ROOM 1</td></tr>
</table>
</div>
</body>
</html>

--b2_238497c6d05cffae45716486e74a8009--

--b1_238497c6d05cffae45716486e74a8009
Content-Type: text/calendar; name="event.ics"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="event.ics"

BEGIN:VCALENDAR
VERSION:2.0
CALSCALE:GREGORIAN
PRODID:tsCalendar
METHOD:REQUEST
BEGIN:VEVENT
DTSTART:20130502T090000
DTEND:20130502T101000
DTSTAMP:20130209T170100
ORGANIZER:mailto:test@test.eu
ATTENDEE:mailto:test@test.eu
UID:CALEVENT_TS090519840000000013
DESCRIPTION:test
SUMMARY:test
LOCATION:ROOM1 (floor: prova)
SEQUENCE:1
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR

--b1_238497c6d05cffae45716486e74a8009-- 
```

应用了以下脚本：

```
# -*- coding:utf-8 -*-
import smtplib
def sendInvite(fro,to,emlasstring):
    mailServer = smtplib.SMTP('smtp.gmail.com', 587)
    mailServer.ehlo()
    mailServer.starttls()
    mailServer.ehlo()
    mailServer.login(login, password)
    mailServer.sendmail(fro, to, emlasstring)
    mailServer.close()

newUID = "UID:newCALEVENT_TS090519840000000016"
#needed to change UID as once an event was sent its UID is locked and a few attempts were needed to make the script work
eml = open("SO14712929_1.eml",'r').read()
emlhead = "To: "+attendee_eml+CRLF
emlhead += "From:"+fro+CRLF
emlhead += "Reply-To: "+fro+CRLF
eml = emlhead+eml
eml = eml.replace("ORGANIZER:mailto:test@test.eu","ORGANIZER:mailto:"+fro_eml)
eml = eml.replace("ATTENDEE:mailto:test@test.eu","ATTENDEE:mailto:"+attendee_eml)
eml = eml.replace("UID:CALEVENT_TS090519840000000013",newUID)
sendInvite(fro,attendees,eml)
print "invite sent"

eml = open("SO14712929_2.eml",'r').read()
emlhead = "To: "+attendee_eml+CRLF
emlhead += "From:"+fro+CRLF
emlhead += "Reply-To: "+fro+CRLF
eml = emlhead+eml
eml = eml.replace("ORGANIZER:mailto:test@test.eu","ORGANIZER:mailto:"+fro_eml)
eml = eml.replace("ATTENDEE:mailto:test@test.eu","ATTENDEE:mailto:"+attendee_eml)
eml = eml.replace("UID:CALEVENT_TS090519840000000013",newUID)
sendInvite(fro,attendees,eml)
print "updated invite sent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:55:50.393

尝试使用 METHOD:PUBLISH 而不是 METHOD:REQUEST

# java - Java 正则表达式实现中的错误？

> ID：14712932
> 
> 赞同：27
> 
> 时间：2013-02-05T17:05:44.477
> 
> 标签：java, regex

我在 Java 的正则表达式实现中发现了一些意外行为。使用[`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)and[`java.util.regex.Matcher`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)时，以下正则表达式在使用 Matcher 的方法时*无法*正确匹配输入：`"Merlot"`[`find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)

```
((?:White )?Zinfandel|Merlot) 
```

如果我更改最外层匹配组内表达式的顺序，Matcher 的[`find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)方法*确实*匹配。

```
(Merlot|(?:White )?Zinfandel) 
```

这是一些说明问题的测试代码。

## 正则表达式测试.java

```
import java.util.regex.*;

public class RegexTest {
    public static void main(String[] args) {
        Pattern pattern1 = Pattern.compile("((?:White )?Zinfandel|Merlot)");
        Matcher matcher1 = pattern1.matcher("Merlot");
        // prints "No Match :("
        if (matcher1.find()) {
            System.out.println(matcher1.group(0));
        } else {
            System.out.println("No match :(");
        }

        Pattern pattern2 = Pattern.compile("(Merlot|(?:White )?Zinfandel)");
        Matcher matcher2 = pattern2.matcher("Merlot");
        // prints "Merlot"
        if (matcher2.find()) {
            System.out.println(matcher2.group(0));
        } else {
            System.out.println("No match :(");
        }
    }
} 
```

预期的输出是：

```
Merlot
Merlot 
```

但实际输出是：

```
No Match :(
Merlot 
```

我已经验证了这种意外行为存在于 Ubuntu linux 上的 Java 版本 1.7.0_11 和 OSX 10.8.2 上的 Java 版本 1.6.0_37 中。我昨天将此行为作为错误报告给[Oracle](http://bugs.sun.com)，并收到一封自动电子邮件，告诉我我的错误报告已收到，内部审查 ID 为 2441589。当我在他们的错误中搜索该 ID 时找不到我的错误报告数据库。（你能听到蟋蟀的声音吗？）

我是否在 Java 可能经过彻底测试和使用的正则表达式实现中发现了一个错误（在 2013 年很难相信），还是我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T17:51:08.817

以下：

```
import java.util.regex.*;

public class T {
  public static void main( String args[] ) {
    System.out.println( Pattern.compile("(a)?bb|c").matcher("c").find() );
    System.out.println( Pattern.compile("(a)?b|c").matcher("c").find() );
  }
} 
```

印刷

```
false
true 
```

在：

*   JDK 1.7.0_13
*   JDK 1.6.0_24

以下：

```
import java.util.regex.*;

public class T {
  public static void main( String args[] ) {
    System.out.println( Pattern.compile("((a)?bb)|c").matcher("c").find() );
    System.out.println( Pattern.compile("((a)?b)|c").matcher("c").find() );
  }
} 
```

印刷：

```
true
true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-02T05:35:33.050

它似乎已[在 Java 1.8 中修复](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7189363)。

```
Welcome to Scala version 2.11.0-20130930-063927-2bba779702 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0-ea).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import java.util.regex._
import java.util.regex._

scala> Pattern.compile("((?:White )?Zinfandel|Merlot)")
res0: java.util.regex.Pattern = ((?:White )?Zinfandel|Merlot)

scala> .matcher("Merlot")
res1: java.util.regex.Matcher = java.util.regex.Matcher[pattern=((?:White )?Zinfandel|Merlot) region=0,6 lastmatch=]

scala> .find()
res2: Boolean = true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T18:51:32.737

我不明白发生的一切，但我一直在使用您的示例来尝试提取一些您可以添加到错误报告中的诊断信息。

首先，如果您使用所有格量词，它会起作用，但我不知道为什么：

`Pattern pattern1 = Pattern.compile("((?:White )?+Zinfandel|Merlot)");`

此外，如果选择中的第一组比第二组短，那么它可以通过以下任何一种方式工作：

`Pattern pattern1 = Pattern.compile("((?:White )?Zinf|Merlot)");`

就像我说的，我真的不明白这怎么可能。这两个发现对我没有任何意义，但我只是想我会分享......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-19T22:19:33.510

该错误显然已**[在 Java 8](https://bugs.openjdk.java.net/browse/JDK-7189363)**中修复，并已解决为“不会修复”[作为](https://bugs.openjdk.java.net/browse/JDK-2228230)Java 7 的反向移植。但是，作为一种解决方法，您可以为“White”使用独立（原子）分组，也可以隔离测试将“白色仙粉黛”包装成一个单独的交替测试组。

在您的示例中，在第一个捕获组中有一个**[非](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special)**捕获组，其中包含以下内容。

非捕获组修饰符**`(?:White)`**

```
((?:White )?Zinfandel|Merlot) 
```

作为使用**[独立捕获组](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#special)**的工作将成功。

**独立**非捕获组修改器**`(?>White)`**

```
((?>White )?Zinfandel|Merlot) 
```

* * *

在 Java 1.7.0_71 中为独立的非捕获组或组交替重新创建测试用例是可行的。

```
java version "1.7.0_71"
Java(TM) SE Runtime Environment (build 1.7.0_71-b14)
Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode) 
```

### 独立非捕获组或组交替

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexTest {

    public static void main( String[] args ) {

        Pattern independentNCG = Pattern.compile( "((?>White )?Zinfandel|Merlot)" );
        Matcher independentNCGMatcher = independentNCG.matcher( "Merlot" );

        Pattern alternateGroupPattern = Pattern.compile( "(((?:White )?Zinfandel)|Merlot)" );
        Matcher alternateGroupMatcher = alternateGroupPattern.matcher( "Merlot" );

        System.out.println( independentNCGMatcher.find() ? independentNCGMatcher.group( 0 ) : "No match found for Merlot" );
        System.out.println( alternateGroupMatcher.find() ? alternateGroupMatcher.group( 0 ) : "No match found for Merlot" );

    }
} 
```

### 回报

```
Merlot
Merlot 
```

# html - 为什么我在搜索栏中按回车时看不到查询参数？

> ID：14712933
> 
> 赞同：2
> 
> 时间：2013-02-05T17:05:55.337
> 
> 标签：html, search

我试图在我的网络应用程序中实现一个搜索栏：

```
<form method="get" action="NewServlet">
    <input type="search" />
</form> 
```

当我在此搜索栏中输入内容并按 Enter 键时，URL 将从

```
http://localhost:8084/App-1/tester.jsp 
```

至

```
http://localhost:8084/App-1/NewServlet? 
```

为什么我在 URL 中看不到搜索查询参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:08:10.683

您必须命名您的字段：

```
<input type="search" name="query"/> 
```

这将调用：

```
http://localhost:8084/App-1/NewServlet?query=... 
```

# ruby-on-rails - Rails Mongoid 买方、项目、采购模型关联

> ID：14712934
> 
> 赞同：0
> 
> 时间：2013-02-05T17:06:05.493
> 
> 标签：ruby-on-rails, model-associations, mongoid3

我正在使用 Rails 3.2 和 Mongoid，我需要建立一个简单的购买关联。目前我有：

```
class Item
has_many :purchases

class Buyer
has_many :purchases

class Purchase
has_one :buyer
has_one :item 
```

我希望能够调用我当前实现的给定买家购买的所有商品：def purchase_by(buyer_id) items = [] ids = Buyer.find(buyer_id).purchase_ids Item.each do |i| items << i if (i.purchase_ids & ids).length > 0 end items end

但这似乎非常低效。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:23:41.233

尝试这个：

```
class Buyer
  def items_purchased
    purchases.collect(&:item)
  end
end 
```

然后给定一个 object `buyer`，你可以通过调用得到你想要的：

```
buyer.items_purchased 
```

# java - AspectJ 编译器 DeclareMixin 错误

> ID：14712935
> 
> 赞同：1
> 
> 时间：2013-02-05T17:06:07.783
> 
> 标签：java, annotations, aspectj

我正在使用`@DeclareMixin`由`aspectjrt-1.6.11`.

情况是：

```
 @Aspect
    public class anAspect {

      @DeclareMixin(value="@an.annotation.package.* *", interfaces = {
        FirstInterface.class, SecondInterface.class, ThirdInterface.class
      })
      public AggregateInterface magicMethod(Object instance) {
        return new AggregateInterfaceImpl(instance);
      }

      public interface AggregateInterface extends FirstInterface, 
        SecondInterface, ThirdInterface {
      }
} 
```

所以当我通过编译时`aspectj-maven-plugin-1.4`，编译器说工厂方法（在我的例子中是magicMethod（））不会返回实现任何已实现接口的东西。

当我在`AggregateInterfaceImpl`.

你对这个问题有任何想法吗？是不是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:42:17.663

I've resolved this issue declaring different mixins attached to different factory methods.

# ruby-on-rails - Rails 命名约定：“Miss”、“Kiss”、“Bus”等

> ID：14712939
> 
> 赞同：0
> 
> 时间：2013-02-05T17:06:18.703
> 
> 标签：ruby-on-rails, naming-conventions

当我的模型需要以以“s”结尾的单词命名时，我应该如何命名它们（例如链接总线）？我想 rails 会把它复数，在词尾加上另一个“s”。但我希望我的桌子被称为“公共汽车”而不是“公共汽车”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:08:25.817

Rails 会`String#pluralize`在生成模型时为你处理这个问题：

```
% rails g model bus                                                                                                                                                                            
      invoke  active_record
      create    db/migrate/20130205170847_create_buses.rb
      create    app/models/bus.rb
      invoke    rspec
      create      spec/models/bus_spec.rb 
```

以及由此产生的迁移：

```
# ...
    create_table :buses do |t|
      t.timestamps
    end
# ... 
```

你也可以自己试试`rails c`：

```
[1] pry(main)> 'bus'.pluralize
=> "buses"
[2] pry(main)> 'miss'.pluralize
=> "misses"
[3] pry(main)> 'kiss'.pluralize
=> "kisses" 
```

# python - 在 Python 中使用 for 循环进行迭代

> ID：14712940
> 
> 赞同：-1
> 
> 时间：2013-02-05T17:06:18.970
> 
> 标签：python, for-loop

谁能帮助理解为什么`computeBill`函数中的循环没有迭代？

```
groceries = ["banana", "orange","apple"]

stock = {"banana": 6, "apple": 0, "orange": 32, "pear": 15}

prices = {"banana": 4, "apple": 2, "orange": 1.5, "pear": 3}

def computeBill(food):
    total = 0.0
    for item in food:
        total += prices[str(item)] + stock[str(item)]
        print total
        return total

computeBill(groceries) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:08:14.590

您在循环`return` *内部*调用是因为它当前缩进的位置，所以它在第一次迭代后被执行。可能您想将它移到循环*之外*（与自身相同的缩进级别`for`），以便在迭代完成后调用它：

```
def computeBill(food):
    total = 0.0
    for item in food:
        total += prices[str(item)] + stock[str(item)]
        print total

    return total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:08:44.083

您`return`的语句在语句下方缩进`for`。解决这个问题，你应该没事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:08:46.437

您的返回行与 for 循环缩进。它将在第一个循环后返回。取消缩进该行，就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:09:58.900

您不应`return`在循环中使用该语句，`for`而应在同一级别使用该语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T17:17:43.440

为了使其工作，您需要将“return total”行放在与 for 循环相同的级别但不在其中，或者如果您想在每次迭代后打印出总数，则完全省略它。它不迭代的原因是 return 语句导致你的函数退出并将一个值返回给它的调用者。所以基本上，你有：

```
groceries = ["banana", "orange","apple"]

stock = {"banana": 6,    "apple": 0,    "orange": 32,
    "pear": 15    }

prices = {"banana": 4,    "apple": 2,
    "orange": 1.5,    "pear": 3
    }

def computeBill(food):
    total = 0.0
    for item in food:
        total += prices[str(item)] + stock[str(item)]
        print total

computeBill(groceries) 
```

给出输出：

```
10.0
43.5
45.5 
```

如果您只想打印出总数，那就是没有 return 语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T19:05:21.573

只是另一种解决方案。

```
groceries = ["banana", "orange", "apple"]
stock = {"banana": 6, "apple": 0, "orange": 32, "pear": 15}
prices = {"banana": 4, "apple": 2, "orange": 1.5, "pear": 3}

print(sum(stock[item] * prices[item] for item in groceries)) 
```

# javascript - 使用 jQuery 将文本字段值附加到 URL

> ID：14712945
> 
> 赞同：0
> 
> 时间：2013-02-05T17:06:33.040
> 
> 标签：javascript, jquery

我有一个 URL 列表：

```
localhost/action/add/234
localhost/action/add/244
localhost/action/add/334
localhost/action/add/254 
```

在这些值前面有一个文本框，当在框中输入一个值时，我想将它附加到 URL 的末尾。

```
localhost/action/add/234/test text1
localhost/action/add/244/test text2
localhost/action/add/334/test text3
localhost/action/add/254/test text4 
```

有人可以解释我该怎么做吗？我发现它可以使用`.val()`，但我不确定如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:37:17.730

如果您希望它立即更新：

```
<script>
  $(function(){
    var a = $('#url').text();
    $('#textbox').keyup(function(){
      var b = $('#textbox').val();
      $('#url').text(a + '/test ' + b);
      $('#url').attr('href', a + '/test ' + b);
    });
  });
</script>

<input id='textbox' type='text'></input>
<a href="localhost/action/add/234" id='url'>localhost/action/add/234</a> 
```

这里的关键是

*   `.keyup()`每当释放键盘键时，使用事件运行函数
*   修改`.text()`keyup 上 url 元素的
*   修改`'href'`url元素的属性，使链接匹配文本

通常`.val()`用于设置/获取输入元素的值，如文本框 ^ 或下拉菜单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-14T15:57:28.023

假设您希望将在文本字段中键入的文本附加到 href (URL)。我认为我们可以让它变得更简单。

这是工作解决方案。

```
$(document).ready(function(){
$('#search').on('click', function(e) {
 var search_url = e.originalEvent.currentTarget.href; //or else you can grab the URL anywhere from your DOM;
e.originalEvent.currentTarget.href = search_url + $('#search_term').val();
});
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="text" id="search_term" placeholder="Search..StackOverflow" />
<a href="https://stackoverflow.com/search?q=" id="search">Search </a>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-14T16:20:28.383

```
$(function(){
   var currVal = $('.url').text();
   $('input[type="text"]').keydown(function() {
     $('.url').text(currVal.trim()+$(this).val().trim());    
 });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<span class="url">
   localhost/action/add/234
</span>
   <input type="text" id="search_term" placeholder="blabla" />
```

# ios - authorize.net ios sdk 中的“此方法调用不允许使用身份验证类型”错误

> ID：14712946
> 
> 赞同：2
> 
> 时间：2013-02-05T17:06:34.367
> 
> 标签：ios

我正在尝试在我的应用程序中使用授权 ios sdk 作为支付网关。我已成功集成，但测试帐户出现上述错误。

```
AuthNet *an = [AuthNet getInstance];

[an setDelegate:self];

CreditCardType *creditCardType = [CreditCardType creditCardType];
creditCardType.cardNumber = @"38000000000006";
creditCardType.cardCode = @"100";
creditCardType.expirationDate = @"121213";

PaymentType *paymentType = [PaymentType paymentType];
paymentType.creditCard = creditCardType;

ExtendedAmountType *extendedAmountTypeTax = [ExtendedAmountType extendedAmountType];
extendedAmountTypeTax.amount = @"0";
extendedAmountTypeTax.name = @"Tax";

ExtendedAmountType *extendedAmountTypeShipping = [ExtendedAmountType extendedAmountType];
extendedAmountTypeShipping.amount = @"0";
extendedAmountTypeShipping.name = @"Shipping";

LineItemType *lineItem = [LineItemType lineItem];
lineItem.itemName = @"Soda";
lineItem.itemDescription = @"Soda";
lineItem.itemQuantity = @"1";
lineItem.itemPrice = @"1.00";
lineItem.itemID = @"1";

TransactionRequestType *requestType = [TransactionRequestType transactionRequest];
requestType.lineItems = [NSArray arrayWithObject:lineItem];
requestType.amount = @"1.00";
requestType.payment = paymentType;
requestType.tax = extendedAmountTypeTax;
requestType.shipping = extendedAmountTypeShipping;

CreateTransactionRequest *request = [CreateTransactionRequest createTransactionRequest];
request.transactionRequest = requestType;
request.transactionType = AUTH_ONLY;
request.anetApiRequest.merchantAuthentication.mobileDeviceId =
[[[UIDevice currentDevice] uniqueIdentifier]
 stringByReplacingOccurrencesOfString:@"-" withString:@"_"];
request.anetApiRequest.merchantAuthentication.sessionToken = sessionToken;
//[an authorizeWithRequest:request];
[an purchaseWithRequest:request]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-30T07:22:46.720

如果您的设备已经注册，请评论设备注册码
下面的行是注册，请评论它

```
[an mobileDeviceRegistrationRequest:mobileDeviceRegistrationRequest]; 
```

希望这对您有所帮助。如果有任何其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T07:25:10.037

出现此错误是因为在获取 deviceRegistrationRequest 响应之前已执行 deviceLoginRequest 调用。为避免此错误，请确保在请求 deviceLogin 之前获得 deviceRegistration 调用的响应。

# ios - 如果我无法从另一个线程调用 UIKit，如何在 Dispose 中进行清理？

> ID：14712949
> 
> 赞同：1
> 
> 时间：2013-02-05T17:06:41.217
> 
> 标签：ios, xamarin.ios, uikit, dispose, ui-thread

我的大部分 UIKit`Dispose`覆盖在它们被破坏之前对其他视图做一些事情：

```
protected override void Dispose (bool disposing)
{
    if (ScrollView != null) {
        ScrollView.RemoveObserver (this, new NSString ("contentOffset"));
        ScrollView.RemoveObserver (this, new NSString ("contentInset"));
        ScrollView = null;
    }

    base.Dispose (disposing);
} 
```

我最近才意识到，如果is ，`Dispose`它将在终结器线程上运行。 在这种情况下，将从错误的非 UI 线程调用。`disposing``false`
`ScrollView.RemoveObserver`

在中进行与 UIKit 相关的清理的安全方法是什么`Dispose`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:12:02.787

如果 disposing is `false`，那么最好不要调用该代码。

```
protected override void Dispose (bool disposing)
{
    if (disposing)
    {
        if (ScrollView != null) {
            ScrollView.RemoveObserver (this, new NSString ("contentOffset"));
            ScrollView.RemoveObserver (this, new NSString ("contentInset"));
            ScrollView = null;
        }
    }
    base.Dispose (disposing);
} 
```

作为对您的问题的更一般的答案-假设此代码在 UIViewController 中-在 ViewDidAppear、ViewDidDisappear 中附加/分离这些观察者可能会更好-然后您可以完全避免此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T06:44:43.580

[Adam Kemp在 Xamarin 论坛上的镜像线程](http://forums.xamarin.com/discussion/1134/how-do-i-clean-up-in-dispose-if-i-cant-call-uikit-from-another-thread)中发布了一个很好的解释。

> 只有当`disposing`你`true`应该做任何工作。如果是这样， `false`那么您将被终结器调用，因此访问该其他对象是不安全的。在这种情况下，您应该访问的唯一内容是任何非托管资源（例如`IntPtr`存储您需要释放的本机分配或需要终止的本机线程）。
> 
> 这显然提出了何时做你目前在那里做的工作的问题。如果您在视图控制器中，那么您可以使用类似`WillDisappear`. 如果您在视图中，那么您可以只使用`WillMoveToWindow`（如果您从窗口中删除，则使用 null 作为窗口调用）。

[另一个重要](http://forums.xamarin.com/discussion/comment/3871/#Comment_3871)的关于`ReleaseDesignerOutlets`：

> `ReleaseDesignerOutlets`从终结器调用时也不能调用。请记住，在终结器中查看对象引用的任何其他托管对象是不安全的。这些对象可能不再存在。
> 
> 跳过这是安全的，因为其他每个对象都已经有一个类似的终结器。如果你从不去调用`Dispose()`它们，那么它们将从终结器线程调用它们的终结器，在这种情况下，它们自己的终结器将调用自己的终结 器，并`Dispose(bool)`带有 false，这意味着“你正在从终结器调用”。由于本机对象是非托管资源（只是一个 `IntPtr`），因此他们的`Dispose(bool)`方法释放对这些本机资源的引用以允许这些本机对象离开内存是安全的。
> 
> 您实际上可以使用程序集浏览器来查看`NSObject`'s `Finalize`和`Dispose(bool)`methods 所做的事情来验证我刚刚描述的内容。不管你做什么，永远不要从终结器中访问你的托管资源，这意味着`Dispose(bool)`当 disposing 参数为 false 时永远不要访问它们。

谢谢亚当！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:02:55.110

你能用吗

```
InvokeOnMainThread(delegate {....}) 
```

杀死 UIKit 的东西？不是 100% 确定它会做你想做的事，但是当你可能在/在不同的线程上时，这是做 UIKit 东西的正常方式。

# regex - 正则表达式不适用于行首或行尾

> ID：14712950
> 
> 赞同：0
> 
> 时间：2013-02-05T17:06:57.267
> 
> 标签：regex, oracle, matching

我试过 [^A-Za-z0-9] *tent[^A-Za-z0-9]* .. 有多种组合 ?+*

以及类似 [^|[^A-Za-z0-9] *]tent[[^A-Za-z0-9]* |$]

我想匹配：

*   注意 - 否
*   看看帐篷 - 是的
*   帐篷很好 - 是的
*   一些帐篷的东西 - 是的
*   camping,tent,outdoors - 是（一些非字母数字分隔符）

如果它更容易，像“帐篷”之类的东西也可以是匹配的

我想我从我看过的所有页面中都遗漏了一些东西，但我真的被困在这里。我需要在句子或分隔列表的开头、中间或结尾找到一个搜索词。我需要做多个陈述吗？

我希望可能有一种方法可以说使用这个表达式，但如果它是行首或行尾则不行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:21:21.927

with `\w`（非字母数字）

```
SQL> select str
  2    from (select 'attention' str from dual union all
  3          select 'look at the tent' str from dual union all
  4          select 'tent''s are nice' str from dual union all
  5          select 'something tent something' str from dual union all
  6          select 'camping,tent,outdoors' str from dual)
  7   where REGEXP_LIKE(str, '(\W|^)tent(\W|$)', 'i') ;

STR
------------------------
look at the tent
tent's are nice
something tent something
camping,tent,outdoors

SQL> select str,
  2         case when REGEXP_LIKE(str, '(\W|^)tent(\W|$)', 'i') then 'YES' else 'NO' end matches
  3    from (select 'attention' str from dual union all
  4          select 'look at the tent' str from dual union all
  5          select 'tent''s are nice' str from dual union all
  6          select 'something tent something' str from dual union all
  7          select 'tent' str from dual union all
  8          select 'camping,tent,outdoors' str from dual);

STR                      MAT
------------------------ ---
attention                NO
look at the tent         YES
tent's are nice          YES
something tent something YES
tent                     YES
camping,tent,outdoors    YES 
```

# java - EC2 上的休眠搜索，“无法创建索引目录”

> ID：14712951
> 
> 赞同：4
> 
> 时间：2013-02-05T17:07:04.330
> 
> 标签：java, amazon-web-services, amazon-ec2, hibernate-search

我正在尝试在我的 aws 应用程序上实现 Hibernate Search。像往常一样，在 localhost 上一切正常，但是当上传到 aws 时，我收到以下错误：

```
org.hibernate.search.SearchException: Unable to create index directory: 
/usr/lucene/indexes for index com.myproject.domain.User 
```

我的休眠搜索配置：

```
<prop key="hibernate.search.default.directory_provider">filesystem</prop>
<prop key="hibernate.search.default.indexBase">/usr/lucene/indexes</prop> 
```

我正在使用 EC2 + elastic beanstalk，带有 tomcat 7 的 linux。我的本地机器上有 Windows。

我应该在 EC2 上手动创建一个名为“/usr/lucene/indexes”的目录吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:40:16.543

可能是该应用程序没有创建基本目录的正确权限吗？也许最好创建基本目录并赋予它正确的权限。AFAIK，Hibernate Search 将尝试创建完整路径。如果这不是许可的事情，那么查看完整的堆栈跟踪会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-30T13:15:38.673

我有类似的问题。原因是tomcat没有创建目录的权限。如果您查看 beanstalk 中的 eb 活动日志，则会创建目录，然后授予 tomcat 权限。

```
 ++ /opt/elasticbeanstalk/bin/get-config container -k tomcat_version
  + TOMCAT_VERSION=8.5
  + '[' 8.5 == 8.5 ']'
  + TOMCAT_VERSION=8
  + TOMCAT_NAME=tomcat8
  + [[ -n true ]]
  + rm -rf /var/log/tomcat8
  + mkdir -p /var/log/tomcat8
  + chown -R tomcat:tomcat /var/log/tomcat8
  + /opt/elasticbeanstalk/bin/log-conf -ntomcat8 '-l/var/log/tomcat8/*' 
```

所以你应该创建一个目录示例 var/myindex 并授予权限

```
sudo chown tomcat:tomcat /var/myindex 
```

在您的代码中，将 persistence.xml 中的路径更改为这个新路径。

作为一种快捷方式，如果您尝试注释掉索引行，应用程序仍然会尝试创建目录并且仍然会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-26T13:25:34.480

**对于 Windows 用户**

授予对服务器要创建所需目录的文件夹的**写入权限。**

就我而言，服务器想要在其中创建一个文件夹，因此我授予了为此文件夹**写入**`C:\Program Files\Java\jdk1.8.0_191` 的权限。

 **PS：这可能是一个糟糕的解决方案，因为它在`JAVA_HOME`**

# ruby-on-rails - undefined local variable or method `object' for error_messages.html

> ID：14712954
> 
> 赞同：1
> 
> 时间：2013-02-05T17:07:27.657
> 
> 标签：ruby-on-rails

I'm following the ruby on rails tutorial. And I received a error on my signup page only.

```
undefined local variable or method `object' for #<#<Class:0x007feb442f6a98>:0x007feb442f8438> 
```

Extracted source (around line #1):

```
1: <% if object.errors.any? %>
2:  <div id="error_explanation">
3:      <h2>
4:          <%= pluralize(object.errors.count, "error") %> 
```

Here's my error_messages file.

```
<% if object.errors.any? %>
    <div id="error_explanation">
        <h2>
            <%= pluralize(object.errors.count, "error") %>
            prohibited this <%= object.class.to_s.underscore.humanize.downcase %> from being saved:
            </h2>
            <p>There were problems with the following fields:</p>
            <ul>
            <% object.errors.full_messages.each do |message| %>
            <li><%= message %></li>
            <% end %>
            </ul>
    </div>

    <% end %> 
```

Now here's my users/new.html file.

```
<h1>Sign up</h1>

<%= form_for(@user) do |f| %>
<%= render 'shared/error_messages', :object => f.object %>
<%= render 'fields', :f => f %>
<div class="actions">
<%= f.submit "Sign up" %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:13:38.450

The object passed down with `:object =>` becomes a local variable in the partial with the same name as the partial. So in this case, where your partial is called `error_messages`, the first line should be

```
<% if error_messages.errors.any %> 
```

Now obviously this looks a little confusing - which is perhaps a suggestion the naming of the partial is wrong.

Also, partial view files should be named starting with an underscore - `shared/_error_messages` - to mark they're not full views; they should be rendered with `render :partial => 'shared/error_messages'`; and the `:object` local variable doesn't carry the underscore.

See [some docs](http://apidock.com/rails/ActionView/PartialRenderer) on rendering partials.

# php - 设置变量时显示一个 div 并让它在 x 秒后消失

> ID：14712959
> 
> 赞同：2
> 
> 时间：2013-02-05T17:07:49.153
> 
> 标签：php, jquery

我有一个 php 页面，其中的变量在页面加载时设置为 true 或 false。我想在变量为真时显示一个特定的 div，然后 div 在 x 秒后消失。当它为假时，div 保持隐藏状态。

我的代码显示了 div，但它在 x 秒后并没有消失。

```
 if($showNotification == TRUE){
        echo "<div class='notification'>notification!!</div>";
        echo '<script type="text/javascript">
                 $(document).load(
                    function() {
                       $("div.notification").fadeIn();
                       setTimeout(function() {
                          $("div.notification").fadeOut("slow");
                       }, 3000); 
                  });  
              </script>';

     } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:15:48.873

用这个替换你的JS：

```
$(function() {
    $('div.notification').hide().fadeIn().delay(3000).fadeOut('slow');
}); 
```

演示：http: [//jsfiddle.net/nEsg9/](http://jsfiddle.net/nEsg9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:14:03.147

而不是使用：

```
$(document).load( ... 
```

采用

```
$(document).ready( ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:14:30.577

```
if($showNotification == TRUE){
    echo "<div class='notification' style='display:none'>notification!!</div>";
    echo '<script type="text/javascript">
             $(document).load(
                function() {
                   $("div.notification").fadeIn();
                   setTimeout(function() {
                      $("div.notification").fadeOut("slow");
                   }, 3000); 
              });  
          </script>';

 } 
```

它显示是因为在您进行淡入淡出之前它没有被隐藏。所以淡入淡出没有效果（它已经存在）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:17:40.473

使用准备好而不是加载。

这是一个工作示例，但没有淡入，因为它总是显示

[http://jsfiddle.net/2JKxr/1/](http://jsfiddle.net/2JKxr/1/)

```
$(document).ready(
            function() {
               $("div.notification").fadeIn();
               setTimeout(function() {
                  $("div.notification").fadeOut("slow");
               }, 3000); 
          }); 
```

# ios - 如何将容器视图连接到 childviewcontroller.view

> ID：14712962
> 
> 赞同：1
> 
> 时间：2013-02-05T17:07:57.540
> 
> 标签：ios, objective-c, uiviewcontroller, containers

在 IOS 5.1 上，我在故事板上的视图控制器中添加了一个容器视图。我想通过 连接该容器视图`IBOutlet`，以便在 IB 上轻松管理它。

我尝试使用常规`UIView`：

```
@property (nonatomic,weak) IBOutlet UIView *leftView; //connected this to container view on interface builder 
```

那么，如果我使用它，它就不起作用

```
[self.leftView addSubview:tableVC.view]; 
```

如果我以编程方式添加一个 childview 控制器，它可以工作，但它当然会覆盖全屏。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                  bundle:nil];
    UITableViewController *tableVC = [sb instantiateViewControllerWithIdentifier:@"LogMasterViewController"];
    [self.view addSubview:tableVC.view];

    [self addChildViewController:tableVC];
    [tableVC didMoveToParentViewController:self];
} 
```

如何将容器视图连接到子视图控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:23:45.467

我刚刚测试了以下，它工作正常：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                  bundle:nil];
    UITableViewController *tableVC = [sb instantiateViewControllerWithIdentifier:@"LogMasterViewController"];
    [self.leftView addSubview:tableVC.view];
    tableVC.view.frame = self.leftView.bounds;

    [self addChildViewController:tableVC];
    [tableVC didMoveToParentViewController:self];
} 
```

几个想法：

1.  如果您`LogMasterViewController`不是 a `UITableViewController`，而是带有 a 的视图控制器`UITableView`，您可能需要确保该 tableview 上没有自动布局或自动调整大小的约束，从而使其将 tableview 的大小调整为您无法再看到的东西。

2.  您可能想要运行该应用程序，在应用程序完成显示屏幕后暂停它（我在其中放置了一个断点`viewDidAppear`......该点之后的任何内容也应该可以工作，但不要执行`viewDidLoad`or `viewWillAppear`），`LogMasterViewController`然后`self.leftView`输入在调试器控制台中执行以下命令：

    ```
    po [[UIWindow keyWindow] recursiveDescription] 
    ```

    您可能希望提供唯一标签编号`leftView`的主要视图，`LogMasterViewController`以便您可以更轻松地破译输出。无论如何，使用它`recursiveDescription`来确定表格视图是否已呈现，但只是以一种您看不到表格的方式，或者根本没有添加它。您还可以确认您的`leftView`（带有唯一`tag`编号，如果您给它的话）也在那里。

    ```
    (lldb) po [[UIWindow keyWindow] recursiveDescription]
    $0 = 0x071a7a60 <UIWindow: 0x758e7a0; frame = (0 0; 320 480); autoresize = W+H; layer = <UIWindowLayer: 0x75ab340>>
       | <UIView: 0x71a8480; frame = (0 20; 320 460); autoresize = RM+BM; tag = 1; layer = <CALayer: 0x71a84e0>>
       |    | <UIView: 0x71a8ce0; frame = (0 0; 160 460); autoresize = TM+BM; tag = 2; layer = <CALayer: 0x71a8510>>
       |    |    | <UITableView: 0x7a9d400; frame = (0 0; 160 460); clipsToBounds = YES; opaque = NO; autoresize = W+H; tag = 3; gestureRecognizers = <NSArray: 0x71aba30>; layer = <CALayer: 0x71ab100>; contentOffset: {0, 0}>
       |    |    |    | <UITableViewCell: 0x71bbd50; frame = (0 396; 160 44); text = 'Row 10'; autoresize = W; layer = <CALayer: 0x71bbe80>>
       |    |    |    |    | <UITableViewCellContentView: 0x71bbeb0; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71bc100>; layer = <CALayer: 0x71bbf10>>
       |    |    |    |    |    | <UILabel: 0x71bc1e0; frame = (10 0; 140 43); text = 'Row 10'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71bbd20>>
       |    |    |    |    | <UIView: 0x71bc5c0; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71bb560>>
       |    |    |    | <UITableViewCell: 0x71bb5c0; frame = (0 352; 160 44); text = 'Row 9'; autoresize = W; layer = <CALayer: 0x71bb6f0>>
       |    |    |    |    | <UITableViewCellContentView: 0x71bb720; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71bb970>; layer = <CALayer: 0x71bb780>>
       |    |    |    |    |    | <UILabel: 0x71bba50; frame = (10 0; 140 43); text = 'Row 9'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71bb590>>
       |    |    |    |    | <UIView: 0x71bc560; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71bae50>>
       |    |    |    | <UITableViewCell: 0x71baeb0; frame = (0 308; 160 44); text = 'Row 8'; autoresize = W; layer = <CALayer: 0x71bafe0>>
       |    |    |    |    | <UITableViewCellContentView: 0x71bb010; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71bb260>; layer = <CALayer: 0x71bb070>>
       |    |    |    |    |    | <UILabel: 0x71bb340; frame = (10 0; 140 43); text = 'Row 8'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71bae80>>
       |    |    |    |    | <UIView: 0x71bc500; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71ba740>>
       |    |    |    | <UITableViewCell: 0x71ba7a0; frame = (0 264; 160 44); text = 'Row 7'; autoresize = W; layer = <CALayer: 0x71ba8d0>>
       |    |    |    |    | <UITableViewCellContentView: 0x71ba900; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71bab50>; layer = <CALayer: 0x71ba960>>
       |    |    |    |    |    | <UILabel: 0x71bac30; frame = (10 0; 140 43); text = 'Row 7'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71ba770>>
       |    |    |    |    | <UIView: 0x71bc4a0; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71ba030>>
       |    |    |    | <UITableViewCell: 0x71ba090; frame = (0 220; 160 44); text = 'Row 6'; autoresize = W; layer = <CALayer: 0x71ba1c0>>
       |    |    |    |    | <UITableViewCellContentView: 0x71ba1f0; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71ba440>; layer = <CALayer: 0x71ba250>>
       |    |    |    |    |    | <UILabel: 0x71ba520; frame = (10 0; 140 43); text = 'Row 6'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71ba060>>
       |    |    |    |    | <UIView: 0x71b8a70; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71b9910>>
       |    |    |    | <UITableViewCell: 0x71b9970; frame = (0 176; 160 44); text = 'Row 5'; autoresize = W; layer = <CALayer: 0x71b9aa0>>
       |    |    |    |    | <UITableViewCellContentView: 0x71b9ad0; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71b9d20>; layer = <CALayer: 0x71b9b30>>
       |    |    |    |    |    | <UILabel: 0x71b9e00; frame = (10 0; 140 43); text = 'Row 5'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71b9940>>
       |    |    |    |    | <UIView: 0x71b8010; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71b9200>>
       |    |    |    | <UITableViewCell: 0x71b9260; frame = (0 132; 160 44); text = 'Row 4'; autoresize = W; layer = <CALayer: 0x71b9390>>
       |    |    |    |    | <UITableViewCellContentView: 0x71b93c0; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71b9610>; layer = <CALayer: 0x71b9420>>
       |    |    |    |    |    | <UILabel: 0x71b96f0; frame = (10 0; 140 43); text = 'Row 4'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71b9230>>
       |    |    |    |    | <UIView: 0x71bb4f0; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71b8af0>>
       |    |    |    | <UITableViewCell: 0x71b8b50; frame = (0 88; 160 44); text = 'Row 3'; autoresize = W; layer = <CALayer: 0x71b8c80>>
       |    |    |    |    | <UITableViewCellContentView: 0x71b8cb0; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71b8f00>; layer = <CALayer: 0x71b8d10>>
       |    |    |    |    |    | <UILabel: 0x71b8fe0; frame = (10 0; 140 43); text = 'Row 3'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71b8b20>>
       |    |    |    |    | <UIView: 0x71bade0; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71b8090>>
       |    |    |    | <UITableViewCell: 0x71b80f0; frame = (0 44; 160 44); text = 'Row 2'; autoresize = W; layer = <CALayer: 0x71b8220>>
       |    |    |    |    | <UITableViewCellContentView: 0x71b8250; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71b85a0>; layer = <CALayer: 0x71b82b0>>
       |    |    |    |    |    | <UILabel: 0x71b8790; frame = (10 0; 140 43); text = 'Row 2'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71b8630>>
       |    |    |    |    | <UIView: 0x71ba6d0; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71b9fe0>>
       |    |    |    | <UITableViewCell: 0x71b4d30; frame = (0 0; 160 44); text = 'Row 1'; autoresize = W; layer = <CALayer: 0x71b4e80>>
       |    |    |    |    | <UITableViewCellContentView: 0x71b4fb0; frame = (0 0; 160 43); gestureRecognizers = <NSArray: 0x71b5b80>; layer = <CALayer: 0x71b5040>>
       |    |    |    |    |    | <UILabel: 0x71b65d0; frame = (10 0; 140 43); text = 'Row 1'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x71b66e0>>
       |    |    |    |    | <UIView: 0x71b98a0; frame = (0 43; 160 1); autoresize = W+TM; layer = <CALayer: 0x71bbca0>>
       |    |    |    | <UIImageView: 0x71ac5d0; frame = (0 453; 320 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x71ac700>>
       |    |    |    | <_UITableViewSeparatorView: 0x71b3a90; frame = (0 483; 160 1); opaque = NO; autoresize = W; layer = <CALayer: 0x71b3b10>>
       |    |    |    | <_UITableViewSeparatorView: 0x71b3dd0; frame = (0 527; 160 1); opaque = NO; autoresize = W; layer = <CALayer: 0x71b3e30>>
       |    |    |    | <_UITableViewSeparatorView: 0x71b3e60; frame = (0 571; 160 1); opaque = NO; autoresize = W; layer = <CALayer: 0x71b3ec0>>
       |    |    |    | <_UITableViewSeparatorView: 0x71b3ef0; frame = (0 615; 160 1); opaque = NO; autoresize = W; layer = <CALayer: 0x71b3f50>>
       |    |    |    | <_UITableViewSeparatorView: 0x71b3f80; frame = (0 659; 160 1); opaque = NO; autoresize = W; layer = <CALayer: 0x71b3fe0>>
       |    |    |    | <_UITableViewSeparatorView: 0x71b4030; frame = (0 703; 160 1); opaque = NO; autoresize = W; layer = <CALayer: 0x71b4090>>
       |    |    |    | <UIImageView: 0x71ac810; frame = (153 541; 7 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x71ac8b0>> 
    ```

    在这个例子中，我的根控制器的主视图 a`tag`为“1”，`leftView`a`tag`为“2”，主视图的主视图`LogMasterViewController`为`tag`“3”。在这种情况下，这些显示为我输出的第二、第三和第四行（我还看到了`UITableViewCells`下面的列表）。

# c# - 检查 2 文件校验和，用于检测它们之间的任何差异

> ID：14712963
> 
> 赞同：0
> 
> 时间：2013-02-05T17:07:59.373
> 
> 标签：c#, windows, backup

我们在本地网络的系统中有许多文件（word、excel）。我们每天都从这些文件中获取备份。现在我想知道：文件是否与备份不同？例如，假设我们有一个文件“test.docx”，它的备份名称是“test_backup.docx”，我想知道用户是否对“test.docx”进行了任何更改？我想比较这两个文件。

一种方法是逐字比较这些文件，当检测到差异时，我们可以得出文件已更新的结论。

现在我的问题是，是否有任何其他方式（例如校验和）来检测这种差异？并且通过这种方法我可以找到更新发生在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T14:23:26.500

以下是我们计算文件签名的方法：

```
public static string Signature(this FileInfo input)
{
    MD5CryptoServiceProvider cryptoTransform = new MD5CryptoServiceProvider();
    FileStream fs = new FileStream(input.FullName, FileMode.Open, FileAccess.Read);
    BinaryReader reader = new BinaryReader(fs);
    byte[] data = reader.ReadBytes((int)fs.Length);
    string hash = BitConverter.ToString(cryptoTransform.ComputeHash(data)).Replace("-", "");
    reader.Close();
    fs.Close();
    return hash;
} 
```

然后，我们根据先前版本的签名计算该签名以检测更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:24:08.123

你见过[同步玩具](http://www.microsoft.com/en-us/download/details.aspx?id=15155)吗？

听起来您想自动化备份复制过程，而您并不真正关心特定差异，只是试图确定是否有任何差异。我的回答是基于这个假设。

散列是确定文件是否*真的*应该备份的好方法，但它需要读取整个文件并对其执行昂贵的任务。

您可以通过查看文件的大小和时间戳来预处理备份文件列表 - 已修改、已访问：如果它们不匹配 - 无需校验和即可备份。如果它们匹配，那么您可以假设它们相同或对内容进行哈希处理，如果所有时间戳和大小都与备份副本匹配并且如果这种启发式方法被证明是错误的，我会首先尝试假设它们相同 - 诉诸哈希，但是找到[可能的最快算法](http://code.google.com/p/xxhash/)- 您的哈希应用似乎不需要高安全性而是高性能，SHA 和 MD5 都将是一个过大的性能可怕的性能

# web-services - Unix 时间戳网络服务

> ID：14712965
> 
> 赞同：0
> 
> 时间：2013-02-05T17:08:01.930
> 
> 标签：web-services, unix-timestamp

Internet 上是否有可靠的 Web 服务返回当前的 Unix (UTC) 时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:55:34.123

一个可行的解决方法是使用我们通过 HTTP 响应获得的响应标头。在像我这样的极少数情况下，当您没有直接访问 Web 服务器并且无法自己创建 API 时，您可以发送 XHR 并使用以下命令获取响应标头

`response.getAllResponseHeaders()`

然后解析`date`返回字符串中的值。当然，您必须信任服务器日期。我知道这是一个罕见的（也许是愚蠢的）用例，但它可能会发生。

# ruby-on-rails - 会话过期在 Rails 中不起作用

> ID：14712968
> 
> 赞同：1
> 
> 时间：2013-02-05T17:08:07.847
> 
> 标签：ruby-on-rails, session

我试图在固定的登录时间段后使试用用户的会话过期。到目前为止，我看过的所有示例都使用 session[:expires_at] 键，如下所示：

```
    session[:expires_at] = Time.now + 100
```

但是当我在我的应用程序上尝试它时，这似乎无济于事。我检查了 cookie，过期标头仍设置为“会话”。刷新页面也证实了这种怀疑。

我意识到还有其他方法可以配置站点范围的会话持续时间，但我不想进行站点范围的更改。我只想用这个会话持续时间配置一个特定的场景。

我的猜测是 Rails 堆栈中的 after_filter 正在重置 expires_header 但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:29:30.583

我以前没有见过这个，我找不到任何文档。我想你必须在应用程序控制器中实现一些东西来检查`session[:expire_at]`你设置的是否已经通过。

# asp.net-mvc-4 - MVC4 剑道项目 Ajax.BeginForm UpdateTargetId 问题

> ID：14712972
> 
> 赞同：4
> 
> 时间：2013-02-05T17:08:11.657
> 
> 标签：asp.net-mvc-4, kendo-ui

我刚刚使用现有 MVC3 项目中的一些代码在 MVC4 中启动了一个新项目。我可以强制我的表单 ajax 重新加载特定的 DIV，但不使用正常的提交方法，只能使用测试 doSomthing() javascript 函数。我错过了什么？

澄清一下：第一个按钮不能正常工作，第二个可以 - 但我不想那样做。

看法

```
@using (Ajax.BeginForm("Method1", null,
new AjaxOptions { HttpMethod = "post", UpdateTargetId = "divPartial1" },
new { id = "form1" }))
{
    <div class="data">
        @Html.LabelFor(x => x.TotalSubmitted, new { @class = "total" })<div class="number total">@Html.FormatValue(Model.TotalSubmitted, "{0:n0}")</div>
        ...
    </div>
    <div class="details">
        <div id="divPartial1">
            @Html.Partial("ReportDashboardAppPartial")
        </div>
    </div>
    <div style="text-align: center;">
        <button type="submit" class="k-button"><span class="k-icon k-i-search" /></button>
        <button type="button" name="Save" value="Save" onclick="doSomething(); return false;"><span class="k-icon k-i-search" /></button>
    </div>
}
<script type="text/javascript">
    function doSomething() {
        $.ajax({
            url: '@Url.Action("Method1", "Controller")',
        type: 'post',
        data: $('form#form1').serialize(),
        success: function (result) {
            $('#divPartial1').html(result);
        }
    });
}
</script> 
```

_布局

```
@model BaseViewModel
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    <link href="@Url.Content("~/Content/kendo.compatibility.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.3.1114/kendo.dataviz.min.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/kendo/2012.3.1114/kendo.default.min.css")" rel="stylesheet" type="text/css" />
    @RenderSection("styles", false)
    <script src="@Url.Content("~/Scripts/kendo/2012.3.1114/jquery.min.js")"></script>
    <script src="@Url.Content("~/Scripts/kendo/2012.3.1114/kendo.all.min.js")"></script>
    <script src="@Url.Content("~/Scripts/kendo/2012.3.1114/kendo.aspnetmvc.min.js")"></script>
    @RenderSection("scripts", false)
</head>
<body>
    @Html.Partial("_AlertWindow")
    <div id="wrapper">
        <header>
            <div id="logindisplay">
                @Html.Partial("_LoginPartial")
            </div>
            <a href="@Url.Action("Index", "Home")">
                <div id="logo"></div>
            </a>
            <div id="title">
                <h1>Ha!</h1>
            </div>
            @(Html.Kendo().Menu().Name("Menu").BindTo("Main").SecurityTrimming(true))
        </header>
        <div id="main">
            @RenderBody()
        </div>
        <footer>
            <div id="version">@Html.ActionLink("Version " + @Model.CurrentVersion, "About", "Home")</div>
        </footer>
    </div>
    @RenderSection("end_scripts", false)
</body>
</html> 
```

我知道这应该有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T17:11:57.843

我有同样的问题。解决方法是在_Layout.cshtml页面中添加一条语句。

@Scripts.Render("~/bundles/jqueryval")

**ScriptBundle("~/bundles/jqueryval") 的定义如下**

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*")); 
```

# google-app-engine - GAE：从 Google Apps 域中的任意电子邮件地址发送电子邮件

> ID：14712977
> 
> 赞同：3
> 
> 时间：2013-02-05T17:08:16.190
> 
> 标签：google-app-engine

参考以下关于在 Google App Engine 中发送电子邮件的文档： [https ://developers.google.com/appengine/docs/python/mail/sendingmail](https://developers.google.com/appengine/docs/python/mail/sendingmail)

它表示电子邮件发件人（即发件人地址）可能是： 域帐户的任何有效电子邮件接收地址，例如 support@example.com。域帐户是 Google 域之外的帐户，其电子邮件地址不以 @gmail.com 或 @APP-ID.appspotmail.com 结尾。

这似乎意味着只要我的域 mycompany.com 是 Google Apps 域并且我已将其作为服务添加到我的 Google Apps CPanel 中，我就可以从任意地址发送电子邮件，而不是现有用户，例如：whatever@mycompany.com。请注意，我*没有*将应用的身份验证类型设置为“Google Apps Domain”，而是设置为“Google Accounts API”。

但是，这不是这样工作的。只有当它是现有的 Google Apps 用户并以管理员身份在应用程序中注册时，我才能发送电子邮件。

请说清楚。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:13:43.597

You should continue reading right after the sentence you quoted:

`Any valid email receiving address of a domain account, such as support@example.com. Domain accounts are accounts outside of the Google domain with email addresses that do not end in @gmail.com or @APP-ID.appspotmail.com. To send an email from an existing domain account, add the domain account as a Developer to your application using the Administration Console. The account is then sent an email with an invite to develop the application, which you must accept to add the account to the application.`

So you still need to add the domain user under GAE Admin -> Permissions.

# java - 使用 FFT 从调制信号中提取特定频率

> ID：14712978
> 
> 赞同：0
> 
> 时间：2013-02-05T17:08:17.093
> 
> 标签：java, fft, dft

我已经使用 FSK 用我的数据调制了载波频率信号，如下所示：

```
double SAMPLING_TIME = 1.0 / 441000 // 44khz
int SAMPLES_PER_BIT = 136;
int ENCODING_SAMPLES_PER_BIT = SAMPLES_PER_BIT / 2;
int duration = ENCODING_SAMPLES_PER_BIT * SAMPLING_TIME;

public double[] encode(int[] bits) {
    for (int i = 0; i < bits.length; i++) {
        int freq = FREQUENCY_LOW;
        if (bits[i] > 1)
          freq = FREQUENCY_HIGH;
        bitArray = generateTone(freq, duration);
        message = bitArray;
        }
     return message;
}
private double[] generateTone(int frequency, double duration) {
        int samplingRate = 1/SAMPLING_TIME; // Hz
        int numberOfSamples = (int) (duration * samplingRate);
        samplingTime = 2 * SAMPLING_TIME;

        double[] tone = new double[numberOfSamples];

        for (int i = 0; i < numberOfSamples; i++) {
            double y = Math.sin(2 * Math.PI * frequency * i * SAMPLING_TIME);
            tone[i] = y * CARRIER_AMPLITUDE;
        }
        return tone;
    } 
```

显然，我为 ZERO 发送 FREQUENCY_LOW，为 1 发送 FREQUENCY_HIGH。

**现在我如何使用 FFT 解调它？**我对整个时间的 FREQUENCY_LOW、FREQUENCY_HIGH 的采样幅度（存在和不存在）感兴趣。

我只知道 FFT 的基础知识，我开始写这个但它没有意义：

```
private void decode(byte[] tone, int length) {
    float[] input = new float[FFT_SIZE*2]; // not sure what size? shouldn't this be buffer?
    for(int i=0;i<length;i++){
        input[i]=tone[i];
    }
    FloatFFT_1D fft = new FloatFFT_1D(FFT_SIZE);
    fft.realForward(input);
} 
```

有人可以帮忙写代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:22:27.010

您可以为 FFT 使用重叠的滑动窗口，窗口和 FFT 的长度与数据位的长度相同。然后在这些窗口的适当 FFT 结果箱中查找 1 和 0 的幅度峰值。您还需要一些同步逻辑来运行 1 和 0。

另一种计算密集度较低的 DSP 技术是对您的两个频率进行正交解调，然后对结果进行低通滤波，然后再将其馈送到同步逻辑和比特检测器。另一种可能性是两个滑动 Goertzel 滤波器。

# c# - 读取所有行和单元格值动态表asp.net

> ID：14712980
> 
> 赞同：3
> 
> 时间：2013-02-05T17:08:24.137
> 
> 标签：c#, asp.net, dynamic, rows

我找到了创建动态表并添加行的教程：

[http://geekswithblogs.net/dotNETvinz/archive/2009/06/29/faq-dynamically-adding-rows-in-asp-table-on-button-click.aspx](http://geekswithblogs.net/dotNETvinz/archive/2009/06/29/faq-dynamically-adding-rows-in-asp-table-on-button-click.aspx)

如何读取表格中的所有行，然后读取单元格中文本框的值？这些值被输入到数据库（SQL Server）的表中。我可以继续使用 C# 和 asp.net 还是必须使用 Javascript？

我希望有人能给我帮助。

这是代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Dynamic Adding of Rows in ASP Table Demo</title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Add New Row" />
    </form>
    </body>
</html> 
```

代码背后：

```
public partial class _Default1 : System.Web.UI.Page
{
    //A global variable that will hold the current number of Rows
    //We set the values to 1 so that it will generate a default Row when the page loads
    private int numOfRows = 1;

    protected void Page_Load(object sender, EventArgs e)
    {
        //Generate the Rows on Initial Load
        if (!Page.IsPostBack)
        {
            GenerateTable(numOfRows);
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        if (ViewState["RowsCount"] != null)
        {
            numOfRows = Convert.ToInt32(ViewState["RowsCount"].ToString());
            GenerateTable(numOfRows);
        }
    }

    private void SetPreviousData(int rowsCount, int colsCount)
    {
        Table table = (Table)Page.FindControl("Table1");
        if (table != null)
        {
            for (int i = 0; i < rowsCount; i++)
            {
                for (int j = 0; j < colsCount; j++)
                {
                    //Extracting the Dynamic Controls from the Table
                    TextBox tb = (TextBox)table.Rows[i].Cells[j].FindControl("TextBoxRow_" + i + "Col_" + j);
                    //Use Request objects for getting the previous data of the dynamic textbox
                    tb.Text = Request.Form["TextBoxRow_" + i + "Col_" + j];
                }
            }
        }
    }

    private void GenerateTable(int rowsCount)
    {

        //Creat the Table and Add it to the Page
        Table table = new Table();
        table.ID = "Table1";
        Page.Form.Controls.Add(table);

        //The number of Columns to be generated
        const int colsCount = 3;//You can changed the value of 3 based on you requirements

        // Now iterate through the table and add your controls

        for (int i = 0; i < rowsCount; i++)
        {
            TableRow row = new TableRow();
            for (int j = 0; j < colsCount; j++)
            {
                TableCell cell = new TableCell();
                TextBox tb = new TextBox();

                // Set a unique ID for each TextBox added
                tb.ID = "TextBoxRow_" + i + "Col_" + j;
                // Add the control to the TableCell
                cell.Controls.Add(tb);
                // Add the TableCell to the TableRow
                row.Cells.Add(cell);
            }

            // And finally, add the TableRow to the Table
            table.Rows.Add(row);
        }

        //Set Previous Data on PostBacks
        SetPreviousData(rowsCount, colsCount);

        //Sore the current Rows Count in ViewState
        rowsCount++;
        ViewState["RowsCount"] = rowsCount;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:32:19.183

由于您是动态创建表格，因此您不能像静态嵌入在页面上的控件那样引用它。要获得对 Table 对象的引用，您需要在 Page 的 ControlCollection 中找到它并将其丢弃，就像在示例中一样：

```
Table table = (Table)Page.FindControl("Table1"); 
```

Table 类包含一个[表格行集合](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.rowcontrolcollection.aspx)，然后您需要对其进行循环。行集合中的每一行都有一个[单元格集合](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.tablerow.cells.aspx)，每个单元格都包含[子控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.tablecell.aspx)（请参阅：控件属性），它们将是您的文本框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:13:19.143

嗨，如果你看一下`SetPreviousData`这个函数正在尝试读取以前的文本框值，但是它有一些问题我已经完成了以下更改，它首先工作正常，下面的代码`SetPreviousData`

```
 Table table = (Table)Page.FindControl("Table1"); 
```

始终返回 NULL，因为此函数不是递归函数，并且您的表可能位于页面中的容器内，因此请在代码中添加以下函数

```
private Control FindControlRecursive(Control root, string id)
{
    if (root.ID == id)
    {
        return root;
    }

    foreach (Control c in root.Controls)
    {
        Control t = FindControlRecursive(c, id);
        if (t != null)
        {
            return t;
        }
    }

    return null;
} 
```

并更改代码

```
Table table = (Table)Page.FindControl("Table1"); 
```

至

```
Table table = FindControlRecursive(Page , "Table1") as Table; 
```

在下一步中更改以下代码`SetPreviousData`

```
tb.Text = Request.Form["TextBoxRow_" + i + "Col_" + j]; 
```

至

```
tb.Text = Request.Form[tb.UniqueID]; 
```

设置断点并查看结果，如果您觉得很难，请告诉我为您提供一个函数，该函数在`datatable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T09:42:02.820

动态表的参考效果不好，怪微软，

我用这个：

保存在会话 List[YourObjectData] 中，每次进入 Page_Load 时，将其填入表格

这是 2 号的解决方案：

Default.aspx 中的某处

```
<div class="specialTable">
    <asp:Table ID="Table1" runat="server"  />
</div> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    FillDynamicTable();

    if (!IsPostBack)
    {

    }
}

private void FillDynamicTable()
{
    Table1.Rows.Clear(); //  Count=0 but anyways

    if (Session["Table1"] == null) return;

    foreach (var data in Session["Table1"] as List<MyObject>)
    {
        AddRow(data);
    }
}

private void AddRow(MyObject data)
{
    var row = new TableRow { Height = 50 };
    var cell = new TableCell();
    var label = new Label { Text = data.something, Width = 150 };
    cell.Controls.Add(label);
    row.Cells.Add(cell);
    Table1.Rows.Add(row);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T04:42:41.347

我认为您必须在事件中再次绑定您的表格。`Page_load`例如，如果您在`View_Click`按钮事件中绑定表格，则必须在事件中调用此方法`Page_load`为`View_Click(null,null)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:44:34.773

```
<script type="text/javascript">
       var StringToSend='';
       function fncTextChanged(newvalueadded) {
           if (StringToSend != '')
               StringToSend = StringToSend + ';' + newvalueadded;
           else
               StringToSend = newvalueadded;
           //alert(StringToSend); -- For Testing all values
           // now store the value of StringToSend into hidden field ---- HFTEXTVALUES to access it from server side.
         }

    </script>
     <asp:Button ID="Save" runat="server" onclick="SaveTextBoxValues_Click" Text="save" /> 
     <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Add New Row" /> 
    <asp:HiddenField ID="hfTextValues" runat="server" Visible="false" Value="" /> 
```

服务器端 ：

```
protected void Page_Load(object sender, EventArgs e)
{
    //Generate the Rows on Initial Load
    if (!Page.IsPostBack)
    {
        GenerateTable(numOfRows);
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    if (ViewState["RowsCount"] != null)
    {
        numOfRows = Convert.ToInt32(ViewState["RowsCount"].ToString());
        GenerateTable(numOfRows);
    }
}
protected void SaveTextBoxValues_Click(object sender, EventArgs e)
{
    string AllTextBoxValues = hfTextValues.Value;
    string[] EachTextBoxValue = AllTextBoxValues.Split('~');
    //here you would get all values, EachTextBoxValue[0] gives value of first textbox and so on.
}

private void GenerateTable(int rowsCount)
{

    //Creat the Table and Add it to the Page
    Table table = new Table();
    table.ID = "Table1";
    Page.Form.Controls.Add(table);

    //The number of Columns to be generated
    const int colsCount = 3;//You can changed the value of 3 based on you requirements

    // Now iterate through the table and add your controls

    for (int i = 0; i < rowsCount; i++)
    {
        TableRow row = new TableRow();
        for (int j = 0; j < colsCount; j++)
        {
            TableCell cell = new TableCell();
            TextBox tb = new TextBox();
            HiddenField hf = new HiddenField();
            // Set a unique ID for each TextBox added
            tb.ID = "tb" + i + j;
            hf.ID = "hf" + i + j;
            tb.Attributes.Add("onblur", "fncTextChanged(this.value);");
            // Add the control to the TableCell
            cell.Controls.Add(tb);
            // Add the TableCell to the TableRow
            row.Cells.Add(cell);
        }

        // And finally, add the TableRow to the Table
        table.Rows.Add(row);
    }
} 
```

如果您有任何问题，请告诉我。

还有一件事，如果您希望存储这些值并稍后检索它们，代码将相应地进行修改。

# ruby-on-rails - Mongoid：将“asdf”设置为日期字段的值，它会自动替换为“1970-01-01 00:00:00 UTC”

> ID：14712983
> 
> 赞同：1
> 
> 时间：2013-02-05T17:08:34.493
> 
> 标签：ruby-on-rails, validation, date, mongoid

我注意到，当我设置为 Mongoid 日期字段时，它会在任何验证发生**之前**`"asdf"`自动替换为！所以无法检查输入的格式是否正确，因为当输入的格式不正确时，Mongoid 会自动将其替换为.`1970-01-01 00:00:00 UTC` **`1970-01-01 00:00:00 UTC`**

 **这是一个已知问题吗？我现在很着急，如果您需要更多代码示例，我明天会提供。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T21:08:28.690

此处描述了该问题：[https ://github.com/mongoid/mongoid/issues/2950](https://github.com/mongoid/mongoid/issues/2950)

这里有一个解决方案：[https ://github.com/mongoid/mongoid/pull/2465](https://github.com/mongoid/mongoid/pull/2465)

例如，如果您的日期字段的名称是“startdate”，您可以添加以下方法进行验证：

```
validate :startdate_valid_format

def startdate_valid_format
  begin
    Date.parse(startdate_before_type_cast)
  rescue
    errors.add(:startdate, "is formatted incorrectly")
  end
end 
```**

# javascript - Javascript在鼠标事件时获取跨度内容

> ID：14712989
> 
> 赞同：1
> 
> 时间：2013-02-05T17:08:55.003
> 
> 标签：javascript, jquery, innerhtml, html

我有以下标记，我正在应用成功的 Javascript 以生成工具提示，问题是我试图将工具提示的内容设置为跨度的内容。

如果没有 500 种不同的等，我无法想出一种方法`document.get`......

**基本上我想知道：**在`showTooltip`函数中，如何动态获取span的内容？

**标记：**

```
<ul class="exec-List">
                    <li>
                        <img src="file:///C|/Users/tsujp/Documents/Everything/Adobe Projects/DW/KCC/Website/V8/src/committee/mirae.png" /> 

                        <span class="tooltip-span">Conten2t</span>

                    </li>
                    <li>
                        <img src="file:///C|/Users/tsujp/Documents/Everything/Adobe Projects/DW/KCC/Website/V8/src/committee/mirae.png" /> 

                        <span class="tooltip-span">Content55</span>

                    </li>
                </ul> 
```

**Javascript：**

```
$(document).ready(function() {

var changeTooltipPosition = function(event)
{
  var tooltipX = event.pageX - 8;
  var tooltipY = event.pageY + 8;
  $('div.tooltip').css({top: tooltipY, left: tooltipX});
};

function showTooltip(event/*, index, el*/)
{
    /*alert( $(this).parent(this).get(0).tagName );*/

    $('div.tooltip').remove();
    $('<div class="tooltip">/* + tooltip_text +*/ </div>')
        .appendTo('body');
    changeTooltipPosition(event);
};

var hideTooltip = function()
{
   $('div.tooltip').remove();
};

$('span').each(function()
{
    if( $(this).hasClass( 'tooltip-span' ) )
    {                       
        //tooltip_text = $(el).html();

        $(this).parent(this).bind(
        {           
            mousemove : changeTooltipPosition,
            mouseenter : showTooltip/*( HOW DO I PASS 'EVENT' HERE)*/,
            mouseleave: hideTooltip
        });
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:27:10.123

您可以选择`$('.tooltip-span', this)`并采取`text()`

```
function showTooltip(event/*, index, el*/)
{
    var text = $('.tooltip-span', this).text();
    /*alert( $(this).parent(this).get(0).tagName );*/

    $('div.tooltip').remove();
    $('<div class="tooltip">' + text + '</div>')
        .appendTo('body');
    changeTooltipPosition(event);
}; 
```

[JSFiddle](http://jsfiddle.net/uTJUb/)

# if-statement - 我需要 Powershell if/then 语法方面的帮助

> ID：14712990
> 
> 赞同：0
> 
> 时间：2013-02-05T17:08:59.823
> 
> 标签：if-statement, syntax, powershell-2.0

我们有一个包含 3500 个文档的库，我们正在为其构建元数据。大约 1/3 的文件`BC`在标题中，我想标记这些。现在，这就是我所拥有的，它工作正常：

```
$htmPath = "c:\ht"
$srcfiles = Get-ChildItem $htmPath -filter "*.htm*"
ForEach ($doc in $srcfiles)
{
    $s = $doc.Fullname
    if($s.contains("BC")) { $bcflag = 1 } else {$bcflag = 0}
    Write-Host "File: " $doc.Fullname "  BC Flag: " $bcflag
} 
```

我刚刚注意到`bc`标题中可能有一些文件，所以我需要在`OR`我的条件测试中添加一个。我一直没有成功使用`OR`...errors out with bad method calls 这个词，`|`作为 or 的符号...认为我正在尝试传递某些东西，并且由于某种原因，我不能包含正则表达式。`if`如果我添加一个带有条件的重复语句，我可以让它工作`bc`，但必须有一种方法来提供选项列表，而不是一系列语句，每个语句都在寻找一个值。

什么是正确的语法

a.) 提供测试条件列表和/或

b.) 在上述语句中使用正则表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:12:21.837

Powershell 中的 or 运算符是 -or 所以你可能想要

```
if($s.contains("BC") -or $s.contains("bc")) { $bcflag = 1 } else {$bcflag = 0} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:17:53.783

使用正则表达式：

```
if($s -match 'bc') 
```

要不就

```
if($doc.fullname -match 'bc') 
```

默认`regex`不区分大小写，将匹配“BC”或“bc”。

# mysql - 组合来自多个表的这些 mysql 查询

> ID：14712993
> 
> 赞同：0
> 
> 时间：2013-02-05T17:09:05.363
> 
> 标签：mysql

假设我有一个包含用户列表的表，我像这样检索用户表：

```
SELECT userid FROM users WHERE year = 2012 
```

这会生成一个用户列表，更具体地说，是用户 ID（数字）。

所以，假设我们的列表现在看起来像这样（随机用户 ID）：

```
1234
9532
0983
2098
1980 
```

在另一个表中，我们有用户最喜欢的颜色，每种颜色都有一个条目。所以用户 1234 可以在表中有多个条目（我们称之为 fav_colors）：

```
1234 red
1234 blue
9532 yellow
9532 red
0983 blue
0983 purple 
```

这是我试图掌握的概念的非常简化的示例。如何形成一个查询来向我显示 2012 年的用户（来自第一个查询），以及谁喜欢红色？我在组合来自 users 表和 fav_colors 表的查询时遇到问题

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:11:15.653

这应该会给你你正在寻找的结果

```
SELECT u.userid, c.color
FROM users AS u
JOIN fav_colors AS c
  ON u.userid = c.userid
WHERE u.year = 2012
  AND c.color_name = 'red' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:11:21.443

您需要使用 SQL 连接来链接两个表并使用 where 子句作为年份和红色。

有关SQL 连接的更多信息，请参阅：[http ://www.w3schools.com/sql/sql_join.asp。](http://www.w3schools.com/sql/sql_join.asp)

如果您需要更多解释，请告诉我。

# windows - 将字节转换为人类可读的内容

> ID：14712995
> 
> 赞同：1
> 
> 时间：2013-02-05T17:09:15.227
> 
> 标签：windows, sed, null, binary-data, type-conversion

我有一个由一堆“行”数据组成的文件（实际上不是在单独的行上）。据我从[描述[(PDF)]](http://www.nyxdata.com/doc/162153)中可以看出，每个“行”精确地有 40 个字节，如下所示：

*   我可以忽略 4 个字节。
*   2 个字节，它们是（十进制）整数 240 或 241（即 00 F0 或 00 F1）的字节表示形式，具体取决于“行”。
*   我可以忽略 4 个字节。
*   11 个字节：前几个字节是我需要的 ASCII 字符串，其余字节填充 00 个字节。
*   1个字节我可以忽略。
*   我需要 1 个字节。从文档看来，这似乎是 ASCII 'B'、'S' 或 '0'。
*   1 个字节，它是一个小整数的字节表示，即 00、01 等。
*   4 个字节，它们是整数的字节表示形式。
*   4 个字节，它们是整数的字节表示形式。
*   4 个字节，它们是整数的字节表示形式。
*   4 个字节，它们是整数的字节表示形式。

并且文件中没有其他内容（例如，没有文件头）。（我对链接到的文档的理解很可能是错误的，如果有任何更正，我将不胜感激；更多信息可能在[其他地方提供[（PDF）]](http://www.nyxdata.com/doc/5977)。）

我希望：

1.  **将数字的每个字节表示转换为数字的人类可读表示，并将每个 00 字节转换为（例如）人类可读的 0**，以及
2.  将文件转换为逗号分隔等。

现在，步骤 (2) 应该可以使用 sed；我提到它只是因为我想确保步骤 (1) 的完成是允许步骤 (2) 的方式（例如，在执行步骤 (1) 时跟踪每个字段的字节数）。但是步骤（1）我不知道该怎么做。任何人都可以帮忙吗？

作为一个警告，请注意我对 sed 和 bash 很满意，并且可以处理 perl，但没有真正的编程经验；而且，唉，我在没有安装程序权限的 Windows 机器上执行此操作，所以（尽管我有[一个 sed 端口](http://gnuwin32.sourceforge.net/packages/sed.htm)）我没有 bash。因此，基本上，**我需要在 sed 或 Windows (DOS) 命令行脚本中执行此操作**。（不过，如果有必要的话，我应该能够将文件下载到另一台机器上，使用它们并上传它们。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:00:05.053

Perl 有一个你可以使用的[解包函数。](http://perldoc.perl.org/functions/unpack.html)

# windows - 为 Windows 开发自定义打印机驱动程序

> ID：14712997
> 
> 赞同：5
> 
> 时间：2013-02-05T17:09:26.437
> 
> 标签：windows, printing, driver, print-spooler-api

对于我的软件的需要，我需要创建一个打印机驱动程序，它允许我将发送给它的所有图像保存到文件中，然后打开我的程序窗口，让用户对渲染的页面进行一些操作。
我找到[了这篇文章](http://www.codeproject.com/Articles/112670/Print-to-TIFF)，但是示例使用了`FILE:`端口，而我需要制作自己的端口，将图像转储到文件并运行可执行文件。但是，我认为我可以通过在驱动程序代码中执行此操作来完成我的任务，但我不确定这是一个好的决定，因为它是一个驱动程序，即使它是一个用户模式驱动程序。
我很高兴听到有关我的问题的任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:29:46.820

您需要端口监视器，而不是驱动程序。请参阅我对[这个问题的回答。](https://stackoverflow.com/questions/2190476/virtual-printer-driver-for-windows/6768717#6768717) 您可以使用 RedMon，但我建议改用 WDK 中的示例端口监视器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T23:20:47.953

如果您可以使用 XPS 作为格式，您可以使用 Github 项目：Microsoft/Windows-driver-samples/print/XPSDrvSmpl

[https://github.com/Microsoft/Windows-driver-samples/tree/master/print/XPSDrvSmpl](https://github.com/Microsoft/Windows-driver-samples/tree/master/print/XPSDrvSmpl)

安装程序：[http ://wixtoolset.org/](http://wixtoolset.org/)

应用：监听内部端口

流程：从单个安装程序安装打印机和应用程序。用户使用您的驱动程序打印一些东西，而应用程序侦听内部端口。当发送数据时，应用程序会接收它。这是针对 XPS 的，可以转换为 PDF，但是无论您打印什么，流程都是相似的。如果您需要其他任何东西，请查看 GitHub 上的 Microsoft/Windows-driver-samples/print/ 或其他特定于您需求的资源。

# php - 简单的 html dom 帮助从使用会话的外部网页中提取数据

> ID：14712998
> 
> 赞同：0
> 
> 时间：2013-02-05T17:09:32.413
> 
> 标签：php, session-cookies, simple-html-dom

我想简单地从使用会话的外部 url 中提取数据。我有一个登录网站。登录后有一个页面，其中包括表数据。我想从中提取这些数据。从这个页面提取数据不是问题。真正的问题是它包含在会话中。当我尝试使用 url 检索数据时，它会显示一个空白页。什么都没有显示。如果这个问题得到解决，将会有很大的帮助。请有人告诉我如何解决这个会话问题？下面是我的代码：

`$html = new simple_html_dom();<br> $html->load_file('http://example.com/portfolio/page=5');<br> foreach($html->find('body') as $e){ $array = $html->innertext;<br> echo $array;
}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:19:52.360

如果会话用作登录或重要信息存储变量，则不可能伪造它。

会话变量不容易被欺骗，不能通过这种方式发送。您必须发送`$_GET`变量，然后代码使用这些变量来创建/修改会话或在没有会话的情况下显示您需要的数据。只有在您有权`www.example.com`编辑代码时才真正可行，您可以在其中发送绕过会话检查的参数。

**不建议**这样做，因为其他人可能会发现此绕过，并且您将面临巨大的漏洞。

如果会话变量很容易被伪造并从另一个页面传递，我们将面临许多安全风险。

如果您属于同一域，则可以在调用页面的代码中启动会话并以这种方式访问​​......

**编辑：** 除非会话在 URL 中传递（通常是不好的做法），否则不可能在域之间传递会话变量。见[这里。](http://www.bluehostforum.com/showthread.php?17749-Share-Session-between-two-domains)

# ruby - 无法在 ruby 中修改 self 以获取整数

> ID：14712999
> 
> 赞同：4
> 
> 时间：2013-02-05T17:09:34.927
> 
> 标签：ruby

我正在寻找一种在 ruby​​ 中链接破坏性方法以将变量的值更改为一个的方法，但我收到错误消息`Can't change the value of self`。这在Ruby中是不可能的吗？

```
guesses_left = 3

class Integer
  def decrement_guess_count!
    self -= 1
  end
end

guesses_left.decrement_guess_count! 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T17:13:00.053

这是设计使然。它不是特定于整数，所有类的行为都是这样的。对于某些类（`String`例如 ），您可以更改实例的**状态**（这称为破坏性操作），但不能完全替换对象。对于整数，您甚至无法更改状态，它们没有任何状态。

如果我们愿意允许这样的事情发生，那会引发很多棘手的问题。比如说，如果我们`foo`用. 应该一直指向吗？为什么？为什么不应该？如果有完全不同的类型，用户应该如何反应呢？等等。`bar1``bar2``foo``bar1``bar2``bar1`

```
class Foo
  def try_mutate_into another
    self = another
  end
end

f1 = Foo.new
f2 = Foo.new

f1.try_mutate_into f2
# ~> -:3: Can't change the value of self
# ~>         self = another
# ~>               ^ 
```

我挑战你找到一种可以进行这种操作的语言。:)