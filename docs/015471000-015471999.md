# StackOverflow 问答 15471000-15471999

# java - 多个 Graphics2d 对象

> ID：15471000
> 
> 赞同：0
> 
> 时间：2013-03-18T06:38:41.193
> 
> 标签：java, awt, java-2d, affinetransform

我需要对不同的图形对象（例如线条）应用不同的仿射变换，是否适合使用多个 Graphics2D 对象来执行此任务？代码：

```
 Graphics2D g2seconds = (Graphics2D) g; // g - Graphics class
   Graphics2D g2minutes = (Graphics2D) g;

   AffineTransform atseconds =  
           AffineTransform.getRotateInstance(Math.PI/30*s, 0, 0);//s = Time in seconds
   AffineTransform atminutes =  
           AffineTransform.getRotateInstance(Math.PI/30*m, 0, 0);//m = Time in minutes

   g2seconds.setTransform(atseconds);
   g2seconds.drawLine(0, 0, 10, 10);

   g2minutes .setTransform(atminutes);
   g2minutes .drawLine(0, 0, 10, 10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:39:45.020

不，因为它们根本不是两个不同的对象，它们是对同一个对象的两个引用。

# python - 将命令提示符输出重定向到 python 生成的窗口

> ID：15471007
> 
> 赞同：1
> 
> 时间：2013-03-18T06:39:19.453
> 
> 标签：python, python-2.7, wxpython

开发了一个使用 msbuild 构建项目的脚本。我有使用 wxpython 开发的 GUI，它有一个按钮，当用户单击该按钮时，将使用 msbuild 构建一个项目。现在，我想在用户单击该按钮时打开一个状态窗口并显示命令提示符中显示的所有输出，并且不应显示命令提示符，即将命令提示符输出重定向到用户 GUI 状态窗口。我的构建脚本是，

```
def build(self,projpath)
    arg1 = '/t:Rebuild'
    arg2 = '/p:Configuration=Release'
    arg3 = '/p:Platform=x86'
    p = subprocess.call([self.msbuild,projpath,arg1,arg2,arg3])
    if p==1:
        return False
    return True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:44:18.897

实际上，我几年前在我的博客上写过这个，在那里我创建了一个脚本来将 ping 和 traceroute 重定向到我的 wxPython 应用程序：http: [//www.blog.pythonlibrary.org/2010/06/05/python-running-ping -traceroute-and-more/](http://www.blog.pythonlibrary.org/2010/06/05/python-running-ping-traceroute-and-more/)

基本上，您创建一个简单的类来将标准输出重定向到并传递给它一个 TextCtrl 的实例。它最终看起来像这样：

```
class RedirectText:
    def __init__(self,aWxTextCtrl):
        self.out=aWxTextCtrl

    def write(self,string):
        self.out.WriteText(string) 
```

然后当我写我的 ping 命令时，我这样做了：

```
def pingIP(self, ip):
    proc = subprocess.Popen("ping %s" % ip, shell=True, 
                            stdout=subprocess.PIPE) 
    print
    while True:
        line = proc.stdout.readline()                        
        wx.Yield()
        if line.strip() == "":
            pass
        else:
            print line.strip()
        if not line: break
    proc.wait() 
```

要查看的主要内容是子进程调用中的 stdout 参数，并且 wx.Yield() 也很重要。Yield 允许文本“打印”（即重定向）到标准输出。没有它，在命令完成之前文本不会显示。我希望这一切都说得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T04:52:12.317

我进行了如下更改，它确实对我有用。

```
def build(self,projpath):
    arg1 = '/t:Rebuild'
    arg2 = '/p:Configuration=Release'
    arg3 = '/p:Platform=Win32'
    proc = subprocess.Popen(([self.msbuild,projpath,arg1,arg2,arg3]), shell=True, 
                    stdout=subprocess.PIPE) 
    print
    while True:
        line = proc.stdout.readline()                        
        wx.Yield()
        if line.strip() == "":
            pass
        else:
            print line.strip()
        if not line: break
    proc.wait() 
```

# javascript - jsp ul列表元素动态选择

> ID：15471011
> 
> 赞同：0
> 
> 时间：2013-03-18T06:39:32.260
> 
> 标签：javascript, css, html-lists

情况是这样的：我的导航栏中有一个嵌套的 ul 列表，即

```
<li>
<ul>
<li>
 Some link
</li>
</ul>
</li>
</ul> 
```

这是我的瓷砖左侧的导航栏，右侧有与之相关的内容。

所以我希望每当我选择一个嵌套的 li 时打开一个特定的 li（主要不是嵌套的）。如何做到这一点，以任何方式css或javascript。

PS：我是一个菜鸟网络开发人员，所以请提出简单的解决方案，这个问题以前可能已经被问过，但我找不到一个简单的答案，所以请不要给它低分。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:53:41.243

如果你想在点击时显示它，你可以使用 CSS 伪元素：target。这就是你基本上必须做的：

您的 HTML 标记：（给每个父 LI 一个唯一的 ID 和该元素的锚点内的元素）

```
<ul class="menu clearfix">
    <li id="a">
        <a href="#a">Item 1</a>
        <ul class="clearfix">
            <li><a href="#">Item 1.1</a></li>
            <li><a href="#">Item 1.2</a></li>
        </ul>
    </li>
    <li id="b">
        <a href="#b">Item 2</a>
        <ul class="clearfix">
            <li><a href="#">Item 2.1</a></li>
            <li><a href="#">Item 2.2</a></li>
        </ul>
    </li>
    <li id="c">
        <a href="#c">Item 3</a>
        <ul class="clearfix">
            <li><a href="#">Item 3.1</a></li>
            <li><a href="#">Item 3.2</a></li>
        </ul>
    </li>
</ul> 
```

CSS：

```
/* basic menu styling */
ul.menu {
    position:relative;
}

ul.menu li {
   display:block;
   position:relative;
   float:left;
}

ul.menu a {
  display:block;
  text-decoration:none;
}

ul.menu > li {
    border:1px solid #000;
    min-width:100px;
    margin-left:-1px;
}

/* set up nested ul's and hide them */
ul.menu > li ul {
    display:none;
    position:absolute;
    width:100%;
    top:0;
    left:0;
}

/* show them on click */
ul.menu > li:target ul {
    display:block;
}

ul.menu > li > ul > li {
    float:none;
    display:block;
} 
```

我组装了一个小小提琴进行[演示](http://jsfiddle.net/axelmichel/MTnCc/)。

# c# - C# Web 浏览器自动化

> ID：15471012
> 
> 赞同：2
> 
> 时间：2013-03-18T06:39:36.837
> 
> 标签：c#, automation

我是网络浏览器自动化的新手，我选择谷歌页面作为学习示例。

我尝试模拟文件上传到 Google Drive，但遇到了几个问题。

[http://s4.postimage.org/jbx6c3q3h/Untitled_1.jpg](http://s4.postimage.org/jbx6c3q3h/Untitled_1.jpg)

```
private void webBrowser_DocumentCompleted ( object sender, WebBrowserDocumentCompletedEventArgs e ) {
    HtmlElement element = webBrowser.Document.GetElementById( "contentcreationpane" );
    if ( element != null )
        UploadFile();
}

private void UploadFile () {
    HtmlElementCollection elements = webBrowser.Document.GetElementsByTagName( "div" );
    foreach ( HtmlElement element in elements ) {
        if ( element.GetAttribute( "data-tooltip" ) == "Upload" ) {
            element.InvokeMember( "click" );
            break;
        }
    }

    HtmlElement uploadButton = webBrowser.Document.GetElementById( ":1" );
    if ( uploadButton != null ) {
        uploadButton.InvokeMember( "click" );
    } else {
        Exception goes here! Is it necessary to do a wait after previous element "Upload" is clicked?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:49:39.607

您可以尝试使用某种 Web UI 测试框架，例如 Selenium。它可以帮助您记录测试用例，甚至可以生成 C# 代码以粘贴到您的测试项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:24:10.233

这可能很难自动化——我知道 GMail（以及雅虎和其他网络邮件提供商）故意让通过他们的网络界面自动发送电子邮件变得复杂。

所以上传文件到 Google Drive 可能是类似的；很可能为了防止滥用，谷歌设置了障碍，使自动上传变得困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-21T09:26:40.290

您可以使用硒和 Sikuli 的混合物。Selenium 确实是浏览器自动化的绝佳工具。但是，如果您必须使用 Selenium 无法自动化的 UI 元素，我建议您使用 Sikuli for C#。[在这里](http://www.c-sharpcorner.com/blogs/sikuli-using-selenium-in-c-sharp)，我找到了一个示例：

```
 Launch.Start();  
    IwebDriver driver = new ChromeDriver("D:/>SeleniumDrivers/ChromeDriver32");  
    driver.Manage().Window.Maximize();  
    driver.Navigate.GoToURL("http://www.csharpcorner.com/");  
    Screen scr = new Screen();  
    scr.Click(Image1, true);  
    scr.wait(10);  
    scr.Type(Image2, "string to Enter", KeyModifier.None);  
    scr.wait(10);  
    scr.Type(Image3, "string to enter", keyModifier.None);  
    scr.wait(10);  
    scr.Type(Image4, "string to enter", KeyModifier.None);  
    scr.wait(10);  
    scr.Type(Image5, "string to enter", KeyModifier.None);  
    scr.wait(10);  
    driver.quit(); 
```

您可以轻松地与 UI 元素交互并使用 Sikuli 模拟键盘输入。

# sql - 将 nvarchar 值 'INSERT 转换为 dbo 时转换失败

> ID：15471014
> 
> 赞同：1
> 
> 时间：2013-03-18T06:39:38.247
> 
> 标签：sql, sql-server-2008

我知道这个问题可能会重复。我检查了我的查询超过 2 次，但我不知道是什么问题？

这是我的带有游标的存储过程：

```
ALTER PROCEDURE [dbo].[SPApprove_Request](@Id int, @NumRowsChanged int OUTPUT)
AS
BEGIN TRAN ApprovalTransaction

DECLARE @Mapping_Id int, @C_Id int, @Service_Table varchar(50), @Ser_Id int, @sql nvarchar(4000), @Today_Date datetime

    SET @Today_Date=GETDATE()

    DECLARE cursorObj CURSOR LOCAL static FOR SELECT serType.Service_Table_Name, serMap.Id, serMap.Request_Id FROM [Service_Type] as serType, [Service_Mapping] as serMap WHERE serType.Id = serMap.Service_Type_Id AND serType.Id IN (SELECT Service_Type_Id FROM Service_Mapping WHERE Request_Id = @Id) and serMap.Request_Id=@Id

    OPEN cursorObj
    --SELECT @@CURSOR_ROWS AS TotalRows
    FETCH NEXT FROM cursorObj into @Service_Table, @Mapping_Id, @C_Id
    WHILE @@FETCH_STATUS = 0
    BEGIN
        SET @sql = 'INSERT into dbo.' + quotename(@Service_Table) + '(Request_Id, Is_Active, Is_Deleted, Is_Cancelled, Created_Date) VALUES (' + @C_Id + ',1, 0, 0,'''+ convert(VARCHAR,@Today_Date) +''')'
        EXEC sp_executesql @sql
        SELECT @Ser_Id = @@IDENTITY
        IF (@@ERROR <> 0) GOTO ERR_HANDLER
        UPDATE [Service_Mapping] SET Service_Id = @Ser_Id WHERE Id = @Mapping_Id
        FETCH NEXT FROM cursorObj into @Service_Table, @Mapping_Id, @C_Id
    END
    CLOSE cursorObj
    DEALLOCATE cursorObj
    UPDATE [Request] SET State_Id = 2, Service_State_Id = 1, Approve_Disapprove_Date = @Today_Date, Date_Modified = @Today_Date WHERE Id = @Id
    SELECT @NumRowsChanged = @@ROWCOUNT
COMMIT TRAN ApprovalTransaction
RETURN @NumRowsChanged  

ERR_HANDLER:
PRINT 'Unexpected error occurred while Approving CRM Request!'
ROLLBACK TRAN ApprovalTransaction 
```

得到错误：

> *消息 245，级别 16，状态 1，过程 SPApprove_CRM_Doctor_Request，第 19 行将
> nvarchar 值 'INSERT 转换为 dbo 时转换失败。[Financial_Assistance](CRM_Doctor_Request_Id, Is_Active, Is_Deleted, Is_Cancelled, Created_Date)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:18:06.470

您应该转换`@C_Id`为 varchar 以便将其连接到字符串。

```
SET @sql = 'INSERT into dbo.' + quotename(@Service_Table) + 
   '(Request_Id, Is_Active, Is_Deleted, Is_Cancelled, Created_Date) 
   VALUES (' + convert(varchar,@C_Id) + ',1, 0, 0,'''+ convert(VARCHAR,@Today_Date) +''')' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:38:41.017

您也可以使用带参数的[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)系统存储过程

```
SET @sql = 'INSERT into dbo.' + quotename(@Service_Table) + '(Request_Id, Is_Active, Is_Deleted, Is_Cancelled, Created_Date) VALUES (@C_Id,1, 0, 0,@Today_Date)'
EXEC sp_executesql @sql, N'@C_Id int, @Today_Date datetime', @C_Id, @Today_Date 
```

# android - 安卓支持v4.jar

> ID：15471015
> 
> 赞同：1
> 
> 时间：2013-03-18T06:39:42.110
> 
> 标签：android, shared-libraries, android-viewpager, slidingmenu

当我想在我的应用程序中添加滑动菜单时，我遇到了 android 支持 v4.jar 的问题。我已经在我的应用程序上使用了 viewpager 库，它也使用了 support v4.jar。当我添加新库（滑动菜单）时，jar 不匹配。然后我去构建路径来纠正它并使用支持 v4.jar 滑动菜单，但支持 v4.jar 滑动菜单不支持 viewpager 脚本。支持 v4.jar 如何同时用于 viewpager 和slidingmenu？以及如何将 v4.jar 用于 viewpager、slidingmenu 和 zxing？

谢谢，

解决了。谢谢。

# android - 文件夹树布局

> ID：15471016
> 
> 赞同：0
> 
> 时间：2013-03-18T06:39:43.643
> 
> 标签：android, android-layout

我想用从 API 获得的数据实现一个树列表。假设我成功地从 api 获取数据，我的布局看起来如何？树必须显示所有子树树等。所以它必须显示最后一层。有点像这样：

![在此处输入图像描述](../Images/4f6a580af1ac14ddb6b2c18e6d3712ae.png)

用户将能够选择/取消选择一个文件夹，然后我必须自动选择/取消选择其所有子频道。所以这将显示一个复选框

```
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/channel_row"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <CheckBox
        android:id="@+id/check_channel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:focusable="false"
        android:checked="false" />

    <TextView
        android:layout_gravity="right"
        android:id="@+id/channel_text"
        android:textIsSelectable="false"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_margin="10dp" 
        android:textSize="25sp" >       
    </TextView>
</TableRow> 
```

# objective-c - OSX 中使用 AudioQueue 的 AEC（回声消除支持）

> ID：15471018
> 
> 赞同：8
> 
> 时间：2013-03-18T06:39:45.987
> 
> 标签：objective-c, macos, cocoa, audioqueue, echo-cancellation

我正在 OSX 和 iOS 上开发 VOIP 应用程序，并将使用 AudioQueue 进行音频流，想知道的是，默认情况下，AudioQueue 是否支持声学回声消除，或者我们是否需要添加对它的支持，
如果我们需要实现，我相信必须像 Speex 那样实现一些开源库 是否有任何可用示例显示 AudioQueue 与 Speex 或任何其他库的集成

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T08:52:24.820

据我所知，您必须使用音频单元来访问系统的回声消除。您可以通过使用[`kAudioUnitSubType_VoiceProcessingIO`](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/UsingSpecificAudioUnits/UsingSpecificAudioUnits.html#//apple_ref/doc/uid/TP40009492-CH17-SW1)而不是 `kAudioUnitSubType_RemoteIO`.

无论如何，您可能都想使用音频单元，以控制您的延迟。

您可以使用渲染回调函数从音频队列中获取数据并将其传递给您的 I/O 单元。对于传出，使用`AudioUnitRender`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-26T14:17:53.907

感谢[David](https://stackoverflow.com/a/15472761/1669634)和[这篇文章](https://stackoverflow.com/questions/12821404/apples-voice-processing-audio-unit-kaudiounitsubtype-voiceprocessingio-brok)，我意识到 iOS 上的回声消除需要进行以下更改：

```
desc.componentSubType = kAudioUnitSubType_VoiceProcessingIO 
```

这将根据[苹果文档](https://developer.apple.com/library/ios/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/UsingSpecificAudioUnits/UsingSpecificAudioUnits.html)启用硬件回声抑制。但是，您仍然需要为 AudioStream 描述使用特定的标志：

```
audioFormat.mFormatFlags = kAudioFormatFlagsCanonical; 
```

# selenium - 如何使用 selenium IDE 存储不包括货币符号的金额值？

> ID：15471019
> 
> 赞同：0
> 
> 时间：2013-03-18T06:39:50.040
> 
> 标签：selenium

如何使用 selenium IDE 存储不包括货币符号的金额值，例如我在我的网页上得到“$ 14.32”，而我只需要存储“14.32”，那么你能建议我如何存储它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:50:03.050

首先从页面中获取值。然后使用 a`storeEval`通过 JavaScript 函数处理该值。

```
store | path/to/element | currencyAmount
storeEval | parseInt(storedVars['currencyAmount'].replace('$', ''), 10) | amount 
```

# java - 在java中检查浏览器语言

> ID：15471020
> 
> 赞同：0
> 
> 时间：2013-03-18T06:39:55.833
> 
> 标签：java, localization

我需要在浏览器上执行语言检查，并通过使用 java 和 wicket 来判断它使用的是哪种语言。我尝试检查浏览器区域设置，但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:56:12.507

这可能会帮助你

```
 Enumeration headerNames = request.getHeaderNames();
while(headerNames.hasMoreElements()) {
  String headerName = (String)headerNames.nextElement();
  out.println(headerName);
  out.println(request.getHeader(headerName));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:53:11.290

您可以使用`HttpServletRequest.getHeader("header name")`. 标题“Accept-Language”给出了用户在浏览器中设置的语言。

# objective-c - 滚动时 NSTableView Header 变得模糊

> ID：15471024
> 
> 赞同：0
> 
> 时间：2013-03-18T06:40:22.050
> 
> 标签：objective-c, macos, cocoa, nstableview

当我连续一段时间随机移动水平滚动条时，有时会观察到 NSTableView 标题变得模糊。单击其他地方时，标题再次正常。此问题偶尔发生，并非总是如此。

# php - 结合一个静态类和一个非静态类

> ID：15471025
> 
> 赞同：1
> 
> 时间：2013-03-18T06:40:24.027
> 
> 标签：php, oop, class

例如，考虑`X`具有一些实用方法（'foo'，'bar'）的类，这些方法对`X`. 这些方法对于其他外部变量也很有用。有些可能实现`X`和`staticX`类如下：class Foo

```
class StaticX
{

    public static function foo($p)
    {
        return $p * $p;
    }
}

class X
{
    private $p=4;

    public function foo()
    {
        return StaticX::foo($this->p);
    }
}

$x= new x;
echo $x->foo();

echo StaticX::foo(3); 
```

但是这种方法存在一些可维护性问题。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:45:44.477

```
class X
{
    private $p;

    public function foo()
    {
        return self::doFoo($this->p);
    }

    public static function doFoo($p)
    {
        return $p * $p;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:27:23.500

我喜欢愚蠢的回答，但是这个呢？

```
class X
{
    private static $p;

    public static function foo($p=null)
    {
        if ( is_null( $p ) ) {
            $p = self::$p;
        }
        return $p * $p;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T08:43:11.050

从 PHP 5.4 开始，您可以使用`traits`. 见[http://www.php.net/manual/en/language.oop5.traits.php](http://www.php.net/manual/en/language.oop5.traits.php)

```
trait fooBehavior {
    function getFoo() { return self::foo($this->p); }
    static function foo($p) { return $p * $p; }
}

class X {
    use fooBehavior;

    private $p;

    public function __construct($p) { $this->p = $p; }
}

$x = new X(2);
echo $x->getFoo(); // echoes 4
echo $x::foo(2); // echoes 4 
```

# android - 如何使用 Robotium 处理崩溃

> ID：15471027
> 
> 赞同：0
> 
> 时间：2013-03-18T06:40:42.680
> 
> 标签：android, robotium

我正在运行 robotsium 脚本来测试应用程序。在点击“完成”按钮应用程序崩溃后的一种情况下，此时我的机器人脚本停止工作。如何使用机器人处理这种情况，有什么方法可以让我知道应用程序崩溃了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:49:13.097

Unfortunately Instrumentation tests live in the same process as your application, if you applications process crashes so do your tests. The way you can figure out your app crashed is that the instrument command process will end with an error code and then you will have to combine that with logcat to get the actual error that occurred.

# jquery - 使用 jquery 的动画不起作用。

> ID：15471029
> 
> 赞同：1
> 
> 时间：2013-03-18T06:40:50.023
> 
> 标签：jquery

我的代码有什么问题？动画即将在两个值之间更改单元格的宽度。动画不起作用。你能修复脚本部分吗？我很着急。

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery-1.9.1.js" type="text/javascript"></script>
<style type="text/css">
    .tbl{display: table;}
    .cell{display: table-cell;}
    .container{background: url("bgs/12.png")no-repeat;width: 179px;height: 119px;}
    #leftP{background: url("bgs/16.png")no-repeat right;width: 86px;height: 119px}
</style>
<script type="text/javascript">

    $(document).ready(function(){
        function Animation(){
            $('leftP').animate({width:'48px'},"slow");
            $('leftP').animate({width:'86px'},"slow","",Animation());

        }
    });
</script>
<title></title>
</head>
<body>
<div class="container tbl">
    <div id="leftP" class="cell width"></div>
    <div class="cell"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:43:25.383

你没有`Animation()`在任何地方调用......除非你在某个地方调用这个函数，否则它不会做任何事情`Animation()`......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:45:19.543

您需要第一次调用函数。

```
function Animation()
{
    $('#leftP').animate({width:'48px'},"slow");
    $('#leftP').animate({width:'86px'},"slow","",Animation());
}

$(document).ready(function()
{
    Animation();
}); 
```

您也忘记`ID`在`jQuery`选择器中定义。

```
$('#leftP') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:45:45.333

试试这个：你定义`leftP`了动画，但 id 必须是`#leftP`

```
$(document).ready(function(){
    function Animation(){
        $('#leftP').animate({width:'48px'},"slow");
        $('#leftP').animate({width:'86px'},"slow","",Animation());

    }

    Animation();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:14:27.627

您的代码存在许多问题，我将尝试解决所有问题：

1.  您的选择器错误，您需要使用[id-selector](http://api.jquery.com/id-selector/) `#leftP`
2.  您需要按顺序执行动画，因此在第一个动画的回调中执行第二个动画。
3.  您需要第一次调用 Animation-function 才能启动所有内容。在我的示例中，我使用了[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。

这就是我相信你正在寻找的东西。

```
$(function () {
    (function Animation(){
        $('#leftP').animate({width:'48px'},"slow", function () {
           $('#leftP').animate({width:'86px'},"slow","",Animation());
        });    
    })();
}); 
```

[**演示**](http://jsfiddle.net/QUTym/)

# mpj-express - MPJ Express -- runtime.MPJRuntimeException: 无法连接到机器上的守护进程 和端口 <10000>

> ID：15471032
> 
> 赞同：1
> 
> 时间：2013-03-18T06:40:53.757
> 
> 标签：mpj-express

我在集群模式下配置 MPJ Express 时遇到问题。

我正在遵循 [http://mpj-express.org/docs/guides/linuxguide.pdf提供的指南](http://mpj-express.org/docs/guides/linuxguide.pdf)

环境变量成功初始化为

1) 设置 MPJ_HOME 和 PATH 变量

**一个。** 导出 MPJ_HOME=/path/to/mpj/

**湾。** 导出 PATH=$PATH:$MPJ_HOME/bin

2）机器也成功添加，机器文件为

**mpjboot 机器**

它显示消息开始 mpjd...

3) 下一步是通过以下方式测试 HelloWolrd 程序

**编译：javac -cp .:$MPJ_HOME/lib/mpj.jar HelloWorld.java
10\. 执行：mpjrun.sh -np 2 –dev niodev HelloWorld**

当我这样做时，我得到了这个错误

**runtime.MPJRuntimeException：无法连接到机器和端口 <10000> 的守护进程**

我使用的平台是

*   带有 Solaris 10 操作系统的 Sun Ultra 25 工作站
*   我已经制作了一个由 2 台机器组成的快速以太网集群
*   在每台机器上使用 root 用户启用 ssh
*   网络建立良好

任何帮助或解决方案表示赞赏..

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:58:38.793

检查集群节点环境变量。

尝试`.bashrc`在每个集群节点中添加 vars（从主节点 ssh 到它）：

```
echo 'export MPJ_HOME=/home/<user>/path/to/mpj' >> ~/.bashrc
echo 'export PATH=$PATH:$MPJ_HOME/bin' >> ~/.bashrc 
```

或者，打开日志记录`/conf/wrapper.conf`、运行并报告您的发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T08:02:08.980

这是我第一次在 stackOverflow 中给出答案。我用jdk1.6.0_32在我的centos6.3中设置了MPJExpress-v0_42，最后一切似乎都OK了。

## 问题1：无法连接到机器和端口的守护进程

守护程序未运行时可能会发生这种情况。您可以尝试如下：

1.  您可以使用它`sudo netstat -anp |grep port`来检查端口是否正在侦听并获取 processId。
2.  在我的机器上，使用 启动守护程序后`mpjdaemon -boot localhost`，我使用`sudo netstat -apn |grep 4000`命令检查端口并得到以下信息。

    ```
    tcp        0      0 :::40000                    :::*                        LISTEN      8766/java           
    tcp        0      0 :::40001                    :::*                        LISTEN      8766/java 
    ```

    端口配置在里面`$MPJ_HOME/conf/wrap.conf`，我的配置如下：

    ```
    #port number for the daemon.
    wrapper.app.parameter.2=40001
    #Socket Server Port Number.
    wrapper.app.parameter.3=40000 
    ```

3.  我也是用`jps -m`命令获取java daemon进程，结果如下：

    ```
    8766 MPJDaemon 40001
    30850 Jps -m 
    ```

    这里`8766`是`netstat`显示的processId，`MPJDaemon`是守护进程，`40001`是监听端口。

在您的问题中，您无法连接守护进程。**执行以下操作：**

1.  你应该检查端口。如果找不到使用的端口`netstat`，一般是指`MPJDaemon is not running`.
2.  可以肯定的是，您也可以使用 jps 来检查进程。也许进程正在运行，但端口是另一个
3.  不要使用`mpjboot machines`或之类的集群命令`mpjrun.sh -np 2 -dev niodev HelloWorld`。您可以使用`mpjdaemon -boot localhost`测试当前机器，如果它配置好，您可以使用一项设置机器文件`localhost`并运行集群命令。

**我遇到的其他问题。**

## 问题2：使用ant编译失败

起初我使用`MPJ-v0_44.zip`and `jdk1.6.0`，但它无法编译并给出错误 that `ProcessBuilder has no method of "interNIO"(something like that)`。我分析了源代码，猜测可能是因为JDK版本低了一点。鉴于升级 JDK 有点复杂，我找到了另一个 MPJ 版本，`mpj-v0_42.zip`它编译正常。

## 问题 3：`mpjdaemon -boot localhost`没有错误信息，但 MPJDeamon 没有运行。

在我配置了`MPJ_HOME`from `.bash_profile`to这样的环境变量后`.bashrc`，问题就解决了。我不知道为什么。

## 问题 4：命令`jps -m`说“MPJDeamon is running”，但`mpjdaemon -status localhost`说“mpjdeamon is not running”。

我使用命令（`ssh localhost nohup 'jps -m'`），它说`jps`找不到命令，但我使用 jps 命令工作正常。我想可能是和上面一样的问题。jps的路径没有在路径环境变量中配置`.bashrc`。因此，在添加一行`PATH=/jpspath:$PATH`in后`.bashrc`，一切正常。

# c# - 如何从数据库中找到忘记的密码？

> ID：15471034
> 
> 赞同：-3
> 
> 时间：2013-03-18T06:40:59.820
> 
> 标签：c#, asp.net, sendmail, 3-tier

我有一个项目，我想在其中发送忘记密码的邮件，但我无法从数据库中找到用户名和密码，它正在发送空白邮件，如用户名：和密码：我想从数据库中查找用户名和密码在 3 层架构中提前感谢，这是我的代码....

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        int id = MyRegistration.fgusername(txt_Email.Text.Trim());
        if (id > 0)
        {
            string sQuery = "Select UserName, Password From Registration Where EmailID = '" + txt_Email.Text + "'";

            DataSet ds =DataAccessLayer.ExeSelectQuery(sQuery);
            try
            {
                string sUserName = "";
                string sPassword = "";
                sendMail( sUserName, sPassword);
            }
            catch (Exception ex) { }
        }
        else { label1.Text = "Invalid User"; }
    } 
```

数据访问层：

```
 public static int fgusername(string sEmailId)
        {
            int id1 = 0;
            string selectstr = "SELECT UserName, Password FROM Registration WHERE EmailID = '" + sEmailId.Trim() + "'";
            id1 = DataAccessLayer.ExecuteReader(selectstr);
            return id1;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:44:11.333

通过运行此代码，您还有什么期望

```
string sUserName = "";
            string sPassword = "";
            sendMail( sUserName, sPassword);

try
        {
            string sUserName = "";
            string sPassword = "";
            sendMail( sUserName, sPassword);
        }
        catch (Exception ex) { throw ex; // throw the exception } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:55:06.367

```
DataSet ds =DataAccessLayer.ExeSelectQuery(sQuery);
            try
            {

  if(ds .Tables[0].Rows.Count>0)
                {
  string sUserName = "";
                string sPassword = "";
                 sUserName =   ds.Tables[0].Rows[0]["Username"].ToString();
                 sPassword =   ds.Tables[0].Rows[0]["Password"].ToString();
sendMail( sUserName, sPassword);
                } 
            } 
```

嗨试试这个希望它会帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:51:26.890

您在发送邮件之前将 sUsername 和 sPassword 设置为空，如下所示：

```
string sUserName = "";
string sPassword = "";

sendMail( sUserName, sPassword); 
```

尝试这样做：

```
string sUserName = ds.Tables[0].Rows[0]["UserName"].ToString();
string sPassword = ds.Tables[0].Rows[0]["Password"].ToString();

sendMail( sUserName, sPassword); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:03:15.647

字符串 sUserName=""; 字符串 sPassword=""; 您将这两个变量都初始化为没有值，我认为您的 SendMail(sUserName,sPassword); 正在使用这些变量值。

# xml - 在 WSDL 中不使用 0 发送 null

> ID：15471035
> 
> 赞同：0
> 
> 时间：2013-03-18T06:41:08.977
> 
> 标签：xml, web-services, soap, null, wsdl

我有这个 WSDL 内容：

```
<s:element minOccurs="0" maxOccurs="1" name="SystemName" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="SystemPassword" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="MS_ZIHUY" type="s:int"/>
<s:element minOccurs="1" maxOccurs="1" name="KOD_CHEVRA" type="s:int"/>
<s:element minOccurs="0" maxOccurs="1" name="FAMILY_NAME" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="FIRST_NAME" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="KOD_MIN" nillable="true" type="s:int"/>
<s:element minOccurs="1" maxOccurs="1" name="BIRTH_DATE" nillable="true" type="s:dateTime"/>
<s:element minOccurs="0" maxOccurs="1" name="SMOKING" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="CURRENT_OCCUPATION" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="INTERNET_INDICATOR" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="MS_SOCHEN_MEVUTACH_VIP" type="s:int"/>
<s:element minOccurs="0" maxOccurs="1" name="SEMEL_YESHUV" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="SHEM_YESHUV" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="SEMEL_RECHOV" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="SHEM_RECHOV" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_BAIT" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_DIRA" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_KNISA" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="OT_BAIT" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MIKUD" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="TA_DOAR" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MARITAL_STATUS" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_KIDOMET_TELEFON" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_TELEFON" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_KIDOMET_NAYAD" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_NAYAD" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_KIDOMET_FAX" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="MS_FAX" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="EMAIL" type="s:string"/>
<s:element minOccurs="1" maxOccurs="1" name="KOD_DIVUR_SHIVUKI" nillable="true" type="s:int"/>
 <s:element minOccurs="1" maxOccurs="1" name="KOD_DIVUR_SHIVUKI_ELC" nillable="true" type="s:int"/> 
```

但是当我想在这个字段中发送 null 时，我需要像这样发送 0 ：

```
<tem:FAMILY_NAME>0</tem:FAMILY_NAME>
<tem:FIRST_NAME>0</tem:FIRST_NAME> 
```

这没有帮助：

```
<tem:FAMILY_NAME/>
<tem:FIRST_NAME/> 
```

如果我想发送 null 我该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:53:51.720

```
<item:FAMILY_NAME  i:nil="true" /> 
```

我在[http://www.w3.org/TR/2001/REC-xmlschema-0-20010502/](http://www.w3.org/TR/2001/REC-xmlschema-0-20010502/)中以 2.9 Nil Values阅读此内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:57:35.273

我认为您不必指定它们。甚至不写

```
<tem:FAMILY_NAME/> 
```

只需忽略这些参数，它们将作为默认值执行（如果是对象，则为 null）

# json - 如何在 Java 中打印 JSON 文件

> ID：15471037
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:41:16.670
> 
> 标签：json

我的磁盘中有一个 JSON 文件`E:\\jsondemo.json`。我想阅读内容并使用 Java 进行打印。我试图搜索并尝试做例子。但是对于我的程序来说，没有什么好看的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:47:06.663

请参阅[此页面](http://www.javapractices.com/topic/TopicAction.do?Id=42)以查找有关 的示例`FileInputStream`。

# android - 如何从源到拖放操作的目的地画一 条线？

> ID：15471038
> 
> 赞同：2
> 
> 时间：2013-03-18T06:41:24.507
> 
> 标签：android, drag-and-drop, line, draw

我已经实现了一个拖放系统，现在我想画一条从源到目的地的线。我怎样才能画出那条线？我已经使用了`View`该类的扩展，但它不起作用。这是我的代码：

```
public class TempDDActivity extends Activity implements OnTouchListener {
    /** Called when the activity is first created. */
    private View selected_item = null;
    private int offset_x = 0;
    private int offset_y = 0;
    Boolean touchFlag=false;
    boolean dropFlag=false;
    LayoutParams imageParams;
    ImageView imageDrop,image1,image2;
    int crashX,crashY;
    Drawable dropDrawable,selectDrawable;
    Rect dropRect,selectRect;
    int topy,leftX,rightX,bottomY;

    int dropArray[];    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
        ViewGroup container = (ViewGroup) findViewById(R.id.container);
        imageDrop=(ImageView) findViewById(R.id.ImgDrop);       
        image1=(ImageView) findViewById(R.id.img);      
        image2=(ImageView) findViewById(R.id.img2);
        container.setOnTouchListener(new View.OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {
                if(touchFlag==true)
                {
                    System.err.println("Display If  Part ::->"+touchFlag);
                    switch (event.getActionMasked()) 
                    {
                    case MotionEvent.ACTION_DOWN :

                         topy=imageDrop.getTop();
                         leftX=imageDrop.getLeft();
                         rightX=imageDrop.getRight();   
                         bottomY=imageDrop.getBottom();
                        System.err.println("Display Top-->"+topy);      
                        System.err.println("Display Left-->"+leftX);
                        System.err.println("Display Right-->"+rightX);
                        System.err.println("Display Bottom-->"+bottomY);                

                        //opRect.
                        break;
                    case MotionEvent.ACTION_MOVE:
                        crashX=(int) event.getX();
                        crashY=(int) event.getY();
                        System.err.println("Display Here X Value-->"+crashX);
                        System.err.println("Display Here Y Value-->"+crashY);

                        int x = (int) event.getX() - offset_x;
                        int y = (int) event.getY() - offset_y;                                          
                        //int w = getWindowManager().getDefaultDisplay().getWidth() - 100;
                        //int h = getWindowManager().getDefaultDisplay().getHeight() - 100;
                        int w = getWindowManager().getDefaultDisplay().getWidth() - 50;
                        int h = getWindowManager().getDefaultDisplay().getHeight() - 10;
                        if (x > w)
                            x = w;
                        if (y > h)
                            y = h;                      
                        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(new ViewGroup.MarginLayoutParams(  RelativeLayout.LayoutParams.WRAP_CONTENT,   RelativeLayout.LayoutParams.WRAP_CONTENT));
                        lp.setMargins(x, y, 0, 0);                  

                        //Drop Image Here                       
                        if(crashX > leftX && crashX < rightX && crashY > topy && crashY < bottomY )                     
                        {                           
                            Drawable temp=selected_item.getBackground();                            
                            imageDrop.setBackgroundDrawable(temp);
                            imageDrop.bringToFront();                           
                            dropFlag=true;
                            selected_item.setVisibility(View.INVISIBLE);
                        }
                        //Drop Image Here                       
                        selected_item.setLayoutParams(lp);
                        break;  
                    case MotionEvent.ACTION_UP:
                        //                      
                        touchFlag=false;
                        if(dropFlag==true)
                        {
                            dropFlag=false;
                        }
                        else
                        {
                            selected_item.setLayoutParams(imageParams);
                        }                       
                        break;
                    default:
                        break;
                    }
                }else
                {
                    System.err.println("Display Else Part ::->"+touchFlag);
                }               
                return true;
            }
        });

        image1.setOnTouchListener(this);
        image2.setOnTouchListener(this);
    }

    public boolean onTouch(View v, MotionEvent event) 
    {   
        switch (event.getActionMasked()) 
        {
        case MotionEvent.ACTION_DOWN:
            touchFlag=true;
            offset_x = (int) event.getX();
            offset_y = (int) event.getY();
            selected_item = v;
            imageParams=v.getLayoutParams();
            break;
        case MotionEvent.ACTION_UP:
            selected_item=null;
            touchFlag=false;
            break;
        default:
            break;
        }       
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:26:30.843

> 现在我想画一条从源到目的地的线

首先，您需要有一个自定义视图来实际绘制线条。这将是包装 的布局，`ImageViews`在您的情况下，我认为是`RelativeLayout`. 该类将类似于：

```
public class DragObserverLayout extends RelativeLayout {

    float startX, startY, stopX, stopY;
    private Paint mPaint = new Paint();
    private List<Rect> lines = new ArrayList<Rect>();

    public DragObserverLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint.setColor(Color.GREEN);
        mPaint.setStrokeWidth(2.0f);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        final int count = lines.size();
        for (int i = 0; i < count; i++) {
            final Rect r = lines.get(i);
            canvas.drawLine(r.left, r.top, r.right, r.bottom, mPaint);
        }
    }

    public void addLine(Rect r) {
        lines.add(r);
        invalidate();
    }

} 
```

然后在`OnTouchListener`您执行拖动操作的容器中，您只需执行以下操作：

```
 final int[] location = new int[2];
    final DragObserverLayout container = (DragObserverLayout ) findViewById(R.id.container);       
    container.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if(touchFlag==true) {
                switch (event.getActionMasked()) 
                {
                case MotionEvent.ACTION_DOWN :
                    //...
                    selected_item.getLocationOnScreen(location);
        container.startX = location[0];
        container.startY = location[1];  
                    break;
                case MotionEvent.ACTION_MOVE:
                  //...
                    selected_item.getLocationOnScreen(location);            
                    break;  
                case MotionEvent.ACTION_UP:
                    // ...
                    // .. the item was dragged on the target
                    if (selected_item.getVisibility() != View.VISIBLE) {
                        Rect r = new Rect();
                        r.left = (int) container.startX;
                        r.top = (int) container.startY;
                        imageDrop.getLocationInWindow(location);
                        r.right = location[0];
                        r.bottom = location[1];
                        container.addLine(r);
                    } 
```

这将从拖动的初始位置（视图的左上角）到当前位置绘制一条**直线**，直到“放下”。如果您愿意，您可以通过在. 这也适用于您有一个覆盖整个屏幕的全屏应用程序，否则您必须抵消返回以考虑状态栏。如果要在拖动操作完成后将线条保留在屏幕上，则需要将其存储在容器中。`ImageView``ImageView``onTouch``ImageViews``getLocationOnScreen()`

# postgresql - PostgreSQL“协议错误。会话设置失败..”错误

> ID：15471039
> 
> 赞同：1
> 
> 时间：2013-03-18T06:41:25.037
> 
> 标签：postgresql, jdbc, birt

运行查询 Postgresql 数据库的 BIRT 报告时，我收到以下错误？我怎样才能解决这个问题？

```
Mar 18, 2013 4:19:37 PM org.eclipse.birt.data.engine.odaconsumer.ConnectionManager openConnection
SEVERE: Unable to open connection.
org.eclipse.birt.report.data.oda.jdbc.JDBCException: There is an error in get connection, Protocol error.  Session setup failed..
    at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.doConnect(JDBCDriverManager.java:303)
    at org.eclipse.birt.report.data.oda.jdbc.JDBCDriverManager.getConnection(JDBCDriverManager.java:231)
    at org.eclipse.birt.report.data.oda.jdbc.Connection.connectByUrl(Connection.java:252)
    at org.eclipse.birt.report.data.oda.jdbc.Connection.open(Connection.java:162)
    at org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open(OdaConnection.java:250)
    at org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:165)
    at org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:224)
    at org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:212)
    at org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource(DataSourceRuntime.java:217)
    at org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource(QueryExecutor.java:407)
    at org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution(QueryExecutor.java:317)
    at org.eclipse.birt.data.engine.impl.PreparedQuery.doPrepare(PreparedQuery.java:455)
    at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.produceQueryResults(PreparedDataSourceQuery.java:190)
    at org.eclipse.birt.data.engine.impl.PreparedDataSourceQuery.execute(PreparedDataSourceQuery.java:178)
    at org.eclipse.birt.data.engine.impl.PreparedOdaDSQuery.execute(PreparedOdaDSQuery.java:145)
    at org.eclipse.birt.report.data.adapter.impl.DataRequestSessionImpl.execute(DataRequestSessionImpl.java:624)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.executeQuery(GetParameterDefinitionTask.java:653)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getResultSetOfCascadingGroup(GetParameterDefinitionTask.java:1074)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getChoicesFromParameterGroup(GetParameterDefinitionTask.java:987)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getCascadingParameterList(GetParameterDefinitionTask.java:590)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.doGetSelectionList(GetParameterDefinitionTask.java:487)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getSelectionList(GetParameterDefinitionTask.java:447)
    at org.eclipse.birt.report.engine.api.impl.GetParameterDefinitionTask.getSelectionListForCascadingGroup(GetParameterDefinitionTask.java:737)
    at org.eclipse.birt.report.service.BirtViewerReportService.getSelectionListForCascadingGroup(BirtViewerReportService.java:777)
    at org.eclipse.birt.report.presentation.aggregation.parameter.ComboBoxParameterFragment.getParameterSelectionListForCascadingGroup(ComboBoxParameterFragment.java:119)
    at org.eclipse.birt.report.presentation.aggregation.parameter.ComboBoxParameterFragment.prepareParameterBean(ComboBoxParameterFragment.java:81)
    at org.eclipse.birt.report.presentation.aggregation.parameter.ScalarParameterFragment.doService(ScalarParameterFragment.java:91)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(AbstractBaseFragment.java:76)
    at org.apache.jsp.webcontent.birt.pages.parameter.ParameterGroupFragment_jsp._jspService(ParameterGroupFragment_jsp.java:138)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:720)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:657)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(AbstractBaseFragment.java:82)
    at org.apache.jsp.webcontent.birt.pages.dialog.ParameterDialogFragment_jsp._jspService(ParameterDialogFragment_jsp.java:108)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:720)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:657)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(AbstractBaseFragment.java:82)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.callBack(AbstractBaseFragment.java:106)
    at org.apache.jsp.webcontent.birt.pages.dialog.DialogContainerFragment_jsp._jspService(DialogContainerFragment_jsp.java:132)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:720)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:657)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(AbstractBaseFragment.java:82)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.callBack(AbstractBaseFragment.java:106)
    at org.apache.jsp.webcontent.birt.pages.layout.ReportDialogFragment_jsp._jspService(ReportDialogFragment_jsp.java:72)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:720)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:657)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.service(AbstractBaseFragment.java:82)
    at org.eclipse.birt.report.presentation.aggregation.AbstractBaseFragment.callBack(AbstractBaseFragment.java:106)
    at org.apache.jsp.webcontent.birt.pages.layout.RunFragment_jsp._jspService(RunFragment_jsp.java:214)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:720)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:657)
    at org.eclipse.birt.report.presentation.aggregation.layout.FramesetFragment.service(FramesetFragment.java:98)
    at org.eclipse.birt.report.servlet.ViewerServlet.__doGet(ViewerServlet.java:181)
    at org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.doGet(BirtSoapMessageDispatcherServlet.java:160)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.eclipse.birt.report.servlet.BirtSoapMessageDispatcherServlet.service(BirtSoapMessageDispatcherServlet.java:122)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.eclipse.birt.report.filter.ViewerFilter.doFilter(ViewerFilter.java:68)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:41:25.037

就我而言，这是因为服务器正在运行（或者更准确地说是模拟）PostgreSQL 8.1，而我使用的是 JDBC 9.2 驱动程序。一旦我匹配了 PostgreSQL 服务器和 JDBC 驱动程序版本，一切都开始正常工作。

# push-notification - IBM Worklight：推送通知设备 ID

> ID：15471046
> 
> 赞同：0
> 
> 时间：2013-03-18T06:42:01.410
> 
> 标签：push-notification, ibm-mobilefirst

deviceSubscription 中有一个名为“device”的字段。我假设它对应于设备的设备 ID。此值用作 WL.Server.notifyDevice(userSubscription, device, options) 中的参数，为用户提交特定设备的通知。

但是，当我再次重新安装应用程序时， deviceSubscription.device 中的值会更改。因此，虽然它们实际上是同一个设备，但订阅事件源的设备 ID 却不同。

我可以知道 deviceSubscription.device 来自哪里吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:26:44.610

“设备 ID”这个名称确实令人困惑。它不引用物理设备，而是引用应用程序。因此，当您重新安装应用程序时，您会得到一个不同的值（它是由客户端框架生成的）。

# java - 无需应用注册即可获取对 Dropbox 的 JavaScript 访问权限

> ID：15471049
> 
> 赞同：0
> 
> 时间：2013-03-18T06:42:12.597
> 
> 标签：java, javascript, api, dropbox

我将使用 Java 应用程序操作 DropBox 帐户，因此我可以使用他们的 JavaScript 代码。但是有没有一种方法可以访问 DropBox 帐户，而无需使用应用程序密钥和秘密，或者可能是一些默认的。当 DropBox 网页以某种方式做到这一点时，人们怎么能说这是不可能的呢？检查网页的长代码让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:40:38.877

从`Dropbox`

> 应用程序密钥
> 
> Dropbox 为每个应用程序生成一个唯一的密钥/秘密对，称为应用程序密钥和应用程序秘密。**这些是身份验证所必需的，**并且仅对您和此应用程序是唯一的。换句话说，请不要与其他应用程序共享这些值或重复使用它们。

所以答案是否定的，没有密钥就无法访问帐户。

# eclipse - Windows 7 中的 Beaglebone C/C++ 编程

> ID：15471051
> 
> 赞同：0
> 
> 时间：2013-03-18T06:42:28.477
> 
> 标签：eclipse, windows-7, arm, linux-toolchain

我有一个 Beaglebone（修订版：A6），我想使用 Eclipse 在 Windows 7 中开发 C/C++ 程序，然后在板上传输可执行文件。但是我在设置 Beaglebone 所需的编译器/调试器/工具链时遇到了麻烦。搜索互联网只能让我了解如何在 Linux 中设置环境，例如安装“arm-linux-gnueabi”、设置“包含”的路径等。我需要一步一步的说明来在 Windows 机器中的 Eclipse 中设置环境. 任何人都可以帮忙吗？

我已经尝试了这些步骤： 1\. 我在 Windows 上安装了 GNUARM。2\. 在 Eclipse IDE 上，我使用 Corss GCC 打开一个 C++ 项目。3\. 从项目 -> 属性 -> C/C++ 构建 -> 设置我将“arm-elf-”添加到每个交叉编译器命令。4\. 从 GNUARM 安装目录中，我在“C++ General -> paths and symbos”中添加了几个路径到“.../include/”。

我的“全部构建”显示如下：

```
10:32:20 **** Build of configuration Debug for project h ****
make all 
Building file: ../src/hello.cpp
Invoking: Cross G++ Compiler
arm-elf-g++ -I"C:\GNUARM\include\c++\4.1.1" -I"C:\GNUARM\include\c++\4.1.1\arm-elf" -   I"C:\GNUARM\include\c++\4.1.1\backward" -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -  MF"src/hello.d" -MT"src/hello.d" -o "src/hello.o" "../src/hello.cpp"
Finished building: ../src/hello.cpp

Building target: h
Invoking: Cross G++ Linker
arm-elf-g++ -L"C:\GNUARM\lib\gcc\arm-elf\4.1.1\include" -o "h"  ./src/hello.o   
Finished building target: h

10:32:23 Build Finished (took 2s.967ms) 
```

这是一个简单的“Hello world”打印程序。从项目资源管理器 'Debug->src->hello.o -[arm/le]' 我复制它并在 beaglebone 上运行时使用

```
chmod ugo+x hello.o
./hello.o
-sh: ./hello.o: cannot execute binary file 
```

上面的按摩是打印出来的。我不知道我做错了什么。可能是eclipse中的ARM环境设置不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:11:04.633

我在这里得到了答案。[http://www.acmesystems.it/foxg20_eclipse_windows_c](http://www.acmesystems.it/foxg20_eclipse_windows_c)。CodeSourcery 是我一直在寻找的工具链，这也解释了如何设置 corss 编译环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:26:24.240

不是`hello.o`预链接的目标文件（只是hello.cpp的编译内容）吗？它不包含启动代码或任何库函数。链接器添加这些以产生最终输出。

您不想运行链接器输出文件`h`（应该已经是可执行的）吗？

# perl - Perl 中的日期操作

> ID：15471055
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:42:40.587
> 
> 标签：perl

我的脚本以格式传递了一个日期参数，`YYYYMMDD`例如`20130227`。我需要检查是否是星期一。如果是，那么我需要检索前四天的日期值，否则我应该检索前两天的日期值并将它们存储在数组中。

例如，如果参数是 `20130227` 星期一，那么我需要存储`('20130227' '20130226' '20130225' '20130224')` 在一个数组中。如果不是星期一，那么我只需要存储`('20130227' '20130226')` 在一个数组中。

我可以使用什么 perl 函数来执行此操作？我在 solaris 10 上使用 perl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:31:42.480

并非所有标准 Perl 命令都列在标准 Perl 命令列表中。`system`这对初学者来说是一个很大的困惑，也是您最终看到初学者使用大量命令来完成可以直接在 Perl 中完成的事情的主要原因。

如果您包含该命令的*Perl 模块*，则可以使用许多 Perl 命令。例如，您想将文件从一个地方复制到另一个地方，但没有将 Perl`copy`命令列为标准功能。许多人最终会这样做：

```
 system ("cp $my_file $new_location"); 
```

但是，有一个标准的 Perl 模块`File::Copy`，其中包含缺少的复制命令：

```
 use File::Copy;

 copy ($my_file, $new_location); 
```

该`File::Copy`模块包含在 Perl 中，但您必须了解模块以及如何使用它们。不幸的是，尽管它们是 Perl 的主要部分，但它们根本没有包含在许多 Perl 初学者书籍中。

我假设您的困惑来自您在 Perl 中寻找某些命令但没有找到它的事实。然而，[Time::Piece](http://perldoc.perl.org/Time/Piece.html)模块是自 Perl 5.10 以来用于日期操作的标准 Perl 模块。不幸的是，它是一个*面向对象的*模块，对于不熟悉面向对象 Perl 的用户来说，它的语法可能会有点奇怪。幸运的是，它使用起来真的非常简单。

在面向对象编程中，您创建一个包含数据的*对象。*对象本身不容易显示，但包含数据的所有特征，并且可以使用各种*方法*（基本上是子例程）来获取有关该对象的信息。

您需要做的第一件事是创建日期的*时间对象*：

```
 my $time_obj = Time::Piece->strptime("20130227", "%Y%m%d"); 
```

现在，`$time_obj`代表您的日期。代表您的`20130227`日期字符串。`%Y%m%d`表示您的字符串 ( `YYYYMMDD`)的格式。不幸的是，`Time::Piece`文档没有告诉您格式是如何工作的，但格式字符记录在[Unix strftime 手册页](http://linux.die.net/man/3/strftime)中。

一旦你有了你的*时间对象*，你可以用各种方法（又名子程序）来查询它：

```
if ( $time_obj->day_of_week == 1 ) {
    print "This is a Monday\n";
} 
```

阅读文档并尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:38:07.760

在 Perl 中处理日期的通用工具包是`DateTime`模块。它带有大量的日期解析选项，可以让您输入和输出您的字符串格式，并且可以轻松查询例如星期几。

一个更轻量级、快速和推荐的替代方案可能是`Date::ISO8601`- 您的格式非常接近该 ISO 格式，但您需要愿意对变量进行一些操作，例如`my ($yyyy, $mm, $dd) = ( substr($d, 0,4), substr( $d, 4, 2 ), substr( $d, 6, 2 ) );`将从您的示例中获取年月日字符串到提供给模块的构造函数。

请至少尝试一下，如果您遇到困难，请在您的问题上发布一些代码。一旦您在问题中尝试了一些代码，只需填写您不知道的部分，别人就可以更快地回答 - 您可能比您想象的更了解您想要的解决方案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:28:18.853

我并不热衷于帮助那些自己似乎没有为他们付出努力的人。所以我不打算给你答案，但我建议你看一下 Time::Piece 模块（Perl 5.10 版以来的标准部分）。尤其是它的`strftime`方法。

这应该足以让你开始。

# ios - 从目标C中的字符串右侧提取

> ID：15471056
> 
> 赞同：1
> 
> 时间：2013-03-18T06:42:51.163
> 
> 标签：ios, objective-c, string, text-extraction

这似乎是我正在寻找的，但反过来。我想`string`从右边而不是从左边提取。给出从左边提取的例子：

```
NSString *source = @"0123456789";
NSString *firstFour = [source substringToIndex:4];

Output: "0123" 
```

我正在寻找一个可以从右侧工作的版本（下面的内容不起作用）

```
NSString *source = @"0123456789";
NSString *lastFour = [source substringToIndex:-4];

Output: "6789" 
```

这`[source substringFromIndex:6];`不起作用，因为有时我会得到一个答案是 000123456789 或 456789 或 6789。在所有情况下，我只需要字符串中的最后 4 个字符，以便将其转换为数字。

一定有比一堆 if else 语句更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:00:24.853

由于您不确定字符串的长度，因此您必须在提取之前检查它，如下所示：

```
NSString *source = @"0123456789";
NSNumber *number;
if (source.length>=4) {
    NSString *lastFour=[source substringFromIndex:source.length-4];
    number=@([lastFour integerValue]); //and save it in a number, it can be int or NSInteger as per your need
}
NSLog(@"%@",number); 
```

此外，如果您想要一个需要多次调用的快速方法，请创建一个类别：

```
@implementation NSString (SubstringFromRight)
-(NSString *)substringFromRight:(NSUInteger)from{
    if (self.length<from) {
        return nil;
    }        
    return [self substringFromIndex:self.length-from];
}
@end 
```

并将其用作：`NSLog(@"%@",[source1 substringFromRight:4]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:15:55.927

您可以使用以下代码从字符串中获取最后 4 个字符。

```
NSString *last4Characters = [source substringFromIndex:(source.length - 4)];
NSLog(@"Last 4 Characters:%@",last4Characters);
last4Characters=nil; 
```

如果有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:49:02.357

```
NSString *source = @"0123456789";
NSString *newString = [source substringFromIndex:[source length] - 4];

NSLog(@"%@",newString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T06:49:29.313

代替

```
NSString *lastFour = [source substringToIndex:-4]; 
```

和

```
NSString *lastFour = [source substringFromIndex:[source length] - 4]; 
```

它将返回原始字符串的最后 4 个`string`字符`lastFour string`。

# qt - 用OpenGL重新构建Qt5.0.2，如何与Qt Creator一起使用

> ID：15471060
> 
> 赞同：0
> 
> 时间：2013-03-18T06:43:28.430
> 
> 标签：qt, qt-creator, qmake, qt5

我需要将我的代码从 C++/OpenGL 和 Config.txt 情况移动到 UI 友好空间。有人告诉我在这里尝试 Qt 并将其安装在 Windows 中。

我遇到的问题是它不支持开箱即用的 OpenGL 版本，我必须使用 -opengl 桌面参数进行重建。

第一次这样做，但能够按照说明（以及大量的 Google）进行操作，并且“成功”地构建了它。我现在的问题是我不确定如何使我拥有的文件与 Qt Creator 一起使用。

我将 git 创建的 qt5 文件夹中的所有文件夹复制到 Qt5.0.1/5.0.1/Src 中的 Src 文件夹中，但 hellogl 示例仍然无法构建。

我检查了选项，它指向 Qt5.0.1/5.0.1/msvc2010/bin 中的 qmake，所以我将 qmake.exe 从 qtbase/qmake 复制到该文件夹​​（重命名旧文件夹），现在 Qt Creator 构建我的 Windows 系统上的 hellogl 示例。

我担心的是，我这样做是否正确？我摸索着得到了*一些东西*，但这是我从 git 构建 qt5 后应该采取的方式吗？如果不是，我应该采用什么方式让它与 Qt Creator 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:43:46.530

在 Qt 中使用现代 OpenGL 功能集（后固定功能管道）的典型方法是使用扩展管理员 (GLEW)，它会在 Qt 包含任何 OpenGL 头文件之前找到图形驱动程序支持的所有 OpenGL 函数。

要做到这一点，只需执行以下操作：

1.  如果您还没有，请下载[GLEW](http://glew.sourceforge.net/)（或其他扩展管理员，如果您愿意）并将其安装在您的系统路径中。我会推荐 32 位软件包，因为它更容易使用。

2.  `#include glew.h`在您的源代码中包含可能使用 OpenGL 头的任何其他 Qt 头之前。为了安全起见，请将 glew.h 作为源代码中包含的第一个标头。

3.  在 Qt 项目的 .pro 文件中添加`LIBS += -lGLEW`(mac/linux) 或`LIBS += -lglew32`(windows) 行。

**注意**：在实现使用后固定功能管道设施的应用程序时，请注意使用 Qt OpenGL 包装器。Qt 5 的 OpenGL 包装器都使用 OpenGL ES 2.0 规范运行，当与 OpenGL 3/4 代码交错时可能会导致问题。在 QGLWidget 上执行重绘时，即使 QPainter 也会变得很麻烦，因为它大量使用了固定功能转换堆栈。我目前正在开发一个名为 QGLX 的库，它提供了为符合现代桌面 OpenGL 规范而设计的替代 Qt 包装器。Beta 版有望在今年年底发布，用于 Qt 4 和 Qt 5。

# nsis - 更新进度条的方法

> ID：15471063
> 
> 赞同：0
> 
> 时间：2013-03-18T06:43:50.683
> 
> 标签：nsis

我想在我的 nsis 安装程序中控制进度条。实际上我正在使用[ThreadTimer](http://nsis.sourceforge.net/ThreadTimer_plug-in)插件，但我遇到了很大的问题。ThreadTimer 每 10 秒运行一次函数以更新进度条（将进度条值增加 1%）。问题是它使堆栈崩溃（我可以看到 ThreadTimer 使用与 NSIS 相同的堆栈）。`Crashes stack`意味着当我想从堆栈中获取值时，由于 ThreadTimer 函数操作，该值是错误的。有任何想法吗？也许还有其他方法可以更新进度条？

这些是应该更新进度条的函数/宏。宏`StartProgressBarIntervalUpdate`开始更新进度条，宏`StopProgressBarIntervalUpdate`停止掺杂它。

```
Var /GLOBAL ProgressBarPosition
Var /GLOBAL ProgressBarParentWindow
Var /GLOBAL ProgressBarItem

Function InitProgressBar
    StrCpy $ProgressBarPosition "0"
    FindWindow $ProgressBarParentWindow "#32770" "" $HWNDPARENT
    GetDlgItem $ProgressBarItem $ProgressBarParentWindow 1004
FunctionEnd

Function UpdateProgressBarTimer
    ${If} $ProgressBarPosition >= 30000 ; 100% * 300
        StrCpy $ProgressBarPosition "0"
    ${Endif}
    IntOp $ProgressBarPosition $ProgressBarPosition + 300
    SendMessage $ProgressBarItem ${PBM_SETPOS} $ProgressBarPosition 0
FunctionEnd

!define StartProgressBarIntervalUpdate "!insertmacro StartProgressBarIntervalUpdate"
!macro StartProgressBarIntervalUpdate
    Call InitProgressBar
    GetFunctionAddress $UpdateProgressBarTimerFunctionAddress UpdateProgressBarTimer
    ThreadTimer::Start /NOUNLOAD 20 -1 $UpdateProgressBarTimerFunctionAddress
    Sleep 1000
!macroend

!define StopProgressBarIntervalUpdate "!insertmacro StopProgressBarIntervalUpdate"
!macro StopProgressBarIntervalUpdate
    ThreadTimer::Stop $UpdateProgressBarTimerFunctionAddress
    Sleep 15000
!macroend 
```

以下是使用进度条的部分

```
Var /GLOBAL UpdateProgressBarTimerFunctionAddress
Section BeforeMoveData SEC01
    ${StartProgressBarIntervalUpdate}

    Call core.UnpackExeData
SectionEnd

Section OnMoveData SEC02    
    Call InstallFiles
    Call InstallRegistry
    Call InstallShortcuts

    ${StopProgressBarIntervalUpdate}

    ...

SectionEnd 
```

# javascript - 如何更改表格的字体大小以适合 div

> ID：15471066
> 
> 赞同：0
> 
> 时间：2013-03-18T06:44:00.683
> 
> 标签：javascript, html, web

我有 html

```
<div style="width: 1000px;">
  <table >
  ...
  </table>
</div> 
```

表非常大，并非所有字段都适合 div。如何自动将文本缩小到整个表格放置在一个div中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:33:46.360

如果我正确理解您的问题，您正在尝试将文本放入表格并根据表格大小更改字体大小。这需要使用 em 或 %。

[A List Apart](http://alistapart.com/article/howtosizetextincss)上有一篇很棒的文章。你应该检查一下。

还; 添加[样式表重置](http://meyerweb.com/eric/tools/css/reset/)以确保所有内容在不同的浏览器中看起来都相同。

# database - SQL Server CE - 更新表时出现问题

> ID：15471071
> 
> 赞同：0
> 
> 时间：2013-03-18T06:44:15.123
> 
> 标签：database, vb.net, sql-server-ce

我确定我的问题已在互联网上多次回答，但我无法找到我正在寻找的确切内容。

我正在使用 VB.NET，我的数据库是一个 SQL Server Compact`.SDF`文件。以下是我打开数据库的方法。

```
Private Shared Sub OpenDatabase(ByVal tablename As String)
    If _DBLoaded Then Return

    '// open database connection
    conn = New SqlCeConnection("Data Source = giadatabase.sdf")
    conn.Open()

    '// create command for making extracting data
    cmd = conn.CreateCommand
    cmd.CommandText = "SELECT * FROM [" & tablename & "]"

    '// setup database adapter
    da = New SqlCeDataAdapter(cmd)

    '// create command for inserting/updating database
    cb = New SqlCeCommandBuilder(da)

    '// load dataset
    ds = New DataSet()
    da.Fill(ds)

    '// get the relevant table
    dt = ds.Tables(0)

    _DBLoaded = True
End Sub 
```

当我的应用程序启动时，我运行这个子程序。我相信数据库只需要打开一次。不断重新打开数据库会导致我的应用程序出现性能问题（如果我错了，请纠正我）。

为了在我的列表对象中加载数据，我使用以下内容：

```
Public Shared Function GetList() As List(Of DatabaseListObject)
    OpenDatabase("TestTable")

    '// Make a list of items in database
    Dim ret As New List(Of DatabaseListObject)
    For Each dRow As DataRow In dt.Rows
        ret.Add(New DatabaseListObject(dRow("ID"), dRow("LongName"), dRow("ShortName")))
    Next

    Return ret
End Function 
```

所以我的`GetList`函数确保数据库已经打开，并且数据库总是在我的应用程序的生命周期中打开一次。我的列表对象填充了来自上述函数的数据。

这就是我对数据库进行更改的方式：

```
Public Shared Function AddItem(LongName As String, ShortName As String) As DatabaseListObject
    '// Make changes
    Dim row = dt.NewRow()
    row("LongName") = TimeOfDay.ToString
    row("ShortName") = ShortName
    dt.Rows.Add(row)

    da.Update(ds, dt.TableName)

    Dim newcmd = conn.CreateCommand
    newcmd.CommandText = "SELECT @@IDENTITY;"
    Dim newID As Integer = newcmd.ExecuteScalar()

    Dim item As New DatabaseListObject(newID, LongName, ShortName)
    Return item
End Function 
```

现在我假设数据库是从上面的代码中正确更新的。我表中的`ID`列是自动编号。`GetList`添加行后调用该函数时会出现问题。系统抛出新添加行的 ID 列为 NULL 的错误。而它应该自动添加数字。当我重新启动应用程序时，即从头开始打开数据库，然后`GetList`正确显示自动编号。

显然，`ID`当我添加新行时，表格的列没有被自动编号填充。所以我需要这里的建议。`GetList`每当我调用（将在我的应用程序中经常调用）时，我是否应该总是从头开始打开数据库。如果不是整个数据库，那么至少应该调用哪些代码来正确刷新表，而不会对应用程序造成太多性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:07:21.987

SELECT @@IDENTITY 只能在同一个打开的 Connection 对象上工作，并且 DataAdapter 打开和关闭自己的连接，您必须使用普通的 ADO.NET (cmd.ExecuteNonQuery) 或按照此处所述执行额外代码：[http://blogs。 msdn.com/b/bethmassi/archive/2009/09/15/inserting-master-detail-data-into-a-sql-server-compact-edition-database.aspx](http://blogs.msdn.com/b/bethmassi/archive/2009/09/15/inserting-master-detail-data-into-a-sql-server-compact-edition-database.aspx)

# qt - 重新排序Qobject的连接队列

> ID：15471074
> 
> 赞同：0
> 
> 时间：2013-03-18T06:44:28.117
> 
> 标签：qt, signals, qnetworkaccessmanager, qwebpage

我有一个自定义的 QNetworkAccessManager 和一个 QWebPage 类，现在我想读取 QWebPage 检索到的每个请求的回复数据。

现在我连接了 finished() 信号，但是由于 QWebPage 先连接了它，并且 QWebPage 的第一个 finished() 插槽会从 QNetworkReply 对象中读取所有数据，因此 QNetworkAccessManager 中的插槽根本不会读取任何内容。

那么我可以“插入”一个连接到 QObject 的连接列表，而不是附加它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:20:14.497

问题是，如果你能做到这一点，`QWebPage`将无法从`QNetworkReply`对象中读取数据，因为回复是顺序`QIODevice`的，数据只能读取一次。

我能够处理这个问题的唯一方法是覆盖`QNetworkAccessManager::createRequest`并让它返回一个`QNetworkReply`子类，该子类充当实际回复对象的包装器，它可以捕获传入的数据。

啊，请参阅[如何从 QWebPage 使用的 QNetworkReply 读取数据？](https://stackoverflow.com/questions/4475647/how-to-read-data-from-qnetworkreply-being-used-by-qwebpage)寻求解决方案。

# wordpress - 移动到主站点重定向

> ID：15471075
> 
> 赞同：1
> 
> 时间：2013-03-18T06:44:51.263
> 
> 标签：wordpress, redirect, mobile, themes, wordpress-theming

![这是我的移动网站截图](../Images/e29568fbcda11b085096b10f15ca00f5.png)
我想将我的移动站点切换到主站点。请记住，当您在移动设备上打开 facebook 时，移动版本中的 facebook 视图会发生变化，当您单击“转到主站点”时，它会出现在移动设备中的主站点。我想要的。

而且主要问题是两个链接都是相同的方式

```
main site url is  http://www.yousite.com
mobile site url is  http://www.yousite.com 
```

当您在移动设备中打开时显示移动模板，当我打开桌面时显示主站点模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:29:33.733

我已经在我的网站的早期版本上完成了这项工作，并在这里写了这篇文章：http: [//arleym.com/mobile-device-detection-redirection/](http://arleym.com/mobile-device-detection-redirection/)

基本上，如果有查询字符串，我会忽略一些设备检测。因此“查看桌面版本”链接将避免检测/重定向并为用户提供 cookie。

我使用了这个检测脚本：[http ://detectmobilebrowsers.mobi/](http://detectmobilebrowsers.mobi/)

并像这样修改了我的开关：

```
<?php 

    if(isset($_GET['switch'])){
         setcookie('switch',$_GET['switch']); // set a cookie
    }
    if(!isset($_GET['switch']) && !isset($_COOKIE['switch'])){
         require_once('/server/path/arleym.com/mobile_device_detect.php'); //Andy Moore's script
         mobile_device_detect(true,false,true,true,true,true,true,'
         http://arley.me',false);
    }
?> 
```

视图桌面 url 的作用类似于 href="http://whatever.com?switch=0"

# asp.net - 用不同的 ID 名称在 aspx 中调用 ascx 页面

> ID：15471078
> 
> 赞同：0
> 
> 时间：2013-03-18T06:44:55.837
> 
> 标签：asp.net

我有一个包含设计和代码的 ascx 页面。我想在具有不同 ID 名称的 aspx 页面中的向导控件的每个向导步骤中调用该页面。但是由于每个向导步骤的 ascx 页面中 ascx 页面的 id 都发生了变化，我需要使用不同的 ascx 页面 ID 编写相同的代码。

在 register.aspx 页面中：

```
 <i><asp:WizardStep ID="WizardStep2" runat="server" Title="schooling">
        <div class="content">
            <addr:addr ID="address_acx" runat="server"/> //calling usercontrol with Id "address_ascx"          
        </div>
</i>
</asp:WizardStep> 
```

并在函数后面的代码中获取值：

```
public string[] getASCXvalues()
{

        string school_name = null, sid = null, section = null;
        CheckBox chk = (CheckBox)address_acx.ID .FindControl("chk_school");
        TextBox txt_school = (TextBox)address_acx.FindControl("txt_school");
        if (chk.Checked || address_acx.schoolnames <= 1)
        {
            school_name = txt_school.Text;
            sid = BAL.Class1.getmaxid() + 1;
            int val = Convert.ToInt32(sid.Substring(1, 6)) + 1;
            sid = sid.Substring(0, 1) + val.ToString().PadLeft(6, '0');
        }
        else
        {
            school_name = address_acx.selectedschollname;
            sid = address_acx.selectedschoolcode;
        }
        CheckBox chk_sec = (CheckBox)address_acx.FindControl("chk_section");
        TextBox txt_sec = (TextBox)address_acx.FindControl("txt_section");
        if (chk_sec.Checked || address_acx.sectioncount <= 1)
        {
            section = txt_sec.Text;
        }
        else
        {
            section = address_acx.selectedsec;
        }
        string[] a = new string[10];
        a[0] = address_acx.selectedyear;
        a[1] = address_acx.selectedmandal;
        a[2] = address_acx.selectedvillage;
        a[3] = school_name;
        a[4] = sid;
        a[5] = section;
        return a;        
 } 
```

现在问题出在下一个向导步骤中，我必须使用 ascx 页面的另一个 ID 重新编写上述函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:53:21.880

您可以通过发送用户控件（ascx）作为函数的参数来解决您的问题。

```
public string[] getASCXvalues(UserControl addressControl)
{
        string school_name = null, sid = null, section = null;
        CheckBox chk = (CheckBox)addressControl.FindControl("chk_school");
        TextBox txt_school = (TextBox)addressControl.FindControl("txt_school");
} 
```

# javascript - 在javascript中实现计数器

> ID：15471081
> 
> 赞同：0
> 
> 时间：2013-03-18T06:45:03.260
> 
> 标签：javascript, html

我将在 javascript 中使用 for 循环打印两个字段。第一个字段是名称，第二个字段是下载该文件的链接。该表将动态生成。我想保留一个计数器，说明在生成的表上下载特定文件的次数。

```
 for (i=0; i<resp.items.length; i++) {
            var titulo = resp.items[i].title;
            var fechaUpd = resp.items[i].modifiedDate;
            var userUpd = resp.items[i].lastModifyingUserName;
            var userEmbed = resp.items[i].embedLink;
            var userAltLink = resp.items[i].alternateLink;
            var download = resp.items[i].webContentLink;
            var hold="Download";
            var flag=0;

           <!-- var fileInfo = document.createElement('li');
          <!--  fileInfo.appendChild(document.createTextNode('TITLE: ' + titulo + ' - LAST MODIF: ' + fechaUpd + ' - BY: ' + userUpd +'  url:  ' + hold.link(download)));                
           <!-- document.getElementById('content').appendChild(fileInfo);

            document.write(titulo + "&nbsp;");
            document.write(hold.link(download) + "<br>");
            <!--flag=1;
            }

            <!--if(flag!=1){
            <!--document.write("not found!");
            <!--}
    }); 
```

# java - 使用 Javax.comm 重新枚举 java 中的所有串行设备

> ID：15471084
> 
> 赞同：1
> 
> 时间：2013-03-18T06:45:17.127
> 
> 标签：java, serial-port, enumeration, javax.comm

这是我为设备枚举实现的代码。我能够检测并显示所有连接的串行设备。但是假设我连接了另一个设备，然后尝试调用此功能，它始终显示在第一次运行代码期间连接的设备。

代码片段：

```
public void Listports() {

    Enumeration ports = null;
    ports  = CommPortIdentifier.getPortIdentifiers();
    CommPortIdentifier portId = null;

    {
        while (ports.hasMoreElements()) {

             portId = (CommPortIdentifier) ports.nextElement();

            if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL){                    

                System.out.println(portId.getName());

            }
        }
    }
} 
```

即例如，在函数的第一次调用中，显示COM1和COM3。

现在假设，连接的串行设备加载到 COM27 上。因此，如果我们重新运行代码，它只会显示 COM1 和 COM3，而不会显示 COM27。

另一种情况，在我第一次运行代码之前，在 COM27 上加载了一个串行设备。现在第一次运行它显示COM1，COM3，COM27。现在删除COM27设备并重新运行上面的代码，它仍然显示COM27已连接。

非常感谢这方面的任何帮助。

谢谢，阿比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:11:23.237

[通讯端口 API](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/CommPortIdentifier.html "CommPortIdentifier API")

你只是得到一个列表 op comm 端口，然后你可以尝试如果端口是拥有的，也就是被某些应用程序使用 isCurrentlyOwned()

基本上只是迭代一个列表不会告诉你列表中的任何内容，直到你进一步测试它。

# android - Android：在视频捕获期间在视频上添加颜色叠加效果

> ID：15471086
> 
> 赞同：4
> 
> 时间：2013-03-18T06:45:25.590
> 
> 标签：android, video-capture

如何在视频捕获过程中为视频添加颜色叠加效果？有没有可用的教程？我可以使用哪个库？

我在这个应用程序中有一个简单的任务要做。On Button click 在某些帧上设置颜色效果。

我的代码

```
mCamera = getCameraInstance(); 
mCamera.setPreviewCallback(new PreviewCallback() { 
    @Override 
    public void onPreviewFrame(byte[] data, Camera camera) { 
        Log.d("HFI","Length: "+data.length); 
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:49:04.917

您将不得不操作您正在捕获/捕获的视频的每一帧。去看看[这个](https://stackoverflow.com/questions/8620560/video-processing-in-android)问题和[这个](https://stackoverflow.com/questions/11544877/really-confused-with-setpreviewcallback-in-android-need-advice)问题，它应该有助于解决你的问题。

# javascript - Requirejs 为什么以及何时使用 shim 配置

> ID：15471088
> 
> 赞同：100
> 
> 时间：2013-03-18T06:45:31.513
> 
> 标签：javascript, requirejs, amd, shim, es5-shim

我从这里[API阅读了](http://requirejs.org/docs/api.html#config-shim)**requirejs文档**

```
requirejs.config({
    shim: {
        'backbone': {
            //These script dependencies should be loaded before loading
            //backbone.js
            deps: ['underscore', 'jquery'],
            //Once loaded, use the global 'Backbone' as the
            //module value.
            exports: 'Backbone'
        },
        'underscore': {
            exports: '_'
        },
        'foo': {
            deps: ['bar'],
            exports: 'Foo',
            init: function (bar) {
                //Using a function allows you to call noConflict for
                //libraries that support it, and do other cleanup.
                //However, plugins for those libraries may still want
                //a global. "this" for the function will be the global
                //object. The dependencies will be passed in as
                //function arguments. If this function returns a value,
                //then that value is used as the module export value
                //instead of the object found via the 'exports' string.
                return this.Foo.noConflict();
            }
        }
    }
}); 
```

但我没有得到**垫片**的一部分。为什么我应该使用 shim 以及我应该如何配置，我可以得到更多的澄清

请任何人举例说明为什么以及何时应该使用垫片。谢谢。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-18T20:50:55.753

shim 的主要用途是与不支持 AMD 的库一起使用，但您需要管理它们的依赖关系。例如，在上面的 Backbone 和 Underscore 示例中：您知道 Backbone 需要 Underscore，因此假设您这样编写代码：

```
require(['underscore', 'backbone']
, function( Underscore, Backbone ) {

    // do something with Backbone

} 
```

RequireJS 将启动对 Underscore 和 Backbone 的异步请求，但您*不知道哪个会先返回*，因此 Backbone 可能会在 Underscore 加载之前尝试对其执行某些操作。

**注意：**这个下划线/主干示例是在这两个库都支持 AMD 之前编写的。但该原则适用于当今任何不支持 AMD 的库。

“init”钩子可以让你做其他高级的事情，例如，如果一个库通常会将两个不同的东西导出到全局命名空间中，但你想在一个命名空间下重新定义它们。或者，也许您想对正在加载的库中的方法进行猴子修补。

更多背景：

*   [升级到 RequireJS 2.0](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#shim-config-)提供了有关订单插件过去如何尝试解决此问题的一些历史记录。
*   [请参阅Aaron Hardy](http://aaronhardy.com/javascript/javascript-architecture-requirejs-dependency-management/)的这篇文章的“加载非模块”部分以获得另一个很好的描述。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2015-01-22T18:52:09.123

根据 RequireJS API 文档，shim 可以让你

> 为不使用 define() 声明依赖关系和设置模块值的旧的传统“浏览器全局”脚本配置依赖关系、导出和自定义初始化。

**- 配置依赖项**

假设您有 2 个 javascript 模块（moduleA 和 moduleB），其中一个（moduleA）依赖于另一个（moduleB）。这两个对于您自己的模块都是必需的，因此您可以在 require() 或 define() 中指定依赖项

```
require(['moduleA','moduleB'],function(A,B ) {
    ...
} 
```

但是由于 require 本身遵循 AMD，因此您不知道会提前获取哪一个。这就是 shim 来拯救的地方。

```
require.config({
    shim:{
       moduleA:{
         deps:['moduleB']
        } 
    }

}) 
```

这将确保在加载 moduleA 之前始终获取 moduleB。

**- 配置出口**

Shim 导出告诉 RequireJS 全局对象（窗口，当然，假设您在浏览器中）上的哪个成员是实际的模块值。假设 moduleA 将自己添加到`window`as 'modA' 中（就像 jQuery 和 underscore 分别作为 $ 和 _ 一样），然后我们将导出值设为 'modA'。

```
require.config({
    shim:{
       moduleA:{
         exports:'modA'
        } 
    } 
```

它将为 RequireJS 提供对该模块的本地引用。全局 modA 仍将存在于页面上。

**- 旧的“浏览器全局”脚本的自定义初始化**

这可能是 shim 配置最重要的特性，它允许我们添加“浏览器全局”、“非 AMD”脚本（也不遵循模块化模式）作为我们自己模块中的依赖项。

假设 moduleB 是普通的旧 javascript，只有两个函数 funcA() 和 funcB()。

```
function funcA(){
    console.log("this is function A")
}
function funcB(){
    console.log("this is function B")
} 
```

尽管这两个函数都在窗口范围内可用，但 RequireJS 建议我们通过它们的全局标识符/句柄来使用它们以避免混淆。所以将垫片配置为

```
shim: {
    moduleB: {
        deps: ["jquery"],
        exports: "funcB",
        init: function () {
            return {
                funcA: funcA,
                funcB: funcB
            };
        }
    }
} 
```

init 函数的返回值用作模块导出值，而不是通过“导出”字符串找到的对象。这将允许我们在我们自己的模块中使用 funcB 作为

```
require(["moduleA","moduleB"], function(A, B){
    B.funcB()
}) 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-05-19T09:47:31.353

您必须在 requirejs.config 中添加路径才能声明，例如：

```
requirejs.config({
    paths: {
          'underscore' : '.../example/XX.js' // your JavaScript file
          'jquery' : '.../example/jquery.js' // your JavaScript file
    }
    shim: {
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        'underscore': {
            exports: '_'
        },
        'foo': {
            deps: ['bar'],
            exports: 'Foo',
            init: function (bar) {
                return this.Foo.noConflict();
            }
        }
    }
}); 
```

# templates - 为什么在 reinterpret_cast 之后需要 qDebug()？

> ID：15471091
> 
> 赞同：0
> 
> 时间：2013-03-18T06:45:43.200
> 
> 标签：templates, floating-point, reinterpret-cast, qdebug

在模板函数中，T 是类型名。这里的 T 是浮动的。我有一个像ox41480000这样的乌龙。根据 IEEE R32.24，ox41480000 是 12.5 作为浮点数。所以我用它来将 qlonglong 转换为 float: `T d =*reinterpret_cast<T*>(data);`where `*data=0x41480000`。

演员表之后，我使用`qDebug()<<d`; 打印 d 并显示 12.5 这是正确的。

但是如果注释掉 qDebug 行，d 的值就会变得很奇怪，像 1.485e-12！为什么？？？（我还尝试使用 QMessageBox 打印`d`得到与 qDebug 相同的结果。）

```
 template<typename T>

void canframeData::onRevData(qulonglong *data, unsigned int dlc)
{

    T d;

    `qulonglong revdata=*data;`
    qlonglong mask;
    mask = (m_size==(sizeof(d)<<3)? -1 : ((1ull<<m_size)-1));

    revdata=(revdata>>m_offset)&mask;
    d =*reinterpret_cast<T* >(&revdata);
    qDebug()<<"d="<<d;// get a wrong value if delete this line
    (m_pdata->*(m_pdata->pSetValue))(QVariant(d));
} 
```

# html - 无法在 IE 中打开 PDF

> ID：15471100
> 
> 赞同：0
> 
> 时间：2013-03-18T06:46:22.177
> 
> 标签：html, internet-explorer

我的 html 页面中有一个 pdf 链接。这就像是 ，

```
<a href="http://www.abc.com/tandc.pdf" target="_blank">Click here</a> 
```

单击此链接将在除 IE 之外的所有浏览器的新选项卡中打开 pdf。在 IE 中无法打开 pdf。在 IE 中，新选项卡正在打开，然后出现错误窗口“Internet Explorer 已停止工作”。关闭此错误框将引发网站恢复错误。那么如何在 IE 中打开此 pdf？

# python - Django 返回 http 提前刷新（分块响应）

> ID：15471103
> 
> 赞同：5
> 
> 时间：2013-03-18T06:46:31.810
> 
> 标签：python, django, http, chunked-encoding, http-chunked

我有一个算法，它等待近 5 秒来生成响应，我想在用户发送请求后立即向用户发送一个 ack（http 200），告诉他他的请求已收到并等待 5 秒。

生成器功能：

```
def chunked_res():
    yield "Chunk 1"

    stop = time.time() + 5    # wait for 5 seconds
    while time.time() < stop:
        pass

    yield "Chunk 2" 
```

在某些方面：

```
response = HttpResponse ( chunked_res() )
response['Connection'] = 'close'
response['Transfer-Encoding'] = 'chunked'
response['status'] = 200
return response 
```

**浏览器中的响应：**

"传输编码: 分块\n状态: 200\n连接: 关闭\n内容类型: text/html; charset=utf-8\n\nChunk 1Chunk 2"

**问题：** 我得到了所需的响应（Chunk 1，Chunk 2），但在 5 秒后。我想先发送“Chunk 1”，然后在 5 秒后发送“Chunk 2”（更新响应）。是否有任何特定的设置/更改来实现这一点？

**更新：**

Django = 1.4 蟒蛇 = 2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:59:14.793

他们刚刚在 django 1.5 中添加了[StreamingHttpResponse ，并且通过在早期版本 (<= 1.4) 中](https://docs.djangoproject.com/en/dev/ref/request-response/#streaminghttpresponse-objects)[传递迭代器](https://docs.djangoproject.com/en/dev/ref/request-response/#passing-iterators)，您可以流式传输（或“块”）数据。

```
def chunked_res():
    yield "Chunk 1"

    time.sleep(5)  # wait for 5 seconds

    yield "Chunk 2"

def myview(request):
    g = chunked_res()
    return HttpResponse(g) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T11:50:51.700

实际上，解决方案是使第一个块大小至少为 1024 个字符，以便浏览器逐步显示。

[如何使用 Django 流式传输 HttpResponse](https://stackoverflow.com/questions/2922874/how-to-stream-an-httpresponse-with-django)

```
def chunked_res():
    yield "Chunk 1"
    yield " " * 1024  # Encourage browser to render incrementally (either 1024 or 1024-7{length of "chunk 1"} = 1017)

    time.sleep(5)  # wait for 5 seconds

    yield "Chunk 2"

def myview(request):
    g = chunked_res()
    return HttpResponse(g) 
```

如果您使用的是**nginx**，那么您必须设置**proxy_buffering** =off，以便服务器将响应刷新为 1024 数据块就绪。 [http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffer_size)

**适用于：** HTTP/1.0 和 HTTP/1.1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-12T03:37:18.917

你真的想避免这样做......

```
stop = time.time() + 5    # wait for 5 seconds
while time.time() < stop:
    pass 
```

这将导致您的进程的 CPU 使用率在 5 秒内飙升至 100%，这对于 Web 应用程序来说是一个巨大的数量。在共享托管环境中，您可能会从托管服务提供商处收到一封令人讨厌的电子邮件，并且如果您拥有自己的服务器，那么您在循环中消耗的那些周期可以有效地部署在处理其他请求中。改为这样做：

```
time.sleep(5) 
```

这将使线程（或进程）休眠 5 秒，然后内核可以自由地安排其他任务，或者如果没有其他事情可做，则使 CPU 休眠（节省电力和冷却成本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-14T15:47:35.483

只是澄清其他答案：对于 Django 1.5+，您*必须*使用[StreamingHttpResponse](https://docs.djangoproject.com/en/dev/ref/request-response/#streaminghttpresponse-objects)。常规 HttpResponse 将收集完整的响应并仅在完成后返回。

```
from django.http import StreamingHttpResponse

def chunked_res():
    yield "Chunk 1"
    yield " " * 1024  # Encourage server to begin transferring and browser to begin rendering

    time.sleep(5)     # wait for 5 seconds

    yield "Chunk 2"

def myview(request):
    return StreamingHttpResponse(chunked_res()) 
```

# forms - belongs_to 关联导轨的嵌套属性

> ID：15471104
> 
> 赞同：14
> 
> 时间：2013-03-18T06:46:36.917
> 
> 标签：forms, ruby-on-rails-3.2, has-many, belongs-to, rails-models

我有两个模型，投诉和公司。投诉`belongs_to`并`accepts_nested_attributes`为公司和公司`has_many`投诉。

```
# Models

class Complaint < ActiveRecord::Base
  attr_accessible :complaint, :date, :resolved

  belongs_to :user, :class_name => 'User', :foreign_key => 'id'
  belongs_to :company, :class_name => 'Company', :foreign_key => 'id'
  has_many :replies

  accepts_nested_attributes_for :company

end

class Company < ActiveRecord::Base
  attr_accessible :name

  has_many :complaints, :class_name => 'Complaint', :foreign_key => 'id'
  has_many :branches, :class_name => 'Branch', :foreign_key => 'id'
  belongs_to :industry

end 
```

在投诉控制器中，我尝试以新方法建立公司。

```
# Complaint Controller

class ComplaintsController < ApplicationController
...
def new
    @complaint = Complaint.new
    @complaint.build_company

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @complaint }
    end
  end
...
end 
```

在表单中，我添加了一个用于向公司添加名称属性的字段。

```
# Complaint Form

<%= form_for(@complaint) do |f| %>
  <% if @complaint.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@complaint.errors.count, "error") %> prohibited this complaint from being saved:</h2>

      <ul>
      <% @complaint.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :complaint %><br />
    <%= f.text_area :complaint, :rows => 5 %>
  </div>
  <div class="field">
    <%= f.label :date %><br />
    <%= f.datetime_select :date %>
  </div>

  <% if current_user.try(:admin?) %>
    <div class="field">
      <%= f.label :resolved %><br />
      <%= f.check_box :resolved %>
    </div>
  <% end %>

  <%= fields_for :company do |company| %>
    <div class="field">
      <%= company.label :name, 'Company' %>
      <%= company.text_field :name %>
    </div>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

表单提交但仅保存投诉。公司的用户输入被忽略。为什么这不会创建一个新公司？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-17T02:42:13.333

我的错误在于形式。我错过了`f.`之前的`fields_for :company`

```
<%= f.fields_for :company do |company| %> 
```

# crystal-reports - 如何设计水晶报表以适应信头模板中的数据

> ID：15471106
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:46:45.960
> 
> 标签：crystal-reports, crystal-reports-2010

我有一个信头，应该打印来自水晶报告的数据。将信头插入打印机并生成并打印水晶报告后，数据应适合信头字段。

例如：假设信头有一个名为公司名称的字段，所以我应该设计水晶报表字段以使数据与模板字段对齐。喜欢公司名称：ABC公司

是否有任何适当的方法来设计水晶报表来满足这一要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:28:31.423

您可以实际测量起始位置与页面顶部和左侧的距离（请记住，Crystal 本身会添加边距，因此设计器中的 1" 是 1" 加上纸上的边距大小）。您几乎肯定也必须对其进行调整。

# java - 等到得到我的 id 和我的朋友 id facebook

> ID：15471107
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:00.537
> 
> 标签：java, android

我想等到我得到我的用户名和我的 id，也等到我在 facebook 上得到我朋友的用户名和用户 id。我该如何实施？

我在这两个请求之后编写了一个代码，但是有时一个请求没有完成，并且我在其中一个变量中得到 null（例如 userName 变量）

因此我想等到这两个请求完成。

或者也许还有另一个更好的实现？

这是我的代码：

```
 final CountDownLatch isForFinish = new CountDownLatch(1);

 private class SessionStatusCallback implements Session.StatusCallback {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if( session.isOpened() ){

                Request.executeMyFriendsRequestAsync(session, new Request.GraphUserListCallback() {

                    @Override
                    public void onCompleted(List<GraphUser> users, Response response) {

                        for (int i=0;i<users.size();i++){

                            friendsId+= (users.get(i).getId()+",");
                            friendsName+=(users.get(i).getName()+",");

                        }

                        isForFinish.countDown();

                    }
                });

                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    @Override
                    public void onCompleted(GraphUser user, Response response) {

                        String userName = user.getName();
                        String userId = user.getId();

                        Intent i = new Intent(getApplicationContext(), TabMainActivity.class);
                        String email=null;
                        try {
                            email = (String) user.getInnerJSONObject().getString("email");
                        } catch (JSONException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                        if(email!=null){

                            String newemail=new String(email);
                            newemail = email.replace("@", "_");
                            newemail = newemail.replace(".", "_");

                            TelephonyManager mTelephonyMgr;    
                             mTelephonyMgr = (TelephonyManager) getSystemService  
                               (Context.TELEPHONY_SERVICE);     

                             String phoneNumber = mTelephonyMgr.getLine1Number();  

                            String password = "facebook";

                            ParseUser Puser = new ParseUser();
                            Puser.setUsername(userId);
                            Puser.setPassword("facebook");
                            Puser.setEmail(email);
                            Puser.put("Name", userName);

                            try {
                                isForFinish.await();
                            } catch (InterruptedException e1) {
                                // TODO Auto-generated catch block
                                e1.printStackTrace();
                            }
                            Puser.put("friendsId",friendsId );
                            Puser.put("friendsName",friendsName );

                            try {
                                Puser.signUp();
                                ParseObject saleObj =new ParseObject("sale_"+idOfUser);
                                saleObj.saveInBackground();
                                ParseObject deliverObj =new ParseObject("deliver_"+idOfUser);
                                deliverObj.saveInBackground();
                                ParseObject group =new ParseObject("group_"+idOfUser);
                                group.saveInBackground();
                                ParseObject freind =new ParseObject("freind"+idOfUser);
                                freind.saveInBackground();
                            } catch (ParseException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                            i.putExtra("friendsId", friendsId);
                            i.putExtra("emailOwner", newemail);
                            i.putExtra("phone", phoneNumber);
                            i.putExtra("email",email  );
                            i.putExtra("password",password  );
                            i.putExtra("id",userId  );
                            i.putExtra("name",userName  );

                            startActivity(i);

                        }
                    }
                });
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:42:56.180

使用 Android Facebook 3.0 设置 Fragment 以使用本教程管理状态

[https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)

您可以使用预建的 facebook 登录按钮也可以使用 xml 登录

```
<com.facebook.widget.LoginButton
    android:id="@+id/authButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="51dp" /> 
```

然后要么使用 Session StatusCallback

[https://developers.facebook.com/docs/reference/android/3.0/Session.StatusCallback](https://developers.facebook.com/docs/reference/android/3.0/Session.StatusCallback) 或您在上一个教程的片段中创建的覆盖，您可以发起调用来检索您的朋友，看起来像这样

```
void getFriendsWithApp(final Intent intent){
       final ProgressDialog mDialog = new ProgressDialog(this);
       mDialog.setMessage("Loading...");
       mDialog.setCancelable(false);
       mDialog.show();
       String fqlQuery = "SELECT uid, name, pic_square FROM user WHERE uid IN " +
              "(SELECT uid2 FROM friend WHERE uid1 = me())";
        Bundle params = new Bundle();
        params.putString("q", fqlQuery);
        Session session = Session.getActiveSession();
        Request request = new Request(session,
            "/fql",                         
            params,                         
            HttpMethod.GET,                 
            new Request.Callback(){         
                public void onCompleted(Response response) {
                    try {
                        mDialog.dismiss();
                        Type listType = new TypeToken<ArrayList<Friend>>(){}.getType();
                        Utils.friends = new Gson().fromJson(response.getGraphObject().getInnerJSONObject().getJSONArray("data").toString(), listType);
                        startActivity(intent);
//This is where you would do what you want after you retrieve your json with friends
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }                  
        }); 
      Request.executeBatchAsync(request);          
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:12:52.517

对于依赖线程，您可以使用倒计时锁存器：http: [//developer.android.com/reference/java/util/concurrent/CountDownLatch.html](http://developer.android.com/reference/java/util/concurrent/CountDownLatch.html)

这是一个例子：

[http://www.javacodegeeks.com/2011/09/java-concurrency-tutorial.html](http://www.javacodegeeks.com/2011/09/java-concurrency-tutorial.html)

# android - 重新启动android设备后重新启动应用程序面临问题

> ID：15471112
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:13.140
> 
> 标签：android, json, nullpointerexception, localhost

我正在使用 json 将我的应用程序连接到本地服务器。在我的应用程序中，用户可以登录，并且登录的用户可以看到来自不同网站的评论，例如 google+、yahoo，这些评论存储在本地服务器的数据库中。一切正常，但唯一的问题是在我尝试再次启动我的应用程序时重新启动我的 android 设备后，它向我显示一条消息“不幸的是，您的应用程序已停止”并且我的应用程序正在关闭。

这是我的 logcat 错误：

```
03-18 15:06:39.747: E/AndroidRuntime(1182): FATAL EXCEPTION: main
03-18 15:06:39.747: E/AndroidRuntime(1182): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidhive/com.example.androidhive.DashboardActivity}: java.lang.NullPointerException
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.os.Looper.loop(Looper.java:137)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at dalvik.system.NativeStart.main(Native Method)
03-18 15:06:39.747: E/AndroidRuntime(1182): Caused by: java.lang.NullPointerException
03-18 15:06:39.747: E/AndroidRuntime(1182):     at com.example.androidhive.DashboardActivity.onCreate(DashboardActivity.java:127)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.Activity.performCreate(Activity.java:5008)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-18 15:06:39.747: E/AndroidRuntime(1182):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-18 15:06:39.747: E/AndroidRuntime(1182):     ... 11 more 
```

我的dashboardActivity 类是：

 *公共类 DashboardActivity 扩展 ListActivity {

```
ListView lv;
ListAdapter adapter;
ProgressDialog pDialog;
UserFunctions userFunctions;
Button btnLogout;
Spinner clientsSpinner;
Spinner sitesSpinner;   
Button txFB;
Button txTW;
TextView title;

static String dealer = "dealer_rater";
static String google = "google_places";
static String twitter = "Twitter";
static String facebook = "Facebook";
static int incr;
static int no;
static int review_length;
static int length = 90;
int review_profile_id;
JSONArray review;
JSONArray mentions;
JSONArray profile;

int x = 0;
ArrayAdapter<String> heightUnitAdapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Check login status in database
    userFunctions = new UserFunctions();
    if (userFunctions.isUserLoggedIn(getApplicationContext())) {
        setContentView(R.layout.dashboard);
        btnLogout = (Button) findViewById(R.id.btnLogout);

        clientsSpinner = (Spinner) findViewById(R.id.spinnerTitle1);
        sitesSpinner = (Spinner) findViewById(R.id.spinnerTitle2);
        txFB = (Button) findViewById(R.id.btnFB);
        txTW = (Button) findViewById(R.id.btnTW);
        profile = LoginActivity.profiles;

        title = (TextView) findViewById(R.id.title);            

        Typeface myTypeface = Typeface.createFromAsset(this.getAssets(),
                "ArchivoNarrow-Regular.ttf");       
        btnLogout.setTypeface(myTypeface);

        title.setTypeface(myTypeface);

        String[] heightunit = new String[10];               
        heightunit[0] = "All Reviews";
        heightunit[1] = "Dealer Rate";
        heightunit[2] = "Google+ Local";

        heightUnitAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, heightunit);
        sitesSpinner.setAdapter(heightUnitAdapter);

        ArrayAdapter<String> clientadapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item);
        for (int i = -1; i < profile.length()+1; i++) {
            try {
                x++;

                if(i==-1){
                //  array_spinner[i+1] = "All Profiles";
                    clientadapter.add("All Profiles");
                }else { 
                    JSONObject c = profile.getJSONObject(i);
                String client_name = c
                        .getString(LoginActivity.TAG_REVIEWS_PRIOFILE_NAME);
                clientadapter.add(client_name);
            //  array_spinner[i+1] = client_name;
                }
            } catch (JSONException e) {

                e.printStackTrace();
            }

        }
        final String[] str = new String[] {
                LoginActivity.TAG_REDIRECT,
                LoginActivity.TAG_URL,
                LoginActivity.TAG_AUTHOR,
                LoginActivity.TAG_RATING,
                LoginActivity.TAG_DATE,
                LoginActivity.TAG_REVIEW };
        final int[] place = new int[] {R.id.link, R.id.urlImage,R.id.author, R.id.rating, 
                R.id.date, R.id.review, };

        // clientadapter.setDropDownViewResource(R.layout.spinner_item);
        clientsSpinner.setAdapter(clientadapter);
        clientsSpinner
                .setOnItemSelectedListener(new OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> arg0,
                            View view, int i, long arg3) {
                        int color = getResources().getColor(R.drawable.white);
                        ((TextView) arg0.getChildAt(0)).setTextColor(color);
                        Typeface myTypeface = Typeface.createFromAsset(getApplicationContext().getAssets(),
                                "ArchivoNarrow-Regular.ttf");       
                        ((TextView) arg0.getChildAt(0)).setTypeface(myTypeface);
                        sitesSpinner.setSelection(0);                           

                            String selectedClientName = (String) clientsSpinner
                                        .getSelectedItem();
                                for (int k = 0; k < profile.length(); k++) {
                                    // Storing each json item in variable
                                    try {
                                        JSONObject c = profile.getJSONObject(k);
                                        String client_name = c
                                                .getString(LoginActivity.TAG_REVIEWS_PRIOFILE_NAME);
                                        if (selectedClientName.equals(client_name)) {
                                            review_profile_id = Integer.parseInt(c
                                                    .getString(LoginActivity.TAG_REVIEWS_PRIOFILE_ID));
                                        }
                                    } catch (JSONException e) {

                                        e.printStackTrace();
                                    }
                                }
                            review = LoginActivity.reviews;
                            ArrayList<HashMap<String, String>> listItems = new ArrayList<HashMap<String, String>>();

                            // RatingBar ratingBar = (RatingBar)
                            // findViewById(R.id.rating);
                            for (int j = 0; j < review.length(); j++) {
                                try {
                                    JSONObject c = review.getJSONObject(j);                                     
                                    {
                                        HashMap<String, String> map = new HashMap<String, String>();
                                        int review_profile_id2 = Integer.parseInt(c
                                                .getString(LoginActivity.TAG_REVIEWS_PRIOFILE_ID));
                                        if (review_profile_id == review_profile_id2) {
                                        String url = c
                                                .getString(LoginActivity.TAG_URL);
                                        String author = c
                                                .getString(LoginActivity.TAG_AUTHOR);
                                        String author1 =  Html.fromHtml(author).toString();
                                        String review1 = c
                                                .getString(LoginActivity.TAG_REVIEW);
                                        String review =  Html.fromHtml(review1).toString();
                                        String date = c
                                                .getString(LoginActivity.TAG_DATE);
                                        String rating = c
                                                .getString(LoginActivity.TAG_RATING);                                           
                                        String link_raw  = c.getString(LoginActivity.TAG_REDIRECT);
                                        String link =  Html.fromHtml(link_raw).toString();
                                        if (!review.equals("null")) {
                                            if (url.equals(dealer)) {
                                                map.put("review", review);
                                                map.put("author", author);
                                                map.put("date", date);
                                                map.put("rating", rating);
                                                map.put("service", link);
                                                map.put("url", Integer.toString(dealer_image));

                                                listItems.add(map);

                                            } else if (url.equals(google)) {
                                                map.put("review", review);
                                                map.put("author", author);
                                                map.put("date", date);
                                                map.put("rating", rating);
                                                map.put("service", link);
                                                map.put("url", Integer.toString(google_image));

                                                listItems.add(map);

                                            } 

                                        }
                                        }
                                    }
                                } catch (JSONException e) {
                                    e.printStackTrace();
                                }
                            }                           

                            // Getting adapter
                            adapter = new SimpleAdapter(DashboardActivity.this,
                                    listItems, R.layout.list_item, str, place);
                            ((SimpleAdapter) adapter)
                                    .setViewBinder(new MyBinder());
                            setListAdapter(adapter);

                    }

                    public void onNothingSelected(AdapterView<?> arg0) {
                    }
                });

            sitesSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

                public void onItemSelected(AdapterView<?> arg0, View view, int l,
                        long arg3) {
                    if (clientsSpinner.getSelectedItemPosition() == 0) {
                    int color = getResources().getColor(R.drawable.white);
                    ((TextView) arg0.getChildAt(0)).setTextColor(color);
                    Typeface myTypeface = Typeface.createFromAsset(getApplicationContext().getAssets(),
                            "ArchivoNarrow-Regular.ttf");       
                    ((TextView) arg0.getChildAt(0)).setTypeface(myTypeface);
                    int a = sitesSpinner.getSelectedItemPosition();

                    ArrayList<HashMap<String, String>> listItems = new ArrayList<HashMap<String, String>>();
                    switch (a) {
                    case (0):

                                review = LoginActivity.reviews;                                             
                                for (int i = 0; i < review.length(); i++) {
                                    try {
                                        JSONObject c = review
                                                .getJSONObject(i);
                                        {
                                            HashMap<String, String> map = new HashMap<String, String>();
                                            String url = c
                                                    .getString(LoginActivity.TAG_URL);
                                            String author = c
                                                    .getString(LoginActivity.TAG_AUTHOR);
                                            String author1 =  Html.fromHtml(author).toString();
                                            String date = c
                                                    .getString(LoginActivity.TAG_DATE);
                                            String review1 = c
                                                    .getString(LoginActivity.TAG_REVIEW);
                                            String review =  Html.fromHtml(review1).toString();
                                            String rating = c
                                                    .getString(LoginActivity.TAG_RATING);
                                            String link_raw  = c.getString(LoginActivity.TAG_REDIRECT);
                                            String link =  Html.fromHtml(link_raw).toString();

                                            if (!review
                                                    .equals("null")) {
                                                if (url.equals(dealer)) {
                                                    map.put("review",
                                                            review);
                                                    map.put("author", author);
                                                    map.put("date",
                                                            date);
                                                    map.put("rating",
                                                            rating);
                                                    map.put("service", link);
                                                    map.put("url", Integer.toString(dealer_image));

                                                    listItems
                                                            .add(map);
                                                } else if (url
                                                        .equals(google)) {
                                                    map.put("review",
                                                            review);
                                                    map.put("author", author);
                                                    map.put("date",
                                                            date);
                                                    map.put("rating",
                                                            rating);
                                                    map.put("service", link);
                                                    map.put("url", Integer.toString(google_image));

                                                    listItems
                                                            .add(map);
                                                } 
                                            }
                                        }
                                    } catch (JSONException e) {
                                        e.printStackTrace();
                                    }
                                }                                                               

                                // Getting adapter
                                adapter = new SimpleAdapter(
                                        DashboardActivity.this,
                                        listItems,
                                        R.layout.list_item, str,
                                        place);
                                ((SimpleAdapter) adapter)
                                        .setViewBinder(new MyBinder());
                                setListAdapter(adapter);
                                break;
                    case (1):
                        review = LoginActivity.reviews;                                 
                    for (int i = 0; i < review.length(); i++) {

                        try {
                            JSONObject c = review
                                    .getJSONObject(i);
                            String url = c
                                    .getString(LoginActivity.TAG_URL);
                            HashMap<String, String> map = new HashMap<String, String>();
                             {
                                if (url.equals(dealer)) {
                                    String review1 = c
                                            .getString(LoginActivity.TAG_REVIEW);
                                    String review =  Html.fromHtml(review1).toString();
                                    String author = c
                                            .getString(LoginActivity.TAG_AUTHOR);
                                    String date = c
                                            .getString(LoginActivity.TAG_DATE);
                                    String rating = c
                                            .getString(LoginActivity.TAG_RATING);
                                    String link_raw  = c.getString(LoginActivity.TAG_REDIRECT);
                                    String link =  Html.fromHtml(link_raw).toString();

                                    if (!review
                                            .equals("null")) {
                                        map.put("review",
                                                review);
                                        map.put("author", author);
                                        map.put("date",
                                                date);
                                        map.put("rating",
                                                rating);
                                        map.put("service", link);
                                        map.put("url", Integer.toString(dealer_image));

                                        listItems
                                                .add(map);
                                    }
                                }
                            }
                        } catch (JSONException e) {
                            e.printStackTrace();
                        }
                    }                   
                    // Getting adapter
                    adapter = new SimpleAdapter(
                            DashboardActivity.this,
                            listItems,
                            R.layout.list_item, str,
                            place);
                    ((SimpleAdapter) adapter)
                            .setViewBinder(new MyBinder());
                    setListAdapter(adapter);
                    break;

                    }
                    }
                    else{
                        int color = getResources().getColor(R.drawable.white);
                        ((TextView) arg0.getChildAt(0)).setTextColor(color);
                        Typeface myTypeface = Typeface.createFromAsset(getApplicationContext().getAssets(),
                                "ArchivoNarrow-Regular.ttf");       
                        ((TextView) arg0.getChildAt(0)).setTypeface(myTypeface);
                        int a = sitesSpinner.getSelectedItemPosition();

                        ArrayList<HashMap<String, String>> listItems = new ArrayList<HashMap<String, String>>();
                        switch (a) {
                        case (0):

                                    review = LoginActivity.reviews;                                             
                                    for (int i = 0; i < review.length(); i++) {
                                        try {
                                            JSONObject c = review
                                                    .getJSONObject(i);
                                            int review_profile_id2 = Integer.parseInt(c
                                                    .getString(LoginActivity.TAG_REVIEWS_PRIOFILE_ID));
                                            if (review_profile_id == review_profile_id2){
                                                HashMap<String, String> map = new HashMap<String, String>();
                                                String url = c
                                                        .getString(LoginActivity.TAG_URL);
                                                String author = c
                                                        .getString(LoginActivity.TAG_AUTHOR);
                                                String author1 =  Html.fromHtml(author).toString();
                                                String date = c
                                                        .getString(LoginActivity.TAG_DATE);
                                                String review1 = c
                                                        .getString(LoginActivity.TAG_REVIEW);
                                                String review =  Html.fromHtml(review1).toString();
                                                String rating = c
                                                        .getString(LoginActivity.TAG_RATING);
                                                String link_raw  = c.getString(LoginActivity.TAG_REDIRECT);
                                                String link =  Html.fromHtml(link_raw).toString();

                                                if (!review
                                                        .equals("null")) {
                                                    if (url.equals(dealer)) {
                                                        map.put("review",
                                                                review);
                                                        map.put("author", author);
                                                        map.put("date",
                                                                date);
                                                        map.put("service", link);
                                                        map.put("rating",
                                                                rating);
                                                        map.put("url", Integer.toString(dealer_image));

                                                        listItems
                                                                .add(map);
                                                    } else if (url
                                                            .equals(google)) {
                                                        map.put("review",
                                                                review);
                                                        map.put("author", author);
                                                        map.put("date",
                                                                date);
                                                        map.put("rating",
                                                                rating);
                                                        map.put("service", link);
                                                        map.put("url", Integer.toString(google_image));

                                                        listItems
                                                                .add(map);
                                                    } 

                                                }
                                            }
                                        } catch (JSONException e) {
                                            e.printStackTrace();
                                        }
                                    }
                                    // Getting adapter
                                    adapter = new SimpleAdapter(
                                            DashboardActivity.this,
                                            listItems,
                                            R.layout.list_item, str,
                                            place);
                                    ((SimpleAdapter) adapter)
                                            .setViewBinder(new MyBinder());
                                    setListAdapter(adapter);
                                    break;
                        case (1):
                            review = LoginActivity.reviews;                                 
                        for (int i = 0; i < review.length(); i++) {

                            try {
                                JSONObject c = review
                                        .getJSONObject(i);
                                String url = c
                                        .getString(LoginActivity.TAG_URL);
                                HashMap<String, String> map = new HashMap<String, String>();
                                int review_profile_id2 = Integer.parseInt(c
                                        .getString(LoginActivity.TAG_REVIEWS_PRIOFILE_ID));
                                if (review_profile_id == review_profile_id2) {
                                    if (url.equals(dealer)) {
                                        String review1 = c
                                                .getString(LoginActivity.TAG_REVIEW);
                                        String review =  Html.fromHtml(review1).toString();
                                        String author = c
                                                .getString(LoginActivity.TAG_AUTHOR);
                                        String date = c
                                                .getString(LoginActivity.TAG_DATE);
                                        String rating = c
                                                .getString(LoginActivity.TAG_RATING);
                                        String link_raw  = c.getString(LoginActivity.TAG_REDIRECT);
                                        String link =  Html.fromHtml(link_raw).toString();

                                        if (!review
                                                .equals("null")) {
                                            map.put("review",
                                                    review);
                                            map.put("author", author);
                                            map.put("date",
                                                    date);
                                            map.put("rating",
                                                    rating);
                                            map.put("service", link);
                                            map.put("url", Integer.toString(dealer_image));

                                            listItems
                                                    .add(map);
                                        }
                                    }
                                }
                            } catch (JSONException e) {
                                e.printStackTrace();
                            }
                        }
                        // Getting adapter
                        adapter = new SimpleAdapter(
                                DashboardActivity.this,
                                listItems,
                                R.layout.list_item, str,
                                place);
                        ((SimpleAdapter) adapter)
                                .setViewBinder(new MyBinder());
                        setListAdapter(adapter);
                        break;              
                        }
                    }
                }

                public void onNothingSelected(AdapterView<?> arg0) {
                }
            });

        btnLogout.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {

                userFunctions.logoutUser(getApplicationContext());
                Intent login = new Intent(getApplicationContext(),
                        LoginActivity.class);
                login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(login);
                // Closing dashboard screen
                finish();
            }
        });

    } else {
        // user is not logged in show login screen
        Intent login = new Intent(getApplicationContext(),
                LoginActivity.class);
        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(login);
        // Closing dashboard screen
        finish();
    }
}

class MyBinder implements ViewBinder {      
    public boolean setViewValue(final View view, final Object data,
            String textRepresentation) {        
        if (view.getId() == R.id.rating) {
            String stringval = (String) data;
            float ratingValue = Float.parseFloat(stringval);
            RatingBar ratingBar = (RatingBar) view;
            ratingBar.setRating(ratingValue);
            return true;
        }
        if (view.getId() == R.id.date) {            
            TextView textView = (TextView) view;
            String stringval = (String) data;
            Typeface myTypeface = Typeface.createFromAsset(getApplicationContext().getAssets(),
                    "ArchivoNarrow-Regular.ttf");       
            textView.setTypeface(myTypeface);
            textView.setText(stringval);
            return true;
        }
        if (view.getId() == R.id.author) {
            TextView textView = (TextView) view;
            String stringval = (String) data;
            Typeface myTypeface = Typeface.createFromAsset(getApplicationContext().getAssets(),
                    "ArchivoNarrow-Regular.ttf");       
            textView.setTypeface(myTypeface);
            textView.setText(stringval);
            return true;
        }

        if (view.getId() == R.id.urlImage) {
            ImageButton image = (ImageButton) view;
            String stringval = (String) data;   
            final int imageSource = Integer.parseInt(stringval);
            image.setBackgroundResource(imageSource);
            image.setOnClickListener(new View.OnClickListener() {

                public void onClick(View arg0) {

                    if(imageSource == dealer_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == google_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == cars_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                        startActivity(intent);
                    }
                    else if(imageSource == edmunds_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == yelp_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == yahoo_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == judi_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == insider_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == city_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == facebook_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                    else if(imageSource == twitter_image){
                        TextView theFact = (TextView) findViewById(R.id.link);
                        String shareFact = theFact.getText().toString();

                        Uri uri = Uri.parse(shareFact);
                        Log.d("ImageButton", shareFact);
                         Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                         startActivity(intent);
                    }
                }
            });

            return true;
        }
        if (view.getId() == R.id.review) {
            TextView textView = (TextView) view;
            String stringval = (String) data;
            Typeface myTypeface = Typeface.createFromAsset(getApplicationContext().getAssets(),
                    "ArchivoNarrow-Regular.ttf");       
            textView.setTypeface(myTypeface);
            textView.setText(stringval);
            return true;
        }
        return false;
    }
} 
```

*}*

第 127 行是：

 **```
for (int i = -1; i < profile.length()+1; i++) 
```***

# ios - 为什么我的应用程序的生产版本会收到来自开发证书/主机组合的推送？

> ID：15471113
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:14.127
> 
> 标签：ios, certificate, apple-push-notifications, production

我在发布模式下构建我的应用程序，我希望新主机是 gateway.push.apple.com 并使用我的生产证书，对吗？

好！我调试了好几个小时，试图弄清楚为什么我的应用程序没有得到它，你猜怎么着？我将它切换到开发证书和沙盒主机，我得到了推动！在我发布的应用程序上！

我肯定错过了什么。他们不久前取消了 entitlements.plist 对吧？

知道为什么我的发布版本正在使用开发证书/主机（它不应该）而不是产品证书/主机吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:48:37.590

制作配置文件时我忘记了选项卡。我确实在开发选项卡下做到了。（我应该在分发时制作这个配置文件）这是一个严重的错误。谢谢您的帮助！

# python - 如何从给定的字典列表中制作字典

> ID：15471115
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:15.507
> 
> 标签：python

我有一个字典列表，如下所示：

```
targer = [
    {"id":1,"search":"xyz"},
    {"id":2,"children":[
        {"id":3,"search":'xyz'},
        {"id":4,"search":'xyz'},
        {"id":5,"children":[
            {"id":6,"search":'xyz'},
            {"id":7,"search":'xyz'},
            {"id":8,"search":'xyz'}]},
        {"id":9,"search":'xyz'},
        {"id":10,"search":'xyz'}]},
    {"id":11},{"id":12}] 
```

现在我想从目标列表中制作一个字典列表，如下所示：

```
output = [
    {'tier1': 1, 'searchterm': 'xyz'},
    {'tier1': 2, 'tier2': 3,'searchterm': 'xyz'},
    {'tier1': 2,'tier2': 4,'searchterm': 'xyz'},
    {'tier1': 2, 'tier2': 5,'tier3': 6,'searchterm': 'xyz'},
    {'tier1': 2, 'tier2': 5,'tier3': 7,'searchterm': 'xyz'},
    {'tier1': 2, 'tier2': 5,'tier3': 8, 'searchterm': 'xyz'},
    {'tier1': 2, 'tier2': 9,'searchterm': 'xyz'},
    {'tier1': 2, 'tier2': 10,'searchterm': 'xyz'},
    {'tier1': 11, 'searchterm': 'xyz'},
    {'tier1': 12, 'searchterm': 'xyz'}] 
```

我尝试了一些步骤： 1.首先我将目标列表转换为如下列表：

```
mylist = [
    [1, 'xyz'],
    [2, 3, 'xyz'],
    [2, 4, 'xyz'],
    [2, 5, 6, 'xyz'],
    [2, 5, 7, 'xyz'],
    [2, 5, 8, 'xyz'],
    [2, 9, 'xyz'],
    [2, 10, 'xyz'],
    [11],
    [12]] 
```

2.然后我在 mylist 上应用以下代码来获取输出：

```
for i in lis:
dic={}

length=len(i)
if length==2:

    dic['tier1']=i[0]
    dic['searchterm']=i[1]

if length==3:
    dic['tier1']=i[0]
    dic['tier2']=i[1]
    dic['searchterm']=i[2]

if length==4:
    dic['tier1']=i[0]
    dic['tier2']=i[1]
    dic['tier3']=i[2]
    dic['searchterm']=i[3]

if length==5:
    dic['tier1']=i[0]
    dic['tier2']=i[1]
    dic['tier3']=i[2]
    dic['tier4']=i[3]
    dic['searchterm']=i[4]

if length==6:
    dic['tier1']=i[0]
    dic['tier2']=i[1]
    dic['tier3']=i[2]
    dic['tier4']=i[3]
    dic['tier5']=i[4]
    dic['searchterm']=i[5]

target.append(dic) 
```

但我想从直接目标列表中输出而不应用上述步骤。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:01:34.493

递归生成器可以解决问题：

```
def flatten(list_of_dicts, tier = 1, prev = {}):

    for item in list_of_dicts:
        curr = prev.copy()
        curr['tier%d' %tier] = item['id']
        if 'children' in item:
            for next in flatten(item['children'], tier + 1, curr): 
                yield next
        else:
            if 'search' in item: #some items don't have it
                curr['searchterm'] = item['search']
            yield curr

>>> list(flatten(targer))
[{'tier1': 1, 'searchterm': 'xyz'}, {'tier1': 2, 'searchterm': 'xyz', 'tier2': 3}, {'tier1': 2, 'searchterm': 'xyz', 'tier2': 4}, {'tier1': 2, 'searchterm': 'xyz', 'tier3': 6, 'tier2': 5}, {'tier1': 2, 'searchterm': 'xyz', 'tier3': 7, 'tier2': 5}, {'tier1': 2, 'searchterm': 'xyz', 'tier3': 8, 'tier2': 5}, {'tier1': 2, 'searchterm': 'xyz', 'tier2': 9}, {'tier1': 2, 'searchterm': 'xyz', 'tier2': 10}, {'tier1': 11}, {'tier1': 12}] 
```

# jquery - tinymce 不关注页面加载

> ID：15471119
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:39.070
> 
> 标签：jquery, load, focus, tinymce, pageload

我动态地将 textarea 作为表单元素添加到我的页面上，然后使用[jQuery Version将其初始化为](http://www.tinymce.com/tryit/jquery_version.php)[tinymce](http://www.tinymce.com/)编辑器。但是，每当我加载编辑器时，它都会关注编辑器，向下滚动表单的一半。有没有办法让加载后不专注于编辑器？谢谢！`tinymce``tinymce`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:59:16.660

所以显然这个错误只有`#`在 url 中有一个存在时才会发生。即，我的网址是：

```
http://www.mydomain.com/tinymce/# 
```

但是，如果您删除`#`，则不会发生此错误。我在这篇[文章](http://www.tinymce.com/forum/viewtopic.php?pid=104280#p104280)的 tinymce 论坛中找到了解决方案。

这篇[文章](http://www.tinymce.com/forum/viewtopic.php?id=295)中也提到了这个错误，以防有人在那里发现任何有用的东西。

# javascript - Twitter bootstrap nav-stacked css不起作用

> ID：15471121
> 
> 赞同：2
> 
> 时间：2013-03-18T06:47:40.657
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在尝试实现如下所示的可堆叠效果：http: [//twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

但不知何故，它对我不起作用。这是我创建的 plunk 的链接：http: [//plnkr.co/edit/LSR3ijKGiOIyrYAbHm7g](http://plnkr.co/edit/LSR3ijKGiOIyrYAbHm7g) 它只显示三个列表项，一个在另一个下面，没有引导程序的导航栏效果。

```
<!doctype html>
<html>
<head>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

</head>

<body>
    <div class="row-fluid">
        <div class="offset4 span4">
            <ul class="nav nav-tabs nav-stacked">
                <li> Item1</li>
                <li> Item2</li>
                <li> Item3</li>
            </ul>
        </div>
    </div>
</body>
</html> 
```

我一定是犯了一些错误，因为像 nav-stacked 这样简单的东西不起作用。如果有人能指出我的错误，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:00:23.023

将内容放在锚点中，如下所示：

```
<ul class="nav nav-tabs nav-stacked">
    <li class="active"><a href="#">Item1</a></li>
    <li><a href="#">Item2</a></li>
    <li><a href="#">Item3</a></li>
</ul> 
```

演示：http: [//jsfiddle.net/jpKAF/](http://jsfiddle.net/jpKAF/)

# c++ - 使用vector和push_back开始使用boost mpl

> ID：15471122
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:45.500
> 
> 标签：c++, boost, vector, boost-mpl, push-back

我一直在挠头太久了，我发现使用 MPL 很难解决，希望有人能让我开始。这是我正在开发的不使用 MPL 的类的一些**部分代码。**我最终想在编译时实现这个类。这段代码可能没有意义，但我不想要 MPL 中的所有解决方案——希望我能自己实现（见下文以获得特别帮助）。

```
class define_cell_type{
public:
    define_cell_type () = default;
    define_cell_type (const std::string& name_of_cell) : 
            cName {name_of_cell} {};

    double& add_variable (const std::string& Name,
            const double& init_value,
            VARIABLE declr_type = VARIABLE::STATIC_V)
    {
       vInit_val.push_back(init_value);
       vData.push_back( std::make_tuple(Name) );
            return vInit_val.back();
    };

private:
    std::string cName;
    std::vector<double> vInit_val;
    std::vector<variable_tuple> vData;
}; 
```

首先，如何在 double 类型的 mpl::vector 上执行 push_back？这是一个我想开始的例子，类似于我正在开发的类中的函数。

```
std::vector<double> state;
double& add_variable ( const double& init_val)
{
    state.push_back(init_val);
    return state.back();
} 

int main() {
    auto var1 = add_variable (12.2);
    auto var2 = add_variable (1.2);
    auto var2 = add_variable (6.4);
} 
```

我能得到的只是这样的东西

```
typedef mpl::vector<double> state;
typedef mpl::push_back<state,double>::type types; 
```

如果有人让我开始，我将不胜感激，生成一个编译时向量，其值推回上面的示例

# objective-c - UIManagedDocument 无法初始化，给我“Ghost Entity”错误

> ID：15471124
> 
> 赞同：0
> 
> 时间：2013-03-18T06:47:59.633
> 
> 标签：objective-c, ios5, core-data

尝试使用 coredata 模型构建项目，出现此错误

```
'NSInvalidArgumentException', reason: 'Can't merge models with two different entities named 'Patient'' 
```

一时兴起，我删除了我的 coredata 模型并创建了一个新模型，将“Patient”实体重命名为“Noob”，我得到了完全相同的错误。带有“Patient”的 coredata 模型不再存在，是什么给出的？是时候开始一个新项目了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:59:47.957

您可以**清理**您的项目，`shift``cmd``K`然后重试。

# android - In-app billing v3 无法在没有网络连接或飞机/飞行模式下查询项目

> ID：15471131
> 
> 赞同：12
> 
> 时间：2013-03-18T06:48:43.807
> 
> 标签：android, nullpointerexception, in-app-purchase

使用我的项目修改 v3 示例文件可以正常工作。但是我的朋友只是通过关闭 wi-fi 并打开飞行模式来测试代码。这似乎导致无法查询应用内库存。

```
// Listener that's called when we finish querying the items and subscriptions we own
private final IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
    @Override
    public void onQueryInventoryFinished(IabResult result, Inventory inventory) {

        if (result.isFailure()) {
            // STOPS here and doesn't continue on with no network connection
            return;
        }

        ......
    }
}; 
```

我认为在最初成功购买后，v3 将其存储在本地缓存中，这样它就不必总是有网络连接来检查。有没有其他人遇到过这个问题？我希望我遗漏了一些完全明显的东西，或者如果它应该是这样工作的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T07:49:21.547

我想我可能已经找到了答案。在下面的 v3 的 TrivialDriveExample 中，我在 mHelper.startSetup() 函数中调用 queryInventoryAsync 函数，如下所示：

```
Log.d(TAG, "Setup successful. Querying inventory.");
mHelper.queryInventoryAsync(mGotInventoryListener); 
```

相反，现在我传递了我要查询的 SKU 的字符串数组列表：

```
List<String> skulist = new ArrayList<String>();
skulist.add("my_sku_name1");
skulist.add("my_sku_name2");
mHelper.queryInventoryAsync(true, skulist, mGotInventoryListener); 
```

然后我通过打开飞行模式进行测试，我能够很好地查询我的购买！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-25T10:07:51.723

问题是，在您的第一种方法中，API 不知道存在哪些 SKU，并且默认情况下（单参数版本）正在尝试查询该列表。在飞行模式下这是不可能的 - 要么是因为它没有缓存 skus 列表，要么是因为一些内部错误阻止它完成。

您可以发送您想要查询的 SKU 列表（就像您稍后所做的那样），也可以直接取消在线查询 sku 列表。

```
helper.queryInventoryAsync(false, yourListener); 
```

*学分：jmrmb80*

如果您需要此信息（即在您的应用程序中显示价格），则更有可能取决于。

（请参阅该功能的其他重载或已经给出的答案。我认为您很可能不需要 SKU 来检查是否进行了购买，所以我会寻求 jmrmb80 的答案 - 对我来说，这解决了不在飞行模式下识别购买

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T05:32:36.547

For me the following bit worked ...

> mHelper.queryInventoryAsync(false, mGotInventoryListener);

instead of

> mHelper.queryInventoryAsync(mGotInventoryListener);

I found it in another link [a Error refreshing iventory (querying prices of items). (response: 6:Error)](https://stackoverflow.com/a/21539639/1369065)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-29T10:09:48.553

我解决了这个问题：

```
final ArrayList<String> iabItemSkus = new ArrayList<String>();
iabItemSkus.add(MyGame.productID_FULLVERSION);

// Disable SKU details if no network connection
boolean checkSkuDetails = isWifiConnected() ? true : false;

Gdx.app.log("IAB", "checkSkuDetails : " + checkSkuDetails);

mHelper.queryInventoryAsync(checkSkuDetails, iabItemSkus, mGotInventoryListener); 
```

如果没有网络，则无法获取 Sku 详​​细信息。

# java - 使用更多信息扩展 log4j 错误电子邮件

> ID：15471132
> 
> 赞同：3
> 
> 时间：2013-03-18T06:48:56.823
> 
> 标签：java, logging, log4j

我正在使用的 Web 应用程序为用户的数据完整性问题提供了更多日志。我想获得更多信息，例如：

*   服务器名称
*   客户端IP
*   浏览器信息

log4j 有没有办法记录以上参数？换句话说，我想将这些参数与其他参数相加。那么 log4j 是否为此提供了一些方法？

我有 log4j.properties 作为：

```
log4j.appender.Stdout=org.apache.log4j.ConsoleAppender
log4j.appender.Stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.Stdout.layout.conversionPattern=%-5p - %-26.26c{1} - %m\n

log4j.appender.Stdout=org.apache.log4j.ConsoleAppender
log4j.appender.Stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.Stdout.layout.conversionPattern=%-5p - %-26.26c{1} - %m\n

log4j.rootLogger=INFO,Stdout

log4j.logger.org.apache.wicket=INFO
log4j.logger.org.apache.wicket.protocol.http.HttpSessionStore=INFO
log4j.logger.org.apache.wicket.version=INFO
log4j.logger.org.apache.wicket.RequestCycle=INFO 
```

我有一`LogUtil.java`堂课，我在其中记录可用信息。

**编辑：** 为了更清楚我的问题是什么：

在哪里可以找到这些参数以及如何在现有记录器中添加它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:11:35.060

看看MDC。

您应该使用您在实际开始处理之前提到的信息设置 MDC。然后您可以在日志消息中包含此类信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:08:55.003

这些信息可以从 HttpServletRequest 对象中获取。您可以使用 MDC 来完成此操作。

[Log4j MDC（映射诊断上下文）教程](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)

[您还可以通过扩展SMTPAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SMTPAppender.html)自定义 Log4j 电子邮件中发送的详细信息

检查这个博客，这应该给你如何

[自定义 SMTPAppender](http://weblog.plexobject.com/?p=1673)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T07:13:09.643

检查 HttpServletRequest 类 api，它提供了您需要的大部分信息。大量信息将通过请求标头提供。

无论您在哪里登录 java 代码，都可以使用上述值创建一个日志记录字符串。

另一个选项是使用 MDC，如果您设置了一些东西，那么它将自动记录。

# wordpress - 错误，当我在 wordpress 中安装主题时

> ID：15471139
> 
> 赞同：-2
> 
> 时间：2013-03-18T06:49:21.883
> 
> 标签：wordpress, wordpress-theming

在 WordPress 中安装[emphaino 主题](http://wordpress.org/extend/themes/emphaino)时出现以下错误。

![在此处输入图像描述](../Images/f411b4ba0c2838c6ce1dc57d2ad1e291.png)

默认主题（二十一 1.3、二十一 1.3）运行良好。其他主题也运行良好。

我已经在另一个网站上使用了相同的主题。效果很好。但是我的新网站出现了这个问题。

错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:56:06.933

检查您的 Wordpress 版本。您是否尝试将此主题与较旧的 Wordpress 安装一起使用？如果是这样，您可能需要更新 Wordpress 才能使用此主题。wp_get_theme 函数直到 wordpress 3.4 才可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:27:35.683

我假设这是本地安装，但如果不是，则似乎正在传递本地路径。您是否开始在 WAMP 堆栈中工作，然后迁移而不改变路径？

# java - 我正在尝试使用 java webdriver 单击链接，该链接在最后生成带有一些数字的运行时

> ID：15471141
> 
> 赞同：0
> 
> 时间：2013-03-18T06:49:30.670
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我正在尝试单击生成运行时的链接，最后带有一些数字：

html代码如下：-

```
<span class="float-left">

   <a href="/Key/Lock/369"> 
```

**如何对xpath使用正则表达式？**请帮忙。

它完全不适合：-

```
WebElement LockAndEdit = driver.findElement(By.xpath("//*[@href='/key/Lock/370']")); 
```

我正在尝试以下带有正则表达式的代码，最后是任何数字但不起作用：-

```
WebElement LockAndEdit = driver.findElement(By.xpath("//*[@href='/key/Lock/\\d+']")); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:32:37.137

你不需要走那么远。

像这样的 XPath 表达式可以正常工作：

```
//a[starts-with(@href, '/Key/Lock')] 
```

甚至是普通的 CSS 选择器：

```
a[href^='/Key/Lock'] 
```

请注意，这假设它最后总是一个数字，如果它可能不是，那么它变得更加困难。

# shell - 在 clojure.java.shell 中运行名称冲突的特定可执行文件

> ID：15471143
> 
> 赞同：1
> 
> 时间：2013-03-18T06:49:39.377
> 
> 标签：shell, clojure

我有两个`convert.exe`在我的`PATH`. 其中一个来自 ImageMagick，另一个来自 Windows。

```
user=> (clojure.java.shell/sh "where" "convert")
{:exit 0, :out "E:\\Program Files\\ImageMagick-6.8.3-Q16\\convert.exe\r\nC:\\Windows\\System32\\convert.exe\r\n", :err ""} 
```

我想`convert.exe`在`clojure.java.shell/sh`. 通常，我可以在 PowerShell 中执行此操作。

```
PS E:\Users\bt> convert --version
Version: ImageMagick 6.8.3-8 2013-03-04 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2013 ImageMagick Studio LLC
Features: DPC OpenMP
Delegates: bzlib fontconfig freetype jng jp2 jpeg lcms lzma pango png ps tiff x xml zlib 
```

但是，这在`clojure.java.shell/sh`.

```
user=> (clojure.java.shell/sh "convert" "--version" :dir "E:/Users/bt")
{:exit 4, :out "", :err "Invalid drive specification.\r\n"} 
```

最初，我认为我需要将 ImageMagick 的路径移到我的前面，`PATH`以便它优先于 Windows 的二进制文件，但这没有任何效果。另外，我把它移到了`PATH`只是为了踢球。那也没用。

我知道解决此问题的唯一替代方法是重命名其中一个可执行文件。但这是不受欢迎的，因为我不希望其他人重命名他们的 ImageMagick/Windows 二进制文件只是为了让我的代码工作。

~~如果此信息有任何用处，则打开一个新的命令外壳（不是 PowerShell，而是`cmd.exe`）以`C:\Windows\System32`. 我有一种感觉，这可能会影响可执行文件的选择，但我不确定。~~只有当我`cmd.exe`从 Launchy 运行时才会发生这种情况。如果我使用开始菜单，它将在我的主目录中启动。

有没有办法做到这一点？我觉得我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:21:05.967

您可以尝试为可执行文件提供绝对路径吗？
像，

```
user=> (clojure.java.shell/sh "E:\\Program Files\\ImageMagick-6.8.3-Q16\\convert.exe" "--version" :dir "E:/Users/bt") 
```

或者

```
user=> (clojure.java.shell/sh "E:\\Progra~1\\ImageMagick-6.8.3-Q16\\convert.exe" "--version" :dir "E:/Users/bt") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:15:00.490

我可以重现你的结果。不管是什么原因，它被埋在 Java 的某个地方，`Runtime.exec`它接收 PATH，但也许它在前面添加了 Windows 系统目录？如果你想彻底了解它，这就是你应该继续调查的地方。

请参阅对它的调用`sh`：

```
 (let [...
        proc (.exec (Runtime/getRuntime)
          (into-array cmd)
          (as-env-string (:env opts))
          (as-file (:dir opts)))] 
```

但是，如果您提供可执行文件的绝对路径，它确实有效。所以，这里有两个选项可以解决这个问题：

*   如果可以安全地假设 IM convert.exe 是 PATH 上的第一个，只需执行问题中显示的“where”，从`:out`返回的第一个路径中获取第一个路径，附加`convert.exe`到它并将结果用作程序到`sh`.
*   如果您无法假设正确的路径，请询问用户 Image Magick 的安装位置并将程序路径存储在某处。将此添加到程序路径中。

# mysql - 寻找独特访客的更好解决方案

> ID：15471145
> 
> 赞同：0
> 
> 时间：2013-03-18T06:49:39.947
> 
> 标签：mysql, sql, subquery

我正在使用以下查询从我的一张表中查找每天的唯一身份访问者数量。但这会影响性能。任何人都可以为此提出更好的解决方案。我目前的查询是：

```
SELECT t.date,COUNT(DISTINCT t.uID) as unique_clicks FROM table_name t
WHERE
    NOT EXISTS(
        SELECT 1
        FROM table_name t2
        WHERE
            t2.uID = t.uID
            AND t2.date < (t.date)
    )
GROUP BY t.date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:53:17.427

你可以试试这个：

```
SELECT
  t.date, COUNT(DISTINCT t.uID) as unique_clicks
FROM
  table_name t LEFT JOIN table_name t1
  ON t.uID=t2.uID AND t2.date < t.date
WHERE
  t2.uID is NULL
GROUP BY t.date 
```

我认为在这种特殊情况下，连接应该比 EXISTS 子句更快。或者，如果我正确理解逻辑，也是这样：

```
SELECT min_date, COUNT(*) as unique_clicks
FROM (
  SELECT
    t.uID, min(t.date) min_date
  FROM
    table_name t
  GROUP BY
    t.uID
  ) s
GROUP BY min_date 
```

请[在此处](http://sqlfiddle.com/#!2/4de3f/1)查看小提琴。

# ruby-on-rails - 车牌输入表格

> ID：15471149
> 
> 赞同：1
> 
> 时间：2013-03-18T06:49:52.607
> 
> 标签：ruby-on-rails, ruby, forms

在我的应用程序中，我要求用户在没有任何破折号的情况下写下他们的车牌。它仅用于荷兰的车牌，它始终由数字和字母的组合组成，长度始终为 6 个字符。我的问题是：

如何确保输入始终为 6 位数字？

我在 _form.html.erb 中有一个 < p >-标签，说明用户应该只写下他们的车牌而不用破折号，但这当然不是最好的方法。

在我的 _form.html.erb 我写过

```
<strong><%= f.label :license_plate, 'Kenteken' %></strong><br />
<%= f.text_field :license_plate %> 
```

我的模型包含这条线

```
validates :license_plate, :presence => true, :uniqueness => true, :length => {:minimum => 6, :maximum => 6} 
```

如果您需要更多信息，我很乐意分享。提前致谢。

编辑：我想从用户输入中删除任何空格和破折号。我应该如何在代码中编写它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:16:04.727

您可以使用`before_validation`回调来删除不需要的字符：

```
before_validation :clean_data

def clean_data
  self.license_plate = self.license_plate.gsub(/[ \-]/, '') unless self.license_plate.nil?
end 
```

# android - 如何防止Android中的多点触摸

> ID：15471151
> 
> 赞同：0
> 
> 时间：2013-03-18T06:49:55.703
> 
> 标签：android

在我的屏幕上，我有一个列表视图和水平滑动菜单。当我触摸水平移动时，会出现滑动菜单，当我向下滚动列表时，它工作正常。但是当我用一根手指触摸移动滑动菜单并尝试同时用另一根手指向下滚动列表时，屏幕似乎在闪烁。

这个问题似乎是多点触控的问题，所以我该如何防止它：如果我正在滚动列表，另一个不应该工作，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:28:03.747

我们可以用

```
e.getPointerId(pointerIndex) 
```

其中 e 是 MotionEvent

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:08:02.307

您可以尝试查看寻呼机吗？ [http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

或者，您可以使用 a`GestureListener extends GestureDetector.SimpleOnGestureListener`并覆盖其中的 onFling() 方法

# php - 数组数据到mysql

> ID：15471152
> 
> 赞同：0
> 
> 时间：2013-03-18T06:49:56.250
> 
> 标签：php

我需要解析以下代码并处理结果数据。

```
foreach($job as $x=>$x_value)
  {
  echo "Key=" . $x . ", Value=" . $x_value;
  echo "<br>";
  } 
```

上面的代码按预期返回以下内容。

```
Key=vca_id, Value=20130<br>Key=uuid, Value=3c87e0b3-cfa<br>Key=originate_time, Value=2013-03-15 14:30:18<br> 
```

我需要做的是将值放入 mysql 数据库中。所以插入语句看起来像这样......

```
insert into test.master_table (vca_id, uuid, originate_time) values ('20130', '3c87e0b3-cfa', '2013-03-15 14:30:18') 
```

将数组值保存到 mysql 数据库的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:05:44.050

好吧，我会推荐内爆

```
$keys = array();
$values = array();
foreach($job as $x => $x_value)
{
    $keys[] =   $x;
    $values[]   =   $x_value;
}

$query  =   'INSERT INTO test.master_table' . '('.implode(',',$keys) .') VALUES (' .implode(',',$values) . ')'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:07:12.837

你可以试试这个

```
$temp_value_arr = array();
$query = "INSERT into test.master_table SET ";
foreach($job as $x=>$x_value)
{
   $query .= "$x = '$x_value',";
}

$query = rtrim($query, ',');
mysql_query($query); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:53:42.980

```
<?php 
mysql_query("insert into test.master_table(vca_id, uuid, originate_time)values('".$job['vca_id']."','".$job['uuid']."','".$job['originate_time']."')");
?> 
```

# pos-tagger - Mallet CRF SimpleTagger 短语/多词

> ID：15471153
> 
> 赞同：0
> 
> 时间：2013-03-18T06:49:59.173
> 
> 标签：pos-tagger, mallet, phrases, crf

我是 Mallet 的新手，我正在尝试使用 mallet 简单标记器/CRF 并尝试使用短语 - 我尝试在 mallet 网站上查找文档并浏览用户档案 - 没有任何帮助。

我尝试训练槌进行简单标记，它的工作原理很好。这是我的数据的样子（请注意训练之间有一个换行符，表示它们是不同的集合）

## 样本训练数据：

```
where STOPWORD
is STOPWORD
chicago CITY
<---Newline---->
Sunnyvale CITY
<---Newline---->
Chicago CITY
<---Newline---->
Washington CITY
<---Newline---->
What STOPWORD
is STOPWORD
Sunnyvale CITY
time ASK
<---Newline---->
new STOPWORD
<---Newline---->    
place STOPWORD 
```

我遇到的问题是当城市名称是多个单词时，说

```
new york CITY 
```

请注意，在上述训练数据中，“新”是一个停止词问题

1.  对于简单标记器，上述表示是否正常？如果不是，我如何表示短语？
2.  如果不是如何表示数据，以便 SimpleTagger/CRF 可以使用前面的“n”个词来到达标签？即我输入的一种块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T08:06:45.007

据我所知，您用于多词表达的格式不正确。根据[这里](http://mallet.cs.umass.edu/sequences.php)，输入的格式是 feature1 feature2 feature3 ....

因此，在您的情况下，New 是 feature1，York 是 feature 2，等等。

我建议使用 New_York 将您的多词表达作为一个词。

同时，您应该注意到您不必在输入数据中包含单词本身。如果您这样做，它们将被视为第一个特征。因此，如果“单词文本”或“单词引理”对您来说不是一个有趣的功能，请将其从您的输入数据中剔除。

# ruby-on-rails - 为什么在 Rails 中使用 _form.html.erb

> ID：15471159
> 
> 赞同：3
> 
> 时间：2013-03-18T06:51:04.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我是 Ruby on Rails 的新手。我使用脚手架创建模型视图和控制器`admin`

现在我的一位前辈告诉我要为管理员进行更改。我`_form.html.erb`不知道如何实现它。与普通方法相比，在 _form.html.erb 中使用/进行更改的优点或缺点是什么（进行更改在索引、新建、显示和编辑中）

我的 _form.html.erb 如下：-

```
<%= form_for(@admin) do |f| %>
  <% if @admin.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@admin.errors.count, "error") %> prohibited this admin from being saved:</h2>

      <ul>
      <% @admin.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我的管理员表如下：-

```
id serial NOT NULL,
  username character varying(20) NOT NULL DEFAULT ''::character varying,
  email character varying(255),
  first_name character varying(100),
  middle_name character varying(100),
  last_name character varying(100),
  designation character varying(255),
  office_phone character varying(255),
  deleted integer NOT NULL DEFAULT 0,
  super_admin boolean NOT NULL DEFAULT false,
  created_at timestamp without time zone NOT NULL,
  updated_at timestamp without time zone NOT NULL,
  CONSTRAINT admins_pkey PRIMARY KEY (id) 
```

有人可以帮我实现这个。在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T06:55:11.457

文件以“_”下划线开头，在 rails 中称为部分。它鼓励软件开发的**DRY**（不要重复自己）原则。您可以重用部分，在这种情况下，_form.html.erb 可以用于 new.html.erb 和 edit.html.erb 功能。我们可以在其他 html.erb 文件中渲染部分内容，也可以在控制器中调用。 `render :partial => 'partial_name'`在 partial_name 中没有下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T06:56:48.880

这意味着您只需要在一个地方进行更改，这与编码中的 Don't Repeat Yourself (DRY) 一致。

要实现它，您只需将您想要的代码拖出一个部分（以_命名）。

要将其包含在 index、edit 等的 html 中，请插入`render 'partial'`，其中 partial 是它的名称，不带下划线。

特别是在您的示例中，您可以使用以下模式引用表单的每个项目

```
<%= f.label :email %>
<%= f.text_field :email %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T06:58:09.997

阅读部分内容。他们帮助你干掉你的代码。[在这里](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)阅读更多

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T10:09:07.593

在这里，我试图在其他答案的帮助下给你一个答案，

在 Rails 中，通用视图代码可以放在名为 partials 的文件中，（阅读`@Sachin R's`有关 partials 的答案），partials 基本上可以避免代码重复并保持代码干净/可维护。

在您的情况下，当您运行 scaffold 时，您的`new`和`edit`视图使用相同的形式。由于这个原因，该形式已转换为部分 ( `_form`)。因此，当您进行`_form`部分更改时，更改将可用于视图`new`和`edit`视图。（这就是为什么你的前辈要求在 中进行更改`_form`），

所以底线是，由于部分是公共代码段，一旦你改变它们，它将适用于整个站点。

# iphone - 如何在 iPhone 中以编程方式形成一个视图到情节提要

> ID：15471161
> 
> 赞同：0
> 
> 时间：2013-03-18T06:51:15.167
> 
> 标签：iphone, ios, objective-c

如何在 iPhone 中将 xib 按钮连接到情节提要？我有一个项目，每个人都认为包含故事板我想将此项目添加到 viewcontroller xib 项目，现在如何以编程方式将该 xib 按钮连接到故事板。如何从 1 视图转到情节提要视图控制器？如何将该视图控制器按钮连接到故事板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:06:31.613

如果您没有在情节提要中为您的视图控制器创建 Segue，那么您需要从情节提要中获取带有视图标识符的视图控制器，并且需要在动作/事件上应用 pushViewController。

例子：

@"MainStoryboard_iPhone" = 故事板文件名 @"TabBarCntrl" = 视图控制器标识符名称

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];

UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"TabBarCntrl"];
[self.navigationController pushViewController:viewController animated:YES]; 
```

# json - 我试图知道我的亚马逊 SNS 端点是否在 PHP 中收到通知

> ID：15471162
> 
> 赞同：0
> 
> 时间：2013-03-18T06:51:18.770
> 
> 标签：json, http-post, amazon, file-get-contents, amazon-sns

试图在我的 http 端点上获取亚马逊 sns 响应。每当我触发 ses 向不存在的电子邮件发送邮件服务以获取退回邮件时，它应该将通知发送到亚马逊 SNS 端点。为了检查这一点，我尝试编写如下代码，但没有得到响应。代码中没有显示任何内容。请帮助我做错了什么

```
 $file = 'posttest.php';
    $json = file_get_contents('php://input');
    `enter code here`$fp = fopen($file, 'w') or die('Could not open file!');
    $arr = json_decode($json, true);
    $var = $arr['Message'];

fwrite($fp, $var) or die('Could not write to file');
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:41:28.533

如果端点被命中，请尝试查看 apache 访问日志。对我来说，一个 csrf 错误导致对我的端点的 post 调用失败。我使用了 csrf_exempt 装饰器（我使用 Django），它工作得很好。

您还可以在 sns 主题中设置电子邮件端点，它将通知发送到 http 端点和电子邮件。如果您收到电子邮件，那么 http 端点肯定也会受到影响。

# kanban - 看板 - 累积流程图背后的数据是什么？

> ID：15471164
> 
> 赞同：0
> 
> 时间：2013-03-18T06:51:23.800
> 
> 标签：kanban

我有一个简单的问题，不知何故拒绝回答。所有在线资源都指向了制作累积流程图的相互矛盾的方法。因此，这是我对您的询问-

我们如何将每天的故事添加到看板的累积流程图中？

1.  我们是否将在任何一天工作的故事添加到任何队列中？- 这意味着数字可能会随着时间的推移而下降，并且存在相当大的波动。
2.  我们是否添加了曾经在任何队列中工作过的故事 + 今天工作过的故事？这意味着任何队列中的数字永远不会下降。它们会随着时间的推移而增长，或者至少与昨天一样。

我知道累积意味着方法＃2，但我确实看到了采用第一种方法的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:40:42.503

假设您在任务计数上有这样的流程：

*   第 1 天 - WIP 中积压 2 中的 5 个任务
*   第 2 天 - WIP 中积压 3 中的 4 个任务
*   第 3 天 - 待办事项中的 6 个任务 WIP 中的 2 中的 DONE
*   第 4 天 - 待办事项中的 2 项任务 WIP 中的 4 中 DONE 中的 4
*   第 5 天 - WIP 中积压 3 中的 0 任务 完成中的 7
*   第 6 天 - 积压中的 0 个任务 WIP 中的 0 完成中的 10

因此，首先，每当将新任务添加到待办事项列表时，您都会增加总工作量。因此，累积流程图将不会像燃尽图那样燃烧。你的累积数据应该是这样的：

*   第 1 天 - 总努力：7，部分努力：2，花费的努力：0
*   第 2 天 - 总努力：7，部分努力：3，花费的努力：0
*   第 3 天 - 总努力：10，部分努力：4，花费的努力：2
*   第 4 天 - 总努力：10，部分努力：8，花费的努力：4
*   第 5 天 - 总努力：10，部分努力：10，花费的努力：7
*   第 6 天 - 总努力：10，部分努力：10，花费的努力：10

# ruby-on-rails - :source in has_many 的基本原理

> ID：15471167
> 
> 赞同：0
> 
> 时间：2013-03-18T06:51:36.977
> 
> 标签：ruby-on-rails

我正在阅读使用 Ruby on Rails 进行面向服务的设计，其中包括您在此图像中看到的代码

![在此处输入图像描述](../Images/2c636473b6cb39de50ea47818c232214.png)

我的问题是关于用户模型中的这一行

```
has_many :followers, :through -> :followings, :source => :user 
```

其中一个用户（如在用户模型的一个实例中）有很多：followers，它们实际上只是其他用户。所以一个用户 has_many users。对我来说，用户 has_many :users 似乎很奇怪，好像你写的时候应该有什么东西坏了，所以我认为 doign has_many :followers ...:source => :user 可能是为了阻止事情发生。

根据这个 SO question [Need help to understand :source option of has_one/has_many through of Rails](https://stackoverflow.com/questions/4632408/need-help-to-understand-source-option-of-has-one-has-many-through-of-rails)，这是关于 has_many 关联的 :source 方法的一个答案，使用 :source 的一个理由是采用看起来像这样的代码

```
class Newsletter
  has_many :subscriptions
  has_many :users, :through => :subscriptions
end 
```

并将其更改为

```
 class Newsletter
    has_many :subscriptions
    has_many :subscribers, :through => :subscriptions, :source => :user
   end 
```

所以而不是这样做

```
 Newsletter.find(id).users 
```

一个会做得更合乎逻辑（因为时事通讯有订阅者而不是用户）

```
 Newsletter.find(id).subscribers 
```

所以，回到书中的代码，我的问题是，在用户模型中这样做的唯一理由是

```
 has_many :followers, :through -> :followings, :source => :user 
```

制作更具可读性的代码`User.find(id).followers`？否则不会有问题

```
User.rb 

has_many :users 
```

因为如果Rails 允许您这样做（即它不会破坏应用程序），那么您会将belongs_to 放在哪里？

```
User.rb
has_many :users
belongs_to :user 
```

这对我来说似乎很奇怪，但是如果 :source 只是为了让您编写更清晰的查询，那么这段代码应该仍然有效吗？

更新：问题的关键是，有什么能阻止任何人这样做吗？

```
 User.rb
    has_many :users
    belongs_to :user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:50:57.933

你是对的，你不需要源，因为你正在删除 through 参数

用户没有可能的用户

用户有许多追随者，每个追随者都有一个用户，因此您需要：

```
class User < ActiveRecord::Base
  has_many :followings
  has_many :users, :through => :followings
end 
```

在这里查看更多：

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

# c# - AnyCpu 和 x86 在执行时间上的巨大差异

> ID：15471169
> 
> 赞同：2
> 
> 时间：2013-03-18T06:51:40.560
> 
> 标签：c#, wpf, benchmarking, execution-time, target-platform

当我使用我的一个库时，我发现了一些奇怪的东西！我有一个负责读取特定文件类型的类库。它的工作做得很好。

我`Read`在两个不同的项目（WPF & Console）中使用了这个类库项目中一个类的方法。

**我发现：**`WPF Application`使用类库读取一个 40MB 的文件需要**17min**。**但是使用1min**读取相同的`Console Application`文件。

 **这是我在两个不同项目中使用的相同代码。

```
DateTime t1 = DateTime.Now;                             
var geometris = MyLibrary.Read(fileName);
TimeSpan dt1 = DateTime.Now - t1;       //dt1: 17min for WPF
                                        //dt1:  1min for Console 
```

**我尝试**了什么：我发现`Console Application`'s Platform 目标是 x86 并且`WPF Application`'s 目标平台是 AnyCpu。所以我将`WPF`'s 目标平台更改为 x86 并再次运行它。这次执行时间是**3 分钟** （快了 14 分钟）

**问题：**有谁知道改变目标平台是*如何*产生这种影响的？而且我仍然不知道为什么 WPF 应用程序。使用我的库中的相同输入调用相同方法时比控制台慢 2 分钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:16:58.283

在我的实践中，x86 和 x64 性能之间没有太大区别。在您的情况下，原因可能是不同的 RAM 使用情况；在 x64 模式下，所有对象引用占用两倍的 RAM。**

# c# - 通过从 C# 中的面板复制数据来创建 Word 文件

> ID：15471170
> 
> 赞同：0
> 
> 时间：2013-03-18T06:51:44.837
> 
> 标签：c#

你好

我在 C# 中有一个面板，比如 panel2，其中包含一些文本框、按钮、标签和图片框。它还包含一个内部滚动属性为 true 的数据网格视图。我希望在一个简单的按钮单击事件上创建一个 word 文件中的 panel2 中的所有这些项目。我尝试编写以下代码，但它不起作用。

```
private void button3_Click(object sender, EventArgs e)
{
    System.IO.File.WriteAllText(@"C:\users\dell\desktop\temp.docx",panel2.select);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:02:01.643

The .docx file is not a simple text file you can write to with File.WriteAllText. It is a very complex format (in fact it is a .zip file containing lots of xml files describing the structure and data of the document). Take a look at this question here: [Generate Word document from c#](https://stackoverflow.com/questions/6802335/generate-word-document-from-c-sharp)

And also panel2.select won't do the job. You need to call textBox1.Text property in order to get the text from a TextBox. You will need to do that for everyone of them.

# python - 在局域网系统中访问 django 项目

> ID：15471173
> 
> 赞同：17
> 
> 时间：2013-03-18T06:51:58.857
> 
> 标签：python, django, lan

我使用 django 并开发了一个运行良好的站点，并且它即将投入生产并在几周内准备好部署。

因此，在开始生产之前，我想与我的一些员工共享该站点，以检查其功能和其他内容。实际上，他们的系统与我的系统连接在 LAN 中。

所以我的系统 IP 地址类似于`192.168.12.135`，当我们运行 run django development server 它运行时，我的意思是使用系统 IP 地址 和正确`localhost:8000`的端口。`8000``192.168.12.135:8000`

所以我已经将项目站点链接共享给他们`192.168.12.135:8000`，但是当他们尝试连接在 LAN 中的系统时，它无法访问并显示错误`Server not found`。

我尝试了上述相同的方法，因为最近我使用了 python`web.py`框架并开发了一个最小的站点，当我们运行服务器时，它默认运行为`localhost:8080`，当我从与我的局域网连接的其他系统访问此链接时`192.168.12.135:8000`，它的工作正常并且可以访问。

所以谁能告诉我

```
1\. How to access the site on the systems that are connected in LAN before moving to production(in some real servers like apache, nginx etc.,).

2\. Basically i am new to web developing and this is my first site developed in python, so
   i don't know more about servers and deploying a project. So can anyone please let me know   
   the detailed information about deploying django on different servers 
```

（首先，我正在寻找解决方案`1st problem`（在投入生产之前在 LAN 中访问））

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-18T09:11:34.357

如果你跑

> python manage.py runserver 0.0.0.0:8000

您的开发服务器将在端口 8000 上可供 LAN 和 localhost 上的任何人使用（并且它不依赖于您的 IP 地址）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-18T06:55:26.947

您需要明确告诉开发服务器在您的 IP 上运行，而不是`localhost`.

试试`python manage.py runserver your_ip:port`。

尽管如果您通过 apache 或除开发服务器之外的任何其他网络服务器运行它，则可以访问它。

对于您的第一个问题，我建议您托管和使用本地 apache 服务器，而不是使用开发服务器。这样做，您可以预见在转向生产时将面临的问题。

第二，有大量可用资源配置 Django 与不同的服务器。向谷歌致敬。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-09T14:03:52.797

在您的 settings.py 中将 ALLOWED_HOSTS 更改为

```
ALLOWED_HOSTS = ['*'] 
```

通过输入以下命令运行您的服务器

```
python manage.py runserver 0.0.0.0:8000 
```

为了从另一台设备访问项目，请输入服务器的 IP 地址和端口号，在本例中为 8000。

# android - Theme.Sherlock.Light.DarkActionBar 在 android 1.6、2.3.3 上没有显示 darkactionbar 并且在 android 4.2 上工作正常？

> ID：15471176
> 
> 赞同：0
> 
> 时间：2013-03-18T06:52:06.750
> 
> 标签：android, android-ui

我在我的应用程序中使用 sherlock 库。我想显示 DarkActionBar >1.6 版本，但 sherlock darkactionbar 在低于 3.0 的版本上无法正常工作，但在 4.0 和 4.2 版本上工作正常。在这里，我正在添加我的项目的快照和清单文件。我看了很多，但没有得到相关的解决方案。提前致谢。

我有一些问题。Q.1.如何解决 Theme 中的兼容性问题？问题 2。任何人都可以建议我设计兼容的 UI 的好教程吗？

2.3.3 模拟器上的以下图像

![在此处输入图像描述](../Images/574d06873ae8aeb1a50076331ca36256.png)

4.2模拟器上的以下图像 ![在此处输入图像描述](../Images/e4b4e5d22efeaa6729af0326fad065b4.png)

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.actionbartest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light.DarkActionBar" >
    <activity
        android:name="com.example.actionbartest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:04:15.143

检查您的活动课程。它必须扩展 SherlockFragmentActivity 或 SherlockActivity。

# c# - 实体框架和经典 Ado.net 之间的单个事务或批量插入操作下的 SqlBulkCopy 多个表插入

> ID：15471177
> 
> 赞同：14
> 
> 时间：2013-03-18T06:52:07.927
> 
> 标签：c#, sql-server, entity-framework, ado.net

我有两个表需要在我的应用程序运行时插入。
假设我有如下表格

*   tbl_FirstTable 和 tbl_SecondTable

我的问题是数据量。
我需要向 tbl_FirstTable 插入超过 10,000 行，向 tbl_SecondTable 插入超过 500,000 行。

所以首先，我使用实体框架如下。

```
public bool Save_tbl_FirstTable_Vs_tbl_SecondTable(List<tbl_FirstTable> List_tbl_FirstTable, List<tbl_SecondTable> List_tbl_SecondTable)
{
    bool IsSuccessSave = false;
    try
    {
        using (DummyDBClass_ObjectContext _DummyDBClass_ObjectContext = new DummyDBClass_ObjectContext())
        {           
            foreach (tbl_FirstTable _tbl_FirstTable in List_tbl_FirstTable)
            {
                _DummyDBClass_ObjectContext.tbl_FirstTable.InsertOnSubmit(_tbl_FirstTable);
            }

            foreach (tbl_SecondTable _tbl_SecondTable in List_tbl_SecondTable)
            {
                _DummyDBClass_ObjectContext.tbl_SecondTable.InsertOnSubmit(_tbl_SecondTable);
            }

            _DummyDBClass_ObjectContext.SubmitChanges();
            IsSuccessSave = true;
        }
    }
    catch (Exception ex)
    {
        Log4NetWrapper.WriteError(string.Format("{0} : {1} : Exception={2}",
                                    this.GetType().FullName,
                                    (new StackTrace(new StackFrame(0))).GetFrame(0).GetMethod().Name.ToString(),
                                    ex.Message.ToString()));

        if (ex.InnerException != null)
        {
            Log4NetWrapper.WriteError(string.Format("{0} : {1} : InnerException Exception={2}",
                                    this.GetType().FullName,
                                    (new StackTrace(new StackFrame(0))).GetFrame(0).GetMethod().Name.ToString(),
                                    ex.InnerException.Message.ToString()));
        }
    }

    return IsSuccessSave;
} 
```

那是我面临错误的地方`Time out exception`。
我认为如果我使用下面的代码，该异常将得到解决。

```
DummyDBClass_ObjectContext.CommandTimeout = 1800; // 30 minutes 
```

所以我用了它。它解决了，但我面临另一个错误`OutOfMemory Exception`。
所以我搜索了解决方案，幸运的是，我找到了以下文章。

1.  [使用实体框架进行批量插入的问题](http://praneethmoka.wordpress.com/2012/02/22/problem-with-bulk-insert-using-entity-framework/)
2.  [将事务与 SqlBulkCopy 一起使用](http://www.4guysfromrolla.com/articles/111109-1.aspx)
3.  [在事务中执行批量复制操作](http://msdn.microsoft.com/en-sg/library/tchktcdk(v=vs.80).aspx)

根据那篇文章，我将代码从实体框架更改为经典 ADO.net 代码。

```
public bool Save_tbl_FirstTable_Vs_tbl_SecondTable(DataTable DT_tbl_FirstTable, DataTable DT_tbl_SecondTable)
{
    bool IsSuccessSave = false;
    SqlTransaction transaction = null;
    try
    {
        using (DummyDBClass_ObjectContext _DummyDBClass_ObjectContext = new DummyDBClass_ObjectContext())
        {
            var connectionString = ((EntityConnection)_DummyDBClass_ObjectContext.Connection).StoreConnection.ConnectionString;
            using (SqlConnection connection = new SqlConnection(connectionString))
            {
                connection.Open();
                using (transaction = connection.BeginTransaction())
                {
                    using (SqlBulkCopy bulkCopy_tbl_FirstTable = new SqlBulkCopy(connection, SqlBulkCopyOptions.KeepIdentity, transaction))                            
                    {
                        bulkCopy_tbl_FirstTable.BatchSize = 5000;
                        bulkCopy_tbl_FirstTable.DestinationTableName = "dbo.tbl_FirstTable";
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("ID", "ID");
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("UploadFileID", "UploadFileID");
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("Active", "Active");
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("CreatedUserID", "CreatedUserID");
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("CreatedDate", "CreatedDate");
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("UpdatedUserID", "UpdatedUserID");
                        bulkCopy_tbl_FirstTable.ColumnMappings.Add("UpdatedDate", "UpdatedDate");
                        bulkCopy_tbl_FirstTable.WriteToServer(DT_tbl_FirstTable);
                    }

                    using (SqlBulkCopy bulkCopy_tbl_SecondTable = new SqlBulkCopy(connection, SqlBulkCopyOptions.KeepIdentity, transaction))                            
                    {

                        bulkCopy_tbl_SecondTable.BatchSize = 5000;
                        bulkCopy_tbl_SecondTable.DestinationTableName = "dbo.tbl_SecondTable";
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("ID", "ID");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("UploadFileDetailID", "UploadFileDetailID");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("CompaignFieldMasterID", "CompaignFieldMasterID");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("Value", "Value");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("Active", "Active");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("CreatedUserID", "CreatedUserID");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("CreatedDate", "CreatedDate");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("UpdatedUserID", "UpdatedUserID");
                        bulkCopy_tbl_SecondTable.ColumnMappings.Add("UpdatedDate", "UpdatedDate");
                        bulkCopy_tbl_SecondTable.WriteToServer(DT_tbl_SecondTable);
                    }

                    transaction.Commit();
                    IsSuccessSave = true;
                }
                connection.Close();
            }
        }
    }
    catch (Exception ex)
    {
        if (transaction != null)
            transaction.Rollback();

        Log4NetWrapper.WriteError(string.Format("{0} : {1} : Exception={2}",
                                    this.GetType().FullName,
                                    (new StackTrace(new StackFrame(0))).GetFrame(0).GetMethod().Name.ToString(),
                                    ex.Message.ToString()));

        if (ex.InnerException != null)
        {
            Log4NetWrapper.WriteError(string.Format("{0} : {1} : InnerException Exception={2}",
                                    this.GetType().FullName,
                                    (new StackTrace(new StackFrame(0))).GetFrame(0).GetMethod().Name.ToString(),
                                    ex.InnerException.Message.ToString()));
        }
    }

    return IsSuccessSave;
} 
```

最后，它在不到 15 秒的时间内对超过 500,000 行执行插入过程。

我发布这个场景有两个原因。

1.  我想分享我的发现。

2.  由于我并不完美，我仍然需要从你那里得到更多的建议。

因此，每一个更好的解决方案都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-17T21:42:36.480

1）使用EF6.x，性能比EF5.x好很多

这里有更多建议（来自[Bulk insert with EF](https://stackoverflow.com/questions/26251757/bulk-insert-with-ef)）

2）通过为每个工作单元使用一个新的上下文来保持活动上下文图很小

3) 关闭 AutoDetechChangesEnabled - context.Configuration.AutoDetectChangesEnabled = false;

4）批处理，在你的循环中，定期调用 SaveChanges

# wso2 - 我如何在未将响应传递给客户端的 Wso2ESB 中处理此问题

> ID：15471178
> 
> 赞同：0
> 
> 时间：2013-03-18T06:52:10.640
> 
> 标签：wso2, wso2esb, wso2dss

我在多个表中插入其中一些是直接插入，还有一些是我们需要拆分这意味着使用迭代调解器我已经使用两个代理完成并添加故障序列如果我的 DSS 关闭，插入也可以，它将正确的故障传递给客户端.问题是当 dss 中出现错误时，像这样的 ..primarykey voilation 我`<property name="FORCE_ERROR_ON_SOAP_FAULT" value="true"/>`在每个序列中添加了这个属性，即使它像这个错误一样抛出

```
 ERROR - NativeWorkerPool Uncaught exception
org.apache.axiom.om.OMException: com.ctc.wstx.exc.WstxParsingException: Illegal processing instruction target ("xml"); xml (case insensitive) is reserved by the specs.
 at [row,col {unknown-source}]: [1,167] 
```

以及它给出的 ESB 端错误，如上面我正在附加我的故障序列..

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="fault">
   <property xmlns:ns="http://org.apache.synapse/xsd" name="actionid" expression="get-property('actionid')"/>
   <property xmlns:ns="http://org.apache.synapse/xsd" name="actiondetailid" expression="get-property('actiondetailid')"/>
   <dbreport>
      <connection>
         <pool>
            <password>Youtility11</password>
            <user>youtilitydba</user>
            <url>jdbc:postgresql://localhost:5432/USCProduction</url>
            <driver>org.postgresql.Driver</driver>
         </pool>
      </connection>
      <statement>
         <sql>
            <![CDATA[                                                                                    delete from tactiondetail where actiondetailid=?]]></sql>
            <parameter xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('actiondetailid')" type="BIGINT"/>
         </statement>
      </dbreport>
      <log level="full"/>
      <dbreport>
         <connection>
            <pool>
               <password>Youtility11</password>
               <user>youtilitydba</user>
               <url>jdbc:postgresql://localhost:5432/USCProduction</url>
               <driver>org.postgresql.Driver</driver>
            </pool>
         </connection>
         <statement>
            <sql>
               <![CDATA[                                                                                                         delete from tactiondetail where actionid=?]]></sql>
               <parameter xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('actionid')" type="BIGINT"/>
            </statement>
         </dbreport>
         <log>
            <property name="MESSAGE" value="Executing default 'fault' sequence"/>
            <property xmlns:ns="http://org.apache.synapse/xsd" name="ERROR_CODE" expression="get-property('ERROR_CODE')"/>
            <property xmlns:ns="http://org.apache.synapse/xsd" name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
         </log>
         <switch xmlns:ns="http://org.apache.synapse/xsd" source="get-property('ERROR_CODE')">
            <case regex="500000">
               <property name="ERROR_MESSAGE" value="duplicate key value violates or The system is attempting to access an inactive service " scope="default" type="STRING"/>
            </case>
            <case regex="101503">
               <property name="ERROR_MESSAGE" value="Error connecting to the back end" scope="default" type="STRING"/>
            </case>
         </switch>
         <payloadFactory>
            <format>
               <ResponseJSON xmlns="">
                  <Exception>$1</Exception>
                  <Status>$2</Status>
                  <Total>0</Total>
               </ResponseJSON>
            </format>
            <args>
               <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('ERROR_MESSAGE')"/>
               <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('ERROR_CODE')"/>
            </args>
         </payloadFactory>
         <header name="To" action="remove"/>
         <property name="RESPONSE" value="true" scope="default" type="STRING"/>
         <property name="NO_ENTITY_BODY" action="remove" scope="axis2"/>
         <log level="full"/>
         <send/>
      </sequence> 
```

它在 dss 关闭时传递错误消息，但在 dss 运行模式时不传递，给出这样的错误

```
Caused by: com.ctc.wstx.exc.WstxParsingException: Illegal processing instruction target ("xml"); xml (case insensitive) is reserved by the specs.
 at [row,col {unknown-source}]: [1,167] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:51:20.067

正如错误所说：“***非法处理指令目标（“xml”）；xml（不区分大小写）由规范保留。*** ”您似乎在从 DSS 返回的响应中使用了保留字“xml”。请仔细检查来自 DSS 的 XML 响应，并通过 XML 验证器（可能使用 Eclipse XML 验证器）运行响应以查看响应是否正常。

# java - java buf[--pos] = (byte)b 请解释一下方括号中的内容

> ID：15471180
> 
> 赞同：0
> 
> 时间：2013-03-18T06:52:52.210
> 
> 标签：java

我正在阅读 PushbackInputStream 的源代码以了解 unread() 方法：http: [//javasourcecode.org/html/open-source/jdk/jdk-6u23/java/io/PushbackInputStream.java.html](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/io/PushbackInputStream.java.html)但就行了194: buf[--pos] = (byte)b 让我不明白那是什么意思。谁能告诉我该行中 --pos 的含义？提前致谢。

Ps：我什至尝试编写此代码：

```
class Test2 {
public static void main(String[] args) {
    char[] c = { 'd', 'e', 'c', 'a', 'f', 'f', 'e',
            'i', 'n', 'a', 't', 'e', 'd' };
    char temp = 'o';
    c[--1] = tmp;
 }
} 
```

但是eclipse告诉我：无效的参数操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:56:18.027

`--pos`意思是“将 的值减`pos`一，并使用结果值”。

这不能应用于常量：`--1`无效。但是，您可以改写`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:04:09.467

Invalid argument operation error is because you are doing the decrement operation on a number instead of a variable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:57:57.957

`--`是递减运算符，它只对字段（变量）不是常数有意义。

`buf[--pos] = (byte)b;`表示将字节值设置`b`为`buf[pos - 1]`并将`pos`导致递减。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:01:06.537

`1`是一个常数。你不能减少一个常数——或改变它的值——

但是你可以这样做：`pos = 1;`,`buf[--pos]`会做你想做的事，因为它`pos`是一个变量，而不是一个常数。

或者只是使用`buf[0]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T07:01:14.803

在实际代码中，pos 是缓冲区的当前索引。要取消读取一个字节，您需要将该索引减一并将指定字节存储在缓冲区中新的当前索引位置。

--pos 具有将 pos 减一的副作用，结果是 pos 的新值，`buf[--pos] = (byte)b;`工作也是如此。

由于副作用， 的操作数`--`必须是可以减一的东西。常数不能。

# php - 在 Codeigniter 中显示时间

> ID：15471181
> 
> 赞同：1
> 
> 时间：2013-03-18T06:52:54.990
> 
> 标签：php, codeigniter, datetime

我想在数据库中显示时间存储，但是当我显示它时显示我的错误时间，实际时间减少了 -5 小时。假设我有

```
 $time = '2013-03-18 11:48:26'; 
        $time = date('g:i A M dS', strtotime($time));
        echo $time; 
```

然后它显示 **3 月 18 日上午 6:48**它应该显示**3 月 18 日上午 11:48** 有人可以告诉我出了什么问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:55:43.120

检查您的服务器时区设置。

或使用 php 更改

```
// example for japan time zone

date_default_timezone_set('Asia/Tokyo'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:16:49.917

如果要显示数据库中的时间，可以使用此查询。

```
SELECT NOW(); 
```

它会给你服务器时间。你可以创建一个助手，它可以从模型中查询时间，你可以在任何地方调用助手。

# android - sqlite错误android

> ID：15471182
> 
> 赞同：0
> 
> 时间：2013-03-18T06:52:58.030
> 
> 标签：android, database, sqlite

我在创建数据库时总是遇到这个错误：

> java.lang.IllegalArgumentException：版本必须 >= 版本 0 在 android.database.sqlite.SQLiteOpenHelper

任何想法如何解决这个问题。我的代码如下

```
public class DatabaseHandler extends SQLiteOpenHelper{

    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME   = "Exm"; 
    private static final String KEY_ID          = "id";
    private static final String KEY_USERID      = "userId";
    private static final String KEY_USERNAME    = "userName";
    private static final String KEY_LOGINSTATUS = "userLoginStatus";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_USER + "("
                                        + KEY_ID +   " INTEGER PRIMARY KEY ,"
                                        + KEY_USERID + " VARCHAR (32) ,"
                                        + KEY_USERNAME + " VARCHAR (50),"
                                        + KEY_LOGINSTATUS + " INTEGER" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_USER);
        // Create tables again
        onCreate(db);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:02:50.177

Make sure you have declared `TABLE_USER`. I cannot see it in your code above.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:41:52.960

您不应该在 onUpgrade() 中调用 onCreate(db)。

如果您想重用代码，请将那段代码放在其他地方，然后从 onCreate 和 onUpgrade 调用该方法。

```
字符串 CREATE_CONTACTS_TABLE = "创建表 " + TABLE_USER + "("
                                    + KEY_ID + " 整数主键 "
                                    + KEY_USERID + " VARCHAR (32) "
                                    + KEY_USERNAME + " VARCHAR (50),"
                                    + KEY_LOGINSTATUS + "整数" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);

```

将这段代码保存在另一个方法中，并从 onCreate 和 onUpgrade 方法中调用该方法。

# android - Android 全宽视频视图

> ID：15471183
> 
> 赞同：4
> 
> 时间：2013-03-18T06:52:59.603
> 
> 标签：android, layout, video

我正在尝试将线性布局内的视频视图拉伸到全屏，但它与设备屏幕不匹配。这是我的代码

```
<LinearLayout
     android:id="@+id/linearLayout1"
     android:layout_width="fill_parent"
     android:layout_height="720dp"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:layout_alignParentRight="true"
     android:layout_gravity="fill_horizontal"
     android:layout_marginTop="140dp" >

<VideoView
    android:id="@+id/videoView1"
    android:layout_width="fill_parent"
    android:layout_height="720dp" />

</LinearLayout> 
```

左右两边总是有 10 到 15 dp 的空间。线性布局也没有扩展到全屏。我希望它在宽度上填满屏幕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-03T22:10:18.580

实际上没有必要以编程方式设置宽度

```
android:layout_width="match_parent"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true" 
```

应该足以用全宽视频视图填充容器。并使用 match_parent 而不是 fill_parent。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T10:34:13.507

您可以使用显示矩阵获取屏幕的当前高度和宽度

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int h = displaymetrics.heightPixels;
int w = displaymetrics.widthPixels; 
```

现在为您的视频视图使用这个高度和宽度:) 以编程方式使用它，而不是像 720dp 那样硬编码它。 `getWidth()`并被`getHeight()`谷歌弃用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T06:59:59.603

获取布局的运行时高度和宽度并将其设置为`VideoView`

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();
int height = display.getHeight();                  
//videoview.setLayoutParams(new FrameLayout.LayoutParams(550,550));                    
videoview.setLayoutParams(new FrameLayout.LayoutParams(width,height));

//FrameLayout : write your  layout name which you used 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:15:38.913

尝试使用`fill_parent`in`android:layout_height`而不是使用特定高度。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentBottom="true"
    android:layout_gravity="fill_horizontal">

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

# javascript - 两种javascript函数？

> ID：15471184
> 
> 赞同：0
> 
> 时间：2013-03-18T06:53:01.730
> 
> 标签：javascript

我是 javascript 新手。

我想这有什么区别

```
 function aa(){
    //code
}

    function bb(){
      //code
    } 
```

和这个

```
var b = {
        aa : function (){
    //code
      },
       bb: function () {
        //code
   }
}; 
```

我知道功能。但我不知道另一个。

它叫什么，有什么区别？？哪个更好更快？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:57:54.000

第一个创建两个命名函数：`aa`和`bb`.

第二个创建了一个名为的对象，该对象`b`具有两个属性：`aa`和`bb`，这两个属性都具有匿名函数作为值。

他们做不同的事情，所以你不能说哪个“更好”。

# wcf - 哈希表在 WCF 中是如何工作的？

> ID：15471185
> 
> 赞同：2
> 
> 时间：2013-03-18T06:53:02.713
> 
> 标签：wcf

我有个问题。

考虑以下

**IService1.cs**

```
[ServiceContract]
public interface IService1
{

    [OperationContract]
    Hashtable GetHashTableCollection();

    [OperationContract]
    List<A> GetARecords();

}

[DataContract]
public class A
{
    [DataMember]
    public int MyProperty { get; set; }

    [DataMember]
    public Hashtable MyTable { get; set; }
} 
```

**服务1.cs**

```
 public class Service1 : IService1
    {
        public Hashtable GetHashTableCollection()
        {
            Hashtable hashtable = new Hashtable();
            hashtable.Add("Area", 1000);
            hashtable.Add("Perimeter", 55);
            hashtable.Add("Mortgage", 540);
            return hashtable;
        }

        public List<A> GetARecords()
        {
            List<A> Alist = new List<A>();
            Alist.Add(new A { MyProperty = 1, MyTable = GetHashTableCollection() });
            Alist.Add(new A { MyProperty = 2, MyTable = GetHashTableCollection() });

            return Alist;
        }
  } 
```

客户端应用程序如下

```
private void button1_Click(object sender, EventArgs e)
{
   ServiceReference1.Service1Client sc = new ServiceReference1.Service1Client();
   var r1 = sc.GetHashTableCollection(); 
   var r2 = sc.GetARecords();
} 
```

它工作正常，没有任何问题。HashTable 已转换为 Dictionary 对象。

我的印象是，由于 HashTable 使用 IDictionary，所以它应该在编译时失败（发生在 3.5 中）。

**无法将类型“System.Collections.Generic.Dictionary”隐式转换为“System.Collections.Hashtable”**

然而，它奏效了。如何？

我是否缺少任何基本概念？还是 DataContractSerializer 正在做这项工作？还是 dot.net 4.0 发生了一些变化？

它是什么以及它为什么起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:44:24.783

它基于`IDictionary`. WCF 将 IDictionary 视为 a`Dictionary<object, object>`并且它在 WSDL 上也是如此公开的。您可以有一个已实现的自定义类`IDictionary`，并且行为将是相同的。例如，如果您运行以下任一项目，并使用`svcutil`或添加服务引用来生成服务的代理，您有一个`IDictionary`类型，您将`Dictionary<object, object>`在客户端中获得一个。

```
public class StackOverflow_15471185
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        Hashtable GetHashTableCollection();
        [OperationContract]
        List<A> GetARecords();
    }

    [DataContract]
    public class A
    {
        [DataMember]
        public int MyProperty { get; set; }

        [DataMember]
        public Hashtable MyTable { get; set; }
    }

    public class Service : IService1
    {
        public Hashtable GetHashTableCollection()
        {
            Hashtable hashtable = new Hashtable();
            hashtable.Add("Area", 1000);
            hashtable.Add("Perimeter", 55);
            hashtable.Add("Mortgage", 540);
            return hashtable;

        }

        public List<A> GetARecords()
        {
            List<A> Alist = new List<A>();
            Alist.Add(new A { MyProperty = 1, MyTable = GetHashTableCollection() });
            Alist.Add(new A { MyProperty = 2, MyTable = GetHashTableCollection() });

            return Alist;
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(IService1), new BasicHttpBinding(), "");
        host.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
        host.Open();
        Console.WriteLine("Host opened");

        var factory = new ChannelFactory<IService1>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        var proxy = factory.CreateChannel();
        Console.WriteLine(proxy.GetHashTableCollection());

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
}

public class StackOverflow_15471185_b
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        MyDic GetHashTableCollection();
        [OperationContract]
        List<A> GetARecords();
    }

    public class MyDic : IDictionary
    {
        public IDictionary dic = new Hashtable();

        public void Add(object key, object value)
        {
            dic.Add(key, value);
        }

        public void Clear()
        {
            dic.Clear();
        }

        public bool Contains(object key)
        {
            return dic.Contains(key);
        }

        public IDictionaryEnumerator GetEnumerator()
        {
            return dic.GetEnumerator();
        }

        public bool IsFixedSize
        {
            get { return dic.IsFixedSize; }
        }

        public bool IsReadOnly
        {
            get { return dic.IsReadOnly; }
        }

        public ICollection Keys
        {
            get { return dic.Keys; }
        }

        public void Remove(object key)
        {
            dic.Remove(key);
        }

        public ICollection Values
        {
            get { return dic.Values; }
        }

        public object this[object key]
        {
            get
            {
                return dic[key];
            }
            set
            {
                dic[key] = value;
            }
        }

        public void CopyTo(Array array, int index)
        {
            dic.CopyTo(array, index);
        }

        public int Count
        {
            get { return dic.Count; }
        }

        public bool IsSynchronized
        {
            get { return dic.IsSynchronized; }
        }

        public object SyncRoot
        {
            get { return dic.SyncRoot; }
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return ((IEnumerable)dic).GetEnumerator();
        }
    }

    [DataContract]
    public class A
    {
        [DataMember]
        public int MyProperty { get; set; }

        [DataMember]
        public MyDic MyTable { get; set; }
    }

    public class Service : IService1
    {
        public MyDic GetHashTableCollection()
        {
            MyDic hashtable = new MyDic();
            hashtable.Add("Area", 1000);
            hashtable.Add("Perimeter", 55);
            hashtable.Add("Mortgage", 540);
            return hashtable;

        }

        public List<A> GetARecords()
        {
            List<A> Alist = new List<A>();
            Alist.Add(new A { MyProperty = 1, MyTable = GetHashTableCollection() });
            Alist.Add(new A { MyProperty = 2, MyTable = GetHashTableCollection() });

            return Alist;
        }
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(IService1), new BasicHttpBinding(), "");
        host.Description.Behaviors.Add(new ServiceMetadataBehavior { HttpGetEnabled = true });
        host.Open();
        Console.WriteLine("Host opened");

        var factory = new ChannelFactory<IService1>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        var proxy = factory.CreateChannel();
        Console.WriteLine(proxy.GetHashTableCollection());

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# javascript - 如何评估以下 Javascript 表达式？

> ID：15471186
> 
> 赞同：3
> 
> 时间：2013-03-18T06:53:10.577
> 
> 标签：javascript, expression

```
[-1,1][+!!boolean] 
```

我在调试 JS 代码时发现了这一行。顾名思义，var boolean 可以具有真值或假值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:00:30.797

嗯，真恶心。这是发生了什么：

```
!!boolean 
```

这变成`boolean`了一个真/假布尔值。是`!`否定，所以当你做两个时，你强制否定的否定，或者原始的布尔值。基本上，它确实：

```
var x = boolean;
if (x) {
    x = true;
} else {
    x = false;
} 
```

把`+`右边变成一个数字。`+true`->`1`和`+false`-> `0`。

第一位是一个数组。它通过右侧的任何内容来索引该数组文字。

简而言之，如果`boolean`为真，则抓取第二个元素，否则抓取第一个。

```
[-1,1][+!!true] === 1
[-1,1][+!!false] === -1 
```

一个不那么糟糕的版本（使用三元）：

```
var x = boolean ? 1 : -1; 
```

或滥用`&&`and `||`：

```
var x = (boolean && 1) || -1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:01:57.813

第一位创建一个包含两个值的数组：

```
[-1,1] 
```

第二位通过进行双重反转来确保“布尔”实际上是一个布尔值：

```
!!boolean == boolean 
```

加号运算符用于将此布尔值转换为数字，其中`true => 1`和`false => 0`。

最终，该数字用于选择该数组中的两个值之一，即该表达式将“真”变为 1，将“假”变为 -1。

但是，这可能更具可读性：

```
boolean ? 1 : -1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T07:08:53.813

表达式是一个包含值和`[-1,1]`的数组。`-1``1`

第二组括号从数组中获取一个值。例如，如果`x`是一个数组，则`x[0]`获取第一个元素。如果我们写`y = [-1,1][0]`，这与以下内容相同：

```
var x = [-1,1];
y = x[0]; 
```

那么，现在呢`+!!boolean`？好吧，`!`如果它不是“假的”，则将值转换为布尔值。如果它是真的，如果它是假的，那么再次应用`!`就会转换它。（我推荐[这个谷歌搜索](http://google.com/search?q=javascript%20truthy%20and%20falsy)的术语真假）`true``false`

最后，`+`（正）运算符将其转换为数字。将其视为`-`（负）运算符的反面。因此`+true`转换为`1`并`+false`转换为`-1`.

如果您要采用它的扩展形式并将其编写为函数，那就是它（在我看来）：

```
function( value ){
    var  output_values  =  [ -1, 1 ]
      ,  boolean        =   !!value
      ,  index          =    +boolean
      ;        
    return output_values[ index ];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:01:55.977

它试图根据一个变量从第一个数组中选择一个元素：

```
[-1,1][INDEX BASED ON BOOLEAN VALUE] 
```

该代码相当于：

```
var myArr = [-1,1];
var selected = null;
if(boolean === false ){
     selected = myArr[0];
}
else {
     selected = myArr[1]; 
```

}

说明：

`[+!!boolean]`将根据 boolean 的值返回 0 或 1，已完成双重否定以将所有虚假值（如 false、空数组、未定义、空对象）转换为布尔值 false，并将真值转换为布尔值 true。将 a`+`放在它们前面会将它们类型转换为整数，从而使其成为目标数组 [-1,1] 的有效索引 0 或 1

# java - 使用 Java API 格式化 JavaScript

> ID：15471189
> 
> 赞同：6
> 
> 时间：2013-03-18T06:53:11.853
> 
> 标签：java, javascript, velocity

我正在使用 java 中的速度生成 JavaScript 代码。

例如：我生成了 JavaScript 并得到了以下字符串：

```
importClass(java.util.ArrayList); function fun(arg) { if (true){ return true;} else{    return true;}} 
```

是否有任何 Java API 采用此字符串并以下列方式格式化此 JavaScript：

```
importClass(java.util.ArrayList);

function fun(arg) { 
   if (true){ 
       return true;
   }
   else{
    return true;
   } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T21:18:51.170

## 闭包编译器

您可以使用 Google 的*Closure Compiler*。
它格式化、压缩、优化和查找 JavaScript 代码中的错误。

要快速了解它的功能，您可以[尝试使用 Web 服务](http://closure-compiler.appspot.com/home)。

* * *

## 例子

对于您的示例字符串，

```
importClass(java.util.ArrayList); function fun(arg) { if (true){ return true;} else{    return true;}} 
```

如果您只想格式化它，请使用编译选项*"Whitespace only"*和*"Pretty print"*，它们会返回：

```
importClass(java.util.ArrayList);
function fun(arg) {
  if(true) {
    return true
  }else {
    return true
  }
}
; 
```

无论如何，使用 Closure 编译器，您有几个选项可以优化和/或格式化您的输入代码（以字符串或文件 URI 的形式给出），并将优化/格式化的 JS 作为字符串返回或将其保存到文件中。

我真的可以推荐使用*“简单”*优化模式。对于更长的 Javascript，它确实为您节省了大量不需要的字节。另外，它加快了脚本的执行速度！

对于您的示例字符串，编译选项*"Simple"*（而不是*"Whitespace only"*）和*"Pretty print"*返回

```
importClass(java.util.ArrayList);
function fun() {
  return!0
}
; 
```

如您所见，两个`fun()`函数的结果是相同的（布尔值`true`）。
然而，第二个已经删除了所有无用的代码（通过保持有效性！）并且将执行得更快。

* * *

## 下载和参考

现在，实际的编译器是用 Java 编写的，可以作为[命令行实用程序下载](http://closure-compiler.googlecode.com/files/compiler-latest.zip)（2014-07-10 更新：[新的下载](http://dl.google.com/closure-compiler/compiler-latest.zip)链接）。

作为第二种选择，您可以实现自己的包装类来与 REST API 通信（[就像我为 PHP 所做的那样](https://github.com/eyecatchup/CC_Service-php/blob/master/CC_Service.php)）。不需要太多的努力/代码。

更多信息可在此处获得：
[Google 代码项目页面](https://code.google.com/p/closure-compiler/)
[入门](https://developers.google.com/closure/compiler/docs/gettingstarted_app)
[常见问题解答：如何从 Java API 调用闭包编译器？](https://code.google.com/p/closure-compiler/wiki/FAQ#How_do_I_call_Closure_Compiler_from_the_Java_API%3F)
[REST API 参考](https://developers.google.com/closure/compiler/docs/api-ref)

希望有帮助。

# iphone - 在失败的情况下重试 Async_task 和 NSURLConnection

> ID：15471192
> 
> 赞同：0
> 
> 时间：2013-03-18T06:53:18.933
> 
> 标签：iphone, asynchronous, httprequest, grand-central-dispatch

在里面`dispatch_async`我正在向服务器发出一个http请求，现在如果请求失败我需要重试最后一个请求，但是由于这是一个异步请求，是否可以重新启动`async_task`自身？

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
          ^{
              [[LocUtility sharedInstance] CallDelayApiwithLocation:newLocation];
          }); 
```

或者请在失败的情况下建议任何执行此类请求的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:50:41.937

你想看看 NSTimer 类。当您的请求失败时，您可以创建一个 NSTimer 以指定的时间间隔重复触发。当您的请求成功时使计时器无效。记住要处理应用程序进入后台并返回的情况。

# c++ - 虚拟类的向量：指针是干净的方式吗？

> ID：15471193
> 
> 赞同：2
> 
> 时间：2013-03-18T06:53:19.810
> 
> 标签：c++, pointers, vector, virtual, concrete

注意：这几乎是这个条目的重复： [抽象类和指针](https://stackoverflow.com/questions/13904406/abstract-classes-and-pointers)

我需要创建一个虚拟类向量。这里的想法：

```
#include <vector>
using namespace std;

class VirtualFoo {
protected:
    VirtualFoo();
    virtual ~VirtualFoo();
public:
    virtual void doStuff()=0;
};

class ConcreteFoo: public VirtualFoo {
public:
    ConcreteFoo(double a);
    virtual ~ConcreteFoo();
    void doStuff();
private:
    double a;
};

class Foo {
public:
    Foo(std::vector<VirtualFoo> foos);
    virtual ~Foo();
    void doAllStuff();
protected:
    std::vector<VirtualFoo> foos;
}; 
```

我想这样使用它：

```
int main(int argc, char *argv[]){

    std::vector<ConcreteFoo> cfoos;
    cfoos.push_back(ConcreteFoo(1.0));
    cfoos.push_back(ConcreteFoo(2.0));

    Foo foo = Foo(cfoos);
    foo.doAllStuff();

} 
```

当然这不起作用，因为 cfoos 是 VirtualFoo 而不是 ConcreteFoo 的向量。

现在，如果我不使用 VirtualFoo 的向量，而是使用 VirtualFoo* 的向量并将指针推回 ConcreteFoo 的实例，那似乎可以正常工作。

只是，我不确定这是最干净的方法。这更像是我没有想到任何其他方式来做到这一点。这样做可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:42:14.910

带有指针的向量 `std::vector<VirtualFoo*> cfoos;`很好。您无法实例化抽象类，因此编译器无法实例化或专门化使用抽象类作为值的向量模板。用基类指针指向元素很好，这是 Liskov 替换原则（[http://en.wikipedia.org/wiki/Liskov_substitution_principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)）

我同意其他人的评论，即共享指针是更好的解决方案，因此您不必担心内存管理：

```
std::vector<shared_ptr<VirtualFoo>> cfoos;  
cfoos.push_back( shared_ptr<VirtualFoo> (new ConcreteFoo(1.0)) );   
cfoos.push_back( shared_ptr<VirtualFoo> (new ConcreteFoo(2.0)) ); 
```

# osgi - API 包的语义版本控制

> ID：15471196
> 
> 赞同：3
> 
> 时间：2013-03-18T06:53:23.783
> 
> 标签：osgi, versioning, semantics, backwards-compatibility, api-design

当从 API 包中版本为 1.0.0 的包开始时，向所述包添加新接口后的新版本应该是什么？[白皮书](http://www.osgi.org/wiki/uploads/Links/SemanticVersioning.pdf "语义版本控制技术白皮书")就兼容性做出了以下声明：

> 很明显，二进制兼容性在向后兼容中起着重要作用。但是，向后兼容性也非常依赖于语义。如果接口的职责发生变化，它仍然可以是二进制兼容的，但不再是向后兼容的。

同时...

> 3.micro - 微部分的差异并不表示任何向后兼容性问题

一个新的接口不会导致它的提供者出现任何类型的*二进制*不兼容——很可能简单地省略一个实现。这是否被认为是包语义的“向后不兼容”更改？这是否意味着新版本应该是 1.1.0？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T07:38:54.070

将接口添加到包中至少是一个微小的变化（1.2.3 -> 1.3.0），因为您破坏了 API 的提供者（在 OSGi 中是一个包），API 的提供者几乎没有向后兼容性，因为它们，好吧，提供API。毕竟，API 中的任何新义务都需要一些新代码。

现在假设您让消费者*有义务*在 API 中实现这个新接口。这种变化（编译器不可见）显然破坏了所有现有的消费者，因此对每个人来说都是一个破坏性的变化（例如 1.2.3 -> 2.0.0）。

总结：

*   微更改 -> 向后兼容 API 的现有提供者和消费者
*   小改动 -> API 的现有提供者不兼容，但消费者兼容
*   重大变化 -> 现有的提供者和消费者不再兼容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:06:13.257

[语义版本](http://semver.org/)确实提到：

> 如果将任何向后不兼容的更改引入公共 API，则必须增加主要版本`X`( `X.y.z`| )。`X > 0`

如果新接口的添加只是调用几个旧接口，现在链接到一个新操作中，则应该认为它在语义上是向后兼容的。
在这种情况下，小版本增量就足够了。

# regex - PERL 正则表达式匹配包含特定目录路径的行

> ID：15471199
> 
> 赞同：0
> 
> 时间：2013-03-18T06:53:55.860
> 
> 标签：regex, perl

在 Perl 中使用正则表达式过滤所有包含例如的行的最佳方法是什么`/usr/libexec/postfix`？

这也会捕获，例如：`/usr/libexec/postfix/qmgr`, `/usr/libexec/postfix/smtp`,`/usr/libexec/postfix/local`等等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:01:05.617

这应该有效：

```
if ($line =~ m{^/usr/libexec/postfix.*}) {
     print "Match!\n";
} else {
     print "No match\n";
} 
```

工作示例： [http ://codepad.org/jkVlISdv](http://codepad.org/jkVlISdv)

# java - Lucene 索引器在一个很小的文档集合上出现 OutOfMemory

> ID：15471200
> 
> 赞同：0
> 
> 时间：2013-03-18T06:54:10.507
> 
> 标签：java, lucene, indexing, search-engine, out-of-memory

我正在尝试对几个文本文档进行索引。

它们的内容只是字段制表符分隔的字符串：

```
WORD<\t>w1<\t>w2<\t>...<\t>wn

POS<\t>pos1<\t>pos2_a:pos2_b:pos2_c<\t>...<\t>posn_a:posn_b
... 
```

对于 POS 字段，'`:'-`分隔的标记对应于相同的歧义词。

有 5 个文档，总大小为 10 MB。在编制索引时，java 使用了大约 2 GB 的 RAM，最终引发 OOM 错误。

```
String join_token = tok.nextToken();
// atomic tokens correspond to separate parses
String[] atomic_tokens = StringUtils.split(join_token, ':');
// marking each token with the parse number
for (int token_index = 0; token_index < atomic_tokens.length; ++token_index) {
  atomic_tokens[token_index] += String.format("|%d", token_index);
}
String join_token_with_payloads = StringUtils.join(atomic_tokens, " ");
TokenStream stream = new WhitespaceTokenizer(Version.LUCENE_41, // OOM exception appears here
                                             new StringReader(join_token_with_payloads));
// all these parses belong to the same position in the document
stream = new PositionFilter(stream, 0);
stream = new DelimitedPayloadTokenFilter(stream, '|', new IntegerEncoder());
stream.addAttribute(OffsetAttribute.class);
stream.addAttribute(CharTermAttribute.class);
feature = new Field(name,
                    join_token,
                    attributeFieldType);
feature.setTokenStream(stream);
inDocument.add(feature); 
```

从内存的角度来看，这段代码有什么问题，以及如何用 RAM 中尽可能少的数据进行索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:15:31.713

如果我正确理解了问题（我没有尝试过），这是我的建议

1.  在代码中使用 Camel 大小写是一种很好的做法，这是 Java 的约定
2.  您不需要手动生成位置，只需使用 Field.TermVector.WITH_POSITIONS_OFFSETS 创建一个字段，指标将最终出现在索引中。
3.  创建如此庞大的 String 数组会导致非常大的内存开销 -> 使用 StringBuilder。
4.  使用 LetterTokenizer 对流进行标记或通过扩展 CharTokenizer 编写自己的标记器
5.  [顺便说一句，Lucene 在行动中](http://www.manning.com/hatcher3/)的好书

# javascript - 使用 javascript 解析字符串

> ID：15471206
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:54:56.623
> 
> 标签：javascript, jquery

我想使用 javascript 解析这个字符串，如何做到这一点

```
[ +919999999999, +919999999999]. 
```

我想将输出显示为 +919999999999

和 +919999999999

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T06:59:05.020

```
var str = "[ +919999999999, +919999999999]";

var val = str.replace('[','').replace(']','').split(',');
alert(val[0]); //+919999999999 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:58:52.637

如果是字符串，请使用替换替换`[]`并拆分它...

```
var data= "[ +919999999999, +919999999999]".
var generatedValue = data.replace('[','').replace(']','').split(',');
alert(generatedValue[0]); //alerts  +919999999999 
alert(generatedValue[1]); //alerts +919999999999 
```

如果数组（看起来像一个......），`[index]`用来得到那个试试这个

```
var data= "[ +919999999999, +919999999999]".
alert(data[0]); //alerts +919999999999
alert(data[1]); //alerts +919999999999 
```

# ruby-on-rails - ruby on rails 替换了一些字符串

> ID：15471215
> 
> 赞同：0
> 
> 时间：2013-03-18T06:55:38.050
> 
> 标签：ruby-on-rails, ruby

我有两个字符串。一种是：

`"/system/musics/videos/000/000/001/original/%E5%B9%BF%E5%9C%BA%E8%88%9E%E5%BF%AB%E5%9B%9B_-_%E5%A4%A7%E8%8D%89%E5%8E%9F-%E4%BE%AF%E6%AD%8C.MP3"`

第二个是：

```
"广场舞快四_-_大草原-侯歌.MP3" 
```

我想得到：

```
"/system/musics/videos/000/000/001/original/广场舞快四_-_大草原-侯歌.MP3" 
```

有谁知道如何在 ruby​​ 中查找和替换字符串？我的想法是`'/'`用第二个字符串替换最后一个之后的内容。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:58:43.683

```
first_string = "/system/musics/videos/000/000/001/original/%E5%B9%BF%E5%9C%BA%E8%88%9E%E5%BF%AB%E5%9B%9B_-%E5%A4%A7%E8%8D%89%E5%8E%9F-%E4%BE%AF%E6%AD%8C.MP3"
second_string = "广场舞快四-_大草原-侯歌.MP3"

"#{File.dirname(first_string)}/#{second_string}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:26:55.673

在处理文件名时，特别是如果您的代码有可能在多个操作系统上使用，请使用内置的文件名操作方法[`dirname`](http://www.ruby-doc.org/core-2.0/File.html#method-c-dirname)和[`join`](http://www.ruby-doc.org/core-2.0/File.html#method-c-join)：

```
File.join(
  File.dirname(
    "/system/musics/videos/000/000/001/original/%E5%B9%BF%E5%9C%BA%E8%88%9E%E5%BF%AB%E5%9B%9B_-_%E5%A4%A7%E8%8D%89%E5%8E%9F-%E4%BE%AF%E6%AD%8C.MP3"
  ),
  "广场舞快四_-_大草原-侯歌.MP3"
) 
```

原因是，`File.join`并且`File.dirname`知道特定操作系统上使用的文件名分隔符，由`File::SEPARATOR`and提供`File::ALT_SEPARATOR`，使它们能够正确拆分和连接路径。

你也会经常发现[`File.basename`](http://www.ruby-doc.org/core-2.0/File.html#method-c-basename)和[`File.extname`](http://www.ruby-doc.org/core-2.0/File.html#method-c-extname)有用。

# javascript - 如何在 xAxis 上使用 d3.js 格式化时间

> ID：15471224
> 
> 赞同：59
> 
> 时间：2013-03-18T06:56:00.623
> 
> 标签：javascript, d3.js

根据[http://bl.ocks.org/mbostock/3883245上的演示](https://i.stack.imgur.com/oleY4.png)

我不知道如何在 xAxis 上格式化时间

这是我的代码：js：

```
    变量数据 = [{
            "creat_time": "2013-03-12 15:09:04",
            “记录状态”：“好的”，
            "roundTripTime": "16"
        }, {
            "creat_time": "2013-03-12 14:59:06",
            “记录状态”：“好的”，
            “往返时间”：“0”
        }, {
            "creat_time": "2013-03-12 14:49:04",
            “记录状态”：“好的”，
            “往返时间”：“297”
        }, {
            "creat_time": "2013-03-12 14:39:06",
            “记录状态”：“好的”，
            “往返时间”：“31”
        },{
            "creat_time": "2013-03-12 14:29:03",
            “记录状态”：“好的”，
            “往返时间”：“0”
    }];
    var margin = {上：20，右：20，下：30，左：50}；
    var 宽度 = 960 - margin.left - margin.right;
    var height = 500 - margin.top - margin.bottom;
    var parseDate = d3.time.format("%Y-%m-%d %H:%M:%S").parse;
    var x = d3.time.scale()
        .range([0, 宽度]);

    var y = d3.scale.linear()
        .range([高度, 0]);

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("底部");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("左");

    var line = d3.svg.line()
        .x（函数（d）{返回x（d.creat_time）；}）
        .y(function(d) { return y(d.roundTripTime); });

    var svg = d3.select("body").append("svg")
        .attr("宽度", width + margin.left + margin.right)
        .attr("高度", 高度 + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    data.forEach（函数（d）{
        d.creat_time = parseDate(d.creat_time);
        d.roundTripTime = +d.roundTripTime;
    });

    x.domain(d3.extent(data, function(d) { return d.creat_time; }));
    y.domain(d3.extent(data, function(d) { return d.roundTripTime;}));

    svg.append("g")
          .attr("类", "x 轴")
          .attr("变换", "翻译(0," + 高度 + ")")
          .call(xAxis);

    svg.append("g")
          .attr("类", "y 轴")
          .call(yAxis)
          .append("文本")
          .attr("变换", "旋转(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("文本锚", "结束")
          .text("返回时间(ms)");

    svg.append("路径")
          .datum（数据）
          .attr("类", "行")
          .attr("d", 行);

```

这是svg： ![在此处输入图像描述](../Images/e6ce7622468345711bca351f8b1a1c1b.png)

在 svg 中，时间是 12 小时制，但在我的数据中，时间是 24 小时制。如何在 svg 和数据上保持相同的格式？

任何帮助表示赞赏。（ps：我希望你不要介意我的英语，它太糟糕了。）

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-18T09:43:13.210

您可以在轴对象上使用 tickFormat 函数，如下所示

```
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(d3.time.format("%H")); 
```

`%H`指定`hour (24-hour clock) as a decimal number [00,23]`. _ 检查此链接[D3 时间格式](https://github.com/d3/d3-time-format/blob/master/README.md#user-content-locale_format)以获取更多信息

[您可以在这个支流24 小时时间示例](http://tributary.io/inlet/5186053)中查看一个工作示例

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-01-28T00:37:42.870

公认的答案确实是正确的，但就我而言，我需要格式的灵活性以适应不同的比例（想想缩放），但也要确保使用 24 小时制时钟。关键是定义**多分辨率时间格式**。有关详细信息，请参阅[文档](https://github.com/mbostock/d3/wiki/Time-Formatting#format_multi)页面。

我的代码：

```
var axisTimeFormat = d3.time.format.multi([
    [".%L", function(d) { return d.getMilliseconds(); }],
    [":%S", function(d) { return d.getSeconds(); }],
    ["%H:%M", function(d) { return d.getMinutes(); }],
    ["%H:%M", function(d) { return d.getHours(); }],
    ["%a %d", function(d) { return d.getDay() && d.getDate() != 1; }],
    ["%b %d", function(d) { return d.getDate() != 1; }],
    ["%B", function(d) { return d.getMonth(); }],
    ["%Y", function() { return true; }]
 ]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(axisTimeFormat); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-29T15:16:49.190

我想[将此链接](https://bl.ocks.org/zanarmstrong/raw/ca0adb7e426c12c06a95/)添加到一个很棒的演示页面。当您可以选择您的案例所需的格式说明符时，这是一个游乐场。当您不记得/不知道应该将什么格式说明符传递给您的`d3.timeFormat`函数时，它非常有用。

我还想注意，如果你有 d3 版本 4，你应该使用[`d3.timeFormat`](https://github.com/d3/d3-time-format/blob/master/README.md#timeFormat)函数，而不是`d3.time.format`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-20T22:15:54.273

在 v4 中，

```
...
var scaleX = d3.scaleTime().range([0, width]);
var axisBottom = d3.axisBottom(scaleX)
                   .ticks(d3.timeMinute, 10); // Every 10 minutes
... 
```

请注意，使用`d3.timeMinute`- 不`d3.timeMinutes`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-02T04:08:17.117

对于d3 v4 及更高版本中的**多分辨率时间格式**`d3.time.multi`，已弃用。相反，自己定义格式并使用三元组来检测正确的时间，使用[时间间隔](https://github.com/d3/d3-time)。

```
var formatMillisecond = d3.timeFormat(".%L"),
    formatSecond = d3.timeFormat(":%S"),
    formatMinute = d3.timeFormat("%I:%M"),
    formatHour = d3.timeFormat("%I %p"),
    formatDay = d3.timeFormat("%a %d"),
    formatWeek = d3.timeFormat("%b %d"),
    formatMonth = d3.timeFormat("%B"),
    formatYear = d3.timeFormat("%Y");

function multiFormat(date) {
  return (d3.timeSecond(date) < date ? formatMillisecond
      : d3.timeMinute(date) < date ? formatSecond
      : d3.timeHour(date) < date ? formatMinute
      : d3.timeDay(date) < date ? formatHour
      : d3.timeMonth(date) < date ? (d3.timeWeek(date) < date ? formatDay : formatWeek)
      : d3.timeYear(date) < date ? formatMonth
      : formatYear)(date);
} 
```

当调用类似的时间间隔时`d3.timeDay(date)`，它将当前日期下限为日、周等。

如果下限日期等于当前日期，则为`d3.timeSecond(date) < date`假。但如果它更小（这意味着，您可以确定日期），那么这是真的，我们使用格式化程序。

在实践中：

```
var d = new Date(2020,1,2) // 2020-02-02T00:00

// floor to nearest second
d3.timeSecond(d) // 2020-02-02T00:00, date gets floored but is equal to date 
                 // after flooring, since it already was :00 seconds
d3.timeSecond(d) < d // equal so false, move on to next precision

// ...
// floor to nearest month
d3.timeMonth(d) // 2020-02-01T00:00, date gets floored to months
d3.timeMonth(d) < d // floored date is now smaller, so true, and use month formatter 
```

来自[d3-time-format 的](https://github.com/d3/d3-time-format)代码。

# symfony - Symfony2 事件监听器并获得对内核、请求和响应的访问权限？

> ID：15471227
> 
> 赞同：15
> 
> 时间：2013-03-18T06:56:07.840
> 
> 标签：symfony

我真的很难理解这一点，现在我只是在兜圈子。

我已经尽可能多地阅读了手册，付费购买了视频教程，搜索了 Google 和 YouTube，但无法正常工作。

我只是想设置一个在每个请求之前激活的侦听器。我可以做到这一点，但我的问题是访问我需要的各种其他部分。

下面是一个示例，但我认为现在只有实际代码才能帮助我理解这一点。

如果有人能填补空白，我将不胜感激。这只是一个例子，但每个部分都会向我解释我需要知道什么。

在 config.yml 中：

```
services:
    kernel.listener.request_listener:
        class: Acme\Bundle\NewBundle\EventListener\RequestListener
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
        arguments: [ '@service_container' ] 
```

班上：

```
namespace Acme\Bundle\NewBundle\EventListener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
***do I need to 'use' any others here?***

class RequestListener
{

public function onKernelRequest($container) {

    //reference to these: http://api.symfony.com/2.1/Symfony/Component/HttpKernel/Event/KernelEvent.html
    $kernel =

    //reference to the Request object
    $request = $kernel->getRequest();

    //reference to the Response object
    $response =

    //options:
    //  (1)   continue to run usual content
    //  (2)   stop execution and output a message
    //  (3)   set cookie and continue to run usual content
    switch( $request->query->get('option') ) {

        case 1:
            return
        case 2:

            $this->setResponse("hello, message here");

            break;
        case 3:
            // *** not sure if this is the way to do it ***
            $response->headers->setCookie(new Cookie("test", 1));
            break;

    }

}

} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-18T08:36:29.440

您的代码中几乎没有错误`services.yml`
为了使您的代码正常工作，这应该看起来像

`**services.yml**`

```
services:
  listener.requestresponse:
    class: My\AwesomeBundle\Listener\MyListener
    arguments: ['@service_container']
    tags:
      - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
      - { name: kernel.event_listener, event: kernel.response, method: onKernelResponse } 
```

`**My\AwesomeBundle\Listener\MyListener.php**`

```
namespace My\AwesomeBundle\Listener;

use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
use Symfony\Component\HttpFoundation\Cookie;
use Symfony\Component\DependencyInjection\ContainerInterface;

class MyListener
{
    protected $container;

    public function __construct(ContainerInterface $container) // this is @service_container
    {
        $this->container = $container;
    }

    public function onKernelRequest(GetResponseEvent $event)
    {
        $kernel    = $event->getKernel();
        $request   = $event->getRequest();
        $container = $this->container;
    }

    public function onKernelResponse(FilterResponseEvent $event)
    {
        $response  = $event->getResponse();
        $request   = $event->getRequest();
        $kernel    = $event->getKernel();
        $container = $this->container;

        switch ($request->query->get('option')) {
            case 2:
                $response->setContent('Blah');
                break;

            case 3:
                $response->headers->setCookie(new Cookie('test', 1));
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-18T08:50:52.230

看来您实际上并不了解 symfony2 dic 的工作原理。您的`kernel.request`侦听器只能处理案例 1 和 2。对于案例 3，您应该使用`kernel.response`事件。

```
services:
   listener.requestresponse:
     class: Acme\Bundle\NewBundle\EventListener\RequestListener
     tags:
       - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
       - { name: kernel.event_listener, event: kernel.response, method: onKernelResponse } 
```

班上：

```
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\Event\FilterResponseEvent;
use Symfony\Component\HttpFoundation\Response;

class MyListener
{
   public function onKernelRequest(GetResponseEvent $event)
   {
       $request = $event->getRequest();
       if ($request->query->get('option') == 2) {
           $event->setResponse(new Response("hello, message here"));
       }
   }

   public function onKernelResponse(FilterResponseEvent $event)
   {
       $response = $event->getResponse();
       $request  = $event->getRequest();

       if ($request->query->get('option') == 3) {
           $response->headers->setCookie(new Cookie("test", 1));
       }
    }
} 
```

# javascript - 无法捕捉 JS 错误出现在 chrome 的 console.log 中

> ID：15471229
> 
> 赞同：0
> 
> 时间：2013-03-18T06:56:13.340
> 
> 标签：javascript, svg, raphael, graphael, console.log

如果有以下问题的解决方案，那就太好了，或者请告诉我如何简单地捕捉到我的 chrome 的 console.log 中出现的错误。我在我的代码中尝试过 try-catch 和 window.onerror 但徒劳无功。

我正在尝试在“隐藏的 div”中呈现 SVG 图表（ [gRaphael dotchart ）。](http://g.raphaeljs.com/reference.html#Paper.dotchart)但这会`Error: Problem parsing d="L0,0.001"`在我的 chrome 控制台中引发错误。当我单击此错误时，控制台窗口会将我带到发生错误的 html 文件的顶部，而不是客户端代码或 gRaphael 库代码中的确切行。该错误实际上源于在对象`dotchart`上调用函数的位置`Raphael`(r.dotchart(...))。奇怪的是，当 div “不隐藏”时，一切都运行良好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:15:54.813

您是否尝试过将 Chrome 设置为在未捕获的异常时暂停？为此，请将三态“暂停例外”按钮设置为紫色：

![在此处输入图像描述](../Images/108e44f76e805bf4af783d5604324f09.png)

# c# - 在 c# 上使用 CreateFile 返回 isInvalid = true

> ID：15471230
> 
> 赞同：0
> 
> 时间：2013-03-18T06:56:17.013
> 
> 标签：c#, c++, winapi, io, pinvoke

我正在使用如下所示的 CreateFile，并不断获取 isInvalid = true，没有仪表我做什么，但是，从“Marshal.GetLastWin32Error”返回的错误代码正在根据我尝试访问的路径而变化。

以下是路径及其相应的错误代码：

1.  @lpFileName = "c:\" -> 3
2.  @lpFileName = "\\127.0.0.1\share\" -> 123
3.  @lpFileName = "c:\share\" -> 5

显然“c:\”确实存在，据我所知，“\\127.0.0.1\share\”是一个有效的 UNC，我将所有可能的权利授予目标计算机上的每个人，包括 NTFS 和共享。这些都没有意义。

我的系统是Server 2008R2 请帮忙。

创建文件：

```
[DllImport("kernel32.dll", SetLastError = true)]
    static extern SafeFileHandle CreateFile(
        LPCTSTR lpFileName,
        DWORD dwDesiredAccess,
        DWORD dwShareMode,
        LPSECURITY_ATTRIBUTES lpSecurityAttributes,
        DWORD dwCreationDisposition,
        DWORD dwFlagsAndAttributes,
        HANDLE hTemplateFile
        ); 
```

使用以下标志：

```
DWORD dwIoControlCode,
        LPCTSTR lpFileName,
        DWORD dwDesiredAccess = GENERIC_READ | GENERIC_WRITE,
        DWORD dwShareMode = FILE_SHARE_WRITE|FILE_SHARE_READ,
        LPSECURITY_ATTRIBUTES lpSecurityAttributes = default(LPSECURITY_ATTRIBUTES),
        DWORD dwCreationDisposition = OPEN_EXISTING,
        DWORD dwFlagsAndAttributes = 0,
        HANDLE hTemplateFile = default(IntPtr)
        ) 
```

和标志值：

```
 public const DWORD
        GENERIC_READ = 0x80000000,
        GENERIC_WRITE = 0x40000000,
        FILE_SHARE_WRITE = 0x2,
        FILE_SHARE_READ = 0x1,
        OPEN_EXISTING = 0x3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:46:32.013

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)

CreateFile 函数 (Windows)

目录

要使用 CreateFile 打开目录，请将 FILE_FLAG_BACKUP_SEMANTICS 标志指定为 dwFlagsAndAttributes 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:02:01.527

Why are you using unmanaged code here? Try the standard managed options:

```
using(var fs = new FileStream(...)){

} 
```

# python - 如何在 Django/python 中减去这两个日期？

> ID：15471233
> 
> 赞同：-1
> 
> 时间：2013-03-18T06:56:23.757
> 
> 标签：python, django, datetime, datetime-format

我得到这样的 start_date ：`start_date1 = datetime.datetime.utcnow().replace(tzinfo=utc)`

并将 end_date 作为函数参数传递，如下所示：

```
a(datetime.datetime.utcnow().replace(tzinfo=utc)) 
```

它们都以`start_date and end_date`列名存储在数据库中。

我想做的是减去 end_date 和 start_date 来获得持续时间：

```
 start_date = [i.start_date for i in b ]
  end_date = [i.end_date for i in b ] 
```

我会用它来减去这两个日期：`t = [i - j for i, j in zip(y, x)]`

但是问题是 start_date 和 end_date 以 unicode 形式返回。我无法再次将它们转换为日期时间格式。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:14:25.757

在 python 中从另一个日期时间对象中减去一个日期时间对象的结果是一个`timedelta`对象。`datetime`对象定义为从纪元（1970 年 1 月 1 日 00:00:00）开始的一段时间。从另一个中减去一个`datetime`不能返回一个新`datetime`对象（因为它不能与 Epoch 相关），你得到的只是一段时间。那是一个`timedelta`。

[文档](http://docs.python.org/2/library/datetime.html#timedelta-objects)中有很多细节。

# android - Android Canvas 未更新或无效

> ID：15471240
> 
> 赞同：2
> 
> 时间：2013-03-18T06:56:46.000
> 
> 标签：android, canvas

我的资产文件夹中有 newgame .txt 文件。我在方法的字符数组（cboard）中读取了这个文件`loadboard()`。然后根据数组中的值`cboard`填充`Pboard`数组（Pieces 数组，逻辑数组）和 bmp 数组（位图数组，物理板）`fillboard()`。我有另一个`populate()`在画布上绘制位图图像的功能。我`updateBoard()`已经更新了物理阵列 (bmp) 和逻辑阵列 ( `Pboard`)。在调用`updateBoard()`我的逻辑数组`Pboard`和物理数组后`bmp`更新但是当我在画布上绘制它时它具有旧配置。这是我的`loadboard(),fillboard(),populate`功能调用。

```
@Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
    //  super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width=View.MeasureSpec.getSize(widthMeasureSpec);
        height=View.MeasureSpec.getSize(heightMeasureSpec);
        setMeasuredDimension(width, height);`
        b=Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        c=new Canvas(b);

       loadboard();
           fillBoard();
       calculateLinePlacement();
       drawBoard();
           // method draw the board and bitmap images ( call populate()).

    } 
```

在`updateBoard()`我调用函数之后`invalidate()`；

编辑1：

以下是`updateBoard()`方法（从commnet复制）：

```
public void updateBoard(int sr, int sc, int er, int ec) {
Pboard[sr][sc] = new Empty(sr, sc, -3, "empty", board);
Pboard[er][ec] = selectedp;
Bitmap img = bmp[sr][sc];
bmp[sr][sc] = null;
bmp[er][ec] = null;
bmp[er][ec] = img;
} 
```

# android - 如何在 android 的日期选择器中更改选定的日期颜色？

> ID：15471248
> 
> 赞同：3
> 
> 时间：2013-03-18T06:57:16.683
> 
> 标签：android, datepicker, customization

我正在将此代码用于日期选择器..我想设置所选日期的颜色不同。并更改日期选择器中文本的默认颜色。我该如何执行它。我正在使用 android2.2 。

```
 <LinearLayout
    android:id="@+id/datePickerLayout"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.45"
    android:background="#2B2B2B" >

    <DatePicker
        android:id="@+id/datePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="27dp"
        android:layout_marginTop="30dp"
        android:maxDate="@string/maxDate"
        android:minDate="@string/minDate" >
    </DatePicker>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:26:34.517

为了访问 DatePicker 的内部，您必须包含该类的自定义版本。如果您查看源代码，您会注意到 3 个 EditTexts，它们都是私有的，没有公共 getter……好消息是该类相当简单，因此修改它应该很容易。

[http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/widget/DatePicker.java#95](http://androidxref.com/4.2.2_r1/xref/frameworks/base/core/java/android/widget/DatePicker.java#95)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T22:54:54.210

这个想法是循环 DatePicker 的孩子以获得 NumberPickers。获得 NumberPicker 后，获取 Paint 类型的私有字段 mSelectorWheelPaint（用于绘制 DatePicker），并设置它的颜色。

只需使用下一个代码并调用`updateAttrs(yourDatePicker, color)`：

```
void updateAttrs(ViewGroup p, int color) {
    for (int i = 0; i < p.getChildCount(); ++i) {
        View v = p.getChildAt(i);
        if (v instanceof NumberPicker)
           setNumberPickerColor((NumberPicker)v, color);
        else if (v instanceof ViewGroup)
            updateAttrs((ViewGroup)v, color);
    }
}

void setNumberPickerColor(NumberPicker p, int color) {
    try {
        Field selectorWheelPaintField = NumberPicker.class.getDeclaredField("mSelectorWheelPaint");
        if (selectorWheelPaintField != null) {
            selectorWheelPaintField.setAccessible(true);
            ((Paint) selectorWheelPaintField.get(p)).setColor(color);
        }
    }
    catch (Exception e) {
        Log.e("YourTag", e.getMessage(), e);
    }

    for (int i = 0; i < p.getChildCount(); ++i) {
        View v = p.getChildAt(i);
        if (v instanceof EditText)
            ((EditText) v).setTextColor(color);
    }

    p.invalidate();
} 
```

可能您需要系统版本 >= 21 (Lollipop)，但我没有尝试。

# c# - 如何在 ASP.NET MVC3 中使用 HttpFileCollectionBase 实现多文件选择和上传？

> ID：15471250
> 
> 赞同：0
> 
> 时间：2013-03-18T06:57:30.793
> 
> 标签：c#, asp.net-mvc-3

我已经使用[PLUpload](http://www.plupload.com/)框架实现了多文件选择。

有可能进入`Request.Files`控制器以传递给模型（将处理文件）？

我知道`Request.Files`会自动获取页面中的所有`input type='file'`标签。

需要采取什么解决方法？

我不想在提交表单之前上传文件。我希望在提交表单时上传将照此进行。

示例：选择两个文件后，我在 HTML 代码中有以下标签：

```
<div id="filelist">
  <div id="p17lu3r33g14jk1dg31u0dg1l1lll3">test.xml (272 KB) <b></b></div>
  <div id="p17lu3r33h9mt2oiel81l5t17iq4">abcde.xml (272 KB) <b></b></div>
</div> 
```

上传者表单的 HTML 代码：

```
<div id="upload-container">
   <div>
      <a id="pickfiles" href="#">Select files</a>      
      <a id="uploadfiles" href="#">Upload selected files</a>
   </div>
   <div>
      <div id="filelist">
      </div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T06:59:52.617

假设文件输入的名称是例如`files`您可以具有以下控制器操作：

```
[HttpPost]
public ActionResult Upload(IEnumerable<HttpPostedFileBase> files)
{
    ....
} 
```

或定义视图模型：

```
public class MyViewModel
{
    public IEnumerable<HttpPostedFileBase> Files { get; set; }
} 
```

进而：

```
[HttpPost]
public ActionResult Upload(MyViewModel model)
{
    ....
} 
```

再次重要的是让文件输入命名相同。例如：

```
<input type="file" name="files" />
<input type="file" name="files" />
<input type="file" name="files" />
... 
```

* * *

更新：

看来您想使用该`PLUpload`插件。该插件单独发送每个文件并使用块。所以这是一个如何处理服务器上的上传的示例：

```
[HttpPost]
public ActionResult Upload(int? chunk, string name)
{
    var fileUpload = Request.Files[0];
    var uploadPath = Server.MapPath("~/App_Data");
    chunk = chunk ?? 0;
    using (var fs = new FileStream(Path.Combine(uploadPath, name), chunk == 0 ? FileMode.Create : FileMode.Append))
    {
        var buffer = new byte[fileUpload.InputStream.Length];
        fileUpload.InputStream.Read(buffer, 0, buffer.Length);
        fs.Write(buffer, 0, buffer.Length);
    }
    return Json(new { message = "chunk uploaded", name = name });
} 
```

# asp.net - 如何将个人样式添加到主 (site.css) css 文件中？

> ID：15471252
> 
> 赞同：0
> 
> 时间：2013-03-18T06:57:40.563
> 
> 标签：asp.net, css

我有一些需要在单个 aspx 页面上使用的样式类。例如

```
.txtbx
{
    margin-bottom: 20px;
    border-style:solid;
    border-width:thin;
    border-color:Gray;
    height:30px;
    width:250px;   
   -webkit-border-radius: 5px;
   -moz-border-radius: 5px;
    border-radius: 5px;
} 
```

现在，我可以将这样的样式添加到 site.css 文件（当您选择创建新的 Web 应用程序时，这是默认设置）？

如果是，我如何将它应用到单个 .aspx 页面，因为我没有 head 标签？

我阅读了一个解决方案，要求我在内容 (.aspx) 页面中包含一个内容占位符并将链接放入其中。但是，我的每个内容页面上已经有两个内容占位符。我需要添加第三个吗？

此外，是否有另一个（外部）css 文件来定义和使用我的个人样式（例如上面的样式）会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:05:51.757

只需将您的样式添加到主`.css`文件的底部即可。该站点的母版页名为`site.master`. 该页面有一个`<link>`引用`site.css`样式表的元素。

要将您的自定义样式添加到服务器标签，请添加`CssClass`属性并引用您的自定义样式：

```
<asp:Label runat="server" CssClass="{custom style name}">Your text here</asp:Label> 
```

# sql - 无与伦比的记录

> ID：15471253
> 
> 赞同：0
> 
> 时间：2013-03-18T06:57:52.147
> 
> 标签：sql, join

我有两个表，我想在其中显示 MBA 表中存在但未保存在 PIX 表中的 Id

像素

```
 Id Channel Product ProgDate    ProgStartTime   ProgEndTime 
    2   PIX Parachute Advansed  2011-04-02  18:00:00.0000000    01:00:00.0000000
    5   PIX Parachute Advansed  2011-04-02  18:00:00.0000000    01:00:00.0000000
    6   PIX Parachute Advansed  2011-04-02  23:00:00.0000000    01:00:00.0000000 
```

工商管理硕士

```
mbaID   Channel Product-MAP Progdate-MAP    AdvTime 
2   PIX Parachute Advansed  4/2/11  19:54:56
3   PIX Parachute Advansed  4/2/11  19:15:59
4   PIX Parachute Advansed  4/2/11  22:26:28
5   PIX Parachute Advansed  4/2/11  21:47:01
6   PIX Parachute Advansed  4/3/11  0:31:08
7   PIX Parachute Advansed  4/3/11  0:17:23 
```

我需要显示 3 、 4 和 7 列。但是当我执行 JOin 时，它会给我重复。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:00:09.020

`LEFT JOIN``MBA`带有谓词的表`IS NULL`仅显示在另一个表中没有条目的那些行`PIX`。就像是：

```
SELECT MBA.*
FROM MBA 
LEFT JOIN PIX ON MBA.mbaID = pix.id
WHERE pix.Id IS NULL; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/c2fd6/1)

这将为您提供 ID 为 3、4、7 的行：

```
| MBAID | CHANNEL | PRODUCTMAP | PROGDATEMAP |                      ADVTIME |
-----------------------------------------------------------------------------
|     3 |     PIX |  Parachute |    Advansed | April, 02 1911 21:15:59+0000 |
|     4 |     PIX |  Parachute |    Advansed | April, 03 1911 00:26:28+0000 |
|     7 |     PIX |  Parachute |    Advansed | April, 03 1911 02:17:23+0000 | 
```

* * *

您还可以使用`NOT IN`谓词代替`JOIN`：

```
SELECT MBA.*
FROM MBA 
WHERE mbaid NOT IN(SELECT id
                   FROM PIX 
                   WHERE id IS NOT NULL); 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/c2fd6/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:18:07.287

使用`SUBQUERY`

```
select distinct mbaid from mba where mbaid not in (select distinct id from pix) 
```

使用`LEFT OUTER JOIN`

```
select distinct mbaid from mba,pix where mba.mbaid=pix.id(+) and pix.id is null; 
```

# joomla2.5 - 将 joosco 安装到 joomla 2.5 以与 Alfresco 集成后出错

> ID：15471255
> 
> 赞同：1
> 
> 时间：2013-03-18T06:57:55.487
> 
> 标签：joomla2.5, alfresco

我正在使用 joomla 2.5.9。我刚刚安装了 Alfresco Community 4.2。我想整合 joomla 和 Alfresco。所以我安装了 Joosco Extension v0.1 的插件和组件，并按照 joosco .rar 中给出的安装提示进行操作。

但它总是给出这个错误**“致命错误：在第 306 行的 D:\xampp\htdocs\ecm_sample\libraries\joomla\user\authentication.php 中调用未定义的方法 plgAuthenticationJoosco::onUserAuthenticate()”**

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:24:02.377

好像没有安装 Joosco 插件或缺少相应的功能。

检查内部`/plugins/authentication/joosco`（或类似于名称 joosco 的文件夹）。如果它不存在，则说明它没有安装。

如果它在那里，那么它必须包含一个像 joosco.php 这样的文件> 相应的类必须有一个名为 onUserAuthenticate() 的函数。

这就是所有这些错误。

* * *

**编辑：**在我看来，这个插件是为 Joomla 设计的！1.5。您需要寻找与 Joomla 兼容的东西！2.5，试试JED或者论坛。

# html - 我的网站设计的颜色

> ID：15471258
> 
> 赞同：-4
> 
> 时间：2013-03-18T06:58:12.007
> 
> 标签：html, css, colors

*   请检查链接.. [示例站点](http://www.housecreative.co.uk/work.html)

    我想知道上述网站中绿色的名称。我需要将它用于我的设计。请有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T06:59:54.623

看@查看源码

```
.banner-wrap {
text-align: center;
background-color: #63bab0;
background-image: -webkit-linear-gradient(top, #63bab0, #59a79e);
background-image: -moz-linear-gradient(top, #63bab0, #59a79e);
padding: 0 0 1em 0;
margin-bottom: 0;
} 
```

将 colorzilla 安装到您的浏览器，它有助于选择颜色

**[http://www.colorzilla.com/chrome/](http://www.colorzilla.com/chrome/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:00:32.870

它在源代码中：

```
.banner-wrap {
    background-color: hsl(173, 39%, 56%);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:05:11.293

有很多方法可以知道其中一些是使用`photoshop`然后使用`color picker`，如果您的浏览器是 Firefox，请使用[ColorZilla](https://addons.mozilla.org/en-us/firefox/addon/colorzilla/) Add on

```
#60b4ab 
```

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:05:32.973

这是CSS

```
 background-color: #63bab0;
background-image: -webkit-linear-gradient(top, #63bab0, #59a79e); 
    background-image:    -moz-linear-gradient(top, #63bab0, #59a79e); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T07:23:30.313

开发人员使用平面颜色作为`63BAB0`

然后如果支持渐变（如果观众使用基于 mozilla 或[webkit](http://en.wikipedia.org/wiki/WebKit)`63BAB0`的浏览器），那么他会选择从​​ 到的轻微渐变`59A79E`

在**CSS**方面：
`background-color: #63BAB0;`
`background-image: -moz-linear-gradient(center top , #63BAB0, #59A79E);`
`background-image: -webkit-linear-gradient(top, #63bab0, #59a79e);`

您可以在
[http://www.colorhexa.com/59a79e上使用这种颜色](http://www.colorhexa.com/59a79e)

希望能帮助到你！

# shell - 如何检查是否为$？在 unix shell 脚本中不等于零？

> ID：15471264
> 
> 赞同：86
> 
> 时间：2013-03-18T06:58:49.603
> 
> 标签：shell, unix

我有一个脚本，它使用测试命令来检查`$?`（最后执行命令的返回代码）是否不等于零。代码如下： -

`$?`是最后执行的命令的退出状态。

```
if (test $? -ne 0)
then
//statements//
fi 
```

但是，这种验证方式不适用于字符串，因为 get syntax error 。请提出一个合适的替代方案。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-18T07:02:27.283

Put it in a variable first and then try to test it, as shown below

```
ret=$?
if [ $ret -ne 0 ]; then
        echo "In If"
else
        echo "In Else"
fi 
```

This should help.

* * *

**Edit:** If the above is not working as expected then, there is a possibility that you are not using `$?` at right place. **It must be the very next line after the command** of which you need to catch the return status. Even if there is any other single command in between the target and you catching it's return status, you'll be retrieving the returns_status of this intermediate command and not the one you are expecting.

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-12-23T22:47:59.597

你不需要测试 if `$?`is not `0`。shell 提供`&&`，`||`因此您可以轻松地根据该测试的隐式结果进行分支：

```
some_command && {
    # executes this block of code,
    # if some_command would result in:  $? -eq 0
} || {
    # executes this block of code,
    # if some_command would result in:  $? -ne 0
} 
```

您可以删除任一分支，具体取决于您想要什么。因此，如果您只想测试失败（即`$? -ne 0`）：

```
some_command_returning_nonzero || {
    # executes this block of code when:     $? -ne 0
    # and nothing if the command succeeds:  $? -eq 0
} 
```

但是，您在问题中提供的代码可以正常工作。我很困惑你有语法错误并得出结论这`$?`是一个字符串。问题很可能没有提供导致语法错误的错误代码。这一点尤其明显，因为您声称没有其他人的解决方案也有效。发生这种情况时，您必须重新评估您的假设。

注意：如果大括号内的代码返回错误，上面的代码可能会产生令人困惑的结果。在这种情况下，只需使用 if 命令，如下所示：

```
if some_command; then
    # executes this block of code,
    # if some_command would result in:  $? -eq 0
else
    # executes this block of code,
    # if some_command would result in:  $? -ne 0
fi 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-10-25T12:31:31.263

执行脚本后试试这个：

```
if [ $? -ne 0 ];
then
//statements//
fi 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T07:03:33.650

I don't know how you got a string in `$?` but you can do:

```
if [[ "x$?" == "x0" ]]; then
   echo good
fi 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-08T10:13:46.237

这是针对类似问题提出的解决方案

```
exit_status () {
if [ $? = 0 ]
then
    true
else
    false
fi
} 
```

用法：

```
do-command exit_status && echo "worked" || echo "didnt work" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T10:29:07.170

```
<run your last command on this line>
a=${?}
if [ ${a} -ne 0 ]; then echo "do something"; fi 
```

使用您想使用的任何命令而不是`echo "do something"`命令

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-22T07:37:07.300

```
if [ $var1 != $var2 ] 
then 
echo "$var1"
else 
echo "$var2"
fi 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-22T20:33:17.090

我整理了一些代码，这些代码可能有助于了解返回值与返回的字符串是如何工作的。可能有更好的方法，但这是我通过测试发现的。

```
#!/bin/sh
#
# ro
#

pass(){
  echo passed
  return 0;   # no errors
}
fail(){
  echo failed
  return 1;   # has an error
}
t(){
  echo true, has error
}
f(){
  echo false, no error
}

dv=$(printf "%60s"); dv=${dv// /-}

echo return code good for one use, not available for echo
echo $dv
pass
[ $? -gt 0 ] && t || f
echo "function pass: \$? $?" ' return value is gone'
echo
fail
[ $? -gt 0 ] && t || f
echo "function fail: \$? $?" ' return value is gone'
echo

echo save return code to var k for continued usage
echo $dv
pass
k=$?
[ $k -gt 0 ] && t || f
echo "function pass: \$k $k"
echo
fail
k=$?
[ $k -gt 0 ] && t || f
echo "function fail: \$k $k"
echo

# direct evaluation of the return value
# note that (...) and $(...) executes in a subshell
# with return value to calling shell
# ((...)) is for math/string evaluation

echo direct evaluations of the return value:
echo '  by if (pass) and if (fail)'
echo $dv
if (pass); then
  echo pass has no errors
else
  echo pass has errors
fi
if (fail); then
  echo fail has no errors
else
  echo fail has errors
fi

# this code results in error because of returned string (stdout)
# but comment out the echo statements in pass/fail functions and this code succeeds
echo
echo '  by if $(pass) and if $(fail) ..this succeeds if no echo to stdout from function'
echo $dv
if $(pass); then
  echo pass has no errors
else
  echo pass has errors
fi
if $(fail); then
  echo fail has no errors
else
  echo fail has errors
fi

echo
echo '  by if ((pass)) and if ((fail)) ..this always fails'
echo $dv
if ((pass)); then
  echo pass has no errors
else
  echo pass has errors
fi
if ((fail)); then
  echo fail has no errors
else
  echo fail has errors
fi

echo 
s=$(pass)
r=$?
echo pass, "s: $s  ,  r: $r"
s=$(fail)
r=$?
echo fail, "s: $s  ,  r: $r" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-24T12:41:09.147

将 set -o pipefail 放在任何脚本的开头，以返回任何失败

万一你这样做了，测试失败了，但发球台没有。默认情况下 $? 只需要最后一个命令成功，在这种情况下是“tee”命令

```
test | tee /tmp/dump
[ $? -ne 0 ] && echo "failed" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-15T20:10:19.083

```
function assert_exit_code {
    rc=$?; if [[ $rc != 0 ]]; then echo "$1" 1>&2; fi
} 
```

...

```
execute.sh

assert_exit_code "execute.sh has failed" 
```

# ruby-on-rails-3 - Bundle 不能使用旧版本的 bundler

> ID：15471270
> 
> 赞同：0
> 
> 时间：2013-03-18T06:59:19.050
> 
> 标签：ruby-on-rails-3, bundler

我在我的 Rails 应用程序中进行了“捆绑安装”。首先，我收到以下消息：

```
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.1) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.3.4)

This Gemfile requires a different version of Bundler. 
```

然后我在这里找到一个线程[如何`bundle install`当您的 Gemfile 需要旧版本的捆绑程序时？](https://stackoverflow.com/questions/12092928/how-to-bundle-install-when-your-gemfile-requires-an-older-version-of-bundler)

但是在我'$ bundle *1.0.22* install'之后，我收到了这样的消息：

```
/home/chinseone/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- rubygems/format (LoadError)
from /home/chinseone/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/source.rb:5:in `<top (required)>'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/dsl.rb:14:in `initialize'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/dsl.rb:6:in `new'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/dsl.rb:6:in `evaluate'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/definition.rb:17:in `build'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler.rb:138:in `definition'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/cli.rb:219:in `install'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/vendor/thor/task.rb:22:in `run'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/vendor/thor.rb:263:in `dispatch'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/lib/bundler/vendor/thor/base.rb:386:in `start'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.0.22/bin/bundle:13:in `<top (required)>'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/bin/bundle:23:in `load'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/bin/bundle:23:in `<main>'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `eval'
from /home/chinseone/.rvm/gems/ruby-2.0.0-p0/bin/ruby_noexec_wrapper:14:in `<main>' 
```

而对应的内容是：

```
# If there are no unresolved deps, then we can use just try
# normal require handle loading a gem from the rescue below.

if Gem::Specification.unresolved_deps.empty? then
  return gem_original_require(path)
end 
```

如何安装并锁定到正确版本的捆绑程序？非常感谢！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-07T19:51:41.343

转到您的 Gemfile.lock 更改您的捆绑要求

# mysql - 与无限未知未来表的关系

> ID：15471273
> 
> 赞同：0
> 
> 时间：2013-03-18T06:59:53.603
> 
> 标签：mysql, database-design

我正在开发自己的家谱软件，我希望能够在其中为事件添加无限数量的来源、笔记和地点。但是我对源表有疑问。不可能创建一个适合所有类型源的表。

来源示例

资料来源：信

*   至
*   从
*   日期
*   文本

来源：互联网

*   网站
*   日期
*   文本

资料来源：人口普查

*   年
*   状态
*   县
*   地址……等等。

所以到目前为止我的解决方案是为每种源类型创建一个特殊的表并将它们链接到一个 event_vs_source 表

```
ID             INT
eventID        VARCHAR
sourceID       INT
sourceTable    VARCHAR 
```

数据将是：

```
ID          453
eventID     67
sourceID    345
sourceTable source_letter 
```

source_letter

```
ID        INT
To        VARCHAR
From      VARCHAR
Date      DATE
Text      BLOB 
```

但问题是当我想获取连接到单个事件的所有源时。

```
SELECT * FROM event_vs_source WHERE event_vs_source.eventID = 67; 
```

这给了我一个带有源表名称 source_letter 的数组，但是如何在 JOIN 中使用它来选择正确的表并在其中找到源 ID？如果我进行单独的查询，我可以做到这一点，但是如果我有多个源连接到一个事件并且它们都在不同的源表上怎么办？

event_vs_source

```
ID          486
eventID     67
sourceID    23
sourceTable source_website 
```

这将导致更多单独的查询。

还是我设计这个数据库错了？有更好的方法吗？

底线是，我希望能够为单个事件添加尽可能多的来源、地点和注释，但也希望能够添加无限的新的和未知的未来表格，但每个人有一些数据库请求。请记住，一个人可以处理无限量的事件......

# android - 无法从 android ndk 中的堆栈跟踪中获取行号

> ID：15471288
> 
> 赞同：3
> 
> 时间：2013-03-18T07:00:43.183
> 
> 标签：android, debugging, java-native-interface, native, cocos2d-x

在使用共享库时，我在 Android 中获得了以下堆栈跟踪。当我尝试使用 ndk-stack 时，它给出错误提示“无法在模块 /ibgame.so 中找到地址 80ce4188 的例程信息”我真的想找到例程崩溃的行。

**堆栈跟踪**

```
03-18 12:07:00.480: I/DEBUG(21702): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
03-18 12:07:00.490: I/DEBUG(21702): Build fingerprint: 'samsung/GT-S5670/GT-S5670:2.3.4/GINGERBREAD/XWKQ2:user/release-keys'
03-18 12:07:00.490: I/DEBUG(21702): pid: 22914, tid: 22957  >>> com.xxx.yyyyo <<<
03-18 12:07:00.490: I/DEBUG(21702): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 3c3c3c3c
03-18 12:07:00.490: I/DEBUG(21702):  r0 00000001  r1 46e9f96c  r2 002624e8  r3 3c3c3c3c
03-18 12:07:00.490: I/DEBUG(21702):  r4 80fa1474  r5 0026c6a8  r6 46cce7ed  r7 46030f30
03-18 12:07:00.490: I/DEBUG(21702):  r8 46e9fb70  r9 46030f28  10 46030f14  fp 45110b30
03-18 12:07:00.490: I/DEBUG(21702):  ip 80fa14e8  sp 46e9fa00  lr 80d20eb3  pc 80ce4188  cpsr 00000030
03-18 12:07:00.490: I/DEBUG(21702):  d0  000000003f800000  d1  0000000000000000
03-18 12:07:00.490: I/DEBUG(21702):  d2  416fca053f800000  d3  418c000000000000
03-18 12:07:00.490: I/DEBUG(21702):  d4  0023000000000000  d5  46fffe00c7000000
03-18 12:07:00.490: I/DEBUG(21702):  d6  3f000000c7000000  d7  46fffe003f800000
03-18 12:07:00.500: I/DEBUG(21702):  d8  0000000000000000  d9  0000000000000000
03-18 12:07:00.500: I/DEBUG(21702):  d10 0000000000000000  d11 0000000000000000
03-18 12:07:00.500: I/DEBUG(21702):  d12 0000000000000000  d13 0000000000000000
03-18 12:07:00.500: I/DEBUG(21702):  d14 0000000000000000  d15 0000000000000000
03-18 12:07:00.500: I/DEBUG(21702):  scr 60000012
03-18 12:07:00.910: I/ActivityManager(10055): Start proc android.process.media for content provider com.android.providers.downloads/.DownloadProvider: pid=23002 uid=10024 gids={1015, 2001, 3003}
03-18 12:07:01.220: D/Finsky(22861): [1] 2.run: Loaded library for account: [LhT0qWhfRR1R8V6hKkpCiWF5Pjw]
03-18 12:07:01.320: I/DEBUG(21702):          #00  pc 80ce4188  /mnt/asec/com.xxx.yyyyo-1/lib/libgame.so
03-18 12:07:01.320: I/DEBUG(21702):          #01  lr 80d20eb3  /mnt/asec/com.xxx.yyyyo-1/lib/libgame.so
03-18 12:07:01.320: I/DEBUG(21702): code around pc:
03-18 12:07:01.320: I/DEBUG(21702): 80ce4168 f864f7ff 1c221c2b ab29e056 f7ff1c18 
03-18 12:07:01.320: I/DEBUG(21702): 80ce4178 2c00f85d e015d05b 23a09a05 58d3005b 
03-18 12:07:01.320: I/DEBUG(21702): 80ce4188 3351681b 681a33ff 23a09905 58c9005b 
03-18 12:07:01.320: I/DEBUG(21702): 80ce4198 98059b33 009b3350 330418c3 1c08681b 
03-18 12:07:01.320: I/DEBUG(21702): 80ce41a8 47901c19 23ae9a05 58d3005b 33529a05 
03-18 12:07:01.320: I/DEBUG(21702): code around lr:
03-18 12:07:01.320: I/DEBUG(21702): 80d20e90 f7cf1c18 1c03fb7b 320c681a 99016812 
03-18 12:07:01.320: I/DEBUG(21702): 80d20ea0 47901c18 f048e022 1c03fee3 f7cf1c18 
03-18 12:07:01.320: I/DEBUG(21702): 80d20eb0 1c03fb6d 9b039303 d00b2b00 681b9b03 
03-18 12:07:01.320: I/DEBUG(21702): 80d20ec0 681b3308 1c109a03 1c034798 d1012b02 
03-18 12:07:01.320: I/DEBUG(21702): 80d20ed0 e0002301 2b002300 9b03d008 330c681b 
03-18 12:07:01.320: I/DEBUG(21702): stack:
03-18 12:07:01.320: I/DEBUG(21702):     46e9f9c0  47bac008  
03-18 12:07:01.320: I/DEBUG(21702):     46e9f9c4  01000000  
03-18 12:07:01.320: I/DEBUG(21702):     46e9f9c8  80fa1474  
    03-18 12:07:01.320: I/DEBUG(21702):     46e9f9cc  80fa1474  
03-18 12:07:01.320: I/DEBUG(21702):     46e9f9d0  0026c6a8 
```

我的**Application.mk**文件是

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions -DCOCOS2D_DEBUG=1
APP_OPTIM := debug 
```

Android.mk**文件**是

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := main.cpp ../../Classes/AppDelegate.cpp \
    ../../Classes/HelloWorldScene.cpp \

LOCAL_CFLAGS := -g
LOCAL_CFLAGS += -ggdb
LOCAL_CFLAGS += -01

LOCAL_LDLIBS +=  -llog -ldl

LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes     \
$(LOCAL_PATH)/../../libs/Box2d \

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static cocos_extension_static box2d_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) \
$(call import-module,Box2D) 
```

***NDK-STACK***命令

```
D:\>ndk-stack -sym D:\Dev\cocos2d-2.0-x-2.0.4\XXXX\proj.android\obj\local\armeabi -dump "D:\Dev\Others\logs notes\18-3-1-crash.txt"
********** Crash dump: **********
Build fingerprint: 'samsung/GT-S5670/GT-S5670:2.3.4/GINGERBREAD/XWKQ2:user/release-keys'
pid: 22914, tid: 22957  >>> com.xxx.yyyyo<<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 3c3c3c3c
Stack frame #00  pc 80ce4188  /mnt/asec/com.xxx.yyyyo-1/lib/libgame.so: Unable to locate routine information for address 80ce4188 in module D:\Dev\cocos2d-2.0-x-2.0.4\XXXX\proj.android\obj\local\armeabi/libgame.so 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:58:13.163

在您的 Android.mk 中使用以下内容

`LOCAL_CFLAGS:= -g`

您可以使用以下命令检查 .so 的符号：

`nm libgame.so`

# c# - 读取数据表中没有标题行的 .XLS 文件

> ID：15471290
> 
> 赞同：1
> 
> 时间：2013-03-18T07:00:56.953
> 
> 标签：c#, excel, datatable

我正在阅读一个 xls 文件并在 gridview 中显示它。我正在使用以下代码

```
string strSelectQuery = "Select * from [sheet1$]";    
System.Data.OleDb.OleDbCommand= new System.Data.OleDb.OleDbCommand(strSelectQuery, mCon);
DataAdapter = new System.Data.OleDb.OleDbDataAdapter(strSelectQuery, mCon);
DataAdapter.Fill(mDTable); 
```

现在当我去检查以下代码时会发生什么

```
string strFirstCell =  mDTable.Rows[0][0]; 
```

它给了我第二行第一个单元格的结果。我想在数据表中阅读没有任何标题行的完整 xls。我希望第一行被指定为数据表中的列名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T07:08:17.543

您应该在连接字符串中添加“HDR=No”以停止将第一行作为列标题。看到这个答案[c# Excel 跳过第一行？](https://stackoverflow.com/questions/6690604/c-sharp-excel-skipping-first-row)

# javascript - JavaScript 中 Eratosthenes 算法的筛子对大量运行无休止

> ID：15471291
> 
> 赞同：24
> 
> 时间：2013-03-18T07:00:57.973
> 
> 标签：javascript, arrays, algorithm, primes, sieve-of-eratosthenes

我一直在尝试用 JavaScript 编写[Sieve of Eratosthenes](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)算法。基本上我只是按照以下步骤操作：

1.  创建一个从 2 到 (n-1) 的连续整数列表
2.  让第一个素数 p 等于 2
3.  从 p 开始，以 p 为增量向上计数并删除这些数字中的每一个（p 和 p 的倍数）
4.  转到列表中的下一个数字并重复 2,3,4
5.  将无意删除的素数添加回列表

这就是我想出的：

```
function eratosthenes(n){
var array = [];
var tmpArray = []; // for containing unintentionally deleted elements like 2,3,5,7,...
var maxPrimeFactor = 0;
var upperLimit = Math.sqrt(n);
var output = [];

// Eratosthenes algorithm to find all primes under n

// Make an array from 2 to (n - 1)
//used as a base array to delete composite number from
for(var i = 2; i < n; i++){
    array.push(i);
}

// Remove multiples of primes starting from 2, 3, 5,...
for(var i = array[0]; i < upperLimit; i = array[0]){
    removeMultiples: 
    for(var j = i, k = i; j < n; j += i){
        var index = array.indexOf(j);
        if(index === -1)
            continue removeMultiples;
        else
            array.splice(index,1);
    }
    tmpArray.push(k);
}
array.unshift(tmpArray);
return array;
} 
```

它适用于小数字，但不适用于大于一百万的数字。我使用 Node.js 进行测试，这个过程似乎无穷无尽，没有出现内存错误。我在[这里](https://stackoverflow.com/a/14041122/165820)阅读了一个解决方案（也在 javascript 中），但仍然无法完全理解它。

问题：如何使这项工作适用于足够大的数字，例如一百万及以上？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-18T07:32:44.857

通过使用数组操作函数，例如`Array#indexOf`和`Array#splice`在线性时间中运行，您正在使 Eratosthenes 的筛子变得更慢。当您可以为所涉及的两个操作设置 O(1) 时。

以下是遵循传统编程实践的埃拉托色尼筛法：

```
var eratosthenes = function(n) {
    // Eratosthenes algorithm to find all primes under n
    var array = [], upperLimit = Math.sqrt(n), output = [];

    // Make an array from 2 to (n - 1)
    for (var i = 0; i < n; i++) {
        array.push(true);
    }

    // Remove multiples of primes starting from 2, 3, 5,...
    for (var i = 2; i <= upperLimit; i++) {
        if (array[i]) {
            for (var j = i * i; j < n; j += i) {
                array[j] = false;
            }
        }
    }

    // All array[i] set to true are primes
    for (var i = 2; i < n; i++) {
        if(array[i]) {
            output.push(i);
        }
    }

    return output;
}; 
```

[你可以在这里看到一个活生生的例子`n = 1 000 000`。](http://jsfiddle.net/KARZw/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-12-10T09:12:01.687

This question is a little stingy on the low side in the definition of what a "large number" is and accepts that it starts at only about a million, for which the [current answer](https://stackoverflow.com/a/15471749/549617) works; however, it uses quite a lot of memory as in one 8-byte number (a double real of 64 bits) for each element to be sieved and another 8-byte number for every found prime. That answer wouldn't work for "large numbers" of say about 250 million and above as it would exceed the amount of memory available to the JavaScript execution machine.

The following JavaScript code implementing the "infinite" (unbounded) Page Segmented Sieve of Eratosthenes overcomes that problem in that it only uses one bit-packed 16 Kilobyte page segmented sieving buffer (one bit represents one potential prime number) and only uses storage for the base primes up to the square root of the current highest number in the current page segment, with the actual found primes enumerated in order without requiring any storage; also saving time by only sieving odd composites as the only even prime is 2:

```
var SoEPgClass = (function () {
  function SoEPgClass() {
    this.bi = -1; // constructor resets the enumeration to start...
  }
  SoEPgClass.prototype.next = function () {
    if (this.bi < 1) {
      if (this.bi < 0) {
        this.bi++;
        this.lowi = 0; // other initialization done here...
        this.bpa = [];
        return 2;
      } else { // bi must be zero:
        var nxt = 3 + 2 * this.lowi + 262144; //just beyond the current page
        this.buf = [];
        for (var i = 0; i < 2048; i++) this.buf.push(0); // faster initialization 16 KByte's:
        if (this.lowi <= 0) { // special culling for first page as no base primes yet:
          for (var i = 0, p = 3, sqr = 9; sqr < nxt; i++, p += 2, sqr = p * p)
            if ((this.buf[i >> 5] & (1 << (i & 31))) === 0)
              for (var j = (sqr - 3) >> 1; j < 131072; j += p)
                this.buf[j >> 5] |= 1 << (j & 31);
        } else { // other than the first "zeroth" page:
          if (!this.bpa.length) { // if this is the first page after the zero one:
            this.bps = new SoEPgClass(); // initialize separate base primes stream:
            this.bps.next(); // advance past the only even prime of 2
            this.bpa.push(this.bps.next()); // keep the next prime (3 in this case)
          }
          // get enough base primes for the page range...
          for (var p = this.bpa[this.bpa.length - 1], sqr = p * p; sqr < nxt;
            p = this.bps.next(), this.bpa.push(p), sqr = p * p);
          for (var i = 0; i < this.bpa.length; i++) { //for each base prime in the array
            var p = this.bpa[i];
            var s = (p * p - 3) >> 1; //compute the start index of the prime squared
            if (s >= this.lowi) // adjust start index based on page lower limit...
              s -= this.lowi;
            else { //for the case where this isn't the first prime squared instance
              var r = (this.lowi - s) % p;
              s = (r != 0) ? p - r : 0;
            }
            //inner tight composite culling loop for given prime number across page
            for (var j = s; j < 131072; j += p) this.buf[j >> 5] |= 1 << (j & 31);
          }
        }
      }
    }
    //find next marker still with prime status
    while (this.bi < 131072 && this.buf[this.bi >> 5] & (1 << (this.bi & 31))) this.bi++;
    if (this.bi < 131072) // within buffer: output computed prime
      return 3 + ((this.lowi + this.bi++) * 2);
    else { // beyond buffer range: advance buffer
      this.bi = 0;
      this.lowi += 131072;
      return this.next(); // and recursively loop just once to make a new page buffer
    }
  };
  return SoEPgClass;
})(); 
```

The above code can be utilized to count the primes up to the given limit by the following JavaScript code:

```
window.onload = function () {
  var elpsd = -new Date().getTime();
  var top_num = 1000000000;
  var cnt = 0;
  var gen = new SoEPgClass();
  while (gen.next() <= top_num) cnt++;
  elpsd += (new Date()).getTime();
  document.getElementById('content')
    .innerText = 'Found ' + cnt + ' primes up to ' + top_num + ' in ' + elpsd + ' milliseconds.';
}; 
```

If the above two pieces of JavaScript code are put into a file named app.js in the same folder as the following HTML code named whatever.html, you will be able to run the code in your browser by opening the HTML file in it:

```
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Page Segmented Sieve of Eratosthenes in JavaScript</title>
    <script src="app.js"></script>
  </head>
  <body>
    <h1>Page Segmented Sieve of Eratosthenes in JavaScript.</h1>

    <div id="content"></div>
  </body>
</html> 
```

This code can sieve to the one billion range is a few 10's of seconds when run on a JavaScript execution engine using Just-In-Time (JIT) compilation such as Google Chrome's V8 engine. Further gains can be achieved by using extreme wheel factorization and pre-culling of the page buffers of the lowest base primes in which case the amount of work performed can be cut by a further factor of four, meaning that the number of primes can be counted up to a billion in a few seconds (counting does not require enumeration as used here but rather can use bit count techniques on the page segment buffers directly), although at the cost of increased code complexity.

**EDIT_ADD:**

The execution speed can be sped up by a factor of three or more by using TypedArray and the asm.js optimizations from ECMAScript 2015 (now supported in all common browsers) with the code modifications as follows:

```
"use strict";
var SoEPgClass = (function () {
  function SoEPgClass() {
    this.bi = -1; // constructor resets the enumeration to start...
    this.buf = new Uint8Array(16384);
  }
  SoEPgClass.prototype.next = function () {
    if (this.bi < 1) {
      if (this.bi < 0) {
        this.bi++;
        this.lowi = 0; // other initialization done here...
        this.bpa = [];
        return 2;
      } else { // bi must be zero:
        var nxt = 3 + 2 * this.lowi + 262144; // just beyond the current page
        for (var i = 0; i < 16384; ++i) this.buf[i] = 0 >>> 0; // zero buffer
        if (this.lowi <= 0) { // special culling for first page as no base primes yet:
          for (var i = 0, p = 3, sqr = 9; sqr < nxt; ++i, p += 2, sqr = p * p)
            if ((this.buf[i >> 3] & (1 << (i & 7))) === 0)
              for (var j = (sqr - 3) >> 1; j < 131072; j += p)
                this.buf[j >> 3] |= 1 << (j & 7);
        } else { // other than the first "zeroth" page:
          if (!this.bpa.length) { // if this is the first page after the zero one:
            this.bps = new SoEPgClass(); // initialize separate base primes stream:
            this.bps.next(); // advance past the only even prime of 2
            this.bpa.push(this.bps.next()); // keep the next prime (3 in this case)
          }
          // get enough base primes for the page range...
          for (var p = this.bpa[this.bpa.length - 1], sqr = p * p; sqr < nxt;
            p = this.bps.next(), this.bpa.push(p), sqr = p * p);
          for (var i = 0; i < this.bpa.length; ++i) { // for each base prime in the array
            var p = this.bpa[i] >>> 0;
            var s = (p * p - 3) >>> 1; // compute the start index of the prime squared
            if (s >= this.lowi) // adjust start index based on page lower limit...
              s -= this.lowi;
            else { // for the case where this isn't the first prime squared instance
              var r = (this.lowi - s) % p;
              s = (r != 0) ? p - r : 0;
            }
            if (p <= 8192) {
              var slmt = Math.min(131072, s + (p << 3));
              for (; s < slmt; s += p) {
                var msk = (1 >>> 0) << (s & 7);
                for (var j = s >>> 3; j < 16384; j += p) this.buf[j] |= msk;
              }
            }
            else
              // inner tight composite culling loop for given prime number across page
              for (var j = s; j < 131072; j += p) this.buf[j >> 3] |= (1 >>> 0) << (j & 7);
          }
        }
      }
    }
    //find next marker still with prime status
    while (this.bi < 131072 && this.buf[this.bi >> 3] & ((1 >>> 0) << (this.bi & 7)))
      this.bi++;
    if (this.bi < 131072) // within buffer: output computed prime
      return 3 + ((this.lowi + this.bi++) << 1);
    else { // beyond buffer range: advance buffer
      this.bi = 0;
      this.lowi += 131072;
      return this.next(); // and recursively loop just once to make a new page buffer
    }
  };
  return SoEPgClass;
})(); 
```

The speed up works because it uses the pre-typed ECMAScript primitive arrays to avoid overheads by directly using integers in the arrays (also avoiding wasting space by using float representations) and also uses the type hints available using asm.js in causing bit manipulations to use unsigned integers/bytes. as well, to save the time for array allocations, it now allocations the sieving array once and just zeros it for each new page segment. It now sieves to a billion in about 16 seconds on a low end 1.92 Gigahertz CPU rather than about 50 seconds. As well, the algorithm is modified to simplify the inner composite number representation (in bit packed bits) for extra speed for smaller primes, which is the majority of the culling operations.

Note that now about 60% of the expended time is now spent in just enumerating the found primes. This could be greatly reduced for the usual use of such a sieve to just count the found primes by just summing the number of zero bits in the array for each segment page. If this was done, the time to sieve to a billion would be something close to 7 seconds on this low end CPU and there may be another few optimizations possible (all timing using the Google Chrome version 72 V8 JavaScript engine which is constantly being improved and later versions may run faster).

TBH, I personally dislike JavaScript with all its extensions and complexities that have been necessary to make it a "modern" language and in particular don't like dynamic typing, so embraced Microsoft's TypeScript when it appeared some years ago. The above code is actually a modification of the code as output from TypeScript along with its emphasis on statically typed Object Oriented Programming (OOP). It occurred to me that the calling of the "next" instance method through the standard way of adding methods to "prototype" may be much slower than just calling a function so I tested it and found that to be exactly the case, with [this runnable link](https://www.w3schools.com/code/tryit.asp?filename=G2ZRCHXALXL1) enumerating the found primes about two and a half times faster just by changing the enumeration to a simple output closure function.

Now, we can eliminate the primes enumeration entirely by just counting the number of found primes as shown in [this other runnable link with modified code](https://www.w3schools.com/code/tryit.asp?filename=G3142RWABQ66), showing that even with the above improvement, enumeration of the found primes still costs almost as much time as actually doing the sieving with this algorithm with one able to determine the enumeration time as the difference between the run time for the above two links to runnable code.

Note that the run times for the links will be different (and likely shorter) than as I mention here as most current CPU's will be faster and more powerful than the tablet Windows CPU I am currently using (the Intel x5-Z3850 at 1.92 Gigahertz and the JavaScript gets run on the machine on which you are viewing the link.

This then makes JavaScript only a little slower than the same algorithm implemented on the JVM or DotNet, which is of course still much slower than the highly optimized native code as compiled from languages such as C/C++, Rust, Nim, Haskell, Swift, FreePascal, Julia, etc. which can run this algorithm in about two seconds on this low end CPU. WebAssembly can run this algorithm up to about two to three times faster than the JavaScript here, depending on the browser implementation; as well, when the WebAssembly specification is fully complete and implemented, we will have multi-threading support for further gains by the factor of the number of effective cores used.

**END_EDIT_ADD**

**EDIT_ADD_MORE_AND_LATER_EVEN_MORE:**

Once the above fairly small modifications are done to just count the found primes efficiently rather then enumerate them thus making the counting time a small overhead as compared to sieving them, it would be worth while to make the more extensive changes to use maximum wheel factorization (by not only 2 for "odds-only", but also 3, 5, and 7 for a wheel that covers a span of 210 potential primes) and also pre-culling on initialization of the small sieving arrays so that it is not necessary to cull by the following primes of 11, 13, 17, and 19\. This reduces the number of composite number culling operations when using the page segmented sieve by a factor of about four to a range of a billion and can be written so that it runs about four times as fast due to the reduced operations with each culling operation about the same speed as for the above code.

The way of doing the 210-span wheel factorization efficiently is to follow on this method of doing the "odds-only" sieving efficiently: the current algorithm above can be thought of as sieving one bit-packed plane out of two where the other plane can be eliminated as it contains only the even numbers above two; for the 210-span we can define 48 bit-packed arrays of this size representing possible primes of 11 and above where all the other 162 planes contain numbers which are factors of two, three, five, or seven and thus don't need to be considered. In this way it is just as efficient to sieve with less memory requirements (by over a half as compared to "odds-only" and as much efficiency as here, where one 48-plane "page" represents 16 Kilobytes = 131072 bits per plane times 210 which is a range of 27,525,120 numbers per sieve page segment, thus only 40 page segments to sieve to a billion (instead of almost four thousand as above), and therefore less overhead in start address calculation per base prime per page segment for a further gain in efficiency.

Although the extended code described above is a few hundred lines and long to post here, it can count the number of primes to a billion in under two seconds on my low end Intel 1.92 Gigahertz CPU using the Google V8 JavaScript engine, which is about four to five times slower than the same algorithm run in native code. This is about the limit of what we can do in JavaScript, with further advanced techniques of "loop-unrolling" and (of course) multi-processing unavailable. However, it is enough to almost match the hand-optimized reference C implementation of the Sieve of Atkin on this low-end CPU, which runs at about 1.4 seconds.

**ADDED:** I have explained this in even better detail [with a runnable snippet in another StackOverflow answer](https://stackoverflow.com/a/57108107/549617), and in cross-linked other answers to that thread.

Although the above code is quite efficient up to a range of about 16 billion, other improvements can help maintain the efficiency to even larger ranges of several tens of thousands of billions such that one could count the number of primes up to about 1e14 in a few days using JavaScript on a faster CPU. This is interesting as the number of primes to this range wasn't known until 1985 and then was determined by a numerical analysis technique as the computers of that day weren't powerful enough to run the Sieve of Eratosthenes fast enough for that range in a reasonable time.

With my current "anti-JavaScript" and pro functional coding style bias, I would write this code using Fable, which is a implementation of F# (statically typed ML "functional" language that also supports OOP, if desired) that transpiles to JavaScript very efficiently such that the generated code is likely to be about as fast as if it was written directly in JavaScript.

To show that the code can run almost as fast in Chrome V8 JavaScript engine using Fable (with the Elmish React interface) as writing pure JavaScript as in the last link above [here is a link to a Fable online IDE containing the above algorithm](https://fable.io/repl/#?code=PQgEDEEMCMBsFNjgMSgG7wE4GcCWB7AO1HwDNQAXAC3lAHUb5YJIBjC-TXAL3gBNQACmgBPUACYANKADM0gKzTIhAQHYAlKADKueBhLkAopkgds1eIXjYAdHYCwAKCchgoACpVc2dFjxFQb1BIWABbfHNQUgBXWFgxGMJ2AkIQ0AB3XGpQQnxQUOiKUxTQaOx+UHgAD1Z4AAcKKM4XMAtQViIKSwofMkoaUDw9Wmho0lIsYMwTEV7iDtC6iKzaQmjQ6EnWWNhcQgBzYCG0Pf2bJyd8OssWOHgbAGFOWjBSTlBDUKzglVAAK2wADlihhLtdiAAhTD4dLlTA2dwia4+Vo0cpNTCBQhdTCkNi0TLZNoACXcAFkADJ2c6OK43KEwuEXRwUJG0OpcNCmWgABS4oVoAF4orB8KZQGAAFKQLlaVhcBqgPj4ayEADkjSoMtoyhE1FOoGguH2+ywAEInKzrqAObguV1QHzcALAXwqqBhaRRaZLWybZzuaAIZByk6BQAleoe0p7CgycTMhCNPa7Kz+u2B20CnLRr1ixrEMAdQgYQi6JK0YsYTA4qLRJIUFLYJxJrGp9kBh1ZyxunOe70FlvwZOEdvp+0jDlR4jC6Kx+M5ZlWjsZh3B0P8+CRuoAQWm0fX8DDW-qAG0ALq+622ifaXQYCFjCaY2exgAcF4vErcBVgjbqCCgAgGCwD4oigJg1i4Hw0S0HsfDVNI4HlPsArYkhYiiF0zJgJASr8LgrDcgIEIAJLkloADSoAUgAqu4+SQJhtB4uYkzUMohrfBQmR8HwqZnA4jitjegZkRR1HCqeAA+oAAIzRCIADcEiKSpAAsamgG+WlyQAbFp8ZaXpmnKfJ4g6WI0mXs4jhFkQ5jKD0PwCBS+D4AA1qAtF1B4MAID4HBKnkhJUO0OwGo5NbBHxkHYD4RGwNssDFEQ1JDo0okOuA4ZaO4WgAGo8uGZLRt2EgyN+Noho0bRTslzDdtgFrCcO46BnQxIUsVZJaNGMnptm4gqeVMgjZuoDyONzq0KoSlOKAi1LctK2rct5VyXJ03ZnJY2DbQclzft8kAJygNZGXtQ6nUUsS5F9cK6lvlVgiVQAtPJmgAFRCPIoAfXJ31CKo-2fS1ImdrQN0APIACKww84YPNGckAAx-WAlU-X9P1HbklSls1l1ZVDXU8u44aAhShiAijcmgD9u0M-JIOM2dYCQdcxQHNVFA4sQfRTm9DX7c2rWZZDjoPLRFLdSV4aGDyWgAFxBiGR6btue4vgtoADXO2ILoIb30wAPOboB6ZoADUoDqZpKkG3G4hCCboDm6bls23b8jRPNjgrU7Rtux7XugLb6kGY784u8bZsW1b4d26o0TnTZEOrqTFJw7DADiO5K-10m63tW2yCpw3yRXKl7aXNfV1X5cSPXdv+4tldlx3DfqS3ld183Tdl7X1e653LdDw3Y+N1N08qVPndp8TksK1opGw7RhgPXrxcBxVFcnTXQ9HepZfqXt6lHfIe3yAfltl3pR2qFtuuqHtqi32+e1vrfJ1HWjZdo1LqjP+qNb6bVLuIAB4g5qjxkAAmQf8ZBgLPnPdSYD5AAPkH-PSpcH5zz0mA1+c935t3km+ABb4-4nQASdUuv854nVvuIUBFdNoV0gewva4hoHsKYTISqF1xZXSzoCWGAANLeMldaoxUjI0Acip6Vz7i3Huk0VIzz0ipTRltSGPxUkdN8Kkf5GLngohRUC54dw7qXMao9VFyXsfYmeclnGuPwe4lmc9DFkIYRXORzDSEcIkJ3EJ7CwkSCUVwrhqjxAxJiTPcQ2jEmBKOjwiQqTvHiCYdkmuciZB5LyUPIefda62N3jIVRFSa6VJnjIbRdSa71KOggmu3ikE11vupORJ8NLP13j0u2p9T6VxQXbc+4yNLn1UepGeMyNLaIvhpY+z1BEZ1vDdSm69C5SVkq0dIeRoT1j4IFPIMp8DQRINWPM6RHblAEHsQYRRoqQFitYBKIRWC2CEstPJLdz76IBaAI6xj5IKKsXPNxutFouK8bCnxp1wncMRXEiuCTMnotyaQxa+Sa6lNxTXZphKCUdJJXbbpIyRnnymlCn2GlOn0rpeoyu8hmXMtUfIdll8uXqO8XpGRNK+VaL2jgoVWjVF4MtkdCVqg5Eyv0bKyuqhFVv2pbvRaqgZ6qG8Vq-R2qP6VzfAag1qi3wmpnpQlSFrtLeNoVi0Atr7V7Qdc61RjCjE-w9e60xZiO6o19UA1Vy00bONRt4tGYbQ2mLAXJDuMa55xvkg4+N9iYWJr-odSxYL+VqvMmCiB+bLH2LSTGv+xasmWLATi+S-C541urTYwNS1drOJkGG1ttaw3qQ7l21B3bu2OMcc4xZ8lh0OLDfIbNQaJ0QqcbOmdEK-5YIXRC9BYC9Id3XfgjduDG3Qr0s4vSYbD34KPYQjuSriHnucRq4h16-6qHvWGt8k6m3Pq8aXT+76vH2KtXJX9-6wHfwYQok6HdQMMLoYYmlckTphtgwwuDcGmGoxiShvxqGMN+IScAvxqTI3BP8WjRedkwB0QYn0SCKVGz6BFlFTK5zsQ+H2HaG4bQ4rQWiGkI0mUUppngtUIQ+BCiTH41UdQkgWhuGUAINoCwjSpEbAEPobRoDq2OuxmCaRRMuX6CMb4AFlBwRUAJsgkndNRFwDgRoIslh4EU8QN4mI6qQFNEIX8-54jtHwBsPYFRHPmb2FYTEonxOgGYycA4Zm8L6Tetx9AIRYIZC8KwMKxYih7ECgMdzuA6i6ExIINo0Q6jXExFheAmhpPmeqBQEwZmRbabIKQcojQCsDFFOkSYZXNBlAqEFbLAFMJiBU2p8q6RGDMFE1F34LyZMDEa81jIWQwpsesLERoM2KihXM3RpL8AmBYgQu6IK+BoDpcIGZlbeBNPMDiwZtMO2xt7Ym8Zqo6USNuH8wAIh5LnTan3pAWHRJAaYTEmNtSoNEVzggACOnGayTAFPsSoCA0LOS20weAqPejkHUoaPU1gMRRfyPAfYMB8eDB4OV6QY3CJhUyHEaqNZcAhE84Id43RLNMBEJoIiFYGdCdqgMTYVhSDfEc2Z7AoQWeTHKiYA41gVJS7EDQWAvl-NtAh652XyhTRfJpGsjqXU8rhnyqrJ2+lPzng9LrVswOXygG1kxGwexvg3Tuvld2slEigAAPr-QAHwO5ByIGwvBoQPEgoGQQbv7rMxj-ldQut-O5ejKjSgeR499QBsFGlrZQh-mwHb6MjuQ9h-wBH+Ahvbr3Vz21XywoV5rw3loGwp5ctW4ea2HwwpBC+R+r5D6sYIC5XykVEqmh-eT-kqAGlYBRi4FgAIO3TEDAQSYCCWg7mfCVfm8OE5oAAAG2AD9veWgAb3kaAOw9Auru6z9PgAvudQPWh4DQ+d7WQQ3vWC4ADzSxarYmA+eFAaePeje68m8revev+tsP+mgAApDftXvlFbh9OAc3q3u3hPlPnJP-kBG1EAX+NGIQSAUnLgOQCQWnp7GnhYMQDDPDIjMjEwOiGnp3m1NgDOIMEnH3hBMAXgV3r8MKBwRKEgTnIwViPgY0BwaENGMIR9BwQID9PQQjEjHgcAYXtMK3jdKIhIq3tIeeFbqbB9CQZoGAFYOkLwQXvInYMwidC1MtK2EQL2MKCnkobfjXjmhfmntfpnqDPTE-tJC-m-h-pMF-vWBTn-jmgAewaAUIOgZAaeHgKgViI0DlHlIVD1NgYHvTGwVIaELEeoXbnobgDZKtF4VfjYEgXfn4aAAEUEe-isPlt-r-m9P7ngdEXkfboUZoaeD-qUWtIAcAdGOQYMKEJiJ7JLjQTQMQJLpiLbMoeIfIfkcjuiLMaDJMe0ZIYMJwdgGnrbDwSQRIYAWQN3tsSIQsaoVEUtGAB1pQJAB5LQG0P1rsOxDND4C7NgHkN8M8boGBENnNnxLtvtqJqfmtEUb0SUa3k4e6LbEke7B9IIIcaHCdJoNJGiRBCcc-jGNiPpOoInrvHbomHXpLFLg8ToMMI+OMJ1j0NwKrOSQ+E+JMIKDbuwdwNGIIMIDSUnHAlkZNJoKHC7BzEJsZgIEVunjkJXnFI0AuHFtAMKXwMDiILrBfvTD4e4R7nUdoMEVLr5GEcQH7q0UHjMKHlgOXpHg6NgNwKiYHiXjYGQK-tDjhGYRvqANKFyNgPKDltZhFAcG9qeKbJ8FkIIJ9v5oIK2KwNGAACRp5T4CLyIqQRmeyRllwRnWzCiRniCaAASEC9FW7STCihDYAeRKSfbqD+7pxtQNRlY+CCCsCqyxiaCCCWn1nYiNnQB1AtkUCaDCgAjAjUbwBOD+mBkUDBmhld6-7plyJ4DuyDDcDcbYAqTTlpmgDJlZmwA5nTmxl5nCjiS9SUSJG-4ABkQK54JZZZFZ3pcQ85QgeAnZbZHZKR3Z-wQIG+TpUmDOGuleaAYguwpAjYPM+ymAXkQQyoaYNAkEb2BuDoDU9J8AlJz4QgsAmQqsx4roYmQg7ZJgqsh4x4Ws0w+Ja0hFRFy0TZNWPQkAZuMcF4jZ2A0AdJ94cFjJmA3ZLJUhbJQh0AreqM54NgFIlg+w2QuRs515QhbJoclUQl7ZYQjQoloAk+ge6krFQEMIKg7owoSFv+-em4qlohDBlxHROQVQjY7JGl3B2lvYlp85QM3YOlFxDwusYAC2Yp5gNYheGIpQ6I4EleKW+Q+AMEooa+V2iWt2vG9w3yWxuW0l0YmFkAvF-F1ASlkEEZooVwKeKezJOaIxKenskVoQgulg-BbUqlfAHIMhwoMVmBJRRxBB2AAgDem8TeCRQ+xVpVoAh57V8iVQMg4A-RDhbU7Z7JzVboJVQBclU+icP00eXUYhSM7sFsgMScOAfAhVyY7JA1g+2Iw+6RY+ZIvJ9MgR+0qlK1XBPeMBgQQMggZ1aRo+mRScgg11GRJUzM91I+j1pUAMNgqMphEgn1BFK0IxPg-uwohARlv+tBjyrlsVbeVVRhnV4A8NCN8NqczBLwbglgQm+wYUqm6ITU9hAx7BE5gQ5AgN6lKlvY4NQ+TZoM7WqlmgKNmxRFrY6Q9eQgS1oMQ+D1O1e1DNhFgBJlZN7o8hCBQgNlvYA1WlM0tl01elDw1pKRPNa0Ix9uUxNwae9NVxxFhoPBU1FImytESsrezNd1Q+cxWtfh317ZyRzNmgxhmxXedVERbgdl1VUhnB2h4iLeB56xihulKhDwvVK0Ll5FlVhhCJQcHxxAApicaJsk4dgwfAKkKVxWv+0BScC1ne7kyd8iDlbgyo5mDUBo2NFQAQdUnMwOqUhAoJgB8AyVmdXAEEE5NKStv+nsvhtBx12ZshnFp4XAHexAIk65QdpxN0xu+Urevdx1SVylVwA16VmxWVLdNoC+eVum52GtS0EMhZZFshZFheIdPNWVQBQdM5qMVQiNiNqc7d69fVBYw1rV5VHIUN7eCtEVDtQ1VQI1Mh8llsLt-ooQOlwo79n9bVHVp93VL9rYA1LhPtOtM1yMocC1ts8RntpVqlAdvN7Bb9m1pVx97Vx5YD594Av9whgDm1veR92939iSf1xFtufAfwhNqDvYbhyBfUsJxAQlLyfwZUg9u9reXDJREDMRshAgtslNXDY1geb41lojQgQ+EjeDcN4ANDRFIxA1nsUlK9V9mtG97BUVBZDyllWQNZuxd16jFsMgeJL9BlBQRQdwgwz0QhqM1jSWC+tA2Az0ExUVyoLjNjRZB45Ee5ehz0ijqg6DmtVZ+OPgHjs5WtLQOjN9+QhQ-klYshz039Mg8TCTi0NOgEiZsTed2ZrerAodNo65xTeZ6JhZxZ7Q8JtTts7ZvjDjdTMTDTdQLjSdA1qdtsC16tOjVZxjgwae7ZidmdXTKePT+JggX0HTBBNd09dQ0TjjTTANnjgwUV2j2TujjQ1TATEkwTIDx5YTTTBlU9SdEZEZGVWz-15A+Tlpq9JzK0kT0FozVwEZtZSc7ZKj2T5zN56TsZ6grzizfznzdQmgGdVw0TcinTupEzn0KxA5tkOj1dtdkLv+05VzCTANi9Rjzkmz2TAzUhv+YARTp46QpTpL5L506Ju5VExRhzJ5TTSd05TZZ1XzRxmd05uxQL4zZ1gMTgX03zCzA10LddKd9dkzHLVw9dzjtkrg-o8AwsOwm242vM-Mi22Q0WcCwCLs1WJgFOvA4pZyFy+AVy7Wb28rtZVwg28kekoAlEC+J2UTNorxAoZo+JUFWc5MlM9FFJTF0YQpRyFQYpQUVgRlsg4gsW3wIQxohAaEw4eNXe0A0YpJ8AsF8FoROt3rVMNMc1nsljad2rSq3J-Lu8MFDFGb+Wot7oX1UsMscsZICshcggtpZeFegYPI0sssPUTbLefFBw1AmgtFi50Ab5UQNUOQLpbpIYnpiooucQfpAZXwI5n20ZNgzWggyZ670QqmweggoQ-E+A0gB7AVsBdQswVp0gfwgLpZ5Zl087zAve65lF2IH454jZDQmAhAL7FAb7T5vZr5crrwC+zAbQ6b-rpA0IMhbQN02bwQrAHQmAfABoQUTxflsQeQymbWMIQJz2h2kFxJmcFmcQ4HVJ+WGlKFm4aFNFdFd4frZHLFu8rYCAOx3d3FcVA7YUQlrA579zBj-dNw+krauOQlJ7+AsRplbg5DktvY0jypl+aprDNRmpDpIRTR4RLRbRnhCnlRQnpqFR+BxA2eKnwRjRQg3u3DrRx1Yn7JYnexh1vY17oAiB0naEvYsHFMObgIctsYeBD7gw3dVVHnlMreJRVjJGq0tpcAruZMnnoXVuNntF8X-wtrwn4XZmrEjQXIsAiWC2cWHQ9YjQbknk3kvk7gKTQgDwZGmg-mMWcWewdQhQBHEsRHVX9EP7b71uTHbUReworbpp7bDo+6V8ekiV8zrA2ImOgQ7Qm1gD5ALdwoKt8wm1KNM3XQMhl1DLm3AMeJQgE3jQkzSe7whNNBeQw3Mgf0ed4JMNH0+3U3v+aeB1Tsb4ushJQHbgVYWAjQkH3mwQ2Jv7X4QUeE4dX4Jw8A6Qi7w5wZ5h3kMcJem7qMNgowDHZ5d7QiYP6Q0QRstFXAHX1FP78YX4PZL5-ZY7BXm1bQZeItm4mg15DyYHFb-rIbeQbQn2oEjYn2JAgJIJQknrXmhXpHCFwgWQ0ld5N5tHgvWA6gnZXXBl7PmQ0VIvK9Tt0tftSl7P9dwo7tuhp43GUVH08vmlvtjB-RzHkQ6l5gCv39f0Ql7PZVQElvR5HVcCWTZvMliFjvkjfJebEgv9dv0YhvDLLv3XjQZzddDd7QOsmVFBv+QNVRse4N8oCLtePGnBGPWPHx3dE9OaKLa393a3svNz03cf7PDz69ee-jPep9hDSNPvdv-JFszd7sFvNWYN0x0+q3srGDWXPDldp47PlTsk1Tmx+37Nm1bX7goXm1aADL1fCNyRQ+E-U-LWM-39uJVufTK0rYM-Lh5Tp4gjVxd3G3fLjZo-G1jQS-+-0-s-Z98-Y-F-ZGy-Qgq-OBVs77Kfa3hNR-l+SfELHIrNJ-T-jbnD5p4OSpfH6AuFtjxggYmeKZjMxz5zMLmk3GQr-lH6YtloIxWPi3zL7d98glfIQHP0IapxQ49fH3k31Ngt9664NemJ3ztptQd+QgOOqSwH53UmBe-Uvj00MIWxpG4cE5oIDYF98OBEgLgZ7FxKsCY4ZTQQZECgEiCJA6kXbjHTwEeQR+m1c-qAEv5D4Z+ijQgT1Xv7qDH+V-Ffl73X7J8ri2-aMAIOS62x+BEg0lny1kE8DrYLjGwYbBdh2Ck44gWQWIOsGWD9+3JWQbEiFbf9NuEcU-qoJSL6D6IT-LQaA1v7w0F+4-AwZTRf7ZE3+KjcMtiC-7ICf+wWfuuH0RKAD9uuAYAdK0vxgDIgP0Z6FAMzJx51SWgfEoKyJItdbwyob4FFQQ5UA+OSlY+sKC0CzB1uNgWGNyHcAzQbAgIGEAiEIgeQxYBlcnjJRpQclYOJUPqAdVU5FAHiDANxkIEEBA1NA0lBQfURsAscBKYUA6tWxthN1yAUVT2JzR6ir0HONbUwatDd4ANEKK9D6LcPHwiFxAn1P3p7xb46U3A1bY3vpS379V1YpVMugGzcDDYcaE0TmNvmDyBAfALuRsDG14ACBwKYVGkLgNxanEwAKUTAK5nRqQ5lseQDoNWG2yw5gctAaEPgEaBYdaAFIUiGSHIg80OSHIjktgGhzRRXOtAfYViQbJ6DPhu1Ywd7Gdo7cX6KvbODLW9g8kve8gBvp7AxhuBDkIpUoL5CCjDBiAj2ZghIXjBRtGggFY5HQOsyLBzApxVNpL0xB4iJCD7a0dTxk41sec5onoJsTAAkjMaSodYKEDEBNRxSFIyYNyLhy0j3IDI8gE8UgBVBnQ6wQ0CNgmjL4lS5fIqsNSWqnFbSqIoQC7BYbVEdu5nDTpEWIqYC5K8fD3ODRMjI1QItAVGKnFthx1NuiBWAUK0Wjlt6OQvYEbW2KppihA-XcPOaVWCpjaqtgfticJdGLM3RyY2+h-RwbF5g8JpPsZXgdCmxZIcwh0U2TnKDMWGcDc2u0FdEzD8aofeZg+2+C-5663DdAYrXm4zlbR+LVRjHzkpa86h9w48S1kAFp5uGm-Isbcz3Hj1ISfgjJlbkUaCAFIYgUOJt1Ca7dTYgeGsf8RuAvjpuBQtOpoD+Av1VuLVI+q3j+ClMXBzsabqHETh1iJBXAFSPBPFaADBA3DQ7uvXglp5aJKkdCYWWOpB08IfXOcW237FxjygkI+oLFRHEJUzBlZPcSm3uJptGeZHdoClktJ4EL8HYgzsCI6H3Nr8gfB-JsVWHalIAupb3KZSs7X1iOsAB0aZVYB7iEyOwAyQryLrcS6geEZibuPHH7jCKIxUyvsXMrugFJYlB3jxDb4FVdJLY4UhQDXG1kfxp4djnxLCjiUYBqvRYvCyMl2Seaq3VcWJKF6U12eOlA3grwlpud3QdlXbjFItE80zhLk5sViVU7YB1gSlJgIswdqCA+hbEUIIMOGGjDxhEPEYawGmHrEyK31NGKjG6kUhdY2AW0NiHICfZwA8pZzjuFFgajxS8BcaQ8ngICAvgcQbwDXScK2BOecwoCCvQqm1Ux2sMEQKkC+ARk6QJgDgE5i1CHiKA0QL9j4FJCUhkcmOboHjlABrwl4RHQQAAH5GyyoOsqAFhj4BtgqOTQPtNoCqw1Q4YQvl9JsCmgKAhgFHN0AhAiBSIfAQQEDM0DKw3pgeUGWO1Lr4B9gJgFAZN1xD4hxSJIckBSDulY5muwiICM6CyCqwbpFIdwNVj3CV4YZ902bsFH+ndA3puwZdi9NvCwA5IdM0ma-gQDsBWZqOaMF9PWBcyKQuBIRCTCAjiAhZlIEWTXWhmwz2ZUs1HG9IpAJh5ZksAXA+XpmkRCAjXdWWzPd5ayuZhswoHzMDD7B8AysikI+D5hEBxZD04UFbOxBvSHZY7V-BdN8ijBXZxAbUZqGkwIAnMeQPOp8QFD6hIsjgB2TYBmyGBSwFACkN4C6BBZgyrAXYK1P+x1h9SkRMAOmEGnEBPsss9oGwBoCqxnOfAaQLrMrkpZ4AqsOaZzweA8gZYckB4DuAeDEhDA6gjubrO7m9zDAusEYonOy6JZhQn2LQE8kaCwVqQnPW8YnOQ6F47gAgWGjVlggf8iITcvjhEIFk2BJ5iLRJl+yRzCgasYgLQN5loBf4Bw1M5dkfISzlYNWpw33AHlADjCrANKKXBQB8pnzX5NKWSF-NoCGlDZzuQgEFkZnhtYan2E2dlwuQ7Zj5ZoFBZ9iAXaAb5G0xoDpIclXCV61BSouiSirZEn478N8AQj-QyBKit41aOAsCxYBoFjQWBenOXbxYcutAAXKvjlyuY+gVPIKIdEOiwYKFn8NBbpJXneAUmG8j6HiCrGbFVuPNCec-LqYzz7wKHAYOFhuDcLsRn2FSHQsgUMLqsyi8MPWDLC+k7Aoi4ilADuCPBngNgSUC3mawjCBQnCvUoIBtpacdGeiqBYYthqtDGg7QqudYG4Av1FF7C5RbPOBzzyGKi8lSOIrXkIApF47KsaAE0AgwDqsbZ4CkqcBAA&html=DwQgJg9gxgLgngBwKYAIAWMC2AbAfAWAChgMcDi0kBDMclFYTJGK9GGBAWiQEcBXAJYA3ALwByAMIQAdjCSzOAFURIxKKDLmzxcgB4wA9KWwBudWioAnAM7MRfGADNOADjF0GTFimlUmIgCIhASQAdwQISxgA9U15GEDQgTAYNBEwJGCoJE4klLQAGhQBaQEYASpsTmsoSqQRAEYAj2BymGwkXAAFKgBzHIBlJF6mWSQwFAGQoVQIRxQAUUsqGAhrVPkkawA6XeADNo7yfcoaY4AjCDA4FrBhdWwqa2tAw6Rmonp6VqR9Dy+UD1+pwhiN4uNJtNZvMlis1htpFtPl99noYC0DHchLdhP8GGi8fRFBAEMUxv1LChsAJMGUAFzI74HX7oxkMEoIBwPJ4vAIchwxeDIV4sy66GLJQLU2nRFBCSp8eoBBpIACcMQMGKxOKE3OegQgDk50TxPz+ikoKHkjki2Qm0rKxWsKAAXkhLBAUKsUA0AOx+1UuABsqoaLgAzEUYJY+NJanIJpBQtJQlYwCBUSytbjkcBtWyzeiJF0AKooAAyDRQEioUEt1gEbszfwLtg6sD1vP5sslAUrH0IAO+JPKMjlCqVDXDDQADL6AEzNBpBlAAaQE2Ag5zgcms+xHAhkhIYB7H8uwisC86D84aABY781w-O1xutzutvuEKPpMfgKfpHHC8lQAVnnO95xcFxmiDO9X03bddy-H9TQMNskFgbNsVzLFOwNI0BVNAkACUkEcSwtjQL1LQQPpUG9CjbBgL1PQyRwqD4bBmPPRVrAzZkW0HBhMRzIS83uKBHn1AJDQ4QiCzRYowHwuSTTZegAHUqDKEpehYlB1isGBdm2AsBNZMSROwsT8yE75uzwgJIDKQUVECc4HFWaQJWUgJeggGIeKVAYWCiSFMiQEyNSw44DEua5YuMcggA&css=BYFwtgNgNAsAUAIwPYBMCeACA3vDGBWArgM4gCWAZmgLQDGSAdiAKZMBcGtrLATgNy4MAQwhkA5g2pkWYYhy5Nm-QSwAeIaiPEN53JQLh4KjDQHdm40B2QQUBoyerEyAL2YcAjACYADAFJ7DDAhHjEySWQQECQwTx8AB1UDAF94eAA6chAIZmxBYyYnV3cMX38UtLh08PjCEDzDDAKNZzc48sF4oRQUcLE2AFZEjA8h1QwxkbGKuAykOtr6nEaunr62AHZh0eGt8Z2k+FTZqpQkaQaHQvNLEGskW0DmoraRjw7G5B4UJTYAZmGxAeZBQGAQECEtAA1oEEJCoWIePMGCg2ABiABiPgAogMACIeQKrXoMfp7Ka7bbTI7wIA). It runs very slightly slower than pure JavaScript, and the JavaScript output "Code" view shows why: the code generated for Tail Call Optimizations (TCO) isn't quite a simple loop as for the JavaScript - it would be easy to hand tune the code just for the tight inner culling loops to get the same speed. The code is written in functional style except for the array content mutation and as necessary for the sequence generator functions, which are in the same form as the JavaScript for easy understanding; it would work about as fast if this streaming generator part of the code were written to use F# sequences, with no visible mutation.

Since the above Fable code is pure F#, it could also run with the Fabulous library as a JavaScript generator from DotNet Core, or could run multi-platform and a little faster by directly running it under DotNet Core.

**END_EDIT_ADD_MORE_AND_EVEN_MORE**

In summary, there are all sorts of algorithms that can find the primes to a few million in the order of a second, but it takes an efficient page segmented array based Sieve of Eratosthenes algorithm to determine the primes to billions in that order of execution time.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-24T07:37:00.287

我会将此作为对亚历山大的评论发布，但我没有这样做的声誉。他的答案很棒，这只是对其进行了调整以使其更快。我通过测试 n = 100,000,000 进行基准测试。

我没有在“数组”中使用真假，而是通过使用 1 和 0 获得了很大的速度提升。这将我在 Chrome 中的时间从 5000 毫秒减少到 4250 毫秒。Firefox 不受影响（5600 毫秒）。

然后我们可以考虑到偶数永远不会是素数。立即将 2 放入“输出”中，您可以执行 i=3; i += 2, 并且 j += i*2 在筛子期间（我们可以跳过偶数倍数，因为任何数字乘以偶数都是偶数），只要我们在推到“输出”时也有 i += 2结尾。这将我在 Chrome 中的时间从 4250 毫秒减少到 3350 毫秒。Firefox 受益少一点，从 5600 毫秒下降到 4800 毫秒。

无论如何，这两个调整的结合让我在 Chrome 中的速度提升了 33%，在 Firefox 中提升了 14%。这是亚历山大代码的改进版本。

```
var eratosthenes = function(n) {
    // Eratosthenes algorithm to find all primes under n
    var array = [], upperLimit = Math.sqrt(n), output = [2];

    // Make an array from 2 to (n - 1)
    for (var i = 0; i < n; i++)
        array.push(1);

    // Remove multiples of primes starting from 2, 3, 5,...
    for (var i = 3; i <= upperLimit; i += 2) {
        if (array[i]) {
            for (var j = i * i; j < n; j += i*2)
                array[j] = 0;
        }
    }

    // All array[i] set to 1 (true) are primes
    for (var i = 3; i < n; i += 2) {
        if(array[i]) {
            output.push(i);
        }
    }

    return output;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-30T12:04:09.187

只是为了好玩，我严格按照 TDD 规则实现了 Erastoten 筛算法（使用 Node 运行）。这个版本应该足够面试，作为学校练习或者就像我一样 - 有点乱七八糟。

**让我声明，我绝对认为接受的答案应该是 GordonBGood 提供的答案。**

```
module.exports.compute = function( size )
{
    if ( !utils.isPositiveInteger( size ) )
    {
        throw new TypeError( "Input must be a positive integer" );
    }

    console.time('optimal');
    console.log();
    console.log( "Starting for optimal computation where size = " + size );
    let sieve = utils.generateArraySeq( 2, size );

    let prime = 2;
    while ( prime )
    {
        // mark multiples
        for ( let i = 0; i < sieve.length; i += prime )
        {
            if ( sieve[i] !== prime )
            {
                sieve[i] = -1;
            }
        }

        let old_prime = prime;
        // find next prime number
        for ( let i = 0; i < sieve.length; i++ )
        {
            if ( ( sieve[i] !== -1 ) && ( sieve[i] > prime ) )
            {
                prime = sieve[i];
                break;
            }
        }

        if ( old_prime === prime )
        {
            break;
        }
    }
    console.timeEnd('optimal');
    // remove marked elements from the array
    return sieve.filter( 
        function( element )
        {
            return element !== -1;
        } );
} // compute 
```

我会欣赏任何有意义的批评。

[整个存储库可以在我的 github 帐户上找到。](https://github.com/LacikIgor/EratostenSieve)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-19T18:16:40.097

```
function sieveOfEratosthenes(num, fromSt = null) {
let boolArr = Array(num + 1).fill(true); // Taking num+1 for simplicity
boolArr[0] = false;
boolArr[1] = false;

for (
    let divisor = 2;
    divisor * divisor <= num;
    divisor = boolArr.indexOf(true, divisor + 1)
)
    for (let j = 2 * divisor; j <= num; j += divisor) boolArr[j] = false;

let primeArr = [];
for (
    let idx = fromSt || boolArr.indexOf(true);
    idx !== -1;
    idx = boolArr.indexOf(true, idx + 1)
)
    primeArr.push(idx);

return primeArr;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-24T21:48:18.257

`ok 2 - big test # time=498.815ms`该算法每 100 万次需要几毫秒 ( )：

```
module.exports.fast = function eratosthenes (max) {
  let sqrt = Math.sqrt(max)
  let sieve = new Array(max).fill(0)

  for (let primeCandidate = 2; primeCandidate < sqrt; primeCandidate++) {
    if (sieve[primeCandidate] === true) {
      continue // already processed
    }
    for (let multiple = primeCandidate * primeCandidate; multiple < max; multiple += primeCandidate) {
      if (sieve[multiple] === 0) {
        sieve[multiple] = true
      }
    }
  }

  return sieve
    .map((isPrime, i) => ({ i, isPrime })) // find the number associated with the index
    .filter(({ i, isPrime }) => isPrime === 0 && i >= 2) // remove not prime numbers
    .map(({ i }) => i) // output only the values
} 
```

`eratosthenes(1000000)`返回一个带有`78498`素数的数组。

# android - JNI调用中的“ni”是什么？

> ID：15471292
> 
> 赞同：0
> 
> 时间：2013-03-18T07:00:59.487
> 
> 标签：android, java-native-interface

```
(env)->GetMethodID(java_bitmap_class, "ni", "()I") 
```

通常有一个记录在案的方法名称来代替“ni”，例如`getRowBytes`. 我建议它可能意味着“本机界面”。但那是什么，我在哪里可以找到它的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:09:07.413

我不知道这是否有帮助。试试看嘛。

按`ctrl`+`f`并输入“ni”，然后在文档中找到它所在的所有内容。尝试找到“ni”的定义位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:53:16.057

它是 java_bitmap_class 中应该~~调用~~的方法的名称。

# regex - 在 PHP 中使用分隔符以正确的顺序对字符串进行正则表达式验证

> ID：15471295
> 
> 赞同：0
> 
> 时间：2013-03-18T07:01:06.793
> 
> 标签：regex

我正在尝试制作一个表达式来验证提供的字符串是否是有效格式，但似乎如果我在几个月内不使用正则表达式，我就会忘记我学到的一切，不得不重新学习它。

我的表达式应该匹配这样的格式：010L0404FFCCAANFFCC00M000000XXXXXX 这四个分隔符是 (L, N, K, M)，它们不在 0-9A-F 十六进制范围内，以指示唯一性**必须按该顺序**或不在列表中。每个分隔符只能存在一次！

它分解为：

*   以 3 位数字开头，它只是 ^([0-9]{3}) 并且始终是必需的
*   第二组以 L 开头，必须是 2 位 + 2 位 + 6 位十六进制，可选
*   第三组以 N 开头，必须是 6 位十六进制，可选
*   第四组 K 是任意数量的数字，是可选的
*   第五组是M，可以是任意6个16进制或XXXXXX表示无，必须是6的倍数，不包括0，如336699（6）或336699XXXXXXFFCC00（18），可选

最难的部分我无法弄清楚使其按顺序和倍数需要它，例如 L 定界符必须在之前，并且 K 总是如果它在那里（原因是我没有得到相同字符串的变体，这意味着相同分隔符交换的东西）。我已经可以解析它了，我只想验证字符串的格式是否正确。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:09:20.670

```
^([0-9]{3})(L[0-9]{4}[0-9A-F]{6})?(N[0-9A-F]{6})?(K[0-9]+)?(M([0-9A-F]{6})+|MX{6})$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:09:37.470

要求订单还不错。只需将每组设置为可选。正则表达式仍将按顺序匹配，因此如果 L 部分不存在并且下一个字符是 N，它不会让 L 稍后出现，因为它不会匹配正则表达式的任何其余部分。

我相信您的要求的直接翻译是：

```
^([0-9]{3})(L[0-9]{4}[0-9A-F]{6})?(N[0-9A-F]{6})?(K[0-9]+)?(M([0-9A-F]{6}|X{6})+)?$ 
```

没有真正的技巧，只是让每个组除了前三个数字之外都是可选的，并为 M 块中的两个六位数模式添加一个内部替代方案。

# android - 使用 stl map 的操作符 [] 时 android ndk 崩溃

> ID：15471303
> 
> 赞同：2
> 
> 时间：2013-03-18T07:01:50.810
> 
> 标签：android, c++, map, stl, android-ndk

我有一张地图：`map < int64_t, Item* > m_items`;

使用时`m_items[one_id]`，我的应用程序崩溃了。但如果我使用`map<int64_t, Item*>::iterator iter = m_items.find(one_id)`，没关系。

如果我需要添加我必须使用的项目：`m_items.insert(make_pair(one_id, one_item));`

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T14:00:55.123

你知道你使用的是什么版本的 gcc 吗？如果是 gcc 4.5 或更早版本，gcc 中的这个错误会导致 Boost 的无序映射的 [] 运算符无法正常工作：[http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=40145) ://gcc.gnu.org/bugzilla/show_bug.cgi?id=40145 也许你看到了类似的东西。

如果是 gcc 4.6 我不确定，但是 C++11 at() 方法将可供您使用，它有点慢，但比 find 快。[http://www.cplusplus.com/reference/map/map/at/](http://en.cppreference.com/w/cpp/container/map/at)

# php - AJAX POST request accepts number but not String

> ID：15471309
> 
> 赞同：0
> 
> 时间：2013-03-18T07:02:03.603
> 
> 标签：php, javascript, html, ajax

Alright, I have looked around for this problem, but I can only find references to JSON, which I am currently not using. The array value that has a number in it passes, and the DIV updates. However, when ever I try to pass in a string, nothing happens. Here is the code:

```
<php> 
$cont = array();
$cont[] = 'yo';
$cont[] = '2';
foreach($cont as $c){
  $statement .= '<button type=\"button\" onclick=\"nFunc('.$c.')\">'.$c.'</button>';
}
</php>
<script>

function nFunc(str)
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
}
xmlhttp.open("POST","test.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("p="+str);
}
</script>
<div id="myDiv">Default</div>
{$statement} 
```

Please note I am doing testing with AJAX via IP.Board/IP.Content, so the tags and variables in {} are parsed by the IP.C engine.

This code outputs two buttons labeled "yo" and "2". When "2" is clicked, the DIV updates correctly. When "yo" is clicked, nothing occurs.

The test.php file is very simple:

```
<?php
$hello = $_POST['p'];
echo $hello;
?> 
```

Thanks for any help beforehand.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:11:18.677

`HTML`您的`PHP`Statement 的此输出无效：

```
<button type=\"button\" onclick=\"nFunc(yo)\">yo</button><button type=\"button\" onclick=\"nFunc(2)\">2</button> 
```

注意 `onclick=\"nFunc(yo)\">`

请参阅您的字符串参数没有用引号引起来，并且那里也不需要那些反斜杠。这就是为什么您会看到该错误，这当然不会在数字的情况下发生。

```
$statement .= '<button type=\"button\" onclick=\"nFunc('.$c.')\">'.$c.'</button>'; 
```

应该

```
$statement .= '<button type="button" onclick="nFunc(\''.$c.'\')">'.$c.'</button>'; 
```

修复后它就像一个魅力，我刚刚测试过。

# python - 使用带冒号的字符串创建字典

> ID：15471311
> 
> 赞同：3
> 
> 时间：2013-03-18T07:02:26.010
> 
> 标签：python, dictionary, python-2.7

假设有一个字符串 s，它看起来像这样：

```
s = 'Title: A title Date: November 23 1234 Other: Other information' 
```

是否可以创建一个字典，它将是：

```
{'Title':'A title','Date':'November 23 1234','Other':'Other information'} 
```

起初我想只是将它拆分到冒号所在的位置，但后来，不知道 Title 的值可能是什么，标题本身可能有冒号。唉，这个信息的来源也没有用逗号分隔，所以这也是一种痛苦。EG，你怎么能这样做：

```
s = 'Title: Example: of a title Date: November 23 1234 Other: Other information' 
```

该示例中的标题为`Example: of a title`.

我已经检查了[这个问题](https://stackoverflow.com/questions/14440940/creating-dictionary-object-from-string-that-looks-like-dictionaries)，但它没有回答我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:29:35.857

```
import re
from itertools import izip

s = 'Title: Example: of a title Date: November 23 1234 Other: Other information'

keys = ['Title', 'Date', 'Other']
pattern = re.compile('({})\s+'.format(':|'.join(keys)))

print dict(izip(*[(i.strip() for i in (pattern.split(s)) if i)]*2)) 
```

出去：

```
{'Date:': 'November 23 1234 ',
 'Other:': 'Other information',
 'Title:': 'Example: of a title '} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:05:52.343

你可以用正则表达式来做到这一点：

```
>>> import re
>>> 
>>> s = 'Title: A title Date: November 23 1234 Other: Other information'
>>> matches = re.findall(r'(\w+): ((?:\w+\s)+)', s)
>>> 
>>> dict(matches)
    {'Date': 'November 23 1234 ', 'Other': 'Other ', 'Title': 'A title '} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:21:59.133

你不能只用冒号分割它，因为它们有多个（可能是嵌套的）。

如果关键字（`Title`, `Date`, `Other`）是固定的，您可以尝试以下正则表达式：

```
import re
reg_ex = re.compile("Title\:(.+)Date\:(.+)Other\:(.+)")
reg_ex.match(s).groups() #(' A title ', ' November 23 1234 ', ' Other information') 
```

# user-interface - 检测 GUI 纹理上的触摸

> ID：15471316
> 
> 赞同：0
> 
> 时间：2013-03-18T07:02:49.723
> 
> 标签：user-interface, mouse, unity3d

我有 2 个 gui 纹理。

根据屏幕宽度和高度，我将其保存在 gui 中。

一个用于操纵杆，另一个用于射手。

现在触摸射手操纵杆移动到该特定部分。

我用了 rect.Contains。

```
void Start () {
xx = Screen.width - Screen.width/12;
yy = Screen.height - Screen.height/8; 
lb = Screen.width/10;
rect = new Rect(-xx/2, -yy/2, lb, lb);
shooter.pixelInset  = rect;       
shooter.enabled = false;      
}

void OnGUI(){
if(characterScript.playbool){
   shooter.enabled = true;
} 
if (rect.Contains(Event.current.mousePosition)){
shootBool = true;
print("shoot");
alert.text="shoot";
}   
} 
```

不适合我。认为空间坐标与 gui 坐标不同。如何解决这个问题。任何人都可以提出任何其他好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:22:55.650

你可以试试[`HitTest`](http://docs.unity3d.com/Documentation/ScriptReference/GUIElement.HitTest.html)。

```
function Update()
{
    for (var touch : Touch in Input.touches)
    {
        if (rect.Contains(touch.position))
        {
            // we are now in the guitexture 'rect'
            Debug.Log("rect touched");
            exit;
        }
    }
} 
```

如您在问题中所述，上述代码与触摸一起使用。但是，由于您标记`mouse`了 ，我不确定您是使用鼠标还是触摸。

因此，如果您使用鼠标单击对象，则可以使用：

```
if (rect.Contains(Input.mousePosition) && Input.GetMouseButtonDown(0))
{
    Debug.Log("rect clicked");
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:25:29.397

对您的代码进行一些调试会带来一些问题。

假设屏幕分辨率为 800x600px：

```
xx = 800 - 800 / 12
   = 733.3333333333333
yy = 600 - 600 / 8
   = 525
lb = 800 / 10
   = 80
rect = (-366.665, -262.5, 80, 80) 
```

为什么是`lb`由屏幕宽度除以十来决定的？

现在问题的核心是`Event.mousePosition`从屏幕的左上角开始，而在屏幕`GUITexture.pixelInset`的中心。

您必须调整`Event.mousePosition`以使用屏幕中心作为原点，或者您必须调整`rect`变量以从屏幕左上角开始。

# ruby-on-rails - Best practice for making single-use pages

> ID：15471318
> 
> 赞同：1
> 
> 时间：2013-03-18T07:02:50.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3, assets

From time to time, we held special events on our site (e.g. discounts or lottery draw). These events each will have a special page (or pages) with very distinct styles/javascripts/images.

These one-time-use pages will be removed once the events are over. Managing the files can get messy as we have to name stylesheets, change the image path inside stylesheets, create corresponding image controller folders, etc.

How to better manage all resources related to the event, so it can be mounted on the main site easily? I have looked into Rails engine, but it seems to require each event to be as one gem, which seems overly complicated for me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:05:42.877

不久前我们遇到过类似的情况（对于用户帐户而不是事件），我们尝试在资产文件结构中管理 css 和图像，每个集合都包含在一个根据它们所在帐户的 id 命名的目录中。这工作得很好，但意味着为样式的任何更改部署整个应用程序，这些资产上的更改请求的数量和性质很小，至少可以说这个过程很乏味。

所以我们已经切换到数据库驱动模型。自定义样式包含在客户记录的文本字段中。图像托管在 AWS S3 上，样式表通过绝对 URL 引用它们。我们设想有一天使用 CarrierWave 将图像附加到记录中，但现在手动管理图像就足够了。

# linux - 链接器如何知道要与系统调用链接什么？

> ID：15471319
> 
> 赞同：1
> 
> 时间：2013-03-18T07:02:53.463
> 
> 标签：linux, compiler-construction, linker, epoll

当我试图在 RHEL 5.5 服务器上手动编译 squid 时，运行`configure`并得到

```
configure: WARNING: Eep!  Cannot find epoll, kqueue, /dev/poll, poll or select!
configure: WARNING: Will try select and hope for the best.
configure: Using select for the IO loop. 
```

看起来内核没有配置`CONFIG_EPOLL`. 所以我尝试编译[这个示例 epoll 程序](https://banu.com/blog/2/how-to-use-epoll-a-complete-example-in-c/)来检查它是否有效。

在我的 gentoo 机器上（`CONFIG_EPOLL`已启用。），它的编译没有任何问题。

在服务器上，我得到了

```
/tmp/cc8PhJh0.o: In function 'main':
epoll-exmaple.c:(.text+0x262): undefined reference to 'epoll_create1'
collect2: ld returned 1 exit status 
```

我们都知道 c 程序编译器在 *.h 文件中查找定义，链接器将它们与 *.so 文件链接。

我的问题是，`epoll_create1`是对内核的系统调用。链接器究竟搜索哪个文件来定位该系统调用的实现？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:16:53.010

它在系统 C 库中查找（通常；少数系统调用在其他特殊库中，如 librt）。C 库为处理系统调用的用户空间程序提供了一个 C API。有时这可能是系统调用的一个非常薄的包装器，它只负责设置和返回参数，但更常见的是，它具有您不想担心的各种粘合，例如数据大小之间的差异用户空间和内核、不同架构的实现差异、内核系统调用 API 更改的向后或向前兼容性等等。

```
% readelf -s /lib/i386-linux-gnu/libc.so.6 | grep epoll_create1
  1837: 000d5280    52 FUNC    GLOBAL DEFAULT   12 epoll_create1@@GLIBC_2.9 
```

如果您查看上面的 C 库，您可以看到链接器链接代码所针对的 C 函数。

# php - 无法根据来自 php 的 json id 在 JavaScript 中设置变量

> ID：15471320
> 
> 赞同：1
> 
> 时间：2013-03-18T07:02:57.110
> 
> 标签：php, javascript, jquery, getjson, json

我有一个来自 php 文件的简单数组（不使用 json 文件的原因是因为此信息来自 mysql 数据库）

```
$array[0] = array('id' => 1,'price' => '325');
$array[1] = array('id' => 2,'price' => '486');      
header('Content-type: application/json');
echo json_encode($array); 
```

它回响为：

```
[{"id":1,"price":"325"},{"id":2,"price":"486"}] 
```

现在我要做的是获取 id 并将其添加到一个名为 counterval 的变量中，以便 JavaScript 将其读取为

```
counterval1 = 325;
counterval2 = 486; 
```

但我似乎无法让它以这种方式阅读。这是当前的脚本。

```
$.getJSON('test.php',function(data) {
    $.each(data, function(i) {
    counterval + data[i].id = data[i].price;
    console.log (counterval2);
});
    $('#results').html(counterval2);    
});
var counterval1 = 0;
var counterval2 = 0; 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:05:49.747

你不能那样做……但你可以这样做……

```
var counterval = [];

$.getJSON('test.php',function(data) {
    $.each(data, function(i) {
         counterval[data[i].id] = data[i].price;
         console.log (counterval[2]);
    });
    $('#results').html(counterval[2]);    
});
counterval[1] = 0;
counterval[2] = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:11:35.070

看我对你帖子的评论。如果您真的希望变量看起来像您解释的那样：

```
eval("counterval" + data[i].id + " = data[i]..price");
alert(counterval1); 
```

# java - Netbeans 中的 JTable

> ID：15471326
> 
> 赞同：0
> 
> 时间：2013-03-18T07:03:40.310
> 
> 标签：java, mysql, swing, jtable, defaulttablemodel

当有三列时，我想将 db(MySql) 数据添加到 jTable 中的单个特定列。从下面的编码数据自动添加到第一列，但我想将它添加到 Jtable 中的第二列。请帮助我..我是 netbeans 的新手！！！

```
Connection con = Driver.connect();
ResultSet rst = Handler.getData(con, "select lec_name from lecturer"); 
DefaultTableModel dtm = (DefaultTableModel)jTable1.getModel();
while (rst.next()) {
   Object ob []= {rst.getString(1)};
   dtm.addRow(ob); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:23:41.227

Object 数组中的每个元素都是一列。这意味着，您只需要用正确的值填充行数组

```
Object ob []= {rst.getString(1), rst.getString(2), rst.getString(3)}};
dtm.addRow(ob); 
```

这当然假设您首先已将适当的列添加到模型中

# javascript - Jquery .click not firing

> ID：15471328
> 
> 赞同：0
> 
> 时间：2013-03-18T07:03:59.313
> 
> 标签：javascript, jquery, html

Trying to learn JQuery here, im starting off really simple.

When I click the button, the page reloads and nothing happens.

Heres my JS:

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
  $("#submitShout").click(function() {  
  alert('hi');
  });  

  </script> 
```

Here's my html:

```
<div class="panel right">   
<form name="shout" >
<textarea name="text" id="text" class="ribbitText"></textarea>
<input type="submit" id="submitShout" value="Ribbit!">
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:07:04.040

我想你忘记了文件。准备好了..

```
$(function () { //<--- here..the codes below is called whn document is ready
    $("#submitShout").click(function () {
        alert('hi');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:07:16.220

确保你包含 jQuery 参考并且你的代码被包围

```
$(function(){

}); 
```

作为

```
$(function () {
    $("#submitShout").click(function () {
        alert('hi');
    });
}); 
```

或单击文档末尾的绑定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:09:19.307

我猜要么您缺少`doc ready`处理程序，要么缺少`jQuery lib`：

首先尝试这个：

```
 $(function(){
     $("#submitShout").click(function() {  
         alert('hi');
      }); 
   }); 
```

然后这个：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
   $(function(){
     $("#submitShout").click(function() {  
         alert('hi');
      }); 
   });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:09:41.423

1.  确保 jQuery 已加载
2.  使用最新的 jQuery 库
3.  检查错误控制台（使用 chrome 开发人员工具或 firebug for firefox
4.  尝试将您的 jQuery 更改为

**代码：**

```
$(function(){
    $("#submitShout").click(function(e) {  
       e.preventDefault();
       alert('hi');
       return false;
   }); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T07:10:25.560

尝试这个

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      $("#submitShout").click(function(event) {  
      alert('hi');
      event.preventDefault();
      });  
    });
      </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T07:06:12.443

试试这个，

```
$("#submitShout").on("click", function() {  
  alert('hi');
}); 
```

如果是较低版本的 Jquery，试试这个。

```
$("#submitShout").live("click", function() {  
      alert('hi');
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T07:07:24.927

**jQuery 1.9 版本**

```
$(function(){
    $("#submitShout").on('click',function(){
        //your code
        });
}); 
```

**jQuery 版本低于 1.9**

```
$(function(){
     $("#submitShout").live('click',function(){
            //your code
            });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-18T07:07:41.617

那是一个非常旧的 jquery 版本，将其升级到更新的版本：

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery)

# c# - 如何获取类型的别名？

> ID：15471330
> 
> 赞同：3
> 
> 时间：2013-03-18T07:04:07.850
> 
> 标签：c#, .net, reflection, types

是否可以实现类似的方法

```
string GetFriendlyName(Type type) { ... } 
```

在 .NET 中，如果可能的话，它将返回该类型的[CLR 别名](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/88418.aspx)？在这种情况下`GetFriendlyName(typeof(Foo))`，将返回“Foo”，但`GetFriendlyName(typeof(int))`会返回“int”而不是“Int32”，就像在[MemberInfo.Name中一样](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.name%28v=vs.100%29.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T07:09:19.663

*好吧*，我不相信没有办法以编程方式做到这一点。您可以使用 a[`dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)而不是 like；

```
public static readonly Dictionary<Type, string> aliases = new Dictionary<Type, string>()
{
    { typeof(string), "string" },
    { typeof(int), "int" },
    { typeof(byte), "byte" },
    { typeof(sbyte), "sbyte" },
    { typeof(short), "short" },
    { typeof(ushort), "ushort" },
    { typeof(long), "long" },
    { typeof(uint), "uint" },
    { typeof(ulong), "ulong" },
    { typeof(float), "float" },
    { typeof(double), "double" },
    { typeof(decimal), "decimal" },
    { typeof(object), "object" },
    { typeof(bool), "bool" },
    { typeof(char), "char" }
}; 
```

**编辑**：我发现了两个问题来提供答案

*   [有没有办法通过反射获得类型的别名？](https://stackoverflow.com/questions/1362884/is-there-a-way-to-get-a-types-alias-through-reflection)
*   [可以在 c# 中获取别名类型的类型吗？](https://stackoverflow.com/questions/320948/possible-to-get-type-of-an-aliased-type-in-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:13:43.667

您可以尝试这种方式：

```
private string GetFriendlyName(Type type)
{
    Dictionary<string, string> alias = new Dictionary<string, string>()
        {
            {typeof (byte).Name, "byte"},
            {typeof (sbyte).Name, "sbyte"},
            {typeof (short).Name, "short"},
            {typeof (ushort).Name, "ushort"},
            {typeof (int).Name, "int"},
            {typeof (uint).Name, "uint"},
            {typeof (long).Name, "long"},
            {typeof (ulong).Name, "ulong"},
            {typeof (float).Name, "float"},
            {typeof (double).Name, "double"},
            {typeof (decimal).Name, "decimal"},
            {typeof (object).Name, "object"},
            {typeof (bool).Name, "bool"},
            {typeof (char).Name, "char"},
            {typeof (string).Name, "string"}
        };
    return alias.ContainsKey(type.Name) ? alias[type.Name] : type.Name;
} 
```

我建议您制作`alias`字典 `static readonly`以提高性能。

# python - 如何消除相等运算符的python3弃用警告？

> ID：15471333
> 
> 赞同：7
> 
> 时间：2013-03-18T07:04:14.507
> 
> 标签：python, python-2.7, deprecated

虽然标题可以理解为三个问题，但实际问题描述起来很简单。在 Linux 系统上，我安装了 python 2.7.3，并希望收到有关 python 3 不兼容性的警告。因此，我的代码片段 ( `tester.py`) 看起来像：

```
#!/usr/bin/python -3

class MyClass(object):    
    def __eq__(self, other):
        return False 
```

当我执行此代码片段（被认为只是为了显示问题，而不是我在项目中使用的实际代码）时

```
./tester.py 
```

我收到以下弃用警告：

```
./tester.py:3: DeprecationWarning: Overriding __eq__ blocks inheritance of __hash__ in 3.x
  class MyClass(object): 
```

我的问题：如何更改此代码片段以消除警告，即使其与版本 3 兼容？我想以正确的方式实现相等运算符，而不仅仅是抑制警告或类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T07:09:41.740

从 Python 3.4 的[文档](http://docs.python.org/3.4/reference/datamodel.html)页面：

> 如果一个类没有定义一个`__eq__()`方法，它也不应该定义一个`__hash__()`操作；如果它定义`__eq__()`但不是`__hash__()`，它的实例将不能用作可散列集合中的项目。如果一个类定义了可变对象并实现了一个`__eq__()`方法，那么它就不应该实现`__hash__()`，因为可哈希集合的实现要求一个键的哈希值是不可变的（如果对象的哈希值发生变化，它将在错误的哈希桶中）。

基本上，您需要定义一个`__hash()__`函数。

问题是对于用户定义的类，`__eq()__`和`__hash()__`函数是自动定义的。

> `x.__hash__()`返回一个适当的值，这`x == y`意味着`x is y`和`hash(x) == hash(y)`。

如果只定义`__eq()__`, 则`__hash()__`设置为 return `None`。所以你会碰壁。

如果您不想费心实现`__hash()__`并且您确定您的对象永远不会被散列，那么更简单的方法是，您只需明确声明`__hash__ = None`哪个负责警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-14T20:55:12.350

Alex：python 的 -3 选项警告你一个潜在的问题；它不知道您没有在集合中使用 MyClass 的实例或作为映射中的键，因此它会警告您可能一直依赖的东西不会起作用，如果您是的话。如果您没有以这种方式使用 MyClass，请忽略该警告。这是一个帮助您发现潜在问题的愚蠢工具；最后，您应该是具有实际智慧的人来确定哪些警告实际上很重要。

如果你真的关心抑制警告——或者，事实上，如果一个类是可变的，并且你想确保它*没有*在集合中使用或作为任何映射中的键——简单的赋值`__hash__ = None`（如 Sudipta 指出的）在班级机构将为您做到这一点。由于 None 不可调用，这使得实例不可散列。

```
 class MyClass (object):
        def __eq__(self, other): return self is other
        __hash__ = None 
```

# javascript - Yeoman - 找不到任务“requirejs”

> ID：15471337
> 
> 赞同：3
> 
> 时间：2013-03-18T07:04:26.157
> 
> 标签：javascript, requirejs, yeoman, gruntjs

我在使用 yeoman 时遇到问题，特别是当我尝试运行 grunt 时，它在 requirejs 上失败，简单地说“任务‘requirejs’不存在”。这真的很奇怪，因为在我的 gruntfile 中我有 requirejs 的选项定义，并且我也将它安装在 package.json 文件中。你知道可能是什么问题吗？

谢谢！

```
// Generated on 2013-03-14 using generator-webapp 0.1.5
"use strict";
var lrSnippet = require("grunt-contrib-livereload/lib/utils").livereloadSnippet;
var mountFolder = function(connect, dir) {
  return connect.static(require("path").resolve(dir));
};

// # Globbing
// for performance reasons we"re only matching one level down:
// "test/spec/{,*/}*.js"
// use this if you want to match all subfolders:
// "test/spec/**/*.js"

module.exports = function(grunt) {
  // load all grunt tasks
  require("matchdep").filterDev("grunt-*").forEach(grunt.loadNpmTasks);

  // configurable paths
  var yeomanConfig = {
    app: "app",
    dist: "dist"
  };

  grunt.initConfig({
    yeoman: yeomanConfig,
    watch: {
      coffee: {
        files: ["<%= yeoman.app %>/scripts/{,*/}*.coffee"],
        tasks: ["coffee:dist"]
      },
      coffeeTest: {
        files: ["test/spec/{,*/}*.coffee"],
        tasks: ["coffee:test"]
      },
      compass: {
        files: ["<%= yeoman.app %>/styles/{,*/}*.{scss,sass}"],
        tasks: ["compass"]
      },
      livereload: {
        files: [
          "<%= yeoman.app %>/*.html",
          "{.tmp,<%= yeoman.app %>}/styles/{,*/}*.css",
          "{.tmp,<%= yeoman.app %>}/scripts/{,*/}*.js",
          "<%= yeoman.app %>/images/{,*/}*.{png,jpg,jpeg,webp}"],
        tasks: ["livereload"]
      }
    },
    clean: {
      dist: [".tmp", "<%= yeoman.dist %>/*"],
      server: ".tmp"
    },
    jshint: {
      options: {
        jshintrc: ".jshintrc"
      },
      all: [
        "Gruntfile.js",
        "<%= yeoman.app %>/scripts/{,*/}*.js",
        "!<%= yeoman.app %>/scripts/vendor/*",
        "test/spec/{,*/}*.js"]
    },
    coffee: {
      dist: {
        files: [{
          // rather than compiling multiple files here you should
          // require them into your main .coffee file
          expand: true,
          cwd: "<%= yeoman.app %>/scripts",
          src: "*.coffee",
          dest: ".tmp/scripts",
          ext: ".js"
        }]
      },
      test: {
        files: [{
          expand: true,
          cwd: ".tmp/spec",
          src: "*.coffee",
          dest: "test/spec"
        }]
      }
    },
    compass: {
      options: {
        sassDir: "<%= yeoman.app %>/styles",
        cssDir: ".tmp/styles",
        imagesDir: "<%= yeoman.app %>/images",
        javascriptsDir: "<%= yeoman.app %>/scripts",
        fontsDir: "<%= yeoman.app %>/styles/fonts",
        importPath: "app/components",
        relativeAssets: true
      },
      dist: {}
    },
    requirejs: {
      dist: {
        options: {
          baseUrl: "app/scripts/editor",
          optimize: "none",
          preserveLicenseComments: false,
          useStrict: true,
          wrap: true
        }
      }
    },
    useminPrepare: {
      html: "<%= yeoman.app %>/index.html",
      options: {
        dest: "<%= yeoman.dist %>"
      }
    },
    usemin: {
      html: ["<%= yeoman.dist %>/{,*/}*.html"],
      css: ["<%= yeoman.dist %>/styles/{,*/}*.css"],
      options: {
        dirs: ["<%= yeoman.dist %>"]
      }
    },
    imagemin: {
      dist: {
        files: [{
          expand: true,
          cwd: "<%= yeoman.app %>/images",
          src: "{,*/}*.{png,jpg,jpeg}",
          dest: "<%= yeoman.dist %>/images"
        }]
      }
    },
    cssmin: {
      dist: {
        files: {
          "<%= yeoman.dist %>/styles/main.css": [
            ".tmp/styles/{,*/}*.css",
            "<%= yeoman.app %>/styles/{,*/}*.css"]
        }
      }
    },
    htmlmin: {
      dist: {
        options: {
          removeCommentsFromCDATA: true,
          // https://github.com/yeoman/grunt-usemin/issues/44
          //collapseWhitespace: true,
          collapseBooleanAttributes: true,
          removeAttributeQuotes: true,
          removeRedundantAttributes: true,
          useShortDoctype: true,
          removeEmptyAttributes: true,
          removeOptionalTags: true
        },
        files: [{
          expand: true,
          cwd: "<%= yeoman.app %>",
          src: "*.html",
          dest: "<%= yeoman.dist %>"
        }]
      }
    },
    copy: {
      dist: {
        files: [{
          expand: true,
          dot: true,
          cwd: "<%= yeoman.app %>",
          dest: "<%= yeoman.dist %>",
          src: [
            "*.{ico,txt}",
            ".htaccess"]
        }]
      }
    },
    bower: {
      all: {
        rjsConfig: "<%= yeoman.app %>/scripts/main.js"
      }
    }
  });

  grunt.renameTask("regarde", "watch");

  grunt.registerTask("server", function(target) {
    if (target === "dist") {
      return grunt.task.run(["build", "open", "connect:dist:keepalive"]);
    }

    grunt.task.run([
      "clean:server",
      "coffee:dist",
      "livereload-start",
      "connect:livereload",
      "open",
      "watch"
    ]);
  });

  grunt.registerTask("test", [
    "clean:server",
    "coffee",
    "compass"
  ]);

  grunt.registerTask("build", [
    "clean:dist",
    "coffee",
    "compass:dist",
    "useminPrepare",
    "requirejs",
    "imagemin",
    "htmlmin",
    "concat",
    "cssmin",
    "uglify",
    "copy",
    "usemin"
  ]);

  grunt.registerTask("default", [
    "jshint",
    "test",
    "build"
  ]);
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-15T08:26:52.987

刚才遇到了类似的问题，经过一个小时的工作，我终于弄明白了：）

这是我的建议：

1 npm 更新

使用更新命令确保您已安装软件包。

2 检查你是否也犯过和我一样的错误。

**关于 'package.json' 文件**：我已将所有依赖项放在*"dependencies"*而不是*"devDependencies"*中。通过这样做，npm 仍然会安装所有的包，但 yeoman 会发现它们。

# sql - SQL Server 标志

> ID：15471338
> 
> 赞同：0
> 
> 时间：2013-03-18T07:04:30.667
> 
> 标签：sql, sql-server

在 SQL Server 中，我正在编写一个触发器，该触发器在其实现内部改变一个标志，如下所示

```
 SET ANSI_NULLS OFF 
```

这种变化的范围是什么？触发器、事务、连接、X？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:08:53.290

您可能想看看[SET ANSI_WARNINGS OFF 的范围](https://stackoverflow.com/questions/6989051/scope-of-set-ansi-warnings-off)。

另外，请注意规范声明该语法将被弃用[http://msdn.microsoft.com/en-us/library/ms188048.aspx](http://msdn.microsoft.com/en-us/library/ms188048.aspx)：

`In a future version of SQL Server, ANSI_NULLS will always be ON and any applications that explicitly set the option to OFF will generate an error. Avoid using this feature in new development work, and plan to modify applications that currently use this feature.`

# jquery - How do I access a model object in a view using jquery?

> ID：15471341
> 
> 赞同：1
> 
> 时间：2013-03-18T07:04:42.913
> 
> 标签：jquery, asp.net-mvc, razor

I'm just new with asp.net mvc using razor syntax in the view and I would like to know how can I use a model object inside a jQuery routine to set an img src?

For ex:

```
 setSourceImage()
    {
       @foreach(var myPaths in Model)
       {
        @: jQuery('#sampleImage').attr('src',myPaths.imgPath)
       }
    } 
```

I know the syntax is wrong, but in a sense that is what I want to achieve.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:07:24.817

是的，语法错误。我建议您使用该`Json.Encode`方法安全地序列化您感兴趣的模型的属性：

```
<script type="text/javascript">
    function setSourceImage() {
        var imageSources = @Html.Raw(Json.Encode(Model.Select(x => x.imgPath)));
        for (var i = 0; i < imageSources.length; i++) {
            jQuery('#sampleImage').attr('src', imageSources[i])
        }
    }
</script> 
```

可能呈现为：

```
<script type="text/javascript">
    function setSourceImage() {
        var imageSources = ['/images/img1.jpg', '/images/img2.jpg'];
        for (var i = 0; i < imageSources.length; i++) {
            jQuery('#sampleImage').attr('src', imageSources[i])
        }
    }
</script> 
```

显然，要使这个工作正常，`imgPath`模型的属性应该包含服务器上图像的绝对或相对 url。它不应包含图像的物理位置，例如`c:\inetpub\wwwroot\myapp\images\img1.jpg`. 如果是这种情况，您必须在渲染视图之前在服务器上转换此属性。

# php - 如何获取 SQL 查询结果的 CGridView？

> ID：15471342
> 
> 赞同：0
> 
> 时间：2013-03-18T07:04:45.793
> 
> 标签：php, mysql, yii, cgridview

我尝试以下查询，它产生一个数组，

```
$user = Yii::app()->reg->createCommand()
->select('studentID')
->from('Students')
->queryAll(); 
```

但是，当我尝试在 CGridview 中获取查询的值时，我得到了错误，

```
Property "CDbCommand.0" is not defined. 
```

这是gridview的代码，

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'students-grid',
'dataProvider'=> new CSqlDataProvider($user),
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:59:39.613

已编辑：在您的 $model 中定义数据：

```
public function newsearch(){
$query = "Your Query";
$count=Yii::app()->db->createCommand($query)->queryScalar();
$dataProvider = new CSqlDataProvider($query, array(
         'totalItemCount'=>$count));
} 
```

在您的控制器操作中：

```
$model = new model or assigned model;
 //Your Logic //
$this->render('viewname',array('model'=>$model)); 
```

并在您的视图文件中调用此函数：

```
'dataProvider'=> $model->newsearch(), 
```

请记住，您的 dataprovider 属性仅取决于您的查询。使用别名并在 gridview 列中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:52:27.080

看一下[`CSqlDataProvider`constructor](http://www.yiiframework.com/doc/api/1.1/CSqlDataProvider#__construct-detail)，第一个参数应该是一个包含 SQL 查询的字符串，或者 a `CdbCommand`，但 $user 是一个`array`。

你应该试试 ：

```
$command = Yii::app()->reg->createCommand()
  ->select('studentID')
  ->from('Students'); 
```

和 ：

```
'dataProvider'=> new CSqlDataProvider($command) 
```

PS：你试过用[`CActiveDataProvider`](http://www.yiiframework.com/doc/api/1.1/CActiveDataProvider)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T03:36:04.367

这是代码，

```
<?php 
$query = "SELECT student_name FROM  smartrea_srkreg.Students";
$count=Yii::app()->reg->createCommand($query)->queryAll();
$dataProvider = new CSqlDataProvider($query, array(
'totalItemCount'=>$count,
'pagination'=>array(
'pageSize'=>30,
 ),
));
var_dump($dataProvider);
?>

<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'students-grid',
'dataProvider'=> $dataProvider, 
)); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:03:54.203

这是控制器的内容。将此数据提供者传递给模板

```
$dataProvider = new CActiveDataProvider('Students',
             array(
            'criteria'=>array(                        
            'select'=>'t.studentID'
        ))); 
```

在模板文件中粘贴以下代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
   'id'=>'subject-grid',
   'dataProvider'=>$model,
   'columns'=>array(
       'studetID',
        array(
           'class'=>'CButtonColumn',
        ),
   ),
)); 
```

愿这对你有帮助:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-22T02:53:53.640

使用 'keyfield' 避免错误，未定义索引 'id' 和 keyfield = 所选列的名称

```
$dataProvider = new CSqlDataProvider($query, array(
'totalItemCount'=>(int) $count1,
'keyField' => 'studentID',
'pagination'=>array( 'pageSize'=>30, ),)); 
```

# php - LinkedIn API - Refresh Access Token after 60 days - PHP

> ID：15471345
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:04:58.983
> 
> 标签：php, linkedin

I need to refresh token after 60 days in linkedin PHP API

Can you tell me how to send API request .I also tried this link

[https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token](https://developer.linkedin.com/blog/tips-and-tricks-refreshing-access-token)..

Please give some idea to refresh the access token of Linkedin API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T15:58:19.630

**仅当用户使用同一浏览器登录 Linked In 时，LinkedIn 才会处理自动代码刷新。**

所以，这里是工作流的样子：

a) 我已登录 LinkedIn：

1.  我有一个链接

    href="https://www.linkedin.com/uas/oauth2/authorization?response_type=code&redirect_uri=my_redirect_uri"

2.  每次我被重定向到 my_redirect_uri 时，我都会得到一个 GET 参数“代码”，它允许我请求新的访问令牌抛出

    “ [https://www.linkedin.com/uas/oauth2/accessToken](https://www.linkedin.com/uas/oauth2/accessToken) ”

b) 我没有在此浏览器上登录 LinkedIn：

每次点击链接都需要重新验证...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T16:29:39.667

首先通过您为他们创建的完全相同的过程发送用户以验证帐户。

如果用户已经登录到经过身份验证的 LinkedIn 帐户，那么 LinkedIn 会将用户直接发送到您定义的回调 URL，以及一个全新的 60 天访问令牌。

不幸的是，LinkedIn 没有实现标准中定义的 oAuth grant_type=refresh 令牌。

# java - 调整上传图像的大小以便更好地查看

> ID：15471349
> 
> 赞同：3
> 
> 时间：2013-03-18T07:05:14.943
> 
> 标签：java, grails-plugin, grails-2.0

我有一张个人资料图片，我将其存储在数据库中的字节 [] 字段中。

我想要做的是在运行时创建图像缩略图。因为我必须在网页的不同位置显示不同大小的图像。像 facebook，在评论部分和其他区域显示图像。

我可以使用的任何 grails 插件，我有 google imageTool、imageMagick grails 插件。任何人都可以推荐该插件以使用任何其他方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:36:32.533

是的`grails`，您可以使用一个插件。

看到这个[ImageTools 插件](http://grails.org/plugin/image-tools)

安装插件后，您可以使用以下语句生成所需大小的缩略图

或者如果它是一个瘦应用程序并且您不想要外部依赖项..您可以使用以下代码[源](http://grails.1312388.n4.nabble.com/Image-thumbnail-td1345316.html)

```
import java.awt.Image as AWTImage 
import java.awt.image.BufferedImage 
import javax.swing.ImageIcon 
import javax.imageio.ImageIO as IIO 
import java.awt.Graphics2D 

  static resize = { bytes, out, maxW, maxH -> 
      AWTImage ai = new ImageIcon( bytes ).image 
      int width = ai.getWidth( null ) 
      int height = ai.getHeight( null ) 

      def limits = 300..2000 
      assert limits.contains( width ) && limits.contains( height ) : 'Picture is either too small or too big!'   

      float aspectRatio = width / height 
      float requiredAspectRatio = maxW / maxH 

      int dstW = 0 
      int dstH = 0 
      if( requiredAspectRatio < aspectRatio ){ 
        dstW = maxW 
        dstH = Math.round(  maxW / aspectRatio ) 
      }else{ 
        dstH = maxH 
        dstW = Math.round( maxH * aspectRatio ) 
      } 

      BufferedImage bi = new BufferedImage( dstW, dstH, BufferedImage.TYPE_INT_RGB ) 
      Graphics2D g2d = bi.createGraphics() 
      g2d.drawImage( ai, 0, 0, dstW, dstH, null, null ) 

      IIO.write( bi, 'JPEG', out ) 

  } 
```

# c++ - Simple program Reference error

> ID：15471351
> 
> 赞同：0
> 
> 时间：2013-03-18T07:05:16.763
> 
> 标签：c++

Hello I'm just starting to comprehend using classes in C++. Can't seem to get this simple program to work.

I get the **error**:

```
main.obj : error LNK2019: unresolved external symbol "public: int __thiscall functions::add(int,int)" (?add@functions@@QAEHHH@Z) referenced in function _wmain
1>c:\users\brr\documents\visual studio 2012\Projects\ConsoleApplication4\Debug\ConsoleApplication4.exe : fatal error LNK1120: 1 unresolved externals 
```

My code is as follows:

**main.cpp:**

```
// ConsoleApplication4.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "functions.h"
#include <iostream>

int _tmain(int argc, _TCHAR* argv[])
{
    bool running = true;

    while(running)
    {
        functions func;
        int var1, var2;
        int option = 0;
        switch (option)
        {
        case(1):
            std::cin >> var1 >> var2;
            func.add(var1,var2);

        }

    }
    return 0;
} 
```

**functions.cpp:**

```
#include "functions.h"
#include <iostream>

functions::functions(void)
{
}

functions::~functions(void)
{
}

int add(int var1,int var2){
    int r;
    r = var1 + var2;
    return r;

} 
```

**functions.h:**

```
#pragma once
class functions
{
public:
    functions(void);
    ~functions(void);
    int add(int var1,int var2);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:06:54.437

```
int functions::add(int var1,int var2){
    int r;
    r = var1 + var2;
    return r;

} 
```

您的实现`functions.cpp`应该如上所示。在您当前的实现`add`中是一个全局函数。

所以你`functions.cpp`必须看起来像：

```
#include "functions.h"
#include <iostream>

functions::functions(void)
{
}

functions::~functions(void)
{
}

int functions::add(int var1,int var2){
    int r;
    r = var1 + var2;
    return r;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:11:22.467

因为，你`add`是一个全球性的声明。您可以在 main.cpp:: 中使用它

```
int Result ;
switch (option)
    {
    case(1):
        std::cin >> var1 >> var2;
        Result = add(var1,var2);
    } 
```

否则@Aniket 为您提供了解决方案。

# android - Android上传Image等信息到httpServer

> ID：15471354
> 
> 赞同：0
> 
> 时间：2013-03-18T07:05:20.000
> 
> 标签：android

我想将位图图像和其他信息（如用户 ID 和用户名）传递给 php 服务器。这是我的 php 服务器端 api...

```
 $user_id=$app->request()->post('user_id'); 
     $username=$app->request()->post('username'); 

     $target_path="./images/";
     $s_char = array ("'");
     $target_path = $target_path . basename($_FILES['uploadedfile']['name']);
     //Get the uploaded file information
    $name_of_uploaded_file = basename($_FILES['uploadedfile']['name']);   
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) 
    {
   echo "image uploaded====>".$name_of_uploaded_file;
   $photo_url='http://192.168.1.239/taxibuddy/api/images'.$name_of_uploaded_file;
   $photo_url=str_replace($s_char,"`",$photo_url); 
   } 
```

我尝试使用东西链接 [http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/) 但这是要求指定文件名路径，我想要将位图作为参数传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:18:57.083

为什么不能将位图转换为字节数组并将其传递给服务器。这是向服务器发送位图的代码。

```
try {
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
// Preview_bitmap is the one you need to send to the server. I'm compressing here and sending this to server:

        preview_bitmap.compress(CompressFormat.JPEG, 100, bos);
        byte[] data = bos.toByteArray();

        HttpClient httpClient = new DefaultHttpClient();

// constant.uploadImagesAPI is the your server URL :

        HttpPost postRequest = new HttpPost(Constant.uploadImagesAPI
                + Constant.mDeviceID);

        ByteArrayBody bab = new ByteArrayBody(data, ".jpg");
        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("image", bab);
        postRequest.setEntity(reqEntity);
        HttpResponse response = httpClient.execute(postRequest);
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent(), "UTF-8"));
        String sResponse;
        StringBuilder mUploadResponse = new StringBuilder();

        while ((sResponse = reader.readLine()) != null) {
            mUploadResponse = mUploadResponse.append(sResponse);
        }

        JSONObject mUploadResponseObject = new JSONObject(
                mUploadResponse.toString());

        mUploadResponseObject.getJSONArray("response");

        try {
            JSONArray jsonArray = mUploadResponseObject
                    .getJSONArray("response");
            for (int i = 0; i < jsonArray.length(); i++) {
                uploadStatus = jsonArray.getJSONObject(i)
                        .getJSONObject("send").getString("message");
                uploadPhotoID = jsonArray.getJSONObject(i)
                        .getJSONObject("send").getString("id");
                Constant.imageUploadedFlag = true;
            }
        } catch (Exception e) {
            serverUploadException = true;

        }

    } catch (Exception e) {

    }

// PHP code :

       $to = $_REQUEST['deviceid'];
                //$timestamp = $_REQUEST['timestamp'];
                $path=PATH.'upload/';
                //$path1=PATH.'newupload/';
                //$name = $_FILES['image']['name'];
                //$str=explode(".",$name);
                //$imname=$str[0];
                $filename=upload::save($_FILES['image']);                   
                $file_name1= basename($filename);
                $docroot= $_SERVER['DOCUMENT_ROOT'];    
                //$root=$docroot.'/newupload/';
                $roots=$docroot.'/upload/';
                $url = $path.$file_name1;   
                            $send = $this->api->upload_images($to,$url);
                        if($send)
                                    {

                                             $json_response[] = array("send" => 
                                                   array("id"=> $send,
                                                "message"=>"Message Sent Successfully",
                                                 "status"=>1));
                                                                 }  
                                                                  echo json_encode(array ('response'  =>$json_response));

            break; 
```

试试这个。

# file-io - VBA 线路输入与输入

> ID：15471361
> 
> 赞同：6
> 
> 时间：2013-03-18T07:05:39.543
> 
> 标签：file-io, excel, input, vba

我想读取由 c 编写的文件，其中每行由 /n 分隔。我想读取该文件并将其与 Excel 上的数据进行比较。我用过`input #1, data`。但我想用“，”（逗号）读一行，所以我用了`Line Input #1, data`.

当我用excel上的数据检查“数据”时，虽然它们是一样的，但它说的是假的。

```
Activecell="KVK"
Line Input #1,data
msgbox ActiveCell=data 
```

即使数据是 KVK，也会打印错误。

感谢和问候提前帮助，Vamshi krishna

```
Dim fpath, fnum, s
fpath = Application.GetOpenFilename
fnum = FreeFile
Open fpath For Input As fnum
Range("A1").Activate

Do While Not EOF(fnum)
Line Input #fnum, s
'Input #fnum, s

MsgBox s & " = " & ActiveCell & "  "
MsgBox s = ActiveCell
ActiveCell.Offset(1, 0).Select
Loop 
```

.txt 有

```
12
13
14 
```

第一列的数据

```
12
13
14 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:42:42.727

试试下面的代码：

```
Sub InputImage()

    Dim FileNum As Integer, i As Integer
    Dim fpath As String, s As String, cellVal As String

    fpath = Application.GetOpenFilename

    FileNum = FreeFile()
    Open fpath For Input As #FileNum

    i = 1
    While Not EOF(FileNum)
        Line Input #FileNum, s    ' read in data 1 line at a time

        cellVal = CStr(Cells(i, 1).Value)

        MsgBox s & " = " & cellVal & "  "
        MsgBox s = cellVal
        ActiveCell.Offset(1, 0).Select

        i = i + 1
    Wend

End Sub 
```

如果您在监视窗口中检查 cell(i,1).Value 的数据类型，则显示 Variant/Double。所以需要转换成字符串。

![在此处输入图像描述](../Images/0397e0ac87b655e30fafd5241ae682ca.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:35:52.023

或者使用Scripting库中的TextStream，效果会好很多。

并且请在完成后关闭文件，您一定是那种在完成后不将牛奶放回冰箱并为所有人破坏它的人。

# java - 用arraylist映射值

> ID：15471363
> 
> 赞同：-2
> 
> 时间：2013-03-18T07:05:47.750
> 
> 标签：java, arraylist, hashmap

```
if (rs != null) {

    while (rs.next()) {
        rb = new ResponseBean();

        rb.setQuestionOrderNo(rs.getInt(1));

        rb.setResponseLabel(rs.getString(2));

        rb.setTaskName(rs.getString(3));

        rb.setResponder(rs.getString(4));

        rb.setSequenceId(rs.getInt(5));

        checkBoxResponses.add(rb);
    }
} 
```

输出为：rs1=10

```
rs2=Sam

rs3=Manyu

rs4=manyu

rs5=13621

rs1=10

rs2=Sam
--------------------------
rs3=Manyu

rs4=manyu

rs5=13623
------------------------------------
rs1=10

rs2=Sam US
--------------------------------
rs3=Manyu

rs4=manyu

rs5=13623
-------------------------------------------
rs1=10

rs2=Sam India

rs3=Manyu

rs4=manyu

rs5=13624 
```

我想将 r5=13623 的值映射到 r2=Sam, Sam US 的值。请建议我如何进行此操作以输出为

```
<13621,Sam>

<13623,(Sam, Sam US)>

<13624, Sam India> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:10:44.457

您可以使用地图来执行此操作：-

```
HashMap<Integer, List<String>> myMap = new HashMap<Integer, List<String>>(); //Create the Map 
```

# android - 如何在 Tab 中显示 ListView？

> ID：15471370
> 
> 赞同：2
> 
> 时间：2013-03-18T07:06:11.927
> 
> 标签：android, android-layout, android-fragments, android-actionbar, android-tabs

我想在 Tab 中显示 ListView（选择此选项卡后我希望 ListView 出现），所以我创建了 Fragment 类并将 ListView 代码放入其中。现在的主要问题是将片段对象传递给 tabListener。请在此处发布示例，或者更好地展示如何在我的代码中执行此操作。无论如何，任何帮助将不胜感激。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); 

        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabOne = actionBar.newTab().setText("One");
        ActionBar.Tab tabTwo = actionBar.newTab().setText("Two");

        tabOne.setTabListener(new tabListener());
        tabTwo.setTabListener(new tabListener());

        actionBar.addTab(tabOne);
        actionBar.addTab(tabTwo);   
        } 

    protected class tabListener implements ActionBar.TabListener {

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }
    };

    public class FirstFragment extends ListFragment {
        private ArrayList<Cinemas> cinema;
        private CinemasAdapter cinemaAdapter;
        private ListView list;

          @Override
          public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            cinema = new Handler().handle(); 
            cinemaAdapter = new CinemasAdapter(MainActivity.this, R.layout.movie_data_row, cinema);
            setListAdapter(cinemaAdapter);
          }

          @Override
          public void onListItemClick(ListView l, View v, int position, long id) {
              Cinemas movie = cinemaAdapter.getItem(position);
                Intent intent = new Intent (MainActivity.this, More.class);
                intent.putExtra("Cinemas", movie);
                intent.putExtra("data", movie.getBitmap());

                Bundle translateBundle =
                      ActivityOptions.makeCustomAnimation(MainActivity.this,
                      R.anim.slide_in_left, R.anim.slide_out_left).toBundle();
              startActivity (intent, translateBundle);
          }
        } 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:22:45.967

通常，在创建带有选项卡的活动时，很容易为选项卡内容创建一个单独的活动。
但是，当这些活动需要相互交互时，事情就会变得棘手。

所以解决方案是创建一个以视图（而不是活动）作为选项卡内容的选项卡活动。要创建 TAB，我们需要遵循几个步骤：

1.  创建 tabHost 并设置其参数
2.  创建 tabWidget，可点击标签的容器
3.  创建一个框架布局，以保存与每个选项卡关联的视图
4.  使用 tabSpec 类创建每个选项卡

看看这些链接，会帮助你

[http://joshclemm.com/blog/?p=59](http://joshclemm.com/blog/?p=59)

和

[http://www.edumobile.org/android/android-beginner-tutorials/tab-control/](http://www.edumobile.org/android/android-beginner-tutorials/tab-control/)

和

[http://www.pocketmagic.net/?p=1132](http://www.pocketmagic.net/?p=1132)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:21:15.720

如果您想打开 tabTwo 内的列表，您需要创建`FirstFragment`该类的一个实例，并在您选择选项卡时将其添加到您的视图中。

在内部`onTabSelected`，创建一个`FirstFragment`if 它不为 null 的新实例，并将其添加到您的 activity_main 文件中容器内的视图中。容器是视图内的线性布局，具有片段应占用的给定空间。在全屏片段的情况下，容器是根布局。您只需要为此布局指定一个 id。创建新片段后，通过调用附加它`transaction.attach();`最终代码块应类似于以下内容：

```
/** this example assumes that the fragment
 * FirstFragment will be attached to tab 1
 * which is at position = 0, and SecondFragment
 * will be attached to tab 2, which is at 
 * position = 1\. Also, the root layout of 
 * activity_main.xml has the id attribute of
 * fragment_container
 */

FirstFragment firstFragment;
SecondFragment secondFragment;

@Override
public void onTabSelected(Tab tab, FragmentTransaction transaction) {
    switch (tab.getPosition()) {
    case 0:
        if (firstFragment == null) {
            firstFragment = new FirstFragment();
            transaction.add(R.id.fragment_container,
                    firstFragment, "FIRST");

        } else {
            transaction.attach(firstFragment);
        }
        break;
    case 1:
        if (secondFragment == null) {
            secondFragment = new SecondFragment();
            transaction.add(R.id.fragment_container, secondFragment, "SECOND");
        } else {
            transaction.attach(secondFragment);
        }
        break;
    }
} 
```

# python - 使用 scikit-learn 集成方法

> ID：15471372
> 
> 赞同：1
> 
> 时间：2013-03-18T07:06:12.597
> 
> 标签：python, machine-learning, scikit-learn

有没有办法在sklearn中将不同的分类器组合成一个？我找到`sklearn.ensamble`包裹。它包含不同的模型，如 AdaBoost 和 RandofForest，但它们在底层使用决策树，我想使用不同的方法，如 SVM 和逻辑回归。sklearn可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:00:51.690

您只想进行多数投票吗？这没有实现afaik。但正如我所说，您可以平均 predict_proba 分数。或者您可以使用预测的 LabelBinarizer 并对它们进行平均。这将实施投票计划。

即使您对概率不感兴趣，平均预测概率也可能比进行简单投票更稳健。但是，如果不尝试，这很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-01T18:11:22.323

是的，您可以`train`在同一个数据集上使用不同的模型并让每个模型进行预测

```
# Import functions to compute accuracy and split data
from sklearn.metrics import accuracy_score
from sklearn.model_selection import train_test_split

# Import models, including VotingClassifier meta-model
from sklearn.linear_model import LogisticRegression
from sklearn.tree import DecisionTreeClassifier
from sklearn.neighbors import KNeighborsClassifier as KNN
from sklearn.ensemble import VotingClassifier

# Set seed for reproducibility
SEED = 1 
```

现在实例化这些模型

```
# Instantiate lr
lr = LogisticRegression(random_state = SEED)

# Instantiate knn
knn = KNN(n_neighbors = 27)

# Instantiate dt
dt = DecisionTreeClassifier(min_samples_leaf = 0.13, random_state = SEED) 
```

然后将它们定义为一个`list`分类器并将这些不同的分类器组合成一个**Meta-Model**。

```
classifiers = [('Logistic Regression', lr), 
               ('K Nearest Neighbours', knn), 
               ('Classification Tree', dt)] 
```

`for`现在使用循环遍历这个预定义的分类器列表

```
for clf_name, clf in classifiers:    

    # Fit clf to the training set
    clf.fit(X_train, y_train)    

    # Predict y_pred
    y_pred = clf.predict(X_test)

    # Calculate accuracy
    accuracy = accuracy_score(y_pred, y_test) 

    # Evaluate clf's accuracy on the test set
    print('{:s} : {:.3f}'.format(clf_name, accuracy)) 
```

最后，我们将评估投票分类器的性能，该分类器采用列表分类器中定义的模型的输出并通过多数投票分配标签。

```
# Voting Classifier
# Instantiate a VotingClassifier vc
vc = VotingClassifier(estimators = classifiers)     

# Fit vc to the training set
vc.fit(X_train, y_train)   

# Evaluate the test set predictions
y_pred = vc.predict(X_test)

# Calculate accuracy score
accuracy = accuracy_score(y_pred, y_test)
print('Voting Classifier: {:.3f}'.format(accuracy)) 
```

# ruby-on-rails - Rails database_cleaner 擦除整个数据库

> ID：15471375
> 
> 赞同：0
> 
> 时间：2013-03-18T07:06:18.513
> 
> 标签：ruby-on-rails, ruby, database-cleaner

我正在尝试使用[database_cleaner](https://github.com/bmabey/database_cleaner) gem 来清理我的规格。我的 spec_helper.rb 中有以下简单配置：

```
require 'database_cleaner'

RSpec.configure do |config|
  config.use_transactional_fixtures = false

  config.before :suite do
    DatabaseCleaner.strategy = :truncation
  end

  config.before :each do
    DatabaseCleaner.start
  end

  config.after :each do
    DatabaseCleaner.clean
  end
end 
```

虽然运行规范，但我注意到在执行 DatabaseCleaner.clean 后我的数据库被完全清除了。我确定这只是为了清理测试的影响......有什么可能导致这种行为的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:09:24.700

这是因为您将策略设置为`:truncation`，这确实清楚了整个事情。

如果您想将其限制为仅在测试中完成的操作，则将策略更改为`:transaction`

从广义上讲，截断非常简单，在 TEST 数据库中应该不是问题。

# php - 在不知道其格式的情况下验证日期

> ID：15471376
> 
> 赞同：2
> 
> 时间：2013-03-18T07:06:22.863
> 
> 标签：php, validation, date, datetime, language-agnostic

我正在为验证库进行日期验证。日期格式和包含要验证的日期的变量将提供给库。

```
$validator->validate( $_POST['date'], 'm/d/y' ); 
```

进行基本验证非常容易`DateTime::createFromFormat()`

```
if ( DateTime::createFromFormat( $format, $date ) !== false ) {
    // "valid" date
} 
```

我的问题是，使用这种方法无效的日期，例如 23/23/23 过去，因为`DateTime`班级将更改日期并将其设置为 2024-11-23。我知道存在`checkdate()`但不知道格式我看不到提取原始月/日/年的方法。

关于如何验证这样的日期的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:48:54.867

由于您不知道日期的格式，因此您应该使用`date_parse`

> [date_parse](http://php.net/manual/en/function.date-parse.php) — 返回具有给定日期详细信息的关联数组

**例子**

```
print_r(date_parse("23/23/23 00:14:38")); 
```

输出

```
Array
(
    [year] => 2023
    [month] => 3            <------------------- Attempts to correct month 
    [day] => 23
    [hour] => 0
    [minute] => 14
    [second] => 38
    [fraction] => 0
    [warning_count] => 0
    [warnings] => Array
        (
        )

    [error_count] => 1
    [errors] => Array
        (
            [0] => Unexpected character        <----- add errors found 
        )

    [is_localtime] => 
) 
```

简单类

```
$date = "23/3/2013 00:14:38";
if (DateTimeParse::createFromString($date) !== false) {
    // "valid" date
} 
```

使用的类

```
class DateTimeParse {

    public static function createFromString($string) {
        $date = date_parse(str_replace("/", "-", $string));
        if ($date['error_count'] > 0)
            return false;
        $date = sprintf("%d-%d-%d %d:%d:%d", $date['year'], $date['month'], $date['day'], $date['hour'], $date['minute'], $date['second']);
        return \DateTime::createFromFormat("Y-m-d g:i:s", $date);
    }
} 
```

# stanford-nlp - 如何将树的 XML 解析为字符串？

> ID：15471379
> 
> 赞同：1
> 
> 时间：2013-03-18T07:06:45.377
> 
> 标签：stanford-nlp

```
Tree tree = sentence.get(TreeAnnotation.class); 
```

我想将解析树的 XML 表示形式转换为字符串。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:06:45.377

字符串 s 包含解析树的 XML 输出"

```
import java.io.StringWriter;
import java.io.PrintWriter;

StringWriter stringWriter = new StringWriter();
PrintWriter writer = new PrintWriter(stringWriter);
tree.indentedXMLPrint( writer, false);
String s = stringWriter.toString() 
```

# css - CSS中的波浪号（~）是什么意思

> ID：15471382
> 
> 赞同：52
> 
> 时间：2013-03-18T07:06:51.323
> 
> 标签：css, tilde

我想知道 (~) 在 css 中是什么意思。

```
#img1:hover ~ #img2 {
    opacity: 0;
} 
```

在 Visual Studio 中，使用此符号时出现“意外字符序列”错误。这在 CSS 中的实际含义是什么。它有什么作用？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-18T07:08:49.140

[http://www.w3.org/TR/selectors/](http://www.w3.org/TR/selectors/)

> **8.3.2\. 一般兄弟组合子**
> 
> 通用兄弟组合符由分隔两个简单选择器序列的“波浪号”（U+007E，~）字符组成。两个序列表示的元素在文档树中共享相同的父元素，并且第一个序列表示的元素在（不一定立即）第二个序列表示的元素之前。

**例子**

```
h1 ~ pre 
```

匹配`<pre>`这里：

```
<h1>Definition of the function a</h1>
<p>Function a(x) has to be applied to all figures in the table.</p>
<pre>function a(x) = 12x/13.5</pre> 
```

还有一个选择器，用于相邻的`+`兄弟组合器：标签必须紧随其后`h1 + pre``<pre>``<h1>`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-18T07:13:55.160

如果它们出现在匹配第一个选择器的元素之后，它会将样式应用于匹配第二个选择器的所有元素。例如，给定一个 HTML 片段和 CSS 规则：

```
hr ~ p {
    font-weight: bold;
}
```

```
<p>Line one</p>
<hr />
<p>Line two</p>
<p>Line three</p>
```

只有`<p>Line two</p>`并且`<p>Line three</p>`会显示为粗体。在您的示例中，我认为 Visual Studio 在解释修饰符时遇到问题`:hover`，因为它并不是真正的元素。如果将其从规则中删除，它可能会正常工作。

# php - 在php中编辑时如何在文件字段中显示数据库中的当前图像名称？

> ID：15471389
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:07:14.120
> 
> 标签：php, filefield

我在网页中使用文件字段，我的问题是当我在网页中单击编辑选项时，我想在文件字段中显示数据库中的当前图像名称，现在我无法显示图像名称，因此单击编辑文件字段时变为空白，更新数据库后也变为空白。所以每次我必须在更新之前选择图像。

如何解决这个问题请帮助我是否可以为文件字段设置值？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:09:45.030

“我想在文件字段中显示当前图像名称” => 你不能那样做。

**最好的选择是**：

在编辑文件字段的数据检查时，

如果文件字段为空（用户不想更改图像），请不要更新数据库中的图像字段，让它保持以前的状态，因此不会为空。

```
if(!empty($_FILES["your_file_field_name"]["name"])){
    // update database field for image
    // Update other fields
}else{
    // Update other fields
} 
```

**为了使其用户友好**：只需在表单中提交的文件附近显示当前图像，以便用户知道当前图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:11:56.557

问题可能有不同的解决方案..

尝试为文件字段添加 if-else 块，当文件字段为空时，您不应更新数据库中的文件字段，反之亦然

```
if(!empty($_FILES["img"]["name"])){
// write to dB
}else{
// not
} 
```

# iphone - ios地图问题-ios地图上显示多行

> ID：15471391
> 
> 赞同：2
> 
> 时间：2013-03-18T07:07:18.620
> 
> 标签：iphone, objective-c, ios4, ios6

我在ios地图上工作。在这里，当我使用覆盖层在 ios 地图上绘制一条线时，它显示了多条线。现在我只想画一条直线。我怎样才能做到这一点。下面我附上了带有屏幕截图的代码。

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    if ([touches count]>1)
    {
        [super touchesBegan:touches withEvent:event];
        return;
    }
    UITouch *touch = [touches anyObject];
    tappedPoint1 = [touch locationInView:_mapView];
//    _startCoord = [_mapView convertPoint:tappedPoint1 toCoordinateFromView:_mapView];
    coord1= [_mapView convertPoint:tappedPoint1 toCoordinateFromView:_mapView];
    polyline = nil;
}

   - (void)updatePolylineWithCoordinate:(CLLocationCoordinate2D)coord6
{
    if (!_polyline)
    {
        MKMapPoint points[2];
        points[0] = MKMapPointForCoordinate(coord1);
        points[1] = MKMapPointForCoordinate(coord6); 
        line2 = [MKPolyline polylineWithPoints:points count:2];
    }
    else
    {
        NSUInteger count = _polyline.pointCount + 1;
        // create new point array and add new coord
        CLLocationCoordinate2D coords[count];
        [_polyline getCoordinates:coords range:NSMakeRange(0, count-1)];
        coords[count - 1] = coord6;
        [_mapView removeOverlay:_polyline];
        line2 = [MKPolyline polylineWithCoordinates:coords count:count];
    }
    line2.title = @"line";
    [_mapView addOverlay: line2];

//    _polyline = line2;
}

        - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
        {
            UITouch *touch = [touches anyObject];
        CGPoint currentPoint = [touch locationInView:_mapView];
        CLLocationCoordinate2D coord5= [_mapView convertPoint:currentPoint toCoordinateFromView:_mapView];
        NSLog(@"_startCoord.latitude : %f", coord5.latitude);
        NSLog(@"_startCoord.lontitude : %f", coord5.longitude);
        [self updatePolylineWithCoordinate:coord5];
        }

        - (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
        {
            if ([overlay isKindOfClass:[MKPolyline class]]) 
            {
                lineview=[[[MKPolylineView alloc] initWithOverlay:overlay] autorelease];
                lineview.strokeColor=[[UIColor blueColor] colorWithAlphaComponent:0.5];
                lineview.fillColor = [[UIColor redColor]colorWithAlphaComponent:0.5];
                lineview.lineWidth=2.0;
                return [lineview autorelease];
            }

            return nil;
        }
   - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
  {
    [_mapView removeOverlay:line2];

    MKMapPoint points[2];
    points[0] = MKMapPointForCoordinate(coord1);
    points[1] = MKMapPointForCoordinate(coord5);
    line2 = [MKPolyline polylineWithPoints:points count:2];
    [_mapView addOverlay: line2];
  } 
```

现在，当我使用触摸移动绘制一条线时，它会在地图上的任何地方绘制取决于 ios 地图。但我需要当用户移动他的手指时，只会显示一条直线。我该怎么做：请看这个屏幕截图。![在此处输入图像描述](../Images/745ef62f616be152c538ede9a9048b24.png)

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:24:07.663

试试这个：

```
- (void)updatePolylineWithCoordinate:(CLLocationCoordinate2D)coord
{
    MKPolyline* line;
    if (!_polyline) {
        MKMapPoint points[2];
        points[0] = MKMapPointForCoordinate(_startCoord);
        points[1] = MKMapPointForCoordinate(coord);        
        line = [MKPolyline polylineWithPoints:points count:2];
    } else {
        NSUInteger count = _polyline.pointCount + 1;
        // create new point array and add new coord
        CLLocationCoordinate2D coords[count];
        [_polyline getCoordinates:coords range:NSMakeRange(0, count-1)];
        coords[count - 1] = coord;
        [_mapView removeOverlay:_polyline];
        line = [MKPolyline polylineWithCoordinates:coords count:count];
    }
    line.title = @"line";
    [_mapView addOverlay: line];
    _polyline = line;

}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if ([touches count]>1) {
        [super touchesBegan:touches withEvent:event];
        return;
    }
    UITouch *touch = [touches anyObject];
    CGPoint tappedPoint1 = [touch locationInView:_mapView];
    _startCoord = [_mapView convertPoint:tappedPoint1 toCoordinateFromView:_mapView];

    DDAnnotation *annotation = [[[DDAnnotation alloc] initWithCoordinate:theCoordinate addressDictionary:nil] autorelease];
    annotation.subtitle = [NSString stringWithFormat:@"%f,%f", annotation.coordinate.latitude, annotation.coordinate.longitude];
    [_mapView addAnnotation:annotation];

    _polyline = nil;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:_mapView];
    CLLocationCoordinate2D coord= [_mapView convertPoint:currentPoint toCoordinateFromView:_mapView];
    [self updatePolylineWithCoordinate:coord];
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
    if ([overlay isKindOfClass:[MKPolyline class]])
    {
        MKPolylineView* lineview= [[MKPolylineView alloc] initWithOverlay:overlay];
        lineview.strokeColor=[[UIColor blueColor] colorWithAlphaComponent:0.5];
        lineview.fillColor = [[UIColor redColor]colorWithAlphaComponent:0.5];
        lineview.lineWidth=2.0;
        return [lineview autorelease];
    }
    return nil;
} 
```

您只需要添加 2 个实例变量：

*   CLLocationCoordinate2D _startCoord;
*   MKPolyline* _polyline;

# mysql - 为什么有端口号时需要套接字名称？

> ID：15471399
> 
> 赞同：0
> 
> 时间：2013-03-18T07:07:38.477
> 
> 标签：mysql, c, mysql-connector

我`c`用来交流`mysql`

它用于[`mysql_real_connect()`](http://dev.mysql.com/doc/refman/5.0/en/mysql-real-connect.html)连接到数据库引擎。

我只是想知道**“为什么这个函数需要套接字名称和端口号？”** . 我们能不能只使用端口号与`mysql`.

我用谷歌搜索但找不到任何答案。抱歉问了这么幼稚的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:12:12.353

如果您使用命名管道或域套接字，则套接字名称指定管道或套接字名称。否则，您可以只传递 0 作为名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:10:45.230

你没有，很明显。如您引用的文档中所述，您提供一个或另一个，具体取决于“主机”参数的值选择的协议。

# android - This sms (include áéíóú ñ) 可以一条信息发送吗？

> ID：15471403
> 
> 赞同：3
> 
> 时间：2013-03-18T07:07:51.010
> 
> 标签：android, sms

我有个问题。我的短信上下文如下，它可以发送一条消息吗？

> Este mensaje prueba la capacidad delequipo para enviar mensajes cortos de longitud 160 字。Se prueban los siguientes caracteres: 1234567890 áéíóú ñ¿?¡

这条消息是 160 个字符，我们知道 ,7-bit 160 ,8-bit 140 ,us-2 70 。“áéíóú ñ”不是7位而是8位，所以我认为它不能在一条消息中发送。

但是我的客户说它必须在一条消息中发送。

如果有人有这方面的经验，请帮我确认一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:19:21.083

短信不使用常规的 ascii 7 位字符集。维基百科有一个很好的解释（[http://en.wikipedia.org/wiki/GSM_03.38](http://en.wikipedia.org/wiki/GSM_03.38)）。简短的回答，如果您使用正确的国家语言转换表，您可能能够将其转换为所需的 160 个字符。

# ruby-on-rails - 当遇到 has_secure_password 提供的方法时，Rails 控制台中的“未定义的局部变量或方法”

> ID：15471404
> 
> 赞同：0
> 
> 时间：2013-03-18T07:07:54.370
> 
> 标签：ruby-on-rails, activerecord, rails-console

我的问题是当我尝试使用 rails 控制台更新我收到的用户电子邮件时`NoMethodError: undefined method 'update_attribute'`

在解决问题时，我尝试 `current_user = user.authrnticate(foobar)`并回来了`NameError: undefined local variable or method 'user' for main:Object`

这让我相信“rails c”没有正确使用或看到**user.rb**文件。

我尝试在执行 [rake db:test:prepare] 和 [rake db:migrate] 之前和之后重新启动 Rails 服务器。

**我的 [rails c] 将执行user.rb**中未定义的方法。

Rspec 运行没有问题。user_spec 中的所有测试都通过了。当我注释掉`has_secure_password`所有测试失败时。

```
require 'spec_helper'

describe User do

before do 
    @user = User.new(name: "Example User", email: "user@example.com",
                      password: "foobar", password_confirmation: "foobar")
end

subject { @user }

it { should respond_to(:name) }
it { should respond_to(:email) }
it { should respond_to(:password_digest) } 
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) }
it { should respond_to(:authenticate) }

it { should be_valid }

describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
end

describe "when email is not present" do
    before { @user.email = " " }
    it { should_not be_valid }
end

describe "when name is to long" do
    before { @user.name = "a" * 51 }
    it { should_not be_valid }
end

describe "when email format is invalid" do
    it "should be invalid" do
        addresses = %w[user@foo,com user_at_foo.org example.user@foo. 
                                        foo@bar_baz.com foo@bar+baz.com]
        addresses.each do |invalid_address|
            @user.email = invalid_address
            @user.should_not be_valid
        end
    end
end

describe "when email format is valid" do
    it "should be valid" do
        addresses = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp a+b@baz.cn]
        addresses.each do |valid_address|
            @user.email = valid_address
            @user.should be_valid
        end
    end
end

describe "when email address is already taken" do
    before do
        user_with_same_email = @user.dup
        user_with_same_email.email = @user.email.upcase
        user_with_same_email.save
    end

    it { should_not be_valid }
end

describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " " }
    it { should_not be_valid }
end

describe "when password doesn't match confirmation " do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
end

describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
end

describe "when password is too short" do
    before { @user.password = @user.password_confirmation = "a" * 5}
    it { should_not be_valid }
end

describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
        it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
        let(:user_for_invalid_password) { found_user.authenticate("invalid") }

        it { should_not == user_for_invalid_password }
        specify { user_for_invalid_password.should be_false }
    end
end
end 
```

我的 user.rb 是

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = user.email.downcase }

  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: {minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

[这是github上的整个项目](https://github.com/kpearson/kit_app)

我已经详尽地寻找了一个解决方案，包括对 ActiveRecord 文档的痛苦阅读，我被难住了。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:17:24.300

许多辅助方法无法在控制台中调用。

您通常可以通过 helper.helpername 调用它们来访问它们，但这并不总是有效

您如何从数据库中获取用户？

例如`user = User.find_by_name('name')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:50:06.710

这个错误：

```
NameError: undefined local variable or method 'user' for main:Object 
```

表示您没有实例化变量用户。

您是否将用户从数据库中提取到用户变量中？

您的 irb 会话应如下所示：

检查数据库中是否有用户：

```
> User.all 
```

如果您在名为“Jon”的数据库中有一个有效用户

```
> user = User.find_by_name("Jon")
> current_user = user.auhenticate("valid_password") #will work 
```

如果数据库中没有用户：

```
> User.create(name: "Jon", email: "user@example.com",
                  password: "foobar", password_confirmation: "foobar")
> user = User.find_by_name("Jon")
> current_user = user.auhenticate("valid_password") #will work 
```

RSpec 使用测试数据库，但 rails c 默认使用开发数据库，​​因此当您想在 rails c 中处理它时，请确保您的开发数据库中有记录。

rails c 命令正在加载您所有的项目库。

# jquery - 如何限制用户选择表单 ajax 自动完成建议

> ID：15471406
> 
> 赞同：4
> 
> 时间：2013-03-18T07:08:21.420
> 
> 标签：jquery, ajax, autocomplete

我正在使用以下代码进行 ajax 建议

```
<script type="text/javascript">
$(function(){
    setAutoComplete("searchField", "results", "<?php echo base_url(); ?>index.php/user/autofillvalue/<?php echo $this->uri->segment(3); ?>?part=");
}); 
```

在 html 中我的代码是

```
<div class="input text required" id="auto">
      <input id="searchField" type="text" name="searchField" class='inp-form' autocomplete="off">
</div> 
```

建议的代码是 json 编码的。我想限制最终用户只能选择表单建议值。怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:39:35.197

正如您显然知道的那样，[JQuery 文档页面](http://docs.jquery.com/Plugins/Autocomplete/autocomplete#url_or_dataoptions)详细介绍了一个名为`mustMatch`. 但正如[这篇文章](https://stackoverflow.com/questions/728596/jquery-google-type-suggest-with-restrict-to-list)中所解释的，它不可用。然而，拯救的是[这篇文章](https://stackoverflow.com/questions/2587378/how-to-implement-mustmatch-and-selectfirst-in-jquery-ui-autocomplete/7113981#7113981)。其中有几个关于如何解决问题的建议。这是该页面中的一个解决方案，由@Anonymous 和@Elliot 编写：

添加这个：

```
change: function (event, ui) {
    if (!ui.item) {
         $(this).val('');
     }
} 
```

和这个：

```
autoFocus: true 
```

# c# - C# 代码契约 - 避免检查空引用的参数

> ID：15471414
> 
> 赞同：9
> 
> 时间：2013-03-18T07:08:57.310
> 
> 标签：c#, c#-4.0, code-contracts

我今天阅读了有关 C# 4.0 代码合同的信息。似乎验证方法的参数不是 null 的常见做法如下：

```
Contract.Requires(p != null); 
```

但是，对我来说，我必须为代码中每个接口方法的每个参数都这样做似乎很不合理。在绝大多数情况下，参数不应为空。我希望会有某种机制允许定义某些特定参数“允许”为空（类似于 Java 中的“@Nullable”注释），并且合同框架将自动确保其余的不是无效的。

除了在这种“样板检查”（以及许多“合同类”上节省大量时间，因为很多时候除了非空参数之外根本没有任何条件需要验证）之外，它还将使合同代码更清晰并且更“面向逻辑”。

我的问题是，有没有办法做到这一点，如果没有，哪里没有，或者为什么我的方法在这里是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:15:58.293

我不同意，当您需要检查某些内容是否尚未初始化或未找到数据时，null 非常有用，有时您希望将 null 传递给方法并且它很好，代码合同很好对于服务于许多类的常用方法，以及 api 定义。如果您在分层架构中编写，您只需要保护层之间的交互，并且您在每一层内都是空安全的。

您的域得到了空值，并且没问题。

# java - 为什么“实现可运行”优于“扩展线程”？

> ID：15471432
> 
> 赞同：32
> 
> 时间：2013-03-18T07:10:06.967
> 
> 标签：java, multithreading, runnable

Java[线程](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)本身实现了一个 Java `Runnable`！根据互联网上的大多数专家的说法，[实现 Runnable 优于 extends Thread](https://stackoverflow.com/questions/541487/implements-runnable-vs-extends-thread)！即使我们不能在没有Thread 类的情况下使用线程意义上的[利用 Runnable ！](https://stackoverflow.com/questions/12020805/advantage-of-thread-over-runnable)
那么为什么我们更喜欢实现`Runnable`过度扩展，`Thread`因为在这两种情况下，实际线程都是通过调用`Thread`实现的方法（即`start()`或`run()`）来声明的，尽管如果`Thread`我们不是`Thread`通过仅仅覆盖`run()`方法来真正“扩展”功能呢？

如果我听起来令人困惑，我很抱歉..！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-18T07:15:01.847

最常见的区别是：

当你扩展 Thread 类时，你不能扩展你需要的任何其他类。（如您所知，Java 不允许继承多个类）。当您实现 Runnable 时，您可以为您的类节省空间，以便将来或现在扩展任何其他类。

然而，显着的区别是。

当您扩展 Thread 类时，您的每个线程都会创建唯一的对象并与之关联。当您实现 Runnable 时，它​​会将同一个对象共享给多个线程。

检查这个： http: [//manikandanmv.wordpress.com/tag/extends-thread-vs-implements-runnable/](http://manikandanmv.wordpress.com/tag/extends-thread-vs-implements-runnable/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T07:16:16.707

如果您的类正在*扩展 Thread 类*，那么它将成为一个继承属性*Thread 类*的单线程，所以它会很重。（在*扩展 Thread 类*时，每个线程都会创建唯一的对象并与之关联，但在*实现 Runnable*时，它​​会将同一个对象共享给多个线程）。

如果您的类正在*实现 Runnable 接口*，那么您只覆盖`run()`. 所以这个实例创建一个单独的`Thread`并且每个单独的线程单独运行，但不是作为程序中的单个重线程。还有一点，由于`Java`不支持*多重继承*，如果你*实现了 Runnable 就*可以避免多重扩展的问题，所以如果你实现了*Runnable 接口，你可以扩展除**Thread*类之外的任何你需要的类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T07:14:30.983

一个类可能只有一个超类，但可以实现任意数量的接口。通过扩展，`Thread`您放弃了对其他任何事物进行子类化的机会。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T07:15:18.720

Java 只允许单继承，这意味着如果你继承自`Thread`你将无法从任何其他类继承。实现`Runnable`接口没有这个限制，因为你的类可以实现任意数量的接口。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-03-18T07:23:02.260

你真的听起来很困惑。无论如何，我知道我们可以使用 Runnable 实现相同功能的原因之一，所以我们应该这样做，因为如果我们将实现 Runnable，那么我们可以扩展其他类，如果我们将扩展 Thread 类，这是不可能的

# ios - 使用 OCUnit 进行单元测试时的 NSBundle 返回（空）

> ID：15471434
> 
> 赞同：0
> 
> 时间：2013-03-18T07:10:11.903
> 
> 标签：ios, objective-c, nsbundle, ocunit

**问题：**在运行单元测试时从 NSBundle 中检索返回`(null)`，在运行时返回有效对象。

**我做了什么 ？**

我已经搜索了类似问题的 SO、苹果的开发人员和其他在线资源来解决这个问题，但没有运气。

我已经尝试过 SO questions 的解决方案；[OCUnit & NSBundle](https://stackoverflow.com/questions/3067015/ocunit-nsbundle)，[NSBundle pathForResource 返回 nil](https://stackoverflow.com/questions/9157480/nsbundle-pathforresource-returns-nil)。

我在网上浏览的所有解决方案都指出一件事**Bundle for run time 和测试是不同的。**

他们都建议拥有

```
[NSBundle bundleForClass: [self class]]; 
```

代替

```
[NSBundle mainBundle]; 
```

**问题：**我不明白上述修复是使用 setter 注入还是源文件本身。? 还有其他方法可以测试该方法`getIpAdress`吗？

**代码**

返回（null）的类，

```
// iRNetworkingObject.m

@implementation iRNetworkingObject

-(NSString*) getIpAdress {
     NSDictionary *infoDict = [[NSBundle bundleForClass:[self class]] infoDictionary];
     NSString *lookUpAdress = [infoDict objectForKey:@"LookUpIpAdress"];
     return lookUpAdress;
}
@end 
```

测试班

```
- (void) testGetIpAdress {

    iRNetworkingObject* networkingObject = [[iRNetworkingObject alloc] init];
    NSString* testCase = @"192.168.2.1";
    NSString* encondedString = [networkingObject getIpAdress]];

    STAssertTrue([testCase isEqualToString:encondedString], @"Not equal");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:37:02.360

`bundleForClass:`在测试代​​码中很重要，以确保您获得应用程序包而不是测试包。您不必在生产代码中这样做。

您的密钥`@"LookUpIpAdress"`拼写错误。那是问题吗？

# java - 为什么Java纯粹是按值传递？

> ID：15471440
> 
> 赞同：-2
> 
> 时间：2013-03-18T07:10:26.340
> 
> 标签：java, pass-by-reference, pass-by-value

*为什么java不支持引用传递？* 有什么具体原因吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:13:09.140

> 为什么java不支持引用传递？

[Java 确实是按值传递](https://stackoverflow.com/a/40523/367273)。但是，您仍然可以将对象引用传递给方法。尽管引用是按值传递的，但整体效果几乎与按引用传递没有区别。

不支持的是对原始类型的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:16:49.920

实际上，在 Java 中，一切都是按值传递的。

当您说对象通过引用传递时，这意味着对象引用是通过值传递的。

这基本上是 Java 设计人员做出的设计决定，目的是使语言简单，代码更易于调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:16:02.010

> 有什么具体原因吗？

那就是语言设计。

它支持按引用传递，这与引用按值传递不同。

看到这个：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1)

# ajax - Dojo Xhr：在页面上的任意位置单击鼠标之前，结果内容不会出现

> ID：15471441
> 
> 赞同：1
> 
> 时间：2013-03-18T07:10:38.163
> 
> 标签：ajax, google-chrome, dojo, offline-caching, html5-appcache

我正在使用 Dojo 1.7 构建一个离线应用程序，使用 Dojo RDD，动态生成表单并将它们存储在缓存中。现在每次当我通过 ajax 获取某些东西时，我都必须删除 dojo 注册表，因为如果我不清除注册表，dojo 会通过 id 绑定小部件，这将导致解析 dojo 小部件时出现问题，因为它们的 id 已经存在于小部件注册表中，但是当我每次都清除注册表时它会导致另一个问题。一切正常，但结果内容仅在单击页面上的任何位置时出现。与以下描述相同：

[在点击鼠标之前，动态元素不会出现在 IE8 中](https://stackoverflow.com/questions/3350441/dynamic-elements-are-not-appearing-in-ie8-until-there-is-a-mouse-click)

但是，在这种情况下，这个问题出在 Chrome 上。

并且上面 url 中提供的解决方案在这种情况下不起作用。

经验：

//在某些情况下，注册表是析构函数不被调用。

dojo.xhrGet({

```
 url: serverUrl,
        content: {},
        load: function(result) {

            //destroying widget registry.(before any parsing)
            dijit.registry._destroyAll();

            // here is html processing.
        },

        error: function(error) {
            utility.handleException(error);
        }
    }); 
```

# wpf - 我如何将图像放在进度条上？

> ID：15471444
> 
> 赞同：2
> 
> 时间：2013-03-18T07:10:52.090
> 
> 标签：wpf, progress-bar, wpf-4.0

我放了进度条，但它看起来不合适

```
<ProgressBar Height="30" Width="300"  VerticalAlignment="Center" BorderThickness="0" HorizontalAlignment="Center" Foreground="#0A8098" BorderBrush="Transparent"  Name="pbProcessing" >
                    <ProgressBar.Background>
                        <ImageBrush ImageSource="/ClientApplication;component/Images/ProgressBackground.png"/>
                    </ProgressBar.Background>
                    <ProgressBar.Clip>
                        <RectangleGeometry RadiusX="20.5" RadiusY="20.5" Rect="0,0,300,19"/>
                    </ProgressBar.Clip>
                </ProgressBar> 
```

但我展示了 ![进度条](../Images/69ea93911a003805e1acd5729378539c.png)

知道如何将图像完美地放在进度条上吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:59:51.477

尝试这个

```
<ProgressBar Value="30" Height="30" Width="300"  VerticalAlignment="Center"    BorderThickness="0" HorizontalAlignment="Center" Foreground="#0A8098" BorderBrush="Transparent"  Name="pbProcessing" >
        <ProgressBar.Template>
            <ControlTemplate>
            <Grid>
                <Image Name="PART_Track" Source="bird1.jpg"  Stretch="Fill"/>
                    <Rectangle Name="PART_Indicator"   
                        Fill="BlanchedAlmond"    
                        HorizontalAlignment="Left"/>
                </Grid>
            </ControlTemplate>
        </ProgressBar.Template>
    </ProgressBar> 
```

# visual-studio - #将某些东西定义为#error

> ID：15471447
> 
> 赞同：1
> 
> 时间：2013-03-18T07:11:05.063
> 
> 标签：visual-studio, macros, c-preprocessor

在我们的代码中删除旧宏的过程中，我需要将旧宏定义为带有有意义的编译器消息的错误。

例如，旧代码：

```
#define DIVIDE_BY_TWO(x) x/2 
```

在新代码中，为了防止使用这个宏，我想写：

```
#define DIVIDE_BY_TWO(x) #error DIVIDE_BY_TWO is obsolete, use DIV_2 instead 
```

但是当我编译上面的行时，我得到：

```
error C2162: expected macro formal parameter 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:24:12.280

using 的问题`#error`在于，在预处理器分析部分代码时会产生错误。您想在宏展开时创建一个错误。不幸的是，你不能使用`#error`它。

我不相信有一种方法可以在可移植的 C 中可靠地生成清晰的人类可读的错误消息。（当然，您可以将宏扩展为语法上无效的内容，但这至少会停止编译。） gcc 支持使用`_Pragma`. 您的问题实际上等同于[这个问题](https://stackoverflow.com/questions/9006358/can-you-devise-a-simple-macro-to-effectively-produce-a-compiler-error-when-used)，并且那里的答案解释了如何使用`_Pragma`以及其他选项来创建致命错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:22:00.493

宏不能有指令或更改预处理器状态。您可以保留`DIVIDE_BY_TWO`未定义，但查找替换宏无济于事。可移植的唯一方法是将其定义为如下所示：

```
#define DIVIDE_BY_TWO error_DIVIDE_BY_TWO_is_obsolete_use_DIV_2_instead 
```

这应该给出一个`error_DIVIDE_BY_TWO_is_obsolete_use_DIV_2_instead`未定义的错误，并希望能给如何替换它提供足够的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:28:27.413

您不能使用预处理器指令，`#define`因为您要求的是两次运行预处理器。

如果一行以 an 开头，`#`则它是预处理器的指令并且将被解释。如果不存在，则如果存在这样的宏，则对其进行宏替换和替换。

您可以做的最好的事情是将已弃用的宏定义为肯定会返回错误的某些表达式。

# asp.net - 如何给出保存在项目 App_Data 文件夹中的 .mdb 文件的路径

> ID：15471448
> 
> 赞同：0
> 
> 时间：2013-03-18T07:11:08.080
> 
> 标签：asp.net, access-data-project

这是我从特定文件夹访问数据的代码.. 但我无法从我的 App_data 文件夹访问 mdb 数据库.. 请帮助..

```
OleDbConnection a = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data   
Source=D:\\timetronix.mdb"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:43:11.293

试试这样。[连接字符串访问](http://www.connectionstrings.com/access)

```
OleDbConnection a = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\timetronix.mdb;User Id=admin;Password=somepass;"); 
```

# android - 应用程序意外停止....请重试..>强制关闭

> ID：15471458
> 
> 赞同：0
> 
> 时间：2013-03-18T07:11:42.440
> 
> 标签：android, emulation

我使用下面的代码来获取用户的当前位置。在这段代码中，我试图获取一个人所在位置的纬度和经度。我使用了一个按钮“ **GETLATLON** ”，并且我希望在布局中使用的框中的**纬度**和**经度**。但是程序正在强行关闭。你能告诉我我应该做什么更正才能在**模拟器**上显示。

```
private EditText text1;
private EditText text2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    text1 = (EditText) findViewById(R.id.editText1);
    text2 = (EditText) findViewById(R.id.editText2);
}
public void onClick(View view) throws Exception {
    double lat;
    double lon;
    String url = BASE_URL + "sites/" + SITE_ID + "/stations/" + STATION_MAC + "/";
    ClientResource itsClient = new ClientResource(url);
    itsClient.setChallengeResponse(ChallengeScheme.HTTP_BASIC, USERNAME, PASSWORD);

    // Retrieve and parse the JSON representation
    JsonRepresentation jsonRep = new JsonRepresentation(itsClient.get());
    JSONObject jsonObj = jsonRep.getJsonObject();

    // Output results
    lat=jsonObj.getJSONObject("loc").getDouble("lat");
    lon=jsonObj.getJSONObject("loc").getDouble("lng");

    switch (view.getId()) {
        case R.id.button1:
        String lats = Double.toString(lat);
        text1.setText(lats);
        String lons = Double.toString(lon);
        text2.setText(lons);
        break;
     }
} 
```

下面是logcat：

```
03-18 14:09:15.639: E/dalvikvm(563): Could not find class 'org.restlet.resource.ClientResource', referenced from method com.android.navigation.MainActivity.onClick
03-18 14:09:15.639: W/dalvikvm(563): VFY: unable to resolve new-instance 546 (Lorg/restlet/resource/ClientResource;) in Lcom/android/navigation/MainActivity;
03-18 14:09:15.639: D/dalvikvm(563): VFY: replacing opcode 0x22 at 0x0002
03-18 14:09:15.671: D/dalvikvm(563): VFY: dead code 0x0004-004f in Lcom/android/navigation/MainActivity;.onClick (Landroid/view/View;)V 
```

单击模拟器屏幕上的 GETLATLON 按钮后，下面是 logcat

```
03-18 14:25:12.149: D/AndroidRuntime(563): Shutting down VM
03-18 14:25:12.149: W/dalvikvm(563): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-18 14:25:12.232: E/AndroidRuntime(563): FATAL EXCEPTION: main
03-18 14:25:12.232: E/AndroidRuntime(563): java.lang.IllegalStateException: Could not execute method of the activity
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.view.View$1.onClick(View.java:2144)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.view.View.performClick(View.java:2485)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.view.View$PerformClick.run(View.java:9080)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.os.Handler.handleCallback(Handler.java:587)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.os.Looper.loop(Looper.java:123)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-18 14:25:12.232: E/AndroidRuntime(563):  at java.lang.reflect.Method.invokeNative(Native Method)
03-18 14:25:12.232: E/AndroidRuntime(563):  at java.lang.reflect.Method.invoke(Method.java:507)
03-18 14:25:12.232: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-18 14:25:12.232: E/AndroidRuntime(563):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-18 14:25:12.232: E/AndroidRuntime(563):  at dalvik.system.NativeStart.main(Native Method)
03-18 14:25:12.232: E/AndroidRuntime(563): Caused by: java.lang.reflect.InvocationTargetException
03-18 14:25:12.232: E/AndroidRuntime(563):  at java.lang.reflect.Method.invokeNative(Native Method)
03-18 14:25:12.232: E/AndroidRuntime(563):  at java.lang.reflect.Method.invoke(Method.java:507)
03-18 14:25:12.232: E/AndroidRuntime(563):  at android.view.View$1.onClick(View.java:2139)
03-18 14:25:12.232: E/AndroidRuntime(563):  ... 11 more
03-18 14:25:12.232: E/AndroidRuntime(563): Caused by: java.lang.NoClassDefFoundError: org.restlet.resource.ClientResource
03-18 14:25:12.232: E/AndroidRuntime(563):  at com.android.navigation.MainActivity.onClick(MainActivity.java:35)
03-18 14:25:12.232: E/AndroidRuntime(563):  ... 14 more
03-18 14:25:16.851: I/Process(563): Sending signal. PID: 563 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:36:02.260

我认为这是由于Android由于某种原因无法找到`org.restlet.resource.ClientResource`。如果这是单独的库，则已将其添加到您的项目构建路径中。

# android - 将按钮链接到新的页面或活动屏幕

> ID：15471460
> 
> 赞同：0
> 
> 时间：2013-03-18T07:11:43.847
> 
> 标签：android, android-layout, android-button

我是 Android 应用程序开发的新手，我想知道如何将按钮链接到另一个新页面。我对事件侦听器和许多术语感到困惑。有人可以帮我将按钮链接到新页面我可以创造更多吗？

我应该修改哪些代码以及如何修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:35:23.377

```
Button btnTest;

public class myactivity extends Activity {
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity);

        btnTest =(Button) findViewById(R.id.btn_Test);
                btnTest.setOnClickListener(OpenNewActivity);

    }

}

View.OnClickListener OpenNewActivity = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(myactivity.this, SecondActivity.class);
            startActivity(intent);

        }
    }; 
```

您还必须在 Manifest.xml 中注册您的第二个活动

```
<activity android:name=".SecondActivity">            
        </activity> 
```

里面`<application> </application>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:15:50.547

你需要`setOnClickListener()`你的按钮并使用它`intent`来调用下一个活动。

例子：

```
public class YourActivity extends Activity
{
Button mybutton;
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mybutton = (Button) findViewById(R.id.button1);
    mybutton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(YourActivity.this, NextActivity.class);
            YourActivity.this.startActivity(intent);
        }
    });
 }
} 
```

不要忘记在 AndroidManifest.xml 中添加您的新活动：

```
<activity android:label="@string/app_name" android:name=".NextActivity"/> 
```

# apache-poi - apache-poi-3.9 + 创建下拉菜单

> ID：15471470
> 
> 赞同：0
> 
> 时间：2013-03-18T07:12:19.867
> 
> 标签：apache-poi

我正在尝试使用 Apache-poi-3.9 在 XLS 中创建下拉列表。以下代码我写了::

```
public class TestMacroTemplate {

    /**
     * @param args
     * @throws IOException
     */
    public static void main(String args[]) throws FileNotFoundException {
        HSSFWorkbook workbook = new HSSFWorkbook();
        HSSFSheet sheet = workbook.createSheet("Data Validation");
        CellRangeAddressList addressList = new CellRangeAddressList(0, 0, 0, 0);
        DVConstraint dvConstraint = DVConstraint
                .createExplicitListConstraint(new String[] { "10", "20", "30" });
        DataValidation dataValidation = new HSSFDataValidation(addressList,
                dvConstraint);
        dataValidation.setSuppressDropDownArrow(false);
        sheet.addValidationData(dataValidation);
        FileOutputStream fileOut = new FileOutputStream("XLCellDropDown.xls");
        try {
            workbook.write(fileOut);
            fileOut.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

但它给出了以下异常：

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.poi.hssf.usermodel.HSSFSheet.addValidationData(Lorg/apache/poi/ss/usermodel/DataValidation;)V
    at ejb.TestMacroTemplate.main(TestMacroTemplate.java:31) 
```

相同的代码适用于 Apache-poi-3.2

请帮我。

谢谢，尼拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T10:25:55.350

Apache POI 有一个[关于这个问题的常见问题解答](http://poi.apache.org/faq.html#faq-N10006)。我会从那里引用，因为它会解决你的问题

> **我的代码使用了一些新功能，可以正常编译，但在出现“MethodNotFoundException”、“NoSuchMethodError”或“IncompatibleClassChangeError”时会失败**
> 
> 您几乎可以肯定在您的类路径中有旧版本的 POI。相当多的运行时和其他软件包将发布旧版本的 POI，因此这是一个很容易在您没有意识到的情况下遇到的问题。
> 
> 识别有问题的早期 jar 文件的最佳方法是使用几行 java.util.jar 文件。这些将加载核心 POI 类之一，并报告它的来源。

```
ClassLoader classloader =
   org.apache.poi.poifs.filesystem.POIFSFileSystem.class.getClassLoader();
URL res = classloader.getResource(
         "org/apache/poi/poifs/filesystem/POIFSFileSystem.class");
String path = res.getPath();
System.out.println("Core POI came from " + path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:47:09.530

它工作正常`Apache poi 3.9`，我已经测试过了。只包括这些罐子

```
poi-scratchpad-3.9-20121203.jar
poi-3.9-20121203.jar
poi-examples-3.9-20121203.jar
poi-excelant-3.9-20121203.jar
poi-ooxml-3.9-20121203.jar
poi-ooxml-schemas-3.9-20121203.jar 
```

# javascript - 防止在ajax中重新初始化

> ID：15471472
> 
> 赞同：5
> 
> 时间：2013-03-18T07:12:40.013
> 
> 标签：javascript, jquery, ajax, jquery-plugins, browser

我的网站上有很多页面 ajax 请求。我正在使用**jquery hashchange 插件**来集成它们。

现在，正如我所观察到的，在我执行 $(window).hashchange 之后，我总是必须重新启动其他一些插件（例如 fullcalendar、工具提示等）。

我一直在尝试谷歌 - 关于如何防止在 ajax 请求期间重新初始化。我已经尝试使用 live 并且它可以工作，但问题是某些插件不需要使用 .live 功能，特别是当它基于内容时（例如全日历、工具提示（页面加载）等）。我一直在尝试使用以下方法解决此问题：

```
 $(window).on("hashchange") 
```

我可以测试元素是否存在并**重新初始化**插件（这对我来说太脏了），问题**是：插件无法工作/读取**。

每次在 ajax 中初始化插件时，最好的方法是什么？这甚至可能吗？

PS 还在开始学习和探索更多关于 ajax 的知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:29:25.910

据我了解，您想初始化通过页面上的 AJAX 调用加载的插件。如果正确，您可以将插件初始化代码放入 AJAX 调用的“成功”回调中。

您只需要为需要显式初始化的插件添加代码。

# wordpress - wordpress中每种帖子类型的自定义标签

> ID：15471482
> 
> 赞同：1
> 
> 时间：2013-03-18T07:13:14.850
> 
> 标签：wordpress

目前我有两个自定义帖子类型，比如 article#1 和 article#2 。我还想为每种帖子类型创建自定义标签。我的意思是如果我为 article#1 创建一个标签，它不会显示在 article#2 post type 下。

请帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:24:17.013

帖子后端有标签选项，您需要在其中添加标签，然后您必须在前端调用这些标签，您可以使用该功能

```
 <?php $posttags = get_the_tags();
                    if ($posttags) {
                       echo get_the_tag_list('<ul><li>','</li><li>','</li></ul>');
                    }

     ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:27:12.570

您可以做的是在您的 register_post_type 中添加名为“分类法”的 $args 参数中的附加条目，例如

```
$args = array(
        'labels' => $labels,
        'public' => true,
        'publicly_queryable' => true,
        'show_ui' => true,
        'query_var' => true,
        'rewrite' => true,
        'capability_type' => 'post',
        'hierarchical' => false,
        'menu_position' => null,
                'taxonomies' => array('tag')
      ); 
```

希望这就是你要找的:)

# c++ - 为什么在将具有大小的数组声明为整数变量时会出现编译器错误？

> ID：15471486
> 
> 赞同：1
> 
> 时间：2013-03-18T07:13:34.420
> 
> 标签：c++, arrays, visual-studio-2008, compiler-errors, dev-c++

在 Visual Studio 中，我有一个以前在 Dev-C++ 中没有的错误：

```
int project = (rand() % 5) + 1 ;
int P[project][3]; 
```

汇编：

> 错误 C2057：预期的常量表达式
> 错误 C2466：无法分配常量大小的数组 0
> 错误 C2133：“P”：未知大小

你能帮助理解这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:15:16.697

在 C++ 中，您只能创建大小为编译时间常数的数组。
数组的大小`P`需要在编译时知道，它应该是一个常量，编译器会通过诊断消息警告你。

> **为什么不同编译器的结果不同？**

大多数编译器允许您通过编译器扩展创建可变长度数组，但它是非标准批准的，这样的使用将使您的程序在不同的编译器实现之间不可移植。这就是你所经历的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:21:14.570

在这种情况下，您需要动态分配内存。所以你不能说`int P[someVariable]`。你需要使用`int *mem = new int[someVariable]`

看看[这个链接。](http://www.cplusplus.com/doc/tutorial/dynamic/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:33:14.473

可变长度数组的标准 C++ 类是`std::vector`. 在这种情况下，你会得到`std::vector<int> P[3]; P[0].resize(project); P[1].resize(project); P[2].resize(project);`

# php - 将 IE8 用户重定向到另一个页面

> ID：15471488
> 
> 赞同：4
> 
> 时间：2013-03-18T07:13:44.810
> 
> 标签：php, javascript, wordpress, internet-explorer-8, conditional-comments

我正在使用 Wordpress 实现一个网站，但 Internet Explorer 8 不支持我的网站。

我可以使用任何代码来将任何 IE8 用户重定向到另一个页面吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T07:32:18.150

我知道您指定了 PHP，但这里有一个 HTML/JS 解决方案：

```
<!--[if IE]>
    <script type="text/javascript">
        window.location = "http://www.google.com/";
    </script>
<![endif]--> 
```

取自[这个答案](https://stackoverflow.com/a/7637619/1563422)。

如果您只想重定向 IE **8**用户，请更改`<!--[if IE]>`为`<!--[if IE 8]>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:28:47.080

是的，在 PHP 中，您可以使用它`$_SERVER['HTTP_USER_AGENT']`来检测浏览器并相应地重定向。在 javascript 中，你可以`navigator.userAgent`应用同样的东西。

# android - Android Facebook API 显示白色空白页

> ID：15471493
> 
> 赞同：1
> 
> 时间：2013-03-18T07:14:15.477
> 
> 标签：android

我正在使用 Android Facebook API，但是当我单击 Facebook 的登录按钮时，它会打开白屏空白，就像附加的图像一样。请向我提出一些解决方案。

![在此处输入图像描述](../Images/c02fd23e284163652b4ce91a410a4c3e.png)

```
public void facebookLogin(FacebookLoginHandller target) {
        try {
            this.superLocal = target;

            if (facebook == null) {
                facebook = new Facebook(APPID);
            }

            if (facebook.isSessionValid()) {
                superLocal.loginStatus(1);
            } else {
                facebook.authorize(Activity.this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener(new FacebookLoginHandller() {

                    @Override
                    public void loginStatus(int status) {

                        if (status == 1) {
                            superLocal.loginStatus(1);
                        }
                    }
                }));
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:49:46.630

添加

```
webView.resumeTimers(); 
```

在 com.facebook.widget.WebDialog.setUpWebView() 结束时为我工作。（Facebook SDK 3.0+）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:29:47.243

解决此问题的步骤

打开作为库添加的 facebook 库 (com.facebook.android)

打开 FaceBook.java 类

在那里我们会发现 private static final int DEFAULT_AUTH_ACTIVITY_CODE = 32665。

您应该将 DEFAULT_AUTH_ACTIVITY_CODE 更改为 -1

现在保存并清理并构建库和您的应用程序

**笔记 ：**

此空白屏幕仅针对最新版本出现。

# php - 月份复选框

> ID：15471494
> 
> 赞同：-2
> 
> 时间：2013-03-18T07:14:18.957
> 
> 标签：php

我的页面中有根据当前月份的复选框，我在数据库中有 1（活动）0r 0（非活动）值。我还保存了与记录相对应的日期。现在我想要复选框选中哪些值为 1 并对应于它们的日期，并取消选中哪些值为 0。其他框应该是空的，因为我没有完整的月份值。

```
 <?php 
            $isActiveYMD="";
            $isActive="";
            foreach($attendancelist as $attendancelis){
                $isActive[]= $attendancelis['EmployeeAttendance']['is_active'];
                $isActivee= $attendancelis['EmployeeAttendance']['date'];
                $isActiveYMD[] = date('d-m-Y',strtotime($isActivee));
            }
            $no_of_days= date("t");
            for($i=1;$i<=$no_of_days;$i++){
            ?>
            <div style="width:300px;float:left;">
            <input type="checkbox" value="1" name="isactive" <?php if($isActive[$i]=="1"){ ?>checked="checked" <?php  }else{   } ?> />
            <?php echo $start = date(''.$i.'-m-Y'); ?>
            </br></br></br>     
            </div>
            <?php
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:28:01.330

```
<?php
$isActiveYMD="";
$isActive="";
foreach($attendancelist as $attendancelis){
     $isActive[] = $attendancelis['EmployeeAttendance']['is_active'];
     $isActivee = $attendancelis['EmployeeAttendance']['date'];
     $isActiveYMD[] = date('d-m-Y',strtotime($isActivee));
}
for ($i=1;$i<=date('t');$i++) {
   echo '<div style="width:300px;float:left"><input type="checkbox" value="1" name="';
   echo $unique_name; //this name is used to check if the checkbox is checkd in your form-action
   echo ($isActive[$i] == 1) ? '" checked="checked" /> ' : '" /> ';
   echo $i.date('-m-Y').'<br /><br /><br /></div>';
}
?> 
```

# java - 为什么当我将此指针推送到 Deque/ArrayList 时，它显然不是 Null 时会出现 NullPointerException

> ID：15471497
> 
> 赞同：0
> 
> 时间：2013-03-18T07:14:29.863
> 
> 标签：java, recursion, nullpointerexception, depth-first-search

所以我正在尝试做一个简单的迷宫求解器（深度优先）。我不想帮助解决递归方法，但由于某种原因，这会导致 NullPointerException 对单元格的 ArrayList 的 .add 产生影响，谁能帮我知道为什么？（MazeExample 类制作了一个简单的指向 NSEW 的指针迷宫，由我的老师提供，因此我们可以尝试测试我们的代码）。

```
public static void main(String[] args)
{
    MazeSolver solver = new MazeSolver();
    ExampleMaze example = new ExampleMaze();

    System.out.println(solver.stepsToSolveMaze(example.getStart()));    

} 
```

这是主要的，这里是 MazeSolver 对象（到目前为止，它只计算到最后的移动次数，一次一步）。

```
public class MazeSolver 
{
private int steps=0;
private ArrayList<MazeCell> visitedCells;
private Deque<MazeCell> breadCrumbs;

public int stepsToSolveMaze(MazeCell cell)
{
    visitedCells.add(cell); //this is where the exception is getting thrown.
    breadCrumbs.push(cell);

    if (cell.isFinish())
    {
        return 1;
    }

    if (cell.east() != null && !visitedCells.contains(cell.east()))
    {
        steps += stepsToSolveMaze(cell.east());
    }
    if (cell.south() != null && !visitedCells.contains(cell.south()))
    {
        steps += stepsToSolveMaze(cell.south());
    }
    if (cell.west() != null && !visitedCells.contains(cell.west()))
    {
        steps += stepsToSolveMaze(cell.west());
    }
    if (cell.north() != null && !visitedCells.contains(cell.north()))
    {
        steps += stepsToSolveMaze(cell.north());
    }
    else
    {
        steps--;
        stepsToSolveMaze(breadCrumbs.pop());            
    }

    return steps;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:17:13.257

在您的示例中，visitedCells 从未设置，因此当您尝试向其中添加项目时，它会导致 NullPointerException。您需要在使用它之前对其进行初始化：

```
visitedCells = new ArrayList<MazeCell>(); 
```

On another point, breadCrumbs will have the same problem, so you should probably initialise that while your at it:

```
breadCrumbs = new Deque<MazeCell>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:17:18.093

You are not initializing array List.

Add following in stepsToSolveMaze

```
visitedCells = new ArrayList<MazeCell>(); 
```

and then add elements

# c# - 从右到左括号显示错误

> ID：15471500
> 
> 赞同：8
> 
> 时间：2013-03-18T07:14:50.270
> 
> 标签：c#, .net, winforms, right-to-left

当标签文本值以结束括号结尾时。从右到左的结果与示例一样是错误的。

```
文字：ABC (123)
结果：（ABC（123
预期结果：ABC (123)

```

有什么解决方案可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T08:41:30.420

您必须在文本中使用 Unicode ***`Right-to-left mark`***, ( `U+200F`)。相反，***`Left-to-right mark`***如果您知道需要 LTR 渲染，请使用 (`U+200E)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:48:34.170

检查您的输入编码。您应该使用 UTF 系列或 unicode 来实现您的目标。还要在 Visual Studio 中检查您的文件编码。

# android - 在 android 上具有负值的 SeekBar

> ID：15471508
> 
> 赞同：3
> 
> 时间：2013-03-18T07:15:19.267
> 
> 标签：android, seekbar

我在我的代码中使用了一个带有两个按钮来增加和减少值的搜索栏。搜索栏的最小和最大范围应该是 -30 到 480。

谁能建议如何将搜索栏中的范围设置为-30到480。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-05T13:27:38.030

这是我为此使用的一个类：

```
import android.content.Context;
import android.support.v7.appcompat.R;
import android.util.AttributeSet;
import android.widget.SeekBar;

/**
 * Created by HeWhoWas on 5/10/13.
 */
public class NegativeSeekBar extends SeekBar {

    protected int minimumValue = 0;
    protected int maximumValue = 0;
    protected OnSeekBarChangeListener listener;

    public NegativeSeekBar(Context context){
        super(context);
        setUpInternalListener();
    }

    public NegativeSeekBar(Context context, AttributeSet attrs){
        super(context, attrs);
        setUpInternalListener();
    }

    public NegativeSeekBar(Context context, AttributeSet attrs, int defStyle){
        super(context, attrs, defStyle);
        setUpInternalListener();
    }

    public void setMin(int min){
        this.minimumValue = min;
        super.setMax(maximumValue - minimumValue);
    }

    public void setMax(int max){
        this.maximumValue = max;
        super.setMax(maximumValue - minimumValue);
    }

    @Override
    public void setOnSeekBarChangeListener(OnSeekBarChangeListener listener){
        this.listener = listener;
    }

    private void setUpInternalListener(){
        super.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
                if(listener != null){
                    listener.onProgressChanged(seekBar, minimumValue + i, b);
                }
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {
                if(listener != null)
                    listener.onStartTrackingTouch(seekBar);
            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                if(listener != null)
                    listener.onStopTrackingTouch(seekBar);
            }
        });
    }
} 
```

# javascript - jquery 和 json ajax....如何解析数据

> ID：15471509
> 
> 赞同：0
> 
> 时间：2013-03-18T07:15:28.100
> 
> 标签：javascript, json, jquery

下面是我的 jquery ajax 调用。我从火虫中看到我收到了 json 响应。

```
 Content-Type application/json
   {x:1363590711.97,y:0.277528026651} 
```

但是...我无法弹出事件并提醒数据？如何获取解析的 json 对象，以便我开始使用它？

```
$.ajax({
      type: 'GET',
      url: 'ajax_test',
      crossDomain: false,
      dataType: 'json',
      success: function(responseData) { 
          alert(responseData);
          //seriesJsonData[0]['data'].push({y: responseData.y, x: responseData.x});
      }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:20:50.550

当您请求 dataType: 'json' 时，您的返回数据已经被解析

```
$.ajax({
    type: 'GET',
    url: 'ajax_test',
    crossDomain: false,
    dataType: 'json',
    success: function(responseData) { 
          alert(responseData.x + " " + responseData.y);
          seriesJsonData[0]['data'].push(responseData);
    }
}); 
```

# arrays - 查找元素是否存在于未排序数组中的最快方法？

> ID：15471511
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:15:37.720
> 
> 标签：arrays, algorithm, sorting, search

搜索未排序数组以进行元素线性搜索的最快算法是什么？我的意思是我猜合并排序+二进制搜索的组合会更慢。还有其他选择吗？（就不涉及多线程的算法而言）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T07:17:02.447

是的，如果数组是未排序的并且这就是你所知道的关于它的结构，那么搜索一个元素的最快方法是考虑每一个需要线性时间*O(n)*的元素。

如果您要大量搜索数组，那么您可能需要考虑进行初始排序，然后将元素插入到正确的排序索引中（使用二进制搜索）。这意味着您的初始排序为*O(n log n)*但每次插入和搜索都需要*O(log n)*。这都是关于权衡以及这是否比*O(1)*插入和*O(n)*搜索更好。

您说没有多线程，但这是提高性能的一种简单方法，让多个线程查看列表中的不同块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T16:09:14.720

我创建了一种在未排序数组中搜索元素的方法。

```
#include <iostream> 
#include <vector> // for 2D vector 
#include<bits/stdc++.h>
using namespace std; 

int main() 
{ 
    vector<vector<int>> vect{ {0},{0},{0},{0},{0},{0},{0},{0},{0},{0} }; 
    int count[10];
    int min = INT_MAX; 
    int max = INT_MIN;   
    for (int i = 0; i < 10; i++)
    {
        count[i] = 0;
    }

    for (int i = 0; i < 7; i++)
    {
        //input 7 integers
        int ip,
            rem;
        cin >> ip;
        rem = ip % 10;
        if (ip > max)
            max = ip;
        if (min > ip)
            min = ip;
        if (vect[rem][0] == 0 && count[rem] == 0)
        {
            vect[rem][0] = ip;
            count[rem]++;
        }
        else
        {
            vect[rem].push_back(ip);
            count[rem]++;
        }
    }

    int find;
int flag = 0;
    cin >> find;
    int rem = find % 10;
    if (find>max || find<min || count[rem] == 0)
        cout<<"not present in the array";
    else
    {
        for (int i = 0; i < vect[rem].size(); i++)
        {
            if (vect[rem][i] == find)
            {
                cout << "found";flag = 1;
                break;
            }
        }
      if(flag == 0)
        cout<<"not present in the array";
    }

    return 0; 
} 
```

我看到这可以更快。基本上，一旦收到元素，我就会将元素存储在 2D 矢量中。

我将剩余的数字（数字 % 10）作为向量的索引并推送这些元素。现在要搜索元素，我只遍历向量的特定索引中存在的元素。
这样，比较的次数就少了。

# php - 在数据库中查找 HASH 字符串（mysql 和 php）

> ID：15471514
> 
> 赞同：0
> 
> 时间：2013-03-18T07:15:52.287
> 
> 标签：php, mysql

所以，我有一个奇怪的想法，将哈希与单词匹配。但是，由于获得匹配的几率很小，我需要一个带有散列和单词的大型数据库。我已经有了一个庞大的数据库，其中包含数百万个随机/真实单词以及与该单词对应的哈希值。

然而，问题在于搜索。我对这种大规模的数据库没有经验。所以，我在 MySQL 等中使用“WHERE”语句进行了一些随机测试。猜猜看，在 SQL 完成搜索并找到 HASH 并给我 WORD 作为回报之前，我花了 14 多分钟才找到匹配项。

我应该如何加快这个过程？我正在使用 PHP 和 MySQL。是否需要在我的服务器上安装其他东西？还是我可以使用mysql中已经内置的东西？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T07:17:59.863

添加一个自动递增的主键并将其命名为 id。

我写了一个脚本，它把所有的单词`/etc/dict`都放进去，然后在它们上面运行 md5，写下它们的名字和哈希来创建这样的东西：

```
"2af2fc92ed1ee8080d9ab015ab053074", "Windex's
"bfa818f0cac66108daef757706e97a99", "Windhoek
"88d0e322fb73a2e971bc982bd348c777", "Windows 
```

我这样做的路线非常hacky，所以我不会发布我的实现方式，但总的来说它非常简单，基本上是基于：

```
while read line
    do
        echo $line | md5sum | awk '{print $1}'
    done 
```

所以我创建了一个数据库表：

```
CREATE TABLE whashes
    (
     id int auto_increment primary key, 
     hash varchar(32), 
     word varchar(16)
    ); 
```

并使用：

```
INSERT INTO whashes
(hash, word)
VALUES 
```

使用上面我的脚本的输出。运行速度测试。

```
SELECT * 
FROM  `whashes` 
WHERE word LIKE  "poop"
LIMIT 0 , 30 
```

在 0.0324 秒内运行。这是 100k 字，应该保持在这个速度

```
SELECT * 
FROM  `whashes` 
WHERE hash LIKE  "b538baf8573b52b5bcfdd551fffa6e9d"
LIMIT 0 , 30 
```

在 0.0202 秒内运行。

根据我的理解，使用自动递增的主 id 整数键，计算机能够将大量的 id 保存在缓存中，并对这些值进行一些二进制搜索。如果没有这样的键，数据库引擎必须遍历每个值来检查它，而一次检查将每次需要检查的数量减少一半。但是，这种解释可能有点不正确，但是如果我错了，其他人可能会进一步解释/纠正我。做这么简单的事情应该会给你带来很大的进步。

# c# - 如何以编程方式获取 TargetPath + GacUtil 注册

> ID：15471519
> 
> 赞同：0
> 
> 时间：2013-03-18T07:16:00.050
> 
> 标签：c#, biztalk, gac, gacutil

我需要什么？我写了一些 BizTalk Functoid 和 BizTalk Pipeline Components。但在您可以在映射（Functoid）或管道（管道组件）中使用它们之前，您需要将其复制到特定文件夹。

将其复制到文件夹中是没有问题的。我的问题是获取目标路径。我写了一个插件。因此，您可以单击菜单项。您还选择了 functoid 的项目。因此，当您现在单击菜单项时。它应该获取该程序集的 targetPath。它需要将“dll”文件复制到我的另一个文件夹中。

如何以编程方式获取“TargetFolder”？

另外，我如何将程序集注册到 GAC？在我使用的batfile中

"gacutil /i '程序集路径' /f"

使用 /f 参数，我们强制覆盖程序集。在 c# 中，您不能强制这样做。您是否需要先尝试删除程序集并将其注册到 GAC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:00:47.670

尝试从以下 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin 复制适当的 Gacutil.exe 和 Gacutil.exe.config 并将它们放在您的 .bat 文件夹中。

并以编程方式：

参考这个：

[http://blogs.msdn.com/b/helloworld/archive/2008/09/22/how-to-install-assemblies-to-the-gac-programmatically.aspx](http://blogs.msdn.com/b/helloworld/archive/2008/09/22/how-to-install-assemblies-to-the-gac-programmatically.aspx)

希望这可以帮助

谢谢，尼哈尔马拉利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:09:02.603

## 自定义管道组件

自定义 BizTalk 管道组件需要部署到 C:\Program Files (x86)\Microsoft BizTalk Server 2010\Pipeline Components\ 目录，以便它们在 Visual Studio 中的管道工具箱中可用。

但是，要将自定义管道组件放入工具箱中，您必须跳过几个额外的环节。您需要右键单击工具箱上的任意位置并选择“选择项目” - 这将加载“选择工具箱项目”。导航到“BizTalk 管道组件”，只要您实现了必要的组件接口，您应该会在此处看到您的自定义组件（参见下面的屏幕截图）。勾选与您的组件对应的复选框，然后选择“确定”。您的自定义组件现在将显示在工具箱中。如果将组件拖到 Visual Studio 中的接收或发送管道上，则会在相关项目中创建对程序集的引用。

![添加 BizTalk 自定义管道组件和映射器 Functoids 对话框](../Images/805e35ed5c586d2d995ce3111fd41414.png)

您将需要 GAC 自定义管道组件程序集，但这只是通过 Windows 资源管理器拖放到 GAC 中的问题。您可能还想查看[http://msdn.microsoft.com/en-us/library/aa578035.aspx](http://msdn.microsoft.com/en-us/library/aa578035.aspx)，其中包含有关 BizTalk 部署选项的一些详细信息，包括 GAC-ing 程序集。

## 自定义映射器 Funtoid

自定义 Functoid 的使用方式类似 - 按照上述说明将组件添加到工具箱，但选择选择“BizTalk Mapper Funtoids”。您还需要 GAC 程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:39:50.857

我通过首先检查 GAC 中是否存在程序集来解决问题。:)

# javascript - chrome - 无对话框打印

> ID：15471522
> 
> 赞同：1
> 
> 时间：2013-03-18T07:16:19.537
> 
> 标签：javascript, jquery, google-chrome

我有一个带有便笺打印机的屏幕，我希望用户能够自动打印而无需确认。如何在不打开打印对话框的情况下通过 Chrome 中的 Java Script 或 JQuery 进行打印？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T07:33:13.020

我认为在单击按钮上，您只需调用 window.print() 函数。

```
<a href='#' id='PrintPage' onclick='window.print();'> Click Here For Printing</a> 
```

我希望这能解决您的问题。

# c# - 检查后面代码中的javascript确认

> ID：15471524
> 
> 赞同：0
> 
> 时间：2013-03-18T07:16:42.387
> 
> 标签：c#, javascript, asp.net, c#-4.0

我正在使用以下脚本来显示确认消息框。我想检查确认状态是否正常。我怎样才能检查这个？

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='Javascript'>confirm('ERROR ALERT : " + status + " You can not create record for the above list! Do you want to proceed ?');</script>", false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:17:59.793

确认返回布尔值，您可以将其分配给变量，[在此处](http://www.w3schools.com/jsref/met_win_confirm.asp)`(true or false)`了解有关确认的更多信息。

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='Javascript'>result = confirm('ERROR ALERT : " + status + " You can not create record for the above list! Do you want to proceed ?');</script>", false); 
```

# php - FPDF - 多单元格中的 WriteHTML？

> ID：15471532
> 
> 赞同：3
> 
> 时间：2013-03-18T07:16:55.967
> 
> 标签：php, html, pdf, fpdf

可以将WriteHTML 放在Multicell 中吗？如何？

我从数据库中检索并显示 HTML 输出，但想将其放置在第二列（比如说），所以我将它放在 Multicell 中但没有效果。

以下不起作用：

```
$pdf->Multicell(70,3.5, $pdf->WriteHTML($html)); 
```

编辑：我找到了 WriteHTMLCell，如何使用？

任何人？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-24T11:24:58.507

将此方法添加到您的`WriteHTML`课程中

```
function WriteHtmlCell($cellWidth, $html){        
    $rm = $this->rMargin;
    $this->SetRightMargin($this->w - $this->GetX() - $cellWidth);
    $this->WriteHtml($html);
    $this->SetRightMargin($rm);
} 
```

然后就叫它

```
$pdf->WriteHtmlCell(70, $html); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-26T22:11:02.067

@Khaled 解决方案效果很好，如果您想保留左侧位置，请尝试以下操作：

```
function WriteHtmlCell($cellWidth, $html){
    $rm = $this->rMargin;
    $lm = $this->lMargin;
    $this->SetRightMargin($this->w - $this->GetX() - $cellWidth);

    $this->SetLeftMargin($this->GetX());

    $this->WriteHtml($html);
    $this->SetRightMargin($rm);
    $this->SetLeftMargin($lm);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T07:55:20.723

我修改了 WriteHTML 脚本以完成工作。

这是 fpdf.org 中为 WriteHTML 提供的脚本的修改形式

```
<?php
require('fpdf.php');
//function hex2dec
//returns an associative array (keys: R,G,B) from
//a hex html code (e.g. #3FE5AA)
function hex2dec($couleur = "#000000"){
    $R = substr($couleur, 1, 2);
    $rouge = hexdec($R);
    $V = substr($couleur, 3, 2);
    $vert = hexdec($V);
    $B = substr($couleur, 5, 2);
    $bleu = hexdec($B);
    $tbl_couleur = array();
    $tbl_couleur['R']=$rouge;
    $tbl_couleur['V']=$vert;
    $tbl_couleur['B']=$bleu;
    return $tbl_couleur;
}

//conversion pixel -> millimeter at 72 dpi
function px2mm($px){
    return $px*25.4/72;
}

function txtentities($html){
    $trans = get_html_translation_table(HTML_ENTITIES);
    $trans = array_flip($trans);
    return strtr($html, $trans);
}
////////////////////////////////////

class PDF_HTML extends FPDF
{
//variables of html parser
var $B;
var $I;
var $U;
var $HREF;
var $fontList;
var $issetfont;
var $issetcolor;

function PDF_HTML($orientation='P', $unit='mm', $format='A4')
{
    //Call parent constructor
    $this->FPDF($orientation,$unit,$format);
    //Initialization
    $this->B=0;
    $this->I=0;
    $this->U=0;
    $this->HREF='';
    $this->fontlist=array('arial', 'times', 'courier', 'helvetica', 'symbol');
    $this->issetfont=false;
    $this->issetcolor=false;
}

function WriteHTML($html,&$parsed)
{
    //HTML parser
    $html=strip_tags($html,"<b><u><i><a><img><p><br><strong><em><font><tr><blockquote>"); //supprime tous les tags sauf ceux reconnus
    $html=str_replace("\n",' ',$html); //remplace retour à la ligne par un espace
    $a=preg_split('/<(.*)>/U',$html,-1,PREG_SPLIT_DELIM_CAPTURE); //éclate la chaîne avec les balises
    foreach($a as $i=>$e)
    {
        if($i%2==0)
        {
            //Text
            if($this->HREF)
                $this->PutLink($this->HREF,$e);
            else
                $parsed.=stripslashes(txtentities($e));
        }
        else
        {
            //Tag
            if($e[0]=='/')
                $this->CloseTag(strtoupper(substr($e,1)));
            else
            {
                //Extract attributes
                $a2=explode(' ',$e);
                $tag=strtoupper(array_shift($a2));
                $attr=array();
                foreach($a2 as $v)
                {
                    if(preg_match('/([^=]*)=["\']?([^"\']*)/',$v,$a3))
                        $attr[strtoupper($a3[1])]=$a3[2];
                }
                $this->OpenTag($tag,$attr);
            }
        }
    }
}

function OpenTag($tag, $attr)
{
    //Opening tag
    switch($tag){
        case 'STRONG':
            $this->SetStyle('B',true);
            break;
        case 'EM':
            $this->SetStyle('I',true);
            break;
        case 'B':
        case 'I':
        case 'U':
            $this->SetStyle($tag,true);
            break;
        case 'A':
            $this->HREF=$attr['HREF'];
            break;
        case 'IMG':
            if(isset($attr['SRC']) && (isset($attr['WIDTH']) || isset($attr['HEIGHT']))) {
                if(!isset($attr['WIDTH']))
                    $attr['WIDTH'] = 0;
                if(!isset($attr['HEIGHT']))
                    $attr['HEIGHT'] = 0;
                $this->Image($attr['SRC'], $this->GetX(), $this->GetY(), px2mm($attr['WIDTH']), px2mm($attr['HEIGHT']));
            }
            break;
        case 'TR':
        case 'BLOCKQUOTE':
        case 'BR':
            $this->Ln(5);
            break;
        case 'P':
            $this->Ln(10);
            break;
        case 'FONT':
            if (isset($attr['COLOR']) && $attr['COLOR']!='') {
                $coul=hex2dec($attr['COLOR']);
                $this->SetTextColor($coul['R'],$coul['V'],$coul['B']);
                $this->issetcolor=true;
            }
            if (isset($attr['FACE']) && in_array(strtolower($attr['FACE']), $this->fontlist)) {
                $this->SetFont(strtolower($attr['FACE']));
                $this->issetfont=true;
            }
            break;
    }
}

function CloseTag($tag)
{
    //Closing tag
    if($tag=='STRONG')
        $tag='B';
    if($tag=='EM')
        $tag='I';
    if($tag=='B' || $tag=='I' || $tag=='U')
        $this->SetStyle($tag,false);
    if($tag=='A')
        $this->HREF='';
    if($tag=='FONT'){
        if ($this->issetcolor==true) {
            $this->SetTextColor(0);
        }
        if ($this->issetfont) {
            $this->SetFont('arial');
            $this->issetfont=false;
        }
    }
}

function SetStyle($tag, $enable)
{
    //Modify style and select corresponding font
    $this->$tag+=($enable ? 1 : -1);
    $style='';
    foreach(array('B','I','U') as $s)
    {
        if($this->$s>0)
            $style.=$s;
    }
    $this->SetFont('',$style);
}

function PutLink($URL, $txt)
{
    //Put a hyperlink
    $this->SetTextColor(0,0,255);
    $this->SetStyle('U',true);
    $this->Write(5,$txt,$URL);
    $this->SetStyle('U',false);
    $this->SetTextColor(0);
}

}//end of class
?> 
```

将以下代码复制到一个文件中，例如 FILE_NAME 并用于`require("FILE_NAME")`将此文件包含到您的脚本中。完成后，调用函数如下

```
$pdf->WriteHTML($html,$parsed );
$pdf->Multicell(70,3.5, $parsed ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T08:32:17.617

```
Can WriteHTML placed in Multicell? How? 
```

**NO.. WriteHTML 将数据输出到 pdf 文件。它什么也不返回。但是 MultiCell 函数需要一个字符串。**

所以你可以试试这个。修改WriteHTML函数，停止输出数据，将数据复制到变量中。然后使用 MultiCell 输出该变量

希望这会有所帮助。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-08T23:23:46.157

我发现在多单元格中使用 writeHTML 不是正确的解决方案。Multicell 需要知道如何设置标签的样式。WriteHTML 无法完成这项工作，因为它在解释标记实体时设置样式信息，而在调用原始多单元格函数时，这将什么都不做。

我找到了一种有效的方法：使用 [https://github.com/marxjohnson/moodle-local_progressreview/blob/master/fpdf/class.multicelltag.php中的 class.multicelltag.php](https://github.com/marxjohnson/moodle-local_progressreview/blob/master/fpdf/class.multicelltag.php)

注意：class.multicelltag 在 gnu 许可下获得许可，非商业用途免费。如果您需要商业许可证，请参阅[http://www.interpid.eu/fpdf-components](http://www.interpid.eu/fpdf-components)

如果您将它与另一个 fpdf 扩展名（例如 PDF_Label）一起使用，这里有一个示例：

```
require_once("class.multicelltag.php"); 
// note: you will also need class.string_tags.php for an include to class.multicelltag.php
// note: class.multicelltag.php already includes fpdf.php
class PDF_Label extends FPDF_MULTICELLTAG {
    ...
    // define what the tag will do with style information for the font family
    // this defines bold html tag to use current font, "B" style, current character size incremented by 1, and black for the color
    $this->SetStyle2('b',$this->_Font_Name,"B",$this->_Char_Size+1,"0,0,0");

    function Add_PDF_Label($texte,$align,$border,$imageFile='',$imageWidth=0,$imageHeight=0) {
        ...
        $this->ext_MultiCellTag($this->_Width, $this->_Line_Height, $texte,$border,$align,$fill);

    }
} 
```

我注意到 class.multicelltag.php 函数 ApplyStyle 尝试使用不属于 fpdf 核心字体的 DejaVu 字体，因此我将其更改为使用 helvetica。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-18T07:22:33.833

试试这个代码：

```
$pdf->setXY($x_pos,$y_pos);
$pdf->Multicell(70,3.5, $pdf->WriteHTML($html)); 
```

# c# - 手动更改编码的 ui 测试

> ID：15471539
> 
> 赞同：0
> 
> 时间：2013-03-18T07:17:25.743
> 
> 标签：c#, web, visual-studio-2012, coded-ui-tests

我的网站使用 VS2012。我想记录方法和断言，然后根据需要手动更改它们。我尝试了这个并添加了属性和变量并更改了方法的内容，它工作正常，但后来我尝试记录另一个方法并生成代码 - 它删除了我所做的一切，因为它与 UI 地图不匹配。有正确的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T08:02:57.830

不要编辑**uimap.designer.cs**文件中的代码，如果顶部有注释说它是生成的文件，编辑将丢失。每次记录新的操作或断言时，都会从**uimap.uitest**文件重新生成文件。如果使用 UI 地图编辑器进行更改，也会重新生成该文件。

在许多情况下，可以使用解决方案资源管理器中的 UI 地图编辑器（双击**uimap.uitest**文件）进行更改。操作面板上方有 9 个用于各种编辑的图标，也可以通过右键单击获得。通过更改操作和 uimap 控件的属性面板中的内容，可以进行更多更改。

如果 uimap 编辑器不够用，则使用命令（通过图标或右键单击）将操作移动到**uimap.cs**文件中。然后退出 uimap 编辑器，保存更改。现在可以根据需要编辑**uimap.cs文件中的代码。**请注意，**uimap.designer.cs**文件和**uimap.cs**文件都`partial class UIMap`靠近顶部。使用“将代码移动到 UIMap.cs”命令后，我建议保存所有文件，以便重新生成**uimap.designer.cs**文件。不保存文件会使“*.cs”文件处于不一致的状态，从而在编辑**uimap.cs**文件（和其他文件）中的代码时报告虚假错误。

也可以将**uimap.uitest**文件编辑为 XML 文件，但请先备份，因为很容易*破坏*文件。

我相信原始问题中的短语“*它删除了我所做的一切，因为它与 UI 地图不匹配”是误解了 Coded UI 正在做什么。*没有检查是否匹配。**对uimap.uitest**文件进行更改后，只需重新生成uimap.designer.cs 文件。

# javascript - 根据内容更改 iframe 高度

> ID：15471547
> 
> 赞同：0
> 
> 时间：2013-03-18T07:18:17.797
> 
> 标签：javascript, jquery, css, iframe

**iframe 标签：**

```
 <iframe scrolling="no" style="height: 956px; width: 100%" frameborder="0" id="ampcontentiframe"></iframe> 
```

我正在尝试在内容加载时调整 iframe 高度。我尝试了其他解决方案：

[链接1](https://stackoverflow.com/questions/11826649/resize-iframe-height-according-to-content)

[链接2](http://www.codeproject.com/Articles/19499/How-To-Adjust-IFrame-Height-on-Its-Content)

[链接3](http://www.456bereastreet.com/archive/201112/how_to_adjust_an_iframe_elements_height_to_fit_its_content/)

但是他们都没有解决我的问题。我尝试在窗口加载和 iframe 加载时调用 resize 函数。但是它每次设置的高度都不同（有时是实际内容高度，有时是 iframe 的原始高度）。

任何帮助家伙......？

*仅供参考：我也尝试从 iframe 中删除滚动属性。但它没有用*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-10T20:01:42.663

这是真正比它应该更难的问题之一。以下是您需要考虑的事项，以保持 iFrame 的大小正确。

## 计算出准确的高度

获得 iFrame 的准确高度并不像应有的那么简单，因为您可以选择六种不同的属性来检查它们，但它们都没有给出始终正确的答案。我想出的最好的解决方案是只要你不使用 CSS 来溢出 body 标签，这个函数就可以工作。

```
function getIFrameHeight(){
    function getComputedBodyStyle(prop) {
        return parseInt(
            document.defaultView.getComputedStyle(document.body, null),
            10
        );
    }

    return document.body.offsetHeight +
        getComputedBodyStyle('marginTop') +
        getComputedBodyStyle('marginBottom');
} 
```

这是 IE9 版本，对于很长的 IE8 版本，请参阅此[答案](https://stackoverflow.com/questions/22402895/why-does-document-body-offsetheight-document-body-bottommargin-not-equal-docum)。

如果您确实溢出了正文并且您无法修复您的代码来阻止它，那么使用`offsetHeight`或的`scrollHeight`属性`document.documentElement`是您的最佳选择。两者都有优点和缺点，最好只是测试两者，看看哪个适合你。

## 留言

[postMessage](https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage) API 提供了一种在 iFrame 与其父级之间进行通信的简单方法。

要将消息发送到父页面，您可以按如下方式调用它。

```
parent.postMessage('Hello parent','http://origin-domain.com'); 
```

在另一个方向，我们可以使用以下代码将消息发送到 iFrame。

```
var iframe = document.querySelector('iframe');
iframe.contentWindow.postMessage('Hello my child', 'http://remote-domain.com:8080'); 
```

要接收消息，请为消息事件创建事件侦听器。

```
function receiveMessage(event)
{
  if (event.origin !== "http://remote-domain.com:8080")
    return;

  console.log(event.data);
}

if ('addEventListener' in window){
    window.addEventListener('message', receiveMessage, false);
} else if ('attachEvent' in window){ //IE
    window.attachEvent('onmessage', receiveMessage); 
```

这些示例使用 origin 属性来限制消息发送到哪里并检查它来自哪里。可以指定`*`允许发送到任何域，并且在某些情况下您可能希望接受来自任何域的消息。但是，如果您这样做，您需要考虑安全隐患并对传入消息实施您自己的检查，以确保它包含您所期望的内容。在这种情况下，iframe 可以将其高度发布到“*”，因为我们可能有多个父域。但是，检查传入消息是否来自 iFrame 是个好主意。

```
function isMessageFromIFrame(event,iframe){
    var
        origin  = event.origin,
        src     = iframe.src;

    if ((''+origin !== 'null') && (origin !== src.substr(0,origin.length))) {
        throw new Error(
            'Unexpect message received from: ' + origin +
            ' for ' + iframe.id + '. Message was: ' + event.data  
        );
    }

    return true;
} 
```

## 突变观察者

更现代的浏览器的另一个进步是[MutationObserver](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)，它允许您观察 DOM 中的变化；因此，现在可以检测可能影响 iFrame 大小的更改，而无需不断地使用 setInterval 进行轮询。

```
function createMutationObserver(){
    var
        target = document.querySelector('body'),

        config = {
            attributes            : true,
            attributeOldValue     : false,
            characterData         : true,
            characterDataOldValue : false,
            childList             : true,
            subtree               : true
        },

        observer = new MutationObserver(function(mutations) {
            parent.postMessage('[iframeResize]'+document.body.offsetHeight,'*');
        });

    log('Setup MutationObserver');
    observer.observe(target, config);
}

var MutationObserver = window.MutationObserver || window.WebKitMutationObserver;

if (MutationObserver){
    createMutationObserver();
} 
```

## 其他问题

其他需要考虑的事情包括，页面上有多个 iFrame，CSS :Checkbox 和 :Hover 事件导致页面调整大小，避免在 iFrame 的 body 和 html 标签中使用 height auto，最后调整窗口大小。

## IFrame 调整器库

我将所有这些都包含在一个简单的无依赖库中，它还提供了一些此处未讨论的额外功能。

[https://github.com/davidjbradshaw/iframe-resizer](https://github.com/davidjbradshaw/iframe-resizer)

这适用于 IE8+。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:33:16.183

您可以尝试使用以下脚本。

```
<script type="text/javascript">
  function iframeLoaded() {
    var iFrameID = document.getElementById('your_frame_id');
    if(iFrameID) {            
        iFrameID.height = "";
        iFrameID.height = iFrameID.contentWindow.document.body.scrollHeight + "px";
   }   
}
</script> 
```

并将 onload 函数添加到您的 iframe 中，例如

```
<iframe onload="iframeLoaded()"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T07:24:34.290

如果你想为 iframe 滚动条试试这个

```
<iframe style="height: 956px;overflow-y:scroll; width: 100%" frameborder="0" id="ampcontentiframe"></iframe> 
```

只需输入“min-height”并添加“overflow-y”道具作为滚动它就会起作用

或者，如果您不想滚动，请尝试

```
<iframe scrolling="no" style="min-height: 956px; width: 100%" frameborder="0" id="ampcontentiframe"></iframe> 
```

# c# - 将用户控件添加到表单

> ID：15471550
> 
> 赞同：38
> 
> 时间：2013-03-18T07:18:40.107
> 
> 标签：c#, winforms, user-controls

我创建了一个带有 TextBox 和两个按钮的用户控件，但我没有创建事件，只是将它们放置到用户控件中。当我想将用户控件添加到我的表单时，它会说：

> 无法移动 Task_control.cs。目标文件夹与源文件夹相同。

我不明白为什么。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-18T07:34:08.107

创建用户控件后，您应该构建项目（`F6`或`Ctrl`++ `Shift`）`B`。

然后 Visual Studio 会自动将控件添加到**Toolbox**。您应该将控件从**工具箱**( `Ctrl`++ `Alt`)拖到`X`窗体中。

如果成功构建项目后，控件不在 Toolbox 上，请确保将**Automatically Populate Toolbox**设置为 true：转到**Tools->Options**，选择**Windows Forms Designer**节点，并将**Automatically Populate Toolbox**设置为**true**。

* * *

您还可以手动将用户控件添加到工具箱（如果未设置“自动填充工具箱”，并且您不想设置它！）。强烈建议您在工具箱上为您的特定用户控件创建一个附加**选项卡**：右键单击工具箱的空白区域并单击**添加选项卡**，然后为新选项卡命名。

现在构建项目，右键单击工具箱上的空白区域（当然，在您已经创建的选项卡中，或在“常规”选项卡中），然后选择**选择项目**：

[![将控件添加到工具箱](../Images/a2a40f305fc6cf31c932f8f060b308a1.png)](https://i.stack.imgur.com/NrpHy.png)

等待几秒钟（或几分钟）让对话框准备就绪，然后单击**浏览**并选择您的程序集。您的所有用户控件现在都在列表中。选择要添加到工具箱的那些，然后单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-12T18:13:48.980

创建用户控件后，您应该从解决方案资源管理器构建项目。单击您的项目名称并单击构建，如果它不起作用重新构建它，请[在此处输入图像描述](https://i.stack.imgur.com/vYFs3.png)

# c++ - 文本文件末尾的项目被读取两次

> ID：15471551
> 
> 赞同：2
> 
> 时间：2013-03-18T07:18:43.913
> 
> 标签：c++, file, loops

文本文件包含格式如下的行：

```
lSdhmhlN   15479   6694.74   O
szUfGnoI   18760   5275.53   n 
```

我逐行读取文件，将其数据放入缓冲区变量中，将这些变量存储在 TopicD 对象中，并将该对象插入二叉搜索树。问题是文件的最后一行被读取了两次，因此创建了两个相同的 TopicD 对象并将其插入到树中。为什么？

这是我的代码：

```
template<class ItemType>
void read( BinarySearchTree<ItemType> & tree )
{
ifstream read( FILE_NAME.c_str() );

if ( read.fail() )
    die( "Error opening the file." );

string strbuff;
double dubbuff;
int intbuff;
char chbuff;

while ( !read.eof() )
{
    read >> strbuff;
    read >> intbuff;
    read >> dubbuff;
    read >> chbuff;
    TopicD buff( strbuff, dubbuff, intbuff, chbuff );
    tree.add(buff);
}

read.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:23:38.450

考虑从那个循环中剪掉一点：

```
while (read >> strbuff >> intbuff >> dubbuff >> chbuff)
    tree.add(TopicD( strbuff, dubbuff, intbuff, chbuff )); 
```

*当你到达*EOF时，永远不要依赖它`.eof()`是真实的。相反，当您在那里尝试再次阅读时，这将是真的。因此，您到达 EOF 后的第一次读取失败，但到那时您已经停止检查错误（顺便说一下，您从未检查过错误），只是盲目地将变量中的所有内容插入到树中。

# c++ - else if 循环 qudry

> ID：15471552
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:18:48.043
> 
> 标签：c++, for-loop, if-statement

我处于项目的第二阶段，我需要将程序扩展为菜单驱动的应用程序，以查询我在 .txt 文件中拥有的数据库。所以，我的麻烦是我不能让我的循环是永久的。它总是在从一个选项初始化到下一个选项时终止。这是我的 int main 代码片段：

```
 int main ()
{
        char Q,q;
        char S,s;
        char task;
        string pathname;
        string z;
        int count=0;
        cout << "Welcome to Jason Rodriguez's Library Database." << endl;
        cout << "Please enter the name of the backup file: ";
        cin >> pathname;
        ifstream inFile(pathname.c_str());
        while(!inFile.eof())
        {
            getline(inFile,z);
            count++;
        }

    while (task != 'Q' || task != 'q') {

        cout << count << " records loaded successfully." << endl;
        cout << "Enter Q to (Q)uit, Search (A)uthor, Search (T)itle, (S)how All: ";
        cin >> task;
        if ((task == 'Q')||(task =='q'))
        {
            cout << "Program will now terminate";
            break;
        }
        else if ((task == 'S')||(task =='s'))
        {
            showAll (loadData (pathname));
            cout << endl;
            cout << "Enter Q to (Q)uit, Search (A)uthor, Search (T)itle, (S)how All: ";
            cin >> task;
        }

    }
} 
```

我需要在这两个之上的循环中再添加两个选项，但我认为我应该首先让前两个正常工作。之后其他两个应该是即插即用。基本上我想做的是说如果用户输入 Q 或 q，则终止程序。否则，如果用户点击 S 或 s，则激活 showall 功能，然后返回原始查询。但它不起作用。欢迎并感谢您提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:23:00.397

**菜单几乎总是需要循环**——*尤其是*那些需要用户输入正确选择输入的菜单。在这种情况下，最适用的是 while 循环——但本质上，可以使用任何其他循环变体。

更新：

```
int main ()
{
    char task;//this is the only char needed. Your other chars were redundant
    string pathname;
    string temp;//I changed z to temp to better reflect its purpose
    int count=0;

    cout << "Welcome to Jason Rodriguez's Library Database." << endl;
    cout << "Please enter the name of the backup file: ";
    cin >> pathname;

    ifstream inFile(pathname.c_str());//this is potentially a problem in that you aren't verifying that the pathname is a valid one

    //you did not check to see that your file was open, otherwise there is no way to tell that you successfully opened the file
    if (inFile.is_open()) {
        //while(!inFile.eof()) is a character by character read and comparison
        //made your life easier by shortening it down to this - which ensures
        //that a line is read. (Much faster and more readable)
        while(getline(inFile,temp)) 
        {
            count++;
        }
        inFile.close();//always close a file after you've used it

        //At this point the entire file has been read. So, this is where this message SHOULD be 
        cout << count << " records loaded successfully." << endl;
    }
    else {
        //if there was an error opening the file (i.e. wrong path, or it simply does not exist), this will be displayed
        cout << "There was a problem opening your file" << endl;
        exit(0);//and the program will terminate
    }

    while (task != 'Q' || task != 'q') {
        cout << "Enter Q to (Q)uit, Search (A)uthor, Search (T)itle, (S)how All: ";
        cin >> task;
        if ((task == 'Q')||(task =='q'))
        {
            cout << "Program will now terminate";
            break;
        }
        else if ((task == 'S')||(task =='s'))
        {
            string author;
            //showAll (loadData (pathname));
            cout << endl;
            cout << "Search an Author" << endl;
            cin >> author;//get the author name to search from the user

            //write code to search an author here
        }
    }
} 
```

您发布的代码存在许多问题，为简洁起见，我将放弃这些问题。因此，请注意以下事项：

**您的代码每个选项都打印相同的消息（退出除外）。**当然，它似乎不起作用。每个选项都是不同的任务。打印每个任务的作用（类似于我所做的）。

1.  您希望在文件中搜索作者，但尚未存储。寻找一种可以让你的导师满意的存储方式。

2.  `switch`考虑到您的代码越来越复杂，在这种情况下使用它是您的理想选择。

3.  尝试将每个任务分解为函数，并调用它们以使您的主函数可读。事实上，让你的 main 函数尽可能小是一种很好的编程习惯。

而且，正如 juanchopanza 非常正确地指出的那样：C++ 存在一些基本问题。尝试做更多的练习，并从一本好的 C++ 书中做更多的例子。

# c# - Windows Phone - 裁剪位图图像

> ID：15471554
> 
> 赞同：1
> 
> 时间：2013-03-18T07:18:58.410
> 
> 标签：c#, windows-phone-8, windows-phone, crop, bitmapimage

我有 BitmapImage，我需要将其裁剪为 200x200 大小的矩形。矩形应包含源 BitmapImage 的中心。我创建的唯一解决方案 CroppedBitmap 不适用于 Windows Phone。

另一种解决方案可能是创建一个 WriteableBitmap 并遍历每个像素，但我没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T10:17:46.417

您可以使用[WriteableBitmapExtension 库](http://writeablebitmapex.codeplex.com/)并使用非常容易使用的 Crop 函数。

以下代码加载内容文件“img.jpg”，然后对其进行裁剪，只保留中心 200x200 像素。

```
WriteableBitmap wb = new WriteableBitmap(1, 1);
wb = wb.FromContent("img.jpg");
wb = wb.Crop((wb.PixelWidth / 2) - 100, (wb.PixelHeight / 2) - 100, 200, 200); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:40:15.877

我记得我在这里看到过类似问题的解决方案：

[将图像拆分为几块 silverlight windows phone](https://stackoverflow.com/questions/11108661/split-an-image-into-several-pieces-silverlight-windows-phone)

# node.js - NODEJS 进程信息

> ID：15471555
> 
> 赞同：51
> 
> 时间：2013-03-18T07:19:02.400
> 
> 标签：node.js, process

如何在 Node.JS 程序中获取带有`PID`（进程 ID）的进程名称，平台包括 Mac、Windows、Linux。

它有一些节点模块来做吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-18T10:33:34.550

是的，内置/核心模块`process`这样做：

所以，就说[`var process = require('process');`](http://nodejs.org/api/process.html#process_process_pid)Then

获取 PID（进程 ID）：

```
if (process.pid) {
  console.log('This process is your pid ' + process.pid);
} 
```

获取平台信息：

```
console.log('This platform is ' + process.platform); 
```

**注意：**您只能了解子进程或父进程的PID。

* * *

根据您的要求更新。（已测试`WINDOWS`）

```
var exec = require('child_process').exec;
var yourPID = '1444';

exec('tasklist', function(err, stdout, stderr) { 
    var lines = stdout.toString().split('\n');
    var results = new Array();
    lines.forEach(function(line) {
        var parts = line.split('=');
        parts.forEach(function(items){
        if(items.toString().indexOf(yourPID) > -1){
        console.log(items.toString().substring(0, items.toString().indexOf(yourPID)));
         }
        }) 
    });
}); 
```

在`Linux`你可以尝试类似的东西：

```
var spawn = require('child_process').spawn,
    cmdd = spawn('your_command'); //something like: 'man ps'

cmdd.stdout.on('data', function (data) {
  console.log('' + data);
});
cmdd.stderr.setEncoding('utf8');
cmdd.stderr.on('data', function (data) {
  if (/^execvp\(\)/.test(data)) {
    console.log('Failed to start child process.');
  }
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-15T18:04:18.940

在 Ubuntu Linux 上，我尝试过

```
var process = require('process'); but it gave error. 
```

我尝试过不导入任何有效的流程模块

```
console.log('This process is your pid ' + process.pid); 
```

我注意到的另一件事是我们可以使用

```
process.title = 'node-chat' 
```

使用以下命令检查 bash shell 中的 nodejs 进程

```
ps -aux | grep node-chat 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-06-13T17:03:17.523

cf官方文档 [https://nodejs.org/dist/latest-v10.x/docs/api/process.html#process_process_pid](https://nodejs.org/dist/latest-v10.x/docs/api/process.html#process_process_pid)

不再需要require **。**好的样本是：

```
 console.log(`This process is pid ${process.pid}`); 
```

# c# - Visual Studio 2008 版本问题

> ID：15471558
> 
> 赞同：0
> 
> 时间：2013-03-18T07:19:03.333
> 
> 标签：c#, visual-studio-2008

我目前已经安装了 Visual Studio 2008，版本 9.0.30729.4462，我遇到了一些我认为都相关的相当奇怪的问题。

**1.**在构建我的解决方案时，我在调试输出中得到了 5-10 个这样的输出：

`Project file contains ToolsVersion="4.0", which is not supported by this version of MSBuild. Treating the project as if it had ToolsVersion="3.5".`

项目的所有 .csproj 文件都包含`toolsversion="3.5"`.

**2.**尝试访问项目属性中的安全选项卡时，出现以下错误：

`Visual Studio was unable to determine the Code Access Security (CAS) permissions that are applicable to your project. The most likely cause is that your project references a strongly-named assembly that defines custom permissions, but that is not properly installed in the global assembly cache (GAC). To correct this, try the following:`

`1\. Ensure that any custom permissions defining assemblies referenced by your project have been properly installed to the GAC. If any of these assemblies have been rebuilt or have had their version numbers modified, you must install the new assemblies in the GAC.`

`2\. Restart Visual Studio.`

在这里寻找解决方案表明这是一个典型的工具版本 4.0 问题；但是，就像我说的，我所有的项目都在 csproj 文件中设置了 3.5。

我应该从哪里开始故障排除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:13:13.820

这两个问题都与 toolsversion="4.0" 问题有关。我的解决方案中集成了很多项目，因此我在解决方案目录中搜索了“toolsversion=”。事实证明，我的一些 .csproj 项目文件确实设置为 4.0。一旦所有项目都设置为 3.5，安全选项卡又回来了，编译时我没有收到任何错误。

# android - 如何打开由 Eclipse(android) 生成的 .db 文件形式 DDMS--> 文件资源管理器--> 数据---> 数据--> 包名--> 数据库？

> ID：15471559
> 
> 赞同：7
> 
> 时间：2013-03-18T07:19:12.060
> 
> 标签：android, eclipse, sqlite, cordova

.db 文件是从 eclipse(android) form DDMS-->File explorer-->data--->data-->package name-->database 生成的。然后我选择数据库并单击“从设备推送文件”，并将其保存为 .db 文件。如何查看这个数据库？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T07:24:40.133

如果我理解正确，您需要查看从模拟器内部存储中提取的 .db 文件。如果是这种情况，请使用此

[http://sourceforge.net/projects/sqlitebrowser/](http://sourceforge.net/projects/sqlitebrowser/)

查看数据库。

您还可以使用 Firefox 扩展

[https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)

编辑：用于在线工具： [https ://sqliteonline.com/](https://sqliteonline.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:31:15.757

浏览数据库的一种方法是使用 questoid sqlite manager。

# 1\. 从此[链接](http://www.4shared.com/file/usHZdRdz/comquestoidsqlitemanager_100.html)下载 questoid manager 。

# 2\. 把这个文件放到你的 eclipse --> dropins 中。

# 3\. 重启你的eclipse。

# 4\. 现在转到您的文件资源管理器并单击您的数据库。您可以在右上角找到启用的蓝色数据库图标。

# 5\. 双击图标，你可以看到你在数据库中插入的字段/表/

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T09:27:35.640

下载这个 Sqlite 管理器，它是最容易使用的 [Sqlite 管理器](http://sourceforge.net/projects/asqlitemanager/)

并将您获取的文件拖放到其正在运行的实例上

**此Sqlite 管理器**的唯一缺点是，如果您运行一些其中包含语法错误的 SQL 语句，它会停止响应。

所以我并排使用 Firefox 插件，你可以在[FireFox 插件中找到](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-20T04:39:58.027

根据您的平台，您可以使用：来自终端的**sqlite3 file_name.db 。****.tables**将列出表格，**.schema**是完整布局。SQLite 命令，例如：**select * from table_name;** 这样将打印出全部内容。输入：“.exit”退出。无需下载 GUI 应用程序。如果您希望它执行单个命令，请使用分号。体面的 SQLite 使用教程[http://www.thegeekstuff.com/2012/09/sqlite-command-examples/](http://www.thegeekstuff.com/2012/09/sqlite-command-examples/)

# php - jQuery Ajax 没有捕获数据

> ID：15471562
> 
> 赞同：0
> 
> 时间：2013-03-18T07:19:29.083
> 
> 标签：php, jquery, html, ajax

添加更多posts.php：

```
ob_start();
//SOME HTML CONTENTS!
$contents = ob_get_clean();

if(!empty($contents)){
    echo $contents;
}else{
    echo 'end';
} 
```

Index.php 中的 jQuery：

```
$(document).ready(function(){
    $('#get-more').click(function(){
        $('#get-more').hide();      
        $('#loading-img').slideDown();
        var post_id = $('div.more').attr('id');
        if(!$("#empty-div").hasClass('ended')){
        $.post("add_more_posts.php", {'post_id': post_id} , function(data){
            if(data == 'end'){
                $("#empty-div").addClass('ended');
                $('.more').remove();
                $('#get-more').hide();
                $('#loading-img').fadeOut();
                $('div#AddPosts').append('Finished Loading!');
            }else{
                if(!$("#empty-div").hasClass('ended')){
                    $('.more').remove();
                    $('#loading-img').remove();
                    $('div#AddPosts').append(data);
                    $('#get-more').show();
                }
            }
        });
    }
    });
}); 
```

问题是它没有结束。它没有捕获数据 == 'end'，而是将 'end' 附加到我的 index.php 中的 div 中。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:49:22.403

```
$.post("add_more_posts.php", {post_id: post_id} , function(data){ 
```

# java - 如何使用 apache poi 将数据写入现有的 excel

> ID：15471565
> 
> 赞同：4
> 
> 时间：2013-03-18T07:19:42.777
> 
> 标签：java, excel, apache-poi

我的 excel 表包含 5 行和 2 列。我想在该 excel 中再添加一列。但是当我使用 WorkbookFactory 时，它显示错误。我导入了 poi-3.8.jar 和 poi-ooxml-3.5-beta5.jar .它在线程“main”java.lang.Error中给出错误异常：未解决的编译问题：无法解决WorkbookFactory。请帮我做什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T09:43:45.023

```
try this

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Iterator;

import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class ExcelExample {

    public static void main(String[] args) throws IOException {

        try {

            FileInputStream file = new FileInputStream(new File("C:\\test.xls"));

            HSSFWorkbook workbook = new HSSFWorkbook(file);
            HSSFSheet sheet = workbook.getSheetAt(0);
            Cell cell = null;

            //Update the value of cell
            cell = sheet.getRow(1).getCell(2);
            cell.setCellValue(cell.getNumericCellValue() * 2);
            cell = sheet.getRow(2).getCell(2);
            cell.setCellValue(cell.getNumericCellValue() * 2);
            Row row = sheet.getRow(0);
            row.createCell(3).setCellValue("Value 2");

            file.close();

            FileOutputStream outFile =new FileOutputStream(new File("C:\\update.xls"));
            workbook.write(outFile);
            outFile.close();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T10:23:35.727

有关详细信息，请参阅[Apache POI 组件和依赖项页面](http://poi.apache.org/overview.html#components)。您缺少一些罐子，因此出现编译错误。

如果您想同时使用 HSSF (.xls) 和 XSSF (.xlsx)，我猜您在谈论 WorkbookFactory 时会这样做，您需要同时包含主 POI jar 和 POI-OOXML jar，加上他们所有的[依赖](http://poi.apache.org/overview.html#components)。使用类路径中的这些 jar，您将被排序

此外，您可能想考虑使用 Apache Maven 或 Apache Ivy 之类的东西来为您处理依赖项，这样您就可以避免像这样的丢失 jar 问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T07:28:19.030

你在使用 Maven 吗？

如果是，请参阅以下链接中的最后一条评论：

[http://apache-poi.1045710.n5.nabble.com/Where-is-WorkbookFactory-td2307412.html](http://apache-poi.1045710.n5.nabble.com/Where-is-WorkbookFactory-td2307412.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-26T20:22:52.623

我正在上传我的程序供您参考。经过一番努力，我已经克服了这个问题。罐子详细信息：dom4j-1.6.1.jar、poi-3.9.jar、poi-ooxml-3.9.jar、poi-ooxml-schemas-3.11.jar、xmlbeans-2.6.0.jar 确保你至少有上面提到的或新的。我包括了进口的细节，这样你就不需要敲你的脑袋了。希望你发现它有用

```
 ***Pojo: Employee.java***

        public class Employee {
         private int id;
         private String firstName;
         private String lastName;

         public Employee(){}

        public Employee(int id, String firstName, String lastName) {
            super();
            this.id = id;
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public String getFirstName() {
            return firstName;
        }
        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }
        public String getLastName() {
            return lastName;
        }
        public void setLastName(String lastName) {
            this.lastName = lastName;
        }
        public int getId() {
            return id;
        }
        public void setId(int id) {
            this.id = id;
        }
        }

***Write Class: ApachePOIExcelWrite.java***

    import java.io.File;
    import java.io.FileOutputStream;
    import java.util.Map;
    import java.util.Set;
    import java.util.TreeMap;        
    import org.apache.poi.ss.usermodel.Cell;
    import org.apache.poi.ss.usermodel.Row;
    import org.apache.poi.xssf.usermodel.XSSFSheet;
    import org.apache.poi.xssf.usermodel.XSSFWorkbook;

    public class ApachePOIExcelWrite {
                public static void main(String[] args) 
                {
                    //Blank workbook
                    XSSFWorkbook workbook = new XSSFWorkbook(); 

                    //Create a blank sheet
                    XSSFSheet sheet = workbook.createSheet("Employee Data");

                    //This data needs to be written (Object[])
                    Map<String, Object[]> data = new TreeMap<String, Object[]>();
                    data.put("1", new Object[] {"ID", "NAME", "LASTNAME"});
                    data.put("2", new Object[] {1, "Amit", "Shukla"});
                    data.put("3", new Object[] {2, "Lokesh", "Gupta"});
                    data.put("4", new Object[] {3, "John", "Adwards"});
                    data.put("5", new Object[] {4, "Brian", "Schultz"});

                    //Iterate over data and write to sheet
                    Set<String> keyset = data.keySet();
                    int rownum = 0;
                    for (String key : keyset)
                    {
                        Row row = sheet.createRow(rownum++);
                        Object [] objArr = data.get(key);
                        int cellnum = 0;
                        for (Object obj : objArr)
                        {
                           Cell cell = row.createCell(cellnum++);
                           if(obj instanceof String)
                                cell.setCellValue((String)obj);
                            else if(obj instanceof Integer)
                                cell.setCellValue((Integer)obj);
                        }
                    }
                    try
                    {
                        //Write the workbook in file system
                        FileOutputStream out = new FileOutputStream(new File("/home/ohelig/eclipse/New Microsoft Office Excel Worksheet.xlsx"));
                        workbook.write(out);
                        out.close();
                        System.out.println("Write Successfully.");
                    } 
                    catch (Exception e) 
                    {
                        e.printStackTrace();
                    }
                }
    }

***Update Class: UpdateExcel.java***

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class UpdateExcel {

    public static void main(String[] args) {
        XSSFWorkbook workbook=null;
        XSSFSheet sheet;
        try{
        FileInputStream file = new FileInputStream(new File("/home/ohelig/eclipse/New Excel Worksheet.xlsx"));

          //Create Workbook instance holding reference to .xlsx file
          workbook = new XSSFWorkbook(file);

          //Get first/desired sheet from the workbook
          //Most of people make mistake by making new sheet by looking in tutorial
          sheet = workbook.getSheetAt(workbook.getActiveSheetIndex());

          Employee ess = new Employee(6,"Yanish","Pradhananga");
          //Get the count in sheet
          int rowCount = sheet.getLastRowNum()+1;
          Row empRow = sheet.createRow(rowCount);
          System.out.println();
          Cell c1 = empRow.createCell(0);
          c1.setCellValue(ess.getId());
          Cell c2 = empRow.createCell(1);
          c2.setCellValue(ess.getFirstName());
          Cell c3 = empRow.createCell(2);
          c3.setCellValue(ess.getLastName());
          }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
         try
          {
              //Write the workbook in file system
              FileOutputStream out = new FileOutputStream(new 
                  File("/home/ohelig/eclipse/New Excel Worksheet.xlsx"));
              workbook.write(out);
              out.close();
              System.out.println("Update Successfully");
          } 
          catch (Exception e) 
          {
              e.printStackTrace();
          }
      }
} 
```

# php - 同时使用 AJAX 上传文件和正常提交

> ID：15471568
> 
> 赞同：0
> 
> 时间：2013-03-18T07:20:11.477
> 
> 标签：php, file-upload, upload, loading, ajax-upload

我创建了一个文件上传表单。我想上传数据，同时上传一个 ajax 调用，用 BOOTMETRO 主题提供的加载动画替换该页面中的 div。文件上传和 Ajax 分别运行良好。！但我想要一键两下。

所以当我单次按下提交按钮时：1）AJAX应该替换我页面中的划分2）然后文件上传应该正常开始。

**我的 HTML 表单是：**

```
<input name="file" type="file" class="btn btn-info" id="file" /><br/>

<button type="submit" value="Submit" name="submit" onclick="submit()">Submit File</button>
 </form> 
```

**AJAX 部分**

```
function submit()
    {
var xmlhttp;

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }

    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
          document.getElementById("fetchLoading").innerHTML=xmlhttp.responseText;
        }
      }

    xmlhttp.open("GET","loading.php" ,true);
            xmlhttp.send();
    xmlhttp.open("GET","upload_process.pgp",true);
    xmlhttp.send();
    } 
```

请帮忙！或建议一种技术。（我正在使用引导地铁，我想将加载从 ajax 加载到我的文件中的 div 直到文件上传并且页面处于等待模式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:36:52.300

您需要先发送 AJAX 调用，然后在收到响应时以编程方式触发文件上传。

所以你的提交按钮就像：

`<button type="submit" value="Submit" name="submit" onclick="return submit()">Submit File</button>`

您的`submit`函数应该返回`false`以防止表单提交。然后在您的 AJAX 响应中提交表单。

`document.myform.submit();`

替换`myform`为您的表单名称。

# android - 在 Android 4.0、4.1、4.2 上，如何以编程方式打开 android 应用程序或转到设置->更多...->通过代码打开便携式 Wi-Fi 热点？

> ID：15471569
> 
> 赞同：0
> 
> 时间：2013-03-18T07:20:16.850
> 
> 标签：android, wifi, settings

唯一可能的解决方案是：

```
 Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS); 
    //Is there any value for entering hotsopt?

    mContext.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:04:38.837

你有没有尝试过：

```
startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS)); 
```

请注意（`ACTION_WIRELESS_SETTINGS` [文档](http://developer.android.com/reference/android/provider/Settings.html#ACTION_WIRELESS_SETTINGS)）：

> 活动操作：显示设置以允许配置无线控制，例如 Wi-Fi、蓝牙和移动网络。
> 
> 在某些情况下，匹配的 Activity 可能不存在，因此请务必防范这种情况。

# ios - 我的应用程序上的 Facebook 分享按钮 - 我必须使用 facebook SDK 吗？

> ID：15471579
> 
> 赞同：1
> 
> 时间：2013-03-18T07:21:08.077
> 
> 标签：ios, objective-c, facebook, ios5, ios6

我想在我的应用程序上实现最简单的分享此按钮，用户可以点击并分享他正在使用他的 Facebook 墙上的应用程序。我是否必须为此将 facebook sdk 集成到我的应用程序中？我想在 iOS 6 及更高版本中有一个简单的应用程序可以做到这一点，但我的应用程序支持 iOS 5 及更高版本。

使用 HTML 片段或类似内容的后果是什么：

```
https://www.facebook.com/dialog/feed?
  app_id=458358780877780&
  link=https://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=https://mighty-lowlands-6381.herokuapp.com/ 
```

里面一个`UIWebview`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:45:20.650

如果您不想使用 facebook sdk，那么您可以使用 facebook graph API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:49:45.260

在 iOS 5 上使用[Facebook API](https://developers.facebook.com/ios/) for iOS6 使用[SLRequest API](http://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html#//apple_ref/doc/uid/TP40012233)。

我认为这是最简单且麻烦较少的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T08:06:27.790

如果要支持 iOS5 及以上版本，则需要实现 Facebook SDK 以提供 Facebook Share 功能。

谢谢。

# sql - 在 Jasper Reports 的 select 语句中使用 convert

> ID：15471581
> 
> 赞同：1
> 
> 时间：2013-03-18T07:21:23.767
> 
> 标签：sql, oracle11g, jasper-reports, ireport

我正在尝试从数据库中检索一些数据（字符串），并对它们执行一些需要将它们转换为`DateTime`.

不过，首先，我想知道是否可以`String`从数据库中提取类型的数据，将它们转换为`DateTime`，然后在报告中使用它们。

不幸的是，我无法更改数据库，我相信这会很有帮助。

所以我查找了转换命令，并想出了这个：

```
(convert(datetime[10], fld7, 101)) 
```

此处使用的（作为 DTEEEFFEC）：

```
SELECT fld2 as EMPNAME, fld5 as EMPCLASSFROM, 
       fld6 as EMPCLASSTO, (convert(datetime[10], fld7, 101)) as DTEEFFEC,
       (b.LNAME  || ', ' || b.FNAME  || ' ' || b.MNAME) AS HROFF 
FROM dbase.table1 
    LEFT JOIN dbase.person_info ON $P{hrStoreOp}= b.ID_PERSONAL
WHERE compname = $P{COMPNAME} order by fld7,fld2 asc 
```

但是，它返回一个错误：*缺少右括号*，或者，如果我删除括号和 10，则此错误：*“DATETIME”：无效标识符*

编辑：很抱歉我把它漏掉了，但是使用 Oracle 数据库有什么意义吗？我认为他们都使用类似的 SQL 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:43:28.527

尝试这个

```
 CONVERT(VARCHAR(10),GETDATE(),110) 
```

[http://www.w3schools.com/sql/func_convert.asp](http://www.w3schools.com/sql/func_convert.asp)

```
 SELECT fld2 as EMPNAME, fld5 as EMPCLASSFROM, 
   fld6 as EMPCLASSTO, CONVERT(VARCHAR(10),fld7, 101) as DTEEFFEC,
   (b.LNAME  || ', ' || b.FNAME  || ' ' || b.MNAME) AS HROFF 
 FROM dbase.table1 
   LEFT JOIN dbase.person_info ON $P{hrStoreOp}= b.ID_PERSONAL
 WHERE compname = $P{COMPNAME} order by fld7,fld2 asc 
```

# android - 在android模拟器中执行呼出/呼入广播接收器

> ID：15471584
> 
> 赞同：0
> 
> 时间：2013-03-18T07:21:46.680
> 
> 标签：android, android-emulator, broadcastreceiver, terminal-emulator

我已经在 Android 中编写了一个简单的 BroadcastReceiver 应用程序来监控传入和传出的呼叫...我想通过模拟器测试 BroadcastReceiver ...谁能告诉我如何在模拟器中执行 BroacastReceiver？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:42:28.920

您可以在 Eclipse 中使用 Emulator Control View。此用户界面允许您向模拟器发送数据以模拟接收短信或电话。在模拟器中运行应用程序，然后转到 Window -> Show View -> Other -> Android -> Emulator Control。输入来电号码，然后为通话选择语音选项，为短信选择短信选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:45:56.157

模拟器中没有像设备一样的电源按钮，所以

*要停止模拟器实例，只需关闭模拟器的窗口。*

并且**从 Eclipse 的 AVD 管理器开始**`Start/Restart`，您的带有 BOOT_COMPLETE 操作的 BroadcastReceiver*肯定*会被调用

 ***你也可以用另一种方式启动 AVD，从`CMD` *转到 AndroidSDK 的工具*并给出这个命令`E:\android-sdk-windows\tools>emulator -avd AVDNAMEHERE`

要从**CMD 发送广播，**您可以使用此命令。

> adb shell am 广播 -a android.intent.action.BOOT_COMPLETED -c android.intent.category.HOME -n package_name/class_name

* * *

阅读有关 Android 模拟器的更多信息：[Android 模拟器](http://developer.android.com/tools/help/emulator.html)和[使用模拟器](http://developer.android.com/tools/devices/emulator.html)***

# c# - 修改列表视图中的项目后自动聚焦

> ID：15471585
> 
> 赞同：0
> 
> 时间：2013-03-18T07:21:51.390
> 
> 标签：c#

`list-view`我的Windows 窗体上有一个，大约有。里面有200件。我的问题是，如果我发现某些项目在拼写或其他方面有错误。因此，当我选择该项目然后修改回来时，`list-view`我想专注于该特定项目。

现在我正在这样做：-

```
 listView1.Items[this.listView1.Items.Count - 1].EnsureVisible();
 //i know that this code is for focusing on the very last item. 
```

请帮我。

谢谢你。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:30:12.263

尝试

```
listView1.SelectedItems[0].EnsureVisible(); 
```

如果要将第一个选定项目带到视图中。

或者，如果您想*选择*特定项目：

```
listView1.Items[i].Selected = true; 
```

或者

```
listView1.SelectedItems.Clear();
listView1.SelectedIndices.Add(i); 
```

这取决于到底要做什么。

编辑：

如果要在修改 item 后聚焦列表视图，可以这样写：

```
void btnModify_Click(object sender, EventArgs e)
{
    // change the item...

    // focus the list view
    listView1.Select();
} 
```

# ruby-on-rails - Rspec极慢

> ID：15471586
> 
> 赞同：6
> 
> 时间：2013-03-18T07:21:53.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec-rails, spork, database-cleaner

即使使用 guard 和 spork，我的 rspec 测试似乎也运行得非常缓慢。

```
Finished in 5.36 seconds
13 examples, 2 failures 
```

我知道我可以做几件事来优化我的测试并减少与数据库的交互，但我强烈怀疑 spec_helper 的设置不正确。我在使用 mongoid 的 Rails 3.2.11 上。每次运行后都会清理数据库清理器。

```
spec_helper.rb

require 'rubygems'
require 'spork'
Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rspec'

  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  DatabaseCleaner[:mongoid].strategy = :truncation

  RSpec.configure do |config|
    config.infer_base_class_for_anonymous_controllers = false
    config.order = "random"
    config.filter_run focus: true
    config.filter_run_excluding :remove => true
    config.run_all_when_everything_filtered = true
    config.include Mongoid::Matchers
    config.include Capybara::DSL
    ActiveSupport::Dependencies.clear
  end
end

Spork.each_run do
  Fabrication.clear_definitions
  RSpec.configure do |config|
    config.before(:each) do
      DatabaseCleaner.clean
    end
  end
end 
```

**更新：**问题出在我的一项测试上。花了3秒钟。请检查@Sam Peacey 对我用来获得以下结果的命令的回答

```
Dynamic Model should destroy collection when related source is destroyed
    2.46 seconds ./spec/models/dynamic_model_spec.rb:10
Dynamic Model Validations should validate uniqueness
    0.66357 seconds ./spec/models/dynamic_model_spec.rb:69 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T08:28:26.937

`-p`您可以通过运行带有/`--profile`标志的 rspec 来分析您的规范：

```
rspec spec -p [-drb, and whatever else] 
```

这将列出 10 个最慢的示例及其执行时间。您可以通过为 -p 标志提供可选计数来更改默认值 10。使用更多信息`rspec --help`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-02T05:46:30.703

在我的情况下，问题在于在`development`ENV 中运行的 RSpec，而不是在`test`. `ENV['RAILS_ENV'] ||= 'test'`我通过添加作为**第一行**来修复它`spec_helper.rb`- 否则它不起作用。

此外，我必须推荐非常有用的 gem 来分析代码 - [test-prof](https://test-prof.evilmartians.io/#/getting_started)

# jboss7.x - JBoss7 Web SSO（非集群）

> ID：15471591
> 
> 赞同：0
> 
> 时间：2013-03-18T07:22:08.557
> 
> 标签：jboss7.x, single-sign-on

我正在尝试在 JBoss7 中配置单点登录。

Standalone.xml 中的安全域：

```
<security-domain name="my_auth">
   <authentication>
      <login-module code="Database" flag="required">
         <module-option name="dsJndiName" value="java:/comp/env/myDS"/>
         <module-option name="principalsQuery" 
            value="select password from usertable where login_id=?"/>
         <module-option name="rolesQuery" 
            value="select user_role from usertable where login_id=?"/>
         <module-option name="hashAlgorithm" value="MD5"/>
         <module-option name="hashEncoding" value="hex"/>
       </login-module>
   </authentication>
</security-domain> 
```

Standalone.xml 中的虚拟服务器

```
<virtual-server name="default-host" enable-welcome-root="true">
   <alias name="localhost"/>
   <sso/>
</virtual-server> 
```

我的 webapp1 和 webapp2 的 jboss-web.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<jboss-web>
  <security-domain>my_auth</security-domain>
</jboss-web> 
```

配置后可以正常使用。但它有一个小问题：

启动服务器并第一次登录 webapp1 或 webapp2 时，另一个 webapp 没有登录。我从第一个 webapp 注销，然后再次登录，它工作正常。

我尝试将属性 reauthenticate="false" 添加到 ，仍然有同样的问题。

我不知道这个问题，任何人都可以有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T10:21:39.067

我认为您还必须将 SSO Valve 添加到您的 jboss-web.xml 中。

以下对我有用（JBoss 7.1.1）

独立的.xml

```
<security-domain name="my_auth">
   <authentication>
      <login-module code="Database" flag="required">
         <module-option name="dsJndiName" value="java:/comp/env/myDS"/>
         <module-option name="principalsQuery" 
            value="select password from usertable where login_id=?"/>
         <module-option name="rolesQuery" 
            value="select user_role from usertable where login_id=?"/>
         <module-option name="hashAlgorithm" value="MD5"/>
         <module-option name="hashEncoding" value="hex"/>
       </login-module>
   </authentication>
 </security-domain>

 ...
  <virtual-server name="default-host" enable-welcome-root="false">
      ...
      <sso reauthenticate="false"/>
  </virtual-server> 
```

jboss-web.xml：

```
<jboss-web>

    <security-domain flushOnSessionInvalidation="true">java:/jaas/my_auth</security-domain>
    <valve>
        <class-name>org.apache.catalina.authenticator.SingleSignOn</class-name>
    </valve>

</jboss-web> 
```

# php - 无法从 Cron 选项卡运行控制台命令

> ID：15471592
> 
> 赞同：0
> 
> 时间：2013-03-18T07:22:09.390
> 
> 标签：php, yii, crontab

我写了一个`ConsoleCommand`从 Windows 命令提示符和 linux 终端运行的很棒的程序。我的问题是，当我在 cron 选项卡中添加此命令时，执行时出现以下错误。

此脚本必须从命令行运行。

可能是什么问题呢 ？

干得好：

```
class ReportGeneratorCommand extends CConsoleCommand {
    public function getHelp(){
        echo 'This command genearates Periodic reports'."\n\n";
        return;
    }
    public function run($args){
        echo "\n Hello world! \n";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:08:10.747

我曾经从 cron 运行命令

```
php /home/pathtomyapp/console.php myCommand 
```

现在我将其修改为

```
/usr/local/bin/php /home/pathtomyapp/console.php myCommand 
```

做到了！

# java - Android 应用程序中的 Java 错误

> ID：15471594
> 
> 赞同：-3
> 
> 时间：2013-03-18T07:22:10.983
> 
> 标签：java, android, marker, proximity

我正在尝试在`addProximityAlert`单击信息窗口时实现

```
googleMap.setOnInfoWindowClickListener(
            new OnInfoWindowClickListener(){
                public void onInfoWindowClick(Marker marker) {

    public void addProximityAlert(double latitude, double longitude){

             LatLng clickedMarkerLatLng = marker.getPosition();
                    double lat =  clickedMarkerLatLng.latitude;
                    double long1 =  clickedMarkerLatLng.longitude;

                Log.e("hello", "Output=" + lat + long1);

                   LocationManager lm;
             //   double lat=123,long1=34;    //Defining Latitude & Longitude
                  float radius=30;                         //Defining Radius
            Intent intent = new Intent(PROX_ALERT_INTENT);
            PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
            locationManager.addProximityAlert(
                lat, // the latitude of the central point of the alert region
                long1, // the longitude of the central point of the alert region
                POINT_RADIUS, // the radius of the central point of the alert region, in meters
                PROX_ALERT_EXPIRATION, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration
                proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected
           );
           IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT); 
           registerReceiver(new ProximityIntentReceiver(), filter);
        }
     }

}); 
```

这有“Java 错误”，我不确定如何修复它们。显然，`public void addProximityAlert(double latitude, double longitude){`括号和逗号不是必需的，尽管它们是必需的。有人可以帮忙吗？

编辑：好的，所以我已经实现了下面的一些答案，但我仍然遇到问题。类型的`getBroadcast`方法未定义`InfoWindowClickListener`。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:24:46.423

您有两个合并的方法声明：

```
public void onInfoWindowClick(Marker marker) {

public void addProximityAlert(double latitude, double longitude){ 
```

不确定您的意图是什么，但您需要`onInfoWindowClick(Marker marker)`在开始声明之前关闭声明`addProximityAlert`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:30:35.013

试试这样：

```
googleMap.setOnInfoWindowClickListener(
                new OnInfoWindowClickListener(){
                    public void onInfoWindowClick(Marker marker) {

                        addProximityAlert(latitude,longitude);
         }

    });

 public void addProximityAlert(double latitude, double longitude){

         LatLng clickedMarkerLatLng = marker.getPosition();
                double lat =  clickedMarkerLatLng.latitude;
                double long1 =  clickedMarkerLatLng.longitude;

            Log.e("hello", "Output=" + lat + long1);

               LocationManager lm;
         //   double lat=123,long1=34;    //Defining Latitude & Longitude
              float radius=30;                         //Defining Radius
        Intent intent = new Intent(PROX_ALERT_INTENT);
        PendingIntent proximityIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
        locationManager.addProximityAlert(
            lat, // the latitude of the central point of the alert region
            long1, // the longitude of the central point of the alert region
            POINT_RADIUS, // the radius of the central point of the alert region, in meters
            PROX_ALERT_EXPIRATION, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration
            proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected
       );
       IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT); 
       registerReceiver(new ProximityIntentReceiver(), filter);
    } 
```

# wordpress - 更改分辨率时css不会响应

> ID：15471595
> 
> 赞同：0
> 
> 时间：2013-03-18T07:22:20.063
> 
> 标签：wordpress, responsive-design, media-queries

我正在使用 wordpress 中的自定义主题，我想在从移动设备查看时添加某些格式（最小 320 像素 - 最大 400 像素）

元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

CSS：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {

.logo{margin-left:0px !important}
.content{width:100% !important; }
.mainmenu {background:rgba(0,0,0,0.6) !important; }
.mainmenu li{padding:0 5px !important;}
.mainmenu li a{font-size:18px !important; font-family:'impactregular' !important;     color:#000 !important;}   
}

@media only screen 
and (min-width : 1000px) {
    .logo{float:left;}
} 
```

现在由于某种原因，它检测到 1000px 但不是更小的..不确定我在这里做错了什么。

这是我正在尝试修复的网站的[链接。](http://consultingfox.com/gc/)提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:22:55.957

它会帮助你。 [标准设备的媒体查询。](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

并将其用作您的元标记。

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi" /> 
```

# windows - 比较在 Socket 接收到的内容与 UDP 中的字符串

> ID：15471597
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:22:24.623
> 
> 标签：windows, sockets, winapi, udp, strcmp

我开发了一个 UDP 客户端服务器应用程序。现在我想检查客户端是否发送了一个字符串“EXIT”，服务器接收到这个字符串，将它与“EXIT”字符串进行比较，然后程序退出。但就我而言，服务器无法将接收到的字符串与“EXIT”字符串进行比较。以下是我正在编码的内容：

**客户：**

```
char exitBuffer[]="EXIT";
if (sendto(socketIdentifier,exitBuffer,strlen(exitBuffer) , 0 , (struct sockaddr *) &connectedSocket, sizeof(connectedSocket)) == SOCKET_ERROR)
{
    exit(EXIT_FAILURE);
} 
```

**服务器：**

```
if ((recv_len = recvfrom(socketIdentifier, receiveBuffer, sizeof(receiveBuffer), 0, (struct sockaddr *) &clientSocket, &clientSocketLength)) == SOCKET_ERROR)
{
    MessageBox(NULL,

    exit(EXIT_FAILURE);
}

// Now comparing the contents of receive Buffer
if (receiveBuffer == "EXIT")
{
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:45:32.083

我尝试了 memcmp 并且它做到了:) 现在在服务器端进行的比较如下：

```
if(memcmp(receiveBuffer,"EXIT",5) == 0)
{
    //receiveBuffer is eqaul to "EXIT".
} 
```

# regex - vb6 喜欢 vs vb.net 正则表达式

> ID：15471602
> 
> 赞同：0
> 
> 时间：2013-03-18T07:22:45.147
> 
> 标签：regex, vb.net

我需要将一个 vb6.0 项目转换为 vb.Net 项目。我对.Net 正则表达式不太熟悉。vb.net 中与 vb Like 等价的正则表达式是什么`"*_?#"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:37:01.603

VB6'喜欢'[语法](http://msdn.microsoft.com/en-us/library/swf8kaxw.aspx)：

```
* = zero or more characters
_ = _ character
? = any single character
# = any digit (0-9) 
```

[.NET 正则表达式](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#quantifiers)等效：

```
.* = zero or more characters 
_ = _ character
. = any single character
\d = any single digit 
```

所以你的正则表达式字符串是 '.*_.\d'

**编辑**：替换`[0-9]`为`\d`

# php - 从 Javascript 到 PHP 获取变量值

> ID：15471603
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:22:45.347
> 
> 标签：php, javascript

如果我有这样的javascript：

```
<javascript>
function myvalue()
{
    var a = 3;
}
</javascript> 
```

如何`a`从函数中获取变量的值。因此，我可以在 php 代码中执行操作，如下所示：

```
<?php 
$b = 1; 
$c = $b + a (variabel a from the function);
echo $c; // return 3
?> 
```

非常感谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T07:24:56.653

您可以通过两种方式做到这一点。

1.  将此值分配给隐藏的输入字段并将其发布到该 PHP 页面。
2.  使用 AJAX 发送到 PHP 页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:33:15.570

这是一种通过以下方式执行此操作的方法[`AJAX`](http://en.wikipedia.org/wiki/Ajax_%28programming%29)

**第 1 步** 从这里获取 jQuery 库：[https ://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js)

**第2步**html页面：

```
<html>
<head></head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script>
function myvalue() {
   var a = 3;
$.ajax({
  url: 'ajax_example.php'
  cache: false,
  type: 'GET',
  data: {var: a},
  dataType: 'JSON',
  beforeSend: function() { alert("About to deploy ajax request");
  success: function(response)
  {     
        console.log(response);
         if(response.success) {
               alert(response.var); 
         } else {
            alert(response.message); 
         }
  }
});
 $(document.ready(function() {
    myvalue();
 });
<script>

</body>
</html> 
```

**第 3 步** PHP 页面 ajax_example.php

```
<?php
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
header('Content-Type: application/json; charset=utf-8');
$var = isset($_GET['var']) ? $_GET['var'] : FALSE;

if($var) 
{
   $var = htmlspecialchars($var, ENT_QUOTES, 'UTF-8');

   echo json_encode(array("success" => true, "var" => $var, "message" => "Example message"));
} else {

  echo json_encode(array("success" => false, "message" => "You need to provide a value"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:24:20.393

您应该将`JS variable value`直通`AJAX`调用发送到该`PHP`页面。这就是这个过程的运作方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:24:55.427

您必须使用 AJAX。

php 在服务器中运行，javascript 在客户端浏览器中运行。

首先代码在服务器中运行，然后是浏览器，因此您不能直接将 js 变量传递给 php。您必须创建一个 http 请求，使用 AJAX 将其传递给服务器。

参考：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/ 用于 jquery ajax 实现。

# php - 如何使用 PHP 显示分层的“NESTED SET”数据？

> ID：15471605
> 
> 赞同：2
> 
> 时间：2013-03-18T07:22:49.947
> 
> 标签：php, mysql

我试图弄清楚如何使用 php 显示嵌套的 MySQL 数据。我设法搁置了所有“叶节点”，但后来我被卡住了。我需要显示一整棵树及其所有元素的关系。这是桌子

```
category_id, name, lft, rgt
1 Saws 1 12
2 Chainsaws 2 7
3 Red 3 4
4 Yellow 5 6
5 Circular saws 8 9
6 Other saws 10 11 
```

这是代码：

```
$query = 'SELECT node.name, node.lft, node.rgt
    FROM item_cats AS node,
        item_cats AS parent
    WHERE node.lft BETWEEN parent.lft AND parent.rgt AND parent.name = "' . SAWS . '"
    ORDER BY node.lft';
$result = mysql_query($query, $db) or die (mysql_error($db));
while ($row = mysql_fetch_assoc($result)) {
    if ($row['rgt'] == $row['lft']+1) {
        echo '==>';
    }
    echo $row['lft'];
    echo $row['name'];
    echo $row['rgt'];
    echo '<br />';
    echo '<br />';
} 
```

这就是我得到的：

```
1Saws12
2Chainsaws7
==>3Red4
==>5Yellow6
==>8Circular saws9
==>10Other saws11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:37:19.507

根据 Stu 向我展示的链接，本教程显示了这个用于确定深度的查询：

```
SELECT node.name, (COUNT(parent.name) - 1) AS depth
FROM nested_category AS node,
        nested_category AS parent
WHERE node.lft BETWEEN parent.lft AND parent.rgt
GROUP BY node.name
ORDER BY node.lft 
```

所以这样的事情应该有效：

```
<?PHP
$query = 'SELECT node.name, (COUNT(parent.name) - 1) AS depth
    FROM nested_category AS node,
            nested_category AS parent
    WHERE node.lft BETWEEN parent.lft AND parent.rgt
    GROUP BY node.name
    ORDER BY node.lft';

$result = mysql_query($query, $db) or die (mysql_error($db));
while ($row = mysql_fetch_assoc($result)) {
    for ($i = 0; $i < $row['depth']; $i++) {
        echo '==>';
    }

    echo $row['name'];
    echo '<br />';
    echo '<br />';
}
?> 
```

这应该输出：

```
Saws
==>Chainsaws
==>==>Red
==>==>Yellow
==>Circular Saws
==>Other Saws 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T01:34:38.297

```
<?PHP
$query = '
    select if(
        count(a.name) - 1 = 0, 
        a.name, 
        concat(repeat('   ', count(a.name) - 2), '+--', b.name)
    )name
    from nested_category b, nested_category a
    where node.lft between a.lft and a.rgt
    group by b.name
    order by b.lft';

$result = mysql_query($query, $db) or die (mysql_error($db));
while ($row = mysql_fetch_assoc($result)) echo "{$row['name']}<br>";
?> 
```

应该这样做：

```
Saws
+--Chainsaws
   +--Red
   +--Yellow
+--Circular Saws
+--Other Saws 
```

# iphone - Objective C 中令人沮丧的模式

> ID：15471616
> 
> 赞同：1
> 
> 时间：2013-03-18T07:23:39.193
> 
> 标签：iphone, ios, cocoa-touch, cocoa-design-patterns

Apple 建议不要在初始化程序中使用属性方法，但是如果您需要从初始化程序调用方法，并且还需要在对象初始化后从程序中的其他位置调用该方法，我不确定要遵循的协议。例如，您有：

```
- (id) init
{
    self = [super init];

    if (self)
    {
           [self someMethod];
    }

    return self;

}

- (void) someMethod
{
    _x = 0; \\ or self.x = 0 when this method is not called from initializer
} 
```

`someMethod`其中包含一堆 ivars。问题是，它还需要在对象初始化后稍后在代码中的其他位置调用。我希望从那里调用访问器时不要在初始化程序中访问它，但我也希望在`someMethod`从其他地方调用它们时访问它们。有没有一种巧妙的方法来解决这种模式？使用时`NSObject`？使用时`UIView`？使用时`UIViewController`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:58:49.163

要判断忽略该建议是否安全，您必须了解此建议存在的原因。
主要问题是具有副作用的 getter 和 setter，因为它们基于实例变量执行计算，而这些实例变量在您调用 setter（或 getter）时可能未初始化。

以以下代码为例：

```
- (id)init {
    self = [super init];
    if (self) {
        // don't do this
        self.textColor = [UIColor blackColor];
        self.font = [UIFont boldSystemFontOfSize:17];

        // do this:
        _textColor = [UIColor blackColor];
        _font = [UIFont boldSystemFontOfSize:17];
        [self createLayers];
    }
    return self;
}

- (void)setFont:(UIFont *)font {
    if (font) {
        _font = font;
        [self createLayers];
    }
}

- (void)setTextColor:(UIColor *)textColor {
    if (textColor) {
        _textColor = textColor;
        [self createLayers];
    }
}

- (void)createLayers {
    // calculation that will crash if font or textColor is not set
} 
```

因为如果 textColor 或 font 为 nil，createLayers 会崩溃，因此在 init 中使用 setter 会使您的代码崩溃。

# linux - 从 shell 脚本启动 putty

> ID：15471619
> 
> 赞同：1
> 
> 时间：2013-03-18T07:23:45.617
> 
> 标签：linux, windows, unix, ssh, putty

我编写了一个 shell 脚本，它为用户提供一个登录帐户列表，当用户选择一个帐户时，他/她通过 ssh 登录到所选帐户。该脚本从主帐户运行并且具有无密码 ssh与列表中的所有其他帐户（从属）的连接。我希望`launch another putty session`使用从属帐户详细信息作为参数传递，而不是来自主控的 ssh 连接。我怎样才能做到这一点？

我想到的一件事是，如果我可以编写一个将帐户信息作为参数的批处理文件（我的用户使用 windows）。这个批处理**脚本**可以在 unix 脚本中调用（这可能吗）。所以 unix 脚本将通过 ssh 在 Windows 上执行批处理文件，在此过程中它还将参数（服务器详细信息）传递给 putty。

或者还有其他更好的方法吗？

**编辑**

要从 linux 机器 ssh 到 windows 机器，是否必须在 Windows 机器上托管某种服务器（即 telnet、ssh、ftp 或任何其他类型的服务器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:41:21.080

如果您要从 GNU Linux 或 UNIX 机器开始，则根本不需要使用 putty。只需使用 SSH。本机 SSH 中的选项比通过 PuTTY 等不太本机的东西运行更加灵活。

是的，您的目的地将需要一台服务器才能“捕获”来自源计算机的连接。您还必须确保默认端口 22 一直处于打开状态。

但是......从听起来你想要做的事情来看。我建议您考虑使用 SSH 密钥并通过 su/sudo “启动” SSH。（而不是普通用户启动 su/sudo 来获取 root。root 帐户可以在另一个帐户下启动任何东西。）

# javascript - 使用 $.ajax 的 javascript 联系表单验证行为很有趣

> ID：15471623
> 
> 赞同：0
> 
> 时间：2013-03-18T07:24:03.307
> 
> 标签：javascript, html, jquery, validation

我制作了一个联系表格，现在我想在发送消息之前对其进行验证。如果所有字段都为空，则验证有效，即表单不提交任何内容，这很好。

**第一种情况：**但是当除了使用正则表达式的电子邮件和电话字段之外的所有字段都具有正确的信息**，****并且**提交**表单**时，它仍然会转到。而且我很确定在我的代码中，如果信息与 RegEx 不匹配，那么它甚至不应该继续到. 但它仍然是......奇怪！**`$.ajax()``return false``$.ajax()`**

 ****第二种情况：**另外，当它去的时候`$.ajax()`，它失败了，返回一个错误。

**第三种情况：**或者当页面第一次加载时所有字段都填写了正确的信息并提交了表单时，出现一个错误，说`{"error": "Please use POST request"}`or I get `Error 405`。但我正在使用......'POST'`POST`有`$.ajax()`什么问题？

请在此处查看我的代码（我已在 HTML 顶部包含并注释了 PHP 电子邮件代码，以防万一您想在某些服务器上对其进行测试）：

[http://jsfiddle.net/qvSaW/3/](http://jsfiddle.net/qvSaW/3/)

我知道周围有插件，但我不允许使用任何插件...

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:26:57.727

看看这个[插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，它涵盖了特殊规则、消息的验证，最后如果它通过了你就可以提交。**

# postgresql - 表数据更改时如何在前端触发 NOTIFICATION 事件

> ID：15471629
> 
> 赞同：1
> 
> 时间：2013-03-18T07:24:37.017
> 
> 标签：postgresql, triggers, notify, listen

我正在尝试利用vb.net`Notification`中给出的事件。`Npgsql`我对这个机制有部分了解，我学到的是，当一个特定表的数据发生变化时，它`trigger`会被触发，所以`trigger`我们可以`notify`在前端了解`data change`.

我设法在我的前端运行以下代码

```
Public Sub test()

    Dim conn = New NpgsqlConnection("Server=servername;port=portNo; _
               User Id=UID;pwd=PWD;DataBase=DB;")
    conn.Open()

    Dim command = New NpgsqlCommand("listen notifytest;", conn)
    command.ExecuteNonQuery()

    AddHandler conn.Notification, AddressOf NotificationSupportHelper

    command = New NpgsqlCommand("notify notifytest;", conn)
    command.ExecuteNonQuery()

End Sub

Private Sub NotificationSupportHelper(ByVal sender As Object, _
                                      ByVal e As NpgsqlNotificationEventArgs)

'Notified here.

End Sub 
```

上面的代码没有任何问题。但是我想知道的是如何创建一个`trigger`关于`notifies`数据更改到前端的内容，结果`Notification event`我的前端被解雇了？我需要在哪里打电话`listen`？我需要调用`listen`每个查询的执行吗？任何机构都可以用一些示例代码来澄清我的疑问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:37:46.903

**前端：**

```
Public Sub test()

Dim conn = New NpgsqlConnection(" Server=server; port=portno;User Id=uid; pwd=pwd; DataBase=Db; ")
conn.Open()

Dim command = New NpgsqlCommand("listen notifytest;", conn)
command.ExecuteNonQuery()

AddHandler conn.Notification, AddressOf NotificationSupportHelper

command = New NpgsqlCommand("update testtable set field='test' where id=1", conn)
Dim x As NpgsqlDataReader = command.ExecuteReader
End Sub

Private Sub NotificationSupportHelper(ByVal sender As Object, ByVal e As NpgsqlNotificationEventArgs)
    MsgBox(e.Condition)
End Sub 
```

**扳机：**

```
CREATE OR REPLACE FUNCTION testingNotify()
  RETURNS trigger AS
$BODY$ 
    begin
       notify notifytest;
       return null;
    end;     
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION testingNotify() OWNER TO testserver; 
```

如果或发生在 table 中，上面`trigger`给出的将被解雇。所以在上面的代码中，在名为 的过程中，我写了一个查询，所以在执行查询时被调用。`Insert``delete``update``testtable``test``updating the table tabletest``NotificationSupportHelper`

# css - 不正确的边距和对齐 Bootstrap + IE

> ID：15471641
> 
> 赞同：0
> 
> 时间：2013-03-18T07:25:04.700
> 
> 标签：css, internet-explorer, twitter-bootstrap, internet-explorer-9

我在 IE 中基于 bootstrap css 的站点存在一些问题（我在 IE9 中进行了测试）

[http://happyray.ru/](http://happyray.ru/)

为什么看起来这么丑？

[http://joxi.ru/wMBGUdg5CbBoOgnMBxI](http://joxi.ru/wMBGUdg5CbBoOgnMBxI)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:04:52.650

很可能您在部分的某处有一个打开的标签`head`。虽然有些浏览器通过自动关闭打开的标签来解决这个问题，但 IE 不会为您关闭它。:)

我刚刚用 IE8 调查了你的页面，似乎所有的`head`东西都加载到`body`元素中。请提供一些原始 html 或只是寻找开放标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:07:57.563

由于文档类型/标记不正确，您的网站似乎触发了 IE5 Quirksmode。请检查 [http://validator.w3.org/check?uri=http%3A%2F%2Fhappyray.ru%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fhappyray.ru%2F&charset=%28detect+automatically%29&doctype=Inline&group=0) 并修复显示的错误。还可以尝试使用其他文档类型，例如`<!DOCTYPE html>`. 然后复查。

# c# - 将 .net 中的每个地址的经度和纬度设为零

> ID：15471647
> 
> 赞同：0
> 
> 时间：2013-03-18T07:25:25.947
> 
> 标签：c#, asp.net, geocode

在我的 asp.net 应用程序中，我使用 Geocode 来查找给定地址的纬度和经度，并将它们保存在数据库中。非常奇怪的是，它从过去 8 个月开始运行良好，但突然从 2 天开始，它为我们提供的每个地址返回零，即使我曾尝试使用它正在工作的旧地址，但现在它也返回零作为经度和纬度。

请让我知道如何解决此问题

这是我正在使用的代码，以前可以使用，我没有更改任何内容

```
public interface ISpatialCoordinate
{
    decimal Latitude { get; set; }
    decimal Longitude { get; set; }
}

/// <summary>
/// Coordiate structure. Holds Latitude and Longitude.
/// </summary>
public struct Coordinate : ISpatialCoordinate
{
    private decimal _latitude;
    private decimal _longitude;

    public Coordinate(decimal latitude, decimal longitude)
    {
        _latitude = latitude;
        _longitude = longitude;
    }

    #region ISpatialCoordinate Members

    public decimal Latitude
    {
        get
        {
            return _latitude;
        }
        set
        {
            this._latitude = value;
        }
    }

    public decimal Longitude
    {
        get
        {
            return _longitude;
        }
        set
        {
            this._longitude = value;
        }
    }

    #endregion
}

public class Geocode
{

    private const string _googleUri = "https://maps.google.com/maps/geo?q=";
    private const string _outputType = "csv"; // Available options: csv, xml, kml, json
    //
    private const string _googleKey = ""; //here i am giving my key

    /// <summary>
    /// Returns a Uri of the Google code Geocoding Uri.
    /// </summary>
    /// <param name="address">The address to get the geocode for.</param>
    /// <returns>A new Uri</returns>
    private static Uri GetGeocodeUri(string address)
    {
       // string googleKey = ConfigurationManager.AppSettings["googleApiKey"].ToString();
        address = HttpUtility.UrlEncode(address);
        return new Uri(String.Format("{0}{1}&output={2}&key={3}", _googleUri, address, _outputType, _googleKey));
    }

    /// <summary>
    /// Gets a Coordinate from a address.
    /// </summary>
    /// <param name="address">An address.
    ///     <remarks>
    ///         <example>
    ///         3276 Westchester Ave, Bronx, NY 10461
    /// 
    ///         or 
    /// 
    ///         New York, NY 
    /// 
    ///         or
    /// 
    ///         10461  (just a zipcode)
    ///         </example>
    ///     </remarks>
    /// </param>
    /// <returns>A spatial coordinate that contains the latitude and longitude of the address.</returns>
    public static Coordinate GetCoordinates(string address)
    {
        WebClient client = new WebClient();
        Uri uri = GetGeocodeUri(address);

        /*  The first number is the status code, 
         * the second is the accuracy, 
         * the third is the latitude, 
         * the fourth one is the longitude.
         */
        string[] geocodeInfo = client.DownloadString(uri).Split(',');

        return new Coordinate(Convert.ToDecimal(geocodeInfo[2]), Convert.ToDecimal(geocodeInfo[3]));
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:33:42.153

嗨 Reena 我一个月前也收到了同样的问题，但我只更改了这个特定部分请检查一下。

```
latitude = results[0].geometry.location.Ya;
longlitude = results[0].geometry.location.Za; 
```

将断点保持在此结果附近并检查您正在获取的内容。希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:21:53.707

您一直在使用 Geocoding Version v2 现在 google 将其版本升级到 v3。

*   使用此版本，您无法将我们的输入直接作为 csv
*   您想使用 xml 或 Json 方法。
*   更好地使用 XML 更容易解析数据

版本 2 不再存在。状态码 610，地理编码

查看以下链接了解更多详情 [https://developers.google.com/maps/documentation/geocoding/#Results](https://developers.google.com/maps/documentation/geocoding/#Results)

# web-farm - 错误运行 Web Farm 框架 2.2

> ID：15471650
> 
> 赞同：1
> 
> 时间：2013-03-18T07:25:44.517
> 
> 标签：web-farm

我的服务器没有运行网络农场框架。它失败如下：

```
Failed to run operation 'ArrEnableLoadBalancing'.  Filename: \\?\C:\Windows\system32\inetsrv\config\applicationHost.config
Error: The configuration section 'system.webServer/rewrite/globalRules' cannot be read because it is missing a section declaration.

Failed to run operation 'EnableLoadBalancing'.  Filename: \\?\C:\Windows\system32\inetsrv\config\applicationHost.config
Error: The configuration section 'system.webServer/rewrite/globalRules' cannot be read because it is missing a section declaration.

Failed to run operation 'Repair'.  Filename: \\?\C:\Windows\system32\inetsrv\config\applicationHost.config
Error: The configuration section 'system.webServer/rewrite/globalRules' cannot be read because it is missing a section declaration.

Failed to run operation 'AutoRepair'.  Filename: \\?\C:\Windows\system32\inetsrv\config\applicationHost.config
Error: The configuration section 'system.webServer/rewrite/globalRules' cannot be read because it is missing a section declaration.

Server marked 'Unhealthy' due to failure to run operation 'AutoRepair' 
```

帮我配置错误。谢谢。

# asp.net - href链接中的xslt参数错误

> ID：15471654
> 
> 赞同：0
> 
> 时间：2013-03-18T07:26:00.777
> 
> 标签：asp.net, xslt

```
<xsl:value-of select="jobpageno"/> 
```

以上代码没有错误，可以成功运行并显示页面。

但是，下面的代码出现错误，删除 &PageNo={@jobpageno} 后，显示成功。

```
<a href="http://www.hello.com/description.aspx?ID={@id}&PageNo={@jobpageno}" target="_top"> 
```

这个包含这个参数的链接有什么问题

解析 EntityName 时出错。第 58 行，位置 103

它应该显示 hello.com/description.aspx?ID=753561&PageNo=1

```
<a href="http://www.hello.com/description.aspx?ID={@id}&PageNo={jobpageno}" target="_top"> 
```

也有错误

pageno 只是元素之一

```
<jobresults jobcount='1'>
<header1><![CDATA[ IT Jobs]]></header1>
<header2><![CDATA[1 Results for ' IT' in Asia]]></header2>
<entity id='753561' index='1'>
<position><![CDATA[Ecommerce Project Manager]]></position>
<jobCountry><![CDATA[Singapore]]></jobCountry>
<posteddate><![CDATA[January 2013]]></posteddate>
<JobDefaultRole><![CDATA[Contract]]></JobDefaultRole>
<jobTypeDesc><![CDATA[Jobs In IT]]></jobTypeDesc>
<jobDetails><![CDATA[ Ecommerce Project Manager Client Description Our  ...]]></jobDetails>
<jobpageno><![CDATA[1]]></jobpageno>
</entity>
</jobresults>

 <xsl:for-each select="jobresults/entity">
              <xsl:choose>
                <xsl:when test="position() mod 2 = 0">
                  <tr class="odd">
                    <td>
                      <a href="http://www.hello.com/job-description.aspx?jobID={@id}&jobPageNo={@jobpageno}" target="_top">
                        <xsl:value-of select="position"/>
                        <xsl:value-of select="jobpageno"/>
                      </a>
                    </td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:58:51.767

XSLT 文件必须是格式正确的 XML，因此您需要转义`&`：

```
<a href="http://www.hello.com/description.aspx?ID={@id}&amp;PageNo={jobpageno}" target="_top"> 
```

您看到的实际错误消息是因为解析器将`&PageNo`其视为实体引用的开始，但随后找不到终止分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T08:17:45.163

这可能只是您的问题中的一个错字，但在您的第一个 XSLT 示例中您使用**pageno**，这意味着它是一个元素，但在您的第二个 XSLT 示例中您使用**@pageno**，这意味着它正在寻找一个属性。

也许你的意思是这样做：

```
 <a href="http://www.hello.com/description.aspx?ID={@id}&PageNo={pageno}" target="_top"> 
```

请注意，XSLT 示例的语法实际上并没有错。如果你引用了一个不存在的属性，它只会被输出为一个空白，而所有的情况都是 href 属性不会像你期望的那样完整。

编辑：通过查看您修改后的问题，既没有一个属性也没有一个名为**pageno**的元素。也许您的意思是使用**jobpageno**？

```
 <a href="http://www.hello.com/description.aspx?ID={@id}&PageNo={jobpageno}" target="_top"> 
```

# javascript - 在 Chrome 中忽略 window.open 宽度

> ID：15471657
> 
> 赞同：9
> 
> 时间：2013-03-18T07:26:17.923
> 
> 标签：javascript, google-chrome, window.open

我想创建一个固定大小的弹出窗口，但是在 Chrome 中忽略了 width 属性。但在 FF 中运行良好。

这是我的代码：

```
window.open('','','width=300'); 
```

结果弹出窗口大于给定宽度。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-25T15:20:36.917

在 Chrome 中这似乎是一些奇怪的怪癖，您必须同时指定**宽度**和高度才能让它观察设置的尺寸。如果您只指定高度或宽度，则忽略该单一尺寸。因此，为什么在另一个答案中它对杰夫来说效果很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T07:37:06.943

我试图把这个放在 Chrome 版本 25.0.1364.172

```
window.open('','','width=200,height=100'); 
```

它对应于窗口的确切高度和宽度。

要检查，请使用

```
window.innerHeight; //to display height
window.innerWidth; //to display width 
```

# c# - 从令牌 c# 获取用户信息

> ID：15471658
> 
> 赞同：1
> 
> 时间：2013-03-18T07:26:21.947
> 
> 标签：c#, .net, oauth, dotnetopenauth

我已经通过他们的 api 从 Google 提供商那里成功获得了上述 oauth 身份验证的密钥令牌。

让我们考虑**“访问令牌”**是 xxxii-xxxxx-xxx-xxxxx-xxxxx，其范围为[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

现在，当我使用访问令牌访问浏览器以检索用户信息值时

```
https://www.googleapis.com/oauth2/v1/userinfo?access_token=xxxii-xxxxx-xxx-xxxxx-xxxxx; 
```

我收到了回复

```
{
 "id": "XXXXXXXXXXXXXX",
 "name": "XXXXXXXXXXXXXXXX",
 "given_name": "XXXXXXXXXXX",
 "family_name": "X",
 "picture": "XXXXXXXXXX/photo.jpg",
 "locale": "en"
} 
```

我的问题是当我通过代码解析上述请求时，我没有得到响应，因为我通过浏览器得到了响应

我使用的代码是

```
String userInfo = "https://www.googleapis.com/oauth2/v1/userinfo?access_token="+token;
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(userInfo);
HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
StreamReader sr = new StreamReader(resp.GetResponseStream());

sr.Close();

JObject jsonResp = JObject.Parse(userInfo);
string info = "";
info += "<h3>" + jsonResp.Root["name"] + "</h3>";
info += "<img src='" + jsonResp.Root["picture"] + "' width='120'/><br/>";
info += "<br/>ID : " + jsonResp.Root["id"];
info += "<br/>Email : " + jsonResp.Root["email"];

Response.Write(info); 
```

作为回应，我得到了空参考。

和我遇到的错误

```
JObject jsonResp = JObject.Parse(userInfo); 
```

作为

> 解析值时遇到意外字符：h。第 1 行，位置 1。

堆栈跟踪：

> 在 Newtonsoft.Json.JsonTextReader.ParseValue(Char currentChar) 在 Newtonsoft.Json.JsonTextReader.ReadInternal() 在 Newtonsoft.Json.JsonTextReader.Read() 在 Newtonsoft.Json.Linq.JObject.Load(JsonReader reader) 在 Newtonsoft.Json .Linq.JObject.Parse(String json) at _Default.getresponse(String token) in d:\Oauth\WebSite3\Default.aspx.cs:line 99

等待您的宝贵建议和意见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:38:24.473

使用此代码获取用户信息：

```
var userInfoUrl = "https://www.googleapis.com/oauth2/v1/userinfo"; 
var hc = new HttpClient();
hc.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", authToken);
var response = hc.GetAsync(userInfoUrl).Result;
dynamic userInfo = response.Content.ReadAsAsync().Result;
return userInfo; 
```

有一篇关于 dotnetopenoauth 和 google api 集成的好文章：http: [//www.dotnetopenauth.net/documentation/securityscenarios/](http://www.dotnetopenauth.net/documentation/securityscenarios/)

# c# - 使用计时器控件调用委托？

> ID：15471660
> 
> 赞同：0
> 
> 时间：2013-03-18T07:26:32.827
> 
> 标签：c#

我正在使用带有计时器控制和线程池的调用委托，我担心我的应用程序性能。那么除了Timer还有其他方法吗？

此外，我的 Windows 应用程序每 10 秒刷新一次，并且内存大小会增加。我应该怎么做才能限制内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:38:41.990

1.  请为您的问题提供**更多详细信息。**
2.  `And memory size increases`- 这似乎您的应用程序有内存泄漏问题..
3.  检查您是否没有创建新的计时器控件，即您需要为单一目的重用相同的对象实例。

我猜想通过理解您的问题来帮助您的解决方案；检查您编码的位置，例如

```
myInstanceControl.OnClick += new EventHandler(myInstanceControl_Click); 
```

或者

```
myInstanceControl.OnClick += myInstanceControl_Click; 
```

如果您在模块中有这样的代码片段执行多次，那么您还需要在执行范围或事件处理程序本身未引用对象之前删除事件处理程序。如

```
myInstanceControl.OnClick -= new EventHandler(myInstanceControl_Click); 
```

或者

```
myInstanceControl.OnClick -= myInstanceControl_Click; 
```

# c# - 未指定报告定义的来源

> ID：15471661
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:26:34.157
> 
> 标签：c#

我正在使用以下代码输入参数.....

```
var invdata = SaleInvCode.GetbyId(invID);
var invdat = (from a in db.invDetails where a.InvDetailID == invID select new { a.SaleInv, a.ProName, a.Discription, a.SaleQTY, a.SalePrice, a.SaleAmount }).ToList();
//var invdetai = from a in db.invHeaders select a;
/////////////////////////
invHeader.DataSource = invdata;
reportViewer1.LocalReport.DataSources.Add(new ReportDataSource(reportViewer1.LocalReport.GetDataSourceNames()[0], invHeader));
reportViewer1.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local; 
```

**错误**

```
Error:: The source of the report definition has not been specified 
```

我正在创建报告参数.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:30:06.713

您需要先告诉报表查看器要使用哪个本地报表，然后才能分配任何参数。

# c++ - 使用 c / c++ 以编程方式生成图形和图表

> ID：15471664
> 
> 赞同：3
> 
> 时间：2013-03-18T07:26:36.023
> 
> 标签：c++, c, charts

是否可以从内存中的数据集中生成以图形方式显示数据的图像？我需要**生成图表**（jpeg / gif / png）来表示内存中的数字数据，这些数据是在我的服务器端应用程序中按需生成的。我可以将这些数据记录到文件中，并使用 gnuplot 生成图表，但这需要维护和运行另一组应用程序进程，我不想这样做。我知道可以使用 libgd 生成图像，但是找不到任何使用 libgd 制作图表等的好例子。我正在寻找可以真正跨操作系统移植的东西。

# android - android中的Twitter登录不起作用

> ID：15471669
> 
> 赞同：-2
> 
> 时间：2013-03-18T07:27:10.427
> 
> 标签：android, twitter, oauth

当我尝试在 android 中登录 twitter 应用程序时，它在 logcat 中显示以下错误。我无法通过我的应用程序启动 twitter。请给我一些解决方案。

```
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639): Error creating consumer / provider
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: null
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at com.android.twitter.PrepareRequestTokenActivity.initData(PrepareRequestTokenActivity.java:129)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at com.android.twitter.PrepareRequestTokenActivity.onCreate(PrepareRequestTokenActivity.java:64)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.Activity.performCreate(Activity.java:4470)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.os.Looper.loop(Looper.java:137)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.app.ActivityThread.main(ActivityThread.java:4511)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at java.lang.reflect.Method.invoke(Method.java:511)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at dalvik.system.NativeStart.main(Native Method)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639): Caused by: android.os.NetworkOnMainThreadException
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at oauth.signpost.commonshttp.CommonsHttpOAuthProvider.sendRequest(CommonsHttpOAuthProvider.java:64)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:177)
03-18 12:47:28.412: E/com.android.twitter.PrepareRequestTokenActivity(4639):    ... 17 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:30:05.410

当应用程序尝试在其主线程上执行网络操作时，将引发此异常。在 AsyncTask 中运行您的代码：

```
class RetreiveFeedTask extends AsyncTask<String, Void, RSSFeed> {

    private Exception exception;

    protected RSSFeed doInBackground(String... urls) {
        try {
           //POST YOUR CODE HERE!!
        } catch (Exception e) {
            this.exception = e;
            return null;
        }
    }

    protected void onPostExecute(RSSFeed feed) {
        // TODO: check this.exception 
        // TODO: do something with the feed
    }
 }

 new RetreiveFeedTask().execute(urlToRssFeed); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:17:11.370

我只是通过在我的代码中添加一行来解决这个问题。

> StrictMode.enableDefaults();

谢谢大家的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:20:46.120

Google 在其最新版本的 android OS 中强制执行网络相关的事情或异步任务上的其他繁重任务..以避免`ANR`错误

注意日志中的主线程异常原因：`android.os.NetworkOnMainThreadException`

这个例外是因为如果这个限制..

尝试在 ASYNC 任务中运行您的任务意味着在`doInBackground`.

```
public class LoginTwitter extends AsyncTask<Void, Void, Boolean> {
        @Override
        protected Boolean doInBackground(Void... params) {
            // TODO: attempt authentication against a network service.

            // call your loginTwiter here (the way you are calling twitter AOUTH)

            return false;

        }

        @Override
        protected void onPostExecute(final Boolean success) {

        }

    } 
```

在某些 UI 上调用此类单击实际您当前正在调用 TwitterLogin 的位置

```
 private View.OnClickListener  LoginTwitter=new View.OnClickListener() {

        @Override
        public void onClick(View paramView) {
            // TODO Auto-generated method stub
            new LoginTwitter().execute((Void) null);;

        }
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T09:27:33.477

请参考此链接

[http://androidcodeexamples.blogspot.com/2011/12/how-to-integrate-twitter-in-android.html](http://androidcodeexamples.blogspot.com/2011/12/how-to-integrate-twitter-in-android.html)

你从这个链接得到一些想法

并检查是否启用严格模式？如果不启用请启用

```
StrictMode.enableDefaults(); 
```

# sql - 一个 SELECT 语句中有 2 个 INNER JOIN

> ID：15471671
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:27:15.237
> 
> 标签：sql, database, select, inner-join

我的数据库中有三个表：stockitem、supplier 和 city。

我需要运行一个 SQL 查询来选择股票 id ( `stkid`)、股票名称 ( `stkname`) 和股票 id 供应商的相关城市名称（用 链接`suppid`）。

为了做到这一点，我被告知我需要运行 2 个`INNER JOIN`语句，这些语句应该链接`suppid`来自 stockitem 表（外键）和供应商表（主键）的两个属性。

同样，我需要对`citycode`表供应商 (FK) 和城市 (PK) 中的 执行相同操作。

这是我所拥有的：

```
SELECT      I.stkid     ,   I.stkname   ,   C.cityname "Supplier Location"
FROM        stockitem I

-- inner join stockitem <-> supplier
INNER JOIN  supplier S 
ON          I.suppid = S.suppid

-- inner join supplier <-> city
INNER JOIN  city C
ON          S.citycode = C.citycode

ORDER BY    stkid ASC; 
```

任何帮助都是极好的。

谢谢！！

编辑：对不起，完全忘记发送输出。这是我不断收到的错误。

```
SELECT      I.stkid     ,   I.stkname   ,   C.cityname "Supplier Location"
                                *
Error at line 1:
ORA-00904: "C"."CITYNAME": invalid identifier

INNER JOIN  supplier S 
*
Error at line 1:
ORA-00900: invalid SQL statement

INNER JOIN  city C
*
Error at line 1:
ORA-00900: invalid SQL statement 
```

我只是期望我所有的 stockitem 行都返回它们的相关属性，`stkid`，`stkname`以及`cityname`从 city 表（通过供应商表）引用的 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:42:05.513

似乎 Oracle 将您的查询视为 3 个不同的查询。尝试消除空行和类似的。

如果它不起作用，您可以使用隐式内部连接，例如

```
SELECT      I.stkid     ,   I.stkname   ,   C.cityname "Supplier Location"
FROM        stockitem I, supplier S , city C
where     I.suppid = S.suppid and   S.citycode = C.citycode
ORDER BY    stkid ASC; 
```

# svn - 将 SSIS 包从 SSMS 包存储存储到 SQL RED GATE SOURCE CONTROL

> ID：15471673
> 
> 赞同：0
> 
> 时间：2013-03-18T07:27:25.050
> 
> 标签：svn, version-control, ssis, redgate

我们一直致力于 SQL 红门 SQL 源代码控制。

有什么方法可以使用 SSIS 包存储中的红色门源控制将 SSIS 包存储到 Subversion？

等待回复。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:25:12.857

目前，SQL 源代码控制严格关注将实时数据库转换为脚本并将它们存储在源代码控制中，因此它严格在数据库级别工作。您仍然可以使用任何客户端（例如 Tortoise）导出 SSIS 包并将它们签入源代码控制。您将失去的唯一功能是“有意义的”差异和合并功能。

您可以将此作为功能请求添加到 Red Gate UserVoice。[http://redgate.uservoice.com/forums/39019-sql-source-control](http://redgate.uservoice.com/forums/39019-sql-source-control)

# android - 如何使用来自网络服务的图像并将其简单地显示在 android 的 imageview 上？

> ID：15471674
> 
> 赞同：0
> 
> 时间：2013-03-18T07:27:33.383
> 
> 标签：android, image, web-services

谁能告诉我如何使用来自网络服务的图像，并告诉我如何将这些图像显示到 android 的 imageview 控件中？

我通过谷歌尝试了很多例子，但这些都没有让我清楚。

谁能给我至少一个样品来实现这个概念？

感谢您宝贵的时间！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:32:26.417

您可以使用存储在服务器中的图像的 url 来使用来自网络服务器的图像....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:35:13.850

您使用的是什么类型的网络服务？

如果您使用的是 KSOAP，您可以像这样使用。

```
 try 
           {

                ht.call(SOAP_ACTION, envelope);

                final SoapPrimitive response = (SoapPrimitive) envelope.getResponse();

              final String encodedImage = response.toString();

      byte[] decodedString = Base64.decode(encodedImage, Base64.DEFAULT);

      decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);

      yourimgView.setImageBitmap(decodedByte);

            catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:38:08.040

android默认`ImgaeView`不支持http URI ..您可以使用支持http URI作为图像url的[第三方库](https://github.com/tom-dignan/android-remoteimageview)`RemoteImagView`....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:39:35.350

从 API 获取 Image_URL：

例如： http: [//lh6.googleusercontent.com/-jZgveEqb6pg/T3R4kXScycI/AAAAAAAAAE0/xQ7CvpfXDzc/s1024/sample_image_01.jpg](http://lh6.googleusercontent.com/-jZgveEqb6pg/T3R4kXScycI/AAAAAAAAAE0/xQ7CvpfXDzc/s1024/sample_image_01.jpg)

将此 URL 传递给以下函数，您将获得一个 Bitmap ：

```
public static Bitmap loadBitmap(String url) {
Bitmap bitmap = null;
InputStream in = null;
BufferedOutputStream out = null;

try {
    in = new BufferedInputStream(new URL(url).openStream(), IO_BUFFER_SIZE);

    final ByteArrayOutputStream dataStream = new ByteArrayOutputStream();
    out = new BufferedOutputStream(dataStream, IO_BUFFER_SIZE);
    copy(in, out);
    out.flush();

    final byte[] data = dataStream.toByteArray();
    BitmapFactory.Options options = new BitmapFactory.Options();
    //options.inSampleSize = 1;

    bitmap = BitmapFactory.decodeByteArray(data, 0, data.length,options);
} catch (IOException e) {
    Log.e(TAG, "Could not load Bitmap from: " + url);
} finally {
    closeStream(in);
    closeStream(out);
}

return bitmap; 
```

}

你可以设置 image.setImageBitmap(bitmap);

希望这可以帮到你。

注意：如果要加载图像列表，请使用惰性加载器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T07:39:48.477

检查您的网络服务的响应，在那里您可以找到图像 URL，获取该 url 并将其传递给图像视图对象。如果您发布您的网络服务响应，您将得到您问题的正确响应。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T07:43:22.337

无论使用什么 webserverice，soap 或 json 您都必须获取 url。

```
ImageView imageView = (ImageView) findViewById(R.id.detailImageView);

if(urlToDownload!=null)
{
URL url = new URL(urlToDownload);//url of image to download.
url.openConnection().setConnectTimeout(1000);
bitmap =BitmapFactory.decodeStream(url.openConnection().getInputStream());
imageView.setImageBitmap(bitmap);
} 
```

# php - php在将数据存储到从google oauth2获取的数据库中时出错

> ID：15471681
> 
> 赞同：1
> 
> 时间：2013-03-18T07:28:23.827
> 
> 标签：php, google-oauth, google-signin

我正在使用 google auth2 进行用户登录，如果用户不存在于数据库中，则获取用户信息并将其保存到数据库中......以下是代码，[在这里](http://oauth.netne.net)您可以看到错误。当我删除 dooperation() 函数时，它不会给出错误....functions.php 包含名为“User”的类，我在其中检查用户是否存在，如果不存在则添加行..它为每一行给出错误dooperation() 函数......这里有什么问题，如果我做错了什么，还告诉我......谢谢

```
<?php

require_once 'src/apiClient.php';
require_once 'src/contrib/apiOauth2Service.php';
require_once 'config/functions.php';
session_start();

$client = new apiClient();
$client->setApplicationName("Google Account Login");
$oauth2 = new apiOauth2Service($client);

if (isset($_GET['code'])) {
$client->authenticate();
$_SESSION['token'] = $client->getAccessToken();
$redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];

header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
 unset($_SESSION['token']);
 unset($_SESSION['google_data']); //Google session data unset
 $client->revokeToken();
 header('Location: home.php');
 exit();
}
   function dooperation($user){
      $ret=false;
      $email = $user['email'];
      $fname = $user['given_name'];
      $lname = $user['family_name'];

      $gender=$user['gender'];
      $dob = $user['birthday'];
      $location = null;
      $picture = $user['picture'];
      $uid = $user['id'];
      $ousername = null;
      $link = $user['link'];
           $provider = 'google';
           $verified = $user['verified_email'];

          $gen=0;
          if($gender == 'male'){$gen=1;} else{$gen=0;}
          $new_dob = date( "Y-m-d H:i:s", strtotime($dob) );

          $userObj = new User();
          $userdata = $userObj->checkUser($email,$fname,$lname,$gen,$new_dob,$location,$picture,$uid,$ousername,$link,$provider,$new_verified); 
          if(!empty($userdata)){         
            $_SESSION['id'] = $userdata['user_id'];
            $_SESSION['oauth_id'] = $userdata['user_oauth_id'];
            $_SESSION['username'] = $userdata['user_oauth_username'];
            $_SESSION['picture'] = $userdata['picture'];            
            $_SESSION['link'] = $userdata['link'];
            $_SESSION['fname'] = $userdata['user_fname'];
            $_SESSION['lname'] = $userdata['user_lname'];
            $_SESSION['gender'] = $userdata['user_gender'];
            $_SESSION['email'] = $userdata['user_email'];
            $_SESSION['oauth_provider'] = $userdata['user_oauth_provider'];             
            $_SESSION['oauth_id'] = $uid;
            $ret= true;
         }
         } else {
            # For testing purposes, if there was an error, let's kill the script
            die("There was an error.");
            $ret=false;
        }
       return $ret;
 }

 if ($client->getAccessToken()) {

 $user = $oauth2->userinfo->get();
 //print_r($user);

 $val=dooperation($user);

 header("location: home.php");

// The access token may have been updated lazily.
$_SESSION['token'] = $client->getAccessToken();
} else {
  $authUrl = $client->createAuthUrl();
}
?>
<?php if(isset($personMarkup)): ?>
<?php print $personMarkup ?>
<?php endif ?>
<?php
   if(isset($authUrl)) {
    header("Location: $authUrl");
 }

 ?> 
```

# java - 在休眠映射中的复合键的一部分上连接两个表

> ID：15471683
> 
> 赞同：1
> 
> 时间：2013-03-18T07:28:28.830
> 
> 标签：java, hibernate-mapping

我有两个表如下：

```
 Table A:  
site  [pk]  
group [pk]

 Table B:  
group [pk]   
method[pk]  
gate  [pk] 
```

A 的复合键 - [站点组]。
B 的复合键 - [组方法门]。

如何仅在列 Group 值上检索与 B 表关联的 A 表的所有记录？group 在两个表中可以有多个条目，而不是唯一的列。

两个表都独立于 mysql，我必须使用两个表中可用的 group 列来加入*hbm文件。*

类似于 B 类的内容

```
<set name="SiteGroup" table="A"
        inverse="true" lazy="true" fetch="select">
    <key column="group"/> 
    <one-to-many class="A's as class " />
</set> 
```

# javascript - 在javascript中为图像添加alt属性

> ID：15471688
> 
> 赞同：9
> 
> 时间：2013-03-18T07:28:44.480
> 
> 标签：javascript, image, alt

我想知道如何在 javascript 中为图像添加 alt 属性，下面是我的代码...

```
var image = document.createElement('img');
image.src='../../KY/images/common/buttons/browseIcon.png'; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T07:30:49.243

您有两种方法：您可以使用任一[alt](https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement)属性

```
image.alt = "Your text here" 
```

或[setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)方法

```
image.setAttribute("alt","Your text here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:32:06.943

您可以只使用[alt 属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T15:18:23.653

当您在 dom javascript 中创建按钮或任何其他元素时，上述方法将不起作用，为此请使用下面提到的方法

```
control.setAttribute("title","your tooltip value") 
```

# javascript - 将日期转换为不同格式的 jquery/javascript

> ID：15471692
> 
> 赞同：0
> 
> 时间：2013-03-18T07:28:58.057
> 
> 标签：javascript, jquery

```
function loadTable() { //function 
    var reportedFromDate = document.IssueForm.reportedFromDate.value; //getting value from input field
    alert(reportedFromDate); //displays dd-mm-yy 31-02-13
} 
```

我想将其转换为**`31-FEB-13`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:38:50.927

检查以下代码段：

```
 function loadTable() { //function 
        var reportedFromDate = document.IssueForm.reportedFromDate.value; 
        alert(reportedFromDate);  // your format
        var parts=reportedFromDate.split("-");
        var date=parts[0];
        var month=parts[1];
        var year=parts[2];

        var mon=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEPT","OCT","NOV","DEC"];
        var m=parseInt(month);
        alert( date +"-"+mon[m-1]+"-"+year); // required format
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:32:00.820

您需要执行一些步骤：

```
1\. Create one array of months like 
var months = ["JAN","FEB"....,"DEC"];
2\. Split the date with (-) seperator
3\. Take the 1st index (not 0) and search through the Array (months)
4\. Display the formatted date. 
```

# json - 绑定 Json 数组以建模 Web Api

> ID：15471693
> 
> 赞同：1
> 
> 时间：2013-03-18T07:29:01.620
> 
> 标签：json, entity-framework, asp.net-web-api, model-binding

我有这样的类结构。问题是当我转移到之前序列化的 web api 控制器用户 json 时，被操作者列表计数为 0。序列化的 Json 看起来像这样：

```
{"$id":"1","UserId":1,"RealName":"vas`ka","PasswordHash":"password",
 "Email":"somemail","Actionees":
   {"$id":"2","$values": 
      [{"$id":"3","ActioneeId":1,"Status":"doing", "CloseDate":null,
        "DeletedFlag":false, "CreationDate":"2013-03-11T11:48:24.08", 
        "Users":null,  "Comments":null}, {"$id":"4","ActioneeId":2,"Status":"doing",  
        "CloseDate":null, "DeletedFlag":false, 
        "CreationDate":"2013-03-11T12:46:08.787", "Users":null,"Comments":null}
      ]
   }
}

public class User
{
    [Key]
    public Int64 UserId { get; set; }
     public String Email { get; set; }
    public String RealName { get; set; }
    public String PasswordHash { get; set; }

    public virtual List<Actionee> Actionees { get; set; }
}

public class Actionee
{
    [Key]
    public Int64 ActioneeId { get; set; }
    public String Status { get; set; }
    public DateTime? CloseDate { get; set; }
    public Boolean DeletedFlag { get; set; }
    public DateTime? CreationDate { get; set; }

    public virtual List<User> Users { get; set; }
    public virtual IEnumerable<Actionee> Comments { get; set; } 
} 
```

我将此字符串添加到 application_start 中：

```
 var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
        var dcs = new DataContractSerializer(typeof(User), null, int.MaxValue, false,  true, null);
        xml.SetSerializer<User>(dcs);

        var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
        json.SerializerSettings.PreserveReferencesHandling =
            Newtonsoft.Json.PreserveReferencesHandling.All;   

       And I tried to deserialized in this way: http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:00:34.273

您的 json 格式不正确，因为实体框架对象序列化

你有额外的属性，比如

> "$id":"2","$values"

JsonFormatter 无法识别这些额外的属性，也无法反序列化您需要将实体框架对象转换为 Web api 控制器中的用户对象的对象

# macos - Assigning variables to command script in Automator

> ID：15471694
> 
> 赞同：2
> 
> 时间：2013-03-18T07:29:03.300
> 
> 标签：macos, variables, automator

So I am new at using the Automator on OSX

i have a really simple python function

```
def test(input1,input2,output):
    print str(input1)
    print str(input2)
    print str(output)
    return 'function works' 
```

what i want to do is generate a simple application that asks for the file locations of the two inputs and the file destination for the output (name text box for output).

so i have been messing with: Automator > Choose Workflow > Actions > Files & Folders > Ask for Finder Items (Create two of these) > Utilities > Run Shell Script

So I have three questions:

**1 . How can I assign these finder items to input1,input2 variables, respectively, on my python script?**

2 . Where do I place my script in proximity to this code ?

```
import sys

for f in sys.stdin:
    print f, 
```

3 . What is the difference between stdin, arguments ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:34:02.180

The complete workflow should be something like this:

![enter image description here](../Images/b239d7100e2f80b48957c64f0f69108c.png)

In the `Run Shell Script` step you should set `Pass Input:` to `as arguments`, so that you can use `sys.args` array. Your Python script can be modified like this:

```
import sys

input1 = sys.argv[1]
input2 = sys.argv[2]
output = sys.argv[3]
print input1
print input2
print output 
```

`View Results` step is only for debug.

If you set `Pass Input:` to `to stdin`, input arguments are passed to your script via [pipeline](https://en.wikipedia.org/wiki/Pipeline_(Unix)).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:05:43.150

You could simply use AppleScript:

```
set inputA to (choose file with prompt "Please choose file one...")
set inputB to (choose file with prompt "Please choose file two…")
set outputA to (choose folder with prompt "Please choose a destination…")

return {((inputA as text) & return & inputB as text) & return & outputA} 
```

# android - 删除特定应用的日历事件

> ID：15471695
> 
> 赞同：0
> 
> 时间：2013-03-18T07:29:07.577
> 
> 标签：android, calendar, uninstallation

我有以编程方式插入日历条目的代码。在日历 API 中插入时，一切正常。问题是当应用程序未安装时，应用程序创建的日历事件不会被删除。我错过了什么？任何帮助将不胜感激提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:30:53.290

尝试这个..

```
Uri eventUri = Uri.parse("content://calendar/events");  // or "content://com.android.calendar/events" 

Cursor cursor = contentResolver.query(eventUri, new String[]{"_id"}, "calendar_id = " + calendarId, null, null); // calendar_id can change in new versions 

while(cursor.moveToNext()) {
Uri deleteUri = ContentUris.withAppendedId(eventUri, cursor.getInt(0));

contentResolver.delete(deleteUri, null, null); 
```

}

# jquery - 阻止其他事件处理程序运行

> ID：15471701
> 
> 赞同：1
> 
> 时间：2013-03-18T07:29:36.810
> 
> 标签：jquery

我的 HTML 表单有这个标记：

```
<fieldset>
    <legend>
        <label> <input type="checkbox" class="warnOnUncheck" /> Include the following data </label>
    </legend>
    <div class="fieldsetContent">
        <!-- and a bunch of <input type="text" /> here. -->
    </div>
 </fieldset> 
```

我有两个由 DOM-ready 调用的脚本：

1.  当复选框未选中时，第一个折叠字段集的内容并显示
2.  第二个，`confirm()`在未选中复选框时显示确认消息。如果用户单击“否”，则重新选中该复选框。

问题是第一个事件处理程序总是被调用，所以即使用户单击“否”，字段集内容仍然是隐藏的。

这是我的（删节的）jQuery 代码（在 DOM-ready 事件处理程序期间调用）：

```
$("fieldset.collapseable legend input").change(function(event) {

    var localFieldsetContent = $(this).closest("fieldset").find("div.fieldsetContent");

    var checked = $(this).is(":checked");
    if( checked && localFieldsetContent.is(":visible") ) {
        // if checked and already visible, then skip entirely.
        return;
    }

    localFieldsetContent.slideToggle(200);
);

$("input[type=checkbox].warnOnUncheck").change( function(event) {

    if( !this.checked ) {

        var message = $(this).data("warnMessage");

        var confirmed = confirm( message );
        if( !confirmed ) {

            this.checked = true;
            event.stopImmediatePropagation();
        }
    }

} ); 
```

我以为这`event.stopImmediatePropagation();`会起作用，但事实并非如此。

如何防止字段集在`confirmed`为 false 时被折叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:56:41.247

您的直接问题：第一个处理程序在第二个处理程序（带有确认的处理程序）有机会调用之前执行`stopImmediatePropagation`。以相反的顺序绑定您的处理程序，它应该可以工作：

```
$("input[type=checkbox].warnOnUncheck").change( function(event) {

    if( !this.checked ) {

        var message = $(this).data("warnMessage");

        var confirmed = confirm( message );
        if( !confirmed ) {

            this.checked = true;
            event.stopImmediatePropagation();
        }
    }

} );

$("fieldset.collapseable legend input").change(function(event) {

    var localFieldsetContent = $(this).closest("fieldset").find("div.fieldsetContent");

    var checked = $(this).is(":checked");
    if( checked && localFieldsetContent.is(":visible") ) {
        // if checked and already visible, then skip entirely.
        return;
    }

    localFieldsetContent.slideToggle(200);
); 
```

但是，我发现将这种行为拆分为两个函数是非常不安全的。

我会将两个处理程序合并为一个：

```
$("input[type=checkbox].warnOnUncheck").change( function(event) {
    var confirmed = true;
    if( !this.checked ) {
        var message = $(this).data("warnMessage");

        var confirmed = confirm( message );
        if( !confirmed ) {
            this.checked = true;
        }
    }

    if (confirmed) {
        var localFieldsetContent = $(this).closest("fieldset").find("div.fieldsetContent");
        localFieldsetContent.slideToggle(200);
    }
} ); 
```

这是一个[jsfiddle](http://jsfiddle.net/DqSUj/)

* * *

如果您不能合并处理程序，您可以将“折叠”功能绑定到某个自定义事件，并让复选框上的“点击”事件触发它。

看到这个[更新的 jsfiddle](http://jsfiddle.net/DqSUj/1/)：

```
$("input[type=checkbox].warnOnUncheck").change( function(event) {
    var confirmed = true;
    if( !this.checked ) {
        var message = $(this).attr("data-warnMessage");
        confirmed = confirm( message );
        if( !confirmed ) {
            this.checked = true;
        }
    }

        if (confirmed) {
            $(this).trigger("myToggleVisibility");
        }
} );

$("fieldset.collapseable").on("myToggleVisibility", function(event) {
    $(this).find('.fieldsetContent').slideToggle(200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:48:20.623

采用`event.preventDefault();`

**或者**

```
if(!confirmed){
    this.checked = true;
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:57:18.017

试试这个：

```
$("input[type=checkbox].warnOnUncheck").change( function(event) {    
    if ( event.isImmediatePropagationStopped() ) {
         return false;
    }
    if( !this.checked ) {    
        var message = $(this).data("warnMessage");    
        var confirmed = confirm( message );
        if( !confirmed ) {    
            this.checked = true;
            event.stopImmediatePropagation();
        }
    }    
}); 
```

阅读[http://api.jquery.com/event.isImmediatePropagationStopped/](http://api.jquery.com/event.isImmediatePropagationStopped/)

# java - Java Vender 循环初学者

> ID：15471704
> 
> 赞同：0
> 
> 时间：2013-03-18T07:30:03.000
> 
> 标签：java

当我输入**水、茶、苏打水**等饮料时，循环出现问题。

另外，我不希望它在用户输入饮料选择之前打印退货，但每次都会出现这种情况。

```
 import java.util.Scanner;

   public class Vending
   {

   public static void main(String[] args)
   {

       System.out.print("Enter a command = ");

       double balance = 0.0;
       String a;

    // scanner input
    Scanner in = new Scanner(System.in);

    while (in.hasNext()) 
    {
        String command = in.nextLine();
        if (command.equals("penny")) 
        {
            balance = balance + 0.01;
            System.out.println("balance = " + balance);
        } 
        if (command.equals("nickel")) 
        {
            balance = balance + 0.05;
            System.out.println("balance = " + balance);
        } 
        if (command.equals("dime"))
          {
            balance = balance + 0.10;
            System.out.println("balance = " + balance);
        } 
         if (command.equals("quarter"))
          {
            balance = balance + 0.25;
            System.out.println("balance = " + balance);
        } 
         if (command.equals("dollar"))
          {
            balance = balance + 1.00;
            System.out.println("balance = " + balance);
        } 

        else if (command.equals("break")) 
        {
            break;
        }

        else if (command.equals("water")) 
        {
          System.out.println("Water");
            System.out.println("balance = " + balance - 1.25);
        } 
        else if (command.equals("tea")) 
        {
          System.out.println("Tea");
             System.out.println("balance = " + balance - 1.50);
        } 
        else if (command.equals("soda")) 
        {
          System.out.println("soda");
             System.out.println("balance = " + balance - 1.75);
        } 
        else 
        {
            System.out.println("return " + balance + " to customer");
        }

        balance++;
    }

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:34:35.500

发生这种情况是因为您没有立即开始使用**`else if`**。您应该在第一次使用**`if`**.

它从第一个 if 开始，检查它，然后移动到下一个 if。当你到达它检查它的部分时，如果你是假`dollar`的，它只会检查其他部分。`dollar`这是因为他们是`else if`。

因此，如果您输入`dime`例如，它将添加 0.10，然后检查季度，然后检查美元。然后它进入`else if`块。然后它检查休息、水、茶等，然后发现所有都是假的。（你投入一角钱）然后点击 else 块打印余额。

因此，要整体解决这个问题，您应该使用单独的方法来检查货币价值或物品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:20:43.133

好的，我可以在这里看到几个问题

1.  而不是 in.nextLine()，而是使用 in.next()，这将在第一个“输入”时读取输入
2.  如果您希望在最后打印返回打印输出，请将其移出循环，以便一旦用户通过输入“break”完成，它将打印出返回位。
3.  你永远不会用物品的价格来减少余额......而不是余额++;。将其更改为余额 -= 价格；（余额=余额-价格；）

    ```
    while (in.hasNext()) {
        String command = in.next();
                    double price = 0.0;
                     ...
                     ...
        else if (command.equals("water")) {
            System.out.println("Water");
            price = 1.25;
        } else if (command.equals("tea")) {
            System.out.println("Tea");
            price = 1.50;
        } else if (command.equals("soda")) {
            System.out.println("soda");
            price =1.75;
        }

        balance -= price;
                    System.out.println("balance is " + balance);
    }
    System.out.println("return " + balance + " to customer"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:49:08.723

在 Java 7 switch 语句支持“字符串”值，尝试改变你的代码是这样的：

```
String command = in.nextLine();
switch(command) {
     case "penny": 
             //do something
             break;
     case "water": 
             //do something
             break;
     case "tea": 
             //do something
             break;
     case "soda": 
             //do something
             break;
     default: 
             System.out.println("return " + balance + " to customer");
}
balance++; 
```

希望这对您的问题有所帮助。

# c# - 创建一个扩展方法来做周期性工作

> ID：15471708
> 
> 赞同：5
> 
> 时间：2013-03-18T07:30:12.393
> 
> 标签：c#, extension-methods, async-await, c#-5.0

我在这里找到了一个关于如何使用 async/await 模式进行定期工作的好方法：[https ://stackoverflow.com/a/14297203/899260](https://stackoverflow.com/a/14297203/899260)

现在我想做的是创建一个扩展方法，这样我就可以做

```
someInstruction.DoPeriodic(TimeSpan.FromSeconds(5)); 
```

这有可能吗，如果，你会怎么做？

**编辑：**

到目前为止，我将上面 URL 中的代码重构为扩展方法，但我不知道如何从那里着手

```
 public static class ExtensionMethods {
    public static async Task<T> DoPeriodic<T>(this Task<T> task, CancellationToken token, TimeSpan dueTime, TimeSpan interval) {
        // Initial wait time before we begin the periodic loop.
        if (dueTime > TimeSpan.Zero)
            await Task.Delay(dueTime, token);

        // Repeat this loop until cancelled.
        while (!token.IsCancellationRequested) {

            // Wait to repeat again.
            if (interval > TimeSpan.Zero)
                await Task.Delay(interval, token);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:53:40.190

“定期工作”代码是否访问任何`someInstruction`公共成员？如果不是，那么首先使用扩展方法没有多大意义。

如果是这样，并假设它`someInstruction`是 的一个实例`SomeClass`，您可以执行以下操作：

```
public static class SomeClassExtensions
{
    public static async Task DoPeriodicWorkAsync(
                                       this SomeClass someInstruction,
                                       TimeSpan dueTime, 
                                       TimeSpan interval, 
                                       CancellationToken token)
    {
        //Create and return the task here
    }
} 
```

当然，您必须将其作为参数传递`someInstruction`给`Task`构造函数（有一个构造函数重载允许您这样做）。

**根据 OP 的评论**更新：****

 **如果你只是想有一个可重用的方法来定期执行任意代码，那么扩展方法不是你需要的，而是一个简单的实用程序类。从您提供的链接中调整代码，它将是这样的：

```
public static class PeriodicRunner
{
public static async Task DoPeriodicWorkAsync(
                                Action workToPerform,
                                TimeSpan dueTime, 
                                TimeSpan interval, 
                                CancellationToken token)
{
  // Initial wait time before we begin the periodic loop.
  if(dueTime > TimeSpan.Zero)
    await Task.Delay(dueTime, token);

  // Repeat this loop until cancelled.
  while(!token.IsCancellationRequested)
  {
    workToPerform();

    // Wait to repeat again.
    if(interval > TimeSpan.Zero)
      await Task.Delay(interval, token);       
  }
}
} 
```

然后你像这样使用它：

```
PeriodicRunner.DoPeriodicWorkAsync(MethodToRun, dueTime, interval, token);

void MethodToRun()
{
    //Code to run goes here
} 
```

或使用简单的 lambda 表达式：

```
PeriodicRunner.DoPeriodicWorkAsync(() => { /*Put the code to run here */},
   dueTime, interval, token); 
```**

# ruby-on-rails - rails中的复选框变量始终为真

> ID：15471710
> 
> 赞同：0
> 
> 时间：2013-03-18T07:30:18.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, checkbox

我有一个 Rails 应用程序，我在视图上使用复选框来确定 if 语句的哪一部分运行。我认为这将是一项简单的任务，但即使单击提交按钮后控制台中的响应同时显示：“adult”=>“0”（未选中时）和“adult”=>“1”（选中时）但如果我试试

```
puts @application.adult 
```

控制台只打印 true

这是我的 .html.haml 文件的相关部分......这是我最近的尝试

```
=simple_form_for( :application, :url => users_partner_acceptance_path( application ), :method => :put ) do | f |
  .clearfix
    .column
      =f.input :full_name, label: 'Full Name', placeholder: 'Full Name'
      .help-block *&nbsp;please enter your legal name
      =f.input :address_1, label: 'Address', placeholder: 'Apartment, Street'
      =f.check_box_tag :adult, inline_label: 'I am over 18 years old.', as: :boolean, checked = true
      .guardian
      =f.input :guardian_full_name, label: 'Guardian Full Name', placeholder: 'Full Name'
      =render 'partner_details_errors', application: application
  =f.submit 'Show Contract', class: 'btn btn-primary', data: { 'text' => 'Create Contract', 'disabled-text' => 'Creating ...' } 
```

我试过了

```
{:checked=> true} 
```

和

```
checked: true 
```

代替

```
checked = true 
```

可能还有一些我尝试过的

```
=f.check_box :adult 
```

和

```
=f.input :adult 
```

代替

```
=f.check_box_tag :adult 
```

在我的控制器中，我试图做这样的事情：

```
if @application.adult == true
  # do something
else
  # do something else
end 
```

任何建议，帮助非常感谢。谢谢！

我正在使用 Rails 3.2.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T15:00:13.737

`<%= f.check_box :hobby, {:multiple => "true"}, "hockeys", nil %>`

`<%= f.check_box :hobby, {:multiple => "true"}, "cricket", nil %>`

* * *

这将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:40:59.720

`check_box_tag(name, value = "1", checked = false, options = {})`

如果成人是 Application 类的一部分，那么你想要`f.check_box`而不是`f.check_box_tag`. 否则，您应该只拥有`check_box_tag...`.

`= f.label :adult, "I am over 18 years old."`

`= f.check_box, :adult`

您可以发布`params`提交时的哈希值吗？仅供参考，您不需要这样做，`if @application.adult == true`因为 if 已经这样做了。

# c# - 如何在 C# asp.net 中选择组合框中的项目时禁用按钮

> ID：15471712
> 
> 赞同：1
> 
> 时间：2013-03-18T07:30:22.830
> 
> 标签：c#, asp.net

如果组合框中没有选择任何内容，如何禁用按钮？这是我尝试过的代码

```
if (satelliteComboBox.Items.Count > 0)
{
    displayProductionDataButton.Enabled = false;
} 
```

我已经尝试过了，但它不起作用，我非常感谢任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:02:35.887

首先，您应该将 DropDownList 的 AutoPostBack 属性设置为 true。之后，在 SelectedIndexChange 事件中，您可以使用您想要的代码，如下所示：

```
if (DropDownList1.SelectedIndex < 0)
        {
            Button1.Enabled = false;
        }
        else
        {
            Button1.Enabled = true;
        } 
```

在此代码中，当用户未选择任何项目时，该按钮被禁用。或者您可以将DropDownList 的*第一*项设置为“选择...”之类的值并将代码更改为此，这对您的用户更好：

```
if (DropDownList1.SelectedIndex <= 0)
            {
                Button1.Enabled = false;
            }
            else
            {
                Button1.Enabled = true;
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T08:54:10.810

在组合框集合的第一个添加一个额外的项目，即默认为“选择”或加载组合框时选择的项目应为“选择”，因此组合框的选定索引将为 0，所以只需检查是否

```
if (comboBox1.SelectedIndex == 0)
 {
   //No item Selected
   displayProductionDataButton.Enabled = false;
 }
else
{
 //item selected
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:33:19.370

试过了

```
 if (satelliteComboBox.Items.Count is nothing)
   {
       displayProductionDataButton.Enabled = false;
   } 
```

# windows-phone-7.1 - XAP 文件无效

> ID：15471717
> 
> 赞同：1
> 
> 时间：2013-03-18T07:30:51.410
> 
> 标签：windows-phone-7.1, windows-phone

我已经在 windows phone 市场提交了我的应用程序，这里是链接

[http://www.windowsphone.com/en-in/store/app/mywannado/23068282-3b9b-4cb2-aa6e-e2318b13f3a7](http://www.windowsphone.com/en-in/store/app/mywannado/23068282-3b9b-4cb2-aa6e-e2318b13f3a7)

我选择了印度作为市场，提交时价格为 0.0（免费应用）。

我试图从我的系统下载它，但它显示

“您无法在该地区获取应用程序。您可以查看您所在地区的 Windows Phone 应用商店以查看该应用程序是否可用”

当我尝试从我的手机下载该应用程序时，我在市场上找不到该应用程序。我正在使用诺基亚 Lumia510，并使用同一个帐户在移动设备上登录。所以我尝试了“手动下载并安装”

但这也失败了，我可以下载“xap”文件，但是当我尝试部署它时，它显示“XAP 文件无效”。

您能否解释一下为什么会发生这种情况，以及我应该怎么做才能从市场上安装我的应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:12:03.620

我从另一个开发者论坛得到了解决方案，实际上我们无法安装从市场下载的 xap 文件到模拟器，因为它是加密的。我们只能从开发者端安装 xap 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:01:40.363

当我将我的应用程序提交到 Marketplace 时，经过认证后的几天时间，它才出现在可供下载的目标区域中。

# mongodb - 如何在 MongoDB 上按字符串长度对结果进行排序

> ID：15471718
> 
> 赞同：18
> 
> 时间：2013-03-18T07:30:57.517
> 
> 标签：mongodb, sql-order-by

我可以在mysql上轻松完成

```
select * from TABLE order by length(FIELD) asc 
```

我怎样才能在 MongoDB 上做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-05-24T14:48:40.440

MongoDB 3.4 引入了[`$strLenCP`](https://docs.mongodb.com/manual/reference/operator/aggregation/strLenCP/)最终支持这一点的聚合运算符。一个例子：

```
db.collection.aggregate(
    [
        {$project: {
            "field": 1,
            "field_length": { $strLenCP: "$field" }
        }},
        {$sort: {"field_length": -1}},
        {$project: {"field_length": 0}}
    ]
) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-07-20T18:18:16.103

假设您的架构类似于：

```
example = {_id: "XXX", text: "YYY"}

db.example.aggregate([
 {$project : {text : 1, length : {$size : "$text"}}}, 
 {$sort : {length : 1}}
]); 
```

我认为这可以完成这项工作，但仅适用于 mongo 2.6 及更高版本

# c - 什么是 TpCallbackMayRunLong()？

> ID：15471719
> 
> 赞同：0
> 
> 时间：2013-03-18T07:31:02.750
> 
> 标签：c, windows, netbeans, tcp, mingw

我在这个函数中遇到了一个分段错误，但不知道它做了什么，为什么会出现分段错误，甚至我的代码在哪里调用它。

任何人都可以解释一下吗？Windows 中使用 Netbeans IDE 和 MinGW 工具链的 C 代码。

* * *

[更新] 通常，我会按照@JoachimPileborg 的建议进行操作，但是当发生分段错误时，调用堆栈不包含我的代码。事实上，它读

```
ntdll!TpCallbackMayRunLong ()
?? ()
ntdll!TpCallbackMayRunLong ()
?? () 
```

而那些`?? ()`评估为零！

我想，从名称上看，它`TpCallbackMayRunLong()`是在空闲时间由系统调用的，当然不是从我的代码中调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:49:44.120

我从来没有发现是什么原因造成的，但是从函数的名称中我猜它不喜欢我的阻塞等待（[timeout = zer0](http://msdn.microsoft.com/en-us/library/aa363190%28v=vs.85%29.aspx)），所以我将超时设置为 20 秒，它工作得很好。

我知道发送方会不断传输，20 秒刚好够同步发送方和接收方的启动。ymmv

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:05:34.717

`TpCallbackMayRunLong`当您使用删除关键部分`DeleteCriticalSection`然后尝试在已删除的关键部分上调用`EnterCriticalSection`或时调用`LeaveCriticalSection`。

其他事情可能会导致相同的错误，但我发现这是我的情况的原因。

# php - PHP 脚本在浏览器中运行良好，但不能通过命令行

> ID：15471721
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:31:13.077
> 
> 标签：php, mysql, command-line

我在 Windows 7 上使用 Xampp。我有以下简单的脚本

```
<?php 
require("classes/autoloader-class.php"); 
$query=new login();
$query->Query("INSERT INTO  poupdate(`po`, `fval`, `nr`, `fsa`, `act`, `doctype`, `usr`) VALUES ('PO','Fval','nr','FSA','ACT','DOCTYPE','USER')");
?> 
```

脚本在浏览器中运行良好并且记录被插入到数据库中但是当我尝试通过以下 PHP 命令时没有插入记录

```
D:\xampp\php\php.exe -c -f D:\xampp\htdocs\mytest\test.php 
```

当我回显某些内容时，它会在命令行中输出文本；所以我认为mysql有一些问题，但没有错误。

请注意`-c`用于从 php.ini 加载库

我该如何排除故障？提前致谢

**[以下命令帮助我执行命令]**

```
D:\xampp\htdocs\mytest>D:\xampp\php\php.exe -c -f test.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:36:51.410

只是一个想法。通过命令行执行时，哪个目录是工作路径？即：执行命令时，你“站在”哪里？

尝试`mytest`先移动到该文件夹​​。

```
> D:
> cd D:\xampp\htdocs\mytest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:56:37.217

你能注意到`require("classes/autoloader-class.php");`和之间有什么偏差`D:\xampp\htdocs\mytest\test.php`吗？就像，您正在包含具有类 UNIX 目录分隔符的文件，以及具有类 Windows 的运行脚本。

这*应该*会给你一个错误，检查你的`php.ini`.

# ios - 按钮不会在循环前隐藏

> ID：15471725
> 
> 赞同：0
> 
> 时间：2013-03-18T07:31:19.753
> 
> 标签：ios, objective-c, cocoa-touch

我有一个附加到 IBAction 的按钮，该按钮应该在循环之前隐藏，但它从不隐藏。

```
- (IBAction)method:(id)sender
{
    button.hidden = YES;
    while(...) //button should be hidden while control is in loop but this never happens.
    {
    }
} 
```

不知道为什么这不起作用任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:35:22.267

您已经设置了它的`hidden`属性，但是视图并没有立即绘制自己。它必须通过运行循环的迭代来重绘其内容。如果您的方法中有一个长时间运行的同步任务，则控制永远不会返回到运行循环，直到您的方法退出，因此您看不到设置`hidden`属性的效果。

考虑异步执行您的任务。就像是

```
button.hidden = YES;
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    while (...) {
        // do your work here
    }
}); 
```

# c# - 将一个 msi 复制到内存，然后从中创建一个数据库对象

> ID：15471726
> 
> 赞同：1
> 
> 时间：2013-03-18T07:31:23.157
> 
> 标签：c#, windows-installer, dtf

我在这里非常深入，所以请接受我的歉意，因为我不知道我在说什么。

我的目标是采用现有的 msi，对其进行一些更改，然后从中创建一个转换，使 msi 保持其原始状态。正如许多其他问题所建议的那样，我正在使用 DTF（WiX 的一部分）。

我的问题源于我需要两个数据库对象来创建转换；更改的数据库和参考。显然我不能从同一个文件创建两个对象，因为第一个对象锁定了它。最简单的选择是在临时目录中创建文件的副本并从新文件路径创建新对象。但是，除了保存转换之外，我真的想避免写入磁盘，因为该程序可能与不同的 VM、本地存储和网络存储混合使用。

根据我的收集，DTF 确实允许您从句柄创建数据库对象，因此我目前的方法是以某种方式在内存中使用句柄创建 msi 的副本，然后将其传递给数据库构造函数以创建一个临时对象我可以在创建转换之前对其进行更改。

不过，我不知道如何实现这一目标，我什至不确定这是否可能。MemoryMappedFile 似乎是一个不错的起点，但是当从文件创建一个文件时，它是持久的，我不知道如何基于文件创建非持久 mmf 或创建非持久 mmf 然后读取微星进去。

是否有任何可行的方法来创建磁盘上只有一个 msi 的转换？绝对欢迎任何想法/指导/呼吁接受写入磁盘，因为我显然超出了我的深度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:16:47.233

这是我的做法。我将基本 MSI 复制到一个临时文件，对其进行修改，然后使用这两个文件生成转换。不知道为什么这一切都需要在内存中完成。

```
private void GenerateTransform(string baseMSI, string outputMST)
{
    string tempMSI = Path.Combine(Environment.GetEnvironmentVariable("TEMP"), Guid.NewGuid().ToString() + ".msi");
    File.Copy(baseMSI, tempMSI, true);

    using (var baseDatabase = new Database(baseMSI, DatabaseOpenMode.ReadOnly))
    {
        using (var tempDatabase = new Database(tempMSI, DatabaseOpenMode.Direct))
        {
            // Do Stuff Here

            // Finally, Generate Transform
            tempDatabase.GenerateTransform(baseDatabase, outputMST);
            tempDatabase.CreateTransformSummaryInfo(baseDatabase, outputMST, TransformErrors.None, TransformValidations.None);
        }
    }

    File.Delete(tempMSI);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:58:13.173

我尚未对其进行测试，但也许您可以使用以下方法创建您的 MSI 副本：

```
Handle copyOfMSI = CreateFile(..., dwShareMode=FILE_SHARE_WRITE, ..., dwFlagsAndAttributes=FILE_ATTRIBUTE_TEMPORARY | FILE_FLAG_DELETE_ON_CLOSE)` 
```

将您的 MSI 写入其中，不要关闭 copyOfMSI，从该文件开始工作，最后关闭 copyOfMSI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:46:03.490

我相信你可能会被困在这里。如果您打开 .msi 文件进行修改，底层的 Windows Installer 数据库 API 将锁定它。这将防止任何其他句柄被打开到 .msi 文件。

但是，有一件事要尝试。我不确定 DTF 是否可行（我知道如何在本机代码中尝试它）但是：

1.  打开 .msi 文件进行编辑（您需要尝试直接和事务模式，因为其中一种可能在另一种不适用的情况下工作）。

2.  创建一个字符串（是的，一个字符串），即`"#" + the numeric value of the datbase handle`. 在本机代码中，您基本上可以执行`printf("#%u", hDatabase);`. 使用对象的`String.Format`DTF可能会得到相同的结果。`IntPtr handle``Database`

3.  `#HANDLENUMBER`这次将字符串以只读方式传递给打开的数据库 API。

4.  使用第一个句柄修改数据库。

5.  尝试生成变换。

如果这不起作用，您可以尝试许多其他方法。首先，以只读方式打开原始句柄，然后在步骤 4 中以事务或直接方式打开数据库（基本上是切换它们）。如果这不起作用，请尝试在第 5 步之前提交数据库。但是，提交数据库可能需要写入磁盘（因此是临时文件）。

无论如何，如果上述方法不起作用，我非常确信使用可用的 API 无法实现您想要的。祝你好运！

# ios - AVPlayer 类 & AVPlayerStatusFailed

> ID：15471733
> 
> 赞同：4
> 
> 时间：2013-03-18T07:31:54.770
> 
> 标签：ios, audio, streaming, avplayer

我正在使用[AVPlayer 类](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)在我们的音乐流媒体应用程序中播放服务器 mp3 URL。它工作得很好，但有时 AVPlayer 状态设置为“AVPlayerStatusFailed”。并且文档建议，当发生这种情况时，我们需要删除当前的 AVPlayer 对象并实例化一个新对象。

这种恢复方法有时会失败，当这种恢复方法失败时，无论 AVPlayer 对象被重新初始化多少次，它都不会播放任何歌曲。有人遇到过类似的问题吗？并有解决方案？

# javascript - 在选择中使用 ngPluralize

> ID：15471736
> 
> 赞同：1
> 
> 时间：2013-03-18T07:32:05.563
> 
> 标签：javascript, angularjs

是否可以在配置有 ngOoptions 的选择标记内使用 ngPluralize 来复数下拉列表的选项？

我目前有以下控制器

```
function Ctrl ($scope) {
  $scope.ranges = [1, 2, 3, 4, 5];
  $scope.range = $scope.ranges[4];

  $scope.$watch('range', function(val) {
    console.log('change' + val);
  });
}; 
```

和以下标记

```
<div ng-controller="LiveViewerCtrl">
  <select ng-model="range" 
          ng-options="range for range in ranges" 
          ng-pluralize 
          count="range" 
          when="{'1': '1 Minute', 'other': '{} Minutes'}">
  </select>
</div> 
```

我还尝试使用 ng-repeat 自己创建选项，效果很好。不幸的是，下拉列表的默认值是空的，并且没有预先选择，尽管我在控制器中指定了默认值。如果我使用 ngOptions 方法，则预选有效，但值不是复数形式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T09:50:33.787

正如[Dmitry](https://stackoverflow.com/questions/15471736/using-ngpluralize-within-select#comment21897385_15471736)解释的那样，`ngPluralize`不能与 一起使用`ngOptions`，但没有什么能阻止您将其与 一起使用`ngRepeat`：

HTML：

```
<body ng-controller="AppController">

  <select ng-model="selectedRange">
    <option value="">Select number ...</option>
    <option 
      ng-repeat="range in ranges"
      ng-pluralize
      count="range"
      when="{1: '{{range}} minute', other: '{{range}} minutes'}"
    >{{range}}</option>  
  </select>

</body> 
```

JS：

```
app.controller('AppController',
    [
      '$scope',
      function($scope) {
        $scope.ranges = [1, 2, 3, 4, 5];
        $scope.selectedRange = $scope.ranges[4];
      }
    ]
  ); 
```

[普朗克](http://plnkr.co/edit/CZ4xMfDHEmt4jgOlQlFY)

顺便说一句，关于您的“预选”麻烦，请注意 JavaScript 数组是[零索引的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)。

# python - 使用 gspread 访问谷歌文档

> ID：15471738
> 
> 赞同：4
> 
> 时间：2013-03-18T07:32:08.127
> 
> 标签：python, google-docs-api

我正在尝试使用 gspread 实用程序访问谷歌文档，当我在我的谷歌文档上尝试以下代码时我成功了

```
import gspread        
g = gspread.login('gmailID', 'password')
worksheet = g.open('GoogleSheetName').get_worksheet(0)          
val = worksheet.cell(2, 1).value       
print val 
```

但是，当我为使用谷歌服务器的公司帐户尝试相同的代码时，出现以下错误：

```
 raise AuthenticationError("Unable to authenticate. %s code" % ex.code)
gspread.exceptions.AuthenticationError: Unable to authenticate. 500 code 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-25T13:41:58.653

看看 gspread 的作者在[这里](https://github.com/burnash/gspread)说了什么：

> 两因素授权
> 
> 如果您的 Google 帐户受到双重授权的保护，您必须创建一个应用程序专用密码并像往常一样使用您的电子邮件登录。
> 
> 否则你会得到一个 AuthenticationError: Unable to authentication。尝试登录时出现 403 代码。

# sql - 检查不平等的有效方法

> ID：15471741
> 
> 赞同：4
> 
> 时间：2013-03-18T07:32:09.130
> 
> 标签：sql, sql-server

我正在写一个正在做的触发器

```
IF (@A <> @B)
    ... 
```

但这不适用于@A 或@B 上的NULL 值。它通常完成的方式是

```
IF (@A <> @B) OR (@A IS NOT NULL AND @B IS NULL) OR (@A IS NULL AND @B IS NOT NULL) 
```

但这涉及最多 9 次比较与 1 次比较！

我可以做

```
SET ANSI_NULLS OFF 
```

但显然不建议这样做（并且不推荐使用）。

那么什么是最好的解决方案呢？当它应该是 1 时，只需进行 9 次比较即可进行简单的不等式检查？触发器不是性能关键，但它确实需要快速。批量加载时，这可能会大大减慢速度。

**性能测试**

这是一个[性能测试](http://pastebin.com/rwtWVfqV)的结果，该测试检查了一百万次是否不相等，因此 90% 的时间值不相等，10% 的时间每个值可能为空。

```
IF (@A <> @B) OR (@A IS NULL AND @B IS NOT NULL) OR (@A IS NOT NULL AND @B IS NULL) 
```

结果：平均3848ms

```
IF (ISNULL(@A, 0) <> ISNULL(@B, 0)) 
```

结果：平均 3942ms

```
IF (@A = @B) GOTO Equal ELSE IF @A IS NULL AND @B IS NULL GOTO Equal 
```

结果：平均 4140ms

```
IF EXISTS (SELECT @A EXCEPT SELECT @B) 
```

结果：平均 7795ms

时间并不重要，重要的是相对差异。显然，**经典方法是最快的**。可能 MSSQL 已针对此类检查进行了内部优化。

在 MacBook Pro（运行 MSSQL 2008 Express 的 Vista VM 内的 Intel Core 2 Duo、2.4Ghz、8GB RAM）上进行测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T07:44:37.900

ANSI SQL 有`IS DISTINCT FROM`，但在 SQL Server 中没有实现。它可以以一种不依赖于魔法常数的方式进行[模拟，并且如果在列上使用它是 sargable](http://web.archive.org/web/20180422151947/http://sqlblog.com:80/blogs/paul_white/archive/2011/06/22/undocumented-query-plans-equality-comparisons.aspx)

```
IF EXISTS (SELECT @A EXCEPT SELECT @B)
     PRINT 'Different' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:42:28.613

在我看来，这是检查可空性并提供默认值的最佳方式。

```
IF ( ISNULL(@A, 0) <> ISNULL(@B, 0) ) 
```

一般语法

```
ISNULL ( check_expression , replacement_value ) 
```

> check_expression的值如果不为NULL则返回；否则，如果类型不同，则在隐式转换为 check_expression 的类型后返回 replacement_value。如果 replacement_value 比 check_expression 长，则 replacement_value 可以被截断。

参考：[MSDN - ISNULL](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T07:43:10.463

你可以做以下

`ISNULL(@A,'N') <> ISNULL(@B,'N')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T01:25:54.597

这是一个[性能测试](http://pastebin.com/rwtWVfqV)的结果，该测试检查了一百万次是否不相等，因此 90% 的时间值不相等，10% 的时间每个值可能为空。

```
IF (@A <> @B) OR (@A IS NULL AND @B IS NOT NULL) OR (@A IS NOT NULL AND @B IS NULL) 
```

结果：平均3848ms

```
IF (ISNULL(@A, 0) <> ISNULL(@B, 0)) 
```

结果：平均 3942ms

```
IF (@A = @B) GOTO Equal ELSE IF @A IS NULL AND @B IS NULL GOTO Equal 
```

结果：平均 4140ms

```
IF EXISTS (SELECT @A EXCEPT SELECT @B) 
```

结果：平均 7795ms

时间并不重要，重要的是相对差异。显然，**经典方法是最快的**。可能 MSSQL 已针对此类检查进行了内部优化。

在 MacBook Pro（运行 MSSQL 2008 Express 的 Vista VM 内的 Intel Core 2 Duo、2.4Ghz、8GB RAM）上进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T09:13:41.453

我知道很多人不会喜欢这个，但由于性能是一个**重要**的问题，我正在使用它（除非有人给出充分的理由）

```
IF @A = @B GOTO Equal ELSE IF @A IS NULL AND @B IS NULL GOTO Equal
NotEqual:
  PRINT 'Different'
Equal: 
```

这要快得多，因为几乎总是 @A 和 @B 相等，只进行 1 次比较。在 @A 和 @B 不相等的少数情况下，平均需要 1.5 次进一步比较才能确定不相等。

这是用于触发器内行更新的列级审计。比较 @A 和 @B 表示每个表的每次更新中每一行中每一列的“旧值”和“新值”。

# html - 如何在引导模式表单上修复 php date-picker 的前沿？

> ID：15471742
> 
> 赞同：1
> 
> 时间：2013-03-18T07:32:10.417
> 
> 标签：html, twitter-bootstrap, datepicker, modal-dialog

我在[Twitter Bootstrap](http://twitter.github.com/bootstrap/) [Modal Form](http://twitter.github.com/bootstrap/javascript.html#myModal)上使用[PHP 日期选择器](http://www.triconsole.com/php/calendar_datepicker.php)，但它存在一些设计问题。

当[模态表单](http://twitter.github.com/bootstrap/javascript.html#myModal)出现点击事件时，它没有在模态表单上显示正确的日期选择器设计。

这仅适用于 Mozilla Firefox v12.0 和 IE-8 浏览器。

**折断：**

![在此处输入图像描述](../Images/e0f1611081ac7fea731a58c707b6eb08.png)

**这里的代码片段**

```
<div class="modal-body">
    <div id="firdiv" style="float:left; height:210px; width:260px; padding-bottom:30px;">
     <!--PHP Datepicker -->
     <?php
        include_once('calendar/tc_calendar.php');
        $curr_date = date("Y-m-d", time());
        $datepicker2=plugins_url('calendar/', __FILE__);
        $myCalendar = new tc_calendar("date1");
        $myCalendar->setIcon($datepicker2."images/iconCalendar.gif");
        $myCalendar->setDate(date("d"), date("m"), date("Y"));
        $myCalendar->setPath($datepicker2);
        $myCalendar->setYearInterval(2035,date('Y'));
        $myCalendar->dateAllow($curr_date, "2035-03-01", false);
        $myCalendar->setOnChange("myChanged()");
        $myCalendar->writeScript();
    ?>
    </div>
</div> 
```

可能是一些内联 CSS 可以帮助它。

如果有人了解此设计问题，请发帖给我，或者我该如何解决？提前致谢

# asp.net-mvc-3 - MVC3将ControllerContext传递给线程？

> ID：15471746
> 
> 赞同：4
> 
> 时间：2013-03-18T07:32:26.620
> 
> 标签：asp.net-mvc-3

我在我的 MVC3 应用程序中使用 Rotativa 将 pdf 生成到内存流中，然后作为电子邮件附件通过电子邮件发送出去。这工作正常，但速度很慢（只有 1 个用户约 5-7 秒）所以我一直在尝试将它放入一个单独的线程中，这样用户就不会陷入巨大的延迟。

我一直面临的问题是 Rotativa 需要控制器上下文将数据生成到内存流中，这意味着如果您尝试将其放在单独的线程中并向用户返回通知，那么上下文将被释放并且pdf生成将失败。

不幸的是，我在服务器端进行了电子邮件验证检查，并在适当的情况下返回真/假，假将提示用户修复并重试。这意味着我不能仅仅假设电子邮件始终有效（我可以通过 jquery 来完成，但如果他们将其关闭并尝试提交，他们将不会收到错误消息）。

到目前为止，我已经尝试过：

*   创建一个新线程并传入上下文
*   通过将上下文复制到新变量来复制上下文
*   序列化上下文，将流传递给新线程并反序列化（不幸的是上下文不可序列化）

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T23:00:41.620

这是我在后台运行一个带有上下文的长进程的方法。我正在使用由数据库支持的自定义会话。您需要将所需的任何值传递给“背景”操作。

```
using (var client = new WebClient())
{
     var values = new NameValueCollection
     {
         { "sessionid", DataSession.Id.ExtractSid() }
     };
     client.UploadValuesAsync(new Uri(Url.AbsoluteAction("ResultsCallback", "Quote")), values);
} 
```

# javascript - 需要将 vbscript 转换为 javascript

> ID：15471747
> 
> 赞同：-1
> 
> 时间：2013-03-18T07:32:27.290
> 
> 标签：javascript, printing, vbscript

我需要将此 vbscript 代码转换为 javascript，我使用它不显示打印对话框并使用默认打印机进行打印，它在 IE 中正常工作，我想让它在 Fire fox 和其他浏览器中运行。

VB脚本代码：

```
 sub Print()
        OLECMDID_PRINT = 6
        OLECMDEXECOPT_DONTPROMPTUSER = 2
        OLECMDEXECOPT_PROMPTUSER = 1
        call WB.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER,1)
    End Sub
    document.write "<object id='WB' width='0' height='0' classid='CLSID:8856F961-340A-    11D0-A96B-00C04FD705A2'></object>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:35:16.493

你为什么不直接使用

```
window.print(); 
```

如果您可以在没有用户交互的情况下打印，这是一个安全漏洞，需要尽快修复。

# java - 如何在这里解密消息加密？

> ID：15471750
> 
> 赞同：0
> 
> 时间：2013-03-18T07:32:46.683
> 
> 标签：java, encryption

```
try{
    String plainData="my name is laksahan",cipherText,decryptedText;
    KeyGenerator keyGen = KeyGenerator.getInstance("AES");
    keyGen.init(128);
    SecretKey secretKey = keyGen.generateKey();
    Cipher aesCipher = Cipher.getInstance("AES");
    aesCipher.init(Cipher.ENCRYPT_MODE,secretKey);
    byte[] byteDataToEncrypt = plainData.getBytes();
    byte[] byteCipherText = aesCipher.doFinal(byteDataToEncrypt);
    cipherText = new BASE64Encoder().encode(byteCipherText);
System.out.println(cipherText);
}catch(Exception e){

} 
```

我也有解密代码，但我想使用 cipherText 的输出解密消息。

例如; 我的密文输出是`uSG1OxJPywzU4JylpqgS6SoB9t21GZ4iN3bY2M6Qf10=`.

我想解密这个：`uSG1OxJPywzU4JylpqgS6SoB9t21GZ4iN3bY2M6Qf10=`

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:10:18.117

试试这个代码，它在我的电脑上运行良好。祝你好运！

```
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import sun.misc.BASE64Encoder;
import sun.misc.BASE64Decoder;

public class AESExample
{
    public static void main(String[] args)
    {
        try
        {
            String plainData = "my name is laksahan", cipherText, decryptedText;
            KeyGenerator keyGen = KeyGenerator.getInstance("AES");
            keyGen.init(128);
            SecretKey secretKey = keyGen.generateKey();
            cipherText = encrypt(plainData, secretKey);
            System.out.println(cipherText);
            decryptedText = decrypt(cipherText, secretKey);
            System.out.println(decryptedText);
        } catch (Exception e)
        {
            e.printStackTrace();
        }

    }

    public static String encrypt(String plainData, SecretKey secretKey) throws Exception
    {
        Cipher aesCipher = Cipher.getInstance("AES");
        aesCipher.init(Cipher.ENCRYPT_MODE, secretKey);
        byte[] byteDataToEncrypt = plainData.getBytes();
        byte[] byteCipherText = aesCipher.doFinal(byteDataToEncrypt);
        return new BASE64Encoder().encode(byteCipherText);
    }

    public static String decrypt(String cipherData, SecretKey secretKey) throws Exception
    {
        byte[] data = new BASE64Decoder().decodeBuffer(cipherData);
        Cipher aesCipher = Cipher.getInstance("AES");
        aesCipher.init(Cipher.DECRYPT_MODE, secretKey);
        byte[] plainData = aesCipher.doFinal(data);
        return new String(plainData);
    }

} 
```

* * *

如果您想使用客户密钥，请尝试以下代码，只需记住密钥长度为 128 位。顺便说一句，我更喜欢将我的密钥存储在密钥库文件中！

```
import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;

import sun.misc.BASE64Encoder;
import sun.misc.BASE64Decoder;

public class AESExample
{

    public static void main(String[] args)
    {
        try
        {
            byte[]key={-4, -14, 106, -75, -9, 65, -95, 77, -52, 73, -87, -101, 80, 94, -59, -66};
            String plainData = "my name is laksahan", cipherText, decryptedText;
            System.out.println(key.length);
            cipherText = encrypt(plainData, key);
            System.out.println(cipherText);
            decryptedText = decrypt(cipherText, key);
            System.out.println(decryptedText);
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    public static String encrypt(String plainData, byte[] key) throws Exception
    {
        Cipher aesCipher = Cipher.getInstance("AES");
        SecretKeySpec keySpec = new SecretKeySpec(key, "AES");
        aesCipher.init(Cipher.ENCRYPT_MODE, keySpec);
        byte[] byteDataToEncrypt = plainData.getBytes();
        byte[] byteCipherText = aesCipher.doFinal(byteDataToEncrypt);
        return new BASE64Encoder().encode(byteCipherText);
    }

    public static String decrypt(String cipherData, byte[] key) throws Exception
    {
        byte[] data = new BASE64Decoder().decodeBuffer(cipherData);
        SecretKeySpec keySpec = new SecretKeySpec(key, "AES");
        Cipher aesCipher = Cipher.getInstance("AES");
        aesCipher.init(Cipher.DECRYPT_MODE, keySpec);
        byte[] plainData = aesCipher.doFinal(data);
        return new String(plainData);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:34:47.133

尝试这个

```
 byte[] data = new BASE64Decoder().decodeBuffer(cipherData);
        Cipher aesCipher = Cipher.getInstance("AES");
        aesCipher.init(Cipher.DECRYPT_MODE, secretKeyUsed while encrypting);
        byte[] plainData = aesCipher.doFinal(data);
        return new String(plainData); 
```

# java - 处理所有异常并显示自定义错误页面而不是默认框架错误页面

> ID：15471751
> 
> 赞同：1
> 
> 时间：2013-03-18T07:32:46.807
> 
> 标签：java, playframework, playframework-1.x

我正在使用**Play!Framework 1.2.5**。我想以定制的方式处理游戏框架中的所有错误。例如，如果出现路由错误，我想显示适当的错误消息，而不是显示整个路由文件。同样对于其他错误，我想显示我自己的错误页面。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T10:47:32.930

`errors`您可以通过在 package.json上创建新的子包来定义自己的错误页面`views`。在这个子包中，您可以使用**错误代码**名称为您的自定义错误页面创建模板文件，例如：

1.  `404.html`对于**未找到错误**页面
2.  `403.html`禁止**错误**页面
3.  `500.html`内部**服务器错误**页面
4.  ETC...

不用担心默认路由未找到错误页面，它仅在开发模式下显示以帮助开发阶段。在生产模式下，不会显示此错误页面（默认框架错误页面）。

**- 更新**

此`@Catch`注释可能对处理其他类型的异常有用。它充当控制器中操作的拦截器，如果在执行某些操作时发生异常，它将处理异常。请注意，此注释仅适用于**Controller**类。

[请在此处](http://www.playframework.com/documentation/1.2.5/controllers#catch)查看文档以进一步阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:32:03.080

我们需要比@iwawiwi 提到的更多的控制来确定数据库抛出了什么数据库约束消息。这是通过在类中使用带有这样`@Catch`注释的方法来解决的`Controller`：

```
@Catch(value=PersistenceException.class)
public static void handleException(PersistenceException exception) {
    ..
} 
```

我以前没有听说过那个注释，这在我的情况下效果很好。

对于缺失的路线，我们也在其中添加了一些内容`Controller`：

```
@Catch(value=ActionNotFoundException.class)
public static void catchRouteNotFound(ActionNotFoundException exception) {
    String referer = session.get("referer");

    Logger.error("ActionNotFoundException, referer: %s", referer);
    Logger.error("Exception: %s", exception);
} 
```

通过这种方式，我们可以找出应用程序中丢失的路线/错误的链接。

# google-maps - JSON 状态码 610

> ID：15471760
> 
> 赞同：1
> 
> 时间：2013-03-18T07:33:24.093
> 
> 标签：google-maps, geocoding, google-geocoding-api

我通过将纬度和经度值传递给以下 URL 来获取街道、城市和国家/地区的详细信息：`http://maps.google.com/maps/geo?q="+la+","+lo;`. 但是，这突然停止工作，因为我现在得到返回的状态代码 610 而不是 200。我用谷歌搜索并发现 Google 已弃用 V3 版本的旧版本，建议使用更新到此版本。新的 URL 将是这样的；

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=25.34041,-55.489864&sensor=false 
```

但是，我完全迷失了如何使用这个？什么是 Google API 密钥？我应该从哪里获得这个。早些时候我使用上述 URL 并将以下内容导入到我的项目中：

```
import org.json.me.JSONArray;
import org.json.me.JSONObject; 
```

请帮助如何进行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:01:16.200

您正在请求正确的 URL，但您的 latlong 值可能无效。我请求网址：

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=25.34041,-55.489864&sensor=false 
```

结果。

```
{
   "results" : [],
   "status" : "ZERO_RESULTS"
} 
```

使用不同的 latlong 但相同的 URL 请求：

```
http://maps.googleapis.com/maps/api/geocode/xml?latlng=51.962146,7.602304&sensor=false"

{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "Rishon-Le-Zion-Ring",
               "short_name" : "K6",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "North Rhine-Westphalia",
               "short_name" : "NRW",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "48149",
               "short_name" : "48149",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "Rishon-Le-Zion-Ring, 48149 Münster, Germany",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 51.96354080,
                  "lng" : 7.602404200000001
               },
               "southwest" : {
                  "lat" : 51.96109890,
                  "lng" : 7.601790299999998
               }
            },
            "location" : {
               "lat" : 51.96233620,
               "lng" : 7.602270099999999
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 51.96366883029150,
                  "lng" : 7.603446230291501
               },
               "southwest" : {
                  "lat" : 51.96097086970850,
                  "lng" : 7.600748269708497
               }
            }
         },
         "types" : [ "route" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "48149",
               "short_name" : "48149",
               "types" : [ "postal_code" ]
            },
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "administrative_area_level_3", "political" ]
            },
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "North Rhine-Westphalia",
               "short_name" : "NRW",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "48149 Münster, Germany",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 51.9846220,
                  "lng" : 7.6245910
               },
               "southwest" : {
                  "lat" : 51.9381030,
                  "lng" : 7.57505310
               }
            },
            "location" : {
               "lat" : 51.96236820,
               "lng" : 7.595598700000001
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 51.9846220,
                  "lng" : 7.6245910
               },
               "southwest" : {
                  "lat" : 51.9381030,
                  "lng" : 7.57505310
               }
            }
         },
         "types" : [ "postal_code" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "North Rhine-Westphalia",
               "short_name" : "NRW",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Münster, Germany",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 52.06001970,
                  "lng" : 7.774361699999999
               },
               "southwest" : {
                  "lat" : 51.84015110000001,
                  "lng" : 7.473832599999999
               }
            },
            "location" : {
               "lat" : 51.96066490,
               "lng" : 7.62613470
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 52.06001970,
                  "lng" : 7.774361699999999
               },
               "southwest" : {
                  "lat" : 51.84015110000001,
                  "lng" : 7.473832599999999
               }
            }
         },
         "types" : [ "locality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Münster",
               "short_name" : "Münster",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "North Rhine-Westphalia",
               "short_name" : "NRW",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Münster, Germany",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 52.47498539999999,
                  "lng" : 8.320101899999999
               },
               "southwest" : {
                  "lat" : 51.48078280,
                  "lng" : 6.386867199999999
               }
            },
            "location" : {
               "lat" : 51.94711969999999,
               "lng" : 7.584531999999999
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 52.47498539999999,
                  "lng" : 8.320101899999999
               },
               "southwest" : {
                  "lat" : 51.48078280,
                  "lng" : 6.386867199999999
               }
            }
         },
         "types" : [ "administrative_area_level_2", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "North Rhine-Westphalia",
               "short_name" : "NRW",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "North Rhine-Westphalia, Germany",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 52.53146959999999,
                  "lng" : 9.461634900000002
               },
               "southwest" : {
                  "lat" : 50.3227010,
                  "lng" : 5.86634250
               }
            },
            "location" : {
               "lat" : 51.43323669999999,
               "lng" : 7.661593799999999
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 52.53146959999999,
                  "lng" : 9.461634900000002
               },
               "southwest" : {
                  "lat" : 50.3227010,
                  "lng" : 5.86634250
               }
            }
         },
         "types" : [ "administrative_area_level_1", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Germany",
               "short_name" : "DE",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Germany",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 55.0583470,
                  "lng" : 15.04189620
               },
               "southwest" : {
                  "lat" : 47.27011150,
                  "lng" : 5.86634250
               }
            },
            "location" : {
               "lat" : 51.1656910,
               "lng" : 10.4515260
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 55.0583470,
                  "lng" : 15.04189620
               },
               "southwest" : {
                  "lat" : 47.27011150,
                  "lng" : 5.86634250
               }
            }
         },
         "types" : [ "country", "political" ]
      }
   ],
   "status" : "OK"
} 
```

# ios5 - 在 UITableViewCell 中添加渐变隐藏 UILabel 文本

> ID：15471762
> 
> 赞同：0
> 
> 时间：2013-03-18T07:33:37.317
> 
> 标签：ios5, uitableview, uilabel, cagradientlayer

我正在尝试在位于自定义 UITableViewCell 中的 UILabel 文本后面添加渐变层。问题是渐变隐藏了我的标签文本。我已经访问过[这个](https://stackoverflow.com/questions/4850149/adding-a-cggradient-as-sublayer-to-uilabel-hides-the-text-of-label)链接，但它对我不起作用。那么如何将它添加**到文本层后面**？

到目前为止我所做的是：

```
CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = CGRectMake(0, 0,  buyPrice_port.frame.size.width,  buyPrice_port.frame.size.height);
    gradient.colors = [NSArray arrayWithObjects:(id)gainBackgroundColor1, (id)gainBackgroundColor2, nil];
    gradient.locations = [NSArray arrayWithObjects: [NSNumber numberWithFloat:0.00], [NSNumber numberWithFloat:0.70] , nil];
    [buyPrice_port.layer insertSublayer:gradient atIndex:0];
    buyPrice_port.textColor = [UIColor blackColor]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:01:00.317

您可以简单地在后面添加一个视图`UILabel`（即添加标签作为渐变视图的子视图）并保持标签透明。

# audio - 黑莓收到通知时播放音频

> ID：15471767
> 
> 赞同：1
> 
> 时间：2013-03-18T07:33:48.517
> 
> 标签：audio, blackberry

在我的应用程序中，我必须在收到通知时播放声音。为了播放音频，我实现了以下代码：

```
private static final short BFlat = 466;   //466.16
private static final short AFlat = 415;     //415.30
private static final short A = 440; //440.00
private static final short GFlat = 370;     //369.99
private static final short DFlat = 554;     //554.37
private static final short C = 523; //523.25
private static final short F = 349; //349.32
// Duration of a 16th note, arbitrary, in ms.
private static final short TEMPO = 125;

// Duration of a 16th note, arbitrary, in ms.
private static final short d16 = 1 * TEMPO;

// Duration of an eighth note, arbitrary, in ms.
private static final short d8 = d16 << 1;
// 10 ms pause.
private static final short dpause = 10;

// Zero frequency pause.
private static final short pause = 0;

private static final short[] TUNE = new short[] {
             BFlat, d16, pause, dpause,
             BFlat, d16, pause, dpause,
             BFlat, d16, pause, dpause,
             BFlat, d16, pause, dpause,
             A, d16, pause, dpause,
             BFlat, d16, pause, dpause,
             GFlat, d16, pause, dpause,
             GFlat, d16, pause, dpause,
             A, d16, pause, dpause,
             BFlat, d16, pause, dpause,
             DFlat, d16, pause, dpause,
             C, d16, pause, dpause, //bar 1
             AFlat, d16, pause, dpause,
             AFlat, d16, pause, dpause,
             AFlat, d16, pause, dpause,
             AFlat, d16, pause, dpause,
             F, d16, pause, dpause,
             GFlat, d16, pause, dpause,
             AFlat, d16, pause, dpause,
             BFlat, d16, pause, dpause,
             AFlat, d16, pause, dpause,
             F, d8 + d16 //bar 2
         };

public MyScreen()
{        
    // Set the displayed title of the screen       
    setTitle("MyTitle");
    // % volume
    final int VOLUME = 80;

    if ( Alert.isAudioSupported())
    {
         System.out.println("------alert is audio supported-------------"+ Alert.isAudioSupported());

         Alert.startAudio(TUNE, 100);
        //Alert.startVibrate(5000);
    } 
```

`Alert.startAudio()`根本没有播放声音。但我可以振动手机。请让我知道我在哪里遗漏了什么或如何在 startAudio 中使用短数组。请给我一些建议或任何想法。谢谢

****** *** ** ******编辑****** ** *** ** *** ** *** **** 为了显示对话框和通知，我使用了以下内容。我可以显示对话框并播放振动和铃声，但铃声的音量非常低，除非我将手机放在耳边，否则没人能听到。**

 **```
try{
                     Application.getApplication().invokeAndWait(new Runnable() {
                         public void run() 
                         {

                         }
                     });
                       final Dialog screen = new Dialog(Dialog.D_OK_CANCEL, " "+text,
                                Dialog.OK,
                                //mImageGreen.getBitmap(),
                                null, Manager.VERTICAL_SCROLL);
                        final UiEngine ui = Ui.getUiEngine();
                        Application.getApplication().invokeAndWait(new Runnable() {
                            public void run() {
                                NotificationsManager.triggerImmediateEvent(0x749cb23a76c66e2dL, 0, null, null);
                                ui.pushGlobalScreen(screen, 0, UiEngine.GLOBAL_QUEUE);
                            }
                        });
                        System.out.println("-----IN PUSH MESSAGE READER----"+screen.getSelectedValue());
                        if(screen.getSelectedValue()==1)
                        {
                            System.out.println("-----I1-"+screen.getSelectedValue());

                            ApplicationDescriptor[] appDescriptors =CodeModuleManager.getApplicationDescriptors(CodeModuleManager.getModuleHandle("BB_push"));
                          ApplicationDescriptor appDescriptor = new ApplicationDescriptor(appDescriptors[0], new String[] {"BB_push"});
                          try {
                            ApplicationManager.getApplicationManager().runApplication(appDescriptor);
                          }catch (ApplicationManagerException e) 
                          {
                            // TODO Auto-generated catch block
                            System.out.println("in notification exception----"+e);
                            e.printStackTrace();
                        }
                        }

                      //  screen.setDialogClosedListener(new MyDialogClosedListener());
                        }
                        catch (Exception e) {
                        } 
```

我想在单击确定按钮时打开应用程序，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:30:20.310

Have you considered using the Notification API? This way, the user would be able to setup your app's notification sound, and have it change appropriately when the notification profile is changed from the home screen - think "Normal" "Vibrate Only" and "All Alerts Off"

Take a look at [NotificationsManager](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/notification/NotificationsManager.html) and the methods `triggerImmediateEvent` and `registerSource`**

# ios - 更改 FBFriendPickerViewController 的 UITableViewCell

> ID：15471768
> 
> 赞同：3
> 
> 时间：2013-03-18T07:33:49.100
> 
> 标签：ios, facebook, uitableview

如何使用适用于 iOS 的 Facebook SDK v3.2 调整 FBFriendPickerViewController 的 tableview 的 UITableViewCell？

# android - 如何收缩代码 - dex 中的 65k 方法限制

> ID：15471772
> 
> 赞同：91
> 
> 时间：2013-03-18T07:34:10.843
> 
> 标签：android, google-drive-api, guava, dex, android-multidex

我有一个相当大的 Android 应用程序，它依赖于许多库项目。Android 编译器对每个 .dex 文件有 65536 个方法的限制，我已经超过了这个数字。

当你达到方法限制时，基本上有两条路径可以选择（至少我知道）。

1）缩小你的代码

2）构建多个dex文件（[见this blog post](http://android-developers.blogspot.se/2011/07/custom-class-loading-in-dalvik.html)）

我查看了两者并试图找出导致我的方法计数如此之高的原因。Google Drive API 占据了 Guava 依赖项的最大部分，超过 12,000 个。Drive API v2 的库总数超过 23,000 个！

我想我的问题是，你认为我应该怎么做？我应该删除 Google Drive 集成作为我的应用程序的一项功能吗？有没有办法缩小 API（是的，我使用 proguard）？我应该走多 dex 路线（这看起来相当痛苦，尤其是处理第三方 API）？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-11-03T22:45:37.923

看起来谷歌终于实现了一个解决方法/修复超过 dex 文件的 65K 方法限制。

> **关于 65K 参考限制**
> 
> Android 应用程序 (APK) 文件包含 Dalvik Executable (DEX) 文件形式的可执行字节码文件，其中包含用于运行您的应用程序的编译代码。Dalvik Executable 规范将单个 DEX 文件中可以引用的方法总数限制为 65,536 个，包括 Android 框架方法、库方法和您自己代码中的方法。超过此限制要求您将应用程序构建过程配置为生成多个 DEX 文件，称为 multidex 配置。
> 
> **Android 5.0 之前的 Multidex 支持**
> 
> Android 5.0 之前的平台版本使用 Dalvik 运行时来执行应用程序代码。默认情况下，Dalvik 将应用程序限制为每个 APK 单个 classes.dex 字节码文件。为了绕过这个限制，您可以使用[multidex 支持库](http://developer.android.com/tools/support-library/features.html#multidex)，它成为您应用程序的主要 DEX 文件的一部分，然后管理对其他 DEX 文件及其包含的代码的访问。
> 
> **对 Android 5.0 及更高版本的 Multidex 支持**
> 
> Android 5.0 及更高版本使用名为 ART 的运行时，它本机支持从应用程序 APK 文件加载多个 dex 文件。ART 在应用程序安装时执行预编译，扫描 classes(..N).dex 文件并将它们编译为单个 .oat 文件以供 Android 设备执行。有关 Android 5.0 运行时的更多信息，请参阅[ART 简介](https://source.android.com/devices/tech/dalvik/art.html)。

请参阅：[使用超过 65K 方法构建应用程序](http://developer.android.com/tools/building/multidex.html)

* * *

> **Multidex 支持库**
> 
> 该库支持使用多个 Dalvik Executable (DEX) 文件构建应用程序。引用超过 65536 个方法的应用程序需要使用 multidex 配置。有关使用 multidex 的更多信息，请参阅[使用超过 65K 方法构建应用程序](http://developer.android.com/tools/building/multidex.html)。
> 
> 下载 Android 支持库后，此库位于 /extras/android/support/multidex/ 目录中。该库不包含用户界面资源。要将其包含在您的应用程序项目中，请按照[添加没有资源的库的说明进行操作。](http://developer.android.com/tools/support-library/setup.html#libs-without-res)
> 
> 该库的 Gradle 构建脚本依赖标识符如下：
> 
> com.android.support:multidex:1.0.+ 此依赖表示法指定发布版本 1.0.0 或更高版本。

* * *

您仍然应该通过积极使用 proguard 并查看您的依赖项来避免达到 65K 方法限制。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-04-12T18:02:06.437

您可以为此使用 multidex 支持库，以启用**multidex**

**1）**将其包含在依赖项中：

```
dependencies {
  ...
  compile 'com.android.support:multidex:1.0.0'
} 
```

**2)**在您的应用中启用它：

```
defaultConfig {
    ...
    minSdkVersion 14
    targetSdkVersion 21
    ....
    multiDexEnabled true
} 
```

**3）**如果您的应用程序有一个**应用程序**类，则像这样覆盖**attachBaseContext**方法：

```
package ....;
...
import android.support.multidex.MultiDex;

public class MyApplication extends Application {
  ....
   @Override
   protected void attachBaseContext(Context context) {
    super.attachBaseContext(context);
    MultiDex.install(this);
   }
} 
```

**4)**如果您的应用程序**没有****应用程序**类，则在清单文件中将**android.support.multidex.MultiDexApplication注册为您的应用程序。**像这样：

```
<application
    ...
    android:name="android.support.multidex.MultiDexApplication">
    ...
</application> 
```

它应该可以正常工作！

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-01-19T05:39:23.183

`Play Services`6.5+ 帮助： [http ://android-developers.blogspot.com/2014/12/google-play-services-and-dex-method.html](http://android-developers.blogspot.com/2014/12/google-play-services-and-dex-method.html)

> “从 Google Play 服务的 6.5 版开始，您将能够从许多单独的 API 中进行选择，并且您可以看到”

...

> “这将传递地包括在所有 API 中使用的‘基础’库。”

这是个好消息，例如，对于一个简单的游戏，您可能只需要`base`,`games`或许`drive`.

> “API 名称的完整列表如下。更多详细信息可以在 Android 开发者网站上找到。：

*   com.google.android.gms:play-services-base:6.5.87
*   com.google.android.gms:play-services-ads:6.5.87
*   com.google.android.gms:play-services-appindexing:6.5.87
*   com.google.android.gms:play-services-maps:6.5.87
*   com.google.android.gms:play-services-location:6.5.87
*   com.google.android.gms:play-services-fitness:6.5.87
*   com.google.android.gms:play-services-panorama:6.5.87
*   com.google.android.gms:play-services-drive:6.5.87
*   com.google.android.gms:play-services-games:6.5.87
*   com.google.android.gms:play-services-wallet:6.5.87
*   com.google.android.gms:play-services-identity:6.5.87
*   com.google.android.gms:play-services-cast:6.5.87
*   com.google.android.gms:play-services-plus:6.5.87
*   com.google.android.gms:play-services-appstate:6.5.87
*   com.google.android.gms:play-services-wearable:6.5.87
*   com.google.android.gms:play-services-all-wear:6.5.87

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-02-27T08:31:38.770

在 6.5 之前的 Google Play 服务版本中，您必须将整个 API 包编译到您的应用程序中。在某些情况下，这样做会使您的应用程序中的方法数量（包括框架 API、库方法和您自己的代码）保持在 65,536 个限制以下变得更加困难。

从 6.5 版开始，您可以有选择地将 Google Play 服务 API 编译到您的应用程序中。例如，要仅包含 Google Fit 和 Android Wear API，请在 build.gradle 文件中替换以下行：

```
compile 'com.google.android.gms:play-services:6.5.87' 
```

这些行：

```
compile 'com.google.android.gms:play-services-fitness:6.5.87'
compile 'com.google.android.gms:play-services-wearable:6.5.87' 
```

更多参考，您可以点击[这里](http://developer.android.com/google/play-services/setup.html)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-12-20T17:21:27.793

使用 proguard 来减轻您的 apk，因为未使用的方法不会出现在您的最终构建中。仔细检查您的 proguard 配置文件中是否有以下内容，以便将 proguard 与 guava 一起使用（如果您已经有了这个，我很抱歉，在撰写本文时还不知道）：

```
# Guava exclusions (http://code.google.com/p/guava-libraries/wiki/UsingProGuardWithGuava)
-dontwarn sun.misc.Unsafe
-dontwarn com.google.common.collect.MinMaxPriorityQueue
-keepclasseswithmembers public class * {
    public static void main(java.lang.String[]);
} 

# Guava depends on the annotation and inject packages for its annotations, keep them both
-keep public class javax.annotation.**
-keep public class javax.inject.** 
```

另外，如果你使用的是 ActionbarSherlock，切换到 v7 appcompat 支持库也会大大减少你的方法数（根据个人经验）。说明位于：

*   [http://developer.android.com/tools/support-library/features.html#v7-appcompat](http://developer.android.com/tools/support-library/features.html#v7-appcompat)操作栏
*   [http://developer.android.com/tools/support-library/setup.html#libs-with-res](http://developer.android.com/tools/support-library/setup.html#libs-with-res)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-06-15T13:58:24.217

您可以使用[Jar Jar Links](https://code.google.com/p/jarjar/)来缩小 Google Play Services 等庞大的外部库（16K 方法！）

在您的情况下，您将只从 Google Play Services jar 中提取除`common` `internal`子`drive`包之外的所有内容。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-24T13:20:14.353

对于不使用 Gradle 的 Eclipse 用户，有一些工具可以分解 Google Play Services jar 并仅使用您想要的部分重建它。

我使用[dextorer 的 strip_play_services.sh](https://gist.github.com/dextorer/a32cad7819b7f272239b)。

可能很难确切知道要包含哪些服务，因为存在一些内部依赖关系，但是如果发现缺少所需的东西，您可以从小处着手并添加到配置中。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-09T22:06:21.823

我认为从长远来看，在多个 dex 中破坏您的应用程序将是最好的方法。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-10-04T19:39:13.630

多 dex 支持将成~~为此~~问题的官方解决方案。有关详细信息，请参阅[我的答案](https://stackoverflow.com/a/26196397/1233652)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-23T07:42:10.767

如果不使用 multidex，这会使构建过程非常缓慢。您可以执行以下操作。正如[yahska](https://stackoverflow.com/a/28760561/1307690)提到的使用特定的谷歌播放服务库。在大多数情况下，只需要这样做。

```
compile 'com.google.android.gms:play-services-base:6.5.+' 
```

这是所有可用的包[选择性地将 API 编译到您的可执行文件中](http://developer.android.com/google/play-services/setup.html#Setup)

如果这还不够，您可以使用 gradle 脚本。将此代码放入文件'strip_play_services.gradle'

```
def toCamelCase(String string) {
String result = ""
string.findAll("[^\\W]+") { String word ->
    result += word.capitalize()
}
return result
}

afterEvaluate { project ->
Configuration runtimeConfiguration = project.configurations.getByName('compile')
println runtimeConfiguration
ResolutionResult resolution = runtimeConfiguration.incoming.resolutionResult
// Forces resolve of configuration
ModuleVersionIdentifier module = resolution.getAllComponents().find {
    it.moduleVersion.name.equals("play-services")
}.moduleVersion

def playServicesLibName = toCamelCase("${module.group} ${module.name} ${module.version}")
String prepareTaskName = "prepare${playServicesLibName}Library"
File playServiceRootFolder = project.tasks.find { it.name.equals(prepareTaskName) }.explodedDir

def tmpDir = new File(project.buildDir, 'intermediates/tmp')
tmpDir.mkdirs()
def libFile = new File(tmpDir, "${playServicesLibName}.marker")

def strippedClassFileName = "${playServicesLibName}.jar"
def classesStrippedJar = new File(tmpDir, strippedClassFileName)

def packageToExclude = ["com/google/ads/**",
                        "com/google/android/gms/actions/**",
                        "com/google/android/gms/ads/**",
                        // "com/google/android/gms/analytics/**",
                        "com/google/android/gms/appindexing/**",
                        "com/google/android/gms/appstate/**",
                        "com/google/android/gms/auth/**",
                        "com/google/android/gms/cast/**",
                        "com/google/android/gms/drive/**",
                        "com/google/android/gms/fitness/**",
                        "com/google/android/gms/games/**",
                        "com/google/android/gms/gcm/**",
                        "com/google/android/gms/identity/**",
                        "com/google/android/gms/location/**",
                        "com/google/android/gms/maps/**",
                        "com/google/android/gms/panorama/**",
                        "com/google/android/gms/plus/**",
                        "com/google/android/gms/security/**",
                        "com/google/android/gms/tagmanager/**",
                        "com/google/android/gms/wallet/**",
                        "com/google/android/gms/wearable/**"]

Task stripPlayServices = project.tasks.create(name: 'stripPlayServices', group: "Strip") {
    inputs.files new File(playServiceRootFolder, "classes.jar")
    outputs.dir playServiceRootFolder
    description 'Strip useless packages from Google Play Services library to avoid reaching dex limit'

    doLast {
        def packageExcludesAsString = packageToExclude.join(",")
        if (libFile.exists()
                && libFile.text == packageExcludesAsString
                && classesStrippedJar.exists()) {
            println "Play services already stripped"
            copy {
                from(file(classesStrippedJar))
                into(file(playServiceRootFolder))
                rename { fileName ->
                    fileName = "classes.jar"
                }
            }
        } else {
            copy {
                from(file(new File(playServiceRootFolder, "classes.jar")))
                into(file(playServiceRootFolder))
                rename { fileName ->
                    fileName = "classes_orig.jar"
                }
            }
            tasks.create(name: "stripPlayServices" + module.version, type: Jar) {
                destinationDir = playServiceRootFolder
                archiveName = "classes.jar"
                from(zipTree(new File(playServiceRootFolder, "classes_orig.jar"))) {
                    exclude packageToExclude
                }
            }.execute()
            delete file(new File(playServiceRootFolder, "classes_orig.jar"))
            copy {
                from(file(new File(playServiceRootFolder, "classes.jar")))
                into(file(tmpDir))
                rename { fileName ->
                    fileName = strippedClassFileName
                }
            }
            libFile.text = packageExcludesAsString
        }
    }
}

project.tasks.findAll {
    it.name.startsWith('prepare') && it.name.endsWith('Dependencies')
}.each { Task task ->
    task.dependsOn stripPlayServices
}
project.tasks.findAll { it.name.contains(prepareTaskName) }.each { Task task ->
    stripPlayServices.mustRunAfter task
} 
```

}

然后在你的 build.gradle 中应用这个脚本，像这样

```
apply plugin: 'com.android.application'
apply from: 'strip_play_services.gradle' 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-05-28T03:19:44.543

如果使用 Google Play Services，您可能知道它添加了 20k+ 方法。如前所述，Android Studio 可以选择模块化包含特定服务，但坚持使用 Eclipse 的用户必须自己动手进行模块化:(

幸运[的是，有一个 shell 脚本](https://gist.github.com/dextorer/a32cad7819b7f272239b)可以让这项工作变得相当容易。只需解压到 google play services jar 目录，根据需要编辑提供的 .conf 文件并执行 shell 脚本。

它的使用示例在[这里](https://medium.com/@rotxed/dex-skys-the-limit-no-65k-methods-is-28e6cb40cf71)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-22T13:52:39.220

> 如果使用 Google Play Services，您可能知道它添加了 20k+ 方法。如前所述，Android Studio 可以选择模块化包含特定服务，但坚持使用 Eclipse 的用户必须自己动手进行模块化:(
> 
> 幸运的是，有一个 shell 脚本可以让这项工作变得相当容易。只需解压到 google play services jar 目录，根据需要编辑提供的 .conf 文件并执行 shell 脚本。
> 
> 它的使用示例在这里。

就像他说的那样，我`compile 'com.google.android.gms:play-services:9.0.0'`只替换了我需要的库并且它起作用了。

# xcode - 为 10.5/10.6 和 PPC 编译

> ID：15471773
> 
> 赞同：0
> 
> 时间：2013-03-18T07:34:12.250
> 
> 标签：xcode, osx-lion, osx-mountain-lion, powerpc, vmware-fusion

我需要为 10.5（ppc，intel）+ 编译 C++/C/Objective-C 项目，但是 Xcode 4+（使用 4.6）放弃了对 10.6 的支持，我相信 Xcode 4 完全放弃了对 10.4/ppc 的支持。我已经阅读了现有的 StackOverflow 和其他关于在 Mountain Lion 上安装 Xcode 3.2.6 的帖子，但如果它未经证实/会破坏我的系统，我不想这样做。

我尝试在 VMware Fusion 5 Pro VM 中虚拟化 Snow Leopard，但它不允许我这样做，因为它不是服务器版本。

除了购买 Snow Leopard Server DVD，我还能如何为 10.4+（ppc、intel）编译我的项目？我目前正在运行 OS X Mountain Lion 10.8.3。设置部署目标在我的 Xcode 版本中不起作用，无法编译。我也考虑过虚拟化 Lion，但是我没有（我通过应用商店购买的）安装 dmg/app 的备份副本，而且我似乎无法在 App Store 中找到下载。

任何人都可以建议我应该做什么，或者我基本上只剩下一个选择.. 双靴雪豹？

谢谢！

# selenium-ide - 在 Selenium IDE 中使用 Turbolinks

> ID：15471780
> 
> 赞同：0
> 
> 时间：2013-03-18T07:34:59.030
> 
> 标签：selenium-ide, turbolinks

当我在我的 Ruby on Rails 应用程序中未安装 turbolinks gem 的情况下运行我的 selenium 测试时，测试通过了。当我包含 turbolinks 时，测试失败。例如，如果测试开始

打开/
clickAndWait 链接=登录
类型 id=session_email any@example.com

然后我会得到一个错误
“[error]Element id=session_email not found.

当我查看页面源时， session_email id 仍然存在，并且安装了 turbolinks。我找到了这个页面[http://www.digitalkingdom.org/rlp/tiki-index.php?page=Selenium+And+Javascript](http://www.digitalkingdom.org/rlp/tiki-index.php?page=Selenium+And+Javascript)，这似乎表明检测页面已完​​全加载可能存在问题。

是否可以在不更改测试套件中数百行代码的情况下解决此问题？如果没有，是否有可靠的 selenium 方法可以测试 turbolinked 页面是否已完全加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:58:35.890

[在获得 github turbolinks-compatability project](https://github.com/reed/turbolinks-compatibility/issues/6#issuecomment-15526506)的一些帮助后，我可以对这个问题提供部分答案。

如果正在使用 turbolinks gem，那么您将需要修改您的 selenium 测试用例，以确保页面真正加载。例如，如果您的测试中有以下代码

```
Open /
clickAndWait link=Sign in
type id=session_email any@example.com 
```

那么它需要修改为

```
Open /
click link=Sign in
waitForElementPresent id=session_email
type id=session_email any@example.com 
```

您可以使用许多“waitFor”修饰符，具体取决于您接下来要测试的页面上的功能。

但是，如果测试涉及 javascript 弹出窗口，则不应添加 waitFor 命令。因此，例如，如果您在测试中像

```
clickAndWait link=Delete
assertConfirmation   Are you Sure? 
```

你不应该修改代码。在 javascript 弹出窗口的情况下，确实添加 waitFor 测试会挂起执行。

该解决方案涉及逐行手动修改代码。我在 Selenium 用户组上打开了一个[问题](https://groups.google.com/forum/?fromgroups=#!searchin/selenium-users/turbolinks/selenium-users/LE6bxRBwhc4/0PrYl11n0i8J)，看看是否有更好的方法来处理这个问题。

# asp.net - Oracle.DataAccess.dll

> ID：15471783
> 
> 赞同：1
> 
> 时间：2013-03-18T07:35:17.853
> 
> 标签：asp.net, oracle11g

我们有一个引用 Oracle.DataAccess 并连接到 Oracle 的程序集。我可以使用这个仅安装 .NET Framework 的程序集，而无需 Oracle.Client 或 Oracle 数据提供程序。

# selenium - 如何使用 Selenium WebDriver 在 Firefox 中自动截取网站中所有页面链接的屏幕截图？

> ID：15471787
> 
> 赞同：1
> 
> 时间：2013-03-18T07:35:38.023
> 
> 标签：selenium, webdriver

*   如何使用 Selenium Web Driver 在 Firefox 中自动截取网站中所有页面链接的屏幕截图？

    1.  工具，我正在使用：

        *   selenium-server-standalone-2.31.0.jar
        *   用于 Java 编码的 Eclipse [JUNO]
    2.  完毕：

        *   我的代码在使用其元素 ID 单击第一个菜单项之后拍摄主页的屏幕截图。

        *   我已经为所有要加载的链接实现了 java 代码，然后进行屏幕截图。

    3.  问题：

        *   加载第一个链接页面后，尽管 java 程序仍处于运行状态，但它并未对该页面进行屏幕截图。

        *   如果有朋友能解决这个问题，那对我很有帮助.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:14:03.547

希望这段代码能工作..

```
File screenshot = new File("D:\\screenshot1.png");
File tmpScreenshot = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(tmpScreenshot, screenshot);
System.out.println("the screenshot printed at:- " + screenshot.getAbsolutePath()); 
```

# shell - 在shell中以日期格式转换变量的值

> ID：15471791
> 
> 赞同：0
> 
> 时间：2013-03-18T07:36:03.390
> 
> 标签：shell

我有变量，该变量的值就像 20130112 一样。我知道它是一个日期，但我不知道如何将它转换为 shell 脚本中的有效日期。

该字段的值为：20130112 结果应为：12-Jan-13

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:42:06.443

在 Linux 上尝试“日期”命令。

```
date -d 20130112 
```

将以系统上的默认日期格式打印它。检查日期的“手册”页上的其他格式选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:44:24.580

利用：

```
$ date -j -f "%Y%m%d" "20130112" +"%d-%b-%y"
12-Jan-13 
```

# codenameone - BackGrond 在以代码名称 1 构建应用程序时被扭曲

> ID：15471803
> 
> 赞同：0
> 
> 时间：2013-03-18T07:37:02.200
> 
> 标签：codenameone

我正在构建一个代号为 one 的应用程序，该应用程序具有登录年龄。

我根据要求创建了一个 UI，但是当我从代号为 android 的服务器构建应用程序时，我看到流式传输的背景图像被扭曲并转换为线条。背景图像具有从 3 维到中心顶部的渐变。

我在代号一个模拟器中检查了它，它看起来很棒，但在 android 模拟器中，背景图像被扭曲了。

请检查附加的图像。我添加了两个图像，第一个是代号的模拟器，第二个是 android 模拟器。 ![在此处输入图像描述](../Images/0b6781490f8c3562c4a6584e17eb9106.png)

请让我知道我愿意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:52:33.053

您有背景渐变，设备的颜色数量有限，因此背景会在某种程度上扭曲，因为颜色会适应设备上较低的颜色计数。

这是假设您没有使用可变图像或圆形矩形边框（不是图像边框），在这两种情况下，由于绘制到可能是 16 位的图像表面，颜色的数量可能会更少。

# javascript - 如何在 chrome 开发人员工具中对最小化的 javascript 代码进行排序？

> ID：15471809
> 
> 赞同：2
> 
> 时间：2013-03-18T07:37:37.327
> 
> 标签：javascript, debugging, google-chrome-devtools

我试过调试不是我的最小化 js 代码。
但是使用 chrome 的动态分析器工具调试太难了。
因为所有代码都通过代码最小化器放在一行中。
所以我无法分析代码的动态流程。

动态分析应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:49:55.353

调试“挖掘”代码可能很棘手......我建议采用以下“逆向工程”实践（除了联系代码所有者并要求非挖掘版本......）：

*   在代码的每个分号 (";") 之后添加新行，这样它会更容易阅读，并且如果它们是某种异常或错误，它将在控制台中打印出正确的行号。
*   [添加换行符后，通过http://jsbeautifier.org/](http://jsbeautifier.org/)之类的服务运行代码 ，使其更具可读性。
*   尝试在代码中添加“console.log(obj)”调用。这允许将对象“打印”到控制台以进行检查。

# sed - 从 12 位数字中删除前导字符

> ID：15471810
> 
> 赞同：0
> 
> 时间：2013-03-18T07:37:39.130
> 
> 标签：sed, awk, grep

我有一个带有 id 和编号的文本文件。所有数字都应为 10 位数字。在以下示例中，只有第 3 行是正确的。

```
36000003326|917668001520
36000003359|919005119822
36000003417|9153914209
36000003508|919454102627 
```

如果号码长度为 12 位，则应删除前 2 个国家/地区数字。预期结果如下：

```
36000003326|7668001520
36000003359|9005119822
36000003417|9153914209
36000003508|9454102627 
```

以下 sed 正在工作，但它不检查目标条目的长度是 10 位还是 12 位。

```
sed 's/|91/|/' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:54:11.397

这个怎么样？

```
sed -r 's/\|..(.{10})/|\1/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:47:57.903

使用 awk 的一种方法：

```
awk -F"|" 'length($2)>10{$2=substr($2,3);}1' OFS="|" file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:15:15.733

这可能对你有用（GNU sed）：

```
sed -r 's/[0-9]{2}([0-9]{10})$/\1/' file 
```

# asp.net - 如何为数据库中多条记录的 Eval 值设置会话变量

> ID：15471812
> 
> 赞同：0
> 
> 时间：2013-03-18T07:37:50.233
> 
> 标签：asp.net

```
< asp:lable runat="server" ID="EmailID" Text='<%#Eval("Email") %>' Height="20px"  Width="150px" BorderStyle="None" Font-Bold="True"></asp:Label>

<%# Session["Session_TaskCode"] = DataBinder.Eval(Container.DataItem, "Email")%> 
```

我通过`Session["Session_TaskCode"]`.cs 文件中的变量获取电子邮件的值。我的问题是我在 GridView 中有多个记录。因此，当我想获取特定记录的电子邮件值时，该`Session["Session_TaskCode"]`变量仅采用最后一条记录的电子邮件值。

那么，我应该如何为会话变量中的不同记录获取电子邮件的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:54:28.620

您好，您使用网格的 rowDataBound 事件来接收所有电子邮件。然后您可以使用列表来存储所有电子邮件。然后将列表添加到会话中。

```
//global declaration
List<string> emailList= new List<string>;
//Rowdatabound event
Label lblEmail= e.finfControl("lblEmail") as Lable;
emailList.add(lblEmail.Text);
session["Email"]=emailList; 
```

# c# - POCO 或其他类的简单自动表单构建器

> ID：15471817
> 
> 赞同：0
> 
> 时间：2013-03-18T07:38:10.870
> 
> 标签：c#, .net, wpf, entity-framework, mvvm

我有很多需要表格的 POCO。我目前的主要工作是复制和粘贴 ViewModel 和 View 并编辑以构建所有这些表单。每次都是同样的程序。

在使用 symfony 编程 php 时，我可以轻松生成带有验证的表单，等等：

[http://symfony.com/doc/2.0/book/forms.html](http://symfony.com/doc/2.0/book/forms.html)

现在我想对 WPF 做同样的事情。我将 wpf4 与 MVVM Light Toolkit 一起使用

我通过实体框架从我的模型生成 POCO 类

# c# - 每当初始化不同程序集中的模型实例时，都无法创建 ViewModelLocator 实例

> ID：15471818
> 
> 赞同：0
> 
> 时间：2013-03-18T07:38:21.303
> 
> 标签：c#, wpf, mvvm, entity-framework-4, mvvm-light

这是我第一次在 StackOverflow 上发布一些东西（虽然它在过去对我帮助很大）而且通常我什至不必发布问题，因为我假设的问题已经得到了回答。但是这个我真的找不到合适的解释。

所以我在修补 C#、Entity Framework 4、WPF 和 MVVM Light。我已经制作了一个程序集，用作各种模型、视图和视图模型的库，用于特定目的。

现在我正在制作另一个用于不同目的的组件。但是，在第一个程序集中已经提供了一些必需的方法和视图。所以我想我要将第一个程序集的引用添加到第二个程序集，然后从第一个程序集创建模型的实例到第二个程序集的模型或 ViewModel。

一切都没有错误地构建。但是当我在第二个程序集中检查视图的设计视图时，这部分有锯齿状的下划线：

```
<UserControl.Resources>
    <vm:ViewModelLocator x:Key="Locator" />
</UserControl.Resources> 
```

当您查看设计视图时，在顶部栏中写有一个带有文本的错误：

```
Object reference not set to an instance of an object.
   at Powell.Materials.Common.ViewModel.MaterialsViewViewModel.SetupLists() in E:\Projects\Software\Powell Marketing\Powell\Powell\Materials\Powell.Materials.Common\ViewModel\MaterialsViewViewModel.cs:line 514
   at Powell.Materials.Common.ViewModel.MaterialsViewViewModel..ctor() in E:\Projects\Software\Powell Marketing\Powell\Powell\Materials\Powell.Materials.Common\ViewModel\MaterialsViewViewModel.cs:line 601 
```

有人遇到过这种类型的错误吗？或者有没有合适的方法来做这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:05:07.800

好吧，在代码中，我看到了 4 个可能的来源`NullReferenceException`。

*   `secretKey`
*   `IDUser`
*   `connectionName`
*   `retrieve`（尽管这可能被正确实例化）

我不知道前三个是从哪里来的。所以检查它们的值。我很确定其中之一是`null`. 如果所有三个都正确实例化，请检查最后一个。

# php - 在 symfony 2.1 中添加进度条

> ID：15471825
> 
> 赞同：3
> 
> 时间：2013-03-18T07:38:42.067
> 
> 标签：php, symfony, progress-bar

我有一个带有文件上传选项的 symfony 表单。那么如何在这种形式中添加进度条。我尝试过使用 AJAX，但没有成功。

```
$(".loading").show();

$.ajax({
    url: {
        {
            path('myroute')
            }
        },
        data: $("#form1").serialize(),
        type: "POST",
        success: function (response) {
            if (response != 'Success') {
                alert(response);
            } else {
                if ($("#return").is(":checked") == true)
                    redirect("pages_add.php?res=add_success");
                else
                    redirect("pages_manager.php?res=add_success");
            }

            $(".loading").hide();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:29:51.370

这个可以帮助：[http ://webdeveloperplus.com/jquery/multiple-file-upload-with-progress-bar-using-jquery/](http://webdeveloperplus.com/jquery/multiple-file-upload-with-progress-bar-using-jquery/)

以及其他几个，可以在网上找到。

PS 您不一定需要使用 jQuery，例如，我使用 YUI3 构建了相同的小部件。

PPS 通常进度条仅适用于现代浏览器（支持 FileAPI）

就像是

```
if (!!window.FileReader) {
    // modern code here
} 
```

将有助于确定您正在处理的浏览器类型。

# android - AsyncTask 没有异步运行

> ID：15471831
> 
> 赞同：6
> 
> 时间：2013-03-18T07:39:03.637
> 
> 标签：android, android-asynctask

如果我没记错的话，以下内容应该是相同的。
使用**AsyncTask**：

```
private class GetDataTask extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected String doInBackground(String... params) {
        return NetConnection.getRecordData(mUserId, mUserPassword);
    }

    @Override
    protected void onPostExecute(String result) {
        parseJson(result);
    }
} 
```

使用**线程**：

```
 new Thread( new Runnable() {

        @Override
        public void run() {
            String res = NetConnection. getRecordData(mUserId, mUserPassword);
            parseJson(res);

        }
    }).start(); 
```

但是在上传文件时，AsyncTask`synchronously`在 Thread 运行时运行`asynchronously`（并行）。
为什么会这样？为什么 AsyncTask 会这样？AsyncTask 不应该异步运行吗？
我有点困惑，所以我需要你的帮助。
这就是我调用 GetDataTask 的方式：

```
new GetDataTask().execute() 
```

我更喜欢使用 AsyncTask，但它并没有为我完成这项工作。请参阅我的[早期问题](https://stackoverflow.com/q/15468563/1503155)以获取更多详细信息

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T07:56:01.613

从 4.x 开始，调用 2 个 AsyncTask 将导致它们被串行执行。

解决此问题的一种方法是使用以下代码

```
if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.HONEYCOMB) {
  myTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
}
else {
  myTask.execute();
} 
```

您可以在以下位置阅读更多信息：[http ://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html](http://commonsware.com/blog/2012/04/20/asynctask-threading-regression-confirmed.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T07:46:29.197

好的，以下是[官方 java 文档](http://developer.android.com/reference/android/os/AsyncTask.html)中的注释...

> **执行顺序**
> 
> 首次引入时，AsyncTask 在单个后台线程上串行执行。从[DONUT](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#DONUT)开始，这被更改为允许多个任务并行运行的线程池。从 [HONEYCOMB](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#HONEYCOMB)开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> ```
> If you truly want parallel execution, you can invoke 
> ```
> 
> [executeOnExecutor(java.util.concurrent.Executor, Object[])](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29) 与[THREAD_POOL_EXECUTOR](http://developer.android.com/reference/android/os/AsyncTask.html#THREAD_POOL_EXECUTOR)。

所以如果你一起调用两个 AsyncTask ......它们不会被并行执行（例外是甜甜圈、encliar 和姜饼）......你可以使用`executeOnExecutor`它们来执行它们`parallel`......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T07:43:02.897

从您的代码中，我们可以看到您调用`parseJson(result);`了在应用程序的**MainUIThread**`onPostExecute()`中运行的 AsyncTask 。因此，此时您的代码会同步运行..

 **仅在其他工作线程中运行的Put`parseJson(result);`方法。`doInBackGround()`

虽然你在`Thread`. 所以两者

```
String res = NetConnection. getRecordData(mUserId, mUserPassword);
parseJson(res); 
```

在您异步体验的**MAinUiThread 之外**的其他工作线程中运行。

笔记：

但请确保您`parseJson(res);` **不会在 UI 中更新 UI**）`doInBackground(`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T07:46:29.650

看起来实际问题不在于文件上传，而在于`parseJson`方法。

在您的`Thread`示例中，您在单独的线程中解析 Json，而`AsyncTask`如果您在 UI 线程中解析 Json。**

# json - 在 JSP 中打印 JSON 对象

> ID：15471843
> 
> 赞同：1
> 
> 时间：2013-03-18T07:40:19.990
> 
> 标签：json, jsp

我有一个创建 JsonObject 的 servlet。

```
JsonObject jsonObject=new JsonObject();
jsonObject.addProperty("name", "john");
jsonObject.addProperty("name", "Smith");
jsonObject.addProperty("name", "Ram");

HttpSession session=request.getSession(true);
session.setAttribute("jsonObject", jsonObject);
RequestDispatcher rd = request.getRequestDispatcher("viewpage.jsp");
rd.forward(request, response); 
```

这是我的 JSP 页面

```
<%@page import="com.google.gson.JsonObject"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>View Json</title>
<%
JsonObject jsonObject=(JsonObject)session.getAttribute("jsonObject");
%>

</head>
<body>
<h6>JSON View</h6>
<br>
<%=jsonObject%>
</body>
</html> 
```

但是当我运行它时，JSP 文件只打印最后的数据。以下是输出

```
JSON View

{"name":"Ram"} 
```

我怎样才能打印整个？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:46:57.123

```
jsonObject.addProperty("name", "john");
jsonObject.addProperty("name", "Smith");
jsonObject.addProperty("name", "Ram"); 
```

在这里，您使用了与“名称”相同的键。所以这些值是覆盖的。尝试使用不同的名称，例如

```
jsonObject.addProperty("name1", "john");
jsonObject.addProperty("name2", "Smith");
jsonObject.addProperty("name3", "Ram"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T16:25:30.353

您可以尝试创建 JsonArray。像这样

```
 JsonArray arr = new JsonArray() ;
JsonObject obj1 = new JsonObject()
obj1 .addProperty("name", "john");

JsonObject obj2 = new JsonObject()
obj2 .addProperty("name", "smith");

JsonObject obj3 = new JsonObject()
obj3 .addProperty("name", "ram");

arr.add(obj1);
arr.add(obj2);
arr.add(obj3); 
```

# text - 去除文字阴影

> ID：15471844
> 
> 赞同：1
> 
> 时间：2013-03-18T07:40:34.403
> 
> 标签：text, uinavigationcontroller, uinavigationbar, shadow

我不确定这是否可以更改，但我注意到自定义导航控制器的标题上有轻微的阴影。

图片：http: [//imgur.com/60XjLWE](http://imgur.com/60XjLWE)

它使文本看起来模糊，这有点烦人。

这是我正在使用的代码：`[[UINavigationBar appearance] setTitleTextAttributes: [NSDictionary dictionaryWithObjectsAndKeys: [UIColor colorWithRed:52.0/255.0 green:54.0/255.0 blue:61.0/255.0 alpha:1.0],UITextAttributeTextColor, [UIFont fontWithName:@"Helvetica Neue-Bold" size:0.0],UITextAttributeFont, nil]];`

知道如何去除标题上的阴影吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T10:27:24.230

你可以让它透明：

```
[[UINavigationBar appearance] setTitleTextAttributes: 
  [NSDictionary dictionaryWithObjectsAndKeys: 
    [UIColor colorWithRed:52.0/255.0 green:54.0/255.0 blue:61.0/255.0 alpha:1.0], UITextAttributeTextColor, 
    [UIColor clearColor], UITextAttributeTextShadowColor,
    [UIFont fontWithName:@"Helvetica Neue-Bold" size:0.0], UITextAttributeFont, nil]]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-18T10:21:01.167

把它放在你的 AppDelegate

```
[[UINavigationBar appearance]setShadowImage:[[UIImage alloc] init]]; 
```

# android - Android Sqlite SQLiteDiskIOException：磁盘 I/O 错误（代码 1290）SQLITE_IOERR_DIR_FSYNC

> ID：15471851
> 
> 赞同：4
> 
> 时间：2013-03-18T07:41:04.630
> 
> 标签：android, sqlite, sony, fsync

我有很多客户得到标题中提到的异常，但我无法在我的任何设备上重现它。

错误报告似乎表明该错误仅发生在索尼设备上，但我似乎找不到任何关于索尼在 Android 上使用他们的数据库做任何有趣事情的报告。

触发此异常的代码正在结束事务

```
db.beginTransaction();
for(some iterator)
    db.execSQL("UPDATE table SET column = " + value + " WHERE other_column = " + something);
db.setTransactionSuccessful();
db.endTransaction(); 
```

这里的堆栈跟踪是：

```
android.database.sqlite.SQLiteDiskIOException: disk I/O error (code 1290)
at android.database.sqlite.SQLiteConnection.nativeExecute(Native Method)
at android.database.sqlite.SQLiteConnection.execute(SQLiteConnection.java:559)
at android.database.sqlite.SQLiteSession.endTransactionUnchecked(SQLiteSession.java:437)
at android.database.sqlite.SQLiteSession.endTransaction(SQLiteSession.java:401)
at android.database.sqlite.SQLiteDatabase.endTransaction(SQLiteDatabase.java:530) 
```

数据库驻留在外部存储上（但根据客户报告，它发生在安装外部存储时）：

```
SQLiteDatabase db = SQLiteDatabase.openDatabase("/path/to/sqlite", null, SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

请不要对代码太苛刻，我知道（例如）应该有一个 try/catch 围绕在 endTransaction 的 sql 语句中，但在这种情况下它没有任何区别（而且我没有获得资源来清理这个遗留的混乱）。

我在 AIX 上发现了一些关于 SQLITE_IOERR_DIR_FSYNC 的旧报告，其中不支持目录上的 fsync() ，但这并没有真正帮助我，因为我显然无法在 Android 上使用正确的编译器标志重新编译 SQLite ...

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:18:38.037

试试这个补丁，它看起来与

[https://android.googlesource.com/platform/external/sqlite.git/+/6ab557bdc070f11db30ede0696888efd19800475%5E!/#F0](https://android.googlesource.com/platform/external/sqlite.git/+/6ab557bdc070f11db30ede0696888efd19800475%5E!/#F0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T18:35:45.660

这是 Sony 的 sqlite 版本中的一个错误，我向他们报告了它并收到他们修复它的通知。不幸的是，该错误仍然存​​在 - 但我可以放心地忽略，事务实际上已成功完成（sqlite 的最后一次调用之一 - 包含数据库的目录上的 fsync - 失败，但似乎没有无论如何都是必要的）。

# ios - Instruments 会阻塞后台线程？

> ID：15471856
> 
> 赞同：0
> 
> 时间：2013-03-18T07:41:33.040
> 
> 标签：ios, objective-c, multithreading, instruments

**编辑：** 今天我使用了我的代码，并为后台线程任务提供了一些优于主线程任务的优势。本质上，一个线程处理数组中的偶数项，另一个线程处理奇数项。我给后台线程一个偶数的一半，它要么等于奇数的一半，要么比奇数的一半小一。此外，我将`while(!collisionDone)`代码移到了后面一点，尽可能地保证它的线程安全。我`NSLog`在其中放置了一个以检测条件在达到该点时是否为假，并且它没有触发一次。此外，仪器构建现在运行良好。这意味着问题是用 while 循环停止主线程。所以这意味着我现在的问题是：

我应该如何停止主线程以等待后台线程完成任务？也许演示如何使用`NSLock`来实现该功能？

今天我添加了多线程以试图减少我的游戏延迟。我正在使用 NSTimer 来调用我的时间循环函数，如下所示：

```
[NSTimer scheduledTimerWithTimeInterval:0.03 target:self selector:@selector(time:) userInfo: nil repeats: true]; 
```

然后，在那个函数中，我有：

```
//run collision using multithreading
    collisionDone = false;
    [self performSelectorInBackground:@selector(collideBackground:) withObject:objectToSend];
    [self collideMain:objectToSend];
    while (!collisionDone) {
        //notdone
    } 
```

这个想法是我在一个线程上运行一组碰撞检查，在另一个线程上运行另一组。空的while循环是为了保证后台线程在执行函数之前已经完成。在此位之后，代码继续更新视图。

这一切运行良好，通常情况下，但是当我去 Instruments 检查我的 FPS 时，我发现游戏冻结了，它似乎在时间循环的第一次运行中冻结了某处。该应用程序在多线程之前在 Instruments 中运行良好，基本上工作相同，除了简单地使用`[self collideBackground:objectToSend]`而不是将其发送到另一个线程。后台线程似乎没有完成或根本没有运行，所以 collisionDone 将始终为 false，因此应用程序将在无限循环中等待，直到我杀死它。

另外，我尝试用 替换该行`[self collideBackground:arrayToSend];`，它又开始工作了。我尝试的另一件事是`NSLog(@"called");`在最开始时`viewWillAppear:`，它似乎又运行了一帧！？！？！？

我想知道为什么会发生这种情况以及如何解决它。我怀疑它与多线程无关，因为在单个线程上做所有事情都会修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:11:46.257

是的，它与多线程有关，以及您在主线程上的投票。您应该改为将回调放入后台线程。并且不阻塞主线程。

```
// is not good at all
collisionDone = false;
/*  etc... that will make collision to true */
 while (!collisionDone) {
    } 
```

改为制作

```
 [self computeSomethingOnBagroundWhithData: nil onCompletion:^{
    // callBack stuff
}] 
```

**编辑：**

而 (!collisionDone)

总是正确的，因为当您创建另一个线程时，指令卡在“while”语句中，并且不会像您期望的那样每次“collisionDone”重新评估，而是在 while 范围内评估它。顺便说一句，可能有一些优化器的东西，“collisionDone”只能在本地范围内评估（但这里我只是猜测，因为它依赖于编译器）。您应该重新输入该方法以使其工作，或在完成后加入该线程。由于您不想要这种东西的复杂代码，因此 block 正是您想要的。libDispatch 非常适合这个。

所以你可以尝试“self.collisionDone”来尝试获取真正的指针。但有很多机会不会改变任何事情。

或者你可以在后台做你的事情，当你完成后，向你的客户端代码发送一个信号/回调。您不需要像以前那样进行投票。这真是糟糕的设计（真的相信我;））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:24:28.493

目前还不清楚解决此问题的最佳方法或问题的实际原因是什么（是的`while(!collisionDone)`循环，但为什么？），但没有一个建议的替代方案可以正常工作。尽管已经提出了其他选项，但 NSThread 和 performSelectorInBackground: 是我检测到我正在寻找的功能的唯一方法。此外，在关闭多线程部分的测试后，我意识到 iPhone 4s 的处理器比 iPhone 4 好得多，而且我可以在 iPhone 4s 和更新版本（iPhone 4只能处理 30 FPS）。最后，我打算让我的多线程处理利用 iPhone 4s 的双核处理器，因此一半的冲突将在一个核心中完成，而另一个核心则在另一半中完成。我不确定这是否真的发生，我不知道如何检测到这一点。

我的结论：完全从应用程序中删除这种多线程尝试。这是不必要的，好处是可疑的。

@Fonix：您链接到的问题正是我正在尝试做的事情，但是，他们提出的解决方案似乎都没有奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T02:21:59.010

在学校和我的程序员朋友讨论后的最终解决方案：

```
//threadLock is an NSLock declared in the .h
-(void)timeLoop {
     [self performSelectorInBackground:@selector(collideBackground) withObject:nil];
     [self collideMainAtStartingPoint:0];

     [threadLock lock];
     [threadLock unlock];

     //update the view hierarchy and stuff like that
}
-(void)collideBack {
     [threadLock lock];
     [self collideMainAtStartingPoint:2];
     [threadLock unlock];
} 
```

# javascript - ajax中的肥皂不起作用

> ID：15471871
> 
> 赞同：0
> 
> 时间：2013-03-18T07:43:01.780
> 
> 标签：javascript, ajax, soap

我正在尝试创建一个连接到此 Web 服务的基本 HTML 页面： [http](http://wsf.cdyne.com/WeatherWS/Weather.asmx) ://wsf.cdyne.com/WeatherWS/Weather.asmx 经过数小时修补教程和代码示例后，我完全不知所措为什么这不起作用。（我的请求收到 404，或者根本没有状态..）这是扩展演示的一部分，该演示已经使用 Soap 连接到类似的 Web 服务，教授的示例与好..

我的代码如下：

```
xmlHttpObj.open("POST", "http://wsf.cdyne.com/WeatherWS/Weather.asmx", true);
xmlHttpObj.setRequestHeader("Content-Type", "text/xml");
xmlHttpObj.setRequestHeader("SOAPAction", "http://ws.cdyne.com/WeatherWS/GetCityForecastByZIP");

var envelope = '<?xml version="1.0" encoding="utf-8"?> \n' +
               '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"' +
               ' xmlns:xsd="http://www.w3.org/2001/XMLSchema"' +
               ' xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">' +
               '   <soap:Body> \n' +
               '       <GetCityForecastByZIP xmlns="http://ws.cdyne.com/WeatherWS/"> \n' +
               '           <ZIP>' + selectedZip + '</ZIP> \n' +
               '       </GetCityForecastByZIP> \n' +
               '   </soap:Body> \n' +
               '</soap:Envelope> ';

xmlHttpObj.onreadystatechange = UseResultsCallBack;
xmlHttpObj.send(envelope); 
```

`xmlHttpObj`是一个有效的 xmlHttpRequest 对象，并且`selectedZip`是一个邮政编码。这都是客户端代码，所以可能存在某种跨域问题，但我不认为这是这种情况下的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:33:13.487

根据您的评论（其中包括您的问题中未包含的非常重要的信息），您似乎正在尝试执行跨域 ajax 请求。这是不允许的。仅`wsf.cdyne.com`允许来自的页面向`wsf.cdyne.com`. 甚至页面表单`cdyne.com`也被阻止进行 ajax 调用，`wsf.cdyne.com`因为浏览器认为它是一个不同的域。

有两种解决方法。第一个是现代解决方案：CORS（跨源资源共享）。这需要`wsf.cdyne.com`网站授予您的页面/站点访问其数据的权限。他们可以通过将`Access-Control-Allow-Origin`标头添加到其 HTTP 响应来做到这一点。如果不进行此修改，您将无能为力。有了这个修改，您不需要做任何特别的事情，只需进行常规的 ajax 调用，浏览器就会与他们的站点进行协商。我再次强调，这不是你需要做的事情。这是`wsf.cdyne.com`管理员需要做的事情。所以联系他们的管理员。

但是，CORS 协议可能对您帮助不大。这是因为大多数浏览器都对让您破坏同源策略设置了严格的限制。例如，尽管 W3C 规范允许`*`每个人都可以向站点发出 ajax 请求的源，但出于安全原因，某些浏览器不支持它。此外，即使`*`可能受支持，某些浏览器也不允许本地托管文件（即未托管在服务器上的页面）使用 CORS。有些甚至更严格地要求服务器有一个域名，而不仅仅是一个 IP 地址。

有关 CORS 的更多信息，请参阅以下链接：

1.  [https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

2.  [跨域ajax](https://stackoverflow.com/questions/9222182/cross-domain-ajax)

The second workaround is the more traditional method. What is preventing you from making the request is the web browser. Programming languages like javascript, Perl, PHP, C and Java don't have such restrictions. So the solution is obvious: don't make the request from the browser. Proxy it to your server.

Remember, the proxy script written in whatever language you choose must be hosted on the same domain as your web page. Again, that means that it doesn't work with local files. But getting a minimal web server running on your local machine shouldn't be too difficult.

The proxying doesn't even need to be on a server. YUI for example uses a Flash applet to proxy cross domain request. You can try it with Java too if I'm not mistaken. But both Flash and Java have started to close down security vulnerabilities of late so this situation may not last forever. Not to mention vendors starting to abandon both technologies.

The best bet, to me, is to simply run a web server and write a proxy script for the page you want to make the ajax request to. Be warned: do not write a generic proxy script. Spammers and bot net operators are on constant lookout for open web proxies to cover their tracks.

# c# - 帐户管理

> ID：15471873
> 
> 赞同：1
> 
> 时间：2013-03-18T07:43:03.740
> 
> 标签：c#, wcf

我对 WCF 完全陌生，所以如果这个问题听起来很愚蠢，我很抱歉。

我想创建一个具有帐户管理功能的网络服务。我的意思是我有一个客户可以请求该服务来注册一个新帐户、登录并将事物链接到我的帐户。

这些帐户存储在 SQL Server 数据库中。

我有这个界面：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    bool Register(string username,  string password);
} 
```

在实现该服务的类中，将新帐户输入到数据库中。

这是这样做的正确方法还是我应该以另一种方式这样做？另外，安全性如何？显然密码将在数据库中散列（我在方法中创建散列），但以明文形式将其发送到服务似乎不是正确的方法。

第二个问题是我想使用自定义 UserNamePasswordValidator 所以客户端只能在身份验证后调用方法（请参阅我之前的问题：[基本身份验证和 WCF](https://stackoverflow.com/questions/15430645/basic-authentication-and-wcf/15431009#comment21829281_15431009)）

问题是我想创建一个例外：除了注册方法之外，您必须为每个方法登录。有没有办法做到这一点？或者我应该为这种方法创建一个单独的服务？

我希望有人可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:19:21.513

1.  在 WCF 中，您应该使用传输或消息安全来保护您的消息。实现这一点足以保护您的发送密码。传输安全性将为您提供 SSL/TSL，而消息安全性将根据 WS-Security 规范保护您的消息。如果你愿意，你可以同时使用它们。有关消息安全的优缺点，请参阅[http://msdn.microsoft.com/en-us/library/ms733137.aspx](http://msdn.microsoft.com/en-us/library/ms733137.aspx)和有关传输的[http://msdn.microsoft.com/en-us/library/ms729700.aspx 。](http://msdn.microsoft.com/en-us/library/ms729700.aspx)

2.  在启用自定义验证之前，您**必须**实现上述安全模型之一。当您实施自定义验证时，这只是打开频道之前的另一项安全检查。例如，您有一个具有自定义安全性的代码

    ```
     factory = new ChannelFactory<IContract>(binding,
                    new EndpointAddress(address, EndpointIdentity.CreateX509CertificateIdentity(serviceCertificate)));
     factory.Credentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.PeerOrChainTrust;
     factory.Credentials.UserName.UserName = "admin";
     factory.Credentials.UserName.Password = "qwerty";
     channel = factory.CreateChannel(); 
    ```

当你创建这样的通道时，首先会有证书检查，然后在你的服务端它会调用 Validate() 方法。在那里，您可以检查您的登录名并通过并抛出异常，如果它们是错误的。所以 factory.CreateChannel() 将返回异常，并且不会构建通道，因此您将无法调用任何服务方法。如果您只想使用一种方法，我建议您仅将独立服务用于注册目的，或者您可以尝试将注册逻辑放入您的 Validate() 方法中。

# batch-file - 使用批处理脚本将文件从一个文件夹移动到另一个具有相同层次结构和文件夹名称的文件夹？

> ID：15471877
> 
> 赞同：0
> 
> 时间：2013-03-18T07:43:13.643
> 
> 标签：batch-file, directory, hierarchy, move

因此，我希望将所有转换后的文件夹下的文件从主 Source 文件夹移动到另一个具有相同层次结构的 Output 文件夹。

```
Source
   -done
   -converted
   -folder1
      -done
      -converted
      -folder11
         -done
         -converted
   -folder2
      -done
      -converted 
```

到

```
Output
   (files from converted folder)
   -folder1
      (files from converted folder)
      -folder11
         (files from converted folder)
   -folder2
      (files from converted folder) 
```

我是批处理脚本的新手，如果您能以某种方式帮助我，我将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:37:29.797

```
@ECHO OFF
SETLOCAL
SET source=c:\sourcedir
SET destroot=c:\destdir
SET cdtl=0
:loploop
SET /a cdtl+=1
FOR /f "tokens=%cdtl%*delims=\" %%i IN ("%source%") DO IF NOT "%%j"=="" GOTO loploop
FOR /f "delims=" %%i IN (
    ' dir /b/s/ad "%source%\converted" '
    ) DO CALL :movedest "%%~dpni%"
)
GOTO :eof

:movedest
SET destdir=%~1
FOR /f "tokens=%cdtl%*delims=\" %%d IN (%1) DO SET destdir=%destroot%\%%e
ECHO MD "%destdir%" 2>NUL
ECHO MOVE /y "%~1\*.*" "%destdir%\"
GOTO :eof 
```

倒数第二行中的`ECHO`s 只是显示了建议的操作。在您确认这是您想要执行的操作后，只需删除`ECHO`关键字即可执行移动。

请注意，命令中的`/y`开关`MOVE`将覆盖文件的任何现有目标版本。

# javascript - Three.js - Uncaught TypeError: undefined is not a function

> ID：15471879
> 
> 赞同：13
> 
> 时间：2013-03-18T07:43:21.680
> 
> 标签：javascript, three.js, webgl

我正在`Uncaught TypeError: undefined is not a function`使用 Three.js。我正在创建`THREE.PerspectiveCamera`. 脚本是

```
window.requestAnimFrame = (function(callback){
        return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback){
            window.setTimeout(callback, 1000 / 60);
        };
    })();

    function animate(lastTime, angularSpeed, three){
        // update
        var date = new Date();
        var time = date.getTime();
        lastTime = time;

        // render
        three.renderer.render(three.scene, three.camera);

        // request new frame
        requestAnimFrame(function(){
            animate(lastTime, angularSpeed, three);
        });
    }

    $(window).bind('load',function(){
        var angularSpeed = 0.2; // revolutions per second
        var lastTime = 0;
        $container = $("#container");
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        $container.append(renderer.domElement);

        // camera - Uncaught Type Error on the below line
        var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.y = -450;
        camera.position.z = 400;
        camera.rotation.x = 45 * (Math.PI / 180);

        // scene
        var scene = new THREE.Scene();

        var material = new THREE.LineBasicMaterial({
                            color: 0x0000ff,
                        });
        var geometry = new THREE.Geometry();
        for(var i=0;i<100;i++){
            geometry.vertices.push(new THREE.Vector3(i-100,i-100,i-100));
            geometry.vertices.push(new THREE.Vector3(i+100,i+100,i+100));
            var line = new Three.Line(geometry,material);
            scene.add(line);
            geometry=new THREE.Geometry();
        }

        // create wrapper object that contains three.js objects
        var three = {
            renderer: renderer,
            camera: camera,
            scene: scene,
        };

        animate(lastTime, angularSpeed, three);
    }); 
```

这是因为我声明相机的方式是错误的吗？我检查了three.js 文档和给出的示例基本相同。所以我被困在做什么。

更新：当我遇到最后一个错误时，我正在使用 Three.js 的本地副本。我用链接[http://www.html5canvastutorials.com/libraries/Three.js](http://www.html5canvastutorials.com/libraries/Three.js)切换了它。现在，PerspectiveCamera 错误消失了，但它在 Three.js 脚本中产生了一个新错误。错误`Uncaught TypeError: Cannot read property 'x' of undefined`在 Three.js 脚本的第 337 行

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-31T02:49:31.587

本地副本的问题是您使用了未构建的 Three.js 文件（即 src/Three.js）。您想要的是 build/three.js 或 build/three.min.js。我将它复制到我的项目中，并在脚本标签的 src 属性中更改了对它的引用，这一切都开始工作了。

简而言之：

```
mrdoob-three.js-2524525(or some other number here)
 |
 +----build
 |     |
 |     +--three.js     <-- YES, CORRECT FILE
 |     +--three.min.js <-- YES
 |     ...
 |
 +----src
 ...   |
       +--Three.js     <-- NO, PREBUILT FILE THAT ONLY CONTAINS CONSTANTS
       ... 
```

# c# - XML 命名空间位置

> ID：15471883
> 
> 赞同：0
> 
> 时间：2013-03-18T07:43:35.173
> 
> 标签：c#, xml

有人可以指导我如何在正确的位置获得命名空间。目前我得到以下信息：

```
<agr:ABWInvoice 
    xmlns:agr="http://services.agresso.com/schema/ABWInvoice/2011/11/14"
    xsi:schemaLocation="http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd" 
    xmlns:agrlib="http://services.agresso.com/schema/ABWSchemaLib/2011/11/14" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 > 
```

我想要这样的东西：

```
<agr:ABWInvoice 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:agrlib="http://services.agresso.com/schema/ABWSchemaLib/2011/11/14" 
    xmlns:agr="http://services.agresso.com/schema/ABWInvoice/2011/11/14" 
    xsi:schemaLocation="http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd"
> 
```

我添加这样的命名空间：

```
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
ns.Add("agrlib", "http://services.agresso.com/schema/ABWSchemaLib/2011/11/14");
ns.Add("agr", "http://services.agresso.com/schema/ABWInvoice/2011/11/14"); 
```

发票长这样：

```
 [Serializable]
    [XmlRootAttribute("ABWInvoice", Namespace = "http://services.agresso.com/schema/ABWInvoice/2011/11/14")]
    public class ABWInvoice
    {
        private List<Invoice> _invoice = new List<Invoice>();

        [XmlAttributeAttribute("schemaLocation", AttributeName = "schemaLocation", Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
        public string SchemaLocation = "http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd";

        [XmlElement("Invoice", Namespace = "http://services.agresso.com/schema/ABWInvoice/2011/11/14")]
        public List<Invoice> Invoices
        {
            get { return (_invoice); }
            set { _invoice = value; }
        }
    } 
```

# json - 在 JSP 中格式化 JSON 字符串

> ID：15471884
> 
> 赞同：0
> 
> 时间：2013-03-18T07:44:02.990
> 
> 标签：json

我已经开始研究 JSON，我正在通过 AJAX 调用从 JSP 返回一个 JSON。它运作良好。

只有我需要更改返回 JSON 字符串的格式。

以下是我的 JSP 正在返回的字符串。

```
[{"VV":0,"desc":"XXXXXXX","amount":0,"date":"12/03/2013","watch":""},{"VV":1,"desc":"XXXXXXX","amount":1,"date":"12/03/2013","watch":""}] 
```

下面是我希望我的 JSP 返回的字符串。

```
{"total":"2","rows":[{"VV":0,"desc":"XXXXXXX","amount":0,"date":"12/03/2013","watch":""},{"VV":1,"desc":"XXXXXXX","amount":1,"date":"12/03/2013","watch":""}] } 
```

任何人都可以请帮助。

以下代码我用来将输出发送回前端。

```
JSONArray arrayObj=new JSONArray();

JSONObject json = new JSONObject();
  json.put("VV", i);
  json.put("desc", "XXXXXXXXX");
  json.put("amount", 1);  
  json.put("date", "12/03/2013");
  json.put("watch", "");

PrintWriter out1 = response.getWriter();
  out1.println(arrayObj); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:34:17.910

对于您创建的“json”对象，您需要分配给一个新变量。像这样的东西：

```
arrayObj.put(json); 
```

接下来，您需要创建另一个对象：

```
JSONObject finalObj = new JSONObject();
finalObj.put("total", 2);
finalObj.put("rows",arrayObj);
finalObj.flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:12:40.653

我认为您需要将其转换为 String 并根据您的需要覆盖 toString() 方法并将其传递给您的 JSP 页面

# java - 如何在 Windchill GUI 的列表中添加自定义按钮

> ID：15471892
> 
> 赞同：1
> 
> 时间：2013-03-18T07:44:52.247
> 
> 标签：java, list, button, ptc-windchill

我正在使用 Windchill 10.0 M030。在我的 GUI 中，我需要在报告工具栏下拉列表中添加一个自定义按钮。

下图清楚地显示了我的问题

![图形用户界面](../Images/f133719f912479ae53c647bacf594a8a.png)

我已经尝试在 psb-actionmodels.xml 文件中添加相应模型名称下的条目，如下所示

```
<model name="psbRelatedPartsTreeToolBar">
....
<action name="psbReportsGroupGWT" type="psb" />
      <action name="psbReportsGWT" type="psb" />
      <action name="psbReportMultiLevelCompListGWT" type="psb" />
      <action name="separator" type="separator" />
      <action name="psbReportSingleLevelConsolBOMGWT" type="psb" />
      <action name="psbReportSingleLevelBOMGWT" type="psb" />
      <action name="psbReportSingleLevelBOMWithNotesGWT" type="psb" />
      <action name="separator" type="separator" />
      <action name="psbReportMultiLevelBOMGWT" type="psb" />
      <action name="psbReportMultiLevelBOMWithReplacementsGWT" type="psb" />
      <action name="seperator" type="seperator" />
      <action name="HBOMReportsGWT" type="psb" />
      <action name="psbReportMultiLevelBOMWithAMLAVLGWT" type="psb" />
      <action name="psbReportMultiLevelBOMWithAMLGWT" type="psb" />
      <action name="separator" type="separator" />
      <action name="singleSourceOEMPartsGWT" type="psb" />
      <action name="uniqueManufacturerPartsGWT" type="psb" />
      <action name="separator" type="separator" />
      <action name="changeBaselineReportGWT" type="change" />         
      <action name="exportActionsGWT" type="cat"/>
      <action name="exportCsvGWT" type="cat" />
      <action name="exportHtmlGWT" type="cat" />
      <action name="exportTextGWT" type="cat" />
      <action name="exportXlsGWT" type="cat" />
      <action name="exportXlsxGWT" type="cat" />
      <action name="exportXlsReportGWT" type="cat" />
      <action name="exportXmlGWT" type="cat" />
      <action name="newButton" type="cat" />
   </model> 
```

我在这里添加了名为 newButton 的按钮，并且在 cat-actions.xml 文件中有相应的条目。

但是按钮不在那个列表中。这是正确的方式吗？或者我不知道如何在那边添加按钮。有人建议我在哪些 xml 文件中需要更改，哪些是类文件或rbInfo 要更改？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:12:26.630

PTC 当前不支持功能区栏自定义。

如果要在此菜单中集成新按钮，则需要对 GWT（Google Web Toolkit）有很好的了解，因为此按钮栏是使用 GXT 库开发的。我不建议这样做，因为您永远不会从 PTC 获得有关此主题的支持。

您添加到 psb-actionmodels.xml 的新按钮应通过右键单击产品结构浏览器出现（在您的屏幕截图中，在 HBOM22 部分）。

在上下文菜单中获取操作通常是一个很好的解决方案。然后您可以自定义该操作可用的对象类型（在 typeBasedActionFilter.properties 配置文件中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T14:47:37.927

您必须更改本机类 com.ptc.windchill.mpml.ppb.server.PPBTreeConfigBuilder 在 **getToolbarConfigOverrides**方法中创建按钮

# json - 如何使用 zlib 解压缩 JSON 响应

> ID：15471895
> 
> 赞同：-2
> 
> 时间：2013-03-18T07:45:13.423
> 
> 标签：json, node.js, http, zlib

我尝试使用以下代码发送 JSON 响应，但它给了我一个错误提示

```
console.log(zlib.createGunzip()).pipe(data);
TypeError: Cannot call method 'pipe' of undefined 
```

我的代码：

```
res.on('data', function (chunk) {
  data += chunk;
  console.log(data);
  console.log(res.headers['content-encoding']);
  var output;

  switch (res.headers['content-encoding']) {
    // or, just use zlib.createUnzip() to handle both cases
    case 'gzip':
      console.log(data);
      console.log(zlib.createGunzip()).pipe(data);
    break;

    case 'deflate':
      console.log(zlib.createInflate()).pipe(data);
    break;

    default:
      console.log(data);
    break;
  }
}); 
```

任何有关这方面的帮助都将非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:46:46.777

`console.log()`什么都不返回（未定义）。您正在尝试在`console.log`返回值 上调用方法管道

我猜你需要这个`console.log(zlib.createGunzip().pipe(data));`

# c# - 如何调用无参数方法？

> ID：15471896
> 
> 赞同：8
> 
> 时间：2013-03-18T07:45:14.113
> 
> 标签：c#, asp.net

我有一类没有输入参数的公共方法。

```
 public partial class MyClass: System.Web.UI.MasterPage
   {

      public void HelloWorld() { 
       Console.WriteLine("Hello World "); 
      } 
    } 
```

我想在`HelloWorld()` 我的另一个类中调用方法

```
public partial class ProductType_Showpt : System.Web.UI.Page
{
     protected void ChkChanged_Click(object sender, EventArgs e)
    {
          MyClass master =(MyClass) this.Master;   
          master.GetType().GetMethod("HelloWorld").Invoke(null, null);
    }
} 
```

但它抛出了这个异常

```
Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T07:47:14.827

我相信您的`Invoke`方法不应该将`null`参数作为第一个参数。

```
MyClass yourclass = new MyClass();    
MyClass.GetType().GetMethod("HelloWorld").Invoke(yourclass , null); 
```

对于第一个参数[`MethodBase.Invoke`](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)

> 调用方法或构造函数的对象。如果方法是静态的，则忽略此参数。如果构造函数是静态的，则此参数必须为**null**或定义构造函数的类的实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-19T14:59:01.840

在这里，您没有使用类作为`Invoke`ie 中的第一个参数，您必须应用如下代码。

```
MyClass master= new MyClass();  
master.GetType().GetMethod("HelloWorld").Invoke(objMyClass, null); 
```

现在，如果您有另一种带有某些参数的方法（重载方法），则可能会出现另一种引发错误的可能性。在这种情况下，您必须编写代码来指定您需要调用没有参数的方法。

```
MyClass master= new MyClass();  
MethodInfo mInfo = master.GetType().GetMethods().FirstOrDefault
                (method => method.Name == "HelloWorld"
                && method.GetParameters().Count() == 0);
mInfo.Invoke(objMyClass, null); 
```

现在，如果您事先不知道您的类实例，您可以使用以下代码。在内部使用[完全限定名称](https://msdn.microsoft.com/en-us/library/dfb3cx8s%28v=vs.71%29.aspx)`Type.GetType`

```
Type type = Type.GetType("YourNamespace.MyClass");
object objMyClass = Activator.CreateInstance(type);
MethodInfo mInfo = objMyClass.GetType().GetMethods().FirstOrDefault
                   (method => method.Name == "HelloWorld"
                    && method.GetParameters().Count() == 0);
mInfo.Invoke(objMyClass, null); 
```

如果您的类实例事先未知，并且在另一个程序集中，`Type.GetType`则可能返回 null。在这种情况下，对于上面的代码，而不是`Type.GetType`调用下面的方法

```
public Type GetTheType(string strFullyQualifiedName)
{
    Type type = Type.GetType(strFullyQualifiedName);
    if (type != null)
        return type;
    foreach (var asm in AppDomain.CurrentDomain.GetAssemblies())
    {
        type = asm.GetType(strFullyQualifiedName);
        if (type != null)
           return type;
    }
    return null;
} 
```

并打电话给

```
Type type = GetTheType("YourNamespace.MyClass"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T07:46:29.290

您正在尝试在 null 而不是对象实例上调用方法，您可以在类的实例上调用实例方法而不是在 null 上。在方法的第一个参数中传递您的类的实例`HelloWorld`。

```
MyClass myClassObject = new MyClass();    
MyClass.GetType().GetMethod("HelloWorld").Invoke(myClassObject, null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T07:46:49.817

您必须指定一个实例来执行该方法：

```
MyClass myClassInstance = new MyClass();
MyClass.GetType().GetMethod("HelloWorld").Invoke(myClassInstance, null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-16T17:50:28.527

您需要将该`HelloWorld()`方法标记为`static`或将`MyClass`实例作为第一个参数传递给该`Invoke`方法（如先前的答案所述）。

# android - 想要从安卓应用发起和管理语音通话

> ID：15471899
> 
> 赞同：1
> 
> 时间：2013-03-18T07:45:51.380
> 
> 标签：android, phone-call, telephonymanager, dtmf

我想发起和管理来自 android 的呼叫，而不与默认拨号器进行任何交互。呼叫应该从应用程序自动启动，并且应用程序应该能够以编程方式发送 DTMF 音，也可以以编程方式终止呼叫。在此过程中，拨号程序绝不应该出现在前台。

我见过很多有意图地发起呼叫的例子。不幸的是，呼叫将被传递给拨号器，然后拨号器将获得控制权。这是一个这样的例子。 [Android：没有用户初始化的呼叫号码？](https://stackoverflow.com/questions/3696922/android-calling-number-without-user-init)

这可能吗？如果没有，如果您能指出我的文档会有所帮助。

# wso2 - 是否有从 WSO2 API Manager 导入下载的 API 的选项

> ID：15471901
> 
> 赞同：0
> 
> 时间：2013-03-18T07:45:54.850
> 
> 标签：wso2

我已经下载了一个 API（作为 api.zip 文件），它是我从管理控制台在 WSO2 API 管理器中创建的。有没有办法在不同的 WSO2 实例中导入这个 API？

有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:20:46.217

来自 APIPublisher 的已发布 API 的数据存储在三个位置。

1.  在文件系统中 [作为突触配置 API 元素]
2.  在数据库级别

    -- 作为注册表数据[存储的 API 静态元数据]

    -- 作为直接存储在 APIM db 中的数据 [存储的 API 运行时数据]

我相信您已经从管理控制台中的 Metadata-> List-> APIs 下载了 API 元素，该元素存储在注册表空间中。要在另一个 wso2 AM 实例中恢复创建的 API，这个下载的 API 元素是不够的。

如果你想从一个 APIManager 实例备份 API 数据并在另一个实例中恢复，你需要做的是备份以上文件系统和数据库特定数据并恢复。除此之外，目前没有直接下载和上传机制可做WSO2 APIManager 中的 API 备份和恢复过程。

谢谢;

# css - mod_rewrite 不会触发 css 加载

> ID：15471905
> 
> 赞同：0
> 
> 时间：2013-03-18T07:46:14.140
> 
> 标签：css, .htaccess, mod-rewrite

我想将所有请求重定向到 index.php，并且任何 %{REQUEST_URI} 部分都应该作为参数传递给 index.php。此外，即使 %{REQUEST_URI} 部分指向现有文件/目录，我仍然想做重定向。例如，`js`在我的文档根目录中有一个目录。当我访问我的网站时`http://www.example.com/js`，我仍然想重定向到`http://www.example.com/index.php?uri=js`而不是在浏览器中显示目录的内容。

因此，我在 .htaccess 文件中添加了以下两行。

```
RewriteEngine On
RewriteRule .* index.php?uri=%{REQUEST_URI} [QSA] 
```

但这不起作用。

首先，当我指定一个现有文件的路径时，例如`http://www.example.com/foo.css`，它仍然在浏览器中显示文件的内容。（我想要的是`http://www.example.com/index.php?uri=foo.css`）其次，当访问一个目录时，例如`http://www.example.com/js`，然后重定向发生，但 css 未能生效，我的网站看起来已损坏。

好消息是，如果我指定一个不指向根目录中任何文件/目录的任意字符串，它就可以正常工作。我花了几个小时试图调试它，但我不知道。我将如何解决我的问题？

仅供参考，我使用的是 Apache 2.4.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:36:02.367

也许下面的代码：

```
RewriteEngine On
RewriteRule ^index.php?uri=(.*)$ $1 [L] 
```

不知道是不是你想要的。

# c# - 我没有成功在 C# 中运行访问过程

> ID：15471908
> 
> 赞同：0
> 
> 时间：2013-03-18T07:46:22.880
> 
> 标签：c#

***c#中的代码：***

```
public List<Per> RunSpForAotuComplete(string storedProcName, string text)
{
  OleDbDataReader rdr =null;

  List<Per> dictionary = new List<Per>();

  OleDbConnection connection = new OleDbConnection(ConString);

  connection.Open();

  OleDbCommand cmd = new OleDbCommand(storedProcName, connection) 
  {
    CommandType = CommandType.StoredProcedure 
  };

  OleDbParameter parameter = new OleDbParameter("@text", text);

  cmd.Parameters.Add(parameter);
  rdr = cmd.ExecuteReader();

  if (rdr.HasRows)
  {
    while (rdr.Read())
    {
      dictionary.Add(new Per
        {
           name = rdr["semel"].ToString(),
           value = rdr["shem"].ToString(),
        });
     }
   }
} 
```

我不明白为什么`if(rdr.HasRows)=false`？

**这个程序是这样写的：**

```
SELECT shem, semel
FROM TYISHUV
WHERE shem like @text +'*'; 
```

我也尝试过：

> OleDbParameter 参数 = new OleDbParameter("text", text);

代替：

> OleDbParameter 参数 = new OleDbParameter("@text", text);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:53:40.633

将您的程序更新为

```
SELECT shem, semel
FROM TYISHUV
WHERE shem like ?; 
```

添加参数时，

```
 text = text+'*';
  cmd.Parameters.AddWithValue("@text", text); 
```

# mysql - mysql游标获取而不声明变量（可能吗？）

> ID：15471917
> 
> 赞同：0
> 
> 时间：2013-03-18T07:46:54.123
> 
> 标签：mysql, cursor

我有一个游标，声明如下：

```
DECLARE staging_cur CURSOR FOR
SELECT 
col1, col2, ......
FROM crawl_db.staging_listing
WHERE is_deleted = FALSE; 
```

然后我获取每一行，执行一些检查，然后将该行插入另一个（生产）数据库

```
OPEN staging_cur;
the_loop: LOOP

  FETCH staging_cur
  INTO col1_val, col2_val,.....;

  -- perform some checks and some optional inserts
      -- for example, if city with given name is not found in production DB, insert it

  -- insert into production db

END LOOP the_loop; 
```

我意识到我需要为`col1_val, col2_val ...`表 staging_listing () 的每个对应列声明一个变量 ( `col1, col2....`)。问题是这个表包含90-100列并且声明所有变量真的很麻烦

似乎应该有比这更好的方法。是否有某种方法可以访问游标当前行的列，而无需声明单独的变量来保存列值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:53:20.027

如果您需要将行插入另一个表，那么更好的方法是使用 INSERT...SELECT 语句。尽量避免使用游标。

[插入...选择语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)。

# php - 如何检查时间是否在特定时间，然后执行操作

> ID：15471920
> 
> 赞同：-3
> 
> 时间：2013-03-18T07:46:59.633
> 
> 标签：php, javascript

我已经有时间功能并且已经能够在我想要的时间检查它然后它将改变输入文本的值；

但是，当我尝试执行该操作时，它不起作用。

我在这里有时间功能，然后如果时间是下午 2:30:35，那么文本值将更改为 1

```
if(buff=="2:30:35 PM")
{document.getElementById("text").value = 1;} 
```

但是当我想检查文本的值是否为 1 时，它不会执行该操作。

```
<input id= "text" name="test" type="text" value="">
<?php
if (isset($_GET['test']))
{
  $link = mysql_connect(DB_HOSTNAME,DB_USERNAME,DB_PASSWORD) or die("Could not connect to host.");
  mysql_select_db(DB_DATABASE, $link) or die("Could not find database.");
  $query = "UPDATE table SET something='0'";
  $result = mysql_query($query, $link) or die("Data not found.");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:59:17.907

我会这样做

```
//mktime(hour,min,sec,month,day_of_month,year); returns time() value for that date/time
if (time() < mktime(14,30,35,date('n'),date('j'),date('Y'))) {
    //This will run if its earlier then 2:30:35 PM
    //do smth
}
if (time() > mktime(14,30,35,date('n'),date('j'),date('Y'))) {
    //This will run if its later then 2:30:35 PM
    //do smth
} 
```

资料来源：

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

[http://www.php.net/manual/en/function.mktime.php](http://www.php.net/manual/en/function.mktime.php)

# date - Is this a weird date calculation bug in groovy/java?

> ID：15471928
> 
> 赞同：-3
> 
> 时间：2013-03-18T07:47:32.313
> 
> 标签：date, groovy

I'm trying to calculate the number of days between two specific pairs of dates but the assert is failing on the second test, which is only a week further apart from the first test.

The code is below.

Is there a bug in my code? Or is this a weird java/groovy bug?

```
use(groovy.time.TimeCategory) {
    def duration = Date.parse("yyyy-MM-dd", "2013-03-10") - Date.parse("yyyy-MM-dd", "2012-12-30")
    assert duration.days == 70

    def duration2 = Date.parse("yyyy-MM-dd", "2013-03-17") - Date.parse("yyyy-MM-dd", "2012-12-30")
    assert duration2.days == 77
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:01:50.590

@Damien_The_Unbeliever had it right. Since EST was being used, around March, it is switched to EDT which is 1 hour ahead (so converting 2013-03-17 EDT to EST would mean it would lose one hour.)

I've changed the test to confirm that this is true. The second and third asserts pass.

```
use(groovy.time.TimeCategory) {
    def duration = Date.parse("yyyy-MM-dd", "2013-03-10") - Date.parse("yyyy-MM-dd", "2012-12-30")
    assert duration.days == 70

    def duration2 = Date.parse("yyyy-MM-dd", "2013-03-17") - Date.parse("yyyy-MM-dd", "2012-12-30")
    assert duration2.days == 76
    assert duration2.hours == 23
} 
```

# python - 将计算结果写回其数组？

> ID：15471936
> 
> 赞同：0
> 
> 时间：2013-03-18T07:48:12.910
> 
> 标签：python, multidimensional-array, numpy, scientific-computing

[我上一个](https://stackoverflow.com/questions/15374291/writing-a-faster-python-physics-simulator)关于编写高效 python 程序的后续问题。我一直在尝试编写自己的物理模拟，并希望摆脱使用十亿个类和方法。

所以我希望能够对数据集进行计算。这是我最近的尝试：

```
particles = np.array([ #position, last position, velocity, mass, size
                 [[200,0],[200,200],[5,5],10,15], \
                 [[210,210],[210,210],[8,2],20,25],\
                 [[215,215],[195,195],[5,3],5,15], \
                 [[192,186],[160,160],[10,-4],30,30]])

def moveParticles(part, dt):
    part[0] = part[1]
    part[1] += np.multiply(part[2],dt) 
```

我试图将每个粒子的每个属性存储在一个数组中，然后就地更新它们。在这里，我试图将速度向量乘以时间步长，然后将其添加到位置向量中。这似乎是向我表达这一点的一种自然方式，但它给了我错误：

```
TypeError: can't multiply sequence by non-int of type 'float' 
```

我可以将数据写回到同一个数组中吗？我将如何去做？

我一直在阅读，并查看了诸如 numpy 的矢量化函数、itertools、map() 等之类的东西……但是我该如何将结果放回原始数组中呢？

还是在覆盖原始数组之前使用中间数组来存储结果是唯一的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:13:47.920

我认为，您只是以错误的方式调用您的例程（可能将整个粒子数组传递给它，而不是仅传递一个粒子的数组。

无论如何，其他可能的解决方案是将您的数组拆分为单个数组：

```
import numpy as np
pos = np.array([[200,0], [210,210], [215,215], [192,186]], dtype=float)
lastpos = np.array([[200,2000], [ 210,210], [195, 195], [160,160]], dtype=float)
velocity = np.array([[ 5,5], [8,2], [5,3], [10,-4]], dtype=float)
mass = np.array([ 10, 20, 5, 30 ], dtype=float)
size = np.array([ 15, 25, 15, 30 ], dtype=float)

def moveParticles(pos, lastpos, velocity, dt):
    lastpos[:] = pos[:]
    pos[:] += velocity * dt 
```

`pos`这将对和进行就地替换`lastpos`。为了移动你的粒子，你必须调用这个函数：

```
moveParticles(pos, lastpos, velocity, 1) 
```

我在哪里设置 dt = 1。我还假设你想要浮点坐标，如果没有，你应该生成整数数组。

# perl - Perl“取消链接”功能与“glob”一起使用

> ID：15471939
> 
> 赞同：1
> 
> 时间：2013-03-18T07:48:22.150
> 
> 标签：perl

我想删除文件夹中 IP 地址为“1.1.1.1”的`/tmp`文件：

```
# ls -1 /tmp
1.1.1.1_Reboot.xml
1.1.1.1_Roll.xml
1.1.1.1_Setup.xml
1.1.1.2_Reboot.xml
1.1.1.2_Roll.xml
1.1.1.2_Setup.xml 
```

我指的是：[取消链接](http://perldoc.perl.org/functions/unlink.html)和[全局](http://perldoc.perl.org/functions/glob.html)

这是我的代码：

```
#!/usr/bin/perl -w
use strict;

my $DIR     = "/tmp";
my $IP      = '1.1.1.1';

unlink glob $DIR."/".$IP."*"; 
```

但是，它不会删除文件。我怀疑这个`glob`功能，我想我没有以正确的方式使用它。

你能帮忙吗。谢谢。

**更新：**

如果我`$IP`用 IP 地址本身替换，那么它正在删除文件。

```
unlink glob $DIR."/"."1.1.1.1"."*"; 
```

因此，该语句似乎`unlink`无法评估 variable 的值`$IP`。我不知道它为什么会这样。我需要使它与`$IP`而不是它的显式值一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:00:27.413

它可能与路径有关。打印错误以获取更多信息。尝试这个：

```
#!/usr/bin/perl -w
use strict;

my $DIR     = "/tmp";
my $IP      = '1.1.1.1';

chdir $DIR;
my @goners  = glob $IP . "*";

foreach my $file ( @goners ) {
   print "file: $file\n";
   next unless $file =~ m!^1\.1\.1\.\d_!;
   print "file to delete: $file\n";
   unlink $file or warn "Could not unlink $file: $!";
} 
```

# c# - 如何调试在生产服务器上无缘无故停止的 C# 服务

> ID：15471949
> 
> 赞同：4
> 
> 时间：2013-03-18T07:49:14.823
> 
> 标签：c#, service

我们在 C# 中实现了一对发送和接收传真的服务。这些服务已经在多台服务器上完美运行了几年——直到上周。我们的一个客户升级到了 Windows Server 2012。我们安装了这些服务，然后一切都崩溃了。基本上，其中一项服务似乎工作了几分钟，然后，出于某种未知原因 - 转到 OnStop 方法。所以有人，或某事 - 正在阻止它，但我不知道它是什么。我怎么能去调试呢？我是 C# 新手，这不是我的代码。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:06:48.310

有趣的是，您正在发送和接收传真：这可能与 windows server 2008/2012 引入的某些[Session 0 Insolation](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463353.aspx)有关，这可能会导致图形相关服务出现问题。如果您有一些机会在开发机器上运行服务器，使用 Windows7/8 机器和 SYSTEM 用户，您可能会重现该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T07:55:33.643

如果它只在生产服务器上停止，那么生产服务器与您的开发服务器/工作站有一些不同是合理的。

您可能不太可能被允许将调试器挂接到生产服务器上的某些内容，但处理此问题的最佳方法是将 he** 从代码中注销。

您应该引入足够的日志记录来弄清楚：

*   它停在哪里
*   为什么它停止（我的钱是例外）
*   应用程序当时的状态（与崩溃有关）

这可能必须在迭代中完成，除非你全力以赴。

服务和日志是齐头并进的，所以只需实现它。

# android - 如何在android中使用带有AsyncTask的片段内的listview

> ID：15471957
> 
> 赞同：0
> 
> 时间：2013-03-18T07:49:46.590
> 
> 标签：android, android-listview, android-asynctask

我有一个`Fragment`，里面有一个`ListView`。现在我正在`AsyncTask`使用`doInBackGround()`. 现在我想借助`ArrayAdapter`in将这些数据设置`onPostExecute()`到里面的 ListView 中`Fragment`。如何在里面添加数据`ListView`，里面是`Fragment`什么？

这是造成问题，因为我`Fragment`没有`Context`.

```
package com.example.the_hindu_news;

import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;

public class Async_list extends AsyncTask<Context, Integer, String> {

    private Internet_list ob_il;
    private String[] news;
    private String[] link;
    ListView ls;
    Base_class ob_bc;

    public Async_list(ListView ls, Base_class ob_bc) {
        this.ls = ls;
        this.ob_bc = ob_bc;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected String doInBackground(Context... params) {
        try {
            ob_il = new Internet_list();

            ob_il.parser();
            ob_il.parse_VIA_pull_parser();

            news = ob_il.return_news();
            link = ob_il.return_links();
        } catch (final Exception err) {
            Log.i("doInBackGround() : " + err.toString(), "tushar");
        }
        return null;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    protected void onPostExecute(String result) {
        try {
            final ArrayAdapter<String> adapter = new ArrayAdapter<String>(ob_bc,
                    android.R.layout.simple_list_item_1, news);
            ls.setAdapter(adapter);
        } catch (final Exception err) {
            Log.i("onPostExecute() : " + err.toString(), "tushar");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:09:23.473

例如定义一个接口：

```
interface NetworkListener <T>{
    public void updateData(List<T>);
} 
```

您的片段实现此接口并更新您的列表。为您的 AsyncTask 提供接口。

# android - HttpConnectionParams.setConnectionTimeout 混乱

> ID：15471963
> 
> 赞同：1
> 
> 时间：2013-03-18T07:50:16.610
> 
> 标签：android, http, connection-timeout

我知道 HttpConnectionParams 用于设置 http 请求的超时，但我不知道如何正确使用它。每个请求都有 setParams(HttpParams p) - 我认为在每个请求上设置 http 参数有点多余。我宁愿以全局方式配置 AndroidHttpClient - 以便每个请求共享相同的 HttpParams 配置。

这是否`HttpConnectionParams.setConnectionTimeout(params, 1500);`在全球范围内运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:53:04.697

[HttpConnectionParams](http://developer.android.com/reference/org/apache/http/params/HttpConnectionParams.html)是要使用的类：

示例代码（与您的一样未完成:-)）

```
HttpClient httpClient = new DefaultHttpClient();
final HttpParams httpParams = httpClient.getParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 5000);
HttpConnectionParams.setSoTimeout(httpParams, 5000); 
```

所以你必须这样做（不深入检查你的代码）：

```
 public class Client {    

        public static void sendRequest(final HttpUriRequest request, 
                                       int RequestType,
                                       ResponseListener callback) {
        HttpClient httpClient = new DefaultHttpClient();
        final HttpParams httpParams = httpClient.getParams();
        HttpConnectionParams.setConnectionTimeout(httpParams, 5000);
        HttpConnectionParams.setSoTimeout(httpParams, 5000);
        (new AsynchronousSender(httpClient, request, RequestType, 
                            new Handler(), new CallbackWrapper(callback))).start(); 
```

}

**编辑：**

本质上`setSoTimeout()`是一样的，但它会等待的不仅仅是初始连接。因此，您将检查每个数据包以查看它是否超时，而`setConnectionTimeout`只有在初始连接时才会超时。

# node.js - What is the difference between require('mypackage.js') and require('mypackage')?

> ID：15471965
> 
> 赞同：11
> 
> 时间：2013-03-18T07:50:19.107
> 
> 标签：node.js, require

Both these `require` statements appear to work the same way:

`var Mypackage = require('mypackage.js');`

`var Mypackage require('mypackage');`

Is there a difference between them?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T07:54:10.573

Here is the answer:

```
Module.prototype.load = function(filename) {
  debug('load ' + JSON.stringify(filename) +
        ' for module ' + JSON.stringify(this.id));

  assert(!this.loaded);
  this.filename = filename;
  this.paths = Module._nodeModulePaths(path.dirname(filename));

  var extension = path.extname(filename) || '.js';
  if (!Module._extensions[extension]) extension = '.js';
  Module._extensions[extension](this, filename);
  this.loaded = true;
}; 
```

1.  [Node.JS](http://nodejs.org) looks to see if the given module is a core module. (e.g. `http`, `fs`, etc.) Always takes the precedence in the loading modules.
2.  If the given module is not a core module (e.g. `http`, `fs`, etc.), Node.js will then begin to search for a directory named, *`node_modules`*.
    It will start in the current directory (relative to the currently-executing file in [Node.JS](http://nodejs.org)) and then work its way up the folder hierarchy, checking each level for a node_modules folder. Once [Node.JS](http://nodejs.org) finds the `node_modules` folder, it will then attempt to load the given module either as a (.js) JavaScript file or as a named sub-directory; if it finds the named sub-directory, it will then attempt to load the file in various ways. So, for example
3.  If you make a request to load the module, "utils" and its a directory not a .js file then:
    [Node.JS](http://nodejs.org) will search a hierarchical directory for `node_modules` and `utils` in the following ways:
    `./node_modules/utils.js`
    `./node_modules/utils/index.js`
    `./node_modules/utils/package.json`
4.  If [Node.JS](http://nodejs.org) still can't find the file in above steps, Node.js will then start to look into the directory paths from environment variables i.e. **`NODE_PATH`** set on your machine(obviously set by Node.JS installer file if you are on windows) Not Found in all the above steps then, prints a stack trace to [stder](http://nodejs.org/api/stdio.html#stdio_console_error_data)
    *E.g.*: **`Error:`**`Cannot find module 'yourfile'`
    For more information: link is [here](http://nodejs.org/api/modules.html#modules_modules) even the *cyclic require()* is explained very well.

# javascript - 使用 Jasmine-jQuery，我尝试使用夹具 HTML，但测试未通过

> ID：15471968
> 
> 赞同：0
> 
> 时间：2013-03-18T07:51:27.903
> 
> 标签：javascript, jquery, coffeescript, jasmine, jasmine-jquery

我是**Jasmine-jQuery**的新手。我尝试使用fixture HTML，但测试没有通过。

**夹具.html：**

```
<html>
<body>
  <p id="0">
  </p>
</body>
</html> 
```

**fake_code_for_question_spec.coffee：**

```
describe "FakeCodeForQuestion", ->
  describe "with HTML fixture", ->
    beforeEach ->
      loadFixtures "fixture.html"   ### Load Fixture
      @obj = new FakeCodeForQuestion

    describe "#addText", ->
      beforeEach ->
        @obj.addTextToParagraph0()   ### Change DOM

      it "should add text", ->
        expect($('p#0')).toHavaText "text"   ### Get Changed DOM 
```

**fake_code_for_question.coffee：**

```
root = exports ? this
class root.FakeCodeForQuestion
  addTextToParagraph0: ->
    $('p0').text "text" 
```

**茉莉花结果：**

```
FakeCodeForQuestion with HTML fixture #addText should add text.
TypeError: Object [object Object] has no method 'toHavaText'
TypeError: Object [object Object] has no method 'toHavaText'
    at null.<anonymous> (http://localhost:8888/__spec__/p130318_fake_code_for_question_spec.js:14:35)
    at jasmine.Block.execute (http://localhost:8888/__jasmine__/jasmine.js:1064:17)
    at jasmine.Queue.next_ (http://localhost:8888/__jasmine__/jasmine.js:2096:31)
    at goAgain (http://localhost:8888/__jasmine__/jasmine.js:2086:18) 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:03:22.220

我认为您的文件夹结构不符合 jasmine-jquery。使用`loadFixtures()`此目录路径`spec/javascripts/fixtures`。如果你进入 jasmin-jquery 代码库，寻找`fixturesPath`，你会看到它们都使用`spec/javascripts/fixtures`. 但是您可以使用`jasmine.getFixtures().fixturesPath = "[your directory path here]";`.

如果我理解您的问题，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T00:12:51.457

```
describe "FakeCodeForQuestion", ->
  describe "with HTML fixture", ->
    beforeEach ->
      loadFixtures "fixture.html"   ### Load Fixture
      @obj = new FakeCodeForQuestion

    describe "#addText", ->
       beforeEach ->
        @obj.addTextToParagraph0()   ### Change DOM

       it "should add text", ->
        expect($('p#0')).toHavaText "text"   ### Get Changed DOM 
```

你得到的结果，没有方法'toHavaText'给你指示，你想要toHaveText

# mips - 在没有临时寄存器的情况下交换数组的 mips 值

> ID：15471970
> 
> 赞同：0
> 
> 时间：2013-03-18T07:51:40.703
> 
> 标签：mips

所以我正在尝试将其转换为 mips。

```
void swap (int *px, int *py) {
int temp;
temp = *px;
*px = *py;
*py = temp;
} 
```

我想可能是这样的

```
sll $t1, $a1, 2
add $t1, $a0, $t1
lw $t0, 0($t1)
lw $t2, 4($t1)
sw $t2, 0($t1)
sw $t0, 4($t1)
jr $ra 
```

但我不允许使用临时寄存器。

我想我必须使用一些 lw/sw 命令，但我不知道你该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T09:56:29.703

对此有两种解决方案：

1)**数学**

```
void swap(int &x, int &y)
{
     if(*x != *y)
     {
         x = x - y;
         y = y + x;
         x = y - x;
     }
} 
```

**注意：请勿使用此方法。在某些情况下可能会导致溢出。**

2）**异或**（使用这个）

```
void xorSwap (int *x, int *y) 
{
     if (x != y) 
     {
         *x ^= *y;
         *y ^= *x;
         *x ^= *y;
     }
 } 
```

[关于异或的维基百科](http://en.wikipedia.org/wiki/XOR_swap_algorithm)

我将 MIPS 代码部分留给您自己实现；）

# wpf - WPF按钮不显示图像

> ID：15471974
> 
> 赞同：1
> 
> 时间：2013-03-18T07:52:18.140
> 
> 标签：wpf, visual-studio, xaml

我的按钮发生了一个奇怪的现象，在我的视觉工作室中创建工具栏并将按钮作为图像分配给它们在编辑器中显示的工具栏，但是当我运行应用程序时按钮不显示，如下图所示连同代码：

图片来自视觉工作室 ![图片来自视觉工作室](../Images/39e9530f16e42ff9d3be945ff306c5f0.png)

运行应用图像 ![运行应用图像](../Images/2d02a7ea2fe82a9c91138b035164201a.png)

代码：

```
 <ToolBarTray DockPanel.Dock="Top">
            <ToolBar>
                <Button ToolTip="Open">
                    <Image Source="Icons/folder_page.png" />
                </Button>
                <Button ToolTip="Save">
                    <Image Source="Icons/page_save.png" />
                </Button>
            </ToolBar>
    </ToolBarTray> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T07:56:36.513

您是否将图像复制到输出目录？

您是否将图像的构建操作设置为内容并将复制到输出目录设置为“如果较新则复制”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:03:23.673

通过将图像添加到项目中，它们现在显示为资源

# event-handling - NSIS：最大化/最小化按钮事件处理

> ID：15471983
> 
> 赞同：1
> 
> 时间：2013-03-18T07:53:14.997
> 
> 标签：event-handling, nsis

我想知道当我单击 nsis 对话框的最大化按钮（我已经启用它）时如何处理该事件。每次单击最大化按钮时，我都想执行一些其他对话框元素调整大小，并在其最小化时恢复。那么，我该如何实现呢？？？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:39:02.377

NSIS 真的不是为处理可调整大小的对话框而设计的。

捕获大小事件的唯一方法是使用插件。您可以编写自己的自定义插件或尝试实验性的[WndSubclass 插件](http://nsis.sourceforge.net/WndSubclass_plug-in)，无论哪种方式，您都非常需要了解 Windows API 才能做到这一点......

*编辑：*

```
!include nsDialogs.nsh
!include WinCore.nsh
!include WndSubclass.nsh
!macro _Win_HIWORD_FIXED _outvar _in
IntOp ${_outvar} "${_in}" >> 16 ;sign extended
${LOWORD} ${_outvar} ${_outvar} ;make sure we strip off the upper word
!macroend
!undef HIWORD
!define HIWORD "!insertmacro _Win_HIWORD_FIXED "

Var ParentSubProc
Function ParentSubProc
${If} $2 = ${WM_SIZE}
    ${LOWORD} $1 $4
    ${HIWORD} $2 $4
    ${NSD_SetText} $hwndparent "Size: $1 x $2"
${EndIf}
FunctionEnd

Function .onGuiInit
${NSD_AddStyle} $hwndparent 0x70000
${WndSubclass_Subclass} $hwndparent ParentSubProc $ParentSubProc $ParentSubProc
FunctionEnd 
```

# asp.net-mvc - Asp.net mvc 深度验证

> ID：15471988
> 
> 赞同：1
> 
> 时间：2013-03-18T07:53:47.763
> 
> 标签：asp.net-mvc, validation

我创建了一个具有以下域实体的 asp.net 应用程序：

```
public class Person
{
  [Required]
  public string name { get; set; }
  public string address { get; set; }
  public ICollection<Item> ItemsPurchased { get; set;}
}

public class Item
{
  [Required]
  public string name { get; set; }
  public int price { get; set; }
} 
```

带视图模型

```
public class PersonViewModel
{
  public Person Entity { get; set; }
  public Item ItemPurchased { get; set; }
} 
```

现在我有一个表格，要求输入一个人的详细信息以及购买的物品（如果有的话）

```
Html.Label("Person Name")
Html.TextboxFor(model => model.Entity.name)
Html.ValidationMessageFor(model => model.Entity.name)

Html.Label("Item Name")
Html.TextboxFor(model => model.ItemPurchased.name)
Html.ValidationMessageFor(model => model.ItemPurchased.name)

Html.Label("Item Price")
Html.TextboxFor(model => model.ItemPurchased.Price)
Html.ValidationMessageFor(model => model.ItemPurchased.Price) 
```

最后在控制器中，我要将项目（如果它是由用户提供的）添加到集合中。

```
if(!this.ModelState.IsValid)
{
  //Return the view with validation errors
} 
```

**主要问题**

现在如果不给出项目名称的值，它会给我一个验证错误“名称字段是必需的”。但我只想删除此表单的项目对象属性的验证。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:11:59.970

您应该使用视图模型。视图模型是专门为满足视图要求而设计的类。在此视图中，您似乎要求不需要名称。所以设计一个视图模型：

```
public class EditItemViewModel
{
    public string name { get; set; }
    public int price { get; set; }
} 
```

和：

```
public class EditPersonViewModel
{
    public Person Entity { get; set; }
    public EditItemViewModel ItemPurchased { get; set; }
} 
```

你很高兴。此表格将`name`不再需要。

另外，我建议您检查一下[`AutoMapper`](http://automapper.org/)哪些可以大大简化您的域模型和视图模型之间的映射。

# java - 如何使用 jdbc 连接 ms sql-server？

> ID：15471992
> 
> 赞同：-3
> 
> 时间：2013-03-18T07:54:02.960
> 
> 标签：java, sql-server, jdbc

我在这里有一个 Tomcat 7 和 javascript 应用程序。现在我添加了与 MS SQL-Server R2 数据库连接的 jsp。
在jsp文件中我有：

```
 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
Connection conn= null;
String url = "jdbc:sqlserver://localhost:1433;DatabaseName=dd_ugra";
conn = DriverManager.getConnection(url,"sa", "123456"); 
```

在我从 Microsoft 站点下载 SQL-Server 的 jdbc 并复制`sqljdbc4.jar`到`tomcat\lib`文件夹后，但是当我启动应用程序时出现错误：

```
java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver 
```

在另一种情况下，我尝试使用：

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

并得到另一个错误：

```
java.sql.SQLException: No suitable driver found for jdbc:microsoft:sqlserver://localhost:1433;DatabaseName=ugra 
```

如何正确连接到 SQL-Server？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:58:56.850

我认为你在连接字符串上犯了错误，应该是这样的

```
 String connectionUrl = "jdbc:sqlserver://serverA:1433;" +
         "databaseName=AdventureWorks;integratedSecurity=true;" +
         "failoverPartner=serverB"; 
```

在第二种情况下，您可以将其视为 'jdbc:microsoft:sqlserver://'

并且 JDBC jar 应该存在于 Web content/WEB-INF/

# jquery - 在点击事件中使用 stopPropagation

> ID：15471998
> 
> 赞同：7
> 
> 时间：2013-03-18T07:54:27.593
> 
> 标签：jquery, events, stoppropagation

我在一个带有“元素”类的 div 中有一个锚点。

```
<div class="element logout">
    <div class="subTop">
        <a href="home.jsp" onclick="return confirm('Do you want to logout?');">Log Out</a>
    </div>
</div> 
```

我使用以下代码来处理注销。

```
jQuery(".element").click(function(e){
    var tmpHref=jQuery(this).not('.logout').find(".subTop>a").attr('href');
    if(tmpHref!=undefined&&tmpHref!=""&&tmpHref!=null)
    {
        window.location.href=tmpHref;
    }
    else
    {
        jQuery(this).find(".subTop>a").click();
    }
}); 
```

但我的问题是确认事件一次又一次地触发。我认为这是因为均匀传播。经过研究，我发现我可以`e.stopPropagation()`从[这篇](https://stackoverflow.com/questions/2364629/jquery-stop-child-triggering-parent-event)文章中使用。但我无法弄清楚如何在这里使用它。

**编辑** 消息“您要注销吗？” 在确认框中是从数据库中动态获取的，所以我不能在代码中对其进行硬编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T08:23:49.707

试试这个：

**HTML：**

```
<div class="element logout">
    <div class="subTop">
        <a href="home.jsp" class="testa" >Log Out</a>
    </div>
</div> 
```

**jQuery：**

```
jQuery(".element").click(function(e){
    e.preventDefault();
    if( confirm('Do you want to logout?'))
    {
        //console.log(jQuery(this).parents('.element'));return;
        if(jQuery(this).hasClass('logout'))
        {        
            window.location.href='logout.jsp';
        }
        else
        {
            window.location.href='home.jsp';
        }
    }
}); 
```

测试小提琴：http: [//jsfiddle.net/e52QN/1/](http://jsfiddle.net/e52QN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T09:02:28.013

这是基于我认为你想要的一些假设。从评论和问题中，我了解到如果外部 div 没有注销类，则应该将用户发送到“home.jsp”，如果有，则应该将用户发送到“logout.jsp”。如果这是正确的，您可以将 html 更改为

```
<div class="element logout">
  <div class="subTop">
    <a href="home.jsp" data-confirmmsg="Do you want to logout?" >Log Out</a>
  </div>
</div> 
```

和 JavaScript

```
jQuery(".subTop>a").click(function(e){
  e.preventDefault();
});
jQuery(".element").click(function(e){
    var self = jQuery(this),
        isLogout = self.hasClass('logout')
        anchor = self.find(".subTop>a")
        href = isLogout ? "logout.jsp" : anchor.attr('href');

    if(!isLogout || (isLogout && confirm(anchor.data('confirmmsg'))))
    {
        window.location.href=href;
    }
}); 
```

Javascript 的第一部分只是禁用`a`-tag 作为链接。除了将事件传播到外部元素之外，什么也没有发生（如果点击实际上是在链接上，我们仍然希望让 `div-tag 处理它）。JavaScript 的第二部分首先检查是否存在注销类并相应地设置 href。最后，如果用户被发送到“logout.jsp”，将显示确认框并测试返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T08:09:57.773

尝试

```
onclick="return confirm('Do you want to logout?');window.event.cancelBubble = true;" 
```

**或者**

```
onclick="javascript:event.stopPropagation();return confirm('Do you want to logout?');" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T08:19:53.833

您可以使用：

```
$('.subTop a').on('click', function (e) {
  e.stopPropagation();
}); 
```

不过我同意@ink.robot，你的代码应该结构更好，以避免这种情况。

# ruby-on-rails - Rails 选择表单助手

> ID：15471999
> 
> 赞同：0
> 
> 时间：2013-03-18T07:54:28.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我可能错过了一些非常简单的东西，但希望能在这里得到一点帮助

```
<%= select_tag('filters[order_sales_channel]',filter_params['order_sales_channel'],:multiple=>true,:class=>"advancedSearchFormSelectBox") %> 
```

然后我想给出选择的选项

```
<option value="Web">Web</option>
<option value="Phone">Phone</option> 
```

我怎样才能做到这一点？我试过这个，但它不工作

```
 <%= select_tag('filters[order_sales_channel]',filter_params['order_sales_channel'],:multiple=>true,:class=>"advancedSearchFormSelectBox") %>
 <%= options_for_select([["Web", "Web"], ["Phone", "Phone"]]) %> 
```

后续问题 - ：由于我在多个地方使用 select 选项，我的选项值与打印的字符串相同，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:02:00.937

正确的方法是：

```
<%= select_tag 'filters[order_sales_channel]', 
               options_for_select(
                 [["Web", "Web"], ["Phone", "Phone"]], 
                 selected: filter_params['order_sales_channel'] 
               ),
               multiple: true,
               class: "advancedSearchFormSelectBox" %> 
```

如果您的选项始终相同，只需在相关类中硬编码它们：

```
class Order < ActiveRecord::Base
  SELECT_OPTIONS = %w[Web Phone].map( &:freeze ).freeze
  def self.select_options
    SELECT_OPTIONS.map{|o| [o,o] }
  end
end 
```

然后你可以在你的`options_for_select`：

```
options_for_select Order.select_options 
```

我喜欢这个解决方案，因为您也可以`SELECT_OPTIONS`在验证中使用：

```
 validates :some_attribute, inclusion: SELECT_OPTIONS 
```