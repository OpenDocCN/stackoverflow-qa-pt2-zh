# StackOverflow 问答 16036000-16036999

# android - SQLite 时间戳不一致

> ID：16036001
> 
> 赞同：0
> 
> 时间：2013-04-16T11:36:36.730
> 
> 标签：android, sqlite, android-sqlite

我使用两个时间戳`last_edited`和`last_uploaded`，来判断是否需要将 SQLite 条目上传到我的服务器。但是，即使我在更新这些时间戳时使用 datetime('now') ，时间戳`last_uploaded`也会保存为我的本地时间 (UTC +2)。

关于为什么会这样或如何解决它的任何想法？

我的 SQLite 语句是：

```
private static final String UPDATE_EDITED_TIMESTAMP_BY_ID =
      "UPDATE " + TABLE_ENTRIES + "\n"
    + "SET " + COLUMN_ENTRIES_LAST_EDITED + " = DATETIME('now')\n"
    + "WHERE " + COLUMN_ENTRIES_ID + " = :id;";

private static final String UPDATE_SYNC_INFO_BY_ID =
      "UPDATE " + TABLE_WORK_ENTRIES + "\n"
    + "SET " + COLUMN_ENTRIES_LAST_SYNCED + " = DATETIME('now'), " + COLUMN_ENTRIES_SERVER_ID + " = :server_id\n"
    + "WHERE " + COLUMN_ENTRIES_ID + " = :db_id;"; 
```

当我运行它们时，我使用的代码如下：

```
String sql = UPDATE_EDITED_TIMESTAMP_BY_ID.replace(":id", Integer.toString(id));
db.execSQL(sql); 
```

# jquery - 更改联系表格 7 上选择字段上的下拉箭头

> ID：16036004
> 
> 赞同：0
> 
> 时间：2013-04-16T11:36:44.513
> 
> 标签：jquery, wordpress, css, contact-form

我在尝试在我的 wordpress 插件联系表 7 上实现一些 jquery 时遇到了一些小问题

它是侧边栏中的联系表格 goo.gl/BIWD3

[http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/](http://www.dfc-e.com/metiers/multimedia/opensource/jqtransform/)

我正在尝试设置选择字段的样式并更改下拉箭头以使其变为橙色，但似乎无法管理它。

对此问题的任何指导将不胜感激

# javascript - 鼠标悬停在动画路径上不起作用

> ID：16036018
> 
> 赞同：0
> 
> 时间：2013-04-16T11:37:22.860
> 
> 标签：javascript, path, jquery-animate, raphael

我使用以下代码更改路径`stroke-width`时`mouseover`，但它不起作用......我已经检查了很多关于这个问题的解决方案，他们似乎使用与我相同的解决方案。我`canvas`的是`Raphael("svgContainer", 100, 100);`

```
 function drawPath(i,floorlevel,pointsNum){

  var x1 = floorlevel[i].x;
  var y1 = floorlevel[i].y;
  var x2 = floorlevel[i+1].x;
  var y2 = floorlevel[i+1].y;
  var p = canvas.path("M"+x1 +" "+ y1);
  p.attr("stroke", get_random_color());
  p.attr("stroke-width",4);
  p.attr("id",floorlevel[i].node+floorlevel[i+1].node);

  p.animate({path:"M"+x1 +" "+ y1+ " L" + x2 +" "+ y2}, 1000);

  var set = canvas.set();

  var hoverIn = function() {
      this.attr({"stroke-width": 10});
  };

  var hoverOut = function() {
      this.attr({"stroke-width": 10});    
  }

  p.hover(hoverIn, hoverOut, p, p);
  set.push(p);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:01:09.550

当我为传递给函数的参数添加虚拟值时，它似乎工作正常：

[http://jsfiddle.net/hKCDg/](http://jsfiddle.net/hKCDg/)

我注意到你有相同`stroke-width`的`hoverIn`and `hoverOut`，这违背了目的。

```
 var hoverIn = function() {
      this.attr({"stroke-width": 10});
  };

  var hoverOut = function() {
      this.attr({"stroke-width": 10});    
  }; 
```

`5`我在这里的演示中将后者更改为视觉效果。

您传递给函数的值可能有错误？

# postgresql - pgbouncer 无法连接到本地 postgresql 数据库（超时）

> ID：16036019
> 
> 赞同：1
> 
> 时间：2013-04-16T11:37:23.253
> 
> 标签：postgresql, pgbouncer

我试图让 pgbouncer 在我的独立 postgresql 服务器上工作，但是当我尝试使用 pgbouncer 端口连接到数据库时，出现超时错误。

PostgreSQL：9.1.8

pgBouncer：1.4.2

操作系统：Ubuntu 12.04.2 LTS (GNU/Linux 3.8.4-x86_64-linode31 x86_64)

这是我的conf文件：

```
[databases]
postgres = host=127.0.0.1 port=5432 dbname=postgres
mydb = host=127.0.0.1 port=5432 dbname=mydb

[pgbouncer]
logfile = /home/username/pg_log/pgbouncer.log
pidfile = /tmp/pgbouncer.pid
listen_addr = xxx.xxx.xxx.xxx
listen_port = 6432
unix_socket_dir = /var/run/postgresql
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt
admin_users = postgres
stats_users = stats, root
user = postgres
pool_mode = session
server_reset_query = DISCARD ALL
max_client_conn = 1000
default_pool_size = 20
log_connections = 1
log_disconnections = 1
log_pooler_errors = 1 
```

我试图像这样测试连接：

```
psql -p 6432 -U postgres mydb 
```

这是我的日志文件：

```
28396 LOG listening on xxx.xxx.xxx.xxx:6432
28396 LOG listening on unix:/var/run/postgresql/.s.PGSQL.6432
28396 LOG process up: pgbouncer 1.4.2, libevent 2.0.16-stable (epoll), adns: evdns2
28864 LOG C-0x23f7890: mydb/postgres@unix:6432 login attempt: db=mydb user=postgres
28864 LOG C-0x23f7890: mydb/postgres@unix:6432 closing because: client unexpected eof (age=0)
28864 LOG C-0x23f7890: mydb/postgres@unix:6432 login attempt: db=mydb user=postgres
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 new connection to server
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 closing because: connect failed (age=0)
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 new connection to server
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 closing because: connect failed (age=0)
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 new connection to server
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 closing because: connect failed (age=0)
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 new connection to server
28864 LOG S-0x2415240: mydb/postgres@127.0.0.1:5432 closing because: connect failed (age=0)
28864 LOG Stats: 0 req/s, in 0 b/s, out 0 b/s,query 0 us
28864 LOG C-0x23f7890: mydb/postgres@unix:6432 closing because: client_login_timeout (server down) (age=60)
28864 WARNING C-0x23f7890: mydb/postgres@unix:6432 Pooler Error: client_login_timeout (server down)
28864 LOG Stats: 0 req/s, in 0 b/s, out 0 b/s,query 0 us
28864 LOG Stats: 0 req/s, in 0 b/s, out 0 b/s,query 0 us 
```

为了使 pgbouncer 工作，我还需要改变什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:25:59.593

改变

```
listen_addresses = 'private_ip' 
```

到

```
listen_addresses = '*' 
```

在`postgresql.conf`文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:18:29.247

看起来您正在尝试使用 Unix 套接字进行连接。根据您的 Postgres 安装，套接字可能是在 /tmp 而不是 /var/run/postgres 中创建的。我遇到了同样的问题，[这里已经讨论过了](http://www.postgresql.org/message-id/21044.1326496507@sss.pgh.pa.us)。

尝试将 pgbouncer.ini 配置更改为：

```
unix_socket_dir = /tmp 
```

您也可以尝试通过添加 -h 来连接到 localhost，如下所示：

```
 psql -p 6432 -h localhost -U postgres mydb 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-07T18:09:33.720

对我来说，问题似乎出在我在`[databases]`配置文件部分定义数据库时；我无法使用`host=127.0.0.1`or `host=localhost`，但我必须使用实际 IP，`host=192.168.0.1`. 这可能是由于 postgresql`pg_hba.conf`文件配置错误，但我找不到使其与本地 IP 一起使用的方法。

# c#-4.0 - 如何防止 Solr 添加页眉和页脚？

> ID：16036020
> 
> 赞同：0
> 
> 时间：2013-04-16T11:37:25.520
> 
> 标签：c#-4.0, solr, web-crawler

我有一个抓取网站内容的网络爬虫（[Ncrawler](http://ncrawler.codeplex.com/)），并且我添加了代码以将数据索引到 solr。我的要求是避免将网站的页眉、页脚和导航窗格添加到 solr 进行索引。

有没有办法做到这一点？任何帮助将不胜感激。

谢谢， 阿努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:27:49.343

您可以利用在`HtmlDocumentProcessor`构造函数上具有 filterTextRules 参数的类。此参数需要作为`Dictionary<string,string>`用于过滤标记的开始和结束字符串传递。

例如，假设您的 html 页面中有页眉和页脚，它们在 html 中的结构如下：

```
 <!-- Begin Header -->
 all header markup is here
 <!-- End Header -->

 <!-- Begin Footer -->
 all footer markup is here
 <!-- End Footer --> 
```

在这种情况下，您可以在管道中初始化 HtmlDocumentProcessor，如下所示：

```
 var pipelines = new IPipelineStep[]
               {
                  new HtmlDocumentProcessor(
                        new Dictionary<string, string>
                            {
                               {"<!--Begin Header", "<!--End Header"},
                               {"<!--Begin Footer", "<!--End Footer"},
                            }, 
                            null), 
                         new PdfIFilterProcessor(), 
                         new TextDocumentProcessor(), 
                };

    using (var crawler = new NCrawler.Crawler(new Uri("http://ncrawler.codeplex.com"),
             pipelines))
    {
          //Processing here
    } 
```

希望这会有所帮助。有关 filterTextRules 参数及其工作原理的更多详细信息，请参阅[HtmlDocumentProcessor 源代码](http://ncrawler.codeplex.com/SourceControl/changeset/view/79962#758237)。

# maven - Maven部署和依赖版本

> ID：16036021
> 
> 赞同：0
> 
> 时间：2013-04-16T11:37:29.823
> 
> 标签：maven

当我在子 pom 中的依赖项版本被定义为父 pom 中的属性的项目上运行 mvn deploy 时，版本号不会在已部署的工件中扩展。

在这个例子中 ${spring.version} 没有展开。我可以让 Maven 扩展版本属性吗？

**父pom：**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>TestProject</groupId>
<artifactId>TestProject</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>pom</packaging>

<modules>
    <module>test</module>
</modules>

<properties>
    <spring.version>3.2.2.RELEASE</spring.version>
</properties>

<distributionManagement>
    <snapshotRepository>
        <id>dips_snapshot</id>
        <url>http://mavenrepo.dips.local/repository/dips_snapshot</url>
    </snapshotRepository>
</distributionManagement>
</project> 
```

**儿童绒球：**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0     http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>TestProject</groupId>
<artifactId>subproject</artifactId>
<version>1.0-SNAPSHOT</version>

<parent>
    <groupId>TestProject</groupId>
    <artifactId>TestProject</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent>

<dependencies>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${spring.version}</version>
    </dependency>
</dependencies> 
```

**部署的pom：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>TestProject</groupId>
<artifactId>subproject</artifactId>
<version>1.0-SNAPSHOT</version>
<parent>
<groupId>TestProject</groupId>
<artifactId>TestProject</artifactId>
<version>1.0-SNAPSHOT</version>
</parent>
<dependencies>
<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-beans</artifactId>
<version>${spring.version}</version>
</dependency>
</dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:51:53.083

看来您需要在本地安装（甚至部署）父 pom。为此，您可以简单地运行：

```
mvn clean install -N 
```

在您的父项目目录中。该`-N`选项不是强制性的，它只会停止递归（所以它会非常快，因为只有你的父 pom 会安装）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:01:38.520

我更喜欢不同的项目组织，其中父母身份和聚合是分开的。我使用一个聚合器项目，其中包含我的普通项目作为模块和一个父项目，它也是我的聚合器项目的一个模块。这个父项目在所有普通项目和聚合器之间共享。我的父项目和普通项目存储在聚合器项目目录的子目录中，并且`relativePath`每个`parent`元素的 都进行了相应设置。

只要您从聚合器项目目录执行构建，该组织就可以更好地分离关注点并确保正确处理项目间的依赖关系。

# visual-c++ - 从 CString 引用中获取 CString？

> ID：16036023
> 
> 赞同：-2
> 
> 时间：2013-04-16T11:37:34.047
> 
> 标签：visual-c++, mfc, smart-device

这是我的代码

```
CInternetSession session(L"My Session");
CHttpConnection *pHttpCon ;
CHttpFile *filedat = NULL;
pHttpCon = session.GetHttpConnection((LPCTSTR)Url_server, (INTERNET_PORT)1040, (LPCTSTR)username, (LPCTSTR)password);
    filedat = pHttpCon->OpenRequest(CHttpConnection::HTTP_VERB_GET, "");
    filedat->SendRequest();
CString line;
while(filedat->ReadString(line)) {
      printf("Line : %s ",(LPCTSTR)line);
      printf("\n Line Length : %d ",line.GetLength());
} 
```

问题是字符串读取是“file1.name=201304”，长度是 9 它应该是 17 或更多。有大佬能告诉我是什么问题吗？？？

```
 String Read                                  Showing Length
 "file1.size=16"                                     7                        
 "file1.time=2013/02/28 Thu 10:36:32"                17
 "file1.name=201304"                                 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:17:55.247

Does the following work:

```
while(filedat->ReadString(line)) 
{
/* Original code
  printf("Line : %s ",(LPCTSTR)line);
  printf("\n Line Length : %d ",line.GetLength());
*/
  _tprintf(L"%s\n", (LPCTSTR)line);
  _tprintf(L"Line Length: %d\n\n", line.GetLength());
} 
```

# excel - excel公式有助于拆分复杂名称

> ID：16036027
> 
> 赞同：1
> 
> 时间：2013-04-16T11:37:46.773
> 
> 标签：excel, excel-formula, tokenize, string-split

我的任务是进行一些字符串操作，今天一定是我糟糕的一天，因为事实证明它比我预期的要困难。

我必须从第一列、第二列和第三列以及任何姓氏中取第一个、第二个和第三个名字的首字母

另外，我们需要保留标题。

这是现在的长名称示例：

> C Chrysostomou 先生和 N Chrysostomou 先生和 A Chrysostomou 夫人
> 
> M Karseras 夫人和 P Hadjisoteriou 女士和 E Athanasiou 夫人
> 
> A Theodorou 夫人 & A Aristotelou 先生 & G Naziri 夫人 & M Karmiou L Vazanias 夫人 & G 夫人
> 
> Braithwaite 和 Helen West 夫人 L Vazanias 夫人和 G 夫人 Braithwaite 和夫人
> 
> 海伦·韦斯特 Olympia Pieridou 夫人和 T 夫人和 M 先生、C 先生和 K 夫人
> 
> Michaelides JA Santamas 小姐和 MT Santama 夫人- Solomonides 和 Lida 夫人
> 
> Santama JA Santamas 小姐和 MT Santama 夫人- Solomonides 和 Lida 夫人
> 
> Santama Polydoros Polydorou 先生和 Maro Themistocleous 夫人和 Sylvia 夫人
> 
> Polydorou Themis 先生和 Androulla 夫人和 Nicholas 先生和 Vasso Gina 夫人
> 
> Demetriou SK Makkofaides 夫人和 Z Koullas 先生和 Y Koullas 夫人和 R 夫人
> 
> Kleopa G Zorzy 先生和 H Louca Zorzy 夫人和 S Stavropoulos 先生和 Y 夫人
> 
> Stavropoulos Mrs M Franceschina & Ms C Eugeniou & Ms OL Toumazides
> 
> T/a The Three Cupcakes Mr David & Mrs Eileen Nixon Dhnixon & Co. - Office Account

如您所见，这些可以被认为是 2 人甚至 3 人之间的联名银行账户。我们必须保留姓名，可能是**先生、小姐、女士、博士、医生**或 **先生**，以及名字和姓氏的首字母以及全姓，总数应少于 35 个字符！

所以，这是我在网上搜索后一直在尝试的：

`=IF(LEN(TRIM(E:E))-LEN(SUBSTITUTE(TRIM(E:E)," ",""))>=1,MID(TRIM(E:E),FIND(" ",TRIM(E:E))+1,1),"")& " " &IF(LEN(TRIM(E:E))-LEN(SUBSTITUTE(TRIM(E:E)," ",""))>=2,MID(SUBSTITUTE(TRIM(E:E)," ","",1),FIND(" ",SUBSTITUTE(TRIM(E:E)," ","",1))+1,1),"")`

得到首字母，但只有前两个

`=RIGHT(J:J,LEN(J:J)-FIND(" ",J:J)+1)`

获取姓氏，但无法正常工作。

我是在想这个，还是在想它？

我处理数据的最佳方法是什么？

谢谢菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:16:50.677

这应该让你开始。

假设您的数据看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/aDtiu.png)

将此代码粘贴到模块中。（注意：此代码未经广泛测试，但传达了信息）

```
Option Explicit

Sub Sample()
    Dim MyAr As Variant
    Dim FinalAr() As String, TmpAr() As String
    Dim ws As Worksheet
    Dim lrow As Long, i As Long, n As Long, j As Long

    '~~> Set this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> get last row of col A
        lrow = .Range("A" & .Rows.Count).End(xlUp).Row

        '~~> Store the values in an array
        MyAr = .Range("A1:A" & lrow)

        '~~> Loop through the array and split it on "&" and store it in another array
        For i = LBound(MyAr) To UBound(MyAr)
            If InStr(1, MyAr(i, 1), "&") Then
                TmpAr = Split(MyAr(i, 1), "&")

                For j = LBound(TmpAr) To UBound(TmpAr)
                    n = n + 1
                    ReDim Preserve FinalAr(n)
                    FinalAr(n) = Trim(TmpAr(j))
                Next j
            Else
                n = n + 1
                ReDim Preserve FinalAr(n)
                FinalAr(n) = Trim(MyAr(i, 1))
            End If
        Next i

        '~~> Past the outcome in Col B
        .Range("B1").Resize(UBound(FinalAr) + 1, 1).Value = Application.Transpose(FinalAr)

        '~~> Replace all mrs/mr etc
        .Columns(2).Replace What:="MRS", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

        .Columns(2).Replace What:="MR", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

        .Columns(2).Replace What:="MISS", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False

        '~~> Find Last Row of Col B
        lrow = .Range("B" & .Rows.Count).End(xlUp).Row

        '~~> Loop through col B and split the names
        For i = 2 To lrow
            If InStr(1, .Range("B" & i), " ") Then
                TmpAr = Split(Trim(.Range("B" & i)), " ")

                n = 1

                For j = LBound(TmpAr) To UBound(TmpAr)
                    .Range("B" & i).Offset(, n).Value = TmpAr(j)
                    n = n + 1
                Next
            Else
                .Range("C" & i).Value = .Range("B" & i).Value
            End If
        Next i
    End With
End Sub 
```

**结果（截图）**

![在此处输入图像描述](https://i.stack.imgur.com/IjZK6.png)

# wpf - 基于 WPF 中选定的 ListBoxItem 隐藏/显示 DataGrid

> ID：16036028
> 
> 赞同：0
> 
> 时间：2013-04-16T11:37:48.030
> 
> 标签：wpf, datagrid, listbox

我有一个`ListBox`：

```
<ListBox Name="ListB" SelectedIndex="0" ItemsSource="{Binding Account}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock FontSize="16" Grid.Column="0" Grid.RowSpan="3"> 
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}{0} {1}" >
                            <Binding Path="AccountNumber" />
                            <Binding Path="Name" />
                        </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

基于`AccountNumber`我想要`Show/Hide` `DataGrid's`绑定到 ListBoxItems：

```
<!--DataGrid 1-->       
    <DataGrid ItemsSource="{Binding ElementName=ListB, Path=SelectedItem}">
..................
</DataGrid>

 <!--DataGrid 2-->      
    <DataGrid ItemsSource="{Binding ElementName=ListB, Path=SelectedItem}">
..................
</DataGrid> 
```

WPF中有if/else吗？例如

```
if SelectedItem in ListBox has an AccountNumber 100 
      than show DataGrid 1 and hide DataGrid 2
else hide DataGrid 1 and show DataGrid 2. 
```

预先感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:55:37.557

不幸的是，WPF 没有 if/then/else 结构。您必须建立一个工作区或使用框架，这可以解决您的问题。一种可能的解决方案是使用 blend sdk 的交互触发框架：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions" 
```

您提到的行为将按如下方式实现：

```
<i:Interaction.Triggers>
   <!-- One Trigger for equal 100 -->
   <ei:DataTrigger Binding="{Binding Path=SelectedItem.AccountNumber,
                                     ElementName=ListB}"
                   Value="100">
      <ei:ChangePropertyAction TargetName="DataGrid1" 
                               PropertyName="Visibility" 
                               Value="Collapsed" />
      <ei:ChangePropertyAction TargetName="DataGrid2" 
                               PropertyName="Visibility" 
                               Value="Visible" />

   </ei:DataTrigger> 

   <!-- One Trigger for not equal 100 -->
   <ei:DataTrigger Binding="{Binding Path=SelectedItem.AccountNumber,
                                     ElementName=ListB}"
                   Comparison="NotEqual"
                   Value="100">
      <ei:ChangePropertyAction TargetName="DataGrid1" 
                               PropertyName="Visibility" 
                               Value="Visible" />
      <ei:ChangePropertyAction TargetName="DataGrid2" 
                               PropertyName="Visibility" 
                               Value="Collapsed" />

   </ei:DataTrigger> 

</i:Interaction.Triggers> 
```

您需要将**System.Windows.Interactivity.dll**包含到您的项目引用中。还需要**Microsoft.Expression.Interactions.dll**

另一种解决方案是将 DataGrids 的可见性直接绑定到 SelectedItem.AccountNumber 并附加和 IValueConverter，后者根据逻辑提取可见性。

使用 ListBox 的 SelectionChanged 事件也可以，但变得非常不可读并且可能是多余的。如果您遵循 MVVM 方法，那么您后面的代码应该几乎是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:13:52.503

如果您使用的是 MVVM 框架，这将很简单。

[如本例所示](https://stackoverflow.com/questions/7000819/binding-a-button-visibility-to-bool-value-in-viewmodel)，将 BooleanToVisibility 转换器添加到您的视图中，使用布尔属性来控制 ViewModel 中每个网格的可见性，只要 ListBox.SelectedItem 更改，这些网格就会更新。

# ios - iphone sdk +如何在字典值数组中检索字典

> ID：16036035
> 
> 赞同：0
> 
> 时间：2013-04-16T11:38:14.843
> 
> 标签：ios, nsmutablearray, nsmutabledictionary

我想检索 KpiName 键（KpiData 是 kpiName 中的数组是字典键）和下面提到的我的数据结构

```
--Array of dictionaries inside array of dictinary
ex..listOfProjectsArray--(
        {
        alertSeverity = 1;
        customerName = TPMG;
        endDate = "05-05-2013";
        isProjectHide = 1;
        kpiData =         (
                        {
                KpiName = "Change Request ";
                kpiActual = 14;
                kpiPlanned = "";
                kpiUnit = "";
            },
                        {
                KpiName = "Aged Debit";
                kpiActual = 24000;
                kpiPlanned = "";
                kpiUnit = EUR;
            },
        );
        lastInvoiceDate = "05-04-2013";
        nextBillingDate = "05-04-2013";
        nextMilestoneDate = "10-04-2013";
        nextReviewDate = "08-04-2013";
        plannedCompletionDate = "04-05-2013";
        projectID = 3000;
        projectName = "Rain Harvesting";
        projectSortType = "";
        projectStatus = 1;
        startDate = "01-01-2013";
    }, 
```

我试过这个，但它返回 null

```
 NSString *kpiName = [[[[listOfProjectsArray objectAtIndex:indexPath.row] valueForKey:@"kpiData"] objectAtIndex:0]valueForKey:@"kpiName"];
       NSLog(@"kpiname:%@", kpiName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:25:34.530

我被提到错误的字典键

```
NSString *kpiName = [[[[listOfProjectsArray objectAtIndex:indexPath.row] valueForKey:@"kpiData"] objectAtIndex:0]valueForKey:@"kpiName"];
       NSLog(@"kpiname:%@", kpiName); 
```

正确的是`KpiName`key 而不是`kpiName`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:01:55.433

尝试这个

```
 NSString *kpiName =[[[[listOfProjectsArray objectAtIndex:indexPath.row] objectForKey:@"kpiData"]objectAtIndex:0]objectForKey:@"KpiName"]; 
```

# oauth - 此场景的单点登录解决方案

> ID：16036036
> 
> 赞同：0
> 
> 时间：2013-04-16T11:38:15.587
> 
> 标签：oauth, openid, single-sign-on, saml

我正在尝试在两个合作网站 A 和 B 之间建立一个非常简单的 SSO。场景如下：

假设我访问了网站 A 并使用普通的用户名/密码组合进行了身份验证。我收到某种类型的令牌来标识我的会话。然后我导航到网站 B 并自动想要登录。理想情况下，我希望我的会话首选项从 A 转移到 B。

我想知道：

1.  令牌格式有标准吗？
2.  是否有在 Web 会话中存储令牌的标准？（Cookie 或其他）
3.  是否有将令牌发送到网站 B 的标准？（参数名称、URL、方法？）
4.  假设 B 信任 A，网站 A 是否有标准联系网站 B 以验证令牌是否有效？如果我也能在此步骤中收到一些与用户和会话相关的元数据（用户名、电子邮件、会话中设置的首选项），那就太好了

我简要地研究了 OAuth 1&2、OpenID、SAML 和 Mozilla Persona。他们似乎都涵盖了类似的场景，但我无法确定他们是否会支持这种场景以及支持的程度。任何指导表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:26:45.417

这些网站是 ASP.NET 吗？

要进行 SSO，您需要某种 STS，例如 ADFS v2.0。

如果站点是 ASP.NET，那么 ADFS 和 WIF 将提供您需要的解决方案。

联合/SSO 的两个标准是 SAML 和 WS-Federation。

SAML 1.0 令牌格式是令牌使用最广泛的一种格式。

这里有一个很好的描述：[A Guide to Claims-Based Identity and Access Control (2nd Edition)](http://msdn.microsoft.com/en-us/library/ff423674.aspx)

# svg - 蜡染/犀牛 JavaScript 支持？

> ID：16036038
> 
> 赞同：3
> 
> 时间：2013-04-16T11:38:21.857
> 
> 标签：svg, rhino, batik

只是想在浪费太多时间之前对此进行一次完整性检查 - Batik 在其 SVG 显示和光栅化器中是否真的有可用的 JavaScript 支持？

问题：我有生成 SVG 文件的代码，使用了几千行相当复杂的 JavaScript。这适用于 Firefox、Chrome、Opera、Safari 和 IE9。我花了一个上午试图让 Batik 显示一个示例 SVG 文件（在 Squiggle 中）并将其光栅化为 png/pdf/等。我已经解决了一个问题（我必须将一个文本节点移动到 DOM 中才能`splitText`开始工作），下一个问题只有几行（`nodeValue.trim()`在文本节点上不起作用）。

即将放弃并忽略蜡染（v1.7，昨天下载），除非有人对此有一些积极的经验？

# javascript - HTML 按钮可以执行 POST 请求吗？

> ID：16036041
> 
> 赞同：102
> 
> 时间：2013-04-16T11:38:28.337
> 
> 标签：javascript, html, post, button, submit

我想要一个提交类型按钮来发送 POST 请求。

我正在考虑这样的事情：

```
<form action = "" method = "post">
    <button>Upvote</button>
<form> 
```

其中字符串“Upvote”将作为 POST 请求中的名称发送。

我知道这不起作用，而且我知道有一些方法可以使用 AJAX(javascript)，但我对这个领域还很陌生。我只是想知道这是否可能。

**更新**

有人建议使用`<input>`标签，我试了一下。问题是它生成的是 GET 而不是 POST。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-16T11:56:12.837

您需要给按钮一个名称和一个值。

没有名称就不能提交任何控件，并且按钮元素的内容是标签，而不是值。

```
<form action="" method="post">
    <button name="foo" value="upvote">Upvote</button>
</form> 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-16T11:43:02.820

这可以通过“提交”类型的输入元素来完成。这将作为一个按钮向用户显示，单击该按钮将发送表单。

```
<form action="" method="post">
    <input type="submit" name="upvote" value="Upvote" />
</form> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-01-07T12:16:48.483

你可以在 JS 的帮助下做到这一点。在下面的示例中，使用 fetch 方法在单击按钮时提交 POST 请求：

```
const button = document.getElementById('post-btn');

button.addEventListener('click', async _ => {
  try {     
    const response = await fetch('yourUrl', {
      method: 'post',
      body: {
        // Your body
      }
    });
    console.log('Completed!', response);
  } catch(err) {
    console.error(`Error: ${err}`);
  }
});
```

```
<button id="post-btn">I'm a button</button>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-16T11:43:49.840

你可以：

*   或者，使用`<input type="submit" ..>`, 而不是那个按钮。
*   或者，使用一些 javascript 来获取表单对象（使用名称或 id），然后调用`submit(..)`它。例如：`form.submit()`。将此代码附加到按钮单击事件。这将序列化表单参数并执行表单方法属性中指定的 GET 或 POST 请求。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-08-26T09:58:50.267

只需这样做：

```
<form action="" method="post" id="myForm">
    <button type="submit" class="btn btn-sm btn-info" name="something"><i class="fa fa-check"></i>Submit</button>
</form> 
```

或者如果出于美学原因您希望在表单之外使用按钮，请执行以下操作：

```
<button type="submit" form="myForm" class="btn btn-sm btn-info" name="something"><i class="fa fa-check"></i>Submit</button> 
```

当我的表单太长并且我希望在页面的开头和结尾都有一个提交按钮时，我通常会使用它。

# anchor - JavaFX 锚不会扩展到整个场景

> ID：16036044
> 
> 赞同：2
> 
> 时间：2013-04-16T11:38:33.770
> 
> 标签：anchor, javafx, polygon, stackpanel

我有这个代码：

```
package javafxapplication9;

import javafx.application.Application;
import javafx.beans.property.*;
import javafx.beans.value.*;
import javafx.collections.*;
import javafx.event.EventHandler;
import javafx.scene.*;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.stage.Stage;

public class JavaFXApplication9 extends Application {
StackPane pane;
public static void main(String[] args) throws Exception { launch(args); }

@Override public void start(final Stage stage) throws Exception {
Polygon triangle = createStartingTriangle();
 pane=new StackPane();

Group root = new Group();
root.getChildren().add(triangle);
root.getChildren().addAll(createControlAnchorsFor(triangle.getPoints()));
pane.getChildren().add(root);
pane.setPrefWidth(600);
pane.setPrefHeight(600);
stage.setTitle("Triangle Manipulation Sample");
stage.setScene(
  new Scene(
    pane,
    400, 400, Color.ALICEBLUE
  )
);
stage.show();
}

// creates a triangle.
private Polygon createStartingTriangle() {
Polygon triangle = new Polygon();

triangle.getPoints().setAll(
  100d, 100d,
  150d, 50d,
  250d, 150d
);

triangle.setStroke(Color.FORESTGREEN);
triangle.setStrokeWidth(4);
triangle.setStrokeLineCap(StrokeLineCap.ROUND);
triangle.setFill(Color.CORNSILK.deriveColor(0, 1.2, 1, 0.6));

return triangle;
}

private ObservableList<Anchor> createControlAnchorsFor(final ObservableList<Double>  points) {
ObservableList<Anchor> anchors = FXCollections.observableArrayList();

for (int i = 0; i < points.size(); i+=2) {
  final int idx = i;

  DoubleProperty xProperty = new SimpleDoubleProperty(points.get(i));
  DoubleProperty yProperty = new SimpleDoubleProperty(points.get(i + 1));

  xProperty.addListener(new ChangeListener<Number>() {
    @Override public void changed(ObservableValue<? extends Number> ov, Number oldX, Number x) {
      points.set(idx, (double) x);
    }
  });

  yProperty.addListener(new ChangeListener<Number>() {
    @Override public void changed(ObservableValue<? extends Number> ov, Number oldY, Number y) {
      points.set(idx + 1, (double) y);
    }
  });
  Anchor an=new Anchor(Color.GOLD, xProperty, yProperty,pane);
  anchors.add(an);
}

return anchors; 
```

}

```
 class Anchor extends Circle { 
 Anchor(Color color, DoubleProperty x, DoubleProperty y,StackPane pane) {
  super(x.get(), y.get(), 10);
  setFill(color.deriveColor(1, 1, 1, 0.5));
  setStroke(color);
  setStrokeWidth(2);
  setStrokeType(StrokeType.OUTSIDE);

  x.bind(centerXProperty());
  y.bind(centerYProperty());
  enableDrag();
}

// make a node movable by dragging it around with the mouse.
private void enableDrag() {
  final Delta dragDelta = new Delta();
  setOnMousePressed(new EventHandler<MouseEvent>() {
    @Override public void handle(MouseEvent mouseEvent) {
      // record a delta distance for the drag and drop operation.
      dragDelta.x = getCenterX() - mouseEvent.getX();
      dragDelta.y = getCenterY() - mouseEvent.getY();
      pane.setCursor(Cursor.MOVE);
    }
  });
  setOnMouseReleased(new EventHandler<MouseEvent>() {
    @Override public void handle(MouseEvent mouseEvent) {
      pane.setCursor(Cursor.HAND);
    }
  });
  setOnMouseDragged(new EventHandler<MouseEvent>() {
    @Override public void handle(MouseEvent mouseEvent) {
      double newX = mouseEvent.getX() + dragDelta.x;
      if (newX > 0 && newX < pane.getWidth()) {
        setCenterX(newX);
      }  
      double newY = mouseEvent.getY() + dragDelta.y;
      if (newY > 0 && newY < pane.getHeight()) {
        setCenterY(newY);
      }  
    }
  });
  setOnMouseEntered(new EventHandler<MouseEvent>() {
    @Override public void handle(MouseEvent mouseEvent) {
      if (!mouseEvent.isPrimaryButtonDown()) {
        pane.setCursor(Cursor.HAND);
      }
    }
  });
  setOnMouseExited(new EventHandler<MouseEvent>() {
    @Override public void handle(MouseEvent mouseEvent) {
      if (!mouseEvent.isPrimaryButtonDown()) {
        pane.setCursor(Cursor.DEFAULT);
      }
    }
  });
}

// records relative x and y co-ordinates.
private class Delta { double x, y; }
 }  
} 
```

问题是我无法将三角形的边缘一直移动到场景的顶部。如果我不使用 stackPane，只有一个场景它工作得很好，但我需要 Stack Pane，因为接下来我要做的是将三角形保存为图像并将图像用作背景。每次我都会保存一个新三角形，它的图像将与其他图像重叠。欢迎提出任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:04:47.817

起初我想说的是 NICE PROGRAM ;-)
现在对于你的问题，这个问题很容易解决。;-)
只需使用 AnchorPane 而不是组。

这是代码：

```
@Override
public void start(final Stage stage) throws Exception {
    Polygon triangle = createStartingTriangle();
    pane = new StackPane();

    //Use an AnchorPane instead of a Group ;)
    AnchorPane ap = new AnchorPane();
    ap.getChildren().add(triangle);
    ap.getChildren().addAll(createControlAnchorsFor(triangle.getPoints()));
    pane.getChildren().add(ap);
    pane.setPrefWidth(600);
    pane.setPrefHeight(600);
    stage.setTitle("Triangle Manipulation Sample");
    stage.setScene(
            new Scene(
            pane,
            400, 400, Color.ALICEBLUE));
    stage.show();
} 
```

# javascript - 如何在单击一个 li 元素时将其添加到另一个容器并且 li 的其余部分保持固定

> ID：16036052
> 
> 赞同：1
> 
> 时间：2013-04-16T11:38:54.877
> 
> 标签：javascript, jquery

我有一个小问题：

我有这个清单：

```
<ul id="nextlevel">
<li class="listadetalii"><a style="width:100%;color:red;font-weight:600;cursor:pointer" rel="03.Accessories" data-folder="01.Hi tech (028_003)" data-titlu="Hi tech" id="01.Cosuri si cuiere" class="red-gros singlelink folder">Hi tech<p style="width:100%;color:#828282;font-size:70%" class="muted">Luni, 18 Mar 2013 16:07:14</p></a>

    <ul class="detalii-produs hide">
        <li class="togo">Image 1</li>
        <li class="detalii-produs-lista dropdown-submenu"><a href="#" style="float:right;margin-right:15px;width:100%;font-size:12px;" class="pull-right">Fișă produs</a>

        </li>
        <li class="detalii-produs-lista dropdown-submenu"><a href="#" style="float:right;margin-right:15px;width:100%;font-size:12px;" class="pull-right">Listă prețuri</a>

        </li>
    </ul>
</li>
<li class="listadetalii"><a style="width:100%;color:red;font-weight:600;cursor:pointer" rel="03.Accessories" data-folder="02.Net (028_002)" data-titlu="Net" id="01.Cosuri si cuiere" class="red-gros singlelink folder">Net<p style="width:100%;color:#828282;font-size:70%" class="muted">Marti, 16 Apr 2013 09:53:43</p></a>

    <ul class="detalii-produs hide">
        <li class="togo">Image 2</li>
        <li class="detalii-produs-lista dropdown-submenu"><a href="" style="float:right;margin-right:15px;width:100%;font-size:12px;" class="pull-right">Fișă produs</a>

        </li>
        <li class="detalii-produs-lista dropdown-submenu"><a href="" style="float:right;margin-right:15px;width:100%;font-size:12px;" class="pull-right">Listă prețuri</a>

        </li>
    </ul>
</li>
<li class="listadetalii "><a style="width: 100%; color: red; font-weight: 600; cursor: pointer; outline: medium none;" rel="03.Accessories" data-folder="03.)" data-titlu="Cuiere" id="01.Cosuri si cuiere" class="red-gros singlelink folder">Cuiere<p style="width:100%;color:#828282;font-size:70%" class="muted">Luni, 18 Mar 2013 10:53:47</p></a>

    <ul class="detalii-produs hide" style="display: none;">
        <li class="togo">Image 3</li>
        <li class="detalii-produs-lista dropdown-submenu"><a href="" style="float:right;margin-right:15px;width:100%;font-size:12px;" class="pull-right">Fișă produs</a>

        </li>
        <li class="detalii-produs-lista dropdown-submenu"><a href="" style="float:right;margin-right:15px;width:100%;font-size:12px;" class="pull-right">Listă prețuri</a>

        </li>
    </ul>
</li> 
```

此列表已折叠。当我点击**“高科技”**时，下一个列表被展开并且内容可见。我希望 li 元素类的内容继续放在 div alfa 上并隐藏 li，其余的 li-s 保留在此列表中。

其他元素 Net、Cuiere 的行为相同......

```
<div id="alfa">here must be Image (n)</div> 
```

小提琴上更详细的代码[http://jsfiddle.net/gxg1974/Jy3EK/](http://jsfiddle.net/gxg1974/Jy3EK/)

谢谢大家的提示和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:50:48.600

据我了解，您希望 的内容`togo`在`div#alfa`. 所以这里是如何做到这一点..

```
$('ul#nextlevel a.singlelink').on("click", function () {
    $(this).css('outline', 'none');
    if ($(this).parent().hasClass('current')) {

        $(this).siblings('ul').slideUp('slow', function () {
            $(this).parent().removeClass('current');
        });
    } else {
        var img = $(this).siblings('ul').children("li.togo").hide()
        .html();
        console.log(img);

        $("#alfa").html(img);
        $('ul#nextlevel li.current ul').slideUp('slow', function () {
            $(this).parent().removeClass('current');
        });
        $(this).siblings('ul').slideToggle('slow', function () {
            $(this).parent().toggleClass('current');
        });

    }
    return false;
}); 
```

[演示小提琴](http://jsfiddle.net/WTwXq/3/)

**更新**

我已经使用`.on`而不是 live as `.live()`is deprecated。

如果还有更多，请告诉我。

# perl - 从文件中读取数据并创建文件并写入数据是找不到文件

> ID：16036056
> 
> 赞同：0
> 
> 时间：2013-04-16T11:39:00.343
> 
> 标签：perl, file

我遇到了一种情况，我需要从名为 login.txt（在当前目录中）的文件中读取 2 行数据（用户名和密码）。读取后，用户名（第一行）必须存储在 $user 中，第二行（密码）必须存储在 $pass 中。

如果找不到该文件，我必须提示用户输入用户名和密码并将其存储在 $user 和 $pass 并创建文件 login.txt（在当前目录中）并将这两行写入文件.

```
my $user;
my $pass;

my $login = "login.txt";

unless (-e $login) {
print "Entering first time execution mode....!\n";
sleep(2);

print "Enter username:\n";
$user = <STDIN>;
chomp($user);
print "Enter password:\n";
$pass = <STDIN>;
chomp($pass);
unless(open LINFO, '>'.$login) {
# Die with error message 
# if we can't open it.
die "\nUnable to create $login\n";
}

print LINFO "$user\n";
print LINFO "$pass\n";

close LINFO;
} 

if (-e $login) {

open (LINFO, '$login') or die "Cant open\n";

while( my $line = <LINFO>)  {   
print $line; 
chomp($line); 

if    ($. == 1) { $user = $line; }

elsif ($. == 2) { $pass = $line; }

last if $. == 2;

}

close LINFO;

}

print $pass;
print $user; 
```

当文件不存在时，一切正常（甚至打印 $user 和 $pass），但会收到如下错误消息：-

```
readline() on closed filehandle LINFO at loginfile.pl line 43. 
```

如果文件已经存在，那么我会收到以下错误

```
readline() on closed filehandle LINFO at loginfile.pl line 43.
Use of uninitialized value $pass in print at loginfile.pl line 59.
Use of uninitialized value $user in print at loginfile.pl line 60. 
```

不知道这里有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:45:49.957

您必须将条件`if`和`elsif`括号括起来。还要小心在哪里使用`=`和`==`。这应该适合你：

```
if    ($. == 1) { $user = $line;  }
elsif ($. == 2) { $pass = $line;  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:46:28.747

如果找不到 login.txt 文件，为什么会退出？因为`die`声明？这是[`perldoc -f die`](http://perldoc.perl.org/functions/die.html)：

> 模具清单
> 
> die 引发异常。在 eval 中，错误消息被填充到 $@ 中，并且 eval 以未定义的值终止。如果异常在所有封闭的 eval 之外，则未捕获的异常将 LIST 打印到 STDERR 并以非零值退出。如果您需要使用特定的退出代码退出进程，请参阅退出。

虽然这不是很清楚（准确地说，对于新手来说非常不清楚），但您可能应该知道这`die`意味着程序退出，执行停止在那里。

使用 时`open`，这是推荐的做法，因为打开调用中的任何错误通常都应该被认为是致命的。但是，您稍后会忽略此调用并在该块中稍后在同一文件句柄上`open`使用另一个调用。`open`我能看到的唯一原因

```
unless(open LINFO, $login) { 
```

然后是您正在尝试确定该文件是否存在，并且您可以读取它。为此，您可以使用[命令`-X`，](http://perldoc.perl.org/functions/-X.html)例如

```
if (-e $login)     # if file exists
if (-r $login)     # effective uid/gid can read file
... 
```

# yii - Yii trace - 正确使用

> ID：16036059
> 
> 赞同：0
> 
> 时间：2013-04-16T11:39:05.767
> 
> 标签：yii

抛开单元测试和 xdebug 使用不谈，我希望有一种方法可以抛出一些浏览器消息，这是一个不应该出现的值。

比方说：`$className = 45;`

如果我们有：

```
public function setMainClass($className) {

            if (is_string($className)) {
                $this->_mainClass = $className;
            } else {
                echo Yii::trace(CVarDumper::dumpAsString($className),'vardump');
            }
        } 
```

我们将在开发阶段将此输出发送到浏览器。这很棒。

但是，我不确定这是否是使用 Yii::trace 的正确方法，如果我错过了使用它。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:03:42.650

`echo`调用没有必要`Yii::trace()`（它返回 void 所以回显什么都不做）。另一个建议是您可以考虑将类别更改为类似于[文档中讨论](http://www.yiiframework.com/doc/guide/1.1/en/topics.logging#message-logging)的路径别名。例如-

```
} else {
    Yii::trace(CVarDumper::dumpAsString($className), 'application.models.MyGreatModel');
} 
```

# jquery - JQuery手风琴，根据高度定位页脚

> ID：16036060
> 
> 赞同：3
> 
> 时间：2013-04-16T11:39:07.403
> 
> 标签：jquery, height, accordion

我制作了一个响应式网站，它检查最高列并相应地定位页脚，因为我不得不使用绝对定位。我的问题是，我在一页上有一个手风琴，而页脚与手风琴的内容重叠。如何调整以下代码以考虑手风琴的最高部分，或者在单击手风琴并调整高度大小时注册 setFooter 函数的新事件？

[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)

```
function setFooter() {
        var rightcol = $('._right').height();
        var midcol = $('.col_centre').height();
        //var accordian = '?';

        if (rightcol > midcol) {
            $('.col_centre').css('height', rightcol + 'px');
        }
       /* if (accordian > midcol) {
            $('.col_centre').css('height', checkout + 'px');
        }*/
}
$(document).ready(function() {
    setFooter();

});
$(window).resize(function() {
    setFooter();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T06:02:40.920

此代码计算“content-div”中最高的元素，然后使用结果值设置页脚顶部值：

```
var h, elems, max_height;
elems = $( 'content-div' );
for( i = 0; i < elems.length; i++ ) {
    h = elems[i].offsetTop + elems[i].offsetHeight + elems[i].style.marginTop + elems[i].style.marginBottom;
    max_height = ( max_height > h ) ? max_height : h;
} 
```

例如

```
$('#footer').css('top', max_height + 'px'); 
```

# jquery - 问题 listfilter 仅在某些 css 类中

> ID：16036062
> 
> 赞同：2
> 
> 时间：2013-04-16T11:39:16.383
> 
> 标签：jquery

我是 jQuery 新手，需要帮助。我得到了这个代码，它工作正常：

```
<script>
    (function ($) {
        // custom css expression for a case-insensitive contains()
        jQuery.expr[':'].Contains = function(a,i,m){
            return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
        };

        function listFilter(header, list) { // header is any element, list is an unordered list
            // create and add the filter form to the header
            var form = $("<form>").attr({"class":"filterform","action":"#"}),
            input = $("<input>").attr({"class":"filterinput","type":"text"});
            $(form).append(input).appendTo(header);

            $(input).change( function () {
                var filter = $(this).val();
                if(filter) {
                    // this finds all links in a list that contain the input,
                    // and hide the ones not containing the input while showing the ones that do
                    $(list).find("a:not(:Contains(" + filter + "))").parent().slideUp();
                    $(list).find.hasClass(Lot) + ("a:Contains(" + filter + ")").parent().slideDown();
                } else {
                    $(list).find("li").show();
                }
                return false;
            }).keyup( function () {
                // fire the above change event after every letter
                $(this).change();
            });
        }

        //ondomready
        $(function () {
            listFilter($("#header"), $("#list"));
        });
    }(jQuery));
</script>

</head>
    <body>
        <div id="wrap">
            <h1 id="header">List of countries</h1>
            <ul id="list">
                <li>
                    <p class="Lot">1001</p>
            <p class="Desc para-style-override-1">
                        KARMAPA. Tibet, 19./20\. Jh. H 14,8 cm.<br>Bronze.
                        Sitzender Lama in dhyanasana auf Lotosthron. Mit seiner rechten Hand 
                        ruft er die Erde als Zeugin an, während die Linke in Meditationsgestus 
                        ein Wassergefäss hält. Gewand mit eingraviertem Blumendekor.
                    </p>
            <p class="Footnote para-style-override-1">
                        Carl Laszlo collection, Basel.
                    </p>
            <p class="LotEst para-style-override-1">CHF 1 000.- / 1 500.-</p>
            <p class="Est2 para-style-override-1">(€ 830.- / 1 250.-) </p>
                </li>
                <li>
                    <p class="Lot">1002*</p>
            <p class="Desc para-style-override-1">
                        KLEINER AMITAYUS. Tibetochinesisch, 18./19\. Jh. H 11 cm.<br>Bronze.
                        Der Buddha des ewigen Lebens sitzt in der Lotoshaltung auf einem 
                        Doppellotosthron. Fein gestaltetes Gesicht. Unverschlossen. Min. besch.
                    </p>
            <p class="LotEst para-style-override-1">CHF 500.- / 800.-</p>
            <p class="Est2 para-style-override-1">(€ 420.- / 670.-)</p>
                </li>
            </ul> 
```

我只想过滤其中的数字，`p class="Lot"`但显示整个`li`.

我试过了`.hasClass`，但没有用。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:02:43.053

```
 $(list).find.hasClass(Lot) 
```

不能工作。没有定义批次变量；-)

尝试

```
 $(list).find.hasClass("Lot") 
```

使用 jQuery 按类选择元素的最简单方法是

```
$('.Lot',list); 
```

你可以结合它：

```
$(".Lot:Contains(" + filter + ")", list).parent().slideDown(); 
```

锻炼：http://docs.jquery.com/Tutorials : [Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

# jquery - 错误状态：“错误请求”。错误代码：400

> ID：16036069
> 
> 赞同：0
> 
> 时间：2013-04-16T11:39:40.327
> 
> 标签：jquery, json, jsp, spring-mvc

在 ItemController 上：

```
@RequestMapping(value="/delete.htm", produces="application/json", method=RequestMethod.POST)
public @ResponseBody Item deleteItem(
            @RequestParam String itemName) {

    Item existingItem = new Item();
    existingItem.setItemName(itemName);
    itemService.deleteItem(existingItem);
    return existingItem;
} 
```

在 ItemDao 实现上：

```
@Override
public void deleteItem(Item item) {
    // TODO Auto-generated method stub
    sessionFactory.getCurrentSession().delete(item);
} 
```

在项目 ServiceImpl 上：

```
@Transactional
public void deleteItem(Item item) {
    // TODO Auto-generated method stub
    itemDao.deleteItem(item);
} 
```

在 Jquery Grid 上，我正在使用删除功能：

```
function deleteRow(obj, args) { 
    // Get the currently selected row 
    var row = $('#grid').jqGrid('getGridParam','selrow');

    // A pop-up dialog will appear to confirm the selected action
    if (row != null) { 
        $('#grid').jqGrid('delGridRow', row, {
            url: 'delete.htm',
            recreateForm: true,
            beforeShowForm: function (form) {
                //Change title
                $(".delmsg").replaceWith('<span style="white-space: pre;">' +
                                     'Delete selected record?' + '</span>');
                //hide arrows
                $('#pData').hide();
                $('#nData').hide();
            },
            reloadAfterSubmit: true,
            closeAfterDelete: true,
            serializeDelData: function (postdata) {
                var rowdata = $('#grid').getRowData(postdata.id);
                // append postdata with any information 
                return {
                    id: postdata.id,
                    oper: postdata.oper,
                    username: rowdata.username
                };
            },
            afterSubmit: function (response, postdata) {
                var result = eval('(' + response.responseText + ')');
                var errors = "";

                if (result.success == false) {
                    for (var i = 0; i < result.message.length; i++) {
                        errors += result.message[i] + "<br/>";
                    }
                } else {
                    $('#msgbox').text('Entry has been deleted successfully');
                    $('#msgbox').dialog({
                        title: 'Success',
                        modal: true,
                        buttons: {
                            "Ok": function () {
                                $(this).dialog("close");
                            }
                        }
                    });
                }
                // only used for adding new records
                var newId = null;

                return [result.success, errors, newId];
            }
        });
    } else {
        $('#msgbox').text('You must select a record first!');
        $('#msgbox').dialog({
            title: 'Error',
            modal: true,
            buttons: {
                "Ok": function () {
                    $(this).dialog("close");
                }
            }
        });
    }
} 
```

我收到以下错误：错误状态：“错误请求”。错误代码：400 删除所选记录？我在控制器或 jq 网格中遇到错误？请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:15:05.650

[这意味着](http://www.checkupdown.com/status/E400.html)您没有正确地从您的 ajax jquery 调用（？）映射您的控制器。

我对 jqGrid 不熟悉，但请检查您是否正在**发布帖子**以及*请求参数是否定义正确*。

（顺便说一句，您使用的逻辑和命名约定有点令人困惑。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T11:52:36.010

HTTP-Response Code 400 表示您的请求有问题。只需检查对您的网络服务的调用是否正确（路径、参数等）。

此外，您可以查看您的服务器日志文件，以了解您在客户端做错了什么。Spring-mvc 将响应代码 400 映射到许多异常（看看[这里](http://static.springsource.org/spring/docs/3.2.0.BUILD-SNAPSHOT/reference/htmlsingle/#mvc-ann-rest-spring-mvc-exceptions)）。通过分析异常，您可以了解您的请求有什么问题。

# php - 来自 MySQL 的 blob\text 图像返回 NULL

> ID：16036071
> 
> 赞同：0
> 
> 时间：2013-04-16T11:39:49.493
> 
> 标签：php, mysql, phpmyadmin, blob

几天前我发布了将 [MySQL 中 blob 传递到 IOS NSData\UIImage](https://stackoverflow.com/questions/16010499/pass-mysql-medium-blob-into-ios-nsdata-uiimage) 中，但还没有找到解决方案。我的具体问题是，当我从数据库、blob 或文本中检索图像时，它返回 NULL，其中没有变量的行只返回空白

```
while ($row = mysql_fetch_array($result)) {

 $add = array(); 
 $add["Id"] = $row["Id"]; 
 $add["Mail"] = $row["Mail"];
 $add["Category"] = $row["Category"]; 
 $add["Phone"] = $row["Phone"]; 
 $add["Msgs"] = $row["Msgs"];
 //image from blob
 $add["Picture"] = $row["Picture"];

 // push single add into final response array 
 array_push($response["adds"], $add); 
} 
```

有没有其他方法可以处理来自 blob\text 的图像？！我尝试了[https://stackoverflow.com/a/6273415/1333294](https://stackoverflow.com/a/6273415/1333294)但对我没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:50:29.717

最后！！

```
 $img = $row["Picture"];
    $b64img = base64_encode ($img);
    $b64img = mysql_real_escape_string($b64img);
    $add["Picture"] = $b64img; 
```

就那么简单！并且 xcode 将其作为 base64 字符串和 nut NULL 获取。感谢您的建议...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:56:39.533

添加以下代码

```
header("Content-type: image/jpeg");

echo $row['picture'];

// Display image with img html tag

echo '<img src="data:image/jpeg;base64,' . base64_encode( $row['picture'] ) . '" />';

echo 'Hello world.'; 
```

请找到示例代码

```
$response["adds"] = array();
$add = array(); 
$add["Id"] = 1; 
$add["Mail"] = "test@mm.com";
$add["Category"] = "category"; 
$add["Phone"] = "1234567"; 
$add["Msgs"] = "ths s txt msg";
//image from blob
$add["Picture"] = "pciture";

// push single add into final response array 
array_push($response["adds"], $add); 
print_r($response["adds"]);
header("Content-type: image/jpeg");
print $response["adds"][0]['Picture']; 
```

# android - 使用 ACTION_SEND 共享文本文件

> ID：16036073
> 
> 赞同：8
> 
> 时间：2013-04-16T11:39:55.193
> 
> 标签：android

我们可以使用 ACTION_SEND 打开共享对话框来共享文本

```
 Intent sendIntent = new Intent();
                sendIntent.setAction(Intent.ACTION_SEND);
                sendIntent.putExtra(Intent.EXTRA_TEXT, "Download Link: Android play store link");
                sendIntent.setType("text/plain");
                startActivity(Intent.createChooser(sendIntent, "Share This App")); 
```

如何使用 ACTION_SEND 共享文本文件。

我阅读 了[http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html) 但无法获得如何共享文本文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T11:49:32.470

使用以下行。

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
    emailIntent.setType("*/*");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] {"me@gmail.com"}); 
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, 
    "Test Subject"); 
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
    "go on read the emails");     
    emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromfile(new File(yourtextfilepath));
    startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

确保您的文本文件路径应该来自外部存储卡。动作发送不会接受来自内部存储器的文件。

希望这会帮助你。

# php - 使用 laravel 将整个表导出为 CSV

> ID：16036075
> 
> 赞同：5
> 
> 时间：2013-04-16T11:39:59.170
> 
> 标签：php, csv, export, laravel-3, fputcsv

我是 laravel 的新手，很难找到将一个表导出到 csv 的方法。我在控制器类中尝试了以下代码，但它给了我一个错误：

```
 public function get_export()
{
    $table = Cpmreport::all();
    $file = fopen('file.csv', 'w');
    foreach ($table as $row) {
        fputcsv($file, $row);
    }
    fclose($file);
    return Redirect::to('consolidated');
} 
```

Cpmreport 的模型类：

```
 class Cpmreport extends Eloquent
    {
      public static $table='cpm_report';
    } 
```

错误 ：

```
 Message:

    fputcsv() expects parameter 2 to be array, object given

    Location:

    C:\xampp\htdocs\cpm_report\application\controllers\cpmreports.php on line 195 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-07T10:06:56.023

简单的方法

```
Route::get('/csv', function() {
  $table = Cpmreport::all();
  $output='';
  foreach ($table as $row) {
      $output.=  implode(",",$row->toArray());
  }
  $headers = array(
      'Content-Type' => 'text/csv',
      'Content-Disposition' => 'attachment; filename="ExportFileName.csv"',
  );

  return Response::make(rtrim($output, "\n"), 200, $headers);
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-16T12:48:37.913

`fputcsv($file, $table);`应该是`fputcsv($file, $row)`，不是吗？

`to_array()`并使用 Eloquent 的方法将对象转换为数组：http: [//laravel.com/docs/database/eloquent#to-array](http://laravel.com/docs/database/eloquent#to-array)

```
public function get_export()
{
    $table = Cpmreport::all();
    $file = fopen('file.csv', 'w');
    foreach ($table as $row) {
        fputcsv($file, $row->to_array());
    }
    fclose($file);
    return Redirect::to('consolidated');
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-15T09:05:41.440

选择查询 MySQL 数据。

```
$data = \DB::connection('mysql')->select($select); 
```

调用以下函数：

```
query_to_csv($data, 'data.csv');

function data_to_csv($data, $filename)
    {
        $fp = fopen($filename, 'w');
        foreach ($data as $row) {
            fputcsv($fp, $row);
        }

        fclose($fp);
    } 
```

创建 10 万条记录需要 1 秒。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-17T06:31:14.957

这更好更简单。

```
$file_name = "abc";
$postStudent = Input::all();
$ck = DB::table('loan_tags')->select('LAN')->where('liabilitiesId', $postStudent['id'])->get();
$i = 0;
foreach ($ck as $row) { 

              $apps[$i]['LAN'] = $row->LAN;
            $apps[$i]['Account_number'] =   $postStudent['account_number'];
            $apps[$i]['Bank_Name'] =  $postStudent['bank_name'];
            $i++;
}

ob_end_clean();
ob_start();
Excel::create($file_name, function($excel) use($apps){
        $excel->sheet('Sheetname', function($sheet) use($apps){

           $sheet->row(1, array(
                 'LAN', 'Account number' , 'Bank Name'
            ));
            $k = 2;
             foreach ($apps as $deta) {
                 $sheet->row($k, array($deta['LAN'],   $deta['Account_number'], $deta['Bank_Name']
                ));
                $k++;
             }
        });
    })->download('xlsx'); 
```

# magento - 愿望清单中的 Magento 语言错误

> ID：16036080
> 
> 赞同：1
> 
> 时间：2013-04-16T11:40:16.527
> 
> 标签：magento

我对 magento 愿望清单有疑问。我的商店有 4 种不同的语言 (DE/EN/FR/IT)。一切都很好，但在愿望清单中，无论商店语言设置为英语、法语等，产品名称和描述都以错误的语言（意大利语）显示。我知道这里有一个类似的线程 [Magento Not Translating Wishlist Product Name 和描述](https://stackoverflow.com/questions/14299477/magento-not-translating-wishlist-product-name-and-description)

但是删除的建议`$product = $this->_getData('product');`并不能解决问题。它仅将产品名称和描述更改为默认语言，即德语。

//解决方案//

我终于明白了。我知道这不是最完美的解决方案，但它确实有效。在 /app/code/core/Mage/Wishlist/Model/Item.php 中，`public function getProduct()` 我删除了这一行`$product = $this->_getData('product');`并添加了以下内容：

```
$store_id = Mage::app()->getStore()->getStoreId(); 
```

然后我将：更改`$product = Mage::getModel('catalog/product') ->setStoreId($this->getStoreId()) ->load($this->getProductId());` 为：

```
$product = Mage::getModel('catalog/product')
            ->setStoreId($store_id)
            ->load($this->getProductId()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T15:41:04.593

感谢您的解决方案。为避免多次重新加载产品，我将该代码更改为：

```
public function getProduct() {
$product = null;
$current_store_id = Mage::app()->getStore()->getStoreId();

if (!$this->getProductId()) {
    Mage::throwException(Mage::helper('wishlist')->__('Cannot specify product.'));
}

if($this->_getData('last_store_id') != $current_store_id){
    $product = Mage::getModel('catalog/product')
    ->setStoreId($current_store_id)
    ->load($this->getProductId());
} else {
    $product = $this->_getData('product');
}

$this->setData('product', $product);
$this->setData('last_store_id', $current_store_id);

/**
 * Reset product final price because it related to custom options
*/
$product->setFinalPrice(null);
$product->setCustomOptions($this->_optionsByCode);
return $product;} 
```

# session - 会话 cookie - 堆栈而不是堆上的 CookieContainer 导致问题

> ID：16036086
> 
> 赞同：0
> 
> 时间：2013-04-16T11:40:46.283
> 
> 标签：session, cookies, httpwebrequest, cookiecontainer

我在这里看过 [C# WebRequest using Cookies](https://stackoverflow.com/questions/4158448/c-sharp-webrequest-using-cookies) [Multiple WebRequest in same session](https://stackoverflow.com/questions/787857/multiple-webrequest-in-same-session) [Reuse Connection with HttpWebRequest in C#](https://stackoverflow.com/questions/9025075/reuse-connection-with-httpwebrequest-in-c-sharp) [C# keep session id over httpwebrequest](https://stackoverflow.com/questions/1453560/c-sharp-keep-session-id-over-httpwebrequest)

这就是我正在做的事情，除了我希望将我的 CookieContainer 作为成员（名为 session_cookie）存储在我的名为 connector 的类中。我的问题是，如果我在代码中使用临时对象，那么 cookie 可以正常工作：

```
CookieContainer t = new CookieContainer();
HTTPReq = (HttpWebRequest)WebRequest.Create(scriptURL);
HTTPReq.CookieContainer = t; 
```

但是如果我使用

```
HTTPReq = (HttpWebRequest)WebRequest.Create(scriptURL);
HTTPReq.CookieContainer = session_cookie; 
```

然后就不行了！我不知道为什么

这是连接器类代码：

```
public class Connector
{
    public CookieContainer session_cookie;
    private string session_id;
    private HttpWebRequest HTTPReq;
    private HttpWebResponse Response;

    //Session oriented connection
    public string serverRequest(string scriptURL, string payLoad) 
    {
        try
        {
            HTTPReq = (HttpWebRequest)WebRequest.Create(scriptURL);
        HTTPReq.CookieContainer = session_cookie;
        HTTPReq.Method = "POST";                      

        //Data arguments
        byte[] byteArray = Encoding.UTF8.GetBytes(payLoad);
        HTTPReq.ContentType = "application/x-www-form-urlencoded";
        HTTPReq.ContentLength = byteArray.Length;

        //Get the stream to write into
        Stream dataStream = HTTPReq.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        Response = (HttpWebResponse)HTTPReq.GetResponse();

        Encoding enc = Encoding.GetEncoding(1252);  // Western latin alphabet (windows default)

        //Get the repsonse from the server
        StreamReader ResponseStream = new StreamReader(Response.GetResponseStream(), enc);

        string response = ResponseStream.ReadToEnd().Trim();

        Response.Close();
        ResponseStream.Close();
        return response;
        }
        catch (WebException ex)
        {
        Console.WriteLine(ex.ToString());
        return null;
        }
    }    
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T20:27:37.690

您缺少需要初始化 CookieContainer 属性的 Connector 类的构造函数。您还应该使用 CookieCollection 从响应中捕获 cookie 并发送到下一个请求。像这样的东西应该工作：

```
public class Connector
{
    public CookieContainer session_cookie;
    private CookieCollection cookies;
    private string session_id;
    private HttpWebRequest HTTPReq;
    private HttpWebResponse Response;

    public Connector()
    {
        session_cookie = new CookieContainer();
        cookies = new CookieCollection();
    }

    //Session oriented connection
    public string serverRequest(string scriptURL, string payLoad) 
    {
        try
        {
        HTTPReq = (HttpWebRequest)WebRequest.Create(scriptURL);
        HTTPReq.CookieContainer = session_cookie;
            HTTPReq.CookieContainer.Add(cookies);
        HTTPReq.Method = "POST";                      

        //Data arguments
        byte[] byteArray = Encoding.UTF8.GetBytes(payLoad);
        HTTPReq.ContentType = "application/x-www-form-urlencoded";
        HTTPReq.ContentLength = byteArray.Length;

        //Get the stream to write into
        Stream dataStream = HTTPReq.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        Response = (HttpWebResponse)HTTPReq.GetResponse();
            cookies = Response.Cookies; // capture cookies from response for next request

        Encoding enc = Encoding.GetEncoding(1252);  // Western latin alphabet (windows default)

        //Get the repsonse from the server
        StreamReader ResponseStream = new StreamReader(Response.GetResponseStream(), enc);

        string response = ResponseStream.ReadToEnd().Trim();

        Response.Close();
        ResponseStream.Close();
        return response;
        }
        catch (WebException ex)
        {
        Console.WriteLine(ex.ToString());
        return null;
        }
    }

} 
```

# python - 使用 raw_input 定义要搜索的变量列表

> ID：16036088
> 
> 赞同：1
> 
> 时间：2013-04-16T11:40:49.953
> 
> 标签：python, raw-input

如何将存储在 rowChoice 中的 raw_input 值用于计数？即现在我定义A.count。我将如何使用 rowChoice.count 的正确等效项，其中用户定义要搜索的 A、B、C、D 中的哪一个。

```
A = ['available', 'unavailable','available','available','available']
B = ['unavailable', 'unavailable','available','available','available']
C = ['available', 'unavailable','unavailable','available','available']
D = ['available', 'unavailable','available','unavailable','unavailable']

rowChoice = raw_input('What row would you like to sit in? >> ')

count = A.count('available')
print'there are %r seats available in this row' %(count) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:43:26.983

最好为此使用字典：

```
d = {'A': ['available', 'unavailable','available','available','available'],
     'B': ['unavailable', 'unavailable','available','available','available'],
     'C': ['available', 'unavailable','unavailable','available','available'],
     'D': ['available', 'unavailable','available','unavailable','unavailable']}

letter = raw_input().upper()    
d[letter].count('available') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:36:23.170

如果你不想使用字典，你可以使用这个函数“ord”

```
ord('A')  #65 
ord('a')  #97  , then use
i = ord('A') - 65 # use i as index to your created list = [A,B,C,D]
created_list = [A,B,C,D]  #then
i = ord(rowchoice) - 65
count = created_list[i].count('available') 
```

# c++ - 有人可以告诉我这是如何编译的吗？（ sqrt 正在重新调整字符串）

> ID：16036093
> 
> 赞同：0
> 
> 时间：2013-04-16T11:41:17.127
> 
> 标签：c++, compiler-errors, sqrt

这是我的代码。这让我难以置信。

```
#include <iostream>
#include <sstream>
#include <set>
#include <cmath>
#include <cstdlib>
#include "list.h"
#include "stack.h"
#include <limits>
#define PI 3.1415926535897932384626433832795

class RPN : public Stack<float> {
      public:
             std::string sqrt(float n); 
};

std::string RPN::sqrt(float n){
    std::string x;
    x = sqrt(3.0);
    std::ostringstream ss;
    ss << n;
    return (ss.str());
} 
```

是的，正在编译。sqrt 正在返回一个字符串。尝试使用双精度或浮点数会引发奇怪的错误。谁能告诉我发生了什么？我以前从未有过这个。有趣的是，我实际上稍后会转换为字符串，但我怀疑这会编译其他任何地方......

```
postfix.cpp: In member function ‘std::string RPN::sqrt(float)’:
postfix.cpp:161:13: error: cannot convert ‘std::string {aka std::basic_string<char>}’ to ‘float’ in assignment 
```

编辑：首先发布了错误的编译器错误。

edit2：第 161 行是 n=sqrt(n); 我什至尝试过 double x = sqrt(n) 和许多其他方法；哦，当我在上面发布的方法中打印出 retrned 字符串时，我得到一个段错误（obv ..）

```
std::string RPN::sqrt(float n) {
    n = sqrt(n);
    std::ostringstream ss;
    ss << n;
    return (ss.str());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:47:19.560

让我们更仔细地看一下代码

```
std::string RPN::sqrt(float n){
    std::string x; // temporary string variable

    // calling sqrt with 3.0? What?
    // This call actually would make this function be recursive 
    // (it would hide ::sqrt), making the assignment possible 
    // to compile (as sqrt returns a string)
    // This also means that the function will 
    // eventually cause a stack overflow as there is no break case.
    x = sqrt(3.0); 

    std::ostringstream ss; // temporary string stream
    ss << n; // putting x in the string stream

    // returning the string value of the string stream
    // (i.e. converting x to a string)
    return (ss.str()); 
} 
```

换句话说，没有编译错误，但如果你运行该代码，你会得到一个运行时错误。

编辑：

尝试`n = ::sqrt(n)`（或者`n = std::sqrt(n)`如果您`#include <cmath>`）而不是`n = sqrt(n)`，因为这只会调用您自己定义的函数，因为您的函数将掩盖全局范围。

`n = sqrt(n)`使您的函数递归，而不是编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:47:27.720

该行`x = sqrt(3.0);`正在调用您的`RDN::sqrt()`方法，该方法返回一个字符串。我认为您正在尝试`sqrt()`在 cmath 中调用该函数。我建议将您的方法重命名为其他名称。或者，您也许可以致电`std::sqrt(3.0)`

# javascript - HTML5 本地存储数据是否按域分隔存储

> ID：16036095
> 
> 赞同：0
> 
> 时间：2013-04-16T11:41:23.080
> 
> 标签：javascript, html, local-storage

我试过环顾 HTML5 本地存储，但似乎找不到直接的答案。

本地存储是否像 cookie 一样基于域存储其对象？

如果是这样，我如何从另一个域访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:42:08.427

从[规格](http://www.w3.org/TR/webstorage/#security-localStorage)：

> 每当由属性返回`SecurityError`的对象的任何成员被有效脚本来源与访问属性的对象的来源不同的脚本访问时，用户代理必须抛出异常。`Storage``localStorage``Document``Window``localStorage`

`localStorage`除了存储数据的域之外，您无法访问存储在任何域中的数据。它遵循与`XMLHttpRequest`“同源政策”相同的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:23:47.330

> 如果是这样，我如何从另一个域访问它？

你不能。

LocalStorage 数据是根据网页的域创建的。然后只能从同一域下的网页访问该数据。

这就是为什么这是一个好主意：您希望像hackerz.pwn 这样的网站能够读取/写入/删除它吗？

```
Example (page on www.yourbank.com):
window.localStorage.setItem("user_session",  "1234567"); 
```

# c# - 将 C# 中使用的加密转换为 PHP

> ID：16036105
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:41:49.117
> 
> 标签：c#, php, bytearray, sha256

我一直在尝试将 C# 加密技术转换为 PHP。C# 代码如下所示。我没有 C# 的经验。我不得不接管 C# 中的项目

```
private void button1_Click(object sender, EventArgs e)
{
    //byte[] response = ComputeHash("pradeep14520", BitConverter.GetBytes("0x9A111B734E4F10469668"));
    //byte[] response = ComputeHash("pradeep14520", dictionary.ElementAt(0).Value.Salt);
    byte[] response =ComputeHash("pradeep14520", StringToByteArray("9A111B734E4F10469668"));
    string hex = BitConverter.ToString(response).Replace("-", string.Empty);
    string base64 = Convert.ToBase64String(response); // 683CA8E00E8CE41A079B7C86CE4960AC2376CD85F2AEAB2E4DF99FFA7F7FA4F3
}

 private byte[] ComputeHash(string password, byte[] storedSalt)
    {
        byte[] passwordBytes = Encoding.Unicode.GetBytes(password);
        if ((int)storedSalt.Length > 0)
        {
            byte[] passwordAndSalt = new byte[(int)passwordBytes.Length + (int)storedSalt.Length];
            passwordBytes.CopyTo(passwordAndSalt, 0);
            storedSalt.CopyTo(passwordAndSalt, (int)passwordBytes.Length);
            passwordBytes = passwordAndSalt;
        }

        return new SHA256Managed().ComputeHash(passwordBytes);
    } 
```

我已经在按钮单击功能中评论了示例响应。我尝试使用 PHP 实现相同的功能。[参考此链接](https://stackoverflow.com/questions/7249998/why-isnt-my-php-sha256-hash-equivalent-to-c-sharp-sha256managed-hash)后使用以下代码

.我发现没有必要在 PHP 中生成字节数组，因为字符串是 php 中的字节数组。

```
$originalSalt = 'pradeep14520';
    $originalSalt .= '9A111B734E4F10469668';
    hash("sha256",iconv(mb_detect_encoding($originalSalt, mb_detect_order(), false), "UTF-8", $originalSalt),true); 
```

我已将最后一个参数作为 false 传递给哈希函数，以获得原始输出。但是我得到了不同的 PHP 和 C# 输出

```
for PHP :afc80d1a6cae81e8f868b054dafbb74bdd86399d771fceef574e4b373506b704
for C#  :683CA8E00E8CE41A079B7C86CE4960AC2376CD85F2AEAB2E4DF99FFA7F7FA4F3 
```

请帮忙。提前致谢。

根据 Daniel Hilgarth 提供的建议，我修改了代码并使其工作。

```
 $password = 'pradeep14520';
$originalSalt = hex2bin('9A111B734E4F10469668');
echo    strtoupper(hash("sha256",mb_convert_encoding($password,"UTF-16LE").$originalSalt,false)); 
```

我希望它会帮助某人..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:47:23.813

这里的问题是 C# 代码使用[`Encoding.Unicode`](http://msdn.microsoft.com/en-us/library/system.text.encoding.unicode.aspx). 这是 UTF-16，即每个字符返回两个字节，即使该字符可以用 ASCII 表示。

您需要在 PHP 中使用它的等效项，或者将 C# 代码更改为使用[`Encoding.UTF8`](http://msdn.microsoft.com/en-us/library/system.text.encoding.utf8.aspx)或[`Encoding.ASCII`](http://msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx)，具体取决于 PHP 字符串的真正含义。

# javascript - 在 javascript 中评估实例化

> ID：16036106
> 
> 赞同：1
> 
> 时间：2013-04-16T11:41:52.557
> 
> 标签：javascript, class, extjs4

我想在 javascript 中评估一个字符串。我要评估的字符串是一个类的实例：

```
var frm = eval("new MyDesktop.Modules." 
    + record.data.js 
    + ".Client." 
    +  record.data.js + "();") 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T11:44:39.897

这是可能的，但您不需要这样做。

```
var js = record.get('js');
var frm = Ext.create('MyDesktop.Modules.' + js + '.Client.' +  js'); 
```

# c# - 如何从多个来源异步获取数据？

> ID：16036108
> 
> 赞同：-2
> 
> 时间：2013-04-16T11:41:57.700
> 
> 标签：c#, xaml, asynchronous, windows-8

我正在使用 C# 和 XAML 开发一个 Windows 8 应用程序，其中我在单个页面中获取大量数据。因此，该应用程序需要花费大量时间来加载，因为它需要等到所有数据都存在然后将它们显示给用户。

我想要的主要是以下内容：我的 Gridview 最多有 15 个组，每个组大约有 10 个图块。目前我需要等到所有数据加载然后显示所有组，这需要很长时间，因为每个组除了它的图块之外还有一些 RSS 提要来获取和解析。那么有没有一种方法可以逐步显示组，当 group1 完成加载时显示然后 group2 被添加，等等...\希望现在问题更清楚了。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:48:54.677

这个问题非常模糊，但基本原理是这样的，你必须使用某种带有回调的底层工作人员，让你知道工作何时准备好，或者在这种情况下，何时从源获取数据。您可以为此使用线程，但这可能会更复杂一些。

看看这里：

[http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/](http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/)

您还可以使用新的 async/await 关键字，这非常容易：

[http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

因此，假设您有几个后台工作进程正在进行，然后您可以在每个完成后检查，使用一些计数器来检查所有后台进程是否已完成并根据需要更新用户界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:06:08.257

您可以使用任务从 UI 线程中获取数据，并在数据进入时使用调度程序更新 UI。

[http://msdn.microsoft.com/en-ca/library/dd537609.aspx](http://msdn.microsoft.com/en-ca/library/dd537609.aspx)

任务很容易创建和使用。

```
 var task = new Task(() => Console.WriteLine("Running a task."));
 task.Start(); 
```

# ios - VideoJS：iPad 上的视频大小

> ID：16036109
> 
> 赞同：0
> 
> 时间：2013-04-16T11:42:05.193
> 
> 标签：ios, html, video, html5-video, video.js

我正在使用 VideoJS 来显示视频。它适用于每个系统上的所有浏览器。例外是 iPad（iOS 5 和 iOS 6，均在 Safari 和 Chrome 上测试）。视频调整为大约 300 像素宽度。

当我从页面中删除 videoJS 时，视频显示正确。但我需要 videoJS 用于换肤，因为它使 HTML5 视频在 jQuery 滑块中工作。

我尝试了几件事：

*   在 video.js 或 JS 中手动输入宽度和高度。
*   将 CSS（包括！important）添加到 videotag 甚至下面的所有标签（param）。
*   尝试了一些我在 stackoverflow 上发现的模糊技术。像 -webkit-transform-style: preserve-3d; 在视频标签中。
*   试图用 wmode 玩。

似乎没有任何效果。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T18:26:19.453

首先，如果您还没有，您可能想要升级到 5 月初（2013 年）发布的 v4.0。

使用 4.0，您可以看到一些设置宽度高度的示例，这些示例至少在我的 iPad 上对我有用：
宽度/高度 100%：http: [//jsbin.com/uyelud/1/edit](http://jsbin.com/uyelud/1/edit)
宽度 200px/900px (例如奇怪的维度）[http://jsbin.com/ojajuc/2/edit](http://jsbin.com/ojajuc/2/edit)

引导您完成 vjs 代码...

宽度高度设置从这里的标签中获取： [https ://github.com/videojs/video.js/blob/v4.0.3/src/js/player.js#L112](https://github.com/videojs/video.js/blob/v4.0.3/src/js/player.js#L112)

从视频标签中删除（因为它被容器 div 包裹并填充容器） [https://github.com/videojs/video.js/blob/v4.0.3/src/js/player.js#L144](https://github.com/videojs/video.js/blob/v4.0.3/src/js/player.js#L144)

应用于容器 div [https://github.com/videojs/video.js/blob/v4.0.3/src/js/player.js#L180](https://github.com/videojs/video.js/blob/v4.0.3/src/js/player.js#L180)

然后由 UI 组件代码处理 [https://github.com/videojs/video.js/blob/v4.0.3/src/js/component.js#L647](https://github.com/videojs/video.js/blob/v4.0.3/src/js/component.js#L647)

如果您的页面上有不同的结果，您可能需要设置一个[简化的测试用例](http://css-tricks.com/reduced-test-cases/)来帮助缩小范围。

# ios6 - NSString 到 NSdate 仅更改 iOS 6

> ID：16036111
> 
> 赞同：0
> 
> 时间：2013-04-16T11:42:14.487
> 
> 标签：ios6, nsstring, nsdate, nsdateformatter

我有一个字符串`Apr. 20, 2013 Saturday @ 7:00 PM`，我正在使用以下代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
   [dateFormatter setDateFormat:@"MMM. d, yyyy EEEE @ h:mm a"];
   NSDate *dateFromString = nil;
   dateFromString = [dateFormatter dateFromString:dateString];
   [dateFormatter release]; 
```

我得到的结果是`2000-01-01 13:30:00 +0000`。它在 iOS 6 中给了我错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:50:59.027

你必须这样做：

```
NSDate *today = [[NSDate alloc] init];
NSDateFormatter *aux = [[NSDateFormatter alloc] init];
[aux setDateFormat: @"MMM. d, yyyy EEEE @ h:mm a"];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"es_ES"]; // Your locale, recommended 'en_US', 'en_GB', etc...
[aux setLocale:locale];
NSString *date = [aux stringFromDate: today]; 
```

顺便说一句：你必须初始化你的`NSDate`变量，如果你将它分配给一个`nil`值，那么它可能不会像它正在发生的那样按预期工作。

**EDIT1：** 可能你想使用这种日期格式：

```
[dateFormat setDateFormat: @"EE, dd MMM yyyy '-' HH:mm"]; 
```

# tomcat7 - 我无法从 Internet 访问 Tomcat

> ID：16036113
> 
> 赞同：1
> 
> 时间：2013-04-16T11:42:22.770
> 
> 标签：tomcat7

我正在尝试从 Internet 访问我的 tomcat，但我不能。我已经在我的路由器中创建了规则，我想这没关系，因为我有其他服务并且我可以访问它们。

我在 Tomcat 控制台上没有得到任何响应。

我在连接器中添加了地址 =“0.0.0.0”，因为我一直在互联网上阅读它。

我的 server.xml 是：

```
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 --><Server port="8005" shutdown="SHUTDOWN">
  <!-- Security listener. Documentation at /docs/config/listeners.html
  <Listener className="org.apache.catalina.security.SecurityListener" />
  -->
  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener"/>
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/>
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container",
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-"
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443" address="0.0.0.0">
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443"
        address="0.0.0.0" />-->

    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/>

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">
    -->
    <Engine defaultHost="localhost" name="Catalina">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->

      <!-- Use the LockOutRealm to prevent attempts to guess user passwords
           via a brute-force attack -->
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
      </Realm>

      <Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern="common" -->
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" prefix="localhost_access_log." suffix=".txt"/>

      <Context docBase="WebServicesTrivial" path="/WebServicesTrivial" reloadable="true" source="org.eclipse.jst.jee.server:WebServicesTrivial"/></Host>
    </Engine>
  </Service>
</Server> 
```

谢谢你。

# php - 鼠标悬停时光标不变

> ID：16036115
> 
> 赞同：1
> 
> 时间：2013-04-16T11:42:27.317
> 
> 标签：php, html, hyperlink

我有 4 个链接添加访问者、添加机器、添加主机、添加操作员，我感到惊讶的是，在通过链接悬停时光标图标没有改变。这是我的代码

```
<div style="margin-left:800px;margin-top:-200px;"><a style="text-decoration:none" href="addvisitorui.php"><label for="addvisitor">ADD VISITOR</a></div>
            <div style="margin-left:800px;"><a style="text-decoration:none" href="addmachine/addmachineui.php"><label for="addmachine">ADD MACHINE</a></div>
            <div style="margin-left:800px;"><a style="text-decoration:none" href="addhost/addhostui.php"><label for="addhost">ADD HOST</a></div>
            <div style="margin-left:800px;"><a style="text-decoration:none" href="addoperator/addoperatorui.php"><label for="addoperator">ADD OPERATOR</a></div> 
```

谁能告诉我我做错了什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:45:21.753

使用 CSS 但不在 style="" 中，而是在块或 .css 文件中。

您的代码无效。例如标签没有结束标签

使悬停使用

```
<style>
a {text-decoration:none;}
a:hover{color:red;}
div.mystyle{margin-left:800px;margin-top:-200px;}
</style> 
```

正确的 HTML

```
 <div class="mystyle"><a href="addvisitorui.php"><label for="addvisitor">ADD VISITOR</label></a></div>
        <div class="mystyle"><a href="addmachine/addmachineui.php"><label for="addmachine">ADD MACHINE</label></a></div>
        <div class="mystyle"><a href="addhost/addhostui.php"><label for="addhost">ADD HOST</label></a></div>
        <div class="mystyle"><a href="addoperator/addoperatorui.php"><label for="addoperator">ADD OPERATOR</label></a></div> 
```

为什么你仍然使用标签标签？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:45:25.723

尝试通过关闭标签来修复标签，应该可以解决您的问题。

```
<div style="margin-left:800px;margin-top:-200px;">
    <a style="text-decoration:none" href="addvisitorui.php">
        <label for="addvisitor">ADD VISITOR</label>
    </a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:45:55.643

您的 HTML 格式错误：

```
<div style="margin-left:800px;margin-top:-200px;">
    <a style="text-decoration:none" href="addvisitorui.php">
        <label for="addvisitor">ADD VISITOR</label>
    </a>
</div>
<div style="margin-left:800px;">
    <a style="text-decoration:none" href="addmachine/addmachineui.php">
        <label for="addmachine">ADD MACHINE</label>
    </a>
</div>
<div style="margin-left:800px;">
    <a style="text-decoration:none" href="addhost/addhostui.php">
        <label for="addhost">ADD HOST</label>
    </a>
</div>
<div style="margin-left:800px;">
    <a style="text-decoration:none" href="addoperator/addoperatorui.php">
        <label for="addoperator">ADD OPERATOR</label>
    </a>
</div> 
```

您还需要添加一个 CSS 规则来指定`label`应该使用`pointer`光标：

```
a label {
    cursor: pointer
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:45:58.700

试试这个：

```
div style="cursor:pointer;margin-left:800px;" 
```

当您将鼠标悬停在 div 上时，光标将更新为指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:45:58.807

您可以尝试在您的 div 中添加以下内容：`cursor:pointer`

IE

`<div style="margin-left:800px;margin-top:-200px;cursor:pointer;"><a style="text-decoration:none" href="addvisitorui.php"><label for="addvisitor">ADD VISITOR</a></div>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T11:48:41.350

请从锚标签内部删除标签，或者如果您想添加标签，您可以在锚标签之前添加它，这样我会完美工作

像

```
<div style="margin-left:800px;"><label for="addhost"><a style="text-decoration:none" href="addhost/addhostui.php">ADD HOST</a></label></div> 
```

# devise - 设计异步 + Sidekiq + sendmail 超时

> ID：16036116
> 
> 赞同：1
> 
> 时间：2013-04-16T11:42:32.153
> 
> 标签：devise, timeout, sendmail, sidekiq

我在使用 Sidekiq::Extensions::DelayedMailer 时遇到了超时。

有谁知道如何将超时时间更改为更长，以便 Sidekiq 可以成功发送消息？

这是我的日志转储：

2013-04-16T11:29:19Z 14364 TID-ows844wu8 Sidekiq::Extensions::DelayedMailer JID-4eb850367f8aec39032b8ee5 信息：开始

2013-04-16T11:29:49Z 14364 TID-ows844wu8 Sidekiq::Extensions::DelayedMailer JID-4eb850367f8aec39032b8ee5 信息：失败：30.345 秒

2013-04-16T11:29:49Z 14364 TID-ows844wu8 警告：{

“重试”=>真，

“队列”=>“默认”，

“超时”=> 30，

"class"=>"Sidekiq::Extensions::DelayedMailer",

"参数"=>["---\n

*   !ruby/class 'Devise::Mailer'\n

*   :unlock_instructions\n-

*   !ruby/object:用户\n

    属性：\n

    编号：5\n

    电子邮件：asdf@asdf.com\n

    加密密码：$2a$10$sqEWtyjRuUXMyE31k9f13uE17IO1WuRaqNgOOI6Smzxh3B85SenTq\n

    重置密码令牌：\n

    reset_password_sent_at：\n

    remember_created_at: \n

    登录计数：1\n

    current_sign_in_at: 2013-04-16 11:24:00.000000000 Z\n

    last_sign_in_at: 2013-04-16 11:24:00.000000000 Z\n

    current_sign_in_ip: 127.0.0.1\n

    last_sign_in_ip: 127.0.0.1\n

    created_at: 2013-04-16 10:31:14.000000000 Z\n

    更新时间：2013-04-16 11:24:46.219896623 Z\n

    用户名：\n

    名称: asdf\n

    地址：''\n

    电话：'+46709771430'\n

    确认令牌：\n

    确认时间：2013-04-16 11:24:00.000000000 Z\n

    确认发送时间：2013-04-16 10:31:14.000000000 Z\n

    failed_attempts: 4\n

    unlock_token: Nn6ZtD4zFMMRRYqbZV5u\n

    锁定时间：2013-04-16 11:24:46.214709086 Z\n"],

"jid"=>"4eb850367f8aec39032b8ee5",

"error_message"=>"执行已过期",

"error_class"=>"超时::错误",

"failed_at"=>"2013-04-16T11:25:16Z",

“重试计数”=>3，

“重试时间”=>2013-04-16 11:29:49 UTC}

2013-04-16T11:29:49Z 14364 TID-ows844wu8 警告：执行已过期

2013-04-16T11:29:49Z 14364 TID-ows844wu8 警告：/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/sendmail.rb： 56：在“关闭”中

/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/sendmail.rb:56:in `popen'

/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/sendmail.rb:56:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/sendmail.rb:52:in `deliver!'

/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'

/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in delivery'

/usr/local/lib/ruby/gems/1.9.1/gems/actionmailer-3.2.9/lib/action_mailer/base.rb:415:in `block in delivery_mail'

/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `block in instrument'

/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/notifications/instrumenter.rb:20:in `instrument'

/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/notifications.rb:123:in `instrument'

/usr/local/lib/ruby/gems/1.9.1/gems/actionmailer-3.2.9/lib/action_mailer/base.rb:413:in `deliver_mail'

/usr/local/lib/ruby/gems/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/extensions/action_mailer.rb:23:in `执行'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/processor.rb:43:in `block (3 levels) in process'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:79:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:79:in `block in invoke'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/server/timeout.rb:11:in `block in call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/server/timeout.rb:10:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:81:in `block in invoke'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/server/active_record.rb:6:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:81:in `block in invoke'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/server/retry_jobs.rb:49:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:81:in `block in invoke'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/logging.rb:22:in `with_context'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/server/logging.rb:7:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:81:in `block in invoke'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:84:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/middleware/chain.rb:84:in `invoke'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/processor.rb:42:in `block (2 levels) in process'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/processor.rb:77:in `stats'

/usr/local/lib/ruby/gems/1.9.1/gems/sidekiq-2.5.4/lib/sidekiq/processor.rb:41:in `block in process'

/usr/local/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/calls.rb:57:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/calls.rb:57:in `dispatch'

/usr/local/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/future.rb:18:in `block in initialize'

/usr/local/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/internal_pool.rb:48:in `call'

/usr/local/lib/ruby/gems/1.9.1/gems/celluloid-0.12.3/lib/celluloid/internal_pool.rb:48:in `block in create'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:25:36.203

答案在这里找到。简单的 FQDN 问题。

[https://serverfault.com/questions/58363/my-unqualified-host-name-foo-bar-unknown-problem](https://serverfault.com/questions/58363/my-unqualified-host-name-foo-bar-unknown-problem)

编辑我的 /ets/hosts ： 127.0.0.1 localhost.localdomain localhost

在终端中运行 $ hostname 以获取您的主机名。

# hibernate - 无法将实体与派生实体合并

> ID：16036118
> 
> 赞同：3
> 
> 时间：2013-04-16T11:42:35.933
> 
> 标签：hibernate, jakarta-ee, jpa, jpa-2.0, java-ee-6

我正在尝试使用@JoinedColumns 的派生实体，

让我告诉你我的代码，

下面是sql代码，

```
create table TBL_EMPLOYEE_FIVE(
   EMP_ID integer ,
   NAME varchar(50),
   COUNTRY varchar(50),
   MGR_ID integer,
   MGR_COUNTRY varchar(50),
   constraint PK_COMPOSIT_001AD primary key(EMP_ID,COUNTRY),
   constraint  FK_COMPO_00123 foreign key(MGR_ID,MGR_COUNTRY) references TBL_EMPLOYEE_FIVE
) 
```

这是映射实体的以下代码，

```
package com.entities.derived;
@Entity
@Table(name="TBL_EMPLOYEE_FIVE")
@IdClass(EmployeeId.class)
public class EmployeeOne implements Serializable{

// contructors    

@Id    
@Column(name="EMP_ID")    
private Integer employeeId;

@Id
@Column(name="COUNTRY")
private String empCountry;

@Column(name="NAME")
private String employeeName;

@ManyToOne( cascade= {CascadeType.PERSIST, CascadeType.PERSIST},
            fetch= FetchType.LAZY,
            targetEntity=EmployeeOne.class)
@JoinColumns({
            @JoinColumn(name="MGR_ID",referencedColumnName="EMP_ID"),
            @JoinColumn(name="MGR_COUNTRY",referencedColumnName="COUNTRY")
})
private EmployeeOne manager;

@OneToMany(cascade={CascadeType.PERSIST, CascadeType.PERSIST},mappedBy="manager")    
private Set<EmployeeOne> employees;

// getters, setters, hashcode and equals implementation
} 
```

这是下面的类 id 代码，

```
@Embeddable
public class EmployeeId implements Serializable{

public EmployeeId(){}

public EmployeeId(Integer employeeId,String empCountry){
    this.employeeId = employeeId;
    this.empCountry = empCountry;
}

private Integer employeeId;
private String empCountry;

// getters, hashcode and equals implementation

   } 
```

用 main 方法编写的代码在没有异常的情况下可以正常工作，如下所示，

对于坚持新员工，

```
private static int generateId(EntityManager em,String country)throws Exception{

    Query q = em.createQuery("select max(e.employeeId) from EmployeeOne e where e.empCountry = '"+country+"'");

    List list = q.getResultList();
    int count = 0;

    if(list != null && list.size() > 0){
         count = Integer.parseInt(String.valueOf((list.get(0) != null) ? list.get(0) : "0"));
    }

    count++;
    return count;
} 
```

插入新员工，

```
private static void insertEmployee2(EntityManager em) throws Exception{
    EmployeeOne manager = new EmployeeOne("Rajkumar Bahadur", "NEPAL");
    manager.setEmployeeId(generateId(em, manager.getEmpCountry()));
    Set<EmployeeOne> employees = new HashSet<EmployeeOne>();  

    int count = generateId(em, "FIJI");  

    employees.add(new EmployeeOne(count,"Okajima Fahim","FIJI",manager));
    employees.add(new EmployeeOne(++count,"Jabulani Xitwo","FIJI",manager));
    manager.setEmployees(employees);
    em.persist(manager);
} 
```

用于获取员工的是，

```
private static void getEmployees(EntityManager em) throws Exception{
    EmployeeOne manager = em.find(EmployeeOne.class, new EmployeeId(3,"CHINA"));

    Set<EmployeeOne> employees = manager.getEmployees();

    for(EmployeeOne emp : employees){

        System.out.println(emp);
    }
} 
```

以上所有方法都运行良好。

但是唯一不起作用的代码是合并，代码如下

```
private static void updateEmployee(EntityManager em) throws Exception{
    EmployeeOne manager = em.find(EmployeeOne.class, new EmployeeId(3,"CHINA"));          
    Set<EmployeeOne> employees = manager.getEmployees();
    int count = generateId(em, "IRAN");        
    employees.add(new EmployeeOne(count,"Zaid Khan","IRAN",manager));        
    employees.add(new EmployeeOne(++count,"Maqbool Ansari","IRAN",manager));        

    em.merge(manager);
} 
```

我得到的例外是，

```
javax.persistence.EntityNotFoundException: Unable to find com.entities.derived.EmployeeOne with id com.entities.derived.EmployeeId@226b19
    at org.hibernate.ejb.Ejb3Configuration$Ejb3EntityNotFoundDelegate.handleEntityNotFound(Ejb3Configuration.java:155)
at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:210)
at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:251)
at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148)
.... 
```

你能告诉我哪里出错了吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:48:16.257

改变

```
@ManyToOne( cascade= {CascadeType.PERSIST, CascadeType.PERSIST},
            fetch= FetchType.LAZY,
            targetEntity=EmployeeOne.class) 
```

至

```
@ManyToOne( cascade= {CascadeType.PERSIST, CascadeType.MERGE},
            fetch= FetchType.LAZY,
            targetEntity=EmployeeOne.class) 
```

* * *

当父级“更新”（合并）时，您需要级联 EmployeeOne 实例的创建。通过更改 @ManyToOne 注释以包含 CascadeType.MERGE，您应该可以实现这一点。

# testing - java的行为驱动开发——使用什么框架？

> ID：16036120
> 
> 赞同：31
> 
> 时间：2013-04-16T11:42:43.497
> 
> 标签：testing, bdd, spock, automated-tests, jbehave

对于正在进行的项目和改进我们的开发过程，我们考虑采用[TDD](https://en.wikipedia.org/wiki/Test-driven_development)作为开发理念。在研究最佳实践以及如何向我的同事/开发人员“推销”新方法时，我遇到了[BDD](https://en.wikipedia.org/wiki/Behavior-driven_development)，发现它更适合我们需要的东西，并且以某种方式成为 TDD 的下一次迭代。问题是到目前为止我只尝试了[Dan North](https://dannorth.net)开发的[工具](http://jbehave.org)，[JBehave](http://jbehave.org)我不能说我很惊讶。

设置在我看来很麻烦，我找不到非常合适的文档。另一方面，我也尝试过使用[groovy](https://github.com/spockframework)工具，到目前为止我还挺喜欢它的。

**问：**有什么合适的工具可用于 BDD？
**问：**你会改用 spock 来处理引入另一种语言的开销吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-17T09:56:38.037

行为驱动开发只是一种无需任何工具即可使用的技术。您可以只编写 BDD 风格的测试 - 例如，使用此方法启动测试方法`should`并引入一些单独的功能。`When`和`then`部分可以只用评论替换，例如

```
@Test
public void should_do_something() {
    // given
    Something something = getSomething();

    // when
    something.doSomething();
    // then 
    assertSomething();

    // when
    something.doSomethingElse();
    // then 
    assertSomethingElse();
} 
```

我对上述框架的看法：

*   [JBehave](http://jbehave.org/)的问题在于测试看起来像一艘复杂的宇宙飞船。另一方面，它对您的规格有很好的输出。

*   [spock](https://github.com/spockframework)真的很酷。紧凑的语法，漂亮的输出，很多功能，用强大的 groovy 语言编写，这意味着可以与[geb](http://www.gebish.org/)结合使用。**但**它很时髦，对某人来说可能非常重要。

*   [scalatest](http://www.scalatest.org/)（用 scala 编写）和[easyb](http://easyb.org/)（用 groovy 编写）都具有与 spock 相同的缺点。“...应该...”和“Given...Then”表示法。规范在 .story 文件中，步骤实现在 Java 类中。这种方法非常适合作为定义规范的协作和通信工具，但通常对于低级编码来说开销太大。

我还认为最成功的 Java BDD 框架是那些不是用 Java 编写的，因为 Java 语言没有 Groovy 或 Scala 那样的 DSL（领域特定语言）创建灵活性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-09T17:48:36.580

作为[JGiven](http://jgiven.org)的作者，我不同意 Java 没有足够的灵活性来创建 DSL。在 JGiven 中，BDD 测试如下所示：

```
@Test
public void users_can_login {
    given()
       .a_registered_user()
       .and().the_login_page_is_shown();

    when()
       .the_user_enters_correct_credentials()
       .and().the_login_button_is_pressed();

    then()
       .the_welcome_page_is_shown();
} 
```

JGiven 与 JUnit 或 TestNg 一起使用，您可以用纯 Java 编写测试。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-01-28T21:34:55.293

Unless your product owner/qa/customer need to be able to read the tests, use [Spock](https://github.com/spockframework). It is very simple tool, but improves readability of tests. Thanks to it's powerful features you don't need Mockito, Hamcrest nor AssertJ. And it has superb parametrized tests. In fact, it is "just" a better JUnit - a general tool for automated execution of simple tasks, be it unit tests, integration tests or acceptance tests.

Fearing Groovy? Why? It is very similar to java. The more you learn it, the more expressive and shorter your code is. Your tests will be shorter and more readable. Groovy is gateway drug to the better side of JVM.

Don't like dynamic languages? Well, it is **tests**, and tests are run by CI server after **every commit**, right? If your code breaks, you will know it after few minutes. Don't have CI server or not running tests regularly? Then don't bother with choosing a test framework and go fix your process. Broken tests are useless and if you don't run the tests regularly, they will break soon.

Go with JBehave/Cucumber if you need it; Otherwise, use Spock.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-26T11:01:04.253

另一种选择是 Spectrum - 请参阅[https://github.com/greghaskins/spectrum](https://github.com/greghaskins/spectrum)

Spectrum 支持 RSpec/Mocha 语法，并且在其下一个版本中还将支持 Gherkin 语法，以及 JUnit 规则集成（因此它通过`@Rule`and`@ClassRule`成员与 Mockito、Spring 等进行互操作）。

*全面披露——我是这个操作系统项目的贡献者*

例子：

```
@RunWith(Spectrum.class)
public class TestSomething {{
    Supplier<Something> freshTestObject = let(Something::new);

    describe("The component", () -> {
        it("is tested by specs", () -> {
            // the "let` above gives us a new instance of the object
            // in each spec
            freshTestObject.get().doSomething();

            // using your favourite assertion framework
            assertThat(something.get().getSomething()).isEqualTo(42);
        });
    });
}} 
```

Spectrum 在您的 JUnit 控制台中输出分层测试结果。它的优势在于将规范执行的 Java 实现与规范定义混合在一起——这比依赖特性文件和粘合代码来解析它们的框架更直接，特别是如果需要从一个步骤传递结果的测试给另一个。

Spectrum 的目标是多语言，因此对几个现有框架的用户来说应该很熟悉。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-17T03:22:44.503

[试试](https://github.com/paulcwarren/ginkgo4j)Ginkgo4j 。它使用 Java 8 的 lamda 来反映 Ruby 的 RSpec 和 Go 的 Ginkgo 使用的方法。

该库允许您构建富有表现力的、内容丰富的测试。

```

```
package com.github.paulcwarren.ginkgo4j.examples;

import static com.github.paulcwarren.ginkgo4j.Ginkgo4jDSL.*;
import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.MatcherAssert.assertThat;

import org.junit.runner.RunWith;

import com.github.paulcwarren.ginkgo4j.Ginkgo4jRunner;

@RunWith(Ginkgo4jRunner.class)
public class BookTests {
    private Book longBook;
    private Book shortBook;
    {
        Describe("Book", () -> {
            BeforeEach(() -> {
                longBook = new Book("Les Miserables", "Victor Hugo", 1488);
                shortBook = new Book("Fox In Socks", "Dr. Seuss", 24);
       });

       Context("Categorizing book length", () -> {
           Context("With more than 300 pages", () -> {
               It("should be a novel", () -> {
                   assertThat(longBook.categoryByLength(), is("NOVEL"));
               });
           });

           Context("With fewer than 300 pages", () -> {
               It("should be a short story", () -> {
                   assertThat(shortBook.categoryByLength(), is("NOVELLA"));
              });
           });
       });
       });
     }
} 
```

```

也支持Spring。

（完全披露。我是这个库的作者）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-17T07:00:15.567

很好的讨论！我不知道 JGiven，但我会看看它。

此外，我是[COLA Tests](http://bmsantos.github.io/cola-maven-plugin)的作者，这是一个支持完整 gherkin 语法（与 Cucumber 完全相同）的新框架，它非常容易设置，特别是与 JBehave 相比并且不需要 JUnit runner。

基本上只需使用您已经习惯的任何库！

这是一个示例 Spring Controller 测试（可以从文件中加载故事）：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(classes = { WebAppContext.class })
public class HelloWorldControllerTest extends BaseColaTest {

    private final String stories =
        "Feature: Introduce REST endpoint\n"
            + "Scenario: Should say hello\n"
            + "Given a web endpoint\n"
            + "When hit by a get request\n"
            + "Then the HTTP status will be OK\n"
            + "And the body will say hello world";

    @Resource
    private WebApplicationContext webApplicationContext;
    private MockMvc mockMvc;
    private ResultActions result;

    @Given("a web endpoint")
    public void given() {
        mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();
    }

    @When("hit by a get request")
    public void when() throws Exception {
        result = mockMvc.perform(get("/helloWorld"));
    }

    @Then("the HTTP status will be OK")
    public void thenOk() throws Exception {
        result.andExpect(status().isOk());
    }

    @Then("the body will say hello world")
    public void thenHello() throws Exception {
        result.andExpect(content().string("Hello World!"));
    }
} 
```

# matlab - 排序数组（重复数据、0 值和 NaN）

> ID：16036124
> 
> 赞同：2
> 
> 时间：2013-04-16T11:42:48.903
> 
> 标签：matlab, duplicates, unique

早安/午安~~

我必须对以下数组进行排序，并用 0 替换一些值。

```
A=[9 NaN 7 7 7 7 NaN 7 7 7 7 NaN 9 9 9 NaN 4 4 4 4 NaN ] 

% The output should be>>> 

A=[9 NaN 7 0 0 0 NaN 7 0 0 0 NaN 9 0 0 NaN 4 0 0 0 NaN ] 
```

通过使用 unique() 函数，第二个 NaN 之后的 7 和第三个 NaN 之后的 9 将被 0 替换。所以我只能得到结果：

```
[c, ia] =  unique(A, 'first');
t = A;
t(iA) =0;
A = A-t;

A=[9 NaN 7 0 0 0 NaN 0 0 0 0 NaN 0 0 0 NaN 4 0 0 0 NaN ] 
```

我该如何解决这个问题？

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:50:41.927

蛮力呢？

```
% Data
A_in = [9 NaN 7 7 7 7 NaN 7 7 7 7 NaN 9 9 9 NaN 4 4 4 4 NaN]; 

% Processing
A_out = zeros(size(A_in));
prev_char = [];
for ii=1:numel(A_in), 
    if A_in(ii)==prev_char
        A_out(ii)=0;
    else
        A_out(ii)=A_in(ii);
    end
    prev_char = A_in(ii);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:54:32.073

矢量化解决方案：

```
% Flip A (or you will zero out every one in the sequence except the last one)
B      = A(end:-1:1);
dfB    = diff(B);
idx    = ~isnan(dfB);
B(idx) = dfB(idx);

% Flip back into A
A = B(end:-1:1) 
```

**编辑** 不创建 B，有点晦涩：

```
dfA = diff(A(end:-1:1));
A([false ~isnan(dfA(end:-1:1))]) = 0 
```

# php - 如何测试每一行都抛出相同的异常？

> ID：16036128
> 
> 赞同：2
> 
> 时间：2013-04-16T11:43:01.477
> 
> 标签：php, unit-testing, phpunit

我想测试我的函数是否拒绝所有非正整数。它抛出一个 InvalidArgumentException。我写了一个这样的测试：

```
/**
 * @test
 * @expectedException InvalidArgumentException
 */
public function testXThrowsException()
{
    $this->parser->x(1.5);
    $this->parser->x('2');
    $this->parser->x(1000E-1);
    $this->parser->x(+100);
} 
```

我的测试总是通过，因为第一个抛出异常。其他人没有得到适当的测试。我可以添加`$this->parser->x(1);`到我的代码中，它仍然会通过。

我应该怎么做才能断言所有这些函数调用都会引发 InvalidArgumentException？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:01:16.800

```
/**
 * @test
 * @expectedException InvalidArgumentException
 *
 * @dataProvider foo
 */
public function testXThrowsException($value)
{
    $this->parser->x($value);
}

/**
 * Test data
 * Returns array of arrays, each inner array is used in
 * a call_user_func_array (or similar) construction
 */
public function foo()
{
    return array(
        array(1.5),
        array('2'),
        array(1000E-1),
        array(+100)
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:48:50.857

一个解决方案是像这样使用它：

```
/**
 * @test
 */
public function testXThrowsException()
{
    try {
        $this->parser->x(1.5);
        $this->fail('message');
    } catch (InvalidArgumentException $e) {}
    try {
        $this->parser->x('2');
        $this->fail('message');
    } catch (InvalidArgumentException $e) {}
    try {
        $this->parser->x(1000E-1);
        $this->fail('message');
    } catch (InvalidArgumentException $e) {}
    try {
        $this->parser->x(+100);
        $this->fail('message');
    } catch (InvalidArgumentException $e) {}

} 
```

现在您可以单独测试每一行。只要方法`x()`没有引发异常，测试就会失败，*使用*`fail()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:03:34.333

如果您有很多负值，您也可以将它们放在一个数组中，并使用以下代码循环该数组（无需测试）：

```
foreach($wrongValueArray as $failtyValue) { 
  try { $this->parser->x($failtyValue); 
      this->fail($failtyValue . ' was correct while it should not'); 
  } catch (InvalidArgumentException $e) {} 
} 
```

它有点短

# r - 具有固定参数和的 R 优化

> ID：16036131
> 
> 赞同：2
> 
> 时间：2013-04-16T11:43:15.653
> 
> 标签：r, optimization, parameters, sum, fixed

我想优化一个函数，参数总和设置为 1 这里有函数

```
varxyz<-function(param){
a<-param[1]
b<-param[2]
c<-param[3]
a^2*matcov[1,1]+b^2*matcov[2,2]+c^2*matcov[3,3]+2*a*b*matcov[1,2]+2*a*c*matcov[1,3]+2*b*c*matcov[2,3]   
}  

parammv <- optim(c(0.3,0.3,0.4),varxyz,method="L-BFGS-B",lower=c(0.1,0.1,0.1)) 
```

其中 matcov 是协方差矩阵

如何将三个参数的总和设置为 1？感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:46:04.497

由于它是二次优化问题，您可以使用`quadprog`.

```
# Sample data
n <- 3
matcov <- var(matrix(rnorm(2*n^2),2*n,n))

library(quadprog)
solve.QP(matcov, rep(0,n), matrix(1,nc=1,nr=n), 1, meq=1)

# With lower- and upper-bound constraints:
solve.QP(
  matcov, rep(0,n), 
  cbind( 
    rep(1,n),  # Equality constraint
    diag(n),   # Lower bound constraint
    -diag(n)   # Upper bound constraint
  ),
  c(
    1,         # Equality constraint RHS
    rep(.1,n), # Lower bound
    rep(-1,n)  # - Upper bound
  ),
  meq = 1      # The first constraint is an equality
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:33:41.997

使用@baptiste 的建议并通过以下方式将最小值施加到`c`（0.1）`ifelse`：

```
matcov <- var(matrix(rnorm(12),4,3))
varxyz<-function(param){
 a<-param[1]
 b<-param[2]
 c<-1-(a+b)
 ifelse(c >= 0.1,a^2*matcov[1,1]+b^2*matcov[2,2]+c^2*matcov[3,3]+2*a*b*matcov[1,2]+2*a*c*matcov[1,3]+2*b*c*matcov[2,3],-Inf)
}  

parammv <- optim(c(0.3,0.3),varxyz,method="L-BFGS-B",lower=c(0.1,0.1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:41:41.923

尝试这个

```
proj <- function(x) x / sum(x)

varxyz <- function(param) {
   param <- proj(param)
   ... rest of function as it is now ...
} 
```

执行优化后应用于`proj`解决方案`optim`以得到答案。

您可能还想查看`spg`BB 包中的函数，因为它本机支持投影。

# iphone - 完整和精简版应用程序的精简版价值

> ID：16036132
> 
> 赞同：0
> 
> 时间：2013-04-16T11:43:15.757
> 
> 标签：iphone, ios, ipad, in-app-purchase

我有一个具有完整版和精简版（包括应用内购买）的应用程序，问题是当我购买应用程序时，精简版会加载所有完整的东西，但是当我关闭应用程序并再次打开它时，它不加载完整的菜单和所有的东西，包括完整版本。当我正在修改其他人所做的代码时，我不太了解如何设置一些东西（如级别、图标或购买应用程序所做的特殊事情）以不出现在精简版上，但完全可以。

我在应用程序委托中找到了这个：

```
-(void)setLite:(bool)value
{
    lite = value;
    [self saveUserDefaults];
}

-(void)loadUserDefaults
{
    NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];

    if(prefs)
    {
        wasExecuted = [[prefs objectForKey:@"wasExecuted"] boolValue];
        lite = [[prefs objectForKey:@"lite"] boolValue];

        if(!wasExecuted)
            lite = YES;
//        if(wasExecuted)
//            lite = NO;
    }
}

-(void)saveUserDefaults
{
    NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];

    if(prefs)
    {
        [prefs setObject:[NSNumber numberWithBool:executed] forKey:@"executed"];
        [prefs setObject:[NSNumber numberWithBool:lite] forKey:@"lite"];
    }
} 
```

这就是它在交换机上的使用方式（例如）：

```
case 7:
            if(appDelegate.lite)
            {                
                [self showSubInfo:@"xxxxx.png" btnClosePos:CGPointMake(0, 0)];
//                [self xxxxxlite];
            }
            else
            {
                NSLog(@"xxxx");
                storyBoardPage7 *xxxxx = [[xxxxx alloc]init];
                xxxx.modalTransitionStyle = MODAL_TRANSITION_STYLE;
                [rootViewController xxxx animated:YES];
                [xxxx release];
            } 
```

这是 IAP 成功时触发的方法：

```
-(void) changeMenuToFull {
    NSLog(@"Buy complete");

    [appDelegate setLite:NO];

       [self removeLiteMenu];
       [self loadFullMenu];
} 
```

但我不知道为什么它在关闭菜单时不保存菜单...

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:19:11.573

这就是代码的样子：

```
-(void)setLite:(bool)value
{
    lite = value;
    [self saveUserDefaults];
}

-(void)loadUserDefaults
{
    NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];

    if(prefs)
    {
        wasExecuted = [[prefs objectForKey:@"wasExecuted"] boolValue];
        lite = [[prefs objectForKey:@"lite"] boolValue];

        if(!wasExecuted)
            lite = YES;
//        if(wasExecuted)
//            lite = NO;
    }
}

-(void)saveUserDefaults
{
    NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];

    if(prefs)
    {
        [prefs setObject:[NSNumber numberWithBool:executed] forKey:@"wasExecuted"];
        [prefs setObject:[NSNumber numberWithBool:lite] forKey:@"lite"];
        [prefs synchronize];
    }
} 
```

现在，如果 lite 在用户默认值中设置为 YES，则在您调用 loadUserDefaults 后它将为 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:08:52.933

看起来开发人员正在用户默认值中保存一个布尔值，以确定是否加载精简版或完整版。

我看到的唯一可能与此代码有关的问题`wasExecuted`是正在返回，`NO`这就是`lite`设置为的原因`YES`，因此正在加载精简版。

完成 IAP 并重新打开应用程序后，您能否检查 wasExecuted 的值是多少？

# clearcase - 搜索未在 clearcase 中开发发布的标记更改

> ID：16036135
> 
> 赞同：1
> 
> 时间：2013-04-16T11:43:22.240
> 
> 标签：clearcase

我有一个带有 4 个标签的 VOB。其中 3 个是`dev-released`.
我想要一个命令，它只会为我提供第四个标签的更改文件，即尚未更改的文件`dev-released`。

我尝试了以下命令：

```
cleartool find . -version lbtype(LABEL_NAME) -print 
```

但这给了我所有在该 VOB 中标记的文件，无论它们是否`dev-released`存在。

请任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:59:31.573

您首先需要找到以下所有版本：

*   有正确的标签
*   有正确的属性

那将是一个类似于以下内容的查询：

```
cleartool find . -type f -version "lbtype(LABEL_NAME) && yourAttribute=\"dev-released\"" -print 
```

将“ `yourAttribute`”替换为具有“”值的属性的名称`dev-released`。

[您可以在技术说明“列出应用了特定属性的元素版本](http://www-01.ibm.com/support/docview.wss?uid=swg21226503)”中查看其他示例。

If`dev-released`不是属性值，而是属性*类型*：

```
cleartool find . -type f -version "lbtype(LABEL_NAME) && attype(dev-released)" -print 
```

* * *

> 我如何找出标签的属性和属性类型

这可以解释为找到应用于*标记*版本的属性：

窗口语法：

```
cleartool find . -type f -version "lbtype(LABEL_NAME)" -exec "cleartool descr -aattr -all \"%CLEARCASE_XPN%\"" 
```

# lisp - 寻求对 SICP 练习 1.5 的一些解释

> ID：16036139
> 
> 赞同：11
> 
> 时间：2013-04-16T11:43:33.030
> 
> 标签：lisp, scheme, sicp

这个问题可以在[这里](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-10.html#%_thm_1.5)找到。

在书中，我发现对正常订单评估的一种描述是：

“另一种评估模型在需要操作数的值之前不会评估操作数。相反，它会首先用操作数表达式替换参数，直到它获得仅包含原始运算符的表达式，然后执行评估。”

我还找到了另一个简短的描述：“完全扩展然后减少”。

在练习中，我认为 of 的定义`p`类似于`(lambda () (p))`，它永远不会扩展为原始运算符，因此永远不会终止。

然而，另一方面，在谷歌搜索这个问题的一些答案之后，似乎正常的订单评估应该终止，因为它只根据需要评估事情，实际上`(p)`不会被评估。

所以我认为“扩展”和“评估”之间肯定有一些区别，而解释器在这里所​​做的就是评估事物。

到底有什么区别，还是我错过了一些要点？

另一个问题：我应该说“`(p)`被评估为`(p)`”还是“`(p)`被扩展为`(p)`”？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T01:05:48.283

你是对的，如果要求评估，应用顺序评估器不会终止`(p)`。但是，手头的问题提到`if`具有特定的评估语义，该语义由应用程序和正常顺序评估器共享。具体来说，“假设无论解释器使用正常顺序还是应用顺序，特殊形式 if 的评估规则都是相同的：首先评估谓词表达式，结果决定是评估结果表达式还是替代表达式。”

练习的代码是

```
(define (p) (p))

(define (test x y)
  (if (= x 0)
    0
    y)) 
```

并且正在考虑的测试是

```
(test 0 (p)) 
```

正常顺序评估是“完全扩展然后减少”选项。在正序评估下，`(test 0 (p))` 完全展开为

```
(test 0 (p)) ==
(if (= 0 0)
  0
  (p)) 
```

由于`if`具有上述语义，且展开式中的测试条件为`(= 0 0)`，为真，正序求值器决定求值后件，即`0`，所以表达式的值为`0`。

然而，使用应用顺序求值，求值的第一步`(test 0 (p))`是求值表达式`test`,`0`和`(p)`，然后用求值和产生的值调用^(（*“应用”*，因此*“应用”*）)的值。由于 的评估不会完成，的评估也不会完成。`test``0``(p)``(p)``(test 0 (p))`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T14:27:00.067

在正常的评估规则下，`(p)`将通过调用`p`不带参数的函数来评估。例如（在 Common Lisp 中）：

```
> (defun p ()
    5)
  => P
> (p)
  => 5 
```

您的问题首先提到了一种称为“惰性评估”的东西。Common Lisp 默认不这样做；它从左到右评估函数的所有参数。Scheme 没有指定它们被评估的顺序，只是它们将被指定。

然而，在可以评估事物之前，它们需要被扩展（这可能意味着 lisp 中的许多事物），这使 lisp 能够控制评估顺序。例如，`p`可能是一个宏。在这种情况下，正常的评估规则不一定适用。同样，在 Common Lisp 中：

```
> (defmacro p ()
    (print "I'm being expanded!") ; print on expansion
    (terpri) ; new line.
    `(progn (print "I'm being evaluated!") ; print on evaluation
            (terpri)
            5))
  => P 
```

这进入读取评估打印循环。表达式被读取，然后展开，评估，然后打印。

```
> (p)
  I'm being expanded!
  I'm being evaluated!
  => 5 
```

为了停止评估扩展，让我们把它放在一个 lambda 中。您会注意到它仍然打印扩展消息。

```
> (defvar foo (lambda () (p)))
  I'm being expanded!
  => COMPILED FUNCTION #<LAMBDA> 
```

现在我们调用它，并对表单进行评估。

```
> (funcall foo) ; call the function 
  I'm being evaluated!
  => 5 
```

您可以自行扩展宏调用。

```
> (macroexpand-1 '(lambda () (p)))
  I'm being expanded!
  => (lambda () (progn (print "I'm being evaluated!")
                       (terpri)
                       5)) 
```

Haskell 等语言默认具有惰性求值。在您引用的段落中，SICP 让您想象了一个懒惰的 lisp 版本。为了让这样一个 lisp 工作，并且只评估需要的东西，它不仅需要盲目地扩展和评估所有东西，直到它达到一个值（参见 SICP 中对替换模型的讨论），而是仅仅扩展事物和仅在特别要求其值时才评估事物。`P`您可以将其与上面的示例进行比较，在该示例中，我们在 lambda 表达式的主体中扩展了宏，`FUNCALL`在我们想要值的时候强制进行评估。稍后在 SICP 中，您将使用类似的技术来实现惰性列表。

正如我所说，Haskell 会自动完成这类事情，不难想象一个 lisp 会做同样的事情（尽管目前还没有流行的）。考虑到书中的实际问题，我想我有点切题了，但希望你对如何判断评估的内容和时间以及它可以产生的影响有所了解。

# c# - 高度可并行化的 Levenstein 距离算法

> ID：16036140
> 
> 赞同：2
> 
> 时间：2013-04-16T11:43:37.013
> 
> 标签：c#, .net, algorithm, math, parallel-processing

我实际上必须实现一个字符串比较，最后得到一个匹配百分比（不仅仅是布尔结果匹配/不匹配）。所以，为了做到这一点，我找到了 Levenstein 距离算法。但现在的问题在于性能。例如，我有 1k 个字符串要相互比较，现在大约需要 10 分钟。对于每个我已经并行调用算法，并且在每个算法中再次并行完成。所以我用了伪语言：

```
Foreach strings
    Call in parallel the comparaison method. 
```

内比较法

```
Foreach stringsToCompare
    Call in parallel the Levenstein Distance algo. 
```

在 i5 @ 2.6Ghz 上以 100% 的 CPU 使用率仍然需要 10 分钟...

这是我的实现

```
public static double GetSimilarity(string firstString, string secondString)
{
    if (ReferenceEquals(firstString, null)) throw new ArgumentNullException("firstString");
    if (ReferenceEquals(secondString, null)) throw new ArgumentNullException("secondString");
    if (firstString == secondString) return 100;

    return (1 - GetLevensteinDistance(firstString, secondString) / (double)Math.Max(firstString.Length, secondString.Length)) * 100;
}

private static int GetLevensteinDistance(string firstString, string secondString)
{
    if (ReferenceEquals(firstString, null)) throw new ArgumentNullException("firstString");
    if (ReferenceEquals(secondString, null)) throw new ArgumentNullException("secondString");
    if (firstString == secondString) return 1;

    int[,] matrix = new int[firstString.Length + 1, secondString.Length + 1];

    for (int i = 0; i <= firstString.Length; i++)
        matrix[i, 0] = i; // deletion
    for (int j = 0; j <= secondString.Length; j++)
        matrix[0, j] = j; // insertion

    for (int i = 0; i < firstString.Length; i++)
        for (int j = 0; j < secondString.Length; j++)
            if (firstString[i] == secondString[j])
                matrix[i + 1, j + 1] = matrix[i, j];
            else
            {
                matrix[i + 1, j + 1] = Math.Min(matrix[i, j + 1] + 1, matrix[i + 1, j] + 1); //deletion or insertion
                matrix[i + 1, j + 1] = Math.Min(matrix[i + 1, j + 1], matrix[i, j] + 1); //substitution
            }
    return matrix[firstString.Length, secondString.Length];
} 
```

那么您是否知道类似的算法，它可能更适合长文本比较或高度可并行化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:50:01.427

您实际上在做的是使用[Needleman-Wunsch](http://en.wikipedia.org/wiki/Needleman%E2%80%93Wunsch_algorithm) (NW) 算法，对吗？
NW 算法基于计算 DP 矩阵，其中每个字段取决于 3 个相邻字段：左侧、左上角和顶部。因此，它通常是逐行解决的。
但是，如果您想并行化它，那么最常见的想法之一是通过对角线求解 DP 矩阵。这样，您可以独立计算反对角线中的每个字段。

这就是您的函数 getLevensetinDistance 现在的工作方式：您逐行计算，这意味着您必须逐个字段计算并且不可能进行并行化，如图所示：

![在此处输入图像描述](https://i.stack.imgur.com/fwjTk.png)

您需要更改您的函数 getLevesteinDistance 以便能够并行化它。这是我之前描述的对角线思想的图片，其中对角线中的每个字段都可以独立计算，这意味着您可以进行并行化（可以并行计算具有相同数量的字段）：

![在此处输入图像描述](https://i.stack.imgur.com/PfcoL.png)

你能解释一下如何并行调用你的算法吗？由于您的函数 getLevensteinDistance() 接受两个字符串，除非比较多对字符串，否则我认为并行调用它没有任何意义，但是您已经提到您为此并行调用函数 compare()。

顺便说一句，它应该是 Levenshtein，而不是 Levenstein :)。

此外，我实际上最终为 Levenshtein 距离实现了一个 C/C++ 库，它是最长字符串的最快实现之一，您可以在这里查看：[https](https://github.com/Martinsos/edlib) ://github.com/Martinsos/edlib - 也许这是一个更好的选择比实现你自己的，虽然它只适用于一个线程（但你可以自己在多个线程上运行它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:05:42.173

我发现了一个名为 SimMetrics 的 supa dupa 库，其中包含许多相似性算法的实现，当我对它们进行基准测试时，在我的案例中会有一些很棒且有用的更快。

如果你也有兴趣：http: [//sourceforge.net/projects/simmetrics/](http://sourceforge.net/projects/simmetrics/)

# windows-8 - 当网络连接从 4G 切换到 3G 或从 3G 切换到 2G 时，如何避免 Metro 应用程序中的网络（互联网）连接中断？

> ID：16036141
> 
> 赞同：0
> 
> 时间：2013-04-16T11:43:36.767
> 
> 标签：windows-8, microsoft-metro

嗨，我正在开发一个地铁应用程序，在其中我正在访问服务以从服务中获取一些数据，在那一刻，如果网络连接从 4G 切换到 3G 或从 3G 切换到 2G，则该过程会中断并停止。我怎样才能避免这种情况。

1）从4G切换到3G或从3G切换到2G，访问服务时如何避免网络连接中断？

2）我可以通过哪些方式做到这一点？

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:18:25.883

1.  如果确实有中断，您将无法避免中断

2.  你可以建立一个网桥来改善你的场景[http://windows.microsoft.com/is-is/windows-vista/create-a-network-bridge](http://windows.microsoft.com/is-is/windows-vista/create-a-network-bridge) 使用这个方法，你可以有一个不直接相关的IP地址到您当前的连接。切换过程中网络连接会松动，但应用程序不应该意识到这一点。当然，如果您在切换期间正在下载某些内容，则套接字将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:30:58.820

需要使用 NetworkStatusChanged 事件并实现适合您的应用程序的正确行为。 [推荐的应用行为](http://msdn.microsoft.com/en-us/library/windows/apps/hh700376.aspx)记录在 msdn。

# php - 检查登录表单并使用 jquery 和 php 显示错误消息

> ID：16036142
> 
> 赞同：0
> 
> 时间：2013-04-16T11:43:42.480
> 
> 标签：php, javascript, jquery, ajax

我正在尝试检查使用 jquery 和 php 提交的表单。我正在向服务器发出 .ajax 请求，以验证数据是否已输入到表单中，并根据服务器的回调响应执行不同的操作。例如，如果未输入名字或未输入姓氏，则显示错误消息。

问题是，当两者都没有输入时，回调返回的消息名和姓一起没有显示错误消息。

```
 // JavaScript Document
        $(function(){
            $("#form").submit(function(event){
                $("#name_alert").css("display,none");
                event.preventDefault();
                  $.ajax({
                      url:'functions/register_user.php',
                      type:"POST",
                      data:$(this).serialize(),
                      success:function(data){  
                           if(data=='true') 
                                {  
                                    $("#form").effect("shake", {times:2}, 600); 
                                    $("#alert").fadeIn("slow");
                                    $("#note").fadeIn("slow").html('<strong>ERROR</strong>: Your details were incorrect.');  
                                }
                            if(data=='name'){
                                    $("#name_alert").fadeIn("fast").effect("shake", {times:1}, 600);
                                    $("#name_note").html('<strong>ERROR</strong>: Your first name must be in the range
                                     of 2 to 20 characters long.'); 
                                }
                            if(data=='surname'){
                                    $("#surname_alert").fadeIn("fast").effect("shake", {times:1}, 600);
                                    $("#surname_note").html('<strong>ERROR</strong>: Your surname must be in the range
                                     of 2 to 20 characters long.'); 
                                }
                            else { 
                                    $("#name_alert").fadeOut("fast");
                                    $("#note").html('<strong>PERFECT</strong>: You may proceed. Good times.');  
                                    }  
                              }  
                        });
            });
        }); 
```

服务器端代码检查表单中的字段是否为空，并回显相应的消息，如名字或姓氏。之后 jquery 根据服务器的输出显示正确的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:54:20.953

这是如何完成的示例。我试图保持简单：

服务器端响应示例：

```
// If the posted value was left empty or not received return an error in json format.
If ( empty($_POST['value']) )
{
    echo json_encode(
         array('status' => false, 'error' => 'The value cannot be left empty'));
    return true;
} 
```

客户端ajax示例：

```
$.ajax({
    url: "/url/to/your/script",
    type: "POST",
    data: 'your=data',
    dataType: "json",
    success: function(reply){
        // If the reply.status is false, show the error status message
        if( !reply.status ){
            alert( reply.error );
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:33:10.460

您目前对以下情况进行错误检查：

1.  如果返回的数据为“真”。
2.  如果返回的数据是“名称”。
3.  如果返回的数据是“姓氏”，并带有一条表示数据完美的 else 语句。

这些问题是： 没有检查是否同时返回了姓和名。其次，返回数据是否完美的 else 语句附加到 if (data == 'surname') 上，这意味着如果姓氏没有问题，它将返回完美。

```
if (data == 'true') {
    $("#form").effect("shake", {times:2}, 600); 
    $("#alert").fadeIn("slow");
    $("#note").fadeIn("slow").html('<strong>ERROR</strong>: Your details were incorrect.');  
} else if (data == 'name') {
    $("#name_alert").fadeIn("fast").effect("shake", {times:1}, 600);
    $("#name_note").html('<strong>ERROR</strong>: Your first name must be in the range of 2 to 20 characters long.'); 
} else if (data == 'surname') {
    $("#surname_alert").fadeIn("fast").effect("shake", {times:1}, 600);
    $("#surname_note").html('<strong>ERROR</strong>: Your surname must be in the range of 2 to 20 characters long.'); 
} else if (data == 'namesurname') {
    $("#name_alert").fadeIn("fast").effect("shake", {times:1}, 600);
    $("#name_note").html('<strong>ERROR</strong>: Your first name must be in the range of 2 to 20 characters long.');
    $("#surname_alert").fadeIn("fast").effect("shake", {times:1}, 600);
    $("#surname_note").html('<strong>ERROR</strong>: Your surname must be in the range of 2 to 20 characters long.');
} else { 
    $("#name_alert").fadeOut("fast");
    $("#note").html('<strong>PERFECT</strong>: You may proceed. Good times.');  
} 
```

如果您正在检查确切的值，最好使用`else if`which 将执行下一个 if 语句，仅当它之前的语句为 false 时。这将通过 if 语句起作用，如果它们不完全匹配，则继续进行下一个。根据您对该问题的评论，如果姓名和姓氏都不正确，则返回值是“namesurname”，这是第 4 个 if 语句。

如果的目的`if (data == 'true')`是测试是否有数据返回，你应该改变布局是这样的：

```
if (data.length < 0) {
    // If statements to check if data is 'name', 'surname' or 'namesurname'
} else {
    //Data is perfect.
} 
```

这将检查返回的数据的长度是否大于 0（不是空字符串），然后检查以将其与值匹配。

另一种选择是在提交表单之前检查它，而不是浪费时间将其发送到服务器，因为您可以判断它是错误的。这可以通过`.length`函数（简单）或正则表达式（不是那么多，对于这样的事情，矫枉过正）来完成。

例如

```
if ($('#firstnameInputField').val().length < 2 || $('#firstnameInputField').val().length > 20) {
    // first name is invalid since length is less than 2 or greater than 20
} 
```

这可以放在一个事件或函数中，只要您想实际检查数据，就可以调用它。

# c# - Kinect 中的握持控制

> ID：16036144
> 
> 赞同：2
> 
> 时间：2013-04-16T11:43:49.330
> 
> 标签：c#, kinect, kinect-sdk, kinect.toolbox

我想在 Kinect 中使用握持控制。我在 Kinect sdk 中找不到与握持控制相关的资源。

Kinect sdk 是否为识别握持动作提供内置支持，还是我们必须自己编写？

Kinect 中是否有任何可用于握持控制的开源示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:57:17.740

适用于 Windows SDK v1.7 的 Kinect 为最多四只手同时引入了握把识别，其中包括 WPF 的新控件。

如果您还没有使用它，我建议您下载该版本的 SDK，并查看文档以了解其用法和功能的详细信息。

[来源：kinectingforwindows.com](http://www.kinectingforwindows.com/2013/03/18/introducting-kinect-for-windows-sdk-v1-7/)
[来源：blog.msdn.com](http://blogs.msdn.com/b/kinectforwindows/archive/2013/03/18/the-latest-kinect-for-windows-sdk-is-here.aspx)

# c# - 我的这种设计WPF UI的方法对吗？

> ID：16036147
> 
> 赞同：4
> 
> 时间：2013-04-16T11:44:02.220
> 
> 标签：c#, wpf

首先让我声明一下，是的，这里有大量与“分辨率无关的 C# WPF 布局”相关的问题。我的问题与此没有直接关系，我已经阅读了其中的大部分内容，并阅读了几个教程。

**目标：**

由于我对 WPF 还很陌生，我的目标是有一种清晰的方法来设计一个复杂、逼真的 GUI，它独立于屏幕分辨率，并随着用户调整窗口大小而适当地缩放。

**混乱的原因：**

我对许多教程和 stackoverflow 帖子建议的大量选项感到非常困惑，使用 Viewbox、液体布局、相对布局、使用不同类型的容器，以及 WPF 在设计上应该独立于分辨率的事实。

**问题：**

我没有任何开始辩论的意图，我知道 SO 不是为了那个。我只是想知道我计划用来设计我的真实 GUI 的这个过程是否正确。

1 > 在 Illustrator 中设计模型（或直接在 Blend 中，我不确定应该使用哪个）

2 > 在 WPF 中通过拖放设计复制它，同时使用（还不知道是哪个）布局设计 1024 x 768 分辨率

3 > 当我的用户启动我的应用程序时，通过做一些数学来获取屏幕大小并调整每个控件的大小（Yukh！这真的是我必须这样做的吗？WPF 独立于分辨率的意义何在，那不是真正的拖动和下降设计是什么？）

我的大多数应用程序都是数据库驱动的数据输入和操作表单。我是否使用了行业中常见的正确策略，还是我遗漏了什么？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T12:04:00.827

WPF 如此容易独立于分辨率的原因之一是它提供的布局控件。

如果您是 WPF 新手并且还不知道存在哪些布局控件，我强烈建议您查看[这个快速的视觉开始](http://www.codeproject.com/Articles/30904/WPF-Layouts-A-Visual-Quick-Start)，它演示了不同的布局面板以及它们如何调整大小/排列子级。

我构建 GUI 的典型方法是：

*   在某处绘制布局。我的偏好是在[Balsamiq](http://builds.balsamiq.com/b/mockups-web-demo/)或纸上
*   找出这种类型的 UI 布局需要哪些面板
*   键入 XAML 以在 XAML 编辑器中构建它

这里有几点需要注意：

*   大多数元素在 WPF 中没有绝对大小或位置。WPF 的布局面板通常控制其中元素的大小或位置，因此通常面板用于布局控件，而不是为每个控件指定单独的大小和位置。

*   不使用拖放 WPF 编辑器。这是因为它经常为您的控件添加不必要的大小、定位和边距，这使您的 XAML 成为阅读和维护的噩梦。最好让面板完成其子元素的大小和定位工作。

这并不意味着您根本无法调整或定位元素，但是通常您设置相对属性来调整大小和定位而不是绝对属性，并让您的面板完成繁重的工作来确定在哪里绘制元素以及有多大制作它们。

对于定位，使用`HorizontalAlignment`或等相对属性而不是/或 unnaturally large`VerticalAlignment`等绝对属性，尽管大多数布局面板会以特定方式处理元素定位，因此大多数元素都不需要这样做。`Canvas.Top``Canvas.Left``Margins`

对于大小调整，这意味着设置`MaxHeight`或`MinWidth`代替为您的元素定义一个绝对`Height`/ `Width`，或者使用 Grid 的星形大小来将您的元素相对调整到屏幕的百分比。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T11:58:36.443

> 在 Illustrator 中设计模型（或直接在 Blend 中，我不确定应该使用哪个）

同意，如果那是你滚动的方式。我倾向于直接在 VS 中做更简单的事情，并在需要时使用 Blend。

> 通过 WPF 中的拖放设计复制它，同时使用（还不知道是哪个）布局设计 1024 x 768 分辨率

我仍然不能推荐 WPF 的设计师。它在 2010 年非常糟糕。它在 2012 年可能会好很多，但我没有任何理由尝试它，因为我已经习惯了只编写 XAML。

> 当我的用户启动我的应用程序时，通过做一些数学运算来获取屏幕大小并调整每个控件的大小（Yukh！这真的是我必须要做的吗？WPF 独立于分辨率的意义何在，这不是真正的拖放是设计吗？）

绝对不。使用[WPF 的布局系统](http://msdn.microsoft.com/en-gb/library/ms745058.aspx)为您完成艰苦的工作。它的基础是 a `Panel`，它可以决定给它的孩子什么空间。WPF 的`Grid`控件（即 a `Panel`）非常灵活，允许您为行和列分配比例大小，从而确保您的布局可以以合理的方式扩展和收缩。

不过，您将始终需要记住最小尺寸。显然，您不能指望您的 UI 在 10x10 时仍然看起来不错！您可以使用`MinWidth`和`MinHeight`属性来控制它，直到您的`Window`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T11:55:38.997

> 3 > 当我的用户启动我的应用程序时，通过做一些数学来获取屏幕大小并调整每个控件的大小

不不，不要手动调整任何东西的大小。使用布局，例如简单的`Grid`.

您定义行和列。例如：

```
<Grid Margin="5">
    <Grid.ColumnDefinition>
        <ColumnDefinition Height="Auto" />
        <ColumnDefinition Height="20" />
        <ColumnDefinition Height="*" />
    </Grid.RowDefinitions>

    <Label Grid.Row="0" Content="some text" />
    <TextBox Grid.Row="1" />
    <Label Grid.Row="2" />

</Grid> 
```

您有一个自动大小的列（即大小将是 的大小`Label`）、一个固定大小的列 (20) 和一个使用**所有剩余空间**的最后一列。所以基本上当你调整窗口大小时，最后一列的大小将使用或多或少的空间。

有关 WPF 中布局的更多提示/示例，请参阅[链接](http://wpftutorial.net/LayoutProperties.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:16:52.467

我将假设通过“分辨率独立性”，您希望您的应用程序使用所有可用的空间。

有两种主要方法可以做到这一点，一种简单，一种正确;-)

### 选项 1：缩放 UI

使用此选项，您正在为您的用户界面设计一个*固定的布局*。然后应用缩放变换以确保 UI 占据整个窗口。

要在 WPF 中执行此操作，只需将 UI 中的所有内容都包装在[Viewbox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)中：

```
<Viewbox>
    <RestOfYourUI />
</Viewbox> 
```

**优点：**

*   在 WPF 中做起来非常简单
*   当您想要做的只是处理不同的像素密度（但在厘米/英寸方面仍然相同/相似的屏幕尺寸）时，效果非常好

**缺点：**

*   一切都按比例缩放，这意味着文本可以不自然地变大或变小。
*   并没有真正利用额外的空间来做任何有用的事情——你没有显示比以前更多的信息

### 选项 2：重新排列 UI

这就是网页设计师所说的“[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)”，简单来说就是你修改 UI 的整个布局和内容以匹配当前设备（或屏幕/窗口）的大小和分辨率。

这需要更多的努力，但最终结果是 IMO 好得多。没有任何简单的清单，但实现这一点的一些技术是：

*   使用巧妙的[布局容器](http://msdn.microsoft.com/en-us/library/ms745058.aspx)来处理大小调整。不同面板的调整大小行为是不同的，但是当您想确保使用所有可用空间时，通常可以使用 Grid 和 DockPanel。
*   按需隐藏和显示元素。检测何时空间有限并移除较少使用的 UI 元素。一个很好的真实示例是 MS Office 中的功能区，当它变得拥挤时，它会调整大小、重新排列并最终删除图标

**优点：**

*   您实际上是在使用屏幕空间来放置新信息

**缺点：**

*   需要付出更多的努力才能做到正确。

就个人而言，我总是选择选项 2，除非在极少数情况下。

# android - 通过触摸更改屏幕背景颜色

> ID：16036148
> 
> 赞同：4
> 
> 时间：2013-04-16T11:44:04.613
> 
> 标签：android

我是 Android 开发的新手，我的要求是当应用程序启动时，会显示一个空白屏幕。当用户滑动屏幕时，背景颜色应该会改变。

我不知道如何实现这一点。以下是我到目前为止所拥有的。

```
import android.os.Bundle;
    import android.app.Activity;
    import android.graphics.Color;
    import android.view.GestureDetector;
    import android.view.GestureDetector.OnGestureListener;
    import android.view.Menu;
    import android.view.MotionEvent;
    import android.widget.LinearLayout;
    import android.widget.TextView;

    public class MainActivity extends Activity implements OnGestureListener {    
        private LinearLayout main;    
        private TextView viewA;

        private GestureDetector gestureScanner;

        @Override
        public boolean onTouchEvent(MotionEvent me) {
            return gestureScanner.onTouchEvent(me);

        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
        }

        @Override
        public boolean onDown(MotionEvent e) {
            viewA.setText("-" + "DOWN" + "-");
            return true;
        }

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            viewA.setText("-" + "FLING" + "-");
            return true;
        }

        @Override
        public void onLongPress(MotionEvent e) {
            viewA.setText("-" + "LONG PRESS" + "-");
        }

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            viewA.setText("-" + "SCROLL" + "-");
            return true;
        }

        @Override
        public void onShowPress(MotionEvent e) {
            viewA.setText("-" + "SHOW PRESS" + "-");
        }    

        @Override
        public boolean onSingleTapUp(MotionEvent e) {
            viewA.setText("-" + "SINGLE TAP UP" + "-");
            return true;
        }

        public LinearLayout getMain() {
            return main;
        }

        public void setMain(LinearLayout main) {
            this.main = main;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:00:33.497

使您的布局文件像这样..

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
```

现在在您的 MAinActivity 中使用以下代码..

```
public class MainActivityextends Activity implements android.gesture.GestureOverlayView.OnGestureListener {
GestureDetector gd;
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

setContentView(R.layout.image);
gd= new GestureDetector((OnGestureListener) ImageEditing.this);
    LinearLayout layout = (LinearLayout)findViewById(R.id.ll_main);
    layout.setOnTouchListener(new OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub

                    return true;
                }
            });
}
} 
```

然后覆盖onfling方法...

```
@Override
public boolean onFling(MotionEvent start, MotionEvent finish,
            float xVelocity, float yVelocity) {
 ll.setBackground(yourDrawable);

    } 
```

希望它有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:06:11.363

这可能对您有所帮助

```
 `<?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
        android:layout_height="match_parent"
       android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.50" >

    <Button
        android:id="@+id/btnPrev"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="&lt; Prev" />

    <Button
        android:id="@+id/btnNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Next >" />

    <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/btnNext" >

        <ImageView
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:layout_gravity="center_horizontal"
            android:contentDescription="five"
            android:src="@drawable/hair_five" />

        <ImageView
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:layout_gravity="center_horizontal"
            android:contentDescription="seven"
            android:src="@drawable/hair_seven" />

        <ImageView
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:contentDescription="one"
            android:src="@drawable/hair_one" />

        <ImageView
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:contentDescription="two"
            android:src="@drawable/hair_two" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:contentDescription="three"
            android:src="@drawable/hair_three" />

        <ImageView
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:contentDescription="four"
            android:src="@drawable/hair_four" />

        <ImageView
            android:layout_width="170dp"
            android:layout_height="459dp"
            android:contentDescription="six"
            android:src="@drawable/hair_six" />
    </ViewFlipper>

</RelativeLayout> 
```

`

你的代码将是：

```
 public class FlipSlide extends Activity implements OnGestureListener{
GestureDetector gDetector;
protected void yourFlipperForward() {
    // Set animation
    tflipper.setAnimation(AnimationUtils.loadAnimation(
            FlipSlide.this, android.R.anim.slide_in_left));

    // Show next step
    tflipper.showNext();

}

protected void yourFlipperBack() {
    // Set animation
    tflipper.setAnimation(AnimationUtils.loadAnimation(
            FlipSlide.this, android.R.anim.slide_in_left));

    // Show next step
    tflipper.showPrevious();

}

private ViewFlipper tflipper;

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.flip_slide);

    tflipper = (ViewFlipper) findViewById(R.id.viewFlipper1);
    tflipper.startFlipping();
    gDetector = new GestureDetector((OnGestureListener) this);
    Button bp=(Button)findViewById(R.id.btnPrev);
    bp.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            flipPrevious( arg0);

        }
    });
    Button bn=(Button)findViewById(R.id.btnNext);
    bn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            flipNext( arg0);

        }
    });
}
public boolean onFling(MotionEvent start, MotionEvent finish, float xVelocity,              float yVelocity) {

        if (start.getRawY() < finish.getRawY()) {
            yourFlipperForward();

        } else {

            yourFlipperBack();    
        }

        return true;

}
@Override

public boolean onTouchEvent(MotionEvent me) {

return gDetector.onTouchEvent(me);

}
public void close(View v) {
    finish();
}

public void flipNext(View v) {
    yourFlipperForward();
}

public void flipPrevious(View v) {
    yourFlipperBack();
}

@Override
public boolean onDown(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onLongPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
        float arg3) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public void onShowPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public boolean onSingleTapUp(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return false;
}

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:48:07.643

你的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="Shake to get a toast and to switch color" />

</LinearLayout> 
```

现在您可以在您的 onCreate() 中设置颜色如下

```
View view = findViewById(R.id.textView);
view.setBackgroundColor(Color.BLACK); 
```

现在在你的 onFling()

```
view.setBackgroundColor(Color.GREEN); 
```

# windows - Windows mobile 6 窗口注册失败

> ID：16036154
> 
> 赞同：2
> 
> 时间：2013-04-16T11:44:23.887
> 
> 标签：windows, winapi, mobile, windows-ce

当我尝试部署代码（win32 智能手机项目）时，会弹出注册失败错误并且应用程序退出。但是，如果我将 wc.lpszMenuName 的右侧更改为 NULL，则没有菜单一切正常。win mobile 6不支持这个功能吗？

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPTSTR lpCmdLine, int nCmdShow)
{

    WNDCLASS wc;
    HWND hwnd;
    MSG Msg;

    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = NULL;
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = MAKEINTRESOURCE(IDR_MENU1);
    wc.lpszClassName = g_szClassName;

    if(!RegisterClass(&wc))
    {
        MessageBox(NULL, L"Window Registration Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }
    // ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:37:41.723

Have you looked at [the WNDCLASS documentation for WinMo](http://msdn.microsoft.com/en-us/library/aa925944.aspx)? Under the Remarks section, it specifically states:

> **lpszMenuName** is not supported and must be NULL.

I believe that what you're actually needing is [a MenuBar control](http://msdn.microsoft.com/en-us/library/bb158537.aspx).

# java - 在 webDriver 中执行异步脚本

> ID：16036155
> 
> 赞同：2
> 
> 时间：2013-04-16T11:44:25.310
> 
> 标签：java, selenium-webdriver

这是通常的 javascript，它寻找隐藏的元素。

```
 private RemoteWebElement getItemInSubmenu(WebElement parent, String itemName) {
        String script = "var el = jQuery(arguments[0].getElementsBySelector('div.rich-menu-list-bg>div.rich-menu-item>.rich-menu-item-label')).filter(function() {"
                + "return jQuery(this).text().trim() === '" + itemName + "'});"
                + "jQuery(el).parents('div.rich-menu-list-border:hide').show();"
                + "return el.get(0);";
        return (RemoteWebElement) browser.executeScript(script, parent);
    } 
```

我想让它异步。如何实现回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:23:09.943

这些是直接从 Selenium JavaDoc 中提取的，可在此处获得：

[http://selenium.googlecode.com/git/docs/api/java/index.html](http://selenium.googlecode.com/git/docs/api/java/index.html)

示例 #1：在被测浏览器中执行休眠。

```
long start = System.currentTimeMillis();
((JavascriptExecutor) driver).executeAsyncScript("window.setTimeout(arguments[arguments.length - 1], 500);");
System.out.println("Elapsed time: " + System.currentTimeMillis() - start); 
```

示例 #2：将测试与 AJAX 应用程序同步

```
WebElement composeButton = driver.findElement(By.id("compose-button"));
composeButton.click();
((JavascriptExecutor) driver).executeAsyncScript(
  "var callback = arguments[arguments.length - 1];" +
  "mailClient.getComposeWindowWidget().onload(callback);");
driver.switchTo().frame("composeWidget");
driver.findElement(By.id("to")).sendKeys("bog@example.com"); 
```

示例 #3：注入 XMLHttpRequest 并等待结果：

```
Object response = ((JavascriptExecutor) driver).executeAsyncScript(
    "var callback = arguments[arguments.length - 1];" +
    "var xhr = new XMLHttpRequest();" +
    "xhr.open('GET', '/resource/data.json', true);" +
    "xhr.onreadystatechange = function() {" +
    "  if (xhr.readyState == 4) {" +
    "    callback(xhr.responseText);" +
    "  }" +
    "}" +
    "xhr.send();");
JSONObject json = new JSONObject((String) response);
assertEquals("cheese", json.getString("food")); 
```

# c++ - 为什么数组指针需要堆分配？（错误：预期的 '(' 用于函数式强制转换或类型构造）

> ID：16036161
> 
> 赞同：-3
> 
> 时间：2013-04-16T11:44:42.287
> 
> 标签：c++, compiler-errors

我只想知道为什么下面的代码需要堆分配才能使其工作？

（注意这很可能是回答的扩展： [指针和分配](https://stackoverflow.com/questions/8956775/pointers-and-assignment)）

例如 ：

```
#include <iostream>
#include <fstream>

using namespace std;
int *array;
int main(){
    array = int array[100];
} 
```

创建编译器错误

```
test.cpp:7:14: error: expected '(' for function-style cast or type construction
        array = int array[100];
             ~~~ ^
1 error generated. 
```

但是=新的int数组[100]；似乎工作。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:02:39.997

它不需要动态分配。但是要分配一个指向数组的指针，你需要一个数组来指向：

```
int local_array[100];
array = local_array; 
```

您的代码尝试声明一个数组，然后在表达式中使用该声明；C++ 根本不允许您像这样组合声明和表达式。

# ruby - 用于抽象遗留数据库的 Ruby 接口

> ID：16036162
> 
> 赞同：0
> 
> 时间：2013-04-16T11:44:43.880
> 
> 标签：ruby, ruby-on-rails-3, inheritance, dynamic

我正在使用现有架构的旧版 SQL Enterprise 数据库之上构建应用程序，但我也希望使用类似但更传统的 ActiveRecord 架构来支持 PostgreSQL。我为每个数据库提供了一组 ActiveRecord 类，它们抽象了模式差异并为视图和控制器提供了一个通用接口。我希望能够根据环境/配置切换在应用程序级别使用的类集。

在任何其他语言中，我都会有一个对象工厂，它使用适合环境的类来生成对象。但我知道这样的模式对于 ruby​​ 来说太过分了。

如果我有两个类，IssuePg 和 IssueLegacy，有没有办法可以配置我的应用程序，以便调用 Issue.new 实例化适当的模型？我知道我可以将类分配给一个变量，但是我将在哪里执行它，这样它将是系统范围的并且对 Rails 不可见并且与脚手架兼容，所以我可以围绕问题搭建脚手架，然后根据环境更改问题超类？

我还需要为每个环境提供一组单独的迁移 - 有什么想法吗？或者这是一个源代码控制问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:04:05.100

您可以这样做的一种严厉方式是使用环境或命令行变量，然后执行以下操作：

```
if Rails.env['db_support'] == :legacy
    require '/path/to/legacy/ar/objects'
else
    require '/path/to/normal/ar/objects'
end 
```

这会隔离您的模型并使代码库更加简洁。

# javascript - 通过 JavaScript 在 div 标签中插入 HTML 元素而不相互删除

> ID：16036164
> 
> 赞同：1
> 
> 时间：2013-04-16T11:44:52.733
> 
> 标签：javascript, html

我正在尝试使用非常简单的文本编辑器。我需要为用户提供插入 7 种不同类型的 HTML 元素并使用它们创建一些自定义表单的功能。只是为了尝试事情是如何工作的，我做了这个：

```
<script type="text/javascript">

function MinMax() {
document.getElementById("EditorArea").innerHTML = "<table border= 1px><tr><td>Element</td><td><input type='textbox'/></td></tr><tr><td>Marked as</td><td><input type='textbox'/></td><tr><td>Min</td><td><input type='textbox'/></td><tr><td>Max</td><td><input type='textbox'/></td><tr><td>Преди ремонт</td><td><input type='textbox'/></td><tr><td>След ремонт</td><td><input type='textbox'/></td><tr><td>Time before</td><td><input type='textbox'/></td><tr><td>Time after</td><td><input type='textbox'/></td></table>";
   //var elem = document.createElement("<table><tr><th>Firstname</th><th>Lastname</th></tr><tr><td>Peter</td><td>Griffin</td></table>");
};

function ShowDate() {
document.getElementById("EditorArea").innerHTML = "<p class='dateTime' style='width:120px; border: 2px solid black'>DateTime</p>";
}

</script>
</head>
<body>
<button type="button" onclick="MinMax()">MinMax</button>
<button type="button" onclick="ShowDate()">DateTime</button>
<div id="EditorArea" style = "width:800px; height:600px; border:2px solid black;"> 
```

我遇到的问题是我找不到使用`insertBefore`or添加整个表结构的方法`insertAfter`。但是`innerHTML`确实如此，但是当我添加另一个元素时，它会删除前一个元素。即使我仍然不知道如何让用户排列不同的元素以使其看起来像他想要的那样，但现在我需要一种方法来添加几个元素而不出现这种行为 - 新元素将删除旧元素.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:54:45.647

## 使用[insertAdjacentHTML](https://developer.mozilla.org/en-US/docs/DOM/element.insertAdjacentHTML)

![在此处输入图像描述](https://i.stack.imgur.com/u0R9L.png)

## `**[Live Demo](http://jsfiddle.net/zNcZG/)**`

```
function MinMax() {
    document.getElementById("EditorArea").insertAdjacentHTML('beforeend',"<table border= 1px><tr><td>Element</td><td><input type='textbox'/></td></tr><tr><td>Marked as</td><td><input type='textbox'/></td><tr><td>Min</td><td><input type='textbox'/></td><tr><td>Max</td><td><input type='textbox'/></td><tr><td>Преди ремонт</td><td><input type='textbox'/></td><tr><td>След ремонт</td><td><input type='textbox'/></td><tr><td>Time before</td><td><input type='textbox'/></td><tr><td>Time after</td><td><input type='textbox'/></td></table>");
};

function ShowDate() {
    document.getElementById("EditorArea").insertAdjacentHTML('beforeend', "<p class='dateTime' style='width:120px; border: 2px solid black'>DateTime</p>");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:50:05.027

像这样，但我建议使用 jquery。

```
document.getElementById("EditorArea").innerHTML = document.getElementById("EditorArea").innerHTML + "your content"; 
```

jQuery

```
$(div).append(data); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T11:51:05.890

使用 += 而不是 =

```
document.getElementById("EditorArea").innerHTML += "<p class='dateTime' style='width:120px; border: 2px solid black'>DateTimelt</p>"; 
```

# symfony - Symfony 编码标准 - 参数和参数

> ID：16036167
> 
> 赞同：3
> 
> 时间：2013-04-16T11:45:00.310
> 
> 标签：symfony, coding-style

在[Symfony 编码标准](http://symfony.com/doc/current/contributing/code/standards.html)中它说：>

> 对变量、函数和方法名称、参数使用驼峰命名法，而不是下划线；
> 
> 选项名称和参数名称使用下划线；

在这种情况下，**参数和参数有什么区别**？

我想我理解选项名称部分（即当你有一个 $options 数组时，就像在该页面上的代码示例中一样）但是什么有资格作为“参数”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:03:25.467

我认为，一般来说，当**数组值用作选项**（具有的含义）时。

例如在表格中：

```
public function getDefaultOptions(array $options)
{
    return array(
        'validation_groups' => array('registration')
    );
} 
```

在您的捆绑配置中：

```
class Configuration implements ConfigurationInterface
{
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('acme_hello');

        $rootNode
            ->children()
            ->scalarNode('my_type')->defaultValue('bar')->end()
            ->end();

        return $treeBuilder;
    }
} 
```

在容器参数中：

```
# app/config/config.yml
parameters:
    my_mailer.class:      Acme\HelloBundle\Mailer
    my_mailer.transport:  sendmail

services:
    my_mailer:
        class:        "%my_mailer.class%"
        arguments:    ["%my_mailer.transport%"] 
```

# android - PhoneGap 相机 onActivityResult 崩溃 2.3.6

> ID：16036172
> 
> 赞同：0
> 
> 时间：2013-04-16T11:45:09.850
> 
> 标签：android, cordova, camera

```
Possible duplicate 
```

我正在使用PhoneGap 框架在Android 中实现Camera 插件，它可以在4.0 和其他版本上运行，但不能在2.3.6 android 版本中运行。当捕获并返回活动应用程序崩溃时，这里是 logcat 详细信息。我无法修复它。

```
04-16 16:54:36.171: E/AndroidRuntime(31774):    at android.app.ActivityThread.main(ActivityThread.java:3687)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at java.lang.reflect.Method.invoke(Method.java:507)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at dalvik.system.NativeStart.main(Native Method)
04-16 16:54:36.171: E/AndroidRuntime(31774): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=34, result=-1, data=null} to activity {com.wtd.android.phonegapplugin/com.wtd.android.phonegapplugin.MainActivity}: java.lang.NullPointerException
04-16 16:54:36.171: E/AndroidRuntime(31774):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2111)
04-16 16:54:36.171: E/AndroidRuntime(31774):    ... 12 more
04-16 16:54:36.171: E/AndroidRuntime(31774): Caused by: java.lang.NullPointerException
04-16 16:54:36.171: E/AndroidRuntime(31774):    at org.apache.cordova.DroidGap.onActivityResult(DroidGap.java:857)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
04-16 16:54:36.171: E/AndroidRuntime(31774):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
04-16 16:54:36.171: E/AndroidRuntime(31774):    ... 13 more 
```

现在我在 4.0 中发现的 2.3.6 版本的问题我已经测试过它工作得很好。

我正在使用`cordova-2.6.0.jar`文件，`cordova-2.6.0.js`

如何克服这一点？如何获取相机捕获的图像？

我的 AndroidManifest.xml 文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wtd.android.phonegapplugin"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:configChanges="orientation|screenSize|keyboardHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:29:46.167

我只是将 phonegap 的版本更改为 2.1.0 以测试较低版本并且它的工作完美。不知道使用PhoneGap 2.6.0会出现什么问题，同时它在模拟器中的2.3.6版本中也能完美运行，但在我的设备中总是强制关闭

# iphone - 如何使用嵌入代码播放视频（不在 youtube 嵌入代码中的另一个链接视频嵌入代码）？

> ID：16036177
> 
> 赞同：-3
> 
> 时间：2013-04-16T11:45:20.897
> 
> 标签：iphone, ios, objective-c, video, embed

这是我的嵌入代码。我已使用此代码，需要在 iPhone 上运行视频：

```
<object id="flashObj" 
  width="400" height="265" 
  classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" 
  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,47,0">
  <param name="movie" value="http://c.brightcove.com/services/viewer/federated_f9?isVid=1&isUI=1" />
  <param name="bgcolor" value="#FFFFFF" />
  <param name="flashVars" value="videoId=1572434110001&playerID=1456553457001&playerKey=AQ~~,AAABNxei5wk~,PMun_jKGs7kvG5zhX_FbSH9tFMK-pdC1&domain=embed&dynamicStreaming=true" />
  <param name="base" value="http://admin.brightcove.com" />
  <param name="seamlesstabbing" value="false" />
  <param name="allowFullScreen" value="true" />
  <param name="swLiveConnect" value="true" />
  <param name="allowScriptAccess" value="always" />
  <embed src="http://c.brightcove.com/services/viewer/federated_f9?isVid=1&isUI=1" 
    bgcolor="#FFFFFF" 
    flashVars="videoId=1572434110001&playerID=1456553457001&playerKey=AQ~~,AAABNxei5wk~,PMun_jKGs7kvG5zhX_FbSH9tFMK-pdC1&domain=embed&dynamicStreaming=true"
  base="http://admin.brightcove.com" 
    name="flashObj" 
    width="400" 
    height="265"
    seamlesstabbing="false" 
    type="application/x-shockwave-flash"
    allowFullScreen="true" 
    allowScriptAccess="always" 
    swLiveConnect="true" 
    pluginspage="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></embed>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:03:50.410

iOS 设备不支持 Flash 对象。所以这段代码行不通。如果是 youtube 视频，您需要使用 YouTube 嵌入代码（即打开 URL 的 webview）或在浏览器上打开 YouTube 中的视频详细信息页面。

没有其他直接方法可以使用 iOS SDK 在 iOS 应用程序中显示 YouTube 视频。

# java - 弹性搜索升级后的 Snappy Java 异常

> ID：16036179
> 
> 赞同：0
> 
> 时间：2013-04-16T11:45:22.063
> 
> 标签：java, grails, elasticsearch, snappy

大家好，我最近将 Elastic Search 从 19.4 升级到 20.6，它所需的新依赖项之一是 snappy Java。我尝试了多个版本的 snappy，但无论看起来如何，我总是遇到异常我无法解决的启动：

```
2013-04-16 12:34:03,949 [http-bio-8080-exec-6] DEBUG compress.lzf  - using [UnsafeChunkDecoder] decoder
2013-04-16 12:34:04,058 [http-bio-8080-exec-6] DEBUG common.compress  - failed to load xerial snappy-java
java.lang.UnsatisfiedLinkError: org.xerial.snappy.SnappyNative.maxCompressedLength(I)I
at org.xerial.snappy.SnappyNative.maxCompressedLength(Native Method)
at org.xerial.snappy.Snappy.maxCompressedLength(Snappy.java:320)
at org.xerial.snappy.Snappy.rawCompress(Snappy.java:333)
at org.xerial.snappy.Snappy.compress(Snappy.java:92)
at org.xerial.snappy.Snappy.compress(Snappy.java:235)
at org.xerial.snappy.Snappy.compress(Snappy.java:217)
at org.elasticsearch.common.compress.snappy.xerial.XerialSnappy.<clinit>(XerialSnappy.java:42)
at org.elasticsearch.common.compress.CompressorFactory.<clinit>(CompressorFactory.java:58)
at org.elasticsearch.node.internal.InternalNode.<init>(InternalNode.java:132)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
at org.springsource.loaded.ri.ReflectiveInterceptor.jlrConstructorNewInstance(ReflectiveInterceptor.java:975)
at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:77)
at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:102)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:57)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:182)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:194)
at org.elasticsearch.groovy.node.GNodeBuilder.build(GNodeBuilder.groovy:63)
at org.elasticsearch.groovy.node.GNodeBuilder.node(GNodeBuilder.groovy:68)
at org.elasticsearch.groovy.node.GNodeBuilder$node.call(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
at xxx.xxxx.xcri.ESWrapperService.init(ESWrapperService.groovy:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.springsource.loaded.ri.ReflectiveInterceptor.jlrMethodInvoke(ReflectiveInterceptor.java:1243)
at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:346)
at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:299)
at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:132)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:122)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.autowireBeanInAutowireByName(ReloadAwareAutowireCapableBeanFactory.java:201)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.populateBeanInAutowireByName(ReloadAwareAutowireCapableBeanFactory.java:193)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.autowireBeanProperties(ReloadAwareAutowireCapableBeanFactory.java:181)
at org.codehaus.groovy.grails.plugins.web.api.ControllersApi.initialize(ControllersApi.java:113)
at xx.xxxx.xcri.SearchController.<init>(SearchController.groovy:23)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
at org.springsource.loaded.ri.ReflectiveInterceptor.jlrConstructorNewInstance(ReflectiveInterceptor.java:975)
at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory$1.instantiate(ReloadAwareAutowireCapableBeanFactory.java:102)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:122)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1105)
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.getControllerInstance(AbstractGrailsControllerHelper.java:98)
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleURI(AbstractGrailsControllerHelper.java:157)
at org.codehaus.groovy.grails.web.servlet.mvc.AbstractGrailsControllerHelper.handleURI(AbstractGrailsControllerHelper.java:116)
at org.codehaus.groovy.grails.web.servlet.mvc.SimpleGrailsController.handleRequest(SimpleGrailsController.java:72)
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
at org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet.doDispatch(GrailsDispatcherServlet.java:328)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:314)
at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:279)
at org.codehaus.groovy.grails.web.util.WebUtils.forwardRequestForUrlMappingInfo(WebUtils.java:270)
at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:221)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:200)
at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:151)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at javax.servlet.FilterChain$doFilter.call(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:120)
at org.grails.plugin.resource.DevModeSanityFilter.doFilter(DevModeSanityFilter.groovy:44)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:66)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:679) 
```

大堆栈，这似乎表明压缩有问题。你们有什么线索我应该从哪里开始看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:56:21.330

似乎是 snappy 插件中的一个错误。

# backbone.js - Require.js 错误说模块未加载

> ID：16036186
> 
> 赞同：1
> 
> 时间：2013-04-16T11:45:47.837
> 
> 标签：backbone.js, requirejs

我正在使用 RESTHub 2.0 主干堆栈

以下是我的 route.js

```
define(function (require) {

    'use strict';

    var $ = require('jquery');
    var Backbone = require('backbone');

    var HomeView = require('../views/home');

    var _pageView;

    var AppRouter = Backbone.Router.extend({

        initialize: function() {
            console.log("Router initialize");
            Backbone.history.start({ pushState: false, root: "/" });
            _pageView = new HomeView();
        },

        routes: {
            '': 'main',
            'test': 'test'
        },

        main: function() {
            console.log("Main route activated");
            require(['views/home'], function(HomeView) {
                _pageView.render(HomeView);
            });
        },

        test: function() {
            console.log("Test route activated");
            alert("test");
        }
    });

    return AppRouter;

}); 
```

浏览器控制台给了我以下错误

```
Error: Module name "../views/home" has not been loaded yet for context: _
http://requirejs.org/docs/errors.html#notloaded 
```

为什么会触发此错误？

我知道，这会失败，因为 requirejs 需要确保在调用上面的工厂函数之前加载并执行所有依赖项。如果给define()一个依赖数组，那么requirejs假定所有依赖都列在那个数组中，它不会扫描工厂函数来寻找其他依赖。所以，要么不传入依赖数组。

但还是不行！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:00:29.367

在[错误给出的链接中](http://requirejs.org/docs/errors.html#notloaded)，它说：

```
//THIS WILL FAIL
define(['require'], function (require) {
    var namedModule = require('name');
}); 
```

我认为您需要依赖数组中的模块：

```
define(['require', '../views/home'], function (require) {
    var namedModule = require('../views/home');
}); 
```

或者，您可以将所有模块添加到该依赖项列表中，并改用回调函数的参数：

```
define(['jquery', 'underscore', 'backbone', '../views/home'], function ($, _, Backbone, HomeView) {
    // now you dont need to use require(name) at all.
}); 
```

# django - Django：获取有序查询集的值

> ID：16036194
> 
> 赞同：2
> 
> 时间：2013-04-16T11:46:17.290
> 
> 标签：django, django-queryset

我有一个模型，

```
class Book(models.Model):
    name = models.CharField(max_length=300)
    pages = models.IntegerField()
    price = models.DecimalField(max_digits=10, decimal_places=2)
    rating = models.FloatField() 
```

我正在根据类别动态订购 Book 对象，但我也想获得相应的值。例如，当它们被排序时，我也想显示相应的价格。

正在做：

```
Book.objects.order_by('price').values() 
```

并在模板中

```
Book: {{ book }} - Price: {{ book.value.2 }} 
```

工作正常。但是，我想选择在运行时可以对哪个字段进行排序，例如，如果我想按页面排序，我需要通过`book.value.1`. 因此，视图应该传递已排序的字段。像下面这样可以解决我的问题：

```
{{ book.{{ sortField }} }} 
```

Django 给出一个错误。我该如何解决这个问题？如何传递该字段以便我可以使用相应的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:41:43.507

一个简化的例子：

**模板**

```
<span>Currently ordering by {{ order_by }}</span>
<ul>
    <li><a href="?order_by=price">price</a></li>
    <li><a href="?order_by=pages">pages</a></li>
</ul>
<ul>
    {% for obj in object_list %}
        <li><a href="{{ obj.get_absolute_url }}">{{ obj.name }}</a></li>
    {% endfor %}
</ul> 
```

**视图.py**

```
class FooListView(ListView):
    allow_ordering_on = ['pk', 'pages', 'price']  # restrictions
    order_by = 'pk'

    def get(self, request, *args, **kwargs):
        order_by = request.GET.get('order_by', self.order_by)

        if order_by in self.allow_ordering_on:
            self.order_by = order_by
            self.object_list = self.model.objects.all().order_by('whatever')
            if not allow_empty and len(self.object_list) == 0:
                raise Http404(_(u"Empty list and '%(class_name)s.allow_empty' is False.")
                              % {'class_name': self.__class__.__name__})
            context = self.get_context_data(object_list=self.object_list)
            return self.render_to_response(context)

        else:
            return super(FooListView, self).get(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        context = super(FooListView, self).get_context_data(**kwargs)
        context['order_by'] = self.order_by
        return context 
```

您可以覆盖`get_context_data`以添加用于标记当前字段顺序的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:01:21.433

在外壳上：

```
books = Book.objects.order_by('price').values()
book = books[0]
print book['price'] 
```

因此，在模板中，您应该能够遍历书籍并访问字段：

```
{% for book in books %}    
    {{ book.price }}
{% endfor %} 
```

# windows-store-apps - 语义缩放更改时停用按钮

> ID：16036198
> 
> 赞同：0
> 
> 时间：2013-04-16T11:46:32.227
> 
> 标签：windows-store-apps, winrt-xaml

我想在`ZoomOutView`活动时停用某些按钮。根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709928.aspx)，VisualStateGroup 的名称是“SemanticZoomStates”，而 VisualState 的名称是“ZoomOutView”。所以我尝试了以下方法：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="SemanticZoomStates">
        <VisualState x:Name="ZoomInView" />

        <VisualState x:Name="ZoomOutView">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="editDocButton" Storyboard.TargetProperty="IsEnabled">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="False"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="deleteDocButton" Storyboard.TargetProperty="IsEnabled">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="False"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

当我将`ObjectAnimationUsingKeyFrames`-elements 放入让我们说“Snapped”VisualState（和适当的 VisualStateGroup）时，它可以工作，所以按钮名称应该没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:26:39.927

试试这个，我已经`IsEnabled`改成`(UIElement.IsEnabled)`

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="SemanticZoomStates">
        <VisualState x:Name="ZoomInView" />
        <VisualState x:Name="ZoomOutView">
            <Storyboard>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="editDocButton" Storyboard.TargetProperty="(UIElement.IsEnabled)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="False"/>
                </ObjectAnimationUsingKeyFrames>
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="deleteDocButton" Storyboard.TargetProperty="(UIElement.IsEnabled)">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="False"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualState>
    </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

# css - 什么 css 导致此复选框输入缩进

> ID：16036200
> 
> 赞同：0
> 
> 时间：2013-04-16T11:46:37.457
> 
> 标签：css, checkbox, css-float, label

我想要

```
 [  ] Option 1
  [  ] Option 2 
```

但我得到了（[http://jsfiddle.net/yN2E8/4/](http://jsfiddle.net/yN2E8/4/)）

```
 [  ] Option 1
       [  ] Option 2 
```

需要在 CSS 中进行哪些更改才能使框左对齐？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:48:07.200

这是因为您没有清除浮动

[**演示**](http://jsfiddle.net/yN2E8/5/)

```
<div style="clear: both;"></div> 
```

如果您不喜欢专门添加元素来清除浮动，您也可以使用它，我个人从不使用

```
.chkitemcontainer {
   overflow: hidden;
} 
```

此外，如果您不介意旧浏览器，您还可以使用`:after`带有显示表属性的选择器来自行清除父元素

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T11:50:37.530

您的 HTML 是一团糟，尽量不要过度使用 div 并坚持语义 HTML，例如在[http://jsfiddle.net/yN2E8/6/](http://jsfiddle.net/yN2E8/6/)中，然后在 HTML 干净整洁后对元素进行样式设置。浮动特别不应该用于通用布局问题，除非特别适合该目的，否则它们会产生比解决更多的问题。

## HTML

```
<label><input type="checkbox"> Option 1</label>
<label><input type="checkbox"> Option 2</label> 
```

## CSS

```
label {
    display:block;
} 
```

# java - 更改操作栏设置图标颜色

> ID：16036204
> 
> 赞同：28
> 
> 时间：2013-04-16T11:46:59.070
> 
> 标签：java, android

如何更改操作栏中溢出图标的颜色？

![在此处输入图像描述](https://i.stack.imgur.com/gmtdE.png)

（最右边的图标）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-16T11:54:40.487

你可以使用这样的东西

```
<style name="MyTheme" parent="android:style/Theme.Holo.Light">
     <item name="android:actionOverflowButtonStyle">@style/MyActionButtonOverflow</item>
</style>

<style name="MyActionButtonOverflow" parent="android:style/Widget.Holo.ActionButton.Overflow">
    <item name="android:src">@drawable/my_action_bTutton_overflow</item>
</style> 
```

在你的`AndroidManifest.xml`

```
<application
    android:theme="@style/MyTheme" > 
```

**如果你想改变 actionBar 颜色** @style/MyActionBar

```
 <!-- Support library compatibility -->
        <item name="actionBarStyle">@style/MyActionBar</item>
    </style>

    <!-- ActionBar styles -->
    <style name="MyActionBar" parent="@style/Widget.AppCompat.Light.ActionBar.Solid.Inverse">
        <item name="android:background">@color/app_theme_color</item>

        <!-- Support library compatibility -->
        <item name="background">@color/app_theme_color</item>
        <item name="android:alwaysDrawnWithCache">true</item>
        <item name="android:displayOptions">showTitle|showHome|homeAsUp</item>
        <item name="android:icon">@android:color/transparent</item>
    </style> 
```

然后在你的标签中，`AndroidManifest.xml`你需要引用这个。`application`

```
 android:theme="@style/CustomActionBarTheme" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-08-16T12:35:41.570

如果你只是想改变颜色，你可以简单地着色它：

```
 <style name="DotsDarkTheme" parent="@style/Widget.AppCompat.ActionButton.Overflow" >
    <item name="android:tint">@color/yourColor</item>
  </style> 
```

然后以您的风格使用它：

```
 <item name="actionOverflowButtonStyle">@style/DotsDarkTheme</item> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-05-24T23:42:26.357

如果您使用的是操作栏，请使用：

```
 toolbar.getOverflowIcon().setColorFilter(Color.WHITE , PorterDuff.Mode.SRC_ATOP); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-19T10:15:36.100

还值得补充的是，如果您只是想将溢出按钮更改为浅色或深色以配合您的操作栏颜色，则无需指定自定义图标即可完成。

**对于深色按钮颜色，请将您的主题设置为：**

```
<style name="MyTheme" parent="@style/Theme.AppCompat.Light">
    <item name="android:actionBarStyle">@style/MyTheme.ActionBar</item>
</style> 
```

![主题.全息.光](https://i.stack.imgur.com/NH2Ni.png)

**对于浅色按钮颜色添加 DarkActionBar：**

```
<style name="MyTheme" parent="@style/Theme.AppCompat.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/MyTheme.ActionBar</item>
</style> 
```

![Theme.Holo.Light.DarkActionBar](https://i.stack.imgur.com/JYV5E.png)

如果像我一样，你想要一个浅色按钮的颜色，但你希望溢出菜单是浅色的，你可以执行以下操作：

```
<style name="MyTheme" parent="@style/Theme.AppCompat.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/MyTheme.ActionBar</item>
    <item name="android:actionBarWidgetTheme">@style/MyTheme.ActionBarWidget</item>
</style>
<!-- This helps the PopupMenu stick with Light theme while the ActionBar is in Dark theme -->
<style name="MyTheme.ActionBarWidget"
    parent="android:Theme.Holo.Light">
    <item name="android:popupMenuStyle">@android:style/Widget.Holo.Light.PopupMenu</item>
    <item name="android:dropDownListViewStyle">@android:style/Widget.Holo.Light.ListView.DropDown</item>
</style> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:59:15.067

您可以在菜单项中使用自定义样式，如下所示

```
<item name="android:itemTextAppearance">@style/myCustomMenuTextApearance</item> 
```

像这样定义样式：

```
<style name="myCustomMenuTextApearance" parent="@android:style/TextAppearance.Widget.IconMenu.Item">
        <item name="android:textColor">@android:color/primary_text_dark</item>
</style> 
```

另请参阅[更改选项菜单的背景颜色](https://stackoverflow.com/questions/2944244/change-the-background-color-of-the-options-menu/8475357#8475357)和

[Android：自定义应用程序的菜单（例如背景颜色）](https://stackoverflow.com/questions/1593529/android-customize-applications-menu-e-g-background-color)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-27T03:57:28.050

在styles.xml 中创建以下样式，父项作为ActionButton Overflow 小部件，然后在您用于显示工具栏的那个活动的样式中使用该主题。

Step-1) 为 actionButtonOverflow 创建样式

```
<style name="DotsDarkTheme" parent="@style/Widget.AppCompat.ActionButton.Overflow" >
        <item name="android:tint">your color</item>
</style> 
```

步骤 2）在使用 actionBar 的活动中使用此样式

```
<style name="CustomMainActivityTheme" parent="Theme.AppCompat.Light.NoActionBar">
        <item name="actionOverflowButtonStyle">@style/DotsDarkTheme</item>
</style> 
```

# yii - Yii 在菜单上应用选定的类

> ID：16036205
> 
> 赞同：0
> 
> 时间：2013-04-16T11:47:04.637
> 
> 标签：yii

我在 yii 项目中有自定义菜单链接，我想在菜单上应用选定的类。

```
<li><a href="<?php echo $serverPath.CController::createUrl('user/index'); ?>" Dashboard</a></li> 
```

请提供任何建议，我对 CActive 菜单了解一点，但对这些类型的菜单不了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T10:15:11.673

在所有菜单上使用这个。我解决了一些我的问题。

```
 <li <?php if(Yii::app()->controller->id == 'any-controllery-nmae' && Yii::app()->controller->action->id == 'any-function'){echo 'class="active"';} else { echo '';} ?>>
  <a href="<?php echo $serverPath.CController::createUrl('any-controllery-nmae/any-function'); ?>" title="Dashboard">Dashboard</a></li>         
 </li>

   <li <?php if(Yii::app()->controller->id == 'any-controllery-nmae' && Yii::app()->controller->action->id == 'any-function'){echo 'class="active"';} else { echo '';} ?>>
  <a href="<?php echo $serverPath.CController::createUrl('any-controllery-nmae/any-function'); ?>" title="Dashboard">Dashboard</a></li>         
 </li>   

    <li <?php if(Yii::app()->controller->id == 'any-controllery-nmae' && Yii::app()->controller->action->id == 'any-function'){echo 'class="active"';} else { echo '';} ?>>
  <a href="<?php echo $serverPath.CController::createUrl('any-controllery-nmae/any-function'); ?>" title="Dashboard">Dashboard</a></li>         
 </li> 
```

# php - 在子域上上传文件

> ID：16036212
> 
> 赞同：0
> 
> 时间：2013-04-16T11:47:33.657
> 
> 标签：php, ftp, copy, subdomain

对于我的应用程序，我决定将静态和公共内容的目录更改为另一个域。但是，我在将文件复制到文件夹时遇到了麻烦。

我决定将子域的访问限制为特定路径。确实，当您登录到 ftp 时，您无法显示子文件夹

所以 atm，这就是我所拥有的：一个域 www.domain.com 一个子域 www.static.domain.com

仅允许我显示 www.static.domain.com 的内容的 Ftp 日志

然后，我希望在用户注册后复制文件和目录。我可以创建文件夹，但我不能复制文件...

getcwd() 函数返回：/datas/vol2/xxxx/var/www/domain.com/htdocs

而不是 /datas/vol2/xxxx/var/www/static.domain.com/htdocs

这就是为什么我不能将子域根目录下的 index.html 文件复制到我要创建的每个文件夹中。

你对此有什么想法吗？

谢谢你的回答 T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:49:12.083

“复制”或“移动”命令呢？

# service - IBM Worklight - 应用服务器启动时的初始化

> ID：16036216
> 
> 赞同：0
> 
> 时间：2013-04-16T11:48:03.447
> 
> 标签：service, adapter, ibm-mobilefirst

我是 IBM Worklight 的新手。

我实现了一个简单的 IBM Worklight HTTP 服务适配器。该适配器需要来自服务器数据库的一些数据，这些数据对于对该服务适配器的所有调用保持不变。

每次调用适配器时获取该数据是开销。因此，我想在 IBM Worklight 服务器首次启动时缓存这些值，并将它们用于对适配器的每次调用。

我不知道该怎么做？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:55:16.357

如果您希望进行客户端缓存，那么我建议您使用 JSONStore：[http](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/05_08_JSONStore_-_The_client_side_JSON_based_database_overview.pdf) ://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/05_08_JSONStore_-_The_client_side_JSON_based_database_overview.pdf 。

当您的应用程序启动时，您可以检查数据是否已保存在本地存储中。如果不存在，则从适配器中获取数据，然后将其保存在本地。在每次 http 适配器调用时，客户端将拥有所需的常量数据。

我的回答是假设您需要为客户端缓存的数据来进行适配器调用。如果您有一个工作灯适配器正在从另一个工作灯适配器获取数据，那么您将需要一个不同的解决方案。

# android - 从 JSON 响应中检索值

> ID：16036220
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:48:22.973
> 
> 标签：android, json, parsing

我正在编写一个 android 应用程序，目前我收到了 JSON 回复：

```
{"Error":"User already exists"} 
```

这是我收到的消息的示例

我之后的部分是：“用户已经存在”，我需要解析它。

该消息当前存储在一个字符串中，因此我需要将其转换为 JSONArray，然后将其转换为 JSONOject，然后才能调用 getString()。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:51:22.130

这可能会帮助你

```
String Respones= "{\"Error\":\"User already exists\"}";
try {
        JSONObject jobj = new JSONObject(Respones);         
        String strError = jobj.getString("Error");              
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:53:48.300

如果您想使用默认的 Android 工具，我认为您可以直接使用 JSONTokener 和 JSONObject 来完成。

如果您想要更好，请查看 Jackson 库，它非常强大，开源，有点标准：

[Android JSON杰克逊教程](https://stackoverflow.com/questions/11132891/android-json-jackson-tutorial)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T11:54:17.257

试试这个代码

```
JSONArray jsonArray = new JSONArray(ResponseString);

for (int i = 0; i < jsonArray.length(); i++) {
JSONObject jsonObject = jsonArray.getJSONObject(i);

String result = jsonObject.getString("Error").toString().trim();

} 
```

# c - 自己的 C Shell 中的历史

> ID：16036222
> 
> 赞同：0
> 
> 时间：2013-04-16T11:48:26.433
> 
> 标签：c, segmentation-fault

我正在编写自己的 C Shell，但在实现某些东西来维护命令历史时遇到了麻烦。我想将它存储在一个带有整数和字符串的结构中（这样我就可以将命令及其在内存中的位置保存在一起），我只想存储 20 个元素。

我尝试使用其他人在此网站上提出的问题中的代码，但是当我编译它时，它只返回一个分段错误，所以我猜指针有问题。

这是我找到的与历史相关的所有代码：

```
char** cmdHistory; /* command history - no longer than 20 elements & null terminated */
int historySize = 0;

void addToHistory(char* newEntry) {
    char** h;
    int historySize = 0;
    while (*cmdHistory != NULL) 
    if (sizeof(cmdHistory) == 20) {
        char** newPtr = ++cmdHistory;
        free(cmdHistory[0]);
        cmdHistory = newPtr;
        h = (char**)realloc(cmdHistory,20*sizeof(int));
        cmdHistory = h;
        cmdHistory[20] = newEntry;
    } else {
        h = (char**)realloc(cmdHistory,sizeof(int)+sizeof(cmdHistory));
        cmdHistory = h;
        cmdHistory[historySize] = newEntry;
        ++historySize;
    }
    }

void printHistory() {
    char** currCmd = cmdHistory;
    printf("\n\n");
    while (*currCmd != NULL) {
        printf("%s\n", *currCmd);
        currCmd++;
    }
    printf("\n\n");
}

int main() {
    cmdHistory[20] = NULL; /* null terminate the history */
} 
```

我对 C 非常无用，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:13:56.583

您可以使用链接列表来实现历史记录，始终在开头添加当前命令。像这样：

```
#include <stdio.h>

typedef struct history
{
    char *ent;
    struct history * next;
}hist;

hist *top = NULL;

void add(char *s)
{
    hist *h =  (hist *) malloc(sizeof(hist));
    h->ent = s;
    h->next = top;
    top = h;
}

void print()
{
    hist *i;
    for (i = top; i != NULL; i = i->next)
        printf("%s\n", i->ent);
}

int main()
{
    add("command");
    print();
} 
```

# sql - 从 diff 表中获取 diff 数据库数据的策略

> ID：16036223
> 
> 赞同：0
> 
> 时间：2013-04-16T11:48:28.077
> 
> 标签：sql, postgresql, optimization, query-optimization

问题

*   我有两个数据库 user_works 数据库和定价数据库。
*   我想加入两个表 user_table 这是在 user_works 数据库和rent_table 这是在定价数据库中使用 user_id

到目前为止我所做的

*   我第一次调用 user_works db。
*   从 user_table 中获取 id。
*   然后将 ids 传递给定价数据库中的rent_table

例子：

```
$user_id = select user_id fron user_table WHERE name=abc 
```

将 $user_id 传递给 dbObject user_works db 并获取用户 ID

```
$rent = select user_id,rent from rent_table WHERE user_id IN ( $user_ids ) 
```

将 $rent 传递给定价数据库的 dbObject 我想在 php 应用程序中执行此操作

有没有更好的方法来做到这一点。定价数据库真的很重吗？比如使用临时表等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:20:12.130

使用定价数据库连接中的 dblink

```
select r.*
from
    dblink(
        'dbname=user_works password=password user=user',
        $$ select user_id from user_table where name = 'abc' $$
    ) as u(user_id int)
    inner join
    rent_table r on r.user_id = u.user_id 
```

您需要以超级用户身份创建 dblink 扩展：

```
create extension dblink; 
```

或者从远程数据库创建一个本地视图：

```
create view user_table as
select *
from
    dblink(
        'dbname=user_works password=password user=user',
        $$ select user_id, name from user_table $$
    ) as t(user_id int, name text)
; 
```

现在查询它，因为它是本地的：

```
select * from user_table where name = 'abc'; 
```

# c++ - reinterpret_cast 和交叉转换

> ID：16036224
> 
> 赞同：1
> 
> 时间：2013-04-16T11:48:29.317
> 
> 标签：c++, reinterpret-cast

```
#include<iostream>

struct I1
{ 
    virtual void nb1()=0;
    virtual ~I1(){}
};

struct I2
{ 
    virtual void nb2()=0;
    virtual void nb22()=0;
    virtual ~I2(){}
};

struct C12 : I1, I2
{
    virtual void nb1(){std::cout << "nb\n";}    
    virtual void nb2(){std::cout << "nb2\n";}    
    virtual void nb22(){std::cout << "nb22\n";}
};

int main()
{
    I2 * p2 = new C12; 
    I1 * p1 = reinterpret_cast<I1*>(p2);
    return 1;
} 
```

在这里使用 a 有什么禁忌`reinterpret_cast`吗？我应该强制使用`dynamic_cast`吗？

只有 I1 和 I2 是纯虚拟的才可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:11:14.433

`reinterpret_cast`不安全；你应该总是使用`dynamic_cast`. `I1`并且`I2`是纯虚类是无关紧要的；作为它们的子对象，`C12`它们具有非零存储要求。实际上，在以下程序中：

```
int main() {
    I2 * p2 = new C12; 
    I1 * p1 = reinterpret_cast<I1*>(p2);
    std::cout << p2 << '\n';
    std::cout << p1 << '\n';
    std::cout << dynamic_cast<I1*>(p2) << '\n';
    p1->nb1();
} 
```

输出是：

```
0x14de0c8
0x14de0c8
0x14de0c0   // !!!
nb2         // !!! 
```

你可能会想到[空基优化](http://en.wikibooks.org/wiki/More_C++_Idioms/Empty_Base_Optimization)（1.8p5）；但这不适用于具有需要 vptr 的虚拟方法的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:11:38.727

> 在这里使用 a 有什么禁忌`reinterpret_cast`吗？

不要那样做；它会给出未定义的行为。

通常，基本子对象存储在完整对象内的不同位置，因此演员表最终会指向错误的位置。您可能会偶然发现它对这些空基类“起作用”，因为它们可能（或可能不会）最终位于同一位置；但你当然不能依赖这种行为。

> 我应该强制使用`dynamic_cast`吗？

如果您在编译时不知道通用派生类型 ( `C12`)，那么这是唯一明智的选择。请注意，它需要多态类（这里就是这种情况）。

如果您确实知道常见的派生类型，那么您可以使用以下方法进行转换`static_cast`：

```
I1 * p1 = static_cast<C12*>(p2); 
```

请注意，派生类的“向上转换”可以隐式完成；只有基类的“向下转型”需要显式转型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T11:57:45.570

由于编译器*可能会*为 C12 的两个子对象中的每一个保留一些字节，即使它们没有成员或基类，并且从那时起这两个子对象的地址是不同的，这可能会导致问题。该标准只是说该演员的结果是未指定的（§5.2.10,7）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:59:47.267

如果你有一个 C12 类型的对象 x 并且有三个指向它的指针，如下所示：

```
C12 x;
C12 *pA = &x;
I1  *pB = &x;
I2  *pC = &x; 
```

那么指针 pA、pB 和 pC 不一定相等。所以你不能只是在 pA、pB 和 pC 之间来回重新解释。您可以安全地在 pA 和 pB 之间以及 pA 和 pC 之间进行 static_cast 或 dynamic_cast。因此，要从 I2* 获得 I1*，您需要先将 p2 转换为 C12*，然后再转换为 I1*。选择你最喜欢的线路：

```
I1 * p1 = static_cast<C12*>(p2);
I1 * p1 = dynamic_cast<C12*>(p2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:04:02.553

使用 . 几乎总是坏主意`reinterpret_cast`。

在这里你可以做一个`dynamic_cast`或两个`static_cast`（通过基类）。

* * *

从 ABI 的角度来看，您`C12`是：

```
struct C12 {
    I1 parent1;
    I2 parent2;
};

C12 obj; 
```

现在您已经获得了指向 inner的指针`obj.parent2`，但不是`obj`.

# c++ - .net 入门 - 使用 SqlConnection 类（VS C++）

> ID：16036232
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:48:47.897
> 
> 标签：c++, .net, visual-c++, visual-studio-2012, sql-server-express

我是 .net 的菜鸟，但据我所知，可以使用 c++ 在 .net 中编程。

我正在使用 Visual Studio Express 2012 和 SQL Server Express 2012。

我想做的是：

我正在尝试在代码中连接到 SQL Server。据我所知，这在 .net 中很容易（例如，请参阅链接中的 SO 链接[）](https://stackoverflow.com/questions/6931638/test-sql-connection-string-in-c-win32)，并且可以为此使用 SqlConnection 类（例如，请参阅链接中的 MSDN 链接[）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection(v=vs.71).aspx)。

我该怎么做？

我需要做什么/安装才能在 VS c++ 中使用 SqlConnection 类？

我想我需要以某种方式安装 .net SDK，但是如何集成它以便我可以在 VS 中使用它？为了让我可以在 VS Express 中使用这个类，有哪些步骤（或者我是否需要获得这个 VS.net IDE？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:27:17.800

据我所知，如果你想使用 C++ 代码中的 .net 库，你应该使用 C++/CLI。[这里](http://msdn.microsoft.com/en-us/library/68td296t.aspx)有一些关于 C++/CLI 的信息。也许还有其他方法可以在没有 C++/CLI 的情况下使用 .net，但我不确定这是否容易。C++ 是完全非托管代码，与 .net 相反。

另一种方法是使用 C++ 特定的 SQL 库。例如，Qt 对此没有不好的类。

最后：也许尝试将 C# 与 .net 一起使用？+)

# php - 检测到意外导航时显示验证码以防止流量滥用

> ID：16036237
> 
> 赞同：2
> 
> 时间：2013-04-16T11:49:02.380
> 
> 标签：php, jquery, captcha, web-traffic, abuse

我注意到一些用户通过下载多个文件（例如同时 500 个文件）并在短时间内打开更多页面来超载我的网站，如果用户检测到意外导航，我想显示**验证码。**

我知道如何实现**Captcha**，但我不知道使用 (PHP) 检测流量滥用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T08:49:10.420

一种常见的方法是使用 memcached 之类的东西来按分钟存储请求，我已经开源了一个实现此目的的小类：[php-ratelimiter](https://github.com/akirk/php-ratelimiter)

如果您有兴趣更全面地解释为什么需要按分钟存储请求，[请查看这篇文章](http://alexander.kirk.at/2013/04/19/add-a-rate-limit-to-your-website/)。

总而言之，您的代码最终可能如下所示：

```
if (!verifyCaptcha()) {
    $rateLimiter = new RateLimiter(new Memcache(), $_SERVER["REMOTE_ADDR"]);
    try {
        $rateLimiter->limitRequestsInMinutes(100, 5);
    } catch (RateExceededException $e) {
        displayCaptcha();
        exit;
    }
} 
```

实际上，代码是基于每分钟的，但您可以很容易地将其调整为每 30 秒：

```
private function getKeys($halfminutes) {
    $keys = array();
    $now = time();
    for ($time = $now - $halfminutes * 30; $time <= $now; $time += 30) {
        $keys[] = $this->prefix . date("dHis", $time);
    }
    return $keys;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:49:09.383

**介绍**

[在防止 PHP 脚本被淹没](https://stackoverflow.com/questions/10155339/prevent-php-script-from-being-flooded)之前已经回答了一个类似的问题，但这可能还不够充分：

*   它使用`$_SERVER["REMOTE_ADDR"]`并且它们是一些共享连接具有相同的`Public IP Address`
*   有很多`Firefox addon`可以允许用户为每个请求使用多个代理

**多个请求！= 多个下载**

防止多次请求与多次下载完全不同，为什么？

以免想象一个`10MB`需要`1min`下载的文件，如果您限制用户说出`100 request per min` 这意味着您有权访问用户下载

```
10MB * 100 per min 
```

要解决此问题，您可以查看[下载 - 每个用户的最大连接数？](https://stackoverflow.com/questions/12902129/download-max-connections-per-user/12902731#12902731).

**多个请求**

您可以使用返回页面访问`SimpleFlood`来`memcache`限制每秒用户数。它用于`cookies`解决共享连接问题并尝试获取真实 IP 地址

```
$flood = new SimpleFlood();
$flood->addserver("127.0.0.1"); // add memcache server
$flood->setLimit(2); // expect 1 request every 2 sec
try {
    $flood->check();
} catch ( Exception $e ) {
    sleep(2); // Feel like wasting time 
    // Display Captcher
    // Write Message to Log
    printf("%s => %s %s", date("Y-m-d g:i:s"), $e->getMessage(), $e->getFile());
} 
```

请注意，`SimpleFlood::setLimit(float $float);`接受浮动，因此您可以拥有

```
$flood->setLimit(0.1); // expect 1 request every 0.1 sec 
```

**使用的类**

```
class SimpleFlood extends \Memcache {
    private $ip;
    private $key;
    private $prenalty = 0;
    private $limit = 100;
    private $mins = 1;
    private $salt = "I like TO dance A #### Lot";

    function check() {
        $this->parseValues();
        $runtime = floatval($this->get($this->key));
        $diff = microtime(true) - $runtime;
        if ($diff < $this->limit) {
            throw new Exception("Limit Exceeded By :  $this->ip");
        }
        $this->set($this->key, microtime(true));
    }

    public function setLimit($limit) {
        $this->limit = $limit;
    }

    private function parseValues() {
        $this->ip = $this->getIPAddress();
        if (! $this->ip) {
            throw new Exception("Where the hell is the ip address");
        }

        if (isset($_COOKIE["xf"])) {
            $cookie = json_decode($_COOKIE["xf"]);
            if ($this->ip != $cookie->ip) {
                unset($_COOKIE["xf"]);
                setcookie("xf", null, time() - 3600);
                throw new Exception("Last IP did not match");
            }

            if ($cookie->hash != sha1($cookie->key . $this->salt)) {
                unset($_COOKIE["xf"]);
                setcookie("xf", null, time() - 3600);
                throw new Exception("Nice Faking cookie");
            }
            if (strpos($cookie->key, "floodIP") === 0) {
                $cookie->key = "floodRand" . bin2hex(mcrypt_create_iv(50, MCRYPT_DEV_URANDOM));
            }
            $this->key = $cookie->key;
        } else {
            $this->key = "floodIP" . sha1($this->ip);
            $cookie = (object) array(
                    "key" => $this->key,
                    "ip" => $this->ip
            );
        }
        $cookie->hash = sha1($this->key . $this->salt);
        $cookie = json_encode($cookie);
        setcookie("xf", $cookie, time() + 3600); // expire in 1hr
    }

    private function getIPAddress() {
        foreach ( array(
                'HTTP_CLIENT_IP',
                'HTTP_X_FORWARDED_FOR',
                'HTTP_X_FORWARDED',
                'HTTP_X_CLUSTER_CLIENT_IP',
                'HTTP_FORWARDED_FOR',
                'HTTP_FORWARDED',
                'REMOTE_ADDR'
        ) as $key ) {
            if (array_key_exists($key, $_SERVER) === true) {
                foreach ( explode(',', $_SERVER[$key]) as $ip ) {
                    if (filter_var($ip, FILTER_VALIDATE_IP) !== false) {
                        return $ip;
                    }
                }
            }
        }

        return false;
    }
} 
```

**结论**

这是概念的基本证明，可以添加其他层，例如

*   为不同的 URLS 设置不同的限制
*   添加对您在特定分钟或小时内阻止用户的处罚的支持
*   `Tor`连接检测和不同限制
*   ETC

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T16:56:41.773

我认为您可以在这种情况下使用会话。初始化会话以存储时间戳[使用微时间以获得更好的结果]，然后获取新页面的时间戳。差异可用于分析页面被访问的频率并显示验证码。

您还可以在被访问的页面上运行计数器并使用二维数组来存储页面和时间戳。如果被访问的页面的值突然增加，那么您可以检查时间戳差异。

# networking - LabView Client VI 通过网络 (LAN) 与 WinCC OPC Server 通信时出错

> ID：16036239
> 
> 赞同：2
> 
> 时间：2013-04-16T11:49:08.693
> 
> 标签：networking, labview, plc, opc

我正在尝试使用 Siemens PLC 使某些系统自动化；为此，我们开发了用于控制和监视的 WinCC Flexible RT 应用程序，并将基于 PC 的 HMI 面板声明为 OPC 服务器。哪个工作正常。

现在，当我尝试在同一台 PC 上的 WinCC 或 Labview 中创建 OPC 客户端应用程序时，我能够访问客户端上服务器的所有标签，我能够这样做。

当我尝试在通过局域网连接的其他计算机上创建客户端应用程序时[完美且配置良好的网络工作]，在这种情况下我无法访问 OPC 服务器/标签。

在这种情况下可以做些什么。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-11T08:29:32.760

在 OPC 客户端和服务器应用程序之间建立连接的最简单方法是执行以下操作：

1.  关闭两台机器上的防火墙
2.  使用相同的登录名和密码在两台机器上创建相同的 Windows 帐户
3.  对于 Windows 帐户（在 2 中指出），通过运行“dcomcnfg”命令并​​导航到“控制台根目录->组件服务->计算机->我的电脑->com 安全”来允许所有“访问权限”和“启动和激活权限”

本文[http://opc-da.com/Winsetup.html中给出了如何执行上述步骤的更详细示例](http://opc-da.com/Winsetup.html)

此外，还有一个功能强大的 OPC 客户端 API，使用 OPC .NET API 在 LabVIEW 上实现，并附有有关如何使用的详细文档：http: [//opc-da.com](http://opc-da.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:40:04.293

如果您提到服务器和客户端计算机上的操作系统，那将会很有帮助。无论如何，正如@Ken 所提到的，我猜这是一个 DCOM 问题。

自从我使用这种东西已经有一段时间了，但你可以试试这篇文章：[http](http://www.opcactivex.com/Support/Tutorials/DCOM_Tutorial_-_Configuring_th/DCOM_XP/dcom_xp.html) ://www.opcactivex.com/Support/Tutorials/DCOM_Tutorial_-_Configuring_th/DCOM_XP/dcom_xp.html看看它是否有帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T14:56:39.357

除了端口和防火墙...确保运行 OPC 客户端的帐户可以通过 DCOM 默认设置或 OPC 服务器特定设置（也是 DCOM 配置的一部分）访问 OPC 服务器) 在服务器机器上。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T12:36:01.413

确保防火墙没有阻止连接。在两侧禁用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T13:31:13.407

看看这篇 NI 文章：http: [//zone.ni.com/reference/en-XX/help/371361G-01/lvhowto/psp_firewall/](http://zone.ni.com/reference/en-XX/help/371361G-01/lvhowto/psp_firewall/)

请记住，OPC/共享变量使用的 tcp 端口在 LV2009 和 LV2011 之间发生了变化，因此根据您拥有的版本，端口可能会有所不同。

# entity-framework - .net 中的 linq 和实体框架数据模型

> ID：16036241
> 
> 赞同：0
> 
> 时间：2013-04-16T11:49:12.153
> 
> 标签：entity-framework, linq-to-sql, connection-string

在实体框架数据模型和 Linq to SQL 中使用连接字符串有什么不同吗？

app.config 文件中的连接字符串如下所示

在 linq `<add name="EFProject.Properties.Settings.TestDBConnectionString" connectionString="Data Source=datasourse;Initial Catalog=TestDB;User ID=uname;Password=pwd" providerName="System.Data.SqlClient" />`

在实体框架中：`<add name="TestDBEntities" connectionString="metadata=res://*/TestDB.csdl|res://*/TestDB.ssdl|res://*/TestDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=datasourse;initial catalog=TestDBDB;user id=uname;password=pwd;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />`

语法差异意味着......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:30:38.177

EntityFramework 连接字符串包含定义模型的元数据文件的详细信息。这些是指定的 .ssdl、.csdl 和 .msl 文件。它们共同构成了 edmx 文件。

# openssl - 处理证书中的主机名、主题备用名称

> ID：16036243
> 
> 赞同：1
> 
> 时间：2013-04-16T11:49:17.317
> 
> 标签：openssl, x509

在 x509 证书中应该如何比较主机名？

例如：如果证书是注册的`*.abcorp.com`，那么像这样的网站`www.sales.abcorp.com`可以对该证书有效吗？还是只有`sales.abcorp.com`在这种情况下才有效？

这个问题是为了消除我对 ssl 证书主机名检查实施的疑问。

谷歌浏览器与后者一起使用。即，如果证书的 CN 字段为`*.abcorp.com`，则只有站点 like`sales.abcorp.com`在该证书下有效，并且站点 like`www.sales.abcorp.com`将抛出错误，指出服务器证书与 URL 不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:59:48.070

此类证书称为通配符证书。在[wiki](http://en.wikipedia.org/wiki/Wildcard_certificate)上阅读了通配符证书，发现只支持单级子域匹配。

由于在域上支持 www 可能会意外地支持多个级别的域。因此，www.sales.abcorp.com 等案例不匹配。

# android - 是否有基于 Android 的 Google Glass 模拟器？

> ID：16036245
> 
> 赞同：48
> 
> 时间：2013-04-16T11:49:25.380
> 
> 标签：android, google-glass

是否可以定义一个 Android 虚拟设备用于开发 Google Glass 应用程序（直到设备广泛可用）？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-02T12:01:31.797

目前还没有官方的 Glass Emulator。

我通过将 Glass APK 安装到 Nexus 7 平板电脑中克服了这个问题。

它工作得很好：

*   我可以在[http://google.com/myglass中控制它](http://google.com/myglass)
*   Mirror API 完美运行。
*   GDK Sneak Peak 不起作用。

我在这里描述了所有必需的步骤： [http ://www.elekslabs.com/2013/11/google-glass-development-without-glass.html](http://www.elekslabs.com/2013/11/google-glass-development-without-glass.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-16T12:38:19.757

没有开箱即用的模拟器。

您可以使用[Playground](https://developers.google.com/glass/playground)预览您的卡片，这将根据您在时间线帖子对象中提供的属性向您展示卡片的布局方式。在右侧。如果您想为卡片提供自定义 HTML 模板，只需将该视图右侧的视图切换为 HTML。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-29T09:50:44.827

是的，您可以.. 将您的手机用作谷歌眼镜。

[http://pathofacoder.com/2013/07/19/installing-google-glass-in-an-android-phone/](http://pathofacoder.com/2013/07/19/installing-google-glass-in-an-android-phone/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-22T11:12:14.680

这里是关于没有 google glass [google glass emulator](http://glass-apps.org/google-glass-emulator) 和 github [Scarigami Mirror API上的项目的可用模拟器的信息](https://github.com/Scarygami/mirror-api)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T11:56:55.733

事实上，我刚刚看到一篇 Engadget 文章（我想是今天早上），它宣布[Google Glass API 现已上线](http://www.engadget.com/2013/04/15/google-glass-api-documentation-now-live-glassware-sample-code/)

Engadget 文章的其他链接：

1.  [https://plus.google.com/+GoogleDevelopers/posts/cwWuUY6xYKW](https://plus.google.com/+GoogleDevelopers/posts/cwWuUY6xYKW)（最初公布于）
2.  [https://developers.google.com/glass/（API](https://developers.google.com/glass/)的实际链接）:-)

但是，正如开发者网站列出的那样，没有任何特定于 Android 的内容。:-(

（来源：[https](https://developers.google.com/glass/downloads/) ://developers.google.com/glass/downloads/ ）

目前支持的平台有：

1.  爪哇
2.  Python
3.  去
4.  PHP
5.  。网
6.  红宝石
7.  镖

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T12:10:56.917

我今天早上一直在挖掘文档，据我所知，您可以使用示例[https://glass-java-starter-demo上的相同代码查看将哪种类型的代码/对象发送到 Glass .appspot.com/](https://glass-java-starter-demo.appspot.com/)（此处提供代码[https://github.com/googleglass/mirror-quickstart-java](https://github.com/googleglass/mirror-quickstart-java)）

但是一个真正的模拟器，你可以看到 Glass 屏幕将如何显示，而不是真的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-10T09:39:06.403

有一个 Unofficial Mirror API 尝试使用现有的 Google API 重现玻璃设备的行为。你可以在这里查看。我还没有测试过。

[http://glass-apps.org/google-glass-emulator](http://glass-apps.org/google-glass-emulator)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-08T07:19:33.837

根据谷歌的说法，Glass 必须被视为一个独特的平台。为玻璃开发的应用程序被称为 Glasswares。它们几乎都是托管在 GAE 中的基于 Web 的服务。官方声明说，

> Google Mirror API 允许您构建与 Google Glass 交互的基于 Web 的服务，称为 Glassware。

当然 glass 在 ICS Android 4.0.4 上运行，这并不意味着您可以像开发 Android 应用程序一样开发 glasswares。您需要 Google 的 Mirror API 在您的玻璃杯和玻璃器皿之间同步数据。

到目前为止，它处于资源管理器状态，只有拥有谷歌眼镜的开发人员和资源管理器才能访问 Mirror API。但正如@infoman 回答的那样，您可以使用[Scarigami](https://developers.google.com/glass/playground) [Mirror API](https://github.com/Scarygami/mirror-api)，并且Playground可以充当您的模拟器。

# php - MAMP 运行，PHP 没有

> ID：16036248
> 
> 赞同：1
> 
> 时间：2013-04-16T11:49:30.977
> 
> 标签：php, mamp

从简单的 HTML 表单调用 php 文件 - 例如，*- 在浏览器中获取 php 源代码作为结果（见下文）。*

 *想出的问题是 PHP 没有在 localhost 上运行（使用旧版本的 MAMP）。检查、仔细检查并升级到最新的 MAMP PRO 版本 (2.1.4)。

仍然有同样的问题 - PHP & Apache 配置看起来正确。

想法？（猜测第一个建议是放弃 MAMP。）

PHP：

```
<?php
//Open a database connection
$con = mysqli_connect('localhost', 'root', 'root') or die( mysql_error() ); mysql_select_db($database) or die( mysql_error() );
//Declare variables for form data
$toDoItem = mysql_real_escape_string ($_POST["toDoItem"]);
$toDoDue = mysql_real_escape_string ($_POST["toDoDue"]);
$toDoOwner = mysql_real_escape_string ($_POST["toDoOwner"]);
//Query
$sql = "INSERT INTO toDo 
    (toDoItem, toDoDue, toDoOwner)
    VALUES  ($toDoItem, $toDoDue, $toDoOwner)";
$result = mysql_query($sql) or die( mysql_error() );
if($result){
    echo ("<br>Data input successful.");
} else {
    echo ("<br>Data input failed.");
}
//close the connection
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:54:26.700

当您访问 localhost 时，您会看到 MAMP 屏幕吗？我认为，如果您在屏幕上单击 PhpInfo，它也会打印出常规的 php 语句。

似乎是因为安装错误*

# php - 使用插件 Exec-PHP 在 wordpress 中读取表单

> ID：16036251
> 
> 赞同：3
> 
> 时间：2013-04-16T11:49:38.947
> 
> 标签：php, wordpress, plugins

我们正在使用 Exec-PHP 在我们的 wordpress 页面中使用 PHP。但是我们遇到了一个问题，我们无法从文本字段表单中读取。这是一个 Exec-PHP 限制（如果是这样，任何人都可以推荐一个允许这样做的插件）还是我们的代码有问题？

这是我们的代码：

```
<form action="" method="post">
<input type="text"  value="voornaam"  />
<input type="submit" value="Verzend" />
<input type="hidden" name="button_pressed" value="1" /> 
```

```
<?php

if(isset($_POST['button_pressed']))
{
    echo $_POST["voornaam"];
    echo 'Done';
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:00:19.987

您应该添加：

```
<input type="text" value="voornaam" /> 
```

然后，在您的 PHP 中，您可以使用：

```
echo $_POST["voornaam"]; 
```

你的表格：

```
<form action="" method="post">
  <input type="text" value="voornaam" />
  <input type="submit" value="Verzend" />
  <input type="hidden" name="button_pressed" value="1" />
</form> 
```

# php - jQuery 循环 JSON 数据

> ID：16036252
> 
> 赞同：1
> 
> 时间：2013-04-16T11:49:40.210
> 
> 标签：php, jquery, json, jsonp

我创建了 API 来从我的服务器检索数据，然后我得到了 json 格式的数据，如下所示：

```
{
"items": [
    {
        "2013-03-28": 1771,
        "2013-03-29": 1585,
        "2013-03-30": 1582,
        "2013-03-31": 1476,
        "2013-04-01": 2070,
        "2013-04-02": 2058,
        "2013-04-03": 1981,
        "2013-04-04": 1857,
        "2013-04-05": 1806,
        "2013-04-06": 1677,
        "2013-04-07": 1654,
        "2013-04-08": 2192,
        "2013-04-09": 2028,
        "2013-04-10": 1974,
        "2013-04-11": 1954,
        "2013-04-12": 1813,
        "2013-04-13": 1503,
        "2013-04-14": 1454,
        "2013-04-15": 1957,
        "2013-04-16": 1395
    }
  ]
} 
```

如何使用 jQuery 动态循环使用我的 json 数据？我的代码：

```
<html>
<head></head>
<body>
<script src="jquery-1.9.1.js"></script>
<script>
   $(document).ready(function() {
    $.ajax({
        type : "GET",
        url: "myurl.php",
        cache: false,
        dataType: "jsonp",
        success:function(data){
            if(data==''){
                alert('Fail');
            }else{
                alert('Success');   
            }
        }
    })
  });
</script>
</body>
</html> 
```

如何修改我的 jQuery 以在数据每天更改的日期之后动态获取数据，如我在上面编写的数据示例中？之前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:56:02.693

您的示例数据需要考虑一些事项，但在您的情况下，以下内容可以解决问题：

```
var importantObject = data.items[0];
for(var item in importantObject ){
    var theDate = item;//the KEY
    var theNumber = importantObject[item];//the VALUE
} 
```

[这是一个工作示例](http://jsfiddle.net/JUz4G/1/)

但这一切意味着什么？...

首先，我们需要获取要使用的对象，这是在 a `{ }`（表示对象）之间找到的日期/数字列表 - 数组定义为`[ ]`. 通过给出的示例，可以这样实现：

```
var importantObject = data.items[0]; 
```

因为`items`是一个数组，我们想要的对象是该数组中的第一项。

然后我们可以使用 foreach 技术，它有效地迭代对象的所有属性。在此示例中，属性是日期值：

```
for(var item in importantObject ){ ... } 
```

因为我们在迭代属性，`item`将是属性值（即日期位），所以 item*是*日期值：

```
var theDate = item;//the KEY 
```

最后我们得到数字部分。我们可以通过使用属性索引（相对于对象）的字符串值来访问任何给定对象属性的值，如下所示：

```
var theNumber = importantObject[item];//the VALUE 
```

* * *

如果您已经知道要为哪个日期设置值，那么您可以像这样直接访问它：

```
var myValue = data.items[0]["2013-04-16"];//myValue will be 1395 in this example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:57:16.740

//获取您的详细信息。

var 详细信息 = data.items[0];

$.each（详细信息，函数（键，val）{

```
console.log(key + ": " + val); 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:01:42.307

您可以使用[jQuery 的每个函数](http://api.jquery.com/jQuery.each/)来执行此操作。例如像这样：

```
$.each(data, function(k, v) {
    // Access items here
}); 
```

哪里`k`是键，`v`是当前处理的项目的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:02:41.753

使用[**jQuery.each()**](http://api.jquery.com/jQuery.each/)循环遍历`items`

```
$.each(data.items[0], function (key, value) {
    console.log(key + ": " + value);
    var date = key;
    var number = value;
}); 
```

[**在这里演示**](http://jsfiddle.net/wZARH/)

# java - 下拉struts Jsp中未返回值

> ID：16036253
> 
> 赞同：0
> 
> 时间：2013-04-16T11:49:41.320
> 
> 标签：java, jsp, struts1

我正在使用下拉选项集合来选择一组值。

```
<html:select property="cddSourceOfFunds" styleId="cddSourceOfFunds" styleClass="selectDefault" onchange="return mtmrsValRequiredselect(this.id,'selectDefault','selectDefault errorBdr','errorSpan1','0')">
                        <logic:present name="sourceOfFundsList" scope="request">
                            <html:option value="0">
                                <bean:message key="mtmrs.validation.select" />
                            </html:option>
                            <html:optionsCollection name="sourceOfFundsList" label="value"
                                value="value" />
                        </logic:present>
                        <logic:notPresent name="sourceOfFundsList" scope="request">
                            <html:option value="0">
                                <bean:message key="mtmrs.validation.select" />
                            </html:option>
                        </logic:notPresent> 
```

我将 cddSourceOfFunds 的值设置为 action 表单并返回到 jsp。但是下拉列表仍然显示没有发送数据.. 即“选择”作为默认值。但是，我可以使用在表单中写入属性值

```
<bean:write name = "/remittanceTransactionCdd" property ="cddSourceOfFunds" /> 
```

我希望下拉菜单在加载时显示我从操作方法设置的默认值。属性值在表单中。但无法在下拉列表中显示。我该如何实现它。帮助赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:14:33.600

由于您使用逻辑迭代来加载列表框中的项目，因此您面临问题选项 1\. 在加载时使用 jquery 或 javascript 设置列表框的值使用 jstl 访问表单数据，这将在请求范围内可用2\. 或者使用 html:options [http://www.coderanch.com/t/57329/Struts/populate-html-select-options-struts](http://www.coderanch.com/t/57329/Struts/populate-html-select-options-struts)代替使用逻辑迭代器迭代列表

# jsf - JSF 动作方法

> ID：16036257
> 
> 赞同：0
> 
> 时间：2013-04-16T11:49:56.870
> 
> 标签：jsf, action

如链接[http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)中所述，它将参数传递给方法调用，action="#{bean.edit(item) }"

但是在我的 jsf 中我收到错误，因为方法必须具有签名“字符串方法（）”但具有签名“无效方法”

# azure - 在 Windows Azure 中实现 Worker 角色

> ID：16036260
> 
> 赞同：1
> 
> 时间：2013-04-16T11:50:09.183
> 
> 标签：azure, cloud, azure-worker-roles

我们希望在 Windows Azure 云服务中接收信号，并希望对我们的策略提供一些反馈。

* * *

我们目前的项目：

*   **作为客户端运行的**物理 GPS 单元。****
***   **作为服务器运行的**Windows Azure 云服务。******

 ****1）物理GPS单元：我们使用XT-4000[Xirgo Technologies]物理GPS单元，这是一个强大的跟踪、监控和控制网关设备。此设备需要 UDP 或 TCP 端口进行通信。

2) Windows Azure 云服务：这里我们需要打开一个 TCP 监听器，它会监听设备 [XT-4000] 推送的传入数据。

这就是我们认为我们的策略应该是什么。感谢所有建议。

*   使用工人角色。
*   设置 TCP 侦听器以接收来自设备的传入信号。

**[但问题是IP地址和端口号应该是什么。Windows Azure 云服务，因为设备需要借助 IP 地址和端口号发送数据。]**

*以下命令将在设备中设置以推送数据*

**设备命令**

```
 “+XT:1001,<Port no>,<IPaddress>,<1>” 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:00:55.397

1) 你可以有任何你想要的端口号（UDP 或 TCP）。只需在服务的配置文件中设置它。

2）IP地址会有点棘手。部署服务后，您将被分配一个 VIP。*只要*您不删除该服务，这将不会改变。如果这样做，您将失去 VIP，设备将停止工作。如果设备可以接受 URL 会更好，这将完全消除问题。无论如何，一旦部署，您仍然可以更新服务，但您需要使用升级与删除/重新部署或 VIP 交换。

拍****

# grails - Grails 缓存资源不起作用

> ID：16036263
> 
> 赞同：3
> 
> 时间：2013-04-16T11:50:17.703
> 
> 标签：grails, tomcat7, grails-2.0

请给一些建议...

缓存资源现在无法正常工作，几天后才开始工作。相同的代码相同的插件，我发现与以前相比有一个尊重（虽然它工作正常），同时关闭 tomcat 服务器。它不会自行关闭，并在控制台中提供一些信息，如下所示：

```
INFO: SessionListener: contextDestroyed()
Apr 16, 2013 6:41:19 AM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextDestroyed()
Apr 16, 2013 6:41:19 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-apr-8080"]
Apr 16, 2013 6:41:19 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-apr-8009"]
Apr 16, 2013 6:41:19 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-apr-8080"]
Apr 16, 2013 6:41:19 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-apr-8009"] 
```

## 使用：

```
Grails 2.1.4
Groovy 2.0.4
Java 1.7
Tomcat 7.0.37
Windows 7 
```

=========================

## 在 Config.xml 我添加了这段代码

```
grails.resources.debug = true
 grails.resources.modules = {
     'core' {
         defaultBundle 'core-ui'
         resource url: '/css/Company_base.css', attrs: [ media: 'screen' ]
         resource url: '/css/cl.min.css', attrs: [ media: 'screen' ]
         resource url: '/css/errors.css', attrs: [ media: 'screen' ]
         resource url: '/css/jquery.multiselect.css', attrs: [ media: 'screen' ]
         resource url: '/css/main.css', attrs: [ media: 'screen' ]
         resource url: '/css/masterbrand.min.css', attrs: [ media: 'screen' ]
         resource url: '/css/mcd.min.css', attrs: [ media: 'screen' ]
         resource url: '/css/mobile.css', attrs: [ media: 'screen' ]
         resource url: '/css/myapp.css', attrs: [ media: 'screen' ]
         resource url: '/css/style.css', attrs: [ media: 'screen' ]
         resource url: '/css/table.css', attrs: [ media: 'screen' ]
         wrapper: { s -> "<!--[if lt IE 8]>$s<![endif]-->"

         }
     }
     'ui' {
         defaultBundle 'core-ui'
         resource url: '/js/myapp.js', disposition: 'head'
     }
 } 
```

* * *

## 在 BuildConfig.xml 中，我添加了这段代码

```
runtime ":cache:1.0.1"
runtime ":cache-headers:1.1.5"
runtime ":cached-resources:1.0" 
```

# exception-handling - 在 mule 中获取错误代码

> ID：16036264
> 
> 赞同：0
> 
> 时间：2013-04-16T11:50:23.353
> 
> 标签：exception-handling, mule, mule-studio

我想创建一个自定义异常消息，以防我的骡子服务抛出异常。为了做到这一点，我想单独捕获骡子生成的错误代码。是否有任何属性可以让我获得该值？我尝试使用 #[org.mule.config.ExceptionHelper.getErrorCode(Exception.class)]" 但这返回 -1 作为值而不是实际的异常代码。

我可以使用什么方法来获取错误代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:33:35.367

您应该通过当前异常的类，即：

```
#[org.mule.config.ExceptionHelper.getErrorCode(exception.class)]" 
```

`exception`是当前异常，而是没有关联错误代码`Exception`的类。`java.lang.Exception`

# asp.net - asp.net配置登录

> ID：16036267
> 
> 赞同：2
> 
> 时间：2013-04-16T11:50:26.720
> 
> 标签：asp.net, login, configuration

希望有人可以帮助我。我正在运行一个带有 asp.net 配置的 VB 项目以进行登录。当我从帐户文件夹运行 Login.aspx 并尝试登录时，它不会让我说

说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的网址：`/VbProj new - Copy/default.aspx`

我没有 default.aspx 文件了，我在创建网站的那一刻就删除了它。它去的主页应该是index.aspx。

当我直接从visual studio运行页面index.aspx并按注销时，它会让我再次登录没有问题，谁能告诉我我哪里出错了

谢谢

当我在帐户中打开登录页面时，网址是

```
/VbProj%20new%20-%20Copy/Account/Login.aspx 
```

然而，当我在运行索引页面后注销时的那个是

```
/VbProj%20new%20-%20Copy/Account/Login.aspx?ReturnUrl=%2fVbProj+new+-+Copy%2findex.aspx 
```

# javascript - JavaScript indexOf() 方法在数组中存在十进制值时给出 -1

> ID：16036273
> 
> 赞同：1
> 
> 时间：2013-04-16T11:50:50.357
> 
> 标签：javascript

我在使用 JavaScript indexOf() 方法时遇到了一些问题。我有一个数组...

```
 pointLatArray = new Array(); 
```

当我尝试获取我知道存在于数组中的变量的索引时，它返回 -1，我知道这通常表示未找到该值。当我的代码如下..

```
 setlat = 52.6688391881732;
      pointArrayIndex = pointLatArray.indexOf(setlat);
      console.log(setlat + " " + pointLatArray[8] + " " + pointArrayIndex); 
```

我得到以下记录到控制台.....

```
 04-16 12:35:31.370: D/CordovaLog(7048): 52.6688391881732 52.6688391881732 -1 
```

但是，当我通过在以下行中将 setlat 替换为 pointLatArray[8] 来更改代码时......

```
 pointArrayIndex = pointLatArray.indexOf(pointLatArray[8]); 
```

以下内容被记录到控制台，它显示正确的索引 8 而不是预期的 -1.......

```
 04-16 12:46:17.230: D/CordovaLog(8497): 52.6688391881732 52.6688391881732 8 
```

是因为我使用了这么长的十进制集作为变量 setlat 吗？如果是这样，或者出于任何原因，如果有人可以提出修复建议，我将非常感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:52:25.930

对双数进行严格比较不是一个好主意。您在这里观察到的可能是舍入误差。尽管数字对您来说似乎相同，但它们可能会相差一个小epsylon。

我看到的一种选择是使用使用epsylon比较的[自定义indexOf函数](https://stackoverflow.com/questions/12356642/is-there-an-indexof-in-javascript-to-search-an-array-with-custom-compare-functio)（即允许数字相差一个很小的值。例如`0.000000000001`或`1e-12`）。

# selenium - 黄瓜 jvm 硒示例

> ID：16036275
> 
> 赞同：2
> 
> 时间：2013-04-16T11:50:57.790
> 
> 标签：selenium, jvm, cucumber

我正在使用标准示例： [cucumber-jvm-selenium-example](https://github.com/mnagas/cucumber-jvm-selenium-example)

当我运行测试时：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.michalvich.cucumber.selenium.example.GoogleSearchTest
Feature: Search on Google
  As an user
  I want to search on Google
  So that I can see results

  Scenario: results are shown                       # com\michalvich\cucumber\selenium\example\GoogleSearch.feature:6
    Given the page is open "http://www.google.com"  # GoogleSearchScenario.the_page_is_open(String)
[1A    Given the page is open "http://www.google.com"  # GoogleSearchScenario.the_page_is_open(String)
    When I search for "Cucumber"                    # GoogleSearchScenario.I_search_for(String)
[1A    When I search for "Cucumber"                    # GoogleSearchScenario.I_search_for(String)
      org.openqa.selenium.NoSuchElementException: Unable to locate element with name: q
      For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
      Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30'
      System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_17'
      Driver info: driver.version: HtmlUnitDriver
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElementByName(HtmlUnitDriver.java:749)
        at org.openqa.selenium.By$ByName.findElement(By.java:292)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver$5.call(HtmlUnitDriver.java:1247)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver$5.call(HtmlUnitDriver.java:1244)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.implicitlyWaitFor(HtmlUnitDriver.java:987)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElement(HtmlUnitDriver.java:1244)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.findElement(HtmlUnitDriver.java:393)
        at com.michalvich.cucumber.selenium.example.GoogleSearchScenario.I_search_for(GoogleSearchScenario.java:26)
        at ?.When I search for "Cucumber"(com\michalvich\cucumber\selenium\example\GoogleSearch.feature:8) 
```

但是，如果我更改驱动程序：

```
System.setProperty("webdriver.chrome.driver", "path\\to\\chromedriver.exe");
driver = new ChromeDriver(); 
```

有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T00:32:26.827

你需要等待谷歌ajax刷新，否则你将只有`Google`返回作为页面标题

```
@When("^I search for \"([^\"]*)\"$")
public void I_search_for(String search) throws Throwable {
    WebElement element = driver.findElement(By.name("q"));
    element.sendKeys(search);
    element.submit();

    // Google ajax wait for 5 seconds
    long end = System.currentTimeMillis() + 5000;
    while (System.currentTimeMillis() < end) {
        WebElement resultsDiv = driver.findElement(By.className("gssb_e"));

        // If results have been returned, the results are displayed in a drop down.
        if (resultsDiv.isDisplayed()) {
          break;
        }
    }
} 
```

# html - 通过程序创建欢迎电子邮件

> ID：16036277
> 
> 赞同：0
> 
> 时间：2013-04-16T11:51:04.700
> 
> 标签：html, email, html-email

我正在尝试为我的公司创建一封欢迎电子邮件。虽然我已经隐藏了文本，但它并没有在所有电子邮件客户端中正确显示。一种方法是`TextBox`在 Word 中使用或粘贴形状中的文本。边界保持不变，文本保持在这些边界内并且看起来更好。鉴于我有大约 1000 封这样的欢迎电子邮件（每封都有姓名和登录凭据），还有其他方法可以即时创建这些电子邮件吗？

如果是这样，我将使用什么来通过程序创建？HTML，PHP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:57:26.887

创建 HTML 模板并将文本框中的文本插入 HTML 模板字符串中。

就像是：

```
<html>
    <body>
        <h1>Welcome #person#</h1>
        <div>#bodytext#</div>
    </body>
</html> 
```

然后在发货前替换“#person#”和“#bodytext#”。如果您允许的话，这甚至可以让您的同事编辑模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:53:32.087

我个人使用将电子邮件格式化为 HTML，然后根据需要编写 HTML 来格式化文本。

您甚至可以使用 String.Format 在需要的地方插入数据（从 Silas 借用 html，因为我不想自己制作）

```
email.Body = String.Format("<html><body><h1>Welcome {0}</h1><div>{1}</div></body></html>", <user name>, <body of email>); 
```

# c++ - 将图像添加到 QtGraphicsView？

> ID：16036281
> 
> 赞同：0
> 
> 时间：2013-04-16T11:51:10.977
> 
> 标签：c++, qt, qgraphicsview

嗨，iv 查看了其他问题和解决方案，但似乎对我的具体问题没有帮助。

我只是想将一张图片添加到我使用 Qt 设计器添加的 GraphicsView

.cpp

```
void test::populateScene()
{
     QImage image(":/images/myFile.png");
     QGraphicsPixmapItem item(QPixmap::fromImage(image));
     QGraphicsScene *scene = new QGraphicsScene;
     scene->addItem(&item);
     ui->graphicsView->setScene(scene); 
} 
```

我有必要的包括，但是当我点击运行时，程序只是立即提出一个没有响应的消息

我没有编译器错误只是点击运行然后得到`test.exe is not responding`

任何想法，这似乎应该很简单，但我无法弄清楚为什么这不正确（主要是因为没有编译器错误可以查看并找到崩溃的原因）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:34:21.033

# [解决了]

```
 QImage image(":/images/myFile.png");
    QGraphicsScene *scene = new QGraphicsScene();
    scene->addPixmap(QPixmap::fromImage(image));
    scene->setSceneRect(0,0,image.width(),image.height());
    ui->graphicsView->setScene(scene); 
```

我在这里或其他地方没有找到其他将图像放入图形视图的解决方案，所以我将发布此内容以帮助其他人，现在我的问题已解决，请随时提问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:02:43.337

你必须在堆上分配你的新项目！

[http://harmattan-dev.nokia.com/docs/library/html/qt4/qgraphicsscene.html#addItem](http://harmattan-dev.nokia.com/docs/library/html/qt4/qgraphicsscene.html#addItem)

> 将项目及其所有子项添加或移动到此场景。**此场景拥有该项目的所有权**。

函数的描述非常清楚：它需要比你的函数范围更有效的指针，以便它可以获得它的所有权。

```
void test::populateScene()
{
     QImage image(":/images/myFile.png");
     QGraphicsPixmapItem *item = new QGraphicsPixmapItem(QPixmap::fromImage(image));
     QGraphicsScene *scene = new QGraphicsScene;
     scene->addItem(item);
     ui->graphicsView->setScene(scene); 
} 
```

# vim - Vim：忽略但显示带有错误格式的模式？

> ID：16036286
> 
> 赞同：2
> 
> 时间：2013-04-16T11:51:20.867
> 
> 标签：vim, errorformat

我的编译器在通用`file:line:column message`格式上生成错误，但我的问题是我的测试输出包含许多与此模式匹配的时间字符串。例如：

```
2013-01-01 01:23:00 Starting test foo 
```

在带有 message`2013-01-01 01`的行`23`和列中被视为文件中的错误。`00``Starting test foo`

`%-G`我可以使用错误格式字符串中的正则表达式过滤掉时间字符串，但这也会从快速修复窗口中删除该行。

有没有办法制作`cnext`和`cprevious`跳过与模式匹配的行（将它们视为无效）但仍将它们包含在输出中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:15:04.583

这很难。我会修改我的`'makeprg'`并使用脚本包装器或直接附加一个后处理步骤（例如使用*sed*）来化解日期（例如，当它被小数包围时`:`用 a替换）。`_`

# javascript - 如何确保在渲染 DOM 后调用我的 dom 操作函数/代码？

> ID：16036288
> 
> 赞同：0
> 
> 时间：2013-04-16T11:51:25.387
> 
> 标签：javascript, dom, asynchronous, angularjs, angularjs-directive

我有一个角度应用程序，其中的`model`更改会触发一个弹出窗口，即`directive`. 我需要在此弹出窗口中选择一个元素，但 DOM 更新 ('$digest') 似乎是异步的，因此它在第一次显示/创建弹出窗口时不起作用。这适用于随后的弹出窗口。如何确保我的代码在创建弹出窗口并使用所有子元素呈现后运行？

这是等效的代码：

```
angular.module('mymodule', []).directive('myDirective', function() {
  return {
    require: ngModel,
    link: function($scope, element, attrs, ctrl) {
      element.addClass('foo');
      // And similar stuff
      ctrl.$render = function justRender() {
        if (ctrl.viewValue) {
          element.modal('show');
          /* Here I have code for selecting the contents of the pop-up,
             which doesn't work as DOM is not assuredly rendered at this time.
          */
        } else {
          element.modal('hide');
        }
      }
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:04:12.850

`$timeout`为此，您可以使用 AnguarJS 的服务。

因此，您必须将代码包装在回调中……例如：

```
$timeout(function() {
    // your code here
}, 0); 
```

`$timeout`是 AngularJS 的包装器`window.setTimeout`。它在浏览器事件队列中添加一个新事件；由于渲染引擎已经在这个队列中，浏览器会在处理队列中的新任务之前完成页面渲染。

我在我的博客上写了一篇关于这个主题的文章......当您需要[在 DOM 渲染后运行代码](http://blog.brunoscopelliti.com/run-a-directive-after-the-dom-has-finished-rendering)时，您可以将其用作参考。

# c++ - 将字符串转换为 c 样式字符串并检测空终止字符

> ID：16036292
> 
> 赞同：1
> 
> 时间：2013-04-16T11:51:45.383
> 
> 标签：c++

我正在尝试使用 c_str() 将 C++ 字符串对象转换为 C 风格的 NULL 终止字符串，然后尝试访问单个字符，因为它可以用于 c 风格的字符串。

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
   string str1("Alpha");
   cout << str1 << endl;

   const char * st = new char [str1.length()+1];
   st = str1.c_str(); // Converts to null terminated string

   const char* ptr=st;

   // Manually Showing each character
   // correctly shows each character

   cout << *ptr << endl;
   ptr++;
   cout << *ptr << endl;
   ptr++;
   cout << *ptr << endl;
   ptr++;
   cout << *ptr << endl;
   ptr++;
   cout << *ptr << endl;
   ptr++;
   cout << "# Null Character :" << *ptr << endl;

   // But below loop does not terminate
   // It does not find '\0' i.e. null

   while( ptr != '\0')
   {
      cout << "*ptr : "<< *ptr << endl;
      ptr++;
   }
   return 0;
} 
```

但似乎它没有在末尾添加 '\0' 并且循环不会终止。我哪里错了？

C 风格的字符串（例如 char* st="Alpha";）可以通过代码中显示的循环访问，但是当从字符串对象转换为 C 风格的字符串时，它不能。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:53:56.403

```
while( ptr != '\0') 
```

应该

```
while (*ptr != '\0') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T11:53:59.507

我认为您在这里缺少一个星号：

`while( ptr != '\0')`

让它

`while( *ptr != '\0')`

您还可以`string`像这样访问 a 的每个单独元素：

```
string helloWorld[2] = {"HELLO", "WORLD"};
char c = helloWorld[0][0];
cout << c; 
```

您还可以遍历 a `string`：

```
string str ("Hello World");
string::iterator it;
for (int index = 0, it = str.begin() ; it < str.end(); ++it)
   cout << index++ << *it; 
```

或者

```
string str ("Hello World");
string::iterator it;
for (int index = 0, it = str.begin() ; it < str.end(); ++it, ++index)
   cout << index << *it; 
```

或者

```
string str ("Hello World");
string::iterator it;
int index = 0;
for (it = str.begin() ; it < str.end(); ++it, ++index)
   cout << index << *it; 
```

了解您正在寻找 C 样式字符串中的空终止字符，但如果您有您的德鲁特人，请继续使用 std::string。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-16T11:54:16.750

应该

```
 while( *ptr != '\0')
        {
            cout << "*ptr : "<< *ptr << endl;
            ptr++;
    } 
```

和

```
 const char * st = new char [str1.length()+1];
    st=str1.c_str();//Converts to null terminated String 
```

应该

```
 char * st = new char [str1.length()+1];
    strcpy(st, str1.c_str());//Copies the characters 
```

或者它可能是

```
 const char * st = str1.c_str();//Converts to null terminated String 
```

您的版本是两者的错误组合，因为它分配内存*就像*要复制字符一样，但不会复制任何内容。

您是否意识到您也可以访问 a 的单个字符`std::string`？只是`str1[0]`,等`str1[1]`_`str1[i]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:06:25.393

这工作正常.. 感谢您的回复。

```
 int main()
    {
        string str1("Alpha");
            cout << str1 << endl;

        const char * st = new char [str1.length()+1];
            st=str1.c_str();
           //strcpy(st, str1.c_str());//Copies the characters
           //throws error:
           //Test.cpp:19: error: invalid conversion from `const char*' to `char*'
           //Test.cpp:19: error:   initializing argument 1 of `char* strcpy(char*, const char*)'

            const char* ptr=st;

            while( *ptr != '\0')
                {
                    cout << "*ptr : "<< *ptr << endl;
                    ptr++;
            }
        return 0;
        } 
```

# vb.net - 什么可能导致事件查看器更改书面事件的来源？以及如何解决？

> ID：16036293
> 
> 赞同：1
> 
> 时间：2013-04-16T11:51:47.310
> 
> 标签：vb.net, event-viewer

我的 VB.NET 代码中的某些事件源面临此错误：

找不到源 ( MySourceName ) 中事件 ID ( 0 ) 的描述。本地计算机可能没有必要的注册表信息或消息 DLL 文件来显示来自远程计算机的消息。您可以使用 /AUXSOURCE= 标志来检索此描述；有关详细信息，请参阅帮助和支持。

我搜索并查看了有关此错误的所有问题，但没有找到任何特定原因，并且我发现了一些我已经在代码中回答的问题，所以我要问的是：这个错误是如何发生的?? 我该如何解决？

# serial-port - MPlab 中的 RS232 通信

> ID：16036299
> 
> 赞同：0
> 
> 时间：2013-04-16T11:52:16.813
> 
> 标签：serial-port, pic18, mplab

我正在使用 MPlab 从 pic 微控制器读取数据。我正在使用 pic18F87J11。我要读取的数据在 RS232 的 DB9 的引脚 3 上，我的 RS232 连接到 pic 微控制器。谁能帮助我或给我一个简单的示例代码来做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:26:11.557

```
 //
// Designed by www.MCUExamples.com
// rasika0612@gmail.com
// Serial communications example. Echo data comes to serial port
// using serial receive interrupt.
//

#include <p18f4520.h>

#pragma config OSC         =    HS     // 20MHz Crystal, (HS oscillator)
#pragma config PBADEN   =    OFF // PORTB<4:0> pins are configured as digital I/O on Reset)
#pragma config WDT         =    OFF // watch dog timer off
#pragma config LVP         =    OFF // Low voltage program off

unsigned char cUART_char;
unsigned char cUART_data_flg;

void init_uart(void);
void UART_putc(unsigned char c);
void InterruptHandlerLow ();

void main()
{

    init_uart(); // init UART module
    while (1) // infinite loop which handles ncoming data as they arrive
    {
        if (cUART_data_flg==1)// if new data available, send it back through USART tx line (echo it)
        {
            UART_putc(cUART_char); 
            cUART_data_flg=0; // clear new data flag so one charactor will echoed once
        }
    }
}

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

#pragma code InterruptVectorLow = 0x18
void InterruptVectorLow (void)
{
  _asm
    goto InterruptHandlerLow //jump to interrupt routine
  _endasm
}

//----------------------------------------------------------------------------
// Low priority interrupt routine

#pragma code
#pragma interrupt InterruptHandlerLow

void InterruptHandlerLow ()
{
  if (PIR1bits.RCIF==1)//is interrupt occured by EUSART receive?, 
                        //then RCREG is full we have new data (cleared when RCREG is read)
  {  
    if(RCSTA&0x06) //more efficient way than following commented method to check for reception error 
    //if(RCSTAbits.FERR==1 || RCSTAbits.OERR==1 )
    {
      RCSTAbits.CREN=0;    //Overrun error (can be cleared by clearing bit CREN)
      cUART_char=RCREG;    //clear Framing error 
      RCSTAbits.CREN=1;
    }
    else
    {
       cUART_char = RCREG; // read new data into variable
       cUART_data_flg = 1; // new data received. so enable flg
    }
  }
}

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

void init_uart(void) // init UART module for 9600bps boud, start bit 1, stopbit 1, parity NONE
{
    cUART_data_flg=0;   // init data receive flag to zero (no data)
    TRISCbits.TRISC7=1; //Make UART RX pin input
    TRISCbits.TRISC6=0; //Make UART TX pin output
    SPBRGH  = 0x02;     //9600bps 20MHz Osc
    SPBRG   = 0x08;        

    RCSTAbits.CREN=1;   //1 = Enables receiver
    RCSTAbits.SPEN=1;   //1 = Serial port enabled (configures RX/DT and TX/CK pins as serial port pins)
    BAUDCONbits.BRG16=1;//1 = 16-bit Baud Rate Generator – SPBRGH and SPBRG

    TXSTAbits.SYNC=0;  //0 = Asynchronous mode
    TXSTAbits.BRGH=1;  //1 = High speed 
    TXSTAbits.TXEN=1;  //1 = Transmit enabled

    RCONbits.IPEN = 1;  //enable Interrupt priority levels
    IPR1bits.RCIP=0;     // EUSART Receive Interrupt Priority 0 = Low priority
    PIE1bits.RCIE=1;     // 1 = Enables the EUSART receive interrupt
    INTCONbits.GIEL = 1;//enable interrupts
    INTCONbits.GIEH = 1;      
}

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

void UART_putc(unsigned char c)
{
  TXSTAbits.TXEN=0;// disable transmission
  TXREG=c;            // load txreg with data
  TXSTAbits.TXEN=1;    // enable transmission
  while(TXSTAbits.TRMT==0) // wait here till transmit complete
  {
    Nop();
  }
} 
```

# actionscript-3 - 在 AS 3.0 中将字符串值转换为 MovieClip

> ID：16036301
> 
> 赞同：0
> 
> 时间：2013-04-16T11:52:21.760
> 
> 标签：actionscript-3

我正在尝试将字符串数组转换为舞台上已经存在的 MovieClip 名称。

这就是我的做法，但似乎没有用。我在舞台上有 11 个电影剪辑。它们的实例名称是“bmc1”、“bmc2”等。所有这些 BMC 影片剪辑都位于名为“bars_mc”的剪辑中。所以这就是我现在编码的方式。

```
var myBtnArray = ['bmc1', 'bmc2', 'bmc3', 'bmc4', 'bmc5', 'bmc6', 'bmc7', 'bmc8', 'bmc9', 'bmc10', 'bmc11'];
for each (var btn in myBtnArray){
    bars_mc.MovieClip(getChildByName(btn)).gotoAndPlay('open');
} 
```

这不起作用。我试过做：

```
this[btn] 
```

那也没用。这是在 AS 3.0 中编码的。

需要有人帮助我找出将字符串转换为 MOvieclip 的正确方法。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:09:18.303

我认为问题很可能是您将`MovieClip`演员添加到了错误的位置，就好像对象 bar_mc 上有一个属性 MovieClip。

这个例子涉及一个额外的行，但应该更清楚一点：

```
var myBtnArray = ['bmc1', 'bmc2', 'bmc3', 'bmc4', 'bmc5', 'bmc6', 'bmc7', 'bmc8', 'bmc9', 'bmc10', 'bmc11'];
for each (var btn:String in myBtnArray) {
    var btnClip:MovieClip = bars_mc[btn] as MovieClip;
    btnClip.gotoAndPlay('open');
} 
```

更接近原始版本的版本是：

```
var myBtnArray = ['bmc1', 'bmc2', 'bmc3', 'bmc4', 'bmc5', 'bmc6', 'bmc7', 'bmc8', 'bmc9', 'bmc10', 'bmc11'];
for each (var btn:String in myBtnArray) {
    MovieClip(bars_mc[btn]).gotoAndPlay('open');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:26:24.607

您应该像这样将 MovieClips 存储在数组中：

```
var myBtnArray = [bars_mc.bmc1, bars_mc.bmc2, bars_mc.bmc3, bars_mc.bmc4, bars_mc.bmc5, bars_mc.bmc6, bars_mc.bmc7, bars_mc.bmc8, bars_mc.bmc9, bars_mc.bmc10, bars_mc.bmc11];
for each (var btn in myBtnArray){
    btn.gotoAndPlay('open');
} 
```

更好的是，如果您在该数组中拥有的按钮是 bars_mc 的唯一子项，为什么不使用 bar_mc 的显示列表而不是像这样的数组：

```
for (var index:int = 0;index < bars_mc.numChildren;index++)
{
   var btn:MovieClip = bars_mc.getChildAt(index) as MovieClip;
   btn.gotoAndPlay('open');
} 
```

但是，如果您想走您当前选择的路线，您可以这样做：

```
var myBtnArray = ['bmc1', 'bmc2', 'bmc3', 'bmc4', 'bmc5', 'bmc6', 'bmc7', 'bmc8', 'bmc9', 'bmc10', 'bmc11'];
for each (var btn:String in myBtnArray) {
    MovieClip(bars_mc[btn]).gotoAndPlay('open');
} 
```

# asp.net-mvc - MVC 找不到未定义的控制器

> ID：16036302
> 
> 赞同：0
> 
> 时间：2013-04-16T11:52:22.823
> 
> 标签：asp.net-mvc, asp.net-mvc-4, routes

查看我的日志记录，我发现大量异常说明“无法找到未定义的控制器”。

这怎么可能发生？以前有人遇到过这个问题吗？无论如何要修复它或至少忽略它？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:53:59.550

听起来有些东西`undefined`在 javascript 中并且正在访问您的 MVC 应用程序。

例如

```
var url = 'http://myhost.com/';
url += desiredController;
$.ajax( /* .... */ ); 
```

如果`desiredController`是`undefined`，并且这个调用被发送，我怀疑 MVC 会寻找`UndefinedController`.

# 3d - Xna 4.0 3D 相机和模型，旋转无法正常工作

> ID：16036305
> 
> 赞同：0
> 
> 时间：2013-04-16T11:52:30.443
> 
> 标签：3d, xna, camera, rotation

嗨，我对相机和模型旋转感到头疼。相机似乎正在工作，但模型上的旋转似乎被搞砸了。我想要的是模型在原地转动一点，但它似乎正在转动并围绕一个圆圈移动。这是我的代码。当我按右时，我的浮动角度不断增加 0.05f

绘图功能：

```
 Vector3 cameraRotate = Vector3.Transform(offSetVector, Matrix.CreateRotationY(angle));
        Vector3 cameraLookat = cameraPos + cameraRotate;
        Matrix viewMatrix = Matrix.CreateLookAt(cameraPos ,  cameraLookat, Vector3.Up);
        float aspect = GraphicsDevice.Viewport.AspectRatio;
        Matrix projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.PiOver4, aspect, 0.1f, 200.0f);
        carTypeOneMatrix = Matrix.CreateTranslation(pos) * Matrix.CreateRotationY(angle);        
        baseModel.Draw(carTypeOneMatrix , viewMatrix, projectionMatrix); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:48:08.103

最有可能的是，这一行：

```
carTypeOneMatrix = Matrix.CreateTranslation(pos) * Matrix.CreateRotationY(angle); 
```

应该：

```
carTypeOneMatrix = Matrix.CreateRotationY(angle) * Matrix.CreateTranslation(pos); 
```

每当您在 Xna 中创建矩阵组合以将模型转换为世界空间时，请记住“SRT”，即缩放、旋转、平移。这是您组合矩阵的顺序。你先翻译一个，然后旋转一个。我的建议是先旋转，然后翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:48:42.040

我对 XNA 上的 3D 不太了解，但据我所知，CreateRotationX、CreateRotationY 和 CreateRotationZ 基于世界全局轴创建旋转...

我做了一些搜索，我认为[这可能会对您有所帮助](http://stevehazen.wordpress.com/2010/02/15/matrix-basics-how-to-step-away-from-storing-an-orientation-as-3-angles/)

# iphone - 可变 UITableview 表单

> ID：16036308
> 
> 赞同：-1
> 
> 时间：2013-04-16T11:52:38.813
> 
> 标签：iphone

我正在尝试为 iPad 创建一个可变问卷 UITableView 表单。

我想要一些建议，什么是最聪明的方法。它有变量，只需要询问前一个问题是否为“是”。

所以我使用 UISwitch 但我如何在这个问题下面动态添加相关问题的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:21:32.827

答案实际上和你的问题一样简单。只需检查用户是否回答“是”，如果是，请将您要向用户显示的问题添加到您填充表格视图单元格的数组中。

```
[yourArray addObject:@"whatever you want to display"];

[yourTableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:10:07.580

这更像是一个逻辑问题。让您入门的基本方法可以遵循以下几行。假设表格视图中的部分数量等于基本问题的数量（谁的答案决定是否应该提出其他一些问题）。如果答案为“否”或有行 = 1+相关问题，则每个部分有 1 行。每次回答问题时重新加载表（为了便于实施）。如果你有多层次的基础问题，这种方法可能会变得很棘手，但你绝对可以应用相同的逻辑来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:06:37.247

对于动态添加行，您可以使用：`[tableView reloadData];`

# tfs - 如何在 Team Foundation Services（云中的 TFS）上组织多个项目

> ID：16036309
> 
> 赞同：7
> 
> 时间：2013-04-16T11:52:43.027
> 
> 标签：tfs, cloud

如何在 Team Foundation Services（云中的 TFS）上组织许多项目。

我有大约 300 个解决方案（每个解决方案中有多个项目），我想在 TFS 中进行源代码控制。问题是如何组织它们？

一点背景知识：我是一名合同开发人员，因此我为许多客户工作，并且有许多用 VB 和 C# 编写的项目，范围从 VB6 到 .net 4.5 以及介于两者之间的所有项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:54:38.897

我认为关键是要了解提供给您的组织结构`Team Foundation Service`。你如何选择组织它最终取决于你。

您可以在`Team Foundation Service`.

1.  一个项目集合
    *   在正常的 TFS 中，您可以拥有许多项目集合。在`Team Foundation Service`（撰写本文时），您只能拥有 1 个。
2.  团队项目
    *   这些是进入项目集合的项目。
    *   您可以将许多解决方案整合到一个解决方案中`Team Project`，也可以简单地拥有一个解决方案。
3.  源代码管理文件夹
    *   每个项目显然都包含源代码管理文件夹，因此可以将这些文件夹进一步拆分为项目。

我没有你这么多的项目，但我做了这样的事情：

1.  `Team Projects`为重大项目创建专用（解决方案）
2.  将类似的小项目（解决方案）合二为一`Team Project`
3.  你甚至可以进一步嵌套。我已经包含了一个用于我们编写的 SSRS 报告的真实世界场景。

请参阅下面的示例，了解我是如何做到的：

*   集合*（项目集合）*
    *   **重大项目1** *（团队项目）*
        *   树干
        *   分支机构
            *   分支 1
    *   **小项目组** *（团队项目）*
        *   小项目 1
            *   树干
            *   分支机构
        *   小项目 2
            *   树干
            *   分支机构
        *   小项目 3
            *   树干
            *   分支机构
    *   **重大项目2** *（团队项目）*
        *   树干
        *   分支机构
            *   分支 1
    *   **SSRS 项目组** *（团队项目）*
        *   2005年
            *   客户
                *   客户1
                    *   中继线*（可选）*
                    *   分支机构*（可选）*
                *   客户2
                *   Client3 共享*（所有客户端）*
        *   2008年
            *   客户
                *   客户1
                *   客户2
                *   Client3 共享*（所有客户端）*
        *   2008 R2
            *   客户
                *   客户1
                *   客户2
                *   Client3 共享*（所有客户端）*

要记住的一点是，构建是由 . 分隔的`Team Project`。因此，这可能会进一步影响您的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:59:10.627

由于您正在为不同的客户创建不同的项目，我会按客户组织您的解决方案。

每个客户我总共有一个项目集合和一个团队项目。然后在每个团队项目中，您可以按照自己喜欢的方式构建解决方案。

# html - Flexbox 列和行

> ID：16036312
> 
> 赞同：3
> 
> 时间：2013-04-16T11:52:50.557
> 
> 标签：html, css, flexbox

我正在尝试在我的网站上使用 CSS3 flexbox，但效果有限。

我可以创建一个可爱的 3 列布局，但我希望第三列以特定的屏幕分辨率包裹在第二列之下。是否可以使用 flexbox，或者我必须恢复到更传统的方法？

我的代码位于[http://jsfiddle.net/eFeC3/](http://jsfiddle.net/eFeC3/)，它显示了我的代码当前的外观以及 flexbox 实现。

```
<style>
body > * > *{background:#666;color:#eee;padding:40px;margin:20px;text-align:center;}
/* Flex */
article{display:-webkit-flex}
section{-webkit-flex:1;-webkit-order:2}
nav{-webkit-order:1}
aside{-webkit-order:3}

/* Nasty */
#b, #c {overflow:hidden}
#a{float:left;margin:0px 40px 80px 20px}
</style>
<body>
   <article>
      <section>1</section>
      <aside>2</aside>
      <nav>3</nav>
    </article>

<div id="demo">
    <div id="a">3</div>
    <div id="b">1</div>
    <div id="c">2</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:09:01.713

Flex 元素默认不换行。当您使用包装时，如果您还指定 a`flex-basis`表示*这是此元素的理想宽度*，则效果最佳。

[http://codepen.io/cimmanon/pen/Axutc](http://codepen.io/cimmanon/pen/Axutc)

```
article {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
}

section {
  -webkit-flex: 1 20em;
  -ms-flex: 1 20em;
  flex: 1 20em;
  -webkit-flex-order: 1;
  -ms-flex-order: 1;
  -webkit-order: 1;
  order: 1;
}

nav {
  -webkit-flex: 1 10em;
  -ms-flex: 1 10em;
  flex: 1 10em;
  /* by default, flex elements have an order of 0 */
}

aside {
  -webkit-flex: 1 10em;
  -ms-flex: 1 10em;
  flex: 1 10em;
  -webkit-flex-order: 2;
  -ms-flex-order: 2;
  -webkit-order: 2;
  order: 2;
} 
```

如果元素需要在特定断点重新排序，那么您唯一的选择是使用媒体查询。`flex-basis`如果您对它选择自行包装的位置不满意（例如） ，您还可以使用媒体查询将其更改为百分比`flex: 1 20%`。

# crystal-reports - 水晶报表在单独的页面上显示每条记录

> ID：16036315
> 
> 赞同：0
> 
> 时间：2013-04-16T11:53:03.980
> 
> 标签：crystal-reports, record

![在此处输入图像描述](https://i.stack.imgur.com/7KDew.jpg)水晶报表没有一一显示我的记录它在单独的页面上显示每条记录有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:58:05.250

关闭您的部分，以便它们之间没有太多空间。如果字段需要“增长”，请进入字段属性并将其设置为根据需要增长。

# mysql - Mysql 查询：显示给定用户 ID 的所有唯一 IP

> ID：16036318
> 
> 赞同：1
> 
> 时间：2013-04-16T11:53:27.937
> 
> 标签：mysql, sql

我正在尝试获取用户到目前为止使用的所有 ip。

```
"SELECT * FROM `logfeeds` WHERE uid=3" 
```

简单的查询给出了所有的 ip，但我想要的是每个 ip 只获取一次。

**日志提要**
![在此处输入图像描述](https://i.stack.imgur.com/MBdk0.jpg)

我希望查询每个 uid 只返回每个 IP 一次。

屏幕截图同时具有 id = 23 和 id = 29，但它应该只显示 id = 23，因为 id=23 和 id=29 具有相同的 ip。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:55:40.617

使用不同的：

来自[mysql 文档](https://dev.mysql.com/doc/refman/5.5/en/select.html)：

DISTINCT 指定从结果集中删除重复行。

```
SELECT distinct ip FROM logfeeds WHERE uid=3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:56:13.087

使用以下查询：

```
"SELECT * FROM `logfeeds` WHERE uid=3 GROUP BY ip" 
```

这肯定会为你工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:06:09.430

如果您每次只需要一次 IP，请使用 DISTINCT。

`SELECT DISTINCT ip, * FROM `logfeeds` WHERE uid=3;`

如果您关心最常见的 IP，请使用 GROUP BY

`SELECT *, COUNT(ip) as logged_in_count FROM `logfeeds` WHERE uid=3 GROUP BY ip ORDER BY logged_in_count DESC;`

虽然 GROUP BY 在您需要计数时起作用，但最好`distinct`在其他情况下使用，因为它是更正确的方法。

请参阅：[如何通过 SQL 选择唯一记录](https://stackoverflow.com/questions/1641718/how-to-select-unique-records-by-sql)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:57:44.960

尝试这个：

```
"SELECT Distinct(ip),timestamp FROM `logfeeds` WHERE uid=3" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:55:35.647

这假设`id`并`timestamp`增加步骤
并且您想要所有列（您确实使用过`SELECT *`）

```
SELECT
   MIN(id), uid, ip, MIN(timestamp)
FROM
   logfeeds
WHERE
   uid=3
GROUP BY
   uid, ip 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T11:55:56.493

你应该尝试不同的声明

`SELECT DISTINCT(ipcolumn) FROM logfeeds`……

更多信息：[http ://www.w3schools.com/sql/sql_distinct.asp](http://www.w3schools.com/sql/sql_distinct.asp)

# java - 如何在主详细信息布局中将操作栏导航下拉菜单定位在第二个片段上方

> ID：16036319
> 
> 赞同：1
> 
> 时间：2013-04-16T11:53:28.000
> 
> 标签：java, android, drop-down-menu, android-actionbar

我的应用中有主细节布局（见左图）： ![在此处输入图像描述](https://i.stack.imgur.com/Hj0lI.png)

我为操作栏设置了导航模式列表（使用它来过滤第二个片段中的列表视图）：

```
final ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST); 
```

我从操作栏中删除了我的活动标题：

```
actionBar.setDisplayShowTitleEnabled(false); 
```

问题是我的下拉菜单现在出现在第一个片段上方（在操作栏的左侧），就好像它指的是第一个片段一样。这可能会使用户感到困惑。

如何将操作栏下拉菜单放在第二个片段上方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:18:18.540

没有直接的 API 可以做你想做的事（将微调器移动到 ActionBar 的中间）

实现与此类似的远程操作的最佳选择是使用微调器创建自己的视图，并使用操作栏中的[setCustomView](https://developer.android.com/reference/android/app/ActionBar.html#setCustomView%28int%29)方法。

# javascript - 调试 javascript 模板

> ID：16036320
> 
> 赞同：0
> 
> 时间：2013-04-16T11:53:28.380
> 
> 标签：javascript, firebug, underscore.js, google-chrome-devtools

我想问有没有办法调试用 JavaScript 模板编写的代码？我正在使用`underscore.js`模板以及`backbone.js`.

其他 JavaScript 代码可以通过 firebug/chrome 进行调试。但我不知道如何调试模板。可能吗？

**编辑**

```
var t ='        <div class="row-fluid">'                                                                                                          '
        +'          <div class="span12">'                                                                                                           '
        +'            <div class="span2 nowrap">'                                                                                                   '
        +'              <input class="" type="checkbox"/><%=Time%>'                                                                       '
        +'            </div>'                                                                                                                       '                                                                                                                     '
        +'        </div>'                                                                                                                          '

    TableRow = Backbone.View.extend({
        tagName: 'div',
        template:_.template(t),
        className: "",

        initialize: function (options) 
        {

        },

        render: function() 
        {
            this.$el.html( this.template(this.model.toJSON()) );
            return this;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:04:32.213

在 Backbone Eye（Firebug 扩展）中，您可以调试下划线模板 - 就像它们是常规 JavaScript 文件一样。模板 id（如果指定）出现在（Firefox）的脚本窗口中，您可以选择它（就像常规脚本文件一样），放置断点并观察模板的增量构建。有关如何执行此操作的更多详细信息，请参见[http://dhruvaray.github.io/spa-eye/#views](http://dhruvaray.github.io/spa-eye/#views)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:00:53.373

muneeb，我一直用萤火虫。首先你需要安装插件，安装后你会看到 Firefox 右上角的灰色 BUG 图标。您可以通过按该图标或按 F12 键开始调试。在那里，您将看到控制台、HTML、CSS、脚本、DOM、网络、cookies 等选项卡。

选择脚本将要求您再次重新加载页面，以便 firebug 可以捕获编写的 java 脚本。添加断点并开始调试。:)

# java - 回答 fileoutputstreams 中 java 中的 I/O 流刷新的必要性

> ID：16036324
> 
> 赞同：4
> 
> 时间：2013-04-16T11:53:36.747
> 
> 标签：java, io

嗨，我需要一个关于 java 中的 I/O 流中是否需要刷新的答案。因为在我的程序中使用刷新和不刷新输出是相同的。即，所有内容都写入目标文件。那么为什么我需要刷新？文件输入流消耗缓冲内存？

下面是我的简单示例程序

```
 file = new File("c:/newfile.txt");
        fop = new FileOutputStream("c:/newfile.txt");

        // if file doesnt exists, then create it
        if (!file.exists()) {
            file.createNewFile();
        }

        // get the content in bytes
        byte[] contentInBytes = content.getBytes();

        fop.write(contentInBytes);
        fop.flush();
        fop.close(); 
```

即使我命令刷新并关闭它也可以将内容正确写入文件......然后我们需要刷新吗？文件输出流会消耗内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:58:13.453

Close 在流上调用flush，因此如果要关闭流，则不需要flush。

如果您想确保在不关闭流的情况下保存数据（例如通过 Internet 发送消息或写入控制台时），则 Flush 很有用。您可能会注意到，如果您使用 system.out.print() 写入控制台，则不会显示输出，直到您调用 flush 或文本中有新行（在这种情况下 Java 将调用 flush你）。

查看有关[此问题的更多信息](https://stackoverflow.com/questions/7166328/when-why-to-call-system-out-flush-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:05:32.413

其实`FileOutputStream`是没有缓冲的，所以数据是直接写入文件的。

抽象`OutputStream`定义`flush`（一个空方法）来适应缓冲流的需要，所以`FileOutputStream`继承它。

如果您不确定底层实现，通常最好在关闭流之前刷新流。

此外，在您的代码中有一个小错误：

```
 file = new File("c:/newfile.txt");
    fop = new FileOutputStream("c:/newfile.txt");

    // Will never happen, new FileOutputStream creates the file
    if (!file.exists()) {
        file.createNewFile();
    } 
```

**编辑：**

至于`close`问题的一部分：

当您注释掉时`close()`，终结器会调用退出`main()`该`close`方法（即在流被垃圾收集之前，JVM 线程调用其`finalize()`方法，该方法又调用该`close()`方法），但您不能明智地依赖终结器：您不拥有它，您无法确定它何时被激活。

同样，最佳实践是`close()`显式调用。

# javascript - Vintage.js：远程图像

> ID：16036325
> 
> 赞同：0
> 
> 时间：2013-04-16T11:53:37.183
> 
> 标签：javascript, jquery, jquery-plugins, vintagejs

插件仅将过滤器应用于我服务器上的文件，但使用远程图像：

```
Unable to get image data from canvas because the canvas has been tainted by cross-origin data. 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:38:34.500

您收到的错误是浏览器内置安全机制的一部分，可防止黑客使用远程数据来操纵网站。你无法绕过它（如果可以的话，这将是一个重大的安全漏洞，浏览器制造商会很快修复它）

为了证实这一点，Vinatge.js 网站上已经[提出了相同的问题（作为 github 问题单）](https://github.com/rendro/vintageJS/issues/9)，Vinatge.js 作者给出的答案是无法加载远程图像。

很抱歉让你失望了。

给出的解决方法是在您自己的服务器上使用代理加载器来加载图像，这样它们就不会作为远程图像提供给站点。

在某些情况下，它实际上是可能的。可以将远程服务器配置为允许它。但是，此配置需要在远程服务器上完成，因此如果您无权访问该配置，那么问题仍然存在。

# java - Java中从子类实例调用的类的泛型方法返回实例类的误解

> ID：16036330
> 
> 赞同：2
> 
> 时间：2013-04-16T11:53:52.053
> 
> 标签：java, generics, inheritance

例子：

```
interface S {}

interface SS extends S {}

abstract class A<T extends S> {
    T get() {…}
}

abstract class B<BT extends SS> extends A<BT> {} 
```

当编译器可以确定返回的对象至少是 type 时，为什么`((B)someInstanceOfB).get()`返回一个类型的对象`S`（我们应该手动将其转换为） ？`SS``SS`

为什么编译器不进行隐式类强制转换以获得更清晰的代码？代码是 1.5+ 版本，这对编译器来说不是秘密。（解决了）

*更新：*为什么编译器不编译`B`类，因为它隐含地有方法`BT get() { return super.get(); }`？

这个问题在 Java 1.7+ 中解决了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:08:29.000

通过强制转换为`B`您使用[的是原始类型](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)。

使用原始类型会从对象中删除**所有通用信息**，无论它在哪里。

这意味着对于原始类型`B`，该`get`方法*看起来像是*在返回一个`S`（因为这是类型参数的擦除（即在运行时使用的实际类型）`T`）。

为避免这种情况，**切勿使用原始类型**！它们专门用于向后兼容和与遗留代码交互。

改为`B<? extends SS>`。

不：这个问题可能永远不会在任何未来版本的 Java 中“解决”，因为当你正确使用泛型时它不存在。

关于更新：不**，**`B`没有方法。它有一个绑定到具有下界的类型参数的方法。但是由于在使用原始类型时所有泛型类型信息都被丢弃，因此**仍会**回退到原始擦除，即.**`BT get()``T get()``T``BT``SS``T`**`S`****

 ****该*规则*非常简单，基本上是说“当您使用原始类型时，它就像该类根本没有泛型一样”。然而，在这种情况下，其影响并不总是显而易见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:56:36.277

您没有参数化`B`.

假设您有`C`实现的类`SS`：

然后，`new B<C>().get();`将返回一个类型为 的对象`C`。

在线上`new B().get();`，您的 IDE 必须告诉您*“B 是原始类型。对泛型类型 B 的引用应该被参数化。”* .****

# java - 无法使用 JTextField 中的 getText()

> ID：16036331
> 
> 赞同：0
> 
> 时间：2013-04-16T11:53:53.593
> 
> 标签：java, swing, model-view-controller, jtextfield

我被困在 Java 中的学校工作中，我正在使用 MVC 设计模式构建一个井字游戏。我有三个类（模型、视图、控制器），我正处于最终产品的最后一步。问题是：

我的 JTextFields 不会保留用户输入的值。我想要得到的是用户选择的名称将被存储并能够通过控制器检索回模型。我尝试了不同的方法，向人们寻求帮助并搜索了几个论坛。

我将 Observable 接口与这些类一起使用，并且在控制器中有 ActionEvent。

请看一下，让我知道你的想法！

OBS！正如您将看到的，我尝试了几种不同的方法来解决这个问题，这就是为什么代码看起来像 s*it....

```
/*View Class */
import java.awt.*;

import java.awt.image.BufferedImage;
import java.io.*;
import java.text.ParseException;
import java.util.*;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.Border;

public class View extends JFrame implements Observer{

private JLabel _titleLabel, _westLabel, _eastLabel, _southLabel, _centerLabel;
private JPanel titlePanel, eastPanel, westPanel, southPanel, centerPanel, center2Panel, south2Panel;
private BufferedImage[] images;
private JButton _startButton;
private Model _model;
private Controller _controller;
public JTextField _player1, _player2;
private JButton[] button = new JButton[9];
private String path;
public String _player1Name, _player2Name;

// The title window (NORTH)

public View(Model aModel, Controller aController) {

    _model = aModel;
    _controller = aController;

    for (int i = 0 ; i<9; i++)
        button[i] = new JButton();

    // pre for path: Requires that pictures are in the same map as the core folder.

    path = "./";

    // Creating the main background for the game.

    this.setContentPane(new JLabel (new ImageIcon(path + "GameFrame.png")));
    this.setLayout(new BorderLayout());

    // Adding all the initiated panels for the main BorderLayout.       

    this.add(titlePanel, BorderLayout.NORTH);
    this.add(westPanel, BorderLayout.WEST);
    this.add(eastPanel, BorderLayout.EAST);
    this.add(southPanel, BorderLayout.SOUTH);
    this.add(centerPanel, BorderLayout.CENTER);

    // Setup for the main frame/game.           

    this.setTitle("Tic Tac Toe Game");
    this.setSize(600,600);
    this.setVisible(true);
    this.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    this.setResizable(false);

}

public void update(Observable aModel, Object arg) {

    if (_model.getStart()) {

        enterName();

    if (_model.getGameStart()) {
        System.out.println("Booting up");

        System.out.println(getField1() + getField2());

        _controller.setNames(getField1(), getField2());

    }

    }

}

public void enterName(){

    //A form to enter the names of the players

    centerPanel.remove(center2Panel);
    validate();
    center2Panel = new JPanel ();
    centerPanel.add(center2Panel);
    center2Panel.setOpaque(false);

    // Copied code, works the same way and keeps the same pattern.

    center2Panel.setLayout(new GridBagLayout ());
    GridBagConstraints c = new GridBagConstraints();

    c.fill = GridBagConstraints.HORIZONTAL;
    c.insets = new Insets(1, 1, 1, 1);
    c.gridwidth = GridBagConstraints.REMAINDER;

    center2Panel.add(new JLabel("First enter your names: "), c);

     _player1 = new JTextField("Skriv namn");
    _player1.setColumns(20);

    _player2 = new JTextField(_model.getPlayerName(2));
    _player2.setColumns(20);

    //_player2.setText(getField1());

    center2Panel.add(_player1, c);
    center2Panel.add(_player2, c);

    _startButton = new JButton ("Start Game");
    center2Panel.add(_startButton, c);
    _startButton.addActionListener(_controller);
    _startButton.setActionCommand("start_button");

    validate(); 

    _player1Name = _player1.getText();
}

public String getField1(){

    System.out.println(_player1Name);
    return _player1.getText();
}
public String getField2(){
    return _player2.getText();
} 
```

}

```
/* Controller class */
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import javax.swing.event.MouseInputAdapter;

 public class Controller extends MouseInputAdapter implements ActionListener{

Model _model;
public Controller(Model amodel) {

    _model = amodel;

}

public void setNames (String One, String Two) {

    System.out.println(One+Two);

    _model.setPlayerNames(One, Two);

}

public void actionPerformed(ActionEvent e) {

        if (e.getActionCommand().equals("start")){

        _model.isStart();

        }

        if (e.getActionCommand().equals("start_button")){
            System.out.println("startbutton");

            _model.namesEntred();
            _model.isGameStart();
        }

        if (e.getActionCommand().equals("exit")){

            System.exit(0);

        }
    }   
}

   /* Model Class */

    import java.util.Observable;

    import javax.swing.DefaultListModel;
    import javax.swing.JOptionPane;

    public class Model extends Observable {

private String _player1Name, _player2Name;
private int _player1Score, _player2Score, _player = 1, _turns;
private String[] _gridList;
private boolean _namesEntered;
private boolean _tie, _win, _victory, _start, _startButton;
private View _view;

public Model(){

    _namesEntered = false;
    _gridList = new String[9];
    _player1Name = "Player1";
    _player2Name = "Player2";
    _tie = false;
    _win = false;
    _victory = false;
    _start = false;
    _startButton = false;
}

public String getPlayerName(int player){

    if(player == 1)
        return _player1Name;
    else
        return _player2Name;
}

public void setPlayerNames(String One, String Two) {

    _player1Name = One; 
    _player2Name = Two;

    System.out.println(_player1Name + _player2Name);
}

public void newTurn(){

    _turns  = _turns + 1;

    if(_player == 1)
        _player = 2;
    else 
        _player = 1;

}

public int getTurn(){

    return _player;

}

public String getPlayer () {

    if (_player == 1) {
    return _player1Name;

}
    else {
        return _player2Name;
    }
}

public String getGridBrick(int i){

    return _gridList[i];

}

public static void main(String[] args) {

    Model _model = new Model();
    Controller _controller = new Controller(_model);
    View _view = new View(_model, _controller);

    _model.addObserver(_view);
}

public void isStart () {

    _start = true;

    this.setChanged();
    this.notifyObservers();
    System.out.println("isStart");
}

public boolean getStart () {

    System.out.println("getStart");
    return _start;

}

public void isGameStart () {

    _startButton = true;

    this.setChanged();
    this.notifyObservers();

}

public boolean getGameStart () {

    return _startButton;

}

public void namesEntred() {

    _namesEntered = true;

    this.setChanged();
    this.notifyObservers();
}

public boolean getNames () {

    return _namesEntered;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:56:00.300

你的代码真的很长，很难分析它......

但我想我可以给一些概念提示......

您可以将其架构更改为类似这样的架构

**未测试**

```
class View extends ... implements ...
{
  private Controller controller =new Controller(this);

  View(){...}

  protected JTextField getTextField0(){return this.jTextField0;}
  protected JTextField getTextField1(){return this.jTextField1;}
}

class Controller implements ... 
{

  private Model model=new Model();

  private View view;
  protected Controller(View view){this.view=view;}

  protected void setNames()
  {
    this.getModel().setNames(this.getView().getTextField0().getText(),this.getView().getTextField1().getText())
  }

  private Model getModel(){return this.model;}
  private View getView(){return this.view;}
}

class Model implements ...
{
  ...

  protected void setNames(String one,String two){...}
} 
```

PS我将代码编写为基本概念，因此您必须根据自己的情况对其进行调整

我希望它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T06:05:05.483

发现了这个问题。这对我来说是一个重大失败。

*   当一个新的观点出现时，旧的观点被抛弃了，这也抛弃了我试图达到的“文本”。

在丢弃视图之前生成 getText 时问题已解决！...

# python - 如何更改 PyQt 或 PySide 中的最小化事件行为？

> ID：16036336
> 
> 赞同：6
> 
> 时间：2013-04-16T11:54:01.110
> 
> 标签：python, qt, pyqt, pyside

我正在开发一个 Qt 应用程序并以这种方式使用[`closeEvent`虚拟函数](https://deptinfo-ensip.univ-poitiers.fr/ENS/pyside-docs/PySide/QtGui/QWidget.html?highlight=setparent#PySide.QtGui.PySide.QtGui.QWidget.closeEvent)更改关闭行为：

```
class MainWindow(QMainWindow):
    def closeEvent(self, event):
            event.ignore()
            self.hide()
            self.trayicon.showMessage('Running', 'Running in the background.') 
```

这按预期工作。如果我按预期删除`event.ignore()`应用程序退出，一切都很好。

我也想控制最小化事件，所以当用户点击标题栏上的最小化按钮时，我想移动窗口而不是最小化。我不能使用[`hideEvent`](https://deptinfo-ensip.univ-poitiers.fr/ENS/pyside-docs/PySide/QtGui/QWidget.html?highlight=setparent#PySide.QtGui.PySide.QtGui.QWidget.hideEvent)虚函数，因为无论如何事件都会发送到窗口，所以这段代码：

```
def hideEvent(self, event):
    event.ignore()
    self.move(0,0) 
```

将窗口移动到左上角，然后将其最小化。`event.ignore()`在这里没有效果，所以我尝试使用[`QtCore.QObject.event`](https://deptinfo-ensip.univ-poitiers.fr/ENS/pyside-docs/PySide/QtCore/QObject.html?highlight=event#PySide.QtCore.PySide.QtCore.QObject.event)这种方式：

```
def event(self, event):
    if event.type() == QEvent.WindowStateChange:
        if self.isMinimized():
            event.ignore()
            self.move(0,0)
            return True
    return False 
```

窗口移动但再次最小化。这有什么问题？如何完全覆盖最小化事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T23:15:42.423

尝试使用[`changeEvent`](http://doc-snapshot.qt-project.org/4.8/qwidget.html)and 过滤[`WindowMinimized`](http://doc-snapshot.qt-project.org/4.8/qevent.html#Type-enum)事件，如下所示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.systemTrayIcon = QtGui.QSystemTrayIcon(self)
        self.systemTrayIcon.setIcon(QtGui.QIcon.fromTheme("face-smile"))
        self.systemTrayIcon.setVisible(True)
        self.systemTrayIcon.activated.connect(self.on_systemTrayIcon_activated)

        self.label = QtGui.QLabel(self)
        self.label.setText("Minimize me!")

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.label)

    @QtCore.pyqtSlot(QtGui.QSystemTrayIcon.ActivationReason)
    def on_systemTrayIcon_activated(self, reason):
        if reason == QtGui.QSystemTrayIcon.DoubleClick:
            if self.isHidden():
                self.show()

            else:
                self.hide()

    def changeEvent(self, event):
        if event.type() == QtCore.QEvent.WindowStateChange:
            if self.windowState() & QtCore.Qt.WindowMinimized:
                event.ignore()
                self.close()
                return

        super(MyWindow, self).changeEvent(event)

    def closeEvent(self, event):
        event.ignore()
        self.hide()
        self.systemTrayIcon.showMessage('Running', 'Running in the background.')

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

# python - 从python中的表中提取数据的正则表达式

> ID：16036337
> 
> 赞同：0
> 
> 时间：2013-04-16T11:54:01.497
> 
> 标签：python, regex

我是正则表达式和 python 的新手：我有一个数据存储在一个日志文件中，我需要使用正则表达式来提取它。以下是格式：

```
#bytes #repetitions  t_min[usec]  t_max[usec]  t_avg[usec]
   0         1000         0.01         0.03         0.02
   4         1000       177.69       177.88       177.79
   8         1000       175.90       176.07       176.01
  16         1000       181.51       181.73       181.60
  32         1000       199.64       199.81       199.72
  64         1000       228.10       228.27       228.19
  28         1000       278.70       278.90       278.75
  256         1000       388.26       388.49       388.39
  512         1000       593.49       593.82       593.63
  1024         1000      1044.27      1044.90      1044.59 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:07:10.207

您可以使用`split`或正则表达式来获取特定列。对于这种情况，拆分更干净：

```
import re
with open("input") as input_file:
    for line in input_file:
        # using split to get the 4th column
        print line.split()[3]
        # using regex to get the 4th column
        print re.match(r'^\s*(?:[^\s]+[\s]+){3}([^\s]+)', line).group(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:59:36.510

您可以使用以下[`genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)功能[`numpy`](http://www.numpy.org/)：

```
>>> import numpy as np
>>> a = np.genfromtxt("yourlogfile.dat",skip_header=1) 
```

`a`将是所有数据的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:08:41.683

如果您需要使用正则表达式，则此脚本可以解决问题：

```
import re

number_pattern = '(\d+(?:\.\d+)?)'
line_pattern = '^\s+%s\s+$' % ('\s+'.join([number_pattern for x in range(5)]))

f = open('data', 'r')
for line in f:
  match = re.match(line_pattern, line)
  if match is not None:
    print match.groups() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:14:40.360

你只需要 (\S+)

```
import re
pattern=re.compile('(\S+)')
f=open('data.txt', 'r')
for l in f.readlines():
    print pattern.findall(l) 
```

你也可以用另一种方式

```
import re
whitespace=re.compile('\s+')
    f=open('data.txt', 'r')
    for l in f.readlines():
        print whitespace.split(l.strip()) 
```

# syntax-highlighting - 如何在 Notepad++ 中禁用看似随机的语法高亮显示

> ID：16036338
> 
> 赞同：1
> 
> 时间：2013-04-16T11:54:05.533
> 
> 标签：syntax-highlighting, notepad++

任何人都可以建议：

1.  为什么会这样突出？我似乎没有做任何事情来激活它：

![截屏](https://i.imgur.com/fckGQU3.png)

2.  如何禁用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-16T14:40:46.077

这很旧，但我遇到了同样的问题，只是想出了一个简单的解决方法。

从文件菜单：语言 > N > 普通文本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-16T16:59:25.677

我不确定这是否与我的问题相同，但我想保持启用语言设置但删除突出显示。

我通过转到设置->首选项->突出显示来做到这一点

删除了突出显示匹配标签的启用复选标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-09T21:33:21.077

1) 转到设置 -> 样式配置器。
2) 选择 Notepad++ 选择的语言，通常基于文件扩展名。您也可以在**语言**菜单设置下手动更改此设置。
3）浏览样式，直到找到应用突出显示的样式。您可以判断，因为**背景颜色**将与突出显示的颜色匹配。
4) 将背景颜色更改为白色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:46:34.210

你的第一个问题我没有答案

对于您的第二个问题，请在 Notepad++中执行以下步骤按`ctrl A`（全选）
右键单击上下文菜单。
选择`Remove style`并点击`Clear all Styles`

这将清除所有亮点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-23T19:17:19.433

供参考。在后台模式下使用垂直边缘时，您也可能会看到这种行为。切换到线条模式将消除超出垂直边缘设置字符数的线条的突出显示。

# jquery - 如何使用jquery在html中将div从一个位置更改为另一个位置

> ID：16036344
> 
> 赞同：0
> 
> 时间：2013-04-16T11:54:30.093
> 
> 标签：jquery, html, css

我正在创建一个 html 页面。我需要的是，在一个位置设置动画的文本，它必须在其他位置固定。这是我的代码

HTML：

```
<body>
<div id="text">Sample Text</div>
<script type="text/javascript">
    $(document).ready(function() {

        var textFxSettings = {
            animation: 3,
            color: "#111",
            animationType: "in",
            speed: 1000
        };

        jQuery.cjTextFx(textFxSettings); // INIT FUNCTION
        jQuery.cjTextFx.animate("#text", {
            onComplete: myFunction
        });

    });
</body> 
```

CSS：

```
#text{
position:absolute;
top:230px;
left:530px;
font-size:24px;
}

.text_pos{

animation:spin 3s;
-moz-animation:spin 3s; /* Firefox */
-webkit-animation:spin 3s; /* Safari and Chrome */
-o-animation:spin 3s; /* Opera */
}

@-webkit-keyframes spin{
    0%   {   -webkit-transform: translate(0px, 0px); }
    100% {   -webkit-transform: translate(0px, -150px); }   
} 
```

此平移将转到正确的位置，但在 1 个循环后它会回到其原始位置（顶部：230）。我希望文本位于顶部：80。我尝试通过更改 text_pos 类的位置，但它不起作用。任何人都可以在这方面帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:57:54.183

您可以使用将位置更改为 div 之类的

```
 $("#text").css({"top":"10px","left":"20px"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:58:41.023

将脚本放在 $(document).ready(function()) 中的 ajax.stop 函数中，例如

```
 $(document).ajaxStop(function () {
  var textFxSettings = {
        animation: 3,
        color: "#111",
        animationType: "in",
        speed: 1000
    };

    jQuery.cjTextFx(textFxSettings); // INIT FUNCTION
    jQuery.cjTextFx.animate("#text", {
        onComplete: myFunction
    });
 } 
```

# php - MySQL 结果数组的最后一行变成奇怪的数组

> ID：16036355
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:01.683
> 
> 标签：php, mysql

我有一个从 MySQL 数据库中绘制的表，其中包含 4 个字段：`id`、`postcode`、`blacklist_reason`、`signup_attempts`。

然后我有以下类来输出和处理这个问题，它是一个返回数组`$MySQL`的 mysql 类，而不是 MySQL 资源。`ExecuteSQL`

```
class Blacklist {

private $MySQL = null;
private $rowsPerPage = 6;

public function __construct( $MySQL ) {

    $this->MySQL = $MySQL;

}

public function displayBlacklistList( $page = 1 ) {

    ( $page == 1 ) ? $start = 0 : $start = $this->rowsPerPage*($page-1);

    $finish = $this->rowsPerPage;           

    $sql = "SELECT * FROM blacklist LIMIT $start, $finish";
    $res = $this->MySQL->ExecuteSQL($sql);

    echo '
    <p><a href="#" class="btn btn-success">Add row</a></p>
    <table class="table table-hover table-bordered table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Postcode</th>
                <th>Blacklist reason</th>
                <th>Signup attempts</th>
                <th>Actions</th>
            </tr>
        </thead>
    <tbody>';

    foreach( $res as $k => $v ) {
        echo '
        <tr>
            <td>'.$v['id'].'</td>
            <td>'.$v['postcode'].'</td>
            <td>'.$v['blacklist_reason'].'</td>
            <td>'.$v['signup_attempts'].'</td>
            <td><a href="#" class="btn btn-primary">Edit</a> <a href="#" class="btn btn-danger">Remove</a></td>
        </tr>';
    }

    echo '
    </tbody>
    </table>';

    echo $this->_displayPagination( $page, $res );
}
} 
```

一切都按预期工作并显示，除非我在数据库中有 6 行并设置`$this->rowsPerPage = 5`为这会导致第二页（显示最后一行）循环并显示与表中的字段一样多的行，以及数据在每个单元格中是预期结果的第一个字符。如果我在表中有 10 行并且每页显示 9 行，也会发生同样的情况，等等。

例如我得到这个：

```
ID  Postcode    Blacklist reason    Signup attempts
7   7           7                   7
B   B           B                   B
A   A           A                   A
6   6           6                   6 
```

当我期望：

```
ID  Postcode    Blacklist reason    Signup attempts
7   BH233SF     A reason            6 
```

问题显然出在`foreach()`循环上，我习惯于在`while( mysql_fetch_assoc() )`这里使用循环，但在这种情况下，我使用的是返回数组而不是对象的类，我不知道为什么会这样。

-- 问题解答 --

`executeSQL`返回一个关联数组：

```
Array ( [id] => 7 [postcode] => BH233SF [blacklist_reason] => A reason [signup_attempts] => 6 ) 
```

它返回的内容很好，因为 var_dump 也证明了这一点：

```
array(4) { ["id"]=> string(1) "7" ["postcode"]=> string(7) "BH233SF" ["blacklist_reason"]=> string(8) "A reason" ["signup_attempts"]=> string(1) "6" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:13:36.713

**解决方案**

显然，您的`Mysql`对象在执行只有一个结果的查询时直接返回一个关联数组。因此，在只有一页的情况下，您应该直接避免 foreach 循环并打印出结果值。或者，您可以只声明`$res`为一个单一值的数组，以防万一`$page == 1`：

```
if ($page == 1)
    $res = array($res); 
```

**为什么会这样**

您的`$res`数组是具有成对键值的哈希。这意味着`foreach ($res as $a => $b)`将遍历数组中的每个键（4 个键 = 4 次）必须是与键`$b`对应的值`$a`。在您的情况下`$b`，始终是一个字符串，因此`b[...]`被视为从字符串中选择一个字符。例如`$v['id']`，转换为`$v[0]`（因为`(int) 'id'`= `0`），返回第一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:23:15.990

当您有多行时，您的数据库类似乎返回一个数组数组，但当只有一个时，只返回一个未嵌套的行。

因此，在第一页上，`foreach`循环返回 $v 中的一行，而最后一页只有一个值，而是循环遍历该行本身。

如果您在字符串上指定索引，它会在该位置返回一个字符，因为文字“id”不是有效数字，它会转换为零（假），因此`$v['id']`实际上被视为`$v[0]`返回第一个字符细绳。其他值也是如此。

如果您不能修改类以始终返回数组中的单行以保持一致性（这将是理想的解决方案），那么您需要检查是否已返回一行，然后自己嵌套结果。如果该类没有返回行数的方法，那么您可以这样做：

```
if (isset($res['id']))
   $res = array($res); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:14:53.553

以你想要的方式工作，你应该有

```
array(
    0 => array(
        "id" => "7", 
        "postcode" => "BH233SF", 
        "blacklist_reason" => "A reason", 
        "signup_attempts" => "6")
); 
```

否则，您的`foreach`循环会遍历列而不是行，这就是它变得混乱的原因。

# c# - 以不同方式呈现的模型列表

> ID：16036357
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:07.167
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-partialview

假设我有一个从抽象类**ModelA**派生的对象列表。我想传递给对象的视图列表（让我们**ModelB**和**ModelC**是**ModelA**的子类）。

```
class ClassB: ClassA
{
}
class ClassC: ClassA
{
} 
```

我想让这些对象（ModelB、ModelC）知道如何呈现自己（ModelC UI 与 ModelB UI 不同）。我想我应该使用局部视图，但我不知道如何。下面的方法怎么样：ModelsA 存储 PartialView 的路径（作为抽象属性） - 然后 ModelB（或 C）覆盖它，然后我渲染它：

```
@foreach(var model in modelList)
{
    Html.RenderPartial(model.PartialPath, model)
} 
```

抱歉，如果语法不正确，我只想展示想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:08:34.870

您应该阅读有关 EditorTemplates 和 ViewTemplates 的信息，例如[http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)

# regex - 如何阻止除一个特定 IP 之外的所有传入代理访问？

> ID：16036358
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:09.153
> 
> 标签：regex, .htaccess, mod-rewrite, proxy, ip

我有一个容易受到攻击的页面，因此，为了减少匿名攻击，我在网上找到的**.htaccess中使用了这段代码：**

```
# BLOCK PROXY VISITS
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteCond %{HTTP:VIA}                 !^$ [OR]
 RewriteCond %{HTTP:FORWARDED}           !^$ [OR]
 RewriteCond %{HTTP:USERAGENT_VIA}       !^$ [OR]
 RewriteCond %{HTTP:X_FORWARDED_FOR}     !^$ [OR]
 RewriteCond %{HTTP:PROXY_CONNECTION}    !^$ [OR]
 RewriteCond %{HTTP:XPROXY_CONNECTION}   !^$ [OR]
 RewriteCond %{HTTP:HTTP_PC_REMOTE_ADDR} !^$ [OR]
 RewriteCond %{HTTP:HTTP_CLIENT_IP}      !^$
 RewriteRule .* - [F]
</IfModule> 
```

我的问题是一位广告商在他的公司内部使用代理，因此无法访问我的页面。我对正则表达式一无所知，即使我认为当我看到它时我*可以认出*它，例如“哦，看一个正则表达式”。我认为上述条件是正则表达式，但我不知道以某种方式改变它们，即只有来自该特定静态 IP 的代理访问不被禁止。

如果可能的话，我该如何实现？先感谢您！

**编辑：**正如我建议的那样，我在[serverfault.com](https://serverfault.com/questions/499803/how-to-block-all-incoming-proxy-visits-except-from-one-specific-i-p)上提出了这个问题。点击此链接了解更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:28:59.030

如果此客户始终具有相同的特定 IP，您可以使用 a 检测到这一点[`RewriteCond %{REMOTE_ADDR}`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并停止任何进一步的重写

```
RewriteEngine on

# new rule
RewriteCond %{REMOTE_ADDR} =1.2.3.4
RewriteRule ^ - [L]

# old proxy rule
RewriteCond %{HTTP:VIA}                 !^$ [OR]
...
...
RewriteCond %{HTTP:HTTP_CLIENT_IP}      !^$
RewriteRule .* - [F] 
```

您必须将此规则放在开头，否则其他规则将拒绝该请求。第一条规则允许 IP 1.2.3.4 看到您的网站，第二条规则像以前一样阻止。所有其他客户端都不会受到影响，并且可以像以前一样看到所有内容。

# sql - 添加索引后如何提高 SQL 查询的性能？

> ID：16036360
> 
> 赞同：1
> 
> 时间：2013-04-16T11:55:11.273
> 
> 标签：sql, sql-server, tsql

我正在尝试执行以下 sql 查询，但执行需要 22 秒。返回的项目数是 554192。我需要加快速度，并且已经在所有涉及的表中放置了索引。

```
SELECT mc.name                           AS MediaName, 
       lcc.name                          AS Country, 
       i.overridedate                    AS Date, 
       oi.rating, 
       bl1.firstname + ' ' + bl1.surname AS Byline, 
       b.id                              BatchNo, 
       i.numinbatch                      ItemNumberInBatch, 
       bah.changedatutc                  AS BatchDate, 
       pri.code                          AS IssueNo, 
       pri.name                          AS Issue, 
       lm.neptunemessageid               AS MessageNo, 
       lmt.name                          AS MessageType, 
       bl2.firstname + ' ' + bl2.surname AS SourceFullName, 
       lst.name                          AS SourceTypeDesc 
FROM   profiles P 
       INNER JOIN profileresults PR 
               ON P.id = PR.profileid 
       INNER JOIN items i 
               ON PR.itemid = I.id 
       INNER JOIN batches b 
               ON b.id = i.batchid 
       INNER JOIN itemorganisations oi 
               ON i.id = oi.itemid 
       INNER JOIN lookup_mediachannels mc 
               ON i.mediachannelid = mc.id 
       LEFT OUTER JOIN lookup_cities lc 
                    ON lc.id = mc.cityid 
       LEFT OUTER JOIN lookup_countries lcc 
                    ON lcc.id = mc.countryid 
       LEFT OUTER JOIN itembylines ib 
                    ON ib.itemid = i.id 
       LEFT OUTER JOIN bylines bl1 
                    ON bl1.id = ib.bylineid 
       LEFT OUTER JOIN batchactionhistory bah 
                    ON b.id = bah.batchid 
       INNER JOIN itemorganisationissues ioi 
               ON ioi.itemorganisationid = oi.id 
       INNER JOIN projectissues pri 
               ON pri.id = ioi.issueid 
       LEFT OUTER JOIN itemorganisationmessages iom 
                    ON iom.itemorganisationid = oi.id 
       LEFT OUTER JOIN lookup_messages lm 
                    ON iom.messageid = lm.id 
       LEFT OUTER JOIN lookup_messagetypes lmt 
                    ON lmt.id = lm.messagetypeid 
       LEFT OUTER JOIN itemorganisationsources ios 
                    ON ios.itemorganisationid = oi.id 
       LEFT OUTER JOIN bylines bl2 
                    ON bl2.id = ios.bylineid 
       LEFT OUTER JOIN lookup_sourcetypes lst 
                    ON lst.id = ios.sourcetypeid 
WHERE  p.id = @profileID 
       AND b.statusid IN ( 6, 7 ) 
       AND bah.batchactionid = 6 
       AND i.statusid = 2 
       AND i.isrelevant = 1 
```

在查看执行计划时，我可以看到一个花费 42% 的步骤。有什么方法可以降低阈值，或者有什么方法可以提高整个查询的性能。

![在此处输入图像描述](https://i.stack.imgur.com/bFBZC.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:38:03.033

删除配置文件表，因为它不需要并将 WHERE 子句更改为

```
WHERE  PR.profileid = @profileID 
```

您在 batchactionhistory 表上有一个左外连接，但在 WHERE 子句中也有一个条件，该条件将其转换回内连接。将您的代码更改为：

```
LEFT OUTER JOIN batchactionhistory bah 
            ON b.id = bah.batchid
           AND bah.batchactionid = 6 
```

您不需要 batches 表，因为它用于连接可以直接连接的其他表，并在您的 SELECT 中显示 id，这在其他表中也可用。进行以下更改：

```
i.batchidid AS BatchNo, 

LEFT OUTER JOIN batchactionhistory bah 
           ON i.batchidid = bah.batchid 
```

是在包含大量数据但未编制索引的表中的连接或 WHERE 子句中使用的任何字段。如果是这样，请尝试在时间上向最大的表添加索引。

您是否需要结果中的每个字段 - 如果您可以丢失一个字段，或者您可能会进一步减少表的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:03:08.233

首先，如果这不是一个存储过程，那就让它成为一个。sql server 要编译的文本很多。

接下来，我的经验是“最坏的做法”有时是个好主意。具体来说，我已经能够通过将大查询分成几个或三个小查询并组合结果来提高性能。

如果此查询与 .net、coldfusion、java 等应用程序相关联，您也许可以在应用程序代码中进行拆分/重新组装。如果没有，临时表可能会派上用场。

# ajax - Rails远程表单提交不起作用

> ID：16036365
> 
> 赞同：1
> 
> 时间：2013-04-16T11:55:20.973
> 
> 标签：ajax, ruby-on-rails-3, forms, jquery

我正在尝试通过 ajax/js 提交表单。当我设置 :remote => true 它仍然通过 html 提交。

```
<%= form_for(@message), :remote => true, do |f| %>

  <%= f.label :Note_To_Doctor %>
  <%= f.text_field :note %>
  <%= f.collection_select(:physician_id, Physician.all, :id, :physician_name )%>
<%= f.button :send, :class => 'btn btn-info' %>

<% end %> 
```

我可以发誓我已经这样做了。我需要创建一个 create.js.erb 吗？如果需要，里面应该有什么。另外，我应该在创建操作中放入什么作为响应块？

控制器：

```
 def create
    @message = Message.new(params[:message])

    if @message.save
      MessageMailer.paging(@message).deliver
      respond_to do |format|
         format.html { redirect_to messages_path, flash.notice = "Message was sent" }
         format.js { render "index" }
       end
    else
      @message = Message.new(params[:message])
    end
  end 
```

index.js.erb

```
$("#messages").html("<%= escape_javascript render("messages") %>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:58:03.910

只需将 form_for 替换为，

```
<%= form_for(@message, :remote => true) do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T06:33:22.907

在您的情况下，`:remote=>true`您应该尝试此解决方案。[以ajax方式在rails 3中提交表单（使用jQuery）](https://stackoverflow.com/questions/6723334/submit-form-in-rails-3-in-an-ajax-way-with-jquery)

# java - 无法让我的程序在 java 中编译？

> ID：16036368
> 
> 赞同：-3
> 
> 时间：2013-04-16T11:55:24.080
> 
> 标签：java

我最近遇到了一些问题...我一直在网上学习一些教程并输入了他们告诉我的代码，我对其进行了一些修改，但它不起作用..这是用Java编写的。

编译的代码的第一部分

```
package newjavastoof;

public class NewJavaStoof {
    private String girlName;
    public void setName(String name)
    {
        girlName = name;
    }
    public String getName()
    {
        return girlName;
    }
    public void saying()
    {
        System.out.printf("your first girlfriend was %s", getName());
    }
} 
```

第 11 行和第 12 行无法编译的代码的第二部分

```
package newjavastoof;
import java.util.Scanner;

public class Stoof {
    public static void main(String[] args)
    {
        Scanner imput = new Scanner(System.in);
        Stoof stoofObject = new Stoof();
        System.out.println("Enter name of first gf here: ");
        String temp = imput.nextLine();
        stoofObject.setName(temp);
        stoofObject.saying();

    }   
} 
```

这里有什么不正确的？我不明白，为什么没有 setName 或说？我应该申报吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T11:57:58.733

以下行

```
Stoof stoofObject = new Stoof(); 
```

应该

```
NewJavaStoof stoofObject = new NewJavaStoof(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:57:57.283

在第一段代码中，您的类名为 NewJavaStoof，但在第二段代码中，您使用类 Stoof。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T11:58:24.607

`Stoof stoofObject = new Stoof();`它应该是

`NewJavaStoof stoofObject = new NewJavaStoof ();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T11:58:39.850

你为什么要声明`NewJavaStoof`但`Stoof`在你的主要方法中使用？我想你应该替换 all`Stoof`或`NewJavaStoof`将你的`NewJavaStoof`类重命名为`Stoof`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T11:59:03.350

在 Stoof 中，您试图在 Stoof 类型的 stoofObject 上调用 setName。

```
Stoof stoofObject = new Stoof();
...
stoofObject.setName(temp); 
```

方法 setName 不是在 Stoof 上定义的，而是在您的 NewJavaStoof 对象上定义的。将 Stoof 更改为 NewJavaStoof 就完成了。

```
NewJavaStoof stoofObject = new NewJavaStoof();
...
stoofObject.setName(temp); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:02:52.073

从 NewJavaStoof 创建一个实例，而不是从 Stoof.. Stoof 没有方法 setName() 和 say()..

用这个`NewJavaStoof stoofObject = new NewJavaStoof();`

# android - 当我安装另一个应用程序时，我开发的 Android 应用程序被替换了

> ID：16036369
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:27.753
> 
> 标签：android

在开发 android 应用程序时，我发现为什么当我使用 apk 文件安装另一个应用程序时，以前的应用程序会被替换。

这些应用程序具有不同的名称、标签，但包名称相同。那样行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T11:58:36.333

看看你的包名。包名必须是唯一的。可能是你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:01:51.790

> 这些应用程序具有不同的名称、标签，但包名称相同。那样行吗？

不，这不好。包名是系统唯一标识一个应用程序的方式。

例如，您应该/可以将您的包名称命名为：

*   com.jrgalia.app_1_name
*   com.jrgalia.app_2_name
*   com.jrgalia.app_3_name

ETC...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T12:06:51.667

非常具体地说明您的应用程序被替换的原因。所有应用程序都将存储在**/data/data/package_name**

如果您执行 adb install 那么文件夹及其内容将被您的新操作替换，这就是为什么在上传到 google play 时它会确保包名称是唯一的。

![在此处输入图像描述](https://i.stack.imgur.com/Hen77.png)

# java - 某些测试中的错误输出

> ID：16036370
> 
> 赞同：1
> 
> 时间：2013-04-16T11:55:33.520
> 
> 标签：java, string, math

我在一种方法上遇到了麻烦。在输入中，我们有字符串，例如 (a+-b*i)some sign(c+-d*i)。程序必须计算这个并输出结果。我需要在第一个括号中获取符号索引，在第二个括号中获取索引。而且我的程序将起作用。但是，仅在输入 (ab*i)-(cd*i) 或 (ab*i)*(cd*i) 时，方法返回错误结果 -1。

我的两个括号的方法。

```
public int getSign1(String str)
    {
        int sign1;
        if(str.indexOf("+") < str.indexOf(")")) 
            sign1 = str.indexOf("+"); 
        else if(str.indexOf("-", 2) < str.indexOf(")")) 
            sign1 = str.indexOf("-", 2);
        else sign1 = -1; 

        return sign1;
    }

    public int getSign2(String str)
    {
        int sign2;
        if(str.lastIndexOf("+") > str.lastIndexOf("(")) 
            sign2 = str.lastIndexOf("+");
        else if(str.lastIndexOf("-") > str.lastIndexOf("(")) 
            sign2 = str.lastIndexOf("-");
        else sign2 = -1;

        return sign2;
    } 
```

第二种方法总是有效，但不是第一种（请帮我找出错误）。

例子：`(1-2i)*(3-4i)`

第一种方法返回 -1，但不是 2。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:06:21.773

发生这种情况是因为在表达式中：

`(1-2i)*(3-4i)`您没有任何`+`字符，并且在看到[String#lastIndexOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf%28int%29)之后：

> 此对象表示的字符序列中最后一次出现的字符的索引，**如果字符不出现，则为 -1**。

然后你知道为什么`str.lastIndexOf("+")`会是-1。当然是 < `str.indexOf(")")`。

所以`sign1`将是-1。

您可以通过以下方式修复它：

```
if(str.indexOf("+")!= -1 && str.indexOf("+") < str.indexOf(")")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:10:03.860

对于 input `(a-b*i)-(c-d*i)`，此字符串中没有“+”。

```
public int getSign1(String str){
     if(str.indexOf("+") < str.indexOf(")")) 
                sign1 = str.indexOf("+");
..
} 
```

首先在此方法中，如果您正在检查 '+' ，因此它不存在，它的索引为 -1，小于 `str.indexOf(")")`索引，因此它的返回`-1`。

# database - CakePHP 高生产时间

> ID：16036372
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:36.270
> 
> 标签：database, performance, cakephp, background-process, production

当我只使用一个控制器和一个视图来显示一些链接（无数据库访问）时，加载页面大约需要 50 毫秒，但是当涉及到数据库访问（我的模型在这里使用数据库）时，我需要大约 1.1 秒仅使用限制为 10 个条目的 find-command。sql 命令的执行速度非常快（~ 0ms - 1ms），但似乎还有其他进程正在后台完成。

这是代码：

```
public function index() {
$this->set('allLeser', $this->Leser->find('all', array(
    'fields' => array('id', 'vorname', 'nachname', 'klassenstufe', 'klassenbezeichner'),
    'limit' => 10
)));
$this->set('title', 'Leser');
} 
```

我想知道，为什么制作页面需要这么长时间

**编辑：我找到了解决方案：我的数据库配置中的持久标志设置为 false。我将其更改为 true，我的页面生成时间降低到 45 毫秒 - 60 毫秒。为什么这个标志默认设置为false... ._。**

# c# - ANTLR 语法匹配不兼容的规则而不是抛出 NoViableAltException

> ID：16036383
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:58.907
> 
> 标签：c#, antlr, antlr3

我有以下 ANTLR 语法，它构成了更大的表达式解析器的一部分：

```
grammar ProblemTest;

atom    :   constant
    |   propertyname;

constant:   (INT+ | BOOL | STRING | DATETIME);

propertyname
    :   IDENTIFIER  ('/' IDENTIFIER)*;

IDENTIFIER 
    :   ('a'..'z'|'A'..'Z'|'0'..'9'|'_')+;

INT 
    :   '0'..'9'+;

BOOL    :   ('true' | 'false');

DATETIME
    :   'datetime\'' '0'..'9'+ '-' '0'..'9'+ '-' + '0'..'9'+ 'T' '0'..'9'+ ':' '0'..'9'+ (':' '0'..'9'+ ('.' '0'..'9'+)*)* '\'';

STRING
    :  '\'' ( ESC_SEQ | ~('\\'|'\'') )* '\''
    ;

fragment
HEX_DIGIT : ('0'..'9'|'a'..'f'|'A'..'F') ;

fragment
ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
    |   UNICODE_ESC
    |   OCTAL_ESC
    ;

fragment
OCTAL_ESC
    :   '\\' ('0'..'3') ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7') ('0'..'7')
    |   '\\' ('0'..'7')
    ;

fragment
UNICODE_ESC
    :   '\\' 'u' HEX_DIGIT HEX_DIGIT HEX_DIGIT HEX_DIGIT
    ; 
```

如果我在 ANTLR 中的解释器中调用它

```
'Hello\\World' 
```

然后这被解释为*propertyname*而不是*constant*。如果我在 C# 中编译它并在测试工具中运行它，也会发生同样的情况，所以这不是狡猾的解释器的问题

我确定我遗漏了一些非常明显的东西......但为什么会发生这种情况？很明显，字符串匹配器存在问题，但我至少会认为*IDENTIFIER*与 ' 字符不匹配这一事实意味着这将引发 NoViableAltException 而不是失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:16:26.383

首先，ANTLRWorks 和 antlr-3.5-complete.jar 都不能用于为 C# 目标生成代码。它们可能会生成以 .cs 结尾的文件，这些文件*甚至可能会 compile*，但这些文件与 ANTLR 工具 (Antlr3.exe) 的 C# 端口或推荐的 MSBuild 集成生成的文件不同。[确保您正在通过一种经过测试的方法](http://www.antlr.org/wiki/display/ANTLR3/Antlr3CSharpReleases)生成生成的解析器。

第二，`INT`永远不会匹配。由于`IDENTIFIER`出现`INT`在语法中，并且所有序列`'0'..'9'+`都匹配`IDENTIFIER`and `INT`，因此词法分析器将始终采用出现的第一个选项 ( `IDENTIFIER`)。

# ruby-on-rails - 使用分页时如何清除所有页面的缓存

> ID：16036384
> 
> 赞同：2
> 
> 时间：2013-04-16T11:56:00.223
> 
> 标签：ruby-on-rails, memcached, dalli

我们使用带有 memcached 的 dalli gem。以下代码缓存跨多个页面分页的 Foo 对象。当我们在某个页面（比如 2 或 10 或 15）时，我们能够缓存 Foo(s)。但是当我在第 15 页修改 Foo（比如 Foo-150）时，我们使用 FooSweeper 中的方法清除所有对象的缓存。发生上述操作时，将调用 after_save 方法，但并未清除所有页面的缓存并反映所请求页面的旧值。

下面给出的代码片段是否有任何错误。

我的控制器看起来像这样..

```
class FooController 

...
  caches_action :index, cache_path: proc { |c| c.params.except(:_).merge(format: request.format) }

... 
```

我的扫地机代码看起来像这样..

```
class FooSweeper < ActionController::Caching::Sweeper
  observe :foo

  def after_save(foo)
    expire_cache(foo)
  end

  def before_destroy(foo)
    expire_cache(foo)
  end

  def expire_cache(foo)
    expire_action(:controller => 'foos', :action => 'index')
    expire_action(:controller => 'foos', :action => 'index', :format => 'text/html')
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T21:51:58.857

您的控制器称为 Foo，但您从清扫器中调用控制器：'foos'。这可能是您的缓存未正确清除的原因。

您可以通过将 foos 更改为 foo 来解决此问题。

# java - ListSelectionListener 中的方法 getSelectionIndex()

> ID：16036391
> 
> 赞同：0
> 
> 时间：2013-04-16T11:56:13.497
> 
> 标签：java, swing, jlist

例如，我有一个名为 cross_list 的 JList，其中包含一个项目列表，现在我将 ListSelectionListener 添加到该 JList

考虑这些代码行：

```
class AcrossListHandler implements ListSelectionListener {
    @Override
    public void valueChanged(ListSelectionEvent e) {
        JList lsm = (JList) e.getSource();
        int selected_index = lsm.getMaxSelectionIndex();            
            if (selected_index >= 0){
                System.out.println(selected_index);
            }
        }  
     }       
} 
```

我有一个问题：为什么“System.out.println()”行打印 2 个 selected_value 值，而我只是在 JList 中的索引上单击 1 次？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:22:38.853

由 ui-delegate 注册的 listSelectionListener 将选择更改标记为在 mousePressed 上进行中，并在 mouseReleased 中重置该标志，使其成为最终状态。如果您只想对最终确定的更改做出反应，您可以查询 valueIsAdjusting 属性，如果为 true，则不执行任何操作：

```
class AcrossListHandler implements ListSelectionListener {

    @Override
    public void valueChanged(ListSelectionEvent e) {
        if (e.getValueIsAdjusting()) return;
        // do stuff
    }
} 
```

# c++ - 哪些数据结构用于基于节点的编辑器？

> ID：16036392
> 
> 赞同：4
> 
> 时间：2013-04-16T11:56:20.623
> 
> 标签：c++, user-interface, data-structures, nodes

一些程序（即声音合成、程序纹理生成……）让他们的用户完全自由地通过图形编辑器以任意方式安排程序的各种功能。用户可以放置一个或多个“节点”（每个节点代表某种从一个或多个输入生成一个或多个输出的功能）并以任何所需的方式将它们修补/连接在一起以生成最终输出。

我想知道这种软件的最佳表示可能是必要的数据结构，无论是对于生成器系统本身还是对于它的图形表示。我特别困惑的是如何对节点输入和输出可能具有各种数据类型的事实进行建模，并且根据节点类型，其中只有一些可能是有效的。

那么如何建模：

*   节点输入/输出值
*   节点本身（继承？）及其连接
*   生成过程，从起始节点传播到输出节点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:43:59.967

我参与过一些这样的系统。有许多不同的做事方式。但我过去做过的一种常见方法是让 Node 对象链接到其他 Node 对象。节点通过一些 IAction 接口包含一个动作对象。用户以某种方式指定在特定节点处实现 IAction 接口的具体动作对象（这通常还涉及为对象指定一些状态，例如要应用的过滤器的参数）。

然后有一个框架来初始化（编译）和执行（运行）图，并安排在输入准备好时调用 IAction 接口并将输入传递给节点，并将输出传递给下游节点。这是一个非常简单的算法：并行运行所有输入都存在的节点（从没有输入的节点开始），然后将其余节点放在等待队列中，直到它们的输入存在。

这只是如何做到这一点的一种方式；正如您所指出的，有许多变体，以及许多使用这种技术的系统。也有一些框架（*如果*我理解正确的话， [TPL Dataflow](http://blogs.msdn.com/b/pfxteam/archive/2011/09/17/10212961.aspx)就是其中之一）。

 *关于如何确保节点之间的连接保持一致的问题，在我看来，这归结为在框架做多少和节点做多少之间做出选择。在一个极端，框架可以在图“编译时”严格匹配连接类型；另一方面，框架可以将其留给节点在“运行时”进行检查。如果大多数连接只是相同的类型，例如它们都是字节流，则后者可能是合适的。

顺便说一句，在 Java 或 C#（或其他 HLL）中可能比在 C++ 中更容易，因为对接口、反射、动态加载对象等有更多支持（例如，在 C# 中，您可以轻松地为对象指定类型和从流中动态创建它，而您必须自己在 C++ 中滚动）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:20:15.510

你可能想看看观察者模式，特别是这种类型的信号/槽系统。 [观察者](http://en.wikipedia.org/wiki/Observer_pattern)[模式](http://www.boost.org/doc/libs/1_53_0/doc/html/signals.html)_

我不久前使用 C++ 进行的一个项目使用信号/插槽来允许用户在运行时动态连接不同的音频合成模块。不过，在性能方面可能会有所取舍。

至于对不同的可能输入进行建模，您可以制作一个信号对象以包含实际数据作为 void 指针和一个字符串或枚举，指定接收类在处理过程中假定的数据类型是正确的。当您的用户最初连接这些对象时，可能会返回一种合同（“这些是此对象发送的类型”），并且可以在处理开始之前完成实际验证。*

# android - 当启动应用程序时调用 ContentProvider - 如何退出应用程序

> ID：16036394
> 
> 赞同：0
> 
> 时间：2013-04-16T11:56:34.637
> 
> 标签：android, android-contentprovider

任何 Body 都知道何时加载 Contentprovider 并调用 onCreate() 方法。

我有一个场景，我做了一些检查并想退出应用程序。

我的疑问是当调用提供者的 onCreate() 时 UI 我的意思是活动实例是否可用。

我用谷歌搜索了它，但没有太多数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:08:47.207

据我了解，您的问题是关于调用 ContentProvider.onCreate() 和 Activity.onCreate() 的时间。

可能最好的选择是做一个非常简单的测试，在两者上放置一行`Log.d(TAG, "onCreate activity");`并`Log.d(TAG, "onCreate provider");`查看哪个 get 被首先触发。

但请记住保持 ContentProvider 代码简短，如文档中所述：

> 它不能执行冗长的操作，否则应用程序启动将被延迟。

# vb.net - DateTimePicker 的 .Value 和 .Text 之间的区别 - VB.NET

> ID：16036402
> 
> 赞同：1
> 
> 时间：2013-04-16T11:56:58.203
> 
> 标签：vb.net, datetimepicker

我创建了一个小软件，用于根据用户的生日计算一些信息。其中之一是活着的天数。基本上，我使用`DateDiff`VB.NET 中的函数来实现这一点，但是有一个问题，我还没有弄清楚。

我使用 .Value 将 DateTimePicker 的值分配给一个变量，并使用 DateDiff 如下：

```
DateDiff(DateInterval.Day, dtDOB, Today) 
```

问题是当我选择当前日期（昨天）之前的日期时，给出的结果是 0 而应该是 1。

当我将值更改`.Value`为`.Text`并将值存储到同一个变量时。给出的结果是 1。这是我的预期，但我不知道 .Value 属性有什么问题。当我进行研究时，我访问的大多数网站都建议使用`.Value`将值从 DateTimePicker 转移到变量，但不知何故它似乎不准确。

谁能告诉我他们两个的区别？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T13:29:53.230

A`DatePicker.Value`返回一个`Date`对象，其中 as`DatePicker.Text`返回`String`该日期的表示。

在检查了返回的值`Today`和 的输出之后`DatePicker.Value`，我发现它`.Value`返回了一个`Date`对象，该对象沿日期返回了一个时间（默认情况下为当前时间），其中 as`Today`仅返回当前日期。当插入 时`DateDiff()`，该方法将假定时间`Today`为上午 12:00，并且通过比较时间，它可能会少于一天（VB 将其解释为两个日期之间的整整 24 小时），导致 0 天。如果您不打算计算小时和分钟，请使用`DateDiff(DateInterval.Day, dtDOB.Date, Today)`.

# javascript - 如何使用正则表达式获取 Songkick URL 的最后一部分？

> ID：16036403
> 
> 赞同：-2
> 
> 时间：2013-04-16T11:57:03.067
> 
> 标签：javascript, regex

我需要从这个 URL 获取斜线之后的最后一部分，甚至只是使用正则表达式的数字：

[http://www.songkick.com/artists/2884896-netsky](http://www.songkick.com/artists/2884896-netsky)

有谁知道我该怎么做？

非常感谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:05:34.723

我有一个正则表达式模式来查找最后一个斜杠之后的所有内容 - 它是 ([^//]+)$ 。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:06:27.667

不知道这是否适合您：

最后部分：

```
"http://www.songkick.com/artists/2884896-netsky".replace(/.*\//,"")
"2884896-netsky" 
```

数字：

```
"http://www.songkick.com/artists/2884896-netsky".replace(/.*\//,"").match(/\d+/)
["2884896"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:06:54.637

尝试这个：

```
var s = "http://www.songkick.com/artists/2884896-netsky";
s.match(/[^\/]+$/)[0] 
```

`[^\/]+`匹配一个或多个字符`/`

`$`匹配字符串的结尾

对于数字，请尝试：

```
var value = s.match(/(\d+)[^\/\d]+$/)[1];
value = parseInt(value, 10); // convert it to an Integer 
```

`(\d+)`匹配任何数字并将其分组

`[^\/\d]+`匹配除 Numbers 或`/`

[有关 Javascript 正则表达式的更多信息](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

# r - 根据列值有条件地将 data.table 划分为子表

> ID：16036406
> 
> 赞同：2
> 
> 时间：2013-04-16T11:57:23.010
> 
> 标签：r, split, data.table

这个问题与`data.table`类有关，来自同名`R`包。

给定一个`data.table`对象，我想根据它的某些列的值将它分成切片。

为了弄清楚我必须做什么，我举了一个例子。

假设这是输入`data.table`。

```
dataf <- data.frame(list(
  T = c(1.80,1.81,1.82,1.83,1.85,1.87,1.90,1.95,2.00),
  A = c(1,0,1,1,1,0,1,1,0),
  B = c(0,0,0,0,0,0,1,0,0),
  C = c(0,1,0,1,1,0,1,1,0),
  D = c(0,0,1,1,1,0,0,1,0))
)
datat <- data.table(dataf)
datat
#       T A B C D
# 1: 1.80 1 0 0 0
# 2: 1.81 0 0 1 0
# 3: 1.82 1 0 0 1
# 4: 1.83 1 0 1 1
# 5: 1.85 1 0 1 1
# 6: 1.87 0 0 0 0
# 7: 1.90 1 1 1 0
# 8: 1.95 1 0 1 1
# 9: 2.00 0 0 0 0 
```

**目标**是根据`n`所选列的值（带有`n = 0, ..., ncol(datat) - 1`）将此表拆分为子表。

对于此输入，选择作为锚列`C`和`D`，输出必须类似于：

```
# $`0|0`
#       T A B C D
# 1: 1.80 1 0 0 0

# $`1|0`
#       T A B C D
# 1: 1.81 0 0 1 0

# $`0|1`
#       T A B C D
# 1: 1.82 1 0 0 1

# $`1|1`
#       T A B C D
# 1: 1.83 1 0 1 1
# 2: 1.85 1 0 1 1

# $`0|0`
#       T A B C D
# 1: 1.87 0 0 0 0

# $`1|0`
#       T A B C D
# 1: 1.90 1 1 1 0

# $`1|1`
#       T A B C D
# 1: 1.95 1 0 1 1

# $`0|0`
#       T A B C D
# 1: 2.00 0 0 0 0 
```

从刚刚显示的示例中可以推断，**拆分条件**为：

*   所选列的值与上一行中的值不同？

*重要提示*：在本例中，“值”一词必须用作一对列值。

*注意*：

我当时认为这个输出结构（第二个**目标**）我必须对这个子表应用一个（或两个）函数，获取它们的输出并通过通用名称聚合它们（例如求和、合并或其他操作）元素列表（即`0|0`with `0|0`、`1|0`with`1|0`等）。

如果您认为有一个更合适或更简单的输出结构也可以实现第二个目标，那么您的建议是非常受欢迎的。

显然，解决方案的性能很重要，因为我必须处理大表。

不幸的是，我认为自己是一个`data.table`包新手，事实上我只知道一些关于它的事情：如何通过 colnames 进行子集化等。

因此，非常感谢您的帮助，因为它将帮助我学习新的东西。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:27:53.740

我会这样做，`rle`如下`split`所示：

```
ids <- do.call(paste, c(datat[, 4:5], sep="|"))
rle.ids <- rle(ids)
datat.spl <- split(datat, rep(seq_along(rle.ids$values), rle.ids$lengths))
names(datat.spl) <- rle.ids$values 
```

* * *

阅读您的注释部分，因为您的目标是通过对它们进行*分组/聚合来**将函数*应用于这些子表，所以我建议只添加一个额外的列，如下所示：*`data.table`*

 *```
datat[, grp1 := do.call(paste, c(datat[, 4:5], sep="|"))] 
```

如果你愿意，你也可以像这样添加另一个分组：

```
datat[, grp2 := rep(seq_along(rle.ids$values), rle.ids$lengths)] 
```

现在，如果您希望将所有“0|0”组合在一起，则按 .subset 划分`grp1`。

```
# example
datat[, list(s.A = sum(A)), by = grp1] 
```

如果您希望对每组单独的“0|0”进行聚合，那么，subset by `grp2`。

```
# example
datat[, list(grp1 = grp1[1], s.A = sum(A)), by = grp2] 
```

希望这可以帮助。*

# winapi - 我应该释放我复制到剪贴板的内存吗？

> ID：16036410
> 
> 赞同：3
> 
> 时间：2013-04-16T11:57:37.127
> 
> 标签：winapi, memory

当我将 win32 程序中的数据复制到剪贴板时，是否应该在将其粘贴到其他位置后释放复制到剪贴板的内存？或者系统对此负责。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T14:35:42.593

将数据放在剪贴板上有两种方法。

**方法一**：直接把数据放到剪贴板上，第二个参数调用`SetClipboardData`传入一个非`NULL`值。在这种情况下，系统将对数据负责，您不应自行释放它。

**方法2**`SetClipboardData` ：通过调用并`NULL`作为第二个参数传递，将占位符放到剪贴板上。在这种情况下，应用程序对数据负责，直到它`SetClibpoardData`使用非`NULL`第二个参数调用该点，此时责任转移到操作系统。

从您的问题中不清楚您使用的是哪种方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T17:45:16.863

[阅读文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649051.aspx)：

> 如果 SetClipboardData 成功，则系统拥有由 hMem 参数标识的对象。所有权转移到系统后，应用程序可能无法写入或释放数据

跟踪剪贴板数据以便在关闭应用程序时将其从剪贴板中删除是完全可选的。一旦数据在剪贴板上，系统就拥有它并且它与您的应用程序是分开的，因此您可以选择将其保留在剪贴板上，以便在您的应用程序关闭后它仍然可以继续使用。除非您使用延迟渲染，否则在这种情况下，在关闭您的应用程序时将其从剪贴板中删除是有意义的，因为您的应用程序将不再运行以在其他应用程序请求时渲染数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:01:42.617

您的应用程序负责处理剪贴板上的数据（如果将其放在那里）。这就是为什么很多应用程序（例如 Microsoft Office）在您退出应用程序时会询问您是否要在剪贴板上保留大量数据。

但是，我强烈建议用户交互，因为您不知道用户以后是否需要剪贴板上的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:01:50.677

它通常由系统完成，但是，一些负责任的应用程序也会要求用户在离开之前释放剪贴板。

例如，MSWord 会在退出前询问用户是否将数据保存在内存中。出于一般目的，您可以将其留给系统。

请记住，用户可能希望将其保留在剪贴板中（即使在关闭应用程序之后），因此您不应对其进行破坏并将其从内存中删除。

# php - 通过多个分隔符将字符串分解成多维数组php

> ID：16036412
> 
> 赞同：0
> 
> 时间：2013-04-16T11:57:41.297
> 
> 标签：php, arrays, multidimensional-array

有人可以帮我做这个爆炸函数递归吗？我的头今天不工作。

```
function expl($str,$charlist='|'){
    $charlist = str_split($charlist);
    foreach($charlist as $char){
        if(is_array($str)){
            for($i=0; $i<sizeof($str); $i++){
                $str[$i] = expl($str[$i],$char);
            }
        }else{
            return (explode($char,trim($str,$char)));
        }
    }
    return($str);
}
echo "<pre>";
print_r(expl("A~a1~a2|B~b1~b2",'|~'));
echo "</pre>"; 
```

应该输出：

```
Array
(
[0] => Array
    (
        [0] => A
        [1] => a1
        [2] => a2
    )
[0] => Array
    (
        [0] => B
        [1] => b1
        [2] => b2
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:13:30.797

```
<?php

function expl($str, $charlist = '|')
{
    if (!$charlist) {
        return $str;
    }
    $char = $charlist[0];
    $matrix = explode($char, $str);
    for ($i = 0; $i < sizeof($matrix); $i++) {
        $matrix[$i] = expl($matrix[$i], substr($charlist, 1));
    }
    return $matrix;
}
echo "<pre>";
print_r(expl("A~a1~a2|B~b1~b2", '|~'));
echo "</pre>"; 
```

那将是这样的......使用递归！第一级将得到第一个矩阵，做这样的事情

```
$matrix[0] = "A~a1~a2";
$matrix[1] = "B~b1~b2"; 
```

然后，递归将执行第二部分，这将使每个字符串成为字符串数组，这将成为字符串数组，直到没有分隔符为止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:01:42.307

下面是一个工作示例，我提供了一个链接来显示函数运行时的输出：

**示例返回：**

[http://phpfiddle.org/api/run/4iz-i2x](http://phpfiddle.org/api/run/4iz-i2x)

**用法：**

```
echo '<pre>';
print_r( expl("A~a1~a2|B~b1~b2",'|~'));
echo '</pre>'; 
```

**功能：**

```
<?php

function expl($str,$charlist='|', $currentChar = 0, $continue = true){

    if(!$continue)
    {
        return $str;
    }

    $endArray = array();

    if($currentChar == 0){
        $charlist = str_split($charlist);
    }
    else
    {
        if($currentChar > count($charlist))
        {
            return expl($str, $charlist, $currentChar, false);
        }
    }

    if(!is_array($str))
    {   
        $pieces = explode($charlist[$currentChar], $str);
        $currentChar++;
        return expl($pieces, $charlist, $currentChar);
    }
    else{
        foreach($str as $arrayItem){
        if(is_array($arrayItem))
        {
                return expl($str, $charlist, $currentChar, false);
        }

        $endArray[] = explode($charlist[$currentChar], $arrayItem);

        }

        $currentChar++;
        return expl($endArray, $charlist, $currentChar);                
    }               
}    

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:16:16.297

只需这样做。首先按“|”爆炸 然后通过'〜'。它应该是这样的：

```
$str="A~a1~a2|B~b1~b2";
$arr=explode("|",$str);
$result=array();
foreach($arr as $k=>$v)
{
  $arr1=explode("~",$v);
  $result[]=$arr1;
} 
```

# serialization - 如何在序列化期间根据包含的类型信息区分要包含的属性？

> ID：16036416
> 
> 赞同：3
> 
> 时间：2013-04-16T11:57:49.157
> 
> 标签：serialization, json.net

我有一个相关的问题，我们称之为使用 JSON.NET的*差分序列化。*简而言之，挑战在于应该根据包含类型中的属性声明为一个类型序列化一组不同的属性。

```
public class ChildAttribute : Attribute {}
public class ReferenceAttribute : Attribute { }
public class ExcludeFromReferenceAttribute : Attribute { }

[DataContract]
public class Lorum
{
    [DataMember]
    [Child]
    public Ipsum SomeProp { get; private set; }

    [DataMember]
    [Reference]
    public Dolor SomeOtherProp { get; set; }
}

[DataContract]
public class Ipsum
{
    [DataMember]
    public string Name { get; set; }

    [ExcludeFromReference]
    public int Age { get; set; }

}

[DataContract]
public class Dolor
{
    [DataMember]
    public string Name { get; set; }

    [DataMember]
    [ExcludeFromReference]
    public int Width { get; set; }

    [DataMember]
    [ExcludeFromReference]
    public int Height { get; set; }
} 
```

通过 json 序列化程序运行时，我想应用一个规则集，根据上面的代码产生以下结果：

*   的所有属性`Lorum`都应包括在内。
*   `Ipsum`属性引用的实例`SomeProp`应该序列化所有属性，因为它是用`Child`属性修饰的。
*   `Dolor`属性引用的实例`SomeOtherProp`应该只`Name`序列化其属性。它*不应该*有`Height`和`Weight`序列化，因为`SomeOtherProp`用`Reference`属性修饰，并且`Height`用属性`Weight`修饰`ExcludeFromReference`。

我已经考虑制作一个 custom `ContractResolver`，但在确定要包含或不包含哪些属性时似乎无法从中获得足够的上下文信息：仅类型是不够的，因为我还需要有关访问该类型的属性的信息.

我不是 JSON.NET 向导，所以我很可能错过了一些明显的东西......

# c# - RotateFunction 有不同的行为

> ID：16036426
> 
> 赞同：0
> 
> 时间：2013-04-16T11:58:13.830
> 
> 标签：c#, rotation, unity3d

我编写了 Card 类的函数，它应该围绕它的 Y 轴及时旋转 Card。

```
public IEnumerator RotateCard(float angle)
{
     if(rotating)
         yield break;
     rotating = true;
     float newAngle = curRotation.y + angle;
     while(curRotation.y < newAngle)
     {   
         curRotation.y = Mathf.MoveTowards(curRotation.y, newAngle, rotateSpeed * Time.deltaTime);
         transform.eulerAngles = curRotation;
         yield return null;
      }
      rotating = false;
} 
```

我必须在 Card.OnMouseDown() 中调用这个函数：

```
IEnumerator OnMouseDown()
{
     print ("Card clicked");
     yield return StartCoroutine( RotateCard(180));
     yield return StartCoroutine(gameManager.actionDeck[0].RotateCard(180));
} 
```

其中 gameManager 是包含卡片 actionDeck 列表的对象。

第一次调用完成了函数应该做的事情 - 围绕它的 Y 轴旋转 Card。
另一方面，第二次调用使 Card 围绕某个奇怪的点旋转。

任何想法为什么以及如何使其以与调用＃1相同的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:47:55.203

您是否尝试改用 transform.localEulerAngles ？

# javascript - Chrome 错误：未捕获的语法错误：

> ID：16036427
> 
> 赞同：1
> 
> 时间：2013-04-16T11:58:18.037
> 
> 标签：javascript

好的，这是我的问题：

我试图扩展 dom，但对于我的一个原型函数，它会引发错误。错误是针对函数 hasClass。我在该脚本的前面使用了保留字 Element，所以我不明白他为什么只在那里抛出错误？

```
Element.prototype.hasClass = function (class) {
    return this.className.match(new RegExp('(\\s|^)'+class+'(\\s|$)'));
}

Element.prototype.addClass = function (class) {
    this.className = this.className + " " + class;
}

Element.prototype.removeClass = function (class) {
    if (this.hasClass(class)) {
        var reg = new RegExp('(\\s|^)'+class+'(\\s|$)');
        this.className = this.className.replace(reg,' ');
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:59:26.047

`class`是保留字。尝试重命名它。

以下是 JavaScript 中保留字的完整列表：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:01:30.287

`class`是保留字。你不能使用它。尝试重命名

# c# - 根据条件将数组中的字符串从一个字符串更改为另一个字符串

> ID：16036430
> 
> 赞同：0
> 
> 时间：2013-04-16T11:58:24.503
> 
> 标签：c#

我有一个字符串数组，其中大部分是字符串值“true”或“false”，还有其他字符串，但我不想更改它们。

所以我希望遍历字符串，在遇到单词“true”或“false”的地方我想将字符串更改为“1”或“0”

这些 1、0 和其他字符串最终将用作传递给 SQL 存储过程 IE 的参数： seCmd.Parameters["@CheckListRef"].Value = data[0];

我只是在语法上苦苦挣扎，因此寻求指导

```
string[] data = args.Trim().Split(',');

// Loop over strings
foreach (string s in data)
{
    if(s == "true")
    {
        convert the string True to the string 1
    }
    else if(s == "false")
    {
      convert the string True to the string 0
    }
} 
```

请有人提供一些指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:01:22.877

您的代码缺少的是对您正在检查的数组位置的引用。

使用`for`循环可以让您保留该参考：

```
string[] data = args.Trim().Split(',');

// Loop over strings
for(int i = 0; i < data.Length; i++)
{
    if(data[i] == "true")
    {
        data[i] = "1";
    }
    else if(data[i] == "false")
    {
        data[i] = "0";
    }
} 
```

注意 - 以上内容区分大小写，因此您可能希望将字符串测试替换为`data[i].Equals("true", StringComparison.InvariantCultureIgnoreCase)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:01:55.367

这应该有助于：

```
 string[] data = args.Trim().Split(',');

    for(int i = 0; i < data.Length; i++)
    {
        if(data[i] == "true")
        {
            data[i] = "1";
        }
        else if(data[i] == "false")
        {
            data[i] = "0";
        }
    } 
```

此外，您可以通过执行以下操作来缩短代码：

```
 string[] data = args.Trim().Split(',');

    for(int i = 0; i < data.Length; i++)
    {
        data[i].Replace("true", "0").Replace("false", "1");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:03:38.530

这是 LINQ 版本，它将返回一个新数组：

```
string[] newData = data.Select(r => (r == "true" ? "1" : r == "false" ? "0" : r))
                        .ToArray(); 
```

或者，如果您想忽略大小写，则：

```
newData = data.Select(r => 
           (r.Equals("true", StringComparison.CurrentCultureIgnoreCase) ? "1" 
           :r.Equals("false", StringComparison.CurrentCultureIgnoreCase) ? "0" 
           : r))
           .ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:09:19.983

```
string originalString = "true, True, FALSE,  something true,false,something else,false";
string resultString = Regex.Replace(
                originalString, @"((?<=(,\s*))|^)true((?=(\s*,))|$)", "1",RegexOptions.IgnoreCase);
resultString = Regex.Replace(
                resultString, @"((?<=(,\s*))|^)false((?=(\s*,))|$)", "0", RegexOptions.IgnoreCase);
string[] resultArray = Regex.Split(resultString, @"\s*,\s*"); 
```

结果数组：

```
 1
 1
 0
 something true
 0
 something else
 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:09:42.740

```
var data = args.Trim()
               .Split(',')
               .ToList()
               .ConvertAll(s => s.Replace("true", "1").Replace("false", "0")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:04:49.417

**您不必将其转换为`1 or 0`**. `Convert.ToBoolean()`如果您的数据类型是，只需执行`bit`以下操作：

```
bool bln;
if(bool.TryParse(data[0], out bln))
 {
   seCmd.Parameters.Add("@CheckListRef",SqlDbType.Bit).Value =bln;
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T12:05:28.833

我会为此使用 for 循环，但是在您的情况下，这不起作用

```
if(s == "true")
{
    s="1";
}
else if(s == "false")
{
  s="0";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T12:07:21.387

寻找一个 LINQ 表达式：

```
var parsedData = data.Trim()
.Where(d => d == "true" || d == "false")
.Select(d => bool.Parse(d) ? "1" : "0")
.ToList(); 
```

# javascript - 使用 ajax 加载字典文件，不要让 iPhone Mobile Safari 崩溃

> ID：16036433
> 
> 赞同：1
> 
> 时间：2013-04-16T11:58:25.303
> 
> 标签：javascript, jquery, iphone, mobile-safari

我有一个 Web 应用程序，我在其中加载（通过 ajax）一个字典文件（1MB）到 javascript 数组中。[我找到了Mobile Safari 在 10 秒后崩溃](https://stackoverflow.com/questions/2808174/iphone-javascript-execution-time)的原因。但现在我想知道的是如何解决这个问题？

在上面的链接上，答案建议使用`setInterval`，但这意味着我必须将字典文件分块并逐个加载。这当然可以做到，但是考虑到互联网速度，我必须制作很多块，并且页面加载需要永远加载太多请求（如果我让块太大，一些移动用户可能会发生这种情况将无法在给定的 10 秒内下载该块）。

所以，我的问题是：有没有人遇到过这种问题，你是怎么解决的？对正确方向的普遍推动表示赞赏。

编辑：这是我用来加载字典的 js 代码：

```
var dict = new Trie();

$.ajax({
    url: 'data/dictionary_342k_uppercase.txt',
    async: true,
    success: function (data) {
        var words = data.split('\n');
        for (var i = words.length - 1; i >= 0; i--) {
            dict.insert(words[i]);
        }           
    },
    error: function(){
        $('#loading-message').text("Problem s rječnikom");
    }
}); 
```

Trie.js：

```
function Trie () {
  var ALPHABET_SIZE = 30;
  var ASCII_OFFSET = 'A'.charCodeAt();

  this.children = null;
  this.isEndOfWord = false;

  this.contains = function (str) {
    var curNode = this;

    for (var i = 0; i < str.length; i++) {
      var idx = str.charCodeAt(i) - ASCII_OFFSET;
      if (curNode.children && curNode.children[idx]) {
        curNode = curNode.children[idx];
      } else {
        return false;
      }
    }

    return curNode.isEndOfWord;
  }

  this.has = function (ch) {
    if (this.children) {
      return this.children[ch.charCodeAt() - ASCII_OFFSET] != undefined;
    }
    return false;
  }

  this.next = function (ch) {
    if (this.children) {
      return this.children[ch.charCodeAt() - ASCII_OFFSET];
    }
    return undefined;
  }

  this.insert = function (str) {
    var curNode = this;

    for (var i = 0; i < str.length; i++) {
      var idx = str.charCodeAt(i) - ASCII_OFFSET;

      if (curNode.children == null) {
        curNode.children = new Array(ALPHABET_SIZE);
        curNode = curNode.children[idx] = new Trie();
      } else if (curNode.children[idx]) {
        curNode = curNode.children[idx];
      } else {
        curNode = curNode.children[idx] = new Trie();
      }
    }

    curNode.isEndOfWord = true;
    return curNode;
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T22:11:30.543

一旦您开始在 JS 中进行处理，这是一个非常常见的问题。如果 Mobile Safari 问题是原因，那么您要做的就是找出 CPU 时间的去向。

我假设它是`dict.insert()`循环而不是`data.split()`调用（这将更难以管理）。

这里的想法是将`dict.insert()`循环拆分为可以在顺序循环中异步调用的功能块（这就是`setupBuildActions`函数的作用）。在第一个块之后，每个后续块都被调用 via `setTimeout`，这有效地重置了 JS 运行时中的函数时间计数器（这似乎是杀死你的进程的原因）。

使用 Sequencer 函数意味着您还可以控制函数的运行顺序（它们始终按照它们在此处生成的顺序运行，并且不会同时安排两个或多个函数执行）。`setTimeout`这比在没有回调的情况下触发数千个调用要有效得多。您的代码保留对执行顺序的控制（这也意味着您可以在执行期间进行更改）并且 JS 运行时不会因预定的执行请求而过载。

您可能还想查看[https://github.com/michiel/sequencer-js](https://github.com/michiel/sequencer-js)上的节点项目以获取更多排序示例，并查看[http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)以获取关于`setTimeout`在不同的平台上。

```
var dict = new Trie();

// These vars are accessible from all the other functions we're setting up and
// running here

var BLOCKSIZE     = 500;
var words         = [];
var buildActions  = [];

function Sequencer(funcs) {
  (function() {
    if (funcs.length !== 0) {
      funcs.shift()(arguments.callee);
    }
  })();
}

// Build an Array with functions that can be called async (using setTimeout)

function setupBuildActions() {
  for (var offset=0; offset<words.length; offset+= BLOCKSIZE) {
    buildActions.push((function(offset) {
      return function(callback) {
        for (var i=offset; i < offset + BLOCKSIZE ; i++) {
          if (words[i] !== null) { // ugly check for code brevity
            dict.insert(words[i]);
          }
        }           
        // This releases control before running the next dict.insert loop
        setTimeout(callback, 0);
      };
    })(offset));
  }
}

$.ajax({
    url: 'data/dictionary_342k_uppercase.txt',
    async: true,
    success: function (data) {
      // You might want to split and setup these calls 
      // in a setTimeout if the problem persists and you need to narrow it down
      words = data.split('\n');
      setupBuildActions();
      new Sequencer(buildActions);
    },
    error: function(){
      $('#loading-message').text("Problem s rječnikom");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:31:03.580

这是一个使用 setTimeout 将单词实际插入到您的 trie 中的示例。它将原始字符串分解成批次，并使用 setTimeout 来延迟插入每批次单词的处理。我的示例中的批量大小是 5 个字。

实际的批量插入作为浏览器中的后续事件处理程序发生。

仅仅将单词分成几批可能会花费太长时间。如果遇到此问题，请记住您可以链接 setTimeout() 调用，例如迭代一段时间然后使用 setTimeout 安排另一个事件进行更多迭代，然后再次 setTimeout 等等。

```
 function addBatch(batch)
    {
            console.log("Processing batch:");
            for (var i = 0; i < batch.length; i++)
                    console.log(batch[i]);
            console.log("Return from processing batch");
    }

    var str = "alpha\nbravo\ncharlie\ndelta\necho\nfoxtrot\n" + 
              "golf\nhotel\nindia\njuliet\nkilo\nlima\n" + 
              "mike\nnovember\noscar\npapa\nquebec\n" + 
              "romeo\nsierra\ntango\nuniform\n" + 
              "victor\nwhiskey\nxray\nyankee\nzulu";

    var batch = []
    var wordend;
    for (var wordstart = 0; wordstart < str.length; wordstart = wordend+1)
    {
            wordend = str.indexOf("\n", wordstart);
            if (wordend < 0)
                    wordend = str.length;
            var word = str.substring(wordstart, wordend);
            batch.push(word);

            if (batch.length > 5)
            {
                    setTimeout(addBatch, 0, batch);
                    batch = [ ];
            }
    }
    setTimeout(addBatch, 0, batch);
    batch = [ ]; 
```

# c++ - 如何获取套接字上是否有任何数据可以在 boost::asio 中读取？

> ID：16036436
> 
> 赞同：3
> 
> 时间：2013-04-16T11:58:37.120
> 
> 标签：c++, sockets, boost, boost-asio

是否有任何 bool - `has data`/`has not`或替代方法？不需要实际读取 - 仅作为同步方法是否有数据可在 sockety 上读取的信息。那么套接字上是否有任何此类数据可用于读取方法`boost::asio::tcp::ip::socket`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:02:10.503

有[`bytes_readable`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/bytes_readable.html)功能。使用它，您可以检查是否有数据可供读取而不会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T13:22:45.783

另一个可能更简单的方法是[boost::asio::ip::tcp::socket::available()](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/available.html)非阻塞函数：

```
asio::ip::tcp::socket *s;
. . .
size_t availBytes = s->available();
if (availBytes > 0)
{
. . .
} 
```

# html - 覆盖最大宽度和百分比

> ID：16036437
> 
> 赞同：0
> 
> 时间：2013-04-16T11:58:39.130
> 
> 标签：html, css

想找到一种方法来添加一个固定位置和最大宽度的 div，它应该放置在带有覆盖或外部覆盖的 div 中。但棘手的部分是，当窗口缩放时，我希望它按百分比调整......

因此，如果我有一个最大宽度为 800 像素的 div，但是当我缩小浏览器窗口时，它应该会缩小。这对所有浏览器都可行吗？

还是我必须为此使用插件，例如 jqModal？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:59:44.773

只需定义 a `max-width`，然后使用百分比进行缩放：

```
.modal {
    width: 50%;
    max-width: 800px
} 
```

# jquery - 将外部 HTML 加载到混合 Web 应用程序中

> ID：16036442
> 
> 赞同：1
> 
> 时间：2013-04-16T11:58:47.787
> 
> 标签：jquery, ajax, json, jquery-mobile, jsonp

我有一个要提交到 Apple AppStore 的 jQuery Mobile 网络应用程序。我需要从外部位置加载 HTML。这是我的设置：

*   应用程序的页面（html、js、css）被打包在提交的应用程序中，因此它们将驻留在手机本地
*   一些本地页面应该具有在服务器端 (PHP) 生成的 HTML。我想用 AJAX 获取这些并插入到 DOM 中。我不能用 jQuery load() 或 get() 做到这一点，因为这会产生跨域请求。我正在做一些成功运行的 AJAX/JSONP 调用（“Web 服务返回数据”）。

有什么阻止我制作将 HTML 代码放入 JSONP 调用响应的服务器端脚本？还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:17:29.620

基本上，如果您要找到最佳方法，则需要考虑这一点。

首先，你是对的，JSONP 只是你可用的解决方案。现在一切都取决于您要加载的内容。

### 解决方案 1

您只能加载基本数据并使用 jQuery Mobile 创建页面内容。这是一种标准方式。通常你不会有那么多内容，jQM 可以非常快地构建它，速度足够快，甚至可以在页面准备好显示之前对其进行样式设置。

现代移动浏览器速度足够快，使用此解决方案不会有任何问题。

### 解决方案 2

另一种解决方案要求在服务器端完全创建页面内容，并且您将仅使用 JSONP 来加载该数据。这是一种不好的方法，当您将手机从数据处理中解救出来时，您的数据连接将会增加负担。无论您住在哪里，当前的移动数据连接都容易出现滞后和速度变化。并且您不会在页面加载后显示您的页面内容。更不用说，即使您选择这种方式，jQM 仍然需要增强新页面标记，并且该过程比动态页面内容创建要求更高。

这个解决方案还有另一个问题。您需要非常小心这种方法，因为有时您的服务器端生成的内容会破坏 JSONP 结构。

### 结论

简而言之，除非您有特殊原因选择**解决方案 2**，否则请始终坚持使用**解决方案 1**。

# algorithm - 迭代求数——算法设计

> ID：16036443
> 
> 赞同：1
> 
> 时间：2013-04-16T11:58:49.710
> 
> 标签：algorithm, loops, optimization, iteration, convergence

我正在尝试设计一种算法，它会在给定一组规则的情况下为我找到价格。

**现在的情况**

我们目前将所有产品的“价格”设置为 0.01 英镑，并将“line_crossed”属性设置为 false。我们计算的保证金为 0.01 英镑，虽然它仍然是负数，但价格翻了一番（增加 0 `2^n`）。一旦边距变为正值，我们将 'line_crossed' 设置为 true 并切换到不同的公式。

该公式跟踪使用的最后价格和当前价格，并将朝正确的方向移动（如果保证金为负，则向上，如果保证金为正，则向下）当前和最后之间的差值绝对值的一半价格。它一直这样做，直到边距介于 -0.01 和 0.01 之间。

基本上是指数上升，不连续，然后收敛到所需价格。

在 20,000 多种产品的列表中，该算法最多进行 28 次“迭代”，直到找到所有产品的收支平衡价格。

**期望的情况**

我玩弄了使用二进制搜索的想法以及我们拥有的有关产品（成本）的一些信息来告知合理的起始价格。但是，目前我赞成使用上述算法的变体的想法，除了不总是使用最后价格和当前价格之间绝对差值的一半，而是根据距 0 保证金的距离使用加权版本。（目前，如果我们以 8 英镑的价格上涨，而盈亏平衡价格为 8.01 英镑，我们将上涨至 16 英镑，然后逐步降至 8.01 英镑）。

有任何想法吗？感觉这是一个已经解决的问题，但我不知道解决方案。

谢谢，

马特

# android - 如何知道该文件包含android中的图像或视频？

> ID：16036444
> 
> 赞同：0
> 
> 时间：2013-04-16T11:58:53.093
> 
> 标签：android, file

我是 android 新手，我的问题是我选择了一些东西（图像或视频），现在我如何知道所选文件包含 android 中的图像或视频？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:15:08.847

```
if(item.endsWith(".jpg"))
{
//Image
}
if(item.endsWith(".3gpp"))
{
//video
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:31:13.940

这也可以帮助你

```
 String mpath ="a1.jpg";

        if(mpath.contains(".jpg")){

        }else{

        } 
```

# java - Java 找不到 PHP 脚本，但可以在浏览器中使用

> ID：16036445
> 
> 赞同：0
> 
> 时间：2013-04-16T11:58:57.413
> 
> 标签：java, php, mysqli, ubuntu-12.10

我的 /var/www/ 目录中保存了几个 PHP 脚本。我可以从我的浏览器运行它们，但 Java 看不到它们。

这是浏览器的输出：

![在此处输入图像描述](https://i.stack.imgur.com/YSTS6.png)

来自Java：

```
DB: Error executing script: get_profile_ids
HTTP/1.1 404 Not Found [Date: Tue, 16 Apr 2013 11:52:40 GMT, Server: Apache/2.2.22 (Ubuntu), Vary: Accept-Encoding, Content-Length: 288, Keep-Alive: timeout=5, max=100, Connection: Keep-Alive, Content-Type: text/html; charset=iso-8859-1]
DB: Result: 
```

我的Java代码：

```
public class ServerTest {

    public static void main(String [] args) {

        callPHPScript("get_print_profile_ids", new ArrayList<NameValuePair>());

    }

    public static String callPHPScript(String scriptName, List<NameValuePair> parameters) {
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://localhost/" + scriptName);
        String line = "";
        StringBuilder stringBuilder = new StringBuilder();
        try {
            post.setEntity(new UrlEncodedFormEntity(parameters));

            HttpResponse response = client.execute(post);
            if (response.getStatusLine().getStatusCode() != 200)
            {
                System.out.println("DB: Error executing script: " + scriptName);
                System.out.println(response.toString());
            }
            else {
                BufferedReader rd = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent()));
                line = "";
                while ((line = rd.readLine()) != null) {
                    stringBuilder.append(line);
                }
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println("DB: Result: " + stringBuilder.toString());
        return stringBuilder.toString();
    }
} 
```

还有我的 PHP 脚本：

```
<?php
include('connect_db.php');
include('tools.php');

$query = 'SELECT id FROM fingerprint_profiles';

$result = mysql_query($query);
echo($result);

?> 
```

有谁知道为什么会发生这种情况？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:01:26.007

您缺少 .php，更改
`HttpPost post = new HttpPost("http://localhost/" + scriptName);`
：
`HttpPost post = new HttpPost("http://localhost/" + scriptName + ".php");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:01:21.760

这是提示：

```
System.out.println("DB: Error executing script: " + scriptName); 
```

正在记录

```
DB: Error executing script: get_profile_ids 
```

将您的测试电话更改为

```
callPHPScript("get_profile_ids.php", new ArrayList<NameValuePair>()); 
```

你很可能会得到一个成功的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:01:37.127

您的 Java 代码`get_profile_ids`在您的浏览器屏幕截图显示时调用`get_profile_ids.php`。更改您的 Java 代码以调用`get_profile_ids.php`。

# php - MySQL Join 和 Distinct

> ID：16036447
> 
> 赞同：0
> 
> 时间：2013-04-16T11:59:01.763
> 
> 标签：php, jquery, mysql

我有两张桌子，一张称为区域，一张称为覆盖区域。表格区域包含字段邮政编码和地区。

例如：

区域表包含**邮政编码**- AB10**地区**- 阿伯丁

涵盖的表格包含**id** - 1 个**邮政编码**- AB10**日期**- 1364989057

现在我有一个搜索邮政编码或地区的表格。我正在使用 JQuery 的自动完成功能，可以获取邮政编码或地区，但不能同时获取两者。

目前我有：

```
$result = $db->query("SELECT DISTINCT `postcode` FROM `areaCovered` WHERE `postcode` LIKE '%$search%' ORDER BY `postcode` ASC") or die('Something went wrong'); 
```

然后我使用从数据库结果中检索到的数据并放入 JSON：

```
$json = '[';
$first = true;
while ($row = $result->fetch_assoc())
{
    if (!$first) { $json .=  ','; } else { $first = false; }
    $json .= '{"value":"'.$row['postcode'].'"}';
}
$json .= ']';
echo $json; 
```

如何首先连接两个表以搜索仅存在于区域覆盖表中的邮政编码或地区，然后输出结果是地区还是邮政编码。

我希望这对你有意义，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:10:18.440

而不是`distinct`你应该使用`group by`, 并加入他们。

类似的东西：

```
select
    a.`postcode` as postcode,
    a.`region` as region,
from
    `area` as a
    inner join
        `areaCovered` as ac
    on
        a.`postcode`=ac.`postcode`
where
    a.`postcode` like '%$search%'
    or
    a.`region` like '%$search%'
group by
    a.`postcode`
order by
    a.`postcode` asc 
```

最好我只是`json_encode()`整个结果集并在客户端解析它，但看起来您可能需要为 jQuery 插件提供特殊的 JSON 结构？

```
$list = array();
while ($row = $result->fetch_assoc()) {
    array_push(
        $list,
        array('value' => $row['postcode'] . ', ' . $row['region'])
    );
}

echo json_encode($list); 
```

这将创建一个 JSON 结构，如下所示；

```
[
    {
        "value": "123 45, Region 1"
    },
    {
        "value": "678 90, Region 2"
    },
    ...
] 
```

# php - 以数组和非数组为元素的多维数组，在php中遍历

> ID：16036466
> 
> 赞同：0
> 
> 时间：2013-04-16T12:00:23.280
> 
> 标签：php, multidimensional-array

我如何遍历如下结构：

```
 $this->user[$userid] =  array(
                                 "initial" => array(
                                              "amount" =>$amount,
                                              "cards" =>$cards
                                              ),
                                 "userturn" => array(
                                               "userturn1" => array(
                                                              "action"=>$action,
                                                              "amount"=>$amount,
                                                              "date"=>$datetime 
                                                              ),
                                                "userturn2" => array(
                                                              "action"=>$action,
                                                              "amount"=>$amount,
                                                              "date"=>$datetime 
                                                              ),
                                                              .
                                                              .
                                                              .
                                                              .
                                                              n times
                                                     )                                                                

                         ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:09:40.437

假设你想转弯..

```
foreach($this->user[$userid]['userturn'] as $k=>$turn){
    print_r($turn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:06:03.180

您可以使用简单的递归：

```
function recurseLoop($arr){
    foreach($arr as $key=>$value){
         echo('key:' . $key);
         if(gettype($value) == 'array'){
             recurseLoop($value);
         }
         else{
            echo('value:' . $value);
         }

    }
}

recurseLoop($this->user[$userid]); 
```

# content-management-system - 设置 sys_language_overlay = hideNonTranslated 隐藏根页面上的翻译内容元素（反向行为）

> ID：16036468
> 
> 赞同：1
> 
> 时间：2013-04-16T12:00:27.903
> 
> 标签：content-management-system, overlay, typo3, multilingual, typoscript

我已经使用 Templavoila 设置了一个多语言（德语 [默认]、英语、日语）TYPO3 项目，并希望隐藏未翻译的内容元素。因此我定义了`sys_language_overlay = hideNonTranslated`. 一般来说，这确实很好，但对根/主页有意想不到的副作用。如果设置为`hideNonTranslated`无内容的覆盖模式将完全显示在主页上，而未翻译的内容将按预期隐藏在所有子页面上。下面是我的打字稿，显示了语言设置。

```
config{
    sys_language_overlay = hideNonTranslated
    sys_language_mode = strict
    linkVars = L
    uniqueLinkVars = 1
    tx_cooluri_enable = 1
    redirectOldLinksToNew = 1
}

// ger
[globalVar = GP:L = 0]
    config{
        sys_language_uid = 0
        language = de
        locale_all = de_DE.UTF-8
        htmlTag_langKey = de-DE.utf8
    }
[global]

// en
[globalVar = GP:L = 1]
    config{
        sys_language_uid = 1
        language = en
        locale_all = en_US.UTF-8
        htmlTag_langKey = en-US.utf8
    }
[global]

// jp
[globalVar = GP:L = 2]
    config{
        sys_language_uid = 2
        language = jp
        locale_all = jp_JP.utf8
        htmlTag_langKey = jp-JP.utf8      
    }
[global] 
```

我怎样才能找到导致该问题的原因。为了获得预期的行为，我必须改变什么？我真的不知道我的设置有什么问题。因此，任何输入都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:56:09.737

所以我找到了“问题”。这是由于主页上的页面布局与子页面相比存在微小差异。主页使用了 Templavoila 提供的其他灵活的内容元素。必须通过将 fce 中的语言字段设置为`[All]`而不是`Default`.

# c# - 如何在wpf中获取选中的单选按钮的值

> ID：16036469
> 
> 赞同：5
> 
> 时间：2013-04-16T12:00:29.193
> 
> 标签：c#, wpf, radio-button, gridpanel

我`RadioButtons`在网格面板中有四个，但是当我这样做时：

```
<GroupBox x:Name="radioButtons">
    <RadioButton Content="1" Height="16" HorizontalAlignment="Left" Margin="10,45,0,0" Name="status1" VerticalAlignment="Top" />
    <RadioButton Content="2" Height="16" HorizontalAlignment="Left" Margin="10,67,0,0" Name="status2" VerticalAlignment="Top" />
    <RadioButton Content="3" Height="16" HorizontalAlignment="Left" Margin="10,89,0,0" Name="status3" VerticalAlignment="Top" />
    <RadioButton Content="4" Height="16" HorizontalAlignment="Left" Margin="10,111,0,0" Name="status4" VerticalAlignment="Top" />
</GroupBox> 
```

它说：

> 错误 1 ​​对象 'GroupBox' 已经有一个子对象，无法添加 'RadioButton'。'GroupBox' 只能接受一个孩子。

最后三个`RadioButtons`说：

> 多次设置“内容”属性。

我的怎么了`GroupBox`？此外，在我的代码中，我想访问`RadioButton`被检查的（最好是`int`）。我该怎么做呢？我试图在谷歌中查找，我发现了很多结果，但我无法理解其中任何一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:03:10.077

`GroupBox`只能容纳 1 个项目，因此尝试设置多次`Content`属性的错误。`GroupBox`

因此，将其设为 Layout 项目，然后将`RadioButton`s 放入其中。现在，您设置`Content`一次，即`StackPanel`，并且该 Layout 项目可以容纳许多孩子 -> `RadioButton`s。

```
<GroupBox x:Name="radioButtons">
  <StackPanel>
    <RadioButton Name="status1"
                  Height="16"
                  Margin="10,45,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Content="1" />
    <RadioButton Name="status2"
                  Height="16"
                  Margin="10,67,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Content="2" />
    <RadioButton Name="status3"
                  Height="16"
                  Margin="10,89,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Content="3" />
    <RadioButton Name="status4"
                  Height="16"
                  Margin="10,111,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Content="4" />
  </StackPanel>
</GroupBox> 
```

至于你的第二个问题，[Christian Mosers WPF Tutorial.net](http://wpftutorial.net/RadioButton.html)有一个不错的示例。如果你不明白，你也许应该先看看主题`Binding`和`Converter`，。

`RadioButton`以非 MVVM 方式通知检查的一种非常粗略的方式：

```
private void RadioButtonChecked(object sender, RoutedEventArgs e) {
  var radioButton = sender as RadioButton;
  if (radioButton == null)
    return;
  int intIndex = Convert.ToInt32(radioButton.Content.ToString());
  MessageBox.Show(intIndex.ToString(CultureInfo.InvariantCulture));
} 
```

然后，`RadioButton`在 xaml 中的每个 s 中，添加`Checked="RadioButtonChecked"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:32:27.530

如果您想要许多元素或控件，则必须将它们放在布局容器中。

*   网格
*   堆栈面板
*   停靠面板
*   包裹面板
*   ETC.....

# javascript - Javascript 错误：访问属性“resizeTo”的权限被拒绝

> ID：16036470
> 
> 赞同：0
> 
> 时间：2013-04-16T12:00:42.830
> 
> 标签：javascript

我正在使用 Firebug 的控制台来学习 Javascript，当我弹出一个这样的窗口时：

> `var googleWindow= window.open("http://www.google.com","Dogs window","height = 300, width = 300, top = 100, left = 100");`

然后我尝试像这样调整它的大小：`googleWindow.resizeTo()`我得到了一个错误。

我已经阅读了其他可能被禁用的窗口方法（例如 moveTo() ），当我尝试使用它们时确实没有定义。但这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:04:51.210

不允许在您的网站上运行的代码要求浏览器在 Google 的网页上执行 JavaScript 功能。如果是这样，安全隐患将是可怕的。

# jquery - jquery删除选定表的行的背景颜色

> ID：16036481
> 
> 赞同：0
> 
> 时间：2013-04-16T12:01:12.643
> 
> 标签：jquery, asp.net, css

如何在 jquery 的帮助下删除选定行的背景颜色？

假设用户选择了 id=3 的行，我需要删除背景颜色。

```
<table class='css_table' style='width: 100%'>
<tr>
    <th style='width: 20%'>Kimden</th>
    <th style='width: 25%'>Konu</th>
    <th style='width: 25%'>Mesaj</th>
    <th style='width: 10%'>Okundu</th>
    <th style='width: 20%'>Tarih</th>
</tr>
<tr id='3' class='selected_row' style='cursor: pointer; background-color: #E0EEEE'>
    <td><span class='row_name'>Prof. Dr.altay tinar</span></td>
    <td><span class='row_subject'>asda da dasd asdasda</span></td>
    <td><span class='row_body'>asda da dasd asdasda</span></td>
    <td><span>0</span></td>
    <td><span class='row_time'>4/15/2013 3:40:40 AM</span></td>
</tr>
<tr id='5' class='selected_row' style='cursor: pointer;'>
    <td><span class='row_name'>Ped.Arifx Yilmazx</span></td>
    <td><span class='row_subject'>undefined asd asdsa </span></td>
    <td><span class='row_body'>qdqw dqw d asda sd </span></td>
    <td><span>1</span></td>
    <td><span class='row_time'>4/15/2013 3:42:36 AM</span></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:02:08.837

使用[jQuery 的`css`函数](http://api.jquery.com/css/)去除背景颜色值：

```
var selectedId = 3;
$("#" + selectedId).css("background-color", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:06:25.760

尝试这个

## #HTML

```
<table class="css_table" border="1px">
<tr class='css-row'>
    <th style='width: 20%'>Kimden</th>
    <th style='width: 25%'>Konu</th>
    <th style='width: 25%'>Mesaj</th>
    <th style='width: 10%'>Okundu</th>
    <th style='width: 20%'>Tarih</th>
</tr>
<tr id='3' class='css-row'>
    <td><span>Prof. Dr.altay tinar</span></td>
    <td><span>asda da dasd asdasda</span></td>
    <td><span>asda da dasd asdasda</span></td>
    <td><span>0</span></td>
    <td><span class='row_time'>4/15/2013 3:40:40 AM</span></td>
</tr>
<tr id='5' class='css-row' >
    <td><span class='row_name'>Ped.Arifx Yilmazx</span></td>
    <td><span class='row_subject'>undefined asd asdsa </span></td>
    <td><span class='row_body'>qdqw dqw d asda sd </span></td>
    <td><span>1</span></td>
    <td><span class='row_time'>4/15/2013 3:42:36 AM</span></td>
</tr>
<table> 
```

## #CSS 样式

```
.css-table
{
   width:100%;
}
.css-row
{
    cursor: pointer; 
    background-color: #E0EEEE;
    font-weight:normal;
}
.css-selectedrow
{
    color:blue;
    cursor: pointer;
    font-weight:normal;
    background-color: #fff;
} 
```

## ＃脚本

```
$(document).ready(function(){
    $("tr").click(function(){
      $("table tr").addClass("css-row");
      $(this).removeClass("css-row");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:06:34.347

试试这个更具体：

```
$(".css_table tr[id='3']").css("background-color", ""); 
```

[**在这里演示**](http://jsfiddle.net/kbRWL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:11:42.233

试试下面的方法，它会帮助你...

下面的函数删除用户单击的表格行的背景。

**小提琴：http:** [//jsfiddle.net/RYh7U/139/](http://jsfiddle.net/RYh7U/139/)

**查询：**

```
$(".css_table tr").click(function(){
    $(this).css("background", "");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:22:34.070

*你可以试试这个代码*

```
 $(document).ready(function () {
     $(".selected_row").css("background-color", "");
   }); 
```

# asp.net-mvc-3 - 如何在 MVC3 的 Razor 视图编辑器中获取折叠 + 和 - 符号

> ID：16036483
> 
> 赞同：2
> 
> 时间：2013-04-16T12:01:14.030
> 
> 标签：asp.net-mvc-3, razor, visual-studio-2012

我正在使用带有 MVC3、Razor 和 C# 的 VS2012。

这里有点糊涂。我的 Razor 视图似乎没有显示 Visual Studio 嵌套“+”和“-”符号。我在其他 cshtml 视图中围绕 HTML 块（如

提前致谢。

编辑。我越想这是一个关于设置 Visual Studion 的问题。符号是左边距编辑器的一个特征。当单击“-”符号时，代码块会折叠，我希望它位于由 {} 表示的代码块周围。

编辑：似乎 CTRL-M,CTRL-H 是一种方法，当你这样做时，“+”和“-”会留在那里。但是，您不能折叠一个块，然后在这个内部块周围折叠一个外部块。似乎一次只能折叠一个块。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T12:05:52.127

你试过点击编辑->大纲->开始自动大纲吗？

只是根据我的一种观点进行了尝试，它奏效了。

# html - 如何仅使用 CSS 设置某个角的边框半径

> ID：16036486
> 
> 赞同：3
> 
> 时间：2013-04-16T12:01:18.583
> 
> 标签：html, css

![在此处输入图像描述](https://i.stack.imgur.com/5gqu4.gif)

如上所示，我可以只给顶部而不是底部或者有时是底部而不是顶部的半径吗？

有没有办法只给一个角的边界半径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:01:58.663

喜欢`border-radius:top-left top-right bottom-right bottom-left`，

```
div{
    width: 100px;
    height: 30px; 
    background: black;
    border-radius: 8px 8px 0 0
} 
```

**[演示](http://jsfiddle.net/mkhTE/1/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:03:36.733

要么使用border-radius，例如：

```
border-radius: 5px 5px 5px 5px; 
```

或者，对于左上边框，您可以更具体地使用：

```
border-top-left-radius: 5px; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:03:28.613

这是仅在具有类框的 div 上的圆角的 CSS：

`.box { border-radius: 5px 5px 0px 0px; }`

您可能还会发现这很有帮助：[http ://css3generator.com/](http://css3generator.com/)

**编辑：** [显然](http://caniuse.com/#feat=border-radius)你不再需要 webkit 前缀了！

# matlab - 在matlab上绘制二维点并在单击点时显示相关图像

> ID：16036488
> 
> 赞同：0
> 
> 时间：2013-04-16T12:01:20.143
> 
> 标签：matlab, figure, user-interaction

我有一组与二维点相关的图像。我想在图形上绘制这些点，当我单击这些点时，我希望在屏幕上看到相应的图像。假设我有一个 nxd 的矩阵`IMAGES`，其中 n 是图像的数量和每个图像的 d 维，并且我有`Points`一个 nx2 的矩阵，它显示了我所说的对应点。

你能请任何方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:10:19.707

尝试为. [_](http://www.mathworks.se/help/matlab/creating_guis/writing-code-for-callbacks.html) `ButtonDownFcn`它将允许您获取已单击的区域并执行您的代码。

# android - 无法创建警报对话框

> ID：16036501
> 
> 赞同：0
> 
> 时间：2013-04-16T12:01:39.760
> 
> 标签：android

我正在覆盖后退按钮。我想在离开我的应用程序时向用户显示一个确认对话框。创建对话框时出现以下错误

```
 Activity com.example.netlogger.ActivityLogin has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@49ffa7b8 that was originally added here
04-16 16:47:40.885: E/WindowManager(7757): android.view.WindowLeaked: Activity com.example.netlogger.ActivityLogin has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@49ffa7b8 that was originally added here
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-16 16:47:40.885: E/WindowManager(7757):  at android.app.Dialog.show(Dialog.java:241)
04-16 16:47:40.885: E/WindowManager(7757):  at com.example.netlogger.ActivityLogin.onBackPressed(ActivityLogin.java:130)
04-16 16:47:40.885: E/WindowManager(7757):  at android.app.Activity.onKeyUp(Activity.java:1888)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.KeyEvent.dispatch(KeyEvent.java:1063)
04-16 16:47:40.885: E/WindowManager(7757):  at android.app.Activity.dispatchKeyEvent(Activity.java:2068)
04-16 16:47:40.885: E/WindowManager(7757):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1703)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2473)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2443)
04-16 16:47:40.885: E/WindowManager(7757):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
04-16 16:47:40.885: E/WindowManager(7757):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 16:47:40.885: E/WindowManager(7757):  at android.os.Looper.loop(Looper.java:123)
04-16 16:47:40.885: E/WindowManager(7757):  at android.app.ActivityThread.main(ActivityThread.java:4633)
04-16 16:47:40.885: E/WindowManager(7757):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 16:47:40.885: E/WindowManager(7757):  at java.lang.reflect.Method.invoke(Method.java:521)
04-16 16:47:40.885: E/WindowManager(7757):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-16 16:47:40.885: E/WindowManager(7757):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-16 16:47:40.885: E/WindowManager(7757):  at dalvik.system.NativeStart.main(Native Method) 
```

我的代码如下

```
@Override
    public void onBackPressed() {
        super.onBackPressed();
        SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(this);
        if (!prefs.getBoolean("ask_for_exit", false)) {
            exitAlertDialog = new Builder(ActivityLogin.this)
                    .setTitle("Are You Sure?")
                    .setMessage("Are you sure you want to exit")
                    .setPositiveButton("YES",
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    finish();
                                }
                            })
                    .setNegativeButton("NO", new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog, int which) {
                                    exitAlertDialog.dismiss();
                                }
                    }).create();
            exitAlertDialog.show();

        }
    } 
```

这个错误是什么意思？如果有任何线索，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:05:14.473

如果你打电话

```
super.onBackPressed(); 
```

从您的`onBackPressed()`方法中，默认的后退按钮行为将发生，并且您的活动将被销毁而不清理（或显示）您的`AlertDialog`. 您应该注释掉该行。

此外，如果您的 SharedPreference**不**显示 AlertDialog，那么您应该显式调用`finish()`一个`else`块。

```
if (!prefs.getBoolean("ask_for_exit", false)){
  //show alert
}else{
   finish();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:06:10.093

从函数中移除`super.onBackPressed();`，当使用该函数时，Activity 会自动调用 onStop();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:07:03.153

问题在于`super.onBackPressed();`删除该行。

```
super.onBackPressed(); 
```

退出应用程序。您正在尝试在它之后添加一个警报对话框。那就是问题所在。

# symfony - Symfony 2.2 部署问题

> ID：16036504
> 
> 赞同：0
> 
> 时间：2013-04-16T12:01:47.537
> 
> 标签：symfony, deployment

由于我的服务器上的另一个[问题](https://stackoverflow.com/questions/16012391/symfony-2-2-white-blank-screen-in-prod-another-one?noredirect=1#comment22868578_16012391)，我尝试设置一个真正的新项目并执行此操作（Windows 上带有 xampp 的 localhost）：

*   安装卷曲
*   加载程序作曲家就像在文档中所说的那样
*   装载机供应商，如文档中所述
*   合并的应用程序/配置文件夹
*   复制的 src 文件夹
*   复制的 web/bundles/myBundle 文件夹

之后，我尝试了部署步骤[文档](http://symfony.com/doc/current/cookbook/deployment-tools.html)。我跳过了上传文件和编辑 parameter.yml（它已经为 localhost 配置）。比我在做' *B）更新你的供应商*'时遇到的麻烦：

```
php composer.phar install --optimize-autoloader 
```

此步骤从 web\bundles\myBundle 文件夹中删除我的所有文件。

我必须告诉作曲家我的捆绑包吗？我首先想到，我必须将它们存储在其他地方，但这个[线程](https://stackoverflow.com/questions/5380710/where-should-i-save-my-css-and-js-files-in-symfony-project)告诉我，我是对的？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:55:52.747

您提到的线程来自 symfony 1，但您正在安装 symfony 2 应用程序。

在 web/bundles 中安装了您的资产（css、javascript 和图像）。您将通过 composer 安装的包位于您的供应商文件夹中。

你自己的包应该在 src 文件夹中。

我认为[这](http://symfony.com/doc/current/quick_tour/the_big_picture.html)是了解文件存储位置的良好开端。

您的 css、js 和图像应该存储在一个包中，例如：

```
src/AcmeDemoBundle/Resources/public/css
src/AcmeDemoBundle/Resources/public/js
src/AcmeDemoBundle/Resources/public/images 
```

然后你可以安装你的资产，`php app/console assets:install web`它们将被推送到 web/bundles 文件夹中。

# c# - 编写 C# 属性的最短方法？

> ID：16036507
> 
> 赞同：2
> 
> 时间：2013-04-16T12:01:52.387
> 
> 标签：c#, syntax, standards

有人告诉我，您可以替换以下代码：

```
private string name;

public string Name
{
    get;
    set;
} 
```

具有以下效果并且没有不良影响：

```
public string Name; 
```

我意识到，在第一个示例中设置的属性与我删除它并将原始属性设置为时几乎相同，`public`但是对于您只需要基本的getter和setter？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:04:06.777

第二种方式不是属性，而是字段。您应该始终将属性用于面向公众的值的原因是，从字段转换为属性会构成重大更改。使用属性允许您稍后更改 getter 或 setter 的行为，而不会破坏任何引用您的代码。

请记住，代码 `public string Foo { get; set; }`

实际上相当于

```
private string foo;
public string Foo 
{ 
    get { return foo; }
    set { foo = value; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:06:10.107

当您使用属性时，您可以更好地控制属性具有的内容。

```
private string name;

public string Name
{
    get;
    set;
} 
```

是错的，应该是

```
public string Name
{
    get;
    set;
} 
```

或者

```
private string name;

public string Name
{
    get { return name;}
    set { this.name = value;}
} 
```

有时，当您希望仅在类内设置变量时，您可以使用

```
public string Name
{
    get;
    private set;
} 
```

属性结合了字段和方法的各个方面。对于对象的用户来说，属性似乎是一个字段，访问该属性需要完全相同的语法。对于类的实现者来说，属性是一个或两个代码块，代表一个 get 访问器和/或一个 set 访问器。get 访问器的代码块在读取属性时执行；set 访问器的代码块在属性被分配一个新值时执行。没有 set 访问器的属性被认为是只读的。没有 get 访问器的属性被认为是只写的。具有两个访问器的属性是可读写的。

来源： http: [//msdn.microsoft.com/en-us/library/w86s7x04 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/w86s7x04(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:09:01.070

公共属性与公共实例变量不同。

这种差异可能很重要。例如，如果您使用数据绑定 asp.net 控件（如 DroDownListBox 中的 DataTextField），如果将其设置为实例变量而不是公共属性，它将失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:03:21.130

我认为最短的方法是使用[自动实现的属性](http://msdn.microsoft.com/en-IN/library/bb384054.aspx)和一些关于它们的参考信息

*在 C# 3.0 及更高版本中，当属性访问器中不需要额外的逻辑时，自动实现的属性使属性声明更加简洁。它们还使客户端代码能够创建对象。如下例所示声明属性时，编译器会创建一个私有的匿名支持字段，该字段只能通过属性的 get 和 set 访问器访问。*

公共字符串名称{获取；放;}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:03:56.420

编写属性的最短方法是使用**自动 getter 和 setter**。

不过，这并不是您在问题中提出的，您已经用 field 替换了具有**支持 field****的**传统*属性*。

 ****自动 getter/setter 如下所示：

`public string Blah { get; set; }`

我相信这个特性是在 C# 3 中引入的。因此，您必须针对此或以上，才能使用这些。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:04:41.033

```
public string Name { get; set; } 
```

微博：

> 属性是提供灵活机制来读取、写入或计算私有字段值的成员。属性可以像公共数据成员一样使用，但它们实际上是称为访问器的特殊方法。这使得数据可以轻松访问，并且仍然有助于提高方法的安全性和灵活性。****

# workflow - 为工作流设置键/ID

> ID：16036516
> 
> 赞同：2
> 
> 时间：2013-04-16T12:02:11.403
> 
> 标签：workflow, workflow-foundation-4, workflow-foundation, workflow-foundation-4.5

Workflow Foundation 的新手，所以这对你们中的许多人来说可能是一个基本问题。

我有一个工作流设计器（客户端）/服务器应用程序。在设计器中，我可以将工作流上传到服务器，服务器将它们存储在数据库中。设计者可以请求从服务器下载工作流。下载完成后，我们可以在设计器中修改后再上传。为了能够做到这一点，我需要在工作流程中添加某种 ID/Key。

最好的方法是什么？

我正在考虑向 ActivityBuilder 添加一个属性，但这样做会将其添加到参数列表中，这似乎不正确......

任何帮助将非常感激

* * *

嗨@Will，我尝试将属性附加到活动，但我无法让它工作。我没有使用任何像 WorkflowRecord 这样的模型，它只是一个基本的设计师。

我使用 _workflowDesigner.Save(path); 保存它或 _workflowDesigner.Load(path); 加载它。

我创建并添加附加属性

```
attachProp = new AttachedProperty<int?>()
    {
        Name = "Key",
        IsBrowsable = true,
        Getter = (modelItem) => 5,
        Setter = ((modelItem, keyValue) => modelItem.Properties["Key"].SetValue(keyValue)),
        OwnerType = typeof(Activity)
    };

    _workflowDesigner.Context.Services.GetService<AttachedPropertiesService>().AddProperty(attachProp); 
```

如果我尝试访问附加的属性，它会抛出一个异常（不包含键的定义）

```
dynamic mainActivity = ((_workflowDesigner.Context.Services.GetService<ModelService>().Root.GetCurrentValue() as ActivityBuilder).Implementation as Activity);
int? testValue = mainActivity.Key; //Exception, Activity' does not contain a definition for 'Key' 
```

我通读了这个 [post] ( [http://blogs.msdn.com/b/kushals/archive/2010/01/04/base-designer-with-additional-adornments.aspx](http://blogs.msdn.com/b/kushals/archive/2010/01/04/base-designer-with-additional-adornments.aspx) ) 将附加属性添加到活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:43:31.380

[通过AttachablePropertyServices 类](http://msdn.microsoft.com/en-us/library/system.xaml.attachablepropertyservices.aspx)附加属性。

```
public class WorkflowRecord
{
    static AttachableMemberIdentifier Id = 
        new AttachableMemberIdentifier(typeof(Guid), "Id");

    public static object GetCommentText(object instance)
    {
        object viewState;
        AttachablePropertyServices.TryGetProperty(instance, Id, out viewState);
        return viewState;
    }

    public static void SetCommentText(object instance, object value)
    {
        AttachablePropertyServices.SetProperty(instance, Id, value);
    }
} 
```

您可以使用它来获取或设置工作流实例上的数据库 ID，并且它将被序列化/反序列化到/从 xaml。

```
<Activity
    xmlns:me="clr-namespace:Herp;assembly=derp"
    me:WorkflowRecord.Id="This is a guid lol"
    x:HideAdditionalAttributesBecauseThisIsAnExample="true" /> 
```

有关更多信息，请阅读[msdn 上的此博客文章](http://blogs.msdn.com/b/mwinkle/archive/2009/12/06/wf4-design-time-attachedpropertiesservice-and-attached-properties.aspx?Redirected=true)

# android - 使用 android 连接到 ftp 服务器

> ID：16036519
> 
> 赞同：0
> 
> 时间：2013-04-16T12:02:17.207
> 
> 标签：android, ftp, libraries

我是android新手，我正在尝试使用android将文件从sdcard上传到ftp服务器，代码似乎是正确的。在调试时它说我的连接和上传功能到服务器无法访问 org.appache.commons.net 提供的类（在这些类中找不到源），知道我有这个 org.appache.commons.net jar libs 文件夹、项目构建路径和用户库。我应该使用另一个图书馆，还是有其他工作要做？

编码

```
public boolean ftpConnect(String host, String username,String password, int port){
try {
mFTPClient = new FTPClient();  
mFTPClient.connect(host, port);
mFTPClient.enterLocalPassiveMode(); 
if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {
// login using username & password
boolean status = mFTPClient.login(username, password);
Log.w("into the ftpUpload","!!");
mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
mFTPClient.enterLocalPassiveMode();
Log.w("into the ftpUpload","!!");
return status;
}
} catch(Exception e) {
Log.d(TAG, "Error: could not connect to host " + host );
}
                return false;} 
```

使用 FtpClient FTP = new FtpClient() 在另一个类中调用此方法；FTP.ftpConnect(" *.* .*. *", "* ", "*", 21);

我正在这样做，就像几篇文章提出的那样，关于我将 org.apache.commons.net jar 添加到 lib 文件和 java 构建路径的 lib。这里给出了例外：mFTPClient.connect(host ， 港口）; （顺便说一句，没有日志）..有人知道这可能是什么问题吗？我尝试了很多对其他人有用的代码，但每次都无法连接到 ftp 服务器。感谢您的回复。

# php - 从数据库生成的下拉列表中捕获多个值

> ID：16036520
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:02:17.393
> 
> 标签：php, html, drop-down-menu

我在从数据库生成的下拉列表中捕获多个值时遇到问题。我必须捕获多个值并且还必须保存在数据库中。它只捕获最后选择的值 id 并保存该值到数据库。这是我的代码

```
<?php

    include("config.php");
    $result2 = mysql_query("SELECT Emp, ed FROM pd WHERE manemail = '$mai'");

    echo "<select name='allo' multiple style='width:163px;'>";
    while($row2 = mysql_fetch_array($result2))
    {
        $emp=$row2['Emp'];
        $ed=$row2['ed'];
        echo "<option value='".$ed."' name='" .$ed. "' >" .$emp. " </option>";
    }
    echo "</select>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:09:37.593

将括号“[]”添加到您选择的名称中：

```
<select name="allo[]" multiple style='width:163px;'> 
```

然后，您可以在 PHP 中拥有所有选定的值，如下所示：

```
// Here you iterate $_GET['allo'] to get each selected id!
$array_of_ids[] = array();
foreach($_GET['allo'] as $selectedOption)
    $array_of_ids[] = $selectedOption;

print_r($array_of_ids); // This array contains all the selected ids... 
```

# ios - xcode将不同的最大字符长度设置为不同的TextField

> ID：16036521
> 
> 赞同：0
> 
> 时间：2013-04-16T12:02:23.597
> 
> 标签：ios, objective-c, cocoa-touch, uitextfield

我有两个文本字段。使用[它将](https://stackoverflow.com/questions/433337/iphone-sdk-set-max-character-length-textfield) 最大字符设置为文本字段非常有用。我如何检查使用了哪些文本字段，以便设置不同的最大长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:12:15.647

我认为您正在尝试为您的文本字段设置不同的最大字符长度，然后首先在标题中为您的文本字段创建出口，

```
//header
IBOutlet UTtextField *textField1;
IBOutlet UITextField *textField2; 
```

希望你已经做到了。

然后只需检查实现方法中的textField，我将修改答案：

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
        if(textField == textField1) {
                NSUInteger newLength = [textField.text length] + [string length] - range.length;
            return (newLength > 25) ? NO : YES;
        }
        else if(textField == textField2)
       {
               //do the same with different values
       }
 } 
```

**编辑**您还可以为您的 TextFields 设置标签并使用它，例如`switch(textField.tag)`.

# asp.net-mvc - Azure 存储模拟器访问 Blob 时出错

> ID：16036522
> 
> 赞同：0
> 
> 时间：2013-04-16T12:02:25.723
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, azure, azure-storage

刚刚注意到一个奇怪的问题。我无法再访问存储在我的 Azure 存储模拟器中的 blob（iamge 文件）。首先注意到我的网络角色在调试时没有从模拟器中提供我的文件。我尝试使用第三方应用程序 cloudberry 访问文件。cloudberry 让我可以浏览我创建的存储模拟器容器，但是当我尝试访问文件时它失败了。我的应用程序和 cloudberry 都失败了

> 500 错误

返回...没有帮助。

尝试重新启动存储模拟器，没有运气。尝试从 Azure SDK 命令提示符启动模拟器以查看是否有错误。成功启动...没有报告错误，但是当我尝试访问我的 blob 时仍然遇到问题。我安装了 SQL Express，并验证了 MSSQL$SQLEXPRESS 服务正在运行。我最近没有对我的 Web 角色配置进行任何更改。我正在使用 Azure 工具版本：2012 年 6 月。有人对我还应该尝试什么有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:30:20.453

Gaurav Mantri 的评论有助于追查我的错误。检查错误日志，我发现我遇到了一个很常见的问题，即我的 azure 存储损坏了自身。如果有人在相同或类似问题上寻求帮助，我在上面找到了一个信息丰富但不确定的论坛帖子（下面的链接）。

[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/699d8861-b3d3-4140-9cf3-b749a2cfed39/](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/699d8861-b3d3-4140-9cf3-b749a2cfed39/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T17:51:38.870

这个问题也在这个 SO 线程中讨论：

[神秘消失的 Azure 开发存储资产](https://stackoverflow.com/questions/11252499/mysterious-disappearing-azure-development-storage-assets)

根据我的经验，我只有 Azure SDK 1.7 附带的模拟器才会遇到这个问题。正如您从[我的回答](https://stackoverflow.com/a/13731286/753737)中看到的那样，通过在 Azure SDK 1.8 中使用更新的模拟器（我已经使用了 4 个多月），问题消失了——您可以在升级它的同时继续在您的云项目中使用 1.7 库。

# standards - 数据格式描述最佳实践

> ID：16036526
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:02:36.387
> 
> 标签：standards, dataformat

我需要一种灵活的方式来描述数据格式。长度、数据类型、描述等

我想使用 xml 来定义每个对象，因为它可以很容易地解析为不同的语言。

这是执行此操作时的最佳做法，还是有任何定义的标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T16:10:27.943

我最终使用 XML 来解决我的问题，到目前为止效果很好。

# java - Spring Batch DataSourceTransactionManager 在 Oracle 上失败

> ID：16036536
> 
> 赞同：2
> 
> 时间：2013-04-16T12:02:59.397
> 
> 标签：java, oracle, oracle11g, weblogic, weblogic11g

我将 WebLogic 10.3.3 与 Oracle 11g 一起使用，一旦我从 Spring [ResourcelessTransactionManager](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/support/transaction/ResourcelessTransactionManager.html)（主要用于测试）切换到生产性[DataSourceTransactionManager](http://static.springsource.org/spring/docs/3.1.2.RELEASE/javadoc-api/org/springframework/jdbc/datasource/DataSourceTransactionManager.html) ，就会遇到 Spring Batch 的一个奇怪问题。首先，我使用了 WebLogics 默认驱动程序`oracle.jdbc.xa.client.OracleXADataSource`，但由于 Spring 无法设置隔离级别，此驱动程序失败 - 这也记录[在此处](http://docs.oracle.com/cd/E13222_01/wls/docs70/oracle/trxjdbcx.html#1081244)。

我对此很好，因为无论如何我都不需要全局事务，所以我切换到`oracle.jdbc.driver.OracleDriver`. 现在我收到错误消息

```
ORA-01453: SET TRANSACTION must be first statement of transaction 
```

我没有找到很多这方面的信息，有一个错误，但很久以前应该在 Oracle 7 中修复。看起来事务是在（？）实际作业被添加到 JobRepository 之前开始的，并且没有正确关闭或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:02:59.397

JobI 能够通过将所有事务的隔离级别设置为`READ_COMMITTED`. 默认情况下，Spring 将`SERIALIZABLE`其设置为非常严格（但非常好）。尽管 Oracle 应该支持它，但这在我的机器上不起作用：

[http://www.oracle.com/technetwork/issue-archive/2005/05-nov/o65asktom-082389.html](http://www.oracle.com/technetwork/issue-archive/2005/05-nov/o65asktom-082389.html)

这是我的代码 - 首先是配置：

```
<bean id="jobRepository" class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean">
    <property name="transactionManager" ref="transactionManager" />
    <property name="dataSource" ref="dataSource" />
    <property name="isolationLevelForCreate" value="ISOLATION_READ_COMMITTED" />
</bean> 
```

...这是为了工作本身（简化）：

```
public class MyFancyBatchJob {
  @Transactional(isolation=Isolation.READ_COMMITTED)
  public void addJob() {
    JobParameters params = new JobParametersBuilder().toJobParameters();
    Job job = jobRegistry.getJob("myFancyJob");
    JobExecution execution = jobLauncher.run(job, params);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-14T10:51:15.980

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" >
  <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"></property>
  <property name="url" value="jdbc:oracle:thin:<username>/<password>@<host>:1521:<sid>" /> 
</bean> 

  <jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="org/springframework/batch/core/schema-drop-oracle10g.sql" /> 
    <jdbc:script location="org/springframework/batch/core/schema-oracle10g.sql" />
  </jdbc:initialize-database> 

  <bean id="jobRepository"
    class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="databaseType" value="oracle" />
     <property name="tablePrefix" value="BATCH_"/>
        <property name="isolationLevelForCreate" value="ISOLATION_DEFAULT"/>
  </bean>

  <bean id="jobLauncher"
    class="org.springframework.batch.core.launch.support.SimpleJobLauncher">
    <property name="jobRepository" ref="jobRepository" />
  </bean>

/*for spring batch with oracle 10g and 11g 
*/ 
```

# bash - 如何获取/检查 bash 脚本中的哪些部分/行花费最多的执行时间？

> ID：16036543
> 
> 赞同：1
> 
> 时间：2013-04-16T12:03:15.870
> 
> 标签：bash, shell, execution-time

我有一个非常长的 bash 脚本，它在后台执行一些操作（不产生任何输出）。

我想知道哪些行/部分占用了最多的执行时间。

我可以使用某种工具/功能/linux内置来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:22:30.043

当我过去不得不这样做时，我使用了这种格式：`( time echo "hello" ) 2>>output.txt`

对脚本中的每一行执行此操作，以便为每一行计时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:12:17.843

我可以在这里想到两种方法。

1) 记录每个命令或函数的启动时间并输出到日志文件

```
# echo "$(date) : Started function_x" >> $LOGFILE 
```

2）计算出每个函数/任务花费的秒数并记录下来。

```
startTime=$(date +%s)
longRunningFunction
endTime=$(date +%s)
echo "longRunningFunction took $(expr $endTime - $startTime) seconds" >> $LOGFILE 
```

# php - number_format 仅当不为零时

> ID：16036544
> 
> 赞同：2
> 
> 时间：2013-04-16T12:03:16.310
> 
> 标签：php, number-formatting

如果浮点数的小数不为零，我想显示一个小数。

最优雅的方法是什么？

```
100.00 -> 100
99.45 -> 99.5
99.44 -> 99.4
11.30 -> 11.3
2.00 -> 2
11.02 -> 11
13.05 -> 13.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:06:54.223

```
ini_set("precision", 8); /* low enough; eventually if needed */
var_dump((string)round($float, 1)); 
```

这应该完成任务

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:10:21.263

按以下方式使用。

```
$x = "99.44";  // example value
$y =  number_format((float)$x, 1, '.', '');
echo str_replace(".0","",$y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:10:08.173

```
$rounded = (!is_int($number)) ? round($number, 1) : round($number); 
```

我已经用您的示例数据测试了上述内容，输出如下：

```
100.00 > 100
99.45 > 99.5
99.44 > 99.4
11.30 > 11.3
2.00 > 2
11.02 > 11
13.05 > 13 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:12:42.373

我更喜欢这种方式：

`$num = 100.1;
echo (floor($num) == $num) ? $num : number_format($num,1);`

# c# - 如何使用正则表达式获取具有特定属性的方法名称

> ID：16036550
> 
> 赞同：0
> 
> 时间：2013-04-16T12:03:34.857
> 
> 标签：c#, regex

解析具有特定属性的方法名称时需要帮助。

规则：
1) 应列出所有具有最低“[Test”属性的方法。
2) methodName 将在名称前有一个空格字符，并在名称末尾有“（”符号。很可能是 Test 属性的下一行或第二行。

样品 1：

```
[Test]
public Type methodName(parametes ...) 
```

样本 2：

```
//[Test]
public Type methodName(parametes ...) 
```

样品 3：

```
[Test (, some names etc)]
public Type methodName(parametes ...) 
```

样品 4：

```
[Test (, some names etc)]
[Other optional attributes]
public Type methodName(parametes ...) 
```

预期结果：**方法名**

我尝试了几个建议，例如[Regex Match all characters between two strings](https://stackoverflow.com/questions/6109882/regex-match-all-characters-between-two-strings)。但是，并不成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:33:23.797

对所有正则表达式的东西并不那么花哨，但它适用于示例案例......

```
var lines = File.ReadAllLines(@"c:\temp\samples.txt");

var matched = false;
foreach (var line in lines)
{
    if(matched)
    {
        var match = Regex.Match(line, @"public");
        if(match.Length > 0)
        {
            matched = false;
            match = Regex.Match(line, @"[a-zA-Z_]+( )?(?=\()"); 
            Console.WriteLine (match.Value);
        }
    }
    else
    {
        matched = Regex.IsMatch(line, @"\[.*Test.*\]");
    }
} 
```

或者您可以使用 unit runner 运行所有文件，它会列出所有测试的名称......

# jsf-2 - 在 JSF 组件中使用自定义属性时，Netbeans 7.3 突出显示 xhtml 错误

> ID：16036551
> 
> 赞同：4
> 
> 时间：2013-04-16T12:03:36.447
> 
> 标签：jsf-2, netbeans-7, highlighting

我们正在 JSF 中运行一个现有项目。我们还为不属于标签库的组件添加了一些属性。例如，我们`placeholder`为组件添加了属性`h:inputText`。现在，当我们在 xhtml 页面上使用该属性时，NetBeans 7.3 在 IDE 中突出显示该页面是错误的，这可能会使我们在开发过程中感到困惑，因为假设编辑器突出显示了这种奇怪的情况，我们可能会跳过页面中的真正错误。

这在我们使用 7.2 版时没有发生，有没有办法为 NetBeans 7.3 定义此自定义属性，以便在我们使用自定义属性时不会突出显示此错误。

其他人已经在 NetBeans 论坛上问过这个问题，但仍然没有得到任何答案： [http ://forums.netbeans.org/ntopic54141.html](http://forums.netbeans.org/ntopic54141.html)

希望SO可以帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T09:24:55.363

```
 <html xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
 <h:form>
<h:inputText p:type="password" p:class="input-lg form-control" p:name="password1" p:placeholder="Password" />
</h:form> 
```

试试用这种方式解决。

# ember.js - Ember 中的自定义服务

> ID：16036559
> 
> 赞同：0
> 
> 时间：2013-04-16T12:03:47.907
> 
> 标签：ember.js

我希望在我的 ember js 应用程序中进行一些投票。

我目前在 init 方法中的 ApplicationController 中有一些代码。

我觉得确实应该将代码移到某个服务对象中，但是如果我这样做，我将失去所有我得到的钩子，因为我不再在 ApplicationController 中。

包含此类代码的最佳做法是什么？

我是否应该创建一个处理它的 ember 对象，它具有对 ApplicationController 的引用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:33:27.513

> 我觉得确实应该将代码移到某个服务对象中，但如果我这样做，我将失去所有我得到的钩子，因为我不再在 ApplicationController 中。包含此类代码的最佳做法是什么？

你的权利，通常最好的做法是将这种类型的代码移动到服务对象中。

> 我是否应该创建一个处理它的 ember 对象，它具有对 ApplicationController 的引用？

这是一个可靠的方法，将是一个很好的第一步。您可能会考虑使用 Beyone`Ember.Instrumentation`将轮询机制与应用程序分离。

[如何从另一个框架向 Ember 触发事件](https://stackoverflow.com/questions/14458287/how-to-fire-an-event-to-ember-from-another-framework)

# java - 将单独的 JPanel/JInternalFrame 加载到单独的 JDesktopPane（在 JFrame 中）

> ID：16036562
> 
> 赞同：1
> 
> 时间：2013-04-16T12:03:52.330
> 
> 标签：java, swing, jframe, netbeans-7

假设我有一个`NewMDIApplication extends javax.swing.JFrame`包含 a`JDesktopPane`和 a的类`JButton`。还假设我有另一个类`NewJInternalFrame extends javax.swing.JInternalFrame`，或者 `NewJPanel extends javax.swing.JPanel`它再次包含一些“按钮”和“文本框”来执行一些操作。

`NewJInternalFrame`我的意图是`NewJPanel`在单击. 有可能做到吗？如果是，该怎么做？`JDesktopPane``NewMDIApplication``JButton`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:02:49.117

这是一个将`JInternalFrame`实例添加到`JDesktopPane`. 请注意，您需要设置**大小**，否则它们不会出现。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class FrameWithInternalFrames {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

        @Override
        public void run() {
            // the GUI as seen by the user (without frame)
            JPanel gui = new JPanel(new BorderLayout());
            gui.setBorder(new EmptyBorder(2, 3, 2, 3));

            gui.setPreferredSize(new Dimension(400, 100));
            gui.setBackground(Color.WHITE);

            final JDesktopPane dtp = new JDesktopPane();
            gui.add(dtp, BorderLayout.CENTER);

            JButton newFrame = new JButton("Add Frame");

            ActionListener listener = new ActionListener() {
            private int disp = 10;
            @Override
            public void actionPerformed(ActionEvent e) {
                JInternalFrame jif = new JInternalFrame();
                dtp.add(jif);
                jif.setLocation(disp, disp);
                jif.setSize(100,100); // VERY important!
                disp += 10;
                jif.setVisible(true);
            }
            };
            newFrame.addActionListener(listener);

            gui.add(newFrame, BorderLayout.PAGE_START);

            JFrame f = new JFrame("Demo");
            f.add(gui);
            // Ensures JVM closes after frame(s) closed and
            // all non-daemon threads are finished
            f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
            // See http://stackoverflow.com/a/7143398/418556 for demo.
            f.setLocationByPlatform(true);

            // ensures the frame is the minimum size it needs to be
            // in order display the components within it
            f.pack();
            // should be done last, to avoid flickering, moving,
            // resizing artifacts.
            f.setVisible(true);
        }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

# apache-flex - Flex：- 从中心旋转后如何将图像放入容器盒中（根据容器盒缩放或调整大小）

> ID：16036564
> 
> 赞同：1
> 
> 时间：2013-04-16T12:03:57.827
> 
> 标签：apache-flex, rotation, scaling

我正在开发一个弹性应用程序。

在其中我有一个从其容器框中的中心旋转图像。

图像上附加了另一个容器框（命名工具），其中包含角落处的一些按钮。目前我正在旋转这些工具箱，并且它与图像一起成功旋转，我正在使用以下代码进行旋转：-

```
var imgMatrix:Matrix = imgOwner.transform.matrix; 
            var centerX:Number = imgOwner.width / 2; 
            var centerY:Number = imgOwner.height / 2; 
            var centerPoint:Point = new Point(centerX, centerY); 
            var transformPoint:Point= imgMatrix.transformPoint(centerPoint); 

            imgMatrix.translate(-transformPoint.x, -transformPoint.y);                      
            imgMatrix.rotate(newRotationInDegrees * Math.PI / 180);
            imgMatrix.translate(+transformPoint.x, +transformPoint.y);
            imgOwner.transform.matrix = imgMatrix; 
```

图像出现在这些 imgOwner 工具中。

我只想在主容器中旋转后将这些工具与图像配合使用。

请指教，先谢谢了。

# java - 在 Java 中处理“java.lang.NoClassDefFoundError”

> ID：16036569
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:04:06.877
> 
> 标签：java, noclassdeffounderror

我正在尝试通过我的 java 代码执行文件附件操作。但它在我的控制台输出中返回“java.lang.NoClassDefFoundError”。你能帮我解决这个问题吗？休息我的代码没有任何问题。

以下是我的代码：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.InputStreamReader;
import java.nio.charset.Charset;

import org.apache.http.HttpEntity;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;

import org.apache.http.entity.mime.HttpMultipartMode;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.HTTP;

    public static void main(String[] args) throws Exception {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://watsonexp-stg.corp.adobe.com/watson/api/bug/addAttachmentAPI.jsp");

            //to make a multipart POST request
             MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, null, Charset.forName(HTTP.UTF_8));
             multipartEntity.addPart("appGUID", new StringBody("e2513b90-f327-4cc0-8c07-2d79a1b6eddd"));
             multipartEntity.addPart("userId", new StringBody("karansha"));
             multipartEntity.addPart("password", new StringBody("RGVsbCUxMDA="));
             multipartEntity.addPart("bugId", new StringBody("3402114"));

             multipartEntity.addPart("fileDescription", new StringBody("trying to attach a file"));
             multipartEntity.addPart("external", new StringBody("false"));
             multipartEntity.addPart("Filedata", new FileBody(new File("C:/Users/karansha/Desktop/test.jpg")));

             httpPost.setEntity(multipartEntity);

             HttpResponse res= httpClient.execute(httpPost);

            //following lines will print out the respose from the server on attempting to upload a file.

             HttpEntity httpEntity = res.getEntity();
             BufferedReader br = new BufferedReader(new InputStreamReader(httpEntity.getContent()));
             String  line = "";
             while ((line = br.readLine()) != null){
                 System.out.println(line);
             }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:19:37.753

这意味着您在编译时拥有的某些类在运行时以某种方式丢失。在编译期间记下您的类路径并将其与您的运行时环境进行比较。这应该可以帮助您找到丢失的课程。

# html - 两色导航栏

> ID：16036570
> 
> 赞同：-2
> 
> 时间：2013-04-16T12:04:08.593
> 
> 标签：html, css, nav

我想做一个像这张图片一样的导航栏。

![该栏有两个彩色 div](https://i.stack.imgur.com/Ynr66.png) 该栏有两个彩色 div。但是这个 div 的内容必须在一个包装器中，就像页面的其他内容一样，但我不知道该怎么做。导航栏必须固定，但我认为它现在不重要。

编辑： http: [//jsfiddle.net/2NA8V/](http://jsfiddle.net/2NA8V/) 我的工作代码：

```
<nav>
    <div id="headerLogo">
        <h1>
            <a href="index.php">
                <img src="..." class="headerImage">
            </a>
        </h1>
        <ul>
             <li class="mainMenuPoint">Szurkolói Klub</li>
             <li class="mainMenuPoint">Tagoknak</li>
             <li class="mainMenuPoint">Meccsnaptár</li>
             <li class="mainMenuPoint">Történelem</li>   
             <li class="login">
                <a href="admin/admin.php" class="adminlink">Admin terület</a>
                <p>Helló <a href="profile.php" class="profileLink">Bergkamp</a>!</p>
                <input type="button" name="logout" value="Kilépés" onclick="location.href='logout.php'" class="logout button">
             </li>              
        </ul>
    </div>
</nav> 
```

风格：

```
nav {
    width:  100%;
    margin: 0 0 0 0;
    background: #d90000;
    background: -moz-linear-gradient(left,  #d90000 0%, #b20000 50%, #eee 60%);
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#d90000), color-stop(50%,#b20000), color-stop(60%,#EEE));
    background: -webkit-linear-gradient(left,  #d90000 0%,#b20000 30%, #eee 60%);
    background: -o-linear-gradient(left,  #d90000 0%,#b20000 30%, #eee 60%);
    background: -ms-linear-gradient(left,  #d90000 0%,#b20000 30%, #eee 60%);
    background: linear-gradient(to right,  #d90000 0%,#b20000 30%, #eee 60%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d90000', endColorstr='#b20000',GradientType=1 );

}
#headerLogo {
    width: 950px;
    height: 42px;
    text-align:left;
    margin: 0 auto;

}
#headerLogo h1 {
    float: left;
}
#headerLogo h1 a{
    padding-left: 30px;
}
.headerImage {
    padding-top: 5px;
    padding-left: 5px;
}
nav ul {
    height: 42px;
    float: right;
    margin: 0 auto 0 0; 
    background-color: #EEE;
    width: 757px;
}
nav ul li {
    float: left;
    margin: 0px 10px;
    position: relative;
    height: 32px;
    padding-top: 12px;
}
.mainMenuPoint {
    color: #cb0000; 
    font-family: 'BebasNeueRegular';
    font-size: 120%;
    cursor: pointer;
    position: relative; 
}
nav ul .login {
    padding-top: 5px !important;
    position: relative; 
}
nav ul .login a, nav ul .login input, nav ul .login p {
    float: left;
    font-size: 80%;
}
nav ul .login a {
    font-size: 110%;
    padding-top: 7px;
}
nav ul .login p {
    font-family: 'BebasNeueRegular';
    padding-top: 8px;
    margin: 0 15px 0 30px;
    font-size: 100%;
    color: #CB0000;
}
.profileLink {
    float: none !important; 
    font-family: 'BebasNeueRegular' !important;
    padding-top: 8px !important;
    margin: 0 3px 0 3px !important;
    font-size: 100% !important;
    color: #CB0000 !important;
}
nav ul .login .loginForm {
    padding-top: 0px;   
}
nav ul li:first-child {
    margin-left: 20px;  
}
nav ul li a {
    font-family: 'BebasNeueRegular';
    text-transform:uppercase;
    color: #CB0000;
    font-size: 110%;
}
.logout {
    width: 60px;    
} 
```

它工作得很好，但我不喜欢这个解决方案。我认为这可能会容易得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:33:43.057

如果你需要一个容器有两种颜色，我建议你使用 CSS 渐变：

```
background:linear-gradient(90deg, green 50%, grey 50%) 
```

这是演示：http: [//jsfiddle.net/YWKTR/](http://jsfiddle.net/YWKTR/)

只需确保使用浏览器前缀在每个现代浏览器中运行即可。

# xcode - codesign 总是通过终端给出没有发现身份的错误

> ID：16036571
> 
> 赞同：43
> 
> 时间：2013-04-16T12:04:08.767
> 
> 标签：xcode, terminal, code-signing

我已经查看了已经存在的问题，但没有一个问题能够解决我的问题（比如重新创建证书）。我已经构建了一个应用程序，在该应用程序内部我几乎没有可执行文件、文件夹和框架。每当我尝试做`codesign -s "our identity" my.app`总是找不到身份。有人可以给出一个逐步的过程。

```
codesign -s "Developer ID Application: Sai***** (123123123J)" out/Release/Sai.app 
```

错误

> 开发者ID申请：Sai******（123123123J）：未找到身份，

我尝试删除“开发者 ID 应用程序”和序列号，但一切都给出了相同的错误

[在这些方面](https://stackoverflow.com/questions/7453511/app-for-mac-app-store-doesnt-run-when-signed)寻求帮助

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-16T13:14:50.350

我也遇到了一些麻烦。仔细检查您的代码签名身份是否在您的钥匙串中，您可能会考虑使用 SHA-1 指纹而不是 -s 后面的名称。

您可以通过打开`Keychain Access`并选择您的`Developer ID Application: FOO`证书，然后选择**Get Info**来找到 SHA-1 指纹。从这里，滚动到信息的底部，直到到达**Fingerprints**。可以复制此处的 SHA-1 指纹，您必须删除所有空格，但之后您将拥有一个 40 个字符的标识符，该标识符适合放置`-s`在您的协同设计语句中。

如果您仍然无法找到密钥，请从终端尝试以下操作：

```
certtool y | grep Developer\ ID 
```

`Developer ID Application`并在 中查找任何内容`Common Name`以验证证书实际上是否位于可从终端访问的钥匙串中。如果您没有看到任何响应，则表明包含您的凭据的钥匙串对您的`Terminal`会话不可用。造成这种情况的原因包括钥匙串被锁定、shell 以另一个用户身份运行、以不同的权限执行命令（例如`sudo`）。

执行上述命令后，您至少应该拥有以下内容：

```
Developer ID Application: <your company name>
Developer ID Installer: <your company name>
Developer ID Certification Authority 
```

如果你没有这三个，你应该去下载缺少的元素。尽管您目前可能*不需要*构建安装程序，但拥有它并没有什么坏处。应用程序和安装程序元素可以从[Apple 开发人员网站上的](http://developer.apple.com)**证书、标识符和配置文件**选项卡的**Mac 证书**部分下载。您应该有未过期的列表。您可能也有已过期的列表。要在钥匙串中安装证书：

 **1.  访问**Apple 开发者网站**
2.  访问**Mac 开发中心**
3.  访问**证书、标识符和配置文件链接**
4.  从门户下载证书
5.  双击证书和钥匙串访问应该打开
6.  允许 Keychain Access 将证书添加到您的 Keychain

*Developer ID 证书颁发机构*应该已经由 Xcode 安装，但如果不是，您可以自己安装。您需要从[Developer ID Authority](https://developer.apple.com/certificationauthority/DeveloperIDCA.cer)单独下载，或单击 **证书选项卡中的****+**链接并使用底部的链接下载证书。

 **这也是确保您拥有*Apple Worldwide Developer Relations Certification Authority*的好时机，这是一些签名工具的基础。它应该通过 Xcode 安装程序安装在您的**系统**钥匙串中，并且可以直接从上面**证书选项卡中的****+**链接或从[Apple WWDR CA](https://developer.apple.com/certificationauthority/AppleWWDRCA.cer)下载。

 **根据 Apple 的[App Distribution Guide](https://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/AppDistributionGuide/Introduction/Introduction.html)，有适用于每个证书和密钥的特定钥匙串：

*   您的私钥和签名证书（*Developer ID Installer*、*Developer ID Application*和 App Store Certificates）应该在您的**登录**钥匙串中
*   *Apple Worldwide Developer Relations 证书颁发机构*和Developer *ID 证书颁发机构*属于**系统**钥匙串
*   您的开发者证书也属于您的**登录**钥匙串

## 钥匙扣维护

因为 Xcode 会自动操作钥匙串，并且因为某些证书会在配置文件更改时定期重新颁发（尽管不是针对 Developer ID，因为它具有多年证书并且不需要配置文件），您最终可能会传播不必要的并且可能会混淆您钥匙串中的证书。当它们过期时清除它们是个好主意，因为它们会给 Xcode 带来一些混乱。

**警告**

*   在对钥匙串进行任何维护之前，请确保您已备份钥匙串
*   此过程旨在删除与开发相关的不必要证书，如果证书不以*Mac Developer*、*3rd Party Mac Developer*、*iPhone Developer*或*Developer ID*开头，此时不要乱用它们。如果您不小心删除了您通过电子邮件收到的证书（例如），*即使它已过期*，您也可能无法阅读您收到的电子邮件。

要做的事情：

1.  退出 Xcode
2.  运行 Keychain First Aid（来自**Keychain Access**）并验证您的钥匙串是否正常
3.  单击左侧边栏上的**证书类别**
4.  找到上述类型的任何过期的开发人员证书。它们将在右下角显示一个小*X。*
5.  **选择您将要删除的证书并使用File > Export Items...**备份它们
***   把这个文件放在一个安全的地方，并给它一个好的密码*   删除您已备份的证书*   查看您剩余的证书并验证您是否拥有上一节中提到的证书。如果不这样做，则需要下载并可能续订它们。*   验证证书是否在上面指定的钥匙串中（例如，您的所有签名证书都应该在您的**登录**钥匙串中）**

 *** * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-09-03T15:34:00.163

虽然我没有为苹果开发代码签名这样做，但我仍然认为我有一些有价值的东西可以帮助你调试这样的问题。不同之处在于我创建了自己的证书，而您从苹果获得了证书。

检查证书的信任度，它必须受信任才能进行代码签名（在钥匙串访问中证书视图信任部分的倒数第三个 yosemite 上）。请注意，对于您的代码签名证书应该在登录钥匙串中，我需要它在系统钥匙串中。

起初，证书对钥匙串的代码签名并不为人所知，因为缺少扩展目的“代码签名”，如果您查看钥匙串并双击证书，您可以找到它：

[![在此处输入图像描述](https://i.stack.imgur.com/xA8Zr.png)](https://i.stack.imgur.com/xA8Zr.png)

我解决了这个问题（您无法修复它，因为 Apple 向您提供了证书。扩展程序应该就在那里）：

[![在此处输入图像描述](https://i.stack.imgur.com/4Ulnq.png)](https://i.stack.imgur.com/4Ulnq.png)

然后，在将证书从钥匙串拖放到我的桌面后，我将证书添加到受信任的签名证书中，这创建了 ~/Desktop/gdb-cert.cer（请注意，您可以省略 -d 和 -r trustRoot：

```
$ sudo security add-trusted-cert -d -r trustRoot -p codeSign -k /Library/Keychains/System.keychain ~/Desktop/gdb-cert.cer 
```

这有点棘手，因为我被一些互联网帖子误导并且没有查看手册页。有人说你应该使用 add-trust ( [https://llvm.org/svn/llvm-project/lldb/trunk/docs/code-signing.txt](https://llvm.org/svn/llvm-project/lldb/trunk/docs/code-signing.txt) )。可怕的是命令成功了，但没有做它应该做的事情。

之后，我在受信任的证书中找到了新证书，如下所示：

```
$ security find-identity -p codesigning

Policy: Code Signing
  Matching identities
      1) E7419032D4..... "Mac Developer: FirstName LastName (K2Q869SWUE)"    (CSSMERR_TP_CERT_EXPIRED)
      2) ACD43B6... "gdb-cert"
  2 identities found

  Valid identities only
      1) ACD43... "gdb-cert"
  1 valid identities found 
```

在我的情况下，苹果证书已过期，但我用来签署 gdb 的证书没有过期（好吧，我只是自己创建的）。另请注意，“security add-trusted-cert”（-p codeSign）和“security find-identity”命令（-p codesigning）的策略名称不同。然后我继续签署 gdb，我也总是得到：

```
$ codesign --sign gdb-cert.cer --keychain ~/Library/Keychains/login.keychain `which gdb`
  gdb-cert.cer: no identity found 
```

因为我的印象是我必须将证书文件的文件名提供给 --sign 选项，但实际上这是我应该提供的证书的 CN，并且应该在信任库中。双击钥匙串中的证书时，您可以在此处找到 CN：

[![在此处输入图像描述](https://i.stack.imgur.com/Ib6hc.png)](https://i.stack.imgur.com/Ib6hc.png)

或在“security find-identity -p codesigning”的上述输出中。然后我继续签名，我必须给它正确的钥匙链。在您的情况下，这必须是 ~/Library/Keychains/login.keychain，在我的情况下是 System.keychain：

```
 codesign -s gdb-cert --keychain /Library/Keychains/System.keychain `which gdb` 
```

然后给了我一个工作的 gdb，它应该给你一个签名的应用程序。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-21T13:56:56.227

答案最后很简单。我的私钥丢失了。为此，我撤销了证书并按照开发人员程序中的步骤进行操作（特别是在此过程中创建 CSR 证书，我没有多次获得，除非我撤销了证书）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-29T15:07:17.470

甚至

`certtool y | grep "Developer ID Application: xxxx"`

无法显示任何结果，我猜这是访问所需钥匙串的问题。所以首先我验证，私钥可以被钥匙串本身中的任何应用程序访问，然后我开始使用`k=/Users/myUser/Library/Keychains/login.keychain`certtool 命令中的选项，因为这成功了，我做了同样的事情

`codesign --keychain /Users/myUser/Library/Keychains/login.keychain --force --verbose -s "Developer ID Application: xxxx"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-14T14:19:04.727

甚至

```
certtool y | grep "Developer ID Application: xxxx" 
```

无法显示任何结果，我猜这是访问所需钥匙串的问题。所以首先我验证，私钥可以被钥匙串本身中的任何应用程序访问，然后我开始使用`k=/Users/myUser/Library/Keychains/login.keychain`certtool 命令中的选项，因为这成功了，我做了同样的事情

```
codesign --keychain /Users/myUser/Library/Keychains/login.keychain --force --verbose -s "Developer ID Application: xxxx 
```********

# android - 如何在 Fragment 之间传递值

> ID：16036572
> 
> 赞同：129
> 
> 时间：2013-04-16T12:04:10.667
> 
> 标签：android, android-fragments

我只是想构建一个使用片段的简单示例应用程序。我的情况是，我有两个活动，每个活动中有一个片段。第一个片段有一个编辑文本和一个按钮。第二个片段有一个文本视图。当我在编辑文本中输入名称并单击按钮时，第二个片段中的文本视图应显示在第一个片段的编辑文本中输入的名称。

我能够将值从第一个片段发送到其活动，然后从该活动发送到第二个活动。现在我如何在第二个片段中使用这个值？

这是Java代码：

```
package com.example.fragmentexample;

import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Fragment_1 extends Fragment{

    OnFragmentChangedListener mCallback;

    // Container Activity must implement this interface
    public interface OnFragmentChangedListener {
        public void onButtonClicked(String name);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception
        try {
            mCallback = (OnFragmentChangedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement OnHeadlineSelectedListener");
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        View view = inflater.inflate(R.layout.fragment_fragment_1, container, false);

        final EditText edtxtPersonName_Fragment = (EditText) view.findViewById(R.id.edtxtPersonName);
        Button btnSayHi_Fragment = (Button) view.findViewById(R.id.btnSayHi);

        btnSayHi_Fragment.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                String name = edtxtPersonName_Fragment.getText().toString();

                FragmentManager fm = getFragmentManager();
                Fragment_2 f2 = (Fragment_2) fm.findFragmentById(R.id.fragment_content_2);

                Activity activity = getActivity();

                if(activity != null)
                {
                    Toast.makeText(activity, "Say&ing Hi in Progress...", Toast.LENGTH_LONG).show();
                }

                if(f2 != null && f2.isInLayout())
                {
                    f2.setName(name);
                }
                else
                {
                    mCallback.onButtonClicked(name);
                }
            }
        });

        return view;

    }

} 
```

### 文件*MainActivity.Java*

```
package com.example.fragmentexample;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;

import android.view.Choreographer.FrameCallback;
import android.view.Menu;

public class MainActivity extends Activity implements Fragment_1.OnFragmentChangedListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onButtonClicked(String name) {
        // TODO Auto-generated method stub

        Intent i = new Intent(this, SecondActivity.class);
        i.putExtra("", name);
        startActivity(i);
    }

} 
```

### 文件*SecondActivity.Java*

```
package com.example.fragmentexample;

import android.app.Activity;
import android.os.Bundle;

public class SecondActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_second);

        Bundle b = getIntent().getExtras();

        Fragment_2 f2 = new Fragment_2();
        f2.setArguments(b);
    }
} 
```

片段_2.Java

```
package com.example.fragmentexample;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class Fragment_2 extends Fragment{

    View view;
    TextView txtName;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        view = inflater.inflate(R.layout.fragment_fragment_2, container, false);

            // Exception at this line
        String name = getArguments().getString("message");
        txtName = (TextView) view.findViewById(R.id.txtViewResult);
        txtName.setText(name);

        return view;
    }

    @Override
    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);
    }

    public void setName(String name)
    {
        txtName.setText("Hi " + name);
    }

} 
```

我得到以下异常：

```
04-16 18:10:24.573: E/AndroidRuntime(713): FATAL EXCEPTION: main
04-16 18:10:24.573: E/AndroidRuntime(713): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragmentexample/com.example.fragmentexample.SecondActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.os.Looper.loop(Looper.java:132)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.ActivityThread.main(ActivityThread.java:4123)
04-16 18:10:24.573: E/AndroidRuntime(713):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 18:10:24.573: E/AndroidRuntime(713):  at java.lang.reflect.Method.invoke(Method.java:491)
04-16 18:10:24.573: E/AndroidRuntime(713):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-16 18:10:24.573: E/AndroidRuntime(713):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-16 18:10:24.573: E/AndroidRuntime(713):  at dalvik.system.NativeStart.main(Native Method)
04-16 18:10:24.573: E/AndroidRuntime(713): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:688)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
04-16 18:10:24.573: E/AndroidRuntime(713):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.Activity.setContentView(Activity.java:1786)
04-16 18:10:24.573: E/AndroidRuntime(713):  at com.example.fragmentexample.SecondActivity.onCreate(SecondActivity.java:13)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.Activity.performCreate(Activity.java:4397)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
04-16 18:10:24.573: E/AndroidRuntime(713):  ... 11 more
04-16 18:10:24.573: E/AndroidRuntime(713): Caused by: java.lang.NullPointerException
04-16 18:10:24.573: E/AndroidRuntime(713):  at com.example.fragmentexample.Fragment_2.onCreateView(Fragment_2.java:24)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:754)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:956)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1035)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.app.Activity.onCreateView(Activity.java:4177)
04-16 18:10:24.573: E/AndroidRuntime(713):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:664)
04-16 18:10:24.573: E/AndroidRuntime(713):  ... 21 more 
```

如何从 SecondActivity.java 中的包中获取值到*Fragment_2.Java*文件？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-04-16T12:09:26.983

**第 1 步**：将数据从片段发送到活动

```
Intent intent = new Intent(getActivity().getBaseContext(),
                           TargetActivity.class);
intent.putExtra("message", message);
getActivity().startActivity(intent); 
```

**第 2 步**：要在活动中接收此数据：

```
Intent intent = getIntent();
String message = intent.getStringExtra("message"); 
```

**第 3 步**：要将数据从一个活动发送到另一个活动，请遵循正常方法

```
Intent intent = new Intent(MainActivity.this,
                           TargetActivity.class);
intent.putExtra("message", message);
startActivity(intent); 
```

**第 4 步**：在活动中接收此数据

```
 Intent intent = getIntent();
  String message = intent.getStringExtra("message"); 
```

**第 5 步**：您可以从 Activity 将数据发送到 Fragment，其意图如下：

```
Bundle bundle = new Bundle();
bundle.putString("message", "From Activity");

// Set Fragmentclass Arguments
Fragmentclass fragobj = new Fragmentclass();
fragobj.setArguments(bundle); 
```

并在 Fragment onCreateView 方法中接收一个片段：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
Bundle savedInstanceState) {
    String strtext = getArguments().getString("message");

    return inflater.inflate(R.layout.fragment, container, false);
} 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2016-12-03T14:48:37.307

// 在 Fragment_1.java 中

```
Bundle bundle = new Bundle();
bundle.putString("key","abc"); // Put anything what you want

Fragment_2 fragment2 = new Fragment_2();
fragment2.setArguments(bundle);

getFragmentManager()
      .beginTransaction()
      .replace(R.id.content, fragment2)
      .commit(); 
```

// 在 Fragment_2.java 中

```
Bundle bundle = this.getArguments();

if(bundle != null){
     // handle your code here.
} 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-12-23T18:26:13.080

如开发者网站所述

> 通常，您会希望一个 Fragment 与另一个 Fragment 进行通信，例如根据用户事件更改内容。所有 Fragment 到 Fragment 的通信都是通过关联的 Activity 完成的。两个 Fragment 永远不应该直接通信。

Fragment之间的通信应该通过关联的Activity来完成。

让我们有以下组件：

> **活动**托管片段并允许片段通信
> 
> **片段**将发送数据的第一个片段
> 
> **FragmentB**第二个 Fragment 将从**FragmentA接收数据**

FragmentA 的实现是：

```
public class FragmentA extends Fragment 
{
    DataPassListener mCallback;

    public interface DataPassListener{
        public void passData(String data);
    }

    @Override
    public void onAttach(Context context) 
    {
        super.onAttach(context);
        // This makes sure that the host activity has implemented the callback interface
        // If not, it throws an exception
        try 
        {
            mCallback = (OnImageClickListener) context;
        }
        catch (ClassCastException e) 
        {
            throw new ClassCastException(context.toString()+ " must implement OnImageClickListener");
        }
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) 
    {
        // Suppose that when a button clicked second FragmentB will be inflated
        // some data on FragmentA will pass FragmentB
        // Button passDataButton = (Button).........

        passDataButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (view.getId() == R.id.passDataButton) {
                    mCallback.passData("Text to pass FragmentB");
                }
            }
        });
    }
} 
```

MainActivity 的实现是：

```
public class MainActivity extends ActionBarActivity implements DataPassListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (findViewById(R.id.container) != null) {
            if (savedInstanceState != null) {
                return;
            }
            getFragmentManager().beginTransaction()
                    .add(R.id.container, new FragmentA()).commit();
        }
    }

    @Override
    public void passData(String data) {
        FragmentB fragmentB = new FragmentB ();
        Bundle args = new Bundle();
        args.putString(FragmentB.DATA_RECEIVE, data);
        fragmentB .setArguments(args);
        getFragmentManager().beginTransaction()
            .replace(R.id.container, fragmentB )
            .commit();
    }
} 
```

FragmentB 的实现是：

```
public class FragmentB extends Fragment{
    final static String DATA_RECEIVE = "data_receive";
    TextView showReceivedData;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_B, container, false);
        showReceivedData = (TextView) view.findViewById(R.id.showReceivedData);
    }

    @Override
    public void onStart() {
        super.onStart();
        Bundle args = getArguments();
        if (args != null) {
            showReceivedData.setText(args.getString(DATA_RECEIVE));
        }
    }
} 
```

我希望这个能帮上忙..

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-16T12:10:03.987

来自[开发者网站](http://developer.android.com/training/basics/fragments/communicating.html)：

> 通常，您会希望一个 Fragment 与另一个 Fragment 进行通信，例如根据用户事件更改内容。所有 Fragment 到 Fragment 的通信都是通过关联的 Activity 完成的。两个 Fragment 永远不应该直接通信。

您可以借助其 Activity 在 Fragment 之间进行通信。[您可以使用这种方法](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)在活动和片段之间进行通信。

也请检查[此链接](http://manishkpr.webheavens.com/android-passing-data-between-fragments/)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-08-19T04:02:49.307

最新的 Fragment 之间传递数据的解决方案可以通过使用 ViewModel 和 LiveData 等 Android 架构组件来实现。使用此解决方案，您无需为通信定义接口，并且可以获得使用视图模型的优势，例如由于配置更改而导致的数据生存。

在这个解决方案中，通信中涉及的片段共享同一个视图模型对象，该对象与它们的活动生命周期相关联。视图模型对象包含 livedata 对象。一个片段设置要在 livedata 对象上传递的数据，第二个片段观察者 livedata 更改并接收数据。

这是完整的示例：*[使用 ViewModel 在 Android 片段之间传递数据](http://www.zoftino.com/passing-data-between-android-fragments-using-viewmodel)*

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-03-14T02:46:21.167

首先，所有答案都是正确的。您可以通过使用传递自定义对象以外的数据`Intent`。

如果要传递自定义对象，则必须实现`Serialazable`或`Parcelable`传递给您的自定义对象类。我还以为太复杂了。。。

因此，如果您的项目很简单，请尝试使用`DataCache`. 这为传递数据提供了一种超级简单的方法。 ***参考：*** [GitHub 项目 CachePot](https://github.com/kimkevin/AndroidDataCache)

**1-**将此设置为将发送数据的视图或活动或片段

```
DataCache.getInstance().push(obj); 
```

**2-**在任何地方获取数据，如下所示

```
public class MainFragment extends Fragment
{
    private YourObject obj;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        obj = DataCache.getInstance().pop(YourObject.class);

    } //end onCreate()
} //end class MainFragment 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-08-27T09:01:46.187

特别是现在 Android 团队更倾向于坚持单一的活动模型，片段之间的通信变得更加重要。LiveData 和 Interfaces 是解决这个问题的完美方法。但现在谷歌终于解决了这个问题，并尝试使用 FragmentManager 带来更简单的解决方案。这是在 Kotlin 中如何完成的。

在接收者片段中，添加一个监听器：

```
setFragmentResultListener(
    "data_request_key",
    lifecycleOwner,
    FragmentResultListener { requestKey: String, bundle: Bundle ->
        // Unpack the bundle and use data
        val frag1Str = bundle.getString("frag1_data_key")

    }) 
```

在发送方片段 (frag1) 中：

```
setFragmentResult(
    "data_request_key",
    bundleOf("frag1_data_key" to value)
) 
```

请记住，此功能仅在 fragment-ktx 版本 1.3.0-alpha04 及更高版本中可用。

学分和进一步阅读：

*[一种在片段之间传递数据的新方法](https://medium.com/better-programming/a-new-way-to-pass-data-between-fragments-a5d32acc34e7)*

*[Android 片段：片段结果](https://proandroiddev.com/android-fragments-fragment-result-805a6b2522ea)*

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-03-15T19:29:37.453

## 科特林方式

使用[官方 ViewModel 文档](https://developer.android.com/topic/libraries/architecture/viewmodel)`SharedViewModel`中提出的

> 一个活动中的两个或多个片段需要相互通信是很常见的。想象一个主从片段的常见情况，您有一个片段，其中用户从列表中选择一个项目，另一个片段显示所选项目的内容。这种情况绝非易事，因为两个片段都需要定义一些接口描述，并且所有者活动必须将两者绑定在一起。此外，两个片段都必须处理另一个片段尚未创建或不可见的情况。
> 
> 这个常见的痛点可以通过使用 ViewModel 对象来解决。这些片段可以使用它们的活动范围共享一个 ViewModel 来处理这种通信

首先实现[fragment-ktx](https://developer.android.com/kotlin/ktx#fragment)以更轻松地实例化您的视图模型

```
dependencies {
    implementation "androidx.fragment:fragment-ktx:1.2.2"
} 
```

然后，您只需将要与其他片段共享的数据放入视图模型中：

```
class SharedViewModel : ViewModel() {
    val selected = MutableLiveData<Item>()

    fun select(item: Item) {
        selected.value = item
    }
} 
```

然后，最后，只需在每个片段中实例化您的 viewModel，并`selected`从您要设置数据的片段中设置值

## 片段 A

```
class MasterFragment : Fragment() {

    private val model: SharedViewModel by activityViewModels()

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        itemSelector.setOnClickListener { item ->
        model.select(item)
      }

    }
} 
```

然后，只需在 Fragment 目的地监听这个值

## 片段 B

```
 class DetailFragment : Fragment() {

        private val model: SharedViewModel by activityViewModels()

        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
            super.onViewCreated(view, savedInstanceState)
            model.selected.observe(viewLifecycleOwner, Observer<Item> { item ->
                // Update the UI
            })
        }
    } 
```

你也可以用相反的方式来做

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-08-31T14:55:22.650

**在片段之间传递参数。** 回答这个问题已经相当晚了，但它可以帮助某人！ **`Fragment_1.java`**

```
Bundle i = new Bundle(); 
            i.putString("name", "Emmanuel");

            Fragment_1 frag = new Fragment_1();
            frag.setArguments(i);
            FragmentManager fragmentManager = getFragmentManager();
            fragmentManager.beginTransaction()
                    .replace(R.id.content_frame
                            , new Fragment_2())
                    .commit(); 
```

然后在你的**`Fragment_2.java`**你可以在你的`onActivityCreated` 例如

```
 Intent intent = getActivity().getIntent();
    if (intent.getExtras() != null) {
        String name =intent.getStringExtra("name");
    } 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-10-22T12:17:29.753

我认为解决这个问题的一个好方法是使用自定义界面。

假设您有两个片段（A 和 B），它们位于同一个活动中，并且您希望将数据从 A 发送到 B。

界面：

```
public interface OnDataSentListener{
    void onDataSent(Object data);
} 
```

活动：

```
 public class MyActivity extends AppCompatActivity{

            private OnDataSentListener onDataSentListener;

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_activity);

                FragmentTransaction trans = getFragmentManager().beginTransaction();

                FragmentA fa = new FragmentA();
                FragmentB fb = new FragmentB();

               fa.setOnDataSentListener(new Listeners.OnDataSentListener() {
                    @Override
                    public void onDataSent(Object data) {
                         if(onDataSentListener != null)  onDataSentListener.onDataSent(data);
                    }
               });

                transaction.add(R.id.frame_a, fa);
                transaction.add(R.id.frame_b, fb);

                transaction.commit();
            }

            public void setOnDataSentListener(OnDataSentListener listener){
                this.onDataSentListener = listener;
            }
        } 
```

片段 A：

```
public class FragmentA extends Fragment{

    private OnDataSentListener onDataSentListener;

    private void sendDataToFragmentB(Object data){
        if(onDataSentListener != null) onDataSentListener.onDataSent(data);
    }

    public void setOnDataSentListener(OnDataSentListener listener){
        this.onDataSentListener = listener;
    }
} 
```

片段 B：

```
public class FragmentB extends Fragment{

    private void initReceiver(){
        ((MyActivity) getActivity()).setOnDataSentListener(new OnDataSentListener() {
            @Override
            public void onDataSent(Object data) {
                // Here you receive the data from fragment A
            }
        });
    }
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-04-16T12:32:28.457

片段之间的通信相当复杂（我发现侦听器的概念很难实现）。

通常使用“事件总线”来抽象这些通信。这是一个为您处理这种通信的第三方库。

'Otto' 经常被用来做这件事，可能值得研究一下：[http ://square.github.io/otto/](http://square.github.io/otto/)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-09-19T10:04:34.060

将数据从 Fragment 传递到另一个 Fragment

*   从第一个片段

    ```
    // Set data to pass
    MyFragment fragment = new MyFragment(); //Your Fragment
    Bundle bundle = new Bundle();
    bundle.putInt("year", 2017)  // Key, value
    fragment.setArguments(bundle); 
    // Pass data to other Fragment
    getFragmentManager()
     .beginTransaction()
     .replace(R.id.content, fragment)
     .commit(); 
    ```

*   在第二个片段上

    ```
    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         Bundle bundle = this.getArguments();
         if (bundle != null) {
             Int receivedYear = bundle.getInt("year", ""); // Key, default value
         } 
    } 
    ```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-06-28T08:53:07.360

这个简单的实现有助于以简单的方式在片段之间传递数据。认为您想将数据从“Frgment1”传递到“Fragment2”

在 Fragment1（设置要发送的数据）

```
 Bundle bundle = new Bundle();
 bundle.putString("key","Jhon Doe"); // set your parameteres

 Fragment2 nextFragment = new Fragment2();
 nextFragment.setArguments(bundle);

 FragmentManager fragmentManager = getActivity().getSupportFragmentManager();
 fragmentManager.beginTransaction().replace(R.id.content_drawer, nextFragment).commit(); 
```

在 Fragment2 onCreateView 方法中（获取参数）

```
String value = this.getArguments().getString("key");//get your parameters
Toast.makeText(getActivity(), value+" ", Toast.LENGTH_LONG).show();//show data in tost 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-09T19:42:09.013

[您可以通过 Arnav Rao](https://stackoverflow.com/questions/16036572/how-to-pass-values-between-fragments/51914356#51914356)清除的**ViewModel**和**Live Data**来实现您的目标。现在我举一个例子来更整洁地清除它。

首先，假设`ViewModel`被命名为`SharedViewModel.java`。

```
public class SharedViewModel extends ViewModel {
    private final MutableLiveData<Item> selected = new MutableLiveData<Item>();

    public void select(Item item) {
        selected.setValue(item);
    }
    public LiveData<Item> getSelected() {
        return selected;
    }
} 
```

那么**源片段**就是`MasterFragment.java`我们要发送数据的地方。

```
public class MasterFragment extends Fragment {
    private SharedViewModel model;

    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        model = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);
        itemSelector.setOnClickListener(item -> {

            // Data is sent

            model.select(item);
        });
    }
} 
```

最后，**目标片段**是`DetailFragment.java`我们想要接收数据的地方。

```
public class DetailFragment extends Fragment {

    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        SharedViewModel model = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);
        model.getSelected().observe(getViewLifecycleOwner(), { item ->

           // Data is received

        });
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-10T13:33:14.447

您可以使用几种方法来实现相同的目的：

1.  一种方法是在您的父活动中实现一个接口，以便 fragment1 可以通过调用这些接口方法将信息传递给其父活动。同样，您可以让 fragment2 实现一个接口，以便父活动可以将数据发送到 fragment2。

2.  另一种更简单的方法是在彼此之间直接调用方法。您可以从 fragment1 使用框架 API 获取其父 Activity，然后通过在父 Activity 中定义您的辅助方法，您可以直接从 Fragment1 调用该方法并将您的信息传递给父 Activity。同样，在父活动中，您可以使用框架 API 来获取对其任何子片段的引用，在您的情况下是片段 2。然后，您可以在 fragment2 中定义自己的帮助方法，以便您可以从父活动中调用相同的方法并将信息传递给 fragment2。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-14T06:07:03.927

在您的*第一个片段*中，输入以下代码：

```
editprofile.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {

        Fragment_editprofile Fragment = new Fragment_editprofile();
            .
            .
            .
        Fragment.getintentdetails(tv_name.getText().toString(),
            tv_mob.getText().toString(), tv_email.getText().toString(), tv_dob.getText().toString(),
            tv_gender.getText().toString(), photointent);

    }
}); 
```

在*第二个片段*中，创建如下方法：

```
public void getintentdetails(String name, String mobile, String email, String dob,
                             String gender, String photointent) {

    this.name_str = name;
    this.mob_str = mobile;
    this.email_str = email;
    this.dob_str = dob;
    this.gender_str = gender;
    this.photo_str = photointent;
} 
```

然后在类级别定义一个变量：

```
String name_str, mob_str, dob_str, photo_str, email_str, gender_str; 
```

然后在第二个片段中创建另一个方法来设置一个值：

```
setexistingdetails();

private void setexistingdetails() {

    if(!name_str.equalsIgnoreCase(""))
        (et_name).setText(name_str);
    if(!mob_str.equalsIgnoreCase(""))
        et_mobile.setText(mob_str);
    if(!email_str.equalsIgnoreCase(""))
        email_et.setText(email_str);
    if(!dob_str.equalsIgnoreCase(""))
        dob_et.setText(dob_str);
    if(!gender_str.equalsIgnoreCase("")) {
        if (gender_str.equalsIgnoreCase("m")){
            male_radio.setChecked(true);
        }
        else {
            female_radio.setChecked(true);
        }
    }
    if(!photo_str.equalsIgnoreCase("")) {
        try {
            Picasso.get().load(Const.BASE_PATH+"include/sub-domain/GENIUS/"+photo_str).into(adminpropic_edit);
        }
        catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-03-29T21:10:22.997

```
Bundle bundle = new Bundle();
bundle.putString("mykey","abc"); 
bundle.putString("mykey2","abc"); // Put anything what you want

Fragment fragment = new Fragment();
fragment2.setArguments(bundle);

getFragmentManager()
  .beginTransaction()
  .replace(R.id.content, fragment2)
  .commit();

Bundle bundle = this.getArguments(); // in your fragment oncreate

if(bundle != null){
  String mykey = bundle.getString("mykey");
  String mykey2 = bundle.getString("mykey2");
  } 
```

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2017-04-27T20:11:20.123

我已经为像我这样的初学者做了一些非常容易的事情。我在我的*activity_main.xml*文件中创建了一个 textview 并放入：

```
id = index
visibility = invisible 
```

然后我从第一个片段中得到这个文本视图：

```
index = (Textview) getActivity().findviewbyid(R.id.index)
index.setText("fill me with the value") 
```

然后在第二个片段中，我得到了值：

```
index = (Textview) getActivity().findviewbyid(R.id.index)
String get_the_value= index.getText().toString(); 
```

# asp.net-mvc - MVC4：创建新记录时模型状态无效

> ID：16036574
> 
> 赞同：0
> 
> 时间：2013-04-16T12:04:12.123
> 
> 标签：asp.net-mvc, asp.net-mvc-4, record, modelstate

我尝试添加一个与大陆有链接的新国家。当我按下“创建”按钮时，它不会添加新记录。我调试了我的项目，我认为这是因为 ValidState 是假的。原因是属性“Continent”为空，但 Continent_Id 不是。当我尝试编辑现有国家/地区时，我遇到了同样的问题。（我在 SQL Management Studio 中使用 SQL 脚本填充了我的数据库）

有人能帮助我吗？

**大陆类：**

```
public class Continent
{
    public int Id { get; set; }
    [Required, MaxLength(25)]
    public string Name { get; set; }

    //Navigation
    public virtual List<Country> Countries { get; set; }
} 
```

**国家级**

```
public class Country
{
    public int Id { get; set; }
    [Required, MaxLength(25)]
    public string Name { get; set; }
    [MaxLength(5)]
    public string Abbreviation { get; set; }

    public int Continent_Id { get; set; }

    //Navigation
    [Required, ForeignKey("Continent_Id")]
    public virtual Continent Continent { get; set; }

} 
```

**控制器类（创建函数）**

```
 //
    // GET: /Countries/Create

    public ActionResult Create()
    {
        ViewBag.Continent_Id = new SelectList(db.Continents, "Id", "Name");
        return View();
    }

    //
    // POST: /Countries/Create

    [HttpPost]
    public ActionResult Create(Country country)
    {
       var errors = ModelState.Values.SelectMany(v => v.Errors); //to check the errors
        if (ModelState.IsValid)
        {
            db.Countries.Add(country);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.Continent_Id = new SelectList(db.Continents, "Id", "Name", country.Continent_Id);
        return View(country); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-08T09:38:44.693

就在**if (ModelState.IsValid)**行之前放置这个 ModelState.Remove("v_id"); 在您的情况下，v_id 是您的主键列名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:55:57.880

我通过关闭 Continent 的必需验证来解决此问题，并将其仅设置为 Continent_Id。现在 ID 属性是必需的，但 Continent 不是。

```
public class Country
{
public int Id { get; set; }
[Required, MaxLength(25)]
public string Name { get; set; }
[MaxLength(5)]
public string Abbreviation { get; set; }

[Required] //added Required
public int Continent_Id { get; set; }

//Navigation
[ForeignKey("Continent_Id")] //removed Required
public virtual Continent Continent { get; set; }

} 
```

感谢您的回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:05:11.513

我不确定，但我相信你的问题是时机。模型验证在绑定期间自动发生；当时，Continent 属性为空。您稍后设置该属性，但在您检查 IsValid 时不会重新评估模型状态。我看到三个选项：

*   快速而肮脏：从 Continent 中取出所需的验证并验证 Continent_Id，在控制器中添加检查以确保从 Find() 检索到有效的 Continent。
*   大多数工作：创建自定义模型绑定器以实际使用 Continent_Id 来检索和填充 Continent。你几乎就在那里，因为同时拥有 Continent_Id 和 Continent 作为 Country 的属性是多余的，并且是不一致的机会。
*   可能是最好的选择：让您的控制器接受一个视图模型，该模型只包含您希望从表单返回的数据并从中填充 Country 对象。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T13:19:03.223

ModelState 无效的原因是因为您已将 Continent 属性标记为必需，但我猜在您的视图中您没有将绑定到 Continent 对象的某些属性的表单字段。

因此，要么不根据需要标记 Continent 对象，要么提供名称为 Continent.Id 或 Continent.Name 的隐藏字段，以便模型绑定器将填充 Continent 属性：

```
@Html.HiddenFor(m => m.Continent.Id) 
```

但这将导致下一个问题：您已根据需要标记了 Continent 类的 Name 属性，因此您也必须为该属性提供一个表单字段。

基本问题是，您尝试将存储库类重用为视图模型类。更好的方法是使用单独的类作为视图模型在控制器和视图之间传递数据：

```
class CountryViewModel {
    public int Id { get; set; }
    [Required, MaxLength(25)]
    public string Name { get; set; }
    [MaxLength(5)]
    public string Abbreviation { get; set; }

    public int Continent_Id { get; set; }
} 
```

要在 Country 和 CountryViewModel 对象之间进行映射，请使用 AutoMapper 之类的映射器。

# c# - ServiceStack：将正文内容发布为 NameValueCollection

> ID：16036575
> 
> 赞同：1
> 
> 时间：2013-04-16T12:04:13.603
> 
> 标签：c#, servicestack

在 ServiceStack 服务或过滤器中，有什么方法可以访问`NameValueCollection`从 URLEncoded POST 内容解析的内容？

虽然我知道它会被适当地解析为 DTO，但有时访问名称值集合中的任意值是很有价值的。

我不介意让 ServiceStack 解析并填充 DTO——我也只想查看原始`NameValueCollection`数据（或等效数据结构，如果 ServiceStack 使用自己的解析机制）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:59:07.417

在 Service 中，您可以使用以下方式访问 POST 数据：

```
var htmlPostVar = base.Request.FormData["postName"]; 
```

有关如何从内部服务访问 HTTP 请求和响应信息的更多信息，请参阅[服务中的访问 HTTP 特定功能。](https://github.com/ServiceStack/ServiceStack/wiki/Access-HTTP-specific-features-in-services)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:52:06.547

基`Service`类使您可以访问 ，并且您可以在其中`Request`找到 POST 内容。`FormData``NameValueCollection`

```
Request.FormData 
```

# c - C语言中的指针和赋值

> ID：16036578
> 
> 赞同：0
> 
> 时间：2013-04-16T12:04:35.917
> 
> 标签：c, pointers

目前我正在研究用 C 语言编写的 CFD 代码。作为初学者，我在理解 C 中的指针时遇到了问题。

这个命令是什么意思？

```
a = &obj->b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:07:34.270

它的意思是“获取obj指向的结构的成员b的地址”，可以这样写：

```
a = & ( (*obj).b ) 
```

或使用结构取消引用运算符：

```
a = & ( obj->b ) 
```

但是由于`->`操作符的优先级高于`&`操作符，所以不需要括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:06:37.137

`a = &obj->b`

这意味着**a**保存了struct **obj**指向 ( *->* )的元素**b**的地址 ( *& )*

# vim - vim 的 emberjs 插件

> ID：16036584
> 
> 赞同：1
> 
> 时间：2013-04-16T12:04:47.177
> 
> 标签：vim, autocomplete, ember.js

我正在尝试使用 VIM 作为我的 emberjs 工作的编辑器。我为 VIM 安装了一些众所周知的插件

1.  vim-snipmate
2.  vim 片段
3.  医生

用于自动完成和源代码浏览。现在，当我在 vim 中编写代码时，它不了解 Ember 的自动完成方法和类。

我尝试为 emberjs 寻找一些片段，但我没有找到任何片段。

如果使用 VIM，任何人都可以帮助告诉他们如何为 emberjs 进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:48:40.913

这些插件都没有提供自动完成功能。

如果文件与您正在编辑的文件位于同一目录中，则Omni 补全 ( `<C-x><C-o>`) 应该默认工作。`ember.js`

# highcharts - Highcharts：漏斗图类型的选择问题

> ID：16036589
> 
> 赞同：1
> 
> 时间：2013-04-16T12:04:55.273
> 
> 标签：highcharts

尝试在漏斗图中进行选择（通过单击漏斗部分）时遇到问题。选择过程中出现JS错误。

非常感谢

[http://jsfiddle.net/JvY4s/1246/](http://jsfiddle.net/JvY4s/1246/)

```
$(function () {

var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'funnel',
        marginRight: 100
    },
    title: {
        text: 'Sales funnel'
    },
    plotArea: {
        shadow: null,
        borderWidth: null,
        backgroundColor: null
    },
    plotOptions: {
        series: {
            allowPointSelect:true,
            dataLabels: {
                enabled: true,
                format: '<b>{point.name}</b> ({point.y:,.0f})',
                color: 'black',
                softConnector: true
            },
            neckWidth: '30%',
            neckHeight: '25%'

            //-- Other available options
            // height: pixels or percent
            // width: pixels or percent
        }
    },
    legend: {
        enabled: false
    },
    series: [{
        name: 'Unique users',
        data: [
            ['Website visits',   15654],
            ['Downloads',       4064],
            ['Requested price list', 1987],
            ['Invoice sent',    976],
            ['Finalized',    846]
        ]
    }]
});

// Add the jQuery UI resizin
var container = $('#container')[0];
$('#resizer').resizable({
    // On resize, set the chart size to that of the 
    // resizer minus padding. If your chart has a lot of data or other
    // content, the redrawing might be slow. In that case, we recommend 
    // that you use the 'stop' event instead of 'resize'.
    resize: function() {
        chart.setSize(
            this.offsetWidth - 20, 
            this.offsetHeight - 20,
            false
        );
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:56:42.633

可能与已知错误有关[https://github.com/highslide-software/highcharts.com/issues/1607](https://github.com/highslide-software/highcharts.com/issues/1607)所以你应该使用主版本

[http://jsfiddle.net/JvY4s/1248/](http://jsfiddle.net/JvY4s/1248/)

```
https://raw.github.com/highslide-software/highcharts.com/master/js/modules/funnel.src.js 
```

# c - sbrk(0) 和 sbrk(size) 都返回相同的地址

> ID：16036595
> 
> 赞同：4
> 
> 时间：2013-04-16T12:05:11.410
> 
> 标签：c

```
#include<unistd.h>
#include<stdio.h>

void *my_malloc(size_t size){
 void *p;
 void *q;
 p = sbrk(0);
 /* If sbrk fails, we return NULL */
 q = sbrk(size);
 if(q == (void *)-1){
  return NULL;
 }
 printf("\n size : %d  p : 0x%x q : 0x%x \n",size,p,q);
 return p;
}
int main(){
 int *p;
 p = my_malloc(5);
 printf("\n p : 0x%x \n",p);
} 
```

brk(2) 将中断放在给定的地址 addr 上，如果成功则返回 0，否则返回 -1。全局 errno 符号表示错误的性质。sbrk(2) 按给定的增量（以字节为单位）移动中断。根据系统实现，它返回前一个或新的中断地址。失败时，它返回 (void *)-1 并设置 errno。在某些系统上 sbrk 接受负值（为了释放一些映射的内存）。由于 sbrk 的规范没有固定其结果的含义，所以我们在移动中断时不会使用返回的值。但是，我们可以使用 sbrk 的一个特殊情况：当增量为 nul 时（即 sbrk(0)），返回值是实际的中断地址（前一个和新的中断地址是相同的）。因此使用 sbrk 来检索堆的开始，即中断的初始位置。

sbrk(0) 和 sbrk(size) 都返回相同的地址，我期待的是 sbrk(size) 应该返回 sbrk(0) 前 5 个字节的地址。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T12:10:32.393

当您使用时，`sbrk(0)`您将获得*当前*的“中断”地址。

当您使用时，`sbrk(size)`您将获得*前一个*“中断”地址，即更改前的地址。

因此，如果您以零大小调用它一次，然后以正大小调用它，那么两者都将返回相同的值。如果在以正大小调用*后*再次以零大小调用它，它将返回*新*地址。

# ivy - ivy：仅解析与版本范围兼容的版本

> ID：16036598
> 
> 赞同：2
> 
> 时间：2013-04-16T12:05:21.293
> 
> 标签：ivy, dependency-management

我有一个正在不断开发的通用组件。许多项目依赖于这个组件。现在，我使用 rev="latest.release" 作为依赖项。但这可能会破坏构建，请考虑发布不兼容的 2.0 组件。我想表达的是：使用最新的版本，即补丁级别。

所以我会写“[1.1,1.2[”而不是“latest.release”，但这也解决了最新的集成版本（如 1.1.9_dev1）。有没有办法结合版本范围和状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T13:56:55.610

Ivy 不支持这样的依赖：

```
<dependency org="org.acme" name="common" rev="[1.1,1.2[" status="release" /> 
```

但它支持额外的属性，因此您可以编写如下内容：

```
<dependency org="org.acme" name="common" rev="[1.1,1.2[" e:mystatus="release" /> 
```

见：[http ://ant.apache.org/ivy/history/latest-milestone/concept.html#extra](http://ant.apache.org/ivy/history/latest-milestone/concept.html#extra)

额外属性的检查是关于相等性的，而 Ivy 状态是一个比较（发布 > 集成）。在您仅关于“发布”的用例中，它应该工作相同。

但是，您需要将 e:mystatus 传播到 Ivy 存储库中的每个模块，这可能会很痛苦，具体取决于您对 Ivy 存储库的控制程度。

# android - Android Toast 多色

> ID：16036604
> 
> 赞同：3
> 
> 时间：2013-04-16T12:05:40.990
> 
> 标签：android, layout, colors, toast

我想要一个多色的吐司。像这样：

[![多色吐司](https://i.stack.imgur.com/uvmvN.png)](https://i.stack.imgur.com/uvmvN.png)

我查看了有关更改 xml 中的布局以创建自定义 Toast 的不同教程，但没有一个解释像这样添加不同的颜色。

我怎样才能做到这一点？

=================================

**回答**

=================================

在您的帮助下，我设计了一个简单的 Method() 来使彩色吐司更容易调用。

资源/布局/toast_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toast_layout_root"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="12dp"
    android:paddingRight="12dp"
    android:paddingBottom="6dp"
    android:paddingTop="6dp"
    android:background="#DAAA"
    >
    <TextView android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
</LinearLayout> 
```

src/PROJECTNAME/FILENAME.java

```
// Color Toast(String1,String2,Color)
// Toastbackground = White
// String1 = Dark Gray
// String2 - **CASE SENSITIVE**
//   = "same" = Dark Gray, or
//   = "purple" = Purple, or
//   = "orange" = Orange

    public void CToast(String t1, String t2, String c) {
        if (c == "same") {
            c = "444444";
        } else if (c == "purple") {
            c = "6600FF";
        } else if (c == "orange") {
            c = "ffcc00";
        }

        LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.toast_layout,
                (ViewGroup) findViewById(R.id.toast_layout_root));
        TextView textCToast = (TextView) layout.findViewById(R.id.text);

        String text2 = "<font color=#444444>" + t1 + "</font> <font color=#" + c + ">" + t2 + "</font";
        textCToast.setText(Html.fromHtml(text2));

        Toast toast = new Toast(this);
        toast.setDuration(Toast.LENGTH_SHORT);
        toast.setView(layout);
        toast.show();
    } 
```

**希望这有帮助！感谢大家**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:08:35.893

在您的自定义布局中放置一个 textView。那里

```
String text = "This is <font color='red'>red</font>. This is <font color='blue'>blue</font>.";
textView.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE); 
```

注意。取自[此处的示例](https://stackoverflow.com/a/6094346/931982)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T12:28:35.343

尝试这样做，我希望这是你真正想要的

```
richTextView = (TextView)findViewById(R.id.rich_text);  

    // this is the text we'll be operating on  
    SpannableString text = new SpannableString("hello how are you");  

    // make "hello" to (characters 0 to 5) red color 
    text.setSpan(new ForegroundColorSpan(Color.RED), 0, 5, 0);  

richTextView.setText(text, BufferType.SPANNABLE); 
```

如果你想让它显示为吐司试试这个而不是 setText 像这样使用它

```
Toast.makeText(context, text, Toast.LENGTH_LONG).show(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/jT042.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T12:09:41.923

我认为你应该祝酒`SpannableText`- 使用它可以让你应用颜色、样式并将笑脸等插入字符串。

所以，这将是我尝试以某种方式解决的第一个想法。

我确信这适用于绘制文本和多色通知。或者，也许您只需要应用可扩展过滤器。看[这里](https://stackoverflow.com/questions/11544732/is-spannable-text-customizable-android)

# android - 如何从 TabHost 内的 Activity 调用 FragmentActivity？

> ID：16036623
> 
> 赞同：0
> 
> 时间：2013-04-16T12:06:25.703
> 
> 标签：android, android-intent, android-activity, android-fragmentactivity

我有一点想法，`Fragment`但没有深入了解。我想通过 Intent`FragmentActivity`从 Simple调用。`Activity`

我的两个文件如下，

*   EventMain.java（扩展活动）
*   EventDetail.java（扩展 FragmentActivity）

`Class`如果两者都扩展，我可以运行它`Activity`。

```
Intent i = new Intent(EventMain.this, EventDetail.class);
TabGroupActivity parentActivity = (TabGroupActivity) EventMain.this.getParent();
i.putExtra("event_id", EventId.get(position));
parentActivity.startChildActivity("Event_Detail", i); 
```

但我想集成谷歌地图，`EventDetail.java`所以我必须扩展`FragmentActivity`。

现在我正在调用与上面相同的 Intent 并得到

`java.lang.RuntimeException: Unable to start activity ComponentInfo{my_package}: java.lang.ClassCastException: android.support.v4.app.NoSaveStateFrameLayout`

我有一些链接，但不知道如何管理`TabHost(TabGroupActivity)`

**更新 ：**

最近我得到这个

[如何从扩展 Activity 的类开始扩展片段的意图？](https://stackoverflow.com/questions/13132532/solved-how-to-start-an-intent-that-extends-fragment-from-a-class-that-extends)

简单的活动没关系，但如何调用`TabHost`

请伙计们帮助我并指导我以正确的方式实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:18:48.667

你要知道一个FragmentActivity就是一个Activity，所以你可以像正常启动一个Activity。因此，正如您链接的帖子所说：

```
Intent intent1 = new Intent(EventMain.this, EventDetail.class);
startActivity(intent1); 
```

尝试这样做并告诉我们您的结果。

# mysql - 正确的数据库架构

> ID：16036628
> 
> 赞同：0
> 
> 时间：2013-04-16T12:06:35.447
> 
> 标签：mysql

```
select sum(c.cost)
from (select x.num as x, y.num as y, max(priority) as maxpriority
      from numbers x cross join
           numbers y join
           costs c
           on x.num between c.x and c.x + c.deltax and y.num between c.y and c.y + c.deltay
      where x.value between PIXELX and PIXELX and DELTAX and
            y.value between PIXELY and PIXELY and DELTAY
      group by x.num, y.num
    ) xyp join
    costs c
    on xyp.x between c.x and c.x + c.deltax and xyp.y between c.y + c.deltay and
        xyp.maxpriority = c.priority 
```

在寻找由区域填充的数据库中的两点之间的“成本”时，我得到了这个答案，每个区域都有不同的成本。我一直试图让它与找出数据库模式一起工作，目前我正在`#1054 - Unknown column 'x.value' in 'where clause'`使用

```
Name    Type    Collation   Attributes  Null    Default Extra   Action
     1  num int(11)         No  None          Change      Drop    Browse distinct values     More 
```

作为数字和

```
#   Name    Type    Collation   Attributes  Null    Default Extra   Action
 1  x   int(11)         No  None          Change      Drop    Browse distinct values     More
 2  y   int(11)         No  None          Change      Drop    Browse distinct values     More
 3  deltax  int(11)         No  None          Change      Drop    Browse distinct values     More
 4  deltay  int(11)         No  None          Change      Drop    Browse distinct values     More
 5  priority    int(11)         No  None          Change      Drop    Browse distinct values     More 
```

作为成本。一直试图解决这个问题，非常感谢任何人的指点。

好的，它现在不会抛出错误，但它返回 null 而不是所选区域内的成本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:17:47.993

您的`numbers`表没有名为的列`value`，并且您尝试引用不存在的列，因此您收到错误。您当前的代码：

```
where x.value between PIXELX and PIXELX and DELTAX and 
```

我猜你想`num`改用：

```
where x.num between PIXELX and PIXELX and DELTAX and
      y.num between PIXELY and PIXELY and DELTAY 
```

# sql - 限制平均使用的行数

> ID：16036641
> 
> 赞同：1
> 
> 时间：2013-04-16T12:06:57.183
> 
> 标签：sql, postgresql, limit

我有一个查询（postgresql），我想限制用于计算平均值的行

```
SELECT username,avg(income),count(*) FROM
       Events 
WHERE to_timestamp(eventtimestamp)  >=  '2008-02-23' AND 
      to_timestamp(eventtimestamp) <=   '2009-01-03' and username='Joe'
GROUP BY userid 
```

Joe 有 40 个条目，但我想限制用于计算平均收入的行数。我知道我可以在查询末尾添加**限制**函数，但这限制了*整个*查询的输出，而不是查询头部的**平均**命令所考虑的行。有什么提示我可以告诉 avg 只使用前 n 行吗？

例如**不工作**

```
SELECT username,avg(income) limit 5,count(*) FROM
       Events 
WHERE to_timestamp(eventtimestamp)  >=  '2008-02-23' AND 
      to_timestamp(eventtimestamp) <=   '2009-01-03' and username='Joe'
GROUP BY userid 
```

仅对前 5 行进行平均。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:23:34.253

我添加一个答案有两个原因。首先，大多数其他答案都会影响`count(*)`以及`avg()`，这不是问题的一部分。其次，您可能希望为多个用户执行此操作。

因此，您可以尝试以下方法：

```
SELECT username, avg(case when seqnum <= 40 then income end), count(*)
FROM (select e.*, ROW_NUMBER() over (partition by username order by eventtimestamp desc) as seqnum
      from Events e
      WHERE to_timestamp(eventtimestamp)  >=  '2008-02-23' AND 
            to_timestamp(eventtimestamp) <=   '2009-01-03'
     ) e
GROUP BY username 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:15:45.480

您可以取内部查询的平均值：

```
SELECT username,avg(income),count(*)
FROM (
  SELECT username, income
  FROM Events 
  WHERE to_timestamp(eventtimestamp) BETWEEN '2008-02-23' AND '2009-01-03'
  and username='Joe'
  LIMIT 5) x
GROUP BY userid; 
```

还要注意使用的简化`BETWEEN`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:05:04.120

如果碰巧您更喜欢（或不在乎）以当前行结尾的 5 行的平均值，则可以使用窗口函数避免子选择：

```
select
    username,
    avg(income) over(rows 4 preceding),
    count(*)
from events 
where to_timestamp(eventtimestamp)  >=  '2008-02-23' and 
      to_timestamp(eventtimestamp) <=   '2009-01-03' and username='joe'
group by userid 
```

如果我理解您的评论，您确实可以`count`用作窗口函数：

```
 count(*) over(rows 4 preceding) 
```

或者如果不想计算空值：

```
 count(income) over(rows 4 preceding) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:10:09.423

您可以在子选择中使用限制；

```
SELECT username,avg(income),count(*) FROM
  (SELECT * FROM Events 
   WHERE to_timestamp(eventtimestamp)  >=  '2008-02-23' AND 
      to_timestamp(eventtimestamp) <=   '2009-01-03' and username='Joe'
   order by to_timestamp(eventtimestamp) desc
   LIMIT 10) sub
GROUP BY userid; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T13:13:20.100

好的答案已经发布。我建议使用 Unix 纪元进行比较和排序，如下所示：

```
SELECT userid, username, avg(income), count(*)
FROM (
  SELECT userid, username, income
  FROM Events 
  WHERE eventtimestamp BETWEEN date_part('epoch', '2008-02-23'::date) 
      AND date_part('epoch', '2009-01-03'::date)
    AND username='Joe'
  ORDER BY eventtimestamp DESC LIMIT 10) AS q
GROUP BY userid, username; 
```

通过这样做，我不会为每一行调用转换函数。另一种方法可能是创建一个功能索引，`to_timestamp(eventtimestamp)`但我认为我这样做的方式更有效。

请注意，我已经包含了用户 ID 和用户名 - 原始示例会引发错误，因为用户名不在“GROUP BY”子句中。

另外，如果您想从随机样本而不是最后*n*个条目进行计算，您可以将排序更改为`ORDER BY random()`

# php - ZF2 - 如何在列中使用 SQL_CALC_FOUND_ROWS()

> ID：16036645
> 
> 赞同：0
> 
> 时间：2013-04-16T12:07:04.613
> 
> 标签：php, mysql, zend-framework, zend-framework2

我正在尝试在查询中使用**SQL_CALC_FOUND_ROWS**。但我无法在没有**AS Expression1的情况下创建我的查询**

```
$select = $this->getSql()->select();
            $select->columns(array("*", new Expression(" SQL_CALC_FOUND_ROWS *")));
            $select->join( array ( 
                    'c2h' => 'site_category2help_topic' ), 'c2h.help_topic_id = site_help_topic.help_topic_id', array ( 
                    "*" ) );
            $select->where( " c2h.category_id = $categoryId " );
            $select->limit($limit);
            $select->offset($offset); 
```

**结果：**

```
SELECT site_help_topic.*, SQL_CALC_FOUND_ROWS * *AS Expression1*, c2h.* 

FROM site_help_topic 

INNER JOIN site_category2help_topic AS c2h 

ON c2h.help_topic_id = site_help_topic.help_topic_id 

WHERE c2h.category_id = 5 LIMIT '15' OFFSET '0' 
```

**它应该是 ：**

```
SELECT site_help_topic.*, SQL_CALC_FOUND_ROWS *, c2h.* 

FROM site_help_topic 

INNER JOIN site_category2help_topic AS c2h 

ON c2h.help_topic_id = site_help_topic.help_topic_id 

WHERE c2h.category_id = 5 LIMIT '15' OFFSET '0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:51:28.447

Sql\Select 有一个 option `QUANTIFIER`，您应该能够使用它而不是将其作为列名。

类似于这里[How to use SQL_CALC_FOUND_ROWS with Zend\Db\TableGateway](https://stackoverflow.com/questions/14156151/who-to-use-sql-calc-found-rows-with-zend-db-tablegateway)

# php - 替换括号之间的撇号

> ID：16036653
> 
> 赞同：0
> 
> 时间：2013-04-16T12:07:28.123
> 
> 标签：php

我想使用 preg_replace() 替换 PHP 中 {} 之间的字符串中的“和”。

所以：

```
This is "some" {"text" : 'duudu', 'duuue' : "yey" } 
```

应该：

```
This is "some" {\"text\" : \"duudu\", \"duuue\" : \"yey\" } 
```

你能建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:39:13.557

您可以使用 preg_replace_callback 来解决这个问题。考虑以下代码：

```
$str = 'This is "some" {"text" : \'duudu\', \'duuue\' : "yey" } "and" {"some", "other"} "text"';
echo preg_replace_callback('~({[^}]*})~', function($m) {
       return preg_replace('~(?<!\\\\)[\'"]~', '\"', $m[1]);
    }, $str) . "\n"; 
```

### 更新：对于可能喜欢纯正则表达式解决方案的纯粹主义者：

```
$repl= preg_replace('~(?<!\\\\) [\'"] (?! (?: [^{}]*{ [^{}]*} ) * [^{}]* $)~x',
                    '\"' , $str); 
```

**输出：**

```
This is "some" {\"text\" : \"duudu\", \"duuue\" : \"yey\" } "and" {\"some\", \"other\"} "text" 
```

### 现场演示：http: [//ideone.com/PfGzxd](http://ideone.com/PfGzxd)

# file-upload - Primefaces p:fileUpload 在 IE 10 中不起作用

> ID：16036655
> 
> 赞同：5
> 
> 时间：2013-04-16T12:07:44.803
> 
> 标签：file-upload, primefaces

p:fileUpload 中的更新属性和 onComplete 在 IE10 中不起作用。在 IE 9 中 sizeLimit 属性被忽略。有没有人遇到过这种情况。

我尝试通过在 p:fileUoload 上使用 onComplete 属性来调用 p:remotecommand 但看起来即使 onComplete 在 IE 10 中也不起作用

```
<h:form id="file" enctype="multipart/form-data">
        <p:outputLabel value="Test........"></p:outputLabel>
        <p:fileUpload label="Browse..." description="Select PDF file"
            auto="true" sizeLimit="500000"
            oncomplete="refreshData()"
            onstart="alert('test');" mode="advanced"
            fileUploadListener="#{fileUpload.handleFileUpload}"
            allowTypes="/(\.|\/)(pdf|png)$/">

        </p:fileUpload>
        <p:inputText value="#{fileUpload.test}" id="test" />
        <p:remoteCommand name="refreshData" action="#{fileUpload.setData}"
            update="test"></p:remoteCommand>
    </h:form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:52:32.870

终于意识到这是primefaces中的一个错误。

[http://forum.primefaces.org/viewtopic.php?f=3&t=28860#p94845](http://forum.primefaces.org/viewtopic.php?f=3&t=28860#p94845)

[http://code.google.com/p/primefaces/issues/detail?id=5355](http://code.google.com/p/primefaces/issues/detail?id=5355)

固定在：

> 目标版本-4.0目标版本
> -3.5.9

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T18:17:40.523

使用此 CSS 解决方法。我从[jQuery FileUpload 组件派生了这个，提交](https://github.com/blueimp/jQuery-File-Upload/commit/d45deb15f4934f7a2bce03040c879aca8eaa9c8a)修复了这个问题。

```
.fileinput-button input {
    -moz-transform : none !important;
    border : none !important;
    border-width : 0 !important;
    transform : translate(-300px, 0) scale(4) !important;
    font-size : 23px !important;
}
* + html .fileinput-button {
    line-height : none !important;
    padding : 2px 15px !important;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T12:40:04.800

升级到 IE10 后，我也遇到了 p:fileUpload 的问题。JavaScript 错误开始发生（“XML 文档中的语法错误”）。

它有助于将**X-UA-Compatible**标头更改为**IE=EmulateIE9**：

```
<h:head>
    <f:facet name="first">
        <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9,chrome=1" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </f:facet>
<h:head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T20:22:44.130

我不得不面对从 PF 3 迁移的 PF 5.1 的这个问题，感谢[这篇文章](http://www.abeautifulsite.net/whipping-file-inputs-into-shape-with-bootstrap-3/)，我解决了：

这是生成的html代码：

```
<div class="ui-fileupload-buttonbar ui-widget-header ui-corner-top">
    <span class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left ui-fileupload-choose" >
        <span class="ui-button-icon-left ui-icon ui-c ui-icon-plusthick"></span>
        <span class="ui-button-text ui-c">upload</span>
        <input name="upload" type="file">
    </span>
</div> 
```

这是解决此问题的CSS：

```
.ui-fileupload-buttonbar .ui-fileupload-choose input
{
    position:absolute;
    top:0;
    right:0;
    margin:0;
    border:solid transparent;
    border-width:0 0 1px 1px;
    opacity:0;
    filter:alpha(opacity=0);
    -o-transform:translate(250px,  -50px) scale(1);
    direction:ltr;
    cursor:pointer;
    z-index:5000;
    width:100%;
    height: 20px;       
}

.ui-button {
    position: relative;
    overflow: hidden;
}
.ui-button input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    font-size: 100px;
    text-align: right;
    filter: alpha(opacity=0);
    opacity: 0;
    outline: none;
    background: white;
    cursor: inherit;
    display: block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T14:51:41.627

这似乎是绝对位置的问题。将其更改为固定。它适用于我：

```
.fileupload-buttonbar .ui-button input {
    ...
    position                          : fixed;
    ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-15T20:49:14.743

这在新的 4.0 Primefaces 版本中已修复，但是如果您仍在使用旧版本的 Primefaces，您可能仍需要解决方法。

我可以在文件上传后使用 onstart 属性进行更新，该属性在 IE 10 中仍然有效。

创建一个隐藏字段，其中包含一个值，该值作为从 fileUploadListener 调用的方法的一部分进行更新。然后将 p:fileUpload 的 onstart 属性设置为如下所示：

```
function checkUpload() {

    //this should call a p:remoteCommand that refreshes your hidden value
    refreshHiddenValue(); 

    var hiddenFieldValue = $('#hiddenFieldId').val();
    if(hiddenFieldValue) {
        //this should call a p:remoteCommand that refreshes the
        //sections you want refreshed after the upload has finished
        refreshSections();
    }
    else {
        setTimeout(checkUpload, 1000);
    } 
} 
```

# json - 如何在 JSON 本身中添加 JSON 数据

> ID：16036656
> 
> 赞同：0
> 
> 时间：2013-04-16T12:07:50.140
> 
> 标签：json, nested

我想在 JSON 值本身中添加 JSON 数据，例如。

```
{
  "data" : "test",
  "another" : " { "test" : "test" }"
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:11:02.337

这可以通过两种方式实现：

*   将内部 JSON 数据的字符串表示形式作为外部 JSON 数据的值
*   或者按照您的建议嵌套 JSON 数组和/或对象

我提到了两种方式，因为我不确定你需要怎么做。如果您有一个分层软件架构，其中较低层不应该假设较高层处理什么样的数据（又名有效负载概念），第一种方法可能是合适的。但它更慢，因为 JSON 解析器必须更频繁地运行。

因此，如果您的问题只是，我可以嵌套 JSON 对象和数组吗，那么第二点适用；是的，如你所愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:11:22.567

您只需要删除内部对象周围的引号即可：

```
{
  "data" : "test",
  "another" : { "test" : "test" }
} 
```

# asp.net - 在 SQL Server 2005 的新列中显示行数据

> ID：16036657
> 
> 赞同：0
> 
> 时间：2013-04-16T12:07:52.633
> 
> 标签：asp.net, database, stored-procedures, cursor

我有一个表和一个返回这些结果的选择查询：

```
[Individual]    [team]       [Score]   
----------------------------------------
 x              Man U        Conversion
 x              Man U        Penalty
 x              Man U        Drop Goal
 y              Arsenal      goal 
```

在我的存储过程中，我想将结果返回为：

```
[individual]     [team]     [1]            [2]          [3]         [4]        
x                Man U      Conversion     penalty      Drop Goal   Goal 
y                Arsenal    goal 
```

由于数据库兼容性，我不能使用数据透视表。

**请使用代码示例**建议替代方案

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:04:11.090

这是使用游标、一些动态 SQL 和 ROW_NUMBER() 的一种方法：

```
 --declare input
DECLARE @input_table TABLE
(
    [individual] CHAR(1),
    [team] VARCHAR(10),
    [score] VARCHAR(10)
)

INSERT INTO @input_table ([individual], [team], [score]) VALUES ('x', 'Man U', 'Conversion')
INSERT INTO @input_table ([individual], [team], [score]) VALUES ('x', 'Man U', 'Penalty')
INSERT INTO @input_table ([individual], [team], [score]) VALUES ('x', 'Man U', 'Drop Goal')
INSERT INTO @input_table ([individual], [team], [score]) VALUES ('y', 'Arsenal', 'Goal')

SELECT * FROM @input_table

    --declare output
CREATE TABLE #output_table
(
    [individual] CHAR(1),
    [team] VARCHAR(10)
)

DECLARE @max_count INT
SET @max_count = (
    SELECT
        MAX([COUNT])
    FROM
    (
        SELECT 
            [individual], 
            [team], 
            COUNT(*) AS [COUNT]
        FROM @input_table 
        GROUP BY [individual], [team]
    )result_set
)

    --add columns
DECLARE @tmp_max_count INT
SET @tmp_max_count = 1
WHILE(@max_count >= @tmp_max_count)
    BEGIN
        DECLARE @dynamic_column_add VARCHAR(MAX)
        SET @dynamic_column_add = 'ALTER TABLE #output_table ADD [' + CAST(@tmp_max_count AS VARCHAR(10)) + '] VARCHAR(10)'
        EXEC (@dynamic_column_add)
        SET @tmp_max_count = @tmp_max_count + 1
    END

    --populate non-dynamic columns
INSERT INTO #output_table ([individual], [team])
SELECT DISTINCT
    [individual],
    [team]
FROM
    @input_table

    --populate dynamic columns
DECLARE my_cursor CURSOR FOR
SELECT
    'UPDATE #output_table SET [' + CAST([new_column] AS VARCHAR(10)) + '] = ''' + [score] + ''' WHERE [individual] = ''' + [individual] + ''' AND [team] = ''' + [team] + ''''
FROM
(
    SELECT
        [individual],
        [team],
        [score],    
        ROW_NUMBER() OVER (PARTITION BY [individual], [team] ORDER BY [individual], [team]) AS [new_column]
    FROM
        @input_table
)result_set

DECLARE @dynamic_statement VARCHAR(MAX)
OPEN my_cursor
FETCH NEXT FROM my_cursor INTO @dynamic_statement
WHILE (@@FETCH_STATUS = 0) 
    BEGIN 
        EXEC (@dynamic_statement)
        FETCH NEXT FROM my_cursor INTO @dynamic_statement
    END
CLOSE my_cursor
DEALLOCATE my_cursor;

SELECT * FROM #output_table

DROP TABLE #output_table 
```**

# r - 在 R 中的 2 个包之间共享变量

> ID：16036659
> 
> 赞同：3
> 
> 时间：2013-04-16T12:07:58.550
> 
> 标签：r, variables, package

我在 R 中创建了 2 个包。一个包中的变量在另一个包的函数中使用。所以我声明了全局变量，如`var <<- "value"`. 现在每个功能都可以正常工作。但是现在每个人都可以访问这些变量。如果任何用户更改变量的值，许多功能将无法正常工作。是否可以创建一个变量并仅在某些特定包中使用该变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:07:52.897

将设置`options`而不是变量存储在`.GlobalEnv`. 您可以`options`用作键值存储或分配例如 a`list`到一个键（可能是您的包的名称），就像我在[pander package](https://github.com/Rapporter/pander/blob/master/R/options.R)中所做的那样。如您所见，我什至创建了一些辅助函数来更新/查询这些列表元素。

快速示例：

```
> options(foo = list(a = pi, b = 1:3))
> getOption('foo')
$a
[1] 3.141593

$b
[1] 1 2 3

> getOption('foo')['a']
$a
[1] 3.141593 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:58:10.223

通过创造新的环境是可能的。[http://digitheadslabnotebook.blogspot.in/2011/06/environments-in-r.html](http://digitheadslabnotebook.blogspot.in/2011/06/environments-in-r.html)

```
>cacheEnv <- new.env()
> url <- "http://mytext.com"
> file <- "This is the content I downloaded"
> cacheEnv <- new.env()
> assign(url, file, envir=cacheEnv)
> get(url, envir=cacheEnv)
[1] "This is the content I downloaded" 
```

用户不能直接编辑变量。他们只能使用环境名称来编辑变量。

# javascript - 如何在表格单元格中使用单击，除了单击 jQuery 中的选择框

> ID：16036661
> 
> 赞同：0
> 
> 时间：2013-04-16T12:08:05.120
> 
> 标签：javascript, jquery

有一个包含一些图像和一些选择框的表格。我想在用户单击该行时突出显示该行（意味着任何 td），除了选择框和图像

现在我正在使用这个，

```
$("selector").live("click",function() {
    $(this)
        .parents("tr:first")
        .toggleClass("diffColor")
    ;
}); 
```

但是，如果我单击选择框或图像，它将应用该类。但是当我单击选择框或任何其他图像时，我不需要。

看这里

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:18:49.087

尝试这个：

```
$(".selector").on("click", function (e) {
    if (e.target === this) $(this).parent("tr:first").toggleClass("diffColor");
}); 
```

假设这`.selector`是所有的类名`td`

这里，`this`表示当前作用域中的元素，这里总是被`td`点击的。

并且`e.target`表示实际点击的元素，它可以是`td`或`checkbox`内的任何东西`td`。

因此，如果实际单击的元素不在`td`当前范围内，则`e.target === this`返回 false 并且没有任何反应（没有触发单击事件），反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:20:38.577

如果您不想`toggleClass`在单击`td`包含 an 的a 时这样做，`<img>`或者`<select>`您可以执行以下操作：

```
$('selector').live('click', function() {
    if (!$(this).has('select, img').length) {
      $(this).parents('tr:first').toggleClass('diffColor');
    }
}); 
```

### [这是你更新的小提琴](http://jsfiddle.net/YJQvZ/7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T12:46:43.780

我有检查 TD 是否包含图像或选择框的解决方案。

```
$("#tableId td").on("click",function() {  
     var ths=$(this);    
     if((ths.has("select").length ? false : true)&&(ths.has("img").length ? false : true)){
         $(this).parent().toggleClass("diffColor");
     }
    }); 
```

[JSFIDDLE](http://jsfiddle.net/YJQvZ/13/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:16:37.827

尝试这个....

```
$("td").live("click",function() {
$(this)
    .parents("tr:first")
    .toggleClass("diffColor")
;
}); 
```

[演示](http://jsfiddle.net/xvwRW/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:22:08.833

这对你好吗？只需将类“更改”添加到 td。

```
$("#tableId td.change").on("click",function() {
        $(this)
            .parents("tr:first")
            .toggleClass("diffColor")
        ;
    });

<table id="tableId" border="1">
     <thead>
        <th></th>
        <th>First</th>
        <th>Second</th>
        <th>Third</th>
     </thead>
     <tbody>
        <td><input type="checkbox"/></td>
        <td class="change">FirstTableColumn1</td>
        <td class="change">FirstTableColumn2</td>
        <td><select>
            <option>AAA</option>
            <option>BBB</option>
            <option>CCC</option>
            <option>DDD</option>
            </select></td>

     </tbody>
   </table> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:37:34.793

发生这种情况是因为您的事件正在冒泡。

您可以为孩子的点击事件添加一个 event.stopPropagation 以防止这种情况发生。

因此对于任何输入和选择元素添加以下内容以防止传播。如果您已经有点击事件处理程序，请将 stopPropagation 添加到函数的开头。

```
$("#tableId").find("input, select")
             .click(function(e){e.stopPropagation();}); 
```

# scale - 元视口比例不起作用 - 响应式

> ID：16036663
> 
> 赞同：0
> 
> 时间：2013-04-16T11:55:44.223
> 
> 标签：scale

我已插入：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

进入我网站的标题，但它并没有像应该那样禁用我的macbook上的SCALE功能（尚未在其他地方测试过）。我已经尝试了与我之前使用的另一个主题中使用的完全相同的代码，但它仍然不起作用。

这可能是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T20:49:40.943

另一种选择是使用 responsivem.js 它需要您指定 em 中的所有内容，但您可以编写一个脚本来将所有 px 替换为 em。一探究竟。

# c# - 使用 C# 在 cmd 中运行命令

> ID：16036664
> 
> 赞同：6
> 
> 时间：2013-04-16T12:08:11.373
> 
> 标签：c#, command-line, cmd

我想运行一个 cmd 并在其中运行一些命令。我写了这段代码：

```
Process p = new Process();
ProcessStartInfo info =new ProcessStartInfo();

info.FileName = "cmd.exe";
info.WorkingDirectory = this.workingDirectory;
info.RedirectStandardInput = true;
info.UseShellExecute = false; 
info.CreateNoWindow = true;
p.StartInfo = info;

var x=p.Start();
using (StreamWriter sw = p.StandardInput)
{
    if (sw.BaseStream.CanWrite)
    {
        sw.WriteLine(@"set path=c:\temp"+ ";%path%");
        sw.WriteLine(@"@MyLongproces.exe");
    }
} 
```

但它不起作用：

1.  我看不到命令​​窗口（即使我设置`info.CreateNoWindow`为`false`）。
2.  我的命令没有运行。

问题是什么？我该如何解决？

*   更新1

此代码不起作用：

```
 string binDirectory = Path.Combine(FileSystem.ApplicationDirectory, this.binFolderName);
  ProcessStartInfo info = new ProcessStartInfo("cmd", @"/c " + Path.Combine(binDirectory, command));
  info.RedirectStandardInput = false;
  info.RedirectStandardOutput = true;
  info.UseShellExecute = false;
  info.CreateNoWindow = false;
  System.Diagnostics.Process proc = new System.Diagnostics.Process();
  proc.StartInfo = info;
  proc.Start();
  string result = proc.StandardOutput.ReadToEnd(); 
```

没有显示 cmd 窗口，结果是“”。

但是这段代码有效：

```
 Process.Start(Path.Combine(binDirectory, command)); 
```

上面代码的问题是：

1.  我无法定义工作目录。
2.  当我不希望它显示时，它会显示一个 CMD 窗口。

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:11:19.633

您正在设置 CreateNoWindow 选项：

```
info.CreateNoWindow = true; 
```

> [ProcessStartInfo.CreateNoWindow](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.createnowindow.aspx) - 如果进程应该在不创建新窗口来包含它的情况下启动，则为 true；否则为假。默认值为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:21:21.423

我猜你想在这里运行 MyLongProcess.exe。如果是，则无需启动命令提示符。您可以尝试以下方法：

```
//Create process info and set arugments here and then assign it to process object
// If the exe does not expect any arguments, simply use line below
Process process = Process.Start("MyLongProcess.exe"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T19:27:08.923

尽管这已经很老了，但在我看来，问题在于 of 的指定`/c`参数`cmd`。如果您指定一个带有空格的参数，则需要`"`在开头和结尾使用字符。所以我建议改变这个

```
ProcessStartInfo info = new ProcessStartInfo("cmd", @"/c " + Path.Combine(binDirectory, command)); 
```

对此。

```
ProcessStartInfo info = new ProcessStartInfo("cmd", string.Format("/c \"{0}\"", Path.Combine(binDirectory, command))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:11:04.203

您仍然需要告诉您的进程您要运行什么命令。在这种情况下，听起来您希望它启动`cmd.exe`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:25:24.443

你可以试试这个

```
//Get the paths list and add your custom path to it
string paths = System.Environment.GetEnvironmentVariable("PATH") + @";C:\temp";

//Create a array consisting of all the paths
string[] pathArray = paths.Split(';');

//Search the paths for the first path in which your exe is present
string exePath = pathArray.Select(x => System.IO.Path.Combine(x, "MyLongproces.exe"))
                          .Where(x => System.IO.File.Exists(x))
                          .FirstOrDefault();

if (string.IsNullOrWhiteSpace(exePath) == false)
{
    //start your exe
    System.Diagnostics.Process.Start(exePath);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:13:19.463

试试看：

**前**

```
 p.StartInfo = info; 
```

**插入**

```
info.Arguments = "/c ping www.google.com.br"; //command here 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T12:16:44.473

为什么你写困难的东西，这里是如何运行命令：

```
try {

    System.Diagnostics.ProcessStartInfo procStartInfo =
        new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

    StreamReader.procStartInfo.RedirectStandardOutput = true;
    procStartInfo.UseShellExecute = false;

    procStartInfo.CreateNoWindow = true;

    System.Diagnostics.Process proc = new System.Diagnostics.Process();
    proc.StartInfo = procStartInfo;
    proc.Start();

    string result = proc.StandardOutput.ReadToEnd();

    Console.WriteLine(result);
  }
  catch (Exception objException)
  {
        // Log the exception
  } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-09T19:26:35.377

尝试添加这一行

```
info.Verb = "runas"; 
```

# wix - 在一个 wix 设置中收获两个 Web 应用程序

> ID：16036665
> 
> 赞同：1
> 
> 时间：2013-04-16T12:08:12.733
> 
> 标签：wix

我想在一个 WIX 设置中收获两个 Web 应用程序。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:15:41.473

You can do this many ways, most involve editing the .wixproj file. For example, you could use the `HeatDirectory` task to point to the locations where your web applications are built to, and harvest them. That is probably the route I would go.

# mvcmailer - 使用 MVC Mailer 时 ViewBag 为空

> ID：16036666
> 
> 赞同：0
> 
> 时间：2013-04-16T12:08:15.290
> 
> 标签：mvcmailer

我正在使用 MVC Mailer - 但由于某种原因，当呈现视图时，ViewBag 中没有任何内容。我的代码看起来像这样

```
 ViewBag.test = "This should appear in the view";

            MvcMailMessage m = new MvcMailMessage();               
            MailerBase mb = new MailerBase();
            m = mb.Populate(x =>
            {
                x.Subject = "Welcome";
                x.ViewName = "../Mails/Email_ForgotPassword";
                x.To.Add("g@gmail.com");
            });

            m.Send();
            ModelState.AddModelError("", "Success! Password sent"); 
```

我只能想象这是一些奇怪的设置或我省略的东西 - 因为视图中的 ViewBag.test 为 NULL。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:02:47.820

在 Visual Studio 2012 上安装 Update 2 后，我遇到了类似的问题。我还没有找到解决方法。但是，如果您在管理员模式下运行 VS 2012，您将不会遇到此问题。

# c# - 如何返回 1 条 json 数据

> ID：16036668
> 
> 赞同：0
> 
> 时间：2013-04-16T12:08:26.570
> 
> 标签：c#, json

我在这个 json 上有点挣扎，我的第一个错误是：

```
 $exception {"Error converting value 167 to type 'Web.Domain.Ean.HotelList'. Path '', line 1, position 3."} System.Exception {Newtonsoft.Json.JsonSerializationException} 
```

所以我一直在尝试不同的方法来让它工作，现在我认为我已经把我的代码弄得一团糟，现在我得到了这个错误。

```
Cannot implicitly convert type 'string' to 'System.Collections.Generic.IEnumerable<Web.Domain.Ean.HotelCount>' 
```

任何有一双新眼睛的人都可以看看，看看他们是否可以帮助解决错误，如果可能的话，还可以**解释一些 json 理论**来帮助我学习。

```
public class HotelCount
{
    public string ActivePropertyCount { get; set; }
}

public IEnumerable<HotelCount> GetNumberOfHotels()
{
    var numberOfHotelCount = GetHotelsFromEan.GetListOfHotels();
    var root = JObject.Parse(numberOfHotelCount.ToString());
    IList<JToken> hotelCount = root["HotelListResponse"]["HotelList"].Children().ToList();

    IList<HotelCount> count = new List<HotelCount>();
    foreach (JToken hotel in hotelCount)
    {
        HotelCount countHotels = JsonConvert.DeserializeObject<HotelCount>(hotel.ToString());
        count.Add(countHotels);
    }

    var t = count.FirstOrDefault();
    //IList<HotelCount> numberOfHotels = hotelCount.Select(count => JsonConvert
    //                             .DeserializeObject<HotelCount>(
    //                             count.SingleOrDefault().ToString())).ToList();
    return t.ActivePropertyCount;
} 
```

谢谢乔治

==========================更新代码======================= ========

```
public string GetNumberOfHotels()
        {
            var numberOfHotelCount = GetHotelsFromEan.GetListOfHotels();
            var root = JObject.Parse(numberOfHotelCount.ToString());

            IList<JToken> hotelCount = root["HotelListResponse"]["HotelList"].Children().ToList();

            IList<HotelCount> count = hotelCount.Select(hotel => JsonConvert.DeserializeObject<HotelCount>(hotel.ToString())).ToList();

            return count.ToString();
        } 
```

===============================新更新================== ===============

json 值的格式为 {"@activePropertyCount":"167","

所以我的课是：

```
public class HotelCount
    {
        public string ActivePropertyCount { get; set; }
    } 
```

我的最后一个错误是。

Message=将值 167 转换为类型“Web.Domain.Ean.HotelCount”时出错 Message=无法从 System.Int64 转换或转换为 Web.Domain.Ean.HotelCount。

所以如果我回到下面的代码，需要做些什么来返回 ActivePropertyCount 的值

```
public IEnumerable<HotelCount> GetNumberOfHotels()
        {
            var numberOfHotelCount = GetHotelsFromEan.GetListOfHotels();
            var root = JObject.Parse(numberOfHotelCount.ToString());

            IList<JToken> hotelCount = root["HotelListResponse"]["HotelList"].Children().ToList();

            IList<HotelCount> count = new List<HotelCount>();
            foreach (JToken hotel in hotelCount)
            {
                HotelCount countHotels = JsonConvert.DeserializeObject<HotelCount>(hotel.FirstOrDefault().ToString());
                count.Add(countHotels);
            }

            return count;

        } 
```

======================修复了=========================

```
public string GetNumberOfHotels()
        {
            var numberOfHotelCount = GetHotelsFromEan.GetListOfHotels();
            var root = JObject.Parse(numberOfHotelCount.ToString());

            IList<JToken> hotelCount = root["HotelListResponse"]["HotelList"].Children().Values().ToList();

            var s = hotelCount.FirstOrDefault();
            var t = s;

           // IList<HotelCount> count = hotelCount.Select(hotel => JsonConvert.DeserializeObject<HotelCount>(hotel.FirstOrDefault().ToString()).ActivePropertyCount).ToList();

            return t.ToString();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:14:13.537

真的不确定你有什么，但试试这个（猜测 jToken 属性是**ActivePropertyCount**但根据需要替换）：

```
public string GetNumberOfHotels()
{      
    var numberOfHotelCount = GetHotelsFromEan.GetListOfHotels();
    var root = JObject.Parse(numberOfHotelCount.ToString());

    // Get list of hotels
    IList<JToken> hotels = root["HotelListResponse"]["HotelList"].Children().ToList()
        .Select(hotel => JsonConvert.DeserializeObject<HotelCount>(hotel.ToString())).ToList();

    // Now get ActivePropertyCount for each hotel
    int totalCount = 0;
    foreach (JToken jToken in hotels)
    {
        totalCount += jToken.Value<int>("ActivePropertyCount");
    }
    return totalCount.ToString();
} 
```

# javascript - 是否包含检查 JSON 对象

> ID：16036670
> 
> 赞同：2
> 
> 时间：2013-04-16T12:08:34.370
> 
> 标签：javascript, jquery, json

我有一个 Json 对象数组

```
 posturlContent = [
        { "Title": "Bbc news live", "Content": "<div>this is a test BBC </div>", "Uri": "http://bbc.co.uk" },
        { "Title": "CNN news live", "Content": "<div>this is a test CNN</div>", "Uri": "http://cnn.com" },
        { "Title": "Youtube news live", "Content": "<div>this is a test Youtube </div>", "Uri": "http://youtube.com" },
    ]; 
```

我有一个 JS 数组

```
uris =["http://cnn.com", "http://abcnews.com",...] 
```

我需要检查 posturlContent Json obejct 中是否存在任何 uris 数组元素，并找到不存在的元素。我知道的唯一方法是做嵌套循环。

我可以使用更简单的 .inArray 或 Contains 函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:13:34.317

你可以使用`$.grep`：

```
$.grep(posturlContent, function(item){return item.Uri == siteUrl}).length > 0 
```

如果这是真的，则该项目在数组内。

然后将其包装在`$.each`：

```
$.each(uris, function(){
    var siteUrl = this.valueOf();
    // Grep and do whatever you need to do.
}) 
```

您可以像这样删除项目：

```
$.each(uris, function(){
    var siteUrl = this.valueOf();
    posturlContent = $.grep(posturlContent, function(item){
        return item.Uri.toLowerCase() != siteUrl.toLowerCase();
    });
}) 
```

请注意，我们现在正在过滤与 siteUrl 不匹配的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:31:57.470

如果创建一个 url 缓存对象呢？这是一个小提琴[http://jsfiddle.net/U94xT/1/](http://jsfiddle.net/U94xT/1/)

```
var posturlContent = [
    { "Title": "Bbc news live", "Content": "<div>this is a test BBC </div>", "Uri": "http://bbc.co.uk" },
    { "Title": "CNN news live", "Content": "<div>this is a test CNN</div>", "Uri": "http://cnn.com" },
    { "Title": "Youtube news live", "Content": "<div>this is a test Youtube </div>", "Uri": "http://youtube.com" },
];
var uris =["http://cnn.com", "http://abcnews.com"];

var urisCache = {}; // using object to avoid urls duplicates, that could occur using an array
for (var i = 0; i < posturlContent.length; i++) {
    var key = posturlContent[i]["Uri"];
    urisCache[key] = true; // or urisCache[key] = posturlContent[i]; if you need to access the corresponding entry from posturlContent
}

//now check if the uris array element exist in posturlContent
for (var i = 0; i < uris.length; i++) {
     alert(uris[i] in urisCache);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:24:56.220

使用JQuery grep 可以找到exists，通过取差可以找到nonExists；

```
Array.prototype.diff = function(a) {
  return this.filter(function(i) {return !(a.indexOf(i) > -1);});
};

var exists = [];
jQuery.grep(posturlContent, function(n, i){
  var index = uris.indexOf(n.Uri);
  if(index >=0){
       exists.push(uris[index])
  }
});

var nonExists = uris.diff(exists) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:26:57.353

您可以使用它`grep()`来查找存在和不存在的 uri。我不确定它与编写自己的循环相比有多快，但它肯定更简单

```
var posturlContent = [
        { "Title": "Bbc news live", "Content": "<div>this is a test BBC </div>", "Uri": "http://bbc.co.uk" },
        { "Title": "CNN news live", "Content": "<div>this is a test CNN</div>", "Uri": "http://cnn.com" },
        { "Title": "Youtube news live", "Content": "<div>this is a test Youtube </div>", "Uri": "http://youtube.com" },
    ];

var uris =["http://cnn.com", "http://abcnews.com"];

//keep track of URI's that exist and that are missing
var found = [];
var missing = [];

//for is faster than each()
for(var i=0; i<uris.length; i++) {
    found.concat($.grep(posturlContent, function(item){return item.Uri === uris[i]}, false));
    missing.concat($.grep(posturlContent, function(item){return item.Uri === uris[i]}, true));
}

//do something with found and missing urls 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:39:38.827

这是一个没有 jQuery 和没有 forEach 的答案，因为您需要旧的浏览器支持......

```
for(var i =0; i<posturlContent.length; i++) {
  var detail = posturlContent[i];
  for(var j =0; j<uris.length; j++) {
    var uri = uris[j];
    if (detail.Uri === uri) {
      console.log('matched ' + detail.Uri);
    } else {
      console.log('didnt match ' + detail.Uri);
    }
  }
} 
```

如果您想忽略大小写，那么您可以使用 === 而不是：-

```
if (new RegExp(uri, "i").test(details.Uri)) 
```

# php - 如果图书已被购买，则从搜索结果中删除

> ID：16036673
> 
> 赞同：0
> 
> 时间：2013-04-16T12:08:40.417
> 
> 标签：php, mysql

我正在尝试检查 books_ordered 表以获取已订购的图书 ISBN 列表。如果 book_ordered 表中存在 ISBN，我不希望它显示在搜索结果列表中。我有以下代码：

```
include "include.php";
session_start();

$query1 = 'SELECT isbn as myisbn FROM books_ordered';
$result1 = mysqli_query($con, $query1) or die("Error in query $query1: " . mysqli_error());
while($row = mysqli_fetch_array($result1)){
$isbn=$row['myisbn'];
}

$query = 'SELECT * FROM book';
$result = mysqli_query($con, $query) or die("Error in query $query: " . mysqli_error());

while ($row = mysqli_fetch_array($result)){
if($isbn!=$row[0]){
echo $row[1]."<br>";
}
}
mysqli_close($con);             //closes the connection

?> 
```

我的脚本只在搜索结果的 books_ordered 表中隐藏了第一个 isbn，有人知道为什么吗？我猜这与while循环中的括号有关，我只是想不通。或者，如果有人知道这样做的更好方法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:14:16.693

在单个查询中从 book 表中过滤掉不需要的结果会更有效，如下所示：

```
select b.* from book b
left join books_ordered o on b.isbn = o.isbn
where o.isbn is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:11:52.483

“书”的数据库结构是什么？您可以轻松地制作“JOIN”命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:14:25.177

您仅将最后一个值存储在 $isbn 中，因为它不是数组。您需要将 isbn 添加到一个数组中，然后针对该数组检查第二个查询中的每一行。

但我可能会改为在 SQL 语句中进行处理。就像是：

```
SELECT * FROM book where isbn not in (select isbn from books_ordered) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:15:12.917

如果我理解得很好，您只想显示尚未订购的书籍。

你可以使用这个 SQL 语句：

```
SELECT * FROM book WHERE isbn_row NOT IN (SELECT isbn FROM books_ordered) 
```

首先，我们选择已排序书籍的 isbn：`SELECT isbn FROM books_ordered` 当我们有列表时，使用子句 NOT IN 我们可以从 BOOK 中选择所有书籍，除了我们在第一句中获得 isbn 的所有书籍。

我希望对你有用。

# php - 如何对大量/对象进行排序

> ID：16036675
> 
> 赞同：0
> 
> 时间：2013-04-16T12:08:42.090
> 
> 标签：php, arrays, zend-framework

我有一个巨大的`$events`. 为了输出这个海量的信息，我做：

```
<?php foreach ($this->events as $usern): ?><?php foreach ($usern as $user): ?>
        <tr>
            <td><?php echo $user['id']; ?></td>
            <td><?php echo $user->resource_types; ?></td>
            <td><?php echo $user->resource_ids; ?></td>
            <td><?php echo $user->action; ?></td>
            <td><?php echo $this->owner($user->originator); ?></td>
            <td><?php echo $user->event_date; ?></td>
            <td>
            <?php //if($this->canManageBusiness($user->id)): ?>

            <?php // endif ?>
            </td>
        </tr>
    <?php endforeach ?><?php endforeach ?> 
```

有趣的是我可以同时使用`$user->id`和`$user['id']`sintax。但是没关系。我怎样才能按`$user['id']`desc 对这个海量进行排序？

编辑：我从数据库中获取数据，但不是通常的方式，所以我不能使用 sql 语法对结果进行排序：

```
$events[] =$this->_dbTable->fetchAll($this->_dbTable->select()->from($this->_dbTable, array('id','resource_types','resource_ids','action','originator','event_date'))->where('resource_types = ?', 'business')->where('resource_ids',$bus->id));
$events[] =$this->_dbTable->fetchAll($this->_dbTable->select()->from($this->_dbTable, array('id','resource_types','resource_ids','action','originator','event_date'))->where('resource_types = ?', 'document-type')->where('resource_ids',$dt->id));
return $events 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:12:10.217

您是否从数据库中读取数据？然后只需添加到您的查询`SORT BY id DESC`

否则你可以在 PHP 中使用 usort()：

```
usort($events, function ($a, $b) { return $a->id - $b->id; }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:41:16.447

在查询中添加一个`order()`不会让你到达那里？

```
$events[] =$this->_dbTable->fetchAll($this->_dbTable->select()
    ->from($this->_dbTable,
        array('id','resource_types','resource_ids','action','originator','event_date'))
    ->where('resource_types = ?', 'business')
    ->where('resource_ids',$bus->id)
    ->order('id DESC'));
$events[] =$this->_dbTable->fetchAll($this->_dbTable->select()
    ->from($this->_dbTable,
        array('id','resource_types','resource_ids','action','originator','event_date'))
    ->where('resource_types = ?', 'document-type')
    ->where('resource_ids',$dt->id)
    ->order('id DESC'));
return $events 
```

在我看来，这一切都来自同一个表，如果是这样，为什么不构建一个查询呢？

也许是这样的：

```
$events[] = $this->_dbTable->fetchAll($this->_dbTable->select()
              ->from($this->_dbTable,
                   array('id','resource_types','resource_ids','action','originator','event_date'))
              ->where('resource_types IN (?)', array('business', 'document-type'))
              ->where('resource_ids IN (?)', array($bus->id, $dt->id))
              ->order('id DESC')); 
```

不确定这是否会帮助您到达那里，也许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:38:30.290

决定对我的数据库表进行去规范化，以使选择数据的过程更容易。让我们看看它是否变得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:46:42.967

这很糟糕，因为你必须通过列表两次，但你可以......

```
$events_arr = array();
<?php foreach ($this->events as $usern): ?><?php foreach ($usern as $user): ?>
    $events_arr[$user_id][] = $usern; endforeach; endforeach;
ksort($events_arr); 
```

现在可以使用事件 arr，按 user_id 排序

```
foreach ($events_arr as $user_id => $usern) {
  foreach ($usern as $user) {
    echo $user_id . ": " . $user->action;
  }
} 
```

# java - java 二维数组中的连接邻居

> ID：16036676
> 
> 赞同：5
> 
> 时间：2013-04-16T12:08:47.153
> 
> 标签：java, algorithm, multidimensional-array

我正在为具有这样的 2D 数组的游戏设计一个引擎：

```
0,1,1,2,0
0,1,2,1,1
1,0,1,0,2
2,1,2,0,0
2,0,1,0,0 
```

我被困在“游戏结束”状态，因为它必须检查 1 或 2 是否已连接。它应该宣布拥有 1 的玩家为获胜者并返回：

```
 1 1
 1   1 1
1  1
1
  1
    1 
```

我尝试通过检查数组中的每个位置并在所有 8 个方向上检查其邻居来使用递归，但该方法需要 45 秒才能运行，这是低效的。

有没有人有任何想法？一个伪代码示例将不胜感激（我是一个缓慢的学习者）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:12:13.273

你需要的是：

[Connected_component_labeling](http://en.wikipedia.org/wiki/Connected-component_labeling)

这给出了一个伪代码，

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:46:33.020

以下是一些提示：

*   如果可能，从一开始就记录有多少个 1 和 2。
*   在检查它们是否已连接时，您可以使用`boolean`矩阵和计数器来跟踪您已经检查过哪些以及其中有多少。
*   对必要的邻居使用递归，而不是检查矩阵中的每个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:17:20.117

从一开始就维护一个[UnionFind](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)数据结构，每个条目代表每个单元格。最初，对具有相同值的相邻单元格执行联合。当玩家标记一个单元格时，如果值与玩家的值相同，则与相邻单元格执行 union()。在联合查找中，您可以跟踪具有值的单元格的数量，当该数量等于插入该值的次数时，您就有了获胜者。

您还可以使用[此处描述的算法线性地执行此操作](http://en.wikipedia.org/wiki/Connected-component_labeling)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:18:45.350

这个问题并不容易。在我看来，您可以将矩阵视为图形，然后尝试确定图形是否已连接。ie 是 1s 连接的图，是 2s 连接的图。在这里您可以看到[一些算法](http://www.algorithmist.com/index.php/Graph_Connectivity)。由于您正在创建图表，因此您还可以跟踪玩家正在创建的节点组，并在创建新节点时，您可以检查新节点连接了多少组，并联合新节点连接的任何内容（或如果它没有连接任何东西，则创建一个包含新节点的新组）。

顺便说一句，您可以将任何递归转换为循环，但只有当您的堆栈耗尽时才需要这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:30:44.767

继续，`a[n][n]`用`a[i][j] = 1`if`i`和`j`are connected 制作一个重复的图表。

然后您可以执行以下操作：

```
int count = 0;

void dfs(int i)
{
    int k;
    for(k = 0; k < n; k++)
    {
        if(A[i][k] == 1 && !visited[k])
        {
            count++;
            visited[k] = 1;
            dfs(k);
        }
    }
}

for(i=0; i < n;i++)
{
    if(!visited[i])
    {
        count=1;
        visited[i]=1;
        dfs(i);
        // map i with count .. here
    }
} 
```

因此，一旦您完成了网络中的节点数与其节点之一的映射。

你会发现价值计数，如果 count == total_no_of_1's

如果是这样，则网络 1 已连接。如果不是，则与 2 相同，并声明结果。

# php - SQL 表中的逻辑验证码和外部检查

> ID：16036685
> 
> 赞同：0
> 
> 时间：2013-04-16T12:09:04.983
> 
> 标签：php, mysql, sql, captcha

这是我在这里的第一篇文章，所以如果我以错误的方式做某事，请不要讨厌。我想为我的网站制作一个带有逻辑问题的验证码。我认为它比 reCaptcha 更好。无论如何，我用很多“谷歌搜索”做了一个花哨的代码，但它一定有一些错误，我也想知道，如何验证数据库中的答案。我的数据库如下所示：

**身份证问题答案**

1个例子？示例答案

我目前的代码是这样的：

```
<?php

  $database_db="general";
  $user_db="root";
  $password_db="somepass";
  $host_db="localhost";

  $link=mysql_connect($host_db,$user_db,$password_db) or die ("couldnot connect: ".mysql_error());
  mysql_select_db($database_db, $link)  or exit('Error Selecting database: '.mysql_error()); ;

  $query = "SELECT * FROM `captcha` ORDERED BY RAND() LIMIT 1";
  $question=mysql_query($query);
  $answer=$_POST["answer"];

  $errormessage = "";

  $sql="SELECT * FROM captcha where question='$question' and answer='$answer'";
  $result = mysql_query($sql, $link)  or exit('$sql failed: '.mysql_error()); 
  $num_rows = mysql_num_rows($result);
  if($num_rows==0){
  header("Location: error.php");
  } else {
  header("Location: success.php");
  exit;
  }
?>
<html>
    <body>
        <form method="post">
            <?php echo $question; ?>
            <input type="text" name="answer" id="answer" />
            <input type="submit" name="submit" value="submit" />
        </form>
    </body>
</html> 
```

Success.php 是一个简单的文件，如果一切顺利，用户就会进入该文件，而 error.php 是一个包含以下代码的文件：

```
<?php echo "Captcha is not valid! Please try again"; ?> 
```

另请注意您会更改哪些内容来优化此代码。如果它准备好了，我还有一个问题：如何在任何其他外部网站中实现它。

谢谢你的帮助，MLL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:29:11.897

看起来您正在尝试在单个服务器生成的页面中提出问题并检查答案。一个更可行的方法可能是在一个页面上提出问题，并通过后续请求/响应发布和检查答案。

你确定你的“逻辑问题”计划吗？验证码如此流行的原因之一是它们被设计为具有单一、明确、“正确”的答案。

我担心你在问“什么动物追逐猫？”时可能会遇到问题。然后，您必须确定“狗”、“狗”、“狗”、“狗”、“热狗”、“狗鱼”、“拉布拉多”等哪些答案是“正确的”

如果我误解了您的查询，我深表歉意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:37:07.200

为您快速清理代码（但未经测试）

```
<?php

    $database_db="general";
    $user_db="root";
    $password_db="somepass";
    $host_db="localhost";

    $link = mysqli_connect($host_db, $user_db, $password_db, $database_db);

    /* check connection */
    if (mysqli_connect_errno()) 
    {
        die ("couldnot connect: ".mysqli_connect_error());
        exit();
    }   

    if (array_key_exists("answer", $_POST) AND array_key_exists("id", $_POST))
    {
        $id = intval($_POST['id']);
        $sql="SELECT question, answer FROM captcha WHERE question='$id' AND answer='".mysqli_real_escape_string($link, $answer)."'";
        $result = mysqli_query($link, $sql)  or exit('$sql failed: '.mysqli_error($link)); 
        $num_rows = mysqli_num_rows($result);
        if($num_rows==0)
        {
            header("Location: error.php");
        } 
        else 
        {
            header("Location: success.php");
        }
        exit;
    }
    else
    {
        $query = "SELECT id, question FROM `captcha` ORDER BY RAND() LIMIT 1";
        if ($result = mysqli_query($link, $query))
        {
            if ($row = mysqli_fetch_assoc($result)) 
            {
                $id = $row["id"];
                $question = $row["question"];
            }
        }
    }

?>
<html>
    <body>
        <form method="post">
            <?php echo $question; ?><br />
            <input type="hidden" name="question" id="question" value="<?php echo $id; ?>" />
            <input type="text" name="answer" id="answer" /><br />
            <input type="submit" name="submit" value="submit" /><br />
        </form>
    </body>
</html> 
```

添加了一些数据检查（您应该使用 mysqli_real_escape_string 以避免 SQL 注入 - 或强制输入为整数）。从 mysql_ 函数切换到 mysqli_ 函数。

请注意，验证码中的大洞是您存储了与表单中提出的问题/答案相关的内容。因此，一个狡猾的角色可能会用他们自己的固定选择覆盖您选择的随机角色。最好将问题存储在会话变量中

毫无疑问，还有一些事情可以改变，但这些是我最初的改变。

# class - 在 groovy 脚本中包含类

> ID：16036698
> 
> 赞同：2
> 
> 时间：2013-04-16T12:09:42.407
> 
> 标签：class, groovy, include

如何在 Groovy 脚本中包含一些类？

（这个问题与 REST 无关，但我使用 REST 将问题置于正确的上下文中）

背景：我正在用 groovy 开发一个 CLI，以从我们正在运行的服务中获取状态信息。状态信息作为 REST 接口公开。

根据我在 CLI 上给出的参数，在 REST 接口上调用不同的路径。我还将实际的 REST 通信放在类层次结构中，以便能够重用代码，这就是我遇到问题的地方。如何以简单的方式在我的 groovy 脚本中包含类层次结构？

Groovy CLI 脚本`RestCli.groovy`

```
import restcli.RestA
import restcli.RestB

if(args[0] == "A") {
    new RestA().restCall()
}
else if(args[0] == "B") {
    new RestB().restCall()
} 
```

层次结构的超级类`restcli/RestSuper.groovy`

```
package restcli

abstract class RestSuper {

    protected def restCall(String path) {
        println 'Calling: ' +path
    } 

    abstract def restCall()

} 
```

两个类来实现不同的调用。`restcli/RestA.groovy`

```
package restcli

class RestA extends RestSuper {

    def restCall() {
        restCall("/rest/AA")
    }       

} 
```

和`restcli/RestB.groovy`

```
package restcli

class RestB extends RestSuper {

    def restCall() {
        restCall("/rest/BB")
    }

} 
```

我想要得到的结果很简单：

```
> groovy RestCli.groovy B
Calling: /rest/BB 
```

关于如何做到这一点的任何想法？

我实际上想避免创建一个 jar 文件，然后使用该`-classpath`选项，因为我也`@Grab`用来获取 http-builder，如果我使用，`-classpath`那么我会遇到这样的问题：`java.lang.NoClassDefFoundError: groovyx.net.http.HTTPBuilder`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T17:46:31.487

您可以将多个类放在一个 groovy 脚本中（不确定包如何/是否以这种方式工作），或者只是将包结构创建为与主脚本相同的文件夹中的目录结构。

在您的示例中，可能如下所示：

```
/
+ RestCli.groovy
+ restcli/
+--+ RestSuper.groovy
+--+ RestA.groovy
+--+ RestB.groovy 
```

然后你可以这样调用你的脚本：

```
> groovy RestCli.groovy B 
```

# c# - 如何检查对象的空值

> ID：16036700
> 
> 赞同：2
> 
> 时间：2013-04-16T12:09:48.997
> 
> 标签：c#, asp.net

我正在使用对象类型变量来存储查询结果以绑定到下拉列表。如果是，我不想对对象进行进一步处理`null`。

我的代码是：

```
object course;
if (GetWebsiteCurrentMode().ToLower() == "demo")
{
    course = from t in context.CourseTestDetails
            join c in context.Courses
            on t.CourseID equals c.ID                                  
            where t.UserID == UserID && c.IsDeleted == true
            select new
            {
                c.ID,
                c.CourseName
            };

}
else
{
    course = from t in context.CourseTestDetails
            join c in context.Courses
            on t.CourseID equals c.ID                                  
            where t.UserID == UserID  c.IsDeleted == false
            select new
            {
                c.ID,
                c.CourseName
            }
}
if(course !=null )
{
    ddlCourseName.DataSource = course;
    ddlCourseName.DataBind();

    ddlCourseName.Items.Insert(0, new ListItem("Select Course Name", "0"));
    ddlCourseName.SelectedValue = "0";
}
else
{
    //do something different
} 
```

如何检查对象类型变量是否为空/空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:14:54.680

您的对象`course`永远不会为空，它可能包含也可能不包含记录。由于您正在重新获取结果`object`，因此您应该将其转换为 IEnumerable `and use`Any` 以查看它是否包含记录。你可以试试：

```
if ((course as IEnumerable<object>).Any())
{
    //records found
}
{
    //no record found
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:16:43.533

```
if (course != null && (course as IEnumerable<object>).Any())
{
} 
```

可选：此外，您还应该检查对象是否实现了 IList 接口

```
if (course  is IList)
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:18:44.260

查询不为空，而是为空。但是由于您使用的是一个对象，所以您不能使用`Enumerable.Empty`. 您可以使用[E. Lippert](https://stackoverflow.com/a/8751779/284240)的以下技巧来获取多个的推断类型变量`IEnumerable<anynymous type>`：

使用此方法从匿名类型创建类型化变量：

```
static IEnumerable<T> SequenceByExample<T>(T t){ return null; } 
```

现在这有效：

```
var course = SequenceByExample(new { ID = 0, CourseName = "" } );
if (GetWebsiteCurrentMode().ToLower() == "demo")
{
    course = from t in context.CourseTestDetails
            join c in context.Courses
            on t.CourseID equals c.ID                                  
            where t.UserID == UserID && c.IsDeleted == true
            select new
            {
                c.ID,
                c.CourseName
            };
}
else
{
    course = from t in context.CourseTestDetails
    // ...
}
if(course.Any())
{
   // ...
}
else
{
    //do something different
} 
```

[在条件范围内声明一个隐式类型变量并在外部使用它](https://stackoverflow.com/a/8751779/284240)

这是一个简单的例子来证明它是有效的：http: [//ideone.com/lDNl4d](http://ideone.com/lDNl4d)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:19:31.260

```
var course = from t in context.CourseTestDetails
                 join c in context.Courses
                 on t.CourseID equals c.ID                                  
                 where t.UserID == UserID && c.IsDeleted == (GetWebsiteCurrentMode().ToLower() == "demo")
                 select new
                 {
                     c.ID,
                     c.CourseName
                  };

if (course.Any()) ... 
```

# sqlite - Qt 和 sqlite 错误 26

> ID：16036724
> 
> 赞同：1
> 
> 时间：2013-04-16T12:10:49.130
> 
> 标签：sqlite, qt

我尝试使用 Qt 打开一个 Sqlite 数据库来执行以下查询：

```
select name from sqlite_master where type = 'table'; 
```

并且数据库成功打开，但是当我执行查询时，出现错误 26: `file is encrypted or is not a database`。`sqlite`当我用命令行打开同一个数据库时，它工作正常。Qt版本为4.8.1，sqlite文件以`** This file contains an SQLite 2.1 database **`操作系统为Linux启动，安装的sqlite版本为2.8.17。

知道这有什么问题吗？

谢谢，f。

`Edit:`像这样打开它：

```
QSqlDatabase dbo = QSqlDatabase::addDatabase("QSQLITE", "connName");
dbo.setDatabaseName("/home/myself/test.sqlite");
dbo.open();
if(!dbo.isOpen())
{
    qDebug() << dbo.lastError();
    return;
}
QSqlQuery query(dbo);
bool ok = query.exec("select name from sqlite_master where type = 'table';");
if(!ok)
{ 
  //get error code, etc...
} 
```

这是不行的:(

`Edit2:`我尝试过使用不同的 sqlite 文件，该文件以：开头，`SQLite format 3`并且效果很好。似乎对 Sqlite 2 的开箱即用 Qt 支持没有按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:23:09.700

SQLite 3.x（包括在 Qt 中）无法打开 SQLite 2 文件。

SQLite 2 已经过时多年了。你应该升级你的数据库：

```
sqlite2 old-db.sqlite .dump > backupfile
sqlite3 new-db.sqlite < backupfile 
```

# javascript - 带有 Rails 和 Ancestry 的动态 javascript 下拉列表

> ID：16036732
> 
> 赞同：1
> 
> 时间：2013-04-16T12:11:06.517
> 
> 标签：javascript, ruby-on-rails, ancestry

我已经用 Ancestry 创建了完整的分类。问题是，我希望能够从下拉列表中进行选择。

当我在新动作上创建新产品时。我有产品名称、制造商等字段。并且还添加了显示所有类别的下拉选择，我的意思是，根类别、子类别和子子类别。看起来很不清楚，所以我想使用 Javascript 实现更好的东西。因此，首先我可以从根类别中进行选择。当我这样做时，会显示子类别等等。但无需重新加载页面。我怎样才能做到这一点？

示例在这里[http://www.plus2net.com/javascript_tutorial/dropdown-list-demo.php](http://www.plus2net.com/javascript_tutorial/dropdown-list-demo.php) 我查看过类似的问题 abaut 这种事情，但从来没有包含 Javascript。HAML 等。

但我正在学习过程中，所以任何建议都会很棒:)

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:24:36.823

[http://railscasts.com/episodes/102-auto-complete-association](http://railscasts.com/episodes/102-auto-complete-association)

[使用带有 rails 的 jquery 自动完成插件的示例](https://stackoverflow.com/questions/8656284/example-for-using-jquery-auto-complete-plugin-with-rails)

# bash - bash 将换行符替换为引号

> ID：16036744
> 
> 赞同：2
> 
> 时间：2013-04-16T12:11:32.820
> 
> 标签：bash, sed, awk

我有以下 CSV 文件：

```
"test","test2","test
3 and some other

data"
"test4","test5","test6 and some other

data" 
```

我想用字符替换所有换行符（windows或unix样式）`\n`，所以我会得到：

```
"test","test2","test\n3 and some other\n\ndata"
"test4","test5","test6 and some other\n\n\ndata" 
```

我试过`awk`但没有成功：

```
cat myFile.csv | awk -F \" -v OFS=\" '{
   for (i=0; i<NF; i++) {
      gsub("\\n", "\\\\n", $i)
   }
   print
}' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:21:05.070

这是一种方法：

```
$ awk '!/"$/{sub(/$/,"\\n");printf "%s",$0;next}1' file
"test","test2","test\n3 and some other\n\ndata"
"test4","test5","test6 and some other\n\n\ndata" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:12:45.883

这可能对您有用（GNU sed）：

```
sed -r ':a;/^("[^"]*",?){3}$/!{$!N;s/\n/\\n/;ta};P;D' file 
```

或在紧要关头：

```
 sed ':a;/"$/!{$!N;s/\n/\\n/;ta};P;D' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:16:56.887

这对你有用吗？具有相同想法的两条线

```
awk -v RS="\0"  '{gsub(/\n/,"\\n");sub(/\\n$/,"");gsub(/"\\n"/,"\"\n\"");}1' file 
```

或者

```
awk -v RS="\0" -v ORS="" '{gsub(/\n/,"\\n");sub(/\\n$/,"\n");gsub(/"\\n"/,"\"\n\"")}1' file 
```

使用您的数据：

```
kent$  cat file
"test","test2","test
3 and some other

data"
"test4","test5","test6 and some other

data" 
```

输出：

```
kent$  awk -v RS="\0" -v ORS="" '{gsub(/\n/,"\\n");sub(/\\n$/,"\n");gsub(/"\\n"/,"\"\n\"")}1' file
"test","test2","test\n3 and some other\n\ndata"
"test4","test5","test6 and some other\n\n\ndata" 
```

# javascript - 如何从 jquery 的文本区域中获取选定的文本？

> ID：16036745
> 
> 赞同：9
> 
> 时间：2013-04-16T12:11:36.713
> 
> 标签：javascript, jquery

如果我从文本区域中选择文本，我需要知道选择了哪个文本，例如“hello world”，如果我选择 hello，我想看到 hello 被选中我如何在 jquery 中执行此操作。我想让它变得大胆。

```
<textarea id="editor" cols="80" rows="20">
   Hello world, This is Me!
</textarea> 
<button onclick="SelectText()">
  Bold
</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T11:43:18.867

要将所选内容设为粗体，您不能直接在 textarea 中执行此操作，但您可以使用可编辑的 div 执行此操作。这个插件可以帮助你： http: [//mistic100.github.io/jquery-highlighttextarea/](http://mistic100.github.io/jquery-highlighttextarea/)

关于您的评论：“我怎样才能从 div 中获取所有文本，不包括 html 标签？” 你可以使用这样的东西：jQuery('.yourDiv').text();

# ruby-on-rails - Carrierwave 将 PDF 转换为 JPG (MiniMagick)

> ID：16036746
> 
> 赞同：1
> 
> 时间：2013-04-16T12:11:38.160
> 
> 标签：ruby-on-rails, carrierwave, minimagick

我在为 PDF 文件创建 JPG 缩略图时遇到问题。

我正在使用载波。Imagemagick 已正确安装。创建 PNG、JPG 或 GIF 文件的缩略图没有问题。

这是我使用的代码

```
version :thumb, :if => :image? do
    storage :file

        begin
            process :convert => 'jpg' # this should do the trick but doesn't
            process :resize_to_fill => [160,160]
            process :quality => 95
            process :set_content_type
            process :set_thumb_attr => true
            def full_filename (for_file = model.file.file) 
                "#{model.slug}-thumb.jpg" 
            end
        rescue Exception => e
            puts e.inspect
            true
        end
end

def set_thumb_attr(val)
    model.thumb = val
end

def image?(new_file)
    model.mime.include? 'image/' or model.mime.include? '/pdf'
end

def set_content_type(*args)
    self.file.instance_variable_set(:@content_type, "image/jepg")
end 
```

缩略图的内容表明创建的文件仍然是 PDF 文件。

> %PDF-1.3 1 0 obj << /Pages 2 0 R /Type /Catalog ...

我感谢任何建议/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:25:46.913

The problem was

```
process :quality => 95 
```

It reprocessed the PDF. Removing that line resolved my problem.

# c# - SSRS RDL 通过 C# 导出为 PDF

> ID：16036748
> 
> 赞同：5
> 
> 时间：2013-04-16T12:11:39.753
> 
> 标签：c#, pdf, reporting-services, pdf-generation

我们正在做一个 SSRS 项目，我们需要测试不同参数的报告。

因此，我想创建一个应用程序，它会使用参数自动将 rdl(SSRS) 转换为 pdf。

谢谢，基兰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:23:26.393

使用[`ReportExecutionService`](http://msdn.microsoft.com/en-us/library/cc282506.aspx)类。如果您有任何要设置的报告参数，请使用[`SetExecutionParameters()`](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.setexecutionparameters.aspx)和。方法页面底部的代码示例。[`Render()`](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render.aspx)`Format=PDF``Render`

# c# - 如何在 C# 中使用 XMLDocument 删除 XML 文件的第一行？

> ID：16036758
> 
> 赞同：28
> 
> 时间：2013-04-16T12:12:07.450
> 
> 标签：c#, asp.net, .net

我正在使用 C# 读取 XML 文件`XMLDocument`。我的代码是这样的：

```
XmlDocument doc = new XmlDocument();
doc.Load(xmlSourceFile); 
```

我的 XML 文档的第一行是

```
<?xml version="1.0" encoding="UTF-8"?> 
```

我必须删除这一行。我该怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-16T12:24:58.160

我不明白你为什么要删除它。但如果需要，你可以试试这个：

```
XmlDocument doc = new XmlDocument();
doc.Load("something");

foreach (XmlNode node in doc)
{
    if (node.NodeType == XmlNodeType.XmlDeclaration)
    {
        doc.RemoveChild(node);
    }
} 
```

或使用 LINQ：

```
var declarations = doc.ChildNodes.OfType<XmlNode>()
    .Where(x => x.NodeType == XmlNodeType.XmlDeclaration)
    .ToList();

declarations.ForEach(x => doc.RemoveChild(x)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-05-03T07:17:57.270

我需要一个没有声明头的 XML 序列化字符串，所以下面的代码对我有用。

```
StringBuilder sb = new StringBuilder();
XmlWriterSettings settings = new XmlWriterSettings {
    Indent = true,
    OmitXmlDeclaration = true, // this makes the trick :)
    IndentChars = "  ",
    NewLineChars = "\n",
    NewLineHandling = NewLineHandling.Replace
};
using (XmlWriter writer = XmlWriter.Create(sb, settings)) {
    doc.Save(writer);
}
return sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-13T11:29:31.703

或者，您可以使用它；

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(xml);
if (xmlDoc.FirstChild.NodeType == XmlNodeType.XmlDeclaration)
    xmlDoc.RemoveChild(xmlDoc.FirstChild); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-24T07:51:03.780

一个非常快速和简单的解决方案是使用类的[`DocumentElement`](https://msdn.microsoft.com/en-us/library/system.xml.xmldocument.documentelement(v=vs.110).aspx)属性`XmlDocument`：

```
XmlDocument doc = new XmlDocument();
doc.Load(xmlSourceFile);
Console.Out.Write(doc.DocumentElement.OuterXml); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-09T17:52:56.710

我理解消除 XML 声明的必要性；我正在编写一个更改应用程序内容的脚本，`preferences.xml`如果声明存在，则应用程序无法正确读取文件（不知道为什么开发人员决定省略 XML 声明）。

我不再搞乱 XML，而是创建了一个`removeXMLdeclaration()`方法来读取 XML 文件并删除第一行，然后简单地使用流读取器/写入器将其重写回来。它的速度快如闪电，而且效果很好！我只是在完成所有 XML 更改以一劳永逸地清理文件后调用该方法。

这是代码：

```
public void removeXMLdeclaration()
    {
        try
        {
            //Grab file
            StreamReader sr = new StreamReader(xmlPath);

            //Read first line and do nothing (i.e. eliminate XML declaration)
            sr.ReadLine();
            string body = null;
            string line = sr.ReadLine();
            while(line != null) // read file into body string
            {
                body += line + "\n";
                line = sr.ReadLine();
            }
            sr.Close(); //close file

            //Write all of the "body" to the same text file
            System.IO.File.WriteAllText(xmlPath, body);
        }
        catch (Exception e3)
        {
            MessageBox.Show(e3.Message);
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-17T18:07:21.050

还有另一种方法可以关闭此文件使用文件流。

```
public void xyz ()
{
       FileStream file = new FileStream(xmlfilepath, FileMode.Open, FileAccess.Read);
       XmlDocument doc = new XmlDocument();
       doc.load(xmlfilepath);

      // do whatever you want to do with xml file

      //then close it by 
      file.close();
      File.Delete(xmlfilepath);
} 
```

# c# - 查找 GridView 在运行时生成的特定单元格。

> ID：16036761
> 
> 赞同：0
> 
> 时间：2013-04-16T12:12:18.917
> 
> 标签：c#, javascript, jquery, asp.net, sql

我正在使用 UserControl（这是一个嵌套的 GridView）创建一堵墙，我想像 facebook 一样在向下滚动时加载 GridView 的行。我正在尝试实现此方法.. [单击此处](http://www.go4coding.com/post/2011/04/11/Auto-loading-content-on-page-scroll-in-aspnet-using-jquery.aspx)该示例似乎读取了最后一行的第一列以获取加载的最后一行并获取下一行。我在我的 UserControl 的 GridView 中添加了一个绑定字段，但我想我无法读取正确的值，因为我收到错误“输入字符串的格式不正确”。在 ..

```
 protected void btnGetMoreRecords_Click(object sender, EventArgs e)
    {
        //Fetch 14 records initially.
        dt = dbo.FetchNextProducts(Convert.ToInt32(hiddenLastProductID.Value), 14, 42); 
```

这是我的用户控件的aspx代码..

```
<asp:ScriptManager ID="sm1" runat="server">
        <Scripts>
            <asp:ScriptReference Path="~/ScriptsScroll/jquery-1.4.1.js" />
        </Scripts>
    </asp:ScriptManager>

    <div id="divProducts" style="height:700px;overflow-x:hidden;overflow-y: scroll;">

<table cellpadding="0" cellspacing="1" border="0">
    <tr>
        <td align="left">
            <asp:GridView ID="GridViewUserScraps" ItemStyle-VerticalAlign="Top" AutoGenerateColumns="False"
                GridLines="None" Width="100%" ShowHeader="False" runat="server" AlternatingRowStyle-BackColor="#A5A5A5"
                CellPadding="4" ForeColor="#333333" DataKeyNames="ScrapId" OnRowCommand="GridViewRowCommand">
                <Columns>

                    <asp:BoundField DataField="id" />

                    <asp:TemplateField>

                        <FooterTemplate>

                            <asp:LinkButton ID="LinkButton1" runat="server">Load More</asp:LinkButton>

                        </FooterTemplate>
                        <ItemTemplate>
                            <table align="left" cellpadding="1" cellspacing="2">
                                <tr>
                                    <td>
                                        <a href='<%#getUserHREF(Container.DataItem)%>'>
                                            <img align="middle" src='<%#getSRC(Container.DataItem)%>' border="0" width="50px" /></a>
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                            </table>
                            <div align="justify">
                                <b>
                                    <%#DataBinder.Eval(Container.DataItem,"firstname")%>
                                </b>
                                <br />
                                <%#DataBinder.Eval(Container.DataItem, "Message")%>
                                <br />
                                <asp:Image ID="Image" runat="server"  ImageUrl='<%# Eval("url") %>' style="max-width:500px;" />
                            </div>
                            <span class="SmallBlackText">Posted On: &nbsp;</span>
                            <asp:Label ID="lblSendDate" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SendDate")%>'></asp:Label>
                            </span>
                            <br />
                            <%-- <asp:LinkButton ID="lnklike" runat="server" 
                                CommandArgument="<%# ((GridViewRow) Container).RowIndex %>" 
                                CommandName="LikeCmd">Like</asp:LinkButton>
                            &nbsp;&nbsp;&nbsp;
                            <asp:LinkButton ID="lnkunlike" runat="server">unlike</asp:LinkButton>--%>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;
                            <asp:ImageButton ID="lnklike" runat="server" ImageUrl="~/Images/thumbsup.png" Height="20px"
                                Width="20px" CommandName="like" CommandArgument='<%# Eval("ScrapId")%>' />
                            <asp:UpdatePanel runat="server" ID="UpdatePanel" UpdateMode="Conditional">
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="lnklike" EventName="Click" />
                                </Triggers>
                                <ContentTemplate>
                                    &nbsp;<asp:Label ID="Label1" runat="server" Text='<%# Controls_GetUserScraps.abc((int)Eval("ScrapId")) %>' />
                                </ContentTemplate>
                            </asp:UpdatePanel>
                            <%--<asp:Label ID="Label1" runat="server" Text='<%# WebPageName.StaticMethodName((int)Eval("ScrapId")) %>' />--%>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:ImageButton ID="lnkunlike" runat="server" CommandArgument='<%# Eval("ScrapId")%>'
                                CommandName="unlike" Height="20px" ImageUrl="~/Images/thumbsdown.png" Width="20px" />
                            <asp:UpdatePanel runat="server" ID="UpdatePanel2" UpdateMode="Conditional">
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="lnkunlike" EventName="Click" />
                                </Triggers>
                                <ContentTemplate>
                                    &nbsp;<asp:Label ID="Label2" runat="server" Text='<%# Controls_GetUserScraps.xyz((int)Eval("ScrapId")) %>'></asp:Label>
                                    &nbsp;&nbsp;
                                </ContentTemplate>
                            </asp:UpdatePanel>
                            <asp:LinkButton ID="lnkcomment" runat="server">Comment</asp:LinkButton>
                            &nbsp;&nbsp;
                            <asp:LinkButton ID="lnkviewall" runat="server" CommandName="viewall" CommandArgument='<%# Eval("ScrapId")%>'>View All</asp:LinkButton>
                            <br />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:Panel ID="Pnlchildgrid" runat="server">
                                <asp:GridView ID="childgrid" runat="server" AutoGenerateColumns="False" OnRowCommand="childgrid_RowCommand"
                                    Style="width: 450px; float: right;">
                                    <Columns>
                                        <asp:TemplateField>

                                            <ItemTemplate>
                                                <table align="left" cellpadding="1" cellspacing="2">
                                                    <tr>
                                                        <td>
                                                            <a href='<%#getUserHREF(Container.DataItem)%>'>
                                                                <img align="middle" src='<%#getSRC(Container.DataItem)%>' border="0" width="30px" /></a>
                                                        </td>
                                                        <td>
                                                            &nbsp;
                                                        </td>
                                                    </tr>
                                                </table>
                                                <div align="justify">
                                                    <b>
                                                        <%#DataBinder.Eval(Container.DataItem, "firstname")%></b><br />
                                                    <%#DataBinder.Eval(Container.DataItem, "commentmsg")%>
                                                    <br />
                                                </div>
                                                <span class="SmallBlackText">Posted On: &nbsp;</span>
                                                <asp:Label ID="lblSendDate" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"SendDate")%>'></asp:Label>
                                                </span>
                                                <br />
                                                <asp:ImageButton ID="lnklike" runat="server" Height="20" Width="20" CommandName="childlike"
                                                    CommandArgument='<%# Eval("commentid")%>' ImageUrl="~/Images/thumbsup.png" />
                                                &nbsp;
                                                <asp:Label ID="Label1" runat="server" Text='<%# Controls_GetUserScraps.abc1((int)Eval("commentid")) %>' />
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <asp:ImageButton ID="lnkunlike" runat="server" CommandArgument='<%# Eval("commentid")%>'
                                                    CommandName="childunlike" Height="20" ImageUrl="~/Images/thumbsdown.png" Width="20" />
                                                &nbsp;<asp:Label ID="Label2" runat="server" Text='<%# Controls_GetUserScraps.xyz1((int)Eval("commentid")) %>'></asp:Label>
                                                &nbsp;&nbsp;
                                                <%--  <asp:LinkButton ID="lnkcomment" runat="server">Comment11111</asp:LinkButton>--%>
                                                <br />
                                            </ItemTemplate>
                                        </asp:TemplateField>
                                    </Columns>
                                </asp:GridView>
                                <br />
                                <asp:Panel ID="Panel1" runat="server">

                                    <asp:TextBox ID="txtcomment" runat="server" Width="500px" ></asp:TextBox>
                                    <asp:Button ID="Button1" runat="server" Text="Comment" CommandName="comment" CommandArgument='<%# Eval("ScrapId")%>' />
                                </asp:Panel>
                            </asp:Panel>
                            <br />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
                <RowStyle BackColor="#EFF3FB" />
                <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                <EditRowStyle BackColor="#2461BF" />
                <AlternatingRowStyle BackColor="White" />
            </asp:GridView>
        </td>
    </tr>
    <tr>
        <td align="left">
            &nbsp;
        </td>
    </tr>
</table>
</div>

<div><asp:HiddenField runat="server" ID="hiddenLastProductID" />
        <asp:Button runat="server" Text="Get More records" ID="btnGetMoreRecords" 
            onclick="btnGetMoreRecords_Click" />
    </div>
    <div id="divProgress" style="margin-top: -50px;margin-left:150px;z-index:-999">
            <img src="../loading.gif" width="100" height="100" alt="" />
    </div>
    <div>
    </div>
    <script type="text/javascript">

        var previousProductId = 0;
        //Max records to display at a time in the grid.
        var maxRecordsToDisplay = 30;

        $(document).ready(function () {

            //initially hide the loading gif
            $("#divProgress").hide();

            //initially hide the button
            $("#btnGetMoreRecords").hide();

            //Attach function to the scroll event of the div
            $("#divProducts").scroll(function () {
                var scrolltop = $('#divProducts').attr('scrollTop');
                var scrollheight = $('#divProducts').attr('scrollHeight');
                var windowheight = $('#divProducts').attr('clientHeight');
                var scrolloffset = 20;
                if (scrolltop >= (scrollheight - (windowheight + scrolloffset))) {

                    //User has scrolled to the end of the grid. Load new data..
                    $("#divProgress").ajaxStart(function () {
                        $(this).show();
                    });
                    $("#divProgress").ajaxStop(function () {
                        $(this).hide();
                    });
                    BindNewData();

                }
            });

        });
        function BindNewData() {
            //           
            var lastProductId = $("#<%=GridViewUserScraps.ClientID %> tr:last").children("td:first").html();

            //get last table row in order to append the new products
            var lastRow = $("#<%=GridViewUserScraps.ClientID %> tr:last");

            //Fetch records only when the no. of records displayed in the grid are less than limit.
            if (GetRowsCount() < maxRecordsToDisplay) {
                if (parseInt(lastProductId, 10) > parseInt(previousProductId, 10)) {
                    previousProductId = lastProductId;

                    $.post("FetchRecordsHandler.ashx?lastProductId=" + lastProductId, function (data) {
                        if (data != null) {
                            //append new products rows to last row in the gridview.
                            lastRow.after(data);
                        }
                    });
                }
            }
            else {

                //Set value of last product id in hidden field so that we can access it from code behind.
                $("#hiddenLastProductID").val(lastProductId);
                //Check If there is more records in the database
                if (parseInt(lastProductId, 10) > parseInt(previousProductId, 10))
                    $("#btnGetMoreRecords").show();
            }

        }

        function GetRowsCount() {
            //Count no. of rows except header row in the grid.
            //var rowCount = $('#GridView1 tr').length - 1;
            var rowCount = $('[id*=GridViewUserScraps]  tr');
            return rowCount;

        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:24:40.673

首先，我会尝试更改此 js 行

```
$("#hiddenLastProductID").val(lastProductId); 
```

经过

```
$("#<%= hiddenLastProductID.ClientID %>").val(lastProductId); 
```

或者您可以将隐藏字段的[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)设置为[Static](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)

```
<asp:HiddenField runat="server" ID="hiddenLastProductID" ClientIDMode="Static" /> 
```

# python - python线程连接没有正确发生

> ID：16036762
> 
> 赞同：2
> 
> 时间：2013-04-16T12:12:21.060
> 
> 标签：python, multithreading

```
import threading
import Queue

q = Queue.Queue()
class Worker( threading.Thread ):
    def __init__( self, q ):
        threading.Thread.__init__( self )
        self.q = q

    def run( self ):
        while True:
            print '%s waiting for data' % self.getName()
            data = self.q.get()
            print '%s data fetched from queue %s' % ( self.getName(), data )
            if data == 'shutdown':
                print '%s shutting down in %s' % ( self.getName(), self )
                return
            print '%s received a message: %s' % ( self.getName(), data )

    def stop( self ):
        self.q.put( "shutdown" )

#        self.join()  # If I uncomment this line, then sometimes the program does not complete.

def broadcast_event( data ):
    q.put( data )

t1 = Worker( q )
t2 = Worker( q )
t1.start()
t2.start()
broadcast_event( "first event" )
broadcast_event( "second event" )

t1.stop()
t2.stop() 
```

我试图理解 python 中的线程，但我被困在多线程队列示例中。我正在尝试做的事情：-

1.  使用单个队列对象创建 2 个线程
2.  现在，我将 2 个不同的数据条目放入队列中（使用`broadcast_event`函数）
3.  现在，在 stop 方法中，有一个注释行，我将线程加入到主程序中。

但是，当我取消注释该`self.join`行时，程序挂断并永远运行。但是，如果我删除`self.join`，它会完美运行。

我想了解我如何尝试使用加入是否有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:20:04.687

你的问题是两个线程都使用同一个队列。死锁场景是：

1.  主线程`'shutdown'`发送`t1.stop()`
2.  `t2`读`'shutdown'`自`q`
3.  主线程 joins `t1`，它永远等待新消息。

您可以通过创建 2 个队列或执行前两条`shutdown`消息然后执行两个连接来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:25:18.067

问题是您有两个线程使用一个队列。当您`put`在队列中有一条消息时，您无法判断哪个线程将*使用*它。当您调用`stop()`，添加`"shutdown"`到队列中时，它可能会被任何线程消耗，不一定是您想要的线程。

结果可能是另一个线程正在退出，而您`join`输入了错误的线程。

一种可能的解决方案是先将`shutdown`队列放入 N 次（N = 线程数），然后将它们全部加入。

```
for i in range(N):
  q.put("shutdown")
for t in threads:
  t.join() 
```

一个更好、更健壮的解决方案是避免通过队列传递关闭消息。您可以`self.should_stop`为此使用一个属性，定期在`run`.

# bash - 使用四舍五入的毫秒 Bash Shell 脚本从时间戳获取格式化日期

> ID：16036763
> 
> 赞同：31
> 
> 时间：2013-04-16T12:12:24.350
> 
> 标签：bash, date, timestamp

我需要以特定格式获取日期，但不知道该怎么做。

这是我目前获取日期的方式。

```
date -r "$timestamp" +'%Y-%m-%dT%H:%M:%S.s' 
```

但是问题是毫秒对于我需要的格式有太多数字。我需要将毫秒限制为 3 位数。

知道我怎么能做这样的事情吗？

**当前的解决方法**

不准确，但有效。之后我计算毫秒，然后只取字符串的前三个字符。显然，这没有考虑四舍五入。

```
date_string_one=`date -r "$timestamp" +'%Y-%m-%dT%H:%M:%S.'`
date_string_milli=`date -r "$timestamp" +'%s'`
date_string="$date_string_one"`printf "%.3s" "$date_string_milli"` 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-01-08T15:04:09.920

您可以简单地使用`%3N`将纳秒截断为 3 个最高有效数字：

```
$ date +"%Y-%m-%d %H:%M:%S,%3N"
2014-01-08 16:00:12,746 
```

或者

```
$ date +"%F %T,%3N"
2014-01-08 16:00:12,746 
```

testet 与 »GNU bash，版本 4.2.25(1)-release (i686-pc-linux-gnu)«

但请注意，根据您的目标系统或 bash 版本，可能无法实现 %N。在嵌入式系统上测试 »GNU bash，版本 4.2.37(2)-release (arm-buildroot-linux-gnueabi)« 没有`%N`：

```
date +"%F %T,%N"
2014-01-08 16:44:47,%N 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T12:35:33.913

百万种方法可以做到这一点..一种简单的方法是删除尾随数字...

```
date +'%Y-%m-%d %H:%M:%S.%N' | sed 's/[0-9][0-9][0-9][0-9][0-9][0-9]$//g' 
```

或者

```
date +'%Y-%m-%d %H:%M:%S.%N' | sed 's/......$//g' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-03T03:41:08.297

我忍不住提供了一个“便宜”的解决方案......

```
echo $(date +"%Y-%m-%d-%H:%M:%S.")$((RANDOM%1000)) 
```

毕竟，如果准确性不如唯一性重要，就像在我的情况下......在这里你有它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-17T10:21:27.417

```
str="2013-04-05 13:33:53.180"

dateStr1=`date -d "$str" +'%Y-%m-%d %H:%M:%S.%N'`;

echo $dateStr1

dateStr2=`date -d "$dateStr1" +'%s'`

echo $dateStr2

dateStr3="$dateStr2"`echo ${dateStr1:20:3}`

echo $dateStr3

============================

[Output]
2013-04-05 13:33:53.180000000
1365140033
1365140033180 
```

（以上考虑UTC中的datestr）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-15T15:04:11.397

最好的方法是使用 python 命令。

```
$ python -c "from datetime import datetime; print datetime.utcnow().strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]"
2017-02-15 15:03:03.496 
```

然后你可以在你里面创建一个别名`~/.profile`

```
$ alias datetime='python -c python -c "from datetime import datetime;...' 
```

甚至创建一个shell函数

```
datetime(){
  python -c python -c "from datetime import datetime;...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T13:53:05.143

想不出没有几个步骤的方法，但这会让你到达那里：

```
d=$(date +'%Y-%m-%d %H:%M:%S|%N')
ms=$(( ${d#*|}/1000000 ))
d="${d%|*}.$ms"
echo $d

2013-04-16 08:51:48.874 
```

由于所有组件都是从单个调用中获取的，因此它们将是一致的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T13:02:20.727

一个问题：`%s`不是毫秒的日期格式，它是当前纪元的秒数​​。%N 给出纳秒，我不知道 GNU 日期的指定日期格式，它给出毫秒。

尝试`date --help` 查看所有格式选项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T14:49:41.927

用于`printf`进行实际格式化；用于`date`产生参数集 `printf`需要填充格式字符串。

```
printf '%04d-%02d-%02dT%02d:%02d:%02d.%03d' \
        $(date -r "${timestamp%.*}" +"%Y %m %d %H %M %S")\
        $(( ${timestamp#*.} / 1000 )) 
```

在上面，我假设您的时间戳看起来像“blahblahblah.728239”。结果是`printf`like `2013 04 16 11 03 17 728`to generate的一组参数`2013-04-16T11:03:17.728`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-08T08:49:46.357

要将特定时间戳转换为指定格式的日期字符串，您可以使用：

```
TIMESTAMP=...
date -d @$TIMESTAMP +'%Y-%m-%d %H:%M:%S' 
```

但是，此命令在 MacOS 上不起作用。为了使它在 Linux 和 MacOS 上都能运行，我使用了以下内容：

```
TIMESTAMP=...
if [ "$(uname)" == "Darwin" ]; then
  # running on MacOS
  date -r $TIMESTAMP +'%Y-%m-%d %H:%M:%S'
else
  # running on Linux
  date -d @$TIMESTAMP +'%Y-%m-%d %H:%M:%S'
fi 
```

# java - 第二个窗口中的 Java Canvas 错误焦点或动作侦听器

> ID：16036772
> 
> 赞同：0
> 
> 时间：2013-04-16T12:13:15.347
> 
> 标签：java, focus, awt, java-canvas, bufferstrategy

我创建了 2 个框架：

在第一帧 - 我制作了一个按钮，将我移动到由在 Canvas 之后扩展的类创建的第二帧，并且在从第一帧移动到第二帧之后，我失去了动作监听器或焦点

这里的第一个窗口：

```
public class Credits extends JFrame {

public Credits() {
    super("Credits");
    setSize(300, 200);
    setLayout(new BorderLayout());

    JButton ok = new JButton("GAME");

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setResizable(false);
    this.add(ok);
    setVisible(true);

    ok.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            dispose();
            new WojnaSwiatow().game();

        }
    });

}

public static void main(String []args ) {
    SwingUtilities.invokeLater(new Runnable(){

        @Override
        public void run()
        {
           new Credits();
        }

    });
}
} 
```

第二帧：

```
public class WojnaSwiatow extends Canvas implements Stage, KeyListener {/**
 * @param args the command line arguments
 */

    createBufferStrategy(2);
    strategia = getBufferStrategy();
    requestFocus();

    requestFocusInWindow(true);
    addKeyListener(this);
    okno.addKeyListener(this);
    okno.pack();
    okno.setVisible(true);

public long usedTime;
public BufferStrategy strategia;
private SpriteCache spriteCache;
private ArrayList actors;
private Player player;

public WojnaSwiatow(){

    spriteCache = new SpriteCache();
    JFrame okno = new JFrame("..:Wojna Swiatow :..");
    JPanel panel = (JPanel)okno.getContentPane();
    setBounds(0,0,Stage.SZEROKOSC,Stage.WYSOKOSC);

    panel.setPreferredSize(new Dimension(Stage.SZEROKOSC,Stage.WYSOKOSC));
    panel.setLayout(null);
    panel.add(this);

    okno.setBounds(0,0,Stage.SZEROKOSC,Stage.WYSOKOSC);
    okno.setVisible(true);
    okno.setResizable(false);
    okno.setLocationRelativeTo(null);

    okno.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent e){
            System.exit(0);
        }
    }); 
```

也许问题出在缓冲策略上？

# apache-flex - 如何在 Flex 中的某行之前拖动和停止面板？

> ID：16036774
> 
> 赞同：1
> 
> 时间：2013-04-16T12:13:22.627
> 
> 标签：apache-flex, draggable, panel, drag

我正在尝试拖动我的面板并在某行之前停止我的面板。我不知道该怎么做。让我用我的代码解释一下（它不起作用）：

```
//MyPanel
<s:Panel                                                                         
  mouseMove="rectangle_mouseMoveHandler(event)"
  width="30" height="30" id="panel" backgroundAlpha="0.2" 
  mouseDown="onMouseDown(event)" mouseUp="onMouseUp(event)"                              
  skinClass="intetech.PanelNoTitleBar" backgroundColor="blue">                                                      
</s:Panel>

//rectangle_mouseMoveHandler
protected function rectangle_mouseMoveHandler(event:MouseEvent):void
    {

        if ((panel.x+panel.width)>=(minimap.x+minimap.width)){
            panel.x = (minimap.x+minimap.width-panel.width+0.001);              
        }
        trace("panel.x = "+panel.x);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:22:36.797

您可以使用相对于 Sprite 父级坐标的边界来指定 Sprite 的约束矩形：

```
protected function panel_mouseUpHandler(event:MouseEvent):void
{
    panel.stopDrag();
}

protected function panel_mouseDownHandler(event:MouseEvent):void
{
    panel.startDrag(false, new Rectangle( 0,0, 500, 300));
}

//...

<s:Panel id="panel" width="300" height="200" mouseUp="panel_mouseUpHandler(event)" mouseDown="panel_mouseDownHandler(event)"/> 
```

# php - 如何获取和更改 URL 变量 PHP

> ID：16036775
> 
> 赞同：25
> 
> 时间：2013-04-16T12:13:30.620
> 
> 标签：php, html, hyperlink

嗨，任何人都可以帮我解决这个问题，我有一个类似的网址

```
parent/child/a=1&b=2$c=3 
```

然后我有一个链接可以将变量添加到该 URL

```
<a href="<?php echo $_SERVER["REQUEST_URI"]."&d=test1";?>">LINK 1</a>
<a href="<?php echo $_SERVER["REQUEST_URI"]."&d=test2";?>">LINK 2</a> 
```

每次我点击我的链接时，变量 d 到 URL 都会像这样继续复制

```
parent/child/a=1&b=2&c=3&d=test2&d=test2&d=test2&d=test1&d=test1 
```

我知道 $_SERVER["REQUEST_URI"] 不断获取当前 URL，这就是我得到该结果的原因。我已经尝试了 $_SERVER[""] 的一些属性。我喜欢的是改变 d 变量值，知道怎么做。任何回应都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-05-15T06:20:45.000

```
$query = $_GET;
// replace parameter(s)
$query['d'] = 'new_value';
// rebuild url
$query_result = http_build_query($query);
// new link
<a href="<?php echo $_SERVER['PHP_SELF']; ?>?<?php echo $query_result; ?>">Link</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T12:36:05.597

试试下面的表达式，它应该工作

```
preg_replace("#&d=.*&#", '&d=newvalue&', $_SERVER['REQUEST_URI']) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T12:23:58.957

要删除重复添加查询参数，请执行以下操作

```
// parse the url
$pathInfo = parse_url($_SERVER['REQUEST_URI']);
$queryString = $pathInfo['query'];
// convert the query parameters to an array
parse_str($queryString, $queryArray);
// add the new query parameter into the array
$queryArray['d'] = 1;
// build the new query string
$newQueryStr = http_build_query($queryArray);

// construct new url
?>
<a href="<?php echo $pathInfo['host'].'?'.$newQueryStr;?>">LINK 1</a> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-27T20:27:17.327

```
modify_url_query($url, array('limit' => 50)); 
```

我在 url 中修改查询的功能

```
function modify_url_query($url, $mod){

$purl = parse_url($url);

$params = array();

if (($query_str=$purl['query']))
{
    parse_str($query_str, $params);

    foreach($params as $name => $value)
    {
        if (isset($mod[$name]))
        {
            $params[$name] = $mod[$name];
            unset($mod[$name]);
        }
    }
}        

$params = array_merge($params, $mod);

$ret = "";

if ($purl['scheme'])
{
    $ret = $purl['scheme'] . "://";
}    

if ($purl['host'])
{
    $ret .= $purl['host'];
}    

if ($purl['path'])
{
    $ret .= $purl['path'];
}    

if ($params)
{
    $ret .= '?' . http_build_query($params);
}    

if ($purl['fragment'])
{
    $ret .= "#" . $purl['fragment'];
}        

return $ret;

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-11T14:29:06.737

```
function replaceUrlParameters($url = '', $newParams = array()){
    if($url){
        $urlArray = parse_url($url);
        $queryString = $urlArray['query'];
        parse_str($queryString, $queryParams);
        $queryParams = array_merge($queryParams, $newParams);
        $urlArray['query'] = http_build_query($queryParams);

        if(!empty($urlArray)){
            $url = $urlArray['scheme'].'://'.$urlArray['host'].$urlArray['path'].'?'.$urlArray['query'];
        }
    }
    return $url;
}
// $newParams = array of new parameters or old parameters with new value
$replacedUrl = replaceUrlParameters($url, $newParams); 
```

假设您有类似 :- 的 url，`<?php echo $_SERVER["REQUEST_URI"]."&a=test1&b=test2";?>`并且您想将参数 b 的值替换为 test3，然后只需将此 url 和具有相同索引的数组传递给新值。对于前`<?$url = $_SERVER["REQUEST_URI"]."&a=test1&b=test2";?> <? $newParams = ['b' => 'test3']?>`-然后你会得到-`<? $_SERVER["REQUEST_URI"]."&a=test1&b=test3";?>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:17:01.113

在这里你没有照顾双引号。将其替换为以下代码，然后检查。

```
<a href="<?php echo 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'].'&d=test1';?>">LINK 1</a> 
```

并且还要在萤火虫中检查每次在 href 中的 URL 是什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-30T10:51:24.247

自己还是找不到合适的解决方案，所以创建了一个..

```
static function changeParameters($url, $parameters)
{
    $urlParts = parse_url($url);

    $url = "";

    if (isset($urlParts['scheme'])) {
        $url .= $urlParts['scheme'] . "://";
    }

    if (isset($urlParts['host'])) {
        $url .= $urlParts['host'];
    }

    if (isset($urlParts['path'])) {
        $url .= $urlParts['path'];
    }

    $query = isset($urlParts['query']) ? $urlParts['query'] : "";

    $urlParameters = explode("&", $query);

    $urlParameterValuesByKey = new stdClass();

    foreach ($urlParameters as $urlParameter) {
        $equalsIndex = strrpos($urlParameter, "=");

        if ($equalsIndex) {
            $urlParameterValuesByKey->{substr($urlParameter, 0, $equalsIndex)} = substr($urlParameter, $equalsIndex + 1);
        } else {
            $urlParameterValuesByKey->{$urlParameter} = null;
        }
    }

    foreach ($parameters as $key => $value) {
        if(!is_string($value)) {
            unset($urlParameterValuesByKey->{$key});
        } else {
            $urlParameterValuesByKey->{$key} = $value;
        }
    }

    $query = "";

    foreach ($urlParameterValuesByKey as $key => $value) {
        if (strlen($query) === 0) {
            $query .= "?";
        }

        if (strlen($query) > 1) {
            $query .= "&";
        }
        if (is_string($value)) {
            $query .= $key . "=" . $value;
        } else {
            $query .= $key;
        }
    }

    $url .= $query;

    return $url;
} 
```

使用 stdClass 而不是关联数组，因为关联数组在设置键之前为键做了一些时髦的事情，如此处[所述](https://www.php.net/manual/en/language.types.array.php)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-04T17:50:49.787

```
//for absolute path of the page. 
$actual_link = (isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http") . "://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]"; 
//first delete the param 
$url = str_replace('&d='.$_GET["d"], '', $actual_link); 
//Now add this param again with it new value
$newUrl=$url.'&d=NewValueHere';
echo '<a href="'.$newUrl.'">Refresh to get new param value</a>'; 
```

# c# - 位掩码 IntPtr

> ID：16036783
> 
> 赞同：1
> 
> 时间：2013-04-16T12:13:49.920
> 
> 标签：c#, bitmask, intptr

如何使用 Binary-AND 检查是否为`IntPtr`对象设置了特定位？

我正在调用`GetWindowLongPtr32()`API 来获取窗口的窗口样式。这个函数恰好返回一个 IntPtr。我已经在我的程序中定义了所有的标志常量。现在假设如果我想检查是否设置了特定标志（比如`WS_VISIBLE`），我需要将它与我的常量进行二进制和，但我的常量是`int`类型的，所以我不能直接这样做。尝试调用`ToInt32()`并且`ToInt64()`都导致 (ArgumentOutOfRangeException) 异常。我的出路是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:27:41.713

只需转换`IntPtr`为`int`（它有一个转换运算符）并使用逻辑位运算符来测试位。

```
const int WS_VISIBLE = 0x10000000;
int n = (int)myIntPtr;
if((n & WS_VISIBLE) == WS_VISIBLE) 
    DoSomethingWhenVisible()` 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T12:39:12.403

[如何在 32 位平台上调用 GetWindowLongPtr 和 SetWindowLongPtr？](https://stackoverflow.com/questions/3343724/how-do-i-pinvoke-to-getwindowlongptr-and-setwindowlongptr-on-32-bit-platforms)

```
public static IntPtr GetWindowLong(HandleRef hWnd, int nIndex)
{
    if (IntPtr.Size == 4)
    {
        return GetWindowLong32(hWnd, nIndex);
    }
    return GetWindowLongPtr64(hWnd, nIndex);
}

[DllImport("user32.dll", EntryPoint="GetWindowLong", CharSet=CharSet.Auto)]
private static extern IntPtr GetWindowLong32(HandleRef hWnd, int nIndex);

[DllImport("user32.dll", EntryPoint="GetWindowLongPtr", CharSet=CharSet.Auto)]
private static extern IntPtr GetWindowLongPtr64(HandleRef hWnd, int nIndex); 
```

[GetWindowLong(int hWnd, GWL_STYLE) 在 c# 中返回奇怪的数字](https://stackoverflow.com/questions/1271220/getwindowlongint-hwnd-gwl-style-return-weird-numbers-in-c-sharp)

您可以隐式`IntPtr`转换为`int`来获得结果。

```
var result = (int)GetWindowLong(theprocess.MainWindowHandle, GWL_STYLE);
bool isVisible = ((result & WS_VISIBLE) != 0); 
```

# ftp - 使用 CRON 的文件夹的 FTP 内容

> ID：16036785
> 
> 赞同：0
> 
> 时间：2013-04-16T12:13:55.390
> 
> 标签：ftp, cron

我对脚本没有太多经验，但我的任务是创建一个。我现在每天从 cron 运行一个脚本。脚本 (.sh) 是：

```
/usr/local/bin/ncftpput -f saxlogin.cfg /MTM/PH /mnt/zeus/scripts/xml/pph/2013.04.15/* 
```

脚本运行良好，但我要做的是每天更改脚本以反映今天的日期（2013.04.15）。有没有办法将其设置为自动更改但保留 YMD 的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:39:17.343

`date +"%Y.%m.%d"`在你的路径定义中使用怎么样？

```
/usr/local/bin/ncftpput -f saxlogin.cfg /MTM/PH /mnt/zeus/scripts/xml/pph/`date +"%Y.%m.%d"`/* 
```

# internet-explorer - 响应式媒体查询 IE

> ID：16036794
> 
> 赞同：0
> 
> 时间：2013-04-16T12:14:17.640
> 
> 标签：internet-explorer, media-queries

我在 Wordpress 上有一个响应式网站，除了在 IE 浏览器中之外，它在所有平台上都运行良好。

为了解决 IE 的响应问题，我使用了一个名为 respond.js 的插件，它非常棒，可以将我的媒体查询从我的主样式表引入 IE。

我的问题是 IE 中有一些元素丢失或 div 位置改变。现在我听说您可以为浏览器调用单独的 ie 样式表，但我遇到了一些问题。

加载时，您可以看到标签：

`<!--[if lt IE]> <![endif]-->`在实际的网站副本中。

当我使用不同的背景颜色进行测试时，ie 样式表确实会加载，但在该样式表中没有媒体查询起作用。当我的浏览器变小并且宽度为 100% 时，我会丢失一些重要的 div，并且我无法更改我原来的样式表，因为它在其他浏览器中是可以的。

我真的希望这是有道理的，下面是我的元素在我的标题中的位置：

```
<link rel="stylesheet" type="text/css" href="<?php echo get_stylesheet_uri(); ?>" />
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/media-queries.css"/>

<!--[if lt IE]>
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo('template_directory'); ?>/ie.css"/>
<![endif]-->

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script src="<?php echo get_stylesheet_directory_uri(); ?>/js/respond.min.js"></script>
<script src="<?php echo get_stylesheet_directory_uri(); ?>/js/placeholder.js"></script>
<script src="http://malsup.github.com/jquery.cycle2.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:19:14.637

我将我的 ie 链接样式表更改为：

```
<!--[if IE]>
<link rel="stylesheet" href="<?php bloginfo('template_directory'); ?>/ie.css" type="text/css" />
<!![endif]--> 
```

并且工作正常！

# apex - 公司名称的模糊逻辑/匹配（潜在客户）

> ID：16036795
> 
> 赞同：1
> 
> 时间：2013-04-16T12:14:21.303
> 
> 标签：apex, fuzzy-logic

我看过使用 De-Duping 工具的传统方法，但是因为我为一个多联盟的组织工作，所以当我实际上需要查看数据库的各个部分时，De-duping 工具会查看整个数据库，所以我决定尝试创建我自己的重复数据删除工具。

到目前为止，我已经创建了以下 apex 。顶点当前查看潜在客户上的公司名称，如果与数据库中的另一个公司名称完全匹配，它会向用户提供错误消息“另一个新潜在客户具有相同的公司名称”</p>

如果公司名称准确，那就太好了，但是我需要它更灵活。

> > 例如，如果“汉堡王有限公司”是 2012 年创建的潜在客户，而卖家决定在 2013 年创建一个名为“汉堡王有限公司”的潜在客户，这与 2012 年创建的潜在客户是同一家公司。

我想建立一个模糊逻辑，查看新线索，如果有轻微相似之处，则忽略新线索

```
Trigger DuplicateLeadPreventer on Lead
                               (before insert, before update) {

//Get map of record types we care about from Custom Setting
 Map<String, Manage_Lead_Dupes_C__c> leadrtmap = Manage_Lead_Dupes_C__c.getAll();

 //Since only certain leads will match, put them in a separate list
 List<Lead> LeadstoProcess = new List<Lead> ();

 //Company to Lead Map
 Map<String, Lead> leadMap = new Map<String, Lead>();

    for (Lead lead : Trigger.new) {

     //Only process for Leads in our RecordTypeMap
         if (leadrtmap.keyset().contains(lead.RecordTypeId) ) {

        // Make sure we don't treat an Company name that 
       // isn't changing during an update as a duplicate. 

              if (
                 (lead.company != null) &&
                 (Trigger.isInsert ||
                 (lead.company != Trigger.oldMap.get(lead.Id).company))
                 ) 
                 {

                    // Make sure another new lead isn't also a duplicate 

                        if (leadMap.containsKey(lead.company)) {
                            lead.company.addError('Another new lead has the '
                                            + 'same company name.');
                        } else {
                            leadMap.put(lead.company , lead);
                            LeadstoProcess.add(lead);
                        }
                }
    } //end RT If Check
    } //End Loop

    /*
     Using a single database query, find all the leads in 
     the database that have the same company address as any 
     of the leads being inserted or updated. 

   */

    Set<String> ExistingCompanies = new Set<String> ();

            for (Lead l: [Select Id, Company from Lead WHERE Company IN :leadMap.keyset()
                             AND RecordTypeId IN :leadrtmap.keyset()]) {
                          ExistingCompanies.add(l.Company);
                }

    //Now loop through leads to process, since we should only loop if matches
    for (Lead l : LeadstoProcess) {
        if (ExistingCompanies.contains(l.company) ) {
             l.company.addError('A lead with this company '
                               + 'name already exists.');
        }
    }
} 
```

# eclipse - 调试 EAR 应用程序？

> ID：16036797
> 
> 赞同：1
> 
> 时间：2013-04-16T12:14:26.210
> 
> 标签：eclipse, ant, jboss5.x, ear

我对 EAR 应用程序很陌生。我正在尝试修复代码中的一些问题。我正在使用 ANT 与 JBoss 5.1.0.GA 一起构建应用程序。如何在 Eclipse 中执行诸如在服务器上运行、在服务器上调试之类的操作？

当我右键单击在服务器上运行/在服务器上调试时。我收到一个服务器错误弹出消息：选择不包含任何可以在服务器上运行的资源。

我怎样才能让它在eclipse中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:17:58.627

您应该远程调试您的应用程序。请参阅有关如何使用 Eclipse 和 JBoss 设置远程调试器的问题：

[https://stackoverflow.com/a/516214/89435](https://stackoverflow.com/a/516214/89435)

# android - Facebook Android SDK 登录失败，出现 facebook.apk

> ID：16036798
> 
> 赞同：0
> 
> 时间：2013-04-16T12:14:26.483
> 
> 标签：android, facebook

我正在开发一个需要 facebook 登录的 android 应用程序。我正在使用 facebook SDK for android。如果手机中没有安装android的facebook，该应用程序可以正常工作，但如果安装了则无法登录，它只是要求确认，但按OK后什么也不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:45:33.670

从 Facebook 应用程序捕获返回信息时，听起来好像有问题。

检查您的活动`onHandleIntent(Intent arg0)`或`onActivityResult(int requestCode, int resultCode, Intent data)`

# c++ - 在 C++ 的内部类中使用单例

> ID：16036799
> 
> 赞同：2
> 
> 时间：2013-04-16T12:14:30.757
> 
> 标签：c++, singleton

感谢大家帮助我^^我的问题已经解决了！

当我使用 C++ 语言在内部类中使用 Singleton 时遇到问题。请帮助我，并为我的英语不好感到抱歉。

```
class A: public AA
{
    class InnerA
    {
        private:
            static InnerA* _innerA;
        public:
            ~InnerA();
            void Release();

            static InnerA* GetInstance()
            {
                if (_innerA == NULL)
                {
                    static InnerA static_instance;
                    _innerA = &static_instance;
                }
                return _innerA ;
            };
..... 
```

编译后控制台显示以下错误：

```
undefined reference to `A::InnerA::_innerA' 
```

我也像下面的代码一样修改，但我仍然遇到上述错误。

```
class A: public AA
    {
        class InnerA
        {
            private:
                static InnerA* _innerA;
            public:
                ~InnerA();
                void Release();

                static InnerA* GetInstance()
                {
                    if (A::InnerA::_innerA == NULL)
                    {
                        static A::InnerA::_innerA static_instance;
                        _A::InnerA::_innerA = &static_instance;
                    }
                    return A::InnerA::_innerA;
                };
    ..... 
```

请帮我 ！！！非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:19:26.587

类的所有静态数据成员都必须在某处**定义。**将以下内容放入 .cpp 文件中：

```
A::InnerA *A::InnerA::_innerA; 
```

然而，你真的需要那个静态指针吗？你可以像这样简化你的代码：

```
class A: public AA
{
    class InnerA
    {
        public:
            ~InnerA();
            void Release();

            static InnerA* GetInstance()
            {
                static InnerA static_instance;
                return &static_instance;
            }
..... 
```

然后，您将不需要任何静态成员定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:50:35.540

首先要做的事情是：您将单例模式的**两种不同**实现混为一谈。

**实施1**

可信赖的泄漏单例。

```
// Singleton.hpp
class Singleton {
public:
    static Singleton& Instance() {
        if (I == nullptr) { I = new Singleton(); }
        return *I;
    }

private:
    Singleton();
    ~Singleton();

    static Singleton* I;
};

// Singleton.cpp
Singleton* Singleton::I = 0; 
```

两个问题：

*   泄漏，除非您实现*Release*并确保调用它（一次）
*   不是线程安全的

**实施 2**

被称为迈耶斯的单身人士。

```
// Singleton.hpp
class Singleton {
public:
    static Singleton& Instance() {
        static Singleton S;
        return S;
    }

private:
    Singleton();
    ~Singleton();
}; 
```

主要问题：

*   服从 Destruction Order Fiasco （等同于[Initialization Order Fiasco](http://www.cplusplus.com/forum/general/21732/)）

您应该选择其中任何一个，但不要将两者混为一谈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:20:44.717

你总是定义静态数据成员。把它放在main之前，就在你的`class A`定义之下：

```
A::InnerA *A::InnerA::_innerA; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:23:22.167

在您的 A 类实现文件中，您必须编写类似\

```
A::InnerA *A::InnerA::_innerA; 
```

完成成员的定义。在标题中，您只声明成员，但不定义它。

# python - 当 Debug=False 时完全禁用 Http 404/500 模板

> ID：16036802
> 
> 赞同：0
> 
> 时间：2013-04-16T12:14:35.540
> 
> 标签：python, django, exception

我正在 Django 中编写一些返回 json 的方法。我自己处理异常，在某些情况下，我想返回一个带有 Json 主体的 Http 500 响应，以便客户端可以提取（除其他外）异常 uuid。

这可以正常工作，`Debug = True`但是当设置为 时`False`，以下代码会导致*html*错误页面...

```
Ret = {"ExceptionId:": "<Exception_uuid>",
       "Message": "Some user-friendly error message"}

return HttpResponse(json.dumps(Ret), content_type="application/json", status=INTERNAL_SERVER_ERROR) 
```

我知道安全隐患，这就是为什么此处返回的消息与异常无关，而是在引发异常时由我们自己的代码生成（或在某些情况下提供的通用异常）。uuid 与堆栈跟踪、真正的异常信息等一起记录（最好记录到数据库，但如果不可能，则记录到文件）。用户可以在联系我们时通过 uuid 引用异常。

如何强制 django*不*尝试干扰我不想要或不需要的模糊 html 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:43:41.107

> 我想返回一个带有 Json 主体的 Http 500 响应，以便客户端可以提取（除其他外）一个异常 uuid。

TBH，我不会依赖所有将非 200 响应视为有效 XHR 响应的 Web 浏览器，因此当您计划返回您希望浏览器解析的 JSON 响应时，始终返回 200 响应可能更安全。

一种常见的方法是为所有 JSON 响应返回相同的结构，以便浏览器可以确定调用是否成功。例如，你可以返回这样的东西......

```
{"result": "Hello, world!", "exception": null} 
```

...如果它有效，以及类似的东西...

```
{"result": null, "exception": "You provided incorrect parameters"} 
```

...如果失败。对于加分，您甚至可以将异常转换为 JavaScript 异常，并将其扔回调用函数。

**更新**

为了简化处理，如果所有 AJAX 调用都通过一个函数进行路由，会容易得多。就像是...

```
function do_json_call(url)
{
    var json = null;
    // code to get JSON via XHR here
    var result = json['result'];
    var exc = json['exception'];
    if (exc !== null)
    {
        throw exc;
    }
    return result;
}

function func1()
{
    try
    {
        var result = do_json_call("http://localhost/json/func1");
        // Do something
    }
    catch (e)
    {
        alert(e);
    }
}

function func2()
{
    try
    {
        var result = do_json_call("http://localhost/json/func2");
        // Do something
    }
    catch (e)
    {
        alert(e);
    }
}

// etc.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:09:21.160

在您的`ROOT_URLCONF`即 urls.py 中添加一个名为`handler500`.

网址.py

```
....
....
handler500 = 'myapp.views.get500handler' 
```

我的应用程序/views.py

```
def get500h(request):
    return HttpResponse("A server error ocurred") 
```

不要担心我们返回的内容`get500h()`，您的用户仍然会看到您返回的 json 响应。

# c# - 最佳实践：嵌套 ForEach

> ID：16036803
> 
> 赞同：3
> 
> 时间：2013-04-16T12:14:36.773
> 
> 标签：c#, nested-loops

嵌套“foreach”的数量是否有最佳实践？

那就是我在复杂字典上陷入嵌套的“foreach”，是否有一点开始产生“可能”阻碍性能的开销？这是否值得考虑。

为了使其具体而不是主观的：我有 3 个看起来像这样的复杂字典；

```
Dictionary<int, Dictionary<string, XObject>()
Dictionary<string, List<YObject>()
Dictionary<string, Dictionary<string, List<ZObjects>() 
```

显然，现在，当我过滤这些字典（在 foreach 中）以生成我正在寻找的数据时，我的代码结构正朝着 5 个嵌套的“foreach”方向发展，不包括外部 1。在回答这些是我的区域我担心可能会受到影响：

1.  **性能**（上下文切换过多）
2.  **内存**（在给定时刻将所有数据集保留在内存中）
3.  **可维护性**（糟糕的程序员！）

最佳实践还是无关紧要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:18:12.147

1.  foreach 语句没有“上下文切换”。
2.  内存：完全不相关，内存由数据而不是枚举器占用（由 foreach 语句使用）
3.  可维护性：考虑重构代码添加方法来执行项目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:19:00.613

实现这一点的一种清晰简洁的方法是在功能上将它们分开。考虑：

```
// represents outer loop
IEnumerable<KeyValuePair<string, string>> Operation1(IEnumerable<KeyValuePair<string, string>> input)
{
   // outer loop processing
   IEnumerable<KeyValuePair<string, string>> output = Operation2(input);
   return output;
}

// which feeds in to...

IEnumerable<KeyValuePair<string, string>> Operation2(IEnumerable<KeyValuePair<string, string>> input)
{
    // work on it
   IEnumerable<KeyValuePair<string, string>> output = Operation3(input);
   return output;
}

// and finally

IEnumerable<KeyValuePair<string, string>> Operation3(IEnumerable<KeyValuePair<string, string>> input)
{
    // work on it
    return input;
} 
```

这使循环的功能保持独立，可以更改顺序，并且每个循环都是一个谨慎的工作单元。

# java - 停止重命名的线程

> ID：16036805
> 
> 赞同：0
> 
> 时间：2013-04-16T12:14:41.143
> 
> 标签：java, multithreading

我有一个游戏可以创建漫无目的地在地图上游荡的“机器人”。每次玩家单击按钮时，都会创建一个新线程来创建机器人。如果您多次按下该按钮，则会生成许多具有相同线程名称 botThread 的机器人。

但是我希望能够区分机器人，以便我可以阻止单个机器人。所以我使用 setName() 函数将第一个机器人的名称更改为“Bot 1”，但是如果我尝试 Bot1.stop()，它说线程不存在？（我知道我不应该使用 .stop() 方法）。

但是，如果我在线程中遇到错误，它会显示“线程“Bot 1”中的异常”。所以它显然确实存在！

这是我的一些代码：

```
public class botGame{

Thread botThread;

public void newBot(){

botThread = new Thread(new Runnable(){

      public void run(){

             botThread.setName("Bot 1"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:18:24.613

线程名称只是调试代码的有用标识符。它与应用程序中的任何变量、对象或标识符*完全无关。*

换句话说： Calling`thread.setName("foo")`不会神奇*地*让你 call `foo.stop()`。

相反，您想要做的是保存`Thread`您在某个集合或映射中创建的对象，从那里检索它并随后对其进行操作（理想情况下**不**使用`stop()`，如您所述）。

例如`botThread`，您将拥有以下内容，而不是单个字段：

```
Collection<Thread> botThreads = new ArrayList<Thread>(); 
```

当你启动一个线程时，你会这样做：

```
Thread botThread = new Thread( ... );
botThread.start();
botThreads.add(botThread); 
```

而且由于我们的主题是避免停止：如果您不保留`Thread`对象，而是保留 a `BotRunnable`，则可以添加一个`pleaseStop`方法，`BotRunnable`将`volatile boolean`名为`keepRunning`（或类似）的字段设置为`false`. 然后，在`run`方法内部，定期检查该字段，如果是`false`，则简单地返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:17:29.110

尝试将你的线程放在一个列表中，这样你就可以继续你想要的元素，然后删除它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:25:02.190

你应该这样做：

```
public class botGame{
  Map<String, Thread> botThreads = new Map<String, Thread>();
  public void newBot(){
  Thread botThread = new Thread(new Runnable(){
    public void run(){
      }
    };
  botThreads.put("Bot 1", botThread);
} 
```

我没有仔细检查我的示例是否有错误，而且您需要一种创建具有不同名称的线程的方法，但我认为您可以了解地图的想法。

要查找线程对象，请执行`Thread thread = botThreads.get("Bot 1");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:36:16.420

我的其他答案的一个更好的选择是让机器人跟踪他们自己的线程：

```
class Bot {
    Thread thread = null;
    private String name;
    volatile boolean stop = false;
    Bot(String name) {
        this.name = name;
    }
    public String getName() {
        return name;
    }
    public void run() {
        thread = new Thread(new Runnable(){
            public void run(){
                while(!stop) {
                    ...
                }
            }
        };
        thread.start();
    }
    public void stop() {
        stop = true;
    }
} 
```

在你的机器人创建代码中这样做：

```
public class botGame{
    Map<String, Bot> bots = new Map<String, Bot>();

    public void makeNewBot(String name) {
        bots.put(name, new(Bot(name)));
    }

    public void startBot(String name) {
        bots.get(name).run();  // TODO: Add check for wrong name
    }

    public void stopBot(String name) {
        bots.get(name).stop(); // TODO: Add check for wrong name
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:20:43.340

除了使用线程名称之外，您还可以监视 Statefull 类或 Map 来授予线程运行或不运行的权限。

因此，一旦失去运行权限，您的线程就会自行结束。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-16T12:20:47.423

`Thread.stop()` 不应使用该方法 。它被弃用是有原因的—— [弃用的原因](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#stop%28%29)。在线程中使用`volatile boolean`标志来检查它是否应该停止。当你想停止它时，在主线程中设置标志。

# algorithm - 将小数与浮点数分开的算法或数学方法？

> ID：16036807
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:14:42.627
> 
> 标签：algorithm, math, floating-point, decimal, exponent

是否有任何数学或算法方法将浮点数分成两部分（之前和之后）点。

例子：

```
number=456.789
before=456
after=0.789 
```

我不想要任何代码，因为我可以用任何编程语言做到这一点。我想要一个通用算法，最好使用算术或其他此类运算符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:33:44.260

这一切都取决于对浮点值可用的操作：

*   如果你有`floor`，`ceil`那么你可以使用其中之一来获得整数部分，并使用减法来获得小数部分。
*   如果你有除数，你可以这样做（使用 1 作为除数）。
*   如果您可以检查值的按位表示，知道哪些位是指数和尾数，那么您可以使用它。
*   如果您可以将值视为十进制字符串，则可以在小数分隔符处拆分（通常为`.`或`,`），尽管科学记数法需要额外的工作来处理。
*   如果你只有比较、加法和减法，那么你可以对整数部分进行二进制搜索——通过一系列指数增长的猜测来建立起始界限。这可能是最“通用”的，因为它只假设有序加法组的基本数学运算（因为如果你愿意，你可以避免乘法或除法）。但是很难想象会有一种严肃的浮点编程语言不提供更有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:56:33.140

我通常会执行以下操作来获得您的要求：

```
double number=456.789;
int before= number; //This type cast is equivalent to floor(number) 
double after=number-before; 
```

所以获取给定浮点数的下限是我们正在执行的主要任务，其中 floor 方法只返回不大于输入数的最大整数。这很可能通过利用内存中的[浮点表示](http://en.wikipedia.org/wiki/IEEE_754-1985)和一些语言级别的操作来完成（您不能在浮点数中执行正常的按位运算，因为它没有定义）。所以AFAIU，如果你不想使用地板/打字，你基本上注定要失败。

# actionscript-3 - Flex 3.6 - null 检查期间的 null 对象引用

> ID：16036808
> 
> 赞同：0
> 
> 时间：2013-04-16T12:14:42.690
> 
> 标签：actionscript-3, apache-flex, nullpointerexception

我遇到了一个奇怪的问题。我的空中应用程序停止执行并出现此错误：

```
TypeError: Error #1009: Cannot access a property or method of a 
null object reference.
at myapp::MyObject/myFunction()  
   [C:\cygwin\home\pathtomyapp\myComponent.mxml:556]
... 
```

第 556 行如下：

```
if (xmlGeoSearchResult == null) return; 
```

后一个变量在文件头中声明，如下所示：

```
[Bindable]
private var xmlGeoSearchResult:XMLListCollection = null; 
```

这怎么可能 ？我知道该变量可以为 null ，因此我对其进行了检查，但似乎无论如何都会触发错误。

**更新**

`xmlGeoSearchResult`通过修复与变量完全无关的部分代码，我摆脱了上述错误。这是一个`google maps`初始化问题。

无论如何，我想知道对空值的检查是否可能无效或者它是一个弹性错误。

我做了一些测试（使用原始的非固定代码），就像你们建议的那样。

我像这样在 556 之前放了一个跟踪

```
trace("HELLOOOOOOOOO I'M RECOMPILED");

if (xmlGeoSearchResult == null) return; 
```

并且字符串被跟踪（证明它被正确编译）

我还尝试删除`null init`for`xmlGeoSearchResult`声明，但没有任何改变。

# wpf - 视图模型中的 WPF MVVM 新实例不刷新绑定

> ID：16036813
> 
> 赞同：0
> 
> 时间：2013-04-16T12:15:03.690
> 
> 标签：wpf, mvvm

当我用新实例替换成员时，我无法让我的 ViewModel 更新我的视图。

我的 ViewModel 包含正确的（我相信）通知，即 Test 成员已通过 OnPropertyChanged 更改（已验证可与其他成员绑定）：

```
public class ServerViewModel
{
   private TestViewModel _Test;
   public TestViewModel Test 
   {
      get {return _Test;}
      set {_Test = value;OnPropertyChange("Test");}
   }
   ...
   ...
} 
```

在我的代码隐藏中，我在 MainWindow() 构造函数中实例化 ServerViewModel 并设置数据上下文：

```
VServer = new ServerViewModel();
this.DataContext = VServer; 
```

在我的视图模型中，我有一个通过分配新实例来加载测试的函数：

```
VServer.Test = new Test("c:\test\test3.test"); 
```

我的 XAML 尝试通过以下方式绑定到 Test 成员：

```
<TextBox x:Name="TextTestName" 
...
Text="{Binding Test.Name, Mode=TwoWay}"/> 
```

但是，当我加载测试时，控件绑定无法识别已创建新对象并且不会更新其内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:21:04.427

可能是一堆东西——你发布的代码看起来像伪代码，所以很难确定。

首先，您确定在 ServerViewModel 类上实现 INotifyPropertyChanged 吗？

其次，您是否将视图模型实例化代码放在this.InitializeComponent();**之后的构造函数中？**（如果不是，你应该是）

第三，您是否测试过 Name 在创建“Test”类时实际上填充了一个值？它还应该实现 INotifyPropertyChanged 接口。

# sencha-touch - Sencha Touch 列表项披露 - 如何突出显示

> ID：16036817
> 
> 赞同：1
> 
> 时间：2013-04-16T12:15:09.430
> 
> 标签：sencha-touch, sencha-touch-2

单击披露图标时，有没有办法使列表项成为选中状态？目前它似乎没有选择该项目，我希望它的行为与我选择列表项目时的行为完全相同。

在文档中似乎没有这样做的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:51:46.883

我解决了。在控制器中：

```
onTaskListItemDisclose: function (scope, record, target, index) {
    console.log("onTaskListItemDisclose");

    scope.select(record);
}, 
```

它就像使用传入的包含列表的范围变量并使用项目的记录 id 调用 select() 一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:14:22.140

如果我理解正确，您正在尝试在单击列表项中的公开图标时触发操作。

可以在如下所示的公开事件侦听器的帮助下完成。

```
disclose : function(view, record, target, index) 
{
    console.log('this is clicked');
    // calling controller's function 
    this.fireEvent('actionSelected', view, record, target, index);
} 
```

# postgresql - PostgreSQL 查询中的奇怪编码问题

> ID：16036819
> 
> 赞同：1
> 
> 时间：2013-04-16T12:15:12.087
> 
> 标签：postgresql, encoding, character-encoding

希望有人能在这方面提供帮助

我有一个包含英语和德语文本的数据库，我将 php 与 Postgres 数据库一起使用，查询英语文本工作正常，但是当查询字符串包含任何德语字母时，我得到空结果。

例如：

```
select field from Table where field ilike '%software%' 
```

按预期返回结果

```
select field from Table where field ilike '%bersetzung%' 
```

按预期返回结果

```
select field from Table where field ilike '%Übersetzung%' 
```

返回空集

show client_encoding 返回 UNICODE，即使在 pgadmin 中运行上述查询，当查询字符串中有任何德语字母时，也会返回空集。

数据库编码为 UTF-8

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T02:01:46.833

PostgreSQL 在如何依赖系统行为方面有许多奇怪之处。这是一。通常，本地化支持取决于系统库和系统行为。对于像大写/小写这样的东西和像排序规则这样的东西都是如此。

看起来您无法在数据库设置后创建数据库的本地化设置。您可能需要备份数据库，使用正确的本地化设置重新创建它，然后重新加载数据。这可能不是您正在寻找的答案，但它可能是最好的答案。

# javascript - 在传单中查找已保存标记的纬度和经度

> ID：16036824
> 
> 赞同：8
> 
> 时间：2013-04-16T12:15:32.807
> 
> 标签：javascript, leaflet, markers

我有圆圈标记

```
var myMarker = L.circleMarker(stuSplit, 
    { title: 'unselected' })
        .bindLabel("Name: " + students[i][j][0] 
                   + " ReachTime: " + students[i][j][2]); 
```

现在我想在这个 myMarker 中找到纬度和经度。

我正在尝试`myMarker.getLatLng()`，但它不起作用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T09:09:10.033

问题不在于 getLatLng()。这工作正常：

```
var map = L.map('map').setView([55.4411764, 11.7928708], 13);
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

var stuSplit = L.latLng(55.4411764, 11.7928708);
var myMarker = L.circleMarker(stuSplit, 
    { title: 'unselected' })
        .addTo(map);
alert(myMarker.getLatLng()); 
```

在此处查看一个工作示例：

[http://jsfiddle.net/pX2xn/2/](http://jsfiddle.net/pX2xn/2/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-20T04:39:46.483

这样你就可以

```
$("#One").click(function(){
    var curPos = myMarker.getLatLng();
    alert(curPos.lng + " : " + curPos.lat);
}); 
```

这更详细。

[在此处](http://jsfiddle.net/pX2xn/16/)查看一个工作示例。

# python - Python时间转换

> ID：16036825
> 
> 赞同：2
> 
> 时间：2013-04-16T12:15:38.447
> 
> 标签：python, django

我有一些来自数据库的时间戳数据，我需要将其转换为 Python `datetime`（`tuple`格式）。我怎样才能做到这一点？

例如，我需要将*2013-04-16 16:31:35.649+05:30*格式转换为*datetime(2013, 4, 16, 16, 31, 35)*。

我正在尝试做项目的 Django 新用户注册部分，每当用户提交数据并注册时，他都会收到一封验证电子邮件，但是每当用户点击验证链接时，它都会产生以下错误：

> 无法比较 offset-naive 和 offset-aware`datetimes`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:31:04.540

```
from dateutil import parser

dt = parser.parse("2013-04-16 16:31:35.649+05:30")
# dt == datetime.datetime(2013, 4, 16, 16, 31, 35, 649000, tzinfo=tzoffset(None, 19800))

dt.astimezone(pytz.utc).replace(tzinfo=None) 
```

返回`datetime.datetime(2013, 4, 16, 11, 1, 35, 649000)`在 UTC 中相同的时刻，并且没有 tzinfo（offset-naive）。

如果要存储没有 tzinfo 的日期时间对象，请将其存储为 UTC。

世界大部分地区使用夏令时，这使得一些偏移天真的日期时间模棱两可。UTC 没有这些问题。

# css - 全高部分单页

> ID：16036836
> 
> 赞同：3
> 
> 时间：2013-04-16T12:16:15.763
> 
> 标签：css, twitter-bootstrap

我正在使用 Bootstrap 创建一个响应式网站。

页面很简单，但在同一页面上需要不同的部分，每个部分的高度为 100% 屏幕高度，例如链接到部分锚点以 100% 的高度和宽度显示该部分。宽度没问题，但有多个高度实例不会堆叠。关于这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:23:04.493

找到了一个解决方案 - 将它放在一个 jQuery 分数中，您可以在其中监听调整大小/加载事件。

```
$('page').css('min-height',$(window).height()+'px'); 
```

其中 page 是您希望定位的 div 部分。

# regex - Perl从数组中删除元素

> ID：16036839
> 
> 赞同：2
> 
> 时间：2013-04-16T12:16:18.570
> 
> 标签：regex, perl

我在 perl 中有一个二维数组。我想删除所有具有 <<< 或 >>> 模式的元素。我写了一个 perl 代码，在匹配模式之前它工作得很好，但是它不能删除那个元素，会发生一些错误。

```
 foreach my $x(@array)
   { 
     foreach my $y(@$x)
     {
        if($y =~ (m/^(\<+)|(\>+)$/ig))
         {
            delete $y;
         }
     }
   } 
```

你能帮我删除与模式匹配的特定元素吗？（我想从数组中删除和删除，而不是取消它）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:03:50.807

假设您的数组如下所示：

```
1  2  3  4
5  X  6  7
8  9  A  B 
```

你想删除`X`. 你想发生什么？删除后你的新数组应该是什么样子？

你想要这个：

```
1  2  3  4
4  6  7
8  9  A  B 
```

或这个？

```
1  2  3  4
5  9  6  7
8     A  B 
```

这是你需要决定的第一件事。其次，你不能使用`delete`. 该命令从*散列*而不是*数组*`delete`中删除键控值。如果你有这样的数组：

 **```
my @array = qw(0 1 2 3 4 5 X 7 8 9); 
```

并且您想删除`X`（即`$array[6]`），您将使用以下`splice`命令：

```
splice @array, 6, 1; 
```

最后，Perl 没有二维数组，所以你不能从二维数组中删除一个值。

您拥有的是对第二个数组的*引用*数组。这样想：

```
my @row0 = qw(1 2 3 4);
my @row1 = qw(5 X 6 7);
my @row2 = qw(8 9 A B);

my @two_d_array = (\@row0, \@row1, \@row2); 
```

或者，我可以按列执行此操作：

```
my @col0 = qw(1 5 8);
my @col1 = qw(2 X 6);
my @col2 = qw(2 6 A);
my @col3 = qw(4 7 B);

my @two_d_array = (\@col0, \@col1, \@col2, \@col3); 
```

当你谈论。

```
if ( $two_d_array[1][1]` eq "X" ) { 
```

发生的事情是 Perl 扰乱了你的思维。它使您认为涉及到一个二维数组，但实际上并不存在。

更准确的写法是：

```
if ( ${ $two_d_array[1] }[1] eq "X" ) { 
```

或者，更干净：

```
if ( $two_d_array[1]->[1] eq "X" ) { 
```

*所以首先，通过删除*一个值来决定你的意思。在二维数组中，如果您实际*删除*该值，最终会破坏该数组的维度结构。也许您可以将此时的值*替换*`undef`为.

一旦你这样做了，你必须明白你实际处理的是什么：一个对数组的*引用*数组。

```
for my $array_reference ( @two_d_array ) {
    for my $value ( @{ $array_reference } ) {
        if ( $value =~ /^(<+|>+)$/ ) {
            $value = undef;   #See Note #1
        }
    }
} 
```

**注意 #1**：当您使用 for 循环时，数组的索引是指向数组中实际值的链接。因此，当您更改索引时，您正在更改实际值。这就是为什么这会起作用。

如果您真的非常想使用 删除元素`splice`，则必须决定是要向上移动元素以替换已删除的值还是向左移动以替换已删除的值。如果要将值向左移动，则需要一个数组或对行数组的引用。如果您希望将值向上移动以填充已删除的值，则需要一个对列数组的引用数组。

请记住，计算机将完全按照您的指示执行操作，而不是您希望它们执行的操作。确保你完全理解你想要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:33:11.350

您正在应用`delete`标量值`$y`，而 delete 仅适用于散列和数组。你需要做

```
for my $x (0 .. $#array) {
    for my $y (0 .. $#{$array[$x]}) {
        if (...) { delete $array[$x][$y]; } 
```

在我看来，*最好*的解决方案是在将值存储到数组之前删除它。我猜您是从某个数据源（例如文件）中读取它的，那将是过滤掉它的最佳位置。例如

```
while (<$fh>) {
    ....
    @values = grep !/^[<>]+/, @values;    # filtering
    push @array, \@values;                # storing
} 
```

在那张纸条上，您当然*也*可以在之后执行此操作，例如：

```
for (@array) {
    @$_ = grep !/^[<>]+/, @$_;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:23:06.260

您可以通过拼接函数从数组中删除元素： `splice(@array, $index, 1);`此示例中的 1 是元素数，您要删除
`delete`函数只需将数组值设置为 undef

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:25:23.317

`delete`不会改变数组索引，所以它不是你想要的。如果要按值删除元素，请使用以下内容：

```
foreach my $x(@array)
   {   
       $x = [ grep { $_ !~ (m/^(\<+)|(\>+)$/ig)} @$x ];
       print join(",", @$x), "\n";
   } 
```

或者，使用拼接。但是随后您将需要使用索引而不是值来迭代数组。

另请参阅[Perl-delete](http://perldoc.perl.org/functions/delete.html)、[Perl-splice](http://perldoc.perl.org/functions/splice.html)。**

# vb.net - VB.NET 中带有文本框的文件夹浏览器

> ID：16036853
> 
> 赞同：11
> 
> 时间：2013-04-16T12:16:52.373
> 
> 标签：vb.net, textbox, folderbrowserdialog

我有一个文本框，其中填充了从数据库获取的路径（但这无关紧要）。所以我想要一个FolderBrowserDialog 按钮，我在其中打开-> 浏览文件夹并选择一个路径（即通过选择某个文件夹），然后确定/保存该路径并在文本框中对其进行更新。

所以在整个情况下 - 我不知道如何使用 OpenFolderBrowserDialog，因为当我拖动它时 - 它只进入页面底部，但我想将它作为按钮放在我的 WinForm 中的某个位置。还有 - 所选路径如何保存到（即字符串）变量中，以便我可以将其设置为文本框的值？某种方法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-16T12:28:58.187

像下面这样尝试它会帮助你..

放置一个`Text box`,`Button`并`FolderBrowserDialog`在你`Form`喜欢的下面...

![在此处输入图像描述](https://i.stack.imgur.com/GL8jg.png)

然后在您的代码上`Double click the button`，`create Button click Event`如下所示..

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    If (FolderBrowserDialog1.ShowDialog() = DialogResult.OK) Then
        TextBox1.Text = FolderBrowserDialog1.SelectedPath
    End If
End Sub 
```

然后运行它.. 现在您可以通过单击浏览按钮打开文件夹浏览器对话框..

选择文件夹路径后，路径将分配给文本框

您也可以参考这篇文章以获得完整参考：[FolderBrowserDialog](http://www.dotnetheaven.com/article/folderbrowserdialog-box-in-vb.net)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-24T13:27:04.953

这是一个更好的版本。将此代码放入模块中

```
Imports System
Imports System.IO
Imports System.Runtime.CompilerServices
Imports System.Runtime.InteropServices
Imports System.Windows.Forms

Public Class OpenFolderDialog
    Implements IDisposable

    ''' <summary>
    ''' Gets/sets folder in which dialog will be open.
    ''' </summary>
    Public Property InitialFolder() As String
        Get
            Return m_InitialFolder
        End Get
        Set(ByVal value As String)
            m_InitialFolder = value
        End Set
    End Property
    Private m_InitialFolder As String

    ''' <summary>
    ''' Gets/sets directory in which dialog will be open if there is no recent directory available.
    ''' </summary>
    Public Property DefaultFolder() As String
        Get
            Return m_DefaultFolder
        End Get
        Set(ByVal value As String)
            m_DefaultFolder = value
        End Set
    End Property
    Private m_DefaultFolder As String

    ''' <summary>
    ''' Gets selected folder.
    ''' </summary>
    Public Property Folder() As String
        Get
            Return m_Folder
        End Get
        Private Set(ByVal value As String)
            m_Folder = value
        End Set
    End Property
    Private m_Folder As String

    Public Function ShowDialog(ByVal owner As IWin32Window) As DialogResult
        If Environment.OSVersion.Version.Major >= 6 Then
            Return ShowVistaDialog(owner)
        Else
            Return ShowLegacyDialog(owner)
        End If
    End Function

    Private Function ShowVistaDialog(ByVal owner As IWin32Window) As DialogResult
        Dim frm = DirectCast(New NativeMethods.FileOpenDialogRCW(), NativeMethods.IFileDialog)
        Dim options As UInteger
        frm.GetOptions(options)
        options = options Or NativeMethods.FOS_PICKFOLDERS Or NativeMethods.FOS_FORCEFILESYSTEM Or NativeMethods.FOS_NOVALIDATE Or NativeMethods.FOS_NOTESTFILECREATE Or NativeMethods.FOS_DONTADDTORECENT
        frm.SetOptions(options)
        If Me.InitialFolder IsNot Nothing Then
            Dim directoryShellItem As NativeMethods.IShellItem
            Dim riid = New Guid("43826D1E-E718-42EE-BC55-A1E261C37BFE")
            'IShellItem
            If NativeMethods.SHCreateItemFromParsingName(Me.InitialFolder, IntPtr.Zero, riid, directoryShellItem) = NativeMethods.S_OK Then
                frm.SetFolder(directoryShellItem)
            End If
        End If
        If Me.DefaultFolder IsNot Nothing Then
            Dim directoryShellItem As NativeMethods.IShellItem
            Dim riid = New Guid("43826D1E-E718-42EE-BC55-A1E261C37BFE")
            'IShellItem
            If NativeMethods.SHCreateItemFromParsingName(Me.DefaultFolder, IntPtr.Zero, riid, directoryShellItem) = NativeMethods.S_OK Then
                frm.SetDefaultFolder(directoryShellItem)
            End If
        End If

        If frm.Show(owner.Handle) = NativeMethods.S_OK Then
            Dim shellItem As NativeMethods.IShellItem
            If frm.GetResult(shellItem) = NativeMethods.S_OK Then
                Dim pszString As IntPtr
                If shellItem.GetDisplayName(NativeMethods.SIGDN_FILESYSPATH, pszString) = NativeMethods.S_OK Then
                    If pszString <> IntPtr.Zero Then
                        Try
                            Me.Folder = Marshal.PtrToStringAuto(pszString)
                            Return DialogResult.OK
                        Finally
                            Marshal.FreeCoTaskMem(pszString)
                        End Try
                    End If
                End If
            End If
        End If
        Return DialogResult.Cancel
    End Function

    Private Function ShowLegacyDialog(ByVal owner As IWin32Window) As DialogResult
        Using frm = New SaveFileDialog()
            frm.CheckFileExists = False
            frm.CheckPathExists = True
            frm.CreatePrompt = False
            frm.Filter = "|" & Guid.Empty.ToString()
            frm.FileName = "any"
            If Me.InitialFolder IsNot Nothing Then
                frm.InitialDirectory = Me.InitialFolder
            End If
            frm.OverwritePrompt = False
            frm.Title = "Select Folder"
            frm.ValidateNames = False
            If frm.ShowDialog(owner) = DialogResult.OK Then
                Me.Folder = Path.GetDirectoryName(frm.FileName)
                Return DialogResult.OK
            Else
                Return DialogResult.Cancel
            End If
        End Using
    End Function

    Public Sub Dispose() Implements IDisposable.Dispose
    End Sub
    'just to have possibility of Using statement.
End Class

Friend Module NativeMethods

#Region "Constants"

    Public Const FOS_PICKFOLDERS As UInteger = &H20
    Public Const FOS_FORCEFILESYSTEM As UInteger = &H40
    Public Const FOS_NOVALIDATE As UInteger = &H100
    Public Const FOS_NOTESTFILECREATE As UInteger = &H10000
    Public Const FOS_DONTADDTORECENT As UInteger = &H2000000

    Public Const S_OK As UInteger = &H0

    Public Const SIGDN_FILESYSPATH As UInteger = &H80058000UI

#End Region

#Region "COM"

    <ComImport(), ClassInterface(ClassInterfaceType.None), TypeLibType(TypeLibTypeFlags.FCanCreate), Guid("DC1C5A9C-E88A-4DDE-A5A1-60F82A20AEF7")> _
    Friend Class FileOpenDialogRCW
    End Class

    <ComImport(), Guid("42F85136-DB7E-439C-85F1-E4075D135FC8"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)> _
    Friend Interface IFileDialog
        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        <PreserveSig()> _
        Function Show(<[In](), [Optional]()> ByVal hwndOwner As IntPtr) As UInteger
        'IModalWindow 

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetFileTypes(<[In]()> ByVal cFileTypes As UInteger, <[In](), MarshalAs(UnmanagedType.LPArray)> ByVal rgFilterSpec As IntPtr) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetFileTypeIndex(<[In]()> ByVal iFileType As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetFileTypeIndex(ByRef piFileType As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function Advise(<[In](), MarshalAs(UnmanagedType.[Interface])> ByVal pfde As IntPtr, ByRef pdwCookie As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function Unadvise(<[In]()> ByVal dwCookie As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetOptions(<[In]()> ByVal fos As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetOptions(ByRef fos As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Sub SetDefaultFolder(<[In](), MarshalAs(UnmanagedType.[Interface])> ByVal psi As IShellItem)

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetFolder(<[In](), MarshalAs(UnmanagedType.[Interface])> ByVal psi As IShellItem) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetFolder(<MarshalAs(UnmanagedType.[Interface])> ByRef ppsi As IShellItem) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetCurrentSelection(<MarshalAs(UnmanagedType.[Interface])> ByRef ppsi As IShellItem) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetFileName(<[In](), MarshalAs(UnmanagedType.LPWStr)> ByVal pszName As String) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetFileName(<MarshalAs(UnmanagedType.LPWStr)> ByRef pszName As String) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetTitle(<[In](), MarshalAs(UnmanagedType.LPWStr)> ByVal pszTitle As String) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetOkButtonLabel(<[In](), MarshalAs(UnmanagedType.LPWStr)> ByVal pszText As String) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetFileNameLabel(<[In](), MarshalAs(UnmanagedType.LPWStr)> ByVal pszLabel As String) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetResult(<MarshalAs(UnmanagedType.[Interface])> ByRef ppsi As IShellItem) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function AddPlace(<[In](), MarshalAs(UnmanagedType.[Interface])> ByVal psi As IShellItem, ByVal fdap As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetDefaultExtension(<[In](), MarshalAs(UnmanagedType.LPWStr)> ByVal pszDefaultExtension As String) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function Close(<MarshalAs(UnmanagedType.[Error])> ByVal hr As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetClientGuid(<[In]()> ByRef guid As Guid) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function ClearClientData() As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function SetFilter(<MarshalAs(UnmanagedType.[Interface])> ByVal pFilter As IntPtr) As UInteger
    End Interface

    <ComImport(), Guid("43826D1E-E718-42EE-BC55-A1E261C37BFE"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)> _
    Friend Interface IShellItem
        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function BindToHandler(<[In]()> ByVal pbc As IntPtr, <[In]()> ByRef rbhid As Guid, <[In]()> ByRef riid As Guid, <Out(), MarshalAs(UnmanagedType.[Interface])> ByRef ppvOut As IntPtr) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetParent(<MarshalAs(UnmanagedType.[Interface])> ByRef ppsi As IShellItem) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetDisplayName(<[In]()> ByVal sigdnName As UInteger, ByRef ppszName As IntPtr) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function GetAttributes(<[In]()> ByVal sfgaoMask As UInteger, ByRef psfgaoAttribs As UInteger) As UInteger

        <MethodImpl(MethodImplOptions.InternalCall, MethodCodeType:=MethodCodeType.Runtime)> _
        Function Compare(<[In](), MarshalAs(UnmanagedType.[Interface])> ByVal psi As IShellItem, <[In]()> ByVal hint As UInteger, ByRef piOrder As Integer) As UInteger
    End Interface

#End Region

    <DllImport("shell32.dll", CharSet:=CharSet.Unicode, PreserveSig:=False)> _
     Public Function SHCreateItemFromParsingName( _
         <MarshalAs(UnmanagedType.LPWStr)> ByVal pszPath As String, _
         ByVal pbc As IntPtr, _
         <MarshalAs(UnmanagedType.LPStruct)> ByVal riid As Guid, _
         <MarshalAs(UnmanagedType.Interface, IidParameterIndex:=2)> ByRef ppv As IShellItem) As Integer
    End Function
End Module 
```

像这样使用它

```
Using frm = New OpenFolderDialog()
                If frm.ShowDialog(Me) = DialogResult.OK Then
                    MessageBox.Show(Me, frm.Folder)
                End If
            End Using 
```

# ruby-on-rails - STI、委托和成为

> ID：16036859
> 
> 赞同：2
> 
> 时间：2013-04-16T12:17:03.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sti

我有一些这样的 STI 设置：

```
class Document < ActiveRecord::Base
  attr_accessible :name, description

  # Basic stuff omitted
end

class OriginalDocument < Document
  has_many :linked_documents, foreign_key: :original_document_id, dependent: :destroy
end

class LinkedDocument < Document
  belongs_to :original_document

  # Delegation, because it has the same attributes, except the name
  delegate :description, to: :original_document
end 
```

现在我想复制并将其`LinkedDocument`存储为`OriginalDocument`具有自己的名称的 ，并保留重复的属性值。但是，我的方法失败了，因为在某个地方，副本仍然希望在 after_* 回调中访问其委托方法。

```
class LinkedDocument < Document
  def unlink_from_parent
    original = self.original_document

    copy = self.becomes OriginalDocument
    copy.original_document_id = nil
    copy.description = original.description
    copy.save 
  end
end 
```

这会抛出一个`RuntimeError: LinkedDocument#description delegated to original_document.description, but original_document is nil`.

由于保存查询涉及类型，因此执行附加`copy.type = 'OriginalDocument'`操作是行不通的；`UPDATE documents SET [...] WHERE documents.type IN('OriginalDocument') [...]`. 这失败了，因为在交易时，对象仍然是 type `LinkedDocument`。

什么是复制对象并让它成为另一个对象的干净方法？我想调用和我想复制的每个属性，但在这样做之前，我想在这里问一下 `update_column`。`type`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:27:44.890

我将在这里添加我的解决方案，以防没有人有更好的解决方案。希望它会帮助某人。

为了让对象成为另一个对象而不会因为 where 子句检查错误的类型而产生错误的查询，我在调用之前手动更新了类型列而不调用任何回调`become`。

```
# This is for rails3, where +update_column+ does not trigger 
# validations or callbacks. For rails4, use 
#
#   self.update_columns {type: 'OriginalDocument'}
#
self.update_column :type, 'OriginalDocument' 
document = self.becomes OriginalDocument 
```

现在对于分配，有两个问题：首先，属性设置器可能会因为委托而触发异常。其次，我想批量分配的属性没有`attr_accessible`故意列在 eg 中，因为它们是内部属性。所以我使用了一个带有丑陋 update_column 语句的循环，产生了太多的查询（因为 rails3 没有`update_columns`）。

```
original.attributes.except('id', 'name', 'original_document_id').each do |k,v|
  document.update_column k.to_sym, v
end 
```

# objective-c - 为什么移动和旋转 NSView 会将其旋转中心更改为框架的原点？

> ID：16036861
> 
> 赞同：2
> 
> 时间：2013-04-16T12:17:17.580
> 
> 标签：objective-c, rotation, nsview, transformation

我围绕它的中心旋转了一个 NSView 并验证了结果：

```
[_cocoaView setFrameCenterRotation:-_rotationX]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/TrEL5.png) ![在此处输入图像描述](https://i.stack.imgur.com/fmmNQ.png)

我通过更改框架原点来定位 NSView，以便视图与（在这种情况下）Box2D 主体的中心对齐。结果再次符合预期：

```
CGRect frame = _cocoaView.frame;
frame.origin = CGPointMake(_position.x - frame.size.width * 0.5f, 
                           _position.y - frame.size.height * 0.5f);
_cocoaView.frame = frame; 
```

![在此处输入图像描述](https://i.stack.imgur.com/fglk9.png)

但是，一旦我将平移和旋转结合起来，旋转中心就不再是视图的中心，而是其他点。我相信框架大小和原点会因旋转而改变，从而移动框架的中心点。结果是视图和 Box2D 主体不再对齐，除非旋转角度为 0。

![在此处输入图像描述](https://i.stack.imgur.com/K1Ik2.png)

**这是为什么？以及如何将视图转换到特定位置并围绕其中心旋转视图？**

PS：[我之前尝试将 iOS 版本的已经工作的仿射转换应用于支持层的 NSView 失败](https://stackoverflow.com/questions/16003803/how-to-apply-a-view-transformation-that-works-for-a-uiview-to-a-nsview)。所以我在不使用转换的情况下尝试了它，但是唉，我又被卡住了。如果您知道如何使其与图层和变换一起使用，那也会对我有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:40:21.723

解决方案是双重的。要修复不正确的旋转，我首先需要将旋转设置为 0，移动原点，然后应用实际旋转。

但是，这会导致在旋转和移动视图时发生大量闪烁。随机且非常频繁地，视图会跳转到不同的位置、错误地旋转或被切断——或所有这些。该问题的解决方案是将翻译和旋转代码包含在 lockFocus 和 unlockFocus 调用中。

这是对我有用的解决方案：

```
 [_cocoaView lockFocusIfCanDraw];
    [_cocoaView setFrameCenterRotation:0];

    CGSize frameSize = _cocoaView.frame.size;
    CGPoint origin = CGPointMake(_position.x - frameSize.width * 0.5f, _position.y - frameSize.height * 0.5f);
    [_cocoaView setFrameOrigin:origin];

    [_cocoaView setFrameCenterRotation:-_rotationX];
    [_cocoaView unlockFocus]; 
```

唯一的缺点：视图似乎仍然偶尔落后于 Box2D 主体。几乎不引人注意，所以它并不完美，但现在已经足够好了。

# css - GAE：为什么我的 css 找不到？

> ID：16036862
> 
> 赞同：1
> 
> 时间：2013-04-16T12:17:19.360
> 
> 标签：css, google-app-engine, yaml

使用此配置，我收到 HTTP 500 错误。

```
application: xxx
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /style
  static_dir: style

- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /admin/.*
  script: google.appengine.ext.admin.application
  login: admin

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.2"

builtins:
- remote_api: on 
```

我的日志是这样说的：

```
INFO     2013-04-16 12:11:28,356 server.py:561] default: "GET /style/pimp_soef.css   HTTP/1.1" 500 2168 
```

这是我的 HTML：

```
<link type="text/css" rel="stylesheet" href="/style/pimp_soef.css" /> 
```

我错过了什么？提前致谢！

**编辑**

我的`mainHandler`呢？跟那个有关系！？

```
app = webapp2.WSGIApplication([
    ('/', MainHandler),
], debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:28:14.783

尝试直接在 URL 栏中输入 css 文件的 URL，这样可以确保问题不在于 HTML。

您的代码看起来正确。

我的猜测是它是别的东西。文件名中的错字。也许你有一个大写字母。或者你的目录结构没有设置，所以 /style 可以找到。也许文件权限。

# java - 确保 hashMap 中的所有 ids 值都不同？

> ID：16036869
> 
> 赞同：0
> 
> 时间：2013-04-16T12:17:38.770
> 
> 标签：java, for-loop, hashmap, hashset, bluej

下面的方法（`generateID()`）它生成一个随机id，当我将学生存储在其中时，`HashMap`我想检查生成的id是否在hashMap值中不存在，如果它存在我想生成一个新的id然后存储它，方法存储的问题有时它不会存储所有学生，因为某些学生可能具有相同的 id，这是不允许的，那么最好的方法是为什么检查所有 id 都是唯一的，如果有重复，方法 generateid 将是再次调用 util 所有的 ids 都是 uniqe 然后它会存储它，我想确保产生的 ids 值`generateId()`都是不同的

```
 private String generateId(String perfix, int numberaOfDigits)
    {
        for(int i=0;i<numberaOfDigits;i++)
        {
            perfix +=  randomGenerator.nextInt(9)+ 1; 

        }
        return perfix;
    }

 public void store(Student student) 
    {   

        int index = 0;

            studentMap.setId(generateId("AB-",1));

            while(index <= studentMap.size())

            {
                for(Student stu : studentMap.values() )

                {
                    if(student.getStduentID().equals(stu.getStduentID()))

                    {
                        student.setId(generateId("AB-",1));
                    } 

                }
                index++;
            }
        }
        studentMap.put(student.getStduentID(),student);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:21:01.357

您可以使用该`containsKey()`方法检查 ID 是否已用作密钥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:20:54.607

您可以`get`使用生成的 Id 从地图中返回，如果它返回`null`，则它尚不存在。

```
Map<Long, Object> myMap = new HashMap<Long, Object>();
Long id = generateRandomId()
Object value = getMyObjectValue();

while(myMap.get(id) != null){
    id = generateRandomId();
}

myMap.put(id, value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:21:21.350

使用 UUID。或者已经回答的序列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:22:38.113

如果这实际上是一个 Map 实现，您应该能够使用 .containsKey()。问题是，根据您的 ID 生成器的编写程度，随着时间的推移，这可能会导致严重的性能问题。假设您有一个 6 位数的 ID，并且在几年内有 80000 名学生通过了该系统。它需要多少次猜测才能找到剩余的 20000 个可用密钥之一？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:26:02.867

我建议尝试以下实现以每次获取唯一的随机数。

1.  将项目添加到列表中。
2.  用于`Collections.shuffle(list);`随机播放列表。
3.  遍历列表并每次从给定范围内获取随机数。（对于以下情况，范围是从 0 到 numberOfStudent-1）。

    ```
    int numberOfStudent = 10;
    List<Integer> list = new ArrayList<Integer>();
    for (int i = 0; i < numberOfStudent; i++) 
        list.add(i);    

    Collections.shuffle(list); 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:32:41.787

我将`generateId()`完全消除该方法，只需执行以下操作：

```
private int id; 
```

然后：

```
student.setId(id++); 
```

# xpages - XPages 部分刷新（SSJS 代码）在重新启动 HTTP 时中断

> ID：16036871
> 
> 赞同：1
> 
> 时间：2013-04-16T12:17:42.587
> 
> 标签：xpages

我有一个 Xpage，当用户在组合框中选择一个值（onChange 事件）时，它会执行部分刷新。组合框实际上是自定义视图组件的过滤器选择器。此事件触发一些 SSJS 代码并执行部分刷新。此事件偶尔会中断，可能是由于删除了 XPages 会话。部分刷新已执行，但设置 viewScope 变量的 SSJS 代码不再执行。这会导致视图显示未应用过滤器的所有数据。

我添加了一个打印语句作为 ssjs 函数的第一行。此打印语句不再执行。

我设法通过在页面打开的情况下重新启动 http 来重现这一点。

查看 Chrome devtools 中的网络选项卡会在 partialRefreshPost 上显示状态 200。部分刷新 id 似乎也是正确的。

有什么解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:10:15.463

如果会话超时、重新启动服务器和/或重建应用程序，则会发生这种情况。

如果随后将部分刷新发布到服务器，则类似于基于 HTTP GET 的请求：当前 XPage 的持久视图被“再次唤醒”，但跳过了一些 JSF 生命周期阶段（3、4、5）。用于部分刷新的 SSJS 代码在跳过的阶段执行，这就是为什么您的控制台上没有打印输出。

*[这是一个非常简短的解释。有关更多信息，请查看有关 JSF 生命周期的[XPages Master Classes Videos及其详细信息]](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20Masterclass)*

# hive - 使用 HiveQL 进行重复数据删除

> ID：16036873
> 
> 赞同：0
> 
> 时间：2013-04-16T12:17:50.163
> 
> 标签：hive, hiveql, deduplication

我有一个带有字段'a'（int），'b'（string），'c'（bigint），'d'（bigint）和'e'（string）的配置单元表。
我有如下数据：

```
a  b  c   d   e
---------------
1  a  10  18  i
2  b  11  19  j
3  c  12  20  k
4  d  13  21  l
1  e  14  22  m
4  f  15  23  n
2  g  16  24  o
3  h  17  25  p 
```

表按键“b”排序。
现在我们想要如下输出：

```
a  b  c   d   e
---------------
1  e  14  22  m
4  f  15  23  n
2  g  16  24  o
3  h  17  25  p 
```

这将在密钥“a”上进行重复数据删除，但将保留最后一个（最新的）“b”。

是否可以使用 Hive 查询（HiveQL）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:39:45.990

如果 b 列是唯一的，请尝试遵循 hql：

```
select 
* 
from
(
    select max(b) as max_b
    from
    table
    group by a
) table1
join table on table1.max_b = table.b 
```

# sublimetext2 - 在 Sublime Text 2 中编写命令时的自动覆盖模式

> ID：16036874
> 
> 赞同：3
> 
> 时间：2013-04-16T12:17:53.893
> 
> 标签：sublimetext2, text-editor

在 Sublime Text 2 中，可以使用 cmd+alt+o 切换覆盖模式，但我真正想要的是在评论时自动切换它，即。每当输入“//”

可以不用大惊小怪吗？

# ios - 在 Xcode Workspace 中构建单个项目

> ID：16036877
> 
> 赞同：7
> 
> 时间：2013-04-16T12:18:00.227
> 
> 标签：ios, xcode

我有**XCode 工作区**，其中有**很多项目**。我不想**每次都建立整个工作区**。如何在 Xcode Workspace 中 **构建单个项目？**

在**Visual Studio**中，我可以右键单击项目并选择仅**项目-> 构建**，但我在 XCode 中没有找到任何选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:19:39.763

你可能应该用方案来做。打开方案并删除不需要的目标。从构建部分。
![在此处输入图像描述](https://i.stack.imgur.com/TN4HS.png)

![在此处输入图像描述](https://i.stack.imgur.com/fa23f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:16:15.327

您可以为此创建一个方案。供参考：[XCode 方案](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Schemes.html#//apple_ref/doc/uid/TP40009328-CH8-SW1)

我尝试创建一个工作区并在其中添加了两个项目。它出现在我要为哪个项目触发构建操作的菜单上（您可以从中选择设备和模拟器）。

# offline - 如何通过缓存制作离线地图（使用传单 OSM）？

> ID：16036880
> 
> 赞同：23
> 
> 时间：2013-04-16T12:18:09.913
> 
> 标签：offline, indexeddb, leaflet, offline-caching

我正在尝试通过浏览器中的缓存（IndexedDB）制作离线地图。我理解这个概念是我在连接到互联网时首先下载并存储地图的图块。

然后我必须在逻辑上离线加载瓷砖。

但是，我无法弄清楚。

我如何存储它们以及如何在逻辑上再次加载它们？我被困在这里。我正在使用 `leaflet API`地图。如何实施？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-23T18:06:36.787

请参阅我对此的广泛研究：

[为离线 Web 应用程序存储图像数据（客户端存储数据库）](https://stackoverflow.com/questions/14113278/storing-image-data-for-offline-web-application-client-side-storage-database)

并在：

[https://gis.stackexchange.com/questions/44813/database-for-offline-slippy-map-tiles](https://gis.stackexchange.com/questions/44813/database-for-offline-slippy-map-tiles)

您想要做的关键是从数据库中获取内容的功能拼贴层：

[https://github.com/ismyrnow/Leaflet.functionaltilelayer](https://github.com/ismyrnow/Leaflet.functionaltilelayer)

顺便说一句，我刚刚为此测试了 PouchDB，它比原始 IndexeDB 更干净。

在以下位置关注我的结果：

[https://groups.google.com/forum/?fromgroups#!topic/pouchdb/RG6wUsAi2R0](https://groups.google.com/forum/?fromgroups#!topic/pouchdb/RG6wUsAi2R0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T20:57:25.060

我有缓存示例实现[http://tbicr.github.com/OfflineMap/leaflet/index.html](http://tbicr.github.com/OfflineMap/leaflet/index.html)和代码[https://github.com/tbicr/OfflineMap/tree/master/leaflet_idb_sql_site](https://github.com/tbicr/OfflineMap/tree/master/leaflet_idb_sql_site)。

对于使用 IndexedDB 和 WebSQL 的存储。存储性能低下，未经测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-29T08:08:31.967

我正在为同样的问题寻找解决方案。从 tileserver 存储图块，并从 leafletjs 中的 db 加载它们。

我已经实现了一个自定义层，如果可用，它从数据库（indexeddb/webdatabase）加载切片，并回退到切片服务器（具有 Access-Control-Allow-Origin 标头，请参阅[https://developer.mozilla.org/en- US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Credentials](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Credentials)）

我实现了一个控件，它将当前视图中的图块保存在 indexeddb 或 web 数据库中。

代码在[https://github.com/allartk/leaflet.offline](https://github.com/allartk/leaflet.offline)目前仍在进行中！

# android-mediarecorder - MediaRecorder - 使用 mediarecorder 录制视频

> ID：16036885
> 
> 赞同：1
> 
> 时间：2013-04-16T12:18:18.573
> 
> 标签：android-mediarecorder

我正在使用 mediarecorder 在 android 应用程序中录制视频。我将多次开始和停止录制视频我将在 Action_down 上开始录制并在 Action_up 上停止这一切进展顺利，并且我能够在移动设备中存储和播放视频文件。我的问题是，由于我必须多次开始和停止录制视频，所以我不能使用单个输出文件，因为每次它都会被覆盖，所以每次我传递新文件名并将其附加到一个输出文件中。我得到每个人移动设备中的文件和最终输出文件，但最终文件只有我第一次记录的内容，因为从第二个选项卡中如果看到 file.mp4.length() 为零，为什么？任何人请尝试帮助我。我的代码如下

```
package com.example.longtouch;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

import android.hardware.Camera;
import android.hardware.Camera.CameraInfo;
import android.media.CamcorderProfile;
import android.media.MediaRecorder;
import android.net.rtp.AudioGroup;
import android.net.rtp.AudioStream;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.Handler.Callback;
import android.provider.MediaStore.Audio;
import android.provider.MediaStore.Files;
import android.provider.MediaStore.Video;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity implements OnTouchListener{

    int i=1;
    File outputFile;
    File f1;
    File f2;

    MediaRecorder mediaRecorder; 
    ThreadProgress mThreadProgress;
    ThreadProgress2 mThreadProgress2;
    public int eventAction;

    Handler handler;
    Handler mHandler;

    Button myButton;
    FrameLayout myCameraPreview;
    Button submit;
    Button submit1;
    LinearLayout ll;
    ProgressBar progressBar;
     int progressStatus=0;

     MyCameraSurfaceView myCameraSurfaceView;
     Camera myCamera;

     boolean recording;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        recording=false;
        myButton=(Button)findViewById(R.id.button_capture);
        submit=(Button)findViewById(R.id.submit);
        submit1=(Button)findViewById(R.id.submit1);
        progressBar=(ProgressBar)findViewById(R.id.progress_bar);

        progressBar.setMax(10000);

        myCamera = getCameraInstance();
        if(myCamera == null){
         Toast.makeText(MainActivity.this,
           "Fail to get Camera",
           Toast.LENGTH_LONG).show();
        }
      // else
        //  myCamera.unlock();
        myCameraSurfaceView = new MyCameraSurfaceView(this, myCamera);

        myCameraPreview=(FrameLayout)findViewById(R.id.camera_preview);
        myCameraPreview.addView(myCameraSurfaceView);
        ll=(LinearLayout)findViewById(R.id.ll);
        myCameraPreview.setOnTouchListener(this);   

      outputFile=new File("/sdcard/myvideo.mp4");
      if(outputFile.exists()){
          outputFile.delete();
          outputFile=new File("/sdcard/myvideo.mp4");
          try {
            outputFile.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
      }
      else{
           try {
            outputFile.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
      }

      f1=new File("/sdcard/myvideo1.mp4");
      if(f1.exists()){
          f1.delete();
          f1=new File("/sdcard/myvideo1.mp4");
          try{
              f1.createNewFile();
          }
          catch(Exception e){
              e.printStackTrace();
          }
      }
      else{
              try{
              f1.createNewFile();
          }
          catch(Exception e){
              e.printStackTrace();
          }
      }
      f2=new File("/sdcard/myvideo2.mp4");
      if(f2.exists()){
          f2.delete();
          f2=new File("/sdcard/myvideo2.mp4");
          try{
              f2.createNewFile();
          }
          catch(Exception e){
              e.printStackTrace();
          }
      }
      else{
              try{
              f2.createNewFile();
          }
          catch(Exception e){
              e.printStackTrace();
          }
      }

    }

  /*  public int getFrontCameraId() {
        CameraInfo ci = new CameraInfo();
        for (int i = 0 ; i < Camera.getNumberOfCameras(); i++) {
            Camera.getCameraInfo(i, ci);
            if (ci.facing == CameraInfo.CAMERA_FACING_FRONT) return i;
        }

        return -1; // No front-facing camera found
    }*/

    private Camera getCameraInstance(){
        // TODO Auto-generated method stub
              Camera c = null;
              try {
                 /* int index = getFrontCameraId();
                  if (index != -1)
                   c = Camera.open(index);*/
                  c = Camera.open(); // attempt to get a Camera instance
              }
              catch (Exception e){
                  // Camera is not available (in use or does not exist)
              }
              return c; // returns null if camera is unavailable
        }

    public void submit(View v){

     // stop recording and release camera
     // mediaRecorder.stop();  // stop the recording
    //  releaseMediaRecorder(); // release the MediaRecorder object
        Log.d("outputFile",""+f1.length());
      progressStatus=progressBar.getProgress();

      //Exit after saved
     // finish();
      myButton.setText("capture");

      recording=false;
      submit.setVisibility(View.GONE);
   }

   public void submit1(View v){

     // stop recording and release camera
    // mediaRecorder.stop();  // stop the recording
    // releaseMediaRecorder(); // release the MediaRecorder object

   progressBar.setProgress(0);
   progressStatus=0;
     //Exit after saved
    // finish();
     myButton.setText("capture");

     recording=false;
     submit1.setVisibility(View.GONE);
   }
   public void display(View v){
       Intent i=new Intent(this,VideoPlayer.class);
       startActivity(i);
   }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public boolean onTouch(View arg0, final MotionEvent event) {
        // TODO Auto-generated method stub
         eventAction=event.getAction();
          switch (event.getAction()) {
          case MotionEvent.ACTION_DOWN:
          {    
              i=i+1;
              Toast.makeText(getApplicationContext(),"action_down",Toast.LENGTH_SHORT).show();
              //releaseCamera();
              if(!prepareMediaRecorder()){
                  Toast.makeText(MainActivity.this,
                    "Fail in prepareMediaRecorder()!\n - Ended -",Toast.LENGTH_LONG).show();
                  finish();
                 }
            progressBar.setProgress(progressStatus);
             myButton.setText("STOP");

             try{
              mediaRecorder.start();
             }
             catch(Exception e){
                 e.printStackTrace();
                Log.d("vd","exception at start method");
             }
             if(f1.exists()){
             long l=f1.length();
             Log.d("start","started"+l);
             }
             if(f2.exists()){
             long m=f2.length();
             Log.d("start","started"+m);
             }

              recording = true;           

             if(progressBar.getProgress()>=5000){
                 mThreadProgress2=new ThreadProgress2();
                 mThreadProgress2.start();
             }

              mHandler = new Handler(new Callback() {

                    public boolean handleMessage(final Message msg) {
                        runOnUiThread(new Runnable() {
                             public void run() {
                                 if( event.getAction()!=MotionEvent.ACTION_UP){
                                 progressBar.setProgress(msg.arg1);

                             }
                                 if(progressBar.getProgress()==10000){
                                    Log.d("unicorn","1000");
                                     submit1.setVisibility(View.VISIBLE);

                                }

                             }
                         });
                        return false;
                    }
                });

              mThreadProgress=new ThreadProgress();
            mThreadProgress.start();

             handler = new Handler(new Callback() {

                public boolean handleMessage(final Message msg) {
                    runOnUiThread(new Runnable() {
                         public void run() {
                             if(  event.getAction()!=MotionEvent.ACTION_UP)
                             progressBar.setProgress(msg.arg1);
                             if(progressBar.getProgress()==5000){
                                 submit.setVisibility(View.VISIBLE);

                            }

                         }
                     });
                    return false;
                }
            });

            return true;
          }
          case MotionEvent.ACTION_UP:
          {    // nothing to do
            Toast.makeText(getApplicationContext(),"action_up",Toast.LENGTH_SHORT).show();
            myButton.setText("capture");

            mediaRecorder.stop();  // stop the recording
            releaseMediaRecorder(); // release the MediaRecorder object
           try {
            myCamera.reconnect();
           } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
           }

             //Exit after saved
            // finish();

             recording=false;
             progressStatus=progressBar.getProgress();

             if(i%2==0){
                    long len=f1.length();
                    Log.d("length",""+f1.getPath()+len);
                    Combine1 c1=new Combine1();
                   c1.start();             
             }
              else{
                   long len=f2.length();
                   Log.d("length",""+f2.getPath()+len);
                   Combine2 c2=new Combine2();
               c2.start();
              }           

            break;
          }
          default:
              return false;
      }

        return true;
    }

    private boolean prepareMediaRecorder(){

          // myCamera = getCameraInstance();
           mediaRecorder = new MediaRecorder();
           myCamera.stopPreview();

           myCamera.unlock();
           mediaRecorder.setCamera(myCamera);

           mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
           mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

           mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
         //  mediaRecorder.setVideoSize(400,400);

                if(i%2==0){
                 Log.d("outputfile",""+f1.getPath()+f1.length());
                 mediaRecorder.setOutputFile(f1.getPath());
                 Log.d("outputfile",""+f1.getPath()+f1.length());
               }
           else{
               Log.d("outputfile",""+f2.getPath()+f2.length());
               mediaRecorder.setOutputFile(f2.getPath());
               Log.d("outputfile",""+f2.getPath()+f2.length());
           }

           mediaRecorder.setMaxDuration(10000); // Set max duration 10 sec.

           mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
            //  mediaRecorder.setOnInfoListener(this);

           mediaRecorder.setPreviewDisplay(myCameraSurfaceView.getHolder().getSurface());

           try {
               mediaRecorder.prepare();
           } catch (IllegalStateException e) {
               Log.d("prepare","illegalstateexception");
               e.printStackTrace();
               releaseMediaRecorder();
               Toast.makeText(getApplicationContext(),"illegal state exception",Toast.LENGTH_SHORT).show();
               return false;
           } catch (IOException e) {
               Log.d("prepare","ioexception");
               e.printStackTrace();
               releaseMediaRecorder();
               Toast.makeText(getApplicationContext(),"IOexception",Toast.LENGTH_SHORT).show();
               return false;
           }
           Log.d("after prepare","after prepare f1"+f1.length());
           Log.d("after prepare","after prepare f2"+f2.length());

           return true;

        }

    public void combine(String file){
        Log.d("combine","combining"+file);
        try{
        File inputFile=new File(file);
        FileInputStream fis=new FileInputStream(inputFile);

        long inputlen=inputFile.length();
        Log.d("combine","lengthbefore write"+inputlen);

         File outputFile = new File("/sdcard/myvideo.mp4");
         FileOutputStream fos = new FileOutputStream(outputFile,true);

         byte fileContent[]= new byte[(int)inputFile.length()];
         fis.read(fileContent);

         long len=outputFile.length();
         Log.d("combine","lenth"+len);

         fos.write(fileContent);
         fis.close();

          fos.close();

          inputlen=inputFile.length();
          len=outputFile.length();
         Log.d("combine","inputlength"+inputlen);
         Log.d("combine","lenth"+len);

       /*  File f= new File(file); 
         boolean deleted = f.delete();

         if(deleted){
             Log.d("combine","deleted"+file); 
         } */

        }
        catch(Exception e){
            e.printStackTrace();

        }
    }

          @Override
          protected void onPause() {
              super.onPause();
              releaseMediaRecorder();      // if you are using MediaRecorder, release it first
              releaseCamera();            // release the camera immediately on pause event
          }

          private void releaseMediaRecorder(){
              if (mediaRecorder != null) {
                  mediaRecorder.reset();   // clear recorder configuration
                  mediaRecorder.release(); // release the recorder object
                  mediaRecorder = null;
                 // myCamera.lock();           // lock camera for later use
              }
          }

          private void releaseCamera(){
              if (myCamera != null){
                  myCamera.release();       // release the camera for other applications
                  myCamera = null;
              }
          }

    public class MyCameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback{

        private SurfaceHolder mHolder;
           private Camera mCamera;

        public MyCameraSurfaceView(Context context, Camera camera) {
               super(context);
               mCamera = camera;

               // Install a SurfaceHolder.Callback so we get notified when the
               // underlying surface is created and destroyed.
               mHolder = getHolder();
               mHolder.addCallback(this);
               // deprecated setting, but required on Android versions prior to 3.0
               mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
           }

        public void surfaceChanged(SurfaceHolder holder, int format, int weight,
          int height) {
               // If your preview can change or rotate, take care of those events here.
               // Make sure to stop the preview before resizing or reformatting it.

               if (mHolder.getSurface() == null){
                 // preview surface does not exist
                 return;
               }

               // stop preview before making changes
               try {
                   mCamera.stopPreview();
               } catch (Exception e){
                 // ignore: tried to stop a non-existent preview
               }

               // make any resize, rotate or reformatting changes here

               // start preview with new settings
               try {
                   mCamera.setPreviewDisplay(mHolder);
                   mCamera.startPreview();

               } catch (Exception e){
               }
        }

        public void surfaceCreated(SurfaceHolder holder) {
         // TODO Auto-generated method stub
         // The Surface has been created, now tell the camera where to draw the preview.
               try {
                   mCamera.setPreviewDisplay(holder);
                   mCamera.startPreview();
               } catch (IOException e) {
               }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
         // TODO Auto-generated method stub

        }
        }

    public class ThreadProgress extends Thread implements Runnable {
        int progressValue=progressStatus;
        public void run() {

             while( progressBar.getProgress()<5000 && eventAction!=MotionEvent.ACTION_UP  ) {

                          Log.d("unicorn","in while loop"+progressValue);
                                  progressValue++;
                                  Message message = new Message();
                                  message.arg1 = progressValue;
                                  if(progressValue<=5000 && eventAction!=MotionEvent.ACTION_UP)
                                  handler.sendMessage(message);

                }

        }

    } 

    public class ThreadProgress2 extends Thread implements Runnable {
        int progressValue=progressStatus;
        @Override
        public void run() {

             while( progressBar.getProgress()<10000 && eventAction!=MotionEvent.ACTION_UP ) {
                     // try{

                          Log.d("unicorn2","in while loop"+progressValue);
                                  progressValue++;
                                  Message message = new Message();
                                  message.arg1 = progressValue;
                                  if(progressValue<=10000 && eventAction!=MotionEvent.ACTION_UP)
                                  mHandler.sendMessage(message);
                                  //Thread.sleep(1000);
                                //} catch (InterruptedException e){
                                      //  e.printStackTrace();
                                       // break;
                               // }
                }

        }

    } 

    public class Combine1 extends Thread implements Runnable{
        public void run(){
            try{
                int c;

            FileInputStream fin=new FileInputStream(f1);            

            FileOutputStream fout=new FileOutputStream(outputFile,true);

            long len1=f1.length();
            Log.d("length","myvideo1.mp4"+len1);
            long len2=outputFile.length();
            Log.d("length","myvideo.mp4"+len2);

            while((c=fin.read())!=-1){
                fout.write(c);
            }

            len2=outputFile.length();
            Log.d("length","myvideo.mp4"+len2);

            fin.close();
            fout.flush();
            fout.close();

            }
            catch(Exception e){
                e.printStackTrace();
            }

        }   

    }

    public class Combine2 extends Thread implements Runnable{
        public void run(){
            try{
            int j=0;
            FileInputStream fin=new FileInputStream(f2);            

            FileOutputStream fout=new FileOutputStream(outputFile,true);

            long len1=f2.length();
            Log.d("length","myvideo2.mp4"+len1);
            long len2=outputFile.length();
            Log.d("length","myvideo.mp4"+len2);

            while((j=fin.read())!=-1){
            fout.write(j);
            }
            len2=outputFile.length();
            Log.d("length","myvideo.mp4"+len2);

            fin.close();
            fout.flush();
            fout.close();   

            }
            catch(Exception e){
                e.printStackTrace();
            }

        }
    }   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T13:37:39.910

为了组合多个视频文件，您应该使用 mp4parser 库：[https ://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/AppendExample.java](https://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/AppendExample.java)

# spring - jsf 2 或 spring 3 中的动态依赖注入

> ID：16036888
> 
> 赞同：1
> 
> 时间：2013-04-16T12:18:27.207
> 
> 标签：spring, jsf, dependency-injection

我有 3 个接口实现，为了实例化其中一个，我需要检查数据库中的参数。我打算用工厂模式来做，但是由于我在我的应用程序的其余部分中使用 JSF 2 依赖注入，我想知道是否有办法做到这一点，是否可以动态地进行依赖注入？我可以以某种方式指出一种方法或某种东西来在每个时刻获取正确的实现吗？对于后端，我使用的是弹簧核心，因此可以使用弹簧上下文来实现这一点。

我对所有东西都使用注释（`@Autowired`对于 Spring，`@ManagedProperty`对于 JSF）。

编辑：该项目将部署在 Tomcat 服务器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:42:42.517

我建议你在你的 JSF 项目中使用 CDI，然后你可以使用编程注入。您应该首先将 CDI 限定符添加到您的接口实现中（您基本上将为每个实现创建自定义注释 -[教程](https://netbeans.org/kb/docs/javaee/cdi-inject.html)）。然后你可以使用类似的东西

```
@Named //similar to ManagedBean
@RequestScoped
public Bean {

    @Inject
    @Any
    Instance<YourInterface> yourInterface;

    public void someMethod() {
         if(someCondition) {
             InterfaceImpl impl = yourInterface.select(new SomeOfYourQualifiers()).get();
         }
    }     
} 
```

[资源](http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#lookup)

此外，您不必`Autowired`使用`Inject`. 我也确信有一些 Spring 方法可以做到这一点，但我将把它留给一些 Spring 专家在这里:-)

**编辑**

根据this [answer](https://stackoverflow.com/questions/12139050/cdi-on-tomcat-7-does-it-make-sense)真的可以在Tomcat上运行CDI。您还会发现一些类似这样[的](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/environments.html#d0e4998)教程。Spring 方法可能是使用[AutowireCapableBeanFactor](https://stackoverflow.com/questions/2383205/in-spring-can-i-autowire-new-beans-from-inside-an-autowired-bean)但正如我所说，我不太了解 Spring，所以它只是一个疯狂的猜测:-)

# php - 在 PHP 中上传文件后显示的错误消息

> ID：16036889
> 
> 赞同：0
> 
> 时间：2013-04-16T12:18:27.460
> 
> 标签：php

我的功能有问题：

```
 public uploadfile()
        {
        //$msg=111;
        $instId=Yii::app()->session['loginUser']['intInstId'];
        $userloginId=Yii::app()->session['loginUser']['bintLoginId'];
        $folderId=$_POST['id'];
        $path=DIRECTORYPATH.'/directory/otherAssignment/'.$instId;
        //$tempFolder =$path."/tmp";
        $fileElementName = $folderId;

        if (!empty($_FILES[$fileElementName]['error'])) {
            switch($_FILES[$fileElementName]['error']) {
            case '1':
                $error = 'The uploaded file exceeds the upload_max_filesize "
                    ."directive in php.ini';
                break;
            case '2':
                $error = 'The uploaded file exceeds the MAX_FILE_SIZE directive ".
                    ."that was specified in the HTML form';
                break;
            case '3':
                $error = 'The uploaded file was only partially uploaded';
                break;
            case '4':
                $error = 'No file was uploaded.';
                break;
            case '6':
                $error = 'Missing a temporary folder';
                break;
            case '7':
                $error = 'Failed to write file to disk';
                break;
            case '8':
                $error = 'File upload stopped by extension';
                break;
            case '999': 
            default:
                $error = 'No error code avaiable';
            }
        } elseif (empty($_FILES[$fileElementName]['tmp_name']) 
            || $_FILES[$fileElementName]['tmp_name'] == 'none'
        ) {
            $error = 'No file was uploaded..';
        } else {
            $fileSize=$_FILES[$fileElementName]['size'];
            $status=RepositoryModel::model()
                ->storageSpaceValidation($fileSize);
            if ($status==1) {
                if (!is_dir($path)) {
                    mkdir($path, 0777);
                }

                if (!is_dir($path."/".$userloginId)) {
                    mkdir($path."/".$userloginId, 0777);
                }

                if (!is_dir($path."/".$userloginId."/tmp")) {
                    mkdir($path."/".$userloginId."/tmp", 0777);
                }

                $uploadPath=$path."/".$userloginId."/tmp";
                RepositoryModel::model()
                    ->emptyTempFolder($uploadPath); 
                if (move_uploaded_file(
                $_FILES[$fileElementName]["tmp_name"],
                $uploadPath.'/'.$_FILES[$fileElementName]['name']
                )
                ) {
                    $msg= $_FILES[$fileElementName]['name'];
                }
            } else {
                $error="File can not be uploaded because "
                    ."your Storage spacae capacity is exceed.<br/> "
                    ."Plese Contact with admin!";
            }
        }
    } else {
        $session->destroy();
        $msg= "<script>window.location.href='".SITEURL."';</script>";
    }
    echo "{";
        echo                "error: '" . $error . "',\n";
        echo                "msg: '" . $msg . "'\n";
        echo "}";

} 
```

当我尝试上传文件时，文件已上传，但仍`No file was uploaded.`显示消息。谁能告诉我上传文件时它被上传到 Temp 文件夹但成功后仍会显示错误消息的原因`No file was uploaded.`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:27:25.170

如果您没有上传文件，那么您的表单很可能缺少`multipart`声明。

确保您的`<form>`元素包含该`enctype="multipart/form-data"`属性。

像这样的东西：

```
<form action="...your-url-here..." enctype="multipart/form-data" method="post"> 
```

# python - 使用 PYTHON 读取文件和正则表达式

> ID：16036890
> 
> 赞同：0
> 
> 时间：2013-04-16T12:18:32.863
> 
> 标签：python, regex, python-2.6

我是 python 和一般编程的初学者，我想在 python 中创建一个脚本，可以判断消息是否已发送。阅读日志文件后，我注意到每条消息都有一个**中间**，所以我有一个想法，但我不确定......如果我将所有中间保存在列表或字典中，我将能够将它与行进行比较有 mid+ **\s** +“ **OK** ”或“ **Error** ” 这是我的日志文件的一部分（mid 每次都加一。）有人可以帮我开始吗？因为我不知道如何开始这个..提前谢谢

```
01:09:25.258 mta    Messages       I Doc O:NVS:SMTP/a.b@x.de R:NVS:SMS.0/+01542xx **mid:6261**
01:09:41.965 mta    Messages       I Rep O:NVS:SMTP/a.b@x.de R:NVS:SMS.0/+01542xx **mid:6261**
01:09:41.965 mta    Messages       I Rep **6261** OK, Accepted (ID: 26) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:18:28.767

像这样的东西？

```
import re

pat = r'\*\*(\d+)\*\* (OK|Error)'
text = open('emailex.txt').read()
d = {}
for res in re.finditer(pat, text):
    d[res.group(1)] = res.group(2)

errors = [mid for mid,status in d.items() if status == 'Error'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:15:11.263

我建议如下：

让我们假设日志文件不是太大而无法放入内存。

```
import re
with open("myfile.log") as infile:
    data = infile.read() 
```

首先，找到文件中的所有消息 ID：

```
messages = set(m.group(1) for m in re.finditer(r"\*\*mid:(\d+)\*\*", data)) 
```

现在，找到存在`OK`一行的所有消息 ID

```
successes = set(m.group(1) for m in re.finditer(r"\*\*(\d+)\*\*\s*OK", data)) 
```

两者的区别在于没有`OK`消息的 ID 集合：

```
failures = messages - successes 
```

# c# - 自定义多因素 Active Directory 身份验证

> ID：16036891
> 
> 赞同：1
> 
> 时间：2013-04-16T12:18:41.130
> 
> 标签：c#, .net, windows, active-directory

我首先要说我不知道​​我想要的东西是否真的可以完成。如果是这样，请不要犹豫，告诉我我在做梦。

我想在 C# 中创建一个自定义活动目录“身份验证器”。我的意思是，我希望每当有人登录时，首先检查他们存储在 AD 中的密码，然后执行第二步身份验证。只有当两个步骤都通过时，用户才能登录。

现在，如果我想将此身份验证器集成到定制产品中，我想上述内容并不太牵强，对吧？我是否还想知道这个身份验证器是否可以在登录 Windows 本身时使用？或者可能是针对 AD 进行身份验证的预先存在的产品？

如果我不是在做梦，会有人知道任何好的文章/API 可以让我继续前进吗？API 不一定是免费的，因为我愿意花一些钱让事情进展得更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:17:44.547

这是完全可行的。但是我想指出，在将服务器绑定到 Active Directory 时，您正在检查提供的用户名（通常是 sAMAccountName）和在一个操作中输入的密码。在 C# 中有几种方法可以做到这一点，但很多人（包括我自己）选择使用`System.DirectoryServices`and`System.DirectoryServices.Protocols`命名空间。

这就是我当前将用户绑定到 Active Directory 的方式，然后根据此方法的结果，我要么显示授权失败的原因，要么允许他们继续使用他们在应用程序中的帐户。

```
//Define your connection
LdapConnection ldapConnection = new LdapConnection("123.456.789.10:389");

try
{
      //Authenticate the username and password
      using (ldapConnection)
      {
          //Pass in the network creds, and the domain.
          var networkCredential = new NetworkCredential(Username, Password, Domain);
          //Since we're using unsecured port 389, set to false. If using port 636 over SSL, set this to true.
          ldapConnection.SessionOptions.SecureSocketLayer = false;
          ldapConnection.SessionOptions.VerifyServerCertificate += delegate { return true; };
          //To force NTLM\Kerberos use AuthType.Negotiate, for non-TLS and unsecured, use AuthType.Basic
          ldapConnection.AuthType = AuthType.Basic;
          ldapConnection.Bind(networkCredential);
      }
      catch (LdapException ldapException)
      {
          //Authentication failed, exception will dictate why
      }
} 
```

如果您还想更进一步并检索有关此用户的属性，[请在此处查看此线程](https://stackoverflow.com/questions/12911391/set-callback-for-system-directoryservices-directoryentry-to-handle-self-signed-s/13073365#13073365)。

另外，我**强烈**推荐 Softerra 的 LDAP 浏览器来测试任何与 LDAP 相关的东西——它是一个很棒的产品，而且它是免费的。你可以[从这里下载。](http://www.ldapbrowser.com/download.htm)

希望这能让你朝着正确的方向前进。

# c++ - 是否有可能获得链数？

> ID：16036899
> 
> 赞同：2
> 
> 时间：2013-04-16T12:19:08.117
> 
> 标签：c++, boost-asio

我目前有一个以线性顺序为我执行工作的链。我想知道是否有办法获得否。链队列中的作业数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:31:59.160

没有简单的方法，因为[`strand`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__strand.html)既不提供访问信息的公共方式，也不直接包含计数。如果您访问私有成员变量，则可以通过`count_`within获取大小`strand::impl_`。

替代方法包括：

*   包装`strand`，提供一个类似的 API 来增加和减少计数。这种新类型需要包装任何正在发布的处理程序，因为一旦用户的处理程序完成执行，它就需要注入一个钩子来减少计数。
*   创建一个仿函数对象，该对象在其构造期间增加计数，并在销毁期间减少计数。所有通过链发布或分派的处理程序都将由函子包装。

# memory - MIPS 程序集中的内存寻址

> ID：16036900
> 
> 赞同：0
> 
> 时间：2013-04-16T12:19:11.953
> 
> 标签：memory, assembly, mips

我最近正在阅读 Patterson 和 Hennessy 的书《计算机组织与设计》，以学习一点汇编。我遇到了一个部分，其中解释了**lw**和**sw**机器指令以及它们如何将 16 位立即数作为加载/存储地址。作者在这里指出的是：“16 位地址意味着加载字指令可以加载基址寄存器**rs**中地址的 [...] 8192 个字的区域内的任何字”。

我的问题是：

*   这是否意味着所有寄存器的地址都相隔 8192 个字？
*   另外，这是否意味着整个可用内存为 32 * 8192 = 262144 个字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:35:38.100

> 这是否意味着所有寄存器的地址都相隔 8192 个字？

不，寄存器没有地址。

> 另外，这是否意味着整个可用内存为 32 * 8192 = 262144 个字？

不，这些立即数是用于加载/存储的基地址的*偏移量。*它允许您在基地址的 -32768..+32767 字节内指定地址。32768/sizeof(word) == 8192。如果你想超出这个范围，你可以简单地改变基址寄存器的值。
寄存器的数量与您可以寻址的内存量无关。

例如：

```
li $a0,0       # set $a0 to 0
lw $t0,0($a0)  # load a word from address 0
lw $t0,8($a0)  # load a word from address 8

lui $a0,0xffff # set the upper half-word of $a0 to 0xffff
lw $t0,4($a0)  # load a word from address 0xffff0004 
```

# javascript - 使用递归 javascript 函数维护数组值

> ID：16036902
> 
> 赞同：0
> 
> 时间：2013-04-16T12:19:22.700
> 
> 标签：javascript, function, recursion, local-variables

我有一个我们在工作中使用的程序，它将其数据输出到 XML 文件（其中几个）。我正在尝试开发一个 HTA（是的 HTA，我很抱歉）来读取这些文件并处理它们的数据。不幸的是，有许多 XML 文件，我只需要阅读一些特定的文件，所以我正在尝试编写一个通用的“XML 到数组”函数。

我得到它来读取 XML 文件，现在我想将文件处理成二维数组。但是，由于我使用的是递归函数，我似乎丢失了数据。这是功能：

```
NodesToArray = function (xmlDOC){

    //Must redeclare "i" with each recursion, or it won't work correctly. ie: for(VAR i = 0...  
    for(var i = 0; i < xmlDOC.length ; i++){

        //Just because it has a child still do the check.
        if(xmlDOC[i].childNodes.length > 1){

             //Recursively run the function.
             var ReturnArray = NodesToArray(xmlDOC[i].childNodes);
             //alert(ReturnArray + " " );   

             if(ReturnArray) return ReturnArray;

     }else{

    //Check to see if the node has a child node, if not and a child node is called, it will error out and stop
    if(xmlDOC[i].hasChildNodes() == true){

        return xmlDOC[i].firstChild.nodeValue;

         }
       }    
     }  
   } 
```

在我返回第一个子值的地方，我发出了警报，并且能够看到我想要的所有数据。当然，当我设置它时，我发现它没有保留数据。我读了很多书，头撞在桌子上，还是什么都想不出来。

我用谷歌搜索，搜索了这个网站，并咨询了许多论坛，但找不到任何对我有用的东西。我很不情愿地在这里发帖，因为我处于死胡同。感谢您的帮助，我将尽我所能提供任何其他信息。

只是一个注释，但我希望能够在没有任何库（特别是 jQuery）的情况下做到这一点。HTA 似乎不支持很多较新的 Javascript。无论如何，我都不是专业的编码员，而是通过从头开始做所有事情来学习。

*不知道如何设置解决方案，但我找到了*

```
function NodesToArray(xmlDOC, returnArray){
    for(var i = 0; i < xmlDOC.length ; i++){
        if(xmlDOC[i].childNodes.length > 1){
            returnArray[returnArray.length] = NodesToArray(xmlDOC[i].childNodes, []);
        }else{
            if(xmlDOC[i].hasChildNodes() == true){      
                returnArray[returnArray.length] = (xmlDOC[i].firstChild.nodeValue);
            }
        }
    }
    return returnArray;
}

getArray = NodesToArray(getXML.getElementsByTagName(tagName)[0].childNodes,[]); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:35:09.483

在同一个容器中递归检索数据的一般方法是编写两个函数：

1.  第一个是您调用并返回数组的那个
2.  第二个由第一个函数调用并进行递归。为了能够将数据放在同一个数组中，该函数必须将其作为参数。

这是一些伪代码

```
getData(node) {
   _2D_array = new array[][];
   getData(node, _2D_array, 0);
   return array;
}

getData(node, _2D_array, depth) {
   if(node) { // end of recursion ?
       _2D_array[depth].add(...); // populate from node
       getData(node.next, _2D_array, depth++);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:34:18.213

当第一个元素被处理时您的程序退出，因为函数返回。一个函数只能返回一次。您需要将 return 语句移到循环之外，以便循环完成。

# http - 网站上的 GET 请求与独立的

> ID：16036906
> 
> 赞同：0
> 
> 时间：2013-04-16T12:19:29.257
> 
> 标签：http, httpwebrequest

我有点困惑，或者我不完全理解 http 请求。

有一个网站，通过 GET 请求获取搜索结果。我可以在 Firebug 中看到整个参数列表，如果我单击“搜索”，结果会如您所愿显示。我不明白的是，如果我采用此请求 URL（具有相同的参数）并将其复制到新的浏览器选项卡中，它不再返回结果。相反，我看到了 500 - 内部服务器错误。

有人可以解释为什么会发生这种情况，或者在访问 URL 时我该怎么做才能看到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:35:12.770

正如 robert_b_clark 建议的那样，解决方案是在发出请求时发送引荐来源标头。

# highcharts - 使用 highcharts 在 x 轴上显示 Plotted 值

> ID：16036908
> 
> 赞同：0
> 
> 时间：2013-04-16T12:19:34.250
> 
> 标签：highcharts, highstock

如何将绘制的值正确显示到图表上的精确毫秒？如何将点或工具提示精确到毫秒？

```
 xAxis: {
        type: 'datetime',
        plotLines: [{
            color: '#FF0000',
            width: 2,
            value: 1366113390066
        }]

    } 
```

[JSFiddle 链接](http://jsfiddle.net/santoshgiridhar/75PzT/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:38:45.270

您的系列未显示，因为您的数据数组不是可用的格式。

这个：

```
data: [{
                'value': 731,
                    'timestamp': 1366032438641
            } 
```

应该是这样的：

```
data: [{
  'x': 1366032438641,
  'y': 731
} 
```

或者，更简单地说，这个：

```
data: [[1366032438641,731]] 
```

参考：[http ://api.highcharts.com/highcharts#series.data](http://api.highcharts.com/highcharts#series.data)

你必须澄清你对问题的另一部分的意思。

编辑：{

如果您想要实际的毫秒精度，您必须在图表中有足够的宽度来指定每毫秒一个像素。这显然不会在任何真实图表中发生。

无法在显示 20 多个小时的约 600 像素宽图表中绘制 2 像素宽的线，并将其精确到毫秒。

这大约是 600 像素中的 7200 万毫秒，相当于每毫秒 0.0000083 像素……（或每像素 120,000 毫秒）

:)

# c - 比较两个大文件的所有元素

> ID：16036911
> 
> 赞同：2
> 
> 时间：2013-04-16T12:19:48.170
> 
> 标签：c, perl

如何使用 C 或 Perl 将文件的所有元素与另一个文件的所有元素进行比较以获得更大的数据？文件 1 包含 100,000 个这样的数字，文件 2 包含 500,000 个元素。

我在 foreach 中使用了 foreach 来拆分数组中的每个元素。它在 perl 中完美运行，但检查和打印文件 1 中 File2 中单个列的每次出现的元素所花费的时间为 40 分钟。有 28 个这样的列。

有什么方法可以减少时间或使用 C 等其他语言？

### 文件 1：

```
0.1
0.11
0.12
0.13
0.14
0.15
0.16
0.17
0.18
0.19
0.2 
```

### 文件 2：

```
0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 0.1 0.11    0.12    0.13    0.14    0.15    0.16    0.17    0.18    0.19    0.2 0.21    0.22    0.23    0.24    0.25    0.26    0.27    0.28
1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 1.1 1.11    1.12    1.13    1.14    1.15    1.16    1.17    1.18    1.19    1.2 1.21    1.22    1.23    1.24    1.25    1.26    1.27    1.28 
```

## 编辑：

## 预期输出：

****如果文件 2 中的元素，匹配打印“列号”，如果不打印“0”。****

 **```
1  2  0  0  0  0  0  0  0  10  11  12  13  14  15  16  17  18  19  20  0   0  0  0  0  0  0  0   
0  0  0  0  0  0  0  0  0   0   0  0   0   0   0   0   0   0   0   0  0   0  0  0  0  0  0  0 
```

这是我正在使用的代码。注意：它检查文件 1 中的 File2 列，如果为 true 则打印列*号**，如果为**false*则打印'0' 。它将打印 28 个不同文件中每一列的输出。

 **```
#!/usr/bin/perl-w
chomp($file = "File1.txt");
open(FH, $file);
@k_org = <FH>;
chomp($hspfile = 'file2.txt');
open(FH1, $hspfile);
@hsporg = <FH1>;
for $z (1 .. 28) {
  open(OUT, ">$z.txt");
  foreach (@hsporg) {
    $i = 0;
    @h_org = split('\t', $_);
    chomp ($h_org[0]);
    foreach(@k_org) {
      @orginfo = split('\t', $_);
      chomp($orginfo[0]);
      if($h_org[0] eq $orginfo[0]) {
        print OUT "$z\n";
        $i = 1;
        goto LABEL;
      } elsif ($h_org[0] ne $orginfo[0]) {
        if($h_org[0]=~/(\w+\s\w+)\s/) {
          if($orginfo[0] eq $1) {
            print  OUT "0";
            $i = 1;
            goto LABEL;
          }
        }
      }
    }
    if ($i == 0) {
      print OUT "0";
    }
    LABEL: 
  }
}
close FH;
close FH1;
close OUT; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:28:50.677

如果你[`sort(1)`](http://linux.die.net/man/1/sort)有文件，你可以一次检查它。不应超过几秒钟（包括排序）。

另一种方法是将 file1 中的所有值加载到哈希中。这有点消耗内存，特别是如果 file1 很大，但应该很快（同样，不超过几秒钟）。

对于这样的工作，我会选择 perl 而不是 C，而且我在 C 方面比在 perl 方面更精通。对于这种工作，用 perl 编码要快得多，不易出错并且运行速度足够快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:06:25.200

该脚本运行一个测试用例。请注意，您的预期输出在客观上是错误的：在文件 2，第 1 行，第 20 列中，该值`0.2`存在。

```
#!perl

use 5.010; # just for `say`
use strict; use warnings;
use Test::More;

# define input files + expected outcome
my $file_1_contents = <<'_FILE1_';
0.1
0.11
0.12
0.13
0.14
0.15
0.16
0.17
0.18
0.19
0.2
_FILE1_

my $file_2_contents = <<'_FILE2_';
0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 0.1 0.11 0.12 0.13 0.14 0.15 0.16 0.17 0.18 0.19 0.2 0.21 0.22 0.23 0.24 0.25 0.26 0.27 0.28
1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 1.1 1.11 1.12 1.13 1.14 1.15 1.16 1.17 1.18 1.19 1.2 1.21 1.22 1.23 1.24 1.25 1.26 1.27 1.28
_FILE2_

my $expected_output = <<'_OUTPUT_';
1 2 0 0 0 0 0 0 0 10 11 12 13 14 15 16 17 18 19 20 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
_OUTPUT_

# open the filehandles
open my $file1, "<", \$file_1_contents or die "$!";
open my $file2, "<", \$file_2_contents or die "$!";
open my $expected, "<", \$expected_output or die "$!";

my %file1 = map { chomp; 0+$_ => undef } <$file1>;

while (<$file2>) {
    chomp;
    my @vals = split;
    # If value exists in file1, print the col number.
    my $line = join " " => map { exists $file1{0+$vals[$_]} ? $_+1 : 0 } 0 .. $#vals;
    chomp(my $expected_line = <$expected>);
    is $line, $expected_line;
}
done_testing; 
```

要将完全相同的输出打印到 28 个文件，您将删除测试代码，而不是

```
say {$_} $line for @filehandles; 
```

反而。

# 旧答案

您现有的代码效率低下且不习惯。让我帮你解决这个问题。

首先，*所有*的 Perl 脚本`use strict; use warnings;`都使用`use 5.010;`.

该调用接受一个变量并从字符串末尾`chomp`删除（通常是换行符）的当前值。`$/`这很重要，因为 readline 运算符不会为我们这样做。声明一个常量变量是不好的。而是做

```
my $file   = "File1.txt"; 
my $hspfle = "File2.txt"; 
```

`use strict`强制您正确声明变量，您可以使用`my`.

要打开文件，您应该使用以下成语：

```
open my $fh, "<", $filename or die "Can't open $filename: $!"; 
```

而不是`or die ...`你可以`use autodie`在你的脚本顶部。

如果您无法打开文件，这将中止脚本，告诉您原因（`$!`），并指定显式打开模式（此处：`<`= 读取）。这避免了文件名中带有特殊字符的错误。

词法文件句柄（在`my`变量中，与裸字文件句柄相比）具有适当的范围，并且会自行关闭。您应该使用它们还有其他各种原因。

该`split`函数采用正则表达式，而不是字符串作为第一个参数。如果你仔细检查你的程序，你会发现`split`每个元素`@hsporg`28 次，每个元素`@k_org`28 × @hsporg 次。这是非常缓慢且不必要的，因为我们可以事先这样做。

如果条件为假，则无需在

```
if ($h_org[0] eq $orginfo[0]) {
  ...;
} elsif ($h_org[0] ne $orginfo[0]) {
  ...;
} 
```

as`$a ne $b`完全等同于`not $a eq $b`.

在 Perl 中使用 a 是非常不习惯的`goto`，并且跳转到某个地方的标签也不是特别快。标签主要用于循环控制：

```
# random example
LOOP: for my $i (1 .. 10) {
  for my $j (1 .. 5) {
    next      if     $i == $j; # start next iteration of current loop
    next LOOP if 2 * $i == $j; # start next iteration of labeled loop
    last LOOP if $i + $j == 13;# like `break` in C
  } 
```

`redo`循环控制动词类似于，`next`但不重新检查循环条件，如果有的话。

由于这些循环控制设施，以及打破任何封闭循环的能力，维护标志或精心设计的 goto 通常是不必要的。

* * *

这是脚本的清理版本，没有修复太多实际算法：

```
#!/usr/bin/perl

use strict; use warnings;
use autodie; # automatic error messages

my ($file, $hspfile) = ("File1.txt", "file2.txt");
open my $fh1, "<", $file;
open my $fh2, "<", $hspfile;

my @k_org  = <$fh1>;
my @hsporg = <$fh2>;

# Presplit the contents of the arrays:
for my $arr (\@k_org, \@hsporg) {
  for (@$arr) {
    chomp;
    $_ = [ split /\t/ ]; # put an *anonymous arrayref* into each slot
  }
}

my $output_files = 28;

for my $z (1 .. $output_files) {
  open my $out, ">", "$z.txt";

  H_ORG:
  for my $h_org (@hsporg) {
    my $i = 0;

    ORGINFO:
    for my $orginfo (@k_org) {
      # elements in array references are accessed like $arrayref->[$i]
      if($h_org->[0] eq $orginfo->[0]) {
        print $out "$z\n";
        $i = 1;
        last ORGINFO; # break out of this loop
      } elsif($h_org->[0] =~ /(\w+\s\w+)\s/ and $orginfo->[0] eq $1) {
        print $out "0";
        $i = 1;
        last ORGINFO;
      }
    }
    print $out "0" if not $i;
  }
}

# filehandles are closed automatically. 
```

现在我们可以进一步优化：在每一行中，您只使用第一个元素。这意味着我们不必存储其余部分：

```
...;
  for (@$arr) {
    chomp;
    $_ = (split /\t/, $_, 2)[0]; # save just the first element
  }
...;
    ORGINFO:
    for my $orginfo (@k_org) {
      # elements in array references are accessed like $arrayref->[$i]
      if($h_org eq $orginfo) {
        ...;
      } elsif($h_org =~ /(\w+\s\w+)\s/ and $orginfo eq $1) {
        ...;
      }
    } 
```

此外，访问标量比访问数组元素要快一些。

第三个参数`split`限制结果片段的数量。因为我们只对第一个字段感兴趣，所以我们也不必拆分其他字段。

接下来，我们`last`退出`ORGINFO`循环，然后检查一个标志。这是不必要的：我们可以直接跳到`H_ORG`循环的下一个迭代，而不是设置标志。如果我们自然退出`ORGINFO`循环，则保证不会设置标志，因此我们可以执行以下操作`print`：

```
 H_ORG:
  for my $h_org (@hsporg) {
    for my $orginfo (@k_org) {
      if($h_org eq $orginfo) {
        print $out "$z\n";
        next H_ORG;
      } elsif($h_org =~ /(\w+\s\w+)\s/ and $orginfo eq $1) {
        print $out "0";
        next H_ORG;
      }
    }
    print $out "0";
  } 
```

然后，您将*相同*的数据比较 28 次以将其打印到不同的文件中。更好：定义两个 sub`print_index`和`print_zero`. 在这些内部，您循环输出文件句柄：

```
# make this initialization *before* you use the subs!
my @filehandles = map {open my $fh, ">", "$_.txt"; $fh} 1 .. $output_files;

...; # the H_ORG loop

sub print_index {
  for my $i (0 .. $#filehandles) {
    print {$filehandles[$i]} $i+1, "\n";
  }
}
sub print_zero {
  print {$_} 0 for @filehandles;
} 
```

然后：

```
 # no enclosing $z loop!
  H_ORG:
  for my $h_org (@hsporg) {
    for my $orginfo (@k_org) {
      if($h_org eq $orginfo) {
        print_index()
        next H_ORG;
      } elsif($h_org =~ /(\w+\s\w+)\s/ and $orginfo eq $1) {
        print_zero();
        next H_ORG;
      }
    }
    print_zero();
  } 
```

这样可以避免检查您已经知道不匹配的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:35:53.693

在 C 中，您可以尝试使用“qsort”和“bsearch”函数

首先，您需要将文件加载到数组中。

比你应该执行一个 qsort() （除非你确定元素有顺序）。并使用 bsearch() 对数组执行二进制搜索。

[http://linux.die.net/man/3/bsearch](http://linux.die.net/man/3/bsearch)

这将比逐个检查所有元素要快得多。

*如果它不存在，您可以尝试在 perl 中实现二进制搜索，这是一个简单的算法。*****

# single-sign-on - netsuite sso 登陆 url 重定向到客户登录

> ID：16036912
> 
> 赞同：0
> 
> 时间：2013-04-16T12:19:51.003
> 
> 标签：single-sign-on, netsuite

我正在尝试实现入站单点登录功能以从外部应用程序登录 NetSuite。我为此遵循的步骤是：

1.  创建私有公钥并将公钥发送到 NetSuite。
2.  使用公司 ID、用户 ID 和当前时间戳生成令牌
3.  构建了单点登录 URL

当我将 URL 重定向到浏览器时，我收到重定向到 NetSuite 客户登录或类似“系统维护期”的通知。获取 NetSuite 单点登录 jsp 页面应该怎么做？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T21:18:14.200

```
If (your URL is well-formed) and 
   (your authorization token has the correct parameters) and
   (your authorization token's timestamp has not expired) and
   (your authorization token is encrypted correctly) and
   (your authorization token is encoded correctly) then

        if (this is the first time mapping the user_id) then
            You will be redirected to a special SSO first-time login page
        else
            You will be redirected to the user account's home page
        endif
else
    You will be redirected to the standard NetSuite login page
endif 
```

请注意，组织的第一个映射必须映射到 NetSuite 管理员帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T02:22:58.133

第一次进行“重定向”时，称为映射。这意味着您将 SSO 登录映射到您的标准 NetSuite 登录（电子邮件 + 密码）。您只需要完成此步骤，然后在下次进行 sso 登录时，您应该会被定向到您的 NetSuite 登录页面/仪表板。如果这没有发生，那么 SSO 的设置方式就有问题。

# python - 列表列表的最小值

> ID：16036913
> 
> 赞同：12
> 
> 时间：2013-04-16T12:19:52.480
> 
> 标签：python, list, min

我有一个这样的列表列表：

```
[[10564, 15], [10564, 13], [10589, 18], [10637, 39], [10662, 38], [10712, 50], [10737, 15], [10762, 14], [10787, 9], [10812, 12], [10837, 45], [3, 17], [7, 21], [46, 26], [48, 12], [49, 24], [64, 14], [66,
 17], [976, 27], [981, 22], [982, 22], [983, 17], [985, 13], [517, 9], [521, 15], [525, 11], [526, 13], [528, 14], [698, 14], [788, 24], [792, 19]] 
```

我试图找到每个列表中第二个元素的最小值（所以比较 15 到 13 到 18 等不比较 10564 和 15 ），但也将它分成范围，所以我可以说，最低的第二个元素[1]在每个列表中，仅当 element[0] 超过 10000 等时。我该怎么做？我试过了，目前只能比较同一列表中的元素，这不是我想要的。在我提到的情况下，我将返回 [10787, 9] 但如果有另一个超过 10000 的值 9 我也想返回它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T12:24:33.920

这取决于您想要输出的内容。首先，您需要根据“范围” ^(1过滤您的列表)

```
gen = (x for x in lists if x[0] > 10000) 
```

`if`条件可以任意复杂（在有效语法范围内）。例如：

```
gen = (x for x in lists if 5000 < x[0] < 10000) 
```

完全没问题。

* * *

现在，如果您只想要子列表中的第二个元素：

```
min(x[1] for x in gen) 
```

当然，你可以内联整个事情：

```
min(x[1] for x in lists if x[0] > 10000) 
```

如果你想要整个子列表：

```
from operator import itemgetter
min(gen,key=itemgetter(1)) 
```

例子：

```
>>> lists = [[10564, 15], [10564, 13], [10589, 18], [10637, 39], [10662, 38], [10712, 50], [10737, 15], [10762, 14], [10787, 9], [10812, 12], [10837, 45], [3, 17], [7, 21], [46, 26], [48, 12], [49, 24], [64, 14], [66,17], [976, 27], [981, 22], [982, 22], [983, 17], [985, 13], [517, 9], [521, 15], [525, 11], [526, 13], [528, 14], [698, 14], [788, 24], [792, 19]]
>>> gen = (x for x in lists if x[0] > 10000)
>>> min(x[1] for x in gen)
9
>>> gen = (x for x in lists if x[0] > 10000)
>>> from operator import itemgetter
>>> min(gen,key=itemgetter(1))
[10787, 9] 
```

不幸的是，这些只会给你第*一个*符合条件的子列表。要获得所有这些：

```
target = min(x[1] for x in lists if x[0] > 10000)
matches = [x for x in lists if (x[1] == target) and (x[0] > 10000)] 
```

如果您确定将有少于匹配项，则可以使用and`N`更有效地执行此操作。在您不知道匹配数上限的一般情况下，我认为这种解决方案更好（与 O(NlogN) 的排序相比，它是 O(N)）。`heapq``itertools.takewhile`

* * *

^(¹注意“生成器表达式”在用完之前只能迭代一次)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T12:26:03.540

```
>>> l=[[10564, 15], [10564, 13], [10589, 18], [10637, 39]]
>>> min(x[1] for x in l if x[0] > 10000)
13
>>> 
```

更新您的评论（您可以在 min 函数中使用 lambda 作为 key，在大型列表中使用 itemgetter 更快）：

```
>>> min((x for x in l if x[0] > 10000), key=lambda k:k[1])
[10564, 13] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-16T12:29:37.600

这是一种非常简单的方法，它只找到最小值，然后根据该值构建列表。

```
>>> a = [[10564, 15], [10564, 13], [10589, 18], [10637, 39], [10662, 38], [10712, 50], [10737, 15], [10762, 14], [10787, 9], [10812, 12], [10837, 45], [3, 17], [7, 21], [46, 26], [48, 12], [49, 24], [64, 14], [66,
...  17], [976, 27], [981, 22], [982, 22], [983, 17], [985, 13], [517, 9], [521, 15], [525, 11], [526, 13], [528, 14], [698, 14], [788, 24], [792, 19]]
>>> a_min = min(i[1] for i in a)
>>> [i[0] for i in a if i[1] == a_min and i[0] > 10000] + [a_min]
[10787, 9] 
```

代码正确显示多个值：

```
>>> a += [[10391, 9]] #add another pair with a first value > 10000
>>> [i[0] for i in a if i[1] == a_min and i[0] > 10000] + [a_min]
[10787, 10391, 9] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T12:46:17.840

如果您需要多个`min`s，那么也许您最好过滤适用的元素并对它们进行排序......

```
vals = sorted((el for el in your_list if el[0] >= 10000), key=lambda L: L[1])
# [[10787, 9], [10812, 12], [10564, 13], [10762, 14], [10564, 15], [10737, 15], [10589, 18], [10662, 38], [10637, 39], [10837, 45], [10712, 50]] 
```

然后你可以`vals[0]`拿到第一个，`vals[1]`得到第二个，或者使用切片，比如`vals[:5]`......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T12:24:14.773

```
a=[[10564, 15], [10564, 13], [10589, 18], [10637, 39], [10662, 38], [10712, 50], [10737, 15], [10762, 14], [10787, 9], [10812, 12], [10837, 45], [3, 17], [7, 21], [46, 26], [48, 12], [49, 24], [64, 14], [66, 17], [976, 27], [981, 22], [982, 22], [983, 17], [985, 13], [517, 9], [521, 15], [525, 11], [526, 13], [528, 14], [698, 14], [788, 24], [792, 19]]

print min(map(lambda y: y[1] ,filter(lambda x: x[0]>10000,a))) 
```

# c# - 如何使用外键的实体框架值显示

> ID：16036914
> 
> 赞同：5
> 
> 时间：2013-04-16T12:20:02.840
> 
> 标签：c#, asp.net, entity-framework, telerik, telerik-grid

我正在一个网格上工作，我不想显示连接的外键的值，但它不应该看起来像（`1,2,3,57`等）已经在工作......我想真正显示数字背后的值，比如（`test,lead,foo,bar`等.. ) 我认为这应该是可能的

我正在使用 Entity Framework 5.0 和 asp.net 4.5

我的`EntityDataSource`：

```
<asp:EntityDataSource ID="EntityDataSource1" runat="server" 
     ConnectionString="name=zevtestEntities" DefaultContainerName="zevtestEntities" 
     EnableFlattening="False" EntitySetName="BU"></asp:EntityDataSource> 
```

我已经尝试过：

```
<telerik:GridBoundColumn
    DataField="ZevUser.FirstName" FilterControlAltText="Filter Creator column"
    HeaderText="Creator" ItemStyle-Width="60px" SortExpression="Creator" UniqueName="Creator">
    <ItemStyle Width="60px" />
</telerik:GridBoundColumn> 
```

并且`ZevUser`是值存储为文本的源表，还有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T02:06:59.213

你几乎拥有它。您可以使用 EntityDataSource 中的 include 属性引用 EF 中的相关实体。在 EntitySetName 之后尝试 Include="ZevUser"。有关更多信息，请参阅以下链接。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.include.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.entitydatasource.include.aspx)

# javascript - 用javascript将逗号后两位数内的数字四舍五入

> ID：16036923
> 
> 赞同：0
> 
> 时间：2013-04-16T12:20:34.747
> 
> 标签：javascript, jquery

我有一个产品要添加到商店中，其中有两个`input`字段`priceBase`和`priceFinal`. 一是不含TAX，二是含TAX。

使用此 javascript 函数时：

```
jQuery(function($){

    var priceBase = $('input[name="mprices[basePrice][]"]', '#productPriceBody');
    var priceFinal = $('input[name="mprices[salesPrice][]"]', '#productPriceBody');
    var priceDiff = priceFinal.val() - priceBase.val();
    var priceTax = priceDiff / priceBase.val();

    alert(priceFinal.val()); // 1.40004
    alert(priceBase.val());  // 1.16667
    alert(priceDiff);        // 0.23333399999999993
    alert(priceTax);         // 0.19999999999999993

}); 
```

我想如何将一个`priceTax`值从`0.19999999999999993`to舍入`0.20`？就像你知道的普通数学计算一样，如果它是 4 及以下，它会四舍五入到更低的数字，如果它是 5，它会四舍五入到更高的数字。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:22:35.450

你似乎想要

```
alert(priceDiff.toFixed(2)); 
```

但是您应该在进行数学运算之前解析这些值。它在这里工作是因为你很幸运：

```
"33"-"12" => "21"
"33"+"12" => "3312" 
```

因此，为了避免将来出现错误（例如，当您使用`+`而不是`-`），我建议始终解析字段值：

```
var priceDiff = parseFloat(priceFinal.val()) - parseFloat(priceBase.val()); 
```

# php - 视频文件名无法正确加载

> ID：16036924
> 
> 赞同：0
> 
> 时间：2013-04-16T12:20:37.170
> 
> 标签：php, video

我是 PHP 新手。其他一切都可以在我的网站上运行，但我似乎对这段特定的代码有疑问。这`$efn`是我的文件名，我需要从 MySQL 数据库中检索它，但这段代码似乎不起作用。它适用于普通的视频容器，但在使用该`if`语句时不起作用。

任何想法如何解决这一问题？

```
 <?php
$video_container = substr($efn, -3);
if ($video_container == 'mp4') {
    echo '<video preload="auto" width="640" height="264" poster="../images/<?php echo $thumb ?>" controls="controls" autoPlay="false">
<source src="<?php echo $efn ?>" type="video/mp4">
</video>';
}
else {
    echo '<video height="620" width="480" controls>
<source src="<?php echo $efn ?>" type ="video/avi" />
</video>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:29:54.183

打印字符串时出现语法问题。将`<?php echo $fn ?>`部分替换为`' . $efn . '`

像这样：

```
$video_container = substr($efn, -3);
if ($video_container == 'mp4') {
    echo '<video preload="auto" width="640" height="264" poster="../images/<?php echo $thumb ?>" controls="controls" autoPlay="false">
<source src="' . urlencode($efn)  . '" type="video/mp4">
</video>';
}
else {
    echo '<video height="620" width="480" controls>
<source src="' . urlencode($efn) . '" type ="video/avi" />
</video>';
} 
```

# php - 从 CHtml::dropDownList 中获取选定的值

> ID：16036927
> 
> 赞同：1
> 
> 时间：2013-04-16T12:20:43.607
> 
> 标签：php, yii

我有一个关于 Yii 框架的问题。

假设我有如下代码所示的下拉列表。

我需要打印选定的值，我尝试这样做，`$_POST['countries']` 但什么也没发生。

我只需要将所选值存储在变量中，以便我可以对其进行操作。

```
<?php 
      echo CHtml::dropDownList('countries', $select = array(),
      CHtml::listData($countries, 'code', 'name'));
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:36:16.663

var 对应于使用 发送的`$_POST`一些数据`HTTP protocol`，因此要使用此 var，客户端（浏览器）需要向服务器发送数据。

由于您想在用户在下拉列表中选择一个值后显示某些内容，因此您需要使用在客户端执行的 javascript。

这是一个使用 jquery 获取选定值的示例。然后，您应该更新希望值出现的 div，但由于它不在您的问题中，我无能为力！

```
$('#dropDownId').change(function(){ 
    var value = $('#dropDownId :selected').text();
    //Here update the div where you need to see the selected value
}); 
```

`dropDownId`您需要提供给 dropDownList 的 id在哪里（在[CHtml::dropDownList html 选项](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:16:56.077

您还可以使用 Ajax 请求。如果您想制作一些相关的下拉列表，那就更好了。例如：

```
echo $form->dropDownList($profile, $field->varname,CHtml::listData(Countries::model()->findAll(),'short','title'), array(
    'class'=>"chzn-select",
    'empty'=>"Select country",  
    'ajax' => array(
                    'type' => 'POST',
                    'url'=>$this->createUrl('registration/state'),   
                    'update' => '#Profile_state',                        
                    'data'=>array('country'=>'js:this.value',), 
                    'success'=> 'function(data) {
                                    $("#Profile_state").empty();
                                    $("#Profile_state").append(data);
                                    $("#Profile_state").trigger("liszt:updated");

                                            } ',

    ))); 
```

然后在您的控制器中，您可以使用 POST 示例：

```
 public function actionState()
{

 $data=Regions::model()->findAll('country_code=:country_code', 
                  array(':country_code'=> $_POST['country']));                
 echo "<option value=''>Select state</option>";
    $data=CHtml::listData($data,'region_code','region_title');
            foreach($data as $value=>$state)  {
                        echo CHtml::tag
                                ('option', array('value'=>$value),CHtml::encode($state),true);
                    }   

} 
```

# python - python 3多行输入

> ID：16036933
> 
> 赞同：0
> 
> 时间：2013-04-16T12:20:49.533
> 
> 标签：python, list, input

我正在用 Python 制作数独求解器，并且我的代码可以工作，但我需要指定一个列表，该列表由列表中的 9 个列表组成，以便对其进行分析。我目前正在努力解决如何做到这一点，以便当提示用户输入时，他们输入 9 个不带空格的数字，然后再输入 8 次；每次他们提交一行时，该行都会转换为一个列表。目前我必须手动指定列表（参见下面的示例）。

```
b=[[2,5,9,7,1,6,4,8,3],
[8,6,7,3,4,5,9,1,2],
[4,1,3,9,2,8,6,7,5],
[3,9,8,5,7,4,1,2,6],
[5,4,6,2,8,1,7,3,9],
[1,7,2,6,3,9,5,4,8],
[9,8,4,1,6,3,2,5,7],
[6,2,1,8,5,7,3,9,4],
[7,3,5,4,9,2,8,6,1]] 
```

我正在考虑使用 split 函数做一个 while 循环，然后将每个值附加到一个列表中，但这只会创建一个巨大的列表。

有人能帮我吗？

如有必要，我可以对此进行扩展或为您提供代码，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:28:04.077

输入没有空格分隔

```
b = [[int(x) for x in input()] for i in range(9)] 
```

如果用空格分隔会不会更好看，我知道您的问题指定不这样做，但您可以这样做：

```
b = [[int(x) for x in input().split()] for i in range(9)] 
```

注意：`raw_input`在 Python 2.7 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:28:06.267

首先，找出`len()`他们的第一个输入是什么，然后创建一个该长度的列表。然后，每次通过您的循环，创建一个列表并将其添加到您的容器列表中。一旦你有正确数量的列表来构建你的行，就停止询问输入。有几种方法可以使用`while`or`for`循环来完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:36:40.780

您可以对输入使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)，然后将其附加到您的主列表中：

```
main = []
...
#get input
...
main.append([int(i) for i in input]) 
```

# ios - 使用不在顶级视图中的 UITabBarController

> ID：16036947
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:21:31.987
> 
> 标签：ios, user-interface, uitabbarcontroller

我正在为汽车构建应用程序...

应用程序的第一个视图是表“UITableViewController”中列出的汽车，当用户选择汽车“单元格”时，应用程序导航到“UITabBarController”，因为对于每辆汽车都有很多信息和规范需要在单独的视图中显示，所以我在这里使用“UITabBarController”

所以标签栏控制器不在顶视图级别....

**问题 1：** UITabBarController 的这种用法正确吗？我害怕被苹果应用审查拒绝，我在苹果文档中读到

> “一般来说，使用标签栏来组织应用程序级别的信息。标签栏非常适合在主应用程序视图中使用，因为它是扁平化信息层次结构并提供对多个对等信息类别或模式的访问的好方法一次。”

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41)

**问题2：**市面上有没有不把tab bar controller放在top view层的app！请给我他们的链接......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:13:27.040

1.  是的，您的应用不会被拒绝。
2.  应该有像您将要使用的那样使用 tabbarcontroller 的应用程序，但我不知道它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:32:52.353

这里的关键词是“同行信息类别”。这意味着与共同主题相关的信息，在这种情况下是特定型号的汽车。

因此，具有发动机数据选项卡、内部规格选项卡、燃油性能选项卡等的结构将非常好。所有选项卡都显示与同一辆车相关的数据。如果您通过包含与所选汽车无关的选项卡来混淆事情，那么意义不大。

理想情况下，您希望将 嵌入到`UITabBarController`a 中`UINavigationController`，以便导航栏显示上下文（例如汽车名称或类似名称）和返回导航按钮以提供对表视图的访问。

# xaml - 为什么 WebView 总是在顶部并且不能处理焦点等？

> ID：16036949
> 
> 赞同：0
> 
> 时间：2013-04-16T12:21:40.383
> 
> 标签：xaml, windows-8, microsoft-metro

假设您的 Metro 应用程序中的 WebView 组件占据了所有“页面”高度（当然“标题栏”除外）。在 WebView 的左侧，您还有一些其他元素。appBar 中还有一些按钮，ListView 菜单附加到按钮按下事件。现在尝试查看您的 ListViews 并尝试使用 TAB 键在页面元素之间移动焦点；）我已经有了一些解决方法。我只是想问是否有人知道微软为什么这样做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:19:19.607

WebView 有它自己的 HWND（窗口），而您的 Metro 应用程序在第二个 HWND 中呈现。关于窗口和重叠的 Windows 开发历史悠久。通常当一个窗口在另一个窗口前面时，操作系统只绘制顶部窗口像素。

这就是这里发生的事情。WebView 窗口正在绘制在您的其他 UI 元素之上。

# linux - 从堆栈中弹出和打印 argc

> ID：16036956
> 
> 赞同：1
> 
> 时间：2013-04-16T12:22:19.430
> 
> 标签：linux, assembly, x86, nasm, argc

根据[这篇](http://leto.net/writing/nasm.php)论文和一些stackoverflow帖子，**argc**在堆栈的顶部，而**argv**在它的下面。我已经尝试了大约 3-4 种不同的方法：

*   将其弹出到初始化变量（.data）中 - 通过调用完成输出`printf`。
*   将其弹出到未初始化的空间 (.bss) - 通过调用完成输出`sys_write()`
*   上述+调整的混合。

论坛上有人告诉我**argc**和**argv**不在堆栈中，我不明白；其他人如何使用类似的代码来做这件事？

这是我尝试过的一个例子（3天的知识——尽量不要傻笑）：

```
section .bss
        argc:   resd 1      ; alloc 4 bytes for popped value

section .text
        global _start

_start:
        pop   dword[argc]   ; pop argc, place in var
        mov   ebx,0x01      ; file descriptor = STDOUT
        mov   ecx,argc      ; var (addr) - points to buffer
        mov   edx,1         ; length of buffer (single digit)
        mov   eax,0x04      ; syscall number for sys_write()
        int   0x80          ; request the kernel to make syscall

exit:
        mov   ebx,0x00      ; arg for sys_exit() - sys_exit(0)
        mov   eax,0x01      ; syscall number for sys_exit()
        int   0x80          ; request the kernel to make syscall 
```

解决方案：section .data msg db`Value: %d\n`

```
section .text
        global main
        extern printf

main:
        push   dword[esp+4]
        push   msg
        call   printf
        add    esp,8

        mov    eax,0
        ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:39:29.307

get 的过程`argc`对我来说看起来不错（对于 32 位 Linux 机器），虽然你有 4 个字节，因为堆栈顶部很可能包含调用`main`.
此外，`sys_write`系统调用需要一个指向`ecx`. 你给它的是一个指向整数的指针，这不是一回事。
如果要打印的值，`argc`则必须先将其转换为字符串（或使用该`printf`函数）。

这是一些示例代码（我正在使用 GNU 汇编器，因为我在这台机器上没有 NASM）：

```
format: .asciz "%d\n"
.text
.globl main
  .type main, @function
main:
  pushl 4(%esp)       # push argc
  pushl $format       # push the format string
  call printf
  addl $8,%esp        # pop the arguments

  movl  $0, %eax      # return value 
  ret 
```

# javascript - 是否可以动态创建 JayData 实体/模型/上下文？

> ID：16036959
> 
> 赞同：1
> 
> 时间：2013-04-16T12:22:30.097
> 
> 标签：javascript, jquery, jaydata

是否可以动态创建 JayData 实体模型和上下文？然后使用它们？

我进行 Ajax 调用，然后执行以下操作

```
function prepareEntityModel(json)
{
    // var entity = {
    //  Id: { type: "int", key:true },
    //  Name: { type: "string" },
    // });

    $data.Entity.extend("someData" + id, entity);
} 
```

然后我尝试创建一个上下文。令我惊讶的是，这似乎有效：`var t= "someData" + 81`

```
function createContext(t)
{
    $data.EntityContext.extend(t + "Context", {
        t: { type: $data.EntitySet, elementType: t },
    });

    var fn = eval(t + "Context");

    var context = new fn({
        name: "webSql",
        databaseName: "aDB"
    });

    return context;
} 
```

上下文甚至似乎响应`onReady()`事件。但是该表是使用名称“t”创建的。在这一点上，我基本上是在猜测。在上下文中，我无法通过使用路径访问我的数据`context["someData" + id).addMany(data);`

我使用 JayData 的时间不到 24 小时，所以如果这对术语来说是荒谬的，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:02:26.853

当你声明一个类型时，你会得到类型定义，比如

```
 var mytype = $data.Entity.extend("someData" + id, entity);
 var newInstance = new mytype(); 
```

当你声明上下文时，你也得到了上下文定义，不需要 eval()

```
var contexttype = $data.EntityContext.extend(t + "Context", {...
var context = new contexttype({... 
```

可以使用“tableName”参数（更简单）或通过为实体集指定一个好名称（更难）来指定表名，例如：

```
var contextDef = {};
contextDef[t] = { type: $data.EntitySet, elementType: t };
var fn = $data.EntityContext.extend(t + "Context", contextDef); 
```

希望这会有所帮助，请随时在此处或我们的论坛中提出更多问题。当您遇到问题时，最好的方法是创建一个小的 jsfiddle 来演示问题。

# sencha-touch-2 - 将选择器从“.x-list-item”更改为“.x-list-item > .x-dock-vertical > .x-dock-body”

> ID：16036961
> 
> 赞同：0
> 
> 时间：2013-04-16T12:22:34.503
> 
> 标签：sencha-touch-2, selector

正如标题所说：我需要知道如何在 Sencha Touch 中将选择器从 '.x-list-item' 更改为 '.x-list-item > .x-dock-vertical > .x-dock-body'。

谢谢。平坦的

# maven - 如何一次执行多个 JUnit 测试套件..！

> ID：16036967
> 
> 赞同：0
> 
> 时间：2013-04-16T12:22:55.690
> 
> 标签：maven, junit

我已经编写了一个用于运行多个测试用例的多个 JUnit 测试套件。（像 AllTest1.java/AllTest2.java 这样的多个 JUnit 测试是我的 Web 项目的要求）

现在，我想一次运行我的多个测试套件类（AllTest1.java/AllTest2.java），这意味着在相同的构建时间。为此，我使用了 maven-surefire-plugin 但无法同时执行两个我用过的许多逻辑要执行但没有成功:(..有什么方法可以并行执行这两个测试套件。
任何帮助将不胜感激。

这是我当前的 maven-surefire-plugin 配置：

```
 <plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-surefire-plugin</artifactId>
 <version>2.8.1/version>
 <configuration>
 <includes>
 <include>**/AllTests1.java</include>
 </includes>
 <excludes>
 <exclude>**/AllTests2.java</exclude>
 </excludes>
 </configuration>
<executions>
<execution>
  <id>integration-test</id>
  <goals>
    <goal>integration-test</goal>
  </goals>
</execution>
<execution>
  <id>verify</id>
  <goals>
    <goal>verify</goal>
  </goals>
</execution> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:34:07.980

这看起来确实像集成测试和单元测试或两者的组合。为此，我建议使用[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/integration-test-mojo.html)来运行应该遵循[命名模式](http://maven.apache.org/surefire/maven-failsafe-plugin/integration-test-mojo.html#includes)的集成测试：

```
<includes>
 <include>**/IT*.java</include>
 <include>**/*IT.java</include>
 <include>**/*ITCase.java</include>
</includes> 
```

此外，通常的单元测试将由[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/)执行，它应遵循以下[命名模式](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#includes)：

```
<includes>
 <include>**/*Test*.java</include>
 <include>**/*Test.java</include>
 <include>**/*TestCase.java</include>
</includes> 
```

此外，您应该避免使用测试套件，因为根据命名模式可以区分它是单元测试还是集成测试。

更改为上述架构后，您可以通过以下方式运行单元测试

```
mvn test 
```

使用以下命令运行集成测试：

```
mvn verify 
```

# xml - 内存有限时如何将文件压缩到单个文件中？

> ID：16036968
> 
> 赞同：0
> 
> 时间：2013-04-16T12:22:56.083
> 
> 标签：xml, json, stream, streaming, large-files

我认为这将在**stream**的帮助下成为可能，但究竟如何呢？

目前我最好的猜测是为**Json**或**Xml**使用库。

目前，有一些库，我看过可以一次只使用一个元素非常有效地解析和编写 json/xml 的教程（即[https://sites.google.com/site/gson/streaming](https://sites.google.com/site/gson/streaming)）

主要问题是我的决赛中没有那么多元素，`json/xml`但我的元素的值很大！

想象一下，把整个文件编码成一个字符串，这样你就可以有一个`json`像这样的元素：`"file1": "AAFA252265VFAAAAER............"` *<---这个字符串对于当前可用内存来说太长了*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:55:42.607

好的，不用担心我找到了解决方案，我在这里分享它。

好吧**，GSON**是开源的，因此您可以看到它在下面是如何工作的。
有多种方法可以写入 json 值，但它们都不适用于流。
换句话说，它自己在流上写入 GSON 库，但没有这样的方法`writer.value(stream)`

**解决方案**：

***更优雅***：当然，一种方法是您可以覆盖一个方法，或者只是复制粘贴整个方法并自己编写一个新方法。

***虚拟但更快***：创建一个**Json 数组**。因此，您无需编写单个 json 字符串，而是编写多个属于数组的 json 字符串。每个字符串的长度当然取决于你有多少可用内存！
使用 GSON 读取器逐个字符串读取此数组字符串会重新创建文件。

*注意：您必须使用某种编码将文件写入字符串*

# ios - 使用 case switch 而不是多个 if 语句进行错误处理

> ID：16036970
> 
> 赞同：3
> 
> 时间：2013-04-16T12:22:58.553
> 
> 标签：ios, objective-c, if-statement, switch-statement

我正在构建一个通过移动 SAAS - Parse 登录的应用程序。

登录请求可能会返回多个错误代码。目前为每个错误代码运行一个 if 语句并显示一个相关的警报视图，如下所示：

```
 if (error == nil) {
            // Something went wrong
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"LoginAlertErrorTitle", @"Login Error Alert View Title") message:NSLocalizedString(@"LoginStandardError", @"Login error message text - standard error") delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"GlobalOKButtonTitle", @"Global Ok button title"), nil];
            [alertView show];
        } else  if ([error code] == kPFErrorObjectNotFound) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"LoginAlertErrorTitle", @"Login Error Alert View Title") message:NSLocalizedString(@"LoginErrorObjectNotFound", @"Login error message text - object not found") delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"GlobalOKButtonTitle", @"Global Ok button title"), nil];
            [alertView show];
        } else  if ([error code] == kPFErrorConnectionFailed) {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"LoginAlertErrorTitle", @"Login Error Alert View Title") message:NSLocalizedString(@"LoginAlertErrorConnection", @"Login error message text - connection failed") delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"GlobalOKButtonTitle", @"Global Ok button title"), nil];
            [alertView show];
        } else {
            NSLog(@"A Login error occurred: %i",[error code]);
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"LoginAlertErrorTitle", @"Login Error Alert View Title") message:[[error userInfo] objectForKey:@"error"] delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"GlobalOKButtonTitle", @"Global Ok button title"), nil];
            [alertView show];
        } 
```

有没有更有效的方法来处理大小写/切换？

实际的错误代码设置如下：

```
/*! @abstract 100: The connection to the Parse servers failed. */
extern NSInteger const kPFErrorConnectionFailed; 
```

这让我觉得我可以在案例陈述中进行设置。这将是解决此问题的正确/最佳方法吗？它应该像`handleErrorAlert:`可能那样采用单独的方法吗？

我将如何在上面的示例中编写此开关？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T13:01:35.770

在这种情况下，您是否使用`switch`声明或一系列`if`-`else if`实际上只是一个品味问题。是的，该`switch`语句的效率稍高一些，但在这种情况下，它真的没关系（这不像你每秒调用数千次）。使用您认为更具可读性的内容。

你可能想稍微重构一下你的警报视图代码——在所有情况下你都在做同样的事情，只是错误消息不同，所以有很多重复的代码。你可以像这样重构它：

```
NSString *errorMessage = nil;
if (error == nil) {
    errorMessage = NSLocalizedString(@"LoginStandardError", @"Login error message text - standard error");
} else {
     switch ([error code]) {
          case kPFErrorObjectNotFound:
               errorMessage = NSLocalizedString(@"LoginErrorObjectNotFound", @"Login error message text - object not found");
               break;
          case kPFErrorConnectionFailed:
               errorMessage = NSLocalizedString(@"LoginAlertErrorConnection", @"Login error message text - connection failed");
               break;
          default:
               errorMessage = [[error userInfo] objectForKey:@"error"];
     }
}
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"LoginAlertErrorTitle", @"Login Error Alert View Title") 
                                                    message:errorMessage
                                                   delegate:self
                                          cancelButtonTitle:nil
                                          otherButtonTitles:NSLocalizedString(@"GlobalOKButtonTitle", @"Global Ok button title"), nil];
[alertView show]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T12:23:52.363

`typedef enum`在 a 上使用A `switch`，我认为这将是最干净的方式。像这样的东西：

```
typedef enum
{
kServerError,
kInternetError,
kUnknowError
} kTypeError;

switch (aTypeError)
{
.
.
.
} 
```

在您的特定情况下，您需要注意`switch`...里面的消息`UIAlertView`是一个共同的部分。所以：

```
NSString *aTitle = nil;
NSString *aMessage = nil;

switch (aTypeError)
{
    case kUnknowError:
    {
        aTitle = ...;
        aMessage = ...;
    }
    break;
}

UIAlertView *alertView = [UIAlertView alloc] ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:47:54.830

```
if (!error) {
    // Handle error (?).
}

switch ([error code]) {
    case kPFErrorObjectNotFound:
        // Handle error.
        break;
    case kPFErrorConnectionFailed:
        // Handle error.
        break;
    default:
        // Handle error.
} 
```

这仅在返回的值`-code`可用于`switch`测试表达式时才有效。AFAIK，`int`受支持——我不知道其他类型。

# silverlight - 重置 VisualState 管理器不起作用

> ID：16036974
> 
> 赞同：0
> 
> 时间：2013-04-16T12:23:09.437
> 
> 标签：silverlight, xaml, winrt-xaml, visualstatemanager

[如何在可见性变化时将 Silverlight 控件的视觉状态重置为“正常”](https://stackoverflow.com/questions/5913086/how-to-reset-a-silverlight-controls-visual-state-back-to-normal-on-change-of)

在上面的链接中，讨论了同样的事情，尽管我在更改状态时遇到了一些问题。

我读过一篇文章说，如果 VS 处于某种状态，并且如果我们强制它转到该状态，它只会返回 true。这很好，但在我的事业中，我有一个按钮，并且该按钮在弹出窗口中。当按钮单击时，正在关闭弹出窗口。再次打开弹出窗口时，似乎一直应用鼠标悬停状态。尽管在弹出打开事件中强制使用 Vs for Normal 状态，但它仍处于旧状态。在强制 VS 时，它返回 true，这意味着应用了正常状态，但 UI 仍处于鼠标悬停状态。

可能是什么原因？

# java - java中的点对点文件传输

> ID：16036979
> 
> 赞同：0
> 
> 时间：2013-04-16T12:23:24.507
> 
> 标签：java

我正在尝试在 Java 中创建对等文件共享网络。我正在使用 UDP 连接通过网络发送数据包。但我无法通过 UDP 连接传输完整的文件。大多数数据包每次都丢失。如果我延迟发送数据包，接收器会收到所有数据包。

这是我的发件人代码：

```
while (fso.hasNextBlock()){   
   byte[] temp1 =fso.nextBlock();   
   int size1 = temp1.length;  

   packet=new DatagramPacket(temp1, size1,ipaddress,port);
   socket.send(packet);                           

   // Thread.sleep(100);
} 
```

这是接收方代码：

```
FileOutputStream  out=new FileOutputStream(file);
byte[] data=new byte[size];
DatagramPacket packet=new DatagramPacket(data, data.length);
int i=0;
while(true){                   
    socket.receive(packet);
    out.write(packet.getData());
    System.out.println("packet "+i);
    i++;
    ..... // some codes                    
} 
```

我的代码有什么问题吗？
我不熟悉点对点网络。在文件共享网络中使用 TCP 还是 UDP 哪个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:37:19.910

UDP 协议在设计上是不可靠的。它不保证数据包被按顺序接收并完全接收。

当你想通过 UDP 实现一个文件传输协议时，你需要自己实现这个。

1.  在每个数据包前面加上一个序列号
2.  检查接收器上的序列号，以避免以错误的顺序重新组装它们
3.  当接收者错过了一个在合理的时间范围内没有收到的序列号时，为接收者实现一些机制来要求发送者重新传输它。

或者只是使用 TCP，它在幕后为你做这件事。

当您没有充分的理由使用 UDP 进行文件传输时，请使用 TCP，因为这样您就不必担心所有这些。HTTP、FTP 和 BitTorrent（互联网上使用最广泛的三种文件传输协议）使用 TCP 是有原因的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:58:59.460

您所看到的是由于发送数据的速度超过网络路径可以处理的速度而导致的数据包丢失。UDP 没有流量控制或丢失恢复。如果您只是将数据包转储到网络中，路由器队列将溢出并丢弃一些数据包。这就是为什么放慢速度可以减少损失。

要使用 UDP 进行文件传输，您需要实现自己的流量控制和丢失恢复算法。做到这一点并不容易，做好也很难。基于 UDP 的协议通常用于 TCP 算法崩溃的地方，这仅仅是因为 UDP 提供了一个干净的板来实现新算法。

除非您想深入了解网络传输设计理论，否则最好使用 TCP 或查看已经存在的众多 UDP 文件传输协议之一。

如果您对自己设计感到好奇，我建议您从网络性能统计的背景开始。我写了一篇关于这个主题的文章：[损失、延迟和速度](http://www.dataexpedition.com/support/notes/tn0021.html)。这篇文章专注于网络性能分析，但它也讨论了为什么网络会以它们的方式运行，这对于理解流量控制至关重要。

可以在[Wikipedia](http://en.wikipedia.org/wiki/List_of_file_transfer_protocols#Primarily_used_with_UDP)上找到现有 UDP 协议的列表。但是除非你有一些令人信服的性能原因（或令人信服的好奇心），否则最好还是坚持使用 TCP。

*免责声明：我为生产[多用途交易协议](http://www.dataexpedition.com/)的公司工作。*

# java - 如何在 Box Api 中通过渐进式下载提供渐进式音频流

> ID：16036983
> 
> 赞同：0
> 
> 时间：2013-04-16T12:23:46.803
> 
> 标签：java, android, audio-streaming, box-api

我想要在我的项目中做的是播放我的 Box 帐户中的音频歌曲，因为我正在使用 box api。据我所知，我们无法为 Box api 中的音频文件提供直接音频流，因为我正在尝试从 sd 卡实现渐进式下载和播放音频文件。我知道我可以在完整的下载方法中播放歌曲，但这需要更多的时间来下载而不是播放文件。为此，我在下载文件的进度方法中编写了用于在其中播放音频的代码，但是由于同一首歌曲一次播放多次，因此该方法被调用了很多次。

那么有什么方法可以编写用于在 Box api 中播放渐进式音频的代码。如果是的话，我应该在哪里写呢？

```
* Download a file and put it into the SD card. In your app, you can put the file wherever you have access to.
                 */
                final Box box = Box.getInstance(Constants.API_KEY);
                String PATH = Environment.getExternalStorageDirectory() + "/chaseyourmusic"+folderpath;
                File file = new File(PATH);
                file.mkdirs();
                final java.io.File destinationFile = new java.io.File(PATH + "/"
                        + URLEncoder.encode(items[position].name));
             /*   final java.io.File destinationFile = new java.io.File(Environment.getExternalStorageDirectory() + "/"
                                                                      + URLEncoder.encode(items[position].name));*/

                final ProgressDialog downloadDialog = new ProgressDialog(Browse.this);
                downloadDialog.setMessage("Downloading " + items[position].name);
                downloadDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                downloadDialog.setMax((int) items[position].file.getSize());
                downloadDialog.setCancelable(true);
                downloadDialog.show();

                Toast.makeText(getApplicationContext(), "Click BACK to cancel the download.", Toast.LENGTH_SHORT).show();

                final Cancelable cancelable = box.download(authToken, items[position].id, destinationFile, null, new FileDownloadListener() {

                    @Override
                    public void onComplete(final String status) {
                        downloadDialog.dismiss();
                        if (status.equals(FileDownloadListener.STATUS_DOWNLOAD_OK)) {
                        //Able to play audio here from sd card but this is playing after completion of download only which is taking more time . 

                        }
                        else if (status.equals(FileDownloadListener.STATUS_DOWNLOAD_CANCELLED)) {
                            Toast.makeText(getApplicationContext(), "Download canceled.", Toast.LENGTH_LONG).show();
                        }
                    }

                    @Override
                    public void onIOException(final IOException e) {
                        e.printStackTrace();
                        downloadDialog.dismiss();
                        Toast.makeText(getApplicationContext(), "Download failed " + e.getMessage(), Toast.LENGTH_LONG).show();
                    }

                    @Override
                    public void onProgress(final long bytesDownloaded) {
                         downloadDialog.setProgress((int) bytesDownloaded);
                      //Want to write code here but this method is getting called multiple times which is creating problem in playing audio files from sd card . 

                    }
                });
                downloadDialog.setOnCancelListener(new OnCancelListener() {

                    @Override
                    public void onCancel(DialogInterface dialog) {
                        cancelable.cancel();
                    }
                }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T14:43:04.190

使用类似这样的东西： http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java?r=
[41487c03f461942a5747378d197320412fe99442](http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java?r=41487c03f461942a5747378d197320412fe99442)
[http:// www.java2s.com/Code/Android/File/StreamProxy.htm](http://www.java2s.com/Code/Android/File/StreamProxy.htm)

基本上对于渐进式流媒体，您像往常一样继续下载（在后台）并运行流代理（如后台服务器）并将数据推送到您的媒体播放器（您可以使用外部媒体播放器或编写一个简单的你自己，它只是与Android媒体框架的几行代码）

我已经成功地使用了非常相似的东西。
事实上，我正在使用这篇文章的答案（稍作修改）
[MediaPlayer 在开始播放 mp3 时出现口吃](https://stackoverflow.com/questions/5343730/mediaplayer-stutters-at-start-of-mp3-playback)

# c# - Linq monodroid Where 不返回我的对象

> ID：16036984
> 
> 赞同：0
> 
> 时间：2013-04-16T12:23:48.070
> 
> 标签：c#, linq, xamarin.android, azure-mobile-services

我在我的android项目中使用它：

```
private readonly IMobileServiceTable<Product> table;
...
table = serviceClient.GetTable<Product>();
...
List<Product> _items = this.table.Where(x => x.Id == p.Id).ToListAsync().Result; 
```

我的项目存在于表中。结果 (_items) 的所有字段都为空，除了正确的 id 值。

如果我这样做：

```
List<Product> _items = this.table.Select(x => new Product(x.Id, x.Name, x.Description, x.Width, x.Height, x.Depth, x.DimensionsUnit, x.Weight, x.WeightUnit, x.Price, x.SmallPic, x.BigPic, x.AddedTime)).Where(x => x.Id == p.Id).ToListAsync().Result; 
```

一切都好...

这是我的产品类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.Serialization;
using System.Collections;
using System.ComponentModel;
using System.IO;

using Microsoft.WindowsAzure.MobileServices;

using Catalog.Core.Tools;

namespace Catalog.Core.Business
{

    /// <summary>
    /// Describe the object Product in the azure database
    /// </summary>
    public class Product : INotifyPropertyChanged
    {

        #region EVENTS

        public event PropertyChangedEventHandler PropertyChanged;

        // Create the OnPropertyChanged method to raise the event 
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
        #endregion

        #region ATTRIBUTES

        /// <summary>
        /// Gets or sets the id.
        /// </summary>
        /// <value>
        /// The id.
        /// </value>
        private int id;
        public int Id
        {
            get { return id; }
            set
            {
                id = value; 
                OnPropertyChanged("Id");
            }
        }

        /// <summary>
        /// Gets or sets the name.
        /// </summary>
        /// <value>
        /// The name.
        /// </value>
        public String Name { get; set; }

        /// <summary>
        /// Gets or sets the description.
        /// </summary>
        /// <value>
        /// The description.
        /// </value>
        public String Description { get; set; }

        /// <summary>
        /// Gets or sets the width.
        /// </summary>
        /// <value>
        /// The width.
        /// </value>
        public Decimal Width { get; set; }

        /// <summary>
        /// Gets or sets the height.
        /// </summary>
        /// <value>
        /// The height.
        /// </value>
        public Decimal Height { get; set; }

        /// <summary>
        /// Gets or sets the depth.
        /// </summary>
        /// <value>
        /// The depth.
        /// </value>
        public Decimal Depth { get; set; }

        /// <summary>
        /// Gets or sets the dimensions unit.
        /// </summary>
        /// <value>
        /// The dimensions unit.
        /// </value>
        public String DimensionsUnit { get; set; }

        /// <summary>
        /// Gets or sets the weight.
        /// </summary>
        /// <value>
        /// The weight.
        /// </value>
        public Decimal Weight { get; set; }

        /// <summary>
        /// Gets or sets the weight unit.
        /// </summary>
        /// <value>
        /// The weight unit.
        /// </value>
        public String WeightUnit { get; set; }

        /// <summary>
        /// Gets or sets the price.
        /// </summary>
        /// <value>
        /// The price.
        /// </value>
        public Decimal Price { get; set; }

        /// <summary>
        /// Gets or sets the small pic.
        /// </summary>
        /// <value>
        /// The small pic.
        /// </value>
        public String SmallPic { get; set; }

        /// <summary>
        /// Gets or sets the big pic.
        /// </summary>
        /// <value>
        /// The big pic.
        /// </value>
        private String bigpic;
        public String BigPic
        {
            get { return bigpic; }
            set
            {
                if (bigpic != value)
                {
                    bigpic = value;
                    OnPropertyChanged("BigPic");
                }
            }
        }

        /// <summary>
        /// Gets or sets the added time.
        /// </summary>
        /// <value>
        /// The added time.
        /// </value>
        public int AddedTime { get; set; }

        public String FormatDimensions { get { return this.Width + "x" + this.Height + "x" + this.Depth + this.DimensionsUnit; } }
        public String FormatWeight { get { return this.Weight + this.WeightUnit; } }
        public String FormatAddedTime { get { return Tools.DateSystem.UnixTimeStampToDateTime(this.AddedTime).ToString(); } }

        #endregion

        #region CONSTRUCTOR

        /* DO NOT REMOVE - SERIALIZATION */
        public Product() { }

        /// <summary>
        /// Initializes a new instance of the <see cref="Product"/> class.
        /// </summary>
        /// <param name="name">The name.</param>
        /// <param name="description">The description.</param>
        /// <param name="width">The width.</param>
        /// <param name="height">The height.</param>
        /// <param name="depth">The depth.</param>
        /// <param name="dimensionsUnit">The dimensions unit.</param>
        /// <param name="weight">The weight.</param>
        /// <param name="weightUnit">The weight unit.</param>
        /// <param name="price">The price.</param>
        /// <param name="smallPic">The small pic.</param>
        /// <param name="bigPic">The big pic.</param>
        /// <param name="addedTime">The added time.</param>
        /// <exception cref="System.IndexOutOfRangeException">
        /// Invalid price
        /// or
        /// Invalid weight
        /// or
        /// Invalid width
        /// or
        /// Invalid height
        /// or
        /// Invalid depth
        /// </exception>
        public Product(int id, String name, String description, Decimal width, Decimal height, Decimal depth, String dimensionsUnit, Decimal weight, String weightUnit, Decimal price, String smallPic, String bigPic, int addedTime)
        {
            this.Id = id;
            this.Name = name;
            this.Description = description;
            this.Width = width;
            this.Height = height;
            this.Depth = depth;
            this.DimensionsUnit = dimensionsUnit;
            this.Weight = weight;
            this.WeightUnit = weightUnit;
            this.Price = price;
            this.SmallPic = smallPic;
            this.BigPic = bigPic;
            this.AddedTime = addedTime;
        }

        public Boolean HasImage()
        {
            return (SmallPic != null);
        }

        #endregion

    }
} 
```

我不明白为什么 where 不构建对象，也不知道在哪里寻找才能找到发生的事情。谢谢 ！

# mysqldump - Mysql转储注释指令和简单注释

> ID：16036990
> 
> 赞同：0
> 
> 时间：2013-04-16T12:24:10.560
> 
> 标签：mysqldump, flyway

我们计划使用 Flyway 来管理我们的迁移，因为它看起来是一个可以完美满足我们需求的好工具。我们今天拥有的是用于开发的 MySQL 数据库，以及用于生产周期的 mysql - oracle DB。

今天似乎不可能将 Flyway 与 ant 集成来处理 mysqldump 注释指令中的简单注释。它看起来像这样：

```
/*!50003 CREATE*/ /*!50020 DEFINER=`root`@`localhost`*/ /*!50003 PROCEDURE `lockObject`(
    IN parTypeId INTEGER,
    IN parObjectId INTEGER,
    IN parUserId INTEGER,
    IN parLockTime INTEGER,
    OUT parSuccess BOOLEAN,
    OUT parLockedOn INTEGER, /* time is elapsing from the beginning */
    OUT parErrUserId INTEGER)
BEGIN

    #proc declaration

END */;; 
```

Flyway 迁移返回以下错误

```
com.googlecode.flyway.core.api.FlywayException: Error executing statement at line 10807:    OUT parErrUserId INTEGER)
BEGIN
    DECLARE locTableName CHAR(50)
Caused by com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'OUT parErrUserId INTEGER) 
```

有没有我错过的地方可以处理这个“评论”重叠问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:28:36.740

Put the comments on a new line and you should be good to go. Flyway's parser currently has trouble dealing with end of line comments and multiple statements per line.

I am plan on addressing this in time for 2.2\. Until then, please use this workaround.

# sql - 引用 select 子句 SQL 中的某些内容

> ID：16036991
> 
> 赞同：0
> 
> 时间：2013-04-16T12:24:10.670
> 
> 标签：sql, select, clause

我想知道您是否可以在 where 子句中引用某些内容，例如：

```
select
sum([some calculation]) as x,
sum([some other calculation]) as y,
x/y as z
from 
[rest of the sql...] 
```

非常感谢

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:27:11.607

不，您不能使用在`SELECT`语句的同一级别上生成的别名。

以下是可能的实现方式。

使用原始公式：

```
select sum([some calculation]) as x,
       sum([some other calculation]) as y,
       sum([some calculation]) / sum([some other calculation]) as z
from    tableName 
```

或通过使用子查询：

```
SELECT  x,
        y,
        x/y z
FROM 
(
   select sum([some calculation]) as x,
          sum([some other calculation]) as y
   from   tableName
) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:28:40.260

SQL 标准不支持这一点。你必须写：

```
select
sum([some calculation]) as x,
sum([some other calculation]) as y,
sum([some calculation])/sum([some other calculation]) as z
from 
[rest of the sql...] 
```

不过，可能有一些 RDBMS 支持您的语法。