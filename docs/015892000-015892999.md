# StackOverflow 问答 15892000-15892999

# java - NumberFormatException：无效的长：“588657600000-0400”

> ID：15892000
> 
> 赞同：-6
> 
> 时间：2013-04-09T01:52:54.610
> 
> 标签：java

`-588657600000-0400`我收到这样的回复。我无法将其转换为日期格式，因为这是一个无效的 long。

```
new Date(Long.parseLong("/Date(-588657600000-0400)/")); 
```

无论如何，当我们获得这种格式的响应字符串时，我们实际上可以构造一个新的日期对象。这个问题与之前提出的这个问题有关。[java.lang.Long.parseLong 异常](https://stackoverflow.com/questions/15891263/java-lang-long-parselong-exception)

这里抛出的异常是**"04-09 01:39:25.793: E/AndroidRuntime(8011): java.lang.NumberFormatException: Invalid long: "588657600000-0400"**

我试图查看Calendar 类，[http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)但找不到可以在不传递Long 的情况下获得Date Object 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:57:17.207

将输入字符串拆分为 2 个值怎么样？

```
Date foo2 = new Date(Long.parseLong("-588657600000") + Long.parseLong("-0400")); 
```

顺便说一句，那个日期是：`Mon May 07 16:59:59 BRT 1951`呵呵

编辑 ：

这不检查输入值，并假设总是会有减号

```
import java.util.Date;

public class MiMiMi {

    public static void main(String[] args) {

        String input = "/Date(-588657600000-0400)/";
        input = input.replace("/Date(", "");
        input = input.replace(")/", "");

        String[] pair = input.split("-");
        System.out.println(pair[1]);
        System.out.println(pair[2]);

        Date foo = new Date(Long.parseLong("-" + pair[1])
                + Long.parseLong("-" + pair[2]));

        System.out.println(foo);
    }

} 
```

# c - 当 strlen 产生分段错误时来自 GetString() 的 C 字符串

> ID：15892003
> 
> 赞同：0
> 
> 时间：2013-04-09T01:53:10.237
> 
> 标签：c, string, segmentation-fault, strlen, cs50

我在 C 中运行一个程序。当我运行该程序时，我得到一个分段错误错误。在 gdb 中，当我回溯时它告诉我

> 程序收到信号 SIGSEGV，分段错误。__strlen_sse2_bsf () at ../sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S:51 51 movdqu (%edi), %xmm1

我相信这与strlen有关。

我使用 strlen 的唯一时间是：

```
 string s = GetString();

    int stringlength = strlen(s); 
```

当我将 strlen 更改为 sizeof 时，错误停止。

我的代码有什么问题？

GetString 的文档

```
/*
 * Reads a line of text from standard input and returns it as a 
 * string (char *), sans trailing newline character.  (Ergo, if
 * user inputs only "\n", returns "" not NULL.)  Returns NULL
 * upon error or no input whatsoever (i.e., just EOF).  Leading
 * and trailing whitespace is not ignored.  Stores string on heap
 * (via malloc); memory must be freed by caller to avoid leak.
 */

string GetString(void) {
    // growable buffer for chars
    string buffer = NULL;

    // capacity of buffer
    unsigned int capacity = 0;

    // number of chars actually in buffer
    unsigned int n = 0;

    // character read or EOF
    int c;

    // iteratively get chars from standard input
    while ((c = fgetc(stdin)) != '\n' && c != EOF)
    {
        // grow buffer if necessary
        if (n + 1 > capacity)
        {
            // determine new capacity: start at 32 then double
            if (capacity == 0)
                capacity = 32;
            else if (capacity <= (UINT_MAX / 2))
                capacity *= 2;
            else
            {
                free(buffer);
                return NULL;
            }

            // extend buffer's capacity
            string temp = realloc(buffer, capacity * sizeof(char));
            if (temp == NULL)
            {
                free(buffer);
                return NULL;
            }
            buffer = temp;
        }

        // append current character to buffer
        buffer[n++] = c;
    }

    // return NULL if user provided no input
    if (n == 0 && c == EOF)
        return NULL;

    // minimize buffer
    string minimal = malloc((n + 1) * sizeof(char));
    strncpy(minimal, buffer, n);
    free(buffer);

    // terminate string
    minimal[n] = '\0';

    // return string
    return minimal;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T03:28:31.437

该`getString()`函数的描述清楚地表明它可以在错误或 EOF 时返回 NULL。

如果您将返回值传递给`strlen()`而不检查，您的程序将崩溃。

```
string s = GetString();
int stringlength = 0;

if (s != 0)
    stringlength = strlen(s); 
```

这至少不会崩溃。

您可能还会注意到原因有多少混乱`typedef char *string;`以及它带来的好处有多么少，并将其铭记在心。你不必重复那些教你的人的错误。

我还观察到代码片段：

```
// minimize buffer
string minimal = malloc((n + 1) * sizeof(char));
strncpy(minimal, buffer, n);
free(buffer); 
```

可以更好，更简单地写成：

```
string minimal = realloc(buffer, n + 1); 
```

将分配缩小到正确的大小。

# html - 在不使用 .text 的情况下将 Nokogiri XML 对象转换为字符串

> ID：15892005
> 
> 赞同：9
> 
> 时间：2013-04-09T01:53:37.550
> 
> 标签：html, ruby, nokogiri

我有一个对象是`< td >`标签的子对象。类是`ctext`，相关数据在`< b >`tag.tag内

我使用以下方法选择了节点：

```
td.css(".ctext b") 
```

它似乎工作。我得到类似的结果：

```
< b >Flying< br >< br >At the beginning of each combat, choose first strike, vigilance, or lifelink. Creatures you control gain that ability until end of turn.< /b > 
```

如果我使用：

```
td.css(".ctext b").text 
```

将其转换为字符串，我得到：

```
FlyingAt the beginning of each combat, choose first strike, vigilance, or lifelink. Creatures you control gain that ability until end of turn. 
```

我需要的是能够将`td.css(".ctext b")`我认为是 Nokogiri xml 节点的 转换为字符串而不剥离 HTML 标签。我需要保留`< br >`s。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T02:33:49.920

你想要`.inner_html`而不是`.text`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T02:32:26.680

[Nokogiri::XML::Node](http://nokogiri.org/Nokogiri/XML/Node.html)上的[`to_s`](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-to_s)方法应该返回完整的 HTML 或 XML 表示，包括标签：

> **to_s()**
> 把这个节点变成一个字符串。如果文档是 HTML，则此方法返回 html。如果文档是 XML，则此方法返回 XML。

所以我会试试这个：

```
td.css(".ctext b").to_s 
```

# wordpress - Wordpress 分页在第 2 页上显示相同的内容

> ID：15892015
> 
> 赞同：1
> 
> 时间：2013-04-09T01:54:41.673
> 
> 标签：wordpress, loops, twitter-bootstrap, pagination

我无法链接到我正在处理的网站，因为它现在正在本地运行。我正在尝试在主页上使用分页，但发生的情况是它显示了第 2 页和第 3 页的链接，但是当我单击链接时它没有显示任何不同的内容。

我正在使用引导框架（无插件）。我想在不使用插件的情况下尝试分页。

我在主页上运行了一个查询，它将最新的 3 个帖子拉入前 3 列（1、2、3）。

我在主页上运行了一个附加查询，它将接下来的 3 个帖子拉入前 3 个（4、5、6）下方的 3 列中。

显示分页时，我单击数字，地址栏中的 url 发生变化，但内容保持不变。有没有办法可以使用分页继续在顶部显示 3 列，在底部显示 3 列？

请帮忙，谢谢！

在我的functions.php中，我有：

```
function bootstrap_pagination($pages = '', $range = 2) {
$showitems = ($range * 2)+1;
global $paged;
if(empty($paged)) $paged = 1;

if($pages == '') {
    global $wp_query;
$pages = $wp_query->max_num_pages;
if(!$pages) {
    $pages = 1;
}
}

if(1 != $pages) {
echo "<div class='pagination pagination-centered'><ul>";
if($paged > 2 && $paged > $range+1 && $showitems < $pages) echo "<li><a href='".get_pagenum_link(1)."'>&laquo;</a></li>";
if($paged > 1 && $showitems < $pages) echo "<li><a href='".get_pagenum_link($paged - 1)."'>&lsaquo;</a></li>";

for ($i=1; $i <= $pages; $i++) {
if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems )) {
echo ($paged == $i)? "<li class='active'><span class='current'>".$i."</span></li>":"<li><a href='".get_pagenum_link($i)."' class='inactive' >".$i."</a></li>";
}
}

if ($paged < $pages && $showitems < $pages) echo "<li><a href='".get_pagenum_link($paged + 1)."'>&rsaquo;</a></li>";
if ($paged < $pages-1 && $paged+$range-1 < $pages && $showitems < $pages) echo "<li><a href='".get_pagenum_link($pages)."'>&raquo;</a></li>";
echo "</ul></div>\n";
}
} 
```

查询 1 如下所示：

```
<div id="post-<?php the_ID(); ?>" class="span4">            
                <div class="our-work-thumbs">
                <?php 
                // check if the post has a Post Thumbnail assigned to it.
                if ( has_post_thumbnail() ) {
                the_post_thumbnail();
                } 
                ?>          
                <h4><?php the_title(); ?> - <span><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">view project</a></span></h4>              
                </div> 
                </div>            

<?php $count1++; } ?>
<?php endforeach; ?>  
</div>      
<!------------ FIRST ROW ----------------> 
```

查询 2 如下所示：

```
<div id="post-<?php the_ID(); ?>" class="span4">            
                <div class="our-work-thumbs">
                <?php 
                // check if the post has a Post Thumbnail assigned to it.
                if ( has_post_thumbnail() ) {
                the_post_thumbnail();
                } 
                ?>          
                <h4><?php the_title(); ?> - <span><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">view project</a></span></h4>              
                </div> 
                </div>            

<?php $count2++; } ?>
<?php endforeach; ?>
</div>    
<?php endif; ?>  
<!------------ SECOND ROW ----------------> 
```

# sql - 在 sql server management studio 中将列转换为行

> ID：15892017
> 
> 赞同：-1
> 
> 时间：2013-04-09T01:54:44.017
> 
> 标签：sql, sql-server, sql-server-2008, tsql

**表格1**

```
column_pk  num  name   id -1   id-2     id-3
1          145  sam    12345   null     34527
2          187  tom    null    76544    null
3          567  david  78965   43215    89765
4          675  john   null    null     null 
```

如上表所示，对于给定的 column_pk id-1、id-2、id-3 可以有值，也可以为空

现在我必须将`id-1`i`d-2`移动`id-3`到`Table2`如下行中：

*   由于 Sam 有 2 个 id：`id-1`&`id-3`对于相同的 num 145 Sam 有 2 行

*   由于 David 有 3 个 id `Table 1`，所以 David`Table 2`有 3 行相同的 num 567

**表 2**

```
Column_pk  num    name     id
1          145    sam      12345
2          145    sam      34527
3          187    tom      76544
4          567    david    78965
5          567    david    43215          
6          567    david    89765 
```

*   我尝试使用一些更新语句，但这些语句仅对有限的数据有用。当有大量数据传输时，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:34:13.670

由于您使用的是 SQL Server 2008，因此您可以使用和*取消透视*数据。此过程获取您的列值并将它们转换为行：`CROSS APPLY``VALUES`

```
select row_number() over(order by t1.column_pk) column_pk,
  t1.num, 
  t1.name, 
  c.value
from table1 t1
cross apply
(
  values 
    ('id1', id1),
    ('id2', id2),
    ('id3', id3)
) c (col, value)
where c.value is not null; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d36b6/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:28:03.070

您可以使用`UNION`来组合结果。然后用于`ROW_NUMBER()`获取新的 pk 列：

```
select Row_Number() OVER (ORDER BY column_pk,sortorder) Column_pk, 
  num, name, id
from
  (
    select column_pk, num, name, id1 id, 1 sortorder
    from yourtable
    union 
    select column_pk, num, name, id2, 2 sortorder
    from yourtable
    union 
    select column_pk, num, name, id3, 3 sortorder
    from yourtable
    ) t
where id is not null 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/152e0/1)

# ruby-on-rails - 参数数量错误（2 比 1） - TwitterController#login 中的 ArgumentError

> ID：15892021
> 
> 赞同：1
> 
> 时间：2013-04-09T01:55:12.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, twitter-oauth

我正在尝试将 Twitter 集成到我的网站上，以便用户可以使用 Twitter 注册和登录，但这是我去的时候遇到的错误`http://localhost:3000/twitter/login`

```
ArgumentError in TwitterController#login

wrong number of arguments (2 for 1) 
```

到目前为止，这是 Twitter 控制器

```
class TwitterController < ApplicationController
  def index
  end

  def login
    oauth.set_callback_url("http://#{request.host}/twitter/finalize")

    session[:request_token] = oauth.request_token.token
    session[:request_secret] = oauth.request_token.secret

    redirect_url = oauth.request_token.authorize_url
    redirect_url = "http://" + redirect_url unless redirect_url.match(/^http:\/\//)
    redirect_to redirect_url 
  end

  def finalize
  end

  def oauth
  @oauth ||= Twitter::Client.new(APP_CONFIG[:twitter][:consumer_key], APP_CONFIG[:twitter][:consumer_secret])
  end
end 
```

是什么导致它从控制器内部？

完整跟踪：

```
twitter (4.6.2) lib/twitter/client.rb:51:in `initialize'
app/controllers/twitter_controller.rb:20:in `new'
app/controllers/twitter_controller.rb:20:in `oauth'
app/controllers/twitter_controller.rb:6:in `login'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.3) lib/active_support/callbacks.rb:425:in `_run__1049760818__process_action__595446911__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.5) lib/rack/etag.rb:23:in `call'
rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__770706334__call__235543105__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.5) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.5) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:25:59.060

使用此 API 的正确方法（根据其[文档](http://rubydoc.info/gems/twitter/file/README.md)）是通过传递 Hash 选项参数而不是“真实”方法参数：

```
 def oauth
    @oauth ||= Twitter::Client.new(:consumer_key => APP_CONFIG[:twitter][:consumer_key], :consumer_secret => APP_CONFIG[:twitter][:consumer_secret])
  end 
```

# asp.net-mvc - 如何提交@using (Html.BeginForm()) 并将其内容提交给控制器

> ID：15892022
> 
> 赞同：2
> 
> 时间：2013-04-09T01:55:21.983
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试将 6 个值从 6 个不同的文本框中发送到控制器。我如何在不使用 JavaScript 的情况下做到这一点？

```
@using (Html.BeginForm("Save", "Admin"))
    {
@Html.TextBox(ValueRegular.ToString(FORMAT), new { @name = "PriceValueRegularLunch" })
@Html.TextBox(ValueRegular1.ToString(FORMAT), new { @name = "PriceValueRegularLunch1" })
@Html.TextBox(ValueRegular2.ToString(FORMAT), new { @name = "PriceValueRegularLunch2" })

        <input type="submit" name="SaveButton" value="Save" />
}

[HttpPost]
        public ActionResult SavePrices(int PriceValueRegularLunch)
        {
            return RedirectToAction("Lunch", "Home");
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:00:51.387

这是您的控制器的外观：

```
public class AdminController : Controller
{        
    [HttpPost]
    public ActionResult SavePrices(int PriceValueRegularLunch, 
        int PriceValueRegularLunch1, 
        int PriceValueRegularLunch2, 
        int PriceValueRegularLunch3, 
        int PriceValueRegularLunch4, 
        int PriceValueRegularLunch5)
    {
        return RedirectToAction("Lunch", "Home");
    }
} 
```

而你的观点：

```
@using (Html.BeginForm("SavePrices", "Admin"))
{
    @Html.TextBox("PriceValueRegularLunch")
    @Html.TextBox("PriceValueRegularLunch1")
    @Html.TextBox("PriceValueRegularLunch2")
    @Html.TextBox("PriceValueRegularLunch3")
    @Html.TextBox("PriceValueRegularLunch4")
    @Html.TextBox("PriceValueRegularLunch5")

    <input type="submit" name="SaveButton" value="Save" />
} 
```

# jquery - 使用 jquery 删除父 div

> ID：15892034
> 
> 赞同：0
> 
> 时间：2013-04-09T01:56:58.467
> 
> 标签：jquery, html, jquery-mobile

我有一个旨在删除父 div 的 jquery 脚本。但是，删除按钮不会显示为按钮，也不会删除父 div。我正在使用 jQuery Mobile。

这是jQuery：

```
 $(".delete_content").click(function() { 
    $(this).closest(".content_container").remove();   
   }); 
```

这是html：

```
<div class='content_container'>
      <a class='delete_content' data-role='button' data-icon='delete' data-inline='true' data-iconpos='right'>
            Delete
      </a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:58:29.750

```
$(".delete_content").click(function() { 
    $(this).parents(".content_container").remove();   
}); 
```

你需要使用`.parents`而不是`.closest`

# c++ - 如何让这个 Open GL 程序在不终止的情况下轮换

> ID：15892037
> 
> 赞同：1
> 
> 时间：2013-04-09T01:57:15.320
> 
> 标签：c++, opengl

所以我有这个显示立方体的OpenGL程序

```
gluLookAt(0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0); 
```

它允许用户使用输入沿 x、y 和 z 轴修改/旋转它。现在它看起来工作得很好，但是，一旦根据用户输入显示图像（无论是沿 x、y 或 z 轴旋转），它就会终止。

我怎样才能修改这个程序，以便您可以在不终止的情况下旋转它？如在第一次输入期间仅显示第一次旋转。

或者说简单点，如何让用户实时地沿着 x、y 和 z 轴旋转这个立方体？

```
//cube.cpp
#include <GL/gl.h>
#include <GL/glu.h>
#include <GL/glut.h>
#include <iostream>
using namespace std;
void init(void) 
{
   glClearColor (0.0, 0.0, 0.0, 0.0);
   glShadeModel (GL_FLAT);
}
void display(void)
{
   glClear (GL_COLOR_BUFFER_BIT);
   glColor3f (1.0, 1.0, 1.0);
   glLoadIdentity ();             /* clear the matrix */
   /* viewing transformation  */
      /* Move about the x, y and z axis*/
   cout << "Type x, y or z to rotatate the cube about that respective axis by 5 degrees." << endl;
   char input;
   cin >> input;
   if (input == 'x')
   {
      gluLookAt (5.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   }
   else if (input == 'y')
   {
      gluLookAt (0.0, 5.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   }
   else if (input == 'z')
   {
      gluLookAt (0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   }
   else
   {
      gluLookAt (0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   }
     // gluLookAt (0.0, 0.0, 5.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
   glScalef (1.0, 2.0, 1.0);      /* modeling transformation */ 
   glutWireCube (1.0);
   glFlush ();
}
void reshape (int w, int h)
{
   glViewport (0, 0, (GLsizei) w, (GLsizei) h); 
   glMatrixMode (GL_PROJECTION);
   glLoadIdentity ();
   glFrustum (-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);
   glMatrixMode (GL_MODELVIEW);
}
int main(int argc, char** argv)
{   
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
   glutInitWindowSize (500, 500); 
   glutInitWindowPosition (100, 100);
   glutCreateWindow (argv[0]);
   init ();
   glutDisplayFunc(display); 
   glutReshapeFunc(reshape);
   glutMainLoop();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:02:37.663

使用 GLUT 的键盘处理而不是`iostream`s：

```
#include <GL/glut.h>

float rx = 0;
float ry = 0;
float rz = 0;
void display()
{
    glClearColor (0.0, 0.0, 0.0, 0.0);
    glClear (GL_COLOR_BUFFER_BIT);

    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    glFrustum (-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);

    glMatrixMode (GL_MODELVIEW);
    glLoadIdentity ();
    glTranslatef( 0, 0, -3 );

    glColor3f (1.0, 1.0, 1.0);
    glScalef (1.0, 2.0, 1.0);
    glRotatef( -rx, 1, 0, 0 );
    glRotatef( -ry, 0, 1, 0 );
    glRotatef( -rz, 0, 0, 1 );
    glutWireCube (1.0);

    glutSwapBuffers();
}

void keyboard( unsigned char key, int x, int y )
{
    if( key == 'x' ) rx += 5;
    if( key == 'y' ) ry += 5;
    if( key == 'z' ) rz += 5;
}

void timer( int extra )
{
    // run display() every 16ms or so
    glutTimerFunc( 16, timer, 0 );
    glutPostRedisplay();
}

int main(int argc, char** argv)
{   
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowSize (500, 500); 
    glutCreateWindow(argv[0]);

    glShadeModel (GL_FLAT);

    glutDisplayFunc(display); 
    glutKeyboardFunc( keyboard );
    glutTimerFunc( 0, timer, 0 );
    glutMainLoop();
    return 0;
} 
```

# database - CodeIgniter：致命错误：在非对象上调用成员函数 select()

> ID：15892041
> 
> 赞同：0
> 
> 时间：2013-04-09T01:57:17.553
> 
> 标签：database, codeigniter, object, autoload

当我试图从我的库中访问一个函数时，我遇到了上述错误，如图所示......

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class My_crud {

public function select_from($select, $from) {
    // dafaults
    $output = "";
    // querying
    $this->db->select($select);
    $this->db->from($from);
    $query = $this->db->get();
    // if no rows returned
    if ($uqery->num_rows == 0) {
        return $output = "No Results Found";
    }
    // if row(s) retunred
    return $output = $query->result_array();
}
} 
```

而`database`库设置为自动加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:20:12.710

如果你在库中创建它，你应该得到一个 CI 实例，你可以将它添加到你的`__construct`

```
class My_crud
{
 var $ci;
 public function __construct()
 {
  $this->ci =& get_instance();
 }
} 
```

然后在您的类中的方法更改`this->db`为`$this->ci->db`时，问题是当您可以在模型中创建库时，为什么要在库上进行创建？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:17:32.293

如果要使用 CodeIgniter 超级对象资源，则需要使用该`get_instance()`函数，如[Utilizing CodeIgniter Resources in your Library](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)中所述。

```
$CI =& get_instance();
$CI->db->select($select) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:00:26.807

你的类需要扩展一些东西。现在设置的方式是在类中`$this->db`寻找一个不存在的参数。`$db``My_crud`

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class My_crud extends CI_Model {

    public function select_from($select, $from) {
        // defaults
        $output = "No Results Found";

        // querying
        $query = $this->db
            ->select($select)
            ->get($from);

        if ($query->num_rows() > 0)
            $output = $query->result_array();

        return $output;
    }
} 
```

# java - sql谓词从hazelcast映射返回的集合是否不可修改？

> ID：15892043
> 
> 赞同：0
> 
> 时间：2013-04-09T01:57:37.150
> 
> 标签：java, hazelcast

sql谓词从hazelcast映射返回的集合是否不可修改？我正在尝试添加到我从 sql 谓词（在 hazelcast 地图上）收到的集合中 - 我只需要确认它是否可修改或者它是否是导致问题的我的代码。

```
Set<UDC> testSet = new HashSet<UDC>();
testSet = (Set<UDC>) testMap.values(new SqlPredicate("testUUID != " + id + " AND testStatus = 1"));  //Set is not empty! 
```

集合上的任何添加操作都会引发 UnsupportedOperationException。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:46:10.543

根据我的初始测试，从 SQLPredicate 返回的集合是不可修改的。我找不到使用 sqlpredicate 检索可修改集的任何选项（使用 hazelcast-2.5）。如果我错了，我会很高兴的！希望能帮助到你。

# asp.net-mvc-3 - 在 MVC 3 中填充视图模型

> ID：15892045
> 
> 赞同：1
> 
> 时间：2013-04-09T01:57:42.857
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我正在重构一个 MVC 3 Web 应用程序，以不将数据模型直接传递给控制器​​，而是使用 View 模型（请参阅[此处](https://stackoverflow.com/questions/5326515/create-a-dropdown-list-for-mvc3-using-entity-framework-edmx-model-razor-vie)的灵感）。

目前，在填充模型列表时，我们在控制器中执行以下操作：

```
var myQuery = from t in _db.TimeEntries
select t;

List<TimeEntry> timeEntryList = myQuery.ToList<TimeEntry>(); 
```

TimeEntries 绑定到我们的数据库。

但是，现在我有一个视图模型：

```
public class TimeEntryViewModel
    {

        public TimeEntry entry {get; set;}
        public Time time { get; private set; }

        public TimeEntryViewModel();
        public TimeEntryViewModel(int ID)
        {
            PraxisTime.Models.PraxisTimeDB _db = new PraxisTime.Models.PraxisTimeDB();
            entry = _db.TimeEntries.Find(ID);

            time = _db.Times.Find(entry.TimeID);
        }
    } 
```

这一切都很好，直到我想填充这些列表。这是我的解决方案，添加到视图模型中，但感觉很笨拙。

```
public static List<TimeEntryViewModel> LoadTimeEntryViewModels(string userID)
        {
            theDB _db = new theDB();
            List<int> myQuery = (from t in _db.TimeEntries
                                 select t.ID).ToList<int>();

            List<TimeEntryViewModel> timeEntryList = new List<TimeEntryViewModel>();

            foreach (int i in myQuery)
            {
                timeEntryList.Add(new TimeEntryViewModel(i));
            }
            return timeEntryList;
        } 
```

有没有更好的方法让我想念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:00:49.927

知道如何提取数据并自行填充不是您的视图模型的责任，它基本上是一个 dto，带有一些额外的视图元数据（如必需等）。首先，我会让控制器调用您的数据库。然后，随着应用程序的增长，您可以稍后将 db 调用重构为存储库/数据访问层。

您还可以通过执行以下操作清理您的 linq 查询：

```
var entries = from t in _db.TimeEntries
              select new TimeEntryViewModel { entry = t.entry, time = t.time }; 
```

TimeEntry 也是你的数据库实体吗？如果是这样，您可以在视图模型中引用它。你也在更新你的数据库，我会使用某种依赖注入来解耦你的代码，这将清理你的代码并让你能够在单元测试中模拟它，并且稍后会设置你可以传入依赖项而不是具体的接口。

# python - 配置 Mac OS X Mountain Lion 以使用 python.org 的 python 2.7.4

> ID：15892046
> 
> 赞同：0
> 
> 时间：2013-04-09T01:57:48.057
> 
> 标签：python, macos, python-2.7, osx-mountain-lion

我正在使用 Mac OS X Mountain Lion，并且我已经安装了 python 2.7.4 的“python.org 版本”。

似乎这个新版本是由命令 python2 调用的，因为它给出的版本为 2.7.4，而默认（预安装的 mac）版本是用命令 python 调用的（它显示版本 2.7.2）。它是否正确？

如何最好地将命令“python”更改为指向新安装的“python2”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:02:43.657

/Applications/Python XX 中应该有一个 shell 脚本运行这个 shell 脚本来为你使用的任何 shell 设置你的 PATH 变量。

有关更多信息，请查看 README.txt

# jquery - 使用按钮和输入的文本填充文本区域

> ID：15892054
> 
> 赞同：0
> 
> 时间：2013-04-09T01:58:34.980
> 
> 标签：jquery, textarea

我正在研究一个在平板电脑上使用的概念，用户可以通过一系列快捷按钮将文本输入到文本区域。当然，快捷按钮并没有涵盖所有可能性，所以我想保留在文本框中正常输入文本的能力。

我遇到的问题是，在用户将焦点应用于 textarea 并进行纯文本编辑后，按钮不再起作用。

```
<script type="text/javascript">
$(document).ready(function() {
    $("#keypad button").click(function() {
        var txt = $(this).val();
        $("#Textarea").append(txt);
        });
}); 
```

```
<div id="keypad">
<div id="row4">
    <button type="button" class="green45" name="Rt" value="Rt ">Rt</button>
    <button type="button" class="green45" name="Lt" value="Lt ">Lt</button>
    <button type="button" class="green45" name="Up" value="Up ">Up</button>
    <button type="button" class="green45" name="Down" value="Down ">Down</button>
    <button type="button" class="green45" name="Forward" value="Forward ">Forward</button>
    <button type="button" class="green45" name="Back" value="Back ">Back</button>
</div> 
```

我创建了这个小提琴来演示问题[http://jsfiddle.net/J228n/2/](http://jsfiddle.net/J228n/2/)。首先使用按钮输入一些文本，然后正常输入一些文本，然后再次尝试使用这些按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:04:18.393

```
$("#keypad button").click(function() {
    var txt = $(this).val();
    $('#Textarea').val(function(i,val){
        return val + txt;
   });
}); 
```

[jsFiddle](http://jsfiddle.net/BEqVV/)

您需要使用该`.val()`函数，并从按钮返回旧值 + 文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:07:23.013

试试这个：

```
$("#keypad button").click(function() {
        var txt = $(this).val();
        var old =$("#Textarea").val();      
        $("#Textarea").val(old+txt);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:09:49.357

这很好用：

```
$("#keypad button").click(function() {
        var txt = $(this).val();
        $("#Textarea").val($("#Textarea").val()+txt);
}); 
```

# c# - WebDataMenu 的 MenusItems 无事件在服务器上触发

> ID：15892055
> 
> 赞同：0
> 
> 时间：2013-04-09T01:58:40.610
> 
> 标签：c#, asp.net, vb.net, infragistics

我目前正在使用该遥控器`WebDataMenus`来动态添加项目；通过它我可以从表单访问，甚至触发事件以执行定义的某些功能或逻辑。

当我想通过`ItemClick`类型事件运行我的 VB.NET 代码时出现问题，该事件无法正常工作；或者至少我不能让它在服务器端工作（它不会触发），但它通过 JavaScript 在客户端工作得很好。

值得一提的是，当我单击要运行的菜单中的任何项目时，我的 VB.NET 代码给了我一个 JavaScript 错误`'__doPostBack' is undefined`- 我怎样才能使它工作并从我的 VB.NET 代码运行事件？

PS：为了让它现在工作，我`PageMethods.WebDataMenu2_ItemClick (eventArgs.getItem (). Get_key ());`通过`EnablePageMethods = True`在`ScriptManager`.

但是，这不允许我使用我运行的方法中的其他控件，它会在每个控件中给我一个初始化错误。

1.  我添加菜单和菜单项。

    -代码HTML

    ```
    <ig:webdatamenu ID="WebDataMenu2" runat="server" Font-Bold="False" 
            Font-Names="Arial Narrow" Font-Overline="False" Font-Size="10px" 
            Width="100%"  >
        <GroupSettings Orientation="Horizontal" />
        <ClientEvents ItemClick="WebDataMenu2_ItemClick" />
    </ig:webdatamenu> 
    ```

    -VB.NET 代码向菜单添加项目

    ```
    ut = New Infragistics.Web.UI.NavigationControls.DataMenuItem
    ut.Text = ds.Tables(0).Rows(0).Item("x1").ToString()
    ut.ToolTip = ds.Tables(0).Rows(0).Item("x1").ToString()
    ut.Key = "0"
    ut.ImageUrl = "~/ImagesToolBar/employee20.gif"
    WebDataMenu2.Items.Add(ut)

    ut = New Infragistics.Web.UI.NavigationControls.DataMenuItem
    ut.Text = ds.Tables(0).Rows(0).Item("x2").ToString()
    ut.ToolTip = ds.Tables(0).Rows(0).Item("x2").ToString()
    ut.Key = "1"
    ut.ImageUrl = "~/ImagesToolBar/timecard20.gif"
    WebDataMenu2.Items.Add(ut) 
    ```

2.  目前我添加了一个客户端事件

    ```
    function WebDataMenu2_ItemClick(sender, eventArgs)
    {
        if (eventArgs.getItem().get_key() != '') {
            alert('test2: ' + eventArgs.getItem().get_key());
        }
    } 
    ```

3.  VB.NET代码这里触发VB.NET中的事件（这里执行这个方法失败）

    ```
    Protected Sub WebDataMenu2_ItemClick1(sender As Object, e As Infragistics.Web.UI.NavigationControls.DataMenuItemEventArgs) Handles WebDataMenu2.ItemClick

        nodotext = e

        Select Case nodotext
            Case "0"
                Session("IT") = 2
                Session("I") = 1
                ident = Session("I")
            Case "1"
                Session("IT") = 2
                Session("I") = 800
                ident = Session("I")
            Case "2"
                Session("IT") = 2
                Session("I") = 5
                ident = Session("I")
            Case "3"
                Session("IT") = 2
                Session("I") = 6
                ident = Session("I")
            Case "7"
                Session("IT") = 2
                Session("I") = 39
                ident = Session("I")
            Case "8"
                Session("IT") = 2
                Session("I") = 80
                ident = Session("I")
            Case "4"
                Session("IT") = 2
                Session("I") = 100
                Session("RI") = 101
            Case Else
        End Select

        Inicio()
    End Sub 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:51:08.890

我使用您提供的代码在一个简单的示例中对此进行了测试，它按预期工作。关于 __doPostBack 未定义的错误将阻止服务器端事件触发，因为这就是 asp.net 进行回发的方式。

我建议您检查生成的 html 文件以验证此事件是否已定义：

```
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

如果定义了事件，请检查是否存在无效的 html，其中您可能缺少结束标记，或者您的页面上可能有其他导致问题的无效脚本。

# delphi - TIdThreadComponent OnTerminate 和 OnStopped 在哪个线程中执行？

> ID：15892057
> 
> 赞同：2
> 
> 时间：2013-04-09T01:58:47.540
> 
> 标签：delphi, c++builder, indy, indy10

非常简单但重要的问题`TIdThreadComponent`：

在哪个线程中`OnTerminate`执行`OnStopped`- 主线程或工作线程？

当我在这些事件中（并调用 VCL 属性和方法）时，我可以安全地假设我在主线程中吗？

**更新：**我想我可能会使用调试器，在尝试之后，看起来像是`OnStopped`在工作线程内并且`OnTerminate`在主线程内。额外的好处是调试器可以帮助确定在哪里执行启动/停止/控制线程的其他相关函数并减少可能的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T02:58:46.483

你的观察是正确的。 `OnStopped`在工作线程的上下文中触发。 `OnTerminated`在主线程的上下文中触发。

# html - 不需要的 CSS 边距

> ID：15892068
> 
> 赞同：1
> 
> 时间：2013-04-09T02:00:27.970
> 
> 标签：html, css

我正在开发一个相当简单的网页，而且我有点尘土飞扬，所以我可能犯了一个非常明显的错误，但请坚持下去。我的文档四面都有一个非常薄的（可能是 5-10 像素）边距。我包括我的代码的缩写版本。谁能告诉我为什么我得到它以及如何摆脱它。

html:

```
<body>
<div id="wrap">
<div id="video">
</div>
<div id="para">
<p>Hello, I'm ...</p>
</div>
<div id="footer">
<ul id="social">
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</div>
</div>
</body> 
```

CSS：

```
#wrap { background: url(Andres/images/background-bg.png);  margin: 0 auto;
 }

#para p { padding: 20px; }

#footer { background:url(Andres/images/footer.png); height: 80px;}

#footer #social li { float: left; padding: 10px; list-style: none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:02:17.833

它可能是元素的默认边距`<body>`- 大多数浏览器的所有边都包含 8px，只需添加：

```
body {
margin: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:05:15.283

虽然 Adrift 的回答确实回答了您的具体问题 - 您可能想看看类似

[http://necolas.github.io/normalize.css/](http://necolas.github.io/normalize.css/)

它在开始一个项目时提供了一个很好的基线，以最大限度地减少你遇到的 CSS 问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:05:47.743

向您的 CSS 添加“重置”以消除一些跨浏览器的怪癖是一个很好的做法。我通常在我的所有项目中至少添加这一行：

```
* {
  margin: 0;
  padding: 0;
} 
```

这是[一篇](http://sixrevisions.com/css/css-tips/css-tip-1-resetting-your-styles-with-css-reset/)关于 CSS 重置的文章。

# excel - 如何在最后一行数字有百分号的列中排列数字

> ID：15892074
> 
> 赞同：0
> 
> 时间：2013-04-09T02:00:52.153
> 
> 标签：excel, formatting

数字的所有列都是右对齐的。具有次要总数的行应该有一个百分号 (%)，但数字应该仍然对齐。我尝试了除此行之外的所有数字的单字符缩进，但字体的变化没有产生数字排列。

我还尝试添加一个细列来容纳该行上的百分号，但是，唉，似乎有一些内置的列边距或填充，所以它看起来像 26% 而不是 26%。有人知道解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:07:16.750

使用自定义数字格式

```
_-* #,##0_% 
```

尾随`_%`装置包括`%`字符宽度的空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:23:56.370

![在此处输入图像描述](https://i.stack.imgur.com/y95ZJ.png)

![在此处输入图像描述](https://i.stack.imgur.com/0OREg.png)

如果这是您所追求的：然后将 % 之前的单元格的右缩进更改为 1 个字符

*   选择范围。
*   右键点击
*   选择格式单元格
*   选择对齐
*   将水平更改为“右（缩进）”
*   将缩进更改为 1

添加了新的信使以显示更好的对齐方式

# android - 活动开始缓慢

> ID：15892088
> 
> 赞同：0
> 
> 时间：2013-04-09T02:03:25.923
> 
> 标签：android, android-activity, android-service

最近我遇到了一个奇怪的问题，我从一个服务开始一个活动，但是如果我按照以下步骤操作：

1.  输入一个应用程序
2.  按主页键返回启动器
3.  然后触发服务开始我的活动

经过上述步骤，活动启动比正常方式慢。因为我在活动的onCreate方法中添加了一个日志。

正常方法同上，除了按home键。

请帮我解决它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:12:12.207

您可以在不同的进程中运行服务和活动。我还将日志记录移动到服务中，这样它就不会绑定 UI。使用 AndroidManifest.xml 中服务的 process 属性

这是来自[文档](http://developer.android.com/guide/topics/manifest/service-element.html)的片段：

> 运行服务的进程的名称。通常，应用程序的所有组件都在为应用程序创建的默认进程中运行。它与应用程序包同名。元素的 process 属性可以为所有组件设置不同的默认值。但是组件可以使用自己的进程属性覆盖默认值，从而允许您将应用程序分布在多个进程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:19:18.430

如果您从 IDE 开始，回击，然后点击启动器图标，您将启动应用程序的另一个实例。这可能有助于解释事情。

# r - 在 R 中使用 package::prob 创建任何向量时出错

> ID：15892091
> 
> 赞同：0
> 
> 时间：2013-04-09T02:03:40.927
> 
> 标签：r

我只需要创建一个简单的向量`x<-c(2, 4, 9, 12)`，但运行后`library(prob)`，我得到的只是`Error in c(2, 4, 9, 12) : unused argument(s) (9,12)`. R 似乎只接受前两个参数，即使我尝试创建一个包含两个条目的向量，它也只会分配值`NULL`而不是实际向量。但是，我只能在一台计算机上复制此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:01:30.780

一些非常病态的事情正在发生。当我在 R 2.15.2 中安装 package:prob_0.9-2 时，我没有收到任何错误，并且“x”变量出现正常构造。您应该重新启动并查看这是否仍然存在，如果是，您应该重新安装 R。

# vim - 奇怪的 tmux vim 通过 ssh

> ID：15892092
> 
> 赞同：0
> 
> 时间：2013-04-09T02:04:03.183
> 
> 标签：vim, ssh, tmux

首先我 ssh 进入这个名为 的服务器`thor`，我设置了 bash 提示符，在我启动 tmux 之前它看起来像

```
[1.9.3@lizhe] ~ 
→ somecommand 
```

在我启动 tmux 之后，它变成了这个

```
[1.9.3@lizhe] ~ 
→    somecommand 
```

之前有更多的空间`somecommand`，在输入命令后我按回车，它看起来像这样

```
[1.9.3@lizhe] ~ 
→ somecommand
[1.9.3@lizhe] ~ 
→     somecommand 
```

另一个大问题是vim，它完全无法使用，只是查看以下屏幕记录，我不知道如何描述它。

[通过 ssh 在 tmux 中使用奇怪的 vim](http://ascii.io/a/2749)

我用`j` `k`的是移动的，但是当前的线不是它的样子，而且有些线是不可见的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:30:43.500

看来您的`TERM`变量设置错误。

根据[此处找到的 TMUX 手册页](http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&sektion=1)

> 对于在 tmux 中运行的所有程序，TERM 环境变量必须设置为“screen”。新窗口会自动将“TERM=screen”添加到它们的环境中，但必须注意不要在 shell 启动文件中重置它。

确保 TERM 设置为`screen`或`screen-256color`（您可以通过键入 来检查`echo $TERM`）。如果不是检查您的初始化文件，例如`.profile`and`.bashrc`并确保您没有覆盖该`TERM`变量。

# regex - 冷融合中的简单正则表达式帮助

> ID：15892093
> 
> 赞同：0
> 
> 时间：2013-04-09T02:04:09.100
> 
> 标签：regex, coldfusion

我有一个字符串，我希望根据字符串中的下划线删除一些字符。例如。

我想改变

```
2_MASTER BEDROOM_CFM 
```

到

```
MASTER BEDROOM 
```

或者

```
2734923ie_BEDROOM 2_CFM 
```

到

```
BEDROOM 2 
```

关于如何用冷融合做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T02:42:54.400

ColdFusion 具有这样的`GetToken()`功能，它使得使用分隔符（几乎任何分隔符）操作字符串变得非常容易。假设您要解析的每个字符串都是 2 组字符串，那么这将输出`MASTER BEDROOM`

```
<cfset String1 = '2_MASTER BEDROOM_CFM'>
<cfset FirstWord = ListFirst(String1,' ')>
<cfset FirstWord = GetToken(FirstWord,2,'_')>
<cfset SecondWord = ListLast(String1,' ')>
<cfset SecondWord = GetToken(SecondWord,1,'_')>

<cfoutput>
  #FirstWord# #SecondWord#
</cfoutput> 
```

也可以将其简化为

```
<cfset String1 = '2_MASTER BEDROOM_CFM'>
<cfoutput>
  #GetToken(ListFirst(String1,' '),2,'_')# #GetToken(ListLast(String1,' '),1,'_')#
</cfoutput> 
```

编辑正如 Leigh 在评论中指出的那样，您也可以使用

```
getToken("2_MASTER BEDROOM_CFM", 2, "_") 
```

这会将您的字符串视为包含元素`2`、`MASTER BEDROOM`和`CFM`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:14:55.490

所以字符串以一些数字和/或字符开头，然后是下划线。然后是一些文本，最后是一个下划线，后跟 CFM？这是一个捕捉到这一点的正则表达式：

```
^[a-z0-9]+_(.*)_CFM$ 
```

这是一些对我有用的代码：

```
<cfoutput>
<cfset String1 = '2_MASTER BEDROOM_CFM'>
<cfset yourString = reReplaceNoCase(String1, "^[a-z0-9]+_(.*)_CFM$", "\1")>

#yourString#<br>

<cfset String2 = "2734923ie_BEDROOM 2_CFM">
<cfset yourString = reReplaceNoCase(String2, "^[a-z0-9]+_(.*)_CFM$", "\1")>

#yourString#<br>
</cfoutput> 
```

# programming-languages - 学习机器学习的最佳编程语言是什么？

> ID：15892097
> 
> 赞同：19
> 
> 时间：2013-04-09T02:04:57.587
> 
> 标签：programming-languages, machine-learning

我有专业的 C/C++/Java 软件开发背景。我正在学习机器学习，学习机器学习的最佳编程语言是什么？? 我记得 Andrew Ng 在他的开放课程机器学习中提到了一种用于学习机器学习的编程语言，但我没有听懂。有人抓到吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T02:54:44.450

人们使用以下语言：

*   R
*   Matlab / 八度
*   Python
*   爪哇
*   斯卡拉

`Python`非常适合初始原型制作，您可以非常快速地检查结果。
但从长远来看，它的运行速度比编译语言（如`Java`.

[但是像http://scikit-learn.org/stable/](http://scikit-learn.org/stable/)这样的Python 库让生活变得美好。

人们也使用`Scala`，因为有很多图书馆都在使用它。

如果您转到下面的链接，则每种语言的优缺点都有很好的描述：

[http://www.kaggle.com/forums/t/3642/what-tools-do-people-generally-use-to-solve-problems/21728](http://www.kaggle.com/forums/t/3642/what-tools-do-people-generally-use-to-solve-problems/21728)

# php - PHP不显示数据

> ID：15892098
> 
> 赞同：0
> 
> 时间：2013-04-09T02:04:57.747
> 
> 标签：php, mysql

任何想法为什么这个简单的 php 代码在尝试回显数据时不会显示结果。

```
<?php
        {
            mysql_connect("localhost" , "" , "") or die (mysql_error());
            mysql_select_db("") or die(mysql_error());

            $pid=intval($_SESSION["User_id"]); 
            $query = "SELECT `car`, `details`, `price` FROM `Car``";

            //executes query on the database
            $result = mysql_query ($query) or die ("didn't query");

            //this selects the results as rows
            $num = mysql_num_rows ($result);    

            while($row=mysql_fetch_assoc($result))
            {

                $_SESSION['car'] = $row['car'];
                $_SESSION['details'] = $row['details'];
                $_SESSION['price'] = $row['price'];
            }
        }
        ?>  

        <?php echo $_SESSION['car']; ?>
        <?php echo $_SESSION['details']; ?>
        <?php echo $_SESSION['price']; ?> 
```

目前只是测试看看汽车、价格和详细信息是否从数据库中显示，但似乎没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:06:40.947

您错过`session_start();`了页面开头并更改

```
$query = "SELECT `car`, `details`, `price` FROM `Car``";
                                                     ^ 
```

到

```
$query = "SELECT `car`, `details`, `price` FROM `Car`"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:26:25.487

您是否期待此查询的一个或多个结果？
如果结果很多，您将保存会话中的最后一个条目。
如果只有一个，只需这样做： $row=mysql_fetch_assoc($result) 而不是这个 while。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:28:23.040

检查查询。尝试回显它，复制，粘贴到 MySQL 中并运行它。但是你有`$pid`，你把它放在查询中了吗？

`$query = "SELECT car, details, price FROM Car WHERE id = $pid ";`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T02:07:57.753

我宁愿删除所有反引号，因为这些标识符都不是保留关键字。

```
$query = "SELECT car, details, price FROM Car"; 
```

# python - 列表的最大元素的索引？

> ID：15892100
> 
> 赞同：1
> 
> 时间：2013-04-09T02:05:15.323
> 
> 标签：python, list, max

所以我需要编写并测试一个函数，它返回列表中最大元素的索引（或者，如果几个元素具有最大值，则为其中第一个元素的索引）并且我不允许使用最大值功能。

```
def largestElementIndex(lst):
    x=0
    maxNum=0
    while x+1 < len(lst):
        if lst[x] > maxNum:
            maxNum=x
        x+=1
    return maxNum

print "Program Output"
indexOfMax = largestElementIndex([1, 4, 3, 3, 2])
print 'Index Of Max Value is',indexOfMax 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T02:08:44.890

您需要存储最大的数字以及索引：

```
def largestElementIndex(lst):
    x=0
    maxNum=0
    maxIndex=0

    while x < len(lst):
        if lst[x] > maxNum:
            maxIndex=x
            maxNum=lst[x]
        x+=1
    return maxIndex 
```

我也会使用一个`for`循环：

```
def largestElementIndex(lst):
    max_index = 0
    max_value = lst[0]

    for index, value in enumerate(lst)
        if value > max_value:
            max_index = index
            max_value = value

    return max_index 
```

为此`max`，您可以使用`enumerate`相同的方式：

```
max_index = max(enumerate(lst), key=lambda pair: pair[1])[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:07:00.697

如果您不想使用 max 函数，也可以使用这种简单的方法：

```
res = lst.index(sorted(lst)[-1]) 
```

干杯！

# mysql - 在mysql中切换列数据？

> ID：15892103
> 
> 赞同：0
> 
> 时间：2013-04-09T02:05:44.873
> 
> 标签：mysql

我想尝试运行一个查询，该查询将更新我的表 ptb_messages 并切换两列的数据，例如我的表：

```
id  |  to_user_id  |  from_user_id  | 

1         4                5
2         5                6
3         7                9 
```

所以我想要尝试做的是将 from_user_id 的值切换到 to_user_id ，反之亦然。

在我意识到一旦我将一个表中的值复制到另一个表中，另一列中的原始数据将被覆盖之前，我打算使用它，

```
$sql = mysql_query("UPDATE ptb_messages SET ptb_messages.from_user_id=ptb_messages.to_user_id"); 
```

我真正需要的是交换功能，

我不太确定我该怎么做，但我想象它是这样的：

```
$sql = mysql_query("UPDATE ptb_messages SET to_user_id=from_user_id, from_user_id=to_user_id"); 
```

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:18:51.930

嗯，mysql有一个概念叫做`user variable`. 您可以利用它来存储值并将其设置在列上以进行交换，

```
UPDATE Table1 
SET    to_user_id = from_user_id,
       from_user_id = @r1
WHERE  @r1 := to_user_id 
```

见这里：[http ://www.sqlfiddle.com/#!2/8cd6a/1](http://www.sqlfiddle.com/#!2/8cd6a/1)

自己加入表格怎么样？

```
UPDATE  Table1 a
        INNER JOIN Table1 b
          ON a.to_user_id = b.to_user_id AND
              a.from_user_id = b.from_user_id
SET     a.to_user_id = b.from_user_id,
        a.from_user_id = b.to_user_id 
```

见这里：[http ://www.sqlfiddle.com/#!2/d6b4f/1](http://www.sqlfiddle.com/#!2/d6b4f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:25:16.210

我将在那里抛出一个答案，尽管我认为 Skinny Pipes 的答案更优雅一些。

您可以创建一个临时表来存储值。

[http://www.sqlfiddle.com/#!2/3631d/1](http://www.sqlfiddle.com/#!2/3631d/1)

```
create table ptb_messages_temp (
  id int, 
  tempid int);

insert into ptb_messages_temp (id, tempid) (select id, to_user_id from ptb_messages);

-- DO THE UPDATE
UPDATE ptb_messages 
LEFT OUTER JOIN ptb_messages_temp on ptb_messages.id=ptb_messages_temp.id
SET  
ptb_messages.to_user_id=ptb_messages.from_user_id, 
ptb_messages.from_user_id=ptb_messages_temp.tempid; 
```

# svg - 如何使用 apache batik 制作交互式 svg？

> ID：15892108
> 
> 赞同：1
> 
> 时间：2013-04-09T02:06:17.640
> 
> 标签：svg, batik

我的 java 应用程序需要创建带有一些悬停文本和位交互性的 svg 文件。蜡染有这方面的 api 吗？我可以看到犀牛引擎可以与蜡染类捆绑在一起。但我相信它适用于 java 应用程序在自己的窗口中“显示”svg。任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:37:05.353

您可以在 Internet 上找到有关您的问题的大量信息。仅举几个例子：

[http://comments.gmane.org/gmane.text.xml.batik.user/3811](http://comments.gmane.org/gmane.text.xml.batik.user/3811)

[http://batik.2283329.n4.nabble.com/Rendering-CSS-in-JSVGCanvas-td4470592.html](http://batik.2283329.n4.nabble.com/Rendering-CSS-in-JSVGCanvas-td4470592.html)

[http://osdir.com/ml/text.xml.batik.user/2003-12/msg00185.html](http://osdir.com/ml/text.xml.batik.user/2003-12/msg00185.html)

# ios - iPhone 上核心 java 之外的 JamVM 类

> ID：15892110
> 
> 赞同：2
> 
> 时间：2013-04-09T02:06:25.007
> 
> 标签：ios, class, jailbreak, jamvm

所以我有一部旧的 iPhone（第一代），我想我可以用它来做一些有趣的事情。我越狱了，并从 cydia 安装了 Java 包。但是，每当我尝试使用核心 java 之外的任何类（必须导入的任何内容）时，我都会收到 no class def found 错误。Printlns 和简单的算术工作，但仅此而已。我在第一代 iPad 上做同样的事情时遇到同样的错误。有没有其他人玩过 JamVM 并得到核心 Java 之外的任何东西来工作？

# image-processing - Sobel 过滤器是否意味着要归一化？

> ID：15892116
> 
> 赞同：19
> 
> 时间：2013-04-09T02:06:44.000
> 
> 标签：image-processing, discrete-mathematics

x-导数 Sobel 看起来是这样的：

```
-1 0 +1
-2 0 +2
-1 0 +1 
```

假设我的图像有两个样本看起来像这样（0=黑色，1=白色）：

```
0 0 1            1 0 0
0 0 1      &     1 0 0
0 0 1            1 0 0 
```

如果我执行卷积，我将分别得到 4 和 -4。

所以我的自然反应是将结果归一化 8 并将其翻译 0.5 - 对吗？（我想知道找不到维基百科等提到任何规范化）

**编辑：** 我使用 Sobel 滤波器创建一个 2D 结构张量（带有导数 dX 和 dY）：

```
 A B 
Structure Tensor = C D

with  A = dx^2 
      B = dx*dy
      C = dx*dy 
      D = dy^2 
```

最终我想将结果存储在 [0,1] 中，但现在我只是想知道是否必须标准化 Sobel 结果（默认情况下，不仅仅是为了存储它），即：

```
A = dx*dx 
//OR
A = (dx/8.0)*(dx/8.0)
//OR
A = (dx/8.0+0.5)*(dx/8.0+0.5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-04-19T01:20:27.700

Sobel 滤波器是一维有限差分滤波器的组合：

```
[ 1  0  -1 ] / 2 
```

和另一个维度的平滑滤波器：

```
[ 1  2  1 ] / 4 
```

因此，通常定义的对内核的适当归一化是 1/8。

当需要对导数进行正确估计时，需要进行这种归一化。在计算用于检测边缘的梯度幅度时，缩放是无关紧要的。

平滑滤波器中的 1/4 是将其归一化为 1。有限差分滤波器中的 1/2 来自比较的两个像素之间的距离。导数定义为[ *f* ( *x* + *h* )- *f* ( *x* )]/ *h的**h*到零的极限。对于有限差分近似，我们可以选择*h* =1，导致滤波器，或*h* =2，导致上述滤波器。*h* = 2的优点是滤波器是对称的，在*h* = 1 时，您最终会计算两个像素之间中间的导数，因此结果会移动半个像素。*******`[1,-1]`*******

 **** * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T12:09:25.613

Sobel 滤波器在数学上正确的归一化是 1/8，因为它将结果带入每个像素一个灰度级的自然单位。但在实际编程中，这不一定是正确的做法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-25T04:41:46.647

Sobel 滤波器是一种沿水平或垂直方向进行微分的启发式方法。因此，标准化可以是任意的。我发现遵循标准化比其他标准化更有意义，后者占绝对值总和的一半。

[http://www.imagemagick.org/discourse-server/viewtopic.php?t=14434&start=30](http://www.imagemagick.org/discourse-server/viewtopic.php?t=14434&start=30)

事实上，scikit-image 使用了这种方法。例如，

```
>>>from skimage import filters
>>>import numpy as np
>>>one[:,0] = 2
>>>one
array([[ 2.,  1.,  1.],
       [ 2.,  1.,  1.],
       [ 2.,  1.,  1.]])
>>>filters.sobel_v(one)
array([[ 0.,  0.,  0.],
       [ 0., -1.,  0.],
       [ 0.,  0.,  0.]]) 
```***

# c++ - WMI 的 nVidia 驱动程序版本不是我想要的

> ID：15892117
> 
> 赞同：3
> 
> 时间：2013-04-09T02:06:48.957
> 
> 标签：c++, wmi, nvidia

我想获得 nVidia 显卡的驱动程序版本。所以我使用 WMI 并从“Win32_VideoController”类的“DriverVersion”对象中获取数据。但它就像“9.18.13.1106”（文件版本），而我想要的是“311.06”（treiber 版本）。我在哪里可以获得这些信息？如果在 WMI 上不可能，我想知道其他方法来获得它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:43:20.540

[您可以使用 nVidia 的Tesla Deployment Kit](https://developer.nvidia.com/tesla-deployment-kit)中的 NVML 来执行此操作。您可以使用如下代码检索内部驱动程序版本（您习惯于在 nVidia 驱动程序中看到的版本）：

```
#include <iostream>
#include <string>
#include <stdlib.h>
#include <nvml.h>
#include <windows.h>

namespace { 
typedef nvmlReturn_t (*init)();
typedef nvmlReturn_t (*shutdown)();
typedef nvmlReturn_t (*get_version)(char *, unsigned);

class NVML {
    init nvmlInit;
    shutdown nvmlShutdown;
    get_version nvmlGetDriverVersion;

    std::string find_dll() {
        std::string loc(getenv("ProgramW6432"));
        loc += "\\Nvidia Corporation\\nvsmi\\nvml.dll";
        return loc;
    }

public:    
    NVML() {
        HMODULE lib = LoadLibrary(find_dll().c_str());
        nvmlInit = (init)GetProcAddress(lib, "nvmlInit");
        nvmlShutdown = (shutdown)GetProcAddress(lib, "nvmlShutdown");
        nvmlGetDriverVersion = (get_version)GetProcAddress(lib, "nvmlSystemGetDriverVersion");

        if (NVML_SUCCESS != nvmlInit())
            throw(std::runtime_error("Unable to initialize NVML"));
    }

    std::string get_ver() {
        char buffer[81];
        nvmlGetDriverVersion(buffer, sizeof(buffer));
        return std::string(buffer);
    }

    ~NVML() {
        if (NVML_SUCCESS != nvmlShutdown())
            throw(std::runtime_error("Unable to shut down NVML"));
    }
};
}

int main() {  
    std::cout << "nVidia Driver version: " << NVML().get_ver();
} 
```

请注意，如果您在可以自由编辑 PATH 的机器上编写它纯粹是为了您自己的使用，您可以大大简化它。大多数代码都处理 this 使用的事实`NVML.DLL`，它位于通常不在路径上的目录中，因此代码会动态加载它，并用于`GetProcAddress`在其中查找我们需要使用的函数。在这种情况下，我们只使用了三个函数，所以处理起来并不难，但它仍然大大增加了代码的长度。

如果我们可以忽略所有这些废话，那么真正的代码将按照以下一般顺序出现：

```
nvmlInit();
nvmlSystemGetDriverVersion(result, sizeof(result));
std::cout << result;
nvmlShutdown(); 
```

无论如何，要构建它，您需要一个命令行，例如：

```
 cl -Ic:\tdk\nvml\include nv_driver_version.cpp 
```

...假设您已在`c:\tdk`.

无论如何，是的，我至少在某种程度上对此进行了测试。在我的桌面上打印出来：

```
nVidia Driver version: 314.22 
```

...与我安装的相匹配。

# drupal - “错误：尝试获取用户索引时出现问题！” 关于 Drupal 7.x + Moodle 2.x 上的 moodle-drupal 服务同步错误

> ID：15892118
> 
> 赞同：0
> 
> 时间：2013-04-09T02:06:55.117
> 
> 标签：drupal, moodle

我正在使用[https://github.com/cannod/moodle-drupalservices/wiki/Installation-Drupal-Side](https://github.com/cannod/moodle-drupalservices/wiki/Installation-Drupal-Side)的说明将我的 Drupal 登录与 Moodle 安装集成。我已经成功完成了这些步骤并运行了“测试”，表明我的 Drupal 服务设置正确。即，我能够使用“远程”用户登录 Drupal，并从服务端点获得有效的 JSON 响应。但是，在完成“Moodle 端”说明后，我尝试按照说明从命令行手动运行数据库同步文件，并收到以下输出：

```
RemoteAPI Object
(
    [gateway] => mysitesurl.com
    [endpoint] => /drupalservice
    [status] => 1
    [session] => SESScc2ded1dd0a5... //this part is okay
    [sessid] => vtlmSjtBINVA... //this part is okay as well
)
ERROR: Problems trying to get index of users! 
```

看了下代码，[status]为1好像说明登录成功了，想不出来是什么问题。我在这个网站上发现其他几个人说他们有同样的问题，然后用类似“我想通了！”的内容回复了他们自己的帖子。并且不发布答案。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:50:45.280

您没有正确创建视图，这就是您出现错误的原因，请仔细按照说明进行操作，我做到了，并且从我的角度来看它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:42:41.850

经过几个小时想把我的头发拉出来后，我想通了。对于故障排除非常有帮助的是，在函数 CurlHttpRequest（第 135 行）中，您可以访问在访问服务时生成的任何 curl 错误。我只是回应了这一点，发现请求在结果交付之前就超时了，所以我进入 GetCurlGet 函数并稍微提高了 CURLOPT_TIMEOUT ，哇！在那之后一切都很好。

# javascript - 使用 jQuery，我如何将 arg 传递给函数，然后显示来自预定义变量的消息

> ID：15892119
> 
> 赞同：0
> 
> 时间：2013-04-09T02:06:55.060
> 
> 标签：javascript, jquery

我想调用这个函数，将它作为 arg 的错误类型传递，然后显示消息。

```
function msgDialog(msg) {
    // Define messages
    var errorMsg = "There has been an error.  We are sorry about that.";
    var loginMsg = "Something went awry with the login.  Please try again.";
    var uploadMsg = "Your upload failed.  Please try again.";
    var networkMsg = "You currently are not connected to the internet.  Please connect and try again.";
     alert(msg);
} 
```

如何调用该函数 msgDialog(loginMsg) 并拥有一个可以分配给正确消息的 var，然后用它做些什么？我在这里提醒它，但我真的会以不同的方式显示它。我知道我需要使用 arg 值的值创建一个新的 var，但不确定如何。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:14:28.463

那是纯 JavaScript，没有 jQuery。试试这个：

```
var msgDialog = (function() {
    var errors = {
        errorMsg : "There has been an error.  We are sorry about that.",
        loginMsg : "Something went awry with the login.  Please try again.",
        uploadMsg : "Your upload failed.  Please try again.",
        networkMsg : "You currently are not connected to the internet.  Please connect and try again."
    }

    return function(msg){
        alert(errors[msg]);
    }
})();

msgDialog('uploadMsg'); //  alerts "Your upload failed.  Please try again." 
```

如果您以前没有见过 JavaScript 闭包，您可以了解[这里发生了什么。](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

# php - 基本正则表达式

> ID：15892120
> 
> 赞同：0
> 
> 时间：2013-04-09T02:07:03.127
> 
> 标签：php, regex

出于某种原因，我总是卡在做任何超出非常基本的正则表达式的事情。

我正在尝试制作一个看起来像 URL 的正则**表达式**。我只想要基本检查。

我希望它匹配以下 X 是“某物”的模式。

`X://X.X`

`X://X.X...`等等

`X.X`

`X.X...`ETC

如果字符串包含这些模式之一，对我来说就足够了。这样一个 url like`www.example.com:8888`仍然会匹配。我尝试了许多不同的 REGEX 组合，`preg_match`但似乎无法按照我想要的方式行事。我已经咨询了许多其他有关 SO 的相关 REGEX 问题，但我的阅读并没有帮助我。

有什么帮助吗？如果您愿意，我很乐意提供更多信息，但我不知道您还需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:17:07.277

这需要练习，但这是我使用正则表达式测试器 ( [http://www.regextester.com/](http://www.regextester.com/) ) 来检查我的模式的一个：

```
^.+(:\/\/|\.)([a-zA-Z0-9]+\.)+.+ 
```

我的方法是从一开始就慢慢构建我的模式，然后一次添加一个。[这个备忘单对于记住http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)一切是什么非常有帮助。

基本上，该模式从字符串的开头开始，并检查后跟 :// 或 的任何字符。然后检查字母和数字的分组，后跟一个 . 以任意数量的字符结尾。

该模式可能会通过分组来改进，以不传递无效字符。但这一个又快又脏。`.`您可以用有效的字符替换第一个和最后一个。

***更新***

根据这里的评论是一个更新的模式：

```
^.+?(:\/\/|\.)?([a-zA-Z0-9]+?\.)+.+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:59:37.993

```
/^(.+:\/\/)?[^.]+\.[^.\/]+([.\/][^.\/]+)*$/ 
```

# python - 代码不会在 bash (python) 中显示

> ID：15892123
> 
> 赞同：-1
> 
> 时间：2013-04-09T02:07:40.553
> 
> 标签：python, bash, terminal, textwrangler

我在我的 Mac 上使用 python 并通过 wrangler 使用 python 并且很多东西随机出错所以我认为我做错了什么。我有一个非常简单的程序，当我在终端上以 bash 运行它时，它不会出现。这是代码：

```
def shoes():
    j= "jordans"
    a= "adidas"
    n= "nikes"
    question = input("whats ur fav. shoe?")
if a:
    return a 
```

我像这样在 bash 中访问它：

```
cd ~/Desktop/scripts

ls

python shoe.py 
```

然后什么都没有出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:13:01.230

添加这个：

```
if __name__=='__main__':
    shoes() 
```

如果你想展示一些东西，使用`print 123`或`sys.stdout(123)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:26:21.480

你在那里做什么：

```
def shoes():
    j= "jordans"
    a= "adidas"
    n= "nikes"
    question = input("whats ur fav. shoe?")
    if a:
        return a 
```

只是命名-定义-发明一个函数，该函数**在**`shoes()`脚本中的其他所有位置都调用（之后）调用。

当你想调用它时，你应该在某个地方以这种方式显式调用它：`shoes()`

如果您希望您的 python 脚本定义一个函数，然后使用它，您应该编写：

```
# comments start of your script

#there I am defining the function shoes()
def shoes():
    j= "jordans"
    a= "adidas"
    n= "nikes"
    question = input("whats ur fav. shoe?")
    if a:
        return a

#there I'm calling right now the function shoes()
shoes()   # there I do it inside the main script 
```

您似乎是新手，只是函数的另一个示例：

```
def unotherfunction(i):
    for i in range(0,i+1):
        shoes()

#If I call unotherfunction(), then, only then, shoes will be called twice, or fourth, or 7th or depending on the number your set to i like 2, 4 or 7..

unotherfunction(5) # will call 5 times your function shoes() ( asking you 5 times the same question of course ;-) 
```

可选地，也许您还应该添加一个测试，例如：

```
question = input("whats ur fav. shoe?")
if a = question:
    return a 
```

这将使输入更有意义。否则，您通过键盘输入的内容根本不属于您的测试。

然后再次警告，您只有一条返回可观价值的路径`a`...注意...您会看到...在其他路径中它会`None`默默返回并给您带来惊喜...

# php - PHP 按日期对 XML 元素进行排序

> ID：15892127
> 
> 赞同：1
> 
> 时间：2013-04-09T02:07:47.150
> 
> 标签：php, xml, arrays, date, sorting

下面是我的 XML 文件

```
<?xml version="1.0"?>
<calender>

<task>
<date>00/00/0000</date>
<title>My Birthday</title>
<description>Today is my birthday!</description>
</task>

<task>
<date>04/08/2013</date>
<title>test</title>
<description>swdefswde</description>
</task>

<task>
<date>04/02/2013</date>
<title>test</title>
<description>test</description>
</task>

<task>
<date>04/01/2013</date>
<title>egfwe</title>
<description>wefwef</description>
</task>

<task>
<date>04/03/2013</date>
<title>ssdv</title>
<description>ssdvs</description>
</task>

</calender> 
```

我正在尝试将它们添加到数组中，并按日期对元素进行排序[然后用排序后的 xml 重写 xml 文件]。有人可以帮帮我吗？

我已经厌倦了以下代码但不起作用[甚至无法将它们添加到数组中]

```
$xml_temp = array();
foreach ($xml_add->task as $aTask) {
    $xml_temp[] = $aTask;
    }

    print_r ($xml_temp); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:01:22.537

你的数组很好。接下来你需要的是[`usort`](http://www.php.net/manual/en/function.usort.php)：

```
$xml=simplexml_load_string(<<<XML
<?xml version="1.0"?>
<calender>

<task>
<date>00/00/0000</date>
<title>My Birthday</title>
<description>Today is my birthday!</description>
</task>

<task>
<date>04/08/2013</date>
<title>test</title>
<description>swdefswde</description>
</task>

<task>
<date>04/02/2013</date>
<title>test</title>
<description>test</description>
</task>

<task>
<date>04/01/2013</date>
<title>egfwe</title>
<description>wefwef</description>
</task>

<task>
<date>04/03/2013</date>
<title>ssdv</title>
<description>ssdvs</description>
</task>

</calender>
XML
);
$arr=array();
foreach($xml->task as $aTask)
{
    $arr[]=$aTask;
}
//print_r($arr);
/* uncomment the above line to debug */
usort($arr,function($a,$b){
    return strtotime($a->date)-strtotime($b->date);
});
//print_r($arr);
/* uncomment the above line to debug */
$xml=simplexml_load_string(<<<XML
<?xml version="1.0"?>
<calender>
</calender>
XML
);
foreach($arr as $aTask)
{
    $tTask=$xml->addChild($aTask->getName());
    $tTask->addChild($aTask->date->getName(),(string)$aTask->date);
    $tTask->addChild($aTask->title->getName(),(string)$aTask->title);
    $tTask->addChild($aTask->description->getName(),(string)$aTask->description);
}
echo $xml->asXML(); 
```

回显的 XML（手动格式化以使其看起来更好）：

```
<?xml version="1.0"?>
<calender>

<task>
<date>00/00/0000</date>
<title>My Birthday</title>
<description>Today is my birthday!</description>
</task>

<task>
<date>04/01/2013</date>
<title>egfwe</title>
<description>wefwef</description>
</task>

<task>
<date>04/02/2013</date>
<title>test</title>
<description>test</description>
</task>

<task>
<date>04/03/2013</date>
<title>ssdv</title>
<description>ssdvs</description>
</task>

<task>
<date>04/08/2013</date>
<title>test</title>
<description>swdefswde</description>
</task>

</calender> 
```

需要 PHP >= 5.3

`[Live demo](http://3v4l.org/m8t3S#v530)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:53:14.033

您在这里有多个问题：

1.  您想要对 SimpleXMLElements 列表进行排序。一个参考问题是：
    *   [simpleXML 的 PHP 排序问题](https://stackoverflow.com/q/3023029/367456)
2.  您需要将元素添加到默认情况下不支持的 SimpleXMLElement 中。这在以下内容中得到了广泛的概述：
    *   [SimpleXML：将一棵树附加到另一棵树](https://stackoverflow.com/q/3418019/367456)
    *   [在 SimpleXML 中，如何将现有的 SimpleXMLElement 添加为子元素？](https://stackoverflow.com/q/767327/367456)

此外，关于如何搜索 SimpleXMLElements 列表的问题可以进一步细分，因此您的具体问题不清楚。从您的问题来看，您似乎已经了解需要将 SimpleXMLElements 列表转换为数组。

因此，您可能也在寻找如何对多维数组进行排序的参考问题：

*   [如何在php中对多维数组进行排序](https://stackoverflow.com/q/96759/367456)

如您所见，您的问题有很多方面，很难回答。如果您提出具体的编程问题而不是完整的脚本，Stackoverflow 会更好地工作；）

# javascript - RequireJS 优化器和咖啡脚本

> ID：15892128
> 
> 赞同：1
> 
> 时间：2013-04-09T02:07:54.267
> 
> 标签：javascript, coffeescript, requirejs

当我尝试在我的项目上运行节点 RequireJS 时，我遇到了几个问题。

这是我的文件夹结构：

```
-root
    -/src
        -App.coffee

    -/static
        -/vendor
            -/plugin
                -r.js
                -coffee-script.js

            -/lib
                -jquery.js

            -main.js

    -build.js 
```

这是我的 build.js 文件：

```
({
    appDir          : './',
    baseUrl         : './static/js/',
    dir             : '../public',
    optimize        : 'uglify',
    exclude         : ['coffee-script'],
    stubModules     : ['cs'],

    paths: {

        // Libraries

        'modernizr'     : 'vendor/modernizr',
        'jquery'        : ['//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min', 'vendor/jquery'],
        'jqueryui'      : 'vendor/jquery-ui',
        'backbone'      : 'vendor/backbone',
        'underscore'    : 'vendor/underscore',

        // Plugins

        'plugin'        : 'plugin/plugin',

        // RequireJS

        'cs'            : 'plugin/cs',
        'coffee-script' : 'plugin/coffee-script'

    },
    shim: {

        'jqueryui' : ['jquery'],

        'underscore': {
            exports: '_'
        },

        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        }
    },
    modules: [{
        name: "main"
    }]
}) 
```

最后这是我的 main.js 文件：

```
require({
  baseUrl   : '../../src/',
  paths: {
    cs: '../../cs',
    'coffee-script': '../../coffee-script'
  }
}, ['cs!App']); 
```

我总是遇到与不正确的路径设置相关的错误，我无法弄清楚我错在哪里。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:30:14.010

下面的解决方案适用于我的情况。这是使用 shim 导入或手动包装的非 amd 模块的常见问题（例如[这个](https://github.com/pajtai/raphael-amd)，带有自定义路径）。

尝试避免使用相对路径并改用绝对¹路径。从别名模块调用的依赖项将使用其当前位置来查找所需的模块。

```
require.config(
{
  locale: window.GIS.i18n.locale,
  deps: ['cs!modules/main'],
  paths: {
    'i18n'                       : 'i18n',
    'underscore'                 : 'libs/underscore',
    'cs'                         : 'libs/cs', // there's no '../something/else/libs/cs'
    'CoffeeScript'               : 'libs/coffeescript', // ibidem.
    'text'                       : 'libs/text',
    // ... other amd module aliases go here...
  },

  shim:{
  // ...
  }

});

define(['cs!modules/main'], function(){}); 
```

¹当然，这些*本身*不是绝对路径，但它们是相对于模块树的根目录的。

# php - 图像正在保存到数据库中的文件夹，但其他信息未保存

> ID：15892131
> 
> 赞同：0
> 
> 时间：2013-04-09T02:07:58.017
> 
> 标签：php, jquery, mysql, database

需要帮助上面的代码是将图像保存到上面代码中定义的文件夹（照片）中。但是表单发布的其他数据没有保存到数据库中...我是 php 新手，我从网站 www.jeasyui.com 找到了这段代码。所以我尝试修改它但失败..像往常一样.:(

```
if (!isset($_FILES['image']['tmp_name'])) {
echo "";
}else{
$file=$_FILES['image']['tmp_name'];
$image= addslashes(file_get_contents($_FILES['image']['tmp_name']));
$image_name= addslashes($_FILES['image']['name']);

        move_uploaded_file($_FILES["image"]["tmp_name"],"photos/" . $_FILES["image"]["name"]);

        $location="photos/" . $_FILES["image"]["name"];
        $name = $_REQUEST['prname'];
        $code = $_REQUEST['prcode'];
        $type = $_REQUEST['prtype'];
        $weight = $_REQUEST['prweight'];
        $desc = $_REQUEST['prdesc'];
        $machine = $_REQUEST['prmachinemodel'];
include 'conn.php';
$sql = "insert into canon (product_name,product_code,product_type, product_descp, product_weight, machine_model, location) values('$name','$code','$type','$desc',$weight','$machine','$location')";
$result = @mysql_query($sql);
if ($result){
echo json_encode(array('success'=>true));
} else {
echo json_encode(array('msg'=>'Some errors occured.'));
}}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:55:16.503

如果您复制了代码，请确保您有以下名称的 html 输入：prname、prcode、prtype、prweight、prdesc、prmachinemodel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:42:17.647

首先使用 POST 或 GET 代替 REQUEST。
那么如果你做一个 $sql 的 var_dump，而不是尝试在 phpMyAdmin 中执行它会发生什么？

# javascript - 字典中的字符串到字典

> ID：15892135
> 
> 赞同：0
> 
> 时间：2013-04-09T02:08:22.877
> 
> 标签：javascript

我有一个字典形式的字符串，方式如下：`var str1= '{ "T1" : "1"},{ "T1" : "2"}, { "T2" : "3"},{ "T2" : "4"}, { "T2" : "5"}, { "T3" : "6"}, { "T3" : "7"},{ "T3" : "8"},{ "T2" : "9"}, { "T2" : "10"}, { "T1" : "11"}, { "T1" : "12"}';`

请给出任何想法如何转换它，使其表现为树状结构。即 T1 将在循环中搜索到下一个 T1，并将 T1 及其值附加到当前迭代项中，类似于 T2 等等。例如 str2。

```
str2='{ "T1" : "1"} ,{ "T1" : "2", "T2" : "3"},{ "T1" :"2", "T2" : "4"}, { "T1" : "2", "T2" : "5", "T3" : "6"}, { "T1" : "2", "T2" : "5", "T3" : "7"},{ "T1" : "2", "T2" : "5", "T3" : "8"}, 
{ "T1" : "2", "T2" : "9"},{ "T1" : "2", "T2" : "10"}, { "T1" : "11"}, { "T1" : "12"}'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:29:50.060

我不确定你为什么有这样的结构。它不是一个有效的 JSON，你不能按原样解析它，因为你不能两次拥有相同的属性。所以，你需要的是将它“标准化”一点，或者以另一种方式从中获取值。例如：

```
var str = '{ "T1" : "1"},{ "T1" : "2"}, { "T2" : "3"},{ "T2" : "4"}, { "T2" : "5"}, { "T3" : "6"}, { "T3" : "7"},{ "T3" : "8"},{ "T2" : "9"}, { "T2" : "10"}, { "T1" : "11"}, { "T1" : "12"}';

var re = /"([^"]*)"\s*:\s*"([^"]*)"/g;
var dict = {};

for (var matches; matches = re.exec(str);){  
  var key = matches[1];
  (dict[key] || (dict[key] = [])).push(matches[2]);
} 
```

这将创建一个`dict`对象，如：

```
{T1:["1", "2", "11", "12"], T2:["3", "4", "5", "9", "10"], T3:["6", "7", "8"]} 
```

# javascript - npm嵌套依赖，为什么不模仿gem呢？

> ID：15892137
> 
> 赞同：1
> 
> 时间：2013-04-09T02:08:31.173
> 
> 标签：javascript, node.js, gem, npm, sails.js

我今天正在安装[sails.js](http://sailsjs.org)，看看它是如何一遍又一遍地安装相同的包（我的应用程序依赖项的依赖项），那么为什么npm 不使用像系统这样的gem？将其全局保存在库和他的不同版本中，如果您在服务器上有多个项目并且不一遍又一遍地安装相同的库，那么共享同一个库会很酷（我知道这是使用 npm 链接的一种解决方法，但似乎不被认为是最佳实践）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:18:54.707

依赖管理是困难的。npm 非常坚持不共享包并坚持每个包都有自己的 node_modules 文件夹。这样可以避免很多潜在的陷阱。这些包非常小，使用多一点的磁盘空间几乎总是比试图解决与依赖版本控制相关的问题更好。

同样有趣的是，注意何时在 git 中包含 node_modules。[http://www.futurealoof.com/posts/nodemodules-in-git.html](http://www.futurealoof.com/posts/nodemodules-in-git.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:14:39.817

对于这种功能选择，我可以给出的最佳猜测是产品可以使用的库的不同版本。也许您使用的是 Connect 2.8，但您的依赖项可能使用的是与您的 Connect 版本不兼容的 Connect 1.5。

# mysql - 如何让我的 mysql 查询显示朋友提要？

> ID：15892138
> 
> 赞同：0
> 
> 时间：2013-04-09T02:08:32.480
> 
> 标签：mysql

这是我的表结构。(fun_friends)

```
id user_id,friend_id,status,createdat,updatedat
 1    1        2        1      123456  125461
 2    1        3        1      454545  448788
 3    2        4        1      565659  898889
 4    1        5        1      877878  878788 
```

这是user_uploads的表结构

```
id  user_id parent_id   category_id title   slug    tags    description video_type  source  video_link  video_thumb
 1     2        1              2    fun     fun     ['4','5']  coolvid     1        ytu     link        thumb 
```

我需要显示我朋友的最新上传

你能告诉我如何将这些表连接在一起吗？我试过了

```
SELECT * FROM fun_friends WHERE (user_id= '".$_SESSION['user_row_id']."' AND  `status` =1) OR (friend_id= '".$_SESSION['user_row_id']."' AND  `status` =1) 
```

它显示了登录用户的所有朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:17:45.953

您可以使用 user_id 字段加入两个表。下面的示例查询将返回一条具有最新 user_uploads.id 的记录。

```
select * 
from fun_friends a 
inner join user_uploads b on a.user_id = b.user id 
order by b.id desc limit 0,1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T02:50:24.867

如何使用`UNION`获取朋友用户并将其包装在子查询中，该子查询稍后加入另一个表，

```
SELECT  usr.*
FROM    user_uploads usr
        INNER JOIN
        (
            SELECT  user_ID  AS ID
            FROM    Fun_Friends
            WHERE   friend_ID = 'ID_HERE'
            UNION
            SELECT  friend_ID As ID
            FROM    Fun_Friends
            WHERE   ser_ID = 'ID_HERE'
        ) idList ON usr.user_ID = idList.ID 
```

# javascript - 使用 jquery 前置对象并消失

> ID：15892139
> 
> 赞同：0
> 
> 时间：2013-04-09T02:08:32.963
> 
> 标签：javascript, jquery, ajax, twitter-bootstrap

我正在使用 jquery 编写一个 javascript 文件，以便在 html 页面上注入输入框。但是，当我在页面上注入输入并在几秒钟内输入框消失。我想知道为什么会这样。

```
function injectArea(data) {
    $('#test').prepend('<input type="text" class="input-block-level" placeholder=" " value="hi">');
} 
```

PS 我正在使用 twitter 引导程序。不确定这是否会导致问题。

当我调用该函数时，我会这样做：

```
$(document).ready(function(){
    $(#button).click(injectArea);
}); 
```

这是我的html：

```
<form class="form">
    <button id ="button" class="btn btn-large btn-primary">Update Profile</button>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:16:28.483

这个小提琴表明`prepend`您使用它的方式或方式没有任何问题。问题必须来自其他地方。我的猜测是，您可能有一个 AJAX 回调，它会在您调用它几秒钟后触发，它会覆盖您对`#test`.

**小提琴：http:**
[//jsfiddle.net/jy43A/](http://jsfiddle.net/jy43A/)

* * *

**更新：**

你说：

> 出于某种原因，我的页面会自行刷新。

`#button`是一个`<button>`标签。单击它将提交表单并刷新页面（如果它针对当前页面）。用于`preventDefault();`停止提交默认操作：

```
function injectArea(data) {
    data.preventDefault();
    $('#test').prepend('<input type="text" class="input-block-level" placeholder=" " value="hi">');
} 
```

可以看到出现文本框，然后页面刷新。在您的情况下，这看起来会有所不同，但可能与以下内容相同：

**没有 preventDefault() 的效果：http:**
[//jsfiddle.net/jy43A/3/](http://jsfiddle.net/jy43A/3/)

这有效：

**使用 preventDefault() 的效果：http:**
[//jsfiddle.net/jy43A/2/](http://jsfiddle.net/jy43A/2/)

更多信息：

**preventDefault 信息：**
[http ://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:14:31.687

你确定你使用的是正确的方法吗？

`prepend`：

```
<div id="a"></div>

$("#a").prepend("<span>");

<div id="a">
    <span></span>
</div> 
```

`insertBefore`：

```
<div id="a"></div>

$("#a").insertBefore("<span>");

<span></span>
<div id="a"></div> 
```

# c# - c# Json.net反序列化列表 >

> ID：15892142
> 
> 赞同：1
> 
> 时间：2013-04-09T02:08:58.547
> 
> 标签：c#, json.net

反序列化此 JSON 字符串的正确方法是什么？它只是一个字典数组，其中每个字典都有一个“标题”和“子项”，其中子项是另一个字典数组。

我将其用作 TreeView 项目源，但树视图仅显示 Title1 > Child1 因为我认为我正在做的反序列化有问题。我也尝试打印出 Child1 的第一个孩子，但不知道该怎么做。下面的代码有一个无效的强制转换异常。

```
s = @"[{""title"":""Title1"",""children"":[{""title"":""Child1"",""children"":[{""title"":""grandchild1"",""children"":[{""title"":""Huh""}]}] }] }]";

List<Dictionary<string, object>> marr = JsonConvert.DeserializeObject<List<Dictionary<string, object>>>(s);
mTreeView.ItemsSource = marr;

List<Dictionary<string,object>> cs = (List<Dictionary<string,object>>)marr[0]["children"];
Debug.WriteLine(cs[0]["title"]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:15:05.607

在我看来，您有以下内容：

```
class MyObject
{
    public string title { get; set; }
    public List<MyObject> children { get; set; }
}

var deserialized = JsonConvert.DeserializeObject<List<MyObject>>(s); 
```

不，这里没有字典，因为：

*   尽我所能，我在这里看不到“字典”，而是上面对象的递归列表，并且
*   无论如何，这是您想要的对象的实际定义，因此您可以利用拥有真实类型的所有好处，而不仅仅是字符串字典。

注意解决您的评论：如果 JSON 字符串发生更改，它不会破坏您的代码；无关的属性将被忽略，缺少的属性将正确设置为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:53:26.580

[https://codetitans.codeplex.com/](https://codetitans.codeplex.com/)

codetitans JSON 支持将 JSON 正确解析为原语数组/dict，如下所示：

```
JSonReader jr = new JSonReader();
IJSonObject json = jr.ReadAsJSonObject(s);
Debug.WriteLine(json[0]["children"][0]["title"]); 
```

据我所知，它是唯一的 C# 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T21:41:27.107

看起来你现在可以用 JSON.NET 做到这一点

```
var @object = JsonConvert.DeserializeObject(s)
var slightlyMoreUsefulObject = (JArray)@object;

var actualObject = slightlyMoreUsefulObject[0]

var topLevelTitle = actualObject["title"]

var children = actualObject["children"]
var firstChild = children[0]
var firstChildTitle = firstChild["title"] 
```

# jquery - 调用了 jQuery Ajax 失败处理程序，但表单数据发布了两次，成功

> ID：15892149
> 
> 赞同：0
> 
> 时间：2013-04-09T02:10:26.190
> 
> 标签：jquery, ajax, post

我有一个使用 jQuery 发布（启用 javascript 时）的 prog 增强表单。

当 javascript 被禁用时，一切正常。

```
<form class="clearfix" action="https://examples.com/api/rest/members/memberidnotshownforsecurity/examples/?on_success=https://examples.com/account/examples?alerts=inserted&amp;on_failure=https://examples.com/error" method="POST" onsubmit="return false;">
    <input id="url" type="text" name="example_url" placeholder="paste a link to example it"><br>
    <button id="insertExample" type="button">create</button>
</form> 
```

当点击#insertExample 按钮时，jQuery 处理请求。

```
<script type="text/javascript">
    $(document).ready(function() {
        var insertExampleMutex = false;
        $("#insertExample").on('click', null, function(event) {
            if ( insertExampleMutex == false ) {
                insertExampleMutex = true;
                var reference = $(this);
                var progsubmit = reference;
                var progform = progsubmit.parents('form');
                var progmethod = progform.attr('method');
                var progaction = progform.attr('action').substring( 0, progform.attr('action').indexOf('?') );
                var progdata = progform.serialize();
                var inventory = reference.parents('#core').find('#inventory');
                progsubmit.html('loading...');
                $.ajax({
                    type: progmethod,
                    url: progaction,
                    data: progdata,
                    dataType: 'json'
                }).done(function(data) {
                    if ( data.status == '1' ) {
                        inventory.prepend('<div style="cursor: pointer;" id="selectExample" href="' + "https://examples.com" + '/api/rest/members/' + data['data']['member_examples']['member_id'] + '/examples/' + data['data']['member_examples']['example_id'] + '" class="alert bgsuccess"><center><p class="psmall">A new example was created. Click to here display.</p></center></div>');
                    } else {
                        inventory.prepend('<div style="cursor: pointer;" onclick="window.location.reload();" class="alert bgfailure"><center><p class="psmall">An error occurred.</p></center></div>');
                    }
                }).fail(function() {
                    inventory.prepend('<div style="cursor: pointer;" onclick="window.location.reload();" class="alert bgfailure"><center><p class="psmall">An error occurred.</p></center></div>');
                }).always(function() {
                    progform[0].reset();
                    progsubmit.html('create');
                    inventory.children('p').remove();
                    insertExampleMutex = false;
                });
            }
        });
    });
</script> 
```

**问题是 .failure() 请求处理程序被触发......即使发布成功。第二个问题是它不仅成功了一次，而且还成功了两次。**

在数据库中创建了两个具有相同数据的条目，当然除了 id。

我搜索了一下，但没有找到任何结论。

*   我已经在使用忽略多个请求的互斥变量。

*   浏览器和javascript没有提交表单。两者都来自 ajax 调用（这似乎是不可能的，因为 mutex 变量）

*   我读到 Ajax 可能会收到 301，这会导致它再次发布到重定向的 url，但情况似乎并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:39:08.190

根据我的经验，如果处理来自服务器的成功响应的 javascript 失败，则失败处理程序将触发。也就是说，服务端可以成功，但是如果客户端没有正确处理，就会触发错误事件。您可以尝试使用 chrome 或 firebug 或其他东西调试响应触发的 javascript。

当 $(document).ready 函数多次触发时，我遇到了双重打击问题。例如，如果您发布的脚本块在某些 HTML 中包含多次，这将导致您的代码被多次连接。

同样，您可以在 document.ready 函数中设置断点以查看发生了什么。

# .net - 具有模拟的用户设置/配置

> ID：15892151
> 
> 赞同：1
> 
> 时间：2013-04-09T02:11:01.327
> 
> 标签：.net, winforms, impersonation

是否可以让[ConfigurationManager.OpenExeConfiguration](http://msdn.microsoft.com/en-us/library/ms134265.aspx)使用当前模拟的用户（当模拟类似于[WindowsImpersonationContext](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsimpersonationcontext.aspx)的代码示例时） - 以下是一个小摘录？

```
using (safeTokenHandle)
{
    Console.WriteLine("Did LogonUser Succeed? " + (returnValue ? "Yes" : "No"));
    Console.WriteLine("Value of Windows NT token: " + safeTokenHandle);

    // Check the identity.
    Console.WriteLine("Before impersonation: "
        + WindowsIdentity.GetCurrent().Name);

    Configuration config;
    //config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal);
    //Console.WriteLine("Local user config path: {0}", config.FilePath);

    // Use the token handle returned by LogonUser. 
    using (WindowsIdentity newId = new WindowsIdentity(safeTokenHandle.DangerousGetHandle()))
    {
        using (WindowsImpersonationContext impersonatedUser = newId.Impersonate())
        {

            // Check the identity.
            Console.WriteLine("After impersonation: " + WindowsIdentity.GetCurrent().Name);

            // This line throws exception
            config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.PerUserRoamingAndLocal);
            Console.WriteLine("Local user config path: {0}", config.FilePath);

        }
    }
    // Releasing the context object stops the impersonation 
    // Check the identity.
    Console.WriteLine("After closing the context: " + WindowsIdentity.GetCurrent().Name);
} 
```

如果我只是在模拟范围内添加调用，则会引发异常：

```
Exception occurred. An error occurred loading a configuration file: Catastrophic failure (Exception from HRESULT: 0x8000FFFF (E_UNEXPECTED)) 
```

如果我还在模拟块之前调用 OpenExeConfiguration，那么第二次调用（在块内）不会失败，而是返回原始用户的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:14:39.033

有一些事情需要发生才能使这项工作：

1.  模拟用户的配置文件需要使用[LoadUserProfile](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762281%28v=vs.85%29.aspx)显式加载- 这不仅仅是通过模拟用户来完成的。请注意，此 API 要求调用进程必须具有 SE_RESTORE_NAME 和 SE_BACKUP_NAME 权限。
2.  [如果使用从ApplicationSettingsBase](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.aspx)继承的 Settings 类，那么您需要实现一个知道如何为每个用户加载配置的自定义[SettingsProvider](http://msdn.microsoft.com/en-us/library/system.configuration.settingsprovider.aspx)
3.  默认情况下，[设置属性是缓存的](https://stackoverflow.com/questions/2050734/net-settingsprovider-applicationsettingsbase-caching)。您需要自定义 getter 以每次强制执行 Reload() 以确保调用 SettingsProvider。

这是一个很好的示例，展示了如何调用 LoadUserProfile API - [http://www.codeproject.com/Articles/125810/A-complete-Impersonation-Demo-in-C-NET](http://www.codeproject.com/Articles/125810/A-complete-Impersonation-Demo-in-C-NET)

# javascript - 在 Play Framework 中获取模板参数

> ID：15892153
> 
> 赞同：0
> 
> 时间：2013-04-09T02:11:18.803
> 
> 标签：javascript, jquery, parameters, playframework, playframework-2.1

我有一个带有这样参数的模板：

```
@(people: List[models.Person])
<html>
<head>      
</head>
<body>
<table class="centered" id="table_people">
 <thead>
   <tr class="table_header">
        <th></th>
        <th class="people_column">Name</th>
        <th class="people_column">Active</th> 
    </tr>
 </thead>
 <tbody>     
    @for(p <- people) {
     <tr>
        <td><button id="timesheet_view_" >View</button</td>
        <td><b>@p.getName()</b></td>
        <td>@p.isActive()</td>          
    </tr>           
   }
</tbody>
</table> 
```

该代码显示人员列表。现在，我想在单击按钮视图时显示人员信息。为此，我必须写这样的东西：

```
 <script>
    $( "#timesheet_view_<%= people[i].id %>" )
      .button()
      .click(function() {
         people = '<%= people[i].name %>';
         showTimeSheet('current', '<%= people[i].name    %>');              
            })
   </script> 
```

但我找不到如何在 Javascript 中获取模板的 value people 参数。我尝试使用 @ 字符，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T09:12:22.310

首先，您必须修复您的 HTML 代码：： `<td><button id="timesheet_view_" >View</button</td>`正确
关闭按钮元素：`</button`使用“ **>** ”。

其次，你必须给每个按钮一个唯一的 ID：

你的代码：

```
@for(p <- people) {
  <tr>
    <td><button id="timesheet_view_" >View</button</td>
    <td><b>@p.getName()</b></td>
    <td>@p.isActive()</td>          
  </tr>           
} 
```

试试看：

```
@for(p <- people) {
  <tr>
    <td><button id="timesheet_view_@p.id">View</button></td>
    <td><b>@p.getName()</b></td>
    <td>@p.isActive()</td>          
  </tr>           
}

<script>
  $(document).ready(function() {
    // There are better ways to do this, but it's just for your example
    @for(p <- people) {
      $("#timesheet_view_@p.id").click(function(e) {
        ... // your javascript code here
      });
    }
  });
</script> 
```

在我看来，最好在此处使用链接（而不是按钮），因为对于每个按钮，您都需要为 onclick 事件编写额外的 javascript 代码。通过链接尝试并播放！将为您完成工作：

```
@for(p <- people) {
  <tr>
    <td><a class="btn" href="@routes.Application.view(p.id)">View</a></td>
    <td><b>@p.getName()</b></td>
    <td>@p.isActive()</td>          
  </tr>           
} 
```

顺便说一句，如果您使用 Twitter Bootstrap，您可以使用`class="btn"`并且您的链接看起来像一个按钮。

开始你的游戏！应用程序并查看 HTML 源代码。您将看到您的代码`<button id="timesheet_view_@p.id">View</button>`如下所示：

`<button id="timesheet_view_1">View</button>`

`<button id="timesheet_view_2">View</button>`

...

`<button id="timesheet_view_9">View</button>`

希望这可以帮助。

最好的问候， gfjr

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:14:19.023

你不能那样做。Javascript 在客户端运行，而 Play 在服务器端运行。

在您的 Javascript 运行时，页面已经被渲染并且 Play 已经完成了它的一部分。

您可以做的是从中捕获相关数据`people`并将其放入数据属性中。

```
<tbody>     
  @for(p <- people) {
    <tr data-people-id="@p.getId()" data-people-name="@p.getName()">
      <td><button class="timesheet_view" >View</button</td>
      <td><b>@p.getName()</b></td>
      <td>@p.isActive()</td>          
    </tr>           
  }
</tbody> 
```

在您的脚本中，您可以获得数据属性。

```
<script>
  $( ".timesheet_view" )
    .button()
    .click(function() {
      var row = $(this).closest("tr");
      var peopleId = row.data("peopleId");
      var peopleName = row.data("peopleName");
      // Do whatever you want with this data...
      // Not sure how the showTimeSheet is working so leave it up to you
      //showTimeSheet('current', '<%= people[i].name    %>');              
  });
</script> 
```

# javascript - AngularJS 将特定数据绑定到模板

> ID：15892154
> 
> 赞同：0
> 
> 时间：2013-04-09T02:11:51.113
> 
> 标签：javascript, knockout.js, angularjs

我目前正在从 Knockout 切换到 Angular。我现在遇到的主要问题是将我的原始模板转移到 Angular 可以识别的东西上。

具体来说，这里有一些我在传输时遇到问题的代码：

`<!-- ko template: { name: 'SquareTempl', data: Squares[5] } --><!-- /ko -->`

在 Knockout 中，这会将 Squares[5] 附加到 SquareTempl，以便在渲染模板时，它会使用 Squares[5] 中的成员（或附加的任何数据）进行渲染。

我需要对 Squares[0]~Squares[11] 重复该过程。不过我不能使用 ng-repeat，因为我不会按数字顺序遍历它们。

理想情况下，如果我能做一些类似的事情就好了

`<td class="Square" id="five" ng-include src="'SquareTempl.html'" ng-data="Squares[5]">`

有任何想法吗？

这是我写的一个 JSFiddle，概述了我尝试使用 ng-model 的失败尝试。

[http://jsfiddle.net/fZz3W/9/](http://jsfiddle.net/fZz3W/9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:55:33.237

两件事：首先，您可以通过自己实现来使 ng-data 可用。`YourApp.directive("ngData", function() {})`其次，您是否需要 HTML 成为另一个文件的一部分？一个简单的方法来完成你在 Angular 中寻找的东西是`ng-repeat`这样的：

```
<td ng-repeat="item in Square">
    <div>{{item.name}}</div> 
</td> 
```

当`Square`数组更新时，将发布一个额外的帖子。

查看修改后的 JSFiddle：http: [//jsfiddle.net/TdWMF/1/](http://jsfiddle.net/TdWMF/1/)

所以这主要是实现你想要的东西，直到我可以为你提供更好的解决方案：

使用混合顺序的第二次更新：http `ng-repeat`: [//jsfiddle.net/TdWMF/3/](http://jsfiddle.net/TdWMF/3/)

基本上：

```
<div ng-repeat="index in [4, 2, 0, 3, 1]">
   square index: {{index}}<br />
   square: {{Squares[index]}}
</div> 
```

我知道，非常丑陋，不理想。我还建议在函数中执行 order 数组生成，然后执行：`ng-repeat="index in displayOrder(Squares)"`

# c# - 带有接口的 C# 多重继承

> ID：15892155
> 
> 赞同：-1
> 
> 时间：2013-04-09T02:12:03.400
> 
> 标签：c#, asp.net, multiple-inheritance

```
public interface IA
{
  void DoSomething();
  void Calculate();

}

public interface IB
{
  void DoSomethingElse();
  void Calculate();
}

public class A : IA
{
  void DoSomething() { }
  void Calculate() {}
}

public class B : IB
{
  void DoSomethingElse() { }
  void Calculate() {}
}

public class C : IA, IB
{

    //How can I implement Calculate() in class B and DoSomething() in class A?
} 
```

如何避免 C 类中的重复代码。参考：[如何在 C# 中模拟多重继承](https://stackoverflow.com/questions/3199956/how-to-simulate-multiple-inheritance-in-c-sharp)。我不想在 C 类中再次编写完整的方法。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:19:45.257

请注意，您根本没有实现多重继承。C# 具有单数继承。您正在实现多个接口。

绝对没有理由不能在类`A`和中实现接口`B`，然后从 B`B`派生`A`和`C`派生。接口的方法实现甚至可以是抽象的，这迫使子类进行实现。如果您遵循这种方法，那么您仍然可以通过强制转换或使用关键字`C`来传递`IA`或简单地传递。`IB``as`

您还可以拥有 interface `IB`"inherit" ¹ (implement) `IA`，这意味着实现的任何东西也`IB`必须实现`IA`。

¹当`IB`从`IA`它派生不是像在类级别那样的继承时，它实际上**仍然**是实现。所以`IB` **implements** `IA`，它不会继承它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:37:10.303

假设这`IA.Calculate()`不一样`IB.Calculate()`，因此您不能只`IB`继承 from ，您可以通过委派和的私有实例执行`IA`来实现这两个接口：`C``A``B`

```
public class C : IA, IB
{
    private A _a;
    private B _b;

    public C()
    {
        this._a = new A();
        this._b = new B();
    }

    public void DoSomething()
    {
        this._a.DoSomething();
    }
    void IA.Calculate()
    {
        this._a.Calculate();
    }
    public void DoSomethingElse()
    {
        this._b.DoSomethingElse();
    }
    void IB.Calculate()
    {
        this._b.Calculate();
    }
} 
```

# android - 安卓教程画面

> ID：15892158
> 
> 赞同：0
> 
> 时间：2013-04-09T02:12:13.727
> 
> 标签：android

我对这个话题真的很困惑，所以我不得不问。作为 Android 上的新手，我正在考虑为我正在开发的应用程序创建一个*类似页面的介绍性教程，就像你**在第一次使用的各种应用程序上*看到的那样，它们指出了应用程序的各种功能，这个按钮在按下时执行什么功能，菜单项做什么，以一种**动态**的方式。

这些实际上是什么？他们是`splash screens`吗？还是它们真的不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:50:17.243

我刚刚为我的应用制作了一个教程屏幕。我在我的情况下所做的是：

1) 创建所有活动及其功能的快照。

2) 然后我使用 Photoshop 放置不同的标记来定义快照中的不同区域以及它们的作用。（看起来类似于上面评论中发布的链接）

3) 然后我使用了一个 Imageswitcher，底部有一个下一步按钮。在应用程序开始时，如果用户想要查看教程，我只需使用 Imageswitcher 启动一个活动。

4) 然后我在 ImageSwitcher 下方的下一个按钮的帮助下循环浏览所有快照。

5) 在 ImageSwitcher 的最后一张图片上，我只是启动了一个 Intent 来打开实际应用程序的主屏幕。

希望这可以帮助！！！

# javascript - 航点插件Jquery

> ID：15892159
> 
> 赞同：-1
> 
> 时间：2013-04-09T02:12:17.193
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

> ```
> $(function() {
> 
>     // Do our DOM lookups beforehand
>     var nav_container = $(".nav-container");
>     var nav = $("nav");
> 
>     nav_container.waypoint({
>         handler: function(event, direction) {
>             nav.toggleClass('sticky', direction=='down');
> 
>             if (direction == 'down') nav_container.css({ 'height':nav.outerHeight() });
>             else nav_container.css({ 'height':'auto' });
>         },
>         offset: 15
>     });
> 
> }); 
> ```

你好吗？- 我正在使用[imakewebthings.com/jquery-waypoints](http://imakewebthings.com/jquery-waypoints/)将导航元素向下移动到页面。我多么想在页面的特定部分取消导航元素，然后在向上滚动时将其粘贴回来并将其带到原来的位置 - 向下滚动后可能是 30pixcel。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:34:20.797

如果我了解您希望元素在超过某个阈值时粘住，并在超过该阈值时返回固定？

如果是这样 - 请查看[http://drewdahlman.github.io/Pinned/](http://drewdahlman.github.io/Pinned/)这将完全符合您的要求。这是一个易于使用的插件。

```
$("#element").pinned({
    bounds: 30, // when to become sticky
    scrolling: 0, // position during scroll 
}); 
```

超过 30 后它会回到原来的位置，当它达到 30px 时会粘住。确保将其默认位置设置为绝对位置。

祝你好运！

# c - 指向 C 多维数组的指针的地址

> ID：15892160
> 
> 赞同：3
> 
> 时间：2013-04-09T02:12:19.503
> 
> 标签：c, arrays, pointers, dereference

来自以下代码的问题：

```
#include <stdio.h>

int main(int argc,char *arg[]){

    if (argc>2){
      int m=atoi(arg[1]);
      int n=atoi(arg[2]);

      int a[m][n];
      int (*p)[m][n]=&a;

      printf("p : %p, *p : %p, **p : %p\n",p,*p,**p);
    }

    return 0;
} 
```

主要环境：gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) x86-64

```
gcc main.c
./a.out 2 4 
```

输出：

```
p : 0xbfea7ef0, *p : 0xbfea7ef0, **p : 0xbfea7ef0 
```

问题是为什么`p == *p == **p`。我认为这可能是因为`a`它是一个数组，一种常量指针，它的地址是特定的，这涉及到 gcc 的一些实现细节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T02:47:50.733

`p`是指向具有维度的数组的指针`[m][n]`。该指针的值是 的地址`a`，因此打印`p`会得到 的地址`a`。

`*p`是一个维度为 的数组`[m][n]`。this 作为指针的“值”是指向数组第一个元素的指针，即`a[0]`. 这是与 相同的地址`a`。

`**p`是一个维度为 的数组`[n]`。此指针的值是指向数组第一个元素的指针，即`a[0][0]`. 这又是同一个地址`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:28:40.493

对于固定大小的数组和可变修改的数组，观察到的行为是相同的：

```
#include <stdio.h>

int main(void)
{
    enum { m = 3, n = 4 };
    int a[m][n];
    int (*p)[m][n] = &a;

    printf("p : %p, *p : %p, **p : %p\n", p, *p, **p);
    return(0);
} 
```

在我的机器上，这产生了：

```
p : 0x7fff6c542520, *p : 0x7fff6c542520, **p : 0x7fff6c542520 
```

当然，`p`是指向两个程序中的二维数组的指针（我不会再次添加“在两个程序中”限定符，即使它适用）。当您打印时`p`，您将获得分配给它的数组的地址，即`a`. 因为`p`is 指向 2D 数组的指针，所以`*p`'is' 2D 数组，但在大多数情况下，数组引用变成指向其第一个元素`*p`的指针，指向 的指针也是如此`a[0]`，它与引用位于相同的内存位置`a`。类似地，`**p`“是”一维数组，但类似地，`**p`是指向 的指针`a[0][0]`，它也是与`a`引用相同的内存位置。因此，这三个值应该是相同的，并且编译器是正确的。

这并不容易阅读，但是它试图解释的 C 也不是。

这是原始程序的一个小变化，它说明了和指向的不同对象的`p`大小：`*p``**p`

```
#include <stdio.h>

int main(void)
{
    enum { m = 3, n = 4 };

    int a[m][n];
    int (*p)[m][n]=&a;

    printf("p+0 : %p, (*p)+0 : %p, (**p) + 0 : %p\n",
           (void *)(p+0), (void *)((*p)+0), (void *)((**p)+0));
    printf("p+1 : %p, (*p)+1 : %p, (**p) + 1 : %p\n",
           (void *)(p+1), (void *)((*p)+1), (void *)((**p)+1));
    return(0);
} 
```

严格来说，`%p`应该给转换规范一个`void *`; 这里的演员强制执行这一点。官方来说，原始代码有点草率，尽管很少有机器会影响它。

输出是：

```
p+0 : 0x7fff63453520, (*p)+0 : 0x7fff63453520, (**p) + 0 : 0x7fff63453520
p+1 : 0x7fff63453550, (*p)+1 : 0x7fff63453530, (**p) + 1 : 0x7fff63453524 
```

请注意指向的对象的大小是如何不同的，如`+1`版本所示：

```
sizeof(*p)   = 0x30
sizeof(**p)  = 0x10
sizeof(***p) = 0x04 
```

# d3.js - D3：序数尺度、范围带和纽约地铁

> ID：15892167
> 
> 赞同：0
> 
> 时间：2013-04-09T02:13:23.587
> 
> 标签：d3.js

我有一个可视化显示纽约地铁穿过的人口普查区中收入水平的中位数（图片在这里 - [https://dl.dropbox.com/u/17156665/Screen%20Shot%202013-04-08%20at%209.56 .20%20PM.png](https://dl.dropbox.com/u/17156665/Screen%20Shot%202013-04-08%20at%209.56.20%20PM.png) )。希望清楚地显示哪些站点位于哪些行政区。将此文件用于数据（[https://docs.google.com/spreadsheet/pub?key=0ApL2ZVhpOmONdFdTUWhxV252elNORVNqT0g5Y0NzV1E&output=html](https://docs.google.com/spreadsheet/pub?key=0ApL2ZVhpOmONdFdTUWhxV252elNORVNqT0g5Y0NzV1E&output=html)）。认为最好的方法是在县切换时只画一条垂直线，然后在底部附加自治市镇的名称。

现在，我在背景中有一系列矩形，每个矩形都有一个 if 语句着色，但它非常笨重。玩过序数音阶和范围带无济于事。任何更好的解决方案都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:23:27.950

（这是一个非常有趣的数据并列！）

IMO 序数尺度对此过于笨拙，但更重要的是，如果一条线路不止一次穿过同一个行政区（如**M**线，它在皇后区开始和结束），就会出现问题；因为序数比例需要唯一的值。

最好的解决方案可能是首先构建一个数据数组，表示每个行政区的起始位置和它跨越的站点数量。例如，对于**M**线，它看起来像这样：

```
[
  {
    "county": "81",
    "countyName": "Queens"
    "start": 1,
    "span": 14
  },
  {
    "county": "61",
    "countyName": "Manhattan"
    "start": 15,
    "span": 10
  },
  {
    "county": "47",
    "countyName": "Brooklyn"
    "start": 25,
    "span": 7
  },
  {
    "county": "81",
    "countyName": "Queens"
    "start": 32,
    "span": 5
  }
] 
```

创建此数据数组的一种（有点神秘但非常简洁）方法是`reduce()`在过滤后的数据上调用该方法。像这样：

```
 boroughs = filtered_data.reduce(
      function(memo, stop, i) {
        var len = memo.length;
        if(len == 0 || (memo[len - 1].county != stop.county)) {
          memo.push({
            county: stop.county,
            start: i+1,
            span: 1
            countyName: "foo"// This needs a dictionary mapping county code to name 
          });
        }
        else {
          memo[len - 1].span++;
        }
        return memo;
      },
      []
    ) 
```

构建此数据后，您将其绑定到 d3 选择并为每个条目创建一个组。即，如果一条线穿过 3 个行政区，您将创建 3 个组。在每个组内，您可以附加一个`text`代表行政区名称和一个`rect`或`line`代表描述。像这样的东西：

```
 // note the use of your `stop_scale` for calculating positions/widths
  d3.selectAll('g.borough').data(boroughs)
    gCounties.enter()
      .append('g')// Create a group
      .attr('class', 'borough'
      .attr('transform', function(d) {// move the group to its appropriate x position
        return 'translate(' + stop_scale(d.start+1) + ')';
      })
      .each(function(d, i) {// inside each group:
        // append a rect (this is just an example)
        d3.select(this)
          .append('rect')
          .style('stroke', '#000')
          .attr('x', 0)
          .attr('width', stop_scale(d.span))
          .attr('height', 50);// This height should be changed to match your chart
        // append a text
        d3.select(this)
          .append('text')
          .text(d.countyName);
      }); 
```

* * *

顺便说一句，您的代码可以使用重构。您不必在`draw_first_line`and`update_chart`函数之间重复代码。有关这方面的更多信息，请查看[d3 教程页面上的](https://github.com/mbostock/d3/wiki/Tutorials)*通用更新模式*（第 I、II 和 III 部分）。

# compiler-construction - 为 TI-84 Plus Silver Edition 计算器编译一个 8xk 程序

> ID：15892170
> 
> 赞同：2
> 
> 时间：2013-04-09T02:13:54.347
> 
> 标签：compiler-construction, ti-basic

我有兴趣为我的 TI-84 Plus Silver Edition 计算器（不是使用计算器内置语言的程序）编写自己的应用程序。有谁知道 .8xk 文件的编译器，这是 TI-84 应用程序使用的文件扩展名？另外，有人可以为我提供一些应用程序的示例代码，以说明制作一个应用程序有多难吗？我不知道使用什么语言，我真的很想知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T20:31:55.947

编写闪存应用程序的最简单方法是使用 TI-BASIC + [Basic Builder](http://www.ticalc.org/archives/files/fileinfo/321/32127.html)

或者，您可以深入了解[z80 组装](http://sgate.emt.bme.hu/patai/publications/z80guide/)，尽管学习曲线非常陡峭。以下是[Learning z80 Assembly in 28 Days](http://www.ticalc.org/archives/files/fileinfo/268/26877.html)中的一些示例程序集。

```
LD     HL, (stack_ptr)    ; Load stack pointer
LD     (HL), E            ; Push the low-order byte
INC    HL                 ; Move stack pointer to next byte of available space
LD     (HL), D            ; Push the high-order byte
INC    HL
LD     (stack_ptr), HL    ; Save new stack pointer 
```

如果您希望通过 BASIC 轻松实现组装速度，可以使用几个 ASM 库（例如[xLib](http://www.ticalc.org/archives/files/fileinfo/428/42813.html)），但我不太确定它们作为 Flash 应用程序的工作情况如何。

您还可以查看[Ax](http://www.ticalc.org/archives/files/fileinfo/428/42813.html)，这是一种具有接近汇编速度的编程语言。

# php - 一个数组的多个 Foreach 循环

> ID：15892186
> 
> 赞同：0
> 
> 时间：2013-04-09T02:16:27.150
> 
> 标签：php, foreach

我有一个名为 $feedsMerged 的​​数组的 foreach 循环。我在文档顶部附近有这个 foreach 循环，它正在从数组中设置一些全局变量。

我想回忆一下 foreach 循环，或者在那个数组上再次运行它，这次从我上面设置的变量中构建元素。

文档顶部。

```
foreach ($feedsMerged as $posts) {
$post_id = $post['post_id'];
etc etc
} 
```

然后页面底部

```
foreach ($feedsMerged as $posts) {
echo '<div class="' . $post_id . '">stuff</div>';
} 
```

这可能吗？在同一个数组上使用两个 foreach 循环的原因是我想让这一切井井有条，并且我将在每个 foreach 之间包含不能在这个 foreach 中的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:20:11.693

完全没有问题。您可以使用脚本中任何支持的方法多次访问数组。

# java - 我正在尝试将控制台中的文本记录到文本文件中，并且没有创建文本文件

> ID：15892193
> 
> 赞同：1
> 
> 时间：2013-04-09T02:17:22.603
> 
> 标签：java, logging, java.util.scanner, java.util.logging

这是我的代码，我想知道为什么它没有记录任何内容。当我在控制台中输入时，它会说：

你好

2013 年 4 月 8 日晚上 10:13:47 java.util.logging.LogManager$RootLogger 日志

信息：你好

但是，没有任何内容被记录到任何文件中。

```
import java.io.IOException;
import java.util.Scanner;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;

public class main {
    public static void main(String[] args) throws IOException{

        while (1 == 1) {
            String text;
            Scanner in = new Scanner(System.in);
            text = in.nextLine();
            FileHandler fileTxt;
            SimpleFormatter formatterTxt;
            Logger logger = Logger.getLogger("");
            logger.setLevel(Level.INFO);
            fileTxt = new FileHandler("../loggedText.txt");
            formatterTxt = new SimpleFormatter();
            fileTxt.setFormatter(formatterTxt);
            logger.addHandler(fileTxt);
            logger.info(text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-22T16:53:09.150

您的循环永远不会终止，这意味着 JVM 永远不会执行正确的关闭。只有在所有日志关闭挂钩正常执行时，FileHandler 才会关闭和同步。数据可能已写入但从未[与文件系统同步](https://stackoverflow.com/questions/4072878/i-o-concept-flush-vs-sync)。

让我们创建一个可以正常终止的更正示例：

```
public class main {

    private static final Logger logger = Logger.getLogger(""); //Prevent G.C.

    public static void main(String[] args) throws IOException {
        logger.setLevel(Level.INFO);
        FileHandler fileTxt = new FileHandler("../loggedText.txt");
        fileTxt.setFormatter(new SimpleFormatter());
        logger.addHandler(fileTxt);

        System.out.println("root.level " + logger.getLevel());
        System.out.println("FileHandler.level " + fileTxt.getLevel());
        Scanner in = new Scanner(System.in);
        String text;
        while (true) {
            System.out.print("Enter text: ");
            text = in.nextLine();
            if (text != null && !text.isEmpty() 
                    && !"quit".equalsIgnoreCase(text)) {
                logger.info(text);
            } else {
                System.out.println("Done!");
                break;
            }
        }
    }
} 
```

将以下内容输出到控制台：

```
root.level INFO
FileHandler.level ALL
Enter text: hello
Nov 22, 2016 10:39:19 AM java.util.logging.LogManager$RootLogger log
INFO: hello
Enter text: quit
Done! 
```

在文件系统上`loggedText.txt`包含：

```
Nov 22, 2016 10:39:19 AM java.util.logging.LogManager$RootLogger log
INFO: hello 
```

如果您无法正常终止，则需要显式调用`FileHandler.close()`您创建的处理程序。

注意：记录的类名和方法名不正确，称为[JDK-8152389](https://bugs.openjdk.java.net/browse/JDK-8152389)。

# java - 为什么我会收到此空错误？我正在尝试添加到 ArrayList

> ID：15892196
> 
> 赞同：0
> 
> 时间：2013-04-09T02:17:45.673
> 
> 标签：java, arraylist

我在添加到 ArrayList 时遇到问题。在我的主要方法中，我有：

```
public static void main(String[] args)
{
    ArrayList<Bin> warehouse = new ArrayList<Bin>();
    Bin a = new Bin( "A" );
    Bin b = new Bin( "B" );
    warehouse.add( a );
    warehouse.add( b );
    a.add( new BinItem( "1234-0", 500 ) );
    a.add( new BinItem( "1234-1", 25 ) );
    a.add( new BinItem( "1234-2", 7720 ) );
    b.add( new BinItem( "1234-3", 1000 ) );
    for ( Bin bn : warehouse )
        System.out.println( bn );
} 
```

在 bin 类中有：

```
private String myName;
private ArrayList<BinItem> myContents;
public Bin( String name )
{
    myName = name;
}

public String getName()
{
    return myName;
}

public ArrayList<BinItem> getContents()
{
    return myContents;
}

public void add( BinItem b )
{
    myContents.add(b);    //This is where I'm getting the error.
}

public String toString()
{
    String s = "Bin " + myName + ":\n";
    for ( BinItem b : myContents )
        s += b + "\n";
    return s;
} 
```

它编译得很好，但是每当我运行它时，它都会在标记行显示“java.lang.NullPointerException”。这可能是愚蠢的，但任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:19:43.723

您似乎没有在任何地方初始化 myContents

```
 myContents = new ArrayList<BinItem>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:19:49.573

查看您的代码，您似乎从未初始化`myContents`：

`private ArrayList<BinItem> myContents;`

你真的应该总是初始化它：

`private ArrayList<BinItem> myContents = new ArrayList<BinItem>();`

确定的最好方法是设置断点并运行调试器。调试是一项非常非常有用的技能（在 Eclipse 中非常容易启动）。

似乎`myContents`是 null，而不是`b`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:19:16.830

您收到错误是因为在该`toString()`方法中，您尝试遍历`myContents`ArrayList，而该 ArrayList 从未为您的大多数项目初始化。

# java - QueryDSL,Hibernate delete Child table row on delete of parent table row

> ID：15892198
> 
> 赞同：3
> 
> 时间：2013-04-09T02:18:05.873
> 
> 标签：java, hibernate, jpa, querydsl

我正在尝试删除父表行并观察它是否在子表行上级联（删除）。带有 java 注释的父子表实体是：

```
//Table details
@Entity
@Table(name="PARENT_TABLE")
//Mandatory Column details
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name="PARENT_TABLE_ID")
private Integer id;
.
.
.
@OneToMany(cascade={CascadeType.ALL}, mappedBy = "parentTable")
private Set<ChildTable> setChildTable;
//Child table entity details:
@Entity
@Table(name = "CHILD_TABLE")
//Column details
@Id
@Column(name = "PARENT_TABLE_ID")
@GeneratedValue(strategy = GenerationType.AUTO)
private Integer id;
.
.
private ParentTable parentTable;

@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name = "PARENT_TABLE_ID")
public ParentTable getPatentTable() {
   return parentTable;
}

 //QueryDSL to Delete child table row, looks like this:
HibernateDeleteClause query = new HibernateDeleteClause(getSession(),QChildTable.childTable);
Path<?> idPath = QChildTable.childTable;
 query.where(((NumberPath<?>)idPath).in((Number[]) ids)).execute();
 //QueryDSL to Delete parent table rows, looks like this:
HibernateDeleteClause query = new HibernateDeleteClause(getSession(),QParentTable.parentTable);
Path<?> idPath = QParentTable.parentTable;
 query.where(((NumberPath<?>)idPath).in((Number[]) ids)).execute(); 
```

如果我删除孩子然后尝试删除父表行，它工作正常。寻求帮助以插入工作方式一次删除父表和子表行。与创建分配数据和插入的 ParentTable 对象一样，插入父表和子表行。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:38:59.043

不幸的是，JPQL 中的 DELETE 子句不会级联到相关实体，因此您需要使用 API 进行级联删除或更新：

```
A delete operation only applies to entities of the specified class and its subclasses. 
It does not cascade to related entities. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T00:01:41.827

回答我的问题以在删除父表行时删除子表行。

父表对象到 getChildTableSet 的映射：

```
@OneToMany(cascade = { CascadeType.ALL }, mappedBy = "parentTable", orphanRemoval = true)
public Set<ChildTable> getSetChildTable() {
    return setChildTable;
} 
```

ParentTable 列的子表对象的映射：

```
@ManyToOne
@JoinColumn(name = "PARENT_TABLE_ID")
public ParentTable getParentTable() {
    return parentTable;
} 
```

其余的 getter 和 setter 方法保持不变，两个父子表的 ID 都是自动生成的，只需获取映射，其余的应该可以正常工作。

# jmockit - 在哪里查看 jmockit 以调试期望不匹配？

> ID：15892212
> 
> 赞同：2
> 
> 时间：2013-04-09T02:19:20.550
> 
> 标签：jmockit

我在 jmockit 中使用一个相当复杂的参数列表来模拟一个方法，我怀疑有些东西不够“等于”。在 jmockit 的什么地方可以放置一个断点来观察比较过程并逐步完成它？

# scheme - Scheme：重载内置过程，一般重载

> ID：15892214
> 
> 赞同：2
> 
> 时间：2013-04-09T02:19:43.823
> 
> 标签：scheme, overloading

更具体地说，你能重载内置的 Scheme 过程显示吗？

更一般地说，如何在 Scheme 中重载任何过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:00:53.140

Scheme 没有基于 Java/C++ 类型的重载，它是动态类型的，因此没有意义。

你可以做一些事情：

您可以根据参数的结构重载：

```
(define overload1
    (case-lambda
        ((x y) (+ x y))
        ((x y z) (+ (- x y) z)))) 
```

不过，这并不能真正帮助您，因为`display`无论如何只会采取一个论点。

```
(define (overload-kinda x)
    (cond
        ((list? x) (do-list x))
        ((symbol? x) (do-sym x))
        ;etc
        )) 
```

这是hacky但有时是必要的。

我常用的方法是高阶函数和 case lambda

```
(define my-display
    (case-lambda
        ((x) (display x))
        ((x f) (display (f x))))) 
```

现在，如果我们需要特殊处理来显示任何内容，我们传入一个函数来渲染它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-04T12:37:15.783

接受的答案不会重载函数，只定义具有相同行为的不同函数。

Scheme 通常允许覆盖 bultin 函数，因此要重载该函数（例如`display`），您可以使用名为[Monkey Patch](https://en.wikipedia.org/wiki/Monkey_patch)的东西：

```
(define display (let ((orig display))
                  (lambda (x . rest)
                     (let ((port (if (null? rest)
                                     (current-output-port)
                                     (car rest))))
                       (if (number? x)
                           (orig (string-append "#<" (number->string x 16) ">") port)
                           (orig x port)))))) 
```

现在显示与数字的工作方式不同。您还可以使用自定义类型，例如以特定方式显示不同类型的记录。这是如何用任何允许修改原始绑定的语言覆盖 bultin 函数的一般示例。您将原始函数保存在变量中，重新定义函数，如果您调用原始函数，则使用保存原始函数的变量。

可以将代码抽象为通用宏，该宏将重新定义函数并在特定类型的参数上运行您的代码，因此它将像 Java 中那样进行适当的重载，而不仅仅是像 in 那样基于参数的数量`case-lambda`。

这是这样的宏示例（使用 lisp 类型宏）：

```
(define-macro (overload name-spec . body)
   (let ((name (car name-spec))
         (args (cdr name-spec)))
      `(define ,name (let ((,name ,name))
                       (lambda ,args
                          ,@body)))))

(overload (display x . rest)
   (let ((port (if (null? rest)
                   (current-output-port)
                   (car rest))))
     (if (number? x)
         (display (string-append "#<" (number->string x 16) ">") port)
         (display x port))))

(display 10)
;; ==> #<a>
(display "20")
;; ==>  20 
```

# android - 将 JSON 数据解析为 TextView 时出现问题，应用程序会崩溃

> ID：15892217
> 
> 赞同：0
> 
> 时间：2013-04-09T02:19:55.123
> 
> 标签：android, json, parsing

我不能让它做任何事情。一旦输入完成，它就会崩溃。

注释掉的部分是它以前显示信息的方式，但我只想显示 UPC 和产品。有任何想法吗？

如果有一个已经存在的问题，请链接它。

**崩溃日志：**

```
04-08 21:12:52.416: W/dalvikvm(26817): threadid=12: thread exiting with uncaught exception (group=0x40ac4228)
04-08 21:12:52.426: E/AndroidRuntime(26817): FATAL EXCEPTION: Thread-48634
04-08 21:12:52.426: E/AndroidRuntime(26817): java.lang.NullPointerException
04-08 21:12:52.426: E/AndroidRuntime(26817):    at net.example.glutefree.Networking.getServerData(Networking.java:113)
04-08 21:12:52.426: E/AndroidRuntime(26817):    at net.example.glutefree.Networking.access$0(Networking.java:68)
04-08 21:12:52.426: E/AndroidRuntime(26817):    at net.example.glutefree.Networking$1.run(Networking.java:49)
04-08 21:12:52.727: E/log_tag(26817): Result             [{"ID":"512320","UPCA":"310742023497","Company":"310742","Product":"OXY MAX DEEP PORE PADS","Gluten Free":null}]
04-08 21:12:52.727: W/dalvikvm(26817): threadid=13: thread exiting with uncaught exception (group=0x40ac4228)
04-08 21:12:52.737: E/AndroidRuntime_2_crash(26817): crash in the same process: Thread-48635
04-08 21:12:52.737: E/AndroidRuntime_2_crash(26817): java.lang.NullPointerException
04-08 21:12:52.737: E/AndroidRuntime_2_crash(26817):    at net.example.glutefree.Networking.getServerData(Networking.java:113)
04-08 21:12:52.737: E/AndroidRuntime_2_crash(26817):    at net.example.glutefree.Networking.access$0(Networking.java:68)
04-08 21:12:52.737: E/AndroidRuntime_2_crash(26817):    at net.example.glutefree.Networking$1.run(Networking.java:49) 
```

* * *

```
package net.example.glutefree;

import android.app.Activity;
import android.os.Bundle;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.util.Log;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;

public class Networking extends Activity{
TextView txt;
int request_Code = 1;
//called when activity is first created
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_networking);
    txt = new TextView(getApplicationContext()); 

    // Set the text and call the connect function. 
    txt.setText("Connecting...");
  //call the method to run the data retreival
    new Thread() {
        public void run() {
            final String data = getServerData(KEY_121);
            if (data != null)
                runOnUiThread(new Runnable()
                {
                    public void run()
                    {
                       txt.setText(data);

                    }
                });
        }
    }.start();

}

public static final String KEY_121 = "http://glutefree.com/application_query.php";

private String getServerData(String returnString) {
   String UPC = getIntent().getStringExtra("UPCA");
   InputStream is = null;
   String result = "";
    //the upc data to send
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    nameValuePairs.add(new BasicNameValuePair("UPCA",UPC));

    //http post
    try{

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(KEY_121);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }
    //parse json data
    try{
            JSONArray jArray = new JSONArray(result);
            Log.e("log_tag", "Result "+result.toString()); 
            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);
                    String UPCA = json_data.getString("UPCA");
                    String Product = json_data.getString("Product");
                    TextView upca = (TextView)findViewById(R.id.textView1);
                    upca.setText("UPCA: " + UPCA);
                    TextView product = (TextView)findViewById(R.id.textView2);
                    product.setText("Product: " + Product);
                   /* Log.i("log_tag","UPCA: "+json_data.getString("UPCA")+
                            ", Product: "+json_data.getString("Product"));*/
                    //Get an output to the screen
                    returnString += "\n\t" + jArray.getJSONObject(i);
            }
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }
    return returnString;
}   

} 
```

XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Networking" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="37dp"
    android:layout_marginTop="38dp"
    android:text="TextView" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="63dp"
    android:text="TextView" />

</RelativeLayout> 
```

**新错误：**

```
04-08 22:27:38.545: E/log_tag(3312): Result             [{"ID":"512320","UPCA":"310742023497","Company":"310742","Product":"OXY MAX DEEP PORE PADS","Gluten Free":null}]
04-08 22:27:38.545: W/dalvikvm(3312): threadid=12: thread exiting with uncaught exception (group=0x40aa6228)
04-08 22:27:38.565: E/AndroidRuntime(3312): FATAL EXCEPTION: Thread-475
04-08 22:27:38.565: E/AndroidRuntime(3312): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4381)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:805)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.View.requestLayout(View.java:12887)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.View.requestLayout(View.java:12887)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.View.requestLayout(View.java:12887)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.View.requestLayout(View.java:12887)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:268)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.view.View.requestLayout(View.java:12887)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.widget.TextView.checkForRelayout(TextView.java:7207)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.widget.TextView.setText(TextView.java:3474)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.widget.TextView.setText(TextView.java:3324)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at android.widget.TextView.setText(TextView.java:3299)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at net.example.glutefree.Networking.getServerData(Networking.java:108)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at net.example.glutefree.Networking.access$0(Networking.java:63)
04-08 22:27:38.565: E/AndroidRuntime(3312):     at net.example.glutefree.Networking$1.run(Networking.java:44) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:33:15.703

好的，所以从您的日志中我可以看到您在第 113 行有一个 NullPointerException：

```
TextView upca = (TextView)findViewById(R.id.textView1); //line 112
upca.setText("UPCA: " + UPCA); //line 113 
```

这意味着你`upca` `TextView`没有在第 112 行初始化。你能检查一下你`textView1`在上面设置的布局中是否有 a 吗？

**更新：**你得到的第二个错误`ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.`

当您尝试`UI Thread`从另一个`Thread`. 您在代码中所做的是`getServerData()`从新调用，而在方法中`Thread`您试图更改.`TextViews``UI Thread`

希望以上内容有意义吗？

# asp.net-mvc - 来自 Gelf4Net 的消息不存储在 Graylog2 中

> ID：15892219
> 
> 赞同：1
> 
> 时间：2013-04-09T02:20:07.350
> 
> 标签：asp.net-mvc, ubuntu, azure, log4net, graylog2

我有一个运行在 Azure 中的 Elasticsearch、MongoDB 和 Graylog2 的 Ubuntu 服务器，并且我有一个试图从中发送日志的 asp.net mvc4 应用程序。（我使用 Gelf4Net / Log4Net 作为日志记录组件）。切入正题，没有记录任何内容。

（跳到更新看看有什么问题）

## 设置

*   1 Xsmall Ubuntu VM 运行 graylog2 所需的软件
    *   一切都作为守护进程运行
*   1 个带有 MVC4 应用程序的 Xsmall 云服务（2 个实例）
*   虚拟网络设置，以便他们可以交谈。

## 那么我尝试了什么？

*   在 linux 框中，以下命令将导致记录一条消息`echo "<86>Dec 24 17:05:01 foo-bar CRON[10049]: pam_unix(cron:session):" | nc -w 1 -u 127.0.0.1 514`
*   我可以更改 IP 地址以使用公共 IP，它也可以正常工作。
*   使用[这个 powershell 脚本](http://pshscripts.blogspot.co.uk/2008/12/send-udpdatagramps1.html)，我可以从我的开发机器以及生产 Web 服务器记录相同的消息
*   Windows 防火墙已关闭，但仍无法正常工作。
*   我可以登录到 FileAppender Log4Net，所以我知道 Log4Net 正在工作。
*   跟踪 graylog2.log 显示没有任何兴趣。关于我的插件目录的一些警告所以我知道一切正常，但我无法让 Gelf4Net 附加程序工作。我在这里是一个损失。我在哪里可以看？有什么我想念的吗

**灰色日志2.CONF**

```
#only showing the connection stuff here. If you need something else let me know
syslog_listen_port = 514
syslog_listen_address = 0.0.0.0
syslog_enable_udp = true
syslog_enable_tcp = false 
```

**web.config/Log4Net**

```
//application_start() has log4net.Config.XmlConfigurator.Configure();

<log4net >
  <root>
    <level value="ALL" />
    <appender-ref ref="GelfUdpAppender" />
  </root>
  <appender name="GelfUdpAppender" type="Gelf4net.Appender.GelfUdpAppender, Gelf4net">
    <remoteAddress value="public.ip.of.server"/>
    <remotePort value="514" />
    <layout type="Gelf4net.Layout.GelfLayout, Gelf4net">
      <param name="Facility" value="RandomPhrases" />
    </layout>
  </appender>
</log4net> 
```

* * *

**更新**

由于某种原因，我没有想到在调试模式下运行 graylog :) 这样做会显示此消息。

> 2013-04-09 03:00:56,202 信息：org.graylog2.inputs.syslog.SyslogProcessor - 无法解析日期。因为allow_override_syslog_date 为真，所以设置为NOW。2013-04-09 03:00:56,202 调试：org.graylog2.inputs.syslog.SyslogProcessor - 跳过不完整的消息。

所以它正在发送一条不完整的消息。我怎样才能看到它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:26:08.730

我使用了错误的端口（DOH！）

我应该一直在使用 graylog2.config / 中指定的端口`gelf_listen_port = 12201`

所以我的 web.config/log4net/gelf appender 应该有

```
<appender name="GelfUdpAppender" type="Gelf4net.Appender.GelfUdpAppender, Gelf4net">
   ...
    <remotePort value="12201" />
   ...
</appender> 
```

* * *

对于可能遇到相同问题的任何人，请确保 Log4Net 在您更改配置后重新加载配置。我没有设置它来监视配置文件的更改，所以我花了几分钟才意识到我使用了错误的端口。当我第一次将其从 514 更改为 12201 时，消息仍然没有收到。我必须重新启动服务器以使 Log4Net 获取新配置，然后它才开始工作。

# java - 奇怪的 java.lang.OutOfMemoryError: Java 堆空间错误

> ID：15892220
> 
> 赞同：0
> 
> 时间：2013-04-09T02:20:08.933
> 
> 标签：java, eclipse

我不断收到这个 java.lang.OutOfMemoryError: Java heap space error in eclipse using JDK 1.6 u43 and eclipse 4.2.2 under Windows 7 64bit。我不知道这个错误是什么意思或如何解决它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:45:23.710

无需过多讨论，堆就是一个大型内存池，它在程序运行期间存储您的实时变量等，并且错误消息表明您已经用完了它！

您可以先尝试使用更大的最大堆大小运行 eclipse

```
eclipse -vmargs -Xmx1024M 
```

如果这解决了您的问题，那么您可以更改 eclipse.ini 文件中的值，正如其他一些建议所提到的那样。

如果这不能解决问题，则可能是您的程序中存在某种内存泄漏，并且试图在内存中存储太多大对象，在这种情况下，我们需要查看代码才能提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:24:49.777

您可能有内存泄漏，或者您可能会同时分配大型对象，例如图像，而您可以单独分配它们然后将它们的引用清零，或者您可能只是有一个需要大量内存的程序。尝试将 -Xmx 和 -Xms 命令行参数设置为较大但在计算机能力范围内的参数，例如 -Xmx=4096m

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:25:11.620

双击你在Eclipse中安装的Installed Jres，配置参数如下：

```
-Xms512M -Xmx1024M 
```

在 Eclipse 的默认 VM 参数中。

这个问题可能会解决。

问候！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T02:26:07.700

在 Eclipse 下载文件夹中，制作/替换 eclipse.ini 文件中的条目

```
-Xms512m
-Xmx1024m 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T04:06:20.787

最佳做法是检查您的代码是否存在内存泄漏，并确保您不会在不关闭它们或收集垃圾的情况下留下数千个对象或流。简单地增加你的内存限制就像避免问题或逃避你所犯的错误。检查代码后，如果您认为一切正常但仍需要更多内存来处理它，则可以增加堆大小。看看这里： [增加堆大小](https://stackoverflow.com/questions/11039237/increasing-heap-size)

[http://www.ibm.com/developerworks/java/library/j-leaks/](http://www.ibm.com/developerworks/java/library/j-leaks/)

[http://www.openlogic.com/wazi/bid/188158/How-to-Fix-Memory-Leaks-in-Java](http://www.openlogic.com/wazi/bid/188158/How-to-Fix-Memory-Leaks-in-Java)

我希望它会帮助你。

# java - 在异步上下文中访问 ServletRequest 方法时，码头挂起

> ID：15892227
> 
> 赞同：0
> 
> 时间：2013-04-09T02:20:46.650
> 
> 标签：java, servlets, jetty, servlet-3.0

我正在运行在回答这个问题时给出的代码 -

[Servlet-3 Async Context，如何进行异步写入？](https://stackoverflow.com/questions/12085235/servlet-3-async-context-how-to-do-asynchronous-writes)

而不是 `response.getWriter().write(some_big_data);`我把那条线改为

```
 ServletRequest req= ctx.getRequest();

 response.getWriter().write(req.getContentType()); 
```

现在，请求只是超时。如何访问请求对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:45:54.427

我假设您在`startAsync()`通话后在自己的线程中使用该代码片段时遇到问题。

根据 Servlet 3.0 规范第 2.3.3.4 节，对 Request 和 Response 对象的访问不是线程安全的。事实上，根据对象生命周期的状态，请求和响应对象甚至可以被回收。

**鼓励您在 startAsync() 之前**从 Request 和 Response 对象中获取您需要的内容，并从您自己的线程中使用这些引用。

换句话说，你使用`ctx.getRequest()`and`response.getWriter()`应该在你之前完成`startAsync()`

# php - 对 URI 的安全 AJAX 请求

> ID：15892228
> 
> 赞同：1
> 
> 时间：2013-04-09T02:20:47.747
> 
> 标签：php, ajax, security, restful-url

我知道有很多关于 AJAX 安全性的问题。我已经搜索并阅读过，但仍然不清楚最好的方法是什么。

我有一个非常具体的情景：

我有一个构建在 PHP MVC 框架之上的应用程序。我已经将诸如“导航菜单”之类的演示元素模块化。导航菜单模块有一个控制器（服务器端）。控制器使用模型从数据库中检索数据，然后以 php 回显数据进行响应。我可以使用 AJAX 向控制器发出 http 请求，因为控制器是通过 URI 路由到的。我相信这被称为 RESTful API。当用户单击导航菜单中的链接时，静态内容区域会使用从 AJAX 请求中检索到的数据进行更新。假设我在能够将数据写入数据库的同一控制器中进行了不同的操作。拥有一个允许写入数据库的公开 URI 显然很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:51:28.470

您必须像对待 get 请求或 post 请求一样对待 ajax 请求。换句话说，永远不要相信用户。您有服务器端控制，ajax 是客户端，所以永远不要相信发出请求的“客户端”（检查数据，如果数据正常则返回响应，如果不返回另一个响应）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:11:59.077

控制器能够写入数据库：

没有真正的方法来保护公共 URI 接口，以便它只能由存在于客户端的应用程序部分访问。然后的想法是不要让界面如此公开，这意味着每个人都无法访问它！如果一个 URI 指向一个“控制器”（MVC 架构），而控制器又可以访问来操作一个关键数据库，那么最好让向控制器发送请求的客户端必须“验证”。无论 http 请求来自 Web 表单还是 Ajax，这个概念都是正确的。通常在使用 https (http + SSL) 传输身份验证凭据之前，以防止“中间人”看到凭据。

控制器能够从数据库中读取：

当发出读取请求时，您可以简单地返回数据，或者如果其敏感数据需要经过身份验证的客户端。

“导航菜单模块”只能由管理员编辑，因此必须进行身份验证。但是，任何查看包含该模块的页面的网络冲浪者都不需要进行身份验证即可使用导航，那将是愚蠢的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T14:25:59.913

主要规则是验证所有输入 - 检查所有传入的数据并清除不需要的字符。

此外，这完全取决于您是否允许用户在不登录的情况下更改您的数据库。登录的用户更容易验证，如果允许当前用户执行此操作，您始终可以放置服务器端检查脚本。

当您允许匿名用户写入您的数据库时，事情会变得更加困难。然后，主要对 ID 进行操作是很好的，如果您允许用户从输入中插入数据 - 过滤掉所有不需要的东西。这样做的好方法是创建您批准的字符白名单并删除其他所有内容。

你必须记住，Ajax 只不过是向 url 发送 POST 请求——你应该做与标准表单相同的保护。另一个好的做法是向您的发送数据添加一个令牌 - 您可以通过服务器端进行验证。

# android - AlertDialog.Builder 未定义

> ID：15892229
> 
> 赞同：0
> 
> 时间：2013-04-09T02:21:30.003
> 
> 标签：android

以为我有它的工作，但我得到另一个错误！我还是 Android 新手，无论如何似乎都无法解决这个问题。我知道这与使用“new Builder(this);”有关。但是我不知道还能用什么，任何帮助将不胜感激！

```
changeDay.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            AlertDialog.Builder b = new Builder(this);
            b.setTitle("Select Day");
            String[] types = {"1", "2", "3"};
            b.setItems(types, new DialogInterface.OnClickListener(){
                public void onClick(DialogInterface dialog, int    which){
                    dialog.dismiss();
                    switch(which){
                    case 0:
                        day = "1";
                        break;
                    case 1:
                        day = "2";
                        break;
                    }
                }
            }); 
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:26:58.250

您的问题出在`String[]`数组中，[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html "警报对话框生成器") `setItems`方法不将`String[]`数组作为参数，它采用`int`或`CharSequence[]`

检查这里 - [http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems(int, android.content.DialogInterface.OnClickListener)](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems%28int,%20android.content.DialogInterface.OnClickListener%29)

**更新：**所以答案的第二部分是，在您的 Builder(this)`this`中指的是`OnClickListener`，您希望它指的`context`是`Activity`. 为此，您可以简单地在您的`onCreate()`

```
Context myCtx = this; //this sets the Activity as myCtx 
```

然后替换`Builder(this)`为`Builder(myCtx)`. 瞧！

# ruby-on-rails - 无法弄清楚 Delayed::DeserializationError

> ID：15892232
> 
> 赞同：1
> 
> 时间：2013-04-09T02:21:59.863
> 
> 标签：ruby-on-rails, delayed-job

我正在使用 Rails 3.2.12 运行延迟作业 3.0.5 (delayed_job_active_record 0.4.1)。由于“反序列化”，我的一些工作失败了。这是失败处理程序之一的一个非常简单的示例：

```
--- !ruby/struct:Delayed::PerformableMethod
object: LOAD;Project;924951
method: :send_project_open_close_without_delay
args: [] 
```

当我尝试调用此作业时：

```
Delayed::DeserializationError: Job failed to load: undefined method `members' for nil:NilClass. 
```

每个人似乎都认为这是由不再存在的 AR 对象引起的。就我而言，我可以很好地运行处理程序：

```
Project.find(924951).send_open_close_without_delay 
```

还有什么可能导致错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:58:02.177

我想当我们升级到 rails 3.2 时我也遇到了这个问题。我得到的错误是由延迟作业使用的 yaml 处理程序引起的。尝试将以下内容添加到`config/boot.rb`

```
require 'rubygems'
require 'yaml'
YAML::ENGINE.yamler = 'syck' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:53:30.907

以防万一有人遇到这个问题。我发现原因是一些工作注入了旧版本的延迟工作。因此，当较新的延迟作业尝试处理它们时，它无法反序列化处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T17:40:30.267

这是由于升级`Delayed::Job`更改了序列化处理程序并更改了用于`PerformableMethod`. 如果您想修复所有旧作业并坚持使用 Delayed::Job 的新默认值，您可以使用以下查询修复失败的作业：

```
Delayed::Job.where('failed_at is not null').each do |dj|
  dj.handler = dj.handler.gsub('struct:Delayed', 'object:Delayed')
  Delayed::Worker.new.run(dj)
end 
```

变化发生在这里：[https ://github.com/collectiveidea/delayed_job/commit/7b8a79a72c0ee5d8bac4bc0b183d1cce9cedff85](https://github.com/collectiveidea/delayed_job/commit/7b8a79a72c0ee5d8bac4bc0b183d1cce9cedff85)

制作`PerformableMethod`一个类而不是一个`Struct`.

# c# - 两个页面布局到一个视图中

> ID：15892233
> 
> 赞同：0
> 
> 时间：2013-04-09T02:22:08.203
> 
> 标签：c#, asp.net-mvc

我想对这个问题提出一些建议。我有一个显示许多用户的视图页面。一种视图是在用户图像的网格（类似画廊）中显示用户。第二个视图是在列表布局中显示相同的用户，但按他们的名字显示。我将在页面上有一个切换按钮来在两者之间切换。最好的方法是什么？有两个单独的视图页面或有某种部分视图？

**在下面的建议后更新代码**

```
<div data-bind="template: {name:'grid-template'}"></div>
<div data-bind="template: {name:'list-template'}"></div>

<script style="float:left"  type="text/html" id ="grid-template">
    <section " style="width:100%; float:left">
    <section id="users" data-bind="foreach: Users">
        <div id="nameImage">
            <figure id="content">
                <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <figcaption>
                    <a title="Email" id="emailIcon" class="icon-envelope icon-white" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                    <a title="Profile" id="profileIcon" class="icon-user icon-white"></a>
                </figcaption>
            </figure>
            <p data-bind="text:Name"></p>
            </div>
        </section>
    </section>
</script>

<script style="float:left" type="text/html" id="list-template">
        <div data-bind="foreach: Users">
            <div style="width:60%; float:left; margin:10px; height:58px">
                <img style="float:left; margin-right:5px" width="58" height="58" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <p style="height:58px; float:left; vertical-align:central" data-bind="text:Name"></p>
                <a style="float:right"  title="Profile"  class="icon-user icon-black"></a>
                <a style="float:right"  title="Email" class="icon-envelope icon-black" data-bind="attr:{'href':'mailto:' + Email()}"></a>
            </div>
        </div>
</script> 
```

**淘汰赛脚本文件**

```
$.views.User.UserViewModel = function (data) {
        var self = this;
        self.Name = ko.observable(data.Name);
        self.Email = ko.observable(data.Email);
        self.ContentRole = ko.observable(data.ContentRole);
        self.MD5Email = ko.observable(data.MD5Email);
        self.GravatarUrl = ko.computed(function () {
           return 'http://www.gravatar.com/avatar/' + self.MD5Email() + '?s=300&d=identicon&r=G';
        });
        self.renderMode = ko.observable('grid');
        self.displayTemplate = ko.computed(function () {
            return self.renderMode() + '-layout-template';
        });

    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:11:59.530

就个人而言，我喜欢干净的、独立的、小的局部视图，尤其是当它是常规的 HTTP POST 时。
但是，基于我在下面所做的假设，我认为我可以提出更好的实现设计。

### 我的假设

你有

1.  `Index.cshtml` **显示用户列表的**父视图。****
***   包含您的用户列表的 JSON 对象数组*   根据我所看到的，您正在使用 KnockoutJS。
    阅读[KnockoutJS 模板绑定](http://knockoutjs.com/documentation/template-binding.html)，尤其是**“注意 5：动态选择使用哪个模板”**部分。**

 ****如果你使用KnockoutJS**或类似的东西，它会让你做你正在做的事情变得更容易。
您只需在两个渲染模板之间切换。

```
<script type="text/html" id="gallery-layout-template"> ... </script>
<script type="text/html" id="listing-layout-template"> ... </script>

<div id="divOutputContainer"
     data-bind="template: { name: displayTemplate, foreach: users }"></div>

<script type="text/javascript">
$(document).ready(function() {

    // I am just writing out a dummy User array here.
    // Render out your User Array JSON encoded using JSON.NET.
    var myUsers = [
        { "id" : 1, "name": "User 1" },
        { "id" : 2, "name": "User 2" }
    ];

    // here is your KnockoutJS View Model "class"
    function MyKoViewModel(users) {
        var self = this;
        self.users = ko.observableArray(users);

        // Toggle this renderMode observable's value
        // between 'listing' and 'gallery' via your Toggle button click event handler
        self.renderMode = ko.observable( 'gallery' );

        self.displayTemplate = function(user) {
            // this will return 'gallery-layout-template' or 'listing-layout-template'
            return self.renderMode() + '-layout-template';
        }
    }

    ko.applyBindings( new MyKoViewModel( myUsers ) );
});
</script> 
```

因此，使用该技术，您**无需每次都调用 AJAX**来使用不同的渲染模板刷新视图。
您拥有想要显示为客户端 JavaScript KnockoutJS 视图模型的所有数据。
然后，只需使用 KnockoutJS 切换客户端渲染模板。

必须更有效率:-)

### 笔记

我有一种感觉，您可能必须像这样将[ko.computed()](http://knockoutjs.com/documentation/computedObservables.html)用于`MyKoViewModel`'s`displayTemplate()`函数。

```
self.displayTemplate = ko.computed(function() {
    return self.renderMode() + '-layout-template';
} 
```**

# javascript - 无法在对象上设置自定义属性

> ID：15892235
> 
> 赞同：0
> 
> 时间：2013-04-09T02:22:28.330
> 
> 标签：javascript, firefox

我正在尝试定义一个名为 的自定义属性`userdata`，但是对于 location.hash 之类的对象，它不起作用，我得到`false, false`了两个警报调用。

```
 Object.defineProperty(Object.prototype, "userdata", {
            value: false,
            writable: true,
            enumerable: true,
            configurable: true
        });

        alert (location.hash.userdata);
        location.hash.userdata = true;
        alert (location.hash.userdata); 
```

它是不变的吗？

如果我定义自己的对象，即

```
var a = {};
a.userdata = true; 
```

它将被正确设置，我不明白为什么前一个例子不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:26:34.487

由于默认值为`userdata`is ，因此第一个警报给出 false 是正常的`false`。

但是，`location.hash.userdata = true;`肯定不会起作用，因为当您`location.hash`使用点表示法将原始字符串视为对象时，它将原始值包装在`String`原始包装器中，然后该包装器对象被丢弃，所以它与做`new String(location.hash).userdata = true;`

由于您不能这样做`location.hash = new String(location.hash)`，因此您将不得不将您的属性存储在另一个对象上，因为`location.hash`它将始终是不可变的。

# zend-framework - zend 框架在 /delete/2 中获取 id

> ID：15892236
> 
> 赞同：0
> 
> 时间：2013-04-09T02:22:56.743
> 
> 标签：zend-framework, url, param

我实际上正在使用 zend，我想知道如何在这样的 url 中获取 id：

```
/delete/2 
```

我知道我可以使用：

```
// if URL is /delete/id/2
$request->getParam('id'); 
```

但我想要的是拥有像第一个`/delete/2`这样的 url，这对我来说听起来更合乎逻辑。

想法？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:22:08.263

我认为您应该能够使用路由解决此类问题。您可以为

```
/delete/2 
```

通过将其添加到例如您的`config.ini`文件中：

```
[production]
routes.delete.route = "delete/:id"
routes.delete.defaults.controller = delete
routes.delete.defaults.action = index 
routes.delete.id.reqs = "\d+" 
```

在这里您指定要匹配的 URL，其中以冒号开头的单词`:`是变量。如您所见，您还可以对变量 regex 样式设置要求。在您的示例中，`id`很可能是一位或多位数字，因此`\d+`需要此变量。

此路由将 url 指向控制器的`index`操作`delete`并设置`id`为 GET-var。您可以更改此 .ini 代码以满足您的特定需求。

可以通过将以下代码放入引导程序中来添加路由：

```
$config = new Zend_Config_Ini('/path/to/config.ini', 'production');
$router = new Zend_Controller_Router_Rewrite();
$router->addConfig($config, 'routes'); 
```

有关更多信息，请参阅文档：[这里](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)是一般文档，[这里](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.add-config)是我刚刚描述的 .ini 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T23:02:11.857

试试这个：将以下函数添加到您的 Bootstrap.php

```
protected function _initRoute(){
    $this->bootstrap ('frontcontroller');
    $front = $this->getResource('frontcontroller');
    $router = $front->getRouter();
    $deleteRoute = new Zend_Controller_Router_Route(
    'delete/:id',
    array(
        'controller' => '{enter-your-controller-name-here}',
        'action'     => '{enter-your-action-name-here}'
        )
    );
    $router->addRoute('delete', $deleteRoute);
} 
```

不要忘记将 {enter-your-controller-name-here} 替换为控制器名称，将 {enter-your-action-name-here} 替换为操作名称。

添加此代码后，`$request->getParam('id');`应该可以正常工作。

# python - 如何检查一个类型是否是 Python 中某个类型的子类型？

> ID：15892237
> 
> 赞同：21
> 
> 时间：2013-04-09T02:22:59.400
> 
> 标签：python

如何检查一个类型是否是 Python 中某个类型的子类型？我指的不是类型的实例，而是比较类型实例本身。例如：

```
class A(object):
    ...

class B(A):
    ...

class C(object)
    ...

# Check that instance is a subclass instance:
isinstance(A(), A) --> True
isinstance(B(), A) --> True
isinstance(C(), A) --> False

# What about comparing the types directly?
SOME_FUNCTION(A, A) --> True
SOME_FUNCTION(B, A) --> True
SOME_FUNCTION(C, A) --> False 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-09T02:26:32.240

也许[`issubclass`](http://docs.python.org/2/library/functions.html#issubclass)？

```
>>> class A(object): pass
>>> class B(A): pass
>>> class C(object): pass
>>> issubclass(A, A)
True
>>> issubclass(B, A)
True
>>> issubclass(C, A)
False 
```

# java - ivy 无法解析 org.springframework 依赖项

> ID：15892240
> 
> 赞同：4
> 
> 时间：2013-04-09T02:24:21.630
> 
> 标签：java, eclipse, spring, ivy

我想使用 Ivy Eclipse 插件来解决 spring-oxm 依赖项。

```
<dependency org="org.springframework" name="spring-oxm" rev="3.2.2.RELEASE" /> 
```

但我得到以下错误：

> 某些项目无法解析 无法解析*我的类名*的依赖 未解析的依赖：org.restlet.jee#org.restlet;2.1.1: not found unresolved dependency: org.restlet.jee#org.restlet.ext.servlet; 2.1.1：未找到

我用谷歌搜索，人们说 restlet-2.1.1 不再存在。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:03:47.873

它在这个 repo 中可用[http://maven.restlet.org/org/restlet/jee/org.restlet/2.1.1/](http://maven.restlet.org/org/restlet/jee/org.restlet/2.1.1/)

可能您需要在 Ivy 设置或您正在使用的任何存储库中添加此存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T11:51:42.807

好吧，我刚刚在我的 Solr 5.5.0 上遇到了同样的问题，更改了 IVY 的存储库。但这都是浪费时间。[只需从http://maven.restlet.com/org/restlet/jee/org.restlet.ext.servlet/2.1.1/](http://maven.restlet.com/org/restlet/jee/org.restlet.ext.servlet/2.1.1/)下载 org.restlet.ext.servlet jar 文件，在 ivy-settings.xml 附近创建文件夹存储库，复制下载的文件并更改 ivy-settings.xml 如下：

```
<ivysettings>
  <settings defaultResolver="chain-example"/>
  <resolvers>
    <chain name="chain-example">
      <ibiblio name="central" m2compatible="true" />
      <filesystem name="libraries">
        <artifact pattern="${ivy.settings.dir}/repository/[artifact]-[revision].[ext]" />
      </filesystem>
    </chain>
  </resolvers>
</ivysettings> 
```

享受。

# c - 两个玩家的数字猜谜游戏

> ID：15892244
> 
> 赞同：1
> 
> 时间：2013-04-09T02:24:51.793
> 
> 标签：c

有人可以帮我弄清楚我的程序出了什么问题，这对我来说很复杂。这是一个数字猜谜游戏，两个玩家可以玩。首先说哪个玩家先走，然后玩家必须输入他的号码 1 或 2，然后输入猜测或传球（玩家连续传球不能超过 3 次或两次）。它工作得非常好，除了每次玩家 1 开始时，它都会要求他连续猜测两次，然后工作正常，当玩家 2 开始时，它会像这样交替出现：

![这是播放器 2 先行的时候，它工作正常](https://i.stack.imgur.com/DLi2i.png)

![这是当玩家 1 先走并且它只重复一次](https://i.stack.imgur.com/ZJLVD.png)

```
And this is my code It quite a lot of code:

#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <malloc.h>

int main(void) { 

int playerNumber = 0;
int number = 0;
int playerInput = 0;    
int guess = 0;
char input;
char str[6] = {0};
int playerA = 1;
int playerB = 2;
int passA = 3;
int passB = 3;
int i = 1;
int playerTurn = 0;
int turn = 0;

 srand(time(NULL));
 playerNumber = 1 + rand() % 2; /* Random number is generated */

 srand(time(NULL));
 number = 0 + rand() % 100; /* Random number is generated */

  while(number != guess) {

   printf("\nIt's player's %d turn\n", playerNumber);

  printf("Player Number?\n");

  scanf("%d", &playerInput);

  while (playerNumber != playerInput)
   {

printf("You Have to wait your turn.\nPlayer number?\n");

  }

  if (playerA != playerNumber)
playerB = playerNumber;

if (i%2 == 1) {
    playerNumber = playerA;
    }
else {
    playerNumber = playerB;
    }

i = i+1;

    printf("Enter Your Guess, 0 - 100 or Pass: ");

scanf("%s", str);

if (strcmp(str, "pass") == 0){
    if (playerNumber == playerA){
        passB = passB -1;
        printf("Player 2 has %d more 'Pass' left!\n", passB);
        }   
    else{
        passA = passA -1;
        printf("Player 1 has %d more 'Pass' left!\n", passA);
        }
    }   
else {
    guess = atoi(str);
        if(guess < number) /* if the guess is lower, output: the guess is to low */
            printf("Your guess was to low.\n ");

        else if(guess > number) /* if the guess is higher, output: the guess is to high */
            printf("Your guess was to high.\n ");

        else /* is the guess is equial to the random number: Success!! */
            printf("Yes!! you got it!\n");

         }

 }
  return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:40:39.280

首先，您应该使用一致的缩进。这将使您的代码更容易阅读。

其次，您应该使用换行符和空格将相似行组合在一起。将编写代码想象成写散文，换行符作为分隔段落的方式。您几乎不会对任何内容进行双倍空格，因为它会浪费空间并且更难阅读（人们不习惯它）所以不要对您的代码进行双倍空格。

第三，您对 playerA 和 playerB 变量的使用是一个不错的概念，但有更好的方法来做到这一点。C/C++ 中的典型约定是使用 #define 表示幻数，全部大写 - `#define PLAYER_A 1`。遵循此约定将使您的代码更具可读性。此外，由于您的玩家是“1”和“2”，因此使用 `#define PLAYER1 1`PLAYER_1 更具可读性。

您使用变量“i”，但使用名为 i、j、k、m 或 n 的变量的约定是作为循环计数器，在循环顶部或循环底部递增。在循环中间增加循环计数器会使计数器更容易丢失。将增量移动到顶部或底部。

手动完成这项工作，以查看程序执行时您的变量是什么。你的老师在课堂上已经这样做了。只需写下每个变量并将其值写在旁边，然后更改变量，因为它们会在程序执行时发生变化。这项技术将帮助您在将来修复其他困难的错误，而不是我给您答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:34:22.157

你的代码中有一个无限循环，

你下面给出的代码是错误的，

```
 while(playerNumber != playerInput)
   {

       printf("You Have to wait your turn.\nPlayer number?\n");

   } 
```

它应该是，

```
 if(playerNumber != playerInput)
   {

       printf("You Have to wait your turn.\nPlayer number?\n");

   } 
```

# php - preg_replace PHP 中的 HTML 代码

> ID：15892246
> 
> 赞同：0
> 
> 时间：2013-04-09T02:24:58.317
> 
> 标签：php, regex

我想从 html 代码中删除如下字符串 `<span style="font-size: 0.8px; letter-spacing: -0.8px; color: #ecf6f6">3</span>`

所以我想出了正则表达式。

`$pattern = "/<span style=\"font-size: \\d(\\.\\d)?px; letter-spacing: -\\d(\\.\\d)?px; color: #\\w{6}\">\\w\\w?</span>/um";`

但是，正则表达式不起作用。有人可以指出我做错了什么。我是 PHP 新手。

当我使用简单的正则表达式进行测试时，它可以正常工作，因此正则表达式仍然存在问题。

```
 $str = $_POST["txtarea"];
  $pattern = $_POST["regex"];
  echo preg_replace($pattern, "", $str); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:35:58.237

尽管我提倡[`DOMDocument`](http://php.net/domdocument)在这里做这项工作，但你仍然需要一些正则表达式，所以......

`px`数值的表达式可以是简单`[\d.-]+`的，因为您没有尝试验证任何内容。

跨度的内容可以简化为`[^<]*`（即除了左括号之外的任何内容）：

```
$re = '/<span style="font-size: [\d.-]+px; letter-spacing: [\d.-]+px; color: #[0-9a-f]{3,6}">[^<]*<\/span>/';

echo preg_replace($re, '', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:36:27.230

[不要对这个问题使用正则表达式](https://stackoverflow.com/a/1732454/1253312)。使用 html 解析器。这是一个带有 BeautifulSoup 的 python 解决方案，因为我喜欢这个库来完成这些任务：

```
from BeautifulSoup import BeautifulSoup

with open('Path/to/file', 'r') as content_file:
    content = content_file.read()

soup = BeautifulSoup(content)
for div in soup.findAll('span', {'style':re.compile("font-size: \d(\.\d)?px; letter-spacing: -\d(\.\d)?px; color: #\w{6}")}):
    div.extract()

with open('Path/to/file.modified', 'w') as output_file:
    output_file.write(str(soup)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T11:02:22.677

你的结束标签中有一个斜杠（ / ）（结束跨度）

您需要对其进行转义或使用与斜杠不同的分隔符

# python - 点冻结和依赖顺序

> ID：15892250
> 
> 赞同：8
> 
> 时间：2013-04-09T02:25:30.313
> 
> 标签：python, pip

```
`pip freeze > requirements.txt` 
```

自动以明显的字母顺序编写我的依赖项，如下所示：-

```
matplotlib==1.2.0
numpy==1.6.2
pandas==0.9.1 
```

这样做的问题是`pip install -r requirements.txt`（当我部署我的代码及其中列出的依赖项时`requirements.txt`）最终会失败，因为 matplotlib 需要首先安装 numpy。

我如何确保 matplotlib在文件中的 numpy**之后**列出？`requirements.txt``pip freeze`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:40:14.223

你可以试试命令

`pip install --no-deps -r requirements.txt`

这将安装没有依赖关系的软件包，并且您可能会摆脱上述书面问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-28T12:19:57.617

可以像这样使用包含所需顺序的包的文件：

```
pip freeze -r sorted-package-list.txt > requirements.txt 
```

其中`sorted-package-list.txt`包含

```
numpy
matplotlib 
```

注意：未包含在`sorted-package-list.txt`文件中的包附加在需求文件的末尾。

示例结果：

```
numpy==1.14.1
matplotlib==2.2.3
## The following requirements were added by pip freeze:
pandas==0.23.4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:25:45.877

对于您的情况，这并不重要，因为`pip`构建每个需求（调用`python setup.py egg_info`每个），然后将它们全部安装。对于您的具体情况，这并不重要，因为`numpy`目前需要在构建时安装`matplotlib`.

这是一个问题`matplotlib`，他们创建了一个修复它的建议：[https ://github.com/matplotlib/matplotlib/wiki/MEP11](https://github.com/matplotlib/matplotlib/wiki/MEP11)

在 pip 问题跟踪器上查看此问题的评论：[https ://github.com/pypa/pip/issues/25](https://github.com/pypa/pip/issues/25)

这个问题是[Matplotlib 要求的副本，其中 pip install in virtualenv](https://stackoverflow.com/questions/11797688/matplotlib-requirements-with-pip-install-in-virtualenv)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T20:01:52.933

请注意，h5py（HDF5 Python 包装器）也有同样的问题。

我的解决方法是将输出`pip freeze`分成两部分：一个只包含 numpy 版本的简短需求文件`${NUMPY_REQS}`，另一个`${REQS}`包含所有其他包的长需求文件。注意`-v`第二个的开关`grep`，“反向匹配”。

```
pip freeze | tee >( grep  '^numpy' > ${NUMPY_REQS} ) | grep -v '^numpy' > ${REQS} 
```

然后调用`pip install` *两次*（例如在安装虚拟环境时）：

```
# this installs numpy
pip install -r ${NUMPY_REQS}

# this installs everything else, h5py and/or matplotlib are happy
pip install -r ${REQS} 
```

请注意，此`tee`/`grep`魔术组合仅适用于类 Unix 系统。不知道如何在 Windows 上实现相同的目标。

# javascript - 即使不正确，两个 if 语句也总是链接在一起

> ID：15892263
> 
> 赞同：-1
> 
> 时间：2013-04-09T02:26:26.670
> 
> 标签：javascript, if-statement

我有两个单独的 if else 语句。即使我认为只有一个是真的，另一个总是被调用，反之亦然。这里是

第一个

```
if (pension < 0 ) {
    alert("Pension value error. Try again.");
}

else if (pension > income) {
    alert("RRSP Contribution cannot exceed the income.");
} 
```

第二个

```
if (unionDues < 0 ) {
    alert("Union dues value error. Try again.");
}

else if (unionDues > (income - pension)) {
    alert("Union dues cannot exceed the income less the RRSP contribution");
} 
```

if(pension > income) 和 if(unionDues > (income - penis)) 总是互相调用。

变量收入是事先提示的，之后的检查是检查值是否有效。

如果我的收入是 100，我的养老金是 50，而我的 unionDues 是 60，我认为它应该只调用第二个 if else 语句，但它同时调用两者。

如果我的收入是 1，我的养老金是 2，而我的 unionDues 是 0，那么两个警报也会被提醒。有谁知道我的问题是什么？

编辑：修复很简单，我只是 parseFloat() 一切，它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:31:00.707

首先，您应该确保所有三个值都是数字，而不是字符串，因为字符串比较不适用于具有不同位数的数字。您希望这里的所有内容都是实际数字。如果这些来自用户输入数据，那么您将不得不使用类似`parseInt(nnn, 10)`.

* * *

那么，一旦它们都是数字，你的逻辑就有问题了。

如果`pension`大于`income`，那么这两个`else if`陈述都是正确的。

第一个`else if`很明显，因为它是直接的`else if (pension > income)`，如果养老金是正数，那么它将与第一个不匹配`if`。

第二个`else if (unionDues > (income - pension))`将匹配，因为`income - pension`将为负数，这意味着任何位置值`unionDues`都将匹配此条件。

* * *

如果您只想触发一个警报，那么您可以将所有四个条件放入同一个逻辑语句中，或者使用一个`if`和三个`else if`，或者其他只选择一个条件的比较形式。

另一种可能的解决方案是累积错误字符串，如果错误字符串最后不为空，则显示一个包含所有错误条件的警报。

* * *

也许您所需要的只是显示遇到的第一个错误（如果您的所有值都是真实数字）：

```
if (pension < 0 ) {
    alert("Pension value error. Try again.");
} else if (pension > income) {
    alert("RRSP Contribution cannot exceed the income.");
} else if (unionDues < 0 ) {
    alert("Union dues value error. Try again.");
} else if (unionDues > (income - pension)) {
    alert("Union dues cannot exceed the income less the RRSP contribution");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:49:33.630

```
if (pension < 0) {
    alert("Pension value error. Try again.");
}
else if (unionDues < 0) {
    alert("Union dues value error. Try again.");
}
else if (pension > income) {
    alert("RRSP Contribution cannot exceed the income.");
}
else if (unionDues > (income - pension)) {
    alert("Union dues cannot exceed the income less the RRSP contribution");
} 
```

# java - ClipDrawable 在用作小部件的布局背景时不起作用

> ID：15892267
> 
> 赞同：4
> 
> 时间：2013-04-09T02:26:43.170
> 
> 标签：java, android, android-widget, android-linearlayout

我正在尝试制作一个简单的小部件，在小部件中以文本和图形方式显示电池百分比。文本部分没有问题，但我很难让小部件以图形方式更新。

从图形上看，我有一个电池图像，我根据电池百分比进行剪辑。我正在尝试使用`ClipDrawable`它。

**battery_widget_layout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widgetLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="@dimen/widget_padding"
    android:background="@drawable/battery_clip_layer" >

    <TextView
        android:id="@+id/batteryPercentageWidgetTextView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/battery_percentage_widget_default"
        android:gravity="center" />

</LinearLayout> 
```

**battery_clip_layer.xml（即 ClipDrawable）**

```
<clip xmlns:android="http://schemas.android.com/apk/res/android"
    android:clipOrientation="vertical"
    android:gravity="bottom"
    android:drawable="@drawable/battery_shape" /> 
```

**BatteryService.java** - 接收电池事件并通过 RemoteViews 更新小部件的服务

```
public class BatteryService extends Service {

    private static final String LOG = BatteryService.class.getName();
    private final AtomicInteger batteryPercentage = new AtomicInteger(100);

    private final BroadcastReceiver batteryUpdateReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            int level = intent.getIntExtra("level", 0);
            batteryPercentage.set(level);
            updateWidget();
        }
    };

    @Override
    public void onCreate() {
        super.onCreate();
        registerReceiver(batteryUpdateReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
        Log.i(LOG, "Created...");
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        unregisterReceiver(batteryUpdateReceiver);
        Log.i(LOG, "Destroyed...");
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.i(LOG, "Started...");
        updateWidget();
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    private void updateWidget() {
        final int percentage = batteryPercentage.get();
        log.i(LOG, "Updated... " + percentage);
        RemoteViews remoteViews = new RemoteViews(getPackageName(),  R.layout.battery_widget_layout);
        remoteViews.setTextViewText(R.id.batteryPercentageWidgetTextView, percentage + "%");
        //ATTEMPT 1 - no cigar
        remoteViews.setInt(R.drawable.battery_clip_layer, "setLevel", 5000);
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this);
        appWidgetManager.updateAppWidget(new ComponentName(this, BatteryAppWidgetProvider.class), remoteViews);
    }

    private void updateWidgetAttempt2() {
        final int percentage = batteryPercentage.get();
        Log.i(LOG, "Updated... " + percentage);
        //ATTEMPT 2 - still no cigar
        Drawable clipLayer = getApplicationContext().getResources().getDrawable(R.drawable.battery_clip_layer);
        if (clipLayer instanceof ClipDrawable) {
            ClipDrawable clipDrawable = (ClipDrawable) clipLayer;
            int level = clipDrawable.getLevel();
            if (clipDrawable.setLevel(10000)) {
                clipDrawable.invalidateSelf();
            }
            Log.i(LOG, "Updated clip amount..." + level + " -> " + ((ClipDrawable) clipLayer).getLevel());
        }
        RemoteViews remoteViews = new RemoteViews(getPackageName(), R.layout.battery_widget_layout);
        remoteViews.setTextViewText(R.id.batteryPercentageWidgetTextView, percentage + "%");
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this);
        appWidgetManager.updateAppWidget(new ComponentName(this, BatteryAppWidgetProvider.class), remoteViews);
    }

} 
```

请查看更新小部件（和）`BatteryService`的两种不同尝试。两种尝试都不成功。`updateWidget()``updateWidgetAttempt2()`

我觉得我在做一些根本错误的事情。我非常感谢任何帮助/建议！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:23:29.430

您是正确的，因为您需要在 Drawable 实例上设置级别，但不幸的是，您无法访问 Drawable，因为它位于远程视图中。

但是，ImageView 确实有一个名为 的方法`setImageLevel`，您可以远程调用该方法。我的建议是将 Drawable 放在 ImageView 中，而不是作为容器的背景，然后使用`setInt(R.id.image_view, "setImageLevel", level)`.

布局应该是这样的：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widgetLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="@dimen/widget_padding" >

    <ImageView
        android:id="@+id/battery"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/battery_clip_layer" />

    <TextView
        android:id="@+id/batteryPercentageWidgetTextView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:text="@string/battery_percentage_widget_default"
        android:gravity="center" />

</FrameLayout> 
```

和`updateWidget()`方法：

```
private void updateWidget() {
    final int percentage = batteryPercentage.get();
    log.i(LOG, "Updated... " + percentage);

    RemoteViews remoteViews = new RemoteViews(getPackageName(),  R.layout.battery_widget_layout);
    remoteViews.setTextViewText(R.id.batteryPercentageWidgetTextView, percentage + "%");

    remoteViews.setInt(R.id.battery, "setImageLevel", percentage * 100);

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this);
    appWidgetManager.updateAppWidget(new ComponentName(this, BatteryAppWidgetProvider.class), remoteViews);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:52:49.670

您对在小部件中使用 a 所做的两次尝试`ClipDrawable`都不正确。在第一次尝试中，您错误地使用了该方法，因为该方法`setInt()`期望第一个`int`参数是`id`小`View`部件布局中的，该方法存在于类中。您的第二种方法也不正确，因为您所做的只是加载 a ，设置其级别，仅此而已，新创建的与小部件的根目录无关。`setLevel()``View``Drawable``Drawable``Drawable``LinearLayout`

要完成这项`ClipDrawable`工作，您需要将其级别设置为所需的值，而可绘制对象已设置为`LinearLayout`的背景，或者您可以将其设置为背景。不幸的是，当在小部件中使用布局时，我看不到您如何做到这一点。

您需要使用一种解决方法（Jschools 提供了一种）。

# haskell - 看似不像我想象的那么简单的打字

> ID：15892273
> 
> 赞同：0
> 
> 时间：2013-04-09T02:27:13.093
> 
> 标签：haskell

在用 Haskell 为一种单独的、简单的编程语言编写解释器的过程中——当我学习用 Haskell 打字时，我发现自己的头撞到了墙上。

我有两种自定义数据类型

```
data Expr
    = Var Var
    | NumE Int
    | NilE
    | ConsE Expr Expr
    | Plus Expr Expr
    | Minus Expr Expr
    | Times Expr Expr
    | Div Expr Expr
    | Equal Expr Expr
    | Less Expr Expr
    | Greater Expr Expr
    | Not Expr
    | Isnum Expr
    | And Expr Expr
    | Or Expr Expr
    | Head Expr
    | Tail Expr
    | Call String
    deriving (Show, Read)

data Val = Num Int | Nil | Cons Val Val
    deriving (Eq, Show, Read) 
```

我开始编写解释这些选项的案例，使用函数interpret_expr

```
interpret_expr :: Vars -> Expr -> Val
interpret_expr vars@(Vars a b c d) (NumE integer) = integer 
```

但这抱怨它无法将表达式“整数”中的预期类型“Val”与实际类型“Int”匹配。但是说我把它改成愚蠢的东西

```
interpret_expr :: Vars -> Expr -> Val
interpret_expr vars@(Vars a b c d) (NumE 'a') = 'a' 
```

然后它在“a”处抱怨它无法将预期类型“Int”与实际类型“Char”匹配。现在它想要一个INT？？？？？？我真的不知道该说什么，我真的认为这就像为 NumE 提供一个它可以计算为整数的变量一样简单。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T02:41:38.887

在第一种情况下，您`Int`从声明返回的函数返回 a `Val`。根据您的定义，`Val`您可能想回到`Num integer`这里。

在第二种情况下，问题在于模式匹配。`(NumE 'a')`是一个错误，因为`NumE`被定义为`NumE Int`，所以它后面必须跟一个`Int`，而不是一个`Char`。

# css - CSS中的下拉菜单

> ID：15892274
> 
> 赞同：0
> 
> 时间：2013-04-09T02:27:28.690
> 
> 标签：css, navigationbar

我试图在纯 CSS 中构建一个下拉式多级导航菜单栏。这是代码（我知道结果很难看）：

```
<!DOCTYPE HTML>
<html>
<head>
 <title>Menu</title>
 <style>
 * {
  margin: 0;
  padding: 0
 }
 ul {
  list-style: none
 }
 li {
  float: left;
  width: 120px;
  height: 20px;
  background: pink
 }
 li > ul {
  display: none
 }
 li:hover > ul {
  display: block;
  position: relative;
  top: -20px;
  left: 120px;
  background: red
 }
 #nav > li:hover > ul {
  top: 0px;
  left: 0px
 }
 li:hover {
  background: red
 }
 </style>
</head>
<body>
 <ul id="nav">
  <li>1
   <ul>
    <li>1.1
     <ul>
      <li>1.1.1
       <ul>
        <li>1.1.1.1</li>
        <li>1.1.1.2</li>
        <li>1.1.1.3</li>
        <li>1.1.1.4</li>
       </ul>
      </li>
      <li>1.1.2</li>
      <li>1.1.3</li>
     </ul>
    </li>
    <li>1.2</li>
    <li>1.3</li>
    <li>1.4</li>
    <li>1.5</li>
   </ul>
  </li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
  <li>5</li>
 </ul>
</body>
</html> 
```

该代码在 Firefox20 下运行良好，但在 IE10 中它向上关闭 1px，在 Chrome26 中它向下关闭 1px。我认为这是因为浏览器呈现列表布局的方式不同。任何帮助，将不胜感激！

[jsFiddle 演示](http://jsfiddle.net/Class/ShZk8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:50:08.787

我建议从重置样式表开始，以便清除任何浏览器设置样式。然后每个浏览器将从一个公平的竞争环境开始。浏览器不会以不同的方式呈现列表。

有关重置样式表的更多信息，请参阅[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# java - 遍历 TreeMap - 返回地图键的所有值的集合

> ID：15892276
> 
> 赞同：0
> 
> 时间：2013-04-09T02:27:49.227
> 
> 标签：java, collections, maps, set

我有一个将课程名称映射到学生 ID 号的数据库。我需要遍历地图以创建另一个包含数据库中所有学生的集合。这是我到目前为止的代码。任何帮助将不胜感激！！

//返回学校所有学生的集合

```
public Set<Integer> allStudents() {
   Set<Map.Entry<String,Set<Integer>>> entries = database.entrySet();
   Set<Integer> students = new TreeSet<Integer>();

   for (Map.Entry<String,Set<Integer>> pair: entries){ 
       students.add();
    }

    return students;

} // end allStudents 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:31:53.160

你可以这样做：

```
for (Map.Entry<String, Set<Integer>> pair : entries) {
   students.addAll(pair.getValue());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:55:04.993

你的代码是正确的。这是一个没有迭代的版本

```
public Set<Integer> allStudents() {
    return new HashSet<Integer>(database.values());
} 
```

# python - 如何使用 python 2.2 反向读取文本文件

> ID：15892277
> 
> 赞同：-2
> 
> 时间：2013-04-09T02:27:52.630
> 
> 标签：python

有没有办法为 Python 2.2 反向读取文本文件？感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:32:45.497

尝试以下。

```
# method not using the `reverse` function
def read_file_reversed(filename):
    return open(filename, 'r').readlines()[::-1] 
```

它使用切片反转列表。
请注意，这些会将整个文件加载到内存中。

# iphone - 在 xcode 中使用 UISwitch 的 If/Then 语句

> ID：15892278
> 
> 赞同：1
> 
> 时间：2013-04-09T02:27:58.477
> 
> 标签：iphone, ios, xcode

我试图让我的应用程序在 UISwitch 设置为“开”位置时运行一个数学公式，而当它设置为“关”位置时运行另一个数学公式。

我试图这样布置：

如果 switch = on，则 [第一个公式]

如果 switch = off，则 [第二个公式]

我将如何编码？

==============
编辑：

这就是我目前尝试对其进行编码的方式。

```
-(IBAction)switchValueChanged:(UISwitch *)sender
{
if(sender.on)
{
-(float)conver2inches: (NSString *)mmeters {
return [mmeters floatValue]/25.4f;
}

-(IBAction)calculate:(id)sender{
float answer = [self conver2inches:entry.text];
 output.text=[NSString stringWithFormat:@"%f",answer];}}

else{
-(float)conver2mmeters:(NSString *)inches {
    return [inches floatValue]*25.4f;
}
-(IBAction)calculate:(id)sender{
    float answer = [self conver2mmeters:entry.text];
    output.text=[NSString stringWithFormat:@"%f",answer];
}}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:41:01.547

鉴于：

```
@property (nonatomic) IBOutlet UISwitch *switch; 
```

然后：

```
self.switch.on ? [self formula1] : [self formula2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:36:19.240

以下是在语句中使用 uiswich on 或 off 的示例：

```
-(IBAction)onOffSwitch:(id)sender{

if(onOffSwitch.on) {
    // lights on
    [onOffLabel setText:@"Lights Currently On"];
    onOffLabel.textColor = [UIColor blackColor];

    self.view.backgroundColor = [UIColor colorWithRed:255.0/255.0 green:219.0/255.0 blue:52.0/255.0 alpha:1.0];
}

else {
    // lights off
    self.view.backgroundColor = [UIColor blackColor];
    [onOffLabel setText:@"Lights Currently Off"];
    onOffLabel.textColor = [UIColor whiteColor];
}

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:42:09.727

您需要将这样的函数连接到 uiswitch 的值更改 uievent。

```
-(IBAction) switchValueChanged:(UISwitch *) sender
{
    if(sender.on)
    {
    ...
    }
    else
    {
    ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T02:35:38.933

UISwitch 有一个[名为 on 的属性](http://developer.apple.com/library/ios/documentation/uikit/reference/UISwitch_Class/Reference/Reference.html#//apple_ref/occ/instp/UISwitch/on)，您可以使用它来检测开关是打开还是关闭。或者您是在问如何编写在开关实际翻转*时起作用的代码？*

# linux - 试图找到一个支持 Groovy for Linux 的 IDE

> ID：15892281
> 
> 赞同：0
> 
> 时间：2013-04-09T02:28:08.053
> 
> 标签：linux, groovy, ide

正如标题所述，我很难找到支持 Groovy for linux 的 IDE，我无法忍受没有颜色编码的编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:29:50.500

使用[IntelliJ](http://www.jetbrains.com/idea/)。它具有全面的 Groovy 支持，在 linux 上运行，通常是一个很棒的 IDE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:32:33.073

为什么不使用 IntelliJ IDEA，它支持多种语言并且在 Linux 上运行良好
点击查看介绍
[http://www.jetbrains.com/idea/](http://www.jetbrains.com/idea/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:30:47.487

Netbeans 支持 Groovy 并在 Linux 上运行：[https ://netbeans.org/downloads/](https://netbeans.org/downloads/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T08:46:48.633

基于 Eclipse 的 Groovy/Grails Tool Suite (GGTS) 也可以在 Linux 上运行。 [http://www.springsource.org/downloads/sts-ggts](http://www.springsource.org/downloads/sts-ggts)

# android - 如何保持地图跟随我的位置（移动相机）并且不触发 OnCameraChange

> ID：15892282
> 
> 赞同：0
> 
> 时间：2013-04-09T02:28:16.523
> 
> 标签：android, google-maps, google-maps-android-api-2

如何在无需调用 moveCamera 或无需触发 onCameraChangeListener 的情况下使我的位置蓝色图标居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:35:57.277

简单的答案是：你不能。

您可能希望在[gmaps-api-issues](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype%3DAndroid2)上发布类似 API 的功能请求来跟踪用户位置：GoogleMap.setFollowingUserLocation 或类似的东西。

# perl - 为什么这会停止我的 perl 应用程序包“未注册警告”

> ID：15892283
> 
> 赞同：2
> 
> 时间：2013-04-09T02:28:29.070
> 
> 标签：perl

我正在使用 perl 中的内部 Web 网关框架。现在我正在尝试使用 Image::Magick::Thumbnail 创建缩略图。

但是如果我有这条线

```
my ($thumb, $x, $y) = Image::Magick::Thumbnail::create($image, 50); 
```

我收到以下错误。

```
package 'Image::Magick::Thumbnail' not registered for warnings 
```

我已将此追踪到 warnings.pm 的第 313 行

```
 Croaker("package '$category' not registered for warnings") 
```

但我不确定为什么这会停止我的程序任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:35:47.410

`use warnings::register;`创建一个与当前包同名的警告类别。

Image::Magick::Thumbnail 检查是否`Image::Magick::Thumbnail`启用了类别警告，但实际上并没有使用`use warnings::register;`.

该行在代码中，但它被注释掉了？！您可以编辑模块以取消注释该行以解决问题。在您的脚本中包含以下内容也应该可以解决问题：

```
{
   package Image::Magick::Thumbnail;
   use warnings::register;
} 
```

# ios - 如何检查设备是否每小时使用一次

> ID：15892286
> 
> 赞同：0
> 
> 时间：2013-04-09T02:29:08.200
> 
> 标签：ios, objective-c, nstimer

我试图弄清楚如何在我的应用程序运行时每隔一小时启动一个方法调用。

我创建了以下方法，该方法在加载 ViewController 后启动，但问题是，它运行一次，然后再也不会运行。

这就是我的代码的样子。

```
#define kMaxAliveTimeSeconds 5.0

// currently only running the query every 5 seconds for testing
- (void)deviceTimer {
    if (!isAliveTimer) {
        isAliveTimer = [NSTimer scheduledTimerWithTimeInterval:kMaxAliveTimeSeconds
                                                     target:self
                                                   selector:@selector(deviceIsAlive)
                                                   userInfo:nil
                                                    repeats:NO];
    }
    else {
        if (fabs([isAliveTimer.fireDate timeIntervalSinceNow]) < kMaxAliveTimeSeconds-0.5) {
            [isAliveTimer setFireDate:[NSDate dateWithTimeIntervalSinceNow:kMaxAliveTimeSeconds]];
        }
    }
}

- (void)deviceIsAlive {
 // do stuff here
} 
```

唯一的事情是 deviceIsAlive 被调用一次，但以后再也不会调用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:32:34.057

在计时器分配语句中设置 repeats:YES （因此它会自动重复，否则 nstimer 在第一次后会使其自身无效）或在您的 deviceIsAlive 函数中分配一个新计时器。

# android - 使用 adobe flex 添加数字和文本输入值

> ID：15892287
> 
> 赞同：0
> 
> 时间：2013-04-09T02:29:10.990
> 
> 标签：android, apache-flex, mobile, development-environment, flash-builder

我正在尝试添加一个数字和一个文本输入值以显示在标签中。到目前为止，这是我的代码。

```
 'lblAnswer.text = bloodglucose + 100;' 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:10:47.463

请尝试以下答案 -

```
bloodglucose += 100;
lblAnswer.text = String(bloodglucose); 
```

希望这会奏效:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T15:23:53.987

Sunil 是正确的——在进行混合类型添加时，首先需要将 UI 输入强制转换为 int 或 Number。IE：数字（血糖）+ 100；这假设血糖实际上是输入文本参考的吸气剂。如果不是，那么您需要强制属性而不是组件的 id。

```
Getter: public function get bloodglucose():Number { return Number(myInput.text); }
In method: lblAnswer.text = bloodglucose + 100;

or (bloodglucose is a UIComponent):
In method: lblAnswer.text = Number(bloodglucose.text) + 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:44:55.527

你应该使用`String(int i)`

```
lblAnswer.text = String(bloodglucose + 100); 
```

**更新：**这样的事情怎么样：

```
var i:int = bloodglucose + 100;
var s:String = String(i);
lblAnswer.text = s; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T23:32:49.603

** 更新 ，

我正在更改之前发布的更新中的代码。我最初发现，因为我在等式中包含了字符串值，所以这就是提示错误的原因。您必须将转换后的组件一起包装到字符串内的 Number 中。基本上将组件转换为数字，然后将收到的答案转换为字符串。

下面是错误代码的示例。

```
txtAnswer = (String(Number(bloodglucose)+100)) / 36)).toFixed(2) 
```

此行下方是固定代码。

```
txtAnswer.text = String( (Number(bloodglucose.text) + (Number(100))/ (Number(36))).toFixed(2) ; 
```

.toFixed 属性表示我希望返回值显示多少小数位。

# sql-server - 在服务器和客户端之间同步数据

> ID：15892289
> 
> 赞同：1
> 
> 时间：2013-04-09T02:29:16.840
> 
> 标签：sql-server, synchronization, client-server

当涉及到移动应用程序时，很多时候客户端将处于离线状态。

现在，当用户在客户端提交数据时，它会保存在本地，然后当他们按下同步按钮时，所有内容都会在客户端和服务器之间进行推送和拉取。

在数据同步方面，最佳实践是什么？

服务器端我有一个非常大的 MS SQL Server 和客户端我手头有 sqlite。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:46:45.713

您可能会发现[这（这是 Microsoft 应用程序架构指南 v2.0，2009 年 10 月）](http://msdn.microsoft.com/en-us/library/ee658108.aspx#Synchronization) 很有用。我在工作中遇到了同样的问题，*我*确实发现这些指导方针在思考过程的早期很有用。

分享我的经验，我认为主要决定来自您要解决的问题。如果您面对的是一个单一的、固定的、成熟的业务领域（即，很少更改您的数据库架构并且您只面对一两个客户端），您可以构建自己的数据同步框架。这在易用性和调整+性能方面远优于使用商业或非商业框架。+ 存储转发是一个非常好的功能，可以解决您的连接问题。

但是，如果您面临不断变化（不一定是扩展）的业务领域，或者可能有不同要求的不同客户，您可能希望使用成熟的框架（如 Microsoft Synch Framework）为您完成部分工作，您可以专注于根据您的要求进行调整。

我希望这不是太笼统。

# c# - 如何在 C# WPF 代码中更改\设置按钮的背景图像？

> ID：15892290
> 
> 赞同：9
> 
> 时间：2013-04-09T02:29:39.707
> 
> 标签：c#, wpf, image, button

我正在尝试将按钮的背景图像更改为其他图像，但遇到了一些错误。这是我在我的 xaml 上的代码：

```
 <Button x:Name="Button1" Width="200" Height="200" Content="Button1" Margin="0,0,0,400">
        <Button.Background>
            <ImageBrush **ImageSource ="Images/AERO.png"**  ></ImageBrush>
        </Button.Background>
    </Button> 
```

和我的cs：

```
 private void Button1_Click_1(object sender, RoutedEventArgs e)
    {
        var brush = new ImageBrush();
        brush.ImageSource = new BitmapImage(new Uri("Images/AERO.png"));
        Button1.Background = brush;
    } 
```

我在我的 xaml 上遇到的错误是“文件 'Images\logo.png' 不是项目的一部分，或者它的 'Build Action' 属性未设置为 'Resource'。谁能帮我解释一下，谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T05:52:35.673

在构建操作中，您可以将图像文件标记为内容或资源。在 ImageBrush 中使用图像的语法因您选择的语法而异。

这是一个标记为**内容**的图像文件。

![图片，标记为内容](https://i.stack.imgur.com/Ku2fG.png)

要将按钮背景设置为此图像，请使用以下代码。

```
 var brush = new ImageBrush();
 brush.ImageSource = new BitmapImage(new Uri("Images/ContentImage.png",UriKind.Relative));
 button1.Background = brush; 
```

这是一个标记为**资源**的图像文件。

![图片，标记为资源](https://i.stack.imgur.com/zyuMW.png)

要将按钮背景设置为资源图像，请使用以下代码。

```
 Uri resourceUri = new Uri("Images/ResourceImage.png", UriKind.Relative);
  StreamResourceInfo streamInfo = Application.GetResourceStream(resourceUri);

  BitmapFrame temp = BitmapFrame.Create(streamInfo.Stream);
  var brush = new ImageBrush();
  brush.ImageSource = temp;

  button1.Background = brush; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T11:53:45.530

我在下面给出了一个代码片段，将代码片段中提到的样式分配给一个按钮或一个切换按钮，然后您将完全由 XAML 控制更改的背景......不需要其他编码。我没有给出所有代码，只是试图理解背后的逻辑；）

```
<Style x:Key="KeyStopButtonStyle" TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border TextBlock.Foreground="{TemplateBinding Foreground}"
                                  x:Name="Border"
                                  CornerRadius="1"
                                  BorderThickness="1">
                    <Border.Background>                            
                        <ImageBrush ImageSource= "..\Images\ButtonImages\StopButton.png"  Stretch="Uniform"/>
                    </Border.Background>                        
                    <Border.Effect>                            
                        <DropShadowEffect/>                                
                    </Border.Effect>
                </Border>
                <ControlTemplate.Triggers>                        
                    <Trigger Property="IsPressed" Value="true">
                        <Setter TargetName="Border" Property="Border.Effect" Value="{x:Null}"/>                                                            
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="KeyPlayPauseButtonStyle" TargetType="{x:Type ToggleButton}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Border TextBlock.Foreground="{TemplateBinding Foreground}"
                                  x:Name="Border"
                                  CornerRadius="1"
                                  BorderThickness="1">
                    <Border.Background>
                        <ImageBrush ImageSource= "..\Images\ButtonImages\PlayButton.png"  Stretch="Uniform"/>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect/>
                    </Border.Effect>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="true">
                        <Setter TargetName="Border" Property="Border.Background">
                            <Setter.Value>
                                <ImageBrush ImageSource= "..\Images\ButtonImages\PauseButton.png" Stretch="Uniform"/>
                            </Setter.Value>
                        </Setter>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:47:26.203

如果未包含，请在项目中包含文件“Image\Logo.png”。然后通过访问该文件的属性选项卡（右键单击）将其构建操作设置为“资源”。

![设置构建资源的操作](https://i.stack.imgur.com/IghTm.jpg)

另外，我不确定您要在按钮的 Click 处理程序中执行什么操作。您已经在 XAML 中设置了背景图像。除非您在 Click 处理程序中将其设置为另一个图像，否则不需要该代码。

# python - 在 python 中读取、处理然后写入文件的理想方法

> ID：15892291
> 
> 赞同：0
> 
> 时间：2013-04-09T02:29:49.247
> 
> 标签：python, file, io

有很多文件，我需要为每个文件读取文本内容，对文本进行一些处理，然后将文本写回（替换旧内容）。
我知道我可以先将`open`文件作为`rt`读取和处理内容，然后将它们关闭并重新打开`wt`，但显然这不是一个好方法。我可以只打开一个文件来读写吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:35:14.550

查看[文件输入模块](http://docs.python.org/3/library/fileinput.html)。它使您可以按照其他人的建议进行操作：备份输入文件，操作其内容，然后将更改的数据写入相同的位置。

> 可选的就地过滤：如果关键字参数 inplace=True 被传递给 fileinput.input() 或 FileInput 构造函数，则文件被移动到备份文件并且标准输出被定向到输入文件（如果与备份文件同名的文件已存在，它将被静默替换）。这使得编写一个过滤器来重写其输入文件成为可能。

这是一个例子。假设我有一个文本文件，例如：

```
1
2
3
4 
```

我可以做（Python 3）：

```
import fileinput

file_path = r"C:\temp\fileinput_test.txt"
with fileinput.FileInput(files=[file_path], inplace=True) as input_data:
    for line in input_data:
        # Double the number on each line
        s = str(int(line.strip()) * 2)
        print(s) 
```

我的文件变成：

```
2
4
6
8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:47:02.700

请参阅：[http ://docs.python.org/2/library/functions.html#open](http://docs.python.org/2/library/functions.html#open)

> 最常用的模式值是 'r' 用于读取，'w' 用于写入（如果文件已经存在则截断文件）和 'a' 用于附加（在某些 Unix 系统上，这意味着所有写入都附加到末尾无论当前的搜索位置如何，文件的位置）。如果省略 mode，则默认为 'r'。默认是使用文本模式，它可以在写入和读取时将 '\n' 字符转换为特定于平台的表示。因此，在打开二进制文件时，应在模式值后附加“b”以二进制模式打开文件，这将提高可移植性。（附加 'b' 即使在不区别对待二进制文件和文本文件的系统上也很有用，它用作文档。）有关 mode 的更多可能值，请参见下文。
> 
> 模式“r+”、“w+”和“a+”打开文件进行更新（注意“w+”会截断文件）。在区分二进制文件和文本文件的系统上，将“b”附加到模式以二进制模式打开文件；在没有这种区别的系统上，添加“b”没有效果。

因此，您可以在 mode 中打开一个文件`r+`，从中读取，截断，然后写入同一个文件对象。但你不应该那样做。

您应该以读取模式打开文件，写入临时文件，然后`os.rename`临时文件覆盖原始文件。这样，您的操作是原子的；如果在写入步骤中出现问题（例如，它被中断），您最终不会丢失原始文件，并且只写出部分替换文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:41:10.733

好吧，你可以选择“r+w”模式，你只需要打开文件一次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T02:48:07.950

您可以使用['r+' 文件模式](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)同时打开一个文件进行读取和写入。

例子：

```
with open("file.txt", 'r+') as filehandle:
   # can read and write to file here 
```

# c++ - 重复创建和删除同一目录时访问被拒绝

> ID：15892295
> 
> 赞同：4
> 
> 时间：2013-04-09T02:30:04.400
> 
> 标签：c++, windows, winapi, windows-7

我刚刚做了一个小测试，我就是这样做的：
我反复创建和删除一个目录，例如 d:\test。我这样做了大约 1000 次，并且在一段时间内访问被拒绝总是会出错。

我的代码是这样写的：

```
TCHAR szError[MAX_PATH] = {0};
TCHAR lpszPath[MAX_PATH] = _T("d:\\test");
for(int i = 0; i != 1000; i++)
{
    if (!CreateDirectory(lpszPath, NULL))
    {
        FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, NULL, GetLastError(), NULL, szError, MAX_PATH, NULL);
        MessageBox(NULL, szError, _T("create directory error"), MB_OK);
        cout << i << endl;
        return 0;
    }
    SetFileAttributes(lpszPath, FILE_ATTRIBUTE_NORMAL);
    if (!RemoveDirectory(lpszPath))
    {
        FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, NULL, GetLastError(), NULL, szError, MAX_PATH, NULL);
        MessageBox(NULL, szError, _T("remove directory error"), MB_OK);
        cout << i << endl;
        return 0;
    }   
} 
```

谁能告诉我为什么会发生此错误以及如何避免该错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-15T07:29:36.880

请参阅 RemoveDirectory 文档；“RemoveDirectory 函数在关闭时标记要删除的目录。因此，在关闭该目录的最后一个句柄之前，不会删除该目录。”

这意味着，如果某些东西设法创建了您删除的目录的句柄（在创建和删除之间），那么该目录实际上并没有被删除，您会得到“拒绝访问”，

要解决此问题，请在删除之前重命名要删除的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:53:28.120

如果这是速度问题，您可以考虑在每次创建/删除之间使用睡眠功能。

# javascript - 更改选项卡后限制复选框并取消选中

> ID：15892296
> 
> 赞同：0
> 
> 时间：2013-04-09T02:30:16.357
> 
> 标签：javascript, jquery

我正在尝试使用选择标签显示和隐藏 div。在 div 中有复选框，其逻辑是在用户检查后禁用它们 2\. 当我更改 div 时，复选框保持禁用状态。出于某种原因，最多 2 个复选框逻辑正在禁用所有复选框。

这是小提琴

[http://jsfiddle.net/sghoush1/yJCYW/](http://jsfiddle.net/sghoush1/yJCYW/)

Jquery 看起来有点像这样

```
$('.selectOption').change(function(){
        $('.descContent').hide().eq(this.selectedIndex).show();
        $('.resourceMsg').hide();
    });

    var max = 2;
    var checkboxes = $('input[type="checkbox"]');

    checkboxes.change(function(){
        var current = checkboxes.filter(':checked').length;
        checkboxes.filter(':not(:checked)').prop('disabled', current >= max);

        if(current >= max){
            $('.resourceMsg').show();
        } else{
            $('.resourceMsg').hide();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:39:03.690

只需取消选中复选框，并在更改选择元素时将禁用属性设置为False：

```
$(function () {
    var max = 2;
    var checkboxes = $('input[type="checkbox"]');
    $('.selectOption').change(function () {
        checkboxes.prop({
            'disabled': false,
            'checked': false
        });
        $('.descContent').hide().eq(this.selectedIndex).show();
        $('.resourceMsg').hide();
    });
    checkboxes.change(function () {
        var current = checkboxes.filter(':checked').length;
        checkboxes.filter(':not(:checked)').prop('disabled', current >= max);

        if (current >= max) {
            $('.resourceMsg').show();
        } else {
            $('.resourceMsg').hide();
        }
    });
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/yJCYW/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:39:09.727

您没有启用它们的代码。

```
checkboxes.filter(':not(:checked)').prop('disabled', current >= max); 
```

这将禁用页面上*所有*未选中的复选框，而不仅仅是当前显示的`div`.

您需要重新考虑选择更改后应该发生什么；您要么需要丢弃现有的选择，要么重新启用复选框（实际上是同一件事）：

```
$('.selectOption').change(function(){
    $('.descContent').find(':checked,:disabled').prop({checked: false, disabled: false});
    $('.descContent').hide().eq(this.selectedIndex).show();
    $('.resourceMsg').hide();
}); 
```

或者，您可以只禁用当前`div`.

```
checkboxes.change(function() {
    var content = $(this).parents('.descContent');
    var current = content.find(':checked').length;

    content.find(':not(:checked)').prop('disabled', current >= max);

    // ...
} 
```

# android - 如何在安卓模拟器中截屏

> ID：15892305
> 
> 赞同：47
> 
> 时间：2013-04-09T02:31:52.577
> 
> 标签：android, android-emulator, screenshot

从Android 4.0开始，它支持音量下+电源键截屏并保存在图库中。但是如何在android模拟器中做到这一点。

我知道在 Eclipse 中有一个“截屏”按钮，但这不是我想要的。我需要它在模拟器中并保存在模拟器中。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-03-01T11:50:47.310

如这篇文章所示：[来自 adb 的 Nexus One 的屏幕截图？](https://stackoverflow.com/questions/2807070/screenshot-of-the-nexus-one-from-adb)，你也可以使用 adb 截图：

```
 adb shell /system/bin/screencap -p /sdcard/screenshot.png
 adb pull /sdcard/screenshot.png screenshot.png 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2015-12-21T15:34:10.263

## 只需单击照片图标即可在 android 模拟器中截屏

[![在此处输入图像描述](https://i.stack.imgur.com/OczdD.png)](https://i.stack.imgur.com/OczdD.png)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-01-06T15:42:21.170

在新的模拟器中，您可以通过按下相机图标来完成。默认情况下，它保存在桌面中。

[![在此处输入图像描述](https://i.stack.imgur.com/r2Usx.png)](https://i.stack.imgur.com/r2Usx.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-07T13:55:19.220

窗口 > 显示视图 > 其他。在新打开的对话框中，在 Android 类别下，选择设备。

现在在“设备”面板上，单击如图所示的按钮，您的屏幕截图就准备好了。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-09T02:43:10.217

您可以使用具有截屏选项的 ddms。在 DDMS -> 选择设备 -> 选择屏幕捕获

**编辑** AFIK 是不可能的，但这种情况将完全取决于模拟器图像。设备热键可能适用于某些操作系统映像。[从模拟器链接](http://developer.android.com/tools/help/emulator.html)尝试相同的组合键。

如果您的模拟器使用工厂或相同的图像，那么它应该是可能的。您可以为您的模拟器下载出厂映像。从此[链接](https://developers.google.com/android/nexus/images)查看可用的 nexus 图像，也可以从制造商网站下载图像。

或者，您可以按照以下方式进行屏幕截图，

```
View content = findViewById(R.id.myView);
content.setDrawingCacheEnabled(true);
Bitmap bitmap = content.getDrawingCache(); 
```

然后将其保存在您喜欢的任何地方。这不是最佳解决方案，它只会打印您在视图中拥有的内容。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-03-18T09:38:23.043

长按左侧菜单中的电源按钮。然后您将可以选择屏幕截图。 [![在此处输入图像描述](https://i.stack.imgur.com/sEjX5.png)](https://i.stack.imgur.com/sEjX5.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-05T16:35:42.257

如果您打开 Android 视图“设备”（在 Window --> Show View --> Other... --> Android --> Devices 下），您可以截取屏幕截图。单击要截屏的设备或模拟器，然后单击“屏幕捕获”按钮（它看起来像一张小图片，应该在停车标志按钮旁边）。有时设备不会立即加载图片；有时您必须关闭/重新打开屏幕捕获窗口。

这相当于通过 DDMS 拍照，但您可以在 Eclipse 中进行，而不用打开另一个应用程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-04T18:29:58.780

```
#!/bin/bash -f
while : ; do

echo "press the number of the screenshot to capture";

read i

adb shell /system/bin/screencap -p /sdcard/screenshot.png
adb pull /sdcard/screenshot.png "${i}.png"

done 
```

* * *

```
ctrl-c 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-30T07:17:28.023

1.  转到您的模拟器，然后按：

> ctrl + s

保存您的屏幕截图。

希望它的工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-08T09:26:22.440

您可以简单地按快捷键即 ctlr + S 在模拟器中进行截图。

模拟器上还有一个按钮可以截屏。

只需按下 [此按钮](https://i.stack.imgur.com/31GFB.png)按钮，您将获得模拟器的屏幕截图。

希望对您有所帮助。

# c++ - 通过删除重复代码使我的 do while 循环更整洁

> ID：15892308
> 
> 赞同：0
> 
> 时间：2013-04-09T02:32:14.867
> 
> 标签：c++, do-while

嗨，这是我的问题。

编写一个使用 do-while 语句的程序。它从键盘读入一个整数 n。如果 n 不在 1 到 10 的范围内，它会发出一声“哔”声并要求输入另一个整数。如果 n 在正确的范围内，它会写出“您已输入 n”，然后退出。

这是我的答案。

```
#include <iostream>
#include <Windows.h>
using namespace std;

void main()
{
    int number = 0;
    do
    {
      cout << "Enter an integer." << endl;
      cin >> number;
      if (!(number >= 1 && number <= 10))
      {
        Beep(400, 400);
      }
    }
    while (!(number >= 1 && number <= 10));
    cout << "You have input " << number << endl;
    system("PAUSE");
} 
```

你可以看到线

```
(!(number >= 1 && number <= 10)) 
```

重复。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:39:02.877

```
int GetNumber()
{
    int number;
    cout << "Enter an integer." << endl;
    cin >> number;
    return number;
}

void main()
{
    int n = GetNumber();

    while(n < 1 || n > 10)
    {
        Beep(400, 400);
        n = GetNumber();
    }

    cout << "You have input " << n << endl;
    system("PAUSE");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:37:54.653

```
#include <iostream>
#include <Windows.h>
using namespace std;

void main()
{
    int number = 0;
    bool invalid_input = true;
    do
    {
      cout << "Enter an integer." << endl;
      cin >> number;
      invalid_input = !(number >= 1 && number <= 10); 
      if (invalid_input)
      {
        Beep(400, 400);
      }
    }
    while (invalid_input);
    cout << "You have input " << number << endl;
    system("PAUSE");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T02:38:30.997

也许...

```
int number = 0;
while (true)
{
  cout << "Enter an integer." << endl;
  if (cin >> number && number >= 1 && number <= 10)
      break;
  Beep(400, 400);
}
cout << "You have input " << number << endl;
system("PAUSE"); 
```

# c# - 将复选框列添加到 GridControlEx

> ID：15892310
> 
> 赞同：0
> 
> 时间：2013-04-09T02:32:32.227
> 
> 标签：c#, checkbox, grid

我想要做的是添加一个由复选框填充并放置在网格左侧的列。网格行是从查询绑定的。我有这个代码：

```
string query = "SELECT TransID, Company, Period, EmpID, Employee FROM Trx"
DataTable tblClaim;
tblClaim = DB.sql.Select(query);
tblClaim.Columns.Add("Process", typeof(bool)); //I want this column placed on the left side of the grid
gcxClaim.ExGridControl.DataSource = tblClaim; 
```

我从该代码中得到的是，复选框被禁用，列位于右侧。当我尝试放置`tblClaim.Columns.Add("Process", typeof(bool));`之前`tblClaim = DB.sql.Select(query);`，它得到了错误。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:56:50.990

试试这个，

```
tblClaim.Columns.Add("Process", typeof(bool)).SetOrdinal(0); 
```

这会将“进程”列的索引设置为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:14:10.673

它通过以下代码工作：

```
string query = "SELECT CAST(1 AS BIT) AS Process, TransID, Company, Period, EmpID, Employee FROM Trx"

tblClaim = DB.sql.Select(query);
gcxClaim.ExGridControl.DataSource = tblClaim;
gcxClaim.ExGridView.OptionsBehavior.Editable = true;
for (int i = 0; i < tblClaim.Columns.Count; i++)
{
    gcxClaim.ExGridView.Columns[i].OptionsColumn.AllowEdit = false;
}
gcxClaim.ExGridView.Columns["Process"].OptionsColumn.AllowEdit = true; 
```

# java - 检查 InterruptedException 的好习惯是什么？

> ID：15892311
> 
> 赞同：4
> 
> 时间：2013-04-09T02:32:33.053
> 
> 标签：java

我是 Java 世界的新手，所以如果这是一个愚蠢的问题，请耐心等待。

我最近在 Runnable 对象的 run() 方法中看到了一些这样的代码。

```
try {
    if (Thread.interrupted()) {
       throw new InterruptedException();
    }

    // do something 

    if (Thread.interrupted()) {
        throw new InterruptedException();
    }

    // do something 

    if (Thread.interrupted()) {
        throw new InterruptedException();
    }

    // and so on

} catch (InterruptedException e){
     // Handle exception
} finally {
     // release resource
} 
```

多久检查一次线程中断，应该在哪里检查，有什么好的做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T02:39:38.153

它通常不是您在整个代码中散布的东西。但是，如果您希望能够取消异步任务，则可能需要定期检查中断。换句话说，当您确定需要对中断做出更好响应的代码体时，通常会在*事后添加它。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T02:45:35.083

我通常看不到正在使用线程中断机制 - 同样，如果您的代码没有中断线程，那么线程不需要检查它们是否已被中断。但是，如果您的程序使用线程中断机制，那么将 if(Thread.interrupted()) 检查放在 Runnable 的顶级循环中的好地方： Runnable 通常看起来像

```
run() {
    while(true) {
        ...
    }
} 
```

你的看起来像

```
run() {
    try {
        while(true) {
            if(Thread.interrupted()) {
                throw new InterruptedException();
            }
            ...
         }
    } catch (InterruptedException ex) {
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T02:49:11.767

[`interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)一个线程只有在有人调用它的方法时才会被中断。如果您从不调用`interrupt()`，并且您没有使用调用的库`interrupt()`（这是您希望拼写出来的内容），那么您不需要检查中断。

*有人想要*中断线程的主要原因是取消阻塞或长时间运行的任务。例如，锁定机制[`wait()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28%29)通常会导致线程永远等待通知，但另一个线程可以中断以强制等待线程停止等待（通常是取消操作）。

# visual-studio-2010 - 如何在cmake生成的项目文件中获取绝对路径

> ID：15892314
> 
> 赞同：0
> 
> 时间：2013-04-09T02:32:44.120
> 
> 标签：visual-studio-2010, jenkins, cmake

我正在使用`cmake`为需要在 Visual Studio 6 和 2010 下编译的 C++ 项目生成项目文件。两个项目的文件都生成正常，我可以毫无问题地构建项目。

但是，2010 vxproj 文件包含文件的相对路径`cpp`，当我使用 Jenkins 构建文件时，日志包含 Jenkins 无法用于查找源文件的相对路径。

我看到这个：

> ..\..\source\moduleA\file1.cpp(74): 警告 C4800: 'BOOL' : 强制值为 bool 'true' 或 'false' （性能警告）

虽然它应该是Jenkins 能够找到该文件`source/moduleA/file.cpp`。`D:\jenkins\jobs\workspace\source\moduleA\file.cpp`

当然，我可以制作一个解析器来解析日志文件并删除它，`..\...\`但我希望找到一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T02:49:59.603

最后我找到了一个可以解决这个问题的编译器选项。您可以`/FC`为 Visual Studio 2010 添加标志。不确定它是否适用于 VC6。要添加它，请使用：

```
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /FC") 
```

# networking - 有人可以解释以下网络中两个客户端之间的通信吗？

> ID：15892317
> 
> 赞同：0
> 
> 时间：2013-04-09T02:33:02.917
> 
> 标签：networking, switch-statement, ip, mac-address

PC1 -> 开关 A -> 开关 B -> PC2。

PC1的IP地址-192.168.2.1 PC2的IP地址-192.168.2.2

如果我从 PC1 ping PC2，数据包将如何转发？

连接到 PC1 的端口和连接到 PC2 的端口上的数据包源 IP 地址、目标 IP 地址、源 MAC 地址和目标 MAC 地址是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:44:12.113

您可以省略主机之间的切换，因为它们不会影响或修改主机之间的任何通信。它们只是存储有关在哪个接口上可以访问哪些 MAC 地址的信息，以减少包含无用数据的垃圾邮件网络段。整个沟通将通过几个步骤完成：

1.  PC1 想向 PC2 发送 ICMP 数据包，但还不知道他的 MAC 地址
2.  **网络:** : PC1: ARP - 192.168.2.2 的地址是什么？
3.  **网络:** : PC2: ARP - 192.168.2.2 的地址是 aa:bb:cc:dd:ee:ff
4.  PC1现在有了L2地址，可以发包了
5.  **网络:** : PC1: ICMP echo-r​​equest - src-mac: 11:22:33:44:55:66, src-ip: 192.168.2.1 ... dest-mac: aa:bb:cc:dd:ee: ff, 目标 IP: 192.168.2.2
6.  PC2收到ICMP echo-r​​equest，想发送echo-r​​eply，但不知道192.168.2.1的L2地址
7.  **网络：** PC2：ARP - 192.168.2.1 的地址是什么？
8.  **网络：** PC1：ARP - 192.168.2.1 的地址是 11:22:33:44:55:66
9.  **网络：** PC2：ICMP echo-r​​eply - src-mac：aa：bb：cc：dd：ee：ff，src-ip：192.168.2.2 ... dest-mac：11：22：33：44：55：66 , 目标 IP: 192.168.2.1

# java - || 的使用 替代赋值运算符

> ID：15892325
> 
> 赞同：0
> 
> 时间：2013-04-09T02:33:49.023
> 
> 标签：java

在 JavaScript 中，我可以定义：

```
num = numerator || 0;
denom = denominator || 1; 
```

然而，在 Java 中，这不能应用。

在不使用条件（明确编写）的情况下，是否有一种简洁的方法来实现“如果未定义，则分配给这个”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T02:37:02.157

也许这已经足够了。

```
num = numerator != null ? numerator : 0;
denom = denominator != null ? denominator : 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:53:13.497

您可以使用多个构造函数，并设置默认值...如果您将其用作对象...

```
zero = new Rational();
five = new Rational(5);
twoThird = new new Rational(2,3);

class Rational{
    num = 0;
    denom = 1;

    public Rational(){
    }
    public Rational(int num){
        this.num=num;
    }
    public Rational(int num , int denom){
        this.num=num;
        this.denom=denom;
    }
} 
```

如何使用三元的其他解决方案需要包装对象并处理空指针，这通常不是好的 java 风格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:36:58.673

您可以使用三元运算符/条件（？：）

```
String ans = (question == null)? null : "Option A"; 
```

在上面的例子中，如果 question 不为空，我们将 ans 设置为选项 A，否则将 ans 设置为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T02:37:21.527

我知道您指定了“无条件”，但是三元“如果”呢？

```
num = (num != 0) ? numerator : 0; 
```

# ios - iOS：找出谁是动态变化的 UITableView 上的第一响应者

> ID：15892329
> 
> 赞同：1
> 
> 时间：2013-04-09T02:34:05.783
> 
> 标签：ios, uitableview, resignfirstresponder

我有一个`UITableView`自定义单元格，其中包含`UITextField`s。My`UITableView`是在 my 上定义的`MainViewController`，而我的单元格是在`CustomCell`类中定义的。每次我按下按钮时，都会创建一个新单元格。我无法让我的单元格成为`UITextField`第一响应者，因为单元格是在与主控制器不同的类中动态添加和定义的。我怎么做？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:36:22.740

告诉 UITableView 到`endEditing:`.

# jquery - 使用 Jquery 进行一页导航

> ID：15892332
> 
> 赞同：0
> 
> 时间：2013-04-09T02:34:20.990
> 
> 标签：jquery, html, css

任何人都可以帮助我如何在这个 wordpress 主题上创建导航

[http://teothemes.com/wp/scrn/](http://teothemes.com/wp/scrn/)

似乎当您到达顶部时，导航只会停留在滑块下方，而当您向下滚动页面时，导航将被附加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:07:17.677

在这里，我向您展示制作粘性元素的简单示例：

**HTML 片段代码**：

```
<nav class="sticky">
    <ul>
        <li>
        <a href="#intro">Home</a>
        </li>
        ...        
        <li>
        <a href="#contact">Contact</a>
        </li>
    </ul> 
```

**CSS 代码段**：

```
nav {
    background: #f5f5f5;
    height: 40px;
    position: relative;
    text-align: center;
    width: 100%;
    z-index: 1000;

nav.fixed{
    position: fixed;  top: 0px;
} 
```

jQuery代码：

```
if ($('nav').hasClass('sticky')) {
        var top = $('.sticky').offset().top - parseFloat($('.sticky').css('margin-top').replace(/auto/, 0));
        $(window).scroll(function (event){
          var y = $(this).scrollTop();
          if (y >= top) {
              $('.sticky').addClass('fixed');
          } else {              
            $('.sticky').removeClass('fixed');
          }
        });
    } 
```

这里的演示：

[http://jsfiddle.net/PBhnE/](http://jsfiddle.net/PBhnE/)

但您也可以使用网站[http://teothemes.com/wp/scrn/](http://teothemes.com/wp/scrn/)上使用的插件。

[http://stickyjs.com/](http://stickyjs.com/)

# sql - SQL查询来自同一列的不同值

> ID：15892336
> 
> 赞同：-1
> 
> 时间：2013-04-09T02:35:09.180
> 
> 标签：sql, join

需要从表`PRODUCTS`和`CUSTOMERS`. 预期结果如下：

> CUST_NAME（来自）| PRODUCT_NAME | PRODUCT_DESC | 预计到达时间 | CUST_NAME（到）

和都来自同一个表 ( `CUST_NAME(from)`) 。如何查询我的 SQL 语句以从列中查询 2 个不同的值？`CUST_NAME(to)``CUSTOMERS`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:38:59.470

您需要`CUSTOMER`在表上连接两次，`PRODUCTS`因为有两列依赖于它，

```
SELECT  b.Name as CustNameFrom,
        a.Product_Name,
        a.Product_Desc,
        a.ETA,
        c.Name as CustNameTo
FROM    Products a
        INNER JOIN Customer b
            ON a.cust_from = b.ID
        INNER JOIN Customer c
            ON a.cust_to = c.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c7b5a/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# javascript - 无法使用 onClick 获取 id 名称？

> ID：15892340
> 
> 赞同：3
> 
> 时间：2013-04-09T02:35:34.587
> 
> 标签：javascript, url, onclick, undefined

[http://wthdesign.net/test/test.html](http://wthdesign.net/test/test.html)

我想要做的是将 id 名称附加到我的 url 中，但我得到的是“#undefined”？

我正在使用的脚本：

```
function generateUrl()
{
    var currentId = $(this).attr('id');
    document.location.hash = currentId;
    console.log($(this));
} 
```

在html里面：

```
<a id="abc" onClick="generateUrl()" >this is an anchor btn</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:39:33.040

```
<a id="abc" onClick="generateUrl(this)" >this is an anchor btn</a>

function generateUrl(elem)
{
    var currentId = elem.id;
    document.location.hash = currentId;

} 
```

您使用“this”将元素传递给您的函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T02:40:46.773

如果你调试，你会发现`this`在这个上下文中是window对象。您可以像这样传递`this`给函数：

```
function generateUrl(el)
{
    var currentId = $(el).attr('id');
    document.location.hash = currentId;
} 
```

```
<a id="abc" onClick="generateUrl(this)" >this is an anchor btn</a> 
```

或者，您可以使用 jquery 来替换您的内联`onClick`，如下所示：

```
$("#abc").click(function()
{
    var currentId = $(this).attr('id');
    document.location.hash = currentId;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T02:47:15.743

这是因为设置`onclick`HTML 属性等同于设置匿名函数，如下所示：

```
element.onclick = function(event) {
    generateUrl();
} 
```

如您所见，在您的调用中，您丢失了`event`对象和`this`上下文对象，这将成为全局对象（`window`对于浏览器）。

然后你有几种方法。首先，不要使用 HTML 属性，而是通过 JS 设置点击，这是一种更好的做法——尽可能避免意大利面条式代码。

您正在使用 jQuery，因此：

```
$(function() {
    $("#abc").click(generateUrl);
}); 
```

另外，您的功能可以简化：

```
function generateUrl() {
    window.location.hash = this.id;
} 
```

所以你的 HTML 将是：

```
<a id="abc">this is an anchor btn</a> 
```

如果出于任何原因，您不能/不想`onclick`从 HTML 中删除 ，则必须对其进行一些修改：

```
<a id="abc" onClick="generateUrl.call(this)" >this is an anchor btn</a> 
```

通过这种方式，您正在调用传递正确上下文对象的函数。就像将来的参考一样，您也可以传递`event`as 第一个参数：

```
<a id="abc" onClick="generateUrl.call(this, event)" >this is an anchor btn</a> 
```

PS 请注意，如果`href`您的标签中没有属性`a`，浏览器不会将该标签威胁为“链接”。

# c - 制作自定义 Malloc，这里有什么问题？

> ID：15892342
> 
> 赞同：0
> 
> 时间：2013-04-09T02:35:44.103
> 
> 标签：c, malloc

一段时间以来，我一直在使用双链表开发一个小的自定义最差 Malloc，虽然这很小，但我认为这会起作用。这段代码有什么明显的问题吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include "mymal.h"

typedef struct Node 
{
    int size;
    int status;
    struct Node *next;
    struct Node *previous;
} Node;

Node *endNode;
Node *rootNode;

void *worstfit_mall(int size)
{
    Node *theNode = sbrk (size + sizeof(theNode));
    void *ptr;
    if (rootNode == NULL)
    {
        theNode->status = 1;
        theNode->size = size;
        theNode->previous = theNode;
        theNode->next = theNode;
        rootNode = theNode;
        endNode = theNode;
        return theNode;
    }
    Node *worstNode;
    worstNode = worstFit(size);
    if (worstNode != NULL)
    {
        theNode->status = 1;
        theNode->size = size;
        Node *newNode = sbrk((worstNode->size - theNode->size) + sizeof(theNode));
        newNode->status = 0;
        newNode->size = worstNode->size - theNode->size;
        theNode->next = newNode;
        theNode->previous = worstNode->previous;
        newNode->next = worstNode->next;
        return newNode;
    }
    endNode->next = theNode;
    endNode = theNode;
    endNode->status = 1;
    endNode->size = size;
    ptr = sbrk(size + sizeof(theNode));
    return ptr;
}

void my_free(void *ptr)
{
    Node *pointer;
    pointer = (Node*)ptr;
    pointer->status = 0;
    if ((pointer->next->status == 0) && (pointer->previous->status == 0))
        sbrk(-1 * (pointer->next->size + pointer->size));
    else if ((pointer->next->status == 1) && (pointer->previous->status == 0))
        sbrk(-1 * (pointer->previous->size + pointer->size));
    else if ((pointer->next->status == 0) && ( pointer->next->status == 0))
        sbrk(-1 * (pointer->previous->size + pointer->next->size + pointer->size));
    else
        sbrk(-1 * pointer->size);
}

void *worstFit(int size)
{
        Node *theNode = rootNode;
        Node *worstNode;
        while (theNode != NULL)
        {
                if ((worstNode == NULL || theNode->size > worstNode->size) && (theNode->size >= size) && (theNode->status == 0))
                        worstNode = theNode;
                theNode = theNode->next;
        }
        return worstNode;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:08:38.693

以下是立即打动我的事情：

*   `worstFit`当它仍然是垃圾时，它不会初始化并`worstNode`尝试读取它。`NULL`

*   你创建了一个s的链表`Node`，但 tail总是指向它自己。同时，在迭代列表时需要一个哨兵值。`Node``next``worstFit``NULL`

*   `worstfit_mall``endNode`最初创建时不初始化`rootNode`。

*   `worstfit_mall`返回一个指向已分配的指针`Node`，但如果它可以替代`malloc`，它应该返回一个指向允许调用者写入的内存的指针。您不希望调用者在您的`Node`数据上乱涂乱画。

    我希望`worstfit_mall`返回`((char*) node) + sizeof *node)`（或更简单地说，`node + 1`）而不是`node`直接返回。 `my_free`需要进行相应的反向调整来检索`Node`指针。

    `void my_free(void *ptr) { Node *nodePtr = ptr; nodePtr--; ... }`

*   此外，我不清楚为什么在沿着路径`worstfit_mall`分配内存`sbrk`时要分配内存。`worstNode != NULL`这条路径的重点不是找到一个*现有的*内存块来重用吗？此外，这条路径调用`sbrk` *了两次*。

*   最后，在我看来，`my_free`无条件地减少了分配的内存量，但这只有在你释放你分配的最后一个东西时才有效`sbrk`。如果你调用`worstfit_mall`了两次然后调用`my_free`了第一个结果怎么办？`my_free`没有将内存块标记为不再使用的路径，以便`worstfit_mall`以后可以重用它。

我不知道您的代码是否还有其他问题；我会说，很可能存在这些类型的基本问题。

# c# - SharePoint List-OData - 是否可以访问选项列中的选项？

> ID：15892346
> 
> 赞同：1
> 
> 时间：2013-04-09T02:36:13.180
> 
> 标签：c#, .net, sharepoint-2010, odata, atom-feed

我正在编写一个连接到 SharePoint 2010 服务器的动态 OData 客户端。

我真的很希望能够访问 List 及其所有相关列。如果它是一个选择列，我希望能够访问已定义的可能选择。这甚至可能吗？

我一直试图通过将 /listdata.svc/$metadata 输入到 IEdmModel 中来查找我想要的信息。我只是不知道它可能在哪里。

这是我开始的，我可以遍历模型中的实体，以及它们各自的属性。我可以看到选择列显示为实体类型。

示例：我有一个名为 AQUISITION_TYPE 的列，其中“捐赠”、“购买”、“税收销售”作为可能的选择。

假设这不是死胡同，任何指针都会受到赞赏。

```
foreach ( IEdmEntityType type in model.SchemaElementsAcrossModels().OfType<IEdmEntityType>())
        {
            str_test += "\n" + type.FullName();

            foreach (IEdmProperty property in type.Properties())
            {
                //my Choice columns are of type Entity
                if (property.Type.IsEntity())
                {
                    str_test += "\t" + property.Name + " - " + property.Type.TypeKind().ToString() + " - " + property.PropertyKind.ToString() + "\n";

                }
                //My primative column types are here
                else
                {
                    str_test += "\t" + property.Name + " - " + property.Type.TypeKind().ToString() + " - " + property.PropertyKind.ToString() + "\n";
                }
            }

        } 
```

部分解决方案... 我可以在 lists.asmx SOAP 服务中很容易地找到我想要的信息。

# php - 将锚标记添加到每个组的第一条记录

> ID：15892351
> 
> 赞同：0
> 
> 时间：2013-04-09T02:36:55.947
> 
> 标签：php, mysql, twitter-bootstrap, anchor

我正在尝试设置 Twitter Bootstrap 导航列表（类似于他们在自己的网站上使用的内容：http: [//twitter.github.io/bootstrap/getting-started.html](http://twitter.github.io/bootstrap/getting-started.html)）。

我的页面从“table”中获取所有内容，并按“col_a”对结果进行分组。我希望能够将锚链接添加到为每个组返回的第一条记录。

```
$query = "SELECT * FROM table GROUP BY col_a, col_b";
$result = $mysqli->query($query);
while ($row = $result->fetch_array()) {
    <tr class="<?php echo $tr_owned_class ?>">
        <td><?php echo $row['col_a'] ?></td>
... 
```

这最终会返回类似这样的内容（grp_x 从 col_a 返回）：

*   第 1 行：grp_1、数据、数据...
*   第 2 行：grp_1、数据、数据...
*   第 3 行：grp_1、数据、数据...
*   第 4 行：grp_2、数据、数据...
*   第 5 行：grp_2、数据、数据...
*   第 6 行：grp_3、数据、数据...

所以，在这个例子中，我想在第 1、4 和 6 行添加一个锚标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:05:45.937

我会在第一次遇到该组时将其存储到一个变量中 - 如下所示：

```
$last_group = '';
while ($row = $result->fetch_array()) {
   $group = $row['col_a'];
   if ($group != $last_group) {
      echo '<td><a href="[url here]">'.$group.'</a></td>';
      $last_group = $group;
   } else {
      echo '<td>'.$group.'</td>';
   }
} 
```

# c - 如何确保特定代码片段之间不会产生中断？

> ID：15892353
> 
> 赞同：2
> 
> 时间：2013-04-09T02:37:01.390
> 
> 标签：c, dos, interrupt-handling, watcom

我有一个关于代码片段之间的中断生成时间的问题......

@“示例”代码

```
1\. ...
2\. assign value to global variable  // 0/1 means invalid/valid
3\. set H/W register via memory-mapped IO method  // 0 means completed 
```

@“示例”ISR 代码

```
a. ...
b. if(global value is valid && H/W register is "0") then count++; 
```

*   需要注意的一点：*硬件寄存器设置后，“完成”时其值为0！*

***我的问题是*****：如果在2**和**3**之间产生中断，那么计数将增加一，因为步骤**3**尚未完成（值为 0）......如果交换**2**和**3**，那么计数可能不会加1，因为即使硬件寄存器为0（一段时间后，完成）全局变量为0！

我的第一个想法是：是否有可能**2**和**3可以以某种方式“捆绑在一起”，并且在****3**完成之前不允许产生中断？

*   我使用 watcom c 并在 DOS 中测试...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:42:24.580

您可以使用内联汇编或调用用汇编程序编写的外部函数来调用 x86`CLI`和`STI`用于禁用和启用中断的指令。

# jquery - 正则表达式将函数更改为netbeans中的另一个函数

> ID：15892355
> 
> 赞同：-5
> 
> 时间：2013-04-09T02:37:03.297
> 
> 标签：jquery, regex, netbeans

我正在使用的项目想要从 jquery 1.6.4 升级到 1.9.1...我可以使用正则表达式来更改谁：

```
"$(".btnPrint").live("click", function() {" 
```

进入这个

```
"$('body').delegate(".btnPrint", "click", function() {" 
```

与 Netbeans...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:40:40.390

也不要使用`.delegate`。使用`.on`.

```
/\$\((["'])(.*?)\1)\.live\((["'])(.*?)\3/$("body").on("\2", "\4" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T01:41:18.050

无论如何，得到社区的答案..

在网豆中：

将以下内容放入“查找内容”输入中。

`\$((["'][^"']+["'])).live(["']click["']`

并在“替换为”中输入以下内容。

`\$('body').on("click", $1`

# azure - 如何使用经典模式在 Azure 上运行 webapp

> ID：15892359
> 
> 赞同：1
> 
> 时间：2013-04-09T02:37:11.603
> 
> 标签：azure

我想以经典模式运行应用程序，但在 Azure 中我应该怎么做？我能想到的唯一想法是启动脚本？那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:41:05.160

[您必须在WebRole](http://www.windowsazure.com/en-us/home/scenarios/cloud-services/)中部署您的网站，而[不是在 WebSite](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)中。这样做，您就可以在提升模式下运行[启动任务。](http://msdn.microsoft.com/en-us/library/windowsazure/hh974418.aspx)将以下行放入您的启动任务脚本中：

```
appcmd.exe set config -section:system.applicationHost/applicationPools /applicationPoolDefaults.managedPipelineMode:"Classic" /commit:apphost 
```

这可以解决问题。

# batch-file - 需要计算从文件的第一行到唯一字符（批次）的行数

> ID：15892364
> 
> 赞同：-2
> 
> 时间：2013-04-09T02:37:54.347
> 
> 标签：batch-file, count

我是一批新人。我想我的问题对你来说很简单。我需要一个批处理脚本来计算从文件的第一行到包含在该文件中的唯一字符“A015”的行数（这个数字也应该考虑空白行）。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:01:58.880

试试这个：

```
for /f "delims=:" %%i in ('findstr /n "A015" "file.txt"') do if not defined LineNumber set "LineNumber=%%i"
if defined LineNumber (echo "A015" found at line %LineNumber%) else echo "A015" not found 
```

如果文本文件中有多个“A015”，这将显示第一行号。

# apache - ProducerTemplate和Direct：从骆驼开始

> ID：15892366
> 
> 赞同：2
> 
> 时间：2013-04-09T02:38:08.130
> 
> 标签：apache, apache-camel, endpoint

我的骆驼路线是：

```
from("direct:start")
.to("http://myhost/mypath"); 
```

我用了 ：

```
ProducerTemplate template; 
template.sendBody("direct:start", "This is a test message"); 
```

发送交换。我收到以下异常：

```
No consumers available on endpoint: Endpoint[direct://start]. 
```

如何在 direct:start 端点中接收相同的交换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-08T18:04:02.987

您收到此错误的原因是您没有配置`Route`从`direct:start`.

如果您已经配置了`Route`，但在原始查询中没有提及它，那么下一步要尝试的是首先启动 Camel 上下文，然后再调用该`sendBody`方法。

```
camelContext.start();
template.sendBody("direct:start", "This is a test message"); 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-23T02:15:18.617

我知道这是一个非常古老的问题。但是为仍然遇到此类问题的任何人写这篇文章。

场景：在 http GET 方法调用的过程中，我在过程中间从 DB 获取一些数据，并将数据作为消息发送给 artemis 生产者。

首先，如果你在 spring 中使用骆驼 - 你根本不需要创建任何骆驼上下文。因为 spring 足够聪明，可以通过以下依赖项为您创建骆驼上下文。

几个必要的依赖项：

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-artemis</artifactId>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-spring-boot-starter</artifactId>
    <version>2.24.2</version>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-jaxb-starter</artifactId>
    <version>2.24.2</version>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-jms</artifactId>
    <version>2.24.2</version>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-jackson-starter</artifactId>
    <version>2.24.2</version>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-core</artifactId>
    <version>2.24.2</version>
</dependency>
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-amqp</artifactId>
    <version>2.24.2</version>
</dependency> 
```

所以为了修复它，我创建了一个类，它从骆驼库中扩展了 RouteBuilder 类。在这个构建器中，我创建了一个虚拟消费者并使用它向实际生产者发送消息。我的目的地是一个 artemis 生产者端点。

```
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import org.apache.camel.LoggingLevel;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.jackson.JacksonDataFormat;
import org.apache.camel.spi.DataFormat;
import org.springframework.stereotype.Component;

@Component
public class MyRouteBuilder extends RouteBuilder {

    private DataFormat marshalDataFormat;

    public MyRouteBuilder(ObjectMapper objectMapper) {
        objectMapper.registerModule(new JavaTimeModule());
        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
        marshalDataFormat = new JacksonDataFormat(objectMapper, MyClass.class);
    }

    @Override
    public void configure() throws Exception {
        from("direct:imaginary-consumer")
                .marshal(marshalDataFormat)
                .log(LoggingLevel.INFO, "Message ready to send is ${body}")
                .to("producer:message-data")
                .log(LoggingLevel.INFO, "Message has been sent successfully to topic.");
    }

} 
```

下面的代码片段在任何带有消息正文的实现类中。此方法获取消息数据并将其发送给我们在 MyRouteBuilder 类中创建的虚构/虚拟消费者。路由器类被调用并将消息发送到目的地（此处为生产者）。它也可以是 http 端点。

```
@Autowired
private ProducerTemplate producerTemplate;

public void sendMessage(Map<String, MyClass> messageBody) {
   producerTemplate.sendBody("direct:imaginary-consumer", messageBody);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T05:56:32.263

这也发布在 Apache Camel 邮件列表中，正在讨论它的活动。 [http://camel.465427.n5.nabble.com/ProducerTemplate-and-direct-start-in-camel-tp5730558.html](http://camel.465427.n5.nabble.com/ProducerTemplate-and-direct-start-in-camel-tp5730558.html)

# ninject - 如何迭代 Ninject StandardKernel 的已配置绑定以进行调试？

> ID：15892367
> 
> 赞同：6
> 
> 时间：2013-04-09T02:38:10.723
> 
> 标签：ninject, ioc-container, autowired

在我的 Ninject 绑定模块中，

```
public class CarModule : NinjectModule 
{
    public override void Load()
    {
        Kernel.Bind(scanner => scanner.FromThisAssembly().SelectAllClasses()
              .InheritedFrom<ICar>().BindAllInterfaces());

        foreach (var binding in kernel.GetBindings(typeof(ICar)))
        {
           Trace.WriteLine(string.Format("[{0}] Service bound to [{1}]",
                        binding.Service.Name,
                        binding.Target.GetType().Name));
        }

        // Output looks like: 
        //[ICar] Service bound to [BindingTarget]
        //[ICar] Service bound to [BindingTarget]
        //[ICar] Service bound to [BindingTarget]
    }
} 
```

我需要进行健全性检查以查看已成功绑定到我的服务的类型。我无法访问**绑定类型的类型名称**。而不是`[BindingTarget]`, 我想看到`[Mercedes]`, `[Ferrari]`, 等等...

**有没有好的和/或常见的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-12T10:36:28.970

在您的 IocKernel 中，我只需添加一个方法来获取给定类型 T 的所有实例，并在加载您的模块后调用它：

```
 public static class IocKernel
    {
        private static StandardKernel _kernel;                         

        public static IEnumerable<T> GetAll<T>()
        {
            return _kernel.GetAll<T>();
        }    

        public static void Initialize(params INinjectModule[] modules)
        {
            if (_kernel == null)
            {
                _kernel = new StandardKernel(modules);

                List<ICar> bindingsList= _kernel.GetAll<ICar>().ToList();
                foreach(ICar binding in bindingsList)
                { 
                    Trace.WriteLine(string.Format("Service bound to [{1}]", binding.GetType().Name)
                }
            }
        }              
    } 
```

# c# - 是否可以跟踪所有传出的 WCF 调用？

> ID：15892373
> 
> 赞同：0
> 
> 时间：2013-04-09T02:38:49.250
> 
> 标签：c#, .net, wcf, reflection

我们的应用程序调用外部服务，例如

```
//in client factory
FooServiceClient client = new FooServiceClient(binding, endpointAddress);

//in application code
client.BarMethod(); //or other methods 
```

是否可以跟踪所有这些调用（例如通过事件或类似的东西），以便应用程序可以收集调用次数、响应时间等统计信息？请注意，我的应用程序本身需要访问这些值，而不仅仅是写入日志文件。

我能想到的是创建一个 VisualStudio 生成的 FooServiceClient 的子类，然后添加这样的代码

```
override void BarMethod()
{
    RaiseStart("BarMethod");
    base.BarMethod();
    RaiseEnd("BarMethod);
} 
```

RaiseStart 和 RaiseEnd 方法将引发我的代码将监听的事件。

但这似乎很繁琐（因为要覆盖的方法很多）并且有很多重复的代码，我的代码每次服务合同更改时都需要更改等等。有没有更简单的方法来实现这一点，例如通过使用反射来创建子类或通过利用 WCF 中的内置方法（如果有）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:43:19.470

我首先要看的是服务器性能监视器中可用的计数器是否可以为您提供所需的反馈。为 ServiceModel 端点、操作和服务的各种指标内置了计数器。这是更多信息[http://msdn.microsoft.com/en-us/library/ms735098.aspx](http://msdn.microsoft.com/en-us/library/ms735098.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:21:19.443

您可以尝试构建[IClientMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.iclientmessageinspector.aspx)的实现，它有一个在发送请求之前和收到回复时调用的方法。您可以在这些方法中检查消息、制作日志等。

您提供[IEndpointBehavior](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iendpointbehavior.aspx)的实现，它应用您的消息检查器，然后将端点行为添加到您的代理客户端实例。

```
client.Endpoint.Behaviors.Add(new MyEndpointBehavior()) 
```

查看 MessageInspectors 和 EndpointBehaviors 的文档，有许多不同的应用方式（属性、代码、端点 xml 配置），我不记得我的头顶适用于哪个，因为还有 IServiceBehavior 和 IContractBehavior。我确实知道端点行为可以添加到客户端代理集合中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:18:19.370

我找到了一种使用动态代理的简单方法，例如[Castle 的 Dynamic Proxy](http://www.castleproject.org/projects/dynamicproxy/)。

首先，使用工厂方法生成您的客户端对象

```
IFooClient GetClient()
{        
    FooClient client = new FooClient(); //or new FooClient(binding, endpointAddress); if you want
    ProxyGenerator pg = new ProxyGenerator();
    return pg.CreateInterfaceProxyWithTarget<IFoo>(client, new WcfCallInterceptor());
} 
```

并定义拦截器

```
internal class WcfCallInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        try
        {
            RaiseStart(invocation.Method.Name);
            invocation.Proceed();
        }
        finally
        {
            RaiseEnd(invocation.Method.Name);
        }
    }

    //you can define your implementation for RaiseStart and RaiseEnd

 } 
```

我还可以根据需要更改拦截方法，例如，我可以添加一个 catch 块来调用不同的处理程序，以防方法抛出异常等。

# webgl - 如何使用高 DPI 设备渲染 WebGL 内容？

> ID：15892387
> 
> 赞同：7
> 
> 时间：2013-04-09T02:40:11.053
> 
> 标签：webgl

设置 WebGL 以呈现高每英寸点数显示器（例如 macbook 视网膜或像素 chromebook）上的所有本机像素的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T03:22:43.777

对于 WebGL，它相对简单。

```
var desiredCSSWidth = 400;
var desiredCSSHeight = 300;
var devicePixelRatio = window.devicePixelRatio || 1;

canvas.width  = desiredCSSWidth  * devicePixelRatio;
canvas.height = desiredCSSHeight * devicePixelRatio;

canvas.style.width  = desiredCSSWidth  + "px";
canvas.style.height = desiredCSSHeight + "px"; 
```

见[http://www.khronos.org/webgl/wiki/HandlingHighDPI](http://www.khronos.org/webgl/wiki/HandlingHighDPI)

有符合这些规则的一致性测试。具体来说，不允许浏览器更改 WebGL 画布的画布后备存储的大小。

对于常规的 2D 画布，它不那么简单，但这不是问题所在。

# ios - iOS - 以独特的方式聚合抓取的数据，我会被拒绝吗？

> ID：15892388
> 
> 赞同：0
> 
> 时间：2013-04-09T02:40:35.093
> 
> 标签：ios, screen-scraping, appstore-approval

我正在构建一些服务，这些服务将从多个网站上抓取数据并存储到数据库中。然后，我使用服务将这些数据调用到 iOS 应用程序中，并以对用户有用的有组织的方式显示它。我的应用会因为这项政策而被拒绝吗？

> 12.3
> 
> 只是网络剪辑、内容聚合器或链接集合的应用程序可能会被拒绝

我没有使用任何子浏览器等。当用户在应用程序中查看数据时，他们可能会单击链接以单独转到 Safari 中的特定网页，但没有“购买”按钮等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:45:53.303

只要您为内容增加一些价值，我认为您没有问题。看动画书；它基本上是重新散列人们的网络数据，但它是一种有用的方式。聚合本身并不坏，我认为苹果存在问题的地方在于不努力整理或关联数据的人。

tl;dr：这取决于你如何实现你的应用程序。

# ios - 没有main函数的iOS可执行文件

> ID：15892395
> 
> 赞同：2
> 
> 时间：2013-04-09T02:41:07.087
> 
> 标签：ios, objective-c, reverse-engineering, ida

我创建了一个测试应用程序，然后导出为 IPA 文件。我使用 IDA pro 查看可执行二进制文件。我发现main函数是由start subsroutine调用的：

```
BLX  _main 
```

所以我得出结论，一个 mach-o 可执行文件的入口点是 start 子程序，它最终会调用 main 函数。

但是，当我尝试打开其他应用程序的可执行文件（我使用 Clutch 抓取的）时，我发现根本没有 _main 函数，而是类似 sub_2A4C 之类的东西。

我想知道为什么会有这样的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:51:48.317

你的结论不对。入口点确实是 st​​art 子例程，start 子例程最终会调用您代码中声明的 main 函数也是如此。但是，如果您在 Xcode 构建设置中的“部署后处理”和“剥离链接产品”选项中选择“是”，您的符号将被条带化，因此您将不再将主函数视为 _main，而是像 sub_2A4C 那样混淆。

# xml - 如何将时间绑定到段落？

> ID：15892399
> 
> 赞同：0
> 
> 时间：2013-04-09T02:41:37.730
> 
> 标签：xml, file, indexing, data-structures

我正在开发一些应该将时间绑定到任何文本（UTF-8）的每一段的应用程序。

所以它应该是一种索引文件，我们可以从一个段落导航到另一个段落。

在这里，我遇到了索引文件结构......

我猜想使用一些 XML

```
<paragraph start="00:00:05">
CHAPTER I
</paragraph>
<paragraph start="00:00:08">
Down the Rabbit-Hole
</paragraph>

<paragraph start="00:00:11">
Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, `and what is the use of a book,' thought Alice `without pictures or conversation?'
</paragraph> 
```

基本上我必须保留时间列表和一些文本标签（以便查找和选择段落）。

我目前的解决方案是创建自定义对象（[实际上是 Dictionary](https://stackoverflow.com/questions/2056098/how-can-i-serialize-an-object-with-a-dictionarystring-object-property)），然后通过[Binary Writer](https://stackoverflow.com/questions/6759604/using-binarywriter-on-an-object)保存它，当我在此之后阅读它时，我将反序列化它。

但我不确定从技术上讲这种方法是否正确。

这是我的问题：

1.  我必须保留多少文本才能找到一个段落？

2.  有没有比 XML 更好的结构来实现这个东西？

有什么线索吗？

# jquery - 我被面包屑 jQuery 困住了

> ID：15892414
> 
> 赞同：0
> 
> 时间：2013-04-09T02:43:08.883
> 
> 标签：jquery

我想在我的网站中用 jQuery 创建面包屑。但我被困住了。

这是我的编码如下：

```
<ul id="bc" class="bc">
     <li><a href="www.test.com/index.php">Home</a></li>
     <li><a href="www.test.com/about.php">About us</a>
         <ul>
            <li><a href="www.test.com/1.php">1</a></li>
            <li><a href="www.test.com/2.php">2</a></li>
        </ul>
    </li> 
```

```
$(document).ready(function(){
    var str=location.href.toLowerCase();
    $(".bc li a").each(function() {
      if (str.indexOf($(this).attr("href").toLowerCase()) > -1) {
           $("li.highlight").removeClass("highlight");
           $(this).parent().addClass("highlight");
           var outerNav = $(this).parent().parent().parent();
           var outerNav2 = $(this).parent().parent().parent().parent().parent();

           if(outerNav.is("li")) {
              outerNav.addClass("highlight");
           }
           if(outerNav2.is("li")) {
              outerNav2.addClass("highlight");
           }
           document.title=$(this).text();
      }
    });

}) 
```

我需要这样的：

当我点击关于我们时：

首页-->关于我们

当我点击 1 时：

首页-->关于我们-->1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:32:44.687

尝试

```
$(function() {

    var str = location.href.toLowerCase();

    var el = $('.bc li a[href="' + str + '"]').parent();
    if (el.length) {
        var els = [];
        do {
            el.addClass('highlight');
            els.push(el);
            el = el.parent().closest('li');
        } while (el.length && !el.parent().is('.bc'));
        el.addClass('highlight');

        while (el.length) {
            els.push(el);
            el = el.prev();
        }

        var arr = $.map(els, function(v, i) {
                    return $('a', v).text();
                }).reverse();
        document.title = arr.join('-->');
    }

}); 
```

演示：[小提琴](http://plnkr.co/edit/IFcxaM6M6UUVYm9pBFZ6?p=preview)

# gcc - ARM GCC 编译错误 (Windows 7)

> ID：15892417
> 
> 赞同：0
> 
> 时间：2013-04-09T02:43:47.440
> 
> 标签：gcc, arm, cross-compiling, gnu

这是我输入的命令及其吐出的内容：不幸的是，谷歌并没有太多帮助，但我已经尝试了几件事（根据我非常初学者的知识），但我无法解决它。

```
C:\Users\Z\workspace\TEST\src>gcc main.c
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-exit.o): In function `exit':

exit.c:(.text.exit+0x2c): undefined reference to `_exit'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-sbrkr.o): In function `_sbrk_r':

sbrkr.c:(.text._sbrk_r+0x18): undefined reference to `_sbrk'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-writer.o): In function `_write_r':

writer.c:(.text._write_r+0x20): undefined reference to `_write'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-closer.o): In function `_close_r':

closer.c:(.text._close_r+0x18): undefined reference to `_close'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-fstatr.o): In function `_fstat_r':

fstatr.c:(.text._fstat_r+0x1c): undefined reference to `_fstat'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-isattyr.o): In function `
_isatty_r':

isattyr.c:(.text._isatty_r+0x18): undefined reference to `_isatty'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-lseekr.o): In function `_lseek_r':

lseekr.c:(.text._lseek_r+0x20): undefined reference to `_lseek'
c:/program files (x86)/gnu tools arm embedded/4.7 2013q1/bin/../lib/gcc/arm-none
-eabi/4.7.3/../../../../arm-none-eabi/lib\libc.a(lib_a-readr.o): In function `_read_r':

readr.c:(.text._read_r+0x20): undefined reference to `_read'
collect2.exe: error: ld returned 1 exit status 
```

main.c 包含以下内容：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[]) {
    puts("!!!Hello World!!!"); /* prints !!!Hello World!!! */
    return EXIT_SUCCESS;
} 
```

`gcc -v`返回版本信息所以路径是正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:31:15.867

您是在为运行 linux 的 ARM7 或 ARM9 或 ARM9 开发吗？您需要为其中的每一个使用不同的工具链。

好像您正在为 ARM7 开发（查看编译器可执行文件名称），如果不是，那么您可能使用了错误的编译器。

问题似乎是您没有正确设置编译器工具链，它需要正确安装并设置正确的路径。

我有一些关于设置 arm YAGARTO（arm-gcc 的特定发行版）的说明：（[http://www.electronicsfaq.com/2012/11/blinky-and-printf-on-netduino-using.html](http://www.electronicsfaq.com/2012/11/blinky-and-printf-on-netduino-using.html)）

我使用上面有 ARM7 的[netduino板。](http://netduino.com/)

# c# - 在 C# Windows Phone 7 应用程序中写入隔离存储区文件的字节数组无效

> ID：15892419
> 
> 赞同：0
> 
> 时间：2013-04-09T02:43:58.030
> 
> 标签：c#, .net, windows-phone-7.1, isolatedstorage, binarywriter

我有一个 C# Windows Phone 7.1 应用程序，它从外部 Web 服务器下载 PDF 文件，然后（尝试）将其作为文件保存到隔离存储区域。我尝试了几种不同的方法来完成这项工作，但是文件总是以大约 30% 的大小结束，当我在文本编辑器中打开它时，而不是在文件开头看到通常的“PDF”字符后跟编码的字符，我看到基本上是垃圾。我使用的测试文件应该是 161k，但是当我使用[独立存储资源管理器](http://wp7explorer.codeplex.com/)查看文件时，它是 271k。

首先，我将文件下载到字符串中。我此时在调试器中检查了字符串，它确实包含正确的值，并且长度正确。当我尝试将其写入隔离的存储区域时，就会出现问题。我用相同的无效结果尝试了**StreamWriter**和**BinaryWriter 。**结果文件的内容似乎是一长串的垃圾字符。请注意，如果文件存在，我将删除它以防万一，然后再写出内容。下面是我使用**BinaryWriter**版本的代码。怎么了？

```
async public static Task URLToFileAsync(
                                string strUrl, 
                                string strDestFilename, 
                                IProgress<int> progress, 
                                CancellationToken cancelToken)
{
    strUrl = strUrl.Trim();

    if (String.IsNullOrWhiteSpace(strUrl))
        throw new ArgumentException("(Misc::URLToFileAsync) The URL is empty.");

    strDestFilename = strDestFilename.Trim();

    if (String.IsNullOrWhiteSpace(strDestFilename))
        throw new ArgumentException("(Misc::URLToFileAsync) The destination file name is empty.");

    // Create the isolated storage file.
    // FileStream fs = Misc.CreateIsolatedStorageFileStream(strDestFilename);
    IsolatedStorageFile isoStorage = IsolatedStorageFile.GetUserStoreForApplication();

    // Delete the file first.
    if (isoStorage.FileExists(strDestFilename))
        isoStorage.DeleteFile(strDestFilename);

    IsolatedStorageFileStream theIsoStream = isoStorage.OpenFile(strDestFilename, FileMode.Create);

    FileStream fs = theIsoStream;

    // If the stream writer is NULL, then the file could not be created.
    if (fs == null)
        throw new System.IO.IOException("(Misc::URLToFileAsync) Error creating or writing to the file named: " + strDestFilename);

    BinaryWriter bw = new BinaryWriter(fs);

    try
    {

        // Call URLToStringAsync() to get the web file as a string first.
        string strFileContents = await URLToStringAsync(strUrl, progress, cancelToken);

        // >>>> NOTE: strFileContents looks correct and is the correct size.

        // Operation cancelled?
        if (!safeCancellationCheck(cancelToken))
        {
            // Note.  BinaryWriter does not have an Async method so we take the hit here
            //  to do a synchronous operation.
            //  See this Stack Overflow post.
            // http://stackoverflow.com/questions/10315316/asynchronous-binaryreader-and-binarywriter-in-net

            // >>>> NOTE: strFileContents.ToCharArray() looks correct and is the correct length.
            bw.Write(strFileContents.ToCharArray(), 0, strFileContents.Length);
        } // if (safeCancellationCheck(cancelToken))
    }
    finally
    {
        // Make sure the file is cleaned up.
        bw.Flush();
        bw.Close();

        // Make sure the file is disposed.
        bw.Dispose();
    } // try/finally

    // >>>> NOTE: output file in Isolated Storage Explorer is the wrong size and contains apparently junk.
} // async public static void URLToFileAsync 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:10:54.737

您不能将二进制文件下载到字符串中。如您所见，结果将不正确。

请参阅此答案，该答案演示了如何将二进制文件下载到隔离存储：[https ://stackoverflow.com/a/6909201/1822514](https://stackoverflow.com/a/6909201/1822514)

# c++ - 在我的递归函数中跟踪计数（Collat z）

> ID：15892421
> 
> 赞同：1
> 
> 时间：2013-04-09T02:44:03.617
> 
> 标签：c++, recursion, collatz

我在尝试弄清楚如何跟踪我的递归函数在执行 collat​​z 函数时调用自身的次数时遇到了麻烦。我有函数定义：

```
template<class myType>
myType recursionSet<myType>::collatz(myType n)
{
    if(n == 1)
        return 1;
    else {
        if(n%2 == 1)
            return collatz(3*n+1);
        else
            return collatz(n/2);
    }
} 
```

我怎样才能跟踪这个函数调用自身的次数？我似乎无法为我的生活想出一个解决方案。谢谢！

参考 collat​​z 函数：[http ://www.xamuel.com/collat​​z-recursion/](http://www.xamuel.com/collatz-recursion/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:52:53.823

您正在尝试计算 Collat​​z 链的长度，不是吗。你知道现在你总是回来`1`吗？您应该修改代码以返回计数。这意味着将当前迭代添加到递归调用中：

```
template<class myType>
myType recursionSet<myType>::collatz(myType n)
{
    if(n == 1)
        return 1;
    else {
        if(n%2 == 1)
            return 1 + collatz(3*n+1);
        else
            return 1 + collatz(n/2);
    }
} 
```

# vba - Word宏判断文档是否包含高亮

> ID：15892425
> 
> 赞同：1
> 
> 时间：2013-04-09T02:44:52.887
> 
> 标签：vba, ms-word

如果文档包含任何突出显示，我正在尝试编写一个宏，当用户单击保存时显示一个弹出窗口（我将它作为 Sub FileSave() ）。到目前为止，消息框一切正常。不幸的是，我无法弄清楚 if 语句使用哪些条件来检查文档是否包含突出显示。

任何人都可以为此提供几行 VBA 帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:37:34.453

您只需以这种方式在文档内容中搜索突出显示的文本：

```
Sub SearchAnyHighlight()

Dim hiliRng As Range
Set hiliRng = ActiveDocument.Content

With hiliRng.Find
    .Highlight = True
    .Execute
End With

If hiliRng.Find.Found Then
    'to inform that something was found
    MsgBox "You can't close Active Document"
    'to remove all highlighted area <-- added after edition
    With hiliRng.Find
        .Replacement.Highlight = False
        .Execute "", Replace:=wdReplaceAll, Forward:=True, _
            ReplaceWith:="", Format:=True
    End With
End If

End Sub 
```

# actionscript-3 - 缩放 AVM1Movie 以在 as3 中与 BitmapData 一起使用

> ID：15892427
> 
> 赞同：0
> 
> 时间：2013-04-09T02:44:59.637
> 
> 标签：actionscript-3, flash

我有一个actionscript 2 SWF，我想导出到PNG，但是事实证明它在as3 中作为AVM1Movie 加载是相当麻烦的。

当您仅在普通的独立 Flash 播放器中加载 as2 swf 时，您可以右键单击 -> 放大，它可以很好地缩放，因为它会以该大小重新绘制矢量数据。但是，当我试图使 Loader 对象（包含加载的 as2 swf）缩放时，每当我将它绘制到 BitmapData 对象时，我都会得到 swf 的原始大小，周围有空格，而不是 swf缩放到新的维度。

我的代码如下所示：

```
var theFile:File = File(event.target);

var dis:DisplayObject = this.mLoader.content;
dis.width *=2;
dis.height *=2;

var bd:BitmapData = new BitmapData(dis.width, dis.height, true, 0x00000000);
trace("display object height and width is " + dis.width + " " + dis.height);
bd.draw(dis);

var stream:FileStream = new FileStream();
stream.open(theFile, FileMode.WRITE);
stream.writeBytes(PNGEncoder.encode(bd)); // needs as3corelib
stream.close();

Alert.show("saved to " + theFile.nativePath ); 
```

但是当我打开生成的 PNG 文件时，我得到了这个（红色显示透明背景）：

![结果图像](https://i.stack.imgur.com/oSh10.png)

有什么办法可以让我将 as2 swf 绘制到 BitmapData 时，它会像在 Flash 播放器中一样缩放它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:07:17.967

我相信您应该能够简单地使用 scaleX 和 scaleY 属性，而不是尝试将高度和宽度值倍增。

```
var dis:DisplayObject = this.mLoader.content;
//dis.width *=2;
dis.scaleX = 2;
//dis.height *=2;
dis.scaleY = 2; 
```

**编辑** 或者，由于上述内容对您不起作用，请尝试使用矩阵参数进行绘图调用。

```
var mat:Matrix = new Matrix();
mat.scale(2,2);
bd.draw(dis,mat); 
```

# php - 为 HTML 迭代一个数组

> ID：15892433
> 
> 赞同：0
> 
> 时间：2013-04-09T02:45:35.820
> 
> 标签：php, arrays, iteration

我有以下数组，但我不确定如何通过 a`foreach`突破，`key`以便可以在我的 HTML 中使用它，如下所示： `<?php echo $key['cat_id'];?>`

**PHP：**

```
<?php foreach($by_category_manufacturer as $key ):?>
      <pre><?php var_dump($key)?></pre>
  <?php endforeach;?> 
```

**大批：**

```
array(6) {
  [0]=>
  object(stdClass)#92 (5) {
    ["brand_name"]=>
    string(5) "Kioti"
    ["brand_id"]=>
    string(2) "10"
    ["image_id"]=>
    string(2) "23"
    ["cat_id"]=>
    string(1) "3"
    ["cat_name"]=>
    string(9) "Machinery"
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:51:00.140

如果您使用 json_decode 创建数组，请将第二个参数设置为`true`. 我假设这就是创建对象的方式？

```
$by_category_manufacturer = json_decode($json_string, true);

<?php foreach($by_category_manufacturer as $key => $object ):?>
    <pre><?php var_dump($object['cat_id'])?></pre>
<?php endforeach;?> 
```

如果不是 json，则将其转换为数组：`$by_category_manufacturer = (array)$by_category_manufacturer;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:51:04.843

[将 PHP 对象转换为关联数组](https://stackoverflow.com/questions/4345554/convert-php-object-to-associative-array)

将您的对象转换为关联数组，这可以递归完成

# php - php跨域错误 - 需要替换字符串？

> ID：15892434
> 
> 赞同：0
> 
> 时间：2013-04-09T02:45:39.110
> 
> 标签：php, cross-domain

我正在使用 php 脚本将 json 数据从另一个域传递到我的 javascript 文件。我的代码适用于大多数响应。但是，在某些情况下，会有更长的值，其中的行被“\r\n\r\n”分隔，在这些情况下，当我尝试解析结果时会出现错误。我认为可能是“\r\n\r\n”导致了错误，并希望在将它传递给我的 javascript 之前用我的 php 脚本中的空格替换该字符串，但我不确定如何 - 我是个新手。

php脚本：

> 回声“变种预测='”；
> 包括（' [http://ws1.airnowgateway.org/GatewayWebServiceREST/Gateway.svc/forecastbyzipcode?zipcode='.$zipcode.'&format=json&key=[myKey](http://ws1.airnowgateway.org/GatewayWebServiceREST/Gateway.svc/forecastbyzipcode?zipcode=) ]'）；
> 回声“';”;

javascript代码：

> $(document).ready(function() {
> $.get(url, function(data) {
> myData = JSON.parse(forecast);
> ... 等等。

我希望我可以在该 php 脚本中使用 str_replace，但我知道我设置错了，因为它是在 url 本身中替换，而不是响应数据：

> 回声“变种预测='”；
> include(str_replace("\r\n"," "," [http://ws1.airnowgateway.org/GatewayWebServiceREST/Gateway.svc/forecastbyzipcode?zipcode=](http://ws1.airnowgateway.org/GatewayWebServiceREST/Gateway.svc/forecastbyzipcode?zipcode=) " . $zipcode . "&format=json&key=[myKey]") );
> 回声“';”;

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:51:51.403

问题是 include 只是简单地回显了对 url 的调用结果。尝试使用`file_get_contents`：

```
echo "var forecast='";  
$res = file_get_contents("http://ws1.airnowgateway.org/GatewayWebServiceREST/Gateway.svc/forecastbyzipcode?zipcode=" . $zipcode . "&format=json&key=[myKey]");
echo str_replace("\r\n",$res); 
echo "';"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:52:04.287

您**永远不**应该使用`include`抓取外部 URL 以在您的应用程序中使用。您无法控制输出，因此您无法预测脚本的行为方式。

* * *

也就是说，不要使用 ，而是`include`考虑使用`curl`or `file_get_contents`。

看一个类似的问题，我看到那个 API 支持`JSONP`. 这正是您想要的，而您根本不必构建服务器端中继。

尝试将`callback`参数添加到请求 URL。您可以从原始页面中的 javascript 代码调用它，它将运行该`callback`值指定的函数。

# php - 拆分IP地址范围，IP地址在210937条记录后停止

> ID：15892437
> 
> 赞同：2
> 
> 时间：2013-04-09T02:46:11.903
> 
> 标签：php, ip

我有一个 IP 范围数据库，我正在使用下面的代码将范围拆分为各个 IP 地址。这工作正常，直到我得到 210937 条记录，然后代码停止拆分 IP 范围并开始插入 0.0.0.0。

我尝试删除一些 IP 地址，但即使 IP 地址不同，它仍会停在同一点。

```
 for ($ip = ip2long($ip1); $ip<=ip2long($ip2); $ip++)
 {
 $lip = long2ip($ip); 
```

任何建议，将不胜感激。

好的，这是减去数据库连接的完整代码。

```
 $query1 = "SELECT * FROM masteriplist";
  $result = mysql_query($query1);
  while($row = mysql_fetch_array($result))
  { 

   $ipe = $row['ip_end_range'];
   $ips = $row['ip_start_range'];

   $ip1 = "$ips";
   $ip2 = "$ipe";

   for ($ip = ip2long($ip1); $ip<=ip2long($ip2); $ip++)
    {
    $lip = long2ip($ip);

    mysql_query("INSERT INTO ip_master (ip) VALUES ('$lip')") 
    or die(mysql_error()); 

     }
     } 
```

好的调试代码返回以下

```
array(24) { 
  ["id"]=> string(2) "50" 
  ["ip_address"]=> string(12) "85.119.25.27"
  ["ip_start_range"]=> string(0) ""
  ["ip_end_range"]=> string(0) ""
  ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:08:08.510

看起来您正在处理单个 IP 地址而不是范围；可以通过以下方式处理两者：

```
if ($row['ip_start_range'] == '' || $row['ip_end_range'] == '') {
    $ip1 = $ip2 = $row['ip_address'];
} else {
    $ip1 = $row['ip_start_range'];
    $ip2 = $row['ip_end_range'];
} 
```

此外，您可以通过将`ip2long`调用移出循环来提高效率：

```
$start = ip2long($ip1);
$stop = ip2long($ip2);

for ($ip = $start; $ip <= $stop; $ip++) {
  // ...
} 
```

# javascript - 无法在 SlickGrid 单元格中放置按钮

> ID：15892440
> 
> 赞同：4
> 
> 时间：2013-04-09T02:46:30.057
> 
> 标签：javascript, slickgrid

我试图在其中一列的单元格中放置一个按钮，并在单击它时执行某些操作。

例如，我将这些行添加到 SlickGrid 示例 1 ( [http://mleibman.github.io/SlickGrid/examples/example1-simple.html](http://mleibman.github.io/SlickGrid/examples/example1-simple.html) )

首先到我添加的列数组：

```
 {id: "Report", name: "Report", field: "Report", width: 40, sortable: true, formatter:reportFormatter} 
```

然后我补充说：

```
 function reportFormatter(row, cell, value, columnDef, dataContext) {
          return "<input type='button' value='show' id='reportBtn'/>";
      }

      $('#reportBtn').click(function() {
          alert("hello");
      }); 
```

按钮出现在单元格中，但未调用单击事件！我一定是做错了什么，但我一辈子都想不通，谁能帮忙？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T07:52:14.853

slick.formatters.js

```
...
"btnForm": buttonsFormatter // add Slick.Formatters
..
  function buttonsFormatter(row, cell, value, columnDef, dataContext) {
      return  "<input type='button' value='"+value+"' id='btnForm' value2='"+row+"' value3='"+cell+"' onClick='fnBtnClick(this);'/>";
  } 
```

添加您的 html 脚本

```
function fnBtnClick( objBtn ){
 alert( "row::[" + objBtn.value2 + "]\n\ncell::[" + objBtn.value3 + "]" );      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-14T10:29:08.493

您应该使用网格事件而不是按钮事件，如下所示，

1.  将调用网格的onclick事件，
2.  检查单击的字段是否是您的按钮之一
3.  做你的动作

    ```
    grid.onClick.subscribe(function (e, args) {
      //check if your button was clicked  
      if ($(e.target).hasClass("btn")) {
            var item = dataView.getItem(args.row);
            ///do your action
        }

    }); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T14:47:07.087

使用预编译的模板光滑网格示例。添加属性，例如。ImageTrial，并在数据结构中用动态输入按钮填充属性。

```
<script type=" " id="testtemplate">
<div class="test">
    <b><%=ImageTrial%></b>
     <b><%=ImageTrial2%></b>
</div> 
```

```
dataForCell["ImageTrial"] = "<button type=\"button\" onclick=\"alert('a " + 1 + "')\">s</button>";

dataForCell["ImageTrial2"] = "<button type=\"button\" onclick=\"alert('b " + 2 + "')\">b</button>"; 
```

祝你好运

# string - 为什么`sData`是一个非零值？

> ID：15892442
> 
> 赞同：1
> 
> 时间：2013-04-09T02:46:38.240
> 
> 标签：string, search, lua, ptokax

代码的执行[在 eval.in 上](http://eval.in/15723)

```
sMessage = "<hjpotter92> +help|"
local _, _, sCmd, sData = sMessage:find( "%b<>%s[%+%-%*%/%!%#%?](%w+)%s?(.*)|" )
print( _, sData, sCmd  ) 
```

的输出`print`说 my`sData`是一个空字符串的值。

**为什么这个值不是`nil`？**我基于为这种情况创建了一个完整的项目`sData`，`nil`我发现事实并非如此。

* * *

我已经通过使用这个块解决了这个问题

```
if sData:len() == 0 then 
    sData = nil 
end 
```

所以，我不是在寻找解决方案来完成这项工作。我只是问，为什么它不是一个`nil`值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:53:34.767

为什么应该这样`nil`？
您正在成功匹配`.*`空字符串的模式。
`nil`表示“未找到匹配项”。
[例子](http://eval.in/15748)

# safari - 在导航时保持 Safari 远程调试打开

> ID：15892444
> 
> 赞同：10
> 
> 时间：2013-04-09T02:47:01.737
> 
> 标签：safari, ios-simulator, remote-debugging

我正在使用 Safari 的远程调试来检查我的模拟器中 iPhone 应用程序中的 webview。问题是远程调试窗口会在应用程序关闭后立即关闭。

我有一个动作可以切换到另一个应用程序并返回，但我无法在切换之前立即读取 console.log 消息，因为我不够快，并且在返回我的应用程序后我无法立即读取日志，因为我必须先重新打开控制台。

有没有办法让它保持打开状态，这样我至少可以在切换应用程序之前看到最后的日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T23:23:14.103

这是一个启动 Safari Inspector 的 AppleScript。您可以将其导出为可执行应用程序，并将其放在您的 Dock 中，只需单击一下即可进入 Inspector，或者在 Xcode 的构建阶段启动它。

```
tell application "Safari"
    activate
    delay 2
    tell application "System Events"
        tell process "Safari"
            set frontmost to true
            click menu item 2 of menu 1 of menu item "iPad Simulator" of menu 1 of menu bar item "Develop" of menu bar 1
        end tell
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-12T05:24:13.087

这是包裹在[Alfred Workflow](http://www.alfredapp.com/)中的 James 的答案，-g- ... 检查一下

也适用于 IPHONE BRAH

```
on alfred_script(q)
tell application "Safari"
    activate
    delay 0.5
    tell application "System Events"
        tell process "Safari"
            set frontmost to true
            try
                click menu item 2 of menu 1 of menu item "iPhone Simulator" of menu 1 of menu bar item "Develop" of menu bar 1
            end try
            try
                click menu item 2 of menu 1 of menu item "iPad Simulator" of menu 1 of menu bar item "Develop" of menu bar 1
            end try
        end tell
    end tell
end tell
end alfred_script 
```

# jaxb - 可在 @XmlAnyElement 上取消

> ID：15892446
> 
> 赞同：1
> 
> 时间：2013-04-09T02:47:05.883
> 
> 标签：jaxb

我为 JAXB 制作了一个复数元素的通用类。

```
@XmlTransient
public abstract class Plural<S> {

    @XmlAnyElement(lax = true)
    private Collection<S> singulars;
} 
```

通过以下课程，

```
@XmlRootElement
public class Item {

    //@XmlValue // problem with xsi:nill and ""
    @XmlElement(nillable = true)
    private String name;
}

@XmlRootElement
public class Items extends Plural<Item> {
} 
```

当我声明`name`as`@XmlEement(nilalble = true)`时，它工作正常。但是在和`@XmlValue`之间产生了一些问题。`xsi:nil``""`

有什么方法可以设置`nillable = true`吗`@XmlAnyElement`？

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ---------

当`Item#name`使用 注释时`@XmlElement`，成功地遵循 XML 编组和解组。

```
<items xmlns="http://jinahya.googlecode.com/xml/bind/test">
    <item id="-4939700912221365683">
        <name xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
    </item>
    <item>
        <name>name</name>
    </item>
    <item>
        <name xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
    </item>
    <item id="-8544902644460968391">
        <name xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
    </item>
    <item id="525642804765733165">
        <name xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
    </item>
</items> 
```

当`Item#name`使用 注释时`@XmlValue`，输出 XML 编组和解组，但在相等性测试中失败。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<items xmlns="http://jinahya.googlecode.com/xml/bind/test">
    <item id="7812630870400466385">name</item>
    <item>name</item>
    <item id="-1067677982428177088"/>
    <item id="5609376399324841172">name</item>
    <item id="-4755856949417090129"/>
</items> 
```

每个元素似乎`xsi:nil`都省略了。`item`所以`Item#equals`在每个项目上都失败了。被解析为空元素的`""`without`xsi:nill`每个都来自`null`s。只是`@XmlValue`问题吗？`@XmlAnyElement(lax = true)`@Blaise Doughan 我还是从你的博客文章中了解到的。谢谢。

这就是我想要的。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<items xmlns:xsi="..." xmlns="http://jinahya.googlecode.com/xml/bind/test">
    <item id="7812630870400466385">name</item>
    <item>name</item>
    <item id="-1067677982428177088" xsi:nil="true">
    <item id="5609376399324841172">name</item>
    <item id="-4755856949417090129" xsi:nil="true">
</items> 
```

# r - 在excel或R中从列到行的数据透视表

> ID：15892449
> 
> 赞同：0
> 
> 时间：2013-04-09T02:47:21.397
> 
> 标签：r, excel, pivot, reshape

我有一个这样的表头

```
Id x.1960 x.1970 x.1980 x.1990 x.2000 y.1960 y.1970 y.1980 y.1990 y.2000 
```

我想将此表旋转为

```
Id time x y 
```

在 Excel 或 R 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:13:42.127

像这样使用 base R 的东西`reshape`：

先获取一些数据

```
test <- read.table(text="Id x.1960 x.1970 x.1980 x.1990 x.2000 y.1960 y.1970 y.1980 y.1990 y.2000
a 1 2 3 4 5 6 7 8 9 10
b 10 20 30 40 50 60 70 80 90 100",header=TRUE) 
```

然后重塑：

```
reshape(
  test,
  idvar="Id",
  varying=list(2:6,7:11),
  direction="long",
  v.names=c("x","y"),
  times=seq(1960,2000,10)
) 
```

或者让我们`reshape`根据`.`分隔符自动猜测名称：

```
reshape(
  test,
  idvar="Id",
  varying=-1,
  direction="long",
  sep="."
) 
```

导致：

```
 Id time  x   y
a.1960  a 1960  1   6
b.1960  b 1960 10  60
a.1970  a 1970  2   7
b.1970  b 1970 20  70
a.1980  a 1980  3   8
b.1980  b 1980 30  80
a.1990  a 1990  4   9
b.1990  b 1990 40  90
a.2000  a 2000  5  10
b.2000  b 2000 50 100 
```

# android - Android：SQLite 数据库查询不返回任何记录

> ID：15892450
> 
> 赞同：0
> 
> 时间：2013-04-09T02:47:23.517
> 
> 标签：android, sqlite

我使用 Firefox SQLite 管理器创建并填充了一个 SQLite 数据库。我将 .sqlite 文件复制到我的 Android 项目的 assets 文件夹中。

我的目标是使用这些记录来填充微调器。当我查询数据库时，光标显示列但没有记录。

我的`DatabaseHandler`类扩展`SQLiteOpenHelper`并包含 和的`onCreate`方法。`onUpgrade``getAllOffices`

```
public List<String> getAllOffices(){ 
    List<String> offices = new ArrayList<String>(); 

    // Select All Query 
    String selectQuery = "SELECT OfficeId as _id, OfficeName FROM " + TABLE_OFFICE; 

    SQLiteDatabase db = this.getReadableDatabase(); 
    Cursor cursor = db.rawQuery(selectQuery, null); 

    // looping through all rows and adding to list 
    if (cursor.moveToFirst()) { 
        do { 
            offices.add(cursor.getString(1)); 
        } while (cursor.moveToNext()); 
    } 

    // closing connection 
    cursor.close(); 
    db.close(); 

    // returning offices 
    return offices; 
} 
```

任何关于为什么不返回记录的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:18:19.890

尝试这个：

```
public List<String> getAllOffices(){ 
    List<String> offices = new ArrayList<String>(); 

    // Select All Query 
    String selectQuery = "SELECT OfficeId as _id, OfficeName FROM " + TABLE_OFFICE; 

    SQLiteDatabase db = this.getReadableDatabase(); 
    Cursor cursor = db.rawQuery(selectQuery, null); 

    // looping through all rows and adding to list 
    if (cursor.moveToFirst()) { 
        do { 
            offices.add(cursor.getString(cursor.getColumnIndex("_id"))); 
        } while (cursor.moveToNext()); 
    } 

    // closing connection 
    cursor.close(); 
    db.close(); 

    // returning offices 
    return offices; 
} 
```

基本上它只会确保您使用正确的列索引。否则，如果您使用的是 eclipse，请尝试使用 cellobject 插件浏览数据库并确保您的表按预期填充： [http ://marketplace.eclipse.org/content/cellobject-sqlite-xml-browser#.UWOU5RaBD3g](http://marketplace.eclipse.org/content/cellobject-sqlite-xml-browser#.UWOU5RaBD3g)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:48:02.727

请试试这个，可能对你有用。

```
public List<String> getAllOffices(){ 
    List<String> offices = new ArrayList<String>(); 

    // Select All Query 
    String selectQuery = "SELECT * FROM " + TABLE_OFFICE; 

    SQLiteDatabase db = this.getReadableDatabase(); 
    Cursor cursor = db.rawQuery(selectQuery, null); 
    System.out.println("CURSOR SIZE:"+cursor.getCount())
    // looping through all rows and adding to list 
    if(cursor.getCount()!=0){
        if (cursor.moveToFirst()) { 
            do { 
                System.out.println(cursor.getString(c.getColumnIndex("as per your db column name"));
            } while (cursor.moveToNext()); 
        }
    }   

    // closing connection 
    cursor.close(); 
    db.close(); 

    // returning offices 
    return offices; 
} 
```

首先，如果您做得对，您只需查看控制台输出，然后添加到您的`office bean`

# jquery - 使用 jQuery 激活选项卡

> ID：15892459
> 
> 赞同：0
> 
> 时间：2013-04-09T02:48:42.150
> 
> 标签：jquery, html, css, twitter-bootstrap

我有一个使用 jQuery 创建、删除和重命名选项卡的系统。我正在尝试对其进行设置，以便在创建新选项卡时激活该选项卡，但似乎没有任何效果。我在 Twitter Bootstrap 页面上尝试了 Tab API，但它似乎不起作用。

jsFiddle：http: [//jsfiddle.net/BenedictLewis/eYePA/](http://jsfiddle.net/BenedictLewis/eYePA/)

我试过的：

```
$('#myTab a[href="#profile"]').tab('show'); // Select tab by name
$('#myTab a:first').tab('show'); // Select first tab
$('#myTab a:last').tab('show'); // Select last tab
$('#myTab li:eq(2) a').tab('show'); // Select third tab (0-indexed) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:56:14.740

短版 - 您忘记添加`id`到链接。这就是为什么`$('#tab' + tabCount).tab('show');`不起作用。

如果将第 5 行更改为

```
.append($('<li><a href="#tab' + tabCount + '" id="tablnk' + tabCount + '" data-toggle="tab">New Page ' + tabCount + ' <i class="icon-remove tab-remove"></i></a></li>')); 
```

和第 8 行到

```
$('#tablnk' + tabCount).tab('show'); 
```

它工作正常。

# python - django 从查询集中返回外键对象？

> ID：15892460
> 
> 赞同：3
> 
> 时间：2013-04-09T02:49:01.540
> 
> 标签：python, django, django-models, django-queryset

所以我有三个模型

```
class Post(....

class Project(....

# have a many to many relationship
class ProjectPost(....
    post = ..... # foreignkey
    project = .... # foreignkey 
```

我要选择的数据集是给定 Project 对象的 Post 对象列表。

这是我尝试过的：

```
posts_list = ProjectPost.objects.filter(project=project_object).select_related("post") 
```

但这会返回一个 ProjectPost 对象列表，而不是 Post 对象列表。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:52:23.423

您可能想使用 ManyToManyField()

[https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)

你应该这样做：

```
class Post(models.Model):
    pass

class Project(models.Model):
    posts = models.ManyToManyField(Post) 
```

然后，如果你想访问项目的帖子，你可以这样做

```
project_obj.posts.all() 
```

您可以使用所有[Queryset](https://docs.djangoproject.com/en/dev/ref/models/querysets/)方法

如果您想访问帖子的项目，您可以这样做

```
post_obj.project_set.all() 
```

和以前一样，您可以使用所有 Queryset 方法。

如果出于任何原因你想这样做，你可以这样做：

```
post_list = ProjectPost.objects.filter(project=project_object).values('post') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T08:43:47.943

我自己最近遇到了这个问题，这就是我解决它的方法。如果有人可以评论我的解决方案是否有效，我会很高兴。

```
project_posts = ProjectPost.objects.filter(project=project_object).select_related("post")
posts_lists = map(lambda post: project.post, project_posts) 
```

现在posts_lists 中的对象类型正确。

# android - 如何在 zxing 中触发批量模式扫描

> ID：15892461
> 
> 赞同：4
> 
> 时间：2013-04-09T02:49:02.493
> 
> 标签：android, zxing

我读到有一个在 zxing 中启用批量模式扫描的键。我可以知道如何在 android 应用程序中启用此密钥吗？

我目前正在使用此类代码单独扫描条形码：

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_FORMATS", "PRODUCT_MODE,CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF");

startActivityForResult(intent, 0); // start the scan 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T13:37:16.307

我不认为 zxing 中没有“批量模式”的概念。

您当然可以在自己的应用程序中使用 zxing 来实现您正在寻找的行为。使用您在问题中已有的代码第一次启动扫描。将此声明添加到您的班级：

```
ArrayList<String> results; 
```

然后在开始扫描*之前*将其添加到 onCreate中以对其进行初始化：

```
results = new ArrayList<String>(); 
```

在 onActivityResult() 中，您可以将当前结果添加到 ArrayList 中，然后开始下一次扫描。

```
/*Here is where we come back after the Barcode Scanner is done*/
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
        if (resultCode == RESULT_OK) {
            // contents contains whatever the code was
            String contents = intent.getStringExtra("SCAN_RESULT");

            // Format contains the type of code i.e. UPC, EAN, QRCode etc...
            String format = intent.getStringExtra("SCAN_RESULT_FORMAT");

            // Handle successful scan. In this example add contents to ArrayList
            results.add(contents);

            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.putExtra("SCAN_FORMATS", "PRODUCT_MODE,CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF");
            startActivityForResult(intent, 0); // start the next scan
        } else if (resultCode == RESULT_CANCELED) {
            // User hass pressed 'back' instead of scanning. They are done.
            saveToCSV(results);
            //do whatever else you want.
        }
    }
} 
```

将它们保存到 CSV 文件超出了这个特定问题的范围，但是如果您环顾四周，您可以找到如何执行此操作的示例。把它留空作为一个练习供你学习。

# php - 如何使字符串中的对象包含打印对象

> ID：15892463
> 
> 赞同：0
> 
> 时间：2013-04-09T02:49:08.110
> 
> 标签：php, string, codeigniter, object

我有一些代码：

测试控制器：

```
 Class test extends CI_Controller{
            public function print_object(){
                 $x = (object) array('a'=>'A', 'b'=>'B', 'C');
                 echo '<pre>'.print_r($x, true).'</pre>';
            }
        } 
```

测试2控制器：

```
 Class test2 extends CI_Controller{
            public function get_printed_object(){
                 $url = "http://localhost/project/test/print_object";
                 (object) $str = file_get_contents($url);
                 echo $str->a; //won't make it. resulting error
            }
        } 
```

线

```
echo $str->a; 
```

结果是警告：尝试获取非对象的属性

我可以重新制作打印到字符串的 $x 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:01:47.360

您遇到的主要问题是`file_get_contents`返回带有 url 输出的字符串。`$str`因此只是一个字符串，即使演员表也不会改变这一点。

如果要将其转换为对象，则可以[json_encode](http://www.php.net/manual/en/function.json-encode.php)（或序列化）并在测试中输出。然后 test2 将不得不`json_decode($str)`重新创建对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:18:56.300

您应该使用本机`serialize()`和`unserialize()`功能。通过序列化一个对象，您将获得一个包含所有信息的类 json（它不是 json，但看起来像）字符串。反序列化时，您会获得序列化对象的克隆，并且可以以正常方式访问其方法和属性。

查看此功能的 php 手册：

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

最后一页是一个很酷的例子：

[http://php.net/manual/en/language.oop5.serialization.php](http://php.net/manual/en/language.oop5.serialization.php)

# java - 将扩展类从 jar 移动到应用程序

> ID：15892474
> 
> 赞同：0
> 
> 时间：2013-04-09T02:50:37.013
> 
> 标签：java, class, interface, jar

我有一个接口和两个类，如下所示。SkeletonInterface 和 SkeletonParent 是自动生成的。目前这三个文件都驻留在一个 jar 文件中，该文件部署到 web-inf/lib 下的 web 项目中。我需要将 SkeletenChild 从 jar 移动到 Web 项目中。我尝试这样做时遇到了问题。如何在 Web 项目中公开/访问我的实现类？

```
// auto generated interface
public interface SkeletonInterface{
    public int foo(int i){
    }
}

// auto generated class
public class SkeletenParent implements SkeletonInterface {
    public int foo(int i){
        // do not implement here 
    }
}

// Actual implementation class
public class SkeletenChild extends SkeletenParent{
    @override
    public int foo(int i){
        // want to implement here
    }
} 
```

# c++ - 访问冲突读取位置 0xC0000005 C++

> ID：15892477
> 
> 赞同：1
> 
> 时间：2013-04-09T02:51:04.580
> 
> 标签：c++

我的 add 函数显然有问题，因为它首先取消引用，因此首先没有指向任何内容。我只是不知道如何修复它，使其不是空指针。

```
 struct Node
    {
        int data;
        Node *next;
    };

    class LinkedList
    {
        Node *first;
        Node *last;
        int count;
        public:

        LinkedList()
        {
            first = NULL;
            last = NULL;
            count = 0;
        }

        void Add(int item)
        {
            if (first == NULL)
            {
                first->data = item;
                last->data = item;
                last->next = NULL;
                first->next = last;
                count = 1;
            }
            else
            {
                Node *newNode = new Node;
                newNode->data = last->data;
                newNode->next = last;
                last->data = item;
                last->next = NULL;
                count ++;
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T03:21:21.593

`if`和之间有很多共同的代码`else`。

```
 if (first == NULL)
        {
            first->data = item;
            last->data = item;
            last->next = NULL;
            first->next = last;
            count = 1;
        }
        else
        {
            Node *newNode = new Node;
            newNode->data = last->data;
            newNode->next = last;
            last->data = item;
            last->next = NULL;
            count ++;
        } 
```

在 中`if`，您`count`从`0`增加到`1`。在 中`else`，您*还*增加了它。

`count`总是**在**增加。所以你不需要输入两次。

```
 if (first == NULL)
        {
            first->data = item;
            last->data = item;
            last->next = NULL;
            first->next = last;
        }
        else
        {
            Node *newNode = new Node;
            newNode->data = last->data;
            newNode->next = last;
            last->data = item;
            last->next = NULL;
        }
        count ++; 
```

你也在他们两个`last->data`中设置`item`。

而你在他们两个中都设置`last->next`了`NULL`。

```
 if (first == NULL)
        {
            first->data = item;
            first->next = last;
        }
        else
        {
            Node *newNode = new Node;
            newNode->data = last->data;
            newNode->next = last;
        }
        last->data = item;
        last->next = NULL;
        count ++; 
```

`new Node`当它是第一个新节点时，您还忘记创建一个。

```
 if (first == NULL)
        {
            Node *newNode = new Node;   // Added
            first = newNode;            // Added
            last = newNode;             // Added
            first->data = item;
            first->next = last;
        }
        else
        {
            Node *newNode = new Node;
            newNode->data = last->data;
            newNode->next = last;
        }
        last->data = item;
        last->next = NULL;
        count ++; 
```

在`first->data = item`你的`if`是多余的。 `first`和那里一样`last`，并且`last->data = item`已经在发生。

```
 if (first == NULL)
        {
            Node *newNode = new Node;
            first = newNode; 
            last = newNode;
            // Removed
            first->next = last;
        }
        else
        {
            Node *newNode = new Node;
            newNode->data = last->data;
            newNode->next = last;
        }
        last->data = item;
        last->next = NULL;
        count ++; 
```

由于`first`和`newNode`具有**相同的值**，`if`我们可以互换使用变量名。

```
 if (first == NULL)
        {
            Node *newNode = new Node; 
            first = newNode;            // These two pointers are equal!
            last = newNode;
            newNode->next = last;       // (same pointer)
        }
        else
        {
            Node *newNode = new Node;
            newNode->data = last->data;
            newNode->next = last;
        }
        last->data = item;
        last->next = NULL;
        count ++; 
```

现在，您的**几乎所有内容**`else`也都在您的`if`. 都**可以**搬出去。

```
 Node *newNode = new Node; 
        if (first == NULL)
        {
            first = newNode;
            last = newNode;
        }
        else
        {
            newNode->data = last->data;
        }
        newNode->next = last;
        last->data = item;
        last->next = NULL;
        count ++; 
```

该代码现在也应该更容易理解了。教训：[不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T02:53:55.650

```
if (first == NULL)
{
    /* if first is NULL dereference it. Hooray! */
    first->data = item;
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:25:56.193

看看[链表](http://en.wikipedia.org/wiki/Linked_list)

细节很少，首先`first == NULL`需要先创建，将其插入链表并连接起来，有关一些算法，请参见链接文章。

我想说最简单的是带有`first *`可以指向自身的标头节点（而不是 ）的单链表，但是实现链表的方法有很多，这取决于您选择如何连接元素。

这取决于您所追求的，但是如果您只需要一些工作，那么您可以从[boost 侵入式循环 slist 算法](http://www.boost.org/doc/libs/1_53_0/doc/html/intrusive/node_algorithms.html)中学习，您只需使用数据和下一个指针定义自己的结构，告诉它如何访问下一个并使用提供的算法来做所有工作（链接和取消链接节点）。

# mysql - mysql 用子查询改进视图

> ID：15892479
> 
> 赞同：2
> 
> 时间：2013-04-09T02:51:09.673
> 
> 标签：mysql, performance, subquery, mysql-error-1349

我需要比较同一列中的行，所以我有以下 mysql 查询，它可以很好地给出预期的结果。

```
SELECT x.aord, 
       x.anode AS parent, 
       x.bnode AS child 
FROM   (SELECT a.ordinal               AS aord, 
               a.id_dt_graph_node_edge AS aid, 
               a.id_dt_graph_node      AS anode, 
               b.ordinal               AS bord, 
               b.id_dt_graph_node_edge AS bid, 
               b.id_dt_graph_node      AS bnode 
        FROM   dt_graph_node_edge a 
               JOIN dt_graph_node_edge b 
                 ON a.ordinal < b.ordinal) x 
       LEFT JOIN (SELECT a.ordinal               AS aord, 
                         a.id_dt_graph_node_edge AS aid, 
                         a.id_dt_graph_node      AS anode, 
                         b.ordinal               AS bord, 
                         b.id_dt_graph_node_edge AS bid, 
                         b.id_dt_graph_node      AS bnode 
                  FROM   dt_graph_node_edge a 
                         JOIN dt_graph_node_edge b 
                           ON a.ordinal < b.ordinal) y 
              ON x.aord = y.aord 
                 AND x.bord > y.bord 
WHERE  y.bord IS NULL 
ORDER  BY x.aord, 
          x.bord 
```

我发现由于错误 #1349，无法在此查询上创建视图。任何人都可以提出一种更好的方法来进行这样的查询，特别关注速度，实际上这个查询非常慢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:59:03.240

您无法`VIEW`从查询创建 a 的原因是它包含一个子查询。`VIEW`，根据文档，不能在查询中包含子`SELECT`查询。解决方法是在子查询上创建`VIEW`第一个，例如

```
CREATE VIEW firstSubquery
AS
SELECT a.ordinal               AS aord, 
       a.id_dt_graph_node_edge AS aid, 
       a.id_dt_graph_node      AS anode, 
       b.ordinal               AS bord, 
       b.id_dt_graph_node_edge AS bid, 
       b.id_dt_graph_node      AS bnode 
FROM   dt_graph_node_edge a 
       JOIN dt_graph_node_edge b 
         ON a.ordinal < b.ordinal;

CREATE VIEW secondSubquery
AS
SELECT  a.ordinal               AS aord, 
        a.id_dt_graph_node_edge AS aid, 
        a.id_dt_graph_node      AS anode, 
        b.ordinal               AS bord, 
        b.id_dt_graph_node_edge AS bid, 
        b.id_dt_graph_node      AS bnode 
FROM   dt_graph_node_edge a 
        JOIN dt_graph_node_edge b 
        ON a.ordinal < b.ordinal; 
```

`VIEW`并加入当前查询中新创建的，

```
CREATE VIEW finalVIEW
AS
SELECT x.aord, 
       x.anode AS parent, 
       x.bnode AS child 
FROM   firstSubquery x 
       LEFT JOIN secondSubquery y 
              ON x.aord = y.aord AND x.bord > y.bord 
WHERE  y.bord IS NULL 
ORDER  BY x.aord,  x.bord 
```

**PS：MySQL 中的 VIEWS 太可怕了**

# regex - 如何使用正则表达式获取 URL 的特定部分？

> ID：15892481
> 
> 赞同：0
> 
> 时间：2013-04-09T02:51:16.630
> 
> 标签：regex

说网址是`http://aa/bb/cc`. “aa”在段 1 中，“bb”在 2 中，“cc”在 3 中。正则表达式如何提取给定数量的段？（所以它会类似于`\2`，`\3`它指的是 URL 的那一部分。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:54:26.080

试试这个正则表达式：

```
http:/(?:/([^/]+))+ 
```

解释：

> ***`(subexpression)`*** 捕获匹配的子表达式并为其分配一个从零开始的序数。
> 
> ***`(?:subexpression)`*** 定义一个非捕获组。
> 
> ***`+`*** 匹配前一个元素一次或多次。
> 
> ***`[^character_group]`*** 否定：匹配任何不在`character_group`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:55:07.617

尝试这个：

```
http://(.*?)/(.*?)/(.*?) 
```

正则表达式`.*?`是“非贪婪”匹配。

# emacs - 如何让 latexmk 与 emacs 和 okular 一起工作

> ID：15892486
> 
> 赞同：1
> 
> 时间：2013-04-09T02:51:43.170
> 
> 标签：emacs, pdflatex, latexmk

我刚开始使用 emacs，所以我什至不知道我是否正确地这样做了。 `C-c C-c`然后提示说`Command [pdflatex]:`，所以我输入`latexmk`。这甚至是它所期待的吗？然后我给出以下错误：

```
Latexmk: Initialization file '/home/dustin/.latexmkrc' gave an error:
     Substitution pattern not terminated at (eval 10) line 1, <GEN0> chunk 1.

Latexmk: Stopping because of problem with rc file 
```

这是我的`.latexmk`文件：

```
$pdflatex = 'pdflatex -interaction=nonstopmode -file-line-error -synctex=1' -pdf %s; 
```

这是我的`.emacs`文件：

```
(add-to-list 'load-path "~/.emacs.d/plugins")
(setq py-install-directory "~/.emacs.d/plugins")
(require 'python-mode)

;; ========== Prevent Emacs from making backup files ==========                        

(setq make-backup-files nil)

;; ========== Enable Line Numbering ==========                                         

(line-number-mode 1)

;; ========== Set the fill column ==========                                           

(setq default-fill-column 80)

;; ===== Turn on Auto Fill mode automatically in all modes =====                       

;; Auto-fill-mode the the automatic wrapping of lines and insertion of                 
;; newlines when the cursor goes over the column limit.             

;; This should actually turn on auto-fill-mode by default in all major                 
;; modes. The other way to do this is to turn on the fill for specific modes           
;; via hooks.                                                                          

(setq auto-fill-mode 1)

;; ========= Set colours ==========                                                    

;; Set cursor and mouse-pointer colours                                                
(set-cursor-color "white")
(set-mouse-color "goldenrod")

;; Set region background colour                                                        
(set-face-background 'region "blue")

;; Set emacs background colour                                                         
(set-background-color "black")

(defun run-latexmk ()
  (interactive)
  (let ((TeX-save-query nil)
        (TeX-process-asynchronous nil)
        (master-file (TeX-master-file)))
    (TeX-save-document "")
    (TeX-run-TeX "latexmk"
         (TeX-command-expand "latexmk -pdflatex='pdflatex -file-line-error -synctex=1'\
                               -pdf %s" 'TeX-master-file)
                 master-file)
    (if (plist-get TeX-error-report-switches (intern master-file))
        (TeX-next-error t)
      (progn
    (demolish-tex-help)
    (minibuffer-message "latexmk: done."))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:26:29.707

您得到的错误是由于您的 .latexmkrc 文件。`-pdf`您可以使用等效的配置选项，而不是提供命令行选项`$pdf_mode = 1;`。此外，将源文件 , 附加`%s`到配置文件似乎会使 latexmk 感到困惑。因此，尝试使用：

```
$pdf_mode = 1;
$pdflatex = 'pdflatex -interaction=nonstopmode -file-line-error -synctex=1'; 
```

如果您想将 latexmk 绑定到 Emacs 中的某个键并使其显示错误（如果有任何您可能[对此问题](https://stackoverflow.com/q/7885853/789593)的答案感兴趣） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:59:20.350

我找到了需要做的事情。在这篇文章[如何调用 latexmk](https://stackoverflow.com/questions/2199678/how-to-call-latexmk-in-emacs-and-jump-to-next-error)中，我只需要添加

```
(add-hook 'LaTeX-mode-hook (lambda ()
  (push
    '("Latexmk" "latexmk -pdf %s" TeX-run-TeX nil t
      :help "Run Latexmk on file")
    Tex-command-list))) 
```

现在，我只剩下 okular 在完成后生成 pdf 文件了。有人对此有想法吗？

# excel - excel函数查找列中的最后一个数字

> ID：15892492
> 
> 赞同：7
> 
> 时间：2013-04-09T02:52:09.303
> 
> 标签：excel, function

我每天在列中记录我的股票价值，这是一个很长的电子表格。在每一列的顶部单元格中，我想使用一个函数来自动显示列中的最后一个条目。我尝试了 Index 函数和 Index 函数与 Counta 函数的结合，但没有成功。有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T12:05:41.450

尝试使用`LOOKUP`，假设最多 1000 行数据（根据需要调整）在 A1 中使用此公式获取 A2 中的最后一个数字：A1000

`=LOOKUP(9.99E+307,A2:A1000)`

您可以在该范围内有空格或任何其他数据（甚至错误），它仍将返回最后一个数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:51:17.790

试试这个A列，resp。单元格 A1：

```
=OFFSET(A$2;ROWS(A$2:A$101)-COUNTBLANK(A$2:A$101)-1;0) 
```

此示例适用于最多 100 行数据 (2 - 101)。`101`您可以根据工作表的大小替换为任何更高的数字。

请注意，列表中间可能**没有空白单元格。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T20:51:58.567

Jens Fischer 提供的答案效果很好，也可以很好地翻译成谷歌表格，而其他解决方案却没有。我做了一个小改动；通过使用 A$1 作为参考，我不需要公式末尾的 -1。

# multithreading - 在多线程函数中声明后不久释放指针

> ID：15892496
> 
> 赞同：2
> 
> 时间：2013-04-09T02:52:37.477
> 
> 标签：multithreading, thread-safety, access-violation, corruption

我目前在我的一些代码中遇到了一个非常奇怪的问题。一个变量在其声明后立即损坏并导致访问冲突（基本上指针仍指向同一位置但内存似乎未分配）后似乎很好的变量。我很确定这个问题与多线程有关，但我不知道它是什么，因为我对多线程很陌生。

这是代码：

```
#include "Firewall.h"
#include <Ws2tcpip.h>

Firewall::Firewall(void)
{
}

Firewall::~Firewall(void)
{
}

void Firewall::parseFile(string filePath)
{
    XMLNode xMainNode=XMLNode::openFileHelper(filePath.c_str(),"firewall");

    // Filtrage
    XMLNode nodeFiltrage = xMainNode.getChildNode("filtrage");
    XMLNode currentNode;

    for(int i=0; i < nodeFiltrage.nChildNode();i++)
    {
        currentNode = nodeFiltrage.getChildNode(i);

        string nom = currentNode.getName();

        if(nom == "permettre")
            mapFiltrage_.insert(pair<int,bool>(atoi(currentNode.getAttribute().lpszValue), true));

        else if(nom == "bloquer")
            mapFiltrage_.insert(pair<int,bool>(atoi(currentNode.getAttribute().lpszValue), false));
    }

    // Redirection

    XMLNode nodeRedirection = xMainNode.getChildNode("redirection");
    XMLNode currentSubNode;

    for(int i = 0; i < nodeRedirection.nChildNode(); i++)
    {
        currentNode = nodeRedirection.getChildNode(i);
        currentSubNode = currentNode.getChildNode("source");

        SourceDestination source((string)currentSubNode.getAttribute("adresse"), atoi(currentSubNode.getAttribute("port")));

        currentSubNode = currentNode.getChildNode("destination");
        SourceDestination destination((string)currentSubNode.getAttribute("adresse"), atoi(currentSubNode.getAttribute("port")));

        mapRedirection_.insert(pair<SourceDestination, SourceDestination>(source,destination)); 

        pair<SourceDestination, SourceDestination> test;
    }

}

void Firewall::initialiser()
{
    std::map<int, bool>::iterator iterFiltrage = mapFiltrage_.begin();
    HANDLE handleThread;

    std::string tempFiltrage = "localhost";
    thread_arg arg;

    // Parcours et lancement des connexions de filtrage
    while(iterFiltrage != mapFiltrage_.end())
    {
        arg.port = (*iterFiltrage).first;
        arg.host = tempFiltrage;
        arg.objRef = this;

        handleThread = CreateThread(NULL, 0, listenThread, &arg, 0, NULL);
        listeThread_.push_back(handleThread);

        iterFiltrage++;
    }

    // Parcours et lancement des connexions de redirection
    std::map<SourceDestination, SourceDestination>::iterator iterRedirection = mapRedirection_.begin();

    while(iterRedirection != mapRedirection_.end())
    {
        // Éviter la duplication inutile des sockets
        if(mapFiltrage_.find((*iterRedirection).first.Port()) == mapFiltrage_.end())
        {
            arg.host =  (*iterRedirection).first.Host();
            arg.port = (*iterRedirection).first.Port();
            arg.objRef = this;

            handleThread = CreateThread(NULL, 0, listenThread, &arg, 0, NULL);
            listeThread_.push_back(handleThread);
        }

        iterRedirection++;
    }
}

DWORD WINAPI Firewall::listenThread(LPVOID lpParam)
{
    thread_arg* temp = (thread_arg*)lpParam;
    Firewall* firewallRef = temp->objRef;

    return firewallRef->runThread(lpParam);
}

DWORD Firewall::runThread( LPVOID lpParam )
{
    thread_arg* infosSocket = (thread_arg*)lpParam;

    // Créer le socket et l'attacher à la source
    SOCKET sock = socket(AF_INET, SOCK_STREAM, 0);

    if(sock == INVALID_SOCKET)
    {
        cout << "Erreur de creation de socket" << endl;
        return EXIT_FAILURE;
    }

    //Recuperation de l'adresse locale
    hostent *thisHost;
    const char* test = infosSocket->host.c_str();
    thisHost=gethostbyname(test);
    char* ip;
    ip=inet_ntoa(*(struct in_addr*) *thisHost->h_addr_list);

    SOCKADDR_IN sin;
    sin.sin_addr.s_addr = inet_addr(ip);
    sin.sin_family = AF_INET;
    sin.sin_port = htons(infosSocket->port);

    if(bind(sock, (SOCKADDR*)&sin, sizeof(sin)) == SOCKET_ERROR)
    {
        cout << "Erreur de binding" << endl;
        return EXIT_FAILURE;
    }

    // Contexte du client
    SOCKADDR_IN csin;
    SOCKET csock;
    socklen_t crecsize = sizeof(csin);

    listeSocket_.push_back(sock);
    listeSocket_.push_back(csock);

    // Écouter sur le port
    if(listen(sock, 5) == SOCKET_ERROR)
    {
        cout << "Erreur de listen" << endl;
        return EXIT_FAILURE;
    }

    //csock = accept(sock, (SOCKADDR*)&csin, &crecsize);

    return EXIT_SUCCESS;
}

void Firewall::quitter()
{
    // Fermer les sockets
    vector<SOCKET>::iterator iter1 = listeSocket_.begin();

    while(iter1 != listeSocket_.end())
    {
        closesocket((*iter1));
        iter1++;
    }

    // Fermer les threads

    vector<HANDLE>::iterator iter2 = listeThread_.begin();

    while(iter2 != listeThread_.end())
    {
        TerminateThread((*iter2), EXIT_SUCCESS);
        CloseHandle((*iter2));
    }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:51:04.430

您的问题出在以下代码中：

```
thread_arg arg;

loop(...)
{
    arg = ...;
    handleThread = CreateThread(..., &arg, ...);
} 
```

此处启动的每个线程都接收到同一个 thread_arg 实例的地址。然后，为了启动下一个线程，您再次在先前启动的线程的脚下修改该实例。作为补救措施，创建一个包含必要参数（主机、端口、this）和线程句柄的结构。将此结构存储在 std::list 中，然后将相应元素的地址传递给 CreateThread()。

您的代码中还有另一个问题，您应该检查返回值。如果您知道已检测到所有明显的错误，那么在某些代码上寻求帮助会更好。为此，使用异常是最简单的。在 CreateThread() 之后，可能应该是 beginthread()，添加以下行：

```
if(handleThread == NULL)
    throw std::runtime_error("CreateThread() failed"); 
```

在第二步中，创建一个从 runtime_error 派生的专用异常类，它包含 win32 错误代码（请参阅 GetLastError()）并在异常消息中包含文本错误描述（请参阅 FormatString()）。这可能听起来像很多代码都没有，但你只写了一次，你可以在很多地方重用它。

最后，您的 quitter() 有两个问题。第一个是无限循环。假设您在关闭手柄后不需要手柄，请尝试以下操作：

```
for(; listeThread_.empty(); listeTread_.pop_back())
{
    TerminateThread(listeThread_.back(), EXIT_SUCCESS);
    CloseHandle(listeThread_.back());
} 
```

您也可以将其写为 while 循环，但如果迭代次数基本上是固定的，我个人更喜欢 for 循环。当然，您仍然需要检查 TerminateThread() 和 CloseHandle() 的返回值。第二个问题是 TerminateThread() 是一个坏主意，因为您可能会在完成一半的事情中间终止线程。在网上搜索“终止线程有害”。此时，您所能做的就是使用 WaitForSingleObject() 等待它结束。

# objective-c - 您如何获得 IOS 中不可用的正常样式位置？

> ID：15892503
> 
> 赞同：0
> 
> 时间：2013-04-09T02:53:33.370
> 
> 标签：objective-c, xcode4.5

假设我关闭了地图中的位置。我去地图。苹果会弹出一些东西并说该位置不可用。当用户按下设置时，它会进入设置。

我们如何弹出该消息？

我知道我可以使用 UIAlertView。但是，该消息似乎是苹果标准。此外，当按下设置时，人们会直接设置。我不明白我怎么能做出这样的事情，或者我可以吗？

当我们尝试获取位置但无权这样做时，Apple似乎只是自动显示该弹出窗口。

好吧，在我的情况下不是。在我的情况下，如果应用程序没有这样做的权限，它只会挂起等待永远不会出现的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:42:23.100

当应用程序第一次想要使用位置服务时，系统会显示该警报。用户可以选择启用它，但不会再次显示该警报。作为开发人员，您也没有能力再次展示它。

您可以做的是检查`authorizationStatus`on `CLLocationManager`：

```
if ([CLLocationManager authorizationStatus] != kCLAuthorizationStatusAuthorized) {
    // show alert telling the user to enable location services for this app
} 
```

但是，您无法直接打开“设置”应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:09:45.763

检查位置服务是否已启用。如果未启用位置服务，请创建一个带有位置服务消息的自己的 UIAlertView。

```
if([CLLocationManager locationServicesEnabled] && 
     [CLLocationManager authorizationStatus] != kCLAuthorizationStatusDenied)
{
    // Show alert 
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex  
{
    if(alertView.tag == 1)
    {
        // set Url 
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]];

    }
} 
```

# paypal - 每个备用 Paypal IPN 交易都失败（HTTP 代码 400）

> ID：15892507
> 
> 赞同：0
> 
> 时间：2013-04-09T02:53:52.857
> 
> 标签：paypal, paypal-ipn

我对 Paypal IPN 有一个奇怪的问题。每个替代交易都失败了。因此，假设第一次交易顺利，那么第二次交易失败。同样，如果第三个顺利，那么第四个失败。我在 IPN 历史记录中获得的失败交易的 HTTP 状态代码是 400。我已经实现了他们新引入的新的 Paypal 主机标头更改。

知道为什么会这样吗？

**IPN 历史**
[http://i.imgur.com/NfqRsGi.png](http://i.imgur.com/NfqRsGi.png)

**IPN 详情**
[http://i.imgur.com/hcKdasw.png](http://i.imgur.com/hcKdasw.png)

**编辑**
我正在使用带有 curl 的 PHP 来完成 IPN 工作（使用与 Paypal 网站上可用的相同示例代码）

**另一个编辑**
好的，我从 Paypal 站点找到了 PHP 5.2 的另一个代码示例。这一款与我目前使用的略有不同。我在 Paypal Sandbox 上对其进行了两次测试，并且成功了。稍后我将在现场测试它，看看它是否工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:13:39.170

错误 400 = 错误请求，这意味着在应用程序层（由您的浏览器）发出的 get 请求可能包含错误或传输层（syn、syn、ack、syn）3 路 hand shack 被中断。为了安全起见，我会检查您的 PC 上是否有 Mallware。在 dos 中执行 netstat -b 并查看试图连接到外部网络的内容。

还可以使用恶意软件字节和像 Eset nod32 这样的良好病毒扫描程序进行扫描。让我们知道您的进展情况^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:21:15.107

我从 Paypal 网站下载的新脚本解决了这个问题。

# asp.net - 将链接动态添加到模板字段

> ID：15892510
> 
> 赞同：0
> 
> 时间：2013-04-09T02:54:12.153
> 
> 标签：asp.net, html, vb.net, datagrid, databound

我需要替换每个数据绑定项的链接。我已经检查了数据行的数据绑定事件。问题是我无法控制链接的显示位置。我试图远离 javascript，并将其主要保留在后面的代码中。下面是我的asp代码和我背后的代码。我还想尽量保持相同，而不是更改为 html 模板项。我使用的过程如下。

我有一个自定义对象，其中包含博客条目的所有字段和数据。这些项目被放入一个列表中，然后提供给数据网格。

```
 <asp:GridView ID="grdRecentNews" runat="server" AutoGenerateColumns="False" DataKeyNames="Key"
                            GridLines="None" PageSize="4" ShowHeader="False"
                            AllowPaging="True">
                            <PagerSettings Visible="False" />
                            <Columns>
                                <asp:TemplateField>
                                    <ItemTemplate>
                                        <blockquote>
                                           <%-- <strong><a href=**"News.aspx"**>--%>
                                            <strong><a href="News.aspx">
                                                <%#Eval("NewsDesc")%></a></strong>
                                            <br />
                                            <span class="italic">
                                                <%#Eval("NewsDate")%></span>
                                        </blockquote>
                                    </ItemTemplate>
                                </asp:TemplateField>
                            </Columns>
                        </asp:GridView> 
```

这是我在 Databound 事件中的代码，问题是我只想为 Rss 对象的一个​​字段提供链接。如下。我想用 rssobject 的链接属性为添加到数据网格的每个项目替换 News.aspx"。

```
 Protected Sub grdRecentNews_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdRecentNews.RowDataBound

        If e.Row.DataItem IsNot Nothing AndAlso e.Row.DataItem.ToString = "RssEntry" Then
            Dim curItem As RssEntry = CType(e.Row.DataItem, RssEntry)
            e.Row.Attributes.Add("href", curItem.Link) 'data-url
        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:16:22.217

我找到了一种将 <%#Eval %> 语句插入到我想要更改的属性中的方法。我将它指向 rssobject 的正确属性及其工作。

```
<Columns>
                            <asp:TemplateField>
                                <ItemTemplate>
                                    <blockquote>
                                        <strong><a href='<%#Eval("Link")%>'>
                                            <%#Eval("NewsDesc")%></a></strong>
                                        <br />
                                        <span class="italic">
                                            <%#Eval("NewsDate")%></span>
                                    </blockquote>
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns> 
```

# android - iOS和Android编程

> ID：15892512
> 
> 赞同：3
> 
> 时间：2013-04-09T02:54:26.560
> 
> 标签：android, ios, reusability

我已经开发了一些 Android 应用程序，目前正在从头开始开发 iOS 应用程序。有什么方法可以让我专注于开发我的 iOS 应用程序，以便我可以重用它的一些组件或功能来在 Android 平台上开发相同的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:04:28.907

> 有什么方法可以让我专注于开发我的 iOS 应用程序，以便我可以重用它的一些组件或功能来在 Android 平台上开发相同的应用程序？

如果您使用网络技术（HTML、CSS、Javascript），则可以。如果您构建基于 Web 的应用程序或混合应用程序，即使用在本机外壳内运行的基于 Web 的内容的应用程序，您可以这样做。如果您对构建混合应用程序感兴趣，请查看 PhoneGap——它提供了一种快速入门的方法。还有一些跨平台框架，如[Titanium](http://www.appcelerator.com/platform/titanium-platform/)，声称提供一次写入/在多个平台上运行的功能。

如果您想在两个平台上构建一个完全原生的应用程序，您将无法重用应用程序逻辑。iOS 和 Android 使用在不同硬件上运行的不同语言编写的不同框架，并且每个平台上的应用程序的工作方式也有所不同。即便如此，您*可以*重用的是您在驱动应用程序的基础设施中投入的任何工作。大多数应用程序依赖某种服务器基础设施来提供或收集数据，并且该服务器组件可以轻松地为在任一平台上运行的应用程序提供服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:58:56.707

如果您正在开发相同的应用程序，那么您可以使用[j2objc](http://code.google.com/p/j2objc/)将您的 java（非 UI 或硬件/平台特定）代码转换为 Objective-c。

从描述：

> J2ObjC 是来自 Google 的开源命令行工具，可将 Java 代码转换为 iOS（iPhone/iPad）平台的 Objective-C。该工具使 Java 代码成为 iOS 应用程序构建的一部分，因为不需要编辑生成的文件。目标是用 Java 编写应用程序的非 UI 代码（例如数据访问或应用程序逻辑），然后由 Web 应用程序（使用 GWT）、Android 应用程序和 iOS 应用程序共享。

# c# - 我可以创建一个包装器来拦截对实现特定接口的对象的所有调用吗？

> ID：15892514
> 
> 赞同：3
> 
> 时间：2013-04-09T02:54:42.667
> 
> 标签：c#, .net, methods, interface

假设我有一个接口 IFoo

```
interface IFoo
{
  int Bar();
  int Bar2();
  void VBar();
  //etc,
} 
```

我可以创建一个包装器来接受任何 IFoo 对象并在实际调用之前/之后做一些事情吗？

例如当我做这样的事情时

```
IFoo wrappedFoo = new Wrapper<IFoo>(actualFooObject).Object;
wrappedFoo.Bar(); 
```

然后 wrapper.Bar() 方法实际上执行这样的事情

```
PreCall(); //some code that I can define in the wrapper
actualFooObject.Bar();
PostCall(); 
```

有没有一种简单而干净的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:25:40.040

我看不到这样做的“干净和简单”的方式。

我能想到的最好的选择是编写一个泛型`Wrapper<T>`来封装和实例化`T`并实现泛型`Precall`和`Postcall`方法：

```
public class Wrapper<T>
{
    protected T _instance;
    public Wrapper(T instance)
    {
        this._instance = instance;
    }
    protected virtual void Precall()
    {
        // do something
    }
    protected virtual void Postcall()
    {
        // do something
    }
} 
```

这样您就可以编写自己`FooWrapper`的接口`IFoo`（或任何其他接口）并委托方法调用：

```
public class FooWrapper :Wrapper<IFoo>, IFoo
{
    public FooWrapper(IFoo foo)
        : base(foo)
    {
    }
    public int Bar()
    {
        base.Precall(); return base._instance.Bar(); base.Postcall();
    }
    public int Bar2()
    {
        base.Precall(); return base._instance.Bar2(); base.Postcall();
    }
    public void VBar()
    {
        base.Precall();  base._instance.VBar(); base.Postcall();
    }
} 
```

所以你可以像这样使用它：

```
IFoo f = new ActualFooClass();
IFoo wf = new FooWrapper(f);
f.Bar(); 
```

当然，如果你的`Precall`and`Postcall`方法不是泛型的，那么使用`Wrapper<T>`类真的没有意义。随手去吧`FooWrapper`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:05:33.737

如果你需要在 and 上有一些东西`PreCall()`，`PostCall`简单的方法是在代理基础方法下包装

```
 public abstract class ProxyBase
  {
    public void Execute()
    {
      PreCondition();
      Call();
      PostCondition();
    }
    private void PreCondition()
    {
      Console.WriteLine("ProxyBase.PreCondition()");
    }
    private void PostCondition()
    {
      Console.WriteLine("ProxyBase.PreCondition()");
    }
    protected abstract void Call();
  }
  public class AppProxy<T> : ProxyBase where T : IApp
  {
    private IApp _app;

    public AppProxy<T> Init(IApp app)
    {
      _app = app;
      return this;
    }

    protected override void Call()
    {
      Console.WriteLine("AppProxy.Call()");
      _app.Call();
    }

    public IApp Object
    {
      get { return _app; }
    }
  }

  public interface IApp
  {
    void Call();
  }

  public interface IFoo : IApp
  {

  }

  public class ActualFoo : IApp
  {
    public void Call()
    {
      Console.WriteLine("ActualFoo.Call()");
    }
  }

 class Program
  {
    static void Main(string[] args)
    {
      ActualFoo actualFoo = new ActualFoo();
      var app = new AppProxy<IFoo>().Init(actualFoo);
      app.Execute();
      var o = app.Object as ActualFoo;

      Console.ReadLine();

    }
  } 
```

--------------- 输出 --------------
ProxyBase.PreCondition()
AppProxy.Call()
ActualFoo.Call()
ProxyBase.PreCondition()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:01:02.813

您可以为这种方法使用[代码契约](http://research.microsoft.com/en-us/projects/contracts/)。查看[用户手册](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)(pdf)`2.8 Interface Contracts`部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T03:11:29.420

您可以使用 AOP。我已经使用这个库很长一段时间了：

[http://www.postsharp.net/products](http://www.postsharp.net/products)

# php - 将 PDO 扩展为 CodeIgniter 库

> ID：15892522
> 
> 赞同：0
> 
> 时间：2013-04-09T02:55:34.983
> 
> 标签：php, codeigniter, pdo

我知道 CI 2.1.3 现在支持 PDO。但是使用 pdo 函数而不是 codeigniter 函数对我来说会更舒服，现在我想扩展 PDO 并将其用作库并在控制器或其他库加载后创建 PDO 对象；这是可能的，不是吗？到目前为止我的尝试：

```
class Mypdo extends PDO {
  public function __construct($dsn='mysql:dbname=mydbname;host=localhost',
                              $username='myusername',
                              $password='mypassword',
                              $driver_options=array()) {
        parent::__construct($dsn, $username, $password, $driver_options);
  }
} 
```

和简单的用法：

```
class Otherlibrary{
   var $CI;
   var $something_id;

   public function __construct(){
      $this->CI =& get_instance();
      $this->CI->load->library('mypdo');

      $this->something_id = 'foo';
   }

   public function is_something_exist(){
      try{
         $q = "SELECT * FROM something WHERE something_id = '$this->something_id'";
         $stmt = $this->CI->mypdo->prepare($q); //<--PROBLEM
         $stmt->execute();

         if ($stmt->rowCount() < 1){
            return false;
          } else {
            return true;
          }
       } catch (PDOException $e){
           echo $e->getMessage();
       }
    }
} 
```

总是返回：

> **致命错误：**在...中的非对象上调用成员函数 prepare()

我根本不是 PHP 类/对象方面的专家，所以我需要帮助来改进我的代码并使其正常工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:50:41.450

根据 CodeIgniter[库文档](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)：

*   文件名必须大写。例如：Myclass.php 类

*   声明必须大写。例如：类 Myclass

*   类名和文件名必须匹配。

确保您的 Mypdo 类是 application/library/Mypdo.php。

# python - Python Beginner - 如何从另一个列表生成列表和频率

> ID：15892523
> 
> 赞同：3
> 
> 时间：2013-04-09T02:55:36.513
> 
> 标签：python, list, frequency

鉴于：

```
[['x','a'], ['y','b'], ['z','a']] 
```

我想要一个元素列表和第二个元素的计数频率：

```
[['x','a',2], ['y','b',1], ['z','a',2]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T03:00:34.560

```
>>> from collections import Counter
>>> L = [['x','a'], ['y','b'], ['z','a']]
>>> freq = Counter(y for x, y in L)
>>> [[x, y, freq[y]] for x, y in L]
[['x', 'a', 2], ['y', 'b', 1], ['z', 'a', 2]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T03:00:55.460

像往常一样，[`collections.Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)来救援。

你可以这样做：

```
from collections import Counter
pairs = [['x','a'], ['y','b'], ['z','a']]
counts = Counter(b for a,b in pairs)
pairs_with_counts = [[a, b, counts[b]] for a,b in pairs] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T03:07:51.743

使用字典的替代解决方案：

```
mylist = [['x','a'], ['y','b'], ['z','a']]
d = {}
for (a, b) in mylist:
    try:
        d[b] += 1
    except KeyError:
        d[b] = 1

mynewlist = [[a, b, d[b]] for (a, b) in mylist]
print(mynewlist) 
```

输出是`[['x', 'a', 2], ['y', 'b', 1], ['z', 'a', 2]]`

# python - Python json字典到数组

> ID：15892524
> 
> 赞同：0
> 
> 时间：2013-04-09T02:55:50.067
> 
> 标签：python, arrays, json, dictionary

我在理解 json 字典和数组时遇到了一些麻烦。我有一个从网站上抓取信息的脚本。

models.txt 只是型号的列表，例如

```
30373
30374
30375 
```

和 json_descriptions.txt 是我想要的键列表

```
sku
price
listprice
issoldout 
```

代码是：

```
import urllib
import re
import json

modelslist = open("models.txt").read()
modelslist = modelslist.split("\n")
descriptionlist = open("json_descriptions.txt").read()
descriptionlist = descriptionlist.split("\n")

for model in modelslist:
    htmltext = urllib.urlopen("http://dx.com/p/GetProductInfoRealTime?skus="+model)
    htmltext = json.load(htmltext)
    if htmltext['success'] == True:
        def get_data(dict_index, key):
            return htmltext[u"data"][dict_index][key]
        for description in descriptionlist:
           info = description, (get_data(0,description))
           print info
    else:
       print "product does not exist" 
```

如果我打印出信息，我会得到：

```
sku 30373
price 9.10
listprice 17.62
issoldout False 
```

所以这意味着 info[0] 是：

```
sku
price
listprice
issoldout 
```

和 info[1] 是：

```
30373
9.10
17.62
False 
```

我想知道是否有办法可以做到这一点：循环 1 =`['sku','30373','price','4.90','listprice','0','issoldout','False']` 循环 2 =`['sku','30374','price','10.50','listprice','0','issoldout','False']`

`info[0] = sku` `info[1] = 30373` `info[2] = price` `info[3] = 4.90` `info[4] = listprice` `info[5] = 0` `info[6] = issoldout` `info[7] = False`然后使用新列表重复此操作以进行下一个循环。

我试过使用`info = json.dumps(info)`，但这只是给出`info[0] = [[[[`等等`info[1] = """"` `info[2] = spli`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:16:41.443

像这样？

```
info = []
for model in modelslist:
    htmltext = urllib.urlopen("http://dx.com/p/GetProductInfoRealTime?skus="+model)
    htmltext = json.load(htmltext)
    if htmltext['success'] == True:
        def get_data(dict_index, key):
            return htmltext[u"data"][dict_index][key]
        for description in descriptionlist:
            info.append(description)
            info.append(get_data(0,description))
print info 
```

# c# - 使用 C# 的简单的基于对话框的应用程序

> ID：15892526
> 
> 赞同：0
> 
> 时间：2013-04-09T02:55:58.380
> 
> 标签：c#, wpf, winforms, dialog

我想开发一个简单的 Windows 应用程序（使用 C#），如下所示：

*   一个简单的基于对话框的应用程序，具有三个屏幕
*   第一个屏幕只是一个欢迎用户并解释如何进行的屏幕
*   第二个是一个拖放屏幕，用户可以在其中拖放文件（图像文件）
*   然后它对提供的图像执行操作，并将实时结果显示为列表视图，其中包含状态和完成百分比

我已经有了图像处理代码，这对我来说很容易，但我对应用程序本身很迷茫......

以下是我的问题：

*   我应该使用 winforms 还是 WPF 进行开发？我想添加自己的字体，使我使用的图像具有透明度，并显示自定义列表视图单元格和控件...
*   在基于对话框的应用程序中拥有多个屏幕的最佳方式是什么？我正在考虑使用 TabControl，隐藏标题并在用户单击“下一步”按钮后以编程方式从第一个屏幕切换到第二个屏幕，然后在文件被拖放到窗口后切换到第三个屏幕......
*   以及拥有一个对图像文件执行操作的后台进程的最佳方法是什么，在不阻塞 UI 的情况下为用户提供一些反馈（带百分比的进度条）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:19:18.700

> 我应该使用 winforms 还是 wfp 进行开发？我想添加自己的字体，使我使用的图像具有透明度并显示自定义列表视图单元格和控件

我投票给 WPF。

*   它支持更多的拖放操作
*   它有更好的用户界面，例如圆角和可能的透明度（没有使用透明度）
*   很容易自定义列表视图和控件

> 在基于对话框的应用程序中拥有多个屏幕的最佳方式是什么

对于拥有多个屏幕，您可以使用 Frame，并使用其源更改为不同的视图。使用选项卡控件也可以，但它允许用户跳过第 2 页，而是直接转到第 3 页。

> 以及拥有对图像文件执行操作的后台进程的最佳方法是什么

BackgroundWorker 将对它有用。它应该是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:19:06.347

这是我的问题： - 我应该使用 winforms 还是 wfp 进行开发？我想添加我自己的字体，有透明度

*这真的取决于。你知道 windows 窗体和/wpf 吗？如果您都使用 WPF，但如果您不知道任何一个，请选择 Windows 窗体，因为它很容易。*

我使用并显示自定义列表视图单元格和控件的图像... - 在基于对话框的应用程序中拥有多个屏幕的最佳方式是什么？我正在考虑使用 TabControl，隐藏标题并在用户单击“下一步”按钮后以编程方式从第一个屏幕切换到第二个屏幕，然后在文件被拖放到窗口后切换到第三个屏幕......

*一旦你得到一些工作，我们很容易给你我们的意见。*

以及拥有一个对图像文件执行操作的后台进程的最佳方法是什么，在不阻塞 UI 的情况下为用户提供一些反馈（带百分比的进度条）

*这两个框架都允许您这样做。这里有很多选项，最简单但非常有用的是 BackgroundWorked。*

非常感谢您抽出宝贵的时间和对这些主题的帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:26:58.917

WPF 在外观上更好，但我认为 WinForm 在你的情况下已经足够好了。

您可能需要将字体复制到 Windows 字体文件夹才能使用它。但是，它需要 UAC 的授权。

我也`TabControl`喜欢 但是，如果您要限制用户必须遵循您的进度（不能跳过某些选项卡），您可以使用多面板来代替它。

如果您的后台工作非常简单，则可以使用该`BackgroundWorker`组件。否则你需要创建线程。

# vb.net - Ghostscript Pdf 打印到网络打印机的格式化问题

> ID：15892528
> 
> 赞同：0
> 
> 时间：2013-04-09T02:56:19.690
> 
> 标签：vb.net, pdf, ghostscript

我使用 Windows 7 64 位。我有一个 .net 应用程序，我正在尝试使用以下代码将 PDF 打印到网络打印机：

```
Dim startInfo As New ProcessStartInfo()
With startInfo
    .Arguments = String.Format("-dPrinted -dBATCH -dNOPAUSE -dNOSAFER -dNoCancel -dQUIET -q -dNumCopies={0} -sPAPERSIZE={1} -dPDFFitPage -dFIXEDMEDIA -sDEVICE=mswinpr2 -sOutputFile=""\\spool\{2}"" ""{3}"" ", numberOfCopies, _PaperSize, _PrinterName, _PdfFileName)
    .FileName = ghostScriptPath '"C:\Program Files\gs\gs9.07\bin\gswin64.exe"
    .UseShellExecute = False
    .RedirectStandardError = True
    .RedirectStandardOutput = True
    .WindowStyle = ProcessWindowStyle.Hidden
End With
gs = Process.Start(startInfo) 
```

我正在打印的 Pdf 是可编辑的 pdf，并且具有斜体格式的文本。但是，斜体格式不应用于打印输出。

请让我知道如何解决这个问题。

谢谢 ：）

# wpf - WPF SSRS 报表打印

> ID：15892533
> 
> 赞同：0
> 
> 时间：2013-04-09T02:57:29.993
> 
> 标签：wpf, reporting, reporting-services

我们有一个内置在 WPF 中的应用程序。对于报告，我们使用 Winforms 主机来显示和预览报告。需要将 SSRS 报告以物理方式批量打印到打印机。即点击一个按钮，它应该在打印机（与机器关联的默认打印机）上打印所有报告。我们面临的问题是当我们尝试打印报告时会出现一个打印对话框。我们不想要打印对话框，只需将 SSRS 报告直接打印到 pinter。如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T18:08:51.527

首先，对不起我的英语。步骤： 1\. 您可以使用 C# 生成 SSRS 报告（例如） 2\. 您可以将报告导出为 PDF（在临时文件夹中），而不是在屏幕上显示报告。 3\. 使用 PrintDialog 控件打印此 PDF 文件（允许您禁用打印对话框）。

可能您也可以禁用报表查看器上的打印对话框，但我不知道如何。希望它

# html - 如何在移动设备上居中对齐图像

> ID：15892537
> 
> 赞同：0
> 
> 时间：2013-04-09T02:58:04.700
> 
> 标签：html, css, mobile

我正在为网站创建一个基本的移动版本。在联系页面中，我并排放置了 facebook 和 linkedin 徽标。垂直查看时，它们居中对齐。当屏幕旋转（在 iphone 中）时，facebook 徽标会向左移动并且不在中心位置。下面是该页面的链接。

[http://www.prithvichandra.com/lennox/mobile/contact.html](http://www.prithvichandra.com/lennox/mobile/contact.html)

所有帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:18:57.300

希望这个css可以修复：

```
/*
.social-network-wrapper{ width:95%; margin: 10px 5%; float:left;}
.fb-wrapper, .ld-wrapper{ width:29%; float:left; text-align:center;}
*/
.social-network-wrapper {float: left; width: 100%;}
.fb-wrapper, .ld-wrapper{ width:48%;}
.fb-wrapper{text-align:right; float: left;}
.ld-wrapper{text-align:left; float: right;} 
```

并更改此行：

```
<div class="fb-wrapper" style="margin-left: 72px;"> 
```

至

```
<div class="fb-wrapper"> 
```

# c# - c#中的.rdlc报告不显示任何输出数据？

> ID：15892539
> 
> 赞同：0
> 
> 时间：2013-04-09T02:58:19.170
> 
> 标签：c#, dataset, rdlc

我的朋友们使用 Visual Studio 2008，我用 C# 开发小项目，现在我想在其中添加报告（.rdlc 报告）。这是我的代码

```
 try
        {
            reportViewer1.Reset();
            con.Open();
            command.Connection = con;
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "select_book_specific";

            param = new SqlParameter("@isbn", "isbn1");
            param.Direction = ParameterDirection.Input;
            param.DbType = DbType.String;
            command.Parameters.Add(param);

            adapter = new SqlDataAdapter(command);
            adapter.Fill(ds);

         //  for (int i = 0; i <= ds.Tables[0].Columns.Count - 1; i++)
           // {

             //   MessageBox.Show(ds.Tables[0].Rows[0][i].ToString());

            //} For testing purpose

            this.reportViewer1.LocalReport.ReportPath = @"C:\Documents and Settings\Administrator\My Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Report1.rdlc";

this.reportViewer1.LocalReport.DataSources.Add(newReportDataSource("Books",ds.Tables[0].TableName.ToString()));
this.reportViewer1.RefreshReport();

}
catch(exception ex){messageBox.show(ex.message);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:14:28.180

尝试

```
try
{
    reportViewer1.Reset();
    con.Open();
    command.Connection = con;
    command.CommandType = CommandType.StoredProcedure;
    command.CommandText = "select_book_specific";

    param = new SqlParameter("@isbn", "isbn1");
    param.Direction = ParameterDirection.Input;
    param.DbType = DbType.String;
    command.Parameters.Add(param);

    adapter = new SqlDataAdapter(command);
    adapter.Fill(ds);
    this.reportViewer1.LocalReport.ReportPath = @"C:\Documents and Settings\Administrator\My Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Report1.rdlc";
    this.reportViewer1.LocalReport.DataSources.Clear();
    this.reportViewer1.LocalReport.DataSources.Add( new ReportDataSource(ds.DataSetName + "_" + ds.TableName, ds.Tables[0]));
    this.reportViewer1.LocalReport.Refresh();
}catch(Exception ex)
{
    messageBox.show(ex.message);
} 
```

# php - SQL JOIN 语句 - 导出前生成数据

> ID：15892542
> 
> 赞同：0
> 
> 时间：2013-04-09T02:58:39.663
> 
> 标签：php, mysql, sql

我尝试在导出为 csv 格式之前生成数据，但我未能获得正确的数据。

```
Table : products
products_id | products_image
    2       |    a.jpg
  1786      |    b.jpg

Table : product_description
products_id | products_description  | language_id
     2      |   BM description      |      6
   1786     |   BM description      |      6
   1786     |   CN description      |      4
   1786     |   EN description      |      1 
```

我试图得到这样的输出：

```
products_id | products_image | p_description_6 | p_description_4 | p_description_1 |
    2       |     a.jpg      | BM description  |                 |                 |
    1786    |     b.jpg      | BM description  | CN description  | EN description  | 
```

我当前的查询如下，但此查询未能在同一行中生成 product_description：

```
$select = "SELECT p.*, pd.* FROM products p LEFT JOIN product_description pd on p.products_id=pd.products_id group by p.products_id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:07:46.263

尝试类似的东西，

```
SELECT
    P.products_id,
    p.products_image,
    MAX(CASE WHEN language_id = 6 THEN products_description  END) AS p_description_6,
    MAX(CASE WHEN language_id = 4 THEN products_description  END) AS p_description_4,
    MAX(CASE WHEN language_id = 1 THEN products_description  END) AS p_description_1

FROM 
    products P 

INNER JOIN 
    product_description D ON P.products_id = D.products_id

GROUP BY 
    P.products_id,
    p.products_image 
```

[SQL小提琴](http://sqlfiddle.com/#!2/c1c30/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:26:50.807

您可以使用`GROUP_CONCAT`在同一行中生成 product_description：

```
select 
  a.products_id,
  a.products_image,
  group_concat(b.products_description) as descriptions,
  group_concat(b.language_id) as lang_ids
from products a 
left join 
  product_description b on b.products_id = a.products_id
group by a.products_id 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/1fa3d/9)

# android - 如何使用钛工作室创建条形图和饼图？

> ID：15892544
> 
> 赞同：0
> 
> 时间：2013-04-09T02:58:56.670
> 
> 标签：android, titanium, bar-chart, pie-chart

我对钛很陌生，所以我的案例是使用适用于 Android 设备的钛工作室创建条形图和饼图。谁能告诉我如何创建条形图和饼图？我可以只使用钛创建条形图和饼图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:25:35.680

伊曼纽尔，请查看以下链接，这将对您有所帮助

1.  [钛和图表](http://developer.appcelerator.com/question/44251/titanium-and-charts)

2.  [Titanium Android 图表](http://developer.appcelerator.com/question/147139/titanium-android-chart)

3.  [Titanium Mobile 中的 Rgraph 图表库](http://bobsims.tumblr.com/post/13836304720/rgraph-charts-library-in-titanium-mobile)

4.  [如何在 Titanium for Android App 中绘制饼图](http://developer.appcelerator.com/question/148593/how-to-draw-pie-chart-in-titanium-for-android-app)

# android - 如何在 OSMdroid 中获取地图范围更改事件？

> ID：15892561
> 
> 赞同：6
> 
> 时间：2013-04-09T03:00:56.297
> 
> 标签：android, osmdroid

我在我的自定义 Android 应用程序中使用 Osmdroid 库。

在每次范围更改时（以及放大地图时），我想查询 sqlite 数据库并获取位于该范围内的记录。为此，我需要类似于地图范围更改事件的东西。

我在 MapView 类上找不到这样的事件。我如何实现我想做的事情？

**更新** 我正在使用这样的 MapListner：

```
mapView.setMapListener(new MapListener() {   
    public boolean onZoom(ZoomEvent arg0) {
        return false;
    }

    public boolean onScroll(ScrollEvent arg0) {
         onExtentChange();
        return false;
    }
} ); 
```

但是对于地图的每个平移，都会触发 onScrollEvnt 多次。如何获得最后一个或最终的滚动事件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-08T00:02:38.467

```
setMapListener(new DelayedMapListener(new MapListener() {  
    public boolean onZoom(final ZoomEvent e) {
        //do something
        return true;
    }

    public boolean onScroll(final ScrollEvent e) {
        Log.i("zoom", e.toString());
        return true;
    }
    }, 1000 )); 
```

# algorithm - RRT 的随机配置生成

> ID：15892563
> 
> 赞同：1
> 
> 时间：2013-04-09T03:01:06.047
> 
> 标签：algorithm, path-finding, robotics, motion-planning

我正在为快速探索树木以进行机械臂运动编写代码。我有两个疑问

i) 我必须使用什么距离度量来查找图中最近的节点？如果是欧几里得距离，我该如何计算它，因为机器人的每个手臂配置中有两个链接，我不知道在这种情况下如何找到欧几里得距离。 ![在此处输入图像描述](https://i.stack.imgur.com/irUjV.png) 如果 ABC 是树中最接近 ADE 的配置，我如何找到 ADE 和 ABC 之间的距离？

ii) 我如何为目标生成随机配置，因为即使经过 5000 次迭代，我的随机配置似乎也从未达到目标。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:57:52.657

**两个旋转关节臂的距离度量**

RRT 对您选择的（伪）指标非常稳健，但是如果您有一些不是特别好的东西，树的质量（以及因此路径）会受到影响。为了获得良好的整体性能，度量函数应该很快，所以在你转向更复杂的东西之前，我肯定会尝试更简单的东西。

在机器人手臂的情况下，许多指标是可能的。也许最简单的方法就是在两种配置中使用末端执行器之间的欧几里得距离。如果您正在测试计划算法，您几乎肯定必须已经让这个工作。

如果您拥有系统的完整动态模型，那么基于将手臂从一种配置移动到另一种配置所需的能量的其他指标可能会表现得更好。

基于在关节处扫出的（关节局部）角度的其他指标，可以通过评估来自逆运动学求解器的路径得出，这可能是可以接受的——但我在实践中没有尝试过。这也可能是了解您是否需要实现连接配置功能的有用技术。

**提高收敛性**

一旦你的度量函数正常工作，RRT 应该*就可以工作了*。但是，在实践中，您几乎总是需要在目标配置附近进行过采样，以鼓励算法*利用*在树构建阶段的其余部分完成的工作。最常见的是，您通过以大约 5% 的概率对目标配置状态进行采样来做到这一点。

# css - CSS3 列数：2 + 高度：100% 截断图像

> ID：15892569
> 
> 赞同：1
> 
> 时间：2013-04-09T03:02:14.957
> 
> 标签：css, column-count

在显示一堆段落<p>元素的过程中，混入了很多<div>，所以显示出来的效果很好，就像一本打开的书，我将<html>设置为

```
html {
  width: 100%;
  height: 100%;
} 
```

和 <body> 到

```
body {
  column-count: 2;
  height: 100%;
} 
```

除了图像被截断并显示到“下一页”之外，它们都工作得很好，即，图片被分成两列显示。

我试过设置

```
img {
  display: inline-block;
} 
```

试图恢复图像的完整性，但没有运气。任何帮助，将不胜感激。

谢谢

# java - 是否可以让菜单中的某些项目在 Java 中以 500 毫秒的起始延迟淡入？

> ID：15892571
> 
> 赞同：0
> 
> 时间：2013-04-09T03:02:32.587
> 
> 标签：java, swing, animation, jmenu, jmenuitem

我有一个包含 16 个 JMenuItems 的 JMenu，我希望预先显示 3 个项目，其余 13 个项目以 500 毫秒的延迟淡入。有没有办法在 Java 中制作这个动画？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:35:06.337

这并不像听起来那么容易。

基本上，我最初认为“我将在弹出菜单中附加一个弹出侦听器，菜单项被添加到”......但显然这不太好用。菜单弹出是根据需要动态构建的。有道理，但还是很痛苦。

所以相反，我发现如果我等待，`addNotify`我可以简单地启动动画引擎。

动画引擎是一个简单的概念。它有一个`javax.swing.Timer`以固定间隔滴答作响。再加上开始时间和持续时间，我们就可以计算出动画的进度，并`alpha`根据需要生成值。

剩下的唯一一件事就是通知所有相关方动画已更改，瞧……

```
import java.awt.AlphaComposite;
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.PopupMenuEvent;
import javax.swing.event.PopupMenuListener;

public class FadeMenu {

    private AnimationEngine engine;

    public static void main(String[] args) {
        new FadeMenu();
    }

    public FadeMenu() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                engine = new AnimationEngine();

                JMenuBar mb = new JMenuBar();
                JMenu flip = new JMenu("Flip");

                flip.add("Static 1");
                flip.add("Static 2");
                flip.add("Static 3");

                flip.add(new FadeMenuItem("Fade 1"));
                flip.add(new FadeMenuItem("Fade 2"));
                flip.add(new FadeMenuItem("Fade 3"));
                flip.add(new FadeMenuItem("Fade 4"));

                mb.add(flip);

                JFrame frame = new JFrame("Testing");
                frame.setJMenuBar(mb);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public class FadeMenuItem extends JMenuItem {

        public FadeMenuItem(String text) {
            super(text);
            engine.addTimingListener(new TimingListener() {
                @Override
                public void timingEvent() {
                    repaint();
                }
            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setComposite(AlphaComposite.SrcOver.derive(engine.getAlpha()));
            super.paintComponent(g2d);
            g2d.dispose();
        }

        @Override
        public void removeNotify() {
            Container parent = getParent();
            if (parent instanceof JPopupMenu) {
                JPopupMenu menu = (JPopupMenu) parent;
                engine.stop();
            }
            super.removeNotify(); 
        }

        @Override
        public void addNotify() {
            super.addNotify();
            Container parent = getParent();
            if (parent instanceof JPopupMenu) {
                JPopupMenu menu = (JPopupMenu) parent;
                engine.restart();
            }
        }
    }

    public interface TimingListener {

        public void timingEvent();
    }

    public class AnimationEngine {

        private Timer fade;
        private float alpha;
        private long startTime;
        private long duration = 1000;
        private List<TimingListener> listeners;

        public AnimationEngine() {
            listeners = new ArrayList<>(5);
            fade = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    long elapsed = System.currentTimeMillis() - startTime;
                    if (elapsed >= duration) {
                        ((Timer) e.getSource()).stop();
                        alpha = 1f;
                    } else {
                        alpha = (float) elapsed / (float) duration;
                    }
                    fireTimingEvent();
                }
            });
            fade.setRepeats(true);
            fade.setCoalesce(true);
            fade.setInitialDelay(500);
        }

        public void addTimingListener(TimingListener listener) {
            listeners.add(listener);
        }

        public void removeTimingListener(TimingListener listener) {
            listeners.add(listener);
        }

        protected void fireTimingEvent() {
            for (TimingListener listener : listeners) {
                listener.timingEvent();
            }
        }

        public void restart() {
            fade.stop();
            alpha = 0;
            fireTimingEvent();
            startTime = System.currentTimeMillis();
            fade.start();
        }

        public float getAlpha() {
            return alpha;
        }

        public void stop() {
            fade.stop();
        }
    }
} 
```

虽然这适用于 Windows，但我担心它可能不适用于其他平台，因为生成菜单的方式（部分）由 UI 委托控制。这可能会变得非常混乱，很快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:19:14.930

启动计时器以触发事件以淡入

# winapi - 创建一个像系统默认菜单一样的窗口？

> ID：15892572
> 
> 赞同：1
> 
> 时间：2013-04-09T03:02:52.527
> 
> 标签：winapi, user-interface

我在主窗口中创建了一个窗口。当新窗口显示时，主窗口失去焦点并停用。

所以主窗口的框架没有被激活，如下图所示： ![在此处输入图像描述](https://i.stack.imgur.com/ikO9M.png)

而激活的主窗口应如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/8gINK.png)

问题是我需要在创建和显示类似于系统菜单窗口的新窗口时保持主窗口处于激活状态。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:41:34.323

也许像新窗口的 SW_SHOWNA/SWP_NOACTIVATE 之类的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T09:13:55.450

```
int HandledWidget::showPopup()
{
    int nRet(-1);

    show(SW_SHOWNOACTIVATE);

    BOOL bMenuDestroyed(FALSE);
    BOOL bMsgQuit(FALSE);
    HWND m_hWndOwner = GetWindow(m_hWnd, GW_OWNER);
    assert(GetForegroundWindow() == m_hWndOwner);

    while(TRUE)
    {
        if(GetProp(m_hWnd, MENU_EXIT_NOTIFY) != 0)
        {
            nRet = (int)GetProp(m_hWnd, MENU_EXIT_COMMAND_ID);
            break;
        }

        if(GetActiveWindow() != m_hWndOwner)
        {
            break;
        }

        m_bIsPopingUp = true;

        MSG msg = {0};
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            if(msg.message == WM_KEYDOWN
                || msg.message == WM_SYSKEYDOWN
                || msg.message == WM_KEYUP
                || msg.message == WM_SYSKEYUP
                || msg.message == WM_CHAR
                || msg.message == WM_IME_CHAR
                || msg.message == WM_MOUSEWHEEL
                )
            {
                //transfer the message to menu window
                msg.hwnd = m_hWnd;
            }
            else if(msg.message == WM_LBUTTONDOWN
                || msg.message == WM_RBUTTONDOWN
                || msg.message == WM_NCLBUTTONDOWN
                || msg.message == WM_NCRBUTTONDOWN)
            {
                //click on other window
                if(msg.hwnd != m_hWnd)
                {
                    m_bIsPopingUp = false;
                    DestroyWindow(m_hWnd);
                    bMenuDestroyed = TRUE;
                }
            }
            else if(msg.message == WM_QUIT)
            {
                bMsgQuit = TRUE;
            }

            TranslateMessage (&msg);
            DispatchMessageW (&msg);
        }
        else
        {
            MsgWaitForMultipleObjects (0, 0, 0, 10, QS_ALLINPUT);
        }

        if(bMenuDestroyed) break;

        if(bMsgQuit)
        {
            PostQuitMessage(msg.wParam);
            break;
        }
    }

    m_bIsPopingUp = false;

    if(!bMenuDestroyed) DestroyWindow(m_hWnd);

    return nRet;
}

bool HandledWidget::exitPopup(int nCommandId)
{
    BOOL bRet = SetProp(m_hWnd, MENU_EXIT_NOTIFY, (HANDLE)1);
    SetProp(m_hWnd, MENU_EXIT_COMMAND_ID, (HANDLE)nCommandId);
    return bRet;
} 
```

并处理 wm_mouseactivate：

```
LRESULT ComboxList::onMouseActivate( WPARAM wParam, LPARAM lParam, bool &bHandled )
{
    bHandled = true;
    return MA_NOACTIVATE;
} 
```

记住不要使用 SetFocus/SetWindowPos(SW_SHOWWINDOW)/ShowWindow(SW_SHOW)/SetActivate/SetForegroundWindow 等激活新窗口。

然后你会得到一个非激活窗口，就像系统菜单一样。

参考：[http ://www.cppblog.com/weiym/archive/2013/04/07/199189.html](http://www.cppblog.com/weiym/archive/2013/04/07/199189.html)

# git - 如何在 GitHub 组织内移动问题？

> ID：15892574
> 
> 赞同：2
> 
> 时间：2013-04-09T03:03:49.890
> 
> 标签：git, github

使用[GitHub 组织](https://github.com/blog/674-introducing-organizations)，我可以[在一个地方查看所有问题](https://github.com/blog/959-issues-dashboard-for-organizations)

网址示例`https://github.com/organizations/Nodeclipse/dashboard/issues`

**如何在 GitHub 组织内移动问题？**

相关：
一般方法：[GitHub-2-GitHub 问题导入](https://stackoverflow.com/questions/6356451/github-2-github-issues-import)
[如何将 github 上的问题移动到另一个存储库？](https://stackoverflow.com/questions/9720718/how-do-i-move-an-issue-on-github-to-another-repo)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:52:15.333

没有*官方*的方法可以做到这一点。

但是，有一些脚本会读入问题并在另一个仓库中重新创建它们，比如这个：[https ://github.com/collective/collective.developermanual/blob/master/gh-issues-import.py](https://github.com/collective/collective.developermanual/blob/master/gh-issues-import.py)

但在我们的组织中，我们只是关闭问题（使用移动的消息）并手动重新创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T15:04:13.430

我创建了一个名为 Kamino 的 Chrome 扩展程序，它将问题从一个存储库克隆到另一个存储库。它还将关闭原始问题。它最终也将可用于 MS Edge。当然，这一次只会移动一个问题，但应该对您有用。

[https://chrome.google.com/webstore/detail/kamino/ffdebockfdjileaojbbccofhgncmioaf?hl=en-US](https://chrome.google.com/webstore/detail/kamino/ffdebockfdjileaojbbccofhgncmioaf?hl=en-US)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-29T12:06:42.847

如果您想将所有问题从一个组织转移到另一个组织（这正是我的用例），那么 GitHub 转移是一个不错的选择

请参阅此问题以了解如何使用[https://github.com/fluentsharp/FluentSharp/issues/80](https://github.com/fluentsharp/FluentSharp/issues/80)

# html - 鼠标高亮干扰 HTML5 游戏

> ID：15892583
> 
> 赞同：0
> 
> 时间：2013-04-09T03:04:44.463
> 
> 标签：html, canvas, mouse, highlight

因此，尽情享受 HTML5 Canvas 游戏带来的乐趣吧。然而，一个问题是，如果我在画布元素之外使用 DOM 元素，则在画布上单击和拖动将突出显示并“选择”DOM 元素。随后的单击操作将开始“拖动” DOM 元素，而不是注册到 Canvas。

这非常烦人，我找不到防止它的好方法。有没有办法让 DOM 元素“不能突出显示”？还有谁有相同的问题吗？

附录：游戏是射击游戏，所以你可以按住鼠标点击继续射击。但是您的健康和积分存储在 DOM 元素中。我可以将分数/健康状况渲染到画布上，但将其渲染到 DOM 元素会更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:43:22.973

在您的 mousedown/click 事件处理程序中，添加 event.preventDefault() / return false。

**例子**

```
window.addEventListener('click', function(e) {
    e.preventDefault();
    return false;
}, false); 
```

# css - 安装后 Sass 和 Compass 出现奇怪的 CSS 错误

> ID：15892584
> 
> 赞同：1
> 
> 时间：2013-04-09T03:04:58.050
> 
> 标签：css, sass, compass-sass, precompiler, scout-sass

我安装了指南针，但无法正确编译为 css。我不知道是什么原因造成的。即使你stackoverflow要求我写更多。

1.  安装侦察兵。
2.  创建简单的css和html文件。
3.  试图编译css文件。
4.  有错误。
5.  在谷歌上找不到答案。

* * *

我的CSS：

```
body {
    background: black;
} 
```

输出：

```
/*
Syntax error: Invalid CSS after "black": expected expression (e.g. 1px, bold), was ";"
        on line 2 of C:/Users/Andrej/Documents/My Dropbox/Web Projects/First good website/sass/main.sass

1: C:/Users/Andrej/Documents/My Dropbox/Web Projects/First good website/sass/main.sass

Backtrace:
C:/Users/Andrej/Documents/My Dropbox/Web Projects/First good website/sass/main.sass:2
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/scss/parser.rb:1129:in `expected'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/script/lexer.rb:199:in `expected!'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/script/parser.rb:486:in `assert_done'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/script/parser.rb:50:in `parse'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/script/parser.rb:166:in `parse'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/script.rb:31:in `parse'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:875:in `parse_script'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:608:in `parse_property'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:597:in `parse_property_or_rule'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:578:in `parse_line'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:471:in `build_tree'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:490:in `append_children'
org/jruby/RubyArray.java:1603:in `each'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:489:in `append_children'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:480:in `build_tree'
org/jruby/RubyArray.java:1603:in `each'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:473:in `build_tree'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:490:in `append_children'
org/jruby/RubyArray.java:1603:in `each'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:489:in `append_children'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:345:in `_to_tree'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:315:in `_render'
d:/program files (x86)/scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:262:in `render'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:140:in `compile'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:139:in `compile'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/logger.rb:45:in `red'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:138:in `compile'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:118:in `compile_if_required'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:103:in `run'
org/jruby/RubyArray.java:1603:in `each'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:101:in `run'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:100:in `run'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/watch_project.rb:147:in `recompile'
org/jruby/RubyMethod.java:133:in `call'
org/jruby/RubyProc.java:268:in `call'
org/jruby/RubyProc.java:228:in `call'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/path.rb:73:in `run_callback'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/path.rb:55:in `callback_action'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/path.rb:35:in `update'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/state/directory.rb:39:in `modified'
org/jruby/RubyArray.java:1603:in `each'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/state/directory.rb:37:in `modified'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/state/directory.rb:18:in `refresh'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `run'
org/jruby/RubyArray.java:1603:in `each'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `run'
org/jruby/RubyKernel.java:1419:in `loop'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:15:in `run'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/monitor.rb:26:in `run'
d:/program files (x86)/scout/vendor/gems/gems/fssm-0.2.9/lib/fssm.rb:70:in `monitor'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/watch_project.rb:87:in `perform'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/base.rb:18:in `execute'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/project_base.rb:19:in `execute'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:43:in `perform!'
d:/program files (x86)/scout/vendor/gems/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:15:in `run!'
d:\program files (x86)\scout\bin\compass:12:in `(root)'
*/
body:before {
  white-space: pre;
  font-family: monospace;
  content: "Syntax error: Invalid CSS after \"black\": expected expression (e.g. 1px, bold), was \";\"\A         on line 2 of C:/Users/Andrej/Documents/My Dropbox/Web Projects/First good website/sass/main.sass\A \A 1: C:/Users/Andrej/Documents/My Dropbox/Web Projects/First good website/sass/main.sass"; } 
```

请帮助并提前感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T03:08:00.563

问题可能是你正在写一个`.sass`文件，你可能想要写一个`.scss`文件。`.sass`是与常规 CSS 不兼容的旧版本语法。

# r - 在 R 中求解积分会产生错误“积分可能发散”

> ID：15892586
> 
> 赞同：0
> 
> 时间：2013-04-09T03:05:13.960
> 
> 标签：r, integration

我正在尝试求解 R 中的积分。但是，当我尝试求解该积分时出现错误。

我试图解决的方程如下：

```
$$ C_m = \frac{{abs{x}}e^{2x}}{\pi^{1/2}}\int_0^t t^{-3/2}e^{-x^2/t-t}dt $$ 
```

![在此处输入图像描述](https://i.stack.imgur.com/Bka7l.png)

我正在使用的代码如下：

```
a <- seq(from=-10, by=0.5,length=100)

## Create a function to compute integration
Cfun <- function(XX, upper){
  integrand <- function(x)x^(-1.5)*exp((-XX^2/x)-x)
  integrated <- integrate(integrand, lower=0, upper=upper)$value
  (final <- abs(XX)*pi^(-0.5)*exp(2*XX)*integrated) }

b<- sapply(a, Cfun, upper=1) 
```

我得到的错误如下：

```
Error in integrate(integrand, lower = 0, upper = upper) : 
  the integral is probably divergent 
```

这是否意味着我无法求解积分？

任何可能解决此问题的方法都将受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:42:02.433

您可以将调用包装`Cfun`在 try 语句中

```
# note using `lapply` so errors don't coerce the result to character
b <- lapply(a, function(x,...) try(Cfun(x, ...), silent = TRUE), upper = 1) 
```

如果您想用`NA`值替换错误并打印集成引发错误的警告

```
Cfun <- function(XX, upper){
  integrand <- function(x)x^(-1.5)*exp((-XX^2/x)-x)
  int <- try(integrate(integrand, lower=0, upper=upper), silent = TRUE)
  if(inherits(int ,'try-error')){
    warning(as.vector(int))
    integrated <- NA_real_
  } else {
    integrated <- int$value
  }
  (final <- abs(XX)*pi^(-0.5)*exp(2*XX)*integrated) } 
```

* * *

## 编辑（捂脸时刻）

出现错误是因为您的函数未定义时`t=0`（您在被积函数中除以 t）。

```
Cfun <- function(XX, upper){
  integrand <- function(x)x^(-1.5)*exp((-XX^2/x)-x)
  # deal with xx=0
  if(isTRUE(all.equal(XX, 0)){
      warning('The integrand is not defined at XX = 0')
      return(NA_real_)
  }
  # deal with other integration errors
  int <- try(integrate(integrand, lower=0, upper=upper), silent = TRUE)
  if(inherits(int ,'try-error')){
    warning(as.vector(int))
    integrated <- NA_real_
  } else {
    integrated <- int$value
  }
  (final <- abs(XX)*pi^(-0.5)*exp(2*XX)*integrated) } 
```

# linux - 加上最后一个ip地址加100

> ID：15892589
> 
> 赞同：0
> 
> 时间：2013-04-09T03:05:22.550
> 
> 标签：linux, shell

我在 foo.txt 中有一个 ip 地址列表，如下所示： 现在我想像这样 ping 它们： 这意味着 foo.txt 中的最后一个 ip 数字加上 100。 我怎样才能编写一个 shell 脚本来自动执行此操作. 谢谢您的回答。
`192.168.0.10
192.168.0.11
192.168.0.12
...`

`ping -c 2 192.168.0.110
ping -c 2 192.168.0.111
...`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:11:28.020

你可以使用 awk：

```
 awk 'BEGIN { FS = "." };
      { system("ping -c 2 "  $1 "." $2 "." $3 "." $4+100) }' foo.txt 
```

这将字符串用“.”分隔，然后使用 system 通过命令进行系统调用，并将最后一个八位字节加 100。

# scheme - 一对落入的序列中的数字

> ID：15892591
> 
> 赞同：1
> 
> 时间：2013-04-09T03:05:35.200
> 
> 标签：scheme, racket

我想找出一对落在序列中的数字。我正在尝试编写一个程序来验证 f(1, n) = 2n - 2 和 f(m+1, n+1) = 2f(m, n)。当我打电话（号码 99、100）时它工作，但当我打电话（号码 100、100）时它不起作用。为什么它不起作用？(100, 100) 的序列号是多少？

这是我的程序：

```
(define (number m n)
   (if (= m 1)
       (- (* 2 n) 2)
       (* 2 (number (- m 1) (- n 1))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:36:14.323

为什么您认为该程序“不起作用”？正如所定义的那样，该函数正确地实现了所需的公式 - 并且当两者`m`和`n`相等时总是会导致这种基本情况：

```
(- (* 2 1) 2) ; if m equals 1 then n equals 1 
```

上面的内容当然会返回`0`，并且递归中的所有乘法都将取消，因为您将一遍又一遍地乘以零：

```
(* 2 (* 2 ... (* 2 0)))
=> 0 
```

所以问题不在于程序本身，而在于它正在实施的公式。确保它是正确的。

# iphone - iOS NSMutableArray 坚持

> ID：15892593
> 
> 赞同：0
> 
> 时间：2013-04-09T03:05:44.510
> 
> 标签：iphone, ios, objective-c, uitableview, nsmutablearray

我正在尝试`UITableView`从包含目录中文件的数组中填充

```
//in my header
@property (strong, nonatomic) NSMutableArray *files;
//in my tableView:cellForRow:atIndexPath:
static NSString *cellid = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellid];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellid];
    cell.textLabel.text = [_files objectAtIndex:indexPath.row];
}
return cell; 
```

（在调用此方法之前`_files`设置为等于）这有效，并显示了正确的文件。`[[NSFileManager defaultManager] contentsOfDirectoryAtPath:[self downloadsDir];`问题是如果我在目录中添加一个文件，然后使用`tableView reloadData`，将添加一个新文件，但标题将与另一个文件重复。例子

添加文件前的表格视图

```
++++++++++++++++++++++++++
text.txt
++++++++++++++++++++++++++
testing.txt
++++++++++++++++++++++++++ 
```

添加文件后的表格视图`othertest.txt`

```
++++++++++++++++++++++++++
text.txt
++++++++++++++++++++++++++
testing.txt
++++++++++++++++++++++++++
testing.txt
++++++++++++++++++++++++++ 
```

它应该是

```
++++++++++++++++++++++++++
text.txt
++++++++++++++++++++++++++
testing.txt
++++++++++++++++++++++++++
othertest.txt
++++++++++++++++++++++++++ 
```

如果我重新启动应用程序，它将显示正确的文件。但出于某种原因，它会这样做。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:08:29.707

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellid];
    cell.textLabel.text = [_files objectAtIndex:indexPath.row];
}
return cell; 
```

除了分配新单元格时，您没有设置单元格标签文本。试试这个：

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellid];
}
cell.textLabel.text = [_files objectAtIndex:indexPath.row];
return cell; 
```

相同的代码，但我已经移动了设置单元格文本的行，以便在重用单元格以及创建新单元格时执行它。

# python - 比较Python中两个不同字典的值？

> ID：15892598
> 
> 赞同：1
> 
> 时间：2013-04-09T03:06:19.933
> 
> 标签：python

我已经搜索了以前的帖子，但没有找到一个提问的人正在做我想做的事情：

我正在尝试查看两个单独的字典并找到键相同但值不同的实例。字典*大小不一*样。当我找到具有不同值的匹配键时，我只想将键添加到列表中，因为我不再需要这些值。

现在我正在这样做。它的效率非常低，但对于 200 件左右的物品来说还可以。不过，我有一些超过 200,000 项的词典，这就是它成为主要问题的地方：

```
 for sourceKey, sourceValue in sourceDict.iteritems():
         for targetKey, targetValue in targetDict.iteritems():
              if targetKey == sourceKey:
                   if targetValue != sourceValue:
                        diffList.append(sourceKey) 
```

有没有办法做到这一点？我正在使用 Python 2.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:09:56.593

```
for key in set(sourceDict).intersection(targetDict):
    # Now we have only keys that occur in both dicts
    if sourceDict[key] != targetDict[key]:
        diffList.append(key) 
```

正如 DSM 在他（现已删除）的答案中指出的那样，您可以使用列表理解或生成器来执行此操作：

```
(k for k in set(sourceDict).intersection(targetDict) if sourceDict[key] != targetDict[key]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:11:02.977

```
[k for k in source_dict if target_dict.get(k, object()) != source_dict[k]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:18:57.373

1 班轮：`[key for key in set(sourceDict).intersection(targetDict) if sourceDict[key] != targetDict[key]]`

# core-data - 使用 NSExpression 组合实体并返回 NSArray 或 NSArray 元素

> ID：15892599
> 
> 赞同：0
> 
> 时间：2013-04-09T03:06:22.860
> 
> 标签：core-data, nsarray, nsfetchrequest, nsexpression

我希望`NSFetchRequest`我`UITableViewController`可以根据特定属性对类似记录（实体）进行分组。我目前做了一个两步过程，但我相信可能有某种方式可以使用`+ (NSExpression *)expressionForAggregate:(NSArray *)collection`.

有人可以帮助提供适当的代码吗？

这是我的两步过程的代码，它返回一个数组的数组：

```
+(NSArray *)getTopQforDogByProgram2:(Dog *)dog
                     inProgram:(RunProgramTypes)programType
              inManagedContext:(NSManagedObjectContext *)context {
    NSString *searchString;

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Run"];
    request.predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat:@"dog.callName = '%@'",dog.callName]];
    NSSortDescriptor *classSortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"runClass" ascending:NO];
    request.sortDescriptors = [NSArray arrayWithObject:classSortDescriptor];

    NSError *error = nil;
    NSArray *dataArray = [context executeFetchRequest:request error:&error];

    NSMutableArray *returnArray = [[NSMutableArray alloc] init];
    if ( [dataArray count] > 0 ) {
        NSMutableArray *pointArray = [[NSMutableArray alloc] init];
        for ( Run *run in dataArray ) {
            if ( ! [returnArray count] ) {
                [pointArray addObject:run];
                [returnArray addObject:pointArray];
            } else {
                BOOL wasSame = FALSE;
                for ( NSMutableArray *cmpArray in returnArray ) {
                    Run *cmpRun = [cmpArray lastObject];
                    if ( cmpRun.runClass   == run.runClass ) {
                        [cmpArray addObject:run];
                        wasSame = TRUE;
                        break;
                    }
                }
                if ( ! wasSame ) {
                    pointArray = [[NSMutableArray alloc] init];
                    [pointArray addObject:run];
                    [returnArray addObject:pointArray];

                }
            }
        }
    }
    return returnArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:14:42.607

您可以使用 fetch results 控制器为您进行切片，如下所示：

```
NSFetchedResultsController* controller = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                         managedObjectContext:context
                                                                           sectionNameKeyPath:@"runClass"
                                                                                    cacheName:nil];
NSMutableArray* sections = [[NSMutableArray alloc] initWithCapacity:[controller sections] count];
for (id<NSFetchedResultsSectionInfo> section in [controller sections]) {
    NSMutableArray* sectionCopy = [NSMutableArray arrayWithArray:[section objects]];
    [sections addObject:sectionCopy];
} 
```

或者自己做：（假设结果按 排序`runClass`）

```
NSMutableArray* sections = [NSMutableArray new];
NSMutableArray* currentSection = [NSMutableArray new];
for (Run* run in dataArray) {
    Run* lastObject = (Run*)[currentSection lastObject];
    if (lastObject && (run.runClass == lastObject.runClass)) {
        currentSection = [NSMutableArray new];
        [sections addObject:currentSection];
    }
    [currentSection addObject:run];
} 
```

# java - 我需要有关布尔数组的帮助

> ID：15892601
> 
> 赞同：-3
> 
> 时间：2013-04-09T03:07:12.473
> 
> 标签：java, arrays

我被困在阵列问题上，可以使用一些帮助。

> 第一个访客将占据中间位置：

```
 _ _ _ _ _ X _ _ _ _ 
```

> 下一位访客将在左侧空白区域的中间，因为这是最长的未占用位置序列：

```
 _ _ X _ _ X _ _ _ _

etc... 
```

我有一个良好的开端，需要帮助继续。这是我的代码，请帮助我。我已经创建了布尔数组，但我不知道如何打印出它的内容或查看它，所以我知道哪些元素是真或假，所以我可以填写数组的其余部分。

```
import java.util.Scanner;
public class Homework06 {

    public static void main(String[] args) {
        Scanner keyboard = new Scanner (System.in);
        int answer = 0;
        String start="";

        answer=promptForNumberOfStalls();
        int[] stalls=new int[answer];
            boolean firstPerson[]=new boolean[answer];
        start=firstPerson(answer);
        occupyOneMore(answer, start, firstPerson);
    }

    public static int promptForNumberOfStalls (){
        int answer =0;
        Scanner keyboard = new Scanner (System.in);
        System.out.println("Hello, how many stalls will there be");
        answer = keyboard.nextInt();
        return answer;
    }
    public static String firstPerson( int answer){
        boolean[] firstPerson = new boolean[answer];
        String start="";
        for(int i=0;i<firstPerson.length;i++){
            if(firstPerson[i])
                start+="X";
            else
                start+="_";
        }
        return start;
    }

    public static boolean[] occupyOneMore(int answer, String start, boolean[] firstPerson){
    int middle=answer/2+1;
    firstPerson[answer/2+1]=true;
    for (int i = 0; i < firstPerson.length; i++) {
        if (firstPerson[i] == true) {
            middle = (int) Math.floor(i / 2); // use Math.ceil to round up
            System.out.println(middle);

            if(middle==i){
                  firstPerson[i]=true;
              }
        }

    }

    System.out.println(Arrays.toString(firstPerson));
    return firstPerson;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:11:43.817

```
int answer = 0;
boolean firstPerson[] = new boolean[answer]; 
```

第一个问题是您的数组以 0 的长度开始。数组是固定的，因此您必须定义大小。

PS：我们为你做功课无济于事。

**编辑：**关于您的评论

你必须找到左边的中间。因此，遍历数组并找到大小，直到达到真实值。

```
int middleLeft;
for (int i = 0; i < firstPerson.length; i++) {
    if (firtPerson[i] == true) {
        middleLeft = (int) Math.floor(i / 2); // use Math.ceil to round up
    }
} 
```

一旦你有了变量，就在数组中的那个位置`middleLeft`放一个值。`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:18:23.290

要打印数组的内容，请使用[`Arrays.toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)：

```
boolean[] ba = new boolean[]{true,true,false,true};
System.out.println(Arrays.toString(ba)); 
```

将产生输出

```
[true,true,false,true] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:28:16.873

我相信你可以使用这样的东西在你的循环中打印值：

```
System.out.println(firstPerson[s] ? "true" : "false"); 
```

或用于`System.out.print(...);`将值保持在同一行。

# php - 使用 PHP 从 MySQL 数据库中获取特殊字符

> ID：15892610
> 
> 赞同：7
> 
> 时间：2013-04-09T03:08:01.643
> 
> 标签：php, mysql, utf-8, character-encoding

我有一个包含特殊字符（例如™）的表。

这个字符可以使用phpMyAdmin和其他软件输入和查看，但是当我在PHP中使用SELECT语句输出到浏览器时，我得到了带有问号的菱形。

表类型是 MyISAM。编码是 UTF-8 Unicode。排序规则是 utf8_unicode_ci。

html头的第一行是

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

在输出之前，我尝试在字符串上使用 htmlentities() 函数。没运气。

我还尝试在任何输出之前将其添加到 php（没有区别）：

```
header('Content-type: text/html; charset=utf-8'); 
```

最后，我尝试在初始 mysql 连接下方添加它（这导致显示额外的奇数字符）：

```
$db_charset = mysql_set_charset('utf8',$db); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T04:12:05.510

下面的代码对我有用。

```
$sql = "SELECT * FROM chartest";
mysql_set_charset("UTF8");
$rs = mysql_query($sql);
header('Content-type: text/html; charset=utf-8');
while ($row = mysql_fetch_array($rs)) {
    echo $row['name'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:39:05.923

有几件事可能会有所帮助。首先，即使您在标头中将字符集设置为 UTF-8，这可能还不够。我之前已经看到浏览器忽略了这一点。尝试通过在 html 的头部添加它来强制它：

```
<meta charset='utf-8'> 
```

接下来，如此[处](https://stackoverflow.com/questions/2446778/how-to-display-unicode-data-with-php#answer-2446818)所述，尝试这样做：

```
mysql_query ("set character_set_client='utf8'");
mysql_query ("set character_set_results='utf8'");
mysql_query ("set collation_connection='utf8_general_ci'"); 
```

**编辑**

所以我刚刚做了一些阅读，玩了一下。首先让我告诉你，尽管我在评论中提到了，在`utf8_encode()`这里`utf8_decode()`不会帮助你。它有助于实际理解 UTF-8 编码。[我发现UTF-8](http://en.wikipedia.org/wiki/UTF-8)上的 Wikipedia 页面非常有帮助。假设您从数据库返回的值实际上已经是 UTF-8 编码的，并且您只需在获取它后立即将其转储出来，那么它应该没问题。

如果你对数据库结果做任何事情（特别是以任何方式操作字符串）并且你不使用 PHP [mbstring](http://php.net/manual/en/book.mbstring.php)库中的 unicode 感知函数，那么它可能会搞砸，因为标准 PHP 字符串函数不知道 unicode .

一旦你了解了 UTF-8 编码的工作原理，你就可以做一些很酷的事情：

```
$test = "™";
for($i = 0; $i < strlen($test); $i++) { 
    echo sprintf("%b ", ord($test[$i]));
} 
```

它会输出如下内容：

```
11100010 10000100 10100010 
```

这是一个正确编码的 UTF-8 '™' 字符。如果从数据库中检索到的数据中没有这样的字符，那么就会出现问题。

要检查，请尝试使用以下命令搜索您知道结果中的特殊字符`mb_strpos()`：

```
var_dump(mb_strpos($db_result, '™')); 
```

如果返回的不是其他任何东西，`false`那么数据库中的数据就可以了，否则我们至少可以确定这是 PHP 和数据库之间的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-09T04:01:46.470

您需要先执行以下查询。

```
mysql_query("SET NAMES utf8"); 
```

# key-value - 如何在十亿个对象上获得对 dynamodb 的独特计数？

> ID：15892611
> 
> 赞同：10
> 
> 时间：2013-04-09T03:08:03.477
> 
> 标签：key-value, amazon-dynamodb

获取我的 dynamodb 中存储了多少不同对象的最有效方法是什么？

例如我的对象有十个属性，我想根据 3 个属性获得不同的计数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T14:24:48.410

如果您需要计数器，最好使用 AtomicCounters ( [http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithDDItems.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithDDItems.html) )。在您的情况下，DynamoDB 不支持由 3 个属性组成的开箱即用键，除非您将它们连接起来，因此可以选择创建一个冗余表，其中键是这 3 个属性的连接，并且每个属性都由您管理对象，还更新 AtomicCounter（添加、删除、更新 - 实际上不需要）。

然后您只需查询计数器，避免扫描。因此，提高检索数据的速度是空间复杂度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:00:05.823

使用适当的 ScanFilter 执行扫描（在这种情况下，三个属性为 not_null），并使用 withCount(true) 仅返回匹配记录的数量而不是记录本身。

[有关一些示例代码，请参阅文档](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/LowLevelJavaScanning.html)。

# sip - 调制解调器 IP 还是 VOIP？

> ID：15892614
> 
> 赞同：1
> 
> 时间：2013-04-09T03:08:31.297
> 
> 标签：sip, voip, modem

对于旧版应用程序，我需要通过调制解调器连接到远程服务器。我没有对我的服务器的物理访问权限，因此无法选择添加真正的调制解调器。

有谁知道：

1.  提供基于 IP 的调制解调器的服务？像 Twilio 之类的东西，但仅适用于调制解调器。
2.  允许我在连接到 VOIP 提供商的特定 COM 端口上模拟调制解调器的调制解调器/SIP 客户端？

任何建议将不胜感激。我看到很多人有这个问题，但没有很好的解决方案。

谢谢！

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T20:24:33.807

我认为您正在寻找的是[PPP](http://en.wikipedia.org/wiki/Point-to-Point_Protocol)（或者可能是[PPPoE](http://en.wikipedia.org/wiki/Point-to-Point_Protocol_over_Ethernet)）。PPP 非常普遍，今天仍然大量使用，几乎在您有家庭连接互联网连接的任何地方。

您需要查看您正在使用的任何操作系统，并查看它们提供的功能，以便能够通过调制解调器连接两台计算机并在它们之间创建 TCP/IP 连接。这样您就不需要更改程序，因为它会显示为网络连接。

在 Windows 下，您可以使用它来接受[传入连接](http://technet.microsoft.com/en-us/library/cc753616%28v=ws.10%29.aspx)。

# bash - 如何在 Zsh 中配置 gerrit refs？

> ID：15892624
> 
> 赞同：3
> 
> 时间：2013-04-09T03:10:01.160
> 
> 标签：bash, zsh

在我的团队中，我们使用 gerrit 进行代码审查。

如您所知，gerrit 使用神奇的 'refs/for/*'。

* * *

因为我不想打字

```
git push origin HEAD:refs/for/* 
```

每次我推送到远程，

我试图更改我的 git 存储库的配置，如下所示。

```
git config remote.origin.push refs/heads/*:refs/for/* 
```

* * *

更改配置在 bash 中效果很好，

但它在我的 zsh 中失败，并出现如下错误。

```
zsh: no matches found: refs/heads/*:refs/for/* 
```

我认为在 zsh 中使用星号与 bash 有所不同，

但我无法确切知道问题所在。

* * *

我怎么解决这个问题？还是在 zsh 中不可能？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T03:55:12.910

默认情况下，当 bash 无法 glob 时，它会将整个模式放入未更改的参数中。当 zsh 无法 glob 时，它根本不会运行命令，在大多数情况下我觉得这更方便。两种 shell 都可以配置，zsh 至少还有其他三种模式：do like bash、从参数中删除模式和从参数中删除模式，除非没有匹配的模式。这些行为是通过取消`NOMATCH`设置或设置`CSH_NULL_GLOB`或`NULL_GLOB`分别实现的。

我建议保持当前行为并使用各种转义方法：（`'refs/heads/*:refs/for/*'`双引号也可以）或`refs/heads/\*:refs/for/\*`.

# java - 有没有人想出如何让 javafx tableview 像 jtable 一样工作？

> ID：15892630
> 
> 赞同：6
> 
> 时间：2013-04-09T03:10:33.537
> 
> 标签：java, swing, jtable, javafx, tableview

我遵循了[官方 tableview 教程中的](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CEGFCFEB)*示例 13-11 单元格编辑的替代解决方案*，但我希望我的行为像. 这意味着当一个单元格获得焦点时，就可以对其进行编辑了，使用箭头键或 Enter 键应该会立即提交编辑并移至下一个单元格。`tableview``jtable`

这是我到目前为止所做的：

首先，我添加了

```
table.getSelectionModel().setCellSelectionEnabled(true); 
```

然后我尝试修改类`EditingCell`：

```
class EditingCell extends TableCell<Person, String> {

    private TextField textField;

    public EditingCell() {
    }

    @Override
    public void updateSelected(boolean selected) {
        super.updateSelected(selected);
        if (selected) {
            createTextField();
            setText(null);
            setGraphic(textField);
            textField.requestFocus();
            textField.selectAll();
        } else {
            String value = textField.getText();
            if (value != null) {
                commitEdit(value);
            } else {
                commitEdit(null);
            }
        }
    }

    @Override
    public void cancelEdit() {
        super.cancelEdit();

        setText((String) getItem());
        setGraphic(null);
    }

    @Override
    public void updateItem(String item, boolean empty) {
        super.updateItem(item, empty);

        if (empty) {
            setText(null);
            setGraphic(null);
        } else {
            if (isEditing()) {
                if (textField != null) {
                    textField.setText(getString());
                }
                setText(null);
                setGraphic(textField);
            } else {
                setText(getString());
                setGraphic(null);
            }
        }
    }

    private void createTextField() {
        textField = new TextField(getString());
        textField.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
        textField.focusedProperty().addListener(new ChangeListener<Boolean>() {
            @Override
            public void changed(ObservableValue<? extends Boolean> arg0,
                    Boolean arg1, Boolean arg2) {
                if (!arg2) {
                    commitEdit(textField.getText());
                }
            }
        });
        textField.setOnKeyPressed(new EventHandler<KeyEvent>() {
            @Override
            public void handle(KeyEvent t) {
                if ((t.getCode() == KeyCode.ENTER) || (t.getCode() == KeyCode.UP) || (t.getCode() == KeyCode.DOWN) || (t.getCode() == KeyCode.LEFT) || (t.getCode() == KeyCode.RIGHT)) {
                    t.consume();
                    String value = textField.getText();
                    if (value != null) {
                        commitEdit(value);
                    } else {
                        commitEdit(null);
                    }
                } else if (t.getCode() == KeyCode.ESCAPE) {
                    cancelEdit();
                }
            }
        });
    }

    private String getString() {
        return getItem() == null ? "" : getItem().toString();
    }
} 
```

我得到的`tableview`是一团糟 - 我必须单击两次 Enter 键才能结束编辑，它不会提交编辑而是取消它。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-12T21:09:33.007

遗憾的是，该教程缺少一些稍后在 TextFieldTableCell 类中引入的代码修复，以便 ENTER 正常工作（[RT-34685 - 使用 onAction 而不是 onKeyPressed](https://bugs.openjdk.java.net/browse/JDK-8096726)和[RT-28132 - 调用 requestFocus()](http://hg.openjdk.java.net/openjfx/8/master/rt/rev/24e60f5070be)）。

这是一个工作示例，它是[TextFieldTableCell](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/cell/TextFieldTableCell.html)代码的简化版本，它还使用[Node.fireEvent()](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#fireEvent-javafx.event.Event-)在提交后移动到下一个单元格（模仿 KeyPressed 事件）：

```
class EditingCell extends TableCell<Person, String>
{
    private TextField   textField;

    public EditingCell()
    {
    }

    @Override
    public void startEdit()
    {
        if (!isEditable() || !getTableView().isEditable()
                || !getTableColumn().isEditable())
        {
            return;
        }
        super.startEdit();

        if (isEditing())
        {
            if (textField == null)
            {
                createTextField();
            }
            setText(null);
            setGraphic(textField);
            textField.selectAll();
            // requesting focus so that key input can immediately go into
            // the TextField (see RT-28132)
            textField.requestFocus();
        }
    }

    @Override
    public void cancelEdit()
    {
        super.cancelEdit();

        setText((String) getItem());
        setGraphic(null);
    }

    @Override
    public void updateItem(String item, boolean empty)
    {
        super.updateItem(item, empty);

        if (empty)
        {
            setText(null);
            setGraphic(null);
        } else
        {
            if (isEditing())
            {
                if (textField != null)
                {
                    textField.setText(getString());
                }
                setText(null);
                setGraphic(textField);
            } else
            {
                setText(getString());
                setGraphic(null);
            }
        }
    }

    private void createTextField()
    {
        textField = new TextField(getString());
        textField.setMinWidth(this.getWidth() - this.getGraphicTextGap() * 2);
        textField.focusedProperty().addListener(new ChangeListener<Boolean>()
        {
            @Override
            public void changed(ObservableValue<? extends Boolean> arg0,
                    Boolean arg1, Boolean arg2)
            {
                if (!arg2)
                {
                    commitEdit(textField.getText());
                }
            }
        });

        // Use onAction here rather than onKeyReleased (with check for
        // Enter), as otherwise we encounter RT-34685
        textField.setOnAction(t -> {
            commitEdit(textField.getText());
            t.consume();
        });
        textField.setOnKeyReleased(t -> {
            if (t.getCode() == KeyCode.ESCAPE)
            {
                cancelEdit();
                t.consume();
            }
        });

        textField.setOnKeyPressed(new EventHandler<KeyEvent>()
        {
            @Override
            public void handle(KeyEvent t)
            {
                if ((t.getCode() == KeyCode.UP) || (t.getCode() == KeyCode.DOWN)
                        || (t.getCode() == KeyCode.LEFT)
                        || (t.getCode() == KeyCode.RIGHT))
                {
                    // Commit the current text
                    commitEdit(textField.getText());

                    // Let's move out simulating a key press in this Cell
                    KeyEvent event = new KeyEvent(t.getSource(), t.getTarget(),
                            KeyEvent.KEY_PRESSED, "", "", t.getCode(), false, false,
                            false, false);
                    EditingCell.this.fireEvent(event);
                }
            }
        });
    }

    private String getString()
    {
        return getItem() == null ? "" : getItem().toString();
    }
} 
```

希望这可以帮助！

# javascript - 理解 Coffee Script 中的类扩展和实例属性

> ID：15892631
> 
> 赞同：2
> 
> 时间：2013-04-09T03:10:39.340
> 
> 标签：javascript, oop, coffeescript

我刚刚进入 Coffee Script 并且在弄清楚类扩展的工作方式时遇到了问题。似乎在父类上定义为实例属性的属性在扩展该类时被实现为静态属性。

我有一个名为 Foo 的类，我想将其用作两个子类 Bar 和 Goo 的基类。我给 Foo 一个名为 foob 的实例属性和一个添加 foob 的方法，如下所示：

```
class Foo
    foobs:[]
    addFoob: (foob) ->
        @foobs.push(foob) 
```

我用 Bar 和 Goo 扩展 Foo，并创建新实例，如下所示：

```
class Bar extends Foo
    otherMethod: ->
        alert 'doing other stuff'

class Goo extends Foo
    secondMethod: ->
        alert 'doing second stuff'

barInstance = new Bar()
gooInstance = new Goo() 
```

但是当我向 barInstance 添加一个 Foob 时，它也会被添加到 gooInstance！

```
barInstance.addFoob('test')

console.log gooInstance.foobs (outputs ["test"]) 
```

显然我在这里做错了什么。我希望 barInstance 和 gooInstance 都有自己的“foobs”属性，但由于某种原因，似乎即使 foobs 是 Foo 上的实例属性，它也被分配为 Bar 和 Goo 上的类属性。关于如何解决这个问题的任何想法？还是我不知道有不同的语法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:20:27.480

问题在于你如何声明`foobs`——你真的希望它在实例上，所以它应该在一个`constructor`函数中声明。目前它是在`prototype`所有实例共享的哪个上声明的。如果我们看看你的`Foo`声明编译成什么，我们可以看到是这样的：

```
class Foo
  foobs:[]
  addFoob: (foob) ->
    @foobs.push(foob) 
```

编译为：

```
var Foo = (function() {
  function Foo() {}
  Foo.prototype.foobs = [];
  Foo.prototype.addFoob = function(foob) {
    return this.foobs.push(foob);
  };
  return Foo;
})(); 
```

你想要做的是声明一个这样的构造函数：

```
class Foo
  constructor: (@foobs = [])->     
  addFoob: (foob) ->
    @foobs.push(foob) 
```

这将为. 的`foobs`每个实例添加一个数组`Foo`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T03:18:38.990

这是因为您将数组放置到`Foo`原型上，因此它将在所有实例中共享。相反，您需要为每个实例创建一个数组`Foo`并直接添加它。

```
class Foo
  foobs:null, # This isn't needed, but it's good for documentation.
  constructor: ->
    @foobs = []
  addFoob: (foob) ->
    @foobs.push(foob) 
```

换个角度看，你所拥有的基本上是：

```
sharedFoobs = []

class Foo
  foobs: sharedFoobs 
```

这使得永远不会创建新数组更加清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T03:17:57.883

该`foobs`数组应该在构造函数中初始化，因为现在所有实例都将共享同一个`foobs`数组，因为您在`prototype`.

您可以安全地在 上定义原始值，`prototype`因为这些值是不可变的，但是您应该避免将对象存储在 中`prototype`，除非您希望在所有实例之间共享这些对象。

# c++ - 在基类和扩展类之间的关系的情况下没有匹配函数错误

> ID：15892632
> 
> 赞同：0
> 
> 时间：2013-04-09T03:10:40.530
> 
> 标签：c++, matching, base-class

我有两个类：TJob 和 Reload_Job。Reload_Job 从 TJob 扩展：

```
class reload_job: public TJob 
```

我有一个功能：

```
void run_all_threads(std::vector<TJob*> &jobs){...} 
```

和一个电话：

```
std::vector<reload_job*> jobs;
thread_pool->run_all_threads(jobs); //error: No matching function 
```

A 在那次通话中出错。但是，如果我将函数的形式更改为：

```
void run_all_threads(TJob* job) 
```

和电话：

```
reload_job* job;
thread_pool->run_all_threads(job); it work 
```

你们能帮我解释一下为什么在 Tjob 指针向量的情况下我得到一个编译错误。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:31:23.347

您的问题源于 vector< reload_job* > 不是 vector< TJob* > 的子类型，即使 reload_job 是 TJob 的子类型。

在您的第一个示例中，编译器搜索带有签名的函数`run_all_threads(vector < reload_job* >)`。该签名没有功能。

```
void run_all_threads(std::vector<TJob*> &jobs){...}
std::vector<reload_job*> jobs;
thread_pool->run_all_threads(jobs); //error: No function matches run_all_threads(vector <reload_job*>) 
```

但是，在您的第二种情况下， reload_job 是 TJob，因此编译器匹配函数。

```
void run_all_threads(TJob* job)
reload_job* job;
thread_pool->run_all_threads(job); The compiler matches the function 
```

要解决您的问题，请将函数的参数更改为`vector< TJob* >`. 您可以将 reload_jobs 存储在 a 中`vector < TJob* >`，因为 reload_job 是 TJob。

```
void run_all_threads(std::vector<TJob*> &jobs){...} // function signature doesn't change
std::vector<TJob*> jobs; // this vector can store TJob and/or reload_job
thread_pool->run_all_threads(jobs); // now the types match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:28:10.827

我写了类似的类骨架，我没有看到任何问题。你能提供更多关于你的类实现的细节吗？

类 TJob { 公开：TJob() { }

};

类 reload_job：公共 TJob

{

公开：重新加载作业（）{

}

void run_all_threads(std::vector &jobs) {

} };

诠释主要（）{

```
std::vector<TJob*>vec;
vec.push_back(new reload_job());

reload_job rj;
rj.run_all_threads(vec); 
```

返回0；

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:31:54.123

该函数需要 a`std::vector<TJob*>`并且您尝试将其传递给`std::vector<reload_job*>`. 真的就是这么简单。这些是不同的向量，即使它们的内容是可转换的。

# cocos2d-iphone - Cocos2d-iphone 2.0设置AutoRotate为横向，但首次加载时视图位置错误

> ID：15892636
> 
> 赞同：0
> 
> 时间：2013-04-09T03:11:04.250
> 
> 标签：cocos2d-iphone, landscape, autorotate

该应用程序仅设置为横向。

在 Project->target->Summary->Supported Interface Orientations 中，我启用了 2 个横向图标（左侧和右侧）。

在 AppDelegate.m 中，编写了以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
      return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

应用在设备上运行时，视图显示在默认cocos2d图标之后的开头，所有位置都错了，都移到了右下侧。当我旋转屏幕时，一切正常，都在正确的位置。

怎么了？

我还尝试了以下方法：我禁用了 In Project->target->Summary->Supported Interface Orientations 中的所有图标。AppDelegate 中的代码仍在使用中。然后一开始的视图还可以，但是屏幕可以旋转到纵向。

……

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:49:40.367

还将这两个用于 iOS6 方向，在 AppDelegate 中。

```
-(NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
}

- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

[看这个问题并回答一次。](https://stackoverflow.com/questions/12488515/ccdirector-shareddirectorwinsize-is-wrong/12488926#12488926)

# php - 将 SOAP XML 响应转换为 PHP 对象或数组

> ID：15892639
> 
> 赞同：10
> 
> 时间：2013-04-09T03:11:40.937
> 
> 标签：php, xml, web-services, soap, simplexml

我正在使用 cURL 向 SOAP 服务发送请求，我在 POST Body 中发送包含参数的 XML，作为响应，我收到：

网络服务：[http ://lcbtestxmlv2.ivector.co.uk/soap/book.asmx?WSDL](http://lcbtestxmlv2.ivector.co.uk/soap/book.asmx?WSDL)

```
<?xml version="1.0" encoding="UTF-8"?>
    <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
       <soap:Body>
          <SearchResponse xmlns="http://ivectorbookingxml/">
             <SearchResult>
                <ReturnStatus>
                   <Success>true</Success>
                   <Exception />
                </ReturnStatus>
                <SearchURL>http://www.lowcostholidays.fr/dl.aspx?p=0,8,5,0&amp;date=10/05/2013&amp;duration=15&amp;room1=2,1,0_5&amp;regionid=9</SearchURL>
                <PropertyResults>
                   <PropertyResult>
                      <TotalProperties>215</TotalProperties>
                      <PropertyID>1795</PropertyID>
                      <PropertyName>Hotel Gaddis</PropertyName>
                      <Rating>3.0</Rating>
                      <Country>Egypte</Country>
                      <Resort>Louxor</Resort>
                      <Strapline>Cet établissement confortable propose un très bon service à un bon rapport qualité-prix. Cet hôtel de 6 étages compte 55 chambres et comprend une terrasse, une réception avec coffre-fort et ascenseur,</Strapline>
                      <Description>Cet établissement confortable propose un très bon service à un bon rapport qualité-prix. Cet hôtel de 6 étages compte 55 chambres et comprend une terrasse, une réception avec coffre-fort et ascenseur,...</Description>
                      <CMSBaseURL>http://lcbtestxml1.ivector.co.uk/content/DataObjects/Property/Image/</CMSBaseURL>
                      <MainImage>image_1795_v1.jpg</MainImage>
                      <MainImageThumbnail>imagethumb_1795_v1.jpg</MainImageThumbnail>
                      <SearchURL>http://www.lowcostholidays.fr/dl.aspx?p=0,8,5,0&amp;date=10/05/2013&amp;duration=15&amp;room1=2,1,0_5&amp;regionid=9&amp;propertyid=1795</SearchURL>
                      <RoomTypes>
                         <RoomType>
                            <Seq>1</Seq>
                            <PropertyRoomTypeID>690039000</PropertyRoomTypeID>
                            <MealBasisID>3</MealBasisID>
                            <RoomType>Twin/double Room</RoomType>
                            <RoomView />
                            <MealBasis>Petit Déjeuner</MealBasis>
                            <NonRefundableRates>false</NonRefundableRates>
                            <SubTotal>150.58</SubTotal>
                            <Discount>0</Discount>
                            <Total>150.58</Total>
                            <Adults>2</Adults>
                            <Children>1</Children>
                            <Infants>0</Infants>
                            <Errata />
                         </RoomType>
                         <RoomType>
                            <Seq>1</Seq>
                            <PropertyRoomTypeID>690039001</PropertyRoomTypeID>
                            <MealBasisID>7</MealBasisID>
                            <RoomType>Twin/double Room</RoomType>
                            <RoomView />
                            <MealBasis>Demi-Pension</MealBasis>
                            <NonRefundableRates>false</NonRefundableRates>
                            <SubTotal>291.64</SubTotal>
                            <Discount>0</Discount>
                            <Total>291.64</Total>
                            <Adults>2</Adults>
                            <Children>1</Children>
                            <Infants>0</Infants>
                            <Errata />
                         </RoomType>
                         <RoomType>
                            <Seq>1</Seq>
                            <PropertyRoomTypeID>690039002</PropertyRoomTypeID>
                            <MealBasisID>5</MealBasisID>
                            <RoomType>Double/twin Room</RoomType>
                            <RoomView />
                            <MealBasis>Pension Complète</MealBasis>
                            <NonRefundableRates>false</NonRefundableRates>
                            <SubTotal>529.22</SubTotal>
                            <Discount>0</Discount>
                            <Total>529.22</Total>
                            <Adults>2</Adults>
                            <Children>1</Children>
                            <Infants>0</Infants>
                            <Errata />
                         </RoomType>
                      </RoomTypes>
                   </PropertyResult>
                </PropertyResults>
             </SearchResult>
          </SearchResponse>
       </soap:Body>
    </soap:Envelope> 
```

我对 XML 数据没有足够的经验。我花了几个小时试图将 XML 响应转换为 PHP 对象或数组，但没有任何成功。

我需要阅读所有 PropertyResults。

PHP代码：

```
$xml = simplexml_load_string($soap_xml_result);

$xml->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');
$xml->registerXPathNamespace('xsi', 'http://www.w3.org/2001/XMLSchema-instance');
$xml->registerXPathNamespace('xsd', 'http://www.w3.org/2001/XMLSchema');

$test = (string) $xml->Body->SearchResponse->SearchResult->SearchURL;
var_export($test); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-02-03T21:07:07.977

另一个解决方案，唯一对我有用的解决方案：

```
$xml = $soap_xml_result;
$xml = preg_replace("/(<\/?)(\w+):([^>]*>)/", '$1$2$3', $xml);
$xml = simplexml_load_string($xml);
$json = json_encode($xml);
$responseArray = json_decode($json, true); // true to have an array, false for an object
print_r($responseArray); 
```

享受 ：）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T08:29:06.797

bksi 的提示并没有那么错误，但是从技术上讲，因为这是 XML，您只需要正确访问命名空间元素。通过使用 XPath 表达式并将 namspace-uri 注册到您自己的前缀，这更容易：

```
$soap = simplexml_load_string($soapXMLResult);
$soap->registerXPathNamespace('ns1', 'http://ivectorbookingxml/');
$test = (string) $soap->xpath('//ns1:SearchResponse/ns1:SearchResult/ns1:SearchURL[1]')[0];
var_dump($test); 
```

输出：

```
string(100) "http://www.lowcostholidays.fr/dl.aspx?p=0,8,5,0&date=10/05/2013&duration=15&room1=2,1,0_5&regionid=9" 
```

如果不想使用XPath，则需要在遍历的时候指定命名空间，如果元素本身没有前缀，则只有元素本身的命名空间中的子元素可以直接使用。由于根元素是前缀，您首先需要遍历响应：

```
$soap     = simplexml_load_string($soapXMLResult);
$response = $soap->children('http://schemas.xmlsoap.org/soap/envelope/')
                     ->Body->children()
                         ->SearchResponse
; 
```

然后你可以使用`$response`你所知道的变量：

```
$test = (string) $response->SearchResult->SearchURL; 
```

因为该元素没有前缀。当返回更复杂的结果时，这可能是最好的，因为您可以轻松访问所有响应值。

您的问题类似于：

*   [使用 PHP 从 SOAP 响应中解析 CDATA](https://stackoverflow.com/questions/13201867/parse-cdata-from-a-soap-response-with-php)

也许那里的代码/描述也有帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-24T11:02:37.857

您可以考虑通过 DOM Document 传递 SOAP 响应，然后将其转换为 simplexml 对象。

```
<?php
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($soap_response);
libxml_clear_errors();
$xml = $doc->saveXML($doc->documentElement);
$xml = simplexml_load_string($xml);
$response = $xml->body->envelope->body->searchresponse;
//print_r($response); exit;
echo $response->searchresult->returnstatus->success;
echo '<br>';
echo $response->searchresult->searchurl;
?> 
```

但是，这可能会导致响应中的特殊字符出现问题，例如 é 和 à。否则，它可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T03:15:27.357

嗯。您应该使用 SOAP 客户端来执行此操作，而不仅仅是发送 SOAP 请求。PHP 集成了 SOAP 功能 [http://php.net/manual/en/book.soap.php](http://php.net/manual/en/book.soap.php)。

有像 NuSOAP [http://sourceforge.net/projects/nusoap/](http://sourceforge.net/projects/nusoap/)这样的自定义肥皂库。

大多数 php 框架也有 SOAP 库。

# javascript - 任何已知的 IE10 JavaScript 怪癖？

> ID：15892641
> 
> 赞同：2
> 
> 时间：2013-04-09T03:12:01.857
> 
> 标签：javascript, jquery, internet-explorer-10

对于这个问题的含糊之处，请提前道歉。我将列出我所知道的关于这个问题的尽可能多的细节，诚然，这并不多。非常令人困惑。

背景：我开发了一个非常大的应用程序，几乎完全是 JS。即使在非常严格的设置下，它也会通过 linting（JSLint 和 JSHint）。它完美地适用于：

*   IE7
*   IE8
*   IE9
*   火狐 3.5+
*   Safari（无论 OS X 上的最新版本是什么......而且可能很早以前）
*   铬（所有版本）

但是在 IE10 中，应用程序的一部分根本无法运行。奇怪的是，它不会向 IE10 开发者控制台抛出任何错误。在 Firebug 或 Chrome Inspector 中也没有抛出任何错误，这并不奇怪，因为它在这些浏览器中运行良好。在所有代码都通过了所有 linting 之后，我开始手动逐行检查它，并没有看到任何异常。

我想知道 IE10 JavaScript 引擎是否有任何已知的怪癖？除了我已经检查过我的应用程序的一些极其具体的事情之外，在 SO 上进行谷歌搜索和搜索得到的信息很少。

我可以提供一个代码示例......但它会是一个相当大的文件，专门用于不工作的功能（请注意，这个应用程序非常模块化，所以大约 95% 的工作）。

我正在考虑只添加标签以强制 IE8 模式或类似的东西，如果最坏的情况变得最糟，但我想我会在这里抛出一个冰雹玛丽。在此先感谢您的任何见解，我意识到我并没有付出太多，但这让我感到非常困惑。我以为IE10应该最终修复IE！这么多。

(fwiw 该应用程序使用 jQuery 1.7 但没有其他库/框架)

编辑：从评论中，我将尝试提升 jQuery 版本，看看是否有帮助。除此之外，我将发布不起作用的“模块”的编辑代码示例！尽管几乎没有什么可做的，但感谢大家提供有用的建议。

# sql - Oracle SQL Out 查询两张表

> ID：15892642
> 
> 赞同：0
> 
> 时间：2013-04-09T03:12:10.617
> 
> 标签：sql, oracle

```
CREATE TABLE Products (
ID int,
name VARCHAR(70), 
price NUMBER(8,2),
primary key (ID, name)
);

drop table Instock;
/* Delete the tables if they already exist */

create table Instock (
    ID int,
    quantity int
); 
```

我的数据库中有两个表。我想要两个表显示一个输出作为一个看起来像这样的表

```
ID Name Price Quantity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:50:28.567

```
SELECT A.ID,A.NAME,A.PRICE,B.QUANTITY FROM Products A,Instock B WHERE A.ID=B.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T12:25:43.883

您可以尝试这个来创建新表（除了将数据放在那里之外，这还会创建表）

`CREATE TABLE MY_TABLE as SELECT A.ID,A.NAME,A.PRICE,B.QUANTITY FROM Products A,Instock B WHERE A.ID=B.ID`

# php - 正确组合转义字符以在 javascript 中注入 PHP？

> ID：15892643
> 
> 赞同：0
> 
> 时间：2013-04-09T03:12:13.670
> 
> 标签：php

我已经尝试了所有我知道的组合，但无法做到正确！

```
echo  <<<EOF

     <a href="javascript:popup('$comments')">Popup!</a>   

EOF; 
```

我想将 $comments 中包含的字符串传递给弹出窗口，但我似乎无法获得转义字符和连接的正确组合。请帮忙！

TIA

编辑：这是进入我提到的字符串的 HTML。

```
$comments.= "<b>" . $row['comName'] . "</b><br><i>" . $row['comment'] . "</i><br><br>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:15:21.523

您需要先将字符串转义为有效的 Javascript/JSON 以保留 Javascript 语法，然后转义 Javascript 以保留其嵌入的 HTML 的语法：

```
$js = sprintf('javascript:popup(%s)', json_encode($comments));
printf('<a href="%s">Popup!</a>', htmlspecialchars($js)); 
```

由于这很痛苦，因此您应该真正尝试使用[*不显眼的 Javascript*](http://en.wikipedia.org/wiki/Unobtrusive_Javascript)，它将 Javascript 与 HTML 分开。

# android - onJsAlert 后的 Android webview 没有响应点击

> ID：15892644
> 
> 赞同：11
> 
> 时间：2013-04-09T03:12:15.280
> 
> 标签：android, jquery-mobile

我已经覆盖了我的 WebChromeClient 的 onJsAlert 行为，例如：

```
WebChromeClient wvcc = new WebChromeClient() {
            @Override
            public boolean onJsAlert(WebView view, String url, String message, final JsResult result) {
    //...
    return true;
    }
} 
```

我的应用程序成功处理了 Js 警报并抑制了原始警报。但是，在警报事件之后，我无法再在我的 webview 中单击网页上的按钮（在 listview 的列表项中）。我目前正在使用 jquery mobile 来构建我的网站。

还有什么我应该注意的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-26T14:32:36.713

我刚刚遇到了完全相同的问题。我想生成一个自定义的 android 对话框而不是警报，这是最终的解决方案：

```
myWebView.setWebChromeClient(new WebChromeClient() {
    @Override
    public boolean onJsAlert(WebView view, final String url, String message,
            JsResult result) {

        AlertDialog.Builder builder = new AlertDialog.Builder(
                MainActivity.this);
        builder.setMessage(message)
                .setNeutralButton("OK", new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        arg0.dismiss();
                    }
                }).show();
        result.cancel();
        return true;
    }
}); 
```

关键是`result.cancel();`and `return true;`，我测试了几种组合，唯一没有触发默认JS警报并且没有引起触摸问题的就是这个组合

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-06T09:04:21.050

你应该调用 result.confirm() 方法，我的解决方案是：

```
 public boolean onJsAlert(WebView view, String url, String message,
                final JsResult result) {
            Log.i("MainActivity", "onJsAlert url=" + url + ";message=" + message);
            Toast.makeText(getApplicationContext(), message, Toast.LENGTH_LONG).show();
            result.confirm();
            return true;
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-08T18:06:41.833

我也遇到了类似的问题（但`onJsPrompt`在我的情况下），建议的解决方案对我不起作用。我已经接到了处理程序的`result.cancel()/result.confirm()`来电`return true`。修复的关键是在源代码中找到[`JsDialogHelper`](https://github.com/android/platform_frameworks_base/blob/7de7e0b0dd61acba813dec3a07d29f1d62026470/core/java/android/webkit/JsDialogHelper.java)。

这是我发现解决我的问题的行：

```
builder.setOnCancelListener(new CancelListener()); 
```

完整的处理程序代码：

```
 @Override
  public boolean onJsPrompt(WebView view, String url, String message, String defaultValue, final JsPromptResult result)
  {
    final EditText data = new EditText(view.getContext());
    AlertDialog.Builder b = new AlertDialog.Builder(view.getContext())
    .setTitle(view.getTitle())
    .setView(data)
    .setMessage(message)
    .setOnCancelListener(new CancelListener(result)) // if this line is missing, WebView remains unresponsive after the dialog is shown and closed once
    .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener()
    {
      @Override
      public void onClick(DialogInterface dialog, int which)
      {
        result.confirm(data.getText().toString());
      }
    })
    .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener()
    {
      @Override
      public void onClick(DialogInterface dialog, int which)
      {
        result.cancel();
      }
    });

    b.show();

    return true;
  } 
```

其中`CancelListener`可以定义为一个简单的存根类：

```
private class CancelListener implements DialogInterface.OnCancelListener,
DialogInterface.OnClickListener
{
  CancelListener(JsResult result)
  {
    mResult = result;
  }

  private final JsResult mResult;

  @Override
  public void onCancel(DialogInterface dialog)
  {
    mResult.cancel();
  }

  @Override
  public void onClick(DialogInterface dialog, int which)
  {
    mResult.cancel();
  }
} 
```

我不确定这是否是 WebView 中的错误，或者是否**需要**始终定义取消侦听器以保持 webview 的对话框正常工作。

# sql - SQL - 如何在只返回一行的同时检查一列的多个值？

> ID：15892650
> 
> 赞同：3
> 
> 时间：2013-04-09T03:12:49.807
> 
> 标签：sql, sql-server, reporting-services

对不起，如果这个问题措辞很奇怪。

我正在写一份报告，我有一个包含这样字段的表格......

```
 applicationID statusid statuscreationdate

      123                  1  3-18-2013
      123                  2  3-27-2013
      124                  1  3-29-2013
      125                  1  4-1-2013
      125                  2  4-3-2013 
```

我只想返回 statusid 为 1 的行，但我还想检查每个 applicationid 是否存在 statusid 为 2 的行。因此，上表所需的查询将产生：

```
 123 3-18-2013
     125 4-1-2013 
```

任何帮助，将不胜感激。如果需要更多信息，请告诉我。我希望在包含必要数量的信息的同时尽可能简短和简单。

谢谢你的时间。

编辑：更正了所需的结果部分

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T03:15:57.957

这个问题叫做`Relational Division`

```
SELECT  applicationID, MAX(statuscreationdate) date
FROM    TableName
WHERE   statusID IN (1, 2)             -- list of statusID 
GROUP   BY applicationID 
HAVING  COUNT(DISTINCT statusID) = 2   -- no of statusID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2f885/1)
*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T03:19:25.383

尝试

```
 Select * From TableName t
 Where statusID = 1
    And Exists(Select * From tablename
               Where applicationID = t.applicationID 
                  And statusID = 2) 
```

# iphone - UISearchDisplayController 未正确显示自定义单元格

> ID：15892651
> 
> 赞同：11
> 
> 时间：2013-04-09T03:12:55.220
> 
> 标签：iphone, ios, objective-c, uitableview, uisearchdisplaycontroller

所以我有一个包含部分和行的 tableView，它使用自定义单元格类。自定义单元格有一个图像视图和一些标签。表格视图工作正常，搜索工作正常，除了搜索不显示我的自定义单元格类中的任何标签，只显示具有正确图像的 imageView。我很困惑为什么会这样，特别是因为图像仍然显示，而不是标签。这是一些代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

//TODO: problem with search view controller not displaying labels for the cell, needs fixing
JSBookCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if(cell == nil) {
    cell = [[JSBookCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

JSBook *book = nil;
//uses the appropriate array to pull the data from if a search has been performed
if(tableView == self.searchDisplayController.searchResultsTableView) {
    book = self.filteredTableData[(NSUInteger)indexPath.section][(NSUInteger)indexPath.row];
}
else {
    book = self.books[(NSUInteger)indexPath.section][(NSUInteger)indexPath.row];
}

FFMetaData *data = [self.ff metaDataForObj:book];
cell.titleLabel.text = book.title;
cell.priceLabel.text = [NSString stringWithFormat:@"$%@", book.price];
cell.authorLabel.text = book.author;
cell.descriptionLabel.text = book.description;

cell.dateLabel.text = [self.formatter stringFromDate:data.createdAt];
if(book.thumbnail == nil) {
    cell.imageView.image = [UIImage imageNamed:@"messages.png"];
    [self setCellImage:cell withBook:book atIndex:indexPath withTableView:tableView];
}
else {
    cell.imageView.image = [UIImage imageWithData:book.thumbnail];
}

return cell; 
```

}

在这个问题之前，我在 tableView 中只有一个部分，并且一切正常。现在我有多个部分和行，正如我所描述的那样，搜索被破坏了。有任何想法吗？另外，因为`[tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];`我曾经有`[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];`但现在如果我使用它，当我尝试搜索时会遇到一个奇怪的异常：

NSInternalInconsistencyException'，原因：'在无效索引路径（2 个索引 [1, 1]）处请求矩形'

所以这也让我感到困惑。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T06:42:15.020

```
[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

不起作用，因为表格视图单元格已注册到特定的表格视图。这不适用于您的搜索结果控制器表视图。您确实自己发现了这一点并切换到：

```
[tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

这是正确的做法。

此外，在情节提要中设计您的自定义单元格对于您的搜索结果控制器将不起作用，因为您无法为**搜索表格视图**设计单元格，只能用于主表格视图。

是的，您可以像在此处一样为您的搜索表视图注册该类，

```
[self.searchDisplayController.searchResultsTableView registerClass:[JSBookCell class] forCellReuseIdentifier:CellIdentifier]; 
```

但这不会有您在情节提要的自定义单元格中设计的任何东西。您必须以编程方式创建所有内容。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-09-11T14:00:16.810

当我尝试搜索以及如何解决它时，我遇到了同样的异常。

```
 if (tableView == self.searchDisplayController.searchResultsTableView) {
        cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    }else{
       cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];     
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-20T04:41:49.900

我对带有搜索栏和搜索显示的 UITableView 的总结，使用故事板原型中设计的相同自定义单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifierAsYouDefinedInStoryboard";

    CustomTableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        /* searchResultsTableView code here */
    } else {
        /* Base tableView table code here */
    }

    /* more cell code here */

    return cell;
} 
```

然后为 searchResultsTableView 添加此行以匹配您的自定义单元格高度：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.searchDisplayController.searchResultsTableView setRowHeight:self.tableView.rowHeight];

     /* more of your viewDidLoad code */
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-21T10:46:38.180

如果您在 UIViewController 中使用 UITableView 并且想要重用您在 StoryBoard 中为您的 searchDisplayController 创建的单元格标识符，请尝试以下操作：

StoryBoard > UIViewController > Reference Outlets > 将 tableView 链接到 UIViewController 的 .h 文件，并将其命名为 tableView 之类的东西，所以你应该有这样的东西：

```
@property (strong, nonatomic) IBOutlet UITableView *tableView; 
```

所以不要这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]
} 
```

做这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T04:44:01.890

如果您在情节提要中创建一个单元格，则不应注册该类（这实际上搞砸了）。如果您在 code 中制作单元格，则您注册类，如果您在 nib 中制作单元格，则注册一个 nib。如果您在情节提要中完成，则无需注册任何内容，您使用 dequeueReusableCellWithIdentifier:forIndexPath:，并且您根本不需要 if (cell == nil) 子句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-11T11:38:02.137

试试这个，它对我有用

```
JSBookCell * cell = [yourtableview dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

# mysql - Mysql COUNT子查询

> ID：15892655
> 
> 赞同：0
> 
> 时间：2013-04-09T03:13:13.883
> 
> 标签：mysql, aggregate-functions

我对自己几乎完成的几张表有一个相当复杂的查询。最后一个方面只涉及汇总一个项目收到的投标数量，不过我正在为特定部分中的所有项目执行此操作。查询工作正常，除了当我尝试将聚合 (/* */) 添加到查询时它只返回 1 行。阅读它似乎我需要一个子查询，但我不完全确定如何去做。这是迄今为止的查询：

```
SELECT s.id as section_id, s.name as section, i.id as item_id, 
i.title as item_title, item.location_id as item_location_id,
i.slug as item_slug, i.description as item_description, 
i.price as item_price, UNIX_TIMESTAMP(i.date_added) as item_date_added, 
c.id, c.city, c.particular_id, p.id, p.particular /*,COUNT(o.i_id) as interest*/

FROM section as s
INNER JOIN item as i
ON s.id = i.section_id
INNER JOIN city as c
ON i.location_id = c.id
INNER JOIN particular as p
ON c.particular_id = p.id

/*LEFT JOIN offer as o
ON o.job_id = i.id*/

WHERE s.id = 2 
```

该代码的工作原理是它返回我期望的所有行，直到引入 /* */ 代码，现在它只返回 1 行。

您能给我的任何帮助将不胜感激

谢谢

强尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:16:50.997

如果你正在做聚合，你必须有 group bys，例如：

```
 SELECT s.name, COUNT(i.id)
       FROM section as s
 INNER JOIN item as i
   GROUP BY s.name 
```

将返回部分名称和在其中找到的项目数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:22:05.400

它应该可以解决您的问题：

```
SELECT s.id as section_id, s.name as section, i.id as item_id, 
    i.title as item_title, item.location_id as item_location_id,
    i.slug as item_slug, i.description as item_description, 
    i.price as item_price, UNIX_TIMESTAMP(i.date_added) as item_date_added, 
    c.id, c.city, c.particular_id, p.id, p.particular,
    (SELECT COUNT(o.i_id) FROM offer AS o ON o.job_id = i.id) AS interest
FROM section as s
INNER JOIN item as i
    ON s.id = i.section_id
INNER JOIN city as c
    ON i.location_id = c.id
INNER JOIN particular as p
    ON c.particular_id = p.id
WHERE s.id = 2 
```

# java - Wicket：在 DropDownChoice 项目选择事件上更新模型

> ID：15892657
> 
> 赞同：0
> 
> 时间：2013-04-09T03:13:31.947
> 
> 标签：java, scala, wicket

我需要在选择 DropDownChoice 项目后立即更新模型或对象。

贝娄是我正在工作的代码：

```
add(new ListView[Company]("listCompanies", listData) {

    override protected def onBeforeRender() {
      //
      // ...
      super.onBeforeRender()
    }

    def populateItem(item: ListItem[Company]) = {
      var company = item.getModelObject()

      //...

      val listClients: java.util.List[Client] = clientControler.listClients

      item.add(new DropDownChoice("clientSelection", listClients,new ChoiceRenderer[Client]("name"))) 
```

在具有 Company Object 属性的 Listview 中，选择 DropDownChoice 的 name 属性后，模型 Company 将使用选定的 Client Name 进行更新。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:35:52.370

您需要添加更新行为：

```
 add(new DropDownChoice<Client>("clientSelection", listClients)
                .add(new AjaxFormComponentUpdatingBehavior("onchange") {

                    private static final long serialVersionUID = 1L;

                    @Override
                    protected void onUpdate(AjaxRequestTarget target) {

// update your model here
// then you need to add model to target
                        target.add();
                    }
                })); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T06:29:52.873

我认为您可以覆盖 onSelectionChanged。但是您还需要重写 wantOnSelectionChangedNotifications 以返回 true 以使其工作。像这样的东西。

```
 DropDownChoice<Client> dropDownChoice = new DropDownChoice("clientSelection", listClients) {
        @Override
        protected boolean wantOnSelectionChangedNotifications() {
            return true;
        }

        @Override
        protected void onSelectionChanged(Object newSelection) {
            // Do something here when selection is changed
        }
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T13:02:46.867

我认为您可以在 DropDownChoice 上使用 AjaxEventBehavior：

```
item.add(new DropDownChoice("clientSelection", listClients,new ChoiceRenderer[Client("name")).add(new AjaxEventBehavior("change") {
        @Override
        protected void onEvent(AjaxRequestTarget target) {
            // TODO Auto-generated method stub
        }
    })) 
```

# c# - Gridview 总是返回单行

> ID：15892660
> 
> 赞同：1
> 
> 时间：2013-04-09T03:13:58.713
> 
> 标签：c#, asp.net

我正在使用下面的代码在带有特定过滤器的 gridview 中显示一些记录。如果父级小于 2 表示记录显示在网格中。但它总是返回单行，但我的最后一个数据表 dt 有超过五行。我该如何解决这个错误

```
try
{
    DataView dv = new DataView();
    dv = dt.DefaultView;
    dv.RowFilter = "FLD_PARENT=0";
    if (dv.Count < 2)
    {
        dv_pack.Visible = true;
        dt.DefaultView.Sort = "FLD_TYPE";
        grd_pack.DataSource = dt;
        grd_pack.DataBind();
     }
 }
 catch (Exception ex)
 {
     throw;
 } 
```

# visual-c++ - 如何针对 VES2008 编译 Greta？

> ID：15892661
> 
> 赞同：1
> 
> 时间：2013-04-09T03:14:20.777
> 
> 标签：visual-c++, compiler-errors

我针对 VES2008 编译了 Greta，它报告

```
error C2332: 'class' : missing tag name                                           
error C3306: 'regex::detail::<unnamed-tag>': unnamed class template is not allowed
error C2143: syntax error : missing ';' before '__builtin_alignof'                
error C2059: syntax error : '__builtin_alignof'                                   
error C2143: syntax error : missing ';' before '{'                                
error C2447: '{' : missing function header (old-style formal list?) 
```

相关源代码片段：

```
template< typename T >
class alignof
{
    struct helper
    {
        helper();
        char    m_c;
        T       m_t;
    };
public:
    enum { value = sizeof(helper)-sizeof(T) < sizeof(T) ? sizeof(helper)-sizeof(T) : sizeof(T) };
}; 
```

预编译后，

```
template< typename T >
class __alignof
{
    struct helper
    {
        helper();
        char    m_c;
        T       m_t;
    };
public:
    enum { value = sizeof(helper)-sizeof(T) < sizeof(T) ? sizeof(helper)-sizeof(T) : sizeof(T) };
}; 
```

谷歌搜索后我没有找到答案。是什么原因造成的以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:03:20.923

虽然`alignof`在 VS2008 中似乎不是保留字，但它是如此相似，[`_alignof`](http://msdn.microsoft.com/en-us/library/45t0s5f4.aspx)以至于它可能会混淆问题。

尝试将您的班级名称更改为不同的名称。

# caching - 如何使用 Cache.getOrElse(java.lang.String key, java.util.concurrent.Callable 块，int过期）

> ID：15892662
> 
> 赞同：2
> 
> 时间：2013-04-09T03:14:23.223
> 
> 标签：caching, playframework

如何使用 Cache.getOrElse(java.lang.String key, java.util.concurrent.Callable block, int expiration) 谁能给我一个例子？我的意思是如何使用“expiration”，我知道它意味着过期时间。

顺便说一句：我想保存一些对象到缓存，并设置一个过期时间。当过期时间，我可以将对象重置到缓存中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-02T14:46:45.590

假设您想`User`在缓存上设置对象，因为您设置`userId`为`key`和`user object`as `value`。如果需要设置过期时间，对于示例，我将其设置为 30 秒。

```
cache.set(userId, userObject, 30); 
```

在某个时间点，如果您想从缓存中获取用户对象（之前使用 userId 作为键设置），您可以尝试以下方式从缓存中获取用户对象。

```
User user = cache.get(userId); 
```

以上将返回用户对象，如果您在 30 秒内访问，否则将返回`NULL`. 这对于验证会话之类的情况来说是完美的。在某些情况下，您经常需要从缓存中检索值，因为以下是最好的方法。

```
User user = cache.getOrElse(userId, () -> User.get(userId), 30); 
```

1.  缓存将检查是否已将 userId 作为键，如果可用则立即返回用户对象并将过期时间进一步更新为 30 秒。
2.  如果给定的 userId 不可用，则调用可调用块并将 userId 设置为键，从 db 中获取用户对象作为值，并将过期时间设置为 30 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T19:27:12.020

过期是对象将在缓存中保留的秒数。如果您将 0 作为过期值传递，则缓存不会过期，您必须手动控制它。

getOrElse 所做的是检查缓存，如果对象不存在，则调用您正在传递的可调用块，并将结果添加到缓存中，以作为到期时间传递的秒数。

我的评论基于[Play Framework Cache Javadoc](http://www.playframework.com/documentation/2.0.4/api/java/play/cache/Cache.html#getOrElse)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T16:41:02.683

当我要显示动态和静态内容时，我会在控制器中使用 getOrElse。缓存静态，然后与动态部分一起渲染：

```
 try {

        Html staticHtml = Cache.getOrElse("static-content", () -> staticView.render(), 60 * 60);

        Html rendered = dynamicPage.render(arg1, arg2, staticHtml);
        return ok(rendered);

    } catch (Exception e) {
        e.printStackTrace();
        return internalServerError();
    } 
```

`staticView.render()`从视图返回一些 html。此视图不应调用任何其他动态页面，或者您隐藏了您不想隐藏的内容。

`60*60`表示我想存储一小时（60 秒乘以 60 分钟……好吧，`3600`如果你愿意，你可以写）

我应该补充一点，它使用指定的键从缓存中`getOrElse`获取`Object`（在这个例子中键是`static-content`），但是如果它找不到它，那么它调用返回一个对象的函数，然后在缓存中存储指定的时间量用那把钥匙。挺整洁的。

然后您可以调用其他（动态）页面并将 html 传递给它。

动态的东西将保持动态:)

# android - Android 蓝牙 .connect() 异常 Nexus 7 OBDII 适配器

> ID：15892665
> 
> 赞同：5
> 
> 时间：2013-04-09T03:15:08.147
> 
> 标签：android, bluetooth, connect, ioexception, obd-ii

我正在使用标准 API 程序连接到设备。特别是 OBDII 蓝牙适配器。

我有两个不同型号的 OBDII 蓝牙适配器。运行完全相同的代码，第一个将与我测试过的每部手机/平板电脑毫无问题地配对和连接。第二个将配对和连接正常，除了我的 Nexus 7 运行 android 4.2

它抛出一个 IO 异常：`read failed, socket might closed or timeout, read ret: -1`

认为这只是设备本身或较新版本的问题......但是另一个软件“扭矩”能够从我的 Nexus 7 连接到任一适配器。

所以我显然做错了/不同，这只是后来操作系统中的一个问题？？？

任何帮助解决这个问题将不胜感激。

```
 public void run() {
        Log.i(TAG, "BEGIN mConnectThread");
        setName("ConnectThread");

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception

            mmSocket.connect(); <=**This is where the exception is thrown

        } catch (IOException e) {
            Etype =  "Connection to: " + mmDevice.getName() + " at: "
                    + mmDevice.getAddress() + " failed: " + e.getMessage();
            connectionFailed();
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() socket during connection failure", e2);
            }
            // Start the service over to restart listening mode
            BluetoothChatService.this.start();
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T12:50:31.040

我知道这是一个老问题。但由于我无法在网上找到任何解决方案。搜索此内容的人可能对我发现的解决方法感兴趣：[IOException: read failed, socket might closed - Android 4.3 上的蓝牙](https://stackoverflow.com/questions/18657427/ioexception-read-failed-socket-might-closed-bluetooth-on-android-4-3/18786701#18786701)

# php - MySQL - 对话历史概述 - 从表中选择多个最新项目

> ID：15892670
> 
> 赞同：0
> 
> 时间：2013-04-09T03:15:48.103
> 
> 标签：php, mysql

通过在 PHP 中构建一个使用 API 发送和接收消息的自定义消息传递系统，我很高兴能够重新创建手机。我正在尝试在他们的桌面网站上模拟 Facebook 消息传递中的功能。

```
[Col 1]               [Col 2]
A list of the         Conversation View.
latest messages
received in order
of Newest to oldest 
```

## 我对第一列的查询有疑问。

我目前在 MySQL 中有一个具有以下结构的表：

```
CREATE TABLE IF NOT EXISTS `History` (
  `ID` int(10) NOT NULL AUTO_INCREMENT COMMENT 'MessageID',
  `Sender` varchar(10) NOT NULL,
  `Recipient` varchar(10) NOT NULL,
  `ExtReference` int(20) DEFAULT NULL,
  `Date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `Status` varchar(100) NOT NULL,
  `userid` int(3) NOT NULL,
  `Message` longtext NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=609 ; 
```

使用示例日期设置，例如：

```
INSERT INTO `History` (`ID`, `Sender`, `Recipient`, `ExtReference`, `Date`, `Status`, `userid`, `Message`) VALUES
(1, '0412345678', '0468888888', 33845909, '2013-03-17 04:17:34', '1', 11, 'Just testing....'),
(2, '0412345678', '0400222333', 33845910, '2013-03-17 04:17:35', '1', 11, 'Amazing'),
(3, '0412345678', '0411111111', 33847419, '2013-03-17 04:46:04', '1', 8, 'Nothing here to see'),
(4, '0412345678', '0400222333', 33850155, '2013-03-17 06:31:57', '1', 12, 'Hello there Mr IT Guru :-)'),
(5, '0400222333', '0412345678', 33850179, '2013-03-17 06:33:21', '1', 12, '[Write message here]'),
(6, '0412345678', '0411111111', 33955423, '2013-03-23 01:26:22', '1', 8, 'Hello Charles'),
(7, '0412345678', '0411111111', 33959071, '2013-03-23 03:08:26', '1', 13, 'Sample Message'),
(8, '0400222333', '0412345678', 33964111, '2013-03-23 05:27:51', '1', 13, 'How do I use this system?'),
(9, '0400222333', '0412345678', 34107503, '2013-03-30 03:13:38', '1', 12, 'Is this thing on?'),
(10, '0412345678', '0401411210', 34230869, '2013-03-05 00:18:09', '1', 16, 'Hello') 
```

（在这个例子中，我的号码是：0412345678）。SQL小提琴在这里：[http ://sqlfiddle.com/#!2/29197/1/0](http://sqlfiddle.com/#!2/29197/1/0)

我已经研究出如何获取在发件人和收件人列中使用的所有唯一号码的列表：

```
SELECT DISTINCT `Sender` AS phoneID FROM `History`
UNION
SELECT DISTINCT `Recipient` AS phoneID FROM `History` 
```

但我不知道如何将最新的日期和消息附加到这些数据中。

如果我只关注发送给我或由我发送的消息，我可以通过这两个获得某个地方：

```
SELECT `ID`, `Sender`, `Recipient`, MAX(`Date`), `Message` FROM History 
GROUP BY Sender
ORDER BY `History`.`Date` DESC 
```

或者

```
SELECT `ID`, `Sender`, `Recipient`, MAX(`Date`), `Message`, `Status` FROM History 
GROUP BY Recipient
ORDER BY `History`.`Date` DESC 
```

有什么想法吗？如果需要，我可以重新创建历史表布局。

我还需要稍后尝试在联系人表中加入带有人名的电话号码。

谢谢查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:31:11.417

可能不是最好的方法，但您可以结合您拥有的两个查询。就像是：

```
SELECT `ID`, `Sender`, `Recipient`,`Date`,`Message`,`Status` FROM
(
SELECT `ID`, `Sender`, `Recipient`, `Date`, `Message`,`Status` FROM History
  WHERE Sender = "0412345678"
GROUP BY Sender
UNION
SELECT `ID`, `Sender`, `Recipient`, MAX(`Date`), `Message`, `Status` FROM History 
  WHERE Recipient = "0412345678"
GROUP BY Recipient
) res

GROUP BY res.ID
ORDER BY res.Date DESC 
```

请注意，这是针对特定数字的。`WHERE`如果不需要，您可以删除这些子句。

# linux - 列出多播套接字

> ID：15892675
> 
> 赞同：11
> 
> 时间：2013-04-09T03:16:24.980
> 
> 标签：linux, sockets, multicast, netstat

我正在尝试列出 linux 系统上所有打开的多播套接字？netstat -g 列出了加入的组。为此，我可以使用任何其他实用程序吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-27T16:10:05.170

除此之外，`netstat -g`您还可以使用它来查看绑定到多播地址的所有套接字：

```
netstat -anu|sort -nk4 
```

这是所有 UDP 套接字的列表（无论是否多播）。查找 224.0.0.0 到 239.255.255.255 范围内的所有地址。这些是绑定到多播地址的套接字，无论它们是否加入多播组。这些将*只*接收此多播组的流量。

但：

实际上，用于接收多播流量的 UDP 套接字通常绑定到地址 0.0.0.0。这些可以接收所有单播和多播地址的 UDP 数据包，并且服务器通常会根据源 IP 地址进行一些额外的过滤。

因此，在上面的列表中，您可能还想查看绑定到 0.0.0.0 的 UDP 套接字，例如 0.0.0.0:5353，它很可能是 mDNS（avahi，zeroconf）服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-27T16:00:19.790

我认为没有一种工具可以为您提供该信息。

原因是多播套接字没有绑定到地址，它只参与多播组（IP_ADD_MEMBERSHIP）。一个套接字可以在同一个接口上加入多个不同的组，或者在不同的接口上加入同一个组，因此维护这些交叉引用毫无意义。内核公开的唯一信息在 /proc/net 中，在本例中为 /proc/net/igmp (<- netstat -g)。

# ruby-on-rails - Carrierwave/fog 正在将文件上传到 S3，但该应用仍在尝试使用本地路径访问图像

> ID：15892676
> 
> 赞同：1
> 
> 时间：2013-04-09T03:16:31.357
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave, fog

我知道这是一个广泛的问题，而且我咬得比我能咀嚼的要多一点，以便第一次尝试使用 rails 应用程序，但我在这里。

我尝试将图像上传/裁剪添加到基本状态应用程序。上传图像并使用载波裁剪它们工作得很好，但是当我开始使用 Fog 上传到 S3 时，我遇到了问题。

图像和它的不同大小似乎在 S3 上结束得很好，但应用程序仍在尝试以“/assets/uploads/entry/image/65/large_IMG_0035.jpg”的形式访问图像

在本地，它只是显示了一个损坏的图像，但在 Heroku 上它破坏了整个事情，因为

ActionView::Template::Error (uploads/entry/image/1/large_IMG_0035.jpg 未预编译

heroku 错误对我来说很有意义，因为它不应该存在。我已经梳理了应用程序，但不知道是什么迫使这个。我会发布任何人认为可行的代码？提前致谢！

**澄清：**

澄清一下，图片上传到 S3 很好，问题是应用程序如何尝试显示 image_url

该应用程序在资产管道中使用本地路径，而不是它实际上传到的 S3 路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T00:10:02.957

我遇到了同样的问题。在我的 Carrierwave Initializer 中，我设置`host`为`s3.amazonaws.com`但当我完全删除该行时，url 开始工作。

我希望这可以帮助您解决问题，我为此奋斗了几个小时！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:15:33.737

我相信这个问题与您在视图中访问图像的方式有关。

如果您通过以下方式在字段头像上安装了上传器：

```
class User < ActiveRecord::Base
  mount_uploader :avatar, AvatarUploader
end 
```

您将在您的 ERB 中访问它，如下所示：

```
 <%= image_tag(@user.avatar_url) %> 
```

我还建议观看有关该主题的以下 Railscast。

[http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:56:41.623

重读问题，我敢打赌这与使用 Herkou 的 Carrierwave 有关。

看看这个，看看它是否有帮助。

[https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-Carrierwave-work-on-Heroku](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Make-Carrierwave-work-on-Heroku)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-09T04:20:38.673

我不清楚你到底想达到什么目的。
但现在我有两个想法：

1.  对于 CDN 中的资产托管，您可以查看以下内容： [https ://devcenter.heroku.com/articles/cdn-asset-host-rails31](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)

2.  如果您希望图像成为模型关系的一部分，这是我的粗略想法：
    将图像路径放在表格列中。有关这方面的更多信息，您可以浏览carrierwave github 站点。（它有许多文档和教程）

# .net - 是否可以让 NServiceBus SOA 中的一个端点使用与其他端点不同的序列化程序？

> ID：15892679
> 
> 赞同：2
> 
> 时间：2013-04-09T03:16:45.867
> 
> 标签：.net, serialization, messaging, nservicebus

有点相关：[NServiceBus 端点是否可以使用不同的序列化程序来处理和发布？](https://stackoverflow.com/q/13035894/38360)

我们已经在我们的基础设施中广泛部署了 NServiceBus，并且它都是使用`XmlSerializer`. 但是，出现了一种一次性的情况，`XmlSerializer`即 不能满足我们的要求，所以我正在考虑`JsonSerializer`or `BinarySerializer`。

将整个基础架构中的每个端点更改为使用不同的序列化程序将在部署方面极具破坏性和浪费时间，但我无法弄清楚如何引入一个使用不同序列化程序的新端点......或者更确切地说，很容易将端点*本身*配置为使用备用序列化程序，但我不确定如何让任何其他端点*与之交谈*。

如果我使用 NServiceBus 3.x，我是否会坚持在整个架构中使用的一种序列化程序类型？我似乎记得读过一次，我认为在 NServiceBus 留言板上，可以在端点级别定义序列化，但是没有给出太多细节，写这个答案的人可能忽略了上面明显的互操作问题。

我希望架构看起来像这样：

```
+---------+      +------------+ (pub/sub) +------------+
| Web App |----->| Endpoint A |<--------->| Endpoint B |<-------> ...
+---------+      +------------+           +------------+
     |               (XML)                     (XML)
     |
     |           +------------+
     +---------->| Endpoint C |
                 +------------+
                     (JSON) 
```

当然，问题是，尽管我显然可以将端点 C 配置为`JsonSerializer`独占使用（并且对此没问题），但“Web 应用程序”仍然需要拥有自己的（仅发送）总线才能与端点 A 或端点 C。必须使用*一个*串行器配置该总线。由于它已经将消息发送到许多`XmlSerializer`基于 - 的端点，因此我不能将其切换为`JsonSerializer`. 而且我无法在配置或文档中找到指示 NServiceBus 以不同方式序列化某些消息的方法，无论是在消息级别还是在端点级别。我什至不确定 NSB 4/5 中的更改是否会在技术上支持这一点，因为它们都围绕着如何接收消息而*不是*发送*消息*。

是否有我缺少的配置方法或设置可以让我这样做？如果没有，还有哪些其他明智的选择？也许在 Web 应用程序中托管两个端点？或者也许是委托给其他序列化程序的自定义序列化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:54:29.120

您可以在 NSB 管道中使用传输级别的[消息修改器。](http://support.nservicebus.com/customer/portal/articles/894155-nservicebus-message-mutators-sample)可能是突变在处理过程中发生得太晚了，但值得一看。否则，您将需要实现您提到的自定义序列化程序来处理所有不同的格式。

另一个想法是在所有端点中打开网关。这将使您在所有端点上都使用 HTTP，我希望这能解决它。同样，我还没有证实这一点，只是提出了一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T12:52:16.933

从 NServiceBus 的第 5 版开始，我们已经为这个场景添加了一些基本支持，但最近在第 6 版中，它现在更加完整。

您可以在此处找到有关它的更多信息：

[https://particular.net/blog/build-a-babel-fish-nservicebus](https://particular.net/blog/build-a-babel-fish-nservicebus)

# google-maps - Google Maps API V 3 引荐来源网址配置

> ID：15892682
> 
> 赞同：0
> 
> 时间：2013-04-09T03:17:16.390
> 
> 标签：google-maps, google-maps-api-3

希望你没事。

如果您有以下网址：

[http://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=1](http://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=1)

[https://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=1](https://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=1)

您应该如何在 Google API 控制台中配置它？

尝试了几种配置，但没有成功。

欢迎任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:23:18.887

好的，这似乎有效：

[http://jeanpaulruizvallejo.com/pruebas/personales/plantillas/](http://jeanpaulruizvallejo.com/pruebas/personales/plantillas/) *

[https://jeanpaulruizvallejo.com/pruebas/personales/plantillas/](https://jeanpaulruizvallejo.com/pruebas/personales/plantillas/) *

[http://jeanpaulruizvallejo.com/pruebas/personales/plantillas/alpha-01/](http://jeanpaulruizvallejo.com/pruebas/personales/plantillas/alpha-01/) *

[https://jeanpaulruizvallejo.com/pruebas/personales/plantillas/alpha-01/](https://jeanpaulruizvallejo.com/pruebas/personales/plantillas/alpha-01/) *

[http://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=](http://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=) *

[https://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=](https://jeanpaulruizvallejo.com//pruebas/personales/plantillas/alpha-01/templatesViewer.php?cdPlantilla=) *

不管怎么说，还是要谢谢你 ：）

# ruby-on-rails - 乘客没有要加载配置/环境的此类文件

> ID：15892684
> 
> 赞同：1
> 
> 时间：2013-04-09T03:17:39.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, passenger

昨晚我试图对我的一个旧应用程序（Rails 3.0.0，Ruby 1.8.7）进行一些简单的更改，并在部署时遇到了许多问题。我正在使用 Moonshine 来处理部署。

我可以正常运行`cap deploy`，但随后出现以下乘客错误

```
no such file to load -- /srv/BBRatboard/releases/20130409025824/config/environment 
```

我不确定它是否相关，但是当我 ssh 进入盒子时，下面的整个配置文件夹`/srv/BBRatboard/current/config`是空的。这是设计使然还是我的部署出了问题？

许多人已经能够通过调整`environment.rb`文件（[https://www.sit.auckland.ac.nz/Ruby_on_Rails_deployment](https://www.sit.auckland.ac.nz/Ruby_on_Rails_deployment)）的权限来解决这个问题，但我什至无法在我的生产服务器上看到它。

我可以提供任何必要的细节，任何帮助将不胜感激，因为该应用程序目前处于损坏状态。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:24:56.237

经过一番挖掘，看起来这是不同版本的 capistrano/moonshine 以及它们处理共享资产的方式的问题。

我遵循了[https://github.com/railsmachine/moonshine/wiki/Moonshine.yml-files-not-being-loaded-or-configuration-object-appears-empty的建议](https://github.com/railsmachine/moonshine/wiki/Moonshine.yml-files-not-being-loaded-or-configuration-object-appears-empty)

即用 tmp 替换 config ，它现在似乎可以工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:30:33.997

您肯定需要文件存在于您的`config`目录中。看起来您的`cap deploy`输出显示它正在删除版本的`config`目录：

> 执行“chmod -R -- g+w /srv/BBRatboard/releases/20130409032459 && rm -rf -- /srv/BBRatboard/releases/20130409032459/system && ln -s -- /srv/BBRatboard/shared/system /srv /BBRatboard/releases/20130409032459/system && rm -rf -- /srv/BBRatboard/releases/20130409032459/log && ln -s -- /srv/BBRatboard/shared/log /srv/BBRatboard/releases/20130409032459/log && rm -rf -- /srv/BBRatboard/releases/20130409032459/pids && ln -s -- /srv/BBRatboard/shared/pids /srv/BBRatboard/releases/20130409032459/pids && rm -rf -- /srv/BBRatboard/releases /20130409032459/config && ln -s -- /srv/BBRatboard/shared/config /srv/BBRatboard/releases/20130409032459/config"

（看最后，`rm -ff -- /srv/BBRatboard/releases/20130409032459/config`）。虽然它也试图将目录符号链接`config`到`shared/config`目录（`ln -s -- /srv/BBRatboard/shared/config /srv/BBRatboard/releases/20130409032459/config`）

我猜该`shared/config`目录是在`cap deploy:setup`（基于建议在此之前运行它的[Moonshine 文档](https://github.com/railsmachine/moonshine/wiki/Tutorial)`cap deploy`）期间创建的。我会确保您`cap deploy:setup`事先运行了该任务，并检查您的`shared/config`目录是否`environment.rb`包含它声称丢失的文件等内容。

# ajax - 保存后从支持 bean 渲染更新的组件

> ID：15892685
> 
> 赞同：2
> 
> 时间：2013-04-09T03:17:46.037
> 
> 标签：ajax, dynamic, jsf-2, renderpartial

我一直在努力创建一个动态表来捕获所有已更新的单元格（以便更快地保存），然后在保存后刷新/重新渲染这些单元格。

到目前为止，我已经创建了表，所有更新的项目都通过 ajax 侦听器很好地捕获，但现在我无法在保存后刷新/重新渲染这些更新的组件。

页面中的代码片段：

```
<h:form id="formMain" prependId="false">
  <div id="contentWrapper">
    <p:messages id="messages" severity="warn, error" autoUpdate="true" closable="true" />
    <div style="float:right; position:relative; top: -3px;">
      <h:commandButton id="btnSaveUpdates" styleClass="save_updates_button">
        <f:ajax execute="@this" listener="#{remediationDetail.processUpdates}"/>
      </h:commandButton>
     </div>
   <h:panelGroup id="detailEdit" styleClass="clear_left" layout="block">
     <h:dataTable id="tblDetails" styleClass="slate_table remediation" value="#{remediationDetail.details}" var="dataItem">
                    <c:forEach items="#{remediationDetail.detailHeaders}" var="key" varStatus="looper">
                    <h:column>
                        <f:facet name="header">#{key.fieldDefinition.fieldConfiguration.customLabel}</f:facet>
                      <c:if test="#{key.fieldDefinition.dataType.name eq 'Number'}">
                        <h:panelGroup id="detailNumberPanel#{looper.index}">
                            <h:inputText id="txtDetailNumber#{looper.index}" rendered="#{remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}" styleClass="remediation_textbox error_marker" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}">
                                            <f:convertNumber maxFractionDigits="0" maxIntegerDigits="19"/>
                                            <f:ajax event="change" execute="@this" render="@none" listener="#{remediationDetail.markChangedEntity}"/>
                                            <f:attribute name="entity" value="#{dataItem.entityList[looper.index]}"/>
                                        </h:inputText>
                                        <h:outputText id="txtDetailNumberOut#{looper.index}" rendered="#{not remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}"></h:outputText>
                                    </h:panelGroup>
                              </c:if>
                      <c:if test="#{key.fieldDefinition.dataType.name eq 'Decimal'}">
                        <h:panelGroup id="detailDecimalPanel#{looper.index}">
                            <h:inputText id="txtDetailDecimal#{looper.index}" rendered="#{remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" converterMessage="Value provided is not a valid Decimal" styleClass="remediation_textbox error_marker" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}">
                                            <f:convertNumber maxFractionDigits="2" maxIntegerDigits="19"/>
                                            <f:ajax event="change" execute="@this" render="@none" listener="#{remediationDetail.markChangedEntity}"/>
                                            <f:attribute name="entity" value="#{dataItem.entityList[looper.index]}"/>
                                        </h:inputText>
                                        <h:outputText id="txtDetailDecimalOut#{looper.index}" rendered="#{not remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}">
                                            <f:convertNumber maxFractionDigits="2" maxIntegerDigits="19"/>
                                        </h:outputText>
                                    </h:panelGroup>
                            </c:if>
                      <c:if test="#{key.fieldDefinition.dataType.name eq 'Date'}">
                        <h:panelGroup id="detailDatePanel#{looper.index}">
                                        <h:inputText id="txtDetailDate#{looper.index}" rendered="#{remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" styleClass="remediation_textbox error_marker dates" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}">
                                            <f:convertDateTime locale="en_US" pattern="MM/dd/yyyy" />
                                            <f:ajax event="change" execute="@this" render="@none" listener="#{remediationDetail.markChangedEntity}"/>
                                            <f:attribute name="entity" value="#{dataItem.entityList[looper.index]}"/>
                                        </h:inputText>
                                        <h:outputText id="txtDetailDateOut#{looper.index}" rendered="#{not remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}">
                                            <f:convertDateTime locale="en_US" pattern="MM/dd/yyyy" />
                                        </h:outputText>
                                    </h:panelGroup>
                      </c:if>
                      <c:if test="#{key.fieldDefinition.dataType.name eq 'Boolean'}">
                        <h:panelGroup id="detailBooleanPanel#{looper.index}">
                            <h:selectBooleanCheckbox id="cbDetailBooleanInput#{looper.index}" rendered="#{remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}">
                                <f:ajax event="change" execute="@this" render="@none" listener="#{remediationDetail.markChangedEntity}"/>
                                            <f:attribute name="entity" value="#{dataItem.entityList[looper.index]}"/>
                                        </h:selectBooleanCheckbox>
                            <h:outputText id="txtDetailBooleanOutput#{looper.index}" rendered="#{not remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}"></h:outputText>
                        </h:panelGroup>
                            </c:if>
                      <c:if test="#{key.fieldDefinition.dataType.name eq 'String'}">
                        <h:panelGroup id="detailStringPanel#{looper.index}">
                                <h:inputText id="txtDetailString#{looper.index}" rendered="#{key.fieldDefinition.inputType eq 'TEXTBOX' and remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}" styleClass="remediation_textbox error_marker" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}">
                                            <f:ajax event="change" execute="@this" render="@none" listener="#{remediationDetail.markChangedEntity}"/>
                                            <f:attribute name="entity" value="#{dataItem.entityList[looper.index]}"/>
                                        </h:inputText>
                                        <h:selectOneMenu id="ddDetailString#{looper.index}" styleClass="remediation_select error_marker" rendered="#{key.fieldDefinition.inputType eq 'DROPDOWN' and remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}" title="#{remediationDetail.errorMessages(dataItem.id, key.fieldDefinition.id)}">
                                             <f:selectItems value="#{dataItem.entityList[looper.index].fieldDefinition.listItemSet.selectItemsList}"></f:selectItems>
                                             <f:ajax event="change" execute="@this" render="@none" listener="#{remediationDetail.markChangedEntity}"/>
                                             <f:attribute name="entity" value="#{dataItem.entityList[looper.index]}"/>
                                        </h:selectOneMenu>
                                        <h:outputText id="txtDetailStringOut#{looper.index}" rendered="#{not remediationDetail.containsErrors(dataItem.id, key.fieldDefinition.id)}" value="#{dataItem.entityList[looper.index].val}"></h:outputText>
                                    </h:panelGroup>
                      </c:if>
                    </h:column> 
                    </c:forEach>
                </h:dataTable>
            </h:panelGroup>
        </div>
    </h:form> 
```

来自支持 bean 的代码

```
@ManagedBean
@SessionScoped
public class RemediationDetail implements Serializable {
public void markChangedEntity(AjaxBehaviorEvent ajaxEvent){
    Entity entity = (Entity) Utility.getAjaxActionAttribute(ajaxEvent, "entity");
    //Capture the Client Ids that were updated
    getComponentsIdsToRefresh().add(ajaxEvent.getComponent().getParent().getClientId());
    //Capture what Entities were changed    
    getChangedEntities().add(entity);
}

 //This is where the save happens and hoping for updating of components !!
 public void processUpdates(AjaxBehaviorEvent event){
    entityDomain.processEntities(changedEntities);

    FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().addAll(getComponentsIdsToRefresh());
}

} 
```

保存后，我将要更新的客户端 ID 添加到 PartialViewContext().getRenderIds() 我看不到任何更新。我也尝试过 OmniFaces Ajax.Update(clientId) 也没有成功。

我已经更新了代码片段，因为它目前与正在构建的完整表格保持一致。

我的问题是：

1.  我在做什么可能吗？
2.  我是否正确接近组件的渲染？
3.  我错过了什么？

我的环境：Mojarra 2.1.7 Tomcat 7.022

问候，

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:46:59.677

我注意到你的`markChangedEntity`方法中有一些东西。您有以下代码：

```
getComponentsIdsToRefresh().add("formMain:" + 
    ajaxEvent.getComponent().getParent().getClientId()); 
```

调用`getClientId()`已经返回完整的 ID，包括表单的 ID。添加`formMain:`将导致类似`formMain:formMain:XXX`的内容，在您看来这不是合法 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:37:54.020

这段代码在 Mojarra 2.1.21 上对我来说很好用。Mojarra 2.1.7 是从 2012 年 3 月开始的，因此目前已经有 1 年多一点的历史了。我强烈建议升级它。

我无法准确指出 2.1.7 和 2.1.21 之间的哪个版本和/或哪个[Mojarra 问题](http://java.net/jira/browse/JAVASERVERFACES)解决了 2.1.7 的具体问题，因为我不认识这个问题，但我可以说很多事情已经最近改进了视图状态管理。更何况，从2.1.18开始，[taglibs+viewscope的永恒的先有鸡的问题](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)已经修复了，也可能是相关的。

# c - 快速排序数组并将新排序存储在 C 中

> ID：15892686
> 
> 赞同：1
> 
> 时间：2013-04-09T03:17:48.477
> 
> 标签：c, quicksort

我有两个 int 数组 *start 和 *end，它们的大小可能是 500 万。*start 存储边的起始节点编号，*end 存储结束节点编号。现在我想以升序方式对 *start 进行排序并存储新的排序方案，就像在排序之前一样：

```
start[0] = 5
start[1] = 7
start[2] = 8
start[3] = 1
start[4] = 4 
```

排序后变成

```
start[0] = 1
start[1] = 4
start[2] = 5
start[3] = 7
start[4] = 8 
```

我还想存储新的订购方案“3 4 0 1 2”。我想存储这个新的排序方案的原因是我需要在重新排列 *end 时使用它。C 库中有一个函数 qsort() 但它只能完成排序工作但不存储排序方案。有没有其他功能可以两者兼得？或者如何自己编写一个函数？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:11:37.037

`qsort()`只要`start`比较函数可以访问您的数组，您就可以使用标准函数执行此操作。您这样做的方式是为新的排序顺序创建数组并*根据*数组的值对其进行排序`start`。比较函数如下所示：

```
int compare(const void *a, const void *b)
{
    int start_a = start[*(const size_t *)a];
    int start_b = start[*(const size_t *)b];

    return (start_a > start_b) - (start_a < start_b);
} 
```

然后生成排序顺序是：

```
size_t i;
size_t *sortorder = malloc(n * sizeof sortorder[0]);

for (i = 0; i < n; i++)
    sortorder[i] = i;

qsort(sortorder, n, sizeof sortorder[0], compare); 
```

（其中和数组`n`中的元素数）。这将留下包含问题中示例数据的值，您可以使用它来创建新数组和数组。`start``end``sortorder``{ 3, 4, 0, 1, 2 }``start``end`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:29:44.137

您可能应该查看您正在使用的数据结构。如果您使用：

```
struct data
{
    int start;
    int end;
}; 
```

然后，您可以分配此结构的单个数组，并使用标准`qsort()`函数一次对其进行排序（一次）。您不需要排序顺序数组来对数组进行排序，`end`因为起始值和结束值是并行移动的，因为它们是相同结构的成员：

```
int data_cmp(const void *vp1, const void *vp2)
{ 
    const struct data *dp1 = vp1;
    const struct data *dp2 = vp2;
    if (dp1->start < dp2->start)
        return -1;
    else if (dp1->start > dp2->start)
        return +1;
    else
        return 0;
} 
```

然后，在其他一些功能中：

```
size_t nitems = 5000000;
struct data *array = malloc(nitems * sizeof(*array));

// ...load the array with start and end point values...

qsort(array, sizeof(array[0]), nitems, data_cmp); 
```

# jquery - 如何正则表达式将 live() 函数替换为 on() 函数

> ID：15892688
> 
> 赞同：1
> 
> 时间：2013-04-09T03:17:49.123
> 
> 标签：jquery

我想知道要使用什么正则表达式来更改

```
$(".delete_package").live("click", function() { 
```

进入

```
$("body").on("click", ".delete_package", function() { 
```

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:38:26.207

我不了解 phpDesigner，但您可以尝试替换为：

正则表达式：`\$\((["'][^"']+["'])\)\.live\((["'][^"']+["'])`

代替：`$(document.body).on($2, $1`

一些正则表达式引擎将使用该`\`字符进行反向引用，因此`$1`可以是`\1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:35:27.280

PHP/PCRE 的正则表达式实现将是：

```
/\$\(\s*?["']([^"']+?)["']\s*?\)\.live\(\s*?["']([^"']+?)["'][^\(]+?\(/$(document.body).on("$2", "$1", function(/g 
```

正则表达式：`\$\(\s*?["']([^"']+?)["']\s*?\)\.live\(\s*?["']([^"']+?)["'][^\(]+?\(` 替换：`$(document.body).on("$2", "$1", function(`

它将匹配任何匹配`$("*").live(`模式忽略间距差异的东西。该事件也被捕获并用于替换。如果你的 javascript 有奇怪的间距，它还有一个好处是规范化你的 javascript。

[正则表达式101](http://www.regex101.com/r/yZ1tX6)

# android - 读取并返回设备上安装的应用程序

> ID：15892690
> 
> 赞同：-3
> 
> 时间：2013-04-09T03:17:50.940
> 
> 标签：android

我是 android 的新开发人员，正在努力开发我的应用程序，因为我需要一个函数或其他东西来读取并返回设备上安装的应用程序，如果有人可以帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:35:49.280

```
//getting label name which is install
            PackageManager p = mContext.getPackageManager(); 
            List<ApplicationInfo> info = p.getInstalledApplications(0);
            for(int i=0;i<info.size();i++){
                String label = p.getApplicationLabel(info.get(i)).toString();
                System.out.println("LABEL:"+label);
            } 
```

# android - Logcat 不断显示消息

> ID：15892694
> 
> 赞同：2
> 
> 时间：2013-04-09T03:18:08.120
> 
> 标签：android, logcat, flow

我不知道怎么了。我的logcat困扰了我两天。当设备连接到测试时，虽然我没有运行我的应用程序，但 logcat 会不断给出消息。如果我运行我的应用程序，我无法在如此大量的数据中找到我的应用程序日志。有人可以建议我避免这种情况，以便我只能查看我的应用程序日志吗？下面是不断流动的logcat流程。我正在用 HTC 进行测试。

```
04-09 09:27:10.007: D/dalvikvm(843): GC_EXPLICIT freed 128K, 43% free 3530K/6151K, external 0K/0K, paused 142ms
04-09 09:27:10.027: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:10.027: I/LogService(843): 2013-04-09   09:27:10    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  1304    http://null -   -
04-09 09:27:10.037: D/nicolas(843): HttpServerHelper commit
04-09 09:27:10.037: D/nicolas(843): sendResponse 1
04-09 09:27:10.057: D/nicolas(843): writeResponseBody
04-09 09:27:10.238: D/dalvikvm(843): GC_EXPLICIT freed 50K, 43% free 3522K/6151K, external 0K/0K, paused 158ms
04-09 09:27:10.408: D/dalvikvm(843): GC_EXPLICIT freed 4K, 43% free 3537K/6151K, external 0K/0K, paused 140ms
04-09 09:27:10.408: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:10.468: D/com.fd.httpd(843): sdcard phone type != 1
04-09 09:27:10.478: D/com.fd.httpd(843): emmc phone type != 1
04-09 09:27:10.498: I/com.fd.httpd(843): 1365479830502--enter query.
04-09 09:27:10.558: I/LogService(843): 2013-04-09   09:27:10    127.0.0.1   -   127.0.0.1   8182    GET /info/  -   200 1471    0   513 http://null -   -
04-09 09:27:10.568: D/nicolas(843): HttpServerHelper commit
04-09 09:27:10.568: I/Server(843): Addition of the standard header "pragma" is discouraged as a future versions of the Restlet API will directly support it.
04-09 09:27:10.578: W/Server(843): Addition of the standard header "cache-control" is not allowed. Please use the equivalent property in the Restlet API.
04-09 09:27:10.578: W/Server(843): Addition of the standard header "expires" is not allowed. Please use the equivalent property in the Restlet API.
04-09 09:27:10.578: D/nicolas(843): sendResponse 1
04-09 09:27:10.578: D/nicolas(843): writeResponseBody
04-09 09:27:10.598: I/com.fd.httpd(843): 1365479830607--leave query.
04-09 09:27:10.598: I/com.fd.httpd(843): sum size = 0
04-09 09:27:10.608: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:10.688: I/LogService(843): 2013-04-09   09:27:10    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  252 http://null -   -
04-09 09:27:10.688: D/nicolas(843): HttpServerHelper commit
04-09 09:27:10.688: D/nicolas(843): sendResponse 1
04-09 09:27:10.698: D/nicolas(843): writeResponseBody
04-09 09:27:10.838: D/dalvikvm(843): GC_EXPLICIT freed 156K, 43% free 3525K/6151K, external 0K/0K, paused 124ms
04-09 09:27:10.848: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:10.898: I/com.fd.httpd(843): 1365479830906--enter query.
04-09 09:27:10.958: I/com.fd.httpd(843): 1365479830966--leave query.
04-09 09:27:10.958: I/com.fd.httpd(843): sum size = 0
04-09 09:27:10.958: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:11.048: I/LogService(843): 2013-04-09   09:27:11    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  171 http://null -   -
04-09 09:27:11.048: D/nicolas(843): HttpServerHelper commit
04-09 09:27:11.048: D/nicolas(843): sendResponse 1
04-09 09:27:11.058: D/nicolas(843): writeResponseBody
04-09 09:27:11.199: D/dalvikvm(843): GC_EXPLICIT freed 93K, 43% free 3530K/6151K, external 0K/0K, paused 133ms
04-09 09:27:11.209: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:11.249: I/com.fd.httpd(843): 1365479831256--enter query.
04-09 09:27:11.319: I/com.fd.httpd(843): 1365479831324--leave query.
04-09 09:27:11.319: I/com.fd.httpd(843): sum size = 0
04-09 09:27:11.319: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:11.349: I/LogService(843): 2013-04-09   09:27:11    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  119 http://null -   -
04-09 09:27:11.349: D/nicolas(843): HttpServerHelper commit
04-09 09:27:11.349: D/nicolas(843): sendResponse 1
04-09 09:27:11.359: D/nicolas(843): writeResponseBody
04-09 09:27:11.519: D/dalvikvm(843): GC_EXPLICIT freed 103K, 43% free 3522K/6151K, external 0K/0K, paused 147ms
04-09 09:27:11.539: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:11.569: I/com.fd.httpd(843): 1365479831577--enter query.
04-09 09:27:11.649: I/com.fd.httpd(843): 1365479831651--leave query.
04-09 09:27:11.649: I/com.fd.httpd(843): sum size = 0
04-09 09:27:11.649: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:11.799: D/dalvikvm(843): GC_EXPLICIT freed 71K, 43% free 3529K/6151K, external 0K/0K, paused 139ms
04-09 09:27:11.809: I/LogService(843): 2013-04-09   09:27:11    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  261 http://null -   -
04-09 09:27:11.819: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:11.829: D/nicolas(843): HttpServerHelper commit
04-09 09:27:11.839: D/nicolas(843): sendResponse 1
04-09 09:27:11.849: D/nicolas(843): writeResponseBody
04-09 09:27:11.989: D/dalvikvm(843): GC_EXPLICIT freed 45K, 43% free 3526K/6151K, external 0K/0K, paused 123ms
04-09 09:27:12.119: D/dalvikvm(843): GC_EXPLICIT freed 1K, 43% free 3525K/6151K, external 0K/0K, paused 115ms
04-09 09:27:12.129: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:12.180: D/com.fd.httpd(843): sdcard phone type != 1
04-09 09:27:12.190: D/com.fd.httpd(843): emmc phone type != 1
04-09 09:27:12.210: I/com.fd.httpd(843): 1365479832225--enter query.
04-09 09:27:12.260: I/LogService(843): 2013-04-09   09:27:12    127.0.0.1   -   127.0.0.1   8182    GET /info/  -   200 1471    0   429 http://null -   -
04-09 09:27:12.260: D/nicolas(843): HttpServerHelper commit
04-09 09:27:12.270: I/Server(843): Addition of the standard header "pragma" is discouraged as a future versions of the Restlet API will directly support it.
04-09 09:27:12.270: W/Server(843): Addition of the standard header "cache-control" is not allowed. Please use the equivalent property in the Restlet API.
04-09 09:27:12.270: W/Server(843): Addition of the standard header "expires" is not allowed. Please use the equivalent property in the Restlet API.
04-09 09:27:12.270: D/nicolas(843): sendResponse 1
04-09 09:27:12.280: D/nicolas(843): writeResponseBody
04-09 09:27:12.430: I/com.fd.httpd(843): 1365479832442--leave query.
04-09 09:27:12.430: I/com.fd.httpd(843): sum size = 0
04-09 09:27:12.430: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:12.560: I/LogService(843): 2013-04-09   09:27:12    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  403 http://null -   -
04-09 09:27:12.570: D/nicolas(843): HttpServerHelper commit
04-09 09:27:12.570: D/nicolas(843): sendResponse 1
04-09 09:27:12.580: D/nicolas(843): writeResponseBody
04-09 09:27:12.750: D/dalvikvm(843): GC_EXPLICIT freed 152K, 43% free 3535K/6151K, external 0K/0K, paused 159ms
04-09 09:27:12.770: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:12.810: I/com.fd.httpd(843): 1365479832825--enter query.
04-09 09:27:12.940: I/com.fd.httpd(843): 1365479832950--leave query.
04-09 09:27:12.940: I/com.fd.httpd(843): sum size = 0
04-09 09:27:12.940: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:13.070: I/LogService(843): 2013-04-09   09:27:13    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  289 http://null -   -
04-09 09:27:13.080: D/nicolas(843): HttpServerHelper commit
04-09 09:27:13.080: D/nicolas(843): sendResponse 1
04-09 09:27:13.090: D/nicolas(843): writeResponseBody
04-09 09:27:13.261: D/dalvikvm(843): GC_EXPLICIT freed 97K, 43% free 3533K/6151K, external 0K/0K, paused 163ms
04-09 09:27:13.271: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:13.441: D/dalvikvm(843): GC_EXPLICIT freed 34K, 43% free 3525K/6151K, external 0K/0K, paused 127ms
04-09 09:27:13.461: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:13.481: I/com.fd.httpd(843): 1365479833498--enter query.
04-09 09:27:13.631: D/dalvikvm(843): GC_EXPLICIT freed 63K, 43% free 3536K/6151K, external 0K/0K, paused 125ms
04-09 09:27:13.681: D/com.fd.httpd(843): sdcard phone type != 1
04-09 09:27:13.691: D/com.fd.httpd(843): emmc phone type != 1
04-09 09:27:13.731: I/com.fd.httpd(843): 1365479833746--leave query.
04-09 09:27:13.731: I/com.fd.httpd(843): sum size = 0
04-09 09:27:13.731: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:13.751: I/LogService(843): 2013-04-09   09:27:13    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  461 http://null -   -
04-09 09:27:13.771: D/nicolas(843): HttpServerHelper commit
04-09 09:27:13.771: D/nicolas(843): sendResponse 1
04-09 09:27:13.791: D/nicolas(843): writeResponseBody
04-09 09:27:13.791: I/LogService(843): 2013-04-09   09:27:13    127.0.0.1   -   127.0.0.1   8182    GET /info/  -   200 1471    0   293 http://null -   -
04-09 09:27:13.791: D/nicolas(843): HttpServerHelper commit
04-09 09:27:13.801: I/Server(843): Addition of the standard header "pragma" is discouraged as a future versions of the Restlet API will directly support it.
04-09 09:27:13.801: W/Server(843): Addition of the standard header "cache-control" is not allowed. Please use the equivalent property in the Restlet API.
04-09 09:27:13.941: D/dalvikvm(843): GC_EXPLICIT freed 70K, 43% free 3541K/6151K, external 0K/0K, paused 134ms
04-09 09:27:13.941: W/Server(843): Addition of the standard header "expires" is not allowed. Please use the equivalent property in the Restlet API.
04-09 09:27:13.941: D/nicolas(843): sendResponse 1
04-09 09:27:13.961: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:13.961: D/nicolas(843): writeResponseBody
04-09 09:27:14.011: I/com.fd.httpd(843): 1365479834023--enter query.
04-09 09:27:14.081: I/com.fd.httpd(843): 1365479834094--leave query.
04-09 09:27:14.081: I/com.fd.httpd(843): sum size = 0
04-09 09:27:14.081: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:14.101: I/com.fd.httpd(843): 1365479834113--leave applyBatch.
04-09 09:27:14.111: I/LogService(843): 2013-04-09   09:27:14    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  125 http://null -   -
04-09 09:27:14.121: D/nicolas(843): HttpServerHelper commit
04-09 09:27:14.121: D/nicolas(843): sendResponse 1
04-09 09:27:14.131: D/nicolas(843): writeResponseBody
04-09 09:27:14.262: D/dalvikvm(843): GC_EXPLICIT freed 140K, 43% free 3512K/6151K, external 0K/0K, paused 119ms
04-09 09:27:14.272: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:14.332: I/com.fd.httpd(843): 1365479834330--enter query.
04-09 09:27:14.392: I/com.fd.httpd(843): 1365479834406--leave query.
04-09 09:27:14.392: I/com.fd.httpd(843): sum size = 0
04-09 09:27:14.392: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:14.422: I/LogService(843): 2013-04-09   09:27:14    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  115 http://null -   -
04-09 09:27:14.422: D/nicolas(843): HttpServerHelper commit
04-09 09:27:14.422: D/nicolas(843): sendResponse 1
04-09 09:27:14.432: D/nicolas(843): writeResponseBody
04-09 09:27:14.562: D/dalvikvm(843): GC_EXPLICIT freed 95K, 43% free 3517K/6151K, external 0K/0K, paused 119ms
04-09 09:27:14.572: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:14.632: I/com.fd.httpd(843): 1365479834644--enter query.
04-09 09:27:14.682: I/com.fd.httpd(843): 1365479834693--enter applyBatch.
04-09 09:27:14.712: I/com.fd.httpd(843): 1365479834728--leave query.
04-09 09:27:14.722: I/com.fd.httpd(843): sum size = 0
04-09 09:27:14.722: I/com.fd.httpd(843): Thread stateRUNNABLE
04-09 09:27:14.732: I/LogService(843): 2013-04-09   09:27:14    127.0.0.1   -   127.0.0.1   8182    POST    /library/do/summary -   200 64  53  149 http://null -   -
04-09 09:27:14.742: D/nicolas(843): HttpServerHelper commit
04-09 09:27:14.752: D/nicolas(843): sendResponse 1
04-09 09:27:14.762: D/nicolas(843): writeResponseBody
04-09 09:27:14.912: D/dalvikvm(843): GC_EXPLICIT freed 103K, 43% free 3517K/6151K, external 0K/0K, paused 144ms
04-09 09:27:14.932: I/LogFilter(843): Couldn't find the mandatory "Host" HTTP header.
04-09 09:27:14.962: I/com.fd.httpd(843): 1365479834978--enter query.
04-09 09:27:15.112: D/dalvikvm(843): GC_EXPLICIT freed 68K, 43% free 3523K/6151K, external 0K/0K, paused 136ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:22:18.400

这种方法是只查看特定的日志，而不是避免不需要的日志进入 logcat。

> adb shell logcat -s D/nicolas

或者

> adb shell logcat | grep D/尼古拉斯

例如，您只想查看标记为“nicolas”的日志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:04:26.800

在 Eclipse 中，当查看 DDMS 中的 logcat 选项卡时，实际 logcat 输出的左侧应该有一个“Saved Filters”窗口。过滤器可能是您希望只查看您的消息（您输出的消息，以及您的应用程序生成的一些系统消息）的方式，因此您只需要获得一个有效的。

对我来说，会话​​过滤器通常是自动创建的，所以我正在运行的任何程序都会被过滤掉。在“所有消息”下检查您的程序并单击它。这是我的样子：

![自动会话过滤器](https://i.stack.imgur.com/3B9lo.png)

如果会话过滤器不是自动创建的，那么只需创建一个。单击绿色加号，然后将您的应用程序名称放入“按应用程序名称”文本框中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T03:56:45.677

我想你搞错了，伙计。

如果您选择“详细”或“调试”级别，Logcat 会记录您的 android 手机中发生的一切。而且您似乎选择了“调试”。

您可以尝试将“debug”调低为“warn”或“error”，那些对您来说似乎无用的消息将消失，不再打扰您。

但是，我不支持您这样做，因为它会让您全面了解您的手机状态，并且您会发现它在您以后的开发中非常有用！

希望我的回答能帮助您解决问题！^_^

# ios - AVFoundation - minFrameDuration 被什么取代了？

> ID：15892696
> 
> 赞同：0
> 
> 时间：2013-04-09T03:18:09.997
> 
> 标签：ios, avfoundation

我正在浏览 AVFoundation 教程的一部分，代码的示例部分之一使用 AVCaptureVideoDataOutput 方法“minFrameDuration”。因此，当我将其放入自己的代码中时，我立即收到警告说它已被贬值。在搜索“minFrameDuration”时，我找到[了一个文档页面](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)，它告诉我“minFrameDuration”已被贬值、取代，并且将不再受支持，但当然它并没有告诉我它被什么取代。谁能告诉我它被什么取代了？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:30:40.990

那将是 AVCaptureConnection 的 videoMinFrameDuration。一些你可以参考的链接

1.  iOS 5 的[AVFoundation 发行说明](http://developer.apple.com/library/mac/#releasenotes/AudioVideo/RN-AVFoundation/)
2.  [这个](https://stackoverflow.com/questions/8101492/set-maximum-frame-rate-with-avfoundation-in-ios-5)关于SO的问题

# macos - 有没有办法以与 Windows 中命名互斥锁相同的方式指示在 Mac OS X 上跨进程所做的任何事情？

> ID：15892707
> 
> 赞同：1
> 
> 时间：2013-04-09T03:18:58.510
> 
> 标签：macos, cocoa

假设我在 Mac OS X 上创建了几个使用一个共享资源或服务的应用程序。在我的应用程序中，我想检查服务或资源是否已经以与 Windows 上使用的命名互斥锁相同的方式创建，以免在任何地方创建它。在 Cocoa 中最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:11:04.767

如果您想要做的只是控制对共享资源的访问，常见的 Unix/OS X 可能是创建和锁定文件 - 该文件可以是零字节长。

这样做的系统级方法是使用`flock`（手册页第 2 节），C 级方法是使用 stdio `flockfile`（手册页第 3 节），我认为所有框架级方法都已被弃用，但我可能会错误（Apple 似乎正在更改文件系统操作的支持方式，但在提供替换之前已经弃用了一些）。

*注意*：文件锁定与 Finder 级锁定不同 - 前者为您提供互斥锁，后者与防止修改有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:35:55.360

命名互斥锁的最直接模拟是 POSIX 信号量。[从sem_open()](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/sem_open.2.html)的手册页开始。

# c# - 将样式属性设置为列表视图中的 div

> ID：15892709
> 
> 赞同：0
> 
> 时间：2013-04-09T03:19:07.430
> 
> 标签：c#, asp.net

我有一个带有列表视图的页面，其中有一个 div。这个 div 根据数据库信息有不同的背景颜色：

```
 <asp:ListView ID="lvwPostArt" runat="server" DataSourceID="odsAdvanced" GroupItemCount="3" OnItemDataBound="lvwPostArt_ItemDataBound">
        <EmptyDataTemplate>
            <p>No matches.</p>
        </EmptyDataTemplate>
        <LayoutTemplate>
            <table style="border: none">
                <asp:PlaceHolder ID="groupPlaceholder" runat="server"></asp:PlaceHolder>
            </table>
        </LayoutTemplate>
        <GroupTemplate>
            <tr>
                <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
            </tr>
        </GroupTemplate>
        <ItemTemplate>
            <td>
            <!--HEEEEEEEERE'S THE DIV!!! -->
                <div id="divContainer" class="icondetail" runat="server" style='background-color:<%# Eval("colorFondo") %>'><!-- HERE GOES CUSTOM COLOR -->
                        <div class="innerBox">
                            <asp:Image runat="server" ID="img_Post" ImageUrl='<%# Eval("ImageThumbnail") %>' CssClass="StaticImage" />
                        </div>
                </div>
            </td>
        </ItemTemplate>
    </asp:ListView> 
```

但是，这没有收到颜色。objectDataSource 具有以下 DataObjectTypeName：

```
public class myImage
{
    string colorFondo { get; set; }
    string ImageThumbnail { get; set; }
} 
```

这是我到目前为止所尝试的：

尝试#1：直接在 div 样式上设置数据绑定。

```
<div id="divContainer" class="icondetail" runat="server" style='background-color:<%# Eval("colorFondo") %>'> 
```

尝试#2：使用属性 ItemDataBound 设置代码背后的信息

```
protected void lvwPostArt_ItemDataBound(object sender, ListViewItemEventArgs e)
    {
        ListViewDataItem dataItem = (ListViewDataItem)e.Item;

        if (e.Item.ItemType == ListViewItemType.DataItem)
        {
            HtmlGenericControl divCont = (HtmlGenericControl)e.Item.FindControl("divContainer");
            divCont.Style.Add("background-color", "#ffffff"); //How can I get the info from the DataClass to assign it to the property????
        }
    } 
```

我的问题是，如何为这个 div 分配背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:39:37.780

你快到了......在你第二次尝试时，只需使用这个

```
divCont.Attributes.Add("style", "background-color:#ffffff"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:47:31.283

要么这样

```
DataRowView rowView = (DataRowView)dataItem.DataItem;
divCont.Style.Add("background-color", rowView["colorFondo"].ToString()); 
```

或者像这样

```
var myImg = e.Item.DataItem as myImage;
divCont.Style.Add("background-color", myImg.colorFondo); 
```

# java - 如何在 Groovy 的 GMock 框架中使用 FEST 测试

> ID：15892711
> 
> 赞同：0
> 
> 时间：2013-04-09T03:19:18.543
> 
> 标签：java, groovy, fest, swingbuilder

我正在尝试使用 FEST swing 测试套件为不同的接口响应编写测试。在单类情况下，它工作得很好。但是，现在我遇到了使用 GMockTestCase 的情况。我设置了所有带有返回的模拟方法调用，然后创建了我的“播放”外壳，但我的断言失败了。如果我在没有 Mocked 类的情况下运行相同的测试，我的测试就会通过。是否有必须设置的顺序？

这是我的测试：

```
@Test
void testsShouldReturnRadioButtonSelectedFromClassGroupButtonGroupKeyPressed(){
    def mockClassMap  = getClassMap()
    mockPG.getAvailibleClass().returns(mockClassMap)
    panel.plyGen = mockPG
    panel.raceValue = 1
    panel.genderValue = 2
    panel.gPane.mainM.setVisible(false)
    panel.gPane.createPlayerStats.setVisible(true)
    //panel.plyGen = new PlayerGenerater()

    play{
        festSetUp(panel.gPane.chooseClass)
        panel.gPane.reRollDice.requestFocusInWindow()

                    // simulate key stroke to change panel view
        robot.keyPress(VK_A)
        robot.keyRelease(VK_A)

        // simulate key stroke to select radio button option
        robot.keyPress(VK_M)
        robot.keyRelease(VK_M)
        assertThat(panel.classValue, is(3))
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T03:22:59.527

只是为了回答我自己的问题，以帮助那些可能有类似问题的人。答案是将测试限制为单个用户输入交互。上面我试图模拟两件事。从一个面板屏幕移动到第二个屏幕的交互以及第二个面板上的交互。将交互限制为仅测试用户交互的后半部分允许 FEST 正确识别交互。此示例中通过测试的结果代码是：

```
def mockClassMap  = getClassMap()

    panel.plyGen = mockPG
    mockPG.getAvailableClass().returns(mockClassMap)
    panel.raceValue = 1
    panel.genderValue = 2
    panel.gPane.mainM.setVisible(false)
    panel.gPane.chooseClass.setVisible(true)
    //panel.plyGen = new PlayerGenerator()

    play{
        festSetUp(panel.gPane.chooseClass)
                          /*additional methods that need to be triggered in order to 
                           *set up the panel for actual test
                          */
            panel.setClassGroup()
            gPane.classGroupPanel.revalidate()
            gPane.chooseClass.setVisible(true)

                     //simulate user interaction
        robot.keyPress(VK_M)
        robot.keyRelease(VK_M)

                       //assert results
            assertThat gPane.selectClass.getSelection(), is(gPane.monk.getModel())

    } 
```

所以基本单元测试 101 将测试隔离到单个动作

# ios - 在 iOS 中使用 AudioConverterFillComplexBuffer 进行实时音频压缩

> ID：15892715
> 
> 赞同：1
> 
> 时间：2013-04-09T03:19:47.703
> 
> 标签：ios, objective-c, audio, core-audio, audiotoolbox

我正在尝试对来自录制回调的缓冲区进行实时编码，但我似乎并不真正了解如何做到这一点，以及它是如何工作的。事实上，我花了几个小时阅读 Apple 的参考资料，但我就是不明白。

我想在这里通过各种线程，但对我仍然没有好处。

我有这个录音回调：

```
static OSStatus recordingCallback(void *inRefCon,
                              AudioUnitRenderActionFlags *ioActionFlags,
                              const AudioTimeStamp *inTimeStamp,
                              UInt32 inBusNumber,
                              UInt32 inNumberFrames,
                              AudioBufferList *ioData) {

// the data gets rendered here
AudioBuffer buffer;

// a variable where we check the status
OSStatus status;

/**
 This is the reference to the object who owns the callback.
 */
AudioProcessor *audioProcessor = (__bridge AudioProcessor*) inRefCon;

/**
 on this point we define the number of channels, which is mono
 for the iphone. the number of frames is usally 512 or 1024.
 */
buffer.mDataByteSize = inNumberFrames * 2; // sample size
buffer.mNumberChannels = 1; // one channel
buffer.mData = malloc( inNumberFrames * 2 ); // buffer size

// we put our buffer into a bufferlist array for rendering
AudioBufferList bufferList;
bufferList.mNumberBuffers = 1;
bufferList.mBuffers[0] = buffer;

// render input and check for error
status = AudioUnitRender([audioProcessor audioUnit], ioActionFlags, inTimeStamp, inBusNumber, inNumberFrames, &bufferList);
[audioProcessor hasError:status:__FILE__:__LINE__];

// process the bufferlist in the audio processor
[audioProcessor processBuffer:&bufferList];

[audioProcessor convertBuffer:&bufferList]; //trying to set the buffer to converting function

// clean up the buffer
free(bufferList.mBuffers[0].mData);

return noErr;
} 
```

**convertBuffer**看起来像这样 - 它返回

> 被释放的指针未被分配

```
-(void)convertBuffer: (AudioBufferList*) audioBufferList
{
    unsigned char** stream = audioBufferList->mBuffers[0].mData;
    UInt32 *streamSize = &audioBufferList->mBuffers[0].mDataByteSize;
    // describe the input format's description

    AudioStreamBasicDescription inputDescription;
    inputDescription.mSampleRate            = SAMPLE_RATE;
    inputDescription.mFormatID          = kAudioFormatLinearPCM;
    inputDescription.mFormatFlags       = kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger;
    inputDescription.mFramesPerPacket   = 1;
    inputDescription.mChannelsPerFrame  = 1;
    inputDescription.mBitsPerChannel        = 16;
    inputDescription.mBytesPerPacket        = 2;
    inputDescription.mBytesPerFrame     = 2;

    // copy conversion output format's description from the
    // output audio unit's description.
    // then adjust framesPerPacket to match the input we'll be passing.

    // framecount of our input stream is based on the input bytecount.
    // output stream will have same number of frames, but different
    // number of bytes.
    AudioStreamBasicDescription outputDescription;
    outputDescription.mSampleRate         = 44100.0;
    outputDescription.mFormatID           = kAudioFormatMPEG4AAC;
    outputDescription.mFormatFlags        = kMPEG4Object_AAC_Main;
    outputDescription.mChannelsPerFrame   = 1;
    outputDescription.mBytesPerPacket     = 1;
    outputDescription.mBytesPerFrame      = 0;
    outputDescription.mFramesPerPacket    = 1024;
    outputDescription.mBitsPerChannel     = 0;
    outputDescription.mReserved           = 0;

    // create an audio converter
    AudioConverterRef audioConverter;
    OSStatus acCreationResult = AudioConverterNew(&inputDescription, &outputDescription, &audioConverter);
    if(!audioConverter)
    {
        // bail out
        free(*stream);
        *streamSize = 0;
        *stream = (unsigned char*)malloc(0);
        return;
    }

    // calculate number of bytes required for output of input stream.
    // allocate buffer of adequate size.
    UInt32 outputBytes = outputDescription.mBytesPerPacket * (*streamSize / inputDescription.mBytesPerPacket); // outputDescription.mFramesPerPacket * outputDescription.mBytesPerFrame;
    unsigned char *outputBuffer = (unsigned char*)malloc(outputBytes);
    memset(outputBuffer, 0, outputBytes);

    // describe input data we'll pass into converter
    AudioBuffer inputBuffer;
    inputBuffer.mNumberChannels = inputDescription.mChannelsPerFrame;
    inputBuffer.mDataByteSize = *streamSize;
    inputBuffer.mData = *stream;

    // describe output data buffers into which we can receive data.
    AudioBufferList outputBufferList;
    outputBufferList.mNumberBuffers = 1;
    outputBufferList.mBuffers[0].mNumberChannels = outputDescription.mChannelsPerFrame;
    outputBufferList.mBuffers[0].mDataByteSize = outputBytes;
    outputBufferList.mBuffers[0].mData = outputBuffer;

    // set output data packet size
    UInt32 outputDataPacketSize = outputBytes / outputDescription.mBytesPerPacket;

    // fill class members with data that we'll pass into
    // the InputDataProc
    //_converter_currentBuffer = &inputBuffer;
    //_converter_currentInputDescription = inputDescription;

    // convert
    OSStatus result = AudioConverterFillComplexBuffer(audioConverter, /* AudioConverterRef inAudioConverter */
                                                      nil, /* AudioConverterComplexInputDataProc inInputDataProc */
                                                      nil, /* void *inInputDataProcUserData */
                                                      &outputDataPacketSize, /* UInt32 *ioOutputDataPacketSize */
                                                      &outputBufferList, /* AudioBufferList *outOutputData */
                                                      NULL /* AudioStreamPacketDescription *outPacketDescription */
                                                      );

NSLog([NSString stringWithFormat:@"Err : %ld",result ]);

    // change "stream" to describe our output buffer.
    // even if error occured, we'd rather have silence than unconverted audio.
    free(*stream);
    *stream = outputBuffer;
    *streamSize = outputBytes;

    // dispose of the audio converter
    AudioConverterDispose(audioConverter);
} 
```

基本上就是这样。无法让它工作。另外，回调函数应该怎么看？我现在将它设置为 nil。

非常感谢任何帮助。我被困了好几天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T23:54:51.237

您应该提供“AudioConverterComplexInputDataProc”以转换数据。Converter 重复调用此函数，您应该在其中提供初始数据进行转换。

# c - execvp - ls: fts_open: 没有这样的文件或目录

> ID：15892722
> 
> 赞同：2
> 
> 时间：2013-04-09T03:20:56.783
> 
> 标签：c, exec, fork, execvp

我目前正在努力解决这个错误。我正在编写一个 shell 模拟器，使用 fork() 执行使用 execvp(); 的命令。几乎我尝试解析到我的 shell 的每个命令都运行良好，除了没有参数的 ls 。如果我尝试执行 ls -lah，一切正常，但简单的 ls 不会，收到以下错误：

```
ls: fts_open: No such file or directory 
```

这是我的代码片段：（只是必不可少的）

```
pid = fork();
      if (pid==0)
      {
        puts("CHILD");
        puts(args[0]);
        puts(args[1]);
        printf("%d\n", strlen(args[1]));
        args[2] = NULL;
        execvp(args[0], args);
      }
      else wait(NULL);
      puts("BACK TO PARENT");
    } 
```

这是 ls 的输出：

```
ls
CHILD
ls

0
ls: fts_open: No such file or directory
BACK TO PARENT 
```

如您所见，args[0] 包含 ls，args[1] 为空，因为没有参数，args[1] 的长度为 0，但我不断收到错误消息。

知道它可能是什么吗？

编辑：

感谢 Jonathan Leffler 发现它：（另外，这似乎只是 Mac 上的一个问题）

关键是 args[1] 并不是真的为空，因此操作系统会尝试打开 '' 文件，该文件显然不存在，并且从外观上看，无法创建，因为它不是真的是一个名字。

所以，这就是我所做的：检查 args[1] 的 len。如果为 0，则将其设置为 NULL。（只是释放内存并没有真正帮助）

```
pid = fork();
      if (pid==0)
      {
        puts("CHILD");
        puts(args[0]);
        puts(args[1]);
        if (strlen(args[1]) == 0)
            args[1] = 0;
        args[2] = NULL;
        execvp(args[0], args);
      }
      else wait(NULL);
      puts("BACK TO PARENT");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T03:41:12.633

如果没有更多参数，则指针应该为空，而不是指向零长度字符串的非空指针。

```
pid = fork();
if (pid==0)
{
    puts("CHILD");
    puts(args[0]);
    fflush(stdout);
    args[1] = 0;
    execvp(args[0], args);
    fprintf(stderr, "Failed to exec %s\n", args[0]);
    exit(1);
}
else
    wait(NULL);
puts("BACK TO PARENT"); 
```

纯粹出于好奇，我在命令行中尝试了这个：

```
$ ls ''
ls: fts_open: No such file or directory
$ 
```

你也在Mac上运行吗？（说我很惊讶看到同样的消息并没有开始描述我的反应！）更有趣的是，创建文件`fts_open`似乎并没有摆脱错误消息。的奇怪行为`ls`，但响应无效请求（没有空字符串的文件名）。

# c++ - 从 QFormLayout 中创建的 QSpinBox 获取价值

> ID：15892723
> 
> 赞同：2
> 
> 时间：2013-04-09T03:21:05.863
> 
> 标签：c++, qt

我想知道如何引用`QSpinBox`我用代码创建的 s

```
 QFormLayout* layout = new QFormLayout;
     layout->addRow(new QLabel(tr("Board Size")), new QSpinBox);
     layout->addRow(new QLabel(tr("Number of \nStarting Moves")), new QSpinBox);
     layout->addRow(new QLabel(tr("Seed Value")), new QSpinBox); 
```

这是一个`void`创建表单布局的函数，将其应用于 QWidget `f`，然后设置`f`为添加到 QMainWindow 的 QDockWidget 的小部件。

然后我需要使用`QSpinBox`s 中的值来运行另一个函数，但我不知道如何区分或引用这些框。我知道`QSpinBox`s 有一个`value()`功能，但我如何在每个不同的盒子上调用它？

抱歉，如果我以不寻常的方式使用 Qt，我是 Qt 编程的新手。另外，我不想使用任何可视化编程，我想编写所有代码。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T04:18:36.097

首先 - 创建小部件而不指定父级是潜在的内存泄漏，所以你不应该这样做，除非你确切地知道你在做什么。

其次，如果你想在你的类中使用一些值——你应该让一个指向它的指针成为你的类的成员并按名称寻址它（就像[Aliceljm](https://stackoverflow.com/users/1596799/aliceljm)所做的那样）。

此外，您可以`void QFormLayout::addRow ( const QString & labelText, QWidget * field )`按顺序使用，而不是手动创建标签（如果您不需要直接访问它们）。

综上所述，您的最终代码应包含：

小部件.h

```
protected:
    QSpinBox *mBoardSizeSpinBox;
    QSpinBox *mNumberOfMovesSpinBox;
    QSpinBox *mSpeedValueSpinBox; 
```

小部件.cpp

```
mBoardSizeSpinBox = new QSpinBox(this);
mNumberOfMovesSpinBox = new QSpinBox(this);
mSpeedValueSpinBox = new QSpinBox(this);

QFormLayout* layout = new QFormLayout(this);
layout->addRow(tr("Board Size"), mBoardSizeSpinBox);
layout->addRow(tr("Number of \nStarting Moves"), mNumberOfMovesSpinBox);
layout->addRow(tr("Seed Value"), mSpeedValueSpinBox);

// ... using

int speedValue = mSpeedValueSpinBox->value(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:44:20.763

我认为你应该这样做：

```
 QSpinBox *spinbox1=new QSpinBox;
spinbox1->setRange(1,100);
QSpinBox *spinbox2=new QSpinBox;
QSpinBox *spinbox3=new QSpinBox;

QFormLayout* layout = new QFormLayout;
layout->addRow(new QLabel(tr("Board Size")), spinbox1);
layout->addRow(new QLabel(tr("Number of \nStarting Moves")), spinbox2);
layout->addRow(new QLabel(tr("Seed Value")), spinbox3);

qDebug()<< spinbox1->value(); 
```

指针可以在任何地方获取 spinbox 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:22:06.193

这是你的代码。

```
 void Test::createForm()
{
QFormLayout* layout = new QFormLayout;
layout->addRow(new QLabel(tr("Board Size")), new QSpinBox);
layout->addRow(new QLabel(tr("Number of \nStarting Moves")), new QSpinBox);
layout->addRow(new QLabel(tr("Seed Value")), new QSpinBox);

QDockWidget *dockWidget =  new QDockWidget();
QWidget* widget = new QWidget(  );
widget->setLayout( layout );
dockWidget->setWidget( widget );
dockWidget->show();
addDockWidget(  Qt::LeftDockWidgetArea, dockWidget );
} 
```

这是您的另一个功能，您想在其中获取 spinbox 的参考。

```
void Test::referSpinBox()

{ 
```

/* 要到达spinbox的引用，你必须先得到dockwidget，然后是widget，然后是layout，然后找到精确的行和列，然后你就会到达spinbox 看到它太复杂了，Qt很棒，它根本不提供任何API获取您在主窗口中添加的 DockWidget（tabifiedDockWidgets API 除外）。所以这意味着，你必须改变实现逻辑，上面重播的答案是正确的。这就是方法，注意，信号/槽的概念在另一个函数中访问spibox起着很大的作用。*/

```
} 
```

信号/槽将用于解决这个问题。请使用此代码发布的上述答案

```
QObject::connect( mBoardSizeSpinBox, SIGNAL(valueChanged ( int  )), this, SLOT(YourAnotherSlot( int    ))); 
```

你的插槽。

```
void Test::YourAnotherSlot( int )
{
//can access here.
mBoardSizeSpinBox->value();
} 
```

# ios - 无法在新的 Apple Web 界面下编辑配置文件

> ID：15892724
> 
> 赞同：5
> 
> 时间：2013-04-09T03:21:11.020
> 
> 标签：ios, iphone, provisioning-profile

我必须更新 Apple 配置文件以添加新的 UDID，当我登录到我的 Apple 开发帐户时，看起来 Apple 刚刚更改了他们开发网站的部分内容。

我能够毫无问题地添加新的 UDID，但是当我尝试通过以下方式更新我的配置文件时：

> 配置配置文件 --> 开发 --> 选择配置文件 --> 单击“编辑” --> 将新设备添加到配置文件

“生成”按钮不会从禁用状态变为可点击状态。即使更改了所有可更改的字段（配置文件名称、包含的证书、设备），“生成”按钮仍然拒绝启用。

下面是问题的截图，你可以看到“生成”处于禁用状态： ![有问题的屏幕截图](https://i.stack.imgur.com/FSkfG.png)

我需要知道的是如何更新配置文件，是我编辑错误的问题，还是因为新界面的一些错误。

**编辑 1** 看起来它不是特定于浏览器的。Win7 Chrome 和 OSX Safari（较旧和较新版本）上的情况相同。但是，我确实发现网站的很大一部分在 Win7 IE9 上无法运行，我单击了一些按钮，但没有任何反应。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T08:29:00.747

似乎他们的新界面**不再接受**配置文件名称中的任何下划线（“_”）字符。

当我重命名没有任何下划线的配置文件名称时，生成按钮确实再次可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:06:00.443

好消息：Apple 已修复此问题。我们今天检查了一下，即使配置文件包含下划线（“_”）字符，我们也能够按下生成按钮。

# c# - JSON 和 jQuery 中的 WCF 休息服务

> ID：15892725
> 
> 赞同：0
> 
> 时间：2013-04-09T03:21:16.930
> 
> 标签：c#, jquery, json, wcf

我在 JSON 中公开 WCF REST 服务并尝试从 jQuery 中使用它时遇到了一些问题。

*   [我采用的第一个也是理想的方法与此](http://www.practicaldeveloper.net/2012/05/restful-wcf-services-with-jquery-mobile.html "例子")非常相似。但是我遇到了一个问题，即返回带有 IsReference=true 注释的 JSON 是不行的，尽管如果我返回 XML 就可以了。

*   第二种方法是返回 XML 并在 jQuery 中使用它。但由于 jQuery 喜欢 JSON，我不喜欢这个选项。

*   另一个人可能在[此](http://code.msdn.microsoft.com/Supporting-different-data-b0351c9a "示例 2")解决方案之后尝试使用 JSON.Net，但在描述中作者说不建议将其用于生产。

*   我现在拥有的是第一种带有注释 IsReference=false 的方法，我认为这有点危险，为了解决循环引用，我手动删除了这些循环，例如：

* * *

```
var queryResult =
    from a in DbContext.Programs.Include(x => x.Radios)
    where ProgramsIds.Contains(a.Id)
    select a;

foreach (Program p in queryResult)
{
    p.Radio = null;
    p.Messages = new List<Message>();
} 
```

* * *

我不喜欢这种解决方案，但我不知道哪个解决方案不太糟糕。

我想很多人可能有这个问题，你采取了哪种解决方案？

谢谢！！

编辑1：

*   另一种解决方案是调用负责调用服务的控制器/操作。我也不喜欢这种方法，因为它是不必要的，因为浏览器可以自行访问服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:59:54.073

JSON.Net 正确处理对象/引用层次结构。因此，只需使用 JSON.Net 序列化程序（或使用 ServiceStack.Text 序列化程序）从您的 queryResult 中获取 json 字符串，然后从服务方法返回 Stream：

```
[OperationContract, WebGet(UriTemplate = "/GetJson", BodyStyle = WebMessageBodyStyle.Bare)] //ResponseFormat = WebMessageFormat.Json
Stream GetJSON(); 

....
return new MemoryStream(Encoding.UTF8.GetBytes(jsonString)); 
```

# login - Shiro - 如何使用散列密码登录

> ID：15892733
> 
> 赞同：1
> 
> 时间：2013-04-09T03:22:17.887
> 
> 标签：login, shiro

我正在使用 Shiro 来保护我的应用程序，现在的问题是如何在以下情况下使用散列密码登录：

1、用户点击激活邮件后自动登录。

2，通过Facebook登录，通过facebookId从数据库中找到用户，然后尝试登录，但我只有散列密码，我们有什么方法可以解密散列密码。

这是我如何加密存储在数据库中的密码：

```
new Sha256Hash(password).toHex() 
```

下面是我的登录代码。

```
Subject currentUser = SecurityUtils.getSubject();
if (!currentUser.isAuthenticated()) {
    UsernamePasswordToken token = new UsernamePasswordToken(email, password, rememberMe);
    currentUser.login(token);
} 
```

如果这个问题很奇怪，请耐心等待，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:38:36.913

哈希函数的目的是不可解密。所以不，它不能被解密。要实现这两个目标，您可以配置其他领域。一个用于电子邮件激活，另一个用于 oauth 登录。

对于电子邮件激活，您可以创建临时帐户，创建一些随机激活令牌并发送电子邮件。然后用户单击激活链接，应用程序尝试使用 http 请求中提供的令牌对用户进行身份验证：

```
String token = //get from request
subject.authenticate(new ActivationToken(token)); 
```

激活领域检查此令牌是否有效。如果有效，它将从帐户中删除令牌并对其进行身份验证。

至于 facebook 领域，您可以使用通过身份验证步骤获得的秘密来获取用户信息，如果没有错误身份验证用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T18:34:20.523

默认情况下，来自 UsernamePasswordToken 的密码经过哈希处理，并将结果与​​来自 DB 的哈希值进行比较。你可以改变你的境界。不做哈希。

对于通常的登录，您可以对密码进行哈希处理并放入 UsernamePasswordToken。在领域中只比较哈希

# java - 如何向哈希集添加值？

> ID：15892736
> 
> 赞同：3
> 
> 时间：2013-04-09T03:22:37.980
> 
> 标签：java, hashset

我正在处理一个需要我将值添加到哈希图中的练习问题。但我不明白为什么我一直在线收到错误消息`courseName.add(student);`

这是我的代码：

```
public class StudentDatabase {

    // add instance variables
    private Map<String, HashSet<Integer>> dataContent = new LinkedHashMap<String, HashSet<Integer>>();

    // Prints a report on the standard output, listing all the courses and all the
    // students in each.  If the map is completely empty (no courses), prints a message
    // saying that instead of printing nothing.
    public void report() {
        if (dataContent.isEmpty()) {
            System.out.println("Student database is empty.");
        } else {
            for (String key : dataContent.keySet()) {
                System.out.println(key + ":" + "\n" + dataContent.get(key));
            }
        }
    }

    // Adds a student to a course.  If the student is already in the course, no change
    // If the course doesn't already exist, adds it to the database.
    public void add(String courseName, Integer student) {
        if (dataContent.containsKey(courseName)) {
            courseName.add(student);
        } else {
            Set<Integer> ids = new HashSet<Integer>();
            ids.add(student);
            dataContent.put(courseName, ids);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:27:55.490

好的，这个构造：

```
if (dataContent.containsKey(courseName)) {
    courseName.add(student);
} 
```

完全是古怪的。你想要的是：

```
if (dataContent.containsKey(courseName)){
    Set<Integer> studentsInCourse = dataContent.get(courseName);
    studentsInCourse.add(student);
} 
```

应该修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:27:49.660

courseName.add 是不可能的.. courseName 是一个字符串，它是一个不可变对象，不允许任何 add 方法...

签出：[http ://docs.oracle.com/javase/7/docs/api/java/lang/String.html](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

我认为这就是你要找的：

```
 public void add(String courseName, Integer student) {
        if (dataContent.containsKey(courseName)) {
            HashSet<Integer> newhashSet=dataContent.get(courseName);
            if(newhashSet!=null)
            {
                newhashSet.add(student);
            }
            dataContent.put(courseName, newhashSet);
            //courseName.add(student);
        }

        else {
            Set<Integer> ids = new HashSet<Integer>();
            ids.add(student);
            dataContent.put(courseName, (HashSet<Integer>) ids);
        }
       // System.out.println("Data:"+dataContent.toString());
    } // end add
 } 
```

希望这可以帮助！

# c# - 在 C# 中编辑 XML 文档

> ID：15892737
> 
> 赞同：0
> 
> 时间：2013-04-09T03:22:38.467
> 
> 标签：c#, xml, linq-to-xml

我是 C# 的新手。我正在尝试通过将一堆节点添加到其中的不同工作表来编辑电子表格 XML 2003 文档。下面是一个结构示例：

```
<Workbook>
 <Worksheet ss:Name="Contact">
  <Table>
   <Column />
   <Row />
  </Table>
 </Worksheet>
 <Worksheet ss:Name="Facility">
  <Table>
   <Column />
   <Row />
  </Table>
 </Worksheet>
</Workbook> 
```

我需要做的是加载这个 XML 并在某些地方插入新节点。我很确定我知道如何使用我需要的节点创建新的 XElement（网上有很多教程）。我很难找到的是如何找到一个节点并在它下面添加节点。这是据我所知：

```
XElement xmlDoc = XElement.Load(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Autodesk\\Revit\\Addins\\2013\\COBiev2.4Template.xml"); 
```

那么，如何找到“设施”工作表并在其中的表节点下添加新行？我需要能够以这样一种方式做到这一点，即在我的例程结束时，我可以将 xmlDoc 文件保存回文件系统。

---- 更新 ----- 我没有让这个工作。修改后的代码和实际 XML 的开头如下。

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
<Worksheet ss:Name="Contact">
  <Names>
   <NamedRange ss:Name="_FilterDatabase" ss:RefersTo="=Contact!R1C1:R1C19"
    ss:Hidden="1"/>
  </Names>
  <Table ss:ExpandedColumnCount="19" ss:ExpandedRowCount="1" x:FullColumns="1"
   x:FullRows="1" ss:DefaultColumnWidth="49.5" ss:DefaultRowHeight="15">
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="209.25"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="209.25"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="160.5"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="119.25"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="129"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="82.5"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="165"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="129.75"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="45"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="45"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="129"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="66"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="107.25"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="198"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="65.25"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="72"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="45"/>
   <Column ss:StyleID="s1253" ss:AutoFitWidth="0" ss:Width="62.25"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="45"/>
   <Row ss:Height="93">
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Email</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/><NamedCell
      ss:Name="Contact.Name"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">CreatedBy</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">CreatedOn</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Category</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Company</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Phone</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalSystem</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalObject</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalIdentifier</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Department</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">OrganizationCode</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">GivenName</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">FamilyName</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Street</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">PostalBox</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Town</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">StateRegion</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1255"><Data ss:Type="String">PostalCode</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Country</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_4"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
   </Row>
  </Table>
  <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
   <PageSetup>
    <Header x:Margin="0.51180555555555551"/>
    <Footer x:Margin="0.51180555555555551"/>
   </PageSetup>
   <Print>
    <ValidPrinterInfo/>
    <HorizontalResolution>300</HorizontalResolution>
    <VerticalResolution>300</VerticalResolution>
   </Print>
   <TabColorIndex>43</TabColorIndex>
   <Zoom>81</Zoom>
   <FreezePanes/>
   <FrozenNoSplit/>
   <SplitHorizontal>1</SplitHorizontal>
   <TopRowBottomPane>1</TopRowBottomPane>
   <SplitVertical>1</SplitVertical>
   <LeftColumnRightPane>1</LeftColumnRightPane>
   <ActivePane>0</ActivePane>
   <Panes>
    <Pane>
     <Number>3</Number>
    </Pane>
    <Pane>
     <Number>1</Number>
    </Pane>
    <Pane>
     <Number>2</Number>
    </Pane>
    <Pane>
     <Number>0</Number>
     <ActiveRow>0</ActiveRow>
     <ActiveCol>0</ActiveCol>
    </Pane>
   </Panes>
   <ProtectObjects>False</ProtectObjects>
   <ProtectScenarios>False</ProtectScenarios>
   <EnableSelection>NoSelection</EnableSelection>
  </WorksheetOptions>
  <AutoFilter x:Range="R1C1:R1C19"
   xmlns="urn:schemas-microsoft-com:office:excel">
  </AutoFilter>
 </Worksheet>
 <Worksheet ss:Name="Facility">
  <Names>
   <NamedRange ss:Name="_FilterDatabase" ss:RefersTo="=Facility!R1C1:R1C22"
    ss:Hidden="1"/>
  </Names>
  <Table ss:ExpandedColumnCount="22" ss:ExpandedRowCount="1" x:FullColumns="1"
   x:FullRows="1" ss:DefaultColumnWidth="49.5" ss:DefaultRowHeight="15">
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="46.5"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="174"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="162"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="96"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="116.25"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="45.75"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="45.75"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="78"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="69"/>
   <Column ss:StyleID="s1251" ss:AutoFitWidth="0" ss:Width="45.75"/>
   <Column ss:StyleID="s1247" ss:AutoFitWidth="0" ss:Width="230.25"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="179.25"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="54.75"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="156"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="45.75"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="154.5"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="60.75"/>
   <Column ss:StyleID="s1252" ss:AutoFitWidth="0" ss:Width="156"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="116.25" ss:Span="1"/>
   <Column ss:Index="21" ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="45.75"/>
   <Column ss:StyleID="s1248" ss:AutoFitWidth="0" ss:Width="74.25"/>
   <Row ss:Height="124.5">
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Name</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/><NamedCell
      ss:Name="Facility.Name"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">CreatedBy</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">CreatedOn</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Category</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ProjectName</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">SiteName</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">LinearUnits</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">AreaUnits</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">VolumeUnits</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">CurrencyUnit</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">AreaMeasurement</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalSystem</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalProjectObject</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalProjectIdentifier</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalSiteObject</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalSiteIdentifier</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalFacilityObject</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ExternalFacilityIdentifier</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Description</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">ProjectDescription</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">SiteDescription</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
    <Cell ss:StyleID="s1254"><Data ss:Type="String">Phase</Data><NamedCell
      ss:Name="_xlnm._FilterDatabase_7"/><NamedCell ss:Name="_FilterDatabase"/></Cell>
   </Row>
  </Table>
  <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
   <PageSetup>
    <Header x:Margin="0.51180555555555551"/>
    <Footer x:Margin="0.51180555555555551"/>
   </PageSetup>
   <Print>
    <ValidPrinterInfo/>
    <HorizontalResolution>300</HorizontalResolution>
    <VerticalResolution>300</VerticalResolution>
   </Print>
   <TabColorIndex>43</TabColorIndex>
   <Zoom>81</Zoom>
   <FreezePanes/>
   <FrozenNoSplit/>
   <SplitHorizontal>1</SplitHorizontal>
   <TopRowBottomPane>1</TopRowBottomPane>
   <SplitVertical>1</SplitVertical>
   <LeftColumnRightPane>1</LeftColumnRightPane>
   <ActivePane>0</ActivePane>
   <Panes>
    <Pane>
     <Number>3</Number>
    </Pane>
    <Pane>
     <Number>1</Number>
    </Pane>
    <Pane>
     <Number>2</Number>
    </Pane>
    <Pane>
     <Number>0</Number>
     <ActiveRow>20</ActiveRow>
    </Pane>
   </Panes>
   <ProtectObjects>False</ProtectObjects>
   <ProtectScenarios>False</ProtectScenarios>
   <EnableSelection>NoSelection</EnableSelection>
  </WorksheetOptions>
  <AutoFilter x:Range="R1C1:R1C22"
   xmlns="urn:schemas-microsoft-com:office:excel">
  </AutoFilter>
 </Worksheet>
</Workbook>

XDocument xmlDoc = XDocument.Load(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\Autodesk\\Revit\\Addins\\2013\\COBiev2.4Template.xml");

            /* ---- Get Facility Info ---- */
            var workbook = xmlDoc.Root.Element("Workbook");
            if (workbook != null)
            {
                var element = (from e in workbook.Elements("Worksheet")
                               where e.Attribute("ss:Name").Value == "Facility"
                               select e).FirstOrDefault();

                if (element != null)
                {
                    TaskDialog.Show("Worksheet", "Found Facility");
                    var tableNode = element.Element("Table");
                    if (tableNode != null)
                    {
                        TaskDialog.Show("Table", "Found Table");
                        tableNode.Add(new XElement("Row",
                            new XElement("Cell",
                                new XElement("Data", rDoc.ProjectInformation.Name)
                                    )
                        ));
                    }
                }
            }
            else
            {
                TaskDialog.Show("Workbook", "Workbook not found");
            } 
```

找不到“工作簿”。我对此有什么不理解，因为这似乎应该有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:56:51.353

XElement 很容易使用，google 一下，你会发现一些有用的教程

```
var element = (from e in xmlDoc.Elements("Worksheet")
               where e.Attribute("Name").Value == "Facility"
               select e).FirstOrDefault();

if (element != null)
{
    var tableNode = element.Element("Table");
    if (tableNode != null)
        tableNode.Add(new XElement("Row"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:32:47.753

如何找到像 node = xmlDoc 这样的节点。[元素](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)

并按节点检查它的属性。[属性](http://msdn.microsoft.com/en-us/library/bb292315.aspx)

然后，添加节点，如节点。[添加](http://msdn.microsoft.com/en-us/library/bb345077.aspx)

# ruby - 在一定的时间间隔或满足条件时执行循环

> ID：15892738
> 
> 赞同：2
> 
> 时间：2013-04-09T03:22:39.963
> 
> 标签：ruby, loops, time, ruby-1.9, ruby-2.0

我试图在 30 秒内每秒检查一次。我还没有找到一个明确的方法来用 Ruby 做到这一点。目前正在尝试这样的事情：

```
until counter == 30
  sleep 1
  if condition
    do something
    break
   else
     counter +=1
end 
```

类似的问题是它必须使用睡眠，这会使线程在其轨道上停止整整一秒钟。有没有另一种方法可以在不使用睡眠的情况下实现与上述类似的事情？有没有办法在基于时间的间隔上进行循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:29:43.990

您可以使用以下内容来近似您正在寻找的内容：

```
now = Time.now
counter = 1
loop do
  if Time.now < now + counter
    next
  else
    puts "counting another second ..."
  end
  counter += 1
  break if counter > 30
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-13T17:47:59.000

你可以做一些简单的事情，比如..

```
max_runtime = 10.seconds.from_now
puts 'whatever' until Time.now > max_runtime 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T14:31:32.010

你可以试试这个它允许间隔控制

```
counter == 30
interval = 5 # Check every 5 seconds
interval_timer = 1 # must start at 1
now = Time.now
while Time.now - now < counter
    if interval_timer % interval == 0 #Every 5 attempts the activity will process
        if condition
            stuff
        end
    end
    process_timer = process_timer + 1
end 
```

这将在保证的 30 秒内发生，间隔可以设置为 1 或更大的任何值。有些事情通过毫秒处理，这将为您提供一个选项，可以节省您的处理周期。在图形处理中效果很好。

# python - 为什么 encrypt() 返回 None？

> ID：15892739
> 
> 赞同：0
> 
> 时间：2013-04-09T03:22:46.187
> 
> 标签：python

我知道要求一群人浏览几个代码块有点大胆，但无论如何我都会尝试。我正在尝试使用 tk 在 python 中创建 enigma（第二次世界大战中使用的德国加密机）的克隆。从逻辑上查看我的代码，该方法`encrypt()`要么返回字符串“Alert”，这是极不可能的，要么正在返回`None`。有人可以快速但专注地浏览一下，以便我解决这个问题吗？谢谢你。

```
from Tkinter import *
from string import letters
import tkMessageBox

root = Tk()
root.title("EnigmaTK")

def rank(x, d = dict((letr,n%26+1) for n,letr in enumerate(letters[0:52]))):
    return d[x]

def shift(key, array):
    counter = range(len(array))
    new = counter
    for i in counter:
        new[i] = array[i-key]
    return new

alph = ["a", "b", "c", "d", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", " "]
rotI = ["a", "b", "c", "d", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", " "]
rotII = ["a", "b", "c", "d", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", " "]
rotIII = ["a", "b", "c", "d", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", " "]
ref = ["a", "b", "c", "d", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "e", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", " "]

label = Label(root, text="Input:")
label.pack(side = LEFT)
entry = Entry(root)
entry.pack(side = RIGHT)
input = entry.get()
rotor_set = map(rank, input[:3])
message = input[3:]

def encrypt():
    new_message = message
    for a in xrange(len(message)):
        for e in range(rotor_set[2]):
            new_message[a] = alph[rotI.index(rotII[rotIII.index(ref[rotIII.index(rotII[rotI.index(alph[a])])])])]
            a = a + 1
            rotIII = shift(1, rotIII)
        for i in range(rotor_set[1]):
            new_message[a] = alph[rotI.index(rotII[rotIII.index(ref[rotIII.index(rotII[rotI.index(alph[a])])])])]
            a = a + 1
            rotII = shift(1, rotII)
        for o in range(rotor_set[0]):
            new_message[a] = alph[rotI.index(rotII[rotIII.index(ref[rotIII.index(rotII[rotI.index(alph[a])])])])]
            a = a + 1
            rotI = shift(1, rotI)
    return new_message

def show():
    tkMessageBox.showinfo( "English to Enigma", encrypt())

e = Button(root, text = "encrypt", command = show)
e.pack()
root.mainloop() 
```

靠近顶部的字母都是一样的。如果问题得到解决，我将更改此设置。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:27:48.683

我的猜测`encrypt`是抛出一个由 Tk 转换为警报的异常。如果您从命令行启动程序，您可能会看到异常。

如果这是一个例外，我的猜测是你正在尝试`new_message`通过做`new_message[a] = ...`. 如果`new_message`是一个字符串（或元组），这在 Python 中是不允许的，因为字符串是不可变的。相反，请使用列表：

```
new_message = list(message) 
```

并在您返回时加入消息：

```
return ''.join(new_message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:32:38.140

此行似乎在错误的时间执行：

```
input = entry.get() 
```

我假设您想在用户单击按钮时获取数据，而不是在程序运行开始时获取数据。由于用户单击按钮时不获取数据，因此`message`保持为空字符串，`new_message`变为空字符串并`encrypt()`返回空字符串。

一个可能的解决方案是修改`encrypt()`：

```
def encrypt():
    input = entry.get()
    new_message = input[3:]
    ... 
```

# php - 在 jQuery AJAX 请求中使用文本框文本

> ID：15892741
> 
> 赞同：0
> 
> 时间：2013-04-09T03:23:25.220
> 
> 标签：php, jquery, ajax

我正在尝试向基于用户键入的文本框字段动态生成的 PHP 表单（使用 get）发送请求。我尝试了一些方法，但无法获取文本框的值。

```
<script>
  $("#myDiv").on('click', 'p', function(){
      setInterval(function() {
        $.ajax({url:"val",success:function(result){
          $("#myDiv").html(result);
        }});
      },1000);
  });
</script> 
```

如果我这样离开它，它会起作用并将请求发送到“val”，但我不确定如何将文本框的值放在那里。它仍然在同一个 div 中，该 div 是在页面完全加载后动态加载的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:25:41.523

```
var val = $("#id-of-textbox").val(); 
```

替换`#id-of-textbox`为您的文本框的实际 id，`val`然后 var 将包含您的文本框的文本值。

您将使用 ajax 请求发送它，如下所示：

```
$.ajax({url:"val", data: { value: val }, success: function... 
```

# java - 获取带有上下文的堆栈跟踪到线程

> ID：15892744
> 
> 赞同：3
> 
> 时间：2013-04-09T03:24:03.367
> 
> 标签：java, multithreading, exception

我正在尝试获取 Java 中线程的当前堆栈跟踪。我探索了以下方法：

1.  在 Java 中打印当前线程的堆栈跟踪的最简单方法之一是使用 java.lang.Thread 类中的 dumpStack() 方法

2.  打印堆栈跟踪的另一种方法是使用 Throwable 类的 printStackTrace() 方法

还有其他方法可以让我们更有效地获取 Java 中线程的当前堆栈跟踪吗？

下面是我设计的课程..

```
public class StackTraceExample 
{ 
private static final Logger logger = Logger.getLogger(StringReplace.class.getName()); 
public static void main(String args[]) 
{
 //calling a method to print stack trace further down 
first();
} 

public static void first()
{ 
second(); 
}

 private static void second() 
 {
 third();
 } 

 private static void third()
 {
 //If you want to print stack trace on console than use dumpStack() method 
  System.err.println("Stack trace of current thread using dumpStack() method");
  Thread.currentThread().dumpStack(); 

  //This is another way to print stack trace from current method 

  System.err.println("Printing stack trace using printStackTrace() method of Throwable "); 
  new Throwable().printStackTrace();

  //If you want stack trace as StackTraceElement in program itself than 
  //use getStackTrace() method of Thread class

  StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();

  //Once you get StackTraceElement you can also print it to console 
  System.err.println("displaying Stack trace from StackTraceElement in Java");
  for(StackTraceElement st : stackTrace)
  {
  // System.err.println(st);
  } 
  }
  } 
```

## 输出 ：-

```
Stack trace of current thread using dumpStack() method 
java.lang.Exception: Stack trace 
at java.lang.Thread.dumpStack(Thread.java:1249) 
at test.StringReplace.third(StringReplace.java:38) 
at test.StringReplace.second(StringReplace.java:31) 
at test.StringReplace.first(StringReplace.java:27)
at test.StringReplace.main(StringReplace.java:23)

Printing stack trace using printStackTrace() method of Throwable 
java.lang.Throwable
at test.StringReplace.third(StringReplace.java:42)
 at test.StringReplace.second(StringReplace.java:31)
 at test.StringReplace.first(StringReplace.java:27)
 at test.StringReplace.main(StringReplace.java:23) 
 displaying Stack trace from StackTraceElement in Java 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:25:39.347

> 还有其他方法可以让我们更有效地获取 Java 中线程的当前堆栈跟踪吗？

不，`thread.printStackTrace()`（或`getStackTrace()`）是正确的方法。如果它是当前线程，那么它在`Exception`内部使用一个，但如果它是另一个线程，它会直接生成堆栈跟踪。

要添加的一件事是，如果您想获取线程的堆栈跟踪但不确定是否会使用它，那么保存异常然后仅`getStackTrace()`在需要时调用应该更有效。`Exception`在进行调用之前，堆栈跟踪并未完全充实。有关更多详细信息，请参阅代码`Throwable.getOurStackTrace()`。

# sml - 将值过滤到两个列表中

> ID：15892745
> 
> 赞同：3
> 
> 时间：2013-04-09T03:24:03.310
> 
> 标签：sml, smlnj

所以我是 sml 的新手，我试图了解它的来龙去脉。最近我尝试创建一个带有两个参数的过滤器：一个函数（返回一个布尔值）和一个针对该函数运行的值列表。过滤器的作用是返回对函数返回 true 的值列表。

代码：

```
fun filter f [] = []  |
   filter f (x::xs) =
      if (f x)
      then x::(filter f xs)
      else (filter f xs); 
```

所以这行得通。但是我现在要做的只是返回一个包含真值列表和假的元组。我坚持我的条件，我真的看不到另一种方式。关于如何解决这个问题的任何想法？

代码：

```
fun filter2 f [] = ([],[])  |
   filter2 f (x::xs) =
      if (f x)
      then (x::(filter2 f xs), []) (* error *)
      else ([], x::(filter2 f xs)); (* error *) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:06:17.990

我认为有几种方法可以做到这一点。

**重用过滤器**

例如，我们可以使用归纳方法，基于您的元组将由两个元素组成的事实，第一个是满足谓词的元素列表，第二个是不满足谓词的元素列表。因此，您可以将过滤器功能重用为：

```
fun partition f xs = (filter f xs, filter (not o f) xs) 
```

不过，这不是最好的方法，因为它对列表进行了两次评估，但如果列表很小，这是非常明显且非常易读的。

**折叠式的**

考虑这一点的另一种方法是折叠。您可能认为您正在将您的列表缩减为一个元组列表，并且随着您的进行，您根据谓词拆分您的项目。有点像这样：

```
fun parition f xs = 
    let
        fun split x (xs,ys) =
            if f x
            then (x::xs,ys)
            else (xs, x::ys)

        val (trueList, falseList) = List.foldl (fn (x,y) => split x y) 
                                                   ([],[]) xs
    in
        (List.rev trueList, List.rev falseList)
    end 
```

**分区**

您也可以像 SML 的 List.parition 方法一样实现自己的折叠算法：

```
fun partition f xs = 
    let
        fun iter(xs, (trueList,falseList)) = 
            case xs of
                 [] => (List.rev trueList, List.rev falseList)
               | (x::xs') => if f x
                             then iter(xs', (x::trueList,falseList))
                             else iter(xs', (trueList,x::falseList))
    in
        iter(xs,([],[]))
    end 
```

**使用 SML 基法**

最终，您可以避免所有这些并使用 SML 方法[List.partition](http://www.standardml.org/Basis/list.html#SIG%3aLIST.partition%3aVAL)，其文档说：

> 隔断层
> 
> 将 f 应用于 l 的每个元素 x，从左到右，并返回一个对 (pos, neg)，其中 pos 是那些 x 的列表，其中 fx 评估为真，而 neg 是那些 x 的列表，fx 评估为错误的。pos 和 neg 的元素保留了它们在 l 中所拥有的相同的相对顺序。

此方法与前面的示例一样实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T03:33:02.347

因此，我将展示一个好的方法，以及一个更好的方法（IMO）。但是“更好的方法”仅供您将来学习时参考：

```
fun filter2 f [] = ([], [])
  | filter2 f (x::xs) = let

  fun ftuple f (x::xs) trueList falseList =  
    if (f x) 
      then ftuple f xs (x::trueList) falseList 
    else ftuple f xs trueList (x::falseList)

    | ftuple _ [] trueList falseList = (trueList, falseList)

in
  ftuple f (x::xs) [] []
end; 
```

你的不起作用的原因是，当你调用时`x::(filter2 f xs)`，编译器天真地假设你正在构建一个列表，它不假设它是一个元组，它**正在进入**你的函数调用的范围。因此，当您认为**结果类型是列表的元组时**，编译器会获得隧道视野并认为**结果类型是列表。**在我看来，这是更好的版本，`foldr`如果你好奇，你应该查看这个函数，使用这种技术会更好，因为它更具可读性，更少冗长，更重要的是......*更可预测和健壮*：

```
fun filter2 f l = foldr (fn(x,xs) => if (f x) then (x::(#1(xs)), #2(xs)) else (#1(xs), x::(#2(xs)))) ([],[]) l; 
```

第一个示例有效的原因是因为您正在存储默认的空列表，这些列表累积了符合条件或不符合条件的变量的副本。但是，您必须明确告诉 SML 编译器以确保类型规则一致。您必须绝对确保 SML 知道您的返回类型是**列表元组。**这个命令链中的任何错误，都会导致执行失败。因此，在使用 SML 时，请始终研究您的类型推断。至于第二个，你可以看到它是单行的，但我会让你自己研究那个，只需 google`foldr`和`foldl`.

# printing - MPI 屏障和打印

> ID：15892750
> 
> 赞同：1
> 
> 时间：2013-04-09T03:25:06.027
> 
> 标签：printing, concurrency, mpi

我正在做一个简单的 MPI 分配，它可以进行行矩阵乘法。

我正在尝试输出矩阵，由于某种原因，打印的顺序是乱序的。一次只指定一个进程打印，如果刷新则输出，并使用 MPI_Barrier。所以我很困惑印刷品是如何重新排序的。

```
void print_matrix(int id, int p, int pn, int n, double **row, double *shared_col_data, double *resdata){
    int i,j, k;
    for(i=0; i<p; i++){
        for(k=0; k < pn; k++){

            int row_pos=((i*pn)+k);

            if(id==i){
                if( row_pos <n){
                    printf("[ROW: %10d][ID: %3d]\t",row_pos,id);
                    printf("|");

                    for(j=0; j<n; j++){
                        printf("%.4f ",row[k][j]);
                    }

                    if(row_pos == (n/2)){
                        printf("| X |");
                    }
                    else{
                        printf("|   |");
                    }

                    printf("%.4f ",shared_col_data[row_pos]);
                    fflush(stdout);
                }
            }//End its ur turn to print

            MPI_Barrier (MPI_COMM_WORLD);
            if(id==0){
                if(row_pos == (n/2)){
                    printf("| = |");
                }
                else{
                    printf("|   |");
                }
                printf("%.4f|\n",resdata[row_pos]);
                fflush(stdout);

            }

            MPI_Barrier (MPI_COMM_WORLD);
        }

    }//End Processor Loop

} 
```

这是一个示例输出：

```
Input Size(N): 12
Processors(P): 12
N per Processors(P): 1
ID:  3 SN: 3 EN: 3
ID:  0 SN: 0 EN: 0
ID:  2 SN: 2 EN: 2
ID:  4 SN: 4 EN: 4
ID:  11 SN: 11 EN: 11
ID:  7 SN: 7 EN: 7
ID:  8 SN: 8 EN: 8
ID:  6 SN: 6 EN: 6
ID:  10 SN: 10 EN: 10
ID:  1 SN: 1 EN: 1
ID:  9 SN: 9 EN: 9
ID:  5 SN: 5 EN: 5
All Data Generated
Column Data Shared
Multiplication Done
All res Gather
[ROW:          0][ID:   0]  |0.5974 0.7066 0.9131 0.1548 0.4382 0.5132 0.3729 0.5554 0.7832 0.7953 0.5202 0.6986 |   |0.8076 |   |2.4959|
[ROW:          1][ID:   1]  |0.4320 0.9492 0.2266 0.1211 0.3904 0.9614 0.2000 0.7380 0.4471 0.3622 0.9844 0.1921 |   |0.0051 |   |2.3152|
[ROW:          2][ID:   2]  |0.2821 0.6740 0.9673 0.6623 0.6922 0.9760 0.8697 0.0096 0.6827 0.9590 0.2399 0.1100 |   |0.2254 |   |2.8286|
[ROW:          3][ID:   3]  |0.5915 0.1042 0.7262 0.8395 0.9665 0.9716 0.2252 0.7184 0.6054 0.8336 0.5033 0.2620 |   |0.3670 |   |2.8024|
|   |2.1632|
[ROW:          4][ID:   4]  |0.0821 0.3956 0.0252 0.9953 0.3822 0.4278 0.8978 0.7726 0.5235 0.2972 0.3229 0.4520 |   |0.1409 
[ROW:          5][ID:   5]  |0.5684 0.0840 0.5961 0.7087 0.1331 0.1426 0.1554 0.3976 0.2051 0.1481 0.9468 0.7025 |   |0.5302 |   |2.1380|
| = |2.7801|
[ROW:          6][ID:   6]  |0.7347 0.9194 0.3374 0.9823 0.1040 0.3878 0.7086 0.3132 0.4359 0.8223 0.2545 0.8752 | X |0.9129 
[ROW:          7][ID:   7]  |0.0464 0.6857 0.7146 0.6858 0.3210 0.2477 0.5767 0.2342 0.1406 0.5467 0.4063 0.0733 |   |0.1262 |   |1.8125|
[ROW:          8][ID:   8]  |0.6413 0.1076 0.2843 0.3515 0.9252 0.0349 0.0830 0.5063 0.9232 0.9900 0.5849 0.5612 |   |0.0204 |   |2.1263|
[ROW:          9][ID:   9]  |0.5292 0.3410 0.8543 0.5942 0.5822 0.3245 0.1719 0.9346 0.7611 0.3722 0.9653 0.4368 |   |0.5167 |   |2.4469|
|   |2.6545|
[ROW:         10][ID:  10]  |0.7641 0.6008 0.9687 0.9276 0.2462 0.2832 0.0131 0.0390 0.4860 0.6569 0.9390 0.7620 |   |0.7972 |   |2.0755|
[ROW:         11][ID:  11]  |0.7291 0.5953 0.6171 0.0396 0.5790 0.5262 0.5881 0.2631 0.9517 0.5118 0.0835 0.2115 |   |0.2310 
```

您可以看到一些行以其他行的结尾开始，但打印这些行的代码被屏障包围。

我觉得这是一个简单的问题，我很累看到它

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:54:06.537

MPI 规范不包括并行 I/O。这纯粹取决于实现。

# matlab - 可执行结果

> ID：15892758
> 
> 赞同：0
> 
> 时间：2013-04-09T03:26:07.123
> 
> 标签：matlab, exe

除了在控制台中显示或将输出写入文本文件之外，还有什么方法可以传递可执行文件的输出？可执行文件是一个 MATLAB 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:37:43.773

在 linux/unix 中，将您的输出重定向到 /dev/null，它将丢弃它。在 Windows 中，重定向到 NUL。

# math - 按位四舍五入到最接近的零

> ID：15892759
> 
> 赞同：1
> 
> 时间：2013-04-09T03:26:08.023
> 
> 标签：math, floating-point, bit-manipulation

我只是想知道如何按位四舍五入到最接近的零？以前，我使用循环执行长除法。但是，由于数字总是除以数字的幂除以 2。我决定使用位移。所以，我可以得到这样的结果：

```
12/4=3
13/4=3
14/4=3
15/4=3
16/4=4 
```

我可以像往常一样通过执行长除法来做到这一点吗？

```
12>>2
13>>2 
```

如果我使用这种位移，不同编译器的行为是否不同？四舍五入怎么样？我正在使用 Visual c++ 2010 编译器和 gcc。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:37:10.223

按位移位等价于以 2 的幂进行舍入到负无穷大的除法，这意味着答案永远不会大于未舍入的值（例如 (-3) >> 1 等于 -2）。

对于非负整数，这相当于四舍五入。

# r - roxygen2 在构建 R 包时不显示函数帮助文档

> ID：15892761
> 
> 赞同：16
> 
> 时间：2013-04-09T03:26:24.313
> 
> 标签：r, devtools, roxygen2

我正在使用`devtools`构建 R 包，并且有些功能并非旨在对最终用户可见。但是，由于这些函数涉及到调用 C 代码`.Call`，所以我必须`@useDynLib`在函数上方编写 .Rd 文件的自动生成。这样，当我构建包时，即使我没有包含`@export`这些功能，它们仍然出现在帮助文档中......有没有办法**抑制**这些功能，即使它们已经记录在案？谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-10T15:45:13.653

根据 Hadley 的评论，使用`@keywords internal`将使最终用户无法看到该功能。详细信息可以[在](http://r-pkgs.had.co.nz/man.html)wiki 页面中找到`devtools`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-18T19:00:14.383

已接受答案中链接的 wiki 不再讨论`@keywords internal`（截至 2016 年 4 月）。如果有人看到一个例子有帮助：

```
# multiplyBy3
#' This is an example of an internal function called \code{multiplyBy3()}
#'
#' Sometimes you want internal functions as part of an R Package built with 
#' RStudio and roxygen2, but you don't want .Rd files created for them
#' or to have them be visible in the help document following the build process
#' 
#' @keywords internal
#'
#' @param base_num The number to multiply by three 
#'
#' @import jsonlite
#'
#' @return Returns a numeric vector
#'
multiplyBy3 <- function(base_number) {
  stopifnot(is.numeric(base_number))
  return(base_number * 3)
} 
```

关键位：不包括`@export`和包括`@keywords internal`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-05T17:24:17.373

对我来说，`@keywords internal`没有用（roxygen2 6.1.1）。我能够在我的 roxygen 评论中使用以下内容来达到预期的结果：

```
@noRd 
```

# jsp - 在 JSP 中使用可用的 java 类包？

> ID：15892764
> 
> 赞同：0
> 
> 时间：2013-04-09T03:26:51.707
> 
> 标签：jsp, package

我是 JSP 开发的新手。我已经运行了简单的 .jsp 文件。不，我在使用包中可用的类时遇到问题。我在应用程序目录中的 webapp 目录中有应用程序目录我有所有 .jsp 文件和名为 mypack 的包。mypack 包含我想在 app 目录中的 .jsp 文件中使用的类。但是当我想运行包含 mypack 包类的 .jsp 文件时出现 500 错误。

```
Example: Example1.jsp

   <%@page contentType="text/html"%>    
   <%@page pageEncoding="UTF-8"%>
   <%@ page import="mypack.Display" %>
   <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>    
   <%
       Display cnt=new Display();
       String outpt=cnt.echoVar("Hi da");
       out.println(outpt);
   %>

Counter.java

    package mypack;

    public class Display
     {
          public String echoVar(String var){
        return var;
     }
     } 
```

有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:02:22.663

`Java`文件进入`src`，然后是你的包。 `JSP`文件位于`webapp`或`WebContent`（在 Eclipse 中）应该包含`WEB-INF`目录的目录下。

例子：![在此处输入图像描述](https://i.stack.imgur.com/yR0gc.png)

这应该有更多帮助：http: [//tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html#Standard_Directory_Layout](http://tomcat.apache.org/tomcat-7.0-doc/appdev/deployment.html#Standard_Directory_Layout)

# android - 不能在 android 中使用 add(Calendar.DAY_OF_MONTH,1)

> ID：15892765
> 
> 赞同：0
> 
> 时间：2013-04-09T03:26:58.800
> 
> 标签：android, onclick, android-calendar

我尝试使用按钮 onClick 处理程序将 1 天添加到日历，但是当我点击 nextDay 按钮时它会引发错误。这是一个代码片段：

```
public class Main extends Activity {
TextView dateView;

private int mYear;
private int mMonth;
private int mDay;
static final int DATE_DIALOG_ID = 1;
GregorianCalendar c;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    dateView = (TextView)findViewById(R.id.dateView);

    GregorianCalendar c = new GregorianCalendar();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);    
}
public void nextDay(View v) {
c.add(Calendar.DAY_OF_MONTH, 1);
updateDateDisplay();
}
private void updateDateDisplay() {
String[] month_names = getResources().getStringArray(R.array.month_names);
    dateView.setText(
        new StringBuilder()
                .append(mDay).append(" ")
                .append(month_names[mMonth]).append(" ").append(mYear));
}
} 
```

我也试过，不行。this.c.add(Calendar.DAY_OF_MONTH, 1);

LogCat 日志：

```
FATAL EXCEPTION: main
java.lang.IllegalStateException: Could not execute method of the activity
at android.view.View$1.onClick(View.java:2072)
at android.view.View.performClick(View.java:2408)
at android.view.View$PerformClick.run(View.java:8816)
at android.os.Handler.handleCallback(Handler.java:587) 
```

# scala - 泛型中的类型别名类型约束

> ID：15892780
> 
> 赞同：0
> 
> 时间：2013-04-09T03:28:27.270
> 
> 标签：scala, generics

我有一种情况，我想使用有界泛型类型作为可以生成什么类的约束。问题是我需要

```
abstract class SomeAbstractClass

trait Foo[A <: SomeAbstractClass]

trait Bar[A] extends Foo[A]    
//  Fails error: type arguments [A] do not conform to trait Foo's type parameter bounds [A <: SomeAbstractClass]

// Need to write it like this, for every single subclass of Foo
trait Bar[A <: SomeAbstractClass] extends Foo[A] 
```

有没有一种更简单的方法可以通过系统来推广它，而不必每次都重新输入边界？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:27:20.513

也许这是适用的，或者至少产生了一些新的想法：

```
abstract class SomeAbstractClass
trait Foo { // propagated by abstract type member
  type A <: SomeAbstractClass
}
trait Bar extends Foo // no generic type parameter needed here
trait BAR[SAC <: SomeAbstractClass] extends Bar { type A = SAC } // introduce type parameter
trait Baz[SAC <: SomeAbstractClass] extends BAR[SAC] // generic type parameter needed here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:00:51.747

类型参数的约束是约束。它们不会像您希望的那样通过继承传递。

# php - 如何默认禁用文本框并稍后启用它？

> ID：15892782
> 
> 赞同：-4
> 
> 时间：2013-04-09T03:28:52.540
> 
> 标签：php, javascript, html

如何默认禁用文本框并让用户通过复选框启用它？

```
<input type="checkbox" id="sccb" name="science" value="science">
<script type="text/javascript">
    $(document).ready(function(){
    $('#sccb').click(function(){
    if (this.checked) {
    $('#cns').removeAttr("disabled");
    }
    else {
    $("#cns").attr("disabled", true);
    }
    });
    });
</script>

<input type="text" id="cns" name="coornamescience" disabled="disabled" size="30"></input> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:30:40.990

用于`disabled="disabled"`文本框，然后用于`JS/jQuery`在点击时启用

演示 - [http://jsfiddle.net/jaCmE/](http://jsfiddle.net/jaCmE/)

```
<textarea rows="4" cols="50" disabled="disabled" id="mytextbox">
</textarea>

<input type="checkbox" id="checkbox1" /> 
```

然后`Javascript/jQuery`像这样使用 -

```
$(document).ready(function(){
    $('#checkbox1').click(function(){
    if (this.checked) {
    $('#mytextbox').removeAttr("disabled");
    }
    else {
    $("#mytextbox").attr("disabled", true);
    }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:46:37.450

您可以使用 jquery 来定位复选框，如果启用了复选框，则禁用文本框，反之亦然。html:

```
<form action="">
<input type="text" name="box" id="mytext" />
<input type="checkbox" name="check" id="mycheckbox" />
</form> 
```

JS：

```
 $(function(){
    //Disable the textbox
   var textbox = $('#mytext');
   textbox.attr("disabled","disabled");

    $('#mycheckbox').change(function(){
       //Enable input
        if(textbox.attr('disabled')){
           $('#mytext').removeAttr('disabled');
        }else {
            textbox.attr("disabled","disabled");
        }
    });

}); 
```

这是 JsFiddle 上的插图：http: [//jsfiddle.net/X5TVx/](http://jsfiddle.net/X5TVx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:41:39.263

```
<script type="text/javascript">
function disenable(e) {
  e[0].disabled = e[1].checked ? "" : "disabled"
}
</script>
<form action="">
<input type="text" disabled="disabled"><br>
<input type="checkbox" onchange="disenable(this.form)">Click me
</form> 
```

这里 e 是表单，e[0] 是第一个输入（文本框），e[1] 是第二个输入（复选框）。当复选框更改时，它调用禁用将表单作为输入传递，该函数根据其检查状态擦除或设置文本框的禁用参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T04:33:41.637

正如 icktoofay 所说，让它在标记中启用，然后使用脚本禁用它。

```
<input type="text" id="i0">
<label for="cb0"><input id="cb0" type="checkbox">Check to enable</label>

<script>
  document.getElementById('i0').disabled = true;
  document.getElementById('cb0').onclick = function() {
    document.getElementById('i0').disabled = !this.checked;
  };
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T03:30:43.553

使用 JavaScript，首先禁用文本框。然后将`change`事件处理程序添加到复选框。在其中，将文本框的禁用状态设置为与选中状态相反。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T03:31:44.890

您可以使用 javascript 在页面加载时禁用文本框，然后在复选框中添加一个事件以重新启用文本框。

# image - 如何将图像添加到 dojo 数据网格单元格

> ID：15892784
> 
> 赞同：0
> 
> 时间：2013-04-09T03:29:15.080
> 
> 标签：image, datagrid, dojo

我可以通过向单元格添加一个类来向 dojo 数据网格单元格添加图像，但是当我双击单元格时，我单击的行的图像会丢失，所以还有另一种方法可以添加不丢失的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:11:40.600

就在这里，

只需添加一个

```
<div class="imagediv"></div> 
```

作为您的单元格的**值**以及您的 css 文件中的值，如下所示：

```
.imagediv{height:20px;width:20px;background-image:url(/path/to/image.png);} 
```

如果您需要根据单元格值显示图像，您应该查看 dojo 的布局格式化程序函数：

[http://dojotoolkit.org/reference-guide/1.8/dojox/grid/DataGrid.html](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/DataGrid.html)

（搜索格式化程序）

# c# - 使用 ADOMD XMLReader 从 SSAS 多维数据集获取数据

> ID：15892790
> 
> 赞同：0
> 
> 时间：2013-04-09T03:30:18.223
> 
> 标签：c#, asp.net, cube, ssas-2008, adomd.net

我有一个多维数据集，我正在尝试使用以下代码检索数据。我不知道查询将返回的列数和行数。**我只想读取每一行的每一列的值。**

```
void OutputDataWithXML()
        {
            //Open a connection to the local server.
            AdomdConnection conn = new AdomdConnection("Data Source=localhost");
            conn.Open();

            //Create a command to retrieve the data.
            AdomdCommand cmd = new AdomdCommand(@"WITH MEMBER [Measures].[FreightCostPerOrder] AS 
[Measures].[Reseller Freight Cost]/[Measures].[Reseller Order Quantity],  
FORMAT_STRING = 'Currency'

SELECT [Geography].[Geography].[Country].&[United States].Children ON ROWS, 
[Date].[Calendar].[Calendar Year] ON COLUMNS
FROM [Adventure Works]
WHERE [Measures].[FreightCostPerOrder]", conn);

            //Execute the command, retrieving an XmlReader.
            System.Xml.XmlReader reader = cmd.ExecuteXmlReader();

            **// How to get the values form each column here ????
    // I just want to read value of each column going over each row**
            Console.WriteLine(reader.ReadOuterXml());

            //Close the reader, then the connection
            reader.Close();
            conn.Close();

            //Await user input.
            Console.ReadLine();
        } 
```

以下链接说从 SSAS 多维数据集检索数据的最快方法是 XMLReader

[http://msdn.microsoft.com/en-us/library/ms123479(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms123479(v=sql.105).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-29T22:56:55.200

拥有 XmlReader 后，您可能需要一个 CellSet 来读取数据和元数据。

请参阅 “在断开连接状态下检索数据”部分中的[https://technet.microsoft.com/en-us/library/ms123476(v=sql.110).aspx](https://technet.microsoft.com/en-us/library/ms123476(v=sql.110).aspx)

```
string DemonstrateDisconnectedCellset() {
//Create a new string builder to store the results
System.Text.StringBuilder result = new System.Text.StringBuilder();

//Connect to the local server
using (AdomdConnection conn = new AdomdConnection("Data Source=localhost;"))
{
    conn.Open();

    //Create a command, using this connection
    AdomdCommand cmd = conn.CreateCommand();
    cmd.CommandText = @"
                  WITH MEMBER [Measures].[FreightCostPerOrder] AS 
                        [Measures].[Reseller Freight Cost]/[Measures].[Reseller Order Quantity],  
                        FORMAT_STRING = 'Currency'
                  SELECT 
                        [Geography].[Geography].[Country].&[United States].Children ON ROWS, 
                        [Date].[Calendar].[Calendar Year] ON COLUMNS
                  FROM [Adventure Works]
                  WHERE [Measures].[FreightCostPerOrder]";

    //Execute the query, returning an XmlReader
    System.Xml.XmlReader x = cmd.ExecuteXmlReader();

    //At this point, the XmlReader could be stored on disk,
    //transmitted, modified, cached, or otherwise manipulated

    //Load the CellSet with the specified XML
    CellSet cs = CellSet.LoadXml(x);

    //Now that the XmlReader has finished being read
    //we can close it and the connection, while the
    //CellSet can continue being used.
    x.Close();
    conn.Close();

    //Output the column captions from the first axis
    //Note that this procedure assumes a single member exists per column.
    result.Append("\t");
    TupleCollection tuplesOnColumns = cs.Axes[0].Set.Tuples;
    foreach (Tuple column in tuplesOnColumns)
    {
        result.Append(column.Members[0].Caption + "\t");
    }
    result.AppendLine();

    //Output the row captions from the second axis and cell data
    //Note that this procedure assumes a two-dimensional cellset
    TupleCollection tuplesOnRows = cs.Axes[1].Set.Tuples;
    for (int row = 0; row < tuplesOnRows.Count; row++)
    {
        result.Append(tuplesOnRows[row].Members[0].Caption + "\t");
        for (int col = 0; col < tuplesOnColumns.Count; col++)
        {
            result.Append(cs.Cells[col, row].FormattedValue + "\t");
        }
        result.AppendLine();
    }

    return result.ToString();
} // using connection
} 
```

# javascript - Node JS 推送服务器发送/接收

> ID：15892792
> 
> 赞同：3
> 
> 时间：2013-04-09T03:30:37.707
> 
> 标签：javascript, jquery, node.js, socket.io

我正在尝试设置一个节点 js 服务器来向我的浏览器应用程序推送通知。我有一个基本示例，但我想知道如何在握手时从客户端将数据发送到服务器。

我需要向服务器发送用户 ID 之类的信息，因此当收到通知时，可以将其路由回用户。

我的服务器看起来像这样

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs');

app.listen(8000);

function handler ( req, res ) {
    res.writeHead( 200 );
    res.end('node working');
};

io.sockets.on( 'connection', function ( socket ) {

  socket.volatile.emit( 'notification' , "blah" );
}); 
```

我的客户看起来像这样

```
 var socket = io.connect('http://localhost:8000');

  socket.on('notification', function (data) {
    //prints data here
  }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:42:47.650

在 socket.io 中，emit 本质上与任何其他事件处理程序（例如 jQuery 的`.on('click'...)`）一样；您声明事件并发送数据。在服务器上，您添加`.on('event', ...)`以捕获请求并处理它。

socket.io 的首页显示了这个服务器示例：

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

这对客户来说：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

听起来您正在寻找的部分就是`socket.emit`部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T04:06:49.017

过去，我通过在客户端上设置一个 cookie（您可能正在这样做），然后使用 socket.io 的`authorization`事件来完成这种事情。您可以使用此事件来决定是否首先接受与用户的套接字连接。

```
io.configure(function () {
  io.set('authorization', function (handshakeData, callback) {

    var cookie = handshakeData.headers.cookie;

    // parse the cookie to get user data...

    // second argument to the callback decides whether to authorize the client
    callback(null, true);
  });
}); 
```

在此处查看更多文档：[https ://github.com/LearnBoost/socket.io/wiki/Authorizing](https://github.com/LearnBoost/socket.io/wiki/Authorizing)

请注意，这`handshakeData.headers.cookie`只是 cookie 的字符串文字表示，因此您必须自己进行解析。

# eclipse - NoSuchMethodError: LocalSessionFactoryBuilder.addAnnotatedClass(Ljava/lang/Class;)Lorg/hibernate/cfg/Configuration;

> ID：15892797
> 
> 赞同：0
> 
> 时间：2013-04-09T03:30:50.353
> 
> 标签：eclipse, hibernate, spring-mvc, jboss, nosuchmethod

我正在使用 Spring 3.2 和 Hibernate4。我包括了所有需要的罐子。使用 JBoss AS。从 Eclipse 部署。但我收到了这个错误。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'personController': Injection of autowired dependencies failed; nested exception is 
org.springframework.beans.factory.BeanCreationException: Could not autowire field: private 
com.springmvcsample.service.PersonService 
com.springmvcsample.controller.PersonController.personService; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 
'personService': Injection of autowired dependencies failed; nested exception is 
org.springframework.beans.factory.BeanCreationException: Could not autowire field: private 
com.springmvcsample.dao.PersonDAO com.springmvcsample.service.PersonServiceImpl.personDao; nested 
exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with 
name 'personDao': Injection of autowired dependencies failed; nested exception is    
 org.springframework.beans.factory.BeanCreationException: Could not autowire field: 
 org.hibernate.SessionFactory com.springmvcsample.dao.PersonDAOImpl.sessionFactory; nested 
 exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with 
 name 'sessionFactory' defined in ServletContext resource [/WEB-INF/hibernate_config.xml]: 
 Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: 
 org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.addAnnotatedClass
 (Ljava/lang/Class;)Lorg/hibernate/cfg/Configuration; 
```

Web.xml

```
 <servlet>
   <servlet-name> SpringMVC_Hibernate</servlet-name>
    <servlet-class>
              org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
   <load-on-startup>1</load-on-startup>
    </servlet>

   <context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/SpringMVC_Hibernate-servlet.xml</param-value>
  </context-param>

 <servlet-mapping>
   <servlet-name>SpringMVC_Hibernate</servlet-name>
   <url-pattern>*.htm</url-pattern>
 </servlet-mapping> 
```

SpringMVC_Hibernate-servlet.xml

```
 <context:component-scan base-package="com.springmvcsample.controller"/>
    <context:component-scan base-package="com.springmvcsample.dao"/>
    <context:component-scan base-package="com.springmvcsample.service"/>
    <import resource="hibernate_config.xml"/>

    <mvc:annotation-driven content-negotiation-manager="contentNegotiationManager"/>
    <bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
        <!-- Turn off working out content type based on URL file extension, should fall back to looking at the Accept headers -->
        <property name="favorPathExtension" value="false" />
    </bean>

    <bean name="sender" class="com.springmvcsample.utility.MessageSender"/> 
```

hibernate_config.xml

```
 <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>/resources/db.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.user}" />
    <property name="password" value="${jdbc.password}" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan" value="com.springmvcsample.controller" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>

        </props>
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean> 
```

![我的库文件](https://i.stack.imgur.com/lmUml.png)

其他罐子包括：

```
 spring-jms-3.2x.jar 
  spring-orm-*.jar
  spring-tx-*.jar
  spring-web-*.jar
  spring-webmvc-*.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T16:35:01.177

在这种情况下，使用 Maven 会让生活变得更轻松。

在 Eclipse / STS 等 IDE 中打开 pom.xml 将为您提供更好的图片，如下所示：-

![在此处输入图像描述](https://i.stack.imgur.com/3nQih.png)

# python - enpkg 的大写包名问题

> ID：15892798
> 
> 赞同：0
> 
> 时间：2013-04-09T03:31:10.563
> 
> 标签：python, enthought

我正在尝试使用 enpkg 工具将“Qt”包安装到我的[EPD 免费版安装中。](http://www.enthought.com/products/epd_free.php)这是在 Windows 上。

enpkg 适用于小写包：

```
H:\>enpkg pandas
prefix: C:\Python27
No update necessary, 'pandas' is up-to-date.
pandas-0.10.1-1.egg was installed on: Mon Apr 08 15:07:14 2013 
```

但它似乎不正确地处理大写包名：

```
H:\>enpkg Qt
prefix: C:\Python27
No egg found for requirement 'qt'.

H:\>enpkg "Qt"
prefix: C:\Python27
No egg found for requirement 'qt'. 
```

我知道[Qt](https://en.wikipedia.org/wiki/Qt_%28software%29)是可用的，因为我可以在 Mac OS X 上安装它，我在 EPD 包目录中看到它：[http ://www.enthought.com/products/epdlibraries.php](http://www.enthought.com/products/epdlibraries.php)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:22:28.037

正如您所发现的，这不是区分大小写的问题。

您在 Python 中使用的不是直接的 Qt，而是 Qt 的 Python 包装器，它可能是 PySide（免费用户可用）或 PyQt4（GPL 许可证，仅对订阅者可用，在 OSX-64 上不可用）。Enthought 建议使用 PySide，除非您对 PyQt4 包装器有特殊要求。

所以你应该在所有平台上做的是`enpkg pyside`.

在 Mac OS X 和 Linux 上，Qt 是一个单独的包，enpkg 作为 PySide 的依赖项自动安装。

目前，在 Windows 上，Qt 本身被捆绑到 PySide 中，因此没有名为 Qt 的单独包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:14:17.003

看起来 EPD 免费发行版无法访问 Qt，因为它可以正常工作：

```
H:\>enpkg PIL
prefix: C:\Python27
No update necessary, 'pil' is up-to-date.
PIL-1.1.7-3.egg was installed on: Mon Apr 08 11:50:47 2013 
```

我想我将不得不尝试手动安装它，或者为 Enthought 许可证咳嗽...

# java - 斐波那契计算

> ID：15892801
> 
> 赞同：0
> 
> 时间：2013-04-09T03:31:33.390
> 
> 标签：java, numbers, fibonacci

这个程序应该从用户那里得到一个斐波那契数，程序将计算它是什么，同时确保用户输入一个正数和一个不小于斐波那契数 70 的数字。所以，如果用户输入 7，它应该打印 13。 fibcalc() 方法应该进行计算。当我尝试编译程序时，我收到错误“斐波那契类中的方法 fibcalc 不能应用于给定类型：`System.out.printf("Fibonacci #%d is %f", num, fibcalc(num, x3));`和”找不到符号“`return x3;`这是我的代码：

```
import java.util.Scanner;

public class Fibonacci
{
    public static void main ( String args[] ) 
    {
    Scanner input = new Scanner ( System.in );

        int num; 
        double x3 = 0;

           System.out.print("Which Fibonacci number would you like? ");
       num = input.nextInt(); 
           do
       {
        System.out.print("Which Fibonacci number would you like? ");
        num = input.nextInt(); 
    }while(num >= 0 && num <= 70);

    System.out.printf("Fibonacci #%d is %f", num, fibcalc(num, x3));

}

public static double fibcalc(int num) 
{
    int x1 = 0;
    int x2 = 1;

        if (num == 0)

            return 0;

        else if (num == 1)

            return 1;

        else

            for (int x3 = 0; x3 < num; x3++)
                {
                    x3 = x1 + x2;
                    x1 = x2;
                    x2 = x3;
                }
                return x3;

}
  } 
```

可能还有其他我错过的问题。我对java很陌生。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:39:05.107

该`fibcalc()`方法只有一个`int`参数，但您使用*两个*参数调用它。

将呼叫从

```
fibcalc(num, x3) 
```

到

```
fibcalc(num) 
```

即将该行更改为：

```
System.out.printf("Fibonacci #%d is %f", num, fibcalc(num)); 
```

* * *

此外，如果您想要准确的结果数字，请从 using 更改`double`为 using [`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)，它可以准确处理任意大的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:02:33.677

如果要计算斐波那契数，可以使用直接（非递归、非迭代）[公式计算斐波那契数](http://mathforum.org/library/drmath/view/52686.html)：

```
Fib(n) = (pow((1+sqrt(5))/2, n) + pow((1-sqrt(5))/2, n)) / sqrt(5) 
```

事实证明，对于所有`n >= 0`，您可以将此公式简化为：

```
Fib(n) = round(pow((1+sqrt(5))/2, n) / sqrt(5)) 
```

知道了这一点，您可以使用以下简单实现`fibcalc`：

```
public static double fibcalc(int num) {
    return Math.floor(Math.pow((1+Math.sqrt(5))/2, num) / Math.sqrt(5) + 0.5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T22:40:48.993

您还可以使用以下计算器计算斐波那契数列（使用 Javascript）：[在此处输入链接描述](http://www.convertforfree.com/fibonacci-sequence-calculator/)

# javascript - 对象无法访问 JS 构造函数

> ID：15892804
> 
> 赞同：0
> 
> 时间：2013-04-09T03:31:54.060
> 
> 标签：javascript

我是 JS 新手。我正在学习 JS OOP 的概念。我正在尝试使用构造函数在 JS 中创建私有变量。但是当我尝试使用 getter 访问这些值时，我收到一个错误“TypeError: 'undefined' is not a function”

```
function Card(n,s) {
    var number = n;
    var suit = s;
    //getters
    var getNumber = function(){
            return this.number;
    };
    var getSuit = function(){
            return this.suit;
    };
}
var test = new Card(10, 1);
test.getNumber(); 
```

我无法弄清楚错误可能是什么。在这方面需要一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:34:10.463

因为您没有将函数附加到`this`，它指向构造函数的实例。附加到`this`的属性和函数就像经典 OOP 中的“公共”属性和方法。

此外，变量`number`和`suit`存在于实例内部，但不作为实例的属性。`this`由于您没有附加它们，因此无法通过它们访问它们。它们就像经典 OOP 中的“私有变量”。

但是由于您的 getter 与变量在同一范围内（构造函数`Card`），因此它们可以访问它们，就像经典 OOP 的“getter”和“setter”一样。

```
function Card(n, s) {
  var number = n;
  var suit = s;
  //getters
  this.getNumber = function () {
    return number;
  };
  this.getSuit = function () {
    return suit;
  };
}
var test = new Card(10, 1);
test.getNumber(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:34:59.763

你要

```
function Card(n,s) {
    this.number = n;
    this.suit = s;
}

    //getters
Card.prototype.getNumber =  function(){
        return this.number;
};
Card.prototype.getSuit = function(){
        return this.suit;
};

var test = new Card(10, 1);
test.getNumber(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:34:18.630

getter 必须是成员函数，即它必须在`this`对象上定义。

在您的情况下，这些 getter 对构造函数来说是私有的，在构造函数之外将无法访问它

```
function Card(n,s) {
    var number = n;
    var suit = s;
    //getters
    this.getNumber = function(){
            return this.number;
    };
    this.getSuit = function(){
            return this.suit;
    };
}
var test = new Card(10, 1);
test.getNumber(); 
```

# mysql - MySQL按时隙分组显示统计信息

> ID：15892805
> 
> 赞同：0
> 
> 时间：2013-04-09T03:32:01.310
> 
> 标签：mysql, datetime, group-by

我有一张名为预订的表格，其中包含以下字段：

```
`id` int(11) NOT NULL AUTO_INCREMENT,
`username` varchar(150) NOT NULL,
`begin_time` datetime NOT NULL,
`end_time` datetime NOT NULL,
`node_id` int(11) NOT NULL,
PRIMARY KEY (`id`) 
```

我希望显示给定时间段内的预订统计信息（比如 $from - $until，来自 php 的值）。用户在每次预订时预订一个节点。有许多可以预订的节点，我使用以下查询按日期显示预订统计信息。

```
SELECT DATE(begin_time) `Date`, count(id) as reservations
FROM reservation
WHERE begin_time > '" . $from . "'
AND end_time < '" . $until . "'
GROUP BY Date" 
```

现在我想统计一天中哪个时间段更活跃。一天的 24 小时被分成 48 个 30 分钟的时段。在我的表中，所有 begin_date 和 end_date 值都是整数，例如 2011-04-11 20:00:00 或 2011-04-11 14:30:00。预订的持续时间可以是 30 分钟、60 分钟等，最长可达 4 小时。

我希望我的统计数据采用以下格式（或多或少）

```
 Time slot       | reservations
----------------------------------
00:00:00 - 00:30:00 |     23
00:30:00 - 01:00:00 |     12
01:00:00 - 01:30:00 |     20
01:30:00 - 02:00:00 |     66
02:00:00 - 02:30:00 |     12
                and so on 
```

你能帮我处理 SQL 查询吗？

**编辑：**我现在看到 PostgreSQL 有一些范围类型和运算符，例如 <@ (range is contains by) [documentation here](http://www.postgresql.org/docs/9.2/interactive/functions-range.html)。这是否意味着如果我使用 Postgres，我的查询会更容易？MySQL有类似的东西吗？

**编辑2：**谢谢你，汤姆。实际上，我更改了您的答案，`Date`从 select 子句和 group by 子句中删除了 DATE(begin_time) AS ，因为我想查看在*很多天的时间段内*一天中哪些时间最活跃。而且我可以忍受 1 小时的粒度而不是 30 分钟。但我想问你你的第一句话到底是什么意思。如果预订从 01:00:00 开始并在 03:00:00 结束，我实际上确实希望它在两个时间段都被计算在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:17:29.377

> 在我的表中，所有 begin_date 和 end_date 值都是整数，例如 2011-04-11 20:00:00 或 2011-04-11 14:30:00

除非你也有像`2011-04-11 14:15:00`你想要的结果那样的时间，步长为 30 分钟没有多大意义，除非你想计算一些预订两次。

除了在 MySQL 中，它会是这样的：

```
SELECT 
DATE(begin_time) AS `Date`,
CASE 
WHEN TIME(begin_time) >= '00:00:00' AND TIME(begin_time) < '01:00:00' THEN '00:00:00 - 01:00:00' 
WHEN TIME(begin_time) >= '01:00:00' AND TIME(begin_time) < '02:00:00' THEN '01:00:00 - 02:00:00' 
/*...and so on...*/
END AS `TimeSlot`,
COUNT(id) as reservations
FROM reservation
WHERE begin_time > '" . $from . "'
AND end_time < '" . $until . "'
GROUP BY `Date`, `TimeSlot` 
```

我将其设置为 1 小时的时间段，并添加了要分组的日期。

其实，傻我，现在想想，当你有正好一小时的时间段时，你也可以这样做：

```
SELECT 
DATE(begin_time) AS `Date`,
HOUR(begin_time) AS `TimeSlot`,
COUNT(id) as reservations
FROM reservation
WHERE begin_time > '" . $from . "'
AND end_time < '" . $until . "'
GROUP BY `Date`, `TimeSlot` 
```

**更新：**

```
SELECT 
CASE 
WHEN TIME(begin_time) BETWEEN '00:00:00' AND '01:00:00' OR TIME(end_time) BETWEEN '00:00:00' AND '01:00:00' THEN '00:00:00 - 01:00:00' 
WHEN TIME(begin_time) BETWEEN '01:00:00' AND '02:00:00' OR TIME(end_time) BETWEEN '01:00:00' AND '02:00:00' THEN '01:00:00 - 02:00:00' 
/*...and so on...*/
END AS `TimeSlot`,
COUNT(id) as reservations
FROM reservation
WHERE begin_time > '" . $from . "'
AND end_time < '" . $until . "'
GROUP BY `TimeSlot` 
```

# javascript - 在 HTML 中加载 Js 文件

> ID：15892815
> 
> 赞同：8
> 
> 时间：2013-04-09T03:33:10.193
> 
> 标签：javascript, cordova

我的第一个 PhoneGap 应用程序包含 2 个 HTML 文件。

第一个被命名为`index.html`使用`index.js`. 该文件将显示一个列表项。当我单击该列表中的一个项目时，它会将我带到`detail.html`文件中：

```
 $.mobile.changePage("detail.html", { transition: "slideup"}); 
```

或者

```
 location.href = "detail.html"; 
```

在`detail.html`页面上，我加载`detal.js`. 然而它没有用。我无法在`detail.js`.

请给我您的建议，有什么例子吗？

> 拍摄照片
> 
> ```
>  <link rel="stylesheet" href="css/jquery.mobile.structure-1.3.0.min.css" />
>     <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
>     <link rel="stylesheet" href="css/getAbstract.min.css" />
>     <script src="js/jquery-1.9.0.min.js"></script>
>     <script src="js/jquery.mobile-1.3.0.min.js"></script>
>     <script src="js/jquery.ba-dotimeout.js"></script>
>     <script src="js/jquery.dst.js"></script>
> 
>     <script type="text/javascript" charset="utf-8" src="js/cordova-2.5.0.js"></script>
>     <script type="text/javascript" charset="utf-8"></script>
> 
> </head>
> <body>
> 
>     <div data-role = "page" data-theme = "a" id = "pageContainer">
>         <!--Start Page Header -->
>         <div data-role = "header" id = "pageHeader" data-nobackbtn = "true" data-position = "fixed">
>             <h1>Camera</h1>
>         </div>
>         <!--End Page Header -->
> 
>         <!--Start Page Content-->
>         <div data-role = "content" id= "pageContent">
>             <a data-role = "button" id = "btnCaptureEdit" href = "">Capture Edit</a>
>             <a data-role = "button" id = "btnLibraryPhoto" href = "">Get Photo From Library</a>
>             <a data-role = "button" id = "btnAlbumPhoto" href = "">Get Photo From Album</a>
>         </div>
>         <!--End Page Content-->
> 
>         <!--Start Page Footer-->
>         <div data-role = "footer" id = "pageFooter">
>         </div>
>         <!--End Page Footer-->
> 
>     </div>
>     <script src="js/detail.js"></script>
> 
> </body>
> 
> </html> 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T03:51:37.937

如果这是您的`detail.html`，我看不到您在哪里加载`detail.js`？也许这

```
<script src="js/index.js"></script> 
```

应该是这个

```
<script src="js/detail.js"></script> 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-16T14:48:00.027

我有同样的问题，并找到了答案。如果将 node.js 与 express 一起使用，则需要为其提供自己的功能才能访问 js 文件。例如：

```
const script = path.join(__dirname, 'script.js');
const server = express().get('/', (req, res) => res.sendFile(script)) 
```

# java - Wicket：在 ListView 中使用可编辑的内联标签并在更改此标签值后更新模型

> ID：15892816
> 
> 赞同：0
> 
> 时间：2013-04-09T03:33:21.803
> 
> 标签：java, scala, wicket

我需要在 ListView 中使用可编辑标签或内联标签，并且在更改此组件的值后，我想知道如何更新此 listView 中显示的对象的属性

```
add(new ListView[SomeObject]("listSomeObject", listData) {

    override protected def onBeforeRender() {
     ...
      super.onBeforeRender()
    }

    def populateItem(item: ListItem[SomeObject]) = {
      var objValue = item.getModelObject()

      item.add(new Label("total", objValue.toString(getFormatter())))
     }
    }
  }) 
```

在上面的代码中，对象 SomeObject 有一个名为 total 的属性，listView 显示了一组 SomeObject，当 listview 的某行中的 label total 发生变化时，相应的对象 SomeObject 应该更新为 label total 的新值。

有人可以提供一些有用的例子来帮助我完成这项任务吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:05:54.180

您应该使用模型来展示您的财产。例如属性模型。该方法`getObject()`将在显示时被调用。PropertyModel 将调用所选属性的 getter。您可以让您的对象有一个 getter 来检索您感兴趣的格式化值。

```
item.add(new Label("total", new PropertyModel(item.getModel(), "formattedValue"))) 
```

# php - 将控制台应用程序输出直接保存在数组中

> ID：15892818
> 
> 赞同：1
> 
> 时间：2013-04-09T03:33:40.207
> 
> 标签：php, matlab, console-application

我们如何对控制台应用程序的输出进行进一步的比较或计算。我相信它是 ASCII 格式的。我在 php 中调用了控制台应用程序，它提供了大量的数字数据。我希望将数据保存在数组中而不是 txt 文件中，因为读取和写入文件的过程需要时间我希望它直接将其保存在数组中。我使用了 exec($command,$result) 但我无法以正确的形式保存结果。我的输出如下所示：

```
 Columns 1 through 7

0.1373    0.0414    0.0541    0.1342    0.5606    0.5293    0.1652

 Columns 8 through 14

0.0341    0.0396    0.0633    0.0778    0.0289    0.0654    0.0752

Columns 15 through 21

0.3055    0.4602    0.0631    0.0360    0.0188    0.0497    0.0228........... 
```

我不希望将列行保存在数组中，并且我希望将列中的每个元素保存在数组的不同索引中。例如数组[1]=0.1373 和数组[2]=0.414。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:36:42.813

我的建议是在输出的每一行上运行一个简单的正则表达式：

```
if (preg_match_all('/\d+\.\d+/', $line, $matches)) {
    print_r($matches[0]);
} 
```

如果表达式匹配，您将获得可用于进一步处理的结果数组。与您的帖子匹配的第一行的输出：

```
Array
(
    [0] => 0.1373
    [1] => 0.0414
    [2] => 0.0541
    [3] => 0.1342
    [4] => 0.5606
    [5] => 0.5293
    [6] => 0.1652
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:20:04.343

您可以使用 [s,t]=system(...) 捕获外部命令的输出。第二个输出应该是你在文件中的字符串。然后您可以解析字符串（例如使用正则表达式或 str split utils）以根据需要提取数据。

# c++ - 这是怎么回事？

> ID：15892820
> 
> 赞同：0
> 
> 时间：2013-04-09T03:34:12.223
> 
> 标签：c++, assembly

我正在阅读某人的代码，他正在调用这样的函数。该块中的“this”是指向虚拟方法表的指针，并且他正在使用偏移量来调用所述表中的函数。如果您想知道，这是一个黑客行为。

```
 __asm
{
    MOV EDI, this
    LEA ECX, [EDI + 0x4]
    MOV EDX, DWORD PTR DS:[ECX]
    CALL [EDX + 0x24]
} 
```

他有一些更简单的代码，只是调用“this”+偏移量，但我对这个代码中发生的事情感到困惑。如果有帮助的话，我可以从 Ida 发布 vtable 转储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:42:44.877

`this`在 C++ 中是一个关键字，可以在对象的范围内使用来表示对象本身。

```
class A{
    private:
        int x;

    void method(){
        this->x = 5;    //"this" is a pointer to the object itself
    }
}; 
```

在本例中，“this”是一个`A* const`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:24:19.850

看起来像多重继承。在这种情况下，每个继承的类接口都有单独的 vtable。因此，第二条和第三条指令为指定的继承类接口计算 vtable 的开始。调用很明显，24 只是一个幻数，是在该继承类中要调用的函数的已知偏移量。

# three.js - 我无法将事件侦听器添加到 three.js 中的 flycontrols.js 实例

> ID：15892823
> 
> 赞同：0
> 
> 时间：2013-04-09T03:34:31.337
> 
> 标签：three.js

我将正在编写的脚本中的控件从轨迹球控件切换到飞行控件。我向轨迹球控件添加了一个事件处理程序，没有问题。

```
controls.addEventListener( 'change', function () {

    cameraChanged = true;

    signals.cameraChanged.dispatch( camera );
    render();

} ); 
```

但是，当我尝试将事件侦听器添加到 flycontrols 实例时，我收到了错误：

```
Object [object Object] has no method 'addEventListener' 
```

我假设 flycontrols 类没有添加事件侦听器的机制。我想知道我将如何添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:40:05.350

`FlyControls`没有`EventDispatcher`实施。

# c++ - 枚举类型的 C++ 静态成员变量不会编译

> ID：15892827
> 
> 赞同：2
> 
> 时间：2013-04-09T03:34:56.310
> 
> 标签：c++, static, enums

我正在尝试使用公共枚举和该枚举类型的私有静态成员变量编写一个类。我可以初始化静态变量的值，但是如果我尝试在类成员函数中访问它，我的代码将无法链接。这是一个简单的工作示例，可以编译：

```
g++ -o TestClass.o TestClass.cpp 
```

但是当我尝试编译/链接主源文件时失败：

```
g++ -o test TestClass.o testmain.cpp 
```

我得到的错误是：

```
Undefined symbols for architecture x86_64:
  "TestClass::_enum", referenced from:
      TestClass::printEnum()     in TestClass.o
ld: symbol(s) not found for architecture x86_64 
```

我正在使用运行 OSX 10.7.5 和 gcc 4.2.1 的 Mac。

测试类.h：

```
#ifndef TEST_CLASS_H
#define TEST_CLASS_H

class TestClass
{
public:
  TestClass() {};  
  void printEnum();

  typedef enum {A, B, C} MyEnum;

private:
  static MyEnum _enum;

};

#endif 
```

测试类.cpp：

```
#include "TestClass.h"

#include <iostream>
using namespace std;

TestClass::MyEnum _enum = TestClass::A;

void TestClass::printEnum()
{
  cout << "Value of enum: " << _enum << endl;
} 
```

测试main.cpp：

```
#include "TestClass.h"

int main()
{
  TestClass tc;

  tc.printEnum();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:38:33.617

下面的代码声明了一个`_enum`类型为 的文件局部变量`TestClass::MyEnum`。它没有为您的静态成员变量提供定义。

```
TestClass::MyEnum _enum = TestClass::A; 
```

为此，您必须在适当的类范围内专门定义它，如下所示：

```
TestClass::MyEnum TestClass::_enum = TestClass::A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:49:16.123

类外的静态成员未正确定义正确格式：classname::enumtype staticmember = value;

在您的示例中，它是 TestClass::MyEnum _enum = TestClass::A;

# css - 小 CSS 图像未正确显示

> ID：15892830
> 
> 赞同：0
> 
> 时间：2013-04-09T03:35:14.780
> 
> 标签：css

我在使用 CSS 显示小图像时遇到问题。我正在尝试显示一个图标大小的图片（图片有几个像素边框，所以它不是边缘到边缘）但是图像本身在显示时没有居中，并且它的一部分被右侧和底部隐藏周围盒子的阴影。我喜欢阴影的外观，但我认为图像太小了，在调整大小时不能忽略盒子的阴影。这是我的CSS。有任何想法吗？

```
.delete_button {
    background: url('trash_can.png');
    background-repeat: no-repeat;
    width: 20px;
    height: 24px;
    display: inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:37:09.037

试试这个，调整背景位置值，直到你的图像定位正确：

```
.delete_button {
    background: url('trash_can.png');
    background-repeat: no-repeat;
    width: 20px;
    height: 24px;
    display: inline;
    background-position     : -3px -4px;
} 
```

进一步扩展这一点，您可能想尝试将所有小图像添加到矩阵样式的一个图标图像中。然后您可以使用宽度、高度和背景位置仅选择您想要的图像。这将允许您将所有图标作为单个文件一次加载，从而减少互联网流量。当需要“新”图标时，它已经被缓存并立即可用。

```
background-image: url("icons.png");
background-position: 30px 40px; /* Use these values to select your small image contained in your large image */
background-repeat   : repeat;
width           : 20px;     /* or however large your icon is */
height          : 24px;     /* or however large your icon is */ 
```

# android - 需要帮助才能使用扩展的 ListActivity 类运行我的 android 应用程序

> ID：15892832
> 
> 赞同：0
> 
> 时间：2013-04-09T03:35:31.437
> 
> 标签：android, android-intent

我有一个名为 main_activity.xml 的活动和两个名为 Main.java 和 Menu.java 的 java 类。在 Menu.java 类中，我扩展了 ListActivity 类。当我运行 myApp 时，它会弹出强制关闭。请帮忙。

**下面是 Menu.java 的代码：**

公共类菜单扩展 ListActivity{

```
String classes[]={"Main","Second","Third","China"};
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Menu.this, android.R.layout.simple_list_item_1, classes));

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    String selectedItem= classes[position];
    try{
        Class myClass = Class.forName("com.example.myapp."+selectedItem);
        Intent myIntent=new  Intent(Menu.this, myClass);
        startActivity(myIntent);
    }
    catch(ClassNotFoundException e)
    {
        e.printStackTrace();
    }
} 
```

}

**Main.java 类代码：**

公共类主要扩展活动{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Intent intent=new Intent("com.example.myapp.Menu");
    startActivity(intent);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

**Mainfest 文件代码：**

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    <activity
        android:name="com.example.myapp.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.example.myapp.Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MENU" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

**错误快速排序：**

![在此处输入图像描述](https://i.stack.imgur.com/JBpgg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:40:22.917

没有定义任何活动来处理意图。这可能是因为您没有在 onCreate 中正确启动您的意图。尝试这样的事情

```
Intent intent = new Intent(Main.this,Menu.class)
Main.this.startActivity(intent); 
```

编辑：另外我一定要问你有没有在清单中声明你的活动？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:01:26.880

在你的代码中一切都很好。但是当你打电话给其他班级时，你没有明确说明。任何方式使用下面的示例代码都可以正常工作..

```
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class MyListActivity extends ListActivity {
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
        "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
        "Linux", "OS/2" };
    // Use your own layout
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        R.layout.rowlayout, R.id.label, values);
    setListAdapter(adapter);
  }

  @Override
  protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
  }
} 

If u want to show it in your own layout use below rowlayout.xml file

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="22px"
        android:layout_height="22px"
        android:layout_marginLeft="4px"
        android:layout_marginRight="10px"
        android:layout_marginTop="4px"
        android:src="@drawable/ic_launcher" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >
    </TextView>

</LinearLayout> 
```

现在您可以使用带有类名的按钮 onclicklistner 调用此类。

我希望它有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:07:28.783

像这样改变

```
Intent intent=new Intent(Main.this, Menu.class);
startActivity(intent); 
```

像这样更改清单

```
 <uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="17" />

<application
<activity
    android:name="com.example.myapp.Main"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>

<activity   
      android:name="com.example.myapp.Menu" >
</activity>

</application> 
```

# jquery - 如何将 Json 解析为 JQuery 函数并获取函数内部的值

> ID：15892834
> 
> 赞同：0
> 
> 时间：2013-04-09T03:36:05.097
> 
> 标签：jquery, json

我正在尝试创建一个插件“bg-rotator”，它采用 JSON 格式的参数：

```
$('.selector').bg_rotator({
    'duration':500,
    'delay':5000
}); 
```

然后在我的 Jquery 函数中，我试图获取 JSON 对象并拆分值：

```
(function( $ ){
   $.fn.bg_rotator = function(jsonObj) {
      var cn = $(this).attr('class'); //get the class name
      var obj = JSON.parse(jsonObj); //get the Json object
      var duration = obj.duration;
      var delay = obj.delay;
   }; 
})( jQuery ); 
```

这给了我错误，我找不到解析和获取 JSON 值的方法。有任何想法吗？谢谢

这有效：

```
(function( $ ){
     $.fn.bg_rotator = function(jsonObj) {
           var cn = $(this).attr('class'); //get the class name
           var duration = jsonObj.duration; //get the Json object
           var delay = jsonObj.delay;
     };
   })( jQuery ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:38:24.087

JSON 是 Javascript 对象表示法。这个想法是它们本质上只是常规的 Javascript 对象，因此您可以像使用常规的 Javascript 对象一样使用它们。您不需要解析对象，除非它们已被字符串化。在这种情况下，您只是传递一个常规对象，因此您只需访问对象的属性，无需解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:45:47.810

不要使用 JSON.parse 因为你已经在传递 json 对象

只需删除 JSON.parse 并尝试它，它会工作

**变量 obj = jsonObj; //获取Json对象**

JSON.parse 用于将字符串解析为 json 对象，例如

**JSON.parse("{'duration':500,'delay':5000}")**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:39:15.277

尝试只调用 jsonObj.duration。

# php - 使用会话（内存）与重新验证（CPU）

> ID：15892835
> 
> 赞同：0
> 
> 时间：2013-04-09T03:36:06.643
> 
> 标签：php, ajax, session-variables

我有一个网页，它根据一组十五个标准在地图的可见区域上绘制数据点。用户可以平移或缩放地图，这将通过查询脚本触发对数据库的 AJAX 调用，以根据标准和地图可视区域的边界框生成新数据。当前的实现是通过验证脚本验证条件一次，并存储在`$_SESSION`加载到查询脚本的数组中（除非条件更改）。验证脚本由一系列`preg_match`函数和条件`if...else`语句组成。

我可以实现上述以节省内存的另一种方法是让查询脚本在每次用户移动地图时验证所有 15 个条件。权衡是更高的 CPU 消耗用于验证，以换取通过取消`$_SESSION`数组来降低内存使用量。鉴于在任何时候都有许多用户连接到服务器，我如何量化这两个选项之间的权衡以决定哪种方法更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:06:20.340

获得可靠数据的唯一方法是测试两种实现，模拟预期的并发用户峰值数量。

如果这不可行，我建议缓存（会话），因为添加一些 RAM 比增加 CPU 能力更容易（也更便宜）。

# java - Android PreferenceActivity 选择到一个文件

> ID：15892839
> 
> 赞同：1
> 
> 时间：2013-04-09T03:36:21.433
> 
> 标签：java, android, sharedpreferences, preferenceactivity

我目前有一个 PreferenceActivity，其中有一个项目和复选框列表。

```
public class BevCat extends PreferenceActivity {
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.bev_pref);
    }
} 
```

下面是对应的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
<PreferenceScreen
    android:key="button_voicemail_category_key"
    android:persistent="false"
    android:title="Juice" >
     <CheckBoxPreference
        android:defaultValue="false"
        android:key="appleJuice"
        android:summary=""
        android:title="Apple Juice" />
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="cranberryJuice"
        android:summary=""
        android:title="Cranberry Juice" />
      <CheckBoxPreference
        android:defaultValue="false"
        android:key="grapeJuice"
        android:summary=""
        android:title="Grape Juice" />
       <CheckBoxPreference
        android:defaultValue="false"
        android:key="orangeJuice"
        android:summary=""
        android:title="Orange Juice" />
        <CheckBoxPreference
        android:defaultValue="false"
        android:key="v8Splash"
        android:summary=""
        android:title="V8 Splash" />
</PreferenceScreen>

<PreferenceScreen
    android:key="button_voicemail_category_key"
    android:persistent="false"
    android:title="Soft Drinks" >
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="pepsi"
        android:summary=""
        android:title="Pepsi" />
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="cocaCola"
        android:summary=""
        android:title="Coca Cola" />
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="otherSoda"
        android:summary=""
        android:title="Other Soda" />
</PreferenceScreen>

<PreferenceScreen
    android:key="button_voicemail_category_key"
    android:persistent="false"
    android:title="Sports/Energy Drinks" >
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="gatorade"
        android:summary=""
        android:title="Gatorade" />
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="Powerade"
        android:summary=""
        android:title="Powerade" />
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="energyDrinks"
        android:summary=""
        android:title="Energy Drinks" />
</PreferenceScreen>

<PreferenceScreen
    android:key=""
    android:persistent="false"
    android:title="Water" >
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="water"
        android:summary=""
        android:title="Water" />
</PreferenceScreen>

<PreferenceScreen
    android:key="button_voicemail_category_key"
    android:persistent="false"
    android:title="Drink Mixes" >
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="powdered"
        android:summary=""
        android:title="Powdered/Mixes" />
     <CheckBoxPreference
        android:defaultValue="false"
        android:key="tea"
        android:summary=""
        android:title="Tea" />
</PreferenceScreen>

</PreferenceScreen> 
```

这是一个类别列表，一旦单击，就会导致产品列表和复选框。

我的最终目标是在这样的几个列表中选中复选框，然后再创建另一个列表，其中仅包含我从所有这些列表中选择的内容。我该怎么做呢？

谢谢

# java - 带下划线的 JLabel

> ID：15892844
> 
> 赞同：29
> 
> 时间：2013-04-09T03:36:52.377
> 
> 标签：java, swing, netbeans, jlabel

我正在尝试使 JLabel 下划线。我到处寻找，但我什么也没得到。即使在属性中，也没有为 JLabel 加下划线的选项。我能做些什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-09T03:38:41.387

```
JLabel label = new JLabel("<HTML><U>YOUR TEXT HERE</U></HTML>");
label.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR)); 
```

或者

```
JLabel label = new JLabel("Underlined Label");
Font font = label.getFont();
Map attributes = font.getAttributes();
attributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);
label.setFont(font.deriveFont(attributes)); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-09T03:43:36.080

```
JLabel label = new JLabel("Underlined Label");
Font font = label.getFont();
Map<TextAttribute, Object> attributes = new HashMap<>(font.getAttributes());
attributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);
label.setFont(font.deriveFont(attributes)); 
```

# html - 在 NSstring 中为 UIweb 视图分配 HTML 标记字符串

> ID：15892845
> 
> 赞同：-1
> 
> 时间：2013-04-09T03:37:05.967
> 
> 标签：html, ios, iphone, uiwebview, nsstring

如何将HTML标签字符串格式直接赋值给string，这样我就可以直接在UiWEB VIEW中显示了。

```
 <tr>
      <td align="center"><b>    Disclaimer</b></td>
   </tr>
     <tr>
       <td colspan="2" style="text-align:justify" class="ImageBorder">

   <p>

Personal Trainer is an endeavor by Bhasinsoft to provide in depth details and knowledge on exercises and workout regimes to work towards a health and fit body. While great care has been taken to provide as accurate knowledge and details as possible by referring to knowledge in public domain, guidance by fitness specialists and doctors, Bhasinsoft is not responsible for the accuracy of the data.

The data is provided AS IS and you understand that Bhasinsoft is not responsible for the accuracy, usefulness or safety resulting from the use of the content. You further understand and acknowledge that you may be exposed to content that is inaccurate, offensive, indecent, or objectionable, and you agree to waive, and hereby do waive, any legal or equitable rights or remedies you have or may have against Bhasinsoft with respect thereto, and, to the extent permitted by applicable law, agree to indemnify and hold harmless Bhasinsoft, its owners, operators, affiliates, licensors, and licensees to the fullest extent allowed by law regarding all matters related to your use of the content.

YOU AGREE THAT YOUR USE OF THE CONTENT SHALL BE AT YOUR SOLE RISK. TO THE FULLEST EXTENT PERMITTED BY LAW, BHASINSOFT, ITS OFFICERS, DIRECTORS, EMPLOYEES, AND AGENTS EXCLUDE ALL WARRANTIES, EXPRESS OR IMPLIED, IN CONNECTION WITH THE SERVICES AND YOUR USE THEREOF. TO THE FULLEST EXTENT PERMITTED BY LAW, BHASINSOFT EXCLUDES ALL WARRANTIES, CONDITIONS, TERMS OR REPRESENTATIONS ABOUT THE ACCURACY OR COMPLETENESS OF THIS CONTENT AND ASSUMES NO LIABILITY OR RESPONSIBILITY FOR ANY (I) ERRORS, MISTAKES, OR INACCURACIES OF CONTENT, (II) PERSONAL INJURY OR PROPERTY DAMAGE, OF ANY NATURE WHATSOEVER, RESULTING FROM YOUR ACCESS TO AND USE OF OUR SERVICES OR THE CONTENT, AND/OR (III) ANY ERRORS OR OMISSIONS IN ANY CONTENT OR FOR ANY LOSS OR DAMAGE OF ANY KIND INCURRED AS A RESULT OF THE USE OF ANY CONTENT. BHASINSOFT DOES NOT WARRANT, ENDORSE, GUARANTEE, OR ASSUME RESPONSIBILITY FOR ANY PRODUCT OR SERVICE ADVERTISED OR OFFERED BY A THIRD PARTY THROUGH THE SERVICES OR ANY HYPERLINKED SERVICES OR FEATURED IN ANY BANNER OR OTHER ADVERTISING, AND BHASINSOFT WILL NOT BE A PARTY TO OR IN ANY WAY BE RESPONSIBLE FOR MONITORING ANY TRANSACTION BETWEEN YOU AND THIRD-PARTY PROVIDERS OF PRODUCTS OR SERVICES. AS WITH THE PURCHASE OF A PRODUCT OR SERVICE THROUGH ANY MEDIUM OR IN ANY ENVIRONMENT, YOU SHOULD USE YOUR BEST JUDGMENT AND EXERCISE CAUTION WHERE APPROPRIATE.
  </p> 
```

所以我可以很容易地用这种方法以相同的格式显示它。

```
 self.webView=[[UIWebView alloc]initWithFrame:CGRectMake(0, 14 , 320, 343)];

NSString *tttt=[NSString stringWithString:@" <tr> <td align="center"><b>Disclaimer</b></td></tr> ";

[  self.webView loadHTMLString:self.app.musclesl baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];
[self.secondView addSubview:self.webView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:13:17.123

喜欢，

```
NSString *resourcePath = [[NSBundle mainBundle] resourcePath];
NSString *pathToHtml = @"html";
NSURL *baseURL = [[NSURL alloc] initFileURLWithPath:pathToHtml isDirectory:YES];

NSString *html = [NSString stringWithContentsOfFile:[[NSBundle mainBundle]    
                             pathForResource:@"nameOfFile" ofType:@"html"                                                               
                             inDirectory:@"html"] 
                         encoding:NSUTF8StringEncoding error:nil];
[webview loadHTMLString:html baseURL:baseURL]; 
```

这将是工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:58:38.693

我认为 loadHTMLString() 应该可以工作，

```
[self.webView loadHTMLString:tttt]; 
```

# ios - 应用商店本地化

> ID：15892849
> 
> 赞同：1
> 
> 时间：2013-04-09T03:37:14.977
> 
> 标签：ios, localization

这适用于 iPad 和 iPhone 应用程序。

对于应用程序默认本地化，本地化元数据和应用程序名称是否会损害应用程序商店的 SEO？还是只是关键字越多越好？我的应用程序可以有不同的名称，但在不同的国家是同一个应用程序吗？

我刚刚从我的美国 iPad 上搜索了我的西班牙语应用程序，尽管我拥有的唯一西班牙语元数据是西班牙语本地化，但它还是出现了。虽然我的应用程序的名称是英文的，但在西班牙语本地化中我有一个西班牙名称（有没有办法检查这个，因为我只能找到我的应用程序的英文名称）。

谢谢。

# entity-framework - EF 6 - 多对多 - 无重复连接表

> ID：15892851
> 
> 赞同：0
> 
> 时间：2013-04-09T03:37:30.037
> 
> 标签：entity-framework, many-to-many, entity-framework-6

我正在使用 EF6 对播种多对多关系有些困惑。

我有以下内容：

A保存`User`了**许多**`ChartQueries`（他们可以执行以获取图表）。A`ChartQuery`通常只属于一个用户，但是每个用户都可以执行多个“共享`ChartQuery`” `User`。结果，我使用连接表建立了**多对多**`UserChartQuery`关系。这些表在连接表的每一侧以一对多的方式在数据库中正常运行。

但是，我不太了解如何播种或使用这种关系。我不想最终得到“shared” `ChartQuery`s 的多个副本（每个副本都有一个副本`User`）。相反，每个“共享”应该只有一行，`ChartQuery`它是 each 集合的一部分 `User`（以及仅属于该`SavedChartQueries`集合的其他非共享s ）。`ChartQuery``User`

似乎我被迫为每个用户复制：

```
 var sharedChartQuery = new ChartQuery { ... }; 
  var nonSharedChartQuery = new ChartQuery { ... };

  var userOneChartQueryOne = new UserChartQuery { User = userOne, ChartQuery = sharedChartQuery  };

  var userTwoChartQueryOne = new UserChartQuery { User = userTwo, ChartQuery = sharedChartQuery };
  var userTwoChartQueryTwo = new UserChartQuery { User = userTwo, ChartQuery = nonSharedChartQuery }; 

  context.UserChartQueries.Add(userOneChartQueryOne);
  context.UserChartQueries.Add(userOneChartQueryTwo);
  context.UserChartQueries.Add(userTwoChartQueryTwo); 
```

所以首先这是播种的正确方法（直接通过 UserChartQueries 表）还是我应该播种每个`User`的 SavedChartQueries 导航属性？

这会导致`sharedChartQuery`每个连接表中的重复`User`吗？如果是这样，有什么办法可以避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:20:39.490

好的，我现在明白这是如何工作的。以下按预期工作：

```
 var userOne = new User {};
   var userTwo = new User {};
   var chartQuery = new ChartQuery { };

        context.Users.Add(userOne);
        context.Users.Add(userTwo);
        context.UserChartQueries.Add(new UserChartQuery { User = userOne, ChartQuery = chartQuery });
        context.UserChartQueries.Add(new UserChartQuery { User = userTwo, ChartQuery = chartQuery });
        context.ChartQueries.Add(chartQuery); 
```

最后一行将它添加到记录实际所在的表中。检查 SSMS 中的连接表表明它只包含外键，没有其他内容。没有重复项。

# php - 调用未定义的方法 DOMDocument::createDocumentType()

> ID：15892852
> 
> 赞同：0
> 
> 时间：2013-04-09T03:37:45.227
> 
> 标签：php, curl, domdocument

我有以下脚本片段。最初我没有意识到使用 getElementById 需要包含 createDocumentType，但现在我得到了上面列出的错误。我在这里做错了什么？提前致谢！

```
...
$result = curl_exec($ch); //contains some webpage i am grabbing remotely

$dom = new DOMDocument();
$dom->createDocumentType('html', '-//W3C//DTD HTML 4.01 Transitional//EN', 'http://www.w3.org/TR/html4/loose.dtd');
$elements = $dom->loadHTML($result);
$e = $elements->getElementById('1');
... 
```

编辑：附加说明，我验证了远程页面上的 DOM 是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:56:38.683

`DOMDocument``createDocumentType`正如您在[手册](http://www.php.net/manual/en/class.domdocument.php)中看到的那样，没有名为的方法。该方法属于[DOMImplemetation 类](http://www.php.net/manual/en/class.domdocument.php)。它是这样使用的（取自手册）：

```
// Creates an instance of the DOMImplementation class
$imp = new DOMImplementation;

// Creates a DOMDocumentType instance
$dtd = $imp->createDocumentType('graph', '', 'graph.dtd');

// Creates a DOMDocument instance
$dom = $imp->createDocument("", "", $dtd); 
```

由于您想将 HTML 加载到文档中，因此无需指定文档类型，因为它是根据导入的 HTML 确定的。你只需要有一些`id`属性，或者一个将其他属性标识为 id 的 DTD。这是 HTML 文件的一部分，而不是解析 PHP 代码。

```
$dom = new DOMDocument();
$dom->loadHTML($result);
$element = $dom->getElementById('my_id'); 
```

将完成这项工作。

# javascript - 如何使用 addthis 社交插件分享 url + 参数？

> ID：15892855
> 
> 赞同：4
> 
> 时间：2013-04-09T03:38:09.450
> 
> 标签：javascript, html, addthis

如何使用 addthis 社交插件分享 url + 参数？
我已经阅读了 addthis api，但我找不到添加参数的乳清。
[http://support.addthis.com/customer/portal/articles/381263-addthis-client-api](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api)

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>hello world</title>
</head>
<body>
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_preferred_1"></a>
    <a class="addthis_button_compact"></a>
    <a class="addthis_counter addthis_bubble_style"></a>
    </div>
    <script type="text/javascript">
    var addthis_config = {
        // I want to share link as this url + my_defined_paramater, how to set?
        url: location.href+'refer_id=1900'  //not correct
    };
    </script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#username=addthis"></script>
    <!-- AddThis Button END -->
</body>
</html> 
```

![在此处输入图像描述](https://i.stack.imgur.com/odEjI.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:48:56.103

看起来您的网址中可能需要一个＆符号。从 API 文档显示的内容来看，其他一切看起来都很好。

```
var addthis_config = {
    // I want to share link as this url + my_defined_paramater, how to set?
    url: location.href+'&refer_id=1900'
                     //^^^
}; 
```

我在支持部分找到了一些项目。希望这会有所帮助。

[支持页面](http://support.addthis.com/customer/portal/articles/381242-url-title#.UWOgppNTDTo)

基本上，它说您可以添加一个称为`addthis:url`设置自定义 URL 的属性。由于您需要当前页面，因此您必须使用 JavaScript 的`setAttribute()`方法对其进行更新。

```
<div class="addthis_toolbox addthis_default_style" id="addthis_container">
    <a class="addthis_button_preferred_1"></a>
    <a class="addthis_button_compact"></a>
    <a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">
    var addThisCont = document.getElementById("addthis_container");
    var curUrl = location.protocol + "//" + location.href;
    var withGetVariable = curUrl + "?refer_id=1900";
    addThisCont.setAttribute("addthis:url", withGetVariable);
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#username=addthis"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T09:17:46.347

您应该使用以下代码：

```
 addthis_share = {
     url_transforms : {
         add: {
             oReferrer: LoggedOfficeGuid
              }
         } 
     } 
```

# python - Python 嵌套函数变量赋值

> ID：15892860
> 
> 赞同：0
> 
> 时间：2013-04-09T03:39:02.763
> 
> 标签：python

我试图在 python3 中按照以下几行做一些事情：

```
i = 1337
def g():
    print(i)
    i = 42
g() 
```

但得到以下错误

```
UnboundLocalError: local variable 'i' referenced before assignment 
```

我想我理解错误消息的含义，但为什么会这样呢？有什么办法可以规避这种情况吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T03:42:29.697

简而言之 - 当给定的变量名称未在函数中分配值时，将查找对该变量的引用。使用 global - 在这种情况下，python 将在全局范围内查找 i ：

```
i = 1337

def g():
    global i
    print i
    i = 42

g() 
```

[您可以在 PEP-0227](http://www.python.org/dev/peps/pep-0227/)中阅读有关变量范围的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:44:48.000

如果你真的想这样做，你需要从全局范围中获取 i 。

```
def g():
    global i
    print i
    i = 42 
```

但是，通常您最好将代码的工作方式更改为不需要全局变量。根据您使用它的方式，这可能就像传入 i 作为参数并返回更改后的值一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T04:39:18.137

Keeyai 建议将 i 作为参数传入的示例：

```
i = 1337
def g(i):
    print(i)
    i = 42
g(i) 
```

但是，您永远不会使用 i 的新值，所以也许这样的事情更有意义：

```
def g (i):
    i = 42
    return i

i = 1337
print g(i) 
```

# wolfram-mathematica - 如何配置 Mathematica 9 以自动评估所有笔记本？

> ID：15892863
> 
> 赞同：2
> 
> 时间：2013-04-09T03:39:06.750
> 
> 标签：wolfram-mathematica

我有一个在 Mathematica 9 中使用的 Mathematica 6 课程；没有更新版本。每次打开笔记本时，我都必须转到评估菜单并单击“评估笔记本”。有没有办法让我设置它，以便在我打开笔记本时自动评估它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:22:33.460

您可以设置初始化单元。检查[这个](http://reference.wolfram.com/mathematica/ref/menuitem/InitializationCell.html)和[这个](http://reference.wolfram.com/mathematica/howto/WorkWithInitializationCells.html)。之后，您可以打开一个笔记本并评估任何单元格（例如`2+2`-> Shift+Enter）并接受以运行所有初始化单元格。帮助我的一件事是检查`NotebookEvaluate`文档——这样我就可以评估另一个笔记本中的所有单元格，甚至不必打开它。

[您可以在此处](http://reference.wolfram.com/mathematica/tutorial/OptionsForCells.html)找到有关单元格选项的更多信息。

# hadoop - 如何为现有的 hadoop 集群部署 ambari

> ID：15892864
> 
> 赞同：3
> 
> 时间：2013-04-09T03:39:10.623
> 
> 标签：hadoop, ambari

正如我在这个标题中提到的，我可以跳过安装 hadoop 集群的步骤，因为该集群已经存在并且正在服务中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-01T17:46:27.047

Ambari 依赖“堆栈”定义来描述 Hadoop 集群包含哪些服务。Hortonworks 定义了一个自定义的 Ambari 堆栈，称为 HDP。

您可以定义自己的堆栈并使用您想要的任何服务和相应版本。有关定义堆栈和服务的更多信息，请参阅 ambari wiki。

话虽如此，我认为不可能将您预先安装的 Hadoop 与 Ambari 一起使用。Ambari 用于配置和管理 hadoop 集群。它跟踪每个堆栈服务的状态，以及每个服务组件的状态。由于您的集群已经配置好，因此很难（可能不可能）将其添加到 Ambari 实例中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T14:47:03.737

安装 Ambari 的最低要求之一是删除[此处](http://incubator.apache.org/ambari/1.2.4/installing-hadoop-using-ambari/content/ambari-chap1-5-1.html)提到的预先存在的工具安装。没有提到要删除任何预先存在的 hadoop 安装。

# linux - grep -v 不过滤行输出

> ID：15892870
> 
> 赞同：1
> 
> 时间：2013-04-09T03:39:59.250
> 
> 标签：linux, grep

我正在我的 linux 控制台上进行搜索`find /export/home01/ -name sql | grep -v 'Permission denied'`

但是，它未能过滤掉“权限被拒绝”的行

喜欢显示`find: /export/home01/oracle/oracle/product/11.2.0/db_1/network/log: Permission denied`.

我的命令有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:41:34.510

> 但是，它未能过滤掉“权限被拒绝”的行

这是意料之中的：您只是在过滤`stdout`，但错误消息（通常）会转到`stderr`。试试这个：

```
find /export/home01/ -name sql 2>&1 | grep -v 'Permission denied' 
```

# jquery - 类似stackoverflow的标签面板

> ID：15892874
> 
> 赞同：-4
> 
> 时间：2013-04-09T03:40:31.053
> 
> 标签：jquery, html, css, tabs

我想知道从过去 2 天开始，如何实现像 stackoverflow 这样的选项卡面板，例如。[https://stackoverflow.com/](https://stackoverflow.com/)（标签问题面板：有趣，功能，热门......）

我是服务器端开发人员（Java），我没有网页设计经验。但目前，我的个人作品需要这种类型的标签面板。

我试图在 google 中搜索，但找不到与 stackoverflow.com 类似的东西。虽然我找到 [了这个选项卡面板](http://squaredcode.comoj.com/) ，但我不知道如何获取它的源代码。

请帮助，如果您知道与源代码类似的链接或您有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:54:16.330

以下是一些供您选择的选项：

*   [http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)
*   [http://twitter.github.io/bootstrap/javascript.html#tabs](http://twitter.github.io/bootstrap/javascript.html#tabs)
*   [http://os.alfajango.com/easytabs/](http://os.alfajango.com/easytabs/)

它们都是开源的，易于下载。它们都带有示例代码。

它们也都可以定制样式。

这是一个使用带有您想要的样式的easytabs的示例：

[http://jsfiddle.net/Hh95r/](http://jsfiddle.net/Hh95r/)

请特别注意 css for `.tabs`and`.tabs:hover`因为这是添加边框的原因。

# javascript - 防止哈希更改滚动

> ID：15892875
> 
> 赞同：5
> 
> 时间：2013-04-09T03:40:34.210
> 
> 标签：javascript, hyperlink, scroll, anchor

对不起下面的丑陋布局示例... [http://www.wthdesign.net/test/test2.html](http://www.wthdesign.net/test/test2.html)

我设法将我的 id 名称附加到 url：

```
function generateUrl(el)
{
    var currentId = $(el).attr('id');
    document.location.hash = currentId;
} 
```

并添加：

```
<a id="abc2" onClick="generateUrl(this)" >this is an anchor btn</a> 
```

但这最终具有与以下相同的效果：

```
<a id="abc2" href="#abc2" >this is an anchor btn</a> 
```

一切都很好，但是当我单击链接时我不希望它滚动我应该怎么做？提前谢谢了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-16T21:54:15.907

如果 id 不是必需的，则只需`href="#some-value`更改窗口位置而不滚动页面。如果您确实需要`id`在文档中（在这种情况下是在 a 标签上），那么位置更改将导致滚动。您可以通过在现代浏览器中使用该`history`对象或将滚动位置存储在链接单击上，然后使用`hashchange`事件重置它来解决此问题。

我将在这两种解决方案中使用这个标记：

**示例标记：**

```
<div class="filler"></div>
<a id="abc1" href="#abc1" class="my-class">this is an anchor btn</a>
<div class="filler"></div>
<a id="abc2" href="#abc2" class="my-class">this is an anchor btn</a>
<div class="filler"></div>
<a id="abc3" href="#abc3" class="my-class">this is an anchor btn</a>
<div class="filler"></div> 
```

## history.replaceState 或 history.pushState

**[现场演示（点击）。](http://jsbin.com/IKoRiTeS/2/edit)**

```
//get element referneces
var elems = document.getElementsByClassName('my-class');

//iterate over the references
for (var i=0; i<elems.length; ++i) {
  //add click function to each element
  elems[i].addEventListener('click', clickFunc);
}

//this will store the scroll position
var keepScroll = false;

//fires when a ".my-class" link is clicked
function clickFunc(e) {
  //prevent default behavior of the link
  e.preventDefault();
  //add hash
  history.replaceState({}, '', e.target.href);
} 
```

## scrollTop 和 hashchange 事件

[**现场演示（点击）。**](http://jsbin.com/IKoRiTeS/1/edit)

**JavaScript：**

```
//get element referneces
var elems = document.getElementsByClassName('my-class');

//iterate over the references
for (var i=0; i<elems.length; ++i) {
  //add click function to each element
  elems[i].addEventListener('click', clickFunc);
}

//this will store the scroll position
var keepScroll = false;

//fires when a ".my-class" link is clicked
function clickFunc(e) {
  //if the location hash is already set to this link
  if (window.location.hash === '#'+e.target.id) {
    //do nothing
    e.preventDefault(); 
  }
  else {
    //the location will change - so store the scroll position
    keepScroll = document.body.scrollTop;
  }
}

window.addEventListener('hashchange', function(e) {
  //the location has has changed

  //if "keepScroll has been set
  if (keepScroll !== false) {
    //move scroll position to stored position
    document.body.scrollTop = keepScroll;
    //set "keepScroll" to false so that this behavior won't affect irrelevant links
    keepScroll = false;
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-07T09:44:56.763

我遇到的问题是我使用平滑滚动行为和Firefox滚动位置在单击锚链接时跳跃。所以这里的堆栈溢出没有什么效果很好。如果有人对我最近的方法感兴趣：

1.  将当前滚动位置存储在滚动侦听器中
2.  创建一个 hashchange 监听器
3.  通过将 css 添加到 body 来防止滚动，利用 window.scroll 函数并立即从 body 中删除 css 以启用滚动

这是一个例子：

```
document.addEventListener('DOMContentLoaded', () => {

  // store scroll position
  let scrollTop = document.documentElement.scrollTop
  window.addEventListener('scroll', () => scrollTop = document.documentElement.scrollTop)

  window.addEventListener('hashchange', () => {
    // disable scrolling
    document.body.style.overflow = 'hidden'

    // set current scroll position
    window.scroll(0, scrollTop)

    // enable scrolling
    setTimeout(() => {
      document.body.style.overflow = 'auto'
    }, 10)
  }, false)

  // trigger hashchange event on page load
  window.dispatchEvent(new Event('hashchange'))
}) 
```

# c# - 构建 Banshee：缺少依赖项

> ID：15892876
> 
> 赞同：1
> 
> 时间：2013-04-09T03:40:39.410
> 
> 标签：c#, mono, dependencies, banshee

我正在尝试从源代码构建女妖。我跑了`autogen.sh`，这是（一些）输出：

```
configure: error: Package requirements (gstreamer-0.10 >= 0.10.26
    gstreamer-base-0.10 >= 0.10.26
    gstreamer-plugins-base-0.10 >= 0.10.26
    gstreamer-controller-0.10 >= 0.10.26
    gstreamer-dataprotocol-0.10 >= 0.10.26
    gstreamer-fft-0.10 >= 0.10.26) were not met:

No package 'gstreamer-0.10' found
No package 'gstreamer-base-0.10' found
No package 'gstreamer-plugins-base-0.10' found
No package 'gstreamer-controller-0.10' found
No package 'gstreamer-dataprotocol-0.10' found
No package 'gstreamer-fft-0.10' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables GST_CFLAGS
and GST_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.
Error: Could not run ./configure, which is required to configure banshee 
```

我已经跑了`sudo apt-get build-dep banshee`，所以我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T06:25:13.187

有不同类型的依赖，**构建时依赖**和**运行时依赖**。构建程序所需的依赖项通常比运行程序所需的依赖项更多。例如，运行一个程序可能需要一个共享库。然而，构建程序可能还需要一个头文件。当您安装 banshee 时，您通常会同时安装所有运行时依赖项，但不会安装构建时依赖项。由于您使用的是 apt-get，因此您应该调查需要安装哪些软件包才能获得所需的构建依赖项。

您收到的错误消息来自名为 pkg-config 的程序。它通常用于跟踪构建依赖项。例如，某些库可能在不同的系统上需要不同的编译器标志，因此 pkg-config 有一个知道如何使用的库目录。这里 Banshee 的构建系统调用 pkg-config 以找到使用 gstreamer 库的正确标志，但由于未安装 gstreamer 的开发文件，pkg-config 将不知道如何使用它们。一旦安装了使用 pkg-config 的软件包的开发文件，就可以通过运行 pkg-config 请求标志，例如，`pkg-config --cflags --libs gstreamer-0.10`将返回 gstreamer-0.10 库的预处理器、编译器和链接标志。

pkg-config 使用的文件通常命名为`name-of-library.pc`. 使用您的包管理器搜索pkg-config 找不到的所有包的文件，例如`gstreamer-0.10.pc`,等等。`gstreamer-base-0.10.pc`使用 apt-get 的系统通常有一个名为 apt-file 的工具（虽然不一定默认安装），它可用于向包管理器查询提供特定文件的包的名称，例如`apt-file search gstreamer-0.10.pc`. 许多发行版（例如[Debian](http://www.debian.org/distrib/packages)或[Ubuntu](http://packages.ubuntu.com/)）还具有支持基于文件名搜索包的 Web 界面。

您有时可以通过运行`apt-get build-dep name-of-package`. 它将安装构建程序所需的软件包。但是，这将安装构建包管理器分发的包版本的要求。您正在构建的版本可能具有不同的依赖项，但如果要求相同，那么通常应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T20:13:33.920

显然，马库斯的回答很棒，但如果你想切入正题，答案是： `sudo apt-get install libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev`

我现在将更新 Banshee 网站：[完成](http://banshee.fm/download/development/)。

# c++ - cout 打印十六进制而不是十进制

> ID：15892877
> 
> 赞同：4
> 
> 时间：2013-04-09T03:40:39.877
> 
> 标签：c++

有没有人想到一个简单`std::cout`的值可能会以十六进制格式打印一个值，而它应该只格式化一个小数（如整数）？

例如，我有一行：

> std::cout << "_Agent [" << target << "] 仍然在 " << **((target->currWorker)->getEntities().size())** << " 实体的 worker[" <<目标->currWorker << "]" << std::endl;

这将打印：

> _Agent [0x2c6d530] 仍然在worker[0x2c520f0] 的**0x1**个实体中

笔记：

1-所说的输出有时是十进制的，有时是十六进制的

2-即使我`((target->currWorker)->getEntities().size())`改为`(int)((target->currWorker)->getEntities().size())`

任何提示？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T03:47:28.953

您可能已将 std::cout 设置为在代码上下文中打印十六进制，但忘记重置。例如：

```
std::cout<<std::hex<<12;
/*blah blah blah*/
std::cout<<12; //this will print in hex form still 
```

所以你必须这样做

```
std::cout<<std::dec<<12; 
```

以十进制形式打印。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T03:54:40.303

尝试`std::cout << std::showbase << std::hex;`在代码中的某个位置找到这样的行，该行设置`std::cout`为以十六进制打印输出，并带有`0x`基本指示符前缀。要将其重置为显示小数`std::cout<<std::dec`，请在当前 cout 之前添加此行。

[您可以在此处](http://www.cplusplus.com/reference/ios/)了解有关 c++ io 操纵器标志的更多信息

# css - 如何覆盖 Zurb Foundation Framework 中的设置。即 $topbar-bg .Sass

> ID：15892878
> 
> 赞同：1
> 
> 时间：2013-04-09T03:40:42.783
> 
> 标签：css, asp.net-mvc-4, visual-studio-2012, sass, zurb-foundation

我正在尝试为顶部栏设置与默认黑色不同的颜色，并且我发现可以设置一个变量来进行此更改，但我正在做的方式显然没有任何区别。我正在使用带有 nuget 包的 Visual Studio，并且我还安装了 Compass 来处理 SASS。Site.sass，我想这将是在@imports 之后立即执行此操作的理想场所，我尝试通过执行以下操作来设置变量

```
$topbar-bg: rgb(94, 136, 203); 
```

但是当我运行这个网站时，我发现没有什么不同。这是这样做的正确方法吗？有没有人有什么建议？我是否应该继续更改源（这似乎不对）？

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:35:36.533

Compass 文档建议您在导入扩展之前设置配置变量：

[http://compass-style.org/help/tutorials/configurable-variables/](http://compass-style.org/help/tutorials/configurable-variables/)

# ruby-on-rails - 安装 Ruby 时出错

> ID：15892879
> 
> 赞同：1
> 
> 时间：2013-04-09T03:40:57.570
> 
> 标签：ruby-on-rails, ruby, rvm

我已经使用[了这个](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)程序。我正在使用 Linux Mint。

安装时出现以下错误。

```
E: Unable to locate package libreadline6-dev
E: Unable to locate package libyaml-dev
E: Unable to locate package libgdbm-dev
E: Package 'ncurses-dev' has no installation candidate
E: Package 'bison' has no installation candidate
E: Package 'subversion' has no installation candidate
E: Package 'libffi-dev' has no installation candidate 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T07:12:05.157

该说明是旧的，遵循[rvm 安装说明](https://rvm.io/rvm/install)：

```
\curl -#L https://get.rvm.io | bash -s stable --autolibs=4 --ruby 
```

它会：

1.  下载并安装 RVM
2.  启用自动需求安装
3.  安装 ruby​​，包括所有必需的依赖项

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T04:04:45.173

我想你没有安装`rvm requirements`.
安装要求，如，， `libreadline6-dev`等。 我认为这将解决问题。`libyaml-dev``libgdbm-dev`

使用命令安装所有这些

```
sudo apt-get install build-essential openssl libreadline6 libreadline6-dev \
curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 \
libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison  \
subversion pkg-config 
```

或者，只需参考[此](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:19:02.230

如果您使用的是 ubuntu，请复制并粘贴[https://github.com/vaneyckt/Ruby-on-Rails-installation-script/blob/master/install.sh](https://github.com/vaneyckt/Ruby-on-Rails-installation-script/blob/master/install.sh)。您可能需要在某些时候按 Enter。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T04:40:40.027

您使用哪个操作系统？
如果您使用 Ubuntu，请使用以下链接：http:
[//blog.sudobits.com/2012/05/02/how-to-install-ruby-on-rails-in-ubuntu-12-04-lts/](http://blog.sudobits.com/2012/05/02/how-to-install-ruby-on-rails-in-ubuntu-12-04-lts/)

如果您使用的是 Windows
，那么在安装某些 gem 依赖项时会出现问题。'libffi-dev'，少铁路

比使用其他非常适合“Ruby on Rails”的操作系统，如 Linux/Ubuntu

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-02T16:00:26.007

这对我有用。

警告：以下软件包无法通过身份验证！

```
 apt-get clean            # Remove cached packages
    cd /var/lib/apt 
    mv lists lists.old       # Backup mirror info
    mkdir -p lists/partial   # Recreate directory structure
    apt-get clean
    apt-get update           # Fetch mirror info 
```

# ios - 刷新视图控制器？

> ID：15892881
> 
> 赞同：0
> 
> 时间：2013-04-09T03:40:57.947
> 
> 标签：ios, xcode, uiviewcontroller, refresh, uilabel

我的故事板项目中有两个视图控制器。一旦我单击 ViewcontrollerOne 中的 tableview 行，它将通过将 value 和 settext 传递给 viewcontrollerTwo 中的标签来显示该行的内容。但是当我尝试第三个视图控制器并单击按钮时，第三个视图控制器正在发送具有不同值的相同数组名，但它没有显示在 viewcontrollerTwo 的标签中。

为什么？如何在 viewdidload 或移动到 viewcontrollerTwo 时刷新视图控制器？

目前，我将此代码添加到 viewcontrollerTwo 的`viewDidLoad:`方法中。

```
[self.view setNeedsDisplay] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T10:50:54.747

你总是可以使用 NSNotificationCenter 来更新你的父视图控制器

在你的父视图控制器上放这个：

```
//since child view controller calls turnItOff, notification center calls function "turnButtonCountinuesOff"
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(turnButtonCountinuesOff) name:@"turnItOff" object:nil]; 
```

turnButtonCountinesOff 是您在父视图控制器中的功能

在你的孩子 viewcontroller 放这个：

```
//connect to parent UI view controller calls notification turnItOff.
[[NSNotificationCenter defaultCenter] postNotificationName:@"turnItOff" object:nil]; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:30:17.387

您可以通过将其放入您的`applicationDidBecomeActive`

```
[yourcontroller reloadInputViews]; 
```

但是，当您使用相同的 tableview 时，为什么不重新加载您的 tableview。

# objective-c - performSelector 是立即执行还是计划执行？

> ID：15892885
> 
> 赞同：1
> 
> 时间：2013-04-09T03:41:07.977
> 
> 标签：objective-c

performSelector 是立即执行还是计划稍后执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:44:36.807

从[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector:)

> 该`performSelector:`方法相当于直接向接收者发送一个 aSelector 消息。

所以它立即执行。

同样来自文档，这两条消息是等效的

```
id myClone = [anObject copy];
id myClone = [anObject performSelector:@selector(copy)]; 
```

并且它们实际上都将最终编译成

```
objc_msgSend(anObject, @selector(copy)); 
```

**编辑**

在根据 Anoop 的回答进行讨论之后，我认为值得指出的是，并非所有的变体都会`performSelector:`立即执行。有一堆由它定义的变体`NSObject`将导致动作被安排。此外，重要的是要注意，即使在 0 延迟的情况下也是如此，正如[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)中明确指出的那样：

> 指定延迟为 0**不一定会导致选择器立即执行**。选择器仍在线程的运行循环中排队并尽快执行。

总结一下，这是一个相关的变体列表

### 立即执行的变体：

*   `performSelector:`
*   `performSelector:withObject:`
*   `performSelector:withObject:withObject:`

### 计划执行的变体（即使延迟为 0）

*   `performSelector:withObject:afterDelay:`
*   `performSelector:withObject:afterDelay:inModes:`
*   `performSelectorOnMainThread:withObject:waitUntilDone:`
*   `performSelectorOnMainThread:withObject:waitUntilDone:modes:`
*   `performSelector:onThread:withObject:waitUntilDone:`
*   `performSelector:onThread:withObject:waitUntilDone:modes:`
*   `performSelectorInBackground:withObject:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:44:36.177

`performSelector:`，`performSelector:withObject:`并`performSelector:withObject:withObject:`立即执行。

你可以在这里找到文档[。](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isKindOfClass%3a)

# networking - 使用路由器在本地运行tomcat时通过计算机IP地址打开网站？

> ID：15892892
> 
> 赞同：0
> 
> 时间：2013-04-09T03:41:57.400
> 
> 标签：networking, router, portforwarding

我正在为朋友开发一个网站，使用 Eclipse/Tomcat 进行开发。我在本地运行它并尝试通过我的互联网端口 IP 地址打开它，但我无法让它工作。我运行它的计算机已连接到路由器，因此它在 192.168.1.4 之外运行，并且`http://192.168.1.4:8080/Mobile_Site/index.jsp`可以正常工作。但是，当我尝试通过我的互联网端口 IP 打开它时`http://67.xxx.244.xx:8080/Mobile_Site/index.jsp`，即使在我的本地网络之外，它也无法从任何设备上找到它。当连接到路由器时，有没有办法在本地运行时发送链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:18:50.390

您必须配置路由器端口转发（或取决于路由器的虚拟服务器）以将 TCP 连接从 转发`67.xxx.244.xx:NNNN`到`192.168.1.4:8080`.

然后你把`67.xxx.244.xx:NNNN`地址给你的朋友。

注意：`NNNN`在你的路由器上不需要`8080`，只要端口转发设置正确即可。

# ajax - 通过ajax加载内容后jquery选项卡未触发

> ID：15892896
> 
> 赞同：0
> 
> 时间：2013-04-09T03:42:42.533
> 
> 标签：ajax, jquery, jquery-tabs

我有一个索引页面，其中包含 jquery.js 和 jquery.tabs.js。此页面通过 ajax 将内容加载到 . 内容是一组选项卡，它们的内容，在加载内容的底部，我调用了 tabs()。在 FF 中，它仅在我刷新索引页面后加载内容时才有效，如果我点击链接重新加载内容，它就会停止工作。在 IE 中它根本不起作用。

这些是我的标签：

```
<ul id="horz-tabs">
 <li><a href="#tab1">tab1</a></li>
 <li><a href="#tab2">tab2</a></li>
 <li><a href="#tab3">tab3</a></li>
</ul> 
```

然后我有以下容器，并且在通过 ajax 加载的页面的最后我有：

```
<script type="text/javascript"><!--
 $('#horz-tabs a').tabs(); 
//--></script> 
```

我的 ajax 函数正确加载页面。我想知道如何解决这个问题。感谢您的任何帮助或建议。

ajax加载函数如下

```
<script>

    function async(target, href) {          
    var loading = '<div class="loading">Loading</div>';  
      jQuery.ajax({
        url: href,
        beforeSend: function() {
            $(target).prepend(loading);
        },
        error: function() {
            $(target).html("<span class='error'>Failed</span>");
        },

        success: function(results) {
            $(target).html(results);
        }
    })
}

</script 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:01:57.930

看起来您正在通过 ajax 加载选项卡 html，这可能是问题所在，因为当您的脚本运行时，选项卡元素的 dom 可能不存在。

所以你需要对异步加载方法有一个成功回调，并`$('#horz-tabs a').tabs();`在加载成功回调中添加执行。

```
function async(target, href) {
    var loading = '<div class="loading">Loading</div>';
    return jQuery.ajax({
        url : href,
        beforeSend : function() {
            $(target).prepend(loading);
        },
        error : function() {
            $(target).html("<span class='error'>Failed</span>");
        },

        success : function(results) {
            $(target).html(results);
        }
    });
} 
```

然后

```
async('some-div', 'tab-url').done(function(){
    $('#horz-tabs a').tabs(); 
}) 
```

# python - Python 字典和 CSV 值 | 检查 CSV

> ID：15892904
> 
> 赞同：0
> 
> 时间：2013-04-09T03:43:29.810
> 
> 标签：python, csv

该`csv`文件工作正常。也是如此，`dictionary`但我似乎无法检查`csv`文件中的值以确保我没有添加重复的条目。我怎样才能检查这个？我试过的代码如下：

```
 def write_csv():
        csvfile = csv.writer(open("address.csv", "a"))
        check = csv.reader(open("address.csv"))
        for item in address2:
            csvfile.writerow([address2[items]['address']['value'],address2[items]['address']['count'],items, datetime.datetime.now()])

    def check_csv():
        check = csv.reader(open("address.csv"))
        csvfile = csv.writer(open("address.csv", "a"))
        for stuff in address2:
            address = address2[str(stuff)]['address']['value']
            for sub in check:
                if sub[0] == address:
                    print "equals"
                    try:
                        address2[stuff]['delete'] = True
                    except:
                        address2[stuff]['delete'] = True
                else:
                    csvfile.writerow([address2[stuff]['address']['value'], address2[stuff]['address']['count'], stuff, datetime.datetime.now()]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:42:44.793

您的 CSV 和 dict 结构有点不稳定 - 我很想知道它是否已设置，或者您是否可以将它们更改为更有用。这是一个基本上可以满足您需求的示例-您必须更改一些内容以适应您的格式。最重要的更改可能不是写入您正在阅读的文件 - 这会导致头痛。

这可以满足您对删除标志的要求 - 是否有外部需求？如果没有，几乎可以肯定有更好的方法（删除坏行，将好行保存在其他地方等 - 取决于你在做什么）。

无论如何，这是一个例子。我首先使用注释块来创建 csv 文件，然后将新地址添加到列表中并运行其余部分。它不是一遍又一遍地遍历文件，而是按地址进行查找字典并存储行号，然后如果在读取 csv 文件时找到它，它会使用它来更新删除标志。您需要取出打印件并取消注释最后一行以实际写入新行。

```
import csv, datetime

addresses = [
    {'address': {'value': '123 road', 'count': 1}, 'delete': False},
    {'address': {'value': '456 road', 'count': 1}, 'delete': False},
    {'address': {'value': '789 road', 'count': 1}, 'delete': False},

    {'address': {'value': '1 new road', 'count': 1}, 'delete': False},
]

now = datetime.datetime.now()

### create the csv
##with open('address.csv', 'wb') as csv_file:
##    writer = csv.writer(csv_file)
##    for row in addresses:
##        writer.writerow([ row['address']['value'], row['address']['count'], now.strftime('%Y-%m-%d %H:%M:%S') ])

# make lookup keys for the dict
address_lookup = {}
for i in range(len(addresses)):
    address_row = addresses[i]
    address_lookup[address_row['address']['value']] = i

# read csv once
with open('address.csv', 'rb') as csv_file:
    reader = csv.reader(csv_file)
    for row in reader:
        print row
        # if address is found in the dict, set delete flag to true
        if row[0] in address_lookup:
            print 'flagging address as old: %s' % row[0]
            addresses[ address_lookup[row[0]] ]['delete'] = True

with open('address.csv', 'ab') as csv_file:
    # go back through addresses and add any that shouldnt be deleted to the csv
    writer = csv.writer(csv_file)
    for address_row in addresses:
        if address_row['delete'] is False:
            print 'adding row: '
            print address_row
            #writer.writerow([  row['address']['value'], row['address']['count'], now.strftime('%Y-%m-%d %H:%M:%S') ]) 
```

# ios - 尝试获取与 iOS 项目集成的当前位置

> ID：15892907
> 
> 赞同：0
> 
> 时间：2013-04-09T03:43:43.737
> 
> 标签：ios, ios6, mapkit

所以我正在尝试将用户的当前位置与我的 iOS 项目集成 - 我正在使用一些第三方代码来构建带有精确点的地图 - 我集成了这些框架：

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import <QuartzCore/QuartzCore.h>
#import <MapKit/MapKit.h> 
```

这是我的精确代码 - 任何帮助将不胜感激：

```
#import "asyMap.h"

@implementation asyMap
@synthesize currentAnnotation,mapAnnotations,map,prompt,mapFromLink,selectedAnnotationId,selectedAnnotationIndex,showOthers,useCustomTitle,customTitle;
/**
 * Class constructor
 */
-(id)init{
    self = [super init];
    if(self){
        useCustomTitle = FALSE;
        mapFromLink = FALSE;
        showOthers = FALSE;
        map = [[asyMapObject alloc] init];
        [map addOnView:self.view];
    }    
    return self;
}

/**
 * Overwrite the set page method in
 * order to show a selected annotation
 * from a link
 */
-(void)setPage:(NSDictionary *)page{
    NSDictionary *metas = [page valueForKey:@"metas"];
    if([metas valueForKey:@"selectedAnnotationPageTitle"] && ![[[metas valueForKey:@"selectedAnnotationPageTitle"] stringValue] isEqualToString:@""] && customTitle == nil){
        useCustomTitle = TRUE;
        NSString *newTitle = [metas valueForKey:@"selectedAnnotationPageTitle"];
        customTitle = [[NSString alloc] initWithString:[[newTitle stringByReplacingOccurrencesOfString:@"+" withString:@" "] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    }
    if(useCustomTitle && customTitle != nil){
        NSMutableDictionary *pageWithCustomTitle = [[NSMutableDictionary alloc] initWithDictionary:page];
        [pageWithCustomTitle setValue:customTitle forKey:@"title"];
        [super
         setPage:pageWithCustomTitle];
    }else{
        [super setPage:page];
    }
    if([metas valueForKey:@"annotationFromLink"] && [[[metas valueForKey:@"annotationFromLink"] stringValue] isEqualToString:@"yes"] && selectedAnnotationId == nil){
        selectedAnnotationId = [[NSString alloc] initWithString:[metas valueForKey:@"selectedAnnotation"]];
        mapFromLink = TRUE;
        showOthers = [[[metas valueForKey:@"showOthers"] stringValue] isEqualToString:@"yes"];
    }else if(mapFromLink && selectedAnnotationId != nil){
        mapFromLink = FALSE;
        NSArray *annotations = [page valueForKey:@"annotations"];
        for(int a = 0; a < [annotations count]; a++){
            NSDictionary *annotation = [annotations objectAtIndex:a];
            if([[[annotation valueForKey:@"annotationId"] stringValue] isEqualToString:selectedAnnotationId]){
                mapFromLink = TRUE;
                selectedAnnotationIndex = a;
                break;
            }
        }
    }
}
/**
 * Set the module's name
 */
-(void)makeProcess{
    [self setModuleName:@"map"];
}
/**
 * Create the basic prompt alert
 */
-(void)buildModule{
    prompt = [[UIAlertView alloc] initWithTitle:@"" message:[theme asy__:@"Open on the Maps app?"] delegate:self cancelButtonTitle:[theme asy__:@"No"] otherButtonTitles:[theme asy__:@"Yes"], nil];
}
/**
 * Set the annotations after get the page data
 */
-(void)requestedPage:(NSDictionary *)pageInformation{
    [self setPage:pageInformation];
    if(mapFromLink && !showOthers && [[self getPageMapAnnotations] count] > 0){
        NSArray *pageAnnotations = [self getPageMapAnnotations];
        mapAnnotations = [[NSArray alloc] initWithObjects:[pageAnnotations objectAtIndex:selectedAnnotationIndex],nil];
    }else{
        mapAnnotations = [[NSArray alloc] initWithArray:[self getPageMapAnnotations]];
    }
    [map setMapAnnotations:mapAnnotations andDelegate:self];
    if(mapFromLink){
        [map focusMapOnAnnotationAtIndex:(showOthers ? selectedAnnotationIndex : 0)];
    }
    [map build];
    [self hideLoading];
    [self checkPageOptionButton];
}
/**
 * The module orientation did change
 */
-(void)moduleOrientationDidChange{
    [map setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
}

#pragma mark - Map Delegate
/**
 * Check if the annotation has properties for action or the prompt to be opened
 * on the Maps app should appear
 */
-(void)asyMapObject:(asyMapObject *)mapObject didSelectAnnotation:(NSDictionary *)annotation atIndex:(NSInteger)index{
    currentAnnotation = index;
    if([[annotation valueForKey:@"menuId"] isEqualToString:@"0"] &&
       [[annotation valueForKey:@"pageId"] isEqualToString:@"0"] &&
       [[annotation valueForKey:@"link"] isEqualToString:@""] &&
       [[annotation valueForKey:@"url"] isEqualToString:@""] &&
       [[annotation valueForKey:@"phpfile"] isEqualToString:@""]){
        [prompt setTitle:[annotation valueForKey:@"title"]];
        [prompt show];
    }else{
        AppsifymeCore *core = [AppsifymeCore sharedAppsifymeCore];
        [core basicHandlerForMultiActionsOption:annotation];
    }
}

#pragma mark - Alert view delegate
/**
 * Detect if the user wants to open the annotation on the maps app, and if its
 * true, this method build the link and open the app
 */
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if(buttonIndex != 1) return;
    AppsifymeCore *core = [AppsifymeCore sharedAppsifymeCore];
    NSDictionary *annotation = [mapAnnotations objectAtIndex:currentAnnotation];
    float latitude = [[annotation valueForKey:@"latitude"] floatValue];
    float longitude = [[annotation valueForKey:@"longitude"] floatValue];
    if(![core asyiOS6]){
        NSString *pinName = [[NSString alloc] initWithString:[core encodeURLParameter:[annotation valueForKey:@"title"]]];
        int zoom = 13;
        NSString *stringURL = [[NSString alloc] initWithFormat:@"http://maps.apple.com/maps?q=%@@%1.6f,%1.6f&z=%d", pinName, latitude, longitude, zoom];
        NSURL *url = [[NSURL alloc] initWithString:stringURL];
        [[UIApplication sharedApplication] openURL:url];
    }else{
        Class itemClass = [MKMapItem class];
        if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
            CLLocationCoordinate2D coordinate = CLLocationCoordinate2DMake(latitude,longitude);
            MKPlacemark *placeMark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
            MKMapItem *item =  [[MKMapItem alloc] initWithPlacemark:placeMark];
            item.name = [[annotation valueForKey:@"title"] stringValue];
            [item openInMapsWithLaunchOptions:nil];
        }
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:54:42.663

在您的`init`方法中，添加此行

```
 self.showsUserLocation = YES; 
```

# android - 如何使用代码在 android 中设置墙纸？

> ID：15892909
> 
> 赞同：4
> 
> 时间：2013-04-09T03:43:58.097
> 
> 标签：android

我正在开发一个应用程序，该应用程序显示来自服务器的不同照片，用户可以将选定的照片设置为其设备的壁纸，我使用给定的代码来设置它工作的壁纸，但图像设置不正确，它不适合屏幕。我使用了这段代码。

```
 String dirPath = getFilesDir().toString();

        String folder = mPhotos.get(nextPosition - 1).getCategory();
        String filePath = dirPath + "/PhotoViewer/" + folder + "/"
                + mPhotos.get(nextPosition - 1).getFileName();
        File imageFile = new File(filePath);
        Bitmap bitmap = BitmapFactory.decodeFile(imageFile
                .getAbsolutePath());
        WallpaperManager myWallpaperManager = WallpaperManager
                .getInstance(getApplicationContext());
        try {
            myWallpaperManager.setBitmap(bitmap);
            Toast.makeText(PhotoActivity.this, "Wallpaper set",
                    Toast.LENGTH_SHORT).show();
        } catch (IOException e) {
            Toast.makeText(PhotoActivity.this, "Error setting wallpaper",
                    Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-09T03:51:40.070

要在 android 中设置壁纸，请使用以下代码：通过使用 WallpaperManager 类

```
Button buttonSetWallpaper = (Button)findViewById(R.id.set);
ImageView imagePreview = (ImageView)findViewById(R.id.preview);
imagePreview.setImageResource(R.drawable.five);

buttonSetWallpaper.setOnClickListener(new Button.OnClickListener() {
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        WallpaperManager myWallpaperManager 
        = WallpaperManager.getInstance(getApplicationContext());
        try {
            myWallpaperManager.setResource(R.drawable.five);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}); 
```

需要在**Manifest 中设置权限：**

```
<uses-permission android:name="android.permission.SET_WALLPAPER"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T03:49:54.260

您可以尝试像这样调整位图的大小

```
 DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 1; // best wallpaper width is twice screen width

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, width, height);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(path, options);

    WallpaperManager wm = WallpaperManager.getInstance(this);
    try {
        wm.setBitmap(decodedSampleBitmap);
    } catch (IOException e) {
        Log.e(TAG, "Cannot set image as wallpaper", e);
    } 
```

您的 calculateInSampleSize 类可以是这样的

```
public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {

        // Calculate ratios of height and width to requested height and width
        final int heightRatio = Math.round((float) height / (float) reqHeight);
        final int widthRatio = Math.round((float) width / (float) reqWidth);

        // Choose the smallest ratio as inSampleSize value, this will guarantee
        // a final image with both dimensions larger than or equal to the
        // requested height and width.
        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    return inSampleSize;
} 
```

请参阅[此](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)链接以获取更多说明

# sitecore - Sitecore ECM 参与计划“消息已打开”状态下的自定义操作

> ID：15892920
> 
> 赞同：2
> 
> 时间：2013-04-09T03:44:45.757
> 
> 标签：sitecore, sitecore6, sitecore-dms, sitecore-ecm

`Message Opened`当访问者处于 Sitecore ECM 标准参与计划状态时，我需要更新一些有关访问者的信息。

因此，我需要创建一个自定义操作或其他东西，我可以在其中推送我的自定义代码来进行访问者数据操作。

我尝试通过创建脚本并将其附加到触发器并最终将触发器附加到状态来做到这一点。但不幸的是没有运气。

这项任务甚至是可能的还是我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:53:36.637

禁止`Message Opened`改变状态。它是一种系统 ECM 状态。您只能自定义**绿色**区域的状态（生产、非生产等）。

但是，有一种方法可以做你想做的事。邮件打开的时刻是在邮件底部添加的小图像的帮助下处理的。图像源是一个 ASPX 页面。当收件人下载邮件图像时，会请求 ASPX 页面。您可以自定义图像请求的 ASPX 页面（在此处添加您的代码）。

# c++ - C++字典树实现

> ID：15892922
> 
> 赞同：2
> 
> 时间：2013-04-09T03:44:49.820
> 
> 标签：c++, dictionary, trie

我的`insert`函数出现段错误：

```
current->isWord = true; 
```

一切编译正常，没有警告或错误 ( `g++ -Wall -Wextra`)。我的`main`函数只调用`insert`一次函数，它不会工作。这是我的代码；它是我`.h`和`.cpp`文件之间的混合体：

```
const int alphabetSize = 26;

struct Node
{
    bool isWord;
    Node* child[alphabetSize];
};

Dictionary::Dictionary()
{
    initNode(head); //Node* head; is defined in my .h file under private:
}

bool Dictionary::isPrefix(string s)
{
    Node* current = endOfString(s, false);
    if (current == NULL)
    {
        return false;
    }
    else
    {
        return true;
    }
}

bool Dictionary::isWord(string s)
{
    Node* current = endOfString(s, false);
    if (current == NULL)
    {
        return false;
    }
    else
    {
        return current->isWord;
    }
}

void Dictionary::insert(string s)
{
    Node* current = endOfString(s, true);
    current->isWord = true; //segfault here
}

//initializes a new Node
void Dictionary::initNode(Node* current)
{
    current = new Node;
    current->isWord = false;
    for (int i = 0; i < alphabetSize; i++)
    {
       current->child[i] = NULL;
    }
}

//returns a pointer to the Node of the last character in the string
//isInsert tells it whether it needs to initialize new Nodes
Node* Dictionary::endOfString(string s, bool isInsert)
{
    Node* current = head;
    Node* next = head;
    for (unsigned int i = 0; i < s.length(); i++)
    {
        if (isalpha(s[i]) == true)
        {
            int letter = (tolower(s[i]) - 'a');
            next = current->child[letter];
            if (next == NULL)
            {
                if (isInsert == false)
                {
                    return NULL;
                }

                initNode(next);
                current->child[letter] = next;
            }
            current = current->child[letter];
        }
    }

    return current;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:55:20.943

`initNode`创建一个新的`Node`并对其进行初始化，但随后将其丢弃。因为`current`是按值传递的，所以在函数内部修改时，更改不会传播到`initNode`. 直接的解决方法是让它通过引用传递：

```
void Dictionary::initNode(Node*& current) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:55:02.447

问题在这里：

```
//initializes a new Node
void Dictionary::initNode(Node* current)
{
    current = new Node;
    current->isWord = false;
    for (int i = 0; i < alphabetSize; i++)
    {
       current->child[i] = NULL;
    }
} 
```

`current`是按值传入的，因此当您更改`current`方法时，您正在更改传入内容的副本，而不是外部变量。尝试传入`Node** current`一个指向您的指针的指针，以便您可以编辑原始变量。你会这样称呼它；`initNode(&next);`并且在该方法中，您将取消引用 current 以便能够编辑原始变量。

# jsf - JSF 表格分页

> ID：15892924
> 
> 赞同：1
> 
> 时间：2013-04-09T03:44:53.627
> 
> 标签：jsf, datatable, pagination, myfaces, tomahawk

我是 JSF 的新手。目前我有保持数据表列表分页状态的问题。

问题是当用户编辑列表中不在数据表第一页中的一行时，完成他的操作后，页面导航返回到列表的第一个初始页面，而我们需要返回到上一个页面用户一直在编辑。

一个完整的场景：

*   列表页有100行记录，每页显示20行，
*   用户导航到第 3 页，并选择其中一行以编辑记录。
*   支持 ListBean 调用将页面导航到编辑页面的 EditBean。
*   用户更新记录信息并支持Editbean 回调ListBean。
*   ListBean 刷新数据模型并导航回列表页面，但用户最初编辑的分页状态丢失了。

将页面返回到用户一直在编辑的上一个页面的最佳方法是什么？

项目中使用了 Myface 1.2.7 和 Tomahawk taglib 1.0。页面由 t:dataTable 组成。

谢谢。

# c++ - 为什么 cstdio undef 获取或其他功能

> ID：15892925
> 
> 赞同：1
> 
> 时间：2013-04-09T03:44:54.787
> 
> 标签：c++, c

当我阅读[libstdc++-v3/include/c/cstdio](https://github.com/mirrors/gcc/blob/master/libstdc%2B%2B-v3/include/c/cstdio)时，我对以下几行感到非常困惑：

```
//Get rid of those macros defined in <stdio.h> in lieu of real functions.
#undef getc
#undef gets 
```

我认为这`getc`是一个宏但`gets`实际上是一个函数，为什么 undef 一个函数？可能在某些系统中它都是在宏中实现的？

* * *

**更新：** 我试着把我的理解`<stdio.h>`和`<cstdio> here`

```
<stdio.h>=
__BEGIN_NAMESPACE_STD
extern int fgetc (FILE *__stream);
extern int getc (FILE *__stream);
__END_NAMESPACE_STD
#define getc(_fp) _IO_getc (_fp)

<cstdio>=
#undef getc 
```

*   宏可能有一些副作用导致我们不使用，但我不能为上面的 getc(_fp) 提出这样的场合。
*   为了安全起见，也许我们可以手动`fgetc`调用`getc`或取消宏`getc`。
*   `getc`是 的弱别名`IO_getc`，当宏`getc`不生效时，函数的别名将起作用（例如，在 C++ 中隐式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:20:04.083

该注释清楚地暗示 in `<stdio.h>`、 both`getc`和`gets` ~~are~~可以是（类似函数的）宏。C 标准当然允许这样做。无论出于何种原因， C++~~编译器~~库代码都不希望将宏暴露给 C++ 程序；它希望确保调用函数。

# ios - 如何将设备添加到我的配置文件？

> ID：15892927
> 
> 赞同：7
> 
> 时间：2013-04-09T03:45:07.127
> 
> 标签：ios, provisioning, adhoc

看起来 Apple 的配置页面在我身上发生了变化。我不再在我的分发配置文件下看到“添加设备”按钮。我瞎了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T04:32:46.630

我玩过新界面，发现速度很慢，但非常有条理。检查下面的图片以满足您的要求。

![在此处输入图像描述](https://i.stack.imgur.com/Ht8YH.png)

![在此处输入图像描述](https://i.stack.imgur.com/pgve4.png)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-22T16:37:43.690

我可以使用添加的设备创建**开发配置，但不能用于****分发**配置文件。

1.  我在 IOS 开发中心创建了一个没有设备的分发配置文件。
2.  下载它并将其拖到 iTunes 库中，并将我的设备连接到我的计算机。
3.  并在我的设备的 iTunes 中单击同步。

我的设备被添加到配置文件中。

# c++ - C++ 入门练习

> ID：15892928
> 
> 赞同：0
> 
> 时间：2013-04-09T03:45:18.883
> 
> 标签：c++

我刚开始学习 C++，在 C++ Primer 中遇到了 2 个练习。1 这个练习我看不懂。

**练习 2.22 C++ Primer**
假设`p`是一个指向 的指针`int`，解释以下代码：

```
if (p) //....  
if (*p) //.... 
```

正如我在 1 语句中所理解的，我们检查指针 p 的条件是它`true`还是`false`
在 2 语句中，所有操作都是相同的，除了这次我们使用取消引用运算符
如果我错了，你能告诉我我的错误在哪里。

还有下一个练习，这个练习我看不懂
**练习2.23**
给定一个指针`p`，你能确定是否`p`指向一个有效的对象吗？如果是这样，怎么做？如果不是，为什么不呢？

我知道的是，当您的变量初始化并具有与指针相同的类型时，您可能知道您的指针指向有效对象。并且尝试访问无效指针也会带来代码问题，并且编译器 ant 会发现这个问题。
这个练习还有什么可以补充的吗？还是我的猜测错了？
感谢您的时间 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:47:59.783

假设

```
int *p = NULL; 
```

然后：

```
if (p) 
```

检查 p 是否为 NULL 并将返回 false。

```
if (*p) 
```

检查`(*p) == 0`，即所指向的整数是否`p`为0。

如果你有

```
int *p; 
```

即，不初始化它，然后`p`将指向你内存中的随机地址，并且

```
if (p) 
```

大多数时候会返回true。和

```
if (*p) 
```

将给出未定义的行为。

# uitableview - 提高分组 UITableView 的性能

> ID：15892932
> 
> 赞同：0
> 
> 时间：2013-04-09T03:45:41.253
> 
> 标签：uitableview

我遇到分组 UITableView 的加载时间很长。我阅读了有关该主题的其他一些帖子，但找不到任何可以提高性能的东西。我正在寻找有人指出我重新设计代码的正确方向。

有8个部分和32个单元格。这些单元属于五个不同的自定义 UITableView Cell 子类之一。子类包含子视图并使用 IB 放在一起。

TableView 数据是从一个 plist 生成的，该 plist 还包含有关单元格类型、标签和要由 UINavigationController 推送的 View Controller Link 的信息。xml 文件的示例如下所示。复杂的 pList 可能是问题的一部分吗？

```
<dict>
        <key>Header</key>
        <string>Property Information</string>
        <key>Data</key>
        <array>
            <dict>
                <key>TableView</key>
                <string>informationTable</string>
                <key>Link</key>
                <string>ROIPropertyInfoUIViewController</string>
                <key>Entity</key>
                <string></string>
                <key>Image Name</key>
                <string>runtime</string>
                <key>Cell Type</key>
                <string>ROIUITableViewCellType3</string>
                <key>Label</key>
                <string>runtime</string>
            </dict>
        </array>
    </dict> 
```

另一个潜在的问题是一个非常长的`cellForRowAtIndexPath`方法，它根据 plist 文件中写入的内容来决定加载哪个类的 UITableViewCell。这可能是一个促成因素吗？

下面是解析代码：

```
-(void)setPlistFilename:(NSString *)pList forTableView:(UITableView *)tableView

if (tableView==mainTableView) {
        NSString *path = [[NSBundle mainBundle] pathForResource:pList ofType:@"plist"];
        self.mainTableDataArray = [[NSArray alloc ] initWithContentsOfFile:path];
        NSLog(@"count of mainTableArray is %d", mainTableDataArray.count);
} 
```

[tableView setDataSource:self]; [tableView setDelegate:self];

```
[tableView setSectionFooterHeight:0];
[tableView setSectionHeaderHeight:0]; 
```

}

这是我`cellForRowAtIndexPath`方法的一部分：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    NSMutableArray *tmpDataSet = [[NSMutableArray alloc]init];

    if (tableView==self.mainTableView) {
        int section = [indexPath section];
        tmpDataSet = [[self.mainTableDataArray objectAtIndex:section] valueForKey:@"Data"];
    }

         //**Figure out the cell type
    NSString *cellTypeString = [[tmpDataSet objectAtIndex:[indexPath row]] valueForKey:@"Cell Type"];
    NSLog(@"cell type string is %@", cellTypeString);
//***Create the different types of cells depending on what is listed in the pList***
    if ([cellTypeString isEqualToString:@"ROIUITableViewCellType1"]) {
        ROIUITableViewCellType1 *c = [tableView dequeueReusableCellWithIdentifier:cellTypeString];

        if(!c)
        {
            c = [[ROIUITableViewCellType1 alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellTypeString];

        }
      //  mainTableViewHeight += [ROIUITableViewCellType1 retrunCellHeight];
        NSLog(@"mainTableViewHeight = %f", self.mainTableViewHeight);

        return [self setCellContentFromDataArray:tmpDataSet forCell:c forIndexNumer:[indexPath row]]; 
```

该表仅包含一个图像，不从网络加载任何数据。我想要一些关于我应该花时间修复什么的建议。

# php - 通过 AJAX jquery 更改表格背景颜色？（问）

> ID：15892933
> 
> 赞同：-1
> 
> 时间：2013-04-09T03:45:45.713
> 
> 标签：php, javascript, ajax, jquery

在我问这个问题之前 [通过 AJAX jquery 更改表格背景颜色？](https://stackoverflow.com/questions/15831040/changing-table-background-color-through-ajax-jquery)

我可以改变背景颜色。**但我的镜子**还有另一个问题

 **```
<input id="cek" name="cek" type="text" /> 
```

总是只有 0 的值。所以背景颜色不能总是变绿。

我的逻辑正确吗？这个问题的最佳方法是什么？请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:28:24.643

你也可以这样做：

```
$("#cek").css("background-color", "red"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:49:28.143

```
$('#cek').attr('background', {your color}); 
```**

# ruby-on-rails - 应用程序错误（heroku 中的应用程序崩溃）

> ID：15892938
> 
> 赞同：0
> 
> 时间：2013-04-09T03:46:03.777
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

我刚刚将我的代码的更新版本部署到 heroku 中，但我收到了这个错误。它在本地运行良好，所以我认为它是安全的。有谁知道出了什么问题？在新 gem 方面，我安装了 twitter 和 oauth gem。我刚刚摆脱了它们，但仍然遇到相同的应用程序崩溃。

这是heroku日志

```
C:\Users\app5>heroku restart
Restarting processes... done

    C:\Users\app5>heroku logs
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initialize
rs'
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2013-04-09T03:34:10.421854+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
2013-04-09T03:34:10.421854+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module
:Finisher>'
2013-04-09T03:34:10.421854+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/config/environment.rb:
7:in `<top (required)>'
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in
require'
2013-04-09T03:34:10.422084+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_depe
ndency'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/config.ru:3:in `block
in <main>'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/config.ru:in `new'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/config.ru:in `<main>'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-04-09T03:34:10.422320+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2013-04-09T03:34:10.422542+00:00 app[web.1]:    from script/rails:6:in `require'

2013-04-09T03:34:10.422542+00:00 app[web.1]:    from script/rails:6:in `<main>'
2013-04-09T03:34:11.642431+00:00 heroku[web.1]: Process exited with status 1
2013-04-09T03:34:11.659334+00:00 heroku[web.1]: State changed from starting to c
rashed
2013-04-09T03:34:12.186269+00:00 app[web.2]:         SECURITY WARNING: No secret
 option provided to Rack::Session::Cookie.
2013-04-09T03:34:12.186269+00:00 app[web.2]:         provide a secret to prevent
 exploits that may be possible from crafted
2013-04-09T03:34:12.186269+00:00 app[web.2]:         cookies. This will not be s
upported in future versions of Rack, and
2013-04-09T03:34:12.186269+00:00 app[web.2]:         This poses a security threa
t. It is strongly recommended that you
2013-04-09T03:34:12.186269+00:00 app[web.2]:         future versions will even i
nvalidate your existing user cookies.
2013-04-09T03:34:12.186269+00:00 app[web.2]:         Called from: /app/vendor/bu
ndle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/session/abs
tract_store.rb:28:in `initialize'.
2013-04-09T03:34:12.186269+00:00 app[web.2]:
2013-04-09T03:34:12.186269+00:00 app[web.2]:
2013-04-09T03:34:16.249332+00:00 app[web.2]: => Booting WEBrick
2013-04-09T03:34:16.249332+00:00 app[web.2]: => Rails 3.2.3 application starting
 in production on http://0.0.0.0:24777
2013-04-09T03:34:16.249516+00:00 app[web.2]: Exiting
2013-04-09T03:34:16.249948+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in
require'
2013-04-09T03:34:16.250053+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_depe
ndency'
2013-04-09T03:34:16.249332+00:00 app[web.2]: => Ctrl-C to shutdown server
2013-04-09T03:34:16.249766+00:00 app[web.2]: /app/app/controllers/comments_contr
oller.rb:1:in `<top (required)>': superclass mismatch for class CommentsControll
er (TypeError)
2013-04-09T03:34:16.250225+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_o
r_load'
2013-04-09T03:34:16.250140+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-04-09T03:34:16.250419+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:313:in `depend_on
'
2013-04-09T03:34:16.249332+00:00 app[web.2]: => Call with -d to detach
2013-04-09T03:34:16.250629+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/engine.rb:439:in `block (2 levels) in eager_loa
d!'
2013-04-09T03:34:16.250717+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `each'
2013-04-09T03:34:16.250804+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `block in eager_load!'
2013-04-09T03:34:16.250889+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `each'
2013-04-09T03:34:16.251036+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
2013-04-09T03:34:16.251210+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
2013-04-09T03:34:16.249861+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-04-09T03:34:16.252214+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
2013-04-09T03:34:16.251418+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initialize
rs'
2013-04-09T03:34:16.251294+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
2013-04-09T03:34:16.253756+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
2013-04-09T03:34:16.254594+00:00 app[web.2]:    from script/rails:6:in `require'

2013-04-09T03:34:16.250509+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:225:in `require_d
ependency'
2013-04-09T03:34:16.252784+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in
require'
2013-04-09T03:34:16.253016+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-04-09T03:34:16.253420+00:00 app[web.2]:    from /app/config.ru:in `new'
2013-04-09T03:34:16.252874+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_depe
ndency'
2013-04-09T03:34:16.253243+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
2013-04-09T03:34:16.252657+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
2013-04-09T03:34:16.253333+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
2013-04-09T03:34:16.254035+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:304:in `wrapped_app'
2013-04-09T03:34:16.253588+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
2013-04-09T03:34:16.254207+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
2013-04-09T03:34:16.254509+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
2013-04-09T03:34:16.252302+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
2013-04-09T03:34:16.252402+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
2013-04-09T03:34:16.251126+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module
:Finisher>'
2013-04-09T03:34:16.253672+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/builder.rb:40:in `parse_file'
2013-04-09T03:34:16.252571+00:00 app[web.2]:    from /app/config/environment.rb:
7:in `<top (required)>'
2013-04-09T03:34:16.252488+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-04-09T03:34:16.253116+00:00 app[web.2]:    from /app/config.ru:3:in `block
in <main>'
2013-04-09T03:34:16.253875+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
2013-04-09T03:34:16.253504+00:00 app[web.2]:    from /app/config.ru:in `<main>'
2013-04-09T03:34:16.254123+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
2013-04-09T03:34:16.254292+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
2013-04-09T03:34:16.254376+00:00 app[web.2]:    from /app/vendor/bundle/ruby/1.9
.1/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
2013-04-09T03:34:16.254842+00:00 app[web.2]:    from script/rails:6:in `<main>'
2013-04-09T03:34:17.704246+00:00 heroku[web.2]: Process exited with status 1
2013-04-09T03:34:17.719603+00:00 heroku[web.2]: State changed from starting to c
rashed
2013-04-09T03:35:06.060820+00:00 heroku[router]: at=error code=H10 desc="App cra
shed" method=GET path=/ host=appname.com fwd="xx.xx.xx.xxx" dyno= connect= service
= status=503 bytes= 
```

Gemfile.lock 文件

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.3)
      actionpack (= 3.2.3)
      mail (~> 2.4.4)
    actionpack (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activeadmin (0.5.1)
      arbre (>= 1.0.1)
      bourbon (>= 1.0.0)
      devise (>= 1.1.2)
      fastercsv
      formtastic (>= 2.0.0)
      inherited_resources (>= 1.3.1)
      jquery-rails (>= 1.0.0)
      kaminari (>= 0.13.0)
      meta_search (>= 0.9.2)
      rails (>= 3.0.0)
      sass (>= 3.1.0)
    activemodel (3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
    activerecord (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
    activesupport (3.2.3)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.2.8)
    arbre (1.0.1)
      activesupport (>= 3.0.0)
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    bcrypt-ruby (3.0.1-x86-mingw32)
    bootstrap-sass (2.1.0.0)
    bootstrap-will_paginate (0.0.5)
      will_paginate
    bourbon (3.1.1)
      sass (>= 3.2.0)
      thor
    builder (3.0.4)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    carrierwave (0.8.0)
      activemodel (>= 3.2.0)
      activesupport (>= 3.2.0)
    childprocess (0.3.9)
      ffi (~> 1.0, >= 1.0.11)
    coderay (1.0.9)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.6.1)
    cucumber (1.2.2)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.11.6)
      multi_json (~> 1.3)
    cucumber-rails (1.2.1)
      capybara (>= 1.1.2)
      cucumber (>= 1.1.3)
      nokogiri (>= 1.5.0)
    database_cleaner (0.7.0)
    devise (2.2.3)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    excon (0.13.4)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (2.3.2)
      activesupport
    factory_girl_rails (1.4.0)
      factory_girl (~> 2.3.0)
      railties (>= 3.0.0)
    faker (1.0.1)
      i18n (~> 0.4)
    fastercsv (1.5.5)
    ffi (1.4.0)
    ffi (1.4.0-x86-mingw32)
    fog (1.3.1)
      builder
      excon (~> 0.13.0)
      formatador (~> 0.2.0)
      mime-types
      multi_json (~> 1.0)
      net-scp (~> 1.0.4)
      net-ssh (>= 2.1.3)
      nokogiri (~> 1.5.0)
      ruby-hmac
    formatador (0.2.4)
    formtastic (2.2.1)
      actionpack (>= 3.0)
    friendly_id (4.0.9)
    gherkin (2.11.6)
      json (>= 1.7.6)
    gherkin (2.11.6-x86-mingw32)
      json (>= 1.7.6)
    growl (1.0.3)
    guard (1.6.2)
      listen (>= 0.6.0)
      lumberjack (>= 1.0.2)
      pry (>= 0.9.10)
      terminal-table (>= 1.4.3)
      thor (>= 0.14.6)
    guard-rspec (0.5.5)
      guard (>= 0.8.4)
    guard-spork (0.3.2)
      guard (>= 0.8.4)
      spork (>= 0.8.4)
    has_scope (0.5.1)
    hike (1.2.1)
    httpclient (2.3.3)
    i18n (0.6.4)
    impressionist (1.2.0)
      httpclient (~> 2.2)
      nokogiri (~> 1.5)
    inherited_resources (1.3.1)
      has_scope (~> 0.5.0)
      responders (~> 0.6)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.7)
    kaminari (0.14.1)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
    launchy (2.1.0)
      addressable (~> 2.2.6)
    listen (0.7.3)
    lumberjack (1.0.2)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    meta_search (1.1.3)
      actionpack (~> 3.1)
      activerecord (~> 3.1)
      activesupport (~> 3.1)
      polyamorous (~> 0.5.0)
    method_source (0.8.1)
    mime-types (1.21)
    mini_magick (3.5.0)
      subexec (~> 0.2.1)
    multi_json (1.6.1)
    net-scp (1.0.4)
      net-ssh (>= 1.99.1)
    net-ssh (2.6.6)
    nokogiri (1.5.6)
    nokogiri (1.5.6-x86-mingw32)
    orm_adapter (0.4.0)
    pg (0.12.2)
    pg (0.12.2-x86-mingw32)
    polyamorous (0.5.0)
      activerecord (~> 3.0)
    polyglot (0.3.3)
    pr_geohash (1.0.0)
    pry (0.9.12)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.4)
    pry (0.9.12-x86-mingw32)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.4)
      win32console (~> 1.3)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.3)
      actionmailer (= 3.2.3)
      actionpack (= 3.2.3)
      activerecord (= 3.2.3)
      activeresource (= 3.2.3)
      activesupport (= 3.2.3)
      bundler (~> 1.0)
      railties (= 3.2.3)
    railties (3.2.3)
      actionpack (= 3.2.3)
      activesupport (= 3.2.3)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (10.0.3)
    rb-fsevent (0.4.3.1)
    rdoc (3.12.2)
      json (~> 1.4)
    responders (0.9.3)
      railties (~> 3.1)
    rinku (1.7.2)
    rsolr (1.0.8)
      builder (>= 2.1.2)
    rspec (2.9.0)
      rspec-core (~> 2.9.0)
      rspec-expectations (~> 2.9.0)
      rspec-mocks (~> 2.9.0)
    rspec-core (2.9.0)
    rspec-expectations (2.9.1)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.9.0)
    rspec-rails (2.9.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.9.0)
    ruby-hmac (0.4.0)
    rubyzip (0.9.9)
    sass (3.2.6)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.31.0)
      childprocess (>= 0.2.5)
      multi_json (~> 1.0)
      rubyzip
      websocket (~> 1.0.4)
    slop (3.4.3)
    spork (0.9.0)
    spork (0.9.0-x86-mingw32)
      win32-process
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.5)
    sqlite3 (1.3.5-x86-mingw32)
    subexec (0.2.2)
    sunspot (2.0.0)
      pr_geohash (~> 1.0)
      rsolr (~> 1.0.7)
    sunspot_rails (2.0.0)
      nokogiri
      sunspot (= 2.0.0)
    sunspot_solr (2.0.0)
    terminal-table (1.4.5)
    thor (0.14.6)
    tilt (1.3.4)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.36)
    uglifier (1.2.3)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    warden (1.2.1)
      rack (>= 1.0)
    websocket (1.0.7)
    will_paginate (3.0.3)
    win32-process (0.7.1)
      ffi (>= 1.0.0)
    win32console (1.3.2-x86-mingw32)
    xpath (0.1.4)
      nokogiri (~> 1.3)

PLATFORMS
  ruby
  x86-mingw32

DEPENDENCIES
  activeadmin
  bcrypt-ruby (= 3.0.1)
  bootstrap-sass (= 2.1)
  bootstrap-will_paginate (= 0.0.5)
  capybara (= 1.1.2)
  carrierwave
  coffee-rails (= 3.2.2)
  cucumber-rails (= 1.2.1)
  database_cleaner (= 0.7.0)
  factory_girl_rails (= 1.4.0)
  faker (= 1.0.1)
  fog (~> 1.3.1)
  friendly_id
  growl (= 1.0.3)
  guard-rspec (= 0.5.5)
  guard-spork (= 0.3.2)
  impressionist
  jquery-rails (= 2.0.2)
  launchy (= 2.1.0)
  meta_search (>= 1.1.0.pre)
  mini_magick
  pg (= 0.12.2)
  rails (= 3.2.3)
  rb-fsevent (= 0.4.3.1)
  rinku (~> 1.7.2)
  rspec-rails (= 2.9.0)
  sass-rails (= 3.2.5)
  simple-private-messages (= 0.0.0)!
  spork (= 0.9.0)
  sqlite3 (= 1.3.5)
  sunspot_rails
  sunspot_solr
  uglifier (= 1.2.3)
  will_paginate (= 3.0.3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:37:37.717

这通常意味着您无意中重新定义了一个类，可能是在您的应用程序的其他地方定义它之后尝试重新打开该类。尝试在您的应用中搜索`class CommentsController`...如果它多次出现并且是有意的，您需要确保所有用法都继承自同一个父类。我认为它应该是`class CommentsController < ApplicationController`......在每次使用中。

# python - 在 Python 中从 0:0:0 到 23:59:59 获取时间列表，然后与日期时间值进行比较

> ID：15892940
> 
> 赞同：0
> 
> 时间：2013-04-09T03:46:16.583
> 
> 标签：python, list, datetime, time

我正在编写代码以生成一整天的时间，间隔为 30 秒。我尝试使用 DT.datetime 和 DT.time 但我总是以 datetime 值或 timedelta 值结束，例如 (0,2970)。有人可以告诉我如何做到这一点。

所以我需要一个包含以下数据的列表：

[00:00:00] [00:00:01] [00:00:02]

直到 [23:59:59] 并且需要将其与日期时间值进行比较，例如 2011 年 6 月 23 日上午 6:38:00。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:10:57.570

关于如何获取 24 小时内秒数的增量值列表，有一个很好的[答案。](https://stackoverflow.com/a/9736260/196068)我重用了其中的一部分。

*   **注 1**。我不确定您是如何考虑`time`与`datetime`. 假设您只是要比较时间部分并提取它。
*   **注 2**。如您的示例所示，该`time.strptime`呼叫需要基于 AM/PM 的 12 小时时间。然后将其结果传递给`time.strftime`返回基于 24 小时的时间。

这就是我认为您正在寻找的内容：

```
my_time = '6/23/2011 6:38:00 AM' # time you defined

from datetime import datetime, timedelta
from time import strftime, strptime

now = datetime(2013, 1, 1, 0, 0, 0)
last = datetime(2013, 1, 1, 23, 59, 59)
delta = timedelta(seconds=1)

times = []
while now <= last:
    times.append(now.strftime('%H:%M:%S'))
    now += delta

twenty_four_hour_based_time = strftime('%H:%M:%S', strptime(my_time, '%m/%d/%Y %I:%M:%S %p'))
twenty_four_hour_based_time in times # returns True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:15:20.747

您是否有理由要使用日期时间而不是仅使用 3 个循环计数？同样，您是想做一些花哨的事情还是只想与时间进行比较？如果您不需要考虑闰秒或类似的东西，只需简单的方法即可。

```
import datetime

now = datetime.datetime.now()

for h in xrange(24):
    for m in xrange(60):
        for s in xrange(60):
           time_string = '%02d:%02d:%02d' % (h,m,s)
           if time_string == now.strftime('%H:%m:%S'):
               print 'you found it! %s' % time_string 
```

你能提供更多关于你为什么这样做的信息吗？似乎解析日期时间或使用 strftime 来获得所需的内容会好得多，而不是循环 60*60*24 次。

# javascript - 自定义 Javascript 不会在 Joomla 中运行

> ID：15892943
> 
> 赞同：0
> 
> 时间：2013-04-09T03:46:22.903
> 
> 标签：javascript, jquery, ajax, joomla, conflict

我正在使用`Joomla-3`我的网站，并且创建了一个简单的小`JavaScript(ajax)`文件，我通过模板配置文件附加了该文件（如模板文档中所示）。

我还在`html`一篇文章中添加了我的（没有`TinyMCE`等，所以我知道它接受我的代码）。该脚本在简单`.html`或`.php`文件中工作正常，但不能与`Joomla`.

我的脚本有 2 个相关的`ajax`下拉菜单（静态内容）。您对可能出现的问题有任何想法吗？

先感谢您！

PS。[你可以在这里](http://jsfiddle.net/fHah6/)找到我的 JavaScript 代码。

这是代码：

```
$(window).load(function () {
  var services = [];

  services['service1'] = [{
      "name": "Giannis",
      "url": "giannis"
    }, {
      "name": "Kostas",
      "url": "kostas"
    }, {
      "name": "Fillipos",
      "url": "fillipos"
    }
  ];
  services['service2'] = [{
      "name": "Maria",
      "url": "maria"
    }, {
      "name": "Peter",
      "url": "peter"
    }, {
      "name": "Jack",
      "url": "jack"
    }
  ];

  services['service3'] = [{
      "name": "Dimitris",
      "url": "dimitris"
    }, {
      "name": "Takis",
      "url": "takis"
    }, {
      "name": "Gianna",
      "url": "gianna"
    }
  ];

  jQuery(document).ready(function () {
    jQuery("#services").change(function () {
      var selectedService = $(this).val();
      $('#doctors').children().remove();
      $('#doctors').append('<option value="Null">Click to select a Doctor</option>');
      jQuery.each(services[selectedService], function (ind, val) {
        $('#doctors').append('<option value="' + this.url + '">' + this.name + '</option>');
      })
    });

    jQuery("#doctors").change(function () {
      var redirServ = $('#services option:selected').val();
      var thePersonObject = services[redirServ];
      var goThere = $(this).val();
      var fullurl = 'http://www.website.com/our-services/' + redirServ + '/item/' + goThere;
      alert(fullurl);
      //location.href = 'http://www.website.com/our-services/' + redirServ + '/item/' + goThere; 
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T10:27:16.600

试过这个？$(window).on('load', function(){ // 真棒 })

# c++ - C/C++：将读取的字符串传递给 C 程序内的循环

> ID：15892944
> 
> 赞同：1
> 
> 时间：2013-04-09T03:46:33.610
> 
> 标签：c++, c

我正在一个程序中工作，该程序应该读取用户输入的字符串并在循环中使用该字符串进行基本计算。我的一般问题是在循环中使用字符串，尽管稍后它必须做更多事情，但从现在开始，我只需要测试输入表达式的 Bolzano 定理（特别是找到可能的根区间）。我已经开始研究一个按字符读取输入字符并使用开关控件计算中缀表达式的函数。但是，我想知道是否有办法做这样的事情：

```
{
    /*Already stored the doubles: a, b, precision.*/
    printf("Enter the expression you want to calculate");
    scanf("%s", expression);
    /*User input: (3*i)+(i*i)-3*/
    while( i <= b ){
       fa = (3*i)+(i*i)-3; /*How to insert the string here*/
       fb = (3*(i+precision))+((i+precision)*(i+precision))-3;
       if( fa*fb < 0 )
          printf("There is at least one root in the interval: [ %g, %g ].", a, a+precision);
       /*And goes on...*/
} 
```

假设用户没有为循环中的使用输入无效的表达式（例如 i^7），或者我已经实现了转换这些表达式的控件（例如读取字符串并将其更改为后缀或前缀表示法）必要的转换），有没有办法在分配中使用存储的字符串进入循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:16:26.873

我想你要问的是：给定一个带有一些数学表达式的字符串，我如何评估该表达式？

我不知道您是否可以对表达式的语法做出某些假设；如果是这样，那将帮助您简化代码。如果没有，您基本上必须首先“标记”您的字符串，因为上面的字符串将是这样的标记序列：

```
LBRACKET, NUM, BINOP, VAR, RBRACKET, BINOP, LBRACKET, VAR, BINOP, VAR, RBRACKET, BINOP, NUM 
```

您还必须自己构建一个小解析器，以确保您的表达式是基于某些句法规则形成的；解析器将使用该标记序列。然后解析器的输出是表示该表达式的数据结构（通常是树）。给定该树，您可以通过自下而上计算子表达式来评估表达式。

```
fa =                       -
                          / \
                         +   3
                        / \
                       *   *
                      / \ / \
                     3  i i  i 
```

只需将新节点添加到该树中即可添加您的精确操作数。

网上有一些关于如何做到这一点的东西。只需搜索“如何构建表达式评估器”，例如[此](http://www.strchr.com/expression_evaluator)页面会提供更多详细信息。

# python - python日志记录模块没有向文件写入任何内容

> ID：15892946
> 
> 赞同：48
> 
> 时间：2013-04-09T03:47:21.157
> 
> 标签：python, file, logging

我正在尝试编写一个将异常记录到控制台和文件的服务器。我从食谱中提取了一些代码。这里是：

```
logger = logging.getLogger('server_logger')
logger.setLevel(logging.DEBUG)
# create file handler which logs even debug messages
fh = logging.FileHandler('server.log')
fh.setLevel(logging.DEBUG)
# create console handler with a higher log level
ch = logging.StreamHandler()
ch.setLevel(logging.ERROR)
# create formatter and add it to the handlers
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', datefmt='%Y-%m-%d %H:%M:%S')
ch.setFormatter(formatter)
fh.setFormatter(formatter)
# add the handlers to logger
logger.addHandler(ch)
logger.addHandler(fh) 
```

此代码完美地记录到控制台，但没有记录到文件中。该文件已创建，但没有写入任何内容。我试过关闭处理程序，但这没有任何作用。冲洗它也不行。我搜索了互联网，但显然我是唯一一个有这个问题的人。有谁知道问题是什么？感谢您的回答。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-09T04:34:45.933

试着打电话

```
logger.error('This should go to both console and file') 
```

代替

```
logging.error('this will go to the default logger which you have not changed the config of') 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-08-10T12:50:43.867

尝试将 import 和 basicConfig 放在脚本的开头。像这样的东西：

```
import logging
logging.basicConfig(filename='log.log', level=logging.INFO)
.
.
import ...
import ... 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-05-29T18:52:21.523

把这个

```
for handler in logging.root.handlers[:]:
    logging.root.removeHandler(handler) 
```

在......面前

```
logging.basicConfig(...) 
```

另请参阅 [日志模块未写入文件](https://stackoverflow.com/questions/35898160/logging-module-not-writing-to-file?rq=1)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-16T14:33:45.180

我知道这个问题可能有点太老了，但我发现上述方法有点矫枉过正。我遇到了类似的问题，我能够通过以下方式解决它：

```
import logging

logging.basicConfig(format = '%(asctime)s %(message)s',
                    datefmt = '%m/%d/%Y %I:%M:%S %p',
                    filename = 'example.log',
                    level=logging.DEBUG) 
```

这将写入`example.log`所有调试级别或更高级别的日志。

`logging.debug("This is a debug message")`将`This is a debug message`写入`example.log`. 水平对于这个工作很重要。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-03-18T20:26:40.683

为了同时写入终端和文件，您可以执行以下操作：

```
import logging.config

logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s [%(levelname)s] %(message)s",
    handlers=[
        logging.FileHandler("log_file.log"),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__) 
```

代码中的用法：

```
logger.info('message')
logger.error('message') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-24T11:02:43.217

如果`root.handlers`不为空，则不会创建日志文件。我们应该在调用 basicConfig() 方法之前清空 root.handlers。[来源](https://www.tutorialexample.com/fix-python-logging-module-not-writing-to-file-python-tutorial/)

片段：

```
for handler in logging.root.handlers[:]:
logging.root.removeHandler(handler) 
```

完整代码如下：

```
import logging
##loging
for handler in logging.root.handlers[:]:
    logging.root.removeHandler(handler)

logging.basicConfig(level=logging.DEBUG,
                    format='%(asctime)s %(message)s',
                    datefmt='%a, %d %b %Y %H:%M:%S',
                    filename= 'log.txt',
                    filemode='w')

console = logging.StreamHandler()
console.setLevel(logging.INFO)
# add the handler to the root logger
logging.getLogger().addHandler(console)
logging.info("\nParameters:")

for i in range(10):
    logging.info(i)

logging.info("end!") 
```

# c++ - 指针混淆 C++

> ID：15892947
> 
> 赞同：2
> 
> 时间：2013-04-09T03:47:21.673
> 
> 标签：c++, pointers

我有以下实际工作要完成以学习 c++，我一直在寻找答案并阅读我所有的工作，但我有点困惑，我能否澄清我在这里出错的地方。代码如下所示：

```
SafeArray& SafeArray::operator =(const SafeArray& other) {
//Add code here
return *this;
} 
```

我们必须实现将一个数组分配给另一个数组的代码。现在，如果我正确理解该代码，则该方法采用名为 other 的常量“SafeArray”的形式参数。SafeArray 后面的 & 表示传递的是实际数组本身而不是副本，而 const 表示它不能更改。同样，该方法返回实际数组本身，而不是它的副本。

因此，我*认为*这将是一个简单的情况，即创建一个指针，引用“其他”的内存位置，然后返回取消引用的结果。在我尝试实际编码这个想法时，我没有运气。

我尝试执行以下操作：

```
SafeArray* ptr = &other; //This should have created a SafeArray pointer to the memory location of the array "other". 
```

这里的问题是我得到了错误：

```
main.cpp:31:23: error: invalid conversion from ‘const SafeArray*’ to ‘SafeArray*’ [-fpermissive] 
```

我想这样做的原因是我试图将我不允许改变的东西转换成我可以改变的东西。

我可以这样写代码：

```
const SafeArray* = &other; 
```

但是我也无法正确返回值。我在理论上显然误解了一些东西，有人可以解释一下我所缺少的东西。我很乐意自己编写代码，但我不能完全掌握这个方法调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T03:52:27.387

要正确定义此运算符，您只需将作为参数传递的对象**的内容复制****到**.`SafeArray`**`other`****`this`**

要知道如何完成这个功能，唯一的办法就是了解`SafeArray`类的内容，即数据成员。

# hibernate - 我应该使用什么休眠参数？

> ID：15892951
> 
> 赞同：0
> 
> 时间：2013-04-09T03:47:30.507
> 
> 标签：hibernate, one-to-many, many-to-one, hbm

我有一个 DEVICE 表，它的唯一 ID 为 DEVICEID。我有第二个名为 DEVICEINFO 的表，其主键是序列 DEVICEINFOSEQ，但此信息表还有一个 DEVICEID 字段，它是指向 DEVICE 的外键。在 DEVICE HBM 我有以下关于 deviceinfo

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-lazy="true"
package="com.xxx.xxx.xxx">
<class name="Device" table="DEVICE" dynamic-update="true">
    <id name="dString" column="DEVICEID" type="java.lang.String"
        unsaved-value="null" length="9">
        <generator class="assigned"/>
    </id>
....
<many-to-one name="deviceInfo" class="DeviceInfo"
        outer-join="true" foreign-key="deviceId"  >
    </many-to-one> 
```

我的设备信息hbm如下

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-lazy="true" package="com.xxx.xxx.xxx">
<class name="DeviceInfo" table="DEVICEINFO" dynamic-update="true">
    <id name="id" column="DID" type="integer">
        <generator class="native">
            <param name="sequence">DEVICEINFOSEQ</param>
        </generator>
    </id>

    <property name="deviceId" column="DEVICEID" type="string"
        length="32">
    </property>
    <property name="somefield" column="SOMEFIELD" type="string" length="30" />
</class> 
```

一个设备在 Deviceinfo 表中只有 1 个条目，但一个设备根本不需要有一个条目。并非所有设备都有设备信息。但如果信息存在，我们必须检索它。该信息是从另一个来源更新的，如果可能的话，这个 HBM 实际上应该阻止任何更新。多对一正确吗？也许我应该使用一对多？

如果我使用上面的 HBM，我会得到

org.springframework.dao.InvalidDataAccessResourceUsageException：无法执行查询；SQL

# api - FatSecret API - food.get 方法签名无效

> ID：15892957
> 
> 赞同：2
> 
> 时间：2013-04-09T03:48:26.643
> 
> 标签：api, rest, platform

嗨
，我是 FatSecret 平台 API 的新手，我开发了一个 PHP 脚本来
使用 foods.search 方法访问食物详细信息
这是 food.search 方法 Api 调用示例，使用 Curl 并且效果
很好。

<?php
$consumer_key = "xxxxxxx";
$secret_key = "xxxxxxx";
//签名基字符串
//<HTTP Method>&<Request URL>&<Normalized Parameters>
$base = rawurlencode("GET")."&";
$base .= "http%3A%2F%2Fplatform.fatsecret.com%2Frest%2Fserver.api
&";

//按 abc 对参数进行排序....构建正确的唯一签名所必需的
$params = "method=foods.search&";
$params .= "oauth_consumer_key=$consumer_key&"; // 你的消费者密钥
$params .= "oauth_nonce=123&";
$params .= "oauth_signature_method=HMAC-SHA1&";
$params .= "oauth_timestamp=".time()."&";
$params .= "oauth_version=1.0&";
$params .= "search_expression=".urlencode($_GET['pasVar']);
$params2 = rawurlencode($params);
$base .= $params2;

//加密！
$sig= base64_encode(hash_hmac('sha1', $base, "$secret_key&",
true)); // 将 xxx 替换为 Consumer Secret

//现在获取搜索结果并将它们写下来
$url = "http://platform.fatsecret.com/rest/server.api?".
$params."&oauth_signature=".rawurlencode($sig);

//$food_feed = file_get_contents($url);
列表（$output，$error，$info）= loadFoods（$url）；
回声'<pre>';
if($error == 0){
    if($info['http_code'] == '200')
        echo $output;
    else
        die('状态信息：'.$info['http_code']);

}

else
    die('状态错误：'.$error);

函数加载食物（$url）
{

        // 创建 curl 资源
        $ch = curl_init();

        // 设置 url
        curl_setopt($ch, CURLOPT_URL, $url);

        //以字符串形式返回传输
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        // $output 包含输出字符串
        $output = curl_exec($ch);

        $error = curl_error($ch);

        $info = curl_getinfo($ch);
        // 关闭 curl 资源以释放系统资源
        curl_close($ch);

        返回数组（$输出，$错误，$信息）；

}

?>

上面的脚本工作完美，并使用搜索方法检索食物详细信息。但是

当我使用 food.get 方法使用 food_id 检索数据时，它说
无效签名错误，这是 food.get 方法 api 调用示例，我
提供了正确的密钥并传递了 food_id 参数。有人可以帮
我解决这个问题，我真的击中此代码。它说无效
签名错误。

<?php
$consumer_key = "xxxxxxxxx";
$secret_key = "xxxxxxxxxx";
//签名基字符串
//<HTTP Method>&<Request URL>&<Normalized Parameters>
$base = rawurlencode("GET")."&";
$base .= "http%3A%2F%2Fplatform.fatsecret.com%2Frest%2Fserver.api&";

//按 abc 对参数进行排序....构建正确的唯一签名所必需的
$params = "method=food.get&";
$params .= "oauth_consumer_key=$consumer_key&"; // 你的消费者密钥
$params .= "oauth_nonce=".​​rand()."&";
$params .= "oauth_signature_method=HMAC-SHA1&";
$params .= "oauth_timestamp=".time()."&";
$params .= "oauth_version=1.0&";
$params .= "food_id=".urlencode($_GET['pasVar']);
$params2 = rawurlencode($params);
$base .= $params2;

//加密！
$sig= base64_encode(hash_hmac('sha1', $base, "$secret_key&",
true)); // 将 xxx 替换为 Consumer Secret

//现在获取搜索结果并将它们写下来
$url = "http://platform.fatsecret.com/rest/server.api?".
$params."&oauth_signature=".rawurlencode($sig);

//$food_feed = file_get_contents($url);
列表（$output，$error，$info）= loadFoods（$url）；
回声'<pre>';
if($error == 0){
    if($info['http_code'] == '200')
        echo $output;
    else
        die('状态信息：'.$info['http_code']);

}

else
    die('状态错误：'.$error);

函数加载食物（$url）
{

        // 创建 curl 资源
        $ch = curl_init();

        // 设置 url
        curl_setopt($ch, CURLOPT_URL, $url);

        //以字符串形式返回传输
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        // $output 包含输出字符串
        $output = curl_exec($ch);

        $error = curl_error($ch);

        $info = curl_getinfo($ch);
        // 关闭 curl 资源以释放系统资源
        curl_close($ch);

        返回数组（$输出，$错误，$信息）；

}

?>

帮助我代码中有什么错误并帮助我解决问题，因为
我必须在我的项目中使用这个 API

感谢等待您的回复......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:33:30.053

您应该按 alpha 排序参数。所以你应该按这个顺序做：

```
$params = "food_id=".urlencode($_GET['pasVar'])."&"; 
$params .= "method=food.get&";
$params .= "oauth_consumer_key=$consumer_key&"; // ur consumer key
$params .= "oauth_nonce=".rand()."&";
$params .= "oauth_signature_method=HMAC-SHA1&";
$params .= "oauth_timestamp=".time()."&";
$params .= "oauth_version=1.0"; 
```

# ruby-on-rails - 首次启动 Rails，“请安装 mysql2 适配器”

> ID：15892960
> 
> 赞同：0
> 
> 时间：2013-04-09T03:48:48.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, debugging, compiler-errors

我已经成功运行了 mysql2 install (3.11) 并且 activerecord-mysql2-adapter 在我的 gem 列表中。当我创建新项目时，我已经运行了 bundle install 。

`C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.5/lib/bundler/rubygems_integration.rb:214:in 'block in replace_gem': Please install the mysql2 adapter: 'gem install activerecord-mysql2-adapter' (mysql2 is not part of the bundle. Add it to Gemfile.) (LoadError)`

请帮助我，我什至无法让 Rails 服务器运行。我的其他程序会阻塞导轨或防火墙吗？如果是这样，我可以在防火墙中允许什么程序？

我的 Gemfile 指定以下内容。

```
 source 'https://rubygems.org'

gem 'rails'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

我生成的错误在这里

```
Exiting
C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.5/lib/bundler/rubygems_integration.rb:214:in `block in replace_gem': Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (mysql2 is not part of the bundle. Add it to Gemfile.) (LoadError)
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/mysql2_adapter.rb:3:in `<top (required)>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `block in require'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:236:in `load_dependency'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/dependencies.rb:251:in `require'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:50:in `resolve_hash_connection'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'

    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_specification.rb:130:in `establish_connection'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/base.rb:720:in `<top (required)>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/active_record/railtie.rb:88:in `block in <class:Railtie>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/i
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from C:/Users/Charlie/Documents/RailsProject/shop/config/environment.rb:5:in `<top (required)>'
    from C:/Users/Charlie/Documents/RailsProject/shop/config.ru:3:in `require'
    from C:/Users/Charlie/Documents/RailsProject/shop/config.ru:3:in `block in <main>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack1.4.5/lib/rack/builder.rb:51:in`instance_eval'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:51:in`initialize'
    from C:/Users/Charlie/Documents/RailsProject/shop/config.ru:in `new'
    from C:/Users/Charlie/Documents/RailsProject/shop/config.ru:in `<main>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:40:in `eval'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:40:in`parse_file'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/server.rb:200:in `app'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties3.2.13/lib/rails/commands/server.rb:46:in `app'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/server.rb:304:in`wrapped_app'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/server.rb:254:in `start'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties3.2.13/lib/rails/commands/server.rb:70:in `start'        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:55:in `block in <top (required)>'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:15:12.723

你必须确保你的`database.yml`文件是正确的。你应该有

`adapter: mysql2` 不是 `mysql/anything`

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:45:54.203

请检查你的 config/database.yml 文件，你的结构应该是这样的

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: abc_development
  pool: 5
  username: your_database_username
  password: your_database_password
  host: localhost 
```

适用于所有 3 种环境

最重要的是，你应该为此创建你的mysql数据库，你的系统上安装了mysql。给你的数据库提供用户名和密码，并将其添加到你的database.yml文件中

# javascript - 从 knockout.js 的选择列表中设置 observable

> ID：15892963
> 
> 赞同：0
> 
> 时间：2013-04-09T03:49:19.390
> 
> 标签：javascript, knockout.js

我正在尝试使用选择列表的值进行计算，但在选择它时我无法让它检索数字。

当我返回所选数量时，它会返回一些 javascript 而不是数字

selectedQuantity 是我要检索的值。

```
<table border="1">
    <thead><tr>
        <th>ID</th><th>Inventory</th><th>Quantity</th><th>Price</th><th>Total</th><th></th>
    </tr></thead>
    <tbody data-bind="foreach: itemNumbers">
        <tr>
            <td data-bind="text: ID"></td>
            <td data-bind="text: inventory"></td>
            <td><select data-bind="quantityDropdown: inventory, value: selectedQuantity"></select></td>
            <td data-bind="text: formattedPrice"></td>
            <td data-bind="text: itemTotal"></td>
            <td><a href="#" data-bind="click: $root.removeItem">Remove</a></td>
        </tr>    
    </tbody>
</table> 
```

这是javascript

```
function ItemEntry(ID, inventory, price) {
    var self = this;
    self.ID = ID;
    self.inventory = inventory;
    self.price = price;

    self.selectedQuantity = ko.observable(); //returned value (trying to get it at least!)

    self.itemTotal = ko.computed(function() {
        var price = self.price;
        var quantity = self.selectedQuantity;
        return quantity; //just returning quantity for now to verify correct value is selected
    });

    self.formattedPrice = ko.computed(function() {
        var price = self.price;
        return price ? "$" + price.toFixed(2) : "None";        
    });
}

function EntryViewModel(newItem) {
    var self = this;
    self.newItem = newItem;

    //start the array with some items
    self.itemNumbers = ko.observableArray([
        new ItemEntry("1", 20, 22.50) //ID, inventory, price 
    ]);

    // Computed data
   self.totalCost = ko.computed(function() {
       var total = 0;
        for (var i = 0; i < self.itemNumbers().length; i++) {
            total += Number(self.itemNumbers()[i].price);
        }
       return total;
    });    

    self.removeItem = function(item) { self.itemNumbers.remove(item) }
}

//populate the select list with values up to the number in inventory (ex, if inventory is 3, it will fill with 0-7)
ko.bindingHandlers.quantityDropdown = {
    update: function(quantityDropdown, inventory, EntryViewModel) {
        var quantity = ko.utils.unwrapObservable(inventory());
        for(var i = 0; i <= inventory(); i++){
            $(quantityDropdown).append('<option value="' + i + '">' + i + '</option>');
        }
    }
};

ko.applyBindings(new EntryViewModel()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:00:26.157

看起来 self.selectedQuantity 被定义为（设置为）一个 ko.observable。Observables 是函数，所以为了检索值，你应该像函数一样调用它：

```
self.itemTotal = ko.computed(function() {
    var price = self.price;
    //notice the parentheses here to execute the selectedQuantity observable and extract the variable.
    var quantity = self.selectedQuantity();  
    return quantity; //just returning quantity for now to verify correct value is selected
}); 
```

此外，最好了解 ko.computed 函数的工作原理。ko.computed 值将自动更新以反映其中引用的任何 ko.observables 的更改。然而，依赖跟踪机制使用可观察值的检索来检测正在使用的可观察值并且应该被跟踪。

换句话说，如果您希望 ko.computed 在值更改时更新，您需要通过执行上述代码示例中的 observable 变量来引用该值。

KnockOut 文档比我说的好多了：http: [//knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html) [http://knockoutjs.com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html)。

# java - 我应该按班级分开我的 XStream 转换器吗？

> ID：15892971
> 
> 赞同：0
> 
> 时间：2013-04-09T03:50:10.217
> 
> 标签：java, converter, xstream

我正在开发一个使用 XStream 写入 XML 的程序。就目前而言，我只有一个实现 Converter 的类。这个单一的转换器接受我的整个配置，它的根是一个 HashMap，每个键的值是一个新的`VMwareServer`类实例，它又具有一个 HashMap，其中键的值是一个新的`VMwareVirtualMachine`类实例。每个相应的类都有设置和获取诸如`IP address`和`port number`之类的方法。

我想知道这是否是实现 XStream 转换器的正确方法，还是我应该创建一个单独的转换器来将每个类自己转换为 XML？

如果对我的意思仍有疑问，我可以显示一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:59:21.823

这有点值得商榷，但我会主张为每个类设置一个单独的转换器。这有几个好处：如果您以后需要返回完整视图的子集，您将能够轻松地按照基于类的线分解结构（例如，通过权限限制信息）。如果您需要在不同的上下文中返回稍微不同的表示，您可以逐个类地这样做，而不是在您的整体类中复制所有的表示逻辑。

# java - 在大画布上滚动

> ID：15892974
> 
> 赞同：11
> 
> 时间：2013-04-09T03:50:34.477
> 
> 标签：java, android, scroll

我需要一些帮助来理解在 Android 中滚动到画布上的项目的基础知识。假设我想创建一个时间线，其中 0 处的时间是可视化的顶部，并且随着时间的增加，时间线继续呈现在前一点之下。如果我想在 Android 上渲染它，我知道我可以通过覆盖 onDraw() 在画布上简单地创建一堆项目。但是，让我们假设可视化大于屏幕允许的大小。

例如，在下面的第一张图片中，大黑框包含我渲染它时的整个画布。我创建了一条垂直上下的蓝线以及几个黄色、绿色和蓝色的矩形。红色框表示正在呈现可视化的 Android 屏幕。当它最初打开时，所有项目都被绘制，但只有红色框中包含的项目显示在屏幕上。

![Before_Scroll](https://i.stack.imgur.com/gme25.png)

现在，如果用户向下滚动，最初出现在红色框下方的项目在视图中，而超出红色框范围的项目不再可见，如第二张图片所示。

![After_Scroll](https://i.stack.imgur.com/XUvfk.png)

我相信我需要使用可滚动的，但我很迷茫如何做到这一点。我已阅读此页面[http://developer.android.com/training/custom-views/custom-drawing.html](http://developer.android.com/training/custom-views/custom-drawing.html) 解释如何创建自己的客户图像和此页面[http://developer.android.com/training /custom-views/making-interactive.html](http://developer.android.com/training/custom-views/making-interactive.html)解释了如何使 UI 具有交互性，但我认为我遗漏了一些东西。

说明此问题的示例代码（这是基本的，假设有逻辑指示框/线的位置等）如下：

```
package com.example.scrolltest;

import com.example.scrolltest.Draw;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;

public class MainActivity extends Activity {
    Draw draw;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    draw = new Draw(this);
    draw.setBackgroundColor(Color.WHITE);
    setContentView(draw);
    }
} 
```

和

```
package com.example.scrolltest;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class Draw extends View {
    Paint paint = new Paint();

    public Draw(Context context) {
        super(context);            
    }

    @Override
    public void onDraw(Canvas canvas) {

        paint.setColor(Color.GREEN);
        canvas.drawRect(30, 30, 90, 200, paint);
        paint.setColor(Color.BLUE);

        canvas.drawLine(100, 20, 100, 1900, paint);

        paint.setColor(Color.GREEN);
        canvas.drawRect(200, 2000, 400, 3000, paint);
        }
} 
```

但我无法弄清楚的是，我如何使用可滚动来向下滚动到屏幕外的矩形。我也不确定我是否正确地开始了这个或者应该使用drawables来代替......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T06:05:50.823

**简单方法（如果所需高度不是很大）。**

使用 ScrollView 并在其中添加您的 Draw 视图。在 onMeasure 中计算该视图所需的高度。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

draw = new Draw(this);
draw.setBackgroundColor(Color.WHITE);
ScrollView scrollView = new ScrollView(this);
scrollView.addView(draw);
setContentView(scrollView);
}

public class Draw extends View {
        Paint paint = new Paint();

        public Draw(Context context) {
            super(context);            
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            // Compute the height required to render the view
            // Assume Width will always be MATCH_PARENT.
            int width = MeasureSpec.getSize(widthMeasureSpec);
            int height = 3000 + 50; // Since 3000 is bottom of last Rect to be drawn added and 50 for padding.
            setMeasuredDimension(width, height);
        }

        @Override
        public void onDraw(Canvas canvas) {

            paint.setColor(Color.GREEN);
            canvas.drawRect(30, 30, 90, 200, paint);
            paint.setColor(Color.BLUE);

            canvas.drawLine(100, 20, 100, 1900, paint);

            paint.setColor(Color.GREEN);
            canvas.drawRect(200, 2000, 400, 3000, paint);
            }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-04T12:06:56.707

另一种方法是使用偏移 X/Y 值。

您如何处理偏移值取决于您，尽管我更喜欢使用我调用的类`Camera`。访问应该是静态的。

```
public void render(Canvas c){
    c.drawRect(100 - offsetX, 100 - offsetY, 120 - offsetX, 120 - offsetY, Paints.BLUE);

} 
```

并平移画布：

```
float x, y;
@Override
public boolean onTouchEvent(MotionEvent ev) {
    if(ev.getAction() == MotionEvent.ACTION_DOWN){
        x = ev.getX();
        y = ev.getY();
    }else if (ev.getAction() == MotionEvent.ACTION_MOVE) {
        float currX = ev.getX();
        float currY = ev.getY();

        float newOffsetX = (x   - currX),
                newOffsetY = (y - currY);
        //The next two if-statements are to add sensitivity to the scrolling.
        //You can drop these if you don't plan on having touch events
        //with pressing. Pressing works without this as well, but the canvas may move slightly 
        //I use DP to handle different screen sizes but it can be replaced with pixels. c is a context-instance
        if (newOffsetY < Maths.convertDpToPixel(2, c) && newOffsetY > -Maths.convertDpToPixel(2, c))
            newOffsetY = 0;

        if (newOffsetX < Maths.convertDpToPixel(2, c) && newOffsetX > -Maths.convertDpToPixel(2, c))
            newOffsetX = 0;
        offsetX += newOffsetX;
        offsetY += newOffsetY;
        x = ev.getX();
        y = ev.getY();
    }

    return true;

} 
```

还有一个示例相机类：

```
public class Camera{

    public static float offsetX, offsetY;
    //The constructor. ix and iy is the initial offset. Useful if you are creating a game and need to change the initial offset to center around a starting position.
    //Most of the time it will be enough to set the values to 0
    public Camera(float ix, float iy){
        this.offsetX = ix;
        this.offsetY = iy;
    }

} 
```

# input - 打印后用户输入

> ID：15892977
> 
> 赞同：2
> 
> 时间：2013-04-09T03:51:01.590
> 
> 标签：input, io, lua, output

我正在尝试制作一个简单的 lua 程序，将华氏温度转换为摄氏温度和开尔文温度，但我不知道如何将输入命令与打印行放在同一行。这就是我的意思。

我希望程序显示：

```
Fahrenheit = "Here's the user input" 
```

我知道该怎么说

```
Fahrenheit =
"User input" 
```

我还是个新手。

到目前为止，这是我的代码：

```
print("Fahrenheit = ") f = io.read() c = (5/9)*(f-32) 
print("Celsius = "..c) k = c + 273 print("Kelvin = "..k) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:56:19.013

查看`io.write()`和`io.read()`。例如，你可以说：

```
io.write("Fahrenheit = ") 
```

write 命令将输出写入屏幕缓冲区，但不添加换行符。同样，`read`检查最新的输入，并将其返回。

作为参考，我建议从教程中获取[此链接。](http://www.lua.org/pil/21.1.html)

# java - Android：如何在函数运行时停止调用相同的函数

> ID：15892984
> 
> 赞同：0
> 
> 时间：2013-04-09T03:52:23.107
> 
> 标签：java, android

例如：我有一个按钮，如果按下它将调用一个函数来从 API 获取数据到屏幕。但是如果用户再次按下并且该函数仍在运行（正在处理），我该如何停止调用该函数。

而不是隐藏按钮有什么办法来处理它？我需要使用线程来处理它吗？检查线程是否还活着？我对此并不熟悉。请给我一些关于如何处理它的建议和例子。

对不起，我的英语不好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:00:16.923

如果你调用的函数是同步的，你应该没有任何问题。如果函数是启动一个线程，那么你可以这样做：

```
Thread mThrd = null;
public void func() {
    if(mThrd!=null && mThrd.isRunning()) {
        return;
    }

    mThrd = new Thread(/*the runnable that do the job*/);
    mThrd.start();
} 
```

如果函数是一个框架API，只是“在后台做某事”，它可能有一些方法告诉你它是否完成，或者你可以通过一些方法检查结果。喜欢：

```
public void func() {
    if(checkDone()) {
        return;
    }
    callFrameworkAPI();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:53:48.217

按下按钮时会`boolean`转动。`true`当它为真时，执行该方法的正常功能。然后让它在人再次按下按钮时`boolean`转动`false`。如果它是假的，让它做你想做的事`break`，或者`return`什么都不做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T04:25:19.607

当您调用该函数时，将以下行添加到您的函数中，这将使该按钮在单击一次后无法单击。

```
Button b1 = findViewById(R.id.button_name);
b1.setClickable(false); 
```

完成 api 获取后，可能是您的情况下的函数结束，添加以下行，以使按钮再次可点击。

```
b1.setClickable(true); 
```

# google-app-engine - 使用 appengine 提高数据库记录检索吞吐量

> ID：15892989
> 
> 赞同：0
> 
> 时间：2013-04-09T03:53:08.043
> 
> 标签：google-app-engine

使用带有 Python 的 AppEngine 和 HRD 顺序检索记录（通过索引字段，这是一个递增的整数时间戳），我们在 30-45 秒内返回 15,000 条记录。（使用了批处理和限制。）我确实尝试在两个实例上并行执行查询，但仍然实现了相同的总体吞吐量。

有没有办法在不更改任何代码的情况下提高这个总数？我希望我们可以多付一些钱并获得更好的数据库吞吐量。（您可以为更大的前端支付更多费用，但这不会影响数据库吞吐量。）

我们将更改代码以将多个基础数据项存储在一个数据库记录中，但希望有一个短期的解决方法。

编辑：这些是正在下载到另一个系统的日志记录。我们会在未来修复它并且知道如何修复它，但我宁愿先处理更重要的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:02:40.760

尝试拆分不同实体组的记录。这可能会迫使他们转到不同的物理服务器。从多个线程或实例中并行读取实体组。对于大型表，使用缓存可能效果不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:40:43.140

也许你可以缓存你的记录，比如使用 Memcache：

[https://developers.google.com/appengine/docs/python/memcache/](https://developers.google.com/appengine/docs/python/memcache/)

这绝对可以加快您的应用程序访问速度。我不认为 App Engine Datastore 是为速度而设计的，而是为**可扩展性**而设计的。然而，Memcache 是。

顺便说一句，如果您意识到 GAE 根据您支付的费用提供的性能，那么也许您可以尝试设置自己的 App Engine 云：

*   [AppScale](http://appscale.cs.ucsb.edu/)
*   [JBoss CapeDwarf](http://www.jboss.org/capedwarf)

两者都有积极的社区支持。我在本地环境中使用 CapeDwarf，它仍处于测试阶段，但它可以工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-10T09:01:50.247

移动到任何内存数据库。如果您有 Oracle 数据库，则使用[TimesTen](http://www.oracle.com/technetwork/products/timesten/overview/)将成倍地提高吞吐量。

# python - Python初学者-如何将对象列表与对象属性的频率拼接

> ID：15892992
> 
> 赞同：-3
> 
> 时间：2013-04-09T03:53:37.127
> 
> 标签：python

鉴于：

```
from collections import Counter

class TEST:
    age = 'unknown'
    city = 'unknown'
    def __init__(self, a, c):
        self.age = a
        self.city = c
    def __repr__(self):
        return "(" + str(self.age) + "," + self.city + ")"

L = [TEST(20, 'LA'), TEST(30, 'NY'), TEST(30, 'LA')] 
```

我想计算“城市”属性的频率：

期望的输出：

`[[20, 'LA', 2], [30, 'NY', 1], [30, 'LA', 2]]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T04:52:55.900

如果您正在考虑使用，那么您就在正确的轨道上`Counter`- 它无法进行您想要的拼接，但它*会*为您提供频率。由于您想要仅基于城市的频率，请仅介绍`Counter`城市：

```
freq = Counter(l.city for l in L) 
```

然后`freq['LA']`将是与 相关的频率`'LA'`。您想要一个元组列表`(age, city, frequency)`- 中的对象`L`将直接为您提供年龄和城市，并且您现在有了一个对象，当您给它城市时，它会为您提供频率。这意味着您可以从简单的列表理解中获得所需的结果：

```
[(l.age, l.city, freq[l.city]) for l in L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:46:07.367

```
res=[x.city for x in L]
op=[]
for x in L:
   op+=[[x.age,x.city,res.count(x.city)]]

print op

**[[20, 'LA', 2], [30, 'NY', 1], [30, 'LA', 2]]** 
```

# javascript - 从 json 数据中为数据表行分配 ID

> ID：15892995
> 
> 赞同：1
> 
> 时间：2013-04-09T03:53:49.637
> 
> 标签：javascript, datatables

我是数据表 jquery 插件的新手。我被这个问题困住了超过 2 天。我有一个 Json 数据，我仍然无法加载表，我还想将第一列分配为行的 id

这是html：

```
<table cellpadding="0" cellspacing="0" border="0" class="display"
    id="accDetailTable">
    <thead>
        <tr>
            <th>Currency</th>
            <th>Current/Savings Account No.</th>
            <th>Securities Account No.</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

和我的初始化

```
var oTable=$('#accDetailTable').dataTable( {
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": contextPath + "/user/investorAjax?method=getInvestorAccDetailList",
            "iDeferLoading": 57,
    } ); 
```

从服务器返回 jsonData：

```
 {"sEcho":1,"iColumns":4,"iTotalRecords":16,"iTotalDisplayRecords":16,
"aaData":
    [{"DT_RowId":2032,"currency":1,"currentAccNo":"aa","secureAccNo":"aa"},
    {"DT_RowId":2033,"currency":1,"currentAccNo":"111","secureAccNo":"111"},
    {"DT_RowId":2034,"currency":1,"currentAccNo":"a","secureAccNo":"aa"},
    ]}
} 
```

但它总是命中：

> DataTables 警告（表 id = 'accDetailTable'）：添加的数据（大小未定义）与已知的列数不匹配 (3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:10:22.003

这很容易。做个小改动，因为你希望第一列包含id，你可能需要使用fnRender，请[查看datatables的api](http://www.datatables.net/ref)，我没有添加这部分代码：

```
var oTable=$('#accDetailTable').dataTable({
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": contextPath + "/user/investorAjax?method=getInvestorAccDetailList",
    "aoColumns":[
        {"mDataProp":"currency"},
        {"mDataProp":"currentAccNo"},
        {"mDataProp":"secureAccNo"}
    ]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:12:33.107

您的数据表正在等待每行三个条目，您给它四个。`<th>`在您的表格声明（在 html 部分）中，在行的开头指定一个新的标题单元格。您将在其中放入 id。然后在你的 dataTables 初始化之后，你可以使用函数隐藏第一列`fnSetColumnVis(index, visibility)`：

```
oTable.fnSetColumnVis(0, false); //It will hide your first column 
```

这样做每一行都包含他的 id (DT_RowId) 但不显示它。