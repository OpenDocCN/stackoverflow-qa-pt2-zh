# StackOverflow 问答 13794000-13794999

# facebook - 在实现我的 Facebook 登录时出现“错误”（仅）。我究竟做错了什么？

> ID：13794001
> 
> 赞同：0
> 
> 时间：2012-12-10T01:59:05.673
> 
> 标签：facebook, facebook-graph-api, login, yetanotherforum, yaf

我正在尝试在我网站的论坛上实现 Facebook 登录。代码完全正确——它已经过测试，我已经四倍地检查过了。

**按钮在那里**！单击“使用 Facebook 登录”按钮时……它会弹出输入您的 FB 信息的弹出框，但是当您单击“授权应用程序”时，它不会重定向我并注册用户。我得到一个小小的弹出框，上面只写着“发生错误”，没有别的。这是错误：

![登录错误](../Images/ffba3d67c6ea2e32885731fc445be61f.png)

**但我认为我在实际的Facebook 应用页面上**做错了。这是我所拥有的：

![我的应用设置：](../Images/424dd11223745161d67a032f87c791da.png)

![我的应用详情：](../Images/5579a20c05f87140938b84187fab33ee.png)

我唯一能想到的是我应该在**命名空间**中放一些东西（但不知道放什么），或者**应用程序域**不正确......因为登录按钮位于 www.domain.com/knowledgebase/ default.aspx?g=login ...但是当我尝试将其输入应用程序域时，FB App 页面说该域无效。它唯一接受的是 www.domain.com。任何熟悉 Facebook 应用程序的人，或任何可以提供指导的人——我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:37:19.047

> 但是当您单击“授权应用程序”时，它不会重定向我并注册用户。我得到一个小小的弹出框，上面只写着“发生错误”，没有别的。

这似乎是一条简单的 JavaScript`alert`消息——我怀疑它来自 Facebook，它更有可能来自您在处理登录响应时运行的脚本。

> 或者应用程序域不正确...因为登录按钮位于 www.domain.com/knowledgebase/default.aspx?g=login ...但是当我尝试将其输入应用程序域时，FB 应用程序页面说域名无效。它唯一接受的是 www.domain.com。

*恭喜 - 现在您知道URL*和*域*之间的区别了。

# django - Django Endless Pagination中的反向分页顺序

> ID：13794008
> 
> 赞同：0
> 
> 时间：2012-12-10T02:00:17.980
> 
> 标签：django, pagination, django-comments, django-pagination, django-endless-pagination

Django Endless Pagination（对我来说非常适合）的默认分页首先显示最旧的对象，然后通过较新的对象进行分页，即最后一页包含最新的对象。我正在尝试使用它对评论进行分页，并希望首先显示最新评论，然后对旧评论进行分页（例如在 Facebook 上）。对我来说，这似乎是一个非常标准的问题，但我无法找到任何解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:30:24.210

没有任何代码，很难给你一个具体的解决方案，但一般来说它会订购东西，但查询集恰好是订购的。只需`order_by`在您的查询中使用您的视图即可根据需要对其进行排序。

# algorithm - 您能否检查一下这个替换到目前为止是否正确？

> ID：13794017
> 
> 赞同：1
> 
> 时间：2012-12-10T02:01:56.527
> 
> 标签：algorithm, math, equation, substitution, recurrence

> 问题：
> 
> 使用重新代入求解以下递推方程：
> 
> T(N) = 2T(n-1) + n; n >=2 且 T(1) = 1

到目前为止，我有这个：

T(n) = **2T(n-1) + n**

= 2(2T(n-2) + (n-1)) + n

= **4T(n-2) + 3n -2**

= 2(4T(n-3) + 3(n-1) -2) + n

= 2(4T(n-3) + 3n -3 -2) + n

= 2(4T(n-3) + 3n -5) + n

= 8T(n-3) + 6n - 10 + n

= **8T(n-3) +7n -10**

我只是想知道到目前为止，我接近这个的方式是否正确。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:43:37.503

这一步是错误的：

```
= 4T(n-2) + 3n -2

= 2(4T(n-3) + 3(n-1) -2) + n 
```

它应该是

```
= 4T(n-2) + 3n -2

= 4(2T(n-3) + (n-2)) + 3n - 2 
```

你替换`T(n-i)`by `2T(n-i-1) + (n-i)`。

除此之外，我认为你弄错了。你的老师要你做的，就是去*感受*`T(n)`意志的价值。在这种情况下，您会看到每次迭代时，都会将第一个系数乘以`2`，最后您会得到一个类似 的成员`an+b`。这意味着`T(n) = 2^n + O(n)`因为只有最大的成员才重要。

# c++ - 访问和打印用 new 初始化的向量的向量

> ID：13794018
> 
> 赞同：1
> 
> 时间：2012-12-10T02:02:04.233
> 
> 标签：c++, pointers, vector, heap-memory

如何使用“cout”访问和打印存储在另一个已动态初始化的向量中的向量元素。

因此，例如，我有一个向量和一个用“新”创建的向量的向量

```
vector<int> v1;
v1.push_back(1);
v1.push_back(2);
vector<vector<int> >* vV = new vector<vector<int> >();
vV->push_back(v1);
// way to access v1[0] from vV and way to cout << vV[0][0] (just an example) 
```

我正在用 new 创建向量的向量，因为我需要它非常大，所以我需要将它分配给堆，就好像我在堆栈上分配它崩溃一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:05:20.203

使用括号：

```
std::cout << (*vV)[0][0] << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T02:05:38.423

使用间接和`at()`;

```
 cout << vV->at(0)[0] << endl; 
```

# php - 如何在不重新加载的情况下插入 SQL 值？（jquery + PHP）

> ID：13794021
> 
> 赞同：0
> 
> 时间：2012-12-10T02:02:16.533
> 
> 标签：php, html, jquery

我有一个表单，我将各种字段（姓名、电子邮件、评论）保存在 mysql 数据库中，数据已写入，但我想在不重新加载页面的情况下显示数据，按下提交按钮并查看新评论。.

HTML：

```
<form action="" method="post" id="form">
    <fieldset>
        <input type="hidden" name="noticia_id" value="<?php echo $id;  ?>"><br>
        <p><label>NOMBRE *</label>
        <input type="text" id="nombre" name="usuario"></p>
        <p><label for="email">EMAIL (No se publicará) *</label>
        <input type="text" id="email" name="email"></p>
        <p><label for="comment">COMENTARIO</label>
        <textarea name="comentario" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>
        <p><input type="submit" name="submit" id="submit" tabindex="5" value="Enviar " /></p>

    </fieldset>
</form> 
```

PHP：

```
<?php
if ($_POST) {
    //conectamos a la base  
    $connect=mysql_connect("localhost","root","");  
    //Seleccionamos la base  
    mysql_select_db("mostra",$connect);
    $id=$_POST['noticia_id'];
    $nick=$_POST['usuario']; 
    $email=$_POST['email']; 
    $comentario=$_POST['comentario']; 
    $query = "INSERT INTO comentarios (usuario,email,comentario,noticia_id, fecha) VALUES('$nick','$email','$comentario','$id', NOW())";
    mysql_query($query) or die(mysql_error());

    $query = "UPDATE  noticias SET num_comentarios= num_comentarios+1 where id_noticia='".$id."'";
    mysql_query($query) or die(mysql_error());
}

?> 
```

如何创建 jquery 函数或其他方法来插入此数据而无需重新加载页面？

我看过教程，但我无能为力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:11:23.327

在您的 javascript 中，使用 Jquery 进行 AJAX 调用，如下所示：

假设您有一个名为 url.php 的 php 页面正在执行 SQL 插入，并且您正在传递一个名为 par1 的参数，请执行以下操作：

```
$.ajax({
    url: "ver.php?par1=" + parValue,
    type: 'POST',
    success: function(result) {
        // use the result as you wish in your html here
}}); 
```

然后在 ver.php 中执行：

```
$par1 = $_POST['par1']; 
```

好的，试试这段代码：

HTML 代码：

```
<fieldset>
    <input type="hidden" name="noticia_id" value="<?php echo $id;  ?>"><br>
    <p><label>NOMBRE *</label>
    <input type="text" id="nombre" name="usuario"></p>
    <p><label for="email">EMAIL (No se publicará) *</label>
    <input type="text" id="email" name="email"></p>
    <p><label for="comment">COMENTARIO</label>
    <textarea name="comentario" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>
    <p><input type="button" name="submit" id="submit" onclick="send_data()" tabindex="5" value="Enviar " /></p>

</fieldset>

Javascript Code:

function send_data()
{
    var usuario = $('#nombre').val();
    var email = $('#email').val();
    var commentario = $('#comment').val();

    $.ajax({
    url: "ver.php?usuario=" + usuario + "&email=" + email + "&comentario=" + commentario,
    type: 'POST',
    success: function(result) {
        // use the result as you wish in your html here
    }});

}

PHP Code:

$connect=mysql_connect("localhost","root","");  
//Seleccionamos la base  
mysql_select_db("mostra",$connect);
$nick=$_POST['usuario']; 
$email=$_POST['email']; 
$comentario=$_POST['comentario']; 
$query = "INSERT INTO comentarios (usuario,email,comentario,noticia_id, fecha) VALUES('$nick','$email','$comentario','$id', NOW())";
mysql_query($query) or die(mysql_error());

$query = "UPDATE  noticias SET num_comentarios= num_comentarios+1 where id_noticia='".$id."'";
mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:08:47.727

AJAX 是完成您正在寻找的内容的最佳方式，而且您的代码极易受到 SQL 注入的攻击，我建议您对 PDO 准备好的语句做功课，以帮助防范它。看看这里[Reload MySQL data inside a DIV using Ajax](https://stackoverflow.com/questions/11070607/reload-mysql-data-inside-a-div-using-ajax)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:10:08.820

```
<script type="text/javascript">
    $(function(){
        $('form').submit(function(){
            $.ajax({
                type:'POST',
                data:{'usuario':$(this).find("input[name=usuario]").val(),'email':$(this).find("input[name=email]").val()},
                success:function(returnData){
                    console.log(returnData)
                }
            })
            return false;
        })
    })
</script> 
```

# c++ - 在 C++ 中接收错误“必须调用成员函数或其地址在函数中”

> ID：13794023
> 
> 赞同：1
> 
> 时间：2012-12-10T02:02:52.750
> 
> 标签：c++

我正在尝试编写一个程序来使用结构数组执行各种操作，但我遇到了函数问题。我不断收到错误 E2235“必须调用成员函数或在函数读取中获取其地址（学生 *，int）”，我不确定是什么导致了这个错误。我的代码如下：

```
#include <iostream.h>
#include <fstream>
struct student{
    string first;
    string last;
    string id;
    double GPA;
    int age;
};
void menu();
void read(student* data, int x);
int main(){

bool quit=false;
char choice;
student data[20];
cout<<"Welcome!"<<endl;
//the program is menu driven, so a switch statement allows for many choices
while(!quit){
    menu();
    cin>>choice;
    switch(choice){
        case '1': read(data, 20); break;
        case '2': break;
        case '3': break;
        case '4': break;
        case '5': break;
        case '6': break;
        case '7': break;
        case '8': cout<<endl<<"Goodbye!\n"; quit=true; break;
        default: cout<<"I think you're doing it wrong. Please try again.";
        }
    }
} 

//menu output so the user knows what they're doing
void menu(){
    cout<<endl;
    cout<<"What would you like to do?"<<endl;
    cout<<"(1) - Read data into the database"<<endl;
    cout<<"(2) - Add a student"<<endl;
    cout<<"(3) - Remove a student"<<endl;
    cout<<"(4) - List all students"<<endl;
    cout<<"(5) - Compute the average GPA and SD of the database"<<endl;
    cout<<"(6) - View Student Information"<<endl;
    cout<<"(7) - Save the database"<<endl;
    cout<<"(8) - Exit"<<endl;
}

//the problem function
void read(student* data, int x){
    ifstream infile;
    infile.open("StudentStruct.txt");
    int k=0;
    string first, last, id;
    double GPA;
    int age;
    while(!infile.eof&&k<x){
        infile>>first;
        data[k].first;
        infile>>last;
        data[k].last;
        infile>>id;
        data[k].id;
        infile>>GPA;
        data[k].GPA;
        infile>>id;
        data[k].age;
        k++;
    }
    cout<<"The database now contains "<<k<<" data entries from 'StudentStruct.txt'"<<endl;
} 
```

什么可能导致此错误，我应该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:45:13.170

我会将问题功能分解为几个单独的部分。只需从文件中读取一条“记录” *。*另一个将使用它来读取所有记录。第一个，按照惯例，被命名为`operator>>`（又名“流提取器”）：

```
std::istream &operator>>(std::istream &infile, student &d) { 
    infile >> d.first;
    infile >> d.last;
    infile >> d.id;
    infile >> d.GPA;
    infile >> d.age;
    return infile;
} 
```

第二个函数使用该函数从文件中读取所有数据。对于它，您*不想*使用`while (!whatever.eof())`- 这几乎肯定会失败。有几种选择。一种是这样的：

```
while (infile >> some_student)
    students.push_back(some_student); 
```

另一种可能性是使用`istream_iterator`，它几乎可以自动化整个循环：

```
std::vector<student> students((std::istream_iterator<student>(infile)),
                                std::istream_iterator<student>()); 
```

这定义了`students`向量，并从一对`istream_iterator`s 中初始化它，这对 s 隐式循环文件，读取所有数据（使用上面的流提取器。

正如这暗示的那样，我也会使用`std::vector<student>`（如果可能的话）而不是`student *`，因此可以在需要时调整它的大小以适应数据。使用这些，函数变成这样：

```
std::vector<student> read() { 
    std::ifstream infile("StudentStruct.txt");
    std::vector<student> students((std::istream_iterator<student>(infile)),
                                    std::istream_iterator<student>());
    return students;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:19:25.570

我认为这是与`while`条件内的代码相关的措辞笨拙的错误消息，带有`infile.eof`. 您没有使用函数调用约定（即`infile.eof()`），因此编译器不知道您要如何处理该代码：调用成员函数或获取其地址。所以它会发出警告。

从文件中读取学生数据的方式还有另一个问题：

```
string first, last, id;
double GPA;
int age;

while(!infile.eof&&k<x){
    // Here you read a string into the local variable 'first'
    infile>>first;

    // And here you do... what? referencing the 'first' member variable of the k'th student.
    data[k].first;

    // Rinse, lather repeat
    infile>>last;
    data[k].last;
    infile>>id;
    data[k].id;
    infile>>GPA;
    data[k].GPA;
    infile>>id;
    data[k].age;
    k++;
} 
```

仔细看看你在做什么：你`data`永远不会挤满学生。您将值读入局部变量，然后将结果丢弃，从不使用它们。整合克里斯关于消除使用`infile.eof()`try this 的建议：

```
while((k < x) && (infile >> data[k].first)) 
{
    infile >> data[k].last;
    infile >> data[k].id;
    infile >> data[k].GPA;
    infile >> data[k].age;

    k++;
} 
```

# ios - 在 Xcode 中更改日期格式？

> ID：13794025
> 
> 赞同：-1
> 
> 时间：2012-12-10T02:03:12.330
> 
> 标签：ios, xcode, nsdateformatter

我对 Xcode 真的很陌生，我想知道如何从 Xcode 中的字符串重新格式化日期？

这是字符串格式：年-月-日

如何将其更改为以下格式的字符串：月-日-年？

喜欢 12-09-2012

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:22:37.773

我遇到了这个，[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

它显示以下内容，希望这会有所帮助，

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"yyyy-MM-dd 'at' HH:mm"];

NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:162000];

NSString *formattedDateString = [dateFormatter stringFromDate:date];

NSLog(@"formattedDateString: %@", formattedDateString);

  // For US English, the output may be:

  // formattedDateString: 2001-01-02 at 13:00 
```

# css - 如何仅为 Internet Explorer 定义 CSS 样式？

> ID：13794026
> 
> 赞同：1
> 
> 时间：2012-12-10T02:03:22.863
> 
> 标签：css, internet-explorer, stylesheet

我遇到过：

```
/* for firefox only */
@-moz-document url-prefix() {
#main_menu ul ul {
top: 37px;
}
} 
```

仅可用于定义 Firefox 样式，是否有类似的替代方法可用于定义仅与 IE 一起使用的样式？还是这里的“条件样式表”方法被认为是最佳实践？

[http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

在这种情况下，我只想更改下拉 CSS 菜单的上边距，因此只需要为 ie 调整几个样式。

谢谢你。

ps我遇到过：

[仅为 IE 设置 CSS？](https://stackoverflow.com/questions/13361015/setting-css-for-ie-only)

并试图提出：

```
<!--[if IE]><!--> <html class="ie"> <!--<![endif]--> 
```

在头部，然后在css中定义：

```
.ie#main_menu ul ul {
top: 50px !important;
} 
```

但我看不到 IE 的任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:30:48.523

您应该将此代码放在**HTML**文件中，在您的通用 CSS 之后。现在，您将拥有另一个 CSS 文件 (ie.css)，该文件将应用于 Greater Then (and Equal) IE6 和 later Then IE8 (and Equal) 浏览器。

```
<!--[if (gte IE 6)&(lte IE 8)]>
  <link rel="stylesheet" href="css/ie8.css" media="screen,all" />
<![endif]--> 
```

或者你可以在你的原始 CSS 文件中使用“star property hack”。在您的 CSS 规则前面加上一个星号，您将针对 IE7 和更低版本。例子：

```
div{
  top:20px;
  *top:10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:15:07.870

您是否首先检查过您的样式规则是否在没有条件的情况下应用？您的 CSS 选择器可能有问题。我相信你的 CSS 选择器应该是“.ie #main_menu ul ul”而不是你所拥有的。注意“.ie”后面的空格

```
.ie #main_menu ul ul {
    top: 50px !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:05:50.893

您是在使用真实版本的 IE 进行测试，还是在开发人员工具中更改版本？例如，IE 中的开发人员工具几乎从不准确表示它在 IE 8 中的外观。

# c - C打印1-10，有问题

> ID：13794027
> 
> 赞同：0
> 
> 时间：2012-12-10T02:03:27.767
> 
> 标签：c, arrays, count, increment

我有一个 C 程序，这很简单，但我在智能地使用指针方面相当糟糕。如果有人可以帮助我解决这个问题，我将不胜感激。它有两个功能，然后是主要功能。第一个函数创建一个包含 10 个整数 1-10 的数组。第二个函数打印出该数组。谢谢，

```
#include<stdio.h>

//function to create array of 10 ints
int* myArray(void)
{
int array[10], i;

for(i = 0; i < 10; ++i)
{
    array[i] = i + 1;
}
return array;
}

//function to printout the array of 10 ints
void printArray(void)
{
int *array = myArray();
int i;
for(i = 0; i < 10; ++i)
{
printf("%d ", array[i]);
}
}

//my main
int main()
{
myArray();
printArray();

} 
```

我目前得到的输出是 1 1 2 3078316 5 6 3078824 257921824 1905931270 -2 非常混乱哈哈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T02:05:51.613

问题是您正在从函数返回一个局部变量`myArray`。声明`int array[10]`将放入`array`堆栈，并在`myArray`返回时被销毁。这意味着`myArray`返回一个无效的指针。

如果需要在函数中创建数组，请使用`malloc`. 那是：

```
int *array = (int *)malloc(10 * sizeof(int)); 
```

请注意，在将来的某个时间点，您将需要`free()`数组。例如，在`printArray`：

```
int *array = myArray();
/* do some stuff with array */
free(array); 
```

# android - Android bitmap.setPixel(x,y,color) 是设置传入值

> ID：13794029
> 
> 赞同：1
> 
> 时间：2012-12-10T02:03:48.687
> 
> 标签：android, bitmap, steganography

使用 Bitmap.create(25, 25, Config.ARGB_8888) 创建位图

设置一个 alpha 值小于或等于 0xA9 的像素会导致该像素没有被设置为传入的内容。我读到另一个堆栈溢出问题说 setHasAlpha(true)，我在测试中这样做了——但这仍然没有不解决问题。

这是我的 android 测试用例，显示了我的问题：

```
 public void testSettingBitmaps() {
    Bitmap bitmap = Bitmap.createBitmap(25, 25, Config.ARGB_8888);
    bitmap.setHasAlpha(true);

    int color = 0x00fefefe;
    int x= 0;
    int y = 0;

    for(int alpha = 0xFF000000; alpha != 0x00000000; alpha = alpha - 0x01000000) {
        int colorPlusAlpha = color + alpha;
        bitmap.setPixel(x, y, colorPlusAlpha);  

        //
        // This test succeeds if the bitmap let us set the pixel.
        //
        assertEquals(String.format("Current alpha value: %x, Expected pixel value: %x, Actual pixel value: %x", alpha, colorPlusAlpha, bitmap.getPixel(x, y)), 
                colorPlusAlpha, bitmap.getPixel(x, y)); 

    }
} 
```

此代码失败并显示以下输出：junit.framework.AssertionFailedError: Current alpha value: a9000000, Expected pixel value: a9fefefe, Actual pixel value: a9fdfdfd expected:<-1442906370> but was:<-1442972163>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T02:20:06.787

这实际上按预期工作。

问题是位图以预乘 alpha 格式存储。这意味着当您将像素值设置为 0xa9fefefe 时，存储的值实际上是 0xa9a8a8a8 (0xa9*0xfe/255=0xa8)。然后当您调用 getPixel() 时，存储的值是“未预乘的”。如果出现舍入错误，您会得到 0xa9fdfdfd。

这是一个细分，您传递了一个 ARGB 值 0xa9fefefe。每个 RGB 字节在存储之前将乘以 alpha 值。为简化起见，我们只看红色字节：

R=169*254/255 R=168（或0xa8）

然后当您调用 getPixel() 时，RGB 字节除以 alpha：

R=255*168/169 R=253（或0xfd）

# java - 将 XWPFDocument 传输到 InputBinary

> ID：13794031
> 
> 赞同：0
> 
> 时间：2012-12-10T02:04:10.823
> 
> 标签：java, apache-poi, inputstream

有没有办法将对象转换为（可能）`org.apache.poi.xwpf.usermodel.XWPFDocument`的任何子类，而不必考虑从下面的层次结构中引用所述文档的对象。`java.io.InputStream``java.io.FileInputStream``java.io.File`

```
java.io.File                               => The path of the .docx file
java.io.FileInputStream                    => The InputStream to be used for JDBC
org.apache.poi.xwpf.usermodel.XWPFDocument => Retrieve elements in the document 
```

# c++ - 如何设置 Code::Blocks 的目录？

> ID：13794036
> 
> 赞同：2
> 
> 时间：2012-12-10T02:05:01.537
> 
> 标签：c++, codeblocks

我正在尝试在 Code::Blocks 中运行此代码来测试我的项目：

```
FILE *tFile = fopen("findloc.txt", "w"); 
```

但是，它将文件放在 Users/Pon3 而不是 Users/Pon3/Projects/MyProject 中，这是我希望它去的地方。如何在 Code::Blocks (Mac OS X Mountain Lion) 中解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:28:45.670

`"Users/pon3/Projects/MyProject/findloc.txt"`如果您想要，会更具体地放置您的文本文件。

如果你简单地写 `FILE *tFile = fopen("findloc.txt", "w");`，你的文本文件将被 code::block 放在他的文件中。

# python - 难以理解 wxPython 中的 wx.Sizers

> ID：13794038
> 
> 赞同：2
> 
> 时间：2012-12-10T02:05:03.547
> 
> 标签：python, python-2.7, wxpython, pywin32

wxPython 的文档记录很差，理解 sizers 有点困难，我不得不打印代码并逐段研究它以了解它的作用，以及更简单的方法来记住它是如何工作的。

鉴于我来自网络背景，我倾向于将 sizers 与 xhtml div 标签进行比较，我将 css、flags 与 wxpython 中没有的东西进行比较，但看到 divs 和 css 的间距非常好，诸如此类，它有点很难跟上 wxpython 中的所有内容，但我想时间会证明一切。

在这里，我正在尝试创建一个带有面板的简单框架，以及一个带有标签和十像素边框的静态框，以及几个静态文本和一些文本控件。(wx.TextCtrl)

这就是我想要创造的。

![wx.StaticBox](../Images/8843afd31900a04a8815a018ee2ae065.png)

我想代码不会太多，但是由于父母和标志的数量以及诸如此类的东西，它只会让人感到困惑。

我怎样才能添加一个带填充的静态框，这样它就不会接触面板的侧面（边框），我怎么知道我应该使用什么尺寸器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:34:37.037

这是一个更易于维护的起点。

![在此处输入图像描述](../Images/90eabc3a5ca5edef2206f3f6865acab7.png)

```
import wx

class PersonalInfoDialog(wx.Dialog):
    def __init__(self, parent):
        super(PersonalInfoDialog, self).__init__(parent)
        self.SetTitle('Personal Info')
        sizer = self.create_controls()
        self.SetSizer(sizer)
    def create_controls(self):
        box = self.create_box()
        buttons = self.create_buttons()
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(box, 1, wx.EXPAND | wx.ALL, 10)
        sizer.Add(buttons, 0, wx.EXPAND | wx.BOTTOM, 10)
        return sizer
    def create_box(self):
        contents = self.create_box_contents()
        box = wx.StaticBox(self, -1, 'Personal Info')
        sizer = wx.StaticBoxSizer(box, wx.VERTICAL)
        sizer.Add(contents, 1, wx.EXPAND | wx.ALL, 10)
        return sizer
    def create_box_contents(self):
        male = wx.CheckBox(self, -1, 'Male')
        married = wx.CheckBox(self, -1, 'Married')
        age = self.create_age()
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(male)
        sizer.AddSpacer(10)
        sizer.Add(married)
        sizer.AddSpacer(10)
        sizer.Add(age)
        return sizer
    def create_age(self):
        age = wx.SpinCtrl(self, -1, '28', min=0, max=100, size=(64, -1))
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        text = wx.StaticText(self, -1, 'Age')
        sizer.Add(text, 0, wx.ALIGN_CENTER_VERTICAL)
        sizer.AddSpacer(10)
        sizer.Add(age)
        return sizer
    def create_buttons(self):
        button = wx.Button(self, wx.ID_OK, 'OK')
        sizer = wx.BoxSizer(wx.HORIZONTAL)
        sizer.AddStretchSpacer(1)
        sizer.Add(button)
        sizer.AddStretchSpacer(1)
        return sizer

def main():
    app = wx.App(False)
    dialog = PersonalInfoDialog(None)
    dialog.ShowModal()
    dialog.Destroy()
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:36:32.167

这将基本上创建你想要的.. 可能需要一些小的修改..

```
import wx
a = wx.App(redirect=False)
f = wx.Frame(None,-1,"application")
p = wx.Panel(f,-1)
sb = wx.StaticBox(p,-1,"label")
sb_sz = wx.StaticBoxSizer(sb,wx.VERTICAL)
sb_sz.Add(wx.CheckBox(p,-1,"CB 1",size=(200,-1)),0,wx.ALL,10)
sb_sz.Add(wx.CheckBox(p,-1,"CB 2"),0,wx.ALL,10)
sb_sz.AddSpacer(7)
sz_h = wx.BoxSizer(wx.HORIZONTAL)
sz_h.Add(wx.StaticText(p,-1,"Some Label"),0,wx.ALL,10)
sz_h.Add(wx.Choice(p,-1,choices = ["A","B","C"]))
sb_sz.Add(sz_h)
sb_sz.AddSpacer(35)
sz = wx.BoxSizer(wx.VERTICAL)
sz.Add(sb_sz,0,wx.ALL,10)
p.SetSizer(sz)
sz_h2 = wx.BoxSizer(wx.HORIZONTAL)
sz_h2.Add(wx.Button(p,wx.ID_OK))
sz_h2.Add(wx.Button(p,wx.ID_CANCEL))
sz.Add(sz_h2,0,wx.ALIGN_RIGHT|wx.ALL,10)
sz2 = wx.BoxSizer()
f.SetSizer(sz2)
sz2.Add(p)
f.Layout()
f.Fit()
f.Show()
a.MainLoop() 
```

![在此处输入图像描述](../Images/3e45ee91a98f9409b7a17a8f55a417ce.png)

# android - 修改相机帧

> ID：13794039
> 
> 赞同：0
> 
> 时间：2012-12-10T02:05:13.977
> 
> 标签：android, colors, camera, frame, effect

我正在编写一个android应用程序。此应用程序使用相机和不同的可视化模式，如灰色、高对比度等。视力低下的人将使用它来阅读任何类型的文本。其中一些人只能以确定的颜色阅读。因此，我的应用程序目前仅支持提供的效果`Camera.Parameters.EFFECT_X`，我需要提供一种具有两种颜色的可视化模式：图像字体的颜色和图像文本的颜色。该人应该能够从某种托盘中选择颜色。所以问题是如何设定一个阈值来获得只有 2 种颜色的帧。我考虑过使用opencv4android，但我想避免它。我认为它可以在相机每一帧的回调集中以数学方式完成，但我不确定......

我在这里检查了一些主题，但在这个 [如何操作相机预览？](https://stackoverflow.com/questions/6478375/how-can-i-manipulate-the-camera-preview)

`canvas.lock`用来。我不能使用它，因为我的应用程序应该在 3 之前的 Android 版本上运行，所以我被迫放置`mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);`，如果我放置任何`canvas.lock`. 如果我可以避免设置类型或崩溃...

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:46:08.553

您可以使用**平均阈值**方法。[这个答案](https://stackoverflow.com/a/8959828/752320)更详细一点，并且有一个链接到详细介绍算法的论文。我不能保证它对每一帧都足够快，但我已经将它用于全分辨率静止图像，没有明显的延迟，所以对于较小（预览尺寸）的图像，应该没问题。

对于您的第二个问题，不，我认为 Android 没有任何内置的视频稳定功能。

# php - 对单用户用户/查找 API 调用使用 Twitter OAuth

> ID：13794040
> 
> 赞同：1
> 
> 时间：2012-12-10T02:05:15.913
> 
> 标签：php, twitter, oauth

我正在尝试在 PHP 中创建一个应用程序，该应用程序使用 OAuth 从 Twitter 用户/查找 API 返回 json。我只会将其用作单个用户。我只需要对我的凭据进行身份验证。

有一些发布推文的好例子，但我想做的就是返回 json 以进行如下调用（使用不同的屏幕名称参数值）：

[https://api.twitter.com/1/users/lookup.json?screen_name=twitterapi](https://api.twitter.com/1/users/lookup.json?screen_name=twitterapi)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:01:35.830

您可以（并且应该）使用[Dev Twitter OAuth API](https://dev.twitter.com/docs/auth/tokens-devtwittercom)。建议在以下情况下：

> 您的应用程序只需要代表单个用户发出请求

# php - 如何在 PHP 中使用 jquery/javascript 替换为 preg_replace？

> ID：13794056
> 
> 赞同：1
> 
> 时间：2012-12-10T02:08:15.090
> 
> 标签：php, javascript, jquery

PHP 中的 preg_replace 函数提供了一个限制参数。例如，第一次出现的 medium 替换为 original，第二次出现的 medium 替换为“type”。

```
$path = "demo\/medium\/Web081112_P001_medium.jpg";
$path = preg_replace ("/medium/","original",$path,1);
$path = preg_replace ("/medium/","type",$path,2);
echo $path;
// output : demo\/original\/Web081112_P001_type.jpg 
```

那么，有没有什么方法可以使用 JQuery/JavaScript 来实现类似的功能呢？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:13:53.627

一般解决方案：

```
var n = 0;
"a a a a a".replace(/a/g, function(match) {
  n++;
  if (n == 2) return "c";
  if (n == 3 || n == 4) return "b";
  return match;
})
// => "a c b b a" 
```

另外，您误会了：第二次替换不会发生。限制2没有说“第二次出现”，它说“两次出现”；但是，在第一个之后，`preg_replace`您不再拥有两个媒体，因此第二个`preg_replace`最终替换了剩下的一个，然后沮丧地退出了。您可以使用两个单次（非全局）`replace`（或`preg_replace`）调用来执行相同的操作，而无需使用任何限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:10:20.987

> 有没有办法使用 jquery/javascript 来实现类似的功能？

使用 JavaScript 的原生[`replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).

默认情况下，`replace()`只会替换第一次出现 - 除非你设置了`g`修饰符。

### 例子：

```
path = "demo/medium/Web081112_P001_medium.jpg";
path = path.replace("/medium/", "original");
path = path.replace("medium", "type"); 
```

**注意：**您的代码与您的规范不符。我解决了你的规范。

# java - 如何在 Java 中的 CheckBoxMenuItems 上设置加速器快捷方式？

> ID：13794058
> 
> 赞同：2
> 
> 时间：2012-12-10T02:08:52.437
> 
> 标签：java, checkbox, keyboard-shortcuts, awt, menuitem

我正在用 Java 编写一个简单的绘图程序，我有一个 MenuBar（不是 JMenuBar）来选择要绘制的形状和颜色。我想设置键盘快捷键以在 Rectangle、Oval 和 Line 之间进行选择。我知道我可以将 MenuShortcut 用于 MenuItems，但这不适用于 CheckBoxMenuItems。任何线索我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:27:31.677

也许这需要一个[`JRadioButtonMenuItem`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JRadioButtonMenuItem.html)给定的用户将一次绘制一个元素（例如什么是椭圆形线？）。

`JRadioButtonMenuItem`有加速器。例如

![单选菜单演示](../Images/3e7672aa1861c71ba45c96272639cdc2.png)

```
import javax.swing.*;

public class RadioMenuDemo {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel();

                JMenuBar mb = new JMenuBar();
                JMenu shapes = new JMenu("Draw");
                mb.add(shapes);
                ButtonGroup bg = new ButtonGroup();
                shapes.setMnemonic('D');

                JRadioButtonMenuItem line = new JRadioButtonMenuItem("Line");
                line.setAccelerator(KeyStroke.getKeyStroke("L"));
                shapes.add(line);
                bg.add(line);

                JRadioButtonMenuItem oval = new JRadioButtonMenuItem("Oval");
                oval.setAccelerator(KeyStroke.getKeyStroke("O"));
                shapes.add(oval);
                bg.add(oval);

                JRadioButtonMenuItem rect = new JRadioButtonMenuItem("Rectangle");
                rect.setAccelerator(KeyStroke.getKeyStroke("R"));
                shapes.add(rect);
                bg.add(rect);

                JFrame f = new JFrame("Radio menu items");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                f.setJMenuBar(mb);
                f.pack();
                f.setLocationByPlatform(true);
                f.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

# jquery - 在翻转时替换响应式 div 背景并单击

> ID：13794061
> 
> 赞同：0
> 
> 时间：2012-12-10T02:09:26.497
> 
> 标签：jquery, html, css

我无法意识到如何编写需要动态背景的 div 背景。div 有一个特定的高度，但宽度是浏览器的大小。

我有一个具有默认重复所有背景图案的 div，但如果将按钮悬停或单击，则会发生变化。背景不会重复，所以我试图弄清楚如何根据浏览器大小（即 div 大小）让它们扩展/调整大小。

这是它的样子... 默认值：http: [//i.imgur.com/yMZEZ.png](http://i.imgur.com/yMZEZ.png)类别 1（悬停/按下）：http: [//i.imgur.com/OMhjT.png](http://i.imgur.com/OMhjT.png)

请注意默认是如何重复模式，而另一个是完整的 bg。

我的代码目前是：

```
$("#select_all").click(function(e) {
        $("#selected-game").removeClass('game_bg_minecraft').removeClass('game_bg_terraria').removeClass('game_bg_dayz');
     });
     $("#select_minecraft").click(function(e) {
        $("#selected-game").addClass('game_bg_minecraft').removeClass('game_bg_terraria').removeClass('game_bg_dayz');
     });
     $("#select_terraria").click(function(e) {
        $("#selected-game").addClass('game_bg_terraria');
     });
     $("#select_dayz").click(function(e) {
        $("#selected-game").addClass('game_bg_dayz');
     }); 
```

HTML 代码

```
<div id="selected-game">
<div class="row">
    <div class="ten columns">
    <h1>TopTitle</h1>
        <div>
        <h4>Selected Game Title</h4>
        </div>
    </div>
</div>
</div>
<div id="game-selection">   
    <div class="select_game">
        <button id="select_all" class="demo-change btn btn-info" style="display: inline-block;">Default</button>
        <button id="select_minecraft" class="demo-change btn btn-info" style="display: inline-block;">Category1</button>
        <button id="select_terraria" class="demo-change btn btn-info" style="display: inline-block;">Category2</button>
        <button id="select_dayz" class="demo-change btn btn-info" style="display: inline-block;">Category3</button>
    </div>
    <div class="game-options">
        More stuff here, yo!
    </div>
</div> 
```

但这里的问题是，对于我添加的每个新按钮，我都需要删除所有其他类，否则会有新背景不显示的风险。我也迷失了如何让一个背景重复，同时让另一个背景根据 div 的宽度动态调整大小。

我也不确定如何干净和优化地更改点击和悬停，同时将 js 代码保持在最低限度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:14:18.227

尝试使用`background-size:100%` 它是一个 css3 属性，它将根据它的容器调整背景图像的大小

[欲了解更多信息，请在此处查看](http://www.w3schools.com/cssref/css3_pr_background-size.asp)w3schools

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:23:03.567

我会制作重复但居中的一般背景课程：

```
.game-bg{
    background: url("default-bg.jpg) repeat center;
} 
```

只需更改背景属性：

```
$("#select_item1").click(function(e) {
    $("#selected-game").css('background-image', 'url("myimage.jpg")');
}); 
```

只要确保您使用的图像足够大，可以在大显示器上很好地显示。因为背景图像居中，所以它会在左侧和右侧扩展和裁剪。

另一种方法是查看 background-size 属性（但并非所有浏览器都支持）：

[http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

特别*是 auto*或*cover*。

跟进问题：

如果您使用 jQuery 再次删除 CSS，它应该转换回默认的 .game-bg 类背景：

```
$("#selected-game").css('background-image', ''); //leave the background empty 
```

但是，如果您点击其中一个项目......然后将鼠标悬停在其他项目上。它将恢复为默认背景，而不是“活动”项目。如果你也想要它变得有点复杂。然后，您应该为活动的项目添加一个活动类。在 mouseout 上查找具有活动类的项目，查找 ID 并根据 ID 应用正确的背景。我希望这有任何意义:-)

# php - 将 mySQL 插入和更新语句切换为 PDO 准备语句以防止 SQL 注入

> ID：13794062
> 
> 赞同：4
> 
> 时间：2012-12-10T02:09:53.133
> 
> 标签：php, mysql, pdo, prepared-statement, sql-injection

我正在尝试将这些 mySQl INSERT INTO 和 Update 语句切换为 PDO 准备语句（主要是为了防止 SQL 注入），但是我在正确使用语法时遇到了一些困难。

我目前正在使用 2 种类型的 INSERT/Update 语句：

*声明 1 - 名称是硬编码的*

```
$qry = "INSERT INTO customer_info(fname, lname, email, user_name, password)
VALUES('$_POST[fname]','$_POST[lname]','$_POST[email]','$user_name','".sha1($salt + $_POST['password'])."')"; 
$result = @mysql_query($qry) 
```

*语句 2 - 动态添加名称*

大多数名称是动态添加的，而不是列出每个元素的名称（名称被引用为 $fieldlist 或 $setlist，值是 $vallist）。唯一硬编码的名称/值是 user_id 或数组。我在下面包含了完整的代码。

```
$result = mysql_query('UPDATE fit_table  SET '.$setlist.' WHERE user_id='.$user_id);
if (mysql_affected_rows()==0) {
$result = mysql_query('INSERT INTO fit_table ('.$fieldlist.') VALUES ('.$vallist.')'); }; 
```

**这是我尝试过的：**

*声明 1 - 基于这篇文章[https://stackoverflow.com/a/60530/1056713](https://stackoverflow.com/a/60530/1056713)*

```
$stmt = $conn->prepare("INSERT INTO customer_info VALUES(:fname, :lname, :email, :user_name, :password)");
$stmt->bindValue(':fname', $fname);
$stmt->bindValue(':lname', $lname);
$stmt->bindValue(':email', $email);
$stmt->bindValue(':user_name', $user_name);
$stmt->bindValue(':password ', $password);
$stmt->execute(); 
```

*声明 2 - 基于此 PDO 包装器[https://github.com/Xeoncross/DByte/blob/master/DB.php](https://github.com/Xeoncross/DByte/blob/master/DB.php)（在这篇文章中引用[https://stackoverflow.com/a/12500462/1056713](https://stackoverflow.com/a/12500462/1056713)）*

```
static function insert($fit_table, array $fieldlist){
$query = "INSERT INTO`$fit_table`(`" . implode('`,`', array_keys('.$fieldlist.')). '`) 
VALUES(' . rtrim(str_repeat('?,', count($fieldlist = array_values('.$vallist.'))), ',') . ')';
return DB::$p
? DB::column($query . 'RETURNING` user_id `', $fieldlist)
: (DB::query($query, $fieldlist) ? static::$c->lastInsertId() : NULL);
} 
```

* * *

语句 2 的完整代码*（这是目前动态添加名称的方式）*

```
// INSERT    
$fieldlist=$vallist='';
foreach ($_POST as $key => $value) {
    if ($key=='pants_waistband'){$value= implode(',',$value);}        
    $fieldlist.=$key.',';
    $vallist.='\''.($value).'\',';
}
$fieldlist=substr($fieldlist, 0, -1);
$vallist=substr($vallist, 0, -1);
$fieldlist.=', user_id';
$vallist.=','.$user_id;
// UPDATE
$setlist='';
foreach ($_POST as $key => $value) {
    if ($key=='pants_waistband'){$value= implode(',',$value);}  
    $setlist.=$key .'=\''.$value.'\',';
}
$setlist=substr($setlist, 0, -1); 

$result = mysql_query('UPDATE fit_table SET '.$setlist.' WHERE user_id='.$user_id);
if (mysql_affected_rows()==0) {
$result = mysql_query('INSERT INTO fit_table ('.$fieldlist.') VALUES ('.$vallist.')');} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T20:08:18.160

看，白名单并不像看起来那么无聊！
动态查询很棒，没有理由放弃这个想法。
至少你可以让它成为*半动态的*，以避免所有这些重复。

PDO 有一件很棒的事情——它可以接受带有值的数组，从而不需要重复绑定。它可以很简单

```
$stmt = $conn->prepare('INSERT INTO customer_info VALUES(?,?,?,?,?)');
$stmt->execute($_POST); 
```

如果 $_POST 包含正确顺序的确切字段数，它将被执行。但是，一旦我们需要查询中的字段名称，它将失去所有自动化（如您自己的答案）或变得不安全（如您之前的动态代码中）。

好吧，让我们让它既安全又动态。
您唯一需要的是一个包含允许字段名称的数组，这将是我们的白名单。
然后你可以使用这个数组循环 $_POST，动态创建查询。
这是一个自动化过程的函数：
它需要三个参数，但实际上只使用一个

```
function pdoSet($fields, &$values, $source = array()) {
  $set = '';
  $values = array();
  if (!$source) $source = &$_POST;
  foreach ($fields as $field) {
    if (isset($source[$field])) {
      $set.="`$field`=:$field, ";
      $values[$field] = $source[$field];
    }
  }
  return substr($set, 0, -2); 
} 
```

它将返回看起来像的字符串

```
`field1`=?,`field2`=?,`field3`=? 
```

并将填充`$values`数组以供 PDO 查询使用。

请注意，Mysql 允许 INSERT 和 UPDATE 查询的 SET 语法 - 不需要 VALUES 语法。因此，两种功能都有一个功能。

对于插入，它就像

```
$fields = array("fname", "lname", "email", "user_name");
$stmt = $dbh->prepare("UPDATE users SET ".pdoSet($fields,$values));
$stmt->execute($values); 
```

对于任何数量的字段，它将保持相同的 3 行！

对于更新，它需要更长的代码。我们需要向查询添加一些条件，以及向 $values 数组添加另一个成员。

```
$fields = array("fname", "lname", "email", "user_name");
$stmt = $dbh->prepare("UPDATE users SET ".pdoSet($fields,$values)." WHERE id = :id");
$values["id"] = $_POST['id'];
$stmt->execute($values); 
```

剩下的唯一问题是如何添加尚未在 $_POST 数组中的自定义字段。
在准备之前，我只是直接将它们添加到那里：

```
$_POST['password'] = sha1($_POST['email'].$_POST['password']); 
```

希望这是你所要求的。

只需澄清一件事。
准备好的语句不足以阻止注入，您的案例就是一个很好的例子。它们只处理数据，但保护字段名称是您的负担。然而，您使用的旧 mysql 方式并没有错。您的代码只是缺少相同的白名单（当然还有正确的数据格式）。但如果添加，它将使您的 mysql 查询与 PDO 一样安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:02:10.543

我发现白名单名称比其他方法安全得多*（感谢包括@zerkms 在内的几个人的帮助）*，并想分享完成的声明。

它现在可以正常工作，并且包括使用 PDO 连接到数据库所需的方法。我还切换了语句中使用的 db 用户帐户，因为我了解到最好使用具有有限权限的帐户（只能 SELECT、INSERT 和 UPDATE）以最大程度地减少黑客可能造成的损害。

```
try { 
      $conn = new PDO('mysql:host=localhost;dbname=dbname', 'Username', 'MyPassword');
      $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

      $stmt = $conn->prepare('INSERT INTO customer_info (fname...) VALUES(:fname...)');
      $stmt->bindParam(':fname', $_POST['fname'], PDO::PARAM_STR);
      $stmt->execute();   
    } catch(PDOException $e) {
  echo $e->getMessage();
} 
```

# vb.net - VB.NET 解析文本文件

> ID：13794077
> 
> 赞同：0
> 
> 时间：2012-12-10T02:12:06.993
> 
> 标签：vb.net

我正在尝试解析文本文件的每一行，但它一直给我一个错误“System.IndexOutOfRangeException”。

“servers.lst”中的每一行都按以下顺序排列：

> 服务器名称|服务器主机|服务器端口|服务器 URL|客户端类型|客户端版本|客户端 URL

每行代表一个服务器。但我无法正确解析它。它要么返回完整文件、空白变量或错误。

这是我的代码：

```
Dim reader As String = My.Computer.FileSystem.ReadAllText("servers.lst")
    Dim s() As String
    Dim TotalServers As String = reader.Length
    Dim x As Integer = 0
    Dim myArray As String() = reader.Split("|"c)
    For x = 1 To TotalServers
        Servers(x).ServerName = myArray(0)
        Servers(x).ServerIP = myArray(1)
        Servers(x).ServerPort = myArray(2)
        Servers(x).ServerURL = myArray(3)
        Servers(x).Client = myArray(4)
        Servers(x).ClientVer = myArray(5)
        Servers(x).ClientURL = myArray(6)
        Form1.ListBox1.Items.Add(Servers(x).ServerName)
        x += 1
    Next 
```

我正在尝试返回每个服务器的名称，但我遇到了困难。

*编辑：这是我的结构代码：

```
Structure ServerData
    Public ServerName As String
    Public ServerPort As Long
    Public ServerURL As String
    Public ServerIP As String
    Public Client As String
    Public ClientVer As String
    Public ClientURL As String
End Structure
Public Servers As ServerData() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T02:18:21.607

这里`Length`是字符串长度（以字符为单位），而不是您期望的行数。此外，这`Dim TotalServers As String = reader.Length`没有多大意义。您可能希望使用具有预期服务器成员的类的通用列表。

因此，您应该逐行读取文件并处理每一行，创建服务器类的新实例，以便您可以像现在一样分配成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T03:35:24.743

这行代码看起来不对

```
Dim TotalServers As String = reader.Length 
```

首先，您应该根据新行拆分文件。然后，从基于每个新行的新创建的数组中，创建另一个数组，用“|”分割它 符号。

这是我的镜头。此代码未经测试。随便写，但我想你应该明白了。

```
Dim reader As String = My.Computer.FileSystem.ReadAllText("servers.lst")
Dim x As Integer = 0
Dim arg() As String = {vbCrLf, vbLf}
Dim newLineArr() As String
Dim myArray As String()
newLineArr = reader.Split(arg, StringSplitOptions.None)

For x = 0 To newLineArr.Length - 1

     myArray = newLineArr(x).Split("|"c)

     Servers(x).ServerName = myArray(0)
     Servers(x).ServerIP = myArray(1)
     Servers(x).ServerPort = myArray(2)
     Servers(x).ServerURL = myArray(3)
     Servers(x).Client = myArray(4)
     Servers(x).ClientVer = myArray(5)
     Servers(x).ClientURL = myArray(6)
     Form1.ListBox1.Items.Add(Servers(x).ServerName)

Next 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T02:15:15.753

您正在修改循环内 x 的值。这是循环构造为您处理的。删除线`x += 1`

您还有另一个代码问题，其中您在这一行中混合了数据类型。Length 调用将返回一个整数，虽然它可以隐式转换为字符串，但它效率低下并且可能导致长期混乱。正如 Lucero 的回答中所述，获取字符串的长度不会告诉您原始文件中有多少*行。*

```
' Avoid
' Dim TotalServers As String = reader.Length

' Better - data types are correct but value is wrong
' Dim TotalServers As Integer = reader.Length

' Accurate type and correct count
Dim TotalServers As Integer = (reader.Split(vbCrLf)).Length 
```

当我修改这个答案以讨论我看到的围绕您的迭代的进一步挑战时`reader`，我看到@sicKo 提供了一种更好、更 VB.NET 风格的方法。

## 显示我对 VB.NET 的无知（留下以防其他有 C# 意识的人阅读此内容）

另外，你的台词似乎有问题。精神上解析它，`c`应该会导致语法错误。

```
Dim myArray As String() = reader.Split("|"c) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T06:35:45.857

如果您无论如何要将整个列表读入内存，您也可以使用 IO.File.ReadAllLines，因为它会返回一个字符串数组：

```
Dim serverDataArray as String() = IO.File.ReadAllLines("servers.lst")
For each server As String In serverDataArray
    Dim serverData as String() = server.Split("|"c)
    Servers(x).ServerName = serverData(0)
    'etc
Next 
```

# c# - 骰子循环，如果 6 则再次掷骰

> ID：13794079
> 
> 赞同：0
> 
> 时间：2012-12-10T02:12:25.407
> 
> 标签：c#, loops, dice

C# 的新手很抱歉，如果这很愚蠢。

到目前为止，关于我的骰子，我有以下代码：

```
Random DiceRandom = new Random();
int DiceThrow = DiceRandom.Next(1, 7);
Console.WriteLine(DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 1 rolled a " + DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 2 rolled a " + DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 3 rolled a " + DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 4 rolled a " + DiceThrow);
Console.ReadLine(); 
```

现在，这会创建一个很好的数字并显示它，但是对于每个玩家来说它都是相同的数字。

我需要一个循环来为每个玩家重复滚动，如果玩家滚动 6，它将再次滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:17:11.607

怎么样：

```
for( int player = 1; player <= 4; player++ )
{
    while(1) {
        int DiceThrow = DiceRandom.Next(1, 7);
        Console.WriteLine( "Player " + player + " rolled a " + DiceThrow );
        if( DiceThrow < 6 ) break;
    }
    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:16:25.070

不是 100% 确定 readlines 等。但本质上，您每次打印时都会引用相同的掷骰子。您需要做的是每次生成一个新掷骰（通过 DiceRandom.Next(1,7)）。

```
Random DiceRandom = new Random();

for (int i = 1; i <= 4; i++) {
    var roll = DiceRandom.Next(1,7);
    Console.WriteLine("Player 1 rolled a " + roll);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:17:29.953

正如其他人指出的那样，问题在于`DiceThrow`每次使用时都不会刷新随机数。您可以在不使用循环的情况下解决此问题，但不要。您确实需要一个循环，并且可能看起来像这样：

```
for(int i = 1; i <= 4; i++) {
    DiceThrow = DiceRandom.Next(1,7);
    Console.WriteLine("Player " + i + " rolled a " + DiceThrow);
    Console.ReadLine();
    if(DiceThrow == 6) i--;
} 
```

The last line is a little obscure, but is there to provide the "reroll on 6" requirement. Since the loop increments `i` each time, decrementing it will effectively make the loop go around for the same player again.

EDIT: Actually, a more explicit version of this using a while loop instead would be as follows:

```
int i = 1;
while(i <= 4) {
    DiceThrow = DiceRandom.Next(1,7);
    Console.WriteLine("Player " + i + " rolled a " + DiceThrow);
    Console.ReadLine();
    if(DiceThrow != 6) i++;
} 
```

# vim - 类型在消息中间的错误格式

> ID：13794080
> 
> 赞同：2
> 
> 时间：2012-12-10T02:12:32.980
> 
> 标签：vim, errorformat

给定这样的 C# 编译器消息，当打开警告作为错误时：

```
File.cs(3,1415): error CS1572: Warning as Error: XML comment on 'FooLibrary.Foo.Foo()' has a param tag for 'foo', but there is no parameter by that name 
```

我希望将其`errorformat`标记为 type *warning*而不是 type *error*。

我已经有这样的价值观`errorformat`：

```
%f(%l\\,%c):\ %trror\ %m^M
%f(%l\\,%c):\ %trror\ %m 
```

（当你看到`^M`时，知道它是我文件中的实际控制代码，但它不能很好地传输到网络。这足以表明 C# 编译器输出`\r\n`而不仅仅是`\n`，这是一个轻微的麻烦。）

这是我第一次尝试的：

```
%f(%l\\,%c):\ error\ %m: %tarning\ as\ Error:\ %m^M
%f(%l\\,%c):\ error\ %m: %tarning\ as\ Error:\ %m 
```

Vim 哀叹它无法处理`%m`一个字符串中多次出现的 。

因此，我开始对不寻常的包含断言的正则表达式产生兴趣。这是我尝试过的：

```
%f(%l\\,%c):\ error\ %\\(%[A-Z0-9]%#:\ %tarning\ as\ Error:\ %[%^^M]%#%\\)%\\@=%m^M
%f(%l\\,%c):\ error\ %\\(%[A-Z0-9]%#:\ %tarning\ as\ Error:\ %[%^^M]%#%\\)%\\@=%m 
```

这没有用；它得到类型“C”（可能来自“CS1572”）和消息“W”（`%t`应该消耗的值）。（在其他一些实验中，省略了`%t`，证明有必要消耗断言中的其余字符串，否则它会`%m`在那时停止匹配。*非常*奇怪。）

意识到它并没有将它们视为正则表达式组，而是以一种特殊的线性方式，然后我尝试反转断言并得出以下结论：

```
%f(%l\\,%c):\ error\ %\\(%m^M%\\)%\\@=%[A-Z0-9]%#:\ %tarning\ as\ Error:\ %.%#^M
%f(%l\\,%c):\ error\ %\\(%m^M%\\)%\\@=%[A-Z0-9]%#:\ %tarning\ as\ Error:\ %.%# 
```

不幸的是，这些也失败了，得到类型“C”而不是“警告”，并且（尽管最终得到完整的消息）`^M`在字符串的末尾留下了。

`errorformat`我已经用尽了我在命令中能想到的可能性；还有什么其他方法可以解决这个问题，还是我需要求助于运行另一个脚本来包装它，这会将格式变成 Vim 可以处理的格式？

（所有这些都是为了在快速修复列表中获得“警告”而不是“错误”这个词。可悲，不是吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:05:26.173

如果你不满意

```
set efm=%f(%l\\,%c):\ error\ %[A-Z0-9]%#:\ %tarning\ as\ Error:\ %m 
```

这将删除错误号然后我可以建议你使用

```
set efm=%f(%l\\,%c):\ %m 
```

并使用后处理列表

```
function QFPostProc(location)
    let qflist=[]
    for entry in (a:location?getloclist(0):getqflist())
        " Using the fact that “%tarning” can match only warnings 
        " thus unconditionally setting type to 'W'

        " Replace 'W' with something like
        "     matchstr(entry.text, '\u\ze\a\+ as Error')
        " if this is not true.
        call add(qflist, extend(entry, {'type': 'W'}))
    endfor
    if a:location
        call setloclist(0, qflist, 'r')
    else
        call setqflist(qflist, 'r')
    endif
endfunction 
```

. 这应该被称为

```
:make | call QFPostProc(0) 
```

或者

```
:lmake | call QFPostProc(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:05:39.277

无法测试 ^M 的东西，但这适用于 linux 风格的行尾：

```
set efm=%f(%l\\,%c):%*[^:]:\ %t%*[^:]:%m 
```

并获取错误（警告）编号：

```
set efm=%f(%l\\,%c):\ error\ CS%n:\ %t%*[^:]:%m 
```

# android - Android 打印堆栈跟踪

> ID：13794082
> 
> 赞同：8
> 
> 时间：2012-12-10T02:12:50.343
> 
> 标签：android

如何在 android 中获得相当于 printStackTrace 的功能？我知道我可以通过将标签名称和字符串传递给日志记录方法来记录错误，但这只会给我一个空指针异常。如果我调用 e.printStackTrace()，这些数据会打印到哪里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T02:15:44.350

```
Log.e("mytag", "mymessage",ex); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T02:23:11.867

如果您使用的是 Eclipse，请确保您已`LogCat`打开窗口。你可以在下面找到它

**Window-> Show View-> Other -> Under Android -> LogCat**

*更新时间：2014 年 7 月*

或者，如果您使用的是 Android Studio，您可以在下面找到它

**窗口菜单 -> 显示视图 -> Logcat**

`LogCat`就像普通JAVA中的控制台。你`e.printstacktrace()`也会出现在 LogCat 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T02:15:12.863

数据仍使用 e.printStackTrace() 打印到 DDMS 日志；你也可以使用 Log.e("Tag", "Description", e); 这也将打印日志。DDMS 位于 android-sdk/tools/ddms 下，日志将在启动时显示在底部窗格中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T11:25:31.777

首先，如果您还没有，您应该将代码包装在一个`try-catch`结构中，例如：

```
private String TAG = "MyMethodName";  // change this to anything that makes sense to you       
try {
    ...
    Log.d(TAG, "processed OK");
} catch (Exception except) {
    Log.e(TAG,"CRASH StackTrace: "+ Arrays.toString(except.getStackTrace()));
} 
```

此伪代码将显示完整的堆栈跟踪。

新手提醒：在发布应用程序之前，不要忘记“注释掉”（使用`//`）这个和所有可能用于暴露代码内部的调试功能。插入运行您的代码并启用 ADB 的设备的任何人都将能够访问 LogCat（在哪里`Log`发布）。

# clearcase - cleartool 中 VOB 根目录外的目录列表

> ID：13794088
> 
> 赞同：1
> 
> 时间：2012-12-10T02:13:47.837
> 
> 标签：clearcase, cleartool

如果我在一个vob中（pwd命令显示正确的vob）并`lsvob <VOB_NAME>`返回一些关于vob的信息，我如何从根目录获取所有目录的列表？该`setview`命令也已运行。

当我这样做时`ls`，我得到：

```
Error: Pathname is not within a VOB: "." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:39:07.057

```
cd /vobs/myvob
cleartool ls
# or 
cleartool find . -type d -print 
```

第一个列出了视图中的所有元素。
另一个列出所有目录。

* * *

[OP 泡沫堆](https://stackoverflow.com/users/1312080/foampile)提到：

> `cleartool mount /vob/<MY_VOB>`
> 我试过了，但得到了：

```
Mounting MVFS filesystem /vob/<MY_VOB>.... mount: Device busy 
```

IBM 页面“ [mount: Device busy](http://www-01.ibm.com/support/docview.wss?uid=swg21150408) ”可以提供帮助。

只要：

```
ct startview myDynamicView
ct setview myDynamicView
ct mount /vobs/MyVob
cd /vobs/MyVob
ct pwv 
```

给出：

```
Working directory view: ** NONE ** 
Set view: <MY_VIEW_ID> 
```

这不好，并且会指向错误的配置规范，正如 IBM 技术说明“ [访问 ClearCase VOB 的根文件夹产生” `No such file or directory`“](http://www-01.ibm.com/support/docview.wss?uid=swg21616739) ”所示。

# c++ - Unsigned Long Long 超出范围？

> ID：13794091
> 
> 赞同：9
> 
> 时间：2012-12-10T02:13:53.910
> 
> 标签：c++, objective-c, c, 64-bit, long-integer

好的，这是一个奇怪的问题：

*   我正在使用`unsigned long long`变量（我甚至使用过变量`long`，效果相同）
*   我*需要*能够存储 64 位整数（`sizeof`返回 8，这很好）

但是，当我尝试使用类似的值`1<<63`并执行一些简单的按位运算时，奇怪的是，我似乎得到了负值。为什么？

**我的测试代码：**

```
 unsigned long long c = 0;

    c |= 1l << 56; printf("c = %lld\n",c);
    c |= 1l << 63; printf("c = %lld\n",c); 
```

**输出 ：**

```
c = 72057594037927936 
c = -9151314442816847872 
```

* * *

***旁注：***

1.  当然，即使我`c = 1l<<63`直接做也会发生同样的事情。
2.  所有测试均在 Mac OS X 10.6 上进行，并使用 Apple 的 LLVM Compiler 3.0 编译

* * *

有什么建议么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T02:16:30.560

说明符的`d`一部分`%lld`是告诉`printf`参数应该被视为有符号整数。使用 a`u`代替：`%llu`.

从手册页：

> **d, 我**
> 
> > int 参数转换为有*符号*十进制表示法。
> 
> **o, 你, x, X**
> 
> > unsigned int 参数转换为 *无符号* 八进制 (o)、*无符号* 十进制 (u) 或*无符号*十六进制（x 和 X）表示法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T02:40:28.597

我认为你实际上在这里做了一些未定义的事情。我认为该表达式`1l << 63` 在 C 中是未定义的，因为编译器将以`1l`有符号类型表示，并且移位 63 位会导致有符号溢出（在 C 中未定义）。我不是专家，但似乎你想要`1ull << 63`。

`-Weverything`事实上，如果你传入clang ，你的原始代码会抱怨这个：

```
foo.c:7:23: warning: signed shift result (0x8000000000000000) sets the sign bit of the
            shift expression's type ('long') and becomes negative [-Wshift-sign-overflow]
      c |= 1l << 63; printf("c = %lld\n",c);
           ~~ ^  ~~ 
```

编辑：而且，是的，那么您需要另一个答案中正确的 printf 格式。

# c - 将 UDP 数据包识别为不同的连接

> ID：13794092
> 
> 赞同：1
> 
> 时间：2012-12-10T02:14:16.233
> 
> 标签：c, sockets, networking, udp, ip

对于我的下一个自虐业余项目，我正在尝试使用 UDP 隧道实现一个基本的匿名协议，其他流量可以通过该隧道流动。我想使用 UDP，因为它提供高吞吐量并防止 TCP over TCP 可能发生的超时崩溃。

匿名网络中的每个用户都成为一个节点，并成为其他用户隧道的一部分。每个节点必须能够处理多个隧道，从而将传入和传出的数据包识别为属于特定隧道。

**确定数据包属于哪个隧道而不需要查看实际数据包数据的最佳方法是什么（如果可能，只需查看标头或连接）？是否有面向连接的 UDP 版本？**

我对 UDP 的理解是这样的——它是无连接的，数据包头只是说明源/目标地址和源是什么。

我可以想出几种方法来利用这些信息：

1.  欺骗数据包的源端口以保存与 IP 地址关联的 16 位连接 ID（因此在每台机器上，连接表是源或目标 IP + 连接 ID 的串联。这需要使用原始套接字并可能更少在系统之间可移植。我不知道构建 UDP 数据包并在另一端检查它们的开销是多少。
2.  使用 UDP 数据包上的源端口作为唯一的连接 ID，但端口字段是 16 位的，因此这对于全局 ID 来说并不实用。我希望能够让应用程序能够使用任意端口，并且只需要一个端口。
3.  使用建立在 UDP 之上的像 UDT 这样的协议——它仍然很快（据说是 UDP 速度的 1/4-1/3），检查可靠性，拥塞控制，并且有连接。虽然看起来很复杂，但我宁愿不必依赖专有（如果开源）库。最终，我需要在此基础上进行流加密，这样速度会更慢。

(1) 如果它增加了最小的开销，它似乎更可取。除了将数据包识别为给定隧道的一部分之外，我真的更喜欢仅使用单个任意端口，并且在 UDP 之上没有任何额外的东西。

编辑：减少开销的一种可能性是侦听 UDP 套接字并通过原始套接字发送，但这并不能解决主要问题。

EDIT2： Skype 或其他集中路由的流媒体服务如何工作？他们使用自己的协议吗？

EDIT3：关于 Xaxxon 的回答，我计划将匿名网络暴露给具有 tun 接口的用户空间程序。这将允许我在系统上运行任何我想要的流量——ssh、ftp 等。我不想弄乱与这些更高层协议相对应的数据包头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:39:27.660

数据包的来源是可用的，并且在它来自特定计算机时将是一致的。如果您需要更多，只需在第 7 层标头中包含其他数据。除了查看 IP/UDP 标头之外，查看数据包的前几个字节没有额外的开销。如果你把它带出内核空间，你已经付出了代价。

# jquery - jquery animate 没有为所有内容设置动画

> ID：13794098
> 
> 赞同：0
> 
> 时间：2012-12-10T02:14:48.913
> 
> 标签：jquery

这是我的html

```
<article itemscope itemtype="http://schema.org/Service" class="service" id="service-{entry_id}" style="display: none;">
<div id="wrap1">
    <div class="inner">
        <!-- image in here -->
        <h1 itemprop="name">{title}</h1>
    </div>
</div>
<div id="wrap2">
    <div class="inner">
        <p itemprop="description">{description}</p>
        <a class="enquire-button" href="mailto:http://www.test.com?subject={title}">enquire about this product</a>
    </div>
</div> 
```

这是我的 js

```
 $('#' + id).animate({
            height: 'toggle'
        },
        duration,
        function() {
        }
    ); // end animate 
```

我没有让图像动画化。突然间，它就跃入了视野。如何让整篇文章包括动画内容？

# mysql - 在 mysql 中设置 INDEX 以便更好地搜索

> ID：13794101
> 
> 赞同：0
> 
> 时间：2012-12-10T02:15:06.533
> 
> 标签：mysql, indexing

假设我有这个示例表：

```
CREATE  TABLE `users` (
   `id` INT NOT NULL AUTO_INCREMENT ,
   `name` VARCHAR(512) NULL ,
   `lastname` VARCHAR(512) NULL ,
   `country` VARCHAR(256) NULL ,
   `tags` VARCHAR(512) NULL ,
PRIMARY KEY (`id`) ); 
```

基本上“标签”列只是为用户设置的关键词

现在我想做的是能够**根据名称和标签**搜索用户 为了快速搜索，我必须在**“名称”**和**“标签”上创建一个索引**

所以要创建索引我应该这样做：

```
ALTER TABLE `vidhucr1_serverlist`.`new_table` 
ADD INDEX `INDEX` (`name` ASC, `tags` ASC) ; 
```

或者

```
ALTER TABLE `vidhucr1_serverlist`.`new_table` 
ADD INDEX `INDEX1` (`name` ASC) 
, ADD INDEX `INDEX2` (`tags` ASC) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:20:59.603

只要`name, tags`您的查询过滤器`names`和`tags`. 如果您的查询应该省略`tags`，则索引将无用（示例 1 下的最后一条语句）。`tags`另外，我希望您在该领域没有多个“标签” 。

**示例 1 - 综合指数**

索引：`INDEX (name, tags)`

索引将用于`SELECT ... WHERE name = '...' AND tags = '...'` *或* `SELECT ... WHERE tags = '...' AND name = '...'`

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------- ----
| 1 | 简单 | 用户 | 参考 | 索引 | 索引 | 第1536章 常量，常量 | 1 | 使用位置 |
```

索引将用于`SELECT ... WHERE name = '...'`

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- ------------------------------------------------
| 1 | 简单 | 用户 | 参考 | 索引 | 索引 | 第768章 常量 | 1 | 使用位置 |
```

**没有**使用索引`SELECT ... WHERE tags = '...'`

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- --------------------------------------------------
| 1 | 简单 | 用户 | 全部 | (空) | (空) | (空) | (空) | 1 | 使用位置 |
```

**示例 2 - 两个单一索引**

索引：`INDEX1 (name)`,`INDEX2 (tags)`

两个索引都用于`SELECT ... WHERE name = '...' AND tags = '...'`

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------
| 1 | 简单 | 用户 | 参考 | 索引1,索引2 | 索引1 | 第768章 常量 | 1 | 使用位置 |
```

`INDEX1`用于`SELECT ... WHERE tags = '...'`

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------
| 1 | 简单 | 用户 | 参考 | 索引1 | 索引1 | 第768章 常量 | 1 | 使用位置 |
```

`INDEX2`用于`SELECT ... WHERE name = '...'`

```
| 身份证 | 选择类型 | 表 | 类型 | 可能键 | 关键 | KEY_LEN | 参考 | 行 | 额外 |
-------------------------------------------------- -------------------------------------------------
| 1 | 简单 | 用户 | 参考 | 索引2 | 索引2 | 第768章 常量 | 1 | 使用位置 |
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:20:27.890

首先，它将是第一个同时创建名称和标签索引的定义。

其次，我怀疑这是否会改善搜索，因为标签似乎包含带有一些分隔符/分隔符的多个值，并且如果它被规范化为一个单独的表，并且在和`user_tags`之间具有一对多关系，那么在列上创建索引将帮助。那么表中的索引将只是在列上。`users``user_tags``(user_id, tag)``users``name`

# cuda - CUDA：我怎样才能使这段代码并行？

> ID：13794112
> 
> 赞同：2
> 
> 时间：2012-12-10T02:16:26.230
> 
> 标签：cuda, parallel-processing, reduction

我正在努力使代码并行运行（CUDA）。简化后的代码是：

```
float sum = ...         //sum = some number
for (i = 0; i < N; i++){
    f = ...             // f = a function that returns a float and puts it into f
    sum += f;
} 
```

我遇到的问题是`sum+=f`因为它需要`sum`在线程之间共享。`__shared__`我在声明 sum ( ) 时尝试使用该参数`__shared__ float sum`，但这不起作用（它没有给我正确的结果）。我也听说过减少（并且知道如何在 OpenMP 上使用它），但不知道如何在此处应用它。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T06:13:10.183

这是代码：

```
#include <stdio.h>
__global__ void para(float* f, int len) {
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    if (i < len ){
        // calculate f[i], f in iteration ith
        f[i] = i;
    }
}

int main(int argc, char ** argv) {
    int inputLength=1024;
    float * h_f;
    float * d_f;
    int size = inputLength*sizeof(float);

    h_f = (float *) malloc(size);
    cudaMalloc((void**)&d_f , size);
    cudaMemcpy(d_f, h_f, size, cudaMemcpyHostToDevice);

    dim3 DimGrid((inputLength)/256 +1 , 1 , 1);
    dim3 DimBlock(256 , 1, 1);

    para<<<DimGrid , DimBlock>>>(d_f , inputLength);
    cudaThreadSynchronize();

    cudaMemcpy(h_f, d_f, size , cudaMemcpyDeviceToHost);

    cudaFree(d_f);

    // do parallel reduction
    int i;
    float sum=0;
    for(i=0; i<inputLength; i++)
        sum+=h_f[i];

    printf("%6.4f\n",sum);

    free(h_f);

    return 0;
} 
```

并行归约部分可以替换为工作 CUDA 并行求和归约（例如[这个](https://stackoverflow.com/questions/8176488/sum-reduction-with-cuda-what-is-n)）。很快我会花时间改变它。

**编辑：**

以下是使用 CUDA 执行并行归约的代码：

```
#include <stdio.h>
__global__ void para(float* f, int len) {
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    if (i < len ){
        // calculate f[i], f in iteration ith
        f[i] = i;
    }
}
__global__ void strideSum(float *f, int len, int strid){
    int i = threadIdx.x + blockDim.x * blockIdx.x;
    if(i+strid<len){
        f[i]=f[i]+f[i+strid];
    }
}

#define BLOCKSIZE 256
int main(int argc, char ** argv) {
    int inputLength=4096;
    float * h_f;
    float * d_f;
    int size = inputLength*sizeof(float);

    h_f = (float *) malloc(size);
    cudaMalloc((void**)&d_f , size);
    cudaMemcpy(d_f, h_f, size, cudaMemcpyHostToDevice);

    dim3 DimGrid((inputLength)/BLOCKSIZE +1 , 1 , 1);
    dim3 DimBlock(BLOCKSIZE , 1, 1);

    para<<<DimGrid , DimBlock>>>(d_f , inputLength);
    cudaThreadSynchronize();

    int i;
    float sum=0, d_sum=0;
    // serial sum on host. YOU CAN SAFELY COMMENT FOLLOWING COPY AND LOOP. intended for sum validity check.
    cudaMemcpy(h_f, d_f, size , cudaMemcpyDeviceToHost);
    for(i=0; i<inputLength; i++)
        sum+=h_f[i];

    // parallel reduction on gpu
    for(i=inputLength; i>1; i=i/2){
        strideSum<<<((i/BLOCKSIZE)+1),BLOCKSIZE>>>(d_f,i,i/2);
        cudaThreadSynchronize();
    }
    cudaMemcpy(&d_sum, d_f, 1*sizeof(float) , cudaMemcpyDeviceToHost);

    printf("Host -> %6.4f, Device -> %6.4f\n",sum,d_sum);

    cudaFree(d_f);
    free(h_f);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:19:18.593

您想要的是将数字范围映射到线程，让每个线程添加其范围，然后进行缩减阶段。减少将是添加每个线程的总数。

# c# - 如何扩展对象列表以根据列表中的位置自动更新属性

> ID：13794118
> 
> 赞同：1
> 
> 时间：2012-12-10T02:17:28.593
> 
> 标签：c#, asp.net

假设我有这样的 Car 类：

```
class car 
{
string model;
int position;
} 
```

position 是一个从 1 到 n 的数字，基本反映了在列表中的位置。如果我在列表中有两辆车，它们的位置将是 1 2。现在，我想在 UI 的列表中重新排序这些汽车，并反映属性中的更改以供以后使用。
所以我有一个有几行的表：

```
Car1  1  
Car2  2     
Car3  3   
Car4  4 
```

现在，如果我想重新排序项目，我可以拖动 Car4 并将其放置在位置 2（就在 Car1 之后）。
所以，我的职位如下：

```
Car1  1  
Car4  2     
Car2  3   
Car3  4 
```

所以，我想要做的是更新列表中的一项，而其他所有项目都会自动更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:26:22.733

在这种情况下，最好的方法是根本不*存储*位置，而是*隐含*它。保留`model`属性，并删除`position`. 每当您需要位置或与其位置配对的所有元素的列表时，您可以使用`Select`采用索引的 LINQ 重载：

```
var carsWithIndex = carList.Select((car, index) => new {
    Car = car
,   Index = index
}).ToList(); 
```

现在您有一个具有两个属性的对象列表：

*   `Car`-`car`列表的元素，以及
*   `Index``car`- 中对应的索引`carList`。

可以随意对元素重新排序`carList`；每次重新订购时，隐含索引都会发生变化。每次需要索引时，运行上面的 LINQ 表达式以将每个表达式`car`与其新索引配对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:29:40.820

我猜是这样的：

```
BindingList<car> list = new BindingList<car>();
list.ListChanged += new ListChangedEventHandler(list_ListChanged);

void list_ListChanged(object sender, ListChangedEventArgs e)
        {
            list[e.OldIndex].position = e.NewIndex;
            for (int i = e.NewIndex; i < list.Count; i++)
            {
                list[i].position = i+1;
            }
        } 
```

# slider - Egor Khmelev 滑块在 FF 中效果很好，而不是在 Chrome 或 IE 中

> ID：13794123
> 
> 赞同：0
> 
> 时间：2012-12-10T02:18:39.237
> 
> 标签：slider, jslider

这是html

```
<span class='sliderholder'>
<input class='dosetup' type='text' id='headletterspace' name='headletterspace' value="1"></input></span> 
```

如果我在 document.ready 中初始化

```
$('#headletterspace').slider({ 
    from: 0,
    to: 30,
    dimension: 'px',
    step: 1,
    onstatechange: function(value) {
        webSetup();
    }
}); 
```

它在 FF 中运行良好，但在 Chrome 和 IE9 中它显示的滑块没有任何功能。如果我取出该初始化，请保留相同的 html，并仅在使用 ajax 调用后进行初始化

```
$("#headletterspace").slider("value", data[i].WebData); 
```

它适用于所有 3 个浏览器，但没有正确的 from-to、format 和 onstatechange 功能。

将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:22:26.697

好的，找到了解决方案。如果我将初始化代码从 document.ready 函数中取出，并将其放在数据行上方 .ajax 调用的回调中，那么在所有三个浏览器中都可以正常工作，假设在页面被调用时调用 .ajax 函数加载。此代码在成功回调中。

```
if (data[i].WebItem=='headletterspace') {
    $('#headletterspace').slider({ 
        from: 0,
        to: 30,
        dimension: 'px',
        step: 1,
        onstatechange: function(value) {
            webSetup();
        }
    });
    $("#headletterspace").slider("value", data[i].WebData);
} 
```

# android - Google Play 开发者更改本国货币

> ID：13794127
> 
> 赞同：26
> 
> 时间：2012-12-10T02:20:05.350
> 
> 标签：android, google-play, currency

有谁知道如何在 Google Play Dev 中更改本国货币？我们的客户在 Google Play 上创建了一个帐户，并且使用他的本国货币（不是 $）。但现在，他希望将价格以美元而非本国货币为基础，以便不同国家/地区的其他价格将基于美元价格。

这可以在开发者控制台的设置或其他地方完成吗？我会感谢你在这方面的帮助。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-17T21:25:22.277

要更改您的银行帐户详细信息**以使用不同的货币，您需要**使用不同的电子邮件地址创建一个新的 Google Play 开发者帐户。创建新的 Google Play 开发者帐户后，Google 的支持团队可以帮助您将现有应用转移到新帐户。您的应用的现有统计信息（包括安装数量、评分和评论）将随您的应用一起传输。

参考： https: [//support.google.com/googleplay/android-developer/answer/6140453](https://support.google.com/googleplay/android-developer/answer/6140453)

# c - 带有连接文件描述符的 pthread 竞争条件

> ID：13794129
> 
> 赞同：3
> 
> 时间：2012-12-10T02:20:18.937
> 
> 标签：c, sockets, pthreads

我正在为学校作业实现一个简单的多线程 Web 服务器，并且遇到了一些与用于每个连接的连接文件描述符的同步问题。我最初的问题是一个线程有时会关闭文件描述符（conn_fd），因为文件描述符也在另一个线程中使用。当其他线程尝试 send() 或 recv() 时，这将导致错误的文件描述符错误。

我的解决方法是存储每个文件描述符是否高达 1000（我知道任意数字和容易出错）当前是否打开。如果 accept() 返回的文件描述符已经打开，我的程序调用 fcntl(conn_fd, F_DUPFD, 0); 创建一个重复的文件描述符，以便一个线程不会无意中关闭另一个线程需要使用的连接。我的程序似乎比我开始跟踪打开的文件描述符之前运行得更好，但我仍然有一些同步问题，我不知道如何解决。每个线程的启动路由中的 conn_fd，process_connection_request() 似乎被破坏了。

我在对我的服务器运行 Siege 时尝试使用 Helgrind 来隔离问题。不幸的是，我的代码在 Helgrind 下运行时从未崩溃。它确实表明 conn_fd 存在潜在的竞争条件，但我认为将我在 main() 和 process_connection_request() 中的互斥体包装起来可以解决这个问题。我以前从未开发过任何多线程或套接字程序，我怀疑我缺少一些简单的东西。非常感谢有关如何解决发送和接收时文件描述符错误的问题的任何见解和建议。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <fcntl.h>
#include <time.h>
#include <signal.h>
#include <pthread.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define SERVER_PORT 50040
#define MAX_LISTEN_BACKLOG 1024
#define MAX_FILENAME_LENGTH 255
#define REQUEST_BUFF_SIZE 8192
#define THREAD_POOL_SIZE 16

// function prototypes
int int_len(int i);
void *process_connection_request(void *conn_fd);
void sig_handler(int sig);

pthread_t thread;
pthread_attr_t thread_attr;
pthread_mutex_t conn_fd_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t stats_mutex = PTHREAD_MUTEX_INITIALIZER;

int sock_fd;
int conn_fds_open[1000];

int main(void)
{
    struct sockaddr_in server_addr;
    struct sockaddr_in client_addr;
    int conn_fd;
    int client_len = sizeof(client_addr);

    if((sock_fd = socket(PF_INET, SOCK_STREAM, 0)) < 0)
    {
        perror("socket() Failed");
        exit(EXIT_FAILURE);     
    }

    // set socket options so that we can reuse the socket
    const int sock_opt_val = 1;
    const socklen_t sock_opt_len = sizeof(sock_opt_val);
    setsockopt(sock_fd, SOL_SOCKET, SO_REUSEADDR, (void *) &sock_opt_val, sock_opt_len);

    memset(&conn_fds_open, 0, 1000 * sizeof(int));
    memset(&server_addr.sin_zero, 0, sizeof(server_addr.sin_zero));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(SERVER_PORT);
    server_addr.sin_addr.s_addr = INADDR_ANY;

    if(bind(sock_fd, (struct sockaddr *)&server_addr, sizeof(server_addr)) < 0)
    {
        perror("bind() Failed");
        close(sock_fd);
        exit(EXIT_FAILURE);         
    }

    if(listen(sock_fd, MAX_LISTEN_BACKLOG) < 0)
    {
        perror("listen() Failed");
        close(sock_fd);
        exit(EXIT_FAILURE);     
    }

    if(pthread_attr_init(&thread_attr) != 0)
    {
        perror("pthread_attr_init Failed");
        close(sock_fd);
        exit(EXIT_FAILURE);         
    }

    if(pthread_attr_setdetachstate(&thread_attr, PTHREAD_CREATE_DETACHED) != 0)
    {
        perror("pthread_attr_setdetachstate Failed");
        close(sock_fd);
        exit(EXIT_FAILURE);     
    }

    signal(SIGINT, sig_handler);
    printf("sock_fd %d\n", sock_fd);

    while(1)
    {
        if((conn_fd = accept(sock_fd, (struct sockaddr *)&client_addr, &client_len)) < 0)
        {
            perror("accept() Failed");
            close(sock_fd);
            exit(EXIT_FAILURE);     
        }

        pthread_mutex_lock(&conn_fd_mutex);
        if(conn_fds_open[conn_fd] == 1)
        {
            conn_fd = fcntl(conn_fd, F_DUPFD, 0);
        }

        conn_fds_open[conn_fd] = 1;
        printf("main fd: %d\n", conn_fd);
        pthread_mutex_unlock(&conn_fd_mutex);
        pthread_create(&thread, &thread_attr, process_connection_request, (void *)&conn_fd);
    }
}

int int_len(int i)
{
    return (i == 0) ? 1 : floor(log10(abs(i))) + 1;
}

void *process_connection_request(void *conn_fd_ptr)
{
    FILE *requested_file = NULL;
    FILE *stats_file = NULL;
    char *request_buff;
    char *response_buff;
    char *file_buff;
    char *stats_buff;
    char *filename_start;
    char *filename_stop;
    char requested_filename[MAX_FILENAME_LENGTH];
    int conn_fd = *(int *)conn_fd_ptr;
    int requested_file_size;
    int response_buff_size;
    int stats_buff_size;
    int amt_sent = 0;
    int response_code;
    time_t now;
    char time_buff[30];
    time(&now);
    strftime(time_buff, 30, "%a, %d %b %Y %X GMT", gmtime(&now));

    printf("thread fd: %d\n", conn_fd);

    if((request_buff = calloc(REQUEST_BUFF_SIZE, sizeof(char))) == NULL)
    {
        perror("Calloc Failed");
        close(conn_fd);
        close(sock_fd);
        exit(EXIT_FAILURE);     
    }

    if(recv(conn_fd, (void *)request_buff, REQUEST_BUFF_SIZE, 0) < 0)
    {
        perror("recv() Failed");
        close(conn_fd);
        close(sock_fd);
        exit(EXIT_FAILURE); 
    }

    // extract the filename from the request header
    filename_start = &request_buff[5];
    filename_stop = strstr(request_buff, " HTTP");

    if((strncmp(request_buff, "GET /", 5) != 0) || (filename_stop == NULL))
    {
        perror("Invalid Request");
        close(conn_fd);
        close(sock_fd);
        exit(EXIT_FAILURE);         
    }

    strncpy(requested_filename, &request_buff[5], filename_stop - filename_start);
    free(request_buff);
    requested_filename[filename_stop - filename_start] = '\0';

    if((requested_file = fopen(requested_filename, "r")) != NULL)
    {
        response_code = 200;
        fseek(requested_file, 0, SEEK_END);
        requested_file_size = ftell(requested_file);
        fseek(requested_file, 0, SEEK_SET);
        file_buff = calloc(requested_file_size + 1, sizeof(char));
        response_buff = calloc((83 + strlen(time_buff) + int_len(requested_file_size) + requested_file_size), sizeof(char));

        if(file_buff == NULL || response_buff == NULL)
        {
            perror("Calloc Failed");
            close(conn_fd);
            close(sock_fd);
            exit(EXIT_FAILURE);             
        }

        fread(file_buff, 1, requested_file_size, requested_file);
        response_buff_size = sprintf(response_buff, "HTTP/1.1 200 OK\nDATE: %s\nContent-Length: %d\nConnection: close\nContent-Type: text/html\n\n%s", time_buff, requested_file_size, file_buff);
        free(file_buff);
        fclose(requested_file);     
    }
    else
    {
        response_code = 404;
        response_buff = malloc(25 * sizeof(char));
        strcpy(response_buff, "HTTP/1.1 404 Not Found\n\n");
        response_buff_size = 25;
    }

    while(amt_sent < response_buff_size)
    {
        int ret = send(conn_fd, response_buff + amt_sent, response_buff_size - amt_sent, 0);
        if (ret < 0)
        {
            perror("send() Failed.");
            close(conn_fd);
            close(sock_fd);
            exit(EXIT_FAILURE); 
        }
        amt_sent += ret;        
    }

    free(response_buff);
    pthread_mutex_lock(&conn_fd_mutex);
    conn_fds_open[conn_fd] = 0;
    close(conn_fd);
    pthread_mutex_unlock(&conn_fd_mutex);

    // yield to any other connection threads before writing to the stats file
    pthread_yield();    

    pthread_mutex_lock(&stats_mutex);
    if((stats_file = fopen("stats.txt", "a")) != NULL)
    {
        if((stats_buff = malloc((strlen(time_buff) + 51 + strlen(requested_filename)) * sizeof(char))) != NULL)
        {
            stats_buff_size = sprintf(stats_buff, "Date - %s | Response Code - %d | Requested File - %s\n", time_buff, response_code, requested_filename);
            fwrite(stats_buff, stats_buff_size, 1, stats_file);
            free(stats_buff);
        }

        fclose(stats_file);
    }
    pthread_mutex_unlock(&stats_mutex);
}

void sig_handler(int sig)
{
    close(sock_fd);
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T07:53:57.120

由于返回的套接字（文件）描述符`accept()`通过引用传递给线程函数，可能会发生争用情况。

然后它被异步分配给套接字（文件）描述符的线程函数特定副本。后者可能发生**在**引用的套接字（文件）描述符的值由于**下一次**调用而发生更改之后`accept()`。

要改变这个

*   要么滥用作为整数传递给线程函数的 void 指针（不推荐）
*   或动态创建 an 的实例`int`以将`accept()`调用结果分配给。

* * *

此外（由*Nemo*评论）`accept()`总是返回一个新的套接字。

# visual-c++ - Visual Studio：如何以编程方式检查使用的 C++ 平台工具集

> ID：13794130
> 
> 赞同：15
> 
> 时间：2012-12-10T02:20:23.700
> 
> 标签：visual-c++, preprocessor, multiplatform

我必须使用 MSVC2012 和 v100 平台工具集（来自 MSVC2010）构建项目。不幸的是，我在代码中使用了 C++11 特性“*基于范围*”。我想知道是否有一个预处理器指令允许在编译时了解当前平台工具集。IE

```
#if (_MSC_PLATFORM_TOOLSET > 100)
#   define ALLOW_RANGE_BASED_FOR 1
#else
#   define ALLOW_RANGE_BASED_FOR 0
#endif 
```

我尝试使用**_MSC_VER**宏，但对于两个平台工具集，它都设置为 1700（这确实有意义，因为我仍在使用 MSVC2012）。我很感激任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T09:14:47.270

I encountered the same problem and added my own preprocessor definition for `_MSC_PLATFORM_TOOLSET`.
In the project properties in

*   *C/C++*
*   *Preprocessor*
*   *Preprocessor Definitions*

add **_MSC_PLATFORM_TOOLSET=$(PlatformToolsetVersion)** to make Visual Studio integrate the current Toolset's version to the preprocessor so that your query

```
#if (_MSC_PLATFORM_TOOLSET > 100)
...
#endif 
```

will finally work.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-29T19:23:59.043

每个平台工具集的宏`_MSC_FULL_VER`都不同；和 Visual Studio 的版本。对于（当前）Visual Studio 2013 预览版，它是`180020617`. 对于带有 2012 年 11 月编译器 CTP（提供了一些 C++11）的 Visual Studio 2012，它是`170060315`. 像 一样`_MSC_VER`，每个版本的 Visual Studio 的前 4 位数字都是相同的；对于 Visual Studio 2012，它们始终是`1700`. 这是一个例子：

```
#ifdef _MSC_FULL_VER
  #if   _MSC_FULL_VER == 170060315
  // MSVS 2012; Platform Toolset v110
  #elif _MSC_FULL_VER == 170051025
  // MSVS 2012; Platform Toolset v120_CTP_Nov2012
  #elif _MSC_FULL_VER == 180020617
  // MSVS 2013; Platform Toolset v120
  #endif
#endif // _MSC_FULL_VER 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-08T04:53:45.327

在使用 Visual Studio 开发 C 或 C++ 时，我实际上需要知道两个版本号。这些是 Visual Studio 主要版本号和“cl”编译器主要/次要版本。

Visual Studio 版本号显示在“关于”对话框中。例如，对于 VS2012，我看到“版本 11.0.60610.01”，所以主版本号是“11”。

[bakefile](http://bakefile.org/)或[CMake](https://cmake.org/)等构建工具将创建针对 Visual Studio 主要版本的解决方案文件。

编译器“主要/次要”版本是 _MSC_VER 宏的值。这是一个小程序，它会显示这个：

```
#include <stdio.h>
/*
 * Compile and run this on a Visual Studio platform to get
 * the version identifier.
 */
#define PRINT_INT_MACRO(m) (printf("%s: \"%d\"\n", #m, m))

int
main() {
    PRINT_INT_MACRO(_MSC_VER);
      return 0;
} 
```

正如评论所说，您必须使用要测试的编译器实际编译它。为了省去你的麻烦，这里有一张小表：

```
名称版本_MSC_VER
对比 6 6.0 1200
对比 2002 7.0 1300
对比 2003 年 7.1 1310
与 2005 年相比 8.0 1400
与 2008 年相比 9.0 1500
对比 2010 10.0 1600
对比 2012 年 11.0 1700
对比 2013 年 12.0 1800
对比 2015 年 13.0 1900

```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-06T13:51:58.337

我不知道他们是否在 VS2015 中修复了它，但它确实可以在那里按预期工作。

我创建了以下小程序：

```
#include <iostream>
using namespace std;

int main()
{
    cout << "_MSC_VER: " << _MSC_VER << endl;
    cout << "_MSC_FULL_VER: " << _MSC_FULL_VER << endl;
    cout << "_MSC_BUILD: " << _MSC_BUILD << endl;

    (void) getchar();

    return 0;
} 
```

我为从 VS2010 到 VS2015 的每个平台版本添加了构建配置，并且 _MSC_VER 对应于上面的 PLATFORM 版本 - 尽管总是在 VS2015 项目中的 Visual Studio 2015 中构建它。

干杯，

伊恩

# haskell - Haskell 代数数据类型中的常量

> ID：13794132
> 
> 赞同：2
> 
> 时间：2012-12-10T02:20:37.080
> 
> 标签：haskell, constants, algebraic-data-types

在 Haskell 代数数据类型中，声明中具有常量值是否合法？换句话说，我可以定义这样的东西：

```
data HttpStatusCodes = BadRequest "Bad request" 400
                     | NotAuthorized "Not authorized" 401
                     | -- ... 
```

我试图从规范中弄清楚，但语法对我来说并不清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T02:38:37.553

不，您不允许这样做（数据*类型*是*types*，而不是*data*）。相反，您可以执行以下操作：

```
data HTTPStatus = HTTPStatus Int String

badRequest, notAuthorized, notFound :: HTTPStatus
badRequest    = HTTPStatus 400 "Bad Request"
notAuthorized = HTTPStatus 401 "Not Authorized"
notFound      = HTTPStatus 404 "Not Found" 
```

或者，类似的：

```
data HTTPStatus = BadRequest | NotFound

code :: HTTPStatus -> Int
code BadRequest = 400
code NotFound = 404

message :: HTTPStatus -> String
message BadRequest = "Bad Request"
message NotFound = "Not Found" 
```

# c - 从文件中读取整数并将它们存储到数组中并写入文件

> ID：13794134
> 
> 赞同：0
> 
> 时间：2012-12-10T02:20:47.117
> 
> 标签：c, arrays, sorting

```
// id         scores
    2000    62  40
    3199    92  97
    4012    75  65
    6547    89  81
    1017    95  95
    7714    85  83
    1234    91  76//AG_midterm.txt 
```

任务：从文件中读取数据，丢弃学生ID，计算两次期中考试的平均值，并将其存储到数组中并将平均值写入另一个文件（AG_sorted.txt）

我面临错误，我似乎无法找出问题所在。我已经尽力做到尽可能整洁。

```
#include <stdio.h>
#include <stdlib.h>

#define MAX_SIZE 50

// Function declarations
void printInfo();
int readresults(FILE *AG_Midterm, int *score1, int *score2);
void sort(float* avgScore);
void calcAvg (FILE *AG_Midterm, float* avgScore, int score1, int score2);
void writeSortedResults (FILE* AG_Sorted, float* avgScore);
void printdone();

int main (void)
{
// Local Declarations
    FILE* AG_Midterm;
    FILE* AG_Sorted;

    int score1[MAX_SIZE];
    int score2[MAX_SIZE];

    float avgScore[MAX_SIZE];

// Statements
    printInfo();

    if(!(AG_Midterm = fopen ("/Users/r3spectak/Desktop/AG_Midterm.txt", "r")))
        {
          printf("\aError opening Results File\n");
          return 100;

        } // if open input

    if(!(AG_Sorted = fopen ("/Users/r3spectak/Desktop/AG_Sorted.txt","w")))
       {
          printf("\aError opening Average Results file\n");
          return 102;
        }// if open input

    while(readresults(AG_Midterm, score1, score1))
        {
          calcAvg(AG_Midterm,&avgScore,score1,score2);
          sort(avgScore);
          writeSortedResults(AG_Sorted, avgScore);

        } //while

    fclose (AG_Midterm);
    fclose (AG_Sorted);

    printdone();
    return 0;

} // main

/*==================printInfo==================================
    Reads data from Midterm file
    Pre : Nothing
    Post: Prints introduction message
*/
void printInfo()

{
// Statements
    printf("Begin Calculation of Scores\n");
    return ;
} // printInfo

/*===================readResults==================================
    Reads data from employee file
    Pre : spEmp is an open file.
          empID,dept,payrate,exempt,hours worked
    Post: reads Employee ID and Pay rate
          if data read -- returns 1
          if EOF or error--returns 0
*/

int readresults(FILE *AG_Midterm, int *score1, int *score2)
{
// Statements

  int i;
  int items;

  for (i = 0; i < MAX_SIZE && (items = fscanf(AG_Midterm, "%*d%d%d", score1 + i, score2 + i)) != EOF;
      i++) {
    if (items != 2) {
      printf( "Error reading data\n");
      return -1;
    }
  }
  return 0;
} //readresults

void sort(float*avgScore)
{

    int i = 0;
    int j = 0;

    for(i = 0; i< MAX_SIZE; i++);

    {
        for(j = i + 1; j < 10; j++)
        {
            if(avgScore[i] < avgScore[j])
            {
               //Exchange them
            int temp = avgScore[i];
                avgScore[i] = avgScore[j];
                avgScore[j] = temp;
            }
       }
   }
return;

} // sort

/*===================calcAvg==================================
    Determines the Average of the two midterm scores
    Pre : score1, score2
    Post: avgScore copied to addresses

*/

void calcAvg (FILE *AG_Midterm, float* avgScore, int score1 , int score2)

{
    int i=0;
// Statements
   while (i<MAX_SIZE && fscanf(AG_Midterm,"%*d %d %d", &score1, &score2)!=EOF)
   {
       avgScore[i] = (score1 + score2)/2.0;
       i++;
   }

} // calcAvg

/*===================writeSortedResults==================================
    Writes Average Scores after Sorting
    Pre : AG_Sorted is an open file
          avgScore
    Post: Data written to file
*/
void writeSortedResults (FILE* AG_Sorted, float* avgScore)
{

// Statements
    fprintf(AG_Sorted, "%f\n", avgScore);
    return;

} // writeSortedResults

/*==================printDone==================================
    Reads data from Midterm Score File
    Pre : Nothing
    Post: Prints end message
*/
void printdone()

{
// Statements
    printf("End of Average Score\n");
    return;
} // printDone 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:37:27.617

您的代码通常会反复将数据与数据地址混淆。例如，线

```
while(readresults(AG_Midterm, &score1, &score1)) 
```

应该读

```
while(readresults(AG_Midterm, score1, score1)) 
```

所以，这个问题似乎是一个普遍的概念问题，而不是一个错误，你可能还没有能力解决它。您可以先尝试一些更简单的方法，然后按照自己的方式返回此代码。（如果它看起来是早上到期的家庭作业，那么时间已经晚了：您可能无法在一个晚上学习您需要知道的内容。希望这个答案至少可以将您指向教科书的正确部分。祝你好运。）

# python - 像 print 一样解释转义的字符串

> ID：13794139
> 
> 赞同：0
> 
> 时间：2012-12-10T02:21:23.950
> 
> 标签：python, string

假设我在 Python 中有以下字符串：

```
>>> example="""
... \nthird line
... [\t] <-tab in there
... [\n] <-\\n in there
... \v vtab
... 1\b2 should be only '2'
... this\rthat <- should be only 'that'
... """ 
```

如果我打印它，各种转义字符（如`\t`制表符）将被插入到人类可读的形式中：

```
>>> print example

third line
[   ] <-tab in there
[
] <-\n in there

 vtab
2 should be only '2'
that <- should be only 'that' 
```

如果我只想生成一个带有扩展或解释的各种转义码的字符串而不打印它怎么办？像：

```
>>> exp_example = example.expandomethod() 
```

（我查看了各种字符串方法、解码和格式，但没有一个像本例那样工作。）

* * *

*编辑*

好的——感谢您对我的厚桨的帮助。我确信这些字符串正在被解析，它们确实如此，但是它们的显示愚弄了我。

我在自己的脑海中解决了这个问题：

```
>>> cr='\012'   # CR or \n in octal
>>> len(cr)
1
>>> '123'+cr
'123\n'
>>> '123\012' == '123\n'
True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:25:56.043

它们没有被插值。它们是印刷的。例如，`\t`通常会打印多个空格；`this\rthat`将打印`this`，返回并`that`在其上打印。如果你要在打印机上打印它，你会看到这两个词。

如果您想将字符串简化为打印等效字符串，我想您必须编写自己的终端仿真器 - 我不知道有任何库可以为您做这件事。

一个更好的问题是——你为什么需要它？它看起来很像一个 XY 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:30:42.850

有些字符的表示与打印时的样子不同。（换行符`'\n'`只是最明显的一个。）您无法真正*存储*这些字符在打印时的外观。这就像询问如何存储特定*字体*使字符看起来的方式。

```
>>> example="""a
... b"""
>>> print example # This is what a newline looks like. You cannot capture it.
a
b
>>> example # This is how a newline is represented.
'a\nb' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T02:38:24.653

print 不解释任何东西。它已经是具有不同内部和外部表示的字符串本身。

证明：

```
s = "\t"
len(s) 
```

...产量`1`而不是`2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T22:25:46.727

正如其他人所说，当您输入转义字符串时，或者 Python 首先解释该字符串时，转义字符`\`和后面的字符将减少为单个目标字符。

但是 - 如果您正在构建一个字符串，其目标是从其转义序列中生成不可打印的字符，[str.decode([encoding[, errors]])](http://docs.python.org/2/library/stdtypes.html#str.decode)会执行您想要的操作：

```
>>> s='string'
>>> esc='\\'
>>> n='n'
>>> st=s+esc+n+'next line'
>>> print st
string\nnextline
>>> print st.decode('string_escape')
string
next line 
```

和这个：

```
>>> ''.join(['\\','n','\\','t'])=='\n\t'
False 
```

与此不同的结果：

```
>>> ''.join(['\\','n','\\','t']).decode('string_escape')=='\n\t'
True 
```

# javascript - 获取当前行的值并将其存储以备将来使用？

> ID：13794141
> 
> 赞同：0
> 
> 时间：2012-12-10T02:21:56.233
> 
> 标签：javascript, datatables

我正在使用数据表来显示来自 mySQL 数据库的数据。我想要做的是捕获当前行的值并将其显示在模态中以进行编辑。

这就是我将数据输入数据表的方式，

```
$(document).ready(function() {
                $('#loading-span7').fadeOut();
                $('#loading-span5').fadeOut();
                $('#add-company').hide();

                $.fn.dataTableExt.sErrMode = 'throw';

                $('#company').dataTable({
                    "bProcessing" : true,
                    "bServerSide" : true,
                    "sAjaxSource" : "/index.php/company/profile_data",
                    "sDom" : "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
                    "sPaginationType" : "bootstrap",
                    "aoColumns" : [{
                        "mData" : "id"
                    }, {
                        "mData" : "name"
                    }, {
                        "mData" : "package_id"
                    }, {
                        "mData" : function(oObj) {
                            return "<a href=\"#\" data-id=\"" + oObj.id + "\" data-name=\"" + oObj.name + "\" role=\"button\" class=\"btn edit-company\">Edit</a></td>";

                        }
                    }, {
                        "mData" : function(oObj) {
                            return "<a href=\"#\" data-id=\"" + oObj.id + "\"  data-name=\"" + oObj.name + "\" role=\"button\" class=\"btn view-users\" >Users</a></td>";
                        }
                    }]
                });

                $.extend($.fn.dataTableExt.oStdClasses, {
                    "sWrapper" : "dataTables_wrapper form-inline"
                }); 
```

这是模态，

```
<div id="edit_company" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                ×
            </button>
            <h3 id="myModalLabel"><span id="company-label"></span>Company</h3>
        </div>
        <div class="modal-body">
            <form id="company-form">
                <fieldset>
                    <label>Name</label>
                    <input type="text" placeholder="Type something…" name="company-name">
                    <label>Package</label>
                    <select name="package" name="package-id" id="package-id">

                    </select>

                </fieldset>
            </form>

        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">
                Close
            </button>
            <button class="btn btn-primary">
                Save changes
            </button>
        </div>
    </div> 
```

这是我试图实现目标的脚本，但是问题是只有数据表的第一行被捕获到模态中

```
$('#company .edit-company').live('click', function() {
                    var id = $(this).attr('id');
                    $('#company-label').html('Edit ');
                    $('#company-form')[0].reset();
                    $.ajax({
                        url : '/index.php/company/profile_data',
                        type : 'POST',
                        data : 'companies[]=' + id,
                        beforeSend : function() {
                            $('#loading-span7').show();

                        },
                        success : function(data, textStatus, xhr) {

                            var details = JSON.parse(data);
                            console.log(details);
                            //console.log(details.aaData[0].homepage_url);
                            $('input[name=company-name]').val(details.aaData[0].name);
                            //$('input[name=package-id]').html(details.aaData[0].package_id);

                            /**oTable.$('.edit-company').click(function() {
                                var data1 = oTable.fnRowSelected(this);
                                $('input[name=company-name]').val(details.aaData[0].name);

                            });**/
                            var option1 = $('<option />', {
                                text : details.aaData[0].package_id
                            }), option2 = $('<option />', {
                                text : details.aaData[1].package_id
                            });

                            $('select#package-id').append(option1, option2);
                            //$('select#package-id option').text(details.aaData[0].package_id);

                            //$('#package-id').val(details.aaData[0].package_id);
                            $('#edit_company').modal('show');
                            $('#loading-span7').fadeOut();
                        },
                        error : function(xhr, textStatus, errorThrown) {
                            //alert('error');
                        }
                    });

                }); 
```

我能做些什么来实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:50:53.013

由于您使用的是`bServerSide`，因此只需使用`fnRowCallback`和 稍微不同地格式化您的列。

```
"fnRowCallback": function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
    var row = $(nRow),
        a = $('<a />').addClass('btn').attr({
            'href': '#',
            "role": "button"
        }).data('rowData', { //store the data in the button
        "id": aData[0],
        "name": aData[1],
        "package_id": aData[2]
    });
    // or store the raw data in the tr element
    //row.data('rowData', aData);
    // or store a formtted object containing the raw data in the tr element
    //row.data('rowData', );
    // Add the Edit button when the datatable draws the row.
    row.find('td:eq(3)').append(a.clone().addClass('edit-company').text('Edit').click(function (e) {
        var self = $(this),
            rowData = self.data('rowData'),
            id = rowData.id,
            name = rowData.name,
            package_id = rowData.package_id;
        //code to init your dialog
        e.preventDefault();
        return false;
    }));
    // Add the Users button when the datatable draws the row.
    row.find('td:eq(4)').append(a.clone().addClass('view-users').text('Users').click(function (e) {
        var self = $(this),
            rowData = self.data('rowData'),
            id = rowData.id,
            name = rowData.name,
            package_id = rowData.package_id;
        //code to handle your users
        e.preventDefault();
        return false;
    }));
},
"aoColumns" : [{
    "mData" : "id"
}, {
    "mData" : "name"
}, {
    "mData" : "package_id"
}, {
    "mData" : "Edit"
}
}, {
    "mData" : "Users"
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:35:11.470

尝试使用 fnGetData 方法。

假设您的表已设置为 oTable

```
var oTable = $('#company').dataTable({
                "bProcessing" : true,
                "bServerSide" : true,
                "sAjaxSource" : "/index.php/company/profile_data",
                "sDom" : "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
                "sPaginationType" : "bootstrap",
                "aoColumns" : [{
                    "mData" : "id"
                }, {
                    "mData" : "name"
                }, {
                    "mData" : "package_id"
                }, {
                    "mData" : function(oObj) {
                        return "<a href=\"#\" data-id=\"" + oObj.id + "\" data-name=\"" + oObj.name + "\" role=\"button\" class=\"btn edit-company\">Edit</a></td>";

                    }
                }, {
                    "mData" : function(oObj) {
                        return "<a href=\"#\" data-id=\"" + oObj.id + "\"  data-name=\"" + oObj.name + "\" role=\"button\" class=\"btn view-users\" >Users</a></td>";
                    }
                }]
});
var selected_data='';
$("td").live("click", function(){
    selected_data = oTable.fnGetData(this);
}); 
```

[在这里举例](http://live.datatables.net/ijirif/edit#javascript,html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:12:12.140

我这样做的方式是我有一个创建模态的函数，我已经简化了一点。

```
 function fnModalDetails ( nTr ) {
      var aData = oTable.fnGetData( nTr );
      var sOut = '<div id="myModal2" class="reveal-modal large">;
      sOut += aData[1];
      sOut += '</div>';
      return sOut;
  } 
```

您需要以某种方式将点击处理程序附加到您的单元格。下面我使用的是 Zurb Reveal 模态。您需要删除之前可能创建的任何模式。

```
 $('.more').live('click', function() {
      event.preventDefault();
      var nTr = $(this).parents('tr')[0];
      $('#myModal2').remove();
      $('body').append(fnModalDetails(nTr));
      $("#myModal2").reveal({animation: 'fade'});
  }); 
```

希望这可以帮助。

# java - 如何忽略 Eclipse RCP 中除最后一个之外的鼠标事件

> ID：13794142
> 
> 赞同：0
> 
> 时间：2012-12-10T02:21:57.427
> 
> 标签：java, swt, eclipse-rcp, mouseevent

请参阅下面的代码示例，方法**handleMouseDoubleClick**方法将需要几秒钟来运行并打开另一个包含按钮和链接的布局屏幕。最终用户可能多次单击表格控件中的一个列出的项目并创建大量鼠标事件，我如何只处理最后一个鼠标事件？

```
Table tableControl = (Table) control;
tableControl.addMouseListener(new MouseAdapter()
{
  public void mouseDown(MouseEvent e)
  {
    handleMouseDown(e);
  }

  public void mouseUp(MouseEvent e)
  {
    handleMouseUp(e);
  }

  public void mouseDoubleClick(MouseEvent e)
  {
    handleMouseDoubleClick(e);
  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:29:28.277

创建一个标志字段。将其设置`true`为调用处理程序的时间。用 初始化它`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T05:19:44.673

您只需要在创建另一个屏幕之前检查您的屏幕是否已经初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-09T09:16:13.333

将光标设置为沙漏和/或禁用表格，在新的“布局屏幕”关闭后重置这些...

# c++ - 在 Visual Studio 中编译时出现 Glut 错误

> ID：13794146
> 
> 赞同：0
> 
> 时间：2012-12-10T02:22:19.137
> 
> 标签：c++, visual-studio-2010, opengl, compiler-construction

我正在尝试在 Visual Studio 中编译 C++ opengl 项目，但出现以下错误：

```
Error   2   error LNK2019: unresolved external symbol __imp____glutInitWithExit@12 referenced in function _glutInit_ATEXIT_HACK@8
Error   2   error LNK2019: unresolved external symbol __imp____glutInitWithExit@12 referenced in function _glutInit_ATEXIT_HACK@8
Error   4   error LNK1120: 2 unresolved externals 
```

有谁知道我为什么会收到这个错误？我错过了图书馆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-28T16:26:48.513

GLUT 是太旧的图书馆。使用 FreeGlut 替换 GLUT。API 相同，您可以在[此处](http://freeglut.sourceforge.net/)找到。

在windows平台：

*   下载源代码
*   选择正确的 vs 解决方案文件并构建它。
*   将 dll 文件复制到 c:\windows\system32
*   将 lib 文件复制到 VisualStudioInstalledDirectory\VC\lib 或 C:\Program Files\windows kit\8.*\Lib\winv6.3\um\x86
*   将头文件复制到 VisualStudioInstalledDirectory\VC\include\GL 或 C:\Program Files\windows kit\8.*\Include\um\gl

现在，在`#include <GL/freeglut.h>`你可以使用 glut 函数之后

# java - Java 最终变量

> ID：13794148
> 
> 赞同：-3
> 
> 时间：2012-12-10T02:22:43.077
> 
> 标签：java, variables, final

最终变量可以分配给另一个变量吗？

```
final int a = 10; 
```

我以后可以将该最终变量分配给另一个变量，例如：

```
int b = a; 
```

当我这样做时，似乎java不喜欢它，但据我所知，最终变量只能分配一次。但是在我的情况下，我没有为变量分配`a`任何东西，而是`b`为变量分配`a`.

有人可以让我了解变量`final`吗？我在各种网站上研究过它，但不明白发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T02:24:57.523

是的，是的。final 表示引用不能改变；引用对象的值即可。本质上，它是一个应用于变量名的修饰符，而不是应用于对象本身。当您声明时，`final Foo a = new Foo();`您是在说 that`a`将始终引用同一个对象。这是合法的：

```
final Foo a = new Foo();
final Foo b = a;
b.setBar(5); 
```

这几乎是唯一没有的：

```
a = anotherFoo; 
```

# sql-server - SQL Server Management Studio 控制台窗口

> ID：13794149
> 
> 赞同：0
> 
> 时间：2012-12-10T02:22:48.717
> 
> 标签：sql-server, ssms

我想在 SSMS 中有一个控制台窗口，我可以在其中快速运行查询以查看特定表中的列或在将查询写入脚本之前测试查询等。Visual Studio 的一些插件提供了可以运行命令的 cmd 或 powershell 控制台。这就是我在 SSMS for SQL 中所需要的。

如果该控制台能够直接理解 sql，那就太好了，但如果没有其他解决方案，我也很高兴在 SSMS 中嵌入一个 powershell 窗口。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T02:50:34.773

我喜欢将默认键盘快捷键 Alt+F1 用于 sp_help 的一个技巧。如果您在查询窗口中突出显示表名并点击该快捷方式，它将以表名作为参数运行 sp_help。这将为您提供有关表的各种信息（列、索引、约束）。

# url - 当我在 Joomla 中创建新文章时，如何从 URL 中删除“/joomla”？

> ID：13794150
> 
> 赞同：0
> 
> 时间：2012-12-10T02:22:53.543
> 
> 标签：url, joomla, categories, joomla-article

`https://www.example.com`当我在新文章中创建新文章时`https://www.example.com/joomla/1-category/1-article-number`

我该怎么做才能让 Joomla 删除“/joomla”以及类别和文章编号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:23:52.390

这是由于菜单或类别别名造成的，例如您在菜单项中有一篇文章

```
> Joomla > Category 1 > Article 
```

您可以将其设为顶级（父级），这样它就会变得像

[http://yoursite.com/article](http://yoursite.com/article)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:10:17.020

这是删除它的方法。Bitnami 有一个工具，假设您已经更改了 apache 服务器上的 .htaccess 文件。

[http://wiki.bitnami.org/Applications/BitNami_Joomla!_Stack](http://wiki.bitnami.org/Applications/BitNami_Joomla!_Stack)

远程服务器上的 sudo 命令是：

$ sudo /opt/bitnami/apps/joomla/updateip --appurl /

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:41:00.547

这确实必须从您放置文章的顶级类别中获取，只需将其更改为任何您都可以的

# excel - 使用 TRUE 语句识别范围的子集

> ID：13794151
> 
> 赞同：1
> 
> 时间：2012-12-10T02:22:58.153
> 
> 标签：excel, subset

我正在尝试根据 TRUE FALSE 语句识别范围的子集。下面的图表中有一个示例。

```
FALSE   FALSE   1.21147
TRUE    FALSE   1.20984
FALSE   FALSE   1.21083
FALSE   FALSE   1.210315
FALSE   TRUE    1.21151
FALSE   FALSE   1.21335
FALSE   FALSE   1.213515
FALSE   FALSE   1.212435
TRUE    FALSE   1.212125
FALSE   FALSE   1.21226 
```

在这种情况下，我希望根据交替的 TRUE 语句来识别一个子集。在左侧列中，第一个 TRUE 语句将触发子集的开头，第二列中的 TRUE 语句将触发子集的结尾。然后我想使用一个简单的 max 函数来识别第三列中的 MAX。我会使用 IF 语句来确定第一个 TRUE 语句是否正确，但是，我无法弄清楚如何根据第二列中的 TRUE 语句来识别范围的子集。我还想知道从上到下是否可行，如果该语句可能从下到上起作用。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:56:49.217

**第 1 部分**可以使用和的组合`MATCH`来完成`OFFSET``MAX`

对于此示例，我假设您的数据位于从 cell 开始`A2`。

为了清楚起见，我在单元格中使用了一些中间结果`E1:E4`。如果您更喜欢单个公式，只需将中间公式合并到最终公式中

单元格`E2`=`TRUE`列中第一个的位置`A`

```
=MATCH(TRUE,A2:A11,0) 
```

单元格`E3`=`TRUE`列中第一个的位置`B`

```
=MATCH(TRUE,B2:B11,0) 
```

结果公式，在和（含）`C`中找到的行之间的列中的 最大值`E2``E3`

```
=MAX(OFFSET($C$1,E2,0,E3-E2+1,1)) 
```

**第 2 部分**更棘手：我认为您不能在范围内搜索*值*。但是，查看您的数据是否可以搜索*第二个* `TRUE`？如果这没问题，那么：

单元格`E4`=`TRUE`列中第二个的位置`A`

```
=MATCH(TRUE,OFFSET(A2:A11,E2,0),0) 
```

或者这个，作为数组公式输入（由 Barry 启发），*它将*获得`TRUE`列中的最后一个

```
=MATCH(2, 1/(A2:A11=TRUE),1) 
```

结果公式，在和（含）`C`中找到的行之间的列中的最大值`E3``E4`

```
=MAX(OFFSET($C$1,E3,0,E4+E2-E3+1,1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:29:13.913

你关于从下往上遍历表格的部分让我感到困惑，也不知道你是否可以有多个子集，因为你倒数第二行似乎是一个未关闭的新子集的打开。无论如何，希望这会有所帮助。我假设您不想使用宏，在这种情况下，这将是微不足道的。您可以做的是用包含 FALSE、FALSE、0、0 的行填充数据集的顶部，然后将此公式添加到从集合的第一行开始的第四列：

```
=IF(AND(NOT(A2),NOT(B2),OR(D1=0,AND(NOT(A1),B1))),0,C1) 
```

假设您的第一行是第 2 行，第 1 行用于填充。A、B 和 C 是示例中的三列，如果第三列在子集中，则 D 将打印第三列的值，如果不在，则打印为零，以便您可以轻松计算 max() 或任何您想要的做。我看起来像这样：

![在此处输入图像描述](../Images/776733ff4f1317229719fefd831bcb42.png)

# codeigniter - Grocery CRUD 日期输入的默认值？

> ID：13794157
> 
> 赞同：0
> 
> 时间：2012-12-10T02:23:29.857
> 
> 标签：codeigniter, jquery-ui-datepicker, grocery-crud

我遵循 Grocery CRUD 网络文档中的指南[http://www.grocerycrud.com/examples/callback_edit_field_example](http://www.grocerycrud.com/examples/callback_edit_field_example)

我想这是插入时为输入字段设置默认值的方法之一。我正在尝试使用相同的方法设置日期输入字段的默认值。日期值确实出现在该字段中，但 jquery 日期选择器功能不再可用。

是否有人尝试在 Grocery CRUD 中设置日期的默认值但仍保留其 jquery datepicker 功能？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-28T17:18:43.897

我发现了一种使用不可编辑的默认值的简单方法是

`$this->grocery_crud->callback_add_field('BookedDate', function(){ return date('y-m-d'); });`

这将在日期字段上设置今天的日期，但这是不可编辑的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T23:00:21.227

这个功能实际上并不存在于杂货店 CRUD 中。因此，我们将尝试使用一个小的“hack”来获得预期的结果。下面的代码将为您正常工作：

```
$crud = new grocery_CRUD();
....

if( $crud->getState() == 'edit' ) { //add these only in edit form
    $crud->set_css('assets/grocery_crud/css/ui/simple/'.grocery_CRUD::JQUERY_UI_CSS);
    $crud->set_js_lib('assets/grocery_crud/js/'.grocery_CRUD::JQUERY);
    $crud->set_js_lib('assets/grocery_crud/js/jquery_plugins/ui/'.grocery_CRUD::JQUERY_UI_JS);
    $crud->set_js_config('assets/grocery_crud/js/jquery_plugins/config/jquery.datepicker.config.js');
}

$crud->callback_edit_field('phone',array($this,'_add_default_date_value'));

....
$output = $crud->render();
....

function _add_default_date_value($value){
    //The below line is only to avoid the error in JavaScript
    $return  = '<script type="text/javascript">var js_date_format = "dd/mm/yyyy"; </script>';

    $value = !empty($value) ? $value : date("d/m/Y");
    return $return.'<input type="text" name="phone" value="'.$value.'" class="datepicker-input" />';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T10:38:14.590

谢谢约翰！

我正在寻找在添加输入页面中出现在输入表单中的默认日期值。我对您的示例进行了一些更改

```
$crud = new grocery_CRUD();
....

if( $crud->getState() == 'add' ) { //add these only in add form
    $crud->set_css('assets/grocery_crud/css/ui/simple/'.grocery_CRUD::JQUERY_UI_CSS);
    $crud->set_js('assets/grocery_crud/js/jquery_plugins/config/jquery.datepicker.config.js');
}

$crud->callback_add_field('date',array($this,'_add_default_date_value'));

....
$output = $crud->render();

function _add_default_date_value(){
        $value = !empty($value) ? $value : date("d/m/Y");
        $return = '<input type="text" name="date" value="'.$value.'" class="datepicker-input" /> ';
        $return .= '<a class="datepicker-input-clear" tabindex="-1">Clear</a> (dd/mm/yyyy)';
        return $return;
} 
```

有用！

# logging - Orchard CMS：用户活动记录

> ID：13794158
> 
> 赞同：1
> 
> 时间：2012-12-10T02:23:50.493
> 
> 标签：logging, orchardcms

在 Orchard CMS 1.4 中有记录/监控用户活动的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:22:37.137

这取决于您要监控的具体内容以及您希望如何查看结果（日志文件、电子邮件...）。

例如，使用规则引擎，如果内容项（创建、发布、删除...）发生某些事情并相应地发送电子邮件，则触发事件非常简单。如果现有操作对您来说还不够，您可以创建一个新操作（例如提到的日志记录：AFAIK 没有将消息写入日志文件的操作）。

此外，通过挂钩 Orchard 服务公开的各种事件，您可以从代码开始编写。

您也可以更新到 1.6 :-)。

# android - 检索特定列的数据并将其存储在字符串数组中

> ID：13794160
> 
> 赞同：2
> 
> 时间：2012-12-10T02:23:55.583
> 
> 标签：android, sqlite, arrays

我有一个 sqlite 数据库，我想检索特定的数据列并将其存储到字符串数组中。数据库内部有两列。会有多行具有相同用户名的数据，我想检索用户的“ContentPath”并将其存储到字符串数组中。但我不知道如何检索该特定列数据...

```
 public String[] get_contentByEmailID(String emailid){
    String[] returnMsg = null;
    helper = this.getReadableDatabase();

    Cursor c = helper.rawQuery("SELECT tableid, emailid, contentpath" +
            " from w_content where emailid='"+emailid"' ", null);

    int contentpathColumn = c.getColumnIndex("contentpath");

    if (c.moveToFirst()) {
        do {
            returnMsg = new String[2]; 

            String contentpath = c.getString(contentpathColumn);

            returnMsg[0] = emailid_sync;

            returnMsg[1] = contentpath;

        } while (c.moveToNext());
    }
    if (c != null && !c.isClosed()) {
        c.close();
    }
    if (helper!=null){
        helper.close();
    };
    return returnMsg;
} 
```

当我调用这个函数来检索数据时。它提供了 emailid 和 contentpath。

```
String values[] = helper.get_contentByEmailID(SettingConstant.EMAIL); 
```

任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:35:15.967

数组填充 emailid 和 contentpath 的原因是，因为你总是重置`returnMsg`每一行并用这样的值填充它。由于会有不同的行数，因此通常建议您使用`ArrayList`，而不是构建静态长度数组。

要修复它，请更改：

```
String[] returnMsg = null; 
```

到：

```
ArrayList<String> returnMsg = new ArrayList<String>(); 
```

然后，在您的 中`do{}`，执行以下操作：

```
do {
    String contentpath = c.getString(contentpathColumn);
    returnMsg.add(contentpath);
} while (c.moveToNext()); 
```

最后，将您的 return 语句更改为：

```
return returnMsg.toArray(); 
```

# cuda - CUDA DCT 仅在 blockDim.x 为 1 时有效

> ID：13794161
> 
> 赞同：1
> 
> 时间：2012-12-10T02:24:42.830
> 
> 标签：cuda, jpeg, gpu, nvidia, dct

我刚开始学习 CUDA，只知道非常基本的东西。我正在尝试开发一个使用矩阵乘法方法执行 8x8 DCT 的 CUDA 程序。计算 8x8 DCT 系数矩阵 D，然后 DCT 变换为 D'AD。每个线程计算 1 个数据点，每个块为 8x8。我编写了一个顺序 DCT 并比较了输出文件中的结果。

这就是问题所在。当块数为 1xN 时，一切正常。当块数为 MxN 时（M 是任何大于 1 的数），内核给出错误的结果。我认为问题应该是我的块索引，但我找不到问题。

有人可以提供一些帮助吗？我知道这是一个非常基本的程序，但我真的需要它。任何意见将不胜感激！提前致谢！

```
#include <stdio.h>
#include <stdlib.h>
#include "types.h"
#include "cuda.h"

static int DCT_bases[64]= {2896, 2896, 2896, 2896, 2896, 2896, 2896, 2896,
    4017, 3406, 2276, 799, -799, -2276, -3406, -4017,
    3784, 1568, -1568, -3784, -3784, -1568, 1568, 3784,
    3406, -799, -4017, -2276, 2276, 4017, 799, -3406, 
    2896, -2896, -2896, 2896, 2896, -2896, -2896, 2896,
    2276, -4017, 799, 3406, -3406, -799, 4017, -2276, 
    1568, -3784, 3784, -1568, -1568, 3784, -3784, 1568,
    799, -2276, 3406, -4017, 4017, -3406, 2276, -799 };

__device__ __constant__ int dDCT_bases[64];

__global__ void cudaDCT2D(int *src, int width) {

    int i = blockIdx.y * blockDim.y + threadIdx.y;
    int j = blockIdx.x * blockDim.x + threadIdx.x;
    int k;
    int sum = 0;
    int dct_i = threadIdx.y;
    int dct_j = threadIdx.x;

    __shared__ int temp[8][8];

    temp[dct_i][dct_j] = src[i*width+j];
    __syncthreads();
    sum = 0;

    for (k=0; k<8; k++) {
        sum += temp[dct_i][k] * dDCT_bases[dct_j*8+k]; 
    }
    __syncthreads();
    temp[dct_i][dct_j] = sum >> 13;
    __syncthreads();

    sum = 0; 

    for (k = 0; k < 8; k++) {
        sum += dDCT_bases[dct_i*8+k] * temp[k][dct_j];
    }
    __syncthreads();

    src[i*width+j] = sum >> 13;

}

void myDCT2D(int *src, int width, int height) {

    int bi, bj;
    int i, j, k;
    int sum = 0;
    int temp[64];

    for (bi = 0; bi < width / 8; bi++) {
        for (bj = 0; bj < height / 8; bj++) {
            for (i=0; i<8; i++) {
                for (j=0; j<8; j++) {
                    for (k = 0; k < 8; k++) {
                        sum +=  src[i*8+k] * DCT_bases[j*8+k];
                    }
                    temp[i*8+j] = sum >> 13;
                    sum = 0;
                }
            }

            for (i=0; i<8; i++) {
                for (j=0; j<8; j++) {
                    for (k=0; k < 8; k++) {
                        sum += DCT_bases[i*8+k] * temp[k*8+j];
                    }
                    src[i*8+j] = sum >> 13;
                    sum = 0;
                }
            }

            src += 64; 
        }
    }       
}

int main (int argc, char *argv[]) 
{
    int *matrix;
    int *m0;
    int i, j;
    int *d_m;
    int *m1;

    FILE* fp;

    int width = 8;
    int height = 8;

    if (argc > 1) { 
        width = atoi(argv[1]);
        height = atoi(argv[2]);
    }

    if (width % 8 || height % 8) {
        printf("Width and Height has to be multiple of 8!\n"); 
        getchar();
        return 0;
    }

    matrix = (int *) malloc(sizeof(int) * width * height); 
    m0 = (int *) malloc(sizeof(int) * width * height);
    m1 = (int *) malloc(sizeof(int) * width * height);
    fp = fopen("cuda_test.txt", "w");

    for (i=0; i< height; i++) {
        for (j = 0; j < width; j++) {
            matrix[i*width+j] = rand()% 256;
            m0[i*width+j] = matrix[i*width+j];
            m1[i*width+j] = matrix[i*width+j];
            fprintf(fp,"%d ", m0[i*width+j]);
        }
        fprintf(fp,"\n");
    }
    fprintf(fp, "\n");

    cudaMalloc((void**) &d_m, sizeof(int) * width * height);
    cudaMemcpy(d_m, m0, sizeof(int) * width * height, cudaMemcpyHostToDevice);
    cudaMemcpyToSymbol(dDCT_bases, DCT_bases, sizeof(DCT_bases));

    //    printf("%s\n", cudaGetErrorString(cudaGetLastError()));
    dim3 dimGrid(width / 8, height / 8);    
    dim3 dimBlock(8,8);

    cudaDCT2D<<<dimGrid,dimBlock>>> (d_m, width);

    cudaMemcpy(m0, d_m, sizeof(int) * width * height, cudaMemcpyDeviceToHost);

    for (i=0; i< height; i++) {
        for (j = 0; j < width; j++) {
            fprintf(fp,"%d ", m0[i*width+j]);
        }
        fprintf(fp,"\n");
    }

    fprintf(fp, "\n"); 
    myDCT2D(m1, width, height);

    for (i=0; i< height; i++) {
        for (j = 0; j < width; j++) {
            fprintf(fp,"%d ", m1[i*width+j]);
        }
        fprintf(fp,"\n");
    }

    fprintf(fp,"\n");
    free(matrix);
    free(m0);
    free(m1);
    cudaFree(d_m);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:33:56.040

我自己找到答案。实际上 cuda 程序没有任何问题，但我以不同的方式解释矩阵。在 CUDA 中，我使用二维块结构，因此 cuda 会以这种方式解释 16x16 矩阵： [ M1_8x8 M2_8x8 M3_8x8 M4_8x8] 但在我的 C 测试程序中，我假设前 8x8 数字在第一个矩阵，所以它变成这样：[M1 16x4 M2 16x4 M3 16x4 M4 16x4]

所以矩阵不同！这就是为什么结果不一样的原因！我认为这只会发生在像我这样的初学者身上...... :(

# knockout.js - 如何更新视图模型上的单个对象？

> ID：13794163
> 
> 赞同：0
> 
> 时间：2012-12-10T02:24:59.007
> 
> 标签：knockout.js

我有一个视图模型如下：

```
 var PostModel = function(data){
        ko.mapping.fromJS(data, {}, this);
    }; 

var vm = (function () {
    var post = {};
    var posts   = ko.observableArray([]);
    var getPost = function () {
        var tmp = {
            title: new Date(),
            content: new Date()
        };
        //post.title(tmp.title());
        //post.content(tmp.content());
        ko.mapping.fromJS(tmp, mappingOption, post);

    };
    var getPosts = function () {
        posts.removeAll();
        for (var i = 0; i < 2; i++) {
            posts.push({ title: new Date() });
        }
    };

    var mappingOption = {
        create: function (options) {
            return new PostModel(options.data);
        }
    }

    return {
        post    : post,
        posts   : posts,
        getPost : getPost,
        getPosts: getPosts
    };
})();

ko.applyBindings(vm);​ 
```

并响应 html 如下：

```
<button data-bind="click: getPost">get post</button>
<br />
<label data-bind="text: post.title" ></label>
<br />
<button data-bind="click: getPosts">get post list</button>
<ul data-bind="foreach: posts">
    <li data-bind="text: title"></li>
</ul> 
```

我希望在执行 getPost 和 getPosts 函数时更新 post 对象和 posts 数组对象，但是 post 对象不会在 html 中更新，而 post 数组对象会在 html 中更新。

JsFiddle 在[这里](http://jsfiddle.net/outia24/AVygn/)(http://jsfiddle.net/outia24/AVygn/)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:52:07.657

当你有一个 observable 时，例如：

```
var post    = { title: ko.observable('test') } ; 
```

您可以像这样更新标题的值：

```
post.title("New Title"); 
```

如果您在设置绑定后替换标题或替换帖子，则绑定断开连接，您将丢失绑定。以下是更多示例：

```
var vm = (function() {
   var self = this;
   self.post = { title: ko.observable("test") } ;
   return self;
})();

// This will cause "test" to show up in the HTML    
ko.applyBindings(vm);

// Update the title in the viewmodel and HTML to "New Title"
// This is the proper way to update an observable.
vm.post.title("New Title");  

// If you want to retrieve the value of an observable, you call
// it like a function, like this
var TheTitleOfMyPost = vm.post.title();

// This will break the binding, because you are creating a new
// object and pointing the post variable to the new object.
// The HTML, however, is still bound to the old object.
// Don't do it this way.
post = { title: ko.observable("Doesn't Work") };  // Initial Set 
```

# windows-8 - 使用代码唱歌将桌面应用程序提交到 Windows 8 商店

> ID：13794166
> 
> 赞同：2
> 
> 时间：2012-12-10T02:25:32.570
> 
> 标签：windows-8, windows-store, code-signing-certificate

我知道这需要代码签名证书。只是想知道它是否必须是 VeriSign 的代码签名证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:44:58.057

Windows 应用商店（桌面应用程序）的认证要求要求使用 Authenticode 证书对文件进行签名，但未指定哪个 CA。基于[http://msdn.microsoft.com/en-us/library/windows/desktop/jj256845.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/jj256845.aspx)我想说，只要它是一个有信誉的代码签名证书（不是自签名的，或私有 CA）那么它将通过认证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:16:29.977

我认为它必须是威瑞信，也是根据 Michael S 的说法：[https ://stackoverflow.com/a/13026302/921282](https://stackoverflow.com/a/13026302/921282)

也来自第一手。在使用 Microsoft 开发工具包进行测试时，我得到了下一个报价。（只有当测试通过且没有失败时，您才能获得此信息的链接。该站点受到限制，仅向 MS 服务用户显示）

警告 安装签名的驱动程序和可执行文件

“用于 Microsoft Authenticode 的 VeriSign 代码签名证书（99 美元） VeriSign 提供的 Microsoft Authenticode 证书是唯一可接受的身份验证、文件签名和代码签名方法。Microsoft 将无法接受任何其他身份验证方法，包括 GeoTrust Windows 应用商店要求的身份验证。"

# windows-phone-8 - Windows Phone 8 公司应用商店如何运作？

> ID：13794167
> 
> 赞同：1
> 
> 时间：2012-12-10T02:25:34.223
> 
> 标签：windows-phone-8

官方的 windows phone 网站并没有真正详细描述公司中心系统的工作原理。

[http://www.windowsphone.com/en-US/business/custom-hub](http://www.windowsphone.com/en-US/business/custom-hub)

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943(v=vs.105).aspx)

我有几个问题，希望部署过内部应用商店的人能解答。

首先，谁提供后端基础设施？应用商店是自托管的，还是托管在我的 Microsoft 上？如果是自托管的，需要什么样的后端基础设施？如果由微软处理后端，会涉及哪些费用？

Microsoft 是否仍需要检查和验证单个应用程序的性能/内容？或者有什么事吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:33:03.570

Company-Hub 实际上并不是一个 AppStore，而是一个允许侧载内部企业应用程序的简单应用程序。其工作流程如下（简而言之：

1.  根据 MSDN 上的要求生成公司代码签名证书，并使用提供的工具转换为应用程序注册令牌。
2.  在您希望分发的设备上安装了注册令牌 (AET)（您可以通过电子邮件发送/下载它并打开文件）。
3.  创建您的公司中心应用程序，并使用您购买的证书对其进行签名。
4.  以类似的方式（互联网/电子邮件/MDM 提供商）分发应用程序的 XAP 文件。

现在您可以在手机上安装企业应用程序，您需要一种机制来通知最终用户它们的存在。您可以通过任何您觉得舒服的方式来执行此操作，例如发布您在公司中心内使用的 RSS/OData 提要。显示应用程序列表后，您可以使用一些新的 Windows Phone 8 API 来检测是否已安装应用程序。您只需从自己的服务器下载 XAP 并允许操作系统本地处理 XAP 文件即可安装应用程序。

该过程在设计时考虑了设备管理 (MDM) 提供商，因此当您将设备加入 MDM 提供商时，它将自动安装 AET 和公司中心 XAP。但是，您不需要依赖使用 MDM，因此使用电子邮件或 URL 下载文件同样有效。

# haskell - Haskell - 找不到包

> ID：13794168
> 
> 赞同：3
> 
> 时间：2012-12-10T02:25:46.303
> 
> 标签：haskell, package, cabal, cabal-install

我通过 cabal 安装了一个包：Data.Vector

但是当我尝试编译其中包含的程序`import Data.Vector`时：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ ghc --make -O2 -prof -auto-all playGame

Grid.hs:28:8:
    Could not find module `Data.Vector'
    Perhaps you meant
      Data.Tensor (from Tensor-1.0.0.1)
      Data.Functor (from base)
    Use -v to see a list of the files searched for.
Drews-MacBook-Pro:Blokus-AI drewgross$ 
```

我用来安装的命令是：

```
cabal install -p --reinstall --force-reinstalls vector 
```

为了让我的程序能够编译，我做了其他各种各样的事情，但没有任何效果。我真的很想删除所有内容，回到第一格并再次下载包。我怎样才能做到这一点？

编辑：进一步调查表明可能有 2 个版本的 Data.Vector：0.10.0.1 和 0.9.1，也许它们以某种方式发生冲突？

编辑：`ghc-pkg check`没有列出任何错误，但给了我很多看起来像这样的警告：

```
Warning: haddock-interfaces: /Users/drewgross/.cabal/share/doc/haskell-lexer-1.0/html/haskell-lexer.haddock doesn't exist or isn't a file 
```

编辑：GCHi 也没有找到

```
λ> import Data.Vector

<no location info>:
    Could not find module `Data.Vector'
    Perhaps you meant Data.Functor (from base)
λ> 
```

编辑`ghc-pkg list vector`：：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ ghc-pkg list vector
/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/lib/ghc-7.4.2/package.conf.d
/Users/drewgross/.ghc/x86_64-darwin-7.4.2/package.conf.d
   vector-0.10.0.1
Drews-MacBook-Pro:Blokus-AI drewgross$ 
```

并使用 -v 标志进行构建：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ ghc --make -O2 -prof -auto-all -v playGame
Glasgow Haskell Compiler, Version 7.4.2, stage 2 booted by GHC version 7.4.2
Using binary package database: /usr/local/Cellar/ghc/7.4.2/lib/ghc-7.4.2/package.conf.d/package.cache
Using binary package database: /Users/drewgross/.ghc/x86_64-darwin-7.4.2/package.conf.d/package.cache
package Cabal-1.16.0.3-e689d8e77b2f476229954cd43b1737bd is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd directory-1.1.0.2-72e928d14fc50f31f7e6404839a15691 unix-2.5.1.1-29636eb78541401e8e00393ef5df097e
package Tensor-1.0.0.1-a8f1a59665c3ebc4867678a14fe1460f is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd
package binary-0.5.1.1-e62c39c3aba8093e9b9655a4a8d2bce9 is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd bytestring-0.10.0.1-9b03e69060669eabf0b20e150305c7be
package bmp-1.2.3.2-c7572ec2bbb802bfd93fed0953c61d5d is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd binary-0.5.1.1-e62c39c3aba8093e9b9655a4a8d2bce9 bytestring-0.10.0.1-9b03e69060669eabf0b20e150305c7be
package bytestring-0.10.0.1-9b03e69060669eabf0b20e150305c7be is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd
package ghc-paths-0.1.0.9-4e6c624a3431a4fa7630e4fb77be4c83 is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd
package haskell-lexer-1.0-8fea1c35b626a2de761522690a88c063 is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd
package primitive-0.4.1-0007d441db5f4ce1ffd66bd3816c2d4e is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd
package split-0.2.1.1-03ec5738edb34f2e8967d25637b9392f is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd
package vector-0.10.0.1-3450daae3d9f2092020075d05481123c is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd primitive-0.5.0.1-15cdc8c11a54a78809b647af0c2975b3
wired-in package ghc-prim mapped to ghc-prim-0.2.0.0-7d3c2c69a5e8257a04b2c679c40e2fa7
wired-in package integer-gmp mapped to integer-gmp-0.4.0.0-af3a28fdc4138858e0c7c5ecc2a64f43
wired-in package base mapped to base-4.5.1.0-47f48c3ae7f8256a66a23e9dfe22eefc
wired-in package rts mapped to builtin_rts
wired-in package template-haskell mapped to template-haskell-2.7.0.0-e109822dcbed82c43f9fa60194eb64b5
wired-in package dph-seq not found.
wired-in package dph-par not found.
Hsc static flags: -fscc-profiling -static
*** Chasing dependencies:
Chasing modules from: *playGame.hs

Grid.hs:28:8:
    Could not find module `Data.Vector'
    Perhaps you meant Data.Functor (from base)
    Locations searched:
      Data/Vector.hs
      Data/Vector.lhs
*** Deleting temp files:
Deleting: 
*** Deleting temp dirs:
Deleting: 
Drews-MacBook-Pro:Blokus-AI drewgross$ 
```

这是 shell 使用的：

```
Drews-MacBook-Pro:Blokus-AI drewgross$ which ghc
/usr/bin/ghc 
```

我做到了`cabal install -v lens`，显然有大量的输出，但我认为这是相关的部分：

```
Registering lens-3.7.0.2...
/usr/bin/ghc-pkg update - --global --user
Updating world file...
Drews-MacBook-Pro:Blokus-AI drewgross$ 
```

这似乎表明他们使用的是相同的版本。如果相关，我可以发布更多 cabal 安装的输出。

编辑：来自 cabal install -v 的更多 ghc 输出

```
Building lens-3.7.0.2...
Preprocessing library lens-3.7.0.2...
Building library...
creating dist/build
/usr/bin/ghc --make -package-name lens-3.7.0.2 -hide-all-packages -fbuilding-cabal-package -i -idist/build -isrc -idist/build/autogen -Idist/build/autogen -Idist/build -optP-DTRUSTWORTHY=1 -optP-DDEFAULT_SIGNATURES=1 -optP-include -optPdist/build/autogen/cabal_macros.h -odir dist/build -hidir dist/build -stubdir dist/build -package-id array-0.4.0.0-0b6c5ca7e879a14d110ca4c001dd9297 -package-id base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd -package-id bytestring-0.9.2.1-0044644a71adfe5e950e6c6f6ca13065 -package-id comonad-3.0.0.2-6ef27fce8536ebdf9c364307a0915f63 -package-id comonad-transformers-3.0-a6df581636b1c9b514cfa6560f17d6a3 -package-id comonads-fd-3.0-b906ed7898871c5d2427052e2eefa62e -package-id containers-0.4.2.1-75f143aa39a3e77a1ce2300025bdd8ce -package-id filepath-1.3.0.0-f998e5510c76a98913f57b14b4f16c57 -package-id ghc-prim-0.2.0.0-7d3c2c69a5e8257a04b2c679c40e2fa7 -package-id hashable-1.1.2.5-14291f3b4e96b5599759ce7daa2bd37c -package-id mtl-2.1.2-02e701f9b1590ee88a0b5b0bd5d93a29 -package-id parallel-3.2.0.3-4cdd6067624f867b253b98d6d9fb9f52 -package-id semigroups-0.8.4.1-4d3a86b037504e6000a0354510588745 -package-id split-0.2.1.1-03ec5738edb34f2e8967d25637b9392f -package-id template-haskell-2.7.0.0-29110cc89a711d6ab3e7ee0e0a8ee949 -package-id text-0.11.2.3-473d9a1761b27c7315f2ef4569d93c3c -package-id transformers-0.3.0.0-8e66ecc7d4dae2b07b2b5406908c70e4 -package-id unordered-containers-0.2.2.1-d70d5ccb1df11dbbbaac89571b1ee46d -package-id vector-0.10.0.1-3450daae3d9f2092020075d05481123c -O -Wall -fwarn-tabs -O2 -fdicts-cheap -funbox-strict-fields -XHaskell98 Control.Lens.TH Language.Haskell.TH.Lens Control.Exception.Lens Control.Lens Control.Lens.Action Control.Lens.Classes Control.Lens.Combinators Control.Lens.Fold Control.Lens.Getter Control.Lens.Indexed Control.Lens.IndexedGetter Control.Lens.IndexedFold Control.Lens.IndexedLens Control.Lens.IndexedSetter Control.Lens.IndexedTraversal Control.Lens.Internal Control.Lens.Internal.Zipper Control.Lens.Iso Control.Lens.Loupe Control.Lens.Plated Control.Lens.Prism Control.Lens.Representable Control.Lens.Setter Control.Lens.Simple Control.Lens.Traversal Control.Lens.Tuple Control.Lens.Type Control.Lens.WithIndex Control.Lens.Wrapped Control.Lens.Zipper Control.Lens.Zoom Data.Bits.Lens Data.ByteString.Lens Data.ByteString.Strict.Lens Data.ByteString.Lazy.Lens Data.Complex.Lens Data.Data.Lens Data.Dynamic.Lens Data.HashSet.Lens Data.IntSet.Lens Data.List.Lens Data.List.Split.Lens Data.Sequence.Lens Data.Set.Lens Data.Text.Lens Data.Text.Strict.Lens Data.Text.Lazy.Lens Data.Tree.Lens Data.Typeable.Lens Data.Vector.Lens Data.Vector.Generic.Lens GHC.Generics.Lens Data.Array.Lens System.FilePath.Lens Control.Parallel.Strategies.Lens Control.Seq.Lens Control.Lens.Internal.Combinators
[ 1 of 57] Compiling Control.Lens.Classes ( src/Control/Lens/Classes.hs, dist/build/Control/Lens/Classes.o )
[ 2 of 57] Compiling Control.Lens.Internal ( src/Control/Lens/Internal.hs, dist/build/Control/Lens/Internal.o )
[ 3 of 57] Compiling Control.Lens.Internal.Combinators ( src/Control/Lens/Internal/Combinators.hs, dist/build/Control/Lens/Internal/Combinators.o )
[ 4 of 57] Compiling Control.Lens.Indexed ( src/Control/Lens/Indexed.hs, dist/build/Control/Lens/Indexed.o )
[ 5 of 57] Compiling Control.Lens.IndexedGetter ( src/Control/Lens/IndexedGetter.hs, dist/build/Control/Lens/IndexedGetter.o )
[ 6 of 57] Compiling Control.Lens.Action ( src/Control/Lens/Action.hs, dist/build/Control/Lens/Action.o )
[ 7 of 57] Compiling Control.Lens.Setter ( src/Control/Lens/Setter.hs, dist/build/Control/Lens/Setter.o ) 
```

编辑：ghc-pkg 转储

```
Drews-MacBook-Pro:Blokus-AI drewgross$ ghc-pkg dump | grep "id: base"
id: base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T21:00:19.750

您的包裹数据库严重损坏。输出列出了 10 个由于缺少或递归依赖而`ghc -v`无法使用的包，其中包括`vector`：

```
package vector-0.10.0.1-3450daae3d9f2092020075d05481123c is unusable due to missing or recursive dependencies:
  base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd primitive-0.5.0.1-15cdc8c11a54a78809b647af0c2975b3 
```

所有损坏的软件包的共同点是缺少（？）依赖项

```
base-4.5.1.0-81d626fb996bc7e140a3fd4481b338cd 
```

在哪里

```
wired-in package base mapped to base-4.5.1.0-47f48c3ae7f8256a66a23e9dfe22eefc 
```

used base 具有不同的哈希值。

我不确定这是怎么发生的，据我所知，重新安装是不可能的`base`，但看起来你有两个 ghc-7.4.2 的示例，它们互相踩到了脚趾。

`ghc-pkg list`用途

```
/Library/Frameworks/GHC.framework/Versions/7.4.2-x86_64/usr/lib/ghc-7.4.2/package.conf.d 
```

对于全局包数据库，而编译使用

```
Using binary package database: /usr/local/Cellar/ghc/7.4.2/lib/ghc-7.4.2/package.conf.d/package.cache 
```

现在，可能两者中至少有一个是符号链接，并且它们都指向同一个地方-然后您`package.cache`的不同步-但是

```
Glasgow Haskell Compiler, Version 7.4.2, stage 2 booted by GHC version 7.4.2 
```

由同一版本启动的 GHC 似乎不寻常。

你能确定你是否确实有两个 ghc-7.4.2 并且命令行使用了一个不同的一个`cabal`吗？`which ghc`告诉您 shell 使用哪一个，并`cabal install -v some-package`输出命令行`cabal`使用的，包括使用的 GHC 的整个路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T03:03:31.487

您可以使用 列出已安装的软件包`ghc-pkg list`。例如（显然我需要更新），

```
$ ghc-pkg list | grep vector
    vector-0.9.1
    vector-algorithms-0.5.4
    vector-algorithms-0.5.4.2
    vector-space-0.8.0
    vector-strategies-0.3 
```

您可以使用取消注册它们`ghc-pkg unregister`。前任，

```
$ ghc-pkg unregister vector-0.9.1 
```

然后`cabal update && cabal install vector`应该从 hackage 中获取最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T12:40:45.453

在现有的（自制的）ghc install [Mac OS Mavericks 10.9.+] 上安装 Haskell 平台后，我在另一个模块上遇到了类似的问题。我用自制软件卸载了以前的 ghc

```
brew uninstall ghc 
```

并重新运行 Haskell 平台安装程序（Mac 上的 .pkg）。然后我不得不

```
sudo ghc-pkg recache 
```

解决过时的警告

```
ghc-pkg list 
```

这解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-28T12:43:53.357

您可能希望将包添加到`.cabal`文件中

# c++ - 如何使负数的mod变为正数？

> ID：13794171
> 
> 赞同：27
> 
> 时间：2012-12-10T02:26:30.510
> 
> 标签：c++

基本上，我需要`(-3) % 5`是“2”而不是“-3”。Python 产生“2”，但 C++ 产生“-3”。不确定如何在 C++ 中生成“2”。谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-10T02:29:17.183

最容易：`((x % 5) + 5) % 5`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T02:30:14.990

如果输入数字`X`为负数，则添加基数：

```
X % Y + (X % Y < 0 ? Y : 0); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-17T21:35:56.830

快速而肮脏的方法是写

```
((x % divisor) + divisor) % divisor 
```

例如，`((-3 % 5) + 5) % 5 == 2`。但是，这会执行两个单独的除法，并且由于除法是最慢的算术运算之一，您可能会喜欢以下替代方法之一：

(1)`mod`整数或浮点的通用

```
int mod(int x, int divisor)
{
    int m = x % divisor;
    return m + (m < 0 ? divisor : 0);
}

template<class Num> Num mod(Num x, Num divisor)
{
    Num m = x % divisor;
    return m + (m < 0 ? divisor : 0);
} 
```

`mod`(2) 32 位整数的非分支

```
int mod(int x, int divisor)
{
    int m = x % divisor;
    return m + ((m >> 31) & divisor);
} 
```

所有这些都假设`divisor`总是积极的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T02:28:27.877

您可以先将负数添加一些倍数`5`，以将其转换为具有相同值 mod 5 的正数。

您可以通过取负数的绝对值，加上所需的任何值将其向上舍入到下一个 5 的倍数，然后将其添加到负数，这应该已经是 0 到 4 之间的数字。

或者，只需执行以下操作：

```
num = -2;
mod = 5;
if ( num < 0 ) {
    result = mod - (abs(num) % mod);
} 
```

它会起作用（解释：*mathemagic*）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-25T07:13:27.257

```
int x=-3;

// first approach
cout<<((x % 5) + 5) % 5;

//second approach means just reverse the number modNum%x
cout<<5%x; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2021-02-08T16:32:35.610

我看到了很多关于 ((x % 5) + 5) % 5 的建议但是我只用 (X + 5) % 5 得到了相同的结果

(X + 除数) % 除数。

# android - 使用特殊字符 (,) 发起对号码的呼叫

> ID：13794172
> 
> 赞同：2
> 
> 时间：2012-12-10T02:26:45.907
> 
> 标签：android, cordova

我正在尝试从运行 2.2 的 Android 手机上的 Phonegap 应用程序开始通话。但是，它忽略了我插入数字的任何暂停字符。例如，如果我将暂停字符插入为“p”或“%2C”，它们将被忽略并且不会出现在拨号程序中。如果我使用“，”作为暂停，数字会在逗号出现的位置被截断，即“12p34”变成“1234”，“12,34”变成“12”。

有人对这个问题有任何见解吗？

编辑：这似乎只影响某些版本的android。在其他一些设备上测试时，特殊字符正常显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:13:56.973

你见过这个问题/答案吗：[用特殊字符在 android 上发起电话#](https://stackoverflow.com/questions/4815785/initiate-a-phone-call-on-android-with-special-character)

这可能根本不是电话间隙问题。

# php - 将密码传递到下一个 php 页面

> ID：13794173
> 
> 赞同：0
> 
> 时间：2012-12-10T02:26:54.610
> 
> 标签：php, database, passwords, phpmyadmin

想知道我是否能得到一些快速的帮助！创建一个简单的网站，出于管理员目的，我需要能够访问一个页面，我可以在其中上传和删除 phpmyadmin 数据库中的内容。我遇到的问题是能够将密码从输入的html页面发送到检查它的下一页。所以理想情况下，我将从“admin.html”开始，其中有一个密码文本框。然后下一页是“adminmenu.php”。只有当密码与数据库的用户匹配时，才能访问 adminmenu.php。（请记住，密码不像其他许多类似的问题那样存储在表格中）

这是我在 admin.html 上的表单（密码框）

```
<form name="input" action="adminmenu.php" onsubmit="return validateForm()" method="post">
Password: <input type="text" name="password">
<input type="submit" value="Submit">
</form> 
```

那么密码不是作为下一页的“密码”发送的吗？

在那之后，我真的不知道如何检查它。这就像我不确定的猜测：

```
$handle = mysql_connect("localhost", "uMoviesRoot","password") or die ('Error:' .mysql_error())
mysql_select_db("movies"); 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:35:40.660

编辑：

好吧，我想我明白你想要什么了。你有 admin.html：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Blah</title>
    </head>

    <body>
        <form action="adminhandle.php" method="POST">
            Password: <input type="password" name="pass" />
            <input type="submit" name="submit" value="Log on" />
        </form>
    </body>

</html> 
```

adminhandle.php：

```
<?php
session_start();

$handle = mysql_connect("localhost", "uMoviesRoot", "$_POST['pass']") or die ('Error:' .mysql_error())
mysql_select_db("movies");

if ($handle) $_SESSION['logged_in'] = true;
?> 
```

管理菜单.php：

```
<?php
session_start();

if ($_SESSION['logged_in']) {
    // show menu or whatever
} else {
    echo "Password failed!";
}
?> 
```

* * *

退后几步，获得一个很好的学习资源。我推荐[拉里·厄尔曼的书](https://rads.stackoverflow.com/amzn/click/com/0321784073)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:30:50.167

密码发送为

```
$_POST['password'] 
```

不是“密码”或“$密码”。

所以如果你想用它来连接mysql_connect，你需要做

```
mysql_connect("localhost", "uMoviesRoot", $_POST['password']) 
```

但是，您需要为您访问的每个新页面“保留”密码。您可以将其存储在会话中，但如果它位于共享托管服务器上，则不是一个好主意。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T02:30:49.983

有一些方法可以在一些 PHP 脚本之间传输数据。

最简单的是使用 Sessions。

一开始你必须做一个

```
session_start(); 
```

然后您可以使用特定于用户的 $_SESSION 数组。

所以至少你有：

```
<?php session_start(); $_SESSION["password"] = $_POST["password"]; mysql_connect(..., $_SESSION["password"]);...?> 
```

但要注意安全！如果您直接访问传输到 MySQL 的密码或任何其他字符串并且不为 SQL 注入解析它，则会存在许多安全风险！

# python - 使用 python 导入列表

> ID：13794174
> 
> 赞同：0
> 
> 时间：2012-12-10T02:26:55.463
> 
> 标签：python, https, proxy, io

我有一系列代理（大约 1000 个）需要身份验证才能登录。代理是`IP:PORT:USERNAME:PASSWORD`格式的。

我希望能够使用这些代理登录，然后能够使用每个代理输入依赖于代理的特定信息。我希望格式为 `IP:PORT:USERNAME:PASSWORD:INFORMATION`.

例如

```
188.60.2.3:8080:Admin:Password:Cheese
76.48.3.1:8080:Admin:Password:Milk 
```

我希望将“信息”部分输入网站上的文本框中。所以比如代理188.60.2.3需要在文本框中输入信息“Cheese”，76.48.3.1需要输入“Milk”。

我需要能够自动执行此操作，并通过导入 .txt 文件，并且能够登录到代理并在代理末尾插入信息。76.48.3.1 只能输入“牛奶”，不允许输入任何其他值。

我怎样才能使列表登录到一个代理，最后输入信息，然后转到下一个代理并使用 python 自动重复该过程？

这也需要 HTTPS 支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:56:48.540

读取表格分隔数据的一个好方法是[`csv`](http://docs.python.org/2/library/csv.html)与适当的`Dialect`.

# c# - 我可以使用 C# 编写 LXDE 面板插件吗？

> ID：13794177
> 
> 赞同：1
> 
> 时间：2012-12-10T02:27:21.167
> 
> 标签：c#, mono, gtk, gtk#

我想为 LXPanel 开发一个插件，它是 LXDE 的面板组件。他们有关于如何[使用 GTK+](http://wiki.lxde.org/en/How_to_write_plugins_for_LXPanel)创建一个的说明，但我更喜欢使用 C#。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:43:32.360

有人可能会纠正我，但我现在不知道这应该如何实现，因为您需要该文档中说明的这些开发库，除非开发人员至少不提供某种绑定的可能性它是通过例如 XFCE 和 python (pyxfce) 完成的，我没有看到这种情况发生。

例如，LXPanel 有一个关于 python 绑定的功能请求，但它已经开放了 3 年，到目前为止似乎还没有这方面的消息。

实际上，对我来说，用 C 语言编写面板插件的决定对我来说似乎是完全合乎逻辑的，LXDE 的设计初衷是即使在低端机器上也能运行，虽然用户可以运行用每种语言编写的程序，但底层基础应该与可能的。即使 C#、Java 和 Python 可能更容易处理，在我看来 C 是更明显的选择。

# python - 在 S3 上重命名文件

> ID：13794178
> 
> 赞同：-1
> 
> 时间：2012-12-10T02:27:31.097
> 
> 标签：python, django, amazon-s3, boto

> **可能重复：**
> [Rails 或 Django？（或其他？）](https://stackoverflow.com/questions/91846/rails-or-django-or-something-else)
> [Amazon S3 boto：如何重命名存储桶中的文件？](https://stackoverflow.com/questions/2481685/amazon-s3-boto-how-to-rename-a-file-in-a-bucket)

我正在使用这个： [http ://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)

我需要重命名一个文件，我该怎么做？

我彻底搜索了文档，找不到任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T02:58:04.623

您可以使用复制操作参见[http://docs.amazonwebservices.com/AmazonS3/latest/dev/CopyingObjectsExamples.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/CopyingObjectsExamples.html)。使用复制操作，您可以：

*   创建对象的其他副本

*   **通过复制对象并删除原始对象来重命名对象**

*   在 Amazon S3 位置（例如，北加州和欧盟）移动对象

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T05:22:53.700

SubRed 重命名 S3 对象是绝对正确的。

如果您在不编写任何代码的情况下执行此操作，则可以使用 Bucket Explorer，它会重命名整个文件夹（所有对象都以公共前缀开头，以“/”结尾）。

[**披露**：我是 Bucket Explorer 的开发者]

# asp.net - 通过 vb.net 向 Access 数据库添加新记录

> ID：13794180
> 
> 赞同：0
> 
> 时间：2012-12-10T02:27:47.620
> 
> 标签：asp.net, sql, vb.net

如果我在表本身中将其设置为 AutoID，是否需要在 vb 中生成一个新 ID？我目前有

```
Protected Sub deleteButton_Click(sender As Object, e As System.EventArgs) Handles deleteButton.Click
    Dim deleteSQL As String
    deleteSQL = "DELETE FROM Authors WHERE au_id=@au_id"
    Dim myConnection As New SqlConnection(connectionString)
    Dim myCommand As New SqlCommand(deleteSQL, myConnection)
    myCommand.Parameters.AddWithValue("@au_id", authorDropDownList.SelectedItem.Value)
    Dim successBoolean As Boolean = True
    Dim index As Integer = authorDropDownList.SelectedIndex
    Try
        myConnection.Open()
        successBoolean = myCommand.ExecuteNonQuery
        'authorLabel.Text = "Record Deleted"
        'authorLabel.Visible = True
    Catch ex As Exception
        successBoolean = False
        authorLabel.Text = "Error deleting author. " & ex.Message
        authorLabel.Visible = True
    Finally
        myConnection.Close()
    End Try
    If successBoolean Then
        FillAutherList(index)
        authorDropDownList_SelectedIndexChanged(sender, e)
        authorLabel.Text = "Record Deleted"
        authorLabel.Visible = True
    End If
End Sub

Dim insertSQL As New StringBuilder
    Dim currentDate As String
    currentDate = DateTime.Now.ToString
    insertSQL.Append("INSERT INTO Story_Table (Author,Content,Submission_Date)") 'Inserts new story
    insertSQL.Append(" VALUES (@Author,@Content,@Submission_Date)")             'Sets the story values
    Dim myConnection As New SqlConnection(connectionString)
    Dim myCommand As New SqlCommand(insertSQL.ToString, myConnection)
    With myCommand.Parameters                        'Do this next
        .AddWithValue("@Author", authorTextBox.Text)
        .AddWithValue("@Content", storyTextBox.Text)
        .AddWithValue("@Submission_Date", currentDate)
    End With
    Dim successBoolean As Boolean = True
    Try
        myConnection.Open()
        successBoolean = myCommand.ExecuteNonQuery
        resultLabel.Text = "Thanks for the Story! Look for it on the homepage."
        resultLabel.Visible = True
    Catch ex As Exception
        successBoolean = False
        resultLabel.Text = "Error inserting story. " & ex.Message
        resultLabel.Visible = True
        storyLabel.Text = storyTextBox.Text
        storyLabel.Visible = True
    Finally
        myConnection.Close()
    End Try` 
```

# c++ - 我必须通过“赛道”的多个检查点找到最短路径。如何使用 BFS 管理检查点？

> ID：13794181
> 
> 赞同：2
> 
> 时间：2012-12-10T02:27:54.220
> 
> 标签：c++, breadth-first-search

我试图解决的完整问题描述可以在这里找到：http: [//i.imgur.com/uOWe6.png](http://i.imgur.com/uOWe6.png)

我正在使用 BFS 并创建了 RaceTrack 对象。BFS 队列设置没有问题，如果我只需要找到通向一个目标的最短路径，这个项目将是小菜一碟（我认为）。但相反，我必须按顺序从起点经过每个检查站！有没有人知道如何用使用 BFS 的标准想法来实现这一点？我将包含我的代码，但请记住，它还没有完成，可能没有任何意义。“移动”方法是需要完成大部分工作的地方。

您会注意到我在 if 语句处停止了测试您移动到的空间是否为整数。

欢迎您提出建议。

```
#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include <list>
#include <set>

using namespace std;

class RaceTrack
{
public:
    RaceTrack() { count = 0;}

    bool isSolved()
    {
        if (solved == 1)
            return true;
        else
            return false;
    }

int solved;
string track;
int count;
set<char> prevChkPt;
};

int main()
{
    list<RaceTrack> q;  // queue for BFS
    set<RaceTrack> v; // set of visited tracks

    RaceTrack x;
    string sLine;
    vector<int> chkPts;
    int start;

    int w, h;
    int tmp = 0;

    cin >> w >> h;

for (int i = 0; i < h; i++)
{
cin >> sLine;
x.track += sLine;
}

q.push_back(x);

while (q.size() > 0 && x.isSolved() == false)
{
x = q.front();
q.pop_front();

start = x.track.find_first_of('0');

if (x.isSolved() == false && v.find(x) == v.end())
{
    v.insert(x);

    move (start, w, h, x, q, v, 'q');
    move (start, w, h, x, q, v, 'u');
    move (start, w, h, x, q, v, 'p');
    move (start, w, h, x, q, v, 'l');
    move (start, w, h, x, q, v, 'r');
    move (start, w, h, x, q, v, 'z');
    move (start, w, h, x, q, v, 'd');
    move (start, w, h, x, q, v, 'm');
}
}

if (x.isSolved == true)
    cout << x.count;
else
    cout << -1;

// for testing purposes only:
string quit;

// for testing purposes only:
cin >> quit;
if(quit == "quit")
    return 0;
}

void move (int start, int w, int h, RaceTrack x, list<RaceTrack> q, set<RaceTrack> v, char direction)
{
int d1, d2, d3, d4; // diagonal indices

if (direction == 'q') // diagonal top left
{
d1 = start - w - 1;

if (start % w == 0 || start < w)
    return;
else
{
    if (x.track[d1] == 'x')
        return;
    else if (x.track[d1] == ' ')
    {
        x.track[d1] = x.track[start];
        x.count++;
    }
    else if (isdigit(x.track[d1]))
        x.prevChkPt.insert(x.track[d1]);
}

}

if (v.find(x) == v.end())
    q.push_back(x);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:16:04.250

正如 didierc 提到的，您可能想查看[Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。

                                                         ![在此处输入图像描述](../Images/5a0d5dc8b66aa40a9b085872bcc0430a.png)

# node.js - 参数传递会导致 Node.js 中的内存泄漏

> ID：13794189
> 
> 赞同：1
> 
> 时间：2012-12-10T02:28:46.070
> 
> 标签：node.js, memory-leaks

我知道使用这样的闭包会导致内存泄漏，因为所有其他变量都没有释放。

```
function()
{
  var a = 0;
  var b = 1;
  sample_func( "123",function(){
    console.log(b+1);
  });
} 
```

但这是怎么做到的？

```
function()
{
   var a = 0;
   var b = 1;
   rtn_func(b);
}

var rtn_func = function(b){
    console.log(b+1);
} 
```

将变量作为参数传递给其他函数会导致 Node.js 中的内存泄漏吗？

更新：在 trn_func 之后，b 会自动释放吗？

# c# - 串口通讯，数据接收

> ID：13794190
> 
> 赞同：0
> 
> 时间：2012-12-10T02:29:06.350
> 
> 标签：c#, serial-port, checksum

我正在尝试使用串行端口与外部机器通信，我做了什么，发送一个得到肯定响应的命令然后发送 ENQ 并在输出中显示最终响应。

**第一个问题是输出结果重复了 3 次，这很奇怪，因为我没有在程序中使用任何循环，**

**第二个问题是我想提取结果以计算响应 BCC 我不确定如何从缓冲区读取和从缓冲区提取！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:08:41.620

当使用串行通信端口或其他类型的慢速数据传输机制时，您必须考虑到 CPU 可能比通过慢得多的通信端口传输数据要快得多。

我建议你看看这个堆栈溢出[从串口解析/格式化数据 - C#](https://stackoverflow.com/questions/9505197/parsing-formatting-data-from-serial-port-c-sharp)。

您将遇到的第二个问题是在字节流上放置一个结构，该结构将字节流中的各种消息分开。通常的方法是拥有一系列软件级别，一种[类似于 OSI 模型的协议栈，](http://en.wikipedia.org/wiki/OSI_model)以便软件的不同区域处理通信问题的不同方面或部分。

对于串行通信端口，通常有某种协议指定起始指示符字节、消息字节系列和结束指示符。

该协议指定传输的实际消息，以便发送方和接收方可以获取字节流并将其分割成单独的消息。然后将这些单独的消息提供给其他一些函数以实际解析并执行某些操作。

阅读您的源代码，您似乎需要重新考虑采用更模块化和更分层的方法的方法。

例如，您的端口接口层应该处理单个字节，以便将字节组装成消息。我将为此采取的方法是使用[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)方法（另请参阅[状态机 - 计算机科学基础](http://blog.markshead.com/869/state-machines-computer-science/)）。我会使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)，以便在组装消息时，任何想要组装消息的对象都将注册为侦听器，然后提供组装消息。

所以我会有一个处理通信端口事件的对象。该对象将从通信端口读取字节流，然后从流中组装单个消息的字节数组。我希望这将是一个单例对象，以确保只有一个对象与通信端口交互，因此该对象也将具有向通信端口写入消息的方法。

该对象还将实现观察者模式，以便其他对象可以注册通信端口消息。一旦收到完整的消息，通信端口对象就会将其提供给所有注册的侦听器。

# java - 将 JUnit ParentRunner 链接到 Clojure 源位置

> ID：13794191
> 
> 赞同：3
> 
> 时间：2012-12-10T02:29:11.873
> 
> 标签：java, eclipse, junit, clojure

我在 JUnit 中创建了一个自定义 ParentRunner 测试运行器，我用它来运行一组动态生成的测试——特别是在 Clojure 命名空间中运行一些声明。跑步者的源代码在这里：

[https://github.com/mikera/cljunit/blob/master/src/main/java/mikera/cljunit/NamespaceRunner.java](https://github.com/mikera/cljunit/blob/master/src/main/java/mikera/cljunit/NamespaceRunner.java)

我想以某种方式将测试结果链接到 Clojure 源文件位置，以便 IDE 集成正常工作（例如，双击 Eclipse 中的测试结果以查看相应的 Clojure 源）。

是否可以将 ParentRunner 配置为链接到自定义源位置？

# php - 从数据库中减去一个数字并乘以 2% +0.30

> ID：13794193
> 
> 赞同：0
> 
> 时间：2012-12-10T02:29:24.860
> 
> 标签：php

假设我已将以下内容存储在数据库中

```
withdraw fee = 2 
```

然后在提款时，我希望用户为他/她收到的任何金额支付 2% 的提款费用。鉴于下面的代码，它只扣除 2 美元，而不是扣除 %2 的余额。

在我的代码中，`$postd_cashout`是要支付的费用，余额是用户的余额

我应该对这条线做些什么改变才能让它工作

```
$postd_cashout = substr(number_format($ir['balance'], 3, '.', ','), 0, -1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:34:18.000

只需将余额乘以提款费作为百分比

```
$fees = ($ir['balance'] * $withdrawal_fee / 100); 
```

然后，您可以在计算中使用 $fees。

不要在计算之前使用 number_format ，因为您想避免逗号 - 将值转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:41:35.800

```
$postd_cashout = ($ir['balance']*(1.02)); 
```

这将导致预期金额的总提款加上该金额的 2%。但是，我不清楚这是否正是您想要实现的目标。提款人手头收到的金额将显示在 $ir['balance'] 中，而提款总额则反映在 $postd_cashout 中。

可选：

```
$withdrawalmultiplier = 1.02;
$postd_cashout = ($ir['balance']*($withdrawalmultiplier)); 
```

这允许您在代码中引用的任何位置更改费用金额，而不是硬编码静态数字。恕我直言，最初的例子更清楚。

最后：

```
$fee = ($postd_cashout - $ir['balance']) 
```

我想跟踪费用金额对于报告已支付的费用总和或逐项列出收据很有用，听起来这最终是您在重新阅读问题几次后想要的。如果费用金额是您所追求的，那么另一个答案更适合。

# javascript - 如何使用 JQuery 调用 SOAP Web 服务？

> ID：13794197
> 
> 赞同：0
> 
> 时间：2012-12-10T02:29:39.697
> 
> 标签：javascript, jquery, soap

我正在尝试调用 SOAP Web 服务。我在soapUI中尝试过它并且效果很好，所以我知道这是我非常简单的代码中的一个问题，加上我对它缺乏理解。

当我按下应该调用“signOn”的“测试”按钮时，我没有得到任何回应。我认为我的问题更多是 jQuery 问题而不是 SOAP 调用问题，因为 SOAP 片段已经在soapUI 中工作。

这是我的代码：

```
<html>
  <head>
    <title>SOAP JavaScript Client Test</title>
  </head>
  <body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
    function OnSuccess(data, status) {
        alert(data.d);
    }

    function signOn() {
      // build SOAP request
      var username = 'admin';
      var password = 'mypass';
      var webServiceURL = 'https://192.168.10.111:8090/services/AdminMgmtService/AdminMgmt';
      var soapMessage = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:omi="http://www.verimatrix.com/omi" xmlns:omit="http://www.verimatrix.com/schemas/OMItypes.xsd">' +
      '<soapenv:Header/>' +  '<soapenv:Body>' + '<omi:signOn>' +
      '<userAttributes>' +
      '<omit:userName>' + username + '</omit:userName>' +
      '<omit:password>' + password + '</omit:password>' +
      '</userAttributes>' + '</omi:signOn>' + '</soapenv:Body>' + '</soapenv:Envelope>';
      $.ajax({
        url: webServiceURL,
        type: "POST",
        dataType: "xml",
        data: soapMessage,
        processData: true,
        contentType: "text/xml; charset=\"utf-8\"",
        success: OnSuccess,
        error: OnError
      });
    }
    </script>
    <form name="Demo" action="" method="post">
      <div>
        <input type="button" value="test" onclick="signOn();" />
      </div>
    </form>
  </body>
<html> 
```

Firebug 返回响应：

```
OPTIONS AdminMgmt

200 OK

192.168.10.111:8090

0 B

192.168.10.111:8090

Response Headersview source
Allow   GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
Content-Length  0
Date    Mon, 10 Dec 2012 02:18:52 GMT
Server  Apache-Coyote/1.1
Request Headersview source
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Access-Control-Request-He...    content-type
Access-Control-Request-Me...    POST
Cache-Control   no-cache
Connection  keep-alive
Host    192.168.10.111:8090
Origin  null
Pragma  no-cache
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0 
```

预先感谢您的帮助。

# objective-c - An issue about local notification on iOS

> ID：13794202
> 
> 赞同：2
> 
> 时间：2012-12-10T02:30:16.343
> 
> 标签：objective-c, ios, uilocalnotification

I am now using local notification in an application, but I find something strange.

I set up and schedule a notification like this.

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil) {
    return;
}
NSDate *now = [[NSDate alloc] init];
now = [now dateByAddingTimeInterval:dayToFinish * 24 * 60 * 60];
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSHourCalendarUnit fromDate:now];

components = [[NSCalendar currentCalendar] components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:now];
int month = [components month];
int day = [components day];
int year = [components year];

NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setYear:year];
[dateComps setMonth:month];
[dateComps setDay:day];
[dateComps setHour:18];
[dateComps setMinute:15];
[dateComps setSecond:0];

//There are a lot to set up the fire date, you could ignore it.
NSDate *fireDate = [calendar dateFromComponents:dateComps];

localNotif.fireDate = fireDate;
localNotif.timeZone = [NSTimeZone defaultTimeZone];
localNotif.alertBody = [NSString stringWithFormat:@"Test message %@", self.name];
localNotif.applicationIconBadgeNumber = 1;

NSDictionary *infoDict = [NSDictionary dictionaryWithObject:self.name forKey:@"ListRecordName"];
localNotif.userInfo = infoDict;
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

This part of code can be invoked several times to schedule several local notifications and now the strange things come.

1.  The badge number remains one although there are more than one entry in the notification center.
2.  Once I click on one of the notification, all other notifications disappear. But I did not use cancelAllLocalNotifications method.

How can I fix this problem, thanks.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T05:12:24.683

It is not possible to update dynamically the badge number with local notifications while your app is in the background. You have to use push notifications.

# html - 文件上传成功打开新的空白页面，也允许“空/空白”上传

> ID：13794204
> 
> 赞同：0
> 
> 时间：2012-12-10T02:30:28.013
> 
> 标签：html, ajax, file-upload

以下代码正在运行，但有两个问题：它是它出现的网页上较大形式的一部分。

```
<FORM id="my_file_upld_form"
 style="display: inline;"
 METHOD="POST"
 ACTION="/cgi-bin/fileupload_ajax.pl"
    ENCTYPE="multipart/form-data">
    <INPUT TYPE="file" class="ajaxfileupload" NAME="myfile" SIZE="42">
    <input type="hidden" class="ajaxfileupload" name="fileupload" value="ajax_fileupload">
    <input class="ajaxfileupload" type="submit" value="Upload"/>
</FORM> 
```

1.  它允许“空白”或空（没有文件选择和点击上传按钮）上传。这导致服务器上出现 500 错误。
2.  更大的问题是：文件上传后，在浏览器中打开一个新的空白页面，用户必须使用后退按钮返回运行该页面的页面。无论 ajax 脚本是否返回任何内容，都会发生这种情况。

怎么修？如果需要，我愿意替换页面上的这段代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:33:37.850

如果没有您的 java 脚本代码，就很难准确判断出了什么问题。但是我想我知道如何解决你的一些问题。

1.  不要相信您需要在后端代码中处理的客户端能够处理为您提供不良数据的表单。您可以验证表单客户端，但也始终需要验证服务器端。

2.  我怀疑这个问题正在发生，因为您没有阻止 javascript 中的默认事件。在 jquery 你会做

    ```
    $("#my_file_upld_form").submit(function(e){
               e.preventDefault()
    }) 
    ```

# theory - 这个证明真的证明了停止的不可判定性吗？

> ID：13794209
> 
> 赞同：0
> 
> 时间：2012-12-10T02:30:53.837
> 
> 标签：theory, turing-machines

我想问几个关于以下证明的问题。证明最初来自教科书，然后是下面关于 stackoverflow 的问题。

[这个证明，停止问题‍​是不可判定的，是如何工作的？](https://stackoverflow.com/questions/8394455/how-does-this-proof-that-the-halting-problem-is-undecidable-work)

# 问题一：

下面的证明本质上是否使 H 成为其输入机器的模拟器？

换句话说，说 H = M 与证明中的以下描述之间有重要区别吗？

```
H([M,w]) = {accept if M accepts w}
         = {reject if M does not accept w.} 
```

# 问题2：

我的以下评论如何正确或不正确？

我认为停止问题是决定给定机器是否会停止而不管其输出（接受/拒绝）的问题。如果存在停止问题的解决方案，它必须是分析源代码的东西，如编译器/反编译器/反汇编器，而不是实际运行它。如果它需要运行它，显然它永远不会确定“否”的答案。

注意到证明中的明显问题，整个证明似乎没有显示停止问题的不可判定性。

相反，证明似乎表明了这一点：以下算法不会停止：

```
 boolean D()
    {
        return not D();
    } 
```

以下是 Sipser 从 Intro to the Theory of Computation 重新键入的相关证明。

**停机问题无法确定**

现在我们准备证明定理 4.11，语言的不可判定性

ATM = {[M,w] | M 是一个 TM 并且 M 接受 w}。

证明：我们假设ATM是可判定的，得到一个矛盾。假设 H 是 ATM 的决策者。在输入时，M 是一个 TM，w 是一个字符串，如果 M 接受 w，H 会停止并接受。此外，如果 M 未能接受 w，H 将停止并拒绝。换句话说，我们假设 H 是一个 TM，其中

```
H([M,w]) = {accept if M accepts w}
         = {reject if M does not accept w.} 
```

现在我们构造一个新的图灵机 D，其中 H 作为子程序。当 M 的输入是它自己的描述时，这个新的 TM 调用 H 来确定 M 做什么。一旦 D 确定了这个信息，它就会做相反的事情。也就是说，如果 M 接受则拒绝，如果 M 不接受则接受。以下是对 D 的描述。

```
D = "On input [M], where M is a TM:
1\. Run H on input [M, [M]].
2\. Output the opposite of what H outputs; that is, if H accepts, reject and if H rejects, accept." 
```

不要对根据自己的描述运行机器的想法感到困惑！这类似于以自身作为输入运行程序，在实践中偶尔会发生这种情况。例如，编译器是翻译其他程序的程序。Pascal 语言的编译器本身可能是用 Pascal 编写的，因此在其自身上运行该程序是有意义的。总之，

```
D([M]) = { accept if M does not accept [M]
       = { reject if M accepts [M] 
```

当我们以自己的描述作为输入运行 D 时会发生什么> 在这种情况下，我们得到：

```
D([D]) = {accept if D does not accept [D]
       = {reject if D accepts [D] 
```

不管 D 做什么，都是强制反其道而行之，这显然是矛盾的。因此，TM D 和 TM H 都不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:57:13.877

> 换句话说，说 H = M 与证明中的以下描述之间有重要区别吗？

H机器被称为通用图灵机（UTM），能够模拟任何其他图灵机，包括它自己。

如果 M 是像 H 这样的通用图灵机，可以说 H = M，否则这会很奇怪。

> 我认为停止问题是决定给定机器是否会停止而不管其输出（接受/拒绝）的问题。如果存在停止问题的解决方案，它必须是分析源代码的东西，如编译器/反编译器/反汇编器，而不是实际运行它。如果它需要运行它，显然它永远不会确定“否”的答案。

这就是为什么证明是基于矛盾的，而且很难理解。基本上它首先假设存在这样一台机器，它对任何给定的输入回答“是”或“否”。[假设]

我们称这台机器为 Q。假设 Q 是有效的并且它是一个 UTM，它可以模拟另一台机器 S，按照以下步骤工作：

1.  S 读取输入（程序及其输入）
2.  S 复制它刚刚读取的输入
3.  S 调用 Q 传递复制的输入
4.  S 等待 Q 回答（根据我们的假设，它总是会）

现在让我们想象一下输入 Q(S, S)。Q 将接收程序 S 并且 S 的参数是 S 本身。这个输入将使 S 无限期地调用 Q 并且永远不会停止。

由于 Q 和 S 是合法程序，但有一种输入使 Q 永远不会停止，所以 Q 是一台无法制造的机器，因此无法确定程序 S 是否停止。因此，我们有证据表明停止问题是不可判定的。

Sipser 很好地解释了这一点。现在再读一遍，看看你是否明白这个想法:)

现在，再次回答你的问题。图灵机是我们表示问题的最强大的机器。作为识别机器，它必须通过输入并运行算法来确定它是否有效。不运行算法就不可能知道算法的输出。

编译器只是语法和少量语义的翻译器。它无法预见人们将如何使用该程序以及输出将是什么。

# vba - Excel VBA：将散点图作为对象添加到工作表

> ID：13794210
> 
> 赞同：7
> 
> 时间：2012-12-10T02:31:44.143
> 
> 标签：vba, excel, charts

~~我正在寻找创建一个散点图，在按下按钮时，它会在其中创建一个散点图`Sheet 1`并`A2:A11`用作`x`值和`B2:B11`值`y`。~~

~~`A1:B3`使用底部的代码允许我根据（从[此处](http://www.programmersheaven.com/mb/vba/263264/263965/xy-scatter-curve/)获取）中的值创建散点图。它很接近，但不完全是我想要的。我怎样才能调整它以满足我的需要？~~

我现在已经设置好了，所以图表是根据我想要的值制作的，但我不能让它在`Sheet 1`. 我该怎么做呢？`.Location xlLocationAsObject`似乎不起作用。

```
Private Sub chartButton_Click()
    ActiveWorkbook.Charts.Add
    With ActiveWorkbook.ActiveChart
        'Data?
        .ChartType = xlXYScatter
        .SeriesCollection.NewSeries
        .SeriesCollection(1).Name = "=""Scatter Chart"""
        .SeriesCollection(1).XValues = "=Sheet1!$A$2:$A$11"
        .SeriesCollection(1).Values = "=Sheet1!$B$2:$B$11"

        'Location
        'DON'T KNOW WHAT TO PUT HERE
        '.location xlLocationAsObject doesn't work!

        'Titles
        .HasTitle = True
        .ChartTitle.Characters.Text = "Scatter Chart"
        .Axes(xlCategory, xlPrimary).HasTitle = True
        .Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "X values"
        .Axes(xlValue, xlPrimary).HasTitle = True
        .Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "Y values"
        .Axes(xlCategory).HasMajorGridlines = True

        'Formatting
        .Axes(xlCategory).HasMinorGridlines = False
        .Axes(xlValue).HasMajorGridlines = True
        .Axes(xlValue).HasMinorGridlines = False
        .HasLegend = False

    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T04:21:36.450

您编写的代码将图表添加为 a `Chart Sheet`，而不是 a 上的图表`Worksheet`

试试这个：

代替

```
ActiveWorkbook.Charts.Add
With ActiveWorkbook.ActiveChart 
```

和

```
Dim sh As Worksheet
Dim chrt As Chart

Set sh = ActiveWorkbook.Worksheets("Sheet1")
Set chrt = sh.Shapes.AddChart.Chart
With chrt 
```

然后你可以控制它的位置和大小

```
 .ChartArea.Left
    .ChartArea.Top 
    .ChartArea.Height
    .ChartArea.Width 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T14:23:38.497

使用时`Chart.Location`，需要指定位置：

```
.Location Where:=xlLocationAsObject, Name:="Sheet1" 
```

# javascript - 如何设置 $.fn。函数，所以它在调用时被执行？

> ID：13794211
> 
> 赞同：0
> 
> 时间：2012-12-10T02:31:53.397
> 
> 标签：javascript, jquery

我有以下代码：

```
 function init() {
        var $contentButtonPanel: JQuery = $('#content-button-panel')
        $contentButtonPanel
            .find('.arbo .toggle, .collapsible-list li:has(ul) > :first-child, .collapsible-list li:has(ul) > :first-child + span')
            .click(function (event) {
                $(this).toggleBranchOpen();
            });
    }

    $.fn.toggleBranchOpen = function () {
        this.each(function () {
            $(this).closest('li').toggleClass('closed');
        });
        return this;
    }; 
```

当我调试时，我可以看到 $(this).toggleBranchOpen(); 到达线。但是，代码不会进入该函数。

这是声明 toggleBranchOpen 的方式有问题吗？请注意，toggleBranchOpen 的唯一使用时间是在 init 函数单击事件中。我是否可以将该代码移入 init 并简化事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:46:46.677

请尝试以下代码：

```
function init() {
    $('#content-button-panel')
        .find('.arbo .toggle, .collapsible-list li:has(ul) > :first-child, .collapsible-list li:has(ul) > :first-child + span')
        .click(function (event) {
            $(this).closest('li').toggleClass('closed');
        });
} 
```

由于您表示不需要全局函数，因此我尝试稍微简化代码。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:39:15.317

声明没问题。由于您正在修改 jQuery 的原型，它将立即可供所有 jQuery 对象使用。

这是让我感到困惑的线，

```
var $contentButtonPanel: JQuery = $('#content-button-panel') 
```

我认为这只是因为您正在从较大的文件中复制和粘贴。我唯一有助于识别问题的建议是将一些调试信息放入此循环中；

```
this.each(function () {
    $(this).closest('li').toggleClass('closed');
}); 
```

除此之外，您的选择器是否有可能找不到任何`li`元素？

# java - spring security - 使用 PreAuthenticatedAuthenticationToken

> ID：13794213
> 
> 赞同：1
> 
> 时间：2012-12-10T02:32:15.150
> 
> 标签：java, spring-security

我一直在尝试 Spring Security，在构建了一个小原型之后，我在这里遇到了一个有趣的场景，我无法弄清楚我做错了什么。

这是一个简单的场景：用户请求试用。系统生成一个随机字符串并发送一个带有该字符串的链接。用户点击链接（或在他/她的浏览器地址栏中复制），系统重定向以设置密码。

在用户单击链接之前，一切正常。该链接是使用 Spring MVC 映射的，我的方法仅检查字符串是否有效且未过期。然后使用 PreAuthenticatedAuthenticationToken 我登录用户并重定向到密码页面。（见下面的代码）

```
try {
    SecurityIdentification securityIdentification = securityService.loadSecurityId(securityId);
    User user = securityIdentification.getUser();
    PreAuthenticatedAuthenticationToken preAuthenticatedAuthenticationToken = new PreAuthenticatedAuthenticationToken(user.getEmailAddress(), securityId, user.getAuthorities());

    Authentication authentication = authenticationManager.authenticate(preAuthenticatedAuthenticationToken);

    SecurityContext securityContext = SecurityContextHolder.getContext();
    securityContext.setAuthentication(authentication);

    return "redirect:/password";

} catch (AuthenticationException e) {
    model.addAttribute("message", e.getMessage());
    model.addAttribute(new TrialForm());
    return "trial";
} 
```

另外，这是我的上下文 xml。我只是为了节省空间而放豆子。:)

```
<context:component-scan
    base-package="xyz.com.security" />

<security:http
    pattern="/trial/**"
    security="none" />

<security:http>
    <security:intercept-url
        pattern="/**"
        access="ROLE_USER" />

    <security:anonymous
        username="guest"
        granted-authority="ROLE_GUEST"
        enabled="true" />

    <security:form-login default-target-url="/dashboard" />
    <security:logout />
    <security:remember-me />
</security:http>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="daoAuthenticationProvider" />
    <security:authentication-provider
        ref="preAuthenticatedAuthenticationProvider" />
</security:authentication-manager>

<bean
    id="authenticator"
    class="xyz.com.security.Authenticator" />

<bean
    id="encoder"
    class="org.springframework.security.crypto.password.StandardPasswordEncoder" />

<bean
    id="daoAuthenticationProvider"
    class="org.springframework.security.authentication.dao.DaoAuthenticationProvider"
>
    <property
        name="userDetailsService"
        ref="authenticator" />
    <property
        name="passwordEncoder"
        ref="encoder" />
</bean>

<bean
    id="preAuthenticatedAuthenticationProvider"
    class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider"
>
    <property
        name="preAuthenticatedUserDetailsService"
        ref="authenticator" />
</bean> 
```

我将 UserDetails 实现为我的实体“用户”，将 GrantedAuthority 实现为我的实体“角色”。我还实现了 AuthenticationUserDetailsS​​ervice，它在数据库中查找并加载我的用户。

现在......最后......：D我面临的问题是，当我使用上面的代码对我的用户进行预身份验证并重定向到密码页面时，spring security会向我显示登录页面而不是我期望的密码页面已通过身份验证的用户。

我见过一些实现，我的一个非常相似。唯一的区别是一些实现使用的 AbstractPreAuthenticatedProcessingFilter 但我看不到自己实现的理由。

你们对我缺少什么有任何想法吗？任何帮助都会很棒。谢谢你。

---------** 更新 **---------- 这是堆栈跟踪。

```
 11:19:05,874 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] (http-localhost-127.0.0.1-8080-1) Invoking afterPropertiesSet() on bean with name 'redirect:/password'
11:19:05,875 DEBUG [org.springframework.web.servlet.DispatcherServlet] (http-localhost-127.0.0.1-8080-1) Rendering view [org.springframework.web.servlet.view.RedirectView: name 'redirect:/password'; URL [/password]] in DispatcherServlet with name 'myapp'
11:19:05,878 DEBUG [org.springframework.web.servlet.DispatcherServlet] (http-localhost-127.0.0.1-8080-1) Successfully completed request
11:19:05,881 DEBUG [org.apache.tomcat.util.http.Cookies] (http-localhost-127.0.0.1-8080-1) Cookies: Parsing b[]: JSESSIONID=oos2stZVidFUWNWLtjCuFfaH.undefined
11:19:05,884 DEBUG [org.springframework.security.web.util.AntPathRequestMatcher] (http-localhost-127.0.0.1-8080-1) Checking match of request : '/password'; against '/trial/**'
11:19:05,887 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 1 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
11:19:05,889 DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] (http-localhost-127.0.0.1-8080-1) HttpSession returned null object for SPRING_SECURITY_CONTEXT
11:19:05,891 DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] (http-localhost-127.0.0.1-8080-1) No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@23bdc15c. A new one will be created.
11:19:05,897 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 2 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
11:19:05,899 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 3 of 11 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
11:19:05,901 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 4 of 11 in additional filter chain; firing Filter: 'DefaultLoginPageGeneratingFilter'
11:19:05,903 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 5 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
11:19:05,905 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 6 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
11:19:05,907 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 7 of 11 in additional filter chain; firing Filter: 'RememberMeAuthenticationFilter'
11:19:05,909 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
11:19:05,911 DEBUG [org.springframework.security.web.authentication.AnonymousAuthenticationFilter] (http-localhost-127.0.0.1-8080-1) Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@90545b24: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@12afc: RemoteIpAddress: 127.0.0.1; SessionId: oos2stZVidFUWNWLtjCuFfaH.undefined; Granted Authorities: ROLE_ANONYMOUS'
11:19:05,916 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
11:19:05,917 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
11:19:05,919 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /password at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
11:19:05,921 DEBUG [org.springframework.security.web.access.intercept.FilterSecurityInterceptor] (http-localhost-127.0.0.1-8080-1) Secure object: FilterInvocation: URL: /password; Attributes: [ROLE_USER]
11:19:05,923 DEBUG [org.springframework.security.web.access.intercept.FilterSecurityInterceptor] (http-localhost-127.0.0.1-8080-1) Previously Authenticated: org.springframework.security.authentication.AnonymousAuthenticationToken@90545b24: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@12afc: RemoteIpAddress: 127.0.0.1; SessionId: oos2stZVidFUWNWLtjCuFfaH.undefined; Granted Authorities: ROLE_ANONYMOUS
11:19:51,333 DEBUG [org.apache.catalina.session.ManagerBase] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Start expire sessions StandardManager at 1355177991333 sessioncount 0
11:19:51,339 DEBUG [org.apache.catalina.session.ManagerBase] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) End expire sessions StandardManager processingTime 6 expired sessions: 0
11:20:01,346 DEBUG [org.apache.catalina.session.ManagerBase] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) Start expire sessions StandardManager at 1355178001346 sessioncount 1
11:20:01,351 DEBUG [org.apache.catalina.session.ManagerBase] (ContainerBackgroundProcessor[StandardEngine[jboss.web]]) End expire sessions StandardManager processingTime 5 expired sessions: 0
11:20:20,500 DEBUG [org.springframework.security.access.vote.AffirmativeBased] (http-localhost-127.0.0.1-8080-1) Voter: org.springframework.security.access.vote.RoleVoter@50d9370d, returned: -1
11:20:20,512 DEBUG [org.springframework.security.access.vote.AffirmativeBased] (http-localhost-127.0.0.1-8080-1) Voter: org.springframework.security.access.vote.AuthenticatedVoter@64ad5ff2, returned: 0
11:20:20,520 DEBUG [org.springframework.security.web.access.ExceptionTranslationFilter] (http-localhost-127.0.0.1-8080-1) Access is denied (user is anonymous); redirecting to authentication entry point: org.springframework.security.access.AccessDeniedException: Access is denied
    at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83) [spring-security-core-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:206) [spring-security-core-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160) [spring-security-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [spring-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [spring-web-3.1.3.RELEASE.jar:3.1.3.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_34]

11:20:20,595 DEBUG [org.apache.tomcat.util.http.Parameters] (http-localhost-127.0.0.1-8080-1) Set encoding to ISO-8859-1
11:20:20,597 DEBUG [org.springframework.security.web.savedrequest.HttpSessionRequestCache] (http-localhost-127.0.0.1-8080-1) DefaultSavedRequest added to Session: DefaultSavedRequest[http://localhost:8080/myapp/password]
11:20:20,600 DEBUG [org.springframework.security.web.access.ExceptionTranslationFilter] (http-localhost-127.0.0.1-8080-1) Calling Authentication entry point.
11:20:20,602 DEBUG [org.springframework.security.web.DefaultRedirectStrategy] (http-localhost-127.0.0.1-8080-1) Redirecting to 'http://localhost:8080/myapp/spring_security_login'
11:20:20,603 DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] (http-localhost-127.0.0.1-8080-1) SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
11:20:20,605 DEBUG [org.springframework.security.web.context.SecurityContextPersistenceFilter] (http-localhost-127.0.0.1-8080-1) SecurityContextHolder now cleared, as request processing completed
11:20:20,610 DEBUG [org.apache.tomcat.util.http.Cookies] (http-localhost-127.0.0.1-8080-1) Cookies: Parsing b[]: JSESSIONID=oos2stZVidFUWNWLtjCuFfaH.undefined
11:20:20,612 DEBUG [org.springframework.security.web.util.AntPathRequestMatcher] (http-localhost-127.0.0.1-8080-1) Checking match of request : '/spring_security_login'; against '/trial/**'
11:20:20,615 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /spring_security_login at position 1 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
11:20:20,616 DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] (http-localhost-127.0.0.1-8080-1) HttpSession returned null object for SPRING_SECURITY_CONTEXT
11:20:20,618 DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] (http-localhost-127.0.0.1-8080-1) No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@23bdc15c. A new one will be created.
11:20:20,620 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /spring_security_login at position 2 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
11:20:20,622 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /spring_security_login at position 3 of 11 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
11:20:20,625 DEBUG [org.springframework.security.web.FilterChainProxy] (http-localhost-127.0.0.1-8080-1) /spring_security_login at position 4 of 11 in additional filter chain; firing Filter: 'DefaultLoginPageGeneratingFilter'
11:20:20,628 DEBUG [org.apache.tomcat.util.http.Parameters] (http-localhost-127.0.0.1-8080-1) Set encoding to ISO-8859-1
11:20:20,630 DEBUG [org.springframework.security.web.context.HttpSessionSecurityContextRepository] (http-localhost-127.0.0.1-8080-1) SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
11:20:20,633 DEBUG [org.springframework.security.web.context.SecurityContextPersistenceFilter] (http-localhost-127.0.0.1-8080-1) SecurityContextHolder now cleared, as request processing completed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:04:21.400

The error is somewhere in the code we cannot see.

The pattern `"/**"` includes `/password` so SS requires a `SecurityContext` with a `ROLE_USER` authority. Enable SS debug logs and show us the output (incl. exceptions).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:42:46.573

我对 Spring Security 的经验很少，但我怀疑你的用户没有 ROLE_USER，所以他被重定向到登录。您应该为 /password 添加新的 security:intercept-url 部分。

# django - django EAV过滤

> ID：13794214
> 
> 赞同：1
> 
> 时间：2012-12-10T02:32:45.287
> 
> 标签：django, entity-attribute-value

我有以下型号。

```
class Category(MPTTModel):
    name = models.CharField(max_length=100, null=False, blank=False)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')

    def __unicode__(self):
        return self.name

class Product(models.Model):
    name = models.CharField(max_length=250, null=False, blank=False)
    category = models.ForeignKey('Category')
    price = models.DecimalField(decimal_places=2, max_digits=7)

    def __unicode__(self):
        return self.name

class ProductAttribute(models.Model):
    products = models.ManyToManyField('Product')
    category = models.ForeignKey('Category')
    property = models.CharField(max_length=250, null=False, blank=False)
    value = models.CharField(max_length=250, null=False, blank=False) 
```

我需要能够根据给定的类别和给定的属性选择产品。

例如，如果我有产品“搅拌机”，我想选择给定类别中具有给定属性（例如品牌 = black & decker）的所有搅拌机。

# windows - Xna框架和matlab

> ID：13794216
> 
> 赞同：0
> 
> 时间：2012-12-10T02:33:31.263
> 
> 标签：windows, visual-studio, matlab, xna

我正在开发一款从 Matlab 读取实时数据的游戏。该游戏是为 Windows 操作系统而不是 XBox 或 WINdows Phone 开发的。有什么办法，我可以将matlab与XNA接口。我也可以使用通常的 Visual Studio 2008/2010 来开发游戏，而不是使用 Visual Studio Express for Windows Phone 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:47:39.120

XNA 与 C# 或 Visual Basic 一起使用，因此它本身无法与 MathLab 交互。我们需要知道您使用什么语言才能更好地帮助您。

您很可能正在寻找 C#。

这样的界面超出了我的范围；但是，为了让您开始，这里有一个问题/答案，它有一个指向 MathLabCentral for C# 的链接： [Calling a MATLAB function from C#](https://stackoverflow.com/questions/5901664/calling-a-matlab-function-from-c-sharp)

**对于问题的第二部分**：如果“通常”的 Visual Studio 是指付费版本，那么 2010 版本就可以使用。同样，在不知道您计划使用哪个版本的 XNA 的情况下，可能会有多个可能的答案。XNA 3.1 和更早的版本将适用于 2008。

如果 C# 是您的目标语言，您也可以使用 Visual C# 2010 Express。不知道。

[XNA 友好的 IDE](http://blogs.msdn.com/b/astebner/archive/2010/10/01/10070558.aspx)

# python - 使用 PYTHON 读取包含损坏数据的 Excel 文件

> ID：13794218
> 
> 赞同：0
> 
> 时间：2012-12-10T02:35:09.893
> 
> 标签：python

我正在尝试从应该有 5 列的 .CSV 文件中读取表格。但是，有些行有损坏的数据......使其超过 5 列。

**如何拒绝这些行并继续阅读？**

*使用

temp = read_table(文件夹 + r'\temp.txt, sep=r'\t')

只是给出一个错误并停止程序*

我是 Python 新手...请帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:48:24.543

研究使用 Python 的[csv 模块](http://docs.python.org/2/library/csv.html)。

如果不测试损坏的文件，很难说这是否可以解决问题，但是 csvreader 将 csv 文件的行读取为字符串列表，因此您可能会检查列表是否有 5 个元素并以这种方式进行。

代码示例：

```
out = []
with open('file.csv', 'rb') as csvfile:
    reader = csv.reader(csvfile, delimeter='    ')
    for row in reader:
        if len(row) == 5:
            out.append(row) 
```

# javascript - 在 JavaScript 中查找数组中的最大整数

> ID：13794225
> 
> 赞同：18
> 
> 时间：2012-12-10T02:35:47.243
> 
> 标签：javascript

> **可能重复：**
> [如何找到 JavaScript 数组中包含的最大数字？](https://stackoverflow.com/questions/1379553/how-might-i-find-the-largest-number-contained-in-a-javascript-array)

我无法让此代码正常工作。我已经有一段时间试图弄清楚了。当我查看控制台时，它只显示 0。我做错了什么？

这是我的代码：

```
var array = [3 , 6, 2, 56, 32, 5, 89, 32];
var largest= 0;

for (i=0; i<=largest;i++){
    if (array>largest) {
        var largest=array[i];
    }
}

console.log(largest); 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-10T02:38:56.150

```
var arr = [3, 6, 2, 56, 32, 5, 89, 32];
var largest = arr[0];

for (var i = 0; i < arr.length; i++) {
    if (largest < arr[i] ) {
        largest = arr[i];
    }
}
console.log(largest); 
```

*   您需要定义`i`，否则它会成为全局变量。
*   不要在循环中重新定义最大。
*   由于您正在遍历数组，因此请使用`i < array.length`而不是`i <= largest`.
*   由于您将数组中的每个项目与 进行比较`largest`，请使用`if(largest < array[i])`而不是`if(array > largest)`
*   您应该将最大的设置为等于数组中的第一个元素，因为如果所有数字都是负数怎么办？
*   `array``Array`是一个错误的变量名，因为它与（数组构造函数）太相似了。试试`arr`吧。

一个班轮：

`var largest = Math.max.apply(0, array);`

更多信息：[3 个数字的 Javascript max() 函数](https://stackoverflow.com/questions/1418569/javascript-max-function-for-3-numbers)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-10T02:36:45.433

下面的代码是固定的，应该可以工作。问题是在这一行中`if (array>largest) {`你没有提供数组的索引。通过将代码更改为此`if (array[i]>largest) {`它可以工作。请注意，我在 if 语句`[i]`的末尾添加了 。`array`

```
var array = [3 , 6, 2, 56, 32, 5, 89, 32];
var largest= 0;

for (i=0; i<=largest;i++){
    if (array[i]>largest) {
        var largest=array[i];
    }
}

console.log(largest); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-10T02:55:08.860

只有一行:)

```
var array = [3 , 6, 2, 56, 32, 5, 89, 32],
    largest = array.sort((a,b)=>a-b).reverse()[0]; 
```

甚至更好

```
...
    largest = array.sort((a,b)=>a-b)[array.length - 1]; 
```

UPD，当您在数组中添加例如 9 时，上面的所有代码都很糟糕，因为默认情况下，数字在排序中被视为字符串，有更好的版本

```
var array = [3 , 6, 2, 56, 32, 5, 89, 32, 9], largest;
array.sort(function(a, b) {
   largest = a > b ? a: b;
}); 
```

尽管在评论中建议的性能`forEach`循环更好 [http://jsperf.com/array-sorting-javascript-stack](http://jsperf.com/array-sorting-javascript-stack)

UPD2，好的，上面的代码有一些不好的部分，所以不能按预期工作。另一个尝试：

```
array.sort(function(a, b) {
  return a - b;
});
largest = array[array.length - 1]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-10T02:37:05.263

你有几个小错误。第一的：

```
if (array>largest) { 
```

它应该是：

```
if ( array[i]>largest) { 
```

第二：

```
for ( i = 0; i <= largest; i++) { 
```

应该

```
for (i = 0; i <= array.length; i++) { 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-10T02:39:13.487

```
var array = [3 , 6, 2, 56, 32, 5, 89, 32];
var largest= array[0];

for (i=0; i<=largest;i++){
    if (array[i]>largest) {
        largest=array[i];
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-10T02:38:38.333

您的代码中有两个问题。首先，`array>largest`应该是`array[i]>largest`。其次，您在`if`其中声明了一个新的最大变量，该变量与外部变量不同。`var`从新最大值的赋值中删除。

# c# - 在从 C# 到 C 的 P/Invoke 调用期间编组输出指针

> ID：13794227
> 
> 赞同：1
> 
> 时间：2012-12-10T02:36:20.177
> 
> 标签：c#, c, pointers, pinvoke, marshalling

我有一个带有这个函数的 C 库，它返回 4 个输出参数：

```
void __declspec(dllexport) demofun(double a[], double b[], double* output1, double* output2, double res[], double* output3) 
```

我编写了一个 C# 包装器来调用该函数：

```
namespace cwrapper
{
    public sealed class CWRAPPER
    {    
        private CWRAPPER() {}

        public static void demofun(double[] a, double[] b, double output1,
                            double output2, double[] res, double output3)
        {   // INPUTS: double[] a, double[] b
            // OUTPUTS: double[] res, double output1, double output2
            // Arrays a, b and res have the same length
            // Debug.Assert(a.length == b.length)

            int length = a.Length;
            CWRAPPERNative.demofun(a, b, length, ref output1, ref output2,
                         res, ref output3);
        }
    }

    [SuppressUnmanagedCodeSecurity]
    internal sealed class CWRAPPERNative
    {
        private CWRAPPERNative() {}

        [DllImport("my_cwrapper.dll", CallingConvention=CallingConvention.Cdecl,
             ExactSpelling=true, SetLastError=false)]
        internal static extern void demofun([In] double[] a, [In] double[] b,
                             int length, ref double output1, ref double output2,
                             [Out] double[] res, ref double output3);
    }
} 
```

`CWRAPPERNative.demofun`当我调用该方法时，一切正常。但是，当我调用该`CWRAPPER.demofun`方法时，只有`double[] res`正确通过。输出参数`output1`,`output2`和`output3`调用后不变。

```
// ...
// Initializing arrays A and B above here

double[] res = new double[A.Length];
double output1 = 0, output2 = 0, output3 = 0;

// Works partially: output1 to 3 unchanged
CWRAPPER.demofun(A, B, output1, output2, res, output3);

// Works correctly: all outputs are changed
CWRAPPERNative.demofun(A, B, A.Length, ref output1, ref output2, res, ref output3); 
```

我猜我错误地编组了指针参数，但我无法弄清楚修复。有人知道解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:53:48.997

您忘记在 demofun 中通过引用传递值：

```
public static void demofun(double[] a, double[] b, ref double output1,
   ref double output2, double[] res, ref double output3) 
```

值在方法内部发生变化，但未修改为原始调用者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:08:49.837

所有`double`参数`CWRAPPER.demofun`都是非易失性的，即函数不能更改值。要解决此问题，您需要进行如下更改：

```
public static void demofun(double[] a, double[] b,
  out double output1, out double output2, double[] res, out double output3) 
```

不过还有一个问题。C 函数的第 5 个参数`double res[]`是输入参数，但您的 P/Invoke 声明具有`[Out] double[] res`（输出参数）。我会像这样重写 P/Invoke 声明：

```
[DllImport("my_cwrapper.dll", CallingConvention=CallingConvention.Cdecl,
  ExactSpelling=true, SetLastError=false)]
static extern void demofun([In] double[] a, [In] double[] b, [In] int length,
  [Out] double output1, [Out] double output2, [In] double[] res, [Out] double output3); 
```

`out`带参数的示例方法实现；`OutOutTester`表明带`out`参数的方法不需要直接赋值：

```
public static void OutTester(out int a)
{
    a = 1;
}

public static void OutOutTester(out int a, out int b)
{
    OutTester(out a);
    b = 1;
} 
```

# .net - 如果无法轮询 CancellationToken，则提供取消

> ID：13794229
> 
> 赞同：3
> 
> 时间：2012-12-10T02:36:29.663
> 
> 标签：.net, vb.net, task-parallel-library, cancellation, cancellation-token

这是一个阻塞调用者线程但不支持取消的方法的（愚蠢的）示例：

```
Public Sub WorkUntil5()
    Threading.SpinWait.SpinUntil(Function() Now.Hour >= 17)
End Sub 
```

在最坏的情况下，调用此方法需要 17 小时才能返回。假装我无权访问此方法的源代码。**如何将调用包装在采用 CancellationToken 的方法中？**

目标是让`WorkUntil5()`运行直到请求取消。此时应使用任何可能的方式终止呼叫。

这是我自己想出的最好方法。它使用任务，但它仍然阻塞调用者的线程。感觉有些不对劲。`mres.Set()`认为一旦第一个呼叫返回，应该有更好的呼叫方式。

```
Public Sub WorkUntilYouGetBored(cancellationToken As Threading.CancellationToken)
    Dim mres As New Threading.ManualResetEventSlim

    Using cancellationToken.Register(Sub() mres.Set())
        Dim t = Task.Factory.StartNew(Sub() WorkUntil5())
        t.ContinueWith(Sub() mres.Set())

        mres.Wait()
    End Using

    If cancellationToken.IsCancellationRequested Then
        Console.WriteLine("You went home early.")
    Else
        Console.WriteLine("It's time to go home.")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:40:04.697

让我们重新表述这个问题。您有一个名为 WorkUntil5 的不可取消操作，您想取消该操作。你怎么能那样做？

Stephen Toub 在“[如何取消不可取消的异步操作？](http://blogs.msdn.com/b/pfxteam/archive/2012/10/05/how-do-i-cancel-non-cancelable-async-operations.aspx) ”中讨论了这种情况。

**唯一真正的解决方案**是修复 WorkUntil5 以便它允许取消。如果那不可能（为什么？），您必须确定“取消”是什么意思？

你想要_____吗：

1.  真的取消长操作，还是要
2.  别再等了？

这两种操作都不可靠，因为您无法知道在长时间运行的方法中还有什么未完成的。这不是 TPL 的设计问题，而是长时间运行方法的设计问题。

操作#1 是不可能的，因为该方法没有提供任何取消它的方法。

操作 #2 可以使用 Tasks 和 TaskCompletionSource 处理，但不是很可靠，因为您无法知道长操作是否留下垃圾或以异常终止。

Stephen Toub 展示了如何做到这一点，甚至提供了一个扩展方法来做到这一点：

```
public static async Task<T> WithCancellation<T>( 
this Task<T> task, CancellationToken cancellationToken) 
{ 
    var tcs = new TaskCompletionSource<bool>(); 
    using(cancellationToken.Register( 
            s => ((TaskCompletionSource<bool>)s).TrySetResult(true), tcs)) 
        if (task != await Task.WhenAny(task, tcs.Task)) 
            throw new OperationCanceledException(cancellationToken); 
    return await task; 
} 
```

# android - Android 布局未初始化

> ID：13794240
> 
> 赞同：0
> 
> 时间：2012-12-10T02:38:33.310
> 
> 标签：android, layout

所以这是我的主要布局，我想以编程方式添加项目，因为它们是动态的。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/mainlayout" >
</LinearLayout> 
```

问题是，当我寻找 LinearLayout 时；

```
LinearLayout layout = (LinearLayout)findViewById(R.id.mainlayout); 
```

`super.onCreate(savedInstanceState);`它返回后立即`null`。即使我等到`onStart()`or `onResume()`，它似乎也不存在。关于为什么会出现这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:14:11.433

**-**您应该立即使用**.** `super.onCreate(savedInstanceState)``setContentView(R.layout.youLayout)`

**-**只有**在**方法之后，`setContentView()`才能将 id 分配给`Views`，因为在此之前`Views` **没有初始化**。

# javascript - How to select and remove/hide a div with jquery?

> ID：13794241
> 
> 赞同：1
> 
> 时间：2012-12-10T02:38:34.013
> 
> 标签：javascript, jquery, html, css

I am trying to remove a div when on AJAX success but am having trouble doing so. On success, I see the words "Added" appear twice because I'm not able to select the 2 div's that contain it properly. Any advice on how to select it properly? javascript:

```
 success: function(message){                         
        alert("Deleting!");
        $this.closest('.image').find('.already_fav_content p').removeClass(); #doesn't work

        $this.closest('.image').find('.fav_content p').hide(); #doesn't work

        $this.closest('.image').find('.removebutton').hide(); #works

        $this.closest('.image').find('.already_favorited').removeClass(); #works

        $this.closest('.image').find('.fav').removeClass(); #works

div.fav{
    display: none;
    position:absolute; /* absolute position (so we can position it where we want)*/
    bottom:0px; /* position will be on bottom */
    left: 0px;
    /* styling bellow */
    background-color:#E99C07;
    font-family:  "Arial Black", Gadget, sans-serif;
    font-size:18px;
    font-weight:900;
    color:white;
    opacity:0.75; /* transparency */
    filter:alpha(opacity=70); /* IE transparency */
}
p.fav_content{
    padding:10px;
    margin:0px;
}

div.already_favorited{
    position:absolute; /* absolute position (so we can position it where we want)*/
    bottom:0px; /* position will be on bottom */
    left: 0px;
    /* styling bellow */
    background-color:#E99C07;
    font-family:  "Arial Black", Gadget, sans-serif;
    font-size:18px;
    font-weight:900;
    color:white;
    opacity:0.75; /* transparency */
    filter:alpha(opacity=70); /* IE transparency */
}
p.already_fav_content{
    padding:10px;
    margin:0px;
} 
```

html:

```
<div class="wrapper">

                <!-- image -->
                <div class="image" style="position: relative; left: 0; top: 0;">

                    <a href="/partners/Business/forbes">
                        <img src="http://videomuncher.com/static3/forbes.png" style="position: relative; width: 150px; top: 0; left: 0;">
                    </a>

                    <!-- already fav div -->
                        <div class="already_favorited">
                            <!-- fav content -->
                            <p class="already_fav_content">Added</p>    <!-- end fav content -->
                        </div>
                    <!-- end already fav div -->

                    <!--  munchbutton div --> 
                    <div class="munchbutton" style="display: none;">
                        <form method="post" action="/munch_video/   " class="removebutton"><div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="dKrS8NzqPWFLM6u8wJrAeid4nGw1avGK"></div>
                            <input type="hidden" value="Channel" class="playlist">
                            <input type="hidden" value="forbes" class="video_id">
                            <input type="hidden" value="forbes" class="video_title">
                            <input type="hidden" value="remove_video" class="remove">

                            <input type="submit" class="btn btn-danger" value="Remove">
                        </form>
                    </div>
                    <!-- end munchbutton div -->

                    <!-- fav div -->
                    <div class="fav">
                        <!-- fav content -->
                        <p class="fav_content">Added</p>    <!-- end fav content -->
                    </div>
                    <!-- end fav div -->

                </div>
                <!-- end image div -->

                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:42:10.230

It didn't wroked because selectors was wrong

```
 $this.closest('.image').find('.already_fav_content p').removeClass(); #doesn't work

    $this.closest('.image').find('.fav_content p').hide(); #doesn't work 
```

Change it to,

```
 $this.closest('.image').find('p.already_fav_content').removeClass();

    $this.closest('.image').find('p.fav_content').hide(); 
```

# java - 需要字符在输出行中打印

> ID：13794244
> 
> 赞同：-3
> 
> 时间：2012-12-10T02:38:37.773
> 
> 标签：java, class, character, boolean-logic, divide-and-conquer

当输入字母而不是整数时，我需要输出这些行。我不知道如何让它做到这一点：如果你能帮助我解决这个问题，我有代码和我需要的内容，谢谢。

```
This is what I am getting:
Input a valid whole number: abc
Input is not a valid number
Press any key to continue . . .

This is what I need:
Input a valid whole number: **ABC**
**ABC** is not a valid number
Press any key to continue . . .

below is what i have so far:

import java.io.PrintStream;
import java.util.Scanner;

public class FinalPractice
{
    public static void main(String [] args)
    {
        Scanner scanner = new Scanner( System.in );
        PrintStream out = System.out;

        out.print( "Input a valid whole number: " );

        String input = scanner.next();
        int number;

        try {
            number = Integer.parseInt(input);
        } catch (Exception e) {
            out.println("Input is not a valid number");
            return;
        }

        if (number < 0) {
            out.println(number + " is not a valid number");
            return;
        }

        printDivisors(number);
    }

    private static void printDivisors(int x){
        PrintStream out = System.out;
        for (int i=1; i<x; i++) {
            if (isDivisibleBy(x, i)){
                out.println(x + " is divisible by " + i);
            } else {
                out.println(x + " is not divisible by " + i);
            }
        }
    }

    private static Boolean isDivisibleBy(int x, int divisor){
        while (x > 0) {
            x -= divisor;
            if (x == 0){
                return true;
            }
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:47:58.247

如果我理解正确，您希望您的错误消息包含用户实际输入的内容。改变

```
out.println("Input is not a valid number"); 
```

到

```
out.println (input + " is not a valid number"); 
```

这需要您的变量`input`，将其与字符串的其余部分合并，然后将其显示到输出控制台。

# jquery-mobile - 使用 jQuery mobile 下载的文件

> ID：13794248
> 
> 赞同：4
> 
> 时间：2012-12-10T02:39:00.800
> 
> 标签：jquery-mobile

我是 jquery mobile 的新手，尝试在我的 jquery mobile 项目中链接文件以供下载时出现错误。我希望用户能够从应用程序下载 .zip 文件，但会出现页面加载错误，或者在新页面中显示未定义。我尝试使用锚标记链接要下载的文件，但它似乎无法正常工作。我知道 jquery mobile 使用了锚标记，所以我不知道是否需要做一些特别的事情。有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T04:12:38.127

当 jQuery Mobile 假定链接是一个页面并尝试 AJAX 页面加载时，您可能会遇到异常。禁用链接上的 AJAX 加载。

```
<a href="yourfile.zip" data-ajax="false">Link</a> 
```

而且我不知道典型的移动浏览器将如何处理指向 zip 文件的链接。

# ruby-on-rails - 根据给定的名称和 +1 计数器构造一个用户名（如果用户名已经存在）

> ID：13794250
> 
> 赞同：2
> 
> 时间：2012-12-10T02:39:11.270
> 
> 标签：ruby-on-rails, ruby

我尝试根据给定的名称构建用户名。由于很多人都被命名为“约翰”，我需要以某种方式检查这一点并通过 +1 计数来创建它。

我有点迷失在如何迭代 ActiveRecord 以在这种情况下找到一个名为 的用户名`john`，然后如果已经存在则尝试`john1`，如果不可用则尝试`john2`等等。我可以假设它会使用`while`，但我不知道如何针对这种情况对其进行迭代。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:57:41.790

为了不多次访问数据库，获取与名称匹配的用户列表，检查用户计数，将计数附加到名称，然后检查已加载的集合以获取新名称。

它看起来像这样：

```
name = params[:name]
users = User.where(User.arel_table[:name].matches("#{params[:name]}%")).to_a
count = users.length

name_without_collision = if count > 0
  loop do
    break "#{name}#{count}" unless users.any? { |u| u.name == "#{name}#{count}" }
    count += 1
  end
else
  name
end 
```

由于您调用`to_a`的是`ActiveRecord::Relation`，因此您不必担心不小心将多个查询发送到数据库，因为它正在转换为标准的 Ruby 数组。

# android - Android 与桌面应用程序

> ID：13794257
> 
> 赞同：1
> 
> 时间：2012-12-10T02:40:06.883
> 
> 标签：android, jsoup

我不确定如何描述这个问题，但基本上，我正在使用 JSoup 解析一些 html 并提取文章文本。我使用的方法是：

```
 public static String getArticle(String articleLink) {
    Log.i("article link", articleLink);
    Document doc = null;
    try {
        doc = Jsoup.connect(articleLink).timeout(10000).get(); 
    } catch (IOException ioe) {
        return null;
    }
    Elements articleBody = doc.select("div.article-body");
    Element first = articleBody.first();
    return first.text();
} 
```

当我拉出这段代码，并在 Netbeans 中创建一个示例程序，并传递到页面的链接时，它返回文章就好了。但是，当我在我的 android 设备上运行它时，我在“return first.text()”处得到一个空指针。

我不确定这是怎么回事。该应用程序已发布并一直在运行，但是突然之间，它开始崩溃，使我相信网页的布局发生了一些变化，但是我只是运行了独立程序，并在同一篇文章中传递了链接，并且可以运行在我的电脑上很好，但我在 android 上得到了 nullPointer。相同版本的 jsoup 也有，有什么想法吗？

更新： doc 变量的值是：

```
<!DOCTYPE html>
<html>
<head> 
<title>Redirecting...</title> 
<meta http-equiv="refresh"     content="0;url=http://m.ncataggies.com/mobile/ViewArticle.dbml?    atclid=205823481&amp;DB_MENU_ID=&amp;SPSID=&amp;SPID=&amp;DB_OEM_ID=24500" /> 
<meta name="ROBOTS" content="NOINDEX,NOFOLLOW" /> 
</head> 
<body>  
</body>
</html> 
```

所以有些东西确实改变了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:11:34.857

服务器`ncataggies.com`正在检查请求中的**用户代理标头**，并向移动浏览器提供不同的页面。因为您没有指定用户代理，所以服务器会看到 Android 提供的默认代理，它将其标识为移动浏览器。

在[jsoup](http://jsoup.org/)中，您可以像这样设置用户代理：

```
String ua = "Mozilla"; // I'd suggest using your current browser as reference    
doc = Jsoup.connect(url).userAgent(ua).timeout(10000).get(); 
```

[您可以在此处](http://whatsmyuseragent.com/)查看您当前的用户代理。

# android - Android：显示点击的目标对象的详细信息

> ID：13794268
> 
> 赞同：0
> 
> 时间：2012-12-10T02:42:00.077
> 
> 标签：android, parameter-passing, click

我有contactmanager.java 来显示读取并显示电话中的联系人。当我单击某些联系人列表时，它不会显示确切的联系人详细信息。我可以知道为什么吗？

```
 /*
 * Copyright (C) 2009 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.contactmanager;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public final class ContactManager extends Activity implements OnItemClickListener
{

    public static final String TAG = "ContactManager";

    private Button mAddAccountButton;
    private ListView mContactList;
    private boolean mShowInvisible;
    //public BooleanObservable ShowInvisible = new BooleanObservable(false);
    private CheckBox mShowInvisibleControl;

    /**
     * Called when the activity is first created. Responsible for initializing the UI.
     */

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        Log.v(TAG, "Activity State: onCreate()");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contact_manager);

        // Obtain handles to UI objects
        mAddAccountButton = (Button) findViewById(R.id.addContactButton);
        mContactList = (ListView) findViewById(R.id.contactList);
        mShowInvisibleControl = (CheckBox) findViewById(R.id.showInvisible);

        // Initialise class properties
        mShowInvisible = false;
        mShowInvisibleControl.setChecked(mShowInvisible);

        // Register handler for UI elements
        mAddAccountButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Log.d(TAG, "mAddAccountButton clicked");
                launchContactAdder();
            }
        });
        mShowInvisibleControl.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
            {
                Log.d(TAG, "mShowInvisibleControl changed: " + isChecked);
                mShowInvisible = isChecked;
                populateContactList();
            }
        });

        mContactList = (ListView) findViewById(R.id.contactList);
        mContactList.setOnItemClickListener(this);

        // Populate the contact list
        populateContactList();
    }

    /**
     * Populate the contact list based on account currently selected in the account spinner.
     */
    private void populateContactList() {
        // Build adapter with contact entries
        Cursor cursor = getContacts();
        String[] fields = new String[] {
                ContactsContract.Data.DISPLAY_NAME,
        };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry, cursor,
                fields, new int[] {R.id.contactEntryText});
        mContactList.setAdapter(adapter);
    }

    /**
     * Obtains the contact list for the currently selected account.
     *
     * @return A cursor for for accessing the contact list.
     */
    private Cursor getContacts()
    {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        Log.i("Uri ContactsContract.Contacts.CONTENT_URI" + ContactsContract.Contacts.CONTENT_URI, null, null);

        String[] projection = new String[]
                {
                ContactsContract.Contacts._ID,
                ContactsContract.Contacts.DISPLAY_NAME,
                //ContactsContract.Contacts.DISPLAY_PHONE
                };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible ? "0" : "1") + "'";
        //String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" + (mShowInvisible.get() ? "0" : "1") + "'";
        String[] selectionArgs = null;
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

        return this.managedQuery(uri, projection, selection, selectionArgs, sortOrder);
    }

    /**
     * Launches the ContactAdder activity to add a new contact to the selected account.
     */
    protected void launchContactAdder()
    {
        Intent i = new Intent(this, ContactAdder.class);
        startActivity(i);
    }

    public void onItemClick(AdapterView<?> l, View v, int position, long id) {
        Log.i("TAG", "You clicked item " + id + " at position " + position);
        // Here you start the intent to show the contact details
     // selected item
        //String contactDetails = (String)(mContactList.getItemAtPosition(position));
        //Uri contactDetails = ContactsContract.Contacts.CONTENT_URI;

        Cursor cursor = getContacts();
        //Cursor emailCur = getContacts();
        cursor.moveToPosition(position);
        String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        int phone = cursor.getInt(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));
        //String email = emailCur.getColumnName(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

        // Launching new Activity on selecting single List Item
        Intent i = new Intent(getApplicationContext(), SingleListContact.class);
        SingleListContact.PutDetails(ContactsContract.Contacts._ID, name, phone,null );

        Log.i("Show Contact Clicked: ",  name);
        // sending data to new activity
        //i.putExtra("Contact Person", contactDetails);
        startActivity(i);

    }

} 
```

和 SingleListContent.java

```
package com.example.android.contactmanager;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;
import android.widget.EditText;
import android.widget.TextView;

public class SingleListContact extends Activity{

    static int ContactPhone;
    static String ContactID, ContactName, ContactEmail;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.single_list_contact_view);

        EditText txtContact = (EditText) findViewById(R.id.editText1);
        txtContact.setText(ContactName);

//        EditText txtContact2 = (EditText) findViewById(R.id.editText2);
//        txtContact2.setText(ContactPhone);

        EditText txtContact3 = (EditText) findViewById(R.id.editText3);
        txtContact3.setText(ContactEmail);

// 
//        Intent i = getIntent();
//        // getting attached intent data
//        String contact = i.getStringExtra("contact");
//        // displaying selected product name
//        txtContact.setText(contact);
        Log.e("test", ContactID +" & " + ContactName); 

    }

    static void PutDetails (String id, String name, int phone, String email)
    {
        ContactID = id;
        ContactName = name;
        ContactPhone = phone;
        ContactEmail = email;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:20:46.380

你做错了，这就是为什么它不起作用。

在第一个代码片段中，您在 PutDetails 方法中传递了错误的值。

对于您传递的名称 ContactsContract.Data.DISPLAY_NAME 这不是名称，它是代表电话簿的 contactName 列的字符串。因此，要获得名称，请使用以下内容。

```
cursor.moveToPosition(position);
String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)); 
```

对于电子邮件，您发送的是空值，因此电子邮件肯定为空。如果您想要联系人的电子邮件，请类似地使用

```
String email = emailCur.getString(
              emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
 String emailType = emailCur.getString(
              emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE)); 
```

在这里我可以看到您只使用姓名和电子邮件。但是，如果您想要电话号码，那么您也必须找到它，因为在这里您不会发送任何电话号码，而只会发送职位。

# download - 有没有办法下载整个 Vbulletin 论坛？

> ID：13794269
> 
> 赞同：1
> 
> 时间：2012-12-10T02:42:03.100
> 
> 标签：download, forum, vbulletin

有没有办法下载整个 Vbulletin 论坛？它可能只是在文本文件或其他任何文件中，对我来说无关紧要，但外观相同的 html 文件会更可取。

我想要论坛的离线副本。

编辑：论坛是密码锁定的，我必须在论坛变得可见之前登录。因此，除非您可以先登录，否则我认为您不能只使用要下载的脚本来定位它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:43:10.283

如果您使用的是 Linux，则可以使用该`wget`工具执行此操作：

```
wget --recursive http://www.websiteurl.com/ 
```

[wget](http://www.thegeekstuff.com/2009/09/the-ultimate-wget-download-guide-with-15-awesome-examples/)的一些其他示例。

# c - 在 C 中为变量分配 printf 语句时，变量存储了什么

> ID：13794270
> 
> 赞同：-3
> 
> 时间：2012-12-10T02:42:05.677
> 
> 标签：c, printf

```
 void main(){
       int i;
       i=printf("how r u?\n");
       i=printf("%d",i);
       printf("%d",i);} 
```

上面的代码给出的结果是：怎么ru？91 我的问题：如何存储 9 和 1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:44:27.623

从[手册页](http://linux.die.net/man/3/printf)：*成功返回后，这些函数返回打印的字符数......如果遇到输出错误，则返回负值。*

所以你得到`9`和`i`因为分别`printf`写出`9`和`1`字符。

这也是相关的：[为什么 printf 返回一个值？](https://stackoverflow.com/questions/13535557/why-does-printf-return-a-value)

# php - Javascript 转义等号 PHP

> ID：13794271
> 
> 赞同：0
> 
> 时间：2012-12-10T02:42:06.947
> 
> 标签：php, javascript, html, ajax

我有以下代码：

```
print "<TR><TD>".$data->pass_name."</TD><TD><span id='credit'>".$data->credit_left."</span></TD><TD><input type='button' value='- 1' onclick='removeOneCredit(pass_id\=".$data->pass_id."&credit_left\=".$data->credit_left.");'></TD></TR>\n"; 
```

我试图转义相等的地方，以便它在函数中传递，因为它需要是 url 中的查询（呈现的代码将是这样的：

```
<input type='button' value='- 1' onclick='removeOneCredit(pass_id\=5&credit_left\=2");'> 
```

但是我不断收到错误，我用来转义 = 的 \ 无效。我将如何转义我的 = 以便它可以传递到我的 js 函数的参数中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:47:45.670

您不需要转义`=`，您需要做的是引用字符串。

```
print "<TR><TD>".$data->pass_name."</TD><TD><span id='credit'>".$data->credit_left."</span></TD>
       <TD><input type='button' value='- 1' onclick='removeOneCredit(\"pass_id=".$data->pass_id."&credit_left=".$data->credit_left."\");'></TD></TR>\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:47:55.743

您忘记在要传递的字符串周围加上引号`removeOneCredit`

```
<input ... onclick='removeOneCredit("pass_id=5&credit_left=2");'> 
```

# gcc - 错误：-march= 开关的错误值

> ID：13794272
> 
> 赞同：5
> 
> 时间：2012-12-10T02:42:07.990
> 
> 标签：gcc, compiler-errors, makefile, arm, embedded

我写了一个 Makefile，但我无法让它工作。我有一个选项应该选择要编译到哪个处理器。但是，当我从命令行运行时`make`，它会说：

```
tandex@tandex-P-6860FX:~/emulators/nintendo sdks/3DS SDK [HomeBrew]$ make
gcc -march=arm7tdmi -static -fexceptions -fnon-call-exceptions -fstack-check test.c -c
test.c:1:0: error: bad value (arm7tdmi) for -march= switch

make: *** [ALL] Error 1 
```

但是在 gcc 的手册页中，它指出 arm7tdmi 是一个允许的值。我错过了什么吗？

生成文件：

```
#3DS Compilation Makefile (c) TanDex (TEQ)RunawayFreelancers
#
#Version 0.99 (Alpha) For *nix Devices
#
#Please Check Back Soon for 3rd SDK

#SELECT THE COMPILER TO USE! GCC RECOMMENDED!
#FOR SANITY SAKE, USE C FILES WITH GCC AND CPP FILES WITH G++
CC=gcc
#CC=g++

#OBJECTCOPY REFERENCE, DO NOT REMOVE
OBJC=objcopy
OBJREFS= -O Binary

#SELECT THE PROCESSOR TO TUNE IT TO. ARMV7 (Nintendo DS) or ARMV9(Nintendo DS
(Graphical Support))
#or ARM11 Core ARM1176JZ-S and ARM1176JZF-S (3DS Processor? Not Sure if Correct. Try
and see if they Work?)
#
#NOTE: DS GAMES REQUIRE BOTH A ARM7 AND ARM9 BINARY. RUN THIS TWICE (ONCE FOR EACH)
#
#UNCOMMENT FOR PROCESOR

PROCESSOR=arm7tdmi
#PROCESSOR=arm946e-s
#PROCESSOR=arm1176jz-s
#PROCESSOR=arm1176jzf-s

#FILES
#
#PLACE ALL OF THE FILES HERE, THAT ARE BEING COMPILED!
FILES=test.c

#SET BIN FILE NAME BASED ON PROCESSOR SELECTED
ifeq($(PROCESSOR),arm7tdmi)\
NAME=ARM7.BIN
ifeq($(PROCESSOR), arm946e-s)\
NAME=ARM9.BIN
ifeq($(PROCESSOR), arm1176jz-s)\
NAME=ARM11.BIN
ifeq($(PROCESSOR), arm1176jzf-s)\
NAME=ARM11.BIN

#CREATE OBJECTS
ifeq($(CC), gcc)\
OBJECTS=$(FILES:.c=.o)
ifeq($(CC), g++)\
OBJECTS=$(FILES:.cpp=.o)

#FLAGS! DO NOT CHANGE THESE!!!!!!!!!!! THAT MEANS YOU!!!!!
#
#FOR THOSE WHO WANT TO KNOW WHAT THESE DO, HERE THEY ARE:
#-mtune=$(PROCESSOR)        FORE THE COMPILER TO TUNE OUTPUT TO THE SPECIFIED
PROCESSOR
#-static            REQUIRED FOR CLEAN BINARY OUTPUT?? (NOT SURE WHAT THIS
DOES, BUT WAS SUGESTED ON A POST ON STACKOVERFLOW)
#-fexceptions           FORCE EXCEPTIONS
#-fnon-call-exceptions      FORCE EXCEPTIONS TO ONLY BE RETURNED BY THE SYSTEM
(MEMORY AND FPU INSTRUTIONS FOR EXAMPLE)
#-fstack-check          FORCE STACK CHECKING (DS / 3DS USE AWKWARD STACK
IMPLEMENTATION)
CFLAGS=-march=$(PROCESSOR) -static -fexceptions -fnon-call-exceptions -fstack-check

ALL:
$(CC) $(CFLAGS) $(FILES) -c
.c.o:
$(OBJC) $(OBJREFS) $(OBJECTS) $(NAME)
.cpp.o:
$(OBJC) $(OBJREFS) $(OBJECTS) $(NAME) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T02:44:48.533

您可能没有调用正确的 gcc。您似乎在调用系统中安装的 gcc，而不是 3DS SDK 附带的 gcc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T10:06:42.910

看来问题出在`-march=arm7tdmi`.

我认为解决方法是避免使用`-march=arm7tdmi`; 和 use `-march=cpu-type`，其中是GCC 手册的[3.17.4 ARM Options](https://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html)`cpu-type`中列出的选项之一。

这是页面的一部分：

> -march=名字
> 
> 这指定了目标 ARM 体系结构的名称。GCC 使用这个名称来确定它在生成汇编代码时可以发出什么样的指令。此选项可以与 -mcpu= 选项一起使用或代替 -mcpu= 选项。允许的名称有：'armv2'、'armv2a'、'armv3'、'armv3m'、'armv4'、'armv4t'、'armv5'、'armv5t'、'armv5e'、'armv5te'、'armv6'、'armv6j '、'armv6t2'、'armv6z'、'armv6kz'、'armv6-m'、'armv7'、'armv7-a'、'armv7-r'、'armv7-m'、'armv7e-m'、'armv7ve '、'armv8-a'、'armv8-a+crc'、'iwmmxt'、'iwmmxt2'、'ep9312'。

# php - PHP按钮操作不起作用

> ID：13794274
> 
> 赞同：0
> 
> 时间：2012-12-10T02:42:18.023
> 
> 标签：php

我在 PHP 中的提交按钮上实现的操作未执行。一切正常，没有错误，但是当我单击按钮时没有任何反应。Notepad++ 看到该文件`lines.php`已被修改。

```
<html>
<head>
    <title>
        Watch your Language
    </title>
</head>
<body>
    <H2 align="center">
        <form method="post">
            <input type="submit" onclick="English()" name="introdu" value="Choose english">
        </form>
        <a href="index.php">Home</a> | <a href="bot.php">Talk to robot</a>
    </h2>
</body>
</html>

 <script type="text/javascript">
function English()
{<?php
         $myFile = "lines.php";
         $fh = fopen($myFile, 'w');

$eng = <<<TEST
<?php
class TextToSpeech {
    public $mp3data;
    function __construct($text="") {
        $text = trim($text);
        if(!empty($text)) {
            $text = urlencode($text);
            $lang_en="http://translate.google.com/translate_tts?tl=en&q=\{$text}";
            $lang_ro="http://translate.google.com/translate_tts?tl=ro&q=\{$text}";
            $lang_fr="http://translate.google.com/translate_tts?tl=fr&q=\{$text}";
            $language=$lang_en;
            $this->mp3data = file_get_contents($language);
        }
    }

    function setText($text) {
        $text = trim($text);
        if(!empty($text)) {
            $text = urlencode($text);
            $en="http://translate.google.com/translate_tts?tl=en&q=\{$text}";
            $ro="http://translate.google.com/translate_tts?tl=ro&q=\{$text}";
            $fr="http://translate.google.com/translate_tts?tl=fr&q=\{$text}";
            $lang=$en;
            $this->mp3data = file_get_contents($lang);
            return  $this->mp3data;
        } else { return false; }
    }

    function saveToFile($filename) {
        $filename = trim($filename);
        if(!empty($filename)) {
            return file_put_contents($filename,$this->mp3data);
        } else { return false; }
    }
}
?>
TEST;
echo $eng;
fwrite($fh, $eng);
fclose($fh); 
?>
alert("File created");
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:58:42.013

此代码使用相同的方法，并且可以完美运行

```
<html>
<head><title>Umanizator</title>

</head>
<body><H2 align="center">
<form method="post">
Intrebare
 <input type="text" name="intrebare">
Raspuns
 <input type="text" name="raspuns">
<input type="submit" onclick="Confirmare()" name="introdu" value="Exporta">
</form>
<a href="index.php">Home</a> | <a href="bot.php">Discuta cu robotul</a></h2>
</body>
</html>

<?php
// Make a MySQL Connection
mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("robo") or die(mysql_error());

error_reporting(E_ALL & ~E_NOTICE);
$intrebare=$_POST['intrebare'];
$raspuns=$_POST['raspuns'];
$cod1='mysql_query("INSERT INTO dialog  (intrebare, raspuns) VALUES (\'';
$cod2="'  ,  '";
$cod3="') \")  or die(mysql_error());";

$myFile = "lines.txt";
$intrebari = "intrebari.txt";
$fh = fopen($myFile, 'a') or die("can't open file");
$op = fopen($intrebari, 'a') or die("can't open file");

$delimiteaza="\n /*---*/  \n";

fwrite($fh, $delimiteaza);
fwrite($fh, $cod1);
fwrite($fh, $intrebare);
fwrite($fh, $cod2);
fwrite($fh, $raspuns);
fwrite($fh, $cod3);
fwrite($op, $intrebare);
fwrite($op, $delimiteaza);

fclose($fh);

?>

 <script type="text/javascript">
function Confirmare()
{
<?php
mysql_query("INSERT INTO dialog  (intrebare, raspuns) VALUES ('".$intrebare."'  ,  '".$raspuns."') ")  or die(mysql_error());
?>
alert("Linia de cod a fost exportata!");
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:20:51.463

这基本上只能通过 Ajax 调用获得。这是我在 Stack Overflow 上找到的一个很好的例子：

[https://stackoverflow.com/a/7165616/1439793](https://stackoverflow.com/a/7165616/1439793)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:22:21.133

问题解决了。我使用以下代码重写了 $eng 文件：

```
<<<TEST
<?php
class TextToSpeech {
    public \$mp3data;
    function __construct(\$text="") {
        \$text = trim(\$text);
        if(!empty(\$text)) {
           \$text = urlencode(\$text);
            \$lang_en="http://translate.google.com/translate_tts?tl=en&q={\$text}";
            \$lang_ro="http://translate.google.com/translate_tts?tl=ro&q={\$text}";
            \$lang_fr="http://translate.google.com/translate_tts?tl=fr&q={\$text}";
            \$language=\$lang_en;
            \$this->mp3data = file_get_contents(\$language);
        }
    }

    function setText(\$text) {
        \$text = trim(\$text);
        if(!empty(\$text)) {
            \$text = urlencode(\$text);
            \$en="http://translate.google.com/translate_tts?tl=en&q={\$text}";
            \$ro="http://translate.google.com/translate_tts?tl=ro&q={\$text}";
            \$fr="http://translate.google.com/translate_tts?tl=fr&q={\$text}";
            \$lang=\$en;
            \$this->mp3data = file_get_contents(\$lang);
            return  \$this->mp3data;
        } else { return false; }
    }

    function saveToFile(\$filename) {
        \$filename = trim(\$filename);
        if(!empty(\$filename)) {
            return file_put_contents(\$filename,\$this->mp3data);
        } else { return false; }
    }
}
?>
TEST; 
```

# if-statement - if 语句的代码生成

> ID：13794275
> 
> 赞同：2
> 
> 时间：2012-12-10T02:42:36.803
> 
> 标签：if-statement, compiler-construction, code-generation

我正在为一种简单（类 C）语言编写编译器的代码生成部分。我对“if”语句有疑问。我想为条件的每个部分生成相应的跳转指令，就像 GCC 一样。保存布尔表达式结构的结构是抽象语法树。

到目前为止，我编写了一个函数，该函数将为比较以及逻辑和逻辑否定生成相应的标签。但是，当我试图使这个函数在逻辑上工作时，我遇到了一个巨大的问题。

对于一个简单的语句，例如

```
if (25 < 19) then
  print 99
statements 
```

我希望我的代码看起来像这样：

```
cmp 25, 19
jge label0
label1:
print 99
label0:
statements 
```

（对于这个简单的例子，我的函数确实显示了类似的东西）。

处理否定时，您只需否定这些条件的测试（将 jge 转换为上面的 jl ）。对于逻辑与，您只需以简单的方式依次为左右连词生成相应的代码。但对于 OR，我遇到了许多具有挑战性的问题。*如果条件失败*，而不是跳转到 if（或下一个 else 分支）之后的语句，对于所有其他情况，如果 OR 的任何一个操作数成立，我将不得不跳转到代码所在的实际位置。然后，当您有两个 OR 时，情况会变得更糟，因为 AST 使用二进制节点和函数 who 表示 OR~~试图翻译~~转换为我们选择使用此 AST 的中间表示。

有人可以在这个问题上提供帮助吗？我也尝试过咨询'Engineering a Compiler'，但我还没有从那里找到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:16:18.653

I remember doing something similar to this when I was in school.

You should focus on having your compiler generate a result for every condition in these kinds of expressions and then use "and" or "or" instructions provided by the CPU to "merge" the results and then do your jump based on the "merged" result.

# jython - jython 2.5 无法打印字符串

> ID：13794278
> 
> 赞同：1
> 
> 时间：2012-12-10T02:43:34.043
> 
> 标签：jython

```
Jython 2.5.2 (Release_2_5_2:7206, Mar 2 2011, 23:12:06)
[Java HotSpot(TM) Client VM (Sun Microsystems Inc.)] on java1.6.0_20
Type "help", "copyright", "credits" or "license" for more information.
>>> print 3
3
>>> print "3"
... 
```

我尝试了 Jython 2.2.1 版本，没问题，但问题仍然存在于 Jython 2.7b1 版本中：

```
Jython 2.7b1 (default:ac42d59644e9, Feb 9 2013, 15:24:52)
[Java HotSpot(TM) Client VM (Sun Microsystems Inc.)] on java1.6.0_39
Type "help", "copyright", "credits" or "license" for more information.
>>> print 'ab'
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:55:36.447

我试过了，我的版本效果很好：

```
Jython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:48:36)
[Java HotSpot(TM) Client VM (Oracle Corporation)] on java1.7.0_09
Type "help", "copyright", "credits" or "license" for more information.
>>> print 3
3
>>> print "3"
3 
```

我使用 Jython 和 Java 的更新版本，但我认为这对你来说不是问题。尝试将这些`print`语句保存在`print_test.py`文件中并通过`jython print_test.py`CPython执行它`python print_test.py`。向我们展示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:20:34.680

同样的问题：

```
Jython 2.5.2 (Release_2_5_2:7206, Mar 2 2011, 23:12:06)
[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.7.0_02
Type "help", "copyright", "credits" or "license" for more information.
>>> print 'hi'
... 
```

看起来只是 2.5.2 的一个错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-13T18:19:42.647

也许这是特定于操作系统或机器环境的，因为它在 2.7.0 的 Windows 上对我来说是这样的，并且在以前的版本中已经看到它的表现。

```
Jython 2.7.0 (default:9987c746f838, Apr 29 2015, 02:25:11)
[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.7.0_51
Type "help", "copyright", "credits" or "license" for more information.
>>> import platform
>>> platform.platform()
'Java-1.7.0_51-Java_HotSpot-TM-_64-Bit_Server_VM,_24.51-b03,_Oracle_Corporation-on-Windows_7-6.1-amd64'
>>> print 3
3
>>> print '3'
3
>>> print "3"
3 
```

什么是底层操作系统，您如何调用控制台？除了 print 或不引用带引号的字符串时，您是否有其他构造问题？

# javascript - 渲染backbone.js 集合视图时遇到问题。在我的初始化函数中获取“未捕获的类型错误：无法调用未定义的方法'on'”

> ID：13794279
> 
> 赞同：0
> 
> 时间：2012-12-10T02:43:35.570
> 
> 标签：javascript, html, json, backbone.js

我是backbone.js 的新手，无法指出为什么我的观点在coupons.js 的第67 行未定义。我发布了一个要点，因为它们是很长的文件。

另外，如果我多次刷新浏览器，最终它工作得很好，然后我再次刷新它就会中断，我可以再次刷新直到它工作，然后再次刷新直到它中断。痛苦的循环。

[coupons.js 和 offer.js 的要点](https://gist.github.com/8f90e84f20eaf4e50557)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:49:26.333

当您尝试在空/未定义的对象上调用方法时会发生此错误。问题是您获取数据的调用`offerList`是异步的，但您正在同步实例化集合视图。也就是说， this in`CouponCollectionView`的构造函数：

```
this.collection.on('add remove', this.render, this); 
```

在集合仍然为空时被调用：

```
var coupons = null;
$.getJSON('http://localhost:3000/api/coupons.json', function(response){
    coupons = new CouponCollection(response);
    app.coupons = coupons;
}); 
```

您可能需要考虑使用`var coupons = new CouponCollection()`, 和调用`coupons.fetch()`- 这样，集合将立即实例化，并准备好在`on`视图中调用。

* * *

设置集合，以便您可以调用`fetch`：

```
var CouponCollection = Backbone.Collection.extend({
    model: Coupon,

    // tell Backbone where to send the "fetch" request
    url: 'http://localhost:3000/api/coupons.json'
}); 
```

立即实例化集合，并调用`fetch`它：

```
var coupons = new CouponCollection();
coupons.fetch(); 
```

向集合添加`reset`监听器（完成时触发`fetch`），并在处理程序中呈现视图：

```
this.couponCollectionView = new app.CouponCollectionView({collection: this.couponList});
var self = this;
this.couponList.on("reset", function() {
    $('#content').empty().append(self.couponCollectionView.render().el);
}); 
```

# sencha-touch-2 - sencha touch 2 上的数字虚拟键盘在搜索字段中

> ID：13794282
> 
> 赞同：1
> 
> 时间：2012-12-10T02:43:50.877
> 
> 标签：sencha-touch-2

当我开始在 sencha touch2 应用程序的搜索字段中输入内容时，我需要在移动设备上获得一个数字虚拟键盘。默认情况下，我得到一个字母虚拟键盘。我希望出现数字键盘，因为我正在搜索字段中搜索数字。谁能帮我解决这个问题。

* * *

抱歉没有具体说明。我希望搜索字段可以同时使用数字和字母进行搜索，但由于在我的情况下用户搜索更多数字，我希望弹出数字键盘而不是默认的字母键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:36:00.477

您可以使用[Ext.field.Numberfield](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Number)

# javascript - 使用 Web Audio API 实现 3 频段均衡器

> ID：13794284
> 
> 赞同：1
> 
> 时间：2012-12-10T02:44:04.620
> 
> 标签：javascript, html, webkit, html5-audio, web-audio-api

我正在寻找模仿标准 DJ 混音器的 3 波段均衡器。

不幸的是，我运气不佳。我知道它涉及创建 BiquadFilter 节点并将它们连接到增益节点。不幸的是，我没有接近预期的结果。

到目前为止，我唯一的成功就是控制轨道音量的 gainNode。

任何帮助将不胜感激。

谢谢，斯坦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T08:42:57.743

我将继续详细说明我对 idbehold 问题的回答：

我会说您可能想要使用类型为 5（峰值）的滤波器，它允许所有频率通过，并且仅在您设置相应 filter.frequency.value 的频率处放大/降低。这使您可以串联连接过滤器，因此您不需要单独的音频路径。您还可以考虑将低架滤波器用作第一个滤波器，将高架滤波器用作第三个滤波器，这在 3 频段均衡器中很常见。

如果您串联使用峰值滤波器，则不需要为每个频率设置单独的增益节点，只需为特定滤波器设置 filter.gain.value。

代码看起来像这样：

```
var lowshelf = context.createBiquadFilter(),
    mid = context.createBiquadFilter(),
    highshelf = context.createBiquadFilter();

 //set the filter types (you could set all to 5, for a different result, feel free to experiment)
 lowshelf.type = 3;
 mid.type = 5;
 highshelf.type = 4;

 //connect 'em in order
 yourInput.connect(lowshelf);
 lowshelf.connect(mid);
 mid.connect(highshelf);
 highshelf.connect(yourOutput); 
```

然后，您可以使用各自的 Q、频率和增益值调整每个频段（检查[https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#BiquadFilterNode](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#BiquadFilterNode)以查看哪些参数适用过滤器类型），例如：

```
 lowshelf.gain.value = 0.6;
 lowshelf.frequency.value = 300; 
```

**编辑**：

要添加单独的增益，只需执行

```
 var gainNode = context.createGainNode(); 
```

然后要么做

```
gainNode.connect(lowshelf); //pre EQ 
```

或者

```
highshelf.connect(gainNode); //post EQ 
```

取决于您是希望它在 EQ 之后还是在 EQ 之前。你通过做来控制收益

```
gainNode.gain.value = 0.6; 
```

# ruby-on-rails - ActiveRecord 数组计数

> ID：13794286
> 
> 赞同：4
> 
> 时间：2012-12-10T02:44:28.553
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在尝试使用块来计算数组中的对象数，如下所示：

```
cc = u.cookies.count {|n| n.opened} 
```

这个返回 3，这是错误的。我更进一步，做了这个：

```
cc = u.cookies.count {|n| false} 
```

它应该总是返回 0，但它返回 3 !!!。

这返回 0，就像它应该的那样：

```
[1,2,3,4].count {|n| false} 
```

这是我的用户模型：

```
class User < ActiveRecord::Base
    has_many :cookies
end 
```

这是怎么回事？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:51:49.017

`u.cookies`是`ActiveRecord::Relation`，不是数组。

所以无论块是什么，结果都不会改变，你需要做：

```
cc = u.cookies.where(:opened => true).count 
```

# javascript - 无法让 $(window).load() 在加载到 div 中的页面上工作

> ID：13794292
> 
> 赞同：1
> 
> 时间：2012-12-10T02:45:57.930
> 
> 标签：javascript, jquery, html, load, onload

原谅我，我是新手。

我有一组 .html 文件，根据选择的文件，我将其加载到页面上的 div 中，有点像 iframe。我可以让这一切正常工作，但我的问题是窗口加载事件。我可以让 onload 在主页上工作，但是加载到主页上的 div 中的页面上包含的 onload 事件不起作用，无论我将它写入 .html 文件还是从外部文件调用它。$(document).ready 有效，但我试图确保在其他所有内容之后加载 javascript。

基本上我不知道如何让窗口加载在加载到 div 中的页面上工作。

任何帮助将不胜感激。

编辑：这会将外部页面之一加载到主页面中：

```
$('div#socket').load('pages/' + thisTab + '.html'); 
```

其中 thisTab 是其中一个文件的名称，也是所选选项卡的名称。

类似这样的内容将位于已加载页面之一的底部：

```
<script type="text/javascript">
$(document).ready(function(){
alert('1');
});

$(window).load(function(){
alert('2');
});
$(window).bind("load", function() {
   alert('3');
});
</script> 
```

我只会收到“1”的警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:51:55.537

如果我理解正确，您正在寻找一个选项来在将某些内容加载到主页（使用 ajax）后执行某些操作。你可以使用ajax加载方法的**回调**函数。

```
$("#DivInsideMainPage").load("remotepage.html",function(){
   alert("This will execute only after loading the partial content") 
   //Execute the fancy code you want here    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:02:56.793

在加载的页面演示中包含脚本的方法：

在加载的页面中：

```
<script id="loader_script" type="text/javascript">
$(document).ready(function(){
  alert('1');
});

$('loader_script').one('my_load',function(){
  alert('2');
});
</script> 
```

在主脚本中：

```
var innerpage=$('div#socket');
innerpage.load('pages/' + thisTab + '.html',function(){
     innerpage.find('#loader_script').trigger('my_load');
}); 
```

# javascript - 将多个变量传递给内容脚本 chrome

> ID：13794293
> 
> 赞同：6
> 
> 时间：2012-12-10T02:46:02.503
> 
> 标签：javascript, jquery, google-chrome-extension, local-storage

我正在编写我的第一个 chrome 扩展程序，几个小时前我才开始这样做。当它被硬编码时，一切都运行良好。本质上，我正在填写一份 8 页的表格。表单的每一页对应一个单独的内容脚本。内容脚本过去看起来像这样：（查找字段有点困难，因为它们不是标准的，但我并不担心......那部分有效）

```
var first_name = 'John';
var last_name = 'Doe';
...
...
document.getElementById('first_name').value = first_name;
document.getElementById('last_name').value = last_name; 
```

这很好用（对我来说），但我想将它分发给几个人，他们都不会/可以使用源代码中的扩展，直接编辑变量。所以我做了一个“选项”页面，以此为例： [https ://developer.chrome.com/trunk/extensions/options.html](https://developer.chrome.com/trunk/extensions/options.html)

选项页面是要填写的表格的模型，每个用户都可以在这里输入他们的默认值。我的 save_options() 函数基本上可以（伪代码）：

```
foreach(fields as field) {
    localStorage[field] = document.getElement....(field);
} 
```

这工作正常。它可以正确保存，显示存储的值等。

当我尝试从内容脚本访问变量时，问题就来了。根据我的阅读，这不能（直接）完成，网上有各种方法可以展示如何做到这一点。我想做这样的事情（内容脚本）：

```
var first_name = localStorage["first_name"];
var last_name = localStorage["last_name"];
...
...
document.getElementById('first_name').value = first_name;
document.getElementById('last_name').value = last_name; 
```

我的问题是：

1) 对于那些处理过 Chrome 扩展/localstorage/chrome.storage/etc 的人，有没有“最好”的方法来做到这一点？

2) 设置所有变量名称/值的最有效方法是什么？我更喜欢循环（如上）而不是使用单独的请求设置每个字段。我平均每页10个字段。

（我可能会使用一个冗长、凌乱的[http://developer.chrome.com/extensions/messaging.html](http://developer.chrome.com/extensions/messaging.html)形式，但我希望有一个更高效/可扩展/优雅的解决方案）

任何输入表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T05:33:37.270

一种解决方案是使用您提到的消息传递。

另一个（我认为更好）解决方案是`chrome.storage`API（有关更多信息，请参见[http://developer.chrome.com/extensions/storage.html](http://developer.chrome.com/extensions/storage.html)）。Storage API 可以直接在后台页面和内容脚本中使用，如果您将值存储在`chrome.storage.sync`. 与 localStorage 的唯一实质性区别是此 API 是异步的，因此您必须编写类似的代码

```
chrome.storage.sync.get(['first_name', 'last_name'], function(items){
    document.getElementById('first_name').value = items['first_name'];
    document.getElementById('last_name').value = items['last_name'];
}); 
```

# ios - 使用自定义 Timer NSObject 在您的 ios 应用程序中计时事件

> ID：13794294
> 
> 赞同：1
> 
> 时间：2012-12-10T02:46:05.683
> 
> 标签：ios, timer, nsdate, nsurlconnection

所以我在我的应用程序中使用[Brock Wolfs](https://stackoverflow.com/a/3519913/748343)的答案来计时一个动作。实际时间是从我向服务器发送请求时使用的

```
NSURLConnection 
```

直到我完成从该请求中下载所有数据的那一刻

```
connectionDidFinishLoading 
```

但是由于某些奇怪的原因，该解决方案无法正常工作，它会以 0.00 秒的时间回复。即使实际事件使用断点大约需要 8 秒。

这是我的 Brock 代码版本（精确副本）

定时器.h

```
#import <Foundation/Foundation.h>

@interface Timer : NSObject{
    NSDate *start;
    NSDate *end;
}

- (void) startTimer;
- (void) stopTimer;
- (double) timeElapsedInSeconds;
- (double) timeElapsedInMilliseconds;
- (double) timeElapsedInMinutes;

@end 
```

定时器.m

```
#import "Timer.h"

@implementation Timer

- (id) init {
    self = [super init];
    if (self != nil) {
        start = nil;
        end = nil;
    }
    return self;
}

- (void) startTimer {
    start = [NSDate date];
}

- (void) stopTimer {
    end = [NSDate date];
}

- (double) timeElapsedInSeconds {
    return [end timeIntervalSinceDate:start];
}

- (double) timeElapsedInMilliseconds {
    return [self timeElapsedInSeconds] * 1000.0f;
}

- (double) timeElapsedInMinutes {
    return [self timeElapsedInSeconds] / 60.0f;
}

@end 
```

然后在课堂上我想使用它

我的类.h

```
#import "Timer.h"

Timer *timer;
//..
@property (strong, nonatomic) Timer *timer; 
```

我的班级.m

```
@synthesize timer;
//..

- (IBAction)vehicleSearchRequest:(NSData *)postBodyData
{
//..
[timer startTimer];

        NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];

//..
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
//..
[timer stopTimer]; // comes back as 0.000

        NSLog(@"Total time was: %lf milliseconds", [timer timeElapsedInMilliseconds]);
//..
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:56:11.527

它不工作的原因一点也不奇怪。您从未创建过 Timer 实例。在 [timer timerStart] 之前插入这一行：

```
self.timer = [[Timer alloc] init]; 
```

# java - Java - 访问私有实例变量

> ID：13794295
> 
> 赞同：0
> 
> 时间：2012-12-10T02:46:14.820
> 
> 标签：java, instance-variables, private-members

我需要从以下类列表 (Species.java) 中访问私有变量，以便在 KlingonOx.java 类中使用它们。

KlingonOx.java 类的目的是确定在多少年后大象物种的数量将大于克林贡牛物种的数量。

这是 Species.java 类：

```
import java.util.Scanner;

public class Species
{
private String name;
private int population;
private double growthRate;

public void readInput()
{
    Scanner keyboard = new Scanner(System.in);
    System.out.println("What is the species' name?");
    name = keyboard.nextLine();

    System.out.println("What is the population of the species?");
    population = keyboard.nextInt();

    while(population < 0)
    {
        System.out.println("Population cannot be negative.");
        System.out.println("Reenter population:");
        population = keyboard.nextInt();
    }

    System.out.println("Enter growth rate (% increase per year):");
    growthRate = keyboard.nextDouble();
}

public void writeOutput()
{
    System.out.println("Name = " + name);
    System.out.println("Population = " + population);
    System.out.println("Growth rate = " + growthRate + "%");
}

public int predictPopulation(int years)
{
    int result = 0;
    double populationAmount = population;
    int count = years;

    while( (count>0) && (populationAmount>0) )
    {
        populationAmount = (populationAmount + (growthRate/100) * populationAmount);
        count --;
    }

    if (populationAmount > 0)
        result = (int)populationAmount;
    return result;
}

public Species(String name)
{
    name = name;
    population = 0;
    growthRate = 0.0;
}

public Species(int population)
{
    name = "";
    if (population > 0)
        population = population;
    else
    {
        System.out.println("ERROR: using a negative" + "population.");
        System.exit(0);
    }
    growthRate = 0.0;
}

public Species(double growthRate)
{
    name = "";
    population = 0;
    growthRate = growthRate;
}

public Species(String name, int population, double growthRate)
{
    name = name;
    if (population > 0)
        population = population;
    else
    {
        System.out.println("ERROR: using a negative" + "population.");
        System.exit(0);
    }
    growthRate = growthRate;
}

public Species()
{
    name = "";
    population = 0;
    growthRate = 0;
}

public void setSpecies(String newName, int newPopulation, double newGrowthRate)
{
    name = newName;
    if (newPopulation >= 0)
        population = newPopulation;
    else
    {
        System.out.println("ERROR: using a negative " + "population.");
        System.exit(0);
    }

    growthRate = newGrowthRate;
}

public void setName(String name)
{
    name = name;
}

public void setPopulation(int population)
{
    if (population > 0)
        population = population;
    else
    {
        System.out.println("ERROR: using a negative" + "population."); 
        System.exit(0);
    }
}

public void setGrowthRate(double growthRate)
{
    growthRate = growthRate;
}

public String getName()
{
    return name;
}

public int getPopulation()
{
    return population;
}

public double getGrowthRate()
{
    return growthRate;
}

public boolean equals(Species otherObject)
{
    return (name.equalsIgnoreCase(otherObject.name)) &&
           (population == otherObject.population) &&
           (growthRate == otherObject.growthRate);
}
} 
```

这是 KlingonOx.java 类：

```
import java.util.Scanner;
public class KlingonOx extends Species
{
public static void main(String[] args) 
{
    new KlingonOx().run();
}

public void run()
{     
    Species klingonox = new Species();
    Species elephant = new Species();

    System.out.println("Please enter data on the species Klingon Ox."); 
    klingonox.readInput();
    klingonox.writeOutput();
    klingonox.setPopulation(int population);
    population = population;
    klingonox.setGrowthRate(double growthRate);
    growthRate = growthRate;

    System.out.println("Please enter data on the species Elephant.");
    elephant.readInput(); 
    elephant.writeOutput();
    elephant.setPopulation(population);
    population = population;
    elephant.setGrowthRate(growthRate);
    growthRate = growthRate;

    int year = 0;
    if(klingonox.population < elephant.population)
    {
        while(klingonox.population < elephant.population)
        {
            klingonox.population = (int)(klingonox.population + (klingonox.population * (klingonox.growthRate/100) ) );
            elephant.population=(int)(elephant.population + (elephant.population * (elephant.growthRate/100) ) );
            year++;
        }

        System.out.println("KLINGON OX EXCEEDS ELEPHANT IN" + year + "YEARS");
    }

    else
    {
        while(klingonox.population > elephant.population)
        {
            klingonox.population=(int)(klingonox.population+(klingonox.population*(klingonox.growthRate/100)));
            elephant.population=(int)(elephant.population+(elephant.population*(elephant.growthRate/100)));
            year++;
        }
    System.out.println("ELEPHANT EXCEEDS KLINGON OX IN" + year + "YEARS");
    }
}
} 
```

KlingonOx.java 类给我的错误是“population”和“growthRate”是 Species 中的私有实例变量，因此无法访问。我尝试使用 getPopulation 和 getGrowthRate 方法调用来检索变量，但我不确定如何正确执行此操作。

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T02:51:09.267

在有变量的类中：

```
class Foo {
  private int variable;

  public int getVariable() { return variable; }
} 
```

在客户端类中：

```
class Bar {
   void method() {
     ...
     Foo foo = new Foo();
     int population = foo.getVariable();
     ...
   }
} 
```

这几乎就是一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T02:49:14.103

而不是 using `klingonox.population`，您应该使用`klingonox.getPopulation()`- 您的其他`Species`对象也是如此。

`getPopulation`这应该是您使用该方法所需进行的唯一更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T03:26:01.933

第一的，

```
klingonox.setPopulation(int population);
population = population;
klingonox.setGrowthRate(double growthRate);
growthRate = growthRate; 
```

如果您正在设置人口，请传递值 klingonox.setPopulation(20) 以及为什么要尝试将人口分配给人口。克林贡牛没有野外种群。当您调用 readInput(); 时，您的人口名称和growthRate 应该已经分配；

大象对象也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T02:50:07.207

采用

```
klingonox.getPopulation(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T02:57:35.317

`private`访问修饰符允许我们隐藏一个变量，以便声明它的类只能被访问。你上课——

```
public class Species {
 private String name;
 private int population;
 private double growthRate;

 public int getPopulation(){return population;}
 public double growthRate(){return growthRate;}
} 
```

这个概念也称为封装，我们使用`public`方法来访问和修改`private`变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T03:10:11.697

**-**您想`instance variable`从-Class 访问`Super`-Class `Sub`。

**-**使用`super`关键字，`Getter-Setter`方法。

**例如：**

```
public class Species
{
private String name;
private int population;
private double growthRate;

public int getPopulation(){

return this.population;

}

public double getGrowthRate(){

return this.growthRate;

}

public String getName(){

return this.name;

}

// Setters...........

}

public class KlingonOx extens Spices{

.......
.......

  public static void main(String[] args){

       int p = super.getPopulation();

       ........
       ........
    }

} 
```

# php - 使用 php 插入和更新 sql 数据

> ID：13794297
> 
> 赞同：1
> 
> 时间：2012-12-10T02:46:16.450
> 
> 标签：php, mysql, sql

我有一个注册表，如果“ID”不存在，我会尝试插入数据。它工作正常。如果“ID”已经存在，现在我正在尝试更新数据。它根本不起作用，我找不到错误。如果 ID 存在与否，这是我设置的条件：

```
function staff_detail_exist($ic) {    
    $result = null;
    $sql = "SELECT * FROM apply WHERE staffid = '$ic'";
    $data = mysql_query($sql);

    if (mysql_num_rows($data) == 0) {    
        $result = "available";
    } else {    
        $result = "exist";
    }

    return $result;
} 
```

这是我的插入和更新功能：

```
 if (staff_detail_exist($ic) == "available") {

    insert_staff_detail($ic, $name, $contact, $mail, $address, $paytype, $applicant);
    echo "Workshop application successful! You will be notified shortly via E-mail after confirmation! Thank You!";
} 
else if (staff_detail_exist($ic) == "exist") {

    update_staff_detail($ic, $name, $contact, $mail, $address, $paytype);
    echo  "Staff Details Updated!" ;
}

function insert_staff_detail($ic, $name, $contact, $mail, $address, $paytype, $applicant) {

    $sql = "INSERT INTO apply (staffid, staffname, staffno, staffemail, staffaddress, paytype, applicant) VALUES ('$ic', '$name', '$contact', '$mail', '$address','$paytype', '$applicant')";
    mysql_query($sql);
}

function update_staff_detail($ic, $name, $contact, $mail, $address, $paytype){
    $sql = "UPDATE apply 
            SET staffname='$_POST[name]',
            staffno='$_POST[contact]',
            staffmail='$_POST[mail]',
            address='$_POST[address]',
            paytype='$_POST[paytype]'
            WHERE staffid='$_POST[ic]'";
    mysql_query($sql);
} 
```

请问有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:02:00.093

**观察：**您必须在收到 POST 变量时指明。该`update_staff_detail`方法应该以与您获取该`insert_staff_detail`方法相同的方式接收 POST 变量。

**变化：**定义`update_staff_detail`

**至：**

```
function update_staff_detail($ic, $name, $contact, $mail, $address, $paytype){
    $sql = "UPDATE apply 
            SET staffname='$name',
            staffno='$contact',
            staffmail='$mail',
            address='$address',
            paytype='$paytype'
            WHERE staffid='$ic' LIMIT 1";
    mysql_query($sql);
} 
```

问候。

# c# - 骰子循环，将不同的掷骰子加在一起

> ID：13794301
> 
> 赞同：-1
> 
> 时间：2012-12-10T02:46:50.290
> 
> 标签：c#, dice

我如何能够显示每个玩家在每轮结束时投出的分数？（我将 1 轮视为每位玩家 1 次投掷）

顺便说一句，如果玩家掷出 6，他们会再次掷骰。

```
Console.WriteLine("Player 1, enter your name");
PlayerOne = Console.ReadLine();
Console.WriteLine("Player 2, enter your name");
PlayerTwo = Console.ReadLine();
Console.WriteLine("Player 3, enter your name");
PlayerThree = Console.ReadLine();
Console.WriteLine("Player 4, enter your name");
PlayerFour = Console.ReadLine();

Random DiceRandom = new Random();
int DiceThrow = DiceRandom.Next(1, 7);
Console.WriteLine(DiceThrow);
Console.ReadLine();

for (int i = 1; i <= 4; i++)
{
    DiceThrow = DiceRandom.Next(1, 7);
    Console.WriteLine("Player " + i + " rolled a " + DiceThrow);
    Console.ReadLine();
    if (DiceThrow == 6) i--;
}

Console.WriteLine("Player 1 rolled a " + DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 2 rolled a " + DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 3 rolled a " + DiceThrow);
Console.ReadLine();

Console.WriteLine("Player 4 rolled a " + DiceThrow);
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:15:09.220

好吧，这是一个如何做的小例子，更好一点。里面有很多你可能还不知道的东西。我给你答案的原因是为了给你提供足够的新东西，让你自己去看看。

```
Random diceRandom = new Random();
var scores = new int[4];
for (int i = 0; i < 4; i++)
{
    do
    {
        var roll = diceRandom.Next(1, 7);
        Console.WriteLine("Player " + (i + 1) + " rolled a " + roll);
        Console.ReadLine();
        if(roll != 6)
            score[i] += roll;
    }while(roll == 6);
}

// results
for(int i = 0; i < 4; i++)
{
    Console.WriteLine(String.Format("Player {0} scored {1}", i, scores[i]));
    Console.ReadLine();
} 
```

只是一个快速的综述：

*   修改循环计数器通常是不好的做法，应该避免，所以我使用嵌套的 do/while 循环。
*   我使用数组来存储每个球员的得分，数组本身包含 4 个整数，每个整数代表每个球员的得分。这使得迭代它变得非常容易和简单。
*   前一点是 for 循环通常从 0 而不是 1 开始的主要原因之一，因为数组中的第一个索引是 [0]，因此具有 4 个元素的数组的索引为 0、1、2、3。记住这一点很重要。
*   在结果部分，我使用了 String 类中的一个方法`Format`，您可以在其中使用完整的文本并添加要填充变量值的占位符。{0} 是第一个参数，{1} 是第二个参数，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:22:39.523

你有什么东西可以保持玩家获得的价值吗？一些简单的东西，比如`player1Score`，`player2Score`等等。

在 for 循环中询问 `(if i==1){player1Score = player1Score + DiceThrow})`etc 的 if 语句也会产生奇迹。

# jquery - jQuery用两个特定单词之间的不间断空格替换空格

> ID：13794313
> 
> 赞同：1
> 
> 时间：2012-12-10T02:48:13.600
> 
> 标签：jquery, replace, space

我创建了以下脚本，该脚本在页面中搜索“两个单词”的任何实例，并将空格替换为不间断空格：

```
var search = $('body').html();
search = search.replace(/Two words/g, function($1) {
    return ('<span class="no-break">' + $1 + '</span>');
});

$('body').html(search);

$(document).ready(function() {
    $('.no-break').each(function() {
        var $this = $(this);
        $this.text($this.text().replace(/ /g, '\u00A0'));
    });
});​ 
```

[http://jsfiddle.net/Ggkpb/](http://jsfiddle.net/Ggkpb/)

但是，当我将它放到我的网站上时，它会导致其他 jQuery 和 javascripts 无法工作。

我有更好的解决方案吗？不会扰乱我网站上的其他脚本的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:05:20.103

这一行：

```
$('body').html(search); 
```

**重新创建正文中的每个元素**，减去可能已经绑定或未绑定的**任何事件处理程序。**因此，如果您要使用该技术，您需要有 100% 的把握，*然后才能*创建任何事件处理程序（我想，直接绑定到正文或文档的处理程序除外）。

与问题无关，请注意，您可以使代码更短一些，因为您可以调用一次，`.html()`并`.text()`传递一个回调函数，该函数采用当前值并返回新值（您不需要`.each()`循环）：

```
$(document).ready(function(){
    $('body').html(function(i, oldHtml){
        return oldHtml.replace(/Two words/g, '<span class="no-break">Two words</span>');
    }); 
    $('.no-break').text(function(i,oldText) {
        return oldText.replace(/ /g, '\u00A0');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:59:51.760

这是另一种写法。由于您没有发布错误消息，因此我确定这是否可以解决您的问题。

```
$(function(){
    $('body').html(function(){
        return $(this).html().replace(/Two words/g, '<span class="no-break">Two words</span>');
    }); 
    $('.no-break').each(function () {
        $(this).text($(this).text().replace(/ /g, '\u00A0'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:08:14.403

我认为最好将文本与 javascript 分开。您可以使用 Class 标记页面中的每个文本块

```
<div class="text">abcxyz...Two words...</div> 
```

然后打电话

```
$('.text').each(function(){
      var search = $(this).html();
      search = search.replace(/Two words/g, function($1) {
            return ('<span class="no-break">' + $1 + '</span>');
      });
      $(this).html(search);
}); 
```

# php - PHP $_GET & MySQL

> ID：13794316
> 
> 赞同：0
> 
> 时间：2012-12-10T02:48:53.213
> 
> 标签：php

我正在尝试创建一个脚本，该脚本在浏览器 URL p 中获取变量，并在列 playername 中查询与变量 p 匹配的任何内容，但它仍然不起作用，任何人都知道我做错了什么，我一直在摆弄这个几个小时..

```
<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="utf-8">
    <title>Admin Panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="http://example.com/assets/css/bootstrap.css" rel="stylesheet">
    <link href="http://example.com/assets/css/docs.css" rel="stylesheet">
    <link href="http://example.com/assets/js/google-code-prettify/prettify.css" rel="stylesheet">

<center>

<?php

$con = mysql_connect("","","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("log", $con);

$plyr=$_GET["p"];

$result = mysql_query('SELECT * FROM logs_chat WHERE playername="$plyr"');

echo '
            <table class="table">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Player</th>
                  <th>Message</th>
                </tr>
              </thead>
              <tbody>
';

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['time'] . "</td>";
  echo "<td>" . $row['playername'] . "</td>";
  echo "<td>" . $row['text'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>

</center>
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="http://example.com/assets/js/jquery.js"></script>
    <script src="http://example.com/assets/js/google-code-prettify/prettify.js"></script>
    <script src="http://example.com/assets/js/bootstrap-transition.js"></script>
    <script src="http://example.com/assets/js/bootstrap-alert.js"></script>
    <script src="http://example.com/assets/js/bootstrap-modal.js"></script>
    <script src="http://example.com/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://example.com/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://example.com/assets/js/bootstrap-tab.js"></script>
    <script src="http://example.com/assets/js/bootstrap-tooltip.js"></script>
    <script src="http://example.com/assets/js/bootstrap-popover.js"></script>
    <script src="http://example.com/assets/js/bootstrap-button.js"></script>
    <script src="http://example.com/assets/js/bootstrap-collapse.js"></script>
    <script src="http://example.com/assets/js/bootstrap-carousel.js"></script>
    <script src="http://example.com/assets/js/bootstrap-typeahead.js"></script>
    <script src="http://example.com/assets/js/bootstrap-affix.js"></script>
    <script src="http://example.com/assets/js/application.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:52:54.867

问题就在这里，

```
$result = mysql_query('SELECT * FROM logs_chat WHERE playername="$plyr"'); 
```

`$plyr`被认为是字符串而不是变量，PHP 不会解析任何单引号`' '`。您需要连接变量。

改成，

```
$result = mysql_query('SELECT * FROM logs_chat WHERE playername="'.$plyr.'"'); 
```

**更新：**

不要使用`mysql_*`函数，它们很快就会被弃用。使用 PDO 或 mysqli 连接数据库。当心 SQL INJECTIONS，`$_GET["p"]`没有经过验证，并且您的代码可能存在弱点。尝试准备好的语句或 mysqli_real_escape_string 或 PDO::quote。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:45:06.850

您是否尝试在表格名称周围加上单引号？

形式：`$result = mysql_query('SELECT * FROM logs_chat WHERE playername="$plyr"');`

至：`$result = mysql_query("SELECT * FROM logs_chat WHERE playername='$plyr'");`

获取变量时也不要忘记使用[mysql_real_escape_string 。](http://php.net/manual/en/function.mysql-real-escape-string.php)`$_GET`

# css - 如何覆盖\编辑 Zurb Foundation 基础 CSS 样式？

> ID：13794318
> 
> 赞同：12
> 
> 时间：2012-12-10T02:49:05.653
> 
> 标签：css, frameworks, zurb-foundation, css-frameworks

这是我第一次将 Zurb Foundation 用于 Web 项目。但是，我不确定是在单独的样式表上用我自己的样式覆盖它们的样式还是直接编辑`foundation.css`.

例如，这是他们的导航 css（内部`foundation.css`）：

```
.nav-bar {
    background: #4D4D4D;
    height: 40px;
    margin-left: 0;
    margin-top: 20px;
    padding: 0;
} 
```

如果我想更改`background`and `margin-top`，我是直接编辑`.nav-bar`还是`foundation.css`创建自己的样式表（在`style.css`下面放一个`foundation.css`）并像这样覆盖它：

```
.nav-bar {
    background: #999;
    margin-top: 0;
} 
```

这是好习惯吗？如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-10T14:23:54.370

最佳实践是使用您描述的自定义 .css 文件覆盖他们的样式表。这样，如果发布了更新，*例如错误修复*，那么您只需替换foundation.css 文件。

如果您直接编辑foundation.css 文件并想要更新框架，那么您需要自己手动进行更新。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-04T20:05:12.077

最佳做法是阅读Zurb Foundation 网站上的**文档。**第二个最佳做法是在您的下载文件中打开 2 个文件夹：**css**和**js**。在此文件夹中，您会发现：

***app.css***和***app.js***

这些是 Zurb 为您预先制作的文件，因此您可以开始覆盖他们的样式！

不建议接触foundation.js 或foundation.css。您将无法升级未来的选项，或者您可能会制动您不想制动的东西。快乐编码！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T00:51:25.857

实际上，您可以只使用foundation.css 文件。如果您创建自定义的 Foundation CSS 安装，而不是使用默认的 CSS 安装，您指定的自定义将驻留在此文件中。如果 Zurb 要更改此文件以解决错误和更新，则此文件必须在所有安装中都相同，不是吗？

Zurb 文档说“foundation.css，是一个 CSS 文件，如果您不需要分离实际的底层 Foundation CSS，您可以在您的页面中使用。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-11T15:39:42.697

实际上，在 Foundation（或任何主要框架）上覆盖样式的最佳方法是使用它们的 SASS 和/或 Compass 版本。（或者对于那些不幸尝试设置 Bootstrap 样式的人来说更少）

通过 _settings.scss 文件来更改颜色、高度和断点比尝试通过数千行 css 代码来确保您已经覆盖了您需要的所有内容要容易得多。

是的，完成所有设置需要一些学习曲线，但从长远来看，它会为您节省数小时。

# c# - C# 中 ObjectIDGenerator 方法的值类型

> ID：13794322
> 
> 赞同：2
> 
> 时间：2012-12-10T02:49:28.780
> 
> 标签：c#, value-type

在引用类型上调用 ObjectIDGenerator 方法两次，id 值相同。

```
test a = new test();//reference type
bool isFirstTime;
ObjectIDGenerator IDGenerator = new ObjectIDGenerator();
long theID = IDGenerator.GetId(a, out isFirstTime);
Console.WriteLine(theID);
Console.WriteLine(isFirstTime);

theID = IDGenerator.GetId(a, out isFirstTime);
Console.WriteLine(theID);
Console.WriteLine(isFirstTime); 
```

输出如下：
1
True
1
False

对象“a”只有一个 id。

但是当在值类型上调用 ObjectIDGenerator 方法时，事情看起来很奇怪。

```
int a = 100;//value type
bool isFirstTime;
ObjectIDGenerator IDGenerator = new ObjectIDGenerator();
long theID = IDGenerator.GetId(a, out isFirstTime);
Console.WriteLine(theID);
Console.WriteLine(isFirstTime);

theID = IDGenerator.GetId(a, out isFirstTime);
Console.WriteLine(theID);
Console.WriteLine(isFirstTime); 
```

输出：
1
真
2
假

这就是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T03:49:16.100

我认为造成这种情况的根本原因是 int 是值类型，而 getid() 接受引用类型，因此需要一个装箱过程。每次你装箱时，你都会得到一个装箱 int 的新 id（不是原来的）。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T03:11:04.560

我认为答案一定是这个类（ObjectIDGenerator）不适合与值类型一起使用。从[文档](http://msdn.microsoft.com/en-us/library/btcd1w1h.aspx)中查看这里：

> 唯一标识每个对象的对象引用是运行时垃圾收集堆中的地址。

当然，值类型不是存储在垃圾收集堆上，而是存储在堆栈上。因此，根据上述情况，ID 跟踪将无法正常工作（根据设计），值类型如`int`.

# django - 如何在不重新上传的情况下复制 ImageField 并重新保存它？

> ID：13794326
> 
> 赞同：0
> 
> 时间：2012-12-10T02:49:52.480
> 
> 标签：django, django-imagekit

我有一个 ImageField，当用户创建第一个帖子时，它会将图像放入 S3，当另一个用户重做它时（就像 Pinterest 的 repin 一样），我需要将 image.name 复制到新的，但不需要上传重新保存图像，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:10:18.303

如果您不想再次上传您的图像并且只想保留具有新名称的文件，那么您可以使用 PUT Object COPY Request 请通过以下链接 url ->> [http://docs.amazonwebservices.com/AmazonS3/latest /API/RESTObjectCOPY.html](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectCOPY.html)

您无需使用此命令重新上传新副本

# c++ - 在数组中的结构中排队？

> ID：13794329
> 
> 赞同：3
> 
> 时间：2012-12-10T02:50:27.613
> 
> 标签：c++, arrays, multithreading, queue

我试图创建一个使用多线程的应用程序。每个工作线程都有自己的队列要消耗和处理，而主线程则为它们的队列提供数据。工作线程将根据这些条件动态生成。

为了维护主线程的工作线程信息，每个产生的工作线程都将注册到一个数组中：

```
struct workerNode **workerMap = (workerNode**) malloc(MAX_WORKER * sizeof(struct workerNode)); 
```

而 workerNode 被注入到每个工作线程的结构中：

```
struct workerNode
{
    int offset;
    queue<dataRecord*> workerQueue;
    short semaphore;
}; 
```

问题是，每次我尝试将 a 推`dataRecord*`送到工作线程的`workerQueue`1 次以上时，都会发生 SEGFAULT。第一次推动是成功，没问题，但第二次是完全失败。

这是 gdb 回溯：

```
Program received signal SIGSEGV, Segmentation fault.
0x0000000000402382 in __gnu_cxx::new_allocator<int>::construct(int*, int const&) ()
(gdb) bt
#0  0x0000000000402382 in __gnu_cxx::new_allocator<int>::construct(int*, int const&) ()
#1  0x0000000000401e40 in std::deque<int, std::allocator<int> >::push_back(int const&) ()
#2  0x0000000000401a83 in std::queue<int, std::deque<int, std::allocator<int> > >::push(int const&) ()
#3  0x0000000000401361 in listenerProcess(int, char*) ()
#4  0x0000000000401854 in main () 
```

这就是我将推送到队列的方式：

```
while(workerMap[index] != 0)
{
    workerMap[index]->workerQueue.push(rec);
    index++;
} 
```

谁能帮我？谢谢

**编辑：**

正如 WhozCraig 之前建议的那样，我做了另一个实验：

```
struct workerNode **workerMap = (workerNode**) malloc(MAX_WORKER * sizeof(workerNode*)); // storing pointers, not objects 
```

我仍然使用相同的方式来分配`workerMap`. 但是我改变了注册`workerNode`到地图的方式。

```
//workerMap[index] = (struct workerNode*) malloc(sizeof(struct workerNode));
workerMap[index] = new struct workerNode; 
```

该应用程序现在看起来很好。谢谢 ：）

# javascript - 正则表达式匹配字符串的开头并捕获最后一部分

> ID：13794339
> 
> 赞同：0
> 
> 时间：2012-12-10T02:51:16.783
> 
> 标签：javascript, regex, string

我有以下一组字符串

```
big-div button-green
big-div button-red
big-div button-yellow 
```

我想得到以下结果

```
green
red
yellow 
```

我设法做到了这一点，`/\sbutton-[^\s]*/gi`但与整个字符串匹配，如`button-yellow`

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:56:42.083

放置一个捕获组`[^\s]*`，您可以将其作为第一个捕获组访问。

或者，我会把它写成......

```
var match = (str.match(/\sbutton-(\S*)/gi) || [])[1]; 
```

这会给你匹配，或者`undefined`如果它不能匹配任何东西。

如果`str`也是一个类，我会交换边界`(?:^|\s)`和`(?:$|\s)`或以其他方式匹配`\s`并用空格包装匹配的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T02:57:09.020

```
str.match(/\sbutton-([^\s]*)/i)[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T02:57:36.710

答案就在标题中：只需创建一个捕获组：

```
/\sbutton([^\s]+)$/i 
```

并获取返回的匹配数组的第一个元素，该元素仅包含您感兴趣的字符

# jquery - 无法访问无序列表中兄弟元素的CSS

> ID：13794343
> 
> 赞同：0
> 
> 时间：2012-12-10T02:52:02.837
> 
> 标签：jquery, css, properties

 我有一个大部分运行良好的 jQuery 脚本。我有一个链接列表，单击这些链接可以显示/隐藏特定的 DIV 元素。当我单击一个链接时，它的 CSS 已更改（链接颜色变为红色）。

**HTML**

```
<ul style="list-style: none;">
    <li><a href="#" class="review-link" name="review-1">Click to see Review 1</a></li>
    <li><a href="#" class="review-link" name="review-2">Click to see Review 2</a></li>
    <li><a href="#" class="review-link" name="review-3">Click to see Review 3</a></li>
</ul> 
```

**jQuery**

```
$(".review-link").click(function () {
  var divname = this.name;
  $("#"+divname).show("slow").siblings().hide("slow");
  $(this).css("color","red");
  $(this).siblings().css("color","green")
}); 
```

我遇到的麻烦是将所有**其他**链接重置为原始颜色。在我的示例中，我试图将所有其他链接变为绿色，但我什至无法让它工作。也许我不理解 jQuery 中的“兄弟”属性？ 

这是一个[jsFiddle](http://jsfiddle.net/webworm/uCS3P/1/)示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:55:04.693

如果`onclick`您在做任何其他事情之前将所有链接设置为该原始颜色。

```
$(document).ready(function(){

    $(".review-link").css("color","green")
    $(".review-link").click(function () {
      var _this=$(this);            
       _this.closest("ul").find(".review-link").css("color","green");
       //your remaining code goes here
    });
}); 
```

工作示例[http://jsfiddle.net/uCS3P/5/](http://jsfiddle.net/uCS3P/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T02:54:09.827

这些`.review-link`元素没有兄弟姐妹。你想要它的父元素的兄弟姐妹。

你可以改用这样的东西......

```
$(this).parent().siblings().find("a").css("color","green") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T03:08:15.137

`$.siblings()`寻找直接相关的元素。在这种情况下，`$(this)`指的`<a>`是被点击的元素，并且由于每个链接都嵌套在一个`<li>`标签内，所以它没有直接的兄弟姐妹。

`$(this).parent().siblings().find('a').css("color","green");`

或者

`$(this).parent().siblings().children('a').css("color","green");`

将工作。

您可能希望查看使用 addClass 和 removeClass 而不是直接使用 jQuery 更改 css，它使标记和脚本的分离更加完整。

# java - 将 Java 转换为 Objective-c（Android 到 iOS）

> ID：13794347
> 
> 赞同：2
> 
> 时间：2012-12-10T02:52:32.543
> 
> 标签：java, objective-c, ios, xcode

**编辑：这是转换后代码的更正版本**

```
int scrambBase20[] = {1,2,3};
- (NSString *) descramble:(NSString*) input{
    char *ret = [input UTF8String];
    int offset = -(sizeof scrambBase20);
    for(int i=0;i<[input length];i++){
        if(i%(sizeof scrambBase20)==0){
            offset+=(sizeof scrambBase20);
        }
        ret[scrambBase20[i%(sizeof scrambBase20)]+offset] = (char) ((Byte) [input characterAtIndex:i]^0x45);
    }
    NSString *realRet = [[NSString alloc] initWithUTF8String:ret];
    [realRet stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

    return realRet;
} 
```

我有这个 Java 块，我正在尝试将其转换为 Objective-C。

我有一个要解密的加密字符串。

```
[descramble: @"6&eee *eee1ee1e eee!"]; 
```

应该成为

```
"testcode" (without quotes) 
```

相反，我得到了输出

```
"6&sec *ee 1ee1e  ee!" (without quotes) 
```

以下代码是我的Java代码[作品]

```
String descramble(String input){
    Log.i("APP", "input length: " + input.length());
    char[] ret; //= new ArrayList<Character>();
    ret = input.toCharArray();
    int offset = -scrambBase20.length;
    for(int i=0;i<input.length();i++){
        if(i%scrambBase20.length==0)
            offset+=scrambBase20.length;
        ret[scrambBase20[i%scrambBase20.length]+offset]=(char) ((byte) (input.charAt(i))^0x45);
    }

    String realRet = "";
    for (char x : ret){
        realRet+=x;
    }
    realRet = realRet.trim();
    return realRet;
} 
```

以下代码是我转换为 Xcode 的代码 [不起作用]

```
- (NSString *) descramble:(NSString*) input{
   char *ret = [input UTF8String];
   int offset = -(sizeof scrambBase20);
   for(int i=0;i<(sizeof input);i++){
        if(i%(sizeof scrambBase20)==0){
            offset+=(sizeof scrambBase20);
        }
        ret[scrambBase20[i%(sizeof scrambBase20)]+offset] = (char) ((Byte) [input characterAtIndex:i]^0x45);
    }
    NSString *realRet = [[NSString alloc] initWithUTF8String:ret];
    [realRet stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    return realRet;
} 
```

有人在从 Java 到 Objective-C 的转换中看到错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T02:57:19.133

由于`scrambBase20`是一个数组，因此您需要使用`count`而不是`sizeOf`. Java 中的 Objective C 等价物`sizeOf()`是`count`.

```
- (NSString *) descramble:(NSString*) input{
   char *ret = [input UTF8String];
   int offset = (-1 * [scrambBase20 count]);
   for(int i=0;i<[input length];i++){
        if(i% [scrambBase20 count] == 0){
            offset+= [scrambBase20 count];
        }
        ret[scrambBase20[i%[scrambBase20 count]+offset] = (char) ((Byte) [input characterAtIndex:i]^0x45);
    }
    NSString *realRet = [[NSString alloc] initWithUTF8String:ret];
    [realRet stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    return realRet;
} 
```

对于 a `NSString`，在 java 中相当于`length()`目标 c 是`[string length]`。对于`cString`，它是`strlen()`。

**更新：**

根据您的编辑，它是一个 C 数组而不是 NSArray。在这种情况下，您需要使用，

```
- (NSString *) descramble:(NSString*) input{
    char *ret = [input UTF8String];
    int offset = -1 * ((sizeof scrambBase20) / (sizeof int));
    for(int i=0;i < [input length];i++){
        if(i%((sizeof scrambBase20) / (sizeof int))==0){
            offset+=((sizeof scrambBase20) / (sizeof int));
        }
        ret[scrambBase20[i%((sizeof scrambBase20) / (sizeof int))]+offset] = (char) ((Byte) [input characterAtIndex:i]^0x45);
    }
    NSString *realRet = [[NSString alloc] initWithUTF8String:ret];
    [realRet stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

    return realRet;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T02:58:23.280

您使用`sizeof`不正确：它*不是*Java的替代品`length()`。

您应该在 C 字符串上使用，`strlen(cString)`例如由`UTF8String`, 或对象返回的字符串。`[str length]``NSString`

# python - 在Python中按时间戳复制文件

> ID：13794348
> 
> 赞同：1
> 
> 时间：2012-12-10T02:52:41.730
> 
> 标签：python, file, operating-system, directory, duplication

我正在使用一个每小时拍摄一张照片以及其他 3 个元数据文件的程序。所有这些都存储在一个文件夹中。通过终端，我让程序每运行 10 分钟。但是我仍然想保持每小时 1 张图片（4 个文件）的旧结构。因此创建了 2 个文件夹，一个全部捕获，一个将带有小时时间戳的图片（从全部捕获）复制到旧文件夹中。

现在我有这段代码，但我很迷茫，需要一些指导。

```
import os
import subprocess 

class cd:
    def __init__(self, newPath):
       self.newPath = newPath

    def __enter__(self):
       self.savedPath = os.getcwd()
       os.chdir(self.newPath)

    def __exit__(self, etype, value, traceback):
       os.chdir(self.savedPath)

    with cd("/User/...."):

       subprocess.call("ls") 
```

非常感谢您的帮助，

埃里克

# python - 如何在同一个显示窗口中绘制 3 个子图？Python

> ID：13794350
> 
> 赞同：5
> 
> 时间：2012-12-10T02:52:59.530
> 
> 标签：python, matplotlib, plot, subplot

```
# Import plotting routines
from pylab import *

# 1D ODE that has a pitchfork bifurcation
# x_dot = r * x - x * x * x
def PitchforkODE(r,x):
return r * x - x * x * x

# 1D Euler
def OneDEuler(r,x,f,dt):
    return x + dt * f(r,x)

# Improved 1D Euler
def ImprovedOneDEuler(r,x,f,dt):
xtemp = x + dt * f(r,x)
return x + dt * ( f(r,x) + f(r,xtemp) ) / 2.0

# 4th Order Runge-Kutta Euler Method
def RKOneD(r,x,f,dt):
k1 = dt * f(r,x)
k2 = dt * f(r,x + k1/2.0)
k3 = dt * f(r,x + k2/2.0)
k4 = dt * f(r,x + k3)
return x + ( k1 + 2.0 * k2 + 2.0 * k3 + k4 ) / 6.0

# Integrator function that calls one of the three functions
# Fills up array
def Integrator(x1,x2,x3,x4,t,N,Func,dt):
    for n in xrange(0,N):
        x1.append( Func(r,x1[n],PitchforkODE,dt) )
        x2.append( Func(r,x2[n],PitchforkODE,dt) )
        x3.append( Func(r,x3[n],PitchforkODE,dt) )
        x4.append( Func(r,x4[n],PitchforkODE,dt) )
        t.append( t[n] + dt )

# Simulation parameters
# Integration time step
dt = 0.2

# Control parameter of the pitchfork ODE:
r = 1.0

# Set up arrays of iterates for four different initital conditions
x1 = [ 0.1]
x2 = [-0.1]
x3 = [ 2.1]
x4 = [-2.1]
x5 = [ 0.1]
x6 = [-0.1]
x7 = [ 2.1]
x8 = [-2.1]
x9 = [ 0.1]
x10 = [-0.1]
x11 = [ 2.1]
x12 = [-2.1]

# Time
t  = [ 0.0]

# The number of time steps to integrate over
N = 50

#The different functions
a = OneDEuler
b = ImprovedOneDEuler
c = RKOneD

# Setup the plot
subplot(3,1,1)
Func = a
Integrator(x1,x2,x3,x4,t,N,Func,dt)
ylabel('x(t)') # set y-axis label
title(str(Func.func_name) + ': Pitchfork ODE at r= ' + str(r)) # set plot title
axis([0.0,dt*(N+1),-2.0,2.0])
# Plot the time series
plot(t,x1,'b')
plot(t,x2,'r')
plot(t,x3,'g')
plot(t,x4,'m')

subplot(212)
Func = b
Integrator(x5,x6,x7,x8,t,N,Func,dt)
ylabel('x(t)') # set y-axis label
title(str(Func.func_name) + ': Pitchfork ODE at r= ' + str(r)) # set plot title
axis([0.0,dt*(N+1),-2.0,2.0])
# Plot the time series
plot(t,x5,'b')
plot(t,x6,'r')
plot(t,x7,'g')
plot(t,x8,'m')

subplot(3,1,3)
Func = c
Integrator(x9,x10,x11,x12,t,N,Func,dt)
xlabel('Time t') # set x-axis label
ylabel('x(t)') # set y-axis label
title(str(Func.func_name) + ': Pitchfork ODE at r= ' + str(r)) # set plot title
axis([0.0,dt*(N+1),-2.0,2.0])
# Plot the time series
plot(t,x9,'b')
plot(t,x10,'r')
plot(t,x11,'g')
plot(t,x12,'m') 
```

我试图在同一个显示窗口上绘制 3 个不同的子图。一个在另一个之上。所以基本上，3行1列。每个图代表不同的函数 a、b 或 c。每个地块应该有 4 条不同的线。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T03:23:03.223

嗯......看起来你正在正确地做绘图部分。下面的代码为您提供了下图。

```
from pylab import *
subplot(3,1,1)
plot(arange(33))
subplot(3,1,2)
plot(arange(44))
subplot(3,1,3)
plot(arange(55),'r') 
```

![在此处输入图像描述](../Images/0678bec84f7022068363484c1b3e481d.png)

不过，您的代码确实存在一些问题，我发现的第一件事是您的 t 和 x 向量的大小不同。

# python - 构建这个扭曲的网络爬虫时我做错了什么？

> ID：13794351
> 
> 赞同：1
> 
> 时间：2012-12-10T02:53:18.797
> 
> 标签：python, web-scraping, twisted

你能以我扭曲的方式告诉我错误吗？很长一段时间以来，我一直在努力构建一个快速的网络爬虫。使用 Queue构建传统的线程**刮板**是小菜一碟，到目前为止，速度更快。不过，我想比较扭曲！webscraper 的目标是递归地从图库中找到图像 () 链接，并连接到这些图像链接以抓取图像 () 和/或收集更多图像链接以供以后解析。代码如下所示。大多数函数都传递一个字典，因此我可以更概念地对每个链接的所有信息进行打包。我尝试线程化否则会阻塞代码（parsePage 函数）并使用“异步代码”（或者我相信）来检索 html 页面、标题信息和图像。

到目前为止，我的主要问题是从我的 getLinkHTML 或 getImgHeader errback 中追踪到大量“用户超时导致连接失败”。我曾尝试限制使用信号量建立的连接数量，甚至导致我的一些代码休眠无济于事，以为我淹没了连接。**我还认为问题可能来自 reactor.connectTCP 因为超时错误在运行scraper**大约 30 秒后产生，并且 connectTCP 有 30 秒超时。但是，我将twisted模块的connectTCP代码修改为60s，运行后大约30秒仍然出现超时错误。当然，用我传统的螺纹**刮刀****刮取相同的网站****工作正常，而且要快得多。**

 **那么我做错了什么？另外，由于我是自学成才的，请随时对我的代码提出批评，并且我在整个代码中也有一些随机问题。任何建议都非常感谢！

```
from twisted.internet import defer
from twisted.internet import reactor
from twisted.web import client
from lxml import html
from StringIO import StringIO
from os import path
import re

start_url = "http://www.thesupermodelsgallery.com/"
directory = "/home/z0e/Pictures/Pix/Twisted"
min_img_size = 100000

#maximum <a> links to get from main gallery
max_gallery_links = 500

#maximum <a> links to get from subsequent gallery/pages
max_picture_links = 35

def parsePage(info):

    def linkFilter(link):
    #filter unwanted <a> links
    if link is not None:
        trade_match = re.search(r'&trade=', link)
        href_split = link.split('=')
        for i in range(len(href_split)):
            if 'www' in href_split[i] and i > 0:
                link = href_split[i]
        end_pattern = r'\.(com|com/|net|net/|pro|pro/)$'
        end_match = re.search(end_pattern, link)
        p_pattern = r'(.*)&p'
        p_match = re.search(p_pattern, link)
        if end_match or trade_match:
            return None
        elif p_match:
            link = p_match.group(1)
            return link
        else:
            return link
    else:
        return None

    # better to handle a link with 'None' value through TypeError
    # exception or through if else statements?  Compare linkFilter
    # vs. imgFilter functions

    def imgFilter(link):
    #filter <img> links to retain only .jpg
    try:
        jpg_match = re.search(r'.jpg', link)
        if jpg_match is not None:
            return link
        else:
            return None
    except TypeError:
        return None

    link_num = 0
    gallery_flag = None
    info['level'] += 1
    if info['page'] is '':
    return None
    # use lxml to parse and get document root
    tree = html.parse(StringIO(info['page']))
    root = tree.getroot()
    root.make_links_absolute(info['url'])
    # info['level'] = 1 corresponds to first recursive layer (i.e. main gallery page)
    # info['level'] > 1 will be all other <a> links from main gallery page
    if info['level'] == 1:
    link_cap = max_gallery_links
    gallery_flag = True
    else:
    link_cap = max_picture_links
    gallery_flag = False
    if info['level'] > 4:
    return None
    else:

    # get <img> links if page is not main gallery ('gallery_flag = False')
    # put <img> links back into main event loop to extract header information
    # to judge pictures by picture size (i.e. content-length)
    if not gallery_flag:
        for elem in root.iter('img'):
            # create copy of info so that dictionary no longer points to 
            # previous dictionary, but new dictionary for each link
            info = info.copy()
            info['url'] = imgFilter(elem.get('src'))
            if info['url'] is not None:
                reactor.callFromThread(getImgHeader, info) 

    # get <a> link and put work back into main event loop (i.e. w/ 
    # reactor.callFromThread...) to getPage and then parse, continuing the
    # cycle of linking        
    for elem in root.iter('a'):
        if link_num > link_cap:
            break
        else:
            img = elem.find('img')
            if img is not None:
                link_num += 1
                info = info.copy()
                info['url'] = linkFilter(elem.get('href'))
                if info['url'] is not None:
                    reactor.callFromThread(getLinkHTML, info)

def getLinkHTML(info):
    # get html from <a> link and then send page to be parsed in a thread
    d = client.getPage(info['url'])
    d.addCallback(parseThread, info)
    d.addErrback(failure, "getLink Failure: " + info['url'])

def parseThread(page, info):
    print 'parsethread:', info['url']
    info['page'] = page
    reactor.callInThread(parsePage, info)

def getImgHeader(info):
    # get <img> header information to filter images by image size
    agent = client.Agent(reactor)
    d = agent.request('HEAD', info['url'], None, None)
    d.addCallback(getImg, info)
    d.addErrback(failure, "getImgHeader Failure: " + info['url'])

def getImg(img_header, info):
    # download image only if image is above a certain threshold size
    img_size = img_header.headers.getRawHeaders('Content-Length')  
    if int(img_size[0]) > min_img_size and img_size is not None:
    img_name = ''.join(map(urlToName, info['url']))
    client.downloadPage(info['url'], path.join(directory, img_name))
    else:
    img_header, link = None, None #Does this help garbage collecting?

def urlToName(char):
    #convert all unwanted characters to '-' from url and use as file name
    if char in '/\?|<>"':
    return '-'
    else:
    return char

def failure(error, url):
    print error
    print url

def main():
    info = dict()
    info['url'] = start_url
    info['level'] = 0

    reactor.callWhenRunning(getLinkHTML, info)    
    reactor.suggestThreadPoolSize(2)
    reactor.run()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:00:56.997

First, consider not writing this code at all. Take a look at [scrapy](http://doc.scrapy.org/en/0.16/) as a solution to your needs. People have already gone to the effort of making it perform well, and if it does need to be improved, then when you improve it everyone in the community will benefit.

Next, the indentation in your code listing is unfortunately messed up, making it hard to really see what your code is doing. Hopefully the following makes sense, but you should try to correct the code listing so it accurately reflects what you're doing, and make sure to double check code listings in future questions.

As far as what your code is doing that is preventing it from being fast, here are some ideas.

There's no limit to the number of outstanding HTTP requests in the program. Without knowing what HTML you're actually parsing, I don't know if this is actually a problem, but if you end up issuing more than 20 or 30 HTTP requests at a time, it's very likely that you'll overload your network. With TCP, this often means that connection setup will not succeed (certain setup packets get lost and there is a limit on how many times they will be retried). Since you mentioned a lot of connection timeout errors, I suspect this is happening.

Consider how many HTTP requests the threaded version of your program will issue at a time. Does the Twisted version potentially issue more? If so, try imposing a limit on this. Something like `twisted.internet.defer.DeferredSemaphore` might be an easy way to impose this limit (although it's far from the **best** way, so if it helps then you might want to start looking at better ways to impose this limit - but if the limit doesn't help then no point investing a lot of effort in a nicer limiting mechanism).

Next, by limiting the reactor threadpool to a maximum of 2 threads, you're severely hampering your ability to resolve names. By default, name resolution (ie, DNS) is done using the reactor thread pool. You have a couple options here. I'm assuming there's a good reason you want to limit parsing to two concurrent threads.

First, you could leave the reactor threadpool alone and create your own thread pool for parsing. See `twisted.python.threads.ThreadPool`. You can set the maximum on this other thread pool to 2 to get the parsing behavior you want and the reactor is free to use as many threads as it wants for name resolution.

Second, you could continue to lower the reactor thread pool size and also configure the reactor to not use threads for name resolution. `twisted.names.client.createResolver` will give you a name resolver which does just that, and `reactor.installResolver` lets you tell the reactor to use it instead of its default.**

# .net - 这个 OleDBCommand 有什么问题？

> ID：13794354
> 
> 赞同：2
> 
> 时间：2012-12-10T02:53:47.173
> 
> 标签：.net, ms-access, oledb

在 .NET 4.5 中，我试图在访问数据库上执行 OleDBCommand。

我的代码是

```
Dim rows As Integer
Dim dbCommand As OleDb.OleDbCommand = New OleDb.OleDbCommand
Dim dbTransaction As OleDb.OleDbTransaction

Call gOleCn.Open()
dbTransaction = gOleCn.BeginTransaction
dbCommand = New OleDb.OleDbCommand("", gOleCn, dbTransaction)
dbCommand.CommandText = "UPDATE Tレイヤ管理 SET レイヤー=0 WHERE 名前 LIKE '水田_*';"
rows = dbCommand.ExecuteNonQuery() 
```

查询在访问本身中执行得很好，但在 .NET 中它从不影响任何行。如果我将 CommandText 更改为`"UPDATE Tレイヤ管理 SET レイヤー=0 WHERE 名前='水田_" & Parameter & "'"`并使用 精确指定名称，它会起作用`Parameter`，但是我必须编写一个循环，而`LIKE`这一切都在一行中完成。

但是如何才能使它起作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:23:30.800

请参阅此 SO 问题的公认答案：[Microsoft Jet 通配符：星号还是百分号？](https://stackoverflow.com/questions/719115/microsoft-jet-wildcards-asterisk-or-percentage-sign)

由于您使用的是 OleDb，因此您使用的是 ANSI-92 查询模式，因此必须使用`%`而不是`*`作为通配符。您`UPDATE`在 Access 会话中工作的原因是它默认使用 ANSI-89 查询模式。

```
"UPDATE Tレイヤ管理 SET レイヤー=0 WHERE 名前 LIKE '水田_%';" 
```

如果您希望`_`（下划线）字符匹配文字字符（而不是任何单个字符的 ANSI-92 通配符），请将其设置为模式中的单成员字符类：

```
"UPDATE Tレイヤ管理 SET レイヤー=0 WHERE 名前 LIKE '水田[_]%';" 
```

我不确定这些 un​​icode 表和字段名称会发生​​什么。从您的问题来看，听起来他们可能不会造成问题。但是，如果没有其他方法，我会尝试将它们括在方括号中：

```
"UPDATE [Tレイヤ管理] SET [レイヤー]=0 WHERE [名前] LIKE '水田[_]%';" 
```

# iphone - UIWebView - 关闭缩放？

> ID：13794359
> 
> 赞同：0
> 
> 时间：2012-12-10T02:54:48.400
> 
> 标签：iphone, ios

我有一个网页，它只打印浏览器的宽度和高度。

我有一个只有 UIWebView 的 ios 应用程序。webview 是屏幕的整个宽度。在我的 iphone 4S（视网膜）上，上面的页面报告客户端宽度为 320 像素（意外）。

当我使用移动 Safari 加载同一页面时，页面报告浏览器宽度为 980 像素（预期）。

UIWebView 是否有一些属性试图缩放事物，使它们看起来像原始的 iphone 宽度尺寸（320）？我想知道是否有可能阻止这种情况发生。这是一个默认的 UIWebView，使用 xcode 4.5 创建的应用程序，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:40:59.853

您将 scalePagesToFit 设置为什么？此外，设备像素与 CSS 像素不同。这篇文章可以帮助你...

[http://blog.iwalt.com/2010/06/targeting-the-iphone-4-retina-display-with-css3-media-queries.html](http://blog.iwalt.com/2010/06/targeting-the-iphone-4-retina-display-with-css3-media-queries.html)

# iphone - 更改 ios6 中的蓝色状态栏

> ID：13794361
> 
> 赞同：1
> 
> 时间：2012-12-10T02:55:00.590
> 
> 标签：iphone, ios, ios6

有时，状态栏的颜色会变为蓝色。需要它在整个应用程序中都是黑色的。我想将蓝色状态栏改回黑色。我怎么改回来。在这方面需要一些帮助。谢谢。

图像如下所示：

![在此处输入图像描述](../Images/0777af9f8562c243a9db4cb32c71900a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T07:56:38.607

你可以改变它，目标设置 -> 夏季 -> 状态栏的色调

或者

您可以从 info.plist -> 将状态栏样式的值设置为不透明黑色样式将其更改回黑色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T03:47:28.950

为状态栏添加以下代码：

```
[[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackOpaque]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T05:11:11.920

状态栏颜色由导航栏的当前色调管理，如果要设置不同的颜色，只需在 Interface Builder 中设置色调颜色，当控制器可见时，它会自动为您更改，[[UIApplication sharedApplication ]setStatusBarStyle:UIStatusBarStyleBlackOpaque]; 将强制旧颜色更改状态栏外观，但如果没有导航栏的相应色调颜色，您将无法更改为其他颜色。

# django - 带有 Cloudinary 字段的 Django 模型

> ID：13794363
> 
> 赞同：0
> 
> 时间：2012-12-10T02:55:02.730
> 
> 标签：django, django-models, django-admin, cloudinary

我是 Python 新手，正在玩 Django。在我的模型中，我试图在我的“产品”模型中合并一个字段以拥有一个 Cloudinary 图像字段。

我已将此添加到我的 settings.py 中：

```
# Cloudinary settings
CLOUDINARY = {
  'cloud_name': '[my_cloud_name]',  
  'api_key': '[my_api_key]',  
  'api_secret': '[my_api_secret]',  
} 
```

这是我的models.py：

```
from django.db import models

    class Product (models.Model):
        name=models.CharField(max_length=200)
        image=cloudinary.models.CloudinaryField('image')
        description=models.TextField() 
```

我尝试过导入各种东西（导入 cloudinary、导入 cloudinaryField 等）。

不知道如何让我的模型工作。到目前为止，我通过各种尝试收到了以下错误：

1.  “模块”对象没有属性“模型”
2.  无法导入名称 CloudinaryField
3.  名称“cloudinary”未定义

有谁可以帮我离开这里吗？Cloudinary 的文档很少，但我已通读并希望没有错过关键步骤。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:50:44.290

我能够通过将以下内容添加到我的 models.py 来解决这个问题

```
import cloudinary
from cloudinary.models import CloudinaryField 
```

# c++ - boost regex_search 找不到第一个匹配项

> ID：13794365
> 
> 赞同：1
> 
> 时间：2012-12-10T02:55:06.280
> 
> 标签：c++, regex, boost, boost-regex

```
boost::regex re("(abc)(.*?)");
boost::smatch m;
std::string str = "abcdlogin";
boost::regex_search(str, m, re); 
```

我发现 m[1].first 是“abcdlogin”，m[1].second 是“dlogin”。

但我认为 m[1].first 应该是“abc”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:12:05.420

如[文档](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/ref/regex_match.html)中所述：

> **m[n]** .first ：对于所有整数 n < m.size()，匹配子表达式 n 的序列的开始。或者，如果子表达式 n 没有参与匹配，那么最后一个。
> 
> **m[n].second**：对于所有整数 n < m.size()，匹配子表达式 n 的序列的结尾。或者，如果子表达式 n 没有参与匹配，那么最后一个。

注意它们是如何成为匹配子表达式的**迭代器。**在您的示例中，如果您想要一个带有 的字符串`"abc"`，您可以像这样构造一个字符串`std::string s(m[1].first, m[1].second);`：

# xcode - MapKit Xcode 4.5.2

> ID：13794370
> 
> 赞同：0
> 
> 时间：2012-12-10T02:55:45.533
> 
> 标签：xcode, annotations, mapkit

我是应用程序开发的新手，我正在尝试创建一个相对简单的应用程序。我需要创建的第一件事是具有一些可自定义功能的地图。我可以很好地加载地图框架，并且可以使用当前位置在模拟器中运行它，但是我无法将地图放大到当前位置，也无法添加自定义注释。我遵循了许多教程，但我假设它们不起作用，因为 xcode 4.5.2 太新而且与众不同。如果可能的话，任何人都可以向我解释这个过程。理想情况下，如果有人有我可以复制和粘贴的代码，以便查看我在编码中犯了什么错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:58:07.110

Apple 编写了 LocationAwareness 指南。这解释了你所需要的一切。
在模拟器中，您必须启用 GPS 模拟。默认模拟轨迹显示旧金山的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:13:39.930

```
 //This piece of code zooms into the User Location:
     - (void)mapView:(MKMapView *)mapView

        (MKUserLocation *)userLocation {
            MKCoordinateRegion mapRegion;   
            mapRegion.center = map.userLocation.coordinate;
            mapRegion.span = MKCoordinateSpanMake(0.2, 0.2);
            [map setRegion:mapRegion animated: YES];
        } 
```

如果您需要更多帮助，请查看此链接：[http ://www.altinkonline.nl/tutorials/xcode/corelocation/add-an-annotation-to-a-mapview/](http://www.altinkonline.nl/tutorials/xcode/corelocation/add-an-annotation-to-a-mapview/)

查看此链接以从在线资源中提取数据：[http](http://raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutoria) ://raywenderlich.com/2847/introduction-to-mapkit-on-ios-tutoria ‌​l

# python - Python Tkinter 窗口图标不会导入新图标

> ID：13794371
> 
> 赞同：3
> 
> 时间：2012-12-10T02:55:51.537
> 
> 标签：python, tkinter

我正在查看[删除 Tkinter 窗口上的 TK 图标，](https://stackoverflow.com/questions/550050/removing-the-tk-icon-on-python-tkinter-windows)但是在尝试复制代码时遇到错误。下面是代码和错误

```
from Tkinter import *
import Image, ImageTk
import sys

def quit(self):
    self.root.destroy()

root = Tk()
root.title("GUI program")
root.iconbitmap(default="C:\easy\Pics\ILC.ico")
im = Image.open("C:\easy\Pics\No-Image-Available.jpg")

image1 = ImageTk.PhotoImage(im)

# root has no image argument, so use a label as a panel
panel1 = Label(root, image=image1)
panel1.pack(side='top', fill='both', expand='yes')

root.mainloop() 
```

这是错误的副本：

```
Traceback (most recent call last):
File "C:\easy\python\IPcam\test_image.py", line 11, in <module>
root.iconbitmap(default="C:\\easy\\Pics\\transparent.ico")
File "C:\Python25\lib\lib-tk\Tkinter.py", line 1524, in wm_iconbitmap
return self.tk.call('wm', 'iconbitmap', self._w, '-default', default)
TclError: bitmap "C:\easy\Pics\transparent.ico" not defined 
```

我遵循了所有步骤。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:19:17.743

我已经执行了你的例子，它对我来说没问题。

当我为 ico 文件使用错误的路径时，我可以模拟你的错误。您是否仔细检查了它的`"C:\\easy\\Pics\\transparent.ico"`存在？

您的代码中还有两个潜在的错误：

1）使用路径`'\\'`或[原始字符串：](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)

```
im = Image.open(r"C:\easy\Pics\No-Image-Available.jpg") 
```

2) 不要忘记在最后运行 tk 主循环

```
root.mainloop() 
```

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:50:18.890

尝试将文件路径中的“\”字符替换为“/”。'\' 表示字符串文字，可以通过引号。

# c# - 串口组合框

> ID：13794376
> 
> 赞同：3
> 
> 时间：2012-12-10T02:56:33.387
> 
> 标签：c#, combobox

我正在做一个串口项目..

我需要从组合框中选择可用的 com 端口。

但我无法得到它..我需要一些帮助~

这是我的代码..它在 C# 中：

btn_Open 是激活串口的按钮

```
 private void btnOpen_Click(object sender, EventArgs e)
    {
        string [] myPort;

        int COM1 = cbCommPorts.SelectedIndex;
        int COM2 = cbCommPorts.SelectedIndex;
        int COM3 = cbCommPorts.SelectedIndex;
        Object selectedItem = serialPort1.PortName;

        myPort = System.IO.Ports.SerialPort.GetPortNames();
        cbCommPorts.Items.AddRange(myPort);

        serialPort1.PortName = cbCommPorts.SelectedItem.ToString();
        serialPort1.BaudRate = 115200;

        if (serialPort1.IsOpen) {
            serialPort1.PortName = cbCommPorts.SelectedItem.ToString();

            serialPort1.Open();
            btnTransmit.Enabled = true;
            btn2.Enabled = true;
            btn3.Enabled = true;
        } 
```

1.  cbCommPorts 是我为组合框取的名称

    私人无效 cbCommPorts_SelectedIndexChanged（对象发送者，EventArgs e）{ int COM1 = cbCommPorts.SelectedIndex; int COM2 = cbCommPorts.SelectedIndex; int COM3 = cbCommPorts.SelectedIndex；对象 selectedItem = serialPort1.PortName;

    ```
     MessageBox.Show("COM PORT: " + selectedItem.ToString() + " Selected");
    } 
    ```

我的代码有问题吗？谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T03:14:29.347

这是您可以将其与 Windows 窗体一起使用的一种方式

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.Load += Form1_Load;
    }

    void Form1_Load(object sender, EventArgs e)
    {
        var ports = SerialPort.GetPortNames();
        cmbSerialPorts.DataSource = ports;
    }

    private void btnOk_Click(object sender, EventArgs e)
    {
        if (cmbSerialPorts.SelectedIndex > -1)
        {
            MessageBox.Show(String.Format("You selected port '{0}'", cmbSerialPorts.SelectedItem));
            Connect(cmbSerialPorts.SelectedItem.ToString());
        }
        else
        {
            MessageBox.Show("Please select a port first");
        }
    }

    private void Connect(string portName)
    {
        var port = new SerialPort(portName);
        if (!port.IsOpen)
        {
            port.BaudRate = 19200;
            port.Open();
            //Continue here....
        }
    }
} 
```

话虽如此，除非您正在维护旧软件，否则看看 WPF 可能是个好主意。学习如何使用 WPF 而不是 WinForms 将为您在 Windows 8、Windows Phone 等上进行开发做好准备……而且数据绑定功能使您尝试做的事情变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-16T09:40:32.320

*WPF 代码风格*

```
public void comboBox_DropDownOpened(object sender, EventArgs e)
    {   
        string[] ports = SerialPort.GetPortNames();          
        foreach ( string comport in ports)
            {
                comboBox.Items.Add(comport);
            }
    }
.... /*Two control item combobox&button, comboxbox's item is COM port and   It's first argument of Function 「System.IO.Ports.SerialPort 」. Using (comboBox.text) */
private void button1_Click(object sender, RoutedEventArgs e)
    {

        System.IO.Ports.SerialPort Port = new SerialPort
            ((comboBox.Text), 115200, Parity.None, 8, StopBits.One);
        try
        {
            Port.Open();
            Port.Write(cmdByteArray, 0, cmdByteArray.Length );
        }
        catch { Exception ex; }
        Port.Read(readbyte, 0, readbyte.Length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T11:22:42.267

```
private void comboBox_DropDownOpened(object sender, EventArgs e)
{
    string[] ports = SerialPort.GetPortNames();
    comboBox.Items.Clear();
    foreach (string comport in ports)
    {
        comboBox.Items.Add(comport);
    }
} 
```

除了**ysjia**帖子。

如果不添加 .Clear(); 每次点击它都会进一步展开。你会有重复的。

# android - android准备dAsync

> ID：13794379
> 
> 赞同：0
> 
> 时间：2012-12-10T02:56:44.590
> 
> 标签：android, streaming, android-mediaplayer

如果我可以这样称呼自己，我就是新手，而且我的程序中有一个错误，我无法弄清楚如何修复它。我有一个使用流媒体源在线播放广播的小应用程序。

日志告诉我：

```
 > 12-09 21:32:35.207: W/WindowManager(60): Pointer down received while already down in: Window{450930b8 com.android.launcher/com.android.launcher2.Launcher paused=false}
    > 12-09 21:32:35.347: I/ActivityManager(60): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 .MainRadioActivity bnds=[174,147][230,206] } 
    > 21:32:35.777: I/Prefetcher(34): max cache size reached 12-09
    > 21:32:36.457: I/StagefrightPlayer(34):
    > setDataSource('http://64.71.133.122:8000') 12-09 21:32:36.717:
    > I/ActivityManager(60): Displayed activity MainRadioActivity: 1580 ms
    > (total 1580 ms) 12-09 21:32:36.821: I/Prefetcher(34): max cache size
    > reached 12-09 21:32:37.862: I/Prefetcher(34): max cache size reached
    > 12-09 21:32:38.902: I/Prefetcher(34): max cache size reached 12-09
    > 21:32:39.896: I/Prefetcher(34): max cache size reached
    >     12-09 21:32:40.736: E/MediaPlayer(1122): prepareAsync called in state 4
    >     12-09 21:32:40.736: D/AndroidRuntime(1122): Shutting down VM
    >     12-09 21:32:40.736: W/dalvikvm(1122): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122): FATAL EXCEPTION: main
    >     12-09 21:32:40.756: E/AndroidRuntime(1122): java.lang.IllegalStateException
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.media.MediaPlayer.prepareAsync(Native Method)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at com.example.***.MainRadioActivity.startPlaying(MainRadioActivity.java:65)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at com.example.***.MainRadioActivity.onClick(MainRadioActivity.java:55)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.view.View.performClick(View.java:2408)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.view.View$PerformClick.run(View.java:8816)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.os.Handler.handleCallback(Handler.java:587)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.os.Handler.dispatchMessage(Handler.java:92)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.os.Looper.loop(Looper.java:123)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at android.app.ActivityThread.main(ActivityThread.java:4627)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at java.lang.reflect.Method.invokeNative(Native Method)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at java.lang.reflect.Method.invoke(Method.java:521)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    >     12-09 21:32:40.756: E/AndroidRuntime(1122):   at dalvik.system.NativeStart.main(Native Method)
    >     12-09 21:32:40.776: W/ActivityManager(60):   Force finishing activity ....... 
```

这是我的代码：

```
public class MainRadioActivity extends Activity implements OnClickListener {

    private static String RADIO_STATION_URL = "http://64.71.133.122:8000";

    private Button buttonPlay;

    private Button buttonStopPlay;

    private MediaPlayer player;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_radio);

        initializeUIElements();

        initializeMediaPlayer();
    }

    private void initializeUIElements() {

        buttonPlay = (Button) findViewById(R.id.buttonPlay);
        buttonPlay.setOnClickListener(this);

        buttonStopPlay = (Button) findViewById(R.id.buttonStopPlay);
        buttonStopPlay.setEnabled(false);
        buttonStopPlay.setOnClickListener(this);

    }

    public void onClick(View v) {
        if (v == buttonPlay) {
            startPlaying();
        } else if (v == buttonStopPlay)
            stopPlaying();    
    }

    private void startPlaying() {
        buttonStopPlay.setEnabled(true);
        buttonPlay.setEnabled(false);

        player.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer mp) {
                player.start();
            }
        });
       player.prepareAsync();
    }

    private void stopPlaying() {
        if (player.isPlaying()) {
            player.stop();
            player.release();
            initializeMediaPlayer();
        }

        buttonPlay.setEnabled(true);
        buttonStopPlay.setEnabled(false);
    }

    private void initializeMediaPlayer() {
        player = new MediaPlayer();
        try {
            player.setDataSource(RADIO_STATION_URL);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
}

    @Override
    protected void onPause() {
        super.onPause();
        if (player.isPlaying()) {
            player.stop();
        }
    }   
} 
```

任何帮助是极大的赞赏 ：） ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:04:11.980

我想你忘记添加`player.setAudioStreamType(AudioManager.STREAM_MUSIC);`

# php - 将参数从 extjs 发送到 PHP 文件（Codeigniter）

> ID：13794390
> 
> 赞同：1
> 
> 时间：2012-12-10T02:57:36.383
> 
> 标签：php, codeigniter, extjs

我的代码有问题。
我使用 ExtJs 和 Codeigniter 开发我的 web 应用程序
实际上我的问题是将参数从 extjs 发送到 CI 控制器。
我有一个像这样的简单代码

```
Ext.Loader.setConfig({enabled: true});
Ext.Loader.setPath('Ext.ux', '../../extjs/src/ux');
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.ux.grid.FiltersFeature',
    'Ext.toolbar.Paging'
]);

Ext.define('materialspec', {
    extend: 'Ext.data.Model',
    fields: [
             {name: 'id_planmaterial', type: 'string'},
             {name: 'material_desc', type: 'string'},
             {name: 'material_priority', type: 'string'},
             {name: 'material_product_code', type: 'string'},
             {name: 'material_qty', type: 'string'},
             {name: 'material_unit', type: 'string'},
             {name: 'material_note', type: 'string'},
             {name: 'docNo', type: 'string'}
            ]
});

var store2 = Ext.create('Ext.data.Store', {
    id: 'store2',
    model: 'materialspec',
    proxy: {
        type: 'ajax',
        url : '../planspec/planmaterial',
        reader: {
            type: 'json',
            root: 'id_planmaterial'
        }
    },
    sorters: [{
        property    : 'id_planmaterial',
        direction   : 'ASC'
    }]
});

Ext.onReady(function(){
    Ext.QuickTips.init();
    var encode = false;
    var local = true;

    var filters2 = {
        ftype: 'filters',
        encode: encode,
        local: local,
        filters: [
            {
                type: 'boolean',
                dataIndex: 'id_planmaterial'
            }
        ]
    };

    var grid2 = Ext.create('Ext.grid.Panel', {
        border: false,
        store: store2,
        columns: [
            { header: "No.", xtype: 'rownumberer', width: 30, align: 'center' },
            { id: 'docNo', header: "Document No.", dataIndex: 'docNo', sortable: true, filter: {type: 'string'} },
            { id: 'descMaterial', header: "Description", dataIndex: 'material_desc', flex:1, filter: {type: 'string'} },
            { id: 'priority', header: "Priority", dataIndex: 'material_priority', flex:1, filter: {type: 'string'} },
            { id: 'productCode', header: "Product Code", dataIndex: 'material_product_code', flex:1, filter: {type: 'string'} },
            { id: 'qty', header: "Quantity", dataIndex: 'material_qty', flex:1, filter: {type: 'string'} },
            { id: 'unit', header: "Unit", dataIndex: 'material_unit', flex:1, filter: {type: 'string'} },
            { id: 'note', header: "Note", dataIndex: 'material_note', flex:1, filter: {type: 'string'} }
            ],
        loadMask: true,
        features: [filters2],
        title: 'PlanSpec Material',
        height: '100%',
        width: '100%',
        renderTo: 'gridMaterial'
    });

    store2.load({
    params:{
        test:2
    }
    });
}); 
```

我有一个这样的控制器

```
public function planmaterial(){
        $result = $this->input->post('test');
        echo $result;
    } 
```

实际上我认为应该给它一个输出='2'。
但没有显示输出。
所以我该怎么做？
请告诉我我的错误。
感谢您的关注 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:28:36.890

您找错地方了，看起来好像您的路线必须处理直接和通过 XHR 调用的问题。

首先，确保 CI 配置为不破坏`$_GET`超级全局。它在`application/config/config.php`：

```
$config['allow_get_array']      = TRUE; 
```

其次，在您的控制器中，使用输入类来确定请求是否实际上是 XHR。您需要知道，因为在一种用途中，您发送了一个变量，而在另一种用途中，您正在发送 JSON 响应。

```
if ($this->input->is_ajax_request()) { 
```

这仅确定是否`HTTP_X_REQUESTED_WITH`设置了标头。

最后，您想从`$_GET`, not获取值`$_POST`并对其进行初始化：

```
 $result = $this->input->get('test', FALSE); 
```

你最终得到以下结果：

```
$value = $this->input->get('test', FALSE);
if ($this->input->is_ajax_request() === TRUE) {
    if ($value === FALSE) {
        /* deal with an improper XHR */
    } else {
        /* deal with a proper XHR, send your JSON */
    }
} else {
    /* Not an AJAX request
     * Adjust your view based on the value of 'test' being set or not. Do you
     * need to do something differently if it isn't set? 
     */
} 
```

但是，我建议您使用不同的路线，其中一种专门用于 XHR - 至少据我看您发布的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:05:31.867

这是执行 GET 请求并使用查询字符串：

../planspec/planmaterial?test=2

然后，您应该使用：

```
$this->input->get('test', TRUE); 
```

祝你好运！

# python - Django MPTT 订购

> ID：13794399
> 
> 赞同：2
> 
> 时间：2012-12-10T02:58:16.940
> 
> 标签：python, django, recursion, tree, mptt

我在我的 Django 项目中使用 MPTT 树结构来组织评论。我只有 2 个级别：评论和评论评论 除了排序之外，一切都完美无缺。

我想按创建日期升序（“-creation_date”）对所有没有父级的评论和所有按创建日期后裔（“creation_date”）有父级的评论进行排序。基本上就像评论在 Facebook 墙上工作一样。（您总是会在顶部看到最新评论，但评论中的评论顺序相反）

在我的课堂评论中，我有以下 MPTTMeta ： order_insertion_by=['creation_date']

我希望我能得到一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:50:37.217

我已经在这里坐了五分钟，鉴于您所描述的数据结构，我想不出在 SQL 中执行此操作的方法。首先，我建议您将数据分为帖子和评论，而不仅仅是一种数据对象。然后，您可以加入以将评论与您的​​帖子一起收集，并对每个评论进行不同的排序。

此外，对于两层树来说，MPTT 似乎有点矫枉过正。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T05:11:19.210

我找到了解决方案，所以我忘了回来查看。我玩弄了 mptt 结构和 django 函数……谢谢

# facebook - 保持 Facebook 访问令牌有效的网站

> ID：13794401
> 
> 赞同：0
> 
> 时间：2012-12-10T02:58:28.630
> 
> 标签：facebook, facebook-graph-api

不是编程问题，但不确定在哪里可以问：

当特定事件发生时，我的网站会在用户的 Facebook 墙上发布。由于 Facebook 令牌现在的最长使用寿命为 60 天，我想知道更新此访问令牌的最佳做法是什么。例如，我是否应该每 2 个月发送一封电子邮件，要求用户登录我的网站，并重新授权 Facebook？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:51:57.783

[您可以使用文档](https://developers.facebook.com/docs/howtos/login/extending-tokens/)`access_token`中讨论的端点来扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:22:05.783

> 由于 Facebook 令牌现在的最长使用寿命为 60 天，我想知道更新此访问令牌的最佳做法是什么。

显然，它需要用户交互——毕竟，这就是弃用offline_access 的全部意义所在。（我想从你的问题中你知道，无论如何都要提到它。）

> 例如，我是否应该每 2 个月发送一封电子邮件，要求用户登录我的网站，并重新授权 Facebook？

那将是解决问题的一种方法。

另一种方法是，假设您的应用用户是 facebook.com 的常客，向他们发送[通知](https://developers.facebook.com/docs/app-notifications/)。单击该按钮后，它们将发送到您应用的画布页面——您只需调用 JavaScript SDK 的`FB.getLoginStatus`. 将它发送到您的服务器，延长它……您可以再使用 60 天。

（您的应用程序可能没有画布页面 - 但这可能是设置一个画布页面的好理由，即使它的唯一目的是上述过程。）

除此之外，您应该检查您是否真的*需要*用户访问令牌来*执行*您正在做的事情。只要您的应用程序具有来自用户的相关权限（例如发布到墙上、读取数据等），您的*应用程序*访问令牌也可以完成许多事情

# php - drupal：添加内容时不显示“新”

> ID：13794404
> 
> 赞同：0
> 
> 时间：2012-12-10T02:58:46.220
> 
> 标签：php, drupal

我正在尝试显示“新！” 到最近在 drupal 7 中添加的内容。
我上网但找不到太多关于它的内容。
我在互联网上的某个地方看到了一篇帖子，告诉我要在视图中添加“内容：有新内容”字段。
然而，这也没有奏效。
显示“NEW！”的drupal方式是什么？到最近添加的内容？
还是我需要用 node_mark() 或其他东西编写代码？
干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:24:58.997

[drupal.stackexchange.com](https://drupal.stackexchange.com/questions/5925/how-to-display-new-label-in-comments-list)中回答了一个相关问题

“有一个名为历史记录的数据库表，它记录了要检查的用户历史记录。视图中有一个选项可以为用户未查看且已在特定时间范围内创建的内容添加‘新’标记。

如果您对“新”标记的工作原理进一步感兴趣，您可以在 views/modules/comment/views_handler_field_node_new_comments.inc 中找到 Views 使用的查询，以将“新”标签添加到字段列表中。”

总而言之，Views 很容易为您解决问题。希望能提供一些帮助。

# javascript - 简短而甜蜜的打印插件效果很好，但不打印输入字段内容？

> ID：13794405
> 
> 赞同：0
> 
> 时间：2012-12-10T02:59:12.657
> 
> 标签：javascript, jquery

我正在使用以下打印插件：[Ask Ben Print Plugin](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)

该插件适用于页面上的任何内容，除了输入字段内容。我需要能够打印出包含输入字段内容的页面，由于某种原因，在使用此插件时，输入字段不会出现在打印预览/最终打印文档上。当我简单地使用 Ctrl+P 方法打印出包含输入字段的页面时，输入字段的内容显示良好。

我想知道是否有人可以帮助我确定下面的代码阻止我打印输入字段内容的原因是什么？提前谢谢了！

jQuery函数调用：

```
$(".main-container").print(); 
```

Javascript：

```
// Create a jquery plugin that prints the given element.
jQuery.fn.print = function() {
    // NOTE: We are trimming the jQuery collection down to the
    // first element in the collection.
    if (this.size() > 1) {
        this.eq(0).print();
        return;
    } else if (!this.size()) {
        return;
    }

    // ASSERT: At this point, we know that the current jQuery
    // collection (as defined by THIS), contains only one
    // printable element.
    // Create a random name for the print frame.
    var strFrameName = ("printer-" + (new Date()).getTime());

    // Create an iFrame with the new name.
    var jFrame = $("<iframe name='" + strFrameName + "'>");

    // Hide the frame (sort of) and attach to the body.
    jFrame.css("width", "1px").css("height", "1px").css("position", "absolute").css("left", "-9999px").appendTo($("body:first"));

    // Get a FRAMES reference to the new frame.
    var objFrame = window.frames[strFrameName];

    // Get a reference to the DOM in the new frame.
    var objDoc = objFrame.document;

    // Grab all the style tags and copy to the new
    // document so that we capture look and feel of
    // the current document.
    // Create a temp document DIV to hold the style tags.
    // This is the only way I could find to get the style
    // tags into IE.
    var jStyleDiv = $("<div>").append(
    $("style").clone());

    // Write the HTML for the document. In this, we will
    // write out the HTML of the current element.
    objDoc.open();
    objDoc.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">");
    objDoc.write("<html>");
    objDoc.write("<body>");
    objDoc.write("<head>");
    objDoc.write("<title>");
    objDoc.write(document.title);
    objDoc.write("</title>");
    objDoc.write(jStyleDiv.html());
    objDoc.write("</head>");
    objDoc.write(this.html());
    objDoc.write("</body>");
    objDoc.write("</html>");
    objDoc.close();

    // Print the document.
    objFrame.focus();
    objFrame.print();

    // Have the frame remove itself in about a minute so that
    // we don't build up too many of these frames.
    setTimeout(

    function() {
        jFrame.remove();
    }, (60 * 1000));
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:16:00.330

该插件用于`$(this).html();`确定发送到打印 iFrame 的内容。如果您专门选择输入，您还需要指定值以获取要打印的输入文本。`<div>`当我运行测试时，如果我将输入包装在 a 中并告诉插件打印包含的 div ，我就能够打印输入字段的内容。*编辑：我将`value=""`,`<input>`注册为 HTML 的插件设置为插件，而不是添加文本然后启动打印功能。*

这是一个 jsFiddle：http: [//jsfiddle.net/radiatorsounds/D5tef/](http://jsfiddle.net/radiatorsounds/D5tef/)

为了澄清，您需要将`value=""`每个输入（算作 HTML）设置为它的`val()`（不是），以便 parentDiv.html() 正确抓取它。我已经用这段代码更新了小提琴，它需要在`print();`命令运行之前运行。

```
$('#printTheDivLink').click(function() {
    $('div input').each(function() {
        $(this).attr('value', $(this).val());
    });
    $('#divToPrint').print();
});​ 
```

# android - Android - 重新打开拨出电话屏幕

> ID：13794406
> 
> 赞同：2
> 
> 时间：2012-12-10T02:59:18.997
> 
> 标签：android

我有这个代码可以拨打电话：

```
if (intent == null){
     intent = new Intent(Intent.ACTION_CALL);    
     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);    
     intent.setData(Uri.parse("tel:" + phone));    
}
this.startActivity(intent); 
```

在“电话呼叫”期间，用户能够返回到我的活动中此代码所在的位置。（在点击按钮上）

如果用户再次按下此按钮，则另一个“电话”开始处于保持状态。

我知道我可以使用 TelephonyManager 获取当前状态电话，并且在此状态下，如果 status = CALL_STATE_OFFHOOK，我可以禁用按钮，但我想要的是**重新打开**OUTGOING CALL SCREEN。就像当你有一个活跃的“电话”时点击“通知栏”一样。

我不想挂断，（我知道限制）我只想重新打开通话屏幕。

我会感谢你的帮助。

# ruby-on-rails - 在自制软件中链接“食谱”包

> ID：13794413
> 
> 赞同：0
> 
> 时间：2012-12-10T02:59:54.893
> 
> 标签：ruby-on-rails, package, homebrew

我正在尝试安装特定版本的“recipe”（OSX 10.8 中的 graphviz-2.29.20121209.0545.pkg）来帮助 RoR 的数据可视化，但是在安装了开发人员版本之后，因为稳定版本还没有准备好，我使用了安装程序。我想确保 homebrew 知道它，所以我输入`brew install graphviz`并得到了`graphviz-2.28.0 already installed, it's just not linked`. 我想知道如何链接它？

[包裹网址](http://www.graphviz.org/Download_macos.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:58:47.443

你应该只需要：

```
brew link graphviz 
```

希望这可以帮助！

# r - 将 vegan 包中的 ordiellipse 函数绘制到在 ggplot2 中创建的 NMDS 图上

> ID：13794419
> 
> 赞同：11
> 
> 时间：2012-12-10T03:01:04.997
> 
> 标签：r, ggplot2, vegan

而不是我`ggplot2`用来创建 NMDS 图的普通绘图函数。我想使用包中的函数在 NMDS 图中显示`ordiellipse()`组`vegan`。

示例数据：

```
library(vegan)
library(ggplot2)
data(dune)
# calculate distance for NMDS
sol <- metaMDS(dune)
# Create meta data for grouping
MyMeta = data.frame(
  sites = c(2,13,4,16,6,1,8,5,17,15,10,11,9,18,3,20,14,19,12,7),
  amt = c("hi", "hi", "hi", "md", "lo", "hi", "hi", "lo", "md", "md", "lo", 
          "lo", "hi", "lo", "hi", "md", "md", "lo", "hi", "lo"),
  row.names = "sites")
# plot NMDS using basic plot function and color points by "amt" from MyMeta
plot(sol$points, col = MyMeta$amt)
# draw dispersion ellipses around data points
ordiellipse(sol, MyMeta$amt, display = "sites", kind = "sd", label = T)

# same in ggplot2
NMDS = data.frame(MDS1 = sol$points[,1], MDS2 = sol$points[,2])
ggplot(data = NMDS, aes(MDS1, MDS2)) + 
  geom_point(aes(data = MyMeta, color = MyMeta$amt)) 
```

如何将 ordiellipse 添加到使用 创建的 NMDS 图中`ggplot2`？

Didzis Elferts 下面的回答效果很好。谢谢！但是，我现在有兴趣将以下 ordiellipse 绘制到使用以下命令创建的 NMDS 图`ggplot2`：

`ordiellipse(sol, MyMeta$amt, display = "sites", kind = "se", conf = 0.95, label = T)`

不幸的是，我对函数的工作原理不够了解，`veganCovEllipse`无法自己调整脚本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T12:36:45.590

首先，我将列组添加到您的 NMDS 数据框中。

```
 NMDS = data.frame(MDS1 = sol$points[,1], MDS2 = sol$points[,2],group=MyMeta$amt) 
```

第二个数据框包含每个组的平均 MDS1 和 MDS2 值，它将用于在图上显示组名

```
 NMDS.mean=aggregate(NMDS[,1:2],list(group=group),mean) 
```

数据框`df_ell`包含显示椭圆的值。`veganCovEllipse`它是用隐藏在`vegan`包中的函数计算的。此函数应用于 NMDS（组）的每个级别，它还使用函数`cov.wt`来计算协方差矩阵。

```
 veganCovEllipse<-function (cov, center = c(0, 0), scale = 1, npoints = 100) 
  {
    theta <- (0:npoints) * 2 * pi/npoints
    Circle <- cbind(cos(theta), sin(theta))
    t(center + scale * t(Circle %*% chol(cov)))
  }

  df_ell <- data.frame()
  for(g in levels(NMDS$group)){
    df_ell <- rbind(df_ell, cbind(as.data.frame(with(NMDS[NMDS$group==g,],
                    veganCovEllipse(cov.wt(cbind(MDS1,MDS2),wt=rep(1/length(MDS1),length(MDS1)))$cov,center=c(mean(MDS1),mean(MDS2)))))
                    ,group=g))
  } 
```

现在用函数绘制椭圆`geom_path()`并`annotate()`用于绘制组名。

```
 ggplot(data = NMDS, aes(MDS1, MDS2)) + geom_point(aes(color = group)) +
    geom_path(data=df_ell, aes(x=MDS1, y=MDS2,colour=group), size=1, linetype=2)+
    annotate("text",x=NMDS.mean$MDS1,y=NMDS.mean$MDS2,label=NMDS.mean$group) 
```

椭圆绘图的想法是从另一个 stackoverflow[问题](https://stackoverflow.com/questions/2397097/how-can-a-data-ellipse-be-superimposed-on-a-ggplot2-scatterplot)中采用的。

![在此处输入图像描述](../Images/c131680d2ef0de3460f01704f1275e91.png)

## 更新 - 在这两种情况下都有效的解决方案

首先，使用组列制作 NMDS 数据框。

```
NMDS = data.frame(MDS1 = sol$points[,1], MDS2 = sol$points[,2],group=MyMeta$amt) 
```

接下来，将函数的结果保存`ordiellipse()`为某个对象。

```
ord<-ordiellipse(sol, MyMeta$amt, display = "sites", 
                   kind = "se", conf = 0.95, label = T) 
```

数据框`df_ell`包含显示椭圆的值。它使用`veganCovEllipse`隐藏在`vegan`包中的函数再次计算。此函数应用于 NMDS（组）的每个级别，现在它使用存储在object `ord`-`cov`和每个级别的参数。`center``scale`

```
df_ell <- data.frame()
for(g in levels(NMDS$group)){
  df_ell <- rbind(df_ell, cbind(as.data.frame(with(NMDS[NMDS$group==g,],
                  veganCovEllipse(ord[[g]]$cov,ord[[g]]$center,ord[[g]]$scale)))
                                ,group=g))
} 
```

绘图的方式与前面的示例相同。至于使用椭圆对象的坐标计算`ordiellipse()`，此解决方案将使用您为此函数提供的不同参数。

```
ggplot(data = NMDS, aes(MDS1, MDS2)) + geom_point(aes(color = group)) +
  geom_path(data=df_ell, aes(x=NMDS1, y=NMDS2,colour=group), size=1, linetype=2) 
```

![在此处输入图像描述](../Images/c4747f241190d974fc232a66e65fa645.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-06T20:14:13.707

两个更新：

1. `NMDS.mean=aggregate(NMDS[,1:2],list(group=group),mean)`

应该更新为

```
NMDS.mean=aggregate(NMDS[,1:2],list(group=NMDS$group),"mean") 
```

`NMDS$group`不是一个因素，所以循环水平的`NMDS$group`不起作用。`Df_ell`返回零变量中的零观测值。

```
 NMDS$group <- as.factor(NMDS$group) 
```

解决这个问题。

# objective-c - 嵌套的 objectForKey 调用有效，但等效的 valueForKey 调用不起作用？

> ID：13794429
> 
> 赞同：0
> 
> 时间：2012-12-10T03:03:22.783
> 
> 标签：objective-c, ios6, key-value-coding

我有一个代表 Flickr 照片的 NSDictionary。

照片的描述看起来像这样：

```
{
    accuracy = 16;
    context = 0;
    dateupload = 1355106635;
    description =     {
        "_content" = "Barclays Center Arena\nAtlantic Yards\nProspect Heights\nBrooklyn, New York";
    };
    farm = 9;
    "geo_is_contact" = 0;
    "geo_is_family" = 0;
    "geo_is_friend" = 0;
    "geo_is_public" = 1;
    id = 8260097924;
    isfamily = 0;
    isfriend = 0;
    ispublic = 1;
    latitude = "40.681786";
    longitude = "-73.972545";
    originalformat = jpg;
    originalsecret = cd1bdd846a;
    owner = "62968578@N07";
    ownername = atlanticyardswebcam02;
    "place_id" = "uUNC_q9TWr1vROR4wA";
    secret = 320e308baa;
    server = 8502;
    tags = "newyork brooklyn construction prospectheights atlanticyards forestcityratner block1129 barclayscenterarena";
    title = "Barclays Center Arena - 20121209_2128";
    woeid = 28751452;
} 
```

如果我通过嵌套的 objectForKey 调用获得描述，它就可以工作。即，像这样：

```
NSString *photoDescription = [[photo objectForKey:@"description"] objectForKey:@"_content"]; 
```

这很笨拙，我的理解是这也应该有效：

```
NSString *photoDescription_kv = [photo valueForKey:@"description._content"]; 
```

但是，valueForKey 始终返回 null。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T03:06:33.420

应该改用 valueForKeyPath。

```
NSString *photoDescription_kv = [photo valueForKeyPath:@"description._content"]; 
```

# varnish - 如何使用两个后端设置清漆？

> ID：13794432
> 
> 赞同：3
> 
> 时间：2012-12-10T03:03:52.737
> 
> 标签：varnish

我已经安装了 Apache 和 Tomcat，想在它们前面安装 Varnish，静态到 Apache，动态到 Tomcat（所有 /static/* url 到 Apache 并且应该被 Varnish 缓存，其他 url 到 tomcat）。

如何配置清漆？

```
backend static {
  .host = "127.0.0.1";
  .port = "8080";
}
backend dynamic {
  .host = "127.0.0.1";
  .port = "8081";
}
sub vcl_recv {
 if (req.url ~ "^/static/") { # How to determine which backend to go to, and cache it?
    return (lookup);         # return (static.lookup)?
 } else {
    return (lookup);
 }
 return (lookup);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:05:25.003

根据[Varnish 文档](https://www.varnish-cache.org/docs/3.0/reference/vcl.html "清漆文档")，使用

```
set req.backend = static; 
```

等等。

# emacs - 如何禁用emacs中流浪汉缓冲区的自动保存？

> ID：13794433
> 
> 赞同：9
> 
> 时间：2012-12-10T03:03:55.303
> 
> 标签：emacs, tramp

流浪汉缓冲区的自动保存非常烦人，每次都要花费几十秒。

我可以使用 Alt-X 自动保存模式禁用它，有什么办法可以自动禁用它吗？也许通过使用某种钩子？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T03:12:05.403

您可以设置`tramp-auto-save-directory`为本地目录。

```
(setq tramp-auto-save-directory "~/emacs/tramp-autosave") 
```

更新：在您的情况下，您可以设置`tramp-auto-save-directory`为`/tmp`.

# android - 如果应用程序为平板电脑或安卓手机呈现，则指定不同的“sp”字体大小

> ID：13794435
> 
> 赞同：0
> 
> 时间：2012-12-10T03:04:04.717
> 
> 标签：android, android-layout

是否可以为手机和平板电脑呈现不同的 textSize？假设如果是手机，我想使用“14sp”，如果是平板电脑，我想使用“18sp”。

平板电脑有更多的空间，所以如果我们可以稍微增加字体大小以使其更易读，那就更好了。

我们是否应该使用样式并有两个样式文件夹，例如样式/和样式-sw600dp/，并在那里指定字体大小？在系统范围内执行此操作而不是在每个元素中指定样式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:35:10.050

您应该为此而不是样式指定尺寸。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <dimen name="my_font_size">14sp</dimen>
</resources> 
```

在 values/dimensions.xml 和

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <dimen name="my_font_size">18sp</dimen>
</resources> 
```

在 values-large/dimensions.xml 或 values-sw600dp/dimensions.xml 中，我通常将平板电脑的东西放在 values-large 中，因为仍有大量 Gingerbread 平板电脑在使用中。然后，您可以在任何地方引用它：

```
android:textSize="@dimen/my_font_size" 
```

# iteration - gnuplot 迭代——最大可迭代值？

> ID：13794441
> 
> 赞同：1
> 
> 时间：2012-12-10T03:04:35.997
> 
> 标签：iteration, gnuplot

我可以在 gnuplot 4.4 中绘制一个变量值与我需要的一样大的函数：

```
gnuplot> t = 10000*365.25*24*3600
gnuplot> f(x) = alpha*delta*exp(-alpha*x)*(sin(omega*t-alpha*x)-cos(omega*t-alpha*x))
gnuplot> plot f(x) 
```

但是，如果我想使用与上面类似的值来迭代 t，通过使用“plot for”命令，我会得到段错误或者它似乎没有结束（我等了很长时间，但仍然没有响应）：

```
tau = int(40000*365.25*24*3600)
step = int(10000*365.25*24*3600)
f(x,t) = alpha*delta*exp(-alpha*x)*(sin(omega*t-alpha*x)-cos(omega*t-alpha*x))
plot for [t=0:tau:step] f(x,t) 
```

如果我有 tau = 1000，并且 step = 10 那么就没有问题，所以我假设 iterables 的大小是问题所在。有什么办法可以解决这个问题还是我做错了什么？

@mgilson 的回答之后的一些更多信息：我的系统是 64 位的，python 可以处理一些非常大的整数：

```
>>> import sys
>>> sys.maxint
9223372036854775807
>>> tau = int(40000*365.25*24*3600)
>>> print tau
1262304000000 
```

虽然 gnuplot 不能：

```
gnuplot> tau = int(40000*365.25*24*3600)
gnuplot> print tau
-2147483648 
```

如果您想尝试，这是绘图文件：

```
tau   = int(40000*365.25*24*3600)
delta = 10
kappa = 1e-6
omega = 2*pi/tau  # angular frequency
alpha = sqrt(omega/(2*kappa))  # a simplifying factor

# set the range of x and time, t
set xrange[0:3000]
step = int(10000*365.25*24*3600)

f(x,t) = alpha*delta*exp(-alpha*x)*(sin(omega*t-alpha*x)-cos(omega*t-alpha*x))
plot for [t=0:tau:step] f(x,t) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:13:42.030

快速将其中的一些放入 python 解释器中：

```
>>> tau = int(40000*365.25*24*3600)
>>> tau
1262304000000L
>>> step = int(10000*365.25*24*3600)
>>> step
315576000000L 
```

注意`L`整数末尾的 ？这意味着这些数字溢出了系统的最大整数大小，即：

```
>>> import sys
>>> sys.maxint   #2**31 - 1
2147483647 
```

对于我的系统。Python 通过使用自定义类型 ( `long`) 优雅地处理此问题，该类型允许整数占用无限数量的字节。gnuplot 处理这个问题的方式是溢出环绕......

```
gnuplot> tau = int(40000*365.25*24*3600)
gnuplot> print tau
-2147483648 
```

现在你有负数，而你期望正数。

**编辑**

无论 python`sys.maxint`是什么，gnuplot 似乎都使用 4 字节整数。在我的 ubuntu x86_64 机器上，python`sys.maxint`比 gnuplot 的整数可以处理的要大得多（仍然上限为`2**31-1`）。

# android - android，只移动文件夹，不移动文件

> ID：13794444
> 
> 赞同：0
> 
> 时间：2012-12-10T03:05:27.433
> 
> 标签：android, file, directory, copy

在过去的几天里，我一直在尝试将文件从 USB 闪存驱动器复制到我的 nexus 7 内存中。有没有办法在不指定文件名的情况下传输文件？到目前为止，这是我的代码。

```
 public void copyFile(File usb, File dst) throws IOException 
    {
        //checks to see if the backup directory is created
        if(dst.isDirectory())
        {
            //displays message saying directory is created
            mvfldr.show();
            //if else statement checks to see if pen drive drive is connected

            if(!usb.exists())
            {
                //displays message if pen drive is not connected
                chkffd2.show();

            }
            else
            {
                //displays pen drive is connected to the device
                chkffd.show();
                String[] children = usb.list();
                for(int i=0; i<children.length; i++)
                {
                    copyFile(new File(usb, children[i]), new File(dst, children[i]));
                }
            }

        }
        //directory is not created, and create the directory.
        else
        {
            //displaying message saying folder has not been created, and will be created.
            bldng.show();
            dst.mkdir();

            if(!usb.exists())
            {
                //displaying flash drive has not been connected
                chkffd2.show();

            }
            else
            {
                //displaying flash drive had been connected.
                chkffd.show();
                String[] children = usb.list();
                for(int i=0; i<children.length; i++)
                {
                    copyFile(new File(usb, children[i]), new File(dst, children[i]));
                }

            }

        }
        InputStream in = new FileInputStream(usb);
        OutputStream out = new FileOutputStream(dst);

        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0);
        {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
    }

});
}
} 
```

# c++ - 你能分配一个与 make_shared 等效的数组吗？

> ID：13794447
> 
> 赞同：36
> 
> 时间：2012-12-10T03:05:59.533
> 
> 标签：c++, c++11, shared-ptr, make-shared

```
buffer = new char[64];
buffer = std::make_shared<char>(char[64]); ??? 
```

您可以使用 为数组分配内存`make_shared<>()`吗？

我可以：`buffer = std::make_shared<char>( new char[64] );`

但这仍然涉及调用 new，据我了解，它`make_shared`更安全、更有效。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-10T03:16:30.043

make_shared 的要点是将托管对象合并到共享指针的控制块中，

由于您正在处理 C++11，也许使用 C++11 数组可以满足您的目标？

```
#include <memory>
#include <array>
int main()
{
    auto buffer = std::make_shared<std::array<char, 64>>();
} 
```

请注意，您不能以与从 new[] 获得的指针相同的方式使用共享指针，因为`std::shared_ptr`（`std::unique_ptr`例如，与 不同）不提供`operator[]`. 你必须取消引用它：`(*buffer)[n] = 'a';`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-11-09T12:45:47.213

您需要共享分配的内存吗？您可以使用 a`std::unique_ptr`而不是[`std::make_unique`](http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique)C++14 上的可用：

```
auto buffer = std::make_unique<char[]>(64); 
```

在 C++20中将有一个[`std::make_shared`](http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared)可用的版本：

```
auto buffer = std::make_shared<char[]>(64); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-26T03:08:03.970

这个怎么样？

```
template<typename T>
inline std::shared_ptr<T> MakeArray(int size)
{
    return std::shared_ptr<T>( new T[size], []( T *p ){ delete [] p; } );
}

auto  buffer = new char[64];
auto  buffer = MakeArray<char>(64); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-10T19:21:26.883

最有效的方法是使用`make_shared()`下面的重载，它在 Boost 和 C++20 中可用。

```
template< class T >
shared_ptr<T> make_shared( std::size_t N ); 
```

# c# - 使用 Linq 、 Reflection 、 lambda 表达式系统地将 SqlParameters 添加到 SqlParameterCollection

> ID：13794449
> 
> 赞同：0
> 
> 时间：2012-12-10T03:06:17.810
> 
> 标签：c#, reflection, coding-style, constructor, class-members

```
public class SomeClass
{

    public SqlParameterCollection SPPC;

    public SomeClass(someType somePrameter)
    {

      ....... SqlParameters assignmet with someParameter goes here .......
        ...                                                              ...
      .......                                                      .......

      foreach (var item in typeof(
                                         GetTimesWithCustomerNames
                                   ).GetMembers()

                )
                {
                    SPPC.Add(item);
                }
     }

        SqlParameter Userid = new SqlParameter();
        SqlParameter Month = new SqlParameter();
        SqlParameter Year = new SqlParameter();
        SqlParameter ReasonId = new SqlParameter();
} 
```

对于初学者来说，我在这里是因为我被困在我需要访问`sqlParameters`在这个类的主体中声明的地方，

这些旨在在构造函数分配后立即添加到集合中

但是当我（希望在你的帮助下......）解决这个问题时，

我想学习一种我会坚持并且可能会使用的技术，不仅可以用于当前课程中的此代码，因为我将能够重用该方法，它应该适用于大多数`collection`. 这意味着我可以系统地添加 - 成员/变量或不同类型的数据，而不是隐式/手动放置每个数据，就像我也可以处理与本示例中不在同一范围内的**其他类**成员/字段或属性一样，它使它更实用。

我的问题是

你将如何实现这一点，使用 foreach 有点过时了，因为我们可以在 Linq 上使用 lambda 表达式？

是否有其他更便宜的方式来达到`children`不使用反射的给定类？

我将非常感谢一个实施示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:33:39.443

我个人会做这样的事情，

```
public class SomeClass
{
    public List<SqlParameter> SPPC;

    public SomeClass(someType someParameter)
    {
        SPPC = this.GetType().GetMembers().ToList();

        // Or you could restrict it to only fields or properties using Where()
        SPPC = this.GetType().GetMembers().Where(member => member which is of type such).ToList();

        // Or use Select() to get only the value or the name of the members
        SPPC = this.GetType().GetMembers().Select(member => get member value).ToList();

    }
} 
```

你只需要考虑你需要从这些成员那里得到什么，因为使用反射有时会让人很困惑。

**没有反射**

现在，如果您不想使用反射，则需要在初始化它们时手动添加它们，因此，

```
public class SomeClass
{
    public List<SqlParameter> SPPC;

    public SomeClass(someType someParameter)
    {
        SPPC.Add(new SqlParameter());
        SPPC.Add(new SqlParameter());
        SPPC.Add(new SqlParameter());
        ...
    }
} 
```

# r - 如何从 RStudio 服务器停止 EC2 实例

> ID：13794452
> 
> 赞同：4
> 
> 时间：2012-12-10T03:06:38.803
> 
> 标签：r, amazon-ec2, rstudio, rstudio-server

我在 Amazon EC2 实例上设置了 RStudio Server，按小时收费。我必须定期在这个实例上运行长时间的工作。我想在我的 R 工作完成后停止 EC2 服务器，以避免对我不使用的时间收费。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:06:42.030

您可以将您的 (Unix) 用户名​​（用于登录 RStudio 服务器）添加到`/etc/sudoers`文件中`NOPASSWD`以允许此类无人监督的操作，例如：

```
username ALL = NOPASSWD: /sbin/shutdown 
```

然后只需通过`system`调用停止计算机，例如：

```
system('sudo shutdown -h now', wait = FALSE) 
```

# selenium - Selenium Webdriver 获取可用的集线器端口

> ID：13794454
> 
> 赞同：1
> 
> 时间：2012-12-10T03:06:59.363
> 
> 标签：selenium, webdriver, selenium-grid

我正在使用 selenium 网格在远程机器上进行分布式测试。这台机器上运行了两个项目，我想分别为每个项目设置 selenium hub 和节点。但是，如果其中一个集线器不可用，我想将测试传递给可用的集线器。

```
 webdriver_hub = '/wd/hub'
    PORT.nil? ? port = ':4444' : port =':' + PORT
    @driver = Selenium::WebDriver.for(
      :remote,
      :url => 'http://' + SELENIUM_HUB + port + webdriver_hub,
      :desired_capabilities => caps,
      :http_client => client
    ) 
```

默认端口是“:4444”。我希望能够根据可用的集线器动态分配它，而不是使用静态默认端口。有没有办法在测试运行之前获得可用的集线器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:43:03.613

这就是 HUB 的用途，即在可用资源可用时使用它们。您应该只在配置中指定节点的端口，而不是用于测试执行。测试执行应该将 HUB 与您希望对其执行的浏览器/平台/版本连接起来，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:42:22.390

我不确定您到底在寻找什么，所以我将尝试解释我认为您如何能够得到您正在寻找的东西。

在两种情况下，特定集线器可能“不可用”。第一个是集线器未运行时。集线器已手动关闭或因错误关闭，或者只是未启动（可能在重新启动后）。

另一种情况是集线器可用，但当前没有节点可用于服务请求。如果只有一个节点可以为所有请求提供服务并且它当前正在运行最大数量的请求，则可能会发生这种情况。

第一种情况是最容易寻找的。只需尝试连接到远程服务器以确定它是否有服务器在监听它。

```
 /// <summary>
    /// Will test to verify that a Selenium Hub is running by checking a URL
    /// </summary>
    /// <param name="defaultURL">The url to test.</param>
    /// <returns>true if the hub is running.  false if it is not running.</returns>
    /// <example>IsHubRunning(new Uri("http://localhost:4444/wd/status"));</example>
    static public bool IsHubRunning(Uri defaultURL)
    {
        HttpWebRequest httpReq = (HttpWebRequest)WebRequest.Create(defaultURL); 
        httpReq.AllowAutoRedirect = false;
        HttpWebResponse httpRes;
        try
        {
            httpRes = (HttpWebResponse)httpReq.GetResponse();
            if (httpRes.StatusCode != HttpStatusCode.OK)
            {
                return false;
            }
        }
        catch (WebException ex)
        {
            // Inspect the exection.  An exception of 500 in the case
            // of Selenium may NOT be a problem.  This means a server is listening.
            if (ex.Response == null || ex.Status == WebExceptionStatus.ConnectFailure)
            {
                return false;
            }

            // Did it return the expected content type.
            if(ex.Response.ContentType != "application/json;charset=UTF-8")
            {
                return false;
            }
            if (ex.Response.ContentLength <= 0)
            {
                return false;
            }

        }
        return true;
    } 
```

上面的 C# 代码将对传入的 Uri 发出请求。它将执行 GET 请求，然后检查返回的状态码。它还测试可能根据您请求的特定 Uri 报告的异常。如果您请求 /wd/status，您应该得到“OK”响应。

这将告诉您集线器是否正在运行。它不会告诉您是否有可用于服务特定请求的节点。您还可以检查响应的其他属性，例如 Server 属性，以确定响应是否来自 Selenium 网格集线器。

第二种情况涉及更多一点。如果您想知道是否可以支持一组特定的功能，那么您可以对 /grid/console Uri 执行类似的查询。这将返回有关节点及其功能的信息。

要确定集线器可以使用哪些节点，只需解析从上述 Uri 返回的信息。但是，这需要您的测试客户端进行大量工作，以确定特定节点在请求的集线器上是否可用。

更好的方法是验证哪个集线器已启动并正在运行。然后尝试创建一个连接，请求来自该集线器的一组特定功能。如果您从中发出请求的集线器表明它无法为请求提供服务，那么您尝试下一个集线器。

下面是一些 C# 代码，可用于确定是否可以从集线器获得一组特定的功能。

```
 /// <summary>
    /// Determines if the hub can provide the capabilities requested.
    /// The specified hub is used.
    /// </summary>
    /// <param name="dc">The capabilities being requested.</param>
    /// <param name="hub">The hub to make the request to.</param>
    /// <returns>true if the requested capabilities are available, otherwise false;</returns>
    static public bool IsRemoteDriverAvailable(DesiredCapabilities dc, Uri hub)
    {
        bool isAvailable = false;
        // Verify that valid capabilities were requested.
        if (dc == null)
        {
            return isAvailable;
        }

        try
        {
            IWebDriver driver = new RemoteWebDriver(hub, dc);
            driver.Quit();
            isAvailable = true;
        }
        catch (Exception ex)
        {
            Console.WriteLine("Error {0}", ex.Message);
        }
        return isAvailable;
    } 
```

希望有帮助。

# c# - 下拉列表索引更改时文本框值消失

> ID：13794459
> 
> 赞同：0
> 
> 时间：2012-12-10T03:08:02.203
> 
> 标签：c#, asp.net, drop-down-menu, textbox

我有一个下拉列表和一个文本框，其中 TextMode 是密码。每当下拉列表索引更改时，文本框的值就会消失。任何人都有解决此问题的解决方案？太感谢了。

更新

```
<asp:DropDownList ID="ddlstudentstatus" runat="server" AutoPostBack="True" 
                onselectedindexchanged="ddlStudentstatus_SelectedIndexChanged">
            </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T05:16:53.797

如果您想在回发时保持文本框中的文本不变，请在 page_load 中使用以下内容：

```
 if (IsPostBack)
    {
        if (!(String.IsNullOrEmpty(txtPassword.Text.Trim())))
        {
            txtPassword.Attributes["value"] = txtPassword.Text;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:10:02.600

发布作为答案：

我的猜测是下拉更改导致回发。密码不会通过回发保留。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T04:31:42.827

将下拉列表的 autopostback 值更改为 false，将阻止您的 SelectedIndexChanged 事件触发。您可以使用 javascript 或 jQuery 使用隐藏字段来存储密码文本框 onblur 的值。

```
$("#txtPassWord").blur(function()
    $("#hdnPassWord").val($("#txtPassWord").val());
}); 
```

然后在下拉列表的 SelectedIndexChange 事件中，您可以从 hdnPassWord 为 txtPassWord 赋值。

```
txtPassWord.Text = hdnPassWord.Value; 
```

如果您没有在 SelectedIndexChanged 上发回消息，则在服务器端连接事件没有任何意义。所以要清楚，走哪条路。

# ruby-on-rails-3.2 - 在 Rails 3.2 中，如何创建嵌套的“form_for”？

> ID：13794460
> 
> 赞同：0
> 
> 时间：2012-12-10T03:08:04.030
> 
> 标签：ruby-on-rails-3.2

*   表单的基本语法是什么？
*   “accepts_nested_attributes_for”实际上是做什么的？

*   我的控制器中应该有什么？

*   这是我的表格中的最新内容：

-

```
<% f.fields_for :questions do |builder| %><br />
<%= builder.label :content, "Question" %><br />
<%= builder.text_area :content, :rows => 3 %><br />
<%end%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:08:25.883

通过以下“accepts_nested_attributes_for”：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# ajax - f:ajax onevent 不适用于预定义函数，但适用于内联函数

> ID：13794463
> 
> 赞同：1
> 
> 时间：2012-12-10T03:08:31.277
> 
> 标签：ajax, jsf

我有一个`<h:commandButton>`提交表单的`<f:ajax>`。

```
<h:commandButton  value="Create Project" styleClass="greyishBtn submitForm">
    <f:ajax execute="@form" listener="#{projectController.create}" 
        render=":tblProject" />
</h:commandButton> 
```

它可以正常工作，但是当我尝试添加`onevent`以下属性时：

```
<f:ajax execute="@form" listener="#{projectController.create}"
    onevent="createProjectEventHandler" render=":tblProject" /> 
```

使用已包含的此 JavaScript：

```
function createProjectEventHandler(data){
    console.log('sth happened');
} 
```

并单击按钮，然后它只是重新加载页面。我没有看到任何内容已提交回托管 bean，控制台上也没有任何内容。

这是如何引起的，我该如何解决？

* * *

**更新**：它适用于以下方法：

```
<f:ajax execute="@form" listener="#{projectController.create}" 
    onevent="function(data) {console.log('aaa');}" render=":tblProject" /> 
```

为什么呢？根据有关[f:ajax events 的 Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/gkddf.html)，该`onevent`属性应支持 JavaScript 函数名称。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-20T11:54:27.350

我在 Netbeans 中遇到了同样的问题。

当我在 Netbeans 中创建我的 JSF 页面时，它生`xmlns:f="http://xmlns.jcp.org/jsf/core"`成为 XML 命名空间 URI。但这是 JSF 2.2 特有的，而我实际使用的是 JSF 2.0/2.1。

当我将 XML 命名空间 URI 更改为 时`xmlns:f="http://java.sun.com/jsf/core"`，它对我有用。

# java - java中有哪些原始数据类型可用？

> ID：13794464
> 
> 赞同：-2
> 
> 时间：2012-12-10T03:08:30.707
> 
> 标签：java

如果它们不在类中，那么数据类型在哪个包下可用？？？？我们如何使用它们？

如果它们属于 java.lang 包，那么应该有一些类适合它们吗？

如果它们是内置的，那么它们在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:11:56.077

它们内置在以下语言中：

int、long、float、double、char、byte、boolean、short

为了一些安慰，这样的转换，也有类：它们都在 java.lang 包中：
Integer、Long、Float 等。

例子：

```
int a = 3;
a++;

Integer aObj = new Integer(266666); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:16:27.637

在此处阅读规范：http: [//docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)

> Java 编程语言中有两种类型：**原始类型**（第 4.2 节）和**引用类型**（第 4.3 节）。相应地，有两种数据值可以存储在变量中、作为参数传递、由方法返回并对其进行操作：原始值（第 4.2 节）和参考值（第 4.3 节）。

还有第三种类型，也被命名为`null`：

> 还有一种特殊的 null 类型，即表达式 null 的类型（第 3.10.7 节、第 15.8.1 节），它没有名称。

原始类型是特殊数据类型，不属于任何包或类。尽管有相关的包装类型，例如 Integer、Long、Boolean 等，它们都放在`java.lang`包中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:18:52.667

它们不是类，因此它们不存在于任何包中。

这就是Java的设计。

原始类型包括 boolean、byte、char、short、int、long、float 和 double（我想我没有错过任何权利？：P）

它们都在 java.lang 下有一个相应的包装器。例如，字节、字符、整数等。

# batch-file - 为什么我的批处理在传递文件时调用失败？

> ID：13794466
> 
> 赞同：1
> 
> 时间：2012-12-10T03:08:33.910
> 
> 标签：batch-file

我的批处理文件在传递文件（.mkv）时无法实现调用命令，但在没有参数的情况下直接运行时可以工作。下班后的命令包括运行带参数的 vlc。

```
call "C:\Users\****\Desktop\System Tools\Monitors\Primary2.bat"

start "VLC media player.lnk" %1 
```

如果这很重要，请在 Windows 7 上运行。

**更新：**似乎调用函数不想与primary2.bat一起使用，但将使用一个更简单的批处理文件来完成primary2.bat所做的事情之一

用于比较primary2.bat

```
@ECHO off

IF Exist Single.txt (
    IF EXIST Primary1.txt (
        echo Primary Screen Set to Two >> Primary2.txt
        del /q Primary1.txt 
        echo Triple Monitors enabled >> Triple.txt
        del /q Single.txt
        If Exist HDMI.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleHDMI\TripleHDMI Primary2.lnk"
        )
        IF Exist VGA.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleVGA\TripleVGA Primary2.lnk"
        )   
    )
)

IF Exist Dual.txt (
    IF EXIST Primary1.txt (
        echo Primary Screen Set to Two >> Primary2.txt
        del /q Primary1.txt
        echo Triple Monitors enabled >> Triple.txt
        del /q Dual.txt
        If Exist HDMI.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleHDMI\TripleHDMI Primary2.lnk"
        )
        IF Exist VGA.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleVGA\TripleVGA Primary2.lnk"
        )

    )
    IF EXIST Primary3.txt (
        echo Primary Screen Set to Two >> Primary2.txt
        del /q Primary3.txt
        echo Triple Monitors enabled >> Triple.txt
        del /q Dual.txt
        If Exist HDMI.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleHDMI\TripleHDMI Primary2.lnk"
        )
        IF Exist VGA.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleVGA\TripleVGA Primary2.lnk"
        )
    )
)

IF Exist Triple.txt (
    IF EXIST Primary1.txt (
        echo Primary Screen Set to Two >> Primary2.txt
        del /q Primary1.txt
        If Exist HDMI.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleHDMI\TripleHDMI Primary2.lnk"
        )
        IF Exist VGA.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleVGA\TripleVGA Primary2.lnk"
        )
    )
    IF EXIST Primary3.txt (
        echo Primary Screen Set to Two >> Primary2.txt
        del /q Primary3.txt
        If Exist HDMI.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleHDMI\TripleHDMI Primary2.lnk"
        )
        IF Exist VGA.txt (
            "C:\Users\****\Desktop\System Tools\Monitors\TripleVGA\TripleVGA Primary2.lnk"
        )
    )
) 
```

hello.bat 用它来测试，这个有效

```
echo hello
"C:\Users\****\Desktop\System Tools\Monitors\TripleHDMI\TripleHDMI Primary2.lnk"
        )
pause 
```

两者都单独工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:33:45.477

如果您要做的只是将`mkv`文件作为参数传递给您正在调用的批处理文件，那么语法是

```
call "C:\Users\****\Desktop\System Tools\Monitors\Primary2.bat" mkvfile.mkv 
```

然后在调用批处理文件中，`mkv`可以使用`%1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:44:37.773

想通了我的问题。外部批处理文件中有对本地文件的引用，将它们全部更改为完整地址，现在它可以完美运行。

将所有地址的 HDMI.txt 更改为“C:\Users****\Desktop\System Tools\Monitors\HDMI.txt”等等。

由于某种原因，从 cmd 调用的批处理文件不能使用相对地址

# c - c程序，通过字符串递增

> ID：13794474
> 
> 赞同：1
> 
> 时间：2012-12-10T03:10:00.927
> 
> 标签：c, string, increment, c-strings

我发现这个程序可以遍历字符串并打印它们。我知道有一个错误，但我不是 100% 确定它是什么。

```
char *stringOptions[] = {"one", "two", "three"};

void incrementString(char *input) 
{
    static int i = 0;
    input = stringOptions[i % 3];
    i = (i + 1) % 3;
}

void print_string(void) 
{
    char *string = "initial";
    int i;

    for(i = 0; i < 3; ++i) 
    {
        incrementString(string);
        printf("%s ", string);
    }
} 
```

它应该打印出来：一二三

抱歉，我对此不了解更多，它基于我试图做的事情，但我没有成功阅读字符串。必须将其放在像这样的单独功能中。谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T03:15:45.287

```
input = stringOptions[i % 3]; 
```

这没有任何作用。请记住，C 通过值传递所有内容，因此您所做的只是将输入的本地副本设置为新地址。您可能希望将双指针传递给函数，然后设置取消引用的版本：

```
void incrementString(char **input) {

...

*input = stringOptions[i%3]; 
```

然后像这样称呼它：

```
incrementString(&string); 
```

还有 zoidberg 对你的循环所说的话。

```
for(i=0; i < 3; ++i) { 
```

因为 for 循环的第二部分是它应该继续循环的条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T03:11:35.657

```
for(i = 0; i > 3; ++i) {
    incrementString(string);
    printf("%s ", string);
} 
```

该循环将永远不会执行。更改`>`为`<`。

# javascript - 监听其他事件时 onscroll 触发？

> ID：13794476
> 
> 赞同：0
> 
> 时间：2012-12-10T03:10:24.997
> 
> 标签：javascript, ios

在 iOS 上，如果你有一个函数`onscroll`在同一个文档中运行，并且带有事件侦听器，那么该`onscroll`事件将偶尔触发。

### 这是一个示例，尽管您必须为此使用运行 iOS 的设备：http: [//jsfiddle.net/a3D7J/3/](http://jsfiddle.net/a3D7J/3/)

代码如下：

```
document.getElementById("content").onscroll = function() {
    alert("test");
}

$("#content").on('touchmove', function() {

});​ 
```

滚动完成后，预期的行为是`onscroll`触发事件：http: [//developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

有人能想出解决办法吗？我需要检测手指滑动后页面何时停止移动。

# php - php下拉列表项保持选中状态

> ID：13794477
> 
> 赞同：-1
> 
> 时间：2012-12-10T03:10:32.040
> 
> 标签：php, html-select

我的 php 代码中有一个下拉列表。在使用提交按钮提交页面后，我试图让值保持选中状态（表单操作调用另一个 php 脚本，但是下面的代码块与表单位于相同的 php 脚本中）。我试过这个，但它没有做我需要的。任何建议都会有所帮助。

```
//getting value from database
$dropDownVal=$row['player'];
////
echo "<td bgcolor=#7FFF00><select name='DropDown".$row['_id']."' >;
<option value=\"1\"  if ($dropDownVal==1) selected=\"selected\">Select </option>;
<option value=\"2\"  if ($dropDownVal==2) selected=\"selected\">Johnson</option>;
<option value=\"3\"if ($dropDownVal==3) selected=\"selected\">Reed</option>;
<option value=\"4\"if ($dropDownVal==4) selected=\"selected\">Suggs</option>;
<option value=\"5\"if ($dropDownVal==5) selected=\"selected\">Flacco</option>;
<option value=\"6\"if ($dropDownVal==6) selected=\"selected\">Rice</option>;
</select>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:38:06.993

克里斯基本上是正确的。

`POST`如果您以使用变量的形式提交。

然后，如果您随后修改了设置`$dropDownVal`为使用`$_POST`变量的逻辑，您应该得到您想要的：

如果您通过 提交表单`GET`，只需将所有引用更改`$_POST`为`$_GET`。

以下是单个页面中供参考的完整代码：

```
<html>
<head></head>
<?php
if (!empty($_GET['Dropdown'])) {
    $dropDownVal = $_GET['Dropdown'];
} else {
    $dropDownVal = 1;
}
?>
<form method="get" action="testing.php">
    <select name="Dropdown" >;
        <option value="1" <?php if ($dropDownVal==1) echo 'selected="selected"'; ?>>Select </option>;
        <option value="2" <?php if ($dropDownVal==2) echo 'selected="selected"'; ?>>Johnson</option>;
        <option value="3" <?php if ($dropDownVal==3) echo 'selected="selected"'; ?>>Reed</option>;
        <option value="4" <?php if ($dropDownVal==4) echo 'selected="selected"'; ?>>Suggs</option>;
        <option value="5" <?php if ($dropDownVal==5) echo 'selected="selected"'; ?>>Flacco</option>;
        <option value="6" <?php if ($dropDownVal==6) echo 'selected="selected"'; ?>>Rice</option>;
    </select>
    <input type="submit" name="submit" value="Submit Form" />
</form>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:19:37.943

这是一个自提交脚本，即相同的代码呈现表单以供填写并处理提交？在提交方面，您必须阅读适当的 GET 或 POST 参数，因为变量在提交之前不只是挂在它们的值上。相反，提交端是从第一行重新执行的脚本，没有分配任何变量。

# jquery - 使用 jQuery 移动按钮运行 javascript

> ID：13794480
> 
> 赞同：0
> 
> 时间：2012-12-10T03:11:12.117
> 
> 标签：jquery, jquery-mobile

使用引用 jQuery Mobile 的脚本我有以下行：

```
<a href="#" id="buttonAnswer1" data-role="button" data-inline="true" >check</a> 
```

当单击此按钮并调用 hello() 函数时，我将如何添加一个侦听器？IE

```
<a href="#" id="buttonAnswer1" data-role="button" data-inline="true">check</a>

<script>
function hello(){
  console.log("hello world");
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:15:16.410

这与常规的 jQuery 并没有什么不同，即您可以使用[.on](http://api.jquery.com/on/)绑定事件处理程序

例如，将 .on 与事件委托一起使用

```
$(document).on('click', '#buttonAnwser1', hello); 
```

或者直接绑定

```
$('#buttonAnswer1').on('click', hello); 
```

# python - 在调用函数时返回 keyerror

> ID：13794483
> 
> 赞同：1
> 
> 时间：2012-12-10T03:11:34.807
> 
> 标签：python, beautifulsoup

我在测试这个 BeautifulSoup 爬虫时遇到了问题。如果有明显的错误，请原谅我，因为这是我进入 Python 的第三个小时。我在下面有这个代码......

```
def huffpost_crawl():
 article_list = []
 DOMAIN = 'huffingtonpost.com'
 huff_soup = BeautifulSoup(urllib2.urlopen("http://www.huffingtonpost.com").read())
 news_list = huff_soup.find_all("div", {"class", "snp_most_popular_entry"})[0]
 for news in news_list[0]:
    title = news('div', {'class', 'snp_most_popular_entry_desc'})[0].a.get_text()
    full_url = news('div', {'class', 'snp_most_popular_entry_image'}).a["href"]
    blurb = ""
    thumb_url = news('div', {'class', 
   'snp_most_popular_entry_image'}).a.img["longdesc"]

 print title

huffpost_crawl() 
```

当我`pythong test.py`在终端中运行时，我返回...

```
Traceback (most recent call last):
  File "test.py", line 21, in <module>
  huffpost_crawl()
File "test.py", line 11, in huffpost_crawl
  for news in news_list[0]:
File "/usr/local/lib/python2.7/site-packages/bs4/element.py", line 879, in __getitem__
  return self.attrs[key]
KeyError: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:15:52.060

它看起来像`news_list`一个字典（键值对）并且没有`0`. 如果它是您尝试索引的列表，那将有效。因此，而不是你的

`for news in news_list[0]:`

线，试试

`for key, news in news_list.iteritems():`

这将遍历字典中的每个项目。如果您只想要第一个结果，我不确定您将如何确定。尝试打印出项目以确定返回的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:14:07.143

这是问题所在：

```
news_list = huff_soup.find_all("div", {"class", "snp_most_popular_entry"})[0]
for news in news_list[0]: 
```

只需删除这两个`[0]`位中的一个，问题（或者至少是这个问题——我不能保证您的其余代码执行您想要的）就会消失。

我不会解释代码错误的原因，因为您确实需要学习调试代码并自己解决这些问题。

首先在交互式解释器中执行此操作：

```
>>> huff_soup = BeautifulSoup(urllib2.urlopen("http://www.huffingtonpost.com").read())
>>> news_list = huff_soup.find_all("div", {"class", "snp_most_popular_entry"}) 
```

看看它返回了什么——它是什么形状，你如何以交互方式到达你想要的部分？一旦你知道了这一点，在你的脚本中如何做就应该很明显了。

即使在事情太复杂而无法交互使用的情况下，您也可以使用打印语句记录内容，在调试器中运行等。不要只是盲目地盯着不起作用的代码说“为什么它不起作用?”，或者将代码发布到某个地方并询问其他人为什么它不起作用，否则您将永远学不到任何东西。

# objective-c - 带分隔符和可选部分的正则表达式

> ID：13794493
> 
> 赞同：2
> 
> 时间：2012-12-10T03:12:50.117
> 
> 标签：objective-c, regex, optional

说到正则表达式，我似乎有一个心理障碍，所以我希望你能帮助我。

我有一个具有这种格式的字符串

```
.* :: .* :: .* 
```

但有时是这样的：

```
.* :: .* 
```

我想捕捉前两组字符，像这样

```
(.*) :: (.*) :: .* 
```

但我不知道如何修改我的表达式，以便最后一个 :: 和字符是可选的。我试过使用括号 and `?`，但我无法让它按需要工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:14:05.770

这就是你想要的：

```
([^:]*) :: ([^:]*) (:: ([^:]*))? 
```

然后您访问的捕获组是 1、2 和 4（其中 4 可能为空）。

编辑：

`.*?`是非贪婪的 ，`.*`即它匹配尽可能少的通配符。这将阻止第一组匹配前两个模式。

如果您知道该模式不包含，另一种选择是替换`.*`为.`[^:]*``:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:19:04.537

这样的事情呢？

```
(.* ::){2}(?:::)? 
```

匹配后面的两个东西`::`，最后一个可以有一个可选的`::`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:13:26.160

知道了！

```
(.*?) :: (.*?(?= :: |$)) 
```

以下是其工作原理的细分：

-> 这会在第一个 :: 之前隔离第一批字符并将其保存到 $1 组。

```
(.*?) 
```

-> 接下来，这个块做两件事。首先，它使用 .*? 获取第二批字符。在此之后，零宽度正向预测断言 (?= :: |$) 要求字符以另一个 :: 或 $ 结尾，即文本的结尾，但不将它们包含在匹配组中，这意味着只有第二批字符被保存到 $2。

```
(.*?(?= :: |$)) 
```

我在 Objective-C 中对这些字符串进行了成功测试：

*   “ABC :: DEF”
*   "ABC :: DEF :: GHI"
*   "A:B:C :: D:E:F" (this lets single : be in the texts between ::)
*   "A:B:C :: D:E:F :: G:H:I" (this lets single : be in the texts between ::)

# facebook - 来自 CodeCanyon 的 SocialAuth-Facebook+Twitter+Linkedin+Google 登录

> ID：13794496
> 
> 赞同：1
> 
> 时间：2012-12-10T03:13:17.563
> 
> 标签：facebook, twitter, login, social

我在 codecanyon.com 上找到了一个不错的小型社交登录，允许用户使用 facebook、gmail、twitter、yahoo 或链接登录。

我已经有一段时间了，似乎无法得到任何工作。

到目前为止，这个网站对我很有帮助，我希望这里有人已经尝试或正在使​​用它作为登录工具，并且可以帮助我。

我现在处于测试模式。我的实际域名没有托管，也不在线。

我制作了我的 facebook、twitter 和 linkedIn 应用程序，其中我收到了我的 app_id 和秘密。我将所有这些信息放在我的 configs.php 文件中，并且我使用 localhost 作为我的 callback_url 和 redirect_url。

当我尝试使用 twitter 登录时收到以下错误消息：致命错误：C:\wamp\www\login\src\twitter\EpiOAuth.php 中的未捕获异常 'EpiOAuthUnauthorizedException' 在第 432 行 (!) EpiOAuthUnauthorizedException: in C: \wamp\www\login\src\twitter\EpiOAuth.php 在第 432 行

如果我转到我的 EpiOAuth.php 文件，有错误的第 432 行显示：
throw new EpiOAuthUnauthorizedException($message, $response->code)

我知道帮助我展示的内容并不容易，但我更愿意通过电子邮件发送更多信息，如果这能让事情变得轻松的话。

再次，非常感谢任何帮助。

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:24:42.500

我是 android 用户，并使用以下链接将 Facebook、Twitter、Linkedin 集成到我的应用程序中。

该网站说它也支持 .net 和 java 版本。

[http://socialauth.in/](http://socialauth.in/)

# css - 如何在 xul 列表框列上将文本右对齐？

> ID：13794497
> 
> 赞同：2
> 
> 时间：2012-12-10T03:13:21.620
> 
> 标签：css, firefox-addon, xul

在我的 Firefox xul 窗口中，我有一个列表框。我需要第一列右对齐，第二列左对齐。我尝试添加`text-align:right;`到 css，或者直接在 xul 中，`text-align="right"`但都没有任何效果。

我该怎么做呢？有谁知道如何对齐一列`listbox`单元格中的文本？这是我的xul：

```
<vbox>
  <listbox id="listbox1" rows="15">
    <listhead><listheader label="&col1;"/><listheader label="&col2;"/></listhead>
    <listcols><listcol width="75"/><listcol flex="1"/></listcols>
    <listitem><listcell class="column1" label="&row1text;"/>    <listcell label="&row1btext;"/>     </listitem>
    <listitem><listcell class="column1" label="&row2text;"/>    <listcell label="&row2btext;"/>     </listitem>
  </listbox>            
</vbox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:57:58.437

试试这个，我希望这对你有帮助。

```
align="right" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:22:19.107

你的xul有什么特别的吗？

以下css应该可以工作

```
listcell {text-align:right;}
listcell+listcell {text-align:left;} 
```

# mysql - 如何使用带有逗号分隔值的字符串加入？

> ID：13794502
> 
> 赞同：5
> 
> 时间：2012-12-10T03:13:54.460
> 
> 标签：mysql, join, denormalization

我想加入 2 个表，一个表有一个电子邮件字段，另一个表有一个逗号分隔的电子邮件列表。

这是场景：

### 表

```
Team
--------------
- team_id
- email_list (this is a comma separated email address)

Persons
--------------
 - person_id
 - email 
```

我试过这样的事情：

* * *

```
SELECT team.* FROM team INNER JOIN persons ON trim(persons.email) IN (CONCAT('\'',REPLACE(REPLACE(team.email_list,' ',''),',','\',\''),'\'')) 
```

但是 IN 子句中的字符串似乎是这样的 "'email1','email2','email3'"

有什么想法让它发挥作用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T03:17:03.697

MySQL 有一个内置函数可以帮助处理逗号分隔的列表：

```
SELECT  . . .
FROM team t INNER JOIN persons p 
  ON FIND_IN_SET(p.email, t.email_list); 
```

但是您不会对性能感到满意，因为它无法优化以使用索引。

另请参阅我对[在数据库列中存储逗号分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:29:46.943

我已经将它用于 MSSQL，我个人不喜欢它，但对于那个报告或数据任务，它可以解决问题。

```
declare @team table (team_id int,email_list varchar(8000));
declare @persons table (person_id int,email varchar(64));

insert into @team
SELECT 1,'bob@domain.com,jane@domain.com' union all
SELECT 2,'ben@domain.com,jane@domain.com' union all
SELECT 3,'ben@domain.com,james@domain.com' union all
SELECT 4,'bill@domain.com,alice@domain.com,peter@domain.com' UNION ALL
SELECT 3,'alben@domain.com,james@domain.com' 
;

insert into @persons
select 1,'james@domain.com' union all
select 2,'ben@domain.com' union all
select 3,'alice@domain.com';

select 
  Team.team_id,
  Team.email_list,
  Person.person_id, 
  Person.email 'matched_on'
from
  @team Team
  INNER JOIN @persons Person on ','+Team.email_list+',' LIKE '%,'+Person.email+',%'; 
```

**根据大卫发现更新**

# iphone - 如何将 iphone 用户集成到当前系统

> ID：13794508
> 
> 赞同：0
> 
> 时间：2012-12-10T03:14:28.933
> 
> 标签：iphone, authentication, webserver

每个人。

我有一个遗留系统，它通过经典的用户名/密码模式对用户进行身份验证。现在我需要从这个系统向 iPhone App 提供数据。这个应用程序会向我发送设备 ID (UDID)。

我的问题是：如何将现有的用户帐户连接到那些 UDID？有什么策略让用户告诉我“这是我的 UDID，我的帐户是 XXXX”？

这些是我可以想象的情况：

1.  首先用户通过PC在网络上创建帐户，然后他/她转而使用iPhone App。
2.  用户只使用 iPhone 应用程序，从不在网络服务器上创建帐户。

实际上，我不想强​​迫用户在这个系统上创建帐户。但是如果他/她这样做了，我需要通过某种方式来识别他/她。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:04:25.530

您可以使用 OpenUDID 项目来制作您自己的 UDID，之后它非常简单，如果用户有一个帐户，只需使用同步按钮（所以感觉不像登录）并询问他他们的帐户，每次用户启动您在数据库中搜索设备 ID 的应用程序，如果存在，您登录他，如果不创建帐户并给他一些帐户检索选项，您使用的模式很容易出错。

我真的建议你检查 www.parse.com，它会将当前用户会话保存在缓存中，因此它永远不必登录，它会以一种非常优雅和灵活的方式处理跨平台的安装

```
#import <Foundation/Foundation.h>

//
// Usage:

//    #include "OpenUDID.h"
//    NSString* openUDID = [OpenUDID value];
//

#define kOpenUDIDErrorNone          0
#define kOpenUDIDErrorOptedOut      1
#define kOpenUDIDErrorCompromised   2

@interface Countly_OpenUDID : NSObject {
}
+ (NSString*) value;
+ (NSString*) valueWithError:(NSError**)error;
+ (void) setOptOut:(BOOL)optOutValue;

@end

#if __has_feature(objc_arc)
#error This file uses the classic non-ARC retain/release model; hints below... 
    // to selectively compile this file as non-ARC, do as follows:
    // https://img.skitch.com/20120717-g3ag5h9a6ehkgpmpjiuen3qpwp.png
#endif

#import "Countly_OpenUDID.h"
#import <CommonCrypto/CommonDigest.h> // Need to import for CC_MD5 access
#if TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR
#import <UIKit/UIPasteboard.h>
#import <UIKit/UIKit.h>
#else
#import <AppKit/NSPasteboard.h>
#endif

#define OpenUDIDLog(fmt, ...)
//#define OpenUDIDLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);
//#define OpenUDIDLog(fmt, ...) NSLog((@"[Line %d] " fmt), __LINE__, ##__VA_ARGS__);

static NSString * kOpenUDIDSessionCache = nil;
static NSString * const kOpenUDIDKey = @"OpenUDID";
static NSString * const kOpenUDIDSlotKey = @"OpenUDID_slot";
static NSString * const kOpenUDIDAppUIDKey = @"OpenUDID_appUID";
static NSString * const kOpenUDIDTSKey = @"OpenUDID_createdTS";
static NSString * const kOpenUDIDOOTSKey = @"OpenUDID_optOutTS";
static NSString * const kOpenUDIDDomain = @"org.OpenUDID";
static NSString * const kOpenUDIDSlotPBPrefix = @"org.OpenUDID.slot.";
static int const kOpenUDIDRedundancySlots = 100;

@interface Countly_OpenUDID (Private)
+ (void) _setDict:(id)dict forPasteboard:(id)pboard;
+ (NSMutableDictionary*) _getDictFromPasteboard:(id)pboard;
+ (NSString*) _generateFreshOpenUDID;
@end

@implementation Countly_OpenUDID

// Archive a NSDictionary inside a pasteboard of a given type
// Convenience method to support iOS & Mac OS X
//
+ (void) _setDict:(id)dict forPasteboard:(id)pboard {
#if TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR     
    [pboard setData:[NSKeyedArchiver archivedDataWithRootObject:dict] forPasteboardType:kOpenUDIDDomain];
#else
    [pboard setData:[NSKeyedArchiver archivedDataWithRootObject:dict] forType:kOpenUDIDDomain];
#endif
}

// Retrieve an NSDictionary from a pasteboard of a given type
// Convenience method to support iOS & Mac OS X
//
+ (NSMutableDictionary*) _getDictFromPasteboard:(id)pboard {
#if TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR 
    id item = [pboard dataForPasteboardType:kOpenUDIDDomain];
#else
    id item = [pboard dataForType:kOpenUDIDDomain];
#endif  
    if (item) {
        @try{
            item = [NSKeyedUnarchiver unarchiveObjectWithData:item];
        } @catch(NSException* e) {
            OpenUDIDLog(@"Unable to unarchive item %@ on pasteboard!", [pboard name]);
            item = nil;
        }
    }

    // return an instance of a MutableDictionary 
    return [NSMutableDictionary dictionaryWithDictionary:(item == nil || [item isKindOfClass:[NSDictionary class]]) ? item : nil];
}

// Private method to create and return a new OpenUDID
// Theoretically, this function is called once ever per application when calling [OpenUDID value] for the first time.
// After that, the caching/pasteboard/redundancy mechanism inside [OpenUDID value] returns a persistent and cross application OpenUDID
//
+ (NSString*) _generateFreshOpenUDID {

    NSString* _openUDID = nil;

    // August 2011: One day, this may no longer be allowed in iOS. When that is, just comment this line out.
    // March 25th 2012: this day has come, let's remove this "outlawed" call... 
#if TARGET_OS_IPHONE    
//    if([UIDevice instancesRespondToSelector:@selector(uniqueIdentifier)]){
//        _openUDID = [[UIDevice currentDevice] uniqueIdentifier];
//    }
#endif
    // Next we generate a UUID.
    // UUIDs (Universally Unique Identifiers), also known as GUIDs (Globally Unique Identifiers) or IIDs 
    // (Interface Identifiers), are 128-bit values guaranteed to be unique. A UUID is made unique over 
    // both space and time by combining a value unique to the computer on which it was generated—usually the
    // Ethernet hardware address—and a value representing the number of 100-nanosecond intervals since 
    // October 15, 1582 at 00:00:00.
    // We then hash this UUID with md5 to get 32 bytes, and then add 4 extra random bytes
    // Collision is possible of course, but unlikely and suitable for most industry needs (e.g. aggregate tracking)
    //
    if (_openUDID==nil) {
        CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);
        CFStringRef cfstring = CFUUIDCreateString(kCFAllocatorDefault, uuid);
        const char *cStr = CFStringGetCStringPtr(cfstring,CFStringGetFastestEncoding(cfstring));
        unsigned char result[16];
        CC_MD5( cStr, strlen(cStr), result );
        CFRelease(uuid);

        _openUDID = [NSString stringWithFormat:
                @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%08x",
                result[0], result[1], result[2], result[3], 
                result[4], result[5], result[6], result[7],
                result[8], result[9], result[10], result[11],
                result[12], result[13], result[14], result[15],
                     (NSUInteger)(arc4random() % NSUIntegerMax)];  
    }

    // Call to other developers in the Open Source community:
    //
    // feel free to suggest better or alternative "UDID" generation code above.
    // NOTE that the goal is NOT to find a better hash method, but rather, find a decentralized (i.e. not web-based)
    // 160 bits / 20 bytes random string generator with the fewest possible collisions.
    // 

    return _openUDID;
}

// Main public method that returns the OpenUDID
// This method will generate and store the OpenUDID if it doesn't exist, typically the first time it is called
// It will return the null udid (forty zeros) if the user has somehow opted this app out (this is subject to 3rd party implementation)
// Otherwise, it will register the current app and return the OpenUDID
//
+ (NSString*) value {
    return [Countly_OpenUDID valueWithError:nil];
}

+ (NSString*) valueWithError:(NSError **)error {

    if (kOpenUDIDSessionCache!=nil) {
        if (error!=nil)
            *error = [NSError errorWithDomain:kOpenUDIDDomain
                                         code:kOpenUDIDErrorNone
                                     userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"OpenUDID in cache from first call",@"description", nil]];
        return kOpenUDIDSessionCache;
    }

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    // The AppUID will uniquely identify this app within the pastebins
    //
    NSString * appUID = (NSString *) [defaults objectForKey:kOpenUDIDAppUIDKey];
    if(appUID == nil)
    {
      // generate a new uuid and store it in user defaults
      CFUUIDRef uuid = CFUUIDCreate(NULL);
      appUID = (NSString *) CFUUIDCreateString(NULL, uuid);
      CFRelease(uuid);
    }

    NSString* openUDID = nil;
    NSString* myRedundancySlotPBid = nil;
    NSDate* optedOutDate = nil;
    BOOL optedOut = NO;
    BOOL saveLocalDictToDefaults = NO;
    BOOL isCompromised = NO;

    // Do we have a local copy of the OpenUDID dictionary?
    // This local copy contains a copy of the openUDID, myRedundancySlotPBid (and unused in this block, the local bundleid, and the timestamp)
    //
    id localDict = [defaults objectForKey:kOpenUDIDKey];
    if ([localDict isKindOfClass:[NSDictionary class]]) {
        localDict = [NSMutableDictionary dictionaryWithDictionary:localDict]; // we might need to set/overwrite the redundancy slot
        openUDID = [localDict objectForKey:kOpenUDIDKey];
        myRedundancySlotPBid = [localDict objectForKey:kOpenUDIDSlotKey];
        optedOutDate = [localDict objectForKey:kOpenUDIDOOTSKey];
        optedOut = optedOutDate!=nil;
        OpenUDIDLog(@"localDict = %@",localDict);
    }

    // Here we go through a sequence of slots, each of which being a UIPasteboard created by each participating app
    // The idea behind this is to both multiple and redundant representations of OpenUDIDs, as well as serve as placeholder for potential opt-out
    //
    NSString* availableSlotPBid = nil;
    NSMutableDictionary* frequencyDict = [NSMutableDictionary dictionaryWithCapacity:kOpenUDIDRedundancySlots];
    for (int n=0; n<kOpenUDIDRedundancySlots; n++) {
        NSString* slotPBid = [NSString stringWithFormat:@"%@%d",kOpenUDIDSlotPBPrefix,n];
#if TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR
        UIPasteboard* slotPB = [UIPasteboard pasteboardWithName:slotPBid create:NO];
#else
        NSPasteboard* slotPB = [NSPasteboard pasteboardWithName:slotPBid];
#endif
        OpenUDIDLog(@"SlotPB name = %@",slotPBid);
        if (slotPB==nil) {
            // assign availableSlotPBid to be the first one available
            if (availableSlotPBid==nil) availableSlotPBid = slotPBid;
        } else {
            NSDictionary* dict = [Countly_OpenUDID _getDictFromPasteboard:slotPB];
            NSString* oudid = [dict objectForKey:kOpenUDIDKey];
            OpenUDIDLog(@"SlotPB dict = %@",dict);
            if (oudid==nil) {
                // availableSlotPBid could inside a non null slot where no oudid can be found
                if (availableSlotPBid==nil) availableSlotPBid = slotPBid;
            } else {
                // increment the frequency of this oudid key
                int count = [[frequencyDict valueForKey:oudid] intValue];
                [frequencyDict setObject:[NSNumber numberWithInt:++count] forKey:oudid];
            }
            // if we have a match with the app unique id,
            // then let's look if the external UIPasteboard representation marks this app as OptedOut
            NSString* gid = [dict objectForKey:kOpenUDIDAppUIDKey];
            if (gid!=nil && [gid isEqualToString:appUID]) {
                myRedundancySlotPBid = slotPBid;
                // the local dictionary is prime on the opt-out subject, so ignore if already opted-out locally
                if (optedOut) {
                    optedOutDate = [dict objectForKey:kOpenUDIDOOTSKey];
                    optedOut = optedOutDate!=nil;   
                }
            }
        }
    }

    // sort the Frequency dict with highest occurence count of the same OpenUDID (redundancy, failsafe)
    // highest is last in the list
    //
    NSArray* arrayOfUDIDs = [frequencyDict keysSortedByValueUsingSelector:@selector(compare:)];
    NSString* mostReliableOpenUDID = (arrayOfUDIDs!=nil && [arrayOfUDIDs count]>0)? [arrayOfUDIDs lastObject] : nil;
    OpenUDIDLog(@"Freq Dict = %@\nMost reliable %@",frequencyDict,mostReliableOpenUDID);

    // if openUDID was not retrieved from the local preferences, then let's try to get it from the frequency dictionary above
    //
    if (openUDID==nil) {        
        if (mostReliableOpenUDID==nil) {
            // this is the case where this app instance is likely to be the first one to use OpenUDID on this device
            // we create the OpenUDID, legacy or semi-random (i.e. most certainly unique)
            //
            openUDID = [Countly_OpenUDID _generateFreshOpenUDID];
        } else {
            // or we leverage the OpenUDID shared by other apps that have already gone through the process
            // 
            openUDID = mostReliableOpenUDID;
        }
        // then we create a local representation
        //
        if (localDict==nil) { 
            localDict = [NSMutableDictionary dictionaryWithCapacity:4];
            [localDict setObject:openUDID forKey:kOpenUDIDKey];
            [localDict setObject:appUID forKey:kOpenUDIDAppUIDKey];
            [localDict setObject:[NSDate date] forKey:kOpenUDIDTSKey];
            if (optedOut) [localDict setObject:optedOutDate forKey:kOpenUDIDTSKey];
            saveLocalDictToDefaults = YES;
        }
    }
    else {
        // Sanity/tampering check
        //
        if (mostReliableOpenUDID!=nil && ![mostReliableOpenUDID isEqualToString:openUDID])
            isCompromised = YES;
    }

    // Here we store in the available PB slot, if applicable
    //
    OpenUDIDLog(@"Available Slot %@ Existing Slot %@",availableSlotPBid,myRedundancySlotPBid);
    if (availableSlotPBid!=nil && (myRedundancySlotPBid==nil || [availableSlotPBid isEqualToString:myRedundancySlotPBid])) {
#if TARGET_OS_IPHONE || TARGET_IPHONE_SIMULATOR
        UIPasteboard* slotPB = [UIPasteboard pasteboardWithName:availableSlotPBid create:YES];
        [slotPB setPersistent:YES];
#else
        NSPasteboard* slotPB = [NSPasteboard pasteboardWithName:availableSlotPBid];
#endif

        // save slotPBid to the defaults, and remember to save later
        //
        if (localDict) {
            [localDict setObject:availableSlotPBid forKey:kOpenUDIDSlotKey];
            saveLocalDictToDefaults = YES;
        }

        // Save the local dictionary to the corresponding UIPasteboard slot
        //
        if (openUDID && localDict)
            [Countly_OpenUDID _setDict:localDict forPasteboard:slotPB];
    }

    // Save the dictionary locally if applicable
    //
    if (localDict && saveLocalDictToDefaults)
        [defaults setObject:localDict forKey:kOpenUDIDKey];

    // If the UIPasteboard external representation marks this app as opted-out, then to respect privacy, we return the ZERO OpenUDID, a sequence of 40 zeros...
    // This is a *new* case that developers have to deal with. Unlikely, statistically low, but still.
    // To circumvent this and maintain good tracking (conversion ratios, etc.), developers are invited to calculate how many of their users have opted-out from the full set of users.
    // This ratio will let them extrapolate convertion ratios more accurately.
    //
    if (optedOut) {
        if (error!=nil) *error = [NSError errorWithDomain:kOpenUDIDDomain
                                                     code:kOpenUDIDErrorOptedOut
                                                 userInfo:[NSDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"Application with unique id %@ is opted-out from OpenUDID as of %@",appUID,optedOutDate],@"description", nil]];

        kOpenUDIDSessionCache = [[NSString stringWithFormat:@"%040x",0] retain];
        return kOpenUDIDSessionCache;
    }

    // return the well earned openUDID!
    //
    if (error!=nil) {
        if (isCompromised)
            *error = [NSError errorWithDomain:kOpenUDIDDomain
                                         code:kOpenUDIDErrorCompromised
                                     userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"Found a discrepancy between stored OpenUDID (reliable) and redundant copies; one of the apps on the device is most likely corrupting the OpenUDID protocol",@"description", nil]];
        else
            *error = [NSError errorWithDomain:kOpenUDIDDomain
                                         code:kOpenUDIDErrorNone
                                     userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"OpenUDID succesfully retrieved",@"description", nil]];
    }
    kOpenUDIDSessionCache = [openUDID retain];
    return kOpenUDIDSessionCache;
}

+ (void) setOptOut:(BOOL)optOutValue {

    // init call
    [Countly_OpenUDID value];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    // load the dictionary from local cache or create one
    id dict = [defaults objectForKey:kOpenUDIDKey];
    if ([dict isKindOfClass:[NSDictionary class]]) {
        dict = [NSMutableDictionary dictionaryWithDictionary:dict];
    } else {
        dict = [NSMutableDictionary dictionaryWithCapacity:2];
    }

    // set the opt-out date or remove key, according to parameter
    if (optOutValue)
        [dict setObject:[NSDate date] forKey:kOpenUDIDOOTSKey];
    else
        [dict removeObjectForKey:kOpenUDIDOOTSKey];

    // store the dictionary locally
    [defaults setObject:dict forKey:kOpenUDIDKey];

    OpenUDIDLog(@"Local dict after opt-out = %@",dict);

    // reset memory cache 
    kOpenUDIDSessionCache = nil;

}

@end 
```

# video-capture - 石英作曲家录像机

> ID：13794510
> 
> 赞同：1
> 
> 时间：2012-12-10T03:15:16.097
> 
> 标签：video-capture, video-recording, quartz-composer

我想创建一个 Quartz 作曲家，它可以从相机录制 10 秒的视频，然后向前或向后播放该视频或使用效果。任何指针？补丁还是插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:42:58.190

`Video Input`您可以通过将补丁连接到内置补丁来录制视频`Queue`。然后用于`Structure Index Member`访问捕获的视频中的各种帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T00:22:25.660

还有一个名为“Sampler”的插件，你可以在这里下载：http: [//kriss.cx/tom/tag/quartz-composer/](http://kriss.cx/tom/tag/quartz-composer/)

# coq - coq中自然数的欧几里得除法

> ID：13794513
> 
> 赞同：6
> 
> 时间：2012-12-10T03:15:31.263
> 
> 标签：coq

Coq 标准库中是否有对自然数进行欧几里得除法的功能？我一直找不到。如果没有，那么在数学上是否有理由不应该有一个？

我想要这个的原因是因为我试图将一个列表分成两个较小的列表。我希望一个列表的大小大约是另一个列表的一半，所以我正在计算（长度 xs）/2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:00:41.613

这可能是您正在寻找的：

[http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Numbers.Natural.Abstract.NDiv.html](http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Numbers.Natural.Abstract.NDiv.html)

其他欧几里得的东西：

[http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Arith.Euclid.html](http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Arith.Euclid.html)

[http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Numbers.NatInt.NZDiv.html](http://coq.inria.fr/distrib/V8.4/stdlib/Coq.Numbers.NatInt.NZDiv.html)

[http://coq.inria.fr/distrib/V8.4/stdlib/Coq.ZArith.Zdiv.html](http://coq.inria.fr/distrib/V8.4/stdlib/Coq.ZArith.Zdiv.html)

[http://coq.inria.fr/distrib/V8.4/stdlib/Coq.ZArith.Zeuclid.html](http://coq.inria.fr/distrib/V8.4/stdlib/Coq.ZArith.Zeuclid.html)

# asp.net-mvc - Visual Studio 2010 MVC 4 - 无法重用项目名称

> ID：13794515
> 
> 赞同：2
> 
> 时间：2012-12-10T03:15:46.700
> 
> 标签：asp.net-mvc

如果我为项目使用名称然后将其删除，则尝试为将来的项目使用相同的名称会失败，并出现错误“进程无法访问文件 \\packages.config，因为它正被另一个进程使用。”

即使在我删除了所有项目文件并从 Projects 文件夹中删除了项目并删除了项目备份文件（当我搜索项目名称时，我发现 VS 创建了该文件）之后，也会发生这种情况。换句话说，我已经删除了所有对我能找到的项目名称的引用。所以很明显，一定有一个记录在某个地方隐藏得很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:33:28.130

您是否获得了通常与 sln 文件在同一目录中创建的 packages 文件夹？我最近做了这个，那是我错过的那个。

# php - 如何在 MYSQL 表的大字符串中查找字符串？

> ID：13794516
> 
> 赞同：1
> 
> 时间：2012-12-10T03:15:48.310
> 
> 标签：php, mysql, sql

我在 MYSQL 表中有一个列，它接受具有 HTML 标记的 TEXT。现在我想在 HTML img src 属性中找到所有具有 .png/.jpg 的 URL。

例如：

表名：mdl_course_sections；列名：摘要；摘要的数据类型：TEXT

样本记录：

```
Summary
----------    
<table border="0">
<tbody>
<tr>
<td><img style="display: block; margin-left: auto; margin-right: auto;" src="http://xyz.au/abc.png" height="64" width="64" /></a></td>
<td> Learn about video slideshows.</td>
</tr>
<tr>
<td><img src="http://i1325.photobucket.com/albums/u630/teststudplane/plane-2.jpg" height="95" width="100" /></td>
<td> Explore how video can reinvent education.</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:18:30.077

您将很难在 SQL 本身内部执行此操作。不要尝试，你最终会拉出你的头发。

相反，浏览每个条目，使用 HTML 解析器提取`src`每个标签的属性`img`，然后从那里进行处理。

DOMDocument 类的内置[`loadHTML`](http://php.net/domdocument.loadhtml)方法可能会有所帮助，但它可能对格式不佳的 HTML 相当敏感。你也可以尝试类似[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)的东西，它可以让你使用类似 CSS 的选择器，有点像 jQuery 的工作方式。

# prolog - SWI Prolog 查询

> ID：13794523
> 
> 赞同：2
> 
> 时间：2012-12-10T03:16:54.993
> 
> 标签：prolog

```
:- dynamic plop/2
add(Var):-
    retract(plop(Var,X))->
    (X = X+1, assert(plop(Var,X)));
    (assert(plop(Var,1))). 
```

因此，如果我调用 add(y)。它会创建 plop(y,1) 但是当我调用 add(y) 时。再次为什么它不加一个所以它会是 plop(y,2)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T03:21:42.270

因为没有 X 可以满足这种关系：`X = X+1`，并且规则失败。试试`Y is X+1, assert(plop(Var,Y))`那里。

# ember.js - EmberJS 中的值绑定问题？

> ID：13794525
> 
> 赞同：1
> 
> 时间：2012-12-10T03:17:11.397
> 
> 标签：ember.js

我在视图中获取更新值时遇到问题。我认为**valueBinding**不起作用

```
 <script type="text/x-handlebars" >
            {{#view App.Test }}
                <label>Name:</label>
                {{view Ember.TextField  placeholder="username" valueBinding="view.name"}} </br>  </br>
              {{/view}}
      </script>

App.Test = Ember.View.extend({

    name: null,

     submit: function(event) {
       // event.preventDefault();
       console.log(this.get('name'));

    }

}) 
```

当调用提交函数时，**console.log(this.get('name'));** 始终显示 NULL 值，即使在文本文件中键入了值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T03:09:06.823

由于您已经在块助手中，因此您不需要使用 "view.name" 进行绑定，

但是在应用程序由路由器初始化并且视图连接到的情况下，`outlets`您可能需要使用 "view.name" 来请参阅视图内的属性，例如

**Basic App Setup**

```
MyApp = Ember.Application.create();

MyApp.Router = Ember.Router.extend({
  root: Ember.Route.create({
    index: Ember.Route.create({
      route: '/',
      redirectsTo: 'home',
      home: Ember.Route.create({
        route: '/home',
        connectOutlets: function(router){
          router.get('applicationController').connectOutlet('home');
        }
      })
    })
  })
});

MyApp.ApplicationView = Ember.View.extend({
  templateName: 'application'
})

MyApp.HomeView = Ember.View.extend({
  templateName: 'home',
  name: 'TheName'
})

MyApp.HomeController = Ember.Controller.extend({
  name: "Joey"
})

<script type="text/x-handlebars" data-template-name="application">
 {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="home">
  {{view.name}} I am from Home View
  {{name}} I am from the Home Controller
</script> 
```

如您所见，在这种情况下，当您这样做时，`{{name}}`它会在控制器中查找属性，如果您想从视图中使用该属性，则需要使用`{{view.name}}`

[Fiddle](http://jsfiddle.net/GyHYg/1/)

# jquery - HTML4 + 5 jquery ajax历史而不更改URL，hashbang？

> ID：13794527
> 
> 赞同：4
> 
> 时间：2012-12-10T03:17:24.273
> 
> 标签：jquery, html, browser-history, html4

试图让浏览器返回/转发并重新加载 ajax 内容，其中加载内容的操作不典型具有链接（例如 not `<a href='#foo.html'>`，就像您在[http://benalman.com/code/projects/jquery-中看到的那样bbq/examples/fragment-basic/#kielbasa.html](http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/#kielbasa.html)示例）。

一直在查看似乎都是基于 hashchange 实现的各种历史库。例如地址：[http](http://www.asual.com/jquery/address/) ://www.asual.com/jquery/address/ ，或 History.js：[https](https://github.com/browserstate/history.js) ://github.com/browserstate/history.js - 但我不知道如何使这些工作，如果哈希没有改变。

我的内容页面称为“content.html”，它永远不会更改哈希值。关于如何在没有变化的 IE7+ 中实现历史记录/复习的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:16:35.723

不太了解您需要什么，但这个库能否按照您的需要工作：[https ://github.com/devote/HTML5-History-API](https://github.com/devote/HTML5-History-API)

# php - PHP + cURL - 输出比预期的要旧？

> ID：13794528
> 
> 赞同：1
> 
> 时间：2012-12-10T03:17:50.107
> 
> 标签：php, curl

这两天我一直在试图弄清楚为什么这不起作用。基本上我在玩 TradeMe 的 API，他们在这里有一个 .json 文件：

链接1：[http ://api.trademe.co.nz/v1/Listings/Latest.json](http://api.trademe.co.nz/v1/Listings/Latest.json)

而不是耗尽我认为好的 API 速率限制......我将为我的 Web 服务器编写一个脚本，该脚本抓取这个文件并将其返回给我（我当然必须在本地缓存它，但我还没有完全到那里了）。假设我的 fetcher URL 是这样的：

链接 2：http://{MY URL}/trademe/fetcher.php?url=http://api.trademe.co.nz/v1/Listings/Latest.json

问题是...... cURL 为链接 2 返回给我的不是链接 1 返回给我的内容！每次我运行我的脚本（链接 2）时，它总是给我链接 1 的 JSON 文件的旧版本（我知道它是旧版本，因为我查看了 JSON 文件中的 ListingId 数字）。有时我运行链接 2，它给了我一个更新的 JSON，然后当我刷新脚本时，它又给了我旧的 JSON！（请注意，如果我直接在 Chrome 中访问链接 1，它总是会给我最新的 JSON 文件。我的脚本有问题吗？）

这是我的脚本：

```
<?php

set_time_limit(3600);

header("Content-Type: application/json");
header("Expires: on, 01 Jan 1970 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

$ch = curl_init();
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/534.51.22 (KHTML, like Gecko) Version/5.1.1 Safari/534.51.22');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 0);
curl_setopt($ch, CURLOPT_FAILONERROR, false);
curl_setopt($ch, CURLOPT_URL, $_GET['url']);
$contents = curl_exec($ch);
curl_close($ch);

echo $contents;
?> 
```

我基本上是通过 jQuery 的 $.getJSON 调用这个脚本。我什至在我的 index.php 中放入了 no cache headers 并放入了 $.ajaxSetup({ cache: false }); 但没有运气。

有任何想法吗？

（这可能会有所启发，但我还没有找到任何东西：http: [//developer.trademe.co.nz/api-overview/](http://developer.trademe.co.nz/api-overview/)）

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T22:55:27.553

At least my version of Chrome sends max-age cache directive by default, I think this is the difference between the requests. Try to add this before `curl_exec`:

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Cache-Control:max-age=0'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:31:29.607

我与 TradeMe 的一个人交谈过，虽然我认为我们并没有真正弄清楚为什么链接 1 和链接 2 的行为不同，但解决方案是在 URL 上附加一些随机数（甚至时间），例如：

[http://api.trademe.co.nz/v1/Listings/Latest.json&t=RANDOM_NUMBER](http://api.trademe.co.nz/v1/Listings/Latest.json&t=RANDOM_NUMBER)

然后在获取脚本或其他内容中使用它。

# javascript - 绘制到第二个画布会取消第一个画布

> ID：13794529
> 
> 赞同：4
> 
> 时间：2012-12-10T03:17:52.543
> 
> 标签：javascript, html, dom, canvas

我有两个使用 z-index 相互重叠的画布。

但是我遇到了一个奇怪的问题：当我绘制到作为`above`下部画布的画布时，曾经在下部画布上绘制的内容都会被擦除。

我就是这样做的：

CSS：

```
.c {
  position: absolute;
  left: 0;
  top: 0;
  width: 100 % ;
  height: 500px;
  margin: 0 auto;
  border: 1px solid red;
} 
```

JavaScript：

```
window.canvas = new Object();

for (var i = 1; i < 3; i++) {
  document.getElementById("G").innerHTML += '<canvas id="layer' + i + '" class="c" style="z-index:' + i + ';" oncontextmenu="return false;"></canvas>';
  temp = document.getElementById('layer' + i);
  objname = 'canvas' + i;
  canvas[objname] = temp;
  canvas[objname].ctx = temp.getContext("2d");
}

function draw() {
  canvas.canvas1.ctx.clearRect(0, 0, settings.width, settings.height);
  canvas.canvas2.ctx.clearRect(0, 0, settings.width, settings.height);

  abposx = 50;
  abposy = 50;

  //doesn't draw
  canvas.canvas1.ctx.drawImage(gfx['ground'][0], abposx, abposy);

  //draws
  canvas.canvas2.ctx.drawImage(gfx['building'][0], abposx + 120, abposy + 120);
} 
```

在上面的例子中，我只看到`canvas2`画了，如果我把画布一起移除，我就会看到`canvas1`画了。如果我将两个图像都绘制到`the same`画布上，这两个图像也会显示。

但是，如果我画一个到`canvas1`另一个，`canvas2`我只能看到画在上面的东西`canvas2`，并且`canvas1`似乎被擦除了。

为什么会这样？我不知道这是否被其他人复制，但它越来越烦人了！我无法解决问题！非常感谢想法/建议/修复。

JSfiddle 的问题：http: [//jsfiddle.net/xJZrQ/18/](http://jsfiddle.net/xJZrQ/18/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:45:48.713

看这个：

```
document.getElementById("G").innerHTML += '<canvas id="layer'+i+'" class="c" style="z-index:'+i+';" oncontextmenu="return false;"></canvas>'; 
```

它像是：

```
el.innerHTML += '...'; 
```

所以

```
el.innerHTML = el.innerHTML + '...'; 
```

现在你可能明白为什么你的代码不起作用了：当你第二次在循环中做这样的事情时，它会清除`innerHTML`元素`#G`，更新它，然后再次构建 DOM，所以第一个画布的绘制上下文已经死了。

使用 DOM 而不是 innerHTML。演示：http: [//jsfiddle.net/mQuWF/](http://jsfiddle.net/mQuWF/)

# java - 什么是java中的全路径覆盖测试？

> ID：13794531
> 
> 赞同：2
> 
> 时间：2012-12-10T03:18:01.450
> 
> 标签：java, testing, path

```
 public int f(int i) {
    int j = i+1;
      if(i % 2 == 0) {
        j = doit(i);
      }
      if (i % 3 == 0) {
        j = doit(i+1);
      }
    return j;
    } 
```

要实现此方法的全路径覆盖测试，需要多少个不同的参数 i 值？

写下这么多不同的值，这将实现该方法的全路径覆盖测试？

全路径覆盖测试到底是什么？你怎么做呢？（请详细解释，我有一个测试即将到来，我仍然对此感到困惑）TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:21:49.370

**如果您以测试逻辑的所有可能路径的方式测试代码，则称为全路径测试。**

在您的示例中，您有两个备用路径，它们导致以下 4 种组合：

1.  如果仅阻止，则控制首先进入（例如**i = 2**）
2.  **如果仅阻塞（例如i = 3**），则控制进入第二个
3.  控制进入两个 if 块（例如**i = 6**）
4.  控制不会进入两个 if 块（例如**i = 5**）

如果您使用上述 4 个场景测试您的代码，这将是您的代码的全路径测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:22:22.733

完整路径覆盖是指在测试期间执行通过代码的每条可能路径（在不同的迭代中。不必全部都在一个测试期间）。在上面的代码的情况下，它需要四个不同的值`i`来触发：

*   第一个如果，不是第二个
*   第二如果，不是第一
*   两个如果
*   如果

由于这似乎是家庭作业，因此我将发现`i`需要哪些值由您决定。

# python - Beautiful Soup 的 Python 正则表达式

> ID：13794532
> 
> 赞同：5
> 
> 时间：2012-12-10T03:18:14.743
> 
> 标签：python, regex, beautifulsoup

我正在使用 Beautiful Soup 提取特定的 div 标签，似乎我不能使用简单的字符串匹配。

该页面有一些标签形式为

```
<div class="comment form new"...> 
```

我想忽略它，还有一些标签形式为

```
<div class="comment comment-xxxx..."> 
```

其中 x 表示任意长度的整数，省略号表示由空格分隔的任意数量的其他值（我不关心）。我无法弄清楚正确的正则表达式，特别是因为我从未使用过 python 的 re 类。

使用

```
soup.find_all(class_="comment") 
```

查找以单词 comment 开头的所有标签。我试过使用

```
soup.find_all(class_=re.compile(r'(comment)( )(comment)'))
soup.find_all(class_=re.compile(r'comment comment.*')) 
```

以及许多其他变体，但我认为我在这里遗漏了一些关于正则表达式或 match() 如何工作的明显内容。谁能帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T03:50:00.953

我想我明白了：

```
>>> [div['class'] for div in soup.find_all('div')]
[['comment', 'form', 'new'], ['comment', 'comment-xxxx...']] 
```

请注意，与 BS3 中的等价物不同，它不是这样的：

```
['comment form new', 'comment comment-xxxx...'] 
```

这就是为什么您的正则表达式不匹配的原因。

但是你可以匹配，例如，这个：

```
>>> soup.find_all('div', class_=re.compile('comment-'))
[<div class="comment comment-xxxx..."></div>] 
```

请注意，BS 相当于`re.search`, not `re.match`，所以你不需要`'comment-.*'`。当然，如果你想匹配`'comment-12345'`但不是`'comment-of-another-kind`你想要的，例如，`'comment-\d+'`.

# python - 如何在 tornado Web 服务器中运行 Hello world 程序（Ubuntu 11.10，在 Eclipse 中使用 PyDev 插件）

> ID：13794536
> 
> 赞同：0
> 
> 时间：2012-12-10T03:18:47.847
> 
> 标签：python, web-services, tornado

我想在龙卷风中运行一个 Hello World 程序

我正在使用带有 pydev 插件的 Eclipse（Ubuntu 11.10）在他们的网站（http://www.tornadoweb.org/）中在龙卷风网络服务器中运行 Hello world 程序

```
import tornado.ioloop
import tornado.web
class MainHandler(tornado.web.RequestHandler):
  def get(self):
    self.write("Hello, world")
application = tornado.web.Application([
     (r"/", MainHandler),
])
if __name__ == "__main__":
      application.listen(8888)
      tornado.ioloop.IOLoop.instance().start() 
```

但是出现以下错误

```
Traceback (most recent call last):
   File "/home/unais/workspace/Turnado/HelloWorld.py", line 13, in <module>
   application.listen(8888,'0.0.0.0')
      File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/web.py", line 1289, in listen
   server.listen(port, address)
   File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/netutil.py", line 120, in listen
sockets = bind_sockets(port, address=address)
   File "/usr/local/lib/python2.7/dist-packages/tornado-2.4.1-py2.7.egg/tornado/netutil.py", line 286, in bind_sockets
sock.bind(sockaddr)
  File "/usr/lib/python2.7/socket.py", line 224, in meth
   return getattr(self._sock,name)(*args)
  socket.error: [Errno 98] Address already in use 
```

**可能是什么问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:22:34.113

您有另一个程序正在侦听端口 8888。检查僵尸进程或计算机上正在运行的另一个 Web 应用程序。

您也可以通过更改您的龙卷风端口来避免它，使用`application.listen(12345)`，然后`http://127.0.0.1:12345/`在您的浏览器上使用。

# php - 如何编写php代码输入jsonstring并插入sql server

> ID：13794540
> 
> 赞同：0
> 
> 时间：2012-12-10T03:19:18.683
> 
> 标签：php, android, json

我正在尝试从手机中输出一个 Json 字符串并将其上传到我拥有的 sql 服务器。我不知道如何获取输出 Json 并编写 php 代码...我尝试了很多方法但找不到解决方案。

```
public void post(String string) {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "http://www.hopscriber.com/xoxoxox/testphp.php");

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

            nameValuePairs.add(new BasicNameValuePair("myJson", string));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);

            String str = inputStreamToString(response.getEntity().getContent())
                    .toString();
            Log.w("SENCIDE", str);
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), "notwork", Toast.LENGTH_LONG)
                    .show();
        }
    }

    private Object inputStreamToString(InputStream is) {
        // TODO Auto-generated method stub
        String line = "";
        StringBuilder total = new StringBuilder();
        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));
        // Read response until the end
        try {
            while ((line = rd.readLine()) != null) {
                total.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        // Return full string
        return total;
    } 
```

它输出一个 json 字符串为

```
[myJson=[{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"org.siislab.tutorial.permission.READ_FRIENDS","level":"Normal"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"org.siislab.tutorial.permission.WRITE_FRIENDS","level":"Normal"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"org.siislab.tutorial.permission.FRIEND_SERVICE","level":"Normal"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"org.siislab.tutorial.permission.FRIEND_NEAR","level":"Dangerous"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"org.siislab.tutorial.permission.BROADCAST_FRIEND_NEAR","level":"Normal"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"android.permission.RECEIVE_BOOT_COMPLETED","level":"Normal"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"android.permission.READ_CONTACTS","level":"Dangerous"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"android.permission.ACCESS_FINE_LOCATION","level":"Dangerous"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"android.permission.WRITE_EXTERNAL_STORAGE","level":"Dangerous"},{"name":"FriendTracker","user":"amjgp000000000000000","pack":"org.siislab.tutorial.friendtracker","perm":"android.permission.READ_PHONE_STATE","level":"Dangerous"},{"name":"Tesing","user":"amjgp000000000000000","pack":"com.example.tesing","perm":"null","level":"null"},{"name":"Action Bar","user":"amjgp000000000000000","pack":"name.brucephillips.actionbarexample","perm":"null","level":"null"},....... 
```

我试过的我的 PHP

```
include("config.php");
$link = connect_db();

$jsonString=$_POST['myJson'];

$root = json_decode($jsonString, true);

foreach ($root as $item)
{
$user=$item['user'];
$name=$item['name'];
$pack=$item['pack'];
$perm=$item['perm'];
$level=$item['level'];

$sql ="INSERT INTO `Survey_Application_Data`(`User`, `Name`, `package`, `manifest_permission`, `protection_level`) VALUES ('$user','$name','$pack', '$perm','$level')";

$result = mysql_query($sql);

if ($result){

    echo "True";
}
else{
    echo "False";
}

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:02:01.383

看看[这个](https://stackoverflow.com/questions/10804466/how-to-convert-httpentity-into-json)To decode/phrase the JSON response from the PHP server 。您可以简单地将响应转换为字符串

```
HttpEntity entity = response.getEntity();
String responseText = EntityUtils.toString(entity); 
```

然后将其转换为 JSON Object 并用于`getString`将其分配给新的`String`

```
JSONObject jsonResponseText = new JSONObject(responseText);
String name = jsonResponseText.getString("name");//To get the "name"
String user = jsonResponseText.getString("user");//To get the "user"
//etc... 
```

*已编辑* 如果您一次只将一组数据传递给 PHP 服务器，只需在`nameValuePairs`

```
nameValuePairs.add(new BasicNameValuePair("name", "FriendTracker"));
nameValuePairs.add(new BasicNameValuePair("user", "amjgp000000000000000"));
//etc ...
//and execute the httppost 
```

然后在您的 php 代码中，您可以简单地使用：

```
$name= $_POST["name"];
$user = $_POST["user"];
//etc ... 
```

# android - 如何在旧版 Android 中使用 Fragments 和 objectAnimator？

> ID：13794542
> 
> 赞同：5
> 
> 时间：2012-12-10T03:19:28.330
> 
> 标签：android, android-fragments, objectanimator

我尝试使用片段和 objectAnimator 制作像[这里](http://developer.android.com/training/animation/cardflip.html)这样的翻转动画，并且在 Android 4.1 上一切正常，但是当我尝试添加时`android-support-v13\. jar`，使用 FragmentActivity 并在旧版本上启动它，片段之间的动画会导致应用程序崩溃并出现以下错误：

```
java.lang.RuntimeException: Unknown animation name: objectAnimator 
```

拜托，你能告诉我如何使用 objectAnimator 或如何使用常见的 Android 动画创建翻转动画吗？

UPD：我也尝试使用[http://nineoldandroids.com/](http://nineoldandroids.com/)，但我不明白它如何用于活动过渡动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-05T09:09:48.137

[https://developer.android.com/guide/topics/graphics/prop-animation.html#declaring-xml](https://developer.android.com/guide/topics/graphics/prop-animation.html#declaring-xml)

> 从 Android 3.1 开始，您应该将属性动画的 XML 文件保存在 res/animator/ 目录（而不是 res/anim/）中。

# google-maps-api-3 - 在 Google Maps Api 中按距离值查找地址？

> ID：13794543
> 
> 赞同：2
> 
> 时间：2012-12-10T03:19:35.630
> 
> 标签：google-maps-api-3, google-directions-api

我想找到一个既不是用户可配置、也不是静态或事先已知的特定地址。换句话说，我希望我的应用程序能够计算出距离已知位置较远的地址。

有没有办法定义一个地点的地址或纬度/经度，该地点位于距已知位置特定距离的地方（已知地图中的特定地址或纬度/，lmg点）。我的意思是通过使用 Google Maps Api，我可以定义距离已知位置 5 米的地方的地址吗？

为了更清楚，是否有可能获得位于两个已知地址的距离（已知）中间的地址，尤其是通过使用步行（模式）道路？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:53:59.703

我怀疑有什么方法可以实现您正在尝试的目标。谷歌地图在地图上提供的所有位置和地址都是存储在服务器中的。如果存在有关位置的数据，您总是有办法找到它们。因此，您不能指望在地图上找到没有存储在其数据库中的值的位置。虽然谷歌地图的数据库和服务器概念很复杂，但您应该明白系统中不存在的东西无法提供或显示。简而言之，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:22:48.530

Map API 及其关联的数据库不是为您的要求而设计的。您需要创建自己的数据库或在您需要的国家/地区找到一个供应商。例如，英国邮局为[**美国提供**](http://www.zipinfo.com/products/natzip4/natzip4.htm)[**PAF**](http://www.poweredbypaf.com/end-user/products/paf-raw-data/)或[](http://www.zipinfo.com/products/natzip4/natzip4.htm)

# php - 将节点添加到现有 XML 文件

> ID：13794545
> 
> 赞同：1
> 
> 时间：2012-12-10T03:19:37.490
> 
> 标签：php, xml, xml-parsing

这是我当前的 XML 文件 (books.xml)：

```
<?xml version="1.0"?>
<books>
    <book>
        <isbn>123456789098</isbn>
        <title>Harry Potter</title>
        <author>J K. Rowling</author>
        <edition>1</edition>
    </book>
</books> 
```

请注意，在这种情况下，版本是从 1 到 99 的数字，并且 ISBN 的长度为 12 位，这与书籍属性的实际概念相反。

我有一个“添加书”表单，我想通过将新书*附加*到已经存在的 XML 文件来保存从该表单（使用帖子）收集的数据。在 PHP 中，最好的方法是什么？我对如何做到这一点感到困惑，因为我这样做的方式一半一半：要么保存一个空节点，要么什么都不做。

```
/*************************************
*code snippet of results.php
*************************************/
$doc = new DOMDocument();
$doc->load('books.xml');
$nodes = $doc->getElementsByTagName('books');
if($nodes->length > 0)
{
    $b = $doc->createElement( "book" );
    $isbn = $doc->createElement( "isbn" );
    $isbn->appendChild(
    $doc->createTextNode( $book['isbn'] ));
    $b->appendChild( $isbn );

    $title = $doc->createElement( "title" );
    $title->appendChild(
    $doc->createTextNode( $book['title'] ));
    $b->appendChild( $title );

    $author = $doc->createElement( "author" );
    $author->appendChild(
    $doc->createTextNode( $book['author'] ));
    $b->appendChild( $author );

    $edition = $doc->createElement( "edition" );
    $edition->appendChild(
    $doc->createTextNode( $book['edition'] ));
    $b->appendChild( $edition );

    $doc->appendChild( $b );
  }
  $doc->save('books.xml'); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:35:14.260

您需要附加到`documentElement`

```
$doc->documentElement->appendChild( $b ); 
```

您也可以使用文档片段使您的工作更轻松

```
$fragment = $doc->createDocumentFragment();
$fragment->appendXML("    <book>
        <isbn>{$book['isbn']}</isbn>
        <title>{$book['title']}</title>
        <author>{$book['author']}</author>
        <edition>{$book['edition']}</edition>
    </book>
");
$doc->documentElement->appendChild($fragment); 
```

[http://codepad.org/xoK4kLs8](http://codepad.org/xoK4kLs8)

# ruby-on-rails - 为不同的事件运行两个不同的 after_create 语句

> ID：13794549
> 
> 赞同：2
> 
> 时间：2012-12-10T03:20:06.743
> 
> 标签：ruby-on-rails, ruby, if-statement, callback

我有两个不同的 after_create 回调。我只希望在创建的记录中存在字段时运行一个

我知道该怎么做，但我不太明白语法

```
#rental.rb
after_create :delete_booking , :if => ":booking_no = 'NOT NULL'"
after_create :set_requires_allocation

 def delete_booking
  @booking = Booking.where(:booking_no => self.booking_no).first
 @booking.destroy
end

def set_requires_allocation
self.user.requires_allocation = 'false'
end 
```

set_requires_allocation 也将通过在 users 表中将“true”更改为“false”来实际实现我认为的效果吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:24:11.137

> after_create :delete_booking, :if => Proc.new { |rental| Rental.booking_no.present？}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:33:40.110

由于您有两个`after_create`回调，您可以将它们组合成一行：

```
after_create :delete_booking, :set_requires_allocation, :if => Proc.new {|r| r.booking_no.present?} 
```

如果您希望在`set_requires_allocation`回调中也更新关联的用户，那么您可能需要执行以下操作：

```
def set_requires_allocation
   user.update_column(:requires_allocation, false)
end 
```

只是将属性设置为 false，并不会真正保存用户记录。我选择了`update_column`，因为这将阻止触发 User 模型上的任何回调或验证。如果您确实想在 User 上触发回调，请使用`update_attribute`(触发回调，不触发验证检查) 或`update_attributes`，这将为用户保存验证检查和回调。

# asp.net - 将 T-SQL 转换为 LINQ 到 SQL

> ID：13794550
> 
> 赞同：1
> 
> 时间：2012-12-10T03:20:13.143
> 
> 标签：asp.net, sql, linq-to-sql

我有以下查询，我想将其转换为 LINQ to SQL (c#)，但我遇到了困难。

```
select title, barcode, count (*) as pop_rank
from favourites
group by barcode, title
order by pop_rank desc 
```

我做到了

```
DataContext db = new DataContext();

using (db)
{
var test = from t in db.favourites
           group t by new 
           {
              t.barcode,
              t.title
           };
} 
```

我正在努力按功能添加计数和顺序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:23:11.650

尝试：

```
DataContext db = new DataContext();

using (db)
{
 var test = 
          ( 
           from t in db.favourites
           group t by new 
           {
              t.barcode,
              t.title
            } into g 
             select new {g.Key.barcode, g.Key.title, pop_rank=g.Count()}
            ).OrderBy(a => a.pop_rank);
} 
```

# c# - 为什么可以为空 不匹配作为泛型约束的引用类型

> ID：13794554
> 
> 赞同：19
> 
> 时间：2012-12-10T03:20:58.833
> 
> 标签：c#, generics, nullable, reference-type, generic-constraints

> **可能重复：**
> [可空类型作为泛型参数可能吗？](https://stackoverflow.com/questions/209160/nullable-type-as-a-generic-parameter-possible)

我遇到了一个非常奇怪的泛型类型约束。我有这样的课：

```
public SomeClass<T> where T:class
{
} 
```

但是，我发现我不能像预期的那样使用可为空的类型：

```
new SomeClass<int?>(); 
```

我收到一个`int?`必须是引用类型的错误。Nullable 真的只是一个带有语法糖的结构，使它看起来像一个引用类型吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T03:52:49.817

`Nullable<T>`是一个`struct`（参见[MSDN](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)），但它是唯一`struct`不满足`struct`约束的。因此，当使用or约束时，不能将 a`Nullable`用作泛型类型参数。`class``struct`

`Nullable<T>`不仅仅是一个带有一些语法糖的结构。它在 CLR 中为其某些行为提供了特殊支持。例如，它具有特殊的拳击行为。具体来说，一个可为空的对象永远不会被装箱。基础价值被装箱。如果 nullable 是 null 值（HasValue 为 false），则将其转换为 null 引用。此外，任何`Nullable<T>`to的转换运算符`Nullable<U>`都从转换 from `T`to中提升`U`。这些是您无法在 .NET 1.0/1.1 中自己实现的功能。

# haskell - 每次连续执行后如何打印出内存状态？

> ID：13794556
> 
> 赞同：2
> 
> 时间：2012-12-10T03:21:24.573
> 
> 标签：haskell

我有一个关于调试功能的问题。我应该定义下面某些命令的执行，然后我必须创建一个调试函数，该函数在每次执行被调用后递归地打印出当前的内存值。

这是我的 exec（执行）、调试和数据类型的代码

```
data Com = Ass Char Exp 
         | While Exp Com 
         | Seq Com Com
           deriving Show

exec :: Memory -> Com -> Memory
exec m (Ass c e) = update m (c, (eval m e))
exec m (While e c) = if (eval m e) == 0 then m
                     else exec (exec m c) (While e c)
exec m (Seq c1 c2) = exec (exec m c1) c2

debug :: Memory -> Com -> [Memory]
debug m (Ass c e) = update m (c, (eval m e)) : [m]
debug m (Seq c1 c2) = (exec (exec m c1) c2) :[m]
debug m (While e c) = if (eval m e) == 0 then [m]
                      else (exec (exec m c) (While e c)) : [m]

com1 :: Com
com1 =  Seq (Ass 'z' (Num 1))       
        (While (Var 'y') (Seq (Ass 'z' (Mul (Var 'z') (Var 'y')))
                              (Ass 'y' (Add (Var 'y') (Num (-1)))))) 
```

当我在某些内存状态和命令上运行该函数时，它只打印出起始内存和终止内存，例如，如果我运行`debug [('y',4)] com1`我得到的只是`[[('y',0),('z',24)],[('y',4)]]`而我需要它来打印

```
 [('y',4)]
  [('y',4),('z',1)]
  [('y',4),('z',4)]
  [('y',3),('z',4)]
  [('y',3),('z',12)]
  [('y',2),('z',12)]
  [('y',2),('z',24)]
  [('y',1),('z',24)]
  [('y',1),('z',24)]
  [('y',0),('z',24)] 
```

我想问的问题是我需要在调试功能中进行哪些更改才能使其递归打印？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T05:52:11.293

比较你的`exec`和`debug`函数，我们可以看到为什么你`debug`没有打印出所有中间状态：它只是获取返回的状态`exec`并将其附加到原始内存状态`m`。

由于`exec`不保存中间内存状态并且`debug`基本上`exec`已经存在，我建议只重写`debug`以递归调用自身而不是`exec`. 另外，让我们将返回类型更改`debug`为`([Memory], Memory)`- 第一个组件将是所有先前状态的列表，第二个将是最近的结果。（严格来说，由于最近的结果是历史的一部分，所以这不是必需的，但它有助于保持我们的代码更干净，并且更通用——我们可以很容易地更改`debug`以保留除内存历史之外的其他内容，例如作为执行操作的日志。）

无论如何，我们得到这样的东西：

```
debug :: Memory -> Com -> ([Memory], Memory)
debug m (Ass c e)   = ([m'],m')
  where m' = update m (c, eval m e) 
```

我会把剩下的留给你——这并不难。

这还不错。但是，仍然存在一些问题：

*   完成的程序肯定会使用`++`，这有点吓人——我们很容易得到一个程序在日志长度上花费时间的二次方（例如，如果我们的日志是按时间倒序编写的，我们会重复附加早期的州到一长串的末尾）。
*   我们基本上复制了（并且稍微丑化了）原来的`exec`.

上面的程序是函数式编程“模式”的典型示例，称为*线程状态*，我们在函数调用的返回类型中添加了一些信息，以存储有关我们程序历史的信息。您实际上可以将此程序视为线程化两种类型的状态：我们检查和修改的内存和我们只写入但从不读取的日志。

当然，函数式编程都是关于抽象的，有众所周知的方法可以解决上述问题并消除“线程”模式：monads！

您可以使用*Writer monad*来消除日志的显式线程。

奖励：您可以使用*状态单子*并使用它来消除内存状态的显式线程。

您可以使用*差异列表*来消除潜在的昂贵使用`++`.

要了解所有这些主题，我推荐[倒数第二章 Learn You a Haskell](http://learnyouahaskell.com/for-a-few-monads-more)，之后您应该能够使用标准库中定义的 monad。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:23:57.140

Your `debug` function is calling `exec` (which doesn't do any logging). Instead you want it to call `debug` recursively.

This is a good opportunity to learn about the [Writer monad](http://www.haskell.org/haskellwiki/All_About_Monads#The_Writer_monad) which is useful for "computations which produce a stream of data in addition to the computed values."

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T05:54:01.080

这可能有点矫枉过正，但无论如何......

首先，我会把它放在 state monad 中，这样就可以清楚地看到你在做什么。

```
type MemState a = State Memory a
type EvalVal = ... -- result of eval

  -- You'd better define those two right /instead/ of 'eval' and 'update'
eval' :: Exp -> MemState EvalVal
eval' e = state $ \m -> (eval m e, m)
update' :: Char -> EvalVal -> MemState ()
update' c v = state $ \m -> ((), update m (c, v))

exec :: Com -> MemState ()
exec (Ass c e)   = eval' e >>= update' c
exec whileCom@(While e c) = do
        v <- eval'
        when (v /= 0) $ do
           exec c
           exec whileCom
exec (Seq c1 c2) = do
        exec c1
        exec c2 
```

现在，正如 user5402 已经建议的那样，可以通过添加一个来进行调试`Writer`：

```
type DebugState a = WriterT [Memory] MemState a

tellMemory :: DebugState ()
tellMemory = do
     m <- lift . state $ \m' -> (m',m')
     tell [m]

debug :: Com -> DebugState ()
debug com@(Ass _ _) = do
         tellMemory
         lift $ exec com
         tellMemory
debug (Seq c1 c2) = do
         tellMemory
         debug c1
         debug c2
debug com@(While e c) = do
         tellMemory
         v <- lift eval'
         when (v /= 0) $ do
            debug c
            debug com 
```

# css - Firefox、Opera 和 IE 的 CSS 过渡？

> ID：13794557
> 
> 赞同：1
> 
> 时间：2012-12-10T03:21:26.380
> 
> 标签：css, internet-explorer, firefox, opera, css-transitions

我试图让我的悬停过渡在歌剧和火狐中工作。它在 Chrome 中运行良好，但我尚未在 IE 或 Safari 中验证它。我需要更改或添加吗？

```
#redbox a {
    -webkit-transition-property: all;
    -webkit-transition-duration: 0.15s;
    -webkit-transition-timing-function: linear;
    -webkit-transition-delay: initial;
}

#redbox a:hover {background:#6C6C6C;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:39:33.983

您只在 CSS 中包含了 webkit 的前缀，因此它在 Chrome 中运行良好，很可能在 Safari 中也可以，但在其他任何地方都没有。您需要包含 mozilla 供应商前缀才能使其在 Firefox 中运行：

```
#redbox a {
    -webkit-transition-property: all;
    -webkit-transition-duration: 0.15s;
    -webkit-transition-timing-function: linear;
    -webkit-transition-delay: initial;
    -moz-transition-property: all;
    -moz-transition-duration: 0.15s;
    -moz-transition-timing-function: linear;
    -moz-transition-delay: initial;
} 
```

`-o-`用作前缀的歌剧也是如此。至于 IE，不确定它是否支持 css 转换，您需要在[MDN](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions#Browser_compatibility)或[caniuse](http://caniuse.com/#feat=css-transitions)等处检查。

**更新**：正如下面@BoltClock 和@Boris Zbarsky 所指出的，根据您想要定位的浏览器/版本，包含这些供应商特定规则的无前缀标准版本通常是一个好主意。

# python - bdate_range 属性错误

> ID：13794560
> 
> 赞同：2
> 
> 时间：2012-12-10T03:21:45.857
> 
> 标签：python, pandas

以下行给出 AttributeError: `'module' object has no attribute 'bdate_range'`。

我认为这可能与循环引用有关；但是，我不知道在哪里。

```
import pandas as pd

times = pd.bdate_range(start=pd.datetime(2012,11,14,0,0,0),
                       end=pd.datetime(2012,11,17,0,0,0),
                       freq='10T') 
```

这是回溯：

```
AttributeError              Traceback (most recent call last)
<ipython-input-3-1eb62db1246d> in <module>()
       4 
       5 
 ----> 6 times = pd.bdate_range(start=pd.datetime(2012,11,14,0,0,0),end=pd.datetime(2012,11,17,0,0,0),
 freq='10T')
       7 filtered_times = [x for x in times if x.time() >= time(9,30) and x.time() <= time(16,20)]
       8 prices = randn(len(filtered_times))

AttributeError: 'module' object has no attribute 'bdate_range' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:52:31.270

该`bdate_range`功能是[**在 pandas 版本 0.8.0 中引入的**](http://pandas.pydata.org/pandas-docs/version/0.8.0/whatsnew.html?highlight=bdate_range)。*因此，如果您升级到 pandas >= 0.8.0（我建议使用最新的稳定版本），这应该可以正常工作。*

*注意：[pandas 网站允许您按版本号搜索文档（在](http://pandas.pydata.org/)[主页](http://pandas.pydata.org/)右侧选择您的版本的文档）。在 0.7.3 版中[，](http://pandas.pydata.org/pandas-docs/version/0.7.3/search.html?q=bdate_range&check_keywords=yes&area=default)[**没有**`bdate_range`](http://pandas.pydata.org/pandas-docs/version/0.7.3/search.html?q=bdate_range&check_keywords=yes&area=default).*

### 对于最新的功能和错误修复，让您最喜欢的数据分析库保持最新！

# ios - SIGSEGV SEGV_ACCERR 崩溃报告 - 怎么办？

> ID：13794562
> 
> 赞同：17
> 
> 时间：2012-12-10T03:22:00.830
> 
> 标签：ios, error-handling, crash, crash-reports, segmentation-fault

我刚刚在 AppStore 上发布了一个带有[Crittercism](https://www.crittercism.com)崩溃报告的应用程序，并且我收到了很多与 SIGSEGV 错误有关的崩溃报告。Crittercism 给了我一个 StackTrace 和一些关于使用统计的方便细节，等等。然而，我仍然对这些符号化的堆栈跟踪感到困惑。关于这种事情，我一般有几个问题-

1.  Stack Trace 中的许多类和方法甚至都没有在我的应用程序中使用（据我所知），这让我相信这些崩溃是由于 Apple 的私有 API 造成的。看看这个问题底部附近的堆栈跟踪。 **如果崩溃报告中的所有方法和类都没有直接在我的代码中实现，我如何知道是什么导致了我的应用程序崩溃？**

2.  **`+`崩溃线程中每行末尾带有数字的符号代表什么？**

3.  StackOverflow 上大多数关于 SIGSEGV 崩溃的 Q/A 都说它们是由内存泄漏或问题引起的，*但是* **如果我在我的 iOS 项目中使用 ARC，我怎么会因为内存问题而崩溃？**ARC不应该为我管理所有这些事情吗？

4.  **如果我无法复制错误/崩溃，我该怎么办？**

5.  有什么方法可以真正*阅读*StackTrace 吗？一般而言，有什么有助于理解正在发生的事情吗？

这是来自 Crittercism 的主线程崩溃报告中的 StackTrace，该问题与该问题有关：

```
Thread: Unknown Name (Crashed)
0     UIKit                                 0x37307a22 -[UIView(CALayerDelegate) actionForLayer:forKey:] + 138
1     QuartzCore                            0x38fdfff7 -[CALayer actionForKey:] + 75
2     QuartzCore                            0x38fdffa7 _ZL12actionForKeyP7CALayerPN2CA11TransactionEP8NSString + 59
3     QuartzCore                            0x38fdfe93 _ZN2CA5Layer12begin_changeEPNS_11TransactionEjRP11objc_object + 131
4     QuartzCore                            0x38fdab87 _ZN2CA5Layer6setterEj12_CAValueTypePKv + 183
5     QuartzCore                            0x39007057 -[CALayer setBackgroundColor:] + 35
6     UIKit                                 0x3731ef51 -[UIView(Internal) _setBackgroundCGColor:withSystemColorName:] + 1021
7     APP NAME                              0x000a301d 0x00086000 + 118813
8     libdispatch.dylib                     0x3962511f _dispatch_call_block_and_release + 11
9     libdispatch.dylib                     0x39628ecf _dispatch_queue_drain$VARIANT$mp + 143
10   libdispatch.dylib                      0x39628dc1 _dispatch_queue_invoke$VARIANT$mp + 41
11   libdispatch.dylib                      0x3962991d _dispatch_root_queue_drain + 185
12   libdispatch.dylib                      0x39629ac1 _dispatch_worker_thread2 + 85
13   libsystem_c.dylib                      0x3824da11 _pthread_wqthread + 361 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T03:32:05.727

您需要符号化此崩溃报告。第 7 行是您感兴趣的行，但没有符号信息，因此无法将崩溃报告翻译成对您有用的内容。为了表示您需要在您的应用商店版本中使用的确切代码。如果你有，那么你可以参考这个答案：

[https://stackoverflow.com/a/13280585/1155387](https://stackoverflow.com/a/13280585/1155387)

至于其他的：

1) 不要这么快就假设一个内部 API 错误。您的函数显然会更改视图的背景颜色，该视图在内部调用各种方法。它可能以某种方式传递了一个无效值。不要天真地认为您编写的代码是唯一执行过的代码。

2) + 符号表示该代码在二进制对象内的偏移量。对你没用。

3) ARC 很容易出现内存错误，因为 ARC 只处理*Objective-C*的范围。不会管理任何 CoreFoundation 对象等。这不一定是这里发生的事情，但 ARC 并不意味着你必须停止一起思考记忆。

4) 见上文

5) 见上文

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-19T06:52:41.457

我愿意成为你做这样的事情：

```
CALayer *layer = [CALayer layer];
layer.delegate = self; 
```

然后你的对象“self”在最后一个对 CALayer 的引用被删除之前被释放。委托属性不包含对您设置为 layer.delegate 值的对象的引用。这与 ARC 无关（ARC 不会神奇地修复您的应用程序中使用的所有指针）。

因此，首先要做的是查看设置 CALayer 委托的代码，并确保在您的“自我”对象被释放时将此委托引用设置回 nil。这将破坏 CALayer 和您的对象的关联。一般来说，您应该将您的 dsym 上传到 Crittercism，但在这种情况下并不重要。

# javascript - 使用 VBA 将表格从 Web 导入 Excel

> ID：13794563
> 
> 赞同：4
> 
> 时间：2012-12-10T03:22:09.067
> 
> 标签：javascript, excel, vba, web-scraping, dom-events

编写了一些连接到网站的基本 VBA，输入用户名和密码到该网站，登录，然后复制表格并将其粘贴到 Excel 中。现在我意识到我的表格包含带有链接的图形。而不是复制前面提到的表格，我想单独跟踪这些链接并将这些链接到的表格复制到 Excel 中。

但是，Web 表格中的这些图形不包含单独的直接超链接。我查看了网页源代码，它包含 Javascript。（见下文）

```
 <a href="#" onclick="var a=function(){javascript:window.open('','ProcStatus','top=50,left=' +     (screen.width - 750) + ',width=700,height=500,resizable,status,scrollbars');};var b=function()    {if(typeof jsfcljs == 'function'){jsfcljs(document.getElementById('MainPage'),        {'j_id202:319:j_id208':'j_id202:319:j_id208'},'ProcStatus');}return false};return (a()==false) ?     false : b();"><img src="image.gif" alt="View Details" style="border: 0;" title="View Details" /></a> 
```

我可以在源代码中看到这些调用的函数，并记住我对 Javascript 的了解为零，我的 VBA 代码将如何执行/打开这些链接，然后转到表中的第二行，到下一个链接？基本上，我如何填充`onclick`事件所需的变量，然后激活该超链接以打开新网页？

然后该表中的每个后续链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:34:41.827

您可以使用以下命令从 VBA 调用 JavaScript 函数：

```
Call ie.document.parentWindow.execScript("functionName()", "JavaScript") 
```

在您的情况下，它看起来像：

```
Call ie.document.parentWindow.execScript("var a=function(){javascript:window.open('','ProcStatus','top=50,left=' +     (screen.width - 750) + ',width=700,height=500,resizable,status,scrollbars');};var b=function()    {if(typeof jsfcljs == 'function'){jsfcljs(document.getElementById('MainPage'),        {'j_id202:319:j_id208':'j_id202:319:j_id208'},'ProcStatus');}return false};return (a()==false) ?     false : b();", "JavaScript") 
```

或者，您也可以指示您的宏使用 DOM 方法单击链接。您将不得不深入研究源代码以找出元素的确切位置，但通常您的代码将遵循以下几行：

```
ie.document.getElementsByTagName("a")[3].click 
```

其中 3 是“a”元素数组的索引。

您无需了解大量 javascript 即可有效地进行网页抓取，但了解一些基本的 DOM 方法会有所帮助。

*   *document* .getElementsByTagName - 查找具有给定标记名的元素，例如`table`, `a`, `td`, `tr`,`div`等。
*   *document* .getElementsByName - 查找具有给定名称的元素
*   *document* .getElementById -- 查找具有给定 id 的元素
*   *element* .innerText -- 返回元素的文本
*   *element* .innerHTML -- 返回元素的 HTML
*   *element* .click -- 点击一个元素
*   *element* .getAttribute("attribute") -- 返回给定属性的值，例如`href`或`style`

# zend-framework - Zend 模块加载

> ID：13794566
> 
> 赞同：1
> 
> 时间：2012-12-10T03:22:23.347
> 
> 标签：zend-framework

在我们的在线服务器中，没有配置 mod_rewrite 扩展，我们可以通过 .htaccess "RewriteEngine On" 覆盖它吗？

默认模块正在正确加载，但其他模块无法正常工作，仅显示“404 Page Not Found”错误。

我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:00:40.417

如果“未配置”意味着“关闭”，那么答案是否定的，你不能。为了打开它，你必须在 httpd.conf 中明确说明（或者你有什么）。

```
LoadModule rewrite_module libexec/apache22/mod_rewrite.so 
```

# php - 使用用户注释在本地安装 php 文档

> ID：13794573
> 
> 赞同：1
> 
> 时间：2012-12-10T03:22:42.587
> 
> 标签：php, documentation, osx-snow-leopard, mamp, chm

当我无法访问 Internet 时，我经常想查找 php 文档。我已经使用以下说明在本地服务器上安装了 php 文档： [https ://wiki.php.net/doc/articles/localdocsetup](https://wiki.php.net/doc/articles/localdocsetup)

我看到 php 文档有一个包含用户注释的 chm 版本，但我没有找到关于如何使用它们的文档。显然 chm 是一种仅限 Windows 的格式。有 OS X chm 阅读器，但我希望用户贡献的注释出现在每个页面的底部，就像它们在 php.net 上一样。我在带有 MAMP 的 Mac 上使用 Snow Leopard。

有谁知道如何做到这一点？

谢谢， TD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:58:25.703

你试过[Chmox](http://chmox.sourceforge.net/)吗？他们的屏幕截图也显示了 PHP 手册。它似乎适用于我运行 10.7.5 的 2011 年中期 MBP。

# java - JButton 按钮未显示在扩展类的 JPanel 中

> ID：13794577
> 
> 赞同：-1
> 
> 时间：2012-12-10T03:23:20.620
> 
> 标签：java, swing, jpanel, jbutton

作业扩展了我们之前的实验室，在那里我们制作了一个非常基本的计算器。我们应该添加一些按钮 pow、sqrt、pct 和 log。

我扩展了我的 BasicCalculator.java 文件，但没有添加我在新类中添加的按钮，但 setBackground 颜色工作得非常好。那么为什么没有添加以相同方法添加的按钮？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Calculator extends BasicCalculator
{
// Attributes
protected JButton pow, sqr, pct, log;
// Constructors
public Calculator()
{
    super();
}
// Methods
public void createModifiedUserInterface()
{
    try {
        UIManager.setLookAndFeel( UIManager.getCrossPlatformLookAndFeelClassName() );
    } 
    catch (Exception e) {
        e.printStackTrace();
    }

    createUserInterface();
    pow = new JButton("^");
    sqr = new JButton("sqr");
    pct = new JButton("pct");
    log = new JButton("log");

    keyPad.add(pow);
    keyPad.add(sqr);
    keyPad.add(log);
    keyPad.add(pct);

    displayBox.setHorizontalAlignment(displayBox.RIGHT);
    displayBox.setBackground(Color.YELLOW);

    clr.setBackground(Color.RED);
    com.setBackground(Color.GREEN);        
    b0.setBackground(Color.YELLOW);
    b1.setBackground(Color.YELLOW);
    b2.setBackground(Color.YELLOW);
    b3.setBackground(Color.YELLOW);
    b4.setBackground(Color.YELLOW);
    b5.setBackground(Color.YELLOW);
    b6.setBackground(Color.YELLOW);
    b7.setBackground(Color.YELLOW);
    b8.setBackground(Color.YELLOW);
    b9.setBackground(Color.YELLOW);
    bd.setBackground(Color.YELLOW);
    add.setBackground(Color.ORANGE);
    sub.setBackground(Color.ORANGE);
    mul.setBackground(Color.ORANGE);
    div.setBackground(Color.ORANGE);
    mod.setBackground(Color.ORANGE);
    pow.setBackground(Color.ORANGE);
    sqr.setBackground(Color.PINK);
    log.setBackground(Color.PINK);
    pct.setBackground(Color.PINK);

    pow.addActionListener(this);
    sqr.addActionListener(this);
    log.addActionListener(this);
    pct.addActionListener(this);
}

public void actionPerformed(ActionEvent e)
{
    displayBox.setBackground(Color.YELLOW);
    super.actionPerformed(e);
    if (e.getSource() == pow)
    {
        operator = '^';
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setText("");
    }
    if (e.getSource() == sqr)
    {
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setBackground(Color.GREEN);
        displayBox.setText(new Double(Math.sqrt(operand1)).toString());
    }
    if (e.getSource() == log)
    {
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setBackground(Color.GREEN);
        displayBox.setText(new Double(Math.log(operand1)).toString());
    }
    if (e.getSource() == pct)
    {
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setBackground(Color.GREEN);            
        displayBox.setText(new Double(operand1 * 100).toString());
    }
}

public void calculate()
{
    displayBox.setBackground(Color.GREEN);
    super. calculate();

    if (operator == '^')
    {
        displayBox.setText(new Double(Math.pow(operand1, operand2)).toString());
    }
}

public static void main(String[] args) 
{
    Calculator mine = new Calculator();
    mine.createModifiedUserInterface(); 
}

} 
```

这是“BasicCalculator.java”文件中的代码，尽管它非常笨重。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class BasicCalculator implements ActionListener
{
//attributes
protected double operand1, operand2;
protected char operator;
protected JFrame calWin;
protected JTextField displayBox;
protected JPanel keyPad;
protected JButton b0, b1, b2, b3, b4, b5, b6, b7, b8, b9, dot;
protected JButton add, sub, mul, div, mod, com, clr;

//constructors
public BasicCalculator() 
{
    clean();
}

//methods
public void clean()
{
    operand1 = 0;
    operand2 = 0;
    operator = ' ';

}

public void createUserInterface()
{
    calWin = new JFrame("Calculator");
    displayBox = new JTextField(20);
    keyPad = new JPanel();
    b0 = new JButton("0");
    b1 = new JButton("1");
    b2 = new JButton("2");
    b3 = new JButton("3");
    b4 = new JButton("4");
    b5 = new JButton("5");
    b6 = new JButton("6");
    b7 = new JButton("7");
    b8 = new JButton("8");
    b9 = new JButton("9");
    dot = new JButton(".");
    add = new JButton("+");
    sub = new JButton("-");
    mul = new JButton("*");
    div = new JButton("/");
    mod = new JButton("%");
    com = new JButton("=");
    clr = new JButton("C");

    keyPad.add(displayBox);
    keyPad.add(b0);
    keyPad.add(b1);
    keyPad.add(b2);
    keyPad.add(b3);
    keyPad.add(b4);
    keyPad.add(b5);
    keyPad.add(b6);
    keyPad.add(b7);
    keyPad.add(b8);
    keyPad.add(b9);
    keyPad.add(dot);
    keyPad.add(add);
    keyPad.add(sub);
    keyPad.add(mul);
    keyPad.add(div);
    keyPad.add(mod);
    keyPad.add(com);
    keyPad.add(clr);
    calWin.getContentPane().add(keyPad);
    calWin.setSize(300, 300);
    calWin.setVisible(true);
    calWin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    b0.addActionListener(this);
    b1.addActionListener(this);
    b2.addActionListener(this);
    b3.addActionListener(this);
    b4.addActionListener(this);
    b5.addActionListener(this);
    b6.addActionListener(this);
    b7.addActionListener(this);
    b8.addActionListener(this);
    b9.addActionListener(this);
    dot.addActionListener(this);
    add.addActionListener(this);
    sub.addActionListener(this);
    mul.addActionListener(this);
    div.addActionListener(this);
    mod.addActionListener(this);
    com.addActionListener(this);
    clr.addActionListener(this);

}

public void actionPerformed(ActionEvent e)
{
    if(e.getSource() == b0)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "0");
    }
    if(e.getSource() == b1)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "1");
    }
    if(e.getSource() == b2)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "2");
    }
    if(e.getSource() == b3)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "3");
    }
    if(e.getSource() == b4)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "4");
    }
    if(e.getSource() == b5)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "5");
    }
    if(e.getSource() == b6)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "6");
    }
    if(e.getSource() == b7)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "7");
    }
    if(e.getSource() == b8)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "8");
    }
    if(e.getSource() == b9)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + "9");
    }
    if(e.getSource() == dot)
    {
        if(displayBox.getText().contains("+") && operator == '+' || 
           displayBox.getText().contains("-") && operator == '-' || 
           displayBox.getText().contains("/") && operator == '/' || 
           displayBox.getText().contains("*") && operator == '*' || 
           displayBox.getText().contains("%") && operator == '%')
        {
            displayBox.setText("");
        }
        displayBox.setText(displayBox.getText() + ".");
    }
    if(e.getSource() == add)
    {
        operator = '+';
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setText("+ ");
    }
            if(e.getSource() == sub)
    {
        if(displayBox.getText().trim().equals("") || 
           operator == '+' ||
           operator == '-' ||
           operator == '/' ||
           operator == '*' ||
           operator == '%')
        {
            displayBox.setText("-");
        }
        else
        {
            operator = '-';
            operand1 = new Double(displayBox.getText()).doubleValue();
            displayBox.setText("- ");
        }
    }
    if(e.getSource() == div)
    {
        operator = '/';
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setText("/ ");
    }
    if(e.getSource() == mul)
    {
        operator = '*';
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setText("* ");
    }
    if(e.getSource() == mod)
    {
        operator = '%';
        operand1 = new Double(displayBox.getText()).doubleValue();
        displayBox.setText("% ");
    }
    if(e.getSource() == clr)
    {
        displayBox.setText("");
        clean();
    }
    if(e.getSource() == com)
    {
        operand2 = new Double(displayBox.getText()).doubleValue();
        calculate();
    }
}

public void calculate()
{
    switch(operator)
    {
        case '+': displayBox.setText(new Double(operand1 + operand2).toString()); break;
        case '-': displayBox.setText(new Double(operand1 - operand2).toString()); break;    
        case '*': displayBox.setText(new Double(operand1 * operand2).toString()); break;  
        case '/': displayBox.setText(new Double(operand1 / operand2).toString()); break;   
        case '%': displayBox.setText(new Double(operand1 % operand2).toString()); break;    
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:44:36.117

使用更能满足您需求的布局管理器，例如`GridLayout`...

![在此处输入图像描述](../Images/798d7c098837075a48ffd9639e98cbbe.png)

在您的`BasicCalculator`班级中，将 更改`keyPad`为使用 a`GridLayout`并打包窗口。

```
keyPad = new JPanel(new GridLayout(0, 3));
//...
calWin.getContentPane().add(keyPad); 
```

# php - 如何从 php 获取 JSON 数据并在 android 中显示到 textview 中？

> ID：13794578
> 
> 赞同：1
> 
> 时间：2012-12-10T03:23:20.680
> 
> 标签：php, android, mysql, database, json

我正在制作一个 android 程序，它将基于来自 php 网页的 JSON 在 textviews 上显示数据。

这是我的 JSON 示例，它已经显示在 php 页面上：

```
[{"ID":"1","temperature":"33","max_humidity":"33","min_humidity":"34","lowtide":"35","hightide":"35","sunrise":"500","sunset":"530","moonrise":"530","moonset":"540","illumination":"45%"}] 
```

我想让我的文本视图之一显示“温度：33”等。

我尝试使用 httpclient 和字符串缓冲区在我的 android 程序中获取我的网页的源代码，然后只解析 JSON 文本然后传递给一个变量，但这对我不起作用。我需要该网页，因为我的数据库在那里（这是我的 JSON 的来源）

有什么非常简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:37:16.650

好的，这就是你需要的。不需要第三方库。

```
try{
    String jsonStr = getFromWeb(); // jsonStr = {"ID":"1","temperature":"33","max_humidity":"33","min_humidity":"34","lowtide":"35","hightide":"35","sunrise":"500","sunset":"530","moonrise":"530","moonset":"540","illumination":"45%"}]
        JSONObject obj = new JSONObject(jsonStr);
        String temperature = obj.getString("temperature");
        TextView tv = (TextView)findViewById(R.id.yourtextviewid);
        tv.setText("Temperature: " + temperature);
    }catch (JSONException e) {
      e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:31:10.810

Gson 是一个很棒的 json 解析库：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# windows - 批处理文件中的变量初始化延迟

> ID：13794581
> 
> 赞同：1
> 
> 时间：2012-12-10T03:24:04.443
> 
> 标签：windows, batch-file

我有这个代码：

```
if "%2"=="32" (
set bit=This is 32bit
)
if "%2"=="64" (
set bit=This is 64bit
)
echo %bit%
) 
```

当我尝试使用`sample.bat /s 64`输出时是“这是 64 位”，但是当我尝试使用`sample.bat /s 32`输出时仍然是“这是 64 位”。然后我将其切换回 sample.bat 64 输出变为“这是 32 位”。我认为变量初始化被延迟了。有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:35:10.733

如果您运行`sample.bat 64`，`64`则在`%1`，不在`%2`。传递给批处理文件的第一个参数始终是`%1`- 批处理文件本身的名称在`%0`. 你会得到一些随机输出残余或另一次尝试留下的东西。尝试这个：

```
setlocal
if "%1"=="32" (
set bit=This is 32bit
)
if "%1"=="64" (
set bit=This is 64bit
)
echo %bit%
)
endlocal 
```

`setlocal`确保在您的批处理文件结束时丢弃任何环境更改，因此您不必担心从测试中获得剩余。

如果您只键入 ，这仍然无法正常工作`sample.bat`，因为您根本没有处理任何传递的参数。

# python - 如何使用马尔可夫链随机改变转移矩阵？

> ID：13794585
> 
> 赞同：0
> 
> 时间：2012-12-10T03:24:21.673
> 
> 标签：python, matrix, transition, markov

我正在使用第一步转换矩阵来生成 DNA 序列。现在我需要给转换矩阵一个概率，使其每 1000 步改变一次。假设每 1000 步，转换矩阵有 40% 的概率发生变化。更改后每一行都应加 1。现在不知道如何在python中访问嵌套字典数据中的值，以及如何实现40%概率变化。我在这里附上了我的代码，任何建议都值得赞赏~

```
#!/usr/bin/env python

import sys, random

length = 10000

tran_matrix = {'a': {'a':0.495,'c':0.113,'g':0.129,'t':0.263},
               'c': {'a':0.129,'c':0.063,'g':0.413,'t':0.395},
               't': {'a':0.213,'c':0.495,'g':0.263,'t':0.029},
               'g': {'a':0.263,'c':0.129,'g':0.295,'t':0.313}}

initial_p = {'a':0.25,'c':0.25,'t':0.25,'g':0.25}             

def choose(dist):
    r = random.random()
    sum = 0.0
    keys = dist.keys()
    for k in keys:
        sum += dist[k]
        if sum > r:
        return k
    return keys[-1]
c = choose(initial_p)
for i in range(length):
    sys.stdout.write(c) 
    c = choose(tran_matrix[c]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:36:26.777

编辑：添加了一些生成新转换频率的代码的快速实现。您可能不得不四处寻找最适合您的情况的随机数生成器，并查看是否可以使用对随机概率的一些约束来获得更明智的生成。

```
import sys, random

LENGTH = 10000
CHANGE_EVERY = 1000
CHANGE_PROB = 0.4

tran_matrix = {'a': {'a':0.495,'c':0.113,'g':0.129,'t':0.263},
               'c': {'a':0.129,'c':0.063,'g':0.413,'t':0.395},
               't': {'a':0.213,'c':0.495,'g':0.263,'t':0.029},
               'g': {'a':0.263,'c':0.129,'g':0.295,'t':0.313}}

initial_p = {'a':0.25,'c':0.25,'t':0.25,'g':0.25}             

def choose(dist):
    r = random.random()
    sum = 0.0
    keys = dist.keys()
    for k in keys:
        sum += dist[k]
        if sum > r:
            return k
    return keys[-1]

def new_probs(precision=2):
    """
    Generate a dictionary of random transition frequencies, of the form
    {'a':0.495,'c':0.113,'g':0.129,'t':0.263}
    """
    probs = []
    total_prob = 0
    # Choose a random probability p1 from a uniform distribution in
    # the range (0, 1), then choose p2 in the range (0, 1 - p1), etc.
    for i in range(3):
        up_to = 1 - total_prob
        p = round(random.uniform(0, up_to), precision)
        probs.append(p)
        total_prob += p
    # Final probability is 1 - (sum of first 3 probabilities)
    probs.append(1 - total_prob)
    # Assign randomly to bases
    # If you don't shuffle the order of the bases each time, 't'
    # would end up with consistently lower probabilities
    bases = ['a', 'c', 'g', 't']
    random.shuffle(bases)
    new_prob_dict = {}
    for base, prob in zip(bases, probs):
        new_prob_dict[base] = prob
    return new_prob_dict

c = choose(initial_p)
for i in range(LENGTH):
    if i % CHANGE_EVERY == 0:
        dice_roll = random.random()
        if dice_roll < CHANGE_PROB:
            for base in tran_matrix:
                # Generate a new probability dictionary for each
                # base in the transition matrix
                tran_matrix[base] = new_probs()
    sys.stdout.write(c) 
    c = choose(tran_matrix[c]) 
```

# java - 使用递归查找句子中最长的单词（Java）

> ID：13794593
> 
> 赞同：0
> 
> 时间：2012-12-10T03:25:39.810
> 
> 标签：java, recursion

对于作业，我应该使用递归找到句子中最长的单词。我写了一个方法，它取句子的前两个词，比较它们，然后取两者中较长的一个，并将其与句子其余部分的下一个词进行比较。我的逻辑检查出来了，但该方法无法正常工作。我认为有一种侥幸会占用空间，这就是它不起作用的原因。

```
public static String longestWord(String sentence)
{
    if (sentence.indexOf(' ') == -1) {      // IF sentence only has one word
        return sentence;
    }

    String word1 =(sentence.indexOf(" ") != -1)? sentence.substring(0, sentence.indexOf(" ")):
                                                    sentence.substring(0);
    String temp = sentence.substring(sentence.indexOf(" ")+1);

    String word2 = null;
    String rest = null;
    if (sentence.indexOf(" ") != -1)    {
     word2 = (temp.indexOf(" ") != -1)? temp.substring(0, temp.indexOf(" ")+1):
                                            temp.substring(0);
     rest = temp.substring(temp.indexOf(" ")+1);
    }

    if (word1.length() > word2.length()) {
        return longestWord(word1 + rest);

    }

    if (word2.length() > word1.length())  {
        return longestWord(word2 + rest);

    }

    return sentence;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:33:14.943

有一种简单的递归方法：将字符串拆分为单词，然后递归调用此方法，如下所示：

```
string longest(string sentence) {
    return longestRecursive(sentence.Split(' '), 0, "");
}

string longestRecursive(string[] words, int index, string longestSoFar) {
    // This should be very easy to implement:
    // If index == words.Length, longestSoFar is your answer
    // Check words[0] against longestSoFar, and make a recursive invocation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:34:55.170

您在这里遇到了几个问题，但我认为吸引您的是您设置`rest`为在开头没有空格，但随后您将一个单词连接到它的开头。所以“一只快速的棕色狐狸”->“快速棕色的狐狸”。

但是，除此之外，如果这两个词的长度相同，那么您将返回整个句子 - 相反，您应该将最后一个`if`语句作为`else`语句并删除最后一个`return`语句。

**编辑**：虽然你可能不想扔掉你所拥有的东西，但如果你反转焦点，你可能会发现递归解决方案更简单：不要每次都取前两个单词，而是只取第一个单词并将其与余数中最长的词：

```
longestWord(String sentence) {
    if (sentence.indexOf(' ') == -1) {      // IF sentence only has one word
        return sentence;
    }
    String firstWord = getFirstWord(sentence);//how you're doing it now
    String rest = getRest(sentence);//Just the sentence without the first word (and first space...)
    String secondWord = longestWord(rest);
    return firstWord.length >= secondWord.length ? firstWord : secondWord;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:35:50.263

如果句子是字符串。

使用 String.Split(" "); 拆分句子

将结果存储在字符串数组中。

使用 .length 使用递归查找最长的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T03:48:32.990

我会这样做

```
public static String longestWord(String sentence) {
        return longestWord(sentence, "");
    }

    private static String longestWord(String sentence, String longestWord) {
        int i = sentence.indexOf(' ');
        if (i == -1) {
            return sentence.length() > longestWord.length() ? sentence : longestWord;
        }
        longestWord = i > longestWord.length() ? sentence.substring(0, i) : longestWord;
        sentence = sentence.substring(i + 1);
        return longestWord(sentence, longestWord);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T04:43:55.923

Java 不做尾调用优化，所以这很容易破坏堆栈。但是您要求递归（并且在具有 TCO 的语言中，它是堆栈中立的）。请注意，它只构造一个字符串。

```
public static String longestWord(String sentence) {
    return longestWordHelper(sentence, 0, 0, 0, 0);
}

String longestWordHelper(String sentence,
                         int best_len, int best_end,
                         int cur_len, int cur) {
  if (cur == sentence.length()) 
    if (cur_len > best_len)
      return sentence.substring(cur_end - cur_len, cur_len);
    else
      return sentence.substring(best_end - best_len, best_len);
  if (isSpace(sentence.charAt(cur)))
    if (cur_len > best_len)
      return longestWordHelper(sentence, cur_len, cur, 0, cur + 1);
    else
      return longestWordHelper(sentence, best_len, best_end, 0, cur + 1);
  else
    return longestWordHelper(sentence, best_len, best_end, cur_len + 1, cur + 1);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-01T05:01:19.450

```
package MujeebWorkspace.sampleprograms;

class javaMujeeb{       
static String actualstring= "Today is a very good day";
static String[] splitstring = actualstring.split(" ");

public static void main(String [] args){
    LongWord();
    ShortWord();    }

public static void LongWord() {     
    String longword = "";
    for (int i=0; i<=splitstring.length-1; i++){    
    if (longword.length()<splitstring[i].length())
        longword = splitstring[i];  }
    System.out.println(longword);   }

    public static void ShortWord(){
        String shortword = "  ";
        for (int i=0; i<=splitstring.length-1; i++){        
        if (splitstring[i].length()<shortword.length())
            shortword = splitstring[i];         }       
        System.out.println(shortword);      } 
```

}

# mongodb - MongoDB 结构：单个集合与多个较小的集合

> ID：13794595
> 
> 赞同：30
> 
> 时间：2012-12-10T03:25:52.620
> 
> 标签：mongodb, database-design

我有一个一般的数据库结构问题。在我的场景中，我碰巧正在使用 mongodb。

我正在创建一个应用程序，用户可以在其中上传歌曲列表（标题、艺术家等），但我不确定我是否应该为所有用户提供一个 songList 集合，或者为每个单独的用户提供一个单独的 songList.user# 集合。用户只能查询与他们关联的歌曲，因此用户 A 永远不会知道用户 B 的歌曲。

**代码示例：**

***每个用户多个集合***

```
db.songList.userA.find()
{"title": "Some song of user A", "artist": "Some artist of user A"}

db.songList.userB.find()
{"title": "Some song of user B", "artist": "Some artist of user B"} 
```

*   优点
    *   要查询的更小的集合大小
*   缺点
    *   可维护性
        *   1,000 个用户意味着 1,000 个集合

***与拥有“用户”字段的单个集合***

```
db.songList.find({"user":"A"})
{"title": "Some song of user A", "artist": "Some artist of user A", "user": "A"} 
```

*   优点
    *   如果需要，可以灵活地跨用户查询
*   缺点
    *   表现

我正在尝试建立一个赞成/反对名单，但仍然在围栏上。鉴于每个用户的歌曲将彼此隔离，哪种方法更好？我主要关心的是维护和查询性能。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T07:18:52.977

我建议`NOT`为每个用户单独收集。

阅读[文档](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)

> 默认情况下，MongoDB 限制每个数据库大约 24,000 个命名空间。每个命名空间为 628 字节，.ns 文件默认为 16MB。
> 
> 每个集合都算作一个命名空间，每个索引也是如此。因此，如果每个集合都有一个索引，我们最多可以创建 12,000 个集合。--nssize 参数允许您增加此限制（见下文）。
> 
> 请注意，每个集合都有一定的最小开销——几 KB。此外，任何索引都需要至少 8KB 的数据空间，因为 b-tree 页面大小为 8KB。如果有很多集合并且元数据被分页，某些操作可能会变慢。

因此，如果您的用户超出命名空间限制，您将无法优雅地处理它。此外，随着用户群的增长，它的性能也不会很高。

**更新**

正如@Henry Liu 在评论中提到的那样。对于使用 WiredTiger 存储引擎的 Mongodb 3.0 或更高版本，不再是限制。

[docs.mongodb.org/manual/reference/limits/#namespaces](http://docs.mongodb.org/manual/reference/limits/#namespaces)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T08:24:04.987

MongoDB 擅长水平扩展。它可以跨动态集群对集合进行分片，以生成快速、可查询的数据集合。

所以拥有较小的集合大小并不是真正的专业人士，我不确定这个理论来自哪里，它不在 SQL 中，也不在 MongoDB 中。分片的性能，如果做得好，应该与查询单个小数据集合的性能相关（开销很小）。如果不是，那么您的分片设置错误。

正如@Sushant 所引用的那样，MongoDB 不擅长垂直扩展，MongoDB 的 ns 大小在这里将是一个严重的限制。引用没有提到的一件事是索引大小和计数也会影响 ns 大小，因此它描述了这一点：

> 因此，如果每个集合都有一个索引，我们最多可以创建 12,000 个集合。--nssize 参数允许您增加此限制（见下文）。

# c++ - 将 shared_ptr 传递给 OpenGL？

> ID：13794597
> 
> 赞同：5
> 
> 时间：2012-12-10T03:26:33.990
> 
> 标签：c++, c++11

如果我有通常会像这样运行的代码：

```
char* log = new char[logLength];
glGetProgramInfoLog(..., ..., log) 
//Print Log
delete [] log; 
```

如何使用 C++11 智能指针获得相同的结果？谁知道在我有机会删除那段记忆之前会发生什么。

所以我想我需要向下转换为 C 风格的指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:16:46.613

如果您的代码在您的代码段中看起来确实如此，`shared_ptr`那么对于这种情况来说有点过头了，因为看起来您不需要分配内存的共享所有权。[`unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)对数组有部分专业化，非常适合此类用例。`delete[]`当它超出范围时，它将调用托管指针。

```
{
  std::unique_ptr<char[]> log( new char[logLength] );
  glGetProgramInfoLog(..., ..., log.get());
  //Print Log
} // allocated memory is released since log went out of scope 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T03:29:49.137

`std::shared_ptr`有一个方法[`get`](http://en.cppreference.com/w/cpp/memory/shared_ptr/get)，您可以使用它来获取指向变量的 C 样式指针。如果该指针指向 a `std::string`，则需要进一步调用该`c_str()`函数以获取指向 C 样式字符串的指针。

编辑：我注意到该函数正在写入字符串而不是读取。您需要先调整 std::string 的大小，即使在那之后，[c_str 返回的指针也不是用于写入的](http://www.cplusplus.com/reference/string/string/c_str/)。std::shared_ptr 应该可以工作。

# c++ - 在 C++ 代码中对嵌入式 Mono 脚本进行单元测试

> ID：13794599
> 
> 赞同：2
> 
> 时间：2012-12-10T03:27:03.900
> 
> 标签：c++, unit-testing, mono

我已经在我的 C++ 应用程序（C# 作为脚本语言）中嵌入了 Mono，到目前为止一切都很好，但是现在我需要使用 NUnit 对 C# 代码进行单元测试，并且完全不知道如何开始。这是伪代码中的问题：

C++ 代码：

```
#include <SomeCppOnlyLib.h>

int main() {
    SomeMUSTBEInitializations();
    EmbeddAndInvokeMonoScriptDLL();
}

extern "C"
{
    __declspec(dllexport) int GetMagicNumber() {
        return SomeCppOnlyLib::GetMagicNumber();
    }
} 
```

C# 代码（MonoScript.DLL）：

```
using System;
using System.Runtime.InteropServices;

public class MonoScript
{
    [DllImport ("__Internal")]
    extern static int GetMagicNumber();
    public int GetBetterMagicNumber() {
        return GetMagicNumber()+10000;
    }
} 
```

所以这是一个问题：

如何对**GetBetterMagicNumber()**进行单元测试？

我正在使用 MonoDevelop 创建托管代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T00:06:54.120

最好独立测试c#代码。如有必要，在 interopfile 中放置一个包装器，并直接使用 nunit 测试实际功能。

# lotus-domino - 如何禁用莲花笔记快捷键。在莲花笔记中

> ID：13794602
> 
> 赞同：1
> 
> 时间：2012-12-10T03:27:51.853
> 
> 标签：lotus-domino, lotus, lotusscript, lotus-formula

美好的一天，问题：有人知道如何禁用lotus notes 快捷键，例如在视图中，没有复制和粘贴数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T05:15:33.090

您无法在视图级别阻止复制。您可以通过删除数据库 ACL 条目中的“复制或复制文档”设置来防止在数据库级别进行复制。未启用此设置的用户将无法复制文档。（*请注意，此设置有一个副作用，此 IBM 技术说明中对此进行了描述[。IBM](http://www-01.ibm.com/support/docview.wss?uid=swg21164209)将此副作用视为一项功能。我认为这是一个错误。*）

您可以通过将代码添加到视图的`QueryPaste`事件并设置该代码来防止在视图级别粘贴`Continue = False`。

# javascript - jquery：多个列表的最后一个选择器

> ID：13794605
> 
> 赞同：1
> 
> 时间：2012-12-10T03:28:07.967
> 
> 标签：javascript, jquery

我有一个看起来像这样的导航

```
<ul class="navigation">
    <li class="navlist">
    Navigation1
    <ul>
    <li>point1</li>
    <li>point2</li>
    ...
    </ul>
    </li>

    <li class="navlist">
    Navigation2
    <ul>
    <li>point1</li>
    <li>point2</li>
    ...
    </ul>
    </li>
</ul>
etc (4 more navigations) .. 
```

现在我想选择最后一个并用 jquery 向它添加一个类。Normaly 我不会是一个问题。但我在代码中有 5 个这样的导航。它只是使用这个选择器将类添加到最后一个类

```
$('.navigation ul:last').addClass('last_border') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:31:50.773

使用[选择`:last-child`器](http://api.jquery.com/last-child-selector/)，

> 虽然`:last`只匹配一个元素，`:last-child`但可以匹配多个：每个父元素一个。

不是[`:last`](http://api.jquery.com/last-selector/)。

> 请注意，`:last`通过过滤当前 jQuery 集合并匹配其中的最后一个元素来选择单个元素。

* * *

所以你想选择*“每个导航类中最后一个navlist中的最后一个ul？”* 然后是你的选择器：

```
$('.navigation .navlist:last-child ul:last-child') 
```

[http://jsfiddle.net/mattball/HHDHE/](http://jsfiddle.net/mattball/HHDHE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:32:29.977

这循环遍历`.navigation`元素，并选择每个元素中的最后`ul`一个。

```
$(".navigation").each(function(i, nav) {
    $(nav).find("ul:last").addClass("last_border");
}); 
```

因为`.find("ul:last")`是从每个个体的上下文中执行的`.navigation`，所以`:last`将只适用于当前`.navigation`元素。

* * *

或者由于 jQuery 的隐式迭代，您实际上可以这样做：

```
$(".navigation").find("ul:last").addClass("last_border"); 
```

jQuery 将迭代找到的`.navigation`元素，并`.find()`分别对每个元素执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:32:16.443

我在这里猜测你真正想要什么：

`$('.navigation > li.navlist > ul:last').addClass('last_border')`

这有帮助吗？

# javascript - MVC3 通过 JavaScript 调用控制器传递变量 - 适用于 Android

> ID：13794607
> 
> 赞同：0
> 
> 时间：2012-12-10T03:28:17.627
> 
> 标签：javascript, android-browser

我有一些看起来像这样的标准代码

```
window.location.href = "/Home/Foo?Name=" + $('#Name').val() + "&Email=" + $('#Email').val(); 
```

**这在标准计算机浏览器**上按预期工作，但在**Android**上运行时似乎失败。
任何人都知道为什么这段代码**不能**在 Android 上运行？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:31:19.907

您需要通过调用来转义这些值`encodeURIComponent()`

# php - 用php读取分隔的文本文件

> ID：13794617
> 
> 赞同：0
> 
> 时间：2012-12-10T03:30:40.967
> 
> 标签：php

我有一个生成文本文件的程序，我想读取该文件并从中提取特定数据。该脚本需要搜索文本文件键，并将值返回到变量中。

我的文本文件如下所示：

```
"KEY1" "value to be returned" timestamp
"KEY2" "value to be returned" timestamp 
```

我已经尝试过爆炸等，但它不起作用。提前谢谢你，安迪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:34:10.970

你可以使用[`fgetscsv()`](http://php.net/manual/en/function.fgetcsv.php).

```
$data = fgetcsv ( $fh, NULL, ' '); 
```

这将像 CSV 一样读取您的文件，但会将空格用作分隔符。

`explode()`对于这个工具来说太生硬了，因为你使用引号来给空格他们的字面意思。

# python - 计算 PDB 文件中两条链之间的距离

> ID：13794620
> 
> 赞同：0
> 
> 时间：2012-12-10T03:31:03.580
> 
> 标签：python, perl, awk

我有 300 个带有 2 条链的 pdb 文件。我想计算第一条链的第一个原子到第二条链的所有原子之间的距离。然后，第一条链的第二个原子到第二条链的所有原子。这必须为 300 个文件重复。仅当距离 >= 5 时，我才需要打印原子对并将输出保存到具有输入文件名的另一个文件夹中。求距离的公式是 sqrt((x1-x2)^2+(y1-y2)^2+(z1-z2)^2)。$5 是链 ID，$12 是原子名称。$7, $8, $9 是 x,y,z 坐标。您的宝贵建议将不胜感激！！

```
ATOM      1  N   MET A   1     -16.220  53.312  36.564  1.00 32.19           N  
ATOM      2  CA  MET A   1     -15.722  52.290  37.522  1.00 28.47           C
ATOM      3  C   MET A   1     -14.451  51.635  37.011  1.00 26.82           C 
ATOM   2542  CG  ASN B  17      -1.077   9.776  13.155  1.00 18.23           C  
ATOM   2543  OD1 ASN B  17      -0.563   9.098  12.250  1.00 18.58           O 
ATOM   2544  ND2 ASN B  17      -0.632   9.746  14.418  1.00 14.82           N 
```

期望的输出（距离值不正确）

```
N-C   8.90
N-O   10.3
N-N   7.62
C-C   12.45
C-O   9.0
C-N   9.89 
C-C   11.45
C-O   19.0
C-N   10.89 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:21:01.497

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file{,} 
```

的内容`script.awk`

```
NR==1 {
    n = $5
}

FNR==NR && $5 != n {
    a[c++]=$0
}

FNR!=NR && $5 == n {
    for (i=0;i<=c-1;i++) {
        split (a[i],b)
        dist = sqrt (($7-b[7])^2 + ($8-b[8])^2 + ($9-b[9])^2)
        if (dist >= 5) {
            printf "%s-%s\t%.2f\n", $NF, b[NF], dist
        }
    }
} 
```

制表符分隔的结果：

```
N-C 51.70
N-O 52.83
N-N 51.30
C-C 51.14
C-O 52.29
C-N 50.71
C-C 50.00
C-O 51.14
C-N 49.56 
```

或者，这是单线：

```
awk 'NR==1 { n = $5 } FNR==NR && $5 != n { a[c++]=$0 } FNR!=NR && $5 == n { for (i=0;i<=c-1;i++) { split (a[i],b); dist = sqrt (($7-b[7])^2 + ($8-b[8])^2 + ($9-b[9])^2); if (dist >= 5) printf "%s-%s\t%.2f\n", $NF, b[NF], dist } }' file{,} 
```

因此，要对当前工作目录中的多个文件执行此操作，并假设此目录中只有感兴趣的文件，您可以围绕该语句包装一个`for`循环。`awk`显然，您需要更改`/path/to/folder/`您选择的路径才能使其正常工作：

```
for i in *; do awk 'NR==1 { n = $5 } FNR==NR && $5 != n { a[c++]=$0 } FNR!=NR && $5 == n { for (i=0;i<=c-1;i++) { split (a[i],b); dist = sqrt (($7-b[7])^2 + ($8-b[8])^2 + ($9-b[9])^2); if (dist >= 5) printf "%s-%s\t%.2f\n", $NF, b[NF], dist > "/path/to/folder/" FILENAME } }' "$i"{,}; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:45:23.760

看看 Python 的 MDAnalysis 模块——http: [//code.google.com/p/mdanalysis/](http://code.google.com/p/mdanalysis/)

[http://code.google.com/p/mdanalysis/wiki/Examples#Extracting_a_chain_from_a_PDB](http://code.google.com/p/mdanalysis/wiki/Examples#Extracting_a_chain_from_a_PDB)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:17:27.737

像这样将您的示例数据保存为“测试”：

```
#! /usr/bin/python3.2

import re

class Atom:
    def __init__ (self, line):
        tokens = re.split (' +', line)
        self.chain = tokens [4]
        self.x = float (tokens [6] )
        self.y = float (tokens [7] )
        self.z = float (tokens [8] )
        self.name = tokens [11]

    def __repr__ (self):
        return self.name

    def distance (self, other):
        return ( (self.x - other.x) ** 2 + (self.y - other.y) ** 2 + (self.z - other.z) ** 2) ** .5

chains = [ [], [] ]

with open ('test', 'r') as pdb:
    for line in pdb.readlines ():
        atom = Atom (line.strip () )
        chains [0 if atom.chain == 'A' else 1].append (atom)

print ('\n'.join ( ['{} - {}\t{}'.format (a, b, a.distance (b) ) for a in chains [0] for b in chains [1] ] ) ) 
```

产生类似的东西：

```
N - C   51.697920905970676
N - O   52.8317143484858
N - N   51.29744063791097
C - C   51.14359109409506
C - O   52.28783920760161
C - N   50.709908814747436
C - C   50.001484907950484
C - O   51.140786403808846
C - N   49.559022700210704 
```

.

**编辑：**

我忘记了您的 >= 5.0 条件：只需将最后一行替换为：

```
print ('\n'.join ( ['{} - {}\t{}'.format (a, b, a.distance (b) ) for a in chains [0] for b in chains [1] if a.distance (b) >= 5.0] ) ) 
```

# azure - Azure 上 Team Foundation Service 和 TFS 的缺点

> ID：13794630
> 
> 赞同：9
> 
> 时间：2012-12-10T03:32:48.460
> 
> 标签：azure, tfs, azure-sql-database, msdn, azure-devops

我是 MSDN 订阅者，开始了一个涉及 WPF、Web 服务和 SQL Server 的个人项目。我计划使用我的 MSDN 优势在 Azure 上托管 Web 服务和在 SQL Azure 上托管数据库。

我打算在我自己的开发机器上运行 TFS，但后来听说了 Microsoft 的 Team Foundation Service 云产品。此外，我似乎可以在 Azure 上运行我自己的 TFS 实例。在这一点上，我认为 Team Foundation Service 是最佳选择，因为：

1.  我更愿意在我的主要开发机器上的云中拥有 TFS，这样我就可以在任何地方访问它，而不必担心必须备份它。
2.  如果我没有从中得到任何额外的东西，我宁愿不必担心在 Azure 上设置和管理 TFS。
3.  我不确定通过我的 MSDN 订阅在 Azure 上设置和使用 TFS 是否免费（或继续免费）。

是否有人在使用 Team Foundation Service 时遇到过任何重大缺陷，例如灵活性或功能的重大损失？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T03:48:08.060

我一直在使用 TFS 服务，因为它是我个人工作的预览版——而且我在源代码控制/构建服务方面没有任何限制。该服务与完整的 TFS 服务器相当；但不包括更高级的功能，例如测试自动化。

定价页面还指出，服务将继续对 MSDN 订阅者免费：[https ://tfs.visualstudio.com/en-us/pricing/information/](https://tfs.visualstudio.com/en-us/pricing/information/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:44:22.413

在 TFSPreview 出现之前，我向 MS 的一些知情人士询问了在 Azure 中运行 TFS 的问题，我被告知在 Azure 上的虚拟机上运行 TFS 存在一些不小的问题。我相信这就是为什么 MS 提供 TFS 作为服务而不是作为虚拟机模板的原因。因此，如果您想使用 TFS 并且希望它位于云中，我肯定会使用 TFS 预览版。

# php - 通过使用 PHP 计算行数和每页的预定义结果 (rpp) 进行动态分页

> ID：13794636
> 
> 赞同：0
> 
> 时间：2012-12-10T03:33:42.590
> 
> 标签：php, mysql, pagination

我编写了一些代码来计算数据库中的行数，并通过一个小脚本显示“Page：1 2 3 4 5”等。

这是我的代码：

```
$totalRows = mysql_num_rows
$rpp = 20
$totalPages = ceil($totalRows/$rpp);
$i;

for (i=0; i<totalPages; i++){
    echo "Page: " . "<a href='index.php?page=\"$i\"rpp=20>\"$i\"</a>";
} 
```

这看起来不错吗？我还需要什么吗？

编辑 1：添加 ceil() 进行四舍五入。不再缺少结果:-)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:46:19.987

我认为您需要将 $totalPages 舍入到下一个最高整数，即。

$totalPages = ceil($totalRows/$rpp);

# javascript - undefined|0|ReferenceError：严格模式禁止隐式创建全局属性“csrf_token”

> ID：13794637
> 
> 赞同：12
> 
> 时间：2012-12-10T03:33:59.550
> 
> 标签：javascript, ruby-on-rails, backbone.js, jasmine, sinon

所以，这是我一直遇到的一个非常有趣的问题。

我目前正在构建一个backbone.js - Rails 应用程序。通常只是为了学习目的而构建它。我（就像任何优秀的 Rails 开发人员一样）在 TDD/BDD 方面做得最好，但我遇到了水豚的问题。

我有一个仅测试 root_path 工作的集成规范（主干历史开始，显示初始信息等......）。

```
require 'spec_helper'

describe "RentalProperties", js: true do
  describe "GET /" do
    it "should show a list of properties" do
      visit root_path
      eventually{page.should have_content("Something")}
    end
  end
end 
```

我正在使用 jasmine、sinon 和 capybara/rspec/webkit 运行测试。我大致遵循thoughtbot的“Rspec on Rails”书（顺便说一句很棒的书）和本教程：[http ://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine- sinon.html](http://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine-sinon.html)。

运行上述规范时，我遇到了这个错误：

```
undefined|0|ReferenceError: Strict mode forbids implicit creation of global property 'csrf_token' 
```

我花了很长时间来解决这个问题，因为这个错误真的没有谷歌可以解决的问题。

最终我偶然发现在 JS 中使用“使用严格模式”。本质上，这将使用一些新的 EMCA5 脚本约定。它将捕获更多的编码漏洞，并阻止您访问全局变量。所有美好的事物。

所以我检查了一下，在我的 sinon.js 文件中，我看到：

```
"use strict"; 
```

在文件的第 36 行。瞧，我注释掉了这条线，我的测试工作得很好。

这是我的问题：为什么要使用严格的 csrf？我假设这与我的 rails 布局中的 csrf_meta_tags 有关。如果可能的话，我想把这条线放回 sinon js，因为我认为它是“正确的做法”

有没有人有这方面的更多信息？我提前感谢任何细节！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T04:21:55.683

它告诉您一个值被分配给一个`csrf_token`尚未声明的名为的变量，例如

```
csrf_token = 'foo'; 
```

`csrf_token`在非严格模式下，这将创建执行该行代码时调用的全局对象（通常称为全局变量）的属性。

在严格模式下，它会抛出您看到的错误，因为严格模式会阻止隐式创建全局变量。您还可以通过包括以下内容来修复它：

```
var csrf_token; 
```

全局上下文中与错误来源代码或前一个脚本元素相同的脚本元素中的任何位置。

# extjs4.1 - 带有borderLayout的面板填充它的父体

> ID：13794645
> 
> 赞同：0
> 
> 时间：2012-12-10T03:35:08.930
> 
> 标签：extjs4.1

我想将面板添加到 tabPanel 的选项卡之一，我对面板使用边框布局，但是当我将面板添加到选项卡时，它无法填充它的父正文。
面板代码：

```
var viewport = Ext.create('Ext.panel.Panel', {
layout: {
type: 'border',
padding: 5
},
defaults: {
split: true,
anchor:'100%'
},
id:'viewPort',
width:600,
height:600,
items: [{
region: 'west',
collapsible: true,
title: 'Starts at width 30%',
split: true,
width: '17%',
minWidth: 100,
minHeight: 140,
layout:{
type:'vbox',
align:'stretch'
},
items: [show,treePanel,propGrid]
},tabs]
}); 
```

作为面板父级的选项卡代码，当用户单击它时面板会动态加载到它：

```
var mainTabs = Ext.create('Ext.tab.Panel', {
layout: 'anchor',
id:'mtabs',
defaults: {
split: true,
anchor: '100%'
},
items: [{
title: 'Layout Window',
closeAction: 'hide',
layout: {
type: 'border',
padding: 5
},
//anchor: '100%',
width:600,
height:600,
listeners: {
    activate:function (tab) {

    }
},
items: [{
    region: 'west',
    collapsible: true,
    title: 'Starts at width 30%',
    split: true,
    width: '17%',
    minWidth: 100,
    minHeight: 140,
    layout:'vbox',
    items: [historyTreePanel,propGrid]
    },tabs]
},{
    title: 'History',
    //xtype:'panel',
    width:2000,
    height:1024,
    html: 'Please Wait...',
    id:'history-tab',
    layout:'fit',
    layout: 'hbox',
     default: {
     anchor:'100%'
     },
//iconCls: 'favorites',
//cls: 'card1',
listeners: {
    activate:function (tab) {
    if(!flag){
    flag = true;
        $.getScript("/FleetManagement/js/history/fleethistory.js", function(data, textStatus, jqxhr) {
            Ext.getCmp('history-tab').add(viewport);
        });
}
}
}
}],
renderTo : Ext.getBody()
});
}); 
```

在上面的代码选项卡中，`id:'history-tab'`是我提到的选项卡。我该如何解决这个问题？
![标签内容](../Images/eddca6e7ae8555deba546918a39c8772.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:50:45.750

您的代码似乎缺少一些组件。您的标签应该有正确的布局。示例代码。jsfiddle 示例[在这里](http://jsfiddle.net/srknori/tzrFC/)。希望这可以帮助

```
Ext.onReady(function() { var resultsPanel = Ext.create('Ext.Panel',{
        frame:false,
        border:false,
        collapsible:false,
    title:'tab main',
        layout:'border',
        items:[{
          region: 'center', 
          id:'centerPanel',
            title:'center',
          xtype:'panel',
          layout:'fit',
          border: true,
          items:[{id:'grid',xtype:'panel'}]

        },

               {
                 region: 'west',     
                 id:'westPanel',
                   title:'facets',
                 xtype:'panel',
                 width:'15%',
                 collapseMode: 'mini',
                 collapsible:true,
                 autoScroll: true,
                 border: false,
                 baseCls:'x-plain',
                 split: true ,
                 items:[{id:'facet',xtype:'panel'}]
               }
              ]
      }); var subtab = {  xtype:'tabpanel',
                      title:'moretabs',
                      activeTab: 0,//tabActive,
                      closable:true,
                      border:false,
                      id:'idd',
                items: [{border:false,layout: 'fit',cls: 'inner-tab-custom', autoShow:true, id:'sub1-',title:  'nested1',items:[resultsPanel]}]  };

var tabPanel = Ext.create('Ext.tab.Panel', {
      layout:'fit',
    height:200,
      msgDisplay: 'block',
      //deferredRender:false,
      border:false,
      items: [subtab]
      }).render(Ext.getBody());

}); 
```

# javascript - 为什么 Object.__proto__ 等于 Function.__proto__？

> ID：13794650
> 
> 赞同：4
> 
> 时间：2012-12-10T03:35:42.893
> 
> 标签：javascript, ecmascript-5

为什么`Object.__proto__ === Function.__proto__`在 JavaScript 中？

这个设计的目的是什么？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:37:41.193

对象的[`__proto__`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)表示该对象继承的原型。

因为`Object`和`Function`都是函数，所以它们都具有相同的原型。

# objective-c - 创建具有可编辑区域的 NSTextField 后，无法输入任何内容

> ID：13794652
> 
> 赞同：4
> 
> 时间：2012-12-10T03:35:53.220
> 
> 标签：objective-c, xcode, macos, nstextfield

我似乎无法让这个工作，至少可以说有点有趣。

所以，我有几个朋友，我们有一组示例代码，我们应该在项目中使用和扩展。问题？它似乎只在基于 Windows 的机器上正常工作。整个项目是一个java到objective c的服务器/客户端关系。我们以前从 Java 到 Java，现在必须让 Objective C 部分工作。

代码在这里（请注意，与整个项目相比，这只是代码的一小部分）：

```
- (NSTextField*) addFieldWithTitle:(NSString*) aTitle at: (NSRect) aRect {
NSTextField* label =[[[NSTextField alloc] initWithFrame: aRect] autorelease];
[label setSelectable: YES];
[label setEditable: YES];
[label setBezeled: YES];
[label setDrawsBackground: YES];
[label setStringValue: aTitle];
[[window contentView] addSubview: label];
return label;
} 
```

在我的 Mac 上，它可以正确显示，并允许选择每个字段（也就是说，需要选择每个字段）。但问题如下：选择字段后，您无法输入任何内容。然后，您在选择显示的“程序”之前打开的上一个程序/应用程序会接收输入的任何内容。它似乎根本没有正确注册它，因为它根本不输入。

更有趣的是，我可以右键单击（或控制单击）可编辑字段，然后选择“粘贴”，它会将我之前复制的字符串粘贴到剪贴板...

所以这是我感兴趣的问题，我似乎找不到任何答案，我的同学也找不到答案。

任何帮助将不胜感激！

问候，迈克尔

PS 如果您想要我们正在运行的完整代码，我也可以提供。

# python - 安装 PyGObject 后无法导入 gtk

> ID：13794658
> 
> 赞同：1
> 
> 时间：2012-12-10T03:36:53.353
> 
> 标签：python, gtk, pygtk

我`import gtk`以前可以没有任何问题。我为 GTK+ 3 制作了一个 GUI。然后我想我想尝试 GTK+ 3。所以我安装了 PyGObject。后来我发现 PyGObject 的文档很少，而且我使用的是 Windows（我知道这让事情变得更糟）。

问题就在这里，我不能再使用`import gtk`了。我也不能用`from gi.repository import Gtk`。我已经尝试再次安装 PyGTK 包，但它没有帮助。

```
 >>> import gtk

    Traceback (most recent call last):
      File "<pyshell#0>", line 1, in <module>
        import gtk
      File "C:\Python27\lib\site-packages\gtk-2.0\gtk\__init__.py", line 30, in <module>
        import gobject as _gobject
      File "C:\Python27\lib\site-packages\gtk-2.0\gobject\__init__.py", line 26, in <module>
        from glib import spawn_async, idle_add, timeout_add, timeout_add_seconds, \
      File "C:\Python27\lib\site-packages\gtk-2.0\glib\__init__.py", line 22, in <module>
        from glib._glib import *
    ImportError: DLL load failed: The specified procedure could not be found.` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:47:07.667

这看起来像是缺少 C 级库，或者至少在 Python 包装器找不到它的地方。尝试重新安装与您要使用的 Python 库相对应的 C 库版本（理论上，GTK2 和 GTK3*应该*是可并行安装的，但安装较新的 PyGobject 破坏`import gtk`表明至少这些特定绑定不适用于一些理由）。

# systemc - 在运行时动态加载 SystemC 模块

> ID：13794659
> 
> 赞同：2
> 
> 时间：2012-12-10T03:37:11.943
> 
> 标签：systemc

在我的模拟器框架中，硬件/软件模块在 SystemC 中实现并预先构建。要模拟的平台用 XML 描述。模拟器核心解析 XML，确定使用的模块和相应的库文件（例如 Windows 中的 dll），并在运行时动态加载这些模块。但是我没有发现 SystemC 动态加载模块的示例代码。

我怎样才能在 SystemC 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T05:15:51.063

因为你说的是​​ Windows 的 DLL 中的示例，所以我假设你是在 Windows 平台上这样做的。[所以我建议你可以阅读 MSDN http://msdn.microsoft.com/en-us/library/windows/desktop/ms686944(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686944%28v=vs.85%29.aspx)中的文章和示例。

如果您使用的是 unix 平台，您可以使用`dlopen`和`dlsym`加载相应的共享库并从您的主程序中检索要调用的函数地址。

# objective-c - UINavigationController initWithRootVC：如何强制加载VC？

> ID：13794663
> 
> 赞同：0
> 
> 时间：2012-12-10T03:37:54.847
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我创建了一个视图控制器，然后创建了一个导航控制器：

```
initWithRootViewController: 
```

然后我观察到它调用`pushViewController:animated:`，因为我使用自己的`UINavigationController`子类，所以我覆盖`pushViewController:animated:`：

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    [super pushViewController:viewController animated:animated];
    // do something with the VC
} 
```

问题是，紧接着

```
[super pushViewController:viewController animated:animated]; 
```

否，所以我实际上不能做我想做的`viewController.isViewLoaded`事，当它用作导航控制器的根 VC 时，有没有办法强制加载 VC？

谢谢！

编辑，下面是代码：

```
MyViewController *vc = [[MyViewController alloc] initWithNib:@"" bundle:nil];
MyNavController *nav = [[MyNavController alloc] initWithRootViewController:vc];

self.revealViewController.frontViewController = nav; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:19:46.300

```
Access view before pushing viewController.

[viewController view];//this will load your view
[super pushViewController:viewController animated:animated]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T03:46:42.073

我在 Apple 文档中找到了这个答案

> UINavigationController 类实现了一个专门的视图控制器来管理分层内容的导航。此类不用于子类化。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# jruby - jruby：没有这样的文件或目录——rails（LoadError）

> ID：13794666
> 
> 赞同：0
> 
> 时间：2012-12-10T03:38:08.803
> 
> 标签：jruby, jrubyonrails

我试图使用`jruby -S rails new OSTH_GGG`.

但它返回`jruby: No such file or directory -- rails (LoadError)`。

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:59:11.710

确保`rails`已安装 gem：

```
jruby -S gem install rails 
```

另请参阅[此答案](https://stackoverflow.com/questions/9884952/where-to-start-for-jruby-on-rails/9885284#9885284)以获取有关如何开始使用 JRuby on Rails 的更多详细信息。

# facebook - 使用 Graph Api 发布到 Facebook 用户组

> ID：13794669
> 
> 赞同：-2
> 
> 时间：2012-12-10T03:38:54.067
> 
> 标签：facebook, facebook-graph-api

我想知道如何构建一个 Facebook 应用程序，它可以让我向连接到该应用程序的所有 Facebook 用户发布特定消息。我搜索了很多，但找不到答案，我发现很多应用程序只能帮助我向我的群组发送消息。我需要的是，当用户访问我的应用程序并按下**Login With Facebook**并授予我的应用程序所需的权限时，会向他所属的所有组发送一条预设消息。就像当我连接到游戏应用程序时，应用程序会向我所属的组发送“*夫人...开始玩..游戏”。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:44:35.120

> 我发现很多应用程序可以帮助我只向我的群组发送消息

My 是相对的（如“我”端点）。因此，任何登录该应用程序的人都可以为他们的小组工作。这就是你想要做的。

但请注意：您所描述的功能将属于垃圾邮件的定义，因为它为多个群组发布了相同的帖子，而不考虑受众。帖子只能在涵盖相关人群或主题的组中。您将因您所描述的内容而关闭您的应用程序。

# perl - 使用 CGI 脚本链接页面

> ID：13794670
> 
> 赞同：0
> 
> 时间：2012-12-10T03:39:10.773
> 
> 标签：perl, cgi

我正在尝试编写一项调查，一次只显示一个问题，每个问题都在单独的页面上。我无法弄清楚如何让我的 CGI 文件完成此操作，现在我将所有内容都放在一个页面上，但希望我的用户能够点击“下一步”按钮将他们带到一个新问题。我正在尝试专门使用 Perl 和 HTML 来做到这一点。例如：

```
use CGI qw(:standard);              # Include standard HTML and CGI functions
use CGI::Carp qw(fatalsToBrowser);          # Send error messages to browser

#
# Start by printing the content-type, the title of the web page and a heading.
#

print header, start_html("Hello"), h1("Hello");

if (param())    {               # If true, the form has already been filled out.

    $who  = param("myname");
    $cats  = param("cats");         # Extract the value passed from the form.
    if($cats == "Y"){
        print p("Hello, your name is $who, and you like cats"); 
    }
    else{
        print p("Hello, your name is $who, and you don't like cats");   # Print the name.
    }

}
else    {                   # Else, first time through so present form.

    print start_form();         
    print p("What's your name? ", textfield("myname"));
    print p("Do you like cats? Y for yes and N for no", textfield("cats"));
    print p(submit("Submit form"), reset("Clear form"));
    print end_form();
}

print end_html; 
```

如果我希望猫问题出现在下一页上，通过取出提交按钮并放入一个功能类似于下一个的按钮，我是否必须将按钮链接到另一个页面或者可以在一个脚本中实现？简而言之，您可以创建并链接多个 html 页面以仅使用一个 cgi 脚本进行调查吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:09:49.060

你当然可以。问题是您的脚本需要知道用户刚刚提交了哪个页面才能知道接下来要显示哪个页面。但是，这可以通过隐藏`<input>`在您`<form>`的 s 中轻松实现。这种隐藏输入由浏览器发送到 CGI 脚本，就像它们是常规输入一样，例如文本输入、下拉框或复选框。

在服务器端，这个隐藏`<input>`的名称和值可通过正常的`param()`方法调用获得。隐藏输入本身是用`hidden()`;创建的 请阅读[可用的文档](http://search.cpan.org/~markstos/CGI.pm-3.63/lib/CGI.pm#CREATING_A_HIDDEN_FIELD)。

# html - ul 和块元素向左浮动

> ID：13794674
> 
> 赞同：1
> 
> 时间：2012-12-10T03:39:29.197
> 
> 标签：html, css-float, html-lists

我的问题是：以下行为是定义还是错误？

我已经看到了各种解决方法的答案，但不是关于行为本身。

默认情况下，每个 <li> 对向左浮动的块的子弹在块内而不是右侧呈现。但是，这就是我希望它呈现的方式（块和项目符号之间的空间，直到 <li>s 下降到元素下方，然后父块的边缘和项目符号之间的空间量相同）：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Page Title</title>
    <style type="text/css">
        .my_div  {
            float: left;
            background-color: #CCF;
            /* To push <li>s out */
            margin-right: 25px;
        }
        .my_ul   {
            /* Consistency across all browsers */
            padding-left: 25px;
            /* Fix for Opera only */
            list-style-position: inside;
        }
    </style>
</head>
<body>
    <div class="my_div">Some text<br>Second line</div>
    <ul class="my_ul">
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
    </ul>
</body>
</html> 
```

尝试删除`.my_ul`样式并`margin-right`再次查看。我预计它会以相同的方式呈现，但事实并非如此。它在我测试过的所有浏览器（Opera 12、Firefox 17、Chrome 23、Internet Explorer 8、Safari 5）上都一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T06:20:40.753

Check the [sample](http://jsbin.com/egojut/1) and [code](http://jsbin.com/egojut/1/edit). Just I provided **margin-left** for the `<ul>` element. I aligned block is left and list item in right. Is this your wants?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:10:54.280

解决方法可能如下：

```
ul {
    margin-left:0; list-style-type:none;
}
ul li:before{
    content:"\25cf\00A0\00A0\00A0";
} 
```

# jquery - 我如何覆盖 jquery 文件上传插件选项

> ID：13794679
> 
> 赞同：3
> 
> 时间：2012-12-10T03:40:52.087
> 
> 标签：jquery, file-upload

我正在使用带有 Jquery UI 的 jquery fileupload 插件

[https://github.com/blueimp/jQuery-File-Upload/wiki/Options](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

我想覆盖小部件选项，例如`maxUploadfilesize`

当前，如果我覆盖了主文件中的设置 `jquery.fileupload-ui.js`

然后它工作

```
var parentWidget = ($.blueimpFP || $.blueimp).fileupload;
    $.widget('blueimpUI.fileupload', parentWidget, {

        options: {
            // By default, files added to the widget are uploaded as soon
            // as the user clicks on the start buttons. To enable automatic
            // uploads, set the following option to true:
            autoUpload: true,
            //sequentialUploads, true,
            // The following option limits the number of files that are
            // allowed to be uploaded using this widget:
            maxNumberOfFiles: undefined,
            // The maximum allowed file size:
            maxFileSize: 20000000,
            // The minimum allowed file size:
            minFileSize: undefined, 
```

有什么办法可以在我的 html 模板中覆盖它，以便我可以对不同的 html 页面进行不同的自定义

我的意思是一些 javvscript 代码，我可以将其放入覆盖默认设置的模板中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:09:11.960

他们的[文档](https://github.com/blueimp/jQuery-File-Upload/wiki/API)说您可以覆盖它们

只需将此代码放在您初始化插件的位置

```
$('#fileupload').fileupload(
    'option',
    {
        maxFileSize: 4000000,
        sequentialUploads: true
    }
); 
```

# css - 如何在 LESS 中拥有属性引用本身？

> ID：13794683
> 
> 赞同：1
> 
> 时间：2012-12-10T03:41:43.243
> 
> 标签：css, less

我想有一个属性引用它的“自我”，我不知道如何在 LESS 中做到这一点。哎呀，我很难制定问题的措辞。基本上我想完成以下工作：

```
a:visited {
    color: lighten(color, 10%);
} 
```

Where `a`'s`color`可能因容器而异`div`。

所以我可能有以下选择器：

```
div#blue-text a {
    color: #00F;
}

div#black-text a {
    color: #000;
} 
```

一旦我访问链接，我应该分别有一个浅蓝色和灰色的链接文本。

注意：这是一个非常简单的场景，但我有更复杂的需求，如果有一个干净的方法可以做到这一点，那么我会是一个快乐的露营者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:34:37.173

基本上，由于您还将在 LESS 中设置父级的颜色，因此您会将颜色存储在一个变量中并引用它。

这是一个例子：

```
@column1Color: #aaaaaa;
@column2Color: #bbbbbb;
@column3Color: #cccccc;

.columns {
    // set the color of the first column
    .column:nth-child(1) {
        background-color: @column1Color;
        a {
            color: lighten(@column1Color, 10%);
        }
    }
    // set the color of the second column
    .column:nth-child(2) {
        background-color: @column2Color;
        a {
            color: lighten(@column2Color, 10%);
        }
    }
    // set the color of the third column
    .column:nth-child(3) {
        background-color: @column3Color;
        a {
            color: lighten(@column3Color, 10%);
        }
    }
} 
```

除非您“告诉”它，否则 LESS 不会知道超链接的颜色是什么。浏览器也是如此，除非它执行所有链接的 CSS 文件，否则它不会知道颜色。

因此，您需要的（如果我理解正确的话）无法按照您的想法实现。

# php - 虽然循环拒绝工作

> ID：13794688
> 
> 赞同：0
> 
> 时间：2012-12-10T03:42:21.423
> 
> 标签：php, mysql, for-loop, mysqli, while-loop

我之前确实发过帖子，但无法正确解释我的问题，也无法解决。这就是我所拥有的。

```
$shoutlines = file($shout_file);

$aTemp = array();
foreach($matches['user'] as $user) {
    $aTemp[] = "'" . $user . "'";
}
$user = implode(",", $aTemp);

$rara = "SELECT * FROM accounts WHERE username IN ( $user )"; // Tried this statment both as a query and prepared statement
$getlevel = $db->query("SELECT * FROM accounts WHERE username IN '( ".$user." )'"); // Tried this both as a query and prepared statement
//$getlevel->bind_param('s', $user);
//$getlevel->execute();
//$level = $getlevel->get_result();
//$getlevel->store_result();
while($getdb = $getlevel->fetch_assoc()){
    //output the html
        for($i = 0; $i < (1000); $i++)
        {
            if(isset($shoutlines[$i]))
            {

                $shoutline = preg_replace('/<\/div>\n/', ' ', $shoutlines[$i], 1);
                echo showSmileys($shoutline) . "<div class='delete'><a href='javascript: delete_shoutline({$i});' title='Delele'>delete</a></div></div>";
            }
        }
} 
```

我在`for`循环中有一个`while`不会在其中运行的循环，如果我将`for`循环移到它之外`while`它工作正常，但我需要它在`while`循环中检查用户的帖子标题、能力等，这些已保存在我的数据库中。我已经展示了到目前为止我在确定问题时所做的尝试，如果查询、绑定或执行未显示为真，但现在得到了命中，我已经尝试消除错误。已提取此代码，因此您的阅读能力不会太混乱，对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:01:24.627

当“爆炸”用户名时，您需要将每个用户名用引号括起来，而不是全部。还要使名称对数据输入安全。

```
$aTemp = array();
foreach($matches['user'] as $user) {
    $aTemp[] = '"' . mysql_real_escape_string($user) . '"';
}
$user = implode(",", $aTemp); 
```

然后使用第一个查询：

```
"SELECT * FROM accounts WHERE username IN ( $user )"; 
```

* * *

编辑：添加错误检查：

```
$getlevel = $db->query("SELECT * FROM accounts WHERE username IN ( $user )");
if ($getlevel == false) {
    // Normally you'll build into a function or class, but this is the simple example
    // Never output SQL errors on a live site, but log to file or (if you can do it safely) the database.
    echo 'Whoopsie<br />';
    var_dump($db->errorInfo());
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:08:27.330

使用带有`IN`子句的数据绑定并不是那么好，所以如果你真的需要`IN`并且不关心使用旧的，不推荐使用的`mysql_*`函数，试试这个：

```
$user="'".implode("','",array_map(function($s){
  return mysql_real_escape_string($s);
},$matches["user"])."'";
$rara="SELECT * FROM accounts WHERE username IN ($user)"; 
```

# amazon-web-services - 是否可以通过不断变化的 AMI 使用亚马逊网络服务自动扩展？

> ID：13794693
> 
> 赞同：0
> 
> 时间：2012-12-10T03:42:46.477
> 
> 标签：amazon-web-services, amazon-ec2

好奇这是否可能：

我们有一个 Web 应用程序，在大多数情况下，它与我们的单个小实例一起工作得很好。但是，当我们让多个客户同时运行密集查询时（我们是云调度服务）；我们的实例陷入了接近 80% 的 cpu 负载并且变得非常无响应。

有没有办法让 AWS 快速启动另一个小实例（或几个），只在它在这种高负载下运行的时候？但是，真正的问题是，当我们对应用程序进行非常频繁的编程更新时，它是如何工作的？每次上传代码更改时，我们是否必须手动创建新图像？？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:32:08.567

您永远不应该在单个 EC2 实例上运行任何重要的东西。实例可以——而且确实——随机下线。始终使用跨多个可用区的自动缩放 (AS) 组。当您触发某个触发器（在您的情况下为 CPU 利用率）时，AS 组将自动使新实例联机。然后它会在流量减少时缩减实例。自动缩放是 AWS 的核心和灵魂，如果您不使用它，您还不如使用更便宜（更耐用）的 VPS 主机。

不，您不想为每个代码版本创建一个新的 AMI。理想情况下，您应该使用基本 AMI（如 Amazon 的官方之一），然后在启动时自动配置。您可以在启动 AMI 时使用“用户数据”字段来引导此过程。它可以像从 Git 存储库中提取的 bash 脚本一样简单，也可以像 Puppet 或 Chef 这样复杂。

我创建自定义 AMI 的唯一一次是配置过程花费的时间太长。但是，这几乎总是可以通过将所需文件存储在 S3 中来解决。

# google-maps - 不同语言的谷歌地球/地图

> ID：13794695
> 
> 赞同：0
> 
> 时间：2012-12-10T03:43:06.083
> 
> 标签：google-maps, google-maps-api-3, google-earth

我是谷歌地球/地图和一般编程的新手。

我正在开发一个项目，该项目必须显示/列出来自 Google 地球/地图的世界每个国家/地区的 1 级管理员名称（州/省）。

是否有可访问的文件以 Google 地球提供的 43 种语言列出 1 级管理员名称（州/省）？

获取不同语言的所有 1 级管理员名称（州/省）的文件将为我节省大量时间和精力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T20:03:29.300

有两组主要的国家和地区。一个是ISO3166标准，另一个是联合国提供的清单。它们是全球使用最广泛的两个标准：

**ISO 3166** - 国家和地区的国际标准（

基地： [http](http://www.iso.org/iso/home/standards/country_codes.htm) ://www.iso.org/iso/home/standards/country_codes.htm ；

txt 文件与国家：[http](http://www.iso.org/iso/home/standards/country_codes/country_names_and_code_elements_txt.htm) ://www.iso.org/iso/home/standards/country_codes/country_names_and_code_elements_txt.htm ）；

**联合国**国家、首都和主要城市名称的多语言、多文本数据集（[http://unstats.un.org/unsd/geoinfo/geonames/Default.aspx](http://unstats.un.org/unsd/geoinfo/geonames/Default.aspx)）。

恐怕您需要为所有国家/地区细分的 ISO 付费。但是你可以免费下载联合国数据。他们还在其网站上提供其他数据库。

# ipython - iPython Notebook Markdown Cell 中的语法高亮

> ID：13794698
> 
> 赞同：15
> 
> 时间：2012-12-10T03:43:30.767
> 
> 标签：ipython, markdown, syntax-highlighting, jupyter-notebook

有没有办法让 iPython Notebooks 中的 Markdown 单元格突出代码块中的语法？

例如，在 GitHub 中，可以通过以下方式获得所需的效果。

```
```python
>>>print('hello')
``` 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-16T04:09:23.987

GitHub 上的 IPython 主分支现在支持使用三反引号来表示代码的[GitHub Flavored Markdown 样式](https://github.com/ipython/ipython/pull/3101)，因此将包含在 1.0 版本中。

正如 Jakob 所指出的，即使在此之前，您也可以对代码使用常规降价，您只需将代码缩进四个空格，这仍然是在 IPython 笔记本中显示代码的有效方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:03:31.283

使用 IPython 0.13.1 语法高亮就像（在降价单元格中）一样简单：

```
some text

    def foo():
        print 'bar'
        return 0

some text 
```

只是，在代码之前使用一个空行并缩进代码（参见 Ipython 附带的示例笔记本）。这适用于 Python 和其他一些语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-31T10:55:34.217

在 IPython 7.2.0 笔记本中，您可以使用：

`Text `code` text`

在降价单元格中以内联打印突出显示的代码。

# java - 简单的字符串比较不起作用

> ID：13794700
> 
> 赞同：0
> 
> 时间：2012-12-10T03:43:33.980
> 
> 标签：java, string, linked-list, equals

我需要创建一个循环链接列表，其中节点具有 Rider 类对象，每个 Rider 都有一个名称和一个布尔值。给定文本输入，程序扫描输入并将骑手添加到“行”

```
public static void main(String[] args) throws FileNotFoundException{

    Scanner read = new Scanner(System.in);
    CLLOfRiders line= new CLLOfRiders();
    System.out.print("Welcome to Project 1." +
            "\nWhat is the name of the data file?\n>");
    String input=read.nextLine();
    File f= new File(input);
    Scanner fileread = new Scanner(f).useDelimiter(" - |\n");
    while(fileread.hasNext())
    {
        Rider r=new Rider();
        r.name=fileread.next();
        System.out.println(r.name);
>>>>>       if(fileread.next().equals("Y")) <<<<<   
        r.changePass(true);
        line.addRider(r);
        System.out.println(r.speedPassStatus);
    }
    System.out.println("Finished reading the file.");
    line.showWait(); 
```

我的问题是箭头突出显示的 if 语句没有运行，所以我无法将 Riders 布尔值设置为正确的值。根据我的说法，这似乎是应该顺利运行的简单代码？请帮忙。抱歉，这是我的第一篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:51:01.203

```
...   
r.name=fileread.next();
System.out.println(r.name);
if(fileread.next().equals("Y"))
... 
```

您`fileread.next()`在循环中使用了两次。

将第二个更改为

```
if(r.name.equals("Y")) 
```

# php - 当使用 PHP 的 crypt() 函数创建 bcrypt 哈希时，我需要盐吗？

> ID：13794701
> 
> 赞同：2
> 
> 时间：2012-12-10T03:43:58.083
> 
> 标签：php, hash, passwords, cryptography, bcrypt

我知道 PHP 的 crypt() 函数是这样工作的：

```
crypt($password,$salt); 
```

创建 bcrypt 哈希（被认为非常安全）的格式是：

```
crypt("$2y$15$password",$salt); 
```

其中$2y指定使用bcrypt，15为轮数，应在10以上。

这是我的问题。跑步：

```
crypt("$2y$15$password"); 
```

据我了解，生成一个不错的大随机盐并将其添加到哈希中，并且在比较密码时，它会自动提取。这意味着我不必在我的表中有一个盐字段，或者独立生成一个盐。这是安全和正确的吗？

例如，当我运行时：

```
$test = "Hello";
echo crypt("$2y$15$test") . "\n"; 
```

我得到：

```
 $6$R59d/nemygl0$/Gk6s57K2eFAkH4BWDGYhfdhbYGcqz.GRbD7qGDKOlhE5Lk.kgCoGQo/sDCCf1VDffdh7jtXPn/9rsexwrpFk1 
```

其中前 6 位指代某个算法编号，两个 $ 之间的下一位是盐，之后的位是哈希。这个对吗？

另外，将此哈希与另一个哈希进行比较以进行验证的语法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:04:43.477

我认为您使用的 crypt 使用 SHA-512。

您可能忘记在 crypt() 中将 $test 作为参数传递。

根据 php[文档](http://php.net/manual/en/function.crypt.php)，您应该将密码作为第一个参数（不带任何前缀）传递，然后将盐作为第二个参数传递，并带有 $2y$15 前缀和 22 个字符的盐。例如

```
crypt('rasmuslerdorf', '$2a$07$usesomesillystringforsalt$'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:38:03.900

该函数`crypt()`应该像这样使用：

```
$hashvalue = crypt($password, $cryptParams); 
```

而盐必须由您自己生成，并且是 $cryptParams 的一部分。

```
$bcryptAlgo = '$2y';
$cost = '$15';
$salt = '$' . functionThatGenerates22CharRandomSalt();
$cryptParams = $bcryptAlgo . $cost . $salt; 
```

困难之一是生成有效的、独特的和不可预测的盐。您可以做的最好的事情是从操作系统随机源中读取。

PHP 5.5 将拥有自己的功能`password_hash()`并`password_verify()`准备就绪，以简化此任务。我强烈推荐使用这个优秀的 api，还有一个[兼容包](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)可用于早期的 PHP 版本。如果您想了解更多关于如何使用 crypt 的信息，请查看这篇[文章](http://www.martinstoeckli.ch/php/php.html#bcrypt)。

你的成本参数 15 是相当高的，如果你能负担得起这么多的时间就使用它，但是今天 10 的数字是可以的。

# css - 与 CSS 同步加载字体

> ID：13794703
> 
> 赞同：2
> 
> 时间：2012-12-10T03:44:35.523
> 
> 标签：css, performance, fonts, font-face

我注意到，当我的网页加载时，首先加载所有 CSS 文件，然后是所有这些完成后的字体。有没有办法让字体与样式表同时开始加载？

我正在使用带有网址的@font-face。在样式表中编码字体会解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:08:01.880

我还没有经历过你的这种情况..我喜欢在我的网页上使用嵌入式字体..我想分享我所做的，因为我看到了让它们在网页加载时同步..我有一个font.css，我在其中嵌入了我需要的所有字体，如下所示：

```
@charset "utf-8";
/* CSS Document for Fonts :)*/

@font-face{ 
font-family: trajan;
src:url(../fonts/TrajanPro-Regular.otf);
} 
```

并且 url 驻留在网络应用程序内的目录中..我只是将它链接到网页然后直接在其他 css 上使用定义的字体..希望我明白你的意思并解释了正确的事情..谢谢

# css - CSS 优先级和媒体查询

> ID：13794705
> 
> 赞同：3
> 
> 时间：2012-12-10T03:44:51.670
> 
> 标签：css, sass, media-queries

我`.cssClass`包含：

```
// fallback without calc
width: 60%; 
@media (max-width: 500px) { width: 58%; }
@media (max-width: 460px) { width: 55%; }
@media (max-width: 420px) { width: 50%; }
@media (max-width: 380px) { width: 45%; }
@media (max-width: 340px) { width: 40%; }
// using calc
width: -webkit-calc(70% - (34px + 1.12em));
width: -moz-calc(70% - (34px + 1.12em));
width: -ms-calc(70% - (34px + 1.12em));
width: -o-calc(70% - (34px + 1.12em));
width: calc(70% - (34px + 1.12em)); 
```

所以如果浏览器支持`calc`, 它将替换之前定义的宽度 (60%) 并使用该`calc`方法。

但是，它在调整大小时仍然使用媒体查询，用查询值替换 calc 值。

我在不支持 calc 的浏览器中得到了很好的结果，因为它只是省略了所有这些东西，但是支持 calc 的浏览器会获得与后备查询混合的 calc 结果。

我该怎么办？如果没有计算支持，我只希望媒体查询运行。

我正在寻找不涉及 JavaScript 的解决方案或其他方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:13:44.593

SASS 将对嵌套属性进行排序以使媒体查询最后。

以下是发生的一些示例：

**SCSS**

```
body {
    background: #000000; //black

    @media (max-width: 500px) { 
        background: #990000; //red
    }

    background: #000099; //blue

    @media (max-width: 300px) { 
        background: #009900; //green
    }
} 
```

**输出 CSS**

```
body {
    background:#000;
    background:#009
}
@media (max-width: 500px) {
    body {
        background:#900
    }
}
@media (max-width: 300px) {
    body {
        background:#090
    }
} 
```

**[演示](http://jsfiddle.net/urEDA/)**

您可以做的是放入第二个嵌套来操纵排序顺序：

**SCSS**

```
body {
    background: #000000; //black

    @media (max-width: 500px) { 
        background: #990000; //red
    }

}
body {
    background: #000099; //blue

    @media (max-width: 300px) { 
        background: #009900; //green
    }
} 
```

**输出 CSS**

```
body {
    background:#000
}
@media (max-width: 500px) {
    body {
        background:#900
    }
}
body {
    background:#009
}
@media (max-width: 300px) {
    body {
        background:#090
    }
} 
```

**[演示](http://jsfiddle.net/urEDA/1/)**

所以你可以用你的代码做到这一点，它应该按正确的顺序排序：

**SCSS**

```
.cssClass {
    // fallback without calc
    width: 60%; 
    @media (max-width: 500px) { width: 58%; }
    @media (max-width: 460px) { width: 55%; }
    @media (max-width: 420px) { width: 50%; }
    @media (max-width: 380px) { width: 45%; }
    @media (max-width: 340px) { width: 40%; }
}
.cssClass {
    // using calc
    width: -webkit-calc(70% - (34px + 1.12em));
    width: -moz-calc(70% - (34px + 1.12em));
    width: -ms-calc(70% - (34px + 1.12em));
    width: -o-calc(70% - (34px + 1.12em));
    width: calc(70% - (34px + 1.12em));
} 
```

# ruby - ruby 正则表达式查看是否只有数字

> ID：13794707
> 
> 赞同：4
> 
> 时间：2012-12-10T03:45:10.913
> 
> 标签：ruby, regex

我想要一个 reqex 来检查每个字符是否为数字 [0-9]+。我试过了：

```
'4th'=~/[\d]+/
'4th'=~/\d+/ 
```

但不工作。我将如何检查这个？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T03:56:31.433

最简单的方法是：

```
str !~ /\D/ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T03:49:50.100

```
"12345" =~ /\A\d+\Z/ 
```

*   \A = 字符串开头（不是行，字符串）
*   \d+ = 一位或多位数字
*   \Z = 字符串结尾（不是行，字符串）

# validation - 验证方法收到的日期值已更改

> ID：13794709
> 
> 赞同：0
> 
> 时间：2012-12-10T03:45:16.863
> 
> 标签：validation, jsf-2

我几乎完成了一个动态构建字段并使用正则表达式设置数据类型验证的页面，但在周五我开始将字段绑定到实际数据类型而不仅仅是字符串时遇到了一个问题。问题在于与日期（java.util.Date）相关的值！

在测试页面和验证时，我正在使用日期填充日期字段，例如 2012 年 12 月 12 日。当它到达验证方法时，它显示为 Tue Dec 11 19:00:00 EST 2012。显示的日期总是提前一天 @ 19:00:00 并且格式完全不同。

我该怎么做才能以我指定的格式发送日期？

...还...

关于为什么日期值也不正确的任何想法？

**在页面上构建日期字段：**

```
<h:inputText id="inputField2" tabindex="#{field.fieldDefinition.fieldOrder}" value="#{field.val}"  validator="#{field.fieldDefinition.validate}" validatorMessage="#{field.fieldDefinition.validationMessage}">
    <f:convertDateTime pattern="MM/dd/yyyy" />
</h:inputText> 
```

**被调用的验证方法：**

```
public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException { 
    if (getDataType() != null && getDataType().getValidationExpression() != "") {
        regexValidator = new RegexValidator(); 
        regexValidator.setPattern(getDataType().getValidationExpression()); 
        regexValidator.validate(context, component, value); 
    } 
} 
```

一如既往...感谢您的帮助。

问候，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:10:04.683

正则表达式验证器接受 a `String`，而不是 a `Date`。摆脱那个验证器，你根本不需要它`Date`。如果输入格式无效，则您已经收到了转换错误，`<f:convertDateTime>`并且验证器将永远不会被命中。

至于为什么格式不同，那只是 的默认格式[`Date#toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)，另见[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)。当您执行`System.out.println(date)`. 但是，如果您摆脱了验证器，则无需担心这一点。

至于为什么提前一天，那只是因为 JSF 默认使用 GMT 时区，但`Date#toString()`默认使用系统平台默认时区，另请参见[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)。但是，如果您摆脱了验证器，则无需担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:49:36.463

您应该在 中设置时区，`<f:convertDateTime />`查看这篇文章了解更多详细信息： [f:convertDateTime 显示错误的日期](https://stackoverflow.com/questions/2689245/fconvertdatetime-displays-wrong-date)

# html - CSS重叠问题

> ID：13794713
> 
> 赞同：0
> 
> 时间：2012-12-10T03:45:53.190
> 
> 标签：html, css

嗨，我有一个 css 问题，因为当用户未正确填写文本框内容时，在联系我们框下方会出现一条错误消息，但它与联系我们框下方的图像有重叠问题。![在此处输入图像描述](../Images/b374fb08d4bad2dd86139066f8df0abb.png)

![在此处输入图像描述](../Images/ed0000535e2334a82cdb7a33ae58867f.png)

盒子展开时如何防止图像移动？

联系我们表格css如下

```
#contactusbox {
padding: 5px;
width: 310px;
height: auto;
float: right;
margin-top: 292px;
background-color: #E2E2E2;
border: 1px solid #B2B8B8;
overflow: hidden;
position: relative;
font-family: 'Open Sans',sans-serif;
font-size: 16px;
color: #333;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:20:58.630

将位置更改`position: relative;`为`position: absolute;`

# garbage-collection - JVM 中的主要 GC 问题

> ID：13794716
> 
> 赞同：0
> 
> 时间：2012-12-10T03:46:35.317
> 
> 标签：garbage-collection, jvm

JVM堆分为两个空间，老年代空间和年轻代空间。在major GC之后，在compact/sweep过程之后，老年代会有释放空间，我想知道我们在major GC时得到的空闲空间是否仍然属于老年代空间，或者老年代的空闲空间可以移动到空间中年轻一代？

换句话说，我问的是老年代空间和年轻一代空间是否有固定的大小/边界。

提前谢谢， 林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T06:38:21.733

我认为这是每一代之间的界限，但有些代的大小可能是可变的，`-Xmx`而且`-Xms`不一样。

何时收集对象，垃圾收集将对象使用的空间标记为可用。

它看起来像删除磁盘上的文件。操作系统只是将文件路径标记为不可访问，并使空间可用于下一次存储。

世代喜欢磁盘分区，但世代可以减少或增加他们的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T07:34:33.113

在热点中，有一些选项

```
-XX:+UseAdaptiveSizePolicy
-XX:+UseAdaptiveGCBoundary 
```

然而，这仍然可以被虚拟机忽略。它是黑暗自动调整魔法的一部分。为简单起见，只假设老幼之间的划分是固定的。同样适用于伊甸园和幸存者。

# c - strtok 中的可变长度

> ID：13794720
> 
> 赞同：1
> 
> 时间：2012-12-10T03:46:55.023
> 
> 标签：c, strtok

我看过一些例子并试图做一些事情，但现在我被卡住了。

工作代码是

```
 char quality[5][10];
    char * qualities;
    qualities = strtok (message, "\n");
    int k = 0;
    while (qualities != NULL){
        if (k == 0) {
            strcpy(quality[0], qualities);
        }
        else if ( k == 1) {
            strcpy(quality[1], qualities);
        }
        else if ( k == 2) {
            strcpy(quality[2], qualities);
        }
        else if ( k == 3) {
            strcpy(quality[3], qualities);
        }
        else if ( k == 4) {
            strcpy(quality[4], qualities);
        }           
        qualities = strtok (NULL, "\n");
        k++;
    } 
```

然而，这适用于固定长度（在这种情况下只有 5），但是我想将一个变量分配给质量变量，但在这种情况下，while 循环将不起作用。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:55:13.970

替换此块

```
if (k == 0) {
        strcpy(quality[0], qualities);
} else if ( k == 1) {
    strcpy(quality[1], qualities);
} else if ( k == 2) {
    strcpy(quality[2], qualities);
} else if ( k == 3) {
    strcpy(quality[3], qualities);
} else if ( k == 4) {
    strcpy(quality[4], qualities);
}
qualities = strtok (NULL, "\n");
k++; 
```

用这两行：

```
strcpy(quality[k++], qualities);
qualities = strtok (NULL, "\n"); 
```

这是一个等价的代码，但它适用于任意数量的项目，最多为`quality`数组中的元素数量。

由于元素的数量是固定的，你应该改变

```
while (qualities != NULL) 
```

到

```
while (k < N && qualities != NULL) 
```

其中`N`是 中的元素个数`qualities`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:54:41.320

您将能够使用以下代码有效地模仿当前循环（但具有动态长度）：

```
while (qualities != NULL){
    if(k<sizeOfYouArray)
        strcpy(quality[k], qualities);           
    qualities = strtok (NULL, "\n");
    k++;
} 
```

本质上，不是检查每个单独的值`k`并采取相应的行动，循环应该继续调用`strcpy`直到`k`大于`sizeOfYourArray`（类似于如果`sizeOfYourArray`设置为 5-`strcopy`将不再调用当前代码的行为）。

从长远来看，这可能不是您的程序最有效或最有效的解决方案（`for`如果我正确理解您的代码，循环可能会更好地运行），但这将是所需的最低限度的更改。

# batch-file - 使用批处理文件压缩

> ID：13794730
> 
> 赞同：3
> 
> 时间：2012-12-10T03:48:04.690
> 
> 标签：batch-file, zip

我需要为使用批处理解压缩文件创造条件。

方法如下：如果 dummy=1，批处理会将一个 xlsx 文件解压缩到特定文件夹，否则，它将另一个 xlsx 文件直接复制到该文件夹​​。

我的代码如下：

```
set dummy=1

If %dummy% EQU 1 (
SET CHEMIN=C:\file_to_unzip
cd %CHEMIN%
for /f %%j in ('dir /b %CHEMIN%\*.zip') do (
C:\PROGRA~1\WinZip\Winzip32 -min -e -o -j %CHEMIN%\%%j %CHEMIN%
) 
COPY "C:\file_to_unzip\*.xlsx" "C:\destination" 
) else (
COPY "C:\file_to_copy\*.xlsx" "C:\destination"
) 
```

问题是如果没有 IF 条件，解压缩命令将正常工作。但是一旦包含了 IF 条件，cmd 就会说找不到 zip 文件。我不确定是什么导致了这个问题以及如何解决这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:11:25.453

您是否启用了延迟扩展？`setlocal enabledelayedexpansion` 使用上面的示例代码，由于在 if 语句中设置了 CHEMIN 变量，将发生故障。如果在括号范围内设置变量，则为该变量设置的新值将不可用，直到所有子范围结束。运行以下脚本以了解我的意思：

```
@echo off
set "xValue=1"
echo.%xValue%
if 1 EQU 1 (
    set "xValue=2"
    echo.%xValue%
    echo.!xValue!
) 
```

如果延迟扩展被禁用（默认情况下），结果将是

```
1
1
1 
```

如果启用，则`setlocal enabledelayedexpansion`在开头添加

```
1
1
2 
```

按如下方式尝试您的脚本。使用

```
setlocal enabledelayedexpansion

set dummy=1

If %dummy% EQU 1 (
    SET CHEMIN=C:\file_to_unzip
    cd !CHEMIN!
    for /f %%j in ('dir /b !CHEMIN!\*.zip') do (
        C:\PROGRA~1\WinZip\Winzip32 -min -e -o -j !CHEMIN!\%%j !CHEMIN!
    )
    COPY "C:\file_to_unzip\*.xlsx" "C:\destination" 
) else (
    COPY "C:\file_to_copy\*.xlsx" "C:\destination"
) 
```

另一种解决方案是将`set CHEMIN=C:\file_to_unzip`行移到 if 语句之外。

# java - 在主视图中动态包含一个 jsp 文件

> ID：13794746
> 
> 赞同：0
> 
> 时间：2012-12-10T03:50:47.780
> 
> 标签：java, jsp

我尝试包含“home.jsp”文件或“error.jsp”文件。这是我的 servlet 文件和模板：

// 小服务程序

```
...
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{

            // api access
        Api apix  = new Api(new ApiRequest(-1));

        // post params
        String email = request.getParameter("email");
        String password = request.getParameter("password");

        // exists?
        User user =  apix.userManager.authenticate(email, password);

        // template
        String address = "/main.jsp";

                // variable content
        String content_page = "/WEB-INF/user/home.jsp";

        if (user == null)
        {
            content_page = "/error.jsp";
        }

        request.setAttribute("content_page", content_page);
        RequestDispatcher dispatcher = request.getRequestDispatcher(address);

        dispatcher.forward(request, response);

} 
```

// main.jsp

```
<head>
    <jsp:include page="/head_includes.jsp"/>
</head>

<body>

    <% 
        String content_page = request.getParameter("content_page");

        if (content_page == null)
        {
            content_page = "/error.html";
        }

    %>

            <!-- I get an error here -->
            **<jsp:include page="<%= content_page %>">**
</body> 
```

我在 Eclipse 上收到此错误：

```
org.apache.jasper.JasperException: /main.jsp (line: 29, column: 1) Expecting "jsp:param" standard action with "name" and "value" attributes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:53:50.420

错误很明显。

`main.jsp`期待您必须传递的参数

使用`jsp:param`或`querystring main.jsp?name=value`

# php - 数据库查询后增量计数器的可预测随机重复

> ID：13794749
> 
> 赞同：0
> 
> 时间：2012-12-10T03:51:01.033
> 
> 标签：php, mysql, zend-framework, redbean

前言：我正在使用 Zend Framework 1.12 和 RedBean PHP。

下面的函数查询表以查看是否存在任何条目。如果为真，它会从文件名中删除数值，增加它，然后返回它。很简单。如果不存在条目，则从 1 开始。同样，基本的。这一切都按预期工作，除了 2 个可预测的随机时刻。我说可预见的随机是因为我已经成功地多次复制了这个问题，每次结果都相似，但又不同。

可预测的部分是，当计数器小于 10 时，数值似乎会重复两次（10 次重复中的 1 次除外）。我可以继续增加函数，直到计数器达到 60，而无需进一步欺骗。也没有重复数字的模式。

下面是使用 ZF 和 RedBean 的函数，然后是输出。

```
 public function getNextOrderFormNumber() {      
    $orderFormNumber = R::getCell( 'select orderFormFilename from orders_manufOrderForms order by dateCreated desc limit 1' );

    // if an entry exits
    // the result will be like 'mmOrderForm-1.pdf'
    if($orderFormNumber){
        $num = explode('.', substr($orderFormNumber, 12));
        $this->orderFormNumber = $num[0];
    }

    Zend_Debug::dump($orderFormNumber, 'DB');
    Zend_Debug::dump($this->orderFormNumber, 'Current Number');
    Zend_Debug::dump( date('i:s') );

    // start at 1 for first order, else increment the value
    if(!$this->orderFormNumber) {
        $this->orderFormNumber = 1;
    } else {
        $this->orderFormNumber++;
    }

    Zend_Debug::dump($this->orderFormNumber, 'newOrderNumber');
    return $this->orderFormNumber;
} 
```

如果您仍在关注，我在其中有几个 ZF 转储以仔细检查输出以验证实际发生的情况。我还添加了一个时间戳，因为无论出于何种原因，我都认为这是一个时间问题，例如脚本滞后，但似乎并非如此。我还应该补充一点，它不仅仅是一个随机重复，因为某些东西被卡住了，它实际上是在执行一个调用，而只是覆盖了以前的值。

```
DB array(0) {
}
Current Number NULL
string(5) "26:29"
newOrderNumber int(1)
filename to save as string(17) "mmOrderForm-1.pdf"
--
DB string(17) "mmOrderForm-1.pdf"
Current Number string(1) "1"
string(5) "26:30"
newOrderNumber int(2)
filename to save as string(17) "mmOrderForm-2.pdf"
--
DB string(17) "mmOrderForm-2.pdf"
Current Number string(1) "2"
string(5) "26:31"
newOrderNumber int(3)
filename to save as string(17) "mmOrderForm-3.pdf"
--
DB string(17) "mmOrderForm-2.pdf"
Current Number string(1) "2"
string(5) "26:31"
newOrderNumber int(3)
filename to save as string(17) "mmOrderForm-3.pdf" <-- first occurrence
--
DB string(17) "mmOrderForm-3.pdf"
Current Number string(1) "3"
string(5) "26:32"
newOrderNumber int(4)
filename to save as string(17) "mmOrderForm-4.pdf"
--
DB string(17) "mmOrderForm-4.pdf"
Current Number string(1) "4"
string(5) "27:36"
newOrderNumber int(5)
filename to save as string(17) "mmOrderForm-5.pdf"
--
DB string(17) "mmOrderForm-5.pdf"
Current Number string(1) "5"
string(5) "27:37"
newOrderNumber int(6)
filename to save as string(17) "mmOrderForm-6.pdf"
--
DB string(17) "mmOrderForm-6.pdf"
Current Number string(1) "6"
string(5) "27:38"
newOrderNumber int(7)
filename to save as string(17) "mmOrderForm-7.pdf"
--
DB string(17) "mmOrderForm-7.pdf"
Current Number string(1) "7"
string(5) "27:39"
newOrderNumber int(8)
filename to save as string(17) "mmOrderForm-8.pdf"
--
DB string(17) "mmOrderForm-7.pdf"
Current Number string(1) "7"
string(5) "27:39"
newOrderNumber int(8)
filename to save as string(17) "mmOrderForm-8.pdf" <-- second occurrence 
```

TL;DR：这似乎不适合这里的任何其他问题。感觉像是一件非常随机的事情或非常明显的事情，我只是没有看到它。（可能是最糟糕的 tr；博士，对不起）

真诚地……难住了。

# oracle - Oracle BI Publisher 中的电子邮件附件？

> ID：13794752
> 
> 赞同：0
> 
> 时间：2012-12-10T03:51:42.687
> 
> 标签：oracle, bi-publisher

BI Publisher（Oracle Business Intelligence Publisher 版本 10.1.3.4）中的发送按钮会将生成的报告发送到电子邮件正文中。我们必须手动输入电子邮件参数，如 to、cc 等。

有没有办法我们可以在这里附加一个文件说pdf（不爆裂）？我相信我们可以通过爆破来爆破附件。请告诉我是否有任何其他方式，我们可以在将报告作为电子邮件发送时附加文件，方法是单击**发送按钮**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:00:21.120

不要使用`Send`. 您可以运行报告并将其作为电子邮件附件发送。为了做到这一点，`Schedule`当您在报告中时，请单击右上角的链接。

![在此处输入图像描述](../Images/4f9a431c52d80349519b5fab3950663e.png)

这将带您到一个页面，`Time`您可以在该部分（见下文）中立即运行或安排它每天/每周/每月自动运行，然后在该`Delivery`部分中指定您的收件人、抄送、主题等，然后单击“提交”。

![在此处输入图像描述](../Images/352a00ce56d8d6eec7d57579ab868f07.png)

这样，您的报告将根据您的模板类型作为附件通过电子邮件发送（即，如果您的模板为 rtf，则为 PDF，如果您的模板为 Excel，则为 Excel）

# python - 使用 SciPy 的逻辑回归

> ID：13794754
> 
> 赞同：8
> 
> 时间：2012-12-10T03:52:05.947
> 
> 标签：python, numpy, machine-learning, scipy

我正在尝试使用 SciPy`fmin_bfgs`函数在 Python 中编写逻辑回归，但遇到了一些问题。我为逻辑（sigmoid）转换函数和成本函数编写了函数，这些函数工作正常（我已经使用通过罐装软件找到的参数向量的优化值来测试函数，并且它们匹配）。我不太确定渐变函数的实现，但它看起来很合理。

这是代码：

```
# purpose: logistic regression 
import numpy as np
import scipy.optimize

# prepare the data
data = np.loadtxt('data.csv', delimiter=',', skiprows=1)
vY = data[:, 0]
mX = data[:, 1:]
intercept = np.ones(mX.shape[0]).reshape(mX.shape[0], 1)
mX = np.concatenate((intercept, mX), axis = 1)
iK = mX.shape[1]
iN = mX.shape[0]

# logistic transformation
def logit(mX, vBeta):
    return((1/(1.0 + np.exp(-np.dot(mX, vBeta)))))

# test function call
vBeta0 = np.array([-.10296645, -.0332327, -.01209484, .44626211, .92554137, .53973828, 
    1.7993371, .7148045  ])
logit(mX, vBeta0)

# cost function
def logLikelihoodLogit(vBeta, mX, vY):
    return(-(np.sum(vY*np.log(logit(mX, vBeta)) + (1-vY)*(np.log(1-logit(mX, vBeta))))))
logLikelihoodLogit(vBeta0, mX, vY) # test function call

# gradient function
def likelihoodScore(vBeta, mX, vY):
    return(np.dot(mX.T, 
                  ((np.dot(mX, vBeta) - vY)/
                   np.dot(mX, vBeta)).reshape(iN, 1)).reshape(iK, 1))

likelihoodScore(vBeta0, mX, vY).shape # test function call

# optimize the function (without gradient)
optimLogit = scipy.optimize.fmin_bfgs(logLikelihoodLogit, 
                                  x0 = np.array([-.1, -.03, -.01, .44, .92, .53,
                                            1.8, .71]), 
                                  args = (mX, vY), gtol = 1e-3)

# optimize the function (with gradient)
optimLogit = scipy.optimize.fmin_bfgs(logLikelihoodLogit, 
                                  x0 = np.array([-.1, -.03, -.01, .44, .92, .53,
                                            1.8, .71]), fprime = likelihoodScore, 
                                  args = (mX, vY), gtol = 1e-3) 
```

*   第一个优化（没有梯度）以大量关于除以零的内容结束。

*   第二次优化（使用梯度）以矩阵未对齐错误结束，这可能意味着我得到了错误返回梯度的方式。

对此的任何帮助表示赞赏。如果有人想试试这个，数据包含在下面。

```
low,age,lwt,race,smoke,ptl,ht,ui
0,19,182,2,0,0,0,1
0,33,155,3,0,0,0,0
0,20,105,1,1,0,0,0
0,21,108,1,1,0,0,1
0,18,107,1,1,0,0,1
0,21,124,3,0,0,0,0
0,22,118,1,0,0,0,0
0,17,103,3,0,0,0,0
0,29,123,1,1,0,0,0
0,26,113,1,1,0,0,0
0,19,95,3,0,0,0,0
0,19,150,3,0,0,0,0
0,22,95,3,0,0,1,0
0,30,107,3,0,1,0,1
0,18,100,1,1,0,0,0
0,18,100,1,1,0,0,0
0,15,98,2,0,0,0,0
0,25,118,1,1,0,0,0
0,20,120,3,0,0,0,1
0,28,120,1,1,0,0,0
0,32,121,3,0,0,0,0
0,31,100,1,0,0,0,1
0,36,202,1,0,0,0,0
0,28,120,3,0,0,0,0
0,25,120,3,0,0,0,1
0,28,167,1,0,0,0,0
0,17,122,1,1,0,0,0
0,29,150,1,0,0,0,0
0,26,168,2,1,0,0,0
0,17,113,2,0,0,0,0
0,17,113,2,0,0,0,0
0,24,90,1,1,1,0,0
0,35,121,2,1,1,0,0
0,25,155,1,0,0,0,0
0,25,125,2,0,0,0,0
0,29,140,1,1,0,0,0
0,19,138,1,1,0,0,0
0,27,124,1,1,0,0,0
0,31,215,1,1,0,0,0
0,33,109,1,1,0,0,0
0,21,185,2,1,0,0,0
0,19,189,1,0,0,0,0
0,23,130,2,0,0,0,0
0,21,160,1,0,0,0,0
0,18,90,1,1,0,0,1
0,18,90,1,1,0,0,1
0,32,132,1,0,0,0,0
0,19,132,3,0,0,0,0
0,24,115,1,0,0,0,0
0,22,85,3,1,0,0,0
0,22,120,1,0,0,1,0
0,23,128,3,0,0,0,0
0,22,130,1,1,0,0,0
0,30,95,1,1,0,0,0
0,19,115,3,0,0,0,0
0,16,110,3,0,0,0,0
0,21,110,3,1,0,0,1
0,30,153,3,0,0,0,0
0,20,103,3,0,0,0,0
0,17,119,3,0,0,0,0
0,17,119,3,0,0,0,0
0,23,119,3,0,0,0,0
0,24,110,3,0,0,0,0
0,28,140,1,0,0,0,0
0,26,133,3,1,2,0,0
0,20,169,3,0,1,0,1
0,24,115,3,0,0,0,0
0,28,250,3,1,0,0,0
0,20,141,1,0,2,0,1
0,22,158,2,0,1,0,0
0,22,112,1,1,2,0,0
0,31,150,3,1,0,0,0
0,23,115,3,1,0,0,0
0,16,112,2,0,0,0,0
0,16,135,1,1,0,0,0
0,18,229,2,0,0,0,0
0,25,140,1,0,0,0,0
0,32,134,1,1,1,0,0
0,20,121,2,1,0,0,0
0,23,190,1,0,0,0,0
0,22,131,1,0,0,0,0
0,32,170,1,0,0,0,0
0,30,110,3,0,0,0,0
0,20,127,3,0,0,0,0
0,23,123,3,0,0,0,0
0,17,120,3,1,0,0,0
0,19,105,3,0,0,0,0
0,23,130,1,0,0,0,0
0,36,175,1,0,0,0,0
0,22,125,1,0,0,0,0
0,24,133,1,0,0,0,0
0,21,134,3,0,0,0,0
0,19,235,1,1,0,1,0
0,25,95,1,1,3,0,1
0,16,135,1,1,0,0,0
0,29,135,1,0,0,0,0
0,29,154,1,0,0,0,0
0,19,147,1,1,0,0,0
0,19,147,1,1,0,0,0
0,30,137,1,0,0,0,0
0,24,110,1,0,0,0,0
0,19,184,1,1,0,1,0
0,24,110,3,0,1,0,0
0,23,110,1,0,0,0,0
0,20,120,3,0,0,0,0
0,25,241,2,0,0,1,0
0,30,112,1,0,0,0,0
0,22,169,1,0,0,0,0
0,18,120,1,1,0,0,0
0,16,170,2,0,0,0,0
0,32,186,1,0,0,0,0
0,18,120,3,0,0,0,0
0,29,130,1,1,0,0,0
0,33,117,1,0,0,0,1
0,20,170,1,1,0,0,0
0,28,134,3,0,0,0,0
0,14,135,1,0,0,0,0
0,28,130,3,0,0,0,0
0,25,120,1,0,0,0,0
0,16,95,3,0,0,0,0
0,20,158,1,0,0,0,0
0,26,160,3,0,0,0,0
0,21,115,1,0,0,0,0
0,22,129,1,0,0,0,0
0,25,130,1,0,0,0,0
0,31,120,1,0,0,0,0
0,35,170,1,0,1,0,0
0,19,120,1,1,0,0,0
0,24,116,1,0,0,0,0
0,45,123,1,0,0,0,0
1,28,120,3,1,1,0,1
1,29,130,1,0,0,0,1
1,34,187,2,1,0,1,0
1,25,105,3,0,1,1,0
1,25,85,3,0,0,0,1
1,27,150,3,0,0,0,0
1,23,97,3,0,0,0,1
1,24,128,2,0,1,0,0
1,24,132,3,0,0,1,0
1,21,165,1,1,0,1,0
1,32,105,1,1,0,0,0
1,19,91,1,1,2,0,1
1,25,115,3,0,0,0,0
1,16,130,3,0,0,0,0
1,25,92,1,1,0,0,0
1,20,150,1,1,0,0,0
1,21,200,2,0,0,0,1
1,24,155,1,1,1,0,0
1,21,103,3,0,0,0,0
1,20,125,3,0,0,0,1
1,25,89,3,0,2,0,0
1,19,102,1,0,0,0,0
1,19,112,1,1,0,0,1
1,26,117,1,1,1,0,0
1,24,138,1,0,0,0,0
1,17,130,3,1,1,0,1
1,20,120,2,1,0,0,0
1,22,130,1,1,1,0,1
1,27,130,2,0,0,0,1
1,20,80,3,1,0,0,1
1,17,110,1,1,0,0,0
1,25,105,3,0,1,0,0
1,20,109,3,0,0,0,0
1,18,148,3,0,0,0,0
1,18,110,2,1,1,0,0
1,20,121,1,1,1,0,1
1,21,100,3,0,1,0,0
1,26,96,3,0,0,0,0
1,31,102,1,1,1,0,0
1,15,110,1,0,0,0,0
1,23,187,2,1,0,0,0
1,20,122,2,1,0,0,0
1,24,105,2,1,0,0,0
1,15,115,3,0,0,0,1
1,23,120,3,0,0,0,0
1,30,142,1,1,1,0,0
1,22,130,1,1,0,0,0
1,17,120,1,1,0,0,0
1,23,110,1,1,1,0,0
1,17,120,2,0,0,0,0
1,26,154,3,0,1,1,0
1,20,106,3,0,0,0,0
1,26,190,1,1,0,0,0
1,14,101,3,1,1,0,0
1,28,95,1,1,0,0,0
1,14,100,3,0,0,0,0
1,23,94,3,1,0,0,0
1,17,142,2,0,0,1,0
1,21,130,1,1,0,1,0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:34:41.387

您的问题是您试图最小化的函数`logLikelihoodLogit`, 将返回`NaN`非常接近您的初始估计值的值。并且它还会尝试评估负对数并遇到​​其他问题。`fmin_bfgs`不知道这一点，将尝试评估这些值的函数并遇到麻烦。

我建议改用有界优化。您可以为此使用 scipy [`optimize.fmin_l_bfgs_b`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_l_bfgs_b.html)。它使用与 类似的算法`fmin_bfgs`，但它支持参数空间中的界限。类似地调用它，只需添加一个 bounds 关键字。这是一个关于如何调用的简单示例`fmin_l_bfgs_b`：

```
from scipy.optimize import fmin_bfgs, fmin_l_bfgs_b

# list of bounds: each item is a tuple with the (lower, upper) bounds
bd = [(0, 1.), ...] 

test = fmin_l_bfgs_b(logLikelihoodLogit, x0=x0, args=(mX, vY), bounds=bd,
                      approx_grad=True) 
```

在这里，我使用了一个近似梯度（似乎可以很好地处理您的数据），但是您可以`fprime`像在您的示例中一样通过（我没有时间检查它的正确性）。您会比我更了解您的参数空间，只需确保为您的参数可以采用的所有有意义的值构建边界数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T03:01:24.980

这是[我发回 SciPy 列表的答案](http://mail.scipy.org/pipermail/scipy-user/2012-December/033796.html)，这个问题被交叉发布。感谢@tiago 的回答。基本上，我重新参数化了似然函数。此外，添加了对 check_grad 函数的调用。

```
#=====================================================
# purpose: logistic regression 
import numpy as np
import scipy as sp
import scipy.optimize

import matplotlib as mpl
import os

# prepare the data
data = np.loadtxt('data.csv', delimiter=',', skiprows=1)
vY = data[:, 0]
mX = data[:, 1:]
# mX = (mX - np.mean(mX))/np.std(mX)  # standardize the data; if required

intercept = np.ones(mX.shape[0]).reshape(mX.shape[0], 1)
mX = np.concatenate((intercept, mX), axis = 1)
iK = mX.shape[1]
iN = mX.shape[0]

# logistic transformation
def logit(mX, vBeta):
    return((np.exp(np.dot(mX, vBeta))/(1.0 + np.exp(np.dot(mX, vBeta)))))

# test function call
vBeta0 = np.array([-.10296645, -.0332327, -.01209484, .44626211, .92554137, .53973828, 
    1.7993371, .7148045  ])
logit(mX, vBeta0)

# cost function
def logLikelihoodLogit(vBeta, mX, vY):
    return(-(np.sum(vY*np.log(logit(mX, vBeta)) + (1-vY)*(np.log(1-logit(mX, vBeta))))))
logLikelihoodLogit(vBeta0, mX, vY) # test function call

# different parametrization of the cost function
def logLikelihoodLogitVerbose(vBeta, mX, vY):
    return(-(np.sum(vY*(np.dot(mX, vBeta) - np.log((1.0 + np.exp(np.dot(mX, vBeta))))) +
                    (1-vY)*(-np.log((1.0 + np.exp(np.dot(mX, vBeta))))))))
logLikelihoodLogitVerbose(vBeta0, mX, vY)  # test function call

# gradient function
def likelihoodScore(vBeta, mX, vY):
    return(np.dot(mX.T, 
                  (logit(mX, vBeta) - vY)))
likelihoodScore(vBeta0, mX, vY).shape # test function call
sp.optimize.check_grad(logLikelihoodLogitVerbose, likelihoodScore, 
                       vBeta0, mX, vY)  # check that the analytical gradient is close to 
                                                # numerical gradient

# optimize the function (without gradient)
optimLogit = scipy.optimize.fmin_bfgs(logLikelihoodLogitVerbose, 
                                  x0 = np.array([-.1, -.03, -.01, .44, .92, .53,
                                            1.8, .71]), 
                                  args = (mX, vY), gtol = 1e-3)

# optimize the function (with gradient)
optimLogit = scipy.optimize.fmin_bfgs(logLikelihoodLogitVerbose, 
                                  x0 = np.array([-.1, -.03, -.01, .44, .92, .53,
                                            1.8, .71]), fprime = likelihoodScore, 
                                  args = (mX, vY), gtol = 1e-3)
#===================================================== 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-22T09:58:38.943

我也面临同样的问题。当我在 scipy.optimize.minimize 中尝试不同的算法实现时，我发现对于为我的数据集找到最佳逻辑回归参数，牛顿共轭梯度证明是有帮助的。可以像这样调用它：

```
Result = scipy.optimize.minimize(fun = logLikelihoodLogit, 
                                 x0 = np.array([-.1, -.03, -.01, .44, .92, .53,1.8, .71]), 
                                 args = (mX, vY),
                                 method = 'TNC',
                                 jac = likelihoodScore);
optimLogit = Result.x; 
```

# actionscript-3 - 处理 this.parent 时的 Actionscript 3 错误代码 1119？

> ID：13794757
> 
> 赞同：2
> 
> 时间：2012-12-10T03:52:57.023
> 
> 标签：actionscript-3, flash, parent

我对 AS 还很陌生，正在玩我发现的扫雷游戏。对于游戏板上的每个单元格，我都有一个嵌入了数字动态文本框 (number_txt) 的影片剪辑 (cell_mc)、一个纯色方形影片剪辑 (block_mc) 和一个标记被炸框的小标志 (flag_mc ）。我还有一个单独的动态文本框来计算板上还剩下多少地雷（minecounter_txt）。

我的问题是，当我尝试运行游戏时，如果我有一个“this.parent.flag_mc”或“this.parent”与任何提到的元素，Flash 会返回一个错误代码 - “1119：访问可能通过静态类型单元格的引用未定义的属性 flag_mc（或其他元素）。” 并且使用 minecounter_mc 它返回“1119：通过静态类型 flash.display:DisplayObjectContainer 的引用访问可能未定义的属性 flag_mc（或其他元素）”

我假设因为它说它不能引用静态类型的元素，所以它无法将它们识别为动态的。我搜索了一个解决方案，并读到它有助于在父级之前声明动态元素，即“MovieClip(this.parent.flag_mc)，但它没有帮助。

任何人都可以帮忙吗？谢谢。

```
package  {

import flash.display.MovieClip;
import flash.display.DisplayObjectContainer;
import flash.events.MouseEvent;

public class cell extends MovieClip {

        public var state:Boolean;
        public var revealed:Boolean;
        public var xcor:uint;
        public var ycor:uint;
        public var marked:Boolean;
        public var cellValue:int;

        public function cell(corx:uint, cory:uint) {
            // constructor code

            this.state = false;
            this.revealed = false;
            this.marked = false;
            this.cellValue = 0;
            this.xcor = corx;
            this.ycor = cory;
            this.flag_mc.visible = false;
            this.addEventListener(MouseEvent.CLICK, cellClicked);

    }//end of constructor

    private function cellClicked(event:MouseEvent):void{
        if(event.shiftKey){

            if(this.marked){
                this.flag_mc.visible = false;
                this.marked = false;
                this.parent.minecounter_txt.text = String(int(this.parent.parent.minecounter_txt.text) + 1);
            } else{
                this.flag_mc.visible = true;
                this.marked = true;
                this.parent.minecounter_txt.text = String(int(this.parent.parent.minecounter_txt.text) - 1);
            }

        } else{

            if(!state){
                openCell();
            } else{
                if(!this.marked){
                    this.parent.play_btn.visible = true;
                }
            }

        }
    }

    private function openCell(){
        if(!this.marked && !this.revealed){
            this.block_mc.visible = false;
            this.revealed = true;
            this.removeEventListener(MouseEvent.CLICK, cellClicked);
        }
    }

}//end of class

}//end of package 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:51:00.920

`this.parent`除非将影片剪辑添加到父级的显示列表中，否则将为 null。

最好传递父级的引用并将其存储在类属性中。

```
var parentObj:Object = null;

// Constructor
public function cell(parentObj:Object, corx:uint, cory:uint) {

         this.parentObj = parentObj;

         //... 
```

并将其称为：

```
var cellObj = new cell(this, ...); 
```

如果您知道哪个 Class 是父级，那么您也可以将 typeof parentObj 设置为它。

# jquery - jQuery 动画菜单高度

> ID：13794760
> 
> 赞同：0
> 
> 时间：2012-12-10T03:53:51.657
> 
> 标签：jquery, html, jquery-ui, jquery-selectors

嘿，我有以下 jsfiddle > [Fiddle](http://jsfiddle.net/tQ2xT/)，我需要一些帮助。

当我将鼠标悬停在它上面时，它会扩展为静态宽度，但根据文本长度，它会通过内部文本**$('.inner').height()**抓住它。

问题是它超出了最后一个文本列表项，当我滚动菜单框中的任何文本时，它会向上滑动一点。如何防止它（1）向上滑动和（2）具有所需的确切高度，甚至在盒子底部没有额外的空间来容纳它的高度？

**JS：**

```
$(document).ready(function() {
    $('#menuSquare, .inner').mouseout(function() {
        theMenu('close');
    });

    $('#menuSquare, .inner').mouseover(function() {
        theMenu('open');
    });
});

function theMenu(what2Do) {
    if (what2Do == 'open') {
        $('#menuSquare').stop().animate({
            width: 190, //95
            height: $('.inner').height(),
            duration:900,
            'padding-top' : 10,
            'padding-right' : 10,
            'padding-bottom' : 10,
            'padding-left' : 10,
            backgroundColor: '#fff',
            opacity: 0.8
        }, 1000,'easeOutCubic')
    } else {
        $('#menuSquare').stop().animate({
            width: "20",
            height: "20",
            padding: '0px',
            backgroundColor: '#e51937',
            opacity: 0.8
        }, 500,'easeInCirc')
    }
}​ 
```

**的HTML：**

```
<div id="menuSquare" class="TheMenuBox" style="overflow: hidden; width: 20px; height: 20px; background-color: rgb(229, 25, 55); opacity: 0.8; padding: 0px;">
    <div class="inner">
      <p style="text-decoration:none; color:#666; cursor: pointer;    " onclick="changeImg('Custom Homes');">Custom Homes</p>
      <p style="text-decoration:none; color:#666; cursor: pointer;    " onclick="changeImg('Full Service Hotels');">Full Service Hotels</p>
      <p style="text-decoration:none; color:#666; cursor: pointer;    " onclick="changeImg('Mixed Use');">Mixed Use</p>
      <p style="text-decoration:none; color:#666; cursor: pointer;    " onclick="changeImg('Office');">Office</p>
      <p style="text-decoration:none; color:#666; cursor: pointer;    " onclick="changeImg('Retail');">Retail</p>
      <p style="text-decoration:none; color:#666; cursor: pointer;    " onclick="changeImg('Select Service Hotels');">Select Service Hotels</p>   
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:08:03.050

这是**因为**. `<div class="inner">`当`<div class="menuSquare" >`没有用完的时候，with of`<div class="inner">`是 110px，所以`<p>`Word 中的文本被换成了两行或更多行。然后`$(.inner).height()`得到你的*（Word Wrapped）*高度`<div class="inner">`

所以要弄清楚这个问题，只需将您的最小宽度更改为 190（与 相同`<div class="menuSquare">`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:10:04.067

我不完全确定你想要什么，但是

```
 height: $('.inner').height(), 
```

估计是这个问题，试试

```
height : 20px 
```

更新：

```
max-height {
   20px;
} 
```

# mysql - MySQL结合ID来获取关系？

> ID：13794768
> 
> 赞同：1
> 
> 时间：2012-12-10T03:55:19.470
> 
> 标签：mysql

表 - 朋友

```
 friend_id     | friend_one    | friend_two   | role 
+--------------------------------------------------------------------------------------------+
|1:    44               34              34          me
|2:    45               35              35          me
|3:    46               35              34          fri
+--------------------------------------------------------------------------------------------+ 
```

我需要计算，谁在关注，谁是关注者.. 差不多了，我在下面得到了一些答案，但大多只是给我静态数字，但到目前为止感谢您的帮助，它给了我一个开始的地方。FRIEND_ONE = 34（在表用户 34 = 他们的 uid 与 35 相同，依此类推）

* * *

我以前得到过这个答案，但它只是不断地为这两个中的一个返回 0 或 3。

```
select friend_one, count(*) as count
from friends
where friend_one != friend_two 
group by friend_one;

if you want the count for a specific user, do this:

select count(*) as count
from friends
where friend_one != friend_two 
and friend_one = $uid 
```

# android - Android - Webview 在较小的屏幕上被切断

> ID：13794769
> 
> 赞同：2
> 
> 时间：2012-12-10T03:55:21.607
> 
> 标签：android, xml, webview

我有一个谷歌日历，我试图在我的 Android 应用程序中显示，但是当我这样做时，它在我的 HTC Incredible 2 上被切断。它在我的 Nexus 7 上显示良好。我尝试使用[此处](https://stackoverflow.com/questions/8012936/android-webview-cuts-off)找到的答案但仍然没有运气。任何帮助都会*很棒*。谢谢！

```
 public class Events extends SherlockActivity
  {
    boolean isLoaded = false;
ActionBar actionBar;
WebView eventView;
ProgressDialog progressDialog;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.events);

    actionBar = getSupportActionBar();

    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false);

    eventView = (WebView) findViewById(R.id.eventsView);
    eventView.getSettings().setJavaScriptEnabled(true);

    final Activity activity = this;

    /* Cut out loading screen, etc */

    eventView.loadUrl("https://www.google.com/calendar/embed?showTitle=0&mode=MONTH&height=600&wkst=1&bgcolor=%23ffffff&src=fresnochaffeezoo%40gmail.com&color=%23182C57&ctz=America%2FLos_Angeles");

}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

 <WebView
    android:id="@+id/eventsView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:44:22.453

The following settings help with the way the page is rendered initially:

```
eventView.getSettings().setUseWideViewPort( false );
eventView.getSettings().setLoadWithOverviewMode( true ); 
```

optionally:

```
eventView.getSettings().setDefaultZoom( ZoomLevel. ... ); 
```

# android - 调用 onclick 时，Android 从 Fragment 更改 Tab

> ID：13794772
> 
> 赞同：0
> 
> 时间：2012-12-10T03:56:03.800
> 
> 标签：android, button, tabs, fragment

我有一个项目，它有 4 个使用操作栏的选项卡，每个选项卡都有自己的片段，它们在单击选项卡时显示。

当在当前选项卡中单击按钮时，我想做的是将当前选项卡重置为另一个（例如从 tab4 到 tab2）。我不知道该怎么做，因为片段对我来说有点陌生。我如何才能获得当前选择的选项卡？我将如何设置新标签？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:07:39.547

我认为您的意思是 myTab.setCurrentTab(i) 和 myTab.getCurrentTab()。你可以声明一个

```
myTab.setOnTabChangedListener(new OnTabChangeListener(){
@Override
public void onTabChanged(String tabId) {
    //do something
}}); 
```

用于您的事件处理。

# php - 从 HTML 在网页中显示图像

> ID：13794774
> 
> 赞同：0
> 
> 时间：2012-12-10T03:56:15.613
> 
> 标签：php, mysql, ftp

我有一个脚本，用户在网站上上传图像，然后图像被上传到 FTPServer。文件的名称存储在数据库中，因此当用户单击链接时，查询字符串用作数据库中的引用以获取图像名称。我现在唯一坚持的部分是如何使用 php 在我的网页上显示图像。是否有从 FTP 服务器获取副本并显示图像的特定功能？我不想将图像下载到网络服务器，然后显示图像然后删除它，因为如果网站有很多访问者，这可能会占用大量空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:20:41.940

你必须将图像存储在网络服务器上，一旦你这样做了，你可以在你的网页上显示它，但是你喜欢，php，ajax，javascript，你的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:47:37.817

“大图像主机”通常也可以通过 Web 访问其“存储服务器”。因此，当文件上传到他们的图像服务器时，可以通过 URL 访问它。您需要确定指向您刚刚上传的文件的 url 并将其放在您的 html 中（在`img`标签中。让用户的浏览器检索图像，而不是您的网络服务器首先检索它然后显示页面。

# python - “猜我的号码”游戏中的类型转换错误

> ID：13794777
> 
> 赞同：3
> 
> 时间：2012-12-10T03:56:31.333
> 
> 标签：python, python-3.x

我正在用 Python 3 为“猜我的数字”游戏编写代码。然而，在这个版本中，计算机必须猜测用户保密的数字。我是 Python 和一般编程的新手，希望能得到一些帮助。我收到与类型转换有关的错误。这是错误：

```
 Traceback (most recent call last):
  File "C:\Users\Documents\python\GuessMyNumberComputer.py", line 16, in <module>
    response = input("Is the number" +guess +"? \n Press (y - yes, l - go lower, h - go higher)")
**TypeError: Can't convert 'int' object to str implicitly** 
```

这是我的代码：

```
 import random

print("\t\t\t Guess My Number")
input("Think of a number between 1 and 100 and I will try to guess it. \nPress enter when you have thought of your number and are ready to begin.")
a = 1
b = 100
tries = 0

while 1==1:
    guess = random.randint(a,b)
    response = input("Is the number" +guess +"? \n Press (y - yes, l - go lower, h - go higher)")
    tries += 1
    if response == y:
        break

    elif response == l:
        b = response-1

    elif response == h:
        a = response+1

print("Aha! I guessed it! And it only took",tries,"tries!")
input("Press enter to exit.") 
```

有人可以帮我解决这个错误吗？您能否还给我指出网络上的一些链接，以便我可以阅读此内容，因为我的书似乎没有涵盖该领域。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T03:57:59.143

只需将 int 传递给`str()`构造函数即可将其转换为字符串。所以这是新行：

```
response = input("Is the number" + str(guess) +"? \n Press (y - yes, l - go lower, h - go higher)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:06:38.417

其他答案已经解决了您的问题`TypeError`，因此我将添加一些内容供您阅读：

[Python 3.3 教程](http://docs.python.org/3.3/tutorial/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:03:25.267

您应该`format()`在从不同类型构造字符串时使用。它使您的意图更加清晰。

```
response = input('Is the number {}? \n Press...'.format(guess)) 
```

# .net - 快速释放原生对象

> ID：13794781
> 
> 赞同：3
> 
> 时间：2012-12-10T03:57:20.960
> 
> 标签：.net, c++-cli

如果我有多个本机类型变量，例如：

```
EmpNameC =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox38->Text).ToPointer();
PyrllC =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox31->Text).ToPointer();
DtbrthC=( wchar_t *)Marshal::StringToHGlobalUni(this->textBox37->Text).ToPointer();
PlcBrthC=( wchar_t *)Marshal::StringToHGlobalUni(this->textBox36->Text).ToPointer();
CIDC    =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox35->Text).ToPointer();
ContNoC=( wchar_t *)Marshal::StringToHGlobalUni(this->textBox34->Text).ToPointer();
JndtC   =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox33->Text).ToPointer();
PostnC  =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox32->Text).ToPointer();
DeptC   =( wchar_t *)Marshal::StringToHGlobalUni(this->comboBox4->Text).ToPointer();
AnnLvC  =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox9->Text).ToPointer();
EmrgLvC=( wchar_t *)Marshal::StringToHGlobalUni(this->textBox30->Text).ToPointer();
IrrC=( wchar_t *)Marshal::StringToHGlobalUni(this->comboBox1->SelectedItem->ToString()).ToPointer();
HmTwnC  =( wchar_t *)Marshal::StringToHGlobalUni(this->textBox25->Text).ToPointer(); 
```

我必须释放所有这些，例如：

```
Marshal::FreeHGlobal((IntPtr)EmpNameC);      
Marshal::FreeHGlobal((IntPtr)DtbrthC);
Marshal::FreeHGlobal((IntPtr)PlcBrthC);
Marshal::FreeHGlobal((IntPtr)CIDC);
Marshal::FreeHGlobal((IntPtr)ContNoC);
Marshal::FreeHGlobal((IntPtr)JndtC);
Marshal::FreeHGlobal((IntPtr)PostnC);
Marshal::FreeHGlobal((IntPtr)DeptC);
Marshal::FreeHGlobal((IntPtr)AnnLvC);
Marshal::FreeHGlobal((IntPtr)EmrgLvC);
Marshal::FreeHGlobal((IntPtr)IrrC);
Marshal::FreeHGlobal((IntPtr)HmTwnC); 
```

有没有更短的方法可以用来释放所有本机对象，而不是每个对象一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:36:05.830

您可以使用包含队列的专用结构来管理它。

每次你分配一个本地对象时，你将它推入队列，最后你在一个循环中释放它们。

# mysql - 如何使用 SQL 左连接返回空值

> ID：13794782
> 
> 赞同：6
> 
> 时间：2012-12-10T03:57:21.070
> 
> 标签：mysql, left-join

请查看此 SQL Fiddle 的表格以及我尝试过的查询：
[SQL Fiddle](http://sqlfiddle.com/#!2/4c7b2/1)

所以基本上，我有两个表，即**tbl_curriculum**和**tbl_enrolled_subjects**。

**tbl_curriculum**包含学生应根据其课程 (course_id) 学习的所有科目 (subject_id)。
**tbl_enrolled_subjects**包含学生根据**tbl_curriculum**学习/注册的所有科目。

我想检查学生学习了哪些科目，哪些没有，查询应该返回如下内容：

```
Subject_id|Grade|Status
23        | 2   |Passed
24        | 2   |Passed
31        | 2   |Passed
50        | 2   |Passed
83        | 1   |Passed
27        |NULL |NULL 
28        |NULL |NULL 
29        |NULL |NULL 
```

. . . 等等。

带有 Grade 和 Status 的 Subject_ID 表示学生已经学习了该科目。另一方面，NULL 值表示学生尚未参加这些科目。
我使用了这个查询：

```
SELECT a.subject_id, b.grade, b.status
FROM tbl_curriculum a
LEFT JOIN tbl_enrolled_subjects b
ON a.course_id = b.course_id  AND a.subject_id = b.subject_id
WHERE b.student_id_no='05-0531'; 
```

但我一直只得到学生所学的科目。

```
Subject_id|Grade|Status
23        | 2   |Passed
24        | 2   |Passed
31        | 2   |Passed
50        | 2   |Passed
83        | 1   |Passed 
```

我错过了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:15:46.223

您没有找到任何空值的原因是因为您的 where 子句正在搜索填充了 student_id_no 的行。但是，在学生没有上课的情况下，您拥有的数据 student_id_no 也将为空......因此您将过滤掉这些数据。

试试这个：

```
SELECT a.subject_id, b.grade, b.status, b.student_id_no
FROM tbl_curriculum a
LEFT JOIN tbl_enrolled_subjects b
ON a.course_id = b.course_id  AND a.subject_id = b.subject_id
where student_id_no is null or student_id_no = '05-0531'
order by subject_id 
```

[http://sqlfiddle.com/#!2/4c7b2/43](http://sqlfiddle.com/#!2/4c7b2/43)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T14:38:34.173

很简单，你用`IS EMPTY`

在您的实体中，您已经定义了一个逆键，然后您调用您的实体主体，其中逆键为空。

```
SELECT a FROM tbl_curriculum a WHERE a.enrollers IS EMPTY; 
```

然后我定义了一个现场课程`tbl_enrolled_subjects`，如`tbl_curriculum`

```
/**
 *
 * @ORM\OneToMany(targetEntity="tbl_enrolled_subjects", mappedBy="id")
 */
private $enrollers; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T04:15:08.297

试试这个查询::

```
SELECT a.subject_id, b.grade, b.status
FROM tbl_curriculum a
JOIN tbl_enrolled_subjects b
ON a.course_id = b.course_id  AND a.subject_id = b.subject_id
WHERE b.student_id_no='05-0531'
union
select subject_id,null,null 
from tbl_curriculum
where concat(subject_id,course_id) not in (
  select  concat(subject_id,course_id)
from tbl_enrolled_subjects
 WHERE student_id_no='05-0531') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-23T08:06:20.610

我相信将学生过滤器放入 JOIN 谓词中也会产生预期的结果。它在 SQL Fiddle 中工作，但我不知道它如何影响查询计划。

```
SELECT a.subject_id, b.grade, b.status
FROM tbl_curriculum a
LEFT JOIN tbl_enrolled_subjects b
ON a.course_id = b.course_id  AND a.subject_id = b.subject_id
**AND** b.student_id_no='05-0531'; 
```

# c# - C# AutoCAD Plugin SQLite - 在极少数情况下找不到错误表

> ID：13794783
> 
> 赞同：1
> 
> 时间：2012-12-10T03:57:30.493
> 
> 标签：c#, sqlite, path, relative-path, autocad

我正在为使用外部数据库（SQLite）的 AutoCAD 创建一个插件。在极少数情况下，我会收到“找不到表”错误。这让我疯狂。我已经看到很多论坛的答案无法找到解决方案。

它在大多数情况下都有效，只有少数情况下会引发此错误。

我该如何解决这个问题。

我正在使用数据库的相对路径，它位于 Debug/release 文件夹中。

将数据库附加到应用程序的最佳方法是什么（在我的情况下它是 .dll 而不是 exe）

* * *

谢谢大家的回复...对不起，我没有收到任何电子邮件通知...

**这是您要求的信息。**

我有一个单独的类——它处理连接。这是我连接到数据库的方式。

```
 public static SQLiteConnection GetConnection()
    {
        string conn_string = string.Format("Data Source=./sdf_db1.s3db");
        SQLiteConnection conn = new SQLiteConnection(conn_string);

        if (!System.IO.File.Exists("./sdf_db1.s3db"))
        {
            Global.variables.mess_out_exception("Missing Database file", "Error");
        }

        return conn;

    } 
```

由于这是 AutoCAD Civil3D 的插件，它位于 Appdata\autodesk 文件夹中以在启动时加载。该应用程序的所有内容都运行良好，除了我很少收到未找到表的错误。看起来可能是应用程序启动时相对路径无法快速解析。

如果我尝试使用“Application.ExecutablePath;”，我很难找到绝对路径 以及我在网上找到的其他一些东西。我得到的只是 Acad.exe 的位置，而不是插件的位置。

1.  如何获取插件位置的绝对路径以获取 DB 的位置（因为 DB 和 .dll 位于同一文件夹中）。
2.  如何在连接字符串中同时使用绝对路径和相对路径（因此，如果相对路径失败，代码可以尝试使用绝对路径定位数据库）。

任何其他建议都会很棒。谢谢

* * *

我找到了问题的原因，当我运行应用程序并正确关闭应用程序（意味着完成所有过程后）它工作正常我没有收到任何错误消息......

## 仅当我在两者之间关闭应用程序窗口时才会收到错误消息。如果我尝试运行应用程序，看起来为数据库打开的连接仍然很忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:40:16.403

获取插件的路径

```
var asmpath = Path.GetDirectoryName( Assembly.GetExecutingAssembly().Location ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:04:53.543

为什么不采取替代路线？

我建议您将它们安装在特定位置，而不是尝试查找您的 DLL 和关联的 SQLite 数据库。通过这种方式，您可以轻松地将其与安装程序打包在一起。

您可以使用注册表项通过 AutoCAD 自动加载 .NET 模块：http: [//through-the-interface.typepad.com/through_the_interface/2006/09/automatic_loadi.html](http://through-the-interface.typepad.com/through_the_interface/2006/09/automatic_loadi.html)

有了这个，您可以像安装普通程序一样简单地安装 AutoCAD 插件，并让 AutoCAD 在启动时为您加载它们。

# php - 嵌套数组中的多维数组

> ID：13794785
> 
> 赞同：0
> 
> 时间：2012-12-10T03:57:48.073
> 
> 标签：php, multidimensional-array

我有一个脚本，它通过一个 CSV 文件并将每一行作为一个数组放入另一个数组（嵌套数组？）。每行有 2-3 个字段用于该行中项目的类别。我正在尝试研究如何从这些类别中创建多维数组。这是我目前拥有的来源：

```
$csv = new File_CSV_DataSource;
if ($csv->load($file)) {
    $items = $csv->getHeaders();
    $csv->getColumn($items[2]);
    if ($csv->isSymmetric()) {
        $items = $csv->connect();
    } else {
        $items = $csv->getAsymmetricRows();
    }
    $items = $csv->getrawArray();
}

$mainCats = array();
$subCats = array();
$subSubs = array();

foreach($items as $item){
    if(!in_array($item[10], $mainCats)){
        $mainCats[] = $item[10];
    }
}

foreach($items as $item){
    if(!array_key_exists($item[11], $subCats)){
        $parent = array_search($item[10], $mainCats);
        $subCats[$item[11]] = $parent;
    }
}

foreach($items as $item){
    if(!array_key_exists($item[12], $subSubs)){
        $parent = array_search($item[11], array_keys($subCats));
        $subSubs[$item[12]] = $parent;
    }
} 
```

到目前为止，它所做的是创建 3 个数组，其格式为：

```
$mainCats = Array(
    [0] => Main Cat 1,
    [1] => Main Cat 2,
    [2] => Main Cat 3
);

$subCats = Array(
    [Sub Cat 1] => 0,
    [Sub Cat 2] => 1,
    [Sub Cat 3] => 2
);

$subSubs = Array(
    [Sub Sub 1] => 0,
    [Sub Sub 2] => 1,
    [Sub Sub 3] => 2
); 
```

最后 2 个数组中的每一个的数值都是其父类别在前一个数组中的索引。我想做的是将它们全部合并到一个大数组中，格式如下：

```
$cats = Array(
    [0] => Array(
        'name' => Main Cat 1,
        'subs' => Array(
            [0] => Array(
                'name' => Sub Cat 1,
                'subs' => Array(
                    'name' => Sub Sub 1
                )
            )
        )
    ),
    [1] => Array(
        'name' => Main Cat 2,
        'subs' => Array(
            [0] => Array(
                'name' => Sub Cat 2,
                'subs' => Array(
                    'name' => Sub Sub 2
                )
            )
        )
    ),
    [2] => Array(
        'name' => Main Cat 3,
        'subs' => Array(
            [0] => Array(
                'name' => Sub Cat 3,
                'subs' => Array(
                    'name' => Sub Sub 3
                )
            )
        )
    ),
); 
```

我知道必须有一种更有效的方法来做到这一点，但我无法弄清楚。

编辑 - 我还应该提到，并非所有行都有第三个类别字段值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:14:23.993

我更喜欢按名称索引它们：

```
$cats=array();
//--------
foreach($items as $item){
        $main=$item[10];
        $subCat=$item[11];
        $subSub[$item[12]];
        $cats[$main]['subs'][$subCat]['subsubs'][$subSub]['name']=$subSub;
        $cats[$main]['subs'][$subCat]['name']=$subCat;
        $cats[$main]['name']=$main;

} 
```

# c++ - 构造函数的哪种方式最好？

> ID：13794790
> 
> 赞同：3
> 
> 时间：2012-12-10T03:58:25.057
> 
> 标签：c++, constructor

有两种方式构造一个类：

```
 class Cell{
  public:
        Cell(int cellID, int nx);
        ~Cell();
  private:
        int cellID_;
        int nx;
  }; 
```

第一种方式：

```
 Cell::Cell(int cellID, int nx)
    : cellID_(cellID), nx_(nx){} 
```

第二种方式：

```
 Cell::Cell(int cellID, int nx){init(cellID, nx)}

  void Cell::init(int cellID, int nx){
         cellID_ = cellID;
         nx_ = nx;
  } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T03:59:55.740

## 表现：

第一个是最好的，因为它在真正意义上**初始化对象，这与****分配**已经初始化 的对象的第二种方法不同。

请注意，使用第二种方法时会有一点开销：

如您所见，后者有额外的创建和分配开销，这对于用户定义的类可能相当大。

```
Cost of Member Initialization = Object Construction 
Cost of Member Assignment = Object Construction + Assignment 
```

如果成员是内置/POD 数据类型，则没有开销，但如果成员是非 POD 类型，则开销很大。

## 必要性：

请注意，在某些情况下，您将被迫使用成员初始值设定项列表：

*   你的班级有一个参考成员
*   你的类有一个非静态 const 成员

这些成员不能被分配，但它们必须在成员初始化器列表中初始化。

* * *

鉴于上述作为一种做法，第一种方法总是可取的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T04:00:48.520

第一个几乎总是首选。对于任何作为引用的成员或仅需要初始化器（即，不能默认构造）的成员都是*必需的。*`const`在其他情况下，它可以通过直接初始化成员对象而不是默认构造，然后再分配给它来减少额外的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:05:03.917

一般来说，初始化列表更好。检查此 C++ 常见问题解答。

[我的构造函数应该使用“初始化列表”还是“赋值”？](http://www.parashift.com/c++-faq/init-lists.html)

除非您需要以下功能

[一个类的一个构造函数可以调用同一个类的另一个构造函数来初始化这个对象吗？](http://www.parashift.com/c++-faq/init-methods.html)

# android - 致命异常：AsyncTask #1

> ID：13794792
> 
> 赞同：0
> 
> 时间：2012-12-10T03:58:50.133
> 
> 标签：android

帮助帮助..huu

我在这里遇到问题..似乎代码中没有错误..但是当我运行它时...并单击按钮查看地图包括路由地图..它突然关闭了..这是为什么？请朋友帮帮我..

我正在开发一个应用程序来读取我当前的位置并创建到 A 位置的路线..

以下是代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

    onNewIntent(getIntent());

    Drawable marker = getResources().getDrawable(R.drawable.marker);
    Drawable marked_places = getResources().getDrawable(R.drawable.feringgi_map);

    mymap = (MapView)findViewById(R.id.mymap);
    controller = mymap.getController();
    // extract MapView from layout
    mymap.getController().setZoom(15);
    mymap.setBuiltInZoomControls(true);
    mymap.setSatellite(false);

    // create an overlay that shows our current location
    myLocationOverlay = new MyLocationOverlay(this, mymap);

    // add this overlay to the MapView and refresh it
    mymap.getOverlays().add(myLocationOverlay); 
    mymap.postInvalidate();

    myLocationOverlay.runOnFirstFix(new Runnable() {

        @Override
        public void run() {
            controller.setZoom(10);
            controller.animateTo(myLocationOverlay.getMyLocation());                
        }
    });

    zoomToMyLocation();

   switch(selecteditem)
   {
   case 0:        switch(selectedsubitem){
            case 0://Place A       
                    locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
                  locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
                  Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                      if (location !=null) {
                      loc=location;
                  }
                  GeoPoint destination = getPoint(3.144341, 101.69541800000002);
                  new BackgroundTask(this, loc, destination).execute();
                break;              
}
}

 class BackgroundTask extends AsyncTask<Void, Void, Void> {

        private Location location;
        private GeoPoint dest;
        private Route route;
        private Activity activity;
        private ProgressDialog dialog;
        private RouteOverlay routeOverlay;

        public BackgroundTask(Activity activity, Location loc, GeoPoint dest) {
            location=loc; 
            this.dest=dest;
            this.activity=activity;
            dialog = new ProgressDialog(activity);
        }

        @Override
        protected void onPreExecute() {
            dialog.setCancelable(false);
            dialog.setTitle("Loading...");
            dialog.setMessage("Calculating Route...");
            dialog.setButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(final DialogInterface dialog, final int id) {
                  cancel(true);
                  MyMap.this.finish();
                }});
            dialog.show();
        }

protected Void doInBackground(Void... params) {
                if(isNetworkAvailable())
                {
                    if(haveInternet())
                    {   try{
                            route = directions(new GeoPoint((int)(location.getLatitude()*1.0E6),(int)(location.getLongitude()*1.0E6)), dest); 
                        }
                        catch (NullPointerException e){ }
                    }
                    else
                    {   return null;
                    }
                }
                else
                {   return null; }

                return null;
                } 
```

这是日志猫（更新）..：

```
 12-10 13:30:36.677: E/AndroidRuntime(13405): FATAL EXCEPTION: AsyncTask #1
12-10 13:30:36.677: E/AndroidRuntime(13405): java.lang.RuntimeException: An error occured while executing doInBackground()
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.lang.Thread.run(Thread.java:856)
12-10 13:30:36.677: E/AndroidRuntime(13405): Caused by: java.lang.SecurityException: ConnectivityService: Neither user 10228 nor current process has android.permission.ACCESS_NETWORK_STATE.
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.os.Parcel.readException(Parcel.java:1327)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.os.Parcel.readException(Parcel.java:1281)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:728)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:378)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at com.madcatworld.testtesttest.MyMap$BackgroundTask.isNetworkAvailable(MyMap.java:488)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at com.madcatworld.testtesttest.MyMap$BackgroundTask.doInBackground(MyMap.java:411)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at com.madcatworld.testtesttest.MyMap$BackgroundTask.doInBackground(MyMap.java:1)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-10 13:30:36.677: E/AndroidRuntime(13405):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-10 13:30:36.677: E/AndroidRuntime(13405):    ... 5 more 
```

这是另一半，我以前没有在这里发布过：

```
12-10 13:30:37.308: E/WindowManager(13405): Activity com.madcatworld.testtesttest.MyMap has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4254bb28 that was originally added here
12-10 13:30:37.308: E/WindowManager(13405): android.view.WindowLeaked: Activity com.madcatworld.testtesttest.MyMap has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4254bb28 that was originally added here
12-10 13:30:37.308: E/WindowManager(13405):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
12-10 13:30:37.308: E/WindowManager(13405):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
12-10 13:30:37.308: E/WindowManager(13405):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
12-10 13:30:37.308: E/WindowManager(13405):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
12-10 13:30:37.308: E/WindowManager(13405):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.Dialog.show(Dialog.java:278)
12-10 13:30:37.308: E/WindowManager(13405):     at com.madcatworld.testtesttest.MyMap$BackgroundTask.onPreExecute(MyMap.java:406)
12-10 13:30:37.308: E/WindowManager(13405):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
12-10 13:30:37.308: E/WindowManager(13405):     at android.os.AsyncTask.execute(AsyncTask.java:511)
12-10 13:30:37.308: E/WindowManager(13405):     at com.madcatworld.testtesttest.MyMap.onCreate(MyMap.java:108)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.Activity.performCreate(Activity.java:4465)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-10 13:30:37.308: E/WindowManager(13405):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-10 13:30:37.308: E/WindowManager(13405):     at android.os.Looper.loop(Looper.java:137)
12-10 13:30:37.308: E/WindowManager(13405):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-10 13:30:37.308: E/WindowManager(13405):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 13:30:37.308: E/WindowManager(13405):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 13:30:37.308: E/WindowManager(13405):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
12-10 13:30:37.308: E/WindowManager(13405):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
12-10 13:30:37.308: E/WindowManager(13405):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的清单文件：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.madcatworld.testtesttest"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.CALL_PHONE"/>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >

            <com.google.android.maps.MapView
            android:id="@+id/mymap"
            android:clickable="true"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="XXXX"
            />       

            <activity
                android:theme="@style/StyledIndicators"
                android:name=".MainTest"
                android:label="@string/title_activity_main" 
                android:screenOrientation="portrait">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <uses-library android:name="com.google.android.maps"/>
            <activity android:name="A"
                android:screenOrientation="portrait"></activity>
            <activity android:name="B"
                android:screenOrientation="portrait"></activity>
            <activity android:name="C"
                android:screenOrientation="portrait"></activity>
        </application>

    </manifest> 
```

供您参考，我已经将 ACCESS_NETWORK_STATE 放入我的清单中。

你能找出导致错误的原因吗？代码没有错误..但它未能查看我的路线图..:( 感谢朋友

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:00:26.120

根据您的日志，您没有此权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

此权限允许您访问设备的网络设备状态（Wifi、3G、蓝牙等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:00:39.393

> E/AndroidRuntime(5368)：原因：java.lang.SecurityException：ConnectivityService：用户 10228 和当前进程都没有 android.permission.ACCESS_NETWORK_STATE。

确保您已在文件中添加`android.permission.ACCESS_NETWORK_STATE`权限为`AndroidManifest.xml`

```
<manifest xlmns:android...>
 ...
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
</manifest> 
```

编辑 ：

消除

```
<com.google.android.maps.MapView
android:id="@+id/mymap"
android:clickable="true"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:apiKey="XXXX"
/> 
```

此代码来自`AndroidManifest.xml`并将其放在项目中 res/layout 文件夹中的任何 xml 布局中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:41:50.883

不是 100% 肯定，但似乎你得到了这个，因为你试图在后台检查网络可用性。您可以尝试在onpreexecute中检查它吗？

# java - JPA 和 EJB 中的错误

> ID：13794793
> 
> 赞同：0
> 
> 时间：2012-12-10T03:59:00.987
> 
> 标签：java, jpa-2.0, ejb-3.0

我是 JPA 和 EJB 的新手。分别尝试了 JPA 和 EJB 应用程序并运行良好。但是一起使用时出错了。

这是我在 Eclipse IDE 中将 JPA 与 EJB 3（JBoss 7 AS 服务器）一起使用时遇到的错误（日志）。

任何人都可以帮我解决它。

```
 11:43:43,735 INFO  [org.jboss.as.jpa] (MSC service thread 1-14) JBAS011402: Starting Persistence Unit Service 'SampleEAR.ear#Student'
    11:43:43,781 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC00001: Failed to start service jboss.deployment.subunit."SampleEAR.ear"."SampleEJB.jar".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."SampleEAR.ear"."SampleEJB.jar".INSTALL: Failed to process phase INSTALL of subdeployment "SampleEJB.jar" of deployment "SampleEAR.ear"
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_09]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_09]
        at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_09]
    Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011047: Component class ejb.MyBean for component MyBean has errors: 
    JBAS011428: Cannot inject RESOURCE_LOCAL container managed EntityManagers using @PersistenceContext
        at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor$1.handle(ModuleJndiBindingProcessor.java:169)
        at org.jboss.as.ee.component.ClassDescriptionTraversal.run(ClassDescriptionTraversal.java:54)
        at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.processClassConfigurations(ModuleJndiBindingProcessor.java:162)
        at org.jboss.as.ee.component.deployers.ModuleJndiBindingProcessor.deploy(ModuleJndiBindingProcessor.java:155)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        ... 5 more

    11:43:43,816 INFO  [org.hibernate.annotations.common.Version] (MSC service thread 1-14) HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
    11:43:43,820 INFO  [org.hibernate.Version] (MSC service thread 1-14) HHH000412: Hibernate Core {4.0.1.Final}
    11:43:43,821 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-14) HHH000206: hibernate.properties not found
    11:43:43,822 INFO  [org.hibernate.cfg.Environment] (MSC service thread 1-14) HHH000021: Bytecode provider name : javassist
    11:43:43,835 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-14) HHH000204: Processing PersistenceUnitInfo [
        name: Student
        ...]
    11:43:43,837 INFO  [org.jboss.web] (MSC service thread 1-13) JBAS018210: Registering web context: /SampleWAR
    11:43:43,924 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-14) HHH000402: Using Hibernate built-in connection pool (not for production use!)
    11:43:43,925 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-14) MSC00001: Failed to start service jboss.persistenceunit."SampleEAR.ear#Student": org.jboss.msc.service.StartException in service jboss.persistenceunit."SampleEAR.ear#Student": Failed to start service
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_09]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_09]
        at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_09]
    Caused by: javax.persistence.PersistenceException: [PersistenceUnit: Student] Unable to build EntityManagerFactory
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
        at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        ... 3 more
    Caused by: org.hibernate.HibernateException: Specified JDBC Driver com.microsoft.sqlserver.jdbc.SQLServerDriver class not found
        at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:104)
        at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:234)
        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:91)
        at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75)
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159)
        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131)
        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71)
        at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2270)
        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2266)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1735)
        at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)
        at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
        ... 9 more
    Caused by: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver from [Module "org.hibernate:main" from local module loader @16e3ecd (roots: C:\jboss-as-7.1.1.Final\modules)]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398) [jboss-modules.jar:1.1.1.GA]
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) [jboss-modules.jar:1.1.1.GA]
        at java.lang.Class.forName0(Native Method) [rt.jar:1.7.0_09]
        at java.lang.Class.forName(Unknown Source) [rt.jar:1.7.0_09]
        at org.hibernate.internal.util.ReflectHelper.classForName(ReflectHelper.java:192)
        at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:101)
        ... 23 more

    11:43:44,141 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "SampleEAR.ear" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.deployment.subunit.\"SampleEAR.ear\".\"SampleEJB.jar\".INSTALL" => "org.jboss.msc.service.StartException in service jboss.deployment.subunit.\"SampleEAR.ear\".\"SampleEJB.jar\".INSTALL: Failed to process phase INSTALL of subdeployment \"SampleEJB.jar\" of deployment \"SampleEAR.ear\"","jboss.persistenceunit.\"SampleEAR.ear#Student\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"SampleEAR.ear#Student\": Failed to start service"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.ValidatorFactoryjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBeanMissing[jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.ValidatorFactoryjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean]","jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.Validatorjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBeanMissing[jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.Validatorjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean]"]}
    11:43:44,166 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (Finalizer) HHH000030: Cleaning up connection pool [null]
    11:43:44,168 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) JBAS015877: Stopped deployment SampleEJB.jar in 27ms
    11:43:44,168 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment SampleWAR.war in 27ms
    11:43:44,171 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment SampleEAR.ear in 31ms
    11:43:44,172 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
    JBAS014775:    New missing/unsatisfied dependencies:
          service jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean (missing) dependents: [service jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.ValidatorFactory, service jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.Validator] 
    JBAS014777:   Services which failed to start:      service jboss.deployment.subunit."SampleEAR.ear"."SampleEJB.jar".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."SampleEAR.ear"."SampleEJB.jar".INSTALL: Failed to process phase INSTALL of subdeployment "SampleEJB.jar" of deployment "SampleEAR.ear"
          service jboss.persistenceunit."SampleEAR.ear#Student": org.jboss.msc.service.StartException in service jboss.persistenceunit."SampleEAR.ear#Student": Failed to start service

    11:43:44,175 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.deployment.subunit.\"SampleEAR.ear\".\"SampleEJB.jar\".INSTALL" => "org.jboss.msc.service.StartException in service jboss.deployment.subunit.\"SampleEAR.ear\".\"SampleEJB.jar\".INSTALL: Failed to process phase INSTALL of subdeployment \"SampleEJB.jar\" of deployment \"SampleEAR.ear\"","jboss.persistenceunit.\"SampleEAR.ear#Student\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"SampleEAR.ear#Student\": Failed to start service"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.ValidatorFactoryjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBeanMissing[jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.ValidatorFactoryjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean]","jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.Validatorjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBeanMissing[jboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean.Validatorjboss.naming.context.java.comp.SampleEAR.SampleEJB.MyBean]"]}}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:10:31.027

从您使用 MS SQL 服务器的堆栈跟踪来看。

`Caused by: java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver from [Module "org.hibernate:main" from local module loader @16e3ecd (roots: C:\jboss-as-7.1.1.Final\modules)]`

此行表明 MS SQL 服务器的 JDBC 驱动程序不在您的类路径中。或与`SampleEAR.ear`文件打包。

我建议您通过您使用的任何 IDE 将其添加到项目的构建路径中，以便将其打包在`.ear`文件中。

编辑：

在这种情况下，在您的配置 xml 中将驱动程序类更改为`com.microsoft.jdbc.sqlserver.SQLServerDriver`您添加的类适用于 MS SQL Server 2005。但驱动程序可能不适用。

# machine-learning - Mallet 训练模型加载

> ID：13794795
> 
> 赞同：2
> 
> 时间：2012-12-10T03:59:30.290
> 
> 标签：machine-learning, nlp, mallet

有没有人在加载以前训练过的模型时有运气？通过它的[API](http://mallet.cs.umass.edu/api/)看，CRFWriter 类是谜题的 1/2，但是你究竟是怎么做的 CRFRead(class doesn't exist)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T02:44:35.633

根据您使用的训练器，您应该能够将对象投射到 a`CRF`或`ACRF`. 我刚刚发布了一个可能对您也有帮助的问题：[如何加载和使用经过 Mallet 训练的 CRF？](https://stackoverflow.com/questions/22522424/how-do-i-load-and-use-a-crf-trained-with-mallet)

# python - 对可能出现一次或两次的短语进行正则表达式处理

> ID：13794804
> 
> 赞同：0
> 
> 时间：2012-12-10T04:00:18.730
> 
> 标签：python, regex

我真的想不出一个像样的标题来概述我正在尝试做的事情，但是我的示例应该很好地解释它，我的公司在网上提供了一个时间表，但他们没有任何 API 或任何东西提取它，所以我使用 Python 框架 Scrapy 来抓取数据，然后将其添加到我的 Google 日历中

一个女孩给了我一条正则表达式行来处理数据，因为它让我好几天都感觉很好，但我后来意识到它不能处理分班（很可能是因为我没有安排任何这样的时间）她没有看到一个的可能性）

我的正则表达式是

```
re.findall("""dow1'>(\w+)<\S+?>(\w+ \d+)</td>\s*<td class.*?tlHours'>(\d+).*?span>\s*(\d+)<span.*?ment'>(.*?)</spa.*?Meal: (.*?)</sp.*?start'>(\S+?)</spa.*?end'>(\S+?)<""", response.body) 
```

示例数据：

这是一个正常的 8 小时一天，有一顿饭，处理得很好：

```
<tr>
    <td class='dt'>
        <span class='dow1'>Sunday</span>Dec 09
    </td>
    <td class='ScheduledDetails'valign='top'>
        <div style="position:relative;">
            <span class='tlHours'>8<span class='spart'> hrs</span> 0<span class='spart'> mins</span></span><span class='department'>Cashier</span><span class='meal'>Meal: 2pm - 3pm</span>
        </div>
    </td>
    <td>
        &nbsp;
    </td>
    <td class='Schedunderlay'>
        <div class='Sched'>
            <div class='schedbar' style='left: 143px; width: 234px;'>
                <div class='schedbar_l'></div>
                <div class='schedbar_m' style='width: 226px;'>
                    <span class='start'>10am</span><span class='end'>7pm</span>
                </div>
                <div class='schedbar_r'></div>
            </div>
            <div class='availbar' style='left: 9px; width: 498px; display: none;'>
                <div class='schedbar_l'></div>
                <div class='schedbar_m' style='width: 490px;'>
                    <span class='start'><img src='/Images/Schedule/arrowLeft.gif' alt='' style='margin-left:5px; margin-top:2px;' /></span>
                    <div class='OTtext' align='center'>All Day</div>
                    <span class='end'></span>
                </div>
                <div class='schedbar_r'></div>
            </div>
            <div class='availbar' style='left: 508px; width: 216px; display: none;'>
                <div class='schedbar_l_on'></div>
                <div class='schedbar_m_on' style='width: 208px;'><span class='start'></span>
                    <div class='OTtext' align='center'>All Day</div>
                    <span class='end'><img src='/Images/Schedule/arrowRight.gif' alt='' style='margin-left:5px; margin-top:2px;' /></span>
                </div>
                <div class='schedbar_r_on'></div>
            </div>
        </div>
    </td>
    <td>&nbsp;</td>
    <td class='rightColDetails'>
        <div class='AvailDetails' align='left' style='display: table-cell;'>
            <span class='iefix'><b>Avail - All Day</b></span><br/>
            <span style='font-size: 11px;'>Pref - All Day</span>
        </div>
    </td>
</tr> 
```

这是一个拆分班次，两个四小时班次被一个空的 1 小时时段隔开（他们这样做是为了欺骗评分系统，两个有盖班次而不是一个班次）：

```
<tr>
    <td class='dt'>
        <span class='dow1'>Thursday</span>Dec 13
    </td>
    <td class='ScheduledDetails' valign='top'>
        <div style="position:relative;">
            <span class='tlHours'>8<span class='spart'> hrs</span> 0<span class='spart'> mins</span></span><span class='department'>Cashier</span><span class='meal'>Meal: None</span>
        </div>
    </td>
    <td>&nbsp;</td>
    <td class='Schedunderlay'>
        <div class='Sched'>
            <div class='schedbar' style='left: 247px; width: 104px;'>
                <div class='schedbar_l'></div>
                <div class='schedbar_m' style='width: 96px;'>
                    <span class='start'>2pm</span><span class='end'>6pm</span>
                </div><div class='schedbar_r'></div>
            </div>
            <div class='schedbar' style='left: 377px; width: 104px;'>
                <div class='schedbar_l'></div>
                <div class='schedbar_m' style='width: 96px;'>
                    <span class='start'>7pm</span> <span class='end'>11pm</span>
                </div>
                <div class='schedbar_r'></div>
            </div>
            <div class='availbar' style='left: 9px; width: 498px; display: none;'>
                <div class='schedbar_l'></div><div class='schedbar_m' style='width: 490px;'>
                    <span class='start'><img src='/Images/Schedule/arrowLeft.gif' alt='' style='margin-left:5px; margin-top:2px;' /></span>
                    <div class='OTtext' align='center'>All Day</div>
                    <span class='end'></span>
                </div>
                <div class='schedbar_r'></div>
            </div>
            <div class='availbar' style='left: 508px; width: 216px; display: none;'>
                <div class='schedbar_l_on'></div>
                <div class='schedbar_m_on' style='width: 208px;'>
                    <span class='start'></span>
                    <div class='OTtext' align='center'>All Day</div>
                    <span class='end'><img src='/Images/Schedule/arrowRight.gif' alt='' style='margin-left:5px; margin-top:2px;' /></span>
                </div>
            <div class='schedbar_r_on'></div>
        </div>
    </div>
    </td>
    <td>&nbsp;</td>
    <td class='rightColDetails'>
        <div class='AvailDetails' align='left' style='display: table-cell;'>
            <span class='iefix'><b>Avail - All Day</b></span><br/><span style='font-size: 11px;'>Pref - All Day</span>
        </div>
    </td>
</tr> 
```

重要的区别在于常规班次有一个开始和一个结束时间，而拆分班次有一个开始，结束，开始和结束......

我已经为此苦苦挣扎了大约五个小时......并且没有取得任何进展，我想如果我理解正则表达式我会有更多的运气......任何帮助都将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:26:11.410

这是一个使用 BeautifulSoup 解析文档并获取信息的解决方案。

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html)

for schedbar in soup.find_all('div', 'schedbar'):
  print "start: " +  schedbar.find('div', 'schedbar_m').find('span', 'start').string
  print "end: " +  schedbar.find('div', 'schedbar_m').find('span', 'end').string 
```

输出：

```
start: 2pm
end: 6pm
start: 7pm
end: 11pm 
```

# c# - 获取 Win 应用程序开发所需的 (407) 代理身份验证

> ID：13794810
> 
> 赞同：2
> 
> 时间：2012-12-10T04:00:54.797
> 
> 标签：c#, facebook-c#-sdk

我是一个新手 C# 程序员需要使用 Facebook SDK 来开发一些东西。首先，我在 asp.net 中编写示例代码。很好。但我将它移动到同一台计算机上的 Win Application 项目。它引发了错误“需要 (407) 代理身份验证”。然后我在家里运行它，它没有问题。

```
var fb = new FacebookClient();
dynamic result = fb.Get("oauth/access_token", new
                {
                    client_id = app_id,
                    client_secret = app_secret,
                    grant_type = "client_credentials"
                });
fb.AccessToken = result.access_token; 
```

我有一个问题：

1.  这有代理问题，为什么asp.net项目没有错误？
2.  如何在 fb 客户端应用代理设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T05:34:08.233

即使回答为时已晚，希望它可以帮助某人。您可以在 Web Config 中添加以下内容。

```
 <system.net>
        <defaultProxy useDefaultCredentials="true"></defaultProxy>
    </system.net> 
```

它将解决上述问题。

# directx - HLSL 修改 Tessellation 着色器以制作等边三角形？

> ID：13794814
> 
> 赞同：1
> 
> 时间：2012-12-10T04:01:51.627
> 
> 标签：directx, hlsl, tessellation

**细节：**

我正处于程序行星生成的过程中；到目前为止，我已经完成了动态 LOD 工作，但我目前的软件算法非常慢。我决定改用 DX11 的新曲面细分功能。目前我的球体是一个细分的二十面体。（20条边都是等边三角形）

回到当我使用我的软件算法进行细分时，一个三角形会被分成四个孩子，穿过父母的中点，每次形成 Hyrule 符号......就像这样： http: [//puu.sh/1xFIx](http://puu.sh/1xFIx)

如您所见，每个细分的三角形都创建了越来越多的*等边*三角形，即每个三角形的形状完全相同。

但是现在我使用 GPU 在 HLSL 中进行镶嵌，结果肯定不是我想要的： http: [//puu.sh/1xFx7](http://puu.sh/1xFx7)

**问题：**

我可以在 Hull 和 Domain 着色器中做些什么来更改曲面细分，使其像第一张图像一样细分为一组等边三角形？

我应该使用几何着色器来做这样的事情吗？如果是这样，它会比 tessellator 慢吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:38:24.133

我尝试使用 Tessellation Shader，但遇到了一个问题：当顶点的域位置为 0.3、0.3、0.3（中心顶点）时，域着色器仅传递 uv 坐标 (SV_DomainLocation) 和用于定位顶点的输入补丁知道正确的位置，因为您需要有关其他顶点的信息或域着色器阶段未提供的迭代索引（x，y）。

因为这个问题我在几何着色器中编写代码，所以这个着色器对于镶嵌非常有限，因为输出流的大小不能大于 1024 字节（在着色器模型 5.0 中）。我使用 uv（如 SV_DomainLocation）实现了顶点位置的计算，但这**仅对三角形进行了细分**，您必须使用部分代码来计算三角形中心的添加位置以创建精确的最终结果。

这是等边三角形镶嵌的代码：

```
// required for array
#define MAX_ITERATIONS 5

void DrawTriangle(float4 p0, float4 p1, float4 p2, inout TriangleStream<VS_OUT> stream)
{
    VS_OUT v0;
    v0.pos = p0;
    stream.Append(v0);

    VS_OUT v1;
    v1.pos = p1;
    stream.Append(v1);

    VS_OUT v2;
    v2.pos = p2;
    stream.Append(v2);

    stream.RestartStrip();
}

[maxvertexcount(128)] // directx rule: maxvertexcount * sizeof(VS_OUT) <= 1024
void gs(triangle VS_OUT input[3], inout TriangleStream<VS_OUT> stream)
{
    int itc = min(tess, MAX_ITERATIONS);
    float fitc = itc;
    float4 past_pos[MAX_ITERATIONS];
    float4 array_pass[MAX_ITERATIONS];
    for (int pi = 0; pi < MAX_ITERATIONS; pi++)
    {
        past_pos[pi] = float4(0, 0, 0, 0);
        array_pass[pi] = float4(0, 0, 0, 0);
    }
    // -------------------------------------
    // Tessellation kernel for the control points
    for (int x = 0; x <= itc; x++)
    {
        float4 last;
        for (int y = 0; y <= x; y++)
        {
            float2 seg = float2(x / fitc, y / fitc);
            float3 uv;
            uv.x = 1 - seg.x;
            uv.z = seg.y;
            uv.y = 1 - (uv.x + uv.z);

            // ---------------------------------------
            // Domain Stage
            // uv           Domain Location
            // x,y          IterationIndex

            float4 fpos = input[0].pos * uv.x;
            fpos += input[1].pos * uv.y;
            fpos += input[2].pos * uv.z;

            if (x > 0 && y > 0)
            {
                DrawTriangle(past_pos[y - 1], last, fpos, stream);
                if (y < x)
                {
                    // add adjacent triangle
                    DrawTriangle(past_pos[y - 1], fpos, past_pos[y], stream);
                }
            }
            array_pass[y] = fpos;
            last = fpos;
        }
        for (int i = 0; i < MAX_ITERATIONS; i++)
        {
            past_pos[i] = array_pass[i];
        }
    }
} 
```

# ruby - Ruby - 如何将消息长度表示为 2 个二进制字节

> ID：13794817
> 
> 赞同：5
> 
> 时间：2012-12-10T04:02:18.003
> 
> 标签：ruby, sockets, binary, byte

我正在使用 Ruby，并且正在与需要在发送消息本身之前格式化“标头”的网络端点进行通信。

标头中的第一个字段必须是消息长度，它被定义为网络字节顺序中的 2 个二进制字节消息长度。

例如，我的消息长度为 1024。如何将 1024 表示为二进制两字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T04:13:27.007

在 Ruby（以及 Perl 和 Python 和...）中进行字节处理的标准工具是`pack`和`unpack`. Ruby's[`pack`在`Array`](https://ruby-doc.org/core/Array.html#method-i-pack). 您的长度应该是两个字节长并且按网络字节顺序排列，这听起来像是`n`格式说明符的工作：

> n | 整数 | 16 位无符号网络（大端）字节顺序

因此，如果长度为 in `length`，您将得到两个字节：

```
two_bytes = [ length ].pack('n') 
```

如果您需要做相反的事情，请查看[`String#unpack`](https://ruby-doc.org/core/String.html#method-i-unpack)：

```
length = two_bytes.unpack('n').first 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T04:14:06.617

请参阅[Array#pack](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-pack)。

```
[1024].pack("n") 
```

这会将数字打包为网络顺序字节序列`\x04\x00`。

它的工作方式是每个字节是 8 个二进制位。二进制的 1024 是`10000000000`. 如果我们将其分解为 8 个八位字节（每字节 8 位），我们得到：`00000100 00000000`.

一个字节可以表示（2 个状态）^（8 个位置）= 256 个唯一值。然而，由于我们没有 256 个 ascii 可打印字符，我们将字节直观地表示为十六进制对，因为十六进制数字可以表示 16 个不同的值，并且 16 * 16 = 256。因此，我们可以取第一个字节，`00000100`并打破它成两个十六进制四边形为`0000 0100`. 将二进制转换为十六进制给了我们`0x04`. 第二个字节是微不足道的，`0000 0000`就像`0x00`. 这为我们提供了两字节字符串的十六进制表示。

值得注意的是，由于您被限制为 2 字节（16 位）标头，因此您的最大值被限制为`11111111 11111111`, 或 2^16 - 1 =`65535`字节。任何大于该值的消息都无法准确地以两个字节表示其长度。

# algorithm - 二分搜索比较次数

> ID：13794819
> 
> 赞同：0
> 
> 时间：2012-12-10T04:02:34.793
> 
> 标签：algorithm

我为标准二进制搜索算法编写了这段递归代码。我只是想知道何时将 +1 添加到比较计数器？下面的伪代码

```
Inputs A: Array of Data;
key:Data; L,R:Integer;
Variables m:Integer;
Returns m:Integer;

Begin
If R<L then return -1; fi
m:= (R+L)/2
if key = A[m] then return m; fi
if key > A[m] then
return binSearch(A,key,m+1,R);
Else
return binSearch(A,key,L,m-1);
fi
End 
```

检查第一个 if 语句中的 L 和 R 算作比较吗？有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:15:02.480

我相信，当您说比较时，您并不意味着严格地说您有多少个 if，而是您试图达到二进制搜索的 O(log(n)) 复杂性？如果是这样，为什么不在函数的开头计算，以便计算调用的数量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:11:50.523

在渐近分析中，条件语句被认为是 O(1)。

因为条件问题是决策问题。0 或 1。

# objective-c - UILabel 截断文本不起作用

> ID：13794823
> 
> 赞同：8
> 
> 时间：2012-12-10T04:03:24.250
> 
> 标签：objective-c, ios, uilabel

我在 IB 中将 numberOfLines 设置为 1，但是当我将文本设置为长字符串时，它不会截断。如果我将 numberOfLines 设置为 2，则截断工作正常。我应该怎么做才能将长字符串截断成一行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T04:13:24.853

很简单，设置以下属性：

```
label.adjustsFontSizeToFitWidth = NO;
label.lineBreakMode = NSLineBreakByTruncatingTail; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-06-26T09:13:13.450

如果您使用属性字符串并将段落样式设置为属性字符串：请确保您通过`paragraphStyle.lineBreakMode = .byTruncatingTail`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-07T12:58:58.990

如果使用自动布局，就我而言，缺少约束。如果没有对其宽度/尾随设置约束，则 UILabel 会增加其宽度。一旦它的宽度受到限制，例如它的超级视图，就会发生截断。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-14T13:18:20.550

您可能对该部分中的标签有限制，这会使事情变得混乱。

仔细检查您的约束或删除该部分中该标签或其他控件的约束。

标签的故事板选项：“换行符：截断尾巴”将用于您正在寻找的工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T04:19:54.443

如果在 IB 中将标签的 autoshrink 设置为“Fixed Font Size”，则当字符串宽度超出标签宽度时，您将始终得到截断。我猜你碰巧将它设置为“最小字体比例”或“最小字体字体”，当字符串太长时会导致调整大小。

![在此处输入图像描述](../Images/71b508cd92134375c2b1b7d82617dc96.png)

（Xcode 4.5，其他版本的Xcode和IB可能属性名不同）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-05T14:00:37.277

我做了两个函数，这将帮助你完成你的工作。

基本：我为任务制作的这个解决方案：
“将字体最小化为我的最小字体大小，然后尽可能多地放置信息，但不要大于最大宽度”

takeFineFont... 函数参数：
`(UIFont*)font`- 标签的字体 ( `titleLabel.font`)
`(NSString*)string`- 标签中的文本 ( `titleLabel.text`)
`(CGSize)limitStringSize`- 限制大小。
`limitStringSize.width`- 标签的宽度限制（上限）
`limitStringSize.height`- 标签的高度限制（下限）（实际上是字体大小）

```
-(UIFont*)takeFineFontSize:(UIFont*)font
              forText:(NSString*)string
             andLimit:(CGSize)limitStringSize{
    UIFont* resultFont = [UIFont fontWithName:[font fontName] size:[font pointSize]];
    if(limitStringSize.width != 0 && limitStringSize.height != 0){
        CGSize currentSize = [string sizeWithFont:resultFont];

        while(/* change font width with upper bound */
              currentSize.width > limitStringSize.width
              &&
              /* change font height with lower bound */
              currentSize.height > limitStringSize.height){

            /*change height and take new width*/
            currentSize.height -= 1;
            currentSize.width = [string sizeWithFont:[resultFont fontWithSize:currentSize.height]].width;
        }
        resultFont = [resultFont fontWithSize:currentSize.height];
    }
    return resultFont;
}
-(double)takeFineWidthForFont:(UIFont*)font
                    forString:(NSString*)string
                     andLimit:(double)widthLimit{
    return MIN([string sizeWithFont:font].width, widthLimit);
} 
```

假设你有大字符串`UILabel* titleLabel`
并且你在某处定义：

```
#define maximumLengthOfYourLabel 300
#define minimumSizeOfFont 14 
```

你现在要做什么？只需执行以下代码即可：

```
-(void)updateTitleLabelWithBigText:(NSString*)string{

    /*change text*/
    self.titleLabel.text = string;

    /*take pretty small font*/
    self.titleLabel.font = [self takeFineFontSize:self.titleLabel.font 
                                          forText:self.titleLabel.text 
                                         andLimit:CGSizeMake(maximumLengthOfYourLabel,minimumSizeOfFont)
                                          ];

    /*if your text still big, take minimal width and trunctate it*/
    self.titleLabel.width = [self takeFineWidthForFont:self.titleLabel.font
                                             forString:self.titleLabel.text
                                              andLimit:maximumLengthOfYourLabel];
    self.titleLabel.lineBreakMode = NSLineBreakByTruncatingTail;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-01T16:36:21.550

确保你没有`sizeToFit()`在你的标签上打电话。它将覆盖标签和约束设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-06T10:31:09.877

将 numberOfLines 设置为 0，这将使您可以垂直扩展 uilabel 内容而不会截断其宽度。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2012-12-10T04:11:43.003

也许这种方法可以帮助你：

> [myLabel sizeToFit];

标签不会被截断，但会调整标签大小以适合一行。

# jquery - 只能使用ajax、jquery获取HTML代码

> ID：13794825
> 
> 赞同：0
> 
> 时间：2012-12-10T04:03:25.677
> 
> 标签：jquery, ajax, text, return-value

我只能使用 HTML 标签获得结果，但我只想要文本结果。我的js是：

```
 $("#login").click(function() {
    var u = $("#username").val();
    var p = $("#password").val();
    //alert(u+" "+p);

    $.ajax({
        type:'POST',
        url:'login.jsp',
        data:'username='+u+'&password='+p,
        dataType:'text',
        success:function(data, status, xhr){
            alert(data);
        }

    }); 
```

login.jsp 是：

```
<%@page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ page import="Database.DB" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/plain; charset=utf-8" />
</head>
<body>      
<%
    //get all parameters
    String username = request.getParameter("username");
    String password = request.getParameter("password");

    if(true)
        out.print(username);
    else
        out.println("");
%>
</body>
</html> 
```

但是警报只是给了我一个 html 代码，但是，我只需要“文本”部分。已经将 dataType 设置为“text”，但它不起作用。

请，任何帮助，真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-27T20:42:27.963

在 ajax 请求的回调函数中，如果你想要 html 标签中的特定文本，你必须执行以下操作（以登录场景为例）

```
$("#login").click(function() {
    $.ajax({
    type:'POST',
    url:'login.jsp',
    data:{username:$("#username").val(), password:$("#password").val()},
    dataType:'text',
    success:function(data, status, xhr){
        //to find the text inside the body tag, first we have to 
        //check if there are a body tag using a regular expression.
        var matchBodyTagText = data.match(/<body[^>]*>([\s\S]*?)<\/body>/ig);
        if(matchBodyTagText){
            // The body tag exists, now we have to get only the text inside. 
            // There are described two ways to extract the text inside, but may be there are many other ways

            // 1 : with split, slice and join native methods in Javascript
            console.log(matchBodyTagText[0].split("<body")[1].split(">").slice(1).join(">").split("</body>")[0]);
            // 2 : With JQuery
            console.log($(matchBodyTagText[0]).text());
        }else{
            //Do something else
        }
    }

});
} 
```

我希望是有帮助的。

# sharepoint - 如何使人物编辑器看起来像文本框？

> ID：13794826
> 
> 赞同：0
> 
> 时间：2012-12-10T04:03:37.403
> 
> 标签：sharepoint

我的 aspx 页面上有三个人选择器控件。但控件大小不可编辑。我尝试减小它的高度、宽度，但它不起作用。

如何使我的人员编辑器看起来像文本框。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:02:18.713

在您的 CSS 中添加此类，并根据您的要求更新高度和宽度。

```
div.ms-inputuserfield
{
    height: 24px;
    width: 151px;
} 
```

这将更新人员选择器的高度和宽度。

PS：无需将此 CSS 类应用于您的人员选择器控件。

谢谢。

# php - PHP - 是否可以只列出目录并同时使用大括号？

> ID：13794827
> 
> 赞同：1
> 
> 时间：2012-12-10T04:04:00.160
> 
> 标签：php, design-patterns, directory, glob

我想（理想情况下）同时使用 GLOB_ONLYDIR 和 GLOB_BRACE，因为我想做一些模式匹配，就像我可以用文件 ala`*.{txt,php,doc,...,<whatever>}`但用目录做的那样。

然而，我现在所有的尝试都是徒劳的（甚至敢于尝试`GLOB_BRACE | GLOB_ONLYDIR`用 O_ 标志记住我在 fopen 和 C 中的美好时光，但当然，没有运气），包括类似的事情`glob(glob($path, GLOB_BRACE), GLOB_ONLYDIR);`和其他类似的失败尝试。

我的目的是计算给定路径中的目录数，但我想（可选）传递一个匹配模式来计算特定的出现次数。

我怎么能用 glob 做到这一点？（或者......有没有更好的方法/替代我正在尝试做的事情？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T05:55:25.700

您可以尝试抓取所有目录并将它们与所有大括号匹配相交，例如

```
array_intersect(glob($plain_path, GLOB_ONLYDIR), glob($brace_path, GLOB_BRACE)) 
```

你只需要实现一些方法来发现`$plain_path`如果你只给出了括号匹配字符串是什么（除非你的情况足够静态，以至于它只能是一条路径）。

# java - 如何确定 Unicode 字符是否有效

> ID：13794828
> 
> 赞同：6
> 
> 时间：2012-12-10T04:04:06.407
> 
> 标签：java, unicode, internationalization, icu

我想要一个可以指示 Unicode 点是否有效的算法或库。例如`U+F8F8`，看起来不是有效的 Unicode 字符，但被描述为`"PRIVATE_USE_AREA"`. 我找到了[ICU](http://site.icu-project.org/) - 这是一个好的/最好的解决方案吗？

更新：@Reprogrammer 的建议（如下）是使用：

```
CoderResult call(CharsetDecoderICU decoder, Object context, 
     ByteBuffer source, CharBuffer target, IntBuffer offsets, 
     char[] buffer, int length, CoderResult cr)
This function is called when the bytes in the source cannot be handled, 
    and this function is meant to handle or fix the error if possible. 
```

谢谢。这看起来比我希望的要复杂 - 也许它必然是一个比我想象的更复杂的问题。（问题包括一些点，例如`'<Non Private Use High Surrogate, First>' (U+D800)`（我假设）只有在后面至少有一个代码点时才有效。

更新：@Jukka 写道：

> 定义“有效”。根据 Unicode 标准，私人使用代码点是有效的，它只是没有在标准中分配任何字符。代理代码点不是有效的字符数据，但可以在 UTF-16 中使用代理代码单元。Java 字符串是一系列代码单元，而不是字符；任何代码单元都可能出现在那里，但是当您将字符串作为字符处理时，它应该符合字符的 Unicode 要求。– Jukka K. Korpela

我同意定义“有效”很重要。我从[FileFormat.Info](http://www.fileformat.info/info/unicode/char/f8f8/index.htm)站点获取了用法，该站点声明：

```
 U+F8F8 is not a valid unicode character. 
```

这似乎是一个相当权威的网站，所以我使用了他们的术语。也许它们有些不精确

更新：我已经尝试将@Ignacio 的 Python 转换为 Java，但失败了。我写

```
public void testUnicode() {
        Pattern pattern = Pattern.compile("\\p{Cn}");
        System.out.println("\\u0020 "+pattern.matcher("\u0020").matches());
        System.out.println("A "+pattern.matcher("A").matches());
        System.out.println("\\uf8f8 "+pattern.matcher("\uf8f8").matches());
    } 
```

即使对于“有效的”Unicode字符，它也统一返回false。我也找不到`\p{Cn}`记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T04:48:49.440

`"\\p{Cn}"`您在@IgnacioVazquez-Abrams 对答案的评论中描述的方法是正确的方法，它使用与测试一般类别（gc）属性的模式匹配，例如。但是对于 U+F8F8，这个特定的匹配正确地产生 false，因为这个字符的类别不是 Cn 而是 Cs（其他，代理）。如果你测试例如 U+FFFF，你会得到正确的。

大类 C 中的 Unicode 类别（类别名称以 C 开头）是：

*   抄送：其他，控制；控制字符，例如回车
*   cf：其他，格式；例如软连字符（不可见，但可能会影响格式）
*   Cs：其他，代理人；在字符数据中无效，但可能成对出现在 Java 字符串中（这是代码单元的字符串，而不是字符）
*   Co：其他，私人使用；在字符数据中有效，但没有由 Unicode 标准分配给它的字符，并且不应在信息交换中使用，除非通过私有分配（为代码点分配一些含义）
*   Cn：其他，未赋值；这可能意味着代码点被永久指示为非字符，或者只是未分配，例如尚未分配（但可能会分配给未来版本的 Unicode 中的字符）

因此，在测试有效性时，应该拒绝 Cn（保留在更改 Unicode 标准时这可能会导致拒绝有效字符）；测试代码点时应该拒绝 Cs，但是在处理 Java 字符串时，当第一个是高代理项而第二个是低代理项时，您应该接受一对 Cs 字符（假设您希望接受超出基本多语言平面的字符); Co 的处理取决于您是否希望将私人使用代码点视为有效。

例如，私人使用代码点可能出现在旨在使用字体显示的数据中，该字体具有分配给此类代码点的字形。这样的字体很笨拙，但它们确实存在，而且这种方法在形式上并不是不正确的。

其他主要类别中的 Unicode 代码点将被视为毫无疑问的字符。这并不意味着应用程序需要接受它们，只是它们有效地表示字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T06:36:36.713

尝试使用 String.codePointAt
这是 API：

```
int java.lang.String.codePointAt(int index)

codePointAt
public int codePointAt(int index)
Returns the character (Unicode code point) at the specified index. 
   The index refers to char values (Unicode code units) and ranges from 0 to length() - 1\. 
If the char value specified at the given index is in the high-surrogate range, the 
    following index is less than the length of this String, and the char value at the 
    following index is in the low-surrogate range, then the supplementary code point 
    corresponding to this surrogate pair is returned. Otherwise, the char value at the
    given index is returned. 

Parameters:
index - the index to the char values 
Returns:
the code point value of the character at the index 
Throws: 
IndexOutOfBoundsException - if the index argument is negative or not less than the 
    length of this string. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:06:46.797

与“Cn”Unicode 属性匹配表示无效的 Unicode 字符。Python 中的一个示例（可以很容易地转换为 Java）：

```
>>> regex.match(r'\p{Cn}', u'\ud800')
<_regex.Match object at 0x7f6d5552c120>
>>> regex.match(r'\p{Cn}', u'a')
>>> regex.match(r'\p{Cn}', u'\uf8f8')
<_regex.Match object at 0x7f6d5552c198> 
```

# android - 在 Android 应用中使用 OSM 而不是 Google 地图

> ID：13794831
> 
> 赞同：5
> 
> 时间：2012-12-10T04:04:17.553
> 
> 标签：android, google-maps, openstreetmap

在开发 Android 应用程序时，我想使用 OSM 而不是 Google Maps。这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T02:35:36.397

我还问了关于 osm 帮助的问题，我得到了这个。

[http://code.google.com/p/osmdroid/](http://code.google.com/p/osmdroid/)

> osmdroid 提供工具/视图来与 OpenStreetMap-Data 进行交互。
> 
> OpenStreetMapView 是 Androids MapView 类的（几乎）完全/免费替代品。

这是在您的应用程序中使用 osmdroid 的方法

[http://code.google.com/p/osmdroid/wiki/HowToUseJar](http://code.google.com/p/osmdroid/wiki/HowToUseJar)

osmdroid id 不要与带有大写 O 的 Osmdroid 混淆，Osmdroid 是一个使用 OSM 地图的 android 导航应用程序。

如果你们能想出更多的资源，那将不胜感激。

谢谢你。

# sql-injection - 避免在gridview中的复选框上注入sql

> ID：13794834
> 
> 赞同：2
> 
> 时间：2012-12-10T04:04:38.680
> 
> 标签：sql-injection

```
<asp:CheckBox ID="chkIsHidden" runat="server" Enabled="false" 
    Checked='<%# Convert.IsDBNull(Eval("Is_Hidden")) ? false : Convert.ToBoolean(Eval("Is_Hidden")) %>' 
/> 
```

上面的代码，安全程序扫描并警告“Blind SQL Injection”，我很困惑

1.  为什么它有SQL注入？
2.  如何修复以避免sql注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:02:04.977

如您所见，即使您的 Web 应用程序不返回错误消息，它仍然可能容易受到 SQL 盲注攻击。但是，您可以使用以下最佳实践保护组织的应用程序免受攻击：

1.  创建强制执行安全编码实践的策略，以确保在任何应用程序开发或部署期间执行漏洞检测和评估。

2.  让您的开发人员确定数据进入或退出应用程序的位置，并确保在 HTTP 请求的每个部分都进行验证，然后再让其靠近脚本、数据访问例程和 SQL 查询。这将防止用户提供的数据能够修改 SQL 语句的语法。

3.  使用存储过程将您的 Web 应用程序与 SQL 完全隔离，应用程序应使用安全接口（例如 JDBC 的 CallableStatement 或 ADO 的命令对象）来执行这些过程。如果必须动态生成 SQL 语句，请使用 PreparedStatements，因为 PreparedStatements 和存储过程都会在添加用户输入之前编译 SQL 语句，使用户输入无法修改实际的 SQL 语句。

4.  考虑使用漏洞评估工具来自动发现 SQL 注入和其他安全漏洞。

5.  制定事件响应计划。制定详细且经过充分演练的计划将帮助您以有序和有效的方式处理发生的任何攻击，并将对您的组织的影响降至最低。

# java - Tomcat 7 战争文件部署

> ID：13794836
> 
> 赞同：2
> 
> 时间：2012-12-10T04:04:57.577
> 
> 标签：java, tomcat, deployment, tomcat7, war

我正在尝试将 WAR 文件加载到我的 Tomcat 7，并且我正在使用 eclipse 来启动或停止服务器。

我将战争文件粘贴到 TOMCAT_HOME/webapps 文件夹中并启动了服务器。

服务器启动正常，我收到以下控制台消息。

```
10 Dec, 2012 9:10:46 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: F:\Program Files\Java\jdk1.6.0_37\jre\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;F:/Program Files/Java/jre6/bin/client;F:/Program Files/Java/jre6/bin;F:/Program Files/Java/jre6/lib/i386;C:\Program Files\AMD APP\bin\x86;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files\Windows Live\Shared;C:\Program Files\QuickTime\QTSystem\;.;F:\Program Files\Java\jdk1.6.0_37\bin;F:\apache-maven-3.0.4\bin;;F:\eclipse-juno;;.
10 Dec, 2012 9:10:46 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8090"]
10 Dec, 2012 9:10:46 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
10 Dec, 2012 9:10:46 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 484 ms
10 Dec, 2012 9:10:46 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
10 Dec, 2012 9:10:46 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.33
10 Dec, 2012 9:10:46 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8090"]
10 Dec, 2012 9:10:46 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
10 Dec, 2012 9:10:46 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 211 ms 
```

但是当我尝试访问我的应用程序时，它给了我错误 404，找不到文件。

我在那里检查了应用程序 TOMCAT_HOME/webapps 我发现了我的战争文件和同名文件夹 - “JavaServerFaces”

**TOMCAT_HOME/webapps 目录：** ![Tomcat部署目录](../Images/773ed0d4010fb232f4ef5727c25b09bc.png)

服务器开启，war 文件存在，生成了一个文件夹结构，但我仍然无法访问我的应用程序 `HTTP Status 404 - /JavaServerFaces/xhtml/hello.xhtml`

在tomcat 7上正确部署和运行war文件的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:31:41.590

在您的控制台消息中，我没有找到“JavaServerFaces.war”的部署。在 Eclipse 中，打开您的服务器设置文件，在“服务器位置”下检查选项“使用 tomcat 安装 (.......)”。如果选中，则检查部署名称是否为“webapps”。如果没有，请将其更改为“webapps”。

如果这一切都是正确的，那么您的 .war 文件可能有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T02:29:10.437

用 eclipse 启动或停止 tomcat 有问题。最好使用 bin 文件夹中的 bat 文件启动和停止 tomcat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T11:16:32.517

查找错误的三个步骤

1）复制包含所有应用程序文件的文件夹名称并将其粘贴到url中。现在从 web.xml 复制您的 servlet 应用程序 url 并粘贴到文件夹名称之后。如果这有效，则意味着您的 Servlet 应用程序有一些错误..请参阅服务器控制台

2）在Manager App中单击您的应用程序名称，然后您的html文件没有运行，那么您的xml文件中一定有错误尝试将您的html文件重命名为index.xhtml

3)4**错误说明xml或html文件有错误。而 5** 系列错误显示您的 Tomcat 服务器中存在错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-13T19:54:35.357

检查 Eclipse 中的服务器设置。检查配置路径指向的位置。还要注意服务器位置。默认情况下它是工作区元数据，因此在您的情况下将其设置为 Tomcat 安装。

# android - 函数“glDrawTexfOES”无法解析

> ID：13794838
> 
> 赞同：3
> 
> 时间：2012-12-10T04:05:05.140
> 
> 标签：android, eclipse, opengl-es, android-ndk, opengl-es-1.1

我正在使用 eclipse 创建一个本机 android 项目。我正在使用opengl es 1.1。

使用 glext.h 文件中的函数时出现此错误

```
Function 'glDrawTexfOES' could not be resolved 
```

在调用 glDrawTexfOES 之前，我正在使用来自 gl.h 的函数。我可以使用 glext.h 中定义的宏，例如 GL_TEXTURE_CROP_RECT_OES，所以我知道该文件已包含在内。

查看 glext.h 文件，我找到了我想要的函数声明，它位于 #ifdef 块 ( `#ifdef GL_GLEXT_PROTOTYPES`) 中。我在包含 glext.h 之前立即定义了 GL_GLEXT_PROTOTYPES，但我仍然遇到同样的问题。我进入 glext.h 并对其进行了编辑，首先注释了我想要的函数周围的 ifdef 和 endif 行。我仍然遇到与上述相同的错误。然后我复制了函数声明并将其粘贴到 glext.h 文件的顶部，我的项目仍然说它无法解析该函数​​。

我知道 glext.h 已被弃用，但我应该仍然可以使用它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T03:56:23.313

我遇到了同样的问题，但随后将其放入我的 Android.mk 文件中：

```
LOCAL_CFLAGS += -D GL_GLEXT_PROTOTYPES 
```

[http://grokbase.com/t/gg/android-ndk/11cxrckjmp/ndkr7-cant-see-gldrawtexioes](http://grokbase.com/t/gg/android-ndk/11cxrckjmp/ndkr7-cant-see-gldrawtexioes)

# java - 在单个小程序中显示多个图像

> ID：13794843
> 
> 赞同：0
> 
> 时间：2012-12-10T04:06:08.750
> 
> 标签：java, image, swing, applet, japplet

我必须为一个项目构建一个小型 Java 小程序。我以前从未使用过小程序。因此，我对可用的各种内置功能知之甚少。这个小程序的布局如下：

1.  画面分为3部分
2.  最上面的部分将有一组按钮和文本框
3.  中间部分和底部将显示不同的图像
4.  每次运行程序时，这些图像的大小可能会有所不同（因此需要滚动条以防图像超出屏幕）

到目前为止，我已经成功地对屏幕进行了分区，并为每个部分创建了单独的面板，并在其中添加了相应的组件。

### 问题：

底部图像不完全可见。当每个图像不适合面板时，也不会出现滚动条。

我尝试使用`setSize()`,`setMinimumSize()`方法，但它不会在输出中产生任何变化。你能帮我解决上述问题吗？

### 这是我到目前为止所做的：

```
/*<applet code=DOSlayout.java width=400 height=400>
</applet>*/ 

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class DOSlayout extends JApplet implements ActionListener {

    Button ViewButton;
    Panel1 Top;
    Panel2 LeftSide;
    Panel3  RightSide;
    Label l1,l2,l3;

    Image img;

    public void init() {

        setSize(400,400);
        setLayout(new BorderLayout());

        Top = new Panel1();
        LeftSide = new Panel2();
        RightSide = new Panel3();

        Top.setSize(getSize().width, getSize().height/3);
        LeftSide.setSize(getSize().width,getSize().height/3); 
        RightSide.setSize(getSize().width,getSize().height/3);

//RightSide.setMinimumSize (new Dimension(400, 10000));

        add(Top, BorderLayout.NORTH);
        add(LeftSide, BorderLayout.CENTER);
        add(RightSide, BorderLayout.SOUTH);

        ViewButton = new Button("View");

        l1 = new Label("North");
        l2 = new Label("East");
        l3 = new Label("West");

        Top.add(ViewButton);

        Top.add(l1);        
        //LeftSide.add(l2);
        //RightSide.add(l3);

        ViewButton.addActionListener(this);     
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub

    }

class Panel1 extends JPanel {

Panel1() {
super();
}

public void paint(Graphics g) {
}

}

class Panel2 extends JPanel {

Panel2() {
super();
}

   private Image img;

   public void init()
   {
      img = null;
   }
   public void loadImage()
   {
      try
      { 
         img = getImage(getCodeBase(), "input1.png");
      }
      catch(Exception e) { }
   }
   public void paint(Graphics g)
   {
      if (img == null)
         loadImage();
      g.drawImage(img, 0, 0, this);
      //g.drawImage(img,0,0,(int)getBounds().getWidth(), (int)getBounds().getHeight(),this);
   }

}

class Panel3 extends JPanel {

Panel3() {
super();
}

   private Image img;

   public void init()
   {
      img = null;
//setSize(400,400);
   }
   public void loadImage()
   {
      try
      { 
         img = getImage(getCodeBase(), "input2.png");
      }
      catch(Exception e) { }
   }
   public void paint(Graphics g)
   {
      if (img == null)
         loadImage();
      g.drawImage(img, 0, 0, this);
//g.drawImage(img,0,0,(int)getBounds().getWidth(), (int)getBounds().getHeight(),this);
   }
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:15:54.090

[从ImageViewer](https://stackoverflow.com/a/13512826/418556)中使用的容器开始。它将图像居中在滚动窗格内，其滚动条可靠地显示。

![](../Images/9087d2d94f3f77169e73b6a6dc3f587e.png)

## 更多提示

1.  *“我以前从未使用过小程序。”* 这是不祥的，因为小程序比框架更难开发和部署。我建议首先在 JFrame 中开发它（然后使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动框架）。只有在看到使用 JWS 启动的框架之后，您才应该考虑使用小程序。到那个阶段，所需的任何“转换”都会简单得多。
2.  永远不要调用`setSize(..)`小程序。大小在 HTML 中。
3.  除非必要，不要混合使用 Swing 和 AWT 组件，使用所有 Swing。
4.  设置任何组件的大小（首选、最大或最小）通常不是一个好主意。
5.  请了解类、方法和属性名称的常见[Java 命名约定](http://java.sun.com/docs/books/jls/second_edition/html/names.doc.html#73307)（特别是名称的大小写）并始终如一地使用它。

# python - 给定dict1 key2时找到dict1 key1的值？

> ID：13794844
> 
> 赞同：1
> 
> 时间：2012-12-10T04:06:13.093
> 
> 标签：python, search, dictionary, key-value, lookup-tables

我想从值最接近`'haz'`的字典的键中获取值。`'foo'``'barn'`

这是我效率低下的解决方案：

```
data = [{'foo': 'bar', 'haz': 'bzr'}, {'foo': 'zoo', 'haz':'bnr'}]

from difflib import get_close_matches

closest = get_close_matches('barn', [elem['foo'] for elem in data])
print 'result =', [elem['haz'] for elem in data if elem['foo']==closest[0]][0] 
```

什么是更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:27:45.283

你可以这样做：

```
from difflib import SequenceMatcher
from functools import partial
from operator import itemgetter

data = [
    {'foo': 'bar', 'haz': 'bzr'},
    {'foo': 'zoo', 'haz': 'bnr'},
    {'foo': 'potato', 'haz': 'test'}
]

matcher = partial(SequenceMatcher, 'barn')  # I'd find a better distance function
pairs = enumerate(map(itemgetter('foo'), data))  # Constructs index, value pairs

index, value = sorted(pairs, key=lambda x: matcher(x[1]).ratio())[0]

print data[index]['haz'] 
```

我会找到一个更快的编辑距离实现，因为调用`SequenceMatcher`（`get_close_matches`在内部进行）不是一个理想的解决方案。

# mongodb - MongoDB：如何根据 Mongo 中的两个参数进行搜索

> ID：13794849
> 
> 赞同：1
> 
> 时间：2012-12-10T04:07:16.063
> 
> 标签：mongodb

我的 Mongo DB 中有一个名为 Orders 的集合。

是否可以根据两个文件对 mongo DB 进行搜索。

例如，我想根据符号和 hi 搜索集合

```
db.Orders.find({"symbol" : "AADI"}) 
```

请让我知道如何在搜索中包含其他参数 hi ？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T04:09:22.507

只需用逗号分隔两个条件：

例如

```
db.users.find(
    { status: "A",
      age: 50 }
) 
```

[http://docs.mongodb.org/manual/reference/sql-comparison/](http://docs.mongodb.org/manual/reference/sql-comparison/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:15:57.940

Mongodb 提供了一个隐式的`AND`，所以当你这样做时

```
db.inventory.find( { price: 1.99, qty: { $lt: 20 } , sale: true } ) 
```

它和

```
db.inventory.find({ $and: [ { price: 1.99 }, { qty: { $lt: 20 } }, { sale: true } ] } ) 
```

对于其他运营商，您可以查看[参考](http://docs.mongodb.org/manual/reference/operator/)

**将 $or 与逻辑 AND 混合**

```
db.inventory.find( { price:1.99, $or: [ { qty: { $lt: 20 } }, { sale: true } ] } ) 
```

此查询将选择清单集合中的所有文档，其中：

price 字段值等于 1.99，qty 字段值小于 20 或 sale 字段值为 true。

**其他运营商**

您可以参考其他运算符的示例[参考](http://docs.mongodb.org/manual/reference/operator/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-17T18:32:11.070

此外，一旦你使用：

```
db.users.find(
{ status: "A",
  age: 50 }).pretty() 
```

在语句末尾使用`pretty()`方法，确保信息附带`\n`一个`key : value`

# xslt - 根据外部 for-each 索引在 select 中设置 html option 元素的选定属性

> ID：13794852
> 
> 赞同：0
> 
> 时间：2012-12-10T04:07:30.733
> 
> 标签：xslt, select, foreach, option, value-of

标题听起来比实际问题要复杂得多：我一直试图通过在 stackoverflow 和其他地方找到的点点滴滴把事情放在一起，但我不太明白。

任务：我有一个项目列表，我想遍历它，对于每次迭代，我想创建一个下拉列表，然后默认情况下根据当前整体索引选择项目。

这个例子会很清楚。这是 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Plants>
   <Plant PlantId="13" PlantType="Tree"/>
   <Plant PlantId="25" PlantType="Flower"/>
   <Plant PlantId="70" PlantType="Shrub"/>
</Plants> 
```

然后我有一些 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html" indent="yes" encoding="UTF-8" omit-xml-declaration="yes"/>
    <xsl:template match="/">
        <xsl:param name="listIdx" select="0">
        </xsl:param>
        <table>
            <thead>
                    <tr>
                        <td>PlantType</td>
                    </tr>
            </thead>
            <tbody>
                <xsl:for-each select="Plants/Plant">
                    <tr>
                        <td>
                            <select>
                                <xsl:for-each select="/Plants/Plant">
                                    <xsl:element name="option">
                                        <xsl:attribute name="value">
                                            <xsl:value-of select="@PlantId"/>
                                        </xsl:attribute>
                                        <xsl:if test="count(.) = 2">
                                            <xsl:attribute name="selected">selected</xsl:attribute>    
                                        </xsl:if>
                                        <xsl:value-of select="@PlantType"/>
                                    </xsl:element>
                                </xsl:for-each>
                            </select>
                        </td>
                    </tr>
                </xsl:for-each>
            </tbody>
        </table>        
    </xsl:template>
</xsl:stylesheet> 
```

我得到的是：

> PlantType
> Tree [=带有树、花、灌木
> 的下拉列表] Tree [=带有树、花、灌木的
> 下拉列表] Tree [=带有树、花、灌木的下拉列表]

我想要的是：

> PlantType
> Tree [=带有树、花、灌木的下拉列表（预选 idx 1）]
> 花 [=带有树、花、灌木的下拉列表（预选 idx 2）]
> Shrub [=带有树、花、灌木的下拉列表（预选 idx 3）]

我想会有两种方法：1）在外循环中使用listIdx（匹配），然后将内循环中的当前索引与listIdx进行比较。2）动态比较内部列表索引和外部列表索引。如果说明关键组件很容易，我将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:52:05.803

你可以做的是在你的外循环中定义一个变量来保存植物元素的当前位置

```
 <xsl:variable name="position" select="position()"/> 
```

然后，在你的内部循环中，你可以检查这个变量的第二个位置，它仍然在范围内

```
<xsl:if test="position() = $position">
    <xsl:attribute name="selected">selected</xsl:attribute>
</xsl:if> 
```

在这种情况下，这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html" indent="yes" encoding="UTF-8" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <xsl:param name="listIdx" select="0"/>
        <table>
            <thead>
                <tr>
                    <td>PlantType</td>
                </tr>
            </thead>
            <tbody>
                <xsl:for-each select="Plants/Plant">
                    <xsl:variable name="position" select="position()"/>
                    <tr>
                        <td>
                            <select>
                                <xsl:for-each select="/Plants/Plant">
                                    <xsl:element name="option">
                                        <xsl:attribute name="value">
                                            <xsl:value-of select="@PlantId"/>
                                        </xsl:attribute>
                                        <xsl:if test="position() = $position">
                                            <xsl:attribute name="selected">selected</xsl:attribute>
                                        </xsl:if>
                                        <xsl:value-of select="@PlantType"/>
                                    </xsl:element>
                                </xsl:for-each>
                            </select>
                        </td>
                    </tr>
                </xsl:for-each>
            </tbody>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

这会产生以下输出

```
<table>
    <thead>
        <tr>
            <td>PlantType</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <select>
                    <option value="13" selected="selected">Tree</option>
                    <option value="25">Flower</option>
                    <option value="70">Shrub</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select>
                    <option value="13">Tree</option>
                    <option value="25" selected="selected">Flower</option>
                    <option value="70">Shrub</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <select>
                    <option value="13">Tree</option>
                    <option value="25">Flower</option>
                    <option value="70" selected="selected">Shrub</option>
                </select>
            </td>
        </tr>
    </tbody>
</table> 
```

但是，通常最好使用**xsl:apply-templates**而不是**xsl:for-each**，如果只是为了避免过多的缩进。在这种情况下，您也可以将位置作为参数传递。以下 XSLT 也产生相同的输出

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html" indent="yes" encoding="UTF-8" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <xsl:param name="listIdx" select="0"/>
        <table>
            <thead>
                <tr>
                    <td>PlantType</td>
                </tr>
            </thead>
            <tbody>
                <xsl:apply-templates select="Plants/Plant"/>
            </tbody>
        </table>
    </xsl:template>

    <xsl:template match="Plant">
        <tr>
            <td>
                <select>
                    <xsl:apply-templates select="/Plants/Plant" mode="options">
                        <xsl:with-param name="position" select="position()"/>
                    </xsl:apply-templates>
                </select>
            </td>
        </tr>
    </xsl:template>

    <xsl:template match="Plant" mode="options">
        <xsl:param name="position"/>
        <option value="{@PlantId}">
            <xsl:if test="position() = $position">
                <xsl:attribute name="selected">selected</xsl:attribute>
            </xsl:if>
            <xsl:value-of select="@PlantType"/>
        </option>
    </xsl:template>
</xsl:stylesheet> 
```

还要注意使用属性值模板在**选项元素上创建****值**属性（并注意实际上不需要使用**xsl:element**来创建静态名称元素）

# java - java中的除法程序-两个问题需要纠正-解释如下

> ID：13794858
> 
> 赞同：-3
> 
> 时间：2012-12-10T04:08:07.143
> 
> 标签：java, math, logic, boolean-logic, try-catch-finally

我已经编写了程序但是我有两个问题：

1.  我不希望计数器 i 从 1 变为 x，因为它会尝试对每个小于实际用户输入的数字进行可分性测试。我需要它从 2 开始 i 一直到 12 以便您只尝试 2-12 的测试。

2.  可分性测试是正确的，它适用于每个数字，但这不是程序描述中所要求的。我需要为每个可分性测试实现上述算法。（我已经研究过，但不知道该怎么做）我拥有的这个简化程序更有意义 - 只是一个开始的地方会很有帮助

（注意：不能使用 % 模运算符）

Div by 2 最后一位是偶数 (0,2,4,6,8) 例如：128 是 129 不是 Div by 3 数字之和可以被 3 整除 Ex:381 (3+8+1=12, and 12÷3 = 4) Yes 217 (2+1+7=10, and 10÷3 = 3 1/3) No Div by 4 最后两位数能被 4 整除 例如：1312 是 (12÷4=3 ) 7019 不是 5 最后一位是 0 或 5 175 是 809 不是除以 6 （注：您可以将 6 作为单独的用户定义函数或使用 2 和 3 的函数）该数字可以被 2 和 3 整除例如：114（偶数，1+1+4=6 和 6÷3 = 2）是 308（偶数，但是 3+0+8=11 和 11÷3 = 3 2/3）否

还有更多 - 只是一个开始的地方或有一些有用信息的链接将不胜感激。谢谢

```
import java.io.PrintStream;
import java.util.Scanner;

public class rwsFinalExam
{
    public static void main(String [] args)
    {
        Scanner scanner = new Scanner( System.in ); 
                     //allows input from concole
        PrintStream out = System.out;               
                    //assigning System.out to PrintStream

        out.print( "Input a valid whole number: " ); 
                    //ouput directions for end user to enter a whole number

        String input = scanner.next();  //holds end user input
        int number;                     //data type and variable 

        try 
        {
            number = Integer.parseInt(input);   
                  //assinging value to number 
                  //integer.parseInt method converts string to int
        }
        catch (Exception e)
        {
            out.println(input + " is not a valid number");
            return;
        }

        if (number < 0)
        {
            out.println(number + " is not a valid number");
            return;
        }

        printDivisors(number);
    }

    private static void printDivisors(int x)
    {
        PrintStream out = System.out;
        for (int i=1; i<x; i++) 
        {
            if (isDivisibleBy(x, i)) //checking divisibility 
            {
                out.println(x + " is divisible by " + i); 
                     //output when value is divisible 
            }
            else
            {
                out.println(x + " is not divisible by " + i); 
                     //output when value not divisible
            }//end if else
        }//end for
    }//end private static

    private static Boolean isDivisibleBy(int x, int divisor)
    {
        while (x > 0)
        {
            x -= divisor;
            if (x == 0)
            {
                return true;
            }
        }
        return false;
    }//end
}//end class rwsFinalExam 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:42:14.797

您应该做的第一件事是获取数组中的数字。

```
 private static Boolean isDivisibleBy(int x, int divisor)
{
    char[]b=String.valueOf(x).toCharArray();
    //Store all your digits as characters
    int[]no= new int[b.length];
    for (int i=0;i<b.length;i++)
       no[i]=Integer.parseInt(String.valueOf(b[i]));
    //Now no contains all your integers as an array 
    if(divisor==2)
           return isDivisibleBy2(no);
    else if(divisor==3)
           return isDivisibleBy3(no);
    else if(divisor==4)
           return isDivisibleBy4(no);
    //...................
    else return false;
} 
```

然后为每个测试编写一个类似 2 的方法：

```
private static Boolean isDivisibleBy2(int[] x){
         int lastDigit=x[x.length-1];
         if(lastDigit==0 || lastDigit==2 || lastDigit==4 || lastDigit==6 || lastDigit==8)
           return true;
        else
           return false;
} 
```

无论如何，您必须为每个测试编写类似的代码。

# java - Java：如何让线程等待用户的 IO 然后继续

> ID：13794863
> 
> 赞同：1
> 
> 时间：2012-12-10T04:09:11.557
> 
> 标签：java, multithreading, swing, io

在 DbInterface 类中，函数 openDB() 打开与服务器上的 Oracle DB 的连接。出于安全原因，用户必须在 JFrame 文本区域中输入密码，然后程序才能继续连接。现在这个 Jframe 有一个动作监听器，它等待用户输入密码并调用 OpenDBContinue() 方法。

现在的问题是：openDB() 不会等待 Jframe IO 完成并假设 DB 已打开，将控制权返回给调用类（调用 openDB() 的人），然后他们继续开始查询显然失败的 DB！

现在如何让 openDB() 等待 Jframe IO 完成？这是给你一个想法的代码。

```
public void openDB(int inFileInx,String inRemoteDBURLFull) throws FileNotFoundException
{   
    if(this.password!=null)
        try
        {   openDBcontinue(inFileInx,inRemoteDBURLFull);
        }
        catch(Exception exp)
            {   DpmLogger.dtlException("SPDBInterfaceException:OpenDB", exp);
            }
    else {
            passwd  =       new JFrame();
            passwd.setLocation(SpdMain.bTabbedPanel.getWidth()/2,SpdMain.bTabbedPanel.getHeight()/2);
            passwd.setTitle("Enter Passwd for user "+username);
            JPasswordField p =new JPasswordField(10);
            p.addActionListener(this);
            p.setActionCommand(inFileInx+","+inRemoteDBURLFull);
            passwd.add(p);
            passwd.setPreferredSize(new Dimension(300,50));
            passwd.pack();
            passwd.setVisible(true);
            pass=new Thread(new Runnable()  
            {   
                public void run() {
                    DpmLogger.dtlTraceOut("The password thread has completed and has got password from the user",DpmLogger.TRACE_RARE,myId);
                }

            });

            try {
                    pass.join();
                } catch (InterruptedException e) 
                    {
                        DpmLogger.dtlTraceOut("Password thread unable to join",DpmLogger.TRACE_RARE,myId);
                    }

                DpmLogger.dtlTraceOut("Password thread now joined",DpmLogger.TRACE_RARE,myId);
        }

}

public void actionPerformed(ActionEvent e) 
{   JTextField p=(JTextField)e.getSource();
    if(password==null)
    password=p.getText();
    passwd.setVisible(false);

    String[] inVars=e.getActionCommand().split(",");
    try
    {   openDBcontinue(Integer.parseInt(inVars[0]),inVars[1]);
             pass.start();
    }
    catch(Exception exp)
    {   DpmLogger.dtlException("SPDBInterfaceException:OpenDB", exp);
    }
} 
```

如您所见，我正在尝试使该方法在带有 join() 的“通过”线程上等待。当 IO 完成时，动作监听器启动 pass 线程。但它不起作用。OpenDB() 无需等待“通过”运行即可返回。这是因为该方法不在线程内吗？我必须让这个 DBInterface 类扩展 Thread 类吗？我很困惑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:37:48.040

> 出于安全原因，用户必须在 JFrame 文本区域中输入密码

为了：

1.  方便（和可能的解决方案）交换`JFrame`模态对话框或`JOptionPane`. EG 如[this answer](https://stackoverflow.com/a/10834128/418556)所示。
    ![](../Images/f1d7eafde0ed8c95544fb732aaf8690e.png)
2.  安全性使用 a而不是[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)`JPassWordField`中看到的“textarea” 。
    ![在此处输入图像描述](../Images/dbc589fe87222f153b222bfa2b77d325.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T04:45:14.987

You could use a `JDialog`, but that would require you to manage the close operations (add buttons and mess about with states), or you could simply use a `JOptionPane`

Either (when set to modal) will cause the Event Dispatching Thread to pause execution at that point until they are closed.

![enter image description here](../Images/7bb3288a6955eea5b65e06f6005baddd.png)

```
public class TestDialog01 {

    public static void main(String[] args) {
        new TestDialog01();
    }

    public TestDialog01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                PasswordPane pane = new PasswordPane();
                int result = JOptionPane.showConfirmDialog(null, pane, "Password", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);
                if (result == JOptionPane.OK_OPTION) {
                    // get the result...
                }

            }
        });
    }

    public class PasswordPane extends JPanel {

        private JTextField userName;
        private JPasswordField password;

        public PasswordPane() {
            userName = new JTextField(12);
            password = new JPasswordField(12);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(new JLabel("User Name:"), gbc);
            gbc.gridx++;
            add(userName, gbc);

            gbc.gridy++;
            gbc.gridx = 0;
            add(new JLabel("Password:"), gbc);
            gbc.gridx++;
            add(password, gbc);
        }

        public String getUserName() {

            return userName.getText();

        }

        public char[] getPassword() {

            return password.getPassword();

        }
    }
} 
```

Check out [How to Make Dialogs](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html) for more info

# mysql - ExpressionEngine 查询模块和排序 SQL UNION

> ID：13794864
> 
> 赞同：1
> 
> 时间：2012-12-10T04:09:12.850
> 
> 标签：mysql, expressionengine

我在 ExpressionEngine 1.6.4（非常旧的版本）中收到有关此代码的 MySQL 错误

```
{exp:query  limit="10" paginate="bottom"
    sql="SELECT 'gallery' AS `content_type`, `cat_id` AS `entry_id`, `recent_entry_date` AS `entry_date`
        FROM `exp_gallery_categories`
        WHERE `gallery_id` = 9 AND total_files > 0
        UNION
        SELECT 'video' AS `content_type`, `entry_id`, `entry_date`
        FROM `exp_weblog_titles`
        WHERE `weblog_id` = 6 ORDER BY `entry_date` DESC"

    }
<p>{content_type} - {entry_id} - {entry_date format="%d %F %Y"}</p>
{paginate}{pagination_links}{/paginate}
{/exp:query} 
```

MySQL 返回：

```
MySQL ERROR: Error Number: 1054
Description: Unknown column 'entry_date' in 'order clause'
Query: SELECT COUNT(*) AS count FROM `exp_gallery_categories` WHERE `gallery_id` = 9 AND total_files > 0 UNION SELECT COUNT(*) AS count FROM `exp_weblog_titles` WHERE `weblog_id` = 6 ORDER BY `entry_date` DESC 
```

似乎 EE 在 MySQL 之前修改了我的查询并使其失败（在 SQL 客户端上这很顺利）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:06:19.827

答案是修补**mod.query.php**以停止修改查询

```
$query = $DB->query("SELECT COUNT(*) AS count FROM ({$sql}) AS query"); 
```

这是 Dom Stubbs 的终极深入回答：[ExpressionEngine 1 Query Module and Ordering SQL UNION](https://expressionengine.stackexchange.com/a/1438/150)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T04:11:44.353

我假设您的选择查询有效。试试下面：

```
 sql="SELECT * FROM 
        (SELECT gallery AS content_type, cat_id AS entry_id, 
          recent_entry_date AS entry_date
          FROM exp_gallery_categories
          WHERE gallery_id = 9 AND total_files > 0
          UNION
          SELECT video AS content_type, entry_id, entry_date
          FROM exp_weblog_titles
          WHERE weblog_id= 6 
         ) AS TEMP
       ORDER BY entry_date DESC" 
```

编辑：计数查询：

```
 SELECT COUNT(*) AS count 
         FROM 
            ( SELECT COUNT(*) AS count,
              recent_entry_date AS entry_date
              FROM exp_gallery_categories 
              WHERE gallery_id = 9 AND total_files > 0 
              UNION 
              SELECT COUNT(*) AS count,
              entry_date
              FROM exp_weblog_titles 
              WHERE weblog_id = 6 
           ) AS TEMP 
         ORDER BY entry_date DESC 
```

# python - 如何在 Python 中将所有打印导出到 .txt 文件？

> ID：13794873
> 
> 赞同：2
> 
> 时间：2012-12-10T04:10:54.633
> 
> 标签：python, text, export

> **可能重复：**
> [将标准输出重定向到 Python 中的文件？](https://stackoverflow.com/questions/4675728/redirect-stdout-to-a-file-in-python)

我终于完成了我项目的所有代码。现在，我需要将所有标记为“打印”的内容实际导出到 .txt 文档中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T04:17:39.500

我什至不会从 python-fix 的角度来解决这个问题，而只是重定向运行 python 脚本的输出：

```
python /path/to/script/myscript.py > /path/to/output/myfile.txt 
```

您的脚本无需更改任何内容，所有打印语句都将在您的文本文件中结束。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T04:15:02.133

重定向`stdout`到一个文件。

```
import sys
sys.stdout = open('log.txt', 'w')
print 'Write this to file.' 
```

编辑：如果您使用此方法，请在完成写入后关闭文件：sys.stdout.close()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T04:16:13.523

1）打开一个文件进行写入：

```
f = open("file.txt", "w") 
```

2) 用 print >>f 替换所有的 print 语句，例如：

`print "hello"`变成`print >>f, "hello`

3）完成后关闭文件

```
f.close() 
```

# api - Analytics API 查询 - “带来访问的关键字数”

> ID：13794875
> 
> 赞同：1
> 
> 时间：2012-12-10T04:11:22.823
> 
> 标签：api, google-analytics, reporting

我的任务是使用 Google Analytics API 生成一份报告，该报告显示“提供访问的关键字数量”，该报告应返回过去 30 天内每天提供访问的唯一关键字的数量。我使用 API 本身没有问题，但似乎无法弄清楚我将使用哪些指标来生成此统计信息。有一个看起来很理想的“ga:searchUniques”，但它仅可用于内部站点搜索。有任何想法吗？

# llvm - 如何在 LLVM 中获取循环归纳变量的名称？

> ID：13794877
> 
> 赞同：1
> 
> 时间：2012-12-10T04:11:26.990
> 
> 标签：llvm

我想得到循环归纳变量的名字，这样取名字对吗？

```
void analyze_loop(Loop* loop) {
    errs() << loop->getCanonicalInductionVariable()->getName() << "\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:14:30.510

是的，这看起来是正确的——当然，假设可以找到一个规范的归纳变量。

# castle-windsor - NServiceBus 网关 IOC 和 MessageHandler 问题

> ID：13794879
> 
> 赞同：0
> 
> 时间：2012-12-10T04:11:38.550
> 
> 标签：castle-windsor, nservicebus

我已经设置了一个 NSB 网关演示项目，一切正常。（SiteA 向 SiteB 发送 msg，SiteB 回复确认。ie.Bus.Reply()）

然后我继续使用 .CatleWindsorBuilder() 而不是 .DefaultBuilder()。大部分工作，注入了我的自定义类型。但是，当 SiteB 的 Bus.Reply() 时抛出异常。

```
Bus.Reply<CustomerOrderReceived>(m => { m.BranchOffice = "US"; m.Description = message.Description; }); 
```

例外是：“找不到消息类型的处理程序：CustomerOrderReceived”听起来好像找不到 SiteA`OrderReceivedMessageHandler : IHandleMessages<CustomerOrderReceived>`

这是 SiteA 的 EndpointConfig

```
_container = new WindsorContainer();

        Configure.With()
            .CastleWindsorBuilder(_container)
            .XmlSerializer()
            .MsmqTransport().IsTransactional(true)
            .FileShareDataBus(".\\databus").UnicastBus().ImpersonateSender(false).LoadMessageHandlers();

        _container.Register(Component.For<IOrderTask>().ImplementedBy<OrderTask>());
        _container.Register(Component.For<IWindsorContainer>().Instance(_container));
        _container.Install(FromAssembly.InThisApplication()); 
```

但是 SiteA 中的消息处理程序都可以正常工作。

想知道是否有人在 NSB 有温莎城堡 IOC 的工作样本？我只是在谷歌上找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:32:22.700

得到了排序！通过使用 StructureMapBuilder()

但是，现在我相信这是在网关场景中处理 Bus.Reply() 时的 NSB 错误。

# c# - 保存增量值的最佳数据结构？

> ID：13794888
> 
> 赞同：0
> 
> 时间：2012-12-10T04:12:25.060
> 
> 标签：c#, data-structures

我必须创建一个函数来返回角色拥有的咒语。

所以我有 3 个参数：一个级别（一个 1-50 的整数），一个代表字符类（只有 8 个类）的枚举和一个代表种族（3-4 个种族）的枚举。

此函数必须返回一个带有拼写 ID 的数组。等级越高，角色拥有的法术越多。

到目前为止，我所做的一切都是硬编码的，但是当我必须修改某些东西时，它就变得一团糟了。我不知道哪种数据结构最适合我的需求，而不会反复出现`if`难以更改/维护的可怕 s。

此外，语言是 C#，我使用的是 Xna/.NET 4.0

### 更新

```
public static int[] ListOfSpells(int level, CharacterClass chClass, CharacterRace chRace)
{
    switch (chClass)
    {
        case CharacterClass.Mage:
            return new int[] { 1, 2, 3 };
        case CharacterClass.Knight:
            return new int[] { 2, 5, 6 };
        case CharacterClass.Paladin:
            return new int[] { 3, 5, 6, 2 };
        default:
            return new int[] { };
    }
}

// classes

public enum CharacterClass : short
{
    Mage = 0x00,
    Warlock,
    Priest,

    Monk,
    Knight,
    Assassin,

    Paladin,
    Hunter,
    Warrior
}

// races

public enum CharacterRace : short
{
    Human = 0x00,
    Elf
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:25:33.797

> 我不知道哪种数据结构最适合我的需求，而不会反复出现难以更改/维护的可怕 ifs。

一个简单的普通数组，替代数据库中的一个表。

领域：

*   拼写 ID
*   特点
*   班级
*   等级
*   描述 blablabla...

然后按匹配条件过滤。

我建议不要返回一个数组——那是没用的。使方法 IEnumerable，然后你可以在需要时使用 ToArray() ，或者只是沿着它运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:46:36.007

一个数据库，如果你需要的话。您也许可以使其与`IEnumerable`/ `Array`now 一起使用，但数据库将为您提供未来游戏所需的灵活性。

# javascript - 关于在 node.js 和浏览器中共享模型代码的建议

> ID：13794890
> 
> 赞同：2
> 
> 时间：2012-12-10T04:12:39.767
> 
> 标签：javascript, node.js, sequelize.js

我使用 Sequelize 作为我的服务器端 ORM。是否有推荐的方法与我的客户端应用程序共享模型代码（尤其是验证）？

请不要推荐需要我迁移到 NoSQL 数据库的解决方案。目前这对我来说不是一个选择。虽然我真的将 Sequelize 作为一个 ORM，但如果它是有益的，我愿意转向其他一些模型实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T22:18:18.850

Persistencejs，但它的维护似乎不如 Sequelize：

[https://github.com/zefhemel/persistencejs](https://github.com/zefhemel/persistencejs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:34:28.723

目前似乎没有端到端的解决方案，即。一个模型库，您可以在浏览器或服务器中只需要它并定义您的模型 - 其中保存、更新等方法将是多态的，要求开发人员仅扩展标准模型类并在客户端或服务器上使用它们。

但是，对于寻找类似解决方案的人 - 我建议使用 JSON 模式验证器，它非常轻松，并提供了一种在客户端和服务器之间共享验证逻辑的简单方法。

# javascript - 试图从灯箱画廊中删除讨厌的替代文字

> ID：13794891
> 
> 赞同：1
> 
> 时间：2012-12-10T04:13:00.857
> 
> 标签：javascript, html, image, lightbox

我在[www.unlicensedeyesurgery.com](http://www.unlicensedeyesurgery.com)上有一个我的画作画廊，它使用了著名的 Lightbox 代码。它有一个问题：Lightbox 代码使用`rel`锚标记的属性在弹出的“窗口”中显示图像的描述。但是，这会以某种方式覆盖图像的`alt`属性，并在鼠标工具提示中显示丑陋的 HTML 代码描述。有没有办法完全禁用工具提示 - 也许使用 JS？

代码示例：

```
<a href="#" rel="<em>lightbox html<span>styled</span> text in here<em>">
  <img src="photo.jpg" alt="this is overwritten" />
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:27:22.733

你的标题被覆盖，`<a title="....">`因为你在这里图像设置它的标题为 alt 内容

你可以用javascript做到这一点：

```
window.onload=function() {
 var images=document.getElementsByTagName('img');
 for (var i in images) {
   images[i].title=images[i].alt ;delete(images[i].alt);
 }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:39:30.533

问题是锚点 rel 优先于工具提示中的图像 alt 标签。

解决方案是添加一个标题：`title="photo title"`到您的所有 img 标签和浏览器将显示，而不是锚的 rel。

# iphone - 如何更改地图套件视图中注释的图钉颜色

> ID：13794895
> 
> 赞同：2
> 
> 时间：2012-12-10T04:13:15.850
> 
> 标签：iphone, objective-c, ipad, mapkit

我想知道如何更改地图套件中注释的图钉颜色。目前我使用以下代码。

```
 //King Solomon's Lodge No. 194
CLLocationCoordinate2D kingsolomons;
kingsolomons.latitude = 38.052041;
kingsolomons.longitude = -78.683218;
Annotation *kingsolomonslodge = [[Annotation alloc] init];
kingsolomonslodge.coordinate = kingsolomons;
kingsolomonslodge.title = @"King Solomon's Lodge No. 194";
kingsolomonslodge.subtitle = @"Charlottesville, VA";
[self.myMapView addAnnotation:kingsolomonslodge]; 
```

我已经用谷歌搜索了这个问题几次，但我不确定如何将它实现到我拥有的当前代码中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:31:05.403

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{

   if (annotation == mapview.userLocation)
    return nil;

    MKPinAnnotationView *pin = (MKPinAnnotationView *) [mapview dequeueReusableAnnotationViewWithIdentifier: @"asdf"];

   if (pin == nil)
      pin = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier: @"asdf"] autorelease];
   else
      pin.annotation = annotation;

 //  NSLog(@"%@",annotation.title);

    NSString *titlename=@"xyz";
   if ([annotation.title isEqualToString:titlename]) {
       pin.pinColor = MKPinAnnotationColorGreen;
     // pin.image=[UIImage imageNamed:@"arrest.png"] ;
}
else{
    pin.pinColor= MKPinAnnotationColorPurple;
}

    pin.userInteractionEnabled = YES;
    UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeCustom];
//  //pin.image=[UIImage imageNamed:@"arrest.png"] ;

pin.rightCalloutAccessoryView = disclosureButton;
//pin.pinColor = MKPinAnnotationColorRed;
pin.animatesDrop = YES;
[pin setEnabled:YES];
[pin setCanShowCallout:YES];
return pin;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T04:23:31.283

如果`MKAnnotation`类，您可以使用 pinColor 属性。

```
kingsolomonslodge.pinColor = MKPinAnnotationColorGreen; 
```

另一种方法是您可以使用图像而不是使用`viewForAnnotation:`委托的默认引脚：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[yourAnnotationLocation class]])
    {

        MKAnnotationView *annotationView = (MKAnnotationView *) [_mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
        if (annotationView == nil)
        {
            annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
            annotationView.enabled = YES;
            annotationView.canShowCallout = YES;
            annotationView.image = [UIImage imageNamed:@"yourImage.png"];//here we use a nice image instead of the default pins
            annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        }
        else
        {
            annotationView.annotation = annotation;
        }
        return annotationView;
    }

return nil;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T04:15:46.477

试试这个人...

```
kingsolomonslodge.pinColor = AnnotationColorRed; 
```

让我知道它是否有效

编码快乐！！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:41:44.310

如果您想应用自定义颜色，您也可以添加图像。

```
 MKAnnotationView *pinView = nil; 
pinView.image = [UIImage imageNamed:@"pinks.jpg"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-29T06:15:59.713

从 iOS 9 开始：

```
kingsolomonslodge.pinTintColor = UIColor.greenColor; 
```

# iphone - 如何将 facebook 帖子/消息时间转换为正常的 NSDate

> ID：13794897
> 
> 赞同：3
> 
> 时间：2012-12-10T04:13:19.897
> 
> 标签：iphone, ios, timestamp

> **可能重复：**
> [是否有将 ISO8601 时间戳转换为格式化的 NSDate 的简单方法？](https://stackoverflow.com/questions/2201216/is-there-a-simple-way-of-converting-an-iso8601-timestamp-to-a-formatted-nsdate)
> [如何在objective-c中将字符串转换为日期？](https://stackoverflow.com/questions/4380381/how-to-convert-string-to-date-in-objective-c)

如果我 requestForGrpahPath:@"me/inbox" 具有 read_mailbox 权限，那么我会得到这个：

```
"data": [
          {
            "id": "XXXXXXXXXXXXXXXXX",
            "from": {
              "name": "XXXXXXXXXXXX",
              "id": "XXXXXXXXXXXXXXX"
            },
            "message": "yeup!",
            "created_time": "2012-12-03T10:28:21+0000"   // how to convert this time to normal NSdate
          }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T04:21:41.753

在您的情况下，日期格式是，

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH:mm:ssZ"];
NSDate* date = [dateFormatter dateFromString:dateString]; 
```

您可以查看我在评论中提到的其他链接以获取更多详细信息。

# .net - 列表 - .NET 兼容性？

> ID：13794900
> 
> 赞同：0
> 
> 时间：2012-12-10T04:13:41.117
> 
> 标签：.net, list

我正在使用 zedgraph，以下代码在 Visual Studio 2008 中运行良好，项目针对 .NET 2.0 来创建不同 x、y 点的列表：

```
Dim coordList As New List(Of PointPairList)
   For i As Integer = 0 To 10
   coordList.Add(New PointPairList())
Next 
```

我在针对 .NET 4 的项目中尝试了 Visual Studio 2010 中完全相同的代码，因为我需要使用内存映射，但我无法填充列表；它说

**(0) = Count = (Count) 引发了 System.TypeLoadException 类型的异常。错误 - 没有可用的孩子**

为什么列表在 VS2008 (.NET2) 中有效，但在 VS2010 (.NET4) 中无效？

编辑：下面的原始代码在VS2010（.NET4）中工作正常，只是我无法创建pointpairlists列表：- Dim coordList As New List（Of PointPairList）

原始代码：

```
Dim list1 As New PointPairList()
For i As Integer = 0 To 10
  list1.Add(x, y1)
Next 
```

编辑2：这是在循环之前出现的错误图片：

![错误](../Images/f5f63bb247df93f246f8fcf9b8e959f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:48:12.870

代码工作正常。`PointPairList`迭代器抛出异常，因为您将其留空`PointPairList`。

示例 ...（当您查看外循环后的值时，这不会显示错误）

```
Dim coordList As New List(Of PointPairList)
For i As Integer = 0 To 10
    Dim pointlist = New PointPairList()
    For x = 0 To 10
        pointlist.Add(x, i)
    Next
    coordList.Add(pointlist)
Next 
```

# php - 使用javascript重定向页面

> ID：13794902
> 
> 赞同：0
> 
> 时间：2012-12-10T04:14:01.093
> 
> 标签：php, javascript

我有疑问，我想使用 javascript 重定向页面，该代码用于检测国家/地区 ID。在我在谷歌上查看后，我找到了一种方法。

在`<head>`标签中的 html 上，我插入 window.location = language，language 是变量，它将从 geoapi_country_code 检测国家 ID 这是代码。

```
var language = geoapi_country_code(); 
```

这就是问题所在，当我在 window.location 中使用变量时，它不起作用，但如果我输入普通字符串，它就会起作用。我的问题，我的重定向方式是正确的还是有其他方法可以做到？请提前向我解释一下

我已经尝试使用 window.location.href 并且它可以工作，但是现在又出现了另一个问题，在 Web 重定向之后，它并没有停止而是一次又一次地重定向我该如何停止呢？

```
<script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script>
<script type="text/javascript">
    var language = geoip_country_code();
    if(language == "ID")
    {
        window.location.href= "<?php echo $this->rootUrl(); ?>" + '/' + language.toLowerCase() ;
    }
    else
    {
        window.location.href = "http://localhost/lamanbudaya/public/en";
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:23:58.613

连接字符串：

```
var language = geoapi_country_code(); //lets say language is en_US

window.location.href="http://yourwebsite.com/currentpage?lang=" + language; 
```

# aptana - 我如何告诉 aptana 自动添加构建中包含的鸡蛋？

> ID：13794905
> 
> 赞同：0
> 
> 时间：2012-12-10T04:14:11.120
> 
> 标签：aptana

我正在使用 Aptana3 编写一个 python 应用程序。另外，我编写了一个 buildout.cfg 和 virtualenv 以使该过程可重复和隔离。因此，软件包使用以下方式安装：

```
virtualenv env
env/bin/python bootstrap.py
bin/buildout 
```

就像我们在 python 项目中通常做的那样。

为了节省空间，我将 Buildout 配置为将自动下载的鸡蛋存储到 ~/.buildout/eggs 文件夹中。但并非该文件夹中的所有鸡蛋都被我的项目使用，还有其他项目的鸡蛋。

在 Aptana 中，我创建了一个使用 env/bin/python 解释器的 pydev 项目。问题是这个环境不包括使用 buildout 安装的鸡蛋，并且 Aptana 会发出警报。因此，我使用 Omelette 在文件夹 parts/omelette 中创建了已使用包的符号链接，并将该文件夹添加到解释器包中，但它继续显示错误消息。

如何配置 Aptana 以避免出现该错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:16:40.103

如果 buildout 正在创建`.egg-link`s，您可能会被此错误所困扰：[https ://jira.appcelerator.org/browse/APSTUD-4945](https://jira.appcelerator.org/browse/APSTUD-4945)

我认为如果您将 Aptana 添加`~/.buildout/eggs`到您的`PYTHONPATH`.

# jquery - jquery .on() 没有按预期工作

> ID：13794906
> 
> 赞同：0
> 
> 时间：2012-12-10T04:14:23.373
> 
> 标签：jquery

这是 jsfiddle 的链接。[http://jsfiddle.net/5U4fT/](http://jsfiddle.net/5U4fT/) 如果您有解决方案，请在此处编辑并发送链接。非常感谢！

HTML是

```
 <html>
        <body>

           <a class="bonk" href="#">hi</a><br />
           <a class="make-new" href="#">add bonk class to dom</a><br />

        </body>
     </html> 
```

Javascript是

```
 $('body').on('click', '.bonk ', function() {
       return false;
     }).each(function() {
        $('.bonk').click(function() {
            alert("hi");
         });
    });

    $(".make-new").click(function() {
        $('body').append('<a class="bonk" href="#">hi</a><br />');
     }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T04:17:11.683

[http://jsfiddle.net/5U4fT/1/](http://jsfiddle.net/5U4fT/1/)

删除`.each()`和多余的处理程序。

```
$('body').on('click', '.bonk', function(){
    alert('hi');
    return false;
});
$(".make-new").click(function(){
    $('body').append('<a class="bonk" href="#">hi</a><br />');
});​ 
```

# c++ - 当 API 请求函数指针时使用函数对象

> ID：13794908
> 
> 赞同：0
> 
> 时间：2012-12-10T04:14:38.717
> 
> 标签：c++, c, function-pointers, function-object

我想从 C++ 调用 C API。API 需要一个函数指针，但对我来说，该功能是在 C++ 函数对象中实现的，因为它具有状态。

事实上，所需的功能被分成两个功能对象。C api 需要一个具有两个指针参数的函数，用于返回每个函数对象返回的两个东西。

除了定义全局函数之外，还有什么方法可以使用 C 中的函数对象。例如，它可以重新解释为函数指针吗？

编辑：

为简单起见，可以假设回调的签名是无效的`(*f)(void*, int*, int*)`

哦，它必须是 C++-03

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:19:54.823

大多数 API 允许您通过 void 指针传递某种用户状态。您可以通过那里传递指向您的对象的指针：

```
struct my_obj
{
    void operator()(int*, int*) {}

    static void forwarder(void *state, int *x, int *y) { (*(my_obj*)state)(x, y); }
};

void install_fn(void (*)(void*,int*,int*), void *state);

my_obj obj;
install_fn(my_obj::forwarder, &obj); 
```

对于不允许您传递任何状态的 API（GLUT 是我发现的唯一一种），您的（便携式）运气不佳。

# java - Thread.interrupt 真的会停止程序执行吗？

> ID：13794910
> 
> 赞同：-1
> 
> 时间：2012-12-10T04:15:01.090
> 
> 标签：java, multithreading, thread-safety

我正在使用停止线程执行，`Thread.interrupt`但线程执行不会停止。它还在运行。

例子 ：

```
Thread t = new Thread(new Runnable() {

            @Override
            public void run() {
                    int i = 0;
                    while(i<10000){
                        if(Thread.currentThread().isInterrupted()){
                            System.out.println("Thread Interrupted but it still running");
                        }
                        System.out.println(++i);
                        try {
                            Thread.sleep(2);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
            }
        });
        t.start();
        t.interrupt(); 
```

我无法检查`Thread.isInterrupted()`线程是否被中断跳出循环。我不能这样做。在这里，我只是展示示例示例。

我的疑问是`Thread.interrupt`只设置`interrupted`标志或它真的停止执行。

对此的任何帮助将不胜感激。

如何停止线程执行或终止正在运行的线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:39:17.350

Thread.interrupt() 将真正中断实际检查该状态的操作（例如，可中断的 I/O 操作或一些明确检查 isInterrupted() 的用户代码，原则上您在引用的代码中所做的那样）。

在您引用的具体示例中，您需要记住：

*   每个处理器内核每秒执行数十亿条指令；
*   进程切换以每秒数十到数百次的量级发生。

换句话说，您将计数器递减 10,000 次的任务发生得如此之快，以至于从所有意图和目的来看，它几乎不会被视为“可中断任务”。在实践中，所有 10,000 次递减都将在另一个线程有机会调用 interrupt() 之前发生，或者它们不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:40:04.747

如果线程在等待、睡眠或加入时被阻塞，则抛出 InterruptedException，否则设置中断状态。

如果调用 Thread.interrupted，则清除中断状态。

Thread.isInterrupted 不会清除中断状态。

如果设置了线程的中断状态并且该线程调用了等待、睡眠或加入，则中断状态被清除并抛出 InterruptedExcepion。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:23:17.940

> 我的疑问是 Thread.interrupt 仅设置中断标志或它真的停止执行。

它执行前者......或在某些情况下引发“中断”异常。

> 如何停止线程执行或终止正在运行的线程？

通常，您不能*安全地*停止或终止未检查其中断标志的正在运行的线程。类中有一些**不推荐使用**的方法`Thread`，但您应该避免使用它们，因为它们显然不安全。（要了解为什么使用 Thread 方法 javadocs ...以及它链接到的常见问题解答。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T04:17:01.420

它只设置标志，除非当时正在执行可中断的语句（例如睡眠、等待）。现在，您应该能够通过处理这两种情况来弄清楚如何停止线程。

> 我无法检查 Thread.isInterrupted() 那么如果线程被中断，则跳出循环。我不能这样做。

为什么不？

例如

```
while(i<10000){
    if(Thread.currentThread().isInterrupted()){
        System.out.println("Thread Interrupted but it still running");
        return;    // HERE
    }
    System.out.println(++i);
    try {
        Thread.sleep(2);
    } catch (InterruptedException e) {
        e.printStackTrace();
        return;    // HERE
    }
} 
```

# coq - Coq 中 Fixpoint 的局限性？

> ID：13794916
> 
> 赞同：7
> 
> 时间：2012-12-10T04:15:21.590
> 
> 标签：coq, totality

我在玩 Coq。具体来说，我正在尝试实现合并排序，然后证明它有效。

我的实现尝试是：

```
Fixpoint sort ls :=
match ls with
| nil => nil
| cons x nil => cons x nil
| xs =>
  let (left, right) := split xs nil nil
  in merge (sort left) (sort right)
end. 
```

因此，我得到的错误是：

```
Error:
Recursive definition of sort is ill-formed.
In environment
sort : list nat -> list nat
ls : list nat
x : nat
l : list nat
y : nat
l0 : list nat
left : list nat
right : list nat
Recursive call to sort has principal argument equal to "left" instead of
one of the following variables: "l" "l0".
Recursive definition is:
"fun ls : list nat =>
match ls with
| nil => nil
| x :: nil => x :: nil
| x :: _ :: _ =>
    let (left, right) := split ls nil nil in merge (sort left) (sort right)
end". 
```

我对这些错误的解释是 l 和 l0 是没有头部的 ls、x 和没有 x 的 ls 以及 x 之后的元素（我猜它决定称为 y？）。我没有在这些列表之一上递归而是在本地定义的列表上递归，这很疯狂。

我是否只允许递归直接来自模式匹配的事物？如果是，这似乎是一个严重的限制。有没有办法解决它？我猜 Coq 无法判断该函数将终止。有什么方法可以证明左右都小于 xs 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T11:45:34.923

事实证明，关于通用递归的 CPDT 一章解决了这个特定问题：

[http://adam.chlipala.net/cpdt/html/GeneralRec.html](http://adam.chlipala.net/cpdt/html/GeneralRec.html)

阅读名为有根据的递归的部分，它使用有根据的递归来实现合并排序，以帮助 Coq 的终止检查器满意。

可能有其他方法可以使用`Function`or来解决该问题`Program Fixpoint`，但我认为阅读有关有根据的递归不会受到伤害。

# javascript - 附加到元素不起作用

> ID：13794917
> 
> 赞同：1
> 
> 时间：2012-12-10T04:15:26.377
> 
> 标签：javascript, jquery, html

我有以下 HTML：

```
<textarea class="input" placeholder="Tap to enter message" maxlength="160"></textarea>
<div class="keyboard">
<ul id="special">
    <li data-letter="!">!</li>
    <li data-letter="?">?</li>
    <li data-letter=",">,</li>
    <li data-letter=":">:</li>
    <li data-letter=";">;</li>
</ul>

<ul id="first">
    <li data-letter="q">q</li><li>1</li>
    <li data-letter="w">w</li><li>2</li>
    <li data-letter="e">e</li><li>3</li>
    <li data-letter="r">r</li><li>4</li>
    <li data-letter="t">t</li><li>5</li>
    <li data-letter="y">y</li><li>6</li>
    <li data-letter="u">u</li><li>7</li>
    <li data-letter="i">i</li><li>8</li>
    <li data-letter="o">o</li><li>9</li>
    <li data-letter="p">p</li><li>0</li>    
</ul>

<ul id="second">
    <li data-letter="a">a</li>
    <li data-letter="s">s</li>
    <li data-letter="d">d</li>
    <li data-letter="f">f</li>
    <li data-letter="g">g</li>
    <li data-letter="h">h</li>
    <li data-letter="j">j</li>
    <li data-letter="k">k</li>
    <li data-letter="l">l</li>              
</ul>

<ul id="third">
    <li id="caps" class="pointer">&#8679;<span id="underline" class="color">_</span></li>
    <li data-letter="z">z</li>
    <li data-letter="x">x</li>
    <li data-letter="c">c</li>
    <li data-letter="v">v</li>
    <li data-letter="b">b</li>
    <li data-letter="n">n</li>
    <li data-letter="m">m</li>
    <li><img src="backspace.png"></li>
</ul>

<ul id="fourth">
    <li class>?123</li>
    <li>,</li>
    <li>&emsp;</li>
    <li>.</li>
    <li><img src="search.png"></li>
</ul> 
```

使用以下 javascript：

```
$('.keyboard ul li').click(function() {
  var data = $(this).data('letter');
  $('.input').append(data);
}); 
```

我想要发生的是当我单击其中一个列表项时，我希望数据字母将自身插入输入中，有点像屏幕键盘。但它不起作用。有人能帮我吗？

[这是一个小提琴](http://jsfiddle.net/LvHRr/)

**更新**

[这现在有效](http://jsfiddle.net/rfuRa/)

我的下一个问题是大写按钮。当我单击按钮时，字符变为大写。我将如何使用数据将大写字母注入输入？

最后一个问题是第一行字母不会注入输入。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:24:00.567

试试下面

在小提琴中启用 Jquery 文件而不是 mootools

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:21:05.093

尝试：

[演示](http://jsfiddle.net/LvHRr/24/)

```
$('.keyboard ul li').click(function() {
    var data = $(this).data('letter');
    $('.input').val( $('.input').val()+ data);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:45:06.360

Not sure why jquery .data() not work, but you can use below "this.dataset.xxx"

```
var data = this.dataset.letter; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T04:21:06.637

您所要做的就是删除 .input 元素上的边距（对我来说它在屏幕外），并在 jsfiddle 上启用 jquery。之后它对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T20:03:05.953

这是我想出的解决方案

```
keys = $(".keyboard ul li");
keys.on("click", function() {
  var let = $(this).text(),
    upperlet = let.toUpperCase(),
    lowerlet = let;
  if (keys.hasClass("uppercase")){
    input.append(upperlet);
  }else {
    input.append(lowerlet);
  }
}); 
```

`data-letter`我没有使用每个列表项的属性，而是使用此函数获取文本，并在单击时附加它。现在这也解释了大写字母。

# ios - Tumblr URL 方案

> ID：13794925
> 
> 赞同：3
> 
> 时间：2012-12-10T04:16:12.077
> 
> 标签：ios, tumblr, url-scheme

将 Tumblr 应用程序打开到特定博客 URL 的 iOS URL 方案是什么？

似乎无法在任何地方找到这个。

我的猜测是它的东西

```
tumblr:// 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:56:42.460

iTunes 链接：

```
http://itunes.apple.com/us/app/tumblr/id305343404?mt=8 
```

本机应用程序 URL 字符串示例：

```
tumblr:///link?url=yourURL.com/tumblr/iphone&name=Midhun 
```

扩展示例：

```
tumblr:///link?url=yourURL.com/tumblr/iphone&name=Midhun tumblr:///text?title=Hello&body=World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-09T13:36:12.177

这 ：

```
tumblr://x-callback-url/blog?blogName=[blogName] 
```

如果博客是[http://myblog.tumblr.com](http://myblog.tumblr.com)那么 URL Scheme 将是：

```
tumblr://x-callback-url/blog?blogName=myblog 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T23:23:13.080

[此页面](http://whats12.tumblr.com/post/76942776770/url-schemes-tumblr-for-ios-exposes-actions-using)中的以下提示对我有用：

> iOS 版 Tumblr 使用[x-callback-url 规范](https://t.umblr.com/redirect?z=http%3A%2F%2Fx-callback-url.com%2F&t=ZTVlNDVmNWJjOGRkZDliZDA1MjEyNWZkOTc5OWI0YmM1NTAzMDRjZiw2amp4OWtaVw%3D%3D&b=t%3A6oaiHjl0XbjJ10ZmX0WgaQ&p=http%3A%2F%2Fwhats12.tumblr.com%2Fpost%2F76942776770%2Furl-schemes-tumblr-for-ios-exposes-actions-using&m=1)公开操作。TMTumblrAppClient 类仅在以下 URL 之上提供了一个方便的接口：
> 
> *   tumblr://x-callback-url/dashboard
> *   tumblr://x-callback-url/tag?tag=gif
> *   tumblr://x-callback-url/blog?blogName=bryan
> *   tumblr://x-callback-url/blog?blogName=bryan&postID=43724939726
> 
> 下面的帖子 URL 也支持`x-success`和`x-cancel` 回调参数：
> 
> *   tumblr://x-callback-url/text?title=Title&body=Body&tags=gif&tags=lol
> *   tumblr://x-callback-url/quote?quote=Quote&source=Source
> *   tumblr://x-callback-url/link?title=Bryan&url=bryan.io&description=网站
> *   tumblr://x-callback-url/chat?title=Title&body=Body&tags=gif&tags=lol

这是有效的：`<a href="tumblr://x-callback-url/blog?blogName=luxury-dream-homes&postID=173176271099">test this link</a>`

另请参阅：[https](https://engineering.tumblr.com/post/48855322178/tumblr-sdk-updates) ://engineering.tumblr.com/post/48855322178/tumblr-sdk-updates和[https://github.com/tumblr/TMTumblrSDK#url-schemes](https://github.com/tumblr/TMTumblrSDK#url-schemes)

# node.js - 在静态模型中使用 find

> ID：13794932
> 
> 赞同：0
> 
> 时间：2012-12-10T04:17:04.653
> 
> 标签：node.js, static, find, mongoose

我尝试做的是这样的：

```
A_Schema.statics.init = function init() {
    A_Schema.find({}, {}, {
    }, function (error, docs) {
        if (!error) {
            console.log('There is no error.');
        }
        else {
            console.log(error);
        }
    });
}; 
```

我的意思是，使用`A_Schema`模型的 find 方法，但它一直在崩溃。

我想这是因为内部`A_Schema`必须是正确定义的模型而不是模式，但我不知道该怎么做。

我已经尝试过：

```
A_Schema.statics.init = function init() {
    mongoose.model('A_Schema', A_Schema).find({}, {}, {
    }, function (error, docs) {
        if (!error) {
            console.log('There is no error.');
        }
        else {
            console.log(error);
        }
    });
}; 
```

和

```
A_Schema.statics.init = function init() {
    mongoose.model('A_Schema').find({}, {}, {
    }, function (error, docs) {
        if (!error) {
            console.log('There is no error.');
        }
        else {
            console.log(error);
        }
    });
}; 
```

但它一直在崩溃。

你能帮助我吗？

提前致谢

迪奥斯尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T04:27:23.473

抱歉，我似乎忽略了`mongoose`文档。

在[mongoose 文档](http://mongoosejs.com/docs/guide.html)中可以看到示例：

```
animalSchema.statics.findByName = function (name, cb) {
  this.find({ name: new RegExp(name, 'i') }, cb);
} 
```

因此，在静态内部`this`必须使用引用而不是命名模型。

# mysql - 可用于 Mysql 的区分大小写的 UTF8？

> ID：13794933
> 
> 赞同：0
> 
> 时间：2012-12-10T04:17:08.223
> 
> 标签：mysql, indexing, case-sensitive

我试过 utf8_bin

我有一个价值“AAAA”

我试图添加值“Aaaa”并得到重复的密钥违规。

但我认为二进制会区分大小写。

# jquery - jquery 可选择的交换列表项

> ID：13794935
> 
> 赞同：0
> 
> 时间：2012-12-10T04:17:14.710
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, swap, selectable

我已经看到一个关于在两个下拉列表之间交换值/项目的问题已经提出并回答了，[如何使用 jquery 交换选择列表中的值？](https://stackoverflow.com/questions/13008759/how-to-swap-values-in-select-lists-with-jquery)

我的问题是它可以在 jquery ui-selectable 列表之间完成。您单击列表 1 中的一个元素和列表 2 中的另一个元素，然后单击交换按钮会将每个项目/ div 的内容从一个转移到另一个？

HTML：

```
<button>Swap Values</button>
<div style="display:inline-block">
<div id="selectable" class="mySel">
    <div value=Item1>Item1</div>
    <div value=Item2>Item2</div>
    <div value=Item3>Item3</div>
    <div value=Item4>Item4</div>
</div>

<div id="selectable2" class="mySel2">
    <div value=Item1>Item1</div>
    <div value=Item2>Item2</div>
    <div value=Item3>Item3</div>
    <div value=Item4>Item4</div>
    <div value=Item1>Item5</div>
    <div value=Item2>Item6</div>
    <div value=Item3>Item7</div>
    <div value=Item4>Item8</div>
</div>
</div> 
```

CSS：

```
*{padding:6px; font-size:1.1em}

.mySel, .mySel2{
height: 300px;
width: 200px;
overflow: auto;
border: solid 2px black;
margin-bottom: 20px;
float:left;
margin:10px;
}

.mySel > DIV, .mySel2 > DIV{
height: 50px;
border: solid 1px red;
}

#selectable .ui-selecting { background: #FECA40; }
#selectable .ui-selected { background: #F39814; color: white; }
#selectable2 .ui-selecting { background: #FECA40; }
#selectable2 .ui-selected { background: #F39814; color: white; } 
```

JQUERY 可选：

```
$("#selectable, #selectable2").selectable(); 
```

JQUERY 可排序：

```
$(".mySel, .mySel2").sortable({
    tolerance: 'pointer',
    connectWith: '.mySel, .mySel2',
    helper: 'original',
    scroll: true
}); 
```

JQUERY交换值尝试代码：

```
$('button').click(function() {
    var new1 = [];

    $('.mySel, .mySel2').each(function(i) {
        new1[i] = $(this).val();
    });
    new1.reverse();
    $('.mySel, .mySel2').each(function(i) {
        $(this).val(new1[i]);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:55:29.497

这将在没有 sortable() 方法的情况下工作，它似乎会干扰 selectable() 方法。

```
$('button').click(function(){
   $('#selectable .ui-selected').removeClass('ui-selected').appendTo('#selectable2');
   $('#selectable2 .ui-selected').removeClass('ui-selected').appendTo('#selectable');
}); 
```

**编辑：只要 sortable() 第二次运行，它将与 sortable 方法一起使用。** **编辑：回应后续问题**

## 附加问题

**如何在移动之前判断 list2 中是否已经存在值为“Item1”的元素？**

这里有一些有趣的事情要做。首先是相反列表中的相同术语是否被交换。如果是，则交换可以继续，因为两个列表将继续只有一个值。其次，如果发现重复，则脚本不能完成交换。在交换发生之前，需要检查两组列表的重复项。

我通过结合一些复杂的 jQuery 选择器和一个单独的评估函数来解决这个问题，该函数将返回真或假，具体取决于是否存在重复项。我在下面的代码中添加了注释，解释了它是如何工作的。

```
function testFor($o, $p) { //two collections of Items we are comparing
        var retVal = true; //By default, this script returns true, a mismatched pair results in a return: false;
        $o.each(function() { //Look at each element in the first collection
            var thisDivValue = $(this).attr('value'); //Grab it's value=""
            if ($p.parent().find('div[value=' + thisDivValue + ']').not('.ui-selected').length > 0) { 
            //Search in the opposite collection for an item with a matching value that is NOT selected for swapping, if you find it, return false.
                retVal = false;
                return false;
            }
            else {return true;}
        });
        return retVal; //True or false depending on what was set above.
    }
function showError() {
    alert('DUPLICATE FOUND');
}
$("#selectable, #selectable2").selectable();
$(".mySel, .mySel2").sortable({
    tolerance: 'pointer',
    connectWith: '.mySel, .mySel2',
    helper: 'original',
    scroll: true
});
$('button').click(function() {
    var v = $('#selectable2>div');
    var w = $('#selectable>div');
    var x = $('#selectable .ui-selected');
    var y = $('#selectable2 .ui-selected');
    if ((w.length - x.length + y.length) > 4) {return false;}
    if ((v.length - y.length + x.length) > 8) {return false;}
    if (testFor(x, y) && testFor(y, x)) { //Both of these tests must return TRUE in order for the swap to happen
        $('#selectable .ui-selected').removeClass('ui-selected').appendTo('#selectable2');
        $('#selectable2 .ui-selected').removeClass('ui-selected').appendTo('#selectable');
    }
    else {showError();}
});​ 
```

[jsFiddle](http://jsfiddle.net/radiatorsounds/zBvpk/2/)

# backbone.js - 未调用骨干路由

> ID：13794944
> 
> 赞同：10
> 
> 时间：2012-12-10T04:18:48.527
> 
> 标签：backbone.js, requirejs, backbone-boilerplate

我有一个奇怪的问题，我还没有弄清楚。这很简单，这可能就是我遇到问题的原因:)

首先，这是路由表...

```
routes: {
    '': 'root', //called
    'report': 'report', // called
    'report/add': 'reportAdd', // not called
    'report/print': 'reportPrint', // not called
    'report/settings': 'reportSettings', // not called
}, 
```

您会看到我标记了哪些有效，哪些无效。问题归结为所有子路由（即`report/add`）不匹配。

骨干历史在 main.js 中被正确调用，如下所示：

```
app.Router = new Router();
Backbone.history.start({ pushState: true }); 
```

显然，这是在正确的位置，因为路线正在工作，而不是子路线。我已经尝试了所有`root`选项`Backbone.history`和沉默，`parameter`但没有任何运气。

我想这是一个配置/设置问题，但我找不到任何答案。我究竟做错了什么？任何帮助深表感谢。

顺便说一句，我正在使用 requirejs 和 Backbone Boilerplate，但我不知道这会有什么不同。

**更新：**虽然提供的答案在技术上是正确的，但问题出在 Backbone Boilerplate 上。有关说明，请参阅此[博客文章](http://robdodson.me/blog/2012/05/21/exploring-the-backbone-router-and-history-api/)的底部。我和那里的第一个评论者有同样的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T17:20:43.490

正如评论中所讨论的，问题在于，当使用推送状态样式的 URL 时，服务器无法识别主干路由 URL。

举例来说，假设您的应用程序的根位于`server/app/index.html`，并且您正在尝试使用 Backbone 路由到的 URL `/report/print`。使用 URL**片段路由**，这很好：

```
http://server/app/index.html#report/print 
```

服务端忽略后面的部分`#`，返回index.html；然后加载 Backbone 路由到`report/print`.

但如果您使用的是**push-state routing**，那么 URL 如下所示：

```
http://server/app/index.html/report/print 
```

服务器会抛出 404 错误，因为它无法识别该路径上的任何内容，因此甚至永远不会加载 Backbone。

* * *

解决方案是：

1.  正如[Backbone.js 文档](http://backbonejs.org/#History)所述，修改服务器代码，以便服务器为每个 Backbone 路由呈现正确的内容，或者
2.  （我认为这更容易）在 Web 服务器（[IIS](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)，[Apache](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)）上进行 URL 重写，以便它将返回`index.html`任何像 , 等主干路由的`index.html/report/print`请求`index.html/report/add`。

例如，在 IIS 中，您可以将以下内容放在应用程序根目录下的 web.config 中：

```
<rewriteMaps>
    <rewriteMap name="StaticRewrites">
        <add key="index.html/report/print" value="index.html" />
        <add key="index.html/report/add" value="index.html" />
        <!-- etc -->
    </rewriteMap>
</rewriteMaps> 
```

# javascript - 从 extjs 4 中的手风琴和网格获取价值

> ID：13794947
> 
> 赞同：3
> 
> 时间：2012-12-10T04:19:07.703
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs-grid

我想根据我的网格值的参数制作一个 pdf 报告。我想从手风琴标题中获取年份作为参数编号 1 和月份名称作为参数编号 2。但我无法做到这一点。谁能帮我解决这个问题。下面是我的代码：

```
Ext.define('Ext4Example.view.attendence.Timeperiod' ,{
    extend: 'Ext.form.Panel',
    alias : 'widget.timeperiod',
    id: 'timeperiod',
    region: 'west',
    border: true,
    width: 150,
    height:395,
    split: true,
    defaults: {
        // applied to each contained panel
        //bodyStyle: 'padding:15px'
    },
    layout: {
        // layout-specific configs go here
        type: 'accordion',
        titleCollapse: true,
        animate: true,
        activeOnTop: true,
        hideCollapseTool : true

    },

    initComponent: function() {
        var me = this;
        me.items = me.maccord();
        me.callParent(arguments);
    },
    mstore: function(year){
        var data = [
            [1,  year, 'January'  ],
            [2,  year, 'February' ],
            [3,  year, 'March'    ],
            [4,  year, 'April'    ],
            [5,  year, 'May'      ],
            [6,  year, 'June'     ],
            [7,  year, 'July'     ], 
            [8,  year, 'August'   ], 
            [9,  year, 'September'], 
            [10, year, 'October'  ], 
            [11, year, 'November' ], 
            [12, year, 'December' ]
        ];

        var store = Ext.create('Ext.data.ArrayStore', {
            storeId: 'mstore',
            fields: [              
                {name: 'id', type: 'int'},
                {name: 'year', type: 'int'},
                {name: 'month', type: 'string'}
            ],
            data:data
        });
        return store;
    },
    mpanel: function(year){
        var me = this,
        mpanel = new Ext.grid.Panel({
            border: false,
            viewConfig: {
                stripeRows: true
            },
            hideHeaders: true,
            columns: [
                { text: 'month',  dataIndex: 'month', flex: 1},
                { menuDisabled    : true,
                    sortable        : false,
                    xtype           : 'actioncolumn',
                    width           : 24,
                    items           : [{
                            icon        : "${resource(dir: 'images', file: 'PDF01001.png')}",
                            hide        : true,
                            tooltip     : 'Print PDF Report of this Month?',
                            handler     : function(record) {
                                          alert(record.data.month)
                            }
                        }]
                }
            ],
            listeners:{
                selectionchange:function(model, records ) {
                    var store = Ext.data.StoreManager.lookup('Attendences');
                    var record = records[0];
                    store.load({
                        filters: [
                            {property:'month', value:record.data.id},
                            {property:'year', value:record.data.year}
                        ]          
                    });                    
                }
            },
            store: me.mstore(year),
            width: 150
        });
        return mpanel;
    },
    maccord: function(){          
        var year = ${(new Date()).format('yyyy')},
        limit = year - 5,
        me = this,
        maccord = [];

        for(year; year > limit ; year--){
            maccord.push({
                title: 'Year '+ year,
                ident: 'accordion-panel',
                items: me.mpanel(year)              
            });
        }
        return maccord;
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T01:34:53.300

月份和年份在您的记录中。您不需要从手风琴标题中获取年份。您的问题是，记录不是处理程序中的第一个参数：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action-cfg-handler](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Action-cfg-handler)

```
items: [{
   icon: 'test',
   tooltip: 'Print PDF Report of this Month?',
   scope: this,
   handler: function(view, rowIndex, colIndex, item, e, record) {
        alert(record.data.month + "/" + record.data.year);
   }
}] 
```

你可以看看：http: [//jsfiddle.net/AMx6r/1279/](http://jsfiddle.net/AMx6r/1279/)

# algorithm - Dijkstra 和 Prim 的算法有什么区别？

> ID：13794948
> 
> 赞同：32
> 
> 时间：2012-12-10T04:19:10.307
> 
> 标签：algorithm, shortest-path

[谁能告诉我Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)和[Prim](http://en.wikipedia.org/wiki/Prim%27s_algorithm)算法之间的区别？我知道每种算法的作用。但它们在我看来是一样的。Dijkstra 算法存储最小成本边的总和，而 Prim 算法最多存储一个最小成本边。这不一样吗？

# android - 从另一个活动启动主启动器活动

> ID：13794957
> 
> 赞同：1
> 
> 时间：2012-12-10T04:20:26.623
> 
> 标签：android, android-activity

我的主要启动器活动（具有`android.intent.action.MAIN`作为其操作的活动）是登录页面。

成功登录后，我启动了 HOME 活动和`finish()`LOGIN 活动，以防止用户通过按 BACK 按钮返回该页面。

当我按下 SIGN OUT 按钮时，我希望应用程序返回登录页面。但我找不到办法做到这一点。这是退出代码：

```
//This method is in HOME activity
private void signOut(){
    Intent i = new Intent("android.intent.action.MAIN");
    startActivity(i);
    finish();
} 
```

该代码将打开一个对话框，列出我手机中的所有应用程序供我选择。我尝试将包名 + 类名 ( `com.example.test.Login`) 作为 Intent 但不断收到此错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent 
```

我知道我可以通过使用启动画面作为主要活动来解决这个问题。但是如果有另一个更好的解决方案，我想知道它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T04:22:14.707

采用

```
Intent i = new Intent(this, LoginPage.class);
startActivity (i);
finish(); 
```

# javascript - 如何在javascript中给html标签id一个唯一的id

> ID：13794964
> 
> 赞同：0
> 
> 时间：2012-12-10T04:21:03.097
> 
> 标签：javascript, html

如果我像这样在 javascript 中附加多个项目：

```
 data.context = $('<button class="btn btn-primary"/>').text('Upload')
                   .appendTo('#fileTableId')
                   .click(function () {
                       $(this).replaceWith($('<p id="aa"/>').text('Uploading...'));
                       data.submit();
                   }); 
```

如果例如 x++ 是我想要设置的，我如何给每个被替换的 p 标签一个唯一的 id。

```
 var x = 0
     '<p id = "'x'" /> 

     x++; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:29:52.807

您可以使用`.prop`设置`id`属性：

```
$(this).replaceWith($('<p>').prop('id', x).text('Uploading...'));
data.submit(); 
```

# windows-phone - 如何更新其他应用创建的磁贴？

> ID：13794967
> 
> 赞同：0
> 
> 时间：2012-12-10T04:21:18.190
> 
> 标签：windows-phone

我有两个应用程序：一个 UI 使用 Create() 创建磁贴，另一个代理使用 Update() 更新磁贴。这两个功能在一个应用程序中运行良好，即。都在 UI 中或都在代理中。但是如果我把 Create 放在 UI 中，Update() 放在 agent 中，Update() 就找不到 Create() 创建的图块。怎么了？谢谢。

```
 private void Create()
    {
        ShellTile find = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("ID=shelltile"));
        StandardTileData date = new StandardTileData();
        date.Count = 10;
        if (find == null)
        {
            ShellTile.Create(new Uri("/MainPage.xaml?ID=shelltile", UriKind.Relative), date);
        }
    }
    private void Update()
    {
        ShellTile find = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("ID=shelltile"));
        if (find != null)
        {
            StandardTileData date = new StandardTileData();
            date.Title = "aaaaaaaaa";
            find.Update(date);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:32:23.647

每个应用程序只能访问自己的磁贴。如果要更新磁贴，则需要在同一应用程序中创建[后台代理。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)（请注意，[后台代理无法创建图块](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)，这让我相信这不是您现在正在做的事情）

# java - 使用 4 个已知 GCP 点将经纬度坐标转换为像素坐标的代码

> ID：13794971
> 
> 赞同：2
> 
> 时间：2012-12-10T04:21:51.383
> 
> 标签：java, python, gdal, qgis

我想使用 gdal 库使用 4 个已知的 GCP 点来转换坐标（长/纬度到像素坐标）。（我在两个系统中都有它们的值）。我可以使用 GUI 在 QGIS 中手动完成，但我有一个巨大的数据集，因此需要一些 java/python 代码。我一直在看 api 很长一段时间，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:43:44.903

感谢您的回复。我能够使用 gdal jre 完成此操作。以下链接显示了如何转换坐标

[http://lists.osgeo.org/pipermail/gdal-dev/2009-June/021052.html](http://lists.osgeo.org/pipermail/gdal-dev/2009-June/021052.html)

虽然它在 C# 中，但它可以类似地使用 gdal jre 在 java 中使用。

# javascript - 使用 javascript 读取 HTML 文件以生成数据

> ID：13794973
> 
> 赞同：1
> 
> 时间：2012-12-10T04:21:58.093
> 
> 标签：javascript

我必须阅读一些 HTML 文件，获取其标签内容并使用这些内容生成报告（例如 day1.html 有 Simon，我需要阅读 day1.html 文件，并获取 'author' div 内容，即 'Simon'并使用这些数据生成我自己的报告）。我怎样才能使用 Javascript 来做到这一点？非常感谢任何帮助。非常感谢。一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T04:59:26.977

如果你不反对使用 jQuery，你可以[`get()`](http://api.jquery.com/jquery.get/)通过 JavaScript 加载和解析 HTML 文档：

```
jQuery.get('day1.html', function(html)) {
  var author_div_text_content = jQuery('DIV#author', html).text(); 
} 
```

在 jsFiddle 网站上工作的示例：

[http://jsfiddle.net/KCxDp/](http://jsfiddle.net/KCxDp/)

# apache - 从 URL 中删除问号

> ID：13794974
> 
> 赞同：1
> 
> 时间：2012-12-10T04:22:05.570
> 
> 标签：apache, .htaccess, mod-rewrite

我对 htaccess 和 mod_rewrite 或任何东西没有太多经验，但是如何删除 ? 从一个看起来像这样的 URL：`site.com/?page`所以它看起来像`site.com/page`？

我现在正在尝试这个：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(index\.php)?\?([^&\ ]+)
RewriteRule ^ /%1? [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

但它只是将所有内容重定向到`site.com`索引页面，而 url 中没有任何其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:33:31.923

您的反向引用不正确。您想匹配来自 的第二个分组`%{THE_REQUEST}`，而不是第一个（即`index.php`）。所以你的第一条规则应该是这样的：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(index\.php)?\?([^&\ ]+)
RewriteRule ^ /%2? [L,R=301]
# 2 here--------^ 
```

第二组将是`([^&\ ]+)`比赛。

# mysqli - MySQLi 准备好的语句抱怨“只有变量应该通过引用传递”

> ID：13794976
> 
> 赞同：1
> 
> 时间：2012-12-10T04:22:18.050
> 
> 标签：mysqli, php

代码：

```
$stmt->bind_param("s", md5($input['user'] . $config['salt'])); 
```

PHP 错误信息：

> 只有变量应该通过引用传递

我一直在做这个项目，但我现在卡住了。我是 PHP 新手。该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T04:27:27.387

感谢您使用 MySQLi 准备好的语句！他们很痛苦，但这是值得的。

[`bind_param`](http://php.net/mysqli-stmt.bind-param)通过*引用*获取值。它通过查看您传递的变量并直接指向内脏来做到这一点。

在您的调用中，您将返回函数调用的字符串结果 -`md5`在这种情况下。因为不涉及变量，所以没有内幕可指。PHP 抱怨无法通过引用传递数据。

您需要将函数调用的结果粘贴到变量中，然后将该变量传递给绑定。

**大脂肪警告！** *不再*`md5`是安全哈希，*不*应用于存储密码。当您有机会时，您应该更新为更好的哈希格式，例如[bcrypt、PBKDF2、scrypt 等](https://stackoverflow.com/q/401656/168868)。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T06:24:32.957

[`bind_param`该方法](http://php.net/mysqli-stmt.bind-param)的每个参数（但第一个参数）必须是一个变量，而不是像您的情况那样，一个函数返回值。只有变量可以[通过引用传递](http://php.net/language.references.pass)。

考虑到这一点，您可以轻松更改代码以消除错误消息：

```
$input['hash'] = md5($input['pass'] . $config['salt']);
$stmt->bind_param("ss", $input['user'], $input['hash']); 
```**

# eclipse - vim 是否像 Eclipse 一样具有自动完成功能？

> ID：13794977
> 
> 赞同：0
> 
> 时间：2012-12-10T04:22:27.007
> 
> 标签：eclipse, vim

> **可能重复：**
> [用于 Python 的 Vim 自动完成](https://stackoverflow.com/questions/7138039/vim-autocomplete-for-python)

我在工作中使用 eclipse。Eclipse 有这个惊人的特性，它可以根据项目空间中的方法和类自动完成（而不是仅仅在这个文件中自动完成）。

vim 是否有提供类似功能的插件？

即如果我`foo()`在**a.py**中定义编辑**b.py**并键入`fo`会导致`foo()`被建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T06:15:34.440

Vim 不提供*自动*补全，但它有所谓的*全能*补全，由`<C-x><C-o>`. 见`:h new-omni-completion`。Python 全补全还有其他后端，例如有前途的[Jedi](https://github.com/davidhalter/jedi-vim)或[Pydiction](http://www.vim.org/scripts/script.php?script_id=850)。如果您不喜欢默认行为，请尝试它们。

要让*omni*完成变成*自动*完成，你需要[一个第三方插件](http://www.vim.org/scripts/script_search_results.php?keywords=completion&script_type=&order_by=creation_date&direction=descending&search=search)（是的，如果你没有注意到，Vim 是一个文本编辑器，而不是一个IDE），比如我使用的[AutoComplPop 。](http://www.vim.org/scripts/script.php?script_id=1879)请务必阅读您选择的插件的文档。

顺便说一句，在从 导入模块后`a.py`，键入该模块名称`b.py`后跟一个点应该会显示一个上下文菜单，其中包含可用方法和内容的列表。

# javascript - AJAX 发送表单中的所有字段

> ID：13794980
> 
> 赞同：0
> 
> 时间：2012-12-10T04:23:25.980
> 
> 标签：javascript, jquery, ajax, post

我有一个调用 CGI 脚本的 HTML 文件。当我单击注销按钮时，POST 方法会发送所有字段。这是一个已知的错误？

这是我的 Javascript 代码：

```
var request = null, session = null;
    function postEscape(val) {
        return encodeURIComponent(val).replace(/%20/g, "+")
    }

    function submit_logout() {
var request=null
if( !document.form.loggedIn.checked ) return
logout = new XMLHttpRequest()
logout.open("POST", "client.cgi", true /* asynchronous? */ )
logout.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")
console.log("action=logout&session=" + postEscape(document.form.session.value)+"&host="+postEscape(document.form.host.value)+"&port="+postEscape(document.form.port.value))
logout.send("action=logout&session=" + postEscape(document.form.session.value)+"&host="+postEscape(document.form.host.value)+"&port="+postEscape(document.form.port.value)+"&action=logout")
form.loggedIn.checked = false

} 
```

这是我在 POST 数据中看到的：

用户名=&密码=&host=somehost.com&port=6700&action=logout&display=++++&session=

这是我的表格

```
<body>
<form name = "form">
<input name="username" size="25" type="text">username<br>
<input name="password" size="25" type="text">password<br>
<input name="host" size="25" type="text">host<br>
<input name="port" size="25" type="text">port<br>
<input name="login" value="Login" type="button" onclick="submit_login()"><input        type="checkbox" name="loggedIn" id = "loggedIn" onclick="this.checked=!this.checked">

<input name="action" value="logout" type="submit" onClick="submit_logout()"><br>
<textarea name="display" rows="24" cols="68">    </textarea><br>
<input type="hidden" name="session" value="">
<input name="message" size="64" maxlength="64" type="text"><input name="send"     value="send" type="button" onClick = "send()"><p></p>
  </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:41:57.997

尝试更改以下内容：您正在提交所有内容，因为您`type="submit"`要注销。它应该是一个`type="button"`.

`<input type="button" />`按钮不会提交表单 - 默认情况下它们不做任何事情。它们通常与 JavaScript 结合使用，作为 AJAX 应用程序的一部分。

`<input type="submit" />`按钮将在用户单击它们时提交它们所在的表单，除非您使用 JavaScript 另有指定。

```
<input name="action" value="logout" type="submit" onClick="submit_logout()"> 
```

到

```
<input name="action" value="logout" type="button" onClick="submit_logout()">  //type="button" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:26:47.950

采用`$('form').serialize()`

```
alert($('form[name="form"]').serialize()); 
```

将显示所有表单域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T04:44:13.630

试试这个：

```
onClick="submit_logout(); return  false;" 
```

或者：

```
onClick="return submit_logout();" 
```

...然后`return false;`从`submit_logout()`函数内部。

或将按钮更改为`type="button"`。

目前因为您的按钮是`type="submit"`它导致表单执行正常（非 Ajax）提交。更改类型或返回 false 将防止这种情况发生。

# php - Yii - 使用单一方法进行 AJAX 更新/创建

> ID：13794985
> 
> 赞同：-2
> 
> 时间：2012-12-10T04:24:07.167
> 
> 标签：php, ajax, yii, overloading

我已经设置了这种通过 AJAX 更新模型的方法，并尝试通过创建一个新模型（如果它不存在）来扩展它。

```
public function actionAjaxUpdate($id = null)
{
    if($id === null)
        $model = new MyObject;
    else
        $model = $this->loadModel($id);

    if(isset($_POST['MyObject']))
    {
        $model->attributes = $_POST['MyObject'];
        $model->save();
    }
} 
```

通过 AJAX 更新时发送的示例 URL，末尾的数字是模型 ID：

```
/admin/myObject/ajaxUpdate/1
/admin/myObject/ajaxUpdate/2
/admin/myObject/ajaxUpdate/3
... 
```

这里的问题是，虽然在提供 ID 时更新工作正常，但创建新模型不起作用。由于新项目的 ID 尚不存在，因此 URL 路由将返回 404：

> 在此服务器上找不到请求的 URL /cmsadmin/myObject/ajaxUpdate。

*解决这个问题的好方法是什么？*

我尝试过不带`$id`参数重载相同的方法，但 PHP 不支持重载，如本线程所述：[Yii 框架模型中的方法重载](https://stackoverflow.com/questions/10335589/method-overloading-in-a-model-of-yii-framework)

*如果需要任何其他信息，请发表评论。*

==== 附加信息 ====

**主文件**

```
<?php
$backend = dirname(dirname(__FILE__));
$frontend = dirname($backend);
Yii::setPathOfAlias('admin', $backend);

return array(
    'basePath' => $frontend,
    'controllerPath' => $backend . '/controllers',
    'viewPath' => $backend . '/views',
    'runtimePath' => $backend . '/runtime',

    'components' => array(
        'urlManager' => array(
            'urlFormat' => 'path',
            'showScriptName' => false,
            'caseSensitive' => false,
            'appendParams' => true,
            'rules' => array(
                'admin/<controller:\w+>/<action:\w+>/<id:\d+>'=>'/<controller>/<action>',
                'admin/<controller:\w+>/<action:\w+>'=>'/<controller>/<action>',
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:29:16.783

我有同样的问题，但我通过了`id=0`插入和`id=1`更新。确保 id 字段设置为自动递增，因此它不是必需的。

现在检查 id 是否为 1 然后插入 else 更新记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:37:31.463

您可以像 Boniface 建议的那样，将 0 作为 id 传递，但您必须将函数更改为

```
if($id == 0) 
```

这样，如果您将 0 作为 id 传递，它将检测到并创建一个新对象。

或者您可以不传递任何内容（或 0）而只使用

```
if(!$id) {
    $model = new MyObject; 
```

# javascript - jquery ui 对话框默认位置

> ID：13794987
> 
> 赞同：1
> 
> 时间：2012-12-10T04:24:55.757
> 
> 标签：javascript, jquery-ui

我已经通过添加最大化、恢复和最小化按钮来自定义我的对话框，我唯一遇到的问题是当默认创建一个新对话框时，它会自动计算在屏幕上定位对话框，此时我想知道位置关于它的创建位置，事实上我可以在 chrome 开发人员工具中看到确切的位置，但我无法在 html 和 js 文件中检索相同的值。

我想要这个值的原因是，当创建一个对话框并最大化它并恢复它时，它会恢复到默认位置，如 top:5px,left:10px; 但是在将对话框拖到某个点后，我成功地将其恢复到相同的位置。

位置是通过上面的 _position 函数精确计算出来的。有什么方法可以将此处计算的值复制到 html 文件中？

请帮助我，多年来一直坚持下去。

干杯吉夫

# sql - ORA-00935 如何触发？深入了解 Oracle SQL 的嵌套组函数方法

> ID：13794988
> 
> 赞同：2
> 
> 时间：2012-12-10T04:25:03.687
> 
> 标签：sql, oracle, oracle11g, sqlplus

如果相关，我正在使用 SQL*Plus 或 Oracle 11g express。

我遇到了一些奇怪的事情，我希望了解更多关于嵌套组函数的信息，因为我是 SQL 新手，我发现错误的讽刺之处及其解决方案很奇怪：

**这不起作用**

```
where
t1.col1 =
    (select col1
    from t2
    having count(col2) = max(count(col2))
group by col1
; 
```

有了以上内容，我收到：

> ORA-00935: 组函数嵌套太深

**这确实有效**

```
where
t1.col1 =
    (select col1
    from t2
    having count(col2) =
        (select max(count(col2)) from t2 
        group by col1)
    group by t2.col1)
; 
```

**鉴于上述情况，我有两个问题：**

**1）**编译器/应用程序究竟是如何/在哪里变得混乱的？

**2）**如果只是为了清楚起见，我是否正确地假设更深的子查询首先“触发”，并为上子查询返回一个值，从而完全跳过混乱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T07:34:36.360

1.  编译器不会混淆。

    该错误只是提醒您聚合函数在该上下文中没有意义：

    ```
    having count(col2) = max(count(col2) 
    ```

    HAVING 子句在 GROUP BY 之后生效，列中每个不同值的`COUNT(COL2)`非空值计数也是如此。在 , 的一个不同值的上下文中，没有任何意义——如果 的结果是 3，那么显然是 3——但这里编译器足够聪明，知道你可能不打算那样做。`COL2``col1``col1``MAX(COUNT(COL2))``COUNT(COL2)``MAX(3)`

    因此，您的意图是`COUNT(COL2)`左侧的 应该是`COL1`) 的不同值，但`COUNT(COL2)`右侧的 应该是 的所有值`COL1`。因此，作为一个整体的表达式是混合的，不是有效的 SQL。

2.  是的，如果你愿意，你可以这样想。首先运行最深的子查询，它将结果集（在本例中为单行单列）返回给调用子查询。

您可能会发现以下查询更有效，而不是对表有效地运行两个查询：

```
where t1.col1 =
  (select col1
   from   (select col1, count_col2, MAX(count_col2) OVER () max_count_col2
           from   (select col1,
                          count(col2) AS count_col2
                   from t2
                   GROUP BY col1))
   where  count_col2 = max_count_col2) 
```

# c++ - 在自定义 const 本机 C++ 容器类上支持“for each”

> ID：13794995
> 
> 赞同：4
> 
> 时间：2012-12-10T04:26:00.210
> 
> 标签：c++, foreach, constants, containers, native-code

我想实现一个简单的本机 C++ 固定容量数组模板类，为了方便起见，支持基于范围的“for each”语法，并且开销最小。

我无法在 const 实例上支持它。

有了这个实现：

```
template< class T, size_t Capacity >
class List
{
public:
    List() { mSize = 0; }

    const T* begin() const { return mItems; }
    const T* end() const { return mItems + mSize; }

    T* begin() { return mItems; }
    T* end() { return mItems + mSize; }

private:
    size_t mSize;
    T mItems[ Capacity ];
}; 
```

和这种用法：

```
const List< int, 5 > myInts;
for each( const int myInt in myInts )
{
    continue;
} 
```

我收到此错误：

```
error C2440: 'initializing' : cannot convert from 'const int *' to 'int *'
    Conversion loses qualifiers 
```

这种用法不会抱怨：

```
List< int, 5 > myInts;
for each( const int myInt in myInts )
{
    continue;
} 
```

而这个（不受欢迎的）实现并没有抱怨：

```
template< class T, size_t Capacity >
class List
{
public:
    List() { mSize = 0; }

    T* begin() const { return const_cast< List* >( this )->mItems; }
    T* end() const { return const_cast< List* >( this )->mItems + mSize; }

private:
    size_t mSize;
    T mItems[ Capacity ];
}; 
```

我不理解的引擎盖下发生了什么？正确处理此问题的 std::vector<> 是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:38:05.053

你的用例对我来说似乎有点奇怪，因为你写下来的 C++ 中的每个构造都没有。在 C++11 中引入了一个常规的`for`和基于范围的。`for`我只能猜测你的真实用例是什么，但很可能编译器会因为 const-correctness 错误而抱怨。如果没有您尝试运行的真实代码，我无法真正确定您的错误。无论如何，下面是一个演示这两种用法的工作示例。希望对您有所帮助，但如果您有任何问题，请随时跟进，我会尽力解释。

```
#include <cstdlib>
#include <iostream>

template <typename T, std::size_t Capacity>
class List {
  public:
    List() : mSize(0) {}

    const T *begin() const { return mItems; }
    const T *end() const { return mItems + mSize; }

    T *begin() { return mItems; }
    T *end() { return mItems + mSize; }

    void add(int v)
    {
        // TODO: Check for out of range here...
        mItems[mSize++] = v;
    }

  private:
    size_t mSize;
    T      mItems[Capacity];
};

int main()
{
    /* const */ List<int, 10> array;

    array.add(1);
    array.add(11);
    array.add(15);
    array.add(3);

    // C++11 style (range-based for)
    for (int p : array) {
        std::cout << p << '\n';
    }

    // Pre C++11 style
    for (const int *from = array.begin(), *to = array.end(); from != to; ++from)
    {
        int p = *from;
        std::cout << p << '\n';
    }
} 
```

# xampp - 在 XAMPP 1.7.4 上安装 apc

> ID：13794996
> 
> 赞同：1
> 
> 时间：2012-12-10T04:26:05.580
> 
> 标签：xampp

我是新来的。通常我会通过谷歌搜索并立即得到答案，除了这个。我很抱歉我的问题（如果你不喜欢它），因为我是这样的论坛的新手。

我想要做的是将 apc.dll 安装到 XAMPP 1.7.4，所以我将下载应该在此处的文件：http: [//downloads.php.net/pierre/php_apc-3.1.5-5.3-vc6-x86 .zip](http://downloads.php.net/pierre/php_apc-3.1.5-5.3-vc6-x86.zip)但它不存在。有人可以给我正确的链接吗？

我希望有一个人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:49:42.760

[您可以从http://dev.freshsite.pl/php-accelerators/apc/sorting//1.html](http://dev.freshsite.pl/php-accelerators/apc/sorting//1.html)下载 dll， 在 window7 64 位操作系统上对我有用。复制 xampp 1.7.4 的 php/ext 目录下的 dll，将 dll 文件重命名为 php_apc.dll 并将 extension = php_apc.dll 添加到您的 php.ini 文件中。