# StackOverflow 问答 15695000-15695999

# java - 如何在 Java 中定义 Mac 上的框架路径？

> ID：15695786
> 
> 赞同：2
> 
> 时间：2013-03-29T01:05:15.607
> 
> 标签：java, macos, frameworks, jna, edsdk

我正在帮助编写一个跨平台的定格动画程序，并且在 Windows 上效果很好。对于那些不知道的人来说，定格动画只是动画的一个花哨的术语。该程序允许用户将尼康、佳能和网络摄像头插入计算机，并让程序显示现场的实时视图，然后能够从那里手动控制相机。包括来自佳能的相机框架文件，其路径定义如图所示

```
import com.sun.jna.Native;
initialization and such

public static EdSdkLibrary EDSDK = (EdSdkLibrary) Native.loadLibrary("Macintosh/EDSDK.framework/EDSDK",EdSdkLibrary.class, options); 
```

在“public static int ...”处抛出错误，表示找不到图像。我已经尝试过无数次重新定义路径、移动框架以及使用与我正在使用的框架相同的各种其他框架。请记住，这在 Windows 上完美运行，但在 Mac 上存在问题。

mac 上的框架是否不同，或者它们的定义不同？我已经查看并没有找到其他解决方案。

编辑：好的，我定义了路径，它现在有这个符号 > 旁边没有文字。现在我该怎么做？

编辑：这是说这个 % 不是命令。没有它，它仍然无法工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:22:27.027

JNA 将根据核心框架名称（本例中为 EDSDK）依次尝试从 ~/Library/Frameworks、/Library/Frameworks 和 /System/Library/Frameworks 加载框架。

如果`loadLibrary`调用成功，则找到该库。如果未找到该库，您将获得一个`UnsatisfiedLinkError`.

框架基本上是与其他资源共享库的捆绑；ESDK.framework/ESDK 是实际的共享库（对于框架，OSX 省略了通常在 OSX 上的共享库中找到的“dyld”后缀）。

**编辑**

以下是创建符号链接的方法，以便路径看起来更像 JNA 所期望的。从终端（运行 Terminal.app）：

```
% ln -s /your/complete/path/to/Macintosh/EDSDK.framework ~/Library/Frameworks/EDSDK.framework 
```

成功完成此操作后，您应该在列出 (ls) 符号链接时看到以下内容：

```
% ls -l ~/Library/Frameworks/EDSDK.framework
lrwxrwxr-x  1 YOU  YOU  50 Mar 31 01:13 /Users/YOU/Library/Frameworks/EDSDK.framework -> /your/complete/path/to/Macintosh/EDSDK/Framework/EDSDK.framework 
```

您应该在左侧看到符号链接路径（JNA 将在其中查看），右侧是真实文件的路径。如果没有，请删除符号链接文件并重试。请注意，您可能需要先创建目录`~/Library/Frameworks`；它可能还不存在。

最后，确保您尝试加载的库与您尝试加载的 VM 匹配；64 位加 64 位，32 位加 32 位。佳能不提供其库的通用二进制文件，因此您需要指向其中一个或使用[`lipo`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/lipo.1.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-13T18:44:16.127

不是真正的答案，而是关于我自己遇到的同一问题的更多信息。

我可以补充一点，如果 JNA 位于可执行文件查找其框架的标准公共位置之一，JNA**将**找到我的框架，即

*   `~/Library/Frameworks`- （供当前用户使用的公共框架）
*   `/Library/Frameworks`- （供任何用户使用的公共框架）
*   `/System/Library/Frameworks`- （公共系统框架）

但是，如果我希望我的自定义框架是**私有**的——即——除了我的 java vm 之外的其他进程无法发现——那么出于某种原因 JNA 不会这样做。

我知道 MacOS 动态加载器，在尝试为任何普通（本机）MacOS 进程查找库/框架时，不会开始搜索上述位置，而是首先在几个标准“私有”位置中搜索：（也称为**rpath**搜索路径）

*   在与加载进程的二进制文件相同的位置的“框架”目录中：例如`path/to/my/binary/Frameworks/mySDK.framework`
*   在动态加载程序加载进程的位置的“框架”目录中（在应用程序包中，这将是`myApp.app/Contents/Frameworks/mySDK.framework`文件夹。

因此，您通常可以在二进制文件旁边创建一个您自己的“框架”目录，并将您的框架放入其中。

但是 - JNA 错过了这一点。我试图在“Zulu”中创建一个“Frameworks”目录——在`zulu-11.jre/Contents/Home/bin`“java”二进制文件旁边和其他地方——但 JNA 在其中都找不到。

我想知道为什么，以及是否有任何文档。

在 /Library/Frameworks 中为我的自定义框架安装符号链接的技巧可能会为您服务，但我不能允许其他进程查找或加载我的框架。

# c++ - 迭代器和反向迭代器

> ID：15695789
> 
> 赞同：0
> 
> 时间：2013-03-29T01:05:32.163
> 
> 标签：c++

我对 C++ 和一般编程很陌生，我正在 C++ 环境中编写 OpenCv 应用程序。

我想要达到的目标：

好的，所以我将一些 Rectangles 中心点存储在向量中，现在我使用反向迭代器来迭代具有矩形中心点的向量，并将每 10 个中心点存储到新向量中。

然后，我再次使用普通迭代器迭代存储每 10 个矩形中心点的新向量，并且我想从第 2 个元素中减去第 1 个元素，从第 4 个元素中减去第 3 个元素，依此类推，减法结果，我想存储到另一个新向量中:D

有些人可能会感到有些困惑；我自己很困惑，这就是为什么下面我将添加我编写的代码。

```
vector<Point> Rightarm;
vector<Point> Leftarm;

vector<Point>::reverse_iterator RightMovmentIter;
vector<Point>::reverse_iterator LeftarmMovmentIter;

vector<Point> RightTracking;
vector<Point> LeftTracking;

for(RightMovmentIter = Rightarm.rbegin(); RightMovmentIter != Rightarm.rend(); RightMovmentIter+=10)
{
    RightTracking.push_back(*RightMovmentIter);
}

for(LeftarmMovmentIter = Leftarm.rbegin(); LeftarmMovmentIter != Leftarm.rend(); LeftarmMovmentIter+=10)
{
    LeftTracking.push_back(*LeftarmMovmentIter);
}

vector<Point>::iterator RresultIter;
vector<Point>::iterator Leftresult_Iter;
vector<Point> summery;

for(RresultIter = RightTracking.begin(); RresultIter != RightTracking.end(); RresultIter++)
{
    summery = *RresultIter - *RresultIter++;
} 
```

问题：

第一个问题是，当我运行程序时出现运行时错误，我相信这是因为在向量 Rightarm 和 Leftarm 的开头没有 10 个元素，而当迭代器运行它并试图寻找第 10 个元素时，我无法....那我该如何解决呢？

第二个问题与这条线有关summery = *RresultIter - *RresultIter++; 我知道这是错误的，这是我能想到的最好的尝试，但我想做的是从第二个元素中减去第一个元素并将其存储在夏季元素中......

希望这足以为读者描述我的问题问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:01:35.847

正如您已经正确注意到的那样，除非`Rightarm.size()`是 10 的精确倍数，否则这将不起作用。解决此问题的一种方法是在开头跳过元素，使结尾对齐。

```
for(RightMovmentIter = Rightarm.rbegin() + Rightarm.size() % 10;
    RightMovmentIter != Rightarm.rend();
    RightMovmentIter+=10) 
```

至于采取运行差异，有一个标准算法，`std::adjacent_difference`.

```
std::adjacent_difference( RightTracking.begin(), RightTracking.end(),
      std::back_inserter( summery ) );
summery.erase( summery.begin() ); 
```

这会复制第一个值而不会产生差异（类似于假设“先于第一个”值为零），因此该`erase()`行摆脱了它。

# c# - 使用 Xdoc 从 XML 文档中获取属性

> ID：15695791
> 
> 赞同：0
> 
> 时间：2013-03-29T01:06:09.210
> 
> 标签：c#, xml, linq-to-xml

很难从我的 XML 中检索属性。我需要获取这个属性，然后发送和存储它。我不能让它装扮属性。:( 只需要属性方面的帮助。

```
<portfolios>
  <portfolio>
    <id>00001</id>
    <investment ticker="ASD">
      <shares>20</shares>
      <price>42.50</price>
    </investment>
  </portfolio>

  <pricedata days="4">
    <stock ticker="ASD">
      <price value="42.50"/>
      <price value="43.50"/>
      <price value="39.00"/>
      <price value="45.00"/>
    </stock>
  </pricedata>
</portfolios> 
```

我到目前为止所拥有的！

```
public bool readXmlData(String filename)
{
    XDocument document = XDocument.Load(filename);

    foreach (XElement portfolio in document.Descendants("portfolio"))
        {
            XElement id = portfolio.Element("id");
            string id2 = id != null ? id.Value : string.Empty;
            portList.Add(new SmallPortfolio(id2));

            XAttribute ticker = portfolio.Attribute("investment");

            foreach(XElement investment in document.Descendants("investment"))
            {
                XElement shares = investment.Element("shares");
                XElement price =  investment.Element("price");

                temp.Add(new Investment(

                ticker != null ? ticker.Value : string.Empty,
                shares != null ? int.Parse(shares.Value) : default(int),
                price != null ? double.Parse(shares.Value) : default(double)
                ));
            }
        }

    foreach (XElement stock in document.Descendants("pricedata"))
    {
        XAttribute tick = stock.Attribute("stock");
        List<Double> pricetemp2 = new List<Double>();
        foreach (XElement price in document.Descendants("stock"))
        {
            XAttribute value = price.Attribute("price");
            pricetemp2.Add(value.Value);
        }
        groupList.Add(new PriceGroup(tick,pricetemp2));
    }
    return true;
}
public List<SmallPortfolio> getPortfolioList() { return null; }
public List<PriceGroup> getPriceList() { return null; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:16:40.057

`<price>` is an element, but you are accessing it as if it was an attribute `<stock price="..."/>`.

Try this:

```
foreach (XElement stock in document.Descendants("stock"))
{
    string ticker = (string)stock.Attribute("ticker");
    List<Double> pricetemp2 = new List<Double>();
    foreach (XElement price in stock.Descendants("price"))
    {
        double value = (double)price.Attribute("value");
        pricetemp2.Add(value);
    }
    groupList.Add(new PriceGroup(ticker, pricetemp2));
} 
```

Casting `XAttribute` to `double` will use the proper XML rules for numbers (`XmlConvert.ToDouble`). Using `double.Parse` is incorrect as it uses culture-specific number formatting (e.g. in Germany it expects a decimal comma instead of a decimal point).

# php - 升级到 Jquery Mobile 1.3.0 会导致元素被迫底部

> ID：15695792
> 
> 赞同：1
> 
> 时间：2013-03-29T01:06:10.253
> 
> 标签：php, jquery-mobile

我最近决定升级我的 web 应用程序以实现新的 jQuery Mobile Panel 小部件。

更改为 1.3.0 后，`<p>`我的应用程序页面上的一个元素被强制到底部。当我恢复到 1.2.0 时，该元素像我希望的那样停留在列表视图的顶部。

我的源代码片段：

```
 <?php include ('header.php'); ?>        
        <?php print ' <p style="text-align: center;">Welcome, <span style="font-weight:bold; color: orange;">'.$_SESSION['username'].'</span>! Your user ID is <span style="font-weight:bold; color: orange;">'.$_SESSION['user_id'].'</span>.</p>'; ?>         
        <div data-role="content" id="assignment_list">      
            <!-- create 2 foreach loops, 1 for classes to be listed and organized by id in list dividers and another for listing individual assignments within each class -->   
            <ul data-role="listview">

            <!--classes loop-->

            <?php foreach ($userclasses as $class) : ?>

                <li data-role="list-divider"><?php echo $class['class_name']; ?></li>

                <?php $assignments=get_assignments_by_class($class['class_id']); ?> 
                <?php foreach ($assignments as $assignment) : ?><!--assignments loop-->
                <?php print'<li><a href="index.php?action=show_assign_details&assign_id='.$assignment['assign_id'].'&class_id='.$assignment['class_id'].'">'.$assignment['assign_title'].'</a></li>';?>
                <?php endforeach; ?> <!--/assignments loop-->
            <?php endforeach; ?> <!--/classes loop-->

            </ul>       
        </div><!--/data-role="content"-->

<?php include 'footer.php'; ?> 
```

我的目标是向用户显示一条问候他们并表示他们已成功登录的消息。我希望消息显示在显示分配的列表视图上方。它工作得很好，但是当我更改为 jQuery Mobile 1.3.0 时，消息现在显示在我的页面底部，*在*列表视图之后。

我尝试将消息放在内容 div 中，但它似乎被切断了。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:28:25.960

为什么不打印列表视图之前的`<?php print ' <p style="text-align: center;">Welcome, <span style="font-weight:bold; color: orange;">'.$_SESSION['username'].'</span>! Your user ID is <span style="font-weight:bold; color: orange;">'.$_SESSION['user_id'].'</span>.</p>'; ?>`行？`content div`

我希望这能解决问题。

我还希望您使用 jQuery 1.9.X？

# linq - 如何使用 Linq to SQL 中另一列的最大版本返回唯一列？

> ID：15695795
> 
> 赞同：2
> 
> 时间：2013-03-29T01:06:19.717
> 
> 标签：linq, linq-to-sql

我需要返回一个查询，其中返回所有唯一页码以及每页的最大版本号。

这是我要查询的数据示例

```
DocumentID    PageNumber   Version
1             1            1
1             2            1
1             2            2
1             3            1
1             3            2
1             3            3 
```

这是我需要在查询中返回的内容

```
DocumentID    PageNumber   Version
1             1            1
1             2            2
1             3            3 
```

不知道如何完成这个：

```
var pages = from p in dc.Pages where p.DocumentID == 1 && ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:50:00.433

我认为这就是您要实现的目标：

```
var results = 
    from p in dc.Pages
    where p.DocumentID == 1
    group p by p.PageNumber into g
    select new 
    {
        PageNumber = g.Key,
        MaxVersion = g.Max(x => x.Version)
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:32:50.850

此查询可能会帮助您：

```
Select DocumentID ,Distinct PageNumber, max(version) from table 
group by DocumentID, Distinct PageNumber 
```

# asp.net-mvc - 关于 Model First MVC 3 using Entity Framework 的问题

> ID：15695796
> 
> 赞同：0
> 
> 时间：2013-03-29T01:06:24.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, visual-studio-express

根据 Visula Studio Express 2012 中的这篇文章，我在玩 Entity：http: [//msdn.microsoft.com/en-us/data/gg685494.aspx](http://msdn.microsoft.com/en-us/data/gg685494.aspx)

在一些发现之后不得不完全重新这样做：

1.  根据您可以创建数据库的文章，这是正确的，但除非您右键单击图表中的空白部分选择属性并选择“代码生成策略”（我只有默认值），否则不会创建类。之后我的项目由于错误而不再构建。尝试再次创建一个新创建的项目并不再创建模型类（不知道我做了什么让它第一次工作）。
2.  在图表中创建产品后，创建一个数据库，然后在第二个项目中使用该数据库创建模型 products.cs 文件已创建但没有注释（我的产品名称为 200 char max 但它不在 products.cs 文件中）。
3.  在第二个项目中搭建控制器和视图后（从第一个项目中的模型创建的数据库中制作模型），产品名称被错误地验证为最大 200 个字符。即使设计器显示最多 200 个 products.cs 文件也缺少注释。

如果我在这里做错了什么，谁能向我解释如何从实体图中创建 product.cs 文件，并且仍然留下一个可构建的项目？从数据库创建的模型类没有注释（例如最多 200 个字符字段）是否正常？

我喜欢 Entity 和它的想法。那里有很多带有视频的文档，但现在我会出去买一顶帽子，因为我会把所有的头发都拉出来，试图习惯它的工作方式:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T04:11:58.560

使用设计器创建带有实体类的数据库很酷，但是从设计器或从数据库创建类（尚未）正常工作。

没有注释，所以不检查 null 或任何东西。我手动创建了类并为产品名称添加了注释：

```
public int Id { get; set; }
[DisplayName("Product name"), 
  Required(ErrorMessage = "Product Name is required"), 
  StringLength(10)]
public string Name { get; set; } 
```

然后右键单击解决方案资源管理器中的控制器文件夹并选择 => 添加 => 控制器 => 使用实体框架作为模板来创建 crud 视图。

出于某种原因，我必须创建一个数据上下文类来创建另一个连接字符串和 database.mdf 文件，但是......表单验证在 JavaScript 和服务器上完美运行。

# java - 在 Ubuntu 中打开 .jar

> ID：15695799
> 
> 赞同：3
> 
> 时间：2013-03-29T01:06:28.170
> 
> 标签：java, ubuntu, jar, desktop, archive

在制作游戏时，我从 windows 中的编程转移到 ubuntu 以获得更好的可用性。除此之外，在 Windows 中，使用`Desktop d = Desktop.getDesktop();`和使用`d.open(new File("file dir.jar");`它在 Windows 中工作。但是，当使用 ubuntu 时，它会在存档管理器中打开 jar。所以我的问题是，我将如何打开要执行的 .jar？任何帮助都会很棒！提前致谢！

**编辑：**可能我安装了错误的java......但我按照我在谷歌上找到的方式做到了。如果是这样，任何更正都会很棒：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:24:58.173

我看到两种方法：

1）将要运行的jar添加到程序类路径并运行它的main方法。

2) 使用[Runtime.exec()](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)你可以运行任何你想要的东西，但是你可能会失去平台独立性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:23:18.110

存档管理器被设置为打开 .jar 文件的默认程序。您必须在 Ubuntu 的默认程序设置中更改它。同时，您可以右键单击要打开的文件并选择使用已安装的 Java 运行时环境打开它。

# jetty - 使用 Jetty 的外部静态资源

> ID：15695803
> 
> 赞同：0
> 
> 时间：2013-03-29T01:06:58.097
> 
> 标签：jetty, embedded-jetty, maven-jetty-plugin

我有以下码头配置：

```
<webAppConfig>
   <defaultsDescriptor>${project.basedir}/configuration/webdefaults.xml</defaultsDescriptor>
   <contextPath>/app</contextPath>
   <baseResource implementation="org.eclipse.jetty.util.resource.ResourceCollection">
      <resourcesAsCSV>${project.basedir}/src/main/webapp,/external/dir,/another/dir</resourcesAsCSV>
   </baseResource>
</webAppConfig> 
```

现在，在我的 src/main/webapp 和 /external/dir 中，我都有一个名为 static 的目录，两者的资源都可以通过 URL /app/static 访问。然而，在 /another/dir 中，我有一个名为 special-static 的目录，由于某种原因，其中的资源不可访问（或至少不使用 URL /app/special-static）。

知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:16:32.623

你用什么版本？

对于版本 8 或 9，我会执行以下操作：

```
 <webAppConfig>
  ...
  <resourceBases>
   <resourceBase>${project.basedir}/src/main/webapp</resourceBase>
   <resourceBase>/external/dir</resourceBase>
   <resourceBase>/another/dir</resourceBase>
  </resourceBases>
 </webAppConfig> 
```

如果您使用的是过时版本（6 或 7），我建议您升级到最新版本 8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:43:04.613

xml 条目...

```
<resourcesAsCSV>dir1,dir2,dir3</resourcesAsCSV> 
```

采用 [C]omma [S] 分隔 [V] 值，`","`不要`";"`在您的配置中使用。

# c - 在 C 中连接字符串时出错

> ID：15695804
> 
> 赞同：0
> 
> 时间：2013-03-29T01:06:59.267
> 
> 标签：c

我是 C 新手，我正在尝试使用以下代码在 char 数组中加入 2 个字符串：

```
char url[300];
strcpy(url, "http://example.com/script.php?email=example@example.com");
char * mail = lpObj->Email;
strcat(url, mail); 
```

我在带有 Visual Studio 的 VPS 上运行它，我的程序总是崩溃，它转到一个带有 asm 代码的文件。`lpObj->Email;`被分配并且它有一个格式良好的字符串。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:31:04.413

至少有两种情况会导致错误，第一种情况是 when `mail`is too large for the destination `url`。我能够获得此代码，`seg fault`但实现溢出所需的长度可能会有所不同：

```
char url[50];
strcpy(url, "http://example.com/script.php?email=example@example.com");
char  *mail = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
strcat(url, mail); 
```

第二种情况是 if `mail`is `NULL`：

```
char  *mail = NULL ; 
strcat(url, mail) ; 
```

# java - Java 推断类型和列表：通过一般快速排序示例工作

> ID：15695806
> 
> 赞同：0
> 
> 时间：2013-03-29T01:07:14.597
> 
> 标签：java, list, quicksort, comparable, inferred-type

我正在关注Rosettacode 上[这个用 Java 实现的快速排序示例。](http://rosettacode.org/wiki/Quicksort#Java)据我了解，这应该包含实现 Comparable 接口的一系列事物，并且类型是在运行时推断的。我用一个 main 方法将它封装在一个小类中，但是得到了一系列关于推断类型的错误。我对 Java 比较陌生，还不熟悉这个结构。

```
import java.util.List;
import java.util.LinkedList;

public class QuickSortExample {

    public static <E extends Comparable<? super E>> List<E> quickSort(List<E> arr) {
        if (arr.size() <= 1) return arr;
        E pivot = arr.getFirst();

        List<E> less = new LinkedList<E>();
        List<E> pivotList = new LinkedList<E>();
        List<E> more = new LinkedList<E>();

        for (E i: arr) {
            if (i.compareTo(pivot) < 0) less.add(i);
            else if (i.compareTo(pivot) > 0) more.add(i);
            else pivotList.add(i);
        }

        less = quickSort(less);
        more = quickSort(more);
        less.addAll(pivotList);
        less.addAll(more);
        return less;
     }

     public static void main(String[] args){
        int[] myArray = new int[]{2,3,1,6,2,87,5,3,546,9,2,3,8,111};
        int[] mySortedArray = quickSort(myArray);
        System.out.println(mySortedArray);
    }
} 
```

我在编译时遇到这些错误

```
 $ javac QuickSortExample.java
 QuickSortExample.java:11: cannot find symbol
 symbol  : method getFirst()
 location: interface java.util.List<E>
        E pivot = arr.getFirst();
                 ^
 QuickSortExample.java:37: <E>quickSort(java.util.List<E>) in QuickSortExample cannot be applied to (int[])
        int[] mySortedArray = quickSort(myArray);
                            ^
 2 errors 
```

我有 3 个问题。

1) 什么？在下面的陈述中是什么意思？

```
<E extends Comparable<? super E>> List<E> quickSort(List<E> arr) 
```

2) 由于 getFirst() 方法，这似乎适用于 LinkedList 对象。那是对的吗？如果是这样，我可以让它在一般列表上工作吗？我是否必须将我的整数数组转换为列表。我在这里有点困惑。我一直在咨询[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)和[LinkedList](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html) javadocs。

3) 我可以用 List 对象而不是 LinkedList 来完成这一切吗？是否有我不明白的为这个例子选择 LinkedList 的原因？另外，如果我想用一个整数数组来调用它，我是否必须在输入的过程中以不同的方式转换（？）那个输入，因为它看起来不像 Array 从 List 继承？

对于非常基本的问题，抱歉，只是第一次真正学习 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:10:58.543

1.  快速排序方法接受一个`List`类型的对象`X`并返回一个`List`类型的`X`。类型`X`应该实现`Comparable`具有泛型类型的接口`X`
2.  您可以使用该方法`Arrays.asList(<your-array>)`将数组转换为列表
3.  `LinkedList`方法契约中没有提到，你可以将任何类型的 传递`List`给`quickSort`方法，它会返回一个类型的对象`List`。`LinkedList`是`List`方法内部使用的一个实现。

前任：

```
 Integer[] arr = { 1, 2, 3 };
    List<Integer> asList = Arrays.asList(arr);
    quickSort(asList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T00:44:00.283

我已将 main 方法中的代码更改为以下代码：

```
public static void main(String[] args){
        Integer[] arr = {2,3,1,6,2,87,5,3,546,9,2,3,8,111};
        List<Integer> asList = Arrays.asList(arr);
        List<Integer> mySortedArray = quickSort(asList);
        System.out.println(mySortedArray);
    } 
```

该算法现在完美运行。

# paypal - PayPal SOAP API (.NET) - 退款交易错误 10004 交易 ID 无效

> ID：15695807
> 
> 赞同：0
> 
> 时间：2013-03-29T01:07:17.470
> 
> 标签：paypal, paypal-sandbox

我正在使用 .NET 的 PayPal SOAP SDK 进行退款交易。我尝试使用来自 SetExpressCheckout/DoExpressCheckout 调用的交易 ID 在 SDK 中调用 RefundTransaction 方法（它们运行良好）。PayPal API 返回 10004 错误“交易 ID 无效”。这是我的代码：

```
PayPalAPIInterfaceServiceService service = new PayPalAPIInterfaceServiceService();
RefundTransactionRequestType refundTransactionRequest = new RefundTransactionRequestType();

refundTransactionRequest.TransactionID = transactionID;
refundTransactionRequest.PayerID = payerID;
refundTransactionRequest.InvoiceID = invoiceNumber;
refundTransactionRequest.RefundType = RefundType.FULL;
refundTransactionRequest.Amount = new BasicAmountType(GetPayPalCurrency(currencyID), amount.ToString("F"));
var request = new RefundTransactionReq() { RefundTransactionRequest = refundTransactionRequest };
RefundTransactionResponseType refundTransactionResponse = service.RefundTransaction(request); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:45:55.153

仔细检查以确保您将 DoExpressCheckout 交易作为销售而非授权进行处理。如果是授权，您将无法退款。还要确保您使用的是您作为商家收到的交易 ID，而不是您作为买家收到的交易 ID。这两个交易 ID 将不同。如果您已经检查了这两件事，但它仍然无法正常工作，如果您可以提供您返回的 API 响应，其中包括 TIMESTAMP 和 CORRELATIONID，我可以在最后查看它。

# ember.js - ember-data 进行序列化时修改日期格式的最佳方法是什么？

> ID：15695809
> 
> 赞同：20
> 
> 时间：2013-03-29T01:07:53.410
> 
> 标签：ember.js, ember-data

在我的 ember-data 适配器中，我使用这一行来序列化我的模型

```
var data  = record.serialize(); 
```

但我注意到我的模型带有日期类型......

```
App.Foo = DS.Model.extend({
    start: DS.attr('date')
}); 
```

...将这样的日期发布到我的 REST api

> 格林威治标准时间 2013 年 3 月 2 日星期六 22:15:00

但我需要一些对 api 更友好的东西，例如 yyyy-mm-dd 或 mm/dd/yyyy

ember-data 是否提供了一个钩子来更改通过网络发送日期的方式？

我认为不是，因为这是 ember-data rev 11 中 serialize 方法的实际返回行

```
return dayOfWeek + ", " + dayOfMonth + " " + month + " " + utcYear + " " + pad(utcHours) + ":" + pad(utcMinutes) + ":" + pad(utcSeconds) + " GMT"; 
```

**更新**

我还打开了一个关于 ember-data 的问题，看看为什么选择这种格式开始

[https://github.com/emberjs/data/issues/845](https://github.com/emberjs/data/issues/845)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T01:43:43.610

您可以注册自定义序列化程序转换

```
DS.RESTAdapter.registerTransform("isodate", {
  deserialize: function(serialized) {
    return serialized;
  },

  serialize: function(deserialized) {
    return deserialized;
  }
}); 
```

然后将其用作`start: DS.attr("isodate")`，当然还有正确的序列化/反序列化定义:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-24T14:14:27.340

[您可以按照 Jakub 在此答案](https://stackoverflow.com/a/15696104/643109)中的建议注册一个新的转换。使用`Ember Data 1.0.beta.1`，您必须像这样在应用程序上[创建一个新的转换](https://github.com/emberjs/data/blob/master/TRANSITION.md#json-transforms)：

```
App.IsodateTransform = DS.Transform.extend({
  deserialize: function (serialized) {
    if (serialized) {
      return moment(serialized).toDate();
    }
    return serialized;
  },

  serialize: function (deserialized) {
    if (deserialized) {
      return moment(deserialized).toISOString();
    }
    return deserialized;
  }
}); 
```

如果不使用[moment.js](http://momentjs.com/) ，您可以更改`serialize`and定义。`deserialize`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-27T14:50:10.440

### Ember-Rails 解决方案：

我在 ember-rails 应用程序中使用**ember-data 0.13** / **ember.js 1.0.0.rc5**。我发现我必须执行以下操作才能将 javascript 日期与 rails 日期匹配。

```
# Transforms Date to avoid miss-match with rails date
DS.JSONTransforms.isodate =
  deserialize: (serialized) ->
    if serialized
      date = new Date(serialized)
      offset = date.getTimezoneOffset()
      new Date(date.getTime()+offset*60000)
    else 
      null

  serialize: (date) ->
    if date then moment(date).format("YYYY-MM-DD") else null 
```

*我正在使用[moment.js](http://momentjs.com/)进行序列化，但你自己做可能并不难。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-29T09:58:59.423

不依赖 moment.js 的版本

取自[https://github.com/toranb/ember-data-django-rest-adapter/issues/26](https://github.com/toranb/ember-data-django-rest-adapter/issues/26)

```
 App.IsodateTransform = DS.Transform.extend({
    deserialize: function(serialized) {

      var type = typeof serialized;

      if (type === "string") {
        return new Date(Ember.Date.parse(serialized));
      } else if (type === "number") {
        return new Date(serialized);
      } else if (serialized === null || serialized === undefined) {
        // if the value is not present in the data,
        // return undefined, not null.
        return serialized;
      } else {
        return null;
      }
    },

    serialize: function(date) {
      if (date instanceof Date) {
        return date.toJSON();
      } else {
        return null;
      }
    }
  }); 
```

# ruby-on-rails-3 - 自定义模型验证错误消息警报

> ID：15695811
> 
> 赞同：6
> 
> 时间：2013-03-29T01:07:59.817
> 
> 标签：ruby-on-rails-3, locale, alert, nested-forms, nested-attributes

我正在尝试自定义用户在错误输入数据时**在表单顶部看到的错误消息警报。**我尝试自定义的错误消息警报适用于嵌套形式的模型属性。

我在[这里](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)尝试了解决方案，它说要编辑`config/locales/en.yml`文件，但这只会更改消息，而不是在错误消息之前显示的模型和属性的名称。

我还尝试了比利在下面[的回答](https://stackoverflow.com/a/15696077/1814446)中提出的建议，结果相同。IE

**1 个错误禁止保存此远足小径：**
**- 来自“我的自定义空白错误消息”的路线说明**

有没有办法让我在错误消息中显示对用户更友好的模型和属性名称，或者将它们完全从错误消息中删除？

这是我所拥有的：

## 配置/语言环境/en.yml

```
 # Sample localization file for English. Add more files in this directory for other locales.
    # See https://github.com/svenfuchs/rails-i18n/tree/master/rails%2Flocale for starting points.
en:  
  activerecord:
    models: 
      direction: "In the Getting There section"
    attributes:
      direction:
        directions_from: "From field"
    errors:
      full_messages:
      format: "%{message}"
      models:
        direction:
          attributes:
            directions_from:
              blank: "My Custom Blank Error Message" 
```

## 模型

```
class Direction < ActiveRecord::Base
  belongs_to :hikingtrail

  attr_accessible :directions_by, :directions_desc, :directions_from

  validates :directions_from, :presence => {message: "'My Custom Error Message'", :if => Proc.new { |a| a.directions_by? || a.directions_desc? } }

  validates :directions_by, :presence => {message: "'My Custom Error Message'", :if => Proc.new { |a| a.directions_from? || a.directions_desc? } }

  validates :directions_desc, :presence => {message: "'My Custom Error Message'", :if => Proc.new { |a| a.directions_from? || a.directions_by? } }
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T01:39:36.450

您可以使用`:message`选项来分配自定义错误消息。

例子：

```
validates :directions_from, presence: true, 
  message: "'Direction from' really really really can't be blank!" 
```

然后此自定义错误消息将显示`<%= msg %>`在表单视图中。

参考：[http ://edgeguides.rubyonrails.org/active_record_validations.html#message](http://edgeguides.rubyonrails.org/active_record_validations.html#message)

**添加** 回答OP关于评论的问题，即网页中显示的消息不是很友好，显示结果为“Direction from 'Direction from'的方向真的真的真的不能为空”

原因是视图模板用于`errors.full_messages`显示错误消息。您可以使用两个选项轻松自定义它：

选项 1：编写没有主题的自定义消息。IE`really can't be blank`

`message`选项 2：像以前一样用完整的句子写信息，但只在视图中引用，而不是`full_message`

例子：

```
<% @hikingtrail.errors.messages.each do |msg| %>
    <li><%= msg %></li>
<% end %> 
```

参考：[http](http://rubydoc.info/docs/rails/3.2.8/ActiveModel/Errors) ://rubydoc.info/docs/rails/3.2.8/ActiveModel/Errors （`full_message`只不过是`attribute`和的混合`message`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T14:30:52.093

使用 Rails 6，现在可以`full_messages`在模型或属性级别自定义 helper 使用的格式。

```
en:
  activerecord:
    errors:
      models:
        direction:
          attributes:
            directions_from:
              format: "%{message}"
              blank: "'Direction from' really really really can't be blank!" 
```

这样，针对此错误生成的消息将是您的不带模型前缀的消息，而其他模型和属性的默认 full_messages 则保持不变。

本文中的更多信息： [https ://blog.bigbinary.com/2019/04/22/rails-6-allows-to-override-the-activemodel-errors-full_message-format-at-the-model-level -and-at-the-attribute-level.html](https://blog.bigbinary.com/2019/04/22/rails-6-allows-to-override-the-activemodel-errors-full_message-format-at-the-model-level-and-at-the-attribute-level.html)

# mule - 异常时如何关闭Mule TCP套接字？

> ID：15695814
> 
> 赞同：1
> 
> 时间：2013-03-29T01:08:17.270
> 
> 标签：mule

我正在使用`tcp:connector`带有属性的 a`keepalive`并`keepsendSocketopen`设置为`true`.

它必须建立，直到我有例外。

我`default-exception-strategy`用来捕获异常。

我想关闭我的异常流中的套接字并连接一个新的。

我怎样才能做到这一点 ？帮我一些示例代码和 xml 配置参考

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:19:00.250

请参考几个月前我问过的这篇[文章。](https://stackoverflow.com/questions/13229499/how-to-get-the-socket-object-from-mule-tcpconnector)我不确定骡子现在进化了多少，但这对我有用。

# r - 使用 ggplot2 在 R 中绘制自定义颜色线和图例

> ID：15695815
> 
> 赞同：0
> 
> 时间：2013-03-29T01:08:24.053
> 
> 标签：r, ggplot2

我希望使用 ggplot2 库函数为每条线绘制具有自定义颜色的多个模型数据。我可以使用 ggplot 生成的随机颜色来做到这一点，但是如果我尝试放置自定义颜色，则图例正在消失。请帮我解决这个问题。下面是可重现的示例，我想要一条黑色和一条绿色线以及标签。提前致谢。

```
library(ggplot2)

flux<-c(-4.351645e-11 ,7.724330e-10 ,-1.631623e-10,2.832141e-10,-2.396649e-11,
# first model 5 entries
-7.825169e-10 ,-2.534337e-10,-3.837198e-10 ,-2.765284e-10,-6.515152e-10)
# 2nd model 5 entries

model<-c('SDGVM','SDGVM','SDGVM','SDGVM','SDGVM',  # 1st model
        'TRIFFID','TRIFFID','TRIFFID','TRIFFID','TRIFFID') # 2nd model

latitude<-c(-34,-36,-39,-41,-44,-34,-36,-39,-41,-44)

color<-c('black','black','black','black','black',
            'green','green','green','green','green')

input_df <-structure(list(flux = flux, model = model, lat = latitude,
color_plate=color), 
.Names = c("flux","model", "lat","color_assigned"), row.names = c(NA, -10L),
class = "data.frame") 

xlims=c(-50,-30) # x axis extent
custom_break<-seq(min(xlims),max(xlims),by=2)

theme_set(theme_bw(12))

chart <-ggplot(input_df, aes(x=lat, group=model, colour=model, fill=model)) +
     geom_line(aes(y=flux), size=1.0) +
    theme(legend.position='bottom') + 
        scale_x_continuous('Latitude',limits=xlims,breaks=custom_break) + 
#custom breaks_to customize labels in x axis
    scale_y_continuous(expression('Flux Difference')) +
    scale_colour_discrete(name='', guide=guide_legend(nrow=4)) +
    scale_fill_discrete(name='Model') +
    geom_hline(aes(yintercept=0)) #to add black line at 0
print(chart) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:30:52.583

您设置了错误的属性/属性。您想提供可以使用设置的手动颜色`scale_colour_manual`。

替换这一行：

```
scale_colour_discrete(name='', guide=guide_legend(nrow=4)) + 
```

和：

```
scale_colour_manual(values=c("black", "green"), name="", 
              guide=guide_legend(nrow=4)) + 
```

然后再试一次。

你应该得到这样的情节：

![在此处输入图像描述](../Images/f9439f88f035d71ba1277357aae5f068.png)

这有帮助吗？

# css - 使用图像精灵在点击时更改 z-index？

> ID：15695818
> 
> 赞同：0
> 
> 时间：2013-03-29T01:08:48.133
> 
> 标签：css, z-index

如果我有一个使用 css 图像精灵的导航菜单，是否可以在单击/选择链接时更改 z-index？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:29:08.943

您不能真正使用 CSS 来更改*点击*（除非您使用`:active`，但这只会持续片刻，*同时*点击）。请改用 JavaScript。

假设您的 CSS 如下所示：

```
#change_me {
    z-index: 1;
} 
```

然后你可以使用一些内联 JavaScript 来获得 HTML：

```
<div id="change_me">My z-index will change</div>
<div onclick="document.getElementById('change_me').style.zIndex='2'">
    Click Me!
</div> 
```

单击第二个`div`将更改第一个（即`#change_me`）的 z-index。

元素是什么并不重要（它们可以是`div`'s、`span`'s、`p`'s 等）

# python - python项目中的奇怪错误

> ID：15695823
> 
> 赞同：0
> 
> 时间：2013-03-29T01:09:27.203
> 
> 标签：python, debugging

我正在用 Python 做一个大项目，我遇到了一个我无法解释的奇怪错误。在我的一个类中，我在实例化期间调用了一个私有方法：

```
def _convertIndex(self, dimInd, dimName):
    '''Private function that converts numbers to numbers and non-integers using 
    the subclass\'s convertIndex.'''
    print dimInd, ' is dimInd'
    try:
        return int(dimName)
    except:
        if dimName == '*':
            return 0
        else:
            print self.param.sets, ' is self.param.sets'
            print type(self.param.sets), ' is the type of self.param.sets'
            print self.param.sets[dimInd], ' is the param at dimind'
            return self.param.sets[dimInd].value(dimName) 
```

打印出来的内容：

```
0  is dimInd
[<coremcs.SymbolicSet.SymbolicSet object at 0x10618ad90>]  is self.param.sets
<type 'list'>  is the type of self.param.sets
<SymbolicSet BAZ=['baz1', 'baz2', 'baz3', 'baz4']>  is the param at dimind
======================================================================
ERROR: testParameterSet (GtapTest.TestGtapParameter)
----------------------------------------------------------------------
Traceback (most recent call last):
File "/Users/myuser/Documents/workspace/ilucmc/gtapmcs/test/GtapTest.py", line 116, in testParameterSet
pset = ParameterSet(prmFile, dstFile, GtapParameter)
File "/Users/myuser/Documents/workspace/ilucmc/coremcs/ParameterSet.py", line 103, in __init__
self.distroDict, corrDefs = AbsBaseDistro.readFile(distFile, self.paramDict)
File "/Users/myuser/Documents/workspace/ilucmc/coremcs/Distro.py", line 359, in readFile
distro = cls.parseDistro(param, target, distroType, args)
File "/Users/myuser/Documents/workspace/ilucmc/coremcs/Distro.py", line 301, in parseDistro
return cls(param, target, distro, dim_names, argDict)
File "/Users/myuser/Documents/workspace/ilucmc/coremcs/Distro.py", line 150, in __init__
self.dim_indxs = list(starmap(self._convertIndex, enumerate(dim_names)))  # convert to numeric values and save in dim_indxs
File "/Users/myuser/Documents/workspace/ilucmc/coremcs/Distro.py", line 194, in _convertIndex
print self.param.sets[dimInd], ' is the param at dimind'
IndexError: list index out of range 
```

显然这不是整个班级的代码，但它代表了我不明白的东西。当我索引 self.param.sets 时，错误就来了。显然，dimInd 超出了范围。问题是，dimInd 是 0，而 self.param.sets 是长度为 1 的列表（如打印语句所示），那么为什么我不能索引它呢？

编辑：对于它的价值，该`__init__`方法如下所示：

```
'''
Stores a definitions of a distribution to be applied to a header variable.
See the file setup/gtap/DistroDoc.txt for the details.
'''
def __init__(self, param, target, distType, dim_names, argDict):
    self.name = param.name
    self.dim_names = dim_names
    self.dim_indxs = []
    self.target = target.lower() if target else None
    self.distType = distType.lower() if distType else None
    self.rv = None
    self.argDict = {}
    self.modifier = defaultdict(lambda: None)
    self.param = param

    # Separate args into modifiers and distribution arguments
    for k, v in argDict.iteritems():
        if k[0] == '_':  # modifiers start with underscore
            self.modifier[k] = v
        else:
            self.argDict[k] = v  # distribution arguments do not have underscore

    if self.target == 'index':
        print dim_names
        self.dim_indxs = list(starmap(self._convertIndex, enumerate(dim_names)))  # convert to numeric values and save in dim_indxs

    if distType == 'discrete':
        entries = self.modifier['_entries']
        if not entries:
            raise DistributionSpecError("Not enough arguments given to discrete distribution.")
        modDict = {k[1:]: float(v) for k, v in self.modifier.iteritems() if k[1:] in getOptionalArgs(DiscreteDist.__init__)}
        self.rv = DiscreteDist(entries, **modDict)
        return
    sig = DistroGen.signature(distType, self.argDict.keys())
    gen = DistroGen.generator(sig)

    if gen is None:
        raise DistributionSpecError("Unknown distribution signature %s" % str(sig))

    self.rv = gen.makeRV(self.argDict)  # generate a frozen RV with the specified arguments
    self.isFactor = gen.isFactor 
```

# entity-framework - LINQ to Entities 无法识别方法 ... get_Item(Int32)

> ID：15695825
> 
> 赞同：1
> 
> 时间：2013-03-29T01:09:40.530
> 
> 标签：entity-framework, entity-framework-4

（请在标记为重复之前阅读，因为我的特定场景是独一无二的）

我有以下代码：

```
 // Get each treasure hunt
        var treasureHunts = dbContext.TreasureHunts.Where(i => i.UserName == User.Identity.Name).ToList();

        // Populate each treasure hunt with the list of leaderboard entries
        for (int i = 0; i <= treasureHunts.Count; i++)
        {
            treasureHunts[i].Leaderboard = dbContext.Leaderboard.Where(
                leaderboard => leaderboard.TreasureHuntId == treasureHunts[i].TreasureHuntId).ToList();
        } 
```

在运行程序时，我从第二个数据库查询（dbContext.Leaderboard.Where...）中得到以下错误：

> LINQ to Entities 无法识别方法 'QrCodeTreasureHunter.Models.TreasureHuntDetails get_Item(Int32)' 方法，并且此方法无法转换为存储表达式。

在第一个查询中，我得到了与特定用户关联的每个寻宝活动。

在第二部分中，我尝试遍历每个寻宝活动，并使用我的排行榜表中的相关排行榜条目填充寻宝活动的排行榜列表属性。

根据我从阅读中了解到的情况，使用 Entity Framework 无法以当前形式进行此查询。

您可以推荐哪些解决方法或解决方案来解决此问题？理想的解决方案不涉及对数据模型的更改。

如果相关，这里是 TreasureHunt 模型：

```
 public class TreasureHuntDetails
{
    public TreasureHuntDetails()
    {
        Clues = new List<Clue>();
        Leaderboard = new List<Leaderboard>();

        var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
        var dcs = new DataContractSerializer(typeof (TreasureHuntDetails), null, int.MaxValue,
                                             false, true, null);
        xml.SetSerializer<TreasureHuntDetails>(dcs);
    }

    [Key]
    public int TreasureHuntId { get; set; }
    [Required]
    public virtual string UserName { get; set; }
    [Required]
    public String Name { get; set; }
    public String Description { get; set; }
    [Required]
    public String Password { get; set; }
    public String CompletionMessage { get; set; }
    public String State { get; set; }
    public List<Clue> Clues { get; set; }
    public List<Leaderboard> Leaderboard { get; set; } 
} 
```

这是排行榜模型：

```
 public class Leaderboard
{
    [Key]
    public int Id { get; set; }
    public int TreasureHuntId { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public int Completion { get; set; }

    public DateTime? StartTime { get; set; }
    public DateTime? EndTime { get; set; }
    public Int64 TimeTaken { get; set; }

    public TreasureHuntDetails TreasureHuntDetails { get; set; }
} 
```

祝你好运！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T04:14:16.627

我现在无法测试它，但它可能是索引器，试试这个：

```
foreach (var treauserHunt in treasureHunts)
{
    treasureHunt.Leaderboard = dbContext.Leaderboard.Where(leaderboard => 
        leaderboard.TreasureHuntId == treasureHunt.TreasureHuntId).ToList();
} 
```

我不确定这是不是问题，但我记得在 LINQ 查询中的数组索引有一些问题，只是不记得是 LINQ 方法语法（您正在使用的那个）还是另一个（SQL -像）;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T21:47:27.817

感谢你的回答; 它解决了我的问题。我仍然想使用 for 循环，所以我做了这样的事情：

```
for (int i = 0; i <= treasureHunts.Count; i++)
    {
        var thisTreasureHunt = treasureHunts[i];

        treasureHunts[i].Leaderboard = dbContext.Leaderboard.Where(
            leaderboard => leaderboard.TreasureHuntId == thisTreasureHunt.TreasureHuntId).ToList);
    } 
```

# php - Php 多实例上传文件一次提交，带有进度条的第二页上的进程

> ID：15695827
> 
> 赞同：0
> 
> 时间：2013-03-29T01:09:49.417
> 
> 标签：php, jquery, file-upload, progress-bar

对不起我的英语，我不得不使用谷歌翻译

我有一个表格，在这个表格中我有几个输入上传文件。

我要做的是立即将 arquives 发送到下一页。当它发生时，它会使页面变暗并显示一个进度条，它会在其中发送所有文件。一旦你这样做，它就完成了在数据库中的记录。

**上传的文件是多个实例**

发现我上传了多个文件，但没有我想做的原因，也不知道我能做些什么来得到这个结果。

我不能使用**XMLHttpRequest**但我可以使用**APC**

我确实检查了档案的大小和类型（PDF、JPG、ZIP）

我有一张可以自我解释的图片，请参阅链接

[图片](http://www3.mackenzie.com.br/pos_graduacao/uploads/foto/up.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:37:22.877

除了不能使用 XMLHttpRequest 之外，不能使用任何 ajax 解决方案。但在我看来，这只适用于ajax。

我建议您查看[uploadify](http://www.uploadify.com/)。在上传开始和上传文件时会触发几个事件。只需看看[文档](http://www.uploadify.com/documentation/)！您也可以一次上传多个文件，而无需多次输入文件上传。

您可以在上传开始时（一次，只需将第一个文件的上传开始时的 var 设置为 true 或其他内容，表明上传已开始）显示一个带有 HTML 元素的叠加 div，模拟进度条。此进度条可以在上传时通过 javascript 更新。Uploadify 应该为您提供有关文件和字节数的所有信息。

上传和数据库部分由您指定的 php 文件处理。

# hibernate - postgres - 从事务 id 中找出 sql 查询

> ID：15695829
> 
> 赞同：1
> 
> 时间：2013-03-29T01:10:11.603
> 
> 标签：hibernate, postgresql, transactions, psql

我在跑步

```
select * from pg_lock; 
```

获取具有排他锁的事务。

一旦我知道具有排他锁的事务 id，我如何找出与该事务关联的 sql 查询。

```
select * from pg_stat_activity; 
```

给我 sql 查询，但不给我事务 id。

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:00:11.610

你需要加入pid。

```
-- For PostgreSQL 9.1
select l.pid, l.mode, sa.procpid, sa.current_query
from pg_locks l
inner join pg_stat_activity sa
        on l.pid = sa.procpid
where l.mode like '%xclusive%';

-- For PostgreSQL 9.2
select l.pid, l.mode, sa.pid, sa.query
from pg_locks l
inner join pg_stat_activity sa
        on l.pid = sa.pid
where l.mode like '%xclusive%'; 
```

> pid 列可以连接到 pg_stat_activity 视图的 pid 列，以获取有关会话持有或等待持有每个锁的更多信息。此外，如果您使用准备好的事务，可以将事务列连接到 pg_prepared_xacts 视图的事务列，以获取有关持有锁的准备事务的更多信息。（准备好的事务永远不会等待锁，但它会继续持有它在运行时获得的锁。）

[资源](http://www.postgresql.org/docs/9.2/interactive/view-pg-locks.html)

可用的列和列名在 9.1 和 9.2 版本之间略有不同。

# java - 调用方法没有得到结果

> ID：15695830
> 
> 赞同：0
> 
> 时间：2013-03-29T01:10:27.197
> 
> 标签：java, class, methods

所以我只是想打印一个随机的单词，就是这样

```
Dictionary secret = new Dictionary();        
    secret.getRandomWord();        
    System.out.println(secret); 
```

^所有这些都在我的主程序中。以及我必须使用的东西

```
 public String getRandomWord(){
    Random generator = new Random();
    String temp = new String();
    temp += dictionary[generator.nextInt(NUMBER_OF_WORDS)];
    return temp; 
```

上面的代码是我必须使用的一个类。当我运行我的代码`program3.Dictionary@a37368`时，我得到它应该是一个随机词。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:11:30.420

我想你正在寻找

```
Dictionary secret = new Dictionary();
String randomWord = secret.getRandomWord();        
System.out.println(randomWord); 
```

您当前拥有的是打印.引用`toString()`的对象的结果。`Dictionary``secret`

* * *

**编辑**

也可能没有额外的变量：

```
Dictionary secret = new Dictionary();        
System.out.println(secret.getRandomWord()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:13:01.620

您正在打印`Dictionary`对象，尝试存储`getRandomWord`方法的返回类型并打印相同。

```
String secretStr = secret.getRandomWord();
System.out.println(secretStr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:38:03.633

好吧，我认为您需要更改代码。

代替：

```
Dictionary secret = new Dictionary();        
    secret.getRandomWord();        
    System.out.println(secret); 
```

采用：

```
Dictionary secret = new Dictionary();    
String randomWord = secret.getRandomWord(); 
System.out.println(randomWord); 
```

那么，发生了什么？

# java - 点击画布

> ID：15695832
> 
> 赞同：0
> 
> 时间：2013-03-29T01:10:36.640
> 
> 标签：java, button, pong, java-canvas

我正在制作一个 Pong 程序，并且我有一个开始按钮，可以开始绘制所有内容，并且确实可以让球滚动（欢迎您使用双关语）。无论如何，当我点击开始按钮时，除非我在画布上的某处单击鼠标以赋予它优先级，否则移动桨的 Key Listener 将不起作用。是否有某种代码可以自动在画布上“单击”而不会打扰用户这样做？提前致谢。

顺便说一句，这是在运行 awt。我意识到我应该学习挥杆，但一直没有去做。

```
public class Pong extends Applet implements ActionListener, KeyListener
{
    Canvas c1;
    Graphics myG;
    Button start;

    ball ball;
    paddle LPaddle;
    paddle RPaddle;

    public void init()
    {
        this.setSize(1300,700);

        c1 = new Canvas();
        add(c1);
        c1.addKeyListener(this);
        c1.setBackground(Color.pink);

        start = new Button("Start");
        add(start);
        start.addActionListener(this);

        ball = new ball();

        LPaddle = new paddle();
        RPaddle = new paddle();

        myG = c1.getGraphics();

    }

    public void paint(Graphics g)
    {
        c1.setLocation(0,0);
        c1.setSize(1251,700);

        start.setLocation(1255,350);
        start.setSize(40,20);
    }

    public void keyPressed(KeyEvent e) 
    {
        if(e.getKeyCode()==KeyEvent.VK_UP)//up
        {
            RPaddle.erasePaddle(myG);
            RPaddle.movePaddleUp();
            RPaddle.drawPaddle(myG);
        }
        if(e.getKeyCode()==KeyEvent.VK_DOWN)//down
        {
            RPaddle.erasePaddle(myG);
            RPaddle.movePaddleDown();
            RPaddle.drawPaddle(myG);
        }
        if(e.getKeyCode()==KeyEvent.VK_W)
        {
            LPaddle.erasePaddle(myG);
            LPaddle.movePaddleUp();
            LPaddle.drawPaddle(myG);
        }
        if(e.getKeyCode()==KeyEvent.VK_S)
        {
            LPaddle.erasePaddle(myG);
            LPaddle.movePaddleDown();
            LPaddle.drawPaddle(myG);
        }
        if(e.getKeyCode()==KeyEvent.VK_ENTER)
        {
            myG.drawLine(625,0,625,700);
            LPaddle.setInitial(150,0,350);
            RPaddle.setInitial(150,1250,350);

            LPaddle.drawPaddle(myG);
            RPaddle.drawPaddle(myG);
        }
    }

    public void keyReleased(KeyEvent e) 
    {

    }

    public void keyTyped(KeyEvent e) 
    {

    }

    public void actionPerformed(ActionEvent e) 
    {
        if(e.getSource()==start)
        {
            myG.drawLine(625,0,625,700);
            LPaddle.setInitial(150,0,350);
            RPaddle.setInitial(150,1250,350);

            LPaddle.drawPaddle(myG);
            RPaddle.drawPaddle(myG);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:09:27.783

`KeyListeners`是低级接口，有一个主要的、显着的缺点：它们注册到的组件必须是可聚焦的并且是可聚焦的。

通过单击开始按钮，您将获得按钮焦点。

您可以调用`requestFocusInWindow`画布的实例，但这假定画布首先是可聚焦的。

如果可以，最好使用`JComponent`/`JPanel`作为游戏画布的基础并使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)API。

# php - php如何包含另一个文件中的一些变量

> ID：15695838
> 
> 赞同：0
> 
> 时间：2013-03-29T01:11:53.140
> 
> 标签：php, variables, get

说我有一个主文件：

```
 <form id="form1" name="form1" action="" method="post">
        <input title="Masukkan kalimat disini" type="text"  />
            <?php   
           //main.php 
            $a = ...;
            $b = ....;
    ?> 
```

并包含文件

```
 <?php
//included.php
    include 'main.php';
    ?> 
```

当然included.php文件会加载main.php的所有部分，那么如何包含一些变量，比如只包含$a，而不显示文本字段

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:10:09.893

如果您只想包含一个变量（或一组变量），它们需要在自己的文件中。理想情况下，您还可以将它们放在不同的范围（例如类）中，这样它们就不会弄乱全局命名空间。

例如，

**配置.php：**

```
<?php
    class Foo {
        public $a = "I am a variable";
        public $b = "I am also a variable";
        const $c = "I am an immutable variable!";
    }
?> 
```

**主.php：**

```
<form id="form1" name="form1" action="" method="post">
<input title="Masukkan kalimat disini" type="text" />
<?php
    @require_once "config.php";
?> 
```

**包含的.php：**

```
<?php
    @require_once "config.php";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:15:30.237

如果您包含该页面，您将能够使用在不同页面上设置的设置变量（如果有意义的话）

*全球.inc.php*

```
<?php
   $Var_1 = "This will work"; 
   $Var_2 = "Another set variable.";
?> 
```

*索引.php*

```
<?php
   include "Global.inc.php";
   echo $var_1; // This will output 'This will work'
?> 
```

由于您已包含文件，因此所有内容都将可用；你只需要使用你想要的变量。包含 300 行页面（例如使用少于 50 行代码）不会对性能造成影响。

*更新：*

在 HTML 结构中显示：

输入：

```
<input type='text' name='Name' value='<?php echo $Var_1; ?>'> 
```

文本框：

```
<textarea><?php echo $Var_1; ?></textarea> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T02:01:47.973

编程只是驱动你的想法:)

所以我想说的是，您的问题是如何仅包含包含文件的某些部分，而我的回答是，您可以通过在每次包含该文件时包含主文件时进行测试来查看该文件是否包含该文件是否包含在内部，您可以更精确地将主文件拆分为块，这些块由于合适的变量而被加载

看看这个解决方法，希望你能理解我的意思

假设我们有名为 main.php 的主文件包含该内容

```
<?php
     echo 'I am a java programmer';
     echo 'I know also PHP very well';
     echo 'When the jquery is my preferred toast !';
?> 
```

现在我有三个外部文件，其中将包含该文件每个文件都特定于这 3 种编程语言中的一种

所以我将以这种方式创建我的 3 个文件：

文件：java.php

```
<?php
    $iamjavadevelopper = 1;
    include_once("main.php");
?> 
```

文件：phpfav.php

```
<?php
    $iamphpdevelopper = 1;
    include_once("main.php");
?> 
```

文件：jquery.php

```
<?php
    $iamjquerydevelopper = 1;
    include_once("main.php");
?> 
```

我的 main.php 将以这种方式编码

```
<?php
    if(isset($iamjavadevelopper))
        echo 'I am a java programmer';
    if(isset($iamphpdevelopper))
        echo 'I know also PHP very well';
    if(isset($iamjquerydevelopper))
     echo 'When the jquery is my preferred toast !';
?> 
```

通过这种方式，我们三个外部文件中的每一个都将只显示包含文件的一部分:)

希望这很清楚和有帮助:) 任何需要的帮助我都准备好了:)

# ios - Accessing Google Calendar API with OAuth2 on iPhone

> ID：15695843
> 
> 赞同：0
> 
> 时间：2013-03-29T01:12:32.283
> 
> 标签：ios, objective-c, google-api, oauth-2.0, google-calendar-api

I'm trying to build google calendar functionality for an iPhone app. I understand I need to be authorized with OAuth2 and would like help some help. The iPhone app is accessing a public calendar and therefore the user is not supposed to login with a webview like the google toolbox framework. FWIW, I have my account set up. Any framework recommendation or good tutorials for this would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T15:54:43.747

我和你在同一条船上。您在这方面找到的信息稀缺且令人困惑……不幸的是。

您可能已经访问过[Google 的 API 文档](https://code.google.com/p/google-api-objectivec-client/)。这篇[文章](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)帮助我让 GDataObjC-Client 在我的项目中工作。

不幸的是，谷歌的示例都适用于 Mac 而不是 iOS。他们的看法是，iOS 的方法与 Mac 的方法几乎相同，因此您要弄清楚如何将 Mac 部分转换为 iOS。

我最终这样做了......我创建了一个新的 XCode 项目并将 Mac 应用程序的 CalendarSampleWindowController 的代码带到我的 ViewController 中。

祝你好运！

# css - Styling a DataPager

> ID：15695844
> 
> 赞同：0
> 
> 时间：2013-03-29T01:12:32.623
> 
> 标签：css, datapager

I have a listview control attached to a DataPager (or the other way around!) and am wondering if anybody can tell me how you can set the width on the NumericPagerField field? I have tried setting it via the NumericButtonCssClass and things like background colors, borders, padding etc. work but anytime I try explicitly stating a width, whatever value I state does not take affect.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T07:37:44.347

datapager 中的按钮在页面中呈现为`<a><a/>`. “a”元素具有默认值 `display: inline;`并且不接受任何宽度。要应用您的宽度，您需要添加`display:inline-block;`您的 css 样式

```
.NumericButtonCssClass
{
    width:25px;
    display:inline-block;
} 
```

# python - python双向链表__len__

> ID：15695846
> 
> 赞同：1
> 
> 时间：2013-03-29T01:12:57.690
> 
> 标签：python

我似乎无法让我的**len**函数工作，我一直在尝试大量的东西，但我是一个完整的初学者，所以我很确定我错过了一些完全明显的东西。这是我的代码...

```
 def __len__(self):
    if self.head is None:
        return 0
    else:
        return self.size 
```

我背后的想法很简单。如果双向链表的头部为None，那么它必须为空所以返回0，否则，只返回链表的大小。

但是，我得到一个断言错误说......

```
AssertionError: List should contain 1 element, but length is 0 
```

任何帮助表示赞赏，在此先感谢。

编辑：这是运行我的功能的代码...

```
testList.add(14)
assert len(testList) == 1, "List should contain 1 element, but length is %r" % len(testList) 
```

EDIT2：这是我的添加功能，我很确定它是对的，我花了 2 个小时在上面...

```
def add(self, value):
    newNode = DoubleListNode(value)
    if self.head is None:
        self.head = newNode
        self.tail  = newNode
        newNode.prev = None
        newNode.next = None
        return newNode
    elif value < self.head.data:
        self.head = newNode
        newNode.next = self.head
        newNode.prev = None
        return newNode
    elif value > self.tail.data:
        self.tail = newNode
        newNode.prev = self.tail
        newNode.next = None
        return newNode
    else:
        node = self.head
        node2 = node
        while node is not None and node.data < value :
            node = node.next
            node2 = node.prev
        newNode.next = node.prev
        newNode.prev = node2.next
        return newNode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:20:55.757

你的`add`函数没有任何会增加的东西`self.size`。所以它是你设置的任何内容`__init__`，大概是`0`.

因此，当列表实际上为空时，`__len__`返回`0`因为`self.head`is `None`。

添加元素后，它*仍然*返回`0`，因为`self.size`is `0`。

* * *

此外，您的代码中至少还有一个其他问题。看这个：

```
elif value > self.tail.data:
    self.tail = newNode
    newNode.prev = self.tail
    newNode.next = None
    return newNode 
```

显然，`newNode.prev`最终会指向自己，而不是之前的尾巴。

有很多东西可以帮助判断代码的正确性——单元测试、没有工作过的人的代码审查、使用交互式可视化工具逐步完成代码、正式的证明等等——但是你工作的小时数它不是那些事情之一。

# c++ - How to call in a function a lambda function as a parameter?

> ID：15695848
> 
> 赞同：1
> 
> 时间：2013-03-29T01:13:05.540
> 
> 标签：c++, pointers, c++11, lambda

No idea how I could rephrase the title better.

I want to move low level code outside of a simple function and move the code inside the class so the class takes care of the more complicated stuff.
I want to go from this:

```
void a(void) {
    [low level operation];
    //User typed simple operations
    [low level operation];
}

static void AClass::b() {
    register(a); //register(void (__cdecl *func)())
}

int main(void) {
    AClass::b();
    return 0;
} 
```

To:

```
void a(void) {
    //[no low level operation]
    //User typed simple operations
    //[no low level operation]
}

static void AClass::b(void (*func)()) {
    auto funcA = [] (void (*func)()) -> void (*)() { 
        [that first low level operation]; 
        func(); //Which is: void a(void);
        [the second low level operation]; 
    };
    register(funcA(func));
}

int main(void) {
    AClass::b(&a);
    return 0;
} 
```

At the moment I get the error "**< lambda >::operator ()' : function must return a value**" - because of the pointer. How could I solve this problem? Returning just void doesn't work. Passing the arguments(the function "func") by reference to the lambda also doesn't work(Cause in this case the lambda is not just a function any more but a Class) - the **register(void (__cdecl *func)())** can't convert the now not a function lambda.

Any ideas how to solve my problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:49:17.610

有状态的 lambda 不能转换为函数指针。

只有没有状态的 lambda 可以转换为函数指针。

您的州需要通过一些后门滑入。`glutDisplayFunc`，只需要一个无状态函数指针。修改它是不可能的。

如果你能找到一个后门来存储一些东西，你可以用它来存储一个任意的 lambda。在这种情况下，`glutDisplayFunc`与当前窗口相关联。有没有什么地方可以在当前窗口中推动状态，并找出是哪一个？

假设你找到这样一个`void*`. 然后只需分配 a `std::function<void()>`，将其推入其中，并注册以下 lambda：

```
void AClass::b(void (*func)()) {
   auto funcA = [func] () { 
     [that first low level operation]; 
     func(); //Which is: void a(void);
     [the second low level operation]; 
   };
   registerPVoidSomewhere( new std::function<void()>( funcA ) );

   register([]() {
     void* pVoid = getPVoidFromWhereIHideItAbove();
     std::function<void()>* pFunc = reinterpret_cast<std::function<void()>*>( pVoid );
     if (pFunc) {
       (*pFunc)();
     };
   } );
} 
```

现在，我敢打赌，当调用 时，当您可以询问当前窗口是什么`glutDisplayFunc`时，它会从上下文中调用。`glut`也许那个窗口有一个用户定义的位置`void*`，或者你可以有一个从窗口指针到`void*`你管理的全局映射（在第二种情况下，你甚至可以有一个从窗口指针到的全局映射`std::function<void()>`，并摆脱那个讨厌的铸件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:26:13.247

There are two problems, one with the types and one that you declare the lambda to return a function pointer but actually don't return anything.

The first can easily be solved by using templates:

```
struct AClass
{
    template<typename Ft>
    static void b(Ft func)
    {
        auto funcA = [&func]()
        {
            // Do some stuff
            func();
            // Do some other stuff
        };
        some_register_function(funcA);
    }
}; 
```

As you can see I also changed the lambda declaration, because in your version you actually *call* it, which will also call the function pointer you pass in as argument, and this solves the second problem.

Please note that I don't actually know if it will work, as `glutDisplayFunc` is a pure C function in a pure C library, and don't know anything about lambdas or function objects.

# html - 背景图像动画

> ID：15695852
> 
> 赞同：2
> 
> 时间：2013-03-29T01:13:16.680
> 
> 标签：html, css

我正在尝试为导航栏按钮设置动画，我希望 li 标签背景中的图像上下弹跳，而文本（图像）保持静止。

我知道没有用于动画背景图像的直接 CSS 方法，但是我试图考虑到这一点。

请参阅下面的 JSFiddle 链接以获取我的代码：

[http://jsfiddle.net/JTp6x/](http://jsfiddle.net/JTp6x/)

```
#Home
{ 
    position: absolute;
    width:125px;
    height:100px;
    background: transparent url('Images/Icons/HomeIcon.png') no-repeat top center;
-webkit-animation-fill-mode:both;
-moz-animation-fill-mode:both;
-ms-animation-fill-mode:both;
-o-animation-fill-mode:both;
animation-fill-mode:both;
-webkit-animation-duration:1s;
-moz-animation-duration:1s;
-ms-animation-duration:1s;
-o-animation-duration:1s;
animation-duration:1s;}
.animated.hinge
{
-webkit-animation-duration:2s;
-moz-animation-duration:2s;
-ms-animation-duration:2s;
-o-animation-duration:2s;
animation-duration:2s;
}

@-webkit-keyframes bounce {
    0%, 20%, 50%, 80%, 100% {-webkit-transform: translateY(0);} 
        40% {-webkit-transform: translateY(-30px);}
    60% {-webkit-transform: translateY(-15px);}
}

@-moz-keyframes bounce {
    0%, 20%, 50%, 80%, 100% {-moz-transform: translateY(0);}
    40% {-moz-transform: translateY(-30px);}
    60% {-moz-transform: translateY(-15px);}
}

@-o-keyframes bounce {
    0%, 20%, 50%, 80%, 100% {-o-transform: translateY(0);}
    40% {-o-transform: translateY(-30px);}
    60% {-o-transform: translateY(-15px);}
}
@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
    40% {transform: translateY(-30px);}
    60% {transform: translateY(-15px);}
}

#Home:hover {
    -webkit-animation-name: bounce;
    -moz-animation-name: bounce;
    -o-animation-name: bounce;
    animation-name: bounce;
} 
```

是动画方法和动画的关键帧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:50:23.327

实际上，只要满足某些条件，就可以在不移动内容的情况下在 CSS 中为背景图像设置动画*。*

您的图像的链接是一个相对链接，并且您的代码有一些阻碍，所以我从头开始创建了一个新的小提琴，它使用了 wikimedia commons 上的图像，它应该向您展示类似弹跳的效果如何达到。根据您所说的您要尝试做的事情，我将其放在一个`<li>`元素中，并粗略地重用了您的`@keyframes`.

小提琴在这里：http: [//jsfiddle.net/raphaelvalerio/SbAkP/](http://jsfiddle.net/raphaelvalerio/SbAkP/)

```
<ul>
    <li id="bouncy-background">stuff that absolutely should not move at all in any way. Ever.</li>
    <li>another item</li>
    <li>another item</li>
</ul> 
```

CSS（为简洁起见删除了供应商前缀。完整版本请参见小提琴）：

```
#bouncy-background {
width: 100%;
height: 400px;
background-color: goldenrod;
background-image: url('http://upload.wikimedia.org/wikipedia/commons/7/71/William_Shatner.jpg');
background-repeat: no-repeat;
background-size: auto 200px;
background-position: center bottom;
animation-name: bounce;
animation-duration: 2s;
animation-fill-mode: both;
}

@keyframes bounce {
0%, 20%, 50%, 80%, 100% {background-position: center bottom;} 
40% {background-position: center top;}
60% {background-position: center 75%;}
} 
```

这里重要的是*你*正在制作动画。您可以为大多数具有计算值的元素设置动画，例如百分比、像素等。在这种情况下，我不是在为背景本身设置动画，而是为`background-position`规则设置动画，因为它是一个计算值。

看看小提琴并玩弄它，看看你是否可以把我的食谱改成符合你想法的东西。

另请注意，目前动画只是在加载时开始，但您可以将其连接到伪选择器事件，如`:hover`.

# javascript - style.display = 'block' 在 div 上的 javascript 中不起作用

> ID：15695853
> 
> 赞同：1
> 
> 时间：2013-03-29T01:13:17.743
> 
> 标签：javascript, jquery, html

我正在尝试将其中包含图像源的 DIV 添加到 HTML 中。在我尝试更改上面添加的 DIV 的属性之后。但我不能这样做。选中后，DIV 将显示在浏览器开发工具中。我得到的错误是“无法读取 null 的属性'样式'”。下面是我的代码。提前致谢。

```
ajaxLoaddiv='<div class="LoadingImage" alt="example" style="display: none"> <img src="css/ajax-loader.gif"></div>';
$(ajaxLoaddiv).appendTo(attachPoint);
document.getElementById("LoadingImage").style.display = 'block'; 
```

attachpoint 是我得到的 html 中的引用。

```
var attachpoint=document.querySelector('.buttonAttachPoint'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:14:58.767

你给了它`class='LoadingImage'`，但没有`id='LoadingImage'`，后来尝试用`getElementById("LoadingImage")`. 只需添加`id`属性。

```
ajaxLoaddiv='<div id="LoadingImage" class="LoadingImage" alt="example" style="display: none"> <img src="css/ajax-loader.gif"></div>';
//--------------^^^^^^^^^^^^^^^^^^^ 
```

但是如果你已经在使用 jQuery，那么你也可以在这里使用它。

```
$('#LoadingImage').css('display', 'block'); 
```

`LoadingImage`...因此，如果您愿意，可以更轻松地按类访问它（假设这是 class 的唯一元素）：

```
$('.LoadingImage').css('display', 'block'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:15:06.230

`document.getElementById`通过ID而不是类获取元素？

```
var ajaxLoaddiv = $('<div />', {'class': 'LoadingImage',
                                 alt   : 'example',
                                 style : 'display: none'
                                }),
    img = $('<img />', {src: 'css/ajax-loader.gif'});

ajaxLoaddiv.append(img).appendTo(attachPoint);
ajaxLoaddiv.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T01:15:25.130

采用：

```
$("#LoadingImage").css({"display": "block"}); 
```

如果你想要一个 jQuery 解决方案:)

此外，您使用了类名而不是元素的 ID

# r - iGraph：如何创建具有特定级别的图形？

> ID：15695859
> 
> 赞同：2
> 
> 时间：2013-03-29T01:13:46.777
> 
> 标签：r, graph, igraph

**[更新]** *下面有一个我正在尝试完成的示例。我也对更通用的技术感兴趣，以平整任意图。是否存在一些 GUI 方法可以在绘制顶点后直观地调整顶点，从而不必像 Gabor 解决方案那样手动进行？我找到了一种方法，请参阅下面的答案，但需要时间使其更通用。*

**目标**

![在此处输入图像描述](../Images/4c4a983c5a259aa97ad1af8dba1753f9.png)

**失败**

```
library(igraph)
g4<-graph.formula(Out-1:3:5:6,1-2,3-4,5:6-7,2:4:7-In)
tkplot(g4) 
```

![在此处输入图像描述](../Images/26a61a54a1202c686cb31096526faa32.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T02:35:24.937

所以只是为了回答这个问题，可以用 igraph 来做这个，但是你需要手动设置顶点位置。不过，您可以使用`tkplot()`和`tkplot.getcoords()`进行微调。

此外，您还需要为连接添加顶点，因为在 igraph 中，边要么是直线，要么是曲线，而不是虚线。

```
library(igraph)

G <- graph.formula(Out-3, j1-1:j2, j2-j4, j3-5:j5, j5-6,
                   1-2, 3-4, 5-j6, 6-j8, j6-j8, j7-7, 2-j9, 4-In, 7-j10,
                   j9-j10)

coords <- read.table(textConnection(
  "Out 2   1
   In  2   8
   1   1   4
   2   1   6
   3   2   4
   4   2   6
   5   2.5 4
   6   3.5 4
   7   3   6
   j1  1   2
   j2  3   2
   j3  2.5 3
   j4  3   3
   j5  3.5 3
   j6  2.5 5
   j7  3   5
   j8  3.5 5
   j9  1   7
   j10 3   7"))

layout <- as.matrix(coords[match(V(G)$name, coords[,1]),2:3])
layout[,2] <- -layout[,2]

V(G)$shape <- ifelse(grepl("^j", V(G)$name), "none", "circle")
V(G)$label <- ifelse(grepl("^j", V(G)$name), "", V(G)$name)
V(G)$size  <- ifelse(grepl("^j", V(G)$name), 0, 30)
V(G)$color <- "white"
V(G)$label.color <- "black"

par(mar=c(0,0,0,0)+.1)
plot(G, layout=layout, asp=NA) 
```

![阴谋](../Images/6d73ec4679c5eb259c447aa094233298.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T13:29:15.160

> **但是您需要手动设置顶点位置。**

这并不完全正确。我将展示一种更简单的交互[方式](https://stackoverflow.com/questions/12078575/unix-getting-mouse-coordinates-over-x-like-the-mathematica)。我将使用 Greg Snow 编写的以下代码。

```
dynmodfunc <- function() {
    plot(0:1,0:1,ann=FALSE,type='n')
    mypoints <- matrix(ncol=2, nrow=0)
    while( length(p <- locator(1, type='p', col='red')) ) {
        mypoints <- rbind(mypoints, unlist(p))
        plot(mypoints, col='red', ann=FALSE, xlim=0:1, ylim=0:1)
        if(nrow(mypoints)>1) {
            xspline(mypoints, shape=-1)
        }
    }
    mypoints
}

(out <- dynmodfunc()) 
```

我想绘制这个优势图

![在此处输入图像描述](../Images/73cfe3f4d3e56797eacda83079e2cb60.png)

但`adjm<-t(matrix(c(0,0,0,0,1,1,0, 0,0,0,0,1,1,0, 0,0,0,0,1,1,0, 0,0,0,0,1,1,0, 0,0,0,0,0,0,0, 0,0,0,0,0,0,0, 1,1,1,1,0,0,0),nrow=7,ncol=7)); g1<-graph.adjacency(adjm); plot(g1)`会产生

![在此处输入图像描述](../Images/85bafab9411c16346d8f9e9f4a3f61fc.png)

并使用 Greg 的代码：单击 GUI 上的点，然后单击鼠标右键

![在此处输入图像描述](../Images/a4ce3722e9ba98e75faf65e5e27db7f8.png)

如行或调试所示，我的点按 7-1-2-3-4-5-6 的顺序排列：

```
> out
             x          y
[1,] 0.5082585 1.03551763
[2,] 0.1067841 0.59191675
[3,] 0.3818711 0.59358184
[4,] 0.6380311 0.58883584
[5,] 0.8787300 0.58464820
[6,] 0.3417308 0.09010765
[7,] 0.6614686 0.07504212
> str(out);dput(out)
 num [1:7, 1:2] 0.508 0.107 0.382 0.638 0.879 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "x" "y"
structure(c(0.508258492696219, 0.106784127536735, 0.381871061286441, 
0.63803114223351, 0.878729976271015, 0.341730770349654, 0.661468641881514, 
1.03551763062279, 0.591916752784156, 0.593581838904923, 0.588835844931958, 
0.584648203191106, 0.0901076547476853, 0.0750421150561933), .Dim = c(7L, 
2L), .Dimnames = list(NULL, c("x", "y"))) 
```

现在通过 Gabor Csardi 的解决方案，应该可以得到平整的情节。我们现在有了每个点的共生矩阵`ajdm`和坐标`coords`。我还看不到如何通过 Gabor 的方法使用它们，试图理解。

**快速复制粘贴代码**

```
> library(igraph); 
> coords<-structure(c(0.508258492696219, 0.106784127536735, 0.381871061286441, 0.63803114223351, 0.878729976271015, 0.341730770349654, 0.661468641881514, 1.03551763062279, 0.591916752784156, 0.593581838904923, 0.588835844931958, 0.584648203191106, 0.0901076547476853, 0.0750421150561933), .Dim = c(7L, 2L), .Dimnames = list(NULL, c("x", "y")))
> adjm<-t(matrix(c(0,0,0,0,1,1,0,   0,0,0,0,1,1,0,   0,0,0,0,1,1,0,   0,0,0,0,1,1,0,   0,0,0,0,0,0,0,    0,0,0,0,0,0,0,   1,1,1,1,0,0,0),nrow=7,ncol=7)); g1<-graph.adjacency(adjm); plot(g1) 
```

# ruby - 在公共基础路线之上构建路线？

> ID：15695861
> 
> 赞同：6
> 
> 时间：2013-03-29T01:13:59.203
> 
> 标签：ruby, routes, sinatra

我有一个共同的基本路径；说：`get /base`我需要执行基本身份验证并为该路径下的所有子调用工作。说：`get /base/foo`和`get /base/bar`。

查看[http://www.sinatrarb.com/intro.html#Helpers](http://www.sinatrarb.com/intro.html#Helpers)建议我应该能够通过使用助手来做到这一点。我正在查看文档中触发新路线的`pass`帮助程序和使用。`call`但是，我读到的另一个建议是使用正则表达式 IE`%r{/base/?:(path)?}`或类似的动态路由。那么呢：

```
def '/base'
    # do some funky basic auth stuff here
    # to work with all request to this common
    # base path?
    pass
end

def %r{/base/?(path)?} do |path|
    case path
        when 'foo'
            # do something.
        when 'bar'
            # do something else.
    end

    # some kind of redirection or template rendering here:
    erb :template
end 
```

有没有人处理过这种事情？我试图让它保持干燥。当然，我不确定给定的示例是否是保存参数的最佳示例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T08:26:22.863

有几种方法可以做到这一点（这些没有任何顺序，它们都很好）：

### 带有前块和助手的命名空间

[http://rubydoc.info/gems/sinatra-contrib/1.3.2/Sinatra/Namespace](http://rubydoc.info/gems/sinatra-contrib/1.3.2/Sinatra/Namespace)

```
require 'sinatra/namespace'

class App < Sinatra::Base
  register Sinatra::Namespace

  namespace "/base" do
    helpers do # this helper is now namespaced too
      def authenticate!
      # funky auth stuff
      # but no need for `pass`
      end
    end

    before do
      authenticate!
    end

    get "/anything" do
    end

    get "/you" do
    end

    get "/like/here" do
    end
  end 
```

### 带条件的命名空间

```
require 'sinatra/namespace'

class App < Sinatra::Base
  register Sinatra::Namespace

  set(:auth) do |*roles|   # <- notice the splat here
    condition do
      unless logged_in? && roles.any? {|role| current_user.in_role? role }
        redirect "/login/", 303
      end
    end
  end

  namespace "/base", :auth => [:user] do
    # routes…
  end

  namespace "/admin", :auth => [:admin] do
    # routes…
  end 
```

### 助手和前置过滤器

```
helpers do
  def authenticate!
    # funky auth stuff
    # but no need for `pass`
  end
end

before '/base/*' do
  authenticate!
end 
```

### 映射的应用程序

```
class MyBase < Sinatra::Base
  helpers do
    def authenticate!
      # funky auth stuff
      # but no need for `pass`
    end
  end

  before do
    authenticate!
  end

  get "/" do
  end
  get "/another" do
  end
end

# in rackup file

map "/" do
  run App1
end
map "/base" do
  # every route in MyBase will now be accessed by prepending "/base"
  # e.g. "/base/" and "/base/another"
  run MyBase
end
#… 
```

我不确定是否需要使用 case 语句来干燥路线。如果每条路线都做不同的事情，那么我只需将它们单独写出来，因为它更清晰，并且您正在复制 Sinatra 在匹配路线中所做的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T01:27:22.060

如何使用`before`过滤器：

```
before '/base/?*' do
    @foo = 'bar'
end 
```

# algorithm - Understanding big o notation

> ID：15695866
> 
> 赞同：0
> 
> 时间：2013-03-29T01:14:31.087
> 
> 标签：algorithm, big-o

I have a question about calculating big o notation for the following code:

```
j = 1;
while ( j <= n ) do  
  for i = 1 to j do 
    O(1); 
  endfor; 
  j=j*2; 
endwhile 
```

So far, I have that the loop is calculated Σ[i=1,..,n]2^i. It looks like a geometric sequence, but I'm not sure what the big O value would be. Can anyone help out?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:33:50.917

**这里不是**高斯的，因为它是你已经提到的**几何序列。**

一旦 j 达到 n，外部 while 循环将停止。

为此所需的迭代次数可以通过认为这是这里要解决`log₂(n)`的问题来计算。`2^x = n`（我们必须不断乘以 2 直到达到 n 多少次）

有趣的是，这会导致：

```
log₂(n)     log₂(n)
∑ 2^i    =  2       - 1 = n - 1
0 
```

`Sum from 1 to log2(n) taken over 2^i`这正是`2^(log2n) - 1`= `n - 1`（重申上面给出的公式，以防您的字体集不支持所需的 unicode 字符）

使用这里的事实

```
k            k+1
∑ 2^i    =  2   - 1
0 
```

所以算法应该是**O(n)**。

或者，您可以使用几何序列的**通用公式计算总和：**

```
Sn = a0 * (1-q^n) / (1-q) 
```

这应该会导致与实际上相同的结果：

```
 log₂n
   1 - 2           1 - n
  -----------  =  ------ = n - 1
    1 - 2           -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:28:59.033

Geometric sequence is correct. Take a quick example. If n is 8, then the number of iterations of the inner loop is 1, then 2, then 4, then 8\. If n were 7 you'd have 1, 2, 4, and no 8\. So the number of O(1) operations is going to vary between n and 2n - 1 as you increase n. On either side of that range, the order is O(n).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:37:22.810

好的！，让我们假设一些值来帮助更好地理解：

让 n 等于 4

```
So now:
j=1 ( <4 ) => loop runs 1 time = O(1)
j=1*2 = 2 ( <4 ) => loop runs 2 times = 2*O(1)
j=2*2 = 4 ( =4 ) => loop runs 4 times = 4*O(1) 
```

如果 n 属于 2^x 类型，那么可以肯定地说，一系列循环运行如下所示：

O(1) + 2*O(1) + 4*O(1) + 8*O(1) + 16*O(1) + ..... + n*O(1)。= 1*(2^(x+1) - 1)*O(1)/(2-1) = (2n-1)*O(1) = O(n) 其中 n = 2^x，并且外循环运行 x+1 次。

现在如果 n 不是 2^x 类型。假设 n = 6。

```
So now:
j=1 ( <6 ) => loop runs 1 time = O(1)
j=1*2 = 2 ( <6 ) => loop runs 2 times = 2*O(1)
j=2*2 = 4 ( <6 ) => loop runs 4 times = 4*O(1)
j=2*4 = 8 ( >6 ) => loop exits. 
```

很明显，外部循环只会运行 2^( floor value( log base 2(n) )) + 1 次。这个值就是有效的 n。

所以让我们把它代入公式： (2n-1) *O(1) => (2* (2^(floorValue(logBase2(n))) - 1)*O(1) 约等于 O(n)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T01:40:36.267

在这里有点聪明：你所要求的实际上是`Theta`. 您的代码是`Theta(n)`- 但也是`O(n)`，`O(n * log_2(n))`甚至`O(n!)`因为 Big-O 只是**一个**上限。`Theta`是精确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-16T11:02:14.527

它应该是 0(n^2)。这与插入排序相同

```
void insertionsort(void){

 for(int x=1;x<n;x++){
   int temp= array[x];
   for(int y=x-1;  y>=0 && array[y]>temp ;y--){
    array[y+1]=array[y];
   }array[y+1]=temp;
 }
} 
```

O(n) 从 1 到 n，但是对于其中的每一个，它从 y=x-1 到 0。在最坏的情况下，它总是从 y=x-1 到 0。所以这个增长了每次 x 增长。

你的情况就是这样。

# c# - LyncClient.GetClient() before Lync is launched

> ID：15695867
> 
> 赞同：1
> 
> 时间：2013-03-29T01:14:31.327
> 
> 标签：c#, lync, lync-client-sdk

I have this situation over here, where I have placed the application I've developed in the windows Startup folder. I'm launching it every time the PC is started. But then how do I get the LyncClient at that instance? Because my application is being launched before Lync has been started. So basically my application will not start because whenever it comes to this line, `var getclient = LyncClient.GetClient();`, it will prompt an error, the host process is not running.

Is there a way for me to keep waiting until `LyncClient.GetClient()` is not null? And then continue executing my codes once i know that lync is running?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:57:38.990

抱歉，如果我浪费了任何人的时间，但我决定采用这种解决方法，这并不是那么好，但我认为无论如何我都应该分享它。

```
 Process[] pname = Process.GetProcessesByName("communicator");
    while (pname.Length == 0) 
    {
        pname = Process.GetProcessesByName("communicator");
    }
    var getclient = LyncClient.GetClient(); 
```

希望有人有比这更好的解决方案。

# c# - 在 C# Web 应用程序中执行 Perl 脚本时遇到问题

> ID：15695868
> 
> 赞同：1
> 
> 时间：2013-03-29T01:14:46.533
> 
> 标签：c#, perl, iis, iis-7

简单地说，我在 C# Web 应用程序中使用输入参数执行 Perl 脚本时遇到问题。我从控制台应用程序执行代码没有问题，但在我的网络应用程序中，我没有收到任何响应。

我正在使用的代码是：

```
ProcessStartInfo cmdStartInfo = new ProcessStartInfo();
cmdStartInfo.FileName = "C:\gnu\perl.exe";
cmdStartInfo.Arguments = "run.pl --day=1 --format=2";
cmdStartInfo.RedirectStandardOutput = true;
cmdStartInfo.RedirectStandardError = true;
cmdStartInfo.RedirectStandardInput = true;
cmdStartInfo.UseShellExecute = false;
cmdStartInfo.CreateNoWindow = true;
cmdStartInfo.WorkingDirectory = TEMP_DIRECTORY;

Process cmdProcess = new Process();
cmdProcess.StartInfo = cmdStartInfo;
cmdProcess.OutputDataReceived += cmd_DataReceived;
cmdProcess.EnableRaisingEvents = true;

// Start
cmdProcess.Start();
cmdProcess.WaitForExit(); 
```

和

```
static void cmd_DataReceived(object sender, DataReceivedEventArgs e)
{
    // Breakpoint to DEBUG here
    string result = e.Data;
} 
```

我正在使用 IIS 7。我想知道这是否是一个问题？我正在使用身份模拟和 Windows 身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T17:03:19.583

这最终成为一个权限问题。我必须授予对包含要使用 Perl 命令执行的脚本的目录的权限。

例如，权限将授予目录，在本例中为 dir1：

```
perl.exe dir1/script.pl 
```

最初我只授予了包含 perl.exe 文件的文件夹的权限，这并没有解决问题。

# java - 需要帮助创建方法以返回整数中数字的位置

> ID：15695880
> 
> 赞同：2
> 
> 时间：2013-03-29T01:15:55.563
> 
> 标签：java, indexing

我正在开发一款名为“奶牛与公牛”的游戏。基本上，这是一个数字猜谜游戏，玩家一选择一个随机的、不同的 4 位数字，玩家二尝试猜测该数字。

例如，

-玩家一选择随机数：1465 -玩家二猜数字：6432。由于玩家二猜的数字有一个共同的数字（6），所以这个数字有一个“牛”。“牛”是指玩家二猜的数字与玩家一选的随机数共享一个共同的数字，但它不在同一个地方（6 是玩家 2 号码中的第一个数字，而它是玩家 1 号码中的第三个数字.)

- 如果玩家二猜数字：1466，则有 1 个“牛”和 3 个“公牛”。“公牛”是指玩家 2 猜测的数字与玩家 1 的数字相同，并且位于同一位置。

我的问题是，我需要创建一个返回整数中数字位置的方法。

例如，如果我有一个整数“1456”，我需要一个方法来告诉我任何给定数字的位置（从右边开始）。所以如果我想知道数字“5”在哪里，它会告诉我“2”，因为它在右边第二个。如果我想知道“1”在哪里，它会告诉我“4”，因为它是右数第四个。

我**不能**使用任何内置的 java 字符串方法。

以下是我到目前为止所写的内容，因为我仍在努力，所以根本没有组织。

此方法必须调用方法“numDigits”和“getDigit”，这就是我将它们留在代码中的原因。“numDigits”返回数字中的位数。“getDigit”返回特定位置的数字。因此，如果我有一个数字“12345”，如果我输入“4”，getDigit 将返回“2”，因为“2”是数字中右数第四个。

你可以看到我在代码底部开始了“indexOf”。

抱歉，如果我不够清楚，我是 Java 新手，所以我不知道解释一切的最佳方式。

```
package pa3;
import java.util.*;
import java.util.Scanner;

public class CowsAndBulls {

    /**
     * @param args
     */
    public static void main(String[] args) {
        //System.out.println("Welcome to Cows and Bulls Game. I picked a random 4-digit number with distinct integers, try finding it. Type your guess, must be a 4-digit number with distinct digits.");
        //System.out.println(numDigits(12346));
        System.out.println(getDigit(12345, 5));
        System.out.println(hasDistinctDigits(1234));
    }
    public static int numDigits(int number)
    {
        {

            int counter = 0;

            while(number > 0)
            {
            number = number/10;
            counter++;
            }

            return counter;
            }
    }

        public static int getDigit(int number, int i)
        {
            {
                int digit = 0;

                if (i <= numDigits(number))
                {
                    while (i > 0)
                    {
                         digit = number % 10;
                        number = number / 10;
                            i--;
                    }
                }
                return digit; }
        }

        public static boolean hasDistinctDigits(int number)
        {
            if(getDigit(number, 1) != getDigit(number, 2) &&
              getDigit(number, 1) != getDigit(number, 3) &&
              getDigit(number, 1) != getDigit(number, 4) &&
              getDigit(number, 2) != getDigit(number, 3) &&
              getDigit(number, 2) != getDigit(number, 4) &&
              getDigit(number, 3) != getDigit(number, 4))
              {
                  return true;
              }
              else return false;

            }

        public static int generateSecretNumber()
        {
            Random r = new Random();
            int randNum = r.nextInt(9999);

            while (hasDistinctDigits(randNum) = true)
                {       
                        randNum = r.nextInt();  
                        return randNum;

                }

        }
        public static void indexOf(int number, int digit)
        {

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:32:02.423

如果我理解正确，您可以使用您的两种方法并遍历数字：

```
 public static int indexOf(int number, int digit)
 {
    int count = numDigits(number);
    for(int i = 1; i <= count; i++)
    {
        if(digit == getDigit(number, i))
            return i;
    }
    return -1;  //the digit was not found
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:50:41.313

将输入视为字符串，而不是数字/整数。

```
import java.util.*;
import java.lang.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
        String player1 = "1465"; // solution
        String player2 = "6431"; // guess

        Integer cows = 0, bulls = 0, k;

        for (int i = 0, j = player2.length(); i < j; i++)
        {
            Character ch = player2.charAt(i);
            String s = ch.toString();

            if (player1.length() > i && player1.charAt(i) == ch) {
                bulls++;
            }
            else if (0 <= (k = player1.indexOf(s))) {
                cows++;
            }
        }

        System.out.println("BULLS: " + Integer.toString(bulls));
        System.out.println("COWS:  " + Integer.toString(cows));
    }
} 
```

[在 ideone.com 上运行此代码](http://ideone.com/s6rh51)

# java - Workaround for (Android WebView JellyBean -> Should not happen: no rect-based-test nodes found) not working for me

> ID：15695884
> 
> 赞同：2
> 
> 时间：2013-03-29T01:16:23.330
> 
> 标签：java, javascript, android, android-viewpager, touch-event

I tried [sra's workaround](https://stackoverflow.com/questions/12090899/android-webview-jellybean-should-not-happen-no-rect-based-test-nodes-found) in a class that extends WebView. Unfortunately I am still seeing this error.

I verified that I am in fact using MyWebView by popping a Log.i(...) into MyWebView.java:

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN){
        Log.d("DEBUG ::: ", "in onTouchEvent() ---> ACTION_DOWN");

        int temp_ScrollY = getScrollY();
        scrollTo(getScrollX(), getScrollY() + 1);
        scrollTo(getScrollX(), temp_ScrollY);

    }

    return super.onTouchEvent(event);
} 
```

I see "DEBUG :::" ... etc ... every time I swipe so I know that MyWebView is being used rather than WebView itself. Interestingly I only get the "Should not happen: no rect-based-test nodes found" message when I swipe Right->Left (swipe pages 1-N). I don't see the error when I swipe Left->Right (swipe pages N-1).

MyWebView in my fragment .xml:

```
<com.example.viewpager2.MyWebView
android:id="@+id/webView2"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true">
</com.example.viewpager2.MyWebView> 
```

And MyWebView.java:

```
package com.example.viewpager2;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.webkit.WebView;

public class MyWebView extends WebView  {

    public MyWebView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }

    public MyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    public MyWebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {

        if (event.getAction() == MotionEvent.ACTION_DOWN){
            Log.d("DEBUG ::: ", "in onTouchEvent() ---> ACTION_DOWN");

            int temp_ScrollY = getScrollY();
            scrollTo(getScrollX(), getScrollY() + 1);
            scrollTo(getScrollX(), temp_ScrollY);

        }

        return super.onTouchEvent(event);
    }
} 
```

Not saying sra is wrong by any stretch but if I've done something wrong I'd love to be able to correct it! sra's workaround seems like a novel one and I wish it worked for me. :-(

BTW, I see this error whether in the Nexus 7 emulator or on my Nook Tab w/CM10.1

**EDIT, 2013-03-29**: I did some more digging last night and this morning, mainly because after some more futzing with screen touches and the emulator I found that [sra's workaround] was working for me sometimes but not always for Right->Left (swipe pages 1-N). I found that the workaround worked more frequently on my Nook Tab than it did on Nexus 7 emulator.

Inside of my `onTouchEvent(...)` method, first referenced above, I added another couple of Log.d(...), this time to tell me what the value of `getScrollX()` was:

```
@Override
public boolean onTouchEvent(MotionEvent event) {

if (event.getAction() == MotionEvent.ACTION_DOWN){
    Log.d("DEBUG ::: ", "in onTouchEvent() ---> ACTION_DOWN");

    int temp_ScrollY = getScrollY();

    int temp_ScrollX = getScrollX();
    if(temp_ScrollX > 0) {
        Log.d("RESET X COORD: WAS STARTING AT ", Integer.toString(temp_ScrollX));
        setScrollX(0);
    }
    scrollTo(getScrollX(), getScrollY() + 1);
    scrollTo(getScrollX(), temp_ScrollY);
    Log.d("  DEBUG COORDS::: ", "X=" + Integer.toString(getScrollX()) + " Y=" + Integer.toString(getScrollY()) + " Y2=" + Integer.toString(temp_ScrollY));
}

return super.onTouchEvent(event); 
```

}

In my Trace Log this produced the following for 1-N (as noted previously I never saw any rect-based-test for N-1):

```
03-29 06:54:32.976: E/webcoreglue(9475): Should not happen: no rect-based-test nodes found
03-29 06:54:33.335: D/DEBUG :::(9475): in onTouchEvent() ---> ACTION_DOWN
03-29 06:54:33.335: D/RESET X COORD: WAS STARTING AT(9475): 1949
03-29 06:54:33.335: D/DEBUG COORDS:::(9475): X=0 Y=10 Y2=10
03-29 06:54:33.734: D/DEBUG :::(9475): in onTouchEvent() ---> ACTION_DOWN 
```

On closer examination it looks like when I swipe cleanly from Right->Left (1-N), that is when I swipe exactly on the border for, sra's workaround **always** works. When I don't swipe exactly on the border, sra's workaround doesn't work. When I use the emulator more regular failures could be explained by poor mouse clicks and those happen more frequently than when I use touch to be sure.

So what I'm thinking about now -- and wondering if anybody here has any suggestions -- is if I should be trying to handle some kind of event additional to touches and that's why I'm seeing this problem when I swipe?

[2](https://stackoverflow.com/questions/12090899/android-webview-jellybean-should-not-happen-no-rect-based-test-nodes-found)

# c# - ThreadPool.QueueUserWorkItem - 是否需要新的 WaitCallback()？

> ID：15695889
> 
> 赞同：4
> 
> 时间：2013-03-29T01:17:46.930
> 
> 标签：c#, .net, multithreading, threadpool

我看到的 90% 的示例，包括 MSDN 都使用以下语法：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(MyCallback)); 
```

其他 10% 使用：

```
ThreadPool.QueueUserWorkItem(MyCallback); 
```

在这两种情况下，MyCallback 都是静态函数。

编译器没有给出错误，并且代码似乎以任何一种方式工作。不创建新的 WaitCallback 对象而直接传递函数是否有危险？

我问是因为我试图在我的代码中找到一些错误，一旦我缩小范围，我将用更具体的问题来解决，但也是这个一般性问题，因为我一直很好奇并且找不到任何答案。我发现的最接近的是：

[http://msdn.microsoft.com/en-us/library/4yd16hza%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/4yd16hza%28v=vs.90%29.aspx)

其中指出：

> “Visual Basic 用户可以省略 WaitCallback 构造函数，而在将回调方法传递给 QueueUserWorkItem 时只需使用 AddressOf 运算符。Visual Basic 会自动调用正确的委托构造函数。”

...但实际上并没有说“C# 用户必须使用构造函数”，我也想知道**为什么**/details。我正在使用.NET 3.5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T01:23:47.777

```
ThreadPool.QueueUserWorkItem(new WaitCallback(MyCallback)); 
```

和

```
ThreadPool.QueueUserWorkItem(MyCallback); 
```

是等价的并且被编译成相同的字节码。编译器会为您插入`new WaitCallback`调用。

来自[MSDN](http://msdn.microsoft.com/en-gb/library/sx2bwtw7.aspx)：

> ```
> Del<int> m1 = new Del<int>(Notify); 
> ```
> 
> C# 2.0 版有一个称为方法组转换的新功能，它适用于具体以及通用委托类型，并且使您能够使用这种简化的语法编写上一行：
> 
> ```
> Del<int> m2 = Notify; 
> ```

# css - 了解字体系列

> ID：15695893
> 
> 赞同：0
> 
> 时间：2013-03-29T01:18:02.843
> 
> 标签：css, fonts

我正在尝试决定要用于我的网站的字体。

为什么当人们指定 a 时，`font-family`他们会给出一个字体列表？有没有办法指定只使用一种字体？列表中使用的不同字体是否取决于用户访问网站时使用的浏览器？

这是我看到其他人这样做的方式：

```
body {
    font: 14px Cambria, Hoefler Text, Liberation Serif, Times, Times New Roman, serif;
    color: rgba(51,51,51,1);
} 
```

有理由不这样做吗？

```
body {
    font: 14px Cambria;
    color: rgba(51,51,51,1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T01:20:01.207

他们后备字体。如果列出的第一个字体在操作系统上不可用，则使用下一个字体。如果那不可用，则使用之后的下一个。等等。最后一个通常是一种通用字体，在所有系统上都可用（即衬线字体）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T04:56:37.093

将字体列表指定为`font-family`值有两个原因。

首先，您的主要字体可能未安装在用户系统中。例如，Cambria 仅存在于相对较新的 Windows 版本中。示例中的字体列表不是特别好，因为在大多数情况下 Cambria 不可用时，它会退回到 Times New Roman，无论如何这是常见的浏览器默认设置，在典型屏幕上效果不佳。

其次，文本中可能存在主要字体不支持的字符。例如，如果文本包含“℀”（U+2100 ACCOUNT OF），则列出的字体都没有 - 因此将使用与浏览器相关的备用字体，这通常会导致排版不匹配。（因此，如果可能出现此类字符，则列表应该更长。）某些浏览器（某些版本的 IE）甚至可能根本无法呈现字符，除非您通过使用合适的字体列表来帮助它们。

现在人们经常使用可下载字体（网络字体），`@font-face`并期望它们可以在所有浏览器中使用，因此不需要列出其他字体。但是，即使是可下载字体也可能会失败：字体加载可能会失败（网络问题），或者浏览器中的设置可能会阻止使用可下载字体。这就是为什么即使使用可下载字体，后备字体也是一个好主意的原因。

使用可下载字体作为主要字体，备用字体还有另一个原因：下载可能需要时间，并且在等待字体时，浏览器使用备用字体呈现文本。下载字体后，浏览器会更改为该字体。为了减少这里有些令人不快的“闪烁”效果，您可以尝试指定一种后备字体，或备用后备字体，它们与可下载字体非常相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T01:20:15.333

那些额外的字体是后备。如果客户端的机器没有第一个字体，它会寻找第二个，第三个等等......

有理由不这样做吗？`body { font: 14px Cambria; color: rgba(51,51,51,1); }`

如果你想使用一种特定的字体，或者一种接近它的字体，你必须包含备用字体。如果您不介意浏览器使用默认系统字体，那么是否包含它们都没有关系。

# objective-c - 为什么我的 ObjC 实现类必须#import 实现协议的_interface_？

> ID：15695898
> 
> 赞同：-1
> 
> 时间：2013-03-29T01:18:54.107
> 
> 标签：objective-c

我不明白为什么我必须在 Objective-C 中执行以下操作。我有兴趣发现一般意义上的原因（即为什么语言/编译器强迫我这样做），并且可能会发现我提出的实现的替代方案：

我有一个协议：

```
// (file: MyObserver.h)
@class TheObserved;
@protocol MyObserver <NSObject>
   - (void)itWasObserved:(TheObserved *)observedInstance;
@end 
```

有一个接口“TheObserved”（循环地）使用该协议：

```
// (file: TheObserved.h)
@protocol MyObserver;
@interface TheObserved : NSObject
   @property id <MyObserver> myObserver;
   - (void)lookAtThisData:(NSString *)someData withObserver:(id <MyObserver>)observer;
@end 
```

也就是说，正如你所看到的，协议有一个消息，它接受一个接口的实例，而接口有一个方法，它接受一个实现协议的实例。

在我的接口实现中：

```
// (file: TheObserved.m)
#import "TheObserved.h"
#import "MyViewController.h" // <-- note this import
@implementation TheObserved
    @synthesize myObserver;

    - (void)lookAtThisData:(NSString *)someData withObserver:(id <MyObserver>)observer {
        self.myObserver = observer;
        // some asynchronous looking at the data is done here.
    }

    - (void)asynchCallback:(NSData *) data {
        // check if the data is as we expect, if so ..
        [self.myObserver itWasObserver: self]
    }
@end 
```

MyViewController.h 实现协议：

```
// (file: MyViewController.h)
#import <UIKit/UIKit.h>
#import "OWLMorphDataObserver.h"
@interface MyViewController : UITableViewController <MyObserver>
@end 
```

并在其实施中：

```
// (file: MyViewController.m)
#import "TheObserved.h"
@interface MyViewController () {
  @property TheObserved *observed;
@end

@implementation MyViewController
   @synthesize observed;
   - (void) aMethod:(NSString *)dataString {
       [self.observed lookAtThisData:dataString withObserver:self]
   }
@end 
```

我的问题是：为什么在我的 Observed 类中，我需要 #import 实现 @protocol 的“MyViewController.h”，即使具体实现从未在 Observed 类中显式引用？如果我不这样做，我会得到编译错误：

```
no known instance method for selector 'lookAtThisData:' 
```

这里的问题当然是我想让多个不同的视图控制器实现这个协议。那么为什么我要强制导入其中一个来编译呢？

是否有另一种方法可以构造此代码以获得所需的效果，而无需在要使用它的类中导入协议的具体实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:45:10.530

您不必导入“MyViewController.h”。

您必须导入“MyObserver.h”。否则，将不知道 MyObserver 协议。任何要引用协议 MyObserver 的地方，都必须导入定义协议的文件。该文件是“MyObserver.h”。

并且任何你想引用方法的地方`lookAtThisData:withObserver:`，你都必须导入“TheObserver.h”，因为那是发布该方法的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:40:13.773

抱歉，我很难按照您提供的示例进行操作。我使用这种模式不需要任何额外的包含......

一个类定义了一个其他人将实现的协议......

```
//  Foo.h

@protocol FooDelegate;  // promise to define protocol, so we can refer to it in @interface

@interface Foo : NSObject
@property(nonatomic, weak) id<FooDelegate> delegate;
@end

// now define the protocol
@protocol FooDelegate <NSObject>
- (CGFloat)getFloatForFoo:(Foo *)aFoo;
@end 
```

实现可以调用协议，知道委托实现它......

```
// Foo.m

#import "Foo.h"

- (void)anyFooMethod {
    CGFloat aFloatFromMyDelegate = [self.delegate getFloatForFoo:self];
} 
```

另一个类将自己声明为协议的实现者（公开或私下，但私下通常是正确的）。

```
// OtherClass.m

#import "Foo.h"  // notice only one, intuitive import

@interface OtherClass <FooDelegate>
@end

@implementation OtherClass

- (id)init {

    // normal init jazz
    Foo *aFoo = [[Foo alloc] init];
    aFoo.delegate = self;
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T01:48:23.453

您的示例对我来说似乎不完整，因此我创建了一个示例，我*认为*以自包含的方式说明了问题。

MyObserver.h：

```
#import <Foundation/Foundation.h>

@class TheObserved;

@protocol MyObserver <NSObject>
- (void)itWasObserved:(TheObserved *)observedInstance;
@end 
```

观察到的.h：

```
#import <Foundation/Foundation.h>

@protocol MyObserver;

@interface TheObserved : NSObject

@property id <MyObserver> myObserver;
- (void)lookAtThisData:(NSString *)someData withObserver:(id <MyObserver>)observer;

@end 
```

观察到的.m：

```
#import "TheObserved.h"

@implementation TheObserved
@synthesize myObserver;

- (void)lookAtThisData:(NSString *)someData withObserver:(id <MyObserver>)observer {
    self.myObserver = observer;
    // some asynchronous looking at the data is done here.
}

- (void)asynchCallback:(NSData *) data {
    // check if the data is as we expect, if so ..
    [self.myObserver itWasObserved: self];
}
@end 
```

MyObserverImplementation.h：（在您的示例中这是 MyViewController.h）

```
#import <Foundation/Foundation.h>
#import "MyObserver.h"

@interface MyObserverImplementation : NSObject <MyObserver>

@end 
```

MyObserverImplementation.m：

```
#import "MyObserverImplementation.h"
#import "TheObserved.h"

@interface MyObserverImplementation ()
@property TheObserved *observed;
@end

@implementation MyObserverImplementation

- (void) aMethod:(NSString *)dataString {
    [self.observed lookAtThisData:dataString withObserver:self];
}

@end 
```

由于 TheObserved.h 中的错误，此程序无法构建：

> 选择器“itWasObserved:”没有已知的实例方法

但是，从 TheObserved.m 导入 MyObserverImplementation.h 确实可以修复此错误（这类似于您需要从 TheObserved.m 导入 MyViewController.h）。但它只修复了错误，因为 MyObserverImplementation.h 导入了 MyObserver.h。TheObserved.m 对 MyObserver.h 中声明的方法没有可见性，否则，因为您只前向声明了协议而从未导入它。

您可以通过直接从 TheObserved.m 中导入 MyObserver.h 而不是导入视图控制器来解决此问题。

当然，这个答案是基于我重建你的例子的正确性。

# php - 带有回调/值而不是间隔的array_chunk？

> ID：15695900
> 
> 赞同：0
> 
> 时间：2013-03-29T01:19:21.780
> 
> 标签：php

我想通过在每个日期值处破坏一个数组来创建一个多数组：

```
array(
    '3/20/13', // date (start a new child array)
    '14',
    'dog',
    'red',
    '10/21/13', // date (start a new child array)
    '3',
    'cat'
) 
```

我编写了一个复杂的`foreach`函数，它通过检测值是否是日期来构建一个新数组：

```
$date = DateTime::createFromFormat('n/d/y', $value); 
```

我想知道是否有更简单的方法来拆分数组，还是我必须单独检查每个值？我担心的是，它`array_chunk`适用于一段时间，但没有**任何**变化。如果 PHP 不能在回调中分块，我会感到非常惊讶。

*我知道有一个类似的问题被问到，但答案是手动循环遍历每个值。*（[根据值将数组分组](https://stackoverflow.com/questions/5007989/breaking-an-array-into-groups-based-on-values?rq=1)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:17:03.433

*   [x] 测试和工作。
*   [ ] 比你的 foreach 循环更简单？:)

    ```
    // Source array to break into child arrays based on regular expression delimiter
    $array = array(
        '3/20/13', // date (start a new child array)
        '14',
        'dog',
        'red',
        '10/21/13', // date (start a new child array)
        '3',
        'cat',
        '01/02/03', // another example
        '4',
        'badger'
    );

    // Regular expression to break array into child arrays
    $delimiter = '/\//';

    // Finds index position of matching delimiter in array (e.g. 0, 4)
    $childIndex = array_keys(preg_grep($delimiter, $array));

    // For each matching delimiter get the beginning index position and length of entries before next child begins - they part that array_chunk doesn't support. We feed these begin/length into array_slice next to make our own array
    for ($i=0; $i<count($childIndex); $i++):
        $chunks[$i]['begin'] = $childIndex[$i];
        // Last chunk doesn't need a length
        if (isset($childIndex[$i+1])):
            $chunks[$i]['len'] = $childIndex[$i+1]-$childIndex[$i];
        endif;
    endfor;

    // For each begin/length chunk splice the source array into a child array
    foreach ($chunks as $chunk):
        if (isset($chunk['len'])):
            $final[] = array_slice($array, $chunk['begin'], $chunk['len']);
        else:
            $final[] = array_slice($array, $chunk['begin']);
        endif;
    endforeach;

    // Our new nested array
    var_dump($final); 
    ```

**结果**

```
// Source
array (size=10)
  0 => string '3/20/13' (length=7)
  1 => string '14' (length=2)
  2 => string 'dog' (length=3)
  3 => string 'red' (length=3)
  4 => string '10/21/13' (length=8)
  5 => string '3' (length=1)
  6 => string 'cat' (length=3)
  7 => string '01/02/03' (length=8)
  8 => string '4' (length=1)
  9 => string 'badger' (length=6)

// Found delimiter positions
array (size=3)
  0 => int 0
  1 => int 4
  2 => int 7

// Chunks
array (size=2)
  'begin' => int 0
  'len' => int 4
array (size=2)
  'begin' => int 4
  'len' => int 3
array (size=1)
  'begin' => int 7

// Final nested array
array (size=3)
  0 => 
    array (size=4)
      0 => string '3/20/13' (length=7)
      1 => string '14' (length=2)
      2 => string 'dog' (length=3)
      3 => string 'red' (length=3)
  1 => 
    array (size=3)
      0 => string '10/21/13' (length=8)
      1 => string '3' (length=1)
      2 => string 'cat' (length=3)
  2 => 
    array (size=3)
      0 => string '01/02/03' (length=8)
      1 => string '4' (length=1)
      2 => string 'badger' (length=6) 
```

# java - Socket file transferring not reading properly

> ID：15695902
> 
> 赞同：0
> 
> 时间：2013-03-29T01:19:34.233
> 
> 标签：java, sockets

When I receive the file, it adds the WHOLE file into the 0 index of 'data'. How do I make it so each line of the file being received goes into a new index, basically adding like I'm trying to do.

```
public Downloader(Socket socket) {
    List<String> data = new ArrayList<String>();
    try {
        InputStream input = socket.getInputStream();
        byte[] buffer = new byte[socket.getReceiveBufferSize()];
        int bytesReceived = 0;
        while ((bytesReceived = input.read(buffer)) > 0) {
            String line = new String(buffer, 0, bytesReceived);
            if (line.trim().length() > 0) {
                data.add(line);
            }
        }
        Data.rawData = data;
        input.close();
        socket.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:37:24.233

整个文件进入的原因`data[0]`是因为您的整个文件小于`socket.getReceiveBufferSize()`并且您对 while 循环进行了一次迭代。要改为按行拆分，请在 while 循环中使用`BufferedReader`and 调用。`.readLine()`

这样的事情会做：

```
BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
String line = null;
while (line = input.readLine()) != null) {
    data.add(line);
} 
```

请注意，您需要适当地添加尝试捕获以及您想要的任何其他逻辑。

# java - jax-ws web service does not work in websphere 8.5

> ID：15695907
> 
> 赞同：6
> 
> 时间：2013-03-29T01:19:57.580
> 
> 标签：java, web-services, jakarta-ee, jax-ws, websphere-8

Been trying to get jax-ws web service working in websphere 8.5 but no success. I have tried Java bean & war packaging, stateless ejb & jar packaging but it just does not work.

I am trying to get it work with @webservice annotation.

I am not generating any extra artifacts. I am letting websphere figure out during the deployment. During deployment there is no error. After deployment, I try to run wsdl in the browser to see if web service is installed successfully but I get nothing.

Not sure if I am doing something wrong during the deployment or something else. Let me know if you want more info.

Regards,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T17:17:57.730

实际上 websphere 8.5 是兼容 Java EE 6 的，这意味着容器应该扫描 Web 应用程序的类路径以找到 @webservice 注释的类并将它们部署为正在运行的 Web 服务。

但是，根据您使用的 servlet 规范（在 web.xml 文件中给出），扫描不会发生：它应该从规范的 2.5 版开始自动发生。

对于较旧的 Web 应用程序，Websphere 解决方案是在相关战争的 MANIFEST.MF 中放置一个特殊属性：键是 UseWSFEP61ScanPolicy，值是 true。请参阅[此处](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Ftwbs_devwbsjaxws.html)了解更多详细信息。

servlet 3.0 规范也有一个参数控制扫描（通常用于加快应用程序的冷启动初始化）。将 metadata-complete="true" 放在 web.xml 3.0 部署描述符的根标记中将阻止扫描发生（并且 false 启用它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T13:01:26.170

我或多或少遇到了同样的问题，但在 WAS 8.0 上。

确保您的 web.xml 是为 Servlet 3.0 规范编写的。我正在为 Servlet 2.4 使用 web.xml 并将版本更新到 3.0 为我解决了这个问题。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-03T04:11:12.000

与WAS8.5 面临类似问题这是由于WAS 和应用程序都进行了注释扫描。使用“DisableIBMJAXWSEngine”禁用 WAS 注释扫描后，应用程序能够启动。

```
DisableIBMJAXWSEngine: true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-29T20:39:41.553

如果您使用 WAS 8.0 ，请确保您的 java 运行时和项目方面为***1.6 。***

# ruby - 如何在执行时读取文件内容？Chef 在编译时读取

> ID：15695909
> 
> 赞同：7
> 
> 时间：2013-03-29T01:20:01.570
> 
> 标签：ruby, io, chef-infra

因为我遇到了已报告给 Mixlib 团队[的 MIXLIB-11](http://tickets.opscode.com/browse/MIXLIB-11)错误，所以我需要找到一个替代方案，即 Mixlib::Shellout 的替代方案。

**简单说一下问题：**

[这](http://comments.gmane.org/gmane.comp.sysutils.chef.user/1139)是一条语句，上面写着“*毫不奇怪——读取发生在编译时，但 remote_file 资源实际上*是*在执行时创建的。**”

由于此功能，即使该目录是由当前配方中包含的先前配方在执行时创建的，也会`Mixlib::Shellout.new("ls", :cwd => '/opt/cubrid/share/webmanager')`引发“**没有此类文件或目录”错误。**

**有没有办法在执行时读取文件/目录？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T02:29:01.103

找到答案：将代码包装在 中`ruby_block`，它将在运行时执行。

```
ruby_block "Check if CURBID Web Manager needs installation" do
  block do
    version = ""

    if File.exists?("#{CWM_HOME_DIR}/appLoader.js")
      # Read the CWM version from file.
      f = File.open("#{CWM_HOME_DIR}/appLoader.js")

      pattern = /Ext\.cwm\.prodVersion = '(\d+\.\d+\.\d+\.\d+)'/

      f.each {|line|
        if match = pattern.match(line)
          version = match[1]
          break
        end
      }

      f.close
    end
  end
end 
```

现在该版本已从上一个配方中创建的文件中正确填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-02T17:38:24.700

如果使用自定义资源，则可以使用该`load_current_value`方法。

```
action :some_action do

  load_current_value do
    if File.exist?('/var/www/html/index.html')
      homepage IO.read('/var/www/html/index.html')
    end
    if File.exist?('/var/www/html/404.html')
      page_not_found IO.read('/var/www/html/404.html')
    end
  end

end 
```

[https://docs.chef.io/dsl_custom_resource.html](https://docs.chef.io/dsl_custom_resource.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-01T13:12:25.183

就个人而言，我更喜欢`type`在执行过程中使用命令将文件读入变量。

要简单地将文件读入变量，您可以尝试

```
ruby_block 'Read IP file into v_ip variable' do
   block do
       if File.exists?("#{v_ip_folder}\\ip.txt")
          v_ip = %x(type "#{v_ip_folder}\\ip.txt")
          Chef::Log.info("#{v_ip}")
       end
   end
end 
```

`%x(type "#{v_ip_folder}\\ip.txt")`将`type`在命令提示符下运行命令并将输出返回到`v_ip`指定的变量。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-12-20T06:30:41.637

考虑一个`remote_file`. 它在执行（运行）时执行，它也可以与本地文件一起使用，例如：

```
remote_file "Copy file" do
  path "file:///opt/destination.txt"
  source "file:///opt/source.txt"
  owner 'root'
  group 'root'
  mode 0755
end 
```

所以使用`remote_file`是很好的解决方法。编写自定义代码需要时间并且容易出错。另请参阅[此答案](https://stackoverflow.com/a/19706896/1251549)。

# css - 不透明度作为背景和图像

> ID：15695913
> 
> 赞同：1
> 
> 时间：2013-03-29T01:20:29.917
> 
> 标签：css, html, z-index, opacity

通常我可以解决这些问题，但我无法在任何地方找到解决方案。我有一个设置宽度和高度以及不透明度为 0.8 的 div，它位于最顶部。我还有一个从左到右全屏显示的横幅。

div 总是在横幅的前面，无论我做什么（浮动、代码重新排列、z-index），都没有区别。

### HTML

```
<div class="banner">
<img class="banner_image" style="z-index:100" src="/top_banner2.png" alt="banner" />

</div> <!-- end of banner -->

<div class="left" style="z-index:-100">

<ul style="list-style: none;">
<li class="left_words"><a href="/index.php">Home</a></li>
<li class="left_words"><a href="/awesome.php">Awesome</a></li>
<li class="left_words">Catering</li>
<li class="left_words">Our Coffee</li>
<li class="left_words">Flow Chart</li>
<li class="left_words">Prototype</li>
<li class="left_words">Catering</li>

<ul/>
</div> 
```

### CSS

```
.banner{

    width: auto;
    height: 80px;
    margin-top: 50px;
    margin-bottom: 70px;
    z-index: 100;

}

.banner_image{
    margin-top: -20px;
        display: block;
    margin-right: auto;
    margin-left: auto;
    z-index: 100;
}

.left{

    float: left;
    width: 300px;
    height: 800px;

    margin-left: 90px;

    background-color: #ffffff;
    opacity: .9;
    padding-top: 250px;
    margin-top: -200px;
z-index: -100;
}

.left_words{

    margin-right: 15px;
    text-align: right;
    font-size: 30px;
    text-transform: uppercase;
    font-weight: bold;
    padding-bottom: 5px;
} 
```

![在此处输入图像描述](../Images/884c5373cc5c6ae3de91f63c90eb0148.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:09:05.007

添加`position: relative`到`.banner`. 我已将整个工作解决方案包含在[jsFiddle](http://jsfiddle.net/bkppT/)中（为清楚起见，进行了颜色编码）。

# node.js - 使用“node”来初始化脚本不起作用，而“nodejs”可以

> ID：15695914
> 
> 赞同：1
> 
> 时间：2013-03-29T01:20:35.713
> 
> 标签：node.js, ubuntu

我按照[安装说明](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)成功安装在 Ubuntu 机器上。但是当我尝试使用命令检查版本时`node -v`，它不会返回任何内容，但是当我输入时`nodejs -v`它会给出版本。执行脚本也是如此，如果我`node hello.js`什么都不做，但是当我给出时`nodejs hello.js`，文件就会执行。

我在各个网站上在线查看了他们使用 node 而不是 nodejs 的所有地方。我与一位也从同一位置安装的朋友进行了检查，甚至为她检查了它与 node 一起运行，当她试图给 nodejs 时，它说找不到命令。我也没有发现任何关于此的记录问题。任何帮助表示赞赏。

我只是想确认问题的原因如下？

> 与 node 包（Amateur Packet Radio Node Program）存在命名冲突，nodejs 二进制文件已从 node 重命名为 nodejs。您需要将 /usr/bin/node 符号链接到 /usr/bin/nodejs 或者您可以卸载业余分组无线电节点程序以避免这种冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:29:41.470

是的，这是一个已知问题。[您可以在此处](http://lists.debian.org/debian-devel-announce/2012/07/msg00002.html)阅读相关内容，该问题也发布在[GitHub 上](https://github.com/joyent/node/issues/4772)。

来自 Debian.org 的回应：

> nodejs 包应更改为提供 /usr/bin/nodejs，而不是 /usr/bin/node。该软件包应声明与 Debian 中任何引用 /usr/bin/node 的软件包的关系。

# python - 从列表末尾过滤元素

> ID：15695915
> 
> 赞同：4
> 
> 时间：2013-03-29T01:20:39.217
> 
> 标签：python, list, filter

我有一个看起来像这样的数据结构：

```
[(1, 2), (2, 3), (4, 0), (5, 10), (6, 0), (7, 0)] 
```

在第二个元素为 0 的列表末尾仅过滤掉元组的最佳方法是什么？

所需的输出是：

```
[(1, 2), (2, 3), (4, 0), (5, 10)] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T01:28:37.517

在我看来，这听起来像是您想要一个“`rstrip()`列表”。您可以使用`.pop()`while 循环：

```
while somelist and somelist[-1][1] == 0:
    somelist.pop() 
```

这会改变现有的列表*。*

要创建副本，您必须首先找到切片端点，然后切片到该点以进行快速复制：

```
end = len(somelist)
while end and somelist[end - 1][1] == 0:
    end -= 1
newlist = somelist[:end] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:38:50.320

```
In [355]: list(reversed(list(dropwhile(lambda x: x[1]==0, reversed([(1, 2), (2, 3), (4, 0), (5, 10), (6, 0), (7, 0)])))))
Out[355]: [(1, 2), (2, 3), (4, 0), (5, 10)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:58:42.357

我更喜欢@MartijnPieters 的解决方案

```
>>> L = [(1, 2), (2, 3), (4, 0), (5, 10), (6, 0), (7, 0)]
>>> i = next((i for i, (x, y) in enumerate(reversed(L)) if y != 0), 0)
>>> L[:-i]
[(1, 2), (2, 3), (4, 0), (5, 10)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T01:26:21.337

根据您的问题，我解释为您只想删除第二个值为 0 的元素。如果这不是您的意思，我深表歉意。您可以这样做（如果您想永久更改列表）：

```
myList = [(1, 2), (2, 3), (4, 0), (5, 10), (6, 0), (7, 0)]
for i in range(len(myList)):
    if myList[i][1] == 0:
        del myList[i]
return myList 
```

或者，如果您不想更改列表，您可以这样做：

```
myList = [(1, 2), (2, 3), (4, 0), (5, 10), (6, 0), (7, 0)]
afterList = []
for i in myList:
    if i[1] != 0:
        afterList.append(i)
return afterList 
```

# python - 需要编写python脚本在cygwin中执行linux命令

> ID：15695917
> 
> 赞同：-2
> 
> 时间：2013-03-29T01:20:42.597
> 
> 标签：python, linux, shell

我需要编写一个 python 脚本来自动化一些重复的 Linux 命令。（使用 mac 的人给我的）命令主要是 mkdir 和 htk 语音识别工具包命令。我需要在 cygwin 上执行这些命令。我尝试搜索有关如何执行此操作的教程，但认为我还没有找到合适的教程。我对python很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T02:31:58.243

当我使用 python 作为 shell 替换时，我的导入部分通常如下所示：

```
from os import mkdir, chdir
from shutil import move, copy, rmtree, copytree
from subprocess import call 
```

这使我能够移动和复制文件和目录以及创建新目录和删除目录。如果要在 shell 上调用程序而不是使用 python 函数，`call`请从`subprocess`模块中使用。

```
# To run the program foo that takes an option and two arguments
# Equivalent to "foo -d bar baz" directly in the shell
call(['foo', '-d', 'bar', 'baz']) 
```

你会使用`call`htk 的东西。

# javascript - 将 $.getJSON 与 jsonp 一起使用时，Sinon.js fakeServer.request.respond 失败

> ID：15695924
> 
> 赞同：1
> 
> 时间：2013-03-29T01:21:45.173
> 
> 标签：javascript, sinon

您好，我是 sinon.js 的新手。我正在编写 Jasmine BDD 测试代码。我想做一个**从 flickr 获取照片**的小应用程序。

```
 describe("with stub", function() {

    beforeEach(function() {
      this.server = sinon.fakeServer.create();
      this.server.autoRespond = true;
      this.server.respondWith(200, {
        "Content-Type": "application/json"
      }, '{"photos":{"page":1, "pages":726, "perpage":5, "total":"3630", "photo":[{"id":"8591804280", "owner":"77921082@N00", "secret":"da96195b4b", "server":"8526", "farm":9, "title":"Pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591810388", "owner":"77921082@N00", "secret":"d94ce346a5", "server":"8509", "farm":9, "title":"Street Plate", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591801040", "owner":"77921082@N00", "secret":"cb7b1e246a", "server":"8097", "farm":9, "title":"Stone pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590414659", "owner":"77921082@N00", "secret":"fb49a25607", "server":"8094", "farm":9, "title":"Street pole", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590411479", "owner":"77921082@N00", "secret":"9aab17d3a9", "server":"8370", "farm":9, "title":"Street plate", "ispublic":1, "isfriend":0, "isfamily":0}]}, "stat":"ok"}');
      this.flickrPhotos = this.flickr.photos;
    });

    afterEach(function() {
      this.flickrPhotos = [];
    });

    it("[0].title should be Pod", function() {
      this.flickr.getData(5, true);
      expect(this.flickrPhotos[0].title).toBe("Pod");
    });
  }); 
```

下面的代码没有通过测试。返回错误`TypeError: Cannot read property 'title' of undefined`。

```
root.Flickr = (function() {

  function Flickr(number) {
    this.number = number;
    this.photos = [];
  }

  Flickr.prototype.getData = function(number) {
    var _this = this;
    $.getJSON('http://www.flickr.com/services/rest/?jsoncallback=?', {
      format: 'json',
      method: 'flickr.photos.search',
      api_key: '7965a8bc5a2a88908e8321f3f56c80ea',
      user_id: '77921082@N00',
      per_page: number
    }).done(function(data) {
      $.each(data.photos.photo, function(i, item) {
        _this.photos.push(item);
      });
    });
  };
})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T19:02:26.207

Sinon 无法处理 JSONP 请求，因为它只是存根 XMLHttpRequest 对象。问题是 JSONP 与 XMLHttpRequest 无关。它只是一个放入 DOM 并使用返回数据调用全局函数的脚本标记。

在您的情况下，您必须存根 $.getJSON 以返回一个存根，该存根将使用您的结果数据调用它。

```
var json = {"photos":{"page":1, "pages":726, "perpage":5, "total":"3630", "photo":[{"id":"8591804280", "owner":"77921082@N00", "secret":"da96195b4b", "server":"8526", "farm":9, "title":"Pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591810388", "owner":"77921082@N00", "secret":"d94ce346a5", "server":"8509", "farm":9, "title":"Street Plate", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591801040", "owner":"77921082@N00", "secret":"cb7b1e246a", "server":"8097", "farm":9, "title":"Stone pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590414659", "owner":"77921082@N00", "secret":"fb49a25607", "server":"8094", "farm":9, "title":"Street pole", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590411479", "owner":"77921082@N00", "secret":"9aab17d3a9", "server":"8370", "farm":9, "title":"Street plate", "ispublic":1, "isfriend":0, "isfamily":0}]}, "stat":"ok"};

sinon.stub($, 'getJSON').returns({done: sinon.stub().callsArgWith(0, json)}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T12:18:09.853

您可以覆盖`$.getJSON`

```
var backup = $.getJSON;

$.getJSON = function (url, func) {
    var response = {
        total: 3630
    };

    func(response);
};

$.getJSON = backup; // restore original implementation 
```

# javascript - Using jQuery to scroll to the top of a clicked div

> ID：15695928
> 
> 赞同：0
> 
> 时间：2013-03-29T01:22:30.047
> 
> 标签：javascript, jquery, scrolltop

I've searched the web at length for a solution and come very close, but I'm hoping someone smarter than I can perfect this. When I click a div, I would like the top of said div to scroll to the top of the browser window. The current code snippet causes a parent div with the id "centered" to scroll to the top, but I would like each child div to scroll to its own top without having to write out an instance for every single div.

```
toggle:function(divid){ //public method
if (typeof divid=="object")
    divid=divid[0]
this.showhide(divid, "toggle")
$("html, body").animate({scrollTop:$('#centered').position().top}, 600); 
```

}

Can anyone point out what I'm missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:51:24.233

在不知道“分”代表什么的情况下，这是一个相当通用的示例，可能不会直接适合您的场景。但是，假设 'divid' 是 id 值或代表 div 的对象，您应该能够执行以下操作：

```
toggle:function(divid) {
    if (typeof divid == 'object') {
        divid = $(divid[0]); // Assumes a jQuery object (not very robust)
    } else {
        divid = $('#' + divid);
    }

    this.showhide(divid, "toggle"); // May break depending if it accepts the jQuery object
    $('html, body').animate({ scrollTop: divid.offset().top }, 600);
} 
```

如果 'this' 是对相关 div 的引用，您可以只换入 $(this) 而不是使用 divid。

请注意，此代码不是很健壮，因此应正确更改以说明真正的除数。另请注意 - 不要忘记您的分号。

# json - 使用静态 json 文件作为源的 jQuery UI 自动完成

> ID：15695931
> 
> 赞同：9
> 
> 时间：2013-03-29T01:22:50.593
> 
> 标签：json, jquery-ui, jquery, jquery-autocomplete

我正在使用**jquery-ui-autocomplete**（实际上是附加到搜索框的**catcomplete ）。**只要我使用静态定义的项目数组作为源，它就可以很好地工作。

出于性能原因，我不希望自动完成功能将 Ajax 请求发送到 PHP 脚本，从而向 MySQL 发出 %like% 请求。因此，**我从 DB 生成了一个 JSON 文件**，其中包含可以在搜索中匹配的每个项目（大约 20-30 个项目，来自许多 sql 表）。我只想在页面加载或用户开始在搜索框中键入时**读取/解析文件**一次。

**我被困在这里。** 我试图将 Ajax 调用附加到 .catcomplete() （下面的代码）。我还尝试进行 getJSON 调用并在其 success() 方法中创建 .catcomplete。 **两种方式都无声无息地失败。**

我对 JS/jQuery 的东西有点陌生，我已经喜欢它了，但我有点迷茫。任何帮助/解决方案/指向有用文档的指针将不胜感激。

非常感谢你！

这是HTML：（非常简单）

```
<form id="searchform" method="get" role="search">
    <input id="searchfield" />
    <input type="submit" name="go" value="go!" />
</form> 
```

这是我的 JS 代码：

```
$( "#searchfield" ).catcomplete({
delay: 0,
source: function( request, response ) {
    $.ajax({
        url: "/path/to/cache.json",
        dataType: "json",
        data: {term: request.term},
        success: function(data) {
            response($.map(data, function(item) {
                return {
                    label: item.label,
                    category: item.category,
                    desc: item.desc
                };
            }));
        }
    });
},
minlength:0
}); 
```

示例 JSON 数据：

```
[
{ label: "lbl1", category: "cat1", desc: "desc1"}, 
{ label: "lbl2", category: "cat1", desc: "desc2"}, 
{ label: "lbl3", category: "cat1"}
] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T01:29:02.837

尝试翻转它，所以在页面加载时你抓住它一次，然后实例化自动完成。

```
$(function() {
    $.ajax({
        url: "/path/to/cache.json",
        dataType: "json",
        data: {term: request.term},
        success: function(data) {
            var cat_data = $.map(data, function(item) {
                return {
                    label: item.label,
                    category: item.category,
                    desc: item.desc
                };
            });
            $("#searchfield").catcomplete({
                delay: 0,
                source: cat_data,
                minlength:0
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-29T01:53:18.807

您的数据源引发解析错误，因为 json 格式不正确，在 json 中，键也必须包含在`"`.

```
{
  "list" : [{
                "label" : "lbl1",
                "category" : "cat1",
                "desc" : "desc1"
            }, {
                "label" : "lbl2",
                "category" : "cat1",
                "desc" : "desc2"
            }, {
                "label" : "lbl3",
                "category" : "cat1"
            }]
} 
```

演示：[Plunker](http://plnkr.co/edit/VCAqfAGg7NR0coUxb5uL)

如果您想要基于请求字词的搜索，则必须进行更多更改

```
 var xhr;
  $( "input" ).catcomplete({
    delay: 0,
    source: function( request, response ) {
      var regex = new RegExp(request.term, 'i');
      if(xhr){
        xhr.abort();
      }
      xhr = $.ajax({
          url: "data.json",
          dataType: "json",
          cache: false,
          success: function(data) {
            response($.map(data.list, function(item) {
              if(regex.test(item.label)){
                return {
                    label: item.label,
                    category: item.category,
                    desc: item.desc
                };
              }
            }));
          }
      });
    },
    minlength:0
  }); 
```

演示：[Plunker](http://plnkr.co/edit/Qxisjz41PcA2LlcOUg5U?p=preview)

# mysql - 如何为 mysql (my.cnf) 添加额外的配置文件

> ID：15695937
> 
> 赞同：11
> 
> 时间：2013-03-29T01:23:25.003
> 
> 标签：mysql, unix

我想为 UNIX 上的 MySQL 添加额外的配置文件，我们称之为 my2.cnf。因此，当 MySQL 启动时，它也会读取该文件的选项。

[这里](http://dev.mysql.com/doc/refman/5.0/en/option-files.html)说我可以将文件放在以下位置：

*   /etc/my.cnf
*   SYSCONFDIR/my.cnf
*   $MYSQL_HOME/my.cnf
*   defaults-extra-file 使用--defaults-extra-file=path 指定的文件，如果有的话
*   ~/.my.cnf 用户特定选项

我想要这样的“默认额外文件”，但避免在 mysql 提示符下输入此命令。

cnf 文件中是否有一个选项，例如：

```
 extra-conf-file=/path/to/my/file/my2.cnf 
```

（不幸的是，这不起作用）

这甚至可能吗？我可以使用默认的 my.cnf 文件添加另一个在我启动 mysql 服务时将读取的配置文件吗？

（使用 $MYSQL_HOME/my.cnf 对我来说已经足够了，但我想知道我是否可以明确告诉它可以根据主 my.cnf 全局文件读取或忽略）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T01:26:22.030

我想这就是你想要的吧？

```
!include /path/to/my/file/my2.cnf 
```

您还可以使用以下方式包含目录中的完整文件集：

```
!includedir /path/to/my.cnf.d 
```

# java - How can I access an attribute from a child class when the parent class is the reference type and passed through a method?

> ID：15695939
> 
> 赞同：0
> 
> 时间：2013-03-29T01:23:46.473
> 
> 标签：java, class, polymorphism

First of all I'm sorry for the wordiness of the question, I am unsure how to ask, but I can explain it better.

I have a parent class and 2 child classes, only one is relavent for the example

```
public abstract class AudioFile{ //parent
blah blah blah
} //end class AudioFile

public class MP3File extends AudioFile{
private int bitRate; //unique to MP3File class 
} //end class MP3File 
```

Now say I have an MP3File object but its referencing AudioFile

```
public class Driver{
... // pretend main exists
AudioFile file = new MP3File();
file.setBitRate(100); //pretend method exists

edit(file); 

private void edit(AudioFile audio)
{
 //how would I edit the bit rate?
} //end method edit

} //end class Driver 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:40:41.933

您问题的真正答案是“不要这样做”。

MP3File 是 AudioFile 的扩展；这应该意味着 MP3File 对象是 AudioFile 对象的特例，并且 MP3File 唯一适用于 MP3 文件的事情。

您的编辑方法将 AudioFile 作为参数。根据您的示例，AudioFiles 没有 bitRate 参数。

如果您能够将传递给编辑的参数转换为 MP3File，这仍然是一个坏主意。这意味着该方法正在处理 MP3File 对象，并且不应假定传递给它的任何 AudioFile 对象都可以转换为 MP3File。

# algorithm - Find the numbers of self-product within a range

> ID：15695943
> 
> 赞同：3
> 
> 时间：2013-03-29T01:24:11.713
> 
> 标签：algorithm, numbers, product, brute-force, factorization

The question is in the title. Now to make the term self-product more clear. Self-product means the product of the number and its digits. Example:

Self-Product(1234) = 1234*1*2*3*4 = 29616.

I've tried two methods.

**Brute-force**

Anyone's idea would be to check all combinations between 1 and N (upper bound of the range). And check if the number's self-product is within the range. This would be ideal for relativly low numbers, but having in mind that the range can be big as 10^20, it's becoming a problem, because it'll take a while before it prints the result.

**Factorization**

Another idea is to factorize the number within the range. If the range is between 60 000 and 70 000, when I check for 62 688, I'll get 62 688 as 2*2*2*2*2*3*653\. Now knowing that 653 can't be a digit, that means that it have to be in the original number. Then again I have to combine all factors of 62 688 to get the right answer and it should output that this one is Self-Product of 2612, beacuse 62 688 = 2612 * 2 * 6 * 1 * 2.

In both situation I face a big problem, which is checking all of the combinations.

P.S I found that if number has n-digit then if it's self-product of some number than that number would have at least n/2 digits and no more than n. This would make the list of numbers that I will need to check a little bit smaller, but it doesn't solve the problem.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:47:16.080

**命名：**

```
sp(x) = Self-Product(x) = y
Range = a to b 
```

**笔记：**

我假设您只想要计数，但是将其扩展为实际打印所有数字应该不难。

基本思想 - 将`x`' 拆分为具有某些数字前缀和一定数量的数字，并确定某些数字 + 前缀是否在范围内，或者完全（添加可能性的数量，易于计算），部分（检查更长的前缀）或根本不检查（继续）。

请注意，`x`不允许任何包含 0 的数字，因为 then `y`= 0。

该算法可能有一些效率低下，但它应该提供一个不错的起点。一项改进是应该能够进行一些类似于二分搜索的过程。另一个不是一直重新计算最小值/最大值，因为这里有一定数量的冗余。

**表示法：**
`min(c,d)` - 最小值为 c 位，前缀为 d（`min(c,)`表示无前缀）
`max(c,d)`- 最大值为 c 位，前缀为 d
`range(c,d)`- 范围从`min(c,d)`到`max(c,d)`

请注意，`min(x,) = min(x,1) < min(x,2) < min(x,3) < ...`和
`max(x,) = max(x,9) > max(x,8) > max(x,7) > ...`

`min(c,d..e)`- 一组带有 c 位的最小值和从 d 到 e 的任何前缀
（介于`min(c,d)`和之间`min(c,e)`）
`max(c,d..e)`- 一组带有 c 位的最大值和从 d 到 e 的任何前缀
（介于`max(c,d)`和之间`max(c,e)`）

**通过示例算法：**

我将使用 Range = 100 到 200 的示例进行解释。

```
// check 1 digit
min(1,): x = 1, y = 1*1 = 1 < 100
max(1,): x = 9, y = 9*9 = 81 < 100
  // not in range, nothing to do

// check 2 digits
min(2,): x = 11, y = 11*1*1 = 11 < 100
max(2,): x = 99, y = 99*9*9 = 8019 > 200
  // partially in range, check longer prefix
  min(2,1): x = 11, y = 11*1*1 = 11 < 100
  max(2,1): x = 19, y = 19*1*9 = 171 > 100
    // partially in range, check longer prefix
    sp(11..16) <= sp(16) = 96 < 100
    sp(17) = 119 // in range - increment count
    sp(18) = 144 // in range - increment count
    sp(19) = 171 // in range - increment count
  min(2,2): x = 21, y = 21*2*1 = 42 < 100
  max(2,2): x = 29, y = 29*2*9 = 522 > 200
    // partially in range, check longer prefix
    // others outside of range, omitted for brevity
    sp(23) = 138 // in range - increment count
    sp(24) = 192 // in range - increment count
  min(2,3): x = 31, y = 31*3*1 = 93 < 100
  max(2,3): x = 39, y = 39*3*9 = 1053 > 200
    // partially in range, check longer prefix
    // others outside of range, omitted for brevity
    sp(32) = 192 // in range - increment count
  min(2,4): x = 41, y = 41*4*1 = 164 < 200
  max(2,4): x = 49, y = 49*4*9 = 1764 > 200
    // partially in range, check longer prefix
    // others outside of range, omitted for brevity
    sp(41) = 164 // in range - increment count
  min(2,5): x = 51, y = 51*5*1 = 255 > 200
    // not in range, nothing to do
  // no need to process (2,6..9), since these are all > min(2,5) > 200

// check 3 digits
min(3,): x = 111, y = 111*1*1*1 = 111 < 200
max(3,): x = 999, y = 999*9*9*9 = 728271 > 200
  // partially in range, check longer prefix
  min(3,1): x = 111, y = 111*1*1*1 = 111 < 200
  max(3,1): x = 199, y = 199*1*9*9 = 16119 > 200
    // partially in range, check longer prefix
    min(3,11): x = 111, y = 111*1*1*1 = 111 < 200
    max(3,11): x = 119, y = 119*1*1*9 = 1071 > 200
      // partially in range, check longer prefix
      // others outside of range, omitted for brevity
      sp(111) = 111 // in range - increment count
    min(3,12): x = 121, y = 121*1*2*1 = 242 > 200
      // not in range, nothing to do
    // no need to process (3,13..19), since these are all > min(3,12) > 200
  min(3,2): x = 211, y = 211*2*1*1 = 411 > 200
    // not in range, nothing to do
  // no need to process (3,3..9), since these are all > min(3,2) > 200

// check 4 digits
min(4,): x = 1111, y = 1111*1*1*1 = 1111 > 200
  // not in range, nothing to do
// no need to check more digits, since min(n,) > min(n-1,) and min(4,) > 200 
```

因此，总数为 8 个自产品，结果范围为 100 到 200。

请注意，有时我检查范围的开始，有时检查结束。这只是为了说明在特定情况下什么条件是重要的。

只是为了说明一些事情，如果范围是 1-200，那么前缀为 1 的 2 位数字的范围将是 [11,171] 如上所述，并且 1 <= 11 <= 171 <= 200，所以我们可以只包括前缀为 1 的所有 2 位数字，共有 9 个。

**执行：**

我写了一个带有基本实现的小 Java 程序。对于 60000 到 100000000000 来说，对于更大的数字（甚至在这个范围内），它需要不到一秒的时间，因为实现，会有算术溢出，所以所花费的时间不能真正被信任（除了，我希望它应该只需要更长的时间（对于这个范围），而不是更短）。

```
final static long[] tenPowers = {1, 10, 100, 1000, 10000, 100000, 1000000,
  10000000, 100000000, 1000000000, 10000000000l, 100000000000l,
  1000000000000l, 10000000000000l, 100000000000000l, 1000000000000000l,
  10000000000000000l, 100000000000000000l, 1000000000000000000l};

public static void main(String args[]) throws InterruptedException
{
  System.out.println("Count = "+selfProductCountRange(60000, 100000000000l));
}

static long selfProductCountRange(long s, long f)
{
  start = s;
  finish = f;
  long count = 0;
  for (len = 1; ; len++)
  {
     long temp = selfProductCount(0, 0);
     if (temp == -1)
        break;
     count += temp;
  }
  return count;
}

static long selfProduct(long num)
{
  // pretend 0s are 1s for simplicity in the rest of the code
  long selfProduct = num;
  while (num > 0)
  {
     selfProduct *= Math.max(num % 10, 1);
     num /= 10;
  }
  return selfProduct;
}

static long start, finish;
static int len;

static long selfProductCount(long prefix, int prefixLen)
{
  long max = selfProduct((prefix+1) * tenPowers[len - prefixLen] - 1);
  // overflow hack
  if (max < 0)
     max = finish+1;
  if (max < start)
     return 0;
  long min;
  if (prefixLen != 0)
     min = selfProduct(prefix * tenPowers[len - prefixLen]);
  else
     min = selfProduct(tenPowers[len-1]);
  if (min > finish)
     return -1;
  if (max <= finish && min >= start)
     return getPossibilities(prefixLen);
  long val = 0;
  for (int i = 1; i < 10; i++)
  {
     long temp = selfProductCount(prefix*10+i, prefixLen+1);
     if (temp == -1)
        break;
     val += temp;
  }
  return val;
}

static long getPossibilities(int prefixLen)
{
  return (long)Math.pow(9, len-prefixLen);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:53:49.353

所以我们说产品是由`digits`和 组成的`number`。

只需枚举数字（）并检查每个排列（形成数字），看看它是否在范围内。

一个明显的修剪是当数字和最小排列的乘积大于上限时，您返回。

我认为它对于 32 位整数来说已经足够快了。

# jquery - 使用外部 jquery 脚本更改 CSS

> ID：15695944
> 
> 赞同：1
> 
> 时间：2013-03-29T01:24:18.307
> 
> 标签：jquery, html, css, external

我正在尝试使用外部 jQuery 脚本更改 HTML 文档的 CSS 属性。jquery 应该使用赋予它的类来更改所有段落。

我不允许更改 HTML 文档。

我首先在 HTML 文档中编写了 jquery，它运行良好。现在我需要放入一个外部文件，但我认为我做错了什么。

我不允许链接到在 HTML 文件中调用它的最新版本的 Jquery。如何从我的外部文件中调用它？那可能吗？

请在下面查看我的代码，谢谢！

* * *

```
<html>
    <head>
        <title>comp1911 final exam part 2 #3</title>

        <script type="text/javascript" src="question3.js"></script>

    </head>
<body>

<p class="sports"> 1\. At the age of 10, Gretzky scores 378 goals in Brantford's atom league - still an age group record.

Circa 1968 - Wayne dominated the Brantford atom league, scoring 378 goals.

2\. While playing in the prestigious International Pee Wee Hockey Tournament in Quebec City's Le Colisee, the 14-year-old Gretzky is frequently besieged by autograph seekers.

3\. As a teenager, young Wayne often competes against players much older. At 14 he plays in Tier II junior and major junior at 15.

4\. Wayne first dons his now famous No. 99 jersey as a member of the Sault Ste. Marie Greyhounds. Originally wanting to wear No. 9 like his idol Gordie Howe, Gretzky settles on his trademark number after wearing No. 19 for a few weeks

5\. In May 1978, Gretzky turns pro at 17 with the Indianapolis Racers of the World Hockey Association.

6\. The financially strapped Indianapolis franchise trades Gretzky to the Edmonton Oilers of the WHA in May of 1978.

7\. In his first season with the Oilers, Gretzky registers 46 goals and 110 points on his way to capturing WHA rookie of the year honors.</p>
<p class="books">Nikolai Vasilievich Gogol was a Ukrainian-born Russian  novelist, humourist, and dramatist.[2]

He is considered the father of modern Russian realism. His early works, such as Evenings on a Farm Near Dikanka, were heavily influenced by his Ukrainian upbringing and identity.[3][4] His more mature writing satirised the corrupt bureaucracy of the Russian Empire, leading to his exile. On his return, he immersed himself in the Orthodox Church.[5] The novels Taras Bul'ba (1835; 1842 [revised edition]) and Dead Souls (1842), the play The Inspector-General (1836, 1842), and the short stories Diary of a Madman, The Nose and The Overcoat (1842) are among his best known works. With their scrupulous and scathing realism, ethical criticism as well as philosophical depth, they remain some of the most important works of world literature.</p>
<p class="comedy">Jack Handey (born 25 February 1949) is an American  humorist. He is best known for his Deep Thoughts by Jack Handey, a large body of surrealistic  one-liner jokes, as well as his "Fuzzy Memories" and "My Big Thick Novel" shorts. Although many people assume otherwise,[1][2]  Handey is a real person, not a pen name or a character.</p>
<p class="sports books comedy">I found this book: http://www.amazon.com/Teed-Off-Laughs-Greens-Sports/dp/0233995005/ref=sr_1_1?ie=UTF8&s=books&qid=1277749796&sr=1-1 You don't have to be good to play, but a low level of self-esteem is helpful! Humorous collection of colour photographs and hilarious text reduces our heroes of the golf course to mere mortals. No golfing disaster is left secret and the 80 photographs only go to prove the fallibility of international stars.</p>
<p class="life">To my dearest daughter,

Now that you are ten, I want to write to you about something that is important to me. Have you ever wondered how we know the things that we know? How do we know, for instance, that the stars, which look like tiny pinpricks in the sky, are really huge balls of fire like the Sun and very far away? And how do we know that the Earth is a smaller ball whirling round one of those stars, the Sun?
The answer to these questions is ‘evidence’.

Sometimes evidence means actually seeing (or hearing, feeling, smelling….) that something is true. Astronauts have traveled far enough from the Earth to see with their own eyes that it is round. Sometimes our eyes need help. The ‘evening star’ looks like a bright twinkle in the sky but with a telescope you can see that it is a beautiful ball – the planet we call Venus. Something that you learn by direct seeing (or hearing or feeling…) is called an observation.

Often evidence isn’t just observation on its own, but observation always lies at the back of it. If there’s been a murder, often nobody (except the murderer and the dead person!) actually observed it. But detectives can gather together lots of other observations which may all point towards a particular suspect. If a person’s fingerprints match those found on a dagger, this is evidence that he touched it. It doesn’t prove that he did the murder, but it can help when it’s joined up with lots of other evidence. Sometimes a detective can think about a whole lot of observations and suddenly realize that they all fall into place and make sense if so-and-so did the murder.</p>

<p class="books life">SIMPLIFY YOUR LIFE: 100 WAYS TO SLOW DOWN AND ENJOY THE THINGS THAT REALLY MATTER [Paperback]
Elaine St. James
Elaine St. James (Author)
› Visit Amazon's Elaine St. James Page
Find all the books, read about the author, and more.
See search results for this author
Are you an author? Learn about Author Central
(Author) For everyone who is overwhelmed by the increasing demands in their lives, here is the ideal guide for slowing down and finding peace of mind. In separate chapters covering career, household, health, social, finance, and personal affairs, this thought-provoking book offers one hundred proven, practical steps for creating a simple but elegant lifestyle. </p>
<p class="comedy books">Our Front Pages: 21 Years of Greatness, Virtue, and Moral Rectitude from America's Finest News Source (Onion Presents): Since its founding by a bloodthirsty tyrant in 1756, The Onion has not merely changed the way we think about the news -- it has changed whether we think about the news at all. As the first decade of this new millennium draws to a close, Our Front Pages shows us the first thing that presidents, kings, prime ministers, and popes saw when they opened their eyes each morning for the last 21 years. Now you, the common reader and citizen, can see what they saw and be as informed as they were with this important retrospective of the past two decades. You, too, will realize what generations before have realized and generations yet unborn will some day realize in turn: The Onion is not merely the chronicle of America. The Onion is America. </p>
<p class="life">Richard Feynman: Some years ago I had a conversation with a layman about flying saucers — because I am scientific I know all about flying saucers! I said "I don't think there are flying saucers'. So my antagonist said, "Is it impossible that there are flying saucers? Can you prove that it's impossible?" "No", I said, "I can't prove it's impossible. It's just very unlikely". At that he said, "You are very unscientific. If you can't prove it impossible then how can you say that it's unlikely?" But that is the way that is scientific. It is scientific only to say what is more likely and what less likely, and not to be proving all the time the possible and impossible. To define what I mean, I might have said to him, "Listen, I mean that from my knowledge of the world that I see around me, I think that it is much more likely that the reports of flying saucers are the results of the known irrational characteristics of terrestrial intelligence than of the unknown rational efforts of extra-terrestrial intelligence." It is just more likely. That is all.

* The Character of Physical Law. Cornell University Messenger Lectures (1964)
</p>
<p class="sports books life">Tiger Woods' father Earl Woods wrote "Training a Tiger: A Father's Guide to Raising a Winner in Both Golf and Life". The first thing you'll learn in this book, which details how Earl Woods raised his son, Tiger, to become probably the greatest golfer who ever lived, is that your child will never be another Tiger Woods. Tiger is a prodigy in the sense that Mozart was a prodigy. But even if your child has completely ordinary abilities, Training a Tiger shows how to pass on your love for a sport to your child. Most of the book is specific to golf, but the same lessons can be applied to any activity. </p>
<p class="sports">Ice hockey (hockey in countries where it is the most popular form of hockey) is a team sport played on ice, in which skaters use sticks to direct a puck into the opposing team's goal. It is a fast-paced physical sport. Ice hockey is most popular in areas that are sufficiently cold for natural reliable seasonal ice cover, such as Canada, the Czech Republic, Latvia, the Nordic countries (especially Sweden and Finland), the northern United States, Russia, Slovakia, and Switzerland. With the advent of indoor artificial ice rinks it has become a year-round pastime in these areas. Ice hockey is one of the four major North American professional sports. Worldwide the National Hockey League (NHL) is the highest level for men and both the Canadian Women's Hockey League  (CWHL) and the Western Women's Hockey League (WWHL) are the highest levels for women. It is the official national winter sport of Canada, where the game enjoys immense popularity.

While there are 68 total members of the International Ice Hockey Federation (IIHF), 162 of 177 medals at the IIHF World Championships have been taken by seven nations: Canada, the Czech Republic, Finland, Russia, Slovakia, Sweden and the United States.[1][2] Of the 64 medals awarded in men's competition at the Olympic level from 1920 on, only six did not go to the one of those countries. All twelve Olympic and 36 IIHF World Women Championships medals have gone to one of those seven countries, and every gold medal in both competitions has been won by either Canada or the United States</p> 
```

$(".sports").css({"border":"solid"}); $(".sports").css({"borderColor":"green"})

```
 $(".life").css({"color":"red"})

            $(".books").css({"text-align":"right"})

            $(".comedy").css({"font-size":"200%"}) 
```

* * *

修订的外部脚本：

```
$(".sports").css({"border":"solid"});
$(".sports").css({"borderColor":"green"})

$(".life").css({"color":"red"})

$(".books").css({"text-align":"right"})

$(".comedy").css({"font-size":"200%"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:02:57.307

而不是从你的外部 JS 文件中实际调用 jQuery，你可以复制粘贴整个东西（当然是缩小的）。1.9.1 的缩小版可以在[这里](https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)找到。只需确保将其粘贴到外部文件的最顶部，以便所有使用 jQuery 的代码都紧随其后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T02:14:30.517

**[jsFiddle 演示](http://jsfiddle.net/xbe6K/)**

为什么要使用jquery？您可以结合迭代、内置功能和`getElementsByClassName`.

js

```
window.onload = function(){
 var sports = document.getElementsByClassName("sports");
 for( var i = 0; i < sports.length; i++ ){
  sports[i].style.border = "solid";     
  sports[i].style.borderColor = "green";     
 }
 var life = document.getElementsByClassName("life");
 for( var i = 0; i < life.length; i++ ){
  life[i].style.color = "red";     
 }
 var books = document.getElementsByClassName("books");
 for( var i = 0; i < books.length; i++ ){
  books[i].style.textAlign = "right";     
 }

 var comedy = document.getElementsByClassName("comedy");
 for( var i = 0; i < comedy.length; i++ ){
  comedy[i].style.fontSize = "200%";     
 }
}; 
```

# search - In SOLR, how can I query to find an indexed keyword inside a user provided search query?

> ID：15695951
> 
> 赞同：0
> 
> 时间：2013-03-29T01:25:43.113
> 
> 标签：search, solr, jetty, contains

I am running SOLR 3.6, and have documents that have tags indexed. When a user enters a search phrase, I'd like to be able to find documents with tags contained inside that query.

E.g, a user searching for "Any document that has boats tagged" would match a document that had "boats" as a tag.

I know you can do wildcard searching, but I need the wildcards applied to the solr field, not the search query.

The MySQL equivalent to this would be:

```
SELECT * FROM `documents` WHERE "Any document that has boats tagged" LIKE 'CONCAT('%', `document`, '%'); 
```

So I need a SOLR factory that will allow this type of query:

```
*document*:"Any document that has boats tagged" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T05:13:29.233

如果`tags`Solr 中的字段在索引时间和查询时间都是带有 LowerCaseFilterFactory 的多值文本字段，那么您可以简单地发出以下查询：

```
q=tags:(Super fast boats) 
```

（我在这里更改了您的示例。）这将为您提供首先具有所有 3 个标签（如果有）的文档，然后是具有 2 个标签（如果有）然后是 1 个标签的文档。

这是假设在您的 schema.xml 中您得到了`<solrQueryParser defaultOperator="OR"/>`. 如果您有 AND，则需要用`OR`like 分隔单词：

```
q=tags:(any OR document OR that OR has OR boats OR tagged) 
```

（您可能还想对标签和查询使用词干提取以匹配更多标签，但这是您需要试验和决定的事情。）

# php - 数据库插入合并？

> ID：15695952
> 
> 赞同：0
> 
> 时间：2013-03-29T01:25:46.603
> 
> 标签：php, mysql, codeigniter

我有一个脚本，它插入两个单独的数据库表：成分和方向。对于第一个，我使用`$this->db->query($sql)`，对于第二个：（`$this->db->query($sql2)`我正在使用 CodeIgniter）。这是我的代码：

```
foreach($_POST as $key => $value) {
        $value = $this->input->post($key);
        $directions = $this->input->post('directions');
        $ingredientQTY = $this->input->post('ingredientQTY');
        $measurements = $this->input->post('measurements');
        $ingredientNAME = $this->input->post('ingredientNAME');
        $ingredientsROW[] = array($ingredientQTY, $measurements, $ingredientNAME);

        //For inserting ingredients
        for ($i = 0, $count = count($ingredientQTY); $i < $count; $i++) {
            $rows[] = array(
                'ingredientamount'      => $ingredientQTY[$i],
                'ingredientType'        => $measurements[$i],
                'ingredientname'        => $ingredientNAME[$i],
                'recipe_id'             => $recipe_id,
                'order'                 => $i + 1,
                'user_id'               => $user_id
            );
            $sql = "INSERT `ingredients` (`ingredientamount`,`ingredientType`,`ingredientname`,`recipe_id`, `listOrder`, `user_id`) VALUES ";
            $coma = '';
            foreach ($rows as $oneRow) {
                $sql .= $coma."('".implode("','",$oneRow)."')";
                $coma = ', ';
            }

        }
        $this->db->query($sql);//Insert Query for ingredients

        //For inserting directions
        for ($i = 0, $count = count($directions); $i < $count; $i++) {
            $rows[] = array(
                'direction'     => $directions[$i],
                'recipe_id'             => $recipe_id,
                'order'                 => $i + 1,
                'user_id'               => $user_id
            );
            $sql2 = "INSERT `directions` (`direction`,`recipe_id`,`listOrder`,`user_id`) VALUES ";
            $coma = '';
            foreach ($rows as $oneRow) {
                $sql2 .= $coma."('".implode("','",$oneRow)."')";
                $coma = ', ';
            }
        }
        $this->db->query($sql2);    //Insert Query for directions
        break;
    } 
```

我应该有两个单独的 sql 语句，但由于某种原因它们被组合成，并产生以下错误：

```
Column count doesn't match value count at row 1

INSERT `directions` (`direction`,`recipe_id`,`listOrder`,`user_id`) VALUES ('1','Bunch','Cilantro','1','1','1'), ('3','Cup','Sugar','1','2','1'), ('First, combine the cilantro and sugar','1','1','1'), ('then eat. ','1','2','1') 
```

也应该有一个 INSERT `ingredients`，但它的值被合并到`INSERT directions`语句中。

为什么要合并这两个 SQL 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:58:20.430

您的代码的前半部分构建`$rows`为插入所有成分，然后后半部分构建`$rows`为插入所有方向，但它永远不会在两者之间清除`$rows`。当你去做方向时，成分仍然在阵列中。

此外，我认为您过于频繁地调用 SQL。你的`for $i`循环和`foreach $rows`循环不应该嵌套；它们应该是一个，然后是另一个。尝试这样的事情：

```
for ($i = 0, $count = count($ingredientQTY); $i < $count; $i++) {
  $rows[] = array(
    'ingredientamount' => $ingredientQTY[$i],
    'ingredientType'   => $measurements[$i],
    'ingredientname'   => $ingredientNAME[$i],
    'recipe_id'        => $recipe_id,
    'order'            => $i + 1,
    'user_id'          => $user_id
  );
} // <-- FIRST FOR LOOP SHOULD END HERE

$sql = "INSERT `ingredients` (`ingredientamount`,`ingredientType`,`ingredientname`,`recipe_id`, `listOrder`, `user_id`) VALUES ";
$coma = '';
foreach ($rows as $oneRow) {
  $sql .= $coma."('".implode("','",$oneRow)."')";
  $coma = ', ';
}
//  } <-- FIRST FOR LOOP USED TO END HERE; PROBABLY NOT RIGHT

$this->db->query($sql);//Insert Query for ingredients

$rows = array(); // <-- Clear out $rows to reuse it for directions 
```

清除`$rows`阵列后，您可以继续前进。与成分一样，将循环一个接一个地放置，而不是嵌套。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T01:43:43.827

```
$sql2 = "INSERT directions ('direction','recipe_id','listOrder','user_id') VALUES "; 
```

第一组括号指定 4 列，但您尝试插入 6 个值。

固定代码：

```
$sql2 = "INSERT INTO directions VALUES "; 
```

# php - 为什么这个 PHP 邮件脚本不起作用？

> ID：15695953
> 
> 赞同：0
> 
> 时间：2013-03-29T01:25:48.687
> 
> 标签：php, email

我不太了解 PHP，正在尝试获取一个非常简单的 PHP 脚本来发送电子邮件。单击提交时，我收到了谢谢消息，但没有电子邮件。

```
<?php $name = $_POST['name'];
$email = $_POST['email'];
$web = $_POST['web'];
$message = $_POST['message'];
$formcontent="From: $name \n Website: $web \n Message: $message";
$recipient = "myemail@example.com"; // I do have my email here
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!";
    ?> 
```

这是html表单：

```
<form action="mail.php" method="post" class="form">  

    <p class="name">  
      <label for="name">Name</label>
        <input type="text" name="name" id="name" />  

    </p>  

    <p class="email">  
      <label for="email">E-mail</label> 
        <input type="text" name="email" id="email" />  

    </p>  

    <p class="web">  
      <label for="web">Website</label> 
        <input type="text" name="web" id="web" />  

    </p>  

    <p class="text">  
      <label for="web">Comments</label> 
        <textarea name="message"></textarea>  
    </p>  

    <p class="submit">  
        <input type="submit" value="Send" />  
    </p>        
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:38:54.527

嗯……好像不错。尝试：

```
mail('youremail@hotmail.com', 'aSubject', 'aMessage'); 
```

所有参数**不是**变量，而是**带有单引号的实际字符串**。

应该会在接下来的 5 分钟内出现在您的普通邮件/**垃圾邮件中。**

* * *

如果这不起作用，则意味着脚本没有执行，因此将 mail.php 更改为：

```
echo 'hi'; 
```

以确保脚本路径正确。那会找出问题所在，干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:43:45.933

我建议您为此简单地使用 PHPMAILER 类，这样您就可以休息一下了。

[https://code.google.com/a/apache-extras.org/p/phpmailer/](https://code.google.com/a/apache-extras.org/p/phpmailer/)

这将很有帮助，因此您无需开始为编辑大量代码而烦恼，因为这会浪费您的时间用于其他工作。

检查示例文件夹中的文件以获取 SMTP 示例，并使用 SMTP 高级或基本。使用 SMTP 高级，您将能够抛出并捕获您的错误。这可以帮助您知道哪里有错误，直到所有错误都得到解决。请参阅 SMTP 基本代码的示例代码。

```
require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = preg_replace('/[\]/','',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "mail.yourdomain.com"; // SMTP server
$mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->Host       = "mail.yourdomain.com"; // sets the SMTP server
$mail->Port       = 26;                    // set the SMTP port for the GMAIL server
$mail->Username   = "yourname@yourdomain"; // SMTP account username
$mail->Password   = "yourpassword";        // SMTP account password

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$mail->Subject    = "PHPMailer Test Subject via smtp, basic with authentication";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address = "whoto@otherdomain.com";
$mail->AddAddress($address, "John Doe");

$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
} 
```

当您完成测试并希望现在停止输出 SMTP 缓冲区消息时，请找到显示以下内容的行

```
$mail->SMTPDebug = 2; 
```

并将其替换为

```
$mail->SMTPDebug = false;
$mail->do_debug = 0; 
```

那你就可以走了。在必要时提出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:40:44.707

首先，您应该知道您的代码会使用 POST 进行标头注入。您应该使用 filter_var() ( [http://php.net/manual/fr/function.filter-var.php](http://php.net/manual/fr/function.filter-var.php) ) 来确保 $email 值是无害的。

然后，有几个原因可以阻止 PHP 发送您的邮件。

mail() 函数使用您服务器的 MTA（例如 sendmail、postfix...）：您需要正确安装/配置它才能发送邮件。

您的 ISP 也可以阻止 25 端口（以防止垃圾邮件）。

或者，您可以使用 php pear 的 Mail 和 Net_SMTP 类通过 SMTP 发送电子邮件。这些类以方便的方式处理编码、附加文件等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-31T19:06:18.013

我不是后端开发人员，所以我对 php 了解不多，但是这段代码对我有用，所以试一试。

```
<p><span>Name</span><input class="contact" type="text" name="your_name" value="" /></p>
            <p><span>Email Address</span><input class="contact" type="text" name="your_email" value="" /></p>
			<p><span>Message</span><textarea class="contact textarea" rows="8" cols="50" name="your_message"></textarea></p>

            <p style="padding-top: 15px"><span>&nbsp;</span><input class="submit" type="submit" name="contact_submitted" value="Send" /></p>
            <?php
            $your_name = $_POST['your_name'];
            $your_email = $_POST[your_email];
            $your_message = $_POST['your_message'];
            $recipient = "youremailhere@domain.com";
            $subject = "New Message About BikeExcel";

            mail($recipient , $subject, $your_message, "From " . $your_email);
            echo "Your Message Has Been Sent";
            ?>
```

因此，您无需将电子邮件放入邮件字符串中，而是创建一个变量来定义您的电子邮件。这也将使您的代码看起来不错，这将使您在投资组合中看起来不错。我希望这有帮助！！！！

# java - Launching an Applet fails?

> ID：15695954
> 
> 赞同：0
> 
> 时间：2013-03-29T01:25:50.957
> 
> 标签：java, applet, compiler-errors, launch

I am trying to launch an applet from within an applet using the code:

```
 Class applet2 = Class.forName(PostAccess);
    Applet appletToLoad = (Applet)applet2.newInstance();
    appletToLoad.setStub(this);
    setLayout( new GridLayout(1,0));
    add(appletToLoad);
    appletToLoad.init();
    appletToLoad.start(); 
```

However, this throws an error:

```
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Uncompilable source code - Erroneous tree type: <any>
    at javaapplication1.MainApplet.jButton1ActionPerformed(MainApplet.java:204)
    at javaapplication1.MainApplet.access$100(MainApplet.java:34)
    at javaapplication1.MainApplet$2.actionPerformed(MainApplet.java:68)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:702)
    at java.awt.EventQueue$4.run(EventQueue.java:700)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

Does anyone have any suggestions for code I could use to launch my applet?

# c++ - 在 C++11 中声明 char 十六进制常量

> ID：15695960
> 
> 赞同：7
> 
> 时间：2013-03-29T01:26:43.990
> 
> 标签：c++, c++11, char, hex

在我们代码的各种低级部分中，我们需要向设备发送特定字节以使事情发生。因此，我们有很多看起来像这样的代码：

```
const char magic_bytes[] = { 0x01, 0xFA, 0x92 }; 
```

导致错误（在 GCC 4.7.2 上）

```
test_char.cpp:6:51: warning: narrowing conversion of ‘250’ from ‘int’ to ‘const char’ inside { } is ill-formed in C++11 [-Wnarrowing] 
```

因为 0xFA 超出了 -128 到 127 的范围。

我能想到两种解决方法：

```
const char magic_bytes[] = { static_cast<char>(0x01), static_cast<char>(0xFA), static_cast<char>(0x92) }; 
```

或者：

```
const unsigned char magic_bytes[] = { 0x01, 0xFA, 0x92 }; 
```

两者要么丑陋（第一种情况），要么有其他缺点（在后者的情况下必须强制转换为 (const char*)）

有没有更好的方法来声明这些字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T03:21:15.683

C++11 为您提供了[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)（[GCC](http://gcc.gnu.org/projects/cxx0x.html)支持已经存在了一段时间）来解决这个问题。

```
template <typename... A>                                                                 
constexpr std::array<char, sizeof...(A)> byte_array(A... v)                              
{ return std::array<char, sizeof...(A)>{{static_cast<char>(v)...}}; }                    

constexpr auto arr = byte_array( 0x01, 0xFA, 0x92 ); 
```

或者避免重复调用`.data()`将其传递给 C 函数：

```
template <std::size_t S>
struct byte_array {
  char data_[S];
  char *data() { return data_; }
  operator char*() { return data_; }

  const char *data() const { return data_; }
  operator const char*() const { return data_; }

  constexpr std::size_t size() const { return S; }

  // one could add support for begin/end and things like that
};

template <typename... A>
constexpr byte_array<sizeof...(A)> make_byte_array(A... v)
{ return byte_array<sizeof...(A)>{{static_cast<char>(v)...}}; }

// beside constexpr, this can be also non-const
auto magic_bytes = make_byte_array( 0x01, 0xFA, 0x92 );
strtok(magic_bytes, "why?"); 
```

与普通 char 数组相比，没有开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:46:06.910

你可以做这样的事情来有一个单一的演员：

```
const unsigned char magic_bytesUC[] = { 0x01, 0xFA, 0x92 };
enum { NBYTES = sizeof(magic_bytesUC) };
const char *magic_bytes = reinterpret_cast<const char*>(magic_bytesUC); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T02:10:11.583

由于您指定了 C++11，我假设您可以使用[variadic macros](http://gcc.gnu.org/onlinedocs/cpp/Variadic-Macros.html)。在这种情况下，有一个解决方案在使用时很优雅，但在幕后却很丑陋。

因此，我将首先向您展示如何使用它：

```
char myBytes1[] = MAKE_BYTES( 0x00, 0x40, 0x80, 0xC0 );
char myBytes2[] = MAKE_BYTES( 0xFF ); 
```

现在，后端代码：这可能会更短，但我使用了标准循环方法，因此您可以从中获得一些重用。它可以支持 1 - 24 字节的列表。通过重复最后几行，它可以变得更大。欢迎来到预处理器元编程的世界。

```
#define EXPAND(a) a
#define ARGS_COUNT_(\
  _96,_95,_94,_93,_92,_91,_90,_89,_88,_87,_86,_85,_84,_83,_82,_81,\
  _80,_79,_78,_77,_76,_75,_74,_73,_72,_71,_70,_69,_68,_67,_66,_65,\
  _64,_63,_62,_61,_60,_59,_58,_57,_56,_55,_54,_53,_52,_51,_50,_49,\
  _48,_47,_46,_45,_44,_43,_42,_41,_40,_39,_38,_37,_36,_35,_34,_33,\
  _32,_31,_30,_29,_28,_27,_26,_25,_24,_23,_22,_21,_20,_19,_18,_17,\
  _16,_15,_14,_13,_12,_11,_10, _9, _8, _7, _6, _5, _4, _3, _2, _1,\
  N,...) N
#define ARGS_COUNT(...) ARGS_COUNT_(__VA_ARGS__,\
  96,95,94,93,92,91,90,89,88,87,86,85,84,83,82,81,\
  80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,65,\
  64,63,62,61,60,59,58,57,56,55,54,53,52,51,50,49,\
  48,47,46,45,44,43,42,41,40,39,38,37,36,35,34,33,\
  32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,\
  16,15,14,13,12,11,10, 9, 8, 7, 6, 5, 4, 3, 2, 1)
#define ARGS_HEAD(a,...) (a)
#define ARGS_TAIL(a,...) (__VA_ARGS__)

#define FOREACH(macro,lmacro,list) FOREACH_(ARGS_COUNT list,macro,lmacro,list)
#define FOREACH_(n,macro,lmacro,list) FOREACH__(n,macro,lmacro,list)
#define FOREACH__(n,macro,lmacro,list) FOREACH_##n(macro,lmacro,list)
#define FOREACH_1(macro,lmacro,list) lmacro list
#define FOREACH_2(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_1(macro,lmacro,ARGS_TAIL list)
#define FOREACH_3(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_2(macro,lmacro,ARGS_TAIL list)
#define FOREACH_4(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_3(macro,lmacro,ARGS_TAIL list)
#define FOREACH_5(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_4(macro,lmacro,ARGS_TAIL list)
#define FOREACH_6(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_5(macro,lmacro,ARGS_TAIL list)
#define FOREACH_7(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_6(macro,lmacro,ARGS_TAIL list)
#define FOREACH_8(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_7(macro,lmacro,ARGS_TAIL list)
#define FOREACH_9(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_8(macro,lmacro,ARGS_TAIL list)
#define FOREACH_10(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_9(macro,lmacro,ARGS_TAIL list)
#define FOREACH_11(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_10(macro,lmacro,ARGS_TAIL list)
#define FOREACH_12(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_11(macro,lmacro,ARGS_TAIL list)
#define FOREACH_13(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_12(macro,lmacro,ARGS_TAIL list)
#define FOREACH_14(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_13(macro,lmacro,ARGS_TAIL list)
#define FOREACH_15(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_14(macro,lmacro,ARGS_TAIL list)
#define FOREACH_16(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_15(macro,lmacro,ARGS_TAIL list)
#define FOREACH_17(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_16(macro,lmacro,ARGS_TAIL list)
#define FOREACH_18(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_17(macro,lmacro,ARGS_TAIL list)
#define FOREACH_19(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_18(macro,lmacro,ARGS_TAIL list)
#define FOREACH_20(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_19(macro,lmacro,ARGS_TAIL list)
#define FOREACH_21(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_20(macro,lmacro,ARGS_TAIL list)
#define FOREACH_22(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_21(macro,lmacro,ARGS_TAIL list)
#define FOREACH_23(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_22(macro,lmacro,ARGS_TAIL list)
#define FOREACH_24(macro,lmacro,list) EXPAND(macro ARGS_HEAD list) FOREACH_23(macro,lmacro,ARGS_TAIL list)

#define MAKE_BYTE(x) static_cast<char>(x),
#define MAKE_LAST_BYTE(x) static_cast<char>(x)
//#define MAKE_BYTES(x) { FOREACH(MAKE_BYTE,MAKE_LAST_BYTE,x) } // uncomment this if you would rather use double bracket ((0x00,0x40,...)) syntax
#define MAKE_BYTES(...) { FOREACH(MAKE_BYTE,MAKE_LAST_BYTE,(__VA_ARGS__)) } 
```

# linq-to-sql - linq to sql-how to deleted a record from datacontext

> ID：15695961
> 
> 赞同：0
> 
> 时间：2013-03-29T01:26:56.273
> 
> 标签：linq-to-sql

I use a static datacontext for CRUD operation.

When I create some records in the gridview, then delete some of them, and then update the database, the deleted records are also inserted.

I guess maybe the deleted records are deleted from the gridview1.datasource, but they are not deleted from the datacontext.

But how can I deal with it?

Thanks very much.

code:

```
public class PurchaseOrderService{
private static readonly BaseEntityDao<PurchaseOrder> ObjDataAccess = new BaseEntityDao<PurchaseOrder>();
    public static void InsertRecord(PurchaseOrder localTable)
        {
            ObjDataAccess.Add(localTable);
        }
}

public class BaseEntityDao<TEntity>
        where TEntity : class, new()
    {
        public void Add(TEntity entity)
        {
            NBDataLinqDataContext.Instance().GetTable<TEntity>().InsertOnSubmit(entity);
            SubmitChanges(NBDataLinqDataContext.Instance());
        }
    }

partial class NBDataLinqDataContext
    {
private static NBDataLinqDataContext instance;
public static NBDataLinqDataContext Instance()
        {
            // Uses "Lazy initialization"
            if (instance == null)
                instance = new NBDataLinqDataContext();
            instance.Log = Console.Out;
            return instance;
        }
} 
```

winform code:

```
private void btnConfirm_Click(object sender, EventArgs e)
        {
var po = new PurchaseOrder();
foreach (PurchaseOrderDetail pd in _list)
                        {
                            po.PurchaseOrderDetail.Add(pd);
                        }
PurchaseOrderService.InsertRecord(po);
} 
```

# c++ - 错误 C2182: '*' : 非法使用类型 'void' c:\boost_1_53_0\boost\smart_ptr\intrusive_ptr.hpp

> ID：15695972
> 
> 赞同：1
> 
> 时间：2013-03-29T01:28:16.517
> 
> 标签：c++, visual-studio-2010, boost, build-error, websocket++

我正在尝试在我的 Windows 7 笔记本电脑上开发一个 websocket++ 服务器以方便使用（还不太好`vi`，不想经常 ftp）。最后我将迁移到 Ubuntu 12.10。

我正在使用 Visual C++ Win32 控制台应用程序项目。

我已经找到`include`了`websocketpp`目录，安装了 boost 1.53.0[你如何在 Windows 上安装 Boost.Build？](https://stackoverflow.com/questions/9388488/how-do-you-install-boost-build-on-windows)，并开发了`include`boost `link`Boost[链接、Visual Studio 和版本控制](https://stackoverflow.com/questions/1335040/boost-linking-visual-studio-version-control)。

我正在尝试`build` `print_server.cpp` [http://www.zaphoyd.com/websocketpp/manual/building-program-websocket](http://www.zaphoyd.com/websocketpp/manual/building-program-websocket)

当我这样做时，我得到`Error 1 error C2182: '*' : illegal use of type 'void' c:\boost_1_53_0\boost\smart_ptr\intrusive_ptr.hpp Line:155 Column:1`

升压代码是（第二行是 155）：

```
T & operator*() const
{
    BOOST_ASSERT( px != 0 );
    return *px;
} 
```

为什么我会收到此错误？我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T02:12:15.940

这是在 VCPP 上使用 boost 进行编译时的一个已知问题。WebSocket++ 0.3 不使用 intrusive_ptr，但它确实使用了 static_pointer_cast。每个 boost 智能指针都实现了自己的 boost::static_pointer_cast 重载。`shared_ptr<void>`在将 a 静态转换为 a时，VCPP 似乎无法选择正确的重载`shared_ptr<connection_ptr>`。Clang 和 GCC 都使用正确的重载，而 VCPP 没有。我有一个小演示程序来演示这个问题，我一直想清理并询问 Stack Overflow...

与此同时，一个简单的解决方法是告诉 WebSocket++ 使用 C++11 而不是提升智能指针。VCPP 与 std::static_pointer_cast / std::shared_ptr 一起正常工作。根据[http://www.zaphoyd.com/websocketpp/manual/reference/cpp11-support](http://www.zaphoyd.com/websocketpp/manual/reference/cpp11-support)在包含 WebSocket++ 标头之前定义`_WEBSOCKETPP_CPP11_MEMORY_`将完成此操作。我已经测试了 VCPP2010 的 C++11`<memory>`实现，它实现了 WebSocket++ 所需的一切。

# java - Using Java to create PDF graphs based on Excel formulas

> ID：15695974
> 
> 赞同：0
> 
> 时间：2013-03-29T01:28:27.500
> 
> 标签：java, excel, pdf, graph, processing

Yeah the titles confusing, but heres what im trying to do

1.  Obtain 6 .txt files in Java (more or less depending on what i need)
2.  Put them into a excel document cells and allow a graph to sort the data (without bringing up the excel window, if possible)
3.  Create a single-page PDF using the graph created in the excel document
4.  Open PDF Viewer and show the PDF.

I have no idea how to do any of this. Im good in basic Java so i can do #1 for the .txt file processing and how to insert data into cells, but once i have to create the graph I get lost.

Dont be afraid to post anything if you dont know every single step, I just want to take it step by step.

Note: The graph be a horizontal line graph, there will be (num of text documents) # of "Series" and every series has about 10 pieces of data

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:56:57.820

我会看一下 Apache POI 项目，这是一个用于读取和写入 Microsoft 文档的 API。[这是](http://poi.apache.org/spreadsheet/index.html)它对 Excel 的支持的链接。不过，我不知道它是否会对您的图表有所帮助。

然后你可以看看[Apache PDFBox 项目](http://pdfbox.apache.org/)。

# apache - Apache maven：现在支持 Yum 吗？

> ID：15695975
> 
> 赞同：0
> 
> 时间：2013-03-29T01:28:29.443
> 
> 标签：apache, maven, yum

我发现有一段时间，标准的 yum 命令“yum install maven”在各种 linux 版本上都不起作用。

但是现在在 Fedora 18 上，我发现 maven 很容易“安装 yum”。

maven 是否已转向明确支持 yum repos ？

还是安装它的惯用方式仍然是一个简单的下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:21:30.540

Maven 本身不支持 yum 存储库。如果您只是简单地搜索安装，只需使用[下载页面](http://maven.apache.org/download.cgi)。对于可以由 Maven 生成的工件，您可以使用支持 yum 存储库的存储库管理器（Nexus 或 Artifactory，但在商业版本中）。

# java - Android & PHP Encryption / Decryption - Padding problems

> ID：15695977
> 
> 赞同：2
> 
> 时间：2013-03-29T01:28:38.410
> 
> 标签：java, php, android, encryption

Used code on iOS fine and trying to translate code to Android we have the following however seem to have a padding issue, can anyone offer a hand.

Using a MD5 as key

**Java (Android)**

```
public class AES256Cipher {

    public static byte[] ivBytes = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

    public static String AES_Encode(String str, String key) throws java.io.UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {

        byte[] textBytes = str.getBytes("UTF-8");
        AlgorithmParameterSpec ivSpec = new IvParameterSpec(ivBytes);
             SecretKeySpec newKey = new SecretKeySpec(key.getBytes("UTF-8"), "AES");
             Cipher cipher = null;
        cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, newKey, ivSpec);

        return Base64.encodeToString(cipher.doFinal(textBytes), 0);
    }

    public static String AES_Decode(String str, String key) throws java.io.UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {

        byte[] textBytes =Base64.decode(str,0);
        //byte[] textBytes = str.getBytes("UTF-8");
        AlgorithmParameterSpec ivSpec = new IvParameterSpec(ivBytes);
        SecretKeySpec newKey = new SecretKeySpec(key.getBytes("UTF-8"), "AES");
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, newKey, ivSpec);
        return new String(cipher.doFinal(textBytes), "UTF-8");
    }
} 
```

**PHP**

```
<?php
function encrypt ($key, $value)
{                
    $padSize = 16 - (strlen ($value) % 16) ;
    $value = $value . str_repeat (chr ($padSize), $padSize) ;
    $output = mcrypt_encrypt (MCRYPT_RIJNDAEL_128, $key, $value, MCRYPT_MODE_CBC, str_repeat(chr(0),16)) ;                
    return base64_encode ($output) ;        
}

function decrypt ($key, $value)        
{                       
    $value = base64_decode ($value) ;                
    $output = mcrypt_decrypt (MCRYPT_RIJNDAEL_128, $key, $value, MCRYPT_MODE_CBC, str_repeat(chr(0),16)) ;                

    $valueLen = strlen ($output) ;
    if ( $valueLen % 16 > 0 )
        $output = "";

    $padSize = ord ($output{$valueLen - 1}) ;
    if ( ($padSize < 1) or ($padSize > 16) )
        $output = "";                // Check padding.                

    for ($i = 0; $i < $padSize; $i++)
    {
        if ( ord ($output{$valueLen - $i - 1}) != $padSize )
            $output = "";
    }
    $output = substr ($output, 0, $valueLen - $padSize) ;

    return $output;        
} 

?> 
```

The output on Java side works fine however when the code is send to PHP you get an output with remainder which makes us think its a padding issue, any help would be great.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-20T08:46:38.660

我知道这可能为时已晚 4 年，但我想知道我的问题/答案是否有助于解决这个问题：

[Android 和 Java 环境之间的 RSA 加密差异](https://stackoverflow.com/questions/41231733/rsa-encryption-disparity-between-android-and-java-environments)

# jquery - ajax 和 codeigniter 发布 dataString 并接收数组

> ID：15695979
> 
> 赞同：0
> 
> 时间：2013-03-29T01:28:53.677
> 
> 标签：jquery, ajax, codeigniter

我有这个视图，我在表单**contactForm中收集一个名为****MYVAR的键**

 **```
<form class="form-wrapper cf" id="contactForm">
   <input name="MYVAR" type="text" placeholder="DO_IT..." required>
   <button type="submit" id="btn_submit" >  DO IT </button>
</form> 
```

然后在这个视图中，我有一个脚本通过 ajax 将此密钥作为**dataString发送到控制器**

```
<script type="text/javascript">
jQuery(function() {
    jQuery(".btn_submit").click(function() {
    var MYVAR       = jQuery("input#MYVAR").val();
    var dataString  = 'MYVAR='+ MYVAR;
    alert(dataString);
    jQuery.ajax({
        type: "POST",
        url: "<?php echo base_url()?>index.php/do_it/method/",
        data: dataString,
        success: function() {
            jQuery('#successMessage').html("<b><p style='color:#5b5b5b; float:left; margin-top:3px; padding-top:50px;'>success.</p></b><br/><br/>")
            .hide()
            .fadeIn(1500, function() {
            jQuery('#successMessage');
            });
        }
    });
    return false;
    });
});
</script> 
```

在控制器`do_it`内部 **方法**中， 我会读取 var **MYVAR**

```
function method()
{   
  //posted var
  $key = $this->input->post('MYVAR');
  $this->load->model('mine_model');
  //get data according key variable 
  $data['result'] = $this->mine_model->get( array('data' => $MYVAR));
  //encode it? 
  echo json_encode($data); 
  //$this->load->view('view',$data);
} 
```

但是什么都不做...

我错过了什么？

我也不知道如何使用 jQuery 在视图中接收 $data ['result'] 然后在视图中打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T04:31:13.893

一旦尝试此代码

```
jQuery(function() {
    jQuery(".btn_submit").click(function() {
        alert(jQuery("input#MYVAR").val());
        jQuery.ajax({
            type: "POST",
            url: "<?php echo base_url()?>index.php/do_it/method/",
            data: {MYVAR:jQuery("input#MYVAR").val()},
            success: function() {
                jQuery('#successMessage').html("<b><p style='color:#5b5b5b; float:left; margin-top:3px; padding-top:50px;'>success.</p></b><br/><br/>")
                .hide()
                .fadeIn(1500, function() {
                jQuery('#successMessage');
                });
            }
        });
        return false;
    });
}); 
```

在控制器中只需发送这样的数据* *（您已经完成）* *

```
echo json_encode(array('success'=> 'true', 'data' => array(1,2,3))) 
```

但在您看来`success()`需要更改为`success(response)`

你可以使用这样的`json`结果

```
success: function(response) {
    if(response.status){
        jQuery('#successMessage').html("<b><p style='color:#5b5b5b; float:left; margin-top:3px; padding-top:50px;'>success.</p></b><br/><br/>")
        .hide()
        .fadeIn(1500, function() {
        jQuery('#successMessage');
        });

        //response.data[0] gives 1
        //response.data[1] gives 2
        //response.data[2] gives 3
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T04:42:12.930

我有一些代码可以按照您的意愿进行操作：

我的 JS：

```
$(function() {
  $('#contactForm').submit(function() {
    var dataString = $(this).serialize();
    $.ajax({
      type : 'post',
      url  : '<?php echo base_url()?>index.php/do_it/method/',
      data : dataString,
      dataType : 'json',
      success : function(res) {
        console.log(res); // to see the object
        // your code here
      }
    });
    return false;
  });
}); 
```

我的 PHP (CodeIgniter)

```
function method() { 
  $key = $this->input->post('MYVAR');
  $this->load->model('mine_model');
  $data['result'] = $this->mine_model->get( array('data' => $MYVAR));

  // set text compatible IE7, IE8
  header('Content-type: text/plain'); 
  // set json non IE
  header('Content-type: application/json'); 

  echo json_encode($data);
} 
```**

# django - Accessing data from Django model

> ID：15695982
> 
> 赞同：1
> 
> 时间：2013-03-29T01:29:13.737
> 
> 标签：django, django-models, django-database

Let's say I have a model defined as such

```
class BlogPost(Models.Model):
    """ Defines a blog model """
    blog    = models.TextField()
    blog_id = models.AutoField(primary_key=True)
    author  = models.CharField() 
```

I want to define some method that accesses the blog posts of a certain author, say 'john doe'. How would I go about defining a method to access all of the blog posts owned by john doe, and then put their blog_id's into a python list?

```
def selectPostsByUser(user):
""" Implement function to select all object """ 
```

NOTE: please disregard the poor representation of the data fields. They are purely arbitrary, I just put names to remove ambiguity from the example.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:58:13.240

模型.py

```
class BlogPost(Models.Model):
    """ Defines a blog model """
    blog    = models.TextField()
    blog_id = models.AutoField(primary_key=True)
    author  = models.CharField()

    @classmethod
    def selectPostsByUser(cls, user):
        return cls.objects.filter(author=user) 
```

视图.py

```
user = "john doe"
blogs = BlogPost.selectPostsByUser(user) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T01:32:33.927

我希望您的模型中有一个用户外键：

```
def selectPostsByUser(user):
    return self.objects.filter(user__id=user.id).values_list('blog_id', flat=True) 
```

如果您传递给该`selectPostsByUser`方法的用户是作者（和用户模型对象）。然后，您应该将 author 作为模型中的 ForiegnKey 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T01:32:39.390

您的`author`字段应该是[ForeignKey](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey)，而不是`CharField`. 这就是您在 Django 中表示关系的方式。

然后，Django 允许您检索与用户关联的帖子对象：`user.blog_set.all()`. 从那里，提取 ID 是微不足道的。

此外，Django[自动`id`为 objects 提供一个字段](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields)，您不需要定义自己的`blog_id`字段。

* * *

遵循[Django“民意调查”教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)应该会为您提供构建应用程序所需的所有工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T06:34:58.033

直接回答这个问题，假设作者其实是一个‘CharField’。您可以执行以下操作以从“jane doe”获取所有博客文章，然后将所有 ID 放入列表中......

```
posts = BlogPost.objects.filter(author='jane doe')
list = []
for items in posts:
    lists.append(items.blog_id) 
```

# java - Java：将文本文件的内容打印到屏幕上

> ID：15695984
> 
> 赞同：26
> 
> 时间：2013-03-29T01:29:26.847
> 
> 标签：java, text, io, java-7

我有一个名为 的文本文件`foo.txt`，其内容如下：

> 这
> 
> 是
> 
> 文本

我如何在 Java 7 中将这个确切的文件打印到屏幕上？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-29T01:33:49.817

在 Java 7 之前：

```
 BufferedReader br = new BufferedReader(new FileReader("foo.txt"));
 String line;
 while ((line = br.readLine()) != null) {
   System.out.println(line);
 } 
```

*   添加异常处理
*   添加关闭流

从 Java 7 开始，不需要关闭流，因为它实现了`autocloseable`

```
try (BufferedReader br = new BufferedReader(new FileReader("foo.txt"))) {
   String line;
   while ((line = br.readLine()) != null) {
       System.out.println(line);
   }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-18T19:23:16.863

为什么没有人认为值得一提 Scanner？

```
Scanner input = new Scanner(new File("foo.txt"));

while (input.hasNextLine())
{
   System.out.println(input.nextLine());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-16T12:03:23.990

此处的每个示例都显示了使用 FileReader 的解决方案。如果您不需要关心文件编码，这很方便。如果您使用英语以外的其他语言，则编码非常重要。假设您有包含此文本的文件

```
Příliš žluťoučký kůň
úpěl ďábelské ódy 
```

该文件使用 windows-1250 格式。如果你使用 FileReader 你会得到这个结果：

```
P��li� �lu�ou�k� k��
�p�l ��belsk� �dy 
```

因此，在这种情况下，您需要将编码指定为 Cp1250（Windows 东欧），但 FileReader 不允许您这样做。在这种情况下，您应该在 FileInputStream 上使用 InputStreamReader。

**例子：**

```
String encoding = "Cp1250";
File file = new File("foo.txt");

if (file.exists()) {
    try (BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(file), encoding))) {
        String line = null;
        while ((line = br.readLine()) != null) {
            System.out.println(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}
else {
    System.out.println("file doesn't exist");
} 
```

如果您想逐个字符地读取文件字符，请不要使用 BufferedReader。

```
try (InputStreamReader isr = new InputStreamReader(new FileInputStream(file), encoding)) {
    int data = isr.read();
    while (data != -1) {
        System.out.print((char) data);
        data = isr.read();
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-30T01:31:34.473

对于那些刚接触 Java 并想知道为什么 Jiri 的答案不起作用的人，请确保您按照他所说的去做并处理异常，否则它将无法编译。这是最低要求：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class ReadFile {

    public static void main(String args[]) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader("test.txt"));
        for (String line; (line = br.readLine()) != null;) {
            System.out.print(line);
        }
        br.close()
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-11T09:05:38.437

使用 Java 7 的 try-with-resources 可以改进 Jiri 的答案：

```
try (BufferedReader br = new BufferedReader(new FileReader("foo.txt"))) {
   String line = null;
   while ((line = br.readLine()) != null) {
       System.out.println(line);
   }
} 
```

在您选择的地方添加异常处理，无论是在这个`try`地方还是在其他地方。

# java - 小程序不显示任何内容

> ID：15695985
> 
> 赞同：-1
> 
> 时间：2013-03-29T01:29:28.050
> 
> 标签：java, applet

为什么这在 Applet 上没有打印显示任何内容？我已经尝试多次编辑它，但似乎没有任何显示。有谁知道发生了什么？我试着画画，但效果不佳。任何提示将非常感谢！

```
import java.awt.*;
import java.applet.Applet;
import javax.swing.*;
import java.awt.event.*;
import java.util.Arrays;
import java.util.StringTokenizer;
import java.awt.Color;

public class StartingPoint extends Applet{
    private final int pictureWidth = 1001;  
    private final int pictureHeight = 50;
    private static FormCanvas picture;
    private JPanel panel;
    private JTextField numLights;
    private JTextField whichLight;
    private JTextField howLong;

    public void lightCreator(){
        panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        picture = new FormCanvas();
        panel.add(picture);
        panel.setBackground(Color.BLUE);
        numLights = new JTextField("Enter Number of lights total", 20);
        whichLight = new JTextField("Enter which lights you want off separated by commas", 30);
        howLong = new JTextField("Interval time", 10);
        panel.add(numLights);
        panel.add(whichLight);
        panel.add(howLong);
        int light = Integer.parseInt(numLights.getText());
        String lights = whichLight.getText();
        int lightsOn[] = new int[light];
        StringTokenizer str = new StringTokenizer(lights, ",");
        int n = 0;
        while(str.hasMoreElements()){
            lightsOn[n] = Integer.parseInt((String)str.nextElement());
            n++;
        }
        add(panel);
    }

    class FormCanvas extends Canvas {
        // this class paints the GUI 

        FormCanvas() {
            setSize(pictureWidth, pictureHeight);
            setBackground(Color.blue);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:30:50.913

问题：

*   为什么要扩展 Applet 而不是 JApplet？
*   为什么要混合 Swing 和 AWT 组件（包括 Canvas）？
*   方法在哪里`lightCreator()`调用？
*   如果这是 Applet/JApplet，您的`init()`方法覆盖在哪里？

在尝试创建和显示小程序之前，您是否已阅读小程序教程？如果没有，那是我要开始的第一个地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:12:39.390

改变：

```
public void lightCreator(){ 
```

至：

```
@Override
public void init() { 
```

> 为什么这在 Applet 上没有打印显示任何内容？..有谁知道发生了什么？

正如@Hover 的第 3 条和第 4 条评论中所提到的，该`lightCreator`方法从未在该代码中调用。改用小程序生命周期方法`init()`，它会在小程序第一次加载时被调用一次。

# html - 身体上的 CSS 投影

> ID：15695989
> 
> 赞同：2
> 
> 时间：2013-03-29T01:30:14.350
> 
> 标签：html, css, styling

我通过一起切碎和更改多个主题来构建布局。在该布局上，所有使用此 CSS 触发的内容背后都有一个阴影：

```
body {
-webkit-box-shadow:0px 5px 10px #1c1c1c;
-moz-box-shadow:0px 5px 10px #1c1c1c;
box-shadow:0px 5px 10px #1c1c1c;
} 
```

所以现在我正在自己重建主题，这样我就可以按照我想要的方式构建 div 和 css。最初的设计有一个标题，它的文本向右对齐。对于重建，我为标题做了一个 3 列布局，这样我就可以在左侧添加一张照片，在中间添加一些内容。

我无法在我的新布局中使用上述阴影代码。它不会给我的内容留下阴影。相反，如果我采用下面的代码并将其放入 3 列中的每一列的每个 Div ID 的 CSS 中，它将投下一个阴影......但是阴影溢出到第二列和第三列

```
-webkit-box-shadow:0px 5px 10px #1c1c1c;
-moz-box-shadow:0px 5px 10px #1c1c1c;
box-shadow:0px 5px 10px #1c1c1c; 
```

现在我对 HTML 和 CSS 不是很好，但我正在尽力而为。我试图将 3 cols 放入一个 DIV 并将阴影放到该 div 上，但它仍然不起作用。我尝试将 cols 插入下面代码中***符号的位置

```
 <div id="blah">**************</div> 
```

有人对我缺少什么有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:53:28.303

将阴影应用于外部 div 是正确的想法，但如果您使用 div 来制作内部列，则需要对最后一个元素应用 clearfix。

```
<div id="blah">
   <div class="third">First</div>
   <div class="third">Second</div>
   <div class="third">Third</div>
   <div class="clear"></div>
</div> 
```

与CSS

```
.clear { clear:both; } 
```

这是你想要的效果吗？ [http://jsfiddle.net/LcBUX/3/](http://jsfiddle.net/LcBUX/3/)

# php - php大写括号后的单词

> ID：15695992
> 
> 赞同：6
> 
> 时间：2013-03-29T01:30:38.713
> 
> 标签：php

我正在尝试将 php 字符串中的每个单词大写，但该函数没有检测到紧跟括号的单词。如何使括号后的单词大写？

示例：阿姆哈拉语（埃塞俄比亚语）....阿姆哈拉语（埃塞俄比亚语）

（目前使用 ucwords()，PHP 显示阿姆哈拉语（埃塞俄比亚语））

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T01:35:08.257

这是一个[已知的错误](https://bugs.php.net/bug.php?id=21626)，需要在左括号和第一个字母之间有空格。这是一个解决方法：

```
$var = "amharic (ethiopian)";

echo str_replace('( ', '(', ucwords(str_replace('(', '( ', $var))); 
```

**结果**

```
阿姆哈拉语（埃塞俄比亚）
```

[查看演示](http://codepad.org/dF4gmNAL)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T01:40:53.203

试试这个，我试过了，

```
$text= "amharic (ethiopian)";
echo mb_convert_case($text, MB_CASE_TITLE, "UTF-8"); 
```

> **输出** ：阿姆哈拉语（埃塞俄比亚语）

注意：看起来 PHP 上的 mbstring 功能是要启用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T07:19:18.177

下面的函数用于将带括号的单词转换为括号后的大写

```
 function ucWordWithBracket($edit){
        $new_word = str_replace("(","( ",$edit);
        $temp = ucwords($new_word);
        $new_word = str_replace("( ","(",$temp);
        return $new_word;
    } 
```

ucWordWithBracket（阿姆哈拉语（埃塞俄比亚语））

函数的输出是“阿姆哈拉语（埃塞俄比亚语）”；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T01:36:34.473

您应该能够使用 preg_replace ( [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)`/[A-Z][a-zA-Z]*/` ) 和类似或类似的正则表达式来解决它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T01:37:11.903

我认为问题在于 php 要将空格后面的第一个字符大写，因为括号只是空格后面的一个字符，所以它被认为是单词中的第一个字符必须大写，后面的其他字符被考虑作为这个世界的人物

所以要解决这个问题，我认为你必须在括号和字符之间留出空格，以便 php 可以将括号检测为单个字符而不是单词的开始字符:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T23:41:55.163

对于需要在其他字符（包括破折号、方括号和圆括号）周围加上标题的任何人。您可以将正则表达式与 preg_replace_callback 一起使用来捕获以破折号分隔或以不在字母表中的字符开头的单词。

```
/** Capitalize first letter if string is only one word **/
    $STR = ucwords(strtolower($STR));

/** Correct Title Case for words with non-alphabet charcters ex. Screw-Washer **/
    $STR = preg_replace_callback('/([A-Z]*)([^A-Z]+)([A-Z]+)/i', 
        function ($matches) {
            $return = ucwords(strtolower($matches[1])).$matches[2].ucwords(strtolower($matches[3]));
            return $return;
        }, $STR); 
```

# statistics - 预测算法：时间序列

> ID：15695994
> 
> 赞同：0
> 
> 时间：2013-03-29T01:30:43.633
> 
> 标签：statistics, machine-learning, prediction

可以说，在过去的几个月里，我们一直在销售 1000 种不同的产品。我们每 5 分钟记录一次每个产品的“性能”（即它产生了多少钱）。一天有 288 个 5 分钟的片段。我们的日志如下所示：

```
prod_1 | 2013-03-28 | 1 | 0
prod_1 | 2013-03-28 | 2 | 9.90
prod_1 | 2013-03-28 | 3 | 19.80
prod_1 | 2013-03-28 | 4 | 19.80
...
prod_1 | 2013-03-28 | 287 | 2326.5
prod_1 | 2013-03-28 | 288 | 2326.5 
```

因此，在 3 月 28 日，我们售出了 235 台，`prod_1`我们可以绘制产品全天的进度曲线。每个产品/日期对都是我们独特的对象，即我们不会将销售同一产品的不同日期联系起来。我们对所有产品都有相同的数据。

假设`2013-03-29`我们添加了一个新产品 - `prod_1001`。该产品日志的最后一行内容如下：

```
prod_1001 | 2013-03-29 | 153 | 804,6 
```

**问题：**我们应该使用什么机器算法来预测这个特定产品在一天结束时会产生的收入？

```
prod_1001 | 2013-03-29 | 288 | ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T09:38:27.537

这不是一种算法，但我会就您可能使用的模型类型提出以下建议：

*   一种可能的模型是，每个时间片中都有独立的销售额。将其建模为泊松分布可能是合适的。在此期间产生的钱是单位*销售价格。
*   在这样的模型中，prod_1001 的所有观测值都提供了泊松参数的似然函数。最大似然估计是所有观察到的时间片中的平均单位销售数量。鉴于此估计，您可以预测在某个新时间段内将销售的单位数量
*   要对当天剩余时间进行预测，请将泊松参数乘以当天剩余的时间片数。这为您提供了一天剩余时间内将出售的单位数量的分布。此分布的期望值是泊松参数本身，但您可能对其他量感兴趣。
*   将其乘以单价即可获得您在当天剩余时间里赚到的钱

因此：如果您今天看到 prod_1001 的时间片平均售出 4 个单位，那么您对下一次售出数量的分布是 Poisson(4)。如果产品售价为 4.99 英镑，您在下一个时间片中的预期收入为 19.96 英镑，您赚取超过 8*4.99 英镑 = 39.94 英镑的机会不到 5%，依此类推。如果今天还剩下 50 个时间片，那么您希望今天多赚 50*4*4.99 英镑=998 英镑。

您可能会问如何整合从其他产品中收集的知识：我的直觉是最简单的方法是使用它们来估计泊松参数的[经验贝叶斯](http://en.wikipedia.org/wiki/Empirical_Bayes_method)先验。这意味着根据泊松率估计 Gamma 分布的两个参数，一个简单的标准是最大化其他 1000 个产品的观测值的可能性。鉴于此，您可以对产品 1001 的泊松分布进行贝叶斯推断，这[非常简单](http://en.wikipedia.org/wiki/Poisson_distribution#Bayesian_inference)，因为后验预测分布具有封闭形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:43:51.337

不是专家，我的感觉是这是一个[时间序列](http://en.wikipedia.org/wiki/Time_series)问题，据我所知，Mahout 没有任何特定的时间序列（我提到这一点是因为您将问题标记为 Mahout）。

邮件列表中的这些链接应该为此事提供一些启示：[link1](http://comments.gmane.org/gmane.comp.apache.mahout.user/10760)，[link2](http://mail-archives.apache.org/mod_mbox/mahout-user/201112.mbox/%3CCAD+Emp-Nx2jP8-CXs74Y5BgQ0QmjqPqpz30S0_pAO6KtU=Ljfw@mail.gmail.com%3E)。它们来自 2011 年，但我认为它们的信息仍然适用。

基本要点是 Mahout 没有它，但是您可以实现这样的东西并为项目做出贡献，或者使用更适合 R 等任务的统计软件[（链接）](http://www.r-project.org/)

# java - 将单词的字符更改为星号

> ID：15695997
> 
> 赞同：0
> 
> 时间：2013-03-29T01:30:57.277
> 
> 标签：java, class, methods

这应该更改`randomWord`为所有星号

```
WordHider secretWord = new WordHider();         
secretWord.setSecretWord(randomWord);
System.out.println(secretWord); 
```

以及设置`randomWord`

```
public void setSecretWord(String newSecretWord) {
    secretWord = newSecretWord.toLowerCase();
    if (secretWord.length() > 0) {
        wordMask = HIDE_CHAR;
        for (int i = 1; i < secretWord.length(); i++) {
            wordMask += HIDE_CHAR;
        } 
```

我得到的只是`program3.WordHider@a37368`输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:32:59.023

你得到它是因为这是对象的`WorldHider`默认 toString 方法。如果您希望它打印其他内容，则需要覆盖它。

或者在该类中创建一个打印秘密词的方法。像这样称呼它

```
System.out.println(secretWord.getSecretWord()); 
```

实际的getter方法可能是

```
public String getSecretWord() {
return wordMask;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:37:14.647

您在这里所做的是创建一个新`WordHider`对象，使用该方法设置其属性之一`setSecretWord`，然后打印该*对象*而不是该属性。你的`WordHider`类可能有一个`getSecretWord`or`printSecretWord`方法可以做你想做的事。

如果该方法不存在，您只需要打印`WordHider`'`wordMask`属性。尝试将您的打印语句替换为：

```
 System.out.println(secretWord.wordMask); 
```

如果 wordMask 是私有属性，您可能需要为`WordHider`类编写一个新方法来返回它。