# StackOverflow 问答 14772000-14772999

# mysql - 如果 group by 没有返回值，则显示零

> ID：14772000
> 
> 赞同：0
> 
> 时间：2013-02-08T11:54:58.330
> 
> 标签：mysql, sql

我试图让过去 7 天内注册的用户数量显示在图表上，如果 mysql 返回 0 而不是没有行，那就太好了。目前它只为每一天返回一行，它有一个值

```
SELECT   date(created_at), 
         count(id) 
FROM     user_accts 
WHERE    date(created_at) < NOW() 
AND      date(created_at) > DATE_SUB(NOW(), INTERVAL 7 DAY) 
GROUP BY date(created_at); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:07:05.493

尝试：

```
SELECT DATE_SUB(CURDATE(), INTERVAL i DAY) date_created_at, 
       count(id) 
FROM (SELECT 1 i UNION ALL 
      SELECT 2 UNION ALL 
      SELECT 3 UNION ALL 
      SELECT 4 UNION ALL 
      SELECT 5 UNION ALL 
      SELECT 6 UNION ALL 
      SELECT 7) i
LEFT JOIN user_accts ON  date(created_at) = DATE_SUB(CURDATE(), INTERVAL i DAY)
                   /*AND owner_id = '131'*/
GROUP BY DATE_SUB(CURDATE(), INTERVAL i DAY) 
```

# php - 严格标准警告：使用 PHP 实现单例

> ID：14772003
> 
> 赞同：1
> 
> 时间：2013-02-08T11:55:01.063
> 
> 标签：php, singleton, standards, strict

我使用 Zend 框架为我的 PHP 应用程序创建了一个记录器作为单例。

实现非常简单：

```
class Logger
{
    protected static $_logger;

    private function __construct()
    {
        // initialize logger
        $writer = new Zend_Log_Writer_Stream(LOG_PATH);
        $this->_logger = new Zend_Log($writer);
    }

    public static function getLogger()
    {
        if (null === self::$_logger)
        {
            self::$_logger = new self();
        }        
        return self::$_logger;
    }

    public static function Log($message, $logType)
    {
        if ($logType <= LOG_MAX)
        {
            $logger = self::getLogger();        
            $logger->_logger->log($message, $logType);
        }
    }
} 
```

要在日志中添加条目，我只需调用静态方法： `Logger::Log('message', Zend_Log::ERR);`

记录器按预期工作，但由于我已将我的 PHP 版本升级到*5.4.3*，我收到一个错误：

> 严格标准：在第 28 行的 Z:\Software\PHP\EA Game\application\classes\Logger.php 中将静态属性 Logger::$_logger 作为非静态访问

第 28 行在函数中`__construct()`：`$this->_logger = new Zend_Log($writer);`

我总是可以禁用`E_STRICT`，但这不是一个更好的选择。我想在没有收到严格标准警告的情况下实现单例模式。

如果有人能指出我正确的方向来实现单例模式而不会收到字符串标准警告，我将不胜感激。

**编辑：** 我使用了 jValdrons 的建议并将 $this->_logger 替换为 self::$_logger。我仍然收到严格的标准警告，我将 Log 函数更改为如下：

```
public static function Log($message, $logType)
{
    if ($logType <= LOG_MAX)
    {
        self::getLogger()->log($message, $logType);
    }
} 
```

但现在我有另一个问题。

代码不会抛出严格标准警告，但它不能按预期工作。

我有 2 个单独的记录器，1 个用于应用程序，1 个用于 crons。基本上它只是相同的代码：2个静态变量：

```
protected static $_logger;
protected static $_cronLogger; 
```

构造函数初始化它们：

```
private function __construct()
{
    // initialize all loggers
    $writer = new Zend_Log_Writer_Stream(LOG_PATH);
    self::$_logger = new Zend_Log($writer);

    $writerCron = new Zend_Log_Writer_Stream(CRON_LOG_PATH);
    self::$_cronLogger = new Zend_Log($writerCron);
} 
```

和 2 个方法 GetCronLogger() 和 LogCron()：

```
public static function getCronLogger()
{
if (null === self::$_cronLogger)
    {
    self::$_cronLogger = new self();
}        
return self::$_cronLogger;
}

public static function LogCron($message, $logType)
{
    if ($logType <= CRON_LOG_MAX)
    {
        self::getCronLogger()->log($message, $logType);
    }
} 
```

但现在 self::getCronLogger()->log($message, $logType); 调用我的方法 Log()，而不是 Zend_log->log()，它总是将记录添加到我的主记录器，而不是 crons 记录器。

我是否遗漏了某些东西或以不正确的方式调用某些东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:56:57.333

您正在使用 $this->logger 访问记录器，这不是访问它的静态方式。因为它是一个静态变量，所以你必须使用 self:: 就像你使用 getLogger 一样，所以：

```
private function __construct()
{
    // initialize logger
    $writer = new Zend_Log_Writer_Stream(LOG_PATH);
    self::$_logger = new Zend_Log($writer);
} 
```

# jenkins - linux screen - 仅当它存在时才杀死（詹金斯工作）

> ID：14772007
> 
> 赞同：2
> 
> 时间：2013-02-08T11:55:15.123
> 
> 标签：jenkins, kill, gnu-screen

我正在使用 linux 屏幕配置复杂的 jenkins 作业。要创建一个新屏幕，我运行：

```
screen -md -S jenkins_job 
```

然后进行其他一些工作，最后破坏我运行的现有屏幕：

```
screen -S jenkins_job -X quit 
```

但是在 jenkins 中可能会发生脚本会在两者之间的某个地方失败并立即中止。然后屏幕终止命令将不会执行，屏幕将保持活动状态。因此，在工作开始时，我想确保所有屏幕都被销毁。如果我`screen -S jenkins_job -X quit`在不存在的作业上使用 shell 将返回错误代码，并且 jenkins 脚本也会失败。

有没有办法有条件地销毁屏幕（即如果屏幕存在则销毁屏幕，否则什么都不做）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:59:26.780

您可能希望将终止代码放入`trap`调用中：

```
trap 'screen -S jenkins_job -X quit' QUIT TERM INT EXIT 
```

# java - 从 jsp-form spring 获取地图

> ID：14772009
> 
> 赞同：0
> 
> 时间：2013-02-08T11:55:40.380
> 
> 标签：java, post, spring-mvc

我是 Spring MVC 的新手，我有一个问题。

我正在发送给 FORM **LinkedHashMap**，它显示得很好。

```
model.addAttribute("resultForm", resultForm); 
```

我的jsp的一部分：

```
<c:forEach items="${resultForm}" var="resultMap" varStatus="status">
                        <tr id="tableRow" class="table-row">
                            <td>
                                ${resultMap.key}
                            </td>
                            <td>
                            <select name="resultMap['${resultMap.key}']" class="espa-config-select">
                                <option selected value ="${resultMap.value}">${resultMap.value}</option>
                                <c:forEach items="${mainParams}" var="item2">
                                    <c:if test="${item2.key == resultMap.key}">
                                        <c:forEach items="${item2.value}" var = "q">
                                            <c:if test="${resultMap.value != q}">
                                                <option value="${q}"> ${q} </option>
                                            </c:if>
                                        </c:forEach>
                                    </c:if>
                                </c:forEach>
                            </select>
                            </td>
                        </tr>
                    </c:forEach> 
```

现在我需要把它拿回来

这是控制器的一部分

```
@RequestMapping( value = "espa/update", method = RequestMethod.POST )
    public String save(@ModelAttribute("resultForm") LinkedHashMap<String,String> resultForm) {
        System.out.println("resultMap post "+resultForm.toString());
        if (resultForm!=null){
            //resultForm.put("Port", port);
            espaService.setConfiguration(selectedDevice, resultForm);
            LOG.debug("Saving configuration: {} /nPort{}",resultForm, selectedDevice);

       }

        return "redirect:/espa";
    } 
```

但它是空的！我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:13:17.860

在您的选择中，您使用的是名称“resultMap”。name 属性需要与 Model Attribute 相关联，您称为“resultForm”。

# app-store - 使用托管内容测试应用内购买

> ID：14772016
> 
> 赞同：2
> 
> 时间：2013-02-08T11:56:12.373
> 
> 标签：app-store, in-app-purchase, iap-hosted-content

我们正在向我们的应用添加应用内购买。我在 iTunes Connect 中创建了几个产品，其中大部分都列在应用程序中，除了使用托管内容的产品。

我的问题如下：当我为产品上传托管内容包时，必须审查该包。有没有办法在沙盒模式下进行测试？在我测试之前，我什至不确定我的包是否好用，所以我真的希望每次对包进行小的更改时都不必等待审核。理想情况下，包装只需要在完成并准备出售时进行审查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:32:36.163

没关系，它不需要审查（即使你上传时 Xcode 会这么说）。我错过了显示产品的应用程序屏幕截图，这很奇怪，因为：

a）他们说它只用于审查（那我为什么需要它来测试？） …………

我的解决方案是拍摄一个虚拟屏幕截图，上传它，在应用程序中列出产品，然后对列出的产品进行新的屏幕截图。

# c++ - C++/MFC多重继承调用基类构造函数

> ID：14772018
> 
> 赞同：-3
> 
> 时间：2013-02-08T11:56:18.270
> 
> 标签：c++, visual-c++, mfc

我收到**错误 C2512: 'derived' : no proper default constructor available在****派生**类的构造函数定义中出现错误。我的代码如下所示。我该如何解决这个问题？

```
Class A
{
    int a, int b;
    A(int x, int y)
    {
        sme code....
    }
}

Class B
{
    int a, int b, int c;
    B(int x, int y, int Z)
    {
        sme code....
    }
}

Class derived : public A, public B
{
    derived(int a, int b):A(a, b)
    {

    }

    derived(int a, int b, int c):B(a, b, c)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:59:29.113

问题之一是，在每个派生类的构造函数中，您只将适当的构造函数参数转发给两个基类之一。它们都没有默认构造函数，因此您需要为基类`A`和`B`.

第二个问题是基类的构造函数被隐式声明为`private`，因此基类无法访问它们。你应该`public`或者至少做它们`protected`。

小问题：在类定义之后，你需要放一个分号。此外，声明类的关键字是`class`, not `Class`。

```
class A // <---- Use the "class" keyword
{
public: // <---- Make the constructor accessible to derived classes
     int a, int b; 
     A(int x, int y) 
     { 
         some code.... 
     } 
}; // <---- Don't forget the semicolon

class B // <---- Use the "class" keyword
{
public: // <---- Make the constructor accessible to derived classes
    int a, int b, int c;
    B(int x, int y, int Z)
    {
        sme code....
    }
}; // <---- Don't forget the semicolon

// Use the "class" keyword
class derived : public A, public B
{
    derived(int a, int b) : A(a, b), B(a, b, 0) // <---- for instance
    {

    }

    derived(int a, int b, int c) : B(a, b, c), A(a, b) // <---- for instance
    {

    }
};  // <---- Don't forget the semicolon 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:59:17.933

A 类和 B 类都没有默认构造函数，您需要在派生构造函数中显式初始化 A 和 B 构造函数。您未能在每个派生构造函数中初始化 A 或 B 构造函数：

```
derived(int a, int b):A(a, b), B(a, b, 0) 
                               ^^^
{
}

derived(int a, int b, int c):A(a, b), B(a, b, c)
                             ^^^
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:00:03.307

您的第一个派生 ctor 调用 A 的 ctor 而不是 B 的 ctor，因此编译器尝试调用 B 的默认构造函数，该构造函数不存在。

第二个派生的ctor也是一样的，但是切换A和B。

解决方案：为 A 和 B 指定默认 ctor。

# xhtml - SVG 未在 IE 10 中使用 Doctype HTML 4 呈现

> ID：14772026
> 
> 赞同：4
> 
> 时间：2013-02-08T11:56:48.160
> 
> 标签：xhtml, svg, doctype, internet-explorer-10, html4

```
<%@ Page Language="C#" .. %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>
<body>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <circle cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red" />
</svg> 
 </body>
</html> 
```

/*上面的代码不起作用。没有得到任何输出。如果将第二行的 Doctype 替换如下，它可以工作。

< !DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//EN" " [http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd](http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd) ">

任何人都可以帮助我理解关键区别是什么？*/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T21:26:20.380

关键的区别在于

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >`

导致浏览器使用怪癖模式。**IE 在quirks**模式下不支持 SVG 。

然而

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`

导致浏览器处于**几乎标准**模式。

您可以将您的 doctype 转换为一种可以非常轻松地在 IE9 中呈现 SVG 的类型，只需添加一个系统标识符，如下所示：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

我不知道这是否适用于 IE10，但如果 IE10 遵循 HTML5 doctype 解析规则，即使是上面的 doctype 也会导致**quirks**模式，因此可能导致 SVG 无法呈现。

HTML 4.0 在 13 年前的 1999 年被 HTML 4.01 取代为 W3C 推荐，因此您应该使用的绝对最小文档类型是

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

就像您提到的 XHTML doctype 一样，这将导致HTML5 兼容浏览器中的**几乎标准模式。**但那是为人们从 HTML 3.2 转换他们的网站而设计的。

更好的是确保您的站点在**标准**模式下工作。您可以通过使用 HTML 4.01 严格的文档类型来做到这一点，例如

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">`

这是当前的 W3C 建议，但要记住的时间仍然有点长。将浏览器置于**标准**模式的最短字符串是

`<!DOCTYPE HTML>`

这就是为什么选择它用于 HTML5 和更高版本的文档的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:07:06.613

标准的 html 5 文档类型是

`<!DOCTYPE html>`

你应该使用它。

IE 9/10 将只显示[html 5 文档](http://msdn.microsoft.com/en-gb/ie/ff468705.aspx#_Web_standards_support)和 xhtml 文档的 SVG。您的替代文档类型将内容标记为 xhtml，这就是它起作用的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T19:16:48.277

两件事情：

1.  确保您的 Web 服务器使用正确的 mime 类型为您的 SVG 文件提供服务：“image/svg+xml”。我在旧版本的 Lighttpd 上遇到了这个问题。

2.  您可以通过添加 X-UA-Compatible Meta 标签来覆盖 IE 的呈现模式：

    < meta http-equiv="X-UA-Compatible" content="IE=edge" />

这将强制 IE 进入标准模式，同时保留旧的文档类型。这不是最佳实践，但似乎适用于 IE10。

# c# - HttpClient 设置 Content-Transfer-Encoding 标头

> ID：14772032
> 
> 赞同：2
> 
> 时间：2013-02-08T11:57:03.923
> 
> 标签：c#, httpclient

我要使用的 REST-API 需要在多部分表单数据内容的每个部分上设置标头“内容传输编码”。

我还没有找到设置此标头的选项。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-31T07:28:57.250

[http://www.w3.org/Protocols/rfc1341/5_Content-Transfer-Encoding.html](http://www.w3.org/Protocols/rfc1341/5_Content-Transfer-Encoding.html)显示以下常用值：“BASE64”/“QUOTED-PRINTABLE”/“8BIT”/“7BIT”/“BINARY”/x -令牌

在 C# 中可以按以下方式设置：

```
var client = new System.Net.Http.HttpClient();
client.DefaultRequestHeaders.TransferEncoding.Add(new TransferCodingHeaderValue("BASE64")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-13T02:41:00.100

您还可以使用[Add(string,string)](https://msdn.microsoft.com/en-us/library/hh158900(v=vs.118).aspx)将您喜欢的任何自定义标头添加到 HttpContentHeaders 实例。

例如

```
string upload_file_path = @"C:\file_to_upload.bin";
var stream_content = new StreamContent(new FileStream(upload_file_path, FileMode.Open, FileAccess.Read));
stream_content.Headers.Add("Content-Transfer-Encoding", "binary"); 
```

# asp.net-mvc - ASP.Net MVC 4 通用主要困难

> ID：14772034
> 
> 赞同：17
> 
> 时间：2013-02-08T11:57:05.603
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, authorization

我正在开发一个**ASP.Net MVC 4** Web 应用程序。以前我的 MVC 应用程序是使用**MVC 3**开发的，而对于这个新的**MVC 4**应用程序，我刚刚从以前的应用程序中复制/重用了我的**身份验证和授权代码。**

当用户登录我的网站时，我会执行以下操作

**帐户控制器**

```
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        User user = _userService.GetUser(model.Email.Trim());

        //Create Pipe Delimited string to store UserID and Role(s)
        var userData = user.ApplicantID.ToString();

        foreach (var role in user.UserRoles)
        {
            userData = userData + "|" + role.description;
        }

        _formAuthService.SignIn(user.ApplicantFName, false, userData);

        return RedirectToAction("Index", "Portfolio");
        }

        return View(model);
    } 
```

**FormsAuthenticationService**

```
public class FormsAuthenticationService : IFormsAuthenticationService
{
    public void SignIn(string userName, bool createPersistentCookie, string UserData)
    {
        if (String.IsNullOrEmpty(userName)) throw new ArgumentException("Value cannot be null or empty.", "userName");

        // Create and tuck away the cookie
        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(1, userName, DateTime.Now, DateTime.Now.AddDays(15), createPersistentCookie, UserData);
        // Encrypt the ticket.
        string encTicket = FormsAuthentication.Encrypt(authTicket);

        //// Create the cookie.
        HttpCookie faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
        HttpContext.Current.Response.Cookies.Add(faCookie);
    }
} 
```

**全球.asax**

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
{

    // Get the authentication cookie
    string cookieName = FormsAuthentication.FormsCookieName;
    HttpCookie authCookie = Context.Request.Cookies[cookieName];

    // If the cookie can't be found, don't issue the ticket
    if (authCookie == null) return;

    // Get the authentication ticket and rebuild the principal
    // & identity
    FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

    string[] UserData = authTicket.UserData.Split(new Char[] { '|' });

    GenericIdentity userIdentity = new GenericIdentity(authTicket.Name);
    GenericPrincipal userPrincipal = new GenericPrincipal(userIdentity, UserData);
    Context.User = userPrincipal;

} 
```

此代码在我以前的 MVC 3 应用程序中运行良好，但在此 MVC 4 应用程序中，在 Razor 视图中，以下代码似乎没有访问**IsInRole**属性来执行角色检查

```
@if (HttpContext.Current.User.IsInRole("Applicant"))
{
    <p>text</text>
} 
```

同样，这在我的 MVC 3 应用程序中运行良好。

有人对为什么这不适用于我的 MVC 4 应用程序有任何想法或建议吗？

任何帮助深表感谢。

谢谢。

**额外信息**

我的 MVC 4 应用程序正在使用 .Net Framework 4.0

下面的屏幕截图显示了分配给**Context.User的我的****通用主体**。您可以看到对于这个用户，**m_roles**包含两个字符串，**用户 ID** (100170) 和他们的**角色**（申请人）。但是由于某种原因，在我的**MVC 4** Razor 视图中无法访问或看到**IsInRoles**，但是，它可以在我相同的**MVC 3** Razor 视图中访问或查看。 **************![在此处输入图像描述](../Images/c0ae9395a72ce029dd86bc3ab1172e68.png)**************

 ******* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-11T11:16:10.200

乡亲

我终于解决了这个问题。创建新的 ASP.NET MVC 4 应用程序时，默认情况下会启用**SimpleMembershipProvider 。**在这种情况下，我不想使用**SimpleMembershipProvider**，但是，我需要在我的 web 配置中使用以下行禁用它

```
<appSettings>
    <add key="enableSimpleMembership" value="false" />
</appSettings> 
```

我对**User.IsInRole**的调用现在效果很好。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T12:55:16.077

在 MVC 4 中，您可以访问`User`from `WebPageRenderingBase`，因此在 razor 语法中，您可以直接访问`User`实例：

```
@if (Request.IsAuthenticated && User.IsInRole("Applicant"))
{
    <p>text</p>
} 
```

我看到您正在手动创建一个`FormsAuthenticationTicket`和一个。`HttpCookie`FormsAuthentication 类将使用[`SetAuthCookie(string, bool[, string])`](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx). 从这个意义上说，您的身份验证服务可以简化为：

```
public class FormsAuthenticationService : IFormsAuthenticationService
{
    public void SignIn(string userName, bool createPersistentCookie, string UserData)
    {
        if (String.IsNullOrEmpty(userName)) throw new ArgumentException("Value cannot be null or empty.", "userName");

        FormsAuthentication.SetAuthCookie(userName, createPersistentCookie);
    }
} 
```

事实证明，您还需要更改`Application_AuthenticateRequest`为`Application_OnPostAuthenticateRequest`：

```
protected void Application_OnPostAuthenticateRequest(Object sender, EventArgs e) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T20:23:06.413

在 MVC 4 **HttpContext.Current.User**中没有公开，所以你不能使用它。我所做的是创建一个自定义 BaseViewPage 并在其中添加以下代码。

```
 public abstract class BaseViewPage : WebViewPage
    {
        public virtual new Principal User
        {
            get { return base.User as Principal; }
        }
    }

    public abstract class BaseViewPage<TModel> : WebViewPage<TModel>
    {
        public virtual new Principal User
        {
            get { return base.User as Principal; }
        }
    } 
```

然后在 Views 文件夹中对*system.web.webPages.razor/pages*部分的**web.config**进行以下更改。

```
<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="WebApp.Views.BaseViewPage">
  <namespaces>
    ...
  </namespaces>
</pages> 
```

希望这能解决您的问题。******

# haskell - Haskell 怎么知道哪个函数可以先运行？

> ID：14772036
> 
> 赞同：2
> 
> 时间：2013-02-08T11:57:07.630
> 
> 标签：haskell, infix-notation

我正在编写一种具有一些功能元素的自定义语言。当我卡在某个地方时，我通常会检查 Haskell 是如何做到的。不过，这一次，我想给 Haskell 举个例子，这个问题有点复杂。

事情是这样的。

假设我们有以下行

```
a . b 
```

在哈斯克尔。显然，我们正在组合两个函数，a 和 b。但是如果函数 a 将另外两个函数作为参数呢？是什么阻止它在 . 和乙？您可以将它括在方括号中，但这不应该有什么不同，因为表达式仍然计算为一个函数，一个前缀一，并且前缀函数优先于中缀函数。

如果你这样做

```
(+) 2 3 * 5 
```

例如，它将输出 25 而不是 17。

基本上我要问的是，当您希望中缀函数在前面的前缀函数之前运行时，Haskell 使用什么机制。

所以。如果“a”是一个以两个函数作为参数的函数。你如何阻止 Haskell 解释

```
a . b 
```

作为“将 . 和 b 应用于函数 a”并将其解释为“组合函数 a 和 b”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T12:28:55.410

如果你不在运算符周围加上括号，它*总是被*解析为中缀；即作为运算符，而不是操作数。
例如，如果你有`f g ? i j`，周围没有括号`?`，所以整个事情都是对`(?)`（解析为`(f g) ? (i j)`，相当于`(?) (f g) (i j)`）的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T12:33:14.553

我认为您正在寻找的是固定性声明（请参阅[The Haskell Report](http://www.haskell.org/onlinereport/decls.html#fixity)）。

它们基本上允许您声明中缀函数的运算符优先级。

例如，有

```
infixl 7 *
infixl 6 + 
```

这意味着`+`和`*`都是左结合中缀运算符。 `*`优先级为 7，而`+`优先级为 6，即`*`绑定比`+`. 在报告页面中，您还可以看到`.`定义为`infixr 9 .`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T13:51:41.517

> 基本上我要问的是，当您希望中缀函数在前面的前缀函数之前运行时，Haskell 使用什么机制。

只是指出一个误解：这纯粹是表达式如何解析的问题。Haskell 编译器不知道（或：不需要知道）是否，在

```
f . g 
```

f、g 和 (.) 是函数，或者其他。

它反过来：

1.  解析器看到`f . g` （或者，语法上等价的`i + j`：）
2.  将其视为`App (App (.) f) g`遵循词汇和语法规则之类的东西。
3.  只有这样，当类型检查器看到`App a b`它的结论时，它`a`必须是一个函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T12:09:40.350

```
(+) 2 3 * 5 
```

被解析为

```
((+) 2 3) * 5 
```

因此

```
(2 + 3) * 5 
```

也就是说，因为函数应用程序（如`(+) 2 3`）首先被评估，在中缀表示法中的函数之前，如`*`.

# regex - 如何修改此正则表达式以要求特定的数字范围并允许空字符串？

> ID：14772040
> 
> 赞同：0
> 
> 时间：2013-02-08T11:57:11.873
> 
> 标签：regex

我有以下正则表达式：

```
^([1-9]){3,5}[1-8]$ 
```

它可以将字符串限制在一定范围内，但现在我需要更改它，以便它也允许空字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:00:09.957

```
^(([1-9]){3,5}[1-8])?$ 
```

`(?:`如果您关心捕获的组，请使用，如果您不关心，则可以删除`[1-9]`. 但是，必须保留整个序列周围的括号，因此`?`量词仍然正确应用（前组零次或一次）。所以稍微短一点（也许更正确）的版本是：

```
^(?:\d{3,5}[1-8])?$ 
```

这将只返回一个匹配项，即作为一个整体的输入字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:03:17.213

这应该有效：

```
^(|([1-9]){3,5}[1-8])$ 
```

# c# - 使用 asp.net MVC WebService 上传视频

> ID：14772043
> 
> 赞同：1
> 
> 时间：2013-02-08T11:57:19.817
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我想使用 asp.net mvc 上传视频文件。我将文件作为 postbody 发送。以后如何使用 web 服务从服务器中检索它。我见过这个[例子](http://www.codeproject.com/Articles/38970/Implementing-HTTP-File-Upload-with-ASP-NET-MVC)。这个[问题](https://stackoverflow.com/questions/14613346/unable-to-upload-video-file-to-asp-net-mvc-3)也帮助我更多地理解它。但我不确定如何获取帖子正文。但不确定这是如何工作的。如何在.net c#中正确地做他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:41:20.627

为了使文件稍后可用，您需要在上传期间将其保存到某个位置 - 保存到数据库或服务器上的文件夹。然后，您的 Web 服务需要知道如何从该位置检索它。

# java - 开销：方法调用与对象创建

> ID：14772045
> 
> 赞同：3
> 
> 时间：2013-02-08T11:57:21.150
> 
> 标签：java

据我了解JVM，调用一个方法（即分配一个新的堆栈帧等）通常应该比创建一个新对象更便宜。

但是，假设方法和对象都声明了相同数量的相同类型的本地/实例变量并将它们实例化为相同的值，我们能否估计两者之间的开销差异通常有多大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:41:21.173

在现代 JVM 中，对象创建是极其快速的操作。例如，请参阅这篇[文章](http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html)。它说：“Sun 估计大约十个机器指令的分配成本”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:00:51.640

即使在那种情况下 method() 需要被脚手架成一个类？？

并且在 JVM 堆中注册类本身包括成员 (method()) meme 分配。

所以，无论如何，对象创建有点偏高。

# python - 可变深度字典的 KeyError 处理

> ID：14772047
> 
> 赞同：0
> 
> 时间：2013-02-08T11:57:25.853
> 
> 标签：python, error-handling

我有一个具有可变深度和不同键的字典列表。

例如：

```
a = [{attr1: 1,
     attr2: {secondary_attr1: 'sometext',
             secondary_attr2: 'sometext',
             complex_attr: {more_attr: 999}}},
     {attr1: 2}] 
```

我正在使用一个类从列表的每个元素中收集我需要的所有信息，但是当然，当我尝试从不在该特定字典中的键中获取项目时，我会得到 KeyError。

以下是我为列表 a 的每个元素创建实例的方式：

```
InsertLine(i['attr1'],i['attr2']['secondary_attr1']) 
```

我试图定义一个简单的函数，但它不起作用：

```
def handle_keyerror(try_key):
    try:
        try_key
        return try_key
    except KeyError: 
        return 'NULL' 
```

我希望我把问题说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:04:18.317

您的函数不起作用，因为它总是会返回 try_key。试试这个。

```
def handle_keyerror(try_key):
    try:
        your_dictionary[try_key]
    except KeyError: 
        return None
    return try_key 
```

无论如何，这样检查它是一个坏主意。

你应该使用`dict.get(key, default=None)`. 如果在 dict 中没有键`key`，那么它将返回默认值。

# asp.net - XSLT 中的 cstyle 是什么？

> ID：14772050
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:57:31.497
> 
> 标签：asp.net, xml, xslt, transform

我的 XSLT 如下所示。aic 是一个命名空间。什么是cstyle？它是内置的 XSLT 元素/函数吗？还是预期输入xml中的元素？

```
<xsl:stylesheet exclude-result-prefixes="aic" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:aic="http://ns.adobe.com/AdobeInCopy/2.0/" >

    <xsl:template match="/">
</xsl:template>

<xsl:template match="aic:cstyle[contains(@name,'bold')]">

</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:05:53.073

它是预期输入 XML 中的一个元素。XSLT`match`属性中的 XPath 通常应用于来自输入 XML 的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:39:27.637

[与我对上一个问题的回答](https://stackoverflow.com/a/14729602/592139)完全相同，`aic:cstyle`是一个选择器，它匹配本地名称为`cstyle`且名称空间 URI 为`http://ns.adobe.com/AdobeInCopy/2.0/`（绑定到元素中的`aic`前缀的 URI `xsl:stylesheet`）的元素。因此

```
<xsl:template match="aic:cstyle[contains(@name,'bold')]"> 
```

是一个模板，将应用于任何具有包含 substring`{http://ns.adobe.com/AdobeInCopy/2.0/}cstyle`的属性的元素。（因此，直接回答您的问题：有问题的表达式将匹配为其编写样式表的输入流中的元素。）`name``bold`

与任何新的编程语言一样，我强烈建议您找到一个体面的教程并通过简单的示例来熟悉该语言的语法和习语，然后再开始尝试解码您拥有的大型复杂 XSLT从别处继承。

# jquery - jQuery 就绪函数区别

> ID：14772052
> 
> 赞同：4
> 
> 时间：2013-02-08T11:57:41.327
> 
> 标签：jquery, function

请帮助我理解以下代码之间的区别：

```
(function() {

//-----some code-----

}()); 
```

和：

```
(function($){

//-----some code-----

})(jQuery); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:59:04.840

第二种称为无冲突模式。这意味着如果其他框架使用该`$`符号来表示除 jQuery 对象之外的其他东西，它不会与它冲突。这样做的原因是因为你指定`$`你的意思是`jQuery`你传递给函数调用的那个！

请记住，Javascript 函数可以像这样立即运行。

```
(function(){

})(); 
```

因此，弹出最后一对括号 [函数调用]`jQuery`会将`jQuery`对象放入立即运行的函数中。

# c# - sql 2012 express 和 vs2012

> ID：14772053
> 
> 赞同：2
> 
> 时间：2013-02-08T11:57:41.967
> 
> 标签：c#, sql

如何将 Visual Studio 2012 连接到本地主机上的 SQL Server 2012 express。我的服务器名称：

```
HACEGAN\SQLEXPRESS 
```

我必须写什么到我的连接字符串，即

```
 SqlConnection con = new SqlConnection("Data Source=localhost\\HACEGAN.SQLEXPRESS;Initial Catalog=Register;User ID=sa;Password=123"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:00:49.830

只需将您的*服务器名称*写入您的`Data Source`部分？

```
Data Source=HACEGAN\SQLEXPRESS;Initial Catalog=Register;User ID=sa;Password=123 
```

改变你的

```
localhost\\HACEGAN.SQLEXPRESS 
```

到

```
HACEGAN\SQLEXPRESS 
```

查看：[Visual Studio 2012 和 MS Sql Server 2012 - 与服务器资源管理器连接](https://stackoverflow.com/questions/12437480/visual-studio-2012-and-ms-sql-server-2012-connect-with-server-explorer)

您可以在*服务器资源管理器*中找到`Visual Studio 2012 -> View -> Server Explorer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:59:22.757

我觉得你直接写

```
Data Source=HACEGAN\\SQLEXPRESS;Initial Catalog=Register;User ID=xxx;Password=xxx 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:23:52.163

您不应该同时指定服务器名和本地主机。非此即彼。

```
 SqlConnection con = new SqlConnection(@"Data Source=HACEGAN\SQLEXPRESS;Initial Catalog=Register;User ID=sa;Password=123"); 
```

请注意 @ 符号以防止转义问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:26:47.087

如果您的 sql server 也是默认实例，则可以使用`.`表示法：

```
Server=.;Database=Register;User Id=sa;Password=123; 
```

如果非默认，请使用`.\SQLExpress`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:35:24.340

这篇文章中的所有其他答案都是正确的，但在你的情况下，你应该写：

```
SqlConnection con = new SqlConnection("Data Source=HACEGAN\\SQLEXPRESS;Initial Catalog=Register;User ID=sa;Password=123"); 
```

# facebook - cakephp facebook api不工作

> ID：14772054
> 
> 赞同：0
> 
> 时间：2013-02-08T11:57:45.703
> 
> 标签：facebook, cakephp

我正在尝试在 cakephp 中进行 facebook 登录。我能够成功登录，但无法检索用户信息。我正在使用来自以下链接的 facebook 插件：

[https://github.com/webtechnick/CakePHP-Facebook-Plugin](https://github.com/webtechnick/CakePHP-Facebook-Plugin)

应用控制器：

```
 class AppController extends Controller {

var $helpers=array('Session','facebook.facebook');

//var $components = array('Session','facebook.Connect');

function beforeFilter()
{
    //$this->set('facebook_user',$this->Connect->user('email'));
} 
```

当我取消注释组件行时，我收到以下错误：

```
call_user_func_array() expects parameter 1 to be a valid callback, class 'Facebook' does not have a method 'getSession' [APP\Plugin\Facebook\Lib\FB.php, line 34] 
```

视图.ctp

```
echo $this->Facebook->login(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T19:59:10.033

你用的是什么蛋糕版本..？

在您的引导程序中：

```
//app/Config/bootstrap.php
CakePlugin::load('Facebook'); 
```

在您的应用控制器中：

```
public $helpers = array('Facebook.Facebook'); 
```

谨记使用大写字母

# ios - 根据位置列表将 MKMapView 缩放到最适合距离缩放级别

> ID：14772056
> 
> 赞同：3
> 
> 时间：2013-02-08T11:57:53.107
> 
> 标签：ios, mkmapview

我有一个要`MKMapView`缩放的中心位置以及一个位置列表（纬度/经度）。我想根据这个位置列表设置缩放级别（距离），以便`MKMapView`在同一时间可以看到尽可能多的这些位置，但具有最小缩放级别（或最大距离），这样我`MKMapView`就不会缩放太多了。

因此，假设我有一个包含 10 个位置的列表，但其中一个位置离我的中心位置太远，如果我在上面显示一个位置，`MKMapView`它将被缩小很多，我如何计算距离参数`MKCoordinateRegionMakeWithDistance`？

我希望我能很好地解释我的问题，我认为我很难解释它。

谢谢索伦_

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:21:57.963

我让它与以下解决方案一起工作。

我使用[大圆距离](http://en.wikipedia.org/wiki/Great-circle_distance)公式来计算我的中心点和所有找到的纬度/经度点之间的距离，如果这个距离大于我的最小距离和我的最大距离并且大于我设置的“最后找到的距离”这个距离就是我的变焦距离。它就像一个魅力，实际上很简单。

这是我的距离计算代码：

```
-(double)distanceBetweenLocations:(CLLocationCoordinate2D)c1 :(CLLocationCoordinate2D)c2 {
    int r = 6371 * 1000;//meters
    double dLat = (c2.latitude - c1.latitude) * M_PI / 180;
    double dLon = (c2.longitude - c1.longitude) * M_PI / 180;
    double lat1 = c1.latitude * M_PI / 180;
    double lat2 = c2.latitude * M_PI / 180;

    double a = sin(dLat / 2) * sin(dLat / 2) + sin(dLon / 2) * sin(dLon / 2) * cos(lat1) * cos(lat2);
    double c = 2 * atan2(sqrt(a), sqrt(1 - a));
    double d = r * c;

    return d;
} 
```

这是我的代码，它使用计算出的距离缩放到我的中心点：

```
-(void)zoomToLocation {
    double MAX_DISTANCE = 10000.0;
    double MIN_DISTANCE = 600.0;

    double zoomDistance = MIN_DISTANCE;

    CLLocationCoordinate2D center;
    center.latitude = self.searchLocationLatitude;
    center.longitude = self.searchLocationLongitude;
    BOOL treaterVisible = NO;
    for (Treater *treater in treaters) {
        CLLocationCoordinate2D c2;
        c2.latitude = treater.latitude;
        c2.longitude = treater.longitude;
        double distance = [self distanceBetweenLocations:center :c2];
        if(distance > zoomDistance && distance < MAX_DISTANCE) {
            zoomDistance = distance;
            treaterVisible = YES;
        }
    }

    if(!treaterVisible) {
        zoomDistance = MAX_DISTANCE;
    }

    CLLocationCoordinate2D location;
    location.latitude = self.searchLocationLatitude;
    location.longitude = self.searchLocationLongitude;

    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(location, zoomDistance, zoomDistance);
    MKCoordinateRegion adjustedRegion = [self.mapView regionThatFits:region];
    [self.mapView setRegion:adjustedRegion];
} 
```

只是如果有人需要类似的东西。

最好的问候
索伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:05:27.703

编辑 didAddAnnotationViews 方法。我希望这是你正在寻找的，

```
-(void) mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
MKMapRect zoomRect = MKMapRectNull;
for (id <MKAnnotation> annotation in mapView.annotations)
{

        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0.1, 0.1);
        if (MKMapRectIsNull(zoomRect)) {
            zoomRect = pointRect;
        } else {
            zoomRect = MKMapRectUnion(zoomRect, pointRect);
        }
}
[mapView setVisibleMapRect:zoomRect animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:08:56.347

DDAnnotation 是显示引脚的自定义类（PlaceMark）

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mapView
{
    if([mapView.annotations count] == 0)
        return;

    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for(DDAnnotation* annotation in mapView.annotations)
    {
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);

    }

    NSLog(@"A%f, B%f, C%f, D%f,", topLeftCoord.latitude, topLeftCoord.longitude, bottomRightCoord.latitude, bottomRightCoord.longitude);

    MKCoordinateRegion region;
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:36:36.950

几天前，我在一本书中读到了您问题的解决方案，我认为它是 Preparata Shamos，计算几何。

不幸的是，解决方案是复杂的：问题是：找到在给定半径内可见的最佳/最大点子集。

如果您的点数不高，少于一万，我会按如下方式进行
0）将所有点添加到当前选定的子集中。
1）遍历所有点insubset，calcualte重力点，计算到重力点的所有距离，它是否适合最大缩放级别所需的距离？是的，准备好了。
2) 不是吗？从子集中删除距离最大的点，然后再次执行步骤 1。这样做直到所有点都在距当前子集中心所需的距离内。

重力点是子集中具有平均 x（或经度）和平均 y（或纬度）坐标的点。

（如果接受请不要点赞）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T08:20:37.210

为此，我们需要找到最小和最大纬度和经度，然后我们需要制作这些纬度和经度之和的平均区域。然后将该区域分配给地图视图并在其上拟合该区域。就是这样。

# c# - 编写新的自定义 mvc4 成员提供程序

> ID：14772057
> 
> 赞同：4
> 
> 时间：2013-02-08T11:57:57.037
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, membership-provider

在我阅读[了这篇](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)关于 mvc4 互联网模板中包含的新成员资格提供程序的博客后，我决定用支持使用 OAuth 和 OpenID 登录的新成员资格提供程序替换我当前的自定义 nhibernate 成员资格提供程序。上述博客中的作者还说，内置的安全性得到了改进，所以对我来说有很多理由。

据我了解，我应该实现 ExtendedMembershipProvider 以创建我自己的休眠自定义实现，并支持除 mssql 之外的 db？

任何想法，链接都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:02:13.397

这个网站[www.codehint.ru](http://www.codehint.ru)是通过实现 ExtendedMembershipProvider 和 oAuth 注册来实现的。这里是用继承自 ExtendedMembershipProvider 的自定义提供程序替换 SimpleMembershipProvider 的俄语文章，用自定义 ExtendedMembershipProvider[替换 SimpleMembership](http://www.codehint.ru//articles/2013-04-16_extendedmembershipprovider_asp.net_mvc_4)

# matlab - matlab中未定义的函数或变量“数字”

> ID：14772061
> 
> 赞同：0
> 
> 时间：2013-02-08T11:58:09.913
> 
> 标签：matlab, multidimensional-array

```
 function parameter=CPTValues(index,sizes,CPTS)
   m=size(index,2);
   n=size(sizes,2);
   for i=m:1
       number=(round(index(1,i)-1))*arraySizes(sizes,n);
       n=n-1;
   end
   parameter=CPTS(round(number));
end

function arraySize=arraySizes(array,length)
   count=1;
    if (length>=2)
        for i=length-1:1
           count=count*round(array(1,i));
        end
        arraySize=round(count);
    else
        arraySize=1;
    end
end 
```

大家好，我尝试在 Matlab 中编写一个函数来引用多维矩阵中的值。当我有这个函数时，我尝试将 index=[2,1,2], sizes=[3,2,2] BP（我已经定义的 3 维矩阵）传递到我的 CPTValues 函数中，我得到错误：

`"Undefined function or variable "number" "`

有没有大神可以帮帮我，万分感谢~

这是 CPT %P_\theta(HD|CH,BP,G) 的示例

```
 HD=zeros(2,2,2,2);
  for i=1:m
      for ch=1:2
          for bp=1:2
              for g=1:2
                for hd=1:2
                    if(Data(i,5)==ch&&Data(i,4)==bp&&Data(i,2)==g&&Data(i,9)==hd)
                        HD(ch,bp,g,hd)=HD(ch,bp,g,hd)+1;
                    end
                end
            end
        end
    end
end
PCBG=zeros(2,2,2);
for i=1:m
    for ch=1:2
        for bp=1:2
            for g=1:2
                if(Data(i,5)==ch&&Data(i,4)==bp&&Data(i,2)==g)
                    PCBG(ch,bp,g)=PCBG(ch,bp,g)+1;
                end
            end
        end
    end
end

for ch=1:2
    for bp=1:2
        for g=1:2
            HD(ch,bp,g,:)=HD(ch,bp,g,:)/PCBG(ch,bp,g);
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:10:30.760

for 来自`i=m:1`，但matlab不明白`i`必须减少而不是增加！将 for 行更改为 for `i=m:-1:1`，它会做到这一点。

编辑2：

它对我来说没问题：

```
%Create random BP of sizes=[3,2,2]
BP=rand(sizes)
BP(:,:,1) =
    0.9572    0.1419
    0.4854    0.4218
    0.8003    0.9157
BP(:,:,2) =
    0.7922    0.0357
    0.9595    0.8491
    0.6557    0.9340
%Set an index to look
index=[2,1,2];
%try the function
CTPValues(index,sizes,BP)
    ans =
        0.9572
%try indexing the matrix directly
BP(2,1,2)
  ans =
    0.9595 
```

# asp.net - ReportViewer 不显示数据。

> ID：14772062
> 
> 赞同：1
> 
> 时间：2013-02-08T11:58:14.710
> 
> 标签：asp.net, report-viewer2010

我想在我的项目中使用报表查看器。我有
1\. CustomerDetails - 存储过程
2\. CustomerDataset.xsd - 我在其中拖放了存储过程。
3\. CustomerReport.rdlc - 我在其中创建了一个表格，其中数据集是 CustomerDetails
4\. CustomerReportViewer.aspx - CustomerReoprt.rdlc 被绑定在其中。

现在，我想从 2 个文本框中传递 2 个值“chkeckInDate”和“checkOutDate”，这些值将通过“main.aspx”的使用来填充，我也正在从这个文件调用我的存储过程。

报告查看器正在显示，但内容没有显示（我已经执行了我的存储过程并且它运行良好。）

我该如何解决？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:13:51.443

我不清楚错误在哪里，但我认为您在 page_load 事件下有代码。将代码复制到 button_click 中。

这是我用过的。。

你必须输入这个：

```
Imports Microsoft.Reporting.WinForms 
```

您应该将文本框值作为参数传递。

```
Dim yr As New ReportParameter("param1", TextBox1.Text)
    Try
        Me.your_TableAdapter.Fill(Me.DataSet_name.table_name)
        ReportViewer1.LocalReport.SetParameters(New ReportParameter() {yr})
        Me.ReportViewer1.RefreshReport()
    Catch ex As Exception
        MsgBox("try again")
    End Try 
```

将 page_load 事件中的这两行复制到 button_click 中。

```
Me.your_TableAdapter.Fill(Me.DataSet_name.table_name)
Me.ReportViewer1.RefreshReport() 
```

此外，[看这个](http://www.youtube.com/watch?v=rxwd3h0gNNE)

# javascript - jQuery 源代码中的奇怪代码： var !== var ? x : 是的；

> ID：14772076
> 
> 赞同：49
> 
> 时间：2013-02-08T11:59:01.103
> 
> 标签：javascript, jquery

最近我在 jQuery 源代码中发现了一个奇怪的行（最新版本 1.9.1，Sizzle 包，第 129 行`funescape`函数）：

```
funescape = function( _, escaped ) {
    var high = "0x" + escaped - 0x10000;
    // NaN means non-codepoint
    return high !== high ?            // <--- LINE 129
        escaped :
        // BMP codepoint
        high < 0 ?
            String.fromCharCode( high + 0x10000 ) :
            // Supplemental Plane codepoint (surrogate pair)
            String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
}; 
```

进行比较的原因是什么`high !== high`？看起来`return escaped`永远不会被执行。还是我错过了什么？

**参考：** [jQuery 嘶嘶声](https://github.com/jquery/sizzle/blob/6f936d47773354d63a0b9e90cb0eb3fe9abf955a/src/sizzle.js#L147)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-08T12:12:38.987

事实上，它写在上面的评论中：

> // NaN 表示非代码点

因此，必须首先执行此比较以处理`NaN`JavaScript 中的情况：

`NaN === NaN`返回`false`。

[正如James Wiseman](https://stackoverflow.com/users/144491/james-wiseman)所指出的，了解开发人员为什么使用`high !== high`而不是更清楚的原因也很重要`isNaN(high)`。

它当然是基于性能的。这个[测试](http://jsperf.com/isnanfunc-vs-isnan/3)表明`a !== a`比快**二十倍**`isNaN(a)`。

[zzzzBov](https://stackoverflow.com/users/497418/zzzzbov)也表示`isNaN()`可以覆盖，使用`!==`起来也更便携。

[来自本杰明·格伦鲍姆](https://stackoverflow.com/users/1348195/benjamin-gruenbaum)的更多信息：

> 还值得注意的是，NaN 也不等于其他任何东西，而且在非严格意义上它也不等于其他任何东西

来自[Jan Dvorak](https://stackoverflow.com/users/499214/jan-dvorak)：

> 还要注意`{valueOf:function(){return{}}}`不等于本身

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T12:16:18.660

条件`high !== high`返回 true，当 high 为`NaN`. 我想知道为什么 jQuery 家伙没有使用 much clear`isNaN(high)`函数，但这可能是由于 koopajah 指出的性能原因。

`NaN`( `N`ot- `a`- `N`umber) 表示不能表示为 的结果`Number`。这是一个不确定的数字。

* * *

**为什么 NaN === NaN 返回 false ？**

考虑

```
0/0          = NaN
Math.asin(2) = NaN 
```

你知道那`0/0`是不同的`Math.asin(2)`，那为什么`NaN`要等于`NaN`呢？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-08T12:29:58.483

我在这里捎带了一些评论，但认为这是有价值的信息。

对原始问题的一些评论表明，这种检查 NaN 的方法实际上比`isNaN()`

当与以下替代方案结合使用时，`parseInt` `parseFloat`我们有一种非常快速的方法可以转换为数字并检查其数字状态。

[减零是某种 JavaScript 性能技巧吗？](https://stackoverflow.com/questions/2665984/is-minus-zero-some-sort-of-javascript-performance-trick)

所以而不是

```
function Translated(val) {
    var x = parseFloat(val);
    if (!isNaN(x)) {
        alert("Not a number");
    }
} 
```

我们可以有

```
function WTF(val) {
    var x = val - 0;
    if (x !== x) {
        alert("Not a number");
    }
} 
```

# android - GIT ：所有新分支都在以前的分支下

> ID：14772077
> 
> 赞同：0
> 
> 时间：2013-02-08T11:59:00.153
> 
> 标签：android, git, github, branch

我是 git 新手所以这是我的仓库 [https://github.com/nayak94/nayak-kernel](https://github.com/nayak94/nayak-kernel) 正在开发分支 0.1 现在想尝试一些新功能所以使用“git checkout -b 0.2”创建了一个分支 0.2现在它显示[https://github.com/nayak94/nayak-kernel/branches](https://github.com/nayak94/nayak-kernel/branches) 0.2 与 0.1 合并 有人可以解释这是如何工作的吗，通读许多教程无法理解如何在不合并的情况下创建新分支一个旧的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:14:34.753

当您创建一个新分支时，git 从您所在的当前分支分叉新分支，在您的情况下，它是`0.1`.

如果要从中创建分支`master`，则应切换到 master 并从那里创建分支。

1.  `git checkout master`
2.  `git checkout -b 0.2`

之后，您从分支创建了两个分支 (`0.1`和) 。`0.2``master`

**附带说明：** `git checkout -b branch_name`创建一个分支并切换到该分支。同时`git branch branch_name`创建一个分支但保留在当前分支上。如果您使用了第二个选项，那么您不应该遇到这个问题。

# activemq - ActiveMQ 骆驼消息

> ID：14772082
> 
> 赞同：2
> 
> 时间：2013-02-08T11:59:08.937
> 
> 标签：activemq, apache-camel

我正在尝试使用 activemq 和骆驼部署应用程序，当我对我的 tomcat 服务器进行分层时，我在控制台上收到所有可疑消息，即使在 tye 代理的队列中没有消息，错误消息也是

```
09:56:27.769 [Camel (eventProcessorCamelContext) thread #2 - JmsConsumer[events]] DEBUG o.a.activemq.ActiveMQMessageConsumer - remove: ID:LT-HP-2012907-53495-1360230974137-0:7:1:5, lastDeliveredSequenceId:0
09:56:27.769 [Camel (eventProcessorCamelContext) thread #2 - JmsConsumer[events]] DEBUG org.apache.activemq.ActiveMQSession - ID:LT-HP-xxxxxxxxxx-0:7:1 Transaction Commit :null
09:56:27.769 [Camel (eventProcessorCamelContext) thread #2 - JmsConsumer[events]] DEBUG org.apache.activemq.ActiveMQSession - ID:LT-HP-xxxxxxxx:1 Transaction Rollback
09:56:27.770 [Camel (eventProcessorCamelContext) thread #1 - JmsConsumer[events]] DEBUG o.a.activemq.ActiveMQMessageConsumer - remove: ID:LT-HP-2012907-53495-1360230974137-0:6:1:5, lastDeliveredSequenceId:0
09:56:27.770 [Camel (eventProcessorCamelContext) thread #1 - JmsConsumer[events]] DEBUG org.apache.activemq.ActiveMQSession - ID:LT-HP-xxxxxxxxx:6:1 Transaction Commit :null
09:56:27.770 [Camel (eventProcessorCamelContext) thread #1 - JmsConsumer[events]] DEBUG org.apache.activemq.ActiveMQSession - ID:LT-HP-xxxxxxxxx:6:1 Transaction Rollback 
```

Transaction Commit :null Transaction Rollback *** **正如您在调试消息中看到的，队列上没有消息，我仍然收到调试消息作为 Transaction commit:null 和 Transaction Rollback。是预期的吗？为什么 ActiveMQ 在没有消息时尝试提交 null 这是预期的还是我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:48:34.443

那是详细的日志记录。

Camel 在从 ActiveMQ 读取事务性消息时使用 Spring DMLC。

基本上所做的是这样的（伪代码，过于简化）：

```
begin transaction()
receive()
.. handle message 
commit() 
```

如果这让您感到困扰，请关闭调试日志记录。

# java - HPROF 在尝试查找 Maven 构建内存泄漏时抱怨

> ID：14772084
> 
> 赞同：1
> 
> 时间：2013-02-08T11:59:12.487
> 
> 标签：java, maven, hprof

我有一个 Maven 构建，它似乎偶尔会出现泄漏，导致 Java 进程耗尽 PermGen 内存（编辑），我从 VisualVM 了解到，每当构建新的时，堆和 PermGen 显着增加。现在我想找出泄漏的位置（编辑：而不仅仅是摆脱偶尔的异常）。

似乎标准的方法是让 HPROF 收集数据以进行验尸分析。但是，这对我来说失败了，并且生成的 java.hprof 文件无法被工具正确解析。

我的“mvn.bat”文件看起来像（Windows 7 上的 64 位 JVM）：

```
set JAVA_HOME=c:\Program Files\java\jdk1.7.0_11
C:\Users\TRA\progs\apache-maven-3.0.4\bin\mvn %* 
```

我的 MAVEN_OPTS 看起来像

```
MAVEN_OPTS=-agentlib:hprof=format=b 
```

这是“mvn clean”的结果。

```
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.589s
[INFO] Finished at: Fri Feb 08 12:46:26 CET 2013
[INFO] Final Memory: 8M/154M
[INFO] ------------------------------------------------------------------------
Dumping Java heap ...
HPROF LIST OF ALL FIELDS:
[1] Lsun/reflect/UnsafeFieldAccessorImpl; "field" "Ljava/lang/reflect/Field;"(ty=OBJ) val=[0x00000000,0x500007e0] or [0x00000000,0x500007e0]
[2] Lsun/reflect/UnsafeFieldAccessorImpl; "fieldOffset" "I" (primType=73(I)) val=[0x00000007,0x00000070] or [0x00000007,0x00000070]
[3] Lsun/reflect/UnsafeFieldAccessorImpl; "isFinal" "Z" (primType=90(Z)) val=[0x00000007,0x7ae16501] or [0x00000007,0x7ae16501]
[4] Lsun/reflect/UnsafeStaticFieldAccessorImpl; "base" "Ljava/lang/Object;"(ty=OBJ)
[5] Lsun/reflect/UnsafeQualifiedStaticFieldAccessorImpl; "isReadOnly" "Z" (primType=90(Z))

FOLLOW REFERENCES RETURNED:
[1]: flavor=1, refKind=2, primType=0, object_index=0x500007e0, length=-1, next=0xb0013852
[2]: flavor=2, refKind=2, primType=73, object_index=0x0, length=-1, next=0xb0013851
[3]: flavor=2, refKind=2, primType=90, object_index=0x0, length=-1, next=0xb0013850
[4]: flavor=2, refKind=2, primType=90, object_index=0x0, length=-1, next=0x0

PROBLEM WITH:
[4] Lsun/reflect/UnsafeStaticFieldAccessorImpl; "base" "Ljava/lang/Object;" (primType=0( ), got 90(Z)) val=[0x00000007,0x7ae16501] or [0x00000000,0x00000000]

HPROF ERROR: Trouble with fields and heap data [hprof_reference.c:281]

HPROF LIST OF ALL FIELDS:
[1] Lsun/reflect/UnsafeFieldAccessorImpl; "field" "Ljava/lang/reflect/Field;"(ty=OBJ) val=[0x00000000,0x500007e1] or [0x00000000,0x500007e1]
[2] Lsun/reflect/UnsafeFieldAccessorImpl; "fieldOffset" "I" (primType=73(I)) val=[0x00000007,0x00000074] or [0x00000007,0x00000074]
[3] Lsun/reflect/UnsafeFieldAccessorImpl; "isFinal" "Z" (primType=90(Z)) val=[0x00000007,0x7b2c1001] or [0x00000007,0x7b2c1001]
[4] Lsun/reflect/UnsafeStaticFieldAccessorImpl; "base" "Ljava/lang/Object;"(ty=OBJ)
[5] Lsun/reflect/UnsafeQualifiedStaticFieldAccessorImpl; "isReadOnly" "Z" (primType=90(Z))

FOLLOW REFERENCES RETURNED:
[1]: flavor=1, refKind=2, primType=0, object_index=0x500007e1, length=-1, next=0xb0013836
[2]: flavor=2, refKind=2, primType=73, object_index=0x0, length=-1, next=0xb0013835
[3]: flavor=2, refKind=2, primType=90, object_index=0x0, length=-1, next=0xb0013834
[4]: flavor=2, refKind=2, primType=90, object_index=0x0, length=-1, next=0x0

PROBLEM WITH:
[4] Lsun/reflect/UnsafeStaticFieldAccessorImpl; "base" "Ljava/lang/Object;" (primType=0( ), got 90(Z)) val=[0x00000007,0x7b2c1001] or [0x00000000,0x00000000]

HPROF ERROR: Trouble with fields and heap data [hprof_reference.c:281]

HPROF LIST OF ALL FIELDS:
[1] Lsun/reflect/UnsafeFieldAccessorImpl; "field" "Ljava/lang/reflect/Field;"(ty=OBJ) val=[0x00000000,0x5002f4a1] or [0x00000000,0x5002f4a1]
[2] Lsun/reflect/UnsafeFieldAccessorImpl; "fieldOffset" "I" (primType=73(I)) val=[0x00000007,0x00000070] or [0x00000007,0x00000070]
[3] Lsun/reflect/UnsafeFieldAccessorImpl; "isFinal" "Z" (primType=90(Z)) val=[0x00000007,0x7ae16501] or [0x00000007,0x7ae16501]
[4] Lsun/reflect/UnsafeStaticFieldAccessorImpl; "base" "Ljava/lang/Object;"(ty=OBJ)
[5] Lsun/reflect/UnsafeQualifiedStaticFieldAccessorImpl; "isReadOnly" "Z" (primType=90(Z))

FOLLOW REFERENCES RETURNED:
[1]: flavor=1, refKind=2, primType=0, object_index=0x5002f4a1, length=-1, next=0xb0013a4b
[2]: flavor=2, refKind=2, primType=73, object_index=0x0, length=-1, next=0xb0013a4a
[3]: flavor=2, refKind=2, primType=90, object_index=0x0, length=-1, next=0xb0013a49
[4]: flavor=2, refKind=2, primType=90, object_index=0x0, length=-1, next=0x0 
```

* * *

（并且不断地不断地）。我不熟悉hprof。

从这里继续的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:53:17.027

从 32 位 jvm 切换到 64 位 jvm 的经典问题是 PermGen 异常。

使用 64 位 JVM 时，您需要更大的 PermGen 大小。如果需要，尝试使用类似`MAVEN_OPTS="-XX:MaxPermSize=256m"`或更高的东西。

我个人在使用64 位 jvm 构建大型项目时使用**512m**甚至**1g 。**那些相同的项目需要 32 位 jmvs 的一半。

# mysql - Mysql从一系列中选择不同的值

> ID：14772086
> 
> 赞同：3
> 
> 时间：2013-02-08T11:59:17.023
> 
> 标签：mysql, sql, group-by, distinct

我有一个 mysql 表

```
 Speed   Lat  Lon       TimeStamp
  12      1    22    2012-02-03 00:00:05
  13      2    23    2012-02-03 00:00:10
  0       3    24    2012-02-03 00:00:15
  0       3    24    2012-02-03 00:00:20
  14      4    25    2012-02-03 00:00:25
  0       5    26    2012-02-03 00:00:30
  0       5    26    2012-02-03 00:00:35
  0       5    26    2012-02-03 00:00:40
  5       6    27    2012-02-03 00:00:45
  0       6    27    2012-02-03 00:00:50 
```

我需要选择（所有速度为 != 0 的记录）+（速度 == 0 的一系列记录中的一条记录）。即我会期待类似的东西

```
 Speed  Lat1  Lat2     Timestamp
  12      1    22    2012-02-03 00:00:05
  13      2    23    2012-02-03 00:00:10
  0       3    24    2012-02-03 00:00:15
  14      4    25    2012-02-03 00:00:25
  0       5    26    2012-02-03 00:00:30
  5       6    27    2012-02-03 00:00:45
  0       6    27    2012-02-03 00:00:45 
```

我尝试对不同的列使用 distinct 和 group by.. 不工作.. 请帮我查询..

编辑：

我添加了时间戳字段和一个用于 ORDER BY 的记录，如果我使用带有 Lat、Lon 的 group by，则不会选择最后一条记录。但我需要它。（问题是如果车辆在另一个时间回到相同的纬度和经度，无论它是移动还是空闲）任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:38:03.687

*如果您的速度非零但重复行*（即两行 13、2、23），不确定您想要什么？不考虑以上几点，您可以使用`UNION` [DEMO](http://sqlfiddle.com/#!2/cfc9d7/8)获得预期结果（感谢@echo_me 的提琴）

```
Select Speed , lat as Lat1 , Lon as Lon1 
From Table1 where speed <> 0
UNION
Select Speed , lat as Lat1 , Lon as Lon1 
From Table1 where speed = 0
Order by lat1 
```

***或者***，如果您想要重复的非零记录，您可以`UINON ALL`使用分组零记录[演示](http://sqlfiddle.com/#!2/57d63/2)

```
Select Speed , lat as Lat1 , Lon as Lon1 
From Table1 where speed <> 0
UNION ALL
Select Speed , lat as Lat1 , Lon as Lon1 
From Table1 where speed = 0
Group by speed,lat1,lon1
Order by lat1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:22:57.537

你可以试试这个

```
 SELECT Speed , lat as Lat1 , Lon as Lon1 
   FROM Table1
   GROUP BY Lat 
```

[**SQL 演示在这里**](http://sqlfiddle.com/#!2/cfc9d7/4)

# c - 关于 Visual C++ 编译器的问题

> ID：14772093
> 
> 赞同：-1
> 
> 时间：2013-02-08T11:59:28.957
> 
> 标签：c, visual-c++

我用 TC++ 编译器学习了 C 语言，现在我想使用 Visual C++ 2008 Express 编译器进行 C 数据结构编程。据我所知，在 Visual C++ 下编译的代码会生成可以由 CLR 在运行时处理的中间代码。但本机代码也可以由 VC++ 使用 win32 选项生成。我对么？我还有以下问题：

1.  在我的数据结构书中，有一些程序是控制台程序，但使用**windows.h**头文件。我需要 Visual C++ win32 控制台应用程序（C 程序）中的 windows.h 头文件吗？

2.  我可以在没有 CLR 的情况下创建 Windows 窗体应用程序吗？在 WIN32 模板 (VC++ 2008 Express) 中，没有用于 Windows 窗体应用程序的选项。

3.  许多网站都规定所有 Windows 应用程序都必须包含 windows.h 头文件。如果我编写 win32 控制台程序（C，而不是 C++），那么它也是 Windows 应用程序吗？为什么以及何时使用 windows.h ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:04:20.627

您*不需要*包含`windows.h`控制台应用程序，但如果您不这样做，当然您将无法使用任何 Windows API 函数。但是，没有它们完全可以编写控制台程序。

不依赖 CLR 就无法创建 Windows 窗体应用程序；Forms 是一种 .NET 技术。

`windows.h`如果要访问 Windows API，则必须包括。所有具有窗口 UI 的应用程序都需要这个；大多数控制台应用程序都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:07:44.880

> 在我的数据结构书中，有一些程序是控制台程序但使用头文件。我需要 Visual C++ win32 控制台应用程序（C 程序）中的 windows.h 头文件吗？

`windows.h`建议包含诸如`CreateFile`etc 之类的许多函数，即使它们没有在那里声明。那是 windows/VC++ 约定。

> 我可以在没有 CLR 的情况下创建 Windows 窗体应用程序吗？在 WIN32 模板（VC++ 2008 express）中没有 Windows 窗体应用程序的选项。

也许您可以尝试 MFC，但这似乎已经过时了。

> 许多网站都规定所有的windows应用程序都必须包含windows.h头文件。如果我编写win32控制台程序（C，而不是C++），那么它也是一个windows应用程序吗？为什么以及何时使用 windows.h ？

看#1的答案

# perl - Perl - 未知的行尾字符

> ID：14772094
> 
> 赞同：3
> 
> 时间：2013-02-08T11:59:29.480
> 
> 标签：perl, eol, file-processing

我想逐行读取输入文件，但**该文件有未知结尾字符**。

编辑器`vim`也不知道，它将这个字符表示为 `^A`并立即以换行符开始。对于`perl`. 它试图一次加载所有行，因为它忽略了这些奇怪的行尾字符。

如何将此字符设置为 perl 的行尾？我不想为它使用任何特殊的模块（因为我们严格的系统），我只想定义行`hex`尾的字符（可能在代码中）。

另一种选择是将文件转换为另一个具有良好行尾字符的文件（替换它们）。我可以用一些简单的方法（比如`sed`输入文件）吗？但是一切都需要在 perl 中完成。

有可能的？

现在，我的阅读部分看起来像：

```
open (IN, $in_file);
$event=<IN>;   # read one line 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:05:47.410

您提到的`^A`字符是“标题开始”字符。您可以将特殊的 Perl 变量`$/`设置为该字符。虽然，如果你希望你的代码能够被你之后的人（并使用另一个编辑器）阅读和编辑，我会做这样的事情：

```
use English;

local $INPUT_RECORD_SEPARATOR = "\cA" # 'start of heading' character

while (<>)
{
    chomp; # remove the unwanted 'start of heading' character
    print $_ . "\n";
} 
```

从[Perldoc](http://perldoc.perl.org/perlvar.html#%24INPUT_RECORD_SEPARATOR)：

> $INPUT_RECORD_SEPARATOR
> $/
> 
> 输入记录分隔符，默认为换行符。这影响了 Perl 关于“线”的概念。

更多关于PerlMonks 上的[特殊字符转义](http://www.perlmonks.org/?node=String%20Literals%20in%20Perl)。

哦，如果您愿意，您可以在 VI 中输入“标题开头”字符，**在插入模式下**，按`CTRL`+ `V`，然后按`CTRL`+ `A`。

编辑：`local`根据 Drt 的建议添加

# javascript - 需要复制代码，而是实例化几个对象并将代码保存在一个地方

> ID：14772097
> 
> 赞同：0
> 
> 时间：2013-02-08T11:59:48.840
> 
> 标签：javascript, html, oop

我开发了一些 javascript，它从数组生成动态表，然后允许用户编辑数据。这很完美。

现在我想在同一个 HTML 页面上使用此代码 3 次。目前它取决于两个变量：元数据，它描述了标题格式并且是只读的并且在所有三种情况下都是相同的，以及“数据”，它实际上保存了表的数据。

我认为与其为每个实例拥有三个代码副本，不如拥有一个将所有内容保持在内部并且仅具有“setData”和“getData”方法的对象会更好。

现有代码动态创建 onclick 事件 - 如何让这些事件引用对象函数，而不是全局函数？（即，目前有像'RemoveRow（index）'这样的函数，我假设它是'obj.RemoveRow（index）'。我很想在jquery中这样做，但是唉，我不知道要传入的rowindex那么,除非有人有解决方案.也许将它存储在DOM中的某个地方并以某种方式访问​​它以确定被点击的行？

是否可以传递对数组的引用？如果对象可以操作传入的数组，而不是制作一个副本来处理，然后调用者必须将其复制回自己的数组，那会好得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:21:16.897

所以这是非常原始的代码，只是多个选项之一，但也许你明白了：

**创建一个处理单个表的对象**

```
function TableControl () {
    // dom elements
    this.table = null;
    this.rows = null;
    // values
    this.id = null;
    // create new row
    this.insertRow = function() {
        // some logic
        this.table.append( 'new row goes here' );
    },
    // load table object and rows and stuff
    this._initiate = function() {
        //create object with all passed arguments
        var args = arguments[0] || {};

        // set internal values
        this.id = args.id;

        // get dom elements
        this.table = $('#' + this.id);
        this.rows = this.table.find('tr');
    },
    this._initiate( arguments[0] );
} 
```

**`id`使用每个表的创建该对象的实例**

```
var table_1 = new TableConrol({ id: 'table_1' });
var table_2 = new TableConrol({ id: 'table_2' });
var table_3 = new TableConrol({ id: 'table_3' }); 
```

所以每个表只处理它自己的“范围”内的东西，比如添加新行：

```
table_1.insertRow(); 
```

# ios - 合适的viewcells，设计问题

> ID：14772108
> 
> 赞同：0
> 
> 时间：2013-02-08T12:00:22.983
> 
> 标签：ios, uitableview

我想我不再清醒了......我想在 UItableView 中显示从服务器检索到的数据。为此，我创建了

1.  用于存储从服务器收集的数据元素的包装类。然后将它们全部存储到一个数组中。
2.  一个 UITableViewCell 子类，用于将数据显示到自定义单元格中
3.  一个 Xib 文件，与第 2 点中定义的 UITableViewCell 相关联）

在 cellForRowAtIndexPath: 中，我将 2+3) 的实例出列，并将 1) 的字段关联到 2) 中定义的对应部分。

对我来说，这看起来像很多东西。

但是删除 1) 似乎很困难，因为 dequeueReusableCellWithIdentifier: 管理它自己的对象池，因此在步骤 1 中创建 UITableViewCells 数组实际上没有意义）

删除 3) 可能是可能的，但在 cellForRowAtIndexPath 中设置单元格时会增加额外开销：

有没有人找到一种方法来减少这个班级的人群？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:08:31.940

如果您的单元格不是太复杂，那么您可以通过您正在显示数据的控制器中的代码来创建它。

如果您的单元格具有更高的复杂性，那么实际上没有办法将其缩减。除了 2 个类 + 一个资源文件对于您要完成的工作来说并没有那么多。

# javascript - 如何将两个 json 对象连接在一起？

> ID：14772110
> 
> 赞同：3
> 
> 时间：2013-02-08T12:00:26.703
> 
> 标签：javascript, jquery, html, ajax, json

我的任务是进行用户编辑。我这样做了。但我不能将值作为 json 对象传递。我怎样才能加入两个值。我的第一个对象是

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        }
        else {

                o[this.name] = this.value || '';
        }
    });

    return o;
}; 
```

我的第二个目标是

```
var location = function() {
    var self = this;
    self.country = ko.observable();
    self.state = ko.observable();
};

var map = function() {

    var self = this;
    self.lines = ko.observableArray([new location()]);
    self.save = function() {
        var dataToSave = $.map(self.lines(), function(line) {
            return line.state() ? {
                state: line.state().state,
                country: line.country().country
            } : undefined
        });
        alert("Could now send this to server: " + JSON.stringify(dataToSave));
    };
};

ko.applyBindings(new map());

}); 
```

我想把它连接起来。我试过这个，但我得到了一个错误

```
$.ajax({
        url: '/users/<%=@user.id%>',
        dataType: 'json',
        //async: false,
        //contentType: 'application/json',
        type: 'PUT',
        data: {total_changes: JSON.stringify(dataToSave) + JSON.stringify($("#edit_user_1").serializeObject())},
        //data:JSON.stringify(dataToSave),
        //data:dataToSave,
        success: function(data) {
            alert("Successful");
          },
          failure: function() {
            alert("Unsuccessful");
          }
        }); 
```

当我运行它时，它在终端中显示这样的错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:02:42.977

如果你有 json1 和 json2 对象，你可以这样做：

```
$.extend(json1, json2); 
```

因此，在 json1 中，您将合并两个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:53:45.207

问题是`JSON.stringify(…) + JSON.stringify(…)`。这将创建一个`"{…}{…}"`显然是无效[JSON](http://json.org/)的字符串（这就是您从中获取的`JSON::ParserError`地方）。

我不确定您要完成什么以及您的服务器期望哪种 JSON 结构，但您可以执行类似的操作

```
 …
    contentType: 'application/json',
    data: JSON.stringify( {
        total_changes: dataToSave,
        edits: $("#edit_user_1").serializeObject()
    }),
    … 
```

# javascript - 如何指定在 Facebook 登录对话框中使用的语言

> ID：14772115
> 
> 赞同：2
> 
> 时间：2013-02-08T12:00:43.577
> 
> 标签：javascript, facebook, localization, facebook-javascript-sdk

我正在使用 Javascript SDK for facebook 登录 Facebook 用户：

文档 FB.Login：[链接](http://developers.facebook.com/docs/reference/javascript/FB.login/)

不幸的是，这个对话总是用英语。

FB.Dialog 将触发带有 url 的弹出窗口：

```
https://www.facebook.com/login.php?PARAMETERS 
```

在这里的另一个相关[问题](https://stackoverflow.com/questions/8557509/how-to-change-language-in-facebook-login-page)的帮助下，我发现我可以添加 locale2 参数：

```
https://www.facebook.com/login.php?PARAMETERS&locale2=es_ES 
```

有了这个额外的参数，对话框现在以西班牙语显示。

但我找不到如何将此语言参数传递给 FB.Login 函数，因此它也用于登录对话框。

是否有任何已知功能可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:04:05.633

这可能与您正在使用的 SDK 源有关

来自[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

```
 js.src = "//connect.facebook.net/en_US/all.js"; 
```

**将en_US**更改为您的语言区域设置**es_ES**，这可能会解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:04:51.220

您可以在加载 Facebook SDK 时设置语言环境：

```
 // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_GB/all.js";
        ref.parentNode.insertBefore(js, ref);
    } (document)); 
```

如您所见，在分配给的链接中`js.src`有`en_GB`一部分。如果您想使用当前用户的语言环境加载 SDK，您可以在加载 SDK 之前检查语言环境，然后在此处使用它。

# powershell - 在 Azure 网站中以编程方式运行 PowerShell 脚本

> ID：14772119
> 
> 赞同：1
> 
> 时间：2013-02-08T12:00:50.907
> 
> 标签：powershell, azure-web-app-service

[我想完全按照Sample](http://blogs.msdn.com/b/mvpawardprogram/archive/2011/08/29/mvps-for-exchange-online-calling-exchange-online-powershell-cmdlets-from-c.aspx)的行在 C# 中运行 PS 脚本

这适用于云服务（Web 角色）、标准服务器（禁用执行策略），但不适用于 Azure 网站。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:30:29.780

我不知道有关此问题的任何官方文档，但在[相关论坛](http://social.msdn.microsoft.com/Forums/uk/windowsazurewebsitespreview/threads)上有多个答案，Microsoft 员工在这些论坛上谈论无法/不允许在 Windows Azure 网站中启动外部进程的限制。看

*   [PHP - 警告：exec（）：无法分叉](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/c868b2f6-b604-4cf9-bf54-cacad06c881b)
*   [PDF 生成器在 Azure 网站上失败，但在开发机器上失败](http://social.msdn.microsoft.com/Forums/uk/windowsazurewebsitespreview/thread/5b51ec05-da97-4ea8-a495-98d45224cde4)
*   [推荐的 HTML 到 PDF 生成器，适用于完全信任的 Azure 网站保留模式](http://social.msdn.microsoft.com/Forums/uk/windowsazurewebsitespreview/thread/939df0a0-30c9-4a5d-a44c-95765e1a4db7)

您可能正在尝试使用您的 powershell 脚本来执行此操作。

您可以通过捕获并查看应该与安全策略/权限相关的异常来验证这是否真的是您的问题。

# java - 如何标准化 JSF 中各种组件的 convertnumber 使用？

> ID：14772127
> 
> 赞同：4
> 
> 时间：2013-02-08T12:01:27.960
> 
> 标签：java, jsf, jsf-2, primefaces

在我的项目中，我使用大量 h:outputtext 和 f:convertnumber 将模式应用于我的数字数据。

```
<h:outputText  value="#{stock.price}">
    <f:convertNumber currencySymbol="" groupingUsed="true" maxFractionDigits="2" type="currency" />
</h:outputText> 
```

在需要其他数据时复制和粘贴此模式似乎很容易。但这也是难以管理的；当使用更多时，更改模式似乎需要大量搜索/替换操作。

如何使此模式可重用并在中心位置进行管理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T12:10:02.580

最简单的是创建一个自定义转换器，它扩展了所需的标准转换器，并在其中在构造函数中设置所需的默认值。

```
@FacesConverter("defaultNumberConverter")
public class DefaultNumberConverter extends NumberConverter {

    public DefaultNumberConverter() {
        setCurrencySymbol("");
        setGroupingUsed(true);
        setMaxFractionDigits(2);
        setType("currency");
    }

} 
```

按如下方式使用它：

```
<h:outputText value="#{stock.price}" converter="defaultNumberConverter" /> 
```

# xml - 正则表达式模式：不以“www”开头，除了“admin”

> ID：14772129
> 
> 赞同：0
> 
> 时间：2013-02-08T12:01:44.137
> 
> 标签：xml, regex, web-config

我有一个 web.config 规则。它在一个 web.config 文件中支持多个域盟友。它添加了www。前缀和自动重定向。

```
<rule name="Redirect to WWW" stopProcessing="true"> 
       <match url=".*" /> 
       <conditions logicalGrouping="MatchAll"> 
            <add input="{HTTP_HOST}" pattern="^(www\.)(.*)$" negate="true" />
       </conditions> 
       <action type="Redirect" url="http://www.{HTTP_HOST}/{R:0}" redirectType="Permanent" /> 
     </rule> 
```

但是当域以“admin”子域开头时，我不想重定向。

我怎样才能转换这个正则表达式：^(www.)(.*)$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:09:08.543

首先在使用“.”时要小心。这是一个特殊字符，可以替代“任何字符”。其次，您可以使用 (aa|bb) 创建匹配分支。它的意思是“a”或“b”。

因此这应该工作： ^(www.|admin.)(.*)$

# java - 当 clear() 方法调用抛出 UnsupportedOperationException 时如何清除地图的内容？

> ID：14772132
> 
> 赞同：2
> 
> 时间：2013-02-08T12:01:53.930
> 
> 标签：java, exception, collections

如果我在地图实例上`UnsupportedOperationException`调用方法时不断收到地图内容，如何清空地图内容 ？`clear()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:39:03.847

你不应该。合作对象的契约及其方法有问题。您期望一个可修改的地图，但得到一个不可修改的视图。您应该重新定义合同和/或相应地采用任何实现。如果您无法控制向您传递该地图的那个人，那么它可能有一个原因将其传递给您一个不可修改的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:04:59.400

如果`Map`是一个`UnmodifiableMap`（例如，get from ） ，除了创建一个新的引用并清除它之外，[`Collections.unmodifiableMap()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#unmodifiableMap%28java.util.Map%29)您几乎不能（*并且应该）做任何修改。*

```
Map unmodifiable = Collections.unmodifiableMap(m);
Map newMap = new HashMap(unmodifiable);
newMap.clear();
unmodifiable = newMap; 
```

也就是说，实际上可以修改`UnmodifiableMap`. 事实证明，这[`Collections.UnmodifiableMap`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.UnmodifiableMap)只不过是一个实现`Map`接口的类，并包装了实际的`Map`. 它委托包装`Map`的只读方法，并`UnsupportedOperationException`在其更改映射的方法的实现中抛出 s。可以`Map`通过反射获得包装，并因此对其进行修改。

**免责声明**：考虑到必须非常小心地使用它。如果不可修改的地图是由图书馆或类似机构提供的，它可能会对其性质做出假设，违反合同可能会导致意外/不受欢迎的结果。此外，这可能依赖于可能会在没有通知的情况下更改或版本之间不同的内部结构。

```
// Creates a standard map
Map<String, String> myMap = new HashMap<String, String>();
myMap.put("1", "a");
myMap.put("2", "b");
// Creates an unmodifiableMap. Actually a wrapper for myMap.
Map unmodifiableMap = Collections.unmodifiableMap(myMap);
System.out.println("Size of unmodifiable map is: " + unmodifiableMap.size());
try{
    // Get classes declared in java.util.Collections
    Class[] classes = Collections.class.getDeclaredClasses();
    for(Class cl : classes) {
        // Look for the UnmodifiableMap class
        if("java.util.Collections$UnmodifiableMap".equals(cl.getName())) {
            // The wrapped Map is in an attribute called "m"
            Field field = cl.getDeclaredField("m");
            field.setAccessible(true);
            // Get the wrapped map
            Object obj = field.get(unmodifiableMap);
            Map map = (Map) obj;
            // modify it
            map.clear();
        }
    }
}
catch (Exception e){ System.out.println(); }
System.out.println("Size of unmodifiable map is: " + unmodifiableMap.size()); 
```

（归功于[这篇博文](http://delta-codes.blogspot.com.es/2010/10/modifying-unmodifiable-map.html)）

# c# - Open GL Tao Framework 围绕其轴旋转一组对象

> ID：14772135
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:01:58.257
> 
> 标签：c#, opengl, tao-framework

我正在制作 3d bicicle 和轨道。到目前为止，我绘制了它们并为它们的动作设置了动画。然而，在开始时，整个轨道 + bicicle 围绕视图旋转。就像我在旋转整个东西一样。后来我做了，这样在改变方向时，bicicles可以在它们的轴上旋转。在 popmatrix 和 pushmatrix 的帮助下。现在，当我尝试旋转视图时，轨道和驱动程序不会旋转中心轴而是安装在我的相机周围。我试图将它们放置在 0 坐标旋转并将它们放回去，但它根本不起作用。

```
 Gl.glTranslatef(0, 0, -100);

        Gl.glTranslatef(0, 0, 0);
        Gl.glRotatef(rotate, 0, 1, 0);
        Gl.glTranslatef(0, 0, -100); 
```

在我绘制任何模型之前，我正在使用它。如果我在只有一个模型之间执行它会旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:12:56.910

这似乎有效。不知道为什么。

```
Gl.glTranslatef(0, 0, zoom);
Gl.glRotatef(rotate, 0, 1, 0); 
```

# python - 将 xterm 嵌入到 QWidget 中并与之通信

> ID：14772138
> 
> 赞同：3
> 
> 时间：2013-02-08T12:02:16.723
> 
> 标签：python, qt4, pyqt4, xterm, terminal-emulator

我想将一个嵌入`xterm`小`pyqt4`部件并与之通信。特别是我希望能够打印到它并在其上执行命令（这样它在执行命令后返回到正常的用户提示符，就像普通的 shell 一样）。考虑以下最小示例。我怎样才能让它工作？

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import  sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class embedxterm(QWidget):

    def __init__(self):
        QWidget.__init__(self)
        self.setMinimumWidth(900)
        self.setMinimumHeight(400)
        self.process = QProcess(self)

        self.terminal = QWidget(self)
        self.terminal.setMinimumHeight(300)

        self.cmd1 = QPushButton('Command1',self)
        self.cmd2 = QPushButton('Command2',self)
        self.hello = QPushButton('Print Hello World',self)

        layout = QVBoxLayout(self)

        layoutH = QHBoxLayout(self)

        layoutH.addWidget(self.cmd1)
        layoutH.addWidget(self.cmd2)
        layoutH.addWidget(self.hello)

        layout.addLayout(layoutH)
        layout.addWidget(self.terminal)

        self.process.start(
            'xterm',['-into', str(self.terminal.winId())])

        self.cmd1.clicked.connect(self.Ccmd1)
        self.cmd2.clicked.connect(self.Ccmd2)
        self.hello.clicked.connect(self.Chello)

    def Ccmd1(self):
        self.process.write('ls -l')
        # Should execute ls -l on this terminal

    def Ccmd2(self):
        self.process.write('ping www.google.com')
        # should execute ping www.google.com on this terminal

    def Chello(self):
        self.process.write('Hello World')
        # should just print "Hello World" on this terminal

if __name__ == "__main__":
    app = QApplication(sys.argv)
    main = embedxterm()
    main.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:07:45.913

要将 a 嵌入`xterm`到您的一个窗口中，您应该使用：

> -into windowId 给定一个 X 窗口标识符（一个十进制整数），xterm 会将其顶级 shell 小部件重新设置为该窗口。这用于在其他应用程序中嵌入 xterm。

`xterm`本身与启动的 shell（bash 等）对话。因此，您必须找到一种与启动的 shell 对话的方法。您可以通过标志传递打开`xterm`的文件描述符`-Sccn`：

> 此选项允许 xterm 用作现有程序的输入和输出通道，有时用于专门的应用程序

所以，我认为你必须创建你的 bash、zsh 实例，无论你想将命令发送到什么地方。然后将该子进程的 stdout/stderr fd 连接到您的 xterm 实例，并将标准输入连接到您的主程序，然后多路复用来自 xterm 的输入和您要发送到 bash 的命令（这样它们将被执行并被在 xterm 中显示）。

```
bash ----------------------> xterm
    \--< your.py <----------/ 
```

具有一些类似开关的`urxvt`reveils 手册页：`urxvt`

> -embed windowid
> 告诉 urxvt 将其窗口嵌入到一个已经存在的窗口中，这使得应用程序可以轻松地嵌入终端。[ ... ] 这是一个简短的 Gtk2-perl 片段，说明如何使用此选项（更长的示例在 doc/embed 中）：
> 
> 我的 $rxvt = 新 Gtk2::Socket;
> $rxvt->signal_connect_after (realize => sub { my $xid = $_[0]->window->get_xid;
> system "urxvt -embed $xid &";
> });

和

> -pty-fd 文件描述符
> 告诉 urxvt 不要执行任何命令或创建新的 pty/tty 对，而是使用给定的文件描述符作为 tty 主机。如果您想将 urxvt 作为通用终端仿真器来驱动，而无需在其中运行程序，这将非常有用。
> 
> 这是 perl 中的一个示例，说明了如何使用此选项（更长的示例 > 在 doc/pty-fd 中）：
> 
> 使用 IO::Pty；
> 使用 Fcntl；
> 
> 我的 $pty = 新 IO::Pty;
> fcntl $pty，F_SETFD，0；# 清除关闭执行
> 系统“urxvt -pty-fd”。（文件号 $pty）。"&";
> 关闭 $pty;
> 
> # 现在与 rxvt 通信
> my $slave = $pty->slave;
> while () { print $slave "得到\n" }

要从 python 中打开 PTY，该`pty`模块看起来很有希望： http: [//docs.python.org/2/library/pty.html](http://docs.python.org/2/library/pty.html)

有趣的阅​​读：[http ://sqizit.bartletts.id.au/2011/02/14/pseudo-terminals-in-python/](http://sqizit.bartletts.id.au/2011/02/14/pseudo-terminals-in-python/)

# javascript - 未捕获的类型错误：对象# has no method 'fancybox' in Wordpress site I have the error Uncaught TypeError: Object # has no method 'fancybox' in my JS console on this website 问问题

> ID：14772140
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:02:25.503
> 
> 标签：javascript, jquery, wordpress, fancybox, nomethoderror

I have the error

> Uncaught TypeError: Object # has no method 'fancybox'

in my JS console on this website [http://www.e-fashion-awards.com/](http://www.e-fashion-awards.com/)

As you can see, I include jquery.fancybox.js after jquery.min.js and I include jquery only once (saw in other topics).

Here is the piece of buggy code including the js files includes and the fancybox call :

```
<link rel='stylesheet' id='fancybox-css'  href='http://www.e-fashion-awards.com/wordpress/wp-content/plugins/fancybox-for-wordpress/fancybox/fancybox.css?ver=3.1.2' type='text/css' media='all' />
<script type='text/javascript' src='http://www.e-fashion-awards.com/wordpress/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js?ver=3.1.2'></script>
<script type='text/javascript' src='http://www.e-fashion-awards.com/wordpress/wp-content/plugins/fancybox-for-wordpress/fancybox/jquery.fancybox.js?ver=1.3.4'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.e-fashion-awards.com/wordpress/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.e-fashion-awards.com/wordpress/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='E-Fashion Awards &#8211; Concours Jeunes Créateurs' href='http://www.e-fashion-awards.com/' />
<meta name="generator" content="WordPress 3.1.2" />

<!-- Start Of Script Generated By cforms v11.7.3 [Oliver Seidel | www.deliciousdays.com] -->
<link rel="stylesheet" type="text/css" href="http://www.e-fashion-awards.com/wordpress/wp-content/plugins/cforms/styling/cforms.css" />
<script type="text/javascript" src="http://www.e-fashion-awards.com/wordpress/wp-content/plugins/cforms/js/cforms.js"></script>
<!-- End Of Script Generated By cforms -->

<!-- Fancybox for WordPress v3.0.1 -->
<script type="text/javascript">
jQuery(function(){

jQuery.fn.getTitle = function() { // Copy the title of every IMG tag and add it to its parent A so that fancybox can show titles
    var arr = jQuery("a.fancybox");
    jQuery.each(arr, function() {
        var title = jQuery(this).children("img").attr("title");
        jQuery(this).attr('title',title);
    })
}

// Supported file extensions
var thumbnails = jQuery("a:has(img)").filter( function() { return /(jpe?g|png|gif|bmp)$/i.test(jQuery(this).attr('href')) });

thumbnails.addClass("fancybox").attr("rel","fancybox").getTitle();

jQuery("a.fancybox").fancybox({
    'cyclic': false,
    'autoScale': true,
    'padding': 1,
    'opacity': true,
    'speedIn': 500,
    'speedOut': 500,
    'changeSpeed': 300,
    'overlayShow': true,
    'overlayOpacity': "0.8",
    'overlayColor': "#000000",
    'titleShow': true,
    'titlePosition': 'inside',
    'enableEscapeButton': true,
    'showCloseButton': false,
    'showNavArrows': true,
    'hideOnOverlayClick': true,
    'hideOnContentClick': true,
    'width': 560,
    'height': 340,
    'transitionIn': "fade",
    'transitionOut': "fade",
    'centerOnScroll': true
}); 
```

So I really don't know where my error come from...

Any idea ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:09:55.040

try

```
if (thumbnails.length>0) thumbnails.fancybox(//... 
```

or `$(".fancybox")` if thumbnails is not good enough for fancybox

since in fact i don't see any links to any image on homepage, it could be the reason

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:06:31.853

我看不到你的 js，但这个错误看起来像你这样调用`fancybox`：

```
object.fancybox() 
```

正确的方法是：

```
$(object).fancybox() 
```

# regex - HTML 5 的 24 小时时间正则表达式

> ID：14772142
> 
> 赞同：18
> 
> 时间：2013-02-08T12:02:27.813
> 
> 标签：regex, html

想查询 HTML 5 (HH:MM) 中 24 小时时间格式的可能正则表达式。

**如果可能，请告诉可以在 HTML 5 的 Pattern 属性中使用的正则表达式**

时间预计为 24 小时格式（HH 不超过 23）。

亲切的问候，

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-08T12:04:27.100

我认为这是一种可能的方法：

```
<input type="text" pattern="([01]?[0-9]|2[0-3]):[0-5][0-9]" id="24h"/>
<input type="text" pattern="([01]?[0-9]{1}|2[0-3]{1}):[0-5]{1}[0-9]{1}" id="24h"/> 
```

[http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/](http://www.mkyong.com/regular-expressions/how-to-validate-time-in-24-hours-format-with-regular-expression/)

```
([01]?[0-9]|2[0-3]):[0-5][0-9] 
```

看看这个 jsfiddle：[例子](http://jsfiddle.net/Y6gjt/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-08T12:10:09.980

这是代码：

```
<input type="text" pattern="[0-2]{1}[0-9]{1}:[0-5]{1}[0-9]{1}" /> 
```

它确实允许无效的小时值：24、25、26、27、28、29，如果你想更加正确，你可以这样做：

```
<input type="text" pattern="([0-1]{1}[0-9]{1}|20|21|22|23):[0-5]{1}[0-9]{1}" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-23T17:40:22.430

如果您想强制使用**HH:MM**格式（例如 00:00、23:59）

然后，你可以使用这样的东西：

```
/^([0-1]\d|20|21|22|23):[0-5]\d$/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T17:06:28.067

有点短的正则表达式：

```
(?:[01]|2(?![4-9])){1}\d{1}:[0-5]{1}\d{1} 
```

所以完整：

```
<input type="text" pattern="(?:[01]|2(?![4-9])){1}\d{1}:[0-5]{1}\d{1}" /> 
```

在第一个非捕获组（“（？：）”）中，我们精确匹配一个数字，0、1 或 2，后面没有 4-9（负前瞻“（？！）”）。然后我再匹配一个数字，因为它可以是 0-9 中的任何一个，我们可以使用 \d 快捷方式。然后我们匹配分隔符“：”。然后是 0-5 之间的一位数字和 0-9 之间的一位数字（再次使用“\d”）。如果由于某种原因您还需要匹配 24 小时（有时您会这样做），那么只需调整负前瞻，例如“(?![5-9])”。

# c - c libcurl 管道 HTTP GET 和 PUT

> ID：14772143
> 
> 赞同：0
> 
> 时间：2013-02-08T12:02:40.940
> 
> 标签：c, libcurl

我想对 XCP 中的虚拟主机进行某种迁移。目前我通过使用 HTTP GET 下载文件然后使用 HTTP PUT 将其上传到另一台主机来做到这一点，这里是下载示例

```
 curl = curl_easy_init();
    //Auto escape user password
    password = curl_easy_escape(curl, XEN.user_passwd, 0);
    snprintf(api_req, sizeof(api_req), "http://%s:%s@%s/export?uuid=%s",
             XEN.user_name, password, XEN.host_ip, uuid);
    curl_free(password);
    puts(api_req);
    TASK_LOG(api_req);
    curl_download=TRUE;
    curl_easy_setopt(curl, CURLOPT_URL, api_req);
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, curl_write_func);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, xva_export);
    curl_easy_setopt(curl, CURLOPT_NOPROGRESS, FALSE);
    // Install the callback function
    curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, curl_progress_func);
    //And....go!
    run_progress_bar = TRUE;
    //g_timeout_add_seconds(1, (GSourceFunc)update_progress_bar, 0);
    res = curl_easy_perform(curl); 
```

并上传，如果需要

```
 curl = curl_easy_init();
    //Auto escape user password
    char *password = curl_easy_escape(curl, XEN.user_passwd, 0);
    snprintf(api_req, sizeof(api_req), "http://%s:%s@%s/import",XEN.user_name, password, XEN.host_ip);
    curl_free(password);
    puts(api_req);
    TASK_LOG(api_req);
    curl_upload=TRUE;
    g_timeout_add_seconds(1, (GSourceFunc) update_progress_bar, 0);
    abort_flag = 0;
    curl_easy_setopt(curl, CURLOPT_URL, api_req);
    curl_easy_setopt(curl, CURLOPT_READFUNCTION, export_read_callback);
    curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);
    curl_easy_setopt(curl, CURLOPT_PUT, 1L);
    curl_easy_setopt(curl, CURLOPT_READDATA, xva);
    curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE,(curl_off_t)file_info.st_size);
    curl_easy_setopt(curl, CURLOPT_NOPROGRESS, FALSE);
    // Install the callback function
    curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, curl_progress_func);
    puts("Upload started");
    TASK_LOG("Upload started");
    CURLcode res = curl_easy_perform(curl); 
```

我只是想知道是否可以在不下载的情况下将流量直接从一台机器传输到另一台机器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:58:10.870

您正在使用 curl 在本地下载文件，然后上传。

[为什么不使用scp](http://en.wikipedia.org/wiki/Secure_copy)直接将文件从源复制到目标？

# objective-c - 如何获得正确的日期格式？

> ID：14772145
> 
> 赞同：0
> 
> 时间：2013-02-08T12:03:00.253
> 
> 标签：objective-c, cocoa, nsdateformatter, nsdatepicker

在可可中，我在 GUI 中给出了一个文本 NSDatePicker 和一个披露（用于显示图形日期和时间弹出窗口）。当我选择日期和时间时，在文本字段中，我得到格式正确的日期和时间（dd/MMM/yyyy HH:mm）。但是当我尝试在控制台中获取文本字段值时，我得到了 yyyy-MM-dd hh:mm:ss 0000+。此外，时间减少了 5:30 小时。我想要 dd/MMM/yyyy HH:mm 格式，只有正确的时间。

# xml - XML API 中返回的错误格式

> ID：14772150
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:03:32.700
> 
> 标签：xml, web-services, api

我正在构建一个基于 XML 消息的 API。在它的一部分，接收几个实体并处理它们。

现在，如果其中一个实体出现处理错误，我想继续处理其他实体并为未处理的实体返回错误消息，以便消费者知道哪些实体未处理。

返回这些错误的最佳方法是什么，以便消费者确切地知道哪些实体失败了以及带有哪些错误消息？

这是请求的样子：

```
<entities>
  <entity>
    <title>first</title>
    <description>short text</description>
  </entity>
  <entity>
    <title>second</title>
    <description>second short text</description>
  </entity>
  <entity>
    <title>third</title>
    <description>third short text</description>
  </entity>
</entities> 
```

现在让我们假设第一个和第三个实体产生错误。反应如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:08:33.490

这是我选择的解决方案：

响应将类似于请求，这意味着它将包含相同的实体结构，但只会返回那些产生错误的实体，并且错误将被附加到原始实体节点。

```
<entities>
  <entity>
    <title>first</title>
    <description>short text</description>
  </entity>
  <errors>
    <error>first error</error>
    <error>second error</error>
  </errors>
</entities> 
```

# usb - 使用 libusb 在笔式驱动器上读/写：libusb_bulk_transfer()

> ID：14772152
> 
> 赞同：3
> 
> 时间：2013-02-08T12:03:36.117
> 
> 标签：usb, libusb

[我正在尝试在笔式驱动器](http://en.wikipedia.org/wiki/USB_flash_drive)上执行读写操作。

详细信息：供应商 ID：8564 和产品 ID：1000。它是[Transcend](http://en.wikipedia.org/wiki/Transcend_Information) JetFlash 大容量存储设备。

我很想知道是否可以在笔式驱动器上实现读/写。如果是，那么它是否会按照我在下面提供的代码中尝试的方式发生。

我已经学习了获取设备 ID、产品 ID 和端点地址的方法。这就是我已经实现的。

在这里，设备得到确认和打开。而且，即使界面声称它是成功的。

但是批量传输函数返回 -1。

解释是什么？

```
#include <stdio.h>
#include <sys/types.h>
#include <string.h>
#include </usr/include/libusb-1.0/libusb.h>

#define BULK_EP_OUT     0x82
#define BULK_EP_IN      0x02

int main(void)
{
    int r = 0, e = 0;
    struct libusb_device_handle *handle = NULL;
    struct libusb_device **devs;
    struct libusb_device *dev;
    struct libusb_device_descriptor desc;
    char str1[256], str2[256];

    /* Init libusb */
    r = libusb_init(NULL);
    if (r < 0)
    {
        printf("\nfailed to initialise libusb\n");
        return 1;
    }

    handle = libusb_open_device_with_vid_pid(NULL, 0x8564, 0x1000);
    if(handle == NULL)
    {
        printf("\nError in device opening!");
    }
    else
        printf("\nDevice Opened");

    // Tell libusb to use the CONFIGNUM configuration of the device

    libusb_set_configuration(handle, 1);
    if(libusb_kernel_driver_active(handle, 0) == 1)
    {
        printf("\nKernel Driver Active");
        if(libusb_detach_kernel_driver(handle, 0) == 0)
            printf("\nKernel Driver Detached!");
    }

    e = libusb_claim_interface(handle, 0);
    if(e < 0)
    {
        printf("\nCannot Claim Interface");
    }
    else
        printf("\nClaimed Interface");

      /* Communicate */

    int bytes_read;
    int nbytes = 256;
    unsigned char *my_string, *my_string1;
    int transferred = 0;
    my_string = (unsigned char *) malloc (nbytes + 1);
    my_string1 = (unsigned char *) malloc (nbytes + 1);

    strcpy(my_string, "divesd");
    printf("\nTo be sent : %s", my_string);

    e = libusb_bulk_transfer(handle, BULK_EP_OUT, my_string, bytes_read, &transferred, 5000);
    printf("\nXfer returned with %d", e);
    printf("\nSent %d bytes with string: %s\n", transferred, my_string);

    libusb_bulk_transfer(handle, BULK_EP_IN, my_string1, 256, &transferred, 5000);
    printf("\nXfer returned with %d", e);     //It returns -1... This is an error, I guess.
    printf("\nReceived %d bytes with string: %s\n", transferred, my_string1);

    e = libusb_release_interface(handle, 0);
    libusb_close(handle);
    libusb_exit(NULL);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T14:40:09.940

试试下面给出的代码，它应该可以在[LPC2148](http://www.keil.com/dd/chip/3880.htm)上运行。我已经使用配置为在发生写入（来自用户空间）并且 RTC 开始运行后从 USB 接收中断的 LPC2148 对此进行了测试。

回答您的问题是否涉及读/写内核驱动程序：据我研究，您必须分离内核驱动程序并使用 libusb API 声明接口。虽然我不确定它是否可以在不分离的情况下完成。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <string.h>
#include </usr/local/include/libusb-1.0/libusb.h>

#define BULK_EP_OUT     0x82
#define BULK_EP_IN      0x08

int interface_ref = 0;
int alt_interface, interface_number;

int print_configuration(struct libusb_device_handle *hDevice, struct libusb_config_descriptor *config)
{
    char *data;
    int index;

    data = (char *)malloc(512);
    memset(data, 0, 512);

    index = config->iConfiguration;

    libusb_get_string_descriptor_ascii(hDevice, index, data, 512);

    printf("\nInterface Descriptors: ");
    printf("\n\tNumber of Interfaces: %d", config->bNumInterfaces);
    printf("\n\tLength: %d", config->bLength);
    printf("\n\tDesc_Type: %d", config->bDescriptorType);
    printf("\n\tConfig_index: %d", config->iConfiguration);
    printf("\n\tTotal length: %lu", config->wTotalLength);
    printf("\n\tConfiguration Value: %d", config->bConfigurationValue);
    printf("\n\tConfiguration Attributes: %d", config->bmAttributes);
    printf("\n\tMaxPower(mA): %d\n", config->MaxPower);

    free(data);
    data = NULL;
    return 0;
}

struct libusb_endpoint_descriptor* active_config(struct libusb_device *dev, struct libusb_device_handle *handle)
{
    struct libusb_device_handle *hDevice_req;
    struct libusb_config_descriptor *config;
    struct libusb_endpoint_descriptor *endpoint;
    int altsetting_index, interface_index=0, ret_active;
    int i, ret_print;

    hDevice_req = handle;

    ret_active = libusb_get_active_config_descriptor(dev, &config);
    ret_print = print_configuration(hDevice_req, config);

    for (interface_index=0;interface_index<config->bNumInterfaces;interface_index++)
    {
        const struct libusb_interface *iface = &config->interface[interface_index];
        for (altsetting_index=0; altsetting_index<iface->num_altsetting; altsetting_index++)
        {
            const struct libusb_interface_descriptor *altsetting = &iface->altsetting[altsetting_index];

            int endpoint_index;
            for(endpoint_index=0; endpoint_index<altsetting->bNumEndpoints; endpoint_index++)
            {
                const struct libusb_endpoint_desriptor *ep = &altsetting->endpoint[endpoint_index];
                endpoint = ep;
                alt_interface = altsetting->bAlternateSetting;
                interface_number = altsetting->bInterfaceNumber;
            }

            printf("\nEndPoint Descriptors: ");
            printf("\n\tSize of EndPoint Descriptor: %d", endpoint->bLength);
            printf("\n\tType of Descriptor: %d", endpoint->bDescriptorType);
            printf("\n\tEndpoint Address: 0x0%x", endpoint->bEndpointAddress);
            printf("\n\tMaximum Packet Size: %x", endpoint->wMaxPacketSize);
            printf("\n\tAttributes applied to Endpoint: %d", endpoint->bmAttributes);
            printf("\n\tInterval for Polling for data Tranfer: %d\n", endpoint->bInterval);
        }
    }
    libusb_free_config_descriptor(NULL);
    return endpoint;
}

int main(void)
{
    int r = 1;
    struct libusb_device **devs;
    struct libusb_device_handle *handle = NULL, *hDevice_expected = NULL;
    struct libusb_device *dev, *dev_expected;

    struct libusb_device_descriptor desc;
    struct libusb_endpoint_descriptor *epdesc;
    struct libusb_interface_descriptor *intdesc;

    ssize_t cnt;
    int e = 0, config2;
    int i = 0, index;
    char str1[64], str2[64];
    char found = 0;

    // Init libusb
    r = libusb_init(NULL);
    if(r < 0)
    {
        printf("\nFailed to initialise libusb\n");
        return 1;
    }
    else
        printf("\nInit successful!\n");

    // Get a list of USB devices
    cnt = libusb_get_device_list(NULL, &devs);
    if (cnt < 0)
    {
        printf("\nThere are no USB devices on the bus\n");
        return -1;
    }
    printf("\nDevice count: %d\n-------------------------------\n", cnt);

    while ((dev = devs[i++]) != NULL)
    {
        r = libusb_get_device_descriptor(dev, &desc);
        if (r < 0)
            {
            printf("Failed to get device descriptor\n");
            libusb_free_device_list(devs, 1);
            libusb_close(handle);
            break;
        }

        e = libusb_open(dev, &handle);
        if (e < 0)
        {
            printf("Error opening device\n");
            libusb_free_device_list(devs, 1);
            libusb_close(handle);
            break;
        }

        printf("\nDevice Descriptors: ");
        printf("\n\tVendor ID: %x", desc.idVendor);
        printf("\n\tProduct ID: %x", desc.idProduct);
        printf("\n\tSerial Number: %x", desc.iSerialNumber);
        printf("\n\tSize of Device Descriptor: %d", desc.bLength);
        printf("\n\tType of Descriptor: %d", desc.bDescriptorType);
        printf("\n\tUSB Specification Release Number: %d", desc.bcdUSB);
        printf("\n\tDevice Release Number: %d", desc.bcdDevice);
        printf("\n\tDevice Class: %d", desc.bDeviceClass);
        printf("\n\tDevice Sub-Class: %d", desc.bDeviceSubClass);
        printf("\n\tDevice Protocol: %d", desc.bDeviceProtocol);
        printf("\n\tMax. Packet Size: %d", desc.bMaxPacketSize0);
        printf("\n\tNumber of Configurations: %d\n", desc.bNumConfigurations);

        e = libusb_get_string_descriptor_ascii(handle, desc.iManufacturer, (unsigned char*) str1, sizeof(str1));
        if (e < 0)
        {
        libusb_free_device_list(devs, 1);
            libusb_close(handle);
            break;
        }
        printf("\nManufactured: %s", str1);

        e = libusb_get_string_descriptor_ascii(handle, desc.iProduct, (unsigned char*) str2, sizeof(str2));
        if(e < 0)
        {
        libusb_free_device_list(devs, 1);
            libusb_close(handle);
            break;
        }
        printf("\nProduct: %s", str2);
        printf("\n----------------------------------------");

        if(desc.idVendor == 0xffff && desc.idProduct == 0x4)
        {
           found = 1;
        break;
        }
    }//end of while
    if(found == 0)
    {
        printf("\nDevice NOT found\n");
        libusb_free_device_list(devs, 1);
        libusb_close(handle);
        return 1;
    }
    else
    {
        printf("\nDevice found");
        dev_expected = dev;
        hDevice_expected = handle;
    }

    e = libusb_get_configuration(handle, &config2);
    if(e!=0)
    {
        printf("\n***Error in libusb_get_configuration\n");
        libusb_free_device_list(devs, 1);
        libusb_close(handle);
        return -1;
    }
    printf("\nConfigured value: %d", config2);

    if(config2 != 1)
    {
        libusb_set_configuration(handle, 1);
        if(e!=0)
        {
            printf("Error in libusb_set_configuration\n");
            libusb_free_device_list(devs, 1);
            libusb_close(handle);
            return -1;
        }
        else
            printf("\nDevice is in configured state!");
    }

    libusb_free_device_list(devs, 1);

    if(libusb_kernel_driver_active(handle, 0) == 1)
    {
        printf("\nKernel Driver Active");
        if(libusb_detach_kernel_driver(handle, 0) == 0)
            printf("\nKernel Driver Detached!");
        else
        {
            printf("\nCouldn't detach kernel driver!\n");
            libusb_free_device_list(devs, 1);
            libusb_close(handle);
            return -1;
        }
    }

    e = libusb_claim_interface(handle, 0);
    if(e < 0)
    {
        printf("\nCannot Claim Interface");
        libusb_free_device_list(devs, 1);
        libusb_close(handle);
        return -1;
    }
    else
        printf("\nClaimed Interface\n");

    active_config(dev_expected, hDevice_expected);

    //   Communicate

    char *my_string, *my_string1;
    int transferred = 0;
    int received = 0;
    int length = 0;

    my_string = (char *)malloc(nbytes + 1);
    my_string1 = (char *)malloc(nbytes + 1);

    memset(my_string, '\0', 64);
    memset(my_string1, '\0', 64);

    strcpy(my_string, "Prasad Divesd");
    length = strlen(my_string);

    printf("\nTo be sent: %s", my_string);

    e = libusb_bulk_transfer(handle, BULK_EP_IN, my_string, length, &transferred, 0);
    if(e == 0 && transferred == length)
    {
        printf("\nWrite successful!");
        printf("\nSent %d bytes with string: %s\n", transferred, my_string);
    }
    else
        printf("\nError in write! e = %d and transferred = %d\n", e, transferred);

    sleep(3);
    i = 0;

    for(i = 0; i < length; i++)
    {
        e = libusb_bulk_transfer(handle, BULK_EP_OUT, my_string1, 64, &received, 0);  //64: Max Packet Length
        if(e == 0)
        {
            printf("\nReceived: ");
            printf("%c", my_string1[i]); //Will read a string from LPC2148
            sleep(1);
        }
        else
        {
            printf("\nError in read! e = %d and received = %d\n", e, received);
            return -1;
        }
    }

    e = libusb_release_interface(handle, 0);

    libusb_close(handle);
    libusb_exit(NULL);

    printf("\n");
    return 0;
} 
```

# javascript - Highcharts：多个图表和一个更新功能

> ID：14772153
> 
> 赞同：1
> 
> 时间：2013-02-08T12:03:44.807
> 
> 标签：javascript, highcharts

我似乎无法弄清楚我如何拥有多个图表并使用一个更新功能更新这些图表。
我有一个 HTML 文件，在那个文件中我有这个：

```
<script type="text/javascript" src="highchart/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="highchart/highcharts.js"></script>
<script type="text/javascript" src="highchart/highcharts-more.js"></script>
<script type="text/javascript" src="windspeed.js"></script>
<script type="text/javascript" src="livedata.js"></script> 
```

风速.js：

```
$(function () {
    var windspeed = new Highcharts.Chart({
        chart: {
            renderTo: 'windspeed',
            type: 'gauge',
            plotBackgroundColor: null,
            plotBackgroundImage: null,
            plotBorderWidth: 0,
            plotShadow: false
        }, 
etc.
} 
```

livedata.js：

```
$(function (livedata) {
        setInterval(function() {
        $(function() {
        $.getJSON('livedata.php', function(data) {
            $.each(data, function(key,val) {
            if (key == 'WindSpeed')
            {
            var point = windspeed.series[0].points[0];
                point.update(val);
            }
            });
        });
        })
    },2000)
    }
); 
```

图表弹出但数据未更新，出现此错误：无法获取属性'0'的值：对象为空或未定义
我认为这与livedata.js无法看到风速变量有关，因为它是在不同的范围内。
有人可以告诉我如何让它工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:55:51.710

您无权访问 $(function()) 之外的变量，它们是本地的：

```
$(function () {
    var windspeed = new Highcharts.Chart({
        ...
    });
    var windspeed2 = new Highcharts.Chart({
        ...
    });
    var windspeed3 = new Highcharts.Chart({
        ...
    });
}); 
```

您可以将它们移出此范围：

```
var windspeed, windspeed2, windspeed3;
$(function () {
    windspeed = new Highcharts.Chart({
        ...
    });
    windspeed2 = new Highcharts.Chart({
        ...
    });
    windspeed3 = new Highcharts.Chart({
        ...
    });
}); 
```

所以现在，它们是全局变量，所以你也可以在其他文件中访问它们。

# repository - 在 Gradle 构建中配置多个上传存储库

> ID：14772154
> 
> 赞同：3
> 
> 时间：2013-02-08T12:03:45.447
> 
> 标签：repository, release, gradle

我想将我的工件上传到远程 Nexus 存储库。因此，我在 Nexus 中配置了快照和发布仓库。部署到这两个作品。

现在我想配置我的构建，以便我可以决定要部署在哪个 repo 中：

*   `gradle uploadArchives`应该部署到我的快照仓库
*   `gradle release uploadArchives`应该部署到我的发布仓库

这是我的尝试：

```
apply plugin: 'war'
apply plugin: 'maven'

group = 'testgroup'
version = '2.0.0'
def release = false

repositories {
    mavenCentral()
    mavenLocal()
}

dependencies{ providedCompile 'javax:javaee-api:6.0' }

task release <<{
    release = true;
    println 'releasing!'
}

uploadArchives {
    repositories {

        mavenDeployer {
            repository(url: "http://.../nexus/content/repositories/releases"){
                authentication(userName: "admin", password: "admin123")
            }
            addFilter('lala'){ x, y -> release }
        }
        mavenDeployer {
            repository(url: "http://.../nexus/content/repositories/snapshots"){
                authentication(userName: "admin", password: "admin123")
            }
            addFilter('lala'){ x, y ->!release}
            pom.version = version + '-SNAPSHOT'
        }
    }
} 
```

如果我注释掉两个 mavenDeployer 配置之一，则构建工作，但不是作为一个整体。
任何想法如何在一个构建文件中配置两个目标档案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T08:00:49.090

一种解决方案是添加一个`if-else`语句，根据情况添加两个部署器中的一个。例如：

```
// should defer decision until end of configuration phase
gradle.projectsEvaluated {
    uploadArchives {
        repositories {
            mavenDeployer {
                if (version.endsWith("-SNAPSHOT")) { ... } else { ... }
            }               
        }
    }
} 
```

如果您确实需要根据某个任务是否“存在”来改变配置，您可以基于[`gradle.startParameter.taskNames`](http://gradle.org/docs/current/javadoc/org/gradle/StartParameter.html#getTaskNames%28%29)（但您只会捕获指定为 Gradle 调用的一部分的任务）做出急切的决定，或者使用[`gradle.taskGraph.whenReady`](http://gradle.org/docs/current/javadoc/org/gradle/api/execution/TaskExecutionGraph.html#whenReady%28groovy.lang.Closure%29)回调（而不是`gradle.projectsEvaluated`）并检查任务是否计划执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-13T13:30:04.917

如果我错了，请纠正我，但在这种情况下你不应该使用单独的 snapshotRepository（而不是 if 语句）吗？例如，

```
mavenDeployer {

  repository(url: "https://oss.sonatype.org/service/local/staging/deploy/maven2/") {
    authentication(userName: sonatypeUsername, password: sonatypePassword)
  }

  snapshotRepository(url: "https://oss.sonatype.org/content/repositories/snapshots/") {
    authentication(userName: sonatypeUsername, password: sonatypePassword)
  }
} 
```

# c# - VSTO 文档级别自定义

> ID：14772155
> 
> 赞同：0
> 
> 时间：2013-02-08T12:03:47.420
> 
> 标签：c#, .net-4.0, vsto, office-addins

VSTO 文档级插件仅适用于保存在系统中的文档？它不适用于从邮件附件打开的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:04:35.910

文档级自定义旨在处理单个应用程序域中的单个文档。它们不是为跨文档通信而设计的。您必须开发应用程序级别的自定义来处理从邮件附件打开的文档。

[http://msdn.microsoft.com/en-us/library/vstudio/zcfbd2sk.aspx](http://msdn.microsoft.com/en-us/library/vstudio/zcfbd2sk.aspx)
[http://msdn.microsoft.com/en-us/library/bb398248(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb398248(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:22:23.937

我相信，如果没有将其组装件发送下来，该文件将无法正常工作。检查自定义如何与 Microsoft Office 应用程序一起使用？部分[在这里](http://msdn.microsoft.com/en-gb/library/vstudio/zcfbd2sk.aspx)。

另一种选择是将组件放置在共享位置。因此，接收者打开文档，程序集将从共享位置加载。

# mysql - 如何使用 INNER JOIN 在 UPDATE 上多次添加值？

> ID：14772156
> 
> 赞同：1
> 
> 时间：2013-02-08T12:03:58.677
> 
> 标签：mysql, sql, sql-update

对于措辞不佳的问题，我很抱歉，但如果不深入了解以下所有细节，我无法弄清楚如何表达它。

我有表*t*具有我正在尝试更新的列*值...*

```
mysql> select * from t;
+------+-------+
| k    | value |
+------+-------+
|   10 |  0.00 |
+------+-------+ 
```

...来自表*v*。表*v*使用*k*作为外键...

```
mysql> select * from v;
+------+-------+
| fk   | value |
+------+-------+
|   10 |  4.00 |
|   10 |  5.00 |
+------+-------+ 
```

我的理解是，这将是一个带有 INNER JOIN 的相当基本的更新，如下所示：

```
mysql> UPDATE t
    -> INNER JOIN v on v.fk = t.k
    -> SET t.value = t.value + v.value; 
```

我期望*t.value*为 9.00，但结果为 4.00。

我知道我可以使用子查询和 SUM 来做到这一点，但这将在大量数据上运行，所以如果可能的话，我宁愿避免这种情况。有没有办法通过内部连接来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:05:21.823

在子查询中计算结果。

```
UPDATE  t
        INNER JOIN
        (
            SELECT fk, SUM(value) totals
            FROM v
            GROUP BY fk
        ) a ON t.k = a.fk
SET     t.value = a.totals 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/faac7/1)

# git - 如何将 git repo 更改为 git flow repo

> ID：14772161
> 
> 赞同：0
> 
> 时间：2013-02-08T12:04:15.803
> 
> 标签：git, git-flow

如果我已经有一个 git repo，如何将其更改为 git flow 样式的 repo？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:08:38.090

从 repo 文件夹运行`git flow init`，就像使用`git init`.

我建议你看看[https://github.com/nvie/gitflow/wiki/FAQ](https://github.com/nvie/gitflow/wiki/FAQ)

# templates - Handlebars - 渲染属性

> ID：14772172
> 
> 赞同：0
> 
> 时间：2013-02-08T12:04:46.070
> 
> 标签：templates, handlebars.js

我目前在使用车把模板渲染 style="top:10%" 等属性时遇到问题。我的模板看起来像这样

```
{{#each items}}
<a href="#" class="item" style="left:{{position}}">
</a>
{{/each}} 
```

当我安慰我的模型时，它们具有位置属性，并且设置为“10%”。但我似乎什么也得不到。

相反，我得到

```
<a href="#" class="item" style="left:">
</a> 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:07:29.947

好的解决了。这确实有效。正在查看错误的页面。但最好使用 {{{position}}}

# iphone - 以正确的方式检测 UITextField 中的退格

> ID：14772177
> 
> 赞同：6
> 
> 时间：2013-02-08T12:05:00.330
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitextfield

注意力！这个问题不是[这个](https://stackoverflow.com/questions/1977934/detect-backspace-in-uitextfield)或[这个](https://stackoverflow.com/questions/6818342/how-to-detect-uikeyboard-backspace-button-touch-on-uitextfield)问题的重复！这是一个让事情更清楚的新问题。

因此，我已按照上述帖子的所有说明进行操作，`UITextField`每次用户点击返回按钮时，我都会将其变为空并移动到新位置。此外，我跟踪 textView 的输入，并在 TextView 所在的位置创建该文本的标签，如下所示：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {

    if (textField.text.length > 5) {
        CGRect labelFrame = CGRectMake(textField.frame.origin.x, textField.frame.origin.y, 0, 0);
        UILabel *label = [[UILabel alloc] initWithFrame: labelFrame];
        label.font = [UIFont fontWithName:@"HelveticaNeue" size:14];
        [label setText:textField.text];
        [label setTextColor: [BSFunctions getColorFromHex:@"3f3f3f"]];
        label.backgroundColor =[UIColor lightGrayColor];
        [label sizeToFit];
        [labelsArray addObject:label];
        [self.view addSubview: label];

        CGRect newTextFieldFrame = CGRectMake(labelFrame.origin.x + label.frame.size.width + 5, labelFrame.origin.y, 320, 30);
        NSLog(@"Rect is %@", NSStringFromCGRect(newTextFieldFrame));
        textField.frame = newTextFieldFrame;
        textField.text = @"\u200B";
    }    
    return YES;
} 
```

我将文本中的`UITextField`文本设置为`@"\u200B"`，然后我想检测它上面的退格按钮，如下所示：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    if ([string isEqualToString:@""]) {
        NSLog(@"backspace button pressed");

        if (labelsArray.count > 0) {
            UILabel *labelToDelete = [labelsArray lastObject];
            CGRect labelPosition = labelToDelete.frame;
            CGRect oldPosition = textField.frame;
            textField.frame = CGRectMake(labelPosition.origin.x, labelPosition.origin.y, oldPosition.size.width, oldPosition.size.height);
            [labelToDelete removeFromSuperview];
            [labelsArray removeLastObject];
            textField.text = @"\u200B";
        }
    }

    return YES;
} 
```

但问题是，它只能工作**一次**，即使在 textField 开头添加了特殊字符，它也不起作用。什么可能是错的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T13:25:24.387

设置后

```
textField.text = @"\u200B"; 
```

在 textField:shouldChangeCharactersInRange:replacementString:

您将不得不添加

```
return NO; 
```

否则它将继续返回 YES 并用 @"" 替换它，然后当再次按下退格键时，不会更改任何内容并且不会调用委托方法。

我可能在这里误解了您的目标，但我希望这会有所帮助。

# dynamics-crm-2011 - 仅 Outlook 中的 Dynamics CRM 2011 插件？

> ID：14772178
> 
> 赞同：1
> 
> 时间：2013-02-08T12:05:01.033
> 
> 标签：dynamics-crm-2011, dynamics-crm

我们需要限制从 Outlook 到 CRM 2011 自动完成的一些删除操作，同时等待第 3 方插件中的错误修复。是否可以在本地 Dynamics CRM 2011 中有一个插件，该插件要么只为 Outlook 客户端执行（离线未使用），要么在插件从 Outlook 触发时检查执行？

在 CRM 4.0 中曾经有一个 CallerOrigin 属性，它至少提供了一些关于此的信息，但该属性现在似乎只是 CRM 2011 模型的内部属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:22:55.773

我`CallerOrigin`通过反射访问（它仍然存在，但未在 SDK 库中公开）。

下面的代码是我的代码的简短版本，没有任何验证或空检查（即不是生产代码），只是为了展示它是如何在几行代码中工作的：

```
object callerOrigin = context.GetType().GetProperty("CallerOrigin").GetValue(context, null);

return callerorigin.GetType().Name; // will return "WebServiceApiOrigin" if called from outlook or web services 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:24:39.643

在编写插件以在 Outlook 中脱机运行时，您应该注意 IExecutionContext 上的两个属性：

[IExecutionContext.IsExecutingOffline](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iexecutioncontext.isexecutingoffline.aspx)指示插件是否在脱机时在 Outlook 中运行，并且：

[IExecutionContext.IsOfflinePlayback](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iexecutioncontext.isofflineplayback.aspx)表示当客户端再次连接到服务器并与服务器同步更改时正在播放在 Outlook 客户端脱机时所做的更改时触发插件。

# python - Python 3 memcache - 附加不起作用

> ID：14772182
> 
> 赞同：1
> 
> 时间：2013-02-08T12:05:20.983
> 
> 标签：python, memcached

我正在使用这个库与 memcache 通信：http: [//pypi.python.org/pypi/python3-memcached](http://pypi.python.org/pypi/python3-memcached)

现在一切正常，除了 append() 方法。它不会抛出任何错误，只是似乎没有附加任何内容。

这是我的代码（部分）：

```
MEMCACHE = memcache.Client(['127.0.0.1:11211'], debug=1)

saveinterval = 259200  # 3 days

if not MEMCACHE.add('xxxkey', [[item1.1, item1.2]], saveinterval):
    MEMCACHE.append('xxxkey', [item2.1, item2.2], saveinterval) 
```

现在，当我的密钥没有存储任何内容时，它会按预期添加值。正如你所看到的，我的价值是一个东西清单。但是，如果我想将另一个列表附加到该键，则不会发生任何事情。它确实执行 if 中的代码，但实际上没有附加任何内容。

谁能告诉我这里发生了什么？

我还想知道它是否确实有效，之后我的钥匙上有 2 件物品。它们会在不同时间到期吗？

# android - Android 拖放计算器

> ID：14772186
> 
> 赞同：1
> 
> 时间：2013-02-08T12:05:32.947
> 
> 标签：android, drag-and-drop, calculator

```
package com.coreprojects.calculator;

// Packages
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.ClipData;
import android.content.SharedPreferences;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.DragEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.DragShadowBuilder;
import android.view.View.OnDragListener;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.TextView;

@SuppressLint("NewApi")
public class MainActivity extends Activity {

    /**
     * Variables. In java there are lots of type variables like C++
     * In this case we use many type of variables, like:
     * Private, String, Integer and so on.
     * We must tell computer or JVM that we store some kind of information in RAM, so RAM must give us place to store
     * 1\. TextView must be private, we store information that are Text Kind.
     * 2\. String must public, we store operations, like 123, 3432, 323423 and so on...
     * 3\. result must be integer. we store numbers in strings to manipulate and retrieve results in integer type.
     * 4\. double is like float point numbers, 1.2, 2.3445 and so on [for calculator it is nessessery]
     * ===============================================================================================================
     * @author CoreProjects
     * @category Software Engineer
     * {@link http://coreprojects.org}
     * !!!!! This all means that we used global variables, they will be accesable for every method without initializing
     */
    private TextView display, resultPlace, dropped, dropTarget, delete;
    private TextView choice1, choice2, choice3, choice4, choice5, choice6;
    String Second_op;

    /**
     * Main function and method in Android Java
     * It is like C++ int main() function, where all other classes and objects orient here.
     * When developer writes code and classes and other .java files, we encapsulate everything here
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        // Creating new onCreate method, this means that we creating main program
        super.onCreate(savedInstanceState);

        // !!!! This must be after onCreate and means to hide all status and app bar
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        // Call in xml folder main xml file
        setContentView(R.layout.activity_main);

        /**
         * this parameter finds the TextView by ID
         * In this case these textviews are draggable.
         * we find the place and then manipulate them to be draggable.
         * display = place where touched numbers are displayed
         * calcresult = place where we show result and than manipulate to drag in delete or somewhere
         */
        display = (TextView) findViewById(R.id.display);
        delete = (TextView) findViewById(R.id.calcResult);

        // TextView Place where we can drop dragged items
        choice1 = (TextView) findViewById(R.id.gamokleba);
        choice2 = (TextView) findViewById(R.id.mimateba);
        choice3 = (TextView) findViewById(R.id.gamravleba);
        choice4 = (TextView) findViewById(R.id.gayofa);
        choice5 = (TextView) findViewById(R.id.procenti);
        choice6 = (TextView) findViewById(R.id.delete);

        // Create droppable classes to do action
        display.setOnTouchListener(new ChoiceTouchListener());
        delete.setOnTouchListener(new ChoiceTouchListener());

        // Create dragable classes to do action
        choice1.setOnDragListener(new ChoiceDragListener());
        choice2.setOnDragListener(new ChoiceDragListener());
        choice3.setOnDragListener(new ChoiceDragListener());
        choice4.setOnDragListener(new ChoiceDragListener());
        choice5.setOnDragListener(new ChoiceDragListener());
        choice6.setOnDragListener(new ChoiceDragListener());

        // Here we useing custom font family
        Typeface Face = Typeface.createFromAsset(getAssets(), "fonts/font.ttf");

        // Setting which TextView will using this font
        delete.setTypeface(Face);
        display.setTypeface(Face);
        choice1.setTypeface(Face);
        choice2.setTypeface(Face);
        choice3.setTypeface(Face);
        choice4.setTypeface(Face);
        choice5.setTypeface(Face);

    }

    /**
     * Main method
     * We using this method to make items touchable and dragable
     * Then we use them to drop an manipulate what we want
     * @author Administrator
     *
     */
    private class ChoiceDragListener implements OnDragListener {

        // onDrag Method, imagine we dragging numbers from display TextView
        @Override
        public boolean onDrag(View v, DragEvent event) {

            // Android has onDrag action types. there are some kind of action
            switch (event.getAction()) {

                // if drag stared
                case DragEvent.ACTION_DRAG_STARTED:

                break;

                // if drag entered software
                case DragEvent.ACTION_DRAG_ENTERED:

                break;

                // if drag exited, stopped or something
                case DragEvent.ACTION_DRAG_EXITED:

                break;

                // main case, if drag dropped what we do...
                case DragEvent.ACTION_DROP:

                    // handle the dragged view being dropped over a drop view
                    View view = (View) event.getLocalState();

                    // stop displaying the view where it was before it was dragged
                    // ************* view.setVisibility(View.KEEP_SCREEN_ON);

                    // view dragged item, where numbers will be dragged
                    dropTarget = (TextView) v;

                    // view dropped item, that will be dropped in drag TextView
                    dropped = (TextView) view;

                    // view result place, when make math operation, show results
                    resultPlace = (TextView) findViewById(R.id.calcResult);

                    // simple debug
                    // ****** resultPlace.setText( dropped.getText() + " " + dropTarget.getText() );

                    // if an item has already been dropped here, there will be a tag
                    Object tag = dropTarget.getTag();

                    SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_PRIVATE);

                    // if there is already an item here, set it back visible in its
                    // original place
                    if (tag != null)
                    {

                        // the tag is the view id already dropped here
                        int existingID = (Integer) tag;

                        // set the original view visible again
                        findViewById(existingID).setVisibility(View.VISIBLE);

                    } else {

                        myPrefs.edit()
                            .putString("Second_op", (String) dropped.getText())
                            .commit();

                        Second_op = myPrefs.getString("Second_op", null);

                    }

                    int a = Integer.parseInt(dropped.getText().toString());
                    int b = Integer.parseInt(Second_op);

                    if ( dropTarget.getText().equals("+") && a != 0 && b != 0 ){
                        int res = a + b;
                        String result = Integer.toString(res);
                        resultPlace.setText( result );
                        myPrefs.edit().clear().commit();
                    } else {
                        resultPlace.setText( "Text" );
                    }

                    // ****** resultPlace.setText( dropped.getText() + " " + dropTarget.getText() + " " + Second_op );

                    // set the tag in the target view being dropped on - to the ID
                    // of the view being dropped
                    dropTarget.setTag(dropped.getId());

                    display.setText("");

                break;

                // if drag ended, we did it already successfully
                case DragEvent.ACTION_DRAG_ENDED:

                break;

                // what do default
                default:

                break;
            }
            return true;
        }
    }

    // second main method make this selected items touchable, to understand device we use them
    @SuppressLint("NewApi")
    private final class ChoiceTouchListener implements OnTouchListener {

        public boolean onTouch(View view, MotionEvent motionEvent) {

            if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
                /*
                 * Drag details: we only need default behavior - clip data could
                 * be set to pass data as part of drag - shadow can be tailored
                 */
                ClipData data = ClipData.newPlainText("", "");

                DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);

                // start dragging the item touched
                view.startDrag(data, shadowBuilder, view, 0);
                return true;
            } else {
                return false;
            }
        }
    }

    /**
     * Most neccessery one
     * When we touching and clicking number buttons we display 1, 2, 3, 4, 5 and so on
     * But if we want to have number like 388201, we create it by this function
     * Click digit 2 and when we also click second digit 8, it is appended and got 28
     * @param v
     */
    public void updateDisplay(View v) {

        // Local variables, we only use them in this method
        display = (TextView) findViewById(R.id.display);
        Button button1 = (Button) findViewById(R.id.button01);

        button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                display.setText(display.getText().toString() + ((Button) view).getText());
            }
        });

        // Create new text that will be set in display TextView | local variable
        display.setText(display.getText().toString() + ((Button) v).getText());
    }

} 
```

这是我的代码。我正在尝试创建拖放计算器。我有从 0 到 9 的数字；

> 1 2 3 4 5 6 7 8 9 0

单击它们，并创建像**243**这样的数字，它们在数学运算中触摸并拖动，例如**+ 加号**，然后创建第二个数字并在相同的数学运算中拖放。在这里我有问题，我试图在某处存储第一个值及其操作，因为当我删除秒值时，第一个值也更新了。我使用了**SharedPreferences**，但是当我得到结果然后将这个结果拖到操作中时，应用程序停止了。想通了，这就是 Pereferences 问题。我该如何解决这个问题？我想从两个数字中得到结果，然后也可以拖动结果。

> 230 + 330 = 560
> 
> 560——新掉号？（当我拖放结果值时应用程序停止）

# .net - 如何使自己的 .NET dll 全局化？

> ID：14772188
> 
> 赞同：3
> 
> 时间：2013-02-08T12:05:42.020
> 
> 标签：.net, dll

我制作了一个 .net dll（类库），如果它在同一个文件夹中，它与我的 EXE 一起工作。但是有没有办法让 DLL “全局”，所以它安装在系统的某个地方，我仍然可以在我的 exe 中使用它？

在 VB6 和 activex 时代，我使用了 regsvr32 - 是否有类似于 regsvr32 但用于 .net dll 的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:07:23.217

有[全局程序集缓存](http://en.wikipedia.org/wiki/Global_Assembly_Cache)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T12:08:46.293

您必须将程序集发布/安装到全局程序集缓存。请参阅此链接[了解操作方法](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:07:33.320

是的，您可以从安装路径引用 DLL。

否则你可以使用**[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)**

# sql - PostgreSQL 插入或更新触发器

> ID：14772192
> 
> 赞同：9
> 
> 时间：2013-02-08T12:05:47.833
> 
> 标签：sql, postgresql, triggers, constraints

我有两张桌子。我想在表上创建一个触发器，该触发器将根据某个值`car`在表上插入或删除。`fuel`

**车**

```
id - SERIAL
fuel - BOOLEAN 
```

**燃料**

```
car_id -  INTEGER 
```

我不包括任何行数据，因为触发器的描述不需要它。

基本上，我想在`Car`表上创建一个触发器：

*   在插入或更新时运行。
*   如果 . 则插入表`Car.id`中。`Fuel``Car.fuel is true`
*   如果是，触发器应该删除表 where`Car.fuel is false`中的所有行。`Fuel``Fuel.car_id = Car.id`

我该怎么做？

编辑：澄清我正在使用 Postgres

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T13:00:21.503

由于您没有提到 RDBMS，我假设它是 Oracle。下面是触发器。如果您使用的是另一个 RDBMS，请调整代码以适应语法。

```
CREATE OR REPLACE TRIGGER TRG_CAR
   AFTER INSERT OR UPDATE ON CAR
   FOR EACH ROW

   BEGIN

     IF :new.FUEL THEN
       INSERT INTO FUEL (CAR_ID) VALUES (:new.ID);
     ELSE
       DELETE FROM FUEL WHERE CAR_ID = :new.ID;
     END IF;
   END; 
```

# javascript - 使用 jQuery/javascript 获取滑块拇指的绝对位置

> ID：14772194
> 
> 赞同：1
> 
> 时间：2013-02-08T12:05:57.690
> 
> 标签：javascript, jquery, html, css, shadow-dom

我有一个`input type=range`滑块，它代表视频的进度条。此滑块被包裹在一个较小的容器内，因此当滑块上的拇指到达容器边缘时，容器向左滚动到足以使拇指再次可见。因此，我需要检测何时发生这种情况。我不能使用视频的 timeupdate 事件，因为它在单击滑块后也会触发，但在这种情况下容器不应该滚动。我也不能使用 jQueryUI 滑块，因为它不如 HTML 滑块精确...

我想我需要找到一种方法来检测拇指像素的实际位置。不幸的是，这是一个影子 DOM 元素......有没有办法用 javascript/jquery 获得它？

更新：这是 Chrome 呈现`<input type=range>`DOM 元素的方式，如开发人员工具中所示：

```
<input type="range">
  #shadow-root
    <div>  --> This is the slider container
      <div>  --> This is the slider track
        <div></div>  --> This is the slider thumb
      </div>
      <div style="visibility: hidden; position: static;"></div>
    </div>
</input> 
```

我想要做的是检测滑块拇指 div 的位置（绝对或相对）而不寻找它的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:10:05.650

你可以显示一些我不完全理解你想要做什么的代码......

使用 jQuery 尝试像这样绑定阴影元素：

```
$(document).on('change', 'input[type="range"]', function(e) {
    var left = $('#imgId').position().left,
        rangePosition = $(this).val();
}); 
```

# python - 使用 PyQT4 时订单执行功能的问题

> ID：14772199
> 
> 赞同：0
> 
> 时间：2013-02-08T12:06:18.570
> 
> 标签：python, pyqt4

我对 Python 的 PyQT4 有疑问。有一个带有文本和按钮的标签连接到功能。该函数可以先改变标签的文本，然后调用其他函数。它有一个问题：函数首先执行，然后更改标签的文本。

代码：

```
# -*- coding: utf-8 -*-
import time
import sys
from PyQt4 import QtCore, QtGui

def timesleep():
    print("start sleep")
    time.sleep(5)
    print("stop sleep")

class AnyWidget(QtGui.QWidget):
    def __init__(self,*args):

        QtGui.QWidget.__init__(self,*args)
        self.setWindowTitle("PETHARD")
        boxlay = QtGui.QHBoxLayout(self)
        frame = QtGui.QFrame(self) # Фрейм
        frame.setFrameShape(QtGui.QFrame.StyledPanel)
        frame.setFrameShadow(QtGui.QFrame.Raised)

        gridlay = QtGui.QGridLayout(frame) # Менеджер размещения элементов во фрейме
        label = QtGui.QLabel(u"Welcome",frame) # Текстовая метка.
        global glabel
        glabel = label
        gridlay.addWidget(label,0,0)
        button1 = QtGui.QPushButton(u"Load From MC", frame)
        self.connect(button1, QtCore.SIGNAL("clicked()"), self.ts)
        gridlay.addWidget(button1,1,0)
        boxlay.addWidget(frame)

    def ts(self):
        global glabel
        glabel.setText(u"Waiting...")
        timesleep()

if __name__=="__main__":
    app = QtGui.QApplication(sys.argv)
    aw = AnyWidget()
    aw.show()
    sys.exit(app.exec_()) 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:10:54.993

它的工作原理是这样的，因为渲染是稍后在 app.xml 中完成的。因此，您`glabel.text`会立即更改，但在函数调用后您会在屏幕上看到更改的文本`ts`，因为绘图是在循环结束时完成的。

如果您真的想在新框架中调用您的函数（在渲染新文本之后），请使用计时器：

```
timer = QtCore.QTimer()
QtCore.QObject.connect(
    timer,
    QtCore.SIGNAL("timeout()"),
    self.ts
)
timer.start(10) 
```

它应该在十毫秒后调用你的函数，所以实际上可能是在渲染之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:29:55.260

您永远不想将您的 GUI 与长期运行的功能捆绑在一起。标签不更新只是问题的一种表现。即使你在调用函数之前更新了标签，它仍然会“冻结”你的 GUI——在长时间运行的函数完成之前，没有小部件会响应用户。

如果您必须运行这样的函数，请查看是否有办法将其分解为小块，每个小块都将控制权交给 GUI，或者考虑使用单独的线程来运行该函数：

```
import time
import sys
from PyQt4 import QtCore, QtGui

class TimeSleep(QtCore.QThread):
    def __init__(self, parent=None):
        QtCore.QThread.__init__(self, parent)
        self.parent = parent

    def run(self):
        print("start sleep")
        time.sleep(5)
        print("stop sleep")
        self.parent.glabel.setText(u"Done")

class AnyWidget(QtGui.QWidget):
    def __init__(self, *args):

        QtGui.QWidget.__init__(self, *args)
        self.setWindowTitle("PETHARD")
        boxlay = QtGui.QHBoxLayout(self)
        frame = QtGui.QFrame(self)  # Фрейм
        frame.setFrameShape(QtGui.QFrame.StyledPanel)
        frame.setFrameShadow(QtGui.QFrame.Raised)

        gridlay = QtGui.QGridLayout(
            frame)  # Менеджер размещения элементов во фрейме
        label = QtGui.QLabel(u"Welcome", frame)  # Текстовая метка.
        self.glabel = label
        gridlay.addWidget(label, 0, 0)
        button1 = QtGui.QPushButton(u"Load From MC", frame)
        self.connect(button1, QtCore.SIGNAL("clicked()"), self.ts)
        gridlay.addWidget(button1, 1, 0)
        boxlay.addWidget(frame)

    def ts(self):
        self.glabel.setText(u"Waiting...")
        self.thread = TimeSleep(parent=self)
        self.thread.start()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    aw = AnyWidget()
    aw.show()
    sys.exit(app.exec_()) 
```

这是一个关于如何处理长时间运行的函数的[wiki 页面。](http://diotavelli.net/PyQtWiki/Threading,_Signals_and_Slots)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:48:05.787

标签的文本正在更改，但是因为您阻塞了主线程，所以您没有给 Qt 绘制它的机会。

使用`QCoreApplication::processEvents`和`QCoreApplication::flush`：

```
def ts(self):
    glabel.setText(u"Waiting...")
    QtCore.QCoreApplication.processEvents()
    QtCore.QCoreApplication.flush()
    timesleep() 
```

# knockout.js - Knockout.js - 禁用而不是隐藏的级联选择？

> ID：14772203
> 
> 赞同：0
> 
> 时间：2013-02-08T12:06:22.570
> 
> 标签：knockout.js, cascadingdropdown

我使用受此[问题](https://stackoverflow.com/questions/11386624/knockoutjs-simple-cascading-selects)中已接受答案启发的代码（[jsFiddle](http://jsfiddle.net/x2qMg/4/) - 帖子底部的代码），使用 Knockout 创建了多个级联选择。

它工作得很好，但是我想在子选择不可用时**禁用**它们，而不是完全隐藏它们。

有一个简单的选择吗？

隐藏行为似乎是由 'with' 绑定驱动的，但这似乎是数组链接方式不可或缺的一部分。

```
var mainViewModel = null;

var mainViewModelData = {
    "RequestName": "test Name",
    "BusinessLines": [{
        "Id": 1,
        "Title": "Retail",
        "Clusters": [{
            "Id": 1,
            "Title": "Corporate si Trezorerie"},
        {
            "Id": 2,
            "Title": "Good Bee"},
        {
            "Id": 3,
            "Title": "Leasing"}]},
    {
        "Id": 2,
        "Title": "Corporate",
        "Clusters": [{
            "Id": 1,
            "Title": "REM"},
        {
            "Id": 2,
            "Title": "BCR Procesare"},
        {
            "Id": 3,
            "Title": "Erste Asset Management"}]}],
    "SelectedBusinessLine": null,
    "SelectedCluster": null,
    "RequirementHighLevelDescription": null,
    "Revenues": 0,
    "Savings": 0,
    "PreventedLosses": 0
};

mainViewModel = ko.mapping.fromJS(mainViewModelData);

ko.applyBindings(mainViewModel);

<div>         
<table>            
  <tr>      
    <td>      
        Business Line    
      </td>
      <td>
          <select data-bind="options: BusinessLines,                                                         optionsText: 'Title',                                                           value: SelectedBusinessLine,  
                             optionsCaption: 'Select Business Line..'">
                 </select>           
             </td>
    </tr>

    <tr data-bind="with: SelectedBusinessLine">
        <td>
            Cluster
        </td>
        <td>              <select data-bind="options: Clusters,                                        optionsText: 'Title',                                                        value: $root.SelectedCluster,                                                        optionsCaption: 'Select Cluster..'">   
            </select>
        </td>
    </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:04:13.697

这不是那么微不足道，但可能......

首先，您将创建计算的 observable，它将每个 BusinessLine 的所有集群与`parent`将保留集群的父 BusinessLine 对象的属性合并：

```
mainViewModel.AllClusters = ko.computed(function(){
    var result = [];
    ko.utils.arrayForEach(this.BusinessLines(), function(line){
        ko.utils.arrayForEach(line.Clusters(), function(cluster){
            result.push({ parent: line, Title: cluster.Title() });
        });
    });
    return result;
}, mainViewModel); 
```

然后有必要创建新类型的绑定 enabledOptions，它将`<option/>`根据`parent`属性比较结果为每个集群设置/删除“禁用”属性：

```
ko.bindingHandlers.enabledOptions = {
    update: function(element, valueAccessor, allBindings) {

        var options = element.getElementsByTagName('option'),
            parent = ko.utils.unwrapObservable(valueAccessor()),
            // delta is neccessary to strip select's caption if it exists
            delta = allBindings().optionsCaption ? 1 : 0;

        for (var i = delta; i < options.length; i++) {
            var cluster = mainViewModel.AllClusters()[i - delta];
            cluster.parent == parent
            ? options[i].removeAttribute('disabled')
            : options[i].setAttribute('disabled', 'disabled')
        }

    }
} 
```

最后删除`with`您提到的绑定。

结果你会得到这样的东西：http: [//jsfiddle.net/ostgals/x2qMg/28/](http://jsfiddle.net/ostgals/x2qMg/28/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:27:20.010

删除`with`绑定，并将绑定`options`绑定到`SelectedBusinessLine().Clusters`.

然后使用[禁用](http://knockoutjs.com/documentation/disable-binding.html)绑定来禁用选择。

# java - 莫基托。验证方法参数是否为特定类

> ID：14772208
> 
> 赞同：37
> 
> 时间：2013-02-08T12:06:45.403
> 
> 标签：java, unit-testing, mockito

我有一个方法：

```
void putObject(<T extends BaseEntity> param) 
```

在我模拟此方法的地方进行一些测试，但我想知道，如何验证该方法是使用特定类的参数调用的？试图以这样的方式做到这一点：

```
verify(foo).putObject((SomeClass)anyObject());
------
verify(foo).putObject(any(SomeClass.class));
------
ArgumentCaptor<SomeClass> parameter = ArgumentCaptor
            .forClass(SomeClass.class);
verify(foo).putObject(parametr); 
```

仅适用于带有 的第二个变体`any()`，但它没有`t check class of`参数`。那么是否可以验证该方法获取特定类的任何对象？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-08T12:12:35.610

用户匹配器[文档](https://static.javadoc.io/org.mockito/mockito-core/1.10.19/org/mockito/Matchers.html) **isA()**方法。

`public static <T> T isA(java.lang.Class<T> clazz)`

这将解决你的问题。

`verify(foo).putObject(isA(SomeClass.class));`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-17T09:52:32.383

实际上，您可以使用 ArgumentCaptor 进行检查。

```
ArgumentCaptor<SomeClass> parameterCaptor = ArgumentCaptor
            .forClass(SomeClass.class);
verify(foo).putObject(parameterCaptor.capture());

SomeClass instance = parameterCaptor.getValue();
// check intance.getX()
// check instance.getY() 
```

# javascript - THREE.js：渲染后调用lookAt方法不起作用

> ID：14772212
> 
> 赞同：5
> 
> 时间：2013-02-08T12:06:58.050
> 
> 标签：javascript, three.js, webgl

下面的脚本无法正常工作。（它只需要 jquery 和 three.js 即可运行）。麻烦的线是这两条：

```
// change the view so looking at the top of the airplane
views[1].camera.position.set( 0,5,0 );
views[1].camera.lookAt(objectManager.airplane.position); 
```

奇怪的是，如果将这两行注释掉，可以看出下面两行类似的前面的行确实按预期运行：

```
views[1].camera.lookAt(objectManager.airplane.position); 
```

和

```
view.camera.position.set( 5,0,0 ); 
```

由于某种原因，对 camera.lookAt 的调用似乎只在第一次起作用。之后，相机不再跟随飞机物体。如果有人能弄清楚我做错了什么，我将不胜感激！

完整的脚本如下。

谢谢

```
$(function(){
    var scene, renderer, viewPort, objectManager, views;

    init();
    animate();

    function init() {
        viewPort = $('body');

        scene = new THREE.Scene();

        // construct the two cameras
        initialiseViews();

        // construct airplane, lights and floor grid
        objectManager = new ObjectManager();
        objectManager.construct();
        objectManager.addToScene(scene);

        // make the second camera's position
        // stay fixed relative to the airplane
        objectManager.airplane.add(views[1].camera);

        // make the second camera stay looking
        // at the airplane
        views[1].camera.lookAt(objectManager.airplane.position);

        renderer = new THREE.WebGLRenderer();
        renderer.setClearColorHex(0x000000, 1);
        renderer.setSize( viewPort.innerWidth(), viewPort.innerHeight() );
        viewPort.get(0).appendChild(renderer.domElement);
    }

    function animate() {
        requestAnimationFrame( animate );
        render();
    }
    function render() {
        objectManager.tick();
        for (var i in views){
            views[i].render(scene, renderer);
        }
    }
    function initialiseViews(){
        views = [];

        // ----------------------------------------------------
        // Create the first view, static with respect to ground
        // ----------------------------------------------------
        views[0] = new View(viewPort, objectManager, scene);
        var view = views[0];
        view.fov = 40;
        view.proportions.height = 0.5;
        view.proportions.bottom = 0.5;
        view.init();
        view.camera.position.y = 1;
        view.camera.position.z = 4;

        // ----------------------------------------------------
        // Create the second view, which follows the airplane
        // ----------------------------------------------------

        views[1] = new View(viewPort, objectManager, scene);
        var view = views[1];

        view.fov = 20;
        view.proportions.height = 0.5;
        view.init();

        // set the initial position of the camera
        // with respect to the airplane. Views from behind
        view.camera.position.set( 5,0,0 );

        view.updateCamera = function(){

            // change the view so looking at the top of the airplane
            views[1].camera.position.set( 0,5,0 );
            views[1].camera.lookAt(objectManager.airplane.position);

            views[1].camera.updateProjectionMatrix();
        };
    }
});
function View(viewport, om, scene){
    this.scene = scene;
    this.camera;
    this.objectManager = om;
    this.viewPort = viewport;
    this.fov = 30;
    // default: full width and height
    this.proportions = { left: 0, bottom: 0, height: 1, width: 1 };
    this.pixels = { left: 0, bottom: 0, height: 0, width: 0, aspect: 0 };
    this.aspect;
    this.init = function(){
        this.pixels.left = Math.floor(this.proportions.left * this.viewPort.innerWidth()); 
        this.pixels.width = Math.floor(this.proportions.width * this.viewPort.innerWidth()); 
        this.pixels.bottom = Math.floor(this.proportions.bottom * this.viewPort.innerHeight()); 
        this.pixels.height = Math.floor(this.proportions.height * this.viewPort.innerHeight()); 
        this.pixels.aspect = this.pixels.width / this.pixels.height;
        this.makeCamera();
    };
    this.makeCamera = function(){
        this.camera = new THREE.PerspectiveCamera( 
                this.fov, 
                this.pixels.aspect, 
                0.1, 10000 
        );
        this.camera.updateProjectionMatrix();
        this.scene.add(this.camera);
    };
    this.render = function(scene, renderer){
        this.updateCamera();
        pixels = this.pixels;
        renderer.setViewport(pixels.left, pixels.bottom, pixels.width, pixels.height);
        renderer.setScissor(pixels.left, pixels.bottom, pixels.width, pixels.height);
        renderer.enableScissorTest(true);
        renderer.render( scene, this.camera );
    };
    this.updateCamera = function(){};
}

function ObjectManager(){
    // manages all visible 3d objects (including lights)
    this.airplane;
    var grid;
    var ambientLight;
    var pointLight;
    this.construct = function(){
        this.constructAirplane();
        this.constructLights();
        this.constructFloorGrid();
    };
    this.constructAirplane = function(){
        this.airplane = new THREE.Object3D();
        var fuselage = newCube(
                {x: 1, y: 0.1, z: 0.1}, 
                {x: 0, y: 0, z: 0},
                [0xffff00, 0x808000, 0x0000ff, 0xff00000, 0xffffff, 0x808080],
                [0, 1, 2, 3, 4, 5]
        );
        this.airplane.add(fuselage);
        var tail = newCube(
                {x: 0.15, y: 0.2, z: 0.03}, 
                {x: 0.5, y: 0.199, z: 0},
                [0xffff00, 0x808000, 0x0000ff, 0xff00000, 0xffffff, 0x808080],
                [0, 1, 2, 3, 4, 5]
        );
        this.airplane.add(tail);
        var wings = newCube(
                {x: 0.3, y: 0.05, z: 1},    
                {x: -0.05, y: 0, z: 0},
                [0xffff00, 0x808000, 0x0000ff, 0xff00000, 0xffffff, 0x808080],
                [0, 1, 2, 3, 4, 5]
        );
        this.airplane.add(wings);
    };
    this.constructLights = function(){
        ambientLight = new THREE.AmbientLight(0x808080);
        pointLight = new THREE.PointLight(0x808080);
        pointLight.position = {x: 100, y: 100, z: 100};
    };
    this.constructFloorGrid = function(){
        grid = new THREE.Object3D();

        var geometry = new THREE.Geometry();
        geometry.vertices.push(new THREE.Vector3( - 200, 0, 0 ) );
        geometry.vertices.push(new THREE.Vector3( 200, 0, 0 ) );

        linesMaterial = new THREE.LineBasicMaterial( { color: 0x00ff00, opacity: 1, linewidth: .1 } );

        for ( var i = 0; i <= 200; i ++ ) {

            var line = new THREE.Line( geometry, linesMaterial );
            line.position.z = ( i * 2 ) - 200;
            grid.add( line );

            var line = new THREE.Line( geometry, linesMaterial );
            line.position.x = ( i * 2 ) - 200;
            line.rotation.y = 90 * Math.PI / 180;
            grid.add( line );
        }       
    };
    this.addToScene = function(scene){
        scene.add( this.airplane );
        scene.add( grid );
        scene.add( ambientLight );
        scene.add( pointLight );
    };
    this.tick = function(){
        this.airplane.rotation.x += 0.005;
        this.airplane.rotation.y += 0.01;
        this.airplane.position.x -= 0.05;
    };
};

function newCube(dims, pos, cols, colAss){
    var mesh;
    var geometry;
    var materials = [];
    geometry = new THREE.CubeGeometry( dims.x, dims.y, dims.z );
    for (var i in cols){
        materials[i] = new THREE.MeshLambertMaterial( { color: cols[i], ambient: cols[i], overdraw: true } );
    }
    geometry.materials = materials;
    for (var i in colAss){
        geometry.faces[i].materialIndex = colAss[i];
    }
    mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) );
    mesh.position = pos;
    return mesh;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T15:42:46.283

你需要这样做：

```
views[1].camera.position.set( 0, 5, 0 );
views[1].camera.lookAt( new THREE.Vector3() ); 
```

而不是这个：

```
views[1].camera.position.set( 0, 5, 0 );
views[1].camera.lookAt( objectManager.airplane.position ); 
```

你的相机是飞机的孩子。它需要`( 0, 0, 0 )`在它的本地坐标系中查看——而不是`position`在世界空间中的飞机。

你的电话`updateProjectionMatrix()`是没有必要的。复制 three.js 示例。

# javascript - JavaScript：特定时区中的日期对象错误

> ID：14772215
> 
> 赞同：1
> 
> 时间：2013-02-08T12:06:59.263
> 
> 标签：javascript, date, timezone

我有一个使用`Date`JavaScript 中的对象的程序。我注意到该程序无法在所有时区（国家）正常运行。

所以我改变了我的 Windows 时区，在特定日期得到了奇怪的结果。

使用这些代码行，我在许多时区都有相同的结果，但其中一个（也许是一些）：

```
console.log( new Date( 2005, 2, 20 ) ); // 2005 Mar 20
console.log( new Date( 2006, 2, 20 ) ); // 2006 Mar 20 
```

时区：UTC `00:00`（正确） ![在此处输入图像描述](../Images/747bd58b20a74dfdb03f56c351329a57.png)

时区：太平洋（美国和加拿大）`-08:00`（正确） ![在此处输入图像描述](../Images/d591835c35fec87de1535c7ed45bd921.png)

时区：纽芬兰`-03:30`（正确） ![在此处输入图像描述](../Images/32cf99baae9f0da01e903c5571b9256a.png)

时区：中国`+08:00`（正确） ![在此处输入图像描述](../Images/0bbada29e2dfbba3a266cfebf89bd1f6.png)

时区：伊朗`+03:30`（**不正确！**） ![在此处输入图像描述](../Images/d6e5fb3e985e8155a3e74c8db9655597.png)

（注意**19 Mar**和**23:00:00**以及**Daylight** vs. **Standard**）
（我已经在 Chrome 中测试了这个问题，结果相同）

我已经用这个解决方案解决了这个问题：

```
new Date( Date.UTC(2005, 2, 20) ); 
```

但我想知道这里发生了什么？
是否`+03:30`有任何错误？日光和标准有什么区别？

**这很奇怪...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:17:09.480

日期对象没有问题。一些国家在春季和秋季观察夏令时以获得更多的日光时间。[在这里检查](http://en.wikipedia.org/wiki/Daylight_saving_time)。碰巧的是，2005 年 3 月 20 日，伊朗的时间实行夏令时。正确显示他们观察的时间（注意与 GMT 的差异从 +0430 变为 +0330）。在 2006 年的那一天，他们遵循常规时间，不受夏令时的约束。

请参阅评论中的“Frits van Campen”链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T05:54:27.783

您应该统一时区或使时区显示为客户时区。例如澳大利亚，我在下面使用 AU 悉尼时区

```
let expirationTime = new Date().toLocaleString("en-US", {timeZone: "Australia/Sydney"});
expirationTime = new Date(expirationTime); 
```

希望对你有帮助☺</p>

# arrays - 在 Perl 中是否可以使用另一个数组逐个位置来转换一个数组？

> ID：14772216
> 
> 赞同：0
> 
> 时间：2013-02-08T12:07:04.480
> 
> 标签：arrays, perl, transformation

我有一个值数组，我想使用另一个数组进行转换，就像这样

```
@raw_values      = qw(10 20 30 40);

@adjustment_factors = qw(1 2 3 4);

#the expected value array
@expected_values    = qw(10 40 90 160); 
```

还有比这更糟糕的方法吗？

```
for my $n (0..$#raw_values){
    $expected_values[ $n ] = $raw_values[ $n ] * $adjustment_factors[ $n ]
} 
```

数组总是有相同数量的元素，我有几千个要处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:25:29.130

使用`map`：

```
@expected_values = map { $raw_values[$_] * $adjustment_factors[$_] } 0 .. $#raw_values; 
```

另一种选择是首先分配原始值，然后修改它们：

```
@expected_values = @raw_values;
$x = 0;
$_ *= $adjustment_factors[$x++] for @expected_values; 
```

或者，如果您不再需要`@adjustment_factors`，您可以清空它：

```
@expected_values = map { $_ * shift @adjustment_factors } @raw_values; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:24:34.320

[**`pairwise`**](http://search.cpan.org/~adamk/List-MoreUtils-0.33/lib/List/MoreUtils.pm#pairwise)是更惯用的[CPAN](http://cpan.org)解决方案。

```
use List::MoreUtils qw<pairwise>;

my @expected_values = pairwise { $a * $b } @raw_values, @adjustment_factors; 
```

看[**`List::MoreUtils`**](http://search.cpan.org/perldoc?List%3a%3aMoreUtils)

# windows - System32 是 Windows 中的当前工作目录？

> ID：14772219
> 
> 赞同：1
> 
> 时间：2013-02-08T12:07:14.837
> 
> 标签：windows

我刚刚注意到在 Windows system32 下是当前工作目录（而不是执行文件所在的目录）。为什么呢？总是这样吗？这是故意的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:46:32.663

当前目录设置为进程启动的一部分。一旦进程开始，它可以随意更改其当前目录。

当前目录被指定为 的参数[`CreateProcess`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682425.aspx)，实际上是用于创建进程的任何其他类似 API 函数。`NULL`传递新进程的当前目录是很常见的。在这种情况下，使用父进程的当前目录。

所以，看看你的具体问题：

> 为什么呢？

如果您的进程的当前目录是`system32`，那是因为无论启动该进程都选择使其如此，或者您的进程选择使其如此。

> 总是这样吗？

不，进程创建者和进程本身都可以自由设置当前目录。

这是故意的吗？

> 我不知道，因为我不知道您的流程是如何创建的。

# c# - 尝试使用 Microsoft.Xna.Framework 将 wma 文件加载为 SoundEffect 时发生 InvalidOperationException

> ID：14772220
> 
> 赞同：0
> 
> 时间：2013-02-08T12:07:18.913
> 
> 标签：c#, audio, xna, windows-phone-8, soundeffect

尝试将 WMA 文件（无 DRM）加载为音效时出现无效操作异常。我的代码：

```
 public void LoadSound(String SoundFilePath, out SoundEffect Sound)
    {

        Sound = null;

        try
        {
            // Holds informations about a file stream.
            StreamResourceInfo SoundFileInfo = App.GetResourceStream(new Uri(SoundFilePath, UriKind.Relative));

            // Create the SoundEffect from the Stream
            Sound = SoundEffect.FromStream(SoundFileInfo.Stream);
        }
        catch (NullReferenceException)
        {
            // Display an error message
            MessageBox.Show("Couldn't load sound " + SoundFilePath);
        }
    } 
```

错误发生在这一行`Sound = SoundEffect.FromStream(SoundFileInfo.Stream)`

我可以毫无问题地加载 WAV 文件。我不想将 WMA 文件转换为 WAV，因为原始 WMA 文件大小仅为 352KB，但当转换为 WAV 文件时，其大小增加到 1788KB！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:23:22.207

您不能在 SoundEffects 中使用 wma 或 mp3 声音。试试这种效果很好的方法：

```
using Microsoft.Xna.Framework.Media;
...
Song s = Song.FromUri("sound name", new Uri(@"Resources/Alarms/Alarm01.wma", UriKind.Relative));
MediaPlayer.Play(s); 
```

也不要忘记参考**Microsoft.Xna.Framework**库。

# javascript - 一次取消设置所有属性主干

> ID：14772222
> 
> 赞同：3
> 
> 时间：2013-02-08T12:07:32.033
> 
> 标签：javascript, backbone.js

我有一个关于 Backbone 的问题，如何将模型的所有属性设置为空？

```
unsetmodel.unset(attribute, [options]) 
Remove an attribute by deleting it from the internal attributes hash. Fires a "change" event unless silent is passed as an option. 
```

但这仅用于一一取消设置各个属性。

任何人的想法？

格雷茨，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:17:55.877

从骨干网站：

> **clearmodel.clear([选项])**
> 
> 从模型中删除所有属性，包括 id 属性。除非将静音作为选项传递，否则触发“更改”事件。

所以我会做类似的事情：

```
myModel.clear(); 
```

* * *

如果要保留属性，为什么不遍历所有属性并手动设置它们呢？

```
$.each(this.model.attributes, function(index, value){
    // set them manually to undefined
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-26T16:52:36.867

我知道这是一篇旧帖子，但我最近遇到了一个类似的问题 - 主要是，如果你一个接一个地取消设置，你会得到多个`change`事件，每个事件的模型都处于中间状态。为了允许在随后触发的适当更改事件中发生这种情况，您必须一个接一个地静默取消设置它们，然后在取消设置后手动触发每个更改事件。但是，如果您查看 Backbone 代码，您会发现该`unset`方法实际上只是对选项的`set`调用`{unset:true}`。所以你应该可以这样做：

```
model.set({ attr1: undefined, attr2: undefined, attr3: undefined }, { unset: true }) 
```

我还没有在实践中尝试过，但它绝对应该在理论上有效。在所有未设置完成*后*`change`，您将获得每个属性的一系列事件。这种方法有点超出推荐的路径，因为它使用来自 Backbone 源的未公开逻辑，但由于这个特定代码[在几年内没有改变](https://github.com/jashkenas/backbone/commit/ba7a279f7c65ac4ae0fe787c653d641388093d8f)（实际上在此之前似乎作为一个选项被支持），它应该安全使用并继续使用。*`set`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:45:43.337

没有内置方法可以设置所有未定义的属性，同时保留`attributes`键。好消息是，您可以使用下划线单行轻松自己构建一个：

```
Backbone.Model.prototype.clearValues = function(options) {
  this.set(_.object(_.keys(this.attributes), []), options);
} 
```

然后所有模型都会有一个`clearValues`方法：

```
var model = new Model({
  id:1, 
  foo:'foo', 
  bar:'bar'
});
model.clearValues();

console.log(model.toJSON()); //-> {id: undefined, foo: undefined, bar: undefined} 
```*

# java - java - 如何在java代码中的资源上调用Spring的当前属性占位符？

> ID：14772224
> 
> 赞同：0
> 
> 时间：2013-02-08T12:07:34.090
> 
> 标签：java, spring, ehcache, placeholder

Spring 占位符机制非常干净和健壮，不幸的是它只适用于 Spring 文件。

我正在使用**EhCahe**，我想在`ehcache.xml`文件上使用占位符机制。我有自己的 EhCache 工厂 bean，我可以将此库配置作为 InputStream 提供。所以我需要做的就是实现我的目标：

*   从类路径读取 xml 文件内容
*   **访问当前 spring.xml 文件**的属性占位符（配置了我的 bean 的那些）
*   在读取资源上调用占位符
*   将资源作为 InputStream 还给库

所以我的问题是，如何做到这一点，就像 Spring 允许的那样紧凑？我想避免自己创建占位符，所以代码会尽可能少地“魔法”，所以我想使用 xml 文件中的属性配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:14:51.383

EhCache 支持 ehcache.xml 文件中的系统属性占位符替换，因此一种选择是将 Spring 占位符值复制到系统属性中，以便可以在 ehcache.xml 文件中引用它们：

在春季上下文 xml...

```
<!-- Copy Spring placeholder value to System props -->
<bean id="systemProps" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject" value="#{@systemProperties}" />
    <property name="targetMethod" value="putAll" />
    <property name="arguments">
        <util:properties>
            <prop key="cache.ttl">${cache.ttl}</prop>
        </util:properties>
    </property>
</bean> 
```

然后在您的 ehcache.xml 文件中，您现在可以使用`${cache.ttl}`上面填充的占位符：

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">
    <cache name="myCache" timeToLiveSeconds="${cache.ttl}" maxElementsInMemory="1000" overflowToDisk="false" />
</ehcache> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:35:37.127

Ehcache 有一个 api 以编程方式定义新的缓存。为什么你不能做一个与春天一起启动并自动填充的豆子？这样您就不必创建自动 EhCache.xml，但您可以在 spring 上下文文件中定义所需的所有缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T14:02:00.460

不必使用系统属性。但是，您必须在构建期间解析占位符。

将您的属性放在对象中，如下所示：

```
<bean id="cacheProperties" class="java.util.Properties">
    <constructor-arg>
        <props>
            <prop key="prop1">#{prop1}</prop>
            <prop key="prop2">#{prop2}</prop>
        </props>
    </constructor-arg>
</bean> 
```

并将它们设置为您的自定义 PlaceHolderHelper：

```
 <bean id="cachePlaceholderHelper"
      class="com.PlaceholderHelper" depends-on="cacheProperties">
    <property name="configFileResource" value="classpath:cacheConfig.xml"/>
    <property name="properties" ref="cacheProperties"/>
</bean> 
```

PlaceholderHelper 可能看起来像这样：

```
private Resource configFileResource;
private Properties properties;
private Resource resolvedConfigResource;

@PostConstruct
public void replace() throws IOException {
    PropertyPlaceholderHelper helper = new PropertyPlaceholderHelper("${", "}");

    if (this.properties != null && this.configFileResource != null) {
        File file = this.configFileResource.getFile();
        String content = FileUtils.readFileToString(file);
        String result = helper.replacePlaceholders(content, this.properties);
        File resolvedCacheConfigFile = new File("resolvedCacheConfig");
        FileUtils.write(resolvedCacheConfigFile, result);

        resolvedConfigResource = new FileSystemResource(resolvedCacheConfigFile);
        logger.info(String.format("Placeholders in file %s were replaced.", file.getName()));
    }
} 
```

**将p:configLocation**更改为已解析的资源：

```
p:configLocation="#{cachePlaceholderHelper.resolvedConfigResource} 
```

现在您可以在 XML 的任何地方使用 ${prop1} 表达式。

# php - 如何在 PHP 中检测 MDB2 安装的驱动程序？

> ID：14772226
> 
> 赞同：0
> 
> 时间：2013-02-08T12:07:44.850
> 
> 标签：php, mdb2

我正在尝试检测安装了哪些 MDB2 驱动程序。这样我就可以使用用户安装的任何东西。我尝试使用 class_exists("MDB2_Driver_$driver", FALSE) 或 (@include_once("MDB2/Driver/$driver.php"))，但它不起作用。（第一个为所有驱动程序返回 FALSE，第二个为现有驱动程序崩溃）

关于如何做到这一点的任何想法？似乎 MDB2 没有为此提供任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:02:19.453

如果这些是通过 PEAR 安装的，下面的代码就可以解决问题。它通过查询 PEAR 注册表来确定是否安装了驱动程序包。它还将显示每个驱动程序的版本。

```
require 'PEAR/Registry.php';
$reg = new PEAR_Registry;  
$drivers = array (       
    'MDB2_Driver_fbsql',
    'MDB2_Driver_ibase',
    'MDB2_Driver_mssql',
    'MDB2_Driver_mysql',   
    'MDB2_Driver_mysqli',  
    'MDB2_Driver_oci8',
    'MDB2_Driver_odbc',
    'MDB2_Driver_pgsql',
    'MDB2_Driver_querysim',
    'MDB2_Driver_sqlite',  
    'MDB2_Driver_sqlsrv',
);
foreach ($drivers as $driver) {
    $pkg = $reg->getPackage($driver);
    if (!is_null($pkg)) {  
        $version = $pkg->getVersion();
        echo "$driver v$version installed\n";
    }
} 
```

这是基于我去年发布到[https://gist.github.com/kenguest/1671361的一段代码。](https://gist.github.com/kenguest/1671361)

# module - Prestashop 钩子和覆盖模块

> ID：14772228
> 
> 赞同：0
> 
> 时间：2013-02-08T12:07:46.583
> 
> 标签：module, overriding, hook, prestashop

我创建了一个钩子，我想把一个模块移到那里。我在覆盖文件夹 (override/clases/controller/FrontController.php) 中覆盖 FrontController.php。

```
self::$smarty->assign(array(
‘HOOK_HEADER’ => Module::hookExec(‘header’),
‘HOOK_TOP’ => Module::hookExec(‘top’),
‘HOOK_NEWHOOK’ => Module::hookExec(‘DisplayNewHook’),
‘HOOK_LEFT_COLUMN’ => Module::hookExec(‘leftColumn’)
)); 
```

然后我编辑了 php 文件模块以添加：

```
function hookNewHook($params) { return $this->hookTop( $params ); } 
```

它工作正常。但是没有其他方法可以做到这一点吗？因为如果模块被更新，更改将会丢失。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:07:48.710

到目前为止，模块覆盖是不可能的。您可以做的是创建一个重复的模块（复制粘贴:)）并将该模块与您的更改一起使用。当您更新 prestashop 时，您修改的任何核心模块都可能会丢失更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:40:42.343

您会在那里找到一些创建 PrestaShop 模块的帮助：http: [//doc.prestashop.com/display/PS14/Creating+a+PrestaShop+module](http://doc.prestashop.com/display/PS14/Creating+a+PrestaShop+module)

# java - SmartGWT 模态窗口

> ID：14772234
> 
> 赞同：1
> 
> 时间：2013-02-08T12:08:13.293
> 
> 标签：java, gwt, smartgwt

我有模态窗口的问题。我称这两种方法`setIsModal(true)`，`setShowModalMask(true)`但为什么我的窗口不是模态的？

这是代码：

```
Window summaryWindow = new Window();
summaryWindow.setWidth(950);
summaryWindow.setHeight(620);
summaryWindow.centerInPage();
summaryWindow.setCanDragReposition(false);
summaryWindow.setIsModal(true);
summaryWindow.setShowModalMask(true);
summaryWindow.setShowMinimizeButton(false);
summaryWindow.setTitle("Example");
summaryWindow.addItem(new Button("Example");
summaryWindow.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:16:40.397

你得到的例外是有效的。在任何与 GWT 相关的技术中，您都会发现许多 API 功能来设置 GWT 小部件的属性。例如，对于`Window`您拥有的小部件`setWidth`，`setHeight`,`centerInPage`等...

现在，其中一些属性必须在小部件在浏览器的 DOM 中呈现之前应用，其中一些必须在小部件在浏览器的 DOM 中呈现之后应用。

`ShowModalMask()`是您只能在小部件呈现之前设置的属性。 `centerInPage()`是在浏览器的 DOM 中呈现 Window 的属性，这就是您收到异常的原因。

以正确的顺序应用属性（`centerInPage()`在`ShowModalMask()`您的情况下）以避免这种异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:16:31.257

我正在使用 smartgwt 2.4：如果我尝试使用包含在方法中的按钮调用您的代码，我会收到一个错误，表明我无法使用 setModalMask( `IllegalStateException - this property cannot be changed after the component has been created`) 对其进行修改。在实例化之后移动此调用后，它正在工作：

```
Window summaryWindow = new Window();
summaryWindow.setShowModalMask(true); 
```

我不太明白，但让我知道它是否也适合你

# google-trends - 自动从谷歌趋势中提取 csv 文件

> ID：14772235
> 
> 赞同：5
> 
> 时间：2013-02-08T12:08:19.190
> 
> 标签：google-trends

pyGTrends 似乎不起作用。在 Python 中给出错误。

pyGoogleTrendsCsvDownloader 似乎可以工作，登录，但在收到 1-3 个请求（每天！）后抱怨配额用尽，即使使用相同的登录名/IP 手动下载也可以完美运行。

底线：两者都不起作用。通过stackoverflow搜索：人们试图从谷歌中提取csv的许多问题，但我找不到可行的解决方案......

提前感谢您：谁能提供帮助。代码应该怎么改？您知道另一种可行的解决方案吗？

这是 pyGoogleTrendsCsvDownloader.py 的代码

```
import httplib
import urllib
import urllib2
import re
import csv
import lxml.etree as etree
import lxml.html as html
import traceback
import gzip
import random
import time
import sys

from cookielib import Cookie, CookieJar
from StringIO import StringIO

class pyGoogleTrendsCsvDownloader(object):
'''
Google Trends Downloader
Recommended usage: 
from pyGoogleTrendsCsvDownloader import pyGoogleTrendsCsvDownloader
r = pyGoogleTrendsCsvDownloader(username, password)
r.get_csv(cat='0-958', geo='US-ME-500')
'''
def __init__(self, username, password):
    '''  
Provide login and password to be used to connect to Google Trends
All immutable system variables are also defined here
'''

    # The amount of time (in secs) that the script should wait before making a request.
    # This can be used to throttle the downloading speed to avoid hitting servers too hard.
    # It is further randomized.
    self.download_delay = 0.25

    self.service = "trendspro"
    self.url_service = "http://www.google.com/trends/"
    self.url_download = self.url_service + "trendsReport?"

    self.login_params = {}
    # These headers are necessary, otherwise Google will flag the request at your account level
    self.headers = [('User-Agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0'),
                    ("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"),
                    ("Accept-Language", "en-gb,en;q=0.5"),
                    ("Accept-Encoding", "gzip, deflate"),
                    ("Connection", "keep-alive")]
    self.url_login = 'https://accounts.google.com/ServiceLogin?service='+self.service+'&passive=1209600&continue='+self.url_service+'&followup='+self.url_service
    self.url_authenticate = 'https://accounts.google.com/accounts/ServiceLoginAuth'
    self.header_dictionary = {}

    self._authenticate(username, password)

def _authenticate(self, username, password):
    '''
Authenticate to Google:
1 - make a GET request to the Login webpage so we can get the login form
2 - make a POST request with email, password and login form input values
'''

    # Make sure we get CSV results in English
    ck = Cookie(version=0, name='I4SUserLocale', value='en_US', port=None, port_specified=False, domain='www.google.com', domain_specified=False,domain_initial_dot=False, path='/trends', path_specified=True, secure=False, expires=None, discard=False, comment=None, comment_url=None, rest=None)

    self.cj = CookieJar()
    self.cj.set_cookie(ck)
    self.opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(self.cj))
    self.opener.addheaders = self.headers

    # Get all of the login form input values
    find_inputs = etree.XPath("//form[@id='gaia_loginform']//input")
    try:
        #
        resp = self.opener.open(self.url_login)

        if resp.info().get('Content-Encoding') == 'gzip':
            buf = StringIO( resp.read())
            f = gzip.GzipFile(fileobj=buf)
            data = f.read()
        else:
            data = resp.read()

        xmlTree = etree.fromstring(data, parser=html.HTMLParser(recover=True, remove_comments=True))

        for input in find_inputs(xmlTree):
            name = input.get('name')
            if name:
                name = name.encode('utf8')
                value = input.get('value', '').encode('utf8')
                self.login_params[name] = value
    except:
        print("Exception while parsing: %s\n" % traceback.format_exc())

    self.login_params["Email"] = username
    self.login_params["Passwd"] = password

    params = urllib.urlencode(self.login_params)
    self.opener.open(self.url_authenticate, params)

def get_csv(self, throttle=False, **kwargs):
    '''
Download CSV reports
'''

    # Randomized download delay
    if throttle:
        r = random.uniform(0.5 * self.download_delay, 1.5 * self.download_delay)
        time.sleep(r)

    params = {
        'export': 1
    }
    params.update(kwargs)
    params = urllib.urlencode(params)

    r = self.opener.open(self.url_download + params)

    # Make sure everything is working ;)
    if not r.info().has_key('Content-Disposition'):
        print "You've exceeded your quota. Continue tomorrow..."
        sys.exit(0)

    if r.info().get('Content-Encoding') == 'gzip':
        buf = StringIO( r.read())
        f = gzip.GzipFile(fileobj=buf)
        data = f.read()
    else:
        data = r.read()

    myFile = open('trends_%s.csv' % '_'.join(['%s-%s' % (key, value) for (key, value) in kwargs.items()]), 'w')
    myFile.write(data)
    myFile.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-21T20:22:54.143

虽然我不知道python，但我可能有一个解决方案。我目前在 C# 中做同样的事情，虽然我没有得到 .csv 文件，但我通过代码创建了一个自定义 URL，然后下载了该 HTML 并保存到一个文本文件（也通过代码）。在这个 HTML 中（第 12 行）是创建用于 Google 趋势的图表所需的所有信息。然而，这里面有***很多***不必要的文本需要删减。但无论哪种方式，你最终都会得到相同的结果。谷歌趋势数据。我在这里发布了对我的问题的更详细的答案：

[从 Google 趋势下载 .csv 文件](https://stackoverflow.com/questions/40647404/downloading-csv-file-from-google-trends)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-04T12:57:52.397

有一个名为 pytrends 的替代模块 - [https://pypi.org/project/pytrends/](https://pypi.org/project/pytrends/)真的很酷。我会推荐这个。

示例用法：

```
import numpy as np
import pandas as pd                        
from pytrends.request import TrendReq
pytrend = TrendReq()

#It is the term that you want to search
pytrend.build_payload(kw_list=["Eminem is the Rap God"])

# Find which region has searched the term
df = pytrend.interest_by_region()
df.to_csv("path\Eminem_InterestbyRegion.csv") 
```

如果您有要搜索的术语列表，您可以使用“for 循环”根据您的意愿自动执行洞察。

# java - 非法监视器状态异常

> ID：14772236
> 
> 赞同：0
> 
> 时间：2013-02-08T12:08:21.607
> 
> 标签：java, multithreading, exception, asynchronous, concurrency

如何将轮询线程传递给另一个线程进行处理。程序执行存在于具有 main 方法和线程池的控制器类中：

主类控制器

```
 public static void main(String[] args) throws InterruptedException {
    RunnableController controller = new RunnableController();

    System.out.println(incomingQueue.size());

    controller.initializeDb();
    controller.initialiseThreads();
    System.out.println("Polling");
    controller.initialUpdate(); 

} 
```

具有轮询类线程的方法

```
 private void initialiseThreads()
{       
    try {

        threadExecutorRead = Executors.newFixedThreadPool(10);
PollingSynchronizer reader = new PollingSynchronizer(incomingQueue,dbConnection);   
        threadExecutorRead.submit(reader);

    }catch (Exception e){
        e.printStackTrace();
    }

} 
```

具有处理器类线程的方法

```
 private void initialUpdate()
{
    RunnableController.outgoingQueue = incomingQueue;
    if((RunnableController.outgoingQueue)!= null){
        try {
            threadExecutorFetch = Executors.newFixedThreadPool(10);
        MessageProcessor updater = new MessageProcessor(outgoingQueue, dbConnection);
            threadExecutorFetch.submit(updater);
            DBhandler dbhandler = new DBhandler();
            dbhandler.updateDb(getOutgoingQueue());

        } catch (Exception e) {

        }
    }

} 
```

Poller 类和控制器类

```
 public void run() {// Thread in the Poller class 
    int seqId = 0;
    while(true) {
        List<KpiMessage> list = null;
        try {
            list = fullPoll(seqId);
            if (!list.isEmpty()) {
                seqId = list.get(0).getSequence();
                incomingQueue.addAll(list);
                this.outgoingQueue = incomingQueue;             
                System.out.println("waiting");
                System.out.println("new incoming message");
                while(true){
                        wait(3000);
                        notify();
                }
            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
}

          public void run() {// Second thread in the Processor Class
    synchronized (this){
        RunnableController.setOutgoingQueue(generate(outgoingQueue));
    }
    notify();
}   
 } 
```

**我的任务和问题是：**

1.控制器应该同时处理线程轮询器和处理器，它应该只调用轮询器和处理器线程

2.现在我的问题是如何让轮询线程等待3秒并并行通知处理器。

**我收到如下错误：**

```
java.lang.IllegalMonitorStateException
    at java.lang.Object.wait(Native Method)
    at PollingSynchronizer.run(PollingSynchronizer.java:76)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

**这里如何实现异步处理？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:21:17.107

您需要先阅读类似的[内容](https://stackoverflow.com/questions/886722/how-to-use-wait-and-notify-in-java)。`wait()`如果不握住对象的监视器，您将无法使用。此外，乍一看，您似乎在多线程上下文中使用了非最终静态成员。尝试使该线程安全。

# ios - iOS 自动刷新视图元素

> ID：14772242
> 
> 赞同：0
> 
> 时间：2013-02-08T12:08:52.380
> 
> 标签：ios

我正在从 API 获取数据并存储到文件中。我每 10 分钟使用`NSTimer`.

这对我来说很有用。

但是，我想在获取数据时自动刷新我的视图之一。我可以调用视图的函数并记录数据，但无法使用以下代码更新标签的文本：

```
UIViewController *vc = [UIViewController alloc] init];

vc.showLabels; 
```

有人知道如何刷新可见的 ViewController 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:20:41.197

我使用计时器解决了我的问题

```
NSTimer timer = [NSTimer scheduledTimerWithTimeInterval:refreshTime target:self selector:@selector(refreshPage) userInfo:nil repeats:YES];

-(void)refreshPage
{

    // If user currently navigate on TableView page then refresh stock page.
    if([currentViewController isKindOfClass:[CustomViewController class]])
    {
        [currentViewController fetchDataFromServer];
    }
    else
    {
        // else fetch stock data and update the storage file.
        [self refreshStockDetails];
    }    
} 
```

# c# - 从列表项中删除分号

> ID：14772245
> 
> 赞同：0
> 
> 时间：2013-02-08T12:09:04.093
> 
> 标签：c#, generic-list

我有一个包含各种字符串记录的列表。一些记录由分号分隔的各种子记录组成。例如如下

> 生活技能
> 
> 没有相关主题
> 
> 沟通
> 
> 职业; 听力技巧; 个人发展; 提问技巧；辅导/指导；认出; 招聘与选拔。
> 
> 客户服务
> 
> 体育

我现在要做的是**遍历记录，将所有包含分号的记录分开，**并**确保没有重复**。

```
for(int i=0; i<lst.Count; i++) {
    // seperate the records that contains ';' into individual unique items
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:21:57.103

```
 List<String> lst = new List<string>();
        lst.Add("Life Skills");
        lst.Add("Life Skills");
        lst.Add("Communication");
        lst.Add("Careers; Listening Skills;Life Skills; Personal Development; Questioning Skills; Coaching/Mentoring; Recognition; Recruitment and Selection.");
        lst.Add("No Related Topics");

        List<string> newList = new List<string>();

        foreach (string str in lst)
        {
            var temp = str.Split(';');
            if (temp.Length > 1)
            {
                for (int i = 0; i < temp.Length; i++)
                {
                    if (!newList.Contains(temp[i]))
                    {
                        newList.Add(temp[i]);
                    }
                }
            }
            else
            {
                if (!newList.Contains(str))
                {
                    newList.Add(str);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:15:39.110

你可以使用 Linq 来实现它

```
lst = lst
  .SelectMany(i => string.Split(";", i))
  .Select(i => i.Trim())
  .Distinct()
  .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:13:31.447

您想为您的程序实现某种解析器。StackOverflow 不会为您编写程序，但我建议您查看[http://boost-spirit.com/home/](http://boost-spirit.com/home/)

如果您选择自己滚动，可能出于许可原因，加载您的文本输入，可能将结果加载到缓冲区中直到到达分号，然后将缓冲区复制到字符串并将其推送到数组中将是理想的。从那里您可以继续循环，直到到达文件末尾。

# css - CSS - 屏幕尺寸减去常数

> ID：14772249
> 
> 赞同：0
> 
> 时间：2013-02-08T12:09:15.763
> 
> 标签：css

是否有可能以某种方式计算元素的大小作为基本的数学表达式？例如：

```
.wideColumn{max-width:100%-20em;} /*not working*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:12:16.193

这可以使用[LESS](http://lesscss.org/)或[jQuery](http://jquery.com/)来完成。但不幸的是，它不能用纯 CSS 来完成。

但是，使用纯 CSS 可以解决此问题。例如：

```
.wideColumn {
    max-width: 100%;
    margin-right: 10em;
    margin-left: 10em;
} 
```

当然，此示例可能不适用于您的代码。但是还有许多其他解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:11:12.467

简短的回答是不，你不能，至少在 CSS **2、2.1**规范中不行，如果你有兴趣，你也可以看看动态样式表与[LESS](http://lesscss.org/)

或者正如[Sandeep](https://stackoverflow.com/users/567751/sandeep)所说，您可以使用`calc()`CSS3 规范中引入的

[参考](http://www.sitepoint.com/css3-calc-function/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:12:08.783

您不能直接在 CSS 中执行此操作，但可以尝试类似 LESS - [http://lesscss.org/](http://lesscss.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:13:12.347

它可能有朝一日可用，但不是现在 - 在此处阅读更多信息[http://www.w3.org/Style/CSS/specs#math](http://www.w3.org/Style/CSS/specs#math)

# jquery - 使用 JQuery 一段时间后自动关闭窗口

> ID：14772251
> 
> 赞同：2
> 
> 时间：2013-02-08T12:09:22.013
> 
> 标签：jquery, asp.net-mvc

我想使用 jQuery 在 5 秒后自动关闭一个窗口。这是我尝试但没有工作的方法。

```
function SubmitDesignRequestForm() {
    var frm = $("#frmDesignRequestForm").serialize();
    $.post("/Admin/SaveDesignRequestForm", frm, function(data) {
       Notify("Success", "Saved Successfully");
       setTimeout(function() {
         window.close();
       }, 500); 
     });
   });
} 
```

但上面的功能只显示消息但不关闭窗口。

```
 setTimeout(function() {
        Notify("Success", "Saved Successfully");
        window.close();
    }, 5000); 
```

从上面的功能“保存成功”弹出，但窗口没有关闭。

请指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:28:06.577

问题不在您的代码中，我尝试了几乎相同的代码：数据是一个空字符串，但其他一切都是一样的。

它运行良好，但仅在 Google Chrome 中，请参阅以下链接以了解 Firefox 和 IE 可能存在的问题：

Firefox：[window.close() 在 Firefox 上不起作用，有什么解决方法吗？](https://stackoverflow.com/questions/1754374/window-close-doesnt-work-on-firefox-any-work-around)

IE：[如何关闭浏览器窗口而不收到“您要关闭此窗口”提示？](https://stackoverflow.com/questions/57854/how-can-i-close-a-browser-window-without-receiving-the-do-you-want-to-close-thi)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:14:03.967

持续 5 秒`5000`。尝试

```
setTimeout(function() {
         window.close();
       }, 5000); 
```

# vtk - 如何将两个点云或多边形数据集合并为一个？（合并不附加）

> ID：14772254
> 
> 赞同：1
> 
> 时间：2013-02-08T12:09:33.703
> 
> 标签：vtk, scanning, point-clouds, point-cloud-library, 3d-reconstruction

我正在开发一个实时扫描仪，我可以在其中实时扫描表面。到目前为止，我可以扫描表面的一小块并可以保存它。一个补丁意味着仅对表面（点云或三角形）进行 1 次扫描。

我想要的是，我想实时扫描多个补丁。为此，我必须将前一个补丁与当前补丁合并。但我不知道合并两个补丁的标准方式或算法是什么，也不知道哪一个是最好的合并方式，例如，在三角剖分之前（点云合并），或者在三角剖分之后（网格合并）。合并意味着删除重叠的点或三角形

我的想法：如果有两个点云，源和目标然后使用VTK，从目标点云中找到一个最近的点，然后选择一个点，另一个被丢弃。这是一种合并的方法吗？这只是我的想法？但问题是，源和目标中的点数会有所不同。

如何使用 VTK 合并两个补丁，请指导我？

还建议我实现实时扫描任务的标准和最佳方式是什么。

**案例#1：**
i）点云采集

ii) 注册

iii) 合并

iv) 三角测量

**案例#2：**

i) 点云采集

ii) 注册

iii) 三角测量

iv) 合并

**案例#3：**

i) 点云采集

ii) 三角测量

iii)注册

iv) 合并

请指导我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T06:05:20.673

我在这里放了一张便条，因为我一直在考虑类似的事情。

您建议的方法（在合并期间进行最近邻搜索）似乎是可行的。如果您基于一些理想的分辨率而不是搜索 1 个邻居进行半径搜索，则合并的两个云之间存在不同大小的问题似乎不是问题。

要管理您的案例 1，您可以尝试合并所有云，然后在三角剖分之前使用体素网格（例如 pcl::VoxelGrid）进行下采样（这将是最简单的方法，但可能不是您想要的）。

封装在 pcl::GreedyProjectionTriangulation 中的算法似乎主要在下面的论文 [1] 中描述。在那篇论文中，他们还描述了一个增量网格更新过程，这是对算法的一个小改动（他们删除了靠近新点的三角形并再次开始贪婪三角剖分）。据我所知，这还没有在 PCL 中实现，但应该不会太难。这将对应于您的情况 2。但是，您得到的网格将取决于您合并云的顺序。因为这是一项时间投资，我建议先尝试基于点的合并。

[1] 马顿、ZC、RB Rusu 和 M. Beetz。2009.“关于大型和嘈杂点云的快速表面重建方法”。在 IEEE 机器人与自动化国际会议上，3218-3223。[http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5152628](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5152628)。

# c# - Visual Studio 2012 中 C# 折叠区域的颜色

> ID：14772258
> 
> 赞同：15
> 
> 时间：2013-02-08T12:09:44.203
> 
> 标签：c#, colors, visual-studio-2012

我正在使用 Visual Studio 2012 Ultimate 版本 11.0.51106.01 更新 1。我将黑色配置为背景色，将白色配置为前景色，但 C# 折叠区域出现黑色前景，使其不可见。我该如何纠正？

具有正确颜色的扩展区域：

![扩大区域](../Images/49007bd4e804c4d100e66c1058241d36.png "扩大区域")

折叠时，该区域变得不可见（黑色前景和黑色背景）：

![塌陷区](../Images/76cc6790b893d88daf860377d7dec20c.png "塌陷区")

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-10T20:19:19.307

我有同样的问题。我发现“折叠的文本（折叠）”确实有效。诀窍是您必须*重新启动*Visual Studio 才能应用更改。我不确定为什么会这样（因为所有其他颜色变化都会立即发生），但我已经通过多次更改来验证它。

我已经使用内置 UI 以及[Visual Studio 2012 Color Theme Editor](http://visualstudiogallery.msdn.microsoft.com/366ad100-0003-4c9a-81a8-337d4e7ace05)扩展对其进行了测试。这两种情况都需要重新启动（尽管我不能确定是否仅仅安装了扩展程序会导致它表现不佳）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T22:46:53.377

如果您不想重新启动 VS，只需按照 ijprest 的描述为“折叠文本（折叠）”创建自定义颜色。这适用于 VS 2015。但是，如果您选择其中一种预设颜色，您仍然需要重新启动 VS。

# android - aChartEngine 处理大数据时运行缓慢

> ID：14772263
> 
> 赞同：3
> 
> 时间：2013-02-08T12:10:03.217
> 
> 标签：android, graph, achartengine

我正在android应用程序中使用achartengine（achartengine-1.0.0），它适用于<= 600这样的小数据，但是当我绘制大约**2000+**（**将使用大约8000或更多**）的点时，图形变得非常慢！ ！即使用户等待延迟，但当触摸它并移动图形时，图形又需要很长时间！

我怎样才能摆脱这种缓慢？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:42:26.000

1.1.0 版本包含一组性能改进。[你可以在这里](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载这个版本。

大部分时间都花在渲染上，所以这是你可以改进的地方：

*   禁用抗锯齿`mRenderer.setAntialiasing(false);`
*   不要使用`PointStyle`s

其他建议：

*   仅添加要显示到模型中的数据。2000点的图表是什么样子的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:01:16.933

正如 Leco 在上面的评论中提到的，删除 setLineWidth() 或将其设置为较低的值确实会大大提高性能。

# nagios - Nagios：尝试运行自定义命令返回 126

> ID：14772264
> 
> 赞同：1
> 
> 时间：2013-02-08T12:10:04.957
> 
> 标签：nagios

我试图让 Nagios 执行自定义 java 命令，但我总是收到错误 126。

```
[1360324906] Warning: Return code of 126 for check of service 'Java Process Test' on host 'localhost' was out of bounds.Make sure the plugin you're trying to run is executable. 
```

现在我检查了几件事，但由于我是这里的新手，我可能错过了一些东西。这里有一些关于环境的信息：

```
-rwxr-xr-x. 1 root root     2938 Aug 17 15:39 check_wave
drwxr-xr-x. 2 root root     4096 Jan 13 15:08 eventhandlers
drwxr-xr-x. 2 root root     4096 Feb  7 17:22 jars
-rwxr-xr-x. 1 root root    38696 Aug 17 15:39 negate
-rwxr-xr-x. 1 root root      886 Feb  8 12:47 test_java_plugin.sh 
```

test_java_plugin.sh 是我的测试脚本，“jars”是 jar 所在的当前目录

脚本是这样的：

```
#!/bin/bash

#This will get the output of process
output=$(/usr/java/latest/bin/java -cp .:/usr/lib64/nagios/plugins/jars/SimpleNagiosPlugin.jar it.nagios.SimpleTest)
#This will catch the result returned by last process that is our java command
java_result=$?
echo "$java_result: $output"
exit $java_result 
```

并且在控制台手动启动时运行良好

```
[root@bw plugins]# ./test_java_plugin.sh 
0: This is an OK message 
```

忘记添加命令定义：

```
# 'test_java_plugin' command definition
define command{
        command_name   test_java_plugin
        command_line   $USER1$/test_java_plugin.sh
        } 
```

此外，根据评论中的请求，我还添加了我的测试类的当前 java 代码

```
public static void main(String[] args) {
    System.out.println("This is an OK message");
    System.exit(0);
} 
```

刚从 shell 启动命令我还是 0：

```
[root@bw plugins]# /usr/java/latest/bin/java -cp .:/usr/lib64/nagios/plugins/jars/SimpleNagiosPlugin.jar it.nagios.SimpleTest
This is an OK message
[root@bw plugins]# echo $?
0 
```

我还应该检查什么来确定这里出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-11T05:45:45.007

我遇到了类似的问题，发现 SELinux 阻止了我。可以在 /var/log/audit/audit.log 中检查相同的内容

如果您收到 nagios_t/nagios_system_plugin_t 的拒绝错误，请使用以下命令将它们添加到 selinux 的许可列表中，而不是完全关闭它

```
semanage permissive -a nagios_t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:38:04.880

你应该尝试以 nagios 用户身份运行 test_java_plugin.sh，你可以给 nagios 一个 shell (temporary) 。考虑到 root 环境不同于 nagios 环境。当以 nagios 运行 test_java_plugin.sh 时，您可以添加“env > env_log_file”以查看运行时的环境是什么。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-22T16:39:49.083

错误 126 表示插件已找到但不可执行。

你可以尝试两件事。尝试以 nagios 用户身份运行插件并检查错误。

或者

这确实解决了我遇到的一个问题。试试看。希望它可以工作

```
 /bin.bash -l -c "/#{path to plugin}/test_java_plugin.sh" 
```

# facebook - Facebook喜欢框定制

> ID：14772268
> 
> 赞同：1
> 
> 时间：2013-02-08T12:10:19.427
> 
> 标签：facebook, facebook-likebox

我想自定义 facebook 之类的框，数据流。我希望能够更改文本大小、字体。 [http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

谁能帮我？

# javascript - 用于 CSS 转换的替代 promise() 函数

> ID：14772269
> 
> 赞同：1
> 
> 时间：2013-02-08T12:10:20.343
> 
> 标签：javascript, jquery, css

我用 8*8 的 div 元素制作了一个动画游戏，目前我正在使用 JQuery 中的动画功能。

当我调用动画开始的函数时，我使用以下代码检查动画是否全部停止：

```
function start_animation()
{
  //the animations start here
  $("div").promise().done(function() {
     //here comes the code for when the animations stoped
  }
} 
```

现在我想用 css 转换做动画，但我找不到检查所有动画是否都完成的解决方案。

我试过了：

```
$("div").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function(){ ... }); 
```

但这会在每次完成 1 个动画时给出一个回调。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:07:16.063

查看该`promise`函数的作用[https://github.com/jquery/jquery/blob/master/src/queue.js#L119](https://github.com/jquery/jquery/blob/master/src/queue.js#L119)。您将需要使用类似的代码，只是您不会挂钩`resolve`动画队列，而是将其绑定为事件处理程序。

简而言之：

```
function start_animation() {
  var divs = $("div");
  // the animations start here

  var count = divs.length;
  // using `.one` automatically unbinds the handler
  divs.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function() {
    if ( --count == 0) {
      // here comes the code for when all the animations stoped
    }
  }
} 
```

# javascript - 使用 Delete Button 而不是 Html.ActionLink 来调用控制器的动作？

> ID：14772273
> 
> 赞同：0
> 
> 时间：2013-02-08T12:10:41.840
> 
> 标签：javascript, asp.net-mvc

我有一个 Html.ActionLink 像：

`<%: Html.ActionLink("Delete", "DeleteCRMRequest", new { Id = item.Id })%>`

我有一个像这样的场景：

![设想](../Images/e65922041260c90a19d1dd30a401eabf.png)

我需要删除按钮而不是 Html.ActionLink。单击删除时，我想提示确认，如果用户选择是，则删除记录，否则不删除。我知道它可以使用 javascript 来完成，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:12:42.403

```
<%= Html.ActionLink(
    "Delete", 
    "DeleteCRMRequest", 
    new { id = item.Id }, 
    new { onclick = "return confirm('Are you sure you wish to delete this article?');" }) 
%> 
```

# java - UTF-8 文本（印地语）未显示在浏览器窗口或 Eclipse 控制台上

> ID：14772275
> 
> 赞同：1
> 
> 时间：2013-02-08T12:10:48.350
> 
> 标签：java, unicode, character-encoding

我必须在浏览器屏幕上以印地语（或任何区域语言）显示文本。我将从数据库中获取此文本。

为此，我从一个非常基本的级别开始：

```
String escapedStr = "\\u0905\\u092d\\u0940 \\u0938\\u092e\\u092f \\u0939\\u0948 \\u091c\\u0928\\u0924\\u093e";
String hindiText = StringEscapeUtils.unescapeJava(escapedStr);
System.out.println(hindiText);
return hindiText; 
```

我能够在变量中完美地获得印地语文本`hindiText`。但是当我在 Eclipse 控制台或浏览器屏幕上打印它时，我只得到`???? ?? ??`

我将浏览器和 Eclipse 控制台的默认字符编码设置为 UNICODE(UTF-8)。但仍然没有成功。

谁能帮我解决这个问题？我缺少什么设置？

仅供参考 - 我可以在浏览器中打开印地语网站。所以语言设置不是问题。

**编辑**

由于我在视图中使用 JSP 文件，因此我已将以下内容添加到我`web.xml`的全局设置字符编码中。参考：[关注这个](http://balusc.blogspot.in/2009/05/unicode-how-to-get-characters-right.html)

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

但是还是没有成功！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T13:11:25.370

> *但是当我在 Eclipse 控制台或浏览器屏幕上打印它时，我只得到 ???? ?? ??*

至于 Eclipse 部分，您需要告诉它使用 UTF-8 作为其标准输出控制台。您可以通过*Window > Preferences > General > Workspace > Text File Encoding*进行设置。

![在此处输入图像描述](../Images/8b72b65ed44dd19e0bdadf708e928089.png)

至于 JSP 部分，您需要告诉它使用 UTF-8 来编写 HTTP 响应体。您可以通过以下任一方式设置

```
<%@page pageEncoding="UTF-8"%> 
```

在每个单独的 JSP 或应用程序范围内

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

在`web.xml`.

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:36:03.967

问题是您使用的输出流可能具有您平台的“默认”编码。在 Windows 上，这通常是一些糟糕的 MS 8 位代码页。

养成通过 PrintWriters 打印文本的习惯，并确保使用正确的编码创建它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:22:35.323

以这种方式使用您的代码

```
System.out.println("\u0905\u092d\u0940\u0938\u092e\u092f\u0939\u0948\u091c"); 
```

# java - 为什么 UIComponentBase 类不公开 setAttribute() 方法？

> ID：14772276
> 
> 赞同：0
> 
> 时间：2013-02-08T12:10:52.413
> 
> 标签：java, jsf

[UIComponentBase](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponentBase.html)有 `public abstract Map<String, Object> getAttributes()`方法但没有 setAttributes() 方法。为什么这样设计？我假设设计师想让他的地图不可修改，但为什么呢？

我的要求是清理组件的所有属性。我将如何这样做而不是调用每个 setter ？我无法在属性映射上调用 clear()，因为[它会引发 UnsupportedOperationException](https://stackoverflow.com/q/14772132/1527084)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:19:00.047

因为它不是“只是”一个`HashMap`左右。[这是一个自定义地图，具有javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)中提到的以下特定功能：

> 返回的实现必须支持所有标准和可选的 Map 方法，并支持以下附加要求：
> 
> *   `Map`实现必须实现`java.io.Serializable`接口。
> *   任何添加键或值的尝试都`null`必须抛出`NullPointerException`.
> *   任何添加不是`String`必须的键的尝试都会抛出`ClassCastException`.
> *   如果指定为键的属性名称与 this`UIComponent`的实现类的属性匹配，则以下方法将具有特殊行为：
>     *   `containsKey`- 返回`false`。
>     *   `get()`- 如果属性可读，则调用getter方法并返回返回值（将原始值包装在其对应的包装类中）；否则抛出`IllegalArgumentException`。
>     *   `put()`- 如果属性是可写的，则调用 setter 方法来设置相应的值（在其相应的包装类中展开原始值）。如果该属性不可写，或者尝试将原始类型的属性设置为`null`，则抛出`IllegalArgumentException`。
>     *   `remove`- 投掷`IllegalArgumentException`。

特别是`get()`很特别。它不“只是”返回与映射键关联的值，而是实际上调用当前组件上的 getter 方法，例如`component.getFoo()`，当`component.getAttributes().get("foo")`被请求时。这些 getter 方法通常又委托给`StateHelper`.

这`setAttributes()`将允许覆盖并因此破坏此合同，并可能导致整个 JSF 组件树工作失败。

# php - Phing: gitclone 非常慢

> ID：14772282
> 
> 赞同：1
> 
> 时间：2013-02-08T12:11:15.227
> 
> 标签：php, git, github, phing

我的 build.xml 配置的一部分是

```
<gitclone repository="${repo}" targetPath="${directory}" /> 
```

我正在克隆的存储库不大，大约 30M 和 10k 个对象。如果我`git clone`在控制台中进行，克隆大约需要 30 秒，这没关系。但如果我尝试执行 phing config，最多可能需要 30 分钟。有趣的是，文件在大约相同的 30 秒内出现在目录中，但没有任何反应，phing 构建脚本没有进一步执行。

`<gitclone />`此外，运行或运行没有区别`<exec command="git clone ${repo} ${directory}" />`，它们都需要太多时间。

我在 Ubuntu 和 github 私人仓库上使用最新的 Phing 版本，这意味着我每次克隆时都需要输入用户名和密码。但是，如果我先在控制台中执行 git clone，然后（虽然我的凭据仍然被记住），Phing 工作得很好。

它可能是一个错误，还是其他什么？

# c# - 从 where 子句或第一个元素返回一个元素

> ID：14772286
> 
> 赞同：2
> 
> 时间：2013-02-08T12:11:24.620
> 
> 标签：c#, linq, entity-framework-5

我正在尝试以以下方式使用 Entity Framework 5 查询我的数据库：

`userProfile = context.UserProfiles.SingleOrDefault(up => up.UserId == userId && up.IsActive);`

现在，当存在多个用户配置文件时（由于`SingleOrDefault`），这显然会引发异常。

如何构造我的查询，以便我从**当前**用户 ( `up.UserId == userId`)**或**当没有用户配置文件处于活动状态时获得第一个用户配置文件？

我完全知道如何在两个查询中做到这一点，但我认为这将是太多的开销，这应该可以只用一个查询：

```
userProfile = context.UserProfiles.Single(up => up.UserId == userId && up.IsActive); // throws exception when not exactly one

if (userProfile == null)
{
    userProfile = context.UserProfiles.FirstOrDefault(up => up.UserId == userId);
} 
```

**编辑：**

我现在使用它作为我的参数，并且可以完美地使用该`IsActive`属性： `context.UserProfiles.Where(up => up.UserId == userId).OrderByDescending(up => up.IsActive).FirstOrDefault();`

现在，当没有`IsActive == true`行时，我想按`LastUsed`日期对它们进行排序，然后选择最近使用的那个：

`context.UserProfiles.Where(up => up.UserId == userId).OrderByDescending(up => up.IsActive).OrderByDescending(up => up.LastUsed).FirstOrDefault();`

可悲的是，这**总是**返回最新的，即使有一行包含`IsActive == true`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:21:46.277

怎么样：

```
var userProfile = context.UserProfiles.Where(up => up.UserId == userId)
                       .OrderByDescending(up => up.IsActive).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:37:26.310

您的第二个`OrderByDescending`忽略前一个所做的任何排序。您需要`ThenByDescending`改用：

```
context.UserProfiles
    .Where(up => up.UserId == userId)
    .OrderByDescending(up => up.IsActive)
    .ThenByDescending(up => up.LastUsed)
    .FirstOrDefault(); 
```

# javascript - 使用 jstl 填充 tr id 标签

> ID：14772287
> 
> 赞同：0
> 
> 时间：2013-02-08T12:11:24.713
> 
> 标签：javascript, database, oracle, jstl

我正在尝试从数据库中检索表并将其填充到表中。该表可以使用 EditableGrid ( [http://www.editablegrid.net/en](http://www.editablegrid.net/en) ) 进行编辑。我像这样自动填充表格：

# 报告结果

```
<table id="htmlgrid" border="1">

    <!-- column headers -->
    <tr>
        <c:forEach var="columnName" items="${result.columnNames}">
            <th><c:out value="${columnName}" /></th>
        </c:forEach>
    </tr>

    <!-- column data -->
    <c:forEach var="row" items="${result.rowsByIndex}">
        <tr>
            <c:forEach var="column" items="${row}">
                <td><c:out value="${column}" /></td>
            </c:forEach>
        </tr>
    </c:forEach>
</table> 
```

检索结果如下：

```
c = ConnectionManager.getConnection();
            ps = c.prepareStatement("select * from test_persons",
                    ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY);
            rs = ps.executeQuery();
            Result result = ResultSupport.toResult(rs);

            request.setAttribute("result", result);
            RequestDispatcher rd = request
                    .getRequestDispatcher("/display.jsp");
            rd.forward(request, response); 
```

问题是，为了使用 EditableGrid，tr 标签需要一个 id，例如：

```
 <tr id="R1">
                <td>Duke</td>
                <td>Patience</td>
                <td>33</td>
                <td>1.842</td>
                <td>uk</td>
                <td>patience.duke@gmail.com</td>
                <td>false</td>
                <td>11/12/2002</td>
            </tr>
            <tr id="R2">
                <td>Rogers</td>
                <td>Denise</td>
                <td>59</td>
                <td>1.627</td>
                <td>us</td>
                <td>rogers.d@gmail.com</td>
                <td></td>
                <td>07/05/2003</td>
            </tr> 
```

我将如何使用 jstl 自动放入标签？数据库可以根据查询返回任意数量的行。这可能吗？或者是否有更好的解决方案来从结果集中填充表并使其可编辑（为了稍后更新数据库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:14:51.947

好吧......在你的行循环中，你会写：

```
<c:forEach var="row" items="${result.rowsByIndex}">
    <tr id="${row.id}"> 
```

# android - Eclipse 从现有源导入时更改项目的 Android SDK

> ID：14772288
> 
> 赞同：4
> 
> 时间：2013-02-08T12:11:40.113
> 
> 标签：android, eclipse

`project.properties`当我从现有源导入项目时，Eclipse 或 Android 正在更改我的文件。

* * *

当我从 SVN“导出”一个现有项目时，该`project.properties`文件引用了该项目的正确 SDK：

```
# Project target.
target=Google Inc.:Google APIs:7 
```

我可以通过在文本编辑器中打开文件来看到这一点。我还没有把它作为一个项目导入到 Eclipse 中。

然后我选择使用 File...New...Android Project from Existing Source 将其导入 Eclipse。

Eclipse 导入项目，并立即在项目浏览器窗口中显示正确的 SDK。到目前为止完美。

大约一秒钟后，我可以看到 SDK 更改为 Android 2.1。Eclipse 自动进行了更改！

我的 project.properties 文件已更新：

```
# Project target.
target=android-8 
```

* * *

**总结一下：**

*   从 SVN 导出项目 - project.properties 指向 Google API 7。
*   将此导入 Eclipse - project.properties 自动更改为 Android API 8。

我已经在不同的开发人员的机器上检查了这个 - 相同的行为。（即 Android SDK 工具 21.0.0 和 21.0.1）

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:23:27.473

这是 Eclipse 的错误，目前没有人可以为它做任何事情，直到 eclipse 开发人员解决了这个错误。

[请参阅此处报告的错误 - 问题 40153：项目的 ADT 导入重命名项目，更改兼容性级别](http://code.google.com/p/android/issues/detail?id=40153)

（此外，这个错误写得很好，并在此处提到，与此处提出的问题相比...大声笑..顺便说一句，对于您现在无法解决的问题感到抱歉）

谢谢，乐于助人。

# php - send mail without passwords

> ID：14772290
> 
> 赞同：0
> 
> 时间：2013-02-08T12:11:43.247
> 
> 标签：php, email, passwords, smtp-auth

Is there any way in php or javascript to send mail without passwords. I need to send mail without asking for his passwords. Please help me finding the solution.

Thanks in advance.

**EDIT**

this the code i tried

```
<?php

 error_reporting(E_ALL);
$to = "person2@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "person2@gmail.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers) or die("errors");
echo "Mail Sent.";
?> 
```

and it displays errors as o/p and not sending mail

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:15:44.337

With PHP you can just use the `mail()` function, this does not require the user to enter his/her password.

The SMTP server can be set in `php.ini`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:01:28.380

you can refer below link for this

[http://www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)

mail() function does not work on localhost so check this on server.

# python - 如何在python中定义没有默认值的类属性

> ID：14772298
> 
> 赞同：7
> 
> 时间：2013-02-08T12:12:20.197
> 
> 标签：python, class, python-2.7

我是一名学习 python 的 C# 开发人员。

如果我想定义一个具有某些属性的类，但不提供属性的默认值，那是怎么做的？

例如（这是我对如何做的最好猜测）：

```
class Spam
    eggs = None
    cheese = None 
```

或者，这是否合法：

```
class Spam
    eggs
    cheese 
```

或者是其他东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T12:13:05.070

你没有。您稍后分配给属性，或将它们设置为`None`.

没有值的属性不是属性。作为动态的，稍后分配属性而不必在类中声明它是非常好的。

# xpath - XPath and and or 语法，写这个 Xpath 的任何更短的方法

> ID：14772300
> 
> 赞同：3
> 
> 时间：2013-02-08T12:12:25.813
> 
> 标签：xpath, operators

我正在过滤一个大文件，其中包含儿童鞋的类型，男人和女人。

现在我想过滤掉某些类型的女鞋，下面的 xpath 可以工作，但是我正在使用的程序有 xpath 长度限制。所以我想知道是否有更短/更有效的方法来构建这个 xpath

```
/Products/Product[contains(CategoryPath/ProductCategoryPath,'Halbschuhe') and contains(CategoryPath/ProductCategoryPath,'Damen') or  contains(CategoryPath/ProductCategoryPath,'Sneaker') and contains(CategoryPath/ProductCategoryPath,'Damen') or contains(CategoryPath/ProductCategoryPath,'Ballerinas') and contains(CategoryPath/ProductCategoryPath,'Damen')] 
```

编辑：添加了请求的文件示例

```
<Products>
    <!-- snip -->
    <Product ProgramID="4875" ArticleNumber="GO1-f05-0001-12">
        <CategoryPath>
            <ProductCategoryID>34857489</ProductCategoryID>
            <ProductCategoryPath>Damen &gt; Sale &gt; Schuhe &gt; Sneaker &gt; Sneaker Low</ProductCategoryPath>
            <AffilinetProductCategoryPath>Kleidung &amp; Accessoires?</AffilinetProductCategoryPath>
        </CategoryPath>
        <Price>
            <DisplayPrice>40.95 EUR</DisplayPrice>
            <Price>40.95</Price>
        </Price>
    </Product>
    <!-- snip -->
</Products> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:49:06.363

如果您有 XPath 2.0 可用，您应该尝试该[`matches()`](http://www.w3.org/TR/xquery-operators/#func-matches)功能，甚至[`tokenize()`](http://www.w3.org/TR/xquery-operators/#func-tokenize)按照 Ranon 在他的出色回答中所建议的那样。

使用 XPath 1.0，缩短表达式的一种方法是：

```
/Products/Product[
    CategoryPath/ProductCategoryPath[
        contains(., 'Damen')
            and (  contains(., 'Halbschuhe')
                or contains(.,    'Sneaker')
                or contains(., 'Ballerinas') )] ] 
```

方便的 oneliner，便于复制粘贴：

```
/Products/Product[CategoryPath/ProductCategoryPath[contains(.,'Damen') and (contains(.,'Halbschuhe') or contains(.,'Sneaker') or contains(.,'Ballerinas'))]] 
```

我试图准确地保留您的表达方式，任何更改都不应该以任何方式改变行为。

有一些甚至更短的解决方案必须对 XML 结构等进行假设，但这些解决方案可能会以某种隐藏的方式被破坏，如果没有完整的上下文，我们就无法看到，所以我们不会那样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:03:32.277

如果您的 XPath 引擎支持 XPath 2.0，则可以以更方便（并且可能更高效）的方式完成它：

```
//Product[
  CategoryPath/ProductCategoryPath[
    tokenize(., '\s') = ('Halbschuhe', 'Sneaker', 'Ballerinas') and contains(., 'Damen')
  ]
] 
```

`fn:tokenize($string, $token)`在正则表达式上拆分字符串（此处使用空格，您也可以仅提供空格）。`=`在基于集合的语义上进行比较，因此如果左侧的任何字符串等于右侧的任何字符串，则返回 true。

# wpf - PreviewKeyDown 未触发 ElementHost 中的 Tab 键和箭头键

> ID：14772305
> 
> 赞同：3
> 
> 时间：2013-02-08T12:12:42.847
> 
> 标签：wpf, winforms

我在 Winforms ElementHost 中有一个 WPF 窗口。KeyDown 和 PreviewKeyDown 事件不会为我的窗口上的 Tab 键和箭头键触发。

KeyUp 和 PreviewKeyUp 似乎工作正常，大多数其他键的 PreviewKeyDown 也是如此，例如：AZ，0-9

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:12:42.847

问题是我的窗口是从 Winforms 应用程序打开的。**ElementHost.EnableModelessKeyboardInterop()**方法解决了我的问题。

```
var myWindow = new MyWindow();
ElementHost.EnableModelessKeyboardInterop(myWindow);
myWindow.Show(); 
```

# jquery - 不工作警报使用下一个按钮 jquery 更改文本内容

> ID：14772307
> 
> 赞同：0
> 
> 时间：2013-02-08T12:12:46.007
> 
> 标签：jquery

单击菜单更改内容区域。如果单击“menu2”或“menu3”，则“下一步”按钮不起作用。

```
// Menu click 
$(".nav ul li a").click(function () {
    var x= $(this).parent().attr('id');
    $('.tbClass').removeClass('pTabActive');
    $('#c'+x).addClass('pTabActive');
    $('.nav ul li').removeClass('mActive');
    $(this).parent().addClass('mActive');
    //location.hash = $(this).attr('href'); /* URL Parametre Location */                          
});

// Navigation Click
$(".btnNext").click(function () {
    var x= $('.nav ul li').attr('class');
    var $item=$('.nav ul li.'+x);
    var $index=$('.nav ul li').index($item); // selected menu index
    alert($index);
}); 
```

小提琴：http: [//jsfiddle.net/Ertbihal/kBuCe/13/](http://jsfiddle.net/Ertbihal/kBuCe/13/)

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:18:11.297

首先，您不应该向类或 ID 添加数值……您没有正确引用该类。

以下代码始终显示`mActive`：

```
 var x= $('.nav ul li').attr('class'); 
```

### 工作代码：

```
// Navigation Click
$(".btnNext").click(function () {
    if ($(".mActive").next().length)
    {
        a = $(".mActive");
        a.removeClass("mActive");
        a.next().addClass("mActive");
        b = $(".pTabActive");
        b.removeClass("pTabActive");
        b.next().addClass("pTabActive");
    }
});

$(".btnPrevious").click(function () {
    if ($(".mActive").prev().length)
    {
        a = $(".mActive");
        a.removeClass("mActive");
        a.prev().addClass("mActive");
        b = $(".pTabActive");
        b.removeClass("pTabActive");
        b.pre().addClass("pTabActive");
    }
}); 
```

### 小提琴：http: [//jsfiddle.net/kBuCe/17/](http://jsfiddle.net/kBuCe/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:19:33.230

像这样试试

```
var x= $('.mActive').attr('id');
var $index=$('.nav ul li').index($("#"+x));
alert($index); 
```

[看演示](http://jsfiddle.net/Dineshkani/kBuCe/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:23:56.163

尝试

```
// Menu click 
var menuItems = $(".nav ul li a").click(function () {
    var x = $(this).parent().attr('id');
    $('.tbClass').removeClass('pTabActive');
    $('#c' + x).addClass('pTabActive');
    $('.nav ul li').removeClass('mActive');
    $(this).parent().addClass('mActive');
    //location.hash = $(this).attr('href'); /* URL Parametre Location */                          
});

// Navigation Click
$(".btnNext").click(function () {
    var $item = $('.nav ul li.mActive');
    var $index = $('.nav ul li').index($item); // selected menu index
    if ($index < menuItems.length-1){
        menuItems[$index+1].click();
    }
});

$(".btnPrevious").click(function () {
    var $item = $('.nav ul li.mActive');
    var $index = $('.nav ul li').index($item); // selected menu index
    if ($index > 0){
        menuItems[$index-1].click();
    }
}); 
```

演示在[http://jsfiddle.net/gaby/kBuCe/15/](http://jsfiddle.net/gaby/kBuCe/15/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:58:56.503

我认为这对你来说是完美的：

```
// Menu click 
$(".nav ul li a").click(function () {
  $(this).parent().addClass('mActive').siblings().removeAttr('class');    
  $('#c'+$(this).parent().attr('id')).addClass('pTabActive').siblings().removeClass('pTabActive');  
});

// Navigation Click
$(".btnNext").click(function () {        
  var _index=$('.nav ul li.mActive').index() + 1;
  if(_index <= $('.nav ul li').length)
    $('.nav ul li').eq(_index).find('a').click();   
});

$(".btnPrevious").click(function () {
   var _index=$('.nav ul li.mActive').index() - 1;
   if(_index >= 0)
    $('.nav ul li').eq(_index).find('a').click();   

}); 
```

演示：http: [//jsfiddle.net/ducwidget/kBuCe/18/](http://jsfiddle.net/ducwidget/kBuCe/18/)

# tfs - 如何规则 TFS 2012 文件签入

> ID：14772309
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:12:54.587
> 
> 标签：tfs, tfs-2012

我需要在 TFS 中签入文件时设置规则。

**规则：** 至少一个工作项应该映射到签入文件。用户只能映射分配的工作项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:20:03.057

您将需要添加类型工作项的签入策略，请参见下图，

![在此处输入图像描述](../Images/6819daeaf8e29c5e2a737e3e8881d318.png)

# javascript - 动作后主干排序和更新列表视图

> ID：14772310
> 
> 赞同：1
> 
> 时间：2013-02-08T12:12:55.297
> 
> 标签：javascript, backbone.js

我正在尝试制作我的第一个主干应用程序，但遇到了一个我无法解决的问题..

我有一个链接列表，每个链接旁边都有一个计数器，当我单击一个链接时，我希望计数器增加 1。（我已经做到了，它正在工作）

接下来，如果计数器值高于上面的链接，我希望我单击的链接在列表中向上移动。

像这样。

*   第一个链接 (4)
*   第二个链接 (3)
*   第三个链接 (3) <-- 如果我单击此链接，我希望它向上移动到第二个链接之上。

我曾尝试使用比较器和 sortBy，但每次我尝试某些东西时，我似乎都无法重新渲染视图，并且链接也会向上移动一个位置。

当主视图初始化时，我确实设法对列表进行了排序。但是在我单击其中一个链接后更新视图和列表位置，我无法弄清楚如何完成。

我的代码：

```
(function() {

window.App = {
    Models: {},
    Collections: {},
    Views: {}
};
window.template = function(id) {
    return _.template( $('#' + id).html() );
};

//Modellen
App.Models.Task = Backbone.Model.extend({
    defaults: {
        name: 'Foo Bar Baz',
        uri: 'http://www.google.com',
        counter: 0
    },

    validate: function(attr) {
            if ( ! $.trim(attr.name) ) {
                    return 'En opgave kræver en title.';
            };
    }
});

//Collection
App.Collections.Tasks = Backbone.Collection.extend({ 
    model: App.Models.Task,

    comparator: function(task) {
    return task.get('counter');
    },

});

//Singel view
App.Views.TaskView = Backbone.View.extend({
    tagName: 'li',

    template: template('Tasks'),

    initialize: function() {
        this.model.on('change', this.render, this);
        this.model.on('destroy', this.remove, this);

    },

    events: {
    'click .edit' : 'retTask',
    'click .delete' : 'destroy',
    'click .uriLink' : 'addCounter'
    },

    retTask: function() {
        var newTaskNavn = prompt('Hvad skal det nye navn være', this.model.get('name'));

        if ( !newTaskNavn ) return;
        this.model.set('name', newTaskNavn);
    },      

    destroy: function() {
        this.model.destroy();

    },

    addCounter: function(e) {
        e.preventDefault();
        var newCounter = this.model.get('counter');
        this.model.set('counter', newCounter + 1);
    },

    remove: function() {
        this.$el.remove();
    },

    render: function()  {
        this.$el.html(this.template(this.model.toJSON()) );
        return this;
    }
});

//Collection View
App.Views.TasksView = Backbone.View.extend({
    tagName: 'ul',

    initialize: function() {
        this.collection.on('add', this.addOne, this);
        this.render();
    },

    render: function() {
        this.collection.each(this.addOne, this);
        return this;
    },

    addOne: function(task) {
        var taskView = new App.Views.TaskView({ model: task });
        this.$el.append(taskView.render().el);

    }
});

App.Views.AddTask = Backbone.View.extend({
    el: '#addTask',

    initialize: function() {
    },

    events: {
        'submit' : 'submit'
    },

    submit: function(e) {
        e.preventDefault();
        var taskNavn = $(e.currentTarget).find('.navnClass').val(),
             uriNum =  $(e.currentTarget).find('.uriClass').val();

        if ( ! $.trim(taskNavn)) {

            var test =  prompt('opgaven skal have et navn', '');
            if ( ! $.trim(test)) return false;
                taskNavn = test;
        }

        if( uriNum.indexOf( "http://" ) == -1 ) {
                     addedValue = 'http://',
                     uriNum = addedValue + uriNum;
        }

        $(e.currentTarget).find('input[type=text]').val('').focus();
        //var task = new App.Models.Task({ name: taskNavn, uri: uriNum });
        this.collection.add({ name: taskNavn, uri: uriNum });
    }

});

// new tasks collection
var tasks = new App.Collections.Tasks([
{
    name: 'Foo',
    uri: 'www.google.com',
    counter: 3
},
{   
    name: 'Bar',
    uri: 'http://google.com',
    counter: 2
},
{
    name: 'Baz',
    uri: 'http://www.google.com',
    counter: 1
}
]);

 // tasks.comparator = function(task) {
 // return task.get("counter");
 // };  
 tasks.sort();

// new collection view (add)
var addTaskView = new App.Views.AddTask({ collection: tasks});

// new collection view
var tasksView = new App.Views.TasksView({ collection: tasks });
$('.tasks').html(tasksView.el);

})(); 
```

我的 HTML :(如果有人想尝试复制场景:)

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>LinkList</title>
</head>
<body>

<h1>Mine opgaver</h1>
<form action="" id="addTask">
    <input class="navnClass" type="text" placeholder="Link name"><input clas s="uriClass" type="text" placeholder="www.url-here.com">
    <button class="nyOpgave">Ny opgave</button><br />

</form>

<div class="tasks">
    <script type="text/template" id="Tasks">
        <span class="linkNavn"><%= name %></span> - <a href="<%= uri %>" class="uriLink" target="_blank"><%= uri %></a> : [<span class="counterClass"><%= counter %></span>] <button class="edit">Edit</button> <button class="delete">Delete</button>
    </script>
</div>
<script src="js/underscore.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
<script src="js/jquery.js"></script>
<script src="js/backbone.js"></script>
<script src="main.js"></script>

</body>
</html> 
```

谁能帮我解决这个问题？

/干杯马塞尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:42:56.723

好的，我已经为您创建了应用程序，正如您希望它运行的那样。我将尝试向您解释整个代码、我写的内容以及我写的原因。

首先，看看 JSfiddle：[这里](http://jsfiddle.net/nishantjani10/4WgY4/)

接下来，让我解释一下：

1.这是我的模型，它存储了链接的名称、href、id（在我的示例中没有使用，但它只是为每个模型分配一个唯一的 id 的好习惯），最后是链接的点击次数（模型） .

```
var myModel = Backbone.Model.extend({
    defaults:{
        'id' : 0,
        'name' : null,
        'link' : '#',
        'clicks' : 0
    }
}); 
```

2.这个集合，存储我所有的模型，我添加了一个比较器功能，这样当你将模型添加到集合时，它会对集合进行排序。

**注意**：我添加了一个`-`符号以按点击次数的降序对集合进行排序（最大点击次数的链接首先出现）

```
var myCollection = Backbone.Collection.extend({
        model: myModel,
        comparator: function(item) {
            return -item.get('clicks');
        }
    }); 
```

3.现在这是我的主视图，主视图是什么意思？此视图主要呈现您想要显示的列表。这里有漂亮的自我解释代码。有一件事，`this.coll.bind('add change',this.render,this)`我添加了一个“更改”，因为每当此集合中的任何模型发生更改时，我们都想重新渲染整个列表，当我更改任何链接的计数时会发生这种情况，单击它时，我想重新渲染整个列表。

```
var myView = Backbone.View.extend({
    el: $("#someElement"),
    tagName : 'ul',

    initialize: function() {
        this.coll = new myCollection();
        this.coll.bind('add change',this.render,this);
    },

    events: {
        "click #add": "add"
    },

    add: function(e){
        e.preventDefault();
        var mod = new myModel();
        var name = $('#name').val();
        var link = $('#link').val();
        mod.set({'id':mod.cid, 'name':name,'link':link});                    
        this.coll.add(mod);

    },

    render : function(){

        $('#list').empty();
        this.coll.sort();
        this.coll.forEach(function(model){
            var listItem = new printView({ model: model});
            $('#list').append(listItem.render().el);
        });
    }
}); 
```

4.这是我的子视图，为什么我要做第二个视图，为什么1个视图不够？那么这考虑一个场景，每个链接都有一个删除按钮（例如），当我单击删除按钮时（我只有一个视图）我如何识别要销毁的模型（从集合中删除？），一种可能的方式将 a`cid`与每个模型相关联，然后单击我可以执行 this.coll.getByCid() ，但这不是一个很好的方法，恕我直言，所以我为每个模型创建了一个单独的视图。这个视图呈现每个模型并返回仅此而已。

```
var printView = Backbone.View.extend({

    tagName: 'li',

    initialize : function(options) {
        _.bindAll(this, "render");                   
    },

    events:{
        "click a": "count"
    },

    render:function(){
        var linkName = this.model.get("name");
        var link= this.model.get("link");
        var clicks = this.model.get("clicks");

        this.$el.append("<a class='link' href='"+link+"'>"+linkName+"</a> ("+clicks+")");

        return this;
    },

    count:function(e){
        e.preventDefault();
        e.stopPropagation();
        var clicks = this.model.get("clicks");
        clicks++;
        this.model.set({'clicks':clicks});
    }

}); 
```

5.初始化我的（主）myView

```
new myView(); 
```

**注意**：我确实相信这个应用程序/代码可以用更好的方式编写，有一些改进，但我的能力和它的工作原理（：p）我认为它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:54:44.803

集合比较器仅在将新模型添加到集合时执行：它不会在属性更改时更新集合顺序。为了实现这一点，您需要调用`collection.sort()`：

```
App.Collections.Tasks = Backbone.Collection.extend({ 
    model: App.Models.Task,
    initialize: function() {
        this.on('change:counter', this.sort);
    },
    comparator: function(task) {
        return task.get('counter');
    }
}); 
```

在列表视图中，您可以收听集合的`sort`事件，并重新呈现您的视图：

```
App.Views.TasksView = Backbone.View.extend({
    tagName: 'ul',

    initialize: function() {
        this.collection.on('add', this.addOne, this);
        this.collection.on('sort', this.render, this);
        this.render();
    },

    render: function() {
        //if there are existing child views, remove them
        if(this.taskViews) {
            _.each(this.taskViews, function(view) {
                view.remove();
            });
        }
        this.taskViews = []; 
        this.collection.each(this.addOne, this);
        return this;
    },

    addOne: function(task) {
        var taskView = new App.Views.TaskView({ model: task });
        this.$el.append(taskView.render().el);

        //keep track of child views
        this.taskViews.push(taskView);
    }
}); 
```

# mongodb - 子文档查询不包含具有正则表达式匹配的数组外的值

> ID：14772322
> 
> 赞同：1
> 
> 时间：2013-02-08T12:13:23.963
> 
> 标签：mongodb

如果我有一组食谱，其中每个项目看起来像：

```
{
    name: "Recipe 1",
    ingredients: [{
        name: "dark chocolate",
        qty: "1 g"
    }, {
        name: "milk",
        qty: "2 g"
    }, {
        name: "unsalted butter",
        qty: "3 g"
    }]
} 
```

我怎样才能找到所有的食谱：

*   有一种成分，其名称*包含*牛奶*或*巧克力
*   但*不含任何其他**不含*牛奶或巧克力的成分？

上面的示例与该查询不匹配。

总结：我需要所有包含牛奶、巧克力或两者兼有的食谱，但别无其他。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:33:05.123

使用正则表达式查找*不*包含`ingredients`牛奶或巧克力的文档（使用[此处](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)的技术），然后用 a 否定它就可以了`$not`：

```
db.recipes.find({'ingredients.name': {$not: /^((?!(milk|chocolate)).)*$/}}) 
```

测试：

```
{
  "_id": ObjectId("5114f7b748994465c5b5c369"),
  "name": "Recipe 1",
  "ingredients": [
    {
      "name": "dark chocolate",
      "qty": "1 g"
    },
    {
      "name": "milk",
      "qty": "2 g"
    },
    {
      "name": "unsalted butter",
      "qty": "3 g"
    }
  ]
}
{
  "_id": ObjectId("5114f9f348994465c5b5c36a"),
  "name": "Recipe 2",
  "ingredients": [
    {
      "name": "dark chocolate",
      "qty": "1 g"
    },
    {
      "name": "milk",
      "qty": "2 g"
    }
  ]
}
{
  "_id": ObjectId("5114fcec48994465c5b5c36b"),
  "name": "Recipe 3",
  "ingredients": [
    {
      "name": "milk chocolate",
      "qty": "1 g"
    }
  ]
}
{
  "_id": ObjectId("5114fd0e48994465c5b5c36c"),
  "name": "Recipe 4",
  "ingredients": [
    {
      "name": "soy",
      "qty": "1 g"
    }
  ]
}
{
  "_id": ObjectId("5114fd5248994465c5b5c36d"),
  "name": "Recipe 5",
  "ingredients": [
    {
      "name": "chocolate mud",
      "qty": "1 g"
    }
  ]
} 
```

它输出：

```
{
  "_id": ObjectId("5114f9f348994465c5b5c36a"),
  "name": "Recipe 2",
  "ingredients": [
    {
      "name": "dark chocolate",
      "qty": "1 g"
    },
    {
      "name": "milk",
      "qty": "2 g"
    }
  ]
}
{
  "_id": ObjectId("5114fcec48994465c5b5c36b"),
  "name": "Recipe 3",
  "ingredients": [
    {
      "name": "milk chocolate",
      "qty": "1 g"
    }
  ]
}
{
  "_id": ObjectId("5114fd5248994465c5b5c36d"),
  "name": "Recipe 5",
  "ingredients": [
    {
      "name": "chocolate mud",
      "qty": "1 g"
    }
  ]
} 
```

# java - 为什么 new BigDecimal("0.0").stripTrailingZeros() 的比例为 1？

> ID：14772323
> 
> 赞同：18
> 
> 时间：2013-02-08T12:13:28.267
> 
> 标签：java, bigdecimal

运行这个简单的程序：

```
public static void main(final String... args)
{
    System.out.println(BigDecimal.ZERO.scale());
    System.out.println(new BigDecimal("0").scale());
    System.out.println(new BigDecimal("0.0").stripTrailingZeros().scale());
    System.out.println(new BigDecimal("1.0").stripTrailingZeros().scale());
} 
```

输出：

```
0
0
1
0 
```

我的问题很简单：为什么第三个`println`输出没有`0`？这似乎是合乎逻辑的......

**编辑**：好的，所以，这是一个非常古老的错误：

[错误链接](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6480539)

事实上，它对任意数量的零都“有效”：`new BigDecimal("0.0000").stripTrailingZeroes().scale()`是 4！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T12:45:35.137

事实上，“0.0”是个例外，因为它没有 stripTrailingZeroes。 **一个错误！**

```
public static void main(final String... args) {
    p("0");
    p("0.0");
    p("1.0");
    p("1.00");
    p("1");
    p("11.0");
}

private static void p(String s) {
    BigDecimal stripped = new BigDecimal(s).stripTrailingZeros();
    System.out.println(s + " - scale: " + new BigDecimal(s).scale()
        + "; stripped: " + stripped.toPlainString() + " " + stripped.scale());
}

0 - scale: 0; stripped: 0 0
0.0 - scale: 1; stripped: 0.0 1
1.0 - scale: 1; stripped: 1 0
1.00 - scale: 2; stripped: 1 0
1 - scale: 0; stripped: 1 0
11.0 - scale: 1; stripped: 11 0 
```

* * *

***在 Java 8 中已修复！***请参阅@vadim_shb 的评论。

# asp.net - 过程或函数“”需要未提供的参数“”

> ID：14772328
> 
> 赞同：4
> 
> 时间：2013-02-08T12:13:45.677
> 
> 标签：asp.net, sql, vb.net, sql-server-2008

我是 asp.net 上的新手，后面有 vb.code

我正在尝试从 sql 中获取价值

我的代码

```
Dim apps As New MyApps
apps.OpenConnection()

Dim esql As New SqlCommand
esql.Connection = apps.oConn

esql.CommandText = "cekdatauploads"
esql.Parameters.Add("@value", SqlDbType.Int, 2)

esql.ExecuteNonQuery()
esql.Parameters("@value").Direction = ParameterDirection.Output

Dim nilai As Integer = esql.Parameters("@value").Value

apps.CloseConnection() 
```

错误是

```
The parameterized query '(@value int)cekdatauploads' expects the parameter '@value', which was not supplied. 
```

我已经尝试执行商店程序

```
declare @p int
exec [cekdatauploads] @p output
print @p 
```

并返回 0 非空值。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:15:32.227

尝试交换两条线。

```
esql.CommandText = "cekdatauploads"
esql.Parameters.Add("@value", SqlDbType.Int, 2)
esql.Parameters("@value").Direction = ParameterDirection.Output
esql.ExecuteNonQuery() 
```

还有一件事，如果`cekdatauploads`是一个存储过程，你应该在`CommandType`

```
esql.CommandType = CommandType.StoredProcedure
esql.CommandText = "cekdatauploads"
esql.Parameters.Add("@value", SqlDbType.Int, 2)
esql.Parameters("@value").Direction = ParameterDirection.Output
esql.ExecuteNonQuery() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:16:14.673

在告诉命令它是输出参数之前，您正在执行该过程，默认情况下它假定它是输入参数。：

```
esql.Parameters("@value").Direction = ParameterDirection.Output
esql.ExecuteNonQuery() 
```

# c# - 即使我创建了类的实例，类中的列表仍为空

> ID：14772334
> 
> 赞同：1
> 
> 时间：2013-02-08T12:14:23.790
> 
> 标签：c#, winforms

我正在尝试`personal`从主程序中的某些函数访问该列表，但我一直认为它不是...的实例

班级代码：

```
[Serializable()]
class FaktNr
{
    public int lopnummer;
    public int year;

    public List<string> personal = new List<string>();

    public FaktNr()
    {
        personal = new List<string>();

    }
} 
```

表格代码：

```
public partial class Form1 : Form
{

    internal FaktNr faktNr = new FaktNr(); 

    public Form1()
    {
        InitializeComponent();
    }

    private void laggTillPerson_Click(object sender, EventArgs e)
    {
            faktNr.personal.Add(ComboBox1.Text);
    } 
```

代码在这里被缩短，但它显示了要点。Nullreferenceexception 发生在函数中`laggTillPerson_Click`。

我想补充一点，问题不是 ComboBox，因为我已经尝试过了：faktNr.personal.Add("uhiouh");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:16:21.997

您遇到了异常`ComboBox1.Text`，您`ComboBox1`可能为空，而不是您的列表`personal`，请尝试将您的代码替换为：

```
faktNr.personal.Add("test string"); 
```

看看你是否仍然得到异常。

您正在访问`Text`Combobox 的属性，而不是您可以使用[ComboBox.SelectedText 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedtext.aspx)

或者您可以在您的活动中检查 null ：

```
private void laggTillPerson_Click(object sender, EventArgs e)
{
     if(ComboBox1 != null)
          faktNr.personal.Add(ComboBox1.Text);
} 
```

# c++ - boost::signals 插槽是同步调用还是异步调用？

> ID：14772341
> 
> 赞同：6
> 
> 时间：2013-02-08T12:15:00.407
> 
> 标签：c++, boost, asynchronous, execution, boost-signals

谁能告诉我`boost::signals`插槽是同步调用还是异步调用？

例如我有这段代码：

```
struct Hello
{
  void operator()() const
  {
    std::cout << "Hello ";
  }
};

struct World
{
  void operator()() const
  {
    std::cout << " world!" << std::endl;
  }
};

boost::signal<void ()> sig;

sig.connect(Hello());
sig.connect(World());

sig();

cout << "Foo"; 
```

执行线程是如何工作的？执行是等待`Hello()`并`World()`执行，然后`"Foo"`打印出来还是异步调用它们（打印“Foo”并以未定义的顺序调用`Hello()`和`World()`执行）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:59:38.967

在[Boost.Signals](http://www.boost.org/doc/libs/release/doc/html/signals.html)中，槽被同步调用，连接到同一信号的槽按照它们被添加的顺序被调用。线程安全变体[Boost.Signals2也是如此](http://www.boost.org/doc/libs/release/doc/html/signals2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:43:32.323

这应该打印“Hello World Foo”，但可以合法地打印“World Hello Foo”，因为对多个连接的插槽的调用顺序未定义 AFAIK。

如果您想要严格的顺序，请使用以下语法：

```
sig.connect(1, World());
sig.connect(0, Hello()); 
```

# mongodb - 如何从 MongoDB 中的组聚合中返回整个对象

> ID：14772344
> 
> 赞同：2
> 
> 时间：2013-02-08T12:15:07.780
> 
> 标签：mongodb

我有一个这样的聚合查询：

```
db.yc_promotions.aggregate([
{$match:
    {
        city_from: {$in: ['x1','x2','x3']},
        city_to: {$in: ['y1','y2','y3']},
        date_ret: {$lte: "2013-06-30"},
        updated: {"$gte": "2013-02-01"}
    }
},
{$group:
    {
        _id: {city_to: "$city_to"},
        min: { $min: "$total_price" }
    }
}
]) 
```

查询响应与预期的一样，格式如下：

```
{"result" : [
    {
        "_id" : {
            "city_to" : "y1"
        },
        "min" : 2404.72
    },
    {
        "_id" : {
            "city_to" : "y2"
        },
        "min" : 1619.2
    }
    ...
 ]} 
```

但我想返回具有最低价格的对象，而不仅仅是值和城市代码。我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:26:39.143

看起来您应该能够使用以下内容添加其他字段（我忽略了匹配项）：

```
db.test.aggregate(
    { $group: {
        _id: { city_to: "$city_to" },
        min: { $min: "$total_price"  },
        city_from: { $min: "$city_from" }
    } }
); 
```

但这不起作用。因为 $min 将在**每个**领域工作。举个例子：

```
> db.test.find();
{ "_id" : ObjectId("51156a11056d6f966f268f7f"), "city_from" : "LHR", "city_to" : "JFK", "total_price" : 500 }
{ "_id" : ObjectId("51156a1a056d6f966f268f80"), "city_from" : "LHR", "city_to" : "LGA", "total_price" : 400 }
{ "_id" : ObjectId("51156a1e056d6f966f268f81"), "city_from" : "DUB", "city_to" : "LGA", "total_price" : 400 }
{ "_id" : ObjectId("51156a27056d6f966f268f82"), "city_from" : "DUB", "city_to" : "JFK", "total_price" : 300 }
> db.test.aggregate( {$group: { _id: { city_to: "$city_to" }, min: { $min: "$total_price"  }, city_from: { $min: "$city_from" } } } );
{
    "result" : [
        {
            "_id" : {
                "city_to" : "LGA"
            },
            "min" : 400,
            "city_from" : "DUB"
        },
        {
            "_id" : {
                "city_to" : "JFK"
            },
            "min" : 300,
            "city_from" : "DUB"
        }
    ],
    "ok" : 1
} 
```

city_from **: LHR**完全消失了，尽管 LHR->LGA 和 DUB->LGA 的最低价格相同。**city_from: { $min: "$city_from" }**仅返回 [ DUB, LGA ] 的字符串最小值。当然，您可以拥有多个具有相同最低价格的文件（在这种情况下，LHR->LGA 和 DUB->LGA 均为 400）。

您必须分两步执行此操作：

```
> result = db.test.aggregate( {$group: { _id: { city_to: "$city_to" }, min: { $min: "$total_price"  } } } );
> final = []
> result.result.forEach(function(entry) { final.push( { city_to: entry._id.city_to, min: entry.min, docs: db.test.aggregate( { $match: { city_to: entry._id.city_to, total_price: entry.min } } ).result } ) } ); 
```

然后给出结果：

```
> final
[
    {
        "city_to" : "LGA",
        "min" : 400,
        "docs" : [
            {
                "_id" : ObjectId("51156a1a056d6f966f268f80"),
                "city_from" : "LHR",
                "city_to" : "LGA",
                "total_price" : 400
            },
            {
                "_id" : ObjectId("51156a1e056d6f966f268f81"),
                "city_from" : "DUB",
                "city_to" : "LGA",
                "total_price" : 400
            }
        ]
    },
    {
        "city_to" : "JFK",
        "min" : 300,
        "docs" : [
            {
                "_id" : ObjectId("51156a27056d6f966f268f82"),
                "city_from" : "DUB",
                "city_to" : "JFK",
                "total_price" : 300
            }
        ]
    }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:17:25.593

当你分组时，你必须告诉 MongoDB 你想要其他字段的值。所以你在哪里：

```
min: { $min: "$total_price" } 
```

您需要复制此字段并为您希望返回的投影对象的每个字段重命名它，在这种情况下：

```
city_to: { $min: "$city_to" },
city_from: { $min: "$city_from" }
// etc 
```

所以一个完整的例子是：

```
db.yc_promotions.aggregate([
{$match:
    {
        city_from: {$in: ['x1','x2','x3']},
        city_to: {$in: ['y1','y2','y3']},
        date_ret: {$lte: "2013-06-30"},
        updated: {"$gte": "2013-02-01"}
    }
},
{$group:
    {
        _id: {city_to: "$city_to"},
        min: { $min: "$total_price" },
        city_to: { $min: "$city_to" },
        city_from: { $min: "$city_from" }        
    }
}
]) 
```

看看我是如何添加`city_to`和`city_from`的`$group`？只需对您希望在`$group`.

# c# - 如何仅修复日期时间

> ID：14772349
> 
> 赞同：-2
> 
> 时间：2013-02-08T12:15:20.077
> 
> 标签：c#

这是我的看法

```
SELECT        AmenityValidDatesPriceID, AmenityID, AmenityValidDatesFrom, AmenityValidDatesTo, AddedDate, LastModifyDate, AddedUser, LastModifyUser, 
                         IsDeleted
FROM            dbo.DataManagement_Hotels_Amenities_AmenityValidDatesPrice
WHERE        (IsDeleted = 0) 
```

它返回我 AmenityValidDatesFrom,AmenityValidDatesTo 作为日期时间

在前端我只需要日期

```
 public List<BLL.Entities.DataManagement_Hotels_Amenities_AmenityValidDatesPrice> SelectByAmenityID(int ID)
            {
                DAL.DynamicSearchViewDataContext Viewcontext = new DAL.DynamicSearchViewDataContext();
                DAL.SelectSectionDataContext SpContext = new DAL.SelectSectionDataContext();
                var Query = (from car in Viewcontext.View_DataManagement_Hotel_Amenities_Dates
                             where car.AmenityID.Equals(ID)
                             select new BLL.Entities.DataManagement_Hotels_Amenities_AmenityValidDatesPrice
                             {
                                 AmenityID = (int)car.AmenityID,
                                 //AmenityValidDatesFrom = (DateTime)car.AmenityValidDatesFrom,
                                 //AmenityValidDatesTo = (DateTime)car.AmenityValidDatesTo

                                 AmenityValidDatesFrom = ((DateTime)car.AmenityValidDatesFrom).Date,
                                 AmenityValidDatesTo = ((DateTime)car.AmenityValidDatesTo).Date

                             }).ToList<BLL.Entities.DataManagement_Hotels_Amenities_AmenityValidDatesPrice>();
                return Query;

            } 
```

这是我的代码

它给

> 错误隐式转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:26:44.420

尝试这个

```
SELECT  AmenityValidDatesPriceID ,
        AmenityID ,
        CONVERT(VARCHAR(10), AmenityValidDatesFrom, 103) AS AmenityValidDatesFrom ,
        CONVERT(VARCHAR(10), AmenityValidDatesTo, 103) AS AmenityValidDatesTo ,
        CONVERT(VARCHAR(10), AddedDate, 103) AS AddedDate ,
        CONVERT(VARCHAR(10), LastModifyDate, 103) AS LastModifyDate ,
        AddedUser ,
        LastModifyUser ,
        IsDeleted
FROM    dbo.DataManagement_Hotels_Amenities_AmenityValidDatesPrice
WHERE   IsDeleted = 0 
```

它将以“dd/mm/yyyy”格式给出日期。如果您想以 'mm/dd/yyyy' 格式获取日期，请使用 101 而不是 103

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:22:41.423

请更改您的视图，如下所示：

```
SELECT  AmenityValidDatesPriceID,
        AmenityID,
        CONVERT(VARCHAR, AmenityValidDatesFrom,101) AS AmenityValidDatesFrom,
        CONVERT(VARCHAR, AmenityValidDatesTo,101) AS AmenityValidDatesTo,
        CONVERT(VARCHAR, AddedDate,101) AS AddedDate,
        CONVERT(VARCHAR, LastModifyDate,101) AS LastModifyDate,
        AddedUser,
        LastModifyUser,
        IsDeleted
FROM    dbo.DataManagement_Hotels_Amenities_AmenityValidDatesPrice
WHERE   IsDeleted = 0 
```

它应该工作。

更新：

需要进行空值检查。

```
public List<BLL.Entities.DataManagement_Hotels_Amenities_AmenityValidDatesPrice> SelectByAmenityID(int ID)
{
    DAL.DynamicSearchViewDataContext Viewcontext = new DAL.DynamicSearchViewDataContext();
    DAL.SelectSectionDataContext SpContext = new DAL.SelectSectionDataContext();
    var Query = (from car in Viewcontext.View_DataManagement_Hotel_Amenities_Dates
                 where car.AmenityID.Equals(ID)
                 select new BLL.Entities.DataManagement_Hotels_Amenities_AmenityValidDatesPrice
                 {
                     AmenityID = (int)car.AmenityID,
                     if (car.AmenityValidDatesFrom != null && car.AmenityValidDatesFrom.ToString() !=  "")
                     {
                        AmenityValidDatesFrom = car.AmenityValidDatesFrom.Date
                     },
                     if (car.AmenityValidDatesTo != null && car.AmenityValidDatesTo.ToString() !=  "")
                     {
                        AmenityValidDatesTo = car.AmenityValidDatesTo.Date
                     }
                 }).ToList<BLL.Entities.DataManagement_Hotels_Amenities_AmenityValidDatesPrice>();
    return Query;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:41:30.083

改用此视图来保留`DATETIME`数据类型，同时摆脱时间部分：

```
SELECT  AmenityValidDatesPriceID ,
        AmenityID ,

        DATEADD(D, 0, DATEDIFF(D, 0, AmenityValidDatesFrom)) AS AmenityValidDatesFrom
        DATEADD(D, 0, DATEDIFF(D, 0, AmenityValidDatesTo)) AS AmenityValidDatesTo
        DATEADD(D, 0, DATEDIFF(D, 0, AddedDate)) AS AddedDate
        DATEADD(D, 0, DATEDIFF(D, 0, LastModifyDate)) AS LastModifyDate

        AddedUser ,
        LastModifyUser ,
        IsDeleted
FROM    dbo.DataManagement_Hotels_Amenities_AmenityValidDatesPrice
WHERE   IsDeleted = 0 
```

# netbeans - Netbeans 7.1 中的“无法加载平台/lib/nbexec.dll。找不到模块”

> ID：14772350
> 
> 赞同：0
> 
> 时间：2013-02-08T12:15:21.367
> 
> 标签：netbeans, module

我最近安装了一个诺基亚 SDK 2.0 和一个 JDK 7。但是在 Netbeans 更新之后，这个错误来了。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:17:54.343

检查任务管理器并删除netbean实例，如果它仍然存在，然后重新启动neatbean

如果它不起作用，则通过右键单击桌面上的 netbean 图标更改开始时的路径

```
C:\Program Files\NetBeans 7.2.1 
```

至

```
C:\Program Files\NetBeans 7.2.1\bin 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-31T11:46:14.227

就我而言，它发生在我更新 Netbeans 时。在重新启动期间，它向我显示了错误消息。虽然有 nbexec.dll 文件，但它显示了错误。所以我想替换那个文件。要替换它，请按照以下步骤操作。

1.打开这个链接[http://originaldll.com/download/31707.dll](http://originaldll.com/download/31707.dll)

2.输入数字点击下载

3.下载此文件并从安装文件夹中替换它...完成！

# cakephp - CakePHP 将字段保存到关联表

> ID：14772356
> 
> 赞同：0
> 
> 时间：2013-02-08T12:15:49.860
> 
> 标签：cakephp

我的“PatientCase”模型与“PatientCaseOrder”模型具有 hasOne 关系。（该表仅存储了 patientCase id 以及一个整数位置）

我正在使用 ajax 函数在我的 PatientCase 控制器中使用以下函数更新“PatientCaseOrder”中的位置字段

```
public function update_position(){
        Configure::write('debug', 0);
        $this->autoRender = false;
        $this->loadModel('PatientCaseOrder');
        $list = $_POST['list'];
        $errs = false;
        if($list){
            foreach($list as $position){
                $id = $position[0];
                $pos = $position[1];
                $this->PatientCase->id = $id;

                if(! $this->PatientCase->PatientCaseOrder->saveField('position', $pos))
                     $errs = true;
            }
        }

        echo json_encode ($errs);
    } 
```

我正在向它传递一个包含 PatientCaseId 和位置的数组。该代码产生 500 服务器错误，我哪里出错了，或者我采取了错误的方法？

注意：我之前在 PatientCase 模型中有 position 字段，这行代码与上面的代码段一起使用

```
$this->PatientCase->saveField('position', $pos) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:19:14.310

您需要更改控制器功能以获得更好的调试：

改成`Configure::write('debug', 2);`

添加`$this->layout = 'ajax';`

并改变：`if(! $this->PatientCase->PatientCaseOrder->saveField('position', $pos)) $errs = true;`

到：

`pr($this->PatientCase->PatientCaseOrder->saveField('position', $pos)); die;`

然后在你的ajax函数中记录回调

`console.log(returned_data);`

并检查错误。

# php - PHP数组产品组合

> ID：14772365
> 
> 赞同：1
> 
> 时间：2013-02-08T12:16:23.987
> 
> 标签：php, arrays, multiplication

我已经产生了一个数字的一​​系列素因数——这应该是最难的部分！但是，为了创建相同数量的除数列表，需要以各种可能的方式组合素因数。我正在努力用 php 做的事情。

例如，我有一个数组：

```
2
2
2
3
3
41
53 
```

...对于号码 156456；将它们全部相乘，你就可以得到这个数字。我需要做的是将所有的二重奏相乘，例如 2x2、2x3、2x53 等，然后将所有的三元组相乘，依此类推，直到我最终将 7 块 6 相乘。

正如你所看到的，这将给出一个非常大的数组，其中包含 4、6、8、9、12 等中的所有除数，并且有许多重复项。我似乎无法从上面的数组中得到我想要的这个除数数组。这是一个将数组中元素的每个可能组合相乘的情况，是否有一个 php 函数，我的搜索到目前为止没有结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:41:40.823

阅读此页面后：[http://mathcentral.uregina.ca/QQ/database/QQ.02.06/joe1.html](http://mathcentral.uregina.ca/QQ/database/QQ.02.06/joe1.html)，我尝试构建一些可能有效的东西，它可能不是最有效的解决方案，它也仅限`count($primes) <= 32`于32 位系统。如果您需要更多，请随意使用[Bitset](http://pecl.php.net/package/Bitset)：

```
$primes = Array(2, 2, 2, 3, 3, 41, 53);
$num_primes = count($primes); // 7, if this is over 32, it won't work on 32bit systems
$divisors = Array();

// number of possible combinations
$limit = pow(2, $num_primes) - 1; // 127

// count a number up and use the binary 
// representation to say which index is
// part of the current divisor
for($number = 0; $number <= $limit; $number++) {
    $divisor = 1;
    // only multiply activated bits in $number to the divisor
    for($i = 0; $i < $num_primes; $i++) {
        $divisor *= ($number >> $i) & 1 ? $primes[$i] : 1;
    }
    $divisors[] = $divisor;
}

echo implode(", ", array_unique($divisors)); 
```

这导致以下除数：

```
1, 2, 4, 8, 3, 6, 12, 24, 9, 18, 36, 72, 41, 82, 164, 328, 123, 246, 492,
984, 369, 738, 1476, 2952, 53, 106, 212, 424, 159, 318, 636, 1272, 477,
954, 1908, 3816, 2173, 4346, 8692, 17384, 6519, 13038, 26076, 52152, 19557,
39114, 78228, 156456 
```

要找到所有除数，您需要在每个可能的组合中将每个素数相乘。为此，我计算可能组合的数量 ( `$limit`)。如果您现在将一个数字计数到此限制，则二进制表示形式如下所示：

```
7 bit
<----->
0000000    0
0000001    1
0000010    2
0000011    3
0000100    4
0000101    5
0000110    6
0000111    7
0001000    8
0001001    9
...
1111110  126
1111111  127 
```

的当前二进制表示`$number`表示使用哪些索引`$primes`来计算当前的`$divisor`。为了更好地展示这一点，假设`$number = 5`它是`0000101`二进制的。的计算`$divisor`将是`2 * 1 * 2 * 1 * 1 * 1 * 1 = 4`。只设置了第一位和第三位，因此仅使用数组中的第一个和第三个元素进行计算。

我希望这使它更清楚一点。

# javascript - jQuery focus() 页面滚动长度

> ID：14772369
> 
> 赞同：0
> 
> 时间：2013-02-08T12:16:31.880
> 
> 标签：javascript, jquery, css, browser, cross-browser

我有这样的代码：

```
<a href="javascript://" onclick="$('#newMsgTxt').focus();">New message</a>
<div style="min-height: 1300px;"></div>
<textarea id="newMsgTxt"></textarea>
<div style="min-height: 500px;"></div> 
```

这就是问题所在：单击链接后，在不同的浏览器中，页面滚动到不同的位置。

`textarea`点击后屏幕上的位置示例：

**Chrome：** *中心*
**FF：** *底部*
**Opera：** *顶部*

如何让所有浏览器都像 Chrome 一样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:27:08.980

```
$('a').click(function(e){
    e.preventDefault();
    var o = $('#newMsgTxt').focus().offset().top, $w = $(window);
    $w.scrollTop(o - ($w.height() / 2));
}); 
```

[http://jsfiddle.net/2BHRw/](http://jsfiddle.net/2BHRw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:24:59.500

试试这个。

```
onclick="$('#newMsgTxt').focus().val($('#newMsgTxt').val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:25:16.287

**网页：**

```
<a href="" id="newMessage">New message</a> 
```

**查询：**

```
$(document).ready(function() {
    $('#newMessage').click(function(e) {
        e.preventDefault();
        $('#newMsgTxt').focus();
    });    
}); 
```

[http://jsfiddle.net/soyuka/jxZw2/](http://jsfiddle.net/soyuka/jxZw2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:39:54.440

这是因为滚动位置不同，

您可以使用`console.log(window.scrollY)`onclicking 进行测试，`link` 因此您必须为此编写代码以使其居中对齐。

代码就像

```
$(function() {
    $('a').click(function(e){
        $('#newMsgTxt').focus();
        var offsetTop = offset().top; 
        $(window).scrollTop(offsetTop - ($(window).height() / 2));
    });
}); 
```

你的html就像：

```
<a href="javascript://">New message</a>
<div style="min-height: 1300px;"></div>
<textarea id="newMsgTxt">gfg</textarea>
<div style="min-height: 500px;"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:52:58.890

嗨试试下面的代码......我的命名不好......所以，根据你的想法替换。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.js" type="text/javascript"></script>
   <script>

       function test() {
           var o = $('#newMsgTxt').focus().offset().top, $w = $(window);
                $w.scrollTop(o - ($w.height() / 2));
       }
   </script>
</head>
<body>
<a  onclick="test();">New message</a>
<div style="min-height: 1300px;vertical-align:top;"></div>
<textarea id="newMsgTxt" ></textarea>
<div style="min-height: 500px;"></div>
</body>
</html> 
```

# c# - 在构造函数中调用派生方法的抽象基类？

> ID：14772370
> 
> 赞同：0
> 
> 时间：2013-02-08T12:16:33.613
> 
> 标签：c#, inheritance, polymorphism, dry, abstract

我正在尝试编写 DRY 代码，并且我有以下设置，Visual Studio 的代码分析系统告诉我这是不明智的：

```
public abstract class ShaderBase
{

    protected ShaderBase(Device device, string vertexShaderString, string pixelShaderString)
    {
        ShaderSignature inputSignature;
        using (ShaderBytecode bytecode = ShaderBytecode.CompileFromFile(vertexShaderString, "VShader", "vs_4_0", ShaderFlags.None, EffectFlags.None))
        {
            vertexShader = new VertexShader(device, bytecode);
            inputSignature = ShaderSignature.GetInputSignature(bytecode);
        }

        inputLayout = MakeInputLayout(device,inputSignature);
    }

    protected abstract InputLayout MakeInputLayout(Device device, ShaderSignature inputSignature);
}

public class TextureShader:ShaderBase
{
    public ColourShader(Device device) : base(device,"shaders/colour.fx", "shaders/colour.fx")
    {
    }

    protected override InputLayout MakeInputLayout(Device device, SlimDX.D3DCompiler.ShaderSignature inputSignature)
    {
        return new InputLayout(device, inputSignature, new[] { 
            new InputElement("POSITION", 0, SlimDX.DXGI.Format.R32G32B32_Float, 0), 
            new InputElement("COLOR",0,SlimDX.DXGI.Format.R32G32B32_Float,0)
        });
    }
} 
```

如您所见，我有一个基类，从中我有多个派生类。每个派生类使用不同的 InputLayout，因此必须使用 MakeInputLayout 的不同实现，这就是我重写它的原因。但是，每个派生类都必须执行我放在基类构造函数中的代码，包括对派生类拥有的 MakeInputLayout 的任何实现的调用。

我试图尽可能避免代码重复，但微软建议我永远不应该在基类构造函数中调用可覆盖函数，即使覆盖的实现都不依赖于运行时设置的值（从技术上讲，它们可以标记为静态，如果 c# 允许我们覆盖静态）。

我想知道的是，让基类强制派生类在其构造函数中调用自己的函数派生实现的可接受方式是什么？还是我只需要复制和粘贴一些代码并降低系统的可维护性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:28:49.023

1.  您可以忽略 Visual Studio 的代码分析，如果您 100% 确定它不会成为您的问题。但是，这可能不是很安全，我个人不建议这样做。

2.  使用辅助接口/类/委托来避免构造函数虚拟方法调用：

    ```
    public interface IInputLayoutMaker
    {
        InputLayout MakeInputLayout(Device device, SlimDX.D3DCompiler.ShaderSignature inputSignature);
    }

    public abstract class ShaderBase
    {
        protected ShaderBase(Device device, string vertexShaderString, string pixelShaderString, IInputLayoutMaker inputLayoutMaker)
        {
            ShaderSignature inputSignature;
            using (ShaderBytecode bytecode = ShaderBytecode.CompileFromFile(vertexShaderString, "VShader", "vs_4_0", ShaderFlags.None, EffectFlags.None))
            {
                vertexShader = new VertexShader(device, bytecode);
                inputSignature = ShaderSignature.GetInputSignature(bytecode);
            }

            inputLayout = inputLayoutMaker.MakeInputLayout(device,inputSignature);
        }

        protected abstract InputLayout MakeInputLayout(Device device, ShaderSignature inputSignature);
    }

    public class TextureShader:ShaderBase
    {
        private class TextureShaderInputLayoutMaker : IInputLayoutMaker
        {
            public InputLayout MakeInputLayout(Device device, SlimDX.D3DCompiler.ShaderSignature inputSignature)
            {
                return new InputLayout(device, inputSignature, new[] { 
                    new InputElement("POSITION", 0, SlimDX.DXGI.Format.R32G32B32_Float, 0), 
                    new InputElement("COLOR",0,SlimDX.DXGI.Format.R32G32B32_Float,0)
                });
            }
        }

        public ColourShader(Device device) : base(device,"shaders/colour.fx", "shaders/colour.fx", new TextureShaderInputLayoutMaker())
        {
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:20:13.697

你不必复制任何东西。正如您所说，这些方法可能是静态的。所以制作它们并将结果传递给基类构造函数。

您拥有的当前代码并没有使这一切变得简单，因为`MakeInputLayout`取决于在基类的构造函数中创建的值。虽然您也可以以某种方式提取它，但我认为这会变得混乱。

因此，我提出了一种不同的方法：

创建一个`IInputLayoutProvider`接口及其实现并将其传递给基类。

# android - jplayer 不适用于 android 2.3

> ID：14772371
> 
> 赞同：2
> 
> 时间：2013-02-08T12:16:46.350
> 
> 标签：android, jplayer

我在 android 2.3 版本中播放 mp3 时遇到问题.. 这是播放点击后 android 2.3.3 模拟器的输出... setTimeout 也不起作用.. 任何人都可以建议这是什么问题？这很紧急..

```
02-08 11:58:57.572: E/MediaPlayer(346): error (-38, 0)
02-08 11:58:57.641: E/MediaPlayer(346): Error (-38,0)
02-08 11:59:08.020: I/StagefrightPlayer(34): setDataSource('http://api.soundcloud.com/tracks/75945507/stream')
02-08 11:59:08.050: I/NuHTTPDataSource(34): connect to api.soundcloud.com:80/tracks/75945507/stream@0
02-08 11:59:08.460: I/NuHTTPDataSource(34): connect to ak-media.soundcloud.com:80/wrNNoFGzAVBu.128.mp3?AWSAccessKeyId=AKIAJ4IAZE5EOI7PA7VQ&Expires=1360325086&Signature=lpyyWSCue7wClheAiMdHH3CgD9M%3D&__gda__=1360325086_b4fb6b6ef6022109e33fa20abe103845 @0
02-08 11:59:11.801: I/NuCachedSource2(34): ERROR_END_OF_STREAM
02-08 11:59:15.160: D/AudioSink(34): bufferCount (4) is too small and increased to 12
02-08 11:59:18.952: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:22.509: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:26.032: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:29.495: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:32.982: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:36.471: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:39.941: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000
02-08 11:59:43.410: W/AudioTrack(34): obtainBuffer timed out (is the CPU pegged?) 0x166a8 user=00003000, server=00000000 
```

# iphone - UIImage 不显示

> ID：14772372
> 
> 赞同：0
> 
> 时间：2013-02-08T12:16:47.043
> 
> 标签：iphone, ios, json, uiimage

我正在使用 AFNetworking 解析 JSON。

我将 2 个图像和文本从一个视图传递到另一个视图，但我无法在 UIImage 视图上查看图像。

我可以在控制台上看到图像的链接。

这是我的代码[（链接到 github）](https://github.com/miznat/youtube)

```
#import "KKDetailsViewController.h"

@interface KKDetailsViewController ()

@end

@implementation KKDetailsViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.textView.text = [self.importVideoMetaData objectForKey:@"description"];

    self.imageView.image = [[UIImage alloc] init];
    self.imageView.image = [UIImage imageNamed:[(NSDictionary *)self.importThumbnail objectForKey:@"hqDefault"]];

    NSLog(@" imported thumbnail %@", self.importThumbnail);

} 
```

这是.h文件

```
#import <UIKit/UIKit.h>

@interface KKDetailsViewController : UIViewController

@property (weak, nonatomic) NSDictionary *importVideoMetaData;

@property (weak, nonatomic) NSDictionary *importThumbnail;

@property (weak, nonatomic) IBOutlet UITextView *textView;

@property (weak, nonatomic) IBOutlet UIImageView *imageView;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:42:49.230

好的，这就是我如何使它工作的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.textView.text = [self.importVideoMetaData objectForKey:@"description"];

    NSURL *url = [[NSURL alloc] initWithString:[self.importThumbnail objectForKey:@"hqDefault"]];

    [self.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"fakeThumbnail.png"]];

    NSLog(@" imported thumbnail %@", url);

} 
```

# ruby-on-rails-3.2 - NoMethodError 注释控制器 - Rails 3.2

> ID：14772374
> 
> 赞同：0
> 
> 时间：2013-02-08T12:16:54.533
> 
> 标签：ruby-on-rails-3.2, nomethoderror

我有两个模型评论和程序。我得到这个错误。

![在此处输入图像描述](../Images/9790e30031dd9f764d53c3991013511f.png)

我的**comments_conroller.rb**看起来像这样

```
def create
    @programmme = Programme.find(params[:programme_id])

    @comment = @programme.comments.create!(params[:comment])

        if @comment.save
            redirect_to @comment.programme, notice: "Comment has been sent."
        else
            format.html { redirect_to @comment.programme, notice: "There was an error creating your comment."}
        end

  end 
```

我也尝试过使用构建而不是创建。

```
 def create
    @programmme = Programme.find(params[:programme_id])

    @comment = @programme.comments.build(params[:comment])

        if @comment.save
            redirect_to @comment.programme, notice: "Comment has been sent."
        else
            format.html { redirect_to @comment.programme, notice: "There was an error creating your comment."}
        end

  end 
```

**程序.rb**

```
class Programme < ActiveRecord::Base
  attr_accessible :biography, :broadcastTime, :description, :title

  # Associations
    has_many :comments, :dependent => :destroy

end 
```

**评论.rb**

```
class Comment < ActiveRecord::Base
  attr_accessible :email, :location, :message, :name, :requestFor, :song

  #Associations
  belongs_to :programme

end 
```

我的**routes.rb**看起来像这样

```
DigneRadio::Application.routes.draw do

  resources :programmes do
      resources :comments
  end

  resources :replays
  resources :articles

end 
```

不知道我哪里出错了，但我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:00:11.223

程序拼写有误，首先使用@programmme(with 3m)，然后在下一步使用@programme。

# zend-framework2 - 从子视图将 Javascript 文件附加到 InlineScript 集合的末尾

> ID：14772376
> 
> 赞同：5
> 
> 时间：2013-02-08T12:16:59.783
> 
> 标签：zend-framework2

我正在使用 Zend Framework 2。

在我的布局文件中，我注入了一些这样的 javascript 文件：

```
$this->InlineScript()
            ->appendFile($this->basePath() . '/js/myfile.js');

echo $this->InlineScript(); 
```

现在我想从视图中注入一些 javascript，以便它附加到 InlineScript 集合的末尾。

所以我在我的行动视图中写了这个：

```
<?php $this->InlineScript()->offsetSetFile(100,$this->basePath() . '/js/xyz.js'); ?> 
```

但结果是文件 xyz 首先加载到渲染视图中。

我正在使用 Zend Framework 2.0.5

有人可以给我一个建议如何管理这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-24T20:00:21.247

只是为了补充这个老问题：

内部视图：在页面顶部附加一个**文件：**

```
$this->headScript()->appendFile('/js/filename.js'); 
```

在页面顶部附加**脚本**

```
$this->headScript()->appendScript('alert(1)'); 
```

在页面底部附加一个**文件：**

```
$this->inlineScript()->appendFile('/js/filename.js'); 
```

在页面底部添加**脚本**

```
$this->inlineScript()->appendScript('alert(1)'); 
```

**内部控制器/动作**

使用 serviceLocator 抓取 Headscript 其余部分相同

```
$this->getServiceLocator()
    ->get('viewhelpermanager')
    ->get('HeadScript')->appendScript('alert(1)'); //or ->appendFile('/js/filename.js'); 
```

如果您知道如何在操作中获取 inlineScrip，请告诉我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:36:55.070

这似乎是由于`appendFile`在您的布局中使用造成的。您的视图脚本首先运行，您在其中将脚本附加到堆栈。然后，当您的布局运行时，您再次追加，使您的布局中的脚本成为最后一个。尝试`prependScript`在您的布局文件中使用，以便您的布局中的脚本不会附加到已添加的脚本中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T10:32:58.933

我知道这是一个老问题，但这个解释可能真的很有用（我前段时间被这个问题搞砸了......）

让我们从一个案例开始：

您有 4 个脚本要附加到页面中。
2 在您的布局中定义，2 在您的视图中定义。
让我们将它们命名为 script1、script2、script3 和 script4（最终顺序应该尊重数字）。

布局 ：

```
<?php
    $this->inlineScript()->prependFile('script2.js')
                         ->prependFile('script1.js'); 
```

看法 ：

```
<?php
    $this->inlineScript()->appendFile('script3.js')
                         ->appendFile('script4.js'); 
```

结果 ：

```
<script type="text/javascript" src="/script1.js"></script>
<script type="text/javascript" src="/script2.js"></script>
<script type="text/javascript" src="/script3.js"></script>
<script type="text/javascript" src="/script4.js"></script> 
```

**发生了什么事 ？**

首先，视图被处理，脚本（在视图中）被附加到堆栈中，所以我们有：

`script3`附加：

```
[script3.js] <-- 
```

`script4`附加：

```
[script2.js]
[script3.js] <-- 
```

然后，布局被处理，脚本以相反的顺序添加：

`script2`前置：

```
[script2.js] <--
[script3.js]
[script4.js] 
```

`script1`前置：

```
[script1.js] <--
[script2.js]
[script3.js]
[script4.js] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T05:19:34.097

我正在解决这个问题：“**如果你知道如何在动作中获取 inlineScrip，请告诉我们。** ”，得到了一个很好的解决方案，并决定在这里发布：

1.  创建一个在别处调用的小类来对所有内联脚本进行分组，并正确格式化它们以由 layout.phtml 模板呈现
2.  定义一个条件插入点以在最终页面中注入完整的脚本

（我替换了代码 04-05-2016，因为原件打错了）

 ````
 <?php
        // Filename: /module/MyTools/src/MyTools/Library/Js2ls.php
        namespace MyTools\Library;    
        abstract class Js2l
{
    protected static $inLineJs;
    protected static $inLineVars;

    public static function addSetting($settingkey, $settingvalue)
    {
        if(!self::isSettingThere($settingkey)){
            self::$inLineVars[$settingkey] = $settingvalue;
        }
    }

    public static function addScript($script, $scriptkey=NULL)
    {
        if(!$scriptkey){
            if(!self::$inLineJs){
                self::$inLineJs = array();
                self::$inLineJs[] = $script;
            }elseif(!(in_array($script, self::$inLineJs))){
                self::$inLineJs[] = $script;
            }
        }elseif(!isset(self::$inLineJs[$scriptkey])){
            self::$inLineJs[$scriptkey] = $script;
        }
    }

    protected static function appendItemToSetting($current, $item)
    {
        if($item == $current){ return $current; }
        if(is_array($current)){
            if(!in_array($item, $current)){                
                $current[] = $item;
            }
            return $current;
        }else{
            return [$current, $item];
        }
    }

    public static function extendSetting($settingkey, $settingvalue)
    {
        $current = self::getSetting($settingkey);
        if($current){
            $new = self::appendItemToSetting($current, $settingvalue);
            if( $new !== $current){
                self::$inLineVars[$settingkey] = $new;            
            }
        }else{
            self::addSetting($settingkey, $settingvalue);
        }
    }
    public static function getSetting($settingkey){
        if(self::$inLineVars){
          $sale = isset(self::$inLineVars[$settingkey]) ? self::$inLineVars[$settingkey] : NULL;
          return $sale; 
        }else{
          return NULL;
        }
    }

    public static function getScripts(){
      return self::$inLineJs;
    }

    public static function getSettings(){
      return self::$inLineVars;
    }

    public static function iskeyedArray($array)
    {
        $out = FALSE;
        $keys = array_keys($array);
        foreach ($keys as $key) {
            if(!is_numeric($key)){
                $out = TRUE;
                break;
            }
        }
        return $out;
    }

    protected static function renderInLineJs()
    {
        return (self::$inLineJs) ? implode("\n", self::$inLineJs) : '';
    }

    protected static function renderInLineVars($js)
    {
        $out = '';
        if(is_array($js)){
            $items = [];
            foreach ($js as $key => $value) {
                $items[] = '"'.$key .'": '.self::renderJsItem($value);
            }
            $out .= implode(', ', $items);
        }        
        return $out;
    }

    protected static function renderJsItem($item)
    {
        if(is_scalar($item)){
            return (is_numeric($item)) ? ''.$item : '"'.$item.'"';
        }elseif(is_array($item)){
            if(self::iskeyedArray($item)){
                return '{'. self::renderInLineVars($item).'}';
            }else{
                return (count($item)>0) ? '["'.implode('", "', $item).'"]' : '[ ]';
            }
        }else{
            return '[ ]';
        }
    }

    protected static function isSettingThere($settingkey)
    {
        return ( isset(self::$inLineVars[$settingkey]) ) ? TRUE : FALSE;
    }

    public static function ToString()
    {
        $prefix = "\n".'jQuery.extend(MyTools.settings, {';
        $suffix = '});'."\n";
        $settings = self::renderInLineVars(self::$inLineVars);
        $jsSettings = ($settings) ? $prefix.$settings.$suffix: '';
        $jsMethods = self::renderInLineJs();
        return ($jsMethods) ? $jsSettings."\n".$jsMethods : $jsSettings;
    }
}
    ?>

</code>

Whit this class defined you can add, elsewhere,  global variables to be used by your scripts to a global variable using the code:

<code>

    <?php
    // you are elsewhere in your php code. Write
    use MyTools\Library\Js2l
    Js2l::addSetting($settingkey, $settingvalue);
    // or
    Js2l::extendSetting($variablename, $value);
    // $settingvalue and $value can be scalar o array values
    Js2l::addScript($yourJavaScript, $akeyToAvoidDuplicates);
    ?>

</code>

The class knows how to format the code so you can call it to be injected in the template

<code>
    <?php
    // Filename: /module/Application/view/application/layout/layout.phtml
    ?>

    <?php
    // place this call before the scripts block
    use MyTools\Library\Js2l
    $mysript = Js2l::ToString();
    if ($mysript){
      echo $this->inlineScript()->appendScript($myscript);
    }

</code> 
```

现在你有一个有用的类来按需插入你的内联脚本。`

# ruby - 获取实例化类 ruby 的文件目录

> ID：14772381
> 
> 赞同：8
> 
> 时间：2013-02-08T12:17:18.370
> 
> 标签：ruby, file-io

我有一个 gem，里面有这样的代码：

```
def read(file)
    @file = File.new file, "r"
end 
```

现在的问题是，假设您有这样的目录结构：

```
app/main.rb
app/templates/example.txt 
```

并`main.rb`具有以下代码：

```
require 'mygem'

example = MyGem.read('templates/example.txt') 
```

它提出了`File Not Found: templates/example.txt`. `example.txt`如果它在同一个目录中，它会起作用，`main.rb`但如果它在一个目录中，它就不会起作用。为了解决这个问题，我添加了一个名为`relative_to`in的可选参数`read()`。这需要一个绝对路径，所以上面可能需要：

```
require 'mygem'

example = MyGem.read('templates/example.txt', File.dirname(__FILE__)) 
```

这很好用，但我认为它有点难看。有没有办法让班级知道`read()`正在调用什么文件并根据它计算出路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T09:57:48.213

有一个有趣的图书馆——[**我告诉过你它是私人**](https://github.com/fxn/i-told-you-it-was-private/blob/master/lib/i-told-you-it-was-private.rb)的。人们可以用它来保护他们的方法不被外部调用。代码找到调用方方法的文件并将其删除。使用此行找到*罪犯：*

```
offender = caller[0].split(':')[0] 
```

我想您可以在 MyGem.read 代码中使用它：

```
def read( file )
  fpath = Pathname.new(file)
  if fpath.relative?
    offender = caller[0].split(':')[0]
    fpath = File.join( File.dirname( offender ), file )
  end
  @file = File.new( fpath, "r" )
end 
```

这样你就可以使用相对于你的 Mygem 调用者而不是 pwd 的路径。正是你尝试的方式`app/main.rb`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:23:01.843

好吧，您可以使用 caller，而且比其他人所说的更可靠。

在您的 gem 文件中，在任何类或模块之外，输入以下内容：

```
c = caller
req_file = nil
c.each do |s|
  if(s =~ /(require|require_relative)/)
    req_file = File.dirname(File.expand_path(s.split(':')[0])) #Does not work for filepaths with colons!
    break
  end
end
REQUIRING_FILE_PATH = req_file 
```

这将在 90% 的时间里有效，*除非*需要的脚本执行了 Dir.chdir。File.expand_path 取决于此。恐怕除非您的要求者通过他们的`__FILE__`，否则如果他们更改工作目录，您将无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:41:56.460

您也可以检查[来电者](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-caller)：

```
def read(file)
  if /^(?<file>.+?):.*?/ =~ caller(1).first
    caller_dir, caller_file = Pathname.new(Regexp.last_match[:file]).split
    file_with_path = File.join caller_dir, file
    @file = File.new "#{file_with_path}", "r"
  end
end 
```

我不建议你这样做（上面的代码会被间接调用，因为`caller(1)`，请参阅参考文档`caller`）。此外，如果调用者路径打算包含冒号，则应该更准确地调整上面的正则表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T07:47:18.020

接受文件路径字符串作为参数。转换为路径名对象。检查路径是否是相对的。如果是，则转换为绝对值。

```
def read(file)
  fpath = Pathname.new(file)
  if fpath.relative?
    fpath = File.expand_path(File.join(File.dirname(__FILE__),file))
  end
  @file = File.new(fpath,"r")
end 
```

您可以使此代码更简洁（不那么冗长）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T05:12:16.663

这应该适用于典型用途（我不确定它对间接使用的抵抗力，如[上面的 madusobwa 所述](https://stackoverflow.com/a/14776155/2004045)）：

```
def read_relative(file)
  @file = File.new File.join(File.dirname(caller.first), file)
end 
```

附带说明一下，考虑添加一个块形式的方法，在屈服后关闭文件。在当前的形式中，您强制客户使用`ensure`.

# sql - 如何在不迭代的情况下在 Ibatis/MyBatis 中使用 NOT IN（或 IN）？

> ID：14772383
> 
> 赞同：0
> 
> 时间：2013-02-08T12:17:32.513
> 
> 标签：sql, ibatis, mybatis

我有这样的事情：

```
<select id="group" parameterClass="HashMap" resultMap="group">
       SELECT *
       FROM GROUP
       WHERE ID_USER_GROUP NOT IN (
               SELECT GS.ID_USER_GROUP
               FROM GROUP_SYSTEM GS, GROUP_USER GU
               WHERE GS.ID_USER_GROUP = GU.ID_USER_GROUP
               <dynamic prepend="WHERE">            
                     <isNotEmpty prepend="AND" property="role">
                          GU.ID_ROLE = #role#
                     </isNotEmpty>                            
                     <isNotEmpty prepend="AND" property="userID">
                           GS.ID_USER = #userID#
                     </isNotEmpty>  
               </dynamic>        
               )
   </select> 
```

但这是抛出一个“缺少括号”或类似的东西。Toad 中的查询工作正常（当然没有动态的东西）。

我看过[这篇](https://stackoverflow.com/questions/1637825/how-to-use-an-in-clause-in-ibatis)文章，但我不明白如何合并打开/关闭子句。我是否需要从其他地方调用选择并遍历结果？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:19:01.610

您的子查询缺少右括号

```
SELECT *
FROM GROUP
WHERE ID_USER_GROUP NOT IN 
    (
        SELECT GS.ID_USER_GROUP
        FROM GROUP_SYSTEM GS, GROUP_USER GU
        WHERE GS.ID_USER_GROUP = GU.ID_USER_GROUP
    ) -- <<=== HERE 
```

但我宁愿`JOIN`用过`IN`

```
SELECT  *
FROM    GROUP a
        LEFT JOIN
        (
            SELECT GS.ID_USER_GROUP
            FROM GROUP_SYSTEM GS, GROUP_USER GU
            WHERE GS.ID_USER_GROUP = GU.ID_USER_GROUP
        ) b ON a.ID_USER_GROUP = b.ID_USER_GROUP
WHERE   b.ID_USER_GROUP IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:43:31.697

启用 myBatis 调试并查看它生成的选择语句。通常它确实有助于发现错误。

在此示例中，您的示例似乎将生成如下查询：

```
 SELECT *
   FROM GROUP
   WHERE ID_USER_GROUP NOT IN (
           SELECT GS.ID_USER_GROUP
           FROM GROUP_SYSTEM GS, GROUP_USER GU
           WHERE GS.ID_USER_GROUP = GU.ID_USER_GROUP
           WHERE            
                 AND
                      GU.ID_ROLE = #role#
                 AND
                      GS.ID_USER = #userID#       
           ) 
```

尝试删除 <dynamic prepend="WHERE"> 块。我记得 myBatis 在查询中放置前置参数的正确程度与使用的版本有关。

# php - 加快数据库查询的响应速度

> ID：14772385
> 
> 赞同：0
> 
> 时间：2013-02-08T12:17:37.053
> 
> 标签：php, mysql, sql

我`select * from table order by date desc`在 mysql db 服务器上使用 php 运行查询，其中表有很多记录，这会减慢响应时间。

那么，有什么办法可以加快响应速度。如果索引是答案，我应该为所有列创建索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:27:28.107

你需要使用缓存系统。我所知道的最好的[Memcache](http://php.net/manual/en/book.memcache.php)加速你的应用程序真的很棒，而且它根本不使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:38:54.093

简单的答案：您无法使用软件加速任何事情。

原因：您正在选择表格的全部内容，并且您说它是一个大表格。

你可以做的是缓存数据，但不使用 Memcache，因为它对可以缓存的数据量有限制（每个键 1 MB），所以如果你的数据超过了 - 祝你好运，使用 Memcache 缓存一个巨大的结果集提出维护键和值的有效方案。

索引将无济于事，因为您没有 WHERE 子句，可能会发生的情况是您可以稍微加快 order by 子句。在查询之前使用 EXPLAIN EXTENDED 查看通过网络传输数据所花费的时间以及从查询中检索和排序数据所花费的时间。

如果您的应用程序需要大量数据才能运行，那么您有以下选择：

*   获得更好的服务器，可以更快地推送数据
*   重新设计您的应用程序，因为如果它需要大量数据才能运行，那么它的设计可能不会考虑到效率

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:21:37.673

当您有 WHERE 子句或对已编入索引的字段执行 JOIN 时，索引会加快搜索速度。在您的情况下，您不会这样做：您选择表中的所有条目。所以使用索引对你没有帮助。

您确定需要该表中的所有数据吗？当您稍后在 PHP 中过滤、搜索或聚合这些数据时，您应该寻找在 SQL 中执行此操作的方法，以便数据库向 PHP 发送更少的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:10:15.420

优化查询是一个很大的话题，超出了这个问题的范围

这里有一些**亮点**可以提升您的选择声明

*   使用适当的索引
*   限制数量记录
*   使用您需要的列名（而不是写`select * from table`use `select col1, col2 from table`）

在 mysql 中限制大偏移量的查询有点棘手，这个大偏移量的选择语句会很慢，因为它必须处理大量数据

```
SELECT * FROM table order by whatever LIMIT m, n; 
```

在这里优化这个查询是简单的解决方案

```
select A.* from table A 
  inner join (select id from table order by whatever limit m, n) B
  on A.id = B.id
order by A.whatever 
```

# c# - 错误：System.IO.IOException：找不到网络路径

> ID：14772386
> 
> 赞同：5
> 
> 时间：2013-02-08T12:17:38.233
> 
> 标签：c#, wmi, remote-access, registrykey

当我执行以下代码时，它会导致错误，请帮我解决这个问题。

```
 class MySample
{

    public static void Main()
    {

string eventLogName = "Security";

string sourceName = "BTHUSB";

string machineName = "v.i.com";

EventLog eventLog;

eventLog = new EventLog();

eventLog.Log = eventLogName;

eventLog.Source = sourceName;

eventLog.MachineName = machineName;
foreach (EventLogEntry log in eventLog.Entries.Cast<EventLogEntry>().Reverse())// Entries.Cast<EventLogEntry>().Reverse
{
 Console.WriteLine(") Entry type: {0} , Category: {1},  Data: {2}, ID: {3}, Source: {4} \n", log.EntryType, log.TimeWritten, log.EventID, log.InstanceId, log.Source);
}
}
} 
```

错误是，

> ```
>  Unhandled Exception: System.IO.IOException: The network path was not found.
> 
>   at Microsoft.Win32.RegistryKey.Win32ErrorStatic(Int32 errorCode, String str)
>   at Microsoft.Win32.RegistryKey.OpenRemoteBaseKey(RegistryHive hKey, String ma chineName)
>   at System.Diagnostics.EventLog.GetEventLogRegKey(String machine, Boolean writ able)
>   at System.Diagnostics.EventLog.Exists(String logName, String machineName)
>  at System.Diagnostics.EventLog.OpenForRead(String currentMachineName)
>   at System.Diagnostics.EventLog.GetEntryAtNoThrow(Int32 index)
>   at System.Diagnostics.EventLogEntryCollection.EntriesEnumerator.MoveNext()
>   at System.Linq.Enumerable.<CastIterator>d__aa`1.MoveNext()
>     at System.Linq.Buffer`1..ctor(IEnumerable`1 source)    at System.Linq.Enumerable.<ReverseIterator>d__99`1.MoveNext()
>  at event.MySample.Main() in E:\.net prep\.net examples\event\event\Program.cs :line 42 
> ```

请帮我解决这个问题，在机器名称字段中如何输入远程机器，当它有 vicom 时，但该系统名称仅为 v 。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-15T19:38:23.517

如果您查看堆栈跟踪，您会看到尝试打开远程注册表项时发生的失败。

这意味着**远程注册表**服务没有在目标机器上运行。在 vicom 上，打开服务控制面板 ( *services.msc* ) 并启动名为**Remote Registry**的服务。

该服务通常设置为手动启动类型，因此不会自动启动。如果您需要经常远程配置或访问事件日志，请将其设置为自动启动，以便它始终可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:23:44.863

我假设您指定的 machineName "Venus.InsTIL.com" 无法通过此路径联系到。机器的 UNC 路径是什么？您是否验证过机器是否可以通过其他方式联系（ping、UNC 文件浏览等）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:23:00.587

该代码使用什么帐户运行？它可能没有访问网络的权限。这将取决于 Web 服务配置。

另一件事是，最近的操作系统版本不允许严格的本地帐户访问其他系统上的管理共享，这将再次成为该帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T21:13:12.660

您很可能确实连接到另一台机器。如果连接失败，我希望该错误更像是连接被拒绝或无效凭据。这个异常发生在下一个移动操作（参见堆栈跟踪）上的事实意味着代码在尝试读取不存在的条目时正在读取列表。我的猜测是，当命令创建其列表时，该条目已经存在`foreach`，但在遍历列表时不存在。我怀疑问题是某些东西正在改变你的数据。

# ruby-on-rails - Rails：如何将所有迁移运行到某个时间戳

> ID：14772389
> 
> 赞同：13
> 
> 时间：2013-02-08T12:17:49.187
> 
> 标签：ruby-on-rails, rake

我正在尝试将我的数据库恢复到以前的状态。由于某种原因`db:rollback`无法正常工作（我可能弄错了我的`down`一种方法），所以我没有回滚，而是想知道是否可以通过删除数据库然后重新运行某些迁移来到达那里。本质上，我想运行`db:migrate`，但我希望它在特定的时间戳停止。

是否有一个 rake 命令可以运行所有迁移，直到并包括给定的时间戳？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-08T12:25:34.170

```
rake db:migrate VERSION=timestamp 
```

# java - Java 中是否有等效的“in”Python 关键字？

> ID：14772390
> 
> 赞同：1
> 
> 时间：2013-02-08T12:17:54.163
> 
> 标签：java, python

在 Java 中实现以下 Python 代码的最简单/有效的方法是什么？

```
if "foo" in ["foo", "bar"]:
    print "found." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:23:32.147

如果您有数组中的数据，请使用此

```
String[] strings = {"foo","bar"};
    for (String s : strings) {
        if (s.equals("foo")) {
            System.out.println("found");
            break;
        }
    } 
```

# android - 如何为android项目创建主题和xml样式

> ID：14772391
> 
> 赞同：4
> 
> 时间：2013-02-08T12:17:53.520
> 
> 标签：android, android-layout

如何在 android 4.2 中创建样式主题文件。如何将此主题应用于 android 项目的所有活动。如何将此样式和主题设置为多个屏幕？

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html) >

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:23:55.080

在应用程序的 res/values 目录中创建一个名为 styles.xml 的文件。添加`<resources>`根节点。对于每个样式或主题，添加一个`<style>`具有唯一名称的元素，以及可选的父属性。该名称用于稍后引用这些样式，父项指示要从哪个样式资源继承。在元素内部`<style>`，在一个或多个元素中声明格式值。每个都`<item>`使用名称属性标识其样式属性，并在元素内定义其样式值。然后，您可以从其他 XML 资源、清单或应用程序代码中引用自定义资源。

**主题是应用于整个 Activity 或应用程序的样式，**

```
<style name="MyTheme" parent="android:Theme.Light">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@color/translucent_red</item>
    <item name="android:listViewStyle">@style/MyListView</item>
</style>

<style name="MyListView" parent="@android:style/Widget.ListView">
    <item name="android:listSelector">@drawable/ic_menu_home</item>
</style> 
```

要定义样式，请将 XML 文件保存在`/res/values`项目目录中。XML 文件的根节点必须是`<resources>`.

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="text">
        <item name="android:padding">4dip</item>
        <item name="android:textAppearance">?android:attr/textAppearanceLarge</item>
        <item name="android:textColor">#000000</item>
    </style>
    <style name="layout">
        <item name="android:background">#C0C0C0</item>
    </style>
</resources> 
```

在您`AndroidManifest.xml`将主题应用到您想要样式的活动中：

```
 <activity
        android:name="com.myapp.MyActivity"
        ...
        android:theme="@style/MyTheme"
        /> 
```

# mysql - 按索引使用排序

> ID：14772395
> 
> 赞同：1
> 
> 时间：2013-02-08T12:18:00.503
> 
> 标签：mysql, sql-order-by, sugarcrm

我正在研究我在使用 SugarCRM 时遇到的问题的特殊顺序，我认为以下测试用例描述了该问题：

*   给定以下两个表：

    ```
     CREATE TABLE test1 (
      id int(11) NOT NULL AUTO_INCREMENT,
      name char(20),
      PRIMARY KEY (id)
      );

    CREATE TABLE test2 (
    id int(11) NOT NULL AUTO_INCREMENT,
     name char(20),
     name2 varchar(10),
     PRIMARY KEY (id)
    ); 
    ```

*   将随机数据插入表 test1：

    ```
     delimiter $$  
     create procedure randomizer()
     begin
     declare i int Default 0 ;
     declare random char(20) ;
     declare random2 char(10) ;
     myloop: loop
     set random=conv(floor(rand() * 99999999999999), 20, 36) ;
     insert into test1 (id, name) VALUES (i+1,random) ;
     set i=i+1;
     if i=1000 then
      leave myloop; 
    ```

    万一; 结束循环 myloop; 结束 $$ 分隔符；

*   将随机数据插入表 test2：

    ```
     delimiter $$  
     create procedure randomizer()
     begin
     declare i int Default 0 ;
     declare random char(20) ;
     declare random2 char(10) ;
     myloop: loop
     set random=conv(floor(rand() * 99999999999999), 20, 36) ;
     set random2=conv(floor(rand() * 999999), 10, 36) ;
     insert into test2 (id, name, name2) VALUES (i+1,random, random2) ;
     set i=i+1;
     if i=1000 then
     leave myloop; 
    ```

    万一; 结束循环 myloop; 结束 $$ 分隔符；

*   添加二级索引：

    ```
     alter table test1 add index(name);

         alter table test2 add index(name); 
    ```

*   在连接中的第一个表上使用带有 order by 的表连接执行 QEP：

    ```
    explain select test1.name, test2.name from test1 left join test2 on test1.id=test2.id order by test1.name

    +----+-------------+-------+--------+---------------+---------+---------+---------------+------+-------------+
    | id | select_type | table |  type  | possible_keys |   key   | key_len |      ref      | rows |    Extra    |
    +----+-------------+-------+--------+---------------+---------+---------+---------------+------+-------------+
    |  1 | SIMPLE      | test1 | index  | NULL          | name    |      21 | NULL          |  981 | Using index |
    |  1 | SIMPLE      | test2 | eq_ref | PRIMARY       | PRIMARY |       4 | test.test1.id |    1 |             |
    +----+-------------+-------+--------+---------------+---------+---------+---------------+------+-------------+ 
    ```

*   再一次，但在连接中的第二个表上排序：

    ```
    explain select test1.name, test2.name from test1 left join test2 on test1.id=test2.id order by test2.name

    +----+-------------+-------+--------+---------------+---------+---------+---------------+------+----------------------------------------------+
    | id | select_type | table |  type  | possible_keys |   key   | key_len |      ref      | rows |                    Extra                     |
    +----+-------------+-------+--------+---------------+---------+---------+---------------+------+----------------------------------------------+
    |  1 | SIMPLE      | test1 | index  | NULL          | name    |      21 | NULL          |  981 | Using index; Using temporary; Using filesort |
    |  1 | SIMPLE      | test2 | eq_ref | PRIMARY       | PRIMARY |       4 | test.test1.id |    1 |                                              |
    +----+-------------+-------+--------+---------------+---------+---------+---------------+------+----------------------------------------------+ 
    ```

我不明白为什么查询 2 使用文件排序，而查询 1 能够使用索引。我是否可能遇到本文档中描述的以下限制？

[http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

“您正在连接许多表，并且 ORDER BY 中的列并非全部来自用于检索行的第一个非常量表。（这是 EXPLAIN 输出中第一个没有 const 连接类型的表。）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:05:08.813

您已经正确确定了为什么您的第二个查询没有使用索引。

由于您执行了`LEFT JOIN`from `test1`to `test2`，`test1`是第一个*用于检索 rows 的非常量表*`test2`，因此无法使用索引对 from 的列进行排序。

我认为没有办法让您的查询在功能上保持相同，但使用索引 for `test2`... 但如果您要将连接类型从`left join`to更改`inner join`，则它应该使用索引。

# ios - cocos2d如何重启游戏（图层）

> ID：14772402
> 
> 赞同：0
> 
> 时间：2013-02-08T12:18:52.100
> 
> 标签：ios, objective-c, xcode, cocos2d-iphone

我在 cocos2d 中创建了一个级别，并且屏幕上有一个暂停按钮。单击暂停屏幕将打开菜单（恢复、重新启动、设置）。我希望当我单击重新启动菜单时，我的关卡将从开始开始。我已经尝试过删除该图层类并再次调用它，但它没有用。我试图替换场景。它也没有工作。我怎样才能做到这一点？我已经尝试过了，它有效。

```
[[CCDirector sharedDirector] resume];
    [[CCDirector sharedDirector] pushScene:[HelloWorldLayer node]]; 
```

但它写的是我一遍又一遍地调用pushScene。它会影响我的游戏吗？因为到目前为止，我现在正在删除我想再次重新启动的 HelloWorldLayer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:22:05.860

您必须使用替换场景。使用 pushScene，应用程序最终会耗尽内存，因为之前的场景没有释放。

请务必创建一个新场景（如您的代码示例中所示），不要尝试使用已经运行的场景调用 replaceScene，否则会失败。

您还应该验证您的场景是否在 replaceScene 之后解除分配。在 dealloc 方法中设置断点。如果它不释放，这意味着场景正在泄漏，这可能导致各种奇怪的问题。

# ios - 如何设置 UISegmentedControl 中选定元素的字体？

> ID：14772405
> 
> 赞同：1
> 
> 时间：2013-02-08T12:19:01.250
> 
> 标签：ios, objective-c, ios5, uisegmentedcontrol

我正在尝试为 UISegmentedControl 中的选定和未选定段使用不同的字体。我可以为普通段设置字体，但我似乎无法为所选段设置字体。这是我的代码：

```
 NSDictionary *attributes = [NSDictionary dictionaryWithObject:
                      [UIFont fontWithName:@"Verdana-Bold"
                                      size:[UIFont buttonFontSize]]
                forKey:UITextAttributeFont];
[playerNumber setTitleTextAttributes:attributes
                            forState:UIControlStateHighlighted]; 
```

如果我更改为`UIControlStateNormal`，则所有段都有样式。但是，我只想为突出显示/选定的部分设置样式。（`UIControlStateSelected`也不起作用。）

（有一些类似的 StackOverflow 问题，但我找不到解决我问题的答案。）

我做错了什么或根本无法完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:43:38.007

您是否尝试过在段选择上设置字体，而不是尝试预定义用于所有段的 selectedState 字体？类似于以下内容（未经测试）：

```
int segmentIndex = self.mySegmentedControl.selectedSegmentIndex;
if (segmentIndex == 0)
{
    [self.mySegmentedControl setFont:[UIFont boldSystemFontOfSize:12] forSegmentAtIndex:0];
    [self.mySegmentedControl setFont:[UIFont systemFontOfSize:10] forSegmentAtIndex:1];        
}
else if (segmentIndex == 1)
{
    [self.mySegmentedControl setFont:[UIFont systemFontOfSize:10] forSegmentAtIndex:0];
    [self.mySegmentedControl setFont:[UIFont boldSystemFontOfSize:12] forSegmentAtIndex:1]; 
} 
```

我现在在我的一个应用程序中按照这些思路做了一些事情，但它使用图像作为片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:09:53.320

我今天遇到了这个问题，我相信这是一个iOS的错误。

这是我的黑客。

```
@interface TFSegmentedControl : UISegmentedControl

@end

#import "TFSegmentedControl.h"

@implementation TFSegmentedControl
{
    BOOL layoutedOnce;
}

- (void)updateSelectedStyle
{
    for (UIView *view in self.subviews) {
        BOOL selected = [[view valueForKey:@"selected"] boolValue];
        for (UILabel *label in view.subviews) {
            if ([label isKindOfClass:[UILabel class]]) {
                UIFont *font = [self titleTextAttributesForState:UIControlStateNormal][UITextAttributeFont];
                if (selected) {
                    UIFont *_font = [self titleTextAttributesForState:UIControlStateSelected][UITextAttributeFont];
                    if (_font) font = _font;
                }
                if (font != label.font) {
                    label.font = font;
                    CGRect frame = label.frame;
                    frame.size = [label.text sizeWithFont:font];
                    label.frame = frame;
                }
            }
        }
    }
}

- (void)sendActionsForControlEvents:(UIControlEvents)controlEvents
{
    [self updateSelectedStyle];
    [super sendActionsForControlEvents:controlEvents];
}

- (void)setSelectedSegmentIndex:(NSInteger)selectedSegmentIndex
{
    [super setSelectedSegmentIndex:selectedSegmentIndex];
    [self updateSelectedStyle];
}

- (void)layoutSubviews
{
    [super layoutSubviews];
    if (!layoutedOnce) {
        layoutedOnce = YES;
        [self updateSelectedStyle];
    }
}

@end 
```

# php - 单击不同链接时更改网页内容

> ID：14772413
> 
> 赞同：0
> 
> 时间：2013-02-08T12:19:17.480
> 
> 标签：php, url, dynamic

我不确定如何完美地描述我的问题或如何开始。但我可以开始的是，我正在为我的学校制作一个 PHP 网站，而我以前从未使用过 php。我需要的是只更改页面**的**一部分，即*侧边栏*。或内容，取决于用户是否点击*学校*、*联系人*等。

在我的 index.php 上，侧边栏显示新闻。但是在我的导航栏中，如果你点击*有用的链接*，那么侧边栏应该从显示新闻变为显示几个链接。

如果可能的话，如果您随后单击其中一个链接，它应该只会更改导航栏下的内容，而*侧边栏*仍应显示有用的链接。

```
<?php  
include('include/header.php');  
include('include/nav.php');  
?>  

<div class=content>  

<h1>Heading 1</h1>  
<p>Text goes here</p>  

</div>  

<?php include('include/nyheter.php') ?> <--not part of code! this is the sidebar  

<?php include('include/footer.php') 
```

目前，我只使用`<iframe>`代码在 index.php 中显示新闻。但我想摆脱`<iframe>`并使用`<div class=sidebar">`或使用 ID 而不是类。

我四处寻找有用的信息，但他们中的大多数都说了一些关于 AJAX 和 JQuery 的内容，我不知道它们是什么，甚至不知道如何使用它 =(

如果您需要更多信息，请尽可能具体地询问，以便我可以提供正确的信息 =)

**编辑**
我已将整个网站上传到我的谷歌驱动器，以便与您分享。如您所见，我创建了一堆新的 .php 文件（其中大部分来自其他一些用 html 创建的版本，现在已转换为 PHP。
链接是：[https://docs.google。 com/folder/d/0BxsqMLXovlRHdmFlOFYzMjlzRHc/edit?usp=sharing](https://docs.google.com/folder/d/0BxsqMLXovlRHdmFlOFYzMjlzRHc/edit?usp=sharing)

顺便说一句，该网站是挪威语的。我希望这些信息可以帮助您告诉我如何解决我的问题。
请记住，我对 PHP 和 HTML 和 CSS 以外的其他编程语言完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:27:21.423

```
<?php
// get current page url   
$page = basename($_SERVER["REQUEST_URI"]);
  if ($page === "index.php"){
// display news info
}else if($page === "usefulllink.php"){
 // display userful links
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:26:39.847

您可以使用 if 语句根据 url 更改页面内容

例如

```
if($_GET['page'] == "about") {
echo "about page content";
}
elseif($_GET['page'] == "page1") {
echo "page1 content";
} 
```

依此类推，然后您只需将链接 yourpage.com/index.php?page=about 放入您的菜单中，依此类推

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:39:47.893

使用 php $_GET 变量来设置您要使用的页面和导航。这是通过 url 中的变量访问的。

例如：www.yoursite.com?page=home&nav=first

然后，您可以在 php 中包含

```
<?php
$page = $_GET['page'];
$nav = $_GET['nav'];
//set some defaults
if(strlen($page) == 0){ $page = "home"; }
if(strlen($nav) == 0){ $nav = "about"; }

//Then using if statements you can select content and navigation

if($page == "home"){
  //print navigation bar with selected link
  if($nav == "about"){
    //print content for the selected navigation
  }
}

?> 
```

# codeigniter - Codeigniter mysql更新返回双行

> ID：14772424
> 
> 赞同：0
> 
> 时间：2013-02-08T12:19:51.867
> 
> 标签：codeigniter

我有问题，正在 Codeigniter 框架 PHP 中工作，当我想在成功更新后更新数据库中的记录时，他会创建新的空行...

我有页面管理器并列出所有页面。

## ID 名称 删除 编辑

1 主页删除编辑

当我单击“编辑”并在“测试”中编辑主页并提交时，他返回此结果

## ID 名称 删除 编辑

1 主页删除编辑

2 0 删除编辑

它插入具有 0 名称值的新行；

这是我的模型

```
public function edit_page($id = NULL)
    {
        $data = array (
            'name' => $this->input->post('page_name'),
            'body' => $this->input->post('page_body')
        );
        $this->db->where('id', $id);
        $this->db->update('page', $data);
    } 
```

控制器

```
public function edit_page($id = NULL)
    {
            if($this->ion_auth->is_admin())
            {
                $id = $this->uri->segment(3);

                if($id != NULL)
                {
                   $this->load->model("page_m");
                   $this->page_m->edit_page($id);
                   $this->template->set_theme('zend') ->set_layout('admin.html')->build('edit', $this->data);
                }                                         
            }
    } 
```

我的观点

```
<div class="grid-17">

    <div class="widget widget-plain">
        <form class="form uniformForm" action="<?php echo site_url('page/save_page');?>" method="POST">
            <div class="field-group">
                <div class="field">
                    <label> Naziv Strane </label>
                    <input type="text" name="page_name" id="fname" size="50" class="" />
                </div>
                <div class="field">
                    <label>Body </label>
                <div id="section1">
                    <textarea cols="80" id="taBody" name="page_body" class="ckeditor" rows="10" runat="server"></textarea>
                </div> <br>
                <div class="box plain">
                <input type="submit" class="btn btn-primary btn-large dashboard_add" value="Sacuvaj">
                </div>
            </div>
        </form>
    </div>

</div> <!-- .grid --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:37:19.540

您的表单操作需要将 $id 作为其第三个 uri 段：

```
<?php echo site_url('page/edit_page/'.$this->uri->segment(3));?> 
```

# string - 将字符串转换为路径表达式 - Schematron

> ID：14772427
> 
> 赞同：1
> 
> 时间：2013-02-08T12:20:07.863
> 
> 标签：string, casting, path, schematron

伙计们

我正在使用 schematron，我需要执行以下操作：

有时在我想要验证的 xml 文档中，有这样的元素：

```
<Var.X name="B"> 
```

对于这些元素（其中 name() 中间有一个点），我需要在 xml 文件中查看是否有一个名为 Var 的目录，其子元素具有属性 name = X （在这种情况下），如下所示：

```
<Var>
   <Obj name="X">
</Var> 
```

我想将这些对象的 name() 转换为表示路径的字符串，因此对于这种情况尤其如此：

Var.X 将是 /*/Var/child::*[@name="X"]

有了这个字符串，然后我想检查实际上是否存在属于字符串所代表的路径的元素，但是我不能将字符串转换为路径类型，我什至不知道这是否可能......

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:48:28.257

您也可以在没有 saxon-Extension 的情况下使用 name-function！

```
<rule context="*[matches(name(),'\w\.\w')]">
    <let name="beforePoint" value="substring-before(name(),'.')"/>
    <let name="afterPoint" value="substring-after(name(),'.')"/>
    <assert test="/*/*[name() = $beforePoint]/*[@name=$afterPoint]">error message</assert>
</rule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:26:15.160

我已经意识到我想要实现的是用 saxon:evaluate 函数完成的......而且我已经实现了我想要的

# java - 根据 List 的大小创建 Java Random

> ID：14772430
> 
> 赞同：0
> 
> 时间：2013-02-08T12:20:14.510
> 
> 标签：java, list, random

我创建了一种随机化列表的方法：

```
public <T> List<T> randomize(List<T> list) {
    LinkedList<T> randomizedList = new LinkedList<>();
    Random random = new Random(list.size());
    for (int i = random.nextInt(); i < list.size(); i++) {
        randomizedList.add(list.get(i));
    }
    return randomizedList;
} 
```

我传递给此方法的列表包含例如五个元素。当我创建`Random random = new Random(list.size());`时，我期望当我调用它时`random.nextInt()`它会返回随机整数，这将是列表元素的索引。

但是，当我调用`random.nextInt();`而不是从间隔返回数字`[0, 4]`（我希望返回）时，它会返回 for eg: 的值`-349120689`。这给了我一个`java.lang.IndexOutOfBoundsException: Index: -349120689, Size: 5`.

为什么会发生这种情况以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:24:26.367

1.  `new Random(list.size());`这会将随机数生成器的种子设置为`list.size();`我建议更改为`new Random()`（这将根据系统的当前时间为您提供种子）。不过，最好始终重用同一个 Random 对象。

2.  `random.nextInt();`这里是你想放的地方`random.nextInt(list.size());`，它会给你一个从 0 到 list.size() - 1 的数字。

3.  即使进行了上述更改，您的代码也只会为您提供列表的子列表，该列表从随机索引开始直到结束。改为使用`Collections.shuffle(list)`。

要进行真正的洗牌，您需要“记住”您插入了哪些元素。在伪代码中，您可以执行以下操作：

*   将原始列表复制到一个新列表中，我们称之为“orig”
*   创建一个新的空列表，我们称之为“结果”
*   只要 orig 列表有元素，就在随机索引处获取一个元素并将其添加到结果列表中。从 orig 列表中删除所选元素。
*   返回结果列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:24:53.157

> 我希望当我调用 random.nextInt() 时它会返回随机整数，这将是列表元素的索引。

您误解了`Random(long)`构造函数的目的。该构造函数的目的是为列表指定一个*种子*。你*不想*这样做——这意味着每个大小为 5 的集合总是以相同的方式洗牌。

您指定每次调用的范围`nextInt`。因此，如果您想要一个介于 0（包括）和`max`（不包括）之间的随机数，您只需使用：

```
int value = random.nextInt(max); 
```

但是，最好只使用[`Collections.shuffle`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List,%20java.util.Random%29)而不是编写自己的代码来执行此操作-假设您真的*想要*一个随机播放（无论如何，这不是您当前的方法会给您的-即使在修复`nextInt`呼叫之后，您也会结束基本上是一个子列表，因为`nextInt()`只调用一次。所以如果第一次调用`nextInt()`返回 2（在 5 个列表中），你最终会返回一个包含最后 3 个元素的新列表。我强烈怀疑这不是你试图做。

附带说明一下，如果您想知道 API 的行为为何不符合您的预期，**请阅读文档**。[`Random(long)`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#Random%28long%29)构造函数的文档[`Random.nextInt()`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28%29)很明显*不是*您所期望的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:23:41.077

用这个

```
public <T> List<T> randomize(List<T> list) {
    LinkedList<T> randomizedList = new LinkedList<>();
    Random random = new Random();
    for (int i = random.nextInt(list.size()); i < list.size(); i++) {
        randomizedList.add(list.get(i));
    }
    return randomizedList;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:24:03.333

构造函数的参数`Random`是一个随机种子，而不是它返回的最大值。

将最大数量传递给[`nextInt()`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:24:12.823

您将`nextInt(n)`（随机化的上限）的参数与构造函数的参数（随机种子）混淆了。您应该使用`nextInt(list.size)`，并且可能使用 初始化 Random 对象`new Random()`。

# haskell - 带有日期时间的 haskell 日志记录

> ID：14772433
> 
> 赞同：1
> 
> 时间：2013-02-08T12:20:23.887
> 
> 标签：haskell

我正在玩这个 writer monad 日志记录示例：

[http://monads.haskell.cz/examples/example17.hs](http://monads.haskell.cz/examples/example17.hs)

我将它用作一个玩具问题来弄清楚如何使用 writer monad 进行日志记录。我正在尝试修改程序，以便它输出每一行的日期时间。我最初的想法是这样修改`logMsg`：

```
-- add a message to the log
logMsg :: String -> Writer [Entry] ()
logMsg s = do
  datetime <- getClockTime
  tell [Log 1 (datetime ++ " " ++ s)] 
```

但是，这不会编译。我想我需要在`IO`某处插入。在哪里？帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:46:28.803

通常的方法是不在 writer monad 本身中使用 IO，而是让它返回日志条目，然后在 runWriterT 返回后使用这些条目。这是一个程序，它总结了它的参数并记录了它们中的每一个：[https ://gist.github.com/zsol/4741625](https://gist.github.com/zsol/4741625)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:54:45.543

`Writer`是类型别名 t `WriterT w Identity`，因此您可以使用`IO`内部 monad 而不是创建别名`Identity`，例如：

```
type WriterIO = Writer w IO 
```

您可以通过例如[liftIO](http://hackage.haskell.org/packages/archive/transformers/0.3.0.0/doc/html/Control-Monad-IO-Class.html#v%3aliftIO)使用 IO ，例如：

```
-- add a message to the log
logMsg :: String -> WriterIO [Entry] ()
logMsg s = do
    datetime <- liftIO getClockTime
    tell [Log 1 (show datetime ++ " " ++ s)] 
```

# bash - 在文件中打印最后 n-2 行的优雅方式

> ID：14772436
> 
> 赞同：1
> 
> 时间：2013-02-08T12:20:30.710
> 
> 标签：bash

我想打印文件的最后 n-2 行，其中 n 是文件中的行数。这可以通过执行 n = `wc -l`-2 然后`tail -n $file`.

但是有没有更好的方法来做到这一点？我经常在 bash 中需要这个功能......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T12:23:35.377

您可以使用`tail -n +3 file`跳过前两行（并输出其余 n-2 行）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T12:24:21.193

如果我理解正确，`tail -n +3 file`应该做你想做的。

从`man tail`

```
 -n, --lines=K
          output the last K lines, instead of the last 10; or use -n +K to output lines starting with the Kth 
```

# ios - iOS 6 - 能够从 URL 保存 .pdf，能够在 WebView 中显示它，不能将它移动到 iBooks

> ID：14772439
> 
> 赞同：1
> 
> 时间：2013-02-08T12:20:44.533
> 
> 标签：ios, uidocumentinteraction, xcode4.6

这就是我想要做的：

1.  从外部 URL 获取 .pdf
2.  保存到我的本地磁盘
3.  在 WebView 中显示它
4.  允许用户将 .pdf 移动到另一个可以阅读 .pdf 的应用

从 1 到 3 的所有内容都可以正常工作。但是没有任何东西被移动/共享到/与其他应用程序。我不明白我做错了什么。这就是我正在做的事情。

**我如何将 pdf 保存在 Documents 文件夹 (viewDidLoad) 中：**

```
// to save the pdf into local file system (tempString is the pdf url)
NSData *pdfData = [[NSData alloc] 
    initWithContentsOfURL:[NSURL URLWithString:tempString]];
NSString *resourceToPath = [[NSString alloc] 
    initWithString:[[[[NSBundle mainBundle] resourcePath]
    stringByDeletingLastPathComponent] 
    stringByAppendingPathComponent:@"Documents"]];
NSString *filePAth = [resourceToPath stringByAppendingPathComponent:@"myPDF.pdf"];
[pdfData writeToFile:filePAth atomically:YES];

// to populate the WebView
NSURL *url2 = [NSURL fileURLWithPath:filePAth];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url2];
[my_web_view setUserInteractionEnabled:YES];
//[editoriale_view setDelegate:self];
[my_web_view loadRequest:requestObj]; 
```

**在我的 viewDidLoad() 函数中，我创建了一个按钮，允许用户打开可以读取 .pdf 文件的应用程序列表：**

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 
    initWithBarButtonSystemItem:UIBarButtonSystemItemBookmarks target:self 
    action:@selector(show_Button)]; 
```

**这是我的 show_Button 函数：**

```
-(void)show_Button {
    NSString *resourceToPath = [[NSString alloc] 
        initWithString:[[[[NSBundle mainBundle] resourcePath] 
        stringByDeletingLastPathComponent] 
        stringByAppendingPathComponent:@"Documents"]];
        NSString *filePAth = [resourceToPath 
        stringByAppendingPathComponent:@"myPDF.pdf"];

    NSLog(@"filePath = %@", filePAth);
    NSURL *url2 = [NSURL fileURLWithPath:filePAth];    
    NSLog(@"url2 = %@", url2);

    UIDocumentInteractionController *docContr = [UIDocumentInteractionController 
        interactionControllerWithURL:url2];
    [docContr presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
 } 
```

当我在我的设备上尝试这个时，一切正常，直到我点击列表中的一个图标（即 iBooks 之一）。然后应用程序关闭（它不会崩溃，它只是关闭）。

**这是我在 show_Button 函数中放置的两个日志的控制台打印内容：**

```
1\. filePath = /Users/[MY_USER]/Library/Application Support/iPhone
    Simulator/6.1/Applications/[MY_EXAD_APP_ID]/Documents/myPDF.pdf
2\. url2 = file://localhost/Users/[MY_USER]/Library/Application%20Support/
    iPhone%20Simulator/6.1/Applications/[MY_EXAD_APP_ID]/Documents/myPDF.pdf 
```

有人想让我明白我做错了什么吗？我正在使用 Xcode 4.6。我使用第三方软件浏览了我的 iPhone 应用程序文件系统，文件“MyPDF.pdf”实际上位于“文档”文件夹中，这很清楚，因为 WebView 已正确填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:01:53.980

显示文档控制器时更改`CGRectZero`为 self.view.bounds。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:37:06.107

解决了。我没有在 .h 文件中实现 UIDocumentenInteractionController 委托。现在我有了，一切正常。感谢@trojanfoe 提供有用的提示。

# visual-studio-2012 - 如何在 visualstudio 2012 中运行测试？

> ID：14772442
> 
> 赞同：0
> 
> 时间：2013-02-08T12:21:04.150
> 
> 标签：visual-studio-2012, coded-ui-tests

如何在 Visual Studio 中运行用 codeduitest（c# 代码）编写的测试？

当我在测试方法、测试类或测试类范围之外右键单击，然后选择 Run Tests 时，它不会运行测试。相反，它只是构建。

即使我尝试从 TestExplorer 运行测试。但是在单击 TestExplorer -> Run all tests 之后，它再次只是构建解决方案并且不运行任何脚本？

我的机器上安装了 Visual Studio 2012 Ultimate 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:48:56.000

有完全相同的问题。VS 安装在 VM 上，无法启动测试用例。你在虚拟机上安装了VS2012吗？如果是，请尝试使用真正的 Windows 7 机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:58:17.917

尝试删除 .testsettings 文件。然后重新运行测试。

# php - Codeigniter 控制器的子域

> ID：14772443
> 
> 赞同：0
> 
> 时间：2013-02-08T12:21:04.010
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我需要重写`mysite.com/signup/register`为`signup.mysite.com/register`.

```
RewriteCond %{HTTP_HOST} ^signup.mysite.com
RewriteRule ^(.*)$ index.php?/signup/register/%1/$1 [L] 
```

当我尝试时`http://signup.mysite.com/register`，它会显示我的默认主页（等于`http://www.mysite.com`）。

当我尝试`http://signup.mysite.com/signup/register`时，它会显示我真正想要的页面。

**编辑可能的解决方案**

```
RewriteCond %{HTTP_HOST} ^signup.
RewriteRule ^(.*)$ http://mysite.com/signup/register/$1 [L] 
```

这有效并显示正确的页面。但是有一个问题：如何在不重定向的情况下做到这一点，将子域保留在 url 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:33:40.917

嘿试试这个，

```
RewriteCond %{HTTP_HOST} ^yoursite.com$ [NC]
RewriteRule ^your_dir_name/(.*) http://your_subdomain.yoursite.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:38:25.443

在你的 routes.php

```
$route['register']='signup/register'; 
```

# javascript - 快速后退按钮单击使页面转换不起作用

> ID：14772444
> 
> 赞同：0
> 
> 时间：2013-02-08T12:21:08.857
> 
> 标签：javascript, jquery, css, back-button, transitions

我是 jQuery、HTML、css 和一切的业余爱好者，如果有更多知识的人可以帮助我，我将不胜感激。这是我正在为我的女朋友制作的网站：www.sharyncunneen.com。

如果你点击那里的按钮，你会注意到我做了一些动画页面转换，涉及到按钮的不透明度、大小和位置。问题是当我单击浏览器后退按钮时：如果我以相当慢的速度单击它，转换仍然可以正常工作，但如果我连续快速单击几次，就像 jQuery/javascript 没有时间赶上或某物。我真的不知道。

您需要查看文件或代码吗？我不会包括任何其他内容。我认为最好让您告诉我哪些信息会对您有所帮助，因为我不确定在此论坛上进行的最佳方式，我想向有经验的用户学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:23:36.097

我根本看不到任何转换 o0 无论如何，您可以使用 jquery 队列功能。开始动画时开始一个队列，当你的过渡完成时清除它。您还可以限制排队事件的数量，以避免网站因快速点击而变得疯狂。

# c++ - “Using”关键字调用基类构造函数

> ID：14772445
> 
> 赞同：8
> 
> 时间：2013-02-08T12:21:10.547
> 
> 标签：c++, using

我有以下基类

```
class Grammateas
{
 public:
 Grammateas(std::string name):_name(name){};
  virtual ~Grammateas(){};
 private:
  std::string _name;
}; 
```

和以下派生类

```
class Boithos final : public Grammateas
{
 public:
  //using Grammateas::Grammateas;
  Boithos(int hours):Grammateas("das"),_hours(hours){};
  virtual ~Boithos(){};
 private:
  int _hours;
}; 
```

我想使用基类构造函数来创建这样的对象

```
 Boithos Giorgakis(5); //works
   Boithos Giorgakis("something"); //Bug 
```

我读到我可以使用 using 关键字，但是当我尝试使用它时

```
 using Grammateas::Grammateas; 
```

编译器返回一条消息

> 错误：'Grammateas::Grammateas' 命名构造函数

你能帮我理解构造函数的 using 关键字吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:43:26.227

您的代码 - 未`using Grammateas::Grammateas;`注释 - 应该可以工作。（但要注意：继承的构造函数会保持`_hours`未初始化状态。）

通过 -declarations 继承构造`using`函数是 C++11 中的一个新特性。也许您的编译器还不支持此功能，或者在结合继承的构造函数和其他重载时遇到问题。（如果它接受说明`final`符，它似乎被正确设置为首先编译 C++11。）

# java - 带有选择器的 Java 多客户端服务器

> ID：14772446
> 
> 赞同：0
> 
> 时间：2013-02-08T12:21:11.940
> 
> 标签：java, sockets, nio

我已经读到可以使用选择器和通道创建一个只有一个线程的多客户端服务器。我做了一个快速草图来测试功能，它似乎只能处理每个连接的套接字数据......我的意思是第一个客户端连接并且服务器正在等待来自它的数据包如果另一个客户端连接它不处理它...任何帮助？作为最终结果我希望我的服务器监听多个客户端每个客户端将能够连接发送和接收数据到/从服务器，所以如果它发送服务器写：客户端[num]发送这个数据“数据”

继承人的代码：

```
public static void Startnio() throws Exception
    {
        ServerSocketChannel ServerChannel = ServerSocketChannel.open();
        ServerChannel.configureBlocking(false);
        ServerSocket Server = ServerChannel.socket();
        Server.bind(new InetSocketAddress(port));
        Selector selector = Selector.open();
        ServerChannel.register(selector, SelectionKey.OP_ACCEPT);
        System.out.println("Server began listening on port: " + port);

        while (true)
        {
            int num = selector.select();
            if (num == 0)
            {
                continue;
            }
            Set keys = selector.selectedKeys();
            Iterator it = keys.iterator();
            while (it.hasNext())
            {
                SelectionKey key = (SelectionKey) it.next();
                if ((key.readyOps() & SelectionKey.OP_ACCEPT) == SelectionKey.OP_ACCEPT)
                {
                    Socket Client = Server.accept();
                    count++;
                    System.out.println("Client Connected...." + "you have " + count + " clients connected");
                    SocketChannel ClientChannel = Client.getChannel();
                    ClientChannel.configureBlocking(false);
                    ClientChannel.register(selector, SelectionKey.OP_READ);//read incoming stream
                }
                else
                {
                    if ((key.readyOps() & SelectionKey.OP_READ) == SelectionKey.OP_READ)
                    {
                        SocketChannel Client = null;
                        Client = (SocketChannel) key.channel();
                        client=Client;
                        ReadClientStream();
                    }
                }

            }
        }
    } 
```

读取客户端流只是一些标准字节缓冲区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:43:23.633

您没有清除已选择`SelectionKey`的 s。将代码更改为以下

```
 while (it.hasNext()) {
                SelectionKey key = (SelectionKey) it.next();
                if ((key.readyOps() & SelectionKey.OP_ACCEPT) == SelectionKey.OP_ACCEPT) {
                    Socket Client = Server.accept();

                    count++;
                    System.out.println("Client Connected...." + "you have "
                            + count + " clients connected");
                    SocketChannel ClientChannel = Client.getChannel();
                    ClientChannel.configureBlocking(false);
                    ClientChannel.register(selector, SelectionKey.OP_READ);// read
                                                                            // incoming
                                                                            // stream
                } else {
                    if ((key.readyOps() & SelectionKey.OP_READ) == SelectionKey.OP_READ) {
                        SocketChannel Client = null;
                        Client = (SocketChannel) key.channel();
                        // client=Client;
                        // ReadClientStream();
                    }
                }
                it.remove(); // Add this to Remove Already Selected SelectionKeys 

            } 
```

# c++ - C++ 代数库

> ID：14772447
> 
> 赞同：1
> 
> 时间：2013-02-08T12:21:12.097
> 
> 标签：c++, algebra

我需要一个 C++ 代数库才能在我的项目中使用。一开始我以为我可以写一个，但后来我意识到我试图重新发明轮子并没有成功，浪费了我宝贵的时间。

对于算术问题，我找到了 GMP 库（你知道，用于无限算术计算）和用于其他类型任务的工具（标准 C++ 库似乎足以生成伪随机数）。但是，我找不到适合代数作品的。

有线性代数库（例如 Armadillo），但我不确定我是否需要这样的库。我想总结一下我的需求。

```
#include <string>
#include <somelibrary.h>

int main(){
std::string str = "3*x^3+2*x^2+x+sqrt(x)*x^(1/3)";
algebraic_expression* exp = new algebraic_expression(str);
} 
```

我想从这样的表达中得到一棵树。可以说它将返回带有一些信息的 std::vector 或 C 样式数组。例如（考虑上面的例子）exp[0] 将是 "3*x^3"，或者可能是 exp[0]["base"]="x"。

为什么我需要这个？实际上我可以通过使用 RegEx 来做类似的事情，但有时我无法处理它，例如 3*x^0 只是 3，我不能打印 3*x^0 因为它没有意义我想要 3（就像3*x^1 是 3*x)。或者 (3-3)*5*2 将返回 0，等等...

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:35:55.260

You should look for 'CAS' (Computer Algebra System) . I can suggest you two:

Ginac [http://www.ginac.de/](http://www.ginac.de/)

Giac: [http://www-fourier.ujf-grenoble.fr/~parisse/giac.html](http://www-fourier.ujf-grenoble.fr/~parisse/giac.html)

An example program with Giac: [http://www-fourier.ujf-grenoble.fr/~parisse/giac_us.html#First%20example](http://www-fourier.ujf-grenoble.fr/~parisse/giac_us.html#First%20example)

Giac also comes with a GUI application called XCAS. It's a very powerful tool you should give it a try.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:43:36.683

我在我的硕士论文程序中使用了 LAPACK 进行 3D 代数计算。

*   链接：[http](http://www.netlib.org/lapack/) ://www.netlib.org/lapack/ c++ 版本库链接：http: [//www.netlib.org/lapack++/](http://www.netlib.org/lapack++/)

# javascript - 当用户在 asp.net 中按 Tab 时如何限制输入类型？

> ID：14772448
> 
> 赞同：0
> 
> 时间：2013-02-08T12:21:14.753
> 
> 标签：javascript, asp.net, validation

我有一个文本框，其中 SSN 号码由用户插入`TexBox`，`default value as 'XX-XX-'`然后他只在“XX-XX-”之后输入四位数字。我有javascript，但是当他按下标签时，`TexBox`即'XX-XX-'中的文本被选中，它会刷新所有选定的文本。我想限制它只能在'XX-XX-'之后输入`eg: XX-XX-1234`怎么办？

.aspx 页面：

```
<asp:TextBox ID="txtInsuredSSN" runat="server" Text="XX-XX-" MaxLength="10" onkeydown="return validateSSN(event);" /> 
```

Javascript：

```
function validateSSN(key) {

            //getting key code of pressed key
            var keycode = (key.which) ? key.which : key.keyCode;
            var phn = document.getElementById('<%#txtInsuredSSN.ClientID %>');
            if (phn.selectionStart < 6)
                return false;
            //comparing pressed keycodes
            if ((keycode < 48 || keycode > 57)) {
                if ((keycode > 95 && keycode < 106) && phn.value.length < 10)//if num lock is on
                {
                    return true;
                }
                else if (keycode = 8 && phn.value.length > 6) { //check for backspace
                    return true;
                }
                else {

                    return false;
                }
            }
            else {
                //Condition to check textbox contains ten numbers or not
                if (phn.value.length < 10) {
                    return true;
                }
                else {
                    return false;
                }
            }
        } 
```

请提出任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:10:31.817

为硬编码前缀使用标签，例如：

```
<label>
<span class="frmlabelleftfloat">SSN: xx-xx-</span>
<asp:TextBox ID="Last4OfSSN"  runat="server" ValidationGroup="ssnValidation" MaxLength="4"></asp:TextBox>
<span class="failureNotification">*</span>
<asp:RegularExpressionValidator ID="regexpssn" runat="server" ControlToValidate="Last4OfSSN"
    ValidationGroup="ssnValidation"     Display="Dynamic" ForeColor="Red" ErrorMessage="Should be 4 Digits"
    ValidationExpression="\\d{4}?$">   </asp:RegularExpressionValidator>
</label> 
```

您需要验证该正则表达式。

# dns - 如何制作一个脚本，为多个网站执行 nslookup -q=ns 并将结果导出到文件

> ID：14772451
> 
> 赞同：2
> 
> 时间：2013-02-08T12:21:33.017
> 
> 标签：dns, export-to-excel, domain-name, nslookup

我需要创建一个脚本，将多个网站的 nslookup -q=ns 结果输出到一个文件中。我知道如何为一个网站做到这一点，它只是“nslookup -q=ns stackoverflow.com”。但是，如何将多个网站逐一列出到一个文件中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:00:27.457

从命令行：

```
for /F %x in (websites.txt) do nslookup -q=ns %x 
```

在批处理文件中，您必须将百分比加倍：

对于 (websites.txt) 中的 /F %%x 执行 @echo nslookup -q=ns %%x

# html - CSS媒体查询屏幕方向问题

> ID：14772455
> 
> 赞同：1
> 
> 时间：2013-02-08T12:21:43.203
> 
> 标签：html, css, responsive-design, media-queries

我正在将此媒体查询用于目标视口最大宽度为 800 像素的设备最小宽度为 400 像素

```
@media screen and (max-width: 800px) and (min-device-width: 400px)
{
body {background:#fff;}
} 
```

我需要为此更改横向的颜色，我使用此代码

```
@media screen and (orientation:landscape)
{
body {background:red;}
} 
```

它在设备中运行良好，但背景红色适用于 PC 浏览器，如何仅在设备横向应用背景红色？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T12:24:08.463

您没有选择要应用背景的元素

```
@media screen and (orientation:landscape)
{background:red;} 
```

应该是这样的：

```
@media screen and (max-device-width: 1000px) 
              and (orientation:landscape){
  body {
    background: red;
  }
} 
```

max-device-width 应该让它忽略桌面，如果你不放在`device`那里，它仍然会影响那些让浏览器变小的桌面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:26:59.130

以这种方式尝试

```
@media screen and (max-width: 800px) 
              and (min-width: 400px) {
    body {
        background: white;
    }
}

@media screen and (max-width: 800px) 
              and (min-width: 400px)
              and (orientation:landscape) {
    body {
        background: red;
    }
} 
```

或尝试检测仅手持设备查看的`min-resolution`值，如[http://jsbin.com/irozuf/1/edit](http://jsbin.com/irozuf/1/edit) - 例如

```
@media screen and (max-width: 800px) 
              and (min-width: 400px)
              and (min-resolution: 97dpi)   /* a typical screen has 96dpi */
              and (orientation:landscape) {
    body {
        background: red;
    }
} 
```

按像素密度查看此[显示器列表，](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)它似乎可以在现代移动设备上正常工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-16T12:46:41.457

如果您将这些元标记添加到页面头部：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

所以关键：“宽度”意味着相同的“设备宽度”。所以，

```
@media screen and (max-device-width: 1000px){} 
```

等于

```
@media screen and (max-width: 1000px){} 
```

使用你喜欢的每一个：
[带有键“宽度”的元标签]

或

[没有元标签，但有“设备宽度”]

# python - NetFlix API：“扩展”不适用于 pyflix2

> ID：14772456
> 
> 赞同：0
> 
> 时间：2013-02-08T12:21:46.117
> 
> 标签：python, python-2.7, netflix

Netflix API 说这个 URL：

```
http://api-public.netflix.com/catalog/titles/movies/60036637?expand=synopsis%20cast%20directors%20awards%20similars 
```

在获取标题详细信息时应该可以工作。这应该扩展作为参数“expand”发送的所有链接，即概要、演员、导演、奖项和类似内容。但是，在 pyflix2（用于访问 netflix API 的 python 实现）中，当我执行相同操作时，它不起作用。

我使用的代码如下：

```
import pyflix2

netflix = pyflix2.NetflixAPIV2( 'App_ID', 'APP_KEY', 'SHARED_SECRET')
movieDetails = netflix.get_title(title["id"], "synopsis cast directors awards similars") 
```

get_title() 函数在 pyflix2 库中编写如下（我已经对其进行了调整以获得所需的功能）：

```
def get_title(self, id,  category=None):
    if id.startswith('http'):
        url=id

        url="%s?expand=%s" %(url,urllib.quote(category))

        return self._request('get', url).json()
    else:
        raise NetflixError("The id should be like: http://api.netflix.com/catalog/movies/60000870") 
```

这仍然会返回我通过此查询获得的折叠链接：

[http://api-public.netflix.com/catalog/titles/movies/60036637](http://api-public.netflix.com/catalog/titles/movies/60036637)

我觉得我附加的参数格式不正确并且被省略了。我在此链接上尝试了相同的 URL：

[http://kentbrewster.com/netflix-api-explorer/](http://kentbrewster.com/netflix-api-explorer/)

它给了我正确的回应。也许，pyflix2 在某个地方出了问题。有没有人从事同样的工作并面临这个问题？请尽快回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:00:48.827

您正在提供以空格分隔的展开主题列表。它应该是一个逗号分隔的列表。同样对于 V2 api，扩展看起来像`@synopsis`，`@cast`等等。

V2 的 uri 应如下所示：[http ://api.netflix.com/catalog/titles/movies/493387?expand=@cast,@synopsis&v=2.0](http://api.netflix.com/catalog/titles/movies/493387?expand=@cast,@synopsis&v=2.0)

```
def get_title(self, id,  category=None):
    if id.startswith('http'):
        url=id
        data["expand"] = ",".join(category)
        return self._request('get', url, data).json()
    else:
        raise NetflixError("The id should be like: http://api.netflix.com/catalog/movies/60000870")` 
```

（为清楚起见，我已删除上述代码中的所有错误检查）

称之为：

```
movieDetails = netflix.get_title(title["id"], ["@synopsis", "@cast", "@directors", "@awards", "@similars"]); 
```

# jquery - ScrollTop 奇怪的填充

> ID：14772462
> 
> 赞同：1
> 
> 时间：2013-02-08T12:21:58.717
> 
> 标签：jquery, scrolltop

最近一直在个人网站上工作，并使用 jQuery ScrollTop 为我的内容 div 设置动画。但是我遇到了一个问题。

*   **第一个：**每个涉及的顶部都有一个奇怪的填充

*   **第二：**滚动不一致，即。它不会每次都滚动相同的高度。

你可以在这里看到页面：http: [//mnpwr.dk/v2/index.html](http://mnpwr.dk/v2/index.html)

*- 我在周围添加了一个红色边框，这样更容易看到问题。*

**jQuery：**

```
jQuery.noConflict();

jQuery(document).ready(function () {
    getHash();
});

// Keep track of our current state
currentSection = 1;

function getHash() {

    jQuery('.scroll').on('click', function () {
        // Get our new state
        var gethash = jQuery(this).attr('class').split(' ')[0];
        // Calculate the difference, with element height of 500px using formular dest = (newPows - currentPos) * elmHeight
        var scrollTop = (gethash - currentSection) * 500
        jQuery('#contentDiv').animate({
            scrollTop: scrollTop
        }, 500);

        return false;

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:23:41.350

只需添加 CSS

```
p{
 margin:0px;
} 
```

希望这能澄清你的“问题”

你的下一个问题是，如果你有高度为 500 像素的元素，如果你添加一个 1 像素的红色边框，那么元素的高度实际上将是 502 :)
所以如果你将 500 设置为 500 的动画，则位置将不精确。

只是一个建议，用于`.position()`获取元素位置并`scrollTop`为检索到的值设置动画

**[现场演示](http://jsbin.com/efizuc/4/edit)**

# android - 使用 Sherlock ActionBar SearchView setOnKeyListener 进行搜索

> ID：14772464
> 
> 赞同：1
> 
> 时间：2013-02-08T12:22:09.140
> 
> 标签：android, actionbarsherlock, searchview

我正在尝试 ActionBarSherlock SearchView。不幸的是

```
 public boolean onKey(View arg0, int arg1, KeyEvent event) 
```

没有被解雇。你知道原因吗？我从这篇文章 [SearchView imeOptions 和 onQueryTextSubmit 支持](https://stackoverflow.com/questions/13527181/searchview-imeoptions-and-onquerytextsubmit-support) 中看到用户以另一种方式解决了问题。也许我也应该这样做？

谢谢

这是我的代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //Used to put dark icons on light action bar
    boolean isLight = SampleList.THEME == R.style.Theme_Sherlock_Light;

    //Create the search view
   final SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
    searchView.setQueryHint("Search for countriesâ€¦");

    System.out.println("searchView.getQuery()"+searchView.getQuery());

    searchView.setOnKeyListener(new OnKeyListener()
    {
    /**
      * This listens for the user to press the enter button on
      * the keyboard and then hides the virtual keyboard
      */
           @Override
        public boolean onKey(View arg0, int arg1, KeyEvent event) {
        // If the event is a key-down event on the "enter" button

               System.out.println("--->"+searchView.getQuery());
        if ( (event.getAction() == KeyEvent.ACTION_DOWN ) &&
        (arg1 == KeyEvent.KEYCODE_ENTER) )
        {
        InputMethodManager imm = (InputMethodManager)     SearchViews.this.getSystemService(SearchViews.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(searchView.getWindowToken(), 0);
        return true;
        }
        return false;
        }

    } );

    menu.add("Search")
        .setIcon(isLight ? R.drawable.ic_search_inverse : R.drawable.abs__ic_search)
        .setActionView(searchView)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T12:40:04.967

避免做这样的事情。使用**SearchView.OnQueryTextListener**

```
final SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
searchView.setQueryHint("Search for countries..");
searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

    @Override
    public boolean onQueryTextChange(String newText) {
        return false;
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        if (query.length() != 0) {
            System.out.println("--->" + query);
            // handle search here
            return true;
        }
        return false;
    }
}); 
```

始终阅读[文档](http://developer.android.com/reference/android/widget/SearchView.html)

# java - 确定 If 语句

> ID：14772465
> 
> 赞同：-2
> 
> 时间：2013-02-08T12:22:10.547
> 
> 标签：java

我正在学习如何用 Java 编程，这是我的第一门语言。我一直在寻找if 语句的*明确答案。*if 语句是循环的吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:24:32.813

简短的回答，不，如果语句不是循环。

我建议你收藏这个[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

# apache - Apache 未在 .htaccess 规则中捕获相对路径

> ID：14772467
> 
> 赞同：1
> 
> 时间：2013-02-08T12:22:16.820
> 
> 标签：apache, .htaccess, mod-rewrite

如果请求是通过相对路径发出的，Apache 不会捕获以下 .htaccess 规则。

```
RewriteCond %{REQUEST_FILENAME} -f  [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

RewriteRule ^(.*)/?$ index.php?var=$1 [NC,L] 
```

例如，如果发送给客户端的 HTML 包括：

```
<link href="CSS/main.css" rel="stylesheet" type="text/css" /> 
```

Apache 将跳过该规则。但是，如果 HTML 包括：

```
<link href="http://host.com/CSS/main.css" rel="stylesheet" type="text/css" /> 
```

它工作得很好。

例如 CSS 文件中的相对路径也是如此，例如：

```
background-image:url(../images/image.png); 
```

也就是说，如果请求的 CSS 已首先使用完整路径名请求。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:53:27.707

第二个 RewriteRule 只会在服务器内部重写搜索路径。因此，当向客户端发送相对搜索路径时，请说：

```
<link href="CSS/main.css" rel="stylesheet" type="text/css" /> 
```

第二个 RewriteRule中提到的任何内容`$1`都将包含在搜索路径中。

因此，如果客户端请求例如 www.example.com/en/ 并且`href="CSS/main.css"`发回包含相对路径的 HTML 文档，则客户端将期望 css 文件位于`www.example.com/en/CSS`，而不是`www.example.com/CSS/`。当然，如果示例中的 css 文档使用直接路径引用，例如：`href="http://example.com/CSS/main.css"`文档将被正确检索。

# python - Flask 和 jinja2 包含标签

> ID：14772469
> 
> 赞同：2
> 
> 时间：2013-02-08T12:22:19.607
> 
> 标签：python, django, flask, jinja2

如何在 jinja2 中“包含标签”。我需要在基本模板中输出一块文章。他们在儿童中工作。

**视图.py**

```
Articles.query.filter_by(name=name).first() 
```

**base.html**

```
{% block content %}
    Content base
{% endblock %}
---{{ this_articles_tag }}---- 
```

**儿童.html**

```
{% extends 'base.html' %}
{% block content %}
    Content children
{% endblock %}
---{{ output Articles }}---- 
```

Django 在这个“包含标签”中，在 jinja2 中怎么做？（不使用 context_processor）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:11:31.560

如果您需要在模板中包含另一个模板，只需在 Jinja 中使用[include 。](http://jinja.pocoo.org/docs/templates/#include)但是如果你在谈论模板标签（在 Django 中我记得我很喜欢它们），那么在 Flask 中只有你提到的 context_processor 是要走的路。我认为这根本不是一件坏事。

**编辑：**

[文档](http://flask.pocoo.org/docs/templating/#context-processors)中指出了将上下文处理器注册为函数的最简单方法。

但是如果你想要更花哨的东西，比如动态加载器，或者你会从不同的地方加载你的函数，那么你可以定义自己的装饰器函数，它基本上包装了返回字典的函数：

```
def example_templatetag():
  def get_something():
    return get_want_you_want_from_db()
  return dict(get_something=get_something) 
```

然后，在您创建 Flask 应用程序对象的地方，您可以轻松地注册此函数：

```
app.context_processor(example_templatetag) 
```

然后在一个模板中你可以使用如下：

```
{% set data_you_wanted=get_something() %}
{{ data_you_wanted }} 
```

但也许对你来说，文档中提到的方式已经足够了；）

# opencv - “缓存” cvWarpPerspective 贴图

> ID：14772478
> 
> 赞同：0
> 
> 时间：2013-02-08T12:22:43.823
> 
> 标签：opencv

我在 cvWarpPerspective 中对几个帧使用相同的矩阵。现在我注意到为 cvRemap 创建地图似乎花费了很多时间。我喜欢

*   缓存为 cvRemap 创建的地图
*   甚至可能将该贴图与未失真贴图结合起来

我不知道如何自己快速从我的 3x3 矩阵创建地图。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:42:02.087

没有 OpenCV 函数可以为您创建地图，但我通过从 warpPerspective 复制代码（地图创建部分）做了同样的事情

这很容易，因为 warpPerspective 创建地图，然后用它们调用 remap()。

为了优化内存使用，warpPerspective 计算小块的地图——你必须修改它来创建完整的地图。

至于将它与失真相结合，您必须编写自定义地图生成器 - 您需要在那里进行一些数学运算。

# macos - 在 Mac 沙盒应用程序中访问附属文件

> ID：14772480
> 
> 赞同：2
> 
> 时间：2013-02-08T12:22:53.957
> 
> 标签：macos, cocoa, sandbox, appstore-sandbox, xmp

我需要在基于文档的照片编辑器应用程序中访问 Sidecar XMP 文件。图像文件是文档，当用户打开并保存图像文档时，我需要访问边车 XMP 文件。

是否可以在基于文档的沙盒应用程序中访问附属文件（例如 XMP）？

我知道默认情况下这是不可能的，但是允许这样做所需的最小临时安全异常是什么？

在不使用临时异常的情况下是否有解决方法？

请注意，无法保证图像文件文档范围的书签到边车（因为它们可能由不同平台上的其他应用程序创建），因此此解决方案将不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-12T21:19:54.087

虽然这个问题很老，但我想我会分享我的解决方案。您可以在应用程序 info.plist 中的 CFBundleDocumentTypes 部分添加一个条目，并将 NSIsRelatedItemType 设置为 true。然后，您的沙盒应用程序将能够打开用户授予权限的具有相同名称但具有您列出的扩展名的任何文件。下面是一个 xmp sidecar 文件的示例：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeExtensions</key>
        <array>
            <string>xmp</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>XMP sidecar</string>
        <key>CFBundleTypeRole</key>
        <string>None</string>
        <key>NSIsRelatedItemType</key>
        <true/>
    </dict>
</array> 
```

# yii - 试驾示例的 Yii 问题

> ID：14772487
> 
> 赞同：0
> 
> 时间：2013-02-08T12:23:02.710
> 
> 标签：yii

我正在尝试使用 testdrive 示例逐步创建我的第一个 Yii 应用程序，但我遇到了一些问题。

当我尝试创建新用户时，出现错误`CException`：

`UserController cannot find the requested view "_form".`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:53:51.663

如果我理解正确，您已经创建了一个`protected/controller/UserController.php`.

从它的声音来看，在该代码的某个地方，您可以调用`render`(or `partialRender`)，它看起来像这样：

```
$this->render('_form'); 
```

为此，您需要一个相应的视图文件。视图应该进入`protected/views/<controllerName>`并且应该是与您使用的视图名称相对应的文件。在您的情况下，您需要一个`protected/views/User/_form.php`.

# .htaccess - .htaccess 重定向分页

> ID：14772491
> 
> 赞同：0
> 
> 时间：2013-02-08T12:23:13.660
> 
> 标签：.htaccess, pagination

目前我的页面url结构是这样的

Mysite.com/page-2 mysite.com/categoryname/page-2

我想把它改成

mysite.com/page/2/mysite.com/category/categoryname/page/2/

请注意，我有多个页面，即假设一个类别有 100 个页面，因此我需要将所有较早的页码重定向到新的 url 结构。编写每个 url 的代码太乏味了。我不确定，但在代码中使用 $ 会有所帮助。

请让我知道如何通过 .htacess 完成。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:04:43.843

如我所见，您的 URL 结构已经与您拥有的所需结构一致。

/category/电信新闻/page/2

# magento - 在 Magento 中重新排序产品列表块

> ID：14772505
> 
> 赞同：1
> 
> 时间：2013-02-08T12:23:47.373
> 
> 标签：magento

我有点像 Magento 菜鸟。我的主页的页面布局部分中有以下代码：

```
<reference name="content">
    <block type="catalog/product_list" name="featured" template="catalog/product/list.phtml">
        <action method="setCategoryId"><category_id>8</category_id></action>
    </block>
</reference> 
```

如何更改此块中产品的排序属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:00:59.343

产品列表的顺序通常由工具栏块控制`Mage_Catalog_Block_Product_List_Toolbar`。但是，如果您希望能够影响从布局中订购产品集合的方式，您可以执行以下操作：

重写该块`Mage_Catalog_Block_Product_List`并为其添加一个函数：

```
public function setOrder($attribute, $direction) 
{
    $collection = $this->_getProductCollection();
    $collection->clear()->setOrder($attribute, $direction);
    $this->_productCollection = $collection;
} 
```

在布局更新中添加一个动作节点，例如

```
<reference name="content">
    <block type="catalog/product_list" name="featured" template="catalog/product/list.phtml">
        <action method="setCategoryId"><category_id>8</category_id></action>
        <action method="setOrder"><attribute>name</attribute><direction>desc</direction></action>
</block> 
```

# javascript - 如何将幻灯片效果添加到 javascript 图像滑块

> ID：14772507
> 
> 赞同：0
> 
> 时间：2013-02-08T12:23:52.553
> 
> 标签：javascript, slideshow, jquery-slide-effects

我是 JavaScript 新手，想从头开始学习。我最近设法创建了一个图像幻灯片，但到目前为止它还没有幻灯片/淡入淡出效果。如果有人可以帮助我，我将不胜感激，因为没有其他教程/答案有帮助。

这是我的 JavaScript 代码：

```
<script>
var images = new Array;

images[1] = "_images/_slideshow/slideImg01.png";
images[2] = "_images/_slideshow/slideImg02.png";
images[3] = "_images/_slideshow/slideImg03.png";
images[4] = "_images/_slideshow/slideImg04.png";
images[5] = "_images/_slideshow/slideImg05.png";

var currentImage = 1;

function changeimage(change){
    currentImage += change;
    if(currentImage > images.length -1){
        currentImage = 1;
    }
    else if(currentImage < 1){
        currentImage = images.length -1;
    }
    document.getElementById('slideshowIMG').innerHTML = '<img src="' + 
    images[currentImage] + '"/>';
}

changeimage(0);
</script> 
```

这是我的 HTML 代码：

```
<div id="slideshow">
    <div id="slideshowIMG"></div>

    <div id="slideshowcontrols">
        <a onclick="changeimage(-1);">next</a>
        <a onclick="changeimage(1);">prev</a>
    </div>
</div> 
```

现在，在哪里编辑代码以添加滑动/淡入淡出效果？代码可能是什么？

一个简单的从左到右 - 反之亦然 - 幻灯片效果就足够了:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:06:25.157

我的建议是查看 JQuery，有大量的滑动和淡入淡出效果，而且使用简单。您提到您是 javascript 的新手 - [Codecademy](http://www.codecademy.com/tracks/jquery)有一个 JQuery 轨道，教如何添加幻灯片和淡入淡出效果。

不幸的是，这意味着您不能使用已经编写的 javascript 代码，因为图像必须以 html 而不是 javascript 添加，因此您可以使用 jQuery 来操作它们。

# node.js - npm 安装时间失败，找不到 make 错误

> ID：14772508
> 
> 赞同：218
> 
> 时间：2013-02-08T12:23:53.927
> 
> 标签：node.js

当我尝试在 nodejs 服务器上安装 time 时，出现以下错误：

```
time@0.8.4 install /var/www/track/node_modules/time
node-gyp rebuild
gyp ERR! build error
gyp ERR! stack Error: not found: make
gyp ERR! stack     at F (/usr/lib/nodejs/npm/node_modules/which/which.js:43:28)
gyp ERR! stack     at E (/usr/lib/nodejs/npm/node_modules/which/which.js:46:29)
gyp ERR! stack     at /usr/lib/nodejs/npm/node_modules/which/which.js:57:16
gyp ERR! stack     at Object.oncomplete (fs.js:297:15)
gyp ERR! System Linux 3.2.0-31-virtual
gyp ERR! command "node" "/usr/lib/nodejs/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /var/www/track/node_modules/time
gyp ERR! node -v v0.8.15
gyp ERR! node-gyp -v v0.7.1
gyp ERR! not ok
npm ERR! time@0.8.4 install: `node-gyp rebuild`
npm ERR! `sh "-c" "node-gyp rebuild"` failed with 1
npm ERR!
npm ERR! Failed at the time@0.8.4 install script.
npm ERR! This is most likely a problem with the time package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node-gyp rebuild
npm ERR! You can get their info via:
npm ERR!     npm owner ls time
npm ERR! There is likely additional logging output above.

npm ERR! System Linux 3.2.0-31-virtual
npm ERR! command "nodejs" "/usr/bin/npm" "install" "time"
npm ERR! cwd /var/www/track
npm ERR! node -v v0.8.15
npm ERR! npm -v 1.1.66
npm ERR! code ELIFECYCLE
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     /var/www/track/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：662
> 
> 时间：2013-02-08T12:29:56.673

您使用的是哪个操作系统？

如果是 Ubuntu，则需要安装 build-essential 软件包：

```
$ sudo apt-get install build-essential 
```

然后尝试再次安装该软件包。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-06-24T16:56:26.983

我在 CENTOS 7 和 RHEL 7 基础映像上使用 Docker 时遇到了同样的问题……请执行以下操作：

```
RUN yum install -y make gcc* 
```

非常适合我！

注意：除了安装 gcc* 中列出的所有 69 个包之外，您可以只安装安装 nodejs 所需的内容，如下所示

```
dnf install -y gcc-c++ make 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-05-04T10:23:50.043

如果您使用的是 Windows 和 npm，请通过 cmd（管理员）安装它：

`npm install --global --production windows-build-tools`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-07T13:13:49.213

对于 Manjaro/Arch Linux，您需要安装 make 和 gcc

```
sudo pacman -S make gcc 
```

# jquery - 圆形 JQUERY 水平滚动条

> ID：14772512
> 
> 赞同：1
> 
> 时间：2013-02-08T12:24:00.023
> 
> 标签：jquery, scroll

我想修改这个滚动条以循环方式连续循环，而不是等待最后一个元素，然后再次开始滚动。

```
jQuery.fn.liScroll = function(settings) {
        settings = jQuery.extend({
           travelocity: 0.07
        }, settings);       
        return this.each(function(){
                var $strip = jQuery(this);
                $strip.addClass("newsticker")
                var stripWidth = 20;
                $strip.find("li").each(function(i){
                   stripWidth += jQuery(this, i).outerWidth(true); // thanks to Michael Haszprunar and Fabien Volpi
                });
                var $mask = $strip.wrap("<div class='mask'></div>");
                var $tickercontainer = $strip.parent().wrap("<div class='tickercontainer'></div>");                             
                var containerWidth = $strip.parent().parent().width();  //a.k.a. 'mask' width   
                $strip.width(stripWidth);           
                var totalTravel = stripWidth+containerWidth;
                var defTiming = totalTravel/settings.travelocity;   // thanks to Scott Waye     
                function scrollnews(spazio, tempo){
                   $strip.animate({left: '-='+ spazio}, tempo, "linear", function(){$strip.css("left", containerWidth); scrollnews(totalTravel, defTiming);});//defTiming
                }
                scrollnews(totalTravel, defTiming);             
                $strip.hover(function(){
                   jQuery(this).stop();
                },
                function(){
                   var offset = jQuery(this).offset();
                   var residualSpace = offset.left + stripWidth;
                   var residualTime = residualSpace/settings.travelocity;
                   scrollnews(residualSpace, residualTime);
                });         
        }); 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:48:09.787

一个名为 simplescroll 的 jQuery 插件可能是您正在寻找的： [http ://logicbox.net/jquery/simplyscroll/horizo​​ntal.html](http://logicbox.net/jquery/simplyscroll/horizontal.html)

# html - 使用 check_box_tag 时如何使复选框默认选中？

> ID：14772514
> 
> 赞同：1
> 
> 时间：2013-02-08T12:24:05.767
> 
> 标签：html, ruby-on-rails, haml

```
= form_tag movies_path, :id => 'ratings_form', :method => :get do

  Include:

  - @all_ratings.each do |rating|
    = rating
    - is_checked = (!@selected_ratings.nil? && @selected_ratings.include?(rating))
    = check_box_tag "ratings[#{rating}]", is_checked, is_checked, {:id => "ratings_#{rating}"}
    = submit_tag 'Refresh', :id => 'ratings_submit' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:27:15.600

参考：-[`check_box_tag`](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormTagHelper.html#M002246)

改变

```
check_box_tag "ratings[#{rating}]", is_checked, is_checked, {:id => "ratings_#{rating}"} 
```

至

```
check_box_tag "ratings[#{rating}]", is_checked, true, {:id => "ratings_#{rating}"} 
```

# c# - 如何使用具有动态母版页的内容占位符

> ID：14772520
> 
> 赞同：0
> 
> 时间：2013-02-08T12:24:16.487
> 
> 标签：c#, asp.net

我编写了一个内容系统，允许用户编辑网站的页面。当他们编辑页面时，他们可以选择用于该页面的模板。所有内容和选择都在数据库中。

当我显示一个页面时，我只调用一个文件 (DisplayPage.aspx)，并传递页面 ID。这使用页面 ID 来选择所选模板，以显示页面。

每个模板都有自己的一组内容占位符，有些在所有模板中是通用的，有些是该模板独有的。我的问题是，鉴于母版页是动态选择的并且占位符的数量/名称会有所不同，我如何引用和填充模板的所有内容占位符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:26:13.100

遍历所有控件并递归地遍历它们的子控件并检查类型，如果它们是内容占位符，则您有 ID。

```
for (string cphID in ((MasterPageType)this.MasterPage).ContentPlaceHolders)
{
   Debug.WriteLine(cphID);
} 
```

# java - 空值后Java中的垃圾收集器

> ID：14772524
> 
> 赞同：1
> 
> 时间：2013-02-08T12:24:21.053
> 
> 标签：java, garbage-collection

我正在从 java 认证书中做一些练习。在关于垃圾收集的问题中，他们提供了以下代码：

```
class Test {
   private Demo d;
   void start() {
      d = new Demo();
      this.takeDemo(d);
   }
   void takeDemo(Demo demo) {
      demo = null;
      demo = new Demo();
   }
} 
```

问题是

> 在第 4 行创建的 Demo 对象何时有资格进行垃圾回收？

我会说它可以在指令 demo=null; 之后收集。因为不再引用它，但他们给出的答案是：

> 当运行此代码的实例符合垃圾回收条件时

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T12:26:31.847

[Java 是“按值传递”](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)，因此该语句仅影响in`demo = null;`的本地副本。它不设置为，因此只要封闭实例可访问，就可以访问。`demo``takeDemo``d``null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:27:09.877

您正确地注意到`demo`设置为`null`. 但`d`不是。它仍然持有对同一个对象的引用。因此得到了答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:27:25.237

因为`demo = null`只是改变方法参数的值`demo`，它是方法本地的，不影响字段的值`d`。请记住，在 Java 中，所有方法参数都是按值传递的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:26:37.890

在方法完成之前，对局部变量的引用`d`是“活动的” 。`start()`在此之前，垃圾收集不应该释放它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:28:43.670

第 4 行的 Demo 只能与 Test 实例一起收集。或者如果你再次调用 start 方法（旧的 Demo 将被收集并创建新的）

takeDemo 方法对第一个 Demo 没有影响。但它创建了第二个演示。在 takeDemo 方法完成后可以立即收集第二个 Demo。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T12:56:27.303

当你调用 this.takeDemo(d); 引用 d 的值被复制到参数 demo 所以 d 和 demo 都引用在第 4 行中创建的对象。现在在方法内部，当您将变量 demo 设置为指向 null d 时仍然持有一个引用，因此该对象将是一旦 Test 类的实例被垃圾收集，就有资格进行垃圾收集。

# php - PDO lastInsertId(); ? 从刚刚插入的值的特定列返回值

> ID：14772526
> 
> 赞同：1
> 
> 时间：2013-02-08T12:24:21.550
> 
> 标签：php, pdo

我需要从刚刚发生的更新的自动递增列中返回值。

基本上我正在使用 XYZ 值更新用户：

```
$stmt->execute(); 
```

我需要从数据库中自动递增的 ID 列中获取新记录值。

PDO`lastInsertId();`只返回最新记录，在高流量站点上可能存在潜在危险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:33:15.153

我希望你正在使用MySql？？

来自mysql站点：

> 生成的 ID 在每个连接的基础上维护在服务器中。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

更远：

> 如果使用单个 INSERT 语句插入多行，则 LAST_INSERT_ID() 仅返回为第一个插入行生成的值。

所以它可以保存使用，因为它是在连接的基础上工作的。如果您插入多行，您可以将其与 PDO 的`rowCount`方法结合使用以获取所有插入的 id。

# matlab - 在 MATLAB 中读取具有非 CSV 数据的文件

> ID：14772530
> 
> 赞同：0
> 
> 时间：2013-02-08T12:24:26.417
> 
> 标签：matlab, file-io

通过串行端口，我在文本文件中获取 X、Y 和 Z 的数据，如下所示：

```
X195Y207Z247
X195Y209Z248
X193Y207Z248
X195Y207Z248
X194Y207Z235
X193Y209Z248
X193Y220Z247
X193Y217Z237
X193Y220Z248
X193Y223Z248
X193Y227Z238
X193Y231Z248 
```

IE

> X=195, Y=207, Z=247

等等...

我想编写一个 MATLAB 脚本，将这些数据读入三个向量 X、Y 和 Z。对于 CSV 文件，[这里](https://stackoverflow.com/questions/2856417/reading-a-text-file-in-matlab-line-by-line)
有 一个类似的问题，但在我的情况下，数据不是逗号分隔的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:29:04.820

尝试：

```
fid = fopen('data.dat','rt');
C = textscan(fid, '%*c %f %*c %f %*c %f', 'Delimiter','\n');
fclose(fid);

[X,Y,Z] = deal(C{:}); 
```

结果：

```
>> [X Y Z]
ans =
   195   207   247
   195   209   248
   193   207   248
   195   207   248
   194   207   235
   193   209   248
   193   220   247
   193   217   237
   193   220   248
   193   223   248
   193   227   238
   193   231   248 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:30:30.307

```
values = sscanf(str2,'%*c%f%*c%f%*c%f',[1 Inf]) 
```

`X = values(1)`等等...

# groovy - 从子项目调用父函数

> ID：14772532
> 
> 赞同：2
> 
> 时间：2013-02-08T12:24:33.120
> 
> 标签：groovy, gradle

Gradle中有没有办法从子项目中调用父函数？如果我将父项目和功能定义为：

```
def testMethod() {
    println("TestMethod called from directory ${project.projectDir}")
} 
```

和子项目为：

```
task subTest << {
    println("I'm subTest task from ${project.projectDir}")
    testMethod()
} 
```

从命令行调用它会导致：

```
Could not find method testMethod() for arguments [] on root project 'subsys1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:32:56.203

```
Could not find method testMethod() for arguments [] on root project 'subsys1' 
```

意味着 Gradle 认为这`subsy1`是根项目，而您的父项目应该是根项目。这意味着你有多个 settings.gradle，它认为 subsys1 是项目层次结构的开始。应该只有 1 个`settings.gradle`文件，它应该驻留在根项目中。您可以在那里配置每个子项目。他们没有自己的`settings.gradle`文件。

# ios - 如何防止触摸通过自定义标注视图中包含的 UITableView？

> ID：14772545
> 
> 赞同：1
> 
> 时间：2013-02-08T12:25:40.753
> 
> 标签：ios, uitableview, uikit, mkmapview

我创建了一个包含 UITableView 的自定义标注视图。标注视图是用户选择的注释视图的子视图。我的问题是，每当我在表格视图中选择一行时，表格视图都会正确注册一个触摸事件，然后将其传递给下面的地图视图。这会导致标注视图消失。我的目标是在表格视图中选择一行后使其保持可见。

# map - THREE.Js 自发光纹理贴图

> ID：14772548
> 
> 赞同：0
> 
> 时间：2013-02-08T12:25:54.213
> 
> 标签：map, three.js, textures

是否可以使用照明贴图或自发光纹理？我试过“mapEmissive”：“illumination_3.jpg”和“colorEmissive”：[0.5、0.5、0.5]，但似乎无法让它工作。我看到他们是 github 上提到的 Ekitson 的代码实现....

我的 JSON 文件材料属性：“材料”：[ {“阴影”：“Phong”、“DbgColor”：15658734、“DbgIndex”：0、“DbgName”：“military_space_fighter_black3”、“colorAmbient”：[0.588、0.588、0.588 ], "colorDiffuse" : [0.588, 0.588, 0.588], "colorSpecular" : [0.5, 0.5, 0.5], "colorEmissive" : [0.5, 0.5, 0.5], "illumination" : 2, "mapAmbient" : "super_black_color_3 .jpg”、“mapBump”：“bump_3.jpg”、“mapDiffuse”：“super_black_color_3.jpg”、“mapEmissive”：“illumination_3.jpg”、“mapSpecular”：“specular_3.jpg”、“opticalDensity”：1.5、 “高光系数”：10.0，“透明度”：0.0 }]，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:48:54.100

在 r55 中没有“mapEmissive”或“colorEmissive”属性。如果您查看 webgl_materials.html 示例，您会看到材质有一个“发射”属性。

# jsf-2 - 更改语言后视图 ID 为空

> ID：14772549
> 
> 赞同：0
> 
> 时间：2013-02-08T12:25:56.893
> 
> 标签：jsf-2, primefaces

我正在使用 PrimeFaces 3.4.1、MyFaces 2.0.7、Websphere Application Server 7。

我正在使用**`p:tabView`**带有 3 个选项卡的组件。当我在应用程序中更改语言时**`first tab`**工作正常，没有任何错误。但是如果我去**`second or third tab`**-> 更改语言 -> 然后导航到任何一个非活动选项卡。我得到以下异常。

```
 Caused by: java.io.FileNotFoundException: Facelet /.xhtml?REQUIRED=false not found at: file:/opt/IBM/WebSphere/AppServer/profiles/mblade140/installedApps/mblade140/ldapmanager-application-ear.ear/ldapmanager-application-web.war/.xhtml?REQUIRED=false
[08.02.13 12:55:42:349 CET] 00000090 SystemErr     R    at org.apache.myfaces.view.facelets.impl.DefaultFaceletFactory._createFacelet(DefaultFaceletFactory.java:286) 
```

以下是我为**`p:tabView`**组件编写代码的方式

```
 <h:form id="headerForm" prependId="false">
    <h:inputHidden id="activeTabIndexId" value="#{AppUserManagementBean.activeTabIndex}" />
    <p:remoteCommand update="tabView:fieldAppUserMgmt,tabView:filterApps,tabView:filterRoles,tabView:panel_grid_newuser" 
            name="onTabChange" 
            process="activeTabIndexId,@this" 
            actionListener="#{AppUserManagementBean.onTabChanged}" >
            <f:param name="REQUIRED" value="false"/>
    </p:remoteCommand>

    <p:tabView id="tabView" dynamic="true" cache="true" activeIndex="#{AppUserManagementBean.activeTabIndex}"
        onTabChange="document.getElementById('activeTabIndexId').value = index;onTabChange();">

        <p:tab id="userManagementTab" title="#{msgs.UserManagement_Title}">
            <ui:include src="UserManagement.xhtml" />
        </p:tab>
        <p:tab id="applicationUserManagementTab"
            title="#{msgs.AppUserMgmt_Title}">
            <ui:include src="AppUserManagement.xhtml" />
        </p:tab>
        <p:tab id="userGroupManagementTab"
            title="#{msgs.UserGroupMgmt_Title}">
            <ui:include src="UserGroupManagement.xhtml" />
        </p:tab>
    </p:tabView>
</h:form> 
```

这是我为更改支持 bean 中的语言而编写的代码。更改语言时调用此方法**`p:selectOneMenu`**

```
 public void setLocale(String selectedLocale) {
    System.out.println("Changing locale to "+selectedLocale);
    this.locale = selectedLocale;
    for (Map.Entry<String, Locale> entry : countryMap.entrySet()) {
        if (entry.getValue().toString().equals(selectedLocale)) {
            FacesContext.getCurrentInstance().getViewRoot()
                    .setLocale((Locale) entry.getValue());
        }
    }
} 
```

我在这里做错了什么？有人可以阐明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:45:26.277

搞定了...

问题是**`p:tabView`**我已经设置了**`dynamic=true`**. 我已经删除了**`dynamic=true`**。语言更改选项现在正在工作。我不知道为什么......

# linux - 虚拟内存说明 - 分配大的连续内存

> ID：14772556
> 
> 赞同：2
> 
> 时间：2013-02-08T12:26:24.450
> 
> 标签：linux, windows, memory, memory-management

我有一个应用程序，我必须在 Windows 上（使用 operator new）分配相当大的内存空间（数百 MB）。该应用程序是 32 位的（我们现在不使用 64 位，即使在 64 位系统上也是如此）并且我启用了 /LARGEADDRESSAWARE 链接器选项以能够使用 4 GB 的用户空间内存。

*问题*如果我需要分配，比如说 450 MB 的连续内存，进程的虚拟地址空间是否需要有足够大的连续空间*，*另外物理内存不必在系统上分段？我问这个是因为我可以这样做，以便我的应用程序保留足够大的连续空间，但不知道系统上的其他应用程序是否会以这种方式影响我。操作系统页表是否需要将应用程序看到的连续虚拟地址转换为*连续*物理地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:36:14.963

如果内存只是用于您的软件，那么您的 450MB 分配将只需要在虚拟空间中留出 450MB 的空缺。它可以满足来自内存系统各个角落的页面[只要系统中某处至少有 450MB 可用 - 包括交换空间]。

如果操作系统能够以 2MB 的连续块分配页面[一次使用 2MB 的“大页面”]，您的系统将获得更好的性能。但如果需要，系统会退回到单独的 4KB 页面。

分页内存架构的几个好处之一是任何物理页面都可以放置在任何虚拟地址。在某些系统中，例如在调试模式下的 Xen 虚拟化管理器，页面是有意分配的，不按顺序分配，以便更容易检测系统何时假设内存页面是连续的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:30:35.553

您无需担心物理内存的连续性。这是虚拟到物理地址转换可以帮助您完成的一件事。只要您可以保留一块地址空间并用物理内存支持它，无论它碰巧在哪里，事情都会正常进行。

# database - 在非常简单的查询中对 ORDER BY FIELD 的 db INDEX 没有帮助 - 仍然响应缓慢？

> ID：14772557
> 
> 赞同：0
> 
> 时间：2013-02-08T12:26:28.303
> 
> 标签：database, indexing, db2, sql-order-by

我有一个非常简单的查询，它返回 200K 记录非常慢（20 秒）。

```
SELECT * FROM TABLE ORDER BY ID DESC 
```

如果我只是

```
 SELECT * FROM TABLE 
```

它返回快速结果。

我在该字段 ID 上创建了 INDEX（允许反向扫描），但仍然返回非常相似的响应。问题可能出在哪里？此查询停滞的原因可能是什么？我更新了静态和索引表元数据。

我希望得到数据库专家（管理员）的帮助，我知道这不是一个简单的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:40:30.830

缓冲池很重要和排序堆参数（沿着sheapthres和sheapthres_shr）同时检查是否有排序溢出，因为这意味着排序会因为内存不足而被写入磁盘，并且系统临时表空间是必要的。检查它们存储在哪里，以及磁盘是否足够快。

查看访问计划，并检查索引是否考虑在内。

第一个查询非常快，因为它不需要任何排序，只需要一次表扫描。

对于第二个，索引不做任何事情，因为您将从表中检索所有数据，因此它不访问索引（'where'中没有任何内容，没有任何内容被过滤）

两个查询都需要表扫描，但是第一个需要排序，这就是问题所在，排序。

# wcf - WCF 应用程序不再尝试使用 Windows 身份验证 - 仅接收 HTTP 401.2

> ID：14772563
> 
> 赞同：1
> 
> 时间：2013-02-08T12:26:44.197
> 
> 标签：wcf, iis-7.5, kerberos, ntlm

我们有一个 ClickOnce WPF 应用程序，它通过 WCF 与服务进行通信。

去年某个时候，客户端在初次未经授权的尝试后正确地使用身份验证与服务进行通信：

```
2012-09-20 18:19:08 {ip address} POST /MyService/MyService.svc - 80 - {other ip address} - 401 2 5 0
2012-09-20 18:19:10 {ip address} POST /MyService/MyService.svc - 80 DOMAIN\USERNAME {other ip address} - 200 0 0 2279 
```

但是，最近它不再尝试对自己进行身份验证：

```
2013-02-08 11:27:09 {ip address} POST /MyService/MyService.svc - 80 - {other ip address} - 401 2 5 1
2013-02-08 11:27:09 {ip address} POST /MyService/MyService.svc - 80 - {other ip address} - 401 1 2148074254 202 
```

据我所知，配置在此期间没有更改。

WPF 客户端应用程序的配置设置为：

```
<basicHttpBinding>
    <binding name="BasicHttpBinding_IShipRecService" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="01:00:00" sendTimeout="00:00:15"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
    </binding>
</basicHttpBinding> 
```

和服务器：

```
<basicHttpBinding>
  <binding name="basicBinding">
      <security mode="TransportCredentialOnly">
          <transport clientCredentialType="Windows" />
      </security>
  </binding>
</basicHttpBinding> 
```

所以这里有一些奇怪的事情：

*   这些配置上的安全模式不匹配。*但是，它们应该：客户端/Web 应用程序*的实时实例可以使用此设置。此外，调整 web.config 以匹配并不能解决此问题。

*   我们还有一个与 WPF 客户端应用程序具有相同配置的 Web 应用程序。这能够与服务通信。我在这里看到的唯一区别是它们在同一个盒子上。

在 IIS 7.5 中，为服务禁用匿名身份验证并启用 Windows 身份验证。

关于阻止客户端应用程序尝试 Windows 身份验证的任何想法？或者我该如何进一步调查？

# javascript - Javascript - 我在 while 循环中的 setTimeOut 不起作用

> ID：14772565
> 
> 赞同：0
> 
> 时间：2013-02-08T12:26:57.680
> 
> 标签：javascript

我想做这样的事情：

```
<p id="sec">5</p>
<script>
var i = 5;
while (i > 0){
    setTimeout(i--,1000);
    document.getElementById("sec").innerHTML = i;
}
if (i === 0){
    window.location = "index.php";
}
</script> 
```

没有一瞬间，它把我重定向到 index.php？为什么会这样？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:31:47.653

```
var i = 5;
setTimeout(updateTime,1000);

function updateTime()
{
    document.getElementById("sec").innerHTML = i--;

    if (i === 0)
        window.location = "index.php";
    else
        setTimeout(updateTime, 1000);
} 
```

# php - 将字符串转换为数组

> ID：14772570
> 
> 赞同：-4
> 
> 时间：2013-02-08T12:27:08.243
> 
> 标签：php, arrays

我有一个这样的字符串：

```
$values = "[121],[622],[872]"; 
```

我想把它转换成一个数组，我希望方括号中的每个数字都是一个数组项。

有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:29:52.700

```
$array = explode(',',str_replace(array('[',']'),array('',''),$values)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:29:07.787

严重地？利用[`explode()`](http://php.net/manual/en/function.explode.php)

```
$values = "[121],[622],[872]";
$values = str_replace(array("[", "]"), "", $values);
$values = explode(",", $values); 
```

或者以更简单的方式：

```
$array = explode("," ,str_replace(array("[", "]"), "", $values)); 
```

这给出了如下值：

```
Array
  121
  622
  872 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:31:32.960

看到这个

```
$values = "[121],[622],[872]";
$values = substr($values,1);
$values = substr($values,0,-1);
$arr = explode("],[",$values); 
```

希望这可以帮助

# indexeddb - 在 indexedDB 中创建对象存储时出现事务未定义错误

> ID：14772580
> 
> 赞同：0
> 
> 时间：2013-02-08T12:27:23.420
> 
> 标签：indexeddb

我的代码有一些问题，希望您能帮助我。我已经把我的 .open 和所有它的以下代码（unupgradeneede、onsuccess、onerror aso.）放在一个 js 文件中，然后我从另一个 js 文件中调用它。但似乎打开 IndexedDB 和创建对象存储的代码永远不会执行。这是代码

```
window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB ||    window.msIndexedDB;

contosoData = {

    db: null,

    useDb: function (successCallback) {
        var request = window.indexedDB.open("ContosoData", 2);

        request.onsuccess = function (e) {
            contosoData.db = request.result;
            console.log('indexeddb.success');
            successCallback();
        };

        request.onupgradeneeded = function (e) {
            console.log('indexeddb.upgradeneeded');

            contosoData.db = e.target.result;
            if (contosoData.db.objectStoreNames.contains("bookingStore")) {
                contosoData.db.deleteObjectStore("bookingStore");
                var bookingStore = contosoData.db.createObjectStore("bookingsStore", { keyPath: "id", autoIncrement: true });
                bookingStore.createIndex = ('title', 'title', { unique: false });
                bookingstore.createIndex = ('id', 'id', { unique: true });
            }

            else if (contosoData.db.objectStoreNames.contains("workerStore")) {
                contosoData.db.deleteObjectStore("workerStore");
                var workerStore = contosoData.db.createObjectStore("workerStore", { keyPath: "employeeNr" });
            }

            else if (contosoData.db.objectStoreNames.contains("customerStore")) {
                contosoData.db.deleteObjectStore("customerStore");
                var customerStore = contosoData.db.createObjectStore("customerStore", { keyPath: "orgNr" });
            }

            var machineStore = contosoData.db.objectStoreNames.contains("machineStore", { keyPath: "machineNr" });
            contosoData.db.deleteObjectStore("machineStore");
            var machineStore = contosoData.db.createObjectStore("machineStore");
        };

        request.onerror = function (e) {
            console.log('indexeddb.onerror: ' + e);
        };
        request.onblocked = function (e) {
            console.log('indexeddb.locked');
        };
    }
};

contosoData.useDb(function (db) {
    var transaction = contosoData.db.transaction(['bookingsStore'], 'readwrite');
    var objectStore = transaction.objectStore('bookingsStore');
    console.log(objectStore.name);
}); 
```

然后，当我尝试运行它时，当我尝试在另一个 js 文件中创建事务时，我得到一个未定义的事务......我已经检查了我的 js 文件与我打开 IndexedDB 的函数是否已链接以正确的方式和顺序到 html 文件。我还设置了一些断点，看起来 useDb 代码永远不会执行。这是代码

```
function init() {

    contosoData.useDb();

    calendar.createCalendar();
}

calendar.createCalendar = function () {

    var transaction = contosoData.db.transaction(["bookingStore"], "readwrite");
    var bookingStore = transaction.objectStore("bookingStore");
} 
```

有什么我想念的吗？我搜索了它，我试图找到一个解决方案，但到目前为止没有成功......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:45:38.517

我已经在您的代码中看到了两个问题。

首先，数据库始终使用版本 2 打开。如果您已经拥有版本 2 的数据库，则永远不会触发 onupgradeneeded 事件。您需要首先检查（即在 Chrome 中，按 Ctrl-Shift-I 并在资源下检查）。

二、代码使用了这个逻辑

```
if (contosoData.db.objectStoreNames.contains("bookingStore")) {
                contosoData.db.deleteObjectStore("bookingStore");
                var bookingStore = contosoData.db.createObjectStore("bookingsStore", { keyPath: "id", autoIncrement: true });
                bookingStore.createIndex = ('title', 'title', { unique: false });
                bookingstore.createIndex = ('id', 'id', { unique: true });
            } 
```

对于空数据库，它肯定不会有任何对象存储，因此 if 块总是被评估为 false。对象存储永远不会被创建，因为它们驻留在一个永远为假的 if 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:15:03.077

会是这样吗

```
function init() {

    calendar.createCalendar();
}

calendar.createCalendar = function () {

    var transaction = contosoData.db.transaction(["bookingStore"], "readwrite");
    var bookingStore = transaction.objectStore("bookingStore");
}

contosoData.useDb(init); 
```

# ios - 仅针对特定视图禁用手势识别器

> ID：14772583
> 
> 赞同：15
> 
> 时间：2013-02-08T12:27:38.893
> 
> 标签：ios, swift, view, uigesturerecognizer

在一个视图控制器上，我有一个`mainView`. 在那个视图上，我有另一个视图 ，`sidePanel`它的帧为 0,0,86,420。我添加了一个点击手势识别器。现在我只想为 mainView 而不是 sidePanelView 启用手势识别。见下图：

![左视图越过底视图](../Images/04b4153724613835b6d4ef3131214c23.png)

我想为 sidePanelView 禁用 tapGesture 并为除它之外的所有区域启用。我怎样才能做到这一点？（还有一点我想说，sidePanelView 以外的区域是sidePanelView 的parentView）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-09T14:56:52.563

您应该接受 Bharat 的回答，因为这是正确的。我只想说明你是如何做到的：

1.  将您的视图控制器定义为符合`UIGestureRecognizerDelegate`，例如：

    ```
    @interface ViewController () <UIGestureRecognizerDelegate>
    // the rest of your interface
    @end 
    ```

2.  确保`delegate`为手势设置了：

    ```
    UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleMainTap:)];
    gesture.delegate = self;
    [self.view addGestureRecognizer:gesture]; 
    ```

3.  然后检查是否有问题的视图发生了触摸：

    ```
    - (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
    {
        if (CGRectContainsPoint(self.menuView.bounds, [touch locationInView:self.menuView]))
            return NO;

        return YES;
    } 
    ```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-08T12:40:02.533

您可以使用 UIGestureRecognizerDelegate 中的 gestureRecognizer:shouldReceiveTouch: 方法来查看触摸发生的位置并决定是否要响应手势。如果触摸太靠近视图的边缘（您希望禁用 ti 的位置），则返回 NO，否则返回 YES。或者简单地检查 touch.view 以查看触摸是否发生在您的 UIImageView 上。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
   shouldReceiveTouch:(UITouch *)touch; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-30T03:38:06.037

斯威夫特 3 版本：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    if theView.bounds.contains(touch.location(in: theView)) {
        return false
    }
    return true
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-19T00:53:50.923

遇到类似的问题；最终使用了@Rob的答案。这是一个 Swift 版本：

```
extension ViewController: UIGestureRecognizerDelegate {
    func gestureRecognizer(gestureRecognizer: UIGestureRecognizer, shouldReceiveTouch touch: UITouch) -> Bool {
        return !CGRectContainsPoint(menuView.bounds, touch.locationInView(menuView))
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-08T12:54:55.170

如果要禁用`UITapGestureRecognizer`特定视图，只需删除 userInteraction。

**前任**

```
sidePanel.userInteractionEnabled = NO; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T14:33:35.427

我已经做到了，在帮助下

`-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event`

并且我已经检查了触摸点位置并根据触摸位置我做了这样的工作

```
if(points.x>86)
    {//hide the side panel
     } 
```

它通过与事件同步来识别手势。

# asp.net-mvc - 一下子，CultureInfo.CurrentUICulture 不反映 IE9 语言偏好的视图？

> ID：14772586
> 
> 赞同：1
> 
> 时间：2013-02-08T12:27:55.010
> 
> 标签：asp.net-mvc, asp.net-mvc-4, globalization, razor-2, currentuiculture

以前，我认为这段代码没有问题，而且它总是正确地反映了用户在 IE9 中设置的语言偏好：

```
@using (Html.BeginForm("Edit", "Revision", FormMethod.Post, new { id = "RevisionMain" }))
{
    @Html.Hidden("UICultureLanguage", CultureInfo.CurrentUICulture.Name)

...
} 
```

我最近添加了这段代码，以前也为我工作。然而，在上一次这似乎工作和它崩溃之间，我的公司唯一做的就是升级到 Telerik Kendo；我看不出这会如何影响这一点，但问题是上面的代码和下面的代码不再正确反映用户在 IE9 中选择的语言设置......

我的视图中有一个代码块使用 CultureInfo.CurrentUICulture.Name，但无论我将 IE9 语言首选项设置为什么，它似乎总是设置为 en-US。注意：此代码嵌入在@section 中：

```
**@section JQueryScripts** {
    <script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"> </script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"> </script>
    <script src="@Url.Content("~/Scripts/jquery.validate.1.9.js")" type="text/javascript"> </script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"> </script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"> </script>
    @* Language support for numerics that use ',' instead of '.' for decimal separator *@
    <script src="@Url.Content("~/Scripts/jquery.validate.globalized.number-mvc4.js")" type="text/javascript"> </script>
    @* Language support for jQuery datepicker *@
    @{
        var currentUiCultureName = CultureInfo.CurrentUICulture.Name;
        var scriptFile = @Url.Content("~/Scripts/jquery/ui/1.8.1/i18n/jquery.ui.datepicker-" + currentUiCultureName + ".js");
        // var scriptFile = @Url.Content("~/Scripts/jquery/ui/1.8.1/i18n-minified/jquery.ui.datepicker-" + currentUiCultureName + ".min.js");
        // Note: If we have a language other than english (en/en-US), include the appropriate .js file to
        // support the jquery datepicker.  Nothing needed to include for english because A) english is
        // the default language supported by the jquery datepicker and B) there is no physical .js file for
        // english because it is not needed (see A).
        //
        // Attention: If a language is not supported, let the javascript error come up, so we know that the
        // language needs to be supported.
        //

        if (!currentUiCultureName.Equals("en", StringComparison.OrdinalIgnoreCase) &&
            !currentUiCultureName.Equals("en-US", StringComparison.OrdinalIgnoreCase))
        {
            <script type="text/javascript" src="@scriptFile"> </script>
        }
    } 
} 
```

我的 web.config 目前在全球化中有以下设置：

```
<globalization enableClientBasedCulture="true" uiCulture="auto" culture="auto" requestEncoding="utf-8" responseEncoding="utf-8" fileEncoding="utf-8" /> 
```

我还在控制器中将 CultureInfo.CurrentCulture 设置为 CultureInfo.CurrentUICulture，以便我的模型正确绑定日期和数值：

```
protected override void OnAuthorization(AuthorizationContext filterContext)
        {
            base.OnAuthorization(filterContext);

            // For model binding.
            Thread.CurrentThread.CurrentCulture = Thread.CurrentThread.CurrentUICulture;
        } 
```

非常需要注意：由于某种原因，如果我在 OnAuthorization 和 jQueryScripts @section 中的代码块中设置断点，OnAuthorization 会被命中 3 次（我确实有一些可能导致此问题的 ajax 调用（$(document) .ready(...)，但必须验证，以前从未注意到这一点） - 但 Thread.CurrentThread.CurrentUICulture 似乎只在最后一次调用中正确反映了用户的语言偏好，以及我在 jQueryScripts 中放置的断点@查询 CultureInfo.CurrentUICulture 的部分在第一次调用 OnAuthorize 后被命中。我知道 OnAuthorize 没有设置 CurrentUICulture，但只是指出似乎用户的语言设置在控制器中被识别，但在观点。非常令人困惑……有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:19:42.197

**回答**

您是否相信在我的情况下，这似乎是一个组策略问题，它禁止 IE9 语言更改被我本地计算机上的 Web 应用程序识别。很奇怪，尽管我一直使用的 AD 配置文件自从我第一次使用它以来就出现了各种问题。

# extjs - 移动设备中的 Sencha 图表渲染问题

> ID：14772587
> 
> 赞同：0
> 
> 时间：2013-02-08T12:27:56.577
> 
> 标签：extjs, sencha-touch-2, sencha-charts

您好，我正在将 sencha touch 用于图表，当我设置 showInLegend: false 和 legend: { position: 'right' } 时，我遇到了一个问题，在移动设备中没有呈现任何内容，但在我的网络浏览器中它工作完美。我有在 ios 、 android 等各种平台上测试，我正在使用饼图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:27:03.853

我真的不明白你为什么设置 showInLegend: false，如果我这样做，它也不会渲染，这就是为什么在我的图表的所有情况下它都设置为 true。然而，图例也没有显示在浏览器中，但仍然存在图例所在的容器。

# delphi - 如何在 Delphi 中检测屏幕分辨率的变化？

> ID：14772588
> 
> 赞同：11
> 
> 时间：2013-02-08T12:28:02.223
> 
> 标签：delphi, winapi, screen-resolution

问题很简单。如何检测 Delphi 中的屏幕分辨率变化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T12:29:59.980

您只需要检测[`WM_DISPLAYCHANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145210(v=vs.85).aspx)消息。

例如，

```
TForm1 = class(TForm)
private
protected
  procedure WMDisplayChange(var Message: TWMDisplayChange);
    message WM_DISPLAYCHANGE;
  { Private declarations }

public
  { Public declarations }
end;

...

procedure TForm1.WMDisplayChange(var Message: TWMDisplayChange);
begin
  ShowMessageFmt('The screen resolution has changed to %d×%d×%d.',
    [Message.Width, Message.Height, Message.BitsPerPixel]);
end; 
```

![示例截图](../Images/89837efd594d5c7c274643b77e532a7c.png)

# python - 什么都可以作为python包发布？

> ID：14772593
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:28:14.467
> 
> 标签：python, pip

我有示例 python 脚本可以在 AWS 云中执行一些活动，我可以将其作为 pypi 中的包发布吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:31:06.130

任何可以打包的东西都可以发布；PyPI 可以与社区分享您的 Python 代码。

只需遵循[PyPI 教程](http://wiki.python.org/moin/CheeseShopTutorial)并确保您的包遵循指南。

# java - Tomcat 5.0 - 请求的资源不可用

> ID：14772594
> 
> 赞同：1
> 
> 时间：2013-02-08T12:28:16.010
> 
> 标签：java, tomcat, web.xml, tomcat5

我知道这个问题已经被问过很多次了，但我似乎找不到解决方案。

我收到此错误消息：“请求的资源 (/package/servlet/access) 不可用。”

我有这个**web.xml**文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

```
<!-- Define CRM session timeout -->
<session-config>
<session-timeout>60</session-timeout>
</session-config>

<!-- Define servlet-mapped and path-mapped example filters -->
<filter>
    <filter-name>Servlet Mapped Filter</filter-name>
    <filter-class>Filters.ExampleFilter</filter-class>
<init-param>
    <param-name>attribute</param-name>
    <param-value>Filters.ExampleFilter.SERVLET_MAPPED</param-value>
</init-param>
</filter>
<filter>
    <filter-name>Path Mapped Filter</filter-name>
    <filter-class>Filters.ExampleFilter</filter-class>
<init-param>
    <param-name>attribute</param-name>
    <param-value>Filters.ExampleFilter.PATH_MAPPED</param-value>
</init-param>
</filter>
<filter>
    <filter-name>Request Dumper Filter</filter-name>
    <filter-class>Filters.RequestDumperFilter</filter-class>
</filter>

<!-- Example filter to set character encoding on each request -->
<filter>
    <filter-name>Set Character Encoding</filter-name>
    <filter-class>Filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>EUC_JP</param-value>
    </init-param>
</filter>

<filter>
    <filter-name>Compression Filter</filter-name>
    <filter-class>CompressionFilters.CompressionFilter</filter-class>

    <init-param>
      <param-name>compressionThreshold</param-name>
      <param-value>10</param-value>
    </init-param>
    <init-param>
      <param-name>debug</param-name>
      <param-value>0</param-value>
    </init-param>
</filter>

<!-- Define filter mappings for the defined filters -->
<filter-mapping>
    <filter-name>Servlet Mapped Filter</filter-name>
<servlet-name>invoker</servlet-name>
</filter-mapping>
<filter-mapping>
    <filter-name>Path Mapped Filter</filter-name>
<url-pattern>/servlet/*</url-pattern>
</filter-mapping>

<!-- Example filter mapping to apply the "Set Character Encoding" filter
     to *all* requests processed by this web application -->
<!--
    <filter-mapping>
        <filter-name>Set Character Encoding</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
-->

<!--
    <filter-mapping>
      <filter-name>Compression Filter</filter-name>
      <url-pattern>/CompressionTest</url-pattern>
    </filter-mapping>
-->

<!--
    <filter-mapping>
        <filter-name>Request Dumper Filter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
-->

<!-- Define example application events listeners -->
<listener>
    <listener-class>Listeners.ContextListener</listener-class>
</listener>
<listener>
    <listener-class>Listeners.SessionListener</listener-class>
</listener>

<!-- Define servlets that are included in the example application -->
<servlet>
    <servlet-name>SendMailServlet</servlet-name>
    <servlet-class>SendMailServlet</servlet-class>
</servlet>

<servlet>
    <servlet-name>
        snoop
    </servlet-name>
    <servlet-class>
        SnoopServlet
    </servlet-class>
    <!--
        <init-param>
            <param-name>foo</param-name>
            <param-value>bar</param-value>
        </init-param>
    -->
    <run-as>
        <description>Security role for anonymous access</description>
        <role-name>tomcat</role-name>
    </run-as>
</servlet>

<servlet>
  <servlet-name>
      servletToJsp
  </servlet-name>
  <servlet-class>
      servletToJsp
  </servlet-class>
</servlet>
<servlet>
    <servlet-name>
        CompressionFilterTestServlet
    </servlet-name>
    <servlet-class>
        CompressionFilters.CompressionFilterTestServlet
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>
        CompressionFilterTestServlet
    </servlet-name>
    <url-pattern>
        /CompressionTest
    </url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>SendMailServlet</servlet-name>
    <url-pattern>/SendMailServlet</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>
        snoop
    </servlet-name>
    <url-pattern>
        /snoop
    </url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>
        servletToJsp
    </servlet-name>
    <url-pattern>
        /servletToJsp
    </url-pattern>
</servlet-mapping>

<taglib>
    <taglib-uri>
   http://jakarta.apache.org/tomcat/debug-taglib
    </taglib-uri>
    <taglib-location>
       /WEB-INF/jsp/debug-taglib.tld
    </taglib-location>
</taglib>

<taglib>
    <taglib-uri>
   http://jakarta.apache.org/tomcat/examples-taglib
    </taglib-uri>
    <taglib-location>
       /WEB-INF/jsp/example-taglib.tld
    </taglib-location>
</taglib>

<resource-ref>
  <res-ref-name>mail/Session</res-ref-name>
  <res-type>javax.mail.Session</res-type>
  <res-auth>Container</res-auth>
</resource-ref>

<security-constraint>
  <display-name>Example Security Constraint</display-name>
  <web-resource-collection>
     <web-resource-name>Protected Area</web-resource-name>
 <!-- Define the context-relative URL(s) to be protected -->
     <url-pattern>/jsp/security/protected/*</url-pattern>
 <!-- If you list http methods, only those methods are protected -->
 <http-method>DELETE</http-method>
     <http-method>GET</http-method>
     <http-method>POST</http-method>
 <http-method>PUT</http-method>
  </web-resource-collection>
  <auth-constraint>
     <!-- Anyone with one of the listed roles may access this area -->
     <role-name>tomcat</role-name>
 <role-name>role1</role-name>
  </auth-constraint>
</security-constraint>

<!-- Default login configuration uses form-based authentication -->
<login-config>
  <auth-method>FORM</auth-method>
  <realm-name>Example Form-Based Authentication Area</realm-name>
  <form-login-config>
    <form-login-page>/jsp/security/protected/login.jsp</form-login-page>
    <form-error-page>/jsp/security/protected/error.jsp</form-error-page>
  </form-login-config>
</login-config>

<!-- Environment entry examples -->
<!--env-entry>
  <env-entry-description>
     The maximum number of tax exemptions allowed to be set.
  </env-entry-description>
  <env-entry-name>maxExemptions</env-entry-name>
  <env-entry-value>15</env-entry-value>
  <env-entry-type>java.lang.Integer</env-entry-type>
</env-entry-->
<env-entry>
  <env-entry-name>minExemptions</env-entry-name>
  <env-entry-value>1</env-entry-value>
  <env-entry-type>java.lang.Integer</env-entry-type>
</env-entry>
<env-entry>
  <env-entry-name>foo/name1</env-entry-name>
  <env-entry-value>value1</env-entry-value>
  <env-entry-type>java.lang.String</env-entry-type>
</env-entry>
<env-entry>
  <env-entry-name>foo/bar/name2</env-entry-name>
  <env-entry-value>true</env-entry-value>
  <env-entry-type>java.lang.Boolean</env-entry-type>
</env-entry>
<env-entry>
  <env-entry-name>name3</env-entry-name>
  <env-entry-value>1</env-entry-value>
  <env-entry-type>java.lang.Integer</env-entry-type>
</env-entry>
<env-entry>
  <env-entry-name>foo/name4</env-entry-name>
  <env-entry-value>10</env-entry-value>
  <env-entry-type>java.lang.Integer</env-entry-type>
</env-entry>

<!-- EJB Reference -->
<ejb-ref>
  <description>Example EJB Reference</description>
  <ejb-ref-name>ejb/Account</ejb-ref-name>
  <ejb-ref-type>Entity</ejb-ref-type>
  <home>com.mycompany.mypackage.AccountHome</home>
  <remote>com.mycompany.mypackage.Account</remote>
</ejb-ref>

<!-- Local EJB Reference -->
<ejb-local-ref>
  <description>Example Local EJB Reference</description>
  <ejb-ref-name>ejb/ProcessOrder</ejb-ref-name>
  <ejb-ref-type>Session</ejb-ref-type>
  <local-home>com.mycompany.mypackage.ProcessOrderHome</local-home>
  <local>com.mycompany.mypackage.ProcessOrder</local>
</ejb-local-ref> 
```

未找到的 java 文件位于netbeans 的源文件夹中的**Package.Servlets包中。**

我是 Tomcat 环境的新手，想知道需要做些什么。我试图检查该类的用法，但找不到。因此我假设这与 web.xml 设置有关。

编辑：我还检查了日志，似乎没有引发任何异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:07:21.660

您提供的 web.xml 文件的问题是没有定义`<servlet>`s 和`<servlet-mapping>`s 。Tomcat 需要在 web.xml 文件中定义的应用程序中的所有 servlet 以及映射，以便知道在您打开 URL 时要调用哪个 servlet。

`webapps/examples/WEB-INF/web.xml`你可以在你的 Tomcat 安装文件中看到一个这样的例子

# c# - 使用 Linq 获取不同 ID 的 datagridview 列的总和

> ID：14772598
> 
> 赞同：5
> 
> 时间：2013-02-08T12:28:31.963
> 
> 标签：c#, winforms, datagridview

我有两种形式`Form1(DGV1 & DGV2)`，并且在这两种形式上`Form2(DGV3 & DGV4)`都有`Datagridview`控件。

上`Form1`有一个按钮链接`Form2`，用户可以在其中添加行`Form1` `datagridview(DGV1)`。在中`Form2 → (DGV3 and DGV4)`，第一列中有一个`checkbox`，用户一次只能选择一行。

有两个按钮`Form2`：`Done`和`Add Items`

当用户通过依次选择行来单击 Add Items 时，必须将行添加到`datagridview`on`Form1`并且单击 Done 按钮时，`Form1`应显示所有添加的行。

我已经实现了这一点。

`DGV1`和中的列`DGV2`是

**DGV1 列**

```
Sno Desciption SellQty ItemID
----------------------------
 1    ABC       0         1 
 2    XYZ       0         2 
```

**DGV2 列**

```
Sno BatchNo SellQty ItemID
----------------------------
1    123       10         1
2    528       20         2
1    568       30         1
2    522       40         2 
```

在加载过程中`Form1`，如何获取`SellQty`依赖于`ItemID`for的总和`Form → DGv2`并更新`SellQty`in 的值`DGV1`。

例子：`For ItemID=1 sum(SellQty)=40`

所以我需要将此值分配给`DGV1 SellQty Column=40`.

请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T12:35:29.797

以下将为您提供总数量`ItemID == 1`- *（确保为您的数据网格使用正确的列名）*

```
int total = DGV1.Rows.Cast<DataGridViewRow>()
                    .Where(r=> Convert.ToInt32(r.Cells["ItemID"].Value) == 1)
                    .Sum(t=> Convert.ToInt32(t.Cells["SellQty"].Value)); 
```

编辑：

对于您更新的gridview，您可以执行以下操作：

```
for (int i = 0; i < DGV1.Rows.Count; i++)
{
    if (Convert.ToInt32(DGV1.Rows[i].Cells["ItemID"].Value) == 1)
        DGV1.Rows[i].Cells["SellQty"] = total;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:31:41.733

我认为这段代码可能有用

```
Textbox.Text = (from dr in MyDataSet.MyTable.AsEnumerable()
              where !dr.IsCR_TRANSFER_AMTNull()
              select dr.CR_TRANSFER_AMTNull).Sum().ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:45:17.377

另一个版本的 linq 来自 Habib 先生的想法

```
var total = DGV1.Rows.Cast<DataGridViewRow>()
             .Where(c => int.Parse(c.Cells[IndeOfItemId].EditedFormattedValue.ToString()) == 1)
             .Sum(x => int.Parse(x.Cells[IndexOfSellQty].EditedFormattedValue.ToString())); 
```

# java - 如何从代码创建类图？

> ID：14772602
> 
> 赞同：6
> 
> 时间：2013-02-08T12:28:54.137
> 
> 标签：java, eclipse, uml, class-diagram

我有受版本控制的项目。我需要研究不属于我的代码。我试图找到一种比在 UML 中写下类及其关系更好的方法。

是否有自动执行此操作的工具？

**注意：**这些文件是只读的，所以我不能使用必须修改它们的工具。我在 Eclipse 环境中工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:40:56.847

这个程序非常有用（应该无需更改代码即可工作）

> ObjectAid UML Explorer
> 
> [http://www.objectaid.com/home](http://www.objectaid.com/home)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:48:18.013

从现有的 Java 源代码来看，自动 UML 图不会很有帮助。你会注意到代码很混乱，单一职责原则没有得到一致的应用。查看[inFusion](http://www.intooitus.com/products/infusion)以更好地了解您的代码。它可以导出 Famix 模型以与[Moose](http://www.moosetechnology.org)一起使用。您可以编程以获得当前需要的确切视图。

您是否已经安装了[声纳](http://www.sonarsource.org)？它提供了代码的静态视图。

# doctrine - 如何创建（可能）嵌套查询？

> ID：14772604
> 
> 赞同：1
> 
> 时间：2013-02-08T12:28:55.897
> 
> 标签：doctrine, doctrine-orm

我有 3 个具有 id 的实体 Patient、具有 id 的 Workers、Professional 和 PatientDeclaration 以及 Patient_id(fk) 和 workers_id(fk)。当我有 Patient_id 和专业时，我想从 PatientDeclaration 获取workers_id。像这样的东西，

```
'SELECT c FROM SurgeryPatientBundle:PatientDeclaration c WHERE c.patient = ?1 AND c.patient =(SELECT w  FROM SurgeryWorkersBundle:Workers  WHERE p.profession = ?2)' 
```

我想我已经创建了嵌套查询？编辑解决了我做不同的查询

```
SELECT w.id FROM SurgeryWorkersBundle:Workers w JOIN w.patientdeclaration p WHERE w.profession = ?1 AND p.patient = ?2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:36:52.843

您可以使用子查询

```
SELECT 
    c 
FROM 
    SurgeryPatientBundle:PatientDeclaration c 
JOIN
    c.patient p
WHERE 
    p = ?1 
    AND 
    p.id IN (SELECT w.id FROM SurgeryWorkersBundle:Workers  WHERE p.profession = ?2) 
```

# eclipse - 用于在页面刷新时更新资源的 Eclipse/Tomcat 配置

> ID：14772606
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:03.760
> 
> 标签：eclipse, tomcat, spring-mvc, project-management, development-environment

我正在使用 maven 编写一个用 java spring 编写的网站。

我想使用 Notepad++ 或其他一些外部程序而不是 eclipse 来编辑我的 js/html 文件。但我还需要我的服务器正在运行，并且在我刷新浏览器时总是重新部署我的资源。

现在，如果我在 Eclipse 中工作和编辑文件，当我保存文件时，网站正在重新部署，并且刷新会返回修改后的文件。但如果我使用 Notepad++ 编辑文件，服务器不会刷新它们。

有没有办法让 eclipse/tomcat 总是从服务器获取文件（比如没有缓存的配置）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T22:18:37.320

Eclipse 中有一个选项可以轮询文件系统上的文件，使其了解外部编辑器对文件所做的更改。

该设置位于 Eclipse 首选项中

> 首选项 > 常规 > 工作区 > 使用本机挂钩或轮询刷新

Eclipse 需要一到 2 秒来获取更改，并且很可能会降低性能，因为它需要定期轮询整个工作区，但它应该可以完成这项工作。

它也适用于在 Eclipse 中配置的服务器，这些服务器在文件更改时需要重新发布（cfr Tomcat 服务器）

# php - 在 PHP 中检查整数数组中的重复值

> ID：14772608
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:05.647
> 
> 标签：php, arrays, integer

以下是我的代码：

```
$array1=('23','3','55','67');
function has_dupes($array1){
 $dupe_array = array();
 foreach($array1 as $val){
  if(++$dupe_array[$val] > 1){
   return true;
  }
 }
 return false;
} 
```

我是 PHP 新手，想编写一个函数来检查数组中是否存在重复整数。我的代码如下：

它给出了一个错误：`Parse error: syntax error, unexpected ',' on line 1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:30:10.297

你错过了`array`关键字

```
$array1 = array('23','3','55','67');
         ^ // here was the mistake 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:34:24.893

```
function has_duplicates($myArray) {
    return (max(array_count_values($myArray)) > 1);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T12:31:42.587

您的直接问题是您使用了错误的数组语法。正确的要么是

```
$array1 = ['23','3','55','67']; // only possible in PHP >= 5.4 
```

或者

```
$array1 = array('23','3','55','67'); // all versions of PHP 
```

关于欺骗检测功能，你不需要一个，因为有一个现成的你可以使用：`array_unique`。

```
if (count(array_unique($array)) != count($array)) {
    // the array has dupes
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T12:30:15.137

```
$array1= array(23,3,55,67); 
```

线程整数作为整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T12:30:40.103

通过将数字放在引号中，您将它们视为字符串。此外，数组语法是错误的......

```
$array1 = array(1,2,25,26); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T12:30:53.130

这是错误

```
$array1=array('23','3','55','67'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-08T12:31:59.713

您可以使用[`array_unique`](http://www.php.net/array_unique)它轻松地执行此检查。只需将原始数组的长度与数组的唯一版本的长度进行比较。

```
function has_dupes($array){
  return count($array) != count(array_unique($array));
} 
```

您还想使用[`array()`](http://www.php.net/manual/en/function.array.php).

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-08T13:14:10.030

你为什么不这样做呢？

```
$array1 = array_unique($array1) 
```

我误解了这个问题吗？

# asp.net - 下拉列表视图数据？

> ID：14772610
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:07.713
> 
> 标签：asp.net, asp.net-mvc-3

我有一个名为 product 的集合，它有两个字段 Id 和 Name。

为了创建我正在使用的下拉列表

```
ViewData["Geography"] = new SelectList( parent,"Id","Id"); 
```

我想在下拉列表中显示 Id + Name。

我尝试了以下不起作用的事情

```
ViewData["Geography"] = new SelectList( parentCollection,"Id","Id Name");

ViewData["Geography"] = new SelectList( parentCollection,"Id","Id" + "Name"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:34:50.423

查询`parentCollection`并创建一个新属性`select new`

```
ViewData["Geography"] = 
    new SelectList((from s in parentCollection select new { 
        ID = s.Id,
        IdAndName = s.Id + " " + s.Name}), 
       "ID", 
       "IdAndName", 
        null); 
```

# ruby-on-rails - Google Calendar Service Account API 导致无效授权

> ID：14772616
> 
> 赞同：2
> 
> 时间：2013-02-08T12:29:38.457
> 
> 标签：ruby-on-rails, api, google-api, google-calendar-api

我已经从

```
http://code.google.com/p/google-api-ruby-client/source/browse/service_account/analytics.rb?repo=samples 
```

但是，我一直在努力让它发挥作用，但无论我多么努力，它都会继续付出！这是我不断收到的错误

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/signet-0.4.5/lib/signet/oauth_2/client.rb:875:in `fetch_access_token': Authorization failed.  Server message: (Signet::Authorization
Error)
{
  "error" : "invalid_grant"
}
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/signet-0.4.5/lib/signet/oauth_2/client.rb:888:in `fetch_access_token!' 
```

我该如何解决这个问题？

这是我的完整代码

```
 require 'google/api_client'
require 'date'
require 'openssl'
OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE

# Update these to match your own apps credentials
service_account_email = 'xxxxxx' # Email of service account
key_file = 'privatekey.p12' # File containing your private key
key_secret = 'notasecret' # Password to unlock private key
profileID = 'xxxxx' # Analytics profile ID.

client = Google::APIClient.new()

# Load our credentials for the service account
key = Google::APIClient::KeyUtils.load_from_pkcs12(key_file, key_secret)
client.authorization = Signet::OAuth2::Client.new(
  :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
  :audience => 'https://accounts.google.com/o/oauth2/token',
  :scope => 'https://www.googleapis.com/auth/analytics.readonly',
  :issuer => service_account_email,
  :signing_key => key)

# Request a token for our service account
client.authorization.fetch_access_token!

analytics = client.discovered_api('analytics','v3')

startDate = DateTime.now.prev_month.strftime("%Y-%m-%d")
endDate = DateTime.now.strftime("%Y-%m-%d")

visitCount = client.execute(:api_method => analytics.data.ga.get, :parameters => { 
  'ids' => "ga:" + profileID, 
  'start-date' => startDate,
  'end-date' => endDate,
  'dimensions' => "ga:day,ga:month",
  'metrics' => "ga:visits",
  'sort' => "ga:month,ga:day" 
})

print visitCount.data.column_headers.map { |c|
  c.name  
}.join("\t")

visitCount.data.rows.each do |r|
  print r.join("\t"), "\n"
end 
```

我花了一整天的时间来完成这项工作。请帮忙。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T01:21:43.177

Solved it !

My Computer clock was for some reason 4 hours late ! Corrected System Time, it lead to no error.

1 - Make Your you solve the SSL Error if you have any by using the Google API Faq.

It took me whole day, so I'm going to leave my solutions so in future no one has to go crazy like I did.

```
account_email = '@developer.gserviceaccount.com' 
key_file = 'privatekey.p12' 
key_secret = 'notasecret' 
client = Google::APIClient.new()

key = Google::APIClient::KeyUtils.load_from_pkcs12(key_file, key_secret)

 client.authorization = Signet::OAuth2::Client.new(
   :token_credential_uri => 'https://accounts.google.com/o/oauth2/token',
   :audience => 'https://accounts.google.com/o/oauth2/token',
   :scope => 'https://www.googleapis.com/auth/calendar',
   :issuer => account_email,
   :signing_key => key)

# # Request a token for our service account
 client.authorization.fetch_access_token!
 service = client.discovered_api('calendar', 'v3') 
```

Example to execute something shall be like in similar fashion.

```
 @event = {
    'summary' => '',
    'location' => 'this is where the location goes',
     'description' => 'desc',
    'start' => {
      'dateTime' => '2013-02-08T10:00:00.000-07:00' # Date with :- offset so (yyyy-mm-dd T hh:mm:ss.000-offset)
    },
    'end' => {
      'dateTime' => '2013-02-08T10:25:00.000-07:00' # Date with :- offset so (yyyy-mm-dd T hh:mm:ss.000-offset)
    }
  }

  # Create event using the json structure 
  result = client.execute(:api_method => service.events.insert,
                          :parameters => {'calendarId' => '**'},
                          :body => JSON.dump(@event),
                          :headers => {'Content-Type' => 'application/json'}) 
```

# javascript - 将一些内容附加到父 Div 后，内容不使用 jquery 的 .html 附加到子 Div

> ID：14772617
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:40.840
> 
> 标签：javascript, jquery, html

我已经向“共享按钮的父级”添加了一个 div，然后我尝试将一些跨度附加到“共享按钮”

**1.** `$("#ShareBtn").parent().html("\\ i had appended some div code here");`

**2.** `$('#ShareBtn').html("\\some more code i added here");`

但是第一个动作是成功的，第二个是失败的..

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:32:47.557

第一次调用将删除 #ShareBtn，因为 jquery .html() 替换了元素内包含的所有元素，您可能希望使用 .append() 代替。

这就是正在发生的事情：

```
<div id="parent">
  <div id="shareBtn"></div>
</div> 
```

在你运行这条线之后

```
$("#ShareBtn").parent().html("\\ i had appended some div code here"); 
```

元素看起来像这样：

```
<div id="parent">
  \\ i had appended some div code here
</div> 
```

由于元素 ShareBtn 不再存在，因此使第二行代码无用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:42:24.023

您必须知道，`$.html();`在 jQuery 中不会附加代码，而是替换元素的 innerHTML（请参阅 Javascript）。在覆盖其父内容后，您的代码`$('#ShareBtn')`不再存在。

# android - 使用 adb 或 Eclipse 唤醒 Android（就在调试之前）？

> ID：14772619
> 
> 赞同：27
> 
> 时间：2013-02-08T12:29:44.460
> 
> 标签：android, adb, android-debug

如何使用 adb 唤醒 Android - 我想在调试每个新版本的应用程序之前唤醒（如果睡着了）Android 终端。

典型的流程是： 1\. 我在 Eclipse 中做了一些更改。2.同时屏幕是否熄灭。3.我运行“调试”并希望强制屏幕唤醒。

我找到了一种带有“电源键”仿真的方法，但它并没有打开它，而是切换了电源状态。我不想在我的应用程序中添加额外的代码。还有什么其他方法可以完成这种琐碎的任务，请帮忙。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2015-11-12T23:14:27.340

```
adb shell input keyevent KEYCODE_WAKEUP 
```

[如此处](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_WAKEUP)所述，这会唤醒设备。行为有点像 KEYCODE_POWER 但如果设备已经唤醒，它就没有效果。

要使用一个命令切换睡眠/唤醒，您可以发出

```
adb shell input keyevent KEYCODE_POWER 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-03-10T12:40:59.510

只需使用：

```
adb shell input keyevent 26 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-26T14:06:08.677

这是我想出的：

```
adb shell dumpsys power | grep "mScreenOn=true" | xargs -0 test -z && adb shell input keyevent 26 
```

这将首先检查屏幕是否打开。如果不是，它将模拟电源键，这将打开设备的屏幕。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-14T20:57:50.097

如果你执行 `adb shell input keyevent KEYCODE_POWER`并得到了`Killed`，你应该在执行`su`之前使用root用户。

睡觉：`(adb shell) input keyevent KEYCODE_SLEEP`

醒来：`(adb shell) input keyevent KEYCODE_WAKEUP`

切换：`(adb shell) input keyevent KEYCODE_POWER`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-08T18:43:30.623

您可以使用命令通过 adb 检查设备的当前电源状态（包括显示器），`dumpsys power`并仅在显示器关闭时发送电源键按下事件。更简单的解决方案是在开发人员选项中“连接到 USB 时”完全禁用显示超时。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-28T13:11:25.633

您还可以`onCreate()`在主要活动中添加以下标志：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

这样，当您的设备通过 Eclipse 加载到设备上时，您的设备应该会被唤醒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-20T10:43:23.050

对于 Windows 和 Eclipse，您可以使用 .bat 文件：

```
@ECHO OFF
setlocal
for /f "delims= tokens=1*" %%a in ('adb shell dumpsys power ^| findstr.exe "mScreenOn="') DO (
for /f "delims== tokens=2*" %%S in ("%%a") do (
if "%%S" == "false" (goto move1) else (goto move2)
)
)

:move1
adb shell input keyevent 26
goto end

:move2
goto end

:end
exit 
```

它将检查，如果屏幕关闭，它将切换电源状态。要将它与 Eclipse 一起使用，此 .bat 文件应用作“外部工具”（只需填写 .bat 的路径）并在其属性中链接到项目（Builders - Import - ）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-28T09:16:47.050

我使用以下方法唤醒远程设备进行自动化测试。如果屏幕没有打开，那么它将按电源按钮，然后按菜单按钮。

```
(
  cd ${platform-tools};
  ./adb shell dumpsys power | grep -i 'SCREEN_ON' >/dev/null;
  if [ $? -eq 0 ]; then
    echo "Screen is on...";
  else
    echo "Pressing buttons to wake-up...";
    # http://developer.android.com/reference/android/view/KeyEvent.html
    ./adb shell input keyevent 26; # Power
    ./adb shell input keyevent 82; # Menu
    echo "Pausing for state to settle...";
    sleep 1;
    ./adb shell dumpsys power | grep -i 'SCREEN_ON';
  fi;
  echo '---';
  ./adb shell dumpsys power | grep -i 'SCREEN'
) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-23T22:50:16.707

我知道这与 OP 要求的相反，但我想为其他读者指出“真正睡着”的定义：如果 adb 处于活动状态，则设备不是真正睡着，因为 USB 已打开并且命令提示符正在运行（adb shell 还能如何工作？）。当完全睡眠时，只有物理电源按钮会唤醒它（除非在 BSP 中选择了其他按钮作为唤醒源）。我的项目在屏幕关闭的情况下绘制了大约 120ma，但在睡眠模式下只有 23ma（断开 USB 电缆）。“adb shell input keyevent 26”在此模式下不起作用。串行控制台也没有。我的测试夹具确实可以单独使用电池和外部电源线。我可以切换电源线（连接电池）来唤醒它。

我希望这可以对某人有所帮助。

# ruby-on-rails - Rails：ActiveRecord::AssociationTypeMismatch：超类预期，得到子类

> ID：14772622
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:44.950
> 
> 标签：ruby-on-rails, inheritance, has-many, type-mismatch

我正在尝试为我的应用程序创建一个具有以下主要功能的类模型：

*   继承（类`Place`充当 and 的超类`Farm`）`Depot`。我添加了[gem multiple_table_inheritance](https://github.com/mhuggins/multiple_table_inheritance)来实现它。
*   a 的关系`Place`（可以有很多`places`）

我正在使用 Rails 3.2.11 和 Ruby 1.9.3.p194。

这是我要实现的粗略类模型。

![类模型](../Images/ab99ff2cf3afb1303aaac5b412cacc1b.png)

您可以在模型中找到关系定义`Place`：

```
class Place < ActiveRecord::Base
  acts_as_superclass
  attr_accessible :location, :name, :subtype

  has_many :place_connections, foreign_key: :place_a_id, dependent: :destroy
  has_many :places, through: :place_connections, source: :place_b
  has_many :reverse_place_connections, class_name: :PlaceConnection, \
            foreign_key: :place_b_id, dependent: :destroy
end 
```

该`Farm`模型可以在下面看到。`Depot`模型看起来一样。

```
class Farm < ActiveRecord::Base
  inherits_from :place
end 
```

但是，当我在 Rails 控制台中检查关系模型时，我会遇到以下情况：

```
> farm = Place.first
 => #<Farm place_id: 1, created_at: "2013-02-08 12:19:16", \
                        updated_at: "2013-02-08 12:19:16"> 
> depot = Place.last
 => #<Depot place_id: 6, created_at: "2013-02-08 12:19:44", \
                         updated_at: "2013-02-08 12:19:44"> 
> farm.places = [depot]
ActiveRecord::AssociationTypeMismatch: Place(#42600420) expected, \ 
                                   got Depot(#42518820) ... 
```

你能告诉我是否正确配置了关系吗？我究竟做错了什么？也许我混合了模型和关联的**单数**和**复数**名称。

* * *

# 发现问题

我想我们（我和我的一个朋友）发现了问题所在：
每当数据库已经包含两个关系并且您试图用**完全相同**`places`的对替换这对 id 时，就会引发类型不匹配错误。**如果您用另一对**替换现有对，则不会弹出错误。

 ****## 失败示例：

前：

```
 PlaceConnection
-----------------
place_a | place_b
-----------------
    1        6
----------------- 
```

行动：

```
> farm = Place.first
 => #<Farm place_id: 1, created_at: "2013-02-08 12:19:16", \
                        updated_at: "2013-02-08 12:19:16"> 
> depot = Place.last
 => #<Depot place_id: 6, created_at: "2013-02-08 12:19:44", \
                         updated_at: "2013-02-08 12:19:44"> 
> farm.places = [depot.place]
ActiveRecord::AssociationTypeMismatch: Place(#42600420) expected, \ 
                                   got Depot(#42518820) ... 
```

## 工作示例：

前：

```
 PlaceConnection
-----------------
place_a | place_b
-----------------
    3        2
----------------- 
```

行动：

```
> farm = Place.first
 => #<Farm place_id: 1, created_at: "2013-02-08 12:19:16", \
                        updated_at: "2013-02-08 12:19:16"> 
> depot = Place.last
 => #<Depot place_id: 6, created_at: "2013-02-08 12:19:44", \
                         updated_at: "2013-02-08 12:19:44"> 
> farm.places = [depot.place]
=> [#<Place id: 6, name: "Some depot", location: "Somewhere", subtype: "Depot", \
   created_at: "2013-02-09 12:51:01", updated_at: "2013-02-09 12:51:01">] 
```

# 请注意

我们意识到的另一件事是，可以并且一直可以将关系数组扩展如下`farm.places << depot.place`：无论如何，这可能是我们想要使用的。然而，分配问题可能是一个错误？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:02:08.800

在最后一行，尝试替换这个：

```
farm.places = [depot] 
```

有了这个：

```
farm.places = [depot.place] 
```

该`.place`方法应该返回 , 的超类实例`Place`（从技术上讲，它`PlaceConnection`是引用的）而不是 的子类实例`Depot`。****

# android - 无法下载 android SDK 版本和额外的（附加组件）

> ID：14772625
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:49.707
> 
> 标签：android, installation

[我已经从官方 android 开发者网站（在此处输入链接描述](http://developer.android.com/sdk/index.html)）下载了名为“adt-bundle-windows-x86”的新 android 安装包文件，并按照同一站点的“设置 ADT 捆绑包”选项中指定的说明进行操作( [http://developer.android.com/sdk/installing/bundle.html](http://developer.android.com/sdk/installing/bundle.html) ) 设置开发环境。我按照该站点的说明打开了 eclipse 并检查了可用的平台，发现只有 Android4.2（API 17）。所以我决定安装和谷歌地图 api 插件和以前的版本。即 2.2 及以上所有版本。

但是，如果我打开 eclipse -> Window -> Android SDK Manager，我将无法看到安装任何平台和插件的选项。仅显示以下屏幕截图。![在此处输入图像描述](../Images/1833b87fb2201485789abacf8f9cad88.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:09:06.697

您可以做的一件事是，进入他的 Android SDK 管理器：

选择进入工具/选项。取消选中下载缓存并单击清除缓存然后包/重新加载

# bash - bash变量消失不在循环中

> ID：14772627
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:50.933
> 
> 标签：bash, shell

我有这件作品，其中变量`TESTS_SUCEEDED`消失或未设置其值。我看到了许多示例，其中变量由于子shell 在循环中开始而消失，但找不到有关此行为的任何线索。

```
${SRCDIR}/3rdParty/bin/alxdatabasemanager 
--create-database-with-name=TestAlexandriaDB || exit 1
Src/Tests/Functional/FunctionalTestLibalexandria
TESTS_SUCCEEDED="$?"

#Here variable exists
echo ${TESTS_SUCEEDED}

${SRCDIR}/3rdParty/bin/alxdatabasemanager 
--delete-database-with-name=TestAlexandriaDB || exit 1

#FIXME: Variable nonexisten here or value lost??!! Why?
exit ${TESTS_SUCCEDED} 
```

谁能告诉我发生了什么事？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:35:33.603

您遇到拼写问题：`TESTS_SUCCEEDED`和`TESTS_SUCEEDED`不是一回事。

让我们排列起来，澄清一下：

```
TESTS_SUCCEEDED
TESTS_SUCEEDED 
```

# c# - UML C# 中的彩色文本框

> ID：14772632
> 
> 赞同：0
> 
> 时间：2013-02-08T12:29:57.223
> 
> 标签：c#, uml

我想设计和实现一个代表 ColoredBox 的类，它也有一个标题。标题栏的颜色也应该定义为类中的数据成员。

我想做的第一件事就是把它写成一个 UML 设计。我写了这个：

ColoredTextBox // 类名

-------------- //数据字段

*   x,y: int //声明盒子位置的变量
*   标题：字符串

- - - - - - - // 方法

*   画框 ()

所以，我写下了 x 和 y 整数来找到盒子的位置，给它一个标题的字符串和一个绘制实际盒子的方法。还有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:34:29.447

您似乎没有任何地方可以存储实际颜色 - 或前景色/背景色，具体取决于您打算如何做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:49:51.260

对象和类可以以非常概念化的方式或更具体的工具相关方式来表示。

在这种情况下，它是一个非常具体的实现：

```
........................
..+------------------+..
..|  ColoredTextBox  |..
..+------------------+..
..| int: X           |..
..| int: Y           |..
..| string: Title    |..
..| Color: Backcolor |..
..+------------------+..
..| void: DrawBox(); |..
..+------------------+..
........................ 
```

不要忘记为方法添加返回类型。干杯。

# html - What does 'Accept: */*' mean under Client section of Request Headers?

> ID：14772634
> 
> 赞同：14
> 
> 时间：2013-02-08T12:29:58.953
> 
> 标签：html, http, fiddler

I was comparing headers of same HTTP Post request for Firefox and Internet Explorer and I see that for IE.

I was wondering:

What does `Accept: */*` mean under Client section of Request Headers?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-08T12:34:34.653

The accept: header defines the content type the client accepts, or expects to be returned by the server. Depending on the situation this can be text/css, text/html, image/png, .. etc. - just some mime type.

The * character is considered the wildcard. accept: */* simply means that any data of whatever mimetype is accepted and the server may choose what to return to the requesting client.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:48:36.857

It's answered in the specification. See [http://greenbytes.de/tech/webdav/rfc2616.html#header.accept](http://greenbytes.de/tech/webdav/rfc2616.html#header.accept) and [http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-21.html#header.accept](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-21.html#header.accept)

# jquery - 实现 Jquery Auto Suggest Dev Bridge

> ID：14772636
> 
> 赞同：0
> 
> 时间：2013-02-08T12:30:07.250
> 
> 标签：jquery, autosuggest

我尝试从[http://www.devbridge.com/projects/autocomplete/jquery/实现这个自动建议](http://www.devbridge.com/projects/autocomplete/jquery/)

我的 PHP 代码不工作，但查找功能只显示结果。请指导我这件事。

这是我的代码：

```
$(document).ready(function()
{
    $('#searchresult').autocomplete(
    {
        serviceUrl: 'source.php',
        minChars: 1,
        delimiter: /(,|;)\s*/, // regex or character
        maxHeight: 400,
        zIndex: 9999,
        deferRequestBy: 0, //miliseconds
        noCache: false, //default is false, set to true to disable caching
        // callback function:
        onSelect: function(value, data){ alert('You selected: ' + value + ', ' + data); },
        // local autosugest options:
        lookup: ['January', 'February', 'March', 'April', 'May'] //local lookup values
    });
}); 
```

PHP 代码：source.php

```
<?php

    include "config/config.php";
    require "jsonwrapper/jsonwrapper.php";

    //$term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends

    //$qstring = "SELECT description as value,id FROM tblcompanies WHERE description LIKE '%".$term."%'";

    $result = mysql_query("SELECT fieldDesc AS value, fieldID AS id FROM table");

    $data = array();
    while ($row = mysql_fetch_array($result))//loop through the retrieved values
    {
        $row['value'] = htmlentities(stripslashes($row['value']));
        $row['id'] = (int)$row['id'];
        $data[] = $row;//build an array
    }

    echo json_encode($data);//format the array into json data

?> 
```

如果您实现这种类型的 jquery 自动建议，请分享。我很高兴有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:53:15.570

如果要使用来自服务器的结果，请删除“查找”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T12:53:41.887

您的代码看起来不错，但我看到的唯一问题是查找。

可以将 JSON 编码数组传递给 js 进行查找吗？

像这样的东西：

```
$(document).ready(function()
{
    $('#searchresult').autocomplete(
    {
        serviceUrl: 'source.php',
        minChars: 1,
        delimiter: /(,|;)\s*/, // regex or character
        maxHeight: 400,
        zIndex: 9999,
        deferRequestBy: 0, //miliseconds
        noCache: false, //default is false, set to true to disable caching
        // callback function:
        onSelect: function(value, data){ alert('You selected: ' + value + ', ' + data); },
        // local autosugest options:
        lookup: resultArray
    });
}); 
```

这里的结果数组是传递给 js 进行查找的 JSON Encode php 数组。

希望在这样做之后它会被修复。

# c - 将用户空间代码移植到内核空间

> ID：14772641
> 
> 赞同：9
> 
> 时间：2013-02-08T12:30:23.573
> 
> 标签：c, linux, linux-kernel, rtai

到目前为止，我有一个主要用 C 语言编写的大型系统，它一直在用户空间中运行。现在我需要将代码编译为内核模块。为此，afaik，我至少应该重写代码并将函数替换为`malloc`, `calloc`, `free`,`printf`与它们的内核等效项，因为这些只是用户空间函数。然而，问题是我没有系统中使用的一些定制库的源代码，这些库`malloc`在它们的函数中调用等。所以，基本上，我可能需要重新实现整个库。

现在的问题是：如果我将自己的实现`malloc`作为包装器编写，这将是一个非常肮脏的黑客攻击，`kmalloc`如下所示：

```
void *malloc(size_t size) {
    return kmalloc(size, GFP_USER);
} 
```

然后将此实现链接到系统代码，这将消除模块错误*中的所有未知符号。*

实际上，我认为这将是一个常见问题，并且已经有人编写了这样的 kmalloc 包装器，但是我已经在谷歌上搜索了几天，没有发现任何有用的东西。

编辑：这样做的原因是我正在谈论的系统是在 VxWorks 实时操作系统上运行的实时应用程序，现在我们希望将其移植到 Linux RTAI 上使用，其中应用程序主要在内核空间中运行。但我想在用户空间也有可能实现实时，所以，我应该按照 Mike 的建议去做，将代码分成内核和用户空间部分，并通过共享内存在它们之间进行通信。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T13:14:33.143

我以前从未见过这样做过。在之前的工作中，我确实不得不做类似的事情（在我们的手机中，出于节能的原因，我们不得不从内核的用户空间移植一部分代码），但我就是这样做的。我拿了*一部分*代码并移动它，以及一小部分。

当我这样做时，我将用户空间调用更改为内核调用，原因有很多，主要有两个：

1.  这样就不会那么混乱了（其他查看代码的人不必想知道为什么我从内核调用“malloc”）

2.  `malloc`并且`kmalloc`不完全相同。我的意思是

    2a. `kmalloc`接受一个`flags`参数，在上面的示例中，您对其进行了硬编码。如果您稍后决定要在某些地方而不是其他地方更改它怎么办？（假设您有许多不同的地方可以获得动态内存）。

    2b。`kmalloc`不会以与`malloc`. `malloc()`将为您提供作为`size_t size`. `kmalloc()`另一方面，它在内核中，因此正在处理系统的物理内存，它仅在页面大小的块中可用；因此，当您调用时，您`kmalloc()`只会得到某些预定义的、固定大小的字节数组。如果您没有意识到这一点，您可能会要求仅*超过*一个特定的块，从而获得比您需要的更多的内存......您的代码的直接端口不会保护您免受这种情况的影响。

    2c。头文件也必须更改。显然你不能包含`<stdlib.h>`在内核中，所以仅仅因为你“包装”了 malloc 调用，你仍然必须四处替换头文件。

我在上面 2b 中的观点的快速示例：

```
void * stuff;
stuff = kmalloc(1,GFP_KERNEL);
printk("I got: %zu bytes of memory\n", ksize(stuff));
kfree(stuff); 
```

要显示分配的实际内存量：

```
[90144.702588] I got: 32 bytes of memory 
```

* * *

无论如何...从技术上讲，您如何描述它应该可以正常工作。两者都接受 a`size_t`并返回 a`void *`所以它应该可以工作；但请注意，移入内核的代码越多，确定性就越低，并且`malloc()`<=>`kmalloc()`并不像看起来那样 1:1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T13:59:15.347

为了使我的 RTAI 代码在用户和内核空间（以及使用 POSIX）中可编译，我开发了[URT](https://github.com/ShabbyX/URT)，它基本上可以满足您的要求。它是实时系统（甚至是不一致的用户空间与内核空间 RTAI 函数）上的轻量级抽象级别。

# python - DeadlineExceededError 连接到 Google Cloud SQL

> ID：14772649
> 
> 赞同：1
> 
> 时间：2013-02-08T12:30:45.570
> 
> 标签：python, google-app-engine, google-cloud-sql

我们有一个连接到 GCSQL 的谷歌应用引擎应用程序，并且在尝试连接数据库时遇到了很多 DeadlineExceededError 问题。该错误似乎是由大量用户在短时间内打开应用程序产生的。当我们在此期间在仪表板上查找打开的连接时，同时打开的连接不超过 45 个，并且在很大比例的查询（读取、写入和连接）上都失败了，花费了太多时间来做它。由于花费的时间，服务关闭并且我们收到错误。

错误示例：

```
Traceback (most recent call last):
  File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 223, in Handle
    result = handler(dict(self._environ), self._StartResponse)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~ono-hat-prod/1.365115032772094991/onohatpreprod.py", line 5541, in post
    cursor.execute("SELECT %s FROM actuaciones WHERE numero = '%s' " % (rc,idHat))
  File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 499, in execute
    self._DoExec(request)
  File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 375, in _DoExec
    response = self._conn.MakeRequest('Exec', request)
  File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 873, in MakeRequest
    response = self._MakeRetriableRequest(stub_method, request)
  File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms.py", line 897, in _MakeRetriableRequest
    response = self.MakeRequestImpl(stub_method, request)
  File "/python27_runtime/python27_lib/versions/1/google/storage/speckle/python/api/rdbms_apiproxy.py", line 67, in MakeRequestImpl
    except apiproxy_errors.ApplicationError, e:
 DeadlineExceededError 
```

一段代码，直到发生错误：

```
class detalleActuacion(webapp2.RequestHandler):
    def post(self):
        idHat = self.request.get('id')
        logging.info(idHat)
        num_conexiones = 0
        num_cierres = 0
        conn = rdbms.connect(instance=_INSTANCE_NAME, database='Actuaciones')
        num_conexiones = num_conexiones + 1
        cursor = conn.cursor()

        dict_act = {}
        request_cad = 'solucionado,duracion,numero,fecha_inicio_ventana,fecha_fin_ventana,'
        request_cad = request_cad+'tipo,titulo,tipo_cliente,ubicacion,zona_regional,'
        request_cad = request_cad+'zona_local,ciudad_ticket,zona_regional_subticket,zona_local_subticket,'
        request_cad = request_cad+'zona_local_ticket,skill,num_recursos,num_actuaciones,ubi_emplaz,'
        request_cad = request_cad+'ubi_provincia,ubi_lat,ubi_long,ubi_via,ubi_calle,ubi_numero,ubi_adic,'
        request_cad = request_cad+'ubi_CP,miga_terminal,miga_tlf,miga_dir,severidad,prioridad,serv_CATV,'
        request_cad = request_cad+'serv_datos,serv_DTV,serv_empresa,serv_telefonia,instr,num_rep,'
        rc = request_cad+'fecha_creac,fecha_creac_tp,fecha_sol,fecha_sol_tp,fecha_cierre,fecha_cierre_tp,'
        rc = rc+'fecha_inicio,fecha_fin,descr_adic,descr_log,grupo_pos,accion,cola,estado,estado_ticket,'
        rc=rc+'doc_adj,detalle_equipos,tarea,subtarea,subzona,TIR,elem_red,descripcion,num_afectados,'
        rc=rc+'repeticion,fecha_repeticion,dias_repeticion,dias_semana,fin_repeticion,cl_afectados,'
        rc=rc+'plan_tp,marca_seguimiento,tipificacion,miga,zona,bandeja,alerta,descr_log1,descr_log2,descr_log3,descr_log4,descr_log5,descr_log6,descr_log7,descr_log8,descr_log9,'
        rc=rc+'elem_red_2,estado_CRM,tecnico,tecnico2,tecnico3,tecnico4,tecnico5,num_asignaciones,ultima_modificacion,tiempo_proceso,fecha_inicio_real,fecha_fin_real'
        rc=rc+',observaciones1,observaciones2,observaciones3,observaciones4,observaciones5,observaciones6,observaciones7,observaciones8,observaciones9,observaciones10'
        cursor = conn.cursor()
        cursor.execute("SELECT %s FROM actuaciones WHERE numero = '%s' " % (rc,idHat)) 
```

预先感谢您的协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:10:04.793

如果有 45 个并发请求，则可能有更多打开的连接。请参阅[App Engine 对 Google Cloud SQL 的连接限制是什么，以及如何最好地重用数据库连接？](https://stackoverflow.com/questions/10424442)

您还可以尝试增加实例大小：更多 RAM 可能会减少每个请求的延迟，从而减少连接数。

# assembly - 8086汇编，关于PTR算子

> ID：14772656
> 
> 赞同：2
> 
> 时间：2013-02-08T12:31:10.213
> 
> 标签：assembly, x86, x86-16

这可能既简单又愚蠢，但无论如何我都会问它，因为我似乎无法弄清楚。

一个简单的代码片段：

```
 assume cs:code, ds:data
 data segment
    b dd 256
 data ends

 code segment
 start:
        mov ax,data
        mov ds,ax
        mov ax,word ptr b     -> the result of this operation will be ax:= 256 (100h)

        mov bx,word ptr b+1   -> while this is going to be bx:= 1 
```

我想它与地址有关，它被移动了一个字节或其他东西，但我不确定，我真的需要理解。

提前致谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T12:35:00.890

这

```
mov ax,word ptr b 
```

像这样格式化时更容易理解：

```
mov ax, word ptr [b] 
```

它具有将地址处的单词复制`b`到 ax 中的效果。所以这

```
mov bx,word ptr b+1 
```

实际上是

```
mov bx,word ptr [b+1] 
```

它具有将地址处的单词复制`b+1`到 bx 的效果。

现在`dd`指示分配一个 dword 并为其分配 256。十六进制的 256 表示为`00000100h`. dword 将像这样在内存中分配`00010000h`- bytes `00h`, `01h`, `00h`，`00h`因为在 x86 上，低字节存储在低地址（所谓的小端）。

当内存被读入寄存器时，字节顺序被改变，低字节占据寄存器中的低位（“自然”，所谓的大端）。所以`00h`，`01h`内存中变成`0100h`了寄存器内部`01h`，`00h`内存中变成了`0001h`寄存器内部。

所以第一个从( , )`mov`获取前两个字节并生成== ，第二个从( , )获取中间两个字节并生成== 。`b``00h``01h``ax``0100h``b``01h``00h``bx``0001h`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T10:43:57.980

只有当我们想将立即值写入 ram 位置时，我们才需要指定字节数。否则，我们的汇编器使用寄存器大小来确定我们要访问多少字节。

除了使用 MASM 使用 dword 访问之外，我们还需要 DWORD PTR 的声明，如果我们想要 dword 访问，例如将 EAX 的内容写入 ram 位置，或者从 ram 位置读取 dword 到 EAX。与所有其他 32 位寄存器相同。

我认为如果我们想要一个字节、字和/或双字访问的多重访问，最好用定义字节（DB）表示法声明一个命名的 ram 位置。

```
b DB 0, 1, 0, 0 
```

寄存器大小是众所周知的，我们不需要指定：

```
mov al, [b]
mov [b], al

mov bl, [b+1]
mov [b+1], bl

mov ax, [b]
mov [b], ax

mov bx, [b+1]
mov [b+1], bx 
```

除了 MASM：

```
mov eax, dword ptr[b]
mov dword ptr[b], eax 
```

使用中间值：

```
mov byte ptr[b], 0
mov word ptr[b], 256
mov dword ptr[b], 256 
```

短剑

# ms-word - VSTO Word 本地存储

> ID：14772661
> 
> 赞同：0
> 
> 时间：2013-02-08T12:31:26.203
> 
> 标签：ms-word, vsto

为 VSTO Word2010 加载项存储本地信息的最佳方式是什么？我应该写入用户的个人文件夹吗？在这种情况下需要任何特殊权限吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:40:51.950

我推荐两个位置：

**ProgramData** - 我将它用于适用于所有用户的数据。

`Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData);`

**AppData** - 将此位置用于每个用户的数据。

`Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:40:38.600

您可以使用数据库或本地文件夹，选择本地文件夹时要考虑的因素是，如果用户重新安装、格式化或切换他的机器，所有信息都会丢失。

# php - 仅在登录过程中连接不同的数据库

> ID：14772665
> 
> 赞同：0
> 
> 时间：2013-02-08T12:31:39.820
> 
> 标签：php, mysql

我正在处理的代码有点混乱，因为我没有制作这个。但我想做的是从不同的数据库中获取登录信息。我不能只修改数据库连接的 config.php，因为它会弄乱整个系统。我尝试通过在 mysql_connect 上存储不同的变量来连接 2 个数据库。但在这种情况下，它有点令人困惑。有没有另一种方法可以在登录过程中只更改一次数据库连接？

login.php（提交登录信息后的 php 文件）

```
include("inc/config.php");

$connection = mysql_connect($hostname, $user, $pass) or die ("Unable to connect!");
$query = "SELECT * FROM clients WHERE name = '$name' AND password = '$password'";
$result = mysql_db_query($database, $query, $connection);
$date_in = date("Y-m-d"); 
$time_in = date("H:i:s");
$client_accesslogin = $name;

if (mysql_num_rows($result) == 1)
    {
    session_start();
 session_register('time_in');
 session_register('date_in');
 session_register('client_accesslogin');
 session_register('remoteaddr');

 $_SESSION['time_in']=$time_in;
 $_SESSION['date_in']=$date_in;
 $remoteaddr = $_SERVER['REMOTE_ADDR'];
 $ipaddr = $_SERVER['REMOTE_ADDR'];   
 $client_accesslogin = $_SESSION['client_accesslogin'];

    session_register("client_id");
    session_register("client_name");
    session_register("client_email");
    session_register("client_company");
    list($clientid, $name,$first_name,$last_name, $pass, $email, $company) = mysql_fetch_row($result);
    $client_id = $clientid;
    $client_name = $name;
    $fname=$first_name;
    $lname=$last_name;
    $client_email = $email;
    $client_company = $company;
    $cisloggedin = 'Yes';
    session_register("cisloggedin");
    session_register("fname");
    session_register("lname");
    header("Location: menu.php");
    mysql_free_result ($result);    

    mysql_close($connection);
    }
$connection = mysql_connect($hostname, $user, $pass) or die ("Unable to connect!");
$query = "SELECT * FROM admins WHERE name = '$name' AND password = '$password'";
$result = mysql_db_query($database, $query, $connection);
$date_in = date("Y-m-d"); 
$time_in = date("H:i:s");
$accesslogin = $name;

if (mysql_num_rows($result) == 1)
    {
    session_start();

 session_register('time_in');
 session_register('date_in');
 session_register('accesslogin');
 session_register('remoteaddr');

 $_SESSION['time_in']=$time_in;
 $_SESSION['date_in']=$date_in;
 $remoteaddr = $_SERVER['REMOTE_ADDR'];
 $ipaddr = $_SERVER['REMOTE_ADDR'];   
 $accesslogin = $_SESSION['accesslogin'];

    session_register("client_id");
    session_register("client_name");
    session_register("client_email");
    list($clientid, $name, $pass, $email) = mysql_fetch_row($result);
    $client_id = $clientid;
    $client_name = $name;
    $client_name = "admin";
    $client_email = $email;
    $isloggedin = 'Yes';
    session_register("isloggedin");
    header("Location: menu.php");
    mysql_free_result ($result);    

    mysql_close($connection);
    }
else
    {
    mysql_free_result ($result);    
    mysql_close($connection);

    header("Location: index.php");
    exit;
    }
?> 
```

这样可行。但是如果我删除包含的 config.php 并添加连接：

```
$database = "invoices"; 
$user = "root";     
$pass = "";    
$hostname = "localhost"; 
```

它没有登录。我不明白。inc/config.php 有一些与连接相关的代码，但为什么我不能只添加连接本身而不使用包含？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:34:36.860

做了一个函数来连接你的数据库，也可以关闭你的连接。

```
function connect(user, pass, location)

function disconnect() 
```

然后你连接到你的第一个数据库，做你的操作。关闭它，然后打开与另一个数据库的新连接并执行您的操作。

如果您想同时保持 2 个连接，您可以将实例保存到变量中

并做：

```
mysqli_select_db($instance1, 'SELECT ...');
mysqli_select_db($instance2, 'SELECT ...'); 
```

还要在您的查询中转义您的变量:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:34:55.850

我正在假设有一个专用页面用于登录处理？

在这种情况下，您可以只在登录页面上创建一个新的 config.php 并连接到该数据库？

您的一些代码或结构会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:35:22.297

mysql_select_db() 函数设置活动的 MySQL 数据库。

句法

```
bool mysql_select_db ( string database_name [, resource link_identifier]) 
```

mysql_select_db() 尝试选择与指定链接标识符关联的服务器上的现有数据库。

成功时返回 TRUE，失败时返回 FALSE。

我们可以使用 mysql_select_db 函数在 mysql 服务器中选择数据库。mysql_select_db() 选择服务器上与指定链接标识符关联的当前活动数据库。如果未指定链接标识符，则假定最后打开的链接。如果没有打开链接，该函数将尝试设置一个链接，就好像 mysql_connect() 没有参数被调用一样。

# regex - perl 正则表达式仅替换字符串的一部分

> ID：14772668
> 
> 赞同：1
> 
> 时间：2013-02-08T12:31:41.913
> 
> 标签：regex, perl

我需要编写一个 perl 正则表达式来转换

```
site.company.com => dc=site,dc=company,dc=com 
```

不幸的是，我无法使用下面附带的正则表达式删除尾随的“，”。我当然可以在下一个语句中删除尾随的“，”，但希望将其作为正则表达式的一部分进行处理。

```
$data="site.company.com";
$data =~ s/([^.]+)\.?/dc=$1,/g;
print $data; 
```

上面的代码打印：

```
dc=site,dc=company,dc=com, 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:45:47.797

在处理 url 时，使用诸如`URI`. 但是，我认为它不适用于这种情况。

这个任务最容易通过拆分和连接来解决，我认为：

```
my $url = "site.company.com";
my $string = join ",",            # join the parts with comma
             map "dc=$_",         # add the dc= to each part
             split /\./, $url;    # split into parts 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:42:03.700

```
$data =~s/\./,dc=/g&&s/^/dc=/g; 
```

测试如下：

```
> echo "site.company.com" | perl -pe 's/\./,dc=/g&&s/^/dc=/g'
dc=site,dc=company,dc=com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:47:31.437

尝试这样做：

```
my $x = "site.company.com";
my @a = split /\./, $x;
map { s/^/dc=/; } @a;
print join",", @a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:56:52.693

就这样放

```
$data="site.company.com";
$data =~ s/,dc=$1/dc=$1/g; #(or) $data =~ s/,dc/dc/g;
print $data; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:13:36.510

我要试试这`/ge`条路线：

```
$data =~ s{^|(\.)}{
    ( $1 && ',' ) . 'dc='
}ge; 
```

e = 评估替换为 Perl 代码。

因此，它说给定字符串或点的开头，进行以下替换。如果它捕获了一个句点，则发出一个`','`. 不管这个结果如何，插入`'dc='`.

请注意，我喜欢在所有评估的替换上使用大括号样式的分隔符。

# objective-c - 图层和阴影上的圆角半径

> ID：14772672
> 
> 赞同：0
> 
> 时间：2013-02-08T12:31:49.517
> 
> 标签：objective-c, mkmapview, layer, shadow, cornerradius

我在一个单元格中有一个地图视图，我希望它有角半径和阴影。当我分别将蒙版设置为开/关边界时，我要么只得到圆角，要么只得到阴影而没有圆角。我查看了这个示例： [无法添加圆角半径和阴影](https://stackoverflow.com/questions/3316424/cant-add-a-corner-radius-and-a-shadow)

但没有成功。我错过了什么？先感谢您！

```
[[cell.map1 layer] setShadowColor:[UIColor blackColor].CGColor];
[[cell.map1 layer] setShadowOpacity:0.8f];
[[cell.map1 layer] setShadowRadius:20.0f];
[[cell.map1 layer] setShadowOffset:CGSizeMake(0, 3)];
       // [[cell.map1 layer] setMasksToBounds:NO];
[[cell.map1 layer] setShouldRasterize:YES];
[[cell.map1 layer] setCornerRadius:20]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:16:42.623

将遮罩设置为边界就像将剪辑设置为边界。这意味着没有任何东西可以在边界之外，并且阴影位于边界之外。 [看看这篇文章。](https://stackoverflow.com/questions/3690972/why-maskstobounds-yes-prevents-calayer-shadow)

# javascript - 引导工具提示触发焦点

> ID：14772674
> 
> 赞同：0
> 
> 时间：2013-02-08T12:32:03.583
> 
> 标签：javascript, jquery, twitter-bootstrap, tooltip

当用户在输入中输入超过 50 000 时，我想使用引导工具提示显示一条消息。

这是代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css"/>
        <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tooltip.js"></script>
        <script type="text/javascript">
          $(document).ready(function () {           

            $(this).tooltip("hide");

            $("#myInput").on("keyup", function() {
                console.log(this.value);
                if (this.value > 5000) {
                    $(this).tooltip("show");
                    $(this).val(50000);
                } else {
                    $(this).tooltip("hide");
                }
            }).tooltip({
                placement: "right",
                trigger: "focus"
            });

          });
        </script>
    </head>
    <body>
        <input id="myInput" title="You cannot enter more than 50 000" /> 
    </body>
</html> 
```

或见[http://jsfiddle.net/Ljxz2/](http://jsfiddle.net/Ljxz2/)

问题是工具提示正在触发焦点消息（我认为），因此当用户单击（或聚焦）输入时会显示消息。我该如何关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:38:24.030

只需将工具提示函数调用中发送的选项中“触发器”的值更改为“手动”即可。

```
tooltip({
    placement: "right",
    trigger: "manual"
}; 
```

[http://jsfiddle.net/YcQat/](http://jsfiddle.net/YcQat/)

# extjs - Extjs 4 如何将带有附加信息的 xml 数据从服务器返回到 extjs 控制器？

> ID：14772678
> 
> 赞同：2
> 
> 时间：2013-02-08T12:32:27.487
> 
> 标签：extjs

我希望有人帮助我。

我想用 xml 文件的数据在本地加载我的网格。我创建了模型、商店和网格。我在网格的渲染事件中加载商店。

问题是，商店已加载，但网格仍然是空的。我在控制台查看了网格，网格项目包含加载的数据，但网格不包含屏幕上的数据。

这是模型

```
Ext.define('BTOM.model.test.test', {
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'string' },
        { name: 'name', type: 'string' },
        { name: 'phone', type: 'string' }
    ]
}); 
```

这里是商店

```
Ext.define('BTOM.store.test.test', {
    extend: 'Ext.data.Store',
    model: 'BTOM.model.test.test',
    autoLoad: false,

    proxy: {
        type: 'memory',
        reader: {
            type: 'xml',
            root: 'users',
            record: 'user'
        }
    }
}); 
```

还有网格

```
Ext.define('BTOM.view.test.test', {
    extend: 'Ext.grid.Panel',
    store: 'BTOM.store.test.test',
    alias: 'widget.test',
    title: 'Test',

    initComponent: function () {

        this.columns =
        [
            { header: "Id", width: 120, dataIndex: 'id', sortable: false },
            { header: "Name", width: 180, dataIndex: 'name', sortable: false },
            { header: "Phone", width: 115, dataIndex: 'phone', sortable: false}
        ];

        this.callParent(arguments);
    },
}); 
```

我加载商店的地方是

```
render: function (grid, eOpts) {
    var store = grid.getStore();
    var data =
        '<?xml version="1.0" encoding="utf-8"?>' +
           '<users> ' +
              '<user><id>1</id><name>Bll QASD</name><phone>333 2211</phone></user> ' +
              '<user><id>2</id><name>Asd QWF</name><phone>444 2211</phone></user> ' +
              '<user><id>3</id><name>Zas QWE</name><phone>555 2211</phone></user> ' +
           '</users>';
        var dataXml = (new DOMParser()).parseFromString(data, 'text/xml');
    console.log(dataXml);
    store.loadRawData(dataXml, true);
    console.log(grid); 
```

}

dataXML 文档的创建没有问题。网格似乎包含数据（通过萤火虫，我可以看到）但数据网格是空的，不显示数据！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-11T06:41:27.653

好的，错误是您正在定义商店但没有创建它。所以网格只有商店的名称，但它需要一个商店实例，或者是你在上面的代码片段中遗漏的一些东西。我使用了相同的代码，这是一个运行示例： [https ://fiddle.sencha.com/#fiddle/oel](https://fiddle.sencha.com/#fiddle/oel)

# ruby-on-rails - Rails3 升级上的 ActiveRecord::ConnectionNotEstablished

> ID：14772679
> 
> 赞同：0
> 
> 时间：2013-02-08T12:32:34.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试从 rails 2.3 升级到 rails 3，并且已经完成了 的事情清单`rake rails:upgrade:check`，但是，当我尝试启动我的 rails 控制台时，当我尝试访问任何表时出现以下错误：

```
irb(main):010:0> Game.all
ActiveRecord::ConnectionNotEstablished: ActiveRecord::ConnectionNotEstablished
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/connection_adapters/abstract/connection_pool.rb:317:in `retrieve_connection'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/base.rb:602:in `quoted_table_name'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/relation/query_methods.rb:275:in `build_select'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/relation/query_methods.rb:189:in `build_arel'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/relation/query_methods.rb:149:in `arel'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/relation.rb:64:in `to_a'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/relation/finder_methods.rb:143:in `all'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activerecord-3.0.20/lib/active_record/base.rb:444:in `all'
    from (irb):10
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.0.20/lib/rails/commands/console.rb:44:in `start'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.0.20/lib/rails/commands/console.rb:8:in `start'
    from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/railties-3.0.20/lib/rails/commands.rb:23:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我正在使用 mysql，从 mysql2 gem 升级，我的 gem 文件看起来像：

```
gem "rails", "3.0.20"
gem 'mysql2', '~> 0.2.17' 
```

我也更新了我`database.yml`的

```
development_default: &development_default
  adapter: mysql2
  encoding: utf8
  reconnect: false
  pool: 5
  socket: /tmp/mysql.sock

development:
  <<: *development_default
  database: some_database
  username: some_user
  password: some_password
  host: some.domain.com
  port: 4000 
```

我能够切换回我的 rails 2 分支并正常运行代码，所以这肯定与我的升级代码有关。任何指针是什么问题或下一步看哪里？

# c++ - 包含 Irrlicht 静态库时的 C++ 编译错误

> ID：14772681
> 
> 赞同：5
> 
> 时间：2013-02-08T12:32:42.020
> 
> 标签：c++, compiler-errors, cmake, x11, irrlicht

尝试将 Irrlicht 静态库包含到我的 cmake 项目中时出现编译错误

编译错误：

```
max@max-MS-7369:~/Desktop/survival/build$ make 扫描目标生存的依赖
[ 33%] 构建 CXX 对象 src/CMakeFiles/survival.dir/technic.cpp.o
[ 66%] 构建 CXX 对象 src/CMakeFiles/survival.dir/render.cpp.o
[100%] 构建 CXX 对象 src/CMakeFiles/survival.dir/survival.cpp.o
链接 CXX 可执行文件 ../debug/survival
/usr/bin/ld: ../../irrlicht/lib/Linux/libIrrlicht.a(CIrrDeviceLinux.o): 未定义对符号“XConvertSelection”的引用
/usr/bin/ld：注意：'XConvertSelection' 在 DSO /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libX11.so 中定义尝试将其添加到链接器命令行
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libX11.so：无法读取符号：无效操作
collect2: ld 返回 1 个退出状态
make[2]: *** [调试/生存] 错误 1
make[1]: *** [src/CMakeFiles/survival.dir/all] 错误 2
make: *** [全部] 错误 2
max@max-MS-7369:~/Desktop/survival/build$

```

这就是我尝试包含库的方式：

```
# 查找 irrlicht 的依赖项
FIND_PACKAGE(ZLIB)
FIND_PACKAGE(X11)
FIND_PACKAGE(OpenGL)
# 包括
设置（survival_CUSTOM_INCLUDES
    ${ZLIB_INCLUDE_DIR}
    ${X11_INCLUDE_DIR}
    ${OPENGL_INCLUDE_DIR}
    ${survival_SOURCE_DIR}/irrlicht/include
    )
# 库
设置（survival_CUSTOM_LIBRARIES
    ${ZLIB_LIBRARIES}
    ${X11_LIBRARIES}
    ${OPENGL_LIBRARIES}
    ${survival_SOURCE_DIR}/irrlicht/lib/Linux/libIrrlicht.a
    )

```

我不明白为什么它说它找不到`XConvertSelection`，即使我已经包含了 X11 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:00:53.650

我添加了这两个库来修复它

```
/usr/lib/x86_64-linux-gnu/libX11.so
/usr/lib/x86_64-linux-gnu/libXxf86vm.so.1 
```

它们没有包含在 FIND_PACKAGE() 给出的库中

# regex - 使用正则表达式折叠除多个空行之外的空格

> ID：14772683
> 
> 赞同：0
> 
> 时间：2013-02-08T12:32:47.603
> 
> 标签：regex, whitespace, text-formatting, blank-line

过去不止一次我想知道格式化文本块的问题，以便所有运行的空白都“折叠”到一个空格中，除了应该保留段落 - 这意味着所有运行的空白行都折叠到单个空行，但不会折叠成一个空格。

空行当然是两个行尾字符（通常是回车或换行或两者），没有任何中间的非空白字符。（可能还有其他空格，例如空格或制表符）。

这肯定是一个相当普遍的问题，虽然不难解决，但我总是对我的解决方案不满意，这些解决方案缺乏优雅或留下漏洞。当然，有一种优雅的表达方式可以做到这一点。

因为我想至少在 Perl、Vim 和 JavaScript 中这样做，所以我将把它开放给所有正则表达式风格。这是我最近在node.js中懒惰的尝试，漏洞显然是魔术词。这可能是我使用过的不令人满意的解决方案的典型::

```
text = text.replace(/\r?\n(?:\s*\r?\n)+/g, '_SomeMagicWord_');
text = text.replace(/\s\s+/gm, ' ');
text = text.replace(/_SomeMagicWord_/g, '\r\n\r\n'); 
```

如果我的解释不清楚，它应该从这个转变：

> 富吧巴兹弗雷德
> 巴尼威尔玛
> 
> 一二三

对此：

> 富吧巴兹弗雷德巴尼威尔玛
> 
> 一二三

（也要注意行尾的尾随空格！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:43:39.010

赛德：

```
sed -n 'H;$g;$s/[^\n]\n[^\n]/ /g;$s/\n\n\n*/\n\n/g;$s/  */ /g;$s/^\n//;$p' FILENAME 
```

珀尔：

```
perl -ne '$a.=$_;END{$_=$a;s/  */ /g;s/[^\n]\n[^\n]/ /g;s/\n\n\n*/\n\n/g;print}' FILENAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T03:05:39.403

我刚刚又遇到了这个问题。这次我使用的是 node.js，我觉得我想出了一个非常有表现力的解决方案：

```
txt = txt.replace(/\s+/g, function (ws) {
  return /\n.*\n/.test(ws) ? '\n\n' : ' ';
});

txt = txt.replace(/(^( |\n\n)|( |\n\n)$)/g, ''); 
```

第一部分考虑文本中的每一行空白，并检查其中是否至少有两个换行符。如果是这样，它会折叠成一个段落分隔符（两个连续的换行符，没有别的）。否则它会折叠成一个空间。

第二部分修剪文本开头和结尾处的任何剩余空白，此时每个空白可能只能是一个空格或一对换行符。

（我看到的唯一限制是 JavaScript 强加的限制`\s`，它与所有 Unicode 空白代码点不匹配；并且可以选择输出 MS 样式的换行符，`\r\n`而不是`\n`.）

# magento - 如何在magento 1.7中的欢迎消息旁边添加登录链接

> ID：14772686
> 
> 赞同：2
> 
> 时间：2013-02-08T12:32:59.913
> 
> 标签：magento

我正在尝试将顶部链接中的“登录”链接移动到默认欢迎消息旁边。C:\xampp\htdocs\myhealthzone\app\design\frontend\default\myhealth\template\page\html\header.phtml 在此我给了代码

```
<p class="welcome-msg">
   <?php echo $this->__('Hi %s', Mage::getSingleton('customer/session')->getCustomer()->getFirstname()); ?>
   <?php echo $this->getAdditionalHtml() ?>
</p> 
```

但这仅用于会话。请更新我如何在此处获取登录链接而不是会话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T12:45:52.073

尝试这个：

```
<p class="welcome-msg">
<?php $helper = Mage::helper('customer'); ?>
<?php if ($helper->isLoggedIn() : ?>
<?php echo $this->__('Hi %s', Mage::getSingleton('customer/session')->getCustomer()->getFirstname()); ?>
<?php else :?>
<a href="<?php echo $helper->getLoginUrl(); ?>"><?php echo $this->__('Login');?></a> 
<?php endif; ?>
<?php echo $this->getAdditionalHtml() ?>
</p> 
```

# java - 在“更新索引”期间发生内部错误。Eclipse 启动期间的 Java 堆空间？

> ID：14772691
> 
> 赞同：19
> 
> 时间：2013-02-08T12:33:22.633
> 
> 标签：java, eclipse, heap-memory

启动 Eclipse 时出现以下错误

```
An internal error occurred during: "Updating indexes".Java heap space? 
```

半小时前它运行良好。我重新启动了eclipse，现在出现这个错误？我有 8 GB 内存，Windows 7 64 位操作系统。我试过重新启动我的系统，但没有任何帮助？

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222
-showsplash
org.eclipse.platform
-showLocation
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-vm
C:/Program Files (x86)/Java/jdk1.6.0_25/bin/javaw.exe
-vmargs
-Dfile.encoding=UTF-8
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx1024m 
```

**不知道我是什么问题？**

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-08T15:08:19.303

如果您安装了 m2e 或其他 Maven 插件，您应该检查是否启用了“ **Window -> Preferences -> Maven -> Download repository updates index on startup** ”选项。禁用它，看看它是否解决了内存不足的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T07:23:01.223

如果您使用 eclipse 或 myeclipse，您可以通过更改 .ini 文件 (myeclipse.ini) 来增加内存

-Xmx2048m

-XX:MaxPermSize=1024m

-XX:ReservedCodeCacheSize=512m

-Dosgi.nls.warnings=忽略

它将解决与堆空间有关的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:40:47.193

假设这是一个堆空间问题，试试这个常见问题解答： [Eclipse-Wiki：常见问题解答 如何增加 Eclipse 可用的堆大小？](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-21T20:40:55.423

这可能与问题没有直接关系，但这解决了我遇到的 java 堆问题：

使用`eclipse -vmargs -Xmx2048m`.

从 eclipse 安装中包含的自述文件中：

> 默认情况下，Eclipse 最多会分配 512 兆字节的 Java 堆内存。这对于所有典型的开发任务应该是足够的。但是，根据您正在运行的 JRE、您正在使用的附加插件的数量以及您将使用的文件数量，您可能不得不增加这个数量。Eclipse 允许您使用 -vmargs 命令行参数直接将参数传递给 Java VM，该参数必须遵循所有其他 Eclipse 特定参数。因此，要增加可用的堆内存，您通常会使用：
> 
> ```
> eclipse -vmargs -Xmx<memory size> 
> ```
> 
> 值设置为大于“512M”（512 兆字节——默认值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-14T02:19:26.037

老问题，但我遇到了这个问题并且添加更多内存并没有解决，所以我通过应用eclipse bug tracker 中的[这个评论重建了 java 索引：](https://bugs.eclipse.org/bugs/show_bug.cgi?id=512373#c5)

我引用：

> Click in "Quick Access", Type "Rebuild Java Index" (Actually just start typing it, use the auto completion), Hit enter.

# html - 在数据库*   元素之间预先保留空间？

> ID：14772695
> 
> 赞同：0
> 
> 时间：2013-02-08T12:33:44.233
> 
> 标签：html, mysql, css, html-lists

我正在显示数据库中的图像数据，其中只有很少的元素仅在悬停时显示。

但是当我将鼠标悬停并显示隐藏元素时，之前的元素会离开它们的位置并稍微动摇。

我想预先保留空间，以便在悬停时，没有元素会离开。

请帮助或建议任何替代方法。

```
 <span class="w_li" style="margin-left: 10px;">
  <u1 id='o4_img_w<?php echo $picid;  ?>' style="display: inline-block;border: solid transparent 2px;margin-top: 20px">
      <u1 style="text-align:center;position: relative;margin-top: 8px;background: white ">
          <li style="">
              <span id='o4_img_c<?php echo $picid;   ?>' style="display: none;border: solid black 1px"><a>like</a>.<a>Coment</a>.<a>fvrt</a></span>
          </li>
      </u1>
      <u1>
          <li>
               <span style="display: none" id='o4_img_p<?php echo $picid;  ?>'>
                    <span style="display: inline-block;">
                   <?php
                        $sql2=mysqli_query($this->db->connection,"SELECT  * from photo where  pro_name='$pro_name'");
                        while($row2=mysqli_fetch_array($sql2)){
                            $img_name=$row2['f_name'];
                            $pro_col1=$row2['pro_col'];
                            echo "<div ><input type='image' href='#sales_pics' class='ok_p'  src='images/sales/$img_name' style='width: 20px;height: 20px;margin-bottom: 3px;margin-left: 3px' /></div>";
                        }
                        ?>
                    </span>
              </span>
             <span style="margin-left: 5px;padding-right: 5px"><a href='#wall<?php echo $o4_id;   ?><?php echo $picname;   ?>' class="ok" title="<?php echo $pro_name;   ?>" rel="<?php echo $o4_id;   ?>" onclick="popup()"><img src='images/sales/<?php echo $picname;  ?>' style='width: 140px;height: 170px;border-radius: 10px'></a></span>

          </li>
      </u1>
  </u1> 
```

```
 $(document).ready(function () {

                $("#o4_img_w<?php echo $picid;    ?>").hover(function () {
                    $("#o4_img_c<?php echo $picid;    ?>").show();
                    $("#o4_img_p<?php echo $picid;    ?>").show();

                    $(this).css({

                        'border':'solid grey 2px'

                    });

                }, function () {
                    $("#o4_img_c<?php echo $picid;    ?>").hide();
                    $("#o4_img_p<?php echo $picid;    ?>").hide();

                    $(this).css({

                        'border':'solid transparent 2px'

                    });
                    $('#o4_hover_bar<?php echo $o4_id;    ?>').hide('fast');

                });

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:39:05.420

尝试使用`visibility: hidden`而不是`display: none`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:39:13.540

jQuery[`show()`](http://api.jquery.com/show/)并[`hide()`](http://api.jquery.com/hide/)切换`display: none;`CSS 属性。

为了保留图像的空间，请使用`visibility: hidden`and`visibility: visible;`代替。

```
$(document).ready(function () {
  $("#o4_img_w<?php echo $picid;    ?>").hover(function () {
    $("#o4_img_c<?php echo $picid;    ?>").css( 'visibility', 'visible' );
    $("#o4_img_p<?php echo $picid;    ?>").css( 'visibility', 'visible' );

    $(this).css({'border':'solid grey 2px' });
  }, function () {
    $("#o4_img_c<?php echo $picid;    ?>").css( 'visibility', 'hidden' );
    $("#o4_img_p<?php echo $picid;    ?>").css( 'visibility', 'hidden' );

    $(this).css({'border':'solid transparent 2px' });
    $('#o4_hover_bar<?php echo $o4_id;    ?>').css( 'visibility', 'hidden' );

  });
}); 
```

# ember.js - 在 Ember.js 中将全局状态放在哪里？

> ID：14772696
> 
> 赞同：4
> 
> 时间：2013-02-08T12:33:45.907
> 
> 标签：ember.js

在我的 Ember.js 应用程序中，用户可以拥有多个项目。由于一次只能查看一个项目，因此通过导航栏选择活动项目。这基本上是一个全局状态（也反映在 URL 中`/projects/xyz`）。

**由于多个组件取决于项目选择，我将这些信息放在哪里？我以什么形式保存它（实例或ID）？**

* * *

*关于我的现状*`setupController`：我有一个路由拦截对for的调用`/projects/:project_id`并用于`App.set("projectId", model)`将实例放置在全局命名空间中。这看起来很糟糕，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T18:44:59.267

每当您有反映在 url 中的全局状态时，您都可以使用 ember 路由器来管理该状态。

例如，假设您有一个嵌套在项目下的任务资源，例如：

```
App.Router.map(function() {
  this.resource('project', { path: '/projects/:project_id' }, function() {
    this.route('edit');
    this.resource('tasks', function() {
      this.route('new');
    });
  });
}); 
```

Ember 将使用 project_id url 段来查找您的模型并将其设置为 ProjectController 的内容。要从另一个控制器访问当前选定的项目，请使用`needs`数组声明依赖项并通过`controllers`属性访问它。

```
App.TasksController = Ember.ArrayController.extend({
  needs: ['project']
});

// tasks/index.hbs
Project name: {{controllers.project.name}} 
```

请参阅[控制器需求说明](http://darthdeus.github.com/blog/2013/01/27/controllers-needs-explained/)

# android - 禁用 InfoWindows 的点击突出显示？

> ID：14772698
> 
> 赞同：15
> 
> 时间：2013-02-08T12:33:56.483
> 
> 标签：android, android-maps-v2

有什么方法可以禁用当用户`InfoWindow`在新`Mapsv2 Api`的 for Android 中单击 a 时出现的突出显示效果？

这是 the`getIfoContent()`和`getInfoWindow()`方法的问题。`getInfoWindow()`以其突出的文字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-16T06:35:21.403

用简单的话“你不能”。

因为根据文档“信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分不同部分的点击事件视图。建议您不要将交互式组件（例如按钮、复选框或文本输入）放置在自定义信息窗口中。”

因此，简而言之，除了“OnInfoWindowClickListener”之外，您无法处理 infowindow 上的任何事件

有关更多信息，请查看“ [https://developers.google.com/maps/documentation/android/marker](https://developers.google.com/maps/documentation/android/marker) ”。

# excel - 如何在服务器上放置图表模板 (.crtx)

> ID：14772700
> 
> 赞同：0
> 
> 时间：2013-02-08T12:34:09.813
> 
> 标签：excel, ms-office, powerpoint

我有一个关于在文件服务器上放置图表模板的问题。

我想这样做是为了避免将图表模板文件本地放置在每台 PC 上。如果进行任何更改，它们将在所有 PC 上更新。

只有当我将 Word 中的“用户模板”文件位置指向特定的服务器位置并在其中放置一个“图表”文件夹时，我才发现此方法有效。这不是一个好的解决方案，因为所有用户都将使用相同的 normal.dotm 。

我试图通过使用“工作组模板”文件位置来实现这一点，该文件位置位于服务器上，并有一个名为“Charts”的文件夹，其中包含所有图表模板。但它似乎只在“用户模板”文件位置查找图表模板，而不是在“工作组模板”文件位置。

有没有其他解决方案，这样就不需要在每台 PC 上本地手动更新图表模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:21:02.840

当我与 IT 人员就我自己的一些加载项的可更新文件讨论这种事情时，他们总是同意用于下拉更新文件的登录脚本或将更新文件推出的组策略是一对的合理替代方案。

# objective-c - MKViewAnnotation 自定义注释在添加到 MKMapView 时失去顺序

> ID：14772703
> 
> 赞同：0
> 
> 时间：2013-02-08T12:34:20.353
> 
> 标签：objective-c, arrays, parsing, mkmapview, mkannotationview

我需要在我的 MkMapView 上显示大约 10 个位置和相应的自定义注释图像（取决于**JSON 解析**加载的值）。正如[前面的答案](https://stackoverflow.com/questions/14707080/after-json-parsing-viewforannotation-shows-only-one-single-annotation-on-mkmapv#comment20582455_14714453)所建议的那样，我创建了一个自定义注释类来存储一些数据，但是，我再次无法获得正确的顺序：每个地图位置上的自定义图像不尊重各自解析值的正确顺序，而在 UITableView这一切都很完美。这是简化的代码：

**对应示例：**

```
if parsed valuesID is 100 ---> annotation image must be 100.png
if parsed valuesID is 200 ---> annotation image must be 200.png
if parsed valuesID is 300 ---> annotation image must be 300.png 
```

**viewDidLoad 方法：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    map.showsUserLocation = true;
    map.mapType = MKMapTypeStandard;

    #define MakeLocation(lat,lon) [[CLLocation alloc] initWithLatitude:lat longitude:lon]

    locations= @[ MakeLocation(lat1,lon1), MakeLocation(lat2,lon2), MakeLocation(lat3,lon3), MakeLocation(lat4,lon4), MakeLocation(lat5,lon5), MakeLocation(lat6,lon6), MakeLocation(lat7,lon7), MakeLocation(lat8,lon8), MakeLocation(lat9,lon9), MakeLocation(lat10,lon10) ];
} 
```

**UIButton 调用的 parseMethod：**

```
 - (IBAction)parseMethod {

        [map removeAnnotations:map.annotations];

        // THE COMPLEX CODE TO PARSE VALUES of valuesID
        ...
        ... // so here I have the full array of valuesID
        ...
        // THE CONTROL FOR THE END OF COMPLETE PARSING (blocks, cycle, ... )

        [self addAnnotations]; // here i'm sure to call method AFTER THE END of complete parsing

    } 
```

**MyAnnotation2.h 自定义类：**

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyAnnotation2 : NSObject <MKAnnotation>

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, assign) int valuesIDMyAnnotation2;

@end 
```

**MyAnnotation2.m 自定义类：**

```
#import "MyAnnotation2.h"

@implementation MyAnnotation2

@synthesize coordinate;
@synthesize valuesIDMyAnnotation2;

@end 
```

**addAnnotations 方法（在解析完成后调用）：**

```
- (void)addAnnotations {

    [table reloadData]; // UITableView with rows populated with locations coordinates and respective valuesID
    [table scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];

    for (int l=0; l<[locations count]; l++) {

        annotation2 = [[MyAnnotation2 alloc] init]; // create MyAnnotation2 istance to assign custom properties
        annotation2.valuesIDMyAnnotation2 = [[valuesID objectAtIndex:l] intValue];
        annotation2.coordinate = [locations[l] coordinate];
        [map addAnnotation: annotation2]; // here we call delegate with all necessary data to add annotations, both location coordinate and corresponding valuesID

        NSLog(@"%d - COORDINATES: %f - %f",annotation2.valuesIDMyAnnotation2,annotation2.coordinate.latitude, annotation2.coordinate.longitude);
    }

} 
```

**UITableView 委托**：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:
                UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }
            cell.textLabel.text = [NSString stringWithFormat:@"%@",[coordinates objectAtIndex:indexPath.row]]; // here coordinates are values from each location

            if ([[valuesID objectAtIndex:indexPath.row] intValue] == 100) {
                UIImage *image = [UIImage imageNamed:@"100.png"];
                [cell.imageView setImage:image];
            }
            if ([[valuesID objectAtIndex:indexPath.row] intValue] == 200) {
                UIImage *image = [UIImage imageNamed:@"200.png"];
                [cell.imageView setImage:image];
            }
            if ([[valuesID objectAtIndex:indexPath.row] intValue] == 300) {
                UIImage *image = [UIImage imageNamed:@"300.png"];
                [cell.imageView setImage:image];
            }
    return cell
} 
```

**最后，viewForAnnotation 委托：**

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation {

    if ( ! [annotation isKindOfClass:[MyAnnotation2 class]])
    {
        ((MKUserLocation *)annotation).title = @"My position";
    return nil;
    }

    MKAnnotationView *pinView= [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pinView"];

    MyAnnotation2 *myPin = (MyAnnotation2 *)annotation;

    if (myPin.valuesIDMyAnnotation2 == 100) {
        pinView.image = [UIImage imageNamed:@"100.png"];
    }
    if (myPin.valuesIDMyAnnotation2 == 200) {
        pinView.image = [UIImage imageNamed:@"200.png"];
    }
    if (myPin.valuesIDMyAnnotation2 == 300) {
        pinView.image = [UIImage imageNamed:@"300.png"];
    }
    [pinView setFrame:CGRectMake(0, 0, 25, 25)];
    return pinView;

} 
```

**编辑 - NSLogs 结果示例（来自 addAnnotations 方法的代码）：**

```
100 - COORDINATES lat1 - lon1 // here I expect annotation images100.png on location1
200 - COORDINATES lat2 - lon2 // ...
100 - COORDINATES lat3 - lon3
300 - COORDINATES lat4 - lon4
100 - COORDINATES lat5 - lon5
200 - COORDINATES lat6 - lon6
100 - COORDINATES lat7 - lon7
300 - COORDINATES lat8 - lon8
300 - COORDINATES lat9 - lon1
200 - COORDINATES lat10 - lon10 
```

**结果：** 在 UITableView 上它非常完美，我可以看到位置坐标和自定义图像之间的正确对应关系，并且 NSLog() 给出了位置和 valuesID 的正确对应关系。相反，在 MKMapView 上，自定义注释图像**未按正确顺序添加，**因此我有正确的注释图像，但位置错误。请再次帮我解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:13:46.280

在每一行上放置一个断点`pinView.image`，当它设置 image200.png 时，检查坐标是什么（你可能需要 NSLog 它们，我从来不擅长深入挖掘调试器数据）。如果您有不匹配的情况，请查看其余代码中可能会更改位置值的任何其他内容，任何内容，然后在此处设置一个断点。如果在 和 之间触发了该断点`parseMethod`，`viewForAnnotation`那么您可能是罪魁祸首。

# events - 将 jQuery 事件传递给默认的 on-eventhandler

> ID：14772705
> 
> 赞同：1
> 
> 时间：2013-02-08T12:34:26.353
> 
> 标签：events, jquery-plugins, event-handling, jquery

`jQuery.fn.on`在给定数量的触发事件之后，我编写了一个函数来调用默认处理程序。现在我卡住了，因为原来的`event`不会传递给函数，有什么想法可以改进吗？

```
;(function ($) {
    var oldOn = $.fn.on,
        i = 0;
    $.fn.on = function () {
        var args = arguments,
            j = args.length;

        for (var last in args);

        while (j--) {
            if ($.isFunction(args[j]) && !isNaN(args[last])) {
                var oldFn = args[j],
                    after = args[last];
                args[j] = function () {
                    i++;
                    if (i === after) {
                        oldFn.call();
                        i = 0;
                    }
                };
            }
        }

        if (!isNaN(args[last])) delete args[last];
        return oldOn.apply(this, arguments);
    };
})(jQuery);

// call the plugin and fire the `fn` after each 20 mousemoves
$(document).on('mousemove', function (e) {
    console.log(e); // undefined
}, 20); 
```

如您所见，以下是否可以正常工作：

```
var oldOn = $.fn.on;
$.fn.on = function () {
    return oldOn.apply(this, arguments);
};

$(document).on('click', function(e){
    console.log(e) // jQuery.Event
}); 
```

错误在哪里，我怎样才能让它工作？

**更新**

我现在变得简单多了：[https ://github.com/yckart/jquery.unevent.js](https://github.com/yckart/jquery.unevent.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:56:51.323

我认为

```
for (var last in args); 
```

应该

```
var last = args[args.length-1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:02:13.487

您没有将回调包装函数中的参数传递给原始回调函数。

```
args[j] = function (*HERE*) {
  i++;
  if (i === after) {
    oldFn.call(*TO HERE*);
    i = 0;
  }
}; 
```

尝试替换`oldFn.call();`为`oldFn.apply(this, [].slice.call(arguments));`携带它们（并保持 jQuery 的`this`）。

编辑：http: [//jsfiddle.net/QFyhX/](http://jsfiddle.net/QFyhX/)

# html - CSS - 浮动和背景大小关系

> ID：14772718
> 
> 赞同：0
> 
> 时间：2013-02-08T12:35:08.183
> 
> 标签：html, css

目前，我正在研究导航，我遇到了这个问题：

导航的内容向左浮动。当我尝试为导航本身设置背景颜色时，它不起作用。看这个例子：

[http://cssdeck.com/labs/qknohqxe](http://cssdeck.com/labs/qknohqxe)

当 float:left 被移除时，背景颜色变得可见，但是，导航的“表单”被破坏。

我很确定我错过了一个重要的点，因为我试图达到这个简单的点，在这个点上，形式和背景颜色都可以按照我的意愿保留。

我的猜测是，浮动内容和载体的大小（在我的例子中是#nav）之间存在关系。

需要针对此问题的建议/解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:42:24.133

将此添加到`.group`：

```
overflow:auto; 
```

而已。

还有另一种解决方案：`clear:both;`在所有浮动 div 之后添加一个元素。但它有点脏：

```
<div class="container">
    <div class="floating div"></div>
    <div class="floating div"></div>
    <div class="floating div"></div>
    <div style="clear:both;"></div>
</div> 
```

当您使用浮动 div 时，它总是会发生。该容器不关心浮动元素，因此它就像一个空容器，除非您使用上述解决方案之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:43:18.387

在父容器（`.group`在您的情况下）上，添加`overflow: auto`或设置固定高度。

发生这种情况是因为浮动元素和绝对定位元素默认情况下会从文档流中排除，因此在定位以下元素时会被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:39:14.463

为您的`.group`.

```
.group{
    height: 300px;
    background-color: blue;
} 
```

当您浮动对象时，它会将其从文档流中取出。这意味着父对象与子元素的高度无关。

通过设置高度，您将迫使容器下降。

或者，您可以向容器添加溢出以`.group`强制它查找高度。

```
.group{
    overflow: hidden;
    background-color: blue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:47:02.100

这是有效的 CSS 声明。

```
.group{
    background-color: blue;
    float: left;
    width: 200px;
} 
```

您需要了解嵌套元素的浮动和定位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:47:24.143

只需添加一个明确的两者；到一个额外的元素：

```
<div id="nav">
    <div class="group">
        <div class="button">Button1</div>
        <div class="button">Button2</div>
        <div class="button small">Button3</div>
        <div class="button small">Button4</div>
        <div class="button">Button5</div>   
        <br class="clear" />
    </div>
</div>

#nav{
    width: 240px;
}

.button{
    float:left;
    border-radius: 20px;
    width: 200px;
    height: 50px;
    margin-top: 10px;
    background-color: red;
    text-align: center;
    line-height: 50px;
}

.group{
    background-color: blue;
}

.small{
    width: 100px;
}
.clear
{
    clear: both;
} 
```

# jquery - jQuery div滑块防止滑动时单击

> ID：14772720
> 
> 赞同：1
> 
> 时间：2013-02-08T12:35:11.617
> 
> 标签：jquery, html, slider, fade

我有一个基于 jQuery 的 div 滑块它就像一个魅力。

[http://jsfiddle.net/7ChVu/15/](http://jsfiddle.net/7ChVu/15/)

唯一的问题是，如果您单击两次，您可能会弄乱 div 的位置，并且您最终会得到一个空白区域，而前一个按钮仍然处于活动状态。

如何在滑动/淡入淡出时禁用点击，直到 div 到位？

- 见下面的代码：

```
<style>
a, a:link, a:visited, a:hover, a:active {
color: #666;
text-decoration:none; }

a:hover {
font-weight:bold; }

a:visited {
color: #999; }

#h_container {
width: 200px;
overflow: hidden; }

#h_wrapper {
width: 600px; }

.h_slide {
width: 200px;
height: 200px;
overflow: hidden;
float: left; }
</style>

<script>
var SlideWidth = 200;
var SlideSpeed = 500;

$(document).ready(function() {
    // set the prev and next buttons display
    SetNavigationDisplay();
});

function CurrentMargin() {
    // get current margin of slider
    var currentMargin = $("#h_wrapper").css("margin-left");

    // first page load, margin will be auto, we need to change this to 0
    if (currentMargin == "auto") {
        currentMargin = 0;
    }

    // return the current margin to the function as an integer
    return parseInt(currentMargin);
}

function SetNavigationDisplay() {
    // get current margin
    var currentMargin = CurrentMargin();

    // if current margin is at 0, then we are at the beginning, hide previous
    if (currentMargin == 0) {
        $("#PreviousButton").fadeOut();
    } else {
        $("#PreviousButton").fadeIn();
    }

    // get wrapper width
    var wrapperWidth = $("#h_wrapper").width();

    // turn current margin into postive number and calculate if we are at last slide, if so, hide next button
    if ((currentMargin * -1) == (wrapperWidth - SlideWidth)) {
        $("#NextButton").fadeOut();
    } else {
        $("#NextButton").fadeIn();
    }
}

function NextSlide() {
    // get the current margin and subtract the slide width
    var newMargin = CurrentMargin() - SlideWidth;

    // slide the wrapper to the left to show the next panel at the set speed. Then set the nav display on completion of animation.
    $("#h_wrapper").animate({
        marginLeft: newMargin
    }, SlideSpeed, function() {
        SetNavigationDisplay()
    });
}

function PreviousSlide() {
    // get the current margin and subtract the slide width
    var newMargin = CurrentMargin() + SlideWidth;

    // slide the wrapper to the right to show the previous panel at the set speed. Then set the nav display on completion of animation.
    $("#h_wrapper").animate({
        marginLeft: newMargin
    }, SlideSpeed, function() {
        SetNavigationDisplay()
    });
}
</script>

<!--- DISPLAY CONTAINER --->
<div id="h_container">
    <!-- OUTTER WRAPPER -->
    <div id="h_wrapper">
        <!-- SLIDE 1 -->
        <div id="slide1" class="h_slide">
            <p>Part 1</p>
        </div>
        <!-- SLIDE 2 -->
        <div id="slide2" class="h_slide">
           <p>Part 2</p>
    </div>
    <!-- SLIDE 3 -->
    <div id="slide3" class="h_slide">
        <p>Part 3</p>
    </div>
</div> 
```

```
<!--- NAVIGATION BUTTONS -->
<table style="width:200px; padding: 0 10px 0 10px;">
<tbody>
    <tr>
        <td align="left"><a href="javascript:void(0)" onclick="PreviousSlide()" id="PreviousButton"
            style="display:none">&laquo; Previous</a>

        </td>
        <td align="right"><a href="javascript:void(0)" onclick="NextSlide()" id="NextButton">Next &raquo;</a>

        </td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:56:53.483

首先，您需要在 javascript 中而不是在 html 中绑定您的事件。

```
 var $body=$(document.body);
  $body.on({click: function() {}},"#NextButton"); 
```

防止滑动过程中的点击有很多解决方案；一种是定义一个全局变量。

```
 var inprogress=false; 
```

在单击事件时，您检查该变量是否为真/假，如果为假，则将其设置为真并执行您的动画，然后在动画回调中将其设置回假。

```
 $body.on({
      click: function() {
       if (!inprogress) {
          inprogress=true;
          $("#h_wrapper").animate({
                marginLeft: newMargin
             }, SlideSpeed, function() {
                   SetNavigationDisplay();
                   inprogress=false;
            });
          }
        }
       },"#NextButton"); 
```

我希望你能明白并让你最终确定你的事件处理程序以满足你的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:36:01.187

我最终得到了这个解决方案：

```
$("#NextButton").on("click", function() { 
if ( $("#h_wrapper").is(':not(:animated)') && $("#NextButton").is(':not(:animated)') ) {
    var newMargin = CurrentMargin() - SlideWidth;
    $("#h_wrapper").animate({ marginLeft: newMargin }, SlideSpeed, function () { SetNavigationDisplay() }); 
    }
}); 
```

我必须检查包装器或按钮是否动画。如果两者都没有动画，那么我运行动画功能

在这里看到它：http: [//jsfiddle.net/UqSFr/1/](http://jsfiddle.net/UqSFr/1/)

# extjs - 仪表图可以有多色吗？

> ID：14772723
> 
> 赞同：1
> 
> 时间：2013-02-08T12:35:25.687
> 
> 标签：extjs, gauge

请查看此代码并尝试使用确切的代码找到解决方案，因为我在 EXTJS 中比较新鲜：

```
var chart=Ext.create('Ext.chart.Chart', {

    renderTo: Ext.getBody(),
    store: store,
    width: 400,
    height: 250,
    animate: true,
    insetPadding: 30,
    axes: [{
        type: 'gauge',
        position: 'gauge',
        minimum: 0,
        maximum: 100,
        steps: 10,
        margin: 10
    }],
    gradients: [{
        'id': 'v-1',
        'angle': 0,
        stops: {
                0: {
                    color: 'rgb(212, 40, 40)'
                    },
                100: {
                    color: 'rgb(117, 14, 14)'
                    }
                }
        },
        {
        'id': 'v-2',
        'angle': 0,
        stops: {
                0: {
                    color: 'rgb(180, 216, 42)'
                    },
                100: {
                    color: 'rgb(94, 114, 13)'
                    }
                }
        },
        {
        'id': 'v-3',
        'angle': 0,
        stops: {
                0: {
                    color: 'rgb(43, 221, 115)'
                    },
                100: {
                    color: 'rgb(14, 117, 56)'
                    }
                }
        },
        {
        'id': 'v-4',
        'angle': 0,
        stops: {
                0: {
                    color: 'rgb(45, 117, 226)'
                    },
                100: {
                    color: 'rgb(14, 56, 117)'
                    }
                }
        },
        {
        'id': 'v-5',
        'angle': 0,
        stops: {
                0: {
                    color: 'rgb(187, 45, 222)'
                    },
                100: {
                    color: 'rgb(85, 10, 103)'
                    }
                }
        }],
    series: [{
        type: 'gauge',
        field: 'value',
        donut: 30,
        colorSet:  ['url(#v-1)', '#ddd']
    }]
}); 
```

这是代码的一部分。我只是想知道仪表图表是否可能具有多种背景颜色，而它们都是静态的？比如 0-25=red , 25-50= yellow ,50-100= green 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T23:02:49.397

是的。有人已经通过扩展仪表系列完成了这项工作：[http ://www.sencha.com/forum/showthread.php?159879-KPI-Gauge](http://www.sencha.com/forum/showthread.php?159879-KPI-Gauge)

您可以下载一个 .zip 文件并将其添加到您的库中。然后你基本上可以这样做：

```
{
            xtype: 'chart',
            style: 'background:#fff',
            animate: {
                easing: 'elasticIn',
                duration: 1000
            },
            store: store1,
            insetPadding: 50,
            flex: 1,
            axes: [{
                type: 'kpigauge',
                position: 'left',
                minimum: 0,
                maximum: 100,
                steps: 10,
                margin: 0,
                label: {
                    fill: '#333',
                    font: '12px Heveltica, sans-serif'
                }
            }],
            series: [{
                type: 'kpigauge',
                field: 'data1',
                needle: {
                    width: 2,
                    pivotFill: '#000',
                    pivotRadius: 5
                },
                ranges: [{
                    from: 0,
                    to: 70,
                    color: '#FF0000'
                }, {
                    from: 70,
                    to: 90,
                    color: '#FFFF00'
                }, {
                    from: 90,
                    to: 100,
                    color: '#00FF00'
                }],
                donut: 70
            }] 
```

# extjs - 讲解extjs的MVC架构

> ID：14772729
> 
> 赞同：10
> 
> 时间：2013-02-08T12:35:36.703
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我使用 Javascript 创建了一个小型数独应用程序。现在我正在尝试将该 javascript 代码转换为 extjs ( *4.1.1a* ) 代码。我已经阅读了[文档](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)以了解*MVC 架构*，但对我来说似乎并不那么详细，因为我是初学者。

有人可以根据我的数独应用程序解释 Extjs 的 MVC 架构吗？

我的数独应用程序代码的设计如下：

![在此处输入图像描述](../Images/33d61ef61de60b9702baa0cf80a334d1.png)

上述设计说明如下：

*   `container (blue) --> parent panel (grey) --> child panel (red)`

*   “*父面板*”有九个，每个“*父面板*”有九个“*子面板*”。

*   *“父面板*”和“*子面板*”的 HTML 元素是使用 for 循环动态生成的。

*   我在“*子面板*`KeyDown`”上写了事件和事件之类的事件。`click`

**   我还写了一些函数，比如

    *checkGroup()*        --> 在每个“父面板”中检查是否有任何重复的数字 *checkVertical()*      --> 在“容器”的每个垂直行中检查重复的数字 *checkHorizo​​ntal()* --> 在“容器”用于重复数字* 

 ** * *

## 编辑：（*未完成和非结构化代码*）

**app.js**（*主 js 文件*）

```
Ext.application({
     name: 'Game',
     appFolder: 'app',  
     controllers: ['Sudoku']     
}); 
```

**控制器**（'app' 文件夹 --> 'controller' 文件夹 --> Sudoku.js）

```
//By using 'controller', trying to call 'view' here
Ext.define('Game.controller.Sudoku', {
    extend: 'Ext.app.Controller',

    init: function () {
        console.log("controller init");
    },
    onLaunch: function () {
        console.log("controller onLaunch");
    },
    views: ['Sudoku']
}); 
```

**查看** （'app' 文件夹 --> 'view' 文件夹 --> Sudoku.js）

```
Ext.define('Game.view.Sudoku', {
    extend: 'Ext.window.Window',  //what should I extend here for view?       
    initComponent: function () {
        //my complete sudoku js file here
        console.log("hello");
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T12:45:14.780

根据我对您的应用程序的了解，我几乎无话可说。您有一个非常具体的视图，其中包含一些不应该打扰控制器的侦听器和操作。

控制器将创建`container`as 视图，并可能将一些配置选项传递给它，而无需过多关注其他嵌套面板。控制器还可以侦听此类事件，`container`例如结束游戏或保存游戏的按钮。

MVC 并不意味着您会将所有事件和逻辑中继到控制器中。

即使您认为这相当复杂，它仍然只是一种观点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T15:10:30.097

首先，在尝试实现 MVC 之前，您应该对 MVC 的工作原理有一个很好的了解，尤其是在最近的版本中添加了 MVC 支持的 Ext JS 中。

从一般意义上说（因为你是唯一真正知道你的代码的人），我会这样分开代码：

*   **模型**：数据值的 9x9 矩阵（或 3x3 矩阵的 3x3 矩阵），一种确定谜题是否已解决或用户输入中是否有任何错误的验证方法（例如，一个框中的两个 6），并且可能撤消支持。

*   **查看**：您的容器在上面。控制器应该不知道容器如何显示值。我可能会发送我自己的数独特定事件，例如`cellchanged(container, x, y, newValue, oldValue)`and `undo(container)`。

*   **控制器**：监听视图中的数独特定事件并相应地更新模型。每次更新后，验证模型以查看谜题是否已解决或某些单元格是否不正确。不应充当所有视图事件的中继。与数独控制器类似`render`且不`resize`相关的事件。只听你真正需要的。*

# python - Calling another build tool from setup.py

> ID：14772730
> 
> 赞同：6
> 
> 时间：2013-02-08T12:35:37.897
> 
> 标签：python, build, setuptools, distutils, waf

I have a medium-sized C++/Python project that requires external dependencies and tools to get compiled. Namely, to interact with Qt's MOC compiler among other stuff.

This project produces a library, header files and a python extension. I'd like to leverage from python setuptools to distribute and build this project. The issue is the build bits from distutils aren't satifactory for our project needs. We need things like parallel-builds and external dependence detection.

Question: What is the best way to do this? Would it be possible, for example, to write a `setup.py` that delegates the build to waf? A working example (even if summarized) is a plus!

# javascript - 显示和隐藏动态内容

> ID：14772733
> 
> 赞同：0
> 
> 时间：2013-02-08T12:35:52.160
> 
> 标签：javascript, html, show-hide

好的，所以我有一个收件箱样式的布局，每条消息都有多条带有动态内容的消息，我想单击一个链接（需要操作），一旦单击它将打开一个包含 iFrame 的下拉 div。这是我正在使用的 Javascript：

```
<script language="javascript"> 

function toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "<iframe src=\"http://m.quotesin.com/an.html\" width=\"100px\" frameborder=\"0\" height=\"20px\" allowtransparency=\"yes\" scrolling=\"no\"></iframe>";
    }

else {
        ele.style.display = "block";
        text.innerHTML = "<iframe src=\"http://m.quotesin.com/an.html\" width=\"100px\" frameborder=\"0\" height=\"20px\" allowtransparency=\"yes\" scrolling=\"no\"></iframe>";
    }
} 

</script> 
```

并显示：

```
<a id="displayText" href="javascript:toggle();"><div style="posistion:relative;"><img src="images/iframe.png" style="position:absolute;"><iframe src="http://m.quotesin.com/an.html" width="100px" frameborder="0" height="20px" allowtransparency="yes" scrolling="no"></iframe></div></a> 
```

设计视图的图像在这里...之前： ![在此处输入图像描述](../Images/37017086d0315eef3aebe1d8775fca99.png) 之后： ![在此处输入图像描述](../Images/376d7d833367fba1980ca0ecc733798f.png) 但是当收件箱中有多个这些时，第二个不会打开，是否有一个简单的 CSS 显示和隐藏父和子不会共享相同的属性我可以使用，或者任何关于去哪里的建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:48:41.887

就动态 HTML 而言，不使用 Javascript 或 JQuery 就无法处理它。其次，您编写的 Javascript`getElementById`仅允许单个元素（指定了相同的 id。）选择。

由于您希望使用相同的代码来处理多个收件箱，因此您需要容器和子选择器来帮助您提供相同的效果。
您需要使用允许多项选择的 id 以外的选择器。
如果我弄错了，请告诉我。如果您可以将代码放在 JS fiddel 中会更好。

享受编码；）

# c# - C#/SQLCE 以编程方式创建表（自动增量 + 主键）

> ID：14772736
> 
> 赞同：3
> 
> 时间：2013-02-08T12:35:59.890
> 
> 标签：c#, sql, sql-server-ce

我正在尝试以编程方式在 SQL CE 数据库中创建一个表。目前，我正在使用以下查询 - 尽管我收到错误；

```
string command = @"CREATE TABLE CONNECTION(" +
                  "connection_id INTEGER IDENTITY(1,1) PRIMARY KEY, " +
                  "host NVARCHAR(255), port INT, key NVARCHAR(50), " +
                  "last_used NVARCHAR(15));"; 
```

我得到的错误是：

> 解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 104，错误令牌 = 键]

我似乎无法弄清楚我做错了什么。我习惯了 MySQL，查询略有不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:37:31.247

尝试`key`用括号括起来

```
string command = @"CREATE TABLE CONNECTION(" +
                        "connection_id INTEGER IDENTITY(1,1) PRIMARY KEY, " +
                        "host NVARCHAR(255), port INT, [key] NVARCHAR(50), " +
                        "last_used NVARCHAR(15));"; 
```

*   [保留字](http://msdn.microsoft.com/en-us/library/aa258313%28v=sql.80%29.aspx)

# mysql - 不使用分号设置 MySQL 变量

> ID：14772739
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:36:04.330
> 
> 标签：mysql

我收到了这个代码建议，用于按分数获取每个人的排名，有没有一种方法可以在不使用分号的情况下声明 var？我找到了一种从查询中声明的方法，但是在使用如下子查询时我无法让它工作：

```
SET @rank := 0;
SELECT a.name, 
   a.AvScore, 
   @rank := @rank + 1 
FROM   (SELECT name, 
           Avg(score) AS AvScore 
    FROM   results 
    GROUP  BY name) a
ORDER  BY a.AvScore 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:47:07.950

像这样试试

```
 SELECT a.name, 
           a.AvScore, 
           @rank := @rank + 1 
    FROM   (SELECT name, 
           Avg(score) AS AvScore ,(SELECT @rank :=0) v
    FROM   results 

    GROUP  BY name) a
    ORDER  BY a.AvScore 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:39:00.337

如果您希望更改分隔符（例如更改为这样的`//`），您应该这样做：

```
mysql> delimiter //
mysql> SET @rank := 0 // 
```

MySQL 需要一个分隔符标识，以便它能够分隔你的多个句子，否则它也可以是一个句子，它不适用于检查语法是否正确的约束规则。

**更新**

作为对评论的回应（OP 有兴趣从同一语句执行多个查询一次），虽然我不熟悉 PHP，并且有`addBatch`JDBC 的方法可以为单个语句执行多个查询，

似乎在 php`mysqli->multi_query`中也是如此。

对于所呈现的案例，@echo_me 提出了一种避免多次查询的优雅解决方案，对于其他情况，您应该考虑使用 multi_query。

# php - copy database from server to server with php

> ID：14772745
> 
> 赞同：0
> 
> 时间：2013-02-08T12:36:19.773
> 
> 标签：php, mysql, sql

I want to copy my database from one db to another db on my own server using php

1.  db : reports
2.  db : cards..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:38:48.097

以下是备份和恢复数据库的方法列表：

[http://www.noupe.com/how-tos/10-ways-to-automatically-manually-backup-mysql-database.html](http://www.noupe.com/how-tos/10-ways-to-automatically-manually-backup-mysql-database.html)

#6 教你如何用 PHP 做到这一点，以及如何恢复你的备份数据。

# javascript - Stick div to top of page when start scrolling

> ID：14772746
> 
> 赞同：0
> 
> 时间：2013-02-08T12:36:20.163
> 
> 标签：javascript, jquery, html, css

I have tried to make a div (id="hoe") that sticks to the top of the from the moment the user scrolls. before scrolling, the div is located under the header. Unfortunately, i can't get it to work after lot's of trying. Any tips and help on what I do wrong is greatly appreciated. Here is my code in a test version:

```
<!DOCTYPE html>
<head>

<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" />
<style type="text/css">

#header
{
background-color: blue;
width: 100%;
height: 125px;
}

#hoe
{ 
background-color: red;
height: 180px;
width: 100%;
z-index: 9999;
top: 125;
position: fixed;
}

#een
{
margin-top: 180px;
background-color: green;
height: 700px;
width: 100%;
}

</style>

<script type="text/javascript">
$(document).ready(function() {

if ($('body').hasClass('lock')) {
    bar_pos = $('#hoe').offset();
    if (bar_pos.top >= (125+180)) {
        $('#hoe').css('top', 0);
        //document.getElementById("hoe").style.top="0"; also tried this
    }
});
});

</script>

</head>
<body class="lock">
<div id="header">
</div>
<div id="hoe">
</div>
<div id="een">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:48:09.890

我修改了你的代码并在这里创建了一个小提琴：http: [//jsfiddle.net/UcX4A/](http://jsfiddle.net/UcX4A/)

你的javascript中有一个多余的括号

```
$(document).ready(function() {
    if ($('body').hasClass('lock')) {
        bar_pos = $('#hoe').offset();
        if (bar_pos.top >= (125+180)) {
            $('#hoe').css('top', 0);
            //document.getElementById("hoe").style.top="0"; also tried this
        }
    }); <<< Surplus bracket
}); 
```

此外，“滚动”事件没有附加到任何东西，因此没有被评估。我改变了你的：

```
$(document).ready(function() { 
```

一个：

```
$(window).scroll(function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:52:36.153

看到这个：http: [//jsfiddle.net/WTnEd/](http://jsfiddle.net/WTnEd/)

使用[$(window).scroll()](http://api.jquery.com/scroll/)

```
$(document).ready(function () {
var bar_pos;
$(window).scroll(function (e) {
    if ($('body').hasClass('lock')) {
        bar_pos = $('#hoe').offset();
        if (bar_pos.top >= (125 + 180)) {
            $('#hoe').css('top', 0);
        }
        else{
            $('#hoe').css('top', 125);
        }
    };
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T13:20:58.603

据我了解，这是开始滚动时将 div 粘贴到页面顶部的另一种方法：

```
<div id="header" style="position:fixed; top:0px; left:0px; right:0px;
    height:100px; z-index:2; background:blue;"></div>
<div id="hoe" style="position:fixed; top:100px; left:0px; right:0px;
    height:100px; z-index:2; background:red;"></div>
<div id="een" style="position:absolute; top:200px; left:0px; right:0px;
    height:100px; z-index:1;">
  <p>dummy text</p>
  <p>dummy text</p>
  <p>dummy text</p>
</div> 
```

# javascript - "Input type file.files" selector not working in jQuery

> ID：14772753
> 
> 赞同：16
> 
> 时间：2013-02-08T12:36:46.717
> 
> 标签：javascript, jquery

I'm trying to get information about the file being uploaded in an HTML input with the following code:

```
$(document).ready(function() {
  $('#btn').on('click', function() {
    file_size = $("#my_file").files[0].size;
    alert(file_size);
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form>
  <input id="my_file" type="file" name="my_name" />
  <input id="btn" type="button" />
</form>
```

But it doesn't work, and the console returns: `$("#my_file").files is undefined`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-08T12:41:35.967

`$("#my_file")`是 jQuery 对象，而 jQuery 对象没有属性`files`...

要从 jQuery 中获取 DOM 元素，请执行以下操作

```
$("#my_file")[0].files[0].size 
```

* * *

作为一个额外的说明，如果你没有选择任何文件，`($("#my_file"))[0].files[0]`给你`undefined`并`($("#my_file"))[0].files[0].size`会抛出错误。
建议您添加支票...

```
if ($("#my_file")[0].files.length > 0) {
    file_size = $("#my_file")[0].files[0].size
} else {
    // no file chosen!
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T12:42:15.033

jQuery 对象没有`files`属性，您可以使用旧的`getElementById`或 jQuery`get`方法来选择 DOM Element 对象。

```
$(document).ready(function() {
  $('#btn').on('click', function() {
    file_size = document.getElementById("my_file").files[0].size;
    alert(file_size);
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form>
  <input id="my_file" type="file" name="my_name" />
  <input id="btn" type="button" />
</form>
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2017-07-03T08:58:51.243

```
$(document).ready(function() {
  $('#btn').on('click', function() {
    file_size = document.getElementById("my_file").files[0].size;
    alert(file_size);
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form>
  <input id="my_file" type="file" name="my_name" />
  <input id="btn" type="button" />
</form>
```

# javascript - Trying to pin automatically with Greasemonkey

> ID：14772757
> 
> 赞同：1
> 
> 时间：2013-02-08T12:37:09.320
> 
> 标签：javascript, greasemonkey, pinterest

I'm trying to make a script for Greasemonkey to automatically pin when a *Pinterest* window is opened.

CODE:

```
body = document.body;

if (body != null) {
    var prepare = document.getElementsByTagName("button");
    var buttons = "";

    for (var i = 0; i < prepare.length; i++){
        if (prepare[i].getAttribute("data-text-pin-it")!=null) {
            buttons = prepare[i];
            break;
        }
    }
    buttons.click();
} 
```

It gets executed, if I set a console.log at the end of the code is printed, but the button is not clicked!

If I execute the same instructions by Firebug console I get the desired effect.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:20:17.133

毫无疑问，Pinterest 按钮是由 AJAX 添加的——在您的脚本运行很久之后。

使用 AJAX 补偿技术等待它。这是**一个完整的脚本**，它使用 jQuery 的强大功能和[waitForKeyElements() 实用程序](https://gist.github.com/2625891)来单击该按钮：

```
// ==UserScript==
// @name     YOUR_SCRIPT_NAME
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

waitForKeyElements ("button[data-text-pin-it]", clickPinterestBtn);

function clickPinterestBtn (jNode) {
    jNode[0].click ();
} 
```

# mysql - MySql - Retrieving the last record in each subgroup

> ID：14772760
> 
> 赞同：0
> 
> 时间：2013-02-08T12:37:21.217
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

1.Purchase table

```
Id   user     pur_type
----------------------
1    408       5-12
2    408       5-12
3    222       1-11
4    222       5-12
5    408       1-11
6    408       1-11 
```

2\. goods table

```
Id   parts    days
-----------------
1    1-11      50
2    5-12      40 
```

I implemented such query

```
SELECT p1.id, p1.user, p1.pur_type, g.parts, g.days
FROM purchase p1
INNER JOIN goods g ON p1.pur_type = g.parts
LEFT JOIN goods p2 ON ( p1.pur_type= p2.pur_type
AND p1.id < p2.id )
WHERE p2.id IS NULL 
```

The result is only last record for each pur_type

```
Id   user   pur_type  parts   days
---------------------------------
4    222     5-12     5-12    40
6    408     1-11     1-11    50 
```

How to get last record from `purchase` table of each `pur_type` for one specific user?

for example for user 408 need result:

```
Id   user     parts   days
-------------------------
2    408       5-12    40
6    408       1-11    50 
```

Result explanation:
last record fot `part` 5-12 for user 408 is `id`=2
last record for `part` 1-11 for user 408 is `id`=6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:39:56.797

```
SELECT  a.*, c.* -- select columns youw ant
FROM    Purchase a
        INNER JOIN
        (
            SELECT user, MAX(ID) max_ID
            FROM    Purchase
            GROUP   BY user, pur_type
        ) b ON  a.user = b.user AND
                a.ID = b.max_ID
        INNER JOIN goods c
            ON a.pur_type = c.parts
WHERE   a.USER = 408 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/9b487/5)

`parts`为了获得更好的性能，请在表上的列上添加一个索引`goods`以及`pur_type`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:52:29.557

对现有查询的简单修改：

```
SELECT p1.id, p1.user, p1.pur_type, g.parts, g.days
FROM purchase p1
INNER JOIN goods g ON p1.pur_type = g.parts
LEFT JOIN purchase p2 
       ON ( p1.pur_type= p2.pur_type AND p1.id < p2.id AND p1.user=p2.user)
WHERE p2.id IS NULL and p1.user = 408 
```

# grails - Grails pass data to view from controller

> ID：14772761
> 
> 赞同：0
> 
> 时间：2013-02-08T12:37:22.487
> 
> 标签：grails

Hi i made a ajax request to my controller already. Can my controller send back data as normal eg.

```
[p:project] 
```

I want to reload google map markers

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T16:41:46.417

假设您想将项目 obj 作为结果发送回视图 "projectView" ，您可以在控制器中执行类似的操作

```
render(view : "projectView", model:[p:project]); 
```

然后在您的视图中“使用”结果，如下所示（其中 p 是您从控制器发送的变量的名称

```
<html><head>Test</head><body>${p}</body></html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:50:59.120

你会想要在 ajax 控制器方法中返回一些东西。假设您有一个名为“_project.gsp”的 gsp 模板，它可能看起来像这样......

```
def project = Project.get(params.id);
render(template:"project" model:['p':project]); 
```

# mysql - MySQL Multiple table locks

> ID：14772762
> 
> 赞同：9
> 
> 时间：2013-02-08T12:37:25.983
> 
> 标签：mysql

I have a small curiosity about MySQL table locks.

Say I want to lock two tables. I execute this command:

```
LOCK TABLES table1 WRITE, table2 WRITE 
```

And then I checked if the tables have indeed been locked by executing:

```
SHOW OPEN TABLES IN mydatabase WHERE In_use > 0 
```

I have noticed tho that if I run two lock commands sequentitally for example:

```
LOCK TABLES table1 WRITE
LOCK TABLES table2 WRITE 
```

And then check which tables are locked using the same command only table2 is marked as locked. Why is this so?

Thanks

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T16:24:44.153

[LOCK TABLES](http://dev.mysql.com/doc/refman/5.0/en/lock-tables-and-transactions.html)不是事务安全的，它会在尝试锁定表之前隐式提交任何活动事务。

所以，在第一种情况下，你有一个事务持有 2 个表被锁定，在第二个只有一个，因为`LOCK TABLES table1 WRITE`已经提交

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T23:09:57.587

锁定表会先解锁当前会话锁定的所有表，然后再执行指定的锁定。所以锁定表 2 的调用是解锁表 1。

# android - org.json.simple.JSONObject cannot be cast to org.json.JSONObject

> ID：14772764
> 
> 赞同：13
> 
> 时间：2013-02-08T12:37:29.353
> 
> 标签：android, json

When I run the following code...

```
 JSONObject jsonObject = null;
  JSONParser parser=new JSONParser(); // this needs the "json-simple" library

  try 
  {
        Object obj = parser.parse(responseBody);
        jsonObject=(JSONObject)obj;
  }
  catch(Exception ex)
  {
        Log.v("TEST","Exception1: " + ex.getMessage());
  } 
```

...at runtime I see the following in my log output:

```
Exception1: org.json.simple.JSONObject cannot be cast to org.json.JSONObject 
```

I don't understand why.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-08T12:40:55.957

您导入了错误的类。改变

```
import org.json.JSONObject; 
```

至

```
import org.json.simple.JSONObject; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T12:43:01.580

将您的代码更改为：

```
 org.json.simple.JSONObject jsonObject = null;
  JSONParser parser=new JSONParser(); // this needs the "json-simple" library

  try 
  {
        Object obj = parser.parse(responseBody);
        jsonObject=(org.json.simple.JSONObject)obj;
  }
  catch(Exception ex)
  {
        Log.v("TEST","Exception1: " + ex.getMessage());
  } 
```

或者，如果您仅使用`org.json.simple`库来解析 json 字符串，则只需导入`org.json.simple.*` 而不是`org.json.JSONObject`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T08:18:13.480

如果你想使用 an`org.json.JSONObject`你可以通过替换它来做到这一点：

```
JSONObject jsonObject = null;
JSONParser parser=new JSONParser(); // this needs the "json-simple" library

try 
{
    Object obj = parser.parse(responseBody);
    jsonObject=(JSONObject)obj;
}
catch(Exception ex)
{
    Log.v("TEST","Exception1: " + ex.getMessage());
} 
```

和：

```
JSONObject jsonObject = null;
JSONParser parser=new JSONParser(); // this needs the "json-simple" library

try 
{
    String obj = parser.parse(responseBody).toString(); //converting Object to String
    jsonObject = new JSONObject(obj); // org.json.JSONObject constructor accepts String as an argument
}
catch(Exception ex)
{
    Log.v("TEST","Exception1: " + ex.getMessage());
} 
```

# sql - 在 LEFT OUTER JOIN 中使用存储过程返回 SETOF 记录

> ID：14772774
> 
> 赞同：8
> 
> 时间：2013-02-08T12:37:55.770
> 
> 标签：sql, postgresql, stored-procedures, left-join, lateral

我正在尝试在左外连接中调用存储过程传递参数，如下所示：

```
select i.name,sp.*
from items i
left join compute_prices(i.id,current_date) as sp(price numeric(15,2), 
          discount numeric(5,2), taxes numeric(5,2)) on 1=1
where i.type = 404; 
```

`compute_prices()`返回一组记录。
这是 postgres 显示的消息：

> 错误：对表“i”的 FROM 子句条目的引用无效
> 
> ...左加入 compute_prices( ***i.id*** ,current_date)...
> 
> 提示：表“i”有一个条目，但不能从这部分查询中引用它。

这种查询在 Firebird 中有效。有没有一种方法可以通过仅使用查询来使其工作？我不想创建另一个循环遍历项目并单独调用`compute_prices()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T18:53:21.663

通常，您可以使用[@Daniel 提供的简单语法扩展](https://stackoverflow.com/a/14774418/939860)**众所周知的**行类型（也称为记录类型、复杂类型、复合类型）：

```
SELECT i.name, (compute_prices(i.id, current_date)).*
FROM   items i
WHERE  i.type = 404; 
```

但是，如果你的描述是准确的......

> compute_prices sp 返回一组记录。

...我们正在处理**匿名**记录。Postgres 不知道如何扩展匿名记录，绝望地抛出一个 EXCEPTION：

```
ERROR:  a column definition list is required for functions returning "record" 
```

### PostgreSQL 9.3

Postgres 9.3 中有一个解决方案。**`LATERAL`**，正如[@a_horse 在评论](https://stackoverflow.com/questions/14772774/postgresql-using-stored-procedure-in-left-outer-join/14774418#comment20680285_14772774)中提到的那样：

```
SELECT i.name, sp.*
FROM   items i
LEFT   JOIN LATERAL compute_prices(i.id,current_date) AS sp (
                       price    numeric(15,2)
                      ,discount numeric(5,2)
                      ,taxes    numeric(5,2)
                      ) ON TRUE
WHERE i.type = 404; 
```

[手册](http://www.postgresql.org/docs/current/interactive/sql-select.html)中的详细信息。

### PostgreSQL 9.2 及更早版本

事情变得多毛。这是一种**解决方法**：编写一个包装函数，将您的匿名记录转换为众所周知的类型：

```
CREATE OR REPLACE FUNCTION compute_prices_wrapper(int, date)
  RETURNS TABLE (
            price    numeric(15,2)
           ,discount numeric(5,2)
           ,taxes    numeric(5,2)
          ) AS
$func$
    SELECT * FROM compute_prices($1, $2)
    AS t(price    numeric(15,2)
        ,discount numeric(5,2)
        ,taxes    numeric(5,2));
$func$ LANGUAGE sql; 
```

然后您可以使用@Daniel 的简单解决方案，只需放入包装函数：

```
SELECT i.name, (compute_prices_wrapper(i.id, current_date)).*
FROM   items i
WHERE  i.type = 404; 
```

### PostgreSQL 8.3 及更早版本

[PostgreSQL 8.3 刚刚达到 EOL，截至目前（2013 年 2 月）不受支持](http://www.postgresql.org/support/versioning/)。
因此，如果可能，您最好升级。但如果你不能：

```
CREATE OR REPLACE FUNCTION compute_prices_wrapper(int, date
           ,OUT price    numeric(15,2)
           ,OUT discount numeric(5,2)
           ,OUT taxes    numeric(5,2))
  RETURNS SETOF record AS
$func$
    SELECT * FROM compute_prices($1, $2)
    AS t(price    numeric(15,2)
        ,discount numeric(5,2)
        ,taxes    numeric(5,2));
$func$ LANGUAGE sql; 
```

也可以在以后的版本中使用。

**正确的解决方案**是修复您的函数`compute_prices()`以返回一个众所周知的类型。返回的函数`SETOF record`通常是 PITA。我只戳那些用五米长的杆子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:10:48.140

假设`compute_prices`函数总是返回一个包含 3 个价格的记录，你可以将它的返回类型设置为`TABLE (price numeric(15,2), discount numeric(5,2),taxes numeric(5,2))`，然后我相信你想要的可以表示为：

```
SELECT i.name, (compute_prices(i.id,current_date)).*
  FROM items i
WHERE i.type=404; 
```

请注意，在我看来，`LEFT JOIN ON 1=1`它与无约束的普通 JOIN（或 CROSS JOIN）没有什么不同，我将这个问题解释为实际上与左连接无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T18:00:27.960

我相信丹尼尔的答案也会起作用，但还没有尝试过。我确实知道我在名为 logging 的模式中有一个名为 list_failed_jobs2 的 SP，还有一个名为 Dual 的虚拟表（如在 Oracle 中），以下语句适用于我：

```
select * from Dual left join 
              (select * from logging.list_failed_jobs2()) q on 1=1; 
```

请注意，如果没有括号、相关性 (q) 或 ON 子句，SP 调用将无法工作。我的 SP 也返回一个 SETOF。

因此，我怀疑这样的事情会为你工作：

```
select i.name,sp.*
from items i
left join (select * from compute_prices(i.id,current_date)) as sp on 1=1
where i.type = 404; 
```

希望有帮助。

# actionscript-3 - 如何在 AS3 中的 Facebook 上发布视频？

> ID：14772775
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:38:02.943
> 
> 标签：actionscript-3, facebook-as3-api

我想通过 AS3 Graph API 在 Facebook 上发布视频。我做不到。我只能发布照片。是否可以使用 AS3 Graph API 发布 flv 或 youtube 链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:12:27.883

要上传视频，请检查以下代码。

如果你想让 flv 快速转换为 byteArray。阅读这篇文章：[flv 编码器炼金术](http://www.zeropointnine.com/blog/updated-flv-encoder-alchem/)

```
function uploadVideo(ba:ByteArray)
{
   var videoObj:Object=new Object();
   videoObj.title = "My Video Title";
   videoObj.description = "My Video Description";
   videoObj.fileName ="myVideo.flv"
   videoObj.video = ba;
   Facebook.uploadVideo("/me/videos",videoUploaded,videoObj);
}

function videoUploaded(response:Object,fail:Object)
{
   if(response)
   {
     trace("success");
   }
   if(fail)
   {
     trace("failed");
   }
} 
```

发布 Youtube 视频链接。

检查这个：[使用 Facebook Graph API 发布嵌入式视频链接](https://stackoverflow.com/questions/5227607/posting-an-embedded-video-link-using-the-facebook-graph-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T07:54:08.050

我也面临同样的问题。@bitmapdata.com 我想发布提要，我正在使用以下代码

```
function newsFeed ():void
        {
    var theCaption:String = user.Name+" Shared this Video ";
    var theDescription:String = user.Name+" become a star.";
    var methodInput:String = 'feed';
    var thePicture:String = "http://xyz.com/logo.png";
    var theLink:String = this.flvPath;
    var theSource:String = this.flvPath,
    var theName:String = "Star Post";

var data:Object = {
                caption:theCaption,             
                description:theDescription,
                picture:thePicture, 
            source:theSource,
                name:theName, 
                link:theLink
            };
          Facebook.ui(methodInput, data, onUICallback);
} 
```

它发布了帖子，但没有在 Facebook 上显示视频。当您单击帖子标题或图像时，它将下载您的视频。我想在用户墙上发布视频，以便朋友可以看到视频。

# css - 显示：新行上的表格单元格

> ID：14772778
> 
> 赞同：21
> 
> 时间：2013-02-08T12:38:08.563
> 
> 标签：css

这是我的意思的示例代码：

HTML

```
<ul class="table">
  <li class="table-cell"></li>
  <li class="table-cell"></li>
  <li class="table-cell"></li>
  <li class="table-cell"></li>
</ul> 
```

CSS：

```
.table {
  display: table;
}

.table-cell {
  display: table-cell;
  width: 25%;
} 
```

问：如何使第三个和第四个`<li>`（表格单元格）显示在宽度为 50% 的新行上？

问：有没有办法只使用 CSS 而不是 jQuery 或 Javascript？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T13:07:15.423

简单的答案是：你不能，至少不能用列表。显示设置为的相邻元素`table-cell`被视为属于同一行（即使未提供行元素，也会为您创建一个匿名元素）。由于列表不允许在 ul 和 li 之间包含任何其他标签，因此列表根本不可能。您必须使用不同的标记或不同的样式。

如果您不想修改标记，这里是您的选项。

列表项上的内联块：http: [//jsfiddle.net/XNq74/1/](http://jsfiddle.net/XNq74/1/)

```
li {
    display: inline-block; /* could use floats here instead */
    width: 40%;
} 
```

CSS 列将是一个合理的选择：http: [//jsfiddle.net/XNq74/](http://jsfiddle.net/XNq74/)

```
ul {
    columns: 2;
} 
```

[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

Flexbox 也可以工作，并且可以与 inline-block 结合使用：http: [//jsfiddle.net/XNq74/2/](http://jsfiddle.net/XNq74/2/)

```
ul {
    display: flex;
    flex-flow: row wrap;
}

li {
    flex: 1 1 40%;
} 
```

[http://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-08T12:47:12.547

```
ul.table li+li+li { /** your CSS code **/ } This one is for the third element

ul.table li.last { /** your CSS code **/ }   This one is for the fourth element 
```

# php - CakePHP：调试和代码完成

> ID：14772779
> 
> 赞同：0
> 
> 时间：2013-02-08T12:38:20.073
> 
> 标签：php, cakephp

有没有人找到使用 Eclipse 在 CakePHP 中实现代码完成的方法？

此外，有没有办法在 CakePHP 环境中通过模型、控制器和视图逐步调试？

我遇到了几篇文章，主要提到设置项目路径等......但我没有帮助实现代码完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:13:53.617

不了解 eclipse，但 PhpStorm 与 CakePHP 配合得很好（并且是一个*很棒的*IDE）。

您可能必须排除一些测试用例（因为它们包含重复的类定义）并在这里和那里添加 PhpDoc 以帮助完成代码。这可能也适用于大多数其他 IDE；

对于模型方法自动完成，我将其添加到我的控制器的 PhpDoc

```
/**
 * @property MyModelName   $MyModelName
 */ 
```

在您的视图、布局和元素 (.ctp) 中，在开头放置一个 PhpDoc 块，至少包含以下内容：

```
/**
 * @var View   $this
 * @var string $title_for_layout
 *
 * other viewVars can be put here
 */ 
```

这样，您的 IDE 将“理解”.ctp 文件应被视为“视图”对象

调试方面，可以考虑XDebug，不知道在Eclipse中能集成多好，但是这里有一些PhpStorm中的例子，如何设置断点等；

[http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/) [PHPStorm + XDebug 设置演练](https://stackoverflow.com/questions/9183179/phpstorm-xdebug-setup-walkthrough)

# javascript - JWS 启动：“要重新启动 Deployment Toolkit，请刷新网页”

> ID：14772780
> 
> 赞同：2
> 
> 时间：2013-02-08T12:38:22.470
> 
> 标签：javascript, jnlp, java-web-start, deployjava, java-deployment-toolkit

我正在使用 deployJava.js 和 primefaces 命令按钮来启动 java web start 应用程序。现在这可以在我自己的计算机和浏览器上完美运行，但有些用户会收到以下弹出窗口

“要重新启动部署工具包，请刷新网页”。

刷新然后再次单击按钮只会呈现相同的结果。

![在此处输入图像描述](../Images/68bcd0223dea022716bdea7d95c89ee7.png)

游戏中的相关代码：

```
<h:head>
    <script type="text/javascript" src="http://java.com/js/deployJava.js" />
</h:head>
<h:body>
    <h:form>
        <p:commandButton value="Launch" onclick="javascript:
            if (!deployJava.isWebStartInstalled(&quot;1.7.0&quot;)) {
            if (deployJava.installLatestJRE()) {
            if (deployJava.launch(&quot;myjnlp.jnlp&quot;)) {}}} else {
            if (deployJava.launch(&quot;myjnlp.jnlp&quot;)) {}}" 
        />
    </h:form>
</h:body> 
```

我意识到这个问题的一种解决方案可能是在客户端浏览器/系统上进行一些设置，如果你知道哪一个答案是受欢迎的。

但理想情况下，我希望更改代码以涵盖此用例而无需客户端解决方法。

# c++ - 在 Cascades 上创建一个带有背景图像的按钮，BB-10

> ID：14772782
> 
> 赞同：0
> 
> 时间：2013-02-08T12:38:24.683
> 
> 标签：c++, blackberry-10, blackberry-cascades

我想在 Black Berry 10 开发中使用 Cascades 创建一个按钮，它有一个图像作为背景，也可能是一个白色的文本。我找到了此类[按钮](https://developer.blackberry.com/cascades/reference/bb__cascades__button.html)，但它似乎不支持将图像设置为按钮上的背景。我能做些什么？有哪些替代方法？也许我应该考虑使用 Cascades 之外的另一个库来创建我的 UI ？？？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:29:33.670

```
 Container {
        id:account
        signal buttonClicked()
        layout: DockLayout {
        }
        preferredWidth: 768.0
        topMargin: 40.0
        bottomMargin: 40.0
        ImageButton {
            id: addButton
            defaultImageSource: "image/button_normal.png"
            pressedImageSource: "image/button_press.png"
            horizontalAlignment: HorizontalAlignment.Center
            onClicked: {
               buttonClicked();
            }
        }
        Label {
            text: "Add"
            verticalAlignment: VerticalAlignment.Center
            horizontalAlignment: HorizontalAlignment.Center
            textStyle {
                base: SystemDefaults.TextStyles.BodyText
                fontSize: FontSize.Small
                color: Color.create("#ffffff")
            }
            touchPropagationMode: TouchPropagationMode.None
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:40:43.677

您可以使用默认的 Button 类来拥有一个包含文本和图像的按钮：cascades_button.html">https://developer.blackberry.com/cascades/reference/bb_ *cascades* _button.html

不建议在按钮上使用背景图像，顶部有文本。按钮应该清晰易读。在此处查看 BlackBerry 10 UI 指南：[https ://developer.blackberry.com/devzone/files/design/bb10/UI_Guidelines_BlackBerry_10.pdf](https://developer.blackberry.com/devzone/files/design/bb10/UI_Guidelines_BlackBerry_10.pdf)

如果你真的想这样做，你总是可以在 Cascades 中构建一个自定义组件，其中包含一个顶部带有标签的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:12:26.497

我遇到了同样的问题。

最后，正如 PBernhardt 所说，我创建了一个带有 ImageView 或背景图像的自定义 Container，并在里面添加了一个 Label。
然后，我重写了 onTouch 以捕捉不同的触摸状态（event.isDown()、event.isMove()、event.isUp()）并相应地更新按钮图形（文本颜色和背景图像）。

我正在使用 Q_INVOKABLE 方法绑定我的 C++ 文件。

# cocoa-touch - 我们可以在 UITableview 中为 Section 设置 backgroundImage 吗？

> ID：14772786
> 
> 赞同：4
> 
> 时间：2013-02-08T12:38:54.527
> 
> 标签：cocoa-touch, uitableview

![在此处输入图像描述](../Images/9fbba4ec5d3746d7a32f63c67356aa2b.png)我们可以为`UITableView`Section设置背景图像吗`UITableViewCell` `backGroundView`？根据我的研究，这是不可能的，我们需要自定义行的部分。
甘蔗除此之外我们还能够得到更好的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-14T13:48:00.687

如果有人仍然感兴趣，实际上有一个非常直接的解决方案。UITableView 将使用选择器 rectForSection 告诉您每个部分的框架：

为每个部分添加背景图像将如下所示（在视图控制器中的某处）：

```
 for(int i = 0;i < [self numberOfSectionsInTableView:self.tableView]; i++) {
        UIImage *img = [[UIImage imageNamed:@"background"] resizableImageWithCapInsets:UIEdgeInsetsMake(30.0, 30.0, 40.0, 40.0) ]; //In this example the image is stretchable
        UIView *borderView = [[UIImageView alloc] initWithImage:img];
        CGRect section_rect = [self.tableView rectForSection:i];
        borderView.frame = section_rect;
        [self.tableView addSubview:borderView];
    } 
```

请记住，如果您在 tableview 中重新加载数据，您也必须重做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:17:13.683

是的，我正在按照以下方式执行此操作，我认为它也适用于您，....

```
 -(void)addBackgroundViewForSectionIndex:(int)tagIndex {

           for (UIView * subview in tableView.subviews) {
             if(subview.tag == tagIndex)
               [subview removeFromSuperview];
           }

          CGRect sectionFrame = [tableView rectForSection:tagIndex];
          UIImageView *newView = [[UIImageView alloc]initWithFrame:sectionFrame];
          newView.tag = tagIndex;
          [newView setImage:[UIImage imageNamed:@"image.PNG"]];
          [tableView addSubview:newView];
          [tableView sendSubviewToBack:newView];

        }

      // Customize the appearance of table view cells.

       - (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:      (NSIndexPath *)indexPath {

           static NSString *CellIdentifier = @"Cell";

         UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:CellIdentifier];
          if (cell == nil) {
                  cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
                           }

                 cell.textLabel.text = [collection objectAtIndex:indexPath.row];

             [self addBackgroundViewForSectionIndex:indexPath.section];

                return cell;
             } 
```

如果有任何问题，请告诉我，... :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T14:36:24.303

不，这不可能`UITableView`按预期使用。正如其他人所建议的那样，节标题将不起作用，因为它们仅在标题可见时才可见。只要它在向上滚动时消失，背景图像就会消失。

您的两个选择是：

*   直接将`UIImageView`实例作为子视图添加到表视图。不好玩，因为您必须手动调整它们的大小和位置，这很难做到。
*   Use `UICollectionView`，它支持装饰视图（正是您要寻找的）。

该`UICollectionView`方法可能更好，但老实说，任何一种选择都需要大量工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-13T16:53:22.127

Jesper[答案](https://stackoverflow.com/a/30239067/10830091)的 Swift 5 基本实现。

```
for sectionIndex in 0..<tableView.numberOfSections {
    let backgroundView = UIView() // replace UIView with anything else you want, whether it was UIImage, nibView, etc...
    backgroundView.frame = tableView.rect(forSection: sectionIndex)
    tableView.addSubview(backgroundView)
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T12:47:07.957

您可以为 TableView 的部分设置背景。

看看委托方法如下：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
    UIImageView *bgImgView = [[[UIImageView alloc] initWithFrame:CGRectMake(0.0,0.0,tableView.bounds.size.width,40.0)] autorelease];
    bgImgView.image = [UIImage imageNamed:@"yourimage.jpg"];

    return bgImgView;
} 
```

希望这对您有所帮助。

干杯!

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-13T14:15:52.147

```
table= [[UITableView alloc] initWithFrame:CGRectMake(7,0, 307, 124) style:UITableViewStylePlain];

[table  setSeparatorStyle:UITableViewCellSeparatorStyleNone];

UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tablebg_pt12.png"]];

imageView.frame=CGRectMake(0, 0, 307, 124);

imageView.image= [UIImage  imageNamed:@"tablebg_pt12.png" ];

    table.backgroundView = imageView;
    [imageView release];

    table.delegate = self;
    table.dataSource = self;

    // table.backgroundColor=[UIColor clearColor];
    [viewTable addSubview:table]; 
```

# c++ - VS2012 - 为什么主文件中的函数在 _tmain 中不可见？

> ID：14772789
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:39:01.723
> 
> 标签：c++, namespaces

我对 C++ 很陌生，我从终端应用程序开始：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    if ( argc < 1 )
    {
        printHelp();
        return 1;
    }
    return 0;
}

void printHelp()
{
    cout << "Usage:";
    cout << "vmftomap [filename]";
} 
```

但是，我在 _tmain 中收到错误“'printHelp' identifier not found”。由于该函数直接在 main 下声明，我假设这是一个命名空间问题？我已经阅读了命名空间，但我不知道在这种情况下会适用什么，因为我实际上并没有为 printHelp() 明确定义一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:41:55.740

您必须在调用它之前声明您的函数。没有必要*定义*它，但编译器必须至少在它必须解析函数调用的那一刻知道它的存在，这意味着它必须在处理翻译单元（即`.cpp`文件）期间满足它的声明：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

// Declaration
void printHelp();

int _tmain(int argc, _TCHAR* argv[])
{
    if ( argc < 1 )
    {
        printHelp();
        return 1;
    }
    return 0;
}

// Definition
void printHelp()
{
    cout << "Usage:";
    cout << "vmftomap [filename]";
} 
```

当然，您可以直接在`printHelp()`之前定义函数`main()`，从而在进行函数调用时使其对编译器可见：

```
#include "stdafx.h"
#include <iostream>

using namespace std;

// Definition
void printHelp()
{
    cout << "Usage:";
    cout << "vmftomap [filename]";
}

int _tmain(int argc, _TCHAR* argv[])
{
    if ( argc < 1 )
    {
        printHelp();
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:41:57.353

当您在 C++ 中调用函数时，在调用之前，您必须：

*   有一个函数的原型
*   有整个函数的定义

在你的情况下，你没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:41:40.530

在 C++ 中，文件是从上到下解析的。除了少数例外，必须在使用标识符之前声明它们。这意味着您必须移动`printHelp()`before的定义`_tmain()`，或者在上面添加前向声明`_tmain()`：

```
void printHelp(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:41:42.050

该函数必须在使用前定义。

将 printHelp 移到 _tmain 上方。

# c - 简单的 C 程序除数

> ID：14772793
> 
> 赞同：1
> 
> 时间：2013-02-08T12:39:07.937
> 
> 标签：c, math, division

我正在尝试这个简单的 C 程序来划分一个数字..

```
void main()
{
 int i,j,k;
 i=00126;
 j=2;
 k=i/j;
 printf("%d",k); 
} 
```

它显示输出为 43 而不是 63 .. 如果我把另一个 0 作为

```
i=000126; 
```

现在我收到错误为非法八进制数字。

如果我正在尝试

```
i=00000001000; 
```

它没有显示任何错误并给出 256 的结果。我无法理解这个意外的输出。谁能说出它为什么会产生这样的输出？

清楚的解释将不胜感激。

编辑：如果我尝试过

```
 int i,j,k;
 i=1000;
 j=0002;
 k=i/j;
 printf("%d",k); //which gives 500 as result 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T12:41:37.857

在 C 中，以 开头的数字`0`是以 8 为底（八进制）而不是十进制。所以你的数字`0126`确实`86`是十进制的。

在这个主题上，以 开头的数字`0x`也是十六进制（以 16 为基数），例如`0x1a5`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:41:47.080

任何以 0 开头的数字文字`C`都是八进制数。

所以`(0126)`八进制=`(86)`十进制。

**编辑**

根据评论，请查看有关数字[位置符号](http://en.wikipedia.org/wiki/Positional_notation)的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:42:54.407

00126 被读取为八进制数 (64 + 2*8 + 6 = 86)。所以，43 是正确的。如果你想要一个十进制的 126，就写 126。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:41:46.810

当您为整数加上 a 前缀时，`0`它被解释为八进制（以 8 为基数）数字。所以 0126 实际上是 86。

# mysql - MySQL 复制：故障转移场景

> ID：14772801
> 
> 赞同：1
> 
> 时间：2013-02-08T12:39:40.833
> 
> 标签：mysql, replication, failover

我有以下 MySQL 实例，以及复制设置：

**S1** -----> ( **M1** <--> **M2** )，其中：

M1 - M2 是多主复制设置，

S1 - 一个复制在 Master M1 上完成的写入的从站。

现在，我正在尝试使用通道故障转移机制来增强设置，如果 M1 出现故障，S1 将从 M2 开始复制。目前，我看到的唯一方法是：

（S1机器上的M1故障检测机制），那么：

-> S1 从本地中继日志文件中获取 M1 查询的最新时间戳。

-> M2 搜索（使用 mysqlbinlog 实用程序的 bash 脚本）本地**binlog 文件**+对应于 S1 最新时间戳的**binlog 索引**

-> S1终于可以做“STOP SLAVE”、“CHANGE MASTER TO master_host=M2...master_log_file=...master_log_pos=...”等命令继续复制，但这次是从M2

有没有更好的（更不容易出错）的方法来做到这一点？

谢谢

**编辑**`Xid`：如今，由于可公开访问的 MySQL 集群解决方案常用的独特的 binlog 查询标签，这更容易实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:02:39.780

有一种更简单的方法来检索所需的二进制日志和位置。

仅使用 M2 所知道的当前 binlog 和位置是否更有意义？您需要检查 M2 上的 Slave 状态。

# 例子

```
mysql> show slave status\G
*************************** 1\. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 10.64.51.130
                  Master_User: replicant
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000463
          Read_Master_Log_Pos: 453865699
               Relay_Log_File: relay-bin.001226
                Relay_Log_Pos: 453865845
        Relay_Master_Log_File: mysql-bin.000463
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB:
          Replicate_Ignore_DB: search_cache
           Replicate_Do_Table:
       Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                   Last_Errno: 0
                   Last_Error:
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 453865699
              Relay_Log_Space: 453866038
              Until_Condition: None
               Until_Log_File:
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File:
           Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
               Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
               Last_SQL_Errno: 0
               Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
             Master_Server_Id: 106451130
1 row in set (0.00 sec)

mysql> 
```

对于此显示，有五个关键组件：

*   Master_Log_File（第 6 行）：上次读取位置的 Master 上的日志文件
*   Read_Master_Log_Pos（第 7 行）：从主站读取的从站的最后位置
*   Relay_Master_Log_File（第 10 行）：最后执行位置的 Master 上的日志文件
*   Exec_Master_Log_Pos（第 22 行）：从主机上执行的最后一个位置
*   Relay_Log_Space（第 23 行）：所有中继日志的字节总和

# `Relay_Log_Space`

请注意`Relay_Log_Space`。一旦这个数字停止增加，从 Master 导入的每条 SQL 语句都已被读取。不幸的是，由于突然的故障转移，最后一个中继日志可能已损坏或不完整。

# `Replication Coordinates`

另请注意复制坐标`(Relay_Master_Log_File, Exec_Master_Log_Pos)`。这是您正在寻找的职位。但是，就像`Relay_Log_Space`它可能仍在增加一样。事实上，那些 Replication Coordinates 应该等于其他 Replication Coordinates `(Master_Log_File,Read_Master_Log_Pos )`。那时你就知道一切都被赶上了。如果这对复制坐标永远不会相遇，那么你应该多依赖`Relay_Log_Space`一点它何时停止增加。

# 怎么样`Seconds_Behind_Master`？

你不能使用的原因`Seconds_Behind_Master`很简单。一旦 Master 陷入困境，只需要一个 Replication 线程（`Slave_IO_Running`或`Slave_SQL_Running`）即可变为`No`并`Seconds_Behind_Master`转`NULL`。

# java - 将一个日历实例分配给另一个的问题

> ID：14772804
> 
> 赞同：4
> 
> 时间：2013-02-08T12:39:48.440
> 
> 标签：java, android, calendar

我有两个日历实例变量，一个全局声明，另一个在本地声明。现在假设我将一个日历实例分配给另一个像

```
Calendar m_CalGlobally = Calendar.getInstance();

Calendar calLocally = m_CalGlobally; 
```

现在我的问题是，如果我对 calLocally 变量进行任何更改，相同的更改会出现在 m_CalGlobally 实例变量中，为什么会发生这种情况，以及分配它的方法是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T12:50:03.690

这绝对行不通。这样做

```
 Calendar m_CalGlobally = Calendar.getInstance();

 Calendar calLocally = (Calendar)m_CalGlobally.clone(); // Proper way to assign this.
//This will give you calender with same properties and also the changes of it wont be reflected on m_CalGlobally because assigning with equal operator make them point to same reference. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:41:48.870

那是因为`m_CalGlobally` 和`calLocally`都是对相同（相同）对象的引用。要让它们独立，您需要创建另一个日历实例。`Calendar calLocally = m_CalGlobally;`假设您在第 2 行 ( )中有错字

# c++ - 如何将生成的字符串存储在 C++ 中的向量中？

> ID：14772812
> 
> 赞同：1
> 
> 时间：2013-02-08T12:40:13.580
> 
> 标签：c++, string, vector

我仍在从 Java 迁移到 C++，并且正在为字符串而苦苦挣扎。我需要生成一些字符串并将它们存储在某个地方，以便在创建它们的对象被销毁后它们可供我的程序使用。我尝试将它们存储在字符串向量中，但我得到了**Segmentation Fault-double free**。我正在做的一个基本版本，它重现了这个问题：

```
#include <string>
#include <sstream>
#include <iostream>
#include <vector>

std::string makeString(){
    std::stringstream s;
    s << "Test string";
    return s.str();
}

int main(){
    std::vector<std::string> storage;
    storage.reserve(1);
    storage[0] = makeString();
    return 0;
} 
```

调试器在行中标记错误：

```
storage[0] = makeString(); 
```

我将非常感谢这里发生的事情以及如何避免它的见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T12:42:23.647

`vector.reserve`不会改变向量的大小。您将不得不使用`resize`而不是`reserve`. 另一种选择是使用`push_back()`：

```
 storage.push_back(makeString()); 
```

# c# - C++/CLI 抽象基类？

> ID：14772818
> 
> 赞同：1
> 
> 时间：2013-02-08T12:40:22.850
> 
> 标签：c#, c++-cli, managed-c++

我正在尝试编写一个混合程序集。这是一个片段：

```
public ref class OpusStream
: public Stream
{
protected:
    OpusStream(void);

public:
    ~OpusStream(void);
    !OpusStream(void);
    int TestEncode(void);

    /* System::IO::Stream */
    virtual property bool CanRead { bool get(void) override; }
    virtual property bool CanSeek { bool get(void) override; }
    virtual property bool CanWrite { bool get(void) override; }
    virtual property __int64 Length { __int64 get(void) override; }
    virtual property __int64 Position {
        __int64 get(void) override;
        void set(__int64) override;
    }
    virtual void Flush(void) override;
    int Read(Byte[], int, int) override;
    long Seek(long, System::IO::SeekOrigin) override;
    void SetLength(long) override;
    void Write(Byte[], int, int) override;
}; 
```

这是编译器错误：

> 错误 11 无法创建抽象类或接口“OpusNet.OpusStream”的实例 C:\Users\benc\Documents\opus-1.1-alpha\OpusTests\MainWindow.xaml.cs 30 21 OpusTests

自从我完成 C++/CLI 以来已经有一段时间了。我真的不确定我在这里错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:30:07.433

`Read`和覆盖使用了错误的`Write`类型（根据 C#）`byte[]`。

`override`要让覆盖实际覆盖流上的方法，您需要使用正确的类型，在编译器告诉我我在 System.IO.Stream 上隐藏了一个方法之前，我以一种迂回的方式发现了这种类型：

所以;

```
typedef array<Byte>^ ByteArray; 
```

然后;

```
virtual __int32 Read(ByteArray, __int32, __int32) override; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T17:04:44.050

问题在于这些属性定义：

```
virtual property bool CanRead { bool get(void) sealed new; }
virtual property bool CanSeek { bool get(void) sealed new; } 
```

通过将其声明为`new`，您不会覆盖基类上的抽象成员！相反，您在类中声明了一个新成员，与基类的抽象成员同名，但不覆盖抽象成员。

将此切换为实际覆盖该成员，您会没事的。

```
virtual property bool CanRead { bool get(void) sealed override; }
virtual property bool CanSeek { bool get(void) sealed override; }
                                                      ^^^^^^^^ 
```

# sql - 在单个存储过程中从具有两个不同员工 ID 的单个表中选择两个员工姓名

> ID：14772819
> 
> 赞同：0
> 
> 时间：2013-02-08T12:40:32.643
> 
> 标签：sql

我试图从一天开始解决以下查询，但我没有得到输出..

查询是：

```
select distinct L.LeadBudget,L.CompanyName,L.LeadTitle,L.Status,
E.Name as OwnerName,E.Name as 
CreatedUser
 from Leads L,Employee E where L.LeadId='2' 
 and E.EmployeeId=L.LeadOwner and E.EmployeeId=L.CreatedUserId 
```

在上面的查询中我想得到

```
E.Name as OwnerName and E.Name as CreatedUser 
from a single Employee tables)..where E.EmployeeId=L.LeadOwner and 
E.EmployeeId=L.CreatedUserId 
```

如果我在没有 OwnerName 或 Created User 的情况下执行，我将获取数据..但我想同时获取这两个名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:54:20.313

我建议使用更现代的 JOIN 风格；而不是列出多个表并在 WHERE 中做所有事情。基本上要实现您想要做的事情，您需要为两名员工执行 JOIN。

```
SELECT l.LeadBudget, l.CompanyName, l.LeadTitle, l.Status, leadEmp.Name As OwnerName, createdEmp.Name As CreatedUser
FROM Leads l
     INNER JOIN Employee leadEmp ON(l.LeadOwner = leadEmp.EmployeeId)
     INNER JOIN Employee createdEmp ON(l.CreatedUserId= createdEmp.EmployeeId)
WHERE l.LeadId='2' 
```

# jquery-mobile - jquery mobile：在jqm选择菜单上以编程方式触发事件的正确方法是什么

> ID：14772820
> 
> 赞同：1
> 
> 时间：2013-02-08T12:40:44.093
> 
> 标签：jquery-mobile, jquery

**编辑 A：**这不是一个 jquery 问题，而是一个**jquery Mobile**问题。

**编辑B：**我更改了标题...最初我询问如何专门触发“点击”事件，但如果您想重新创建jqm：选择菜单选项，显然“点击”事件不是正确的事件。

如何以编程方式在 jquery 移动选择菜单上触发事件？

```
<select id       = 'my_select'   
        name     = 'my_select'   
        onchange = 'gf_handle_change( this.value );' >
  <option id = 'option_A'  value = 'A'> A </option>
  <option id = 'option_B'  value = 'B'> B </option>
</select>

<script>
  function gf_fire_event( args_val )
    { alert( 'test : ' + jQuery( '#option_' + args_val ) ) ; 
      jQuery( '#option_' + args_val ).trigger( 'click' ) ;
    }
  function gf_handle_change( args_val )
    { alert( args_val )  ;
    }
  gf_fire_event( 'A' ) ;
</script> 
```

这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:46:25.773

这是一个例子：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $("#test-button").on( "click", function(event, ui) {
      $('#my_select option#option_B').trigger('click');    
    });

    $("#my_select option").each(function(){
        $(this).on( "click", function(event, ui) {
          $(this).attr('selected' , true);
          $('#my_select').selectmenu('refresh');                
        });         
    });    
}); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/RZ68b/](http://jsfiddle.net/Gajotres/RZ68b/)

还有一件事，不要将 onclick="... 或 onchange="... 与 jQuery Mobile 一起使用，这可能会导致事件触发出现问题。始终以编程方式绑定您的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:58:48.873

那会做到的

```
function gf_fire_event( args_val )
{
    //Select an option
    $('#my_select option[value=' + args_val +']').attr("selected", "selected");
    //Refresh jQM select menu
    $('#my_select').selectmenu('refresh');
    //Trigger change event
    $('#my_select').trigger('change');
} 
```

见工作[jsFiddle](http://jsfiddle.net/pmatseykanets/Qhswt/)

# jquery - Ajax/Json 结果返回但不显示

> ID：14772823
> 
> 赞同：0
> 
> 时间：2013-02-08T12:40:50.357
> 
> 标签：jquery, ajax, json

我有以下 JQuery AJAX 调用。当输出变量被警告时，一切看起来都很好，但我无法成功显示单个元素。谁能明白为什么？

**查询**

```
$('#test_load').click (function () {
    //ajax callbacks
    $.get('js/request.php?p=template&t=<?php  echo $_SESSION['user']['ajax_token']; ?>&a=content|content', function (output){
        //alert (output);
        if (output.error) {$('#test_content').html(output.error);} else {$('#test_content').html(output.result);} 
    });
return false;
}); 
```

**HTML**

```
<div class="one_col">

<div id="test_content">
<?php //print_r($output['r']); ?>
</div>
<a href="#" id="test_load">Test pattern</a>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:43:03.083

问题是您没有指定要接收的数据类型，试试这个：

```
$('#test_load').click (function () {
    $.get('js/request.php?p=template&t=<?php  echo $_SESSION['user']['ajax_token']; ?>&a=content|content', function (output){
        if (output.error) {$('#test_content').html(output.error);} else {$('#test_content').html(output.result);} 
    }, "json");
return false;
}); 
```

注意`"json"`函数末尾的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:44:38.423

`dataType`用作`json` 参考[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/) _

```
 $('#test_load').click (function () {
    //ajax callbacks
    $.get('js/request.php?p=template&t=<?php  echo $_SESSION['user']['ajax_token']; ?>&a=content|content', function (output){
        //alert (output);
        if (output.error) {$('#test_content').html(output.error);} else {$('#test_content').html(output.result);} 
    },'json');
return false;
}); 
```

# c# - 如何对 WebGrid 中的多个列进行排序？

> ID：14772826
> 
> 赞同：2
> 
> 时间：2013-02-08T12:40:56.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, webgrid

我`WebGrid`在我的 ASP.NET MVC 3 (C#) 应用程序中使用。我想对多列进行排序（就像我们可以在 tablesorter 中做的那样）。

有可能`WebGrid`吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:17:28.020

当你写这样的东西时，通常默认启用排序。

```
var myGrid = new WebGrid(Model);
myGrid.GetHtml(); 
```

[细节：](http://www.elylucas.net/post/Using-a-grid-that-can-sort-page-and-filter-in-AspNet-MVC3e28093Part-1e28093Using-the-WebGrid-WebHelper.aspx)

# jquery-ui - jquery中的对话框不起作用

> ID：14772830
> 
> 赞同：0
> 
> 时间：2013-02-08T12:41:09.967
> 
> 标签：jquery-ui, jquery, jquery-plugins

我已经编写了这段代码，但它不起作用。

```
$("#dialog-confirm").text("Do you want to submit the new vendor for approval?");
    $( "#dialog-confirm" ).dialog({
        resizable: true,
        title:"Submit",
        height:170,
        zIndex:99999,
        modal: true,
        position: "center", 
        buttons: {
            "Yes": function() {
            $( this ).dialog( "close" );            
            return false;
            },

            "No": function() {
                $( this ).dialog( "close" );

            return false;
        }
        }
    }); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:07:58.993

我必须使用答案，因为我还没有评论权限。你的代码看起来不错，如果你把它放到 jsfiddle 中它实际上可以工作（至少在 chrome 中）。您是否缺少对 jquery 或 jquery-ui 库的引用？

# internet-explorer - 为什么对于同一个请求，Firefox 的请求标头与 IE 不同？

> ID：14772831
> 
> 赞同：0
> 
> 时间：2013-02-08T12:41:17.697
> 
> 标签：internet-explorer, http, firefox, httprequest, request-headers

我不明白为什么具有相同请求的同一个网页会为 Firefox 和 Internet Explorer 创建不同的请求标头。

例如，IE 有一些授权信息，而 FF 在我看来它缺少这些信息。

导致不同浏览器的不同请求标头的主要原因是什么？（我认为这会给我一个线索，为什么我的 WCF 服务调用对 FF 失败但在 IE 中有效）

***对于火狐***

```
OPTIONS http://.....
Host: foo.bar.uk
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: null
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache 
```

***对于 Internet Explorer***

```
POST  http://.....
Accept: */*
Accept-Language: en-us
Content-Type: application/json
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET4.0C; .NET4.0E; InfoPath.3; .NET CLR 3.5.30729; .NET CLR 3.0.30729)
Host: foo.bar.uk
Content-Length: 19...
Connection: Keep-Alive
Pragma: no-cache
Authorization: Basic xyxzyxyxzyxyzyxz

{"Foo":"bar","KungFoo":"Judo",...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:35:54.643

您的 Firefox 版本似乎支持 CORS ( [http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/) )，而您的 IE 版本不支持。

# c# - 从 linq 查询填充 highchart 图

> ID：14772833
> 
> 赞同：1
> 
> 时间：2013-02-08T12:41:26.560
> 
> 标签：c#, asp.net-mvc, linq, highcharts

我正在尝试用我的数据库中的数据填充图表。我正在使用实体框架，并且对 asp.net 来说相当新。

我想要做的是从我的 linq 查询中填充图表。

```
 var totals = from s in db.ClassInstanceDetails.Include("ClassInstance")
                 where s.ClassInstance.ClassID == 2
                    group s by s.ClassInstance.Date into grouped
                    select new
                    {
                        CIDate = grouped.Key,
                        TotalStudentsInClass = grouped.Count(s => s.Attendance)
                    }; 
```

linq 查询工作正常，它计算一个类实例中的所有学生，对它们进行分组并计算它们。我的问题是如何提取数据并将其放入图表中。当我调试时，我可以看到 totals 变量是

```
{System.Data.Objects.ObjectQuery<<>f__AnonymousType0<System.DateTime,int>>} 
```

我可以看到总计持有的结果视图为：

```
{CIDate = {04/09/2012}, TotalStudentsInClass = 5}
{CIDate = {05/09/2012}, TotalStudentsInClass = 7}
{CIDate = {06/09/2012}, TotalStudentsInClass = 14} 
```

查询很有效，它可以找到有多少学生参加了特定的班级实例。我正在尝试使用 highcharts 将这些数据放入折线图中。我试图将 linq 结果分成 2 个数组，一个数组包含日期，另一个数组包含 TotalStudentsInClass 值，但由于类型不同而没有运气？？？这甚至是正确的方法吗？

我在网上找到的示例来自我认为的数组

```
.SetSeries(new[]
                       {
                           new Series { Name = "Tokyo", Data = new Data(ChartsData.TokioData) },
                           new Series { Name = "New York", Data = new Data(ChartsData.NewYorkData) },
                           new Series { Name = "Berlin", Data = new Data(ChartsData.BerlinData) },
                           new Series { Name = "London", Data = new Data(ChartsData.LondonData) }
                       } 
```

数据来自一个对象，

```
public static object[] TokioData = new object[] { 7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6 }; 
```

我试图将我的 linq 查询运行到一个对象中，但这给我带来的错误比我知道的要多！

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:30:04.383

图表

```
public static Highcharts TimeSeriesZoomable(Series[] Series, Number MinRange, Number PointInterval, DateTime PointStartDate, AxisTypes XAxisType = AxisTypes.Datetime, string Title = "", string SubTitle = "", string XAxisTitle = "", string YAxisTitle = "", string ToolTipFormat = "", string YAxisLabel = "")
    {
        Highcharts chart = new Highcharts("chart")
            .SetOptions(new GlobalOptions { Global = new Global { UseUTC = false } })
            .InitChart(new Chart { ZoomType = ZoomTypes.X, SpacingRight = 20, DefaultSeriesType = ChartTypes.Area, Height = 300, BorderRadius = 0 })
            .SetTitle(new Title { Text = Title })
            .SetSubtitle(new Subtitle { Text = SubTitle })
            .SetXAxis(new XAxis
            {
                Type = XAxisType,
                MinRange = MinRange,
                Title = new XAxisTitle { Text = XAxisTitle }
            })
            .SetYAxis(new YAxis
            {
                Title = new YAxisTitle { Text = YAxisTitle },
                Min = 0.6,
                StartOnTick = false,
                EndOnTick = false,
                Labels = new YAxisLabels
                {
                    Formatter = @"function() { return this.value +' " + YAxisLabel + "';}"
                }
            })
            .SetTooltip(new Tooltip { Shared = true/*, Formatter = @"function() { return ''+ this.x +' - '+ this.y +' " + ToolTipFormat + "'; }" */})
            .SetLegend(new Legend { Enabled = true, VerticalAlign = VerticalAligns.Top })
            .SetPlotOptions(new PlotOptions
            {
                Line = new PlotOptionsLine
                {
                    LineWidth = 3,
                    Marker = new PlotOptionsLineMarker
                    {
                        Enabled = false,
                        States = new PlotOptionsLineMarkerStates
                        {
                            Hover = new PlotOptionsLineMarkerStatesHover
                            {
                                Enabled = true,
                                Radius = 5
                            }
                        }
                    },
                    Shadow = false,
                    States = new PlotOptionsLineStates { Hover = new PlotOptionsLineStatesHover { LineWidth = 3 } },
                    PointInterval = PointInterval,
                    PointStart = new PointStart(PointStartDate)
                },
                Spline = new PlotOptionsSpline
                {
                    LineWidth = 3,
                    Marker = new PlotOptionsSplineMarker
                    {
                        Enabled = false,
                        States = new PlotOptionsSplineMarkerStates
                        {
                            Hover = new PlotOptionsSplineMarkerStatesHover
                            {
                                Enabled = true,
                                Radius = 5
                            }
                        }
                    },
                    Shadow = false,
                    States = new PlotOptionsSplineStates { Hover = new PlotOptionsSplineStatesHover { LineWidth = 3 } },
                    PointInterval = PointInterval,
                    PointStart = new PointStart(PointStartDate)
                },
                Area = new PlotOptionsArea
                {
                    //FillColor = new BackColorOrGradient(new Gradient
                    //{
                    //    LinearGradient = new[] { 0, 0, 0, 300 },
                    //    Stops = new object[,] { { 0, "rgb(116, 116, 116)" }, { 1, Color.Gold } }
                    //}),
                    LineWidth = 1,
                    Marker = new PlotOptionsAreaMarker
                    {
                        Enabled = false,
                        States = new PlotOptionsAreaMarkerStates
                        {
                            Hover = new PlotOptionsAreaMarkerStatesHover
                            {
                                Enabled = true,
                                Radius = 5
                            }
                        }
                    },
                    Shadow = false,
                    States = new PlotOptionsAreaStates { Hover = new PlotOptionsAreaStatesHover { LineWidth = 1 } },
                    PointInterval = PointInterval,
                    PointStart = new PointStart(PointStartDate)
                }
            })
            .SetSeries(Series);
        return chart;
    } 
```

图表数据

```
public static Series GetTimeSeriesData(IQueryable<YourModel> model, ChartTypes ChartType)
    {
        List<Series> Series = new List<Series>();

        var chartSeries = model.GroupBy(x => x.Name)
                        .Select(g => new
                        {
                            Name = g.Key,
                            Data = g.Select(x => x.Value).ToArray()
                        }).ToArray();

        foreach (var item in chartSeries)
        {
            object[] data = item.Data.Cast<object>().ToArray();
            Series localSeries = new Series { Name = item.Name, Data = new Data(data), Type = ChartType };
            Series.Add(localSeries);
        }

        return Series;
    } 
```

用法

```
IQueryable<YourModel> model;
ChartData chartData = new ChartData();
Highcharts chart = new HighChart("chart_time_series");

try
{
    model = db.ClassInstanceDetails.AsQueryable();
    chartData = GetTimeSeriesData(model, ChartTypes.Line);
    chart = TimeSeriesZoomable(chartData.ToArray(), another_options);
}
catch (Exception e)
{
} 
```

以及完整的图表示例： http: [//dotnethighcharts.codeplex.com/releases/view/85324](http://dotnethighcharts.codeplex.com/releases/view/85324)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:06:10.670

你在使用 Highcharts.Net 吗？如果是这样，我不确定我能提供多少帮助（我只是手动完成，创建自己的对象并转换为 JSON 等，我发现这可以让我完全控制，尽管需要更多的努力）无论如何，这通常很大程度上取决于您的 X 轴需要如何表现......看起来它只是离散的日期时间值（不是自动顺序的），因此您的对象数组可能需要由 X 和 Y 值组成，而不是不仅仅是 Y 值，因为它看起来在那里。

下一部分真的取决于你的实现是如何工作的，所以请原谅伪伪代码......你要么需要一个二维数组：例如：data = [[1,1], [2,5], [3, 4]...]

或更具体的东西：我使用一个具有 X 和 Y 属性的类（除其他外），但您也许可以尝试匿名类型？例如 [{x=1, y=1}, {x=2, y=5}, {x=3, y=4}...] 等

这有帮助吗？注意：您可能想了解一下如何为您的 x 轴转换日期时间值 - 我必须从 Epoch 等计算刻度

# java - Java SHA512 digest output differs from PHP script

> ID：14772853
> 
> 赞同：3
> 
> 时间：2013-02-08T12:42:14.387
> 
> 标签：java, php, sha512

Can someone figure out why the output of these (php and java) snippets of code don't return the same SHA512 for the same input?

```
$password = 'whateverpassword';
$salt = 'ieerskzcjy20ec8wkgsk4cc8kuwgs8g';
$salted = $password.'{'.$salt.'}';
$digest = hash('sha512', $salted, true);
echo "digest: ".base64_encode($digest);
for ($i = 1; $i < 5000; $i++) {
  $digest = hash('sha512', $digest.$salted, true);
}
$encoded_pass = base64_encode($digest);
echo $encoded_pass; 
```

This is the code on the android application:

```
public String processSHA512(String pw, String salt, int rounds)
{
    try {
        md = MessageDigest.getInstance("SHA-512");
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
        throw new RuntimeException("No Such Algorithm");
    }

    String result = hashPw(pw, salt, rounds);
    System.out.println(result);
    return result;
}

private static String hashPw(String pw, String salt, int rounds) {
    byte[] bSalt;
    byte[] bPw;

    String appendedSalt = new StringBuilder().append('{').append(salt).append('}').toString();

    try {
        bSalt = appendedSalt.getBytes("ISO-8859-1");
        bPw = pw.getBytes("ISO-8859-1");
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException("Unsupported Encoding", e);
    }

    byte[] digest = run(bPw, bSalt);
    Log.d(LCAT, "first hash: " + Base64.encodeBytes(digest));
    for (int i = 1; i < rounds; i++) {
        digest = run(digest, bSalt);
    }

    return Base64.encodeBytes(digest);
}

private static byte[] run(byte[] input, byte[] salt) {
    md.update(input);
    return md.digest(salt);
} 
```

The library for base64 encoding is this: [base64lib](http://iharder.net/base64)

This java code is actually some modified code I found around another question in StackOverflow. Although the Android code is running fine it doesn't match with the output from the php script. It doesn't even match the first hash!

Note 1: On php `hash('sha512',$input, $raw_output)` returns raw binary output

Note 2: On java I tried to change the charset (UTF-8, ASCII) but it also didn't work.

Note 3: The code from the server can not be changed, so I would appreciate any answer regarding how to change my android code.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:52:35.097

The first hash should be the same on the server and in Java. But then in the loop what gets appended to the digest is `password{salt}` in the PHP code, but only `{salt}` in the Java code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T21:04:22.470

For the lazy ones, one example better than a thousand words ;). I finally understood what was happening. The method update appends bytes to the digest, so when you append $password.{$salt} is the same as doing mda.update(password bytes) and the mda.digest("{$salt}" bytes. I do that answer because I was going crazy finding why it was not working and it was all in this answer.

Thanks guys. This is the example that works in a Java Server:

```
public static String hashPassword(String password, String salt) throws Exception {
        String result = password;
        String appendedSalt = new StringBuilder().append('{').append(salt).append('}').toString();
        String appendedSalt2 = new StringBuilder().append(password).append('{').append(salt).append('}').toString();

        if(password != null) {
            //Security.addProvider(new BouncyCastleProvider());

            MessageDigest mda = MessageDigest.getInstance("SHA-512");
            byte[] pwdBytes = password.getBytes("UTF-8");
            byte[] saltBytes = appendedSalt.getBytes("UTF-8");
            byte[] saltBytes2 = appendedSalt2.getBytes("UTF-8");
            byte[] digesta = encode(mda, pwdBytes, saltBytes);

            //result = new String(digesta);
           System.out.println("first hash: " + new String(Base64.encode(digesta),"UTF-8"));
                for (int i = 1; i < ROUNDS; i++) {

                    digesta = encode(mda, digesta, saltBytes2);
                }
                System.out.println("last hash: " + new String(Base64.encode(digesta),"UTF-8"));

                result = new String(Base64.encode(digesta));
        }
        return result;
    }

private static byte[] encode(MessageDigest mda, byte[] pwdBytes,
            byte[] saltBytes) {
        mda.update(pwdBytes);
        byte [] digesta = mda.digest(saltBytes);
        return digesta;
    } 
```

# java - 使用枚举泛型制作代码

> ID：14772855
> 
> 赞同：1
> 
> 时间：2013-02-08T12:42:16.633
> 
> 标签：java, enums

我有一个代码，最初是为一个团队设计的，他们将枚举 [存储任务列表] 传递给 api。然后，此 api 将此枚举的使用传播到许多其他类。

现在我有一个任务需要多个团队使用此代码，他们可以以枚举的形式传递自己的一组任务。

鉴于当前的实现，我认为支持多个团队彻底检查代码是不可行的，因为枚举不能扩展其他枚举。

有没有什么方法可以在不进行大量更改的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:24:51.193

但是...枚举可以*实现*接口，例如：

```
public interface Task {
    int getPriority(); // just for example
    // plus whatever methods define a task
}

public enum Team1Task implements Task {
    Task1(1),
    Task2(3);
    private final int priority;
    private Team1Task(int priority) {
        this.priority = priority;
    }
    public int getPriority() {
        return priority;
    }
} 
```

现在我们可以使用 java generic kung fu 来指定一个绑定到合适枚举的泛型参数：

```
public class TaskProcessor<T extends Enum<T> & Task> {
    public void process(T task) {
        // do something with task
    }
} 
```

要使用它：

```
TaskProcessor<Team1Task> p = new TaskProcessor<Team1Task>();
p.process(Team1Task.Open); // will only accept a Team1Task instance 
```

* * *

仅供参考，出于对泛型的好奇，您也可以使用此绑定来实现相同的目的：

```
public class TaskProcessor<T extends Enum<? extends Task>> { 
```

虽然我在效果上没有发现实际差异，但我发现它缺乏上面交叉绑定的清晰和熟悉的模式。有关这方面的更多信息，请参阅[此问题](https://stackoverflow.com/questions/14122783/is-there-a-difference-between-these-generic-bounds)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:10:18.870

围绕枚举进行大部分工作相对容易。

这是一个严重削减的例子。它定义了一个通用数据库`Table`类，该类将 a`enum Column`作为其定义类型。定义表中的`enum`列。定义类型是一个`enum`也实现了一个非常有用的技巧的接口。

```
public class Table<Column extends Enum<Column> & Table.Columns> {
  // Name of the table.
  protected final String tableName;
  // All of the columns in the table. This is actually an EnumSet so very efficient.
  protected final Set<Column> columns;

  /**
   * The base interface for all Column enums.
   */
  public interface Columns {
    // What type does it have in the database?
    public Type getType();
  }

  // Small list of database types.
  public enum Type {
    String, Number, Date;
  }

  public Table(String tableName,
               Set<Column> columns) {
    this.tableName = tableName;
    this.columns = columns;
  }

} 
```

您现在可以使用以下内容创建您的真实表格：

```
public class VersionTable extends Table<VersionTable.Column> {

  public enum Column implements Table.Columns {
    Version(Table.Type.String),
    ReleaseDate(Table.Type.Date);

    final Table.Type type;

    Column(Table.Type type) {
      this.type = type;
    }

    @Override
    public Type getType() {
      return type;
    }
  }

  public VersionTable() {
    super("Versions", EnumSet.allOf(Column.class));
  }
} 
```

请注意，这是一个真正微不足道的示例，但只需进行少量工作，就可以轻松地将大量`enum`工作移至父类中。

这种技术确实保留了您在使用泛型时获得的类型安全检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:26:26.037

枚举可以实现接口。我建议为该任务提供一个合理的界面。让您的枚举实现接口，您的代码将继续正常工作。其他团队可以使用他们想要的任何接口实现（他们自己的枚举或其他东西）。（注意，没有代码很难做出非常明确的建议）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:52:47.683

您可能不应该为此使用枚举，但如果您愿意，您可以在帮助类或相互扩展的一组类中实现逻辑，并使枚举成为围绕它的薄包装器：

```
public enum MyTaskEnum {
    A, B, C;

    private final TaskEnumHelper helper = new TaskEnumHelper();

    public void foo (int x, int y)
    {
        helper.foo (x, y);
    }
} 
```

# profile - 字段返回空字符串

> ID：14772861
> 
> 赞同：0
> 
> 时间：2013-02-08T12:42:24.670
> 
> 标签：profile, lotus, lotusscript

我使用以下代码创建了一个新的配置文件：

```
Set doc = db.Createdocument()
doc.Form = "SMBPrivateProfile"
Call doc.Computewithform(True,True)
Call doc.Save(True, False) 
```

但是每当我想读取一个字段时，`@GetProfileField`我都会得到一个空字符串，即使我要读取的字段具有默认值。手动打开并保存文档后，一切正常。

* * *

更多细节：
我改进了一个应用程序并点击了`Application --> Replace Design...`. 新版本在配置文件中包含一个新字段。当读取这些新字段之一时，结果是一个空字符串。在同一文档中读取“旧”字段时，结果是预期的字符串。

例如：

```
MessageBox([OK];"Title"; @GetProfileField("SMBPrivateProfile"; "OLD_FIELD"; @ThisName)) 
```

--> 将导致：“这是一个花哨的旧默认值”

```
MessageBox([OK];"Title"; @GetProfileField("SMBPrivateProfile"; "NEW_FIELD"; @ThisName)) 
```

--> 将导致：“”（而不是“这是一个花哨的新默认值”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:47:28.810

那不是个人资料文件。要创建配置文件，请使用：

```
db.GetProfileDocument("SMBPrivateProfile"); 
```

除了配置文件名称之外，您还可以为唯一键添加第二个参数。

还要考虑您是否真的想使用配置文件。它们被大量缓存并且在任何视图中都不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:27:07.227

如果我没看错，您似乎已经更新了一个表单并添加了一个带有默认值公式的新字段。然后，您正在阅读现有文档。执行此操作时，您添加到表单的新字段尚不存在。除非您采取措施强制应用新字段和公式，否则它们不会应用于现有文档。

如果它是一个常规文档（如您的原始代码所示），您可以在 Notes 客户端中打开该文档，编辑并重新保存它。这将创建 NEW_FIELD 并赋予其价值。如果这些文档很多，您可以编写一个简单的公式代理来通过`@Command([ToolsRefreshAllDocs])`或来执行此操作`@Command( [ToolsRefreshSelectedDocs])`。

如果它是一个配置文件（根据@Panu 的分析器的响应链），那么在您进行替换设计之后，您将必须编写一个代理来使用`db.getProfileDocument`use doc.ReplaceItemValue("NEW_FIELD";"new价值”）。

# php - 由于 Windows 防火墙，xdebug 超时

> ID：14772863
> 
> 赞同：0
> 
> 时间：2013-02-08T12:42:41.243
> 
> 标签：php, windows, xdebug, windows-firewall

当 Windows 客户端尝试在此服务器上打开网站时，我们在开发服务器上运行 xdebug 时遇到问题。服务器向客户端发送一个 xdebug 请求，如果没有客户端应用程序（例如 phpstorm）在 xdebug 端口上侦听，该请求似乎会卡在 windows 防火墙中。这会导致尝试从开发服务器打开网站的浏览器超时。

问题似乎是 Windows 防火墙的隐身模式无法禁用，并且不会将 ICMP Port Unreachable 发送回调试服务器。

迄今为止发现的唯一解决方案是完全为内部域关闭防火墙。

有没有机会摆脱这种行为，而不必在网络中的任何 Windows 客户端上安装特殊软件来尝试在开发服务器上打开网站？

以下选项之一对我们来说是一个很好的解决方案 - 但我们不知道如何实现它：

*   对子域进行特殊的 php / xdebug 配置
*   更改 xdebug 端口上 Windows 防火墙的行为

由于某种原因，以下选项被丢弃：

*   在每个 Windows 客户端上安装一个客户端应用程序（例如 PHPStorm）监听相应的端口。
*   完全关闭windows防火墙。
*   完全关闭 xdebug 或在每个请求上都需要特殊的请求参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:43:16.003

我正在运行 Windows 7、EasyPHP 13.1 开发服务器和 NetBeans 7.3.1。当我点击“调试”时，我的网络浏览器（chrome）只会等待一个从未出现过的页面。我通过断开与 Internet 的连接然后关闭 Windows 防火墙来确定 Windows 防火墙是问题所在。

我的解决方案是允许更多程序通过防火墙。控制面板 -> 系统和安全 -> windows 防火墙 -> 允许程序或功能通过 windows 防火墙。为了安全起见，我添加了许多可执行文件，但我很确定它授予了 php 可执行文件（php.exe 和 php-win.exe）的权限。

# oop - 不同文件夹级别的tomcat中的两个log4j库

> ID：14772867
> 
> 赞同：1
> 
> 时间：2013-02-08T12:42:55.877
> 
> 标签：oop, tomcat, log4j

全部，现在我在拍摄时遇到了麻烦-为什么没有正确打印日志的问题。

tomcat/webapps里面有4个项目。

其中 3 个在 tomcat 级别的 lib 目录中使用 log4j 库，另一个在自己的项目中拥有自己的 log4j 库。

他们每个人都在他们的项目中读取他们自己的 log4j 属性。

我是项目的所有者，该项目在项目类文件夹中有自己的 log4j。

今天一个高级程序员指责我，因为我没有使用tomcat级别的log4j库，系统对它应该使用哪个库感到困惑，所以其他三个项目缺少打印日志。

这是真的吗？

如果是，为什么？因为我的 log4j 读取了我自己的属性并正确打印了我的项目信息。

提前感谢那些回答这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:11:33.970

默认的 tomcat 7 安装不提供 log4j 库。因此，如果您的项目需要此库，最好将其包含在您自己的 web 应用程序中（恕我直言）。如果您依赖于特定的 tomcat 服务器设置，则很难在不更改的情况下在另一个容器中使用 webapp。

顺便说一句，关于“使用 Log4j”的 tomcat[文档站点的声明：](http://tomcat.apache.org/tomcat-7.0-doc/logging.html#Using_Log4j)

> 注意：当您想要重新配置 Tomcat 以使用 Apache log4j 进行自己的日志记录时，需要执行本节中描述的步骤。如果您只想在自己的 Web 应用程序中使用 log4j，则不需要这些步骤。— 在这种情况下，只需将 log4j.jar 和 log4j.properties 放入 Web 应用程序的 WEB-INF/lib 和 WEB-INF/classes 中。

我简短地说-我认为您做对了，而其他人做错了（不知道细节）。

# ruby - 如何在 HTTParty 中设置位置

> ID：14772868
> 
> 赞同：2
> 
> 时间：2013-02-08T12:43:01.153
> 
> 标签：ruby, httparty

我们有一个使用带有 HTTParty 的 URL 表来抓取页面的方法。有时，它抓取的页面实际上被重定向到该网站的德语版主页。我们的服务器位于德国，我怀疑这是原因，因为该方法在英国本地运行时运行良好。有没有什么方法可以像设置用户代理浏览器类型一样将HTTParty的浏览位置设置为英国？

```
HTTParty.get(URI::escape(link), :headers => {"User-Agent" => "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1309.0 Safari/537.17"}) 
```

# rabbitmq - 如何通过 RabbitMQ 中的自定义主题交换让 Rebus 玩得更好？

> ID：14772877
> 
> 赞同：3
> 
> 时间：2013-02-08T12:43:24.937
> 
> 标签：rabbitmq, rebus

Rebus 具有灵活的系统，允许我为不同的消息类型指定不同的端点，无论是在`web.config`自定义的`IDetermineMessageOwnership`.

据我所知，消息所有权仅由字符串表示。使用 MSMQ 传输，此字符串指向消息传递到的队列。在 RabbitMQ 中，字符串用作消息的*主题*，然后将其传递到名为“Rebus”的通用*交换器。*Rebus 是个好人，所以他还在RabbitMQ 服务器中建立了一个*队列*，使用相同的名称，并在 Rebus 交换中从主题到队列进行*绑定。*

我的问题是：是否可以让 Rebus**不**创建队列和绑定，但仍将消息传递到为每条消息设置相关主题的交换器？

手动声明队列和绑定将允许我设置一个很棒的主题交换，使用带有通配符的绑定等等。这是一个带有时髦绑定的主题交换的很好的插图，只是为了让我的问题看起来更时尚和性感：

![RabbitMQ中的话题交换图解](../Images/dcdc61ed5f5b335d1e5bf3747d5a420a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:10:22.343

听起来你想做这样的事情：

```
Configure.With(yourFavoriteContainer)
         .Transport(t => t.UseRabbitMq(...)
                          .ManageSubscriptions()) //< BAM!!1
         .(...) 
```

这让 Rebus 可以利用 Rebus`RabbitMqMessageQueue`实现的事实`IMulticastTransport`，这反过来又将处理所有多播的事情交给 Rabbit。

重要的是，您所有支持 Rabbit 的 Rebus 端点都同意让 Rabbit `ManageSubscriptions` - 否则，可能会发生奇怪的事情；）

代表着

*   当您`bus.Subscribe<SomeEvent>`使用类型名称绑定主题到订阅者的输入队列时 - 例如`"SomeEvent.SomeNamespace" -> myInputQueue`
*   发布者在类型名称的主题上发布事件 - 例如`"SomeEvent.SomeNamespace"`
*   订阅时忽略消息所有权
*   Rabbit 在进行多播时会承担繁重的工作（这是 Rabbit 用户主要做的事情）

如果您需要更大的灵活性，您甚至可以负责为每种 .NET 类型决定要发布到的主题，如下所示：

```
Configure.With(yourFavoriteContainer)
         .Transport(t => t.UseRabbitMq(...)
                          .ManageSubscriptions()
                          .AddEventNameResolver(type => DecideTopic(type))
         .(...) 
```

如果需要，您可以添加多个事件名称解析器 - 它们将按顺序运行，直到其中一个返回非`null`.

是否有意义？

# r - R中的设计对话框

> ID：14772880
> 
> 赞同：4
> 
> 时间：2013-02-08T12:43:29.380
> 
> 标签：r, messagebox, dialog

我们如何在 R 中设计一个对话框？

在我的脑海中，我有一些东西会显示一条警报消息，或者我们可以在其中写入某个值，然后单击一个按钮，它会执行一些计算……这在 R 工作区中可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T13:15:02.043

像这样的东西应该工作

```
library("tcltk")
button <- tkmessageBox(title='Message',message='Error x!',type='ok')
button <- tclvalue(button)
if(button == 'ok'){
  #do something
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-07T16:13:46.573

winDialog 也可以：

```
library(utils)
answer<-winDialog("yesno", "was the suggestion useful?")
if (answer=='YES') {print('good!')} else {print('sorry')} 
```

只需尝试复制完整的代码并将其粘贴到您的 R 控制台中：将出现一个对话框，最终输出（“好！”或“抱歉”）将取决于您单击的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:23:29.083

你可以试试：

*   `utils`：`select.list`如果您从预设的选项中进行选择。`edit`更一般，但不那么精致。

*   `gWidgets`: 与`tcltk`或`RGtk2`产生对话的接口。`gmessage`并且`ginput`可能是您正在寻找的东西。

# mysql - SQL 语句 - SQL 矩阵

> ID：14772882
> 
> 赞同：0
> 
> 时间：2013-02-08T12:43:35.780
> 
> 标签：mysql, sql, pivot

对于下表，是否可以创建 SQL 语句来创建数据矩阵或视图？

**桌子：**

```
TeamA|TeamB|Won|Lost
--------------------
  A  |  B  | 5 | 3
  A  |  C  | 2 | 4
  A  |  D  | 9 | 1
  B  |  E  | 5 | 5
  C  |  A  | 2 | 4 
```

**结果矩阵：**

```
 |  A | B |  C | D | E
----------------------------
  A  |  0 | 2 | -2 | 8 | 0
  B  |  0 | 0 |  0 | 0 | 0
  C  | -2 | 0 |  0 | 0 | 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:15:57.707

您不能创建具有可变列数的 SQL 语句或视图。在标准 SQL 中，您可以通过执行以下操作来透视数据：

```
select TeamA,
       max(case when TeamB = 'A' then won - lost end) as A,
       max(case when TeamB = 'B' then won - lost end) as B,
       max(case when TeamB = 'C' then won - lost end) as C,
       max(case when TeamB = 'D' then won - lost end) as D,
       max(case when TeamB = 'E' then won - lost end) as E
from t
group by TeamA
order by 1 
```

一些数据库支持数据透视语句。

通常，要执行此操作，您必须将 SQL 语句创建为字符串，然后执行它（通常称为*动态*SQL）。这样的语句可以由 SQL、存储过程、Excel 或其他一些编程工具生成。然后它需要被执行。

让我重复一遍：任何给定的 SQL 语句都有一组预定义的列。您不能改变列数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:45:33.697

有两种方法可以在 MySQL中*透视数据。*如果您提前知道值（团队），那么您将对值进行硬编码，或者您可以使用准备好的语句来生成动态 sql。

静态版本将是：

```
select TeamA,
  max(case when TeamB = 'A' then won - lost else 0 end) as A,
  max(case when TeamB = 'B' then won - lost else 0 end) as B,
  max(case when TeamB = 'C' then won - lost else 0 end) as C,
  max(case when TeamB = 'D' then won - lost else 0 end) as D,
  max(case when TeamB = 'E' then won - lost else 0 end) as E
from yourtable
group by TeamA; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/4e02c/2)

如果您想使用带有准备好的语句的动态版本，代码将是：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN TeamB = ''',
      TeamB,
      ''' THEN won - lost else 0 END) AS `',
      TeamB, '`'
    )
  ) INTO @sql
from
(
  select *
  from yourtable
  order by teamb
) x;

SET @sql 
  = CONCAT('SELECT TeamA, ', @sql, ' 
           from yourtable
           group by TeamA');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/7bb19/12)。

编辑＃1，在考虑到这一点之后，我实际上会稍微有点不同。我会生成一个真正的矩阵 os 数据，其中团队出现在行和列中。为此，您将首先使用`UNION ALL`查询来获取两列中的所有团队：

```
select teama Team1, teamb Team2,
  won-lost Total
from yourtable
union all
select teamb, teama,
  won-lost
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/4e02c/13)。完成后，您将*旋转*数据：

```
select Team1,
  coalesce(max(case when Team2 = 'A' then Total end), 0) as A,
  coalesce(max(case when Team2 = 'B' then Total end), 0) as B,
  coalesce(max(case when Team2 = 'C' then Total end), 0) as C,
  coalesce(max(case when Team2 = 'D' then Total end), 0) as D,
  coalesce(max(case when Team2 = 'E' then Total end), 0) as E
from
(
  select teama Team1, teamb Team2,
    won-lost Total
  from yourtable
  union all
  select teamb, teama,
    won-lost
  from yourtable
) src
group by Team1; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/4e02c/19)。这给出了更详细的结果：

```
| TEAM1 |  A | B |  C | D | E |
-------------------------------
|     A |  0 | 2 | -2 | 8 | 0 |
|     B |  2 | 0 |  0 | 0 | 0 |
|     C | -2 | 0 |  0 | 0 | 0 |
|     D |  8 | 0 |  0 | 0 | 0 |
|     E |  0 | 0 |  0 | 0 | 0 | 
```

# coldfusion - isNumeric('100e00') 返回 yes 而 lsisnumeric('100e00') 返回 no

> ID：14772888
> 
> 赞同：6
> 
> 时间：2013-02-08T12:44:17.393
> 
> 标签：coldfusion

我刚刚看到`isNumeric('100e00')`返回`yes`时`lsisnumeric('100e00')`返回`no`。

我检查了另一个十六进制数字（a，b，c，d），但它没有返回。

有谁知道为什么它被认为`100e00`是一个数值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T13:12:54.373

`100e00`是科学计数法，即：100 * 10^0，或：100。

```
<cfset string = "100e00">
<cfset numeric = val(string)>
<cfoutput>
values:<br />
string: #string#<br />
numeric: #numeric#<br />
<hr />
isNumeric()<br />
string: #isNumeric(string)#<br />
numeric: #isNumeric(numeric)#<br />
<hr />
lsIsNumeric()<br />
string: #lsIsNumeric(string)#<br />
numeric: #lsIsNumeric(numeric)#<br />
</cfoutput> 
```

这输出：

```
values:
string: 100e00
numeric: 100
isNumeric()
string: YES
numeric: YES
lsIsNumeric()
string: NO
numeric: YES 
```

[`isNumeric()`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fa4.html)和的功能[`lsIsNumeric()`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e15.html)略有不同，超出了后者的语言环境感知。

isNumeric() 声明：“确定字符串是否*可以转换为数值*”（我的*重点*）

lsIsNumeric() 状态：“确定字符串是否是数字的有效表示”

你看到细微的差别了吗？前者会尝试强制该值是一个数字，而后者只是按照它的指示做：告诉你它是否是一个数字。

# metadata - libspotify 中不可用的额外元数据（ISRC、UPC）

> ID：14772889
> 
> 赞同：2
> 
> 时间：2013-02-08T12:44:17.387
> 
> 标签：metadata, libspotify

Track 子系统的 libspotify 文档没有提及元数据。通过使用 XML 元数据 API，您可以看到存在额外的元数据（例如 ISRC）：

[http://ws.spotify.com/lookup/1/?uri=spotify:album:6G9fHYDCoyEErUkHrFYfs4&extras=trackdetail](http://ws.spotify.com/lookup/1/?uri=spotify%3aalbum:6G9fHYDCoyEErUkHrFYfs4&extras=trackdetail)

```
<album><name>Remedy</name><artist href="spotify:artist:4YrKBkKSVeqDamzBPWVnSJ"><name>Basement Jaxx</name></artist><released>1999</released><id type="upc">634904012922</id><tracks><track href="spotify:track:3zBhJBEbDD4a4SO1EaEiBP"><name>Rendez-vu</name><artist href="spotify:artist:4YrKBkKSVeqDamzBPWVnSJ"><name>Basement Jaxx</name></artist><available>true</available><id type="isrc">GBBKS9900090</id><disc-number>1</disc-number><track-number>1</track-number><length>346.158000</length><popularity>0.37000</popularity></track>[...etc...] 
```

这里专辑有一个 UPC 代码，每首曲目都有 ISRC。这是否可以通过 libspotify 获得，或者一旦我从 API 获得专辑/曲目链接，是否需要使用 XML 元数据 API 进行第二次查询？

# javascript - iframe中的引导行流体

> ID：14772891
> 
> 赞同：0
> 
> 时间：2013-02-08T12:44:30.010
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我创建了一个引导模式窗口，其中放置了一个 iframe。

现在，当我尝试使用 row-fluid bootstrap 类时，所有行都位于彼此之上。

这仅发生在 Firefox 中，而不发生在 google chrome 中。

请提出建议。

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" >
<div id="myModalBody" class="modal-body">
    <button type='button' class='close' data-dismiss='modal' aria-hidden='true'></button>
    <h3 id='myModalLabel'>Profile</h3>
    <iframe id='profile'  width='99.5%' height='94%' style='border-width: 0;' scrolling='no'></iframe>
</div>

 function setprofile(id)
{
    profileid=id;

    $('#profile').attr('src','profile.php?profileid=" + profileid + "');

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:11:48.113

我有一个类似的问题，并发现我使用了错误的元素。这是我的问题和解决方案[iframe 中的引导代码未正确呈现](https://stackoverflow.com/questions/15947212/bootstrap-code-in-an-iframe-is-not-rendered-properly)

# prolog - 关于多智能体论证的简单 Prolog 实现

> ID：14772892
> 
> 赞同：2
> 
> 时间：2013-02-08T12:44:30.497
> 
> 标签：prolog, multi-agent

逻辑编程的新手（Prolog）。遇到一个简单的问题，但不知道如何在 prolog 中编码。

问题就像您有几个论点：argument(a),argument(b)...，以及几个攻击关系，例如 attack(a,b)，这意味着论点 a 攻击论点 b。因此，给定一个论点，我想知道它是否有根据。论点 a 的“接地”意味着如果 b 攻击 a，则存在另一个论点，例如 c 攻击 b。如果没有参数攻击 c，那么我们说 a 和 c 是接地的。

您能否举例说明如何实施此接地/1 程序以实现此目标。

不确定我是否说清楚......但欢迎提供任何建议（或代码）！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:25:23.383

我从你的解释中了解到，当没有其他有根据的论点攻击它时，一个论点是有根据的。

您可以`grounded/1`在 prolog 中直接定义遵循此规则的过程：

```
grounded(A):-
  argument(A),    % A is an argument
  \+              % for which there does not exist
  (
    attack(B, A), % an attacker
    grounded(B)   % which is grounded
  ). 
```

[OP评论后编辑]：如果您必须处理周期，那么您可能需要保留访问过的“攻击”列表，没有禁止周期：

```
grounded(A):-
  grounded(A, []).

grounded(A, L):-
  argument(A),
  \+
  (
    attack(B, A),
    \+ member(B, L),  % Here we forbid cycles
    grounded(B, [A|L])  % We add the current argument to the list of forbidden arguments
  ). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T03:18:53.827

我不知道如何在 Prolog 中编写，但根据参数树，从没有受到攻击的参数开始计算接地语义。

（希望它能指导[@gusbro](https://stackoverflow.com/users/463243/gusbro)找到该线程的正确答案。）

为了解释它是如何计算的，我将介绍以下函数*F(x) = {x defends y}*，其中：

*   ![](../Images/5de766632530568acc3a8f12238f63a5.png)
*   ![](../Images/cd79e16fe030e09c2e039d10a7abe60f.png)
*   如果一个被辩护的论点被另一个被辩护的论点攻击，那么被攻击的论点将从集合中删除。
*   依此类推，直到函数无法使用更多参数进行更多扩展，它达到了*F*中的最小固定点。

**（示例 1）**给定以下论证图，接地扩展是*Eg = {c, e, f, a}*。

![](../Images/8e81e9ea4548d5718bb5914384493ccd.png)

所以，第一个函数开始于：

![](../Images/8fe72a9f3ef0accaa70bb30d3f93ccb4.png)

现在让我们考虑用循环计算接地扩展。

**（例2）**在下面给定的论证图中，*e为**b*和*d*辩护，但*b*被*d*攻击，则不能包含在扎根语义中。从这一点开始，我们有一个无冲突的集合*{e, d}*。从*{e, d}*我们可以再次应用函数*F({e, d}) = {e, d, a}*，其中*d*保护*a*免受*b*攻击。再次应用函数*F({e, d, a}) = {e, d, a}*，表明*{e, d, a}*是*F*中的最小不动点。因此，{e, d, a} 是接地扩展。

![](../Images/467f3bcbad747644a86fb31180053034.png)

**（示例 3）**在下面的论证树中，接地扩展![](../Images/57ce45db956b58c5bbed5518c959d4ec.png)，因为没有没有被攻击的论点。否则，如果参数 e 没有攻击自己，则接地扩展应该是![](../Images/a4192097109d2d88cc93af81a10ed863.png)，情况并非如此。

![](../Images/0db0d86e3d7459a74148386c3d0dbbb7.png)

在最后一个示例中，循环上升到不同的首选扩展，您可以在其中使用 Martin Caminada 在其他地方定义的参数标签的等效概念作为支持。

# javascript - 使用来自 ajax 的 knockout.js/mapping plugin/koExternal 模板引擎 /json 的条件绑定

> ID：14772895
> 
> 赞同：1
> 
> 时间：2013-02-08T12:44:40.763
> 
> 标签：javascript, ajax, knockout.js, knockout-mapping-plugin

我做了一个单页应用的解决方案，将用于厂房的大屏幕显示，显示一组机器的状态信息和性能指标。通过一个通过ajax 调用派生的设置文件，应用程序知道哪些机器应该显示哪些信息。因此，为每台机器提供一个模板，并为每台机器信息呈现一个嵌套模板（koExternaltemplateengine）。此外，第一个 ajax 调用包含所有机器的 ajax 调用的 url。这些调用的响应包含机器特定的值。这些调用会定期重复并刷新显示值。所有绑定都使用敲除和映射插件进行，以避免具有硬编码的视图模型客户端。

现在我的问题是：如果所有机器的所有 ajax 调用都为显示提供所需的数据，那么一切正常。但是：对于某些机器，有时（也在初始加载时），调用成功（200）但只包含空值（因为此时数据不可用）。现在我遇到了问题。在 ko.applybindings(machinedata, machinediv) 我得到“无法解析绑定”。对于绑定值字段，ko 终止绑定。所以显示没有完整呈现，也没有触发更新。

现在我将尝试使用 if/ifnot-bindings，但是如果在刷新后出现初始未绑定值会发生什么？（手动重新触发 applybindings，除了 ko.mapping.fromJS??）。

有人有类似的问题吗？有什么建议么？正如我所提到的，我想避免硬编码的视图模型，以方便将来扩展更多机器属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:37:45.817

您可以将您的机器数据存储在 observable 中：

您的看法：

```
<div data-bind="if: machinedata()>
   <div data-bind="with: machinedata()">
      ...
   </div>
</div>
<div data-bind="if: machinedata()>
   Data could not be loaded....
</div> 
```

视图模型：

```
var ViewModel = function () {
    var self = this;

    self.machinedata = ko.observable();

    self.update = function () {
        var data = someAjaxCall(); // returns the data or any falsy value
        self.machinedata(data);
    };
}

var viewModel = new ViewModel();
ko.applyBinding(viewModel);  // data does not yet exist
viewModel.update(); 
```

只要您只绑定加载的数据并且不需要任何计算，您甚至不需要 ko.mapping。

# requirejs - Require.js 根据当地情况加载不同脚本时的最佳实践

> ID：14772898
> 
> 赞同：0
> 
> 时间：2013-02-08T12:45:05.350
> 
> 标签：requirejs

为了争论，假设我想默认加载 Zepto，但使用 jQuery 代替 IE（所有版本）。

使用 Require.js 时，什么是明智的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:07:02.307

有两种方法：“适当”但很长和“花招”但很短。

“正确”但很长：

```
require.config({
    paths: {
        jquery:'path/to/jquery'
        , zepto: 'path/to/zepto'
    }
})

var iNeed = []

if (!('__proto__' in {})) {
    // This is IE
    iNeed.push('jquery')
} else {
    // Everything else
    iNeed.push('zepto')
}

require(iNeed, callback) 
```

“花招”但简短：

```
var AMDConfig = {
    paths: {
        jquery:'path/to/zepto'
    }
}

if (!('__proto__' in {})) {
    // This is IE
    AMDConfig.paths.jquery = 'path/to/jquery'
}

require.config(AMDConfig)

require(['jquery'], callback) 
```

“花招”不“正确”的原因是您掩盖了“jquery”背后的真实本质随着您的应用程序的发展，一些 jQuery 插件可能会出现并且无法在 zepto 上运行，但它不会立即弄清楚问题所在。

“正确”的解决方案在一个方面也是一个问题——如果您动态定义需求数组，构建工具`r.js`将无法找到您放置在那里的其他依赖项。

你的选择..

# javascript - 监听动态创建的 div 事件

> ID：14772900
> 
> 赞同：1
> 
> 时间：2013-02-08T12:45:17.010
> 
> 标签：javascript, jquery, onclick

我提出了一些发布请求来创建一些 div，我在这些 div 上监听点击事件以触发事件。Leet 拿这些新创建的 div '.mydiv'，我不能使用 $('#mydiv').on('click'..) 因为它是动态创建的，所以我使用

```
$(document).click(".mydiv", function(){
            //triggers some events
        }); 
```

但是现在 $(this) 指的是“文档”对象，所以我无法获取被点击的 div 并触发相关事件。我怎样才能做到这一点 ？

编辑：这似乎很有趣，因为我首先调用了一个创建这些 div 的函数，而这正是我称之为点击侦听器的函数中。在这些情况下： $( document ).on( "click" , ".mydiv",...) 不起作用。但是当后者直接放在 html 页面中时，它可以正常工作。（所以至少不是jquery版本问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:45:38.623

```
$(document).on("click", ".mydiv", function(){
        //triggers some events
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

**阅读`Direct and delegated events`部分**

```
//  doc or Parent   |    event   |  dyn. created el 
$(    document    ).on( "click"  ,     ".mydiv",      function(){
        //triggers some events
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:51:05.813

你也可以试试：

```
$(".mydiv").live("click", function(){
            //triggers some events
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:41:10.547

在这种情况下，JQuery 有一种方法可以在选择器上绑定事件。

```
.live('event', 'handler to be executed') : Attach an event handler for all elements which match the current selector, now and in the future. 
```

检查一下这个小提琴：http: [//jsfiddle.net/ff5UJ/](http://jsfiddle.net/ff5UJ/)

# python - 查找哪个 django 模型字段包含错误值

> ID：14772905
> 
> 赞同：1
> 
> 时间：2013-02-08T12:45:34.607
> 
> 标签：python, django, debugging

我是 stackoverflow 和 python\django 的新手。我已经解决了我的问题，但我希望下次我能得到有关如何更快地解决它的帮助。

我有一个非常简单的 python 函数，它将表记录从一个 db 复制到另一个（sql server 到 sqllite）。该表有数百列。当我将模型对象保存到 sqllite 时，django 抛出以下异常：

“utf8”编解码器无法解码字节...

我了解其中一列中的数据对于 utf8 转换存在问题。我想知道的是这是什么列。我尝试了不同的方法，但最终我不得不编写以下代码来找到错误的列：

```
build = Builds.objects.using('realdb').get(buildid=12524)
n = Builds()
for field in Builds._meta.fields:
    val = getattr(build, field.name);
    try:
        setattr(n, field.name, val)
        n.save(using="default")
    except:
        return HttpResponse(field.name + ": " + val.__str__()) 
```

它基本上将列值一一复制到新模型对象，并在遇到错误时停止。下次有没有更好的方法来做到这一点？我尝试在 PyCharm 中打破异常，但它打破了 django 框架本身引发的所有许多异常。

阿隆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:37:52.553

我认为没有任何方法可以确定导致问题的特定字段，而无需像您在这里所做的那样对每个字段进行测试。您可以尝试修复问题字段而不是返回错误。

查看[unicode 文档的这一部分](http://docs.python.org/2/howto/unicode.html#the-unicode-type)。基本上，您可以通过替换非 unicode 部分或完全删除非 unicode 部分来强制这些值。

或者，如果您知道字符串的编码方式，则可以分别使用`string.encode`和对字符串进行解码并重新编码`string.decode`。

# python - Python 删除长度小于 2 个字符的任何内容

> ID：14772907
> 
> 赞同：0
> 
> 时间：2013-02-08T12:45:38.310
> 
> 标签：python, string, list

我有一个字符串列表（如下格式）

```
 ['email', 'go', 'a', 'instance', 'at', 'boo', 'email', 'message', 'message', 'instance', 'at', 'hello'] 
```

如何消除两个字符以下的任何内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:46:16.480

使用列表推导：

`new_list = [k for k in old_list if len(k) >= 2]`

列表推导式有时非常方便且易于使用，您可以[在此处](http://www.youtube.com/watch?v=pShL9DCSIUw)和[此处](http://docs.python.org/2/tutorial/datastructures.html)阅读更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:47:09.513

使用列表推导通常是最易读的：

```
myList = ['email', 'go', 'a', 'instance', 'at', 'boo', 'email', 'message', 'message', 'instance', 'at', 'hello']

myResultList = [x for x in myList if len(x) >=2] 
```

[List Comprehension](http://docs.python.org/2/tutorial/datastructures.html)是一种通过迭代另一个列表来创建新列表的方法。在我对 myList 中每个 x 的示例中，如果 len(x) <= 2，列表推导保持 x。

您还可以执行以下操作：

```
myResultList = [x + "!oh" for x in myList if len(x) ==2] 
```

这将导致`['go!oh','at!oh','at!oh']`

# iphone - 加载 UIImage 低质量

> ID：14772913
> 
> 赞同：1
> 
> 时间：2013-02-08T12:45:51.010
> 
> 标签：iphone, ios

我想知道如何首先加载低质量的 UIImage，然后以高质量加载原始 UIImage。它在objective-c中有一个算法来做到这一点吗？我检查了 NYXImagesKit 类，但它只适用于 iOS 5+，因为它使用 Core Image 框架......而且我需要使用 iOS 4.3+。它的效果就像 Facebook 应用一样。

只是一个编辑：

看看这个： http: [//www.codinghorror.com/blog/2005/12/progressive-image-rendering.html](http://www.codinghorror.com/blog/2005/12/progressive-image-rendering.html)

我想做效果号 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:08:30.700

从[文档：](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/ImageIOGuide/imageio_source/ikpg_source.html#//apple_ref/doc/uid/TP40005462-CH218-SW3 "文档")

**增量加载图像**

如果您有一个非常大的图像，或者正在通过网络加载图像数据，您可能需要创建一个增量图像源，以便您可以在累积图像数据时绘制它。您需要执行以下任务以从 CFData 对象增量加载图像：

1.  创建 CFData 对象用于累积图像数据。
2.  通过调用函数 CGImageSourceCreateIncremental 创建增量图像源。
3.  将图像数据添加到 CFData 对象。
4.  调用函数 CGImageSourceUpdateData，传递 CFData 对象和一个布尔值（bool 数据类型），该值指定数据参数是包含整个图像，还是仅包含部分图像数据。在任何情况下，data 参数都必须包含到该点为止累积的所有图像文件数据。
5.  如果你已经积累了足够的图像数据，通过调用CGImageSourceCreateImageAtIndex创建一个图像，绘制部分图像，然后释放它。
6.  通过调用函数 CGImageSourceGetStatusAtIndex 检查您是否拥有图像的所有数据。如果图像完整，则此函数返回 kCGImageStatusComplete。如果图像不完整，请重复步骤 3 和 4，直到完成。
7.  释放增量镜像源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:01:18.823

你可以参考下面的链接，它可能对你有帮助

[uiimage-dsp](https://github.com/gdawg/uiimage-dsp)

# python - 除了 1MB 写入 Memcache 之外，还有其他限制吗？

> ID：14772923
> 
> 赞同：0
> 
> 时间：2013-02-08T12:46:57.177
> 
> 标签：python, google-app-engine

我有一个奇怪的问题。在一项任务中，我从数据存储中获取数据并将其异步写入内存缓存：

```
ke = database.Events.query(database.Events.eventid.IN(eventslist))
eventskeys = ke.fetch(len(eventslist),keys_only = True)

data = ndb.get_multi(eventskeys)

eventsdic = {}

for event in data:
    eventsdic.update({event.eventid: event.participants})

client = memcache.Client()

rpc = memcache.create_rpc()     
response = client.set_multi_async(eventsdic, time=3600, rpc=rpc) 
```

事件列表中有 20 个项目。我对分布在队列中不同任务的大约 500 个项目执行此操作。

我没有收到任何错误。但我注意到，在第一次尝试中，500 个事件中只有大约 300 个事件确实存在于内存缓存中。如果我只对尚未在内存缓存中的事件进行 2-3 次重试，那么一段时间后我将 100% 保存在内存缓存中。

但我真的不明白，为什么它在第一次尝试时不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:54:03.807

这可能是因为 memcache “监视”您的数据。经常使用的物品不太可能被驱逐。它（据我了解）不仅仅是一个 FIFO 类型的系统

对我来说，这不是一个“问题”，如果我将某些东西放入内存缓存中，那么当我稍后要求它时它就不存在了。我将使用我投入的后备机制来应对这种情况。当您要求时，您根本无法假设内存缓存中会有*任何内容。*

[https://developers.google.com/appengine/articles/scaling/memcache](https://developers.google.com/appengine/articles/scaling/memcache)

> 权衡是保存在 memcache 中的数据是暂时的，并且在系统用完 memcache 空间时被驱逐。在极少数情况下，可以一次驱逐所有 memcached 数据。

# java - Primefaces 向导。如何为onnext返回js函数选项卡

> ID：14772926
> 
> 赞同：0
> 
> 时间：2013-02-08T12:47:05.857
> 
> 标签：java, jsf, jsf-2, primefaces, wizard

我使用 Primefaces 3.5。并尝试在 .onnext 处理程序中调用 js 函数`<p:wizard/>`。我希望在验证结果ob当前选项卡后，onnext返回特定选项卡上的选项卡。我的验证功能

```
 function validateManageOtherTournaments(wizard, validationTab, lang) {
                var currentTabId = validationTab;
                if (currentTabId != 'competitionId') {
                    return wizard.next();
                }

                var seasonVal = document.getElementById('manageTournament:name_season_input').value;
                var dateFromVal = document.getElementById('manageTournament:dateFrom_input').value;
                var dateToVal = document.getElementById('manageTournament:dateTo_input').value;
                /*var compNameVal = document.getElementById('manageTournament:title_input').value;*/

                var isValidName = validateFieldsInOtherTournament('manageTournament', ['title'], lang);
                if (isValidName) {
                    if (validRuContentT) {
                        var filledBothDate = (dateFromVal != "" &amp;&amp; dateToVal != "");
                        var isEmptySeason = ("" != String(seasonVal));
                        if ( filledBothDate || isEmptySeason) {
                            return wizard.next();
                        }
                    }
                }
                return "competitionId"; // currentTab
            } 
```

我使用代码[js 向导](http://code.google.com/p/primefaces/source/browse/core/trunk/src/main/resources/META-INF/resources/primefaces/wizard/wizard.js?spec=svn2661&r=2661)。但它仍然不起作用。（

**//更新**

```
I try to do something like this

 function validateManageOtherTournaments(wizard, validationTab, lang) {
                /*var wizardElement = document.getElementById('wiz');*/

                var currentTabId = validationTab;
                if (currentTabId != 'competitionId') {
                    var currentStepIndex = wizard.getStepIndex(wizard.getState().currentStep),
                            stepIndexToGo = currentStepIndex + 1;
                    var stepIdToGo = wizard.cfg.steps[stepIndexToGo];
                    return wizard.loadStep(stepIdToGo, stepIndexToGo, false);        // next
                }

                var seasonVal = document.getElementById('manageTournament:name_season_input').value;
                var dateFromVal = document.getElementById('manageTournament:dateFrom_input').value;
                var dateToVal = document.getElementById('manageTournament:dateTo_input').value;
                /*var compNameVal = document.getElementById('manageTournament:title_input').value;*/

                var isValidName = validateFieldsInOtherTournament('manageTournament', ['title'], lang);
                if (isValidName) {
                    if (validRuContentT) {
                        var filledBothDate = (dateFromVal != "" &amp;&amp; dateToVal != "");
                        var isEmptySeason = ("" != String(seasonVal));
                        if ( filledBothDate || isEmptySeason) {
                            var currentStepIndex = wizard.getStepIndex(wizard.getState().currentStep),
                                    stepIndexToGo = currentStepIndex + 1;
                            var stepIdToGo = wizard.cfg.steps[stepIndexToGo];
                            return wizard.loadStep(stepIdToGo, stepIndexToGo, false);         // next
                        }
                    }
                }
                var currentStepIndex = wizard.getStepIndex(this.getState().currentStep),
                stepIndexToGo = currentStepIndex;
                var stepIdToGo = wizard.cfg.steps[stepIndexToGo];
                return wizard.loadStep(stepIdToGo, stepIndexToGo, false);     //competitionId
            } 
```

如何在向导的 onnext 功能选项卡中返回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:06:00.787

我做了这样的事情：

```
public String onFlowProcess(FlowEvent event)
{
  if (!event.getOldStep().equals("competitionId"))
  {
    return event.getNewStep();
  }
  if (validationPassed())
  {
    return event.getNewStep();
  }
  else
  {
    return event.getOldStep();
  }
}

private boolean validationPassed()
{
  // do your validation here.
  // return true if validation passed
} 
```

然后在我的向导中：`flowListener="#{myBean.onFlowProcess}"`

# c# - 无法将类型“System.Data.DataTable”隐式转换为 DataSets.General.StudentDataTable'

> ID：14772930
> 
> 赞同：1
> 
> 时间：2013-02-08T12:47:09.757
> 
> 标签：c#, .net, datatable, dataset

我有一个包含一些数据表的数据集，现在我想从 db 中获取一个数据表并将其添加到我正在使用的数据集中的现有数据表中

```
 return (DataSets.General.StudentDataTable) ds.Tables["DSDummy"]; 
```

但它给了我以下错误

> 无法将类型“System.Data.DataTable”隐式转换为 DataSets.General.StudentDataTable”。存在显式转换

有人可以告诉我如何投射这个物体吗？任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:00:32.213

如果`ds`是强类型数据集，我希望它具有 DSDummy 表的显式属性，例如`ds.DSDummy`，而不是通过`Tables`集合，从而绕过强类型。

然而，即使是这样，显式演员表*也应该*奏效。您是否有可能多次`DataSets.General.StudentDataTable`定义 - 一次是手动定义，一次是从 DataSet Generator 自动定义 - 并且存在冲突？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:52:51.737

查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/aeskbwf7.aspx)

下面的代码取自上面的链接。

```
DataSet customerOrders = new DataSet("CustomerOrders");

DataTable ordersTable = customerOrders.Tables.Add("Orders");

DataColumn pkOrderID =
ordersTable.Columns.Add("OrderID", typeof(Int32));
ordersTable.Columns.Add("OrderQuantity", typeof(Int32));
ordersTable.Columns.Add("CompanyName", typeof(string));

ordersTable.PrimaryKey = new DataColumn[] { pkOrderID }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:54:59.457

如果您尝试将一个加载`DataTable`到另一个，您可以使用[DataTable.Merge](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)方法：

```
DataSets.General.StudentDataTable.Merge(ds.Tables["DSDummy"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:00:29.860

试试下面...可能对您有帮助...

**如果要返回数据集并分配给数据集，请按照以下方法..**

```
DataSet ds = new DataSet();
ds = GetData();

public dataset Sample GetData()
{
......
.......

return ds
} 
```

**如果要返回 Datatable 并将其分配给 Dataset，请按照以下方法操作。**

```
DataSet ds = new DataSet();
ds.Tables.Add(GetData());

public datatable Sample GetData()
{
......
.......

return ds.Tables["DSDummy"];
} 
```

# css - css 虚线边框如何实现？

> ID：14772935
> 
> 赞同：1
> 
> 时间：2013-02-08T12:47:18.213
> 
> 标签：css, gwt, canvas

我想使用 GWT Canvas 在像 Rectangle 这样的画布元素周围绘制虚线边框。我喜欢 css 属性`border: dashed`产生的样式，尤其是角的显示方式，如下所示：[https ://developer.mozilla.org/en-US/docs/CSS/border-style](https://developer.mozilla.org/en-US/docs/CSS/border-style)

可以在某处检查此虚线如何生成的“源”代码吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T12:57:23.697

在 Firefox 源码中找到了这个函数：`nsCSSRenderingBorders`. 我不明白代码，但答案可能就在那里。

[http://mxr.mozilla.org/mozilla-central/source/layout/base/nsCSSRenderingBorders.cpp](http://mxr.mozilla.org/mozilla-central/source/layout/base/nsCSSRenderingBorders.cpp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T13:22:10.730

如果你想要你的边框样式：

```
element.style {
  background-color: palegreen;
  border-style: dashed;
} 
```

或者

```
element.style {
  border-style: 2px dashed #000;
} 
```

这是你想要的吗 ？

如果你想要一个 java 函数来做到这一点，或者某个地方开始“学习”，去这里[gwtcanvasdemo。](http://gwtcanvasdemo.appspot.com/)并且有一个指向来源的链接。此外，关于 SO 的另一篇文章与[画布中的虚线笔划](https://stackoverflow.com/questions/4576724/dotted-stroke-in-canvas)有关，然后是[/DashedLineRenderer.java](http://code.google.com/p/gwt-g2d/source/browse/trunk/gwt-g2d/src/gwt/g2d/client/graphics/DashedLineRenderer.java?spec=svn120&r=120)

# java - 更新 UI 上的单选按钮选择

> ID：14772937
> 
> 赞同：0
> 
> 时间：2013-02-08T12:47:27.837
> 
> 标签：java, android, user-interface, runnable, background-thread

您好我正在尝试从后台线程更新 UI。我正在以编程方式设置单选按钮的选择，但奇怪的是，当我运行应用程序时它不会更新 UI。但是当我逐步调试应用程序时，UI 会自行更新，这对我来说很奇怪。以下是我用来执行此操作的代码。

由于 post runnable 返回一个布尔值，并且它似乎对更新返回 true，但它不会更新 UNI，这很奇怪。

线

```
_internetConenctivityThread = new Thread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try
            {
                CheckInternetConnectivity(conManager);
                Thread.sleep(30000);
            }
            catch(Exception ex)
            {
                Log.d("_internetConnectivityThread", "Exception while checking connectivity: " + ex.getMessage());
            }
        }
    }); 
    _internetConenctivityThread.start(); 
```

检查方法

```
private void CheckInternetConnectivity(ConnectivityManager cm)
    {
        try
        {           
            NetworkInfo netInfo = cm.getActiveNetworkInfo();
            if (netInfo != null && netInfo.isConnected()) {

                mParent.connectivity.post(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        // Updating Status Monitor for connectivity
                        mParent.connectivity.setChecked(true);

                    }
                });         
            } 
            else 
            {
                mParent.connectivity.post(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        // Updating Status Monitor for connectivity
                        mParent.connectivity.setChecked(false);

                    }
                });                 
            }
        }
        catch(Exception ex)
        {
            ex.getMessage();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:10:56.700

尝试这个：

```
runOnUiThread(new Runnable() {
    public void run() {
        mParent.connectivity.setChecked(false);
    }
}); 
```

# jquery - jquery分别包装列表元素的每四个子元素

> ID：14772938
> 
> 赞同：2
> 
> 时间：2013-02-08T12:47:27.607
> 
> 标签：jquery, html

我无法在列表元素中对元素进行分组。

例如，我有三个列表元素：

```
<ul class="row">
<li class="item"> 
<!-- product name -->
<div class="imglist"> 
<a href="#" title="image"><span class="txt">txt</span></a> 
</div>
</li>
</ul>

<ul class="row">
  <li class="item"> 
    <!-- product name -->
    <div class="imglist"> 
<a href="#" title="image"><span class="txt">txt</span></a> 
<a href="#" title="image"><span class="txt">txt</span></a> 
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a> 
<a href="#" title="image"><span class="txt">txt</span></a> 
<a href="#" title="image"><span class="txt">txt</span></a> 
</div>
</li>
</ul>

<ul class="row">
<li class="item"> 
<!-- product name -->
<div class="imglist"> 
<a href="#" title="image"><span class="txt">txt</span></a> 
<a href="#" title="image"><span class="txt">txt</span></a> 
</div>
</li>
</ul> 
```

在 Jquery 我试过这个：

```
var divs = $("div.imglist > a");
for(var i = 0; i < divs.length; i+=4) {
divs.slice(i, i+4).wrapAll("<div class='group'></div>");
} 
```

但现在的结果是：

```
<ul class="row">
<li class="item"> 
<!-- product name -->
<div class="imglist"> 
<div class="group">
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a></div> 
</div>
</li>

<li class="item"> 
<!-- product name -->
<div class="imglist">
<div class="group">
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a>
<a href="#" title="image"><span class="txt">txt</span></a></div> 
</div>
</li>

<li class="item"> 
<!-- product name -->
<div class="imglist">   
<div class="group">
<a href="#" title="image"><span class="txt">txt</span></a></div> 
</div>
</li>
</ul> 
```

我的问题是我想要每个`li.item`单独的包装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:17:59.603

分别遍历每个列表：

```
$('.imglist').each(function(){
    var divs = $('a', this);
    console.log(divs)
    console.log(divs.slice(0,4));
    for(var i = 0; i < divs.length; i+=4) {
        console.log(i)
        divs.slice(i, i+4).wrapAll('<div class="wrapper"></div>');
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/DC2MC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:05:51.893

如果我理解正确，您希望对每个 li.item 进行分组：

```
$("ul li.item").each(function() {
    $(this).find("a").wrapall("<div class='group'></div>");
}); 
```

# c# - 即使使用 Server.MapPath 检查 C# 中是否存在文件也返回 false

> ID：14772946
> 
> 赞同：2
> 
> 时间：2013-02-08T12:47:38.803
> 
> 标签：c#, asp.net-mvc-4

我正在尝试检查文件夹中是否存在特定图像。它在解决方案中，代码在手表中将其返回给我。

代码是：

```
 using SO = System.IO;

  if (SO.File.Exists(Server.MapPath(PathGame)))
            {
                selectJogo.imagemGame = PathGame;
            } 
```

但它返回`false`

手表：

![变量的监视](../Images/cdf98ac3bb30ebc6043f92e15dfbe064.png)

编辑：SO = System.IO

# javascript - 如何将文件输入克隆到隐藏 iframe 中的另一个文件输入

> ID：14772947
> 
> 赞同：2
> 
> 时间：2013-02-08T12:47:39.720
> 
> 标签：javascript, jquery, html, file

我有一个具有文件输入元素的表单，当用户选择文件时，我想将所选文件设置为隐藏 iframe 中的另一个文件输入，

这是我的形式：

```
<form name="uploadForm" >
    <input type="file" id="fileone" name="fileone" value="" />
    <button type="button" id="attachement_upload" onclick="addFile()" >Upload</button>
</form>
<iframe id="FileUploadFrame" name="FileUploadFrame" src="" style="display: none; border: 0; width: 0; height: 0;">
    <form id="FileUploadForm" name="FileUploadForm" accept-charset="utf-8" target="FileUploadFrame" enctype="multipart/form-data" encoding="multipart/form-data" method="POST" action="CIMtrek_Regional_WhseForm_FileUpload">
        <input type="file" id="filetwo" name="filetwo" value="" />
    </form>
</iframe> 
```

和我的java脚本：

```
function addFile(){
    //this is where i want to clone the fileone to filetwo and submit the form which is in iframe
} 
```

我见过这样的事情，但真的不知道该怎么做：

```
$(".inputfield1").change(function(){
  var $this = $(this), $clone = $this.clone();
  $this.after(clone).appendTo(hiddenform);
}); 
```

请帮我完成这件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:21:05.590

你不能（或不应该）能够做到这一点。输入类型，因为`file`它可以直接访问用户的文件系统，所以有特殊的安全限制。最值得注意的是，您不能在 JavaScript`value`中设置`file`输入，因为这将允许您执行诸如将其设置为类似`~/.ssh/id_rsa`的操作并在用户不知情的情况下窃取重要数据。因此，jQuery 不应该能够克隆`file`输入，因为它不能设置值。

要使其工作，您必须让用户单击 中的`file`输入`iframe`，可能使用一些 CSS 定位技巧使其看起来是页面的一部分。或者，如果您的用户通常使用更现代的浏览器，您可以使用[File API](http://www.w3.org/TR/FileAPI/)并[使用 Ajax 上传文件](http://robertnyman.com/2010/12/16/utilizing-the-html5-file-api-to-choose-upload-preview-and-see-progress-for-multiple-files/)。

# django - Django：使用请求和上下文作为参数有什么区别

> ID：14772960
> 
> 赞同：1
> 
> 时间：2013-02-08T12:48:36.863
> 
> 标签：django

我在我的 context_processor 中定义一个函数，以从我的设置中传递一个值以在模板中使用。那么什么是正确的方法，更重要的是有什么区别？

```
def baseurl(request):
    return {'BASE_URL': settings.BASE_URL} 
```

或者

```
def baseurl(context):
    return {'BASE_URL': settings.BASE_URL} 
```

我一直使用第一个，但遇到了第二个的几个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:57:44.710

从*django/template/context.py*：

```
class RequestContext(Context):
    """
    This subclass of template.Context automatically populates itself using
    the processors defined in TEMPLATE_CONTEXT_PROCESSORS.
    Additional processors can be specified as a list of callables
    using the "processors" keyword argument.
    """
    def __init__(self, request, dict_=None, processors=None, current_app=None,
            use_l10n=None, use_tz=None):
        Context.__init__(self, dict_, current_app=current_app,
                use_l10n=use_l10n, use_tz=use_tz)
        if processors is None:
            processors = ()
        else:
            processors = tuple(processors)
        for processor in get_standard_processors() + processors:
            self.update(processor(request)) 
```

最后两行是最重要的。这意味着没有命名参数。因此，你如何命名你的论点并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:55:31.997

你可以随意调用这个论点，但`request`它是最常见或最清楚的。来自 Django 文档：[https ://docs.djangoproject.com/en/1.4/ref/templates/api/#writing-your-own-context-processors](https://docs.djangoproject.com/en/1.4/ref/templates/api/#writing-your-own-context-processors)

> 上下文处理器有一个非常简单的接口：它只是一个 Python 函数，它接受一个参数，一个 HttpRequest 对象，并返回一个添加到模板上下文的字典。

虽然没有什么能阻止你命名这个参数`context`，但它会产生误导，因为它传递了一个 HttpRequest 对象。

# scala - Scala Akka Play，Future 不会返回

> ID：14772963
> 
> 赞同：3
> 
> 时间：2013-02-08T12:48:50.450
> 
> 标签：scala, playframework, akka, future

我正在使用 Scala 2.10、Akka 2.1 和 Play 2.1。当我向我的后端发送一个 http 请求时，我`ask`需要一个演员来计算一些东西。这个想法是如果它在超时之前返回，则返回计算结果，否则返回不同的字符串。请参阅下面的代码。

```
val futureInt: Future[Int] = ask(testActor, Calculate(number.toInt)).mapTo[Int]
val timeoutFuture = play.api.libs.concurrent.Promise.timeout("Oops", 2.seconds)

Async {
  Future.firstCompletedOf(Seq(futureInt, timeoutFuture)).map {
    case i: Int => Ok("Got result " + i)
    case t: String => Ok("timeout expired")
  }
} 
```

演员如下：

```
class TestActor() extends Actor {
  def receive = {
    case Calculate(tonumber: Int) =>
      for (a <- 1 to tonumber) {
        val c: Double = scala.math.pow(a, 2)
        println("a: " + a + ", c: " + c)
      }
      12345 // hardcoded value to return when the calculation finishes
    case _ =>
      println("bah")
  }
} 
```

我的问题是，即使演员在超时之前完成，Future 也不会“返回”任何内容，因此超时总是会过期。我究竟做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:58:31.073

来自[http://doc.akka.io/docs/akka/snapshot/scala/actors.html](http://doc.akka.io/docs/akka/snapshot/scala/actors.html)

> 使用 ask 将向接收 Actor 发送消息，就像使用 tell 一样，接收 Actor 必须使用 sender 回复！回复以用一个值完成返回的 Future。

和

> **警告**
> 
> 要以异常完成未来，您需要向发件人发送失败消息。当参与者在处理消息时抛出异常时，这不会自动完成。

因此，不要像在通常的 scala 函数中那样“返回”，而是按照以下方式做一些事情

```
def receive = {
  case Calculate(tonumber: Int) =>
    ...
    sender ! 12345
  case _ =>
    sender ! akka.actor.Status.Failure(new InvalidArgumentException)
} 
```

# cmd - 运行 blat 命令发送邮件时无法连接到服务器（winsock.dll 错误 10060 时超时）

> ID：14772967
> 
> 赞同：1
> 
> 时间：2013-02-08T12:48:59.250
> 
> 标签：cmd, command, mail-server, blat, wsastartup

我正在使用[Blat](http://www.blat.net/)，它是用于从命令发送邮件的命令行工具。

首先我运行安装命令来存储在注册表中创建条目的邮件服务器............

![在此处输入图像描述](../Images/cb2bb543b3b498049223df74e2122e0c.png)

首先，我将 SMTP 服务器设置为**smtp.mail.yahoo.com**，但错误是一样的。

之后我执行

```
blat C:\temp.txt  -to abcdef@gmail.com -superdebug 
```

之后我得到了这个错误......

```
C:\blat310\full>blat C:\temp.txt  -to abcdef@gmail.com -superdebug
Blat v3.1.0 (build : Feb  2 2013 11:00:32)
32-bit Windows, Full, Unicode

Checking option -to
superDebug: init_winsock(), WSAStartup() returned 0 (NO_ERROR)
superDebug: Hostname <smtp.mail.apac.gm0.yahoodns.net> resolved to ip address 10
6.10.167.87
superDebug: Official hostname is smtp.mail.apac.gm0.yahoodns.net
superDebug: Attempting to connect to ip address 106.10.167.87
superDebug: ::connect() returned error 10060, retry count remaining is 1
superDebug: ::connect() returned error 10060, retry count remaining is 0
superDebug: Connection returned error 10060
Error: Can't connect to server (timed out if winsock.dll error 10060)
superDebug: ::say_hello() failed to connect, retry count remaining is 1
superDebug: init_winsock(), WSAStartup() returned 0 (NO_ERROR)
superDebug: Hostname <smtp.mail.apac.gm0.yahoodns.net> resolved to ip address 10
6.10.167.87
superDebug: Official hostname is smtp.mail.apac.gm0.yahoodns.net
superDebug: Attempting to connect to ip address 106.10.167.87
superDebug: ::connect() returned error 10060, retry count remaining is 1
superDebug: ::connect() returned error 10060, retry count remaining is 0
superDebug: Connection returned error 10060
Error: Can't connect to server (timed out if winsock.dll error 10060) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:58:41.543

错误 10060 表示您的连接超时，这是因为在`smtp.mail.yahoo.com`或上的端口 995 上没有任何监听`smtp.mail.apac.gm0.yahoodns.net`。你为什么要尝试连接到那个端口呢？它用于 POP3 over SSL（即邮件检索），而不用于 SMTP（邮件提交）。

尝试使用端口 25 或（更有可能）端口 587。后者是邮件提交的默认端口（有关详细信息，请参阅[RFC 4409](https://www.rfc-editor.org/rfc/rfc4409)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T17:02:26.893

您的 10060 超时错误很可能是由于您的邮件服务器未侦听 Blat 默认 SMTP 端口 #25 引起的。

许多 ISP 邮件服务器已切换到 SSL 加密进行身份验证。此开关意味着使用 SMTP 端口 #465。但是，Blat 当前不支持 SSL。

您要么必须：

1.  要求您的 ISP 邮件服务器打开非 SSL 通信，或
2.  获取 Blat 的 SSL 包装器（如 Stunnel），或
3.  找到另一个支持 SSL 的命令行邮件程序。

# android - ViewPager.PageTransformer 显示错误 ViewPager 无法重新解析为我正在使用 androidsupportv4 jar 修订版 9 的类型

> ID：14772970
> 
> 赞同：1
> 
> 时间：2013-02-08T12:49:05.163
> 
> 标签：android, android-viewpager, android-support-library

我无法通过使用**AndroidTools**输入**AddSupportLibrary**从 Eclipse 获取 androidsupportv4 修订版 11 谁能告诉我如何从 Eclipse 获取它，为什么我无法获取它。我知道它已`ViewPager.PageTransformer`添加到**androidsupportv4.jar**修订版 11 中。有没有修复它的方法..因为我的网络有问题，我无法获取或安装新版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:07:58.163

好吧，我解决了这个问题，我下载了新版本的**Android SDK ADT Bundle ，并从****SDK/extras/android/support/v4**中的路径中提取了 android supportlibraryv 4 修订版 13，祝您编码愉快！！！

# web-scraping - 检测网站上的嵌入式 Flash 媒体

> ID：14772974
> 
> 赞同：0
> 
> 时间：2013-02-08T12:49:15.273
> 
> 标签：web-scraping

我想知道是否可以通过查看源代码来检测任何网页上的嵌入式 Flash 媒体（如抓取实际媒体 url）。一些网页实际上在 's 参数中包含媒体 url，但在许多网页上，该 url 是散列的，或者根本不存在。
诸如 Ant Video Downloader 之类的应用程序似乎对此没有任何问题，并且总是设法为您获取媒体 url，但我猜这是通过嗅探数据包或通过某种类似方法来完成的。
可以以编程方式完成吗？如果是这样，从哪里开始？

# joomla2.5 - Joomla 更改特色字段默认为是

> ID：14772975
> 
> 赞同：3
> 
> 时间：2013-02-08T12:49:22.277
> 
> 标签：joomla2.5

在 Joomla 添加/编辑文章中有一个**特色**字段，默认选择为**否**我想选择**是**作为默认值，所以在

> joomla\administrator\components\com_content\models\forms\article.xml

我根据我的要求修改代码

```
<field name="featured" type="list"
            label="JFEATURED"
            description="COM_CONTENT_FIELD_FEATURED_DESC"
            default="0"
        >
            <option value="0">JNO</option>
            <option value="1">JYES</option>
        </field> 
```

至

```
<field name="featured" type="list"
            label="JFEATURED"
            description="COM_CONTENT_FIELD_FEATURED_DESC"
            default="1"
        >
            <option value="0">JNO</option>
            <option value="1">JYES</option>
        </field> 
```

但它没有选择**Yes**作为默认值然后我只是用**JNO 更改文本 JYES****虽然**它交换但没有在 db中设置**特色字段**

 ****![在此处输入图像描述](../Images/a2a0636eee6c6ecbd9b54dac0edc5b00.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T12:23:46.770

你应该这样做：

```
[siteroot]/administrator/components/com_content/models/forms/article.xml 
```

至于

```
[siteroot]/components/com_content/models/forms/article.xml 
```

在此感谢所有人的提示，使我能够解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:57:46.803

在“joomla\components\com_content\models\forms\article.xml”中将值更改为“1”

无需将文本从 JYES 更改为 JNO。我在 Joomla 中都测试过！2.5 和 3.0，同时适用于两者****

# less - 使用 Assetic 使用自定义参数编译 LESS

> ID：14772977
> 
> 赞同：1
> 
> 时间：2013-02-08T12:49:27.567
> 
> 标签：less, symfony-2.1, assetic, lessphp

我想用从数据库中获取的参数编译一个 LESS 文件。

所以是这样的：

```
$color = "#433332"; 
```

然后在 .less

```
@baseColor: $color; 
```

当然这只是伪代码，所以给你一个想法我想做什么。

我正在使用 Assetic、Symfony 2.1.8-DEV 和 leafo/lessphp 包。

我不知道我怎么能做到这一点。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:51:05.920

您可能会在运行时根据 db 值定义一个参数，并将其传递到您的资产配置中，并作为全局变量（或类似的）传递给 LESS，但是配置很早就被解析了，这可能有点精神。我当然不会尽可能地排除它，我很确定我已经看到了使用常规 SASS 编译器实现此目的的黑客攻击。

GitHub 上的以下 PR 可能具有相关性：

[https://github.com/kriswallsmith/assetic/pull/177](https://github.com/kriswallsmith/assetic/pull/177)

# android - android如何以编程方式标记联系人的电话号码

> ID：14772978
> 
> 赞同：0
> 
> 时间：2013-02-08T12:49:31.947
> 
> 标签：android, sms, contacts, phone-number

我做了很多研究，但找不到任何帮助；

我的问题是：我需要创建一个应用程序，用户可以在其中选择他手机上的一些联系人添加到此应用程序中，他/她以后可以通过特殊模板中的短信与他们通信。但用户只需选择一个电话号码即可在此应用程序上对该用户有效。必须为以后的登录放弃此选择。

我能够使用查找键检索联系人及其电话号码（将保存在我的应用程序中作为预选用户的参考），但我不知道如何标记所需的电话号码，我正在考虑添加一个标志到电话号码，但我不知道如何，我不知道这是否是正确的方法，我想将选定的电话号码设置为主要电话号码，然后在需要时查询 t ......或者只是保存电话号码 ID（但是如果用户更改电话号码，我不确定保存 ID 是否安全）...

谢谢任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:59:18.943

经过长时间的反复试验，我找到了解决问题的方法。我将使用联系人查找键来存储联系人和电话 id 来存储电话号码......如下：

```
String selection =  ContactsContract.CommonDataKinds.Phone.LOOKUP_KEY + " = '" + lookupkey+ "' and "+Phone._ID+"='"+phoneid+"'";
        String[] projection =new String[] {Phone._ID, Phone.DISPLAY_NAME, Phone.NUMBER};
         Cursor managedCursor = getContentResolver()
                .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                 projection, selection, null,  Phone.DISPLAY_NAME + " ASC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T22:23:11.233

我对所有这些东西都有些陌生。据我了解， id 匹配很快，但可能不稳定。如果 key+id 匹配失败，您还应该尝试仅使用 key 进行较慢的匹配 - Jeffrey Scofield 的 SQL 选择字符串可以更改为尝试 id-and-key OR key-only（信任查询优化器优先 id 匹配） .

我没有太多运气找到有关长期存储密钥的智慧的信息。

# profiling - 通过 Oprofile 在每个函数中消耗的周期

> ID：14772980
> 
> 赞同：2
> 
> 时间：2013-02-08T12:49:34.133
> 
> 标签：profiling, oprofile

Oprofile 致力于基于采样的理论。Opreport -l 选项通过以下方式为我们提供分析报告：

```
样本 % 图像名称 符号名称
78149 15.0776 cvqa comp_corr.clone.2

```

有了这些信息，我可以知道消耗时间的百分比。如果我在我的代码中做一些优化，我会再次得到报告：

```
样本 % 图像名称 符号名称
73179 15.0732 cvqa comp_corr.clone.2

```

在这份报告中，我没有得到多少周期优化已经完成，以便我可以进行基准测试。到目前为止已经做了多少优化？

有什么方法可以知道已经完成了多少周期优化，或者我可以通过任何其他方式进行基准测试？

我正在使用 AMD64 位机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:55:02.033

由于您的真正目标是优化程序，所以让我提出另一种思考方式。

主要衡量的是总体时间，而不是各种例程的周期或时间。

现在，这里是如何进行优化。不要以任何测量为基础。相反，获取程序状态的一些样本并（这是关键点）用你自己的眼睛和大脑足够仔细地研究每个样本，并了解程序在该状态下正在做什么，以及它的全部原因正在做。（你会看到统计数据可以揭示的任何值得修复的东西，以及他们无法揭示的东西，这一切都不同了。）

一旦你在*两个或多个样本*上发现它正在做的事情，一些可以被删除的东西，修复它*会给*你一个显着的加速。 [*这里解释了它为什么起作用以及你可以期待多少加速。*](https://scicomp.stackexchange.com/a/2719/1262) 完成此操作后，您可以再次进行整体时间测量，并查看您节省了多少时间。

然后不要停下来。再来一遍。您会找到其他要修复的问题，由于您删除的第一个问题，现在这个百分比更大。

根据我的经验，使用真正的软件，这可以完成多达 5 或 6 次，之后程序可以比原来快几个数量级。原因是因为每次优化都会删除原始执行时间的一小部分，而这些部分可以累积到接近 100%。我不知道使用 Oprofile 或任何其他分析器工具取得的任何此类结果。

# css - 粘性页脚中的流体高度

> ID：14772988
> 
> 赞同：0
> 
> 时间：2013-02-08T12:50:27.757
> 
> 标签：css, twitter-bootstrap, height, sticky-footer

我在我的项目中设置引导粘性页脚：http: [//twitter.github.com/bootstrap/examples/sticky-footer.html](http://twitter.github.com/bootstrap/examples/sticky-footer.html)

是否可以设置内容的高度以填充剩余空间？让我解释。我想驻留图像，我需要它的大小与可用高度相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:49:24.490

如果您的意图是填充内容结尾和页脚开头之间的任何空间，我可以看到各种挑战。

根据您的图像的具体情况，也许您可​​以将其作为这样的背景：http:
[//jsfiddle.net/panchroma/hBzjn/](http://jsfiddle.net/panchroma/hBzjn/)

您可以使用媒体查询，可能在不同的视点使用不同的图像，还可以使用填充来优化结果。

祝你好运！

**HTML**

```
 <div id="wrap">
    <div class="contentWrap">

  <!-- Begin page content -->
  <div class="container">
    <div class="page-header">
      <h1>Sticky footer</h1>
    </div>
    <p>page content</p>
  </div>

  <div id="push"></div>
    </div><!-- end contentWrap -->
</div> <!-- end wrap -->

<div id="footer">
  <div class="container">
      <h3>sticky footer </h3>
  </div>
</div> 
```

**CSS**

```
#wrap{
background: url(http://is.gd/0QPvoC) left bottom; /* define image and position */
}

.contentWrap{
background-color:#fff;  /* quick fix so background image is hidden behind main content */
} 
```

# mule - 如何在 mule studio 中的 Groovy 脚本中引用会话变量

> ID：14772990
> 
> 赞同：3
> 
> 时间：2013-02-08T12:50:37.643
> 
> 标签：mule

我刚开始和骡子合作。流程描述：我有一个 HTTP 入站端点接收 XML 消息，并且我使用 XML 有效负载更新数据库 (derby)。例如：我将在请求中收到 Emp Id 和 Emp name, Exp。我必须用这些值更新表格。

我的实现：

收到 XML 输入后，我使用消息属性转换器将值保存在 Session 范围内。

```
 <message-properties-transformer scope="session" doc:name="Message Properties">    
    <add-message-property key="EmpNum"
                          value="#[xpath:/CreateEmployee/EmpNum]" /> 
 </message-properties-transformer> 
```

像上面一样。然后我有 Groovy Script 组件来更新表。我的查询是：

```
r.update(conn, "INSERT INTO Employee values(#[header:session:EmpNum],#[header:session:EmpName],#[header:session:Experience],#[header:session:Role])"); 
```

但它抛出错误：

```
第 1 行第 29 列出现词汇错误。遇到："#" (35)，在："" 之后。(org.apache.derby.iapi.error.StandardException)
  org.apache.derby.iapi.error.StandardException:-1 (null)
 第 1 行第 29 列出现词汇错误。遇到："#" (35)，在："" 之后。查询：INSERT INTO Employee values(#[header:session:EmpNum],#[header:session:EmpName],#[header:session:Experience],#[header:session:Role]) 参数：[](SQL 代码: 30000, SQL 状态: + 42X02) (java.sql.SQLException)
  org.apache.commons.dbutils.QueryRunner:540（空）

```

我使用了一个记录器组件来显示这些值。

```
#[header:session:EmpNum] 
```

正在显示正确的值。

请帮助我如何在 Groovy 脚本中引用此会话值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-25T01:00:54.193

在 Mule 中使用 Groovy 脚本分别读取流变量或会话变量时，以下内容适用于我。

为了读取我正在使用的流变量

```
message.getInvocationProperty('yourVarsName').toString() 
```

为了阅读我正在使用的会话变量

```
sessionVars['yoursVarsName'] or flowVars['yoursVarsName'] 
```

在 Mule 3.5 的 Groovy 脚本中，它们对我非常有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:05:59.480

您不能直接在 Groovy 脚本中使用 Mule 表达式语言 (MEL)。

如果您使用的是 Mule 3.3，请将其他变量替换`#[header:session:EmpName]`为和类似。`sessionVars('EmpName')`

对于以前的版本，替换`#[header:session:EmpName]`为`message.getProperty('EmpName',PropertyScope.SESSION)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:03:45.843

在将其作为 SQL 命令发送之前，您必须允许 Groovy 脚本设置该值。您将文字“message.getProperty('Experience',PropertyScope.SESSION)”直接发送到 SQL 命令中。

```
qr.update(conn, "INSERT INTO Employee values("+message.getProperty('EmpNum',PropertyScope.SESSION)+","+message.getProperty('EmpName',PropertyScope.SESSION)+","+message.getProperty('Experience',PropertyScope.SESSION)+","+message.getProperty('Role',PropertyScope.SESSION)+")") 
```

另外不要忘记在脚本中导入 PropertyScope 类：

```
import org.mule.api.transport.PropertyScope 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T04:10:10.230

```
#[groovy:message.getSessionProperty('sesVarValue') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-28T22:45:01.563

不确定是否有人需要答案，但对于 Mule 3.6+，我只需执行**sessionVars['sessVarName'] /flowVars['flowVarName']就可以访问会话或流变量**

**如果值用作字符串，请不要忘记使用“+”连接字符串。

# c# - 30-40 分钟后性能下降 c#

> ID：14772991
> 
> 赞同：2
> 
> 时间：2013-02-08T12:50:37.623
> 
> 标签：c#, web-services, download, webservice-client

我正在尝试从远程位置下载文件。但就在下载之前，我从 Web 服务（也在远程位置）获取我的文件位置。

问题是，随着时间的推移，我的表现会越来越差。一两个小时后，下载的文件数量从 3 分钟内的 2k 左右减少到 300-400 个，我有 250k 个文件。

是服务还是下载有问题？或两者？

从服务中获取名称后，我下载如下文件，

```
try
{
   using (WebClient client = new WebClient())
   {
     if (File.Exists(filePath + "/" + fileName + "." + ext))
     {
        return "File Exists: " + filePath + "/" + fileName + "." + ext;
     }
     client.DownloadFile(virtualPath, filePath + "/" + fileName + "." + ext);
     return "Downloaded: " + filePath + "/" + fileName + "." + ext;
   }
 }
 catch (Exception e)  {
      return"Problem Downloading " + fileName + ": " + e.Message;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:56:35.750

```
if (File.Exists(filePath + "/" + fileName + "." + ext)) 
```

瓶颈可能就在这里。当您在单个文件夹中获得大量文件时，检查具有此名称的文件是否已存在可能需要一些时间才能完成。因此，您可能希望将文件存储在不同的文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:49:00.273

问题出在**richTextBox**和**label**上的信息。

rtb 附加了有关每个单独元素发生的任何事情的信息。标签显示了我们所在的元素。显然cpu无法处理它，这在长时间运行时成为一个主要问题。它吃掉了太多的 CPU，最终杀死了应用程序。删除或限制它们的输出几乎解决了所有问题。

另一方面，仍然存在的下载量的轻微下降（ **2.5 小时**后***每分钟*****1.5k**到**1.2k ）仍然是个谜。**

# android - 打算拍照，如果我按回，应用程序崩溃

> ID：14772992
> 
> 赞同：0
> 
> 时间：2013-02-08T12:50:39.747
> 
> 标签：android, android-intent, camera, uri, image

我称这个函数为：

```
 private void TakePhoto() {
    LogService.log(TAG, "inTakePicture");
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/BlueSkyBio/media/", "test.jpg");

    outputFileUri = Uri.fromFile(file);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    startActivityForResult(intent, TAKE_PICTURE);

} 
```

这将带我进入下一个 onActivityResult：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == TAKE_PICTURE) {
        if(outputFileUri != null){
            LogService.log("MainFragment", outputFileUri.toString());
            String path = outputFileUri.toString();
            selectedVideoPath = path.substring(7);
            LogService.log("in take pic", "selectedImagePath: " + selectedVideoPath);
            Intent paintActivity = new Intent(getActivity(), PaintActivity.class);
            paintActivity.putExtra("selectedImagePath", selectedVideoPath);
            paintActivity.putExtra("isVideo", false);
            startActivity(paintActivity);
            ((FragmentActivity) getActivity()).finish();
        } else{
            //                Toast.makeText(getActivity(), "No picture taken", Toast.LENGTH_SHORT).show();
            Intent main = new Intent(getActivity(), FragmentActivity.class);
            startActivity(main);
            ((FragmentActivity) getActivity()).finish();
        }

    }

} 
```

这工作正常，但是如果我调用意图拍照，然后按后退按钮，如果我之前已经拍照，它将加载该图片，如果没有，它将崩溃，因为通过按返回，它会不拍照。我该怎么做才能摆脱这种情况？

我试图测试：

```
 if(data != null) // instead of:  if(outputFileUri != null){ 
```

但这永远不会进入代码的“其他”部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:59:08.053

使用这些条件：

```
private static final int CAMERA_PIC_REQUEST = 1337;  

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if(requestCode==CAMERA_PIC_REQUEST && resultCode == RESULT_OK){

         log.d("something","something");          
    }
    else if (resultCode == Activity.RESULT_CANCELED) 
    {
        log.d("something","something");
    } 
```

}

# html - HTML5 文档大纲和语义

> ID：14772995
> 
> 赞同：0
> 
> 时间：2013-02-08T12:50:51.943
> 
> 标签：html

我一直在使用 HTML5 的一些元素，但从来没有真正让自己投入其中，所以我优先考虑让我的流浪汉开始工作。

我已经阅读了我能找到的每一个方面，并为自己建立了一个小测试器。我已经通过大纲工具运行它，一切似乎都胜过了。只是想知道是否有人愿意查看我的完整测试文档，看看我是否忽略了某些事情/做任何严重错误的事情。

```
<body>
    <!-- Header --> 
    <header>
        <img src="logo.jpg" alt="Logo" />
        <h1>Slogan</h1>
        <nav>
            <header><h2 class="hide-element">Navigation</h2></header>
            <ul>
                <li>Nav Item</li>
                <li>Nav Item</li>
                <li>Nav Item</li>
            </ul>
        </nav>
    </header>       
    <!-- Main Content -->       
    <section id="wrapper">
        <header>
            <h2>Page Heading</h2>
        </header>               
        <section>               
            <h2 class="hide-element">Section Heading</h2>
            <article>
                <header>
                    <h3>Sub Heading</h3>
                    <time datetime="2013-02-08">February 8th 2013</time>
                </header>
                <p>Section Text</p>
                <footer>
                    Like Button
                </footer>
            </article>

            <article>
                <header>
                    <h3>Sub Heading</h3>
                </header>
                <p>Section Text</p>
                <figure>
                    <img src="" alt="" />
                    <figcaption>Caption</figcaption>
                </figure>
                <footer>
                    Like Button
                </footer>
            </article>              
        </section>

        <aside>
            <h2 class="hide-element">Sidebar</h2>
            <nav>
                <header>
                    <h3>Categories</h3>
                </header>
                <ul>
                    <li>Sidebar Nav Item</li>
                    <li>Sidebar Nav Item</li>
                    <li>Sidebar Nav Item</li>
                </ul>
            </nav>
        </aside>            
    </section>

    <!-- Footer -->     
    <footer>
        <nav>
            <h3>Links</h3>
            <ul>
                <li>Link</li>
                <li>Link</li>
                <li>Link</li>
            </ul>
        </nav>
        <section>
            <h3>Social</h3>
            <a href="">Link to Twitter</a>
            <a href="">Link to Facebook</a>
        </section>
        <p class="copyright">&#169; Copyright 2013</p>
        <p class="credit"><a href="" target="_blank">Credit</a></p>
    </footer>   
</body> 
```

**更新**

在标签内添加了 h2 周围。没有意识到你可以在里面。谢谢

将 div#wrapper 更改为部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:10:52.580

该`div`元素没有对[content 进行分段](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#sectioning-content)，因此这意味着您`header`在同一大纲级别有两个元素，一个是 的直接子级，一个是`body`的直接子级`div#wrapper`。这在规范中当然不是无效的，甚至是不[鼓励的](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-header-element)，但它看起来确实有点奇怪。如果您希望它成为内容的标题，`#wrapper`而不仅仅是整个页面的第二个标题，那么您的`#wrapper`元素应该是 a`section`或 an `article`。除此之外，我认为标记结构很好。