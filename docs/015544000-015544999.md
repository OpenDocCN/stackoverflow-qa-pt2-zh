# StackOverflow 问答 15544000-15544999

# linux - 我如何使用 shell 脚本来设置环境变量

> ID：15544001
> 
> 赞同：0
> 
> 时间：2013-03-21T09:45:29.297
> 
> 标签：linux, shell

要设置环境变量，每当我开始在我的 Linux 工作环境中工作时，我都在做源代码（通过使用下面的命令） `. /opt/kmc/pbs/env/1.1/etc/setup.env rev.52`

当将此行（`". /opt/kmc/pbs/env/1.1/etc/setup.env rev.52"`）添加到我的 shell 脚本中时

它没有运行，它返回一些错误。我也创建了别名。即使无法执行此操作。

```
alias test='. /opt/kmc/pbs/env/1.1/etc/setup.env rev.52'
test 
```

那么我怎样才能在脚本中“输入”而不是手动给出这个命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:49:42.627

那很奇怪。在 BASH 中，您可以同时执行以下操作：

```
. /path/to/your/skript 
```

或者

```
source /path/to/your/skript 
```

您想要获取的脚本的路径是什么？是 '/opt/fedex/pbs/env/1.1/etc/setup.env rev.52'

那么你应该这样做：

```
 . '/opt/fedex/pbs/env/1.1/etc/setup.env rev.52' 
```

或者

```
 source '/opt/fedex/pbs/env/1.1/etc/setup.env rev.52' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:50:30.147

您可以使用该`source`命令。那是：

```
source /path/to/file 
```

请注意，如果您提到“一些错误”，我们对此无能为力。除非您指定那些错误类型。

# r - 如果另一列的值大于 0，如何替换一列中的 NA？

> ID：15544012
> 
> 赞同：1
> 
> 时间：2013-03-21T09:46:08.153
> 
> 标签：r, replace, find, criteria

我有 8 条人口普查线 ( `L1:L8`)。目前，一些记录已经`NA`而不是`0`何时进行了普查。当相应的努力列 ( ) 的值大于 0 时（意味着它们已被普查），我想将每个列 ( ) 中的所有内容`NA`替换为。`0``L1:L8``EFFORT_L1:EFFORT_L8`

样本数据：

```
df <-structure(list(KARTA = c("02C2H", "02C2H", "02C2H", "02C2H", 
"02C2H", "02C2H"), YEAR = c(1997L, 1997L, 1997L, 1997L, 1997L, 
1997L), ART = c("009", "031", "012", "057", "065", "073"), L1 = c(NA, 
NA, NA, NA, 2, NA), L2 = c(NA, NA, 7, NA, 3, NA), L3 = c(NA, 
NA, NA, NA, 1, NA), L4 = c(NA, NA, NA, NA, 1, NA), L5 = c(NA, 
NA, NA, NA, 1, NA), L6 = c(NA_real_, NA_real_, NA_real_, NA_real_, 
NA_real_, NA_real_), L7 = c(NA, NA, NA, 1, NA, 1), L8 = c(NA_real_, 
NA_real_, NA_real_, NA_real_, NA_real_, NA_real_), EFFORT_L1 = c(10, 
10, 10, 10, 10, 10), EFFORT_L2 = c(10, 10, 10, 10, 10, 10), EFFORT_L3 = c(9.625, 
9.625, 9.625, 9.625, 9.625, 9.625), EFFORT_L4 = c(10, 10, 10, 
10, 10, 10), EFFORT_L5 = c(9.125, 9.125, 9.125, 9.125, 9.125, 
9.125), EFFORT_L6 = c(9.75, 9.75, 9.75, 9.75, 9.75, 9.75), EFFORT_L7 = c(9.75, 
9.75, 9.75, 9.75, 9.75, 9.75), EFFORT_L8 = c(10, 10, 10, 10, 
10, 10), Total_Route_Effort = c(78.25, 78.25, 78.25, 78.25, 78.25, 
78.25)), .Names = c("KARTA", "YEAR", "ART", "L1", "L2", "L3", 
"L4", "L5", "L6", "L7", "L8", "EFFORT_L1", "EFFORT_L2", "EFFORT_L3", 
"EFFORT_L4", "EFFORT_L5", "EFFORT_L6", "EFFORT_L7", "EFFORT_L8", 
"Total_Route_Effort"), row.names = c(NA, 6L), class = "data.frame") 
```

单列的示例代码（注意我正在为所有八列寻找一个有效的解决方案）：

```
df[is.na(df[,"L1"]) & df[,"EFFORT_L1"] > 0, "L1"] <- 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:55:08.220

```
df[paste0("L", 1:8)][is.na(df[paste0("L", 1:8)]) 
                     & df[paste0("EFFORT_L", 1:8)] > 0] <- 0 
```

结果：

```
> df
  KARTA YEAR ART L1 L2 L3 L4 L5 L6 L7 L8 EFFORT_L1 EFFORT_L2
1 02C2H 1997 009  0  0  0  0  0  0  0  0        10        10
2 02C2H 1997 031  0  0  0  0  0  0  0  0        10        10
3 02C2H 1997 012  0  7  0  0  0  0  0  0        10        10
4 02C2H 1997 057  0  0  0  0  0  0  1  0        10        10
5 02C2H 1997 065  2  3  1  1  1  0  0  0        10        10
6 02C2H 1997 073  0  0  0  0  0  0  1  0        10        10
  EFFORT_L3 EFFORT_L4 EFFORT_L5 EFFORT_L6 EFFORT_L7 EFFORT_L8
1     9.625        10     9.125      9.75      9.75        10
2     9.625        10     9.125      9.75      9.75        10
3     9.625        10     9.125      9.75      9.75        10
4     9.625        10     9.125      9.75      9.75        10
5     9.625        10     9.125      9.75      9.75        10
6     9.625        10     9.125      9.75      9.75        10
  Total_Route_Effort
1              78.25
2              78.25
3              78.25
4              78.25
5              78.25
6              78.25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:44:05.173

这并不能*完全*回答您的问题，但可能会帮助您解决一些未来的问题：从今天开始查看您的两个问题后，*您是否考虑过将数据转换为半长格式并改为使用它？*

这是一个玩具示例：

### 样本数据

```
set.seed(1)
myDF <- data.frame(
  ID1 = sample(letters[1:5], 5, replace = TRUE),
  ID2 = 1:5, ID3 = "999",
  V1 = 99, V2 = 99, V3 = 99,
  EV1 = sample(0:5, 5, replace = TRUE),
  EV2 = sample(0:3, 5, replace = TRUE),
  EV3 = sample(0:2, 5, replace = TRUE),
  stringsAsFactors = FALSE
)
myDF$ID3[c(1, 4)] <- 100
myDF$V1[c(4, 5)] <- 100
myDF$V2[c(1, 3, 5)] <- 100
myDF
#   ID1 ID2 ID3  V1  V2 V3 EV1 EV2 EV3
# 1   b   1 100  99 100 99   5   0   1
# 2   b   2 999  99  99 99   5   0   2
# 3   c   3 999  99 100 99   3   2   2
# 4   e   4 100 100  99 99   3   1   1
# 5   b   5 999 100 100 99   0   3   2 
```

### 半长（或半宽，取决于您的观点）格式的数据

```
myDFLong <- reshape(myDF, direction = "long", idvar = 1:3,
                    varying = 4:ncol(myDF), sep = "")
myDFLong
#           ID1 ID2 ID3 time   V EV
# b.1.100.1   b   1 100    1  99  5
# b.2.999.1   b   2 999    1  99  5
# c.3.999.1   c   3 999    1  99  3
# e.4.100.1   e   4 100    1 100  3
# b.5.999.1   b   5 999    1 100  0
# b.1.100.2   b   1 100    2 100  0
# b.2.999.2   b   2 999    2  99  0
# c.3.999.2   c   3 999    2 100  2
# e.4.100.2   e   4 100    2  99  1
# b.5.999.2   b   5 999    2 100  3
# b.1.100.3   b   1 100    3  99  1
# b.2.999.3   b   2 999    3  99  2
# c.3.999.3   c   3 999    3  99  2
# e.4.100.3   e   4 100    3  99  1
# b.5.999.3   b   5 999    3  99  2 
```

请注意，我们现在只有一列对应“L”列，一列对应“EFFORT_L”列。已创建“时间”变量（相当于您的 1-8 条“人口普查线”）。

### 从今天开始回答你的两个问题

到目前为止，您的两个问题都可以通过一些简单的`ifelse`陈述轻松解决。

```
# Your first question from today
myDFLong$V <- with(myDFLong, ifelse(ID3 == 999 & V == 99, NA, V))
# Continuation from that point
myDFLong$V <- with(myDFLong, ifelse(EV > 0 & is.na(V), 0, V))
myDFLong
#           ID1 ID2 ID3 time   V EV
# b.1.100.1   b   1 100    1  99  5
# b.2.999.1   b   2 999    1   0  5
# c.3.999.1   c   3 999    1   0  3
# e.4.100.1   e   4 100    1 100  3
# b.5.999.1   b   5 999    1 100  0
# b.1.100.2   b   1 100    2 100  0
# b.2.999.2   b   2 999    2  NA  0
# c.3.999.2   c   3 999    2 100  2
# e.4.100.2   e   4 100    2  99  1
# b.5.999.2   b   5 999    2 100  3
# b.1.100.3   b   1 100    3  99  1
# b.2.999.3   b   2 999    3   0  2
# c.3.999.3   c   3 999    3   0  2
# e.4.100.3   e   4 100    3  99  1
# b.5.999.3   b   5 999    3   0  2 
```

* * *

### 最后阶段：如果您愿意，可以返回宽格式

您可以使用基本 R 重新转换为宽格式，但在这种情况下，使用“reshape2”包会更容易，如下所示：

```
library(reshape2)
myDF2 <- melt(myDFLong, id.vars=1:4)
myDFFinal <- dcast(myDF2, ID1 + ID2 + ID3 ~ variable + time)
myDFFinal
#   ID1 ID2 ID3 V_1 V_2 V_3 EV_1 EV_2 EV_3
# 1   b   1 100  99 100  99    5    0    1
# 2   b   2 999   0  NA   0    5    0    2
# 3   b   5 999 100 100   0    0    3    2
# 4   c   3 999   0 100   0    3    2    2
# 5   e   4 100 100  99  99    3    1    1 
```

但是，我建议你只在最后才这样做——很多事情，比如绘图函数等等，比如数据一开始就采用长或半长格式，所以可能值得你花时间考虑它用于您的数据。

但请务必小心，因为您的数据当前已命名行 - 您需要将它们作为列添加到您的数据中，以充分利用它们作为额外的 ID 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:59:47.140

如果“L”变量的数量不固定，您可以使用：

```
l.vars <- grep("^L\\d$", names(df),value=TRUE)
for (v in l.vars) {
  effort.var <- paste0("EFFORT_", v)
  df[is.na(df[,v]) & df[,effort.var] > 0, v] <- 0
} 
```

# linux - Memcached：放在哪里？

> ID：15544016
> 
> 赞同：0
> 
> 时间：2013-03-21T09:46:16.483
> 
> 标签：linux, drupal, memcached

对于 Drupal Stack，我有 3 个服务器：

*   漆
*   网络服务器
*   数据库服务器

..***假设我只有这 3 个服务器的限制。没有更多的服务器***。

现在我必须安装`Memcached`，但我不确定在哪里安装它。
所以`Memcached`对于 Drupal 堆栈：

*   放在哪里？（而不是谈论另一个单独的盒子。）

老实说，正如我发现`Drupal Memcached Module`的那样，我虽然`Memcached`适用于 Drupal 所在的应用程序服务器。所以我把它放在了 Web/Application Server 上，但结果似乎比以前更糟。那么在哪里呢？在数据库服务器上？或者，总而言之？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:16:36.517

您的 Varnish 服务器已经在使用大量 RAM 来存储缓存页面。它的负载应保持尽可能低，以使其能够快速产生对 HTTP 请求的响应。使用 Memcache 进行缓存不会减少其负载。

您的 Drupal 服务器已加载响应请求。Drupal 通常会消耗大量 RAM。将 Varnish 放在上面的主要原因是为了减少它的负载。从这个服务器询问更多是没有意义的。使用 Memcache 进行缓存不会减少其负载。

您的数据库服务器主要忙于处理 Drupal 发出的数据库请求的磁盘 I/O。它的主要负载是 I/O 绑定的，使用 Memcache 进行缓存将减少其负载。Memcached 不应添加更多磁盘 I/O，也不需要大量 CPU。它只会增加更多的网络 I/O，所以除非你的数据库服务器被网络 I/O 压得喘不过气来，否则应该没问题。

所以我会把memcached放在数据库服务器上。

# c# - c# DataTable，删除添加的行

> ID：15544021
> 
> 赞同：3
> 
> 时间：2013-03-21T09:46:28.533
> 
> 标签：c#, dataset, sdf

c#中的DataSets有一些问题，它表示sdf文件中DB的结构和数据。我正在用 DB 进行一些自动测试，所以我应该在表中添加一些行，执行测试并从表中删除添加的行。

表架构：

```
Num - ID, autoincrementing, primary key
Name - string
Photo - Image (binary) 
```

我的代码是：

```
 adapter.Fill(set);
    row1 = datatable.Rows.Add(null, "Name1", File.ReadAllBytes(@"Images\photo1.jpg"));
    row2 = datatable.Rows.Add(null, "Name2", File.ReadAllBytes(@"Images\photo2.jpg"));
    adapter.Update(set);

    ... perfoming test...

    adapter.Fill(set);
    row1.Delete();
    row2.Delete();
    adapter.Update(set); 
```

但是添加的行仍在基础中。我试过用

```
datatable.Rows.Remove(row1);
datatable.Rows.Remove(row2); 
```

但它会导致 no-such-row-exception 因为 row1 和 row2 中的错误“Num”值，这与 DB 中的实际自动增量值不同。

1.  添加行时如何获得 Num 的真实值？
2.  “添加行”->“执行某事”->“删除添加的行”问题是否有更智能的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:43:33.650

我自己找到了解决方案。首先，我在 DB 中创建了一个 SQL Query，它添加一行并返回一个新行的 Num 值：

```
INSERT INTO [Table] ([Name], [Photo]) VALUES (@Name, @Photo);
SELECT  @@IDENTITY 
```

我称它为“InsertAndReturnIdentificator”。然后我直接使用插入（使用这个新查询）和删除适配器中的行，而不使用 DataSet

```
private Nullable<decimal> row1;
private Nullable<decimal> row2;

row1 = adapter.InsertAndReturtIdentificator("Name1", File.ReadAllBytes(@"Images\Photo1.jpg")) as Nullable<decimal>;
row2 = adapter.InsertAndReturtIdentificator("Name2", File.ReadAllBytes(@"Images\Photo2.jpg")) as Nullable<decimal>;

... performing test ...

adapter.Delete(Decimal.ToInt32(row1.Value));
adapter.Delete(Decimal.ToInt32(row2.Value)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T09:53:51.873

我认为问题会在这里：

```
row1 = datatable.Rows.Add(null, "Name1", File.ReadAllBytes(@"Images\photo1.jpg")); 
```

尝试将您的陈述替换为：

```
int i = 0;
datatable.Rows.Add(i++, "Name1", File.ReadAllBytes(@"Images\photo1.jpg"));
datatable.Rows.Add(i++, "Name2", File.ReadAllBytes(@"Images\photo2.jpg")); 
```

并删除

```
datatable.Rows[i].Delete(); 
```

查看 MSDN 上的这些链接：

*   列表项[插入新记录](http://msdn.microsoft.com/en-us/library/5ycd1034%28v=vs.100%29.aspx)
*   列表项[删除记录](http://msdn.microsoft.com/en-us/library/feh3ed13%28v=vs.100%29.aspx)

# android - 在android的ondraw（）中的两个坐标之间画线

> ID：15544026
> 
> 赞同：0
> 
> 时间：2013-03-21T09:46:42.600
> 
> 标签：android, canvas, line

我有两点，比如说（x1，y1）和（x2，y2）。现在我必须使用`OnDraw()`方法在这些点之间画一条线。

我试过

```
Paint mPaint = new Paint()     
mPaint.setColor(Color.BLACK);    
path.moveTo(x1, y1);    
path.lineTo(x2, y2);

canvas.drawPath(path, mPaint); 
```

但它不工作

问候，

苏迪尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:51:43.703

像这样试试

```
canvas.drawLine(p1.x, p1.y, p2.x, p2.y, paint); 
```

# android - 在原生 Android 应用程序中使用 libssl.so

> ID：15544041
> 
> 赞同：2
> 
> 时间：2013-03-21T09:47:30.880
> 
> 标签：android, android-ndk, dalvik, libssl

我正在使用 NDK 为 Android 编写本机库（mylib.so）。Mylib.so 依赖于 libssl.so。

Android NDK 文档告诉我不应该使用 system/lib 中的 libssl.so，因为它不是稳定 API 的一部分。相反，我应该自己交叉编译 libssl 并将其添加到 NDK。

但是我看到 mylib.so 会自动与 system/lib/libssl.so 链接，因为 dalvik vm（正在加载 mylib.so）已经依赖于 libssl.so。

```
$ readelf -d /system/bin/dalvikvm | grep Shared
 0x00000001 (NEEDED)                     Shared library: [libdvm.so]
 0x00000001 (NEEDED)                     Shared library: [libssl.so]
 0x00000001 (NEEDED)                     Shared library: [libz.so]
 0x00000001 (NEEDED)                     Shared library: [libc.so]
 0x00000001 (NEEDED)                     Shared library: [libstdc++.s
 0x00000001 (NEEDED)                     Shared library: [libm.so] 
```

那么处理这个问题的正确方法是什么？仍然使用 system/lib/libssl.so 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T11:12:53.117

您可以在以下站点下载它： [http ://www.mediafire.com/download/njyqyxu3nxm/tcpdump.zip](http://www.mediafire.com/download/njyqyxu3nxm/tcpdump.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:32:47.200

听起来问题可能出在您的 Android.mk 文件中。假设您已经成功地将所需的 libssl 版本交叉编译为 .so 文件，您将需要在 Android.mk 文件中创建一个新模块，如下所示：

```
include $(CLEAR_VARS)
LOCAL_MODULE := libssl-prebuilt
LOCAL_SRC_FILES := libssl.so
LOCAL_EXPORT_C_INCLUDES := /path/to/the/include/files/for/libssl.so
include $(PREBUILT_SHARED_LIBRARY) 
```

上面的模块将您本地预构建的 libssl.so 版本添加到您的本机项目中。如果在编译 mylib.so 时要链接本地版本的 libssl.so，则必须将以下条目添加到 mylib 模块中。

```
LOCAL_SHARED_LIBRARIES := libssl-prebuilt 
```

# javascript - 在无序列表中将多个 Textareas 转换为 LI

> ID：15544043
> 
> 赞同：0
> 
> 时间：2013-03-21T09:47:37.093
> 
> 标签：javascript, jquery, html

我有未知数量的文本区域。要处理用户输入的数据，我需要将其内容转换为列表元素。

使用 JavaScript 和/或 jQuery，我该如何转换：

```
<textarea>content 1</textarea>
<textarea>content 2</textarea>
<textarea>content 3</textarea> 
```

对此：

```
<ul>
    <li>content 1</li>
    <li>content 2</li>
    <li>content 3</li>
</ul> 
```

我需要将生成的 UL 分配给发送到 AJAX 服务的变量。

编辑 - 到目前为止我试过：

```
var visibleTextareas = $('textarea:visible');

var listItems = visibleTextareas.replaceWith(function() {
    return $('<li>' + $(this).val() + '</li>');
});

var text = '<ul>' + listItems + '</ul>';
console.log(text); 
```

这导致`<ul>[object Object]</ul>`被记录到控制台并且后端响应它需要一个 UL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:51:23.353

尝试这样的事情：

```
var output = '<ul>';

$('textarea').each(function(){
    output += '<li>' + $(this).val() + '</li>';
});

output += '</ul>'; 
```

那对你有用吗？

**编辑：** `.val()`在这种情况下更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:52:02.180

查看上的[jQuery API](http://api.jquery.com/each/)`.each()`，第二个示例应该对您有所帮助..

# .htaccess - 301 将丑陋的 URL 重定向到干净的 URL

> ID：15544045
> 
> 赞同：0
> 
> 时间：2013-03-21T09:47:39.693
> 
> 标签：.htaccess

你好我这里有问题。我正在寻找解决方案，但没有找到解决方案...所以我的 htacess 文件

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php?page=$1 [QSA] 
```

它将我的网址更改为漂亮的网址，例如 www.example.com/index.php?page=xxx 到 www.example.com/xxx 所以它可以工作，但问题是我可以从这两个网址访问同一个页面。所以它就像来自谷歌不同网址的相同内容。如何进行从旧链接到新链接的 301 重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:49:29.357

在该行的正下方`RewriteEngine On`，添加以下内容：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /index\.php\?page=([^&\ ]+)&?([^\ ]*)
RewriteRule ^ /%2?%3 [L,R=301] 
```

这将检查实际请求（而不是请求 URI）`/index.php`并提取**页面**参数的值，然后将浏览器重定向到参数值的 URI（将任何剩余的查询字符串附加到它）。这会将浏览器的 URL 地址栏中的内容更改为不带`/index.php`.

# java - Servlet 响应应该被缓存但不是

> ID：15544046
> 
> 赞同：2
> 
> 时间：2013-03-21T09:47:40.750
> 
> 标签：java, caching, servlets, response

我正在尝试缓存 servlet 响应，但不知何故它不起作用（每次刷新页面时，Firebug 都会给我 200 OK）。这是我在 servlet 中添加的代码：

```
response.setContentType("application/javascript");
long now = System.currentTimeMillis();
response.setCharacterEncoding("UTF-8");
response.setDateHeader("Last-Modified", 0);
response.addHeader("Cache-Control", "max-age=5184000");
response.setDateHeader("Expires", now + 5184000 * 1000);
response.addHeader("Vary", "Host"); 
```

我现在也尝试过 with`setHeader`和 with `Last-Modified`。

似乎没有任何效果。有任何想法吗？

谢谢

这就是萤火虫向我显示响应/请求标头的方式（当资源应该从缓存中获取但不是时）：

```
 Response Headersview source
 Cache-Control  max-age=5184000
 Connection Keep-Alive
 Content-Type   application/javascript;charset=UTF-8
 Date   Thu, 21 Mar 2013 09:53:48 GMT
 Expires    Sun, 31 Mar 2013 16:51:01 GMT
 Keep-Alive timeout=15, max=99

 Request Headersview source
 Accept */*
 Accept-Encoding    gzip, deflate
 Accept-Language    en-US,en;q=0.5
 Cache-Control  max-age=0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:07:51.880

使用`Last-Modified`需要在您的 servlet 中进行协作编码。当您将其发送给客户端时，该客户端将在请求相同的资源时发回一组可能的标头之一：

*   If-Modified-Since:
**   If-Unmodified-Since：*

 **您必须处理这些标头，确定自给定日期以来内容是否已更改，如果没有，则发送 304 响应。大量的手工工作。另请注意，`Last-Modified`日期必须[有效](https://www.rfc-editor.org/rfc/rfc2822)（例如：）`Tue, 15 Nov 1994 12:45:26 GMT`。

对您来说最简单的方法是暂时忽略`Last-Modified`，而使用`Cache-Control`and`Expires`标头。您的`Expires`标题需要采用有效的日期格式，如`Last-Modified`标题所述。

您可以在[这个出色的文档](http://www.mnot.net/cache_docs/)中阅读更多关于缓存的内容。**

# jruby - 当使用 jrubyc 编译时，AST 会停留在运行时吗？

> ID：15544047
> 
> 赞同：0
> 
> 时间：2013-03-21T09:47:47.220
> 
> 标签：jruby

有 ruby​​2ruby 编译器，它可以从 AST 恢复 ruby​​ 代码。

我很好奇，如果我用 jrubyc 编译我的代码，那么可以在我正在运行的应用程序中评估他自己的代码的人是否有可能获得我自己的 ruby​​ 类的 AST，然后用 ruby​​2ruby 恢复 ruby​​ 代码？

我在 ruby​​ 1.8 兼容模式下使用 jruby 1.6.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:56:48.247

正如我从[这个页面](http://kenai.com/projects/jruby/pages/JRubyCompiler)所知道的那样，AST 确实以某种形式存在于编译的类文件中，因此它至少在理论上可以通过在同一个 JVM 实例中运行的不受信任的代码来恢复。在实践中，Java 反编译器可能确实会产生类似的结果。

# vbscript - VB 脚本将 csv 文件数据复制到 Excel 工作表。请以其他方式帮助我

> ID：15544050
> 
> 赞同：0
> 
> 时间：2013-03-21T09:48:02.567
> 
> 标签：vbscript

```
Sub AddCsvDataToExcel()
'Ask User for File's Name
      filename = "E:\Surendra\Excel_Testing\NewTemplate\C_0_1\accelVsTime.csv"
      'Check for no entry
      'If filename = "" Then End
      'Get Next Available File Handle Number
      FileNum = FreeFile()
      'Open Text File For Input
      Open filename For Binary As #FileNum

      'Set The Counter to 1
      Counter = 1
      'Loop Until the End Of File Is Reached
      Do While Seek(FileNum) <= LOF(FileNum)
         'Display Importing Row Number On Status Bar
          'Store One Line Of Text From File To Variable
          Line Input #FileNum, ResultStr

          'Store Variable Data Into Active Cell
    With oExcelReadWorkSheet2
          splitValues = Split(ResultStr, ",")
          .Cells(Counter, 1) = Replace(splitValues(0), Chr(34), "")
          .Cells(Counter, 2) = Replace(splitValues(1), Chr(34), "")
          .Cells(Counter, 3) = Replace(splitValues(2), Chr(34), "")
          .Cells(Counter, 4) = Replace(splitValues(3), Chr(34), "")
        End With
          'Cells(Counter + 5, 5) = Replace(splitValues(4), Chr(34), "")
          'Cells(Counter + 5, 6) = Replace(splitValues(5), Chr(34), "")
          Counter = Counter + 1
      'Start Again At Top Of 'Do While' Statement
      Loop
      'Close The Open Text File
      Close
      'Remove Message From Status Bar
End Sub 
```

这`oExcelReadWorkSheet2`是我要复制数据的工作表对象。当我直接从 excel 运行此代码时，它正在工作。但是当我将它保存为 VBS 文件并运行时，我收到以下错误：

```
compilation error: `Expected end of statement at "Open filename For Binary As #FileNum"` 
```

有人知道我如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:59:13.247

VBA 不是 VBScript。而不是 VBA 的 Open，您必须使用[FileSystemObject](http://msdn.microsoft.com/en-us/library/314cz14s%28v=vs.84%29.aspx)的 .OpenTextFile、.ReadLine 和 .Close 方法。

# django - 循环复选框并非所有值都添加到数据库

> ID：15544052
> 
> 赞同：1
> 
> 时间：2013-03-21T09:48:04.137
> 
> 标签：django

我有以下功能，它应该做什么循环在一个名为组的复选框中提交的值，然后将每个值提交到数据库。但是，它似乎只向数据库添加了一个值。有什么不对的吗？

**组 = 1,3,3,4**

**功能更新**

```
def add_batch(request):
    # If we had a POST then get the request post values.
    if request.method == 'POST':
        form = BatchForm(request.POST)
        # Check we have valid data before saving trying to save.
        if form.is_valid():
            # Clean all data and add to var data.
            data = form.cleaned_data
            groups = data['groups'].split(",")
            for item in groups:
                batch = Batch(content=data['message'],
                              group=Group.objects.get(pk=item),
                              user=request.user
                              )
                batch.save()
    return redirect(batch.get_send_conformation_page()) 
```

**发布变量：**

```
groups  1, 3, 4 
```

**形式：**

```
<form action="{% url 'add_batch' %}" method="post" class="form-horizontal" enctype="multipart/form-data" >
     {% for item in groups %}
         <label class="groups">
            <input type="checkbox" name="groups" value="{{ item.id }}" /> {{item.name}}<br />
         </label>

     {% endfor %}
</form> 
```

**表格.py**

```
class BatchForm(forms.Form):

    groups = forms.CharField(max_length=100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:42:00.513

看起来您在一个页面上有多个复选框，每个复选框都有名称`groups`。这完全没问题。

当您提交这样的表单时，参数可能如下所示：

```
?groups=1&groups=3&groups=4 
```

另一方面，您的表单定义将组定义为`CharField`. 它将使用检索到的值填充，该值`request.GET['groups']`将仅检索上述值之一。

我认为如果您定义`groups`为：

```
CHOICES = (
(0, '1'),
(1, '2'),
(2, '3'),
)

class MyForm(forms.Form):
    groups = forms.MultipleChoiceField(
            choices=CHOICES, 
            label="Groups", 
            required=False) 
```

# html - 跨浏览器上的 CSS 重置

> ID：15544059
> 
> 赞同：0
> 
> 时间：2013-03-21T09:48:24.913
> 
> 标签：html, css, browser, cross-browser

我有一些元素的网页。当我在不同的浏览器上运行页面时，元素的位置不同。我希望元素的位置在所有浏览器（Chrome、Firefox、IE、Opera、Safari）中都相同。我重新设置了 CSS Reset 并创建了 CSS 文件，并将此页面[http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)中的内容放入其中以重置 css 配置。然后我运行该页面，它在不同的浏览器中再次看起来不同。我应该怎么做才能使页面在不同的浏览器中看起来一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:54:58.483

这是一个相当笼统的问题，所以任何建议也必须是通用的。

1.  使用触发[标准模式](http://en.wikipedia.org/wiki/Quirks_mode)的 Doctype （Quirks 模式不一致，你想避免它）
2.  [使用标记验证器](http://validator.w3.org)和[CSS 验证器](http://jigsaw.w3.org/css-validator/)测试您的 HTML 和 CSS
3.  考虑使用 CSS 重置来消除浏览器默认样式表之间的差异
4.  研究您必须了解的有关浏览器错误的特定问题，以便将来避免它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:57:11.933

CSS 重置并不是一个神奇的魔杖，它可以让你的页面在不同的浏览器中呈现相同的效果。从视觉上讲，它是将所有元素剥离到它们像 div 或 span 一样的地步。这为作者可以建立自己的风格思想奠定了基础。

因此，如果您编写的 CSS 在浏览器中呈现的效果不同，那并不是因为 CSS 重置不起作用。有不同的原因，例如缺乏对某些功能的支持，浏览器的错误或不同的实现......等

如果特定浏览器出现问题，您应该遵守标准并寻找解决方法。另请注意，不同的浏览器呈现网页的方式不同。这是我们必须接受的事实，并且在编写代码时尽量不要过分热心。有时它看起来永远不会完全一样！

# sql - sql server根据百分比计算值，根据uid添加分组

> ID：15544061
> 
> 赞同：1
> 
> 时间：2013-03-21T09:48:31.667
> 
> 标签：sql, sql-server

我有这张桌子`temp_calpoints1`

```
orderid processid uid ordervalue percent
1       1         16  33000      10
1       2         4   33000      10
1       3         5   33000      10
1       4         5   33000      20
1       5         4   700000     10
2       1         4   100000     10
2       2         4   100000     10
2       3         5   100000     10
2       4         4   100000     20
2       5         4   700000     10
2       6         1   700000     6
2       6         4   700000     6
2       6        16   700000     6
4       5         5   700000     10
5       1        16   700000     10 
```

我想得到输出

例如在第一条记录中的 ordervalue 的百分比值 10/100*33000=3300

我需要添加所有这些值并根据 uid 对它们进行分组

```
 uid  totalvalue
     1     xxx
     4     xxx
     5     xxx
     16    xxx 
```

我试过这个，但有些它不工作

```
SELECT
  processid,
  SUM(ordervalue) AS [TotalSales]
FROM [dbo].temp_calpoints1
GROUP BY [uid] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:12:50.497

试试这个选项

```
SELECT [uid], SUM(([percent] / 100.00) * ordervalue) AS total 
FROM dbo.test46
GROUP BY [uid] 
```

结果：

```
uid total
1   42000.000000
4   225300.000000
5   89900.000000
16  115300.000000 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/3d2ad/1)上的演示[](http://sqlfiddle.com/#!3/3d2ad/1)

# liferay - Liferay Velocity 中的用户代理 - 模板

> ID：15544064
> 
> 赞同：1
> 
> 时间：2013-03-21T09:48:33.917
> 
> 标签：liferay, user-agent, velocity

可以知道速度模板中的用户代理吗？我在liferay中使用插件“移动设备识别wurfl”。

Liferay 检测到用户代理，它向我显示移动页面，但进入模板始终是：

mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.22 (khtml, like gecko) chrome/25.0.1364.172 safari/537.22

我用：

Mozille firefox 插件 发送用户代理切换工具：Mozilla/5.0 (iPhone; U; CPU iPhone OS 3_0 like Mac OS X; en-us) AppleWebKit/528.18 (KHTML, like Gecko) Version/4.0 Mobile/7A341 Safari/ 528.16

进入我使用的模板：

# set($agent = $request.get('attributes').get('User-Agent'))

$代理

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:53:31.177

我怀疑没有人回答你的问题，因为它有点难以理解你的实际问题是什么，但这是我用于移动检测的 Velocity 代码片段，也许这会让你朝着正确的方向前进？

```
#set($userAgent = $request.getHeader("User-Agent").toLowerCase())
#set($is_mobile = false)
#if($userAgent.matches(".*(android.+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino).*")||$userAgent.substring(0,4).matches("1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-")) 
    #set($is_mobile = true)
#end 
```

# php - 如何使用 PDO 的 FETCH_CLASS 分配构造函数参数？

> ID：15544071
> 
> 赞同：3
> 
> 时间：2013-03-21T09:48:39.637
> 
> 标签：php, pdo

我想使用 PDO 创建对象的实例。我知道已经有很多[问题](https://stackoverflow.com/questions/12368035/pdo-fetch-class-pass-results-to-constructor-as-parameters)了，但我只发现可以将一组参数发送给构造函数。对我来说，构造函数似乎只能接受一个数组作为参数。但是，这会使构造函数变得不那么有意义。

我想用我自己的 getter 和 setter 创建一个类，如下所示：

```
class MyClass {
    private propertyA
    private propertyB

    public __constructor($argA, $argB) {
        $this->setPropertyA($argA);
        $this->setPropertyB($argB);
    }

    public setPropertyA($arg) {
        $this->proprtyA = $arg;
    }
} 
```

有没有一种优雅的方法可以使用数据库中的数据创建此类的实例，最好是使用 PDO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:08:53.510

在这里自由球：

```
$handle = new PDO("blahblahblah");
$statement = $handle->prepare("SELECT blahblah");
$statement->execute();
$object_params = $statement->fetch(PDO::FETCH_ASSOC);

$object = new Object($object_params);
// OR...
$object = new Object($object_params["col_1"], $object_params["col_2"], "etc."); 
```

或者：

```
class MyClass {
    private propertyA
    private propertyB

    public __constructor() {
        $handle = new PDO("blahblahblah");
        $statement = $handle->prepare("SELECT blahblah");
        $statement->execute();
        $object_params = $statement->fetch(PDO::FETCH_ASSOC);

        $this->setPropertyA($object_params[$argA_key]);
        $this->setPropertyB($object_params[$argB_key]);
    }

    public setPropertyA($arg) {
        $this->proprtyA = $arg;
    }
} 
```

我不知道你在寻找什么。你能评论一下吗？

# objective-c - 从自定义类向 ViewController 添加 UIButton

> ID：15544072
> 
> 赞同：1
> 
> 时间：2013-03-21T09:48:41.260
> 
> 标签：objective-c, uibutton

我有一个名为“菜单”的类创建 UIButton：

.h 文件：

```
@interface Menu : NSObject

@property (strong) Forme *forme;
@property (strong) NSString *imageButtonName;
@property (strong) UIButton *button;

- (id) initWithClef:(int)clef hauteur:(int)hauteur largeur:(int)largeur posY:(int)posY posX:(int)posX alpha:(float)alpha imageButtonName:(NSString*)imageButtonName button:(UIButton*)button;

@end 
```

.m 文件：

```
#import "Menu.h"

@implementation Menu

@synthesize forme = _forme;
@synthesize button = _button;
@synthesize imageButtonName = _imageButtonName;

- (id) initWithClef:(int)clef hauteur:(int)hauteur largeur:(int)largeur posY:(int)posY posX:(int)posX alpha:(float)alpha imageButtonName:(NSString *)imageButtonName button:(UIButton *)button
{
    if ((self = [super init]))
        {
            NSLog (@"test2");
            self.forme =[[Forme alloc]initWithClef:clef hauteur:hauteur largeur:largeur posY:posY posX:posX alpha:alpha];
            self.button = button;
            [button setFrame:CGRectMake(largeur, hauteur, posX, posY)];
            [button setBackgroundImage:[UIImage imageNamed:imageButtonName] forState:UIControlStateNormal];
        }
    return self;
} 
```

我想自动将创建的按钮显示到 ViewController 视图。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:57:14.903

*我认为您应该阅读一些手册和教程*

只需在 init 方法中将此按钮添加到 viewcontroller 的视图中：

```
 [button setBackgroundImage:[UIImage imageNamed:imageButtonName] forState:UIControlStateNormal];
 [self.view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:59:04.633

我认为只需在视图中添加一个按钮就可以了，调用：

```
[self.view addSubview:button] 
```

初始化按钮后，您仍然需要使用 addSubview 将按钮“添加”到视图中，否则您的按钮将不会绘制在屏幕上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:35:45.963

并将 onView 参数添加到您的 initClef....

```
- (id) initWithClef:(int)clef hauteur:(int)hauteur largeur:(int)largeur posY:(int)posY posX:(int)posX alpha:(float)alpha imageButtonName:(NSString *)imageButtonName button:(UIButton *)button onView:(UIView *)view
{
    if ((self = [super init]))
    {
        NSLog (@"test2");
 //       self.forme =[[Forme alloc]initWithClef:clef hauteur:hauteur largeur:largeur posY:posY posX:posX alpha:alpha];
        self.button = button;
        [button setFrame:CGRectMake(largeur, hauteur, posX, posY)];
        [button setBackgroundImage:[UIImage imageNamed:imageButtonName] forState:UIControlStateNormal];
        [view addSubview:button];

    }
    return self;
} 
```

在 viewController 中调用它

```
 Menu * menu2=[[Menu alloc] initWithClef:1 hauteur:30 largeur:30 posY:30 posX:30 alpha:1 imageButtonName:@"arti.png" button:b onView:self.view]; 
```

# jquery - 总计显示以 .999995 结尾的价格

> ID：15544073
> 
> 赞同：1
> 
> 时间：2013-03-21T09:48:41.920
> 
> 标签：jquery, calculator

我在这个脚本上有一个错误。计算系统工作，但它有一个错误：

```
$(document).ready( function() {
    $("#total").val("55.95");
    $("#amount").val("512MB");
    $("#amount1").val("512MB");
    $("#amountb").val("10GB");
    $("#amount2").val("10GB");

    $( function() {
        var ram = {

            0: "512MB",
            1: "1GB",
            2: "2GB",
            3: "4GB",
            4: "8GB",
            5: "16GB",
            6: "32GB",

        };
        var pram = {

            0: "49.95",
            1: "89.95",
            2: "149.95",
            3: "32",
            4: "64",
            5: "128",
            6: "256",

        }
        var hdd = {

            0: "10GB",
            1: "15GB",
            2: "20GB",
            3: "25GB",
            4: "30GB",
            5: "35GB",

        };
        var phdd = {

            0: "49.95",
            1: "99.95",
            2: "100.95",
            3: "49.14",
            4: "28",
            5: "40",
        }
        $("#slider").slider({

            value: "0",
            min: 0,
            max: 6,
            step: 0,
            slide: function(event, ui) {

                $("#price").val(pram[ui.value]);
                $("#amount").val(ram[ui.value]);
                $("#amount1").val(ram[ui.value]);
                var aaa = $("#price").val();
                var bbb = $("#priceb").val();
                $("#total").val(+aaa + +bbb);
            }
        });

        $("#sliderb").slider({
            value: "0",
            min: 0,
            max: 5,
            step: 1,
            slide: function(event, ui) {
                $("#priceb").val(phdd[ui.value]);
                $("#amountb").val(hdd[ui.value]);
                $("#amount2").val(hdd[ui.value]);
                var aaa = $("#price").val();
                var bbb = $("#priceb").val();
                $("#total").val(+aaa + +bbb);
            }
        });

        $("#price").val('$' + $("#slider").slider("value"));
        $("#priceb").val('$' + $("#slider").slider("value"));

        $("#price").val("4");
        $("#priceb").val("3");

    }
    );
}); 
```

如果我计算 49.95 + 149.95 结果是 199.89999995，结果是 199.9 我不知道该怎么办。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:02:00.307

不要将浮点值用于货币数据。保持您的价格以美分为单位，并为演示文稿相应地格式化数字。[浮点数总是有舍入误差](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)。

如果您使用美分，您所要做的就是除以`100`是否要以美元（或任何其他货币）显示值：

```
var total = 4495 + 14995;
var display = total / 100;
$("#total").val(display); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:59:05.367

您返回格式化货币的函数应四舍五入为 2.dp，例如

```
var symbol="&#36; ";
var p1 = 49.95;
var p2 = 149.95;
var sum = p1+p2;
return symbol+sum.toFixed(2); //just return the sum to 2 decimal places 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:59:15.617

假设您想要`199.89999995`as `199.9`，请尝试：

```
var x = 49.95 + 149.95;    

Math.ceil(x *10) / 10;   // 199.9 
```

如果是舍入误差，那么除了 Felix King 的建议外，无能为力。

# android - java.lang.NoClassDefFoundError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential

> ID：15544080
> 
> 赞同：7
> 
> 时间：2013-03-21T09:49:00.140
> 
> 标签：android, google-drive-api

我正在尝试在我的 android Applciation 中实现 Google Drive，并且 `java.lang.NoClassDefFoundError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential` 出现错误，所以任何知道如何解决这个问题的人。

我现在还在尝试

*   成功导入 Google Drive 所需的所有 .jar
*   导入 Google Play 服务库。在我的项目中成功
*   试图重新启动eclipse并检查但同样的错误即将到来
*   从 google Drive API 或 Android Play 服务获得 API 密钥和客户端 ID
*   已经[在这里访问了一些解决方案](https://stackoverflow.com/questions/14372391/java-lang-noclassdeffounderror-com-google-android-gms-rstyleable)

并尝试与[这里相同](https://developers.google.com/drive/quickstart-java)

这是我的Logcat-

```
 03-21 15:03:55.194: E/AndroidRuntime(940): FATAL EXCEPTION: main
03-21 15:03:55.194: E/AndroidRuntime(940): java.lang.NoClassDefFoundError: com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential
03-21 15:03:55.194: E/AndroidRuntime(940):  at com.example.alltaskass.GoogleDrive.onCreate(GoogleDrive.java:53)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.os.Looper.loop(Looper.java:126)
03-21 15:03:55.194: E/AndroidRuntime(940):  at android.app.ActivityThread.main(ActivityThread.java:3997)
03-21 15:03:55.194: E/AndroidRuntime(940):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 15:03:55.194: E/AndroidRuntime(940):  at java.lang.reflect.Method.invoke(Method.java:491)
03-21 15:03:55.194: E/AndroidRuntime(940):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-21 15:03:55.194: E/AndroidRuntime(940):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-21 15:03:55.194: E/AndroidRuntime(940):  at dalvik.system.NativeStart.main(Native Method) 
```

但是我仍然被这个错误卡住了，不知道如何解决这个问题，请指导我

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T06:54:44.950

我得到了以下帮助：

1.  **在Project Properties/Java Build Path/Order and Export**中检查 Drive API

     **此后 Drive API jars 添加到项目到 lib 文件夹** 
***   取消选中 Drive API** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:00:45.073

此错误是由于您在此应用程序的库中编译的用户定义的 JAR 文件（即您已将 JAVA 文件转换为 JAR 文件以便导入库供您自己使用）。为了克服这个错误，您只需获取 JAVA 文件，并在包中提供一个单独的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T22:46:11.610

我有同样的问题。我通过在构建窗口的“订购和导出”选项卡中导出所有与驱动器相关的 jar（用“v”标记）来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T19:26:03.347

直到一分钟前我还遇到了同样的问题。在您的应用程序属性中，确保您使用 Google API 的 API 级别。它们将列在目标级别的正下方（在我的情况下为 4.0.3）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-08T04:12:21.153

我通过添加 google-play-service 解决了

![在此处输入图像描述](../Images/4a65226a5298f3b263a3e838ad444c32.png)**

# android - Android 搜索非 ascii 西里尔字符

> ID：15544084
> 
> 赞同：2
> 
> 时间：2013-03-21T09:49:10.513
> 
> 标签：android, search, utf-8, non-ascii-characters

我正在为我的国家马其顿开发一个高度本地化的应用程序。在这里，我们使用西里尔字母。所以用户需要通过搜索视图来搜索场地。

如果用户使用拉丁 IME 键盘，如何搜索西里尔字母名称（我会将查询发送到 JSON 服务）？

我有两种方法：

1.  将输入的字符映射到相应的西里尔字符，然后将翻译后的查询发送到该 JSON 服务；
2.  在数据库中，我可以拥有具有相应场所拉丁名称的字段，我可以在该字段中进行搜索；

我在正确的轨道上吗？有没有更标准的方法来做到这一点？

# ios - 如何在 xamarin 中以编程方式访问 iPhone 画廊文件夹

> ID：15544085
> 
> 赞同：0
> 
> 时间：2013-03-21T09:49:28.470
> 
> 标签：ios, xamarin.ios

我正在为 iphone 开发 Xamarin 中的照片备份应用程序。我需要获取图库中文件夹的文件夹路径，以便我可以将用户选择的文件夹的路径保存在 sqlite 中并备份所选文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:03:47.920

你不能，应用程序只允许访问不在自己的沙箱内的目录。

如果您在 Objective-C 中执行此操作，则可以使用 ALAssest 框架来访问图像。

# php - $mysql_ 消失？

> ID：15544086
> 
> 赞同：0
> 
> 时间：2013-03-21T09:49:33.347
> 
> 标签：php, mysql

嗨，我正在编写安装程序，无论如何.. 我在创建 global.php 文件时遇到了麻烦，$mysql_ 连接没有显示在文件中，而其他所有内容都显示在文件中？

我正在尝试插入这个

```
$mysql_host = 'localhost';
$mysql_user = 'root';
$mysql_name = '-----';
$mysql_pass = '-----'; 
```

在 global.php 中，它带有：

```
 = 'localhost';
 = 'root';
 = '-----';
 = '-----'; 
```

注意到 $mysql_ 丢失了吗？

这是安装程序中的代码：

```
 $db_name = trim($_POST['db_name']);
    $db_user = trim($_POST['db_user']);
    $db_pass = trim($_POST['db_pass']);
    $db_host = trim($_POST['db_host']);     

    $handle = fopen($setting['config']['folder'] . $setting['config']['file'], 'w');

$input = "<?php

$mysql_host = '".$db_host."';
$mysql_user = '".$db_user."';
$mysql_name = '".$db_name."';
$mysql_pass = '".$db_pass."';
?>

";

fwrite($handle, $input);
fclose($handle); 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:50:41.903

```
$input = "<?php
\$mysql_host = '$db_host';
\$mysql_user = '$db_user';
\$mysql_name = '$db_name';
\$mysql_pass = '$db_pass';
?>"; 
```

在双引号字符串中，$ 符号就像连接。如果要在字符串中插入美元符号，则应使用`\`反斜杠对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:00:46.533

由于您在字符串中使用双引号，PHP 将解释它在字符串中看到的变量名，并输出变量的值而不是变量名。

这是一个 php 功能，旨在允许您在字符串中嵌入变量，而无需重复打开和关闭字符串。具有讽刺意味的是，这正是您对实际 PHP 变量所做的事情。

你有两个选择：

1.  切换到对字符串使用单引号。这将完全按照您的方式工作。

2.  继续使用双引号，但`$`在不希望 PHP 解释它的地方用反斜杠转义符号。

    如果您确实继续使用双引号，您还可以选择将变量嵌入字符串中，因此您无需继续打开和关闭引号。在这种情况下，您的代码将如下所示：

    ```
    $input = "<?php

    \$mysql_host = '{$db_host}';
    \$mysql_user = '{$db_user}';
    \$mysql_name = '{$db_name}';
    \$mysql_pass = '{$db_pass}';
    ?>
    "; 
    ```

不过，您需要注意的另一件事是：`$db_xx`当您从`$_POST`. 这意味着，例如，如果用户的名称或密码中包含引号字符，则会导致生成无效的 PHP 代码。

此外，用户可能会将此错误用作将任意 PHP 代码注入系统的技术。尽管此脚本显然仅在最初设置系统时使用，但这是您代码中的一个主要安全漏洞，应予以纠正。

# php - 检查远程服务器上 txt 文件中的字符串

> ID：15544093
> 
> 赞同：0
> 
> 时间：2013-03-21T09:49:58.887
> 
> 标签：php

嘿伙计们，我正在尝试`Error`在远程服务器上的不同子文件夹中搜索这个词。要输入子文件夹，我在路径中使用了一个变量。我的代码不工作，它总是输出`Not Found`，但为了测试我在几个 .txt 文件中插入了 Word `ERROR`。那么我的代码有什么问题？

```
$file_to_check = 'file://Bgsttc11/Backup/'.$stask[$j][1].'/log.txt';
            echo $path_to_check.'<br>';
            if (strstr($path_to_check, 'ERROR')) {
            echo 'found<br>';
            } 
            else {
            echo 'not found<br>';
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:52:37.973

您可以使用[`stripos()`](http://php.net/stripos)不区分大小写的字符串，如果字符串存在，并且您正在检查文件名而不是内容：

```
$file_to_check = '\\\\bgsttc11\\Backup\\'.$stask[$j][1].'\\log.txt';
$position = stripos(implode('', file($path_to_check)), 'ERROR');
if ($position !== false) {
    echo 'found at position '.$position.'<br />';
} else {
    echo 'not found<br />';
} 
```

# php - 解析错误：语法错误，第 110 行出现意外的 T_VARIABLE

> ID：15544097
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:50:12.547
> 
> 标签：php, database, session, store, userid

我正在尝试从用户数据库中获取用户名 ID，我从会话中获得的数据是用户名，所以我有代码来选择用户名 ID 并将其存储到可验证中

我的代码是它存储上传的图像字符串，但只允许登录用户上传图像。加载图像时，我想将 userID 存储在带有字符串的照片表中，以了解哪个用户添加了照片

```
 //setting veriables
  $imagestring = $_FILES["file"]["name"];
  $filetype = $_FILES["file"]["type"];
  $sessionusername = $_SESSION['Username'];
  $description = $_POST['desc'];
  //getting user id
  $myquery = mysql_query("select UserID from users where Username = '$sessionusername'");
  $row = mysql_fetch_array($query);
  // putting data into database
  mysql_connect("$host", "$username", "$password")or die("cannot connect");
  mysql_select_db("$db_name")or die("cannot select DB");

  $sql='INSERT INTO '.$tbl_name.' (photographerID, photoDesc, PhotoString) VALUES ('$row', '$description', "k00138899.atspace.eu/photoalbum/upload/'.$imagestring.'.'.$filetype.'")';
  $result=mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:55:04.997

你可能忘记了点：

```
$sql='INSERT INTO '.$tbl_name.' (photographerID, photoDesc, PhotoString) VALUES ('$row', '$description', "k00138899.atspace.eu/photoalbum/upload/'.$imagestring.'.'.$filetype.'")'; 
```

大概应该是：

```
$sql='INSERT INTO '.$tbl_name.' (photographerID, photoDesc, PhotoString) VALUES ("'.$row.'", "'.$description.'", "k00138899.atspace.eu/photoalbum/upload/'.$imagestring.'.'.$filetype.'")'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:57:07.537

请使用 mysqli 接口，不推荐使用 mysql。关于你的问题，

你有一个 mulformed 查询字符串，试试这个：

```
 $sql='INSERT INTO '
      .$tbl_name
      ." (photographerID, photoDesc, PhotoString) VALUES ('$row', '$description', "
      ."'k00138899.atspace.eu/photoalbum/upload/$imagestring.$filetype')"; 
```

# r - 更改 RStudio 项目的 Git 协议已在 Windows 中的版本控制下

> ID：15544098
> 
> 赞同：6
> 
> 时间：2013-03-21T09:50:12.973
> 
> 标签：r, git, version-control, windows-7, rstudio

我喜欢使用 RStudio，因为它内置了与版本控制系统的集成。但是，对于 Windows 上的 RStudio，是否有一种方法可以将 Git 协议更改`http`为*已在版本控制下的***项目**`ssh`，反之亦然，而无需先删除并重新创建项目？

 ***我可能遗漏了一些东西，但我最初使用`http`它克隆了我的 repo，后来我发现这是一个巨大的痛苦，因为每次我想将项目更改推送到 GitHub 时，我都必须重新输入我的用户名和密码。所以我从版本控制（`Project -> Project Option -> Git/SVN -> Version Control System: none`）中删除了项目，然后尝试重新添加希望使用的版本控制，`ssh`但它只会让你回到最初创建项目时选择的原始协议。

我发现更改协议的唯一方法是删除项目，然后使用正确的`ssh`参数从 GitHub 创建一个新项目。我真的很希望能够在不先删除和重新克隆的情况下将项目版本控制协议更改`http`为`ssh`。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:26:22.493

检查`git config`和整个配置的东西。您可以配置多个遥控器以使 git 的“分布式”方面工作。

您可以尝试仅复制整个存储库（或仅`.git/config`保留*副本*！）并检查更改配置时您的特定情况会发生什么。这取决于很多不受 git 控制的东西，比如途中的防火墙配置，以及另一端的配置。***

# python - 允许访问 Gmail 的代理

> ID：15544099
> 
> 赞同：2
> 
> 时间：2013-03-21T09:50:14.193
> 
> 标签：python, proxy, oauth-2.0, gmail-imap, google-oauth

我有[Python](http://www.python.org/)脚本，它通过 IMAP 创建到 GMail 邮箱的代理。此代理将身份验证令牌添加到请求。最终用户运行此脚本，然后使用一些工具从邮箱下载所有用户电子邮件。当然，这个与代理和代理连接的工具使所有的身份验证变得神奇。
我目前的解决方案仅适用于小型邮箱。当我们想从大邮箱下载所有邮件时，我们会收到认证错误。身份验证错误与令牌过期有关。身份验证令牌仅在一小时内有效。之后服务器返回错误并关闭连接。
这个剧本不是我写的。我从某人那里收到了它，我必须修复这个错误。在这个脚本中，我使用[Twisted 引擎](http://twistedmatrix.com/trac/)（[Twisted 代码示例](http://twistedmatrix.com/documents/current/core/examples/index.html)）。

让我展示一些源代码。下面你可以看到 Proxy 类的两个主要方法：

```
def dataReceived(self, data):
    if OPTIONS.verbose:
        print "> " + data
    #send raw data
    Proxy.dataReceived(self,data)

def lineReceived(self, line):
    if self.logged_in:
        self.setRawMode()
        self.peer.setRawMode()
        Proxy.lineReceived(self,line)
    else:
        login_match = self.factory.login_re.match(line)
        if login_match != None:
            #Create token and send it
            consumer = OAuthEntity(self.domain, self.secret)
            xoauth_string = GenerateXOauthString(consumer, self.email_address)
            xoauth_b64 = base64.b64encode(xoauth_string)
            line = login_match.groups()[0] + " AUTHENTICATE XOAUTH " + xoauth_b64
            Proxy.lineReceived(self,line)
        else:
            Proxy.lineReceived(self,line) 
```

正如您在`lineReceived`方法中看到的那样，我创建令牌并在收到来自客户端工具的登录请求时发送它。现在脚本只创建一次令牌。我决定在`dataReceived`每小时后更改此脚本并在方法中重新创建令牌。您可以在下面看到我的更改：

```
def dataReceived(self, data):
    if OPTIONS.verbose:
        print "> " + data
    if anHourPassedFromLastRecreation():
        consumer = OAuthEntity(self.domain, self.secret)
        xoauth_string = GenerateXOauthString(consumer, self.email_address)
        xoauth_b64 = base64.b64encode(xoauth_string)
        line = self.prefix + " AUTHENTICATE XOAUTH " + xoauth_b64
        Proxy.lineReceived(self,line)
        Proxy.dataReceived(self,data)
    else:
        Proxy.dataReceived(self,data) 
```

如您所见，在`dataReceived`方法中，我尝试重新创建令牌并将其在数据发送到服务器之前发送。我知道这可能有点天真，但我没有任何其他想法，如何重新创建令牌并在我未来的请求中使用它。
不幸的是，它不起作用。你能给我一些建议如何创建代理或如何重新创建令牌以及如何将它与未来的请求联系起来吗？

有用的链接：
- [IMAP 协议交换](https://developers.google.com/google-apps/gmail/oauth_protocol#imap_protocol_exchange)。
-[用于桌面客户端的 Gmail IMAP OAuth](https://stackoverflow.com/questions/2658690/gmail-imap-oauth-for-desktop-clients?rq=1)。

# spring-security - Spring Security 身份验证管理器错误

> ID：15544100
> 
> 赞同：0
> 
> 时间：2013-03-21T09:50:15.583
> 
> 标签：spring-security, xsd-validation

我正在尝试将 Spring Authentication 添加到我的 Web App。我已包含 Spring Security jar v3.0.5 。但我在控制台中收到以下错误

```
SEVERE: Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 16 in XML    document from ServletContext resource [/WEB-INF/spring-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'authetication-provider'. One of '{"http://www.springframework.org/schema/security":authentication-provider, "http://www.springframework.org/schema/security":ldap-authentication-provider}' is expected.
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'authetication-provider'. One of '{"http://www.springframework.org/schema/security":authentication-provider, "http://www.springframework.org/schema/security":ldap-authentication-provider}' is expected.
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
... 28 more 
```

我在 web.xml 中包含了 DelegatingFilterProxy 过滤器。我的 spring-security.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

<http auto-config="true">
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
    <form-login login-page="/login" default-target-url="/welcome"   authentication-failure-url="/loginfailed" />
    <logout logout-success-url="/logout" />
</http>

    <authentication-manager>
        <authetication-provider>
            <user-service>
            <user name="admin" password="admin" authorities="ROLE_USER" />
        </user-service>
        </authetication-provider>
    </authentication-manager>

</beans:beans> 
```

请帮忙。据我认为它与 spring-security xsd 版本有关，但我无法解决该问题。我正在使用 3.0.5 版本的罐子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:51:51.850

你有错字 - 它应该是`<authentication-provider>`：

```
<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin" password="admin" authorities="ROLE_USER" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

请参阅错误消息，它需要其中列出的两种可能性之一：

> 发现以元素“ *authetication-provider* ”开头的无效内容。'{" [http://www.springframework.org/schema/security](http://www.springframework.org/schema/security) ": *authen tication **-** provider*，" [http://www.springframework.org/schema/security](http://www.springframework.org/schema/security) ": *ldap-authentication-provider* }' 之一是预期的。

# javascript - $("#element").on("click", function(event){ }); 的用法是什么？在jQuery中？

> ID：15544105
> 
> 赞同：0
> 
> 时间：2013-03-21T09:50:25.490
> 
> 标签：javascript, jquery

我是新手`jquery`，我想知道

```
$("#element").on("click", function(event){ }); 
```

和

```
$("#element").live("click", function(event){ }); 
```

功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:52:01.957

好吧，`$.live()`从 1.7 开始不推荐使用。

另外有关更多详细信息，您可以查看此答案： [What's the difference between jQuery .live() and .on()](https://stackoverflow.com/questions/8042576/whats-the-difference-between-jquery-live-and-on)

# javascript - 用最少的拼接将一个数组转换为另一个数组

> ID：15544112
> 
> 赞同：1
> 
> 时间：2013-03-21T09:50:41.090
> 
> 标签：javascript, algorithm, math, splice

让我们以这个数组为例

```
ar = [6,3,5,1,2] 
```

我想将它转换为另一个数组，我可能只使用两个操作 - 在特定位置插入项目（splice（i，0，item））或从特定位置删除项目（splice（i，1））。我正在寻找使用最少数量的接头的解决方案。

第二个重要条件是我们考虑具有唯一值的数组，我们的数组不包含双精度数。

例如，

```
ar1 = [6,3,10,5,1,2];
ar2 = [6,3,1,2,5]; 
```

很明显，如果我们想从 ar 中得到 ar1，我们只需要一个拼接 - ar.splice(2,0,10)。如果我们想得到ar2，我们必须做两次拼接：ar.splice(2,1)然后push(5)（第二个等于splice(ar.length,0,5)）

顺便说一句，这个任务自然具有实用价值。例如，让我们想象一下产品列表和产品过滤器。我们改变过滤器的设置和列表分别改变。并且每一个变化都伴随着美丽的jquery慢速向上滑动-向下滑动动画。此动画可能会向上滑动并隐藏特定项目或插入并向下滑动一个新项目。任务是减少这些动画的数量。这意味着我们试图最小化列表的 DOM 操作数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:25:30.253

操作数正好是编辑距离（如果您不允许替换）。查找 levenshtein 距离。

您可以修改算法以计算 levenshtein 距离以实际输出所需的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T03:58:40.857

我已经编写了希望解决问题的代码。此代码以某种方式基于 Levenshtein 距离概念。正如 maniek 的回答中提到的，这似乎对这个问题非常有用。
为简单起见，我使用字符串而不是数组并使用 Python。
对于由同一组整数组成的两个相等长度的数组，原始问题似乎很容易简化为相同的问题。因此，我假设初始字符串和目标字符串具有相同的长度并且由相同的字符集组成。
Python代码：

```
import random
# Create random initial (strin) and target (strout) strings
s = "abcdefghijklmnopqrstuvwxyz"
l = list(s)
random.shuffle(l)
strout = ''.join(l)
random.shuffle(l)
strin = ''.join(l)

# Use it for tests
#strin = "63125798"
#strout = "63512897"

print strin, strout

ins_del = 0
for i in xrange(len(strin)-1, -1, -1):
    if strin[i] != strout[i]:
        if strin[i-1] == strout[i]:
            ii = strout.find(strin[i], 0, i)
            strin = strin[:ii] + strin[i] + strin[ii:i] + strin[i+1:]
            ins_del = ins_del + 1
            #Test output
            print "1:", strin
        else:
            ii = strin.find(strout[i], 0, i-1)
            strin = strin[:ii] + strin[ii+1:i+1] + strout[i] + strin[i+1:]
            ins_del = ins_del + 1
            #Test output
            print "2:", strin

print strin, strout

# Check the result
for i in xrange(0, len(strin)):
    if strin[i] != strout[i]:
        print "error in", i, "-th symbol"

print "Insert/Delite operations = ", ins_del 
```

输出示例：

```
kewlciprdhfmovgyjbtazqusxn qjockmigphbuaztelwvfrsdnxy
2: kewlciprdhfmovgjbtazqusxny
1: kewlciprdhfmovgjbtazqusnxy
2: kewlciprhfmovgjbtazqusdnxy
2: kewlciphfmovgjbtazqursdnxy
2: kewlciphmovgjbtazqufrsdnxy
2: kewlciphmogjbtazquvfrsdnxy
2: kelciphmogjbtazquwvfrsdnxy
2: keciphmogjbtazqulwvfrsdnxy
2: kciphmogjbtazquelwvfrsdnxy
2: kciphmogjbazqutelwvfrsdnxy
2: kciphmogjbaquztelwvfrsdnxy
2: kciphmogjbquaztelwvfrsdnxy
1: qkciphmogjbuaztelwvfrsdnxy
2: qkcipmogjhbuaztelwvfrsdnxy
2: qkcimogjphbuaztelwvfrsdnxy
1: qjkcimogphbuaztelwvfrsdnxy
2: qjkcmoigphbuaztelwvfrsdnxy
1: qjokcmigphbuaztelwvfrsdnxy
1: qjockmigphbuaztelwvfrsdnxy
qjockmigphbuaztelwvfrsdnxy qjockmigphbuaztelwvfrsdnxy
Insert/Delite operations =  19 
```

# ssl - SSLHandshakeException：收到致命警报：在 tomcat 7 服务器上设置密码时握手失败

> ID：15544116
> 
> 赞同：7
> 
> 时间：2013-03-21T09:50:53.907
> 
> 标签：ssl, tomcat7, encryption, resttemplate, sslhandshakeexception

我有一个 Tomcat7 网络服务器，我尝试通过将此连接器添加到`server.xml`文件中来将其配置为接受安全连接：

```
<Connector SSLEnabled="true"
           acceptCount="100"
           connectionTimeout="20000"
           executor="tomcatThreadPool"
           keyAlias="server"
           keystoreFile="c:\opt\engine\conf\tc.keystore"
           keystorePass="o39UI12z"
           maxKeepAliveRequests="15"
           port="8443"
           protocol="HTTP/1.1"
           redirectPort="8443"
           scheme="https"
           secure="true"
           sslProtocol="TLS"/> 
```

我正在使用使用此命令生成的自签名证书：

```
%JAVA_HOME%/bin/keytool -genkeypair -keystore c:\opt\engine\conf\tc.keystore -storepass o39UI12z-keypass o39UI12z-dname "cn=Company, ou=Company, o=Com, c=US" -alias server -validity 36500 
```

在客户端，我有一个使用`RestTemplate`. 在应用程序上下文启动时，我以`restTemplate`这种方式初始化实例：

```
final ClientHttpRequestFactory clientHttpRequestFactory =
        new MyCustomClientHttpRequestFactory(new NullHostNameVerifier(), serverInfo);
    restTemplate.setRequestFactory(clientHttpRequestFactory); 
```

MyCustomClientHttpRequestFactory 类如下所示：

```
public class MyCustomClientHttpRequestFactory  extends SimpleClientHttpRequestFactory {

private static final Logger LOGGER = LoggerFactory
    .getLogger(MyCustomClientHttpRequestFactory.class);

private final HostnameVerifier hostNameVerifier;
private final ServerInfo serverInfo;

public MyCustomClientHttpRequestFactory (final HostnameVerifier hostNameVerifier,
    final ServerInfo serverInfo) {
    this.hostNameVerifier = hostNameVerifier;
    this.serverInfo = serverInfo;
}

@Override
protected void prepareConnection(final HttpURLConnection connection, final String httpMethod)
    throws IOException {
    if (connection instanceof HttpsURLConnection) {
        ((HttpsURLConnection) connection).setHostnameVerifier(hostNameVerifier);
        ((HttpsURLConnection) connection).setSSLSocketFactory(initSSLContext()
            .getSocketFactory());
    }
    super.prepareConnection(connection, httpMethod);
}

private SSLContext initSSLContext() {
    try {
        System.setProperty("https.protocols", "TLSv1");

        // Set ssl trust manager. Verify against our server thumbprint
        final SSLContext ctx = SSLContext.getInstance("TLSv1");
        final SslThumbprintVerifier verifier = new SslThumbprintVerifier(serverInfo);
        final ThumbprintTrustManager thumbPrintTrustManager =
            new ThumbprintTrustManager(null, verifier);
        ctx.init(null, new TrustManager[] { thumbPrintTrustManager }, null);
        return ctx;
    } catch (final Exception ex) {
        LOGGER.error(
            "An exception was thrown while trying to initialize HTTP security manager.", ex);
        return null;
    }
} 
```

**直到这里一切正常。**当我在 SslThumbprintVerifier 类中设置断点时，代码到达了这一点，也到达了 NullHostNameVerifier 类。这在生产中经过测试并且效果很好。

现在我想通过限制密码套件来扩展安全性，并将这个属性添加到我在开头介绍的连接器中：

```
ciphers="TLS_KRB5_WITH_RC4_128_SHA,SSL_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_WITH_AES_256_CBC_SHA,SSL_RSA_WITH_AES_256_CBC_SHA,SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA,SSL_RSA_WITH_3DES_EDE_CBC_SHA,SSL_DHE_RSA_WITH_AES_128_CBC_SHA,SSL_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_RC4_128_SHA,TLS_RSA_WITH_3DES_EDE_CBC_SHA,TLS_DHE_RSA_WITH_3DES_EDE_CBC_SHA,TLS_RSA_WITH_AES_128_CBC_SHA,TLS_RSA_WITH_AES_256_CBC_SHA,TLS_DHE_RSA_WITH_AES_128_CBC_SHA,TLS_DHE_RSA_WITH_AES_256_CBC_SHA,TLS_KRB5_WITH_3DES_EDE_CBC_SHA" 
```

现在，当我运行客户端代码时，我得到了这个异常：

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

这发生在`restTemplate.doExecute()`方法中。代码不会像添加密码之前那样到达指纹验证器类或主机名验证器类。

在调试中，我检查了`ctx.getSocketFactory().getSupportedCipherSuites()`显示：

```
[SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV, SSL_RSA_WITH_NULL_MD5, SSL_RSA_WITH_NULL_SHA, SSL_DH_anon_WITH_RC4_128_MD5, TLS_DH_anon_WITH_AES_128_CBC_SHA, TLS_DH_anon_WITH_AES_256_CBC_SHA, SSL_DH_anon_WITH_3DES_EDE_CBC_SHA, SSL_DH_anon_WITH_DES_CBC_SHA, SSL_DH_anon_EXPORT_WITH_RC4_40_MD5, SSL_DH_anon_EXPORT_WITH_DES40_CBC_SHA, TLS_KRB5_WITH_RC4_128_SHA, TLS_KRB5_WITH_RC4_128_MD5, TLS_KRB5_WITH_3DES_EDE_CBC_SHA, TLS_KRB5_WITH_3DES_EDE_CBC_MD5, TLS_KRB5_WITH_DES_CBC_SHA, TLS_KRB5_WITH_DES_CBC_MD5, TLS_KRB5_EXPORT_WITH_RC4_40_SHA, TLS_KRB5_EXPORT_WITH_RC4_40_MD5, TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA, TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5] 
```

并检查`ctx.getSocketFactory().getDefaultCipherSuites()`：

```
[SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV] 
```

最后是`ctx.getSupportedSSLParameters().getCipherSuites()`：

```
[SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV, SSL_RSA_WITH_NULL_MD5, SSL_RSA_WITH_NULL_SHA, SSL_DH_anon_WITH_RC4_128_MD5, TLS_DH_anon_WITH_AES_128_CBC_SHA, TLS_DH_anon_WITH_AES_256_CBC_SHA, SSL_DH_anon_WITH_3DES_EDE_CBC_SHA, SSL_DH_anon_WITH_DES_CBC_SHA, SSL_DH_anon_EXPORT_WITH_RC4_40_MD5, SSL_DH_anon_EXPORT_WITH_DES40_CBC_SHA, TLS_KRB5_WITH_RC4_128_SHA, TLS_KRB5_WITH_RC4_128_MD5, TLS_KRB5_WITH_3DES_EDE_CBC_SHA, TLS_KRB5_WITH_3DES_EDE_CBC_MD5, TLS_KRB5_WITH_DES_CBC_SHA, TLS_KRB5_WITH_DES_CBC_MD5, TLS_KRB5_EXPORT_WITH_RC4_40_SHA, TLS_KRB5_EXPORT_WITH_RC4_40_MD5, TLS_KRB5_EXPORT_WITH_DES_CBC_40_SHA, TLS_KRB5_EXPORT_WITH_DES_CBC_40_MD5] 
```

据我了解，如果客户端支持/启用的密码套件与服务器支持的密码套件之间存在交集，它应该可以工作（例如，我们有这样的交集`SSL_RSA_WITH_RC4_128_SHA`）。然而我得到了这个错误。

在下一步中，我添加了这个 java 参数：

```
-Djavax.net.debug=ssl,handshake,failure 
```

日志只显示了 client-hello，没有 server-hello 响应：

```
 [2013-03-20 15:29:51.315] [INFO ] data-service-pool-37          System.out                                                        trigger seeding of SecureRandom 
[2013-03-20 15:29:51.315] [INFO ] data-service-pool-37          System.out                                                        done seeding SecureRandom 
[2013-03-20 15:30:38.894] [INFO ] data-service-pool-37          System.out                                                        Allow unsafe renegotiation: false 
[2013-03-20 15:30:38.894] [INFO ] data-service-pool-37          System.out                                                        Allow legacy hello messages: true 
[2013-03-20 15:30:38.894] [INFO ] data-service-pool-37          System.out                                                        Is initial handshake: true 
[2013-03-20 15:30:38.894] [INFO ] data-service-pool-37          System.out                                                        Is secure renegotiation: false 
[2013-03-20 15:30:38.894] [INFO ] data-service-pool-37          System.out                                                        %% No cached client session 
[2013-03-20 15:30:38.894] [INFO ] data-service-pool-37          System.out                                                        *** ClientHello, TLSv1 
[2013-03-20 15:30:38.941] [INFO ] data-service-pool-37          System.out                                                        RandomCookie:  GMT: 1363720446 bytes = { 99, 249, 173, 214, 110, 82, 58, 52, 189, 92, 74, 169, 133, 128, 250, 109, 160, 64, 112, 253, 50, 160, 255, 196, 85, 93, 33, 172 } 
[2013-03-20 15:30:38.941] [INFO ] data-service-pool-37          System.out                                                        Session ID:  {} 
[2013-03-20 15:30:38.941] [INFO ] data-service-pool-37          System.out                                                        Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SHA, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WITH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV] 
[2013-03-20 15:30:38.956] [INFO ] data-service-pool-37          System.out                                                        Compression Methods:  { 0 } 
[2013-03-20 15:30:38.956] [INFO ] data-service-pool-37          System.out                                                        *** 
[2013-03-20 15:30:38.956] [INFO ] data-service-pool-37          System.out                                                        data-service-pool-37, WRITE: TLSv1 Handshake, length = 81 
[2013-03-20 15:30:38.956] [INFO ] data-service-pool-37          System.out                                                        data-service-pool-37, READ: TLSv1 Alert, length = 2 
[2013-03-20 15:30:38.956] [INFO ] data-service-pool-37          System.out                                                        data-service-pool-37, RECV TLSv1 ALERT:  fatal, handshake_failure 
[2013-03-20 15:30:38.972] [INFO ] data-service-pool-37          System.out                                                        data-service-pool-37, called closeSocket() 
[2013-03-20 15:30:38.972] [INFO ] data-service-pool-37          System.out                                                        data-service-pool-37, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 

```

从 server.xml 中删除密码时，它会再次起作用。 **另外我会提到我正在同一台机器上测试服务器和客户端。**我尝试将客户端请求中的服务器 ip 设置为“localhost”和实际的机器 ip，但在这两种情况下都不起作用。此外，我让这台服务器在不同的 linux 机器上运行（密钥库是在带有 linux 路径的 linux 机器上生成的）并且仍然 - 它在没有密码的情况下工作并且停止使用密码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T23:49:59.400

嗯，我解决了这个问题。看来，通过使用 keytool 创建自签名证书**而不提供 -keyalg 参数**会使密钥对算法默认为 DSA。我的密码套件中没有一个包含 DSA 算法。在这种情况下，尽管客户端和服务器在他们的密码套件之间有交集，但都不适合密钥算法。

`-keyalg RSA`在生成密钥库时添加，解决了问题。

# asp.net-mvc - 带有 HttpPost 修饰动作的 Html.ActionLink()

> ID：15544118
> 
> 赞同：0
> 
> 时间：2013-03-21T09:50:58.710
> 
> 标签：asp.net-mvc

我如何调用`Index`下面的第二个动作

```
public ActionResult Index()
{
}

[HttpPost]
public ActionResult Index(FormCollection collection, string nextButton)
{
} 
```

从一个`ActionLink`？我正在尝试下面的代码但没有成功：

```
@Html.ActionLink("Buy Now", "Index", "Store", new {edition = "std", nextButton = ""}, new Dictionary<string, object> {{ "class", "button medium light" }}) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:53:56.490

默认情况下，ActionLink 会生成一个锚链接，因此单击时将对端点执行 GET 请求。

您可以使用 jquery 使用 ajax 异步执行到操作端点的发布。

```
$.ajax({ 
    url: 'http://endpoint.com', 
    type: 'POST', 
    data: $('#form').serialize() //Add some post data however you want. 
}); 
```

或者，您可以使用表单发布端点。`[ValidateAntiForgeryToken]`如果使用表单，您还应该用它来装饰您的端点。如果使用 jquery 发布方式，您仍然可以在帖子上添加 AntiForgery 隐藏文件作为标题，并通过在自定义过滤器中检查标题来验证。

```
@using Html.BeginForm() {
    @Html.AntiForgeryToken()
    //Add some inputs to represent your model
    <button type="submit">Save</button>
} 
```

# asp.net-mvc - 如何使用ado.net将数据库中的列值绑定到mvc4中的html下拉列表

> ID：15544122
> 
> 赞同：0
> 
> 时间：2013-03-21T09:51:16.593
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想使用mvc4中的存储过程将数据库的列值绑定到下拉列表我不知道如何处理这个.plz帮助我

我的模型代码是这样的

```
 public class dropdown
{
    string conn = System.Configuration.ConfigurationManager.ConnectionStrings["cnstr"].ConnectionString;
    [Required(ErrorMessage = "DomainName is Required")]
    [Display(Name = "DomainName")]
    public string DomainName { get; set; }
    public IEnumerable<dropdown> obj { get; set; }

    public List<dropdown> LoadDomain(dropdown model)
    {
        List<dropdown> obj = new List<dropdown>();
        using (SqlConnection con = new SqlConnection(conn))
        {

            try
            {
                con.Open();
                SqlCommand cmd = new SqlCommand("selectDomainName", con);
                cmd.CommandType = CommandType.StoredProcedure;
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataSet ds = new DataSet();
                da.Fill(ds);
                for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                {
                    var data = new dropdown();
                    data.DomainName = ds.Tables[0].Rows[i]["DomainName"].ToString();
                    obj.Add(data);
                }
            }
            catch
            {
            }
        }
        return obj; 
```

在`obj`我得到所有列值

我的控制器代码

```
 public ActionResult binddropdown(dropdown model1)
    {

            var x = model1.LoadDomain(model1);

            ViewData. = x;

            return View(model1);

    } 
```

我不知道我是否会朝着这个方向前进。我是初学者，所以请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:40:58.937

您可以在 viewbag 中设置您的数据，然后在前端您可以循环浏览数据并将值分配给您的下拉框。在这里你可以做的是，

```
public ActionResult binddropdown(dropdown model1)
{
        var x = model1.LoadDomain(model1);
        viewbag.MyData = x;
        return View();
} 
```

在前端，您可以从 viewbag 获取数据（如果需要，使用 typecast 转换为适当的类型）并可以像这样分配给 html 标签，

```
 @{
 var a = (yourobjtypecast) viewbag.MyData ;
<select name="drpId" id="drpId">
      <option value="yourvalue"> Select </option>

                @foreach (var te in a)
                {
                    <option value='@te.ID.ToString()'>@te.Nam </option>

                }
 </select>
} 
```

我希望这项工作。

# c++ - 从 Lua 堆栈中安全地读取字符串

> ID：15544123
> 
> 赞同：5
> 
> 时间：2013-03-21T09:51:18.733
> 
> 标签：c++, lua

如何安全地从 Lua 堆栈中读取字符串值？这两个函数`lua_tostring`都`lua_tolstring`可能引发 Lua 错误（longjmp / 奇怪类型的异常）。因此，应该使用`lua_pcall`可能在保护模式下调用这些函数。但我无法找到一个很好的解决方案如何做到这一点并将字符串值从 Lua 堆栈获取到 C++。真的需要`lua_tolstring`使用保护模式调用`lua_pcall`吗？

实际上使用`lua_pcall`似乎很糟糕，因为我想从 Lua 堆栈中读取的字符串是由`lua_pcall`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:33:56.897

使用`lua_type`before `lua_tostring`：如果`lua_type`返回`LUA_TSTRING`，那么您可以安全地调用`lua_tostring`来获取字符串，并且不会分配内存。

`lua_tostring`仅在需要将数字转换为字符串时才分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T16:52:20.040

好的，当你调用 lua_pcall 失败时，它会返回一个错误代码。当你调用 lua_pcall 成功时，你会得到零。所以，首先你应该看到 lua_pcall 返回的值，然后使用 lua_type 获取类型，最后使用 lua_to* 函数获取正确的值。

```
int iRet = lua_pcall(L, 0, 0, 0);
if (iRet)
{
    const char *pErrorMsg = lua_tostring(L, -1); // error message
    cout<<pErrorMsg<<endl;
    lua_close(L);
    return 0;
}

int iType = lua_type(L, -1);
switch (iType)
{
    //...
    case LUA_TSTRING:
        {
            const char *pValue = lua_tostring(L, -1);
            // ...
        }
} 
```

就是这样。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:58:46.207

您可以使用该`lua_isstring`函数检查是否可以将值转换为字符串而不会出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:02:44.347

以下是它在 OpenTibia 服务器中的完成方式：

```
std::string LuaState::popString()
{
    size_t len;
    const char* cstr = lua_tolstring(state, -1, &len);
    std::string str(cstr, len);
    pop();
    return str;
} 
```

来源：[https ://github.com/opentibia/server/blob/master/src/lua_manager.cpp](https://github.com/opentibia/server/blob/master/src/lua_manager.cpp)

# python - django UnreadablePostError：请求数据读取错误

> ID：15544124
> 
> 赞同：23
> 
> 时间：2013-03-21T09:51:19.553
> 
> 标签：python, django, mod-wsgi

我正在处理 django 项目，我收到了这封错误电子邮件。

**堆栈跟踪**

```
File "/usr/local/lib/python2.7/dist-packages/Django-1.4.3-py2.7.egg/django/core/handlers/wsgi.py", line 180, in _get_post
    self._load_post_and_files()

File "/usr/local/lib/python2.7/dist-packages/Django-1.4.3-py2.7.egg/django/http/__init__.py", line 379, in _load_post_and_files
    self._post, self._files = QueryDict(self.body, encoding=self._encoding), MultiValueDict()

File "/usr/local/lib/python2.7/dist-packages/Django-1.4.3-py2.7.egg/django/http/__init__.py", line 335, in body
    self._body = self.read()

File "/usr/local/lib/python2.7/dist-packages/Django-1.4.3-py2.7.egg/django/http/__init__.py", line 391, in read
    return self._stream.read(*args, **kwargs)

File "/usr/local/lib/python2.7/dist-packages/Django-1.4.3-py2.7.egg/django/core/handlers/wsgi.py", line 98, in read
    result = self.buffer + self._read_limited()

File "/usr/local/lib/python2.7/dist-packages/Django-1.4.3-py2.7.egg/django/core/handlers/wsgi.py", line 92, in _read_limited
    result = self.stream.read(size)

UnreadablePostError: request data read error 
```

**为什么会发生此错误？**
**怎么解决？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-19T03:57:23.147

> 为什么会发生此错误？

因为服务器正在接收格式错误的请求，这可能由于多种原因而发生。有人可能取消了加载页面，有人可能有一个糟糕的互联网连接中断了，*宇宙射线可能有点翻转*。

在它开始频繁发生之前，您真的不需要担心。当这些错误发生时，您可能需要记下并查看它是否因此在同一页面上。

> 怎么解决？

你不能。至少现在不是。收集更多有关此错误何时发生的数据。看看您是否可以找到手动触发它的方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-04-18T05:31:09.650

使用大规模应用程序，您总是会偶尔收到取消的请求。如果您收到 500 封电子邮件，它们可能会非常乏味。

我不建议完全忽略它们。如果 UnreadablePostErrors 大量涌入，则说明有问题，例如较长的响应时间会导致用户取消请求。

我的解决方案是管理员电子邮件的自定义过滤器，您可以在其中放置您想要的任何逻辑。

最简单的可能是随机忽略 20 个 UnreadablePostErrors 中的 19 个。这样，如果出现问题，我仍然会被告知，但我会少 20 倍地被纠缠。

如果您想要更花哨的东西，我会选择@pztrick 的解决方案。

```
import logging
import random
from django.http import UnreadablePostError

class ReduceUnreadablePostErrors(logging.Filter):
    def filter(self, record):
        if record.exc_info:
            exc_value = record.exc_info[1]
            if isinstance(exc_value, UnreadablePostError):
                return random.randint(1,20) % 20==0
        return True 
```

设置.py：

```
'filters': {
   'reduce_unreadable_post_errors' : {
        '()' : 'path.to.your.ReduceUnreadablePostErrors'
    },

    ...

'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false','reduce_unreadable_post_errors'],
        'class': 'common.utils.log.AdminEmailHandlerWithEmail'
     },

     ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-10T23:21:16.573

我写了一个节流版本。如果它是尖峰的，你会想看到错误，但如果它每五分钟或其他什么时候出现，你可以忽略它。这假设如果它在一分钟内出现两次，您可能有某种问题需要调查。

```
def skip_unreadable_post(record):
    if record.exc_info:
        exc_value = record.exc_info[1]
        if isinstance(exc_value, UnreadablePostError):
            cache_key = "settings.unreadable_post_error"
            r = make_redis_interface("CACHE")
            if r.get(cache_key) is not None:
                # We've seen this recently; let it through; hitting it a lot
                # might mean something.
                return True
            else:
                # Haven't seen this recently; cache it with a minute expiry,
                # and don't let it through.
                r.set(cache_key, "True", ex=60)
                return False
    return True

...
    "filters": {
        "skip_unreadable_posts": {
            "()": "django.utils.log.CallbackFilter",
            "callback": skip_unreadable_post,
        },
    },
...
        "django.server": {
            "level": "INFO",
            "class": "logging.StreamHandler",
            "formatter": "django.server",
            "filters": ["skip_unreadable_posts"],
        }, 
```

# asp.net-mvc - 执行对 SEO 友好的 MVCPaging

> ID：15544125
> 
> 赞同：0
> 
> 时间：2013-03-21T09:51:20.210
> 
> 标签：asp.net-mvc

您好我正在尝试使用 MVC 分页，我创建了一个局部视图并将其放置在一个视图中，我将 IPagedList 传递给该视图，现在当我执行分页时，我使用以下代码 `<%:Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount, new AjaxOptions { UpdateTargetId = "dv1" }).Options(o => o.Action("IndexPaging").AddRouteValue("currpage","page"))%>`并且 IndexPaging 返回 PartialView，但我的问题是，在分页时，我看不到源代码中的第二页数据。我的要求是让它对 SEO 友好，这样当谷歌爬虫通过我的分页抓取时，它可以读取其他页面的数据。

# java - 是否可以在 Eclipse 中自动向所有项目添加一组外部 jar？

> ID：15544127
> 
> 赞同：3
> 
> 时间：2013-03-21T09:51:27.743
> 
> 标签：java

这纯粹是为了个人工作。只是弄乱一些东西，所以如果它可能会给其他尝试使用我的代码的人带来问题，它并不会真正打扰我。

基本上我想要做的是让我的所有项目都能够导入一个公共 jar，我总是使用与 java 中内置的 jar 相同的方式。

例如

```
import javax.swing.*;
import common.stuff.*; 
```

我希望能够做到这一点，而不必在我制作的每个项目中导入外部 jar。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:58:58.607

我不确定是否可以使用默认的 Eclipse 设置进行存档，但您可以执行下一个技巧：

1.  去`Window -> Preferences`
2.  点击`Java -> Installed JREs`
3.  找到你默认的 JRE，点击`edit`
4.  点击`Add External JARs`

因此，您将通过将它们放入默认 JRE 库来添加您希望在每个项目中使用的库。

# ios - 使用已有数据导入 Magical Record

> ID：15544129
> 
> 赞同：6
> 
> 时间：2013-03-21T09:51:39.373
> 
> 标签：ios, objective-c, core-data, magicalrecord

我正在尝试使用`Magical Record`将数据导入我的`CoreData`数据库。

我`Person`目前正在处理该实体。

A`Person`有`firstName`, `lastName`,`personID`属性。（我知道我不需要 idString，我没有在内部使用它，它用于与服务器对话）。

不管怎样，如果我已经有了那个人……

```
firstName - John
lastName - Smith
personID - 1 
```

我下载了 JSON ......

```
[
    {
        firstName: John,
        lastName: Doe,
        id: 1
    },
    {
        firstName: Michael,
        lastName: Caine,
        id: 2
    },
    {
        firstName: Angelina,
        lastName: Jolie,
        id: 3
    }
] 
```

我希望导入添加`Michael`和`Angelina`更新`John Smith`，`John Doe`因为它已经存在具有相同的 id 和 personID。

我已经在 id 和 personID 之间设置了 mappedKeyName。

是否有可能做到这一点？我一直在阅读这个博客...... [http://www.cimgf.com/2012/05/29/importing-data-made-easy/](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)关于键名的自动映射等......并想知道我是否可以利用这是做我想做的事吗？

我已经从博客中阅读了有关 relatedByAttribute 的部分，但我不确定我应该在哪里设置它以及设置什么？

我应该在实体 Person 上设置它吗？还是属性personID？我应该把它设置成什么？“ID”？或者是其他东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:24:47.697

我不确定您是否在 Core Data 模型的 userInfo 区域中使用了 relatedByAttribute 设置。您在这里的问题中没有提到这一点。我建议你仔细检查一下。澄清一下，它被称为relatedByAttribute，因为您放入值部分的字符串是与实体相关的CoreData 属性，而不是json（或其他对象）数据。所以，检查这两件事，如果仍然有问题，请在 github 上开一张票，最好有一个有助于描述问题的单元测试。

# ckeditor - 在 Jquery UI Dialog 中重用 CKEditor 的实例

> ID：15544133
> 
> 赞同：0
> 
> 时间：2013-03-21T09:51:52.993
> 
> 标签：ckeditor

首先，我在网页中创建了一个名为“richEditor”的 CKEditor 实例。其次，在单击按钮时，我正在进行 ajax 调用，它返回 html 数据，并在 jquery UI 对话框中显示它。然后我复制网页中已经存在的“richEditor”实例的 HTML 并将其粘贴到 div 中对话。但是重用的“richEditor”实例不起作用。在编辑器中单击任何按钮都会引发 javascript 错误，并且文本区域和源文本区域都不可编辑。

任何帮助或想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:22:32.957

您基本上不能复制编辑器的 HTML 并重用它。首先，实例的 DOM 结构与驱动编辑器的 JS 代码紧密相连（反之亦然）。它比普通的 HTML 要深得多。第二个原因是您使用的编辑器是基于 的`iframe`，无法复制保留其内容。

换句话说：您必须创建编辑器的另一个实例才能在其他地方运行它。请参阅[官方指南](http://docs.ckeditor.com/#!/guide/dev_framed)和 API 文档以了解更多关于[CKEDITOR.replace()](http://docs.ckeditor.com/#!/api/CKEDITOR-method-replace)、[CKEDITOR.appendTo()](http://docs.ckeditor.com/#!/api/CKEDITOR-method-appendTo)和[CKEDITOR.destroy()](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-destroy)的信息。

# ios - XMPPFramework - 在 Openfire 中添加好友

> ID：15544136
> 
> 赞同：1
> 
> 时间：2013-03-21T09:51:59.107
> 
> 标签：ios, xmpp, openfire, xmppframework

我们正在使用**XMPP**和**Openfire**创建一个聊天应用程序。我们必须创建一个允许用户聊天的新**社交社区。**我们已经使用 XMPP 与 Openfire 建立了连接。我们还能够获得用户的聊天和在线状态。

我的问题是，我们可以使用 XMPP 添加朋友吗？

我搜索并发现了`XMPPRoster`（XMPP RFC 中的第 8.2 节）。但是，我并没有清楚地了解如何使用 XMPP 从数据库列表中添加朋友。

我已经安装了“订阅”插件并对其进行了自定义，但是没有调用以下委托方法：

`- (void)xmppRoster:(XMPPRoster *)sender didReceiveBuddyRequest:(XMPPPresence *)presence`

如果有人有想法，请帮帮我。提前致谢。

# android - 为 Android 构建 liblinphone

> ID：15544139
> 
> 赞同：1
> 
> 时间：2013-03-21T09:52:05.940
> 
> 标签：android, build, linphone

我正在为 android 构建 Linphone 应用程序。我正在使用 windows xp 32 位。

1) 下载 android ndk 2) 安装 autotools: autoconf, automake, aclocal, libtoolize pkgconfig 3) 运行 ./prepare_sources.sh/

我在终端中得到了输出

$ ./prepare_sources.sh /cygdrive/d/android/androidNdk/android-ndk-r8d 使用 /cygdrive/d/android/androidNdk/android-ndk-r8d 作为 android NDK ./prepare_sources.sh：第 23 行：git：命令未找到 将补丁应用于 ffmpeg 无法在输入第 3 行找到要修补的文件 也许您使用了错误的 -p 或 --strip 选项？

## 导致此的文本是：

|--- 子模块/外部/ffmpeg/libavcodec/arm/int_neon.S.orig 2011-09-30 19:43:21.935593025 +0200

## |+++ 子模块/externals/ffmpeg/libavcodec/arm/int_neon.S 2011-09-30 19:44:21.115168033 +0200

要修补的文件：

非常感谢任何信息、问题或任何东西

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-18T18:11:43.237

**第1部分**

以下步骤可以帮助您在设备或模拟器上创建和安装构建（在 Mac 上测试）：

**Step1**：您需要配置并安装Android SDK和NDK 也安装Autotools Mac用户可以使用[此](http://www.gnu.org/software/automake/faq/autotools-faq.html#How-do-I-install-the-Autotools-_0028as-user_0029_003f)链接（仅按照链接中的2.3点）其他平台用户请确保您安装正确。

**第2步**：Mac用户打开您的终端并通过运行以下命令在您想要的任何目录上克隆git repo：（其他用户对不起，我不知道如何，但我认为您可以弄清楚如何获取git使用命令提示符或您正在使用的任何内容在您的目录上回购）

`$ git clone git://git.linphone.org/linphone-android.git --recursive`

将 Repo 复制到您的目录后，现在转到该目录并打开 README 文件并读出整个文件。

**Step3** : 现在我们将按照 README 文件中的说明进行操作 首先在终端上使用以下命令进入下载项目的根目录：

```
Mac users on terminal write cd and 
then drag and drop the "linphone-android" folder on terminal 
(when you drag and drop the folder terminal will get the path of the folder and then you can hit enter to get into the directory of that folder) 

$ cd /Users/myname/Desktop/Android/linphone-android 
```

或者只是使用简单的命令**cd**进入文件夹

```
 $ cd Desktop
   $ cd Android
   $ cd linphone-android 
```

现在，当您进入终端上的目录时，然后检查您的 Mac 上安装的 SDK 和 NDK 的 PATH 运行

```
$ echo $PATH 
```

如果您看到带有 SDK 和 NDK 位置的路径，则可以继续执行**步骤 4 并跳过以下部分**，如果没有，则需要在步骤 4 中执行 make 和 make 安装脚本之前设置 PATH：设置路径使用：

```
$ export PATH=/Users/myname/Documents/adt-bundle-mac-x86_64-20130729/sdk/platform-tools:/Users/myname/Documents/adt-bundle-mac-x86_64-20130729/sdk/tools:/Users/myname/Documents/android-ndk-r9:$PATH 
```

就像**export PATH=(你的 SDK 平台工具文件夹的路径):(你的 SDK 工具文件夹的路径):(你的 NDK 文件夹的路径):$PATH**

这将设置路径并再次确认运行

```
$ echo $PATH 
```

现在你会看到 SDK 和 NDK 的路径在那里。

**第 4 步**：现在如果路径已经设置，您可以简单地运行

```
$ make 
```

现在将您的设备连接到您的 Mac/Pc 并查看 eclipse 是否检测到它。设备连接后运行：

```
$ make install

$ make generate-sdk (optional) 
```

这会将应用程序安装到您的手机中。（您需要有一个有效的 SIP 用户名和密码才能在应用程序中配置）

上述步骤对我有用，我能够在我的设备上运行该应用程序。

**第2部分**

导入到 Eclipse 中：构建完成后，现在需要将其导入到 Eclipse 中。

**第 1步**：转到 eclipse 点击 File Menu 然后 Import 然后选择 Existing Android Code into Workspace

点击下一步并浏览到**linphone-android**项目文件夹，然后只勾选 linphone-android 文件夹并将复制项目保留到工作区取消勾选。

如下图所示： ![在此处输入图像描述](../Images/2f53404d8d54e4343b6ef6f0ef49c46d.png)

并完成。现在您右键单击“linphone-android”（项目名称）并转到属性和 Java 构建路径，然后排序和导出，然后将它们重新排序为我下面的图像并取消勾选 gcm.jar

![在此处输入图像描述](../Images/8c054d6862ff91c3b47c965bd89df7e3.png)

点击 OK And Boom No errors 现在只需在设备或模拟器上运行它。（确保您的最低目标 SDK 与您的设备或模拟器匹配。）

上述步骤对我来说很好，它也对你有用。

一切顺利 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T13:56:26.460

根据 linphone-android 根目录中的 README，您不需要运行 prepare_sources.sh，剩下的步骤是运行“make”和“make install”：

LINPHONE for ANDROID
***** ** *** ** *** ** *** ** *** ***

要为 Android 构建 liblinphone，您必须：
0) 下载带有更新到最新版本的平台工具和工具的 Android sdk（至少需要 API 16），然后在路径中添加“工具”和“平台工具”文件夹.
1）从谷歌下载Android ndk（> = r8b）并将其添加到您的路径中。
2) 在某些 64 位系统上安装 autotools：autoconf、automake、aclocal、libtoolize、pkgconfig 2bis)，您将需要 ia32-libs 包
3) 在顶层目录中运行 Makefile 脚本。这将下载 iLBC 源文件并转换 VP8 项目中的一些汇编文件。
**$ make**
4) 要将生成的 apk 安装到插入的设备中，请运行
**$ make install**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T11:23:30.557

# c# - C# 图片框内存泄漏

> ID：15544142
> 
> 赞同：0
> 
> 时间：2013-03-21T09:52:10.350
> 
> 标签：c#, .net, aforge

我浏览了几页类似的查询，实施了大部分建议，但似乎找不到任何到目前为止有效的方法。希望我没有忽略一些显而易见的事情。

对，所以我使用 AForge.net 来捕获图像。它提供了一个事件，该事件为接收到的每个新帧触发，在我的代码中如下所示：

```
private void videoSourcePlayer_NewFrame(object sender, ref Bitmap image)
    {
        framesRecieved++;
        try
        {
            if (!stopCapturing)
            {
                if (pictureBox1.Image != null)
                {
                    pictureBox1.Image.Dispose();
                }
                pictureBox1.Image = image.Clone(new Rectangle(0, 0, image.Width, image.Height), image.PixelFormat);
            }

        }
        catch { }
        finally { GC.Collect(); }
    } 
```

只要窗口保持静止，内存使用量就非常稳定，但只要我抓住窗口窗体并开始移动它，内存使用量就会不断上升。我被引导相信它可能与图片框有关的原因是，一旦我将“stopCapturing”布尔值设置为 true，即使我在屏幕周围移动窗口，内存也会停止上升。“stopCapturing”不用于其他任何事情，并且事件继续正常触发，唯一的区别是图片框中显示的图像。我不知道原因，所以任何帮助将不胜感激。

PS：不确定是否相关，但我的工作站有 2 个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:28:15.523

I'm wondering why you're cloning the image at all. It strikes me that you should only allocate a new image when either pictureBox1.Image is null or when the dimensions or pixel format of the image change:

```
private bool BitmapChanged(Bitmap old, Bitmap new)
{
    return old == null || old.PixelFormat != new.PixelFormat ||
        old.Width != new.Width || old.Height != new.Height;
}

private Bitmap MakeSimilarBitmap(Bitmap source)
{
    Bitmap copy = new Bitmap(source.Width, source.Height, source.PixelFormat);
    return copy;
}

private void DrawOnto(Image im, Bitmap source)
{
    using (Graphics g = Graphics.FromImage(im)) {
        g.DrawImage(source, 0, 0);
    }
} 
```

then when you get a frame, you'll do something like this:

```
Image im = BitmapChanged(pictureBox1.Image as Bitmap, srcBmp) ?
                          MakeSimilarBitmap(image) : pictureBox1.Image;
DrawOnto(im, srcBmp);
bool same = im == pictureBox1.Image;
if (same)
    pictureBox1.Invalidate();
else {
    Image old = pictureBox1.Image;
    pictureBox1.Image = im;
    old.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:46:11.840

`Bitmap.Clone()`做一个浅拷贝，实际字节仍然由调用者拥有，所以这可能会导致各种麻烦。你需要做一个深拷贝。

例如，[AForge 方式](http://www.aforgenet.com/framework/docs/html/2ba0a758-e3be-2c98-bce9-b72557a307d6.htm)：

```
Bitmap bmp = AForge.Imaging.Image.Clone(image); 
```

或者 GDI+ 方式（也可以使用 lockbits 等以获得更好的性能）：

```
Bitmap bmp = new Bitmap(image.Width, image.Height, image.PixelFormat);
Graphics g = Graphics.FromImage(bmp);
g.DrawImageUnscaled(image, Point.Empty); 
```

# java - Java 中的多个控制台或显示屏幕？

> ID：15544145
> 
> 赞同：0
> 
> 时间：2013-03-21T09:52:15.450
> 
> 标签：java

我正在使用 eclipse 来运行我的 java 代码。有两种方法可以产生一些输出。我不希望他们的输出连续显示在同一个控制台/窗口上。是否可以将每种方法的输出定向到其自己的窗口/控制台？

# jquery - jQuery：在下拉列表中的最后一个选项元素之后添加 html 元素

> ID：15544147
> 
> 赞同：0
> 
> 时间：2013-03-21T09:52:27.620
> 
> 标签：jquery

我试图在下拉列表的最后一个选项元素之后添加一些 html 元素，但没有成功。

这是我尝试过的：

```
jQuery('select#extended-categories-select-2:last-child').after('<div><b></b></div>'); 
```

还有其他建议或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:54:23.840

做这个 ：

而不是`last-child`，您需要使用`last`.

```
jQuery('select#extended-categories-select-2 option:last').after('<div><b></b></div>'); 
```

# javascript - 从常规数组创建一个新的二维数组

> ID：15544149
> 
> 赞同：0
> 
> 时间：2013-03-21T09:52:31.893
> 
> 标签：javascript, arrays, multidimensional-array, sorting

如果我有一个 JavaScript 数组：

```
a = ["12", "34", "56", "78"]; 
```

我想像这样制作一个新的二维数组：

```
b = [ ["12345678"], ["34567812"], ["56781234"], ["78123456"] ]; 
```

我知道这应该很简单，但我就是想不通……今天我的大脑有点慢……：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:56:20.267

在不同的枢轴位置加入字符串。

```
n = [];
for(i = 0; i < a.length; i++){
    n.push(a.slice(i).join("") + a.slice(0,i).join(""));
} 
```

这输出：

```
[ "12345678", "34567812", "56781234", "78123456" ] 
```

我不确定在输出中嵌套单个元素数组是否是一个错误，但如果需要，只需在`push`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:59:07.533

您可以像这样`map`结合使用`concat`：

```
var newA = a.map(function() {
    var copy = a.slice();
    return [copy.concat(copy.splice(0, arguments[1])).join('')];
});

// => [ ["12345678"], ["34567812"], ["56781234"], ["78123456"] ]; 
```

# android - 将未显示的json数据从一个活动传递到Android中的另一个活动

> ID：15544154
> 
> 赞同：0
> 
> 时间：2013-03-21T09:52:39.023
> 
> 标签：android, json

我有以下 json 数组：

```
{
                "id": "c200",
                "name": "Ravi Tamada",
                "email": "ravi@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        },
        {
                "id": "c201",
                "name": "Johnny Depp",
                "email": "johnny_depp@gmail.com",
                "address": "xx-xx-xxxx,x - street, x - country",
                "gender" : "male",
                "phone": {
                    "mobile": "+91 0000000000",
                    "home": "00 000000",
                    "office": "00 000000"
                }
        } 
```

我在主要活动中显示名称、电子邮件和手机并将它们传递到单项活动中，我需要做的是将地址也发送到第二个活动，它不在主要活动中。我怎样才能做到这一点？

这是我的代码：

```
// contacts JSONArray
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String email = c.getString(TAG_EMAIL);
                String address = c.getString(TAG_ADDRESS);
                String gender = c.getString(TAG_GENDER);

                // Phone number is agin JSON Object
                JSONObject phone = c.getJSONObject(TAG_PHONE);
                String mobile = phone.getString(TAG_PHONE_MOBILE);
                String home = phone.getString(TAG_PHONE_HOME);
                String office = phone.getString(TAG_PHONE_OFFICE);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_EMAIL, email);
                map.put(TAG_PHONE_MOBILE, mobile);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                        R.id.name, R.id.email, R.id.mobile });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_NAME, name);
                in.putExtra(TAG_EMAIL, cost);
                in.putExtra(TAG_PHONE_MOBILE, description);

                startActivity(in);

            }
        });     
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:02:35.080

将地址也传递给活动 SingleMenuItemActivity

in.putExtra(TAG_ADDRESS, 地址);

如果你要从 SingleMenuItemActivity 调用你的第二个活动，那么使用 bundle 希望你得到它..然后类似地从那里传递你的意图 Intent in = new Intent(getApplicationContext(), yoursecondActivity.class); address = // 您从主要活动获得的意图

in.putExtra(TAG_address2, 地址); 开始活动（在）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:57:33.533

您需要在 xml 布局（listitem）中为地址定义另一个项目，您将通过 R.id.address 获取

稍后您将在描述视图下方获取此内容

```
 ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE,TAG_ADDRESS }, new int[] {
                    R.id.name, R.id.email, R.id.mobile,R.id.address });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

//this is where you fetch address
String address= ((TextView) view.findViewById(R.id.address)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_EMAIL, cost);
            in.putExtra(TAG_PHONE_MOBILE, description);
            in.putExtra(TAG_ADDRESS, address);
            startActivity(in);

        }
    }); 
```

**编辑：**如果您不想使用额外的资源，那么您可以这样做：

`ArrayList`在类级别声明一个，例如：

```
ArrayList() addArr = new ArrayList() 
```

然后在 forloop 中向这个数组添加地址：

```
String email = c.getString(TAG_EMAIL);
                String address = c.getString(TAG_ADDRESS);
                String gender = c.getString(TAG_GENDER);
addArr.add(address); 
```

然后，当您在 itemClickListener 中获取地址时，只需输入此代码

```
 in.putExtra(TAG_ADDRESS, addArr.get(position)); 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:03:23.653

将代码更改为如下所示，在 XML 中创建一个文本视图，并将 ID 设置为 R.id.address

```
 /         contacts JSONArray
        JSONArray contacts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        contacts = json.getJSONArray(TAG_CONTACTS);

        // looping through All Contacts
        for(int i = 0; i < contacts.length(); i++){
            JSONObject c = contacts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_NAME);
            String email = c.getString(TAG_EMAIL);
            String address = c.getString(TAG_ADDRESS);
            String gender = c.getString(TAG_GENDER);

            // Phone number is agin JSON Object
            JSONObject phone = c.getJSONObject(TAG_PHONE);
            String mobile = phone.getString(TAG_PHONE_MOBILE);
            String home = phone.getString(TAG_PHONE_HOME);
            String office = phone.getString(TAG_PHONE_OFFICE);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_EMAIL, email);
            map.put(TAG_PHONE_MOBILE, mobile);
          map.put(TAG_ADDRESS, address );

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_EMAIL, cost);
            in.putExtra(TAG_PHONE_MOBILE, description);
            in.putExtra(TAG_ADDRESS,address);
            startActivity(in);

        }
    });     
} 
```

# android - 在 Android 中与 ORB 匹配时出错

> ID：15544158
> 
> 赞同：9
> 
> 时间：2013-03-21T09:52:57.573
> 
> 标签：android, opencv

我的代码运行良好，但是当它提取关键点时，它与两个图像的匹配度很差。在这里你可以找到我的代码，但我不知道如何绘制好的匹配`JAVA Android`

```
 descriptors = new Mat();
        keypoints = new MatOfKeyPoint();
        detector = FeatureDetector.create(FeatureDetector.ORB);
        detector.detect(img1, keypoints);
        descriptor = DescriptorExtractor.create(DescriptorExtractor.ORB);
        descriptor.compute(img1, keypoints, descriptors);
        matcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_HAMMING);
     ColorDetection.cvt_YUVtoRGBtoHSV(mYuv,mGraySubmat);
          MatOfKeyPoint mKeyPoints = new MatOfKeyPoint();
        MatOfDMatch  matches = new MatOfDMatch();

          detector.detect(mGraySubmat, mKeyPoints);
          descriptor.compute(mGraySubmat, mKeyPoints, mIntermediateMat);

        matcher.match(mIntermediateMat,descriptors,matches);
        mIntermediateMat2.create(resultSize, CvType.CV_8UC1);
        Features2d.drawMatches(img1, keypoints, mGraySubmat, mKeyPoints, matches, 
                mIntermediateMat2,GREEN, RED,  MATCH_MASK, Features2d.NOT_DRAW_SINGLE_POINTS);

          Imgproc.resize(mIntermediateMat2, mIntermediateMat2, mRgba.size());
          Imgproc.cvtColor(mIntermediateMat2, mRgba, Imgproc.COLOR_RGBA2BGRA, 4);
     Utils.matToBitmap(mRgba, bmp);

      DMatch dm[] = matches.toArray();
          List<Point> lp1 = new ArrayList<Point>(dm.length);
          List<Point> lp2 = new ArrayList<Point>(dm.length);
          KeyPoint tkp[] = keypoints.toArray();
          KeyPoint qkp[] = mKeyPoints.toArray();
          for (int i = 0; i < dm.length; i++) {
              DMatch dma = dm[i];
              lp1.add(tkp[dma.trainIdx].pt);
              lp2.add(qkp[dma.queryIdx].pt);
          }
          MatOfPoint2f pointsPrev = new MatOfPoint2f(lp1.toArray(new Point[0]));
          MatOfPoint2f pointsAct  = new MatOfPoint2f(lp2.toArray(new Point[0]));
        Log.i("pointsPrev", pointsPrev.size().toString());
        Log.i("pointsAct", pointsAct.size().toString());
          fundamental_matrix.create(resultSize, CvType.CV_8UC1);
        fundamental_matrix = Calib3d.findFundamentalMat(
                  pointsAct, pointsPrev, Calib3d.FM_RANSAC, 3, 0.99); 
```

有什么建议吗？

**编辑 ：**

我无法将匹配项转换为列表！因为`Feature2d.drawMatches()` 需要一个`MatOfDmatch`而不是一个`List<Dmatch>`

```
MatOfDMatch matches, matches12, matches21;
matcher.match( descriptors1, descriptors2, matches12 );
matcher.match( descriptors2, descriptors1, matches21 );

iterate matches12
    DMatch forward = matches12[i];  
    DMatch backward = matches21[forward.trainIdx]; 
    if( backward.trainIdx == forward.queryIdx ) 
 //add forward to matches 
Features2d.drawMatches(img1, keypoints, mGraySubmat, mKeyPoints, matches,mIntermediateMat2); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T14:31:52.897

**你的代码应该是这样的：**

```
 FeatureDetector detector = FeatureDetector.create(FeatureDetector.ORB);
 DescriptorExtractor descriptor = DescriptorExtractor.create(DescriptorExtractor.ORB);;
 DescriptorMatcher matcher = DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_HAMMING);

 //first image
 Mat img1 = Highgui.imread("<image1 path>");
 Mat descriptors1 = new Mat();
 MatOfKeyPoint keypoints1 = new MatOfKeyPoint();

 detector.detect(img1, keypoints1);
 descriptor.compute(img1, keypoints1, descriptors1);

 //second image
 Mat img2 = Highgui.imread("<image2 path>");
 Mat descriptors2 = new Mat();
 MatOfKeyPoint keypoints2 = new MatOfKeyPoint();

 detector.detect(img2, keypoints2);
 descriptor.compute(img2, keypoints2, descriptors2);

 //matcher should include 2 different image's descriptors
 MatOfDMatch  matches = new MatOfDMatch();             
 matcher.match(descriptors1,descriptors2,matches);
 //feature and connection colors
 Scalar RED = new Scalar(255,0,0);
 Scalar GREEN = new Scalar(0,255,0);
 //output image
 Mat outputImg = new Mat();
 MatOfByte drawnMatches = new MatOfByte();
 //this will draw all matches, works fine
 Features2d.drawMatches(img1, keypoints1, img2, keypoints2, matches, 
 outputImg, GREEN, RED,  drawnMatches, Features2d.NOT_DRAW_SINGLE_POINTS); 
```

此外，如果您只想显示功能，可以添加以下代码：

```
 Mat featuredImg = new Mat();
 Scalar kpColor = new Scalar(255,159,10);//this will be color of keypoints
 //featuredImg will be the output of first image
 Features2d.drawKeypoints(img1, keypoints1, featuredImg , kpColor, 0);
 //featuredImg will be the output of first image
 Features2d.drawKeypoints(img1, keypoints1, featuredImg , kpColor, 0); 
```

然后你可以像这样显示匹配点：

```
 Bitmap imageMatched = Bitmap.createBitmap(outputImg.cols(), outputImg.rows(), Bitmap.Config.RGB_565);//need to save bitmap
  Utils.matToBitmap(outputImg, imageMatched);
  ImageView.setImageBitmap(imageMatched); 
```

最终，您可以实现良好的匹配。我希望[这个线程](https://stackoverflow.com/questions/13058435/what-to-do-with-orb-feature-matches)会有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T11:41:10.667

良好匹配方法基于从`MatOfDMatch matches = new MatOfDMatch();`列表中删除具有不同描述符或空间位置的匹配点。我建议做的是循环匹配列表并将满足以下条件的匹配放入新列表中：

```
int DIST_LIMIT = 80;
List<DMatch> matchesList = matches.toList();
List<DMatch> matches_final= new ArrayList<DMatch>();
for(int i=0; i<matchesList.size(); i++)
   if(matchesList .get(i).distance <= DIST_LIMIT){
       matches_final.add(matches.toList().get(i));
   }
}

MatOfDMatch matches_final_mat = new MatOfDMatch();
matches_final_mat.fromList(matches_final); 
```

你可以对匹配的点坐标做同样的事情。 [这](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html)是有用的链接。

# c++ - 使用打开的端口获取应用程序

> ID：15544160
> 
> 赞同：0
> 
> 时间：2013-03-21T09:53:14.097
> 
> 标签：c++, windows, ports

想要在我的 PC 中获取使用打开端口的应用程序。我曾经`GetTcpPort`检索打开的端口列表

```
#pragma comment(lib, "iphlpapi.lib")
#pragma comment(lib, "ws2_32.lib")

#define addr_size (3 + 3*4 + 1)   // xxx.xxx.xxx.xxx\0

char const *dotted(DWORD input) {
    char output[addr_size];

    sprintf(output, "%d.%d.%d.%d", 
        input>>24, 
        (input>>16) & 0xff, 
        (input>>8)&0xff, 
        input & 0xff);
    return strdup(output);
}

int main() { 
    MIB_TCPTABLE *tcp_stats = NULL;
    MIB_UDPTABLE *udp_stats = NULL;
    MIB_TCPROW2 *a = NULL;
    DWORD size = 0;
    unsigned i;
    char const *s1, *s2;

    GetTcpTable(tcp_stats, &size, TRUE);
    tcp_stats = (MIB_TCPTABLE *)malloc(size);
    GetTcpTable(tcp_stats, &size, TRUE);
    printf("les ports :");
    for (i=0; i<tcp_stats->dwNumEntries; ++i) {
        printf("TCP:\t:%d\n",            
            ntohs(tcp_stats->table[i].dwLocalPort));
    }
    free(tcp_stats);
    system("pause");
    return 0;
} 
```

但是，我想获得使用每个端口的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:27:39.270

您可以使用 WMI 类`Win32_Process` [http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:53:04.137

在 Vista 及以上版本中，`MIB_TCPROW2`从返回的连接表中的每一行[`GetTcpTable2`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb408406%28v=vs.85%29.aspx)都有一个`dwOwningPid`成员，该成员包含创建进程的进程标识符。

# javascript - 防止嵌套标签链接跟随，但更改复选框状态

> ID：15544161
> 
> 赞同：2
> 
> 时间：2013-03-21T09:53:14.407
> 
> 标签：javascript, jquery, checkbox, click, label

我有一个问题，我有以下标记：

```
<input type="checkbox" id="foo" />
<label for="foo">
    <a href="http://www.google.com">
        Checkbox text
    </a>
</label> 
```

标签有一个嵌套的锚点，以防用户没有启用 javascript，在这种情况下，他们将在单击标签时跟随链接。

我有以下 javascript/jQuery 来防止链接单击并在复选框状态发生更改时显示警报：

```
$(function(){
    $("label a").click(function(e){
       e.preventDefault(); 
    });
    $("#foo").change(function(){
       alert("checkbox changed"); 
    });
}); 
```

[**-- 见例子 --**](http://jsfiddle.net/Hc32s/2/)

但是，当单击标签时，复选框选中状态不会更改。

我知道我可以*破解*代码并尝试通过添加代码来设置检查状态来模拟本机浏览器功能，但是我更喜欢使用本机功能而不是模拟它。

如何在不点击链接且不使用 javascript 设置选中状态的情况下让复选框更改状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:00:54.707

这里有点困惑`and without setting the checked state using javascript?`......但我认为你在谈论`trigger()`......

```
$("label a").click(function(e){
    var $foo = $("#foo");
    $foo.attr("checked", !$foo.attr("checked"));
    $foo.trigger('change');
   return false;
}); 
```

[小提琴](http://jsfiddle.net/bipen/Hc32s/3/)

# haskell - 这个记忆的斐波那契函数是如何工作的？

> ID：15544164
> 
> 赞同：8
> 
> 时间：2013-03-21T09:53:19.913
> 
> 标签：haskell, fibonacci, memoization

在我正在做的函数式编程课程的当前练习作业中，我们必须制作一个给定函数的记忆版本。为了解释记忆，给出以下示例：

```
fiblist = [ fibm x | x <- [0..]]

fibm 0 = 0
fibm 1 = 1
fibm n = fiblist !! (n-1) + fiblist !! (n-2) 
```

但我不完全理解这是如何工作的。

让我们打电话`fibm 3`。

```
fibm 3
--> fiblist !! 2 + fibList 1
--> [fibm 0, fibm 1, fibm 2] !! 2 + [fibm 0, fibm 1] !! 1
--> fibm 2 + fibm 1
--> (fiblist !! 1 + fiblist 0) + 1
--> ([fibm 0, fibm 1] !! 1 + [fibm 0] !! 0) + 1
--> (fibm 1 + fibm 0) + 1
--> 1 + 0 + 1
--> 2 
```

从其他问题/答案和谷歌搜索中，我了解到不知何故，评估的 fiblist 在呼叫之间共享。

这是否意味着，例如 for `fiblist !! 2 + fiblist !! 1`，列表值只计算一次 for `fiblist !! 2`，然后再重复使用 for `fiblist !! 1`？

然后两个斐波那契数每次调用只计算一次，因此没有指数调用次数。但是`fiblist`函数中调用的“较低”级别呢？他们如何从`fiblist`原始`fibm`通话中的计算中受益？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T10:03:39.577

这里的关键部分是列表是惰性求值的，这意味着该元素直到第一次被请求时才被计算。然而，一旦它被评估，它就在那里供其他任何东西查找。因此，在您的示例中，您说得对，这些值只计算一次，`fiblist !! 2`然后重用于`fiblist !! 1`。

fiblist 函数的“较低级别”以相同的方式工作。我第一次调用`fiblist !! 1`它时，将通过调用来评估它`fibm 1`，它只是 1，然后这个值将保留在列表中。当您尝试获得更高的斐波那契数时，`fiblist`将调用`fibm`它将在较低的 - 并且可能已经评估的 - 位置查找这些值`fiblist`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T11:06:48.630

让我们逐步完成评估。除了显示当前表达式之外，我们还显示了`fiblist`内存中的当前评估状态。在那里，我写`<expr>`来表示未评估的表达式（通常称为 thunk），并`>expr<`表示当前正在评估的未评估的表达式。您可以看到惰性评估的实际应用。该列表仅根据需要进行评估，完成的子计算将被共享以供将来重用。

```
 Current expression                       Current evaluation state of fiblist

   fibm 3                                   <[ fibm x | x <- [0..] ]>

->   (simple expansion of the definition)

   fiblist !! (3-1) + fiblist !! (3-2)      <[ fibm x | x <- [0..] ]>

->   ((+) has to evaluate both its arguments to make progress, let's assume
     it starts with the left argument; (!!) traverses the list up to the given
     element and returns the element it finds)

   fibm 2 + fiblist !! (3-2)                <fibm 0> : <fibm 1> : >fibm 2< : <[ fibm x | x <- [3..] ]>

->   (simple expansion of the definition)

   (fiblist !! (2-1) + fiblist !! (2-2)) + fiblist !! (3-2)
                                            <fibm 0> : <fibm 1> : >fibm 2< : <[ fibm x | x <- [3..] ]>

->   (we again start with the first argument to (+),
     computing the result of (!!) does not cause any
     further evaluation of fiblist)

   (fibm 1 + fiblist !! (2-2)) + fiblist !! (3-2)
                                            <fibm 0> : >fibm 1< : >fibm 2< : <[ fibm x | x <- [3..] ]>

->   (expanding fibm 1 returns a result immediately;
     this concludes the computation of fibm 1,
     and the thunk is updated with the result)

   (1 + fiblist !! (2-2)) + fiblist !! (3-2)
                                            <fibm 0> : 1 : >fibm 2< : <[ fibm x | x <- [3..] ]>

->   (now we compute fiblist !! (2-2))

   (1 + fibm 0) + fiblist !! (3-2)          >fibm 0< : 1 : >fibm 2< : <[ fibm x | x <- [3..] ]>

->   (expanding fibm 0 returns 0 immediately, and the
     corresponding thunk can be updated)

   (1 + 0) + fiblist !! (3-2)               0 : 1 : >fibm 2< : <[fibm x | x <- [3..] ]>

->   (we can compute the (+), yielding the result of
     fibm 2; the corresponding thunk is updated)

   1 + fiblist !! (3-2)                     0 : 1 : 1 : <[fibm x | x <- [3..] ]>

->   (now the right argument of (+) has to be evaluated, but (!!)
     will return the already evaluated list element directly)

   1 + 1                                    0 : 1 : 1 : <[fibm x | x <- [3..] ]>

->   (arithmetic; note that as we called fibm 3 directly in the
     beginning, instead of fiblist !! 3, the list is unaffected
     by this final result)

   2                                        0 : 1 : 1 : <[fibm x | x <- [3..] ]> 
```

作为`fiblist`一个全局常量（通常称为“常量应用形式”的 CAF），列表的部分评估状态将持续存在，并且未来的调用`fibm`将重用列表中已评估的元素。不过，列表最终会变得越来越大，消耗越来越多的内存。

# jquery - jQuery升序和降序排序（不是表格）

> ID：15544166
> 
> 赞同：3
> 
> 时间：2013-03-21T09:53:27.603
> 
> 标签：jquery, sorting

我正在尝试按价格和评级对结果列表进行排序。为简单起见，我只包含了 2 个结果：Rider's Lodge 和 Olina Lodge。我编写了一个以一种方式对其进行排序的函数。

如何重新使用相同的功能对结果进行排序，以便单击“按价格排序”按升序排序，再次单击它按降序排序并在两者之间切换？

```
<div class="tab-content">
    <div id="filters">
        <p>
            <a href="javascript:sort_by_rating();">Sort by Rating</a>
            <br>
            <a href="javascript:sort_by_price();">Sort by Price</a>
        </p>
    </div>

    <div id="div_hotel_results" class="tab-pane active">
        <form id="hotel-form">
        ...
        </form>
        <div class="results-row">
            <h5>Riders Lodge</h5>
            <span class="label label-info price">$103.64</span>
            <span class="rating" data-rating="3.0">3.0</span>
        </div>

        <div class="results-row">
            <h5>Olina Lodge</h5>
            <span class="label label-info price">$99.64</span>
            <span class="rating" data-rating="2.5">2.5</span>
        </div>
    </div>
</div>

<script type="text/javascript">
function sort_by_price () {
    var sorted_list = [];
    $('.price').each(function (index) {
        sorted_list[index] = $(this).parent().parent().remove();
        sorted_list[index]['cleaned_price'] = parseFloat($(this).text().replace(/[^0-9\.]+/g,""));
    });

    sorted_list.sort(function (a, b) {
        if (a['cleaned_price'] == b['cleaned_price']) {
            return 0;
        } else if (a['cleaned_price'] > b['cleaned_price']) {
            return 1;
        } else {
            return -1;
        }
    });

    $('#hotel-form').after(sorted_list);
}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T14:55:00.620

这是一个例子。我相信你只想要价格，而不是评级。我创建了一个变量来帮助跟踪排序的当前状态。然后它根据它升序/降序排序。

我还将您的事件绑定移到了 html 之外。

[**工作演示**](http://jsfiddle.net/7y9MA/3/)

**html:**

```
<div class="tab-content">
    <div id="filters">
        <p>
            <a class="sortByRating" href="#" >Sort by Rating</a>
            <br>
            <a class="sortByPrice" href="#">Sort by Price</a>
        </p>
    </div>

    <div id="div_hotel_results" class="tab-pane active">
        <form id="hotel-form">
        ...
        </form>
        <div class="results">
            <div class="results-row">
                <h5>Riders Lodge</h5>
                <span class="label label-info price">$103.64</span>
                <span class="rating" data-rating="3.0">3.0</span>
            </div>

            <div class="results-row">
                <h5>Olina Lodge</h5>
                <span class="label label-info price">$99.64</span>
                <span class="rating" data-rating="2.5">2.5</span>
            </div>
        </div>
    </div>
</div> 
```

**Javascript：**

```
var ascending = false;

$('.tab-content').on('click','.sortByPrice',function(){

    var sorted = $('.results-row').sort(function(a,b){
        return (ascending ==
               (convertToNumber($(a).find('.price').html()) < 
                convertToNumber($(b).find('.price').html()))) ? 1 : -1;
    });
    ascending = ascending ? false : true;

    $('.results').html(sorted);
});

var convertToNumber = function(value){
     return parseFloat(value.replace('$',''));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T10:08:26.877

```
//package algorithm.sort;

public class QuickSort 
{

    public static void main(String[] args) {
        int[] x = { 9, 2, 4, 7, 3, 7, 10 };
        printArray(x);

        int low = 0;
        int high = x.length - 1;

        quickSort(x, low, high);
        printArray(x);
    }

    public static void quickSort(int[] arr, int low, int high) {

        if (arr == null || arr.length == 0)
            return;

        if (low >= high)
            return;

        //pick the pivot
        int middle = low + (high - low) / 2;
        int pivot = arr[middle];

        //make left < pivot and right > pivot
        int i = low, j = high;
        while (i <= j) {
            while (arr[i] < pivot) {
                i++;
            }

            while (arr[j] > pivot) {
                j--;
            }

            if (i <= j) {
                int temp = arr[i];
                arr[i] = arr[j];
                arr[j] = temp;
                i++;
                j--;
            }
        }

        //recursively sort two sub parts
        if (low < j)
            quickSort(arr, low, j);

        if (high > i)
            quickSort(arr, i, high);
    }

    public static void printArray(int[] x) {
        for (int a : x)
            System.out.print(a + " ");
        System.out.println();
    }
} 
```

# java - 删除没有删除权限的文件

> ID：15544168
> 
> 赞同：0
> 
> 时间：2013-03-21T09:53:29.507
> 
> 标签：java, file, io, delete-file

java中有什么方法可以删除没有删除权限的文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:53:56.760

不，如果您没有权限，则无法删除文件。如果您有写权限，您可以将其设为空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:01:18.793

好吧，如果您在此处提到 shell 脚本，则可以部分解决：如果您使用的是 unix，并且您的用户可以运行`sudo`执行外部命令，例如`sudo rm -f YOUR_PATH`.

# django - apache2 django mod_wsgi htaccess

> ID：15544170
> 
> 赞同：0
> 
> 时间：2013-03-21T09:53:35.350
> 
> 标签：django, apache, apache2

我想让 Apache 服务 .htaccess 文件来修复 firefox Access-Control-Allow-Origin。我正在使用 mod_wsgi，我的 httpd.conf 看起来像这样：

```
Alias /static/ /home/ubuntu/my-django-app/static/

<Directory /home/ubuntu/my-django-app/static>
Order deny, allow
Allow from all
</Directory>

WSGIScriptAlias / /home/ubuntu/my-django-app/apache/django.wsgi 
```

我该怎么做才能让 Apache 在 /home/ubuntu/my-django-app 中查找 .htaccess 文件？

```
<FilesMatch "\.(ttf|otf|eot)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:06:00.017

如果您可以访问 httpd.conf，您可能可以在那里处理您对 Access-Control-Allow-Origin 的配置需求。

# ruby-on-rails - `method_missing'：ActionMailer::Base:Class 的未定义方法 `add_delivery_method'

> ID：15544172
> 
> 赞同：2
> 
> 时间：2013-03-21T09:53:43.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, actionmailer

您好我正在尝试使用一些数据初始化 ActionMailer::Base:Class：

```
ActionMailer::Base.add_delivery_method :ses, AWS::SES::Base,
  :access_key_id     => '0PxxxxxxxxxxxxS8Dyyy',
  :secret_access_key => 'aJxxxxxxxxxxxxx2Tpppa+ZQ6dddddddkN2' 
```

但这会引发错误：

```
`method_missing': undefined method `add_delivery_method' for ActionMailer::Base:Class (NoMethodError) 
```

我的 Rails 版本 -`3.2.13`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:03:56.313

最有可能的是，您尝试做的应该是在环境文件中，即`config/environments/production.rb`. 像这样做：

```
 config.action_mailer.delivery_method = :smtp

  config.action_mailer.smtp_settings = {
    :address => "email-smtp.us-east-1.amazonaws.com",
    :user_name => "..." # Your SMTP user here.
    :password => "...", # Your SMTP password here.
    :authentication => :login,
    :enable_starttls_auto => true
  } 
```

您是否看过这个问题：[Using Amazon SES with Rails ActionMailer](https://stackoverflow.com/questions/4798437/using-amazon-ses-with-rails-actionmailer)？

# ios - 在 facebook 上的 ios 朋友画廊中发布照片

> ID：15544174
> 
> 赞同：0
> 
> 时间：2013-03-21T09:53:47.863
> 
> 标签：ios, facebook, gallery

早上好，

我有此代码可以在我的画廊中发布照片：

```
- (IBAction)postPhotoClick:(UIButton *)sender {
    // Just use the icon image from the application itself.  A real app would have a more
    // useful way to get an image.
    UIImage *img = [UIImage imageNamed:@"Icon-72@2x.png"];

    // if it is available to us, we will post using the native dialog
    BOOL displayedNativeDialog = [FBNativeDialogs presentShareDialogModallyFrom:self
                                                                    initialText:nil
                                                                          image:img
                                                                            url:nil
                                                                        handler:nil];
    if (!displayedNativeDialog) {
        [self performPublishAction:^{

            [FBRequestConnection startForUploadPhoto:img
                                   completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                       [self showAlert:@"Photo Post" result:result error:error];
                                       self.buttonPostPhoto.enabled = YES;
                                   }];

            self.buttonPostPhoto.enabled = NO;
            //proceedToPost();
        }];
    }
} 
```

但是，我需要将照片张贴在我朋友的画廊中。这是可能的？我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:35:44.077

通过使用图形 API，我找到了解决方案。

进行适当的登录后：

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   self.originalImage, @"source", 
                                   @"MessageText", @"message",
                                   nil];

 [self.facebook requestWithGraphPath:@"user_name/photos/"
                              andParams:params
                              andHttpMethod:@"POST"
                              andDelegate:self]; 
```

此代码用于在我的 albuns 中发布图像。现在我需要在我朋友的相册上发布一张照片。

# android - WebView 卡在三星 Galaxy S3 (Android 4.1.1) 上的只读空文本区域

> ID：15544179
> 
> 赞同：0
> 
> 时间：2013-03-21T09:54:01.290
> 
> 标签：android, webview, textarea, readonly

我观察到，当我尝试进入并专注于只读且为空的 TEXTAREA 时，Android Webview 会卡住。键盘出现，当然不会在 TEXTAREA 中输入任何内容，但之后 WebView 被卡住了。

我只能使用“BACK”键强制关闭键盘，但没有执行其他操作。除了重新启动整个应用程序之外，什么也做不了。

```
<textarea rows="3" id="abcd" readonly="readonly" name="abcd"></textarea> 
```

我不断在 LOGCAT 控制台中针对 webview 收到此详细消息。

```
singleCursorHandlerTouchEVent ~getEditableSupport FASLE 
```

这仅在运行 Android 4.1.1 的 Samsung S3 设备上发生，并且在 Samsung Nexus S (Android 4.1.2) 和 4.1.2 Android 模拟器上完美运行。

这些链接中提出的其他解决方案不起作用

*   [Phonegap TouchEvent](https://stackoverflow.com/questions/9517142/phonegap-touchevent)
*   [由于“singleCursorHandlerTouchEvent -getEditableSupport FASLE”，Phonegap 按钮不会触发](https://stackoverflow.com/questions/10398914/phonegap-button-does-not-fire-due-to-singlecursorhandlertouchevent-geteditable)

使用此独立 Webview 示例可以轻松重现此问题

```
public class TestWebViewTextStylesActivity extends Activity {

    WebView mWebView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        String data = "<html><body>" +
        "<textarea rows='3' id='abcd' readonly='readonly' name='abcd'></textarea>" +
        "</body></html>";

        mWebView = new WebView(this);
        setContentView(mWebView);

        // Set some HTML 
        mWebView.loadDataWithBaseURL("file:///android_asset/", data, "text/html", "UTF-8", null);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:54:01.290

在花了半天时间寻找各种替代方案后，我找到了解决方案。

解决方案非常简单，就是在 TEXTAREA html 标签之间引入一个空格。

```
<textarea rows="3" id="abcd" readonly="readonly" name="abcd"> </textarea>
_____________________________________________________________||___________
________________________________________________INSERTED___SPACE ___HERE__ 
```

而且我还观察到`.innerText`通过 JS 将属性设置为 BLANK 字符串也会导致 TEXTAREA 导致 Webview 冻结。

该空间也是必需的，否则浏览器假定所有 HTML 后跟 TEXTAREA 也属于 TEXTAREA。所以正确的做法是先给一个空格再补全TEXTAREA( `</TEXTAREA>`)

对于可写的 TEXTAREA HTML 元素，您不能有这个空白空间，否则它会以用户输入的值作为前缀。所以我必须编写一个 JS 方法来清空我必须注入的值，然后再将其设置为 WebView。

```
function clearOffTextArea(textAreaId) {

    var x = document.getElementById(textAreaId);

    var isReadOnly = false;

    if (x.hasAttribute('readOnly')) {
        isReadOnly = x.readOnly;
    }

    if (isReadOnly == false) {
        if (customMethodToTrimString(x.innerText) == '') {
            x.innerText = '';
        }
    }
} 
```

# html - 使用 KnockoutJs 调用本地数据源

> ID：15544181
> 
> 赞同：0
> 
> 时间：2013-03-21T09:54:04.487
> 
> 标签：html, knockout.js, web-sql

我想编写一个保存客户信息的小型应用程序，例如联系方式和订单。

我正在考虑使用淘汰赛，并且需要该应用程序在与互联网断开连接的情况下工作。

我的应用程序我想在全局级别添加一个搜索框（类似于 bootstrap typeahead），这将允许我搜索客户并导航到视图。

我不确定的任务是使用数据库并使用 KO vm 从数据库中读取数据。我开始研究 WebSql 来存储客户的详细信息和订单，但是我只能使用不理想的 webkit。

有没有人有使用 KO 和本地数据集的经验？任何人都可以建议任何好的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:58:46.553

面对同样的问题，我最终编写了一个围绕 Repository 模式建模的小型通用抽象层，并为 WebDb 和 IndexedDB 编写了该模式的通用实现。不幸的是，由于 Apple 不[知道在 Safari 中支持 IndexedDB，](http://caniuse.com/indexeddb)这些天来支持 WebDB 是必要的。

# c# - 键盘事件只工作一次

> ID：15544182
> 
> 赞同：2
> 
> 时间：2013-03-21T09:54:10.957
> 
> 标签：c#, winapi, keyboard-events, wndproc

我正在尝试制作简单的按键重新映射器 - 当按下一个键盘按键时，代码会生成另一个不同的按键。这是我的代码：

```
[DllImport("user32.dll")]
static extern uint keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);
public static void KeyDown(System.Windows.Forms.Keys key)
{
   keybd_event((byte)key, 0, 0, 0);
}
public static void KeyUp(System.Windows.Forms.Keys key)
{
   keybd_event((byte)key, 0, 0x7F, 0);
}
 protected override void WndProc(ref Message m)
        {
            if (m.Msg == 0x0312)
            {
                int id = m.WParam.ToInt32();
                ...
                if (id==2) {
                  KeyDown(Keys.Return);
                    KeyUp(Keys.Return);     
                }  
                ...         
            }
            base.WndProc(ref m);
        } 
```

问题是，当我按下分配给 id 2 的热键时，此按下返回码每 30 秒只工作一次。这个 keybd_evend winapi 函数有什么问题？我用错了吗？wndProc 中的其他东西（id）没有问题，只有 keybd_event 有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T12:53:12.727

Poblem 的 KeyUp 和 KeyDown 函数错误。以下是正确的函数：

```
[DllImport("user32.dll")]
static extern uint keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);
public static void KeyDown(System.Windows.Forms.Keys key)
{
      keybd_event((byte)key, 0x45, 0x0001 | 0, 0);
}

public static void KeyUp(System.Windows.Forms.Keys key)
{
      keybd_event((byte)key, 0x45, 0x0001 | 0x0002, 0);
} 
```

# java - 以编程方式将表字段值更新为 null

> ID：15544183
> 
> 赞同：0
> 
> 时间：2013-03-21T09:54:11.987
> 
> 标签：java, mysql, sql

众所周知，如何通过简单的查询将字段值设置为 null，例如 -

```
UPDATE your_table
SET    your_column = NULL
WHERE  id = 1; 
```

但是从编程上讲，哪一种是将字段值更新为 null 的正确方法-

```
db.execSQL("UPDATE  your_table SET your_column='" + null + "WHERE id='" + myid + "'"); 
```

或者

```
db.execSQL("UPDATE  your_table SET your_column= NULL WHERE id='" + myid + "'"); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:00:50.830

我会选择[**PreparedStatement**](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

```
String query="UPDATE  your_table SET your_column= ? WHERE id=?");
PreparedStatement stmnt = conn.prepareStatement(query);
if(colyouAretryingtopass == null){]
  stmnt.setNull(1, Types.VARCHAR);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:00:44.100

正确的方法是使用绑定变量，这取决于您使用的框架，这以不同的方式完成。

您的查询应该如下所示；

```
String query = "UPDATE your_table SET your_column = null WHERE id = ?";
executeQuery(query, id); 
```

`executeQuery(String query, Object... args)`您选择的数据库访问方法在哪里。

如果您不使用绑定变量，那么您就是；

a) 易受 SQL 注入攻击。
b) 由于不使用数据库上的查询缓存而损失性能。

# ios - 从字典中访问 json 内容

> ID：15544184
> 
> 赞同：0
> 
> 时间：2013-03-21T09:54:13.127
> 
> 标签：ios, objective-c

我有一本包含 Json 数据的字典。我无法处理其中的数据。我尝试枚举但一直失败。

```
This is the data format I am getting back using NSLog:

2013-03-21 12:48:36.973 SaleItems[21009:c07] {
    article = "Surface's other shoe is about to drop: the full Windows 8, Intel Core-driven Surface is headed to stores in just a few weeks.";
    id = 2;
    title = "Microsoft Surface Pro hits U.S. and Canada ";
}
2013-03-21 12:48:36.974 SaleItems[21009:c07] {
    article = "Hit by growing demand for Samsung devices, the iPhone will lose smartphone market share for the current quarter, says a Citi analyst";
    id = 3;
    title = "iPhone to shed market share";
}
2013-03-21 12:48:36.974 SaleItems[21009:c07] {
    article = "The carrier says it plans to buy wireless spectrum and network assets from Atlantic Tele-Network, aka Alltel, in an effort to boost its spectrum coffers.";
    id = 4;
    title = "AT&T spends $780 million ";
} 
```

我从它的外观上知道我正在取回一个数组字典。如何访问其中的数组和元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:59:15.023

看起来你有 key 作为文章、id 和标题，只需访问循环中的对象：

**我假设您有一个名为 SalesItem 的类，并且上面的日志来自该类的每个对象*

```
for(SalesItem *object in SalesItem){
    NSLog(@"Article : %@",object[@"article"]);
    NSLog(@"Id : %@",object[@"id"]);
    NSLog(@"Title : %@",object[@"title"]);
} 
```

# git - 用本地（Git）覆盖master

> ID：15544192
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:54:35.590
> 
> 标签：git

我想知道用我当前工作目录中的内容覆盖master。

谢谢。

PS我对Git很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:59:41.953

这可能就足够了：

```
git checkout -B master X 
```

从[`git checkout`手册页](http://git-scm.com/docs/git-checkout)：

> 如果`-B`给出，`<new_branch>`则在不存在时创建；否则，它被重置。
> 这是交易等价物：

```
$ git branch -f <branch> [<start point>]
$ git checkout <branch> 
```

> 也就是说，除非“ `git checkou`t”成功，否则不会重置/创建分支。

这比“[如何用实验分支替换主分支](https://stackoverflow.com/questions/4134276/how-to-replace-master-branch-with-experiment-branch)”中描述的其他选项要短一些。

# image - 响应式投资组合画廊图像调整大小

> ID：15544194
> 
> 赞同：0
> 
> 时间：2013-03-21T09:54:39.480
> 
> 标签：image, wordpress, responsive-design, portfolio, timthumb

我正在使用 WordPress 制作一个响应式投资组合网站。我有一个小问题正在破坏布局。所有图像均应为 300 像素宽 x 200 像素高。如果用户上传的图像大于上述尺寸，我还使用 WordPress API 裁剪图像

`add_image_size( "portfolio", 300, 200, true );`

这对我来说是它自动将`width="300"`和`height="200"`属性插入图像（但图像的原始尺寸保持不变，它们只是被调整大小）这很好用，除非我尝试调整浏览器窗口的大小..

这是一个场景：客户端上传尺寸为 300px 宽和 210px 高的图像。最初它正在调整大小并显示，因此布局是完美的，但是当我调整浏览器大小时，图像也会调整大小，但相对于其“原始尺寸”..因此原始高度为 210px 的图像比其他图像大.. 当我浮动所有图像以形成 3 列布局时，高度差异会破坏布局（将列移到此下方右侧的大图像，并在其下方留下一个空列。）

我该如何解决这个问题？我想在显示之前使用 timthumb 来调整所有图像的大小。因此可以即时更改图像的原始尺寸，但我认为这不是一种有效的方法？这个问题的任何其他解决方案？我也不想使用像 jQuery Masonry 这样的东西，因为我有一个特定的布局要维护。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:16:14.807

您可以使用 css 中的 max-height 规则来平等地限制所有图像的高度。

例如：

```
.gallery img{
  max-height: (some height);
} 
```

使用 % 或 em 作为高度，像素在响应式设计中可能效果不佳。

# extjs - Sencha Touch 2 - 使用静态视图创建列表

> ID：15544195
> 
> 赞同：1
> 
> 时间：2013-03-21T09:54:41.410
> 
> 标签：extjs, touch, mobile-application

我遵循 Sencha 提供的文档，为自己制作了一个项目列表，将其转换为导航视图和以下详细信息页面。这是一个多对一的解决方案，如下图所示：

![多对一解决方案](../Images/2f2945f4c30dff36a2696265f0c45033.png)

使用此解决方案，我可以将列表中项目的标题发送到详细信息视图中，然后键入如下内容： [code]` Ext.define('navigation.view.PresidentDetails', { extend: 'Ext.Panel', xtype : '总统详情',

```
config: {
    styleHtmlContent: true, 
    scrollabe: 'vertical',
    title: 'Details',
    tpl: 'Hello {firstName}!'
} 
```

}); `[/代码]

看来我不能在这段代码中使用语句，所以我可以根据我点击的项目指定我想要的内容。那么我的问题是 - 我如何创建一个更静态的视角？我可以创建一对一的关系吗？（见下图）

![1对1解决方案](../Images/fe8bb9d02864bf701289d8ac6c18ed9a.png)

任何人都知道如何实现这一目标？我目前正在使用 MVC，这是“我的”（阅读：Senchas）控制器的当前状态，只是为了掌握它：

```
Ext.define('navigation.controller.Main', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        main: 'mainpanel'
    },
    control: {
        'presidentlist': {
            disclose: 'showDetails'
        }
    }
},

showDetails: function(list, record) {
    this.getMain().push({
        xtype: 'presidentdetail',
        data: record.data
    });
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:28:20.390

这个问题现在已经解决了，而且比我想象的要容易得多。我在文档中查找了 itemTap 事件，并使用项目的索引作为 ID 并编写了这个小片段。

```
showDetailsonItemTap: function(list, index, target, record) {
    var page;
    switch(index) {
        case 0:
            page = 'presidentdetail';
            break;
        case 1: 
            page = 'presidentdetail2';
            break;
    }
    this.getMain().push({
                xtype: page,
                data: record.data
        });
    console.log(index);
} 
```

之后，它只是手动创建视图并在 switch 语句中点击它们的 xtype。

# c++ - QList 的 C++ Qt 内存分配异常

> ID：15544196
> 
> 赞同：-1
> 
> 时间：2013-03-21T09:54:44.210
> 
> 标签：c++, qt, exception, memory, qlist

这怎么会发生，这会引发异常

```
 for(int h = 0 ; h < listOne.count() ; ++h) {
        delete[] listOne[h];
    } 
```

与 QList listOne ？我删除 float* 数组迭代，直到我达到 QList 中的元素数......

**编辑和解决方案**

实际上，当我在 QList 的一项中仅添加一个浮点数时，它会失败。然后，它不再是 a`float*`并且你不能`delete []`它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:03:06.803

```
How can this ever happen that this throws an exception 
```

一种可能性：您在列表中添加了一个数组 2 次。一个修复：

```
for(int h = 0 ; h < listOne.count() ; ++h) {
    delete[] listOne[h];
    listOne[h]=nullptr;
} 
```

也许其他错误（您向列表添加了非数组指针）。

编辑：

> 实际上，当我在 QList 的一项中仅添加一个浮点数时，它会失败。然后，它不再是 float* 并且您不能删除 [] 它。

我怀疑......一个非常简单的修复：

```
float *pi=new float[1];
pi[0]=3.14f; 
```

现在添加`pi`到列表中

# java - 使用 Selenium WebDriver java 在用户名和密码文本框之间切换并输入相应的值

> ID：15544198
> 
> 赞同：1
> 
> 时间：2013-03-21T09:54:47.577
> 
> 标签：java, internet-explorer, selenium-webdriver, alert

我正在使用 selenium 导航到页面并使用 Internet Explorer 截取屏幕截图。但问题是登录是由 Javascript 警报框处理的。现在 Selenium 有一个功能，可以通过使用 Alert 元素将焦点带到警报框，我已经设法带来焦点并在用户名文本框中输入一些值。

问题是 Selenium 没有将焦点切换到密码文本框，而是在同一个框中输入用户名和密码。我尝试使用 Java AWT Robot 单击 tab 键并更改焦点，但 Selenium 无法识别这一点，它继续在同一个框中输入用户名和密码。

下面是我的代码：

```
Robot robot = new Robot();
driver.get("the url");
Alert alert = driver.switchTo().alert();
alert.sendKeys("username");
robot.keyPress(KeyEvent.VK_TAB);
alert.sendKeys("password");
alert.accept(); 
```

我在这里想念什么？我的方法在这里正确还是我必须采取不同的路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:00:53.707

嗨 Madusudanan 通过注释另一种开关方法来尝试代码。

```
Robot robot = new Robot();
Alert alert=dr.switchTo().alert();
dr.get("the url");
alert.sendKeys("username");
//dr.switchTo().alert();
robot.keyPress(KeyEvent.VK_TAB);
alert.sendKeys("password");
alert.accept(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T17:25:26.430

不是 Java 答案，但因为我发现这个问题正在寻找这个问题的 .net 答案。

如果您使用的是 .NET，则需要使用 SendKeys 而不是 Robot

```
using System.Windows.Forms;

        _driver.SwitchTo().Alert().SendKeys("Username");
        SendKeys.SendWait("{TAB}");
        SendKeys.SendWait("password");
        SendKeys.SendWait("{Enter}"); 
```

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T10:18:54.277

根据您的问题，在关注密码字段 Selenium WebDriver 后无法输入/输入/键入它的相应值。您可以使用 Robot 类键入密码值。以下是整个代码：

```
//First write a method to use StringSelection
public void setClipboardData(String string) {
            StringSelection stringSelection = new StringSelection(string);
        Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);
    }

Robot robot = new Robot();
driver.get("Your URL");
Alert alert = driver.switchTo().alert();
alert.sendKeys("username");
robot.keyPress(KeyEvent.VK_TAB);
robot.keyRelease(KeyEvent.VK_TAB);
//call setClipboardData method declared above
setClipboardData("Your Password");
//Copy Paste by using Robot class
robot.keyPress(KeyEvent.VK_CONTROL);
robot.keyPress(KeyEvent.VK_V);
robot.keyRelease(KeyEvent.VK_V);
robot.keyRelease(KeyEvent.VK_CONTROL);
alert.accept(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T04:34:11.390

我从任何来源创建类似的代码并在添加后工作：a.keyRelease(KeyEvent.VK_ADD);

```
 // Initialize InternetExplorerDriver Instance.
          WebDriver driver = new InternetExplorerDriver();

          // Load sample calc test URL.
          driver.get("your homepage testing");

          //Code to handle Basic Browser Authentication in Selenium.
          Alert aa = driver.switchTo().alert();

          Robot a = new Robot();
          aa.sendKeys("beyond"+"\\"+"DND");  

          a.keyPress(KeyEvent.VK_TAB);
          a.keyRelease(KeyEvent.VK_TAB);
          a.keyRelease(KeyEvent.VK_ADD);                

          setClipboardData("P@ssw0rd");
          a.keyPress(KeyEvent.VK_CONTROL);
          a.keyPress(KeyEvent.VK_V);
          a.keyRelease(KeyEvent.VK_V);
          a.keyRelease(KeyEvent.VK_CONTROL);
          aa.accept();    private static void setClipboardData(String string)StringSelection stringSelection = new StringSelection(string); 
```

Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-24T21:47:57.773

使用 java.awt.Robot 类有两个主要缺点。

1.  Mac 问题：在 Mac OS 上，当我们实例化 Robot 类时，Java 应用程序在后台启动并带走焦点（因此社区中的一些人发送 VK_META（Cmd 键）和 VK_TAB 以返回警报）。由于 Mac 的复制和粘贴快捷键不同，因此也需要处理（使用 VK_META 代替 VK_CONTROL）。

2.  Jenkins 或远程运行器问题：即使我们解决了上述问题，最终当从 Jenkins 作业运行测试时，机器人实例化再次成为问题（[通过 jenkins 执行 Robotframework selenium 不起作用](https://stackoverflow.com/questions/48984806/robotframework-selenium-execution-through-jenkins-not-working)）

幸运的是，sendKeys 可以处理 tab 键（作为扫描代码），下面的代码对我有用。

```
Alert alert = driver.switchTo().alert();
alert.sendKeys("username" + Keys.TAB.toString() + "password");
alert.accept(); 
```

# iphone - 在 UIWebView 中加载 UIImage 表单 NSData 并将其居中

> ID：15544200
> 
> 赞同：3
> 
> 时间：2013-03-21T09:54:54.773
> 
> 标签：iphone, ios, cocoa-touch, uiwebview, uiimage

所以我基本上得到一个`NSData`of`UIImage`并使用 a`UIWebView`来显示它。我这样做：

```
[self.view addSubview:webView];

webView.delegate = self;
webView.scalesPageToFit = YES;
webView.backgroundColor = [UIColor darkGrayColor]; 
```

然后我像这样将图片加载到其中：

```
NSData *image02Data = attachmentToLoad.attachment_data;
[webView loadData:image02Data MIMEType:@"image/jpg" textEncodingName:nil baseURL:nil]; 
```

我得到的结果并不是我想要的：

![在此处输入图像描述](../Images/998db4977cf934917819a380509d81ba.png)

如您所见，图像在`UIWebView`. 如何使图像的大小`UIWebView`等于图像的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:03:02.733

你看过这个帖子吗？ [点我](https://stackoverflow.com/questions/3936041/how-to-determine-the-content-size-of-a-uiwebview)

我想这正是你想要的

# c# - 如何将页面导航从列表框设置到另一个页面？

> ID：15544201
> 
> 赞同：2
> 
> 时间：2013-03-21T09:54:56.307
> 
> 标签：c#, windows-phone-7, xaml

嗨，我正在使用下面给出的 XAML 文件。我想将列表框选定的项目导航到另一个页面。

```
 <ListBox x:Name="NotchsList11"  Grid.ColumnSpan="2"
           Margin="0,0,0,0" Grid.Row="3" HorizontalAlignment="left" Width="720"  Grid.RowSpan="2">
        <ListBox.ItemTemplate>
            <DataTemplate>
                  <StackPanel Margin="0,0,0,0"  Grid.ColumnSpan="3" x:Name="ControlsPanel"
                        Grid.Column="0"
                        Height="215"
                        VerticalAlignment="Top">
                        <StackPanel Background="#eb2427" Orientation="Horizontal">
                            <TextBlock Grid.Row="1"  FontFamily="Calibri" FontSize="34" FontWeight="Bold"  FontStyle="Normal" Margin="10,0,0,0"
                                Text="{Binding name}"
                                   />               
                        </StackPanel>
                        <ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                        <StackPanel>
                        <StackPanel VerticalAlignment="Top" Width="Auto">
                                 <ListBox ItemsSource="{Binding Images}" SelectionChanged="NotchsList11_SelectionChanged" Width="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                    <ListBox.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                                                </StackPanel>
                                            </ItemsPanelTemplate>
                                        </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Image Source="{Binding}" Width="160" Height="120" VerticalAlignment="Top"></Image>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                     </StackPanel>
                 </StackPanel>
            </ScrollViewer>         
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox> 
```

下面给出了我的 xml 文件

```
<?xml version="1.0" encoding="utf-8" ?>
  <root>
   <Categories>
     <Category name="Photos">
      <Articles>
       <article  title="Sherawat's">
        <FullContent>
         <style> img {padding:2px;} </style><p> <img alt=" Sherawat" pimcore_disable_thumbnail="true" pimcore_id="5853" pimcore_type="asset" src="http://feb2013/bolly---sherawat-s-upcoming-movie-dirty-politics/90_mallika-sherawat_bolly.jpg" style="width: 500px; height: 370px; float: left;" /></p> <p>Sherawat is all set to begin shooting for&nbsp;<em>Dirty Politics</em>&nbsp;where she plays Bhanwari Devi, a nurse whose murder hit the headlines last year. Meanwhile, she gets talking on&nbsp;Hollywood where she has not really had any meaty roles.</p>
        </FullContent>
        <thumb_image>
          <image  url="http://sss.com/Photo1.jpeg"/>"/>
        </thumb_image>
       </article>
       <article articleid="2684" title="Steals the Mai Show">
        <FullContent>
          <div id="container" class="cf">
           <link rel="stylesheet" href="http://sss.com/imageslider/app/css/demo.css" type="text/css" media="screen" /> <link rel="stylesheet" href="http://sss.com/imageslider/app/css/flexslider.css" type="text/css" media="screen" /><div id="main" role="main"> <section class="slider"> <div class="flexslider"> <ul class="slides"><li>Sonam Kapoor<img src="http://sss.com//website/var/tmp/thumb_5814_1_01feb2013__appfeed.jpeg" alt="Kapoor"/>/li> </ul></li>
         </div>
      </FullContent>
      <thumb_image>
        <image  url="http://Photo2.jpeg"/>"/>
      </thumb_image>
     </article>
    </Articles>
</Category>
<Category name="Videos">
  <Articles>
    <article articleid="415" title=" Dirty Politics">
     <FullContent>
       <style> img {padding:2px;} </style><p> <img alt="Sherawat" pimcore_disable_thumbnail="true" pimcore_id="5853" pimcore_type="asset" src="http://sss.com/bolly/feb2013/bolly---sherawat-s-upcoming-movie-dirty-politics/90_sherawat_bolly.jpg" style="width: 500px; height: 370px; float: left;" /></p>
     </FullContent>
     <thumb_image>
       <image  url="http://Video1.jpeg"/>"/>
     </thumb_image>
    </articles>
    <article articleid="68" title="Digital!">
     <FullContent>
    <p> Touch, tap, flip, slide! You don&#39;you experience it.</p> <br/><br/><br/> <br/><br/>
     </FullContent>
     <thumb_image>
       <image  url="http://Video2.jpeg"/>"/>
     </thumb_image>
   </article>
 </Article>
</Category>
<Category name="Bolly">
  <Articles>
   <article articleid="415" title="upcoming movie">
    <FullContent>
     <style> img {padding:2px;} </style><p> <img alt="Sherawat" pimcore_disable_thumbnail="true" pimcore_id="5853" pimcore_type="asset" src="http://sss.com/bolly/feb2013/bolly---sherawat-s-upcoming-movie-dirty-politics/90_sherawat_bolly.jpg" style="width: 500px; height: 370px; float: left;" /></p>
    </FullContent>
    <thumb_image>
     <image url="http://sss.com/website/var/tmp/thumb_5854_90_mallika-sherawat_thumb_bolly__forfeed.jpeg"/>
    </thumb_image>
   </articles>
   <article articleid="436" title="Surprise Package">
     <Description>
       There was more than just good music at the trio's recent performance
     </Description>
     <FullContent>
       <style> img {padding:2px;} </style><p> <img alt="Akcent" pimcore_disable_thumbnail="true" pimcore_id="6110" pimcore_type="asset" src="http://dev2.mercuryminds.com/global/feb2013/surprise-package-at-akcent-concert/18_akcent_global.jpg" style="width: 370px; height: 500px; float: left;" /></p>
     </FullContent>
     <thumb_image>
       <image url="http://sss.com/website/var/tmp/thumb_6109_18_akcent_thumb__forfeed.jpeg"/>
     </thumb_image>
    </article>
   </Article>
  </Category>
 </Categories>
</root> 
```

我的 MainPage.xaml.cs 代码

```
 void ParseXMLFile(string  dataInXmlFile)
    {
        try
        {
          //Parsing XML File

            XDocument xmlDoc = XDocument.Parse(dataInXmlFile);

            var query = from l in xmlDoc.Descendants("Category")
                        select new Notch
                        {
                            name = (string)l.Attribute("name").Value,
                            Titles = l.Element("Articles").Elements("article")
                                     .Select(s => s.Attribute("title").Value)
                                     .ToList(),

                            Images = l.Element("Articles").Elements("article")
                                     .Elements("thumb_image").Elements("image")
                                     .Select(x => x.Attribute("url").Value).ToList(),

                        };

                        foreach (var result in query)
                        {
                            Console.WriteLine(result.name);
                            foreach (var detail in result.Titles.Zip(result.Images, (st, si) => string.Format("{0} {1}", st, si)))
                            {
                                Console.WriteLine(detail);
                            }
                        }
                        NotchsList11.ItemsSource= query;

        }
        catch(Exception e)
        {
            MessageBox.Show("Binding Failed");
        }

    } 
    private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
   {
      Notch selectedItemData = (sender as ListBox).SelectedValue as Notch;
      if(selectedItemData != null)
       {
     NavigationService.Navigate(new Uri(string.Format("/Test.xaml?parameter",selectedItemData.articleid), UriKind.Relative));
       }
    } 
```

我的 DetailPage.xaml.cs

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
 {
     base.OnNavigatedTo(e);
     string parameter = this.NavigationContext.QueryString["parameter"];
  } 
```

如果我单击任何图像、相关标题和完整内容导航到详细信息页面，但完整内容希望在详细信息页面上显示 web 视图。所以我尝试了这段代码，但 selectedItemData 得到空值。我无法导航到其他页面。所以任何人都可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:19:41.380

你已经`ItemsSource="{Binding Images}"`为你的列表框设置了，这意味着你不应该`Notch`在你的`SelectionChangedHandler`. 每个项目都接收一个图像作为其数据上下文，它是实例`Images`内列表中的一个元素。`Notch`

因此，您只能投射到`String`您的处理程序内部。

您有一个顶级列表框，并且每个项目又有自己的列表框。*您正在跟踪内部*列表的选择更改，在这种情况下，您的数据上下文是*该*列表的单个项目。您无权访问其中的父范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:36:33.030

在 ListBox 的 SelectionChanged 事件处理程序中，添加此行

```
override NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var item = NotchsList11.Items[NotchsList11.SelectedIndex] as YourClassUsedForBinding;
        if(item.SomeProperty == "Something")
        NavigationService.Navigate(new Uri("/YourNewPage.xaml", UriKind.Relative));
        else
        NavigationService.Navigate(new Uri("/YourOtherPage.xaml", UriKind.Relative));
        //if more cases use a switch case
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:54:35.827

```
 private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        var lb = sender as ListBox;
        if (lb == null) return;
        var articleSubItem = lb.SelectedItem as NotchSubItem;
        if (articleSubItem == null)  return;

        App.CurrentArticle = articleSubItem;
        NavigationService.Navigate(new Uri("/Test.xaml?selectedItem=" + articleSubItem.ArticleId, UriKind.Relative));
        NotchsList11.SelectedIndex = -1;
    } 
```

设置详情页面

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        string selectedIndex = "";
        if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
        {
            title.Text = App.CurrentArticle.Titles;

            webBrowser.NavigateToString(App.CurrentArticle.FullContent);

        }
        base.OnNavigatedTo(e);

    } 
```

MainPage.xaml 页面

```
 <StackPanel Width="Auto">
                            <StackPanel VerticalAlignment="Top" Width="Auto">
                                <ListBox  ItemsSource="{Binding Articles}"   Margin="5,5,5,0" Width="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectionChanged="NotchsList11_SelectionChanged">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"  VerticalAlignment="Top">
                                            </StackPanel>
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border BorderBrush="#302c2d" Background="#302c2d" BorderThickness="5,5,5,0"   Name="image"  Margin="3,0,3,0">
                                                <Image Source="{Binding Image}"  Width="141" Height="95" Name="value"  Stretch="Fill" VerticalAlignment="Top"></Image>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Top"  Width="Auto">
                                <ListBox  x:Name="NotchsList11"  ItemsSource="{Binding Articles}"  Margin="5,0,5,0"   ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectionChanged="NotchsList11_SelectionChanged">
                                    <ListBox.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal">
                                            </StackPanel>
                                        </ItemsPanelTemplate>
                                    </ListBox.ItemsPanel>
                                    <ListBox.ItemTemplate>
                                        <DataTemplate >
                                            <Border BorderBrush="#302c2d" Background="#302c2d"  BorderThickness="5,5,5,0"  Margin="3,0,3,0">
                                                <TextBlock Text="{Binding Titles}"   Width="141" Height="90" Padding="3,0,0,30"  TextWrapping="Wrap"></TextBlock>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </StackPanel>
                        </StackPanel> 
```

MainPage.xaml.cs

```
XDocument xmlDoc = XDocument.Parse(dataInXmlFile);

            var query = from l in xmlDoc.Descendants("Category")
                        select new Notch
                        {
                            name = (string)l.Attribute("name").Value,
                            Titles = l.Element("Articles").Elements("article")
                                     .Select(s => s.Attribute("title").Value)
                                     .ToList(),

                            Articles = l.Element("Articles").Elements("article")
                                        .Select(article =>  new NotchSubItem
                                        {
                                        Image = article.Element("thumb_image").Element("image").Attribute("url").Value,
                                        ArticleId = article.Attribute("articleid").Value,
                                        FullContent = article.Element("FullContent").Value.ToString(),
                                        Titles = article.Attribute("title").Value,
                                        })
                                        .ToList(),

                            Images = l.Element("Articles").Elements("article").Elements("thumb_image").Elements("image")
                                     .Select(x => x.Attribute("url").Value).ToList(),

                        };

                        foreach (var result in query)
                        {
                            Console.WriteLine(result.name);
                            foreach (var detail in result.Titles.Zip(result.Images, (st, si) => string.Format("{0} {1}", st, si)))
                            {
                                Console.WriteLine(detail);

                            }

                        }
                        NotchsList11.ItemsSource = query;
        }
        catch(Exception e)
        {
            MessageBox.Show("Binding Failed");
        } 
```

# multithreading - 最好的 NHibernate 多线程模式？

> ID：15544202
> 
> 赞同：1
> 
> 时间：2013-03-21T09:54:57.330
> 
> 标签：multithreading, nhibernate, session, thread-safety

众所周知，NHibernate 会话不是线程安全的。但是我们在几个长时间运行的线程中分割了一个代码路径，所有线程都使用在初始线程中加载的对象。

```
using (var session = factory.OpenSession())
{
    var parent = session.Get<T>(parentId);
    DoSthWithParent(session, parent);
    foreach (var child in parent.children)
    {
        parallelThreadMethodLongRunning.BeginInvoke(session, child);
        //[Thread #1] DoSthWithChild(child #1) -> SaveOrUpdate(child #1) + Flush()
        //[Thread #2] DoSthWithChild(child #2) -> SaveOrUpdate(child #2) + Flush()
        //[Thread #3] DoSthWithChild(child #3) -> SaveOrUpdate(child #3) + Flush()
        // -> etc... changes to be persisted immediately, not all at the end.
        EndInvoke();
    }
    DoFinalChangesOnParentAndChildren(parent);
    session.Flush();
} 
```

}

一种方法是为每个线程创建一个会话，但这需要在每个线程中重新加载父对象。另外，最后一个方法也在对孩子进行更改，如果另一个会话同时更改它，或者必须被驱逐/重新加载，它将在 StaleObjectException 中运行。

所以所有线程都必须使用相同的会话。做这个的最好方式是什么？

1.  在初始线程（线程安全实现）中使用保存队列，该队列从主线程循环轮询（而不是 EndInvoke()）。子线程可以插入 NHibernate 对象以由主线程保存。

2.  使用一些回调机制在主线程中保存/刷新对象。WPF、Control.Invoke() 或 BackgroundWorker 中是否存在类似于 UI 线程回调的可能？

3.  将保存/刷新访问放入锁定（会话）块？可能很危险，因为修改 NHibernate 对象可能会更改会话，即使不执行 Save()/Flush()。

4.  或者我应该忍受数据库开销来为每个线程中的单独会话加载相同的对象，在主线程中驱逐并重新加载它们，然后再次进行更改？[编辑：由于对象并发/陈旧对象的风险而导致的错误“解决方案”]

还要考虑到应用程序在 NHibernate 之上有一个业务逻辑层，它有类似的对象，但是通过它自己的 Save() 命令将它的属性值发送到 NHibernate 对象，然后修改它们并立即执行 NHibernate Save()/Flush() .

编辑：对 NHibernate 对象的任何读取操作都可能会更改会话，这一点很重要——延迟加载、儿童收集在某些条件下会发生变化。所以最好在上面有一个业务对象层，它可以同步所有对 NHibernate 对象的访问。考虑到数据库操作只占用最少的线程时间（主要是偶尔的状态设置），大部分用于计算、监视、Web服务访问等，数据层同步的性能损失可以忽略不计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:59:16.057

session 对象不是线程安全的，你不能在不同的线程上使用它。单独线程中的 SaveOrUpdate 很可能会使您的程序崩溃或损坏您的数据库。但是，如何创建要更新的数据集并在主线程中执行 SaveOrUpdate 操作（是否创建了会话）？

> 在创建 NHibernate 会话时，您应该遵守以下做法： • 切勿为每个数据库连接创建多个并发 ISession 或 ITransaction 实例。
> 
> • 在为每个数据库的每个事务创建多个 ISession 时要格外小心。ISession 本身会跟踪对加载对象所做的更新，因此不同的 ISession 可能会看到陈旧的数据。
> 
> • ISession 不是线程安全的！永远不要在两个并发线程中访问同一个 ISession。ISession 通常只是一个单一的工作单元！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T20:02:25.593

首先，如果我理解正确，不同的线程可能会更新相同的对象。在这种情况下，无论是否使用 nHibernate，您都会同时对同一对象执行多个更新，这可能会导致意外结果。
您可能需要稍微调整您的设计以确保对象只能由（最多）单个线程更新。

现在，假设您的流程可能包括让相同的线程读取相同的数据（但写入不同的数据），我建议使用不同的会话 - 每个线程一个，并使用[2nd level cache](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)；
二级缓存保持在`SessionFactory`（而不是`Session`）级别，因此由所有会话实例共享。

# liferay - 为什么任何用户都可以编辑另一个用户公共页面

> ID：15544203
> 
> 赞同：0
> 
> 时间：2013-03-21T09:54:57.663
> 
> 标签：liferay, liferay-6

我创建了 3 个用户进行测试（用户 test1、test2、test），但是当我通过用户 test1 登录并访问 test2 的公共页面时，我可以编辑该页面？？？如何配置禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:03:05.920

根据您对“编辑页面”的含义：

*   如果所有用户都具有“管理员”角色，他们将能够将 portlet 添加到页面
*   这是一个公共页面，因此默认情况下每个人都可以访问该页面。如果存在具有公共写入权限的 Wiki，则每个人都可以编辑该 Wiki。
*   如果用户是“朋友”——无论是明确的还是隐含的，都属于同一个组织——他们可以在彼此的墙上写字

正如您在对此答案的评论中所述，对于您的用户而言，仅 PowerUser 或单个用户的 User 角色似乎就足够了：尝试在新安装中重现这一点 - 例如下载您拥有的版本（以及最新的可用版本）看看你是否可以在那里重现。可能是这些角色的权限搞砸了。您还可以比较用户（角色）在控制面板/角色/[Power]用户/定义权限中允许执行的操作 - 将您的安装与默认安装进行比较。

此外，您没有说明您使用的是什么版本。我无法重现这种行为。

# hadoop - 在条件下停止Hadoop中的Reduce函数

> ID：15544205
> 
> 赞同：3
> 
> 时间：2013-03-21T09:55:01.303
> 
> 标签：hadoop, reduce

我有一个 reduce 函数，我想在处理一些“n”键后停止 reduce 函数。我已经设置了一个计数器以在每个键上递增，并且在满足的条件下从 reduce 函数返回。

这是代码

```
 public class wordcount {

public static class Map extends Mapper<LongWritable, Text, IntWritable, IntWritable> {
        private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();
        private IntWritable leng=new IntWritable();

 public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line = value.toString();

        StringTokenizer tokenizer = new StringTokenizer(line);
         while (tokenizer.hasMoreTokens()) {
                String lword=tokenizer.nextToken(); 
            leng.set(lword.length());
             context.write(leng, one);
             }
        }
    } 

public static class Reduce extends Reducer<IntWritable, IntWritable, IntWritable, IntWritable> {

    int count=0;
        public void reduce(IntWritable key, Iterable<IntWritable> values, Context context) 
         throws IOException, InterruptedException {
         int sum = 0;
            for (IntWritable val : values) {
                sum += val.get();
        count++;
         }
        context.write(key, new IntWritable(sum));
        if(count>19) return;
            }

    } 
```

有没有其他方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T10:17:23.343

您可以通过覆盖`run()`Reducer 类（新 API）来实现此目的

```
public static class Reduce extends Reducer<IntWritable, IntWritable, IntWritable, IntWritable> {

  //reduce method here

  // Override the run()
  @override
  public void run(Context context) throws IOException, InterruptedException {
    setup(context);
    int count = 0;
    while (context.nextKey()) {
        if (count++ < n) {
        reduce(context.getCurrentKey(), context.getValues(), context);
        } else {
            // exit or do whatever you want
        }
    }
    cleanup(context);
  }
} 
```

# database - PLS-00201 在 Oracle 中运行存储过程时出错

> ID：15544207
> 
> 赞同：1
> 
> 时间：2013-03-21T09:55:04.030
> 
> 标签：database, oracle, oracle11g

我最近为我的一个项目使用了 oracle 数据库。我创建了一个用于从数据库中选择多行的存储过程。以下是我的程序

```
create Or replace
PROCEDURE TEST(p_cursor OUT SYS_REFCURSOR) AS

BEGIN
open p_cursor FOR select * from branch_info;
END TEST; 
```

当我执行此过程时，出现以下错误：

```
 *
ERROR at line 1:
ORA-06550: line 1, column 7:
PLS-00201: identifier 'SAURAV.TEST' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我已经搜索过它并在[这里](https://stackoverflow.com/questions/6577490/calling-oracle-pl-sql-pls-00201-identifier-001-must-be-declared)找到了类似的问题，但错误线和原因不同。

任何人都请帮我解决这个问题。

**编辑：**错印测试与文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:28:48.210

问题在于关键字测试

```
CREATE OR REPLACE PROCEDURE test (p_cursor OUT sys_refcursor)
AS
BEGIN
    OPEN p_cursor FOR
        SELECT  *
          FROM  branch_info;
END test; 
```

并执行

```
variable rc refcursor;

exec test( :rc );

print rc;

ORA-06550: line 1, column 7:
PLS-00201: identifier 'TEST' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

更改为其他名称

```
CREATE OR REPLACE PROCEDURE test2 (p_cursor OUT sys_refcursor)
AS
BEGIN
    OPEN p_cursor FOR
        SELECT  *
          FROM  branch_info;
END test2 ; 
```

执行为

```
variable rc refcursor;

exec test2 ( :rc );

print rc;

PL/SQL procedure successfully completed. 
```

从 sql 加

```
SQL> variable usercur refcursor;
SQL> DECLARE
  2  BEGIN
  3  test2(:usercur);
  4  end;
  5  /

PL/SQL procedure successfully completed.

SQL> print usercur; 
```

# c# - 如何使用反射创建一个将接口作为其构造函数参数的类实例？

> ID：15544212
> 
> 赞同：1
> 
> 时间：2013-03-21T09:55:16.160
> 
> 标签：c#, reflection

```
object[] parame = new object[1];
parameters[0] = param1;

ConstructorInfo[] info = type.GetConstructors();
info[0].Invoke(parame );

obj= Activator.CreateInstance(type, parameters); 
```

这给了我一个错误，说`ctor`找不到，因为`ctor`将接口作为参数。

现在如何创建这个对象的实例？

```
public Controller(ICustomInterface custom)
        {
            _custom= custom;
        } 
```

我试图用相同的参数调用ctor，它说这个类的对象不能转换为接口类型。虽然这个类实现了这个接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:22:55.077

实现您的接口，以便您可以创建实现接口的实例，如下所示：

```
class CustomClass : ICustomInterface {} 
```

你只需`Activator`调用

```
var obj = Activator.CreateInstance(typeof(Controller), new CustomClass()); 
```

它将返回一个正确的实例`Contoller`，并`new CustomClass()`作为构造函数参数传递

# java - 使用 TaskExecutor 时出现 AssertionError

> ID：15544213
> 
> 赞同：2
> 
> 时间：2013-03-21T09:55:16.737
> 
> 标签：java, multithreading, spring, junit4

我正在编写一个同时（并行）执行多个线程的程序，我正在使用 TaskExecutor 。

```
@Autowired TaskExecutor threadPoolTaskExecutor;
@Test
public  void testSpringTaskExecutor() 
                         throws InterruptedException  {
    assertNotNull(threadPoolTaskExecutor);
    for (int k = 0; k < 5; k++) {
        Runnable myThread = 
                        new Workflow(new AtomicInteger(k));
        threadPoolTaskExecutor.execute(myThread);
    }
    Thread.sleep(500);
    logger.info("Finished all threads");
} 
```

当我测试我的代码时，引发了 AssertionError 异常。我正在使用 Spring Framework 来管理执行。

这是日志屏幕：

```
Exception in thread "main" java.lang.AssertionError
at org.junit.Assert.fail(Assert.java:92)
at org.junit.Assert.assertTrue(Assert.java:43)
at org.junit.Assert.assertNotNull(Assert.java:526) 
```

任何人有任何想法请:)谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:05:38.627

我找到了解决方案，我必须初始化 threadPoolTask​​Executor 所以当我们使用 assertNotNull(threadPoolTask​​Executor); 该对象将被初始化，我们可以执行我们的线程。

这是初始化方法：

```
 public void initialize() {
                     logger.info("Creating ThreadPoolExecutor");
                     BlockingQueue   queue = createQueue(this.queueCapacity);
                    executorService = new ThreadPoolExecutor  (
                             this.corePoolSize, this.maxPoolSize, this.keepAliveSeconds, TimeUnit.SECONDS,
                             queue, this.threadFactory, this.rejectedExecutionHandler);
                 } 
```

这是 executorService 定义：

```
private ThreadPoolExecutor executorService; 
```

谢谢安德鲁、佩斯和英戈的帮助:)

# string - yourkit 在内存分析期间不提供字符串对象

> ID：15544214
> 
> 赞同：0
> 
> 时间：2013-03-21T09:55:18.520
> 
> 标签：string, memory, profile, yourkit

在尝试监控对象大小时，字符串对象不会显示在分析结果中。谁能告诉我 wat 是使它们显示在结果中的程序....

```
public class calling extends called {
called myobj3 = new called();
called myobj4 = new called();
    public void function() {
    myobj3.d="Plz";
    myobj3.e="Help";
    myobj4.d="Thank";
    myobj4.e="You";   
    myobj3.act();
    myobj4.act();
    }
 public static void main(String [] args) { 
    System.out.println("calls an object from called.java");
    calling obj = new calling();
    obj.function();
 }
 }
class called {
public String d;
public String e;  
public void act() {
System.out.println(d+e);
}
} 
```

memory profile 保留大小 Shallow Size [Unreachable] 称为 40 40 [Unreachable] 称为 40 40

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:56:02.797

也许，您的对象已被收集或计划收集（无法访问）。您在哪一点捕获内存快照？

免责声明：我是 YourKit 开发人员。

# html - 活动菜单链接应该“裁剪”菜单条吗？

> ID：15544216
> 
> 赞同：0
> 
> 时间：2013-03-21T09:55:21.300
> 
> 标签：html, css, menu

我有一个奇怪的菜单要编码，但我不知道该怎么做，我有这个 100% 宽的标题条，左侧是徽标，右侧是菜单。条带越过全屏背景。所以，我需要活动链接以某种方式裁剪标题条，比如打一个洞。我附上了一张图片，以便您更好地了解。谢谢 ！

这是图像：

[http://oi49.tinypic.com/166zvo0.jpg](http://oi49.tinypic.com/166zvo0.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:19:42.630

使用背景不透明度

**HTML**

```
<ul>
    <li><a href="#">Menu 1</a></li>
    <li><a href="#">Menu 2</a></li>
    <li><a href="#">Menu 3</a></li>
    <li><a href="#">Menu 4</a></li>
</ul> 
```

**CSS**

```
body{
background:url(http://2.bp.blogspot.com/-C4Py3QDewmA/Td8HQzGhbcI/AAAAAAAAALU/BeVowacOJiA/s320/brick_wall.jpg) left top 
}
li{
    display:inline-block;
    padding:10px;
    border:1px solid black;
    float:left;
   background: rgba(255,255,255,0.60);
}
li:hover{
    background:none
}
a{
    color:white; font-weight:bold;
    text-decoration:none
} 
```

**[演示](http://jsfiddle.net/aALbE/22/)**

# java - Java中的集合排序

> ID：15544219
> 
> 赞同：1
> 
> 时间：2013-03-21T09:55:30.123
> 
> 标签：java, sorting, comparator

这种有什么问题吗？它不能正常工作。

```
 public List<LibRegistration> getLibraryRegistrationsSortedByTypeAndName()
    {
        List<LibRegistration> l = getLibRegs();
        Collections.sort(l, new Comparator<LibRegistration>() {
            public int compare(LibRegistration o1, LibRegistration o2) {
               return o1.getLibraryType().compareTo(o2.getLibraryType()) != 0?o1.getLibraryType().compareTo(o2.getLibraryType()):o1.getLibraryName().compareTo(o2.getLibraryName());
            }
        });
        return l;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:07:06.873

没有错，更清楚：

```
 public int compare(LibRegistration o1, LibRegistration o2) {
            int cmp = o1.getLibraryType().compareTo(o2.getLibraryType());
            if (cmp == 0)
                cmp = o1.getLibraryName().compareTo(o2.getLibraryName());
            return cmp;
        } 
```

虽然不允许空值并且 compareTo 定义明确。

# android - 如何在安卓手机中绘制折线图？

> ID：15544222
> 
> 赞同：0
> 
> 时间：2013-03-21T09:55:38.150
> 
> 标签：android

我有一组数据。我想画一个折线图。时间的横轴和纵轴是我的金额。

```
2013-2-1   50
2013-2-3   80
2013-3-5   90
2013-6-10  120
2013-6-20  40
2013-7-31  77 
```

和上面的数据一样，横轴是时间，纵轴是数字。如何使用折线图绘制它？我混淆了水平时间。它是发散的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:49:29.557

我建议您使用图表库，其中有很多：

*   [图表机器人](https://code.google.com/p/chartdroid/)
*   [字符引擎](https://code.google.com/p/achartengine/)
*   [安卓绘图](http://androidplot.com/wiki/Home)

和别的

只需尝试使用其中之一。

**相同的问题：**

*   [安卓图表](https://stackoverflow.com/questions/9741300/charts-for-android)
*   [安卓制图工具](https://stackoverflow.com/questions/5551845/charting-tool-for-android)
*   [Android 有没有好的图表库？](https://stackoverflow.com/questions/3424226/is-there-a-good-charting-library-for-android)

# java - 日期列中插入的日期错误

> ID：15544224
> 
> 赞同：2
> 
> 时间：2013-03-21T09:55:42.393
> 
> 标签：java, database, date

我有一个奇怪的情况。

在我的应用程序中，当用户访问应用程序中的某些内容时，我们将插入一条带有当前日期 (MM/dd/yyyy) 的记录。

有时，插入的日期不是当前日期的错误值。（即：'21/09/2014'、'13/09/2180'、'22/08/2179'）。我们正在使用 JPA 从 JAVA 插入记录。请帮助我找出问题或解决方案。

下面是代码，我在其中准备/传递域对象的值。

```
Date curDate = new Date();
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
UserAccessObj.setAccessedDate(sdf.parse( sdf.format( curDate ) )); 
```

这里**setAccessedDate** (Date) 是域对象中的 java.util.Date 设置方法。

那么，可能是什么问题？我无法追踪问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:01:51.070

而不是这个：

```
UserAccessObj.setAccessedDate(sdf.parse(sdf.format(curDate))); 
```

尝试这个：

```
UserAccessObj.setAccessedDate(curDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:58:10.343

是

```
sdf.parse( sdf.format( curDate ) ) 
```

绝对必要？您正在获取日期，将其转换为字符串，然后将其解析为日期？我怀疑你这样做是为了摆脱（误导性命名的）`Date`对象的时间部分？我认为按照[该线程中的答案](http://www.coderanch.com/t/497096/java/java/Remove-time-part-java-util)`Calendar`使用该类更快/更安全。最好的答案是使用[Joda-Time API](http://joda-time.sourceforge.net/)。

我不知道它是否会导致您的问题，但它会增加不必要的复杂性。还要注意这`SimpleDateFormat`不是线程安全的，如果上面的代码共享一个`SimpleDateFormat` 肯定会导致特殊行为的实例。同样，Joda-Time 在该域中提供线程安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T09:17:11.447

以这种格式将输入日期保存到数据库中：**“yyyy-MM-dd”**。正确的日期将被保存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:09:00.003

我认为你可以做的是使用 Calendar 对象来获取**当前系统时间**

```
Calendar cal = Calendar.getInstance(); 
```

然后将其转换为 SimpleDateFormat。

```
SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
dateFormat.format(cal.getTime()); 
```

然后你就有了自己的代码

```
UserAccessObj.setAccessedDate(sdf.parse( sdf.format( curDate ) )); 
```

希望能帮助到你 ：）

# php - PHP 如果 $_SESSION 回显。PHP/MySQL

> ID：15544227
> 
> 赞同：-2
> 
> 时间：2013-03-21T09:55:51.553
> 
> 标签：php, mysql, session

我有一个 auth.php 脚本，可以将 MySQL 表中的值插入到`$_SESSION['USERNAME'];` auth.php 脚本中：

```
<?php
    include("sql.php");
    session_start();

    function Destroy() {
        unset($_SESSION['UID']);
        unset($_SESSION['USERNAME']);
        unset($_SESSION['FULL NAME']);
        header("location: index-restricted.php");
    }

    if(isset($_SESSION['UID']) && isset($_SESSION['USERNAME'])) {
        $UID = $_SESSION['UID'];
        $username = $_SESSION['USERNAME'];
        $qry = mysql_query("SELECT * FROM `users` WHERE `UID` = '$UID' AND `Username` = '$username'");
        if(mysql_num_rows($qry) != 1) { Destroy(); }
    } else { Destroy(); }
?> 
```

我有一个dashboard.php，这是我的CMS首页，在顶部我添加了echo `$_SESSION['USERNAME'];`，它显示了谁登录了CMS，所以我想做某事。像那样。（请记住，我的 mySQL 表中有 3 个用户：DSaidov、LKatzarov、Admin）

```
if($_SESSION['USERNAME'] = "DSaidov"{
echo 'Denis Saidov';
}
if($_SESSION['USERNAME'] = "LKatzarov"{
echo 'Lyoubomir Katzarov';
}
if($_SESSION['USERNAME'] = "Admin"{
echo 'George Gerginov';
} 
```

但是当我执行以下操作时，它正在向我展示：`Denis SaidovLyoubomir KatzarovGeorge Gerginov`。我认为问题出在 auth.php 文件和引用的 mySQL 表中的变量中。我希望你明白我的意思。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:57:59.333

如果条件和相等运算符忘记关闭

```
if($_SESSION['USERNAME'] = "DSaidov"{ 
```

应该

```
if($_SESSION['USERNAME'] == "DSaidov"){ 
```

其他人也一样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:58:19.467

尝试关注

```
if($_SESSION['USERNAME'] == "DSaidov"){
echo 'Denis Saidov';
}
if($_SESSION['USERNAME'] == "LKatzarov"){
echo 'Lyoubomir Katzarov';
}
if($_SESSION['USERNAME'] == "Admin"){
echo 'George Gerginov';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:59:36.740

要么这是您的错字，要么您对 PHP 中的比较运算符不满意

您正在放置一个 if 语句，例如`if($_SESSION['USERNAME'] = "DSaidov")`

当您**设置**$_SESSION 值而不是**将**其与某物进行比较时，上述内容将始终为真。

将上述更改为 `if($_SESSION['USERNAME'] == "DSaidov")`（注意额外的 =）将为您解决此问题。

如果您需要进一步说明，请查看下面的比较运算符手册：

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

您的完整代码应该是：

```
if($_SESSION['USERNAME'] == "DSaidov"){
echo 'Denis Saidov';
}
if($_SESSION['USERNAME'] == "LKatzarov"){
echo 'Lyoubomir Katzarov';
}
if($_SESSION['USERNAME'] == "Admin"){
echo 'George Gerginov';
} 
```

# javascript - JavaScript 查询 - 使用 AND & OR 与单选、复选框和文本字段来启用表单元素

> ID：15544228
> 
> 赞同：3
> 
> 时间：2013-03-21T09:55:54.403
> 
> 标签：javascript, jquery

请参阅我已经拥有的[JSFiddle代码。](http://jsfiddle.net/cEaeK/13/)我的问题是我需要在文本字段中使用无线电检查**和**文本输入来启用其他无线电、复选框和文本字段。到目前为止，我只设法使用单选选项 1**或**单选选项 2 启用单选、复选框和文本字段。

这个[JSFiddle](http://jsfiddle.net/cEaeK/13/)可能会帮助你们，让你们更好地理解我的意思。

**HTML：**

```
 <div class='conlabel'>Have you started trading yet?</div>
  <table width="100">
          <tr>
            <td><label>
              <input type="radio" name="example" value="Yes" id="example_0" required />
              Yes</label></td>
      </tr>
      <tr>
        <td><label>
          <input type="radio" name="example" value="No" id="example_1" required />
          No</label></td>
      </tr>
</table><br>
  <li>
      <div class='conlabel'>If Yes, enter trading name:</div>
      <input type="text" id="field1" name="field1" placeholder="" disabled />
  </li><br>
  <li>
  <div class='conlabel'>If No, then:</div>
      <input type="text" id="field2" name="field2" placeholder="" disabled />
  </li><br>

<li>
      <div class='conlabel'>Enter trading start date (enabled when started trading yet = yes + trading name = notnull:</div>
      <input type="text" id="field3" name="field3" placeholder="" disabled />
 </li><br> 
```

**JS：**

```
$(function(){
$("#example_0, #example_1").change(function(){
    $("#field1, #field2").val("").attr("disabled",true);
    if($("#example_0").is(":checked")){
        $("#field1").removeAttr("disabled");
        $("#field1").focus();
    }
    else if($("#example_1").is(":checked")){
        $("#field2").removeAttr("disabled");
        $("#field2").focus();   
    }
});
}); 
```

在此示例中，代码当前启用并关注 field1**或**field2，具体取决于它们是 radio-example_0 还是 example_1。我无法弄清楚的是，如果他们选择是（example_0），然后在字段 1 中输入交易名称，那么如何启用字段 3。

希望这比我上次的尝试更清楚。谢谢你的帮助！（：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:55:11.553

您需要在光标离开时检查 field1 的值，试试这个：

```
 $("#field1").blur(function(){
   if($("#example_0").is(":checked")){
            if($("#field1").val()!==""){
                  $("#field3").removeAttr("disabled");
            }
        }
    }); 
```

[http://jsfiddle.net/cEaeK/13/](http://jsfiddle.net/cEaeK/13/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:37:00.810

```
$(function(){
    $("#example_0, #example_1").change(function(){
        $("#field1, #field2").val("").attr("disabled",true);
        if($("#example_0").is(":checked")){
            $("#field1").removeAttr("disabled");
            $("#field1").focus();
        }
        else if($("#example_1").is(":checked")){
            $("#field2").removeAttr("disabled");
            $("#field2").focus();   
             $("#field3").val('');
                              $("#field3").attr("disabled",true);
        }
    });

        $('#field1').focusout(function(){

            if($('#field1').val().length!=0)
                  $("#field3").removeAttr("disabled");
            else
            { $("#field3").val('');
                              $("#field3").attr("disabled",true);
            }

    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:59:23.617

```
if(($("#example0").is(":checked") && $("#field0").val().length != 0) || ($("#example1").is(":checked") && $("#field1").val().length != 0)) {
    PASS!
} 
```

# c# - 如何将变量从类传递到新类？

> ID：15544231
> 
> 赞同：0
> 
> 时间：2013-03-21T09:56:11.733
> 
> 标签：c#

我有这个类，稍后我将在 Form1 中为它创建一个实例，将变量从 Form1 传递给类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace GatherLinks
{
    class WebcrawlerConfiguration
    {

        public string url;
        public int levels;
        public string mainurl;
        public Dictionary<string,List<string>> localy;
        public bool removeext;
        public bool downloadcontent;
        public int failedUrls;
        public bool toCancel;
        public System.Threading.ManualResetEvent busy;

        public WebcrawlerConfiguration()
        {

        }
    }
} 
```

我如何让这个类从 Form1 获取变量？当我为类创建实例时，类中的每个变量都应该获取 Form1 中的变量。

然后我有这个类：

```
class BackgroundWebCrawling
    {
        int counter = 0;
        List<string> WebSitesToCrawl;
        BackgroundWorker mainBackGroundWorker;
        BackgroundWorker secondryBackGroundWorker;
        WebCrawler webcrawler1;
        WebcrawlerConfiguration webcrawlerCFG;
        public BackgroundWebCrawling()
        {
            mainBackGroundWorker = new BackgroundWorker();
            mainBackGroundWorker.DoWork += mainBackGroundWorker_DoWork;
        }

        private void mainBackGroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            for (int i = 0; i < WebSitesToCrawl.Count; i++)
            {
                if (counter >= 3)
                {
                    Thread.Sleep(10);
                }
                else
                {
                    webcrawler1 = new WebCrawler(webcrawlerCFG);
                    counter++;
                    secondryBackGroundWorker = new BackgroundWorker();
                    secondryBackGroundWorker.DoWork += secondryBackGroundWorker_DoWork;
                }

            }            
        }

        private void secondryBackGroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {

                if (offlineOnline == true)
                {
                    offlinecrawling(f, levelsToCrawl, e);
                }
                else
                {
                    webcrawler1.webCrawler(
                }
                counter--;
        } 
```

在我做的底部： webcrawler1.webCrawler( 函数 webCralwer 应该从第一个类 WebcrawlerConfiguration 获取所有变量。

这就是 WebCrawler 函数的样子：

```
public List<string> offlinecrawling(string url, int levels, string mainurl, Dictionary<string, List<string>> localy, bool removeext, bool downloadcontent, int failedUrls, bool toCancel, System.Threading.ManualResetEvent busy) 
```

所以现在当我在做 webcrawler1.webCrawler( 它要求所有的变量......但我想以某种方式从 WebcrawlerConfiguration 传递它们。

我该怎么做 ？

# java - 将具有可变长度的 JRadioButtons 数组添加到 JWindow

> ID：15544233
> 
> 赞同：2
> 
> 时间：2013-03-21T09:56:19.113
> 
> 标签：java, arrays, swing, jradiobutton, jwindow

大家好，我试图向 JWindow 添加一个可变长度的数组，但我遇到了运行时错误。需要这里的帮助..

这是我的代码：

```
 package components;

import java.util.Calendar;

public class FullDay extends javax.swing.JWindow {

    public FullDay() {
        initComponents();
    }                         
    private void initComponents() {

        int i;
//to get the no of days of the current month.

        Calendar cal = Calendar.getInstance();
        int maxdays = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
        getContentPane().setLayout(new java.awt.FlowLayout());

//Creating an array of radiobuttons having size equal to the no of days of the current //month

        for(i=0; i<maxdays; i++) {
            jRadioButton[maxdays] = new javax.swing.JRadioButton();
            getContentPane().add(jRadioButton[i]);
        }        

        pack();

    }
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new FullDay().setVisible(true);
            }
        });
    }
    private javax.swing.JRadioButton jRadioButton[];
} 
```

但我得到的错误是：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at components.FullDay.initComponents(FullDay.java:18)
at components.FullDay.<init>(FullDay.java:8)
at components.FullDay$1.run(FullDay.java:30)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:02:24.833

`jRadioButton`分配前检查是否创建了数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:03:22.763

你需要初始化你的 JRadioButton 数组

```
JRadioButton jRadioButton[] = new JRadioButton[someValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:06:26.787

您可能想要初始化数组的第 i 个字段，而不是总是初始化最后一个：

```
 jRadioButton[i] = new javax.swing.JRadioButton(); 
```

代替：

```
 jRadioButton[maxdays] = new javax.swing.JRadioButton(); 
```

此外，正如前面的答案所述，在循环之外创建数组本身。

# javascript - Uncaught TypeError: Object [object Object] has no method 'submit' in sencha touch 2.1 错误

> ID：15544237
> 
> 赞同：1
> 
> 时间：2013-03-21T09:56:21.593
> 
> 标签：javascript, sencha-touch

我在提交此表单时遇到问题。当我单击提交按钮时，它显示 Uncaught TypeError: Object [object Object] has no method 'submit' 错误。

```
submitcontactform :function()
    {

        var form= this.getLoginform();
        form.submit({
            url:'contact.php'
        });
    } 
```

提前致谢

编辑：

我的 login.js

```
Ext.define('sencha.view.Login',{
            extend:'Ext.Panel',
            xtype:'LoginPanel',
            id:'loginform',
            config:{
                title:'LoginForm',
                items: [
                        {
                            xtype: 'emailfield',
                            name : 'email',
                            label: 'Email'

                        },
                        {
                            xtype: 'passwordfield',
                            name : 'password',
                            label: 'Password'

                        },
                        {   
                            xtype:'button',
                            text:'Submit',
                            ui:'confirm',
                            action:'submitForm'

                       }
                        ]
            }

}); 
```

我的控制器

```
Ext.define('sencha.controller.main',{
    extend:'Ext.app.Controller',

    views :['MainView','Login'],
    config:
    {
        refs:

         {
    loginform:'#loginform'
             //selector:'#buttonform'
         }

    },
    init: function(){

        this.control({
            'button[action=submitForm]':{
            tap:'submitcontactform'
        }

        });

    },
    submitcontactform :function(btn)
    {
        //console.log('im a function');
        //var form= this.getLoginform();
        var form=btn.up('formpanel');
        form.submit({
            url:'contact.php'
        });
    }
}); 
```

和我的 app.js

```
Ext.application({   
    name:'sencha',  
    controllers : ['main'],

    views :['MainView','Login',''],
    //stores: ['presidentstore'],
    //models: ['presidentmodel'],
    launch:function(){  
            Ext.create('sencha.view.MainView');
                //Ext.Viewport.add({
                //  xclass:'sencha.view.presidentlist'
                //});

    }   

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:50:58.413

你`LoginPanel`有问题。你`id`应该在你的`config`. 话虽如此，我建议使用 an`itemId`代替。你`LoginPanel`应该看起来像这样：

```
Ext.define('sencha.view.Login',{
        extend:'Ext.Panel',
        xtype:'LoginPanel',
        config:{
            title:'LoginForm',
            itemId: 'loginform',
            items: [
                    {
                        xtype: 'emailfield',
                        name : 'email',
                        label: 'Email'
                    },
                    {
                        xtype: 'passwordfield',
                        name : 'password',
                        label: 'Password'
                    },
                    {   
                        xtype:'button',
                        text:'Submit',
                        ui:'confirm',
                        action:'submitForm'
                   }
              ]
        }
}); 
```

最后，您的控制器应如下所示：

```
...
config:{
    refs:{
        loginform:{
            autoCreate: true,
            selector:'#loginform',
            xtype: 'LoginPanel'
        }
    },

    control : {
        'button[action=submitForm]' : {
            tap : "submitcontactform"
        }
    },
},

submitcontactform :function(btn) {
    //console.log('im a function');
    var form= this.getLoginform();
    form.submit({
        url:'contact.php'
    });
}
... 
```

# python - 如何用 gevent 和 oursql 解决这个死锁

> ID：15544238
> 
> 赞同：1
> 
> 时间：2013-03-21T09:56:21.767
> 
> 标签：python, deadlock, gevent, oursql

我有一个复杂项目的以下代码：

```
from gevent import monkey
monkey.patch_all()
import gevent

import oursql

def run(num):
    conn = oursql.connect(host = ...)
    cursor = conn.cursor()
    cursor.execute('start transaction')
    for i in range(2):
        print num, i
        cursor.execute('UPDATE userobj SET timestamp=(timestamp + 1) WHERE id = 1')
        gevent.sleep()

    cursor.execute('rollback')

proc = [gevent.spawn(run, i) for i in range(2)]
gevent.wait(proc) 
```

引擎是 InnoDB，输出是：

```
0 0
1 0 
```

然后程序挂起。我知道原因是mysql在第一个greenlet执行更新语句后锁定了行，所以另一个greenlet中的更新会阻塞。但是为什么 gevent 在另一个阻塞套接字之后不将控制权转移回第一个greenlet？我想知道除了使用锁或之前提交之外还有什么优雅的解决方案`gevent.sleep`吗？

ps 原来的情况是在一个网站项目中。我混合了 pymongo 和 SQLAlchemy 操作，并使用 gunicorn 为站点提供服务。但我发现并行请求可能会永远阻塞。调试了半天，终于发现这是因为pymongo使用了一些socket操作，导致gevent切换到另一个greenlet，导致死锁，如上代码所示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:00:06.873

感谢@robertklep，一种可能的解决方案是`oursql`用一些纯 python 驱动程序替换，例如`pymysql`. 实际上`oursql`是用 C 编写的，因此与`gevent`.

# css - 为什么填充在 Chrome 中不起作用

> ID：15544240
> 
> 赞同：0
> 
> 时间：2013-03-21T09:56:33.137
> 
> 标签：css

![在此处输入图像描述](../Images/3e06dbf3fc2c3a1dd747b7cb1ee49f3e.png)

这在 IE8 中运行良好，但在 Chrome 中无法运行。请帮我。我正在使用以下代码：

```
.sortpostdrpdwn{
       height:4px; 
       width:8px; 
       float:right;
       padding:15px 8px 5px 6px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:42:53.960

请详细说明，并非总是有人可以用不充分的代码来质疑您的答案。对不起，如果粗鲁。

填充将具有内部 div 效果。这是 8px 和 4px 的大小与 15 8 5 6 将导致总高度：24 宽度：22px，所以，这就是它在 IE 中正常工作的方式。

谢谢，

# r - setRefClass 按值传递，按引用传递

> ID：15544241
> 
> 赞同：1
> 
> 时间：2013-03-21T09:56:36.103
> 
> 标签：r, reference-class

我怀疑我不了解`setRefClass`R 中的所有方面。假设我有一个`setRefClass`初始化的实例。我想创建变量`X`，以便该变量等于实例的副本或引用`setRefClass`. 有没有区别：

```
x = InstanceOfsetRefClass 
```

和

```
x <<- InstanceOfsetRefClass 
```

我不完全理解，我的代码似乎有奇怪的行为。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:33:52.513

I don't think your problem is anything to do with reference classes, rather it's about scope. Consider the following example. We start by removing all variables from our workspace and create a definition for `A`:

```
rm(list=ls())
A = setRefClass("A", fields=list(x="numeric")) 
```

Next we create and call the function `f`:

```
f = function() {
  x1 = 1
  a1 = A$new(x=10)
  x2 <<- 2
  a2 <<- A$new(x=10)
}
f() 
```

The key difference between `<<-` and `=` is

> The operators '<<-' and '->>' are normally only used in functions, and cause a search to made through parent environments for an existing definition of the variable being assigned. If such a variable is found (and its binding is not locked) then its value is redefined, otherwise assignment takes place in the global environment.
> 
> From the help page: ?"<<-"

So variables created using `=` aren't found in the global enviroment

```
R> x1
Error: object 'x1' not found
R> a1
Error: object 'a1' not found 
```

but the other variables are:

```
R> x2
[1] 2
R> a2
Reference class object of class "A"
Field "x":
[1] 10 
```

# knockout.js - 淘汰递归映射问题

> ID：15544245
> 
> 赞同：0
> 
> 时间：2013-03-21T09:56:44.723
> 
> 标签：knockout.js, knockout-mapping-plugin

[这篇文章是这篇文章的](https://stackoverflow.com/questions/15480316/knockout-dynamic-binding-issue)后续。

我已更新代码如下：

```
viewModel.getQuotesSuccess = function (result) {

    var myCoverQuotesViewModel = function (data) {
    var self = this;
    ko.mapping.fromJS(data, {}, self);

    self.Childs = ko.observableArray(ko.utils.arrayMap(data.Childs, function (c) {
        return new myCoverQuotesViewModel(c);
    }));

    self.selectedChild = ko.observable();
    self.showChildren = ko.computed(function () {
        return self.selectedChild()
        && self.selectedChild().Childs().length > 0;
    });

var mapping = {
    'CoverQuotes': {
        create: function (options) {
            return new myCoverQuotesViewModel(options.data);
        }
    }
}

ko.mapping.fromJS(result, mapping, viewModel); 
```

};

viewModel 看起来像这样：

```
var viewModel = {

     CoverQuotes: [{id: 1, label:'test', Childs:[{id: 2, label:'child1'}]]
}; 
```

所以简而言之，我有一个 CoverQuotes 数组，其中每个元素还包含一个 CoverQuotes 数组（等等）。

这个映射的问题在于 Childs 可观察数组。调用时：

```
 return new myCoverQuotesViewModel(options.data); 
```

对于主要对象，它工作正常。但是，当从 th arrayMap 函数中调用构造函数时，则该行：

```
 ko.mapping.fromJS(data, {}, self); 
```

不做任何事情。

结果，嵌套子级被分配了属性 selectedChild 和 showChildren，但它们缺少所有其他属性（如本例中的 id 和 label ）。

我错过了什么，所以映射也适用于儿童？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:18:13.557

我已经使用递归自定义映射解决了我的问题

```
viewModel.getQuotesSuccess = function (result) {
    var myCoverQuotesViewModel = function (data) {
        var self = this;

        var mappingChildren = {
            'Childs': {
                create: function (options) {
                    return new myCoverQuotesViewModel(options.data);
                }
            }
        }

        ko.mapping.fromJS(data, mappingChildren, self);

        self.selectedChild = ko.observable();
        self.showChildren = ko.computed(function () {
            return self.selectedChild() && self.selectedChild().Childs().length > 0;
        });

        self.IsVisible = ko.computed({
            read: function () {
                var visible = true;
                if (self.DependsOn().length > 0) {
                    $.each(self.DependsOn(), function (index, value) {
                        var dependency = viewModel.QuoteSelectedViewModel().CoverQuotes.filterByProperty("Code", value);
                        if (dependency().length > 0) {
                            visible = visible & dependency()[0].IsSelected();
                        } else {
                            visible = false;
                        }
                    });
                }

                return visible;
            },
            deferEvaluation: true
        }, this);
    }

    var mapping = {
        'CoverQuotes': {
            create: function (options) {
                return new myCoverQuotesViewModel(options.data);
            }
        }
    }

    ko.mapping.fromJS(result, mapping, viewModel);
}; 
```

# iphone - IOS：我可以通过xcode中的恢复id获取对象吗？

> ID：15544248
> 
> 赞同：0
> 
> 时间：2013-03-21T09:56:57.790
> 
> 标签：iphone, ios, objective-c

我在情节提要中创建了许多文本字段并将对象注册到**ViewController.h**

```
@property (weak, nonatomic) IBOutlet UITextField *a0;
@property (weak, nonatomic) IBOutlet UITextField *a1;
@property (weak, nonatomic) IBOutlet UITextField *a2;
@property (weak, nonatomic) IBOutlet UITextField *a3;
... 
```

我想在文本字段之间添加一些内容，例如检查 textfield 的值是否为 0。目前我必须编写许多 if-else 语句。

```
if(self.a1.text==0){
    //do something
}else if(self.a2.text==0){
    //do something
}... 
```

我想用一个循环来做这件事。我可以使用恢复ID来获取文本字段的对象吗？假设我已经按顺序分配了一个恢复 id（即 a0,a1,a2...）

```
for(int i=0; i<10;i++){
     if(findViewById("a"+i).text==0){
          //do something
     }
} 
```

我可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:01:28.350

您可以使用`tags`，也可以使用 a`IBOutletCollection`而不是`@property`每个`UITextField`. 要将值与“0”进行比较，请执行以下操作：

```
[self.a1.text isEqualToString:@"0"] 
```

# c - c - 中断正在线程中执行的函数调用

> ID：15544255
> 
> 赞同：3
> 
> 时间：2013-03-21T09:57:08.240
> 
> 标签：c, windows, multithreading, function, interrupt

我有一个 DLL，其中包含一个线程函数，其伪代码如下所示：

```
volatile BOOL stopped = FALSE;

void StopEverything()
{
    /* Enter critical section */
    stopped = TRUE;
    /* Leave critical section */
}

void workerThreadFunc()
{
    Initialize();

    /* Checkpoint 1 */
    if(stopped)
    {
        /* Do cleanup */
        return;
    }

    doLaboriousTask1();

    /* Checkpoint 2 */
    if(stopped)
    {
        /* Do cleanup */
        return;
    }

    doLaboriousTask2();

    Uninitialize();
} 
```

在使用此 DLL 的代码中，清理函数如下所示：

```
void cleanup()
{
    StopEverything();

    /* Wait for all threads to exit */
    /* Do other cleanup */
} 
```

我的问题是双重的：

1.  有没有更好的方法来阻止我`workerThreadFunc()`执行而不是在各个检查点进行这样的检查？
2.  假设当主应用程序调用时`workerThreadFunc()`卡在里面。有没有办法*中断*并让它立即退出？`doLaboriousTask2()``StopEverything()` *`doLaboriousTask2()`*

 *谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:36:48.593

> 有没有更好的方法来阻止我的 workerThreadFunc() 执行而不是在各个检查点进行类似的检查？

可能不是。没有完全可靠的方法可以先发制人地停止非托管代码中的线程。任何声称会导致[`TerminateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717.aspx). 文档列出了使用该功能的各种可怕后果。例如：

> *   如果目标线程拥有临界区，该临界区将不会被释放。
> *   如果目标线程正在从堆中分配内存，则不会释放堆锁。
> *   如果目标线程在终止时正在执行某些 kernel32 调用，则线程进程的 kernel32 状态可能不一致。
> *   如果目标线程正在操作共享 DLL 的全局状态，则 DLL 的状态可能会被破坏，从而影响 DLL 的其他用户。

你问：

> 有没有办法中断 doLaboriousTask2() 并让它立即退出？

好吧，你可以打电话`TerminateThread`，但由于文档中描述的所有原因，你几乎肯定不应该这样做。*

# sql - oracle 许可证 - 查找许可证到期还剩多少天

> ID：15544259
> 
> 赞同：1
> 
> 时间：2013-03-21T09:57:12.333
> 
> 标签：sql, oracle

我正在尝试编写查询以查找远程 oracle 数据库的许可证类型和许可证到期的剩余天数。我在 oracle 11G R2 上研究的 dict 视图是 v$license 、 dba_feature_usage_statistics 和 PRODUCT_COMPONENT_VERSION，但没有一个符合目的。我找不到“每个”产品组件的许可证到期天数。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T04:44:55.290

该信息未存储在您的数据库中。您不必向 Oracle 注册每个数据库，我什至不确定是否有方法可以做到这一点。有 Oracle 配置管理器，但它旨在收集要在 My Oracle Support 上使用的信息，我不确定这是否包括许可证信息。

我能找到的最好的是 www.oracle.com/store/contracts。它列出了合同日期。但它们不一定与特定的数据库相关联。无论如何，您的大多数数据库可能都没有“许可”——您可以免费下载和运行任何版本的 Oracle，用于开发和原型设计。Express Edition 几乎可以用于任何事情。没有什么可以阻止您使用许可功能。有很多信任。

但我只买了便宜的个人版。我很想听听其他人在不同版本上花费了更多的钱。

# spring - org.jasypt.exceptions.EncryptionOperationNotPossibleException

> ID：15544266
> 
> 赞同：14
> 
> 时间：2013-03-21T09:57:33.857
> 
> 标签：spring, hibernate, password-encryption, jasypt

我将**Jasypt-1.9.0**与**Spring 3.1**和**Hibernate 4.0.1**一起使用。我的应用程序需要连接到数据库，其密码（root）以加密形式存储在应用程序的属性文件中。

我在网上查看并通过以下链接找到了方法：

1.  [http://www.jasypt.org/spring31.html](http://www.jasypt.org/spring31.html)

2.  [http://www.jasypt.org/hibernate.html](http://www.jasypt.org/hibernate.html)

3.  [http://www.jasypt.org/encrypting-configuration.html](http://www.jasypt.org/encrypting-configuration.html)

我已经根据我的要求完成了以下步骤和配置：

*   在构建路径中添加**了 jasypt-1.9.0**和**jasypt-hibernate4 -1.9.0。**
*   在我的**dispatcher-servlet**文件中添加了以下内容：

```
< bean id="propertyConfigurer"
   class="org.jasypt.spring31.properties.EncryptablePropertyPlaceholderConfigurer">

  < constructor-arg ref="configurationEncryptor" />
  < property name="locations">
    < list>
      < value>classpath:database.properties< /value>
    < /list>
  < /property>
< /bean>

< bean id="configurationEncryptor"
    class="org.jasypt.encryption.pbe.StandardPBEStringEncryptor">
  < property name="config" ref="environmentVariablesConfiguration" />
< /bean>

< bean id="environmentVariablesConfiguration"
    class="org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig">
  < property name="algorithm" value="PBEWithMD5AndDES" />
  < property name="passwordEnvName" value="APP_ENCRYPTION_PASSWORD" />
</bean> 
```

*   使用**Jasypt 1.9.0 的 CLI 工具，**我生成了下面的密码（附加的 CLI 快照）

![在此处输入图像描述](../Images/b5383570e38024ba6da8b5564d05af33.png) - 添加了一个新的环境变量作为**APP_ENCRYPTION_PASSWORD**，其值为**root**

*   **在database.properties 文件**中添加加密密码

 **```
db.driverClassName=com.mysql.jdbc.Driver
db.url=jdbc:mysql://localhost:3306/db1
db.username=root
db.password=ENC(bmfeQmgP/hJrh+mj6NANKA==) 
```

现在，如果我运行我的应用程序，则会出现以下异常：

```
org.jasypt.exceptions.EncryptionOperationNotPossibleException
    at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:981)
    at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:725)
    at org.jasypt.properties.PropertyValueEncryptionUtils.decrypt(PropertyValueEncryptionUtils.java:72) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-29T07:57:10.543

这个问题很可能已经过时了，但对于未来的寻求者...... EncryptionOperationNotPossibleException 是 jasypt 抛出的一般异常，以掩盖其他可能的异常。在以下情况下可能会发生此异常：

*   您的 jdk 没有安装 JCE 无限强度（最常见的情况）
*   你在数据库中有一些数据之前用其他密码加密过
*   您在数据库中有一些之前未加密的数据，并且您在某些字段中添加了加密
*   由于一些奇怪的数据损坏，jasypt 未能从 db 解密加密值
*   许多其他人，您只需要调试即可找出真正的原因..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-03T13:55:07.323

如果您在加密期间未指定所有参数，Jasypt 将使用默认值。确保在解密期间使用这些确切的默认值。否则你可能会遇到麻烦...

这对我有用：

```
mvn jasypt:encrypt -Djasypt.encryptor.password='secret' \
    -Djasypt.encryptor.algorithm=PBEWITHHMACSHA512ANDAES_256 \
    -Djasypt.encryptor.iv-generator-classname=org.jasypt.iv.RandomIvGenerator \
    -Djasypt.encryptor.salt-generator-classname=org.jasypt.salt.RandomSaltGenerator \
    -Djasypt.encryptor.key-obtention-iterations=1000  \
    -Djasypt.plugin.path='file:application.yml' 
```

```
mvn jasypt:decrypt -Djasypt.encryptor.password='secret' \
    -Djasypt.encryptor.algorithm=PBEWITHHMACSHA512ANDAES_256 \
    -Djasypt.encryptor.iv-generator-classname=org.jasypt.iv.RandomIvGenerator \
    -Djasypt.encryptor.salt-generator-classname=org.jasypt.salt.RandomSaltGenerator \
    -Djasypt.encryptor.key-obtention-iterations=1000  \
    -Djasypt.plugin.path='file:application.yml' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-23T07:08:56.147

在加密属性文件值时，我也遇到了类似的问题。我在本地 Windows 机器中加密了值并尝试在 Linux 机器中部署，但**JRE 版本不同**，因此无法解密加密值。但是我在 Linux 机器上加密了这些值并且解密成功了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-19T15:49:59.137

1.  删除以上所有 XML 配置并将以下 bean 添加到您的配置类中：

    ```
    @Bean public DataSource dataSource() {
    DataSourceBuilder dataSourceBuilder = 
    DataSourceBuilder.create();
    dataSourceBuilder.url(dbUrl);
    dataSourceBuilder.username(username);
    dataSourceBuilder.password(password);
    return dataSourceBuilder.build(); 
    } 
    ```

2.  从属性中添加值，例如

    ```
    @Value("${db.driverclassname}")
    private String dbDriverClassName;

    @Value("${db.url}")
    private String dbUrl;

    @Value("${db.username}")
    private String dbUsername;

    @Value("${db.password}")
    private String dbPassword; 
    ```

    并将这些值传递到数据源之上。

3.  在属性文件中配置您的加密密钥，例如#

    ```
    db.driverclassname=com.mysql.jdbc.Driver
    db.url=jdbc:mysql://localhost:3306/contactsdb
    db.username=contactsuser
    db.password=ENC(XcBjfjDDjxeyFBoaEPhG14wEzc6Ja+Xx
    +hNPrJyQT888= 
    ```

4.  不要使用 cmd 和 jaspyt jar 创建您的加密密钥，我将分享使用您的密钥创建加密密钥的链接：

    [Jasypt 在线加解密](https://www.devglan.com/online-tools/jasypt-online-encryption-decryption)

5.  根据您的版本添加 jaspyat 依赖项。

    如果您必须在服务器上运行并且遇到密码加密不匹配或不可能等问题，请再添加一个 bean 的 jdbc 模板：

    ```
    @Bean
    public JdbcTemplate jdbcTemplate(DataSource 
    dataSourcee)
    {
        return new JdbcTemplate(dataSource);
    } 
    ```

它工作正常，没有发现任何问题。

使用该工具创建密钥。因为我用jaspyt命令行尝试过很多次，但是加密是错误的，不支持。您可以将使用上述工具生成的密钥与密钥进行交叉检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-17T08:50:56.367

我遇到了类似的问题，但我意识到在使用 CLI 工具并尝试解密密码时，您不必包含算法属性，并且密码属性需要与 CLI 工具中使用的匹配。

在他们的[http://www.jasypt.org/encrypting-configuration.html](http://www.jasypt.org/encrypting-configuration.html)

## 他们的例子看起来像这样，但这不起作用。

`encryptor.setPassword("jasypt"); // could be got from web, env variable... encryptor.setAlgorithm("PBEWithHMACSHA512AndAES_256"); encryptor.setIvGenerator(new RandomIvGenerator());`

* * *

## 解决方案：

`encryptor.setPassword("MYPAS_WORD"); // Like in the CLI Tool encryptor.setAlgorithm("PBEWithHMACSHA512AndAES_256"); //Remove this encryptor.setIvGenerator(new RandomIvGenerator()); //Remove this as well`

它会正常工作的。

在您的情况下，您可以删除 algorithm 属性，并且 passwordEvnName 需要与 CLI 工具中使用的相匹配。**

# javascript - 为什么此代码中的 console.log 返回 undefined？

> ID：15544269
> 
> 赞同：1
> 
> 时间：2013-03-21T09:57:44.197
> 
> 标签：javascript, jquery, arrays, for-loop

```
var el = $('.container');
var anchors = new Array('jobs', 'portfolio', 'docs', 'interier', 'price');
for (var i = 0; i < anchors.length; i++) {
    el.on('click', 'a[href$="#'+anchors[i]+'"]', function (e) {
        e.preventDefault();
        console.log(anchors[i]);
        $.scrollTo('a[name="'+anchors[i]+'"]');
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:01:27.173

当您单击该元素时，`i`将增加到 的值`anchors.length`。

您的点击处理程序具有对`i`.

JavaScript 中未解析的属性查找返回`undefined`.

`this`用作元素的引用会容易得多。否则，找到一种`i`按值传递值的方法，而不是直接引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:06:49.737

你得到未定义的原因是因为`i`实际上等于`5`. 看看这个：

```
for ( var i = 0; i < 5; i++ ) {
    console.log( i );
} 
```

现在，在该循环完成后，您会认为`i`此时它是未定义的，因为它应该是`for`循环的本地。不幸的是，这种情况并非如此。一个简单的测试方法：

```
for ( var i = 0; i < 5; i++ ) {
    console.log( i );
}

console.log( i ) // Logs out 5; 
```

简而言之，`i++`for 循环在真值测试部分`i < 5`bit 之后执行。因此，当`i`等于 时`4`，循环运行，然后它增加`i++`，这将值设置`i`为 5，这反过来又使真值测试失败。

因此，既然您知道`i`等于`5`，那么当您在`anchors`数组中进行查找时，`anchors[5]`它是未定义的。

这很重要的原因是因为每次点击事件触发时，它都会执行缓存值`i`5，反过来，您将始终记录 undefined

`i`为了解决这个问题，我们可以为like的值创建一个别名

```
var el = $('.container');
var anchors = new Array('jobs', 'portfolio', 'docs', 'interier', 'price');

for (var i = 0; i < anchors.length; i++) {

    // By passing the value to this self executing function,
    // it creates a new instance of the variable
    ( function ( index ) {
        el.on('click', 'a[href$="#'+anchors[index]+'"]', function (e) {
        e.preventDefault();
            console.log(anchors[index]);
            $.scrollTo('a[name="'+anchors[index]+'"]');
        });
    })( i );

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:07:35.790

变量`i`获得了最后一个循环的值。如果要访问锚点，可以使用：

```
 console.log($(this).attr('href').substr(1)); 
```

# android - android：如何同时为 Viewgroup 及其子视图设置监听器？

> ID：15544277
> 
> 赞同：1
> 
> 时间：2013-03-21T09:58:03.033
> 
> 标签：android, android-listview, android-adapter

我正在为我的列表视图使用自定义适配器。这是代码：

```
 public class ContentAdapter extends ArrayAdapter<Content>{

    private ArrayList<Content> items;

    public ContentAdapter(Context context, int textViewResourceId, ArrayList<Content> objects) {
        super(context, textViewResourceId, objects);
        this.items=objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v=convertView;
        if (v==null){
            LayoutInflater inflater=(LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v=inflater.inflate(R.layout.list_items_layout, null);
        }
        Content content=items.get(position);
        if (content!=null){
            TextView nm=(TextView)v.findViewById(R.id.itemname);
            TextView sm=(TextView)v.findViewById(R.id.itemsubname);
            nm.setTextColor(Color.RED);
            nm.setText(content.getName());
            sm.setTextColor(Color.GRAY);
            sm.setText(content.getSubname());
        }
        return v;
    } 
```

R.layout.list_items_layout：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:descendantFocusability="blocksDescendants">

<TextView android:id="@+id/itemname"
    android:textIsSelectable="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textSize="20sp"/>

<TextView android:id="@+id/itemsubname"
    android:textIsSelectable="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textSize="15sp"/> 
```

当我使用 setOnItemClick(listener) 为我的列表视图创建侦听器时，虽然设置了侦听器，但它只能在我单击视图组的空白部分时识别。如果我单击两个 TextView 中的任何一个，它就无法响应。

有没有办法设置一个可以同时监听视图组及其子视图的 OnItemClickListener？

# c++ - Why typedef to a function is required, while casting void* to function pointer?

> ID：15544279
> 
> 赞同：1
> 
> 时间：2013-03-21T09:58:09.687
> 
> 标签：c++, casting, function-pointers

I was using dlsym() to load a function symbol

```
void (*func)(int);
func = (func*)dlsym(phandle, "function"); 
```

This was resulting in compilation error. However, when I did typedef to function

```
 typedef void (*func)(int);
 func function = null;
 function = (func*)dlsym(phandle, "function"); 
```

This compiled fine, but I fail to understand, why it was failing in first case? Could anyone please tell the reason? I read that C++ standard doesnt allow direct casting from void* to function pointer? Why is this and how did typedef solved this problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:40:17.467

It fails in the first case because `func` is a variable, not a type, and cannot be used in a cast.

Note the `*` is misplaced:

```
typedef void (*func)(int);
           /* ^ must be here. */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:42:54.923

Casting between `void *` and function pointers is prohibited because it's hard to implement on some platforms.

There are computers (see [Harvard architecture](http://en.wikipedia.org/wiki/Harvard_architecture)) where code and data reside in physically different memories. So, just because you have a pointer to some data, that doesn't mean it makes sense to magially convert that to a pointer to code.

That's why casting to/from `void *` and functions is not allowed. Sure, on most modern/typical CPUs (by which I mean machines using a [von Neumann architecture](http://en.wikipedia.org/wiki/Von_Neumann_architecture), *not* Harvard), the cast will work.

# php - mPDF 标头已发送

> ID：15544282
> 
> 赞同：0
> 
> 时间：2013-03-21T09:58:18.573
> 
> 标签：php, pdf, http-headers

我正在使用 mPDF 从 html 创建一个 pdf。现在我收到错误“警告：无法修改标头信息 - 标头已发送”。这是因为我在生成 pdf 之前显示了一些 html（只是站点模板）。我的网站是这样加载的： 1\. 网站标题 2\. 页面显示 3\. pdf下载

所以现在我正在寻找一种用php删除输出缓冲区的方法，这样我就可以创建一个有效的pdf。有谁知道如何做到这一点？我试过了：

```
 echo "<div class='well'><pre>";
    print_r($output);
    echo "</pre></div>";
    /* GENERATE HTML FOR PDF */
    flush();
    ob_flush();
    ob_clean();
    $html = "<img src=\"".basepath."template/img/logoFull.png\" />";
    $pdf    = new mPDF();
    $pdf->WriteHTML($html);
    $pdf->Output('MyPDF.pdf', 'D'); 
```

这不是完整的脚本，但我认为这足以理解我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:09:26.660

您可以将生成 PDF 的代码放在一个单独的文件中，并使用内联框架将其加载到您的 html 页面中。这应该解决所有准备发送警告的标题..

# ruby - 设置 Sinatra 模板选项在本地工作，在 Heroku 上被破坏

> ID：15544286
> 
> 赞同：0
> 
> 时间：2013-03-21T09:58:25.600
> 
> 标签：ruby, heroku, sinatra, erb

我的 Sinatra 网站使用一种公认的 ghetto 方式在两种语言之间切换，这在我的本地机器上运行良好，但在 Heroku 上却不行。

我`app.rb`的如下：

```
require 'sinatra'

get '/'  do
  set :erb, :views => settings.views + "/en"
  erb :index, :layout => false, :views => settings.views
end

get '/tr'  do
  set :erb, :views => settings.views + "/tr"
  redirect to('/home')
end
get '/en'  do
  set :erb, :views => settings.views + "/en"
  redirect to('/home')
end

get '/home'  do
  erb :home
end
get '/products' do
  erb :products
end
... 
```

当我单击指向`/en`和`/tr`url 的链接时，我被正确地重定向到该`/home`链接，但视图文件夹没有改变。

我的 gem 在两种环境中都是相同的版本：

```
rack (1.4.1)
rack-protection (1.2.0)
tilt (1.3.3)
sinatra (1.3.3)
bundler (1.3.2) 
```

[链接到该网站](http://www.reda-turkey.com/)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:54:49.960

我建议用像 i18n gem 这样更强大的东西来取代你公认的贫民窟方式

[这是一个教程](http://www.dafyddcrosby.com/using-i18n-in-sinatra.html)

而不是使用浏览器的语言（例如），您可以在前置过滤器中执行类似的操作

```
before do
  case request.path_info
    when /^\/tr/ then set :locale, "tr"
    else set :locale, "en"
  end
end 
```

在助手中

```
helpers do
  def get_locale
    settings.locale
  end
  # other helpers from example
end 
```

这样，您只需要一份视图模板副本，从而在您只需要更改一个元素时减少更改所有视图的复杂性（例如）

如果你想测试你的 sinatra 应用程序，就像它会在 heroku 上运行一样，你可以`RACK_ENV=production`在启动服务器之前抛出一个。前任。`RACK_ENV=production ruby my_app.rb`

# recaptcha - 我想在 shoppingcart.asp 以及 Volusion 中的 one-page-checkout.asp 页面上添加验证码，有人可以帮我怎么做吗？谢谢

> ID：15544288
> 
> 赞同：0
> 
> 时间：2013-03-21T09:58:35.177
> 
> 标签：recaptcha, volusion

我的客户在 Volusion 上有电子商务商店，他收到了很多假订单，现在我想在用户登录 shoppincart.asp 页面或 one-page-checkout.asp 页面之前添加验证码（在下订单按钮之前）。

我的客户网站是 www.featherstore.com

我已经联系了 Volusion 支持，他们没有关于这个问题的任何具体答案，只是建议接受他们的服务或由他们的合作伙伴完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:00:48.560

您可以为此使用谷歌验证码：

[谷歌验证码](http://www.google.com/recaptcha)

它易于使用...您可以找到代码如何放置它。您只需要为特定域获取一个公钥和私钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-07T23:29:00.450

它在管理面板的设计菜单下，将鼠标悬停在设计上，然后单击文章。

一旦文章将显示模式更改为列表，找到 one-page-checkout.asp 和 shoppingcart.asp 单击编辑并添加您的代码。

参考使用见：

[Volusion 文件编辑器支持](http://support.volusion.com/design/file-editor)

[Volusion 中的一页结帐和高级购物车功能](http://support.volusion.com/article/enhanced-shopping-cart-and-one-page-checkout-feature)

# ios - 如何将图像上传到服务器

> ID：15544294
> 
> 赞同：2
> 
> 时间：2013-03-21T09:58:54.100
> 
> 标签：ios, objective-c, file-upload

我在ios中使用这些代码上传我的图片

与上的另一个代码几乎相同`Internet`

```
NSData *uploadImage = UIImageJPEGRepresentation(self.image, 1) ;
NSString *uploadURL = @"http://...../jeff.php" ;

NSMutableURLRequest *uploadRequest = [[NSMutableURLRequest alloc] init];
[uploadRequest setURL:[NSURL URLWithString:uploadURL]] ;
[uploadRequest setHTTPMethod:@"POST"] ;

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data;boundary=%@",boundary];
[uploadRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition:form-data; name=\"userfile\"; filename=\"test.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
[body appendData:[@"Content-Type: application/octet-streamrnrn\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:uploadImage]];
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[uploadRequest setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:uploadRequest returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"echo：%@",returnString); 
```

我的 PHP 是

```
$uploaddir = './uploads/';
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;

if (is_uploaded_file($_FILES['userfile']['tmp_name']))
{
    echo "yes \r\n";
}
else
{
    echo "NO \r\n";
}

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile))
{
    echo "http://...../uploads/{$file}";
} 
```

但它不工作

我的上传文件夹是 /var/www/uploads

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:08:43.347

[对于发布方法，请阅读我自己的答案。](https://stackoverflow.com/questions/15377212/get-the-password-from-the-webservices-url-and-access-through-that-password/15377242#15377242)

并使用此代码发布图片。

```
NSString  *imgPath = fullPathOfYourImage;
    if([[NSFileManager defaultManager] fileExistsAtPath:imgPath])
    {
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];                                                        
        [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"photo\"; filename=\"YourImageName.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
                                                                                                               ^..YourImageName….^

        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithContentsOfFile:imgPath]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T01:46:03.683

你可以试试这个方法，我已经测试过了，正在运行

PHP的

```
<?php
$image = $_REQUEST['image'];

$imageFileName = "miImage.jpg";

$binary = base64_decode($image);
$file = fopen($imageFileName, 'wb');
fwrite($file, $binary);
fclose($file);
echo "Upload completed with success";
?> 
```

在 YourViewController.h 文件中

```
@interface YourViewController : UIViewController {
    NSURLConnection *serverConnection;
    NSMutableData *returnData;
} 
```

将此方法复制并粘贴到 YourViewController.m 文件中

```
- (NSString*)base64forData:(NSData*) theData {
    const uint8_t* input = (const uint8_t*)[theData bytes];
    NSInteger length = [theData length];

    static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
    uint8_t* output = (uint8_t*)data.mutableBytes;

    NSInteger i;
    for (i=0; i < length; i += 3) {
        NSInteger value = 0;
        NSInteger j;
        for (j = i; j < (i + 3); j++) {
            value <<= 8;

            if (j < length) {
                value |= (0xFF & input[j]);
            }
        }

        NSInteger theIndex = (i / 3) * 4;
        output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
        output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
        output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
        output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
    }

    return [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
} 
```

现在这是发送图像的代码行

```
NSURL *sendURL = [NSURL URLWithString:@"http://yourdomain.com/yourphp.php"];

NSMutableURLRequest *sendRequest = [NSMutableURLRequest requestWithURL:sendURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30];

[sendRequest setHTTPMethod:@"POST"];

[sendRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

NSData *imageData = UIImageJPEGRepresentation(yourImage, 1.0);

NSString *encodedString = [[self base64forData:imageData] stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"];

stringBody = [[NSString alloc] initWithFormat:@"image=%@", encodedString];

[sendRequest setHTTPBody:[stringBody dataUsingEncoding:NSUTF8StringEncoding]];

serverConnection = [[NSURLConnection alloc] initWithRequest:sendRequest delegate:self];

[serverConnection start]; 
```

最后一件事是设置服务器连接的委托方法

```
- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    returnData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [returnData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *responseString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"Response: %@", responseString);

    if ([responseString isEqualToString:@"Upload completed with success"]) {

        /* Do something on success */

    } else {

        /* Do something if not succeeded */

    }
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    /* Do something in fail */
} 
```

# android - 当应用程序的所有活动完成时会发生什么？

> ID：15544310
> 
> 赞同：16
> 
> 时间：2013-03-21T09:59:19.140
> 
> 标签：android, android-activity, process

# 设想：

我的 Android 应用程序中有四个活动，比如说 A、B、C 和 D。`Constants.java`应用程序中有一个类扩展`Application`类以维护全局应用程序状态。Constants 类具有应用程序的所有常量变量。活动流程是这样的`A-->B-->C-->D`。当从活动 A 按下后退按钮时，我正在调用 finish() 方法，该方法将完成活动 A 并关闭应用程序。之后，如果我从所有应用程序中打开该应用程序，则会有一个变量，`Constants.java`其值自上次启动以来仍然存在。当我在执行活动 A（后按）时，没有发生同样的`System.exit(10)`事情`Process.killProcess(Process.myPid())`。

# 问题：

1.  通过调用每个活动的finish（）来完成所有活动是否会关闭应用程序（其进程）？
2.  即使变量的所有活动都已完成（关闭），变量的值如何保持不变？
3.  调用`System.exit(10)`然后`Process.killProcess(Process.myPid())`退出应用程序是否公平？

# 更新：

如何在应用程序退出时清除应用程序常量（HomeActivity 的后按）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T10:05:38.047

1) 不，Android 不保证如此。由操作系统决定是否终止进程。

2) 因为`Activity`实例仍然存在于 Dalvik VM 中。在 Android 中，每个进程都有一个单独的 Dalvik VM。

> 每个进程都有自己的虚拟机 (VM)，因此应用程序的代码与其他应用程序隔离运行。

当你调用`finish()`它并不意味着`Activity`实例被垃圾收集。你告诉安卓你要*关闭*（`Activity`不再显示）。在 Android 决定终止进程（从而终止 DVM）或实例被垃圾收集之前，它仍然存在。

> 当应用程序的任何组件需要执行时，Android 会启动该进程，然后在不再需要该进程或系统必须为其他应用程序恢复内存时关闭该进程。

3）除非您有非常充分的理由，否则我不会这样做。根据经验，您应该让 Android 处理何时终止您的应用程序，除非您的应用程序状态中有一些东西需要在失去焦点时重置应用程序。

[行情来源](http://developer.android.com/guide/components/fundamentals.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T10:07:50.513

> 通过调用每个活动的finish（）来完成所有活动是否会关闭应用程序（其进程）？

不，不应该。这是因为活动不是应用程序的唯一组件。服务，BroadcastReceivers 仍然可以在没有 UI 的情况下运行。通过尽可能保持应用程序进程运行，Android 确保更快地响应用户再次打开应用程序，或者更快地启动服务等，因为不需要重新创建应用程序实例。

只有当您或其他应用程序明确终止它，或者系统终止它以释放资源时，您的进程才会终止。

> 即使变量的所有活动都已完成（关闭），变量的值如何保持不变？

您的变量位于 Application 类中，该类遵循单例模型，因此您的值将持续存在，直到整个应用程序进程被终止。

此外，`finish()`仅调用`onDestroy()`不是解构器，如此[处](https://stackoverflow.com/q/10847526/1069068)所述。因此，即使 Activity 变量在调用完成后可能仍然存在，因为您的实例仍然存在，直到 Android 觉得需要销毁它，或者您的进程被杀死。

> 调用 System.exit(10) 然后调用 Process.killProcess(Process.myPid()) 退出应用程序是否公平？

虽然这会杀死应用程序，但不建议这样做。出于多种原因，请参阅[此问题。](https://stackoverflow.com/q/2033914/1069068)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T08:21:01.793

对于您的更新：

```
How can I clear the application constants on exit of the application(Back press of the HomeActivity)? 
```

在 HomeActivity 中覆盖 onBackPressed 并在调用 super.onBackPressed() 之前清除所有变量。如果您有一个位于 Application 子类中的 String 的设置器：

```
@Override
public void onBackPressed() {
    getApplication().setMyString(null);
    super.onBackPressed();
} 
```

如果您有很多状态要清除，您可以编写一个方法来重置所有字段并调用它：

```
@Override
public void onBackPressed() {
    getApplication().clearAllMyFields();
    super.onBackPressed();
} 
```

当然，这些字段不必标记为`final`或`static final`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:09:21.947

Android 将保留该进程，直到它需要回收进程内存为止。这样，如果用户立即返回到您的应用程序，您的应用程序将显示得更快。

该值将持续存在，直到应用程序被终止。

不应该使用 System.exit(10) 后跟 Process.killProcess(Process.myPid()) 退出应用程序？

你真的应该考虑不退出应用程序。这不是 Android 应用程序通常的工作方式。

# jquery - 使用 .after (jQuery) 在 div 之后移动段落

> ID：15544316
> 
> 赞同：0
> 
> 时间：2013-03-21T09:59:29.247
> 
> 标签：jquery, html, paragraph

我目前正在玩 Codeacademy，我收到了一个任务，告诉我在 div 之后移动一个新段落。这是我所做的：

```
$('#one').after('<p>this is jquery</p>'); 
```

现在我想在另一个名为 #two 的 div 之后移动新段落，但是，我应该使用 .after，所以它告诉我。我将如何在#two id 之后移动新段落。

编辑：对不起，我是这方面的初学者。不知何故，这些东西对我来说在 jsfiddle 中不起作用，我很可能做错了什么。不过我会在下面留下几个截图：

[http://imgur.com/a/WmlkV](http://imgur.com/a/WmlkV)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:03:22.307

由于您尚未将其设置`p`为单独的变量，因此我会这样做：

```
$('#two').after($('#one').next('p')); 
```

[http://jsfiddle.net/PJff8/](http://jsfiddle.net/PJff8/)

我的首选方法是将 设置`p`为变量，然后您可以随意移动，而无需重新选择它：

```
var p = $('<p>this is jquery</p>');
$('#one').after(p);
$('#two').after(p); 
```

[http://jsfiddle.net/PJff8/1/](http://jsfiddle.net/PJff8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:03:59.647

如果我理解正确；您可以将 与[`next()`](http://api.jquery.com/next/)结合使用[`insertAfter()`](http://api.jquery.com/insertAfter/)，如下所示：

```
$('#one').after('<p>this is jquery</p>').next('p').insertAfter('#two'); 
```

## [jsFiddle 演示](http://jsfiddle.net/8M4Ny/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:05:11.993

html

```
<div id="one">one</div>
<div id="two">two</div> 
```

javascript

```
$('#one').after('<p>this is jquery</p>');
$('#two').after($("#one + p")); 
```

[例子](http://jsfiddle.net/axrwkr/QA5hD)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T22:47:37.647

```
$(document).ready(function() {
$('#one').after("<p>Let's see what we can add</p>");
$('p').after($('#two'));
}); 
```

这将起作用，因为它具有完整的元素流。

# c# - 在 Windows Azure 中为用户帐户数据库设置分区和行键

> ID：15544322
> 
> 赞同：0
> 
> 时间：2013-03-21T09:59:46.113
> 
> 标签：c#, azure, azure-table-storage, azure-storage

我现在在一个小问题上有点难过。我想设置一个所有注册用户数据所在的帐户表。此表将包含电子邮件、地址、密码的 SRP 值等内容。

我遇到的小问题是如何设置行键和分区键？我曾考虑将区域放在分区键中，但话又说回来，如果用户更改了区域等，我将如何知道如何查询它，因为据我所知，您需要行和分区键来查询某些内容。

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:40:56.600

对于表存储，您应该始终首先考虑您的查询和更新模式，然后在此基础上设计您的密钥方案。

您是否需要查询除 UserName 之外的任何内容？也许电子邮件？如果是这样，您可能希望将其包含在密钥中。

您是否需要批量更新多个用户？然后他们需要在同一个分区中。

如果您一次只需要对一个用户进行操作，并且您将始终拥有要查询的用户名，那么只需使用 UserName 作为 PartitionKey 并完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:02:16.300

如果您的用户名是固定的并且永远无法更改。那么解决这个问题的一个简单方法（我解决它的方法）是将用户名的前两个或三个字符作为分区键。所以这样你的数据可以被分区。搜索一些东西也很容易。比较 PartitionKey 和 RowKey。如果用户输入用户名错误。您可以立即告诉他们出了什么问题。

# java - mp3 切割器 android

> ID：15544323
> 
> 赞同：0
> 
> 时间：2013-03-21T09:59:46.367
> 
> 标签：java, android

以下代码对我来说工作正常。由于我正在使用 android，我不能使用 audiostream 类。

```
 File correct = new File("data1.mp3");
           File file =new File("data.mp3");
               correct.createNewFile();
           FileInputStream in = new FileInputStream(file);
           FileOutputStream out = new FileOutputStream(correct);

           byte[] buffer = new byte[in.available()];

           for(int i=0;i<1000;i++){

               in.read(buffer, 0, 2048);

               out.write(buffer, 0, 2048);

           }

           in.close();
           out.close(); 
```

现在，如果我运行以下代码，它会给出错误并且不起作用

```
 correct.createNewFile();
           FileInputStream in = new FileInputStream(file);
           FileOutputStream out = new FileOutputStream(correct);

           byte[] buffer = new byte[in.available()];

           in.skip(2048);
           for(int i=0;i<1000;i++){

               in.read(buffer, 0, 2048);

               out.write(buffer, 0, 2048);

           }

           in.close();
           out.close(); 
```

同样的事情，当我运行这段代码时，它给出了错误

```
 correct.createNewFile();
           FileInputStream in = new FileInputStream(file);
           FileOutputStream out = new FileOutputStream(correct);

           byte[] buffer = new byte[in.available()];

           for(int i=0;i<1000;i++){

               in.read(buffer, 0, 2048);
               in.skip(2048);
               out.write(buffer, 0, 2048);

           }

           in.close();
           out.close(); 
```

所以我的实际问题是如何指定正确的偏移量并将帧复制到新的 mp3 文件中？如何获得框架的大小？是否有必要复制一些起始的重要帧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:11:24.917

如果要在 android 中提取音频的帧，则必须实现剪辑器。看看[这个](https://code.google.com/p/ringdroid/source/browse/trunk/?r=66#trunk/src/com/ringdroid)

# wordpress - 向 WordPress 页面添加动态内容

> ID：15544327
> 
> 赞同：1
> 
> 时间：2013-03-21T10:00:00.387
> 
> 标签：wordpress

我想知道执行以下操作的最优雅/最佳实践方式：

假设我有一些 PHP 会返回一个字符串（例如今天的天气）。我希望能够在 WordPress 页面中包含字符串，但不是通过使用插件来允许在页面中使用 PHP。

例如：

```
This is content of the page that is editable via WordPress pages. 
Today's weather is THE_WEATHER. This bit is also editable, but as 
an editor I can't edit the PHP that just told us what the weather 
is, the developer does that. 
```

执行此操作的最佳实践方法是什么（最好不使用插件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:34:50.473

顺便说一句，听起来您想定义一个短代码，让您调用您正在谈论的 PHP 函数并将其结果插入页面/帖子。这几乎意味着您正在编写一个（非常简单的）插件，或者您正在将短代码定义合并到`functions.php`与主题关联的文件中（可以是您正在使用的主题的简单子主题）。

做什么可能取决于您是否可能更改主题（如果它只是一个站点），或者您是否需要在具有不同主题的不同站点上执行相同的操作。如果是这种情况，那么您应该将其编写为插件；否则你可以让它成为你主题的一部分。

查阅 Codex 以了解如何定义短代码。

# iphone - 防止某些页面元素在 iOS 上不可缩放

> ID：15544332
> 
> 赞同：4
> 
> 时间：2013-03-21T10:00:19.503
> 
> 标签：iphone, html, ios, ipad, pinchzoom

我有一个带有固定标题的基本 HTML 页面。当我在 iPad 或 iPhone 上捏放大页面时，页眉会从页面边缘流出，我无法拖动页面来查看全部内容。

我可以防止整个页面可缩放，但我希望这个固定的标题不缩放，页面的其余部分正常缩放。

有没有办法做到这一点？

编辑：

这是我的 CSS/HTML

```
body {
    margin:0;
    padding:0;
}

.nozoom {
    width:100%;
    position:fixed;
    top:0px;
    margin:0 auto;
}

.nozoom > div {
    width:1008px;
    margin:0 auto;
    background-color:#444;
    height:100px;
}

.yeszoom {
    width:1008px;
    margin:100px auto 0;
    background-color:#096;
} 
```

和...

```
<div class="nozoom"><div>This must not zoom and if you look carefully you'll see that you can never see the content of this which is completely over to the left - one two three four five six seven eight nine ten eleven twelve thirteen... dfgkjhdfsklhj dsfkjghl sdflghsdfklg sdfklg dsfkgh skdlfgh ksdlf ghskdlfgh jklsdfhg jklsdfg hsdfghj sdflkg hlsdf sdfg kljsdf jksdf sdfkjg sdfg ksdjfl gjkldsfg klsdfhgljksdf gsd kjlsdfh glskjdfhg jsdf hsdflk gsdf</div></div>
<div class="yeszoom">
<p>sdfgdsfgdsfgdfsga gsdf gsdf </p>
<p>fhgdfgh dffhgdfghdfgh dfg......</p>
<!-- Loads more content here-->
</div> 
```

# date - Smarty 日期变量。添加日期，更改格式

> ID：15544335
> 
> 赞同：2
> 
> 时间：2013-03-21T10:00:39.607
> 
> 标签：date, format, smarty, days

我对 smarty 中的日期格式有疑问。

我有一个聪明的变量： [{ $order->oxorder__oxorderdate->value }]

这个变量给我：2013-03-10 10:45:17

现在我想添加 14 天，删除时间并更改日期格式：

所以我现在的愿望是得到这个：24.03.2013

这可能吗？我怎样才能直接在 smarty/.tpl 文件中执行此操作？

感谢您的帮助和问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:17:51.327

在 Smarty **3中测试**

`{"$order->oxorder__oxorderdate->value +14 Days"|date_format:'d.m.Y'}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T21:46:25.187

我认为找到了一种食物方法来做到这一点：

```
{assign var="date" value= $order->oxorder__oxorderdate->value|@strtotime + (60*60*24*7)}
{assign var="date2" value=$date|date_format:"%d/%m/%Y"}
{$date2} 
```

在您想要的那一天更改 7 个值 ;-)

# nosuchmethoderror - Java.lang.NoSuchMethodError: com.Person.setCompanyList(Ljava/util/ArrayList;)V

> ID：15544336
> 
> 赞同：3
> 
> 时间：2013-03-21T10:00:39.527
> 
> 标签：nosuchmethoderror

谁能帮助我为什么 NOSuchMethodError 在运行时出现在 java 中。我的错误是 .Java.lang.NoSuchMethodError: com.Person.setCompanyList(Ljava/util/ArrayList;)V

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T10:03:42.673

这通常意味着您编译的库或类的版本与现在正在运行的版本不同。

当你编译的时候，方法是存在的（否则会出现编译错误），但现在不存在（可能是因为 jar 文件太旧）。

尝试对整个项目进行干净的构建和部署。

另一种常见的情况是反射，当您在运行时构造方法名称时（对于不存在的方法）。

# objective-c - 使用关系理解 CoreData

> ID：15544341
> 
> 赞同：0
> 
> 时间：2013-03-21T10:00:50.980
> 
> 标签：objective-c, sqlite, core-data, entity-relationship

我对使用**CoreData**和**relationship**有误解。

我从我的 sql 时代（很久以前......）记得我必须向每个表添加和***ID***，这将是在表之间建立关系的条目。

`CoreData`下面是我的表在我的（实体）中的外观概览。

`Epro_Sheet`是我的**主表**，其他的必须与那个有关。

我想做的是：

*   `EPro_CompanyViewController`用户在具有自己的实体的 UIViewController () 上填写字段`EPro_Company`
*   然后，当他按下下一步时——创建`EPro_Sheet`、增加 idSheet 并填充其他条目——此外，这些条目还`EPro_Company`填充了 EPro_CompanyViewController 的字段文本。
*   然后用户将填写 的字段`EPro_DaFroidViewController`，然后当他按下下一步时，它会填充实体 EPro_DaFroid 获取当前 EPro_Sheet 的当前 Id 并将其设置为 EPro_DaFroid ...
*   ETC....
*   将有一个 UIViewController ( History ) 允许用户检索特定日期的所有信息以对其进行编辑或显示。

你能帮我看看怎么做吗？关系或根本没有关系...如果存在关系，我如何使用 NSPredicateFormat 检索信息，例如：从日期@“...”检索我所有信息；

非常感谢您的帮助！

![在此处输入图像描述](../Images/1ee0d1f92359a7902e3824c1ca578eee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:09:02.577

首先，您必须了解 core-data 不是关系数据库，并且不存在主键等概念。它留给你实施。可以在此处找到更多详细信息：

[核心数据与 RDBMS](http://robnapier.net/blog/core-data-rdbms-11)

和这里

[核心数据和数据库之间的区别](http://www.cocoawithlove.com/2010/02/differences-between-core-data-and.html)

如果您想在核心数据中实现关系，则必须在核心数据模型中创建关系。想象一下你有这样的关系：

学生 <->> 部分

即一个学生属于一个部门，一个部门可以有很多学生。然后在您的核心数据模型中，您可以定义`oneSection`从 Student 到 Section 的一对一关系（比如`manyStudents`）和从 Section 到 Student 的另一个关系（比如 ），这是一对多的。然后你将关系设置为彼此的逆关系。

尽管我们将其声明为关系，但它几乎充当托管对象的属性。

因此，如果您有一个名为`studObj1`and `studObj2`( `Student`Entity) 的托管对象，那么您可以将这样的关系设置为节对象 ( `sectionObj`)：

（假设您将创建一个托管对象子类）

```
Student *studObj1= <create object>
Student *studObj2= <create object>

Section *sectionObj = <create object>

//set one-to-one relationship
studObj1.oneSection = sectionObj;
studObj2.oneSection = sectionObj;

//set one-to-many relationship;

NSSet *studSet = [NSSet setWithObjects:studObj1,studObj2,nil];
sectionObj.manyStudents = studSet; 
```

关于谓词，您可以直接使用关系的属性：即。如果您想根据部分获取学生，您可以创建如下谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"oneSection.name like 'MainSection'"]; 
```

# url-rewriting - Nginx URL 重写更改 URL

> ID：15544342
> 
> 赞同：1
> 
> 时间：2013-03-21T10:00:51.190
> 
> 标签：url-rewriting, nginx

我需要在 nginx 中重定向一个 URL。我的规则看起来像这样，它实际上导致浏览器明显更改 URL，这不是预期的。

```
 location / {
      rewrite ^/dentists/bangalore/indiranagar/$ http://abc.com/doctorsInArea.htm?cID=bangalore&aID=indiranagar break;
    } 
```

我在这里读了另一个问题[nginx rewrite WITHOUT change url](https://stackoverflow.com/questions/15322826/nginx-rewrite-without-change-url)告诉我删除 http 部分。我试过

```
 location / {
      rewrite ^/dentists/bangalore/indiranagar/$ /doctorsInArea.htm?cID=bangalore&aID=indiranagar break;
    } 
```

即使从浏览器点击[http://abc.com/doctorsInArea.htm?cID=bangalore&aID=indiranagar工作正常，这个也会引发 404。](http://abc.com/doctorsInArea.htm?cID=bangalore&aID=indiranagar)对这个问题的任何见解都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:30:18.633

我通过使用以下方法使其工作。

```
location / {
      rewrite "/dentists/bangalore/indiranagar/" /doctorsInArea.htm?cID=bangalore&aID=indiranagar last;
    } 
```

谢谢！

# android - 在 Android 配置更改应用程序正在重新启动

> ID：15544346
> 
> 赞同：0
> 
> 时间：2013-03-21T10:01:16.237
> 
> 标签：android

我是android开发的新手。我正在编写一个应用程序，我的要求是当方向改变时应用程序不会重新启动。下面是我在三星 Galaxy Duos 手机中测试的示例应用程序。

我正在使用 4.0.4 Android OS 版本，我的应用程序是在 API 级别 8 下开发的。

我尝试了以下方法：

```
android:configChanges="orientation|keyboard|keyboardHidden"
android:configChanges="orientation|keyboard"
android:configChanges="orientation"
android:configChanges="keyboard|keyboardHidden"
android:configChanges="orientation|keyboardHidden" 
```

请帮我

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Toast.makeText(getApplicationContext(), "this is starting",Toast.LENGTH_LONG).show(); 
    }   
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
        //setContentView(R.layout.activity_main);
    }
     if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
        //setContentView(R.layout.activity_main );
    } 
    }

} 
```

## 和我的主要文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.orientationtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" 
            android:configChanges="orientation|keyboard|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:07:19.497

试试这个：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
    <activity
        android:name=".YourMainActivity"
        android:label="@string/title_activity_main"
        android:configChanges="keyboardHidden|orientation|screenSize"
        >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 ....
 </application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:03:01.460

```
android:configChanges="orientation|keyboard|keyboardHidden|screenSize" 
```

因为`Android 3.0+`如果您希望系统管理您的方向更改，您还应该添加`screenSize`.

您应该在清单中设置为`targetSdkVersion`version `>= 3.0`。例如

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:03:30.490

利用

```
android:configChanges="orientation|keyboardHidden" 
```

在您的清单文件中

这个对我有用

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.stack.MainActivity" android:configChanges="orientation|keyboardHidden"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:09:14.343

添加

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

在清单的活动声明中。

# json - 无法从 Sencha Touch 应用程序中的嵌套 JSON 对象中获取记录

> ID：15544354
> 
> 赞同：1
> 
> 时间：2013-03-21T10:01:38.670
> 
> 标签：json, sencha-touch, sencha-touch-2

我遇到了从**Sencha Touch**中的**JSON**获取 Web 服务响应的问题。

 **我正在收到来自服务器的响应。

```
{
   "type": "FeatureCollection",
   "features": [
   {
       "type": "Feature",
       "id": "business_poi_en.1",
       "geometry": {
          "type": "Point",
          "coordinates": [
               28.21962354993591,
               36.452844361147314
          ]
    },
    "geometry_name": "geom",
    "properties": {
       "status": "M",
       "score": 100,
       "side": "R",
       "ref_id": 0,
       "id": null,
       "business_p": "AQUARIOUM",
    }
},
{
   "type": "Feature",
   "id": "business_poi_en.2",
   "geometry": {
      "type": "Point",
      "coordinates": [
         28.225417523605692,
         36.436470953176716
      ]
    },
    "geometry_name": "geom",
    "properties": {
       "status": "M",
       "score": 68.44,
       "match_type": "A",
       "side": "L",
       "ref_id": 0,
       "id": null,
       "business_p": "ZIGOS",
    }
},

.... So On .... 
```

我想从**几何**标签中获取**坐标数据，所以我可以通过这些坐标在地图上显示它。**我还想从**属性标签中获取****business_p**的数据，以在地图上显示标题。

 ******但是，我无法从同一个响应中同时获得坐标和 business_p 的两个值。

同时获得价值的任何想法？
任何建议将不胜感激。
请帮助解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:32:01.180

您的商店代理的读者应该有正确的`rootProperty`哪个是两者的共同父级`coordinates`和`business_p`。为此，您的响应应包含在这样的顶级标签中

```
{
  "featureResponse": [
    {
        "type": "FeatureCollection",
        "features": []
    },
    {
        "type": "Feature",
        "features": []
    },
  ]
} 
```

然后你可以像这样定义阅读器：

```
reader: {
            type: 'json',
            rootProperty: 'featureResponse'
        } 
```

一旦你从这个商店获得记录，你可以去`data`or `raw`children 对象来获取所需的数据。********

# c# - 如何在不使用第三方 dll 的情况下从 c# 中的 excel 中读取值？

> ID：15544357
> 
> 赞同：-5
> 
> 时间：2013-03-21T10:01:43.130
> 
> 标签：c#

我有一个在**C**中名为**strings.xls的 excel 文件：**

 **![在此处输入图像描述](../Images/d9bd170e2dda32200772cd9b06d05998.png)

```
Excel.Application excelApp = new Excel.Application();
        string workbookPath = "c:/strings.xls"; 

        Excel.Workbook excelWorkbook = null;

        try
        {
            excelWorkbook = excelApp.Workbooks.Open(workbookPath, 0,
                false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true,
                false, 0, true, false, false);
        }
        catch
        {
            excelWorkbook = excelApp.Workbooks.Add();
        }
        Excel.Sheets excelSheets = excelWorkbook.Worksheets;
        string currentSheet = "Sheet1";
        Excel.Worksheet excelWorksheet = (Excel.Worksheet)excelSheets.get_Item(currentSheet);
        Excel.Range excelCell = (Excel.Range)excelWorksheet.get_Range("A1", "A1");
        excelCell.Value2 = "Hi There"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:03:34.047

您可以使用 [Jet OLE DB Provider](http://support.microsoft.com/kb/316934) r With Microsoft Excel Workbooks 从 excel 中读取值。[这是一篇很好的 codeproject 文章，其中包含oledb 和 excel](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)的示例代码。

您也可以使用 Microsoft.Office.Interop.Excel 来完成，这篇[codeproject 文章](http://www.codeproject.com/Articles/5123/Opening-and-Navigating-Excel-with-C)将是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:04:27.873

你不能。

由于这是 XLS 文件（二进制格式），最简单的解决方案是使用 Excel (Microsoft Jet) OLE DB 驱动程序来检索该值。[例子](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)

如果您可以更改流程以提供 XLSX 文件，那么您可以在纯 .NET 中打开并解析 XML 文件中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:04:47.007

[您可以使用OLE DB](http://www.carlprothman.net/Default.aspx?tabid=87#OLEDBProviderForMicrosoftJetExcel)提供程序连接到 Excel 文件。

看看这个[例子](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)。**

# java - 在java中添加问题

> ID：15544359
> 
> 赞同：0
> 
> 时间：2013-03-21T10:01:48.857
> 
> 标签：java, addition

我想将两个变量的输入作为整数，而不是对这两个变量进行加法运算。ans 将存储在另一个变量中。该程序将在每次加法结束后重复，并要求用户输入变量并再次进行加法。

我的 qus 是 taht 我怎样才能再次添加所有的附加信息：

例：

```
Input a= 5
Input b=5
ans=10 
```

Agin 程序会要求

```
Input a= 6
Input b= 6
ans=12 
```

现在我怎样才能用程序获取所有“ans”值并添加所有“ans”

```
Final Ans=10+12=22 
```

代码：

```
import java.io.*;

import java.util.Scanner;

public class math{

        public void add()
        {
            Scanner keyboard = new Scanner(System.in);

            int a;
            int b;

            System.out.print("\nEnter a : ");
            a = keyboard.nextInt();

            System.out.print("Enter b : ");
            b = keyboard.nextInt();

            int c=a+b;

            System.out.println("\nans is  :"+c);

            math ob_m=new math();
            ob_m.add();
        }

        public static void main(String args[])
        {
            math ob_main=new math();
            ob_main.add();
        }
    } 
```

代码只是一个接一个地做加法，但我希望它会再做一个任务......

这一切都增加了所有的附加因素。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:10:29.193

```
 import java.io.*;

import java.util.Scanner;

public class Test {

    int a;
    int b;
    int sum = 0;

    public void add() {
        Scanner keyboard = new Scanner(System.in);

        System.out.print("\nEnter a : ");
        a = keyboard.nextInt();

        System.out.print("Enter b : ");
        b = keyboard.nextInt();

        sum = sum + (a + b);

        System.out.println("\nans is  :" + (a + b));

    }

    public static void main(String args[]) {
        Test ob_main = new Test();
        while (true) {
            ob_main.add();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:12:23.460

改变

```
public void add() {
    Scanner keyboard = new Scanner(System.in);

    int a;
    int b;
    int total = 0;

    for(int i = 0; i < 2; i++) {
        System.out.print("\nEnter a : ");
        a = keyboard.nextInt();

        System.out.print("Enter b : ");
        b = keyboard.nextInt();

       int c = a+b;
       total += c;
    }
    System.out.println("\nans is  :"+total);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:13:36.533

有一个`total`你不断添加的变量`c`。

我还将您不需要的递归更改为 while 循环。

```
public class math
{
    public static void main(String args[])
    {
        int total = 0;
        Scanner keyboard = new Scanner(System.in);

        while (true)
        {
            System.out.print("\nEnter a (-999 to quit): ");
            int a = keyboard.nextInt();

            // terminating condition, modify appropriately
            if (a == -999)
                break; // break out of the while-loop

            System.out.print("Enter b: ");
            int b = keyboard.nextInt();

            int c = a + b;
            total += c;

            System.out.println("\nans is: " + c);
        }
        System.out.println("total is: " + total);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:39:16.967

```
package farzi;

import java.util.ArrayList;
import java.util.Scanner;

public class dummy {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        ArrayList<Integer> list1 = new ArrayList<Integer>();
        ArrayList<Integer> list2 = new ArrayList<Integer>();
        ArrayList<Integer> sum = new ArrayList<Integer>();
        String choice = "";
        do{
            System.out.println("enter the first number");
            int a = keyboard.nextInt();
            System.out.println("enter the second number");
            int b = keyboard.nextInt();
            int tempSum = a+b;
            list1.add(a);
            list2.add(b);
            sum.add(tempSum);
            System.out.println("Do you want to continue : type yes or no");
            choice = keyboard.next();
        }while(choice.toLowerCase().charAt(0)=='y');
        System.out.println("here are the inputs with theri sum");
        System.out.println("num1\t num2\t sum");
        for(int i=0;i<list1.size();i++)
        {
            System.out.println(list1.get(i)+"\t"+list2.get(i)+"\t"+sum.get(i));
        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:04:01.090

只需继续将中间总和添加到另一个变量，因此最后您会得到最终总数。

另一种选择（尽管当有简单的解决方案时不是优选的）是将这些总和放在一个列表中，最后遍历列表并计算最终总数。

另外，不要使用 ob_m.add(); - 只需调用 add();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T10:05:01.697

将每个答案存储在一个附加变量中。然后当你完成后，总结所有答案变量

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-21T10:05:31.710

您可以使用循环来重复您的操作，并将每个加法存储在总和中吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T10:05:50.073

有一个字段 GrandSUM，

```
GrandSum = 0; 
```

每次添加后，添加ans。

```
GrandSum += ans; 
```

最后，GrandSum 会有你想要的结果。

编辑：

```
import java.io.*;

import java.util.Scanner;

public class math{
    int GrandSum = 0;//added
        public void add()
        {
            Scanner keyboard = new Scanner(System.in);

            int a;
            int b;

            System.out.print("\nEnter a : ");
            a = keyboard.nextInt();

            System.out.print("Enter b : ");
            b = keyboard.nextInt();

            int c=a+b;
            GrandSum += c;//added

            System.out.println("\nans is  :"+c);                
        }

        public static void main(String args[])
        {
            math ob_main=new math();
            ob_main.add();
            //.....repeat as many times you want
            ob_main.add();
            System.out.println("grandsum: " + ob_main.GrandSum);
        }
    } 
```

# wpf - DataTemplateSelector 及其奇怪的行为

> ID：15544366
> 
> 赞同：1
> 
> 时间：2013-03-21T10:02:03.820
> 
> 标签：wpf, xaml, wpf-controls, datatemplate

我正在使用`DataTemplateSelector`内部 a `ContentControl`。`DataTemplates`基于 3 个不同，我有 3个不同`object types`。当我将`content`我`ContentControl`的数据设置为上述类型的数据时，`DataTemplateSelector`交换到特定`DataTemplate`的和选择器似乎会回滚/重置旧模板中的值。为什么呢？

**编辑：**我发现这些值被重置了，因为我有一个名为 Prop 的附加属性，并且在它的 OnPropertyChangedCallback 内部它通知我在 DataTemplates 之间交换时 Prop 的值为 null。您可以在下面的代码中看到该附加属性。

有人可以帮我弄清楚这种交换机制背后发生了什么`DataTemplateSelector`吗？

下面是更深入的代码解释：

```
public void Window1()
{
  InitalizeComponents();
}

public void OnClick(object sender, RoutedEventArgs e)
{
  if(this.DataContext == null)
    this.DataContext = "Hallo";
 else{
  if(this.DataContext is string)
    this.DataContext = 123;
  else{
   if(this.DataContext is int)
     this.DataContext = null;
   }
  }
}
By clicking on Button few times I change the type and so in ContentControl the selector changes to DataTemplate. 
```

选择器如下所示。`textDataTemplate`它在一个和`numericDataTemplate`另一个模板之间交换。正如我提到的，我有这三种类型`string`，我不想提及。他们被称为，还有一个。:)`int``and one more``DataTemplates``textDataTemplate``numericDataTemplate`

```
<local:MyTemplateSelector x:Key="dataTemplateSelector"
                                 TextTemplate="{StaticResource textDataTemplate}"
                                 NumericTemplate="{StaticResource numericDataTemplate}"/>

public class MyTemplateSelector : DataTemplateSelector
{
  public DataTemplate TextTemplate;

  public DataTemplate NumericTemplate;

  public DataTemplate Select(object item, Culture.....)
  {
    if(item is string)
    {
      return this.TextTemplate;
    }
    else
    {
      return this.NumericTemplate;
    }
  }
} 
```

`ContentControl`XAML 看起来像这样：

```
<Button Click="OnClick" Content="Click Me"/>

<ContentControl Name="contentCtrl"
                Content="{Binding}"
                Width="123"
                ContentTemplateSelector="{StaticResource dataTemplateSelector}" /> 
```

这就是`textDataTemplate`看起来的样子。

```
<DataTemplate x:Key="textDataTemplate">
    <TextBox  x:Name="text" my:AttProperties.Prop="{extension:MarkupExt value}" Text="{Binding Path=Txt, Mode=Default, UpdateSourceTrigger=Explicit}"/>
</DataTemplate> 
```

`numericDataTemplate`看起来类似于`textDataTemplate`只允许数字。

这是`Prop`我`attached property`的`AttProperties class`。位于所有三个 DataTemplate 内部的某个地方`type string`。`Prop`上面`Prop`是坐在a上，`TextBox`但也可能是a `Label`。这`markupextension`只是一个**“回你好”**。该扩展只是为了测试如何创建自定义标记扩展。扩展没什么大不了的。它不应该与交换`DataTemplates`.

再来一次解释我的问题。交换似乎转售/回滚我的旧模板。我从 textDataTemplate 切换到 numericDataTemplate 并且 textDataTemplate 的 Prop 设置为 null 但之前的值是“Hello”。

为什么会这样？似乎与 using 的行为相同`tiggers`。一旦 a`Trigger`不再有效，它就会回滚使用的值。是否`DataTemplateSelector`使用某种与 相同的机制`Triggers`？

**编辑**：附加属性只是一个简单的 .RegisterAttached 与 OnPropertyChangedCallback。在 OnPropertyChangedCallback 中，我认为交换 dataTemplates 时道具为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T19:32:17.107

如果你在数字模板中使用双向绑定并且它只接受像 Double 这样的东西，它可以将值设置为数字。但是没有看到完整的代码，没有人可以确定。您自己的代码可能会出错。为了更好地理解事情，创建您自己的控件，从 ContentControl 派生，并在您的示例中使用它。然后覆盖控制方法 OnContentxxxChanged，在此处插入断点并调试您的应用程序。您应该了解您的数据和模板选择器发生了什么。当应用程序在断点处停止时，仔细检查所有值并查看堆栈跟踪。要调试绑定，您可以插入 IValueConverters，它会为您提供代码位置，您可以在其中检查值。

我真的建议您先做最简单的工作，然后再做更复杂的事情，例如具有双向绑定到您的问题中未显示的某些控件的某些属性的文本框。这是带有 TextBlocks 的工作版本：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    public void OnClick(object sender, RoutedEventArgs e)
    {
        if (this.DataContext == null)
            this.DataContext = "Hallo";

        else if (this.DataContext is string)
            this.DataContext = 123;

        else if (this.DataContext is int)
            this.DataContext = null;
    }
}
public class MyTemplateSelector : DataTemplateSelector
{
    public DataTemplate TextTemplate {get; set;}

    public DataTemplate NumericTemplate {get; set;}

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        if (item is string)
        {
            return this.TextTemplate;
        }
        else
        {
            return this.NumericTemplate;
        }
    }
} 
```

和 xml：

```
 <Grid>
    <Grid.Resources>
        <DataTemplate x:Key="numericDataTemplate">
            <TextBlock Foreground="Red" Text="{Binding}" />
        </DataTemplate>
        <DataTemplate x:Key="textDataTemplate">
            <TextBlock Foreground="Green" Text="{Binding}"/>
        </DataTemplate>
        <local:MyTemplateSelector x:Key="dataTemplateSelector"
                             TextTemplate="{StaticResource textDataTemplate}"
                             NumericTemplate="{StaticResource numericDataTemplate}"/>
    </Grid.Resources>
    <StackPanel>
        <Button Click="OnClick" Content="Click Me" VerticalAlignment="Top"/>
        <ContentControl Name="contentCtrl"
                Content="{Binding}" 
                Width="300" Height="100" 
                ContentTemplateSelector="{StaticResource dataTemplateSelector}" />
        </StackPanel>
</Grid> 
```

与您的代码进行比较。当您从 DataTemplateSelector 继承时，您应该重写 SelectTemplate 方法并且不要使用其他名称发明方法。ContentControl 等所有控件都将只使用 SelectTemplate。ETC..

显然，一切正常，DataTemplateSelector 没有任何问题。我想，您的问题出在您的数据和绑定中

并查看您的 OnClick 方法 - 它始终将 DataContext 设置为 null

# java - 通过循环添加 JButton 会导致 ArrayIndexOutOfBoundsException

> ID：15544368
> 
> 赞同：0
> 
> 时间：2013-03-21T10:02:05.570
> 
> 标签：java, swing

我有一个摇摆应用程序，我在该类的构造函数中声明了一个 JButton 数组，我创建了一个 for 循环，以便将 114 个 JButton 添加到类容器中。

但是当该类运行时，它会给出异常

```
java.lang.ArrayIndexOutOfBoundsException: 0 
```

关于将按钮添加到容器的声明。

有人可以看到问题吗？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Main extends JFrame implements ActionListener
{
   public Main()
   {
      Container pane = getContentPane();
      JPanel panel = new JPanel();
      JButton b[];
      int i;

      for (i = 0; i < 114; i++)
      {
         b = new JButton[i];
         panel.add(b[i]);
      }
      pane.add(panel);
   }

   public void actionPerformed(ActionEvent ae)
   {
   }

   public static void main(String[] args)
   {
      Main m = new Main();
      m.setSize(500, 500);
      m.setVisible(true);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:21:15.470

你不能这样表达

```
for(i=0; i<114;i++)
{
 b  = new JButton[i];
 panel.add(b[i]);
} 
```

在第一次执行时它是新的 JButton[0]，所以你的数组大小是 0。

您应该使用 Collection (fe. ArrayList) 或固定大小的 JButton 数组。

```
JButton[] b  = new JButton[114];
for(i=0; i<114;i++)
{
 b[i]  = new JButton();
 panel.add(b[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:22:22.770

在 i = 0 时，`b = new JButton[i];`创建一个大小为 0 的数组，因此尝试引用`b[0]`（即第一个元素）将超出范围。

而且你永远不会构造`b[i]`.

您可能希望将数组构造移到循环之外，例如：

```
b = new JButton[114];
for (i = 0; i < 114; i++)
{
   b[i] = new JButton();
   panel.add(b[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:33:03.183

因为 b 是一种数组类型，其中包含 JButton 对象的集合。因此您需要为该数组的每个位置创建一个 JButton 对象。Dukeling 给出的代码是正确的方法。还有一件事你忘记了，你需要定义你的数组的大小，比如`JButton b[]=new JButton[size];`

# iphone - 如何更改 iphone 视图背景？

> ID：15544370
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:02:12.850
> 
> 标签：iphone, ios5

我用过这段代码。但是，视图背景没有改变。

```
UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"background.png"]];
[[self view] setBackgroundColor:background];
[background release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:04:16.433

尝试 ：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]]; 
```

它将节省您的内存来创建背景变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:09:52.457

我想你没有图像。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"settings_Icon_1X.png"]];
    [[self view] setBackgroundColor:background];
    [background release];
} 
```

请将图像添加到项目文件夹中

# c# - 使用 C# 在 Excel 中查找和替换值

> ID：15544371
> 
> 赞同：0
> 
> 时间：2013-03-21T10:02:16.050
> 
> 标签：c#, excel, replace

如何从单元格中找到一些值并在 Excel 中替换为新值？

我试过了，但它不起作用：

```
Microsoft.Office.Interop.Excel.Application xlapp = new Microsoft.Office.Interop.Excel.Application();
Microsoft.Office.Interop.Excel.Workbook wb =default(Microsoft.Office.Interop.Excel.Workbook);

wb = xlapp.Workbooks.Open(FileName.ToString());

wb.Worksheets[0].Cells.Replace("find","replace"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T21:59:34.690

我建议您使用[NPOI](https://npoi.codeplex.com/)，它可以通过 codeplex 或直接通过 Visual Studio 中的 Nuget 访问。它使您能够在 .NET 中轻松上传、编辑和创建电子表格

上传电子表格的示例：

```
HSSFWorkbook hssfworkbook;

void InitializeWorkbook(string path)
{
    //read the template via FileStream, it is suggested to use FileAccess.Read to prevent file lock.
    //book1.xls is an Excel-2007-generated file, so some new unknown BIFF records are added. 
    using (FileStream file = new FileStream(path, FileMode.Open, FileAccess.Read))
    {
        hssfworkbook = new HSSFWorkbook(file);
    }
} 
```

然后，您可以在导出之前使用电子表格的 IRow 和 ICell 集合来定位和编辑您需要的数据。

更多示例可以在[这里找到](https://npoi.codeplex.com/SourceControl/latest#NPOI.Examples/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-03T08:44:03.693

如果有兴趣，您可以为此使用[GemBox.Spreadsheet](https://www.gemboxsoftware.com/spreadsheet/examples/c-sharp-vb-net-excel-library/601)，如下所示：

```
SpreadsheetInfo.SetLicense("FREE-LIMITED-KEY");

// Load your XLS, XLSX, ODS or CSV file.
ExcelFile wb = ExcelFile.Load(FileName.ToString());
ExcelWorksheet ws = wb.Worksheets[0];

// Replace all "find" occurances with "replace" text.
int row, column;
while(ws.Cells.FindText("find", out row, out column))
    ws.Cells[row, column].ReplaceText("find", "replace");

// Save your XLS, XLSX, ODS or CSV file.
wb.Save(FileName.ToString()); 
```

您还可以[在此处的 Excel 示例中找到另一个搜索](https://www.gemboxsoftware.com/spreadsheet/examples/excel-search/109)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T19:58:49.757

你所要做的就是更换

```
wb.Worksheets[0].Cells.Replace("find","replace"); 
```

和

```
wb.Worksheets[1].Cells.Replace("find","replace"); 
```

# symfony - Symfony2 嵌入式表单和左连接实体

> ID：15544374
> 
> 赞同：0
> 
> 时间：2013-03-21T10:02:18.777
> 
> 标签：symfony, doctrine

我得到了两个使用左连接学说可以正常工作的实体。当我尝试使用表单进行编辑并且描述为空（未找到行）时，会出现问题。如何确保 Description.productid 填充有 Product.productid ？

```
object(Test\AdminBundle\Entity\Product)#245 (5) {
  ["productid":protected]=>
  string(4) "8989"
  ["product":protected]=>
  string(12) "Test Test"
  ["price":protected]=>
  string(4) "9,95"
  ["groupid":protected]=>
  string(2) "72"
  ["description":protected]=>
 object(Test\AdminBundle\Entity\Description)#417 (3) {
    ["productid":protected]=>
    NULL
    ["description":protected]=>
    string(4) "qweq fdasd"
  }
}

class Product
{
    /**
     * @Assert\NotBlank(groups={"edit"})
     * @Assert\Range(min = "100", max = "99999", groups={"search", "edit"})
     * @ORM\Id
     * @ORM\Column(type="integer")
     */
    protected $productid;

    ...

    /**
     * @Assert\Type(type="Test\AdminBundle\Entity\Description")
     * @ORM\OneToOne(targetEntity="Description", cascade={"persist"})
     * @ORM\JoinColumn(name="productid", referencedColumnName="productid")
     */
    protected $description; 

    ...
}

class Description
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     */
    protected $productid;

    /**
     * @ORM\Column(type="text")
     */
    protected $description;

    ...
} 
```

我的表（mysql myisam）都使用相同的productid作为主键：

```
product
productid | price | morecolumns | ...

description
productid | description | morecolumns | ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:34:57.577

您可以简单地添加实体`$description->setProduct($this)`的`addDescription(Description $description)`方法。`Product`因此，每当您向产品添加新的描述对象时，它都会自动填充该字段。

# opencv - WPF 的 Macbeth ColorChecker

> ID：15544376
> 
> 赞同：3
> 
> 时间：2013-03-21T10:02:25.260
> 
> 标签：opencv, image-processing

Macbeth ColorChecker finder 是否有 C# 代码或 WPF 工具？我可以将其用作我的项目的参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T10:37:11.077

github 上有 macduff 项目[https://github.com/ryanfb/macduff](https://github.com/ryanfb/macduff) - 不幸的是，这不是很可靠：如果图表不是正面的，这会导致我的实验中的错误检测。许可证虽然很好 - 可能是一个很好的基础......

Keigo Hirakawa 已发布 Matlab 代码[http://campus.udayton.edu/~ISSL/index.php/macbeth-colorchecker-finder/](http://campus.udayton.edu/~ISSL/index.php/macbeth-colorchecker-finder/)用于定位颜色检查器。代码可用，许可证限制性更强（非商业），尚未测试

# excel - 在excel中连接日期和字符串

> ID：15544377
> 
> 赞同：0
> 
> 时间：2013-03-21T10:02:26.257
> 
> 标签：excel, excel-formula, excel-2003, formulas

![在此处输入图像描述](../Images/fc193004e0ff4f7bb3ca9eaefedb28bd.png)

在 Excel 中，我使用以下公式：-

```
="Select Count(1) Into Count1 From TRB_TPOAR Where tpo_id='" & A2 & "' and eta_id=old_eta_id and date_creation=to_date('" &  B2 & "','dd/mm/yyyy HH24:MI:SS') and UTL1_EDS_ID='DEI037';
    if Count1>0 then
     Update TRB_TPOAR Set Eta_id=new_eta_id Where tpo_id='" & A2 & "' and eta_id=old_eta_id and date_creation=to_date('" & B2 & "','dd/mm/yyyy HH24:MI:SS') and UTL1_EDS_ID='DEI037';
     DBMS_OUTPUT.PUT_LINE('" & A2 & "'  UPDATED'); 
    end if;" 
```

在 excel 表 B 列中包含日期时间信息（例如 2013 年 1 月 14 日下午 12:20:01），但是当我应用公式时，它会添加一些其他数值。谁能帮助我，上面有哪些更改公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:19:02.520

在您的情况下，Excel 在引用的单元格中返回日期的序列号。要确保它返回一个字符串以您想要的格式显示日期，请使用`=TEXT(cell, FormatString)`.
例：`TEXT(C2, "dd/mmm/yy")`
好机会

# c# - 如何通过一键操作对#region:s 进行排序？

> ID：15544379
> 
> 赞同：0
> 
> 时间：2013-03-21T10:02:35.097
> 
> 标签：c#, visual-studio, visual-studio-2012

我们在项目中经常使用#region #endregion 块。

是否有一些 vs 或扩展技巧可以让它们轻松排序？

实际上，我不知道他们为什么一开始就乱套了。他们做到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:05:26.740

希望这是你所期望的

选择一个代码区域，然后按`ctrl+k and s`然后选择#region，然后指定您的区域名称。

# java - Clojure java.lang.Exception 中的错误：事务回滚：d != clojure.lang.Keyword (NO_SOURCE_FILE:0)

> ID：15544382
> 
> 赞同：3
> 
> 时间：2013-03-21T10:02:40.897
> 
> 标签：java, clojure

这是我的代码：

```
(defn tbl_email_data
  {:new-acc  1
   :email "test_get_account_3@mode-test.co"
   :token "pa55P0rt"})

(defn create-online-test-data[data_values]
   (with-connection
      (with-transaction []
         ;Insert tbl_email
         (execute-sql (format "Insert into tbl_email (email, acc_no, pass) values          ('%s', %d, '%s')" data_values :email data_values :new-acc data_values :token))
  ))) 
```

尝试运行它时，我收到以下错误：

> com.mode.test.core.testOnline=> (create-online-test-data tbl_email_data)
> java.lang.Exception: 事务回滚: d != clojure.lang.Keyword (NO_SOURCE_FILE:0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:54:59.767

你的电话`format`没有做你认为它正在做的事情。您将地图和关键字作为参数传递，这将导致`format`将地图的字符串表示形式插入 SQL 字符串（并忽略最后三个参数）。

试试这个：

```
(format "Insert into tbl_email (email, acc_no, pass) values
         ('%s', %d, '%s')"
        (data_values :email)
        (data_values :new-acc)
        (data_values :token)) 
```

或者，更惯用一点：

```
(apply format
       "Insert into tbl_email (email, acc_no, pass) values
        ('%s', %d, '%s')"
      (map data_values [:email :new-acc :token])) 
```

# java - 如何从 Java 代码运行 Linux 程序

> ID：15544386
> 
> 赞同：1
> 
> 时间：2013-03-21T10:02:47.387
> 
> 标签：java, process, runtime, qemu

我正在尝试使用 qemu-img 从 Java 代码创建磁盘空间，因此我实例化了进程和运行时类。运行程序时，尽管我使用相同的机制进行类似的执行，但命令没有执行，并且它工作正常。所以我想知道我是否在这里错过了什么。

```
StringBuilder commandBuilder = new StringBuilder("qemu-img create -f "+chosenStorageType+" ~/"+storageName+".img "+storageSize+"M");
System.out.println(commandBuilder);
String command = commandBuilder.toString();
System.out.println("this is the correct one: "+command);

System.out.println("Creating the image...");
Runtime runtime = Runtime.getRuntime();
Process process = null;
try {
    process = runtime.exec(command);
    System.out.println("from process try..catch");
} catch (IOException e1) {
    e1.printStackTrace();
    System.out.println(e1.getMessage());
}finally{
    System.out.println("from finally entry");
    process.destroy();
} 
```

输出如下：

```
qemu-img create -f raw ~/testSPACE.img 23.0M

this is the correct one: /qemu-img create -f raw ~/testSPACE.img 23.0M
Creating the image...
from process try..catch
from finally entry 
```

但是，如果我转到该目录，则不会创建该文件。

如果我将输出复制到终端中，只是为了测试它，一切都像魅力一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:05:10.317

这里的波浪号 ( `~`)

```
" ~/"+storageName+".img " 
```

被 shell 解释为你的主目录。我会替换真正的路径。

另请注意，您需要[使用进程 stdout/err](https://stackoverflow.com/a/882795/12960)，并通过收集进程的错误代码（并检查它！）`Process.waitFor()`

# arrays - 如何重新排列数组中的元素？

> ID：15544387
> 
> 赞同：0
> 
> 时间：2013-03-21T10:02:49.050
> 
> 标签：arrays

请给出一个算法，将重新排列数组中的所有元素，使它们都不在以前的位置。数组元素的反转是否有效？（如果数组的长度是奇数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:04:56.227

将它们向左移动一个位置，将第一个元素移动到末尾。

您在问题中概述的方法也可以。

# binding - Xamarin 绑定类

> ID：15544388
> 
> 赞同：3
> 
> 时间：2013-03-21T10:02:51.897
> 
> 标签：binding, delegates, scrollview, xamarin

我正在使用 Xamarin 为 iOS 开发一个应用程序。

在我的解决方案中，我添加了一个绑定项目以包含一些本机库，但我在编写 ApiDefinition.cs 时遇到了一些麻烦

这是原始库：

```
@class AccordionView;
@protocol AccordionViewDelegate <NSObject>
@optional
- (void)accordion:(AccordionView *)accordion didChangeSelection:(NSIndexSet *)selection;
- (void)accordion:(AccordionView *)accordion heightUpdate:(NSInteger)height;
@end

@interface AccordionView : UIView <UIScrollViewDelegate> {
[..]
}

- (void)addHeader:(id)aHeader withView:(id)aView setBool:(BOOL)arrow;
- (void)setOriginalSize:(CGSize)size forIndex:(NSUInteger)index;
- (void)scrollViewDidScroll:(UIScrollView *)aScrollView;
- (void)touchDown:(id)sender; 
```

这就是我编写 ApiDefinitions.cs 的方式

```
[BaseType (typeof(UIView))]
interface AccordionView : UIScrollViewDelegate
{
    [Export ("initWithFrame:")]
    IntPtr Constructor(RectangleF frame);

    [Export ("addHeader:withView:setBool:")]
    void AddHeader(NSObject aHeader, NSObject aView, bool arrow);

    [Export ("touchDown:")]
    void TouchDown(NSObject sender);

    [Export ("setOriginalSize:forIndex:")]
    void SetOriginalSize(SizeF size, uint index);

    [Export ("scrollViewDidScroll:")]
    void ScrollViewDidScroll(UIScrollView scrollView);
}

[BaseType (typeof(NSObject))]
[Model]
interface AccordionViewDelegate
{
    [Export ("accordion:didChangeSelection:")]
    void DidChangeSelection(AccordionView accordion, NSIndexSet selection);

    [Export ("accordion:heightUpdate:")]
    void HeightUpdate(AccordionView accordion, int height);
} 
```

我的问题出在 UIScrollViewDelegate 上，我不知道如何“翻译”它。
有人可以帮助我吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T18:23:27.590

您是否尝试过使用 Objective Sharpie 来查看演练？

[http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c/Walkthrough_Binding_objective-c_library/](http://docs.xamarin.com/guides/ios/advanced_topics/binding_objective-c/Walkthrough_Binding_objective-c_library/)

# exchange-server - 从单个程序管理多个用户日历

> ID：15544392
> 
> 赞同：0
> 
> 时间：2013-03-21T10:03:02.067
> 
> 标签：exchange-server, exchangewebservices

是否可以从一个程序管理多个日历？任务是为域中的不同用户添加事件，但在不知道所有用户域密码的情况下从单个程序中完成。应该使用什么类型的身份验证来连接 EWS？是否存在任何管理员帐户？如何指定每个操作要更新哪个日历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:30:41.560

这肯定是可能的。您必须为每个用户创建一个 ExchangeService 实例，并将 ImpersonatedUserId 属性设置为您想要约会的用户的邮箱或您想要添加的任何内容。

看看[http://msdn.microsoft.com/en-us/library/exchange/dd633680(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633680(v=exchg.80).aspx)那里你可以找到如何使用模拟，也看看[http:// /msdn.microsoft.com/en-us/library/bb204095.aspx](http://msdn.microsoft.com/en-us/library/bb204095.aspx)您可以在其中查看如何设置用户需要模拟的权限。

希望能回答你的问题...

# javascript - Chrome websockets，readystate 始终为 0

> ID：15544396
> 
> 赞同：7
> 
> 时间：2013-03-21T10:03:05.880
> 
> 标签：javascript, html, google-chrome, websocket, chromium

我正在尝试在网站上使用 websockets，所以首先我开发了一个小而非常简单的 websocket 页面来测试它。

我的本地主机上运行了一个 websocket 服务器，它基于 python Tornado "Chat" 演示。出于某种原因，聊天演示应用程序运行完美，但我似乎无法将 websocket 与我自己的页面一起使用，尽管建立了某种形式的连接。

我正在使用最新的 Chromium 版本对此进行测试，因此实现了 Tornado 实现支持的 websockets 版本 13。

所以这里是问题：

1.  加载页面，js执行，升级请求发送到服务器
2.  服务器接收请求和应答

所以在我的理解中，Chrome 应该设置 readyState = 1 并且我应该能够从我的页面发送消息。

只是由于某种原因它不起作用，readyState 保持为 0，当然，如果我尝试发送消息，我会收到 INVALID_STATE_ERR。

这是标题：

要求：

```
GET ws://127.0.0.1:8000/chatsocket HTTP/1.1
Origin: http://127.0.0.1
Cookie: _xsrf=9f73731fc2d544df864ce777bef0775a
Connection: Upgrade
Host: 127.0.0.1:8000
Sec-WebSocket-Key: pkwlpY+TtxfgUrm3M4WtTQ==
Upgrade: websocket
Sec-WebSocket-Version: 13 
```

回复：

```
HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Upgrade: websocket
Sec-WebSocket-Accept: ur9KL2jBhYB38e2SgwOkjyBlQXk= 
```

任何帮助表示赞赏:)

- - 编辑 - -

所以我最后想通了，如果你遇到同样的问题，原因如下：

**WebSocket 的 readyState 在 Thread ENDS 时更新！**

所以运行如下代码：

```
var ws = new WebSocket(stuff);
while(ws.readyState==0){}; 
```

将无限循环发送浏览器...

运行代码如：

```
var ws=new WebSocket(stuff);
do_other_stuf(); 
```

可能有效，但您将无法使用 WS。

如果应该在套接字打开后运行的代码使用套接字，则必须这样编写：

```
var ws=new WebSocket(stuff);
ws.onopen = new function(){
    // some code that need WS to be open
}
// rest of the code that doesn't require WS to be open 
```

更好的方法是使用异步调用让线程结束：

```
var ws = new WebSocket(stuff);
setTimeout(whatever,500);

function whatever(){
    if(ws.readyState==1){
        // The code you want to run after WS is open
    }
    else
        setTimeout(whatever,500);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T18:08:35.287

为了在连接 WebSocket 时触发某些功能，请使用回调：

```
var socket = new WebSocket(...);

socket.onopen = function() {
    // socket is connected
};
socket.onerror = function() {
    // some error happened
};
socket.onmessage = function(evt) {
    // you get a message: evt.data
}; 
```

在这种情况下使用`readyState`是一件很糟糕的事情，特别是如果你必须多次询问它（只是没有必要）。

另外要考虑到每个浏览器供应商在实现 WebSockets 时都有非常细微的差异（很遗憾），因此请确保在大多数浏览器中进行测试。

# java - Spring Security - 调度到 /j_spring_security_check

> ID：15544398
> 
> 赞同：5
> 
> 时间：2013-03-21T10:03:10.293
> 
> 标签：java, spring, servlets, post, spring-security

我有弹簧安全，并通过 login.jsp 登录工作得很好。

现在，我必须根据 URL 自动让用户登录（类似于单点登录）。我基本上在 URL 中有一个路径参数，它基本上是一个加密代码，我处理这个代码来进行自动登录。

我正在修改我的 LoginController 以检查我是否有一个有效的路径参数，我使用它来获取我的用户名和密码，使用我正在做的这个用户名和密码`"forward:/j_spring_security_check?j_username="+username+"&j_password="+password`

这将我引导到 login.jsp 并出现以下错误`Your login attempt was not successful, try again. Caused : Authentication method not supported: GET`

我也尝试过`"redirect:/j_spring_security_check?j_username="+username+"&j_password="+password`但没有帮助。

调用`/j_spring_security_check`是一个`POST`但是`forward:`&`redirect:`正在做一个`GET`，那么我如何从我的 LoginController调度到`/j_spring_security_check`as ？`POST`

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T10:21:38.623

`/j_spring_security_check`URL 被映射到`UsernamePasswordAuthenticationFilter`为请求提供服务。

在`UsernamePasswordAuthenticationFilter`中，默认情况下，`postOnly`设置为`true`。

以下更改在`spring-security.xml`哪些设置`postOnly`中`false`起作用。

```
<bean id="authenticationFilter" 
      class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
      p:postOnly="false" /> 
```

此外，在 中`web.xml`，需要以下配置：

```
<filter-mapping> <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T14:30:18.897

您可以使用返回“POST”而不是“GET”的请求包装器绕过检查`getMethod`。

但是，检查是有原因的。将凭据作为 URL 参数发送通常被认为是不好的做法。即使您使用的是加密参数，它在技术上仍然等同于发送未加密的身份验证凭据，因为任何窃取它的人都可以使用它进行身份验证。

# hadoop - 使用 Sqoop 导入时如何使用指定的 Hive 数据库

> ID：15544400
> 
> 赞同：5
> 
> 时间：2013-03-21T10:03:16.353
> 
> 标签：hadoop, hive, sqoop

```
sqoop import --connect jdbc:mysql://remote-ip/db --username xxx --password xxx --table tb --hive-import 
```

上述命令将表*tb*导入 ' `default`' Hive 数据库。

我可以改用其他数据库吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T18:54:58.967

我记得你可以指定`--hive-table foo.tb`

其中 foo 是您的配置单元数据库，而 tb 是您的配置单元表。

所以在你的情况下，它将是：

```
sqoop import --connect jdbc:mysql://remote-ip/db --username xxx --password xxx --table tb --hive-import --hive-table foo.tb 
```

作为脚注，这里是原始 jira 问题[https://issues.apache.org/jira/browse/SQOOP-322](https://issues.apache.org/jira/browse/SQOOP-322)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-01T07:31:43.753

**使用 Sqoop 导入的 Hive 数据库：**

`sqoop import --connect jdbc:mysql://localhost/arun --table account --username root --password root -m 1 --hive-import **--hive-database** company **--create-hive-table --hive-table** account --target-dir /tmp/customer/ac`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T01:28:47.110

您可以将数据库名称指定为`--hive-table`参数的一部分，例如“ `--hive-table foo.tb`”。

有一个为正在跟踪的数据库添加特殊参数的新请求：[SQOOP-912](https://issues.apache.org/jira/browse/SQOOP-912)。

# wso2esb - 在 WSO2 ESB 4.6 中访问已发布的 WS 代理时出错：找不到 EPR

> ID：15544406
> 
> 赞同：1
> 
> 时间：2013-03-21T10:03:27.580
> 
> 标签：wso2esb

我在 4.5.1 和 4.6 中部署了完全相同的 WS-proxy。使用 4.5.1 它可以正常工作，但是使用 4.6 我得到：

```
ERROR - AxisEngine The endpoint reference (EPR) for the Operation not found is /services/registro.registroHttpSoap11Endpoint and the WSA Action = . If this EPR was previously reachable, please contact the server administrator. 
```

来源如下：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="registro" transports="http" statistics="disable" trace="disable" startOnLoad="true">
  <target>
    <outSequence>
      <send/>
    </outSequence>
    <endpoint>
      <address uri="http://localhost:15080/SIGEM_RegistroPresencialWS/services/ServicioRegistroWebService"/>
    </endpoint>
   </target>
   <publishWSDL uri="http://localhost:15080/SIGEM_RegistroPresencialWS/services/ServicioRegistroWebService?wsdl"/>
   <description></description>
</proxy> 
```

我必须为 4.6 做什么。让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T19:47:23.043

为了增强 ESB 性能，从 ESB 4.6.0 版本开始默认启用直通传输，而 ESB 4.5.1 不是这种情况。您的代理服务似乎依赖于基于 SOAP 主体的调度，但直通传输不支持基于 SOAP 主体的调度。基于 SOAP 主体的调度构建消息主体并使用第一个元素的本地名称进行调度，这会严重影响代理性能，这就是直通传输不支持它的原因。我们正在为未来的 ESB 版本修复此限制，同时不会失去直通传输的任何优势。

顺便说一句，目前您可以使用以下解决方法之一。

1.  向代理服务发送消息时，将操作名称附加到端点 URL

    例如 -`http://serverName/app/serviceName/operationName`

2.  修改客户端代码以发送预期的 SOAPAction 值（如 Try-It 案例）

3.  我不确定您的后端服务的 WSDL 将“”定义为 SOAPAction 的值，如果是这种情况，您可以将后端服务修改为每个操作都具有“”以外的值。作为 JAX-WS 服务的示例，您可以为此使用 @WebMethod 注释。

例如 - @WebMethod(action="XXXX")

注意：如果您的后端 WSDL 为 SOAPAction 定义了“”以外的值，而您的客户端使用 SOAPAction="" 发送消息，则客户端违反了服务合同，需要在客户端级别进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T09:19:25.727

我在使用 wso2 ESB 4.7 时也遇到了同样的问题，而且 Web 服务也是我为公司开发的。

对我有用的是将**soapAction**属性添加到wsdl **soap:operation**元素，如下所示。

```
<soap:operation soapAction="http://localhost:8080/MyWebApp/services/hello" style="document"/> 
```

# powershell - Powershell 调用远程脚本以获取场负载 (XenApp 4.5)

> ID：15544407
> 
> 赞同：0
> 
> 时间：2013-03-21T10:03:28.483
> 
> 标签：powershell, remoting, citrix, invoke-command, xenapp

qfarm /load我在远程执行脚本时遇到问题。

该脚本调用 cmd 命令`qfarm /load`并将结果转换为 PSObjects。

```
function New-qLast()
{
    param ([String] $qName, [String] $qLoad)
    $qLast = New-Object PSObject

    $qLast | Add-Member -MemberType NoteProperty -Name ServerName -Value $qName
    $qLast | Add-Member -MemberType NoteProperty -Name ServerLast -Value $qLoad

    return $qLast
}

Write-Host "Start" 

$b = @()
foreach ($a in $(qfarm /load))
{
    $b += $a.Split(" ") | Where-Object { $_ -ne "" }
}
$b

$table = @()
for ($i = 5; $i -lt $b.Length; $i += 2) #for XA 4.5 $i = 5 $i += 2; for XA 6.5 $i += 5 and $i = 8
{
    $table += New-qLast $b[$i] $b[$i+1]
}
$table 
```

一旦它开始调用，`qfarm /load`什么都没有发生。

当我直接在终端服务器上执行脚本时，它工作正常。

我还尝试运行`Invoke-Command -ComputerName Server01 {qfarm /load}`该服务器场的前 22 台服务器，然后它不会返回任何内容，但仍在运行，直到您手动将其关闭。

有谁知道它为什么会卡住？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:50:04.297

首先感谢鲍勃，对我迟到的回复感到抱歉。

不幸的是，您的方法不起作用，但我找到了解决方法。

我找到了这个[VBS](http://www.cibengineering.com/blog/server-load-level-wmi/)并将其用于我的 PowerShellscript。

它看起来像这样：

```
$server = Import-Csv C:\Server_On.txt | Where-Object { $_.ServerStatus -eq $true }

$load = Get-WmiObject -ComputerName $server.ServerName -Namespace "root\citrix" -Class MetaFrame_Server_LoadLevel | Select-Object Servername, LoadLevel 
```

唯一的区别`qfarm /load`是您必须处理每台服务器。

# jquery - ajax调用动作时struts2抛出的异常如何处理？

> ID：15544418
> 
> 赞同：0
> 
> 时间：2013-03-21T10:03:48.467
> 
> 标签：jquery, ajax, exception, struts2

我使用 jquery post 方法调用`save`方法`DepartmentAction`，如果我保存一个 dup 部门（db 中不允许 dup 部门），该`save`方法会引发异常，但用户无法从页面获取任何有关它的信息，这是我的代码：

部门动作类：

```
public class DepartmentAction extends ActionSupport{
  public String save() throws Exception
   {
    this.departmentService.save(this.dept);
    this.jsonResult = "success";
    return "save";
  }
 } 
```

struts.xml：

```
<package name="backstage-default" extends="ecs-default" namespace="/manager">
   <action name="dept_*" class="com.nader.action.DepartmentAction" method="{1}">
      <result name="save" type="json"><param name="root">jsonResult</param></result>
   </action>

 <global-results>
        <result name="error">/error.jsp</result>
    </global-results>

    <global-exception-mappings>
        <exception-mapping exception="java.lang.Exception" result="error"         />
    </global-exception-mappings> 
```

测试.jsp：

```
 $.post('dept_save.do', 
                 {'dept.deptId':$("#dialog_dept_deptId").val(), 
                  'dept.deptName':$("#dialog_dept_deptName").val(),
                  'dept.manager':$("#dialog_dept_manager").val(),
                 },function(data, status, xhr){
                     alert(status);
                     if(status == 'success'){
                         alert('success:'+data);
                         $("#dialog-form").dialog("close");
                         getCountByAJAX();
                         getDeptByAJAX();
                     }else{
                         alert('error:'+data);
                     }
                  }
                 ,"json").fail(function(data, status, xhr)          {alert('fail:'+data);}); 
```

当`save`抛出异常时，用户没有得到任何信息，没有错误，没有重定向，那我该怎么办？我不想`try catch`在Actions里写block，因为太多了，让代码乱七八糟。还有其他一些方法吗？

提前致谢。

ps：真的很抱歉，我刚刚贴错了`javascript`块，我更正了，现在`fail`处理程序在struts2抛出异常时执行，但我不知道`data`传递给浏览器的是什么，我看到`dept_save.do`chrome的响应tools，里面包含了所有的exceptionStack信息，太多了，struts能不能返回一些小信息或者友情提示信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:47:54.797

> 我不想在 Actions 中写 try catch 块，因为它太多让代码乱七八糟。

那是无稽之谈。当您使用的框架的组件可能抛出异常时，*如果*您想保持对程序流的控制而不是让它仅仅因错误而中断，则*必须*捕获这些异常。

 *（当然，您不必在此处捕获该异常，而且异常也可以在程序流的后期捕获。它们只需要在程序结束之前的某个地方被捕获即可。）*

# c# - 单词中整数的正则表达式未正确失败

> ID：15544429
> 
> 赞同：1
> 
> 时间：2013-03-21T10:04:11.697
> 
> 标签：c#, regex

我正在尝试创建正则表达式以完全匹配一种字符串格式。字符串会是这样的

```
A3476，文本A
B5628,文字B
A9871,TextC

```

第一个字符应该是“A”或“B”，后面是整数，整数长度应该正好是 4 个字符，然后是“，”。逗号后只有三个单词会重复，它们是“TextA”或“TextB”或“TextB”。

我试过这个正则表达式

```
(A|B)(\d{4})(,)(TextA|TextB|TextC)

```

当我在整数中添加任何字母或整数长度大于 4 个字符时，字符串匹配应该会失败，但不会失败。

假设如果字符串是这样的

```
A653k7876,文字A

```

我得到这样的结果`7876,TextA`。结果是缺少字符“A”并从末尾读取整数。我的意图是它应该失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:18:21.450

你的正则表达式很好，除了你应该指出它应该在哪里开始和结束。`^`特殊字符表示行或字符串的开始和结束`$`。所以，试试这个：

```
^(A|B)(\d{4})(,)(TextA|TextB|TextC)$ 
```

确保[`RegexOptions.Multiline`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)在创建`Regex`对象时指定以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:16:10.970

Use:

```
\b(A|B)(\d{4}),(TextA|TextB|TextC)\b 
```

\b denotes the word boundary

You might find this link useful: [C# Regex Cheat Sheet](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:08:02.390

看起来我们需要更多信息，就好像我完全按照您提供的那样使用字符串：

```
Console.WriteLine(Regex.IsMatch(@"A653k7876,TextA", @"(A|B)(\d{4})(,)(TextA|TextB|TextC)")); 
```

输出 False - 如你所愿。

# javascript - 我可以用什么来代替我的警报方法？

> ID：15544431
> 
> 赞同：0
> 
> 时间：2013-03-21T10:04:16.490
> 
> 标签：javascript, alert

在这段代码中，我等到创建请求（201 http 状态）。我使用警报方法，但我不想使用它。我可以在这里替换警报方法吗？

我正在寻找类似“什么都不做”的方法。

```
if (createRequest.status == 201)
{
      ...code.....
}

else
{
  alert('wait');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:09:28.640

您可以使用一些更花哨的 suff，例如[Boostrap 的警报](http://twitter.github.com/bootstrap/components.html#alerts)或[Bootstrap 的弹出](http://twitter.github.com/bootstrap/javascript.html#popovers)框，它们是专门为处理这些情况而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:11:09.950

如果你想要一个“什么都不做”的方法......那么只需**摆脱 else**：

```
if (createRequest.status == 201) {
      ...code.....
} 
```

如果你真的想保留它（我不知道为什么，也许你将来可能想要一个替代案例）：

```
if (createRequest.status == 201) {
      ...code.....
}
else {
      // doing nothing
} 
```

最好检查某些东西是否有效。控制台日志一般：

```
else {
console.log("It didn't work!");
} 
```

如果我误解了您的问题并且您想要替代警报，您可以使用 jQuery [UIDialog](http://jqueryui.com/dialog/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:12:12.500

简短回答：删除 else 语句。**#不良做法**

更好的做法是保留错误处理选项（例如 do something if `readyState === 4 && status !== 201`）来处理意外结果。您至少可以将其记录到控制台，例如

```
console.warn("Hey, I got an unexpected response. Status: " + status); 
```

（或者在这种情况下，您可能真的很想了解它并实际保留`alert()`或任何其他视觉提示。）

# c# - 我在阅读文件时做对了吗？

> ID：15544432
> 
> 赞同：0
> 
> 时间：2013-03-21T10:04:17.607
> 
> 标签：c#, asp.net, file, file-upload, .net-2.0

此代码正在尝试读取文件但给出错误，

```
 System.IO.IOException: The process cannot access the file 'C:\doc.ics' because it is being used by another process.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamWriter.CreateFile(String path, Boolean append)
   at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
   at System.IO.StreamWriter..ctor(String path) 
```

我认为这是在读取文件时导致问题的代码，它在开发和集成服务器上运行良好，但在生产服务器上运行良好。

```
 private byte[] ReadByteArrayFromFile(string fileName)
    {
        byte[] buffer = null;
        FileStream filestrm = new FileStream(fileName, FileMode.Open, FileAccess.Read);
        BinaryReader binaryread = new BinaryReader(filestrm);
        long longNumBytes = new FileInfo(fileName).Length;
        buffer = binaryread.ReadBytes((int)longNumBytes);
        return buffer;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:10:51.787

采用：

```
var bytes = File.ReadAllBytes(@"path"); 
```

反而！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:08:50.857

您应该使用`FileStream`inside`using`语句来确保它被正确关闭和处置：

```
using (FileStream fs = File.OpenRead(path))
{
    ...
} 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T10:07:56.913

你做的不对：每当你打开一个文件流时，**你必须处理它**。

这可以解决问题：

```
private byte[] ReadByteArrayFromFile(string fileName)
    {
        byte[] buffer = null;

        using(FileStream filestrm = new FileStream(fileName, FileMode.Open, FileAccess.Read))
        using(BinaryReader binaryread = new BinaryReader(filestrm))
        {
             long longNumBytes = new FileInfo(fileName).Length;
             buffer = binaryread.ReadBytes((int)longNumBytes);
        }

        return buffer;
    } 
```

`using``Dispose()`即使抛出异常，语句也会调用您！

*而且，当然，您将避免文件锁定。*

[看看这篇文章。](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

# .net - 当文本框未聚焦（丢失键盘焦点）时，如何突出显示 wpf 中的文本？

> ID：15544433
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:04:17.713
> 
> 标签：.net, wpf, xaml, textbox, highlight

文本框未聚焦时如何突出显示Wpf中的文本？（.NET 4.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:42:00.900

您可以将 Style 与 EventTrigger 一起用于 TextBox.LostFocus/GotFoxus 事件。

当“LostFocus”为“true”时，这会将 TextBox 前景更改为红色，延迟 1 秒

```
 <Style x:Key="tboxStandard"
     TargetType="{x:Type TextBox}">
<Setter Property="BorderThickness"
        Value="2" />
<Setter Property="BorderBrush"
        Value="#292929" />
<Setter Property="Background"
        Value="#E9E9E9" />
<Setter Property="TextAlignment"
        Value="Center" />
<Setter Property="Foreground"
        Value="#191919" />
<Style.Triggers>
  <EventTrigger RoutedEvent="TextBox.GotFocus">
    <EventTrigger.Actions>
      <BeginStoryboard>
        <Storyboard>
          <ColorAnimation Storyboard.TargetProperty="(TextBox.Foreground).(SolidColorBrush.Color)"
                          To="#191919"
                          Duration="0:0:1" />
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger.Actions>
  </EventTrigger>
  <EventTrigger RoutedEvent="TextBox.LostFocus">
    <EventTrigger.Actions>
      <BeginStoryboard>
        <Storyboard>
          <ColorAnimation Storyboard.TargetProperty="(TextBox.Foreground).(SolidColorBrush.Color)"
                          To="Red"
                          Duration="0:0:1" />
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger.Actions>
  </EventTrigger>
</Style.Triggers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:31:23.393

如果您处理 TextBox 的 LostFocus 事件，则可以使用以下代码选择 TextBox 的内容：

```
textBox.SelectAll();
e.Handled = true; 
```

# sql - 带有 WHERE 的 SQL DISTINCT 子句

> ID：15544434
> 
> 赞同：0
> 
> 时间：2013-03-21T10:04:21.580
> 
> 标签：sql, distinct, where

我有一个 MySQL 数据库表，我可以在其中查看哪些用户订阅了哪些时事通讯，它看起来像这样：

```
ID  Klant_ID Mail_ID Status Datum
2   6        1       test   test
72  6        1       10     20-03-2013
73  6        2       90     20-03-2013
74  6        4       10     20-03-2013
75  6        5       90     20-03-2013
76  8        1       10     20-03-2013
77  8        2       10     20-03-2013
78  8        4       90     20-03-2013
79  8        5       90     20-03-2013
80  6        2       90     21-03-2013
81  6        4       10     21-03-2013 
```

我目前正在使用这个 SQL 查询来选择所有具有正确 Klant_ID 的行：

```
"SELECT * FROM Subscriptions WHERE Klant_ID = '".$_GET["ID"]."'"; 
```

这将显示：

![在此处输入图像描述](../Images/ff744c22c7f23a80f6c27b7ff7f2d683.png)

我正在尝试获取一个仅显示具有不同 Mail_ID 的行且仅显示最后一个的查询。所以基本上我想要一个显示这个输出的查询：

```
ID Klant_ID Mail_ID Status Datum
72 6        1       10     20-03-2013
80 6        2       90     21-03-2013
81 6        4       10     21-03-2013
65 6        5       90     20-03-2013 
```

我使用 DISTINCT 尝试了一些事情，但我无法让它正常工作，因为我对此没有太多经验。如果您还有其他问题，请在评论中提出。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:10:06.407

这应该这样做，取决于您的 DBMS

```
SELECT MAX(ID), Mail_ID FROM Subscriptions
    WHERE Klant_ID = '".$_GET["ID"]."' GROUP BY Mail_ID 
```

那么您就有了正确的 ID，您还可以通过以下方式获取其余信息

```
SELECT * FROM Subscriptions,
    (SELECT MAX(ID) as ids, Mail_ID FROM Subscriptions
        WHERE Klant_ID = '".$_GET["ID"]."' GROUP BY Mail_ID) table2
    WHERE ID=table2.ids 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:12:11.760

您没有指定 DBMS，所以这是 ANSI SQL：

```
select id, 
       klant_id,
       mail_id, 
       status,
       datum
from (
  select id, 
         klant_id,
         mail_id, 
         status,
         datum,
         max(datum) over (partition by mail_id) as max_datum
   from Subscriptions 
   where Klant_ID = 42 --- pass your parameter here
) t
where datum = max_datum; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:19:51.077

请试试这个

select * from Subscriptions where ID in (Select MAX(ID) from Subscriptions sub WHERE Klant_ID = '".$_GET["ID"]."' group by Mail_ID)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:25:32.617

Distinct 不会给您想要的结果，因为它会根据您查询的所有数据为您提供不同的行。因为您可以对具有不同日期和状态的同一时事通讯进行多个订阅，所以您需要更多地修改您的查询，我认为按状态和基准进行聚合并按 Mail_ID 分组可能会有所帮助：

```
"SELECT
        MAX(ID), Klant_ID, Mail_ID, MAX(Status), MAX(Datum)
    FROM Subscriptions
    WHERE Klant_ID = '".$_GET["ID"]."'
    GROUP BY Mail_ID"; 
```

还有两件事，您在 Status 和 Datum 列中保存可能具有不同类型的数据，如果您的数据库变得更复杂，这可能会很痛苦，并且仅将 sql 查询字符串与 Http-Get-Data 连接起来可能感觉还可以进行测试目的，但您使自己容易受到 SQL 注入的攻击，不要只是将未经检查的用户数据传递给您的数据库。

# maven - Jenkins maven 发布作业触发下游参数化作业

> ID：15544435
> 
> 赞同：1
> 
> 时间：2013-03-21T10:04:23.230
> 
> 标签：maven, jenkins, maven-release-plugin

我正在使用 jenkins maven-release 插件来标记、打包和执行发布。这工作正常。

该插件要求：

*   发布版本（发布插件的参数releaseVersion）；
*   发布后的开发版本（发布插件的参数 developmentVersion）；

现在，我想在打包此版本后进行第二步。

我想将打包的特定版本（比如 0.0.5）导入我们的部署工具。

我通过配置第二个 Jenkins 作业来做到这一点。

作业使用标签名称参数化。

该作业将签出标签：my-svn-repo/project/tags/$SVN_TAG

然后读取 pom 中的版本并在部署工具中导入包。

但这涉及手动步骤来等待发布作业完成发布执行，然后参数化导入作业并启动它。

我希望第一个工作用正确的参数触发第二个工作。

我试图配置一个参数化的作业触发器，但堆栈的结尾是：

```
[parameterized-trigger] Current build has no parameters.
[parameterized-trigger] Downstream builds will not be triggered. 
```

我期待在上下文中有参数 $MVN_RELEASE_VERSION 。

如何获取 maven 发布插件使用的参数？或者关于如何自动启动我的第二步的任何想法？

谢谢。

# web-services - 部署在 jboss 7 上的 Spring Rest API 无法访问

> ID：15544438
> 
> 赞同：0
> 
> 时间：2013-03-21T10:04:39.163
> 
> 标签：web-services, spring, rest, jboss7.x

我正在尝试在 Jboss 7.1 AS 上部署基于 spring 的 rest webservices。部署后，我无法通过休息客户端访问 Web 服务。每次我收到 404 错误。以下是详细信息。

休息-servlet.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

    <context:component-scan base-package="com.rest.controller"/>

     <!-- To enable @RequestMapping process on type level and method level -->
     <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
     <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>

            <ref bean="marshallingConverter" />
            <!-- 
            <ref bean="atomConverter"  />
             -->
            <ref bean="jsonConverter" />
        </list>
    </property>
     </bean> 
```

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="classesToBeBound">
        <list>
            <value>com.rest.Model1</value>
            <value>com.rest.Model1List</value>
        </list>
    </property>
</bean>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
            <entry key="xml" value="application/xml"/>
            <entry key="html" value="text/html"/>
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="defaultContentType" value="application/xml" />
</bean> 
```

```
 web.xml
 <?xml version="1.0" encoding="UTF-8"?>
  <web-app version="2.4"
     xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
     http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >

<display-name>TestRestProject</display-name>
<!--
    Beans in these files will makeup the configuration of the root web
    application context
-->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/application-context.xml</param-value>
</context-param>

<!--
    Bootstraps the root web application context before servlet
    initialization
-->
<listener>
             <listener-  class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!--
    Deploys the 'transactions' dispatcher servlet whose configuration resides
    in /WEB-INF/accounts-servlet-config.xml
-->
<servlet>
             <servlet-name>rest</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
<!--    <init-param>
        <param-name>contextConfigLocation</param-name>
                    <param-value></param-value>
                   <param-value>/WEB-INF/transactions-servlet-config.xml</param-value> 
    </init-param>  -->

</servlet>

    <!-- Maps all URLs starting with /app to the 'accounts' servlet. -->
<servlet-mapping>
    <servlet-name>rest</servlet-name>
    <url-pattern>/myrest/*</url-pattern>
</servlet-mapping>

      </web-app> 
```

RestController.java

```
package com.rest.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
  @RequestMapping("/myrest")
  public class RestController {

@RequestMapping(value="/getTestMethod", method=RequestMethod.GET)
       public @ResponseBody String getTestMethod(@PathVariable String param1,@PathVariable   String param2){
    String returnValue = "";
    returnValue = "This is from the Controller" + param1 + param2;

    return returnValue;
}
} 
```

# iphone - 带有 plist 的嵌套设置：在 iOS 中无法创建附加设置页面

> ID：15544442
> 
> 赞同：4
> 
> 时间：2013-03-21T10:04:55.440
> 
> 标签：iphone, ios, plist, appsettings, settings.bundle

我正在尝试通过使用 pLists 和 Xcode 4.6 来实现我的应用程序设置的嵌套结构。

**到目前为止我已经尝试过：**

我确实遵循了 Apple 文档中的教程，[这里是创建和附加设置页面文件部分的链接](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)。

我添加了一个包含不同项目的设置包，它们完美地工作。当涉及到我的子窗格时，我使用*文件名*“childsetting”引用了一个文件，并使用 Finder 将 plist childsetting.plist 添加到了我的设置包中。

**问题：**

当我控制单击我的 plist 并从属性列表类型选项中选择“iPhone 设置 plist”时，它不会接受我的选择。

![在此处输入图像描述](../Images/b5b129ceda0b7ea1d962c941226d2a8c.png)

起初，一切看起来都很好：

![在此处输入图像描述](../Images/d4ecb980b78330ea6f2123f981d66ab9.png)

但是在单击另一个文件并单击返回到我的 childsetting.plist 后，Root 元素仍然是 Root 而不是“iPhone Settings Schema”。

![在此处输入图像描述](../Images/3b57532adb127f589c7b7b9593c01495.png)

编辑 XML 源、清理和构建项目、重新启动 XCode 或重新安装应用程序都不起作用。它总是回到同样的问题：**Childpane 是空的。**看起来 pList 没有找到——我猜是因为它没有被识别为 iPhone 设置架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:02:51.983

显然我的 pList 被找到了，即使 XCode 没有说“iPhone 设置架构”。我的问题是**值设置不正确。**重要的是要知道 XCode 会为您的值填充“快捷方式”，但会将更具体的值放入源 XML 中。这就是为什么您必须查看文档是否使用正确的标识符。

**一个例子：**

添加组元素将显示值为“组”。如果 XCode 将您的 pList 识别为设置模式，这确实有效。

![在此处输入图像描述](../Images/e8988bda8db7c28cbb0960e4ce9e0bd3.png)

如果不是，您必须使用文档中[描述的值](http://developer.apple.com/library/ios/#DOCUMENTATION/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSGroupSpecifier.html#//apple_ref/doc/uid/TP40007009-SW1)*PSGroupSpecifier 。*

![在此处输入图像描述](../Images/bd01a9bff1166a538292b2d01d93817b.png)

此外，输入所有必需的值很重要，否则您的子窗格将不会显示。因此，如果您的嵌套设置没有显示有任何问题，请尝试以下步骤进行修复：

1.  [您是否将引用的 pList 命名为与Childpane](http://developer.apple.com/library/ios/#DOCUMENTATION/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSChildPaneSpecifier.html#//apple_ref/doc/uid/TP40007017-SW1)文件规范中指定的名称相同，但未添加 .plist？

2.  您是否将使用 Finder 引用的 pList 移动到设置包中？

3.  您是否检查过您引用的元素是否使用[文档中描述](http://developer.apple.com/library/ios/#DOCUMENTATION/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007005-SW1)的确切值（PSGroupSpecifier 而不是 Group）？当 XCode 不允许您更改属性列表类型时，这一点尤其重要...

4.  是否有任何您没有添加到元素中的必需元素？如果是，则不会显示...

5.  是否认为你做的一切都是正确的，只是没有显示出来？从设备中删除应用程序并清理构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T19:23:54.060

这些解决方案都不适合我——最终成为我的问题是我的文件名`ChildPane.plist`不是`ChildPane`. 原来它也被[记录在这里](https://developer.apple.com/library/ios/documentation/PreferenceSettings/Conceptual/SettingsApplicationSchemaReference/Articles/PSChildPaneSpecifier.html#//apple_ref/doc/uid/TP40007017-SW1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T12:21:40.340

哦，我想我解决了。文件类型并不会真正影响设置应用程序的行为。我从设备/模拟器中删除了我的应用程序，然后重新安装。现在设置应用程序正确显示嵌套页面，即使文件类型不是 Xcode 窗口上的“iPhone 设置 plist”。

# powershell - PowerShell 将脚本参数传递给配置函数

> ID：15544444
> 
> 赞同：0
> 
> 时间：2013-03-21T10:05:00.110
> 
> 标签：powershell

我有一个全球

```
function log( [string] $message, $logType = 'console' ){}
log( 'hello' ); 
```

它默认将日志写入控制台。我想通过命令行参数对其进行配置，以保持所有调用相同，但使用另一种日志记录类型。函数可以采用或参数，或命令行参数。我想混合它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:27:08.410

```
function log($message,$logtype = 'console'){
    switch ($logtype){
        'console' {Write-Host $message}
        'verbose' {Write-Verbose $message}
        'file' {Out-File $message $path}
        default {$message}
    }
}
log 'FOO' 'verbose' 
```

对于 $logtype 参数，您可能希望将 Mandatory 设置为 $false。[参数](http://technet.microsoft.com/en-us/magazine/jj554301.aspx)

# ruby-on-rails - 在 http 请求期间到达文件末尾

> ID：15544447
> 
> 赞同：-2
> 
> 时间：2013-03-21T10:05:05.160
> 
> 标签：ruby-on-rails, http, eof

以下是“获取”方法：

```
 def self.get(url, params={})
    url =  API_DOMAIN + url + '.json' 
    uri = URI.parse(url)

    uri.query = URI.encode_www_form(params)
    http = Net::HTTP.new(uri.host,uri.port)
    path = uri.path
    path += "?#{uri.query}" if uri.query
    request = Net::HTTP::Get.new(path)

    response = http.request(request)
    return response
  end 
```

奇怪的是，这个错误似乎只发生在最后 2 天。有没有人最近遇到过类似的问题？

```
A EOFError occurred in home#index:

  end of file reached
  /usr/share/ruby/1.9/net/protocol.rb:141:in `read_nonblock'
-------------------------------
Backtrace:
-------------------------------

  /usr/share/ruby/1.9/net/protocol.rb:141:in `read_nonblock'
  /usr/share/ruby/1.9/net/protocol.rb:141:in `rbuf_fill'
  /usr/share/ruby/1.9/net/protocol.rb:122:in `readuntil'
  /usr/share/ruby/1.9/net/protocol.rb:132:in `readline'
  /usr/share/ruby/1.9/net/http.rb:2562:in `read_status_line'
  /usr/share/ruby/1.9/net/http.rb:2551:in `read_new'
  /usr/share/ruby/1.9/net/http.rb:1319:in `block in transport_request'
  /usr/share/ruby/1.9/net/http.rb:1316:in `catch'
  /usr/share/ruby/1.9/net/http.rb:1316:in `transport_request'
  /usr/share/ruby/1.9/net/http.rb:1293:in `request'
  vendor/cache/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'
  /usr/share/ruby/1.9/net/http.rb:1286:in `block in request'
  /usr/share/ruby/1.9/net/http.rb:745:in `start'
  /usr/share/ruby/1.9/net/http.rb:1284:in `request'
  vendor/cache/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'
  vendor/cache/bundler/gems/api_client-0f800898fc1b/lib/api_client/api.rb:15:in `get'
  vendor/cache/bundler/gems/api_client-0f800898fc1b/lib/api_client/show.rb:32:in `recommended_each_channel'
  app/controllers/application_controller.rb:238:in `set_public_home_page_params'
  app/controllers/home_controller.rb:15:in `index'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  vendor/cache/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:10:in `process_action'
  vendor/cache/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:458:in `_run__2733272990067146596__process_action__983397386520577802__callbacks'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
  vendor/cache/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in `process_action'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/rescue.rb:29:in `process_action'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  vendor/cache/gems/activerecord-3.2.3/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  vendor/cache/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in `process'
  vendor/cache/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in `dispatch'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  vendor/cache/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in `block in action'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in `call'
  vendor/cache/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
  vendor/cache/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
  vendor/cache/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:177:in `call!'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:157:in `call'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:177:in `call!'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:157:in `call'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:177:in `call!'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/strategy.rb:157:in `call'
  vendor/cache/gems/omniauth-1.1.3/lib/omniauth/builder.rb:48:in `call'
  vendor/cache/bundler/gems/exception_notification-192a49a02d63/lib/exception_notifier.rb:19:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  vendor/cache/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
  vendor/cache/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in `call'
  vendor/cache/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
  vendor/cache/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in `call'
  vendor/cache/gems/activerecord-3.2.3/lib/active_record/query_cache.rb:64:in `call'
  vendor/cache/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `_run__3080212943900396864__call__954872682800432584__callbacks'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  vendor/cache/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app'
  vendor/cache/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in `call'
  vendor/cache/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  vendor/cache/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  vendor/cache/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  vendor/cache/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  vendor/cache/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
  vendor/cache/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
  vendor/cache/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
  vendor/cache/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
  vendor/cache/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
  vendor/cache/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
  vendor/cache/gems/railties-3.2.3/lib/rails/engine.rb:479:in `call'
  vendor/cache/gems/railties-3.2.3/lib/rails/application.rb:220:in `call'
  vendor/cache/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/spawn_manager_orig.rb:253:in `block (2 levels) in spawn_rack_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/spawn_manager_orig.rb:246:in `block in spawn_rack_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/spawn_manager_orig.rb:244:in `spawn_rack_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/spawn_manager_orig.rb:137:in `spawn_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/spawn_manager.rb:16:in `spawn_application_with_env'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/spawn_manager_orig.rb:275:in `handle_spawn_application'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /var/lib/passenger-standalone/3.0.17-x86_64-ruby1.9.3-linux-gcc4.6.2-1002/support/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T03:35:53.653

The problem ended up being the Amazon load balancer timeout. Slightly increased that and its working now

# android - 参考图书馆项目

> ID：15544451
> 
> 赞同：0
> 
> 时间：2013-03-21T10:05:09.607
> 
> 标签：android

我有一个标记为库的项目和一个使用该库的主要项目。看起来一切都很好，主项目的清单包含来自库的活动，带有孔名（package.name），但我不知道如何调用我导入 mainactivity 的库类（import com.example. libreriasuscripcion.MainActivity;) 从库到主库，当我这样调用它时：

```
@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Log.d("Juego - onCreate", "en Onclick");
        Intent i = new Intent(getBaseContext(), MainActivity.class);
        startActivity(i);
    } 
```

有一个错误：这是 logCat

```
03-21 09:45:00.534: E/AndroidRuntime(413): FATAL EXCEPTION: main
03-21 09:45:00.534: E/AndroidRuntime(413): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.juego/com.example.libreriasuscripcion.MainActivity}: java.lang.InstantiationException: com.example.libreriasuscripcion.MainActivity
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.os.Looper.loop(Looper.java:123)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-21 09:45:00.534: E/AndroidRuntime(413):  at java.lang.reflect.Method.invokeNative(Native Method)
03-21 09:45:00.534: E/AndroidRuntime(413):  at java.lang.reflect.Method.invoke(Method.java:521)
03-21 09:45:00.534: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-21 09:45:00.534: E/AndroidRuntime(413):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-21 09:45:00.534: E/AndroidRuntime(413):  at dalvik.system.NativeStart.main(Native Method)
03-21 09:45:00.534: E/AndroidRuntime(413): Caused by: java.lang.InstantiationException: com.example.libreriasuscripcion.MainActivity
03-21 09:45:00.534: E/AndroidRuntime(413):  at java.lang.Class.newInstanceImpl(Native Method)
03-21 09:45:00.534: E/AndroidRuntime(413):  at java.lang.Class.newInstance(Class.java:1429)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-21 09:45:00.534: E/AndroidRuntime(413):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
03-21 09:45:00.534: E/AndroidRuntime(413):  ... 11 more 
```

请你帮助我好吗？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:09:25.927

如果您使用的是 Eclipse IDE，请记住在导出的 APK 文件中包含该库。

右键单击您的项目，转到 property-> java build path-> Order and Export

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:19:29.350

如果您在项目中使用库意味着

1.您需要将库添加到构建路径中。

2.转到>项目属性->javabuild path0>订单和导出->选择你的库。

3.确保在当前项目清单文件中添加您的库活动

4.你必须在你的案例中指定你的库类的全名

```
Intent i = new Intent(getBaseContext(), com.example.libreriasuscripcion.MainActivity.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:32:59.723

我按照你说的尝试过，但仍然是同样的错误这是我的清单

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:name="com.example.libreriasuscripcion.Almacen" >
        <activity
            android:name="com.example.juego.Juego"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name="com.example.libreriasuscripcion.MainActivity">
        </activity>
        <activity
            android:name="com.example.libreriasuscripcion.Almacen"
            android:label="@string/title_activity_almacen" >
        </activity>
        <activity
            android:name="com.example.libreriasuscripcion.Hello"
            android:label="@string/title_activity_hello" >
        </activity>
    </application> 
```

这就是我打电话给图书馆的方式

```
@Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Log.d("Juego - onCreate", "en Onclick");
                //Intent i = new Intent(getBaseContext(), MainActivity.class);
                intent.setAction(Intent.ACTION_MAIN);
                intent.setClassName(getBaseContext(), "com.example.libreriasuscripcion.MainActivity.class");
                intent.putExtra("code", "795006");
                intent.putExtra("keyword", "testandroid");
                startActivityForResult(intent, 1);
                //startActivity(i);
            }
        }); 
```

我正在使用和应用程序来保存数据，但后来我认为这是错误而将其删除，我使用共享首选项来执行此操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T15:12:23.407

问题出在我创建库的方式上，通过逐步遵循这个教程，它工作正常[http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse](http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse)并且它是真的很容易。然后是从库中导入要使用的类并照常使用，因为 Android 将它们识别为本地

谢谢大家

# css - 用淘汰赛检查我表中的所有复选框

> ID：15544453
> 
> 赞同：3
> 
> 时间：2013-03-21T10:05:11.433
> 
> 标签：css, knockout.js

我在第一列中有一个带有复选框的表格。在标题中，我还有一个复选框。单击此选项应检查我表中的所有复选框。

```
<table class="defaultGrid">
<thead>
    <tr>
        <th><input type="checkbox"></th>
        <th>ID</th>
        <th>Name</th>
    </tr>
</thead>
<tbody data-bind="foreach: model.Things">
    <tr data-bind="css: {selected: IsSelected}">
        <td><input type="checkbox" data-bind="checked: IsSelected" /></td>
        <td data-bind="text: ID"></td>
        <td data-bind="text: Name"></td>
    </tr>
</tbody>
</table> 
```

这是jsfiddle：http: [//jsfiddle.net/jJ4H6/29/](http://jsfiddle.net/jJ4H6/29/)

如何通过淘汰赛来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:14:36.677

您需要有一个函数来遍历`Things`集合中的所有项目并将其设置`IsSelected`为 true 或 false。

然后你可以在“main”复选框上绑定这个函数点击：

```
<input type="checkbox" data-bind="click: selectAll"/> 
```

示例实现如下所示：

```
self.selectAll = function(data, event)
{
    ko.utils.arrayForEach(self.model.Things (), function(item){
       if (event.target.checked)
          item.IsSelected(true);
       else
          item.IsSelected(false);
    });
    return true; //to trigger the browser default bahaviour
} 
```

演示[JSFiddle](http://jsfiddle.net/YFkBQ/)。

或者，您可以`IsAllSelected`在 viewmodel 上拥有一个属性并使用`checked`绑定而不是单击，并在 `IsAllSelected`(或者您也可以使用可写的计算 observable) 的 change 事件中执行选择逻辑。

我认为如果你想支持这样的场景，最终你将需要这样的东西：全选 - >手动取消选中每一行应该取消选中标题行等。

另一个使用`IsAllSelected`计算属性的[演示](http://jsfiddle.net/eTF2S/)

```
self.IsAllSelected = ko.computed({
        read: function () {
            var isAllSelected = true;
            ko.utils.arrayForEach(self.model.Things(), function (item) {
                isAllSelected = isAllSelected && item.IsSelected()
            });
            return isAllSelected;
        },
        write: function (value) {
            ko.utils.arrayForEach(self.model.Things(), function (item) {
                if (value) item.IsSelected(true);
                else item.IsSelected(false);
            });
        }
}); 
```

# algorithm - 组合学：试图计算算法（关于子集）

> ID：15544456
> 
> 赞同：0
> 
> 时间：2013-03-21T10:05:14.923
> 
> 标签：algorithm, combinatorics, subset

我正在尝试解决 TopCoder 上的问题。基本上我需要的是以下算法：

令 S = [1, 2, ..., n] 是一个序列。让 m 小于 n。

1) 找到大小为 m 的 S 的所有子序列（这很容易 - n^m）。

2) 找到大小为 m 的 S 的所有子序列，其中元素处于非递减顺序。

3) 找出大小为 m 的 S 的所有子序列，其中元素不允许重复（这也很容易 - (n!)/((nm)!）。

4) 找出大小为 m 的 S 的所有子序列，其中元素处于非递减顺序且不允许重复。

仍在尝试寻找第 2 部分和第 4 部分的公式。我们将不胜感激。

提前致谢。

编辑：

原始问题：

[https://docs.google.com/document/d/1X1VK8Vq2DlqMbZpXHGLoWv9ULfRLVoLtMTRRU5nh5qs/edit?usp=sharing](https://docs.google.com/document/d/1X1VK8Vq2DlqMbZpXHGLoWv9ULfRLVoLtMTRRU5nh5qs/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:11:02.553

要解决 4)，请注意没有重复“非减少”意味着“增加”。将由不重复元素`m`构建的所有长度序列的集合划分为由出现在子序列中的元素集合定义的等价类。`S`在每个等价类中，只有一个递增序列（按 排序的元素`<`）。每个等价类的大小是元素的排列数。因此 4)-序列的数量是`(n!)/((n-m)! * m!) = n \choose m`.

ad 2)，将序列建模为`S`. 这可以写成一个`(s_i, k_i), i=1..n; s_i \in S, k_i \in IN, \foreach p,q in {1..n}, p!=q: s_p != s_q`长度对的序列`n`。“非递减”意味着通过根据递增排列元素给出的序列的唯一允许排序`s_i`。因此唯一的自由度是出现次数，它必须服从求和到 m: 的约束`sum_{i=1..n} k_i = m`。

这个问题等同于具有（特定）限制和计算格路径的分区。我认为`IN^n`满足此条件的 n 元组数量没有封闭公式。

但是，有一个标准算法可以枚举所有可能性，例如。[这里](https://stackoverflow.com/questions/4632322/finding-all-possible-combinations-of-numbers-to-reach-a-given-sum)

# c++ - Red hat Enterprise Edition 4 GCC 编译器支持带有 BOM 的 utf8

> ID：15544457
> 
> 赞同：0
> 
> 时间：2013-03-21T10:05:16.143
> 
> 标签：c++, linux, gcc

Red Hat Enterprise Edition 4 gcc 编译器是否支持带有 BOM 文件的 UTF8？

如果是，我需要哪个 gcc 编译器版本来使用 BOM 编译以 UTF8 编码的 C++ 文件？

我目前正在使用**gcc 3.4.6 版**，它给了我以下错误：-

```
:1: error: stray '\239' in program
 1: error: stray '\187' in program
    error: stray '\191' in program 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:42:02.560

似乎只有[GCC 4.4 及更高版本](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=33415)支持带有 BOM 的 UTF-8。

GCC 4.4 是在[RHEL 6](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/compilers.html)中引入的，它也可以在 RHEL 5 中作为单独的包`gcc44`. 我不知道是否有适用于 RHEL4 的 GCC 4.4 包。

如果您必须使用 GCC 3.4.6，您可以尝试在构建系统中添加一个“预处理”步骤来删除 BOM。一个非常简单的例子（取自[这里](http://www.linuxask.com/questions/how-to-remove-bom-from-utf-8)）是：

```
tail --bytes=+4 source.cpp > sourceWithoutBOM.cpp 
```

# windows-phone-7 - 如何检查用户是否已经使用该应用程序 3 天排序

> ID：15544463
> 
> 赞同：1
> 
> 时间：2013-03-21T10:05:34.363
> 
> 标签：windows-phone-7, windows-phone

我正在编写一个 Windows Phone 8 应用程序，我想检查用户是否已经连续使用我的应用程序 3 天，至少每天一次。如果他们这样做，我会给他/她关于礼物的小费。

在这里我想知道如何检查用户是否连续使用我的应用程序 3 天（需要每天至少使用我的应用程序一次）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:08:50.313

将时间存储在您的应用程序存储中。

[http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

**更新：** 这将使它成为 4 U：

```
private void Application_Launching(object sender, LaunchingEventArgs e) {
    EnsureCheckThreeDaysInARow();
}

private void Application_Activated(object sender, ActivatedEventArgs e) {
    EnsureCheckThreeDaysInARow();
}

public bool EnsureCheckThreeDays() {
    IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;
    if (settings.Contains("threeMagicalDay"))
    {
        var data = new List<DateTime>();
        if (data.Count() >= 3 && !data.Any(a => a.Date == DateTime.Now.Date))
            data.Remove(data.Min());
        data.Add(DateTime.Now);
        var someTransform = data.OrderByDescending(a => a).Select(b => new Tuple<int,int,int>(b.Year,b.Month, b.Day)).Aggregate((c,d) => new Tuple<int,int,int>(c.Item1 - d.Item1, c.Item2 - d.Item2, c.Item3 - d.Item3));
        if (someTransform.Item1 == -DateTime.Now.Date.Year && someTransform.Item2 == -DateTime.Now.Date.Month && someTransform.Item3 == 0)
        {
            //There you go...
        }
        else
        {
            //Handle it...
        }
        settings["threeMagicalDay"] = data;
    }
    else 
    settings.Add("threeMagicalDay", new List<DateTime>(){DateTime.Now});

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:32:17.180

每次用户启动应用程序时，都会记录当前日期。（将其添加到您存储在隔离存储中的文件中的列表可能是最简单的方法。）

然后检查该列表以查看它是否还包括最近两天的条目。如果是这样，那么您知道您处于应该显示提示的情况。

您需要添加适当的逻辑以在适当的情况下从列表中删除旧数据，并且可能不会每天添加多个条目。您可能还需要考虑如何处理在第 3 天多次打开应用程序以及是否多次显示提示。

# python - 日期时间适用于 Windows，但不适用于 Debian

> ID：15544465
> 
> 赞同：1
> 
> 时间：2013-03-21T10:05:45.517
> 
> 标签：python, datetime, debian

尝试运行此代码时，我在 Debian 上遇到错误，但它可以在 Windows 上运行。

```
def checkTime():
    while True:
        with open('date.txt') as tar:
            target = tar.read()
            current = str(datetime.strptime(str(date.today()),'%Y-%m-%d'))[:-9]
            if datetime.strptime(current, '%Y-%m-%d') >= datetime.strptime(target, '%Y-%m-%d'):
                doSomething()
        sleep(10) 
```

它给了我这个错误：

```
File "/usr/lib/python2.6/_strptime.py", line 328, in _strptime
    data_string[found.end():])
ValueError: unconverted data remains: 
```

date.txt 包含：

```
2013-03-21 
```

两个系统具有完全相同的日期和时间设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:18:21.237

您的日期处理过于复杂。

这应该在任何平台上都可以正常工作：

```
with open('date.txt') as tar:
    target = tar.read().strip()
    if date.today() >= datetime.strptime(target, '%Y-%m-%d').date(): 
```

调用删除任何无关的`.strip()`空白（例如`\r`来自 windows 格式的`\r\n`CRNL 组合的行）。

我不确定你为什么要花这么多时间将今天的日期转换为字符串，将其解析为`datetime`对象，然后再次将其转换为字符串。在任何情况下，对象的*默认*字符串格式都`datetime.date`遵循 ISO8601，匹配`%Y-%m-%d`格式：

```
>>> import datetime
>>> str(datetime.date.today())
'2013-03-21' 
```

要将`datetime.date`对象转换为`datetime.datetime`对象，请使用该`.combine()`方法并`datetime.time`在混合中添加一个对象：

```
>>> datetime.datetime.combine(datetime.date.today(), datetime.time.min)
datetime.datetime(2013, 3, 21, 0, 0) 
```

通过调用实例，您可以再次获取`.date()`对象：`datetime.datetime``datetime.date`

```
>>> datetime.datetime.now().date()
datetime.date(2013, 3, 21) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:10:10.463

这可能是因为 'date.txt' 包含 Windows 样式的行尾 ('\r\n')，但 Unix (Debian) 只处理 '\n'。

尝试使用通用行结束打开文件：

```
open('date.txt','U') 
```

# eclipse - 使用 Eclipse 调试 Play 2.1

> ID：15544467
> 
> 赞同：2
> 
> 时间：2013-03-21T10:05:49.853
> 
> 标签：eclipse, debugging, playframework

我知道我的问题听起来很熟悉。但我无法调试我的 Play！通过 Eclipse 进行项目。我阅读了一些教程，但没有任何帮助。

前提：

1.  使用带有 Eclipse Juno 和 Play 2.1 的 Windows 8
2.  检查端口 9999 是否未使用
3.  创建一个游戏项目并“使之黯然失色”

工作流程：

```
1\. start play with "play debug run"
- http listening port = 9000 and jpda = 9999
2\. setup debug config: Java Remote Application; Socket Attach; host = locahost; port = 9999
3\. debug project 
```

--> 错误：无法连接到远程虚拟机。拒绝连接。连接被拒绝：连接

我还尝试以管理员身份运行 eclipse，结果相同。我听说可以更改 jdpa 端口，但我没有意义，因为 9999 是免费的。另外我想知道如何在播放控制台中启动调试模式？我只能通过“播放调试运行”开始调试

非常感谢

G。

几乎相同的问题：[在 Eclipse 中调试 Playframework 2.0](https://stackoverflow.com/questions/9778849/debug-playframework-2-0-in-eclipse)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T09:09:59.780

You should first do

play debug run

and then, if this starts as expected and says

Listening for transport dt_socket at address: 9999

attach in eclipse to the running debug session with Scala debugger (Socket Attach) and port 9999

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T21:28:07.203

这听起来很傻，但请确保您正在浏览器中访问 url，这将导致您的控制器操作在执行以下操作后在 eclipse 中被击中：

1.  确保没有其他 java 实例正在运行
2.  在 cmd 行中，转到您的 play proj 目录并输入“play debug run”
3.  您应该看到“在地址：9999 上侦听传输 dt_socket”和“侦听 http on....”
4.  在eclipse中，右键单击您的项目并选择调试-->调试配置。连接类型为“Standard(Socket Attach)”，端口为“9999”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T16:31:52.843

在阻止事件后检查您的防火墙事件...我在 Eclipse+GWT+jpda 调试中遇到了类似的问题，我的 Comodo Internet Security Suite 已被阻止

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T11:34:44.223

听起来有点傻，但请确保您尚未调试。和你一样的配置，我的经历是一样的，直到我打开 Eclipse Debug Perspective 并意识到有一个打开的连接。要强制 Eclipse 打开此透视图，请在索引视图控制器中放置一个断点并在不使用缓存的情况下刷新页面（Google Chrome 中的 SHIFT + F5）。

希望它可以帮助你。

# javascript - 如何在用户未通过身份验证时创建模式弹出窗口以登录？

> ID：15544471
> 
> 赞同：0
> 
> 时间：2013-03-21T10:06:06.487
> 
> 标签：javascript, jquery, asp.net-mvc, razor, asp.net-mvc-4

我有这个显示数据表的视图：

```
@if(Request.IsAuthenticated){
    <fieldset id="detailPrix">
        <legend>Details prix</legend>
            <div class="scrollableContainer">
            <div class="scrollingArea">
            <table class="cruises scrollable">
                <thead>
                    <tr>
                        <th>
                            Carburant
                        </th>
                        <th>
                            Prix
                        </th>
                        <th>
                            Date d'ajout
                        </th>
                        <th>
                            Mettre à jour
                        </th>
                    </tr>
                </thead>
                @for(int index =0; index<Model.carburants.Count;index++){
                    <tbody>
                        <tr>
                            <td>
                                @Html.DisplayName(Model.carburants[index].data.ToString())
                            </td>
                            <td>
                                @Html.DisplayName(Model.prixCarburants[index].ToString())
                            </td>
                            <td>
                                @Html.DisplayName(Model.dateAjoutCarburants[index].ToString())
                            </td>
                            <td>
                                @Html.ActionLink("Modifier", "ModifierPrix", new {carbuId = Model.carburants[index].id, stationId= Model.station.id, Myvmsd=Model, index=index, prix=Model.prixCarburants[index]})
                            </td>
                        </tr> 
                    </tbody>
                }
            </table>
        </div>
    </div>
    </fieldset>
}
else{
     // If the user didn't authenticated, I want to display the popup modal to login (in JQuery or JS). 
} 
```

我希望我的登录视图进入模式弹出窗口。这是我的登录视图：

```
<section id="loginForm">
<h2>Connexion avec un compte local.</h2>
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Formulaire de connexion.</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </li>
            <li>
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
            </li>
        </ol>
        <input id="LogIn" type="submit" value="Log in" />
    </fieldset>
    <p>
        @Html.ActionLink("Register", "Register") Si vous n'avez pas de compte.
    </p>
}
</section>

<section class="social" id="socialLoginForm">
    <h2>Connexion via Les réseaux sociaux</h2>
    @Html.Action("ExternalLoginsList", new { ReturnUrl = ViewBag.ReturnUrl })
</section> 
```

例如，可以将此视图显示到 JQuery 中的模式弹出窗口中吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:11:44.350

你可以试试下面的视图：

```
 <div id="login">
        <section id="loginForm">
        <h2>Connexion avec un compte local.</h2>
        @using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)

            <fieldset>
                <legend>Formulaire de connexion.</legend>
                <ol>
                    <li>
                        @Html.LabelFor(m => m.UserName)
                        @Html.TextBoxFor(m => m.UserName)
                        @Html.ValidationMessageFor(m => m.UserName)
                    </li>
                    <li>
                        @Html.LabelFor(m => m.Password)
                        @Html.PasswordFor(m => m.Password)
                        @Html.ValidationMessageFor(m => m.Password)
                    </li>
                    <li>
                        @Html.CheckBoxFor(m => m.RememberMe)
                        @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
                    </li>
                </ol>
                <input id="LogIn" type="submit" value="Log in" />
            </fieldset>
            <p>
                @Html.ActionLink("Register", "Register") Si vous n'avez pas de compte.
            </p>
        }
        </section>
    </div>
<input type="button" id="loginbtn" />

    <script>
   var $login=  $('#login').dialog({
                autoOpen: false,
                title: '',
                modal: true,
                width: 50,
                height: 50
            });

    // you need to write button click event to open it
    $('#loginbtn').click(function(){
    $login.dialog('open');
    });
    </script> 
```

请问有什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:39:42.180

我找到了解决方案：

在 else 语句中，我将最后一个更改为`<td>` ：

```
<td>
    <p>
        @Html.ActionLink("Se logger", "Login", "Account", null, new { @class = "openDialog", data_dialog_id = "loginDialog", data_dialog_title = "Log in"})
    </p>
</td> 
```

在我的 _Layout 我添加了这个`<script>`：

```
<script type="text/javascript">
    $.ajaxSetup({ cache: false });
    $(document).ready(function () {
        $(".openDialog").live("click", function (e) {
            e.preventDefault();

            $("<div></div>")
                .addClass("dialog")
                .attr("id", $(this)
                .attr("data-dialog-id"))
                .appendTo("body")
                .dialog({
                    title: $(this).attr("data-dialog-title"),
                    close: function () { $(this).remove(); },
                    modal: true,
                    height: 250,
                    width: 400,
                    left: 0
                })
            .load(this.href);
        });

        $(".close").live("click", function (e) {
            e.preventDefault();
            $(this).closest(".dialog").dialog("close");
        });
});
</script> 
```

它现在完美运行。感谢您的回答。

# java - 在 Java 中尝试语音识别时出现 ClassNotFoundException

> ID：15544473
> 
> 赞同：0
> 
> 时间：2013-03-21T10:06:24.317
> 
> 标签：java, speech-recognition, cmusphinx

```
public static void main(String[] args) {  try {
            URL url;
            if (args.length > 0) {
                url = new File(args[0]).toURI().toURL();
            } else {
                url = HelloWorld.class.getResource("helloworld.config.xml");
            }

            System.out.println("Loading...");

            ConfigurationManager cm = new ConfigurationManager(url);
            System.out.println("Configured Successfully");
        Recognizer recognizer = (Recognizer) cm.lookup("recognizer"); // I found exception in this line
        System.out.println("Recognizer Ready");
        Microphone microphone = (Microphone) cm.lookup("microphone");
        System.out.println("Microphone Ready");

            /* allocate the resource necessary for the recognizer */
            recognizer.allocate();

            /* the microphone will keep recording until the program exits */
        if (microphone.startRecording()) {

        System.out.println("Say: (Good morning | Hello) " +
                     "( Bhiksha | Evandro | Paul | Philip | Rita | Will )");

        while (true) {
            System.out.println          ("Start speaking. Press Ctrl-C to quit.\n");

                    /*
                     * This method will return when the end of speech
                     * is reached. Note that the endpointer will determine
                     * the end of speech.
                     */ 
            Result result = recognizer.recognize();

            if (result != null) {           String resultText = result.getBestFinalResultNoFiller();            System.out.println("You
said: " + resultText + "\n");
            } else {            System.out.println("I can't hear what you said.\n");
            }       }
        } else {        System.out.println("Cannot start microphone.");         recognizer.deallocate();        System.exit(1);
        }
        } catch (IOException e) {
            System.err.println("Problem when loading HelloWorld: " + e);
            e.printStackTrace();
        } catch (PropertyException e) {
            System.err.println("Problem configuring HelloWorld: " + e);
            e.printStackTrace();
        } catch (Exception e) {
            System.err.println("Problem creating HelloWorld: " + e);
            e.printStackTrace();
        } } 
```

使用此代码，我得到以下异常：

```
class not found !java.lang.ClassNotFoundException:
 edu.cmu.sphinx.model.acoustic.WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.Model
 Problem configuring HelloWorld: Property Exception component:'flatLinguist'
 property:'acousticModel' - mandatory property is not set!
 edu.cmu.sphinx.util.props.InternalConfigurationException
 Property Exception component:'flatLinguist' property:'acousticModel' - mandatory
 property is not set!
 edu.cmu.sphinx.util.props.InternalConfigurationException 
```

当我运行我的程序时会发生此错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:08:02.680

从日志看来，您正在使用引用类 edu.cmu.sphinx.model.acoustic.WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz.Model 的过时 config.xml 文件

这个类很久以前从 Sphinx4 中删除了

下载最新的 sphinx4 源代码并使用最新的 Sphinx4 的演示，包括配置文件，一切都会正常工作。

# app-store-connect - 我可以在早期版本“等待审核”时创建我的应用程序的新版本吗？

> ID：15544476
> 
> 赞同：0
> 
> 时间：2013-03-21T10:06:26.970
> 
> 标签：app-store-connect

我有一个提交给 Apple 的 iOS 应用程序的 1.0 版本。我将它上传到 iTunes Connect，它被标记为“等待审核”。

我必须做一个小改动，所以我有一个新版本 1.0.1，我想上传并进入队列等待批准。过去，当我想要进行更新时，我可以在我的应用程序的 iTunes Connect 页面上的版本下单击“添加版本”，但由于某种原因，该选项不存在。

我是否必须等到我的应用程序被批准（或拒绝）才能创建和上传我的更改？**或者，有没有办法避免这种情况，以便我可以减少我的固定版本进入商店之前的时间？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:17:29.483

是的，您可以上传新的二进制文件，只是您必须知道它将重新启动整个“等待审核”过程。转到 iTunes 连接中的应用详细信息，然后转到“二进制详细信息”，您应该会在右上角看到“拒绝二进制”按钮。拒绝二进制文件后，您将能够上传新的二进制文件。

# regex - 用于在 Python 中重复字符串中的字符的正则表达式

> ID：15544480
> 
> 赞同：2
> 
> 时间：2013-03-21T10:06:44.900
> 
> 标签：regex, python-2.7

我是正则表达式的新手。我有一个正则表达式，它从字符串中删除重复字符。

```
>>> self.repeat_regexp = re.compile(r'(\w*)(\w)\2(\w*)')
>>> self.repl = r'\1\2\3' 
```

上面两行代码去掉了重复的字符。例如，`loooooooove`转到`love`。

但我想更改正则表达式模式，以便仅在重复字符重复超过 3 次时才替换。预期输出：

```
cannot  ---> cannot
loooooooove ----> love 
```

我不理解正则表达式`r'(\w*)(\w)\2(\w*)'` ，`r'\1\2\3'` 如果以可理解的方式解释上述正则表达式会很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:34:47.310

> 我不理解正则表达式 --> r'(\w*)(\w)\2(\w*)' 和 r'\1\2\3' 如果将上述正则表达式解释为可以理解的方式。

好的，我们走吧：

`(\w*)`是任何类型的*单词字符*（字母、数字、下划线 - 因语言环境设置而异，可以包括带重音的法语字母），零次或多次（通过使用*量词* `*`）。

接下来它尝试只匹配一个单词字符`(\w)`——然后再次使用相同的字符`\2`，这是对表达式中第二个匹配项的*反向引用*`\w`，它是之前匹配的字符。

之后，又是零个或多个单词字符，与开头相同。

如果该表达式匹配，则将其`self.repl = r'\1\2\3'`替换——再次使用反向引用——使用搜索模式中的括号*捕获子模式的匹配项。*

所以每个匹配的部分都会被自己替换——除了重复的字符 match `\2`，它没有分组括号。

因此，如果您想让重复的字符至少出现 3 次，则将表达式的那部分修改为`(\w)(\2{2,})'`–`{2,}`是另一个量词，表示“仅当前面的模式至少出现两次时才匹配”。（*至少两次*，因为第一个字符已经与前面的字符匹配`(\w)`。）

虽然我没有让它使用前导和尾随工作`(\w*)`- 但由于这些也匹配零字字符，我认为它们可以完全抛弃。

所以这应该做你想要实现的目标：

```
self.repeat_regexp = re.compile(r'(\w)(\1{2,})')
self.repl = r'\1' 
```

（由于我在这里删除了主要的捕获子模式，`\2`因此被替换为`\1`，引用了现在的第一个捕获子模式。）

# extjs - 如何禁用单行的操作列项？

> ID：15544482
> 
> 赞同：10
> 
> 时间：2013-03-21T10:06:46.147
> 
> 标签：extjs, grid, extjs4, action, extjs4.1

考虑这个 JSON 示例：

```
[{id:1,editable:true},{id:2,editable:false}] 
```

这些记录即将加载到存储中，然后显示在网格面板中。此网格有一个用于编辑目的的操作列项。我正在寻找一种仅在第二行禁用“编辑”按钮而不在渲染后执行计算的方法。我想使用一个像[`renderer`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-renderer)属性一样工作的内置功能，而不是在渲染网格后循环通过商店来更新每一行。

ExtJS 4.1.1 是否提供这种功能？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-12T09:15:50.530

您可以使用设置 isDisabled 配置（至少从版本 4.2.1 开始）：

```
{
    xtype:'actioncolumn',
    width:20,
    items: [
        {
            icon: 'app/images/edit.png',
            tooltip: 'Edit this row',
            handler: function(gridview, rowIndex, colIndex, item, e, record, row) {
                var grid=gridview.up('grid');
                // You need to listen to this event on your grid.
                grid.fireEvent('editRecord', grid, record);
            },
            isDisabled: function(view, rowIndex, colIndex, item, record) {
                // Returns true if 'editable' is false (, null, or undefined)
                return !record.get('editable');
            }
    ]
} 
```

当 isDisabled(..) 返回 true 时，图标会变得模糊，并且不会在鼠标单击时触发处理程序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T13:48:05.297

我只想这样说开始：我不惜一切代价避免使用操作列，它完全无法执行任何类型的渲染逻辑（例如每行不同的图像，并根据行模型有条件地显示）。而是定义一个常规列来呈现图像并利用列中的单击事件。这是我的代码中的一个示例：

```
{
    header:    "&nbsp;",
    dataIndex: "some_index",
    width:     26,
    renderer: function(value, metaData){
        metaData.style += "padding:0px;";
        if(value)
            return "&nbsp;<img src=\"extjs/4.0/sms/icons/fam/magnifier.png\"/>";
        return value;
    },
    listeners: {
        click: function(gridView, htmlSomething, rowIndex, columnIndex, theEvent){
            var store = myGrid.getStore();
            var record = store.getAt(rowIndex);
            if(record.get("some_index"))
                //do action
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-28T10:46:58.797

我在 Sencha 论坛中找到了以下解决方案： 除了此处已经描述的“isDisabled”功能之外，您还可以使用以下配置来更改（或隐藏）要根据记录显示的图标：

```
getClass: function(value,metadata,record){
    if (record.get('description')){  //read your condition from the record
        return 'icon-pencil-go';    // add a CSS-Class to display what icon you like
    } else {
        return '';        //add no CSS-Class
    }
} 
```

我的 CSS 类定义为：

```
.icon-pencil-go {
    background-image: url('../images/icons/famfamfam/pencil_go.png') !important;
} 
```

因为无论如何我都是通过 CSS 显示图标，所以这对我来说是一种动态更改图标的快速方法。请注意，通过“isDisabled”禁用处理程序仍然是必要的，否则即使未显示图标，如果单击操作列，处理程序也会启动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-13T16:03:39.557

在路易斯发布他的答案之前，我已经忘记了这个问题。我最终决定重写 ActionColumn 以添加缺少的功能。这是代码：

```
Ext.grid.column.Action.override({
    defaultRenderer: function (v, meta) {
        var me = this,
            disabled, tooltip,
            prefix = Ext.baseCSSPrefix,
            scope = me.origScope || me,
            items = me.items,
            len = items.length,
            i = 0,
            item;
        v = Ext.isFunction(me.origRenderer) ? me.origRenderer.apply(scope, arguments) || '' : '';
        meta.tdCls += ' ' + Ext.baseCSSPrefix + 'action-col-cell';
        for (; i < len; i++) {
            item = items[i];
            disabled = item.disabled || (item.isDisabled ? item.isDisabled.apply(item.scope || scope, arguments) : false);
            tooltip = disabled ? null : (item.tooltip || (item.getTip ? item.getTip.apply(item.scope || scope, arguments) : null));
            if (!item.hasActionConfiguration) {
                item.stopSelection = me.stopSelection;
                item.disable = Ext.Function.bind(me.disableAction, me, [i], 0);
                item.enable = Ext.Function.bind(me.enableAction, me, [i], 0);
                item.hasActionConfiguration = true;
            }
            v += '<img alt="' + (item.altText || me.altText) + '" src="' + (item.icon || Ext.BLANK_IMAGE_URL) +
            '" class="' + prefix + 'action-col-icon ' + prefix + 'action-col-' + String(i) + ' ' + (disabled ? prefix + 'item-disabled' : ' ') +
            ' ' + (Ext.isFunction(item.getClass) ? item.getClass.apply(item.scope || scope, arguments) : (item.iconCls || me.iconCls || '')) + '"' +
            (tooltip ? ' data-qtip="' + tooltip + '"' : '') + ' />';
        }
        return v;
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-18T15:03:34.450

我在 ExtJs 6.0.1 版本中使用了以下内容并且效果很好。使用“getClass”配置。返回 CSS 类以应用于图标图像的函数。

```
 {
                  xtype: 'actioncolumn',
                  flex: 1,
                  text: 'Action'
                  items: [{
                      tooltip: 'Import',
                      getClass: function (value, meta, record) {
                         if(record.get('Name') == 'disable'){
                             return 'x-hidden'; // when u want to hide icon
                         }
                      }
                         return 'x-grid-icon' ; // show icon

                  }]
                } 
```

# python - 使用python（xlrd包）从excel表中提取数据时。也得到一些垃圾数据

> ID：15544484
> 
> 赞同：0
> 
> 时间：2013-03-21T10:06:47.443
> 
> 标签：python, excel, xlrd

我正在使用 python（xlrd 包）从 excel 表中提取数据。随着原始数据我得到一些垃圾数据，请帮我删除那些

获取诸如 [text:u 之类的垃圾值，如下所示：

[文字：u'NAME'，文字：u'JACK']

```
<CODE>

from xlrd import open_workbook

book = open_workbook('C:/Users/arun/Desktop/EX.xls')
sheet0 = book.sheet_by_index(0)
#sheet1 = book.sheet_by_index(1)

print sheet0.col(0) 
print sheet0.col(2)
print sheet0.col(3)
print sheet0.col(4)
print sheet0.col(5)
print sheet0.col(6)
print sheet0.col(7)
print sheet0.col(8)
print sheet0.col(9)
print sheet0.col(10)
print sheet0.col(12)
print sheet0.col(13)
print sheet0.col(14)
print sheet0.col(15)
print sheet0.col(16)
print sheet0.col(17)
print sheet0.col(18)
print sheet0.col(19)
print sheet0.col(20)
print sheet0.col(21)
print sheet0.col(22)
print sheet0.col(23)
print sheet0.col(24)
print sheet0.col(25)
print sheet0.col(26)
print sheet0.col(27)

</CODE> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:26:15.623

您的“垃圾”看起来像 xlrd`Cell`类型为“文本”的列表。也就是说，我不认为它是垃圾；它是 xlrd 创建的正常返回值。如果您想要列中的值（例如，第 0 列），请尝试

```
print sheet0.col_values(0) 
```

见[https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#sheet.Sheet.col_values-method](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#sheet.Sheet.col_values-method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T18:39:46.157

我发现使用 str(sheet0.col(0)) 会删除 text:u 输出。

# nosql - Neo4j 如何为节点的属性添加多个值

> ID：15544486
> 
> 赞同：3
> 
> 时间：2013-03-21T10:06:53.010
> 
> 标签：nosql, neo4j

当我为其中一个问题创建节点时，我被卡住了，在查看文档后我意识到我找不到节点的多值属性分配

**例如：节点 1 有属性网站访问，因为它不能是单个网站，如何将属性添加到节点 1“网站”，以便它可以采用两个值，例如 www.abc.com www.def.com**

```
node1["websites"] = "www.abc.com" "www.def.com" 
```

这样在访问节点的每个属性时，可以单独访问节点属性中的每个网站。

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:09:22.030

以图形方式为每个网站创建一个节点，而不是简单地在 node1 和网站节点之间创建关系不是更好吗？

无论如何，对于修改数组，您可以查看：[https ://groups.google.com/forum/?fromgroups=#!topic/neo4j/bY5GXWYpM1k](https://groups.google.com/forum/?fromgroups=#!topic/neo4j/bY5GXWYpM1k)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T13:12:37.000

您可以使用数组作为“网站”属性的值：http: [//docs.neo4j.org/chunked/milestone/graphdb-neo4j-properties.html](http://docs.neo4j.org/chunked/milestone/graphdb-neo4j-properties.html)

# weka - 从命令行输出 Weka 中的混淆矩阵

> ID：15544487
> 
> 赞同：6
> 
> 时间：2013-03-21T02:16:35.640
> 
> 标签：weka

我已经使用 Weka 3.7.9 将一个随机森林模型保存到一个文件中，现在我正在尝试将它与其他（非常大的）集合（在 Amazon EC2 中的一些大型机器上）进行评估。我正在使用以下命令行：

```
> java -server -Xmx60000m -cp weka.jar weka.classifiers.Evaluation 
weka.classifiers.trees.RandomForest -T test.arff -l random-forest.model
-i -no-cv 
```

但是，我唯一的输出是这样的：

```
=== Error on test data ===

Correctly Classified Instances     3252532               80.0686 %
Incorrectly Classified Instances    809651               19.9314 %
Kappa statistic                          0.2884
Mean absolute error                      0.2539
Root mean squared error                  0.3608
Coverage of cases (0.95 level)          98.7413 %
Total Number of Instances          4062183 
```

而我正在寻找这样的东西：

```
=== Detailed Accuracy By Class ===

                 TP Rate  FP Rate  Precision  Recall   F-Measure  MCC      ROC Area  PRC Area  Class
                 0.804    0.295    0.731      0.804    0.766      0.512    0.826     0.803     buyer
                 0.705    0.196    0.783      0.705    0.742      0.512    0.826     0.798     non-buyer
Weighted Avg.    0.755    0.245    0.757      0.755    0.754      0.512    0.826     0.801     

=== Confusion Matrix ===

     a     b   <-- classified as
 61728 15004 |     a = buyer
 22662 54066 |     b = non-buyer 
```

请注意，即使我再次运行完整的训练方法，如下所示：

```
> java -Xmx60000m -cp weka.jar weka.classifiers.Evaluation 
weka.classifiers.trees.RandomForest -t train.arff -T test.arff 
-I 10 -K 0 -S 1 -num-slots 8 -d random-forest.model -i -no-cv 
```

我仍然没有显示测试数据的混淆矩阵（仅适用于训练数据）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:25:04.100

当您省略该`-no-cv`选项时，它会起作用。

# jquery - 数据表和 jQuery "on" 方法

> ID：15544491
> 
> 赞同：0
> 
> 时间：2013-03-21T10:07:17.077
> 
> 标签：jquery, datatables

我正在尝试创建一个动态表，一旦单击行，它应该在另一个表中显示更多信息。

我是根据我一年前写的一些代码来做这个的，在那里我使用了 jQuery live 方法。截至目前，此方法已不存在，我切换到 on 方法。

现在，问题是，虽然这段代码实际上触发了 Datatable 的创建，但它不会绑定行上的 click 事件。当我点击它时，什么也没有发生。

这是负责的 Javascript 代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#overview").dataTable({
        aoColumnDefs:[{
            sWidth: "20px",
            aTargets: [0]
        }],
        bLengthChange: false,
        oLanguage: {
            sProcessing:   "Bitte warten...",
            sLengthMenu:   "_MENU_ Einträge anzeigen",
            sZeroRecords:  "Keine Einträge vorhanden.",
            sInfo:         "_START_ bis _END_ von _TOTAL_ Einträgen",
            sInfoEmpty:    "0 bis 0 von 0 Einträgen",
            sInfoFiltered: "(gefiltert von _MAX_  Einträgen)",
            sInfoPostFix:  "",
            sSearch:       "Suchen",
            oPaginate: {
                sFirst:    "Erster",
                sPrevious: "Zurück",
                sNext:     "Nächster",
                sLast:     "Letzter"
            }
        },
        iDisplayLength: 10,
        sAjaxSource: "<%=ivy.html.startref("API/WebAPI/antraege.ivp")%>?asUid=<%=ivy.html.get("in.asUid")%>"
    });

    $(".dataset").on("click", function() {
        antragid = this.id;

        $.ajax({
            url: "<%=ivy.html.startref("API/WebAPI/antrag.ivp")%>",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: {
                id: antragid
            },
            success: function(data) {
                for (var key in data) {
                    $('#'+key).html(data[key]);
                }
            }
        })
    })
})
</script> 
```

现在，因为我在使用模板的工作流工具上使用它，所以我不能将此代码放入标题中（否则它将被加载到使用此模板的每个页面上），所以我被迫放到body标签里面，不知道会不会影响这个问题。

现在，奇怪的部分来了：当我复制上面的代码并在 Chrome JS 控制台中执行它时，它确实创建了事件绑定，以便将详细信息放入另一个表中。

难道我做错了什么？使用 live 方法的应用程序仍然可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:08:44.550

您需要将 on 事件委托给最接近的静态父元素....以便单击以在动态添加的元素中工作

尝试这个

```
 $(document).on("click",".dataset",function() {
 ..... 
```

`#overview`将其委派给文档工作..但是如果您可以将其委派给调用单击时文档中存在的最接近的父级（我猜是您的情况），那就更好了..

更多关于[on()](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)委托事件

# javascript - 同源策略 iframe 解决方案

> ID：15544493
> 
> 赞同：0
> 
> 时间：2013-03-21T10:07:29.367
> 
> 标签：javascript, jquery, html, same-origin-policy

由于 JavasSript 中的相同来源策略，我们无法访问第二个域。

是否可以有两个从不同服务器加载的独立框架（例如 Iframe）。每个框架应该只访问他自己的html和服务器。你怎么看？

我收到了一些错误消息，但我认为这只是因为一个 javascript 尝试访问 _top 窗口。

所以我想知道是否有可能让来自不同服务器的两个独立帧执行 JavaScript 并将 Ajax 请求发送到他们自己的服务器。

不：这不是一个重复的问题。由于其他讨论不是关于框架解决方案。

# python - 河内塔与相邻限制

> ID：15544501
> 
> 赞同：3
> 
> 时间：2013-03-21T10:07:57.450
> 
> 标签：python, algorithm

解决具有相邻限制[的河内塔。](http://en.wikipedia.org/wiki/Tower_of_hanoi)我试图环顾四周，但找不到任何线索。

到目前为止我尝试过的是：

```
def hanoi(n, source, helper, target):
    print "hanoi( ", n, source, helper, target, " called"
    if n>0:
        hanoi(n-1, source, helper, target)
        if source[0]:
             if source[0][-1] == 1:
                 move(source, helper)
                 move(helper, target)
        else:
            move(source, helper)
            hanoi(n-1, target, helper, source)
    hanoi(n-1, helper, target, source)
    hanoi(n-1, source, helper, target)

def move(s, d):
    disk = s[0].pop()
    print "moving " + str(disk) + " from " + s[1] + " to " + d[1]
    d[0].append(disk)

source = ([2,1], "source")
target = ([], "target")
helper = ([], "helper")
hanoi(len(source[0]),source,helper,target) 
```

仅适用于 2 个磁盘。谢谢

我找到了这个很好的数学解释[http://www.cse.cuhk.edu.hk/~chi/csc2110-2009/notes/T10.pdf](http://www.cse.cuhk.edu.hk/~chi/csc2110-2009/notes/T10.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:32:19.130

# 详细的实现

乍一看，您似乎必须区分可以直接从当前源移动到当前目标的情况，以及必须分两步移动最大磁盘的情况。以下实现可以做到这一点：

```
class Stack(object):
    def __init__(self, index, name, disks):
        self.index = index
        self.name = name
        self.disks = disks
    def __str__(self):
        return self.name
    def __repr__(self):
        return 'Stack(%r, %r, %r)' % (self.index, self.name, self.disks)
    def is_adjacent(self, other):
        return other.index in (self.index + 1, self.index - 1)
    def push(self, disk):
        assert len(self.disks) == 0 or self.disks[-1] > disk
        self.disks.append(disk)
    def pop(self):
        return self.disks.pop()

class Hanoi(object):

    def __init__(self, n):
        source = Stack(0, "source", range(n, 0, -1))
        helper = Stack(1, "helper", [])
        target = Stack(2, "target", [])
        self.stacks = [source, helper, target]
        self.hanoi(n, source, target)

    def hanoi(self, n, source, target):
        """Move n disks from source to target using remaining stack"""
        helper = self.stacks[3 - source.index - target.index]
        if n == 0:
            return
        if source.is_adjacent(target):
            self.hanoi(n - 1, source, helper)
            self.move(source, target)
            self.hanoi(n - 1, helper, target)
        else:
            assert helper.is_adjacent(source) and helper.is_adjacent(target)
            self.hanoi(n - 1, source, target)
            self.move(source, helper)
            self.hanoi(n - 1, target, source)
            self.move(helper, target)
            self.hanoi(n - 1, source, target)

    def move(self, s, d):
        assert s.is_adjacent(d)
        disk = s.pop()
        print "moving %d from %s to %s" % (disk, s, d)
        d.push(disk)

Hanoi(5) 
```

该`Stack`对象有助于将有关您的一个堆栈的所有内容保持在一起：名称、位置及其相邻性以及当前的磁盘序列。如果添加第三个元素来保存该索引，则可以使用元组，但我认为 OOP 更直观。

该类`Hanoi`将一组堆栈放在一起。这允许该`hanoi`方法仅指定源和目标，同时推断第三个堆栈。您可以用不同的方式编写代码，但我发现省略帮助程序会使这些递归调用更容易理解：现在对于单磁盘`move`和多磁盘`hanoi`，您都指定源和目标，而不是第三个堆栈。

# 简化空间

现在，如果您仔细观察，您会发现递归调用总是针对不相邻的堆栈。因此，如果您的堆栈顺序确实是源和目标不相邻，那么所有递归调用都将使用`else`我的代码的分支，并且您可以缩短内容以避免区分大小写并始终使用该`else`分支。不过，就正在发生的事情而言，我发现上面更冗长的代码更容易理解。

# jquery - 谷歌条形图（有过滤器），每列的条形图有不同的颜色

> ID：15544505
> 
> 赞同：0
> 
> 时间：2013-03-21T10:08:02.120
> 
> 标签：jquery, bar-chart, google-visualization

下面是我用于 google-chart 的 javascript

```
<script type="text/javascript">
    google.load('visualization', '1.1', {packages: ['controls']});
</script>

<script type="text/javascript">
    function drawVisualization() {
        // Prepare the data
        var data = google.visualization.arrayToDataTable([
                 ['Country', 'Position', 'Prosthethis type', 'Units'],
                 ['Europe', 'Aortic',  'Mechanical',  5007],
                 ['Europe', 'Aortic',  'Biological',  15434],
                 ['Europe', 'Mitral',  'Mechanical',  1974],
                 ['Europe', 'Mitral',  'Biological',  3550],
                 ['France', 'Aortic',  'Mechanical',  803],
                 ['France', 'Aortic',  'Biological',  2277],
                 ['France', 'Mitral',  'Mechanical',  229],
                 ['France', 'Mitral',  'Biological',  436]
               ]);

        var countryPicker = new google.visualization.ControlWrapper({
                                'controlType': 'CategoryFilter',
                                'containerId': 'control4',
                                'options': {
                                    'filterColumnLabel': 'Country',
                                    'ui': {
                                        'labelStacking': 'vertical',
                                        'allowTyping': false,
                                        'allowMultiple': false
                                    }
                                },
                                'state': {'selectedValues': ['Europe']}
                            });

        var regionPicker = new google.visualization.ControlWrapper({
                                'controlType': 'CategoryFilter',
                                'containerId': 'control5',
                                'options': {
                                    'filterColumnLabel': 'Position',
                                    'ui': {
                                        'labelStacking': 'vertical',
                                        'allowTyping': false,
                                        'allowMultiple': false
                                    }
                                }
                            });

        var cityPicker = new google.visualization.ControlWrapper({
                                'controlType': 'CategoryFilter',
                                'containerId': 'control6',
                                'options': {
                                    'filterColumnLabel': 'Prosthethis type',
                                    'ui': {
                                        'labelStacking': 'vertical',
                                        'allowTyping': false,
                                        'allowMultiple': false
                                    },
                                }
                            });

        var barChart = new google.visualization.ChartWrapper({
                                'chartType': 'BarChart',
                                'containerId': 'chart3',
                                'options': {
                                    'width': 400,
                                    'height': 300,
                                    'chartArea': {top: 0, right: 0, bottom: 0}
                                },
                                // Configure the barchart to use columns 2 (City) and 3 (Population)
                                'view': {'columns': [2, 3]}

                            });

                            new google.visualization.Dashboard(document.getElementById('visualization2')).
                                // Configure the controls so that:
                            // - the 'Country' selection drives the 'Region' one,
                            // - the 'Region' selection drives the 'City' one,
                            // - and finally the 'City' output drives the chart
                            bind(countryPicker, regionPicker).
                                bind(regionPicker, cityPicker).
                                bind(cityPicker, barChart).
                                // Draw the dashboard
                            draw(data);
    }

    google.setOnLoadCallback(drawVisualization);
</script> 
```

这是我的 HTML 页面....

```
 <html>
    <head>
        <title>Untitled Document</title>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load('visualization', '1', {packages: ['corechart']});
        </script>
    </head>
    <body>               
        <table width="100%" border="1" cellspacing="0" cellpadding="5" bordercolor="#333333">
            <tr>
                <td bgcolor="#333333" class="heading-text">TEST</td>
            </tr>
            <tr>
                <td bgcolor="#FFFFFF" class="text" align="center" id="visualization2"><br/><br/>
                    <table>
                        <tr style='vertical-align: top'>
                            <td style='width: 300px; font-size: 0.9em;'>
                                <div id="control4"></div>
                                <div id="control5"></div>
                                <div id="control6"></div>
                            </td>
                            <td style='width: 600px'>
                                <div style="float: left;" id="chart3"></div>
                                <div style="float: left;" id="chart4"></div>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </td>
    </tr>
</table>
</body>
</html>* 
```

我只想要在这张图中做一件事：我想要红色的“生物”列和蓝色的“机械”列。

目前所有列都是蓝色的。

我找到了许多不同颜色列的网站.....但它们对我不起作用。

请帮我。

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T11:21:08.297

这是一个解决方案。您需要添加

```
series: [{color: 'blue', visibleInLegend: true}, 
           {color: 'red', visibleInLegend:false}] 
```

在您的选择中。

这也不是确切的解决方案。这是一种解决方法，您可以添加重复列并为所有其他数据隐藏该列，除了您需要不同颜色的数据。

这是工作[示例。](http://jsfiddle.net/ajMEn/)有关更多与谷歌图表相关的查询，请查看此内容。[jqfaq.com](http://jqfaq.com)

# nhibernate - NHibernate 使用 Cascade 执行删除。所有导致 N+1 删除

> ID：15544507
> 
> 赞同：2
> 
> 时间：2013-03-21T10:08:06.490
> 
> 标签：nhibernate

我有两个实体密码和密码哈希。Password 有一组 PasswordHashes（这些是具有不同掩码的哈希）。

当我删除密码时，我希望所有关联的 PasswordHash 也被删除。

我做了这样的映射：

```
mapping.HasMany(x => x.PasswordHashes)
            .Cascade
            .All()
            .Inverse()
            .ReferencedBy(x => x.Password); 
```

我希望生成两个查询：

```
DELETE FROM "PasswordHash" WHERE "IdPassword" = :p0 
```

显然

```
DELETE FROM "Password" WHERE "IdPassword" = :p0 
```

相反，NHibernate 生成了 N+1 个查询，如下所示：

```
DELETE FROM "PasswordHash" WHERE "IdPasswordHash" = :p0 (N) 
```

和

```
DELETE FROM "Password" WHERE "IdPassword" = :p0 (1) 
```

如何将这种行为更改为更优化？

编辑：删除代码：

```
session.Delete(password);
session.Flush(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T23:23:18.487

`DELETE`根据我的研究，在当前版本的 NHibernate (3.3) 中，使用诸如`password.hashes.Clear()`或`session.Delete(password)`在您的域对象上的操作似乎无法使用单个语句删除子集合。NHibernate 文档提到了[一次删除](http://www.nhforge.org/doc/nh/en/index.html#performance-collections-oneshotdelete)，但我无法通过单向或双向一对多关联的反向和级联的任何组合来完成这项工作。

一种替代方法是使用`on-delete="cascade"`它禁用 NHibernate 中的级联功能，并将其留给数据库来强制级联删除。更多信息可以在[这个](https://groups.google.com/forum/?fromgroups=#!topic/nhibernate-development/wE5gabvX-VE)nh 用户谷歌小组讨论中找到。

Rippo 在评论部分提到的另一个选项是使用 HQL。您将需要两个语句，因此最好将它们包装在事务中，即

```
using (var transaction = session.BeginTransaction()
{
   session.Query("delete from PasswordHash h where h.Password = :password")
                   .SetParameter("password", password)
                   .ExecuteUpdate();
   session.Delete(password);
   transaction.Commit();
} 
```

# ruby-on-rails - 从 ruby 获取值到 javascript

> ID：15544509
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:08:13.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我是 ruby​​ on rails 的新手。我想获取从 ruby​​ 到 java 脚本的值。这是我正在使用的代码。

我想要的是我想`data`用 ruby​​ 的速度和时间值创建一个 json 格式的变量。使用了上面的静态值

```
 <table border='1' align='center' class="table table-striped" >                         
  <tr>                          
    <th>Id</th>     
    <th>Speed</th>
    <th>Time</th>
  </tr>
<%  @properties.each do |c| %> 
  <tr>
    <td><%= c.device_id %></td>
    <td><%= c.speed %></td>  
    <td><%= c.time %></td>  
  </tr>
<% end %>                   
</table> 
```

```
<p><div align='center'>Available Time vs Speed Details are listed below</div> </p>
<div id="bar-demo" align="center">
<script type="text/javascript">
var data = "[[{ 'time': '1', 'speed': '0' }, { 'time': '2', 'speed': '1' }]]
</script></div> 
```

在javascript中我可以使用这样的ruby代码吗？

```
<script type="text/javascript">
<%  @properties.each do |c| %> 
    var data = "[[{ 'time': 'c.time', 'speed': 'c.speed' }]]
<% end %>        
</script> 
```

我也需要得到这样的数据（以逗号分隔的形式）

```
var data = "[[{ 'time': '1', 'speed': '0' }, { 'time': '2', 'speed': '1' }]] 
```

怎么可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:25:29.870

试试这个，（未测试）

```
<script type="text/javascript">
  var data = <%=[@properties.map {|c| {time:c.time, speed:c.speed}}].to_json%>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:17:35.820

你的意思是说`JSON`数据。`to_json`返回一个 JSON 字符串

[http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html)

[http://apidock.com/rails/ActiveRecord/Serialization/to_json](http://apidock.com/rails/ActiveRecord/Serialization/to_json)

```
<script type="text/javascript">
   var data = <%= @properties.to_json(:only => [:time, :speed]) %>
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:02:30.150

创建方法并将其传递给 .js 文件 -

**html.erb**

```
abc(c.device_id, c.speed, c.time) 
```

**JS文件**

```
function abc(device_id, speed, time){
   alert(""+device_id)
   alert(""+speed)
   alert(""+time)
 } 
```

# java - 从Android的onClickListener获取返回值

> ID：15544510
> 
> 赞同：2
> 
> 时间：2013-03-21T10:08:17.247
> 
> 标签：java, android, android-widget

我可以将变量设置为 Web 开发中的会话等上下文吗？

这是我的代码，一旦 Android 应用程序启动，我将在其中开发一个确认框：

```
package com.example.alertboxandloadingwidgets;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Boolean result = showConfirmationBox("Are you sure you want to do this",
        this);
    }
    public Boolean showConfirmationBox(String messageToShow, final Context context) {
        // prepare the alert box
        AlertDialog.Builder alertbox = new AlertDialog.Builder(context);
        // set the message to display
        alertbox.setMessage(messageToShow);
        // set a positive/yes button and create a listener
        alertbox.setPositiveButton("Yes",
        new DialogInterface.OnClickListener() {
            // do something when the button is clicked
            public void onClick(DialogInterface arg0, int arg1) {
                Toast.makeText(context,
                    "'Yes' button clicked", Toast.LENGTH_SHORT)
                    .show();
            }
        });
        // set a negative/no button and create a listener
        alertbox.setNegativeButton("No", new DialogInterface.OnClickListener() {
            // do something when the button is clicked
            public void onClick(DialogInterface arg0, int arg1) {
                Toast.makeText(context, "'No' button clicked",
                Toast.LENGTH_SHORT).show();
            }
        });
        // display box
        alertbox.show();
    }
} 
```

但是我希望如果`yes`单击按钮，则必须返回`true`，如果`no`单击按钮，则必须返回`false`。

但我不能这样做，因为返回类型`onClickListener`是无效的。

## 更新

但问题是我已经将它设为通用意味着这个方法我必须写在一个 CommonUtilities 类中，任何活动都可以使用这个方法。所以我必须设置或重置我调用此方法的结果参数的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:15:16.663

Android 对话框是异步的，因此您需要重构代码来处理这个问题。我猜你打算做这样的事情：

```
boolean result = showConfirmation(...);
if(result) {
    //do something
}
else {
    //do something else
} 
```

您可以通过以下方式获得相同的结果：

```
public class MainActivity extends Activity {
    private boolean result;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        showConfirmationBox("Are you sure you want to do this", this);
    }

    private doOnTrueResult() {
        result = true;
        //do something
    }

    private doOnFalseResult() {
        result = false;
        //do something else
    }

    public void showConfirmationBox(String messageToShow, final Context context) {

        // prepare the alert box
        AlertDialog.Builder alertbox = new AlertDialog.Builder(context);

        // set the message to display
        alertbox.setMessage(messageToShow);

        // set a positive/yes button and create a listener
        alertbox.setPositiveButton("Yes",
        new DialogInterface.OnClickListener() {

            // do something when the button is clicked
            public void onClick(DialogInterface arg0, int arg1) {
                Toast.makeText(context,
                    "'Yes' button clicked", Toast.LENGTH_SHORT)
                    .show();
                doOnTrueResult();
            }
        });

        // set a negative/no button and create a listener
        alertbox.setNegativeButton("No", new DialogInterface.OnClickListener() {

            // do something when the button is clicked
            public void onClick(DialogInterface arg0, int arg1) {
                Toast.makeText(context, "'No' button clicked",
                Toast.LENGTH_SHORT).show();
                doOnFalseResult();
            }
        });

        // display box
        alertbox.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:14:31.243

这就是我一直处理对话框数据的方式

```
alertbox.setPositiveButton("Yes",
    new DialogInterface.OnClickListener() {

        // do something when the button is clicked
        public void onClick(DialogInterface arg0, int arg1) {
            Toast.makeText(context,
                "'Yes' button clicked", Toast.LENGTH_SHORT)
                .show();
               myFunction(item);
        }
    });

private void myFunction(int result){
// Now the data has been "returned" (that's not
// the right terminology)
} 
```

同样，对其他 Button 使用另一个函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:12:49.670

您必须将值传递`onClickListener`给**全局变量**或其他方法。正如您已正确识别的返回类型`onClickListener`为*void*。如需更复杂的解决方案，请查看[此帖子](https://stackoverflow.com/questions/4473940/android-best-practice-returning-values-from-a-dialog)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T10:13:31.297

为结果值创建一个`setter`，并将值更改为`onClick()`方法中的选定值。

使`showConfirmationBox`无效;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T10:14:01.347

如果函数

```
public Boolean showConfirmationBox(String messageToShow, final Context context) 
```

需要在主线程中调用，你不能这样做。您永远不会在主线程上等待用户输入。这将导致 ANR。

如果该函数可以在后台线程中调用，则可以向主线程发送消息以显示警告框，然后等待结果。善用“处理程序”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-21T10:14:26.080

你不能这样做，但你可以创建一个布尔变量，如果是，则存储 true，如果不是，则存储 False，然后你可以相应地使用该变量

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-21T10:15:17.247

一种简单的方法可以做到：

```
public class MainActivity extends Activity {
    public static boolean result;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        showConfirmationBox("Are you sure you want to do this", this);

    }

    public Boolean showConfirmationBox(String messageToShow, final Context context) {
        AlertDialog.Builder alertbox = new AlertDialog.Builder(context);
        alertbox.setMessage(messageToShow);
        alertbox.setPositiveButton("Yes",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {
                Toast.makeText(context, "'Yes' button clicked", Toast.LENGTH_SHORT).show();
                MainActivity.result = true;
            }
        });

    // set a negative/no button and create a listener
    alertbox.setNegativeButton("No", new DialogInterface.OnClickListener() {

        // do something when the button is clicked
        public void onClick(DialogInterface arg0, int arg1) {
            Toast.makeText(context, "'No' button clicked",
            Toast.LENGTH_SHORT).show();
            MainActivity.result = false;
        }
    });

    // display box
    alertbox.show();

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-21T10:20:23.210

one of the option would be using the

```
public Button getButton (int whichButton)
Gets one of the buttons used in the dialog.

this Returns
The button from the dialog, or null if a button does not exist. 
```

for more information check the link [http://developer.android.com/reference/android/app/AlertDialog.html](http://developer.android.com/reference/android/app/AlertDialog.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-21T10:39:06.790

这可能会帮助你

```
public class MainActivity extends Activity {
     Boolean mresult;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

          Boolean result = showConfirmationBox("Are you sure you want to do this",this);
          Toast.makeText(getApplicationContext(), ""+result, Toast.LENGTH_LONG).show();

    }

     public Boolean showConfirmationBox(String messageToShow, final Context context) {       

            AlertDialog.Builder alertbox = new AlertDialog.Builder(context);
            // set the message to display
            alertbox.setMessage(messageToShow);
            // set a positive/yes button and create a listener
            alertbox.setPositiveButton("Yes",
            new DialogInterface.OnClickListener() {
                // do something when the button is clicked
                public void onClick(DialogInterface arg0, int arg1) {
                    Toast.makeText(context,
                        "'Yes' button clicked", Toast.LENGTH_SHORT)
                        .show();

                    mresult = true;
                }
            });
            // set a negative/no button and create a listener
            alertbox.setNegativeButton("No", new DialogInterface.OnClickListener() {
                // do something when the button is clicked
                public void onClick(DialogInterface arg0, int arg1) {
                    Toast.makeText(context, "'No' button clicked",
                    Toast.LENGTH_SHORT).show();

                    mresult = false;
                }
            });
            // display box
            alertbox.show();
            return mresult;
        }

} 
```

# vb.net - Visual Basic 剪贴板操作

> ID：15544512
> 
> 赞同：0
> 
> 时间：2013-03-21T10:08:23.297
> 
> 标签：vb.net, string, variables, clipboard, literals

直奔主题。我有3个按钮。每个按钮都会向剪贴板发送一条长消息，然后我可以将其粘贴到另一个窗口中。

消息当前存储在带有某种 XML hack 的字符串中：

```
ResponseMessage = <a>This is string this is istr

Welcome To PoodleSchool
This is a string
Hello
There is no one like me<a>.Value 
```

现在我需要用“DogSchool”或任何变量替换一段字符串，例如“PoodleSchool”。如何更改字符串然后将其发送到剪贴板？

该变量将基于放置在申请表上的文本框。然后，当按下按钮时，必须将消息复制到剪贴板，并使用从文本框变量中获取的正确名称。

有接盘侠吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:35:58.827

这可以通过在字符串中间使用“<%= VARIABLE %>”来完成！谢谢互联网！

# iphone - 日期格式化

> ID：15544513
> 
> 赞同：0
> 
> 时间：2013-03-21T10:08:31.467
> 
> 标签：iphone, ipad, ios6, calendar

在使用以下格式在日历中添加事件时，它在日历警报中添加为：

```
 "1 day before", 
```

但我想作为

```
 "At the time of event" 
```

这是我的代码，

```
calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSString *cday,*cmonth,*cyear;
// set today
today = [[NSDate alloc] initWithTimeIntervalSinceNow:1];
//set the current day to show the calendar
NSDateFormatter *temp1 = [[NSDateFormatter alloc] init];
[temp1 setDateFormat:@"dd"];
cday=[temp1 stringFromDate:today];
NSLog(@"Date checking%@",cday);
[temp1 release]; 
```

我的代码有什么问题吗？谁能帮我解决一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:11:26.573

可能与时区有关。您可能需要为您的 NSDateFormatter 对象的 timeZone 属性设置适当的值。请将时区设置为本地时区

```
[temp1 setTimeZone:[NSTimeZone systemTimeZone]];

(or)

[temp1 setTimeZone:[NSTimeZone localTimeZone]]; 
```

请输入此代码：

```
 NSCalendar  *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSString *cday,*cmonth,*cyear;
    // set today
    NSDate *today = [NSDate date];
    //set the current day to show the calendar
    NSDateFormatter *temp1 = [[NSDateFormatter alloc] init];
   [temp1 setTimeZone:[NSTimeZone localTimeZone]];
    [temp1 setDateFormat:@"dd"];
    cday=[temp1 stringFromDate:today];
    NSLog(@"Date checking%@",cday);
    [temp1 release]; 
```

# paypal - 买家向卖家支付佣金

> ID：15544515
> 
> 赞同：1
> 
> 时间：2013-03-21T10:08:38.003
> 
> 标签：paypal, payment

如果我们有两种类型的用户，我们想要实施一个网站： - 卖家（数字商品） - 买家

买方是否有可能向卖方付款而我们网站保留佣金？是否也可以“延迟”向卖方付款以确保买方得到广告中的内容。

实际例子：

买家以 100 欧元的价格购买“商品 x” 网站在其 PayPal 账户上获得 2 欧元的佣金 如果买家没有投诉，15 天后卖家将在其 PayPal 账户上自动获得 98 欧元。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:32:19.227

有几种不同的方法可以做到这一点。

1.  您可以在您的帐户中收到付款。然后，当您准备好向所有供应商/商家付款时，您可以使用 MassPay API 向这些帐户付款。因此，例如，您可以设置一些东西，您可以在每个月的 15 日或 1 日，或者您想要的任何时候，在其中设置所有商家。

2.  第二种选择是使用自适应付款，您可以使用延迟付款功能。在您确认买家得到他们想要的东西之后，您才真正向供应商付款。资金将进入您的帐户，然后您将在向供应商付款时执行交易付款。

3.  Adaptive Payments 和 Express Checkout 都支持并行支付，这意味着您可以在购买时拆分交易。但是，资金将立即进入帐户。如果您不想在向供应商付款之前验证买家得到了他们订购的东西，您可以使用这些选项中的任何一个。

# c# - 反序列化为 List 时的 XmlRootAttribute 位置

> ID：15544517
> 
> 赞同：4
> 
> 时间：2013-03-21T10:08:38.923
> 
> 标签：c#, xml, xml-serialization

我有以下 XML

```
<?xml version="1.0" encoding="UTF-16" standalone="no"?>
<Sites>
  <Site>
    <Code>TWTR</Code>
    <Name>twitter.com</Name>
  </Site>
  <Site>
    <Code>FB</Code>
    <Name>facebook.com</Name>
  </Site>
  <Site>
    <Code>SO</Code>
    <Name>stackoverflow.com</Name>
  </Site>
</Sites> 
```

这是代码：

```
public class Program
{
    static void Main(string[] args)
    {
        var fs = new FileStream(@"D:\temp\Sites.xml", FileMode.Open);
        var serializer = new XmlSerializer(typeof(List<Site>));
        var instance = (List<Site>)serializer.Deserialize(fs);
    }
}

[XmlRoot("Sites")]
public class Site
{
    public string Code { get; set; }
    public string Name { get; set; }
} 
```

我得到的例外是：`<Sites xmlns=''> was not expected.`. 这个错误的原因通常是，当我没有为`XmlSerializer`. 但正如你所看到的，我通过`Site`用`XmlRootAttribute`

为了完成我的困惑，以下技巧有效：

代替

```
var serializer = new XmlSerializer(typeof(List<Site>)); 
```

和

```
var serializer = new XmlSerializer(typeof(List<Site>), new XmlRootAttribute("Sites")); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:42:36.453

如果您可以控制 XML，则只需更改：

```
<Sites> 
```

至

```
<ArrayOfSite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
```

如果您无法控制 XML，请创建自己的集合并将其反序列化。

```
[XmlRoot("Sites")]
public class Sites : List<Site>
{

} 
```

使用以下构造函数时要小心：

```
var serializer = new XmlSerializer(typeof(List<Site>), new XmlRootAttribute("Sites")); 
```

[正如微软在此处](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)指出的那样，如果您不缓存与关联的序列化程序的实例`List<Site>`，您最终会出现内存泄漏......

> 动态生成的程序集
> 
> 为了提高性能，XML 序列化基础结构动态生成程序集以序列化和反序列化指定类型。基础结构查找并重用这些程序集。此行为仅在使用以下构造函数时发生：
> 
> XmlSerializer.XmlSerializer(类型)
> 
> XmlSerializer.XmlSerializer（类型，字符串）
> 
> 如果您使用任何其他构造函数，则会生成同一程序集的多个版本并且永远不会卸载，这会导致内存泄漏和性能下降。最简单的解决方案是使用前面提到的两个构造函数之一。否则，您必须将程序集缓存在 Hashtable 中，如下例所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T10:16:15.877

The `XmlRoot` attribute you added to `Site` is not used, because you aren't deserializing an object of type `Site`. You are deserializing an object of type `List<Site>` and that's where the serializer looks for the `XmlRoot` attribute.

Your workaround actually is the correct solution. However, if you are performing this deserialization often in your program, be sure to cache the `XmlSerializer` instance, because that specific constructor doesn't internally cache the dynamically generated assemblies - this contrasts with the constructor you normally use.

# c++ - 使用 MinGW 的 g++ 编译器未在此范围内声明 GetCurrentHwProfile

> ID：15544526
> 
> 赞同：0
> 
> 时间：2013-03-21T10:09:00.370
> 
> 标签：c++, g++, mingw

我一直在尝试获取硬件 GUID，我发现此功能已发布在网络上。

```
#define _WIN32_WINNT 0x0400

#include <windows.h>
#include <stdio.h>
#include <tchar.h>

int main()
{
    HW_PROFILE_INFO hwProfileInfo;

    if(GetCurrentHwProfile(&hwProfileInfo) != NULL){
            printf("Hardware GUID: %s\n",    hwProfileInfo.szHwProfileGuid);
            printf("Hardware Profile: %s\n", hwProfileInfo.szHwProfileName);
    }else{
            return 0;
    }

    getchar();
} 
```

问题是，每当我尝试编译它时，我都会收到“错误：'GetCurrentHwProfile' 未在此范围内声明”。我正在使用 MinGW 的 G++。也许这就是问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:43:02.637

不错的收获！（如果你可以这样称呼它）

问题是，如果您愿意，通常 GetCurrentHwProfile 将是一条捷径。当使用 UNICODE 支持编译时，它会变成 GetCurrentHwProfileW。否则，它将更改为 GetCurrentHwProfileA。

解决方案？只需在末尾添加一个 A。即 GetCurrentHwProfileA :)

BB.bbut - 请记住，如果您决定使用 unicode，则必须明确更改它。一个更简洁的解决方案是让 GetCurrentHwProfile 根据需要引用正确的。我想这可能是通过以下方式完成的：（现在懒得看。所有的 Windows 功能都使用这个技巧，猜想 minGW 人群错过了 GetCurrentHwProfile 这个小宝石）

```
#ifdef UNICODE
 #define GetCurrentHwProfile GetCurrentHwProfileW
#else
 #define GetCurrentHwProfile GetCurrentHwProfileA
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:48:56.460

该函数`GetCurrentHwProfile()`在`winbase.h`头文件中声明：

```
WINBASEAPI BOOL WINAPI GetCurrentHwProfileA(LPHW_PROFILE_INFOA);
WINBASEAPI BOOL WINAPI GetCurrentHwProfileW(LPHW_PROFILE_INFOW); 
```

请注意，它是`GetCurrentHwProfileA`（对于 Ansi）或`GetCurrentHwProfileW`（对于 Unicode / 宽字符）。`GetCurrentHwProfile`根据定义的`UNICODE`.

因此，当前的解决方案似乎要么使用要么`GetCurrentHwProfileA`或`GetCurrentHwProfileW`做类似的事情

```
#ifdef UNICODE
#define GetCurrentHwProfile GetCurrentHwProfileW
#else
#define GetCurrentHwProfile GetCurrentHwProfileA
#endif 
```

# java - 需要帮助-在sql developer3.0中查询插入图片到表中

> ID：15544527
> 
> 赞同：1
> 
> 时间：2013-03-21T10:09:11.513
> 
> 标签：java, oracle-sqldeveloper

嗨，我正在使用 sql developer 3.0。

我需要将图像作为 BLOB 存储在表中。

我创建了一个表如下：

```
CREATE TABLE Account_images(img_id NUMBER, MP_ID NUMBER, icon BLOB); 
```

我需要存储的图像在

```
'C:\Project\images\' 
```

任何人都请帮助我将图像插入数据库中，使用 sql 查询？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:16:47.847

1.  将图像存储在文件中。

    文件图像=新文件("'C:\Project\images\image.jpg");

2.  要插入的 Sql 查询。

    String Sql="insert into Account_images(img_id,img_id,icon) values(1,1,?)";

3.  执行声明

    PreparedStatement pStatement=connection.prepareStatement(sql);

4.  将文件写入 FileInputStream

    FileInputStream fis =fis = new FileInputStream(image);

5.  将 fis 附加到preparedStatement 为

    pStatement.setBinaryStream(1, fis,fis.length());

6.  执行语句

    ResultSet 结果=pStatement.executeUpdate();

作为一个整体

```
File image=new file("'C:\Project\images\image.jpg");
String Sql="insert into Account_images(img_id,img_id,icon) values(1,1,?)";
PreparedStatement pStatement=connection.prepareStatement(sql);
FileInputStream   fis =fis = new FileInputStream(image);
pStatement.setBinaryStream(1, fis,fis.length());
ResultSet result=pStatement.executeUpdate(); 
```

# c# - 首先编写 Windows azure 连接字符串

> ID：15544532
> 
> 赞同：1
> 
> 时间：2013-03-21T10:09:24.690
> 
> 标签：c#, azure, connection-string, code-first

这是我的连接字符串：

```
 <add name="FollowUpDatabase" connectionString="Server=tcp:yncm4e4uxp.database.windows.net,1433;Database=[FollowUp];User ID=qwertyuiop1234567890@yncm4e4uxp;Password=XXXXXXXXX;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" providerName="System.Data.SqlClient"/> 
```

我得到这个错误：

```
 Cannot open database "[FollowUp]" requested by the login. The login failed.
    Login failed for user 'qwertyuiop1234567890'.
    This session has been assigned a tracing ID of '67b05ed3-1ff7-4036-98ce-56e0d0272587'.  Provide this tracing ID to customer support when you need assistance. 
```

我应该改变什么？（密码和登录名正确）

**编辑**

这是工作的本地连接字符串：

```
 <add name="FollowUpDatabase" connectionString="Data Source=NET-PC;Initial Catalog=FollowUp;Persist Security Info=True; User ID=sa; password=1" providerName="System.Data.SqlClient" /> 
```

# html - 在一个带有图像的 div 中使用多个类

> ID：15544538
> 
> 赞同：4
> 
> 时间：2013-03-21T10:09:46.860
> 
> 标签：html, css

我在一个 div 中使用两个类。我遇到的问题是我有两个不同的`title`div，每个标题都有自己的图像。我无法弄清楚为什么每个标题都不会显示自己的图像。两个图像都会叠加在第一个 div 上，我做错了什么？

**演示** [http://jsfiddle.net/mRRA4/](http://jsfiddle.net/mRRA4/)

**CSS**

```
.title {
border: 1px solid #AAA;
padding: 4px 22px;
}

.icon-img1:before {
position: absolute;
top: 4px;
left: 4px;
content: "";
background: url(http://png-4.findicons.com/files/icons/366/icomic/24/images.png);
width: 24px;
height: 24px;
}

.icon-img2:before {
position: absolute;
top: 4px;
left: 4px;
content: "";
background: url(http://png-5.findicons.com/files/icons/753/gnome_desktop/24/gnome_emblem_photos.png);
width: 24px;
height: 24px;
} 
```

**HTML**

```
 <div class="title icon-img1">Title 1</div>
 <div class="title icon-img2">Title 2 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:10:58.327

现在添加`position: relative;`您的`.title`课程

**像这样**

```
.title {
    position: relative;
} 
```

**[演示](http://jsfiddle.net/mRRA4/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:19:13.087

您可以`position: relative`按照 Rohit 的建议在标题类中设置，也可以将 32px 添加到`top`第二个图像类中的值。原因是`position: absolute`位置基于具有位置属性的下一个父元素。所以你的两个图像都被定位在身体之外，因此被放置在距离左上角 4px 的位置。给标题一个`position: relative`意味着它将被用作子类的“锚”。

# c++ - C ++收集算法？

> ID：15544540
> 
> 赞同：4
> 
> 时间：2013-03-21T10:09:51.293
> 
> 标签：c++, algorithm, c++11, collect

时不时地我需要遍历容器元素的一个子集，或者只是想提取它们而忽略其余部分。我最终`boost::range::adaptors::filtered`用来创建这个惰性集合。

```
for(auto&& i : container | filtered(predicate)) {
  // .. do stuff
} 
```

STL中缺少收集算法（如Ruby的收集）是否有原因（我们只有不一样的copy_if）？或者有什么理由反对使用它？

一个可能的实现可能是：

```
template<class Container, class Predicate>
Container collect(Container&& c, Predicate&& p) {
  Container n;
  for(auto&& i : c) {
    if(p(i)) {
      n.push_back(i);
    }
  }
  return n;
} 
```

但 a`lazy_collect`也可能有助于避免复制。

下面的所有答案都很棒。我希望我可以标记所有这些。我不知道`std::back_inserter`。收集东西现在很容易：

```
boost::copy( orig | filtered(predicate), std::back_inserter(collection)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:15:41.197

标准算法不直接对容器进行操作（创建或销毁它们，或更改它们的大小）。它们对迭代器范围进行操作，算法所做的唯一更改是通过迭代器赋值。

因此，您提出的操作完全超出了标准算法的范围。也许标准中“应该”有大量额外的通用容器操作，包括这个，但“STL 哲学”是在迭代器上操作。

您建议的非惰性操作可以使用`std::back_inserter`and `std::copy_if`（可选地使用移动迭代器）或`move_if`（如果您自己滚动）来完成。`std::copy_if`从 C++03 中丢失，但这是一个意外的疏忽。

懒惰的版本不能仅仅通过将标准组件插入在一起来完成——没有一种干净的方法可以将一个算法的“输出”直接链接到另一个算法的“输入”而不需要中间存储。这就是为什么 Boost 提供了如此有趣的各种迭代器以及 Ranges。

我不知道为什么它们没有被合并到 C++11 中，但是关于 C++11 需要注意的一件事是它已经很晚了。由于时间不够，提案被放弃，因此原因可能很简单，“鉴于已知的现有工作量，它从未被认为足够重要以提出提案”。

关于您的特定实现，并非所有容器都有`push_back`，因此您可能不应该将`Container`其用作模板参数名称。`PushBackSequence`将更能描述要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T10:15:18.473

这个怎么样：

```
#include <algorithm>
#include <iterator>

std::copy_if(container.begin(), container.end(), std::back_inserter(result), []{...}) 
```

`container`您要从中收集的容器在哪里，以及`result`将存储该集合的容器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T10:17:31.710

从评论：

> 使用 copy_if 时，您需要事先知道需要多少空间

这不是真的。您可以使用`std::copy_if`后[插入器](http://en.cppreference.com/w/cpp/iterator/back_inserter)：

```
#include <algorithm> // For std::copy_if
#include <iterator> // For std::back_inserter
#include <vector>
#include <iostream>

int main()
{
    std::vector<int> v(10);
    std::iota(begin(v), end(v), 0); // Fills the vector with 0..9

    std::vector<int> out;
    std::copy_if(begin(v), end(v), back_inserter(out), [] (int x) 
    //                             ^^^^^^^^^^^^^^^^^^
    {
        return x > 4; 
    });

    for (auto x : out) { std::cout << x << " "; }
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/yJL1f%2447)。

如果你想要一个直接作用于容器而不是由一对迭代器定义的范围的函数，你可以编写以下帮助程序：

```
template<typename C1, typename C2, typename P>
void cont_copy_if(C1&& src, C2&& dst, P&& p)
{
    std::copy_if(
        begin(std::forward<C1>(src)),
        end(std::forward<C1>(src)),
        back_inserter(std::forward<C2>(dst)),
        std::forward<P>(p)
        );
} 
```

你会用这种方式：

```
int main()
{
    std::vector<int> v(10);
    std::iota(begin(v), end(v), 0);

    std::list<int> out;
//  ^^^^^^^^^
//  You could use a different destination container

    cont_copy_if(v, out, [] (int x) { return x > 4; });
//  ^^^^^^^^^^^^

    for (auto x : out) { std::cout << x << " "; }
} 
```

当然还有[活生生的例子](http://liveworkspace.org/code/yJL1f%2448)。

# spring - 单元测试时无法自动装配字段

> ID：15544541
> 
> 赞同：2
> 
> 时间：2013-03-21T10:09:51.527
> 
> 标签：spring, unit-testing, spring-data-jpa

我尝试将 Spring Data jpa 与泛型一起使用，但是当我运行单元测试时会处理相同的异常。这是一个例外：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'tn.moussi.PostRepositorytest': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: tn.moussi.repositories.PostRepository tn.moussi.PostRepositorytest.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: T is not mapped [select t from T t where t.title = :TITLE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:313)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:284)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:88)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: tn.moussi.repositories.PostRepository tn.moussi.PostRepositorytest.repository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: T is not mapped [select t from T t where t.title = :TITLE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 26 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'postRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: T is not mapped [select t from T t where t.title = :TITLE]
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1442)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:248)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 28 more
Caused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: T is not mapped [select t from T t where t.title = :TITLE]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1364)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:294)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at com.sun.proxy.$Proxy22.createQuery(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at com.sun.proxy.$Proxy20.createQuery(Unknown Source)
    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:69)
    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.fromQueryAnnotation(SimpleJpaQuery.java:132)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:114)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:160)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:68)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:280)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:148)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:125)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:41)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 36 more
Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: T is not mapped [select t from T t where t.title = :TITLE]
    at org.hibernate.hql.internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180)
    at org.hibernate.hql.internal.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:110)
    at org.hibernate.hql.internal.ast.tree.FromClause.addFromElement(FromClause.java:93)
    at org.hibernate.hql.internal.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:324)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3291)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3180)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
    at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)
    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)
    at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1735)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:291)
    ... 58 more 
```

这是java代码：

导入 java.io.Serializable；

```
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

public interface GenericRepository<T,ID extends Serializable> extends JpaRepository<T, ID> {

    @Query("select t from T t where t.title = :TITLE")
    T findByTitle(@Param("TITLE") String title);

}

import org.springframework.stereotype.Repository;

import tn.moussi.entities.Post;

@Repository("postRepository")
public interface PostRepository extends GenericRepository< Post, Integer> {

} 
```

单元测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:META-INF/application-context.xml")
public class PostRepositorytest {

    @Autowired
    @Qualifier(value="postRepository")
    PostRepository repository;

    @Test
    public void test() {
        Post post = new Post();
        post.setPostDate(new Date());
        post.setTitle("first post");

        repository.save(post);

        Post dbpost = repository.findByTitle(post.getTitle());
        assertNotNull(dbpost);
        System.out.println(dbpost.getTitle());

    }

} 
```

实体类帖子：

```
@Entity
@Table(name="POST")
public class Post{

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="POST_ID")
    Integer postId;

    @Column(name="TITLE")
    String title;
    @Column(name="POST_DATE")
    Date postDate;

    public Integer getPostId() {
        return postId;
    }
    public void setPostId(Integer postId) {
        this.postId = postId;
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public Date getPostDate() {
        return postDate;
    }
    public void setPostDate(Date postDate) {
        this.postDate = postDate;
    }
} 
```

应用程序上下文文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<!-- database -->
<jdbc:embedded-database id="datasource" type="H2"></jdbc:embedded-database>

<!--  Entity manager -->
 <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="datasource"/>
        <property name="persistenceUnitName" value="moussi-tutorial"/>
 </bean>

 <!--  Transaction Manager -->
 <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
  </bean>

 <!--  Jap repositories -->
 <jpa:repositories base-package="tn.moussi"></jpa:repositories>

<context:annotation-config/>
    <context:component-scan base-package="tn.moussi" />

</beans> 
```

persistence.xml 文件：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">

  <persistence-unit name="moussi-tutorial" transaction-type="RESOURCE_LOCAL">
     <provider>org.hibernate.ejb.HibernatePersistence</provider>

    <properties>
         <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
         <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
         <property name="hibernate.show_sql" value="true"/>
      </properties>
  </persistence-unit>

</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:56:44.020

这不会像您期望的那样工作。虽然具体类继承了该方法并允许我们在运行时找出具体的返回类型，但我们不会（不能）对手动定义的查询进行任何泛型替换。其原因是基本上没有办法确定您是否实际上从查询中引用了泛型类型（阅读：查询中的 T 基本上可以表示任何内容，只需查看查询）。

您可以选择为每种具体类型的 T 引入专用命名查询，例如`TypeA.findByTitle`,`TypeB.findByTitle`等等。然后，我们将使用这些来支持继承到具体存储库接口中的方法。此外，您可能希望`GenericRepository`使用 @NoRepositoryBean 注释接口以防止在组件扫描期间被拾取。阅读[参考文档](http://static.springsource.org/spring-data/jpa/docs/1.3.0.RELEASE/reference/htmlsingle/#repositories.custom-behaviour-for-all-repositories)中的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:35:53.773

我可能猜想这是因为您的 JPA 提供程序无法在您的 GenericRepository 接口中处理查询：

```
select t from T t where t.title = :TITLE 
```

为了了解这是否是根本原因 - 尝试在 PostRepository 中引入另一个 findByTitle2 方法来解决显式命名的实体：

```
@Query("select t from Post t where t.title = :TITLE")
T findByTitle(@Param("TITLE") String title); 
```

请注意，您的堆栈跟踪通过以下报告解决了这个问题：

```
QuerySyntaxException: T is not mapped [select t from T t where t.title = :TITLE] 
```

我不确定这样的查询参数化`select t from T t where t.title = :TITLE`是否可能 - 由于 java 中泛型实现的细节，并不总是可以在运行时提取正确的参数化类型信息来决定在应用程序的某个点使用什么类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:28:26.957

我不确定这是可能的。问题是`T`每个接口的通用参数都会不同。在您的`@Query`T 是在注释上的 value 元素中静态定义的，`select t from T...`. 在普通的 JPA 查询中，实体的类型将在查询中指定。如下：

```
@Query("select t from Book t where t.title = :TITLE")
Book findByTitle(@Param("TITLE") String title); 
```

如果允许扩展接口，Spring Data 需要足够聪明才能`T`在运行时确定泛型参数的类型（这与泛型背道而驰，因为大多数操作都是编译时的）。然后它需要将此类型替换为`@Query`注解值元素中静态定义的查询。我没有看到任何证据表明这是可能的。

# php - 数组内的双引号

> ID：15544548
> 
> 赞同：-2
> 
> 时间：2013-03-21T10:10:15.520
> 
> 标签：php, arrays, double-quotes

我的文件中有这行代码，但是在返回数组部分，我需要在数组中添加双引号。

如果我离开现在的样子，它就会崩溃。

我怎么解决这个问题？

```
if ($number_of_picture_allowed <= $number_of_picture)
        return array('error' => "{tr domain="PhrasesInTemplates"}You already selected the maximum amount of pictures for this shirt!{/tr}",'file_sid' => $fileSid); 
```

提前感谢， Arky

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:11:35.130

您可以使用 \ 转义数组内的引号

```
 return array('error' => "{tr domain=\"PhrasesInTemplates\"}You already selected the maximum amount of pictures for this shirt!{/tr}",'file_sid' => $fileSid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:11:57.173

使用反斜杠 ( ) 转义这些引号`\`。因此，您的回报应该是：

```
return array('error' => "{tr domain=\"PhrasesInTemplates\"}You already selected the maximum amount of pictures for this shirt!{/tr}",'file_sid' => $fileSid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:13:37.103

```
if ($number_of_picture_allowed <= $number_of_picture)
    return array('error' => "{tr domain=\"PhrasesInTemplates\"}You already selected the maximum amount of pictures for this shirt!{/tr}",'file_sid' => $fileSid); 
```

尝试这个。[PHP 双引号](http://www.php.net/manual/de/language.types.string.php#language.types.string.syntax.double)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:12:07.650

尝试这个 ：

1.  将内容用单引号括起来 `$arr = array('error' => '{tr domain="PhrasesInTemplates"}You already selected the maximum amount of pictures for this shirt!{/tr}','file_sid' => $fileSid);`

2.  使用反斜杠 (\) \" 转义引号

# java - 油漆组件是如何工作的？

> ID：15544549
> 
> 赞同：78
> 
> 时间：2013-03-21T10:10:19.043
> 
> 标签：java, swing, paintcomponent

这可能是一个非常菜鸟的问题。我刚开始学习Java

我不明白paintComponent方法的操作。我知道如果我想画一些东西，我必须重写paintComponent 方法。

```
public void paintComponent(Graphics g)
{
   ...
} 
```

但是什么时候调用呢？我从来没有见过像“object.paintComponent(g)”这样的东西，但它仍然是在程序运行时绘制的。

什么是 Graphics 参数？这个从哪里来？调用方法时必须提供参数。但正如我之前所说，似乎从未显式调用此方法。那么这个参数是谁提供的呢？为什么我们必须将其转换为 Graphics2D？

```
public void paintComponent(Graphics g)
{
    ...
    Graphics2D g2= (Graphics2D) g;
    ...
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-21T10:45:35.680

对您的问题的（非常）简短的回答`paintComponent`是“当它需要时”。有时更容易将 Java Swing GUI 系统视为一个“黑盒”，其中大部分内部结构都在没有太多可见性的情况下处理。

决定何时需要重新绘制组件的因素有很多，包括移动、调整大小、更改焦点、被其他帧隐藏等等。其中许多事件是自动检测到的，并`paintComponent`在确定需要该操作时在内部调用。

我使用 Swing 已经很多年了，我认为我从来**没有**直接调用过`paintComponent`，甚至没有看到它直接从其他东西调用过。我最接近的是使用这些`repaint()`方法以编程方式触发某些组件的重绘（我假设它在`paintComponent`下游调用了正确的方法。

以我的经验，`paintComponent`很少被直接覆盖。我承认有些自定义渲染任务需要这种粒度，但 Java Swing 确实提供了一组（相当）健壮的 JComponents 和 Layouts，可以用来完成大部分繁重的工作，而无需直接覆盖`paintComponent`。我想我的意思是在你开始尝试推出你自己的自定义渲染组件之前，确保你不能用原生的 JComponents 和 Layouts 做一些事情。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-21T10:41:51.690

你可以在这里做两件事：

1.  [在 AWT 和 Swing 中](http://www.oracle.com/technetwork/java/painting-140037.html)阅读绘画
2.  使用调试器并在paintComponent 方法中放置一个断点。然后向上移动堆栈跟踪并查看如何提供 Graphics 参数。

仅供参考，这是我从最后发布的代码示例中获得的堆栈跟踪：

```
Thread [AWT-EventQueue-0] (Suspended (breakpoint at line 15 in TestPaint))  
    TestPaint.paintComponent(Graphics) line: 15 
    TestPaint(JComponent).paint(Graphics) line: 1054    
    JPanel(JComponent).paintChildren(Graphics) line: 887    
    JPanel(JComponent).paint(Graphics) line: 1063   
    JLayeredPane(JComponent).paintChildren(Graphics) line: 887  
    JLayeredPane(JComponent).paint(Graphics) line: 1063 
    JLayeredPane.paint(Graphics) line: 585  
    JRootPane(JComponent).paintChildren(Graphics) line: 887 
    JRootPane(JComponent).paintToOffscreen(Graphics, int, int, int, int, int, int) line: 5228   
    RepaintManager$PaintManager.paintDoubleBuffered(JComponent, Image, Graphics, int, int, int, int) line: 1482 
    RepaintManager$PaintManager.paint(JComponent, JComponent, Graphics, int, int, int, int) line: 1413  
    RepaintManager.paint(JComponent, JComponent, Graphics, int, int, int, int) line: 1206   
    JRootPane(JComponent).paint(Graphics) line: 1040    
    GraphicsCallback$PaintCallback.run(Component, Graphics) line: 39    
    GraphicsCallback$PaintCallback(SunGraphicsCallback).runOneComponent(Component, Rectangle, Graphics, Shape, int) line: 78    
    GraphicsCallback$PaintCallback(SunGraphicsCallback).runComponents(Component[], Graphics, int) line: 115 
    JFrame(Container).paint(Graphics) line: 1967    
    JFrame(Window).paint(Graphics) line: 3867   
    RepaintManager.paintDirtyRegions(Map<Component,Rectangle>) line: 781    
    RepaintManager.paintDirtyRegions() line: 728    
    RepaintManager.prePaintDirtyRegions() line: 677 
    RepaintManager.access$700(RepaintManager) line: 59  
    RepaintManager$ProcessingRunnable.run() line: 1621  
    InvocationEvent.dispatch() line: 251    
    EventQueue.dispatchEventImpl(AWTEvent, Object) line: 705    
    EventQueue.access$000(EventQueue, AWTEvent, Object) line: 101   
    EventQueue$3.run() line: 666    
    EventQueue$3.run() line: 664    
    AccessController.doPrivileged(PrivilegedAction<T>, AccessControlContext) line: not available [native method]    
    ProtectionDomain$1.doIntersectionPrivilege(PrivilegedAction<T>, AccessControlContext, AccessControlContext) line: 76    
    EventQueue.dispatchEvent(AWTEvent) line: 675    
    EventDispatchThread.pumpOneEventForFilters(int) line: 211   
    EventDispatchThread.pumpEventsForFilter(int, Conditional, EventFilter) line: 128    
    EventDispatchThread.pumpEventsForHierarchy(int, Conditional, Component) line: 117   
    EventDispatchThread.pumpEvents(int, Conditional) line: 113  
    EventDispatchThread.pumpEvents(Conditional) line: 105   
    EventDispatchThread.run() line: 90 
```

Graphics 参数来自这里：

```
RepaintManager.paintDirtyRegions(Map) line: 781 
```

涉及的片段如下：

```
Graphics g = JComponent.safelyGetGraphics(
                        dirtyComponent, dirtyComponent);
                // If the Graphics goes away, it means someone disposed of
                // the window, don't do anything.
                if (g != null) {
                    g.setClip(rect.x, rect.y, rect.width, rect.height);
                    try {
                        dirtyComponent.paint(g); // This will eventually call paintComponent()
                    } finally {
                        g.dispose();
                    }
                } 
```

如果你看一下它，你会看到它从 JComponent 本身（间接地`javax.swing.JComponent.safelyGetGraphics(Component, Component)`）检索图形，它本身最终从它自己从它的第一个“重量级父”（剪辑到组件边界）中获取它对应的原生资源。

关于您必须将a 强制`Graphics`转换为 a的事实，`Graphics2D`碰巧在使用 Window Toolkit 时，`Graphics`实际上 extends `Graphics2D`，但您可以使用其他`Graphics`“不必” extends `Graphics2D`（它不经常发生，但 AWT/ Swing 允许您这样做）。

```
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;

class TestPaint extends JPanel {

    public TestPaint() {
        setBackground(Color.WHITE);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawOval(0, 0, getWidth(), getHeight());
    }

    public static void main(String[] args) {
        JFrame jFrame = new JFrame();
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setSize(300, 300);
        jFrame.add(new TestPaint());
        jFrame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T10:11:54.473

GUI 系统的内部调用该方法，并将`Graphics`参数作为您可以在其上绘制的图形上下文传递。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-23T00:17:32.900

调用`object.paintComponent(g)`是错误的。

而是在创建面板时自动调用此方法。该`paintComponent()`方法也可以由类中`repaint()`定义的方法显式调用`Component`。

调用的效果`repaint()`是Swing自动清空面板上的图形，并执行`paintComponent`方法重绘该面板上的图形。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-26T17:36:28.533

`void paintComponent(Graphics g){}`如果您希望任何先前的绘图在组件上永久存在，您可能必须重新定义该方法。您需要通过显式调用升序类的方法来做到这一点，例如`super.painComponent();`. 这样，任何时候java都需要使用该paintComponent方法，您将保持所做的更改。

这是因为如果你不这样做，超类将通过简单地调用它自己的方法来撤销你所做的一切，完全忽略任何更改。

# sql - 在 SQL 中删除后，表未在 EDMX 中删除

> ID：15544552
> 
> 赞同：0
> 
> 时间：2013-03-21T10:10:29.333
> 
> 标签：sql, asp.net-mvc, entity-framework, visual-studio-2012, poco

AM 使用 MVC4 VS2012 和 EF5。

我使用数据库创建了一个 EDMX，并自动生成了 POCO(TT) 类。

遵循这种方式[Entity Framework 5 和 Visual Studio 2012 POCO Classes in different Project](https://stackoverflow.com/questions/12375090/entity-framework-5-and-visual-studio-2012-poco-classes-in-different-project)将 POCO 移动到不同的项目。

现在我编辑我的数据类型（Int 到 String 或 AllowNull）或删除我在 SQL Server 中的表。我来更新我的模型（EDMX）。但是变化没有反映出来。

我做错了还是错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:30:50.497

我不认为你缺少任何东西。

我不确定设计师在决定更新什么时使用的逻辑。从经验来看，它似乎主要是添加新的。没看到太多更新。

我倾向于删除表格并再次添加它作为最不痛苦的路线。这将删除任何自定义映射，因此如果您的实体与您的表有很大不同，这并不理想。

# c# - 可以设置 RequestValidationMode="2.0" 页面级别吗？

> ID：15544555
> 
> 赞同：3
> 
> 时间：2013-03-21T10:10:42.287
> 
> 标签：c#, asp.net, .net, vb.net

我正在开发一个基于 ASP.NET 4.0 的 Web 应用程序，并且有一些带有潜在危险请求的页面（具有标记代码）。

因此，除了在 web.config 中设置 RequestValidationMode="2.0" 之外，我可以只为那几个页面设置该属性吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-29T16:08:54.393

答案隐藏在 msdn 的某个地方，希望这对你也有帮助.. 最好迟到，然后永远不要尝试这个，

```
<location path="test.aspx">
<system.web>
<httpRuntime requestValidationMode="2.0" />
</system.web>
</location> 
```

参考

[http://msdn.microsoft.com/en-us/library/hh882339(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/hh882339(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:28:29.553

为了避免此错误：**从客户端检测到潜在危险的 request.form 值。**

您可以使用页面级属性：`<%@ Page ... ValidateRequest="false" %>`

# php - href javascript函数调用

> ID：15544559
> 
> 赞同：0
> 
> 时间：2013-03-21T10:10:57.237
> 
> 标签：php, javascript, jquery

我试图在 href 上调用一个函数，但它显示未定义的函数，但是当我在专辑循环中调用它时，该函数本身正在工作。附加href后还有其他调用函数的方法吗？我尝试使用带有anchor id的jquery onclick，但这也不起作用并且没有错误。知道我应该怎么打电话吗？

```
function getPhotosByAlbumID(albumID){
    FB.api('/'+ albumID + '/photos',{ limit: 5000, fields: 'source' }, function(photos) {
        $(photos.data).each(function(index, value){
            console.log(value.source);
        });
    });
}

FB.api('/me/albums',{ limit: 5000, fields: 'id,name,count,cover_photo,link' }, function(me_album) {
    $(me_album.data).each(function(index, value){                           
        FB.api('/'+value.id+'/picture',{ limit: 5000 }, function(picture) {                     
            $('#facebook-cover').append('<li id="'+value.id+'"><a href="javascript:getPhotosByAlbumID('+value.id+');" id="album"><img src="'+picture.data.url+'" /></a></li>'); 
        });
    });
}); 
```

错误：未捕获的 ReferenceError：未定义 getPhotosByAlbumID

都像这样附加..

```
<ul id="facebook-cover">
<li id="4758611198834"><a href="javascript:getPhotosByAlbumID(4758611198834);" id="album"><img src="image-link"></a></li>   
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:19:48.377

尝试

```
var li=$('<li id="'+value.id+'"></li>');
var anchor=$('<a href="#" id="album"></a>');
anchor.click(function(){
getPhotosByAlbumID(value.id);
return false;

});
var img=$('<img src="'+picture.data.url+'" />');

anchor.append(img);
li.append(anchor); 
```

这样你的点击事件必须工作。除非 getPhotosByAlbumID() 内部有任何错误；你也可以从同一个函数返回 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:42:22.720

我的猜测是 js 文件未正确包含在 html 所在的页面中。测试这是否是问题的一种简单方法是将javascript放在与链接相同的文件中。如果这解决了问题，则您有一个包含错误。

像这样：

```
<script type="text/javascript">
function getPhotosByAlbumID(albumID){
    FB.api('/'+ albumID + '/photos',{ limit: 5000, fields: 'source' }, function(photos) {
        $(photos.data).each(function(index, value){
            console.log(value.source);
        });
    });
}

FB.api('/me/albums',{ limit: 5000, fields: 'id,name,count,cover_photo,link' }, function(me_album) {
    $(me_album.data).each(function(index, value){                           
        FB.api('/'+value.id+'/picture',{ limit: 5000 }, function(picture) {                     
            $('#facebook-cover').append('<li id="'+value.id+'"><a href="javascript:getPhotosByAlbumID('+value.id+');" id="album"><img src="'+picture.data.url+'" /></a></li>');
        });
    });
});
</script>

<ul id="facebook-cover">
<li id="4758611198834"><a href="javascript:getPhotosByAlbumID(4758611198834);" id="album"><img src="image-link"></a></li>   
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:47:57.430

我注意到您最初的 JS 代码中有大量缩进。您的`getPhotosByAlbumID`功能可能在其他功能中吗？像这样的东西：

```
var module = (function () {
    ...
    function getPhotosByAlbumID(albumID){
    ...
} 
```

如果是这样，您需要使其可访问。这是[有关模块模式的一些信息](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)，可能有用。

# c# - 如何在 RDF 中存储坐标（纬度、经度）

> ID：15544561
> 
> 赞同：0
> 
> 时间：2013-03-21T10:10:59.167
> 
> 标签：c#, coordinates, rdf, protege, rdfs

我有 ac# 类显示坐标为

```
 class Coordinates{
   double lat;
   double lon;
 } 
```

由于RDF不支持双精度类型，我如何将它转换为rdf中的rdf三元组？如果使用float，我只能表示“。”之后的6位数字。任何的想法？

我正在使用[Protege 3.4.8](http://protege.stanford.edu/)创建我的 rdf 模式和[Semweb](http://razor.occams.info/code/semweb/)在 scema中写入三组数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:15:41.360

RDF[确实支持浮点文字](http://rdf.rubyforge.org/RDF/Literal/Double.html)。Semweb*也*支持[`Literal`价值观](http://razor.occams.info/code/semweb/semweb-current/apidocs/SemWeb/Literal.html)。

使用[`FromValue`方法](http://razor.occams.info/code/semweb/semweb-current/apidocs/SemWeb/Literal.html#M%3aSemWeb.Literal.FromValue%28System.Double%29)让它做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:43:19.133

通过手动更改 Protege 生成的 RDF 文件并将[http://www.w3.org/2001/XMLSchema#double](http://www.w3.org/2001/XMLSchema#double)放在我需要的位置来解决问题。

# php - 无法在 PHP 函数中调用 SQL

> ID：15544562
> 
> 赞同：-5
> 
> 时间：2013-03-21T10:10:59.373
> 
> 标签：php, sql, function

我正在尝试在函数中运行 SQL 语句，但是当我这样做时，什么也没有发生。

这是我的代码....

```
<?php 

$id = 47665;
function call($id)
{

$getBookTitle = $this->EE->db->query("SELECT b.title
                                      FROM books as b
                                      WHERE b.side = 'open'
                                      AND b.swarm_suit = 1
                                      AND b.book_id = ".$id. "
                                      ");

$variable;
foreach ($getBookTitle ->result_array() as $key)
{
  $variable = $key['title'];
}

echo $variable;
}

call(0254);
?> 
```

如果我在函数外部运行这个 SQL 语句，它会完美运行。

帮助，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:13:16.820

您的 foreach 正在迭代一个不存在的变量。

不应该`foreach( $getBookTitle`

* * *

关于您遇到的范围问题。我建议您定义一个新的数据库句柄。

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "database");
$mysqli->query("SELECT b.title
                                      FROM books as b
                                      WHERE b.side = 'open'
                                      AND b.swarm_suit = 1
                                      AND b.book_id = ".$id. "
                                      "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:21:15.540

什么？未定义`$getRestaurantName`？

他`$this`在函数内部使用，而不是在对象方法中使用！

```
<?php

$id = 47665;
function call($id)
{
    /*
     * What is $this? Where is class?
     */
    $getBookTitle = $this->EE->db->query("SELECT b.title
                                          FROM books as b
                                          WHERE b.side = 'open'
                                          AND b.swarm_suit = 1
                                          AND b.book_id = ".$id. "
                                          ");

    $variable; // Notice: undefined variable

    foreach ($getBookTitle ->result_array() as $key)
    {
      $variable = $key['title'];
    }

    echo $variable;
} 
```

似乎您很简单地关闭了所有 PHP 错误和警告。

## 更新

```
<?php

// Just for example
class _class {
    public $EE; // Your 'EE' definition

    private static $instance;

    public static function getInstance() {
        if(!self::$instance) self::$instance = new self();
        return self::$instance;
    }
}

function call($id)
{
    $obj = _class::getInstance(); // You should get instance of object where 'EE' defined. Use singletone pattern for this.

    $getBookTitle = $obj->EE->db->query("SELECT b.title
                                        FROM books as b
                                        WHERE b.side = 'open'
                                        AND b.swarm_suit = 1
                                        AND b.book_id = ".$id. "
                                        ");

    $variable = NULL;

    foreach ($getBookTitle ->result_array() as $key)
    {
        $variable = $key['title'];
    }

    echo $variable;
}
call(0254); 
```

# c - 在 C 中处理小数

> ID：15544565
> 
> 赞同：0
> 
> 时间：2013-03-21T10:11:08.697
> 
> 标签：c, linux, floating-point

我正在用 C（在 Linux 下）编写一个处理价格的应用程序。程序以整数对 (m, e) 的形式接收报价，因此结果价格只是 'm * 10^e'。

我希望能够通过算术运算来操纵价格，并使用类似“ *printf* ”的函数来格式化输出。我必须非常快地做到这一点。

在 C 中处理小数的最快方法是什么？我读过[gcc 中的 Decimal Floats](http://gcc.gnu.org/onlinedocs/gcc/Decimal-Float.html#Decimal-Float)，但它们缺乏 libc 支持使它们无法以标准方式使用。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:16:52.553

You can of course use a library such as [GMP](http://gmplib.org/), it supports arbitrary floating-point precision so it should be able to deal with your data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:20:29.307

If your prices are always at the most to 2 decimal places then you can just use integers to represent the number of cents. printf is also simple with

```
printf("%d.%02d", price/100, price%100 ); 
```

# asp.net-mvc - 为什么模型支持 上下文改变了？

> ID：15544568
> 
> 赞同：1
> 
> 时间：2013-03-21T10:11:13.930
> 
> 标签：asp.net-mvc, entity-framework, code-first

我们在 MVC 应用程序中首先使用 EF5 代码。

该模型是在测试工具中创建的（出于我不会讨论的原因）。然后，当我尝试访问 Web 应用程序中的 dbcontext 时，我收到一个无效操作异常，指出支持上下文的模型已更改。

根本没有架构差异。事实上，我已经在测试工具和 Web 应用程序中创建了数据库。当它在网络应用程序中创建时很好，当它在另一个程序中创建并在网络应用程序中访问时它会失败。

我注意到_MigrationHistory 中有模型的二进制表示。我已经比较了这两种数据库创建方法，它总是一样的。

EF 究竟检查什么以确定模型已更改，因为据我所见，一切都是相同的并且应该以任何一种方式工作，但它不会让我认为我在这里遗漏了一些东西。

# cocos2d-iphone - 选择级别表单级别选择屏幕的问题（Cocos2d + box2d）

> ID：15544571
> 
> 赞同：0
> 
> 时间：2013-03-21T10:11:20.700
> 
> 标签：cocos2d-iphone

在级别选择屏幕中有菜单项并根据所选项目级别启动...这里是代码..其中 selectedLevel 是 menuItem 的索引。

```
if(selectedLevel==0) 
{   
activeScene = [level2_1Scene node]; 
[[CCDirector sharedDirector] pushScene:activeScene]; 
    } 
else if(selectedLevel==1) 
{   
activeScene = [level2_2Scene node]; 
[[CCDirector sharedDirector] pushScene:activeScene]; 
    } 
else if(selectedLevel==2) 
{    
activeScene = [level2_3Scene node]; 
[[CCDirector sharedDirector] pushScene:activeScene]; 
```

... 以此类推，适用于所有级别

我怎么能用简单的关卡场景名称格式来做到这一点，像这样不起作用

```
activeScene = [[NSString stringWithFormat:@"level2_%d",selectedLevel+1] node]; 
[[CCDirector sharedDirector] pushScene:activeScene]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:19:19.937

我的一个工厂的这个片段可能在适应后可以做你的伎俩：

```
Skill *skkk = (Skill *) NSClassFromString(className);

if (skkk) {
    return (Skill *) [[skkk class] skillWithSpec:ss];
} else {
    MPLOGERROR(@"*****************************************************************");
    MPLOGERROR(@"             no class with name %@", className);
    MPLOGERROR(@"*****************************************************************");
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:38:50.057

这对我有用,,,

```
 NSString *level=[NSString stringWithFormat:@"level2_%dScene",selectedLevel+1];   
    Class sceneClass = NSClassFromString(level);
    activeScene = (bunnyScene*)[sceneClass node] ;
    [[CCDirector sharedDirector] replaceScene:activeScene]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T21:23:36.887

我认为这可能是您正在寻找的：

```
switch(selectedLevel)
{
    case 0:
    activeScene = [level2_1Scene node];
    break;

    case 1:
    activeScene = [level2_2Scene node];
    break;

    // Etc....
}

if(activeScene) {
    [[CCDirector sharedDirector] replaceScene:activeScene];
} 
```

# javascript - JSON.stringify 后无法从图像路径中删除双引号

> ID：15544572
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:11:20.977
> 
> 标签：javascript, jquery-ui, jquery

我有一个 JSON 文件，其中的对象包含图像的文件路径。我正在尝试使用 jQuery 替换图像标签的 src attr 但无论我做什么，当我尝试更改源时，文件路径周围都有引号，最终在路径周围留下编码，因此失败.

我试过了：

*   decodeURI组件
*   正则表达式

两者都没有工作，但我非常愿意接受由于我的错误他们没有工作。

这是我现在拥有的代码：

```
getPics : function(){
    $.ajax({
        type : 'GET',
        url : this.BASE_URL +'js/image1.js',
        dataType : "json",
        success: function(data){
            var pic = data.images.image[0].image_one;
            console.log(pic);
            setTimeout(function(){
                var image = JSON.stringify(pic);
                image = image.replace(/\"([^(\")"]+)\":/g,"$1:");
                console.log(image); 
                $('#pic1 img').attr("src", image);
            }, 5000);
        }
    });
} 
```

问题部分是这里的这部分：

```
 setTimeout(function(){
                var image = JSON.stringify(pic);
                image = image.replace(/\"([^(\")"]+)\":/g,"$1:");
                console.log(image); 
                $('#pic1 img').attr("src", image);
            }, 5000); 
```

注意两个console.logs：'pic'的第一个打印一个干净的（iew/out引号）文件路径。奇怪的是，'image' 的 console.log 打印出相同的文件路径，但现在带有邪恶的双引号，这是失败的最终产品。看到的正则表达式似乎没有效果。

这是我正在使用的返回的 JSON：

```
{
"stat": "ok",
"images": {
    "image": [
        {
            "image_one": "images/image_1.jpg"
        }
    ]
} 
```

}

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:42:47.747

在没有 JSON.stringify 的情况下尝试一次，我认为它不是必需的。

# birt - 如何格式化出生日期报告参数？

> ID：15544573
> 
> 赞同：2
> 
> 时间：2013-03-21T10:11:21.557
> 
> 标签：birt

默认情况下，如果 BIRT 报告的输入参数是日期类型，则它采用`yyyy-MM-dd`格式。

我们可以更改为其他内容，例如可能`dd/MM/yyyy`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-30T11:37:34.670

您可以更改日期参数的输入格式。单击“更改...”选择格式为“自定义”，您可以根据需要输入有效的格式代码。

如果您想输入默认日期，您仍然必须使用`yyyy-MM-dd`格式，这无法更改（我`new Date()`在图片中使用的位置），但输出格式仍将是您输入的格式。

[![在此处输入图像描述](../Images/9caa7562d0c0ce28ca7d0da0589ddc20.png)](https://i.stack.imgur.com/oOaVb.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T08:02:17.513

另一种选择是使用 Birt 设计器中的日期时间格式部分，并为日期选择正确的区域设置和格式。

我已经在 Birt 3.7 中完成了它并且工作正常

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T13:39:53.467

有很多方法可以做到这一点，但最简单的方法是您可以在 SQL Query 本身中做到这一点。

如果您使用的是 DB2，您可以尝试

VARCHAR_FORMAT("您的列映射名称",'DD-Mon-YYYY') AS 数据集名称。

**但这会将其数据类型更改为字符串**

试试这是否有任何降神作用。

# python - 将 python 变量链接到 HTML 脚本

> ID：15544574
> 
> 赞同：0
> 
> 时间：2013-03-21T10:11:22.977
> 
> 标签：python, html

我编写了一个 Python 3.2 脚本，从 SQLite 3 数据库中提取了 18 个随机问题中的 10 个。该脚本工作正常，但我现在想使用 HTML 来呈现它——我知道如何在 HTML 中制作问题框，但不知道如何打印所问的问题，以代替“问题 1”占位符。

HTML 代码如下：

```
def PrintGame():
    print( """
    <html>
    <div id = "textbody">
            <h2>Quiz</h2>
                <form method="post" action="quiz.cgi">
                    <table border="0">
                        <tr>
                              <td>Question 1:</td>
                              <td><input type="text" name="A1"/></td>
                        </tr>
                        <tr>
                              <td>Question 2:</td>
                              <td><input type="text" name="A2"/></td>
                        </tr>
                        <tr>
                              <td>Question 3:</td>
                              <td><input type="text" name="A3"/></td>
                        </tr>
                        <tr>
                              <td>Question 4:</td>
                              <td><input type="text" name="A4"/></td>
                        </tr>
                        <tr>
                              <td>Question 5:</td>
                              <td><input type="text" name="A5"/></td>
                        </tr>
                        <tr>
                              <td>Question 6:</td>
                              <td><input type="text" name="A6"/></td>
                        </tr>
                        <tr>
                              <td>Question 7:</td>
                              <td><input type="text" name="A7"/></td>
                        </tr>
                        <tr>
                              <td>Question 8:</td>
                              <td><input type="text" name="A8"/></td>
                        </tr>
                        <tr>
                              <td>Question 9:</td>
                              <td><input type="text" name="A9"/></td>
                        </tr>
                        <tr>
                              <td>Question 10:</td>
                              <td><input type="text" name="A10"/></td>
                        </tr>
                        <tr>
                            <td><input type="submit" value="Submit Answers"></td>
                        </tr>
                    </table>
                </form>
             </div>
        </body>
    </html>
    """) 
```

澄清一下，我想用从 SQLite 3 数据库中提取的问题替换“问题 n”类型的东西。问题被加载到 QASKEDN 变量中（其中 N 被问题编号替换）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:27:00.750

听起来您只想要字符串格式，但使用灵活的格式字符串/变量。

我还没有检查过，但也许是这样的？

```
def PrintGame():
    htmlquestions = []
    for question in QASKEDN:
        htmlquestions.append("""
                        <tr>
                              <td>{} :</td>
                              <td><input type="text" name="A1"/></td>
                        </tr>""".format(question))
    html = ("""
    <html>
    <div id = "textbody">
            <h2>Quiz</h2>
                <form method="post" action="quiz.cgi">
                    <table border="0">""" 
    + "".join(htmlquestions) + 
    """                </table>
                </form>
             </div>
        </body>
    </html>
    """) 
```

*更新：*现在为最后几行打开三重双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:49:23.207

您可能想查看[Jinja](http://jinja.pocoo.org/docs/) - python 的模板语言。

在您的情况下，您的 Jinja 模板应该类似于

```
template_string = """
<html>
...
    {% for question, name in questions %}
      <tr>
          <td>{{question}}</td>
          <td><input type="text" name="{{name}}"/></td>
      </tr>
    {% endfor %}
...
</html>
""" 
```

然后从代码中加载模板字符串并调用渲染函数，将数据传递给它（在本例中为包含问题和名称的元组列表）

```
question_list = [("Q1", "name1"), ("Q2", "name2"), ...]
template = Template(template_string)
template.render(questions=questions_list) 
```

# asp.net - 'response.clear()' 会删除内容和标题吗？

> ID：15544578
> 
> 赞同：5
> 
> 时间：2013-03-21T10:11:29.693
> 
> 标签：asp.net, c#-4.0, response

我需要知道`Response.Clear()`是清除内容还是删除标题？换句话说，如果我使用`Response.Clear()`，我是否也需要使用`Response.ClearHeader()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T10:13:18.547

正如[MSDN](http://msdn.microsoft.com/en-us/library/ms525713%28v=vs.90%29.aspx)所说

> Clear 方法清除任何缓冲的 HTML 输出。但是，Clear 方法只删除响应正文；它不会删除响应标头。

清除标题使用`Response.ClearHeaders();`

# python - 将 JSON 对象排序到层次结构中

> ID：15544581
> 
> 赞同：4
> 
> 时间：2013-03-21T10:11:47.040
> 
> 标签：python, json

我需要将一个 JSON 数组整理成一个层次结构，这里是我的 JSON 文件，它从未排序，但遵循结构：

```
{
  "name":"Folder 2",
  "id":"zRDg",
  "parent":"OY00",
  "type":"folder"
},
{
  "name":"Folder 1",
  "id":"OY00",
  "type":"folder"
},
{
  "name":"Folder 3",
  "id":"ZDE1",
  "type":"folder"
},
{
  "name":"DX00025.jpg",
  "id":"9Xdd",
  "parent":"OY00",
  "type":"jpeg"
} 
```

进入这个JSON文件，结构是这样的：

```
{
  "name":"Folder 1",
  "id":"OY00",
  "type":"folder",
  "children": [{
    "name":"Folder 2",
    "id":"zRDg",
    "type":"folder"
    },
    {
    "name":"DX00025.jpg",
    "id":"9Xdd",
    "type":"jpeg"
  }]
},
{
    "name":"Folder 3",
    "id":"ZDE1",
    "type":"folder"
} 
```

我无法弄清楚，因为我是 python 新手，我的开始（错误）：

```
for index,item in result:
    if item['parent']:
        for item2 in result:
            if item2['id'] == item['parent']:
                item['children'] = item2
                brake 
```

这没关系，但问题是它不正确**python**，folder1/folder2/folder3/ 不会为此工作，我需要一个**递归函数**。我还应该包括这种结构更改，它可以是带有文件夹的文件夹和带有文件夹/文件夹的文件的任意组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T23:44:13.390

使用 Python [networkx](http://networkx.github.com/)库之类的东西怎么样？

```
import json
#networkx is a library for working with networks and trees
import networkx as nx
#The json_graph routines print out JSONic representations of graphs and trees
#http://networkx.github.com/documentation/latest/reference/readwrite.json_graph.html
from networkx.readwrite import json_graph

dd='[{ "name":"Folder 2", "id":"zRDg", "parent":"OY00", "type":"folder"},{ "name":"Folder 1", "id":"OY00", "type":"folder"},{"name":"Folder 3", "id":"ZDE1", "type":"folder"},{ "name":"DX00025.jpg", "id":"9Xdd", "parent":"OY00", "type":"jpeg"}]'
d=json.loads(dd)

#A tree is a directed graph - create one with a dummy root
DG=nx.DiGraph()
DG.add_node('root')

#Construct the tree as a directed graph and annotate the nodes with attributes
#Edges go from parent to child
for e in d:
  DG.add_node(e['id'],name=e['name'],type=e['type'])
  #If there's a parent, use it...
  if 'parent' in e: DG.add_edge(e['parent'],e['id'])
  #else create a dummy parent from the dummy root
  else: DG.add_edge('root',e['id'])

#Get the tree as JSON
data = json_graph.tree_data(DG,root='root')
#and dump the data from the dummy root's children down...
json.dumps(data['children'])

'''
'[{"children": [{"type": "folder", "name": "Folder 2", "id": "zRDg"}, {"type": "jpeg", "name": "DX00025.jpg", "id": "9Xdd"}], "type": "folder", "name": "Folder 1", "id": "OY00"}, {"type": "folder", "name": "Folder 3", "id": "ZDE1"}]'
''' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T12:39:12.210

```
myJson = [
    {
      "name":"Folder 2",
      "id":"zRDg",
      "parent":"OY00",
      "type":"folder"
    },
    {
      "name":"Folder 1",
      "id":"OY00",
      "type":"folder"
    },
    {
      "name":"Folder 3",
      "id":"ZDE1",
      "type":"folder"
    },
    {
      "name":"DX00025.jpg",
      "id":"9Xdd",
      "parent":"OY00",
      "type":"jpeg"
    }
]

#this creates a dictionary that maps id names to JSON items.
#ex. itemsKeyedById["9Xdd"] gives the jpg item with id "9Xdd"
itemsKeyedById = {i["id"]: i for i in myJson}

#iterate through each item in the `myJson` list.
for item in myJson:
    #does the item have a parent?
    if "parent" in item:
        #get the parent item
        parent = itemsKeyedById[item["parent"]]
        #if the parent item doesn't have a "children" member, 
        #we must create one.
        if "children" not in parent:
            parent["children"] = []
        #add the item to its parent's "children" list.
        parent["children"].append(item)

#filter out any item that has a parent.
#They don't need to appear at the top level, 
#since they will appear underneath another item elsewhere.
topLevelItems = [item for item in myJson if "parent" not in item]
print topLevelItems 
```

输出（我添加了缩进）：

```
[
    {
        'name': 'Folder 1', 
        'id': 'OY00',
        'type': 'folder',
        'children': [
            {
                'name': 'Folder 2', 
                'id': 'zRDg',
                'parent': 'OY00', 
                'type': 'folder'
            }, 
            {
                'name': 'DX00025.jpg', 
                'id': '9Xdd',
                'parent': 'OY00', 
                'type': 'jpeg' 
            }
        ]
    }, 
    {
        'name': 'Folder 3', 
        'id': 'ZDE1',
        'type': 'folder'
    }
 ] 
```

它也适用于嵌套超过一层的项目。示例输入：

```
myJson = [
    {
        "name":"TopLevel folder",
        "id":"0",
        "type":"folder",
    },
    {
        "name":"MidLevel folder",
        "id":"1",
        "type":"folder",
        "parent":"0"
    },
    {
        "name":"Bottom Level folder",
        "id":"2",
        "type":"folder",
        "parent":"1"
    },
    {
        "name":"Vacation Picture",
        "id":"3",
        "type":"jpg",
        "parent":"2"
    },
] 
```

输出：

```
[
    {
        'type': 'folder', 
        'name': 'TopLevel folder', 
        'id': '0',
        'children': [
            {
                'type': 'folder', 
                'name': 'MidLevel folder', 
                'parent': '0', 
                'id': '1',
                'children': [
                    {
                        'type': 'folder', 
                        'name': 'Bottom Level folder', 
                        'parent': '1', 
                        'id': '2',
                        'children': [
                            {
                                'type': 'jpg', 
                                'name': 'Vacation Picture', 
                                'parent': '2', 
                                'id': '3'
                            }
                        ] 
                    }
                ]
            }
        ]
    }
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T05:41:47.650

我对这种情况的解决方案是这样的：

```
data = INPUT_LIST

class Item:
    def __init__(self, _id, name, type, parent):
        self._id = _id
        self.name = name
        self.type = type
        self.parent = parent
        self.children = []

    def get_dict(self):
        return {
            'id': self._id,
            'name': self.name,
            'type': self.type,
            'children': [child.get_dict() for child in self.children]
        }

lookup = dict((item['id'], Item(item['id'], item['name'], item['type'], item['parent'] if 'parent' in item else None)) for item in data)

root = []

for _id, item in lookup.items():
    if not item.parent:
        root.append(item)
    else:
        lookup[item.parent].children.append(item)

dict_result = [item.get_dict() for item in root] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-28T20:33:25.887

您在这里拥有的是一个图（可能只是一棵树），其中节点之间的连接由一个`parent`键表示。这称为[邻接表](http://en.wikipedia.org/wiki/Adjacency_list)。

您想通过作为`children`其他节点列表的键生成一个树结构，其中包含到其他节点的链接。

要将邻接表转换为树，首先需要有一种方法通过其 id 检索节点，因此第一步是创建每个节点的字典，以 id 为键。

然后你必须再次浏览列表并将孩子添加到他们的父母中。

最后，制作一个没有父节点（根节点）的节点列表。

请注意，您根本不需要递归算法。

我们可以结合其中一些步骤来避免多次遍历列表。下面的代码：

```
def nest_list(L):
    """Modify list of associative dicts into a graph and return roots of graph

    Association is via a 'parent' key indicating a corresponding 'id'.
    Items in the list *will be modified*.
    Children will be placed in a list for a 'children' key
    Items without children will have no 'children' key
    'parent' keys will be removed.

    Returned list is the full list of items which are not children of
    any other items.
    """
    idx = {}
    children = []
    root = []
    # first pass: index items by id
    # if the item has no parents, put it in the 'root' list
    # otherwise add it to the 'children' list which we will
    # process in a second pass
    for item in L:
        idx[item['id']] = item
        if 'parent' in item:
            children.append(item)
        else:
            root.append(item)

    # second pass: find the parents of our children
    for child in children:
        parent = idx[child['parent']]
        del child['parent']
        try:
            # retrieve the list of children for this
            # parent
            childlist = parent['children']
        except KeyError:
            # this item has received no children so far
            # so we need to make a 'children' key and list
            # for it.
            parent['children'] = childlist = []
        # append this child to the parent's list of children
        childlist.append(child)

    #all done: return new root list
    return root 
```

代码在行动：

```
oldlist = [{
  "name":"Folder 2",
  "id":"zRDg",
  "parent":"OY00",
  "type":"folder"
},
{
  "name":"Folder 1",
  "id":"OY00",
  "type":"folder"
},
{
  "name":"Folder 3",
  "id":"ZDE1",
  "type":"folder"
},
{
  "name":"DX00025.jpg",
  "id":"9Xdd",
  "parent":"OY00",
  "type":"jpeg"
}]

expected = [{
  "name":"Folder 1",
  "id":"OY00",
  "type":"folder",
  "children": [{
    "name":"Folder 2",
    "id":"zRDg",
    "type":"folder"
    },
    {
    "name":"DX00025.jpg",
    "id":"9Xdd",
    "type":"jpeg"
  }]
},
{
    "name":"Folder 3",
    "id":"ZDE1",
    "type":"folder"
}]

from pprint import pprint
newlist = nest_list(oldlist)
pprint(newlist)
assert newlist == expected 
```

# php - 安装后运行 Image magick 代码

> ID：15544582
> 
> 赞同：0
> 
> 时间：2013-03-21T10:11:48.827
> 
> 标签：php, imagemagick, centos, imagick

我刚刚在我的 centos .using 中安装了 Imagemagick 和 imagick

```
yum install ImageMagick
yum install ImageMagick-devel

cd /root
wget http://pecl.php.net/get/imagick-3.0.1.tgz
tar zxf imagick-3.0.1.tgz
cd imagick-3.0.1
phpize
./configure
make
make install 
```

安装顺利，没有任何错误，但现在我正在尝试运行，php ImageMagick 代码

```
<?php  
$cmd = " -background none -pointsize 60 -font DRAGM.ttf -fill red ". 
 " -strokewidth 1 -stroke black label:\"myexample\" "; 

exec("convert $cmd coloured_font.png"); 
?> 
```

**编辑：**我也试过这个代码......但它仍然显示一个空白页......

```
<?php
/* Create some objects */
$image = new Imagick();
$draw = new ImagickDraw();
$pixel = new ImagickPixel( 'gray' );

/* New image */
$image->newImage(800, 75, $pixel);

/* Black text */
$draw->setFillColor('black');

/* Font properties */
$draw->setFont('Bookman-DemiItalic');
$draw->setFontSize( 30 );

/* Create text */
$image->annotateImage($draw, 10, 45, 0, 'The quick brown fox jumps over the lazy dog');

/* Give image a format */
$image->setImageFormat('png');

/* Output the image with headers */
header('Content-type: image/png');
echo $image; 
```

php.info 显示

**imagick 模块** 启用 **imagick 模块版本** 3.0.1 **imagick 类**Imagick、ImagickDraw、ImagickPixel、ImagickPixelIterator **ImageMagick 版本**ImageMagick 6.5.4-7 2012-05-07 Q16 OpenMP [http://www.imagemagick.org](http://www.imagemagick.org) **ImageMagick 版权所有** Copyright (C) 1999- 2009 ImageMagick Studio LLC **ImageMagick 发布日期** 2012-05-07 **ImageMagick 支持的格式数量：** 198 **ImageMagick 支持的格式** A、AI、ART、ARW、AVI、AVS、B、BGR、BMP、BMP2、BMP3、BRF、BRG、C、CALS、CAPTION、CIN、CIP、CLIP、CMYK、CMYKA、CR2、CRW、CUR、CUT、 DCM，DCR，DCX，DDS，DFONT，DNG，DOT，DPS，DPX，EPDF，EPI，EPS，EPS2，EPS3，EPSF，EPSI，EPT，EPT2，EPT3，ERF，FAX，FITS，FRACTAL，FTS，G， G3，GBR，GIF，GIF87，渐变，灰色，GRB，HALD，直方图，HRZ，HTM，HTML，ICB，ICO，ICON，INFO，INLINE，IPL，ISOBRL，JNG，JP2，JPC，JPEG，JPG，JPX， K，K25，KDC，标签，M，M2V，M4V，MAP，MAT，MATTE，MIFF，MNG，MONO，MOV，MP4，MPC，MPEG，MPG，MRW，MSL，MSVG，MTV，MVG，NEF，NULL， O，ORF，OTB，OTF，PAL，PALM，PAM，PATTERN，PBM，PCD，PCDS，PCL，PCT，PCX，PDB，PDF，PDFA，PEF，PFA，PFB，PFM，PGM，PGX，PICON，PICT， PIX, PJPEG, PLASMA, PNG, PNG24, PNG32, PNG8, PNM, PPM, PREVIEW, PS, PS2, PS3, PSD, PTIF, PWP, R, RADIAL-GRADIENT, RAF, RAS, RBG, RGB, RGBA, RGBO, RLA、RLE、SCR、SCT、SFW、SGI、SHTML，SR2，SRF，STEGANO，SUN，SVG，SVGZ，文本，TGA，缩略图，TIFF，TIFF64，瓷砖，TIM，TTC，TTF，TXT，UBRL，UIL，UYVY，VDA，VICAR，VID，VIFF，VST， WBMP、WMF、WMV、WMZ、WPG、X、X3F、XBM、XC、XCF、XPM、XPS、XV、XWD、Y、YCbCr、YCbCrA、YUV

理想情况下，它应该使用文本创建图像`myexample`，但它不起作用，有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:54:37.360

看看你的“-font DRAGM.ttf”。尝试设置或“/full/path/to/font.ttf”，或者只是字体名称。可用的字体名称列表：来自控制台的“convert -list font”。

# matlab - 查找唯一朱利安日期的第一个和最后一个值

> ID：15544583
> 
> 赞同：1
> 
> 时间：2013-03-21T10:11:53.180
> 
> 标签：matlab

我有一个类似于以下的数据集：

```
bthd = sort(floor(1+(10-1).*rand(10,1)));
bthd2 = sort(floor(1+(10-1).*rand(10,1)));
bthd3 = sort(floor(1+(10-1).*rand(10,1)));

Depth = [bthd;bthd2;bthd3];
Jday = [repmat(733774,10,1);repmat(733775,10,1);repmat(733776,10,1)];

temp = 10+(30-10).*rand(30,1);

Data = [Jday,Depth,temp]; 
```

我有一个类似于“数据”的矩阵，第一列是朱利安日期，第二列是深度，第三列是温度。我想找出每个唯一 Jday 的第一个和最后一个值是什么。这可以通过以下方式获得：

```
Data = [Jday,Depth,temp];

[~,~,b] = unique(Data(:,1),'rows');

for j = 1:length(unique(b));
    top_temp(j) = temp(find(b == j,1,'first'));
    bottom_temp(j) = temp(find(b == j,1,'last'));
end 
```

但是，我的数据集非常大，使用此循环会导致运行时间很长。谁能建议一个矢量化的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:17:41.977

使用[`diff`](http://www.mathworks.com/help/matlab/ref/diff.html)：

```
% for example
Jday = [1 1 1 2 2 3 3 3 5 5 6 7 7 7];
last = find( [diff(Jday) 1] );
first = [1 last(1:end-1)+1];
top_temp = temp(first) ;
bottom_temp = temp(last); 
```

请注意，此解决方案假定`Jday`已排序。如果不是这种情况，您可以`sort` `Jday`先执行建议的程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:35:05.407

您应该能够使用`unique`函数的出现选项来完成此操作：

```
[~, topidx, ~] = unique(Data(:, 1), 'first', 'legacy');
[~, bottomidx, ~] = unique(Data(:, 1), 'last', 'legacy');

top_temp = temp(topidx);
bottom_temp = temp(bottomidx); 
```

如果您使用的是 MATLAB R2013a，则需要使用 legacy 选项。如果您运行的是 R2012b 或更早版本，您应该能够将其删除。

# ant - ant 在文件夹内迭代

> ID：15544590
> 
> 赞同：0
> 
> 时间：2013-03-21T10:12:11.073
> 
> 标签：ant, ant-contrib

我尝试使用以下脚本获取文件夹的文件名

```
 <target name="test1" depends ="init">
       <fileset id="appendJars" dir="${ant.dir}/test">
        <include name="*.txt" />
    </fileset>
    <pathconvert property="files" refid="appendJars" pathsep="," />

    <echo message="files: ${files}"  />
    <for list="${files}" param="f">

        <sequential>
        <echo>@{f}</echo>
            <antcall target="test2">
            <param name="fileName"  value="@{f}" />
            </antcall>
        </sequential>
        </for>  
</target> 
```

我得到的文件名为 E:/ant/test/1.txt ...我只想得到 1.txt 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:15:12.867

您可以使用`<basename/>`任务来获取文件名。更多信息可以在[这里](http://ant.apache.org/manual/Tasks/basename.html)找到。

# html - 地理标记图像

> ID：15544598
> 
> 赞同：5
> 
> 时间：2013-03-21T10:12:27.983
> 
> 标签：html, geotagging

我想使用纯 HTML5 来尝试测试它对带有位置的图像进行地理标记的能力。如何在 HTML5 中做到这一点？

我已经使用谷歌找到答案，但无济于事。我确信以前有人问过这个问题，但找不到类似的问题，而且似乎很少有例子。

我有它的检索位置工作，只需要加载图像并用位置标记它并将其保存到本地存储。

这里的任何帮助将不胜感激。

# maven - 想知道Maven项目结构

> ID：15544600
> 
> 赞同：0
> 
> 时间：2013-03-21T10:12:35.560
> 
> 标签：maven

我正在做一个 Maven 项目，我想知道它的基本结构。我知道有一个 pom.xml 定义了项目中涉及的工件。但是在我的项目中，有 5 个 pom.xml。所以我想知道 pom 的确切作用是什么以及我们如何处理依赖关系。

感谢是否有人可以建议任何可以指导的有用书籍或资源。

问候阿努拉格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:34:37.320

假设它是一个java项目，基本结构是：

```
Parent Dir
-src/main/java/        java source files for the application (included in the JAR/WAR)
-src/main/resourcs/    resource files, xml, properties, etc (included in the JAR/WAR)
-src/test/java/        java source files for tests (only used during testing)
-src/test/resources/   resource files for testing (only used during testing) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:25:32.390

您可以参考链接以了解有关 POM 的更多信息

[http://maven.apache.org/pom.html](http://maven.apache.org/pom.html)
[http://www.tutorialspoint.com/maven/maven_pom.htm](http://www.tutorialspoint.com/maven/maven_pom.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:16:39.510

Read Sonatype's "Maven: The Definitive Guide" (also known as "Maven By Example"). The book is available for free from their site, or you can buy it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:23:03.517

您可以从[http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)开始，我可以推荐“Maven 示例：目录/文档 Sonatype”一书。祝你好运！

# go - 构建 Go 项目时出现“nosplit stack overflow”？

> ID：15544601
> 
> 赞同：9
> 
> 时间：2013-03-21T10:12:36.487
> 
> 标签：go

我通过将代码拆分为更多 Go 包对代码进行了大扫除，主要是为了提高可重用性（每个“构建块”都在自己的包中）。

修复导入错误后，我发现我的程序突然无法构建。运行“go build”会返回*nosplit 堆栈溢出*错误。

> # 机器人 main.init：nosplit 堆栈溢出
> 
> ```
>  120     guaranteed after split check in main.init
>     112     on entry to robot/web.init
>     104     on entry to robot/controller.init
>     96      on entry to robot/slam.init
>     88      on entry to robot/slam/hector.init
>     80      on entry to hectormapping/map/mapimages.init
>     72      on entry to hectormapping/map/maprep.init
>     64      on entry to hectormapping/map/mapproccontainer.init
>     56      on entry to hectormapping/scanmatcher.init
>     48      on entry to hectormapping/map/gridmap/occbase.init
>     40      on entry to hectormapping/map/gridmap/base.init
>     32      on entry to hectormapping/map/gridmap.init
>     24      on entry to github.com/skelterjohn/go%2ematrix.init
>     16      on entry to math.init
>     8       on entry to math.init┬À1
>     0       on entry to runtime.panicindex
>     -8      on entry to runtime.morestack00 
> ```
> 
> # runtime.main: nosplit 堆栈溢出
> 
> ```
>  120     guaranteed after split check in runtime.main
>     128     after runtime.main uses -8
>     120     on entry to main.init
>     112     on entry to robot/web.init
>     104     on entry to robot/controller.init
>     96      on entry to robot/slam.init
>     88      on entry to robot/slam/hector.init
>     80      on entry to hectormapping/map/mapimages.init
>     72      on entry to hectormapping/map/maprep.init
>     64      on entry to hectormapping/map/mapproccontainer.init
>     56      on entry to hectormapping/scanmatcher.init
>     48      on entry to hectormapping/map/gridmap/occbase.init
>     40      on entry to hectormapping/map/gridmap/base.init
>     32      on entry to hectormapping/map/gridmap.init
>     24      on entry to github.com/skelterjohn/go%2ematrix.init
>     16      on entry to math.init
>     8       on entry to math.init┬À1
>     0       on entry to runtime.panicindex
>     -8      on entry to runtime.morestack00 
> ```

有谁知道这是关于什么的？我找不到太多关于可能导致它的文档，除了在某些情况下这是[一个据称已修复的错误](https://code.google.com/p/go/issues/detail?id=3085)。

部分代码被拆分到“src”文件夹中的一个新文件夹中，因此文件结构现在为：

```
src/robot/main.go (main() lives here)
src/robot/(...) (application-specific packages)
src/hectormapping/(...) (stand-alone package used in "robot") 
```

我在 Windows 7 (x64) 上使用 Go 1.0.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T01:11:35.570

这似乎与[此处](https://groups.google.com/forum/?fromgroups=#!topic/golang-dev/RhsK9ljAklM)描述的相同，据说是固定在尖端中的。可以在[此处查看](https://codereview.appspot.com/6855088/)相应的修复程序。

总结一下我所看到的问题： [拆分堆栈](http://gcc.gnu.org/wiki/SplitStacks)用于增长堆栈而不是传统的固定内存区域。这样做的好处是可以生成更多线程，因为实际上只保留了所需的堆栈内存。这里的问题似乎是链接器将不使用拆分堆栈上的内存的函数意外标记为“nosplit”，因为它没有找到拆分堆栈序言。这会导致链接器计算错误的堆栈限制，进而让链接器认为没有空间并向您抛出错误消息。

可悲的是，获得尖端版本的唯一方法是自己编译它。正如 Nick Craig-Wood 已经提到的，您可以在[此处](http://golang.org/doc/install/source)找到说明。如果您真的无法升级，您可以尝试通过在`init`函数中分配一些任意局部变量来解决此问题。但这当然很混乱。

# java - 如何从Android中没有扩展名的文件中获取数据？

> ID：15544604
> 
> 赞同：0
> 
> 时间：2013-03-21T10:12:47.793
> 
> 标签：java, android, parsing, character-encoding

我有一个文件，我想解析这个文件中的数据。我试过了，但我无法获得我想要的数据。我试图复制/粘贴我的 .data 文件，但由于文件中包含某些字符，它不起作用。

我的文件链接[http://bit.ly/11meGwG](http://bit.ly/11meGwG)

不知道这是什么类型的文件？

如何解码？

```
InputStream is = null;
is = getResources().openRawResource(R.raw.myfile);
InputStreamReader isr = null;
isr = new InputStreamReader(is);
BufferedReader br=new BufferedReader(isr);
StringBuilder sb=new StringBuilder();
String line;
try {
    while((line=br.readLine())!=null){
        System.out.println(line);
        sb.append(line+"\n");

    }
    isr.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:01:44.573

您正在使用`openRawResource()`. `assets/`这与您的文件夹无关。`openRawResource()`用于您的`res/raw/`文件夹。

用于`getAssets().open()`在`assets/`.

# javascript - 引导程序：折叠组内的折叠组

> ID：15544608
> 
> 赞同：5
> 
> 时间：2013-03-21T10:12:54.153
> 
> 标签：javascript, jquery, html, twitter-bootstrap, collapsable

我使用了来自[jsfiddle 68RXP](http://jsfiddle.net/Sherbrow/68RXP/) `collapse-group`的示例来创建一个可扩展的 div：

HTML：

```
<div class="span4 collapse-group">
     <h2>Heading</h2>
     <p class="collapse">Lorem ipsum</p>
     <p><a class="btn" href="#">View details &raquo;</a></p>
</div> 
```

Javascript：

```
$('.row .btn').on('click', function(e) {
    e.preventDefault();
    var $this = $(this);
    var $collapse = $this.closest('.collapse-group').find('.collapse');
    $collapse.collapse('toggle');
}); 
```

`btn`按下时，类`p`在展开和折叠模式之间切换。

我尝试对递归可折叠 div 使用相同的概念：

```
<div class="collapse-group">
    <p><a class="btn" href="#">Open outer div &raquo;</a></p>
    <div class="collapse">
        <h2>Outer div title</h2>
        <p>Outer div text</p>
        <div class="collapse-group">
            <p><a class="btn" href="#">Open inner div &raquo;</a></p>
            <div class="collapse">
                <h2>Inner div title</h2>
                <p>Inner div text</p>
             </div>
         </div>
    </div>
</div> 
```

与之前相同的 js 代码，请参见[jsFiddle WdbUe](http://jsfiddle.net/adamatan/WdbUe/3/)。

第一次打开外部可折叠 div 时，内部 div 也会打开。**如何将每个`expand`按钮耦合到一个可折叠的 div？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T11:12:25.327

我`data-toggle="collapse" data-target="#some_id"`为每个可折叠对象使用了一个不同的 id `div`：

```
<div class="container">
    <div class="hero-unit">
        <h2>Bootstrap-jQuery collapse example</h2>
        <p>Based on <a href="http://jsfiddle.net/Sherbrow/68RXP/">fiddle 68RXP</a></p>  
        <div class="collapse-group">
            <p><a class="btn" data-toggle="collapse" data-target="#demoout">Open outer div &raquo;</a></p>
            <div class="collapse in" id="demoout">
                <h1>Outer div title</h1>
                <p>Outer div text</p>

                <div class="collapse-group">
                    <p><a class="btn" data-toggle="collapse" data-target="#demoin">Open inner div &raquo;</a></p>
                    <div class="collapse in"  id="demoin">
                        <h2>Inner div title</h2>
                        <p>Inner div text</p>

                     <div class="collapse-group">
                    <p><a class="btn" data-toggle="collapse" data-target="#demoinin">Open inner div &raquo;</a></p>
                    <div class="collapse in"  id="demoinin">
                        <h3>Inner-inner div title</h3>
                        <p>Inner-inner div text</p>
                    </div>
                    </div>    
                    </div>
                 </div>
            </div>
        </div>
    </div>
</div> 
```

使用此`js`代码：

```
$(document).ready(function(){
          $(".collapse").collapse();
}); 
```

工作示例：[jsfiddle K63P3](http://jsfiddle.net/adamatan/K63P3/5/)

信用：[aximay@jsbin](http://jsbin.com/aximay/155/edit)。

# android - 如何在 Android 中获取像素颜色？

> ID：15544609
> 
> 赞同：1
> 
> 时间：2013-03-21T10:12:54.707
> 
> 标签：android

我已将 PNG 图像（具有透明背景的图像）设置为按钮背景，当我触摸按钮时，它会显示按钮触摸位置的 X 坐标和 Y 坐标，但是我想知道触摸位置的像素颜色按钮。

其实我想知道触摸的位置是按钮的透明区域还是按钮的彩色区域。您可以查看我为此目的开发的代码。请在这方面帮助我；您的帮助将不胜感激。

```
 button.setOnTouchListener(new OnTouchListener() 
        {
            public boolean onTouch(View v, MotionEvent event) 
            {

                int x_coordinate  = (int)event.getX(); 
                int y_coordinate = (int)event.getY(); 

            //int color = Bitmap.getPixel(x,y);

            if (event.getAction() == MotionEvent.ACTION_DOWN) 
                {
                }

            if (event.getAction() == MotionEvent.ACTION_UP) 
                {
                }

                return true;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:19:45.443

尝试这个

```
Drawable drawable = button.getBackground();
Bitmap bmp = ((BitmapDrawable) drawable).getBitmap();
int color = bmp.getPixel(x_coordinate, y_coordinate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T10:21:04.710

首先，您可以像这样使用*BitmapFactory*获取位图：
`Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.pic1);`

现在你有了位图。在这个位图上，你可以调用函数`getPixel(int x, int y)`来获取这个像素的颜色。
我想你可以从那个颜色中得到 alpha ..

有关详细信息，请参阅以下链接：

*   [位图示例](http://www.developer.com/ws/android/programming/Working-with-Images-in-Googles-Android-3748281.htm)
*   [获取像素（..）](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixel%28int,%20int%29)
*   [安卓颜色](http://developer.android.com/reference/android/graphics/Color.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T10:27:54.600

尝试这个

```
 Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.picture);
    int color=bitmap.getPixel(x_coordinate, y_coordinate); 
```

在 if 语句中使用此颜色来执行所需的操作

# php - MongoDB查询找出集合的所有数组元素

> ID：15544612
> 
> 赞同：0
> 
> 时间：2013-03-21T10:13:03.857
> 
> 标签：php, mongodb, mongodb-php, nosql

我有一个相当大的 MongoDB 文档，其中包含各种数据。我需要识别集合中数组类型的字段，以便我可以从我将填充的网格中显示的字段中删除它们。

我的方法现在包括检索集合中的所有字段名称

*这取自此处发布的响应[MongoDB Get names of all keys in collection](https://stackoverflow.com/questions/2298870/mongodb-get-names-of-all-keys-in-collection)*

```
mr = db.runCommand({
  "mapreduce" : "Product",
  "map" : function() {
    for (var key in this) { emit(key, null); }
  },
  "reduce" : function(key, stuff) { return null; }, 
  "out": "things" + "_keys"
})

db[mr.result].distinct("_id") 
```

并为每个字段运行一个像这样的查询

```
db.Product.find( { $where : "Array.isArray(this.Orders)" } ).count() 
```

如果检索到任何内容，则该字段被视为一个数组。

我不喜欢我需要运行 n+2 个查询（n 是我的集合中不同字段的数量）并且我不想对模型中的字段进行硬编码。它会破坏使用 MongoDB 的全部目的。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:42:28.003

我对您上面提供的代码做了一些细微的修改：

```
mr = db.runCommand({
  "mapreduce" : "Product",
  "map" : function() {
    for (var key in this) { 
       if (Array.isArray(this[key])) {
          emit(key, 1); 
       } else {
          emit(key, 0);
       }
    }
  },
  "reduce" : function(key, stuff) { return Array.sum(stuff); }, 
  "out": "Product" + "_keys"
}) 
```

现在，映射器将为包含数组的键发出 1，为任何不包含数组的键发出 0。reducer 会将这些总结起来，以便在您检查最终结果时：

```
db[mr.result].find() 
```

您将看到您的字段名称以及其中包含数组值的文档数量（以及任何从不为数组的 0）。

因此，这应该会为您提供仅使用 map-reduce 作业的哪些字段包含 Array 类型。

--

只是用一些数据来查看它：

```
db.Product.insert({"a":[1,2,3], "c":[1,2]})
db.Product.insert({"a":1, "b":2})
db.Product.insert({"a":1, "c":[2,3]}) 
```

（现在运行上面的“mr =”代码）

```
db[mr.result].find()
{ "_id" : "_id", "value" : 0 }
{ "_id" : "a", "value" : 1 }
{ "_id" : "b", "value" : 0 }
{ "_id" : "c", "value" : 2 } 
```

# android - Android 4.2：主活动操作栏隐藏启动新活动

> ID：15544613
> 
> 赞同：0
> 
> 时间：2013-03-21T10:13:12.273
> 
> 标签：android, android-activity, android-actionbar

我正在开发一个 android 应用程序，在 MainActivity 中我正在为应用程序创建带有选项卡的操作栏。我确实为操作栏的选项卡单击设置了侦听器，该操作栏在应用程序中启动了新活动……直到一切正常。问题是：当在选项卡单击上创建新活动时，未显示应用程序的 ActionBar（在主活动中创建）....它显示应用程序图标和名称，但没有我在主活动中创建的选项卡。

我没有使用任何受支持的库来支持以前版本的 android。我使用的是安卓 4.2。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:19:21.100

[一种解决方案是扩展 onCreateOptionMenu 方法，如此处](https://stackoverflow.com/questions/11779340/see-action-bar-across-all-activities-android)所示。

[这](https://stackoverflow.com/questions/14294021/share-actionbar-between-different-activities)为可能的解决方案提供了一些指导，使用片段而不是活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:30:56.460

我认为这个问题的第一个答案可能会对您有所帮助： [Android - Switch Tabs from within an Activity within a tab](https://stackoverflow.com/questions/2541802/android-switch-tabs-from-within-an-activity-within-a-tab)

特别是示例源代码的链接

# .net - 行添加/删除事件？（基础设施Wingrid）

> ID：15544616
> 
> 赞同：0
> 
> 时间：2013-03-21T10:13:19.140
> 
> 标签：.net, winforms, infragistics

我需要更新 WinGrid（WinForms 项目）附近标签上的行数。

网格更新以不同的方式进行 - 数据源更改、手动添加/删除、sql 初始化等。

当 Grid 更改行号（包括数据源更改）时，是否会引发通用事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:34:20.373

我假设您正在绑定到具有更改通知的列表，例如 BindingList 或 DataSet/DataTable。如果您将项目添加到数据源并且它们显示在网格中，那么这必须是正确的，因为网格依赖于来自数据源的事件来知道它需要更新。

在这种情况下，您可以绑定到您的网格绑定到的列表的 ListChanged 事件。此事件是[IBindingList 接口](http://msdn.microsoft.com/en-us/library/system.componentmodel.ibindinglist.aspx)的一部分。

如果您要绑定到 DataTable/DataSet，那么您将需要使用 DataTable 的 DefaultView 公开的事件，因为这是实现 IBindingList 和网格实际绑定的内容。

如果您使用的是实现 INotifyCollectionChanged 而不是 IBindingList 的集合，那么您将使用 CollectionChanged 事件。如果您正在进行 WPF 开发，这更有可能发生，因为这是 ObservableCollection 用于更改通知的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:44:32.603

以我的经验，不，当行数更改时，不会调用全局事件。
我对此的最佳解决方案是一个通用方法，该方法将从可以修改显示行数的各种事件中调用。

像这样的东西

```
private void UpdateRowsCount(UltraGrid grd, string messageFmt = "Rows count: {0}")
{
    labelRowCount.Text = string.Format(messageFmt, grd.Rows.FilteredInRowCount);
} 
```

那么应该处理的事件：

*   grd_AfterRowFilterChanged // 如果您启用了过滤，请不要忘记这一点
*   grd_AfterRowsDeleted
*   grd_AfterRowInsert

当然，在设置数据源之后。

```
 grd.DataSource = myDataTable;
 this.UpdateRowsCount(grd, "Customers count: {0}"); 
```

如果有人对这个问题有更好的了解，我会对不同的方法非常感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:47:05.277

最后，我手动确定了将行添加到网格的位置，并相应地更新了计数标签。

所以，我没有使用 Grid 事件。

# list - 无法点击煎茶中的列表项目

> ID：15544617
> 
> 赞同：0
> 
> 时间：2013-03-21T10:13:19.537
> 
> 标签：list, sencha-touch-2, containers, tap

我在容器中添加了两个按钮，现在点击列表项不起作用。请帮忙。

代码

```
Ext.define('X.SelectCategories', {
extend: 'Ext.Container',
xtype: 'selectcategorypanel',
id: 'SelectCategories',
requires:[

],

initialize:function(){
   this.callParent();

    jsonObject = Ext.create('Tablet').make_webservice_call('get_categories');

    Ext.getCmp('select_category_list').setData(jsonObject.info);
    console.log(jsonObject.info);
    //this.getNavigationBar.hide();

},

config: {
    //title : 'Select Categories',
    //iconCls: 'team',
    //styleHtmlContent: true,
   // scrollable: true,
    layout: {
        type: 'fit'
    },
    items: [

        {
            //fullscreen: true,
            mode: 'MULTI',
            /*
            layout: {
                type: 'fit'
            },
            */
            //title:'Select Categories',
            xtype: 'list',
            itemTpl: '{name}',
            autoLoad: true,
            id:'select_category_list',
            store: {
                fields: ['name','title']

            }

        },

        {
            xtype: 'container',
            //fullscreen: true,
            layout: {
                type: 'vbox'
            },
            flex : 1,
            layout: {
                type : 'hbox',
                align: 'bottom'
            },
            defaults: {
                xtype : 'button',
                flex  : 1,
                margin: 10
            },

            items: [
                {ui: 'round',ui:"confirm" ,text: 'Save',id: 'categorysaveButton'},
                {ui: 'round', ui:"decline" ,text: 'Reset',id: 'categoryresetButton'}
            ]

        }

    ]

}

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:08:43.163

尝试扩展 Navigationview `extend: 'Ext.navigation.View',`

# node.js - node.js EventEmitter 导致范围问题

> ID：15544627
> 
> 赞同：1
> 
> 时间：2013-03-21T10:13:48.080
> 
> 标签：node.js, event-handling, this

在使用 nodejs 事件系统时，我遇到了一个烦人的问题。如下代码所示，当监听器捕获事件时，事件发射器对象在回调函数中拥有“this”，而不是监听器。

如果将回调放在监听器的构造函数中，这不是一个大问题，因为除了指针'this'之外，你仍然可以使用构造函数范围内定义的其他变量，例如'self'或'that'方式。

但是，如果回调像原型方法一样放在构造函数之外，在我看来，没有办法获取侦听器的“this”。

不太确定是否有其他解决方案。而且，对于为什么 nodejs 事件发出使用发射器作为侦听器的调用者安装有点困惑？

```
util = require('util');
EventEmitter = require('events').EventEmitter;

var listener = function () {
    var pub = new publisher();
    var self = this;
    pub.on('ok', function () {
        console.log('by listener constructor this: ', this instanceof listener);
        // output: by listener constructor this:  false

        console.log('by listener constructor self: ', self instanceof listener);
        // output: by listener constructor this:  true
    })
    pub.on('ok', this.outside);
}

listener.prototype.outside = function () {
    console.log('by prototype listener this: ', this instanceof listener);
    // output: by prototype listener this:  false
    // how to access to listener's this here?
}

var publisher = function () {
    var self = this;

    process.nextTick(function () {
        self.emit('ok');
    })
}

util.inherits(publisher, EventEmitter);

var l = new listener(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:22:08.840

尝试将侦听器显式绑定到回调：

```
pub.on('ok', this.outside.bind(this)); 
```

# ruby - 我们可以将图形转换为 ruby 中的集合吗

> ID：15544632
> 
> 赞同：0
> 
> 时间：2013-03-21T10:14:05.253
> 
> 标签：ruby, ruby-rgl

如何将下图转换为“集合”。因为我有一个图表。我需要检查该图是该图的子集。

```
require 'rgl/adjacency'
dg = RGL::DirectedAdjacencyGraph[1,2,3,4,5,6,3,2,4] 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:06:17.400

该`to_set`方法将为您完成。

```
require 'rgl/adjacency'

dg = RGL::DirectedAdjacencyGraph[1,2,3,4,5,6,3,2,4]
dg_subgraph =  RGL::DirectedAdjacencyGraph[1,2]

dg_subgraph.to_set.subset? dg.to_set # => true 
```

**为什么？**

根据[https://github.com/javanthropus/rgl/blob/master/lib/rgl/adjacency.rb#L11](https://github.com/javanthropus/rgl/blob/master/lib/rgl/adjacency.rb#L11)

> > 表示一个顶点的邻接表的类，默认是一个 Set

除非您另有配置。

# c# - 使用 WorldPay 验证付款金额

> ID：15544633
> 
> 赞同：3
> 
> 时间：2013-03-21T10:14:13.723
> 
> 标签：c#, asp.net, validation, worldpay

我们正在使用 WorldPay 处理分级会员系统的付款，该系统的付款金额取决于所选的会员级别。

付款通过多个隐藏字段的表单帖子传递给 WorldPay，包括：

```
<input type="hidden" name="amount" value="295.00" /> 
```

本质上，表单是通过 POST 提交给 WorldPay，用户按照多个步骤处理他们的付款。完成后，用户将被重定向到指定的确认页面。

这似乎是 WorldPay 接受付款的典型方式。这里有一个明显的问题，隐藏字段的值很容易被任何具有 HTML 基础知识的人篡改。该表格直接发布到 WorldPay，因此我们没有 PostBack 来验证会员级别的金额。

当 WorldPay 向我们返回支付通知时，我们可以选择在确认页面之前通过处理程序路由回调来验证支付金额；但是，我想避免用户提交被篡改的表格，支付不正确的金额并且没有获得会员资格，然后必须联系公司要求退款的情况。

在处理付款**之前**，我们如何验证提交的金额是否正确？

**更新**

我想到我们还有一个问题，即使我们在服务器端验证表单发布，也没有什么能阻止恶意用户将表单发布直接欺骗到 WorldPay。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:17:55.033

这确实是一个漏洞，可以使用签名轻松解决。看看这个链接：

[http://culttt.com/2012/07/25/integrating-worldpay-into-a-database-driven-website/](http://culttt.com/2012/07/25/integrating-worldpay-into-a-database-driven-website/)

这种方法应该在帮助页面上更好地推广，太糟糕了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T10:27:10.927

我能想到的一种解决方案是，捕获`form`标签`submit`：

```
<form id="myForm" onsubmit="return validatePayment();"> 
```

然后创建如下所示的**JavaScript 文件**：

```
var isValidAmount = false;

function validatePayment() {
    if (isValidAmount) { return true; }

    // in here you want to issue an AJAX call back to your server
    // with the appropriate information ... I would recommend using
    // jQuery and so it might look something like this:
    $.ajax( {
        type: "POST",
        url: url,
        data: { amount: $("#amount").val(), someotherfield: somevalue },
        success: function(data, textStatus, jqXHR) {
            // set the flag so that it can succeed the next time through
            isValidAmount = true;

            // resubmit the form ... it will reenter this function but leave
            // immediately returning true so the submit will actually occur
            $("myForm").submit();
        },
    });

    // this will keep the form from actually submitting the first time
    return false;
} 
```

# php - 创建和存储数组/动态数组

> ID：15544634
> 
> 赞同：0
> 
> 时间：2013-03-21T10:14:16.387
> 
> 标签：php, arrays, multidimensional-array, foreach, checkbox

我在创建数组和存储信息时遇到问题，我有一个表，其中的数据可能是无限的，然后用户将选择一些选项来确定他们可以选择哪些值（这又是一个无限的数字），然后将这些选择显示在我使用此代码的复选框中

```
<?php foreach ( $results['detailsline'] as $detailsline )
 {
$invoice_details = $detailsline->details_line;

echo $invoice_details;
echo '<input type="checkbox" name="invoice_details" value="'.$invoice_details.'"/>';  
  }             
 ?> 
```

所以这应该搜索他们之前选择的选项，并将它们排序成一个数组，然后进入复选框，但是当我存储信息只是保存最后一个选中的框时，我无法更改每个输入 EG 的值

```
echo '<input type="checkbox" name="invoice_details[value1]" 
echo '<input type="checkbox" name="invoice_details[value2]" 
```

因为我不知道会有多少个值/复选框。我也试过这个

```
 <?php foreach ( $results['detailsline'] as $detailsline )
 {
$invoice_details[] = $detailsline->details_line;

echo $invoice_details[];
echo '<input type="checkbox" name="invoice_details[]" value="'.$invoice_details.'"/>';  
  }             
 ?> 
```

改变

```
 $invoice_details 
```

到

```
$invoice_details[] 
```

但这只会在我的数据库中存储一个值“数组”，而不是实际值。

请问有人可以帮我吗？

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:20:13.677

试试这个

```
<?php foreach ( $results['detailsline'] as $detailsline )
 {
$invoice_details = $detailsline->details_line;

echo $invoice_details;
echo '<input type="checkbox" name="invoice_details[]" value="'.$invoice_details.'"/>';  
  }             
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:21:24.860

采用`<input type="checkbox" name="invoice_details[]">`

在您的代码中，您可以`serialize($invoice_details)`用于保存到 DB 和使用 - 时`unserialize($field_from_db)`。

第一个函数返回字符串，因此您可以将其保存为字符串字段，第二个函数获取字符串并返回整个数组，以便您可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:21:52.427

> 但这只会在我的数据库中存储一个值“数组”，而不是实际值。

认为您尝试将 Array 存储为字符串所以得到了该值所以可能需要使用 implode/serialize/json_encode (Array) 来存储数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:23:48.453

从字面上看，代码`$invoice_details[] = $detailsline->details_line;`意味着获取对象**$detailsline的属性****details_line**并将其值作为新元素插入到数组**$invoice_details**中。你确定这是你想要的吗？）另外我认为**$detailsline**是一个数组，而不是对象（你试图将它作为一个对象来操作）

 ******* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T11:02:20.010

好吧，我认为你应该试试这个：

```
<?php 
$i=0;
foreach ( $results['detailsline'] as $detailsline )
{
$invoice_details = $detailsline->details_line;
echo $invoice_details;
echo '<input type="checkbox" name="invoice_details[$i]" value="'.$invoice_details.'"/>';  
$i++;
}             
?> 
```******

# scala - 使用斜坡参数时加特林会出错

> ID：15544635
> 
> 赞同：0
> 
> 时间：2013-03-21T10:14:17.533
> 
> 标签：scala, performance-testing, gatling

根据文档，我正在为我的斜坡值使用一个参数，

```
val rampUpRate  = Integer.getInteger("ramp", 1)

setUp(
    scn.users(10).ramp(rampUpRate).protocolConfig(httpConf)
) 
```

但是当我运行 gatling 时，我得到了一个错误：

```
09:57:35.695 [ERROR] c.e.e.g.a.ZincCompiler$ - /Gatling/user-files/simulations/clients/com/mydomain/www/stress/RecordedSimulation.scala:1088: overloaded method value ramp with alternatives:
  (duration: akka.util.Duration)com.excilys.ebi.gatling.core.scenario.configuration.ConfiguredScenarioBuilder <and>
  (duration: Long)com.excilys.ebi.gatling.core.scenario.configuration.Configured
ScenarioBuilder
 cannot be applied to (java.lang.Integer) 
```

我以为我可以在使用参数之前简单地转换为 Long

```
val rampUpRate  = Integer.getInteger("ramp", 1)

setUp(
    scn.users(10).ramp((Long) rampUpRate).protocolConfig(httpConf)
) 
```

但这仍然错误：

```
09:57:35.695 [ERROR] c.e.e.g.a.ZincCompiler$ - /Gatling/user-files/simulations/clients/com/mydomain/www/stress/RecordedSimulation.scala:1088: \sanctuarySpa\com\sanctuaryspa\www\stress\RecordedSimulation.scala:1088:
value rampUpRate is not a member of object Long
10:05:34.915 [ERROR] c.e.e.g.a.ZincCompiler$ - scn1.users(10).ramp((Long) rampUpRate).protocolConfig(httpConf), 
```

有什么建议为什么遵循文档或显式转换为 long 不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:27:15.523

That's my fault: the wiki page is not up to date. What happens is that you have a java.lang.Integer while the method takes a scala Long. java.lang.Long can be implicitly converted into scala Long, but not java.lang.Integer.

The proper way would be `val rampUpRate = java.lang.Long.getLong("ramp", 1L)`

PS: I've fixed the doc.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:34:52.280

尝试使用`rampUpRate.toLong`to 转换为 Long （或更一般的 cast `rampUpRate.asInstanceOf[Long]`）

`(Long) rampUpRate`被编译器视为试图执行`Long.rampUrRate()`例如应用函数`rampUpRate`到`object Long`，因此错误消息

# java - Junit 正负测试

> ID：15544639
> 
> 赞同：1
> 
> 时间：2013-03-21T10:14:31.743
> 
> 标签：java, unit-testing, junit

我有一个任务，我需要为我的代码创建一些测试。我们必须使用 Junit 测试，所以我决定对我的方法进行正面和负面测试。

例如，一项从 ArrayList 获取名称的测试我有正面和负面的测试：

积极的：

```
public void testGetNamePositive() { 
    Entry entry1 = new Entry("Susan Holmes", "122 Harringdale", "Workington", "CA14 2GH"); 
    assertEquals("Susan Holmes",entry1.getName()); 
} 
```

消极的：

```
public void testGetNameNegative() { 
    Entry entry1 = new Entry("Susan Holmes", "122 Harringdale", "Workington", "CA14 2GH"); 
    assertFalse( entry1.getName() == "Alison"); 
} 
```

我不确定的测试是这个：

```
public void testEntryCreated() {
    Entry entry1 = new Entry("Susan Holmes", "122 Harringdale", "Workington", "CA14 2GH");
    assertNotNull(entry1);
} 
```

对此有负面测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:25:57.503

入口类公共构造函数应该有一些参数验证，例如名称不能为空。所以你可以像这样写一个否定测试

```
@Test(expected = NullPointerException.class)
public void testCreateEntryWithNameIsNullThrowsNPE() {
    Entry entry1 = new Entry(null, "122 Harringdale", "Workington",
            "CA14 2GH");
} 
```

请注意，我使用了 JUnit 4

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:26:18.340

我会争辩说，`testEntryCreated`测试已经没有必要了。您在这里不是测试类的行为，而是测试 JVM 正确创建对象的能力。相反，应专注于测试您希望对象的行为方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:29:01.477

我不太确定您要在这里测试什么。您当前正在测试的只是名称变量设置正确。

当您进行单元测试时，您希望使用负输入和正输入单独测试特定方法（最小的可测试单元）。

您的否定测试示例如下：

```
public void testGetNameNegative() 

{ 
    Entry entry1 = new Entry("Susan Holmes", "122 Harringdale", "Workington", "CA14 2GH"); 
    assertFalse( entry1.getName() == "Alison"); 
} 
```

这不是一个负面的测试用例。例如，您想测试的是否为负的名称不能包含数字或空字符串：

```
public void testGetNameNegative() 

{ 
    Entry entry1 = new Entry("123", "122 Harringdale", "Workington", "CA14 2GH"); 
    //Expect some behaviour
    Entry entry1 = new Entry("", "122 Harringdale", "Workington", "CA14 2GH"); 
    //Expect some other behavior
} 
```

您在这里所期望的可能是某种异常，因为您正在“测试”构造函数。如果这是一种方法，您可能会期望某种返回值而不是异常

# php - 一起 元素如果 XML PHP解析中的元素相同

> ID：15544643
> 
> 赞同：0
> 
> 时间：2013-03-21T10:14:50.333
> 
> 标签：php, xml, xml-parsing

xml.php

```
 <?xml version='1.0' encoding='UTF-8'?>
    <product xmlns='http://tempuri.org/xmlrp_feed.xsd'>
    <product_features title = 'Main Features'>
    <feature_item>
    <feature_type><![CDATA[Copier Features]]></feature_type>
    <description><![CDATA[Copier description1]]></description>
    </feature_item>
    <feature_item>
    <feature_type><![CDATA[Copier Features]]></feature_type>
    <description><![CDATA[Copier description2]]></description>
    </feature_item>
    <feature_item>
    <feature_type><![CDATA[Facsimile Features]]></feature_type>
    <description><![CDATA[Facsimile description1]]></description>
    </feature_item>
    <feature_item>
    <feature_type><![CDATA[Facsimile Features]]></feature_type>
    <description><![CDATA[Facsimile description2]]></description>
    </feature_item>
    </product_features>
    </product> 
```

PHP代码

```
 $xml = simplexml_load_file('xml.php','SimpleXMLElement', LIBXML_NOCDATA); 
    foreach($xml as $rows)
    {    
        foreach($rows as $row){ 
                       echo "<pre>";
                      print_r($row);
                       echo "</pre>";
        }
    } 
```

输出

```
 SimpleXMLElement Object
    (
        [feature_type] => Copier Features
        [description] => Copier description1
    )

    SimpleXMLElement Object
    (
        [feature_type] => Copier Features
        [description] => Copier description2
    )

    SimpleXMLElement Object
    (
        [feature_type] => Facsimile Features
        [description] => Facsimile description1
    )

    SimpleXMLElement Object
    (
        [feature_type] => Facsimile Features
        [description] => Facsimile description2
    ) 
```

需要这样的输出

```
 SimpleXMLElement Object
    (
        [feature_type] => Copier Features
        [description] => Copier description1
                         Copier description2  
    )
    SimpleXMLElement Object
    (
        [feature_type] => Facsimile Features
        [description] => Facsimile description1
                         Facsimile description2
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:33:35.640

像这样做：

```
$xml = simplexml_load_string($xmlstr,'SimpleXMLElement', LIBXML_NOCDATA);

$x = count($xml->product_features->feature_item)-1;
$ft = ''; $d = '';

for ($x ; $x >= 0 ; $x--) {

    if ($ft == (string)$xml->product_features->feature_item[$x]->feature_type) {

        $xml->product_features->feature_item[$x]->description = $xml->product_features->feature_item[$x]->description . " $d";

    } else {

        $ft = (string)$xml->product_features->feature_item[$x]->feature_type;
        $d = (string)$xml->product_features->feature_item[$x]->description;
        unset($xml->product_features->feature_item[$x]);
    }   
}

echo "<pre>";
var_dump($xml);
echo "</pre>"; 
```

添加说明，中间有空格。
看现场演示：[http ://codepad.viper-7.com/qLrlUp](http://codepad.viper-7.com/qLrlUp)

# css - 父 div 上的 css3 缩放变换，但在某些关联的 div 中保持恒定大小

> ID：15544645
> 
> 赞同：18
> 
> 时间：2013-03-21T10:15:04.847
> 
> 标签：css, transform, scale

我正在使用 css3 缩放转换来缩放包含其他 div 的 div。

我遇到的问题是，我需要保持一些内部 div 保持原样，基本上就好像它们没有缩放一样，它们的大小不应该改变，但是我确实需要用里面的其他东西来缩放父 div。

你怎么能在某些 div 中反转缩放？
我正在尝试应用反向缩放。
如果整个 div 应用了 1.5 的值，我正在尝试找到我现在应该缩放其他 div 的值，以在视觉上将它们恢复到以前的样子。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-21T11:11:51.560

如果父 div 已缩放 1 倍`1.5`，那么您需要将子 div 缩放 1 倍`1/1.5 = 0.(6)`以保持其大小不变。

# [*例子*](http://codepen.io/thebabydino/pen/Lgafj)

通常，为了取消子元素已应用在父元素上且比例因子为 的`a`比例变换，您需要在子元素本身上应用因子的另一个比例变换`1/a`。

您要么需要：

*   在你做任何其他事情之前手动计算比例因子，然后在你的代码中使用它（上面链接的示例）
*   使用预处理器为您处理此问题（[**SASS 示例**](http://codepen.io/thebabydino/pen/lyhjx)）
*   使用 JavaScript 计算孩子所需的比例因子并设置孩子的`transform`比例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-17T09:47:23.283

您可以使用 CSS 变量来存储比例因子，然后用于`calc()`计算具有特定类的子元素的逆比例：

```
.wrapper {
  transform: scale(var(--scale));
  background: #ddd;
}

.wrapper > * {
  text-align: center;
}

.wrapper > .revertscale {
  transform: scale(calc(1/var(--scale)));
}
```

```
<div class="wrapper" style="--scale: 0.8">
  <h2>scaled title</h2>
  <p>scaled description</p>
</div>

<div class="wrapper" style="--scale: 0.8">
  <h2 class="revertscale">not scaled title</h2>
  <p class="revertscale">not scaled description</p>
</div>
```

⋅ ⋅ ⋅</p>

如果您不希望任何子元素缩放，另一种方法是将包装器设置为伪元素：

```
.wrapper {
  position: relative;
}

.wrapper > * {
  text-align: center;
}

.wrapper::before {
  content: "";
  z-index: -1;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  transform: scale(var(--scale));
  background: #ddd;
}
```

```
<div class="wrapper" style="--scale: 1">
  <h2>title</h2>
  <p>description</p>
</div>

<div class="wrapper" style="--scale: 1.2">
  <h2>title</h2>
  <p>description</p>
</div>

<div class="wrapper" style="--scale: 0.8">
  <h2>title</h2>
  <p>description</p>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:12:49.393

任何缩放操作的逆操作是`1 / <scale>`通过缩放容器，`1.5`您需要通过`1 / 1.5 = 0.6`

不幸的是，根据规范，您不能只使用 CSS，例如：

```
transform: scale(1/1.5); 
```

因为规模被定义为[`scale(<number>[, <number>])`](http://www.w3.org/TR/2011/WD-css3-2d-transforms-20111215/#transform-functions)

[`<number>`](http://www.w3.org/TR/css3-values/#number-value)在哪里

> 一个或零个或多个小数位，后跟一个点 (.)，后跟一个或多个小数位

因此，您必须自己进行计算，或者可以使用支持此类[操作的动态样式表语言（如](http://lesscss.org/#-operations)[LESS](http://lesscss.org/) ） 。

[**演示**](http://jsfiddle.net/uVbFw/)（仅限 webkit）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-01T00:21:03.700

*如果您按照建议使用倒置的比例因子，请注意孩子在比例变换期间*不一定保持其原始大小- 这当然只有当您让比例变换具有持续时间时才重要（例如通过使用`transition: transform;`） .

# birt - 从 BIRT 中的数据库中获取日期时间后，如何将日期时间格式转换为日期？

> ID：15544657
> 
> 赞同：0
> 
> 时间：2013-03-21T10:15:43.273
> 
> 标签：birt

> 从 BIRT 中的数据库中获取日期时间后，如何将日期时间格式转换为日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:21:56.223

格式化一个日期时间项目，使它只显示日期：

*   单击 BIRT 布局窗格中的日期时间数据项；
*   在 Property Editor - Properties 窗格中，选择 Format DateTime 选项卡；
*   默认情况下，该`Format as`属性将设置为未格式化；您可以从下拉列表中选择多种预定义格式，或者如果这些格式都不符合您的所需格式，您可以`Custom`从下拉列表中选择，然后在属性中输入您所需的格式`Format code`（例如`yyyy-MM-dd`，获取格式为 1900 的日期-01-01)。

# java - “mvn clean install”失败？

> ID：15544663
> 
> 赞同：0
> 
> 时间：2013-03-21T10:15:57.583
> 
> 标签：java, maven

我是学习java编程的新手！我想在一个 Maven 项目中制作一个 .jar。运行此命令后`mvn clean install`，我收到以下错误消息：

> 无法在项目 wps-demo 上执行目标 org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile(default-compile)：编译失败
> 
> 无法在以下位置找到 Javac 编译器：C:\Program Files\Java\jre7..\lib\tools.jar
> 
> 请确保您使用的是 JDK 1.4 或更高版本而不是 JRE（需要 com.sun.tools.javac.Main 类）
> 
> 在大多数情况下，您可以更改 Java 的位置
> 
> 通过设置 JAVA_HOME 环境变量安装

我该怎么做才能清除此错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:23:31.410

看起来您只安装了 JRE（Java 运行时环境），而不是 JDK（Java 开发工具包），因为此错误消息显示：

> 请确保您使用的是 JDK 1.4 或更高版本而不是 JRE（需要 com.sun.tools.javac.Main 类）

从 Oracle 网站[下载](http://www.oracle.com/technetwork/java/javase/downloads/index.html)并安装**JDK （不是 JRE）。**

JRE 允许您运行 Java 程序，但不包括开发 Java 软件所需的工具，例如 Java 编译器。JDK 确实包含这些工具。

如果您已经安装了 JDK，请确保`JAVA_HOME`环境变量是指您安装了 JDK 的目录，而不是带有 JRE 的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:21:38.673

正如您的错误所说，您在系统设置中的 JAVA_HOME 变量中有错误的值...应该类似于`C:\Program Files\Java\jre6`

[例如，您可以在此处](https://stackoverflow.com/questions/2619584/how-to-set-java-home-on-windows-7)找到如何设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:49:36.510

您需要设置环境变量来指定您的 java 开发工具包的位置，以便 windows 可以找到 Java 库

将 java 主路径放在您可以在 MyComputer 属性的高级选项卡中创建的 JAVA_HOME 变量中。

Java 主路径看起来像这样

C:\Program Files\Java\jdk1.5

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:54:45.470

您可能还想查看来自 Maven [http://maven.apache.org/guides/mini/guide-building-jdk14-on-jdk15.html的以下文章](http://maven.apache.org/guides/mini/guide-building-jdk14-on-jdk15.html)

它指出，从 Maven 2.2.0 开始，需要 Java JDK 1.5 才能允许 Maven 构建 Java 项目。这篇文章还继续展示了如何进行这些调整，以便可以在构建过程中使用 JDK 1.5 或更高版本。

# grails - 使用 Spock 存根 Grails 域类中的 Gorm 和其他方法

> ID：15544668
> 
> 赞同：8
> 
> 时间：2013-03-21T10:16:07.840
> 
> 标签：grails, mocking, grails-orm, stub, spock

抱歉，如果这是一个新手问题，但我非常感谢社区可以就我在使用 Grails 服务 LocationService 中的以下方法存根时遇到的问题提供任何见解。

```
Location locate(String target, String locator, Application app, boolean sync = true) {
    if (!target) throw new IllegalArgumentException("Illegal value for msid: " + target)
    def locRequest = Request.create(target, Type.LOCATE) 
    if (!locRequest.save()) {
            return Location.error(target, "Error persisting location request")
    }
    locationSource.locateTarget(target, locator, app, sync)
} 
```

我有一个域类 Request，除了默认的 GORM 方法外，还有一些额外的域方法，例如。下面的 create() 方法

```
@EqualsAndHashCode
class Request {

    String reference
    String msid
    Type type
    Status status
    Destination destination
    DateTime dateCreated
    DateTime dateCompleted

    static create(String msid, Type type, Destination destination = Destination.DEFAULT) {
            new Request(reference: reference(type), type: type, status: Status.INITIATED, dateCreated: new DateTime())
    } 
```

最后，我有一个 Spock 规范。我需要模拟默认的 GORM 方法，还需要模拟一些额外的域逻辑，例如静态创建方法，以便返回一个有效的对象，以便在被测代码中持久化。

理想情况下，我会使用 Spock 模拟，但我不能在这里使用它们，因为根据 Peter N 下面的帖子，它们需要注入调用者，在这种情况下，创建请求（我试图模拟）作为 LocationService 中的 locate 方法中的局部变量：

[https://groups.google.com/forum/?fromgroups=#!topic/spockframework/JemiKvUiBdo](https://groups.google.com/forum/?fromgroups=#!topic/spockframework/JemiKvUiBdo)

我也不能使用 Grails 2.x @Mock 注释，虽然这会模拟 GORM 方法，但我不确定我是否可以模拟/存根来自 Request 类的附加静态 create() 方法。

因此，最后，我一直在尝试使用 Groovy StubFor / MockFor 方法来执行此操作，因为我相信这些将通过将测试方法包装在 use 闭包中来用于调用测试方法（如下所示）。

这是测试规范：

```
@TestFor(LocationService)
// @Mock(Request)
class LocationServiceSpec extends Specification {

    @Shared app = "TEST_APP"
    @Shared target = "123"
    @Shared locator = "999"

    def locationService = new LocationService()
    LocationSource locationSource = Mock()

  def "locating a valid target should default to locating a target synchronously"() {
      given:
            def stub = new StubFor(Request)
            stub.demand.create { target, type -> new Request(msid: target, type: type) }
            stub.demand.save { true }
            1 * locationSource.locateTarget(target, locator, app, SYNC) >> { Location.create(target, point, cellId, lac) }
            def location
      when: 
            stub.use {
                location = locationService.locate(target, locator, app)
            }
      then: 
            location
 } 
```

但是，当我运行测试时，虽然存根创建方法返回了我的请求存根对象，但存根保存方法却失败了：

```
groovy.lang.MissingMethodException: No signature of method:       com.domain.Request.save() is applicable for argument types: () values: []
Possible solutions: save(), save(boolean), save(java.util.Map), wait(), last(), any() 
```

如果需要存根其他方法以及我无法直接注入到被测代码中的域类的 GORM 方法，任何人都可以指出我在这里做错了什么或建议解决我的特定情况的最佳方法吗？

先感谢您，

帕特里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T14:27:42.700

我相信你应该能够`@Mock`像你提到的 GORM 方法那样使用 Grails 的注释，然后你需要手动模拟静态方法：

```
@TestFor(LocationService)
@Mock(Request)// This will mock the GORM methods, as you suggested
class LocationServiceSpec extends Specification {
...
    void setup() {
        Request.metaClass.static.create = { String msid, Type type, Destination destination = Destination.DEFAULT ->
             //Some logic here
        }
    }
... 
```

使用`@Mock`注解时，Grails 将模拟默认方法（保存/获取/动态查找器），但它不会对您可能添加的任何其他方法做任何事情，因此您需要手动模拟这些方法。

# jquery - 枚举。除了 jQuery 参数

> ID：15544670
> 
> 赞同：1
> 
> 时间：2013-03-21T10:16:09.697
> 
> 标签：jquery, asp.net-mvc, razor

我正在尝试创建一个函数，该函数接收与枚举中的项目相对应的字符串。以下语法可以正常工作，但我希望能够更改`ChannelType.EndUser`为使用传递给函数的参数，这可能吗？这是我的功能：

```
 function closeEdit(channel){
             @{

                  var channels = Enum.GetValues(typeof(ChannelType))
                    .Cast<ChannelType>()
                    .Except(new ChannelType[] {ChannelType.EndUser});

                  }
                  @foreach (ChannelType channeltype in channels)
        {
        @:var buttonname = "#Cancel_" + '@(channeltype.ToString())' + "_Update";
        @:if(buttonname != 'Cancel_EndUser_Update'){

        @:$(buttonname).click();}
        }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:19:04.067

您将无法在实际的 C# 代码中执行此操作，您必须取消它`Except`，然后在您的 中`foreach`，确保`ChannelType`不是传入的项目。

像这样的东西：

```
 function closeEdit(channel){
     @{
         var channels = Enum.GetValues(typeof(ChannelType))
             .Cast<ChannelType>()
      }
      @foreach (ChannelType channeltype in channels)
      {
          @:var buttonname = "#Cancel_" + '@(channeltype.ToString())' + "_Update";
          @:if(buttonname != 'Cancel_EndUser_Update' && '@(channelType.ToString())' != channel){

          @:$(buttonname).click();}
      }
 } 
```

# java - 文件.canWrite(); 文件.canRead(); 文件.canExecute(); 尽管我的文件/目录没有访问权限，但始终返回 true

> ID：15544674
> 
> 赞同：5
> 
> 时间：2013-03-21T10:16:18.833
> 
> 标签：java, windows

需要检查我使用的文件/目录的权限

```
 //filePath = path of file/directory access denied by user ( in windows )
 File file = new File(filePath);
 file.canWrite(); 
 file.canRead();
 file.canExecute(); 
```

所有三个都返回 true 但 m 无法删除任何文件/目录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:22:21.437

你必须检查：

```
SecurityManager.checkDelete(filepath); 
```

正如[JavaDoc中所说](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T03:21:07.123

您是否尝试过使用[java.nio.file.Files#isWritable](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#isWritable%28java.nio.file.Path%29)方法？

# linux-kernel - Linux Kernel Code for USB modem

> ID：15544677
> 
> 赞同：1
> 
> 时间：2013-03-21T10:16:36.510
> 
> 标签：linux-kernel, usb, modem

I have tried using standard 3G USB modems on Ubuntu 11.04 which has linux kernel version 2.38.8\. On analyzing packet spacings of a tcpdump capture, following pattern is observed 8094 14 4 6 3 3985 where we see very short packet spacing.

Above spacings is in microseconds for a 7 Mbps 3G connection. On changing the kernel to 2.6.39 , short spacings in tens of microseconds is no longer observed and is replaced by spacings in hundreds of microseconds. I have identified that changes were brought in 2.6.39 rc 1 update. But there are so many changes, that it is difficult to identify which caused this behavior.

So need information on what part of linux kernel source code to look for or which drivers or modules are used by 3G USB modem. Any help in locating code change is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:41:19.927

您可以在 中找到 Linux USB 串行驱动程序`drivers/usb/serial`，那里有一个通用驱动程序 (generic.c)，但您可能正在使用设备特定的驱动程序之一（例如选项）。

# java - 服务器生成一个txt文件，客户端写入

> ID：15544681
> 
> 赞同：0
> 
> 时间：2013-03-21T10:16:58.663
> 
> 标签：java, networking, client-server

我有一个项目，它有一个创建空文本文件的服务器。

一旦我的客户端停止写入此文件，服务器应该读取并显示结果。

我的问题是客户端正在连接到服务器，但是客户端发送的任何文本都没有写入服务器端。另外，当我退出时，服务器不会退出。

这是我到目前为止所拥有的：

服务器

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class Server {

    public static void main(String args[]) throws IOException {
         BufferedWriter out;// = new BufferedWriter(new FileWriter("C://Users//Vagos//Desktop//file.txt"));

         ServerSocket echoServer = null;
            String line;
            DataInputStream is;
            PrintStream os;
            Socket clientSocket = null;

    // Try to open a server socket on port 9999
           try {
               echoServer = new ServerSocket(55);
            }
            catch (IOException e) {
               System.out.println(e);
            }   
    // Create a socket object from the ServerSocket to listen and accept 
    // connections.
    // Open input and output streams

    try {
               clientSocket = echoServer.accept();
               is = new DataInputStream(clientSocket.getInputStream());
               os = new PrintStream(clientSocket.getOutputStream());
               out = new BufferedWriter(new FileWriter("C://Users//Vagos//Desktop//file.txt"));
    // As long as we receive data, echo that data back to the client.

               while (true) {
                 line = is.readUTF();
                 os.println(line); 
                 os.flush();
                 out.write(line);
                 out.flush();
               }
            }   
    catch (IOException e) {
               System.out.println(e);
            }
        }
    } 
```

这是我的客户：

```
import java.io.*;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

public class client {

    public static void main(String[] args) {
        Socket smtpSocket = null;  
        DataOutputStream os = null;
        DataInputStream is = null;
        String strout;
        Scanner in = new Scanner(System.in);
        try {
            smtpSocket = new Socket("localhost", 55);
            os = new DataOutputStream(smtpSocket.getOutputStream());
            is = new DataInputStream(smtpSocket.getInputStream());
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: hostname");
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: hostname");
        }

    if (smtpSocket != null && os != null && is != null) {
            try {
                do{
                    System.out.print("Write what the client will send: ");

                strout = in.nextLine();
                os.writeBytes(strout);}
                while(!strout.equals("exit"));
                os.close();
                is.close();
                smtpSocket.close();   
            } catch (UnknownHostException e) {
                System.err.println("Trying to connect to unknown host: " + e);
            } catch (IOException e) {
                System.err.println("IOException:  " + e);
            }
        }
    }           
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:43:07.520

试试这个。

在您的服务器中

```
 // Open input and output streams

    try {
        clientSocket = echoServer.accept();
        is = new DataInputStream(clientSocket.getInputStream());
        InputStreamReader ir = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(ir);
        os = new PrintStream(clientSocket.getOutputStream());
        out = new BufferedWriter(new FileWriter("C://Users//Vagos//Desktop//file.txt"));
        // As long as we receive data, echo that data back to the client.

        while (true) {
            line = br.readLine();
            System.out.println(line);
            os.println(line);
            os.flush();
            if( line != null ){
             out.write(line + '\n');
             out.flush();
            }
        }
    } 
```

关于客户的“退出”部分，请在更改为之后
`while(!strout.equals("exit"));`
尝试
`while(!strout.equalsIgnoreCase("exit"));`

希望这可以帮助 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T09:56:37.040

今天我的老师上传了一个新项目，因为他做了一个错误，我必须做的项目与旧项目相似，但客户正在读取或写入数字从 0-911 的 txt，客户随机选择什么是做什么读取 o 写入 如果选择 读取显示 txt 的数字 如果选择写入 他会随机写入 0-911 之间的数字，如果选择 100 则停止。

我成功了，但没有显示我是堆栈。

断绝

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class Server {

    public static void main(String args[]) throws IOException {
         BufferedWriter out;// = new BufferedWriter(new FileWriter("C://Users//Vagos//Desktop//file.txt"));

         ServerSocket echoServer = null;
            int line;
            DataInputStream is;
            PrintStream os;
            Socket clientSocket = null;

    // Try to open a server socket on port 9999
           try {
               echoServer = new ServerSocket(55);
            }
            catch (IOException e) {
               System.out.println(e);
            }   
    // Create a socket object from the ServerSocket to listen and accept 
    // connections.
    // Open input and output streams

           try {
               clientSocket = echoServer.accept();
               is = new DataInputStream(clientSocket.getInputStream());
               InputStreamReader ir = new InputStreamReader(is);
               BufferedReader br = new BufferedReader(ir);
               os = new PrintStream(clientSocket.getOutputStream());
               out = new BufferedWriter(new FileWriter("C://Users//Vagos//Desktop//file.txt"));
               // As long as we receive data, echo that data back to the client.
              boolean ch=true;
              {
                   line =(Integer) br.read();
                 //  System.out.println(line);
                   os.println(line);
                  os.flush();
                   out.write(line+"\n");
                   out.flush();
               } while (line != 100); 

               os.close();
               out.close();
               br.close();
               clientSocket.close();

            }   
    catch (IOException e) {
               System.out.println(e);
            }
        }
    } 
```

客户

```
import java.io.*;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Random;
import java.util.Scanner;

public class client {

    public static void main(String[] args) throws IOException {
        Socket smtpSocket = null;  
        DataOutputStream os = null;
        DataInputStream is = null;
        String strout;
        int number=0;
        Random rand = new Random(System.currentTimeMillis());
        Scanner in = new Scanner(System.in);
        try {
            smtpSocket = new Socket("localhost", 55);
            os = new DataOutputStream(smtpSocket.getOutputStream());
            is = new DataInputStream(smtpSocket.getInputStream());
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: localhost");
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: localhost");
        }

        int choice=2;//rand.nextInt(2);
        if(choice==1){
            int num=is.read();
            System.out.println(num);

        }
        else if(choice==2){
            try {
                do{
                 number=rand.nextInt(911);
                // System.out.println(number);
                os.writeInt(number);
                }while(number!=100);
                os.close();
                is.close();
                smtpSocket.close();   
            } catch (UnknownHostException e) {
                System.err.println("Trying to connect to unknown host: " + e);
            } catch (IOException e) {
                System.err.println("IOException:  " + e);
            }
        }
    }           
} 
```

# c++ - 解释这个 C++ 函数如何返回一个数组

> ID：15544684
> 
> 赞同：0
> 
> 时间：2013-03-21T10:17:20.027
> 
> 标签：c++, arrays, stack, return-value, function-pointers

我在网上找到了这段代码[http://www.cplusplus.com/forum/beginner/6644/#msg30551](http://www.cplusplus.com/forum/beginner/6644/#msg30551)它应该从 c++ 函数返回一个数组。我想要一个解释说明这个函数如何在内存分配、堆栈、堆、指针等方面运行。

```
int *f(size_t s){
    int *ret=new int[s];
    for (size_t a=0;a<s;a++)
        ret[a]=a;
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:23:19.757

我。

```
int *ret=new int[s]; 
```

1.`ret`在堆栈上分配内存 - 这是一个`int`指针2.在堆上
分配具有大小的连续内存 3.指向已分配内存的第一个元素（来自 2.）`s * sizeof(int)`
`ret`

* * *

二、

```
for (size_t a=0;a<s;a++)
    ret[a]=a; 
```

1.  在堆栈上分配内存`a`
2.  循环遍历 I. 中分配的内存，为每个元素赋值
3.  `for`-statement结束后，`a`不再可访问（仅在 中可用`for`）

* * *

三、

```
return ret; 
```

返回*指针**的副本`ret`*，它指向在 I. 中创建的数组的第一个元素，在 II 中初始化。

之后`return`，`ret`被“销毁”。

* * *

这个函数的调用者不能忘记释放（释放）这个内存，调用`delete[]`.

例如：

```
int * my_array = f( 6 );
// do sth with my_array
delete[] my_array; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:25:14.623

实际上，该函数不返回`int`s 数组（即`int[N]`）。它返回的是一个指向`int`( `int *`) 的指针。`s`事实证明，这个指针指向类型元素数组的第一个元素`int`。

请注意，内存分配有`new`：

```
int *ret = new int[s]; 
```

`int`因此，所指向的s数组`ret`具有动态存储时长。除其他外，这意味着

1) 编译器不会自动调用每个数组元素的析构函数。（在这种情况下，这不是问题，因为元素是类型的，`int`但如果元素是具有非平凡析构函数的类类型的元素，则可能是。）

2) 编译器不会自动释放分配的内存。

相比之下，请考虑以下代码：

```
void g() {
    int p[10]; // allocates 10 integer in the stack
    // use p ...
} 
```

当`g`终止时，编译器将执行上述操作。为此，必须在编译时设置数组的大小（本例中为 10）。如果您在编译时不知道大小，而不是`new`原始代码中所需的大小。

对于动态分配的数组，程序员有责任确保在不再需要数组时执行上述两个操作。为此，您必须调用`delete[]`：

```
delete[] p; // where p is a `int*` with the same value as `ret` 
```

实际上，由于可能引发异常，这比看起来要困难得多。例如，考虑这段代码

```
void foo() {
    int* p = f(10); // where f is in the question
    // ... use the array pointed by p
    a_function_that_might_throw();
    delete[] p;
} 
```

如果确实抛出异常，则执行永远不会到达被删除`a_function_that_might_throw`的地步。在这种情况下，由(inside )`p`分配的内存在程序终止之前不会被释放（它会泄漏）。`new``f`

`int*`为了避免这个问题，最好使用智能指针（例如`std::unique_ptr`or ）而不是原始指针（例如`std::shared_ptr`）。

最后，默认情况下，分配的内存`new`是堆内存。但是，您可以更改此行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:24:58.403

```
int *ret =  new int[s]; 
```

这动态地（在堆上）分配一个`s`整数数组并将一个指向它的指针（实际上，指向它的第一个元素）存储在`ret`.

我相信其余的功能很简单。

所以该函数将一个指针返回给一个动态分配的数组。这并不安全。如果调用者不存储返回值并稍后调用`delete[]`它，它将泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:23:45.597

```
int *ret=new int[s]; 
```

此行定义了一个具有自动存储持续时间的`int*`调用。*它使用new-expression*返回的指针进行`ret`初始化。这个*new 表达式*创建一个具有动态存储持续时间的 s 数组，返回一个指向该数组中第一个元素的指针。`ret` *`new int[s]`*`s` `int`**

 **所以我们现在有两个对象：一个`int*`具有自动存储持续时间的对象和一个`int[]`具有动态存储持续时间的对象。

```
for (size_t a=0;a<s;a++) 
```

这是一个`for`声明。*for-init-statement*定义了一个名为的`size_t`对象`a`并将其初始化为 0。*条件*检查是否`a`小于`s`。最终*表达式*递增`a`。这意味着`a`在范围内循环`[0, s)`。

```
ret[a]=a; 
```

这会将 的值分配给 中`a`的`a`第 th 个元素`ret`。那就是`ret[0]`会有价值`0`，`ret[1]`会有价值`1`，等等。

该`a`对象现在被销毁，因为它具有自动存储持续时间，并且我们已经到达其范围（`for`语句）的末尾。

```
return ret; 
```

这将返回 的值`ret`，正如您所记得的那样，它是一个`int*`。因此，函数的返回值`int*`指向动态分配数组的第一个元素。

该`ret`对象现在被销毁，因为它具有自动存储持续时间，并且我们已经到达其范围（`f`函数）的末尾。请注意，这只是函数内部的指针。动态分配的数组仍然存在，返回的指针仍然指向它。

稍后，您必须记住`delete[]`返回的指针。**

# .net - 尝试根据加载的模块识别编译选项

> ID：15544686
> 
> 赞同：0
> 
> 时间：2013-03-21T10:17:22.030
> 
> 标签：.net, vb.net, visual-studio-2010, dll

我有 2 个项目使用相同的控件。其中一个可以在 Windows8 上运行，而另一个则不能。我试图让两个项目使用相同的编译选项，但它们不加载相同的模块。

以下 DLL 是否有一些共同点，所以我可以发现我错过了哪些编译选项？

我在 VisualStudio 2010 上编译这两个项目。

大多数 DLL 对两个项目都是通用的，只有以下不同[列表取自 Visual Studio，应用程序运行时，使用调试 | 窗户 | 模块]

工作项目包含以下内容：

*   C:\WINDOWS\system32\ **clbcatq.dll** 2001.12.4414.700 2008 年 4 月 14 日凌晨 2:09
    *   C:\WINDOWS\system32\ **comres.dll** 2001.12.4414.700 2008 年 4 月 14 日 凌晨 2:09
    *   C:\WINDOWS\system32\ **ddraw.dll** 5.03.2600.5512 (xpsp.080413-0845) 2008 年 4 月 14 日凌晨 2:09
    *   C:\WINDOWS\system32\ **ddrawex.dll** 5.03.2600.5512 (xpsp.080413-0845) 2008 年 4 月 14 日凌晨 2:09
    *   C:\WINDOWS\system32\ **dsound.dll** 5.3.2600.5512 (xpsp.080413-0845) 2008 年 4 月 14 日凌晨 2:10
    *   C:\WINDOWS\system32\ **midimap.dll** 5.1.2600.5512 (xpsp.080413-0845) 2008 年 4 月 14 日凌晨 2:10
    *   C:\WINDOWS\system32\ **msacm32.dll** 5.1.2600.5512 (xpsp.080413-0845) 2008 年 4 月 14 日凌晨 2:11
    *   C:\WINDOWS\system32\ **msacm32.drv** 5.1.2600.0 (xpclient.010817-1148) 2001 年 8 月 18 日上午 7:33
    *   C:\WINDOWS\system32\ **mscms.dll** 5.1.2600.5627 (xpsp_sp3_gdr.080624-1245) 2008 年 6 月 24 日下午 6:43
    *   C:\WINDOWS\system32\ **schannel.dll** 5.1.2600.6239 (xpsp_sp3_gdr.120601-1620) 2012 年 6 月 4 日上午 6:32
    *   C:\WINDOWS\system32\ **wdmaud.drv** 5.1.2600.5512 (xpsp.080413-2108) 2008 年 4 月 14 日凌晨 2:11
    *   C:\WINDOWS\system32\ **winmm.dll** 5.1.2600.6160 (xpsp_sp3_gdr.111014-1624) 2011 年 10 月 14 日下午 4:47
    *   C:\WINDOWS\system32\ **winspool.drv** 5.1.2600.5512 (xpsp.080413-0852) 2008 年 4 月 14 日凌晨 2:11
    *   C:\WINDOWS\system32\ **ws2_32.dll** 5.1.2600.5512 (xpsp.080413-0852) 2008 年 4 月 14 日凌晨 2:12
    *   C:\WINDOWS\system32\ **ws2help.dll** 5.1.2600.5512 (xpsp.080413-0852) 2008 年 4 月 14 日凌晨 2:12
    *   C:\WINDOWS\system32\ **comdlg32.dll** 6.00.2900.5512 (xpsp.080413-2105) 2008 年 4 月 14 日凌晨 2:09
    *   C:\WINDOWS\system32\ **mlang.dll** 6.00.2900.5512 (xpsp.080413-2105) 2008 年 4 月 14 日凌晨 2:10
    *   C:\WINDOWS\system32\ **urlmon.dll** 6.00.2900.6347 (xpsp_sp3_gdr.130205-1023) 2/6/2013 12:48 PM
    *   C:\WINDOWS\system32\ **wininet.dll** 6.00.2900.6347 (xpsp_sp3_gdr.130205-1023) 2/6/2013 12:48 PM

虽然该项目不起作用，但包含以下内容：

*   C:\WINDOWS\system32\ **shfolder.dll** 6.00.2900.5512 (xpsp.080413-2105) 2008 年 4 月 14 日凌晨 2:10

这些 DLL 有什么共同点，所以我可以发现我错过了什么编译选项？

这是一个例外：

```
System.BadImageFormatException: An attempt was made to load a program with an
incorrect format. (Exception from HRESULT: 0x8007000B) at   
control__lib.control__wrapper.FPC_LoadOCXCodeFromMemory
                               (UInt32 pData, UInt32 dwSize) at 
control__lib.AxCode..ctor(Stream StreamWithOCXCode) at 
my.mcInit() at 
my.Main() 
```

# javascript - 是否有经过适当测试的 Select2 或 Chosen 替代品？

> ID：15544693
> 
> 赞同：114
> 
> 时间：2013-03-21T10:17:37.903
> 
> 标签：javascript, jquery, forms, testing, jquery-select2

我正在寻找 Select2 的替代方案，它基本上提供相同的功能，但包括适当的测试。

对圣杯的追求？最后一只独角兽？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-07-29T02:56:39.000

[**Selectize.js**](https://selectize.github.io/selectize.js/)是我一直在研究的一个 select2 替代方案，它有一套使用[testem](https://github.com/airportyh/testem)、 [syn](https://github.com/bitovi/syn)、 [mocha](http://visionmedia.github.io/mocha/)和[chai](http://chaijs.com/)组合的测试。现在有以下几类测试：

*   **交互**
    功能测试，确保控件的行为就像用户正在使用它（使用[syn](https://github.com/bitovi/syn)）。
*   **设置**
    确保控件可以从现有元素`<select>`和`<input>`元素正确初始化。
*   **API**
    测试核心 API 方法以获得正确的功能。
*   **事件**
    确保内置事件在正确的时间使用正确的参数触发。
*   **XSS**
    测试一些潜在的漏洞。

话虽如此，测试并不像我希望的那样广泛，但它已经到了那里:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T20:59:04.273

**注意：**我不再维护这个项目。选择另一个。

* * *

我开发的[Bselect](http://github.com/gustavohenke/bselect)*已经*过测试，但不包括 Select2/Chosen 的所有功能（尚未）。

如果您愿意，请加入我的开发过程:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-13T16:23:12.693

另一种可能的选择是[引导多选](https://github.com/davidstutz/bootstrap-multiselect)

《基于 Twitter Bootstrap 的 JQuery 多选插件》

示例和文档：[http ://davidstutz.github.io/bootstrap-multiselect/](http://davidstutz.github.io/bootstrap-multiselect/)

*   该存储库不包含任何自动化测试，而是[手动测试](https://github.com/davidstutz/bootstrap-multiselect/blob/master/tests.html)
*   使用 Bootstrap 3 主题化
*   JavaScript 源代码很短：800 行代码
*   GitHub 上 524 颗星（截至 2013 年 12 月 13 日）

# playframework - Play Framework 2.1 和 NewSQL

> ID：15544699
> 
> 赞同：0
> 
> 时间：2013-03-21T10:17:59.013
> 
> 标签：playframework, ebean, nuodb, nosql

这更像是一个好奇的问题：

我有一个使用 Ebean 和 mySQL 开发的应用程序，它只在“生产”（进化关闭）和开发模式（DDL 和 evo On）中工作。我遇到了一些看起来很有趣和管理的 NewSQL 解决方案（根本不更改代码......）使其在产品模式下的 NuoDB 上工作，但不是开发模式，因为驱动程序不支持创建 play_evolutions 表，不知何故. 这向我证明了这是可能的……至少在生产中。

坦率地说，我并不是特别喜欢 NuoDB，我只是想看看目前的 NewSQL 技术可以为我的应用程序带来哪些性能。

所以我真正的问题是：是否有一个 NewSQL 解决方案可以完美地为进化和 DDL 使用正确的 jdbc 驱动程序？或者有没有人有过 NewSQL 和玩的经验？有人可以指出其他好的 NewSQL 方向吗？

额外问题：有没有办法让 NuoDB 在 Ebean 和 play 框架下无缝工作？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T04:41:34.033

> 是否有一个 NewSQL 解决方案可以使用正确的 jdbc 驱动程序完美地为进化和 DDL 工作？

是的，[Clustrix](http://www.clustrix.com)使用 MySQL JDBC 驱动程序，是一个 NewSQL 解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T21:27:35.953

同样，NuoDB 利用纯 JDBC 驱动器，也是 NewSQL，具有易于扩展的优点。

# entity-framework - 实体框架，如果实体与另一个实体分离，则删除它

> ID：15544700
> 
> 赞同：0
> 
> 时间：2013-03-21T10:18:10.633
> 
> 标签：entity-framework

我有关系模型：

```
modelBuilder.Entity<Product>()
      .HasMany(p => p.Properties)
      .WithOptional(); 
```

例如，Product1 有 3 个属性，当我从产品（而不是数据库）中删除一个属性时，我想在 db 中删除它，因为它不再在任何地方使用。我可以通过使用 EF 来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:22:44.133

如果您的导航属性不是虚拟的：

```
using(var db = new YourDbContext()
{
var product = db.Products.FirstOrDefault(x => ...);
product.Properties.RemoveAll(x => ...);
db.SaveChanges();
} 
```

否则：

```
using(var db = new YourDbContext()
{
var product = db.Products.Include("Properties").FirstOrDefault(x => ...);
product.Properties.RemoveAll(x => ...);
db.SaveChanges();
} 
```

# spring - jadira 用户类型时区

> ID：15544710
> 
> 赞同：3
> 
> 时间：2013-03-21T10:18:37.067
> 
> 标签：spring, hibernate, jodatime

我在我的项目中使用 jadira usertype + joda time。我正在使用休眠+弹簧。我的 bean pojo 使用 spring 注释作为 @CreatedDate 和 org.springframework.data.jpa.domain.support.AuditingEntityListener 在保存时自动设置 bean 的创建日期。我在欧洲/罗马时区，但不幸的是，在数据库中，日期存储为 UTC，而不是当我在客户端（javafx）上显示值时，日期显示在正确的时区中。

如何在正确的时区将数据存储在 db 中？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T03:23:11.893

您需要设置属性“jadira.usertype.databaseZone”。

将其设置为显式时区，或“jvm”以使用 JVM 的默认时区。

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
p:jpaProperties-ref="jpaProps" />

<util:properties id="jpaProps">
  <prop key="hibernate.show_sql">true</prop>
  <prop key="hibernate.format_sql">true</prop>
  <prop key="jadira.usertype.autoRegisterUserTypes">true</prop>
  <!-- defaults to storing UTC dates in DB otherwise -->
  <prop key="jadira.usertype.databaseZone">jvm</prop>
  <prop key="jadira.usertype.javaZone">jvm</prop>
</util:properties> 
```

# javascript - 在 IE 中禁用元素

> ID：15544715
> 
> 赞同：0
> 
> 时间：2013-03-21T10:18:51.363
> 
> 标签：javascript, image, html, audio

我正在制作一个 HTML 页面，它使用标签`<audio>`上的 OnClick`<img>`作为触发器。

**Javascript：**

```
function changeImage()
{
    element=document.getElementById('myimage')
    if (element.src.match("play"))
    {
        element.src="stop.png";
        document.getElementById('audiotag1').src="music.mp3";
        document.getElementById('audiotag1').play();
    } 
    else
    {
        element.src="play.png";
        document.getElementById('audiotag1').src="";
    }
} 
```

**IMG 标签：**
`<img id="myimage" onclick="changeImage()" src="play.png" width="20" height="20" style="position:absolute;top:5px;left:5px;">`

**音频标签：**
`<audio loop id="audiotag1" src="music.mp3" preload="auto"></audio>`

所以，问题来了，因为 IE8 不支持`<audio>`标签，我想让图像只在 IE8 或不支持`<audio>`标签的人上消失。是否可以？我该怎么办？我曾经使用 disabled='disabled' 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:21:27.847

尝试使用[条件注释](http://www.quirksmode.org/css/condcom.html)——即条件`<!--[if lte IE 8]>`。

这将隐藏您的图像小于并包括 IE8（因此 IE7、IE6 等）：

```
<!--[if lte IE 8]>
#myimage { 
  display: none; 
}
--> 
```

所以你的整个代码看起来像这样：

```
<!--[if IE 8]> 
  <style> 
    #myimage { 
      display: none; 
    } 
  </style> 
<![end if]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:31:03.170

您需要的是[Modernizr](http://modernizr.com/)。您可以检查对任何东西的支持。

Also Modernizr includes the html5shiv that is a must if you are planning to support oldie with html5.

You can check for

```
if (Modernizr.audio) {} 
```

This is **much better** then checking for specific browsers as it checks the actual support for the html5 audio tag and does not make assumptions based on the browser (IE is not the only outdated browser out there :D)

You can also check for actual file format support. The example from the Modernizr [documentation](http://modernizr.com/docs/#features-html5):

```
var audio = new Audio();
audio.src = Modernizr.audio.ogg ? 'background.ogg' :
            Modernizr.audio.mp3 ? 'background.mp3' :
                                  'background.m4a';
audio.play(); 
```

(Although this is a confusing way of using nested ? : operators IMHO)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T10:49:20.803

You can try through javascript check if you detect IE then `return false`

```
if(navigator.appName.indexOf("Internet Explorer") == -1) {
    document.getElementById('myimage').onclick = function () {
         return false;
    }
} else {
    document.getElementById('myimage').onclick = function () {
        alert("cliiing");
        return true;
    }
} 
```

# c - 包含一个头文件，用于使用 Doxygen 预处理器解析所有其他文件

> ID：15544721
> 
> 赞同：6
> 
> 时间：2013-03-21T10:19:03.110
> 
> 标签：c, c-preprocessor, header-files, doxygen

我想包含文件中的`#define`s`h`以使用 Doxygen 解析所有其他文件。

* * *

**项目背景：**

我的 C 项目包含一个头文件`config.h`，它是构建命令。

它还`MODEL_A`在同一构建命令上定义了一个目标。

`config.h`根据正在构建的目标创建定义（与 for 的定义列表不同`MODEL_A`）`MODEL_B`：

```
#if defined(MODEL_A)
#define HAS_FUNCTIONALITY_1
#define HAS_FUNCTIONALITY_2
#elif defined(MODEL_B)
#define HAS_FUNCTIONALITY_3
#define HAS_FUNCTIONALITY_4
#endif 
```

* * *

**我对 Doxygen 的问题：**

我尝试使用 Doxygen 生成文档。我在 Doxyfile 中有：

```
# including of config.h to INPUT seems necessary.
INPUT = ./source/config.h \
    ./source
ENABLE_PREPROCESSING = YES
MACRO_EXPANSION = YES
EXPAND_ONLY_PREDEF = NO
INCLUDE_PATH = ./source
INCLUDE_FILE_PATTERNS = ./source/config.h
PREDEFINED = MODEL_A 
```

依赖于定义的代码`HAS_FUNCTIONALITY_x`不包含在文档中，就好像预处理器没有在`config.h`.

* * *

**到目前为止我的发现：**

我在 的帮助下检查了预处理器输出`doxygen -d Preprocessor`，可以看到：

*   `./source/config.h`首先被解析，并且根据`MODEL_A`（我可以`#defines`在预处理器输出中看到正确的）正确解析。`#define HAS_FUNCTIONALITY_1`预处理器输出中的数字。
*   依赖于行为的**C**文件的预处理`HAS_FUNCTIONALITY_1`就好像它没有被定义一样。

在Doxyfile`HAS_FUNCTIONALITY_1`的字段中定义按预期工作。`PREDEFINED`这不是一个实用的解决方案，但仍然很有趣。

* * *

当预处理器在所有后续**C**文件上工作时，如何确保`#define`首先预处理的行保持定义？`config.h`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T08:39:43.890

显示 C 代码本身可能对您有益。一般来说，Doxygen 运行一个标准的预处理器——即渲染的代码应该与编译器预处理它的代码相同。为了`#define HAS_FUNCTIONALITY_1`在代码中实现等效 - 它必须被定义。我从您不愿将其添加到 doxygen 配置中了解到，它是在项目的其他位置（或者可能是 Makefile）中定义的，这就是实际代码的行为就像它已定义的原因。如果是这种情况，除了更多的预处理器技巧或简单地将其添加到 doxygen 配置文件中之外，我看不到一个合理的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T20:28:52.340

我遇到了一个非常相似的问题。

我的标题与我的源位于不同的目录中，例如：

```
doxy_input_dir/
    |
    + src/
    |
    + inc/ 
```

我将`RECURSIVE`输入文件选项设置为YES。我假设预处理器会正确找到我的标题。但是，当我通过运行查看预处理器输出时，`doxygen -d Predefined <doxyfile>`我看到了很多`#include foo.h: not found! skipping...`.

`INCLUDE_PATH`解决方案是使用标记显式指定所有头目录。**

# php - 使用 PHP 将十进制转换为十六进制

> ID：15544724
> 
> 赞同：0
> 
> 时间：2013-03-21T10:19:08.417
> 
> 标签：php, hex, decimal

如何使用php将十进制值转换为十六进制？

十二月：`68-55-230-06-04-89`

我想要`hex value`这样

十六进制：`44-37-E0-06-04-59` 但不是这个，而是它的显示`44-37-E0-6-4-59`

```
echo $test = dechex(68)."-".dechex(55)."-".dechex(230)."-".dechex(06)."-".dechex(04)."-".dechex(89); 
```

它给了我输出：`44-37-E0-6-4-59`//没有06-04

我想要输出类似`44-37-E0-06-04-59`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:25:36.890

你可以试试[sprintf](http://www.php.net/manual/en/function.sprintf.php)

```
sprintf('%02X-%02X-%02X-%02X-%02X-%02X', 68, 55, 230, 6, 4, 89); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:32:59.893

为了得到`44-37-E0-06-04-59`只是添加`0`如下，

```
sprintf('%02X-%02X-%02X-%02X-%02X-%02X', 68, 55, 230, 06, 04, 89); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:43:09.757

```
$dec= "68-55-230-06-04-89";

$arr= split("-",$dec);

foreach($arr as $key => $num)

{

    $arr[$key]=sprintf('%02X',dechex ($num));

}

//required results Array ( [0] => 44 [1] => 37 [2] => e6 [3] => 6 [04] => 4 [05] => 59 )

print_r($arr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:30:56.653

如果您假设破折号之间有最大的 FF，那么类似的东西应该可以工作：

```
$foo = explode("-", $dec);
foreach ($foo as $dec_value) {
    echo ($dec_value > 16) ? dechex($dec_value) : "0".dechex($dec_value);
} 
```

# python - 如果在函数内部定义了字体并且在 __init__ 内部定义了字体，则输出会发生变化

> ID：15544726
> 
> 赞同：0
> 
> 时间：2013-03-21T10:19:16.910
> 
> 标签：python, tkinter

**我有什么疑问**

我为两个不同的代码得到了两个不同的输出，我相信它们在做同样的事情。我在下面描述了这两种情况。

# 情况1

**我做了什么**

我定义了以下`__init__`

```
def __init__(self):
        self.window = Tk()  ##The main window instance
        self.window.title("STOPWATCH")

        ##Some fonts for use inside
        self.small = Font(family='Helvetica',size=11)
        self.medium = Font(family='Helvetica',size=15)
        self.big = Font(family='Helvetica',size=24) 
```

然后`self.big`在类的函数中使用字体，如下所示：

```
def quitwin(self,event=None):

        self.window.destroy()

        self.window = Tk()
        self.window.title('License and Credits')

        self.frame =Frame(self.window)
        self.frame.pack()

        r = Frame(self.frame)
        r.pack()

        m = Message(r,text="Licensed under WTFPL license\
                          ",font=self.big)

        m.pack()

        b = Button(r,text='QUIT',fg='red',bg='black',command=self.window.destroy,font=self.big)
        b.pack(side='bottom') 
```

**输出：**

[![](../Images/be247317f1462c91f429c0b74cb5ae82.png)](https://i.stack.imgur.com/CZCqH.png)

# 案例2

我更改了代码以便`self.big`在函数内部定义变量`quitwin`：

**代码：**

```
def quitwin(self,event=None):

        self.window.destroy()

        self.window = Tk()
        self.window.title('License and Credits')

        self.frame =Frame(self.window)
        self.frame.pack()

        r = Frame(self.frame)
        r.pack()

        self.big = Font(family='Helvetica',size=24)

        m = Message(r,text="Licensed under WTFPL license\
                              ",font=self.big)

        m.pack()

        b = Button(r,text='QUIT',fg='red',bg='black',command=self.window.destroy,font=self.big)
        b.pack(side='bottom') 
```

**输出**

[![](../Images/2b73ded2ec8834039bcf93685966edcf.png)](https://i.stack.imgur.com/DauHt.png)

这种字体比我们之前看到的字体大得多。

## 怀疑

这让我想知道其中哪一个是真正的 24 号字体。虽然我确实想要第二个输出，但为什么我没有得到与我第一次使用的代码相同的输出？

**请**帮我解决这个疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:23:38.553

我猜这与您创建多个实例的事实有关`Tk`，这不是 Tkinter 的设计用途。可能是在第一种情况下，字体与原始`Tk`对象相关联，当它被破坏时，字体被破坏或被垃圾收集。在第二种情况下，字体与对话框绑定到相同的实例，`Tk`因此它是“实际大小 24 字体”。

# php - 多个UPDATE函数，php sql，只更新最后一个函数

> ID：15544727
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:19:19.153
> 
> 标签：php, sql

我在 php 上的更新函数有问题，我有代码可以使函数工作，但它只更新最后一个函数。

```
<html>
<head>
<title>Update a Record in MySQL Database</title>
</head>
<body>

<?php
if(isset($_POST['update']))
{
$dbhost = '';
$dbuser = '';
$dbpass = '';
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
  die('Could not connect: ' . mysql_error());
}

$stock_1 = $_POST['stock_1'];
$stock_2 = $_POST['stock_2'];
$stock_3 = $_POST['stock_3'];
$stock_4 = $_POST['stock_4'];
$stock_5 = $_POST['stock_5'];
$stock_6 = $_POST['stock_6'];

$sql = "UPDATE products ".
       "SET instock = $stock_1 ".
       "WHERE productid = 1" ;

$sql = "UPDATE products ".
       "SET instock = $stock_2 ".
       "WHERE productid = 2" ;
$sql = "UPDATE products ".
       "SET instock = $stock_3 ".
       "WHERE productid = 3" ;

$sql = "UPDATE products ".
       "SET instock = $stock_4 ".
       "WHERE productid = 4" ;

$sql = "UPDATE products ".
       "SET instock = $stock_5 ".
       "WHERE productid = 5" ;

$sql = "UPDATE products ".
       "SET instock = $stock_6 ".
       "WHERE productid = 6" ;

mysql_select_db('db_k0903037');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not update data: ' . mysql_error());
}
echo "Updated data successfully\n";
mysql_close($conn);
}
else
{
?>
<form method="post" action="<?php $_PHP_SELF ?>">
<table width="400" border="0" cellspacing="1" cellpadding="2">
<tr>
<td width="100">3.5" Seagate SATA 2TB</td>
<td><input name="stock_1" type="text" id="stock_1"></td>
</tr>
<tr>
<td width="100">Samsung 2.5" SATA Hard Drive</td>
<td><input name="stock_2" type="text" id="stock_2"></td>
</tr>
<tr>
<td width="100">8gb Kingston DDR3 RAM 1333mhz</td>
<td><input name="stock_3" type="text" id="stock_3"></td>
</tr>
<tr>
<td width="100">Apple MacBook Ram 8GB</td>
<td><input name="stock_4" type="text" id="stock_4"></td>
</tr>
<tr>
<td width="100">Gigabyte GA-970A-DS3</td>
<td><input name="stock_5" type="text" id="stock_5"></td>
</tr>
<tr>
<td width="100">Asus P8Z77-V PRO </td>
<td><input name="stock_6" type="text" id="stock_6"></td>
</tr>
<tr>
<td width="100"> </td>
<td> </td>
</tr>
<tr>
<td width="100"> </td>
<td>
<input name="update" type="submit" id="update" value="Update">
</td>
</tr>
</table>
</form>
<?php
}
?>
</body>
</html> 
```

那是我的代码，我正在努力寻找为什么它不更新所有这些？显然我输入了正确的用户名和密码！

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:22:21.757

你`mysql_select_db('db_k0903037');`必须在代码的顶部，然后你必须做

```
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
  die('Could not update data: ' . mysql_error());
} 
```

每个之后`$sql = "...";`。

你这样做的方式是`$sql`每次都将字符串设置为不同的值，但实际上并没有执行该查询。`mysql_query`实际执行吗:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:30:09.853

为什么不循环执行呢？

```
for($i=1;$i<=6;++$i){
  ${'stock_'.$i} = $_POST['stock_'.$i];
  $sql = "UPDATE products SET instock = ".${'stock_'.$i}." WHERE productid = ".$i ;
  $retval = mysql_query( $sql, $conn );
  // ...
} 
```

要不就

```
for($i=1;$i<=6;++$i){
  $var = $_POST['stock_'.$i];
  $sql = "UPDATE products SET instock = ".$var." WHERE productid = ".$i ;
  $retval = mysql_query( $sql, $conn );
  // ...
} 
```

# java - 使用 lucene 搜索从表中检索 SQL 日期数据类型

> ID：15544733
> 
> 赞同：0
> 
> 时间：2013-03-21T10:19:29.157
> 
> 标签：java, swing, netbeans, lucene

我在使用 java derby DB 和 swing 接口以及 netbeans IDE 的应用程序中使用 Lucene 3、6、2 作为搜索引擎。

现在我能够从关于查询的所有信息中检索为字符串数据类型。我提供下面的代码。

```
// create some index
        Directory index = new RAMDirectory();
        StandardAnalyzer analyzer = new StandardAnalyzer(matchVersion);
        IndexWriterConfig IWConfig = new IndexWriterConfig(Version.LUCENE_36, analyzer);
        IndexWriter iw = new IndexWriter(index,IWConfig) ;

           try {

      con = DriverManager.getConnection(host, uName, uPass);

    Statement stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
     String sql = "SELECT * FROM APP.REGISTRY";
        rs = stmt.executeQuery(sql);

         rs.beforeFirst();
         while(rs.next()) {
         doc = new Document();
         doc.add(new Field("id",rs.getString("ID"),Field.Store.YES,Field.Index.ANALYZED));
         doc.add(new Field("subject",rs.getString("SUBJECT"),Field.Store.YES,Field.Index.ANALYZED));
         doc.add(new Field("letter_from",rs.getString("LETTER_FROM"),Field.Store.YES,Field.Index.ANALYZED));
         doc.add(new Field("date_of_letter",rs.getString("DATE_OF_LETTER"),Field.Store.YES,Field.Index.ANALYZED));        
         doc.add(new Field("date_received",rs.getString("DATE_RECEIVED"),Field.Store.YES,Field.Index.ANALYZED)); 
```

但是有一个日期列，我想从日期列中检索数据作为日期数据类型而不是字符串数据类型。

关于如何做到这一点的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:35:00.723

您可以通过将日期转换为长整数 (Date.getTime()) 并将它们存储为[NumericField](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/document/NumericField.html)

```
NumericField letterDateField = new NumericField("date_of_letter",Field.Store.YES,true);
letterDateField.setLongValue(rs.getDate("DATE_OF_LETTER").getTime());
doc.add(letterDateField);
NumericField receivedDateField = new NumericField("date_received",Field.Store.YES,true);
receivedDateField.setLongValue(rs.getDate("DATE_RECEIVED").getTime());
doc.add(receivedDateField); 
```

为了让时间回来，只需拉长值并用它创建一个新的日期：

```
Date letterDate = new Date(doc.getField("date_of_letter").numericValue().longValue()); 
```

在搜索范围时，您还需要将用于比较的值转换为 long，例如：

```
NumericRangeQuery.newLongRange("date_of_letter",minDate.getTime(),maxDate.getTime(),true,false) 
```

或者，如有必要，您可以将日期的组成部分存储在单独的字段中（即年份字段、月份字段、日期字段等）。这将允许您设计一些在存储数字日期值时会很困难或不可能的查询（例如，如果您想查询任何年份的日期为 2 月的任何内容）。

就个人而言，我建议不要直接使用[NumericUtils](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/util/NumericUtils.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:23:11.863

看看[`NumericField`](http://lucene.apache.org/core/3_6_2/api/all/org/apache/lucene/document/NumericField.html)。使用数字字段，您将能够进行范围查询（如果数据类型为 ，则行为完全不同`String`）。

`NumericUtils.longToPrefixCoded`您可以使用静态方法将日期转换为时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T21:17:35.640

这可能是使用[DateTools](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/DateTools.html?is-external=true)索引日期的更好方法。

使用它将日期转换为字符串将允许搜索（字典，而不是数字）范围，或搜索单个术语。查看[QueryParser 文档](http://lucene.apache.org/core/4_0_0/queryparser/org/apache/lucene/queryparser/classic/QueryParser.html)，了解它如何处理日期范围。

您可以将日期值添加到索引中，例如：

```
doc.add(new Field("date_of_letter",DateTools.dateToString(rs.getDate("DATE_RECEIVED"),DateTools.Resolution.DAY),Field.Store.YES,Field.Index.ANALYZED));        
doc.add(new Field("date_received",DateTools.dateToString(rs.getDate("DATE_RECEIVED"),DateTools.Resolution.DAY),Field.Store.YES,Field.Index.ANALYZED)); 
```

并类似地将值转换回日期

```
DateTools.stringToTime(dateResult); 
```

# mercurial - 解决冲突：如何自动接受“他们的”更改？

> ID：15544736
> 
> 赞同：104
> 
> 时间：2013-03-21T10:19:42.793
> 
> 标签：mercurial

当使用 合并有冲突的更改时`hg merge`，Mercurial 将一组标记插入到要合并到我的工作副本中的文件中，如下所示：

```
<<<<<<< local
  version = 0.2
=======
  version = 0.1
>>>>>>> other 
```

然后我从生成的列表中手动编辑所有标记为 U 的文件`hg resolve --all -l`，然后我告诉 mercurial 我已经解决了它们`hg resolve -m file1 file2 file3 ...`

但是，在许多情况下，我希望接受对某些冲突文件的仅我或仅他们的更改。我正在考虑创建两个简单的 sed/awk/任何名为的脚本`accept-theirs.sh`，`accept-my.sh`或者是否有任何“正确”的方法来做到这一点？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-03-21T11:10:10.220

利用

```
hg resolve -t internal:other --all 
```

接受`theirs`和

```
hg resolve -t internal:local --all 
```

接受`yours`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-21T11:04:04.570

尝试这个：

```
hg merge --tool 'internal:other' 
```

另请参阅`hg help merge-tools`以获取更多信息。

# php - 在 Wordpress 中使用 Twitter Bootstrap 自动生成行

> ID：15544741
> 
> 赞同：0
> 
> 时间：2013-03-21T10:19:52.113
> 
> 标签：php, css, wordpress, twitter-bootstrap

早上好，我发现自己有点进退两难了！我正在使用 Twitter Bootstrap 创建一个 Wordpress 主题，我正在通过 Wordpress“帖子”为“认识团队”页面生成成员我只能在 1 行中放置 3 个条目... IE

```
<div class="row">
    <div class="span4"></div>
    <div class="span4"></div>
    <div class="span4"></div>
</div> 
```

但是每行超过 3 个条目会破坏该行，所以我需要为每 3 个条目生成一个新行。我怎样才能做到这一点？

这是我用于输出条目的 PHP 代码。

```
<?php query_posts('category_name=members&orderby=date'); ?>
<div class="row-fluid">
   <ul class="thumbnails">
      <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
      <li class="span4">
          <div class="thumbnail">
          <?php // check if the post has a Post Thumbnail assigned to it.the_post_thumbnail();
          ?>
              <div class="pad">
                 <h3><?php the_title(); ?></h3>
                 <?php the_content(); ?>
              </div>
          </div>
       </li>
    <?php endwhile; ?>
     </ul>
  </div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:00:25.903

尝试这个

```
<?php query_posts('category_name=members&orderby=date'); ?>
<div class="row-fluid">
   <ul class="thumbnails">
      <?php 
      $cnt =0;
      if ( have_posts() ) : while ( have_posts() ) : the_post(); 
        if($cnt%3==0){
          echo "</ul></div><div class='row-fluid'><ul clsas='thumbnails'>";
        }

      ?>
      <li class="span4">
          <div class="thumbnail">
          <?php // check if the post has a Post Thumbnail assigned to it.the_post_thumbnail();
          ?>
              <div class="pad">
                 <h3><?php the_title(); ?></h3>
                 <?php the_content(); ?>
              </div>
          </div>
       </li>
    <?php 
    $cnt++;
    endwhile; ?>
     </ul>
  </div>
<?php endif; ?> 
```

# c++ - 文本渲染非常慢

> ID：15544742
> 
> 赞同：9
> 
> 时间：2013-03-21T10:19:56.420
> 
> 标签：c++, performance, opengl, ftgl

我正在使用 FTGL 库在我的 C++、OpenGL 应用程序中渲染文本，但我发现它非常慢，尽管据说它是快速高效的库。

即使对于少量文本，性能下降也是可见的，但是当我尝试渲染几行文本时，FPS 从 350~ 下降到 30~：

![在此处输入图像描述](../Images/d51e305065ea3dcbe3c9fce76d04e9af.png)

是的，我已经知道 FPS 不是检查效率的好方法，但在这种情况下应该没有那么大的差异。

我找到了一个允许我让 FTGL 在内部使用显示列表以提高速度的功能，但它似乎默认打开。无论如何，我尝试使用它，但它什么也没给我。所以我想可能是它被某种方式损坏了，或者我不太了解它，所以我决定将渲染文本放入我自己的显示列表中，但差异要么很小，我什至看不到，要么没有不同之处。

```
bool TFontManager::renderWrappedText(font_ptr font, int lineLength, const TPoint& position, const std::string& text) {
    if(font == nullptr) {
        return false;
    }

    string key = sizeToString(font->FaceSize());    // key to look for it in map
    key.append(TUtil::intToString(lineLength));
    key.append(text);
    GLuint displayListId = getDisplayListId(key);   // get display list id from internal map

    if(displayListId != 0) {                        // if display list id was found in map, i can call it
        glCallList(displayListId);
        return true;
    }

    // if id was not found, i'm creating new display list 

    FTSimpleLayout simpleLayout;
    simpleLayout.SetLineLength((float)lineLength);

    simpleLayout.SetFont(font.get());

    displayListId = glGenLists(1);
    glNewList(displayListId, GL_COMPILE);

    glPushMatrix();
    glTranslatef(position.x, position.y, 0.0f);
    simpleLayout.Render(TUtil::stringToWString(text).c_str(), -1, FTPoint(), FTGL::RENDER_FRONT | FTGL::RENDER_BACK);        // according to visual studio's profiler, bottleneck is inside this function. more exactly in drawing textured quads when i looked into FTGL code.
    glPopMatrix();

    glEndList();

    m_textDisplayLists[key] = displayListId;

    glCallList(displayListId);

    return true;
} 
```

我在调试模式下检查了断点 - 它只创建一次显示列表，稍后它只调用以前创建的一个。

渲染速度如此缓慢的原因可能是什么？我怎样才能加快速度？

**编辑：** 我正在使用`FTTextureFont`（每个字形使用一个纹理）。根据[这个](http://ftgl.sourceforge.net/docs/html/ftgl-tutorial.html)FTGL 教程，我宁愿使用`FTBufferFont`，因为它每行只使用一个纹理。缓冲字体应该更快，但在我尝试后它更丑甚至更慢（6 fps，而纹理字体给了我 30 fps）。

**编辑2：**

这就是我创建字体的方式：

```
font_ptr TFontManager::getFont(const std::string& filename, int size) {
    string fontKey = filename;
    fontKey.append(sizeToString(size));

    FontIter result = fonts.find(fontKey);
    if(result != fonts.end()) {
        return result->second;      // Found font in list
    }

    // If font wasn't found, create a new one and store it in list of fonts

    font_ptr font(new FTTextureFont(filename.c_str()));
    font->UseDisplayList(true);

    if(font->Error()) {
        string message = "Failed to open font";
        message.append(filename);
        TError::showMessage(message);
        return nullptr;
    }

    if(!font->FaceSize(size)) {
        string message = "Failed to set font size";
        TError::showMessage(message);
        return nullptr;
    }

    fonts[fontKey] = font;

    return font;
} 
```

**编辑3：**

这是从 FTGL 库源代码中获取的函数，它在`FTTextureFont`. 它对单独的字形使用相同的纹理，只是使用其他坐标，所以这应该不是问题。

```
const FTPoint& FTTextureGlyphImpl::RenderImpl(const FTPoint& pen,
                                              int renderMode)
{
    float dx, dy;

    if(activeTextureID != glTextureID)
    {
        glBindTexture(GL_TEXTURE_2D, (GLuint)glTextureID);
        activeTextureID = glTextureID;
    }

    dx = floor(pen.Xf() + corner.Xf());
    dy = floor(pen.Yf() + corner.Yf());

    glBegin(GL_QUADS);
        glTexCoord2f(uv[0].Xf(), uv[0].Yf());
        glVertex2f(dx, dy);

        glTexCoord2f(uv[0].Xf(), uv[1].Yf());
        glVertex2f(dx, dy - destHeight);

        glTexCoord2f(uv[1].Xf(), uv[1].Yf());
        glVertex2f(dx + destWidth, dy - destHeight);

        glTexCoord2f(uv[1].Xf(), uv[0].Yf());
        glVertex2f(dx + destWidth, dy);
    glEnd();

    return advance;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T22:19:47.717

从普通字体文件渲染排版是一项计算量非常大的操作。字体字形被读取为一组样条线，用于生成字符边界，这些边界被细分并馈送到图形管道中。我对 FreeType2 不是很熟悉，但我使用过 FTGL。您应该使用 FontAtlas 来呈现类型。FontAtlas 是一个常规的纹理图集（很像精灵表），它为每种字体大小渲染一次，然后存储以供将来的字形渲染使用。

查看此链接以获取有关该过程的更多信息：http: [//antongerdelan.net/opengl4/freetypefonts.html](http://antongerdelan.net/opengl4/freetypefonts.html)

这应该会大大提高性能。尽管您可能会失去一些字体渲染的灵活性。

# css - 将 xml 样式表添加到 javascript 中的 SVG 对象时出错

> ID：15544744
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:20:05.547
> 
> 标签：css, svg

将此行代码添加到我的 javascript 文件时出现错误，

解析错误：语法错误，意外的 T_STRING

```
var data = "<?xml-stylesheet type='text/css' href='css/main.css' ?>"+
        "<svg xmlns='http://www.w3.org/2000/svg' width='800' height='800'>"+
        "<foreignObject width='100%' height='100%'>" +
         "<div xmlns='http://www.w3.org/1999/xhtml'>"+$("#mainbody").html() 
             + "</div></foreignObject></svg>"; 
```

当我删除这部分时问题显示：

```
"<?xml-stylesheet type='text/css' href='css/main.css' ?>" 
```

而且我在另一个文件中有相同的行，但完全没有问题

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:30:50.823

这是一个 PHP 错误。你需要对`<?`or`?>`序列进行转义，这对 PHP 来说当然有特殊的意义。

但是，即使您修复了该问题并让 PHP 满意，您尝试做的事情也不会奏效。当您尝试将某个 DOM 节点的“html”属性设置为`data`您正在定义的这个变量时，您会得到一个不同的错误，指出 DOM 字符串格式错误（或者，可能`<?xml-stylesheet?>`会忽略伪指令）。这是因为它出现在**XML 文档**`xml-stylesheet`的开头，而不是在可以分配给元素属性的那种文本 DOM 片段中。**它在显示 SVG文档**时生效，而不是在 HTML 页面中的 SVG 片段上。**`html`**

 ****你想在这里完成什么？该`main.css`文件包含特定于该 SVG 片段的 css 声明？为什么不在 HTML 文件的 HEAD 中包含 CSS 文件？

另一种可能的解决方案是将 SVG 外部化为一个单独的文件，并使用 IMG 元素或其他东西包含它——在这种情况下，`<?xml-stylesheet?>`伪指令就可以正常工作。但这不会让你做你似乎试图用这件事做的`$("#mainbody")`事情——这就是……什么？以某种方式将 HTML 包装在 SVG 中？为什么？****

# android - 打开 Web 视图

> ID：15544745
> 
> 赞同：0
> 
> 时间：2013-03-21T10:20:06.350
> 
> 标签：android, webview, imagebutton

我有一个图像按钮，单击该按钮会打开一个带有网络视图的新活动。网络视图将显示一些自定义 HTML。当我单击按钮时，Web 视图不显示任何内容。

这是我的按钮视图的代码：-

```
 public void GoToContact(View view)  
{

        WebView webView;

        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.myWebView);
        webView.getSettings().setJavaScriptEnabled(true);

        String customHtml = "<html><body><h1>Hello, WebView</h1></body></html>";
           webView.loadData(customHtml, "text/html", "UTF-8");

} 
```

这是我的网络视图布局：-

```
 <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">

    <ImageButton
    android:id="@+id/GoToHome"
    android:onClick="GoToTC" 
    android:background="@drawable/test"
    android:layout_width="360dp"
    android:layout_height="60dp"
    android:contentDescription="@string/header"/>

    <WebView
    android:id="@+id/myWebView"
    android:layout_width="match_parent"
    android:layout_height="400dp" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:29:34.353

尝试这个

```
public class MainActivity extends Activity {

    private Button button;

    public void onCreate(Bundle savedInstanceState) {
        final Context context = this;

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button = (Button) findViewById(R.id.buttonUrl);

        button.setOnClickListener(new OnClickListener() {

          @Override
          public void onClick(View arg0) {
            Intent intent = new Intent(context, WebViewActivity.class);
            startActivity(intent);
          }

        });

    }

}

public class WebViewActivity extends Activity {

    private WebView webView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        webView = (WebView) findViewById(R.id.webView1);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.loadUrl("http://www.google.com");

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:26:48.813

首先将 WebView 声明为您的活动的类成员：

```
 WebView webView;

    public void GoToContact(View view)  
    {

    setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.myWebView);
    webView.getSettings().setJavaScriptEnabled(true);

    String customHtml = "<html><body><h1>Hello, WebView</h1></body></html>";
       webView.loadData(customHtml, "text/html", "UTF-8");

   } 
```

然后再试一次...顺便说一句，请向我们展示您的 layout.xml 和整个活动类的代码。

# django - django-mailer creates multiple db entries from email address

> ID：15544748
> 
> 赞同：0
> 
> 时间：2013-03-21T10:20:13.897
> 
> 标签：django, django-mailer

I've just implemented django-mailer as it seemed to be the best way to send mail asynchronously from django.

For some reason, [django-mailer](https://github.com/pinax/django-mailer) is creating a db entry for each letter of the recipient's email address, with the "To" field having one letter in it.... Here's a screenshot:

[http://i.imgur.com/Pqbx3oq.gif](http://i.imgur.com/Pqbx3oq.gif)

I've cut off the rest of the entries so as not to show the full address, but suffice it to say that the "To" fields of all the entries add up to the user's email address. (To clarify, sending one email creates an object for each letter of the email address).

The code which generates the mail is:

```
from mailer import send_mail
from notifications.models import EmailNotifications

users_to_email = EmailNotifications.objects.filter(\
                            product=product)
    if users_to_email:
        for user_to_email in users_to_email:
            the_score = self.rating
            user = user_to_email.user
            name = '%s %s' % (str(user.first_name),\
                                    str(user.last_name))
            user_email = user.email
            theSubject = 'Score Notification'
            theMessage = render_to_string('notification-email.txt',
                                   {'the_score': the_score,
                                    'name': name,
                                    'user': user,
                                    'user_email': user_email})
                send_mail(theSubject, theMessage, SERVER_EMAIL,\
                                                        user_email) 
```

Outputting `user_email` in the notification-email gives the whole email address correctly, so I'm assuming that this is a problem with the django-mailer save function....?

Very grateful for any pointers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:39:37.937

好吧，毕竟，我已经自己解决了，当然，我犯了一个严重的 n00b 错误....

`send_mail`需要收件人列表。我应该做的是：

```
send_mail(subject, message, SERVER_EMAIL, [user_email]) 
```

请注意 user_email 周围的方括号以使其成为列表.....现在一切都很好。

# php - How can I auto populate a dropdown with years going into the future with php

> ID：15544751
> 
> 赞同：1
> 
> 时间：2013-03-21T10:20:25.837
> 
> 标签：php, date

I have a dropdown that I want to populate with a date starting from last year going up to 5 years in the future but I want it to update automagically every year with php.

Probably easier if I show what I want to end up with than trying to explain.

This Years dropdown should be

```
<select>
     <option>2012-08-31</option>
     <option>2013-08-31</option>
     <option>2014-08-31</option>
     <option>2015-08-31</option>
</select> 
```

And nextYears dropdown should be

```
<select>
     <option>2013-08-31</option>
     <option>2014-08-31</option>
     <option>2015-08-31</option>
     <option>2016-08-31</option>
</select> 
```

and so on.

Anybody got any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:26:00.143

要添加一年，您可以使用

```
echo date('Y-m-d H:i:s', strtotime('+1 year')); 
```

增加许多年

```
for($i=1;$i<=5;$i++)
{
echo date('Y-m-d H:i:s', strtotime('+'.$i.' year'));
} 
```

与选择框一起使用

```
<select name="years">
for($i=1;$i<=5;$i++)
    {
    ?>
    <option value="<?php echo date('Y-m-d H:i:s', strtotime('+'.$i.' year')); ?>"><?php echo date('Y-m-d H:i:s', strtotime('+'.$i.' year')); ?></option>
   <?php
    }
    ?>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:24:31.163

增加年限？

```
for($i=date('Y'); $i<date('Y')+5; $i++){
    echo '<option>'.$i.date('-m-d').'</option>';
} 
```

但最好玩[mktime](http://php.net/manual/en/function.mktime.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:28:50.067

你可以做一个这样的功能

```
function getNextYears($fromDate, $nbYears)
{
    $time = strtotime($fromDate);
    $dates = array();

    for ($i=0; $i<$nbYears; $i++) {
        $dates[] = date('Y-m-d', mktime(0, 0, 0, date('m', $time), date('d', $time), date('Y', $time)+$i));        
    }

    return $dates;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:31:57.647

像这样的东西可能会帮助你

```
<?php

$start_year = date('Y')-1;
$end_year   = $start_year+5;

for($i=$start_year; $i<=$end_year; $i++)
{
   echo '<option>'.$i.date('-m-d').'</option>';
} 
```

?>

# c# - not all code paths return a value using html agility pack

> ID：15544757
> 
> 赞同：0
> 
> 时间：2013-03-21T10:20:36.423
> 
> 标签：c#, html-agility-pack

I am rather new to c# and the html agility pack I have wrote this code to parse apart of a webpage.

```
private IList<Category> GetFeatureSubCategories(HtmlNode std, Category category)
    {
        List<Category> categories = new List<Category>();
        {
            if (category.name == "Featured")
            {
                var nodes = std.SelectNodes("//span[contains(@class,'widget')] [position() <= 4]");

                foreach (var node in nodes)
                {
                    string name = SiteParserUtilities.ParserUtilities.CleanText(System.Net.WebUtility.HtmlDecode(node.InnerText));
                    string url = node.Attributes["href"].Value;
                    string identifier = url.Split('/').Last().Replace(".html", "");
                    WriteQueue.write(string.Format(" Category [{0}].. {1} ", name, url));

                    IList<Category> sub = GetSubCategories(std);
                    Category c = new Category()
                    {
                        active = true,
                        Categories = sub.ToArray(),
                        description = "",
                        identifier = identifier,
                        name = name,
                        Products = new Product[0],
                        url = url,
                    };
                    StatisticCounters.CategoriesCounter();
                    categories.Add(c);
                }

            }

        }

    } 
```

I am receiving an error message saying "SiteParser.GetFeatureSubCategories(HtmlAgilityPack.HtmlNode, Category)': not all code paths return a value" I was just wondering whether anyone would be able to give me some advice in why this error message is occurring. Thanks for any help you can offer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:21:38.077

您的方法假设返回 type 的对象`IList<Category>`，您的代码中没有任何`return`语句。可能您想`categories`从您的方法返回，您可以将 return 语句放在方法结束之前。

```
private IList<Category> GetFeatureSubCategories(HtmlNode std, Category category)
{
        List<Category> categories = new List<Category>();
        {
        //.................
return categories;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:22:08.153

该错误是不言自明的：您的代码什么都不做`return`，而方法的签名承诺它会做。

`return categories;`在方法结束时会做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:24:59.743

该方法的承诺在`IList<Category>`这里返回：

```
private IList<Category> GetFeatureSubCategories 
```

所以它必须以任何方式返回它（或者至少`null`是默认值）。

但是你没有返回一个列表。所以只`return categories;`在最后加上。

```
private IList<Foo> GetFeatureSubCategories(HtmlNode std, Foo category)
{
    List<Category> categories = new List<Category>();
    {
        if (category.Name == "Featured")
        {
            var nodes = std.SelectNodes("//span[contains(@class,'widget')] [position() <= 4]");
            foreach (var node in nodes)
            {
               // blah ...
            }
            // blah ...
        }
    }
    return categories;
} 
```

[**MSDN**](http://msdn.microsoft.com/en-us/library/ms173114%28v=vs.80%29.aspx)：

> 具有非 void 返回类型的方法需要使用 return 关键字来返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:22:18.517

您没有从声明返回 ILIst 的方法返回任何内容

`return categories;`在倒数第二个'}'括号之后添加

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:23:31.557

您的方法返回 a`IList<Category>`但您没有返回`IList<Category>`代码中的任何位置。称呼： -

```
return categories; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T10:23:32.997

您不会在代码中的任何地方重新分类

在代码末尾添加 return 语句，就像我添加的一样

```
private IList<Category> GetFeatureSubCategories(HtmlNode std, Category category)
{
    List<Category> categories = new List<Category>();
    {
        if (category.name == "Featured")
        {
            var nodes = std.SelectNodes("//span[contains(@class,'widget')] [position() <= 4]");

            foreach (var node in nodes)
            {
                string name = SiteParserUtilities.ParserUtilities.CleanText(System.Net.WebUtility.HtmlDecode(node.InnerText));
                string url = node.Attributes["href"].Value;
                string identifier = url.Split('/').Last().Replace(".html", "");
                WriteQueue.write(string.Format(" Category [{0}].. {1} ", name, url));

                IList<Category> sub = GetSubCategories(std);
                Category c = new Category()
                {
                    active = true,
                    Categories = sub.ToArray(),
                    description = "",
                    identifier = identifier,
                    name = name,
                    Products = new Product[0],
                    url = url,
                };
                StatisticCounters.CategoriesCounter();
                categories.Add(c);
            }
        }
    }
         return categories;
} 
```

# ios - UITableViewCell 背景图片设置

> ID：15544758
> 
> 赞同：3
> 
> 时间：2013-03-21T10:20:40.620
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我尝试将背景图像添加到我的`UITableViewCell`. 这是我正在使用的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"TableCell";

    // Dequeue or create a cell of the appropriate type.
    TableCell *cell = (TableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.backgroundView =  [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.jpeg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ];
    cell.selectedBackgroundView =  [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.jpeg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ];

    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    [cell.preparationLabel setFont:[UIFont fontWithName:@"Bold" size:20]];

    // Configure the cell.
    if (btnselected==1)
    {
        cell.preparationLabel.text = [recipe.ingredients objectAtIndex:indexPath.row];
    }
    else
    {
     cell.preparationLabel.text = [recipe.preparation objectAtIndex:indexPath.row];
    }
    return cell;
} 
```

我的问题是，在运行应用程序并选择表格视图时，它首先显示具有默认白色背景的表格单元格，一段时间后单元格背景将更改为所需的图像......我不知道为什么需要很长时间才能用我想要的单元格背景加载表格视图

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T10:24:55.423

加载缓慢是因为您`UIImageView`每次都将其添加到单元格中，而不是仅在创建新单元格时添加。

更改您的代码如下：

```
 // Dequeue or create a cell of the appropriate type.
    TableCell *cell = (TableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        cell.backgroundView =  [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.jpeg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ];
        cell.selectedBackgroundView =  [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.jpeg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ];
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:25:06.260

你需要搬家

```
cell.backgroundView =  [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.jpeg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ];
cell.selectedBackgroundView =  [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"cellbg.jpeg"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]; 
```

行到`if (cell == nil)...`条件之后。否则，单元格只有在被回收后才能获得新的背景，而新创建的单元格仍然没有背景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T10:26:17.713

```
if (cell == nil) 
{
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"TableCell" owner:self options:nil];

        UIImageView *imgView1 = [[UIImageView alloc]init];..continue...
        UIImageView *imgView2 = [[UIImageView alloc]init];..continue...

        [cell.backgroundView addSubView:imgView1];
        [cell.selectedBackgroundView addSubView:imgView2];
        cell = [nib objectAtIndex:0];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:44:22.450

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    UIImageView *ivwCellHighlighted = [[UIImageView alloc]initWithImage:[UIImage imageNamed:CELL_SELECTEDIMAGE]];
    [ivwCellHighlighted setFrame:CGRectMake(1, 1, 320, 47)];
    [cell setSelectedBackgroundView:ivwCellHighlighted];
    [ivwCellHighlighted release];
    ivwCellHighlighted=nil;

} 
```

# java - 当 SOAP XML 中没有输入值时，如何使 xsd 中的整数元素值不为零？

> ID：15544762
> 
> 赞同：0
> 
> 时间：2013-03-21T10:20:43.807
> 
> 标签：java, soap, xsd, jaxb, spring-ws

我有一个用 jaxb 和 spring webservice 构建的 java web 服务应用程序。

我在 xsd 中有一个复杂的类型，如下所示：

```
...

<complexType name="GetRecordsRequest">
    <sequence>
        <element name="maxRecords" type="int" maxOccurs="1" minOccurs="1"/>
    </sequence>
</complexType>

... 
```

使用**xjc**，我得到了从 xsd 生成的 jaxb 类：

```
public class GetRecordsRequest {
    protected int maxRecords;

    public int getMaxRecords() {
        return maxRecords;
    }

    public void setMaxRecords(int value) {
        this.maxRecords = value;
    }
} 
```

**现在，问题是如果我在SoapUI**应用程序的soap request xml 中为 maxRecords 输入空值，如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.test.com/ns1">
   <soapenv:Header/>
   <soapenv:Body>
      <ns1:GetRecordsRequest>
         <ns1:maxRecords></ns1:maxRecords>
      </ns1:GetRecordsRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

我在 webservice 端点类方法中得到**maxRecords的值为 0。**我预计应用程序会抛出错误或异常，因为我在 xsd 中设置了**minOccurs="1"**，我认为这意味着强制。

```
@PayloadRoot(namespace="http://www.test.com/ns1", localPart = "GetRecordsRequest")
public JAXBElement<GetRecordsResponse> GetRecordsRequest(JAXBElement<GetRecordsRequest> jaxbGetListMessage){
    GetRecordsRequest request = jaxbGetListMessage.getValue();

    System.out.println(request.getMaxRecords());    // print 0 value

    ...
} 
```

**我什至将 xsd 中的 minOccurs 更改为 0，因此类型变为 Integer，但 maxRecords 值仍然为 0，我预计它会为 null。**

我知道的唯一方法是将 maxRecords 的类型更改为字符串或令牌，但如果有另一种解决方案仍然保持其整数类型，我更喜欢。

**那么，当我在soap xml中输入空值时，如何使maxRecords值为null或发生异常？**

**注意：**我已经通过删除不相关的部分来简化上面的代码/xml，以使代码更易于阅读。如果您发现语法错误，请在评论部分告诉我，因为我手动输入了大部分代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:48:50.000

我按照其他人的建议使用**PayloadValidatingInterceptor**，并在应用程序中添加了类似的内容。上下文 xml 和它的工作原理：

```
<bean class="org.springframework.ws.server.endpoint.mapping.PayloadRootAnnotationMethodEndpointMapping">
    <property name="interceptors">
        <list>
            <ref local="validatingInterceptor" />
        </list>
    </property>
</bean>

<bean id="validatingInterceptor" class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
    <property name="schema" value="/WEB-INF/schemas/webservice.xsd" />
    <property name="validateRequest" value="true" />
    <property name="validateResponse" value="true" />
</bean> 
```

感谢所有建议使用 PayloadValidatingInterceptor 的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:24:20.750

int 是 Java 中的原语，因此它不能为空。您可以改用整数类型。Integer 可以为空，因此它不会默认为 0。

# c++ - Collat z 序列算法无法正常工作

> ID：15544763
> 
> 赞同：-1
> 
> 时间：2013-03-21T10:20:45.193
> 
> 标签：c++, algorithm

由于某种原因，它总是返回值 1。这样做的目的是找到循环次数最多的起始数字 (1-1,000,000)（直到 j = 1）。**j 最终将始终为 1（collat​​z 理论）**，如果它是偶数，我将 j 除以 2，或者除以 3，如果它是奇数，则加 1。

```
#include <iostream>
using namespace std;

int collatz() {
int counter = 0;
int holder = 0;

for (int i = 999999; i > 1; i--){           // loops 999,999 times
    for (int j = i; j != 1; counter++) {    // loops until j = 1, records amount of loops
        if (j % 2 == 0) {                   // if j is even, divide by 2, +1 to counter
            j = j / 2;
        } else {
            j = (j*3) + 1;                  // if j is odd, multiply by 3 and add 1, +1 to counter
        }
    }
    if (holder < counter){          // records highest number of loops
    holder = counter;
    counter = 0;
    } else {
    counter = 0;
    }

}
    return holder;
}

int main()
{
    cout << collatz << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:22:08.220

您不是在*调用*您的函数，而是在打印出函数指针（它被转换为`bool`值`true`（即`1`））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:35:20.577

首先，使用`unsigned int`or`unsigned long long`作为变量类型`j`来增加运算范围。

然后，在循环中，检查溢出。

```
 while (j!=1) {
    counter++;
    if (j % 2 == 0) {
        j >>= 1;
    } else {
        unsigned int j2 = j;
        j = (j*3) + 1;
        if (j2 > j) {
           return -1;  // or surround this with try/catch/throw exception
        }
   }
 } 
```

随着`int i;`计数器将在 i==113383 处溢出；
并`unsigned int i;`在 159487 处。如果未选中这些，则可能出现无限循环。

# java - 如何让 webdriver 在可点击时立即点击元素，而不是加载整个页面？

> ID：15544764
> 
> 赞同：0
> 
> 时间：2013-03-21T10:20:47.783
> 
> 标签：java, webdriver

“注册为新用户”链接文本出现在主页上，只要 webdriver 得到它（driver.get）。但它仍然等待整个页面加载到下一行执行。

```
driver.findelement(By.linkText("Register as new user")).click(); 
```

无论其他元素是否出现，webdriver 怎么可能一出现在页面上就点击该元素。我正在使用：JAVA、Ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:36:40.110

我不确定隐式等待是否使*驱动程序*等待页面完全加载，尤其是在打开 URL 之后。但值得尝试显式等待。下面的代码使驱动程序等到元素变为可单击然后单击它。如果元素在指定时间（在下面的示例中设置为 30 秒）无法点击，则驱动程序抛出*TimeoutException*。

```
WebDriverWait wait = new WebDriverWait(driver, 30//unit time in seconds);

wait.until(ExpectedConditions.elementToBeClickable(By.linkText("Register as new user"))).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:24:48.477

**您可以更改 FireFoxDriver 配置文件设置，以使 Firefox 在调用.click**后不等待整个页面加载

 **```
 FirefoxProfile profile = new FirefoxProfile();
        profile.SetPreference("webdriver.load.strategy", "unstable"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T19:29:00.533

将 wait.until ... 语句括起来，如下所示：
turnOffImplicitWaits();
wait.until(ExpectedConditions.elementToBeClickable(By.linkText("注册为新用户"))).click();
turnOnImplicitWaits();**

# java - 将当前数据库条目与要插入的新数据同步

> ID：15544765
> 
> 赞同：4
> 
> 时间：2013-03-21T10:20:47.967
> 
> 标签：java, sql, oracle

我必须将我的数据库表中的数据与来自 sql 查询的新数据同步，我需要删除不在新数据中的当前条目并插入不在当前数据中的新条目。我能够使用这个伪代码在java中做到这一点：

```
// 1) get all data in database and store it in list (currentList)
// 2) get new data obtained through sql query and store it in list (newList)
// 3) sync both list

for(entry : currentList) {
    if(newList.contains(entry))
        finalList.add(entry) 
}

for(entry : newList) {
    if(!finalList.contains(entry))
        finalList.add(entry)
}

// 4) delete all data from DB
// 5) insert finalList data to DB 
```

它工作正常，但是，我认为在处理大量数据时它会出现性能问题，因为我正在删除所有内容并重新插入整个列表，而不是仅仅插入新条目并删除在新数据中找不到的条目。

你能建议一个更好的方法吗？是否可以创建一个可以处理数据同步的 sql 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:41:33.597

看看[MERGE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606)。

该构造将允许您指定更新现有记录或添加新记录的条件。

它基本上看起来像：

```
MERGE 
   INTO target_table
   USING source_table
 ON (some condition)
WHEN MATCHED 
     ( UPDATE some_update_statement )
WHEN NOT MATCHED 
     ( INSERT some_insert_statement ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:53:43.610

您还可以在存储过程中执行这些操作，以免不必要地增加数据库流量。

但是，这不适用于大量条目（例如数百万个条目）或每个条目非常大的情况。在这种情况下，请尝试使用 Ryan 上面指出的 MERGE 操作。

考虑以下 PL/SQL 伪代码（您可能希望根据您的用例对其进行更改）：

```
PROCEDURE replace_with_list (newList) AS
BEGIN
  /* Delete all the entries that are not present in the newList (e.g. by ID) */
  /* Insert all the entries that present in newList and not present in your table  */
END; 
```

# delphi - 元文件剪裁矩形

> ID：15544766
> 
> 赞同：1
> 
> 时间：2013-03-21T10:20:49.670
> 
> 标签：delphi, clipping, metafile

以下代码会带来一些麻烦：

```
procedure TForm1.Button1Click(Sender: TObject);
var dc : HDC;
    meta : TMetafile;
    metaCanv : TMetafileCanvas;
    cr : TRect;
    sz : TSize;
begin
     dc := GetDC(0);
     SetWindowExtEx(dc, 4800, 1300, @sz);
     ShowMessage(Format('size %d, %d', [sz.cx, sz.cy]));

     meta := TMetafile.Create;

     meta.SetSize(4500, 1300);

     metaCanv := TMetafileCanvas.Create(meta, dc);
     try
        IntersectClipRect(metaCanv.Handle, 0, 0, 4600, 1300);

        cr := metaCanv.ClipRect;

        with cr do
             ShowMessage(Format('clip rect: %d, %d, %d, %d', [Top, Left, Bottom, Right]));

     finally
            metaCanv.Free;
            meta.Free;
     end;

     DeleteDC(dc);
end; 
```

问题是剪切矩形绑定到显示分辨率，例如，如果您的屏幕有 1920 像素宽度，剪切矩形绑定到此值。

请注意，完全删除剪辑并将线条事件绘制到完整的底部矩形角不是问题。如果设置了剪切区域（例如，示例中显示的完整图元文件宽度/高度）然后绘制线条 -> 将其剪切到屏幕宽度/高度，则会出现问题。

我知道我可以使用例如打印机 dc 作为参考，这基本上可以解决问题，但有一些副作用（例如 gdi+ 使用这种 dc 绘制图元文件根本不起作用）。

任何人都知道如何“欺骗”系统以使这种奇怪的剪辑行为不再存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:15:34.273

`ClipRect`作为唯一可以绘制的部分是错误的假设。

上的文档[`TCustomCanvas.ClipRect`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TCustomCanvas.ClipRect)：

> 使用 ClipRect 确定画布需要绘制的位置。

这很容易通过绘制`ClipRect`并尝试显示已绘制的内容来验证，例如如下：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  MetaFile: TMetafile;
  MetaCanvas: TMetafileCanvas;
begin
  MetaFile := TMetafile.Create;
  try
    MetaCanvas := TMetafileCanvas.Create(MetaFile, 0);
    try
      MetaFile.SetSize(4500, 1300);
      MetaCanvas.LineTo(4500, 1300);
    finally
      MetaCanvas.Free;
    end;
    Canvas.Draw(-4400, -1200, MetaFile);
  finally
    MetaFile.Free;
  end;
end; 
```

![在此处输入图像描述](../Images/0d27ba96c77635c434aa937a9d079269.png)

# mysql - 如何合并 SQL SELECT 字段

> ID：15544768
> 
> 赞同：1
> 
> 时间：2013-03-21T10:21:00.033
> 
> 标签：mysql, sql, select

我有一个带有 ENUM 的 MySQL 表。由于我有时不得不更改此 ENUM，因此我将其转移到另一个表。现在我必须创建一个语句，它将在一个选择字段中为我提供 enum/newTable 的名称。

表1（瓶）：

```
id    | size      | size_id
1     | small     | (NULL)
2     | medium    | (NULL)
3     | big       | (NULL)
4     | (NULL)    | 1
5     | (NULL)    | 2
6     | (NULL)    | 3 
```

表 2 (bottle_size):

```
id    | name
1     | small
2     | medium
3     | big 
```

选择：

```
SELECT id, <dontknow> as size
FROM bottle b
LEFT JOIN bottle_size bz ON b.size_id = bz.id
WHERE size = 'small'; 
```

我怎么能这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:52:05.570

您可以使用[`IFNULL()`](http://dev.mysql.com/doc/refman/5.1/en/control-flow-functions.html#function_ifnull)选择第一个字段（如果不是）`NULL`或第二个字段。因为这会产生一个动态字段（“大小”），所以您需要使用`HAVING`而不是`WHERE`添加一个条件：

```
SELECT b.id, IFNULL(b.size, bz.name) AS size
FROM bottle b
LEFT JOIN bottle_size bz ON b.size_id = bz.id
HAVING size = 'small'; 
```

演示：[http ://sqlfiddle.com/#!2/9e2df/3](http://sqlfiddle.com/#!2/9e2df/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:06:03.453

也可作为子查询 :)

```
SELECT
  b.id,
  ifnull(b.size,
    (SELECT name FROM bottle_size bz WHERE bz.id=b.size_id)
        ) AS size_
FROM bottle b
HAVING size_ = 'small' 
```

（[http://sqlfiddle.com/#!2/9e2df/15](http://sqlfiddle.com/#!2/9e2df/15)）

# php - 将 EPS 转换为具有正确尺寸的 Tif Imagemagick

> ID：15544772
> 
> 赞同：2
> 
> 时间：2013-03-21T10:21:12.100
> 
> 标签：php, imagemagick

我有很多大小可变的 EPS 图像，有些很小，有些很大。当我在 Photoshop 中打开 EPS 图像时，它可以调整到任何更大的尺寸，而不会降低质量。我将 EPS 转换为 TIFF 没有问题，如果源 EPS 图像尺寸更大，我什至没有调整大小的问题，但是在转换小的 EPS 文件时，转换后的 TIFF 看起来并不好。

有没有办法在旅途中调整源 EPS 的大小，以免质量丢失，然后将其转换为 TIFF 文件？这是我得到的代码

```
exec(_IMPath_.$srcimagepath." -colorspace cmyk -compress none -units PixelsPerInch -density 300 -quality 100 ".$cmykpath); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-17T16:54:22.110

光栅化 .eps 文件的分辨率需要在文件名之前才能生效。像这样的东西应该工作......

```
exec(_IMPath_." -density 300 ".$srcimagepath." -colorspace cmyk -compress none -units PixelsPerInch -quality 100 ".$cmykpath); 
```

相当于命令...

```
convert -density 300 filename.eps -colorspace cmyk -compress none -units PixelsPerInch -quality 100 filename.tif 
```

您可能还想添加一个调整大小参数，例如`-resize 4096x4096`

# android - 显示不正确的文件格式

> ID：15544773
> 
> 赞同：1
> 
> 时间：2013-03-21T10:21:13.707
> 
> 标签：android

通过使用上面的代码，我能够生成 mp3 文件，但是当我尝试验证其格式时，它显示的不是 mp3

```
mr = new MediaRecorder();
mr.setAudioSource(MediaRecorder.AudioSource.VOICE_DOWNLINK);
mr.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); 
mr.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mr.setOutputFile(Environment.getExternalStorageDirectory()+File.separator+"aa1.mp3");` 
```

如何在android中生成有效的mp3

# mysql - Sql 查询显示不正确的数据

> ID：15544775
> 
> 赞同：2
> 
> 时间：2013-03-21T10:21:14.573
> 
> 标签：mysql, sql

嗨，我有以下数据库架构

```
employee (employee-name, street, city)
works (employee-name, company-name, salary)
company (company-name, city)
manages (employee-name, manager-name) 
```

我需要执行以下操作，但根据我的培训师的说法，他们是错误的。

假设这些公司可能位于几个城市。查找位于 Small Bank Corporation 所在城市的所有公司。

```
SELECT company-name, city
FROM company
UNION ALL
SELECT company-name, city
FROM company
WHERE company-name = ‘Small Bank Corporation’ 
```

找出所有收入超过公司所有员工平均工资的员工。

```
SELECT employee-name
FROM works
WHERE salary > ( SELECT AVG(w1.salary) 
FROM works w1
INNER JOIN works w2
ON w1.company-name = w2.company-name) 
```

找到员工最多的公司。

```
SELECT company-name
FROM works
GROUP BY company-name
HAVING count(*) = ( SELECT count(*)
FROM works
GROUP BY company-name
ORDER BY count(*) DESC
LIMIT 1) 
```

找到工资最少的公司。

```
SELECT company-name
FROM works
GROUP BY company-name
HAVING count(*) < ( SELECT count(*)
FROM works
GROUP BY company-name
ORDER BY count(*) DESC
LIMIT 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:41:26.953

假设这些公司可能位于几个城市。查找位于 Small Bank Corporation 所在城市的所有公司。

```
 SELECT company-name,city FROM company 
    WHERE city IN(SELECT city  FROM company 
WHERE company-name='Small Bank Corporation'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T06:30:06.293

对于一个单一的答案，这需要解决很多问题，因此我将列出您在第一个示例中出错的地方，如何解决它，以及如何在其余示例中使用该策略。您可能希望在 Stack Overflow 上将剩余的问题拆分为新问题。从上周给出的答案可以看出，人们不愿意回答整个请求。

所以，问题：

> 假设这些公司可能位于几个城市。查找位于 Small Bank Corporation 所在城市的所有公司。

**第 1 步：正确阅读提示**

当我说这通常是解决这类问题中最难的部分时，我是完全真诚地说的。语言并不总是像我们希望的那样具体，不同的人可以用多种方式解释同一个句子。如果提示中有任何歧义，请务必与您的讲师沟通，并要求他们澄清您需要编写查询的内容。

**第 2 步：检查出了什么问题**

所以你写的查询并不能解决被问到的问题。为什么不？我们可以通过弄清楚您的查询*到底做了什么来开始回答这个问题。*我们可以先把它分成几部分：

```
SELECT company-name, city
FROM company 
```

上面的代码将从名为“company”的表中的每一行中获取公司名称和城市。

```
SELECT company-name, city
FROM company
WHERE company-name = ‘Small Bank Corporation’ 
```

上面的代码将从名为 company 的表中的每一行中获取公司名称和城市，其中公司名称为“Small Bank Corporation”。

```
UNION ALL 
```

上面的行将创建它之前和之后的选择的联合。因此，您创建了表中所有行的并集，以及公司名称为“Small Bank Corporation”的所有行。这不仅没有解决上面给出的查询，而且还为我们提供了我们没有要求的额外的冗余行。我们可以创建一个模型表`company`来准确演示它的作用。

```
company-name            |  city
--------------------------------
Small Bank Corporation  |   A
Silly Bank Corporation  |   B
Large Bank Corporation  |   C 
```

在此示例中，我们可以看到 Small Bank Corporation 是 A 市唯一的公司。因此，当我们使用 WHERE 语句指定它时，它将是唯一返回的行。所以当我们合并结果时，我们应该得到如下结果。

```
company-name            |  city
--------------------------------
Small Bank Corporation  |   A
Silly Bank Corporation  |   B
Large Bank Corporation  |   C
Small Bank Corporation  |   A 
```

这真的没有帮助。那么我们该如何解决这个问题呢？

**第 3 步：了解问题**

提示要求查找位于Small Bank Corporation 所在*城市的所有公司。*我对该声明的解释是，在存在 Small Bank Corporation 的每个城市中，我们都想要镇上每家银行的名单。我们的最终结果将是 Small Bank Corporation 所在的每个城镇的所有银行的列表。例如，如果银行想要查看其竞争对手的完整列表，他们可能需要此信息。

**第 4 步：修订**

现在我们可以开始朝着正确的查询方向努力了。您知道要选择哪些变量，因此我们不需要更改第一行。编写查询的方法有很多，因此为了增加您对 SQL 的了解，我将提供现有答案的替代方法。

```
SELECT A.company_name
FROM company A, company B 
WHERE A.city = B.city AND B.company_name = 'Small Bank Corporation'
GROUP BY company_name; 
```

请允许我分解这里发生的事情：

*   创建了一个作为公司和公司的叉积的表。（A公司×B公司）
*   从该表中，我们想要投影城市 A 和城市 B 相同且公司 B 是小型银行公司的所有行。
*   从该投影中，我们要选择公司名称。
*   使用 group by 去除多余的公司名称（这个问题可以存在多行同一个公司名称，因为同一个公司可以存在于不同的城市）。

尝试使用我提供的步骤来解决您的其余提示，如果您仍然遇到困难，请随时在此处提出更具体的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:29:44.180

找出所有收入超过公司所有员工平均工资的员工。

```
SELECT employee-name
FROM works
WHERE salary > ( SELECT AVG(salary) 
FROM works ) 
```

找到员工最多的公司。

```
select company-name from works group by company-name having count(*) 
= (select max(count(*)) from works group by company-name); 
```

# android - 带有 tabhost 的页面指示器

> ID：15544778
> 
> 赞同：2
> 
> 时间：2013-03-21T10:21:18.313
> 
> 标签：android, android-tabhost

嗨，我想创建一个带有标签主机的页面指示器。不只是单击标签图标滑动页面标签也必须更改如何做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:27:53.813

如果您想使用选项卡，请参阅此基本教程并启动它。希望您会有所了解。 [http://wptrafficanalyzer.in/blog/adding-navigation-tabs- contains-listview-to-action-bar-in-android/](http://wptrafficanalyzer.in/blog/adding-navigation-tabs-containing-listview-to-action-bar-in-android/)

使用 Jake Wharton 的视图寻呼机指示器库。[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)用于滑动。

# python - 无法并行调用 concurrent.futures 作业

> ID：15544780
> 
> 赞同：0
> 
> 时间：2013-03-21T10:21:25.800
> 
> 标签：python

我的代码如下。

```
executor = concurrent.futures.ThreadPoolExecutor(max_workers=4)

for cj in self.parent_job.child_jobs:
    executor.map(cj.runCommand()) 
```

def runCommand(self): os.system(self.cmd_line) verifyOutputFiles() ...

需要为所有 child_jobs 并行执行 runCommand。一次也只能将一个 child_job 传递给 runCommand。

但是 runCommand 一次只被调用一次。但我需要同时为所有子作业调用它。任何帮助实现这一目标表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:23:55.003

查看`executor.map`API：[http](http://docs.python.org/dev/library/concurrent.futures.html#concurrent.futures.Executor.map) ://docs.python.org/dev/library/concurrent.futures.html#concurrent.futures.Executor.map 您通过调用函数并将其结果传递给犯了错误`map`；）这就是您的代码运行的原因一次。

您需要创建单独的函数，该函数将在您的方法的对象上调用，`runCommand`因为您不能将`lambda x: x.runCommand()`（通常为 lambda）作为参数传递给`executor.map`.

```
def runCommand(cj):
    return cj.runCommand()

l = executor.map(runCommand, self.parent_job.child_jobs) 
```

要等到所有任务完成，您必须评估 generator `l`。所以你可以做`w = list(l)`并将`w`包含结果

# google-chrome - Chrome时间线标签说明

> ID：15544782
> 
> 赞同：1
> 
> 时间：2013-03-21T10:21:30.683
> 
> 标签：google-chrome, google-chrome-devtools

[这里的](https://developers.google.com/chrome-developer-tools/docs/timeline)文档说：

> 请注意，第一个事件 Send Request (Calendar.html) 显示有一个由
> 三种蓝色阴影组成的条形图。最暗的一个标记事件本身所花费的时间，下一个对应于该事件以及所有嵌套事件所
> 花费的 CPU 时间（这里，它包括接收响应、接收数据等），最浅的条
> 表示在第一个事件开始和最后一个事件结束之间的墙上时间。

究竟是什么意思`the start of the first event and the end of the last event`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:49:26.750

只需展开*“Send Request (Calendar.html)”*事件，您就会明白这意味着什么：-) 该`Send Request`事件将具有关联的异步子事件，其中最后一个通常是`Finish Loading`. 因此，您发送请求（“发送请求”）和接收其所有数据（“完成加载”）之间的总时间，即“挂钟”时间，由最浅的条显示。

相反，第二个浅色条仅显示事件及其所有子事件的总时间（想象将事件的最暗条和所有子事件的最暗条堆叠在一起）。

# matlab - matlab中的间歇循环

> ID：15544785
> 
> 赞同：0
> 
> 时间：2013-03-21T10:21:38.753
> 
> 标签：matlab, matrix, simulation

你好再次合乎逻辑的朋友！我知道这是一个相当复杂的问题，所以请多多包涵！我想我已经设法把它归结为两个细节： - 我需要两个我似乎无法工作的循环......首先；变量rollers(1).ink 是一个包含墨水值的(12x1) 向量。该程序在每个连接处的辊子之间平均分配墨水。我试图让rollers(1).ink 仅在特定时间步与rollers(2) 交互。每整转一次，墨水应转移到系统中，即 nTimesSteps = nBins_max 的每个倍数。当系统旋转时，墨水不应转移回滚轮 (1).ink - 每转一次，它应该只将墨水引入系统一次，而不会带回任何墨水。目前我已经设置了 rollings(1).ink = one 但仅用于测试。我真的被困在这里了！第二; 它需要这样做的原因是因为在模拟结束时我还希望以打印图像的形式去除墨水。图像应该是我系统中最后一个滚筒上墨水的反射，并且该值的一半应该从最后一个滚筒中移除，并在每次旋转时从系统中取出。最后一个滚筒上剩余的墨水应回收并在系统中“重新分离”，为下一次旋转做好准备。所以……我认为它是在循环开始的第 86 行，我需要做所有这些事情。在伪中，对于间歇性的馈送，我一直在尝试类似的东西：最后一个滚筒上剩余的墨水应回收并在系统中“重新分离”，为下一次旋转做好准备。所以……我认为它是在循环开始的第 86 行，我需要做所有这些事情。在伪中，对于间歇性的馈送，我一直在尝试类似的东西：最后一个滚筒上剩余的墨水应回收并在系统中“重新分离”，为下一次旋转做好准备。所以……我认为它是在循环开始的第 86 行，我需要做所有这些事情。在伪中，对于间歇性的馈送，我一直在尝试类似的东西：

```
For k = 1:nTimeSteps
While nTimesSteps = mod(nTimeSteps, nBins_max) == 0 % This should only output when nTimeSteps is a whole multiple of nBins_max i.e. one full revolution
‘Give me the ink on each segment at each time step in a matrix’
End 
```

averageAmountOfInk 的输出是我想要返回此数据的确切格式，除了我真的不需要平均值，只需要每个时刻的实际值。当我尝试使用以下方法重新创建它时，我不断收到尺寸不匹配的错误：

```
For m = 1:nTimeSteps
    For n = 1:N
Rollers(m,n) = rollers(n).ink’;
    End
End 
```

如果有人有兴趣了解它目前的功能，我将在下面发布完整的代码。最后还有一个功能，当然需要将其保存到单独的文件中。我已经多次发布了这个问题的变体，但我完全意识到这是一个相当棘手的问题，而且我发现很难通过互联网传达我的意图！如果有人对我缺乏编程技能有任何想法/建议/一般侮辱，请随时回复！

```
%% Simple roller train
% # Single forme roller
% # Ink film thickness = 1 micron

clc
clear all
clf
% # Initial state
C = [0,70;   % # Roller centres (x, y)
     10,70;
     21,61;
     11,48;
     21,34;
     27,16;
     0,0
     ];
R = [5.6,4.42,9.8,6.65,10.59,8.4,23];    % # Roller radii (r)
% # Direction of rotation (clockwise = -1, anticlockwise = 1)
rotDir = [1,-1,1,-1,1,-1,1]';
 N = numel(R);           % # Amount of rollers

% # Find connected rollers
isconn = @(m, n)(sum(([1, -1] * C([m, n], :)).^2)...
    -sum(R([m, n])).^2 < eps);
[Y, X] = meshgrid(1:N, 1:N);
conn = reshape(arrayfun(isconn, X(:), Y(:)), N, N) - eye(N);

% # Number of bins for biggest roller
nBins_max = 50;
nBins = round(nBins_max*R/max(R))';

% # Initialize roller struct
rollers = struct('position',{}','ink',{}','connections',{}',...
    'rotDirection',{}');

% # Initialise matrices for roller properties
for ii = 1:N
    rollers(ii).ink = zeros(1,nBins(ii));
    rollers(ii).rotDirection = rotDir(ii);
    rollers(ii).connections = zeros(1,nBins(ii));
    rollers(ii).position = 1:nBins(ii);
end

for ii = 1:N
    for jj = 1:N
        if(ii~=jj)
            if(conn(ii,jj) == 1)
               connInd = getConnectionIndex(C,ii,jj,nBins(ii));
               rollers(ii).connections(connInd) = jj;
            end
        end
    end
end

% # Initialize averageAmountOfInk and calculate initial distribution
nTimeSteps = 1*nBins_max;
averageAmountOfInk = zeros(nTimeSteps,N);
inkPerSeg = zeros(nTimeSteps,N);
for ii = 1:N
    averageAmountOfInk(1,ii) = mean(rollers(ii).ink);
end

% # Iterate through timesteps
for tt = 1:nTimeSteps
        rollers(1).ink = ones(1,nBins(1));

        % # Rotate all rollers
    for ii = 1:N
                rollers(ii).ink(:) = ...
                circshift(rollers(ii).ink(:),rollers(ii).rotDirection);
    end

% # Update all roller-connections
for ii = 1:N
    for jj = 1:nBins(ii)
        if(rollers(ii).connections(jj) ~= 0)
            index1 = rollers(ii).connections(jj);
            index2 = find(ii == rollers(index1).connections);
            ink1 = rollers(ii).ink(jj);
            ink2 = rollers(index1).ink(index2);
            rollers(ii).ink(jj) = (ink1+ink2)/2;
            rollers(index1).ink(index2) = (ink1+ink2)/2;
        end
     end
end

% # Calculate average amount of ink on each roller
    for ii = 1:N
        averageAmountOfInk(tt,ii) = sum(rollers(ii).ink);
    end
end

    image(5:20) = (rollers(7).ink(5:20))./2;
    inkPerSeg1 = [rollers(1).ink]';
    inkPerSeg2 = [rollers(2).ink]';
    inkPerSeg3 = [rollers(3).ink]';
    inkPerSeg4 = [rollers(4).ink]';
    inkPerSeg5 = [rollers(5).ink]';
    inkPerSeg6 = [rollers(6).ink]';
    inkPerSeg7 = [rollers(7).ink]'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T22:50:18.990

这是一个扩展评论，而不是一个正确的答案，但评论框有点太小了......

你的代码让我不知所措，我只见树木不见森林。我建议你消除所有我们不需要看到的东西来帮助你解决你的直接问题（例如所有那些画线图）——我认为它会帮助你自己调试你的代码，把所有的东西放进去函数或脚本。

你的代码片段

```
For k = 1:nTimeSteps
    While nTimesSteps = mod(nTimeSteps, nBins_max) == 0 
    ‘Give me the ink on each segment at each time step in a matrix’
End 
```

可能是（我不太明白你对`while`语句的使用，这个词`While`不是 Matlab 关键字，并且正如你所写的那样，语句返回的值不会随着迭代而改变）相当于

```
For k = 1:nBins_max:nTimeSteps
    ‘Give me the ink on each segment at each time step in a matrix’
End 
```

您似乎错过了 Matlab 冒号运算符的一个基本功能......

```
1:8 = [1 2 3 4 5 6 7 8] 
```

但

```
1:2:8 = [1 3 5 7] 
```

也就是说，三元组中的第二个数字是连续元素之间的步幅。

您的矩阵在连接滚轮`conn`的位置为 1，在其他位置为 0。您可以像这样找到所有 s`(row,col)`的行和列索引：`1`

```
[ri,ci] = find(conn==1) 
```

然后，您可以在没有循环嵌套和 if 语句开始的情况下获取 s的`(row,col)`位置`1`

```
for ii = 1:N
    for jj = 1:N
        if(ii~=jj)
            if(conn(ii,jj) == 1) 
```

我可以继续，但不会，这足以发表一条评论。

# xml - 如何在远程服务器上使用 XSL 呈现本地 XML

> ID：15544786
> 
> 赞同：3
> 
> 时间：2013-03-21T10:21:41.277
> 
> 标签：xml, internet-explorer, xslt

在我的应用程序中，我使用 XSLT 来呈现 XML 文件。

当客户端有 xsl 文件时，这可以正常工作：

```
<?xml-stylesheet type="text/xsl" href="..\XSL\test.xsl"?> 
```

但是当我尝试在我的服务器上的 XML 文件中使用 xsl 文件时，例如：

```
<?xml-stylesheet type="text/xsl" href="http://www.mysite.com/xsl/test.xsl"?> 
```

这是行不通的。这似乎是一种安全限制，但有没有办法在远程服务器上使用远程 XSL 呈现本地 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T15:35:58.137

在 IE11 中，仍然有一个解决方法。您应该转到“Internet 选项 -> 安全 -> 本地 Internet -> 自定义级别 -> 杂项 -> 跨域访问数据源”并将其设置为“启用”或“提示”（建议使用最后一个选项，以便您仍然拥有对此进行一些控制）。这将启用通过远程 xsl 加载/处理本地 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:46:39.857

The "security restriction" you're seeing is called [same origin policy](https://en.wikipedia.org/wiki/Same_origin_policy). This means that your XSLT stylesheets must come from the same server your XML was loaded from.

If your XML comes from a server with scripting ability like PHP or so you can circumvent this by creating a proxy script. This script will essentially load the remote XSL file and make it appear to be a local one:

```
<?php
header('Content-type: text/xsl');
echo file_get_contents('http://www.mysite.com/xsl/test.xsl');
?> 
```

# unity3d - Unity3D 振动和断断续续的滚动（与现场演示 + WebGL 相比）

> ID：15544787
> 
> 赞同：0
> 
> 时间：2013-03-21T10:21:48.340
> 
> 标签：unity3d, xna, game-engine, direct3d, unity-webgl

我或我的显示器或 GPU 一定有问题。其他人也患有这种现象，请参阅链接。

现在我想强调这个问题是存在的，乐观的我认为有一些解决方案。也许它只在特殊情况下才明显，绝对不是性能（或 GC）问题。如果它在所有情况下都能引起注意，Unity3D 将毫无用处......我使用这个更广泛的论坛来指定这个问题的目标是我希望更广泛的社区可能有更广泛的范围来搜索问题的根源。我认为这与算法或时间类的使用无关。也许 Time.deltaTime 本身在某些情况下存在错误或误导。

只是一个反馈，如果任何人都可以重现振动效果，则可能具有诊断价值。（好像在水平振荡，左右边缘很模糊。）

Marrt 为 Unity 创建了一个 web demo 来演示效果： [http ://marrt.elementfx.com/SmoothMovementTest.html](http://marrt.elementfx.com/SmoothMovementTest.html)

无论我做什么这个演示都是*如此*振动+波涛汹涌。注意：我在编辑器或独立桌面上运行的所有我自己创建的简单滚动项目也都展示了*相同*的内容，因此它与“如何使用 Time.deltaTime”无关

我认为问题出在我的硬件上，直到今天我看到了这个 WebGL 演示（使用 Chrome）：

[http://webglsamples.googlecode.com/hg/aquarium/aquarium.html](http://webglsamples.googlecode.com/hg/aquarium/aquarium.html)

它是如此平滑（任何鱼的运动，还有旋转和光衰）我的意思是*平滑*。为什么我不能用 Unity 生产（没有人生产）这个（至少在我的机器上）？

如果有人感兴趣，这里有一个确切的问题描述，但并不是所有的答案都能解决问题。

问题详情：

[http://answers.unity3d.com/questions/275016/updatefixedupdate-motion-stutter-not-another-novic.html](http://answers.unity3d.com/questions/275016/updatefixedupdate-motion-stutter-not-another-novic.html)

我尝试了所有的东西，包括编程变化 + 质量设置（VSync 等） 我非常简单的自创项目正在运行 1000 - 2000 fps 并且仍然在振动 + 断断续续。

我花了 2 天的时间来摆脱这种糟糕的视觉体验。是否完成了链接线程中提到的所有编程内容+尝试配置我的视频卡（顺便说一句 Radeon 6770 with 1Gigs）

有什么想法吗？

# enthought - Pandas 是否包含在 EPD Free 中

> ID：15544796
> 
> 赞同：0
> 
> 时间：2013-03-21T10:22:16.553
> 
> 标签：enthought

enthought 网站说 pandas 已包含在内，但我已经在 Windows 和 Linux 上都安装了，并且执行“import pandas”会给出“ImportError：未找到名为 pandas 的模块”。EPD Free 7.3 中是否包含 pandas？

更新 ：

好吧，我想我被 EPD 免费下载页面稍微误导了，该页面说 EPD 包括熊猫，但如果你去详细的库列表，熊猫不包括在内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:03:50.777

EPD Free 7.3 安装程序未随 Pandas 提供，因此出现导入错误。但是，如果您已注册 EPD Free 帐户，则可以`enpkg`使用`pandas`. 查看此[支持页面](https://support.enthought.com/entries/22415022-Using-enpkg-to-update-EPD-packages)以获取更多信息。

# machine-learning - 将 Weka 分类器转换为分数

> ID：15544805
> 
> 赞同：1
> 
> 时间：2013-03-21T10:22:39.360
> 
> 标签：machine-learning, classification, weka

我正在尝试将我的分类器结果转换为将实例分类为 0 或 1，而不是给出一个分数（置信度度量？），比如在 0 到 10 之间，我使用的是 RIDOR 分类器，但也可以使用 ClassificationViaRegression、RandomForest 或 AttributeSelectedClassifier很容易，尽管它们也不能很好地分类。

我已将所有可能的内容输出到终端（检查了所有选项），但我在预测中的任何地方都找不到置信度度量。另外我知道这些都没有输出源代码的选项？在这种情况下，我将不得不手动编码分类器。

以下是生成的规则示例：

```
 class = 2  (40536.0/20268.0)
       Except (fog <= 14.115114) and (polySyllabicWords/Sentence <= 1.973684) and (polySyllabicWords/Sentence <= 1.245) and (Characters/Word > 4.331715) => class = 1  (2309.0/5.0) [1137.0/4.0]
       Except (fog <= 14.115598) and (polySyllabicWords/Sentence <= 1.973684) and (polySyllabicWords/Sentence > 1.514706) => class = 1  (2281.0/0.0) [1112.0/0.0]
       Except (fog <= 14.136126) and (Words/Sentence > 19.651515) and (polySyllableCount <= 10.5) and (polySyllabicWords/Sentence > 2.416667) and (Syllables/Sentence <= 34.875) => class = 1  (601.0/0.0) [303.0/6.0]
       Except (fog <= 14.140863) and (polySyllabicWords/Sentence <= 1.944444) and (polySyllableCount <= 4.5) and (polySyllabicWords/Sentence <= 1.416667) and (wordCount > 29.5) and (Characters/Word <= 4.83156) => class = 1  (333.0/0.0) [152.0/0.0]
       Except (fog <= 14.142217) and (polySyllabicWords/Sentence <= 1.944444) and (polySyllableCount <= 4.5) and (polySyllabicWords/Sentence <= 1.416667) and (numOfChars > 30.5) and (Syllables/Word <= 1.474937) => class = 1  (322.0/0.0) [174.0/4.0]
       Except (fog <= 14.140863) and (polySyllabicWords/Sentence <= 1.75) and (polySyllableCount <= 4.5) => class = 1  (580.0/28.0) [298.0/21.0]
       Except (fog <= 14.141508) and (Syllables/Sentence > 25.585714) and (Words/Sentence > 19.683333) and (sentenceCount <= 4.5) and (polySyllabicWords/Sentence <= 2.291667) and (fog > 12.269468) => class = 1  (434.0/0.0) [202.0/0.0]
       Except (fog <= 14.140863) and (Syllables/Sentence > 25.866071) and (polySyllableCount <= 16.5) and (fog > 12.793102) and (polySyllabicWords/Sentence <= 2.9) and (wordCount <= 59.5) and (Words/Sentence > 16.166667) and (Words/Sentence <= 24.75) => class = 1  (291.0/0.0) [166.0/0.0]
       Except (fog <= 14.140863) and (Syllables/Sentence > 25.585714) and (Words/Sentence > 19.630682) and (polySyllabicWords/Sentence > 2.656863) and (polySyllableCount <= 16.5) and (fog > 13.560337) and (Words/Sentence <= 21.55) and (numOfChars <= 523) => class = 1  (209.0/0.0) [93.0/2.0]
       Except (fog <= 14.147578) and (Syllables/Word <= 1.649029) and (polySyllabicWords/Sentence <= 1.75) and (polySyllabicWords/Sentence > 1.303846) and (polySyllabicWords/Sentence <= 1.422619) and (fog > 9.327132) => class = 1  (183.0/0.0) [64.0/0.0]...... 
```

我也不确定第一行是什么意思 (40536/20368) - 这只是意味着将其归类为 2，除非以下规则之一适用？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:24:01.763

一般来说，从分类器中获得置信度并不是一件容易的事，尤其是如果您希望对其进行校准（例如，作为分类正确的机会呈现）。然而，有几种相对简单的方法可以得到粗略的估计。

对于基于树和规则的分类器，括号中的数字表示存储桶中包含的正确/错误样本的数量。因此，例如，具有 (20,2) 的存储桶意味着有 20 个案例该规则是正确的，而 2 个案例是不正确的，基于训练数据。您可以将此比率用作信心的粗略衡量标准。

使用回归时，您可以让 WEKA 输出分类器（而不仅仅是类）的实际数值结果，并以此为基础衡量置信度。

更一般地，按照文档，您可以使用命令行的 -p 选项（请参阅[此处](https://stackoverflow.com/questions/15487247/the-confidence-level-of-each-specific-instance-in-weka/15494272#15494272)）。但是，我不确定这些数字是如何计算的。

# jquery - HTML，如果下拉菜单只有一个值，则显示标签

> ID：15544806
> 
> 赞同：0
> 
> 时间：2013-03-21T10:22:40.573
> 
> 标签：jquery, html, smarty, option, html-select

我正在通过脚本（Smarty）动态生成下拉列表。

如果下拉菜单只有一个选项值，是否可以将其显示为标签。

这将显示一个包含 3 个值的下拉列表。

```
<select>
    <option> 1 </option>
    <option> 2 </option>
    <option> 3 </option>
</select> 
```

如果它只显示一个值然后将其显示为标签，是否可以使用纯 HTML 或 Jquery 或两者的组合？我可以使用 smarty 来检查值并抛出不同的 html，但这会使我的代码只要我有很多下拉菜单。

```
<select>
    <option> 1 </option>
</select> 
```

任何简单的逻辑，我可能会遗漏吗？

**更新（已解决）**

感谢所有帮助的stackoverflow'ers。我使用了@ahren 提供的代码，它按要求工作。

但是我已经扩展了代码以将一个标签的属性复制到另一个标签，以防有人正在寻找

```
// To replace a <select>, with <label> tag if it has just one value
$('select').each(function(){
    if($(this).find('option').length === 1){

        // Copy all attributes from a given tag and save it in a variable.
        var attributes_from = $(this).prop("attributes");
        var attributes_to = '';
        $.each(attributes_from, function() {
            attributes_to += ' '+this.name+'="'+this.value+'"';
        });

        // If select then copy its value from option.
        attributes_to += ' value="'+$(this).find('option').attr('value')+'"';

        // Replace the <tag>
        $(this).replaceWith(function(){
            return $('<label '+attributes_to+' />').html($(this).text());
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:27:32.267

```
$('select').each(function(){
  if($(this).find('option').length === 1){
    $(this).replaceWith(function(){
       return $('<label />').html($(this).text());
    });
  }
}); 
```

生成下拉列表后，您只需运行此代码段即可检查每个`select`元素。

演示：http: [//jsfiddle.net/kqunE/](http://jsfiddle.net/kqunE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:29:08.993

我会遍历每个`<select>`元素，检查它们拥有的选项数量，并相应地进行所需的 DOM 更改：

```
$('select').each(function(index, select) {
    var numOptions = $('option', this).length;
    if(numOptions === 1) {
        // replace the select element here - something like the below
        var label = $('<label>').html(this.value);
        $(this).after(label).hide();
    }
}); 
```

我选择隐藏而不是替换`<select>`元素，因此您仍然可以将值作为表单的一部分发回。如果这不是必需的，那么您可以完全删除该元素`.remove()`，而不是`.hide()`.

# android - 滚动视图不滚动

> ID：15544807
> 
> 赞同：0
> 
> 时间：2013-03-21T10:22:40.803
> 
> 标签：android, layout, scroll, scrollview

我将图像视图添加到线性布局，然后将该线性布局添加到滚动视图。我正在使用窗口管理器显示滚动视图，因为这一切都发生在服务中。我可以看到滚动条，当我上下拖动时，滚动条会移动，但图像视图不会。

这是我的代码：

```
// define the two views
    scroll = new ScrollView(this);
    trayAppList = new LinearLayout(this);

//define basic layout properties
trayAppList.setOrientation(LinearLayout.VERTICAL);
        width = 50;
        height = display.getHeight();

        // shortcut list container
        lstParams = new WindowManager.LayoutParams(WindowManager.LayoutParams.WRAP_CONTENT, WindowManager.LayoutParams.FILL_PARENT, WindowManager.LayoutParams.TYPE_SYSTEM_ALERT, WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN, PixelFormat.TRANSLUCENT);
        lstParams.gravity = dockLocation;
        scroll.setLayoutParams(new android.view.ViewGroup.LayoutParams(WindowManager.LayoutParams.WRAP_CONTENT, height));

//define window manager
WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);

//now display views

    scroll.setScrollContainer(true);
scroll.addView(trayAppList);
wm.addView(scroll, lstParams); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-11T08:00:13.287

将滚动布局放在线性布局内。

info_content_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent">

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <LinearLayout
            android:id="@+id/list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

代码

```
LinearLayout container = (LinearLayout) LayoutInflater.from(getApplicationContext()).inflate(R.layout.info_content_layout, null);
WindowManager.LayoutParams containerParams = new WindowManager.LayoutParams(WindowManager.LayoutParams.MATCH_PARENT,WindowManager.LayoutParams.WRAP_CONTENT,WindowManager.LayoutParams.TYPE_PHONE,WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,PixelFormat.TRANSLUCENT);
WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
wm.addView(container, containerParams); 

LinearLayout listContainer = (LinearLayout) container.findViewById(R.id.list);
for(int x = 0 ; x <30 ; x++){
    View child =  LayoutInflater.from(this).inflate(R.layout.list_item, null);
    listContainer.addView(child);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:28:07.573

您可以尝试如下：

```
ScrollView scroll = new ScrollView(context);
scroll.setBackgroundColor(android.R.color.transparent);
scroll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
scroll.addView(yourTableView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:31:26.303

您有一个固定高度的 trayAppList 线性布局以及“滚动”ScrollView。所以 ScrollView 不能滚动。

使您的 ScrollView FILL_PARENT 并确保滚动布局中的内容超出屏幕，然后您将能够滚动。

# c# - blittable 类型上的非 blittable 错误

> ID：15544818
> 
> 赞同：13
> 
> 时间：2013-03-21T10:23:07.407
> 
> 标签：c#, .net, struct, garbage-collection, marshalling

我有这个结构和这个代码：

```
[StructLayout(LayoutKind.Sequential, Pack = 8)]
private class xvid_image_t
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    public int[] stride;

    // [MarshalAs(UnmanagedType.ByValArray, SizeConst = 4)]
    // public IntPtr[] plane;
}

public int decore()
{
    xvid_image_t myStruct = new xvid_image_t();
    myStruct.stride = new int[4]; // can be commented out - same result
    GCHandle.Alloc(myStruct, GCHandleType.Pinned);

    // ...
} 
```

当我尝试运行它时，我得到一个`ArgumentException`说法：

> 对象包含非原始或非 blittable 数据

读完[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)后说

> 以下复杂类型也是 blittable 类型：
> 
> *   blittable 类型的一维数组，例如整数数组。但是，包含可变数组的 blittable 类型本身不是 blittable。
>     
>     
> *   仅包含 blittable 类型的格式化值类型（和类，如果它们被编组为格式化类型）。有关格式化值类型的更多信息，请参阅值类型的默认封送处理。

我不明白我做错了什么。我不仅想使用`Marshal`，而且也想理解这一点。

所以我真正想知道的是：

1.  为什么？
2.  我该如何解决这个问题？
3.  您提供的解决方案是否也适用于结构中的注释行？

我正在使用 .Net 4.5，但也需要 .Net 2.0 的解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T14:15:37.360

> 对象包含非原始或非 blittable 数据

那是您收到的异常消息。您正在关注消息的“不可blittable”部分，但这不是问题。问题在于“非原始”部分。数组是一种非原始数据类型。

CLR 试图让您远离这里的麻烦。您可以固定对象，但*仍然*有问题，数组不会被固定。当一个对象也有需要固定的字段时，它并没有真正固定。

UnmanagedType.ByValArray 存在更大的问题，需要进行结构转换。换句话说，您需要的布局与托管类对象的布局完全不同。只有 pinvoke marshaller 可以进行这种转换。

*通过使用固定大小的缓冲区，使用固定*关键字，您可以在不使用 pinvoke 编组器的情况下获得所需的内容。这需要使用*unsafe*关键字。让它看起来像这样：

```
 [StructLayout(LayoutKind.Sequential)]
    unsafe private struct xvid_image_t {
        public fixed int stride[4];
    } 
```

请注意，您必须将声明更改为*结构*类型。它现在是一种值类型，当您将其设为局部变量时，您不再需要使用 GCHandle 来固定该值。请确保无论通常通过引用获取结构值的非托管代码都*不会*存储指向该结构的指针。这将严重且完全无法诊断。*unsafe*关键字在这里是合适的。如果它确实存储了指针，那么您确实必须对项目符号进行字节处理并使用 Marshal.AllocHGlobal() 和 Marshal.StructureToPtr() 来确保指针在非托管代码使用它时保持有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T14:50:50.010

.NET 的一个令人讨厌的限制是它唯一识别的数组式事物是独立`System.Array`对象和 a `System.String`，它们都是引用类型。用 C# 编写的代码可以使用`fixed`数组（如 Hans Passant 所述），但 .NET 本身无法识别这种类型，并且使用固定数组的代码无法验证。此外，固定数组仅限于保存原语，并且不能被其他语言（如 vb.net）访问。

使用固定数组的两种替代方法是

*   用一些字段组合替换固定数组，这些字段组合在一起总大小合适（在大多数情况下使用 N 个变量，但可能用 a 替换例如 a `char[4]`，`UInt32`或者用 a`char[8]`替换 a `UInt64`）。如果数组不是太大，可以定义（通过剪切/粘贴或反射）一组静态方法，这些方法通过 ref 获取结构并读/写正确的元素，然后创建一个委托数组来调用这些方法.

*   用数组替换整个结构，然后将该数组的第一个元素作为`ref`参数传递。这可能比在结构中使用数组更“危险” `fixed`，但这是我在 vb.net 中知道的唯一方法，可以使用包含真正需要访问的内容的结构来获得“pass-by-ref”语义作为一个数组。

虽然我可以理解值类型数组可能被认为是“令人困惑的”（特别是如果它们被自动装箱），但从允许传递的角度来看，它们在某些地方可能是数组存储的语义正确方法COM 互操作的 by-ref 语义以及从应该返回少量值的方法的角度来看。例如，在 中`System.Drawing2d`，有一个方法将当前图形变换作为`float[6]`; 除了通过实验之外，没有明确的方法可以知道返回后对该数组的更改是否会影响、可能影响或保证不会影响其他任何东西。如果该方法返回一个值类型数组，很明显对返回数组的更改不会影响其他任何东西。尽管如此，无论值类型数组是否会成为框架的有用部分，事实仍然是，无论出于好的原因还是坏的原因，都不存在这样的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T15:18:58.840

我从这个链接中得到了以下答案（[这里](https://social.msdn.microsoft.com/Forums/en-US/12943a69-3ed0-4806-809d-8ca15e744f52/-object-contains-nonprimitive-or-nonblittable-data-error?forum=csharplanguage)）

```
SItuLongEmailMsg msg = newSItuLongEmailMsg();
// set members
msg.text = new byte[2048];
// assign to msg.text
int msgSize = Marshal.SizeOf(msg);
IntPtr ptr = Marshal.AllocHGlobal(msgSize);
Marshal.StructureToPtr(msg, ptr, true);
byte[] dataOut = new byte[msgSize];
Marshal.Copy(ptr, dataOut, 0, msgSize); 
```

# mysql - 产生以下结果的sql查询

> ID：15544821
> 
> 赞同：-2
> 
> 时间：2013-03-21T10:23:15.033
> 
> 标签：mysql, sql, database, oracle

> 谁能告诉我 sql 查询（MySQL）将导致表中的输出。

![在此处输入图像描述](../Images/191c92f9d2f6d5b5ac861e6af291027c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:50:51.617

```
WITH w AS (
  SELECT 10 AS value, 'Rahul' AS status, TO_DATE('20/01/2013', 'DD/MM/YYYY') AS date_time FROM dual
  UNION ALL
  SELECT 15, 'Vijay', TO_DATE('28/02/2013', 'DD/MM/YYYY') FROM dual
  UNION ALL
  SELECT 20, 'Loki', TO_DATE('03/02/2013', 'DD/MM/YYYY') FROM dual
  UNION ALL
  SELECT 25, 'Kiran', TO_DATE('05/01/2013', 'DD/MM/YYYY') FROM dual
  UNION ALL
  SELECT 5, 'Rahul', TO_DATE('02/01/2013', 'DD/MM/YYYY') FROM dual
  UNION ALL
  SELECT 15, 'Vijay', TO_DATE('10/01/2013', 'DD/MM/YYYY') FROM dual
  UNION ALL
  SELECT 08, 'Loki', TO_DATE('01/01/2013', 'DD/MM/YYYY') FROM dual
)
  SELECT TO_CHAR(date_time, 'Mon') AS m
         , SUM(CASE status WHEN 'Rahul' THEN value ELSE 0 END) AS Rahul
         , SUM(CASE status WHEN 'Vijay' THEN value ELSE 0 END) AS Vijay
         , SUM(CASE status WHEN 'Loki' THEN value ELSE 0 END) AS Loki
         , SUM(CASE status WHEN 'Kiran' THEN value ELSE 0 END) AS Kiran
         , SUM(value) AS Total
    FROM w
GROUP BY TO_CHAR(date_time, 'Mon')
ORDER BY TO_DATE(TO_CHAR(date_time, 'Mon'), 'Mon')
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:46:18.543

您正在执行 PIVOT TABLE QUERY - 尽管通常最好在 (My)SQL 中执行基本聚合，然后在应用程序级别处理显示问题（例如，使用一点 PHP）。

标准查询可能如下所示，尽管 MySQL 支持与此标准的简写偏差......

```
SELECT DATE_FORMAT(date,'%M') month
     , COALESCE(SUM(CASE WHEN status = 'Rahul' THEN value END),0) Rahul 
     , COALESCE(SUM(CASE WHEN status = 'Vijay' THEN value END),0) Vijay
     , COALESCE(SUM(CASE WHEN status = 'Loki' THEN value END),0) Loki
  FROM my_table 
 GROUP 
    BY MONTH(date); 
```

# android - 未捕获的处理程序错误。

> ID：15544826
> 
> 赞同：0
> 
> 时间：2013-03-21T10:23:29.320
> 
> 标签：android, android-handler

我正在尝试做一个 HTTP Post，当我知道应该在异步任务或处理程序中使用耗时的任务时，我尝试使用处理程序对其进行编码，但我得到一个处理程序未捕获的异常，无法确定在哪里我错了。下面是我的代码和日志跟踪。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button Bt = (Button)findViewById(R.id.button1);
    Button Btx = (Button)findViewById(R.id.button2);

    et = (EditText)findViewById(R.id.editText1);
    etp = (EditText)findViewById(R.id.editText2);

    Bt.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            dialog = ProgressDialog.show(MainActivity.this,"Loading", "Please Wait...");

            h = new Handler(){

                @Override
                public void handleMessage(Message msg) {
                    super.handleMessage(msg);
                    dialog.dismiss(); 
                }
            };

            new Thread(){

                @Override
                public void run() {
                    super.run();

                    Connection();

                    try {
                        Thread.sleep(3000);
                        h.sendEmptyMessage(0); 
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                }

            }.start();

        }
    });

   // Btx.setOnClickListener(Sig);

}

    private View.OnClickListener Sig =new View.OnClickListener() {
        public void onClick(View v){

            Intent Sign = new Intent(MainActivity.this,Signup.class);
            startActivity(Sign);

        }
        };

    public  void Connection(){
    String is = null;
    String X = et.getText().toString();
    String Y = etp.getText().toString();

    if(X.length()>0 && Y.length()>0){
        A = X;
        B = Y; 
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://animsinc.com/query.php"); 
        try {
           List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
           nameValuePairs.add(new BasicNameValuePair("username", X));
           nameValuePairs.add(new BasicNameValuePair("password",Y));
           httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
           httpclient.execute(httppost);
        //   et.setText(""); // clear text box
        //   etp.setText(""); // clear text box

        HttpResponse responce = httpclient.execute(httppost);
        HttpEntity entity = responce.getEntity();
        is = EntityUtils.toString(entity);
       // in = entity.getContent();
      //  Log.e("post responce----->", "" + is);
        Toast.makeText(this,""+is, Toast.LENGTH_LONG).show();

         } catch (ClientProtocolException e) {
             // TODO Auto-generated catch block
         }catch (UnsupportedEncodingException e) {
            e.printStackTrace();
         }catch (IOException e) {
             // TODO Auto-generated catch block
         }

    } else{
            // display message if text fields are empty
             Toast.makeText(getBaseContext(),"All field are required",Toast.LENGTH_SHORT).show();
         }
    if(is != null){
        Toast.makeText(this,""+is, Toast.LENGTH_LONG).show();

    }

} 
```

}

这是我的原木猫：

![在此处输入图像描述](../Images/3a9fd09b3c13183b6f45274b71c6f119.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:29:37.930

问题是您正在调用：

```
Toast.makeText(this,""+is, Toast.LENGTH_LONG).show(); 
```

来自 run() 方法中的工作线程。你不应该这样做。您只能从 Main(UI) 线程使用 UI 进行操作。

**解决方案**是使用[runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或在 Handler 中显示 Toast。

# silverlight - 如何在 Silverlight xaml 中使用 PivotViewer？

> ID：15544831
> 
> 赞同：1
> 
> 时间：2013-03-21T10:23:39.233
> 
> 标签：silverlight, xaml, pivotviewer

如何在 Silverlight xaml 中使用 PivotViewer？我阅读了[http://msdn.microsoft.com/en-us/library/system.windows.controls.pivot.pivotviewer(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.pivot.pivotviewer(v=vs.95).aspx)并添加了对程序集的引用。但我得到一个错误

> [名称空间“ http://schemas.microsoft.com/client/2007](http://schemas.microsoft.com/client/2007) ”中不存在名称“PivotViewer” 。

这是我的 xaml：

```
<UserControl x:Class="SilverlightApplication2.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <TextBlock Text="Hello world"></TextBlock>
        <PivotViewer/>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:56:28.750

`System.Windows.Controls.Pivot`然后添加了对程序集的引用

```
<UserControl x:Class="SilverlightApplication2.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
     xmlns:pivot="clr-namespace:System.Windows.Controls.Pivot;assembly=System.Windows.Controls.Pivot"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White">
        <TextBlock Text="Hello world"></TextBlock>
        <pivot:PivotViewer x:Name="pViewer"  />
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:25:11.070

我的博客上有一个使用 PivotViewer 的系列。那应该让你开始。[http://tonychampion.net/blog/index.php/series/pivotviewer-basics/](http://tonychampion.net/blog/index.php/series/pivotviewer-basics/)

# websphere - websphere 上的应用程序在应用程序重新启动时抛出 ClassCastException

> ID：15544833
> 
> 赞同：0
> 
> 时间：2013-03-21T10:23:43.833
> 
> 标签：websphere, classloader, websphere-7, classcastexception

我有一个 Websphere application server 7.0 (Parent Last) 的应用程序

请仔细阅读描述以了解问题。

我创建了一个新的 websphere 配置文件。在上面配置了我的应用程序并启动了应用程序，现在当我测试应用程序时。它运作良好。

现在，我去 websphere 控制台并重新启动我的应用程序。这次我测试我的应用程序。我得到错误。

日志说一个 classCastException ：

```
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R java.lang.ClassCastException: com.csc.fs.ra.SimpleConnectionSpecImpl incompatible with com.csc.fs.ra.SimpleConnectionSpecImpl
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.ra.ip.ConnectionFactoryImpl.getConnection(ConnectionFactoryImpl.java:69)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.InteractionHandlerBase.getConnection(InteractionHandlerBase.java:165)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.InteractionHandlerBase.execute(InteractionHandlerBase.java:95)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.InteractionHandlerBase.process(InteractionHandlerBase.java:230)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.SystemAccessBase.invokeInteraction(SystemAccessBase.java:374)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.SystemAccessBase.internalInvoke(SystemAccessBase.java:242)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.SystemAccessBase.invoke(SystemAccessBase.java:55)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.sa.SystemAccessBase.login(SystemAccessBase.java:106)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.session.AuthenticatorBase.logonSystemSession(AuthenticatorBase.java:153)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.session.AuthenticatorBase.addSystemSessions(AuthenticatorBase.java:132)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.session.standalone.AuthenticatorBase.logon(AuthenticatorBase.java:224)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.session.AuthenticatorBase.logon(AuthenticatorBase.java:93)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.service.ServiceControllerAbstract.logon(ServiceControllerAbstract.java:387)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.delegate.DirectServiceController.logon(DirectServiceController.java:132)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.delegate.ServiceDelegateDirect.logon(ServiceDelegateDirect.java:133)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.ui.BaseServiceAction.logon(BaseServiceAction.java:124)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.ui.action.desktop.Logon.perform(Logon.java:47)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.ui.ServiceDelegator.execute(ServiceDelegator.java:506)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.ui.ServiceDelegator.processEvent(ServiceDelegator.java:240)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.ui.BeanBase.executeEvent(BeanBase.java:779)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at pagecode.authorization.Logon.submit(Logon.java:66)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at java.lang.reflect.Method.invoke(Method.java:600)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at org.apache.el.parser.AstValue.invoke(AstValue.java:131)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at org.apache.jasper.el.JspMethodExpression.invoke(JspMethodExpression.java:67)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at javax.faces.component.UICommand.broadcast(UICommand.java:315)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:775)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1267)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1661)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.csc.fs.accel.ui.filters.ResponseHeaderFilter.doFilter(ResponseHeaderFilter.java:82)
[3/21/13 6:06:18:616 EDT] 0000001d SystemErr     R  at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188) 
```

这个 ClassCastException 背后的原因是类的多个版本`SimpleConnectionSpecImpl`。

此类由我通过 websphere 管理控制台在外部配置的资源适配器提供。

但是现在当我停止服务器并重新启动服务器时，我可以再次使用该应用程序而没有错误。

所以我最接近的猜测 websphere 正在缓存类文件，因此我看到了异常。

有什么想法吗？想法？

如果您需要更多详细信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:42:51.827

您会看到异常，因为有不同的类加载器加载了该类，这在技术上使它们成为不同的类。

我们之前已经通过让类与服务器类路径分开并且只让服务器加载它来解决这个问题。这样，该类只有一个类加载器，服务器上运行的所有应用程序都可以从那里使用它。

我在这里可以看到的唯一其他选项是不要重新启动您的应用程序，除非您也计划重新启动服务器。我只会认为这在开发环境中是一种痛苦，但是一旦您投入生产，我怀疑您是否经常重新启动应用程序。

# sql - 在 DB2 中形成查询以根据一列中的值以及另一列的顺序来获取行

> ID：15544836
> 
> 赞同：0
> 
> 时间：2013-03-21T10:23:46.777
> 
> 标签：sql, db2

如果标题看起来很荒谬并且缺少信息，我深表歉意，我试图通过以下示例来解释这种情况：

考虑下表-

```
ID     Event     Time
---------------------
1      EventA     ta
1      EventB     tx
2      EventB     ty
1      EventC     tb
2      EventC     to 
```

我希望选择 ID，以便在 EventB 的任何实例之后（基于时间）有一个 EventC。

我可以想到以下查询：

```
 select ID from TabET where
    ((select TIME from TabET where Event = EventC order by TIME desc fetch first row only)
    >
     (select TIME from TabET where Event = EventB order by TIME desc fetch first row only)) 
```

我正在寻找一种更好的方法和替代方法，因为实际上该表是一个非常大的表，并且此查询只是一个大查询中的子查询以满足条件。

## 编辑

ID 不是唯一的。问题是识别在（基于时间）EventB之后有EventC的ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:40:04.867

您可以使用自联接：

```
select distinct t1.ID 
   from table t1
   join table t2 on 
      t1.ID = t2.ID and
      t1.Event = 'EventB' and
      t2.Event = 'EventC' and
      t2.Time > t1.Time 
```

另一种方法：

```
with latest_times as (
   select id, max(time) as time from table 
       where Event='EventC'
       group by id
)
select t1.ID from table t1
    join latest_times on 
        t1.id = latest_times.id and
        t1.Event = 'EventB' and
        latest_times.time > t1.time 
```

# android - 在 Android 和 iOS 上保护 HTTP API 调用的最简单、最安全的方法是什么？

> ID：15544838
> 
> 赞同：0
> 
> 时间：2013-03-21T10:23:53.540
> 
> 标签：android, ios, security, http, rest

我想开发适用于 Android、iOS 的应用程序并有一个 Web 界面，我希望移动应用程序与服务器通信，这是确保安全的最佳方式？我想使用适用于 Android 和 iOS 的东西，并且很容易实现服务器端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:26:06.463

在您的服务器上使用[SSL 。](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)涵盖您的所有要求。此外，默认情况下，任何非 SSL HTTP 通信都是不安全的。

# internet-explorer - 在现有 IE 实例中打开选项卡

> ID：15544839
> 
> 赞同：11
> 
> 时间：2013-03-21T10:23:53.640
> 
> 标签：internet-explorer, powershell

```
$ie = New-Object -com internetexplorer.application 
```

每次我用这个对象打开一个新网站（即每次脚本运行时）它都会在一个新的 IE 窗口中打开，我不希望它这样做。我希望它在新选项卡中打开，但也在以前打开的 IE 窗口中打开。我想在脚本下次运行时重用这个对象。我不想创建一个新对象

那么有没有办法检查 Internet Explorer 的实例并重用它的实例？？？

**我尝试将此作为解决方案：**

首先，您必须附加到已经运行的 Internet Explorer 实例：

```
$ie = (New-Object -COM "Shell.Application").Windows() `
    | ? { $_.Name -eq "Windows Internet Explorer" } 
```

然后导航到新的 URL。打开 URL 的位置是通过 Flags 参数控制的：

```
$ie.Navigate("http://www.google.com/", 2048) 
```

但我无法`navigate`在这个新创建的对象上调用方法`$ie`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T11:56:57.620

首先，您必须附加到已经运行的 Internet Explorer 实例：

```
$ie = (New-Object -ComObject "Shell.Application").Windows() |
      Where-Object { $_.Name -eq "Windows Internet Explorer" } 
```

然后你[`Navigate`](http://msdn.microsoft.com/en-us/library/aa752093%28v=vs.85%29.aspx)到新的 URL。打开该 URL 的位置通过[`Flags`](http://msdn.microsoft.com/en-us/library/dd565688%28v=vs.85%29.aspx)参数控制：

```
$ie.Navigate("http://www.google.com/", 2048) 
```

**编辑：**如果 2 个或更多 IE 实例正在运行（附加选项卡也算作附加实例），则枚举将返回一个数组，因此您必须从数组中选择一个特定实例：

```
$ie[0].Navigate("http://www.google.com/", 2048) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-21T12:12:36.033

您可以使用`Start-Process`打开网址。如果浏览器窗口已经打开，它将作为选项卡打开。

```
Start-Process 'http://www.microsoft.com' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-10T08:12:59.593

如果 Internet Explorer 不是您的默认浏览器，您可以使用它：

```
Function Open-IETabs {
    param (
        [string[]]$Url
    )
    begin {
        $Ie = New-Object -ComObject InternetExplorer.Application
    }
    process {
        foreach ($Link in $Url) {
            $Ie.Navigate2($Link, 0x1000)
        }
    }
    end {
        $Ie.Visible = $true
    } 
} 
```

我在[PowerShell.com上找到了这个](http://powershell.com/cs/forums/p/14043/26814.aspx "Powershell.com")

# ajax - jQuery 移动页面过渡 iScroll 刷新

> ID：15544841
> 
> 赞同：1
> 
> 时间：2013-03-21T10:24:18.017
> 
> 标签：ajax, jquery, jquery-mobile, refresh, iscroll

我有多个使用 JQMobile 框架的 HTML 页面；在这些页面中，我使用 iScroll 创建原生滚动效果，一切正常。

我在将 JQM 页面转换与 iScroll 一起使用时遇到了问题，因为它是通过 ajax 加载的，我知道我需要在新页面上刷新 iScroll，以便它可以在 DOM 更改后正确计算高度和宽度。

我对此进行了研究并尝试了代码（尝试了 refresh() 并销毁和重新创建），但看不到让它工作，iScroll 工作它只是没有在页面更改时刷新（因此不工作），有什么想法吗？

代码如下！

```
<div data-role="page">
    <div data-role="header">

    </div><!-- /header -->

    <div data-role="content">
    <div id="wrapper">
        <div id="scroller">
            <p>Page content goes here.</p>
            <a href="jquery_mobile_2.html"  data-transition="slide">Page 2</a>
        </div>
    </div>
    </div><!-- /content -->

    <div data-role="footer">
        <div data-role="navbar">
            <ul>
                <li><a data-ajax="false" href="javascript:void(0);" onClick="homepage();"><img width="34px" height="34px" src="images/home_IMG_v2.png" /><!--<span class="nav">Home</span>--></a></li>
                <li><a data-ajax="false" href="Guide.html" class="ui-btn-active ui-state-persist"><img width="35px" height="33px" src="images/guide_IMG_v2.png"><!--<span class="nav">Guide</span>--></a></li>
                <li><a data-ajax="false" href="TaxCalculator.html"  /><img width="76px" height="34px" src="images/calculator_IMG_v2.png" /><!--<span id="calc" class="nav">Calculator</span>--></a></li>
            </ul>
        </div>
    </div><!-- /footer -->
</div><!-- /page --> 
```

使用刷新（）

```
var myScroll;

function loaded() {

    myScroll = new iScroll('wrapper', { hScrollbar: false, vScrollbar: false, checkDOMChanges: true});

   setTimeout(function() {      
        myScroll.refresh();
   }, 100);

}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false); 
```

销毁 iScroll 并重新创建

```
var myScroll;

function loaded() {

    myScroll = new iScroll('wrapper', { hScrollbar: false, vScrollbar: false, checkDOMChanges: true});

   setTimeout(function() {      
        myScroll.destroy();   
        myScroll = null;
        myScroll = new iScroll('wrapper', { hScrollbar: false, vScrollbar: false, checkDOMChanges: true});  
   }, 100);

}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:43:53.497

尝试在 jqm pageshow 事件触发时调用初始化 iScroll，例如在 jqm 1.3.1 中：

```
$(document).on('pageshow', function (event, ui) {
    myScroll = new iScroll('wrapper', { hScrollbar: false, vScrollbar: false, checkDOMChanges: true});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T07:29:23.360

在 domchanges 之后你需要刷新 iscroll

```
$('#videotagisc').iscrollview("refresh"); 
```

这不起作用意味着使用**setTimeout**

```
setTimeout(function(){
 $('#videotagisc').iscrollview("refresh");
},100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T08:44:31.303

```
var width   = $( window ).width();
var height  = $( window ).height();
var delay = 200;
var doit;

function keop() {
    $("#wrapper").css({"height":height+"px","width":width+"px"});
    setTimeout( function(){
        myScroll.refresh() ;
    } , 200 ) ; 
}

/* < JQuery 1.8*/
window.addEventListener("load", function(){
    clearTimeout(doit);
    doit = setTimeout(keop, delay);
});

/* > JQuery 1.8*/
window.on("load", function(){
    clearTimeout(doit);
    doit = setTimeout(keop, delay);
}); 
```

# php - 上传到 dmcloud

> ID：15544844
> 
> 赞同：0
> 
> 时间：2013-03-21T10:24:20.910
> 
> 标签：php, forms, file-upload, video-streaming, httprequest

我正在一个使用 DMCloud 流式传输视频的网站上工作。现在，我有一个输入一些文件的表单。我在我的网站上上传视频，然后使用 PHP 将文件移动到 DMCloud，然后将其删除。

这有点愚蠢，让我失去了很多带宽。

在他们的文档中，我看到了：[https](https://www.dmcloud.net/doc/api/api-upload.html) ://www.dmcloud.net/doc/api/api-upload.html 所以我正在尝试使用它。我已经在函数返回给我的 url 上设置了表单的操作。但每次我提交表单时，dmcloud 都会回复我：`{ "error": "missing file" }`

那么我如何告诉他，我想在 DMCloud 上上传哪个文件？我可以用 ajax 发送请求吗？我可以在同一个表单上上传多个视频吗？

编辑：这是一些代码，但我认为它没有帮助。我什至不知道该怎么做，我的代码既愚蠢又无用而且不起作用......在我的控制器上：

```
$CloudKey=new CloudKey('503660c394a6f6067c0005c3','bb36a94fb64388417172d5f1f93453b3996627a5');
$CloudKey->file=$CloudKey->__get('file');
$action=$CloudKey->file->upload(array('status'=>true,"target"=>"http://www.carpediese.fr/?tamere=1"));
    $action=$action->url; 
```

在我看来，我得到了一个基本的表格，里面有很多输入。使用 method="post" enctype="multipart/data"，以及将值作为我的`$action`var 的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:30:44.437

PHP：

```
require_once 'CloudKey.php';

$cloud_key = new CloudKey('503660c394a6f6067c0005c3','bb36a94fb64388417172d5f1f93453b3996627a5');
$action_url = $cloud_key->file->upload(array('status'=>false,'target'=>'http://www.carpediese.fr/?tamere=1'))->url; 
```

HTML：

```
<form enctype="multipart/form-data" method="post" action="<?=$action_url?>">
    <input type="file" name="file" />
</form> 
```

# javascript - JavaScript，在 onmouseover 事件中播放音效

> ID：15544845
> 
> 赞同：0
> 
> 时间：2013-03-21T10:24:24.367
> 
> 标签：javascript, audio, playback, onmouseover

我想这是一个常见的问题，但到目前为止我所看到的教程和帖子都没有帮助我。每当光标在也是一个链接的菜单图像上时，我希望它播放的声音。onmouseover 事件中已经有另一条指令让图像闪烁，但我读过该事件可以有多个指令。这是代码（对不起，如果它看起来很乱）

```
<html>
<head>
<script type="text/javascript">
  var sonido=document.getElementById("neonclip");
</script>
</head>
<body>
<audio id="neonclip">
   <source src="http://www.eleyte.net/portafolio/neon.mp3" type="audio/mp3"/>
</audio>
<div style="text-align: center; margin-top: 130px;">
<a href="pagelink"> 
<img onmouseover="this.src='img2';
sonido.play(document.getElementById('neonclip'))
onmouseout="this.src='img1'"src="img1"/> </a>
</div>
</body>
</html> 
```

我按照一个例子做了这个，但它没有用。我知道它在 Firefox 中会出现问题，因为它不支持 mp3 格式，但那是另一回事。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:28:57.807

只需使用以下两种格式即可在所有浏览器中播放声音。

```
<audio preload id="neonclip">
  <source src="sounds/dingdong/57718^DingDong.mp3" type="audio/mpeg">
  <source src="sounds/dingdong/dingdong.ogg" type="audio/ogg">
</audio> 
```

并播放声音试试这个

```
<a href="pagelink"> 
<img onmouseover="this.src='img2'; document.getElementById('neonclip').play()" onmouseout="this.src='img1'"src="img1"/> </a> 
```

# svn - SVN 提交问题

> ID：15544846
> 
> 赞同：0
> 
> 时间：2013-03-21T10:24:30.050
> 
> 标签：svn, commit

在使用 svnkit 库为我的项目实施颠覆时，我几乎没有问题。

1）我从存储库中签出一个文件并在本地进行更改，然后我提交其他用户签出相同的文件并进行更改并提交文件。但是如果我现在提交它会抛出一个错误。

因此，可以在我的本地结帐文件中更新最新的 svn 更改，而不会覆盖我的本地更改。即，我们在 Eclipse 中对 head 进行更新。

[或者]

2）可以在提交文件之前检查是否会发生冲突。因为一旦发生冲突，它会自动创建具有本地和存储库更改的文件的重复版本。如何避免这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:43:16.073

> 因此，可以在我的本地结帐文件中更新最新的 svn 更改，而不会覆盖我的本地更改。即，我们在 Eclipse 中对 head 进行更新。

这就是`svn update`它的作用。如果发生冲突（您和其他人编辑了文件的同一部分），您最终将在工作副本中得到三个文件：

```
file
file.mine
file.rXXX 
```

`file.mine`将包含您自己的修改，`file.rXXX`其他人的修改，并将`file`尝试合并文件，您应该在将冲突标记为已解决并提交之前对其进行编辑。

# java - 如何使用java程序执行cmd命令

> ID：15544853
> 
> 赞同：-2
> 
> 时间：2013-03-21T10:24:57.857
> 
> 标签：java, ffmpeg, cmd

我想使用 java 程序执行一个 cmd 命令

`ffmpeg -i input.mp4 output.mp3`

我希望使用 java 语言在 cmd 中执行上述命令。在上面的代码中，我直接给出了要执行的输入文件名，但是我可以编写代码以便用户手动给出输入文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:26:39.123

干得好 -

```
Runtime.getRuntime().exec("ffmpeg -i input.mp4 output.mp3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:26:53.427

您可以使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)执行此操作。JavaDoc 有一些代码示例应该证明是有用的。

# javascript - Sencha Touch2：在列表的单独行中显示嵌套的 Json 数据

> ID：15544857
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:01.840
> 
> 标签：javascript, json, listview, extjs, sencha-touch-2

我是 sencha touch2 的新手，在列表的单独行中显示嵌套的 json 数据时遇到问题。这是我的 Json 的样子：

```
[
    {
        "work": {
            "agent": {
                "activeFlag": "false",
                "shiftId": "0",
                "id": "0",
                "deleteFlag": "false"
            },
            "id": "124",
            "status": "Unassigned",
            "assignment": {
                "pnr": {
                    "locator": "ABCDEF",
                    "connectTime": "0",
                    "id": "0"
                },
                "id": "123",
                "alerts": "Delay",
                "customers": [
                    {
                        "lastName": "XYZ",
                        "firstName": "MNO"
                    },
                    {
                        "lastName": "PQR",
                        "firstName": "STU "
                    }
                ]
            }
        }
    },
    {
        "work": {
            "agent": {
                "activeFlag": "false",
                "shiftId": "0",
                "id": "0",
                "deleteFlag": "false"
            },
            "id": "124",
            "status": "Unassigned",
            "assignment": {
                "pnr": {
                    "locator": "ABCDEF",
                    "connectTime": "0",
                    "id": "0"
                },
                "id": "123",
                "alerts": "Delay",
                "customers": [
                    {
                        "lastName": "ANY",
                        "firstName": "KLJ"
                    },
                    {
                        "lastName": "CHE",
                        "firstName": "MAK"
                    }
                ]
            }
        }
    }
] 
```

像这样，我有 30 个“工作”对象，在 1 个“工作”中，我有 1 个“客户”数组，里面有多个客户

我想在列表中的单独行中显示“客户”，但能够在一行中显示单个“工作”的所有客户。

```
Output should be:
---------------
delay
First Name: MNO
---------------
delay
First Name: STU
---------------
delay
First Name: KLJ
---------------
delay
First Name: MAK
--------------- 
```

这是模型。模型列表.js：

```
Ext.define('CustomList.model.ModelList', {
    extend: 'Ext.data.Model',
    xtype:'modelList',
    requires:['CustomList.model.Customers'],
    config: {
            fields:['work'],
        proxy:{
            type:'ajax',
            url:'http://localhost:9091/CustomListJson/app/store/sample.json',
            reader:{
            type:'json'

        }
    },
    hasMany:{model:'CustomList.model.Customers',
             name:'customers'}
    }

}); 
```

客户.js：

```
Ext.define('CustomList.model.Customers', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            'firstName','lastName'
        ],
        belongsTo: "CustomList.model.ModelList"
    }

}); 
```

这是我的 ShowList.js：

```
Ext.define('CustomList.view.ShowList',{
    extend:'Ext.Panel',
    xtype:'showList',
    config:{
        layout:'fit',
        styleHtmlContent:'true',
        styleHtmlCls:'showListCls',
        items:[
            {
                xtype:'list',
                id: 'listitems',
                store:'StoreList',
            itemTpl:[ '{work.assignment.alerts}<br>',
                '<tpl for="work.assignment.customers">',
                'firstName: {firstName}<br>',
                '</tpl>'
            ]
 // am able get the below values in list
//                itemTpl:'{work.assignment.alerts}'
//                itemTpl:'{work.assignment.pnr.locator}'
//                  itemTpl:'{work.agent.activeFlag}'
//                itemTpl: '<b>{firstName} {lastName}     </b><br>'+'pnr: '+ '{locator}  <br>' +
//                    'Alerts: '+'{alerts}' +'status: '+'{status} '
               }]

    }
}); 
```

这是我的 StoreList.js：

```
Ext.define('CustomList.store.StoreList', {
    extend:'Ext.data.Store',
    requires:['Ext.data.reader.Json'],
    config:{
        model:'CustomList.model.ModelList',
        autoLoad:'true'

    }
}); 
```

谁能帮帮我吗。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:06:40.553

这就是你所追求的吗？

[在这里下载](http://george-gray.co.uk/images/Srinivas.zip)

![工作截图](../Images/a07aba3246f5d0b080a19af39fcaa299.png)

这是一个非常简单的模型，但它应该可以帮助您，我认为您的模型关联令人困惑。

列表：

```
Ext.define('MyApp.view.MyList', {
    extend: 'Ext.dataview.List',

    config: {
        store: 'MyJsonStore',
        itemTpl: [
            '<div><div><h1>{work.assignment.alerts}</h1></div><tpl for="work.assignment.customers"><div>First Name: {firstName}</div></tpl></div>'
        ]
    }

}); 
```

店铺：

```
 Ext.define('MyApp.store.MyJsonStore', {
    extend: 'Ext.data.Store',

    config: {
        data: [
            {
                work: {
                    agent: {
                        activeFlag: 'false',
                        shiftId: '0',
                        id: '0',
                        deleteFlag: 'false'
                    },
                    id: '124',
                    status: 'Unassigned',
                    assignment: {
                        pnr: {
                            locator: 'ABCDEF',
                            connectTime: '0',
                            id: '0'
                        },
                        id: '123',
                        alerts: 'Delay',
                        customers: [
                            {
                                lastName: 'XYZ',
                                firstName: 'MNO'
                            },
                            {
                                lastName: 'PQR',
                                firstName: 'STU '
                            }
                        ]
                    }
                }
            },
            {
                work: {
                    agent: {
                        activeFlag: 'false',
                        shiftId: '0',
                        id: '0',
                        deleteFlag: 'false'
                    },
                    id: '124',
                    status: 'Unassigned',
                    assignment: {
                        pnr: {
                            locator: 'ABCDEF',
                            connectTime: '0',
                            id: '0'
                        },
                        id: '123',
                        alerts: 'Delay',
                        customers: [
                            {
                                lastName: 'ANY',
                                firstName: 'KLJ'
                            },
                            {
                                lastName: 'CHE',
                                firstName: 'MAK'
                            }
                        ]
                    }
                }
            }
        ],
        storeId: 'MyJsonStore',
        proxy: {
            type: 'ajax',
            reader: {
                type: 'json'
            }
        },
        fields: [
            {
                name: 'work'
            }
        ]
    }
}); 
```

如果你让配置像我一样工作，那么你可以逐渐添加你的模型和关联，以及你的 ajax 加载，一路测试，这应该可以帮助你发现问题所在。

此外，在处理 JSON 数据时，您可能需要考虑使用[Json Lint](http://jsonlint.com/)等工具，您发布的原始 JSON blob 难以阅读且格式错误，所有这些都使开发变得更加困难。

# asp.net - 如何在asp.net c#中根据文件的日期和时间删除文件

> ID：15544858
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:02.510
> 
> 标签：asp.net, web-applications

我在谷歌上搜索了很多，我找到了一些回应，但没有找到我想要的。我想要的是假设我在同一日期同一日期的文件夹中有 5 个文件：1st file-1mb 2nd file=2mb 3rd file-3mb 4th file-4mb 5th file-5mb

现在，当我单击我的按钮时，它将删除除 5mb 之外的所有文件，因为它的大小。

首先，我想根据文件夹中的日期搜索文件，然后删除该特定日期的所有文件，但大小最大的文件除外。

我不想要代码，我想要可以在这个项目中使用的功能。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:27:52.923

使用`DirectoryInfo`您可以获取指定路径中的所有文件，根据`File.Length`属性获取最大大小文件，然后删除，如：

```
DirectoryInfo di = new DirectoryInfo("C:\"");
var files = di.GetFiles();
var maxFileSize = files.Max(r => r.Length);

foreach (FileInfo file in files.Where(r => r.Length < maxFileSize))
{
    file.Delete();
} 
```

# c# - Json结果未绑定到aspx？

> ID：15544862
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:19.163
> 
> 标签：c#, asp.net, json, return-value

我有一项服务，它以以下格式返回 json

```
Data {
    "TerminalID": 21,
    "TerminalName": "NewTested",
    "PortID": 27,
    "PortName": "Badu Island",
    "EffectiveStart": "2013-03-20T00:00:00",
    "EffectiveEnd": "2013-03-23T00:00:00",
    "ServiceID": 2
} 
```

在我的 aspx 页面中，我的代码是：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#divImageGo").click(function () {
            var valId = 2;

            $.ajax({
                type: "GET",
                url: "VoyageOneService.svc/BindVoyageDetails" + valId,
                //data: '{"ServiceID":"2"}',
                processData: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {                                         
                    ServiceSucceeded(result);
                },
                error: function (msg) {
                    $("#errorDiv").text(msg);
                }
            });

        });
    }); 
```

成功执行以下操作：

```
function ServiceSucceeded(data) {
    alert("Success");
    for (var i = 0; i < data.d.length; i++) {

        $("#dlistVoyageDetails").append("<tr><td>" + data.d[i].TerminalName + "</td><td>" + data.d[i].PortName + "</td><td>" + data.d[i].EffectiveStart + "</td></tr>" + data.d[i].EffectiveEnd + "</td></tr>");
    }        
}

function ServiceFailed(xhr) {
    if (xhr.responseText) {
        var err = xhr.responseText;
        if (err)
            error(err);
        else
                error({ Message: "Unknown server error." })
        }
        return;
    } 
```

在这个..,

1.  我正在调用我的服务
2.  我正在获取我的 json 返回值
3.  我正在通过其警报消息触发成功

但我无法得到结果。当我用结果检查我的警报时，我得到了 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:40:10.807

删除 if 条件，它将起作用。

由于 data.length 为空，因此您的条件不满足。

```
function ServiceSucceeded(data) {
    alert("Success");

        $("#dlistVoyageDetails").append("<tr><td>" + data.d[i].TerminalName + "</td><td>" + data.d[i].PortName + "</td><td>" + data.d[i].EffectiveStart + "</td></tr>" + data.d[i].EffectiveEnd + "</td></tr>");

} 
```

# php - 从视图中获取价值

> ID：15544863
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:20.620
> 
> 标签：php, laravel, laravel-3

我有两个表用户和文章表之间的关系是

模型：

```
class Article extends Eloquent {

  public static $table = 'article';

  public function User()
    {
    return $this->has_one('user', 'id');
    } 
```

和

```
class User extends Eloquent {

  public static $table = 'user';

  public function Article()
    {
       return $this->belongs_to('article', 'id_user');
    } 
```

我想直接在文章视图上从用户获取名称值，但不能使用错误尝试获取非对象的属性

我的控制器：

```
public function action_index()
    {

    $Article = Article::order_by('id')->paginate(10);

    return View::make('article.index')->with('$articles', $Article);
    } 
```

我的观点：

```
@foreach ($articles->results as $Arti)
      <tr>
       <td>{{$Arti->id}}</td>
       <td>{{$Arti->tag}}</td>
       <td>{{$Arti->user->name }}</td>  <------ ERROR
       <td>{{$Arti->content}}</td>
       <td>{{$Arti->date}}</td>
       <td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:12:25.477

看看下面，有几件事与你的不同......

1.  文章 belongs_to 用户（不是 has_one）
2.  用户[has_many](http://laravel.com/docs/database/eloquent#one-to-many)文章（不是belongs_to）
3.  您的关系应以小写形式命名，has_many 的复数形式（即`articles`或`user`）
4.  您的关系主题应该是类名（即`Article`或`User`）
5.  外键应该是名字relationship_id，即`user_id`
6.  添加`::with()`到您的查询以[渴望加载关系](http://laravel.com/docs/database/eloquent#eager)
7.  当您[分页](http://laravel.com/docs/views/pagination#using-the-query-builder)时，您需要`->results`在您的视图中访问

```
class Article extends Eloquent {

    // 3: lowercase 'user'
    public function user()
    {
        // 1: Article belongs to User
        // 4: class name 'User'
        // 5: Foreign key on article table is user_id
        return $this->belongs_to('User');
    }

}

// models/user.php

class User extends Eloquent {

    // 3: lowercase plural 'articles'
    public function articles()
    {
        // 2: User has many Articles
        // 4: class name 'Article'
        return $this->has_many('Article');
    }

}

// controllers/articles.php

class Article_Controller extends Base_Controller {

    public $restful = true;

    public function get_index()
    {
        // 6: Eager load the user relationship, ::with('user')
        $articles = Article::with('user')->order_by('id')->paginate(10);
        return View::make('articles.index', compact('articles'));
    }

}

// views/articles/index.blade.php
// 7: access $articles->results from the paginator

@foreach ($articles->results as $article)

    <h1>{{ $article->title }}</h1>
    <p>By {{ $article->user->name }}</p>

@endforeach

{{ $articles->links() }} 
```

# sql - 将文本文件中的“（撇号）读入sql server时出错

> ID：15544864
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:22.560
> 
> 标签：sql, sql-server

我正在从文本文件批量插入到 sql server，但在读取文本文件时遇到错误，此错误是由于文本文件中存在 '，因为已知 ' 用于指示开始和字符串结束，请告诉我如何来。

从文本文件中插入数据的 sql 查询是

```
 bulk insert #tmpfile from c:\data.txt with (firstrow=2,fieldterminator=':!:',rowtermintor='\n') 
```

文本文件中 ' present 所在的行之一

```
32562 :!: saicahndan muriki, analyst,'belongs to development activities ------->facing error 
```

在这里，我无权通过再放置一个撇号（'）来转义来编辑文本文件，请告诉我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:21:40.470

' 是一个转义字符，如果您在 ' 上进行搜索并替换为 ''（两个单引号），这将解决您的问题

# javascript - 元素目的地

> ID：15544865
> 
> 赞同：1
> 
> 时间：2013-03-21T10:25:26.867
> 
> 标签：javascript, html, textbox

我创建了一个 html 页面并插入了一个文本框。我想从 javascript 函数中知道页面中的文本框目的地？示例文本框的顶部是 100 像素。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:37:54.667

试试这个：

```
window.onload = function() {
    console.log(document.getElementById("id1").offsetTop);
}; 
```

`id1`您需要进行三角测量的文本框的 id 在哪里。

# sql - 使用多列简化 SQL 查询

> ID：15544866
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:27.747
> 
> 标签：sql, ms-access

我想知道你们是否可以帮助我在**单个查询中简化以下查询**。

我有 10 个查询，就像下面的查询一样。它们之间的唯一区别是字段“Outcoming Task”，它从 1 开始一直到 10。

```
SELECT 
S1.[Main Project] AS Company, 
S1.[Main Link] AS Project, 
S1.[Name] AS Milestone, 
S1.[Start] AS MilestoneDueDate, 
S2.[Name] AS Successor, 
S2.[Start] AS SuccessorDueDate

FROM Sheet1 AS S1 INNER JOIN Sheet1 AS S2 ON S1.[Outcoming Task 1] = S2.[ID]

WHERE 
S1.Start >S2.[Start] AND 
S1.[%compl#] <> 100 AND 
(S1.[Task class] <> '***Sammelvorgang' AND S1.[Task class] <> '' AND  S1.[Task class] <> 'M D-Muster') AND 
(S2.[Task class] <> '***Sammelvorgang' AND S2.[Task class] <> '' AND  S2.[Task class] <> 'M D-Muster')

ORDER BY 
S1.[Main Project], 
S1.[Main Link], 
S1.[Name]; 
```

我创建它的原因是因为 DBA 没有为任务之间的连接创建表，而是创建了 10 个字段，例如 Outcoming Task 1、Outcoming Task 2 和 Outcoming Task 3 ......

是否可以将所有查询合并到一个查询中？各位大神可以给点建议吗？

信息：MS-ACCESS 2010

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:49:54.970

尝试类似下面的查询。我还认为，列名中的空格并不是最佳实践。

```
SELECT 
    S1.[Main Project] AS Company, 
    S1.[Main Link] AS Project, 
    S1.[Name] AS Milestone, 
    S1.[Start] AS MilestoneDueDate, 
    S2.[Name] AS Successor_Task1, 
    S2.[Start] AS SuccessorDueDate_Task1,

    S3.[Name] AS Successor_Task2, 
    S3.[Start] AS SuccessorDueDate_Task2,   

    ... 3, 4, 5, 6, 7, 8, 9, 10 ...

FROM 
    Sheet1 AS S1 
    LEFT JOIN Sheet1 AS S2 
        ON S1.[Outcoming Task 1] = S2.[ID]

    LEFT JOIN Sheet1 AS S3
        ON S1.[Outcoming Task 2] = S3.[ID]

    ... 3, 4, 5, 6, 7, 8, 9, 10 ...

WHERE 
    S1.Start >S2.[Start] AND 
    S1.[%compl#] <> 100 AND 
    (S1.[Task class] <> '***Sammelvorgang' AND S1.[Task class] <> '' AND  S1.[Task class] <> 'M D-Muster') AND 
    (S2.[Task class] <> '***Sammelvorgang' AND S2.[Task class] <> '' AND  S2.[Task class] <> 'M D-Muster') AND

    (S3.[Task class] <> '***Sammelvorgang' AND S3.[Task class] <> '' AND  S3.[Task class] <> 'M D-Muster')

    ... 3, 4, 5, 6, 7, 8, 9, 10 ...

ORDER BY 
    S1.[Main Project], 
    S1.[Main Link], 
    S1.[Name]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:56:15.233

听起来您可能想要一个 UNION 查询。这是一个简单的例子：

假设你有两张桌子

**[Table1]**
[ID] AutoNumber
[Outcoming Task 1] Numeric(Long Integer)
[Outcoming Task 2] Numeric(Long Integer)

有数据

```
ID  Outcoming Task 1  Outcoming Task 2  
--  ----------------  ----------------  
1   1                 2  
2   1                 3 
```

**[任务]**
[ID] 自动编号
[任务名称] 文本 (255)

有数据

```
ID  TaskName
--  --------
1   Task1
2   Task2
3   Task3 
```

查询

```
SELECT t1.[ID], 1 AS [Outcoming Task], t.[TaskName]
FROM [Table1] t1 INNER JOIN [Tasks] t ON t.[ID] = t1.[Outcoming Task 1]
UNION
SELECT t1.[ID], 2 AS [Outcoming Task], t.[TaskName]
FROM [Table1] t1 INNER JOIN [Tasks] t ON t.[ID] = t1.[Outcoming Task 2] 
```

会产生

```
ID  Outcoming Task  TaskName
--  --------------  --------
1   1               Task1
1   2               Task2
2   1               Task1
2   2               Task3 
```

# html - CSS在元素内添加元素？

> ID：15544870
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:33.463
> 
> 标签：html, css

我有 4 个元素“块”“button1”“button2”和“label”。

我希望该块通过 CSS 在其中包含按钮。这可以通过 HTML 来完成，如下所示：

```
<b class = "block">
   <g class="Label"> </g>
   <a class="button1"> </a>
   <a class="button2"> </a>
</b> 
```

但是如果在一页中完成 50 次会占用很多空间。

我想要一种用尽可能少的代码行来更改 button1,2 'href' 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:28:34.037

CSS 旨在修改页面的外观，而不是用于添加内容 - 尽管伪元素喜欢`:before`并且`:after`通常用于装饰目的（例如添加箭头或用于布局黑客）

您是否考虑过使用基于 JS 的方法？您可以遍历所有`.block`元素，然后在每个元素中插入标签和按钮。

基于 JS 的方法的一个示例是：（假设您使用的是 jQuery）

```
$(document).ready(function() {
    $(".block").each(function() {
        // Create elements to append
        var apnd = '<element></element>';

        // Append the created elements
        $(apnd).appendTo($(this));
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:34:40.213

我能想到实现这一点的唯一方法是使用参数化的 jQuery 函数，该函数添加或修改给定 CSS 类的每个按钮的“href”值（基于给定参数分配的 href 的微小变化 - 如果适合）。

抱歉，为了直接解决这个问题，我同意其他发帖者的观点，因为这不能单独使用 CSS 来实现。

# ruby-on-rails - 根据距离在 ruby on rails 中搜索的最佳方法

> ID：15544871
> 
> 赞同：0
> 
> 时间：2013-03-21T10:25:35.783
> 
> 标签：ruby-on-rails, ruby, search, geospatial

在 ror 中，假设我的数据库中有一个地理参考数据列表（每条记录都有纬度和经度列）实现按距离搜索功能的最佳方法是什么？

我知道用于 ruby​​ 的 geokit。但我正在寻找其他建议。如果它依赖于平台，我计划使用 heroku 作为部署平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:39:05.397

使用 gem 地理编码器。

如[文档](http://rubydoc.info/gems/geocoder/1.1.6/frames)中所述-

> Geocoder 是一个完整的 Ruby 地理编码解决方案。借助 Rails，它添加​​了地理编码（按街道或 IP 地址）、反向地理编码（根据给定坐标查找街道地址）和距离查询。就像在对象上调用地理编码一样简单，然后使用 Venue.near("Billings, MT") 之类的范围。

使用地理编码对象，您可以执行以下操作：

```
if obj.geocoded?
  obj.nearbys(30)                      # other objects within 30 miles
  obj.distance_from([40.714,-100.234]) # distance from arbitrary point to object
  obj.bearing_to("Paris, France")      # direction from object to arbitrary point
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:38:24.053

你检查[过 ruby​​geocoder gem](http://www.rubygeocoder.com/)吗？

阅读有关[距离查询的信息](https://github.com/alexreisner/geocoder#location-aware-database-queries)

以下是[ryan 的精彩截屏视频](http://railscasts.com/episodes/273-geocoder)

# c# - 使用表达式的实际意义 在有委托的方法中

> ID：15544878
> 
> 赞同：0
> 
> 时间：2013-03-21T10:26:02.510
> 
> 标签：c#, delegates, implementation

使用`Linq.Expression<T>`类型，我们可以以编程方式定义 AST 以供以后评估和/或执行。

但实际上，以这种方式定义方法签名的含义是什么：

```
public void SomeMethod1(Func<bool> func) { ... } // 1. 
```

代替

```
public void SomeMethod2(Expression<Func<bool>> expr) { ... } // 2. 
```

很明显，我们得到结果的方式`Func<bool>`有：

```
var result = func(); // 1. 
```

至

```
var func = expr.Compile() // 2.
var result = func(); 
```

在原始实践层面，调用也是类似的：

```
SomeMethod1(() => true); // A.
SomeMethod1(() => AMethodReturnsABool()); // B.
SomeMethod1(AMethodReturnsABool); // C. 
```

不同之`SomeMethod2`处在于编译级别不接受*方法组*语法：

```
//SomeMethod2(AMethodReturnsABool); // -> don't compile 
```

当我需要使用标准委托定义签名`Action<T,...>`或`Func<T,..>`何时应该在`Expression<T>`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T07:05:01.180

简单的。如果您不需要访问 LINQ 表达式的 AST，请使用已编译（匿名委托）版本。

我认为您可能需要访问 AST 的情况：

*   将 AST 转换为其他内容，例如 SQL where 子句。
*   分析编写代码的一些属性。
*   以编程方式构建委托。例如，根据一些用户输入构建 Expression<T> 对象。这可以省去使用 IL 翻译器编写自己的 AST 的麻烦。
*   将数据访问层抽象为能够使用 LinqToSQL 或具有相同 LINQ 查询规范的简单内存列表。

简而言之，如果你不需要 Expression<T>，就不要使用 Expression<T>。

# solr - 使用 CloudSolrServer 作为 SolrJ 客户端

> ID：15544880
> 
> 赞同：2
> 
> 时间：2013-03-21T10:26:04.447
> 
> 标签：solr, solrj, solrcloud

我的问题是当我们使用 CloudSolrServer 时，我们指定了单个 zkHost 地址和 LBHttpSolrServer。现在 CloudSolrServer 确实从 zookeeper (zkHost) 中提取有关活动和死节点的信息并为请求提供服务。但是，如果 zkHost 指定为它自己的参数怎么办？我认为 CloudSolrServer 应该接受一个以上的 zkHost，就像 LBHttpSolrServer 一样，它接受一个以上的 solr 服务器 url。

任何的想法 ？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T16:51:32.750

据此：[http ://comments.gmane.org/gmane.comp.jakarta.lucene.solr.user/71075](http://comments.gmane.org/gmane.comp.jakarta.lucene.solr.user/71075)

你可以在你的 ensemble 中传递一个逗号分隔的 Zk 地址列表，例如：

zk1:2181,zk2:2181,zk3:2181 等

# ios6 - 谷歌地图sdk标注问题ios6

> ID：15544885
> 
> 赞同：0
> 
> 时间：2013-03-21T10:26:19.680
> 
> 标签：ios6, google-maps-sdk-ios

我在我的项目中使用 googlemap sdk for ios 6 我面临的问题是标记选项

```
GMSMarkerOptions *londonOptions = [[GMSMarkerOptions alloc] init];
londonOptions.position = CLLocationCoordinate2DMake(51.500,-0.127);
londonOptions.title = nil;
londonOptions.snippet = nil;
[mapView_ addMarkerWithOptions:londonOptions]; 
```

谷歌表示，如果我将标题和片段设置为 nil，那么如果我点击它，标记将不会显示标注。

但它确实显示了点击它的标注。

有没有人遇到过这个问题提前谢谢Nitesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:52:59.910

我通过返回一个空的 uiview 来解决它 :) 但正如分享所说，它现在已修复

# android - Android 严格模式

> ID：15544886
> 
> 赞同：3
> 
> 时间：2013-03-21T10:26:21.637
> 
> 标签：android, android-asynctask, android-strictmode

我已经使用`AsyncTask`. 我只是在中显示响应`TextView`。我不知道是对是错。它在 GingerBread 上工作并`NetworkOnMainThreadException`在 JellyBean 上展示。如果我使用`StrictMode`它，它会在 JellyBean 上工作并在 GingerBread 上强制关闭。如何编写支持Android 3.0 以上和Android 3.0 以下的代码。

```
public class MainActivity extends Activity {
TextView tv;
Button b;
InputStream is = null;

DefaultHttpClient client;
HttpGet get;
HttpResponse response;
HttpEntity entity;
StringBuffer buffer;

@SuppressLint("NewApi")
@TargetApi(Build.VERSION_CODES.GINGERBREAD)
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
  //    StrictMode.setThreadPolicy(policy);
    tv = (TextView) findViewById(R.id.texty);
    b = (Button) findViewById(R.id.buttonGET);

    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            MyOperation mytask = new MyOperation();
            mytask.execute();
        }
    });

}

private class MyOperation extends AsyncTask<String, Void, String> {
    ProgressDialog dialog = new ProgressDialog(MainActivity.this);

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog.setMessage("Loading...");
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        client = new DefaultHttpClient();
        get = new HttpGet("http://www.google.com");
        try {
            response = client.execute(get);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        entity = response.getEntity();

        try {
            is = entity.getContent();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub

        super.onPostExecute(result);
        dialog.dismiss();
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(is));
        StringBuffer buffer = new StringBuffer();
        String line = null;
        do {
            try {
                line = reader.readLine();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            buffer.append(line);
        } while (line != null);
        tv.setText(buffer);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:32:36.133

```
 public class MainActivity extends Activity {
     TextView tv;
    Button b;
    InputStream is = null;

    DefaultHttpClient client;
    HttpGet get;
    HttpResponse response;
HttpEntity entity;
StringBuffer buffer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //StrictMode.ThreadPolicy policy = new 
  //    StrictMode.setThreadPolicy(policy);
    tv = (TextView) findViewById(R.id.texty);
    b = (Button) findViewById(R.id.buttonGET);

    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            MyOperation mytask = new MyOperation();
            mytask.execute();
        }
    });

}

private class MyOperation extends AsyncTask<String, Void, String> {
    ProgressDialog dialog = new ProgressDialog(MainActivity.this);

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        dialog.setMessage("Loading...");
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
StringBuffer buffer = new StringBuffer();
        // TODO Auto-generated method stub
        client = new DefaultHttpClient();
        get = new HttpGet("http://www.google.com");
        try {
            response = client.execute(get);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        entity = response.getEntity();

        try {
            is = entity.getContent();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    BufferedReader reader = new BufferedReader(
                new InputStreamReader(is));

        String line = null;
        do {
            try {
                line = reader.readLine();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            buffer.append(line);
        } while (line != null);

        return buffer.tostring();
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub

        super.onPostExecute(result);
        dialog.dismiss();

        tv.setText(result);
    }}

} 
```

否则你正在主线程中运行读取行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:29:01.930

使 InputStream`is`和 Entity`entity`局部字段变量`doInBackground()`作为结果返回您想要在 TextView 上设置的字符串......然后`onPostExecute()`您只需获得结果（字符串）并将其直接设置在 TextView 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:32:58.150

您应该在 doInBackground 函数中读取 inputStream 数据，而不是在 onPostExecute 中。因此在 doInBackground 中构造 StringBuffer 将所有行附加到它并返回 StringBuffer.toString 作为结果。在 onPostExecute 你会得到什么字符串作为参数。

# asp.net - 我怎样才能只获取 2 种类型的文件？

> ID：15544887
> 
> 赞同：1
> 
> 时间：2013-03-21T10:26:21.990
> 
> 标签：asp.net, directory

代码：

```
string[] arrFileEntries = Directory.GetFiles(MapPath("..\\Pictures\\"), "*.jpg", "*.png"); 
```

错误：

与重载方法 System.IO.Directory.GetFiles (string, string, System.IO.SearchOption) 最接近的匹配有一些无效参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:33:15.420

You try below code using linqu:-

```
var files = Directory.GetFiles(MapPath("..\\Pictures\\"), "*.*", SearchOption.AllDirectories)
            .Where(s => s.EndsWith(".jpg") || s.EndsWith(".png")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:35:36.930

尝试以下.......获取两个数组中的数据并将它们合并

```
string[] array1 = Directory.GetFiles(@"C:\", "*.jpg");
 string[] array2 = Directory.GetFiles(@"C:\", "*.png");

 string[] newArray = new string[array1.Length + array2.Length];
 Array.Copy(array1, newArray, array1.Length);
 Array.Copy(array2, 0, newArray, array1.Length, array2.Length); 
```

# php - 处理 PHP 中的区域货币变化 - 例如句号与逗号的不同用法

> ID：15544890
> 
> 赞同：1
> 
> 时间：2013-03-21T10:26:31.653
> 
> 标签：php, mysql, regex

我很确定这应该比我做的更容易。我有一个客户，他的网站向企业和个人提供贷款。

问题在于验证人们输入的金额。我需要去掉货币符号，在整个单位之后丢失任何东西（在大多数情况下是英镑 - 所以丢失便士）并将最终数字转换为可以作为 Double 存储在第三方数据库表中的格式。

上面的内容主要是有效的——除了现在我们让用户混合千位分隔符和小数分隔符，所以需要弄清楚是否有人打算将句号设为千位分隔符或小数位分隔符。

有人有聪明的解决方案吗？正则表达式是路线吗？

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:45:10.500

我会这样做（假设您的输入没问题，没有像“$6,00,00”或“777.7.98,$8938”或“嗨妈妈”这样的无效输入）：

1.  找到货币符号并将其剥离，它可以在开头或结尾，并且可以是多个字符，例如“USD”，“CHF”等。
2.  查看是否有小数点分隔符（右起第三个字符），如果没有，则在末尾添加“00”（如乘以 100）
3.  删除所有空格，所有逗号，所有点，所有`'`- 我认为没有其他东西可以是千位/小数分隔符，或者只留下数字
4.  结果除以 100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:51:06.040

```
 function currencyToDouble($input) {
    if(preg_match("/^(.*)[^0-9]([0-9]{1,2})$/", $input, $matches)) {
        $val = preg_replace("/[^0-9]/", "", $matches[1]) . '.' . $matches[2] . "\n\n";
    } else {
        $val = preg_replace("/[^0-9]/", "", $input) . "\n\n";
    }

    return floatVal($val);

} 
```

是我的最终解决方案，似乎很好地处理了我所有的测试用例。想法？

# android - Android Epub 单片机库 Zoom In 缩小？

> ID：15544891
> 
> 赞同：1
> 
> 时间：2013-03-21T10:26:33.003
> 
> 标签：android

我正在为 android 应用程序开发 epub 阅读器。如何使用 monocle library 实现 webview 的放大、缩小功能？

请向我建议可能的解决方案。

# ios - 每次我的应用从后台返回时，我都需要向方法发送消息

> ID：15544899
> 
> 赞同：2
> 
> 时间：2013-03-21T10:27:01.130
> 
> 标签：ios, objective-c, avfoundation

我正在使用最新的 SDK 开发一个 iOS 应用程序。

这是一个全屏应用程序。

我有一个方法`viewWillAppear`，每次应用程序来自后台时都必须调用它。

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self setUpVideo];
} 
```

我`setUpVideo`设置了，`AVCaptureVideoPreviewLayer`因为当应用程序从后台返回时我丢失了视频。

正如我所读到的，`viewWillAppear`当应用程序从后台返回时不会调用它，现在，我不知道将代码放在哪里。

在这个[问题](https://stackoverflow.com/questions/5277940/why-does-viewwillappear-not-get-called-when-an-app-comes-back-from-the-backgroun)上，[oculus](https://stackoverflow.com/users/348476/occulus)建议使用`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doMyLayoutStuff:) name:UIApplicationDidChangeStatusBarFrameNotification object:nil];`，但它对我不起作用。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setUpVideo:) name:UIApplicationDidChangeStatusBarFrameNotification object:nil];
} 
```

**有什么建议吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:30:28.277

`UIApplicationWillEnterForegroundNotification`改为观察。

```
- (void)viewDidAppear {
    [super viewDidAppear];
    [[NSNotificationCenter defaultCenter] addObserver:self 
              selector:@selector(enterForeground:) 
              name:UIApplicationWillEnterForegroundNotification 
              object:nil];
    // ...
}

- (void)enterForeground:(NSNotification *)notification {
    // do stuff
} 
```

不要`viewWillAppear:`直接从`enterForeground:`方法调用。`viewWillAppear:`而是将所有必需的代码移动到一个单独的方法中，并从和中调用它`enterForeground:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:30:33.890

```
applicationWillEnterForeground will trigger when app comes from background

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
} 
```

此外，您可以 `UIApplicationDidBecomeActiveNotification`用于触发某些方法

```
[[NSNotificationCenter defaultCenter] addObserver: self
                                             selector: @selector(handleMethod:)
                                                 name: UIApplicationDidBecomeActiveNotification
                                               object: [UIApplication sharedApplication]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:29:55.077

尝试从 `- (void)applicationDidBecomeActive:(UIApplication *)application`AppDelegate 发布此通知（或观察更好的相应通知）

# c# - 在新窗口中刷新数据网格 c# WPF MVP 模式

> ID：15544905
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:19.543
> 
> 标签：c#, visual-studio-2010, wpfdatagrid, mvp

大家好，我将 Visual Studio 2010 与 WPF 和 C# 与模型视图演示者模式一起使用。

不过我有一些问题。我有一个搜索功能，它根据用户插入的一些标准过滤我的可观察集合：

```
 public void Search(string criteria)
    {
        if (!string.IsNullOrEmpty(criteria) && criteria.Length > 2)
        {
            var rez = from ua in _listAdress
                      where ua.Naziv.ToUpper().IndexOf(criteria.ToUpper()) >= 0 || ua.InventurniBroj.ToString() == criteria
                      select ua;

            //var rez = from ua in _listAdress
            //          where ua.Naziv.ToUpper() == criteria.ToUpper() || ua.InventurniBroj.ToString() == criteria
            //          select ua;

            //ListAdress = new ObservableCollection<Adress>(_adressRepository.FindByLookup(criteria));
            UbrzajAdress = new ObservableCollection<Adress>(rez);

            StatusText = string.Format("{0} zaduzenih pronađeno.", UbrzajAdress.Count);
        }
        else
        {
            //ListAdress = new ObservableCollection<Adress>(_adressRepository.ListOprema());
            var rez = from ua in _listAdress
                      select ua;

            UbrzajAdress = new ObservableCollection<Adress>(rez);
            StatusText = "Prikaz svih zaduzenih.";

        }

        for (int i = 0; i < this.View.tabs.Items.Count; i++)
        {

            OpremaListView tab = (OpremaListView)this.View.tabs.Items[i];
            if (tab != null && tab.Name != null && tab.Name.Equals("Sva Oprema")) 
            //if (tab.Header.Equals("Sva Oprema"))
            {
                OpremaListView opremaListView = (OpremaListView)tab.Content;
                OpremaListPresenter opremaListPresenter = opremaListView.Presenter;

                opremaListPresenter.refresh();
            }

        }
    } 
```

这是刷新方法：

```
public void refresh()
    {
        this.View.dg.ItemsSource = _applicationPresenter.UbrzajAdress;
    } 
```

现在这一切都有效。但是，这是一个标签。这就是我的大部分应用程序的结构。不幸的是，由于大量数据和选项卡在我的应用程序中的运行速度比新窗口慢得多，因此我最大的列表显示在 WPF 数据网格的新窗口中。

现在，当我尝试更改搜索以升级窗口时，即使它编译我也没有刷新，所以当我输入新行，然后搜索该行时，它不会显示。

这是我尝试更改的搜索，因此它适用于窗口：

```
public void Search(string criteria)
    {
        if (!string.IsNullOrEmpty(criteria) && criteria.Length > 2)
        {
            var rez = from ua in _listAdress
                      where ua.Naziv.ToUpper().IndexOf(criteria.ToUpper()) >= 0 || ua.InventurniBroj.ToString() == criteria
                      select ua;

            //var rez = from ua in _listAdress
            //          where ua.Naziv.ToUpper() == criteria.ToUpper() || ua.InventurniBroj.ToString() == criteria
            //          select ua;

            //ListAdress = new ObservableCollection<Adress>(_adressRepository.FindByLookup(criteria));
            UbrzajAdress = new ObservableCollection<Adress>(rez);

            StatusText = string.Format("{0} zaduzenih pronađeno.", UbrzajAdress.Count);
        }
        else
        {
            //ListAdress = new ObservableCollection<Adress>(_adressRepository.ListOprema());
            var rez = from ua in _listAdress
                      select ua;

            UbrzajAdress = new ObservableCollection<Adress>(rez);
            StatusText = "Prikaz svih zaduzenih.";

        }

        for (int i = 0; i < this.View.tabs.Items.Count; i++)
        {

            TestWindow tab = (TestWindow)this.View.tabs.Items[i];
            if (tab != null && tab.Title != null && tab.Title.Equals("Sva Oprema")) 
            //if (tab.Header.Equals("Sva Oprema"))
            {
                TestWindow opremaListView = (TestWindow)tab.Content;
                TestWindowPresenter opremaListPresenter = opremaListView.presenter;

                opremaListPresenter.refresh();
            }

        }
    } 
```

这会编译，但不会刷新或执行任何操作。刷新是：

```
public void refresh()
    {

        this.View.dg.ItemsSource = _applicationPresenter.UbrzajAdress;

    } 
```

另一个有趣的事情是，如果我在添加新项目之前搜索一个项目，然后显示所有 oprema，通过删除搜索文本框中的所有内容然后单击搜索，程序崩溃并出现错误： Invalid Cast Exception is unhandled Unable to cast “System.Windows.Controls.TabItem”类型的对象键入“Inventar.Views.OpremaListView”。

我猜这与程序中没有打开选项卡有关，因此它失败了，但我不知道如何解决它，任何帮助将不胜感激。无论如何，我只是不明白该怎么做，正在寻找我能得到的任何帮助。谢谢

# iphone - 向我解释一下不同 iOS 设备中的自动调整大小问题？

> ID：15544906
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:19.733
> 
> 标签：iphone, ios

我在 iPhone 应用程序开发中遇到自动调整大小的问题`CGRectMake`。谁能解释一下？

```
CGRect imgframe=CGRectMake(0, 0, 320, 283);
UIImageView *imgview=[[UIImageView alloc]initWithFrame:imgframe];
 KMAppDelegate *app=(KMAppDelegate *)[[UIApplication sharedApplication]delegate];
 [imgview setAutoresizingMask:UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight];
imgview.image=[UIImage imageNamed:app.imgString]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:43:05.933

你试试这个代码..它可能会帮助你..

```
 imgview =[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 283)];
    KMAppDelegate *app=(KMAppDelegate *)[[UIApplication sharedApplication]delegate];
 [imgview setAutoresizingMask:UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight];
imgview.image=[UIImage imageNamed:app.imgString];
    imgview.contentMode = UIViewContentModeScaleAspectFit; 
```

享受编码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:47:47.367

```
 CGRect imgframe=CGRectMake(0, 0, 320, 283);
    UIImageView *imgview=[[UIImageView alloc]initWithFrame:imgframe];
    KMAppDelegate *app=(KMAppDelegate *)[[UIApplication sharedApplication]delegate];
    [imgview setAutoresizingMask:UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight];
    imgview.image=[UIImage imageNamed:app.imgString];
    imgview.contentMode = UIViewContentModeScaleAspectFit;
    [[self view] addSubview:imgview] ; 
```

# c# - 添加 toastr javascript asp.net webform

> ID：15544908
> 
> 赞同：13
> 
> 时间：2013-03-21T10:27:26.550
> 
> 标签：c#, javascript, jquery, toastr

我正在尝试在使用按钮提交表单后显示 toastr 消息（信息、错误等）并更新 asp.net webform 中的 gridview 控件（位于更新面板中）。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T13:31:49.577

您可以使用`Page.ClientScript.RegisterStartupScript`方法来做到这一点。例子：

```
Page.ClientScript.RegisterStartupScript(this.GetType(),
    "toastr_message", "toastr.error('There was an error', 'Error')", true); 
```

但我可能会创建一个方法或扩展方法来为我处理它：

```
public static void ShowToastr(this Page page, string message, string title, string type = "info")
{
    page.ClientScript.RegisterStartupScript(page.GetType(), "toastr_message",
          String.Format("toastr.{0}('{1}', '{2}');", type.ToLower(), message, title), addScriptTags: true);
} 
```

利用：

```
ShowToastr(this.Page, "Hello world!", "Hello"); 
```

如果你想要一些更健壮的东西，你可以将`type`参数设置为`enum`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-30T14:23:14.330

从 Web 表单调用，（注意这是一个 MasterDetail 表单，所以有一个 MasterPage。

MasterPage.ShowToastr(Page, "Message Here", "Title Here", "Info", False, "toast-bottom-full-width", False)

母版页 (VB) 中的 VB.NET ShowToastr 实现

```
Public Shared Sub ShowToastr(ByVal page As Page, ByVal message As String, ByVal title As String, Optional ByVal type As String = "info", Optional ByVal clearToast As Boolean = False, Optional ByVal pos As String = "toast-top-left", Optional ByVal Sticky As Boolean = False)
    Dim toastrScript As String = [String].Format("Notify('{0}','{1}','{2}', '{3}', '{4}', '{5}');", message, title, type, clearToast, pos, Sticky)
    page.ClientScript.RegisterStartupScript(page.[GetType](), "toastr_message", toastrScript, addScriptTags:=True)
End Sub 
```

Javascript 函数 ShowToastr 作为共享函数驻留在母版页中。

```
 <link href="./Media/css/Grey/ListBox.Grey.css" rel="stylesheet" type="text/css" />
<link href="./Media/css/WebTrack.css" rel="stylesheet" type="text/css" />

<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/css/toastr.css"
    rel="stylesheet" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.0.1/js/toastr.js"
    type="text/javascript"></script>

<script language="javascript" type="text/javascript">
    function Notify(msg, title, type, clear, pos, sticky) {
        //        toastr.options.positionClass = "toast-bottom-right";
        //        toastr.options.positionClass = "toast-bottom-left";
        //        toastr.options.positionClass = "toast-top-right";
        //        toastr.options.positionClass = "toast-top-left";
        //        toastr.options.positionClass = "toast-bottom-full-width";
        //        toastr.options.positionClass = "toast-top-full-width";
        //        options = {
        //            tapToDismiss: true,
        //            toastClass: 'toast',
        //            containerId: 'toast-container',
        //            debug: false,
        //            fadeIn: 300,
        //            fadeOut: 1000,
        //            extendedTimeOut: 1000,
        //            iconClass: 'toast-info',
        //            positionClass: 'toast-top-right',
        //            timeOut: 5000, // Set timeOut to 0 to make it sticky
        //            titleClass: 'toast-title',
        //            messageClass: 'toast-message' }

        if (clear == true) {
            toastr.clear();
        }
        if (sticky == true) {
            toastr.tapToDismiss = true;
            toastr.timeOut = 10000;
        }

        toastr.options.onclick = function() {
            //alert('You can perform some custom action after a toast goes away');
        }
        //"toast-top-left";
        toastr.options.positionClass = pos;
        if (type.toLowerCase() == 'info') {
            toastr.options.timeOut = 1000;
            toastr.tapToDismiss = true;
            toastr.info(msg, title);
        }
        if (type.toLowerCase() == 'success') {
            toastr.options.timeOut = 1500;
            toastr.success(msg, title);
        }
        if (type.toLowerCase() == 'warning') {
            toastr.options.timeOut = 3000;
            toastr.warning(msg, title);
        }
        if (type.toLowerCase() == 'error') {
            toastr.options.timeOut = 10000;
            toastr.error(msg, title);
        }
    }
</script> 
```

> 我希望这对某人有所帮助，因为我多年来一直尝试将 toastr 选项集成到一个电话中。如果您想在调用 toastr 时有更多可用选项，请向函数添加更多参数。所有可以设置的选项都在注释代码（javascript）中。

# core-graphics - 为什么 CoreGraphics FillPath 不填充指定路径

> ID：15544913
> 
> 赞同：2
> 
> 时间：2013-03-21T10:27:33.417
> 
> 标签：core-graphics, xamarin.ios

我有一些 Xamarin.iOS CoreGraphics 代码，在不同角度的几条白线的末端绘制红色三角形。

![在此处输入图像描述](../Images/5e5c8b784f98e2efef0be2f4932a2f72.png)

我想要填充红色三角形而不是渲染为轮廓，但是当我使用图形上下文命令 FillPath() 而不是 StrokePath() 时，红色三角形不会出现。

![在此处输入图像描述](../Images/36b8fd9675dd88478e6b703688bf4a8f.png)

这是 DrawArrowHead 代码（在绘制每条线后由线条绘制代码调用）。

```
private void DrawArrowHead(PointF[] line, int size)
{
    // Create the arrowhead and the lines from individual arrowhead points
    PointF[] arrowhead = new PointF[] {
        new PointF(0.0f - size, 0.0f),
        new PointF(0.0f, 0.0f - size),
        new PointF(0.0f + size, 0.0f)
    };

    PointF[] line1 = new PointF[] {new PointF(arrowhead[0].X, arrowhead[0].Y), new PointF(arrowhead[1].X, arrowhead[1].Y)};
    PointF[] line2 = new PointF[] {new PointF(arrowhead[1].X, arrowhead[1].Y), new PointF(arrowhead[2].X, arrowhead[2].Y)};
    PointF[] line3 = new PointF[] {new PointF(arrowhead[2].X, arrowhead[2].Y), new PointF(arrowhead[0].X, arrowhead[0].Y)};

    // Begin drawing the arrowhead
    gctx.SaveState();

    UIColor.Red.SetStroke();
    gctx.SetFillColor(UIColor.Red.CGColor);

    gctx.BeginPath();

    double angleInRadians = Math.Atan2 (line[0].Y - line[1].Y, line[0].X -line[1].X);

    gctx.TranslateCTM(line[1].X, line[1].Y);
    gctx.RotateCTM((float)(angleInRadians -  Math.PI / 2));

    path.AddLines(line1);
    path.AddLines(line2);
    path.AddLines(line3);

    path.CloseSubpath();

    gctx.AddPath(path);

    gctx.StrokePath();

    gctx.RestoreState();
} 
```

当我用 gctx.FillPath() 替换 gctx.StrokePath() 时，我得到白线但没有箭头。

![在此处输入图像描述](../Images/1472a3f3cb0e9e2bafa89465d78ec144.png)

当我用 gctx.DrawPath(CGPathDrawingMode.FillStroke) 替换 gctx.StrokePath() 时，我得到了红色三角形，但它们没有被填充。

![在此处输入图像描述](../Images/03ee95c6921e5269ed89056d62284c2b.png)

我敢肯定，我错过了一些简单的事情。提前致谢。

```
Update - 03.22.13 
```

事实证明@poupou 的回答是正确的，但是，再加上我的一些其他编码“误解”，并没有立即解决我的问题。但是，由于它为我指明了解决方案的正确方向，所以我接受了他的回答。

[我首先通过 Mike Bluestein在 MonoTouch 中使用 CoreGraphics 绘制](http://mikebluestein.wordpress.com/2010/02/21/drawing-with-coregraphics-in-monotouch-2/)的出色文章学习了如何使用 CoreGraphics 。然而，一点知识是一件危险的事情，当我开始将这些概念应用到我自己的工作中时，我无意中混合了不应该的图形上下文和路径方法。

经过大量的谷歌搜索、阅读和审查其他人的 CoreGraphics 源代码（Xamarin 的 Nina Vyedin 和 Bryan Costanich 的绘图[示例](https://github.com/xamarin/monotouch-samples/tree/master/Drawing)的道具），我想出了一个有效的 DrawArrowhead 方法。

```
private void DrawArrowHead(PointF[] line, int size)
{
    gctx.SaveState();
    UIColor.Red.SetStroke();
    UIColor.Red.SetFill();
    double angleInRadians = Math.Atan2 (line[0].Y - line[1].Y, line[0].X -line[1].X);

    gctx.BeginPath();
    gctx.TranslateCTM(line[1].X, line[1].Y);
    gctx.RotateCTM((float)(angleInRadians -  Math.PI / 2));

    PointF[] arrowhead = new PointF[] {
        new PointF (0.0f - arrowHeadSize, 0.0f),
        new PointF (0.0f, 0.0f - arrowHeadSize),
        new PointF (0.0f + arrowHeadSize, 0.0f)
    };

    gctx.MoveTo(arrowhead[0].X, arrowhead[0].Y);
    gctx.AddLineToPoint(arrowhead[1].X, arrowhead[1].Y);
    gctx.AddLineToPoint(arrowhead[2].X, arrowhead[2].Y);

    gctx.ClosePath();                   
    gctx.DrawPath(CGPathDrawingMode.FillStroke);                                   
    gctx.RestoreState();
} 
```

这是最终结果。

![在此处输入图像描述](../Images/22ff50fce7e27010e3768eda46d5226f.png)

注意：我必须将 DrawArrowHead 代码从它的方法中移出并移到 UIView 的 Draw 方法中，以避免在绘制第二、第三、第四和第五行/箭头组合时出现 Invalid Context 错误（您可以[在此处](https://stackoverflow.com/questions/7932654/invalid-context-0x0-error-when-using-cgcontext-functions)阅读有关该类型错误的信息） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:42:24.940

调用`path.CloseSubpath();`a`CGPath`与调用`gctx.ClosePath();`a不同`CGContext`（将在其中完成描边/填充）。你试过后面的吗？

# osgi - 无法在 CQ5 中发布捆绑包

> ID：15544916
> 
> 赞同：2
> 
> 时间：2013-03-21T10:27:36.767
> 
> 标签：osgi, aem

我使用[此处给出](http://dev.day.com/docs/en/crx/current/developing/development_tools/developing_with_crxde.html#Managing%20a%20Bundle)的教程创建了一个简单的 OSGi 包。该捆绑包在作者实例中运行良好，并且在 felix 控制台中也可见 ( `http://localhost:4502/system/console/bundles`)

但是，即使在多次尝试发布捆绑包后，它在发布实例中仍然不可用。我试过发布是在一个包中，直接在树激活页面中

我使用以下属性使其在作者实例中工作：

```
Export-Package: *
Import-Package: *
Private-Package: * 
```

请指教。！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:18:45.723

不确定“发布捆绑包”是什么意思。

如果您已通过将捆绑包复制到 CQ5 作者系统的 JCR 存储库（例如在 /apps/yourapp/install 下）来安装捆绑包，这是推荐的方式，您应该能够将该安装文件夹复制到您的发布实例，所以捆绑在那里被激活。

当然，只有在发布实例上可用捆绑包所需的任何依赖项时，这才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:45:59.503

AFAIK，没有直接的方法可以将包从作者发布到发布环境。您需要在发布实例 felix 控制台 ( `http://localhost:4503/system/console/bundles`)中上传捆绑包的 JAR 文件

JAR 文件将在`/apps/<site-name>/install`目录中可用。如果您有权访问，CQ5 论坛在[此链接上有解决方案](http://forums.adobe.com/message/5071606)

希望它有效...

# c# - 使用 xpath 和 html 敏捷性从 div 标签中循环出值

> ID：15544917
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:39.767
> 
> 标签：c#, xpath, html-parsing, html-agility-pack

我正在尝试抓取一个网站。一个比较站点，其中多次存在一个 div 标签类，所以我会从每个 div 标签中循环出信息，以便在我的“div”列表项中得到类似的东西：

“电话”：5432432423

“邮政编码”：34234

```
 <div class="biz_list">
            <div data-id="39856" class="heart hgraysprite sprite evt_favorite"></div>

            <div class="biz_evals right string_11" style="margin-top: 15px;">

            <span class="star_blanksprite sprite" title="4.5 av 5"><span class="star_wholesprite sprite rate45"></span></span>
            Snittkarakter 4.5<br>av 18 Evalueringer

            </div>
            <div class="biz_info">
                <h3><a href="/profil/39856/r%C3%B8r-service/">Rør Service</a></h3>
                <table class="string_14">
                    <tbody><tr>
                       <td>Postadr.:</td> 
                       <td class="tab_space">Korssund, 6964 Korssund</td> 
                    </tr>

            <tr>
                <td>Telefon:</td> 
                <td class="tab_space">577 37 648</td>
            </tr>

            <tr>
                <td>Mobil:</td> 
                <td class="tab_space">992 93 595</td>
            </tr>

                </tbody></table>
             </div>
        </div> 
```

我的代码

```
List<string> div = new List<string>();

        foreach (HtmlNode td in root.SelectNodes("//div[@class='biz_info']"))
        {
            string att = td.InnerText;
            string trimaatt = att.Trim();
            div.Add(trimaatt);
        } 
```

# java - 将 javaagent 用于托管在 tomcat 中的特定应用程序

> ID：15544918
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:40.117
> 
> 标签：java, tomcat, profiling, javaagents

我有一个包含 premain 类的 xyz.jar 文件，用于获取文本文件中 Java 应用程序的执行时间。我有一个托管在 Tomcat 服务器中的 web 应用程序（比如 myapp.war），我需要使用这个 javaagent。我尝试放入`"SET JAVA_OPTS=%JAVA_OPTS% -javaagent:/C:/xyz.jar"`catalina.bat。我启动了服务器，但找不到所需的输出。

# ios - 点击了 FBLoginView 按钮 > 显示 HUD？

> ID：15544920
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:44.813
> 
> 标签：ios, facebook, ios6

当用户点击用户 FBLoginView 并且 Facebook SDK 连接到 iOS 6 中的服务器时，是否可以显示 MBPorogressView？

# mysql - MySQL 列中的月份名称

> ID：15544922
> 
> 赞同：2
> 
> 时间：2013-03-21T10:27:49.753
> 
> 标签：mysql

我有一个名为`fee`. 里面的值`fee`是这样的： `Jan,Feb,Mar`或`Jan,Feb`

...这意味着支付了 1 月至 3 月的费用（第 2 个示例支付了 1 月至 2 月的费用）。

我该如何计算这些费用已支付的月数？IE。对于第一个示例，我希望在第二个示例中获得 3 和 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:35:28.907

如果月份总是由 3 个字符表示，也许你可以使用

```
SELECT FLOOR((length(fee)+1)/4) FROM table_name; 
```

我们将月数表示为*n*，请注意逗号的数量比*n*少 1 ，因为字符串末尾没有一个。所以这个字段的长度，即“费用”可以表示为 3*n + (n-1)，表示为*N*，所以我们可以将*N*加 1除以 4。地板向下四舍五入得到最接近的整数。在这种情况下可以删除。

```
SELECT　length(fee)+1)/4 FROM table_name; 
```

会得到正确答案，length() 是一个返回字符串长度的函数。

# mysql - MySQL 查询 - 每个订单的平均行数，每月

> ID：15544925
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:54.233
> 
> 标签：mysql

我有一张显示以前订单的表格。
购买的每件商品都作为单独的行添加到表格中，请参见下面的转储。

我的目标是每月显示每个订单的平均行数。要获得平均行数，我需要将购买的商品数量除以所下订单的数量。

我的查询目前给了我每月的总数，并`line_count`返回正确的购买物品数量，但我似乎无法返回所下订单的数量（在下面的转储中应该给出 13 个）。我已经尝试添加各种子查询，但我不知道该怎么做。有任何想法吗？

```
SELECT 
date, 
COUNT(orderno) AS line_count 
FROM `orders` 
AND 
date BETWEEN '2010-01-21' AND CURDATE() 
GROUP BY month(date), year(date) 
ORDER BY date 
```

这是表模式（为清楚起见进行了简化）

```
CREATE TABLE IF NOT EXISTS `orders` (
`id` int(11) NOT NULL AUTO_INCREMENT,
  `orderno` varchar(15) COLLATE utf8_unicode_ci NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=22904 ;

--
-- Dumping data for table `orders`
--

INSERT INTO `orders` (`id`, `orderno`, `date`) VALUES
(1, 'rad10000', '2010-01-21'),
(2, 'rad10000', '2010-01-21'),
(3, 'rad10001', '2010-01-21'),
(4, 'rad10001', '2010-01-21'),
(5, 'rad10002', '2010-01-21'),
(6, 'rad10003', '2010-01-21'),
(8, 'rad10003', '2010-01-21'),
(9, 'rad10003', '2010-01-21'),
(10, 'rad10004', '2010-01-22'),
(11, 'rad10004', '2010-01-22'),
(12, 'rad10005', '2010-01-22'),
(13, 'rad10005', '2010-01-22'),
(14, 'rad10006', '2010-01-22'),
(15, 'rad10007', '2010-01-22'),
(16, 'rad10008', '2010-01-22'),
(17, 'rad10009', '2010-01-22'),
(18, 'rad10010', '2010-01-22'),
(19, 'rad10011', '2010-01-22'),
(20, 'rad10012', '2010-01-22'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:25:00.427

我懂了...

```
 SELECT YEAR(date)
      , MONTH(date) 
      , COUNT(*) line_count 
      , COUNT(DISTINCT orderno) orders_placed
   FROM orders
  WHERE date BETWEEN '2010-01-21' AND CURDATE() 
  GROUP 
     BY YEAR(date)
      , MONTH(date)  
  ORDER  
     BY date; 
```

# excel - 使用单元格值作为单元格范围进行计算

> ID：15544927
> 
> 赞同：1
> 
> 时间：2013-03-21T10:27:55.063
> 
> 标签：excel, excel-2010, date-range, standard-deviation, vba

我是 VBA 新手。我目前正在研究我的前任已经构建的验证工具。我要澄清的问题是根据另一个单元格中公式的结果选择单元格范围。

例如，我需要在 B 列的 1000 个数字中找到 800 个数字的标准差。我使用公式 STDEV.S()，括号中包含两个单元格的范围。但是，两个单元格的范围是不同的，因为用户可以选择和更改范围。用户对范围的选择打印在一个单元格中，例如 C16 中的上限和 C15 中的下限。考虑 C16 有 950 而 C16 有 150 值，在这种情况下，如何插入 stdev.s() 的公式？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:32:10.203

假设您的数据在 B 列中，并且您的界限在 C15 和 C16 中

```
Sub PasteAFormula()

Dim strFormulaToPaste As String

    strFormulaToPaste = "B" & Range("C15").Value & ":B" & Range("C16").Value

    strFormulaToPaste = "=STDEV.S(" & strFormulaToPaste & ")"

    MsgBox strFormulaToPaste

End Sub 
```

然后，您可以将 strFormulaToPaste 的内容放入单元格中。

# php - 将文本字段的值传递到下一页上的另一个文本字段

> ID：15544928
> 
> 赞同：0
> 
> 时间：2013-03-21T10:27:55.493
> 
> 标签：php, html, session

我在页面上显示了表格。表为：

身份证姓名生日学校

1 ABCD XX-XX-XX XYZ '编辑图标'

2 PQRS XX-XX-XX LMN '编辑图标'

如果我单击编辑图标，我想在下一页传递名称 ABCD。有人知道怎么做吗？我尝试使用`session()`但它没有传递价值。

提前致谢。

显示表格的代码：

```
 echo "<tr>";
    echo "<td height='30'><a href='next.php?name=".$info['name']."'><img src='image/edit-icon.png'></a>" . $info['id'] . "</td>";
    echo "<td height='30' id='key'>" . $info['name'] . "</td> ";
    echo "<td height='30'>" . $data['date'] . "</td> ";
    echo "<td height='30'>" . $info['school'] . "</td></tr> "; 
```

我想在下一页传递名称来编辑记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:31:20.890

简单，只需将 ABCD 存储在一个变量中并在 URL 中传递

```
nextpage.php?name=ABCD 
```

**下一页.php**

通过获取该值

```
$_REQUEST['name'];

OR

$_GET['name']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:32:21.150

使用编辑图标中使用的 URL 传递 db 表中存在的行的 ID。并根据该 id 获取下一页上的数据。您也可以在文本字段中设置数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:34:12.263

执行此操作的最简单和最简单的方法是将其与 $_GET 一起传递给其他脚本。

编辑图标应该得到一个`onclick="window.open('newpage.php?name=ABCD');"`，你可以在 newpage.php 上访问它`$_GET['name']`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:34:12.820

生成表格时，请务必将名称放在链接中。

```
<a href="edit.php?name=ABCD"><img src="..." /> </a> 
```

然后，在 edit.php 中，您可以检索名称调用

$_REQUEST['name'];

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:35:42.760

首先，您需要为每个单独的编辑添加 Id 并将它们链接为

```
nextpage.php?id=$this_id 
```

并在下一页获取 id 为

```
$this_id = $_REQUEST['id']; 
```

然后查询 id 为 $this_id 的记录

```
$data = mysql_query("SELECT * FROM my_table WHERE id = ".$this_id); 
```

那么您将获得您轻松选择的所有数据，例如

```
<input type="text" name="name" value="<?php echo $data['name'];?>"> 
```

# python - 使用 python-blogger API 时关闭 gdata 调试消息

> ID：15544930
> 
> 赞同：1
> 
> 时间：2013-03-21T10:28:10.980
> 
> 标签：python, gdata-api

我有[以下](https://github.com/dilawar/blogs/blob/master/Blogspot/blogger.py)初始化客户端的函数。

```
import difflib
from gdata import service, GDataEntry
import atom
import sys
import time

"""Initializing instance and login into www.blogger.com"""
    def __init__(self, user, password):
        self.blogger_service = service.GDataService(user, password)
        self.blogger_service.source = 'gv-cl-blogger-updater-1.0'   # Client software name
        self.blogger_service.service = 'blogger'
        self.blogger_service.account_type = 'GOOGLE'
        self.blogger_service.server = 'www.blogger.com'
        self.blogger_service.ssl = True                             # Let's protect connection
        print "[I] Logging into " + self.blogger_service.server + " ..."
        self.blogger_service.ProgrammaticLogin()
        if self.blogger_service.current_token is None:
            print "[E] Unable to login into \"" + self.blogger_service.server + "\"" 
```

当我运行它时，它会在控制台上显示发送到服务器的代理信息。我有代理用户名和密码，它们也显示在控制台上（在此处删除）

```
[I] Logging into www.blogger.com ...
!!!!http://netmon.iitb.ac.in:80
!!!!Basic ZGlsYXdhcnM6Xmt1cnVja2NoZXRyYQ==

!!!!http://netmon.iitb.ac.in:80 
```

是否可以设置一个标志以降低调试级别？我试过`self.blogger_service.debug=False`了，但它没有改变任何东西。

# android - 地图在地图 v2 中不起作用

> ID：15544933
> 
> 赞同：1
> 
> 时间：2013-03-21T10:28:19.110
> 
> 标签：android, android-mapview, android-maps-v2

我想按名称获取地图位置。

但是地图没有显示位置。我的代码如下：

```
 SupportMapFragment fm = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);

    // Getting GoogleMap object from the fragment
    googleMap = fm.getMap();
    if (googleMap != null)
        // Enabling MyLocation Layer of Google Map
        googleMap.setMyLocationEnabled(true);           
    Geocoder geoCoder = new Geocoder(getActivity(), Locale.getDefault());
    try {
     List<Address> addresses = geoCoder.getFromLocationName("Ferozepur Rd Lahore", 1);
     if (addresses.size() > 0) {
         int lat  = (int) (addresses.get(0).getLatitude() * 1E6);
         int longt  = (int) (addresses.get(0).getLongitude() * 1E6);

     p = new GeoPoint(lat,longt);
     LatLng latLng = new LatLng(lat, longt);
        googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));
        googleMap.addMarker(new MarkerOptions().position(new LatLng(lat, longt)).title("Hello world"));       

         googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));

     }
     } catch (IOException e) {
     e.printStackTrace();
     } 
```

但它向我展示了这个结果：

![在此处输入图像描述](../Images/303b55dd682a72c41b537e3c03efba04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:21:15.843

您没有显示的纬度和经度本身。代码不完整。但是使用 Mapview 气球。

[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

# wcf - wcf.js 模块从 nodejs 访问 wcf 服务

> ID：15544942
> 
> 赞同：2
> 
> 时间：2013-03-21T10:28:38.113
> 
> 标签：wcf, node.js

我需要从我的节点服务器访问 wcf Web 服务。我遇到了一个名为 wcf.js 的模块，该模块为此目的而评级。但是我对消息的部分感到困惑，谁能给我一个解释，说明如何使用它进行编码模块将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:42:41.693

[http://www.codeproject.com/Articles/379389/Wcf-js-Call-WCF-web-services-from-Node-js](http://www.codeproject.com/Articles/379389/Wcf-js-Call-WCF-web-services-from-Node-js)上的 codeproject 文章提供了一些如何使用该包调用 WCF 服务的示例。并且[项目在 GitHub 上的页面](https://github.com/yaronn/wcf.js)也有一些文档。

在 GitHub 项目中，您还可以找到一些示例，并且该项目（以及一般任何项目）的测试始终是了解如何使用框架的良好起点。

# android - 在 AutocompleteTextView 中显示所有项目而不写入文本

> ID：15544943
> 
> 赞同：56
> 
> 时间：2013-03-21T10:28:38.607
> 
> 标签：android, autocompletetextview

我有一个 AutocompleteTextView，它工作正常。当我写一个单词时，它会显示相关结果，但我想显示所有项目而不在 AutocompleteTextView 中写任何单词。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-21T10:35:02.890

您需要扩展 AutoCompleteTextView，

> “当阈值小于或等于 0 时，应用阈值 1。”。

[设置阈值](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setThreshold%28int%29)

```
import android.content.Context;  
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.AutoCompleteTextView;

public class InstantAutoComplete extends AutoCompleteTextView {

    public InstantAutoComplete(Context context) {
        super(context);
    }

    public InstantAutoComplete(Context arg0, AttributeSet arg1) {
        super(arg0, arg1);
    }

    public InstantAutoComplete(Context arg0, AttributeSet arg1, int arg2) {
        super(arg0, arg1, arg2);
    }

    @Override
    public boolean enoughToFilter() {
        return true;
    }

    @Override
    protected void onFocusChanged(boolean focused, int direction,
            Rect previouslyFocusedRect) {
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
       if (focused && getFilter()!=null) {
        performFiltering(getText(), 0);
    }
    }

} 
```

在xml中

```
<AutoCompleteTextView ... /> to <your.namespace.InstantAutoComplete ... /> 
```

编辑 1

创建名为 InstantAutoComplete 的新类，然后将此代码放入该类中。

在您的布局 xml 中使用此类，例如

然后在你的活动中找到这个小部件（onCreate 方法）。

[看这个例子](https://stackoverflow.com/questions/9477336/how-to-make-custom-textview)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-02-06T11:38:29.390

> 这里有更好的解决方案

您不需要自定义您的`AutoCompleteTextView`. 相反，`autoCompleteTextView.showDropDown()`只要你需要它就打电话.....干杯:)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-03-11T18:14:07.990

这个对我有用：

将下一个事件方法添加到您的对象：

```
 myView.setOnFocusChangeListener(new OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus)
                myView.showDropDown();

        }
    });

    myView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            myView.showDropDown();
            return false;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-11-08T09:18:33.753

这对我来说非常有效，这是解决问题的简单方法：

```
final ArrayAdapter<String> adapter = new ArrayAdapter<>(getContext(), android.R.layout.simple_dropdown_item_1line, usernameLists);
etUsername.setThreshold(1);
etUsername.setAdapter(adapter);
etUsername.setOnTouchListener(new View.OnTouchListener() {

    @SuppressLint("ClickableViewAccessibility")
    @Override
    public boolean onTouch(View paramView, MotionEvent paramMotionEvent) {
        if (usernameLists.size() > 0) {
                // show all suggestions
                if (!etUsername.getText().toString().equals(""))
                    adapter.getFilter().filter(null);
                etUsername.showDropDown();
            }
        return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-09-25T10:59:54.890

您需要调用`requestFocus();`显示键盘，否则键盘不会弹出。

该方法强制显示下拉列表。

```
autocomptv.setOnTouchListener(new OnTouchListener() {

        @SuppressLint("ClickableViewAccessibility")
        @Override
        public boolean onTouch(View paramView, MotionEvent paramMotionEvent) {
            // TODO Auto-generated method stub
            autocomptv.showDropDown();
            autocomptv.requestFocus();
            return false;
        }
    }); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-02T12:37:15.923

您需要采取这些步骤才能使其完美运行

1-在你的 xml 中放这个

```
 <androidx.appcompat.widget.AppCompatAutoCompleteTextView
            android:id="@+id/account_type_spinner"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginStart="@dimen/_16sdp"
            android:layout_marginTop="@dimen/_24sdp"
            android:layout_marginEnd="@dimen/_16sdp"
            android:background="@drawable/rounded_edt_with_border"
            android:completionThreshold="0"
            android:drawableRight="@drawable/ic_arrow_down"
            android:hint="@string/account_type"
            android:imeOptions="actionNext"
            android:inputType="text"
            android:padding="12dp"
            android:textSize="@dimen/_15sp"
             /> 
```

你只需要设置`android:completionThreshold`为零

2-在你的java代码中

```
 mViewDataBinding.accountTypeSpinner.setOnFocusChangeListener((v, hasFocus) -> {
        if (hasFocus)
            mViewDataBinding.accountTypeSpinner.showDropDown();
    }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-10-12T06:23:46.600

用这个 ：

```
 text.setOnTouchListener(new View.OnTouchListener(){

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                // TODO Auto-generated method stub
                text.showDropDown();
                return false;
            }
            }); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-13T12:49:37.693

```
Nothing Custom Required. 
```

> 我尝试了所有解决方案，但在某些情况下不起作用。例如，一个解决方案第一次工作，但是当您删除文本时它不会出现。所以我挖了更多，找到了以下解决方案。
> 
> 欢迎提出建议。

XML:

```
<android.support.design.widget.TextInputLayout
                    android:id="@+id/tl"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content">

                    <android.support.v7.widget.AppCompatAutoCompleteTextView
                        android:id="@+id/autoComplete"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:hint="Hint Here" />

                </android.support.design.widget.TextInputLayout> 
```

科特林：

```
val adapter = ArrayAdapter<BusinessNoResult>(context, android.R.layout.select_dialog_item, listItems)
autoComplete.setAdapter(adapter)
//threshold specifies the minimum number of characters the user has to type in 
//the
//edit box before the drop down list is shown
autoComplete.threshold = 0

//we have to add check for 0 number of character in edit text. When that 
//happens, we will show pop up manually
autoComplete.addTextChangedListener(object : TextWatcher {
    override fun afterTextChanged(s: Editable?) {}

    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}

    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
        //first check if length of input is 0
        if(s?.length ?: 0 == 0){
            //if you don't use handler with post delay, the API will hide pop 
            //up, even if you show it. There could be better ways to this, but 
            //I have implemented this and after 100 millis it gives an animated 
            //look
            Handler().postDelayed({
                //manually show drop down
                autoComplete.showDropDown()
            }, 100) // with 100 millis of delay
        }
    }
})
//when user focus out the view, drop down vanishes. When come back it will not 
//show, so to cover this scenario add following.
autoComplete.setOnFocusChangeListener { _, hasFocus ->
    //when gain focus manually show drop down
    if(hasFocus)
        autoComplete.showDropDown()
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-02-02T19:32:34.447

所有答案都已过时。通过材料设计，它变得更加容易和流畅。确保将 inputType 设置为 none 以不再打开键盘。

XML

```
 <com.google.android.material.textfield.TextInputLayout
        android:id="@+id/et_countries_list"
        style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="20dp"
        android:hint="Demo hint"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintTop_toTopOf="parent"

        >

        <com.google.android.material.textfield.MaterialAutoCompleteTextView
            android:id="@+id/countries_list"
            android:layout_width="match_parent"
            android:inputType="none"
            android:layout_height="60dp"
            />

    </com.google.android.material.textfield.TextInputLayout> 
```

然后只需添加准备您的适配器并添加它。

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_dropdown_item_1line, new String[]{
                "Belgium", "France", "Italy", "Germany", "Spain", "Belgium", "France", "Italy", "Germany", "Spain"});

        AutoCompleteTextView autoCompleteTextView = (AutoCompleteTextView)
                findViewById(R.id.countries_list);
        autoCompleteTextView.setAdapter(adapter); 
```

你完成了。它会比微调器工作得更好。您也可以设置提示、错误、帮助程序。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-19T15:06:06.537

如果其他解决方案对您不起作用，请尝试此方法。弹出窗口**总是**在点击时显示。

```
 public class InstantAutoComplete extends AppCompatAutoCompleteTextView {

    public InstantAutoComplete(Context context) {
        super(context);
    }

    public InstantAutoComplete(Context arg0, AttributeSet arg1) {
        super(arg0, arg1);
    }

    public InstantAutoComplete(Context arg0, AttributeSet arg1, int arg2) {
        super(arg0, arg1, arg2);
    }

    @Override
    public boolean enoughToFilter() {
        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            performClick();
        }
        return super.onTouchEvent(event);
    }

    @Override
    public boolean performClick() {
        if (getFilter() != null && !isPopupShowing()) {
            performFiltering(getText(), 0);
            showDropDown();
        }
        return super.performClick();
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-12T01:18:36.390

在这里，我发现 tat onTouch 使用 onclicklistener 的方法在尝试滚动时有点烦人。mOccupation 是有问题的 AutocompleteTextView。

```
 mOccupation=(AutoCompleteTextView) findViewById(R.id.actv_occupation);
    ArrayAdapter<String> occupationAdapter=new ArrayAdapter<String> 
    (NewClientActivity.this,
            android.R.layout.simple_list_item_1,
            getResources().getStringArray(R.array.occupation_array));
    mOccupation.setAdapter(occupationAdapter);
    mOccupation.setKeyListener(null);
    mOccupation.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            //mOccupation.setText(null);
            ((AutoCompleteTextView) view).showDropDown();
            return;
        }
    }); 
```

我设法将其全部放入具有以下 xml 规范的 Textinputlayout 中：

```
<android.support.design.widget.TextInputLayout
    android:id="@+id/lo_occupation"
    android:layout_marginTop="10dp"
    android:layout_gravity="center_horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <AutoCompleteTextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="occupation"
        android:focusableInTouchMode="false"<--this is the important part
        android:id="@+id/actv_occupation"
        android:ems="10"
        android:completionThreshold="0"<--this too
        />
</android.support.design.widget.TextInputLayout> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-03-20T03:25:54.090

我有一个很好的解决方案。这很简单。这只是下拉菜单并从选项中进行选择。

确保将这两行添加到 XML。

`android:completionThreshold="0"` `android:focusableInTouchMode="false"`

**XML**

```
<com.google.android.material.textfield.TextInputLayout
    android:layout_marginTop="10dp"
    style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <androidx.appcompat.widget.AppCompatAutoCompleteTextView
        android:id="@+id/select_area"
        android:layout_width="match_parent"
        android:layout_height="52dp"
        android:padding="10dp"
        android:textSize="15sp"
        android:singleLine="true"
        android:drawableEnd="@drawable/ic_arrow_down"
        android:completionThreshold="0"
        android:focusableInTouchMode="false"
        android:hint="Select an Area"
        android:inputType="text"
        android:maxLines="1" />

</com.google.android.material.textfield.TextInputLayout> 
```

**JAVA**

```
area_autocomplete.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        area.showDropDown();
    }
}); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-07-02T18:15:36.790

您可以简单地使用这一行代码

```
autoCompleteTextView.setThreshold(100); 
```

# c# - 如何从带有嵌入字体的 PDF 中提取文本/数据

> ID：15544946
> 
> 赞同：2
> 
> 时间：2013-03-21T10:28:46.497
> 
> 标签：c#, pdf

我有 PDF，其中使用了印度语言（卡纳达语），但是当我从 PDF 复制文本并将其粘贴到记事本中时，内容显示为方框。我尝试使用 iTextSharp 以编程方式阅读，但没有运气。我检查了它的属性，它说带有子集的嵌入式字体（Arial Unicode MS（True Type）-IDENTITY-H）。

有谁知道如何从中提取文本？任何帮助将非常感激。

# php - 无法使用 xpath 获取 span 标签

> ID：15544948
> 
> 赞同：2
> 
> 时间：2013-03-21T10:28:49.300
> 
> 标签：php, html, dom, xpath

```
<div class="product_box">
    <div class="list_sale">
        <img src="link" class="listsale" alt="">
            <div class="product_box_title">
                <a href="link"><strong>title here</a></strong>
            </div>
            <div class="product_box_desc">
                some text here
                <strike>some text</strike> 
                <br />
                <span class="list_price">THIS IS THE NEEDED TEXT</span>
                <a href="link"><strong>some text</strong></a>
            </div>
            <div class="list_buynow">
            <form action="link" class="add_to_cart" method="post">
                <div class="add_cart">
                    <input type="image" src="link" value="add_to_cart" class="add_button">
                    <input id="fast_order_0_item_code" type="hidden" name="fast_order[0] [item_code]" value="value" class="item_code"/>
                    <input name="fast_order[0][add]" value="1" class="add_qty">
                    <input type="hidden" name="redirect_uri" value="value">
                </div>
            </form>
        </div>
       <div class="product_box_img">
           <a href="link">
               <a href="link"><img src="http://stacktoheap.com/images/stackoverflow.png" alt=""></a>
           </a>  
       </div>
   </div>
</div> 
```

这是我的 html 文件，我需要从这个 div 中提取“这是需要的文本”。我已经能够获得具有类“product_box_desc”的 div，并且从中我能够获得它下面的文本“这里的一些文本”。但我无法获取包含文本的跨度。这是我正在使用的 XPATH 查询，请建议必须更改的内容。

```
$dom_xpath->query("//div[@class='product_box']/div/div[@class='product_box_desc']/span[@class='list_price']") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:39:49.770

这个查询对我来说很好：

```
//div[@class="product_box"]/div[@class="list_sale"]/div[@class="product_box_desc"]/span[@class="list_price"] 
```

但我将 html 更改为这个：

```
<div class='product_box'>
    <div class='list_sale'>
        <img src='link' class='listsale' alt='' />
        <div class='product_box_title'>
            <a href='link'><strong>title here</strong></a>
        </div>
        <div class='product_box_desc'>
            some text here
            <strike>some text</strike> 
            <br />
            <span class='list_price'>THIS IS THE NEEDED TEXT</span>
            <a href='link'><strong>some text</strong></a>
        </div>
        <div class='list_buynow'>
        <form action='link' class='add_to_cart' method='post'>
            <div class='add_cart'>
                <input type='image' src='link' value='add_to_cart' class='add_button'>
                <input id='fast_order_0_item_code' type='hidden' name='fast_order[0] [item_code]' value='value' class='item_code'/>
                <input name='fast_order[0][add]' value='1' class='add_qty'>
                <input type='hidden' name='redirect_uri' value='value'>
            </div>
        </form>
        </div>
       <div class='product_box_img'>
           <a href='link'>
               <img src='http://stacktoheap.com/images/stackoverflow.png' alt=''>
           </a>  
       </div>
   </div>
</div> 
```

这里有一个错误：
`<a href='link'><strong>title here</strong></a>`而不是
`<a href='link'><strong>title here</a></strong>`

我这样做：

```
$nodes = ($xPath->query('//div[@class="product_box"]/div[@class="list_sale"]/div[@class="product_box_desc"]/span[@class="list_price"]'));

foreach($nodes as $node) {
    echo $node->textContent;
} 
```

# spring-mvc - 将表单重定向到spring mvc中的另一个控制器

> ID：15544950
> 
> 赞同：1
> 
> 时间：2013-03-21T10:28:53.710
> 
> 标签：spring-mvc

我正在使用 Spring Mvc。这里我使用 JSP 作为视图。

我有一种情况，我必须从受另一个控制器约束的表单重定向到另一个受另一个控制器约束的表单

我用过

```
<c:redirect url="updateStock.ic?appId='${mineralSelect.applicationId}'&serviceId='${mineralSelect.serviceId}'&mineralIdAndName='${mineralList.get(0).mineralId}:${mineralList.get(0).mineralName}'"/> 
```

但是它执行了，但是页面没有渲染。但是在控制台视图中没有异常页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:50:10.750

由于我的评论没有得到答复，因此我将尽我所能在有限的知识范围内为您提供最佳答案。

首先，我认为将重定向放在您的 JSP 中是不好的做法。坦率地说，我认为在 JSP 中放置简单循环和决策分支以外的任何内容都是不好的做法。我会考虑进行重定向的决定是“业务逻辑”决定，而我不会在我的 JSP 中做出决定。Spring MVC 提供了几种在控制器中进行重定向的方法，这具有不在 JSP 中的额外好处，并且可以绕过必须渲染 JSP 来执行重定向。 [这篇文章](http://www.mkyong.com/spring-mvc/spring-mvc-redirectview-example/)有一些关于如何在控制器中执行重定向的示例。

如果您仍然一心想要在您的 JSP 中进行重定向，那么我建议您使用一些测试工具来查看您是否获得了重定向。Chrome 的开发者工具和 Firefox 的 Firebug 能够报告发送到浏览器的内容。Fiddler 也是处理这些事情的好工具。您正在寻找的是一个 HTTP 3xx 标头，很可能是一个 302，以及您尝试重定向到的 URL。

如果您没有在浏览器中看到 HTTP 3xx 响应，那么是时候进行故障排除了。从以下问题开始：

1.  JSP 是否曾经渲染过
2.  如果它正在渲染，如果我在重定向周围放置调试语句会发生什么？
3.  我的重定向是否有一些逻辑导致它甚至没有被执行（调试语句可能会避开这一点）

从尽可能靠近源的地方开始，添加调试打印和日志记录，然后扩展到下一个最宽的区域，直到确定哪些工作正常，哪些工作不正常。

# c++ - C++ - 互斥锁和自旋锁的初始化和销毁

> ID：15544955
> 
> 赞同：2
> 
> 时间：2013-03-21T10:29:02.360
> 
> 标签：c++, multithreading, spinlock

是否可以在一个线程中分配和初始化互斥锁并在另一个线程中销毁它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T10:31:00.420

是的。互斥锁是线程之间共享的进程资源。只要确保在互斥锁被销毁时或之后没有其他线程可以访问它。

使用互斥体构造一个对象，然后在对象被销毁时销毁该互斥体是一种非常常见的模式。如果您必须确保同一个线程在创建互斥锁时销毁了它，那将是非常烦人的——该线程甚至可能不再存在。如果它是一个进程共享互斥锁，那么创建它的进程甚至可能不再存在。

# c# - 如何在现有的字母数字验证表达式中允许 esc secuence charater

> ID：15544956
> 
> 赞同：3
> 
> 时间：2013-03-21T10:29:03.237
> 
> 标签：c#, regex

我正在使用以下验证表达式来验证字符串以仅接受字母数字字符

```
(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{6,50})$ 
```

但它不接受诸如此类的字符`~, !, (, ), [, ], {, }`，如何在上面添加表达式以接受所有这些字符？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:35:49.390

您可以使用[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)这些字符中的每一个。

示例（需要对所有字符类型重复）：

```
string pattern = "(?" 
    + Regex.Escape("!")
    + "^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{6,50})$"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:49:04.153

尝试这个

```
 string _strTemp = "USer ,()TeXt~!";
    if (Regex.IsMatch(_strTemp, @"^[a-zA-Z 0-9.!~(){},]+$"))
    {
        //Valid Input
    }
    else
    {
        //Invalid Input
    } 
```

# c# - 如何在委托中使用字典

> ID：15544962
> 
> 赞同：4
> 
> 时间：2013-03-21T10:29:19.743
> 
> 标签：c#, dictionary, delegates

我有一个字典，我想按不同的条件过滤，例如

```
IDictionary<string, string> result = collection.Where(r => r.Value == null).ToDictionary(r => r.Key, r => r.Value); 
```

我想将 Where 子句作为参数传递给执行实际过滤的方法，例如

```
private static IDictionary<T1, T2> Filter<T1, T2>(Func<IDictionary<T1, T2>, IDictionary<T1, T2>> exp, IDictionary<T1, T2> col)
{
    return col.Where(exp).ToDictionary<T1, T2>(r => r.Key, r => r.Value);
} 
```

但是，这不会编译。

我试图通过使用调用此方法

```
Func<IDictionary<string, string>, IDictionary<string, string>> expression = r => r.Value == null;
var result = Filter<string, string>(expression, collection); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:33:04.510

`Where`想要一个`Func<TSource, bool>`，在你的情况下`Func<KeyValuePair<TKey, TValue>, bool>`。

此外，您的方法的返回类型不正确。它应该使用`T1`and`T2`而不是`string`. 此外，最好为通用参数使用描述性名称。而不是`T1`and`T2`我使用与字典相同的名称 - `TKey`and `TValue`：

```
private static IDictionary<TKey, TValue> Filter<TKey, TValue>(
    Func<KeyValuePair<TKey, TValue>, bool> exp, IDictionary<TKey, TValue> col)
{
    return col.Where(exp).ToDictionary(r => r.Key, r => r.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:36:47.173

如果您查看`Where`扩展方法的构造函数，您将看到

`Func<KeyValuePair<string, string>, bool>`

所以这就是你需要过滤的东西，试试这个扩展方法。

```
public static class Extensions
{
  public static IDictionairy<TKey, TValue> Filter<TKey, TValue>(this IDictionary<TKey, TValue> source, Func<KeyValuePair<TKey, TValue>, bool> filterDelegate)
  {
    return source.Where(filterDelegate).ToDictionary(x => x.Key, x => x.Value);
  }
} 
```

调用为

```
IDictionary<string, string> dictionairy = new Dictionary<string, string>();
var result = dictionairy.Filter((x => x.Key == "YourValue")); 
```

# web-services - jquery ajax 没有在 asp.net2.0 中被调用？

> ID：15544963
> 
> 赞同：1
> 
> 时间：2013-03-21T10:29:20.757
> 
> 标签：web-services, jquery, asp.net-2.0

我正在使用 Asp.Net 2.0。我正在尝试学习 web 服务并使用 jquery ajax 方法调用该 web 服务

问题是 jquery ajax 无法正常工作，我无法找出我哪里出错了。

这是我的jQuery代码

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script type="text/javascript">
 $(document).ready(function(){
    $("#Button1").click(function(){

        $.ajax({
            type:"POST",
            url:"/WebService.asmx/GetDateTime",
            data:"{}",
            contentType:"application/json; charset=utf-8",
            dataType:"json",
            succss: function(msg){                  
                alert("Success");
            },
            failure:function(response){
                alert("Error");
            }
        });
    });
 });

 </script> 
```

这是我的网络服务

```
[WebMethod]
public string GetDateTime()
{
    return DateTime.Now.ToString();
} 
```

这是 HTML 部分

```
<form id="form1" runat="server">
<div>      
    <input type="button" id="Button1" style="width:75px" value="Submit" />
    <span id="output"></span>
</div>     
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:20:05.400

如果您的按钮动态生成，请使用**“live”**绑定事件

```
$("#Button1").live("click", function(){...}); 
```

注意：确保您的 id 与页面中生成的相同，ASP.NET 将 id 更改为 'ct00_button1' 检查浏览器检查元素

# command-line - 使用 installshield 从命令行卸载

> ID：15544965
> 
> 赞同：1
> 
> 时间：2013-03-21T10:29:29.413
> 
> 标签：command-line, installshield, uninstallation

有什么方法可以强制卸载而不是升级 InstallSheild？

我目前有一个 Setup.exe 和一个 MSI 文件，但每次我尝试使用预先记录的 ISS 进行卸载，如果我的安装比它首先升级的当前版本旧，并且如果我再次运行相同的文件，那么它会卸载，

现在我想知道是否有一种方法可以强制它取消安装——这就是我目前所拥有的

```
...\setup.exe"  /x /s /f1C:\Remove.iss 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:07:55.117

与其使用您构建的 setup.exe，不如使用缓存在机器上的那个？`/s /f1C:\Remove.iss`检查卸载键以获取详细信息（如路径），如果删除页面足够相似，您仍然可以混合使用。

# java - 线程在读取套接字响应时在几次迭代后休眠

> ID：15544966
> 
> 赞同：2
> 
> 时间：2013-03-21T10:29:32.690
> 
> 标签：java, multithreading, sockets

我正在开发一个应用程序，在该应用程序中，我在套接字上写入和读取。但是，它只执行了 11 次任务，然后它就休眠了。

**轮询线程.java**

```
public class PollThread {

    static String result;
    private static Timer myTimer;
    static String ip = "192.168.1.19";

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        System.out.println("PollThread");
        myTimer = new Timer();
        myTimer.schedule(new TimerTask() {
            @Override
            public void run() {
                ClientThread cThread = new ClientThread(ip);
                String status = cThread.readStatus();
                System.out.println("Staus :: "+status);
            }
        }, 0, 2000);

    }
} 
```

**ClientThread.java**

```
public class ClientThread {

    String byte_to_hex, swapped_result, result,ipAddr;
    public Socket s;
    public InputStream i;
    public OutputStream o;
    int status;

    public ClientThread(String ip) {
        // TODO Auto-generated constructor stub
        this.ipAddr=ip;

    }

    public int readStatus() {
        try {
            s = new Socket(ipAddr, 502);
            i = s.getInputStream();
            o = s.getOutputStream();

            byte[] data1 = new byte[1024], packet1 = { (byte) 0x00,
                    (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                    (byte) 0x06, (byte) 0x01, (byte) 0x01, (byte) 0x00,
                    (byte) 0x00, (byte) 0x00, (byte) 0x19 };

            o.write(packet1);
            i.read(data1, 0, 1024);//Comment this
            byte_to_hex = bytesToHex(data1).substring(18, 26);

            char[] arr = byte_to_hex.toCharArray();
            for (int i = 0; i < arr.length - 1; i += 2) {
                char temp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = temp;
            }

            swapped_result = new String(arr);

            result = hexStringToNBitBinary(swapped_result, 32);

            int counter = 0;
            for (int i = 0; i < result.length(); i++) {
                if (result.charAt(i) == '1') {
                    counter++;
                }
            }
            status = counter;

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return status;
    }
} 
```

**结果**

```
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1
Staus :: 1 
```

如果我注释掉，`i.read(data1, 0, 1024);`那么它工作正常，但我需要这一行来获得结果。

这可能是什么问题？为什么它只运行了 11 次？

**更新-1**

```
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status...
Status :: 1
Reading status... 
```

**更新 2**

我也试过 `cThread.start();`在`PollThread.java`文件中添加这一行，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:12:46.037

正如其他评论者所提到的，您的 Timer 实际上是创建**多个客户端连接**，每两秒一个，而不是定期测试的单个连接。您的“服务器模拟器”的最大连接数很可能为 10 或 11。尝试将客户端连接移到 TimerTask 之外，这样就不会每次都创建它：

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    System.out.println("PollThread");
    myTimer = new Timer();
    final ClientThread cThread = new ClientThread(ip);
    myTimer.schedule(new TimerTask() {
        @Override
        public void run() {
            String status = cThread.readStatus();
            System.out.println("Staus :: "+status);
        }
    }, 0, 2000);
} 
```

抱歉刚刚注意到您在 readStatus 方法中创建了一个新的 Socket，这本质上是相同的多连接问题。尝试将这些东西移到构造函数中，例如：

```
public ClientThread(String ip) {
    // TODO Auto-generated constructor stub
    this.ipAddr=ip;

    try {
        s = new Socket(ipAddr, 502);
        i = s.getInputStream();
        o = s.getOutputStream();
    // ...
}

public int readStatus() {
    try {
        //s = new Socket(ipAddr, 502);
        //i = s.getInputStream();
        //o = s.getOutputStream(); 
```

# sharepoint - 在站点上查找特定字段并在 EventReciever 中将其设置为“必填”

> ID：15544970
> 
> 赞同：0
> 
> 时间：2013-03-21T10:29:48.087
> 
> 标签：sharepoint

我创建了一个 EventReciever，它将在创建站点时被激活。这个网站有一个公告webpart。当他们点击“添加公告”时，newform.aspx 会弹出一个对话框，并且有一个名为 Expired 的字段我需要将其设为必需，因此必须使用该字段，否则它会阻止用户添加公告。

如何在我的 EventReciever 中找到该特定字段并将其设置为必需？

```
<!-- FieldName="Expires"
             FieldInternalName="Expires"
             FieldType="SPFieldDateTime"
          --> 
```

这就是我到目前为止的进步：

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
{

    if (properties.Feature.Parent is SPWeb)
    {
        var web = properties.Feature.Parent as SPWeb;
            var expiredDate = web.Fields.GetFieldByInternalName("Expires");
            expiredDate.Required = true;
            expiredDate.Update();

    }

} 
```

任何类型的提示或帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:33:04.613

您的 WebPart 可能会查询特定列表？在这种情况下，还可以选择在该列表中设置 Expires too required。

您当前的代码只会更新站点中的 Expires 站点列，它不会将这些更改推送到使用此列的列表中。如果您要在执行代码后创建一个新列表，您将有一个需要 Expires 的列表。

但是，通过阅读您的代码，我的猜测是您实际上想要更新当前列表和包含该列的所有新列表。在这种情况下，您应该修改`expiredDate.Update()`to `expiredDate.Update(true)`。此布尔值向 SharePoint 指示您希望将更改推送到现有列表。执行此更新后，您将看到现有列表还要求用户填写到期日期。

# windows - haskell 新手，找不到 cabal

> ID：15544973
> 
> 赞同：2
> 
> 时间：2013-03-21T10:29:58.260
> 
> 标签：windows, haskell, cabal

我尝试在 Windows 上运行`cabal`，`cmd`但无法识别。我已经修改了我的`PATH`变量以包含我的 haskell 安装的 bin 目录，但这不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:48:14.600

在我的 Haskell 平台安装中（我在 Windows 上使用 2012.4），`cabal.exe`可执行文件令人困惑地*不在*`<HASKELL_PLATFORM_DIR>\bin`（`ghci.exe`和朋友居住的地方）下，而是在`<HASKELL_PLATFORM_DIR>\libs\extralibs\bin`.

您也可以尝试将后一个目录添加到您的路径中；至少对我有用。

# mysql - 无法编写 MySQL 查询以正常工作

> ID：15544976
> 
> 赞同：0
> 
> 时间：2013-03-21T10:30:08.860
> 
> 标签：mysql

我在此查询中使用了两个表。第一个表是“用户”，第二个表是“日志”。我正在尝试显示“用户”中的“用户名”列和日志中的“时间戳”列，但我只希望结果显示每个“用户名”的最新“时间戳”

这是我的查询：

```
 SELECT users.username, logs.time_stamp 
 FROM users, logs 
 WHERE users.u_id=logs.user_id 
   AND logs.user_action='user login' 
 GROUP BY (username) 
 ORDER BY logs.time_stamp DESC 
```

这就是我得到的：

```
Alex   2013-02-20 10:51:52
Bill   2013-02-13 12:32:33
Mike   2013-02-13 10:53:47
Rick   2013-02-08 12:34:50
Admin  2013-02-08 01:55:31 
```

乍一看，它看起来不错，但它没有显示每个用户的最新时间戳。我无法弄清楚我做错了什么，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:33:00.900

You should use MAX aggregate function:

```
SELECT
  users.username,
  MAX(logs.time_stamp)
FROM
  users INNER JOIN logs ON users.u_id=logs.user_id
WHERE 
  logs.user_action='user login' 
GROUP BY username 
```

# macos - Grunt 尝试加载空模块失败

> ID：15544978
> 
> 赞同：0
> 
> 时间：2013-03-21T10:30:10.937
> 
> 标签：macos, npm, gruntjs

我对我在 OSX Lion 10.7.3 上的 Jenkins 设置有点坚持。

我在我的 web 应用程序中使用 Grunt 来运行 Jasmine 测试、构建更少、创建缓存清单等。一切都在我的笔记本电脑 Lion 10.7.5 上运行，但在服务器盒上 grunt 不时失败并出现以下错误：

```
$ grunt less

module.js:340
    throw err;
          ^
Error: Cannot find module ''
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at ChildProcess.<anonymous> (/usr/local/lib/node_modules/grunt-cli/bin/grunt:44:3)
    at ChildProcess.EventEmitter.emit (events.js:99:17)
    at Process._handle.onexit (child_process.js:678:10) 
```

这是间歇性的，大约五次运行失败一次，并且不是特定于任务的。运行 grunt manifest 或 grunt test 时，它以相同的速率失败。

我注意到的一件事是，当它工作时，它需要一两秒钟才能开始执行任务，但是当它失败时，它会立即失败。

我试图删除 node_modules，npm 缓存清除，重新安装 grunt-cli。没有任何效果。

这是我的 package.json：

```
{
    "name": "webapp",
    "version": "0.0.0",
    "dependencies": {},
    "devDependencies": {
        "grunt": "0.4.0rc7",
        "grunt-contrib-copy": "0.4.0rc7",
        "grunt-contrib-concat": "0.1.2rc6",
        "grunt-contrib-coffee": "0.4.0rc7",
        "grunt-contrib-uglify": "0.1.1rc6",
        "grunt-contrib-compass": "0.1.1rc8",
        "grunt-contrib-jshint": "0.1.1rc6",
        "grunt-contrib-mincss": "0.4.0rc7",
        "grunt-contrib-connect": "0.1.1rc6",
        "grunt-contrib-clean": "0.4.0rc6",
        "grunt-contrib-htmlmin": "0.1.1rc7",
        "grunt-contrib-imagemin": "0.1.1rc8",
        "grunt-contrib-livereload": "0.1.0rc8",
        "grunt-contrib-jasmine": "~0.3.2",
        "grunt-contrib-less": "0.5.0",
        "grunt-manifest": "0.4.0",
        "grunt-jslint": "0.2.5",
        "grunt-bower-hooks": "~0.2.0",
        "grunt-usemin": "~0.1.7",
        "grunt-regarde": "~0.1.1",
        "grunt-requirejs": "~0.3.1",
        "grunt-mocha": "~0.2.2",
        "grunt-open": "~0.1.0",
        "matchdep": "~0.1.1"
    },
    "engines": {
        "node": ">=0.8.0"
    }
} 
```

npm 和节点版本：

```
$ npm -version
1.2.11
$ node --version
v0.8.20 
```

我现在已经剥离了 packages.json 和 Gruntile.js：

```
$ cat package.json 
{
    "name": "webapp",
    "version": "0.0.0",
    "dependencies": {},
    "devDependencies": {
        "grunt": "0.4.0rc7",
        "grunt-manifest": "0.4.0",
        "matchdep": "~0.1.1"
    },
    "engines": {
        "node": ">=0.8.0"
    }
}
$ cat Gruntfile.js 
'use strict';

module.exports = function (grunt) {
    // load all grunt tasks
    require('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks);

    grunt.initConfig({
        manifest: {
            generate: {
                options: {
                    basePath: 'app/',
                    exclude: ['js/lib/amp/com.vaultus.api.WebApiAggregated.cache.js', 'js/lib/amp/com.vaultus.api.DebugWebApiAggregated.cache.js'],
                    timestamp: true
                },
                src: [
                    'index-hybrid.html',
                    '*.xml',
                    'js/**/*.js',
                    'css/**/*.css',
                    'css/images/**/*',
                    'i18n/**/*.js',
                    'template/**/*.html'
                ],
                dest: 'app/cache-manifest.mf'
            }
        }
    });

    grunt.registerTask('build', [
        'manifest'
    ]);

    grunt.registerTask('default', ['build']);
}; 
```

没运气 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:31:12.833

我们在 CI 构建中遇到了这个问题。

经过一番挖掘，看起来这是 grunt-cli 0.1.6 中的一个错误，并[已在 grunt-cli 0.1.7 中修复](https://github.com/gruntjs/grunt-cli/pull/12)。

# android - Achart 引擎 - 如何将饼图图例显示到中心

> ID：15544979
> 
> 赞同：1
> 
> 时间：2013-03-21T10:30:23.340
> 
> 标签：android, achartengine

我正在使用 Achart Engine 来显示饼图，现在我看到图例没有显示到中心。

我希望图例显示在中心怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T22:23:53.477

正如许多问题和答案所述，传说不能以 achartengine 为中心。其实我自己也在找。

我唯一的解决方案是隐藏当前的一个，然后在文本视图中显示一个新的。

# php - 错误致命错误：无法重新声明 date_diff() in

> ID：15544980
> 
> 赞同：2
> 
> 时间：2013-03-21T10:30:24.213
> 
> 标签：php, datediff, redeclare

我使用 1.1.7692 版本的 cakephp。

当我使用 php ver > 5.3.2 运行它时，它有错误：

```
Fatal error: Cannot redeclare date_diff(). 
```

我使用 php ver 5.2.9 运行它，它显示的文本和代码与以下内容相同：

```
quality = 100; $thumb->fileName = "/path/to/file.jpg"; //IMPORTANT -
must run init() function before any manipulation is performed
$thumb->init(); //shrink image by 50% $thumb->percent = 50;
$thumb->resize(); //crop image to 350x350 from center of image
$thumb->cropSize = 350; $thumb->crop(); //resize image to no more than
125px wide $thumb->percent = 0; $thumb->maxWidth = 125;
$thumb->resize(); //save image as 'filename.jpg'
$thumb->save('/path/to/save/filename.jpg'); You can also use this
class to dynamically generate thumbnails and display them After you
have made your manipulations you could display the result by: echo '';
*/ class ThumbnailComponent extends Object { var $errmsg;    //error message to parse var $error;    //flag for whether there is an error var
$format;     //file format of image var $currentDimensions=array(); 
//current dimensions of working image var $newDimensions=array();   
//new dimensions after manipulation var $newImage;   //final image to
be displayed/saved var $oldImage;    //original image to be manipulated
var $workingImage;   //working image being manipulated var $fileName;   
//filename of image, can include directory var $maxWidth;    //maximum
width of the image var $maxHeight;   //maximum height of the image var
$percent;    //percentage of the original image size var $quality;  
//image quality of jpeg images var $cropSize;.... 
```

这是函数 date_diff ：

```
function date_diff($start_date,$end_date)
    {
        $splitstdate = split(" ",$start_date); 
        $splitenddate = split(" ",$end_date); 

        list($year,$month,$day)=split("-",$splitstdate[0]);
        list($year_test,$month_test,$day_test)=split("-",$splitenddate[0]);

        list($hour,$min,$sec)=split(":",$splitstdate[1]);
        list($hour_test,$min_test,$sec_test)=split(":",$splitenddate[1]);

        $start = mktime($hour, $min, $sec,$month,$day,$year);
        $end = mktime($hour_test, $min_test,$sec_test,$month_test,$day_test,$year_test);
        $date_diff =   $start-$end;
        if($date_diff<0)
        $date_diff=0;
        $days = intval($date_diff /(3600*24)) ; 

        $hms = date('h \h\r \m\i\n s \s\e\c \a\g\o',$date_diff);
        return $days.' days '.$hms ;
} 
```

谁能知道bug的原因和解决方法？谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:38:26.970

`date_diff()`是 php 5.3.0 版本的内置功能。及以上版本，你可以检查[http://php.net/manual/en/function.date-diff.php](http://php.net/manual/en/function.date-diff.php)这就是你得到的原因`Fatal error: Cannot re-declare date_diff()`所以改变你的函数名这将解决你的问题

您可以在日期差异上查看我的答案[https://stackoverflow.com/a/14938421/718224以获取更多信息。](https://stackoverflow.com/a/14938421/718224)

**注意：**在 < 5.3.0 的版本中，我只是使用此表格来计算天数

```
<?php
$today = strtotime("2011-02-03 00:00:00");
$myBirthDate = strtotime("1964-10-30 00:00:00");
printf("I'm %d days old.", round(abs($today-$myBirthDate)/60/60/24));
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T10:32:30.207

`date_diff` is inbuilt function in `php` version `5.3.0` you can't redeclare it.

# datetime - SAS将字符串转换为日期时间

> ID：15544981
> 
> 赞同：2
> 
> 时间：2013-03-21T10:30:25.783
> 
> 标签：datetime, casting, sas

我在代表日期时间的字符串表中有一个列，例如`"01-Oct-2012 12:23:43.324"`如何将其转换为 SAS `datetime`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:01:58.580

DATETIME 信息将读取该字符串

```
new_var=input(datestring,datetime24.);
format new_var datetime24.; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:57:32.333

我不认为有一个单一的信息可以读取日期时间的格式......所以将其拆分为日期和时间组件，然后使用 dhms 函数创建一个日期时间值。

```
数据有；
  日期字符串 =“2012 年 10 月 1 日 12:23:43.324”；
跑 ;

数据要；
  设置有；

  dt = input(scan(datestring,1,' '),??date11.) ;
  tm = input(scan(datestring,2,' '),??time14.) ;
  dttm = dhms(dt,0,0,tm) ;

  格式 dt date9\. tm 时间14.3 dttm 日期时间24.3 ；
跑 ;

```

# jsf-2 - ViewScope：定位“正确的”复合组件的对象实例

> ID：15544982
> 
> 赞同：2
> 
> 时间：2013-03-21T10:30:26.260
> 
> 标签：jsf-2

进一步了解 jsf 2 视图范围的理解过程，我又遇到了问题。

我的复合组件的绑定对象创建了多个实例，并且设置值似乎没有针对“正确”的对象。

我的初始设置与[从视图范围的 bean 自动实例化会话范围的 bean中的初始设置相同](https://stackoverflow.com/questions/15527304/auto-instantiate-session-scoped-bean-from-view-scoped-bean)

现在我创建了一个复合组件：

```
<composite:interface componentType="helloWidget">

</composite:interface>

<composite:implementation>
    <h:outputText value="Visible state of this composite component: #{cc.visibleState}"/>
</composite:implementation> 
```

及其java对应物

```
@FacesComponent(value = "helloWidget")
public class HelloWidget extends UINamingContainer implements Serializable {

    private static final long serialVersionUID = 2L;
    private boolean visible;

    public void show() {
        System.out.println("Setting visible state to true " + this);
        visible = true;
    }

    public void hide() {
        System.out.println("Setting visible state to false " + this);
        visible = false;
    }

    public String getVisibleState() {
        System.out.println("Getting visible state of " + this + "(" + visible + ")");
        return String.valueOf(visible);
    }
} 
```

然后我升级了我的 ViewBean.java

```
private HelloWidget helloWidget;
private boolean visible;

public String getVisibleState() {
    return String.valueOf(visible);
}

public void actionShow(ActionEvent ae) {

    visible = true;
    helloWidget.show();
}

public void actionHide(ActionEvent ae) {

    visible = false;
    helloWidget.hide();
}

public HelloWidget getHelloWidget() {
    return helloWidget;
}

public void setHelloWidget(HelloWidget helloWidget) {
    this.helloWidget = helloWidget;
} 
```

和我的 hello.xhtml：

```
<f:view>
    <h:form>
        <h:outputText value="View-scoped bean visible value: #{viewBean.visibleState}"/>
        <br/>
        <mycc:helloWidget binding="#{viewBean.helloWidget}"/>
        <br/>
        <h:commandButton value="Show" actionListener="#{viewBean.actionShow}"/>
        <h:commandButton value="Hide" actionListener="#{viewBean.actionHide}"/>
    </h:form>
</f:view> 
```

当我现在点击显示/隐藏按钮时，视图范围 bean 中“可见”属性的值会按预期更改。HelloWidget 属性的“可见”值也发生了变化，但是当页面显示时，会显示一个不同的 HelloWidget 实例，它的可见设置为（默认）false。

我在这里做错了什么？我绑定复合组件的方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:46:44.360

组件在视图的构建/恢复期间被实例化。因此，它们本质上是请求范围的。您希望保留在视图范围内的任何状态都需要存储在 JSF 视图状态中。正常的方法是让代表视图范围状态的属性的 getter/setter 委托给[`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29).

所以，这应该这样做：

```
@FacesComponent(value = "helloWidget")
public class HelloWidget extends UINamingContainer implements Serializable {

    private static final long serialVersionUID = 2L;

    public void show() {
        setVisible(true);
    }

    public void hide() {
        setVisible(false);
    }

    public Boolean getVisible() {
        return (Boolean) getStateHelper().eval("visible");
    }

    public void setVisible(Boolean visible) {
        getStateHelper().put("visible", visible);
    }
} 
```

You've however another potential problem not related to this issue: using `binding` on a view scoped bean property causes the view scoped bean itself to be recreated during every request. Use the `binding` attribtue with extreme care. This problem has the same grounds as already explained in [JSTL in JSF2 Facelets... makes sense?](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense).

# jquery - 开始使用 jquery datepicker

> ID：15544984
> 
> 赞同：8
> 
> 时间：2013-03-21T10:30:28.340
> 
> 标签：jquery, datepicker

我正在学习网络编程，现在我坚持使用 jquery datepicker。我需要一个完整的示例/教程，其中包含**分步**指南如何：

1.  显示 jquery 日期选择器
2.  用它
3.  获取用户输入

我做了很多搜索，但我得到的只是关于“*如何修改它（使用 css）* ”的教程。我需要一个对初学者更友好的教程（我刚刚开始使用`jquery`and `AJAX`，但我知道标准`javascript`）。

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T10:34:34.150

您需要一个输入字段，然后`jQuery`通过调用以下`datepicker`方法将日期选择器添加到其中：

```
 <input type="text" id="datepicker" />

 <script>
   $(function() {
     $("#datepicker").datepicker();
   });
 </script> 
```

**$(function() { }**表示一旦加载 ，它将调用该`datepicker`方法并将其附加到 HTML 输入控件。`datepicker``DOM`

[http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# ibm-sbt - 从 IBM Connections 获取访问令牌时出错

> ID：15544991
> 
> 赞同：0
> 
> 时间：2013-03-21T10:30:43.363
> 
> 标签：ibm-sbt

我能够获得授权令牌，但在访问令牌时出现错误，这些是我现在正在执行的步骤，

1.获取代码：

https://{host}/oauth2/endpoint/connectionsProvider/authorize?response_type=code&client_id=sample_application&redirect_uri=http://{host}

我得到了类似的东西：

http://{host}/?code=XMQPNpxCxkRCfIXMFbWiTQVD4PcM11

2.尝试使用：POST方法获取访问令牌：

POST https://{host}/oauth2/endpoint/connectionsProvider/token?grant_type=authorization_code&redirect_uri=http://{host}&client_id=sample_application&client_secret=pIEaHOQ6odz0Vr9fKTmiS0NgQF2uGAUDl2i9ZHS38qE7TGZD2nn3RcSl2bEI

有效载荷数据为：code=XMQPNpxCxkRCfIXMFbWiTQVD4PcM11

仅在第二步中，我遇到了错误。

请给我建议。

-威尔钢铁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T10:38:51.490

解决了这个问题，问题是我们发送的标头是 MediaType.APPLICATION_JSON 但令牌端点 api 需要**MediaType.APPLICATION_FORM_URLENCODED**，因此通过更改标头，oauth 流程起作用。

# android - 有没有办法检测用户何时更改了设备上的时钟时间？

> ID：15544996
> 
> 赞同：45
> 
> 时间：2013-03-21T10:30:59.800
> 
> 标签：android, time

有没有办法检测 Android 系统时钟何时被**用户**在 Android 中重置？

我正在设计一个应用程序，它使用系统时间来确定用户何时在某个时间到达某个地点，并且我不想在那时依赖网络可用性。显然，因此最好知道用户何时更改了系统时钟，这样他们就不能“作弊”。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-06-18T17:40:31.467

就在这里。[`ACTION_TIME_CHANGED`Intent](http://developer.android.com/reference/android/content/Intent.html#ACTION_TIME_CHANGED)在设备时间改变时被广播，你可以有一个方法在检测到这个 Intent 时触发。

这个意图从 API 级别 1 开始就存在于 Android 中，因此它应该适用于您可能需要兼容的任何平台。

您需要使用以下命令处理广播[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)：

```
public class TimeChangedReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        //Do whatever you need to
    }

} 
```

您还需要在清单中添加类似的内容：

```
<receiver android:name=".TimeChangedReceiver">
  <intent-filter>
    <action android:name="android.intent.action.TIME_SET" />
  </intent-filter>
</receiver> 
```

当检测到这种类型的意图时，这将使 Android 知道触发您的接收器。

似乎这并不关心谁编辑时间，但也不会在您与网络同步时触发自动调整。但是，如果您丢失网络并重新获得它，这可能会触发，因为您的时间会略有不同（假设您使用的是自动网络时间）。

然而，虽然手机上的时钟不是**特别**准确（因为它们通常依赖于与接收到的时间信号同步），但根据我的经验，它们绝对不应该超过大约 30 秒或每小时一分钟，在绝对最大值，所以如果时间变化很小，您也许可以假设它是自动的。添加闰秒时，也可能会产生时间更改消息，尽管这些显然很小且不常见。

您可以使用[`ConnectivityManager`](http://developer.android.com/reference/android/net/ConnectivityManager.html)来跟踪手机是否有连接，并且您可以基于此更改行为（即只要存在网络连接，并且时间是自动/网络时间，忽略时间变化或其他东西）但是我找不到任何有关丢失/恢复网络连接的意图，因此您可能必须使用轮询方法。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-21T11:06:00.423

`System.currentTimeMillis()`如果用户调整时钟，`SystemClock.elapsedRealtime()`系统时间（通过跟踪这两者之间的差异，可以检测到用户对系统时钟的重大更改。

重要的是不要跟踪可能由网络更新系统时钟引起的小变化。我将假设出于我的目的，大约半小时内的任何更改都无关紧要。系统时间不应该随着`Locale`国家/地区的变化而变化，但这也可能值得消除。

经过的实时显然会在启动时重置，所以我应该包括一个`BroadcastReceiver`在接收时重置差异`android.intent.action.BOOT_COMPLETED`。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-07-15T09:31:42.777

对 matt5784 的回答稍加注意：我发现在 Android 4.1.2 上，意图操作不可用，不知道这是否适用于所有 android 版本或仅适用于我的版本。代替

```
 "android.intent.action.ACTION_TIME_CHANGED" 
```

利用

```
 "android.intent.action.TIME_SET" 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-24T04:17:47.070

我们可以同时使用`TIME_SET`和`TIMEZONE_CHANGED`。

```
<application
    ...>

    <receiver android:name=".TimeChangedReceiver">
        <intent-filter>
            <action android:name="android.intent.action.TIME_SET"/>
            <action android:name="android.intent.action.TIMEZONE_CHANGED"/>
        </intent-filter>
    </receiver>
</application> 
```

TimeChangedReceiver.java

```
public class TimeChangedReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "time change " + intent.getAction(), Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T10:35:44.043

如果您不介意您的应用程序在用户的时钟由于 *DT/*ST 偏移而更新的情况下进行作弊，偶尔与可以倒带时钟的 NTP 源同步时间，您自己的进程停止，您可以实现“对系统时间进行相应的“检查”，这样如果时间“倒退”，您就会认为这是“作弊”。否则，您必须依赖服务器，这将是您“有效”时间的来源。即便如此，您的服务器时间也偶尔会倒退。