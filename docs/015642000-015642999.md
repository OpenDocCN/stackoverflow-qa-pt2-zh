# StackOverflow 问答 15642000-15642999

# java-7 - JNLP XX:-UseSplitVerifier in 1.7

> ID：15642000
> 
> 赞同：1
> 
> 时间：2013-03-26T16:13:31.593
> 
> 标签：java-7, jnlp, jvm-arguments

有没有办法在 1.7 的 JNLP 文件中设置 -XX:-UseSplitVerifier jvm arg？在文档中我没有发现它受支持，当我尝试时它被忽略了。

# python - 导入错误：没有名为 http django 的模块

> ID：15642004
> 
> 赞同：2
> 
> 时间：2013-03-26T16:13:40.203
> 
> 标签：python, django, web-applications

我的 wsgi.py 文件中出现错误。它抱怨说：

```
File "(directory)/.local/lib/python2.7/site-packages/Django-1.5 py2.7.egg/django/core/handlers/wsgi.py", line 9, in <module>
    from django import http
ImportError: cannot import name http 
```

我检查了目录http是否存在于（目录）/.local/lib/python2.7/site-packages/Django-1.5 py2.7.egg/django/中。此外，在导入 django.core 时，没有问题，但是在导入任何其他模块时，它会给出相同的错误。这是（目录）/.local/lib/python2.7/site-packages/Django-1.5 py2.7.egg/django/的目录信息：

```
django:
    bin  conf  contrib  core  db  dispatch  forms  http  __init__.py  __init__.pyc  middleware  shortcuts  template  templatetags  test  utils  views 
```

这是http的目录信息：

```
http:
    cookie.py  cookie.pyc  __init__.py  __init__.pyc  multipartparser.py  multipartparser.pyc  request.py  request.pyc  response.py  response.pyc  utils.py  utils.pyc 
```

编辑：

python shell中给出的错误：

```
>>from django import http
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: cannot import name http

>>from django import core
>> 
```

通过删除也称为 django 的本地目录解决了错误。但是，本地目录已经到位，因为我将我的站点放在无法编辑站点包的共享服务器上。有没有办法让应用程序从我的本地和服务器的 django 文件夹中读取，以便我可以使用不在服务器的 django 目录中的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:04:58.260

您可以将本地 django 文件夹转换为命名空间。这告诉 python 解释器继续遍历模块的路径，即使它之前找到了一个匹配的模块（即你添加的 'django' 模块）。

将此添加到本地 django 文件夹中的 __init__.py 中：

```
import pkg_resources
pkg_resources.declare_namespace(__name__) 
```

当 python 找到这个模块时，它会运行这个代码来将它注册为一个命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:01:52.307

您需要将[PYTHONPATH](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)环境变量设置为指向您的本地模块。

# php - 需要帮助将选择中的答案保存到数据库中

> ID：15642008
> 
> 赞同：0
> 
> 时间：2013-03-26T16:13:48.767
> 
> 标签：php, mysql

你好呀;

我需要一些帮助; 我需要将选择的答案保存到我的数据库中。我不知道我哪里出错了。这是有关我的代码的一些详细信息。

1.  我有一个名为“lib”的数据库
2.  该表名为“游戏”
3.  我需要将以下内容保存到表格中；1）游戏（所有单词）和2）类型
4.  这是一个锦标赛网站。这样我就可以通过 XAMPP 在 LAN 上使用它。

这是我的代码。 [http://pastebin.com/iP7MCMzJ](http://pastebin.com/iP7MCMzJ)

提前致谢！

更新：

感谢所有的帮助！我发现并解决了我的问题！在我的数据库中，VARCHAR 限制为 50 个字符。我已经解决了。**现在一切都很好:)**

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:22:25.440

好吧，您没有显示任何代码，但这是我希望它根据您的描述工作的方式：

您的 HTML 将看起来像：

```
<?php echo '<option name="game" value="' . htmlentities($game) . '">' . $row['game'] . '</option>'; ?> 
```

注意`name`属性？另外，我更改了 HTML 的编写方式，因为您的 HTML 很难阅读。

PHP

```
if(isset($_POST['game']) && isset($_POST['type'])){
$game = $_POST['game'];
$type = $_POST['type'];

// PLEASE CLEAN YOUR INPUT PRIOR TO INSERTING THIS DATA!

Insert into games (Game, Type) VALUES ($game, $type)
}
else{
echo( "error getting info");
} 
```

# javascript - 难以保持元素旋转一致？

> ID：15642010
> 
> 赞同：0
> 
> 时间：2013-03-26T16:13:54.110
> 
> 标签：javascript, jquery, css, rotation, transform

对于我目前正在从事的一个项目，我需要一个轮子，必须有一个 1:1 的旋转。

到目前为止，我已经获得了一个点击和拖动旋转机制，但问题是它非常不稳定，从某种意义上说，我已经让它完美地工作，然后在某个时刻（没有我更改代码）它会突然变得混乱即使在页面刷新和缓存清除之后，也无法正确旋转。

在将其从本地服务器移至实时测试服务器后，我首先注意到了这一点。另一个奇怪的特征是，当鼠标在滚轮边界之外时它会完美旋转，当回到滚轮边界时会开始混乱（我用不可见的 SVG 圆圈形式的捕鼠器检测到鼠标移动，完美地重叠图像）。

整个事情非常简单：

```
$('.mouse_trap').mousedown(function(){
        intervalvar = setInterval(monitorClicks, 24);
    }).mouseup(function(){
        clearInterval(intervalvar);
    }) 
```

当用户单击并拖动滚轮时，它会相应地设置和停止 setInterval（同时一个单独的函数正在监视鼠标位置）。

```
function monitorClicks(){
    xrel = xpos - midx;
    yrel = -(ypos - midy);

    a = Math.atan2(yrel,xrel);
    a = a *  (180 / Math.PI);
    a = -a;

    roulette.css({
        '-webkit-transform' : 'rotate(' + a + 'deg)',
        '-ms-transform' : 'rotate(' + a + 'deg)',
        '-o-transform' : 'rotate(' + a + 'deg)',
        '-moz-transform' : 'rotate(' + a + 'deg)',
        'transform' : 'rotate(' + a + 'deg)'
    });

    console.log(a); 

} 
```

我找到鼠标位置，将中点变成圆的中心，然后使用坐标应用 atan2 来获得我的角度。

你可以在这里找到实验：

[http://www.techgoldmine.com/spinny_thing/](http://www.techgoldmine.com/spinny_thing/)

# javascript - 验证后指向第一个字段

> ID：15642012
> 
> 赞同：0
> 
> 时间：2013-03-26T16:13:56.000
> 
> 标签：javascript, html, jsp

我有一个包含复选框、输入字段、下拉列表等的网页，

强制条件使用 javascript 检查。如果有人未能填写这些字段并按下下一步按钮验证错误弹出。

现在我想要实现的是当有人未能在必填字段中输入信息时，光标应该转到导致错误的第一个字段。

谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:16:11.607

`input-error`为每个无效字段添加一个类（类似于）。然后使用类似的东西：

```
var errors = document.querySelectorAll(".input-error");
if (errors.length > 0) {
    errors[0].focus();
} 
```

这是一个例子：http: [//jsfiddle.net/NtHzV/1/](http://jsfiddle.net/NtHzV/1/)

这实际上完全取决于您的代码结构、您的验证方式、您实际使用验证做什么以及您的 HTML 是什么。

同时，如果您正在执行与我的示例类似的操作，您不妨跟踪第一个有错误的输入，然后`focus()`在验证结束时跟踪它。像这样的东西：

[http://jsfiddle.net/NtHzV/2/](http://jsfiddle.net/NtHzV/2/)

**更新：**

Bergi 指出，`querySelector`也可以使用（而不是`querySelectorAll`），因为您只是在寻找第一个有错误的输入。所以这里有一个更新：

```
var error_input = input_area.querySelector(".input-error");
if (error_input !== null) {
    error_input.focus();
} 
```

[http://jsfiddle.net/NtHzV/3/](http://jsfiddle.net/NtHzV/3/)

以下是有关规格`querySelector`：[https](https://developer.mozilla.org/en-US/docs/DOM/element.querySelector) ://developer.mozilla.org/en-US/docs/DOM/element.querySelector - 请注意，< IE8 不支持它。

使用`".input-error"`是因为那是 CSS 类选择器，它将在特定区域中查找第一个（如果有的话）元素，类为“input-error”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:16:04.103

此行将页面聚焦在您指定的元素上。您应该能够将其实施到您的验证检查中，以专注于不良元素。

`document.getElementById("ID_Of_bad_field").focus();`

# ios - 为什么我的 UILabel 没有改变字体？

> ID：15642016
> 
> 赞同：1
> 
> 时间：2013-03-26T16:14:10.177
> 
> 标签：ios, xcode, fonts

我在这里阅读了关于 XCode 中自定义字体的不同答案，但我仍然无法让它工作。

我做了什么：

将其添加到 Plist。将其添加到复制绑定资源。

如果我做：

```
for ( NSString *familyName in [UIFont familyNames] )
    {
        NSLog(@"Family: %@", familyName);
        NSLog(@"Names = %@", [UIFont fontNamesForFamilyName:familyName]);
    } 
```

它将打印它：

```
2013-03-26 17:04:52:214 Appname[21704:2311] Family: Patrick Hand
2013-03-26 17:04:52:217 Appname[21704:2311] Names = (
    "PatrickHand-Regular"
) 
```

而且我尝试使用以下两种方式设置字体：

```
self.usernameLabel.font = [UIFont fontWithName:@"PatrickHand-Regular" size:30]; 
```

和

```
self.usernameLabel.font = [UIFont fontWithName:@"PatrickHand" size:30]; 
```

我最绝望的尝试是这样的：

```
for ( NSString *familyName in [UIFont familyNames] )
    {
        NSLog(@"Family: %@", familyName);
        NSLog(@"Names = %@", [UIFont fontNamesForFamilyName:familyName]);
        [self.usernameLabel setFont:[[UIFont fontNamesForFamilyName:familyName] objectAtIndex:0]];
        if ( [familyName isEqualToString:@"Patrick Hand" ])
        {
        NSLog(@"BREAK!");
        break;
        }
    } 
```

但它仍然没有改变。

建议尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:46:12.933

当您想通过使用`IBOutlet`实例变量来更改用户界面中的某些内容时，您需要确保在适当的时间调用代码。

例如，假设您有一个如下所示的类：

```
@interface MDViewController : UIViewController

@property (nonatomic, strong) IBOutlet UILabel *usernameLabel;

@end 
```

还有一个`MDViewController.nib`文件包含视图控制器的 UI，假设您想将标签的内容设置为某个值。

通常，在对象的生命周期中调用`init`类似`init`or的方法`initWithCoder:`太早，无法与 UI 中的对象进行通信，因为 nib 文件尚未完全加载，`IBOutlet`此时您的实例变量仍将是`nil`.

稍后，在 、 、 和 等方法`awakeFromNib`中`viewDidLoad`，`viewWillAppear`将`viewDidAppear`正确`IBOutlets`设置 ，您可以与 UI 对象进行通信。

在您的情况下，`viewDidLoad`或者`viewWillAppear`可能是设置此值的好点（取决于您的具体需求）。

# java - 在 Java Swing 中打印账单

> ID：15642017
> 
> 赞同：0
> 
> 时间：2013-03-26T16:14:11.923
> 
> 标签：java, swing, printing, billing

我用 Java 制作了一个计费软件（使用 Netbeans），所有组件现在都可以正常工作，除了打印部分......

我想**画一张账单**（带有商店名称、地址等...），**添加**jTable 的值（包含销售详细信息），还有一个**页脚**（包含日期、时间等）...

谁能指导我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:20:19.243

使用像[Jasper Reports](http://community.jaspersoft.com/wiki/jasperreports-library-tutorial)这样的专用库。之后会变得容易得多，而且他们的指南非常全面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:24:39.057

尝试使用嵌套面板。使用 JPanel 类。策略可以是为整个账单使用 1 个主面板。向此主面板添加 3 个不同的面板。将标题（绘制账单（带有商店名称、地址等...））添加到第一个面板。JTable 中的销售信息。将此表添加到第二面板。同样将页脚添加到最后一个面板。请参阅此链接以获取[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)。

# android - 从列表视图将图像从一个活动发送到另一个活动

> ID：15642019
> 
> 赞同：0
> 
> 时间：2013-03-26T16:14:28.763
> 
> 标签：android, android-intent, bitmap, android-imageview

我有一个显示图像、名称、价格的列表视图。

我试图做的是单击该列表，我应该将图像的名称和价格发送到下一个活动。

```
Intent in = new Intent(getApplicationContext(), DescActivity.class);
ImageView img=(ImageView)view.findViewById(R.id.list_image);
String name=((TextView) view.findViewById(R.id.name)).getText().toString();
String price=((TextView) view.findViewById(R.id.price)).getText().toString();
Bitmap bitmap = img.getDrawingCache();
in.putExtra("IMAGE", bitmap);
in.putExtra("NAME",name );
in.putExtra("PRICE", price);
startActivity(in); 
```

但是上面的代码不起作用。请帮我。我坚持了 3 天 :'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:05:08.253

您也可以在第一个活动中使用它-

```
 Drawable drbl=_imageView.getDrawable();
   Bitmap bit = ((BitmapDrawable)drbl).getBitmap();
   intent.putExtra("Bitmap",bit); 
```

在第二个活动中——

```
 Bitmap _mBitmap=intent.getParcelableExtra("Bitmap");
 Drawable _mDrawable=new BitmapDrawable(getResources(),_mBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:37:18.380

你试过这个吗，

```
Intent i = new Intent(this, SecondActivity.class);
Bitmap b = img.getDrawingCache();
ByteArrayOutputStream bs = new ByteArrayOutputStream();
b.compress(Bitmap.CompressFormat.PNG, 50, bs);
i.putExtra("myImage", bs.toByteArray());
startActivity(i); 
```

然后在您的下一个活动中使用

```
if(getIntent().hasExtra("myImage")) {
    ImageView image = new ImageView(this);
    Bitmap b = BitmapFactory.decodeByteArray(
        getIntent().getByteArrayExtra("myImage"),0,getIntent().getByteArrayExtra("myImage").length);        
    image.setImageBitmap(b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:42:56.257

试试这个 - 在第一个活动中使位图静态。IE

```
static Bitmap bitmap = img.getDrawingCache(); 
```

在第二个活动中-

```
 Bitmap _mBitmap=FirstAcitivity.bitmap; 
```

# php - Typo3：ImageMagick 组合不起作用

> ID：15642025
> 
> 赞同：0
> 
> 时间：2013-03-26T16:14:54.117
> 
> 标签：php, macos, imagemagick, typo3

我希望在 Typo3 中使用图像蒙版。在尝试了各种方法但都没有奏效后，我决定检查安装工具。

安装工具说 ImageMagick 安装正确，路径正确，所有图像测试成功完成，**除了转换/组合测试**。测试显示“ImageMagick 操作没有结果”。

此外，当我使用 gifbuilder 输出图像时，图像的尺寸会被正确读取，尽管输出的图像保持空白。（当我设置了 backColor 时，它是白色或其他颜色）

我在用：

*   最大 OSX 10.7.5
*   XAMPP
*   PHP 5.3.1
*   Typo3 6.0.4
*   ImageMagic 6.7.3-2

这是一些测试打字稿代码（在我的安装中会产生全红色的图像而不是原始图像）

```
lib.test = IMAGE
lib.test {
    file = GIFBUILDER
    file {
        XY = [10.w],[10.h]
        backColor = #FF0000

        10 = IMAGE
        10.file = fileadmin/user_upload/test.jpg
    }
} 
```

附上结果来自`combining images test`。

![在此处输入图像描述](../Images/2e996b3577a78ba5af30e7211c780413.png)

**有谁知道我可能做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:12:37.267

一些较新的 imagemagick 版本使用`composite`as 命令而不是`combine`. 安装工具中有一个选项可以设置要使用的命令。该设置称为`[GFX][im_combine_filename]`。

# c# - 清除值时组合框不会恢复为空

> ID：15642029
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:15:00.257
> 
> 标签：c#, winforms, visual-studio, visual-studio-2008

由于 .NET 中的一个缺陷（微软说它是有意的，但我认为这是一个严重的缺陷）如果用户清空一个组合框（即想要清空该值），则所选值不会恢复为 null 而是保留最后一个有效的选定值，因此当您使用空白组合框保存时，它会恢复为原始值。一种解决方法是首先从下拉列表中选择不同的选项，然后将其空白，它将正常工作。但是，这不是应用程序用户所希望的。

那么有没有办法可以解决这个问题。或者我是否可以为“NONE”添加一个选项，然后将数据库中的值更改为 NULL。注意：Combobox 具有数据绑定功能，我无法为 Names 添加选项 none。

Form.Desginer.cs 的内容：

```
private void InitializeComponent()
    {
      ......
      this.cmbSecCSR = new System.Windows.Forms.ComboBox();
      this.csrBindingSource2 = new System.Windows.Forms.BindingSource(this.components);
      .....
       // 
        // pnlCSRs
        // 
        this.pnlCSRs.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
        this.pnlCSRs.Controls.Add(this.cmbSecCSR);
        ......
       // 
        // cmbSecCSR
        // 
        this.cmbSecCSR.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
        this.cmbSecCSR.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
        this.cmbSecCSR.DataSource = this.csrBindingSource2;
        this.cmbSecCSR.DisplayMember = "Name";
        this.cmbSecCSR.FormattingEnabled = true;
        this.cmbSecCSR.Location = new System.Drawing.Point(112, 26);
        this.cmbSecCSR.Margin = new System.Windows.Forms.Padding(0);
        this.cmbSecCSR.Name = "cmbSecCSR";
        this.cmbSecCSR.Size = new System.Drawing.Size(184, 21);
        this.cmbSecCSR.TabIndex = 2;
        this.cmbSecCSR.ValueMember = "Username";

        this.cmbSecCSR.TextChanged += new System.EventHandler(this.comboBox_TextChanged);
        this.cmbSecCSR.Enter += new System.EventHandler(this.cmbBox_Entered);
        // 
        // csrBindingSource2
        // 
        this.csrBindingSource2.DataMember = "CSR";
        this.csrBindingSource2.DataSource = this.productionDS;
        //..............
   } 
```

以上是与此组合框相关的点点滴滴（我只是在修复应用程序中的错误，以及 C# 中的新手。

.CS 文件中与此组合框相关的内容如下：

```
private void loadDetails()
   {
     this.productionCrewTableAdapter.FillByProductionID(this.productionDS.ProductionCrew, productionID);
cmbSecCSR.DataBindings.Add("SelectedValue", productionMasterBindingSource, "CSR2", true, DataSourceUpdateMode.OnPropertyChanged);
}
  private void comboBox_TextChanged(object sender, EventArgs e)
    {
        ComboBox cmbx = (ComboBox)sender;
        if (cmbx.Equals(cmbCamSupplier))
        {

        }
        else if (cmbx.Equals(cmbLGSupplier))
        {

        }
        if (cmbx.Text.Length > 0) return;
        cmbx.ResetText();
        cmbx.SelectedIndex = -1;
    }

 private void cmbBox_Entered(object sender, EventArgs e)
    {
        ComboBox cmb = (ComboBox)sender;
        String txt = cmb.Text;
        if (cmb.Name.Contains("CSR"))
        {
            if (cmb != null)
            {
                ((BindingSource)cmb.DataSource).Filter = (cmbOffice.SelectedIndex > -1 ? "Office = '" + cmbOffice.SelectedValue + "' AND " : "") + "IsCSR=1 AND Status=1";
                cmb.Text = txt;
            }
        }
        else if (cmb.Name.Contains("RC"))
        {
            int department = 0;
            if (cmb != null)
            {
                if (cmb.Name.Contains("Camera"))
                    department = 2;
                else if (cmb.Name.Contains("LG"))
                    department = 3;
                else if (cmb.Name.Contains("Power"))
                    department = 4;
                ((BindingSource)cmb.DataSource).Filter = (cmbOffice.SelectedIndex > -1 ? "Office = '" + cmbOffice.SelectedValue + "' AND " : "") + "IsCSR=0 AND Status=1 AND (Department = " + department + " OR Department is null OR Department = 0)";
                cmb.Text = txt;
            }
        }
    } 
```

如果有人可以帮助我解决我一直在努力解决的这个问题，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:02:02.493

同时给您的话费清算价值与

```
this.cmbSecCSR.Items.Clear() 
```

你必须做一个

```
this.cmbSecCSR.Text = "" 
```

或者

```
this.cmbSecCSR.Text = "Default Text" 
```

清除组合框中的选定文本。

# android - 如何在 android 版本 4.X 中运行没有活动的应用程序

> ID：15642031
> 
> 赞同：0
> 
> 时间：2013-03-26T16:15:03.593
> 
> 标签：android

实际上，我的应用程序仅在启动完成时才运行服务。它在 android 2.2 中运行良好。

但是当我安装 4.0 android 支持的设备时它不起作用。即使安装后应用程序没有运行。我知道在 3.X android 之后，应用程序在安装时没有运行。

那么只有面向服务的应用程序如何在 > 3.x android 版本中运行？

任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:25:46.420

> 如何在 android 版本 4.X 中运行没有活动的应用程序

你没有。

首先，你几乎总是需要一个活动：

*   你需要在某处有你的版权声明
*   您需要在某处获得许可协议
*   您需要披露您在某处使用的其他开源组件
*   您需要提供对技术支持的访问权限，即使它只是指向您网站的链接，在某个地方
*   您需要允许用户在某处配置服务的行为
*   您需要在某处授予用户访问在线帮助的权限
*   您想避免来自没有启动器活动的应用程序的一星评级，当用户安装应用程序时，无法弄清楚如何运行应用程序，并因此认为您是一个彻头彻尾的白痴

这超出了在任何 manifest-registered `BroadcastReceiver`s 工作之前手动启动应用程序组件的技术要求。

# python - 通过循环 Tkinter 创建元素

> ID：15642039
> 
> 赞同：0
> 
> 时间：2013-03-26T16:15:30.633
> 
> 标签：python, user-interface, tkinter

我正在寻找一种在 Tkinter 中动态创建元素的方法。例如，假设用户输入 5，我想要一个循环来创建 5 个单选按钮和它们旁边的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:42:24.147

这是一个简单的示例，可以帮助您入门：

```
import Tkinter as tk

class ButtonBlock(object):
    def __init__(self, master):
        self.master = master
        self.button = []
        self.button_val = tk.IntVar()
        entry = tk.Entry()
        entry.grid(row=0, column=0)
        entry.bind('<Return>', self.onEnter)
    def onEnter(self, event):
        entry = event.widget
        num = int(entry.get())
        for button in self.button:
            button.destroy()
        for i in range(1, num+1):
            self.button.append(tk.Radiobutton(
                self.master, text=str(i), variable=self.button_val, value=i,
                command=self.onSelect))
            self.button[-1].grid(sticky='WENS', row=i, column=0, padx=1, pady=1)
    def onSelect(self):
        print(self.button_val.get())

if __name__ == '__main__':
    root = tk.Tk()
    ButtonBlock(root)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:37:56.797

小部件没有什么特别之处。您可以像创建任何其他对象一样在循环中创建它们：

```
for i in range(5):
    r = tk.Radiobutton(...)
    r.pack(...) # or .grid(...)

    # if you need to reference these buttons later,
    # save them in a list
    self.buttons.append(r) 
```

# c# - 字符串处理/CSV 挑战

> ID：15642040
> 
> 赞同：0
> 
> 时间：2013-03-26T16:15:32.990
> 
> 标签：c#, string, csv

使用[SQL Server 批量插入带有不一致引号的 CSV 文件](https://stackoverflow.com/questions/782353/sql-server-bulk-insert-of-csv-file-with-inconsistent-quotes)（CsvToOtherDelimiter 选项）作为我的基础后，我发现了 RemoveCSVQuotes 部分的一些奇怪之处[它从包含逗号的引用字符串中截断了最后一个字符！]。所以..重写了那一点（也许是一个错误？）

一个问题是客户问“这样的数据怎么样？”

```
""17.5179C,"" 
```

我假设如果我想继续使用 CsvToOtherDelimiter 解决方案，我必须修改 RegExp ......但这超出了我的范围......最好的方法是什么？

澄清一下：在使用格式文件运行批量插入之前，我们使用 C# 将文件预处理为管道分隔的格式。速度非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:15:29.497

我最终使用了我不知道我们已经拥有的 csv 解析器（作为我们代码生成工具的一部分） - 并注意到“17.5179C”无效并且会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:25:56.593

您的链接中接受的答案以：

> 您将需要预处理文件，期间。

为什么不将您的 csv 转换为 xml？然后，您将能够在存储到数据库之前根据 xsd 验证您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:22:38.613

要将 CSV 字符串转换为元素列表，您可以编写一个程序来跟踪状态（引号内或引号外），因为它一次处理一个字符的字符串，并发出它找到的元素。CSV 中的引用规则很[奇怪](http://en.wikipedia.org/wiki/Comma-separated_values)，因此您需要确保有足够的测试数据。

状态机可以是这样的：

1.  扫描直到引用（转到 2）或逗号（转到 3）
2.  如果下一个字符是引号，则只在字段中添加两个引号中的一个并返回1。否则，转到4（如果引号不是字段中的第一个字符，则报告错误）。
3.  发射场，转到 1
4.  扫描至报价（转至 5）
5.  如果下一个字符是引号，则仅将两个引号中的一个添加到该字段并返回 4。否则，发出该字段，扫描逗号，然后转到 1。

这应该正确扫描以下内容：

*   你好，世界，123, 456
*   “你好世界”, 123, 456
*   “他说”“你好，世界！””，“我打了声招呼”
*   ""17.5179C,"" （正确报告错误，因为第一个引号字符串“”和第二个字段 17.5179C 之间应该有分隔符）。

另一种方法是找到一些做得很好的现有库。当然，CSV 足够普遍，这样的东西一定存在吗？

编辑：

您提到速度至关重要，所以我想指出（只要引用的字符串不允许包含行返回......）每行可以并行独立处理。

# xml - XML 模式验证：找不到元素的声明

> ID：15642046
> 
> 赞同：29
> 
> 时间：2013-03-26T16:15:42.023
> 
> 标签：xml, xsd, xml-validation, xml-error

我对 XML Schema 等还有些陌生，并且一直在努力开发一些 XML、Schema 和样式表 (XSLT)。我已经取得了合理的进展，但后来意识到我的 Schema 已经停止工作，所以我把它带回了一个更简单的非描述性示例。

这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="Test.Namespace"  
      schemaLocation="http://myNameSpace.com Test1.xsd">
    <element1 id="001">
        <element2 id="001.1">
             <element3 id="001.1" />
        </element2>
    </element1>
</Root> 
```

我写了一个在这里的模式：

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="Test.Namespace"
            elementFormDefault="qualified">
    <xsd:element name="Root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="element1" maxOccurs="unbounded" type="element1Type"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:complexType name="element1Type">
        <xsd:sequence>
            <xsd:element name="element2" maxOccurs="unbounded" type="element2Type"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>

    <xsd:complexType name="element2Type">
        <xsd:sequence>
            <xsd:element name="item" type="element3Type"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>

    <xsd:complexType name="element3Type">
         <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>        
 </xsd:schema> 
```

Schema 代表了我的真实 XML 的结构。

现在，当我尝试验证我的 XML 时，我收到了这个错误：

`cvc-elt.1: Cannot find the declaration of element 'Root'. [7]`

我认为这与 Root 元素上的命名空间问题有关，但我真的不确定。

有人可以建议我做错了什么吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-27T10:14:21.833

感谢以上所有人，但现在已解决。为了其他人的利益，最严重的错误是按照 Ian 的建议对齐三个命名空间。

为了完整起见，这里是更正的 XML 和 XSD

这是 XML，错别字已更正（对于迟到造成的任何混淆，我们深表歉意）

```
<?xml version="1.0" encoding="UTF-8"?>

<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="urn:Test.Namespace"  
      xsi:schemaLocation="urn:Test.Namespace Test1.xsd">
    <element1 id="001">
        <element2 id="001.1">
            <element3 id="001.1" />
        </element2>
    </element1>
</Root> 
```

而且，这是架构

```
<?xml version="1.0"?>

<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="urn:Test.Namespace"
            xmlns="urn:Test.Namespace"
            elementFormDefault="qualified">
    <xsd:element name="Root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="element1" maxOccurs="unbounded" type="element1Type"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

    <xsd:complexType name="element1Type">
        <xsd:sequence>
            <xsd:element name="element2" maxOccurs="unbounded" type="element2Type"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>

    <xsd:complexType name="element2Type">
        <xsd:sequence>
            <xsd:element name="element3" type="element3Type"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>

    <xsd:complexType name="element3Type">
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>        
</xsd:schema> 
```

再次感谢大家，我希望这对将来的其他人有用。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-27T09:11:55.440

> cvc-elt.1：找不到元素“根”的声明。[7]

您`schemaLocation`在根元素上的属性应该是`xsi:schemaLocation`，并且您需要修复它以使用正确的命名空间。

您可能应该将`targetNamespace`架构和`xmlns`文档`http://myNameSpace.com`的 一旦你这样做，它应该找到模式。关键是架构的目标命名空间、文档的命名空间和您为其提供架构位置的命名空间这三个必须相同。`Test.Namespace``urn:Test.Namespace`

（尽管它仍然无法验证，因为您在架构期望的文档中`<element2>`包含一个）`<element3>``item`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T01:08:57.013

您的XML Schema 的 与**Root**元素`targetNamespace`的命名空间不匹配（点 in vs. comma in ）**`Test.Namespace``Test,Namespace`**

 **一旦您同意上述内容，您必须考虑到您的 XSD 中没有`element2`属性**顺序**。**

# javascript - 使用 Foundation Framework 有条件地提供 javascript

> ID：15642047
> 
> 赞同：1
> 
> 时间：2013-03-26T16:15:45.070
> 
> 标签：javascript, jquery, zurb-foundation

我正在使用 Foundation Framework，我想知道是否有任何回调或函数可以根据当前屏幕大小或媒体查询提供 jQuery 或 javascript。

例如

```
if ('screen_size' =< 'small') {
  // do some jquery
} 
```

不确定这是否可能。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:10:46.357

我不确定是否有任何mixins，但您可以根据窗口宽度通过jquery[手动加载脚本](https://stackoverflow.com/questions/3857874/how-to-dynamically-insert-a-script-tag-via-jquery-after-page-load)（可能将其附加到resize事件以及onload？）

```
if( $(window).width() <= 1024 ){
  $.getScript("test.js", function(){
    alert("Running test.js");
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:29:34.353

我真的很喜欢 jRespond 插件。对这类事情非常有用。

[https://github.com/ten1seven/jRespond](https://github.com/ten1seven/jRespond)

# java - Joda time - 解析字符串抛出 java.lang.IllegalArgumentException

> ID：15642053
> 
> 赞同：11
> 
> 时间：2013-03-26T16:15:54.920
> 
> 标签：java, jodatime, date-formatting, date-parsing

不应该`String`使用特定格式`DateTimeFormatter`来解析`LocalDateTime.parse()`吗？

**测试**

```
DateTimeFormatter formatter = ISODateTimeFormat.dateTimeNoMillis()
LocalDateTime ldt = new LocalDateTime()
String val = ldt.toString(formatter)
System.out.println(val) //2013-03-26T13:10:46
// parse() throws java.lang.IllegalArgumentException: Invalid format: "2013-03-26T13:10:46" is too short
LocalDateTime nldt = LocalDateTime.parse(val, formatter) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T16:54:39.123

看看[JavaDoc](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#basicDateTimeNoMillis%28%29)：

> 返回一个基本格式化程序，它结合了基本日期和时间，不带毫秒，用“T”分隔 (yyyyMMdd'T'HHmmssZ)。时区偏移量是“Z”表示零，格式为“±HHmm”表示非零。解析器默认是严格的，因此无法解析时间字符串 24:00。

这里的关键似乎是*时区偏移量是 'Z' 表示零，形式为 '±HHmm' 表示非零*。Joda Time 显然需要`parse()`.

我附加`"Z"`到您解析的日期字符串，它工作得更好：

```
DateTimeFormatter formatter = ISODateTimeFormat.dateTimeNoMillis();
LocalDateTime ldt = new LocalDateTime();
String val = ldt.toString(formatter);
System.out.println(val);    
val += "Z";
LocalDateTime nldt = LocalDateTime.parse(val, formatter);
System.out.println(nldt.toString()); 
```

输出是：

```
2013-03-26T17:50:06
2013-03-26T17:50:06.000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:49:40.513

如果`formatter.parseLocalDateTime(val)`被调用，格式化程序也会抛出错误，这是`LocalDateTime.parse(...)`直接调用的（即天真的调用）。

因此，这是预期格式的一个因素 - 在这种情况下是`yyyy-MM-dd'T'HH:mm:ssZZ`; 基本上，它抱怨你没有通过时区。

我不知道这是否真的可以称为“错误”；在短期内，显然可以使用自定义格式，或者查看[ISODateTimeFormat.localDateOptionalTimeParser()](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#localDateOptionalTimeParser%28%29)，这似乎是您想要的（它是 使用的默认解析器`LocalDateTime`）。

# c# - Listview 值到组合框

> ID：15642058
> 
> 赞同：1
> 
> 时间：2013-03-26T16:16:03.223
> 
> 标签：c#, combobox

我有这个组合框从 SQL 中获取值：

```
public void brandSelectCB(ComboBox cb)
{
    string sSQL = " SELECT" +
                  "      id, name" +
                  "  FROM" +
                  "      tbBrand" +
                  "  ORDER BY" +
                  "      name";

    sqlConnect connect = new sqlConnect();
    DataTable dt = new DataTable();
    dt = connect.getBD(sSQL);

    cb.DataSource = dt;
    cb.DisplayMember = "name";
    cb.ValueMember = "id";
} 
```

我也有一个这样的列表视图：

```
public void modelSelect(ListView lvModel)
{
    string sSQL = " SELECT" +
                  "      tbModel.id, tbBrand.name AS brand, tbModel.name" +
                  "  FROM" +
                  "      tbBrand, tbModel" +
                  " WHERE" +
                  "     tbBrand.id = tbModel.brand" +
                  " ORDER BY" +
                  "     tbBrand.name, tbModel.name";

    sqlConnect connect = new sqlConnect();
    DataTable dt = new DataTable();
    dt = connect.getBD(sSQL);

    foreach (DataRow dr in dt.Rows)
    {
        ListViewItem item = new ListViewItem(dr["id"].ToString());
        item.SubItems.Add(dr["brand"].ToString());
        item.SubItems.Add(dr["name"].ToString());

        lvModel.Items.Add(item);
    }
} 
```

当我从列表视图中选择一行并单击编辑按钮时，它应该从该选定行获取值到相应的组合框和文本框：

```
private void btnEdit_Click(object sender, EventArgs e)
{
    this.txtID.Text = lvModels.SelectedItems[0].SubItems[0].Text;
    this.cbBrand.SelectedText = lvModels.SelectedItems[0].SubItems[1].Text;
    this.txtName.Text = lvModels.SelectedItems[0].SubItems[2].Text;
} 
```

但我在组合框上没有值，只有在文本框中。我意识到这是因为组合是下拉列表样式，我应该使用`SelectedValue`或`SelectedItem`但它们似乎都不起作用。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:42:13.677

你可以尝试这样的事情：

```
string brandText = lvModels.SelectedItems[0].SubItems[1].Text;
DataRow itemToSelect = ((DataTable) this.cbBrand.DataSource)
                          .Rows
                          .Cast<DataRow>()
                          .FirstOrDefault(r=>r.Field<string>("name").Equals(brandText));
if(itemToSelect != null)
   cbBrand.SelectedItem = itemToSelect; 
```

免责声明：我没有对此进行测试；这是记忆中的。

如果您将 BrandID 隐藏在`ListViewItem`: 中的某个位置，这会更简单，那么您可以使用`SelectedValue`.

# javascript - 使用 Javascript 在现有表下添加新的 html 表

> ID：15642059
> 
> 赞同：0
> 
> 时间：2013-03-26T16:16:03.223
> 
> 标签：javascript, html-table

我有一个 html 表和一个 Javascript 代码，它通过按“添加新表”按钮在此下添加一个新表。问题是当我刷新页面时，刚刚添加的表格消失了。当我刷新页面时，如何使它在添加后保留？

```
<table border="0" style="margin: auto; ">

<td width="60%" >

<fieldset style="width:530px; padding-left:5px; background-color:white " >

<INPUT type="button" value="Add new Table" onclick="addRow('dataTable')" />

School/University/College*</br>
<input name="school_1" type="text" size="73"/>
</br></br>
Field of Study</br>
<input name="field_1" type="text" size="73"/>
</br></br>
Specialized subjects</br>
<input name="specialized_subject_1" type="text" size="73" />
</br></br>
Degree</br>
<input name="degree_1" type="text" size="73"/>
</br></br>
Grade</br>
<input name="grade_1" type="text" size="73" />
</br></br></br>

    Attended from:&nbsp;<select name="month_1_1"> 
    <option value=" "> EMPTY </option> 
    <option value="January">January</option> 
    </select>

    <select id="year_1_1" name="year_1_1"> 
    <option value=" "> EMPTY </option>
    <option value="2009">2009</option>
   </select>&nbsp;&nbsp;&nbsp;&nbsp;

    Until:&nbsp;<select name="month_1_2"> 
    <option value=" "> EMPTY </option> 
    <option value="January">January</option>                        
    </select>

    <select name="year_1_2"> 
    <option value=" "> EMPTY </option>
    <option value="2009">2009</option>
   </select>&nbsp;&nbsp;    

</h2></font>
</fieldset>

</td>

</table> 
```

这是Javascript代码：

```
 <SCRIPT language="javascript">
   function addRow(tableID) {

    var table = document.getElementById(tableID);

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var colCount = table.rows[0].cells.length;

    for(var i=0; i<colCount; i++) {

        var newcell = row.insertCell(i);

        newcell.innerHTML = table.rows[0].cells[i].innerHTML;
        //alert(newcell.childNodes);
        switch(newcell.childNodes[0].type) {
            case "text":
                    newcell.childNodes[0].value = "";
                    break;
            case "select-one":
                    newcell.childNodes[0].selectedIndex = 0;
                    break;
        }
    }
  }

</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:23:33.990

JavaScript 不写入文件。因此，更改仅在您在页面上时可用。我也不希望用户能够直接编辑 HTML 文件。

如果您需要它们持久化并且更改是针对特定用户的，您可以保存它们的选项（即添加的表格数量）并让服务器端（PHP 或 w/e）在页面提供时添加表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:32:14.470

问题是刷新基本上是从头开始请求页面，因此服务器将页面提供给客户端，就好像它是一个新请求一样。

这就是为什么您需要将页面状态（或至少是用户数据）保存在某处的原因，有多种方法可以做到这一点，使用视图状态是一种，或者会话变量是另一种。

这样，当您加载页面时，您应该做的第一件事就是将信息加载回存储的页面（在视图状态或会话中） - 请参阅 ASP.NET 或其他等效技术。

如果您无法维护页面的“状态”（即您没有运行 Web 应用程序，您只是在提供带有一些 javascript 的 HTML 页面），那么您需要确保用户无法刷新页面或弹出某些内容提醒他们他们的偏好没有被存储（无论哪种方式使用起来有点不友好）。

*   您不能允许用户将页面写回服务器，因为这一次只适用于一个人，而且根本不是一个好习惯。

# ios - 在编译时检查框架是否存在？

> ID：15642067
> 
> 赞同：21
> 
> 时间：2013-03-26T16:16:11.227
> 
> 标签：ios, objective-c, frameworks, compile-time

我正在开发一个可以选择使用闭源框架的开源项目。如果项目中包含闭源框架，将会有额外的功能。但是如果项目中没有包含框架，项目应该仍然可以正确编译。

如果框架包含在项目中，如何**在编译时检查？**

基本上，我想做这样的事情：

```
#ifdef _MY_FRAMEWORK_EXISTS
#import <MyFramework/MyFramework.h>
#endif 
```

我已经看到了 2 年前的老问题，[比如这个](https://stackoverflow.com/questions/7331811/conditional-compilation-check-for-framework-before-importing)，但是没有答案浮出水面，所以我现在可能会错过一些新的东西。

我不想在运行时通过 进行检查`NSClassFromString()`，因为当我尝试导入`MyFramework`并且它不存在时，这将在编译时失败。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T07:53:10.237

您可以使用 __has_include 语言扩展名检查头文件是否存在。 [http://clang.llvm.org/docs/LanguageExtensions.html#include-file-checking-macros](http://clang.llvm.org/docs/LanguageExtensions.html#include-file-checking-macros)

但是，这只告诉您是否安装了头文件。它无法告诉您“Link Binary With Libraries”是否已链接到其框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:46:36.907

我建议阅读[Mac 开发者库：框架编程指南](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Frameworks.html)（其中包括关于[弱链接](https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WeakLinking.html)的部分）。

1.  “存在”或“包含在项目中”是什么意思？您的意思是添加到“Link Binary With Libraries”构建阶段（如[Include Frameworks](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Tasks/IncludingFrameworks.html)所述）？所做的只是影响[链接，而不是编译、](http://www.cprogramming.com/compilingandlinking.html)构建阶段。要看到这一点，请构建。`-framework`然后，在 Xcode 的 Log Navigator 的构建日志中搜索。

    所以，是的，如果你想影响你提供的代码的*编译*，你可以手动定义宏`_MY_FRAMEWORK_EXISTS`。

2.  我真的不明白你想做什么。你能在更高的层次上解释你想要什么吗？也许，有更好的方法来解决它。

    “最小开销”很好，但太多的魔法可能会令人困惑。例如，Xcode 的魔力隐藏了包含框架时真正发生的事情。

    我还建议查看[适用于 iOS 的 Facebook SDK](https://developers.facebook.com/ios/)如何处理高级和低级创意。它可能会做你想做的事情。

# c++ - 解码由 GetAdaptersAddresses Windows API 函数返回到内存中的 IP_ADAPTER_ADDRESSES 结构？

> ID：15642069
> 
> 赞同：0
> 
> 时间：2013-03-26T16:16:14.197
> 
> 标签：c++, winapi, memory-management, msdn

我有一个 AHK 脚本，我需要获取有关特定网络接口的各种信息。为此，我对[GetAdaptersAddresses](http://msdn.microsoft.com/en-us/library/aa365915%28v=vs.85%29.aspx)函数的 IPHlpAPI 库进行了 dll 调用，该函数在我提供的地址处返回一个[IP_ADAPTER_ADDRESSES结构。](http://msdn.microsoft.com/en-us/library/aa366058%28v=vs.85%29.aspx)然后我开始读取该地址的内存并解码结构的每个成员。

例如，对于[IP_ADAPTER_INFO](http://msdn.microsoft.com/en-us/library/aa366062%28v=vs.85%29.aspx)结构，如果我读取前 4 个字节，我会得到下一个结构开始的地址。然后，如果我读取接下来的 4 个字节，我会得到 ComboIndex 值。然后，如果我读取接下来的 260 个字节并将其转换为 ANSI 字符串，我会得到适配器的名称。等等。到目前为止，这很有效。

但是对于 IP_ADAPTER_ADDRESSES 结构，它似乎不起作用。我试过这个：我跳过了前 8 个字节，作为对齐，然后我跳过了接下来的 4 个字节作为结构的长度，然后我读取了接下来应该是适配器索引的 4 个字节。但是这个数字是随机的大数字，它不对应任何适配器。其余数据也没有，除非我将内存的每个字节转换为 ANSI 字符，然后您可以看到 AdapterName、Description 和 FriendlyName。

实际上，我想要的只是 FriendlyName，因为我已经从 IP_ADAPTER_INFO 结构中获得了其余信息。那么我可以在 IP_ADAPTER_ADDRESSES 结构中的哪个地址找到 FriendlyName 呢？

我还在 pastebin 上发布了我得到的内存内容：
[IP_ADAPTER_ADDRESSES 结构 - HEX](http://pastebin.com/z4urAQfu)
[IP_ADAPTER_ADDRESSES 结构 - ANSI](http://pastebin.com/wnabxkTK)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:25:06.100

前 8 个字节是联合，而不是结构。这意味着 Alignment 字段和 Length/IfIndex 字段存储在内存中的相同位置。结构的前 4 个字节是长度，接下来的 4 个字节是 IfIndex。

您是否有理由不能使用 IPTypes.h 中定义的结构？即使用`myAddrPtr->FriendlyName`where `myAddrPtr`is an获取名称`IP_ADAPTER_ADDRESSES *`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:52:21.573

也许我不完全理解您的问题，我只是使用结构本身来获取友好名称——以下是非 Unicode 程序的缩写代码片段：

```
PIP_ADAPTER_ADDRESSES pCurrAddresses;
ULONG outBufLen = sizeof(IP_ADAPTER_ADDRESSES);
GetAdaptersAddresses(family, flags, NULL, NULL, &outBufLen);
pCurrAddresses = (IP_ADAPTER_ADDRESSES *) MALLOC(outBufLen);
dwRetVal = GetAdaptersAddresses(family, flags, NULL, pCurrAddresses, &outBufLen);
if (dwRetVal == NO_ERROR)
{    while (pCurrAddresses != NULL)
    {   printf("Description: %wS\n", pCurrAddresses->Description);
        printf("Friendly Name: %wS\n", pCurrAddresses->FriendlyName);
        pCurrAddresses = pCurrAddresses->Next;
    }
}
FREE(pAddresses); 
```

这样的事情会奏效吗？

# php - 包含单词的php数组键

> ID：15642079
> 
> 赞同：0
> 
> 时间：2013-03-26T16:16:49.970
> 
> 标签：php, arrays

我有一个返回聚合数据的大型 SQL 查询。

我返回的数组是这样的：

```
array(37) { // I get 37 arrays returned 
    [0] => array(10) {
        ["groupId"] => string(1) "3"  // the first param is just an id  
        ["sessionCount84"] => string(1) "0"   
        ["sessionCount1"] => string(1) "1" 
    } ... 
```

每个子数组将包含多个带有单词“sessionCount”的键和一个数字，并且可能有很多。

有没有办法获取包含单词 'sessionCount[someNumber]" 的键的所有值？

我在 php 中尝试了 array_keys 函数，但这需要完全匹配的单词，这意味着我需要知道键中“sessionCount”后面的数字，所以我需要先以某种方式获取包含该单词的所有键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:23:04.250

```
$tmp = array();
foreach ($array as $sub)
    foreach ($sub as $k => $v)
        if (substr($k, 0, 12) == 'sessionCount')
            $tmp[$k] = $v; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:20:58.463

也许这样的事情会有所帮助。

```
$myArray = array(37) { [0]=>  // I get 37 arrays returned  
    array(10) { ["groupId"]=> string(1) "3"  // the first param is just an id  
    ["sessionCount84"]=> string(1) "0"   
    ["sessionCount1"]=> string(1) "1" } ...

$sessions = array();
array_map(function($session) use (&$sessions) {
    foreach ($session as $key => $value) {
        if ($key starts with "sessionCount") // I'm going to leave that up to you
            $sessions[$key] = $value;
    }
}, $myArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:21:55.247

在不更改数组的情况下，您只能通过蛮力来做到这一点.. aka。尝试“sessionCount [0-999]”..

另一种方法是在数组键上使用 strcmp() ，如下所示：

```
foreach($array as $key => $value) 
    if(!strcmp($key,"sessionCount")) 
        dosomething($key,$value); 
```

或遍历您的数组一次并将其重组为如下所示：

```
array() {
  ["sessionCount"] => array() {
      [84] => "",
      [1] => "",
  }
} 
```

..之后找到你需要的所有钥匙应该是在公园里散步。;)

# android - Android 自定义 URI 方案无法在某些版本的 Android 上启动应用程序，但适用于其他版本

> ID：15642080
> 
> 赞同：2
> 
> 时间：2013-03-26T16:16:51.667
> 
> 标签：android, android-intent, uri, intentfilter

我们有一个由第三方管理的应用程序，我们可以从托管在我们自己域上的一个网站启动它。这在一段时间内运行良好，但在过去几个月的某个时候，它开始无法在某些版本的 Android 上运行.
它不会启动应用程序，而是转到浏览器中的 404 页面。

这是`intent-filter`AndroidManifest中的相关内容

```
<intent-filter>
    <data scheme="http"
            host="m.ourdomain.net"
            path="/OurApp"/>
    <action name="android.intent.action.VIEW"/>
    <category name="android.intent.category.DEFAULT"/>
    <category name="android.intent.category.BROWSABLE"/>
</intent-filter> 
```

我们网站上的链接如下所示：

```
string linkAddress = "http://m.ourdomain.net/OurApp?Location=" + locName + "&IP_Address=" + ip; 
```

调用者：

```
Response.Redirect(linkAddress); 
```

我能够在许多设备上对此进行测试：
它适用于 Android 版本 4.0.4 (Moto Bionic) 和 4.1.2 (Moto RAZR)。
它不适**用于**2.3.5 (HTC EVO) 和 4.1.1 (HTC DNA) 版本。
（会不会是 HTC 的问题？）

我还在 4.1.1 设备上使用 Dolphin 和 FireFox 对此进行了测试，并且问题仍然存在。

我注意到在它工作的设备上，我们的应用程序被设置为“默认应用程序”。如果我将其从“默认应用”中删除，然后单击我们的链接，则会出现一个小弹出窗口，询问我是否要使用浏览器或我们的应用打开链接。
这不会发生在它不工作的设备上。

有没有人知道为什么会发生这种情况，以及我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:21:33.997

> 会不会是 HTC 的问题？

对于 HTC DNA，是的。或者，也许更准确地说，这与苹果有关。HTC 选择破解他们被起诉的特定苹果专利的一些变通办法。我去年有[两篇](http://commonsware.com/blog/2012/07/23/linkify-problem-patent-behavior.html)博客[文章描述了正在发生的事情。](http://commonsware.com/blog/2012/07/24/linkify-problem-detection-mitigation.html)

可以想象，他们也将黑客“反向移植”到了 EVO 上。

# javascript - 在 Angular 中处理 Accordion 的打开/折叠事件

> ID：15642082
> 
> 赞同：41
> 
> 时间：2013-03-26T16:17:04.090
> 
> 标签：javascript, twitter-bootstrap, angularjs, angular-ui

如果我有这个代码：

```
<accordion-group heading="{{group.title}}" ng-repeat="group in groups">
      {{group.content}}
</accordion-group> 
```

使用 AngularJS、angular-ui 和 Twitter Bootstrap，是否可以让手风琴在打开时调用一些动作？我知道我不能简单地添加`ng-click`，因为它在“编译”为 HTML 以打开/折叠组之后已经使用。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-08-28T20:51:11.550

Accordion 组还允许使用 Accordion-heading 指令，而不是将其作为属性提供。您可以使用它，然后通过 ng-click 将标题包装在另一个标签中。

```
<accordion-group ng-repeat="group in groups" heading="{{group.title}}" is-open="group.open">
  <accordion-heading>
    <span ng-click="opened(group, $index)">{{group.content}}</span>
  </accordion-heading>
</accordion-group> 
```

示例：[http ://plnkr.co/edit/B3LC1X?p=preview](http://plnkr.co/edit/B3LC1X?p=preview)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-03-18T14:48:15.263

这是一个基于*pkozlowski.opensource*解决方案的解决方案。您可以使用**动态定义的 Property**
， 而不是在集合的每个项目上添加**$watch**。在这里，您可以将*组的**IsOpened*属性绑定到*is-open*属性。

 *****```
<accordion-group ng-repeat="group in groups" heading="{{group.title}}" is-open="group.IsOpened">
   {{group.content}}
</accordion-group> 
```

因此，您可以在控制器中的集合的每个项目上动态添加**IsOpened属性：**

```
$scope.groups.forEach(function(item) {
  var isOpened = false;
  Object.defineProperty(item, "IsOpened", {
    get: function() {
      return isOpened;
    },
    set: function(newValue) {
      isOpened = newValue;
      if (isOpened) {
        console.log(item); // do something...
      }
    }
  });
}); 
```

使用**属性**而不是**手表**对性能更好。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-03-26T16:38:46.133

`is-open`手风琴组上有指向可绑定表达式的属性。当给定的手风琴组打开时，您可以观察这个表达式并执行一些逻辑。使用此技术，您可以将标记更改为：

```
<accordion-group ng-repeat="group in groups" heading="{{group.title}}" is-open="group.open">
   {{group.content}}
</accordion-group> 
```

这样您就可以在控制器中准备所需的监视表达式：

```
$scope.$watch('groups[0].open', function(isOpen){
    if (isOpen) {
      console.log('First group was opened'); 
    }    
  }); 
```

虽然上述工作在实践中使用可能有点麻烦，所以如果你觉得这可以改进，请在[https://github.com/angular-ui/bootstrap中打开一个问题](https://github.com/angular-ui/bootstrap)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-30T14:13:33.853

我使用关联数组来创建打开状态和模型对象之间的关系。

HTML 是：

```
 <div ng-controller="CaseController as controller">

                <accordion close-others="controller.model.closeOthers">
                    <accordion-group ng-repeat="topic in controller.model.topics track by topic.id" is-open="controller.model.opened[topic.id]">
                       <accordion-heading>
                          <h4 class="panel-title clearfix" ng-click="controller.expand(topic)">
                         <span class="pull-left">{{topic.title}}</span>
                         <span class="pull-right">Updated: {{topic.updatedDate}}</span>
                          </h4>                           
                       </accordion-heading>
                  <div class="panel-body">

                      <div class="btn-group margin-top-10">
                          <button type="button" class="btn btn-default" ng-click="controller.createComment(topic)">Add Comment<i class="fa fa-plus"></i></button>
                      </div>
                     <div class="btn-group margin-top-10">
                         <button type="button" class="btn btn-default" ng-click="controller.editTopic(topic)">Edit Topic<i class="fa fa-pencil-square-o"></i></button>
                     </div>
                      <h4>Topic Description</h4>
                      <p><strong>{{topic.description}}</strong></p>
                      <ul class="list-group">
                          <li class="list-group-item" ng-repeat="comment in topic.comments track by comment.id">
                              <h5>Comment by: {{comment.author}}<span class="pull-right">Updated: <span class="commentDate">{{comment.updatedDate}}</span> | <span class="commentTime">{{comment.updatedTime}}</span></span></h5>
                              <p>{{comment.comment}}</p>
                             <div class="btn-group">
                               <button type="button" class="btn btn-default btn-xs" ng-click="controller.editComment(topic, comment)">Edit <i class="fa fa-pencil-square-o"></i></button>
                               <button type="button" class="btn btn-default btn-xs" ng-click="controller.deleteComment(comment)">Delete <i class="fa fa-trash-o"></i></button>
                             </div>
                          </li>
                      </ul>
                  </div>

                    </accordion-group>
                </accordion> 
```

控制器片段是：

```
 self.model = {
      closeOthers : false,
      opened   : new Array(),
      topics   : undefined
   }; 
```

“主题”在 AJAX 调用中填充。将“打开”状态与从服务器更新的模型对象分离意味着状态在刷新时得以保留。

我还声明了控制器`ng-controller="CaseController as controller"`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-10T21:57:01.410

这是一个受 kjv 回答启发的解决方案，它可以轻松跟踪哪个手风琴元素是打开的。我发现很难`ng-click`在手风琴标题上工作，尽管将元素包围在`<span>`标签中并添加 ng-click 效果很好。

我遇到的另一个问题是，虽然`accordion`元素是以编程方式添加到页面中的，但内容却没有。`{{path}}`当我尝试使用链接到变量的 Angular 指令（即）加载内容时，`$scope`我会遇到，因此使用了波纹管方法，该方法使用嵌入`undefined`的 ID 填充手风琴内容。`div`

**控制器：**

```
 //initialise the open state to false
    $scope.routeDescriptors[index].openState == false

    function opened(index) 
    {
        //we need to track what state the accordion is in
        if ($scope.routeDescriptors[index].openState == true){   //close an accordion
            $scope.routeDescriptors[index].openState == false
        } else {    //open an accordion
            //if the user clicks on another accordion element
            //then the open element will be closed, so this will handle it
            if (typeof $scope.previousAccordionIndex !== 'undefined') {
                $scope.routeDescriptors[$scope.previousAccordionIndex].openState = false;
            }
            $scope.previousAccordionIndex = index;
            $scope.routeDescriptors[index].openState = true;
    }

    function populateDiv(id)
    {
        for (var x = 0; x < $scope.routeDescriptors.length; x++)
        {
            $("#_x" + x).html($scope.routeDescriptors[x]);
        }
    } 
```

**HTML：**

```
 <div ng-hide="hideDescriptions" class="ng-hide" id="accordionrouteinfo" ng-click="populateDiv()">
            <accordion>
                <accordion-group ng-repeat="path in routeDescriptors track by $index">
                    <accordion-heading>
                        <span ng-click="opened($index)">route {{$index}}</span>
                    </accordion-heading>
                    <!-- Notice these divs are given an ID which corresponds to it's index-->
                    <div id="_x{{$index}}"></div>
                </accordion-group>
            </accordion>
        </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-01T07:28:35.980

手风琴控制器.js

```
MyApp.Controllers
    .controller('AccordionCtrl', ['$scope', function ($scope) {

        $scope.groups = [
            {
                title: "Dynamic Group Header - 1",
                content: "Dynamic Group Body - 1",
                open: false
            },
            {
                title: "Dynamic Group Header - 2",
                content: "Dynamic Group Body - 2",
                open: false

            },
            {
                title: "Dynamic Group Header - 3",
                content: "Dynamic Group Body - 3",
                open: false
            }
        ];

        /**
         * Open panel method
         * @param idx {Number} - Array index
         */
        $scope.openPanel = function (idx) {
            if (!$scope.groups[idx].open) {
                console.log("Opened group with idx: " + idx);
                $scope.groups[idx].open = true;
            }
        };

        /**
         * Close panel method
         * @param idx {Number} - Array index
         */
        $scope.closePanel = function (idx) {
            if ($scope.groups[idx].open) {
                console.log("Closed group with idx: " + idx);
                $scope.groups[idx].open = false;
            }
        };

    }]); 
```

索引.html

```
<div ng-controller="AccordionCtrl">

    <accordion>

        <accordion-group ng-repeat="group in groups" is-open="group.open">
            <button ng-click="closePanel($index)">Close me</button>
            {{group.content}}
        </accordion-group>

        <button ng-click="openPanel(0)">Set 1</button>
        <button ng-click="openPanel(1)">Set 2</button>
        <button ng-click="openPanel(2)">Set 3</button>

    </accordion>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-14T17:17:32.270

您可以使用 Angular 指令执行此操作：

# html

```
<div uib-accordion-group is-open="property.display_detail" ng-repeat="property in properties">
  <div uib-accordion-heading ng-click="property.display_detail = ! property.display_detail">
    some heading text
  </div>
  <!-- here is the accordion body -->
  <div ng-init="i=$index">  <!-- I keep track of the index of ng-repeat -->
    <!-- and I call a custom directive -->
    <mydirective mydirective_model="properties" mydirective_index="{% verbatim ng %}{{ i }}{% endverbatim ng %}">
      here is the body
    </mydirective>
  </div>
</div> 
```

# js

```
app.directive("mydirective", function() {
  return {
    restrict: "EAC",  
    link: function(scope, element, attrs) {
      /* note that ng converts everything to camelCase */
      var model = attrs["mydirectiveModel"];
      var index = attrs["mydirectiveIndex"];
      var watched_name = model + "[" + index + "].display_detail"
      scope.$watch(watched_name, function(is_displayed) {
        if (is_displayed) {
          alert("you opened something");
        }
        else {
          alert("you closed something");
        }
      });
    }
  }
}); 
```

关于我的设置有一些特质（我使用 Django，因此使用“{% verbatim %}”标签），但该方法应该有效。*****

# solr - Solr 高亮片段大小设置为无限，但仍截断大文档？

> ID：15642083
> 
> 赞同：1
> 
> 时间：2013-03-26T16:17:05.090
> 
> 标签：solr, highlighting

我已经将大约 15k 文档加载到各种大小的 Solr 中。我测量的最大的是 59,455 个纯文本字符。当我使用突出显示和无限片段大小执行查询时，这个大文档被截断为 51,253（这包括我的 pre 和 post 标记）。

这是查询的 URL：

```
http://solr.nowhere.org:8080/solr/select?fl=*,score&sort=score%20desc&hl=true&hl.fragsize=-1&hl.fl=note&hl.simple.pre=<hit>&hl.simple.post=</hit>&hl.q=corn&q=corn 
```

为什么 Solr 仍然截断？

我正在使用 Solr 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T01:34:22.423

您还需要提高[hl.maxAnalyzedChars](http://wiki.apache.org/solr/HighlightingParameters#hl.maxAnalyzedChars)的值，因为该值也限制了突出显示的结果。

> 文档中有多少字符以寻找合适的片段。此参数仅对原始荧光笔有意义。
> 
> 默认值为“51200”。
> 
> 您可以为此参数分配一个较大的值，并使用 hl.fragsize=0 在大小大于 51200 个字符的大字段中返回突出显示。

因此，基于此更改并向参数`hl.fragsize=0`添加一个大于最长文档的值`hl.max.analyzedChars`。

# javascript - 如何测试浏览器能否播放avi格式的视频？

> ID：15642084
> 
> 赞同：2
> 
> 时间：2013-03-26T16:17:08.370
> 
> 标签：javascript, html, html5-video

可`canPlayType`用于`video/mp4`,`video/webm`等。

但是如何测试浏览器是否可以播放`avi`格式视频呢？

`canPlayType('x-msvideo')`即使可以播放 avi 文件也无法正常工作。

```
var a = document.createElement('video')
a.canPlayType('video/mp4'); // 'maybe'
a.canPlayType('video/webm'); // 'maybe'
a.canPlayType('application/x-troff-msvideo'); // ''
a.canPlayType('video/x-msvideo') // ''
a.canPlayType('video/msvideo') // ''
a.canPlayType('video/avi') // '' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:53:36.693

好吧，看来我被文件扩展名欺骗了，视频格式实际上是`QuickTime / MOV`，所以它可以被浏览器播放，我改变了他们的名字，现在一切正常。

无论如何，我们可以使用`video` `canplay`事件，只需设置 src，然后检查`canplay`事件是否触发。

# perl - Perl：破坏文件还是删除文件并打开一个新文件更好？

> ID：15642090
> 
> 赞同：1
> 
> 时间：2013-03-26T16:17:15.777
> 
> 标签：perl, bash, unix

例如，

```
#!/usr/bin/perl

open FILE1, '>out/existing_file1.txt'; 
open FILE2, '>out/existing_file2.txt'; 
open FILE3, '>out/existing_file3.txt'; 
```

相对

```
#!/usr/bin/perl

if (-d out) {
    system('rm -f out/*');
}

open FILE1, '>out/new_file1.txt'; 
open FILE2, '>out/new_file2.txt'; 
open FILE3, '>out/new_file3.txt'; 
```

在第一个示例中，我们[破坏](http://perldoc.perl.org/functions/open.html)了文件（将它们截断为零长度）。其次，我们清理目录，然后创建新文件。

第二种方法（我们清理目录的地方）似乎是多余的和不必要的。这样做的唯一好处（在我看来）是它重置了权限以及更改日期。

哪个被认为是最佳实践？（我怀疑这个问题很迂腐，第一个例子更常见。）

* * *

编辑：我问的原因是因为我有一个脚本可以解析数据并将输出文件写入目录 - 每次都使用相同的文件名/路径。该脚本将运行多次，我很好奇在脚本开始时我应该部分清理目录（我正在写入的文件）还是让文件句柄'>'为我破坏文件，并且自己不采取任何额外措施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:36:49.463

除了您提到的权限问题之外，这两种方法之间唯一的显着区别是，在您执行此操作时，另一个进程是否打开了其中一个输出文件。如果您删除该文件然后重新创建它，则其他进程将继续查看原始文件中的数据。如果您破坏文件，其他进程将立即看到文件内容更改（尽管如果它使用缓冲 I/O，它可能不会注意到它，直到它需要重新填充缓冲区）。

删除文件也会更新包含目录的修改时间。

# perl - 在散列时为 perl 中的键提供多个值

> ID：15642097
> 
> 赞同：0
> 
> 时间：2013-03-26T16:17:29.173
> 
> 标签：perl, hash

我想为一个键提供多个值并打印它们。这是代码，但它用新值替换了键。

```
#!/usr/bin/perl
%coins = ( 
    "Quarter" , 25,
    "Dime" , 10,
    "Quarter", 5 
);
foreach $value (sort { $coins{$a} <=> $coins{$b} } keys %coins) {
    print "$value $coins{$value} \n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:19:50.373

一个键不能有多个值。您可以获得的最接近的值是将值设为 arrayref，并在该数组中有多个值。

```
%coins = ( 
    Quarter => [25, 5],
    Dime => [10],
); 
```

虽然，对于您拥有的数据，看起来您应该反转结构：

```
%coins = ( 
    5 => "Quarter",
    25  => "Quarter", 
    10 => "Dime"
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:55:08.783

似乎合法的 perl 替换值。因为第一个字段是键，第二个是值。

所以你有2个解决方案来解决你的问题：

**1.反转键/值（最坏的解决方案）**

```
 #!/usr/bin/perl
    %coins = ( 
        25, "Quarter",
        10, "Dime",
        5, "Quarter"
    );
    foreach $value (sort { $coins{$a} <=> $coins{$b} } keys %coins) {
        print "$value $coins{$value} \n";
    } 
```

使用这个方法，你不能有 2 个具有相同“键”的“值”......很明显

**2\. Hash/Array（更好的解决方案）**

```
 #!/usr/bin/perl
    %coins = ( 
        "Quarter" => [25, 5, 15],
        "Dime" => [10]
    );
    foreach $value (keys %coins) {
        my @valueArray=@{$coins{$value}};

        foreach my $index (sort { $a <=> $b } @valueArray) {
            print "$value $index \n";
        }
    } 
```

将数组与哈希表组合

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-07T10:01:27.117

您可以将值存储在数组中。在哈希中分配其引用。因此，每当您将值推送到数组时，它也可以在哈希中访问。如果您提供匿名数组，则每次都必须手动分配一个值。例如：

```
@array_value=(1);
%hash=('number' => \@array_value);
push @array_value,3;
print "@{$hash{'number'}}"; 
```

每当您想在哈希中添加值时，都可以将其添加到数组“@array_value”中。您可以取消引用哈希中的值数组，如下面的@{$hash{'number'}}。

# php - 如何将图像传递到 fpdf

> ID：15642101
> 
> 赞同：0
> 
> 时间：2013-03-26T16:17:33.560
> 
> 标签：php, image, dynamic, fpdf

我试图弄清楚如何从网站传递特定图像以使用 fpdf 制作 pdf。我可以创建 fpdf，但不知道如何从页面中抓取图像并将它们放入 fpdf。

理想的情况是我将有一组图像：A、B、C、D 等。用户单击 B 和 D，然后单击“创建 pdf”，pdf 是图像 B 和 D 在单独的页面上。

除了将图像 B 和 D 传递给 fpdf 之外，我可以弄清楚所有内容。你能为我指出正确的方向吗？

我并不特别依赖于 fpdf；它似乎是创建 php pdf 的流行选择。

# assembly - 如何阅读ISA反汇编？还有 GPU 流水线和等待状态

> ID：15642102
> 
> 赞同：0
> 
> 时间：2013-03-26T16:17:33.607
> 
> 标签：assembly, gpu, instruction-set, pipelining, cpu-cycles

我试图了解 OpenCL 编译器生成的机器代码以优化它。因此，我使用工具 m2s-opencl-kc（来自 multi2sim）离线编译我的 *.cl 文件并将中间文件（开关：-a）保留为 *.isa 文件。这个 *.isa 包含一个“反汇编”部分，这似乎是我正在寻找的......

注意：我的组装知识有点“老”。我为 Pentium 386/486 CPU 等老款 CPU 制作了组件。所以我实际上在阅读矢量指令时遇到了问题，而我对它们有一些理论知识。

```
[... OTHER STUFF ... ]
; --------  Disassembly --------------------
00 ALU_PUSH_BEFORE: ADDR(32) CNT(6) KCACHE0(CB2:0-15) KCACHE1(CB0:0-15)
      0  x: MOV         R2.x,  0.0f
         z: SETGT_INT   R0.z,  1,  KC0[0].y
         t: MULLO_INT   ____,  R1.x,  KC1[1].x
      1  w: ADD_INT     ____,  R0.x,  PS0
      2  y: ADD_INT     R2.y,  PV1.w,  KC1[6].x
      3  x: PREDE_INT   ____,  R0.z,  0.0f      UPDATE_EXEC_MASK UPDATE_PRED
01 JUMP  POP_CNT(1) ADDR(9)
02 ALU: ADDR(38) CNT(5) KCACHE0(CB1:0-15)
      4  x: MOV         R2.x,  0.0f
         y: MOV         R3.y,  0.0f
         w: LSHL        ____,  R2.y,  2
      5  z: ADD_INT     R2.z,  KC0[0].x,  PV4.w
03 LOOP_DX10 i0 FAIL_JUMP_ADDR(8)
    04 ALU: ADDR(43) CNT(11) KCACHE0(CB2:0-15)
          6  y: ADD_INT     R3.y,  R3.y,  1
             w: LSHL        ____,  R3.y,  2
          7  x: SETGT_INT   R3.x,  KC0[0].y,  PV6.y
             z: ADD_INT     ____,  R2.z,  PV6.w
             w: ADD_INT     ____,  PV6.w,  8
          8  x: ASHR        R0.x,  PV7.w,  4
             y: LSHR        R0.y,  PV7.z,  2
             z: BFE_UINT    R0.z,  PV7.w,  0x00000002,  0x00000002
[... some more ... ] 
```

我想知道的是命令前面的数字和字符的含义。据我了解，编译器产生了一些“复杂”的指令：

```
00 ALU_PUSH_BEFORE: ADDR(32) CNT(6) KCACHE0(CB2:0-15) KCACHE1(CB0:0-15) 
```

（问题：那是所谓的“非常长的指令词”吗？）

而这个“复杂”指令由多个“简单”指令组成：

```
 0  x: MOV         R2.x,  0.0f
         z: SETGT_INT   R0.z,  1,  KC0[0].y
         t: MULLO_INT   ____,  R1.x,  KC1[1].x
      1  w: ADD_INT     ____,  R0.x,  PS0
      2  y: ADD_INT     R2.y,  PV1.w,  KC1[6].x
      3  x: PREDE_INT   ____,  R0.z,  0.0f      UPDATE_EXEC_MASK UPDATE_PRED 
```

这些“简单”的指令似乎是每个向量单元的指令。四个向量单元由 x、y、z 和 w 引用。但什么是“不”？那是另一个向量单位吗？我为“赛普拉斯”GPU编译了它......

现在关于数字......这些就像“行号”吗？前导零：复杂指令序列号...？无前导零：简单指令序列号...？

如果我们假设内存访问没有等待状态，我假设所有具有相同序列的“简单”指令都可以在一个周期内“逻辑地”执行。例如，以下指令（上述复杂指令的）在周期 0 中“执行”：

```
 0  x: MOV         R2.x,  0.0f
         z: SETGT_INT   R0.z,  1,  KC0[0].y
         t: MULLO_INT   ____,  R1.x,  KC1[1].x 
```

“已执行”是指我们有某种（例如 4 周期）流水线。这意味着上述指令应该在周期 0 开始执行，并且应该在周期 3 之后完成。

## 关于流水线的问题

如果下一条指令（例如“1”）读取寄存器 R2.x 会发生什么？那会读取 R2.x 的旧值（在指令“0”之前）还是会延迟指令“1”，直到指令“0”完成？或者这可能是编译器必须注意的“不关心”情况（产生未定义的结果），这种情况永远不会发生？

## 关于内存访问的问题

我假设可以在数据获取周期期间执行对寄存器的访问，而无需等待。内存访问将需要一些额外的周期，具体取决于访问的内存类型：

*   “__private”内存应该主要映射到寄存器。
*   __local memory（最多 64KB 在同一组的工作项之间共享）：在当前的 GPU 中我需要多少额外的周期？
*   __global memory：这应该是例如 256MB 到 x GB 的外部 DRAM。我在这里需要多少额外的周期？据我所知，此内存没有为 GPU 设备缓存。
*   __constant 内存应该类似于 __global 内存，但使用 __local 内存进行缓存

“ISA”有什么好的教程吗？

问候，斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T17:11:58.987

每个“编​​号”部分都是一个 VLIW，例如：

```
 4  x: MOV         R2.x,  0.0f
     y: MOV         R3.y,  0.0f
     w: LSHL        ____,  R2.y,  2 
```

这是*一条*使用*三个*可用 ALU 的指令，即“x”、“y”和“w”。它还可以使用构成最大并行指令的“z”和“t”，例如：

```
 4  x: MOV         R2.x,  0.0f
     y: MOV         R3.y,  0.0f
     z: MOV         R3.z,  0.0f
     w: LSHL        ____,  R2.y,  2
     t: LSHL        ____,  R2.z,  4 
```

尽管如此，这是一个*单一*的VLIW 指令，它“馈送”着色器核心的所有五个 ALU“通道”，然后五个操作在一个步骤中并行执行。

> 但什么是“不”？那是另一个向量单位吗？

是的，“t”是第五个标量单位，称为“先验”，可用于执行[先验](http://en.wikipedia.org/wiki/Transcendental_function)计算，例如`sin(x)`或`cos(x)`。除此之外，它还可以执行正常的标量运算，但其局限性在于，并非“x”到“w”中可能的*所有*标量运算也可以在“t”中执行。因此，理想情况下，每个内核可以在一个步骤中执行五个标量操作。值得注意的是，与 CPU 上的 SSE 指令不同，这五个单元*独立*工作：每个单元都可以在每个步骤中执行自己的操作，而在 SSE 单元中，只能将*一个*操作并行应用于多个数据。和 VLIW 架构。

那些

```
01 JUMP  POP_CNT(1) ADDR(9) 
```

指令显然是特殊指令，实际上并不在 ALU 上执行操作，例如从（片外）存储器或控制流指令中获取数据。

要估计内存延迟，请查看[AMD 的 OpenCL 编程指南](http://developer.amd.com/download/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide.pdf)中的*附录 D - 设备参数*。

`__constant`内存与内存不完全相同`__local`：它在芯片上有自己的内存空间，对于*所有*工作项都是相同的，并且根据文档，它的访问速度大约是内存的两倍`__local`- 因为没有一致性逻辑工作项之间需要。

互联网上的一些消息来源指出，（AMD）GPU 没有缓存，应该使用 LDS 内存来显式模拟缓存。在一些文档中，虽然有*对*L1 和 L2 缓存的引用。

无论哪种方式，请注意，当一个线程停止等待数据时，GPU 通过极快地切换执行“上下文”来“隐藏”内存延迟非常好。如果有足够多的并行任务可供选择，GPU 很可能总能找到一个准备好执行的任务，该任务可以换成需要等待的任务。

# blackberry-webworks - 通过签名安装多个 Blackberry WebWorks SDK

> ID：15642103
> 
> 赞同：1
> 
> 时间：2013-03-26T16:17:39.583
> 
> 标签：blackberry-webworks, blackberry-10, blackberry-playbook

我正在尝试安装 Blackberry 10 SDK 以及适用于 Blackberry 的 PlayBook SDK，但无法进行签名。我为 Blackberry 10 SDK 设置了签名并注册了密钥，没问题。然后我安装了 Blackberry PlayBook SDK，然后也尝试为它注册密钥。我尝试注册与 BB10 SDK 相同的密钥和仅为 PB SDK 注册的新密钥，在这两种情况下我都收到错误“错误：已注册 RDK”。当我构建 BB10 应用程序时，它可以正常工作并通过签名构建应用程序。当我尝试构建 PB 应用程序时，我收到消息“Cannon 签署应用程序 - 找不到签名密钥”。

我已通读文档，但在任何地方都看不到如何在一台机器上使用多个 SDK 进行签名。我相信这是可以做到的，但似乎无法弄清楚应该如何做才能让歌唱工作。

SDK的：

*   BB10-WebWorks-SDK_1.0.4.11

*   WebWorks-Tablet-Win-v2.2

操作系统：Windows 8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:58:10.220

您无需多次注册代码签名密钥。

当您从 BlackBerry 通过电子邮件收到 *.csj 文件时，您使用以下说明将它们安装在您的计算机上： [https ://developer.blackberry.com/html5/documentation/signing_setup_bb10_apps_2008396_11.html](https://developer.blackberry.com/html5/documentation/signing_setup_bb10_apps_2008396_11.html)

这样做会在以下文件夹中生成 *.p12 和 *.db 和 *.csk 文件：%HOMEPATH%\Local Settings\Application Data\Research In Motion

BB10 和 PlayBook WebWorks SDK 都应该能够重新使用这些文件进行签名。如果他们找不到签名密钥，我怀疑您的系统将 %HOMEPATH% 变量设置为错误的位置。

尝试将两个 SDK 安装到同一个 /Program Files 文件夹并确保 %HOMEPATH% 正确。

# android - Android中的按钮数组

> ID：15642104
> 
> 赞同：11
> 
> 时间：2013-03-26T16:17:43.467
> 
> 标签：android, arrays, android-button

我想将按钮映射到按钮数组，并且代码在编译时没有错误，但是当我运行它时会强制关闭：

```
Button buttons[];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game_board_view);

    // Set OnClick listeners
    Button buttons[] = null; 
    buttons[0] = (Button)findViewById(R.id.buttonOne);
    buttons[1] = (Button)findViewById(R.id.buttonTwo);
    buttons[2] = (Button)findViewById(R.id.buttonThree);
    buttons[3] = (Button)findViewById(R.id.buttonFour);
    buttons[4] = (Button)findViewById(R.id.buttonFive);
    buttons[5] = (Button)findViewById(R.id.buttonSix);
    buttons[6] = (Button)findViewById(R.id.buttonSeven);
    buttons[7] = (Button)findViewById(R.id.buttonEight);
    buttons[8] = (Button)findViewById(R.id.buttonMid);
} 
```

**日志猫：**

```
03-26 21:42:51.455: D/dalvikvm(1156): GC_EXTERNAL_ALLOC freed 55K, 53% free 2566K/5379K, external 1625K/2137K, paused 98ms
03-26 21:42:54.323: D/AndroidRuntime(1156): Shutting down VM
03-26 21:42:54.323: W/dalvikvm(1156): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-26 21:42:54.343: E/AndroidRuntime(1156): FATAL EXCEPTION: main
03-26 21:42:54.343: E/AndroidRuntime(1156): java.lang.RuntimeException: Unable to start activity ComponentInfo{edu.project.superwordwheel/edu.project.superwordwheel.GameView}: java.lang.NullPointerException
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.os.Looper.loop(Looper.java:123)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at java.lang.reflect.Method.invokeNative(Native Method)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at java.lang.reflect.Method.invoke(Method.java:507)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at dalvik.system.NativeStart.main(Native Method)
03-26 21:42:54.343: E/AndroidRuntime(1156): Caused by: java.lang.NullPointerException
03-26 21:42:54.343: E/AndroidRuntime(1156):     at edu.project.superwordwheel.GameView.onCreate(GameView.java:43)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-26 21:42:54.343: E/AndroidRuntime(1156):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-26 21:42:54.343: E/AndroidRuntime(1156):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-26T16:32:37.493

如果您不必将像 9 这样的常量硬编码到代码中，通常会更好。而且你通常不需要。

例如，您可以将 id 放入一个数组并`List`根据它们构建一个动态大小的

```
private List<Button> buttons;
private static final int[] BUTTON_IDS = {
    R.id.buttonOne,
    R.id.buttonTwo, 
    R.id.buttonThree,
    R.id.buttonFour,
    R.id.buttonFive,
    R.id.buttonSix, 
    R.id.buttonSeven,
    R.id.buttonEight,
    R.id.buttonMid,
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game_board_view);

    buttons = new ArrayList<Button>();
    // or slightly better
    // buttons = new ArrayList<Button>(BUTTON_IDS.length);
    for(int id : BUTTON_IDS) {
        Button button = (Button)findViewById(id);
        button.setOnClickListener(this); // maybe
        buttons.add(button);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T16:20:39.630

您的数组为空，您正在尝试获取其中的索引。这就是导致`NullPointerException`. 必须先初始化数组，然后才能使用它来存储按钮。

如果您想要一个包含九个按钮的数组，请更改此行：

```
Button buttons[] = null; 
```

对此：

```
Button buttons[] = new Button[9]; 
```

此外，您有一个类成员`Button buttons[]`和一个也名为`Button buttons[]`. 如果这是故意的，那么一定要继续。否则，您需要进一步将您的行更改为：

```
buttons[] = new Button[9]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-13T13:05:18.403

示例用法：

```
Button[] buttons = initializeButtons(3);
buttons[1].setText("I am button1");
buttons[2].setText("I am button2");
buttons[3].setText("I am button3"); 
```

功能：

```
public Button[] initializeButtons(int x) {
    Resources res = getResources();
    Button[] buttons = new Button[x];
    for (int i = 0; i < x; i++) {
        String b = "button" + i;
        buttons[i] = (Button) findViewById(res.getIdentifier(b, "id", getPackageName()));
    } return buttons;//to prevent array out of bounds exception start from 0
} 
```

注意：确保在您的布局中按钮 ID 为 button1、button2、button3、.. .. 等

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-26T16:20:25.083

```
 Button buttons[] = null; 
```

必须使用`new`运算符创建按钮：

```
 Button buttons[] = new Button[9]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T16:21:47.543

试试下面的代码：

```
private int objectLength = 9; //Array elements 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game_board_view);

    Button[] buttons = new Button[objectLength]; 
    buttons[0] = (Button)findViewById(R.id.buttonOne);
    buttons[1] = (Button)findViewById(R.id.buttonTwo);
    buttons[2] = (Button)findViewById(R.id.buttonThree);
    buttons[3] = (Button)findViewById(R.id.buttonFour);
    buttons[4] = (Button)findViewById(R.id.buttonFive);
    buttons[5] = (Button)findViewById(R.id.buttonSix);
    buttons[6] = (Button)findViewById(R.id.buttonSeven);
    buttons[7] = (Button)findViewById(R.id.buttonEight);
    buttons[8] = (Button)findViewById(R.id.buttonMid);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-25T07:50:44.213

我有这样的情况，我选择了不同的方法。我将 id 存储到整数数组中。

```
Int[] btnarr = new int[3];

btn[0]=R.id.button1; // give your ID 

Button btn = (Button).findViewById(cc[i]); 
```

# jquery - 使用一键切换淡入/淡出

> ID：15642105
> 
> 赞同：7
> 
> 时间：2013-03-26T16:17:43.637
> 
> 标签：jquery, button

我目前正在使用此代码来尝试使用具有类的按钮`.info`作为淡入和淡出文本的切换。现在动画正在使用此代码背靠背运行。有没有办法让我单击一次按钮并让文本淡入而不会在几秒钟后淡出？当您再次单击该按钮时，同样适用于淡出。

```
$('.info').click(function() {
    $('h7').fadeIn(750);
});

$('.info').click(function() {
    $('h7').fadeOut(750);
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T16:19:15.597

您可以使用[fadeToggle()](http://api.jquery.com/fadeToggle/)

```
$('.info').click(function() {
    $('h7').fadeToggle(750);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:19:32.977

```
$('info').click(function(){
    $('h7').fadeToggle(750);
}); 
```

# javascript - 对来自 .load(url) 的数据运行 javascript 函数

> ID：15642106
> 
> 赞同：0
> 
> 时间：2013-03-26T16:17:45.750
> 
> 标签：javascript, jquery, function

基本上，我有一个带有“选项卡式”div 的页面，当用户单击其中一个选项卡时，会在该 div 中加载一个 .html 页面。我想知道是否可以在从 .load() javascript 函数加载的新数据上运行 JS 函数。

这是加载新数据的函数；

```
 function switchAssetTabContent(tabContext, func, params) {
    $("#ctl00_ContentPlaceHolder1_Overview1_tcAssetAllocation_tpAssetClassPrimary").html('<table width="375px" height="auto" style="min-height: 100px; height: auto; width: 260px;"><tr><td align="center" valign="middle"><img src="/backoffice/Prospects/App360/images/spinwait.gif" /></td></tr></table>');
    var url = "pageFragments/overview/" + tabContext + ".html";
    $("#ctl00_ContentPlaceHolder1_Overview1_tcAssetAllocation_tpAssetClassPrimary").load( url +"?" + (new Date().getTime()), params, updateYesterday );
    } 
```

问题是加载的数据如下；

```
<div bgcolor="white" id="ctl00_ContentPlaceHolder1_Overview1_pnlAssetClassAllocation">
    <table cellspacing="0" cellpadding="0" style="width: 375px;" border="0">
    <tr><td
        valign="top"
        style="background-color: white vertical-align: top; width: 175px"
        id="ctl00_ContentPlaceHolder1_Overview1_tdAssetClassChart">
        <div bgcolor="white" style="padding:0" id="AssetClassChartControlDiv" class="chart">
        </div>
        </td>
      <td valign="top">

        <div id="ctl00_ContentPlaceHolder1_Overview1_pnlAssetClassLegend">

          <input type="hidden" value="" name="ctl00xContentPlaceHolder1xOverview1xuwgAssetClassChartLegend" id="ctl00_ContentPlaceHolder1_Overview1_uwgAssetClassChartLegend" />
          <table cellspacing="0" cellpadding="0" border="0" style="overflow: hidden; position: relative;" id="ctl00xContentPlaceHolder1xOverview1xuwgAssetClassChartLegend_main">
              <tr id="ctl00xContentPlaceHolder1xOverview1xuwgAssetClassChartLegend_mr">
                <td align="left" style="vertical-align: top;">
                    <div id="AssetClassChartControl_legend" class="legend">
                    </div>
                </td>
              </tr>
          </table>

        </div>

</td></tr>
</table>

</div> 
```

我在主页上编写了 js 函数，这些函数调用了使用那些现在加载的 html`<div>`和`<span>`s 的 ID 的信息。我可以将 .js 函数放在包含的页面上吗？我只是想我应该只`<head></head>`在标签中或标签之外包含我的 js 函数`<body></body>`......非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:48:43.523

如果要重新运行`document.ready()`函数，可以将其设为命名函数：

```
function myReadyFunction() { ... }

document.ready(myReadyFunction); 
```

然后你可以在调用时使用它`.load()`：

```
$("#ctl00_ContentPlaceHolder1_Overview1_tcAssetAllocation_tpAssetClassPrimary").load( url +"?" + (new Date().getTime()), params, myReadyFunction ); 
```

# visual-studio-2010 - Azure SDK 安装与 Nuget 不兼容

> ID：15642119
> 
> 赞同：6
> 
> 时间：2013-03-26T16:18:24.253
> 
> 标签：visual-studio-2010, azure, nuget

我正在尝试安装 Azure SDK for VS2010 SP1（最新）（2012 年 10 月 26 日）

当我单击安装按钮时，我收到错误：

您安装了与 ASP.Net MVC 3 工具更新不兼容的较新版本的 Nuget。要继续安装产品，请参阅[http://go.microsoft.com/fwlink/?LinkId=266638](http://go.microsoft.com/fwlink/?LinkId=266638)

该链接将我发送到 www.asp.net/mvc，其中没有关于此主题的内容。

有解决办法吗？

英孚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-26T20:17:00.017

这里同样的问题。

您可以通过单击此链接来解决它：http: [//msdn.microsoft.com/library/jj161045](http://msdn.microsoft.com/library/jj161045)

这将下载一个小的临时文件

单击该文件将启动 Web 安装程序。

点击安装。

此时，您将看到错误消息，并且“我接受”按钮将灰显。

在滚动窗口底部的小字体中，您会看到一个直接下载链接。点击它。截至 2013 年 6 月 26 日，它把我带到了这个网址：[直接下载链接](http://go.microsoft.com/fwlink/?LinkId=270081) go.microsoft.com/fwlink/?LinkId=270081

在那里我可以下载 msi 文件“WebPublishVS2010Tools.smi”。此文件安装 Microsoft WebPublish Visual Studio 2010。

至于这是否是安装问题的程度，我不知道......

# c# - C# 如何在我的项目资源中打开 PDF？

> ID：15642124
> 
> 赞同：4
> 
> 时间：2013-03-26T16:18:35.970
> 
> 标签：c#, pdf

我有一个带有“帮助”上下文菜单的 winfrom GUI。单击后，我想打开该应用程序的用户手册。该手册是存储在应用程序资源中的 pdf。

问题：如何为用户打开它？

我正在使用的代码

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
bool adobeInstall = false;
RegistryKey adobe = Registry.LocalMachine.OpenSubKey("Software").OpenSubKey("Adobe");
if (adobe != null)
{
    RegistryKey acroRead = adobe.OpenSubKey("Acrobat Reader");
    if (acroRead != null)
        adobeInstall = true;
}

if (adobeInstall == true)
{
    ///Open the pdf file??
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T16:26:51.600

```
string locationToSavePdf = Path.Combine(Path.GetTempPath(), "file name for your pdf file.pdf");  // select other location if you want
File.WriteAllBytes(locationToSavePdf,Properties.Resources.nameOfFile);    // write the file from the resources to the location you want
Process.Start(locationToSavePdf);    // run the file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:24:11.930

添加`using System.Diagnostics;`到您的使用中，然后调用：

`Process.Start("path to pdf")`

您不需要找到 PDF Reader exe 或任何东西。只需调用所需文件的路径即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:22:16.013

试试这个（您只需要 PDF 文件的路径，无需将其添加到资源中）：

```
using System.Diagnostics;

Process.Start(“Path_of_PDFFile”) 
```

# c# - 无法在本地连接到 SQL Server

> ID：15642131
> 
> 赞同：0
> 
> 时间：2013-03-26T16:19:18.997
> 
> 标签：c#, sql-server

我在本地系统上安装了 SQL Server 2008，在 .NET 4.5 中使用 C# 编写了以下代码。

```
 private Boolean ConnectDatabase()
    {
        if( !this.IsInitialized())
        {
            return false;
        }
        else
        {
            try
            {
                String ConnectionString = "User ID=" + this.DatabaseUsername + ";" +
                                            "Password=" + this.DatabasePassword + ";" +
                                            "Server=" + this.DatabaseHost + "," + this.DatabasePort + ";" +
                                            "Database=" + this.DatabaseResource + ";";
                this.DatabaseConnection = new SqlConnection(ConnectionString);
                this.DatabaseConnection.Open();
                return true;
            }
            catch (Exception e)
            {
                return false;
            }
        }
    } 
```

我可以在 SSMS 中连接到服务器，但使用相同的凭据我无法在 C# 中获得连接。

连接字符串如下：

```
User ID=sa;Password=******;Server=CPUNAME\MSSQL,1433;Database=DBNAME; 
```

其中`CPUName`、`DBName`和******被替换为相应的值。我还尝试过使用 Windows 凭据和各种不同的服务器端点，包括我的 NB 名称、环回 IP、静态内部 IP、等等等等。防火墙已关闭。服务器上启用了 TCP。

我得到以下异常：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：TCP 提供者，错误：0 - 由于目标机器主动拒绝，无法建立连接。）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:43:36.760

有许多服务必须运行才能连接，即使是在本地也是如此。其中一些（有帮助）默认设置为“手动启动”。您可能要检查的服务包括 SQL Server、SQL Server 代理和分布式事务协调器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:21:35.997

~~您是否在 SQL Server 配置管理器中启用了协议？~~

~~请参阅[为 SQL Server 启用 TCP/IP 网络协议](http://msdn.microsoft.com/en-us/library/hh231672.aspx)~~

*[编辑]*
没关系；我错过了“在服务器上启用了 TCP”部分；-)
然后问题就变成了：启用 TCP/IP 后是否**重新启动**了SQL 服务器？您需要重新启动 SQL 服务（[参见步骤 6](http://msdn.microsoft.com/en-us/library/hh231672.aspx)）才能使这些更改生效。

还要验证您使用的是正确的实例名称（您当前使用`MSSQL`的是实例名称，这可能是`SQLExpress`什么）。

# objective-c - 如何使用代码旋转 iOS 模拟器？

> ID：15642135
> 
> 赞同：5
> 
> 时间：2013-03-26T16:19:27.490
> 
> 标签：objective-c, xcode, applescript

有谁知道如何旋转 iOS 模拟器（6.0 及更高版本）？我已经搜索过，但对此一无所获。

我试图通过代码（而不是手动）来做到这一点，但如果它可以通过脚本来完成，那么它必须从代码中运行。这甚至可以做到吗？需要一些建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T16:32:37.360

将 Supported interface orientations 的条目添加到 Tests 目标（或任何合适的目标），如下所示：

![目标设置](../Images/7478e62e7e5aa8277433bf7747ecd1b8.png)

只要唯一的条目是横向条目，它将以横向模式运行。

*编辑：*
如果我误解了你对测试的评论并且你没有运行单元测试，你可能不想继续改变你的主要目标的方向。在这种情况下，您可以复制您的主要目标并在那里更改方向。

*编辑：*
有一种未记录的方法可以强制代码旋转。虽然这适用于测试，但如果您在提交的应用程序中使用它，它可能会导致您的应用程序被拒绝。

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight animated:YES]; 
```

只需在需要使用此方法的任何地方包含此类别即可。

```
@interface UIDevice (MethodsThatAppleWillHitMeWithTheBanStickForUsing)
    -(void)setOrientation:(UIInterfaceOrientation)orientation animated:(BOOL)animated;
    -(void)setOrientation:(UIInterfaceOrientation)orientation;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:35:18.230

好吧，您必须检查几个步骤才能使所有方向都在 iOS6 中正常工作。即使其中一个丢失，它也不会起作用。

1.  正如 Lance 所说，是的，您必须为 iphone 或 ipad 设置支持的方向。

2.  将此代码写入要为其设置旋转的控制器中。

    -(NSUInteger)supportedInterfaceOrientations { return *UIInterfaceOrientationMaskAll;* }

    -(BOOL)shouldAutorotate { 返回 YES; }

根据您想要的方向更改*UIInterfaceOrientationMaskAll 。*

1.  如果您在项目中使用导航控制器，请确保正确设置它！

你不应该得到这个错误......（应用程序应该在应用程序启动结束时有一个根视图控制器）

正确执行这些步骤，轮换将为您工作。

# c# - 单声道 3.0.7 中的 System.ServiceModel.Activation

> ID：15642139
> 
> 赞同：3
> 
> 时间：2013-03-26T16:19:31.723
> 
> 标签：c#, mono

我正在尝试在我的 ubuntu 服务器上托管一个 nuget 提要，该服务器从源代码安装了 mono 3.07。我正在使用[nuget.org](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)中描述的方法。项目依赖`System.ServiceModel.Activation`，但是在mono下找不到。

根据[单声道文件](http://go-mono.com/status/status.aspx?reference=4.0&profile=4.5&assembly=System.ServiceModel.Activation)，组装已经实施。我是否需要安装其他软件包才能获得它？

* * *

## 更新

原来我读错了。Mono 目前不支持 DataServices，[也不打算支持](http://www.mono-project.com/WCF_Development). 经过一番摸索后，我发现最好的解决方法是[在 Linux 服务器上托管一个网络文件共享](http://www.gordonml.co.uk/linux/hosting-a-nuget-feed-on-a-linux-server/)（我自己的博客文章）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:19:46.093

`System.ServiceModel.Activation.dll`已在 Mono 中实现，但不是作为单独的程序集。它已合并到[`System.ServiceModel.dll`](http://go-mono.com/status/status.aspx?reference=4.0&profile=4.0&assembly=System.ServiceModel).

# highcharts - highcharts 和 canvg 缩放问题

> ID：15642145
> 
> 赞同：4
> 
> 时间：2013-03-26T16:19:40.430
> 
> 标签：highcharts, scaling, canvg

这是一个特定的问题，但我想如果我能找到解决方案，它可能会在某个时候对其他人有用。

我需要在浏览器端将我的一些 Highcharts 图表转换为 PNG。这个想法是，当我们的作者创建一个图形时，它会自动转换为 PNG，并且 PNG 将与给定图形的 JS 代码一起保存。然后我们可以在不能选择 JS 的情况下提供该 PNG 版本。我已经通过 canvg 库完成了这一切，它非常完美。

嗯，差不多。由于存在所有高 dpi 屏幕，我们希望 PNG 放大到正常显示图形的两倍。这样PNG版本在iPhone / iPad等上看起来不错......

canvg 有一些缩放选项，所以我尝试使用这些选项。但这就是它开始崩溃的地方。该图已正确缩放，但 Highcharts 对象中的某处有一个框不会与其他所有内容一起缩放，并且生成的缩放图仅显示精美缩放图的左上角。

我查看了 canvg 代码并很快意识到我的 JS 能力不足以弄清楚发生了什么，Highcharts 结束时也是如此。

如果有人对此有想法或知道一个简单的解决方案，我将不胜感激。

要复制该问题，您可以查看我整理的这个 JSFIDDLE 示例：

[http://jsfiddle.net/UVNvh/3/](http://jsfiddle.net/UVNvh/3/)

如果 JSFIDDLE 页面被弄乱或不知何故消失，这里是代码。

```
<script src="http://code.highcharts.com/highcharts.js">http://code.highcharts.com/highcharts.js</script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script> 
<p>Highcharts</p>
<div id="container" style="height: 400px; margin-top: 1em"></div>
<p>Canvas</p>
<canvas id="canvas"></canvas>
<p>Image</p>
<div id="image"><div>

<script type="text/javascript">
$(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container'
        },

        credits: {
            enabled: false
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }],

        navigation: {
            buttonOptions: {
                enabled: false
            }
        },
        exporting: {
            type: 'image/jpeg'
        }

    });

    var chart_svg = chart.getSVG();                    
    var chart_canvas = document.getElementById('canvas');

    canvg(chart_canvas, chart_svg, {scaleWidth: 1280, scaleHeight: 860});

    var chart_img = chart_canvas.toDataURL('image/png');

    jQuery('#image').append('<img src="' + chart_img + '" />');
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-18T13:49:42.893

我改进了 Scott Gearhart 没有 hack :) [http://jsfiddle.net/marcalj/EsPud/7/](http://jsfiddle.net/marcalj/EsPud/7/)

最重要的部分：

```
// Get chart aspect ratio
var c_ar = chart.chartHeight / chart.chartWidth;

// Set canvas size
chart_canvas.width = 1280;
chart_canvas.height = chart_canvas.width * c_ar;

canvg(chart_canvas, chart_svg, {
    ignoreDimensions: true,
    scaleWidth: chart_canvas.width,
    scaleHeight: chart_canvas.height
}); 
```

确保在图表元素上设置固定宽度和高度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T19:48:19.843

听起来您正在使用某种管理工具，因此更改图表的大小可能不是问题。在调用 getSVG() 之前，您可能应该使用 chart.setSize(width,height)。

如果你不能走这条路，你也可以直接编辑 SVG 文本，但我认为这不是最佳实践。

似乎 canvg 的工作方式是它采用 scaleWidth/scaleHeight 并根据您传递的选项和 svg 的现有高度/宽度向 svg 添加一个 transform="scale()" 。问题是它不会改变 svg 和结果图像的现有高度/宽度。我整理了一个 jsfiddle ，它可以满足我的需求，但它可能不是最好的解决方案。[http://jsfiddle.net/sgearhart2/EsPud/1/](http://jsfiddle.net/sgearhart2/EsPud/1/)

```
var chart_svg = chart.getSVG();                    
chart_svg = chart_svg.replace('width="600"', 'width="1280"');   
chart_svg = chart_svg.replace('height="400"', 'height="860"'); 

// If i had to guess, canvg does the next part but not the prior part  
var dWidth = 1280/600, dHeight = 860/400;
chart_svg = chart_svg.replace(
    '<svg ', 
    '<svg transform="scale(' + dWidth + ' ' + dHeight + ')" '
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-19T11:11:41.127

与今天（2016 年）一样，我可以通过将参数传递给`getSVG()`函数来使画布使用正确大小的图表。

例如：

```
var chartSVG = chart.highcharts().getSVG({
        exporting: {
            sourceHeight: chart.highcharts().chartHeight,
            sourceWidth: chart.highcharts().chartWidth,
        }
    }); 
```

# javascript - BOOTSTRAP：在ajax请求后插入手风琴

> ID：15642149
> 
> 赞同：1
> 
> 时间：2013-03-26T16:19:49.030
> 
> 标签：javascript, twitter-bootstrap

由于引导程序，我需要插入一个手风琴来组织我的数据。事实是，我使用 dom 创建了所有元素，以在第一次使用 ajax 请求加载页面后创建我的树。但是bootstrap并没有考虑到它，因为它是在页面首次初始化之后创建的。

目的是获得多行结果，如果单击一行，它会展开并提供更多详细信息。

如何动态创建这个手风琴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:29:32.663

通过生成 HTML 并将其插入到所需的页面中。

将其添加到页面后，调用：

```
$(".collapse").collapse() 
```

Bootstrap 的所有 Javascript 模块都支持手动创建。

# java - 比较所有模型对象

> ID：15642151
> 
> 赞同：0
> 
> 时间：2013-03-26T16:19:54.897
> 
> 标签：java, playframework, playframework-2.0

我希望能够将模型对象的 id 传递给方法，然后将其与该模型类型的所有其他对象进行比较，以查看其某些属性是否匹配。我知道您可以使用 Models Finder 进行更常规的查询，但我需要使用我编写的一些自定义方法来进行比较。有没有办法遍历所有现有的模型对象，将它们的属性与相关对象的属性进行比较，并存储匹配项是某种列表。Finder 有能力做到这一点吗？

我正在使用 EBean。

更新：

所以我的模型实际上比我之前使用的书籍示例稍微复杂一些。它是一种存储用户旅程信息的模型。模型的四个属性如下所示：

```
 public Double sLat;
    public Double sLon;
    public Double eLat;
    public Double eLon; 
```

这些双精度数代表旅程起点的纬度和经度以及终点的纬度和经度。我正在使用上一篇文章中描述的 Harvesine 公式：[How can I measure distance and create a bounding box based on two latitude+longitude points in Java?](https://stackoverflow.com/questions/120283/working-with-latitude-longitude-values-in-java/123305#123305)

所以在我的模型中，我将使用下面的方法来计算两点之间的距离：

```
public static double distFrom(double lat1, double lng1, double lat2, double lng2) {

    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double sindLat = Math.sin(dLat / 2);
    double sindLng = Math.sin(dLng / 2);
    double a = Math.pow(sindLat, 2) + Math.pow(sindLng, 2)
            * Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2));
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;

    return dist;
} 
```

我已经用一些硬编码的虚拟数据对此进行了测试，以查看它使用此方法是否按预期工作：

```
public static void journeyCompare(double lat1, double lng1, double lat2, double lng2,
                                      double lat3, double lng3, double lat4, double lng4) {

        double startMatch = distFrom(lat1, lng1, lat3, lng3);
        if(startMatch<=5) {
            System.out.println("Starting points are within five miles of each other");
            double endMatch = distFrom(lat2, lng2, lat4, lng4);
            if(endMatch<=5) {
                System.out.println("Start and end points are within five miles of each other!!! JOURNEY MATCH");
            }
            else {
                System.out.println("End points are too far apart");
            }
            }
            else {
            System.out.println("Starting points are too far apart");
            }

    } 
```

所以我的问题实际上是我如何能够使用这些方法 - 进行一次旅程，四个双打代表它的积分，并将其与所有其他旅程进行比较。我不确定是否有办法使用 EBean finder 将其拆分。

进一步更新：

所以我想我现在快到了，但我遇到了一个播放错误：No QueryString binder found for type Double。我的新匹配器方法：

```
public static List<Journey> matcher(Double startLat, Double startLon, Double endLat, Double endLon) {

    //Create a list to store matched journeys
    List<Journey> matchList = new ArrayList<Journey>();

    //Create a list that stores all pre-existing journeys
    List<Journey> allJourneys = new ArrayList<Journey>();
    allJourneys = find.all();

    for(Journey journey : allJourneys) {
        double distanceBetweenStart = distFrom(startLat, startLon, journey.sLat, journey.sLon);

        //if the starting points are within 3 miles of each other
        if(distanceBetweenStart <= 3) {
            //check end points
            double distanceBetweenEnd = distFrom(endLat, endLon, journey.eLat, journey.eLon);
            if(distanceBetweenEnd <= 3) {
                matchList.add(journey);
            }
        }
    }
            return matchList;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:54:32.767

假设您使用 JPA 和 Hibernate 等库来实现持久性，有几种方法可以解决这个问题。

```
public static List<Book> findMatch(Book id){
    List<Book> allBooks = JPA.em().createQuery("FROM Book").getResultList();
    List<Book> matchedBooks = new ArrayList<Book>(); 
    for(Book b : allBooks){
        if(isPossibleMatch(b, id)) //assuming you define a .isPossibleMatch() method
            matchedBooks.add(b);
    }
    return matchedBooks;
} 
```

或者

```
public static List<Book> findMatch(Book id){
    Query query = JPA.em().createQuery("SELECT b FROM Book b WHERE b.fieldOne = :fieldOne AND b.fieldTwo : fieldTwo");
    query.setParameter("fieldOne", id.fieldOne);
    query.setParameter("fieldTwo", id.fieldTwo);
    return query.getResultList();
} 
```

编辑：为了完整起见，将保留上述内容，但这是对 Ebean 解决方案的编辑。

如[http://www.playframework.com/documentation/2.0.4/JavaEbean](http://www.playframework.com/documentation/2.0.4/JavaEbean)中的示例所示，您可以在 Book 类中实现静态“查找”字段。

```
public static Finder<Long,Book> find = new Finder<Long,Book>(Long.class, Book.class); 
```

从那里开始，它将与上面的 JPA 代码非常相似，但是您获取所有 Book 对象列表的方式会因调用您的

```
Book.find.all() 
```

但是，如果您希望能够在评论中进行操作，例如查找 2.50 美元到 4.50 美元之间的书籍，您可以使用 Finder 编写查询，如下所示：

```
Book.find.where().between("price", 2.5, 4.5).findList(); 
```

where() 方法应该证明对您有用，可以在[http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Query.html#where%28%29找到](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/Query.html#where%28%29)

# php - 获取未定义的索引mysql会话

> ID：15642153
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:20:05.320
> 
> 标签：php, mysql, forms, session, indexing

我收到以下代码错误。我有两个 php 文件。一种是从文本字段中获取输入的表单，我希望将其传递给下一个文件。这是我到目前为止所拥有的：

```
<?php
if(isset($_GET['submit']))
{
    $_SESSION['search'] = $_GET['patient_id'];
    header('Location:./reception_view_results.php');
}
else{
?>
<!DOCTYPE html>
<html>
<head>
    <title>TEST</title>
</head>
<body>
    <fieldset>
        <legend>Search Appointment</legend>
        <form method="GET">
            <label>Patient ID</label>
            <input type="text" name="patient_id"/>
            <input type="submit" name="submit" value="Search"/>
        </form>
    </fieldset>
</body>
</html>
<?php 
} 
?> 
```

以及该值将传递到的后续页面：

```
<!DOCTYPE html>
<html>
<head>
    <title>View Results</title> 
</head>
<body>
    <?php 
    session_start();

    include("connect.php");

    $search = $_SESSION['search'];

    if ($result = $db->query("SELECT nextapptdate, nextappttime, doc_id pt_id, pt_fname, pt_lname, ph_no 
    FROM patient 
    WHERE pt_id = $search
    ORDER BY pt_id;"))
    {
        // display records if there are records to display
        if ($result->num_rows > 0)
        {?>
            <fieldset>
            <legend><strong>Search Results</strong></legend>
            <table>
                <thead>
                    <tr>
                        <th>Patient ID
                        <th>First Name
                        <th>Last Name
                        <th>Date of Birth
                        <th>Doc ID
                        <th>Phone No.
                        <th>Next. Appt.
                        <th>Time
                </thead>
                <tbody>
                    <?php
                    while ($row = $result->fetch_object())
                    {   
                        // set up a row for each record
                        echo "<tr>";
                        echo "<td>" . $row->pt_id;
                        echo "<td>" . $row->pt_fname;
                        echo "<td>" . $row->pt_lname;
                        echo "<td>" . $row->ptdob;
                        echo "<td>" . $row->doc_id;
                        echo "<td>" . $row->ph_no;
                        echo "<td>" . $row->nextapptdate;
                        echo "<td>" . $row->nextappttime;
                    }?>
                    </tbody>
            </table>
            </fieldset>
        <?php
        }
    else{echo "No results to display!";}
    }
    ?>  
</body>
</html> 
```

我尝试了几件事：
1）从POST更改为GET。
2）从表单中完全删除动作属性。
3）尝试直接使用会话变量。

我不断在这一行收到错误：

```
if ($result = $db->query("SELECT nextapptdate, nextappttime, doc_id pt_id, pt_fname, pt_lname, ph_no 
            FROM patient 
            WHERE pt_id = $search
            ORDER BY pt_id;"))
            { 
```

这是因为它不理解$search。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:23:52.753

doc_id 后面缺少逗号。它应该像这样工作（包括一些格式）

```
SELECT
  nextapptdate,
  nextappttime,
  doc_id,
  pt_id,
  pt_fname,
  pt_lname,
  ph_no 
FROM
  patient 
WHERE
  pt_id = $search
ORDER BY
  pt_id 
```

并查看您的第一个文件：全局数组`$_SESSION`不存在，直到您调用`session_start`第一个文件中缺少的数组，并且会产生您在主题中遇到的错误。

# html - 占位符未在 FireFox 上显示/输入禁用，（Chrome 和 IE 有效）

> ID：15642154
> 
> 赞同：0
> 
> 时间：2013-03-26T16:20:08.173
> 
> 标签：html

这是[联系表格](http://tema2.innovacionesweb.info/contact.html)，您可以输入文本也看不到占位符，这真的很奇怪，我检查了代码，看不出它有什么问题，输入也被禁用。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:23:01.483

输入上的填充太大，输入不能占据它想要的所有位置。删除你`padding: 29px;`和你的输入工作正常。

您可以使用 Firebug 进行检查。输入的填充为 29 像素，但高度为 0。

# matlab - Matlab中的简单插值

> ID：15642155
> 
> 赞同：1
> 
> 时间：2013-03-26T16:20:08.380
> 
> 标签：matlab, interpolation

我想要一个简单的插值。我在许多带有**interp1**的 Matlab 示例中看到，但是......它总是带有数据点！它不是一维数据！

我想要这个功能：

```
my_vector = interpolate(init, end, steps); 
```

例如：

```
[1 10] % Interpolate in 7 steps --> [1 2.5 4 5.5 7 8.5 10]
[5 -5] % Interpolate in 3 steps --> [5 0 -5] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:23:14.517

使用[`linspace()`](http://www.mathworks.co.uk/help/matlab/ref/linspace.html)：

```
>> linspace(1, 10, 7)

ans =

    1.0000    2.5000    4.0000    5.5000    7.0000    8.5000   10.0000

>> linspace(5, -5, 3)

ans =

     5     0    -5 
```

（我认为您的第一个示例中有错误。）

# teamcity - 错误 CS0433：“System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute”类型存在

> ID：15642161
> 
> 赞同：1
> 
> 时间：2013-03-26T16:20:21.537
> 
> 标签：teamcity

我使用 .net 2012 版和 MS build 4.0 subveriosn Ankh SVN 存储库与团队城市进行持续集成。当我运行解决方案时，它抛出如下错误

(26, 10): 错误 CS0433: 类型 'System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedAttribute' 存在于 'c:\BuildAgent\work\98284cd997678fbf\IC.Icrmas.UI\bin\EntityFramework.dll' 和 'c :\Windows\Microsoft.NET\assembly\GAC_MSIL\System.ComponentModel.DataAnnotations\v4.0_4.0.0.0__31bf3856ad364e35\System.ComponentModel.DataAnnotations.dll'

我仔细看到项目中引用的 dll 版本和引用位置都是相同的。在我的构建代理中，我安装了 .Net 框架 4.5。请建议我如何解决并继续进行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T11:26:36.563

从 Nuget 管理器重新安装实体框架

# javascript - WebGl 太阳系

> ID：15642167
> 
> 赞同：1
> 
> 时间：2013-03-26T16:20:42.293
> 
> 标签：javascript, html, plugins, 3d, webgl

```
<input type="button" value="Mercury" class="btn" onClick = "showInfo(1)"/>
<div id="1" style="left:70%;top:300px;width:300px;position:absolute;z-index:100;display:none;">
    Mercury - my favorite planet
</div> 
```

金星——我最喜欢的星球

```
<input type="button" value="Earth" class="btn3" onClick = "showInfo(3)"/>
<div id="3" style="left:70%;top:300px;width:300px;position:absolute;z-index:100;display:none;">
    earth - my favorite planet
</div>` 
```

这是太阳系导航的按钮功能。

```
var infoMercury = false;    
var infoVenus = false;
var infoEarth = false; 
```

这些是变量。

```
if(!info){

    earth.position.x = Math.sin(t*0.2)*3000;
    earth.position.z = Math.cos(t*0.2)*3000;

    clouds.position.x = Math.sin(t*0.2)*3000;
    clouds.position.z = Math.cos(t*0.2)*3000;

    mercury.position.x = Math.sin(t*0.6)*800;
    mercury.position.z = Math.cos(t*0.6)*800;

    venus.position.x = Math.sin(t*0.4)*1700;
    venus.position.z = Math.cos(t*0.4)*1700;

    mars.position.x = Math.sin(t*0.16)*5000;
    mars.position.z = Math.cos(t*0.16)*5000;

    jupiter.position.x = Math.sin(t*0.12)*(-7400);
    jupiter.position.z = Math.cos(t*0.12)*(-7400);

    saturn.position.x = Math.sin(t*0.08)*9800;
    saturn.position.z = Math.cos(t*0.08)*9800;

    ring.position.x = saturn.position.x;
    ring.position.z = saturn.position.z;

    uranus.position.x = Math.sin(t*0.04)*12000;
    uranus.position.z = Math.cos(t*0.04)*12000;

    neptune.position.x = Math.sin(t*0.02)*18000;
    neptune.position.z = Math.cos(t*0.02)*18000;

    mercury.rotation.y+=0.01;
    venus.rotation.y+=0.01;
    earth.rotation.y+=0.005;
    clouds.rotation.y-=0.001;
    mars.rotation.y+=0.01;
    jupiter.rotation.y+=0.01;
    saturn.rotation.y+=0.01;
    ring.rotation.y-=0.002; //saturn ring
    uranus.rotation.y+=0.01;
    neptune.rotation.y+=0.01;
}

 else 

  {
      if(infoMercury){
        if(camera.position.z>mercury.position.z-100){
          camera.position.z-=80;
          camera.lookAt(mercury.position);
         }
         else
         {
             document.getElementById("1").style.display = "block";

         }
          if(camera.position.x<mercury.position.x-100){
          camera.position.x+=80;
         }

    }

   if(infoVenus){
       if(camera.position.z>venus.position.z-100){
       camera.position.z-=80;
       camera.lookAt(venus.position);
       }
       else
         {
             document.getElementById("2").style.display = "block";

         }
          if(camera.position.x<mercury.position.x-100){
          camera.position.x+=80;
         }

   }

   if(infoEarth){
        if(camera.position.z>earth.position.z-300){
          camera.position.z-=80;
          camera.lookAt(earth.position);
          }
         else
         {
             document.getElementById("3").style.display = "block";

         }
          if(camera.position.x<earth.position.x-80){
          camera.position.x+=180;
         }
   } 
```

上面的代码是行星的位置和旋转，当按下按钮时，相机会指向特定的行星并显示信息。

```
function showInfo(num){
    switch(num){
        case 1:
            infoMercury = true;
            info = true;
        break;
        case 2:
            infoVenus = true;
            info = true;
        break
        case 3:
            infoEarth = true;
            info = true;
        break;
        case 4:
            info = true;
        break;
        default:
        break;
    } 
```

当按下其中一个按钮时，它会将相机定向到行星的位置。我一直在为每个行星位置创建按钮时遇到困难，因此当单击导航时，它只执行一次任务。例如，如果我单击按钮“汞”，它会找到行星，显示信息，但是在选择另一个按钮时，导航落入查找行星。因此，前一个星球的信息保留在屏幕上。

有什么想法可以安排导航脚本吗？

# sharepoint - Sharepoint Designer 工作流程 - 如何将变量链接到人员信息。

> ID：15642171
> 
> 赞同：2
> 
> 时间：2013-03-26T16:20:49.867
> 
> 标签：sharepoint, sharepoint-designer

嗯，我不能发布一个选择，所以我会尝试描述。

因此，我试图共享存储在 Reviewer 列表的 Reviewer 字段中的人员或组信息。

在我的主列表中，我有一个业务区域，如果它是“销售”，则应查找审阅者（1 到 1 rel）并将他的详细信息存储在一个变量中。但是变量只能是 String int 等，所以我想知道如何最好地引用它。

如果我在 Reviewers 中的 Reviewer 字段上使用查找，我会得到 Persons options { String Display Name Login Name Email Address }

但我想稍后从 Person 收集数据？？

这可以做到吗？？？

ps 我还需要 2 个代表点才能发布照片 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:26:24.913

通过使用该行的 ID 并使用该 ID 查找该行上的人员并返回一个字符串来绕过它。在有关返回电子邮件地址的值的下拉列表中，这是我尝试使用的一个选项，但这不起作用并将 Person 作为字符串返回

# paypal - PAYPAL REST API 和欧元货币

> ID：15642172
> 
> 赞同：2
> 
> 时间：2013-03-26T16:20:53.887
> 
> 标签：paypal

似乎最新的 REST API 仅处理美元货币（已尝试使用欧元货币，但出现错误“此时不支持值”。使用美元完美工作）。

有谁知道它是否会很快推出或者我应该使用以前的 sdk 吗？当我说很快时，它是 2/3 个月......

ps：我知道这不是一个真正的开发人员问题，但 Paypal 将 stackoverflow 视为其[社区论坛](https://developer.paypal.com/webapps/developer/support)......

更新：我试过这个[测试样本](https://developer.paypal.com/webapps/developer/docs/api/#create-a-payment)。

如果我设置：

```
amount.setCurrency("EUR");   // instead of amount.setCurrency("USD"); 
```

我有这个答案：

```
com.paypal.exception.HttpErrorException: Error code : 400 with response :
{
 "name":"VALIDATION_ERROR",
 "details": [ {"field":"transactions[0].amount.currency",
               "issue":"Value is not supported at this time"}
            ],
 "message":"Invalid request - see details",
 "information_link":"https://developer.paypal.com/docs/api/#VALIDATION_ERROR",
 "debug_id":"2aeb5d81964ce"
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:31:14.847

这些 API 目前仅支持美元。我确实检查了，并且计划增加对其他货币的额外支持，但是这还没有生效。

**编辑：**截至 07/31，您可以将欧元（和其他）货币与我们的 REST API 一起使用。它们也向更多国家开放。有关详细信息，请参阅[此页面。](https://developer.paypal.com/webapps/developer/docs/integration/direct/rest_api_payment_country_currency_support/)

# java - Java - 布尔值仅返回 false；我传递的值不正确吗？

> ID：15642173
> 
> 赞同：1
> 
> 时间：2013-03-26T16:20:54.303
> 
> 标签：java, methods, boolean, return

我有一个 10x10 的点阵列。我向用户询问“网格”上的起点，然后生成随机遍历网格，向北、南、东和西。

我使用了一个依赖于随机数的 switch 语句逆时针迭代，检查“。” 在每个方向。如果我找到一个点，我会移动到网格上的那个位置，并增加一个字母字符。程序一直执行，直到用户到达“Z”，或者直到用户卡住——这是最先发生的。

随机数从 0-3 生成。如果为 0，程序检查北，然后东，然后南，然后西；如果为 1，则检查东方，然后检查南方，依此类推。

例如，如果用户从网格上的 1,1 开始，他/她应该能够向任何方向移动，因为网格上没有其他东西。它们完全被点包围。

我的问题是，当我将 switch 语句中的下一个可能位置传递给布尔方法时，它总是返回 false。

这是布尔方法：

```
public static boolean canMove(int r, int c)
{
boolean canMoveSwitch = false;
    if ((r>=0 && r <=9) && (c>=0 && c <=9))
    {
        if(walkingGrid[r][c] == '.')
        {
            canMoveSwitch = true;
        }
    }
    return canMoveSwitch;
} 
```

这是开关的[部分]：

```
public static void makeAMove()
{
    while(stopCode != 1)
    {
        getRandom();
        switch(randomDirection)
        {
            case 0: if(canMove(row-1, col) == true)//North
                    {
                        alphabetIndex = (char)alphabetIndex + 1;
                        walkingGrid[row-1][col] = (char)alphabetIndex;
                    }
                    else if(canMove(row, col+1) == true)//East
                    {
                        alphabetIndex = (char)alphabetIndex + 1;
                        walkingGrid[row][col+1] = (char)alphabetIndex;
                    }
                    else if(canMove(row+1,col) == true)//South
                    {
                        alphabetIndex = (char)alphabetIndex + 1;
                        walkingGrid[row+1][col] = (char)alphabetIndex;
                    }
                    else if(canMove(row,col-1) == true)//West
                    {
                        alphabetIndex = (char)alphabetIndex + 1;
                        walkingGrid[row][col-1] = (char)alphabetIndex;
                    }
                    else
                    {
                        stopCode = 1;
                    }
                     break; 
```

RandomDirection 工作正常。

我已经从主要打印它只是为了确保。Row 和 col 是用户输入的坐标。那时，它们应该能够至少朝一个方向移动，但布尔值永远不会返回 true。
我已经从主程序中打印了“canMoveSwitch”，所以我知道它正在返回一个真/假值。

我没有正确传递值吗？这是家庭作业，所以我并不是在寻找一个直接的答案；只是朝着正确的方向推进。
您的见解将不胜感激。

***编辑***

我想到了！当我打印网格以显示用户的位置时，我将 row 和 col 增加到它们的最大值。我所要做的就是在切换之前取回用户的值，并且效果很好！感谢所有看过这个的人！

# jquery - JQuery可拖动不起作用

> ID：15642179
> 
> 赞同：0
> 
> 时间：2013-03-26T16:21:09.903
> 
> 标签：jquery, html, css, draggable

我有一个快速片段，可以让我在一行上插入一个书签，它还告诉我书签位于右边缘的百分比。我希望能够拖动这些书签，同时书签上方的文本正在更改为适当的百分比。

我有一个[小提琴](http://jsfiddle.net/bagofmilk/uKkRh/580)。

但这里的代码：

HTML

```
<div id='wrapper'>
   <div id="container"></div>
</div> 
```

CSS

```
#wrapper {
  width:500px;
  height:100px;
  margin:40px 0px;
  border:1px solid white;
}

#container {
  background: green; 
  width: 500px; 
  height: 20px; 
  position: relative;
  margin-top:40px;
}
#wrapper img {
  position: absolute;   
}

span{font-size:62.5%;} 
```

jQuery

```
$(document).ready(function() {
$("#container").click(function(e) {
    e.preventDefault();
    var x = e.pageX - this.offsetLeft;
    var y = e.pageY - this.offsetTop;
    var z = x - 5;       
    var txt = $('<span></span>');
    txt.css('top', '50px').css('left', z).css('position', 'absolute');
    txt.text( (Math.round((x.toFixed(0) / 5) * 1) / 1) + "%");
    txt.appendTo('#wrapper');

    var img = $('<img>');
    img.css('top', '65px').css('left', x).css('position', 'absolute').css('z-index', '999');
    img.attr('src', 'http://www.appmalt.info/htmlplay/img/arrowup.png');
    img.appendTo('#wrapper');

})

$('img').draggable();

}); 
```

我什至无法拖动图像，我不知道为什么。谁能解释一下？

[小提琴](http://jsfiddle.net/bagofmilk/uKkRh/580)又来了。

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:25:36.000

在将 img 添加到 dom 之前，您已经在 img 上调用了 draggable。试试下面..

```
$(document).ready(function() {
    $("#container").click(function(e) {
        e.preventDefault();
        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop;
        var z = x - 5;       
        var txt = $('<span></span>');
        txt.css('top', '50px').css('left', z).css('position', 'absolute');
        txt.text( (Math.round((x.toFixed(0) / 5) * 1) / 1) + "%");
        txt.appendTo('#wrapper');

        var img = $('<img>');
        img.css('top', '65px').css('left', x).css('position', 'absolute').css('z-index', '999');
        img.attr('src', 'http://www.appmalt.info/htmlplay/img/arrowup.png');
        img.appendTo('#wrapper');
        $('img').draggable();
    })

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:27:42.067

`$('img').draggable();`仅适用于当前存在的图像。

您需要再次手动调用它：

```
$('#container').click(function(e) {
  ...

  $(img).draggable();
}); 
```

# ios - 在 iOS 应用中添加 Admob 时生成错误

> ID：15642180
> 
> 赞同：1
> 
> 时间：2013-03-26T16:21:22.180
> 
> 标签：ios, xcode4.5, admob

我在这里尝试了很多源代码和很多问题，但没有解决方案对我有用。当我尝试将 admob 添加到我现有的项目中时，我在 Xcode 中收到以下错误，请参阅屏幕截图：

![错误构建](../Images/78b560b451469357b1855ca5d9867877.png)

我有所有的框架，比如 store kit 等等。请参阅第二个屏幕截图：

![在此处输入图像描述](../Images/7674ccf734692164921d4b40fb47fba1.png)

我添加了 iAd 网络没有任何问题，但我无法添加 admob。请帮忙

如果图像不清晰，请在此处查看错误文本：

> ld：警告：找不到选项“-L/Users/hussainbarakat/Desktop/ARSSReader21-1-2013 copy1/../../Documents/GoogleAdMobAdsSdkiOS-6.3.0/Add-ons/GoogleAnalyticsiOS_2.0beta4/Library”的目录ld：警告：找不到选项“-L/Users/hussainbarakat/Desktop/ARSSReader21-1-2013 copy1/../../Documents/GoogleAdMobAdsSdkiOS-6.3.0”的目录 ld：警告：忽略文件/Users/hussainbarakat /Desktop/ARSSReader21-1-2013 copy1/StoreKit.framework/StoreKit，在文件 /Users/hussainbarakat/Desktop/ARSSReader21-1-2013 copy1/StoreKit.framework/StoreKit 中缺少所需的体系结构 i386 copy1/StoreKit.framework/StoreKit（2 片）体系结构 i386 的未定义符号：“_OBJC_CLASS_$_SKStoreProductViewController”，引用自：libGoogleAdMobAds.a(GADOpener.o) 中的 objc-class-ref “_SKStoreProductParameterITunesItemIdentifier”，引用自：-[GADOpener openInAppStore:fallbackURLString:] in libGoogleAdMobAds.a(GADOpener.o) ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:31:14.650

最后我找到了解决方案！问题出在 Storekit Framework 上，我之前已经将这个框架拖到了我的项目中，所以当我删除这个框架时，然后从 build setting > Build phase 再次添加它，然后添加 StoreKit 框架，错误就消失了.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T04:15:05.850

按照本[教程](http://googleadsdeveloper.blogspot.com/2012/09/migrating-to-admob-v62-for-ios.html)

并使 ADSupport.framework 可选

在此处下载 libAdapterId，一个表格[https://dl.google.com/dl/googleadmobadssdk/libadapteriad.zip](https://dl.google.com/dl/googleadmobadssdk/libadapteriad.zip) 设置 translatesAutoresizingMaskIntoConstraints 属性。支持 iOS6 及更高版本

# mysql - 表相互独立的 MySQL 数据库的 UML 图

> ID：15642181
> 
> 赞同：0
> 
> 时间：2013-03-26T16:21:24.370
> 
> 标签：mysql

作为辅助项目的一部分，我已经获得了一个现有的数据库来建模。但是我注意到没有一个表是相互关联的。有没有人遇到过这个问题？如果是这样，您能否推荐一种为数据库建模的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:10:55.777

UML有很多图表，我认为您的意思是用于数据建模的类图（数据建模类图类似于实体关系图（ERD）。它们用于对数据库表进行建模）。

假设是这种情况，是的，类图可能没有关系。基本上，您会显示具有属性和操作的类。然而，在对数据库表建模时，没有任何操作；所以你最终得到类（表）和属性（列）。

您可以在图表中包含的其他详细信息是属性（列）类型和约束（主键等）。

# mkmapview - 检测在旋转的 MkMapView 上是否可见位置

> ID：15642182
> 
> 赞同：1
> 
> 时间：2013-03-26T16:21:26.337
> 
> 标签：mkmapview, mapkit, mkannotation, mkannotationview

我正在使用带有 mkusertrackingmodefollowwithheading 跟踪模式的 MkMapView，以便地图根据罗盘方向旋转。

我需要知道特定位置是否在地图视图上可见。

考虑到地图视图是旋转的，这似乎相当困难，但也是许多不同应用程序的共同需求。

有什么办法吗？

谢谢！-C

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:52:05.333

经过几个小时的研究，我似乎找到了解决方案....

```
// testing if someLocation is on rotating mapView
CGRect myRect = [self.mapView frame];
CGPoint screenP = [self.mapView convertCoordinate:someLocation toPointView:self.mapView];
if(screenP.x > 0) {
  if(screenP.y > 0) {
    if(screenP.x < myRect.size.width) {
      if(screenP.y < myRect.size.height) {
        return YES;
      }
    }
  }
}
return NO; 
```

无论如何，...这似乎工作得很好。-C

# php - $_SESSION 和 $_REQUEST 之间的关系

> ID：15642184
> 
> 赞同：0
> 
> 时间：2013-03-26T16:21:33.667
> 
> 标签：php, session, request

这是我的情况：

我正在使用 SugarCRM 的 API，要进行调用，我必须修补一些函数才能使事情正常进行。在其中一个函数中，我不得不重写这段代码：

```
$credentials = array('user_name'=>"xxxxxxx", 'password'=>md5("xxxxx"));
    if (SugarWebServiceImpl::login($credentials, null, null)) {
    global $current_user;
    require_once('modules/Users/User.php');
    $current_user = new User();
    $current_user->retrieve($_SESSION['user_id']);
    $this->login_success();
    return true;
} 
```

我的问题是，在同一次调用中，我的变量`$_REQUEST`变为空。我的问题很简单：

`$_SESSION`变量和变量之间是否存在任何关系`$_REQUEST`。设置新的时会`$_REQUEST`清空自己`$_SESSION`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:23:50.893

不，那里没有。根据[PHP 手册](http://php.net/manual/en/reserved.variables.request.php)

`$_REQUEST`是 `An associative array that by default contains the contents of $_GET, $_POST and $_COOKIE.`

然而，这只是回答你的问题，但并没有解决问题。如果这个问题发生在这里

`$current_user->retrieve($_SESSION['user_id']);`

那么这将有助于能够看到该检索方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:25:38.293

`$_SESSION`并且`$_REQUEST`是无关的。

`$_SESSION`- 存储在会话范围内的变量（每个用户），例如在用户浏览器设置`PHPSESSID`cookie之前可用`session_start()`并保持设置在用户浏览器中。

`$_REQUEST`- 当前请求的参数提供程序，查询参数（也可通过`$_GET`、post/form 字段访问（也可通过`$_POST`或 cookie 访问）（也可通过 访问`$_COOKIES`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:23:18.113

不，`$_SESSION`也`$_REQUEST`没有任何关系。

# java - 如何获取 Android GPS 供应商和版本？

> ID：15642195
> 
> 赞同：2
> 
> 时间：2013-03-26T16:22:01.080
> 
> 标签：java, android, gps

由于 LocationManager 无法提供这些信息，如何获取 Android GPS 供应商和版本？谢谢！

# ruby-on-rails - 等价于 ruby /rails 中的 Array.some

> ID：15642197
> 
> 赞同：13
> 
> 时间：2013-03-26T16:22:01.687
> 
> 标签：ruby-on-rails, ruby, arrays

我想在 Rails 中做相当于 Array.some 的操作。

这是一个应用于我的用例的示例，它有点复杂`include?`（我想将其应用于`*args`）：

```
ary = [:a, :b, :c, d: :x, e: :y] # => [:a, :b, :c, { :d => :x, :e => :y }]
search = :e
contained = ary.some { |x|
  x == search || x.try(:key?, search)
} # => true
assert contained, "We should have found #{search}" 
```

我可以这样做，`ary.map`但这意味着遍历整个数组，然后再次测试它的内容。我也可以使用`ary.drop_while`并验证它是否返回一个空数组，但我需要再次测试结果。我也见过`ary.bsearch`，但有一些奇怪的限制，我不太了解元素的顺序。

我错过了什么吗？有没有简单的方法可以做到这一点？我正在使用 ruby​​2 和 rails 4 (edge)。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T16:49:34.697

Javascript [Array.prototype.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)是 Ruby [Enumerable#any？](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-any-3F).

```
["1", "2", "3"].any? { |x| x.to_i == 2 } #=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T17:33:10.527

如果你真的在寻找`some?`你可能想要这样的东西

```
module Enumerable
  def some?
    self.any? && !self.all?
  end
end 
```

`true`仅当设置了一些元素但不是全部时，这才会给你。

在此处查看代码段[https://coderwall.com/p/wcgj2w](https://coderwall.com/p/wcgj2w)

# php - 在设置循环之前在循环外设置变量的最佳方法是什么？

> ID：15642200
> 
> 赞同：0
> 
> 时间：2013-03-26T16:22:07.777
> 
> 标签：php, wordpress

我正在尝试使用以下代码输出日期大于或等于今天日期的事件列表：

```
$args = array('post_type' => 'event') // setup my custom post type    
$todaysdate = blah blah //setup for today's date

// the wp loop  
query_posts($args); 

if ( (have_posts() && $eventdate >= $todaysdate)  ) : while (have_posts()) : the_post();

$eventdate = blah blah // setup for the date of the event;

echo $event;

endwhile; endif; 
```

如您所见，问题在于 IF 依赖于循环内的变量。

首先在循环外设置变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:26:47.247

而不是做

```
if stuff from while iteration that doesn't exist yet
    while 
```

那么你应该做

```
while
    if stuff from current while iteration 
```

就像你说的：“你可以看到的问题是 IF 依赖于循环内的一个变量。”

您只需构建代码，以便在当前执行时存在所需的内容。只需将依赖项移动到适当的位置，以便它在您使用之前就存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:31:40.150

if 实际上应该在循环内，例如

```
$args = array('post_type' => 'event') // setup my custom post type    
$todaysdate = "blah blah"; //setup for today's date

// the wp loop  
query_posts($args); 

if ( (have_posts()) : while (have_posts()) : the_post();

$eventdate = "blah blah"; // setup for the date of the event;

if($eventdate >= $todaysdate))

echo $event;

endif;

endwhile; endif; 
```

**编辑：**

`Thanks, this works fine, however, I want to output a set number of events (5 in total) which I've defined in $args. So $args sets up 5 events, but the second IF then filters out old events so I end up with less than 5.`

但这与您拥有它的原因相同。但是，如果您的意思是它应该显示该日期之后的 5 个事件，则`wp_query`需要对其本身进行修改。在此处查看[示例](http://codex.wordpress.org/Class_Reference/WP_Query)

# c# - 时间：2019-05-10 标签：c#winrterror 0x8001010E

> ID：15642204
> 
> 赞同：1
> 
> 时间：2013-03-26T16:22:12.903
> 
> 标签：c#, windows-runtime

我制作了一个创建线程并在该线程中创建图像的程序：

```
private async void GetCamera()
{
   ....
    tk = new Task(MyAwesomeTask);
    tk.Start();

}

private async void MyAwesomeTask()
{
        while (true)
        {
            await Task.Delay(TimeSpan.FromSeconds(0.5));
            SavePhoto1();
        }
}

private  void SavePhoto1()
{
        try
        {
            WriteableBitmap wb1 = new WriteableBitmap(320, 240);//throw exception
        }catch (Exception ee)
        {
            String s = ee.ToString();
        }

} 
```

但是线

```
WriteableBitmap wb1 = new WriteableBitmap(320, 240); 
```

抛出异常：

> s="System.Exception：应用程序调用了为不同线程编组的接口。（来自 HRESULT 的异常：0x8001010E (RPC_E_WRONG_THREAD)）\r\n 在 Windows.UI.Xaml.Media.Imaging.WriteableBitmap..ctor( Int32 pixelWidth, Int32 pixelHeight)\r\n at TestVideo.MainPage.SetImageFromStream() in ...\MainPage.xaml.cs:line 500\r\n at TestVideo.MainPage.SavePhoto1() in ....\MainPage .xaml.cs：第 145 行"

我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:23:58.747

第一个问题是您正在使用`async void`. 您应该这样做的唯一时间是方法是事件处理程序时。在您的情况下，您应该`async Task`改用：

```
private async Task GetCamera()
{
   ....
    //tk = new Task(MyAwesomeTask);
    //tk.Start();
    await Task.Run(async () => await MyAwesomeTask());
    ...    
}

private async Task MyAwesomeTask()
{
    while (true)
    {
        await Task.Delay(TimeSpan.FromSeconds(0.5));
        // added await
        await SavePhoto1();
    }
} 
```

您实际上不需要`Task`在上述方法中返回 a 。编译器会自动为您执行此操作。

要解决您的问题，您应该只`WriteableBitmap`在 UI 线程上创建对象。你可以这样做：

```
private async Task SavePhoto1()
{
    try
    {
        WriteableBitmap wb1 = null;
        await ExecuteOnUIThread(() =>
        {
            wb1 = new WriteableBitmap(320, 240);//throw exception
        });

        // do something with wb1 here
        wb1.DoSomething();
    }catch (Exception ee)
    {
        String s = ee.ToString();
    }
}    

public static IAsyncAction ExecuteOnUIThread(Windows.UI.Core.DispatchedHandler action)
{
    return Windows.ApplicationModel.Core.CoreApplication.MainView.CoreWindow.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, action);
} 
```

我没有通过编译来测试上面的内容，但它应该会给你一个好的开始。如果您有任何问题，请告诉我。

# javascript - jqueryui - 如何获得最顶层对话框的位置？

> ID：15642205
> 
> 赞同：3
> 
> 时间：2013-03-26T16:22:15.293
> 
> 标签：javascript, jquery, jquery-ui, modal-dialog, jquery-ui-dialog

我的网络应用程序中有一堆模式窗口。不幸的是，因为所有对话框都具有相同的大小，所以顶部的对话框覆盖了其他对话框。最好有自定义打开事件，它检查是否打开了任何其他对话框，选择最顶部的一个并调整 (x,y) 位置，为最顶部对话框的位置添加一些偏移量。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:36:53.093

您可以编写一个函数来排列页面上的所有 jQuery UI 对话框，并在 open 函数中调用它，就像这样。

```
function arrangeDialogs() {
    var $dialogs = $('div.ui-dialog:visible');

    if($dialogs.length) {
        var $first = $($dialogs[0]);
        var top = +$first.css('top').replace(/[^-\d\.]/g, '');
        var left = +$first.css('left').replace(/[^-\d\.]/g, '');                    

        $('div.ui-dialog').each(function() {
            $(this).css({top: top + 'px', left: left + 'px'});
            top += 5;
            left += 5;
        });
    }               
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:35:49.030

使用[`open`事件](http://api.jqueryui.com/dialog/#event-open)。在我的示例中，它会查找其他对话框，如果存在，则将一个堆叠在另一个之上。

```
$('.dialog').dialog({
    open: function( event, ui ) {
        var dialogs = $('.ui-dialog:visible');
        if(dialogs.length > 1){
            dialogs.each(function(i, e){
                if(i===0){
                   $(e).css('top', '0px');
                }else{
                    var prevDialog = $(e).prevAll('.ui-dialog:visible');
                     $(e).css('top', parseInt(prevDialog.css('top')) + parseInt(prevDialog.outerHeight()) + 'px')                  
                }
            });
        }
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/8dnh6/1/](http://jsfiddle.net/dirtyd77/8dnh6/1/)

希望这会有所帮助，如果您有任何问题，请告诉我！

# java - 将 Spring 与 App Engine 结合使用

> ID：15642207
> 
> 赞同：0
> 
> 时间：2013-03-26T16:22:16.987
> 
> 标签：java, google-app-engine, servlets, spring-mvc

我正在努力使用带有应用程序引擎的基本 crud 方法：

我的代码如下所示：

我的客户控制器：

```
@Controller
public class CustomerController {

@RequestMapping(value = "/add", method = RequestMethod.GET)
public String getAddCustomerPage(ModelMap model) {
   return "command";
}

@RequestMapping(value = "/list", method = RequestMethod.POST)
public ModelAndView add(HttpServletRequest request, ModelMap model) {

    String email = request.getParameter("email");
    String password = request.getParameter("password");

    Customer c = new Customer();
    c.setEmail(email);
    c.setPassword(password);
    c.setDate(new Date());

    PersistenceManager pm = PMF.get().getPersistenceManager();
    try {
        pm.makePersistent(c);
    } finally {
        pm.close();
    }

    return new ModelAndView("redirect:command");

}

// get all customers
@RequestMapping(value = "/list", method = RequestMethod.GET)
public String listCustomer(ModelMap model) {

    PersistenceManager pm = PMF.get().getPersistenceManager();
    Query q = pm.newQuery(Customer.class);
    q.setOrdering("date desc");

    List<Customer> results = null;

    try {
        results = (List<Customer>) q.execute();

        if (results.isEmpty()) {
            model.addAttribute("customerList", null);
        } else {
            model.addAttribute("customerList", results);
        }

    } finally {
        q.closeAll();
        pm.close();
    }

    return "list";

} 
```

我的 mvc-dispatcher-servlet：

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="com.Trium.controller" />
<mvc:annotation-driven />

<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

以及我想在 command.jsp 中处理的表单：

```
<form id="myForm" class="form-horizontal" action="add"
                                    method="post">
                                    <fieldset>
                                        <div class="control-group">

                                            <!-- Text input-->
                                            <label class="control-label" for="input01">Email:</label>
                                            <div class="controls">
                                                <input name="email" placeholder="email"
                                                    class="input-xlarge" type="text"
                                                    value="<%=request.getParameter("email")%>">
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <!-- Text input-->
                                            <label class="control-label" for="input01">Password:</label>
                                            <div class="controls">
                                                <input name="password" placeholder="password"
                                                    class="input-xlarge" type="text"
                                                    value="<%=request.getParameter("password")%>">
                                            </div>
                                        </div>

                                    </fieldset>
                                </form> 
```

当我想从`http://127.0.0.1:8888/command.jsp`. 我得到：

`http://127.0.0.1:8888/add` **错误 404**

在 GAE 我得到：

> 警告：在名称为“mvc-dispatcher”的 DispatcherServlet 中未找到带有 URI [/add] 的 HTTP 请求的映射

请帮助我找出我的应用程序中错误映射的内容。

**更新**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee                http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- Servlets -->
    <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Default page to serve -->
    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>SystemServiceServlet</servlet-name>
        <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
        <init-param>
            <param-name>services</param-name>
            <param-value/>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>SystemServiceServlet</servlet-name>
        <url-pattern>/_ah/spi/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

**更新 - 2**

```
 Mär 26, 2013 4:59:11 PM com.google.appengine.tools.development.ApiProxyLocalImpl log
INFO: javax.servlet.ServletContext log: Initializing Spring root WebApplicationContext
Mär 26, 2013 4:59:11 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
Mär 26, 2013 4:59:17 PM org.springframework.web.context.support.XmlWebApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Tue Mar 26 16:59:17 UTC 2013]; root of context hierarchy
Mär 26, 2013 4:59:19 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]
Mär 26, 2013 4:59:21 PM org.springframework.context.annotation.ClassPathBeanDefinitionScanner registerDefaultFilters
INFO: JSR-330 'javax.inject.Named' annotation found and supported for component scanning
Mär 26, 2013 4:59:25 PM org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor <init>
INFO: JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
Mär 26, 2013 4:59:25 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7f5fde46: defining beans [customerController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/list],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.add(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/delete/{key}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.delete(java.lang.String,javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/update],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.update(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/add],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.Trium.controller.CustomerController.getAddCustomerPage(org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/update/{name}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.Trium.controller.CustomerController.getUpdateCustomerPage(java.lang.String,javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/list],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.Trium.controller.CustomerController.listCustomer(org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:27 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/login],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.login(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:30 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization completed in 18804 ms
Mär 26, 2013 4:59:37 PM com.google.appengine.tools.development.ApiProxyLocalImpl log
INFO: javax.servlet.ServletContext log: Initializing Spring FrameworkServlet 'mvc-dispatcher'
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.DispatcherServlet initServletBean
INFO: FrameworkServlet 'mvc-dispatcher': initialization started
Mär 26, 2013 4:59:37 PM org.springframework.web.context.support.XmlWebApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'mvc-dispatcher-servlet': startup date [Tue Mar 26 16:59:37 UTC 2013]; parent: Root WebApplicationContext
Mär 26, 2013 4:59:37 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/mvc-dispatcher-servlet.xml]
Mär 26, 2013 4:59:37 PM org.springframework.context.annotation.ClassPathBeanDefinitionScanner registerDefaultFilters
INFO: JSR-330 'javax.inject.Named' annotation found and supported for component scanning
Mär 26, 2013 4:59:37 PM org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor <init>
INFO: JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
Mär 26, 2013 4:59:37 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@3c050a95: defining beans [customerController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,mvcContentNegotiationManager,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,org.springframework.web.servlet.view.InternalResourceViewResolver#0,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@7f5fde46
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/list],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.add(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/delete/{key}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.delete(java.lang.String,javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/update],methods=[POST],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.update(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/add],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.Trium.controller.CustomerController.getAddCustomerPage(org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/update/{name}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.Trium.controller.CustomerController.getUpdateCustomerPage(java.lang.String,javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/list],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.String com.Trium.controller.CustomerController.listCustomer(org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:37 PM org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping registerHandlerMethod
INFO: Mapped "{[/login],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public org.springframework.web.servlet.ModelAndView com.Trium.controller.CustomerController.login(javax.servlet.http.HttpServletRequest,org.springframework.ui.ModelMap)
Mär 26, 2013 4:59:38 PM org.springframework.web.servlet.DispatcherServlet initServletBean
INFO: FrameworkServlet 'mvc-dispatcher': initialization completed in 657 ms
Mär 26, 2013 4:59:38 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Started SelectChannelConnector@0.0.0.0:8888
Mär 26, 2013 4:59:38 PM com.google.appengine.tools.development.AbstractServer startup
INFO: Server default is running at http://localhost:8888/
Mär 26, 2013 4:59:38 PM com.google.appengine.tools.development.AbstractServer startup
INFO: The admin console is running at http://localhost:8888/_ah/admin
Mär 26, 2013 5:59:38 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: Dev App Server is now running
Mär 26, 2013 6:00:11 PM org.springframework.web.servlet.PageNotFound handleHttpRequestMethodNotSupported
WARNING: Request method 'POST' not supported 
```

现在我得到了一个不同的例外。但是，我和以前没有任何改变；P

```
**WARNING: Request method 'POST' not supported** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:41:50.643

当您在 IDE 中启动 AppEngine 应用程序时，您还可以添加服务器日志吗？Spring 在启动时记录所有 URL 映射。

同样在您的上下文：组件扫描配置中，您的基本包中有一个大写字符？

```
com.Trium.controller 
```

我想在这里猜测，因为我不知道 CustomerController 的包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T19:46:11.387

你有这个：

```
@RequestMapping(value = "/add", method = RequestMethod.GET)
public String getAddCustomerPage(ModelMap model) {
   return "command";
} 
```

处理`GET`请求。但是你的 command.jsp 表单做了`POST`一个`add`

```
<form id="myForm" class="form-horizontal" action="add" method="post"> 
```

因此，您需要另一个处理程序方法来处理该操作。在我看来，您已经在其他处理程序方法中拥有它

```
@RequestMapping(value = "/list", method = RequestMethod.POST)
public ModelAndView add(HttpServletRequest request, ModelMap model) {

    String email = request.getParameter("email");
    String password = request.getParameter("password");

    Customer c = new Customer();
    c.setEmail(email);
    c.setPassword(password);
    c.setDate(new Date());

    PersistenceManager pm = PMF.get().getPersistenceManager();
    try {
        pm.makePersistent(c);
    } finally {
        pm.close();
    }

    return new ModelAndView("redirect:command");

} 
```

将您的表格更改`POST`为`/list`

```
<form id="myForm" class="form-horizontal" action="list" method="post"> 
```

另外，你不应该这样做`redirect:command`。`localhost:8888/command`这基本上提出了一个不存在的新请求。这样做`redirect:add`将调用上面的处理程序方法并渲染`command.jsp`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T19:05:16.460

我觉得实际调用 localhost 时您没有返回登录页面。您需要添加以下控制器映射来加载主页。

```
@RequestMapping(value = "/", method = RequestMethod.GET)
public String indexPage(ModelMap map) {
   return "login";
} 
```

现在访问您的 localhost:8888 作为您的登录页面。

尝试返回页面名称而不是返回 URL。

```
@RequestMapping(value = "/add", method = RequestMethod.GET)
public String getAddCustomerPage(ModelMap model) {
  return "command";
} 
```

# mysql - 通过本地文件将信息插入 MySQL 的问题

> ID：15642208
> 
> 赞同：0
> 
> 时间：2013-03-26T16:22:18.857
> 
> 标签：mysql

请耐心等待，因为这将是一封很长的邮件。作为作业的一部分，我正在使用 MYSQL 5.6.10 构建一个 TAC（手机）数据库。我使用以下 SQL 命令创建了一个名为 TACTest 的表：

```
CREATE TABLE TACTest (TAC VARCHAR(8), Make VARCHAR(384), Manufacturer VARCHAR(128), Band VARCHAR(384); 
```

我正在通过一个名为 test.txt 的文件填充此表，该文件存储在我的 C: 驱动器上。这是该文件的内容（6 种不同的手机）：

```
TAC|Marketing Name|Manufacturer|Band
00100100|G410|Mitsubishi|GSM 1800,GSM 900
00440227|This is a Test IMEI|(AEB) Armando Este Banquito|GSM 1800,GSM 900
01283200|Bunting Camera – WX292|Jaguariuna - Brazil|GSM 1900,GSM850 (GSM800)
01237100|WX295 – EU (850/1900)|Motorola|GSM 1900,GSM850 (GSM800)
35599803|Nüvifone A50|ASUSTek Computer Inc|GSM 1800,GSM 1900,GSM 900,GSM850 (GSM800)
01273300|"T410/T410i, T410s/T410si,T510/W510/T510i, X201/X201s, X201i/X201si, X201 Tablet, X201i Tablet, X100e, Edge 13"",  Edge 14"", Edge 15"" , L512, L412 , Edge 13”, Edge 11”, X120e"|Lenovo Mobile Communication Technology Ltd|GSM 1800,GSM 1900,GSM 900,GSM850 (GSM800) 
```

这是我用来填充表的 SQL：

```
LOAD DATA LOCAL INFILE 'C:\\test.txt' INTO TABLE TACTest CHARACTER SET utf8 fields terminated by '|' lines terminated by '\n' IGNORE 1 LINES (TAC, Make, Manufacturer, Band); 
```

问题是，Make 和 Manufacturer 列在插入后数据库中缺少数据。这是数据库中“制造商”和“制造商”列的信息：

```
Make    Manufacturer
G410    Mitsubishi
This is a Test IMEI (AEB)
Bunting Camera  Jaguariuna - Brazil
WX295   Motorola
N   ASUSTek Computer Inc
"T410/T410i, T410s/T410si,T510/W510/T510i, X201/X201s, X201i/X201si, X201 Tablet, X201i Tablet, X100e, Edge 13"",  Edge 14"", Edge 15"" , L512, L412 , Edge 13  Lenovo Mobile Communication Technology Ltd 
```

基本上对于制造商列，第 2 行有部分信息，对于制造列，第 3-6 行有部分信息？

我在这里做错了什么？插入特殊字符是否需要做一些特别的事情？任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:28:35.160

我刚刚运行了您提供的查询，并且得到了正确的数据。我相信唯一的区别在于我们的操作系统（我的机器在 ubuntu 上运行）

```
mysql> show create table TACTest \G
*************************** 1\. row ***************************
       Table: TACTest
Create Table: CREATE TABLE `TACTest` (
  `TAC` varchar(8) DEFAULT NULL,
  `Make` varchar(384) DEFAULT NULL,
  `Manufacturer` varchar(128) DEFAULT NULL,
  `Band` varchar(384) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> select * from TACTest \G
*************************** 1\. row ***************************
         TAC: 00100100
        Make: G410
Manufacturer: Mitsubishi
        Band: GSM 1800,GSM 900
*************************** 2\. row ***************************
         TAC: 00440227
        Make: This is a Test IMEI
Manufacturer: (AEB) Armando Este Banquito
        Band: GSM 1800,GSM 900
*************************** 3\. row ***************************
         TAC: 01283200
        Make: Bunting Camera � WX292
Manufacturer: Jaguariuna - Brazil
        Band: GSM 1900,GSM850 (GSM800)
*************************** 4\. row ***************************
         TAC: 01237100
        Make: WX295 � EU (850/1900)
Manufacturer: Motorola
        Band: GSM 1900,GSM850 (GSM800)
*************************** 5\. row ***************************
         TAC: 35599803
        Make: N�vifone A50
Manufacturer: ASUSTek Computer Inc
        Band: GSM 1800,GSM 1900,GSM 900,GSM850 (GSM800)
*************************** 6\. row ***************************
         TAC: 01273300
        Make: "T410/T410i, T410s/T410si,T510/W510/T510i, X201/X201s, X201i/X201si, X201 Tablet, X201i Tablet, X100e, Edge 13"",  Edge 14"", Edge 15"" , L512, L412 , Edge 13�, Edge 11�, X120e"
Manufacturer: Lenovo Mobile Communication Technology Ltd
        Band: GSM 1800,GSM 1900,GSM 900,GSM850 (GSM800)
6 rows in set (0.00 sec) 
```

# ms-access - Ms access 总是要求一个值

> ID：15642209
> 
> 赞同：1
> 
> 时间：2013-03-26T16:22:19.343
> 
> 标签：ms-access

给出并计算了值，并且在此表达式之前有 Qout 和 PctWaste

```
Expr4: Round([Qout]*[PctWaste]/100,2) 
```

我仍然收到错误，我正在使用 access 2010。有什么帮助吗？

Qout : Expr2: [StockDataBank]![Qty]*[Forms]![WipFinMaster]![WipFinDetail1].[Form]![Total]

PctWaste : Expr3: GetPctWaste([RCode])

它促进了 Qout 和 PctWaste，而它的值已经计算出来了。

表 StockDatabank : FSCode, RCode, Qty

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:27:15.620

根据您提供的详细信息，听起来您正试图在另一列中重用列别名。

您不能这样做，您需要重用表达式或将列放在子查询中。

子查询：

```
select Round([Qout]*[PctWaste]/100,2)
from 
(
  select [StockDataBank]![Qty]*[Forms]![WipFinMaster]![WipFinDetail1].[Form]![Total] as Qout,
    GetPctWaste([RCode]) as PctWaste
  from yourtable
) src 
```

重用表达式：

```
select [StockDataBank]![Qty]*[Forms]![WipFinMaster]![WipFinDetail1].[Form]![Total] as Qout,
    GetPctWaste([RCode]) as PctWaste,
    Round([StockDataBank]![Qty]*[Forms]![WipFinMaster]![WipFinDetail1].[Form]![Total]*GetPctWaste([RCode])/100,2)
from yourtable 
```

# c# - C#传递匿名参数？

> ID：15642210
> 
> 赞同：3
> 
> 时间：2013-03-26T16:22:19.323
> 
> 标签：c#

抱歉标题，我找不到正确的。我有不止一种方法可以返回相同的结果。

返回类型

```
public class JsonTreeView
{
    public int id { get; set; }
    public string text { get; set; }
    public string state { get; set; }
    public string @checked { get; set; }
    public string attributes { get; set; }
    public List<JsonTreeView> children { get; set; }
} 
```

第一种方法

```
List<JsonTreeView> FromReportTree(List<ReportTree> list)
{
} 
```

第二种方法

```
List<JsonTreeView> FromLocationTree(List<LocationTree> list)
{
} 
```

和其他......树模型的属性是不同的。例如 ：

```
LocationTree (id, name, parent, text)
ReportTree (sno, name, parent, desc) 
```

是否可以为所有这些树模型编写一种方法？有什么建议或起点吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:29:28.253

我建议您创建一个执行 grunt 工作的私有方法，并为不同类型保留重载方法。从其他方法调用私有方法，并使用从该方法`JsonTreeView`的特定对象创建对象的函数：

```
private List<JsonTreeView> FromReportTree<T>(List<T> list, Func<T, JsonTreeView> convert) {
  // loop through the list and call convert to create items
  List<JsonTreeView> result = new List<JsonTreeView>();
  foreach (T item in list) {
    result.Add(convert(item));
  }
  return result;
}

List<JsonTreeView> FromReportTree(List<ReportTree> list) {
  return FromReportTree(list, t => new JsonTreeView(t.id, t.text, ... ));
}

List<JsonTreeView> FromReportTree(List<LocationTree> list) {
  return FromReportTree(list, t => new JsonTreeView(t.sno, t.desc, ... ));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:31:16.670

这取决于这些方法中发生的情况。您说各种 Tree 模型具有不同的属性；方法中的逻辑是否需要任何非通用属性？如果每个方法中的逻辑相同，则可以这样做：

```
List<JsonTreeView> FromReportTree<T>(List<T> list) where T : BaseTree
{
    //some logic
} 
```

假设您有某种`BaseTree`模型，否则`T : class`或者只是将其关闭（不推荐）。

如果逻辑不同，您仍然可以通过检查`if (list is LocationTree)`并使用它来执行特定于的逻辑来执行此操作`LocationTree`，但这可能会变得混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:32:44.610

If you make all your Trees to implement an interface, you can.

```
interface iMyTree
{
    int MyTreeID {get; set;}
    string MyTreePame {get; set;}
    object MyTreeParent {get; set;}
    string MyTreeText  {get; set;}
}

class AnyTree : iMyTree
{
     //any properties

     //implements iMyTree
} 
```

And that method:

```
List<JsonTreeView> FromMyTree(List<iMyTree> list)
{
    //all trees that implement iMyTree will have the same methods, any kind of tree implementing iMyTree can be used.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:30:25.683

你的问题有点混乱，但我想我明白了。您需要一个 FromReportTree 函数。

为此，您很可能希望 ReportTree 和 LocationTree 有一个共同的基类。喜欢：

```
public abstract class ReportLocationTree {
    public int id { get; set; }
}

public class ReportTree : ReportLocationTree {
    public string moreStuff { get; set; }
}

public class LocationTree : ReportLocationTree {
    public string evenMoreStuff { get; set; }
}

List<JsonTreeView> FromReportTree(List<ReportLocationTree> list)
{
    list.Select(t => new JsonTreeView { id = t.id }).ToList();
} 
```

我不确定你是如何进行 serailizing 的，所以我没有将它包含在我的代码中，但是仅仅因为它们被 serailized 就在你的属性上遵循不同的命名约定是一种不好的形式。

JSON.Net 让你很容易：http://james.newtonking.com/projects/json/help/index.html?topic=html/ [SerializationAttributes.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializationAttributes.htm)

# c# - 在 Windows 8 应用程序中从 Goodreads 获取访问令牌

> ID：15642216
> 
> 赞同：1
> 
> 时间：2013-03-26T16:22:31.170
> 
> 标签：c#, windows-8, oauth-2.0, winrt-async

我正在为 goodreads ( [http://www.goodreads.com](http://www.goodreads.com) ) 开发一个 Windows 8 应用程序。我正在关注[http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122/view/Discussions](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122/view/Discussions)上的 Web 身份验证代理示例。我成功地获得了 oauth 令牌和 oauth 令牌秘密。

但我无法将其发回并从 goodreads 获取访问令牌。我正在尝试使用获取的 oauth 令牌和令牌 sectret 发送构造的 URL，如下面的代码中所述。我正在尝试使用我使用 OAuth 从 Goodreads API 收到的**oauth 令牌获取****访问令牌。**

 **在给定的代码中，“GetResponse2”变量始终从异步数据发送方法设置为 null。我认为这是因为 URL 的构造，但我无法弄清楚它在 URL 中哪里出错了。希望可以有人帮帮我。

```
 if (oauth_token != null)                                       
 {

            GoodreadsUrl = "https://www.goodreads.com/oauth/authorize?oauth_token=" + oauth_token;
            System.Uri StartUri = new Uri(GoodreadsUrl);
            System.Uri EndUri = new Uri(GoodreadsCallbackUrl);

            WebAuthenticationResult WebAuthenticationResult =
                await WebAuthenticationBroker.AuthenticateAsync(
                    WebAuthenticationOptions.None,
                    StartUri,EndUri);

            var response = WebAuthenticationResult.ResponseData;

            if (WebAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success)
            {
                TimeSpan SinceEpoch2 = DateTime.UtcNow - new DateTime(1970, 1, 1);
                Random Rand2 = new Random();
                GoodreadsUrl = "http://www.goodreads.com/oauth/access_token";
                Int32 Nonce2 = Rand2.Next(1000000000);
                //
                // Compute base signature string and sign it.
                //    This is a common operation that is required for all requests even after the token is obtained.
                //    Parameters need to be sorted in alphabetical order
                //    Keys and values should be URL Encoded.
                //
                String SigBaseStringParams2 = "oauth_callback=" + Uri.EscapeDataString(GoodreadsCallbackUrl);
                SigBaseStringParams2 += "&" + "oauth_consumer_key=" + GoodreadsClientId;
                SigBaseStringParams2 += "&" + "oauth_token=" + oauth_token;
                SigBaseStringParams2 += "&" + "oauth_verifier=" + oauth_token_secret;
                SigBaseStringParams2 += "&" + "oauth_nonce=" + Nonce2.ToString();
                SigBaseStringParams2 += "&" + "oauth_signature_method=HMAC-SHA1";
                SigBaseStringParams2 += "&" + "oauth_timestamp=" + Math.Round(SinceEpoch2.TotalSeconds);
                SigBaseStringParams2 += "&" + "oauth_version=1.0";
                String SigBaseString2 = "GET&";
                SigBaseString2 += Uri.EscapeDataString(GoodreadsUrl) + "&" + Uri.EscapeDataString(SigBaseStringParams2);

                IBuffer KeyMaterial2 = CryptographicBuffer.ConvertStringToBinary(GoodreadsClientSecret + "&", BinaryStringEncoding.Utf8);
                MacAlgorithmProvider HmacSha1Provider2 = MacAlgorithmProvider.OpenAlgorithm("HMAC_SHA1");
                CryptographicKey MacKey2 = HmacSha1Provider2.CreateKey(KeyMaterial2);
                IBuffer DataToBeSigned2 = CryptographicBuffer.ConvertStringToBinary(SigBaseString2, BinaryStringEncoding.Utf8);
                IBuffer SignatureBuffer2 = CryptographicEngine.Sign(MacKey2, DataToBeSigned2);
                String Signature2 = CryptographicBuffer.EncodeToBase64String(SignatureBuffer2);
                String DataToPost2 = "OAuth oauth_callback=\"" + Uri.EscapeDataString(GoodreadsCallbackUrl) + "\", oauth_consumer_key=\"" + GoodreadsClientId + "\", oauth_nonce=\"" + Nonce2.ToString() + "\", oauth_signature_method=\"HMAC-SHA1\", oauth_timestamp=\"" + Math.Round(SinceEpoch2.TotalSeconds) + "\", oauth_version=\"1.0\", oauth_signature=\"" + Uri.EscapeDataString(Signature2) + "\"";

                GoodreadsUrl += "?" + SigBaseStringParams2 + "&oauth_signature=" + Uri.EscapeDataString(Signature2);

                String GetResponse2 = await SendDataAsync(GoodreadsUrl);
                // DebugPrint("Received Data: " + GetResponse);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:55:52.707

`DataToPost2`您的问题与您从未对变量执行任何操作的事实有关。我假设它包含一些需要发布的重要数据，对吗？

```
String DataToPost2 = "...";
GoodreadsUrl += "...";

// Why construct DataToPost2 if not using it?? 
String GetResponse2 = await SendDataAsync(GoodreadsUrl); 
```**

# java - JDBC 事务与连接说明

> ID：15642218
> 
> 赞同：12
> 
> 时间：2013-03-26T16:22:41.560
> 
> 标签：java, sql, multithreading, postgresql, transactions

我正在使用 JDBC 与我的 Postgres 数据库通信。如果我的整个应用程序只运行一个连接，即只有一个调用；

```
DriverManager.getConnection("jdbc:postgresql://host:5432/database", user, pass); 
```

但是这个`Connection`对象在 Java 中的多个线程之间共享，我是否正确地假设任何使用 SQL 事务（`BEGIN`和`COMMIT`样式）的尝试只会非常混乱和破坏，因为 Java 线程有可能交错？对象是否`Connection`“知道”哪个 Java 线程正在使用它进行查询？

我应该`Connection`每个 Java 线程有一个对象并以这种方式使用 SQL 事务吗？或者我应该使用 Java 在 Java 中执行所有事务隔离`synchronized`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T23:58:23.333

只是为了详细说明现有的答案：

[PgJDBC 的`Connection`对象是线程安全的](http://jdbc.postgresql.org/documentation/91/thread.html)，但仅限于语句级别。在自动提交模式下被多个线程使用时，它不会崩溃或产生错误的结果，但它不会为您隔离不同线程的事务。根据文档，您需要为此使用连接池。

实际上有很多方法可以在多个线程之间使用连接：

*   使用内部连接池，您可以从中获取连接、处理它们并将它们返回到池中。对于大多数应用程序来说，这是非常可取的选择。Java 存在许多 JDBC 连接池实现，因此不要自行开发。[dbcp](http://commons.apache.org/proper/commons-dbcp/)和[c3p0](http://sourceforge.net/projects/c3p0/)是两种流行的实现，但如果您使用的是 servlet 环境或应用服务器，您通常应该使用服务器的连接池，而不是自带连接池。

*   使用 pgbouncer 或 pgpool-II 之类的外部连接池并自由打开/关闭与它的连接。这会稍微慢一些，并且主要是在应用程序不能或由于各种原因不应该在内部池连接时使用的选项。除非您需要限制与数据库的总连接数并在多个应用程序或应用程序实例之间共享它们，否则您可能不需要这样做。

*   不使用池并自由打开/关闭连接。这是非常低效的。不要这样做。

*   使用线程本地存储保持每个线程的连接。这会起作用，但效率极低，因为每个打开的连接都会在空闲时占用数据库服务器资源。除非你在事务池模式下使用像 PgBouncer 这样的外部连接池，否则不要这样做，在这种情况下是可以的。

*   仅使用单个连接并将事务包装在块中，在实例`synchronized`上同步。`Connection`这将起作用并且将有效地使用数据库连接，但会限制线程的性能。除了玩具/便利应用程序之外，它通常不是一个好的设计。

*   仅使用具有自己专用线程的单个连接。让其他连接通过 FIFO 队列、生产者/消费者样式将描述要完成的工作的数据结构传递给该线程。如果线程将大部分时间花在 CPU 密集型或其他非数据库工作上，并且只需要有限的数据库访问，则此方法有效。几乎使用它而不是使用连接池的唯一原因是，如果您由于某些外部原因而被限制使用单个连接，但如果您是这样，那么它可能是一个不错的选择。

但是，通常，您应该只使用连接池并完成它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:25:14.640

> 考虑到 Java 线程交错的可能性，我是否正确地假设任何使用 SQL 事务（`BEGIN`和`COMMIT`样式）的尝试只会变得非常混乱和破坏？

这是完全正确的。

> Connection 对象是否“知道”哪个 Java 线程正在使用它进行查询？

不，不是的。

> 我应该每个 Java 线程有一个 Connection 对象并以这种方式使用 SQL 事务吗？

是的，这是一种方法。“每个线程的连接”分配的缺点是可能会打开比您需要的更多的连接，从而导致资源的次优使用。您还可以仅在线程需要时打开连接，并在线程完成 RDBMS 访问后关闭它。如果你走这条路，请确保使用连接池来减少多次重新打开连接的开销。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T16:35:19.870

```
Does the Connection object 'know' which Java thread is using it to make queries? 
```

不，连接对象不知道哪个 java 线程正在使用它。

我应该每个 Java 线程有一个 Connection 对象并以这种方式使用 SQL 事务吗？或者我应该使用同步在 Java 中执行所有事务隔离？

我们应该使用数据库特定的 jdbc 连接池数据源来做事务，这样当一个连接对象没有用时，连接会回到池中而不被垃圾收集。这样，应用服务器可以优化它的连接初始化性能。

此外，您应该在更新操作期间使用同步方法调用，因为这将使生产中的操作更加安全。

# android - 在 AutoCompleteTextView 中，有没有办法使用选择建议的行为作为按“输入”提交建议的方式

> ID：15642225
> 
> 赞同：0
> 
> 时间：2013-03-26T16:23:01.343
> 
> 标签：android, autocompletetextview

我有一个 AutoCompleteTextView，当您在 TextView 中键入内容时，它会给出一个建议列表。但是，当您选择建议时，您仍然必须按 Enter 键，不仅要从屏幕上移除键盘，还要提交您选择的建议。我正在尝试删除按 Enter 的这个额外步骤，因为用户没有在我的应用程序中建立连接，他们在 TextView 中选择建议后必须按 Enter 键。有什么建议/帮助吗？

这是我得到的建议，但似乎没有用。

```
element_image = (ImageView) findViewById(R.id.element_bullet);
    //Get the string array of the radionuclide names that will auto complete.
    radionuclideNames = getResources().getStringArray(R.array.radionuclide_names);
    //Get a reference to the AutoCompleteTextView in the layout.
    radionuclideTextView = (AutoCompleteTextView) findViewById(R.id.radionuclide_autocomplete);
    //Create the adapter and set it to the AutoCompleteTextView.
    ArrayAdapter<String> adapter = 
            new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, radionuclideNames);
    //Apply the adapter to the AutoCompleteTextView.
    radionuclideTextView.setAdapter(adapter);
    //Listen for when enter is pressed.
    radionuclideTextView.setOnItemSelectedListener(new OnItemSelectedListener() { 
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) { 
            switch(parent.getId())
            {
            case R.id.radionuclide_autocomplete:
                element_image.setImageResource(R.drawable.selectedbulletstate);
                break;
            }
        } 
        public void onNothingSelected(AdapterView<?> parent) { 
          //TODO:
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:02:19.763

尝试这样的事情：

```
auto.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(auto.getWindowToken(), 0);
        }
    }); 
```

> ...但提交您选择的建议

当您选择其中一个选项时，下拉菜单应自动关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:29:32.737

当然你有这样的东西，使用

```
autoCompleteTextView.setOnItemSelectedListener(new OnItemSelectedListener() { 
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) { 
          //TODO:
        } 
        public void onNothingSelected(AdapterView<?> parent) { 
          //TODO:
        }
    }); 
```

# java - 如何获取基于 html 的 pdf 文件表示

> ID：15642233
> 
> 赞同：0
> 
> 时间：2013-03-26T16:23:23.783
> 
> 标签：java, pdf, structure, extract, converter

我搜索了很多，没有找到适合我需要的工具。

我得到 pdf 文件并想在网页上显示其内容。

pdf 内容的表示应该是 html，因为我还想突出显示特定的单词，并希望能够包含 pdf 的内容，而无需某种处理渲染的 flash 或 javascript 插件。

充其量是一个java库。商业或免费使用并不重要。开放更好，免费就好。

**jPedal、PDFBox、iText**等可用的 pdf 工具不够好用

JPedal 做得很好，除了 linux 系统上的字体问题。该库尝试完全像原始页面一样呈现 html 页面。但这对我来说并不重要。我需要具有原始大小的段落分组和标题。没有关系是段落有更高的高度。

PdfBox 要么只重新生成一个包含 while 内容的字符串，要么为页面上的每一行创建 html <p> 标签列表。

我也知道阅读 pdf 的内容是一项艰巨的任务，但真的没有人可以使用吗？

请告诉我已经有解决方案。

更新：

我还需要获取文档的 html 表示形式，以便在服务器上进一步操作它。

每个页面看起来都像原始页面并不是很重要。段落的高度可以变化，页眉和页脚也不重要。但这会很好。

我会在几天内测试 PDFNet，谢谢你的提示

# java - 在 java 路径上找不到 Tomcat 本机库

> ID：15642234
> 
> 赞同：0
> 
> 时间：2013-03-26T16:23:26.250
> 
> 标签：java, maven, tomcat

这是我运行时的堆栈跟踪`tomcat`。`Java and Maven`存在。

现在，我检查了我的文件夹，并且有一个`tools.jar`文件路径`C:\Java\jdk1.6.0_34\lib`

我错过了什么？

我目前正在使用**Tomcat v6.0、jre7**并安装了**jdk1.6.0_34**

**堆栈跟踪**

> 在 java.library.path：C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C: 上找不到基于 APR 的 Apache Tomcat Native 库，它允许在生产环境中获得最佳性能\Windows\system32;C:\Windows;C:\Program Files (x86)\Intel\iCLS 客户端\;C:\Program Files\Intel\iCLS 客户端\;C:\Windows\system32;C:\Windows;C :\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86) \Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C: \Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\CA\SharedComponents\扫描引擎；C：\Program Files\CA\SharedComponents\CAUpdate\;C:\Program Files\CA\SharedComponents\ThirdParty\;C:\Program Files\CA\SharedComponents\SubscriptionLicense\;C:\Program Files\CA\eTrustITM;c:\ Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\TortoiseSVN\bin;C:\Java\jdk1.6.0_34\ bin;C:\Java\jdk1.6.0_34\bin;C:\maven\bin;C:\maven\bin;C:\Program Files\Perforce;。\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\ DTS\Binn\;C:\Program Files\TortoiseSVN\bin;C:\Java\jdk1.6.0_34\bin;C:\Java\jdk1.6.0_34\bin;C:\maven\bin;C:\maven \bin;C:\Program Files\Perforce;。\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\ DTS\Binn\;C:\Program Files\TortoiseSVN\bin;C:\Java\jdk1.6.0_34\bin;C:\Java\jdk1.6.0_34\bin;C:\maven\bin;C:\maven \bin;C:\Program Files\Perforce;。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:27:17.473

你没有错过任何东西[。APR tc native](http://tomcat.apache.org/native-doc/)仅用于更好地执行 IO，而不是强制性的。

# r - 如何从github加载

> ID：15642235
> 
> 赞同：0
> 
> 时间：2013-03-26T16:23:28.063
> 
> 标签：r

我正在关注本教程： [http ://systematicinvestor.wordpress.com/2012/01/29/multiple-factor-model-fundamental-data/](http://systematicinvestor.wordpress.com/2012/01/29/multiple-factor-model-fundamental-data/)

当我运行第一个脚本时，我得到了许多错误，例如

url 错误（“ [http://www.systematicportfolio.com/sit.gz”，“rb](http://www.systematicportfolio.com/sit.gz) ”）：无法打开连接

任何人都可以提供有关如何使用它的指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:33:48.677

In the first few lines of the code, you see the following:

```
###############################################################################
# Load Systematic Investor Toolbox (SIT)
# http://systematicinvestor.wordpress.com/systematic-investor-toolbox/
############################################################################### 
```

Follow that URL, and you will find alternative methods to load the "SIT". For me (as suggested by @RicardoSaporta) the one that popped out as most likely to work in a general manner (because of https, binary files, and so on) was the `RCurl` method. (Be sure you have RCurl installed first!)

```
###############################################################################
# Load Systematic Investor Toolbox (SIT): Requires RCurl package
############################################################################### 
require(RCurl)
sit = getURLContent('https://github.com/systematicinvestor/SIT/raw/master/sit.gz', binary=TRUE, followlocation = TRUE, ssl.verifypeer = FALSE)
    con = gzcon(rawConnection(sit, 'rb'))
    source(con)
close(con) 
```

Use that for the first few lines and you should be able to process the rest of the code.

* * *

Alternatively, manually download the file from [https://github.com/systematicinvestor/SIT/raw/master/sit.gz](https://github.com/systematicinvestor/SIT/raw/master/sit.gz) and load it with:

```
con = gzcon(file('path/to/sit.gz', 'rb')) ## Replace with actual path
    source(con)
close(con) 
```

and proceed from there.

* * *

Beyond that, the blog post you linked to doesn't mention a critical piece of information: what packages you need to have installed and loaded. You need to install and load "xts" and "quantmod" before running the rest of the script.

```
install.packages("xts")
install.packages("quantmod")
library(xts)
library(quantmod) 
```

# ruby-on-rails - 从 imdb-party 看不到图像

> ID：15642239
> 
> 赞同：1
> 
> 时间：2013-03-26T16:23:34.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, imdb

```
<%= image_tag(movie_info.poster_url, :class => 'img-polaroid') %> 
```

HTML 输出：

```
<img alt="Mv5bmje1odcyodyxml5bml5banbnxkftztcwnja1nde3mq@@._v1_" class="img-polaroid" src="http://ia.media-imdb.com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1_.jpg"> 
```

哪个不显示图像，imdb 是否阻止外部访问其图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:16:41.297

```
<% agent = Mechanize.new %>
<% link = movie_info.poster_url %>
<% agent.get(link).save "#{movie["imdb_id"].to_s}.jpg" %> 
```

绕过 imdb 限制的修复，下载 mechanize 并将图像存储在本地

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:35:02.297

当我将您的图像源值粘贴到我的浏览器栏中时，图像显示正常。尝试检查“img-polaroid”类的 css 属性，也许它会改变可见性。否则html很好。并且 rails view helper 也做得很好。

# c++ - 为什么 Matlab 给出的值与 C++ 不同

> ID：15642240
> 
> 赞同：0
> 
> 时间：2013-03-26T16:23:41.113
> 
> 标签：c++, matlab, floating-point, precision

我正在用 C++ 创建一个用于计算机视觉的大型程序，出于调试目的，我使用 Matlab。经过一段时间的斗争，我意识到使用 Matlab 和 c++（Visual Studio 9 编译器 BTW）时，一些简单的算术方程的答案是不同的。这是为什么？

这是算术运算：

**Matlab**函数：

```
function [x,y]=shape_fun(p,shape,Ax,Ay)

x=p(1)+Ax+shape(1)+Ax.*shape(3)+Ay.*shape(4)+Ax.*Ax.*shape(5)/2+Ay.*Ay.*shape(6)/2+Ax.*Ay.*shape(7);
y=p(2)+Ay+shape(2)+Ax.*shape(8)+Ay.*shape(9)+Ax.*Ax.*shape(10)/2+Ay.*Ay.*shape(11)/2+Ax.*Ay.*shape(12);

end 
```

**C++**函数

```
cv::Point2d deformed(const double shape_fun[12],const cv::Point2d p,const double Ax,const double Ay){
    cv::Point2d result;

    result.x=(p.x+Ax)+shape_fun[0]+shape_fun[2]*Ax+shape_fun[3]*Ay+shape_fun[4]*Ax*Ax/2*shape_fun[5]*Ay*Ay/2+shape_fun[6]*Ax*Ay;
    result.y=(p.y+Ay)+shape_fun[1]+shape_fun[7]*Ax+shape_fun[8]*Ay+shape_fun[9]*Ax*Ax/2*shape_fun[10]*Ay*Ay/2+shape_fun[11]*Ax*Ay;
    return result;

} 
```

**数据：**

注意：Matlab 值是从调试器 c++ 值复制粘贴的，它们完全相同。

```
Ax=-12
Ay=-12
p=[468,683];
shape=[
     63.178114688537441
     36.536135487588474

    -0.038695673779030673
    -0.045313362559036965

     0.016469896824803026
     0.0017122284868442948
    -0.0030285669997117204

    -0.067902655024060773
     0.17995980761526389

     0.012716871878336870
    -0.036890386929202310
    -0.00081243692842574420
]; 
```

结果：

**MATLAB**：

```
x =
     3.947029931219995e+02
y =
     7.043339656551383e+02 
```

**C++：**

```
result  {x=393.54007007383439 y=703.64248713855773 }    cv::Point_<double> 
```

*注意：*我不是`OpenCV`故意标记这个问题。虽然显然我`OpenCV`在 C++ 中使用，但`cv::Point2d`它只是一个带有两个`double`变量 x 和 y 的结构，我认为这个问题根本不是关于这个问题的`OpenCV`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T16:28:47.390

```
result.x=
    (p.x+Ax)+
    shape_fun[0]+
    shape_fun[2]*Ax+
    shape_fun[3]*Ay+
    shape_fun[4]*Ax*Ax/2*
    shape_fun[5]*Ay*Ay/2+
    shape_fun[6]*Ax*Ay;
result.y=
    (p.y+Ay)+
    shape_fun[1]+
    shape_fun[7]*Ax+
    shape_fun[8]*Ay+
    shape_fun[9]*Ax*Ax/2*
    shape_fun[10]*Ay*Ay/2+
    shape_fun[11]*Ax*Ay; 
```

应该是（大概）

```
result.x=
    (p.x+Ax)+
    shape_fun[0]+
    shape_fun[2]*Ax+
    shape_fun[3]*Ay+
    shape_fun[4]*Ax*Ax/2+ /** change here **/
    shape_fun[5]*Ay*Ay/2+
    shape_fun[6]*Ax*Ay;
result.y=
    (p.y+Ay)+
    shape_fun[1]+
    shape_fun[7]*Ax+
    shape_fun[8]*Ay+
    shape_fun[9]*Ax*Ax/2+ /** change here **/
    shape_fun[10]*Ay*Ay/2+
    shape_fun[11]*Ax*Ay; 
```

# c# - 按字母顺序排列网格项目

> ID：15642242
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:23:48.393
> 
> 标签：c#, wpf, layout

我有这个带有网格的 Stackpanel，并且在网格中有多个包含要显示的内容的按钮。这些项目是按字母顺序排列的，我已经手动完成了。例如，如果游戏的名称是“死囚牢房”，我将不得不浪费时间手动将每个项目向下移动一个，以便为新项目腾出空间。这里的问题是，有没有办法组织它，以便我可以在项目之间实现代码并且它会自动调整？代码的外观： [代码](http://speedcap.net/sharing/files/d6/08/d6085ccea914b816d14afa53ba025b11.png) [示例图像](http://speedcap.net/sharing/files/3a/53/3a53d132a94b4974b32171e0a7edfd9c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:15:23.370

不要使用 a`DataGrid`来布局动态内容，而是使用`ItemsControl`with`DataTemplates`并将您的数据存储在 a 中的集合中`ViewModel`，然后使用数据绑定来显示您的内容。这将允许您更改数据收集并适当地更新您的 UI。

例子：

一个简单的类来保存每个游戏的细节：

```
public class GameViewModel
{
    public string Name { get; set; }
    public string ImagePath { get; set; }
} 
```

您的主要视图模型：

```
public class SortedContentViewModel
{
    public ObservableCollection<GameViewModel> GameList { get; set; }

    public SortedContentViewModel()
    {
        GameList = new ObservableCollection<GameViewModel>()
        {
            new GameViewModel() {Name="Brink", ImagePath = @"Resources/brink.png" },
            new GameViewModel() {Name="Bulletstorm", ImagePath = @"Resources/bulletstorm.png" }
        };
    }
} 
```

和你的 XAML：

```
<UserControl x:Class="Wpf_Playground.Views.SortedContentView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:vm="clr-namespace:Wpf_Playground.ViewModels"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         DataContext="{DynamicResource ViewModel}">
<UserControl.Resources>
    <vm:SortedContentViewModel x:Key="ViewModel" />

    <DataTemplate DataType="{x:Type vm:GameViewModel}">
        <Button>
            <Grid>
                <Image Source="{Binding ImagePath}" Stretch="Fill" />
                <Border Background="#66000000" Height="30" VerticalAlignment="Bottom">
                    <TextBlock Text="{Binding Name}" Margin="10,-2,10,0" VerticalAlignment="Bottom" />
                </Border>
            </Grid>
        </Button>
    </DataTemplate>
</UserControl.Resources>
    <Grid>
        <ItemsControl ItemsSource="{Binding GameList}" >
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
    </ItemsControl>

    </Grid>
</UserControl> 
```

# java - Java 使用JBOSS时没有找到，虽然存在

> ID：15642253
> 
> 赞同：2
> 
> 时间：2013-03-26T16:24:13.910
> 
> 标签：java, ubuntu, jboss

为了让 JBOSS 为管理控制台添加用户并启动 jboss 服务器，我缺少什么？![在此处输入图像描述](../Images/b700245fe9e22035dc3154b0289bcd51.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T22:36:18.777

该脚本引用了 java 命令，因此它尝试使用`"/usr/local/java/jdk*/bin/java"`无效的。如果您取消设置`JAVA_HOME`或给它一个适当的目录，它将起作用。

# javascript - Socket.io 广播到房间在 socket.io v.0.9.13 中不起作用

> ID：15642254
> 
> 赞同：2
> 
> 时间：2013-03-26T16:24:14.010
> 
> 标签：javascript, node.js, socket.io

```
socket.broadcast.to(newroom).emit('updatechat', 'SERVER', socket.username+' has joined this room'); 
```

没有击中客户端。我只能看到来自以下的消息：

```
socket.emit('updateActivity', 'SERVER', 'you have CONNECTED to '+ socketEntity.roomName); 
```

我做错了`socket.join()`什么吗？

我还尝试给广播事件一个不同的名称而不是`updateActivity`，但它也不起作用。

日志输出中根本没有提到广播发射。

### 问题更新：

我找到了一个解决方案，如果我将 broadcast.to() 替换为以下代码段，它将起作用：

```
socket.get(socketEntity.roomId, function (error, room) {
   io.sockets.in(room).emit('updateActivity', 'SERVER', 'you -joined- this group '+ socketEntity.roomName);
}); 
```

但我不知道为什么会出现这种情况......所以不知何故`room`io.sockets.in() 上面`isn't`的参数与字符串相同`socketEntity.roomId`？

原始代码：

### 服务器：

```
io.sockets.on ('connection', function (socket){
    socket.on('joinRoom', function(socketEntity){
        socket.join(socketEntity.roomId);
        socket.emit('updateActivity', 'SERVER', 'you have CONNECTED to '+ socketEntity.roomName);
        socket.broadcast.to(socketEntity.roomId).emit('updateActivity', 'SERVER', 'you -joined- this room'+ socketEntity.roomName);
    });
}); 
```

### 客户：

HTML：

```
<ul id="activityList" class="dropdown-menu"></ul> 
```

JavaScript：

```
$(document).ready(function(){
    var socketEntity = {roomId:sampleRmId, roomName: "sample room"}
    socket.emit('joinRoom', socketEntity);

    socket.on('updateActivity', function (username, data){
        $('#activityList').prepend('<li><a href="#"><div>'+ data +'</div></a></li>');
    });
}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:12:14.793

`socket.broadcast`会将消息发送给除正在调用它的客户端之外的所有其他客户端。

`socket.emit`仅发送给该特定客户

`io.sockets.emit`发送给所有客户

# highcharts - 回到 V2 颜色的最佳方式

> ID：15642255
> 
> 赞同：0
> 
> 时间：2013-03-26T16:24:25.783
> 
> 标签：highcharts

我喜欢 HighCharts，但我真的不喜欢 V3 中的新配色方案。

回到 V2 配色方案的最佳方式是什么？

提前致谢！

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:20:29.457

[您不能只使用颜色选项](http://api.highcharts.com/highcharts#colors)指定它们吗？

```
$(function () {

    var OldColors = [
       '#4572A7', 
       '#AA4643', 
       '#89A54E', 
       '#80699B', 
       '#3D96AE', 
       '#DB843D', 
       '#92A8CD', 
       '#A47D7C', 
       '#B5CA92'
    ]

    $('#container').highcharts({
        chart: {
            type: 'column'
        },

        colors: OldColors,

        etc... 
```

[在这里](http://jsfiddle.net/mGFAg/50/)拉小提琴。

# windows - 复杂的可执行文件是如何编写的？

> ID：15642256
> 
> 赞同：0
> 
> 时间：2013-03-26T16:24:30.880
> 
> 标签：windows, compiler-construction, exe, executable

*投票否决这个问题显然很好，但请告诉我为什么它很愚蠢或不受欢迎，我只是想学习*

我的目标是理解像 Chrome 这样的复杂程序。

我知道这些文件可能只是几行代码，可以将文件提取到指定位置、编辑注册表或执行简单任务（如 .bat 文件）。

但是像 acrobat.exe 或 game.exe（如 ... bioshock.exe）这样的复杂 .exe 文件呢？

如我错了请纠正我：

我假设它的工作方式与将
某些文件加载​​到 ram 和其他文件中一样。它将存储所有可能的命令或指向某个地方（鼠标右键单击=选择/火枪）

但是公司如何制作这些.exe？
可以/它们中的任何一个都用java编码吗？
其他人怎么能侵入他们来改变一些事情呢？就像关于 SimCity 离线模式的争议（虽然我不认为 hack 是在 .exe 中）
最后我记得，你不能像存档一样打开 .exe 对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:01:52.667

为您的问题写一个*完整*的答案是非常困难的。然而，让我试着让你一睹“.exe”的编写有多*复杂。*

假设你想编写一个写字母的程序。您将首先开发`Software requirement specification`为此所需的东西。你需要为此做一些`requirement gathering`事情。

因此，您将开始记下：
1\. 可以选择添加收件人。2\. 可以在信中添加文字。3\. 有签名信的机制。

等等 ...

然后你将开始编码。

首先，您将首先编写一些代码来满足您的要求。（您的复杂 exe 开始成形；耶！）

然后您可能需要重新考虑您的原始策略（除非您是专家）并重写一些代码..这个过程将迭代地继续。

到目前为止，您将拥有一堆“源文件”：

1.  一个从用户那里接受一些文本的 java 程序。
2.  [一个使用POP](http://en.wikipedia.org/wiki/Post_Office_Protocol)发送电子邮件的 java 程序（电子信件是 :)）
3.  [一个使用openssl](http://www.openssl.org/)分配[数字证书](http://en.wikipedia.org/wiki/Public_key_certificate)以“签署”您的信件的 java 程序。

但是现在你会意识到你已经制作了 3 个有 3 个主要程序的程序。但是你需要一口气做这些事情！因此，您将删除主程序并编写一个“主类”来创建三个源文件的对象。您的主程序可能如下所示：

```
AcceptText ap = new AcceptText("My letter content");
Letter L = new Letter();
L.addContent(ap);
Signature S = new Signature();
S.sign();
L.addSignature(S);
L.send(); 
```

现在，您将把它编译成可执行文件或可执行 jar。您甚至可能想使用 swing 或类似工具添加一些 GUI。

这样你就准备好了你的第一个复杂的 exe！运行它来自己发送电子邮件！现在，当您查看 bioshock.exe 之类的文件时，它们是由数千个源文件组成的，所有文件都整齐地放在一起。他们还添加了大量的艺术作品、动画、剪辑和声音。他们一点一点地创造出如此复杂的程序。没有秘诀。您可以非常轻松地学习创建 exe 的基础知识。但要大规模开发，需要极大的毅力和诚意。

如果您真的有兴趣，请彻底学习 2-3 种编程语言。然后学习一些“框架”或库。这些可以是类似于 [opengl] ( [http://en.wikipedia.org/wiki/OpenGL](http://en.wikipedia.org/wiki/OpenGL) ) 之类的图形库。缓慢而坚定地；您将学习如何自己制作其中一个复杂的 exe。这需要时间和大量的努力。快乐编码！欢迎来到俱乐部。

# python - 在 Tkinter 中将画布项目连接在一起

> ID：15642257
> 
> 赞同：3
> 
> 时间：2013-03-26T16:24:37.300
> 
> 标签：python, tkinter, tkinter-canvas

我想做的是在画布上视觉“连接”项目。例如，允许用户从一个图像到第二个图像画一条线，然后将这两个图像连接起来。

这里的连接是指如果用户单击并移动一个图像，则线会调整大小以保留连接。本质上，图像将成为线的端点，并且可以将多个图像连接到第三个图像。

有没有办法检测一条线是否接触到图像的边缘？

这让我想到了第二个问题，有没有办法以这种动态方式调整画布上的线条大小？我尝试过的解决方案基本上是删除原始行并重新绘制新行，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:41:24.277

[您可以使用coords](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.coords-method)方法更改线的端点（从而移动它们或使它们更长或更短） 。您必须跟踪与对象关联的线条并在移动图像时更新端点。

# java - 查询文档中的子标签

> ID：15642259
> 
> 赞同：0
> 
> 时间：2013-03-26T16:24:39.240
> 
> 标签：java, xml

我有一个这样的 XML 文档：

```
...
<sometag>
    <subtag>
        <subsubtag someattr="foo" />
        <subsubtag someattr="bla" />
        <subsubtag someattr="bar" />
    </subtag>
</sometag>
... 
```

我把它放在了一个里面`org.w3c.dom.Document`，现在需要把所有的东西都`subsubtag`放在一个`subtag`里面`sometag`。目前我查询所有节点`sometag`，获取所有子节点，`subtag`从这里获取所有子节点等等......我无法直接查询所有子标签，因为它们也可以列在文档的其他位置。

有没有更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:52:38.393

在 XML 文件中使用 XPath 进行这种复杂的查询。学习曲线的努力是值得的。基本上，在 Xpath 中，您只需要编写

```
/sometag/subtag/subsubtag 
```

# jquery - $.getJSON 没有得到响应

> ID：15642261
> 
> 赞同：0
> 
> 时间：2013-03-26T16:24:55.763
> 
> 标签：jquery, ajax

因此，在用我的头撞我的键盘好几个小时试图让 IE 与 $.ajax 调用一起玩之后，我决定尝试使用 $.getJSON 代替。

```
 $.getJSON("addresshere", function(data) {
      alert(data); 
}); 
```

它似乎没有收到警报，我的控制台中没有任何错误......不确定我做错了什么。

*我更改了地址，因为它是公司网站。

我正在使用 $.getJSON 因为我需要从另一台服务器获取数据。我已经尝试过 $.get 和 $.ajax ，但是 IE 对这两个调用都有问题并且它阻止了它们。

编辑：是的，抱歉，这是一个跨域请求。我正在使用谷歌浏览器开发 $.ajax 和 $.get 在 chrome 中运行良好我只是遇到了 $.getJSON 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:35:38.323

浏览器不允许这样做，因为此时没有阻止您将请求代理到银行网站、facebook 或任何您喜欢的东西。这是一个安全问题。更多信息：[http ://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery)

但是，如果您只执行 GET 请求，并且仅将其用于开发（请不要在生产中执行此操作），则可以使用 YQL 代理请求：[http ://ajaxian.com/archives/using- yql-as-a-proxy-for-cross-domain-ajax](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax)

# jquery - 如何在 jquerymobile 中添加指向 textarea 数据的超链接

> ID：15642262
> 
> 赞同：1
> 
> 时间：2013-03-26T16:25:01.150
> 
> 标签：jquery, jquery-mobile

您好我有一个文本区域，我需要在单击按钮时将超链接添加到文本。我正在使用 jquery 手机。我的 HTML 代码：

```
<textarea rows="10" id="t1">Test</textarea>
<a href="#" data-role="button" data-inline="true" id="submit">Submit</a> 
```

作为我的Javascript：

```
$(document).bind("pageinit",function(){
   $("#submit").live("click",function(){
      var valu=$("#t1").val();
      alert(valu);
      $("<a href='#'>Adding</a>").appendTo("#t1");
   });
}); 
```

超链接“添加”没有附加到我的文本区域。奇怪的是它在 IE7 中运行良好，但在 Chrome 中却不行。有人可以帮我解决这个问题。

注意：我试过服用

```
<a href='#'>Adding</a> 
```

成一个单独的变量并将其添加到我的 textarea 值中，然后使用 jquery 的 .html() 方法将其转换。那也行不通。

# java - xml stax 解析器文件中的特殊字符

> ID：15642264
> 
> 赞同：0
> 
> 时间：2013-03-26T16:25:07.500
> 
> 标签：java, xml, xml-parsing, stax

```
original xml file: 
<root> <article>
<artists><artist role="A&amp;R Staff" id="1">Vance</artist><artists></article>
</root> 
```

当我使用 stax 解析器读取文件并将其写入它创建的新文件时，这会生成无效的 xml 文件，因为新文件中没有 &。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-06-22T13:38:00.350

以下为我工作：

```
// This can be any InputStream
InputStream is;
XMLInputFactory factory = XMLInputFactory.newInstance();
// Set this property to handle special HTML characters like & etc.
factory.setProperty(XMLInputFactory.IS_COALESCING, true);
// Now use the factory to get the EventReader from the InputStream
XMLEventReader eventReader = factory.createXMLEventReader(is); 
```

# file - CodeIgniter - 使用 opendir 的文件和文件夹列表

> ID：15642270
> 
> 赞同：2
> 
> 时间：2013-03-26T16:25:24.767
> 
> 标签：file, list, codeigniter, directory, opendir

我对某些编程技术相当陌生。一般来说，对于 OOP 和 MVC 来说非常新。我很确定这是我的第一个 StackOverflow 问题！

我刚刚下载了 CodeIgniter 并为自己准备了一个小项目。

我在服务器上有一个文件和文件夹列表，并想使用 opendir、readdir 和 closedir 等在 ul 和 li 的网页上列出它们 - 我之前在函数中以程序方式完成了此操作，但没有甚至想从 CodeIgniter 开始。

是否有已经这样做的助手或库？如果没有，最好的方法是什么？我应该把我的代码放在模型文件夹中吗？

如此迷茫！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T15:15:14.017

我希望你在过去的一年里已经了解了 MVC 架构 :)

现在关于你的问题。您要求的这个助手或库确实存在。对于同样的“问题”，我使用了目录助手及其功能**directory_map('relative/path/to/your/directory')**。此函数从您的目录中递归获取内容并将其排序为这样的数组

```
 Array
    (
    [banner] => Array
        (
        [0] => banner1.jpg
        [1] => banner2.jpg
        [2] => banner3.jpg
        [3] => banner4.jpg
        )
    [galerie] => Array
        (
        [0] => 0-PB083393.JPG
        [1] => DSCN2897.JPG
        [2] => DSCN2908.JPG
        [3] => DSCN2917.JPG
        [thumb] => Array
            (
                [0] => 0-PB083393_thumb.JPG
                [1] => DSCN2897_thumb.JPG
                [2] => DSCN2908_thumb.JPG
            )
        )
    [0] => mapa.jpg
    ) 
```

这非常简洁，您可以在 - 例如 - foreach 循环中使用它并添加 ul/li 标签。

可能一年后这个问题不相关，但我希望它可以帮助其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:24:42.107

哈。这很好笑。我正在寻找其他东西，偶然发现了我的第一个 CI 问题，却没有意识到是我 :D

到目前为止，我在不到一个月的时间内就使用了 CI。

我找到了 Directory Helper - directory_map，它基本上将您的文件夹结构放入数组数组中。

我他们在模型中创建了一个递归函数，将其转换为适当的下拉菜单......当它是一个文件时，它会在该文件中添加一个 href 链接。

[http://ellislab.com/codeigniter/user-guide/helpers/directory_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/directory_helper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:34:53.493

如果我这样做，我会：

(1) 创建一个Library 类，其方法接受一个目录名并返回一个文件数组。

(2) 在我的控制器中，我将加载库并使用它来获取感兴趣文件夹的文件列表。

(3) 然后我会加载一个视图，同时将文件名数组传递给我将组装列表的视图。

**首先学习**如何使用控制器加载带有数据的视图（从静态数组开始）。然后学习如何创建库并与您的控制器集成。

除非您想使用原生 PHP 函数，否则您可能还会阅读 CodeIgniter 的**File Helper库。**

此外，了解 PHP 单元测试。

我倾向于使用**模型**来处理来自 MySQL 数据库的数据。在您的情况下，您正在处理有关文件系统的信息。

祝你好运，CI 是 PHP/MySQL 框架的不错选择！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T06:55:18.757

首先，欢迎来到 CodeIgniter。它规则。现在...

您需要一个控制器函数来实际处理目录，类似于：

```
public function dir_to_array($dir, $separator = DIRECTORY_SEPARATOR, $paths = 'relative') 
{
    $result = array();
    $cdir = scandir($dir);
    foreach ($cdir as $key => $value)
    {
        if (!in_array($value, array(".", "..")))
        {
            if (is_dir($dir . $separator . $value))
            {
                $result[$value] = $this->dir_to_array($dir . $separator . $value, $separator, $paths);
            }
            else
            {
                if ($paths == 'relative')
                {
                    $result[] = $dir . '/' . $value;                    
                }
                elseif ($paths == 'absolute')
                {
                    $result[] = base_url() . $dir . '/' . $value;
                }
            }
        }
    }
    return $result;
} 
```

现在您需要调用该函数来返回结果，类似于：

`$modules['module_files'] = $this->dir_to_array(APPPATH . 'modules');`

这会将结果放入一个名为 $modules 的变量中，您可以以任何您想要的方式使用它，通常将其放在如下视图中：

`$this->load->view('folder/file', $modules);`

如果您向 load->view 函数提供可选的第三个参数 TRUE，则该视图的结果将再次返回以供您在任何您喜欢的地方使用，否则它将在您调用它的地方回显。视图可能如下所示：

```
<?php

    if (isset($module_files) && !empty($module_files))
    {
        $out = '<ul>';
        foreach ($module_files as $module_file)
        {
            if (!is_array($module_file))
            {

                // the item is not an array, so add it to the list.
                $out .= '<li>' . $module_file . '</li>';
            }
            else
            {
                // Looping code here, as you're dealing with a multi-level array.
                // Either do recursion (see controller function for example) or add another
                // foreach here if you know exactly how deep your nested list will be.
            }
        }
        $out .= '</ul>';
        echo $out;
    }

?> 
```

我没有检查这个语法错误，但它应该可以正常工作。希望这可以帮助..

# c# - ASP.NET 开发服务器：可能配置错误？

> ID：15642273
> 
> 赞同：1
> 
> 时间：2013-03-26T16:25:28.063
> 
> 标签：c#, .net, routing, url-routing, aspnet-development-server

我面临一个奇怪的问题。我正在使用 C# 和 .NET 4 开发一个网站，并且我想添加路由服务。在学习了几个教程（不成功）之后，我终于让自己使用了一个例子，然后在它上面建立了我的网站。一旦这样做，我意识到我的奇怪问题：**路由的正确行为取决于站点的虚拟路径**（！）。

实际上，运行两个具有相同代码（包括配置）但在两个不同虚拟路径下的网站（让我们将它们命名为**mySite**和**myExample**），我发现 myExample 正确地重写了我的 url，并且 mySite 向我抛出了 404 错误（就像路由不会' t 存在）。

不能避免提到 mySite 实际上是我创建的第一个网站的名称，因此我相信它在开发服务器的某个地方被错误配置。

假设我的直觉很好，**我该如何访问asp.net开发服务器配置？**

谢谢

# c# - 根据来自另一个下拉列表的选择通过 LINQ 填充下拉列表

> ID：15642284
> 
> 赞同：0
> 
> 时间：2013-03-26T16:25:56.057
> 
> 标签：c#, asp.net, html, linq

我一直在研究这个并且它有效。但是，在尝试从控制下拉列表中更改我的选项以查看下拉列表中应该显示我的动态列表的另一个列表后，没有任何反应。它仍然显示以前的列表。我可以得到一些帮助吗？：

这是我的正面：

```
 <label for="ddlGift1">Gift #1</label>
         <asp:DropDownList runat="server" ID="ddlGift1" class="gift" AutoPostBack="true"  AppendDataBoundItems="True" ClientIDMode="Static" OnSelectedIndexChanged="ddlGift1_SelectedIndexChanged"> 
             <asp:ListItem Value="--" Text="Please Select" />
         </asp:DropDownList>  

         <label for="ddlFName1">Fund Name</label>
         <asp:DropDownList runat="server" ID="ddlFName1" AutoPostBack="true"  AppendDataBoundItems="True" ClientIDMode="Static"  > 
             <asp:ListItem Value="--" Text="Please Select" />
         </asp:DropDownList>

         <label for="ddlGift2">Gift #2</label>
         <asp:DropDownList runat="server" ID="ddlGift2" class="gift" AutoPostBack="true"  AppendDataBoundItems="True" ClientIDMode="Static" OnSelectedIndexChanged="ddlGift2_SelectedIndexChanged" > 
             <asp:ListItem Value="--" Text="Please Select" />
         </asp:DropDownList>   

         <label for="ddlFName2">Fund Name</label>
         <asp:DropDownList runat="server" ID="ddlFName2" AutoPostBack="true"  AppendDataBoundItems="True" ClientIDMode="Static" > 

         <label for="txtPAmount2">Pledge Amount</label>
         <asp:TextBox runat="server" ID="txtPAmount2" CssClass="narrow"  text="0.00" onClick="ComputeCosts();" ClientIDMode="Static" class="PAmount" />             

         <label for="ddlGift3">Gift #3</label>
         <asp:DropDownList runat="server" ID="ddlGift3" class="gift" AutoPostBack="true"  AppendDataBoundItems="True" ClientIDMode="Static" OnSelectedIndexChanged="ddlGift3_SelectedIndexChanged"> 
             <asp:ListItem Value="--" Text="Please Select" />
         </asp:DropDownList>  

         <label for="ddlFName3">Fund Name</label>
         <asp:DropDownList runat="server" ID="ddlFName3" AutoPostBack="true"  AppendDataBoundItems="True" ClientIDMode="Static" > 
             <asp:ListItem Value="--" Text="Please Select" />
         </asp:DropDownList> 
```

背面：一个功能的示例：

```
private void SetCOB(DropDownList name)
      {
           var _db = (from a in _foundation.COB
                     orderby a.id
                     select new { a.id, a.name });

        name.DataSource = _db;
        name.DataTextField = "name";
        name.DataValueField = "id";
        name.DataBind();
     }
 protected void ddlGift1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if(ddlGift1.SelectedValue == "41")
        {
            SetCOB(ddlFName1);
        }
        else if (ddlGift1.SelectedValue == "42")
        {
            SetCOLA(ddlFName1);
        }
        else if (ddlGift1.SelectedValue == "43")
        {
            SetCONHP(ddlFName1);
        }
        else if (ddlGift1.SelectedValue == "44")
        {
            SetOE(ddlFName1);
        }
        else if (ddlGift1.SelectedValue == "45")
        {
            SetCSEE(ddlFName1);
        }
        else if (ddlGift1.SelectedValue == "52")
        {
            SetA(ddlFName1);
        }
        else if (ddlGift1.SelectedValue == "54")
        {
            SetS(ddlFName1);
        }
    }

    protected void ddlGift2_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (ddlGift2.SelectedValue == "41")
        {
            SetCOB(ddlFName2);
        }
        else if (ddlGift2.SelectedValue == "42")
        {
            SetCOLA(ddlFName2);
        }
        else if (ddlGift2.SelectedValue == "43")
        {
            SetCONHP(ddlFName2);
        }
        else if (ddlGift2.SelectedValue == "44")
        {
            SetOE(ddlFName2);
        }
        else if (ddlGift2.SelectedValue == "45")
        {
            SetCSEE(ddlFName2);
        }
        else if (ddlGift2.SelectedValue == "52")
        {
            SetA(ddlFName2);
        }
        else if (ddlGift2.SelectedValue == "54")
        {
            SetS(ddlFName2);
        }
    }

    protected void ddlGift3_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (ddlGift3.SelectedValue == "41")
        {
            SetCOB(ddlFName3);
        }
        else if (ddlGift3.SelectedValue == "42")
        {
            SetCOLA(ddlFName3);
        }
        else if (ddlGift3.SelectedValue == "43")
        {
            SetCONHP(ddlFName3);
        }
        else if (ddlGift3.SelectedValue == "44")
        {
            SetOE(ddlFName3);
        }
        else if (ddlGift3.SelectedValue == "45")
        {
            SetCSEE(ddlFName3);
        }
        else if (ddlGift3.SelectedValue == "52")
        {
            SetA(ddlFName3);
        }
        else if (ddlGift3.SelectedValue == "54")
        {
            SetS(ddlFName3);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:20:26.607

您的`SetCOB`方法需要根据下拉列表的选定值进行查询。目前，它正在查询所有。

应该是这样的——

```
protected void ddlGift1_SelectedIndexChanged(object sender, EventArgs e)
{
    if(ddlGift1.SelectedValue == "41")
    {
       SetCOB(41, ddlFName1);
    }
    .....
}

private void SetCOB(int id, DropDownList name)
{
    var _db = (from a in _foundation.COB
       where a.id == id 
      orderby a.id
      select new { a.id, a.name });
    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T18:29:24.977

通过使用 LINQ，您可以有条件地选择第二个下拉列表数据源，例如在此示例中，它使用 Linq 查询根据所选国家/地区显示城市：

**HTML ASP.Net**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication2.WebForm1" %>

<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style>
        .required:after {
            content: " * ";
            font-weight: bold;
            color: red;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <table>
                <tr>
                    <td>Country:</td>
                    <td>
                        <asp:DropDownList ID="ddlCountries" runat="server" AutoPostBack="true" 
                            OnSelectedIndexChanged="ddlCountries_SelectedIndexChanged">
                        </asp:DropDownList>
                    </td>
                </tr>
                <tr>
                    <td>City:</td>
                    <td>
                        <asp:DropDownList ID="ddlCities" runat="server">
                        </asp:DropDownList>
                    </td>
                </tr>
            </table>
        </div>
    </form>
</body>
</html> 
```

**C# 背后的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using WebApplication2.Models;

namespace WebApplication2
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                GetData();

            }
        }

        private List<City> SetCityData()
        {
            List<City> cities = new List<City>()
            {
                new City() { Id = 1, CountryId = 2, CityName = "Amman"  },
                new City() { Id = 1, CountryId = 2, CityName = "Zarqa"  },
                new City() { Id = 1, CountryId = 4, CityName = "Istanbul"  },
                new City() { Id = 1, CountryId = 4, CityName = "Ankara"  },
                new City() { Id = 1, CountryId = 4, CityName = "Mersin"  },
                new City() { Id = 1, CountryId = 4, CityName = "Trabzon"  },
                new City() { Id = 1, CountryId = 1, CityName = "Rio de Janeiro"  },
                new City() { Id = 1, CountryId = 3, CityName = "Los Angeles"  },
                new City() { Id = 1, CountryId = 3, CityName = "Chicago"  },
            };
            return cities;
        }

        protected void ddlCountries_SelectedIndexChanged(object sender, EventArgs e)
        {
            int selectedCountry = Convert.ToInt32(ddlCountries.SelectedValue);
            var cityByCountry = from c in SetCityData()
                                where c.CountryId == selectedCountry
                                select c;
            ddlCities.DataSource = cityByCountry.ToList();
            ddlCities.DataTextField = "CityName";
            ddlCities.DataValueField = "Id";
            ddlCities.DataBind();
        }

        private List<Country> SetCountries()
        {
            List<Country> countries = new List<Country>()
            {
                new Country() { Id = 1, CountryName = "Brazil"  },
                new Country() { Id = 2, CountryName = "Jordan" },
                new Country() { Id = 3, CountryName = "USA" },
                new Country() { Id = 4, CountryName = "Turkey" }
            };
            return countries;
        }

        private void GetData()
        {
            ddlCountries.DataSource = SetCountries();
            ddlCountries.DataTextField = "CountryName";
            ddlCountries.DataValueField = "Id";
            ddlCountries.DataBind();
        }
    }
} 
```

**乡村班和城市班**

```
using System;

namespace WebApplication2.Models
{
    public class Country
    {
        public int Id { get; set; }
        public string CountryName { get; set; }
    }
}

using System;

namespace WebApplication2.Models
{
    public class City
    {
        public int Id { get; set; }
        public int CountryId { get; set; }
        public string CityName { get; set; }

    }
} 
```

# python - 如何在数据库更新后获取 SQLAlchemy ORM 对象的先前状态？

> ID：15642286
> 
> 赞同：5
> 
> 时间：2013-03-26T16:25:56.493
> 
> 标签：python, orm, sqlalchemy, crud

问题是我不知道如何使用 SQLAlchemy 在对象进入新状态时通知我。

我正在使用 SQLAlchemy ORM (Declarative) 来更新一个对象：

```
class Customer(declarative_base()):

    __table_name__ = "customer"

    id = Column(Integer, primary_key=True)
    status = Column(String) 
```

我想知道对象何时进入状态。特别是在发布 UPDATE 和状态更改后。例如`Customer.status == 'registered'`，它以前有不同的状态。

我目前正在使用`'set'`属性事件执行此操作：

```
from sqlalchemy import event
from model import Customer

def on_set_attribute(target, value, oldvalue, initiator):
    print target.status
    print value
    print oldvalue

event.listen(
        Customer.status,
        'set',
        on_set_attribute,
        propagate=True,
        active_history=True) 
```

每次在该属性上调用“set”时，我的代码都会触发，并且我会检查 the`value`和 the`oldvalue`是否不同。问题是`target`参数没有完全形成，所以它还没有填充所有的属性值。

有一个更好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T23:37:26.893

我的解决方案是使用“after_flush”SessionEvent 而不是“set”AttributeEvent。

非常感谢[agronholm](https://stackoverflow.com/users/242021/agronholm)，他提供了专门检查对象值和旧值的示例 SessionEvent 代码。

下面的解决方案是修改他的代码：

```
def get_old_value(attribute_state):
    history = attribute_state.history
    return history.deleted[0] if history.deleted else None

def trigger_attribute_change_events(object_):
    for mapper_property in object_mapper(object_).iterate_properties:
        if isinstance(mapper_property, ColumnProperty):
            key = mapper_property.key
            attribute_state = inspect(object_).attrs.get(key)
            history = attribute_state.history

            if history.has_changes():
                value = attribute_state.value
                # old_value is None for new objects and old value for dirty objects
                old_value = get_old_value(attribute_state)
                handler = registry.get(mapper_property)
                if handler:
                    handler(object_, value, old_value)

def on_after_flush(session, flush_context):
    changed_objects = session.new.union(session.dirty)
    for o in changed_objects:
        trigger_attribute_change_events(o)

event.listen(session, "after_flush", on_after_flush) 
```

这`registry`是一个字典，其键是 MapperProperty，其值是事件处理程序。 `session`、`event`、`inspect`和`object_mapper`都是 sqlalchemy 类和函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:54:53.020

使用[before_update](http://docs.sqlalchemy.org/en/rel_0_8/orm/events.html#sqlalchemy.orm.events.MapperEvents.before_update)事件或[before_flush](http://docs.sqlalchemy.org/en/rel_0_8/orm/events.html#sqlalchemy.orm.events.SessionEvents.before_flush)事件在稍后的时间点拦截发生的这种情况。

# c# - 检测投注正则表达式

> ID：15642288
> 
> 赞同：-5
> 
> 时间：2013-03-26T16:25:59.737
> 
> 标签：c#

当我收到一个数字时，我想对照所有可能的投注组合检查它，例如

```
L( 24, 25, 26, 27) 
```

如果我正在搜索数字 24 而不是 2，将返回 true，希望我很清楚，抱歉没有代码，我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:31:26.090

```
bool ChechResult(int value)
{
    String input = @"L( 24, 25, 26, 27)";
    String pattern = @"\d+";
    foreach (Match match in Regex.Matches(input, pattern))
    {
        if(value == int.Parse(match.Value))
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T16:30:33.557

```
bool foundMatch = Regex.IsMatch(subject, " " + 24 + "(?:,|\\))"); 
```

# ios - Objective-C：如何在按钮点击时加载不同的视图？

> ID：15642290
> 
> 赞同：0
> 
> 时间：2013-03-26T16:26:07.137
> 
> 标签：ios, button, views, collectionview

我有一个 iPad 应用程序，它在一个视图上有一个按钮。当我按下按钮时，我希望它加载第二个视图。我要加载的第二个视图是 CollectionView。我没有使用，也不想使用 UINavigationController。

有谁知道如何在按钮点击时加载第二个视图？此外，我还想创建一个返回上一个视图的返回按钮。每次点击按钮时，前一个视图可能会有所不同。

网上有很多关于这个主题的材料，但我找不到任何有用的东西或任何最近的东西。

这是我现在拥有的代码：

```
-(void)showCollectionView:(id)sender
{
    NSLog(@"In ShowCollectionView");

    ZHCollectionViewController *cvc = [[ZHCollectionViewController alloc]
                              initWithNibName:@"ZHCollectionViewController"
                              bundle:[NSBundle mainBundle]];
    [self.view addSubview:cvc.view];

    NSLog(@"After all the stuff");
} 
```

当它运行时，两个 NSLog 都被执行并且消息显示在控制台中，但视图没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:41:55.017

你可以尝试以模态方式呈现它：

```
[self presentViewController:cvc animated:YES completion:^{
                                                         }]; 
```

在此调用之前，您可以通过定义过渡和演示样式来自定义“cvc”的外观，例如：

```
cvc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
cvc.modalPresentationStyle = UIModalPresentationFormSheet; 
```

为了隐藏它在 ZHCollectionViewController 中调用，我相信在一些按钮操作中

```
[self dismissViewControllerAnimated:NO completion:^{  
                                                   }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:43:26.120

有几种方法可以做到这一点，而您尝试的方式不是其中之一。如果你只想添加一个视图，而不是视图控制器，你应该有一个 xib 文件，它是一个视图，而不是一个视图控制器。您必须使要将此集合视图添加到其视图的控制器成为此集合视图的文件所有者，以便您可以将任何出口连接到它。

将另一个视图控制器的视图添加到您的视图中是不正确的，除非您将该控制器设置为子控制器。如果您希望 ZHCollectionViewController 成为集合视图的控制器，那么您应该将该控制器添加为子视图控制器。您可以查看 Apple 关于自定义容器控制器的文档，了解它是如何完成的。

你在你的问题中并没有真正说这个集合视图是如何出现的。你想让它占据整个屏幕，还是你想让它成为一个子视图？如果您希望它占据整个屏幕，那么最好将窗口的根视图控制器更改为 ZHCollectionViewController，或者在当前视图上模态显示它。

# facebook - Facebook：如何以编程方式检索访问令牌？

> ID：15642295
> 
> 赞同：7
> 
> 时间：2013-03-26T16:26:15.830
> 
> 标签：facebook, facebook-graph-api

我需要在*自己的*Facebook 页面上发布消息；我需要以*编程*方式进行（在我的情况下使用 Python）。我设法使用此代码（在 Python 中）完成了这一部分：

```
import urllib, urllib2

access_token='XXXX'
fb_page_id='YYYY' # my page ID

post_data = {'access_token':access_token, 'message':'hey this is a test!'}
request_path = str(fb_page_id)+'/feed'
post_data = urllib.urlencode(post_data)
response = urllib2.urlopen(
    'https://graph.facebook.com/%s' % request_path, post_data
) 
```

FB页面上生成的帖子的ID正确返回：

```
In [11]: response.readlines()
Out[11]: ['{"id":"135386143198208_461964357207050"}'] 
```

**问题：**

为了生成`access_token`并发出上面的 API 请求，我必须*手动执行*[此处](https://developers.facebook.com/docs/howtos/login/login-as-page/)详述的三个步骤。

但在实践中，这个手动过程是不可接受**的，因为我需要从 cron 作业运行这个任务**。因此我需要自动化它，因为`access_token`在 Facebook 中是暂时的。即，每次运行此脚本时，我都需要获取访问令牌。怎么做？

只要您传达所涉及的步骤，请随意在您的答案中使用任何脚本工具（curl、JavaScript、Java、PHP）。请注意，我需要使用任何服务器端语言（Python/Ruby/PHP）来执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:41:23.737

您**无法**以编程方式检索短期令牌。它违背了用户交互的目的。

Facebook 有意采用这种方式来确保用户可以完全手动控制他们安装的应用程序。

一旦用户授予初始访问权限，您就可以将该过程自动化最多两个月（如果用户使令牌无效，例如通过更改密码，则更早）

通过执行 HTTP 请求

```
https://graph.facebook.com/oauth/access_token?  
    grant_type=fb_exchange_token&           
    client_id=APP_ID&
    client_secret=APP_SECRET&
    fb_exchange_token=SHORT_LIVED_ACCESS_TOKEN 
```

在这两个月结束后，用户必须重新授予对应用程序的访问权限，并提供一个新的短期令牌，然后您可以使用上面的代码重新扩展该令牌。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T22:43:18.673

如果您扩展您的（用户）访问令牌，那么您可以请求一个实际上根本不会过期的（页面）访问令牌。

请参阅以下文档的“扩展页面访问令牌”部分：[https ://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-01T13:24:10.240

祝福编写此代码的灵魂。不是我，而是在某个地方找到的。工作顺利。使用您的电子邮件和密码调用此函数。

```
MOBILE_USER_AGENT = "Mozilla/5.0 (Linux; U; en-gb; KFTHWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.16 Safari/535.19"
FB_AUTH = "https://www.facebook.com/v2.6/dialog/oauth?redirect_uri=fb464891386855067%3A%2F%2Fauthorize%2F&display=touch&state=%7B%22challenge%22%3A%22IUUkEUqIGud332lfu%252BMJhxL4Wlc%253D%22%2C%220_auth_logger_id%22%3A%2230F06532-A1B9-4B10-BB28-B29956C71AB1%22%2C%22com.facebook.sdk_client_state%22%3Atrue%2C%223_method%22%3A%22sfvc_auth%22%7D&scope=user_birthday%2Cuser_photos%2Cuser_education_history%2Cemail%2Cuser_relationship_details%2Cuser_friends%2Cuser_work_history%2Cuser_likes&response_type=token%2Csigned_request&default_audience=friends&return_scopes=true&auth_type=rerequest&client_id=464891386855067&ret=login&sdk=ios&logger_id=30F06532-A1B9-4B10-BB28-B29956C71AB1&ext=1470840777&hash=AeZqkIcf-NEW6vBd"

def get_access_token(email, password):
    s = robobrowser.RoboBrowser(user_agent=MOBILE_USER_AGENT, parser="lxml")
    s.open(FB_AUTH)
    ##submit login form##
    f = s.get_form()
    f["pass"] = password
    f["email"] = email
    s.submit_form(f)
    ##click the 'ok' button on the dialog informing you that you have already authenticated with the Tinder app##
    f = s.get_form()
    s.submit_form(f, submit=f.submit_fields['__CONFIRM__'])
    ##get access token from the html response##
    access_token = re.search(r"access_token=([\w\d]+)", s.response.content.decode()).groups()[0]
    #print  s.response.content.decode()
    return access_token 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T21:32:21.030

要以编程方式为普通用户获取 facebook 令牌，您可能对此感兴趣：[https](https://github.com/fbessez/Tinder/blob/master/fb_auth_token.py) ://github.com/fbessez/Tinder/blob/master/fb_auth_token.py ，这是一个 python 脚本，可在提供电子邮件时自动检索令牌/密码。

确保您已安装并安装`lxml`，因为这些是先决条件。两者都可以通过跑步轻松获得`requests``robobrowser``requests``robobrowser`

`pip install robobrowser`和

`pip install requests`

lxml 有点“棘手”，因为它必须被编译（以获得最新版本）。遵循这个 SO：[如何在 Ubuntu 上安装 lxml](https://stackoverflow.com/questions/6504810/how-to-install-lxml-on-ubuntu)

# inner-join - 使用 INNER JOIN 获取类别名称

> ID：15642298
> 
> 赞同：0
> 
> 时间：2013-03-26T16:26:31.567
> 
> 标签：inner-join

我有一个返回项目详细信息的查询。它属于某个类别；因此，我已将 ITEMS 表链接到 CATEGORIES 表，并将外键保存到 ITEMS 表中。

现在，我希望任何选定项目的详细信息也显示类别名称而不是外键。我已经尝试`INNER JOIN`如下，但令人惊讶的是，查询仍然显示外键。

这是我的查询：

```
/* Create the prepared statement */
if ($stmt = $mysqli->prepare("SELECT categories.category AS category, 
                                     items.id, 
                                     items.name, 
                                     items.description 
                              FROM items
                              INNER JOIN categories
                                    ON categories.cat_id = items.cat_id
                              WHERE items.id='$id'")) { 

    /* Execute the prepared Statement */
    $stmt->execute();

    /* Bind results to variables */
    $stmt->bind_result($id,$category,$name,$description);

    /* fetch values */
    while ($rows = $stmt->fetch()) {
        ...
    }
...
} 
```

输出类别名称：

```
<?php  
echo $category;
?> 
```

这里可能缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:31:20.310

您的绑定顺序错误，应该是：

```
$stmt->bind_result($category, $id, $name, $description); 
```

您在 SELECT 子句中的顺序很重要，因此`bind_result`可以找出哪个列绑定到哪个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:32:35.827

这超出了我的范围，但还没有人回答，所以我想我会试一试。

是因为您在查询中选择了 3 个项目...类别、ID、描述

然后，当您绑定变量时，您将绑定 4... $id, $category, $name, $description

所以也许正在发生的事情是变量 $id 实际上是类别，而 $category 实际上是 id （这就是你所看到的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:30:37.193

您似乎将 3 个项目（从您的选择中）提取到 4 个变量，我认为这不好。

# ruby - 查找从文件中读取的字符串值时遇到问题

> ID：15642302
> 
> 赞同：-4
> 
> 时间：2013-03-26T16:26:41.653
> 
> 标签：ruby, arrays, string

对于以下问题，我无法从字符串中提取数值。我已经阅读了此处包含的文件[http://projecteuler.net/project/words.txt](http://projecteuler.net/project/words.txt)并且我成功阅读了它，但我不知道我的 switch-case 是否工作不正常或者我是否遇到了数组问题，我主要用 C++ 编程并且正在尝试学习 ruby​​，所以我对 ruby​​ 语法的理解充其量仍然是初级的

```
 #!/usr/bin/ruby -w

words = []
words = File::read("words.txt") 
parts = words.split(',')
puts parts
c=0
while parts != "YOUTH"
    a=0
    case parts
        when 'A'
            a+=1
        when 'B'
            a+=2
        when 'C'
            a+=3
        when 'D'
            a+=4
        when 'E'
            a+=5
        when 'F'
            a+=6
        when 'G'
            a+=7
        when 'H'
            a+=8
        when 'I'
            a+=9
        when 'J'
            a+=10
        when 'K'
            a+=11
        when 'L'
            a+=12
        when 'M'
            a+=13
        when 'N'
            a+=14
        when 'O'
            a+=15
        when 'P'
            a+=16
        when 'Q'
            a+=17
        when 'R'
            a+=18
        when 'S'
            a+=19
        when 'T'
            a+=20
        when 'U'
            a+=21
        when 'V'
            a+=22
        when 'W'
            a+=23
        when 'X'
            a+=24
        when 'Y'
            a+=25
        when 'Z'
            a+=26
    end
    b = false
    i = 1
    k= 0
    while b = false
        k += i  
        i += 1
        if a == k || i >15
            b == true
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:53:31.740

我不确定这段代码应该计算什么，但我已经编辑了你的代码，从逻辑的角度来看是有意义的：

```
#!/usr/bin/ruby -w

words = File::read("words.txt") ;
parts = words.delete('\"').split(',');
puts parts
c=0
while(c<parts.length)
    a=0
    each_word = parts[c].split('');
    for i in 0...each_word.length
        case each_word[i]
            when 'A'
                a+=1
            when 'B'
                a+=2
            when 'C'
                a+=3
            when 'D'
                a+=4
            when 'E'
                a+=5
            when 'F'
                a+=6
            when 'G'
                a+=7
            when 'H'
                a+=8
            when 'I'
                a+=9
            when 'J'
                a+=10
            when 'K'
                a+=11
            when 'L'
                a+=12
            when 'M'
                a+=13
            when 'N'
                a+=14
            when 'O'
                a+=15
            when 'P'
                a+=16
            when 'Q'
                a+=17
            when 'R'
                a+=18
            when 'S'
                a+=19
            when 'T'
                a+=20
            when 'U'
                a+=21
            when 'V'
                a+=22
            when 'W'
                a+=23
            when 'X'
                a+=24
            when 'Y'
                a+=25
            when 'Z'
                a+=26
        end
    end
    b = false
    i = 1
    k = 0
    while(b == false)
        k += i  
        i += 1
        if((a == k) || (i > 15))
            b = true
        end
    end
    c +=1;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:39:25.230

[`Here is the official Doc`](http://www.ruby-doc.org/core-2.0/Array.html#method-i-5B-5D)

好的！所以这里有一些提示你的问题：

```
"string".split(//)
#=> ["s", "t", "r", "i", "n", "g"]
"string".split(//).first
#=> "s"
"string".split(//).first(1)
#=> ["s"]
"string".split(//).first(3)
#=> ["s", "t", "r"] 
```

还有一些解决问题的方法：

```
"string".split(//)[0]
#=> "s"
"string".split(//)[1]
#=> "t"
"string".split(//)[0,4]
#=> ["s", "t", "r", "i"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:40:34.070

您需要将部分转换为 char 数组，如下所示：

```
parts.split(//) 
```

或者

```
parts.chars.to_a 
```

然后遍历 char 数组。

# google-maps - 您从 SV API 的 getPosition() 获得的纬度/经度有多准确？

> ID：15642304
> 
> 赞同：0
> 
> 时间：2013-03-26T16:26:49.503
> 
> 标签：google-maps, geolocation, google-street-view

我在[Google 的产品论坛](http://productforums.google.com/forum/#!category-topic/maps/issues-and-troubleshooting/maps-street-view/windows/chrome/z2EAsKE-oSA)上问同样的问题，如果您看到同样的问题，请见谅。

![Google 街景服务示例的屏幕截图](../Images/7c120b94afbe11b11d6ba224011a38fc.png)

我正在使用[Street View Service开发与](https://developers.google.com/maps/documentation/javascript/streetview)[此示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/streetview-simple)类似的应用程序（上图）。在这个应用程序中，我想以纬度/经度坐标存储用户在地图上旅行的位置。我发现[StreetViewPanorama 类](https://developers.google.com/maps/documentation/javascript/reference)提供了一个 API，getPosition()，它返回 LatLng。从 LatLng 对象中提取的 Lat/lng 坐标看起来像 lat=38.924066 和 lng=-77.032172。我可以使用这些值来存储我想要的东西。

虽然前面提到的 latlng 值有 8 个有效数字，但我实际上想知道这些值有多准确，因为谷歌在运行街景汽车时收集的 GPS 位置会有错误。

所以我的问题是，getPosition() 返回的 latlng 值有多准确？换句话说，我可以期望 getPosition() 的 latlng 值与 Google Map 上的 latlng 位置之间有多少一致性？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:59:53.557

我在另一个论坛上得到了答案，所以我也将它复制到这里并将问题标记为已解决。以下是来自谷歌论坛的 barryhunter 的回答。

> 6dp lat/long 精确到 0.1m。（即10cm）
> 
> 所以这样的纬度/经度应该与谷歌地图非常精确地匹配。即它的精确位置。
> 
> 但至于底层地图的准确性，差异很大。它几乎不可能告诉。我估计的大多数位置都在大约 6-30m 范围内

您可以在以下页面中检查带 6 个小数点的 lat 或 lng 值的准确性：http://nearby.org.uk/precision-ll.cgi?lat=38.924066&long= [-77.032172](http://nearby.org.uk/precision-ll.cgi?lat=38.924066&long=-77.032172)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T03:26:49.310

如上述答案所示，真正的限制是地图的定位，而不是从中获得的数值。

例如，我碰巧在两个谷歌地图部分重叠的位置进行读数。从一个到另一个时，颜色和地形特征存在明显的不连续性。这些照片必须至少相隔一年。

当从另一个重叠部分观察时，放置在该重叠一侧的标记至少跳跃了 10 m。换句话说，一个（或两个）地图部分相对于真正的 GPS 坐标至少偏离了几米。

如果你有幸在一个部分工作，地图点之间的距离可能非常准确，但如果你检查一个点与地面上的实际 GPS 坐标，谁知道呢？在我看来，6-30m 的偏差误差很可能。

# git - Gitolite推送错误

> ID：15642309
> 
> 赞同：8
> 
> 时间：2013-03-26T16:27:10.847
> 
> 标签：git, gitolite

我的 git 有问题，当我推送更改时，git 向我发送此错误：

```
git FATAL: split conf set, gl-conf not present for "name of repository" 
```

我能做些什么？或者我怎么会导致这个问题？谢谢你的帮助。

梅芙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T23:48:15.843

您是如何创建远程存储库的？如果您手动创建存储库的*裸*克隆并将其移动到 Gitolite 的存储库文件夹，则需要手动设置几件事：

1.  将所有者更改为 Gitolite 用户，例如`chown -R git:users`
2.  更改文件夹和文件的权限，例如`chmod -R 755 myproject.git`
3.  检查文件夹`gl-conf`中是否有。`project.git/`如果不是从另一个正在工作的 Gitolite 项目中复制一个。通常，当您使用*gitolite-admin*配置新项目时，它会自动设置。这是文件的样子。

```
# gl-conf
%one_repo = (
  'myproject' => {
    'meph' => [
      [
        4,
        'RW+',
        'refs/.*'
      ]
    ]
  }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-01T22:04:11.123

文件似乎`gl-conf`丢失了。您可以自己创建它（参见 JDD 的回答）或更简单，只需运行以下命令 - gitolite 将负责其余的工作：

```
gitolite setup 
```

如果将裸存储库迁移到 gitolite，可能会导致问题。gitolite 需要一个`gl-conf`文件来存储特定存储库的“编译”配置。数据取自`gitolite-admin/conf/gitolite.conf`（存储库，您将访问配置放入存储库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T18:49:01.233

That error message comes from [`src/lib/Gitolite/Conf/Load.pm`](https://github.com/sitaramc/gitolite/blob/master/src/lib/Gitolite/Conf/Load.pm#L235-L264):

```
 if ( -f "gl-conf" ) {
    return if not $split_conf{$repo};

    my $cc = "./gl-conf";
    _die "parse '$cc' failed: " . ( $! or $@ ) unless do $cc;

    $last_repo = $repo;
    $repos{$repo} = $one_repo{$repo};
    $configs{$repo} = $one_config{$repo} if $one_config{$repo};
} else {
    _die "split conf set, gl-conf not present for '$repo'" if $split_conf{$repo};
} 
```

So it it expected a local gitolite config in your bare repo, as if it were a ["big-config"](http://gitolite.com/gitolite/g2/bc.html) from gitolite g2.
Check if you still have a `$GL_BIG_CONFIG = 1;` in the `~/.gitolite.rc`, while being now in gitolite g3.

# c# - 有没有一种方法可以为会话（即对我的 API 的一次调用）设置上下文，而不是为整个应用程序域设置上下文？(ASP.NET)

> ID：15642314
> 
> 赞同：3
> 
> 时间：2013-03-26T16:27:16.707
> 
> 标签：c#, asp.net, .net

我创建了一个大型应用程序，但现在遇到了问题。

我通过 virdirs 将客户分开，因此他们一直位于不同的应用程序池中。我利用了这一点，并在 session_start 上为 db 连接字符串和其他上下文内容设置了静态变量，并在我的整个应用程序中都可以使用它。

现在，我不得不创建大量的 virdir（超过 500 个并且还在快速增长），我觉得我需要将这些移到一个（或多个）应用程序池中。问题是我没有在整个应用程序中传递从 URL 获得的“会话上下文”。更改为应用程序以传递上下文基本上意味着我需要重写应用程序。

有没有一种方法可以为会话（即一次调用我的 API）而不是为整个应用程序域设置此上下文？非常感谢您的帮助！

上下文示例 - db con str - 客户日志文件夹

**编辑：我在想我可能有一个表将上下文信息链接到线程 id (System.Threading.Thread.CurrentThread.ManagedThreadId)？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:26:11.700

“上下文”是什么意思？您是指请求/响应/会话信息吗？您不需要手动传递它们。**在处理 http 请求期间，ASP.Net 框架以静态**方式公开所有内容：

```
var ctx = System.Web.HttpContext.Current;
var req = ctx.Request;
var rsp = ctx.Response;
var sess = ctx.Session;
var cache = ctx.Cache;

var myOtherFoos = ctx.Items; 
```

在 ASP.Net 应用程序中，只要您添加了对 System.Web 程序集的引用，就可以从任何地方访问静态 Current-Context。

如果您不是指“上下文”，而是指一些您自己需要与请求处理一起传递的附加信息，那么 HttpContext 的**项目**就是为此！它是在每个新请求时创建的新集合，您可以将其用作轻量级暂存器，以在单个请求处理期间保存您的东西。与 Cache 或 Session 不同，“Items”会在请求处理结束的那一刻消失，因此无需担心泄漏或与其他请求混合数据。请注意您选择的键，尽量不要与坐在那里的框架事物发生冲突:)

# angularjs - 如何拥有两个 使用 Angularjs 的 ng-repeat 标记每次重复

> ID：15642321
> 
> 赞同：2
> 
> 时间：2013-03-26T16:27:38.397
> 
> 标签：angularjs, ng-repeat

我有以下菜单项

```
[ { "name": "Home", "target": "#home", "state": "active", "partial_html": "partials/home.html" }, { "name": "Find", "target": "#find", "partial_html": "partials/find.html", "state": "" }, { "name": "Albums", "target": "#albums", "partial_html": "partials/albums.html", "state": "" } ] 
```

如何使用 ng-repeat 为每个元素获取以下输出（mi 是数组 menuItems 中的一个项目（上面给出了数组定义）。

```
<li class='divider-vertical'></li>
<li class="{{mi.state}}"><a href="{{mi.target}}" ng-click="setMenuItemActive($event, mi.name)">{{mi.name}}</a></li> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-30T05:31:11.983

您可以使用 [ng-repeat-start 指令](https://docs.angularjs.org/api/ng/directive/ngRepeat)：

```
<ul>
   <li class='divider-vertical' ng-repeat-start="airport in airports"></li>
   <li ng-repeat-end class="{{mi.state}}"><a href="{{mi.target}}"
       ng-click="setMenuItemActive($event, mi.name)">{{mi.name}}</a></li>        
</ul> 
```

我希望它也会有所帮助..！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:33:24.560

Create and apply a directive on the 2nd LI. Remove the 1st LI from the loop. In the directive, append the 1st LI before the 2nd LI.

Alternatively, a directive can be applied to the parent UL where it will go through each LI and append the divider before it. Not sure if this will work though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T11:54:18.297

您还可以嵌套 ul 标签，例如

```
<ul>
<li ng-repeat ="..">
<ul>
<li class='divider-vertical'></li>
<li class="{{mi.state}}"><a href="{{mi.target}}" ng-click="setMenuItemActive($event, mi.name)">{{mi.name}}</a></li>
</ul>
</li>
</ul> 
```

# c++ - ifstream 在 eof 之后仍在读取

> ID：15642322
> 
> 赞同：2
> 
> 时间：2013-03-26T16:27:40.567
> 
> 标签：c++, loops, fstream, ifstream, eof

我正在编写一个程序，该程序必须将文件中的数据导入到各种容器中。我让它正确导入所有内容，但在应该是 eof 之后它会继续阅读。我有一种感觉，我没有正确地告诉循环何时结束，但下面的代码供大家查看。

```
bool InitLoad(vector<string>&num, vector<string>&name, vector<double>&price, vector<char>&tax)
{
    ifstream invFile;
    int intTemp;
    string strTemp;
    double dubTemp;
    char chTemp;
    string fileLoc = "C:/Users/owner/Documents/Visual Studio 2010/Projects/CISS 350/Week 1 Grocery Register/Week 1 Grocery Register/Invent.dat";

    //Open Invent.dat file. Location below is the location used on creators computer. Other may need to modify file location
    invFile.open(fileLoc.c_str(), ios::in);

    //If Invent.dat file fails to open display error message and return false
    if(invFile.fail())
    {
        cout << "Could not open inventory file" << endl;
        return false;
    }
    if(invFile)
    {
        //Read first line of the file
        getline(invFile, strTemp, ' ');
        while(invFile)  //while invFile contains data display import the list
        {
            cout << strTemp << " ";
            num.push_back(strTemp);

            getline(invFile, strTemp, ' ');
            cout << strTemp << " ";
            name.push_back(strTemp);

            getline(invFile, strTemp, ' ');
            dubTemp = atof(strTemp.c_str());
            cout << dubTemp << " ";
            price.push_back(dubTemp);

            invFile.get(chTemp);
            cout << chTemp;
            tax.push_back(chTemp);

            getline(invFile, strTemp, ' ');
        }
    }

    invFile.close();

    cout << endl;
    //Verify Proper input...REMOVE WHEN COMPLETE
    cout << "Verifying input data correct..." << endl;
    int vecSize = num.size();
    cout << vecSize << endl;
    for(int i = 0; i < vecSize; i++)
    {
        cout << num[i] << " " << name[i] << " " << price[i] << " " << tax[i] << endl;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:32:34.497

您的支票不检查 eof 标志 [http://www.cplusplus.com/reference/ios/ios/operator_bool/](http://www.cplusplus.com/reference/ios/ios/operator_bool/)

`invFile.eof()`改为使用

并且在阅读过去的 EOF**后**也会设置 eof 标志

PS：天啊！！不使用`atof`，只做`invFile << dubTemp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:53:34.800

由于您的数据是空格分隔的，您可以在每个字符串上使用格式化输入而不是 getline()。与此类似的东西。

```
 string lineTemp;
 while(getline(invFile, lineTemp))  //while invFile contains data display import the list
    {
        string strTemp1, strTemp1, dubTemp, chTemp;
        istringstream lstr(lineTemp);

        if(lstr >> strTemp1 >> strTemp2 >> dubTemp >> chTemp) {

            num.push_back(strTemp1);
            name.push_back(strTemp2);
            price.push_back(dubTemp);
            tax.push_back(chTemp);

            cout << strTemp1 << " "
                 << strTemp2 << " "
                 << dubTemp << " "
                 << chTemp << endl;
         }

         else {
             // Something is wrong with the line format.
         }

    } 
```

这将以格式化的方式和正确的类型读取数据。另外，您不必担心空行或行中的多余字符。

# javascript - CSS & AJAX - 复杂的加载微调器？

> ID：15642326
> 
> 赞同：0
> 
> 时间：2013-03-26T16:27:53.693
> 
> 标签：javascript, css, jquery-mobile

随着 jQuery Mobile 和酷炫的 CSS 技巧的所有进步，我希望那里会有一些更好看和更复杂的微调器。我正在考虑您在精心设计的视频游戏中看到的旋转器类型。我偏爱一个圆圈顺时针旋转，另一个圆圈逆时针旋转，也许在此之上还有不同的大小......有谁知道他们如何尝试使用 CSS/JS 来完成这个/GIF? 也许将 2 个普通旋转器叠加在一起？

我正在使用 jQuery Mobile 1.3（最新），我绝对无意担心 IE ... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:30:07.843

您可以使用[http://ajaxload.info/](http://ajaxload.info/)`.gif`自定义加载程序图标

# android - Jackson json在android中流式传输

> ID：15642331
> 
> 赞同：0
> 
> 时间：2013-03-26T16:28:19.377
> 
> 标签：android, json, jackson

我无法使用 Jackson 解析 json 数据：

```
{"query": "mydata","status": "true","user_info": "user_info": "{"userid":"212233379","org_id":"6335567"}"} 
```

我的代码在下面

```
JsonFactory f = new JsonFactory();
        JsonParser jp = f.createJsonParser(is);
        jp.nextToken();

        while (jp.nextToken() != JsonToken.END_OBJECT) {

            if ("status".equals(jp.getCurrentName())) {
                status = jp.getText();
                jp.nextToken();
            } else if ("user_info".equals(jp.getCurrentName())) {

                    jp.nextToken();
                    while (jp.nextToken() != JsonToken.END_OBJECT) {
                        String namefieldOne = jp.getCurrentName();
                        jp.nextToken();
                        if ("userid".equals(namefieldOne)) {

                        } else if ("org_id".equals(namefieldOne)) {

                        } else {
                            throw new IllegalStateException("Unrecognized field '" + jp.getCurrentName() + "'!");
                        }

                }
            }
        }
        jp.close(); 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:47:25.060

This json seems to be invalid.

# javascript - javascript linq.js groupby

> ID：15642333
> 
> 赞同：0
> 
> 时间：2013-03-26T16:28:28.143
> 
> 标签：javascript, group-by, linq.js

我在 Javascript 函数中有以下 JSON 数据（此处已简化）：

```
var data = [
  { Expiry: "2013-01-02T00:00:00", EndDate: "2013-01-16T00:00:00", Category: 10, Amount: 14.53 },
  { Expiry: "2013-01-02T00:00:00", EndDate: "2013-01-16T00:00:00", Category: 25, Amount: 14.86 },
  { Expiry: "2013-02-06T00:00:00", EndDate: "2013-02-20T00:00:00", Category: 10, Amount: 14.43 },
  { Expiry: "2013-02-06T00:00:00", EndDate: "2013-02-20T00:00:00", Category: 25, Amount: 14.76 }
]; 
```

注意：对于任何特定的 Expiry 值，EndDate 值将始终相同。

现在理想情况下，我希望最后有以下 JSON（按到期日期分组，并注意在属性名称中使用 Category 值）：

```
[
   {
     Expiry: 2013/1/2,     (note: not fussed about the date format)
     EndDate: 2013/1/16,
     Category10: 14.53,
     Category25: 14.86
   },
   {
     Expiry: 2013/2/6,
     EndDate: 2013/2/20,     
     Category10: 14.43,
     Category25: 14.76
   },
] 
```

但不确定我是否会一次完成所有这些，因此可以在每个日期对下满足一系列类别和金额，然后我可以处理这些类别和金额以某种方式获得上述内容：

```
[
   {
     Expiry: 2013/1/2,    
     EndDate: 2013/1/16,
     Categories: [ { 10, 25 } ],
     Amounts: [ { 14.53, 14.86 } ]
   },
   {
     Expiry: 2013/2/6,
     EndDate: 2013/2/20,
     Categories: [ { 10, 25 } ],
     Amounts: [ { 14.43, 14.76 } ]
   },
] 
```

我正在尝试使用 linq.js 库中的 groupby 函数来获取必要的 JSON，但无法获取我需要的内容。

具有以下内容：

```
var result = linq.groupBy("$.Expiry", "", "k,e => { Expiry: k, Categories: e.select('$.Category').toArray(), Amounts: e.select('$.Amount').toArray()}").toArray(); 
```

我得到：

```
[
   {
     Expiry: 2013/1/2,    
     Categories: [ { 10, 25 } ],
     Amounts: [ { 14.53, 14.86 } ]
   },
   {
     Expiry: 2013/2/6,
     Categories: [ { 10, 25 } ],
     Amounts: [ { 14.43, 14.76 } ]
   },
] 
```

但我无法锻炼如何获得 EndDate ......

有人可以帮忙吗？

塔，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T21:31:05.760

您的密钥应该是一个包含`Expiry`和的复合密钥`EndDate`。然后你可以将它包含在你的结果中。

我不建议尝试获得理想的结果，创建这样的结果不符合 LINQ 的精神。相反，您应该收集您正在查询的项目。

```
var query = Enumerable.From(data)
    .GroupBy(
        "{ Expiry: $.Expiry, EndDate: $.EndDate }",
        null,
        "{ Expiry: $.Expiry, EndDate: $.EndDate, Categories: $$.Select('$.Category').ToArray(), Amounts: $$.Select('$.Amount').ToArray() }",
        "$.Expiry + '-' + $.EndDate" // compare selector needed
    )
    .ToArray(); 
```

但是，仍然可以获得理想的结果，但我再次建议不要使用这种方法。

```
var query = Enumerable.From(data)
    .GroupBy(
        "{ Expiry: $.Expiry, EndDate: $.EndDate }",
        null,
        function (key, g) {
            return g.Aggregate({
                Expiry: key.Expiry,
                EndDate: key.EndDate
            }, function (result, item) {
                result['Category' + item.Category] = item.Amount;
                return result;
            });
        },
        "$.Expiry + '-' + $.EndDate"
    )
    .ToArray(); 
```

# ios - 核心数据和谓词

> ID：15642341
> 
> 赞同：1
> 
> 时间：2013-03-26T16:28:52.140
> 
> 标签：ios, objective-c, core-data, nspredicate

假设我有一个与 Persons 有一对多关系的实体部门。我希望能够搜索体育部，看看斯科特奥尔森人是否在那里工作。Scott Olsen 并不是唯一的`Person`（可能有 3 个 Scotts 在 3 个不同`Department`的地方工作）。

我如何搜索`Department`Sports 以找到在`Person`那里工作的 Scott Olsen 而找不到其他 Scotts？

我能想到的基本方法是：

```
for (Person *person in sports.persons) {
    if ([person.name isEqualToString:@"Scott Olsen"]) {
        // found him!
    }
} 
```

或者：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY persons.name == 'Scott Olsen'"];

Department *department = [Department MR_findFirstWithPredicate:predicate]; 
```

但我不确定第二个是否会返回在`Departement`体育领域工作的斯科特奥尔森。我想我可以检查一下

```
if ([department.name isEqualToString:@"Sports"]) 
```

但似乎应该有更好的方法来使用 NSPredicate 来做到这一点，但我想不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:35:15.557

这是你想要的？

```
NSString *name = @"Scott Olsen";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@", name];
NSSet *filtered = [sports.persons filteredSetUsingPredicate:predicate]; 
```

或者（在我发布上述代码后，您的问题发生了变化）：

```
NSString *name = @"Scott Olsen";
NSString *department = @"Sports";
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@ AND department = %@",
      name, department];
Person *person = [Person MR_findFirstWithPredicate:predicate]; 
```

（假设您从*Person*到*Department*具有反向关系“部门” ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:37:19.240

只需在谓词中添加第二个表达式：

```
[NSPredicate predicateWithFormat:@"name == 'Sports' && ANY persons.name == 'Scott Olsen'"]; 
```

# android - AS3 AIR（ios 和 android）CameraRoll 问题

> ID：15642343
> 
> 赞同：1
> 
> 时间：2013-03-26T16:28:54.470
> 
> 标签：android, ios, actionscript-3, mobile, air

我一直在尝试解决一个问题一周左右。谷歌搜索无济于事。我目前正在开发一个 iOS/Android 应用程序，该应用程序在游戏中具有截取屏幕截图并将其显示在移动设备图库中的功能。

我正在使用 CameraRoll 对象，问题是屏幕上的某些对象应用了平滑处理。然而，CameraRoll 屏幕截图忽略了这一点。这使得生成的屏幕截图有一些带有锯齿的对象。

我在谷歌搜索时发现了许多在同一问题上寻求帮助的呼声，但没有答案。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:20:51.120

Flash 中的锯齿很常见，因为默认情况下禁用位图上的平滑（更多 cpu 密集型）。我建议从 CameraRoll [MediaEvent.SELECT](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/CameraRoll.html#event%3aselect)事件创建一个新位图。在内部，它应该返回`event.data`一个[MediaPromise 对象](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/MediaPromise.html)。在其中，您应该找到一个只读[`file`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/MediaPromise.html#file)属性，您应该能够在其中找到图像。

然后，只需使用平滑创建新图像即可。

```
var img:Bitmap = new Bitmap();
img.bitmapData = file.bitmapData;
img.smoothing = true;
addChild(img); 
```

我以前从未在移动设备上尝试过此操作，但这是我相信您遇到[的常见问题。](http://inflagrantedelicto.memoryspiral.com/2009/09/scaling-your-images-in-flash-player-smooth-those-things/)

* * *

**附录：**

如果您在使用基于系统的屏幕截图服务时遇到问题，您可以使用纯 AS3 创建自己的屏幕截图服务。逻辑是，AS3 应该对舞台进行逐像素块复制（从而尊重图像的平滑值）。

尝试这个：

```
var myBitmapData:BitmapData = new BitmapData(stage.stageWidth, stage.stageHeight);
myBitmapData.draw(stage); 
```

# nsnotificationcenter - 测试 NSNotification 传递

> ID：15642344
> 
> 赞同：1
> 
> 时间：2013-03-26T16:28:58.707
> 
> 标签：nsnotificationcenter, ocmock, sentestingkit

我正在尝试确保在调用`NSNotification`之后发送。`reportIssue`

我收到此错误：

```
error: -[APHIssueComposerTests testPopulatedIssueIsReceived] : OCMockObject[APHIssueComposerTests]: expected method was not invoked: reportIssueNotificationReceived 
```

在 APHIssueComposer.m 中：

```
- (void) reportIssue {
  APHIssue* issue = [self issue];

  NSNotification* notification = [NSNotification notificationWithName:APHLogDataObjectNotification object:issue];
  [[NSNotificationQueue defaultQueue] enqueueNotification:notification postingStyle:NSPostWhenIdle];

  [self discardIssue];
} 
```

在 APHIssueComposerTests.m 中：

```
- (void)setUp
{
  [super setUp];
  self.mockObserver = [OCMockObject mockForClass:[self class]];
  [[NSNotificationCenter defaultCenter] addObserver:self.mockObserver
                                           selector:@selector(reportIssueNotificationReceived)
                                               name:APHLogDataObjectNotification
                                             object:nil];
  self.issueComposer = [[APHIssueComposer alloc] initWithTempDirectory:@"/my/fake/directory"];
}

- (void)testPopulatedIssueIsReceived
{
  [[self.mockObserver expect] reportIssueNotificationReceived];
  self.issueComposer.message = @"fake message.";
  [self.issueComposer reportIssue];
  [mockObserver verify];
  [[NSNotificationCenter defaultCenter] removeObserver:mockObserver name:APHLogDataObjectNotification object:nil];
}

- (void)tearDown
{
  [super tearDown];
  [[NSNotificationCenter defaultCenter] removeObserver:mockObserver name:APHLogDataObjectNotification object:nil]; 
} 
```

为什么模拟对象没有收到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:33:02.750

问题是这`enqueueNotification`是异步的。

# sql-server - UPDATE 语句中的 T-SQL GO

> ID：15642346
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:29:02.010
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个由一系列更新语句填充的派生字段，每个语句都连接到不同的表和不同的字段。重要的是，一系列更新以特定顺序执行，即与表 A 的连接可能会产生结果 X，然后与表 B 的连接会产生结果 Y，在这种情况下我想要结果 Y。通常我只是创建一系列更新语句以适当的顺序并将它们存储在单个 SSIS SQL 容器或单个存储过程中。是否有关于在这些更新语句之间使用或不使用 GO 命令或 BEGIN END 的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:37:59.360

为什么你认为连续的语句会乱序执行？您对任何语句（例如，等）有特定的锁定提示`UPDLOCK`吗`HOLDLOCK`？否则，如果您有两个连续的语句，A 和 B，并且 A 更改了某些内容，B 将看到该更改。如果您有一些分支或多线程功能，那么在 SSIS 中的工作方式可能会有所不同，但这在存储过程中是不可能的。

也不`GO`是 T-SQL 命令，它是某些客户端工具（如 Management Studio）识别的批处理分隔符。如果您尝试`GO`在存储过程中的两个语句之间放置一个，则会发生以下两种情况之一：

1.  该过程将无法编译（如果开头`BEGIN`没有`END`在 之前的匹配项`GO`）。
2.  该过程将编译（如果没有`BEGIN/END`包装器），但它会比你想象的要短，在第一个`GO`而不是你想要的地方结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:31:37.687

语句完全按照您编写它们的顺序执行。您不需要`GO`或`BEGIN...END`确保顺序。因此，使用其中任何一个都没有效果。它们也与交易无关。

# c# - 如何将数据库查询返回的值与windows窗体中的值进行比较

> ID：15642348
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:29:10.510
> 
> 标签：c#, winforms

我想检查我的数据库中是否存在电子邮件，然后根据返回的值执行进一步的语句......我的代码如下......

```
private void deleterecordbutton_Click(object sender, EventArgs e)
        {
            if (deleterecordtextBox.Text != "")
            {
                MyOleDbConnection.Open();
                string vsql = string.Format("delete from login where Email='{0}'", deleterecordtextBox.Text);
                OleDbCommand vcom = new OleDbCommand(vsql, MyOleDbConnection.vcon);
                vcom.ExecuteNonQuery();
                MessageBox.Show("Record deleted successfully!!");
                MyOleDbConnection.Close();
                deleterecordtextBox.Clear();
                this.Close();
                this.ReferToLogindb.Show();
            }
            else
            {
                MessageBox.Show("No record selected");
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:33:16.250

run a query on the database that counts the number of rows that contain the email address and do a conditional statement on the result to check if its 1 or greater and if so do your other code

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:33:24.243

If you want just to know if a record has been deleted AFTER your query execute, then get the return value from ExecuteNonQuery. It returns the number of rows affected by your command.

If there is no record that matches your query the return value will be zero
[See MSDN docs](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

```
int recordsDeleted = vcom.ExecuteNonQuery();
if(recordsDeleted != 0)
   .....
else
   .... 
```

By the way, your code has a potential problem called Sql Injection and you could have problems with connection not closed correctly. I suggest to change to:

```
using(OleDbConnection oleConn = GetConnection())
{
    oleConn.Open();
    string vsql = "delete from login where Email=@mail";
    OleDbCommand vcom = new OleDbCommand(vsql, oleConn);
    vcom.Parameters.AddWithValue("@mail", deleterecordtextBox.Text);
    int recordsDeleted = vcom.ExecuteNonQuery();
    if(recordsDeleted != 0)
        MessageBox.Show("Record deleted successfully!!");
    else
        MessageBox.Show("Record not found!");
 }
 deleterecordtextBox.Clear();
 ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:57:37.480

除指定的所有其他建议外，更改：

```
if (deleterecordtextBox.Text != "") 
```

至：

```
if (deleterecordtextBox.Text !=string.Empty) 
```

# ruby - Ruby，如何获取数组元素的特定百分比

> ID：15642349
> 
> 赞同：2
> 
> 时间：2013-03-26T16:29:11.200
> 
> 标签：ruby, arrays

在测试环境中，我需要获取特定百分比的数组元素。

我的请求的规格可以在这个测试中描述：

```
def test_percent_elements
  array = [1,2,3,4,5,6,7,8,9,10]

  assert_equal([], array.percent_elements(0))
  assert_equal([1], array.percent_elements(1))
  assert_equal([1], array.percent_elements(10))
  assert_equal([1,2], array.percent_elements(11))
  assert_equal([1,2,3,4,5], array.percent_elements(50))
  assert_equal([1,2,3,4,5,6,7,8,9,10], array.percent_elements(100))
end 
```

在 Ruby 中解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:38:08.290

我会写：

```
class Array
  def percent_elements(percent)
    take((size * percent / 100.0).ceil)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:29:11.200

我的实际做法是这样的：

```
class Array
  def percent_elements(percent)
    total = self.length
    elements = ((total * percent) / 100.to_f).ceil
    self[0, elements]
  end
end 
```

# ruby-on-rails - 删除不显示在个人资料上，但显示在提要上

> ID：15642355
> 
> 赞同：0
> 
> 时间：2013-03-26T16:29:37.080
> 
> 标签：ruby-on-rails, railstutorial.org

我正在关注 MHartl 的 Rails 3.2 书

在第10章中，他为主页和个人资料页面上的微博添加了删除链接

我的问题是删除链接显示主页但不显示个人资料页面。

```
 <% if current_user?(micropost.user) %>
            <%= link_to "delete", micropost, method: :delete,
                     confirm: "You sure?",
                     title: micropost.content %>
      <% end %> 
```

这是用于提要：

```
 <% if current_user?(feed_item.user) %>
             <%= link_to "delete", feed_item, method: :delete,
                     confirm: "You sure?",
                     title: feed_item.content %>
       <% end %> 
```

它是同一个用户，所以我不知道为什么删除链接不会显示。

我的意思是，这不会显示的唯一原因是如果我没有登录，但它显示为 feed_item.user

另外，我已登录，因此它应该显示。如果我创建一个新的微博，它将发布给正确的用户。

任何反馈将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T03:52:30.147

同样的问题发生在我身上，我通过`<% current_user %>`在它之前添加来解决它

# java - 在达到 maxElementsInMemory 之前创建的 DiskMarker

> ID：15642359
> 
> 赞同：0
> 
> 时间：2013-03-26T16:29:49.067
> 
> 标签：java, ehcache

我正在测试东西，目前生成并插入 1048576ish 条目到缓存中。

ehcache 设置为在溢出到磁盘之前接受 1048579 个条目，这很有效。除了甚至在它溢出到磁盘之前，还有 1048576ish DiskMarkers 并且它们使用的堆比我的实际元素少一点。

有没有办法让ehcache在写入磁盘之前不创建DiskMarker？

ehcache.xml 如下：

```
<ehcache>
  <diskStore path="/home/deepy/cache"/>
<cache 
    name="first" 
    maxElementsInMemory="1048579"
    eternal="true"
    overflowToDisk="true"
    memoryStoreEvictionPolicy="LFU"
    diskPersistent="false" />
</ehcache> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:10:00.597

正如[在这里](https://jira.terracotta.org/jira/browse/EHC-1014)向我解释的那样，这是预期的行为。

因此，如果您正在寻找 LFU 缓存，那么选择 ehcache 是没有意义的，除非您的条目比 DiskMarkers 大得多。

# asp.net - 在不更改站点语言的情况下从特定于语言的资源文件中获取价值

> ID：15642360
> 
> 赞同：1
> 
> 时间：2013-03-26T16:29:53.347
> 
> 标签：asp.net, resources, cultureinfo, currentculture

我有几个资源文件，例如

default.aspx.resx、default.aspx.nl.resx、default.aspx.en.resx

现在，当我在荷兰域上时，会加载 default.aspx.nl.resx。但现在我想从 default.aspx.en.resx 访问值并获取属于名称“title”的英文值。

我现在可以通过更改当前的文化服务器端来实现这一点，访问该值然后将其更改回来，如下所示：

```
Dim culture As CultureInfo = New CultureInfo("en")
Threading.Thread.CurrentThread.CurrentCulture = culture
Threading.Thread.CurrentThread.CurrentUICulture = culture
Dim title as String = GetLocalResourceObject("title")
culture = New CultureInfo("nl")
Threading.Thread.CurrentThread.CurrentCulture = culture
Threading.Thread.CurrentThread.CurrentUICulture = culture 
```

但是有更好/更快的方法吗？最好不必更改当前线程的文化，所以我可以定义我想访问哪个资源文件以及使用哪种语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:49:38.857

您可以在参数中添加您的目标文化

```
GetLocalResourceObject("title","YourCulture"); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/ms149953.aspx](http://msdn.microsoft.com/fr-fr/library/ms149953.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T03:05:27.860

编辑：（对不起，我不知道您想要另一种与此不同的方法，但这是我设法做到的唯一方法：）

我设法做到了这一点：

```
var userLanguage = "en-US";

System.Threading.Thread.CurrentThread.CurrentUICulture = System.Globalization.CultureInfo.GetCultureInfo(userLanguage);
System.Threading.Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.GetCultureInfo(userLanguage);

HttpContext.GetGlobalResourceObject("MyAppResource", "KeyThatIWantToGet"); 
```

MyAppResource 是您的 .resx 文件的命名方式，而 KeyThatIWantToGet 会自行解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-08T08:06:01.990

当不使用 HttpContext（一般 .NET 应用程序）时，我使用以下帮助程序：

```
/// <summary>
/// Disposable class that lets us assume a specific culture while executing 
/// a certain block of code. You'd typically use it like this:
/// 
/// using (new CultureContext("de"))
/// {
///     // Will return the German translation of "Please click here"
///     string text = SharedResource.Please_click_here;
/// }
/// </summary>
public class CultureContext : IDisposable
{
    private readonly CultureInfo _previousCulture;
    private readonly CultureInfo _previousUiCulture;

    public CultureContext(CultureInfo culture)
    {
        // Save off the previous culture (we'll restore this on disposal)
        _previousCulture = Thread.CurrentThread.CurrentCulture;
        _previousUiCulture = Thread.CurrentThread.CurrentUICulture;
        Thread.CurrentThread.CurrentCulture = culture;
        Thread.CurrentThread.CurrentUICulture = culture;
    }

    public CultureContext(string cultureCode)
        : this(new CultureInfo(cultureCode))
    {

    }

    /// <summary>
    /// Syntactic sugar so that we can switch to a culture context as follows:
    /// 
    /// using (CultureContext.For("de"))
    /// {
    ///     // Will return the German translation of "Please click here"
    ///     string text = SharedResource.Please_click_here;
    /// }
    /// </summary>
    public static CultureContext For(string cultureCode)
    {
        return new CultureContext(cultureCode);
    }

    public void Dispose()
    {
        // Restore the culture settings that were in place before switching
        // to this context
        Thread.CurrentThread.CurrentCulture = _previousCulture;
        Thread.CurrentThread.CurrentUICulture = _previousUiCulture;
    }
} 
```

# hide - 在 png 中隐藏 tar 文件

> ID：15642361
> 
> 赞同：0
> 
> 时间：2013-03-26T16:29:54.810
> 
> 标签：hide, steganography

我可以简单地在 png 图像中嵌入 tar 文件吗？我试过 cat file.tar image.png > secret.png，但这对我不起作用。有没有人工作的例子？在 ruby​​ 或 python 中会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:46:49.170

为简单起见，您可以使用[stepic](http://domnit.org/blog/2007/02/stepic.html)库。

它会做你想要的开箱即用：

```
 stepic --encode --image-in=plain.png --data-in=data.tar --out=secret.png 
```

解码：

```
 stepic --decode --image-in=secret.png --out=data.tar 
```

您可以从[stepic 网页下载并安装](http://domnit.org/stepic/doc/)

我怀疑您是否会将其用于生命关键数据，但以防万一：

**先加密数据！**

使用图像处理技术从图像中恢复有序数据有点简单。您在图像中编码的内容应具有以下属性，以确保您的安全且不易被发现：

1.  加密安全
2.  与随机噪声无法区分（参见 1.）
3.  足够大，以使图像的所有像素都携带加密数据

我们做最后一个的原因是因为很容易检测到编码数据是否在图像中途停止。你会得到一张图像，其中一半有高噪点，一半没有。在某些情况下，这是肉眼可见的，更不用说知道他们在做什么的人了。

我不知道 stepic 是否能做到这一切。依赖它，风险自负。

# php - php页面上的意外$end

> ID：15642367
> 
> 赞同：0
> 
> 时间：2013-03-26T16:30:10.447
> 
> 标签：php

嘿，我对编程很陌生，想知道是否有人可以帮助我解决这个错误

( ! ) SCREAM: ( ! ) 忽略错误抑制 解析错误: 语法错误, 第 153 行 C:\wamp\www\game\units.php 中的意外 $end

我仍然不明白我是如何在没有错误的情况下将代码放在上面的，所以它在 pastebin 上

[单位.php](http://pastebin.com/BKUHsgby)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:32:05.917

快速搜索得知您打开了 30 个大括号，但只关闭了 27 个。

确保关闭您打开的每个支架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:32:42.527

您缺少. `else`after 语句的右括号`if(!isset($_SESSION['uid'])) {` 。只需在最后一个右大括号之后添加另一个右大括号即可解决此问题，但您可能需要仔细检查所有内容是否正确嵌套，并修复右大括号的缩进`elseif(isset($_POST['untrain'])) {`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:34:38.710

此错误表示您的 {brackets} 未正确匹配

查看您的代码，您永远不会先关闭 yoru if 语句

```
if(!isset($_SESSION['uid'])) {
...
}else{ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:32:10.280

在线`152`添加一个`}`

你少了一个。错误是说“`$end`为什么脚本已经结束，这里应该有更多代码” - 缺少的代码是您忘记关闭的大括号

# c# - 转换日期/时间时 C# 转换失败

> ID：15642368
> 
> 赞同：0
> 
> 时间：2013-03-26T16:30:11.367
> 
> 标签：c#, asp.net

运行 ASP Web 应用程序时出现此异常

**从字符串转换日期和/或时间时转换失败。** 当我调试时，我在下面的代码中得到错误所有关于日期的变量都是 DATETIME 格式。

```
for (int j = 0; j < mapdate.Count; j++)
{
    string mapstartend = "Select Id,CDateTime from MAP1 where Product='" + pro[allpromap] + "' and ProgDate= '" + mapdate[j]+ "' and Channel='" + mapChannel[allmap] + "'";
    SqlCommand mapdat = new SqlCommand(mapstartend, conn);
    SqlDataReader mapdatrdr = mapdat.ExecuteReader();
    while (mapdatrdr.Read())
    {

        mapiddate.Add(mapdatrdr["Id"].ToString(), mapdatrdr.GetDateTime(1));
    }
    mapdatrdr.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:44:19.160

如果这是问题，那么它应该与

> 日期时间.Parse()

但是如果你使用 TryParse() 来检查字符串是否有效会更好。

有关如何使用它的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/6fw7727c.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:54:39.130

尝试这个

```
mapdatrdr.GetDateTime(columnIndex).ToString("dd MMM yyyy"); 
```

它应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:35:39.980

你的日期字段是什么格式的？

尝试使用：

```
Convert.ToDateTime(mapdatrdr["CDateTime"].ToString()); 
```

# java - 我可以使用 JSCH 将远程主机重新添加到 known_host 吗？

> ID：15642369
> 
> 赞同：6
> 
> 时间：2013-03-26T16:30:14.787
> 
> 标签：java, jsch

我希望能够从 known_hosts 中删除远程服务器密钥并再次添加它。远程服务器经常更新，所以我想自动删除远程主机密钥并将其新密钥添加到 known_hosts。我可以从 known_hosts 中删除密钥，尽管它很笨重并且使用 a`Process`而不是通过 JSCH。这可行，但每当我尝试访问服务器时都会遇到此消息：

```
The authenticity of host '192.168.1.1 (192.168.1.1)' can't be established.
RSA key fingerprint is 10:10:30:00:e7:0c:d3:18:cf:ac:42:e2:f3:51:25:bg.
Are you sure you want to continue connecting (yes/no)? 
```

我知道可以使用 UserInfo 绕过此消息，但我使用其他方式连接到远程服务器，例如 a`Process`并且当我运行这些命令时会出现该消息。

是否可以使用 JSCH 从 known_hosts 中删除和添加主机 ID？

**尽管它不使用jsch，但可能相关：**

[如何编写程序（脚本）从 ~/.ssh/known_hosts 中删除过时的主机密钥？](https://stackoverflow.com/questions/1933871/how-can-i-write-a-program-script-to-remove-obsolete-host-keys-from-ssh-know)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T19:12:31.950

是的，您可以使用 JSch 将远程主机条目添加到您的 known_hosts 文件中。正如 Jim Garrison 回答的那样，还有其他方法可以解决这个问题，但这里是如何在您的代码中执行此操作：

首先要明白，默认情况下，如果不指定 known_hosts 文件，JSch 仍然可以工作，它只会在内存中创建一个运行时 known_host 文件，并自动添加条目，只要将 Strict Host Key Checking 设置为 '不'。

如果您确实指定了 Known Hosts 文件，那么当 Strict Host Key Check 设置为“no”时，JSch 将向该文件添加新条目

```
 JSch jsch = new JSch();

        jsch.setKnownHosts(knownHostsFile);
        logger.info("known hosts file set: " + knownHostsFile);

        jsch.addIdentity(privateKey);
        logger.info("rsa private key loaded: " + privateKey);

        Session session = jsch.getSession(user, host, port);
        java.util.Properties config = new java.util.Properties();

        // this setting will cause JSCH to automatically add all target servers' entry to the known_hosts file
        config.put("StrictHostKeyChecking", "no");  
        session.setConfig(config);

        session.connect(); 
```

这不是很安全的行为，但它是一种让 JSCh 为您设置新服务器条目的便捷方式。设置已知主机文件后，我建议将 StrictHostKeyChecking 转回 yes。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:38:59.397

无需以编程方式操作`known_hosts`

```
ssh -oStrictHostKeyChecking=no remote-host 
```

或添加

```
StrictHostKeyChecking no 
```

到`~/.ssh/config`. 阅读`ssh_config(5)`手册页了解详细信息。

# entity-framework - 使用 ORM 的复杂映射

> ID：15642371
> 
> 赞同：0
> 
> 时间：2013-03-26T16:30:22.720
> 
> 标签：entity-framework, nhibernate, orm, ef-code-first

我曾经使用过 Entity Framework Code First 一次，虽然它很容易处理，但我觉得它迫使你与你的 OOP 原则作斗争，因为我倾向于打破许多习惯和设计决策，以便 Code First 可以理解我的实体并映射/阅读它们从分贝像：

*   您不能使用 ReadOnlyCollections
*   您不能拥有复杂类型（值类型）的集合
*   被迫使用 hack 使枚举工作，（大多数市场客户仍然使用 Windows XP）

我还能举几个。我想知道 NHibernate 是否支持上面提到的 Windows XP 上的东西以及其他东西（比如它是否可以与 SQL CE 一起工作）以及不会强迫你改变设计以使其工作的东西。
我想听听 NHibernate 专业人士/专家的意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T22:04:34.600

不确定 ReadOnlyCollections 特别是，因为 NHibernate 需要使用接口，然后使用它自己的集合实现（您可以替换它）。但是您始终可以映射私有字段并使用投影。

其他人开箱即用。

# r - 在 R 中使用 grepl() 匹配和连接字符

> ID：15642373
> 
> 赞同：2
> 
> 时间：2013-03-26T16:30:25.657
> 
> 标签：r, character, concatenation, match

我想使用 grepl() 函数来确定字符向量是否与模式匹配，并根据该模式连接向量中的字符。例如：

```
vec <- c("a","b","a","c","a","c","a","b") 
grepl("[a]", vec)
TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE 
```

我希望 TRUE 之后的所有值都绑定在一起，直到下一个 TRUE ，这样的结果将是一个看起来像这样的向量：

```
"ab", "ac", "ac", "ab" 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:39:50.670

如果你没有结婚`grepl()`：

```
VEC <- paste(vec, collapse="")                # Collapse into single string ...
strsplit(VEC, "(?<=.)(?=a)", perl=TRUE)[[1]]  # ... then split it before each 'a'
# [1] "ab" "ac" "ac" "ab" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:35:30.150

用这个：

```
groups <- cumsum(grepl("[a]", vec))
# > groups
# [1] 1 1 2 2 3 3 4 4
aggregate(vec, by=list(groups=groups), FUN=function(x)paste(x,collapse=""))

#   groups  x
# 1      1 ab
# 2      2 ac
# 3      3 ac
# 4      4 ab 
```

# css - 避免使用 html 5 布局的表格

> ID：15642375
> 
> 赞同：-2
> 
> 时间：2013-03-26T16:30:26.897
> 
> 标签：css, html

问题很简单：如何正确避免表格布局。问题：使用 float:left 的 DIV 布局并不总是有用，因为通常在浏览器拉伸时所有 div 一个一个堆叠在一起......

我有一个容器 div

```
<div id="container"> 
<div id="child1"> </div>
<div id="child2"> </div>
<div id="child3"> <div>
</div> 
```

容器 100% 页面。子 1、2 宽度固定宽度（例如 300px）和第 3 宽度可变宽度 30%

我希望他们不要在浏览器拉伸时将一个堆放在另一个上。有可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:36:15.967

[http://thoughtsandideas.wordpress.com/2010/07/15/introduction-to-div-based-layout/](http://thoughtsandideas.wordpress.com/2010/07/15/introduction-to-div-based-layout/)

不要使用表格进行布局。也许链接可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:36:37.610

您应该始终避免使用`<table>`for 布局。 `<table>`用于显示表格数据。这就是它的目的。如果您在该目的之外使用它，那么您使用它是错误的。此外，如果您无法使用 float 或 display: inline 实现您想要的布局，那么您很可能做错了，或者需要一点 javascript 来帮助您，直到 flexbox 功能得到完全实现和支持。

在这里查看这篇文章以获得进一步的解释：[为什么不在 HTML 中使用表格进行布局？](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)

# php - 在 PHP 中使用保留键反转关联数组

> ID：15642376
> 
> 赞同：10
> 
> 时间：2013-03-26T16:30:31.080
> 
> 标签：php, arrays, associative-array

我花了半个小时，但我还没有找到解决办法。

以下数组示例：

```
array(14) {
  ["label_text"]=> string(10) "Label text"
  ["e-mail"]=> string(6) "E-Mail"
  ["company"]=> string(7) "Company"
  ["last_name"]=> string(9) "Last name"
  ["first_name"]=> string(10) "First name"
} 
```

我想要做的只是反转元素，所以结果是这样的：

```
array(14) {
  ["first_name"]=> string(10) "First name"
  ["last_name"]=> string(9) "Last name"
  ["company"]=> string(7) "Company"
  ["e-mail"]=> string(6) "E-Mail"
  ["label_text"]=> string(10) "Label text"
} 
```

必须有一个本机php，但我认为我是盲人。我只是不知道该使用哪个功能。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T16:32:42.267

使用[array_reverse()](http://www.php.net/manual/en/function.array-reverse.php)。

> 数组 array_reverse ( 数组 $array [, bool $preserve_keys = false ] )
> 
> 接受一个输入数组并返回一个元素顺序颠倒的新数组。

注意：确保您阅读了有关所述函数的第二个参数的文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:32:21.813

反向函数**array_reverse**呢？

```
$reversed = array_reverse($array, true); 
```

文档： http: [//php.net/manual/en/function.array-reverse.php](http://php.net/manual/en/function.array-reverse.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T16:32:29.563

您正在寻找以下[`array_reverse()`](http://php.net/manual/en/function.array-reverse.php)功能：

```
$new_array = array_reverse($old_array); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-03-29T21:25:27.603

这样做：

```
$reversed = array_combine(
   array_reverse(array_keys($arr)),
   array_reverse(array_values($arr))
); 
```

# alfresco - 如何允许在 Alfresco 文件浏览窗口中选择多个文件？

> ID：15642382
> 
> 赞同：1
> 
> 时间：2013-03-26T16:30:45.933
> 
> 标签：alfresco

如何允许在 Alfresco 文件浏览窗口中选择多个文件？目前当用户点击“浏览”按钮时，会显示文件浏览窗口，用户只能选择一个文件。是否可以允许多个文件选择？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:15:48.387

出于某种原因，您没有让 Flash 上传器出现。要么它在您的安装中被禁用，要么您没有安装正确的闪存版本。在以后的版本中，有拖放支持。但是，由于 Microsoft 没有实现所有 html5，因此这不适用于 ie 浏览器。

# android - Intent-Filter 无法正确响应内容

> ID：15642383
> 
> 赞同：2
> 
> 时间：2013-03-26T16:30:45.987
> 
> 标签：android, android-intent, intentfilter

我无法让我的应用程序响应`content`过滤器方案。

我有一个`intent-filter`

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="*"
                android:mimeType="*/*"
                android:pathPattern=".*\\.riley"
                android:scheme="content" />
        </intent-filter> 
```

但是，这不会从我的 gmail 中打开 .riley 文件。如果我删除该方案，如下所示：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="*"
                android:mimeType="*/*"
                android:pathPattern=".*\\.riley" />
        </intent-filter> 
```

这现在将从我的 gmail 打开文件。我想它一定不是来自`content`计划，那么。所以我像这样记录了我的意图：

```
System.out.println("Intent\nScheme: " + intent.getScheme() + "\nAction: " + intent.getAction() + "\nFlags: " + intent.getFlags() + "\nPackage: " + intent.getPackage() + "\nMIME: " + intent.getType() + "\nData: " + intent.getData());
System.out.println("Intent\nScheme: " + intentUri.getScheme() + "\nPath: " + intentUri.getPath() + "\nHost: " + intentUri.getHost() + "\nTo String: " + intentUri.toString()); 
```

我的日志是这样的：

```
03-26 11:17:44.123: I/System.out(8796): Intent
03-26 11:17:44.123: I/System.out(8796): Scheme: content
03-26 11:17:44.123: I/System.out(8796): Action: android.intent.action.VIEW
03-26 11:17:44.123: I/System.out(8796): Flags: 50855937
03-26 11:17:44.123: I/System.out(8796): Package: null
03-26 11:17:44.123: I/System.out(8796): MIME: application/vnd.riley
03-26 11:17:44.123: I/System.out(8796): Data: content://gmail-ls/emailaddress@gmail.com/messages/5277/attachments/0.1.7/BEST/false
03-26 11:17:44.133: I/System.out(8796): Intent
03-26 11:17:44.133: I/System.out(8796): Scheme: content
03-26 11:17:44.133: I/System.out(8796): Path: /emailaddress@gmail.com/messages/5277/attachments/0.1.7/BEST/false
03-26 11:17:44.133: I/System.out(8796): Host: gmail-ls
03-26 11:17:44.133: I/System.out(8796): To String: content://gmail-ls/emailaddress@gmail.com/messages/5277/attachments/0.1.7/BEST/false 
```

这让我很困惑，因为路径实际上并没有以“.riley”结尾，但是如果我将 MIME 类型设置为检查“.riley”，则`intent-filter`停止工作。

**为了正确打开它，我`intent-filter`应该做什么，为什么我的第一个示例不起作用？**

# android - Android - 是否有可能拥有硬件交互方法的内容提供者？

> ID：15642387
> 
> 赞同：1
> 
> 时间：2013-03-26T16:30:51.433
> 
> 标签：android, embedded, hardware, reusability

我工作的公司是定制的运行 Android 的硬件。它将连接到相当多的外围组件。关键是该设备是为另一家公司服务的。

我知道使用 ContentProvider，可以在应用程序之间共享数据。但是，我想知道的是，与硬件交互的方法（GPIO 交互）是否可以以某种方式存储，以便任何应用程序都可以使用它们。

例如，假设设备具有映射到 LED 的某个 GPIO 引脚。您创建了一个使 LED 闪烁的方法，在您的应用程序中使用它，然后将设备交给其他人并希望隐藏代码，但再次使用 LED 闪烁方法。这不是必需的，但可以允许另一家公司构建另一个应用程序来补充我们随设备提供的应用程序。

任何见解都会有所帮助。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:51:05.933

您可以`ContentProvider`像使用 REST Web 界面一样使用

从应用程序：

```
Uri ledUri = Uri.parse("content://your.app/led");
ContentResolver cr = getContentResolver();

// "write" data
ContentValues cv = new ContentValues();
cv.put("state", 1);
cr.insert(ledUri, cv);

// read data
int newState = 0;
Cursor c = cr.query(ledUri, new String[] { "state" }, null, null, null);
if (c.moveToFirst()) {
    newState = c.getInt(0);
} 
```

在您的提供者内部，您只需设置/读取 GPIO 状态，而不是将数据写入数据库。大致喜欢

```
@Override
public Uri insert(Uri uri, ContentValues values) {
    if (uri.toString().equals("content://your.app/led")) {
        int requestedState = values.getAsInteger("state");
        set_gpio_state(requestedState);
    }
} 
```

如何从 Java 访问 GPIO 是另一个问题，因为它们（AFAIK）只能在内核级别访问。

# emacs - 导出到 LaTeX 时，使 org-mode 表格标题出现在表格下方

> ID：15642388
> 
> 赞同：13
> 
> 时间：2013-03-26T16:30:57.107
> 
> 标签：emacs, latex, org-mode

我正在生成一个文档，`org-mode`其中包含很多表格，这些表格是使用内置表格功能构建的。我已经为表格添加了标题，但是当我将它们导出到 时`LaTeX`，而不是出现在表格下方的标题，它出现在它的上方。[在表格](http://orgmode.org/manual/Tables-in-LaTeX-export.html#Tables-in-LaTeX-export)和[乳胶导出文档](http://orgmode.org/worg/org-tutorials/org-latex-export.html#sec-13)的手册部分中，除了`LaTeX`手动摆弄代码之外，没有提及任何更改此方法的方法。作为说明，以下代码片段显示了导出在带有标题的示例表上生成的内容。

```
#+CAPTION: Results using two methods with different parameter settings.
#+LABEL: tbl:rescomp
| Parameter | Result 1 | Result 2 |
|-----------+----------+----------|
|       0.5 |      0.1 |      0.8 |
|         1 |      0.8 |      0.1 | 
```

出口：

```
\begin{table}[htb]
\caption{Results using two methods with different parameter settings.}
\label{tbl:rescomp}
\begin{center}
\begin{tabular}{rrr}
 Parameter  &  Result 1  &  Result 2  \\
\hline
       0.5  &       0.1  &       0.8  \\
         1  &       0.8  &       0.1  \\
\end{tabular}
\end{center}
\end{table} 
```

这个问题可以很简单地解决。标题出现在文档中的表格上方，因为它在代码中的表格上方。将标题定义移动到表格部分下方可解决此问题：

```
\begin{table}[htb]

\begin{center}
\begin{tabular}{rrr}
 Parameter  &  Result 1  &  Result 2  \\
\hline
       0.5  &       0.1  &       0.8  \\
         1  &       0.8  &       0.1  \\
\end{tabular}
\end{center}
\caption{Results using two methods with different parameter settings.}
\label{tbl:rescomp}
\end{table} 
```

将标题定义放在 org 文件中的表格下方是不可能的，因为它定义了*下一个*表格的标题，如[手册](http://orgmode.org/manual/Images-and-tables.html)中所述。有什么方法可以`org-mode`导出生成的表格下方的标题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-02T17:08:55.450

只需更新答案，`Org-mode version 8.3.2`因为设置`org-export-latex-table-caption-above`为`nil`现在什么都不做。

我将下一行添加到我的`.emacs`or`init.el`文件中：

```
(setq org-latex-caption-above nil) 
```

顺便说一句，该变量`(table)`默认包含值，这是我们要覆盖的值`nil`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T18:20:33.277

在[NN](https://stackoverflow.com/users/789593/n-n)发布的[链接](http://comments.gmane.org/gmane.emacs.orgmode/47227)中，应用了一个补丁来实现允许将字幕放置在浮动上方或下方的功能。查看[github](https://github.com/hdweiss/org-mode/blob/4721052ec68bd85f4bffb5039bb89c6dfa1b5cc5/lisp/org-latex.el#L367)上的 org-mode 代码，Emacs 24.1 的默认行为是在表格上方放置标题。要将标题放在表格下方，请将变量设置为：`org-export-latex-table-caption-above``nil`

```
M-x customize-variable RET org-export-latex-table-caption-above RET nil 
```

或者

```
M-x set-variable RET org-export-latex-table-caption-above RET nil 
```

# emacs - StringTemplate 的 Emacs 模式

> ID：15642389
> 
> 赞同：0
> 
> 时间：2013-03-26T16:30:58.660
> 
> 标签：emacs, stringtemplate, stringtemplate-4

[StringTemplate Java 模板引擎](http://www.stringtemplate.org/)是否有可用的 Emacs 模式？

# grails - grails neo4j插件获取bean错误

> ID：15642391
> 
> 赞同：0
> 
> 时间：2013-03-26T16:31:03.567
> 
> 标签：grails, neo4j

在我的 grails 项目上运行应用程序时出现此错误

```
Error 2013-03-26 12:27:06,100 [localhost-startStop-1] ERROR context.GrailsContextLoader  - Error initializing the application: Error creating bean with name 'neo4jDatastore': Cannot resolve reference to bean 'graphDatabaseService' while setting bean property 'graphDatabaseService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'graphDatabaseService': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.neo4j.kernel.EmbeddedGraphDatabase]: Constructor threw exception; nested exception is java.lang.IllegalStateException: Unable to lock store [/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
Message: Error creating bean with name 'neo4jDatastore': Cannot resolve reference to bean 'graphDatabaseService' while setting bean property 'graphDatabaseService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'graphDatabaseService': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.neo4j.kernel.EmbeddedGraphDatabase]: Constructor threw exception; nested exception is java.lang.IllegalStateException: Unable to lock store [/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
Line | Method
->> 117 | postProcessBeanFactory in org.grails.datastore.gorm.plugin.support.PersistenceContextInterceptorAggregator 
```

* * *

```
|   303 | innerRun               in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . .  in java.util.concurrent.FutureTask
|   895 | runTask                in java.util.concurrent.ThreadPoolExecutor$Worker
|   918 | run . . . . . . . . .  in     ''
^   680 | run                    in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'graphDatabaseService': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.neo4j.kernel.EmbeddedGraphDatabase]: Constructor threw exception; nested exception is java.lang.IllegalStateException: Unable to lock store [/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
->> 117 | postProcessBeanFactory in org.grails.datastore.gorm.plugin.support.PersistenceContextInterceptorAggregator
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   303 | innerRun               in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . .  in java.util.concurrent.FutureTask
|   895 | runTask                in java.util.concurrent.ThreadPoolExecutor$Worker
|   918 | run . . . . . . . . .  in     ''
^   680 | run                    in java.lang.Thread

Caused by BeanInstantiationException: Could not instantiate bean class [org.neo4j.kernel.EmbeddedGraphDatabase]: Constructor threw exception; nested exception is java.lang.IllegalStateException: Unable to lock store [/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
->> 117 | postProcessBeanFactory in org.grails.datastore.gorm.plugin.support.PersistenceContextInterceptorAggregator
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   303 | innerRun               in java.util.concurrent.FutureTask$Sync
|   138 | run . . . . . . . . .  in java.util.concurrent.FutureTask
|   895 | runTask                in java.util.concurrent.ThreadPoolExecutor$Worker
|   918 | run . . . . . . . . .  in     ''
^   680 | run                    in java.lang.Thread

Caused by IllegalStateException: Unable to lock store [/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db/neostore.relationshiptypestore.db.names], this is usually a result of some other Neo4j kernel running using the same store.
->> 178 | checkStorage           in org.neo4j.kernel.impl.nioneo.store.CommonAbstractStore
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   119 | <init>                 in     ''
|    71 | <init> . . . . . . . . in org.neo4j.kernel.impl.nioneo.store.AbstractDynamicStore
|    47 | <init>                 in org.neo4j.kernel.impl.nioneo.store.DynamicStringStore
|   111 | newDynamicStringStore  in org.neo4j.kernel.impl.nioneo.store.StoreFactory
|   117 | newRelationshipTypeStore in     ''
|    93 | attemptNewNeoStore . . in     ''
|    82 | newNeoStore            in     ''
|   232 | <init> . . . . . . . . in org.neo4j.kernel.impl.nioneo.xa.NeoStoreXaDataSource
|   457 | create                 in org.neo4j.kernel.InternalAbstractGraphDatabase
|   227 | run . . . . . . . . .  in     ''
|    79 | <init>                 in org.neo4j.kernel.EmbeddedGraphDatabase
|    70 | <init> . . . . . . . . in     ''
|   117 | postProcessBeanFactory in org.grails.datastore.gorm.plugin.support.PersistenceContextInterceptorAggregator
|   303 | innerRun . . . . . . . in java.util.concurrent.FutureTask$Sync
|   138 | run                    in java.util.concurrent.FutureTask
|   895 | runTask . . . . . . .  in java.util.concurrent.ThreadPoolExecutor$Worker
|   918 | run                    in     ''
^   680 | run . . . . . . . . .  in java.lang.Thread 
```

任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:40:21.107

[与neo4j 控制台失败](https://stackoverflow.com/questions/15415303/neo4j-console-fails)的答案几乎相同

您的例外包含-

> 构造函数抛出异常；嵌套异常是 java.lang.IllegalStateException: Unable to lock store [/usr/local/Cellar/neo4j/community-1.8.1-unix/libexec/data/graph.db/neostore.relationshiptypestore.db.names]，这是通常是其他一些 Neo4j 内核使用同一存储运行的结果。

这是不言自明的。

# c# - 根据数据源值在单元格中显示“NaN”

> ID：15642393
> 
> 赞同：1
> 
> 时间：2013-03-26T16:31:10.847
> 
> 标签：c#, .net, wpf

我的数据网格单元格上有一个样式，定义如下：

```
<Style TargetType="{x:Type Editors:XamNumericEditor}" x:Key="MyVisibleStyle" BasedOn="{StaticResource InPointStyle}">
    <Setter Property="Mask" Value="-nnnnnnnnnnn.nnnn"/>
    <Setter Property="Format" Value="#,##0.000;-#,##0.000" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=DataItem.IsPermissioned}" Value="False" >
            <Setter Property="Visibility" Value="Hidden" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

所以根据`DataItem.IsPermissioned`我设置单元格的可见性的值。

我该如何更改它以便`IsPermissioned=false`在单元格中显示“NaN”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:52:16.120

您需要替换 content 属性。因此，使用下面的部分或根据单元格模式添加您自己的内容。

```
<Setter Property="Content" Value="NaN" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:50:11.183

您是否尝试创建一个实现 IValueConverter 的转换器？

在绑定中，您会像使用它一样使用它

`Binding="{Binding Path=Something, Converter={StaticResource yourConverter}}"`

你的转换器会是这样的

`public object Convert(object value, Type targetType, object parameter, CultureInfo culture) { if (validation on the value) { return "NaN" } }`

# c++ - c++程序不会编译

> ID：15642394
> 
> 赞同：0
> 
> 时间：2013-03-26T16:31:15.747
> 
> 标签：c++, compiler-construction

```
#include <fstream>
#include <vector>
#define maxn 200000
#include <algorithm>

using namespace std;

class automat {
    vector<pair<int, char> > Q[maxn];
    int *validare;
    int *p;
    int init, st_fin, n, m, i, a, b;
    char c;
    public: automat(char*);
    // void operator +=(automat);
};

automat::automat(char *s) {
    ifstream f(s);
    f >> n >> m >> init >> st_fin;
    validare = new int[n];
    p = new int[n];
    for (i = 1; i <= st_fin; i++) {
        f >> p[i];
    }
    for (i = 0; i < m; i++) {
        f >> a >> b >> c;
        Q[a].push_back(make_pair(b, c));
    }
}

int main() {
    automat M("input.txt");
    return 0;
} 
```

它不会编译。你能帮我告诉我为什么吗？它给了我 cc1plus.exe 停止工作的消息，我真的不知道为什么。我是 OOP 的新手，所以如果你能帮助我，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:34:18.117

`automat M;`尝试调用不带参数的构造函数（默认构造函数）。如果您没有定义自己的构造函数，编译器只会为您隐式生成默认构造函数。但是，您已经定义了一个`automat`带有`char*`参数的构造函数。你需要通过一个`char*`. 例如，您可能想要执行以下操作：

```
char filename[] = "file.txt";
automat M(filename); 
```

这依赖于数组到指针的转换，将`filename`数组转换为指向其第一个元素的指针。

* * *

由于 MinGW 的一个已知问题，编译器正在崩溃。原因是您试图`std::vector`在堆栈上分配 200000 秒。大多数环境的堆栈限制约为 1MB。您很容易发生堆栈溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:34:24.433

`automat`没有默认构造函数，所以你不能这样做：

```
automat M; 
```

一旦你声明了一个构造函数，编译器就不再为你生成一个默认构造函数。你已经声明了这个：

```
automat(char*); 
```

所以编译器不再综合`automat();`你需要决定是否需要默认构造，在这种情况下你需要添加一个默认构造函数。如果没有，则`automat`使用`char*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:48:23.500

Program specified above compiles successfully but it crashes at runtime and the crash is not due to default constructor not provided!

The crash when compiler tries to create

```
vector<pair<int, char> > Q[maxn]; 
```

And the reason is this huge maxn

Currently it is defined as

```
#define maxn 200000 
```

And crash occurs while creating this huge vector on stack, change it to some smaller value i.e. 200 and you should not see any crash! Or otherwise you need to change stack size!

I was able to reproduce it on Visual Studio 10, in VS we can change stack size as specified in [http://msdn.microsoft.com/en-us/library/tdkhxaks(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/tdkhxaks(v=vs.71).aspx) similarly we can also change for GCC [http://www.cs.nyu.edu/exact/core/doc/stackOverflow.txt](http://www.cs.nyu.edu/exact/core/doc/stackOverflow.txt)

# cocoa - 如何获取 Mac OS X 的活动桌面 ID？

> ID：15642398
> 
> 赞同：0
> 
> 时间：2013-03-26T16:31:27.303
> 
> 标签：cocoa, api, desktop, spaces

当您有多个桌面时，有没有办法在 Mac OS X 中获取活动桌面的 ID。我没有找到相应的方法或 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T00:15:04.237

如果您看一下，`~/Library/Preferences/com.apple.spaces.plist`它似乎包含一个空间列表及其按窗口编号组织的窗口。每个空间都有一个名称（前两个似乎是仪表板和空字符串，我假设它是第一个默认桌面）。如果您可以获得对窗口编号的引用，您可以尝试在此 plist 结构中找到它以确定它当前所在的空间。这可能对您有用，也可能对您没有用，具体取决于您尝试使用此信息做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:41:08.063

用于`HIWindowGetCGWindowID`获取`CGWindowID`适合您的`WindowRef`.

将该 ID 与`CGWindowListCreateDescriptionFromArray`from一起使用`CGWindow.h`以获取有关您的窗口的信息。

查看返回的字典并提取（可选）`kCGWindowWorkspace`键。

**那是您窗口的空间 ID。**

资料来源：[如何在 Mac OS X Leopard 中检测用户所在的空间？](https://stackoverflow.com/questions/554380/how-to-detect-which-space-the-user-is-on-in-mac-os-x-leopard)

# php - 撇号前的Mysql重复条目

> ID：15642399
> 
> 赞同：1
> 
> 时间：2013-03-26T16:31:27.943
> 
> 标签：php, mysql, codeigniter, activerecord

我正在尝试使用 activerecord 使用 codeigniter 导入一些数据。我收到这个错误，对我来说没有任何意义

```
<p>Error Number: 1062</p>
<p>Duplicate entry 'L'' for key 'brand'</p>
<p>INSERT INTO `brands` (`brand`) VALUES ('L\'awlek')</p> 
```

我对brands 表有一个UNIQUE 约束，因为我不想重复。我的问题是，为什么它会在第一个撇号处切断价值并声称这是关键？

相关代码：

```
define('TABLE','brands');

function add( $data ){
    $exists = $this->exists( $data['brand'] );
    if( ! $exists )
        $query = $this->db->insert( TABLE , $data);

    return ! $exists ? $this->db->insert_id() : $exists;
}

function exists( $value ){

    $query = $this->db->get_where( TABLE , array('brand'=>$value));

    if( $query && $query->num_rows() > 0 ){
        return $query->row()->id;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:51:45.630

我认为您正在将数组传递给`$data`function `add`。

在`add`中，您将`$data`数组传递给函数`exists`。

在`exists`中，您将数组视为变量，这意味着您的 SQL 语句不是您所期望的。结果，您找不到先前存在的记录，因此找不到重复的关键消息。

一个简单的修复可能是这样的：

```
function exists( $data ){

    $query = $this->db->get_where( TABLE , $data);

    if( $query && $query->num_rows() > 0 ){
        return $query->row()->id;
    } else {
        return false;
    }
} 
```

**更多细节**
在下面的语句中，if`$value`是一个数组。

```
$query = $this->db->get_where( TABLE , array('brand'=>$value)); 
```

将评估为：

```
$query = $this->db->get_where( TABLE , array('brand'=>'Array')); 
```

这就是您的查询返回 false 的原因，因为 'Array' 不是您表中的品牌。

**PS**
根据导致调用函数的事件顺序，可能还会发生其他事情，但是在寻找其他更微妙的问题之前，应该修复这个明显的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:37:26.393

谢谢您的帮助！

一位开发人员针对数据集运行了这个 perl 脚本。我假设撇号是一个“聪明的报价”。该脚本删除了所有非 ascii 字符，并在之后工作。也许它会帮助那里的其他人。

```
perl -i.bak -pe 's/[^[:ascii:]]//g' data.sql 
```

# php - 如何使用javascript刷新表格单元格

> ID：15642405
> 
> 赞同：1
> 
> 时间：2013-03-26T16:31:39.740
> 
> 标签：php, javascript, jquery, ajax

我有一个显示股票价格的表格，但我想在页面上自动更新股票价格，而无需用户刷新页面。我试过这个

```
$(document).ready(function(){
    var updater = setTimeout(function(){
        $('.table #price').load('index.php', 'update=true');
    },6);
}); 
```

这似乎可行，但它将整个表格放在单元格中。我只想刷新价格单元格。任何帮助将不胜感激，因为我是 JavaScript 新手。我也在这里发布其他文件。

这是portfolio.php

```
<table class="table table-hover center-table table-bordered">
        <tr>
        <th>Symbol</th>
        <th>Name</th>
        <th>Shares</th>
        <th>Price</th>
        <th>Total</th>
        </tr>
<?php foreach ($shares as $row): ?>

        <tr>
        <td><?= $row["symbol"]?></td>
        <td><?= $row["name"]?></td>
        <td><?= $row["shares"]?></td>
        <td id="price">$<?= number_format($row["price"],2)?></td>
        <td>$<?= number_format($row["total"],2)?></td>
        </tr>

<? endforeach ?>

<tr>
    <td>CASH</td>
    <td></td>
    <td></td>
    <td></td>
    <td>$<?= number_format($cash[0]["cash"], 2)?></td>

</tr>

</table>

<script type="text/javascript" src="js/update.js" ></script> 
```

这是 index.php

```
<?php

// configuration
require("../includes/config.php"); 

//query user's portfolio

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);
$cash = query("SELECT cash FROM users WHERE id = ?", $_SESSION["id"]);

    //create array to store the shares
    $shares = [];

    //for each of the user info

    foreach($rows as $row){

        //lookup stock info
        $stock = lookup($row["symbol"]);
        if($stock !== false){

            $shares[] = [
                "name" => $stock["name"],
                "price" => $stock["price"],
                "shares" => $row["shares"],
                "symbol" => $row["symbol"],
                "total" => $row["shares"]*$stock["price"]

            ];

        }
    }

// render portfolio
render("portfolio.php", ["shares" => $shares,"cash" => $cash, "title" => "Portfolio"] );   
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:55:50.577

您的 javascript 会将 index.php 的整个结果放在单元格中，这不是您想要的。您必须修改您的 php 页面以仅回显要在单元格中显示的数据。

类似的东西应该可以解决问题（根据需要进行修改）：

```
// ...code to calculate $price...
if (isset($_GET['update'])){
    echo $price;
    exit();
} 
```

PS：您也可以使用另一个 PHP 页面返回 $price，这可能比每次要更新价格时调用 index.php 更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:46:32.243

在 Jquery 中你可以要求 AJAX 返回某个 div 的唯一值

```
$(document).ready(function(){
    var updater = setTimeout(function(){
        $('.table #price').load('index.php #price', 'update=true');
    },6);
}); 
```

注意：在上面的代码中，我假设带有 update=true 参数的 index.php 也将具有相同的索引页面，并且价格已更新

# java - 下载谷歌应用引擎数据库（java项目）

> ID：15642408
> 
> 赞同：0
> 
> 时间：2013-03-26T16:31:46.763
> 
> 标签：java, google-app-engine, google-cloud-datastore, bulkloader

我会下载谷歌应用引擎数据存储。我正在遵循几个指南，但没有一个对我有帮助。我的 web.xml 文件已正确设置为使用 remote_api。我已经安装了 python sdk 和相关的 google appengine 启动器。

我在 ../Google/google_appengine 中运行这些说明：

```
bulkloader.py --dump --application=appID --url=http://appID.appspot.com/remote_api --filename=x.dump 
```

结果是：“有 11 个实体，0 个之前转移过”；“11 个实体在 .. 秒内转移”

但是我没有找到这个文件，所以我不知道是否发生了下载。我必须先创建 .dump 文件，否则它会自动创建。“--download_data”命令也有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:52:08.490

如果更改 --filename 路径（保存 .dump 文件的位置），它会起作用。可能 ../Google/google_appengine 文件夹受到保护。

# javascript - jQuery $.change 在一个地方工作，但不是另一个地方

> ID：15642411
> 
> 赞同：0
> 
> 时间：2013-03-26T16:31:58.913
> 
> 标签：javascript, jquery, html

基本上，如果在特定 DIV 中更改了任何文本字段，我想从另一个 DIV 中清空 HTML。

HTML：

```
<div class="row">

<div class="span4">

    <h3 class="heading" data-toggle="collapse" data-target="#shipper">Shipper Information</h3>

    <div class="bg-light collapse in bg-light" id="shipper">

        <label>Name</label>
        <input type="text" id="shipper_name" />

        <label>Address 1</label>
        <input type="text" id="shipper_address1" />

        <label>Address 2</label>
        <input type="text" id="shipper_address2" />

        <label>City</label>
        <input type="text" id="shipper_city" />

        <label>State</label>
        <input type="text" id="shipper_state" />

        <label>Zip</label>
        <input type="text" id="shipper_zip" /> 

    </div>

</div>

<div class="span4">

    <h3 class="heading" data-toggle="collapse" data-target="#consignee">Consignee Information</h3>

    <div class="bg-light collapse in bg-light" id="consignee">

        <label>Name</label>
        <input type="text" id="consignee_name" />

        <label>Address 1</label>
        <input type="text" id="consignee_address1" />

        <label>Address 2</label>
        <input type="text" id="consignee_address2" />

        <label>City</label>
        <input type="text" id="consignee_city" />

        <label>State</label>
        <input type="text" id="consignee_state" />

        <label>Zip</label>
        <input type="text" id="consignee_zip" />

    </div>

</div> 
```

查询：

```
$('#shipper').find('input:text').change(function(){
    alert('I changed.');
    carriersClear('Shipper Details Changed');
    return false;
});

$('#consignee').find('input:text').change(function(){
    alert('I changed.');
    carriersClear('Consignee Details Changed');
    return false;
}); 
```

该`#consignee`版本运行良好，`#shipper`但没有任何意义，因为它们基本相同。

我的控制台也没有任何错误。

**编辑：我有另一个名为托运人的 Div。（是的。我是个白痴。）** 给每个人的教训：Ctrl+F 可以成为你最好的朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:37:23.990

我认为您的问题在于`carriersClear()`. 但这有效：

```
$('input[type="text"]', '#shipper').on('change', function(){
    console.log("I changed.");
    carriersClear('Shipper Details Changed');
    //No need to return false.
});

$('input[type="text"]', '#consignee').on('change', function(){
    console.log("I changed.");
    carriersClear('Consignee Details Changed');
}); 
```

这也将起作用：

```
//Here we assign only one event handler to #consignee.
$('#consignee').on('change', 'input[type="text"]', function(e){
    console.log("I changed.");
    carriersClear('Consignee Details Changed');
}); 
```

我建议您观看有关事件处理程序的[视频以便更好地理解。](http://training.bocoup.com/screencasts/more-efficient-event-handlers/)

这是一个[小提琴](http://jsfiddle.net/EZJ6w/4/)

# html - 使用 apache mod_proxy 缺少 Doctype HTML 部署

> ID：15642412
> 
> 赞同：4
> 
> 时间：2013-03-26T16:32:04.937
> 
> 标签：html, apache, tomcat, doctype, mod-proxy

我有一个奇怪的问题...

我的 Vaadin 应用程序在我的计算机（本地）上运行良好。我刚刚部署了网站，现在我遇到了一个问题：

第一行中的`<!Doctype html>`标记丢失。我不知道为什么会这样，但我认为这会导致一些问题，因为该网站正在以 Quirks 模式显示。

有趣的是，当我在本地运行应用程序时，设置了 doctype 标签。

我只是将应用程序导出到一个 war 文件并部署它。

到目前为止，我还没有在互联网上找到任何解决方案......

这是Tomcat设置问题还是其他问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T19:05:08.207

已经发现问题了！

我正在使用 Apache`mod_proxy`来处理我的 Web 应用程序。html 文档类型未在`proxy_html.conf`. 我只需要`ProxyHTMLDocType`在`proxy_html.conf`.

`proxy_html.conf`：

```
ProxyHTMLDocType "<!DOCTYPE html>" // Sets the Doctype to HTML5 
```

有关更多信息，请参见：

[http://www.xinotes.org/notes/note/762/](http://www.xinotes.org/notes/note/762/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:44:49.647

很抱歉将其发布为答案（我仍然无法评论帖子:(），但请确保您的本地 tomcat 和生产 tomcat 是相同的版本。您也可以尝试不将您的项目打包为 war 文件，而是停止服务器（当然，如果您被允许）并自己复制项目以确保这不是战争包装问题

# foreach - 带有 c:forEach、ace:dataTable 和 IceSoft Wiki 示例的动态列

> ID：15642417
> 
> 赞同：1
> 
> 时间：2013-03-26T16:32:11.133
> 
> 标签：foreach, jstl, dynamic-programming, icefaces-3, ace-datatable

我们正面临动态列的问题。我们有一个表，其中的列取决于一些先前选择的过滤器。当您进入页面时，您可以选择年份和其他一些标准，并使用这些值呈现表格。我们的问题是，当您选择不同的标准时，列可能会有所不同，这是一个问题，因为 c:forEach 不是那么动态的。

如果您查看 IceSoft Wiki 中提供的示例，您会看到与我们的代码类似的内容（但我们的代码要复杂得多）： http: [//www.icesoft.org/wiki/display/ICE/DataTable+动态+列](http://www.icesoft.org/wiki/display/ICE/DataTable+Dynamic+Columns)

问题来自这句话：

```
<c:forEach items="#{backing.columns}" var="colModel"> 
```

**backing.columns**是静态的。但是如果你改变它的元素数量（在这个例子中它没有意义，因为“列”列表中的值与任务类中的属性匹配，但是如果你打印一个列表而不是列表）你就会遇到问题，如下所述： [http://drewdev.blogspot.com.es/2008/08/cforeach-with-jsf-could-ruin-your-day.html](http://drewdev.blogspot.com.es/2008/08/cforeach-with-jsf-could-ruin-your-day.html)

当我们更改列时，我们尝试重新创建组件列表：

```
component.getChildren().clear(); //component is of UIComponent type 
```

但是没有用。我们还尝试从 PhaseListener 的上下文中恢复视图，但没有积极的结果。我们已经没有想法了。

任何想法（或解决方案：D）将不胜感激。如果有人需要更具体的代码，请问。

TIA。

PS：这个问题也发布在ICEFaces论坛（[http://www.icesoft.org/JForum/posts/list/0/21842.page#76787](http://www.icesoft.org/JForum/posts/list/0/21842.page#76787)），我会更新两个地方的解决方案（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T08:55:36.800

我们已经解决了这个问题，正如我们在 IceSoft 论坛上所建议的那样，将导航重定向到同一页面以获得全新的组件树。为此，您需要将您的状态置于一个能够生存的 bean 中，但由于我们的支持 bean 通常是视图范围的，所以这不是问题。为了实现这一点，我们更改了 valueChangeListener 方法，该方法正在更改 **c:foreach**后面的列表并使用了一个 action 方法，在这个 action 方法中，我们返回**null**作为导航规则以重新加载页面。

查看更多信息：http: [//www.icesoft.org/JForum/posts/list/21842.page#sthash.sXtPazmS.dpuf](http://www.icesoft.org/JForum/posts/list/21842.page#sthash.sXtPazmS.dpuf)

# c# - .NET 关于文件路径的奇怪行为

> ID：15642420
> 
> 赞同：6
> 
> 时间：2013-03-26T16:32:19.343
> 
> 标签：c#, .net, windows, file-io, pathname

我通过谷歌教授找不到这方面的任何信息，所以我在这里。获取给定的路径名​​并将其粘贴到 Windows 资源管理器中。在我的代码中发现生成带有额外“。”的路径的错误后，我偶然发现了这一点。在目录分隔符之前的路径名中`\`...

```
@"C:\\pathto.\file.ext" 
```

在代码中，.NET 会在调用时接受该路径`File.Create`并生成一个文件，但在此路径：

```
@"C:\\pathto\file.ext" 
```

复制`C:\\pathto.\file.ext`到 Windows 资源管理器的地址栏并观看“。” 消失并带你去`C:\\pathto\file.ext`

.NET 和 Windows 是否是正常行为？它不会引起问题，因为“。” 传递给文件操作时，.NET 和 Windows 都将其删除。真正的问题是数据库中的所有文件的文件名都带有'.\'，但存在于没有'.\'的路径中......并且`File.Exists()`也可以工作，尽管路径不是'真正的'物理路径地点...

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:36:47.277

这是 Windows 文件系统的“功能”。[MSDN](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)：

> 不要以空格或句点结尾的文件或目录名称。尽管底层文件系统可能支持此类名称，但 Windows shell 和用户界面不支持。但是，可以将句点指定为名称的第一个字符。例如，“.temp”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:37:06.250

传入常规路径时，所有普通 Windows API 都会忽略/删除文件/文件夹名称中的尾随点。

如果您确实需要对尾随点的支持，您需要使用`"\\?\"`前缀路径并自己互操作所有调用（因为 .Net 不支持这种文件格式）。请参阅[MSDN：命名文件、路径和命名空间](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)， [如何删除名称以点（“.”）结尾的文件夹？](https://stackoverflow.com/questions/4075753/how-to-delete-a-folder-that-name-ended-with-a-dot)并且[您无法删除 NTFS 文件系统卷上的文件或文件夹以](http://support.microsoft.com/?kbid=320081)获取更多信息。

这是显示如何 PInvoke 接受长文件路径的函数的相关问题：[c# call Win32 API for long file paths?](https://stackoverflow.com/questions/1248816/c-sharp-call-win32-api-for-long-file-paths)

# java - jOOQ 中的 B/CLOB 处理

> ID：15642421
> 
> 赞同：6
> 
> 时间：2013-03-26T16:32:19.730
> 
> 标签：java, oracle, jdbc, jooq

以下是 jOOQ 手册关于该主题的内容：

> jOOQ 目前不明确支持 JDBC BLOB 和 CLOB 数据类型。如果您在数据库中使用这些数据类型中的任何一种，jOOQ 会将它们映射到 byte[] 和 String。在简单的情况下（小数据），这种简化就足够了。**在更复杂的情况下，您可能不得不绕过 jOOQ，以便处理这些数据类型及其各自的资源。**

有没有办法绕过一些jOOQ，但仍然保持代码相对干净？例如，手动绑定 LOB 参数，但将其他所有内容留给 jOOQ？

我应该避免哪些明显的陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:52:37.213

我为此找到了两种解决方案。

1.  春天的方法

2.  非 Spring 方法

在第一种情况下，只需注入 a`JdbcTemplate`并使用此帮助代码：

```
public static LobHandler getAppropriateLobHandler(Factory factory) {
    LobHandler lobHandler = null;
    switch( factory.getDialect() ) {
        case ORACLE: lobHandler = new OracleLobHandler(); break;
        default: lobHandler = new DefaultLobHandler(); break;
    }
    return lobHandler;
} 
```

使用此代码读取 BLOB：

```
 return jdbcTemplate.queryForObject( 
        "select BLOB from TABLE where PK = ?",
        args,
        new RowMapper<InputStream>() {

            @Override
            public InputStream mapRow( ResultSet rs, int rowNum ) throws SQLException {
                return lobHandler.getBlobAsBinaryStream( rs, 1 );
            }
        }
    ); 
```

这是写它们：

```
 jdbcTemplate.execute(
            "update TABLE set BLOB = ? where PK = ?",
            new AbstractLobCreatingPreparedStatementCallback( lobHandler ) {

                @Override
                protected void setValues( PreparedStatement ps, LobCreator lobCreator ) throws SQLException {
                    lobCreator.setBlobAsBinaryStream( ps, 1, stream, sizeInBytes );
                    ps.setLong( 2, pk );
                }
            }
        ); 
```

在第二种情况下，除非您有 Oracle，否则使用 JDBC 读取和写入 BLOB。当您拥有 Oracle 时，您需要使用其[特殊的 C/BLOB 定位器模式](http://docs.oracle.com/cd/F49540_01/DOC/java.815/a64685/oraext4.htm)。

# replication - 如何使用 SQL 复制将数组中的多个列从 Raven DB 复制到关系数据库？

> ID：15642423
> 
> 赞同：1
> 
> 时间：2013-03-26T16:32:25.343
> 
> 标签：replication, ravendb

我正在使用 Raven 的 SQL 复制工具将我们的 Raven DB 文档复制到 SQL 中，并且到目前为止只遇到了几个问题。我现在已经开始处理我们最复杂的文档之一，并努力寻找在包含多列的文档中复制数组的最佳方法。

这是我试图复制的文档的外观：

```
{
  "CreatedAt": "2013-03-26T15:58:05.5130458",
  "IsMostRecent": true,
  "ClientId": "clients/417",
  "StatusType": "Live",
  "Start": "2013-03-31T00:00:00.0000000",
  "End": null,
  "EndCharge": null,
  "AssessmentDate": null,
  "Correspondence": null,
  "Service": {
  "$type": "xxxx.xxxx.xxxx.xxxx.Personalisation, xxxx.Care.Core",
  "IsDirectBilling": false,
   "Visits": [
      {
         "DayOfWeek": "Monday",
         "Start": "09:00:00",
         "End": "10:15:00",
         "AdditionalResources": true,
         "SocialWork": {
             "Duration": 30,
             "BillableTo": "SocialWork",
             "VisitTasks": [
                "GoingToBed",
                "DressingAssistance",
                "WashingBathingAssistance",
                "AssistWithPersonalGrooming"
          ]
        },
         "PrivateWork": {
             "Duration": 45,
             "BillableTo": "Private",
          "VisitTasks": [
            "SupportWithRehab",
            "FoodPreperation",
            "ShoppingErrandRunning",
            "NonSpecialisedLaundry",
            "CheckVisit",
            "MealsAtHomeService",
            "Escorting"
          ]
        }
  },
  {
    "DayOfWeek": "Wednesday",
    "Start": "09:00:00",
    "End": "10:15:00",
    "AdditionalResources": true,
    "SocialWork": {
      "Duration": 30,
      "BillableTo": "SocialWork",
      "VisitTasks": [
        "GoingToBed",
        "DressingAssistance",
        "WashingBathingAssistance",
        "AssistWithPersonalGrooming"
      ]
    },
    "PrivateWork": {
      "Duration": 45,
      "BillableTo": "Private",
      "VisitTasks": [
        "SupportWithRehab",
        "FoodPreperation",
        "ShoppingErrandRunning",
        "NonSpecialisedLaundry",
        "CheckVisit",
        "MealsAtHomeService",
        "Escorting"
      ]
    }
  },
  {
    "DayOfWeek": "Friday",
    "Start": "09:00:00",
    "End": "10:15:00",
    "AdditionalResources": true,
    "SocialWork": {
      "Duration": 30,
      "BillableTo": "SocialWork",
      "VisitTasks": [
        "GoingToBed",
        "DressingAssistance",
        "WashingBathingAssistance",
        "AssistWithPersonalGrooming"
      ]
    },
    "PrivateWork": {
      "Duration": 45,
      "BillableTo": "Private",
      "VisitTasks": [
        "SupportWithRehab",
        "FoodPreperation",
        "ShoppingErrandRunning",
        "NonSpecialisedLaundry",
        "CheckVisit",
        "MealsAtHomeService",
        "Escorting"
      ]
    }
  }
],
"_visits": [
  {
    "DayOfWeek": "Monday",
    "Start": "09:00:00",
    "End": "10:15:00",
    "AdditionalResources": true,
    "SocialWork": {
      "Duration": 30,
      "BillableTo": "SocialWork",
      "VisitTasks": [
        "GoingToBed",
        "DressingAssistance",
        "WashingBathingAssistance",
        "AssistWithPersonalGrooming"
      ]
    },
    "PrivateWork": {
      "Duration": 45,
      "BillableTo": "Private",
      "VisitTasks": [
        "SupportWithRehab",
        "FoodPreperation",
        "ShoppingErrandRunning",
        "NonSpecialisedLaundry",
        "CheckVisit",
        "MealsAtHomeService",
        "Escorting"
      ]
    }
   },
 }
} 
```

到目前为止，这是我的复制脚本，目前正在复制一些列，但不是全部：

```
replicateToServiceStatusDetails({
        ClientId: this.ClientId,
        StatusType: this.StatusType,
        Start: this.Start,
        End: this.End,
        EndChargeDate: this.EndChargeDate,
        AssessmentDate: this.AssessmentDate
});

for (var i=0; i<this.Service.length; i++) 
{
    replicateToService( 
    {
           IsDirectBilling: this.IsDirectBilling
    });
}

for (var i=0; i<this.Service.Visits.length; i++) 
{
    replicateToVisits( 
    {
            DayOfWeek: this.Service.Visits.DayOfWeek,
    Start: this.Service.Visits.Start,
    End: this.Service.Visits.End,
    AdditionalResources: this.Service.Visits.AdditionalResources
});
}

for (var i=0; i<this.Service.Visits.SocialWork.length; i++) 
{
    replicateToSocialWork( 
    {
            Duration: this.Service.Visits.SocialWork.Duration,
    BillableTo: this.Service.Visits.SocialWork.BillableTo
    });
}

for (var i=0; i<this.Service.Visits.PrivateWork.length; i++) 
{
    replicateToPrivateWork( 
    {
            Duration: this.Service.Visits.PrivateWork.Duration,
    BillableTo: this.Service.Visits.PrivateWork.BillableTo
    });
} 
```

寻找有关如何复制所有列的一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:42:03.353

`for`只有在迭代数组时才需要。这可能是您想要执行此操作的方式：

```
replicateToServiceStatusDetails({
        ClientId: this.ClientId,
        StatusType: this.StatusType,
        Start: this.Start,
        End: this.End,
        EndChargeDate: this.EndChargeDate,
        AssessmentDate: this.AssessmentDate
});

replicateToService( 
{
       IsDirectBilling: this.IsDirectBilling
});

for (var i=0; i<this.Service.Visits.length; i++) 
{
    var visit = this.Service.Visits[i];
    replicateToVisits( 
    {
            DayOfWeek: visit.DayOfWeek,
            Start: visit.Start,
            End: visit.End,
            AdditionalResources: visit.AdditionalResources
    });

    replicateToSocialWork( 
    {
            Duration: visit.SocialWork.Duration,
        BillableTo: visit.SocialWork.BillableTo
    });

    replicateToPrivateWork( 
    {
         Duration: visit.PrivateWork.Duration,
        BillableTo: visit.PrivateWork.BillableTo
    });
} 
```

# sql - PHP_SQL 查询未返回正确答案

> ID：15642426
> 
> 赞同：0
> 
> 时间：2013-03-26T16:32:33.223
> 
> 标签：sql, arrays, image, path

首先，我想知道如何仅使用图像的路径在 PHP 中显示图像？不使用 BLOB。

和

我的数据库中有一个表格，它是以这种方式布局的..

列：i1 i2 i3 i4 i5 i6 i7 i8

每个字段都有一个值或为空。

我基本上想根据 i1 i2 i3 i4 中的内容显示 i5 i6 i7 i8 的值。

例如：

i1=a i2=b i3=e i4=q i5=g i6=l i7= i8=

对于这种情况，我希望显示 g 和 l。但我希望将值存储在数组中。

我试着做：

```
$list = array(g,l)
$query = " SELECT i5, i6, i7, i8  FROM Table WHERE i1 AND i2 AND i3 AND i4 IN ('$list') ";
$s = mysql_query($query);
while($data = mysql_fetch_array($s)){
    $r_1 = $data['i5'];
    $r_2 = $data['i6'];
    $r_3 = $data['i7'];
    $r_4 = $data['i8'];         
}
echo "$r_1  $r_2 $r_3  $r_4"` 
```

即使我这样做也不起作用`$list[0]`

帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:35:43.273

首先，我想知道如何仅使用图像的路径在 PHP 中显示图像？不使用 BLOB。

> 您不在 PhP 中显示图像，而是在 html 中显示它。如果您有路径，那么只需在 html 中生成一个 img 标记，并将 src 属性设置为 path ：

```
<img src="whatever your path is" alt="My Image" /> 
```

Blob 用于直接在数据库中存储图像（实际上是大的二进制数据、图像、电影等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:28:00.313

```
$s = mysql_query($query);
while($data = mysql_fetch_array($s)){ 
```

您没有检查查询期间是否有错误。从[文档中`mysql_query`](http://php.net/manual/en/function.mysql-query.php)：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。

这样做：

```
$s = mysql_query($query);
if($s === FALSE) {
    // Do something to handle the error here, possibly calling die()
} 
```

下一个问题，如果没有结果怎么办？你的变量都是空的。您可以对此进行测试：

```
if(empty($r_1)) {
    echo "Oops, I guess we didn't get any results";
    // die()?
} 
```

如果我们得到多行结果怎么办？我不确定你的程序应该如何处理这个问题。

最后，我认为您的 SQL 查询并没有像您认为的那样做：

```
SELECT i5, i6, i7, i8  FROM Table WHERE i1 AND i2 AND i3 AND i4 IN ('$list') 
```

这将为您提供`i5`, `i6`, `i7`, 和`i8`when`i1`为 true, `i2`is true, `i3`is true, and `i4`is equal to the string `$list`。如果要查找所有结果都在列表中，则需要执行多个语句，并且需要作为列表而不是字符串`IN`传递。`$list`您可以看到有关如何构造查询字符串以将列表传递给 MySQL 的[答案。](https://stackoverflow.com/questions/920353/php-pdo-can-i-bind-an-array-to-an-in-condition)

另请注意，这些`mysql_*`函数已被弃用，您应该真正学习使用 PDO 或这些`mysqli_*`函数。这不会花费太多时间，并且使用它们更容易安全地访问*数据库*。

# html - 无论内容如何， 如何使所有 h3 标题保持相同的高度？

> ID：15642427
> 
> 赞同：2
> 
> 时间：2013-03-26T16:32:33.673
> 
> 标签：html, css, twitter-bootstrap

我在 twitter bootstrap 的一行中有几个跨度。在这些跨度内是`<h3>`标题，然后`<img>`是 ,`<p>`等。其中一些标题可能只有一两个词。有些可能有 5 或 6 个单词，这会导致更高的高度。这使得页面上的剩余内容看起来很不稳定，因为图像高于或低于其余内容。如何根据最大标题中的内容量使所有标题标签保持相同的高度？或者我怎样才能使较大标题中的内容缩小到一个大小以保持相同的高度？我不认为这最后一种方法真的是我需要的。较小的文本可能看起来和最初的问题一样不稳定。

这导致的另一个问题是由于可能随时显示的内容量，我可能有比行要求的更多的跨度。即：6 个 span4。这使得最后两个下拉并在行内开始他们自己的“行”。这很好并且需要，但是如果第二个 span4 下降到低于其他跨度，我最终会将两个较低的跨度推到右侧，因为它们不能滑过那个跨度。如果第三个跨度较低，那么我最终会在最右边有一个跨度，在最左边有一个跨度的第三行。糟糕的摇摇欲坠！！！

我需要一个 css 选项，我可以将它添加到我自己的 css 文件中，与引导程序和响应 css 文件分开。我有一个专门针对文本颜色等引用这些跨度的类，因此它不会影响任何其他`<h3>`标签

代码：

```
<div class="hero-unit">
<h1>Opening This Week!</h1>
<div class="row-fluid">
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>test small</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
    <div class="span3 mobile-two"><h3>The Incredible Burt Wonderstone</h3><img src="img/ads/incredburtwonderstone-onesht.jpg"></div>
</div>
<p>These movies open this Friday!</p>
<p><a class="btn btn-primary btn-small" href="#coming-soon">See Showtimes &raquo;</a></p></div> 
```

---链接已删除

[http://jsfiddle.net/isherwood/GyYMK/1](http://jsfiddle.net/isherwood/GyYMK/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:55:47.703

您可以在 h3 元素上设置最小高度，但这是一种相当脆弱的方法，如果页面变得足够窄以至于它们换行的行数超出您的计划：

[http://jsfiddle.net/isherwood/GyYMK/3/](http://jsfiddle.net/isherwood/GyYMK/3/)

```
.mobile-two h3 {
    min-height: 120px;
} 
```

你可能想写一些 jQuery 来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T18:54:55.153

另一种方法可能是将其更多地视为“设计”问题而不是“css”问题。您可能可以利用此布局创建的不对称性。一个很好的例子是 Pinterest。他们有类似的挑战（不是文本），而是人们上传的图像的高度。您可以通过将 'span3' div 声明为电影海报的持有者，在垂直列中分配内容来做类似的事情：

```
<div class="span3 mobile-two movies-column">
    <div class="movie-tn">
        <h3>The Incredible Burt Wonderstone</h3>
        <img src="http://placehold.it/250x100" />
    </div>
    <!--more movie poster holders-->
</div> 
```

这里是同样的 JSFiddle：http: [//jsfiddle.net/R5qJ9/](http://jsfiddle.net/R5qJ9/)

不过，您需要进行一些计算才能将电影海报分布在列中。但是你必须做一些计算来设置统一的高度。

一个小小的改进是重新排列图像和标题，并添加一些与电影相关的内容，以稍微分散设计元素：

这里有一个 JSFiddle：http: [//jsfiddle.net/yQp6h/](http://jsfiddle.net/yQp6h/)

# embedded - 处理用户空间 ARM9 嵌入式 Linux AM1808 中的 GPIO

> ID：15642429
> 
> 赞同：3
> 
> 时间：2013-03-26T10:19:31.910
> 
> 标签：embedded, arm, embedded-linux

我必须将我的 GSM 模块与基于 ARM9 的 AM1808 接口。

我已将所有 GPIO 引脚分配给 Da850.c 以及 mux.h 文件。我成功创建了一个 uImage 并将该图像插入到我的闪存中。

我需要处理来自用户应用程序的一些 GPIO。

我知道我们可以从 Kerel 空间处理 GPIO，但我需要从用户空间处理。

例如，我为 GSM 模块的电源键分配了一个 GPIO。我需要通过应用程序更改引脚方式（高或低）。

好的，我编写了以下代码来从用户空间访问它，

```
#include <stdio.h>
#include <time.h>
#include <signal.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <stdlib.h>
#include <unistd.h>
#include "GSMpwr.h"
#define BS_GSM_PWR_REGISTER 0x01E26014
#define BS_DCDS_MASK    0x00000004

int fd;  // Memory device descriptor
unsigned long *pPWR;

unsigned short GetGSMpwr(void)
{
    #if defined __HOST_ARM
    unsigned long dcd_value = *pPWR;
    return (pwr_value >> 7) & 0x01;
    #endif
}

void InitializeGSMpwr(void) 
{
    #if defined __HOST_ARM
    int page_size = getpagesize();
    unsigned int MAP_addr;
    unsigned int reg_addr;
    unsigned char *pTemp;             // Pointer to GSMpwr register

/*
 * Open memory and get pointer to GSMpwr register in the FPGA
 */

if((fd = open("/dev/mem", O_RDWR | O_SYNC)) < 0)
{
        printf("failed to open /dev/mem");
        return;
}
else
{
    MAP_addr = (BS_GSM_PWR_REGISTER & ~(page_size - 1));
    pTemp = (unsigned char *)mmap(NULL, page_size,(PROT_READ |      PROT_WRITE),MAP_SHARED,fd,MAP_addr);

    if((pTemp == MAP_FAILED) || (pTemp == NULL))
    {
        printf("failed to map /dev/mem");
        return;
    }
    else
    {
    printf(“Memory Mapped at Address %p. \n”,pTemp);
    }

virt_addr = map_base + (control & MAP_MASK);

    reg_addr = (BS_GSM_PWR_REGISTER & (page_size - 1));
    pPWR = (unsigned long*)(pTemp + reg_addr);
    printf("GSM PWR PIN mapped in Application\n");
} 
```

我只能通过此代码读取该引脚，现在我想将该引脚用作输出，并希望以 3 秒的时间间隔变高和变低。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T10:37:38.313

最简单的方法是利用 GPIO 支持`sysfs`，您可以在其中控制所有导出的 GPIO。请查看 Linux[内核 GPIO 文档](https://www.kernel.org/doc/Documentation/gpio.txt)，特别是*Sysfs Interface for Userspace*部分。

在`sysfs`( `GPIO_SYSFS`) 中启用 GPIO 支持后，GPIO 控制将非常简单：

**例子**

```
GPIO=22

cd /sys/class/gpio
ls
echo $GPIO > /sys/class/gpio/export
ls 
```

请注意，在第一个 ls 上 gpio22 不存在，但在您将 GPIO 22 导出到用户空间后才存在。

```
cd /sys/class/gpio/gpio$GPIO
ls 
```

有文件可以设置方向和检索当前值。

```
echo "in" > direction
cat value 
```

您可以将 GPIO 配置为输出并设置值。

```
echo "out" > direction
echo 1 > value 
```

示例取自[这里](https://www.ridgerun.com/developer/wiki/index.php/How_to_use_GPIO_signals)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T07:54:02.607

我知道了，请找到以下代码，我得到了特定的引脚地址，我已经访问了该引脚，例如，

```
unsigned short   GetGSMpwr(void)
 {
    unsigned long pwr_value = *pPWR;
    printf("GSM_PWR:check Start : %ld",pwr_value);
return (pwr_value >> 1) & 0x01;
 }

 unsigned short SetGSMpwr(void)
{
    unsigned long pwr_value = *pPWR;
    printf("GSM_PWR:check Start : %ld",pwr_value);
   *pPWR = ~((pwr_value >> 1) & 0x01);
}

unsigned short ClrGSMpwr(void) 
{
    unsigned long pwr_value = *pPWR;
    printf("GSM_PWR:check Start : %ld",pwr_value);
   *pPWR = 256;
}` 
```

# ruby-on-rails - link_to 自定义操作但方法错误？

> ID：15642434
> 
> 赞同：0
> 
> 时间：2013-03-26T16:32:38.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

所有，我正在尝试让自定义操作与 put 方法一起使用：在

在 _post.html.erb 我有一个 link_to 声明：

```
<%= link_to 'End now', post, :method => :put, :action => endnow %> 
```

routes.rb 包含：

```
 resources :posts do
    member do
      put :endnow
    end 
```

和 posts_controller.rb 看起来像：

```
class PostsController < ApplicationController
  helper_method :endnow

  [.. code for create, edit, destroy, etc ..]

  def endnow
    puts params
  end

end 
```

rake 路由的相关行如下所示： endnow_post PUT /posts/:id/endnow(.:format) posts#endnow

但是，单击此链接时，操作 endnow 助手不会运行。奇怪的是，它确实使用 index 操作运行（我可以从 puts 命令中看出。当然，最终 endnow 的代码将更新 @post，但现在，它只是无法正常运行。

也许我正在以错误的方式解决这个问题 - 我想要实现的只是在单击该帖子的链接时更新@post，然后再显示它。

任何想法/替代方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T16:35:03.743

为什么不使用提供给您的 route helper 方法？将您的链接更改为

```
<%= link_to 'End now', endnow_post_path(@post), method: :put %> 
```

你做错的事情：

1.  如果要指定`:action`，请使用符号作为操作（您缺少冒号）。 `:action => endnow`应该`action: :endnow`
2.  我会假设你有一个`@post`实例变量，你从你的控制器传递给你的动作。你应该使用它而不是`post`（除非你实际上有一个`post`你从代码中省略的局部变量）
3.  您正在使用`endnow`作为一个动作；您应该删除`helper_method :endnow`控制器中的行，因为它不是您想要/不应该从您的视图中访问的东西。

这一切都可以通过使用 route helper 来避免（因为`endnow_post`您将附加`_path`以获取本地路由路径：）`endnow_post_path`，并将您的`@post`作为参数传递。

因为您正在尝试执行`PUT`请求，所以您必须确保您[`jquery-ujs`](https://github.com/rails/jquery-ujs)的资产管道中包含类似的东西，以将这些链接转换为幕后的表单提交；浏览器不支持`PUT`通过点击自己的链接。

* * *

至于为什么在开始`link_to`工作时会出现模板错误，Rails 告诉您需要创建一个`app/views/posts/endnow.html.erb`文件。您的操作只有`puts params`which 不会终止执行，让 Rails 假设您仍在尝试渲染某些`endnow.html.erb`模板。

* * *

还有其他方法可以做您想做的事情（更改特定模型的单个属性）吗？当然。有没有**更好**的方法？这很主观。它可能不是最 RESTful 的方式，但可以说它更容易处理（例如，如果在更新您正在修改的属性之前需要检查非常具体的授权规则`endnow`。您开始充实的方式是否有效？**当然。**

最后，作为朝着正确方向的一个颠簸，在您修复`link_to`并删除`helper_method`我上面描述的之后，您的`endnow`操作可能如下所示：

```
def endnow
  post = Post.find!(params[:id])

  post.some_attribute_here = some_new_value_here
  post.save

  redirect_to :root and return # <- this line sets a redirect back to your homepage and terminates execution, telling rails to do the redirect and **not** to render some endnow.html.erb file
end 
```

# c# - PayPal Express Checkout SOAP API：退款

> ID：15642435
> 
> 赞同：0
> 
> 时间：2013-03-26T16:32:39.557
> 
> 标签：c#, paypal

我使用 PayPal Express Checkout SOAP 服务。例如，这是一个精简版的代码，用于在结帐时将用户重定向到 PayPal Sandbox：

```
var client = new PayPalAPIAAInterfaceClient();

var credentials = new CustomSecurityHeaderType() {
    Credentials = new UserIdPasswordType() { ... }
};

var paymentDetails = new PaymentDetailsType() {
    OrderTotal = new BasicAmountType() {
        Value = string.Format("{0:0.00}", 100m)
    }
};

var request = new SetExpressCheckoutReq() {
    SetExpressCheckoutRequest = new SetExpressCheckoutRequestType() {
        SetExpressCheckoutRequestDetails = new SetExpressCheckoutRequestDetailsType() {
            PaymentDetails = new PaymentDetailsType[] { paymentDetails },
            CancelURL = "http://www.mysite.com" + Url.Action("Cancelled", "PayPalCheckout"),
            ReturnURL = "http://www.mysite.com" + Url.Action("Index", "PayPalCheckout")
        },
        Version = "60.0"
    }
};

var response = client.SetExpressCheckout(ref credentials, request);

return Redirect(string.Format("{0}?cmd=_express-checkout&token={1}", "https://www.sandbox.paypal.com/cgi-bin/webscr", response.Token)); 
```

然后，当用户返回 ReturnUrl 时，我会处理数据。这取自我在另一个网站上找到的一些代码。

我现在需要在我的网站上添加退款功能。我想知道是否还有其他人这样做过？我试过在线搜索，但似乎找不到任何有用的东西。我也试过自己做，但 API 不是很直观。

我会很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:10:44.730

它只需要是您需要执行的 RefundTransaction API 调用。您是在尝试让您的退货页面根据条件发出退款，还是尝试创建 GUI 类型的界面以允许某人为交易发出退款？您是否查看过PayPal 提供的[SDK中的代码示例？](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#expresscheckoutnew)您应该能够使用此代码。

# xpages - XPages - 是否可以修复视图列标题？

> ID：15642438
> 
> 赞同：0
> 
> 时间：2013-03-26T16:32:42.473
> 
> 标签：xpages

只需检查是否有一种非常简单的方法可以固定视图标题，以便当您在 XPages 中的视图中向下翻页时，标题保持在原来的位置。`position=Fixed`不是 的属性`xp:viewColumnHeader`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:12:47.667

是的，这是可能的，但需要一些 JavaScript 编码。我最近使用以下代码为客户解决了这个问题。基本思想是从 TD 的第一行中获取列的宽度，然后将其应用于 TH 广告，然后将 TH 设置为固定。您也需要在部分更新后运行此功能。祝你好运。

```
var fixTableHeaders = function() { 
    var thead = dojo.query("thead")[0]; 
    if (!thead) return;
    thead.style.position = "static";
    var THs = dojo.query('.xspDataTable th'); 
    var firstTDs = dojo.query('.xspDataTable tr:first-child td');
    var secondTDs = null;
    if (firstTDs.length < 2) {
        // categorized view, first line is a category with only one cell
        // -> we need the second line
        secondTDs = dojo.query('.xspDataTable tr:nth-child(2) td');         
    }
    var w = 0; 
    for (var i = 0; i < THs.length; i++) {
            w = dojo.coords(THs[i], true).w;                
            // console.log(i+" w="+w);
            THs[i].style.width = (w)+"px";
            if (firstTDs[i]) { 
                //if (secondTDs && secondTDs[i]) secondTDs[i].style.width = w+"px";
                //else firstTDs[i].style.width = w+"px";
                firstTDs[i].style.paddingTop = "3em";
            } 
    } 
   thead.style.position = "fixed";                        
}     
dojo.addOnLoad(fixTableHeaders); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:55:10.507

如果要添加 to 的属性，`position`可以`xp:viewColumnHeader`使用该`attrs`属性来执行此操作（适用于 8.5.3）。你的代码看起来像这样：

```
<xp:viewColumnHeader ......>
    <xp:this.attrs>
        <xp:attr name="position" value="fixed"></xp:attr>
    </xp:this.attrs>
</xp:viewColumnHeader> 
```

但我不认为仅凭这一点就可以解决问题。前段时间，我创建了一个 CSS 片段来[在 Extension Library 的应用程序布局控件中制作浮动横幅、标题栏和位置栏](http://openntf.org/XSnippets.nsf/snippet.xsp?id=make-floating-banner-title-bar-and-place-bar-in-application-layout-control-of-extension-library)。你可以从中得到一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:17:19.013

前几天我看到了一些可以修复表头的 jQuery 代码。不记得它在哪里，但可以帮助你的东西应该在那里。

# r - knitr chunk math notation

> ID：15642440
> 
> 赞同：2
> 
> 时间：2013-03-26T16:32:43.127
> 
> 标签：r, math, knitr, lyx

I am unable to render maths notation inside a knitr chunk in Lyx although it renders fine using \Sexpr or in an ERT box while using Lyx 2.0.5 and knitr 1.1

The following code was adapted from the manual:

```
<<cars-demo,dev='svg',fig.width=4,fig.height=2.8,out.width='.45\\textwidth',message=TRUE,cache=TRUE>>=
fit=lm(dist~speed,data=cars) # linear regression
par(mar=c(4, 4, 1, .1), mgp=c(2,1,0))
with(cars,plot(speed,dist,panel.last=abline(fit)))
text(10,100,'$\alpha_{1}$+$\beta^{2}$') 
```

The plot is fine but the text notation appears exactly as: $\alpha_{1}$+$\beta^{2}$

I cannot run tikz for some reason so the original dev = tikz had to be converted to svg.

Thanks in advance. Great combination Lyx and knitr.

# python - Join lists and individual floats to single string in Python

> ID：15642441
> 
> 赞同：2
> 
> 时间：2013-03-26T16:32:44.527
> 
> 标签：python

Given the following list:

```
a = [[1.0, 1.2, 1.4], [2.0, 2.2], 5.0] 
```

How to I get:

```
s = '1.0 1.2 1.4 2.0 2.2 5.0 
```

I can't seem to be able to build something out of join(), map() or list comprehensions that doesn't fail due to the non-iterable last member.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:46:56.903

这个解决方案有点骇人听闻，但以最小的努力完成了工作

```
>>> a = [[1.0, 1.2, 1.4], [2.0, 2.2], 5.0]
>>> str(a)
'[[1.0, 1.2, 1.4], [2.0, 2.2], 5.0]'
>>> str(a).translate(None,'[],')
'1.0 1.2 1.4 2.0 2.2 5.0' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:35:44.820

```
>>> a = [[1.0, 1.2, 1.4], [2.0, 2.2], 5.0]
>>> ' '.join(str(s) for x in a for s in (x if isinstance(x, list) else [x]))
'1.0 1.2 1.4 2.0 2.2 5.0' 
```

这在行为上等同于以下 for 循环：

```
tmp = []
for x in a:
    if isinstance(x, list):
        for s in x:
            tmp.append(s)
    else:
        tmp.append(x)
result = ' '.join(tmp) 
```

请注意，这假设只有一层嵌套，如您的示例所示。如果您需要它与任意可迭代对象一起工作，而不仅仅是您可以使用的列表[`collections.Iterable`](http://docs.python.org/2/library/collections.html#collections.Iterable)，只要您的值不是字符串（否则它将遍历字符串中的字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:37:18.627

我会去：

```
a = [[1.0, 1.2, 1.4], [2.0, 2.2], 5.0]

def try_iter(item):
    try:
        return iter(item)
    except:
        return (item,)

from itertools import chain

print ' '.join(str(s) for s in chain.from_iterable(map(try_iter, a))) 
```

# python - simplejson nested object indexing

> ID：15642443
> 
> 赞同：0
> 
> 时间：2013-03-26T16:32:49.520
> 
> 标签：python, simplejson

I can't figure out how to perform nested object access using simplejson. I have looked at the examples in the [docs](http://simplejson.googlecode.com/svn/tags/simplejson-2.1.1/docs/index.html) and searched but can't find a way of achieving the following functionality:

```
nested = json.loads('{ "foo": {"bar": 1}}')
value = nested['foo.bar']
if(value == 1):
  print('success') 
```

This produces the following error:

```
KeyError: 'foo.bar' 
```

Is there a way of getting nested objects without having to access one object at a time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:38:14.830

返回的对象是一个真正的python dict：

```
>>> type(nested)
<type 'dict'> 
```

所以你的问题真的是关于 python 字典。所以，不，这是不可能的。但是，您可以定义一个自定义，该自定义`JSONDecoder`可以返回您自己的实现您想要的语义的对象。

# image - Reading a .dat image file

> ID：15642446
> 
> 赞同：0
> 
> 时间：2013-03-26T16:33:00.617
> 
> 标签：image, matlab

I have an image stored in .dat format an I want to read and then show the image. imshow and imread functions don't work.what are the other functions that I can use? Note that I'm using Matlab R2010a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:34:37.067

加载功能应该可以工作

加载（“文件名.dat”）

# nginx - Play! Framework returns empty header for websocket connection if request comes through nginx

> ID：15642458
> 
> 赞同：0
> 
> 时间：2013-03-26T16:33:30.677
> 
> 标签：nginx, playframework, websocket, playframework-2.1

I'm using Nginx 1.3.7 and Play! Framework 2.1 and I need to proxy my HTTP-, HTTPS- and WebSocket-connections to the Play! server through nginx.

I rely on the websocket proxy feature of the nginx trunk and I did set the "upgrade" and "connection" headers to correctly forward the headers for the websocket connections ([http://nginx.org/en/docs/http/websocket.html](http://nginx.org/en/docs/http/websocket.html)):

```
 map $http_upgrade $connection_upgrade {
   default Upgrade;
   ''      close;
 }

 location / {
   proxy_pass  http://my-backend;
   proxy_http_version 1.1;
   proxy_set_header Upgrade $http_upgrade;
   proxy_set_header Connection $connection_upgrade;
 } 
```

I made sure that Play! get's the correct headers during the websocket initialization. The request.headers object in Play! looks exactly the same with our without nginx.

```
Map(
  Cache-Control -> Buffer(no-cache),
  Connection -> Buffer(Upgrade),
  Host -> Buffer(my-backend),
  Origin -> Buffer(https://my-host:8443),
  Pragma -> Buffer(no-cache),
  Sec-WebSocket-Extensions -> Buffer(x-webkit-deflate-frame),
  Sec-WebSocket-Key -> Buffer(nk5JVO4I5QRMQnSxAJaRCg==),
  Sec-WebSocket-Version -> Buffer(13),
  Upgrade -> Buffer(websocket)
) 
```

Here is the problem: In case the request comes from nginx the response from Play! is empty and doesn't contain any headers, just the protocol-version: "HTTP/1.1 0 ". Correctly the response from Play! would look like that:

```
HTTP/1.1 101 Switching Protocols
Connection: Upgrade
Sec-WebSocket-Accept: YHVb1xdsVqaObgQxqksBQPhdkvc=
Upgrade: websocket 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:21:49.103

是的，解决方案当然是使用正确版本的 nginx。1.3.7 无法转发“Connection: Upgrade”标志，因为该功能仅在 nginx 1.3.13 中引入。

我建议使用最新的 dev/trunk 版本。

# c# - Trying to fire WPF StoryBoard multiple times with different Completed-actions

> ID：15642462
> 
> 赞同：0
> 
> 时间：2013-03-26T16:33:41.953
> 
> 标签：c#, wpf, animation, storyboard, blend

I'm unsuccessful in making a storyboard in code behind and running it multiple times chained to each other. Somehow, it seems the storyboard keeps in context, and will not reset.

I'm animating several elements, and X number of times I'm recursively running the animation-method, but with different call-back actions in the Completed event. First animation runs fine, but the rest it doesn't animate at all (the completed-event fires).

If I create a StoryBoard in a method and run it, should it not be disposed after it is completed? I'm trying to do `storyboard.Remove()`.

```
private void SlideLeft(int numberOfStepsToSlide)
{
    if (numberOfStepsToSlide < 1) return;
    Slide(() => SlideLeft(numberOfStepsToSlide - 1));
}

protected void Slide(Action callBackAfterAnimation = null)
{
    var sb = new Storyboard();
    sb.FillBehavior = FillBehavior.Stop; //i thought maybe this would fix it, but no

    //..
    //.. a number of double animations created and added to storyboard
    //..

    sb.Completed += (sender, e) =>
                        {
                            sb.Stop();
                            sb.Remove();

                            //..
                            //..sending message to ViewModel and manipulating values
                            //..

                            if (callBackAfterAnimation != null)
                                callBackAfterAnimation();
                        };
    sb.Begin();
} 
```

Thanks for your time!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:44:24.780

对不起，完全忘记了这个问题！

你不想打电话`Remove`- 这基本上会杀死动画，通过杀死所有为运行它而创建的动画时钟......试试这样的东西（快速和肮脏的例子）：

```
var win = new Window();
win.Width = 50;
win.Height = 50;

int runCount = 3;
int halfSteps = runCount * 2;
double toWidth = 500.0;

var sb = new Storyboard();  
var biggerator = new DoubleAnimation(toWidth, new Duration(TimeSpan.FromSeconds(2)));
sb.Children.Add(biggerator);
Storyboard.SetTarget(biggerator, win);
Storyboard.SetTargetProperty(biggerator, new PropertyPath("Width"));

sb.Completed += (o,e) => 
{ 
    sb.Stop();          
    halfSteps--;
    if(halfSteps <= 0)
    {
        win.Height = 150;
    }
    else
    {
        biggerator.To = biggerator.To == 0 ? toWidth : 0;
        sb.Begin();
    }
};

sb.Begin();     
win.Show(); 
```

# php - What is the best way to work with date/time period in Doctrine2 or PHP?

> ID：15642465
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:33:55.210
> 
> 标签：php, datetime, doctrine

Does PHP have standard types for working with date/time period?

For example, now I have entity Period:

```
class Period
{ 
    /** 
     * @var \DateTime
     */
    protected $start; 

    /** 
     * @var \DateTime
     */
    protected $end;
} 
```

And I don't want to reinvent the wheel. I need comparison functions and so on. Can you suggest me something? Thanks.

P.S. I know about [\DateInterval](http://php.net/manual/en/class.dateinterval.php), but I talk about period with specified dates.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:51:18.917

我认为你应该看看 PHP 的[DatePeriod](http://www.php.net/DatePeriod)类。我确定这正是您正在寻找的。

在该页面上也有一些很好的使用示例。

值得注意的是，由于 DatePeriod 实现了 Traversable 接口，您可以在 foreach 循环中使用它，其中每个项目都是[DateTime](http://www.php.net/DateTime)对象。

# opencv - How to load ClassifierCascade in Android using JavaCV?

> ID：15642466
> 
> 赞同：0
> 
> 时间：2013-03-26T16:33:55.343
> 
> 标签：opencv, javacv

I'm trying to use facial recognition with Android . All the loads are ok , but the **haarcascade_frontalface_alt2.xml** file wich i don't know how to load it using JavaCV. This is the code i have:

```
public static void detectFacialFeatures()
{
    // The cascade definition to be used for detection.

    // This will redirect the OpenCV errors to the Java console to give you
    // feedback about any problems that may occur.
    new JavaCvErrorCallback();

    // Load the original image.

    // We need a grayscale image in order to do the recognition, so we
    // create a new image of the same size as the original one.
    IplImage grayImage = IplImage.create(iplImage.width(),iplImage.height(), IPL_DEPTH_8U, 1);

    // We convert the original image to grayscale.
    cvCvtColor(iplImage, grayImage, CV_BGR2GRAY);

    CvMemStorage storage = CvMemStorage.create();

    // We instantiate a classifier cascade to be used for detection, using the cascade definition.
    CvHaarClassifierCascade cascade = new CvHaarClassifierCascade(cvLoad("./haarcascade_frontalface_alt2.xml"));

    // We detect the faces.
    CvSeq faces = cvHaarDetectObjects(grayImage, cascade, storage, 1.1, 1, 0);

    Log.d("CARAS","Hay "+faces.total()+" caras ahora mismo");
} 
```

The problem is here

> CvHaarClassifierCascade(cvLoad("./haarcascade_frontalface_alt2.xml"));

I have tried putting the xml file it into the /assets folder , but i have no idea of how must i load it. It's always giving me the next error:

```
03-26 17:31:25.385: E/cv::error()(14787): OpenCV Error: Null pointer (Invalid classifier cascade) in CvSeq* cvHaarDetectObjectsForROC(const CvArr*, CvHaarClassifierCascade*, CvMemStorage*, std::vector<int>&, std::vector<double>&, double, int, int, CvSize, CvSize, bool), file /home/saudet/projects/cppjars/OpenCV-2.4.4/modules/objdetect/src/haar.cpp, line 1514 
```

... looking more near at the error it points to this code line:

> CvSeq faces = cvHaarDetectObjects(grayImage, cascade, storage, 1.1, 1, 0);

That's why i'm pretty sure that the problem comes from the haarcascade_frontalface_alt2.xml load.

Thanks for your help.

**P.D: I want to include the cascade into the apk not in sdcard .**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:20:53.860

您可以将文件打包在 apk 中，然后将其复制到外部位置，以便 OpenCV 函数可以访问它。

```
 try {
        File learnedInputFile = new File(Environment.getExternalStorageDirectory().getPath() + "/learnedData.xml");
        if (!learnedInputFile.exists()) {
            InputStream learnedDataInputStream = assetManager.open("learnedData.xml");
            FileOutputStream learnedDataOutputStream = new FileOutputStream(learnedInputFile);

            // copy file from asset folder to external location, i.e. sdcard
            byte[] buffer = new byte[300];
            int n = 0;
            while (-1 != (n = learnedDataInputStream.read(buffer))) {
                learnedDataOutputStream.write(buffer, 0, n);
            }
        }
        classifier.load(learnedInputFile.getAbsolutePath());
    } catch (IOException exception) {
        // there are no learned data, train ml algorithm or show error, etc.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T22:19:08.480

如果您的级联在 SD 卡中，您可以使用：

```
CascadeClassifier cascade = new CascadeClassifier(Environment.getExternalStorageDirectory().getAbsolutePath() + "/cascade.xml"); 
```

`Environment.getExternalStorageDirectory().getAbsolutePath()`为您提供 SD 卡的正确路径，接下来 - 是您 SD 中文件的地址。

# javascript - 使用dojo工具包按间隔进入dojox仪表的majorTicksColor

> ID：15642472
> 
> 赞同：1
> 
> 时间：2013-03-26T16:34:25.090
> 
> 标签：javascript, jquery, css, dojo

我正在尝试使用 dojo 工具包和正是这个[gauge](http://dojotoolkit.org/reference-guide/1.8/dojox/gauges/GlossyCircularGauge.html#dojox-gauges-glossycirculargauge)。

实际上，我想要majorTicksColor 和minorTicksColor 的特征，我想要颜色取决于区间，例如：从0 到30 绿色，从30 到70 黄色和从70 到100，或者它可能是退化的。

喜欢这个[形象](https://www.targetdashboard.com/nlimages/badgauge.jpg)。

那可能吗 ？

谢谢你。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T22:34:01.230

像这样的[小提琴](http://jsfiddle.net/dsmfg/3/)？

这里的主要是使用方面来增强小部件的`drawRange`方法[`dojox/gauges/GlossyCircularGauge`](http://dojotoolkit.org/api/1.8/dojox/gauges/GlossyCircularGauge)。

```
//
// Use the new "drawGreenYellowRedCurves" as an *after* aspect to the existing "drawRange" function.
//
require(['dojox/gauges/GlossyCircularGauge', 'dojo/aspect', 'drawGreenYellowRedCurves', 'dojo/domReady!'],
  function (GlossyCircularGauge, aspect, drawGreenYellowRedCurves) {
    var gauge = new GlossyCircularGauge({
        background: [255, 255, 255, 0],
        title: 'Value',
        id: "glossyGauge",
        width: 300,
        height: 300
    }, dojo.byId("CircularGauge"));
    aspect.after(gauge, "drawRange", drawGreenYellowRedCurves, true);
    gauge.startup();
}); 
```

![仪表的图像](../Images/3e279527cfcf8126bd8ad1682f6b495b.png)

# javascript - 带引号的 Javascript 书签

> ID：15642473
> 
> 赞同：1
> 
> 时间：2013-03-26T16:34:29.837
> 
> 标签：javascript, html, quotes, bookmarklet, bookmarks

我在制作 javascript 小书签时遇到了问题，其中的代码包含`""`引号和`''`引号。例如，我的代码如下，

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Temporary HTML Doc</title>
    </head>
    <body>
        <a href="javascript:(function(){var a='something';var d='something_else'}());">Link</a>
    </body>
</html> 
```

然后我会继续打开 HTML 文件并将链接拖到书签栏。但是，由于代码有`""`和`''`引号，我是否将链接写为

```
<a href='javascript:(function(){var a="something";var d='something_else'}());"> 
```

或者

```
<a href="javascript:(function(){var a="something";var d='something_else'}());"> 
```

，它仍然被切断，链接变得无用。

那么，如何包含需要`""`和`''`引号才能工作的代码？
这个例子不是我的实际代码，但它应该适用于这个问题。

[维基百科的书签页面](http://en.wikipedia.org/wiki/Bookmarklet)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:37:53.187

要在由字符`"`分隔的属性值中包含一个字符`"`，您通常会将其表示为一个实体：`&quot;`

但是，由于这是一个 URL，因此您应该首先将其编码为 URL：`%22`

观看[现场演示](http://jsbin.com/umoyoy/1/edit)。

# html - nexus 7 上更大的字体大小（如果我在桌面上缩小/放大，效果相同）

> ID：15642474
> 
> 赞同：1
> 
> 时间：2013-03-26T16:34:33.080
> 
> 标签：html, css

我无法解决这个问题。如果我在桌面或 iphone/ipad 上访问我的页面，它工作得很好，但是当使用 Nexus 7 时，字体大小由于某种原因增加（我**认为**这就是问题）导致菜单项太大，因此给他们一个新的行。

这是缩小或在nexus 7（页眉导航和页脚导航）上时的外观

![在此处输入图像描述](../Images/c60ba63d5b9b75d3c8fbbc39dc8f4636.png) ![在此处输入图像描述](../Images/b625afc519079a03355dabae6f37e0ab.png)

如果我在桌面上缩小或放大，你会得到相同的效果，所以你可以在这里测试：[solitude-online.com](http://solitude-online.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:51:11.747

您正在为您的字体大小使用 em 单位。这是最好的方法，但是 em 单位是基于默认字体大小的。默认字体大小在不同的平台和操作系统上是不同的。您可以通过声明默认字体大小来解决此问题，如下所示：

```
html {
font-size: 10px;
}
body {
font-size: 16px; /* Fall-back */
font-size: 1.6rem;
} 
```

# yii - 如何使用表单生成器在 yii 中保存同一模型的多个实例？

> ID：15642479
> 
> 赞同：0
> 
> 时间：2013-03-26T16:34:43.697
> 
> 标签：yii, formbuilder

我的情况是这样的。我必须在数据库中保存相同型号地址的当前地址和永久地址。但是它在数据库中保存了两次永久地址。如何保存当前地址？

```
$form = new CForm('application.views.user.addressForm');

 $form['prstAdd']->model = new Address;

$form['pmtAdd']->model = new Address;

 if($form->submitted('register') && $form->validate())

 {

  $prstAdd = $form['prstAdd']->model;

 if($prstAdd->save(false))

if($prstAdd->save(false))

  {

  $pmtAdd->save(false);

                       $this->redirect(array('site/index'));

   }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:15:42.617

您需要创建一个模型实例数组，然后从 $_POST 变量中检索用户输入数据并将其分配给每个模型。

看看[这个](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

# sql - ORA-01858: 在需要数字的地方发现了一个非数字字符 - oracle 10g

> ID：15642488
> 
> 赞同：0
> 
> 时间：2013-03-26T16:35:04.633
> 
> 标签：sql, oracle10g

我的问题是：对于每个会议，如果会议在 2012 年 7 月 1 日之前举行，则显示会议标题和“第一学期”字样，如果会议在 2012 年 7 月 1 日或之后举行，则显示“第二学期”字样。对于包含“First term”或“Second term”字样的列，请制作标题术语。与之关联的表是

```
CONFID             TITLE                    LOCATION          SDATE
------        --------------------       -------------------- ---------
c00001    Hydroinformatics                  Singapore          15-JUN-12
c00002    Ecological_modeling                Berlin            15-JUL-12
c00003    Computational_M                    London            25-MAY-12
c00004    Ecoinformatics                     Boston            22-AUG-12
c00005    Uncertainty_analysis               Athens            10-OCT-12
c00006    Large_databases                    Toronto           13-APR-12
c00007    Systems_analysis                    Boston           23-MAR-12
c00008    Systems_integration                 Tokyo            24-FEB-12
c00009    Aquatic_biology                      Helsinki        12-MAY-12
c00010    Information_systems                   Paris          08-JAN-12
c00011    Simulation_modeling                   Rome           01-SEP-12
c00012    DSS                                  Melbourne       18-DEC-12 
```

我写的sql语句是：

```
select C.Title, 'First term' as "Term" 
from Conference_C C 
where C.ConfID in (select C.Sdate 
                   from Conference_C C 
                   where C.Sdate < '1-July-12') 
union 
select C.Title, 'Second term' as "Term" 
from Conference_C C 
where C.ConfID in (select C.Sdate 
                     from Conference_C C 
                     where C.Sdate >= '1-July-12'); 
```

我收到以下错误：

```
select C.Title, 'First term' as "Term" from Conference_C C where C.ConfID
                                                                 *
ERROR at line 1:
ORA-01858: a non-numeric character was found where a numeric was expected 
```

请澄清我哪里出错了，任何帮助将不胜感激。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:43:21.053

您正在将`ConfID`(a number) 与`Sdate`从内部查询返回的 (a date) 进行比较：

```
where C.ConfID in (select C.Sdate 
                   from Conference_C C 
                   where C.Sdate < '1-July-12') 
```

您只需要一个简单的 SQL，如下所示：

```
select C.Title, 'First term' as "Term" 
from Conference_C C 
where C.Sdate < '1-July-12'
union
select C.Title, 'Second term' as "Term" 
from Conference_C C 
where C.Sdate >= '1-July-12' 
```

另外由于这两个部分`union`是互斥的，所以[`union all`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm)可以使用 a （它的性能更好，因为它不必消除重复）

# javascript - 在深层对象中按名称查找属性

> ID：15642494
> 
> 赞同：45
> 
> 时间：2013-03-26T16:35:20.510
> 
> 标签：javascript, jquery, lodash

我有一个巨大的收藏，我正在寻找收藏中某处的钥匙。获取包含该键/索引的所有对象的引用列表或完整路径的可靠方法是什么？如果有帮助，我会使用 jQuery 和 lodash，你可以忘记无限指针递归，这是一个纯 JSON 响应。

```
fn({ 'a': 1, 'b': 2, 'c': {'d':{'e':7}}}, "d"); 
// [o.c]

fn({ 'a': 1, 'b': 2, 'c': {'d':{'e':7}}}, "e");
// [o.c.d]

fn({ 'aa': 1, 'bb': 2, 'cc': {'d':{'x':9}}, dd:{'d':{'y':9}}}, 'd');
// [o.cc,o.cc.dd] 
```

fwiw lodash 有一个 _.find 函数，可以找到两个嵌套深度的嵌套对象，但之后似乎失败了。（例如[http://codepen.io/anon/pen/bnqyh](http://codepen.io/anon/pen/bnqyh)）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-26T17:15:16.197

这应该这样做：

```
function fn(obj, key) {
    if (_.has(obj, key)) // or just (key in obj)
        return [obj];
    // elegant:
    return _.flatten(_.map(obj, function(v) {
        return typeof v == "object" ? fn(v, key) : [];
    }), true);

    // or efficient:
    var res = [];
    _.forEach(obj, function(v) {
        if (typeof v == "object" && (v = fn(v, key)).length)
            res.push.apply(res, v);
    });
    return res;
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-26T17:15:15.160

纯 JavaScript 解决方案如下所示：

```
function findNested(obj, key, memo) {
  var i,
      proto = Object.prototype,
      ts = proto.toString,
      hasOwn = proto.hasOwnProperty.bind(obj);

  if ('[object Array]' !== ts.call(memo)) memo = [];

  for (i in obj) {
    if (hasOwn(i)) {
      if (i === key) {
        memo.push(obj[i]);
      } else if ('[object Array]' === ts.call(obj[i]) || '[object Object]' === ts.call(obj[i])) {
        findNested(obj[i], key, memo);
      }
    }
  }

  return memo;
} 
```

以下是您如何使用此功能：

```
findNested({'aa': 1, 'bb': 2, 'cc': {'d':{'x':9}}, dd:{'d':{'y':9}}}, 'd'); 
```

结果将是：

```
[{x: 9}, {y: 9}] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-24T15:46:47.770

这将在一个对象数组（干草）中深度搜索一个值（针），然后返回一个包含结果的数组......

```
search = function(hay, needle, accumulator) {
  var accumulator = accumulator || [];
  if (typeof hay == 'object') {
    for (var i in hay) {
      search(hay[i], needle, accumulator) == true ? accumulator.push(hay) : 1;
    }
  }
  return new RegExp(needle).test(hay) || accumulator;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-11T09:12:07.123

使用 Deepdash，您可以[pickDeep](https://deepdash.io/#pickdeep)然后从中获取[路径](https://deepdash.io/#paths)，或者[索引](https://deepdash.io/#indexate)（构建路径-> 值对象）

```
var obj = { 'aa': 1, 'bb': 2, 'cc': {'d':{'x':9}}, dd:{'d':{'y':9}}}

var cherry = _.pickDeep(obj,"d");

console.log(JSON.stringify(cherry));
// {"cc":{"d":{}},"dd":{"d":{}}}

var paths = _.paths(cherry);

console.log(paths);
// ["cc.d", "dd.d"]

paths = _.paths(cherry,{pathFormat:'array'});

console.log(JSON.stringify(paths));
// [["cc","d"],["dd","d"]]

var index = _.indexate(cherry);

console.log(JSON.stringify(index));
// {"cc.d":{},"dd.d":{}} 
```

这是一个[Codepen 演示](https://codepen.io/yurigor/pen/GevQOO?editors=0010)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-04T19:37:12.290

如果你可以用普通的 JS（或结合 lodash）编写一个递归函数，那将是最好的（按性能），但是如果你想从你身边跳过递归并想要一个简单的可读代码（这可能不是根据性能最好），那么您可以将[lodash#cloneDeepWith](https://lodash.com/docs/4.17.10#cloneDeepWith)用于必须递归遍历对象的任何目的。

```
let findValuesDeepByKey = (obj, key, res = []) => (
    _.cloneDeepWith(obj, (v,k) => {k==key && res.push(v)}) && res
) 
```

因此，您作为 的第二个参数传递的回调`_.cloneDeepWith`将递归地遍历所有`key/value`对，您所要做的就是您想要对每个对执行的操作。上面的代码只是您的案例的一个例子。这是一个工作示例：

```
var object = {
    prop1: 'ABC1',
    prop2: 'ABC2',
    prop3: {
        prop4: 'ABC3',
        prop5Arr: [{
                prop5: 'XYZ'
            },
            {
                prop5: 'ABC4'
            },
            {
                prop6: {
                    prop6NestedArr: [{
                            prop1: 'XYZ Nested Arr'
                        },
                        {
                            propFurtherNested: {key100: '100 Value'}
                        }
                    ]
                }
            }
        ]
    }
}
let findValuesDeepByKey = (obj, key, res = []) => (
    _.cloneDeepWith(obj, (v,k) => {k==key && res.push(v)}) && res
)

console.log(findValuesDeepByKey(object, 'prop1'));
console.log(findValuesDeepByKey(object, 'prop5'));
console.log(findValuesDeepByKey(object, 'key100'));
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-26T16:58:22.560

像这样的东西会起作用，将其转换为对象并向下递归。

```
function find(jsonStr, searchkey) {
    var jsObj = JSON.parse(jsonStr);
    var set = [];
    function fn(obj, key, path) {
        for (var prop in obj) {
            if (prop === key) {
                set.push(path + "." + prop);
            }
            if (obj[prop]) {
                fn(obj[prop], key, path + "." + prop);
            }
        }
        return set;
    }
    fn(jsObj, searchkey, "o");
} 
```

小提琴：[jsfiddle](http://jsfiddle.net/VFcSs/1/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-01T19:42:59.560

如果您没有看到来自@eugene 的更新答案，此调整允许传递要搜索的键列表！

```
// Method that will find any "message" in the Apex errors that come back after insert attempts
// Could be a validation rule, or duplicate record, or pagemessage.. who knows!
// Use in your next error toast from a wire or imperative catch path!   
// message: JSON.stringify(this.findNested(error, ['message', 'stackTrace'])),
// Testing multiple keys: this.findNested({thing: 0, list: [{message: 'm'}, {stackTrace: 'st'}], message: 'm2'}, ['message', 'stackTrace'])
findNested(obj, keys, memo) {
    let i,
        proto = Object.prototype,
        ts = proto.toString,
        hasOwn = proto.hasOwnProperty.bind(obj);

    if ('[object Array]' !== ts.call(memo)) memo = [];

    for (i in obj) {
      if (hasOwn(i)) {
        if (keys.includes(i)) {
          memo.push(obj[i]);
        } else if ('[object Array]' === ts.call(obj[i]) || '[object Object]' === ts.call(obj[i])) {
          this.findNested(obj[i], keys, memo);
        }
      }
    }

    return memo.length == 0 ? null : memo;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-25T03:35:48.750

我们将[对象扫描](https://github.com/blackflux/object-scan)用于数据处理任务。一旦你了解了如何使用它，它就非常棒了。

```
// const objectScan = require('object-scan');

const haystack = { a: { b: { c: 'd' }, e: { f: 'g' } } };
const r = objectScan(['a.*.*'], { joined: true, rtn: 'entry' })(haystack);
console.log(r);
// => [ [ 'a.e.f', 'g' ], [ 'a.b.c', 'd' ] ]
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

网站上还有很多例子。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-17T15:45:48.077

```
Array.prototype.findpath = function(item,path) {
  return this.find(function(f){return item==eval('f.'+path)});
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-29T01:00:15.307

我是这样做的：

```
function _find( obj, field, results )
{
    var tokens = field.split( '.' );

    // if this is an array, recursively call for each row in the array
    if( obj instanceof Array )
    {
        obj.forEach( function( row )
        {
            _find( row, field, results );
        } );
    }
    else
    {
        // if obj contains the field
        if( obj[ tokens[ 0 ] ] !== undefined )
        {
            // if we're at the end of the dot path
            if( tokens.length === 1 )
            {
                results.push( obj[ tokens[ 0 ] ] );
            }
            else
            {
                // keep going down the dot path
                _find( obj[ tokens[ 0 ] ], field.substr( field.indexOf( '.' ) + 1 ), results );
            }
        }
    }
} 
```

测试它：

```
var obj = {
    document: {
        payload: {
            items:[
                {field1: 123},
                {field1: 456}
                ]
        }
    }
};
var results = [];

_find(obj.document,'payload.items.field1', results);
console.log(results); 
```

输出

```
[ 123, 456 ] 
```

# emacs - 在 Emacs 24.3 中安装 el-get 来管理包

> ID：15642496
> 
> 赞同：0
> 
> 时间：2013-03-26T16:35:26.713
> 
> 标签：emacs

安装[`el-get`](https://github.com/dimitri/el-get)说明如下：

```
;; Copy/paste this code into your *scratch* buffer,
;; hit C-j, and you have a working el-get.
(url-retrieve
 "https://raw.github.com/dimitri/el-get/master/el-get-install.el"
 (lambda (s)
   (goto-char (point-max))
   (eval-print-last-sexp))) 
```

当我这样做时，会`*Backtrace*`打开一个名为的缓冲区，`debugger-mode`其中包含以下内容：

```
Debugger entered--Lisp error: (void-variable closed)
  eval(closed nil)
  eval-last-sexp-1(t)
  eval-last-sexp(t)
  eval-print-last-sexp()
  (lambda (s) (goto-char (point-max)) (eval-print-last-sexp))(nil)
  apply((lambda (s) (goto-char (point-max)) (eval-print-last-sexp)) nil)
  url-http-activate-callback()
  url-http-content-length-after-change-function(589 3952 3363)
  url-http-generic-filter(#<process raw.github.com> ";;; el-get-install.el --- installer for the lazy
;;
;; Copyright (C) 2010 Dimitri Fontaine
;;
;; Author: Dimitri Fontaine <dim@tapoueh.org>
;; URL: http://www.emacswiki.org/emacs/el-get.el
;; Created: 2010-06-17
;; Keywords: emacs package elisp install elpa git git-svn bzr cvs apt-get fink http http-tar
;; Licence: WTFPL, grab your copy here: http://sam.zoy.org/wtfpl/
;;
;; This file is NOT part of GNU Emacs.
;;
;; bootstrap your el-get installation, the goal is then to use el-get to
;; update el-get.
;;
;; So the idea is that you copy/paste this code into your *scratch* buffer,
;; hit C-j, and you have a working el-get.

(let ((el-get-root
       (file-name-as-directory
    (or (bound-and-true-p el-get-dir)
        (concat (file-name-as-directory user-emacs-directory) \"el-get\")))))

  (when (file-directory-p el-get-root)
    (add-to-list 'load-path el-get-root))

  ;; try to require el-get, failure means we have to install it
  (unless (require 'el-get nil t)
    (unless (file-directory-p el-get-root)
      (make-directory el-get-root t))

    (let* ((package   \"el-get\")
       (buf       (switch-to-buffer \"*el-get bootstrap*\"))
       (pdir      (file-name-as-directory (concat el-get-root package)))
       (git       (or (executable-find \"git\")
              (error \"Unable to find `git'\")))
       (url       (or (bound-and-true-p el-get-git-install-url)
              \"http://github.com/dimitri/el-get.git\"))
       (default-directory el-get-root)
       (process-connection-type nil)   ; pipe, no pty (--no-progress)

       ;; First clone el-get
       (status
        (call-process
         git nil `(,buf t) t \"--no-pager\" \"clone\" \"-v\" url package)))

      (unless (zerop status)
    (error \"Couldn't clone el-get from the Git repository: %s\" url))

      ;; switch branch if we have to
      (let* ((branch (cond
                      ;; Check if a specific branch is requested
                      ((bound-and-true-p el-get-install-branch))
                      ;; Check if master branch is requested
                      ((boundp 'el-get-master-branch) \"master\")
                      ;; Read the default branch from the el-get recipe
                      ((plist-get (with-temp-buffer
                                    (insert-file-contents-literally
                                     (expand-file-name \"recipes/el-get.rcp\" pdir))
                                    (read (current-buffer)))
                                  :branch))
                      ;; As a last resort, use the master branch
                      (\"master\")))
             (remote-branch (format \"origin/%s\" branch))
             (default-directory pdir)
             (bstatus
               (if (string-equal branch \"master\")
                 0
                 (call-process git nil (list buf t) t \"checkout\" \"-t\" remote-branch))))
        (unless (zerop bstatus)
          (error \"Couldn't `git checkout -t %s`\" branch)))

      (add-to-list 'load-path pdir)
      (load package)
      (let ((el-get-default-process-sync t) ; force sync operations for installer
            (el-get-verbose t))         ; let's see it all
        (el-get-post-install \"el-get\"))
      (unless (boundp 'el-get-install-skip-emacswiki-recipes)
        (el-get-emacswiki-build-local-recipes))
      (with-current-buffer buf
    (goto-char (point-max))
    (insert \"\
Congrats, el-get is installed and ready to serve!\")))))
closed
") 
```

我是否认为文件中有错误`https://raw.github.com/dimitri/el-get/master/el-get-install.el`？还是我必须设置其他任何东西才能使这样的脚本正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:44:21.783

不知何故，下载的文件`closed`附加了一行，原始文件中不存在该行 - 不知道为什么，它不会发生在我身上。它在回溯的最后可见。

您可以复制整个`el-get-install.el`文件，粘贴到`*scratch*`其中并使用它进行评估`C-j`。

# backup - 启动文件存储/备份服务需要多少台服务器和哪些设备？

> ID：15642497
> 
> 赞同：-2
> 
> 时间：2013-03-26T16:35:28.277
> 
> 标签：backup, cloud, storage, amazon-cloudfront, remote-backup

我想开始自己的文件存储/备份服务，如 Dropbox、Skydrive、Box 等。我有 60000 个客户。我想给每个客户 1GB 的可用空间（终身）。这意味着我需要 60TB 的存储空间。我会不时为更多用户增加空间。我希望我的文件备份服务是基于云的、冗余的。你能告诉我需要多少台服务器和多强大的服务器吗？另外，提供强大的服务需要哪些设备、配件？我可以从哪里以最优惠的价格购买它们？请告诉我。另外，如果您有其他有关文件备份/存储服务的信息，请对我有所帮助。也随时问我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:46:14.277

您可以在 Amazon 的云基础设施之上构建自己的服务。看到这个：[http ://aws.amazon.com/backup-storage/](http://aws.amazon.com/backup-storage/)

# html - 我的#content div 的定位不起作用？

> ID：15642498
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:35:29.700
> 
> 标签：html, css

每当我为我的网页输入 HTML 时；它`#content div`位于小部件/侧边栏下方，我已经尝试过`position:absolute`- 这会导致我的图像无法重新调整大小。

```
#content {
    background: #fff;
    margin: 2px 0 2px;
    padding: 20px 62px;
    width: 68%;
    display: block;
    float: left;
    margin-left: 25%;
    /* rounded corner */
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    /* box shadow */
    -moz-box-shadow: 0px 0px 0px 0px #000000;
    -webkit-box-shadow: 0px 0px 0px 0px #000000;
    box-shadow: 0px 0px 0px 0px #000000;
}

/************************************************************************************
SIDEBAR
*************************************************************************************/
#sidebar {
    width: 25%;
    float: left;
    margin: 2px 0 2px;
}
.widget {
    background: #0b2d7e;
    margin: 0 0 0px;
    padding: 0px 20px;
    /* rounded corner */
    -webkit-border-radius: 0px;
    -moz-border-radius: 0px;
    border-radius: 0px;
    /* box shadow */
    -moz-box-shadow: 0px 0px 0px 0px #000000;
    -webkit-box-shadow: 0px 0px 0px 0px #000000;
    box-shadow: 0px 0px 0px 0px #000000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:47:16.333

我之前试图教给你的同样的教训。由于填充物，您的东西加起来不会达到 100%。你有 68% + 25% + 25% + 更多的填充 = 远远超过 100%。

如果一个盒子是 50% 宽，它的左右边距为 10px，边框为 1px，那么你就有 50% +20px+2px。

如果您有两个与上面完全相同的 div，则您有 100% +40px +40px +2px +2px = 超过 100%。

用于`box-sizing: border-box;`解决上面的填充和边框问题。然后你只需要考虑利润。

请参阅[我可以使用它](http://caniuse.com/#search=box-sizing)来确定盒子大小。

这是一个 JS Fiddle 修复你的代码......你也有一个`</aside>`不需要的流浪者。

[http://jsfiddle.net/a2YSa/1/](http://jsfiddle.net/a2YSa/1/)

请注意，在我提供的代码中，`box-sizing: border-box;`告诉 div 计算其宽度，包括填充和边框。然后我有 25% 大小的左列和一个 50% 右内容列，边距为 25% = 100%。

这是一个带有 25% 侧边栏和 75% 主边距的小提琴，边距为 0。

[http://jsfiddle.net/a2YSa/3/](http://jsfiddle.net/a2YSa/3/)

我最后一把小提琴的截图：

![在此处输入图像描述](../Images/87e341e121848306cfd6586deb7713b6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:42:36.003

我认为问题出在这里：

```
content width: 68%
content margin-left: 25%
sidebar width: 25% 
```

您目前使用超过 100%。如果这不是问题，请也发布 html 代码或使用 Firebug 检查宽度和填充/边距。这是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:37:32.200

您是否尝试过使用 firebug 来可视化问题？我认为您应该删除#content 上 25% 的左边距...

# c# - 单个 NSTabView 中的许多 NSTabViewItem

> ID：15642507
> 
> 赞同：2
> 
> 时间：2013-03-26T16:35:56.103
> 
> 标签：c#, xcode, cocoa, monomac

我有一个应用程序，其中选项卡根据配置文件的项目数动态绘制它（我知道，这不是最好的主意，而是客户端的要求）。问题是选项卡无法放入 NSTabView，它们被截断。我不知道 NSTabView 中的 Windows 中是否有许多选项卡的选项？

![在此处输入图像描述](../Images/ecbee6a5306ec981a49c4c88449668a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:42:52.437

这应该是可能的。我知道你把它标记为 c#，但这是一种 Objective-c 的方式。

我想象一个 NSArray 持有选项卡，然后在单击箭头时将数组对象作为选项卡添加和删除。

看看[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTabView_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTabView_Class/Reference/Reference.html)

看着：

```
– addTabViewItem:
– insertTabViewItem:atIndex:
– removeTabViewItem: 
```

# camera - THREE.js 使用轨道路径围绕物体旋转相机

> ID：15642512
> 
> 赞同：2
> 
> 时间：2013-03-26T16:35:59.653
> 
> 标签：camera, rotation, three.js, geometry

我正在努力解决这个问题。

在我的场景中，我有一个相机，它可以观察物体的质心。我有一些按钮可以沿着围绕对象的不可见球体（恒定半径）在特定视图（前视图、后视图……）上设置相机位置。

当我单击按钮时，我希望相机从其起始位置沿球体表面移动到结束位置。当相机移动时，我希望它保持固定物体的质心。

有没有人知道如何实现这一目标？

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-22T05:35:26.400

如果您很高兴/更喜欢使用基本三角函数，那么在您的初始化部分中，您可以这样做：

```
var cameraAngle = 0;
var orbitRange = 100;
var orbitSpeed = 2 * Math.PI/180;
var desiredAngle = 90 * Math.PI/180;
...
camera.position.set(orbitRange,0,0);
camera.lookAt(myObject.position); 
```

然后在你的渲染/动画部分你可以这样做：

```
if (cameraAngle == desiredAngle) { orbitSpeed = 0; }
else {
  cameraAngle += orbitSpeed;
  camera.position.x = Math.cos(cameraAngle) * orbitRange;
  camera.position.y = Math.sin(cameraAngle) * orbitRange;
} 
```

当然，您的按钮会修改原来的`desiredAngle`值（大概是 0°、90°、180° 或 270°），您需要围绕正确的平面旋转（我正在围绕上面的 XY 平面旋转），并且您可以使用`orbitRange`直到`orbitSpeed`你开心为止。

您还可以`orbitSpeed`在它沿着轨道路径移动时进行修改，以各种`cameraAngle`s 加速和减速以获得更平稳的行驶。此过程称为“补间”，如果您想了解更多信息，可以搜索“补间”或“补间”。我认为 Three.js 有补间支持，但从未研究过。

哦，还要记住将相机的`far`属性设置为大于，`orbitRadius`否则您将只能看到对象的前半部分，并且根据它是什么，这可能看起来很奇怪。

# gwt - 如何在 GXT 的 ContentPanel 上添加 LoadMask？

> ID：15642514
> 
> 赞同：1
> 
> 时间：2013-03-26T16:36:09.933
> 
> 标签：gwt, gxt

我正在使用 GXT 2.2.4。

是否有可能在 ContentPanel 上添加 LoadMask（就像 setLoadMask for Grid）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:47:29.447

该`Grid.setLoadMask`函数接受一个布尔值，并告诉网格当关联的加载器拉入更多项目（远程分页、排序、过滤等）时，`Component.mask(String)`and `Component.unmask()`. 这可以内置，因为 Grid 知道有一个加载器，它可以侦听来自（加载之前、加载异常、加载完成）的事件以启动和停止掩码。

在一个`ContentPanel`或其他`Component`没有内置加载程序等的情况下，您仍然可以拥有这种行为 -`panel.mask("Loading...")`在加载开始和`panel.unmask()`完成时调用类似的东西。

# ios - 自动布局 UIScrollView 约束奇怪的行为

> ID：15642518
> 
> 赞同：6
> 
> 时间：2013-03-26T16:36:16.780
> 
> 标签：ios, objective-c, uiscrollview, constraints, autolayout

我已经在这里阅读了 iOS6 发行说明和 Autolayout + UIScrollview 的一些相关主题，但是我有一个奇怪的错误，我不知道如何解决。

视图的层次结构是：

```
- View
-- UIScrollView
---- UIImageView
---- UILabel 
```

我通过 Interface Builder 在视图中添加了元素，启用了 Autolayout 并保留了默认约束。

我的标签有一个动态文本，它的高度是可消耗的（在 IB 中配置的行数 = 0）。我希望滚动视图自动适应图像视图+标签的高度。

以下是相关视图控制器类的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView.translatesAutoresizingMaskIntoConstraints = NO;
    self.imageView.translatesAutoresizingMaskIntoConstraints = NO;
    self.label.translatesAutoresizingMaskIntoConstraints = NO;

    self.imageView.image = [UIImage imageNamed:@"image.png"];

    self.label.text = @"Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text Text text END";
    [self.label sizeToFit];

    NSDictionary *viewsDictionnary = NSDictionaryOfVariableBindings(scrollView, imageView, label);
    [self.scrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[imageView]-20-[label]-10-|" options:0 metrics:0 views:viewsDictionnary]];

    self.imageView.userInteractionEnabled = YES;
    [self.imageView addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap)]];
}

- (void)tap
{
    [self.navigationController pushViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"View2"] animated:YES];
} 
```

如您所见，我正在为滚动视图添加垂直约束。这似乎运作良好，但我在控制台中有以下消息：

> 2013-03-26 16:24:49.072 测试[34704:11303] 无法同时满足约束。以下列表中的至少一个约束可能是您不想要的。试试这个：（1）查看每个约束并尝试找出您不期望的；(2) 找到添加了一个或多个不需要的约束的代码并修复它。（注意：如果您看到不理解的 NSAutoresizingMaskLayoutConstraints，请参阅 UIView 属性 translatesAutoresizingMaskIntoConstraints 的文档）（“”，“”）
> 
> 将尝试通过打破约束来恢复

现在是具体的错误：如果我向下滚动，然后单击图像转到第二个视图，然后单击返回返回当前视图，滚动视图将从先前位置开始，因为它是顶部的看法。而且我将无法滚动查看视图的顶部。

抱歉，我没有足够的声誉来发布图片，但您可以在此处下载示例项目以重现该错误：[https://docs.google.com/file/d/0B-sCDWMvn-KGS19sUkZnUFdWWTg/edit? usp=分享](https://docs.google.com/file/d/0B-sCDWMvn-KGS19sUkZnUFdWWTg/edit?usp=sharing)

感谢您的帮助，卢卡斯

编辑此处错误的解决方法：[UIScrollView wrong offset with Auto Layout](https://stackoverflow.com/questions/15345522/uiscrollview-wrong-offset-with-auto-layout/15350131#15350131)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:36:37.567

根据控制台中的消息。您来自 xib 的垂直约束与您在代码中添加的约束冲突。如果你只是想改变之间的垂直空间`imageView`，`label`然后在 xib 中进行。

关于你的错误。这是解决方案[点击此处](https://stackoverflow.com/questions/15345522/uiscrollview-wrong-offset-with-auto-layout/15350131#15350131)。

# c# - 获取图像的文件大小

> ID：15642523
> 
> 赞同：5
> 
> 时间：2013-03-26T16:36:25.623
> 
> 标签：c#, image

我在 C# 中搜索以获取图像的文件大小（以字节为单位）：

我以 base64 字符串获取图像，但在这种格式下，我的印象是无法获取文件大小。

所以我将它转换成这样的图像对象：

```
// Convert Base64 String to byte[]
byte[] imageBytes = Convert.FromBase64String(imageSrc);
MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);

// Convert byte[] to Image
ms.Write(imageBytes, 0, imageBytes.Length);
Image imageObj = Image.FromStream(ms, true); 
```

但我无法获得文件大小。我可以有尺寸或类型，但不能有文件大小。

请问您对此有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T16:40:58.500

您已经有了图像的大小（以字节为单位），您可以像这样获得它：

`imageBytes.Length`

据我了解，您不想将其转换为另一种格式，只需保存它，这样您就可以将字节直接保存到文件中，最简单的解决方案：

```
File.WriteAllBytes(string yourpath, byte[] yourbytes) 
```

# php - 为什么我的锚标签不能正常工作？

> ID：15642526
> 
> 赞同：1
> 
> 时间：2013-03-26T16:36:35.213
> 
> 标签：php, html, anchor, tableofcontents

所以我继续回答我自己的问题并创建了一个目录，它可以工作，它会吐出我想要的所有内容，接受锚标签不起作用。它不会跳转到相应的 h1-6 标签所在的页面。

我有以下 php：

```
public function table_of_contents(&$content, $HeaderParameter){
    //Creat Empty variables
    $HeaderNums = "";
    $ContentLink = "";
    $IndentLast = 1;
    //Creates a single string of header identifier. eg: "1234"
    foreach($HeaderParameter as $Num){
        $HeaderNums.= $Num;
    }
    //Setup header to search for our headers specified by user
    if (preg_match_all('/<h(['.$HeaderNums.'])(.*?)>(.*?)(<\/h['.$HeaderNums.']>)/', $content, $Result)){
        // Start Table
        $ContentLink.="<ul id='TB_UL'>";
        // Go through each result and add to our list
        foreach ($Result[0] as $key => $title){
            //Get header text
            $HeaderText = strip_tags($Result[0][$key]);
            // If user assign an ID then get it so that we can add our on
            $TagIdRegexOutput = split('"',$Result[2][$key]);
            // Check if user has already set an id, if so use theres
            if($TagIdRegexOutput[0]){
                $TagRef = $TagIdRegexOutput[1];
            }
            else{
                $TagRef = $HeaderText;
            }
            //Set a level.
            $IndentPosCurrent = $Result[1][$key];
            //Create link to header
            $ContentLink.='<li class="TB_Level' . $Result[1][$key] .'"><a class="TB_Link" href="#'.$TagRef.'">'.$HeaderText.'</a>'.'</li>';
            // Create header tag
            $HeaderTag = "h".$Result[1][$key];
            // Replace header in content with our assign id
            $content = str_replace($Result[0][$key], "<$HeaderTag"." id='$TagRef' ".">$HeaderText</$HeaderTag>", $content);
        }
        // End List
        $ContentLink.="</ul> <!-- TB_Main-->";
    }
    echo $ContentLink;      
} 
```

像这样吐出html：

```
<ul id="TB_UL">
    <li class="TB_Level1"><a class="TB_Link" href="#Test">Test</a></li>
    <li class="TB_Level2"><a class="TB_Link" href="#More Test">More Test</a></li>
</ul> 
```

#Test 和 #More 测试是：`<h1>Test</h1>`和`<h2>More Test</h2>`

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:39:54.103

将锚标记添加到 HTML 中的正确位置或使用`id`s:

锚：

```
<h1><a name="Test">Test</a></h1> 
```

ID：

```
<h1 id="Test">Test</h1> 
```

编辑：我建议第二种方法，因为我认为该`name`属性不再对 HTML5 中的锚标记有效：http: [//www.w3.org/html/wg/drafts/html/master/obsolete.html#obsolete- but-conforming-features](http://www.w3.org/html/wg/drafts/html/master/obsolete.html#obsolete-but-conforming-features) （感谢@Alohci 提供下面的链接）。另一方面，如果您必须在非常旧的浏览器上支持大量用户，那么第一个更可取。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T16:38:06.257

`#`-links 去一个锚标签：

```
<a name="Test">Anchor</a>
<a href="#Test">Go to Anchor</a> 
```

您在该输出中没有任何内容。

# eclipse - 如何在 Eclipse 上绑定 fn + delete？

> ID：15642528
> 
> 赞同：2
> 
> 时间：2013-03-26T16:36:41.727
> 
> 标签：eclipse, macos, keyboard-shortcuts

我在 MacBook Air 上使用 Eclipse Juno。

在大多数 OS X 应用程序中，`fn + delete`删除下一​​个字符。但这不适用于我的 Eclipse 安装。我试图更改密钥配置，但`fn + delete`在对话框中不起作用。

![在此处输入图像描述](../Images/17ebcbf7a57b3e8f0c179e38691dcd31.png)

我如何`fn+delete`在这里绑定密钥？

# mysql - 创建 mysql 用户以从 PHP 连接

> ID：15642533
> 
> 赞同：-2
> 
> 时间：2013-03-26T16:36:55.097
> 
> 标签：mysql, nginx, centos, php

```
CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost' WITH GRANT OPTION; 
```

但是当我尝试从 PHP 连接时：

```
mysql_connect("localhost", "newuser", "password"); 
```

对于新用户，我得到：

```
Access denied for user 'newuser'@'localhost' (using password: YES) 
```

但root连接成功。

为什么“新用户”无法连接？

它很奇怪，但是当 mysql_connect 显示错误时，使用 PDO 我可以成功连接。也许 PHP 版本 5.4.13 的 mysql_connect 函数有一些问题。

**已解决：**开发人员使用 mysql_connect("127.0.0.1", "newuser", "evtevtetv$q"); 和 php 将 evtevtetv* *$q* * 识别为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:48:28.203

如果你试试这个呢？

```
CREATE USER 'newuser';
GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:48:29.567

尝试这个

```
CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON * . * TO 'newuser'@'localhost' WITH GRANT OPTION; 
```

WITH GRANT OPTION 意味着您授予权限的用户可以进一步授予它。

我们从不将它与创建用户命令一起使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:55:34.193

1.  可以通过命令行连接吗？像这样

    ```
    mysql -u newuser -p 
    ```

    如果可以，那么它可能是您的 PHP 的问题。

2.  有时您需要重新启动 MySQL 才能使更改生效。

3.  就像 Alexey 所说，尝试`@'localhost'`从查询中删除 以创建用户名，因为这可能会导致问题。

4.  `mysql -u root -p`您还应该通过以 root ( ) 身份登录 MySQL 并查看用户是否存在`SELECT * FROM mysql.user;`并查看用户名是否存在以及权限是否正确来确保实际创建了用户。

# java - 如何让我的 Setter 与我的单独班级互动？

> ID：15642536
> 
> 赞同：0
> 
> 时间：2013-03-26T16:37:11.880
> 
> 标签：java, arrays, setter

```
public class Thing
{
public static void main (String[] args)
    {
    //I set my veriables and prompt user to enter number of names
    //Prompt user for First and Last name and Store names in an array of classes

    Arrays.sort(listOfName, new Comparator<otherClass>()//Sort names according to last name
    //code here for that (which i have but not the issue)
    for (int i = 0; i<numName; i++)
        {
        ans = JOptionPane.showInputDialog(null,"How Many Students does: \n "+ listOfName[i]+ " Have");
        int val = Integer.parseInt(ans);
        otherClass.setnumStudents(val);// in my Separate class I have a setnumStudents
        }
    for(int i = 0; i<numName; i++)
        {
        System.out.println(listOfName[i]);
        }
    } 
```

在我的程序的早些时候，我将数组设置为根据单独的类进行存储，`otherClass`最初`int numStudents`设置为 0，在收集名字和姓氏之后，我将数组按字母顺序排列，然后查询每个人有多少学生。使用 setter`setnumStudents`我尝试更改`numStudents`存储在数组中。使用我的代码，我得到这个错误：

```
non-static method setnumStudents(int) cannot be referenced from a static context
        otherClass.setnumStudents(val);
             ^ 
```

感谢您对此问题的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:43:26.947

我想你想要：

```
listOfName[i].setnumStudents(val); 
```

或者沿着这条线的东西。Java 编码约定通常具有以大写开头的驼峰式命名的类名。是`otherClass`类名吗？应该是`OtherClass`为了避免混淆。

我不知道'listOfTutor [i]'是否是正确的实例，`listofName[i]`但您需要找到一个*实例*`otherClass`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:41:11.500

> 不能从静态上下文引用非静态方法 setnumStudents(int)

意味着您正在使用类访问非静态方法，而您应该使用实例（对象）。

在下面的

```
otherClass.setnumStudents(val); 
```

otherClass 是您提到的其他类的名称吗？在这种情况下，您需要实例化此类并使用该实例。

顺便说一句，在 Java 中，类名通常以约定的大写字母开头。

# wkhtmltopdf - wkhtmltoimage 快照中的 CSS3 渐变渲染

> ID：15642538
> 
> 赞同：5
> 
> 时间：2013-03-26T16:37:14.107
> 
> 标签：wkhtmltopdf, wkhtmltoimage

我正在使用 wkhtmltoimage 为我的网站呈现包含背景渐变的快照，但它没有显示在生成的快照中。

我尝试在 Ubuntu 和 Windows 上使用，但找不到错误。

我什至尝试使用不带任何参数的最简单命令。

```
wkhtmltoimage.exe <website_link> <image_name> 
```

我的原始页面在所有主要浏览器中看起来都一样 这是屏幕打印![在此处输入图像描述](../Images/f48eadcb443f497275d07f2246f53450.png)

这是由 wkhtmltoimage 生成的 ![在此处输入图像描述](../Images/086812b2f5aa92b3171c4c23fbf358fe.png)

我不确定到底是什么问题。我也尝试查看他们现有的问题，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-06T23:09:18.817

您是否检查了渐变语法。wkhtmltopdf 使用 webkit 语法。

```
 background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgb(64,128,176)),color-stop(100%,rgb(1,73,129)));
  background:linear-gradient(to bottom,rgb(64,128,176) 0%,rgb(1,73,129) 100%); 
```

第二种语法不计入 wkhtmltopdf，但第一种适用于我拥有的 wkhtmltopdf 版本（0.10.0 rc2）。

我还发现现代 webkit 语法不起作用。即这不起作用

```
background: -webkit-linear-gradient(top, #ccc 0%, #888 100%); 
```

按照这个：[stackoverflow条目](https://stackoverflow.com/questions/27565176/how-can-i-get-wkhtmltopdf-to-display-th-and-td-background-gradients)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T22:42:39.583

与 wkhtmltopdf 的 0.12.2.1 一样，渐变 css - 旧的或新的都不起作用。

# blackberry - 黑莓推送通知客户端示例

> ID：15642546
> 
> 赞同：0
> 
> 时间：2013-03-26T16:37:26.063
> 
> 标签：blackberry, push-notification

我正在尝试安装启用了推送通知的示例应用程序。

我从这里下载示例代码：[BB 示例应用](https://developer.blackberry.com/java/documentation/download_build_sample_app.html)

在设备上，当我点击注册时出现错误：

```
Some of the setting are empty or NULL. Please make sure that all of
the following are set in the application settings: application ID , 
content provider URL, and BPS URL 
```

我到底该怎么做我不明白这个错误。

另外我应该怎么做才能启用 BIS？我不是BB用户，我只需要为它开发一个应用程序，但我以前没有使用它的经验。手机附带一张可上网的 SIM 卡。这意味着BIS已启用？

我正在为 OS < 7.x 开发

# javascript - jQuery 错误：replaceWIth/html 破坏了我的 DOM（所有标签都超出了表单标签）

> ID：15642549
> 
> 赞同：1
> 
> 时间：2013-03-26T16:37:32.187
> 
> 标签：javascript, jquery

我有桌子，我需要改变其中的一些东西。我想通过ajax来做到这一点：用户点击“更改”按钮，一些字段转换为可编辑，然后用户可以保存它。代码很简单：

```
$(".edit_button").click(function(event){
    event.preventDefault();
    var trContainer = $(this).closest('tr');
    trContainer.replaceWith(content);
}); 
```

在原始代码中，我通过 $.GET 下载页面，然后将其存储在“内容”变量中。结构是（简化的）：

```
<tr>
<form>
<td></td> // -- note, <td> are inside of <form>
<td></td>
</form>
</tr> 
```

所以，我希望表格行会改变。而且它正在改变！......但问题是，加载元素的 DOM 被破坏了。一切都脱离了形式标签。我使用 Google Chrome 控制台观看 DOM，我看到替换的 DOM 看起来像（简化）

```
<tr>
<form></form> // -- here, why <form> is empty?
<td></td>
<td></td>
</tr> 
```

所以，我的输入标签没有包装在表单中。

我建立了简约的例子，检查一下。单击“更改”，然后观察 DOM 并将其与内容字符串进行比较。

[http://jsfiddle.net/Es8fQ/3/](http://jsfiddle.net/Es8fQ/3/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T16:41:30.520

您正在附加无效的 HTML。

TD 元素只能在表格内，不能是表单元素的直接子元素，因此浏览器会自动关闭表单标签以尝试修复您所犯的错误。

解决方案是在附加之前确保您的 HTML 有效。

# for-loop - OpenMP 中的嵌套循环与非共享外循环

> ID：15642551
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:37:41.787
> 
> 标签：for-loop, parallel-processing, openmp, nested-loops

我正在尝试使用 open mp 并行化前缀总和。我的代码是

```
int a ,rem,d;
#pragma omp parallel private (a,rem,d)
for( d =0 ; d < N ; ++d) //need not parallelize
{

    #pragma omp barrier
    #pragma omp for
    for (int k = 1; k <= size ; ++k) //has to be parallelized
    {

        a = k + (2 ^ (d+1))-1;
        rem = a % (2^d);
        if ( rem == 0 && a <= size)
        {
            b = k;
            first[a]+= first[b];

        }

    }
} 
```

运行代码时出现浮动异常错误。当我使用 d 的值时，我相信错误在 int rem 中。有人可以帮助我。在 d 的每个值之后，必须对线程进行同步，所以我使用了 pragma 屏障。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:12:52.930

解决方案是微不足道的。并行化没有错误。错误出现在幂函数中。在 c 中 ^ 指的是 XOR。我将其更改为 pow(2,d) 并且效果很好

# python - ** 后的 reverse() 参数必须是映射

> ID：15642559
> 
> 赞同：14
> 
> 时间：2013-03-26T16:38:03.280
> 
> 标签：python, django, django-1.2

我有一个在提交时不起作用的题词表格

我收到此错误：

**** 之后的 reverse() 参数必须是映射，而不是 str**

这是我的观点：

```
def inscription(request, seance_id):
    seance = get_object_or_404(Variant, id=seance_id)
    inscription_config = {'form_class': InscriptionForm,
                          'extra_context': {'seance': seance}}    

    return create_object(request, **inscription_config) 
```

我的表格：

```
class InscriptionForm(forms.ModelForm):
    class Meta:
        model = Inscription

    def clean(self):
        cleaned_data = self.cleaned_data
        email = cleaned_data.get("mail")
        mail_confirmation = cleaned_data.get("mail_confirmation")

        if email != mail_confirmation:
            raise forms.ValidationError("Les deux adresses mails doivent correspondre")

        return cleaned_data 
```

似乎触发错误的是返回语句中的****inscription_config**

但我不知道为什么，从昨天开始我一直在寻找

**编辑**

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8039/formations/inscription/1/
Django Version: 1.2.5
Python Version: 2.7.2
Installed Applications:
['django.contrib.auth',
 'django.contrib.comments',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.admin',
 'ckeditor',
 'constance',
 'constance.backends.database',
 'custom_flatpages',
 'django_extensions',
 'django_mobile',
 'django_xmlrpc',
 'easy_thumbnails',
 'gestion_formations',
 'file_uploader',
 'less',
 'mptt',
 'contact',
 'newsletter',
 'pagination',
 'south',
 'sentry',
 'sentry.client',
 'indexer',
 'paging',
 'contentadmin',
 'gallerie']
Installed Middleware:
('annoying.middlewares.StaticServe',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'pagination.middleware.PaginationMiddleware')

Traceback:

File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  100\.                     response = callback(request, *callback_args, **callback_kwargs)
File "/home/anass/projects/c139_fc_finance/fc_finance/gestion_formations/views/carts.py" in inscription
  24\.                          form_class= InscriptionForm 
File "/usr/local/lib/python2.7/dist-packages/django/views/generic/create_update.py" in create_object
  118\.             return redirect(post_save_redirect, new_object)
File "/usr/local/lib/python2.7/dist-packages/django/views/generic/create_update.py" in redirect
  65\.         return HttpResponseRedirect(obj.get_absolute_url())
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py" in _curried
  55\.         return _curried_func(*(args+moreargs), **dict(kwargs, **morekwargs))
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in get_absolute_url
  969\.     return settings.ABSOLUTE_URL_OVERRIDES.get('%s.%s' % (opts.app_label, opts.module_name), func)(self, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/__init__.py" in inner
  32\.         return reverse(bits[0], None, *bits[1:3])
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in reverse
  351\.             *args, **kwargs)))

Exception Type: TypeError at /formations/inscription/1/
Exception Value: reverse() argument after ** must be a mapping, not str 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-04T18:07:44.470

我尝试回答，因为我遇到了同样的问题，但没有在网上找到答案。

我认为这个问题的根源是错误的`get_absolute_url(...)`方法。例如，如果你这样写：

```
@models.permalink
def get_absolute_url(self):
    return reverse('my_named_url', kwargs={ "pk": self.pk }) 
```

然后它引发异常`reverse() argument after ** must be a mapping, not str`。修复它删除`@models.permalink`装饰器，如下：

```
def get_absolute_url(self):
    return reverse('my_named_url', kwargs={ "pk": self.pk }) 
```

或者保留装饰器并修改主体，如下所示：

```
@models.permalink
def get_absolute_url(self):
    return ('my_named_url', (), { "pk": self.pk }) 
```

不过，我认为后者已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-11T06:30:23.793

顽皮的逗号

```
return redirect(reverse_lazy('team-detail', kwargs={'pk', team.pk})) 
```

它应该是

```
return redirect(reverse_lazy('team-detail', kwargs={'pk': team.pk})) 
```

# facebook-graph-api - 如何在没有脚本的情况下从页面管理员获取页面访问令牌

> ID：15642564
> 
> 赞同：0
> 
> 时间：2013-03-26T16:38:10.110
> 
> 标签：facebook-graph-api

对于客户，我必须在他们的网站上展示一些喜欢他们的 Facebook 页面的人的照片。为此，我假设我需要一个页面访问令牌。我只需要一次我猜，所以我怎么能轻松地从我的客户那里得到这个，而无需编程？例如，我可以给客户一个 URL，然后给他一个访问令牌，他可以给我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:51:31.893

从理论上讲，您可以，但它通过在显而易见的地方传递访问令牌来破坏身份验证的目的。

您首先需要 dialog/oauth url 来获取具有`manage_pages`权限的用户访问令牌

`https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=YOUR_URL&scope=manage_pages`

然后你请求页面的访问令牌

`https://graph.facebook.com/PAGE_ID?fields=access_token&access_token=USER_ACCESS_TOKEN`

确保令牌的方法是为您的客户端编写登录页面，以便他们可以安全地传递访问令牌，然后将页面令牌保存到数据库中。

您是正确的，因为页面令牌没有过期，您只需要一次。

在显示喜欢粉丝页面的用户图片的情况下，这在 API 中是不可能的。您只能使用 Like Box 插件来做到这一点。

# c# - 创建 HTTP 请求以返回 Json 数据

> ID：15642568
> 
> 赞同：0
> 
> 时间：2013-03-26T16:38:22.487
> 
> 标签：c#, asp.net, json

我正在创建一个 asp.net c# 网站，基本上允许人们选择一个 PC 组件，然后我想做一个网络搜索并找到最便宜的价格。我正在使用 Google Shopping API 并且知道如何创建 URL 来搜索特定产品并显示 json 数据。

我想要一些关于如何编写 HTTP 请求、返回 json 数据文件并将其转换为显示在网页上的建议。理想情况下，我想在后面的代码中执行此操作以单击按钮。我对这一切都很陌生，所以非常感谢任何帮助。

到目前为止，我只有：

> ```
>  HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://www.googleapis.com/shopping/search/v1/public/products?key={KEY}&country=UK&q=BX80637153570K&rankBy=price:ascending&maxResults=1&alt=json");
>         HttpWebRequest.Method = WebRequestMethods.Http.Get; 
> ```

并且不知道下一步该做什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:44:00.823

我的一个项目中有这样的东西：

```
public string HttpGet(string url)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    try {
        using (Stream stream = response.GetResponseStream()) {
            StreamReader reader = new StreamReader(stream);

            return reader.ReadToEnd();
        }
    } finally {
        response.Close();
    }
} 
```

然后我可以这样做：

```
string json = HttpGet("http://www.example.com/"); 
```

我正在检查诸如检查内容类型等内容`application/json`并只是阅读内容。你可能想这样做。

获得 JSON 字符串后，您可以使用 Json.NET 或 .NET 的内部反序列化器将其变成有用的东西。我更喜欢 Json.NET，例如：

```
dynamic obj = JObject.Parse(json); 
```

然后，您可以`obj`随心所欲地做任何事情。

# assembly - 是否有工具可以自动检测特定代码使用了哪种汇编语言？

> ID：15642569
> 
> 赞同：0
> 
> 时间：2013-03-26T16:38:23.957
> 
> 标签：assembly

我只是偶然发现了一些汇编代码并想组装它。但是我不知道要使用哪个汇编程序，因为我不知道是用哪种汇编语言编写的。

是否有软件可以识别所使用的汇编语言？

代码可以在[这里](http://pastebin.com/uExT2Y9h)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:43:53.080

好吧，它看起来确实像基于寄存器（CX 等）的 x86 汇编代码。

基于它处理软盘驱动器扇区的事实，我会冒险 8086、8088 或 80286、80386 或 80486。

但这只是我的猜测——根据信息很难确定。

# log4net - 从 log4net 配置部分访问 appSettings 配置值

> ID：15642570
> 
> 赞同：6
> 
> 时间：2013-03-26T16:38:25.390
> 
> 标签：log4net

有谁知道是否可以从同一文件中的 log4net 配置部分的配置文件的 appSettings 部分访问键/值（不使用代码）？

例如：

```
<appSettings>
    <add key="Environment" value="DEV" />
    <!-- etc -->
</appSettings>
<log4net>
    <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
    <file value="${APPDATA}\MyApp\${Environment}\MyApp.log" />
    <!-- etc -->
</log4net> 
```

似乎没有任何文档，所以我不抱希望......如果一切都失败了，我将在文件值中添加“DEV”并将其替换为 appSettings 的环境变量。

提前致谢，

抢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-12-04T09:23:55.317

您应该使用*log4net.Util.PatternString作为文件类型，并使用**%appSetting{SETTING}*引用应用程序设置

 *请参见下面的代码：

```
<appSettings>
    <add key="Environment" value="DEV" />
    <!-- etc -->
</appSettings>
<log4net>
    <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString"
        value="${APPDATA}\MyApp\%appSetting{Environment}\MyApp.log"/>
    <!-- etc -->
</log4net> 
```

希望这仍然有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:19:42.403

如果你看看我对这个问题的回答：

[自定义 log4net 属性 PatternLayoutConverter（带索引）](https://stackoverflow.com/questions/3961815/custom-log4net-property-patternlayoutconverter-with-index)

您将找到一个自定义 PatterLayoutConverter 的示例。在示例的情况下，我将其命名为：KeyLookupPatternConverter。

为方便起见，这里是：

```
namespace Log4NetTest
{
  class KeyLookupPatternConverter : PatternLayoutConverter
  {
    protected override void Convert(System.IO.TextWriter writer, LoggingEvent loggingEvent)
    {
      //Use the value in Option as a key into the "application settings" stored on the main form.
      string setting;
      if (Form1.AppSettings.TryGetValue(Option, out setting))
      {
        writer.Write(setting);
      }
    }
  }
} 
```

以下是您将如何配置它：

```
 //Log the "sessionid" and "userid" values from our "application settings" object
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%d [%t] %-5p [session = %KLPC{sessionid}] [user = %KLPC{userid}] %m%n"/>
    <converter>
      <name value="KLPC" />
      <type value="Log4NetTest.KeyLookupPatternConverter" />
    </converter>
  </layout> 
```

在配置中，我是说从表单的 AppSettings 中获取“KLPC”设置。

在您的情况下，您希望从配置文件的 appSettings 中获取您的值。修改我提供的示例应该很容易，将从表单的 AppSettings 中检索设置的代码替换为从配置文件的应用程序设置中检索设置的代码。

如果您采用这条路线，您的 AppSettingPatternConverter 可能看起来像这样（未经测试）：

```
 class AppSettingsPatternConverter : PatternLayoutConverter
  {
    protected override void Convert(System.IO.TextWriter writer, LoggingEvent loggingEvent)
    {
      //Use the value in Option as a key into the "application settings" stored on the main form.
      string setting = ConfigurationManager.AppSettings[Option];
      if (string.IsNullOrWhitespace(setting))
      {
        setting = string.Format("No setting value for key[{0}]", Option);
      }

      writer.Write(setting);
    }
  } 
```

您可以像这样配置它：

```
 //Log the "Name" setting from the application settings object
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%d [%t] %-5p [name = %AppSetting{Name}] %m%n"/>
    <converter>
      <name value="AppSetting" />
      <type value="Log4NetTest.AppSettingPatternConverter" />
    </converter>
  </layout> 
```

你说你想在不编写代码的情况下做到这一点。我不确定它是否可以完成，但使用我上面展示的方法非常常见且非常简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T13:02:36.233

感谢@wageoghe 的帮助。最后，我决定再次将环境值添加到配置文件中（为简单起见）：

```
<log4net>
    <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
    <file value="${APPDATA}\MyApp\DEV\MyApp.log" />
    <!-- etc -->
</log4net> 
```*

# symfony - Service（使用服务工厂）返回不同类型的对象

> ID：15642572
> 
> 赞同：4
> 
> 时间：2013-03-26T16:38:29.723
> 
> 标签：symfony, symfony-2.2

我需要创建一个服务，它使用另一个工厂服务，并返回不同类型的对象。
这是我的服务的定义：

```
services:
    games.search_factory:
        class: %games.search_factory.class%
        calls:
           - [ setContainer, ["@service_container"] ]

    games.search:
        class: %games.search.base.class%
        factory_service: games.search_factory
        factory_method: get 
```

我的`%games.search_factory.class%` *get*方法根据请求参数返回不同的对象。
我`%games.search.base.class%`的是抽象的。
我的目标是 - 当我打电话时

```
$this->get("games.search"); 
```

我想得到工厂方法的结果。但是当我运行代码时，我得到一个错误：**FatalErrorException: Error: Cannot instantiate abstract class**。

所以我有两个问题：

1.  为什么 DI 系统尝试实例化我的类，而不是返回我的工厂方法的结果？
2.  有没有办法实现我需要的东西（简洁明了）？

**更新：**我在代码部分有一个错误，这里没有显示。除了这两个用于搜索的服务之外，我还为每种搜索类型提供了一个服务，并从工厂返回了这些服务。但是在这些服务的定义中，我使用了我的基类（它是抽象的）作为一个类。

很好的结论是***可以从工厂返回不同类型的对象。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:56:28.383

从这里：[http ://symfony.com/doc/current/components/dependency_injection/factories.html](http://symfony.com/doc/current/components/dependency_injection/factories.html)

> 当您指定要用于工厂的类时（通过 factory_class），该方法将被静态调用。如果应实例化工厂本身并调用生成的对象的方法（如本例所示），请将工厂本身配置为服务

为了将容器注入您的工厂，您需要使工厂可实例化（非抽象）或将容器作为参数传递给静态 get 方法。我不知道有什么方法可以将服务声明为静态的。

# javascript - 不同的图表在同一个 使用 d3.js

> ID：15642574
> 
> 赞同：0
> 
> 时间：2013-03-26T16:38:33.117
> 
> 标签：javascript, html, d3.js

在我第一次使用库[d3.js 时](https://github.com/mbostock/d3)，我发现了一个我不知道如何解决的问题。我正在尝试表示我从同一网络服务中收到的数据`<div>`。它是这样工作的：

1.  用户在下拉菜单中选择一个日期。
2.  用户点击按钮。
3.  请求服务器。
4.  （如果一切顺利）响应 JSON 数据。
5.  在图表中表示数据

这可以在同一页面中重复多次，并且应该更新图表。

我试图在同一个 div 中表示这些图表。这是HTML：

```
<html>
<head></head>
<body>

<div id="featured-results">
User message I want to remove
</div>
<div id="featured-content">
</div>
</body>
</html> 
```

这是javascript代码：

```
<script type="text/javascript">
function test(){                                
    var ip = location.host;
    var data = [];
    var req = $.ajax({
        url: 'http://...' ,
        type: 'GET',
        contentType: 'application/json',
        cache: 'true',
        success: function(response){
            data = response;
        }
    });
    $.when(req).done(function(){
        var barWidth = 9;
        var width = 950;
        var height = 350;

        var x = d3.scale.linear().domain([0, 96]).range([0, width]);
        var y = d3.scale.linear().domain([0, 1000]).rangeRound([1, height - 50]);

        d3.select("#featured-results").remove();                           

        var chart = d3.select("#featured-content")
            .append("svg:svg")
            .attr("width", width)
            .attr("height", height);

        chart.selectAll("rect")
            .data(data.values)
            .enter()
            .append("svg:rect")
            .attr("x", function(datum, index){return x(index);})
            .attr("y", function(datum){return height - y(datum.energy);})
            .attr("height", function(datum){return y(datum.energy);})
            .attr("width", barWidth)
            .attr("fill", "#2d578b");                                        
     });
}
</script> 
```

此代码删除了一个 div，我在其中向用户显示一条消息并在 `<div id="featured-content">`div 中表示图表，但是当我请求新图表时，新图表将附加到 div 中，然后我看到两个、三个、...

我怎样才能做到这一点？这是任何“最佳实践”吗？谢谢

**更新：**如果我删除所有 svg 不代表当前图表

```
d3.select("#featured-results").remove();

d3.selectAll("svg:svg").remove();
var chart = d3.select("#featured-content") 
    .append("svg:svg")
    .attr("width", width)
    .attr("height", height);

chart.selectAll("rect")
    .data(data.values)
    .enter()
    .append("svg:rect")
    .attr("x", function(datum, index){return x(index);})
    .attr("y", function(datum){return height - y(datum.energy);})
    .attr("height", function(datum){return y(datum.energy);})
    .attr("width", barWidth)
    .attr("fill", "#2d578b"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:41:19.433

通常的方法是用和切换两个`div`s 的可见性。`show()``hide()`

使用 d3.js 加载新内容将附加到任何现有内容。如果您不希望这样，请使用`d3.select("#featured-content").html('');`.

# jquery - jQuery：（实时）动态添加元素上的滚动事件处理程序？我还应该如何解决这个问题

> ID：15642575
> 
> 赞同：0
> 
> 时间：2013-03-26T16:38:37.583
> 
> 标签：jquery, scroll, live

我有一个（动态添加的）元素，它基于水平滚动重新定位，这意味着它可以离开屏幕。附加到该元素，还有另一个可能不会离开屏幕，它必须留在屏幕上。所以我的想法是使用一个事件处理程序，它在你滚动时询问元素的位置。如果 position-left 属性低于某个数字，则附加的元素将重新定位。

你知道这些元素，它就像一个菜单/导航，它会随着你滚动到某个点，然后看起来是固定位置的。

我试过这个，但它不起作用，可能是因为元素是用 javascript 添加的。我也试过`live("scroll"..`了，但这也没有用。

```
$(window).scroll(function(ev) { 
alert($("#scrElem").position().left);
  alert("work");    
  if ($("#scrElem").position().left >= 203) {
      $("#scrElem .attElem").css("left", ($("#scrElem").position().left - 203) + "px");
    };
}); 
```

**编辑：**

也许这有帮助：我正在使用 tinyscrollbar 插件，这是它的可读版本（[http://baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js](http://baijs.nl/tinyscrollbar/js/jquery.tinyscrollbar.js)）。基本上这个插件在滚动时触发事件。这就是我想要的，我什至看到了他在哪里做的：

```
oWrapper[0].addEventListener( 'DOMMouseScroll', wheel, false );
oWrapper[0].addEventListener( 'mousewheel', wheel, false );
oWrapper[0].addEventListener( 'MozMousePixelScroll', function( event ){
  event.preventDefault();
}, false); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-15T19:48:04.543

这个解决方案的问题：

```
var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? "DOMMouseScroll" : "mousewheel"; 
```

是当我通过单击滚动条并拖动它滚动时它不起作用。

我意识到你不需要附加滚动事件，就好像它是一个动态元素一样。只需将其视为静态的：

```
$("#scrElem").on('scroll', function(e){
 // do my position stuff
}); 
```

而且效果很好！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T12:15:17.943

在寻找不同的问题时，我幸运地找到了一种方法来使它在我的情况下工作：

```
var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? "DOMMouseScroll" : "mousewheel" 
$("#scrElem").live(mousewheelevt, function(e){
 // do my position stuff
}); 
```

就这么简单，它有效！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T17:51:03.723

这独立于您将附加到容器的对象将起作用，但不要破坏 .main_container

```
$(document).on('scroll', '.main_container', function() {

}); 
```

# python - 未调用 pyinotify 方法

> ID：15642578
> 
> 赞同：1
> 
> 时间：2013-03-26T16:38:49.977
> 
> 标签：python, linux, inotify, pyinotify

我想创建一个监视文件夹的模块。我写了一些代码：

```
import os, pyinotify

class FileWatcher:
    def start_watch(self, dir):
        wm = pyinotify.WatchManager()
        self.notifier = pyinotify.Notifier(wm, EventProcessor())
        mask = pyinotify.IN_CREATE | pyinotify.IN_MODIFY | pyinotify.IN_DELETE | pyinotify.IN_DELETE_SELF | pyinotify.IN_MOVED_FROM | pyinotify.IN_MOVED_TO
        wdd = wm.add_watch(dir, mask, rec=True)
        while True:
            self.notifier.process_events()
            if self.notifier.check_events():
                self.notifier.read_events()

    def stop_watch(self):
        self.notifier.stop()
        print ('\nWatcher stopped')

class EventProcessor(pyinotify.ProcessEvent):
    def process_IN_CREATE(self, event):
        print('in CREATE')

    def process_IN_MODIFY(self, event):
        print('in MODIFY')

    def process_IN_DELETE(self, event):
        print('in delete')

    def process_IN_DELETE_SELF(self, event):
        print('in delete self')

    def process_IN_MOVED_FROM(self, event):
        print('in MOVED_FROM')

    def process_IN_MOVED_TO(self, event):
        print('in IN_MOVED_TO')

if __name__ == "__main__":
    watcher = FileWatcher()
    try:
        folder = "/home/user/Desktop/PythonFS"
        watcher.start_watch(folder)
    except KeyboardInterrupt:
        watcher.stop_watch() 
```

当我修改文件然后将其删除时，从未调用过 process_IN_MODIFY 和 process_IN_DELETE 方法。猫我怎么解决？

但是当我创建一个文件时，方法 process_IN_CREATE() 被调用。

操作系统是 Linux mint 13。

**UPD：新代码**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:29:47.050

试试下面的代码。它与您的代码基本相同；我只加了

```
f = FileWatcher()
f.start_watch('/tmp/test', None) 
```

最后开始一个`FileWatcher`. 确保该目录`/tmp/test`存在，否则将该行更改为指向现有目录。

如果文件`foo`中存在`/tmp/test`，并且如果我修改此文件，则上述程序将打印

```
in create   # after modification
in modify   # after saving
in modify
in delete 
```

现在，如果我删除文件，程序会打印：

```
in delete 
```

* * *

```
import os
import pyinotify

class FileWatcher:
    notifier = None

    def start_watch(self, dir, callback):
        wm = pyinotify.WatchManager()
        self.notifier = pyinotify.Notifier(wm, EventProcessor(callback))
        mask = (pyinotify.IN_CREATE | pyinotify.IN_MODIFY | pyinotify.IN_DELETE
                | pyinotify.IN_DELETE_SELF | pyinotify.IN_MOVED_FROM
                | pyinotify.IN_MOVED_TO)
        wdd = wm.add_watch(dir, mask, rec=True)
        while True:
            self.notifier.process_events()
            if self.notifier.check_events():
                self.notifier.read_events()

class EventProcessor(pyinotify.ProcessEvent):
    def __init__(self, callback):
        self.event_callback = callback

    def process_IN_CREATE(self, event):
        # if self.event_callback is not None:
        # self.event_callback.on_file_created(os.path.join(event.path,
        # event.name))
        print('in create')

    def process_IN_MODIFY(self, event):
        # if self.event_callback is not None:
        # self.event_callback.on_file_modifed(os.path.join(event.path,
        # event.name))
        print('in modify')

    def process_IN_DELETE(self, event):
        print('in delete')

    def process_IN_DELETE_SELF(self, event):
        print('in delete self')

    def process_IN_MOVED_FROM(self, event):
        print('in moved_from')

    def process_IN_MOVED_TO(self, event):
        print('in moved to')

f = FileWatcher()
f.start_watch('/tmp/test', None) 
```

* * *

顺便说一句，一旦您调用`f.start_watch`，该过程就会陷入`while True`无法逃脱的循环。即使从另一个线程调用`f.stop_watch`也不会以某种方式让你摆脱这个 while 循环。

如果您确实计划使用线程，您可能需要将 a 传递`threading.Event`给`start_watch`，并检查其内部的状态`while-loop`以确定何时跳出循环。

# c# - 在运行时向 WPF DataGrid 添加行和列

> ID：15642580
> 
> 赞同：2
> 
> 时间：2013-03-26T16:38:52.823
> 
> 标签：c#, wpf, datagrid

所有，我是 WPF 的新手。我想阅读一个 .resx 文件和所有具有不同文化的相关文件；例如，名为“SomeFile.resx”的默认“en-GB”.resx 文件和德语类似物“SomeFile.de-DE.resx”。当然，我可以拥有大量与各种文化相关的不同 .resx 文件。

所以，我想把所有不同的文化资源读成一个单一的`DataGrid`，这样我就有了类似的东西

```
Resource Index | Resource Key | English (Default) | German
1              | SomeKey1     | Run Script        | Skript Ausführen 
2              | SomeKey2     | OK                | OK 
```

等。我的问题是将这些数据添加到`DataGrid`被调用的`dataGrid`. 所以我目前将可用的非默认 .resx 文件放入`Dictionary<string, string>`

```
Dictionary<string, string> cultureDict = new Dictionary<string, string>(); 
```

然后我计划使用 .resx 文件来遍历不同的 .resx 文件（对于多种文化），`ResXResourceReader`像这样读取 .resx 文件

```
Dictionary<string, string> resourceMap = new Dictionary<string, string>();

public static void Func(string fileName)
{
    ResXResourceReader rsxr = new ResXResourceReader(fileName);        
    foreach (DictionaryEntry d in rsxr)
    {
        resourceMap.Add(d.Key.ToString(),d.Value.ToString());           
    }        
    rsxr.Close();
}

public string GetResource(string resourceId)
{
    return resourceMap[resourceId];
} 
```

我计划创建一个`List<Dictionary<string, string>>`来保存来自不同文化的读者的信息，然后遍历`List`，并添加行。

我的问题是，**什么是最好和最有效的方式，将这些读者返回的数据纳入`DataGrid`考虑文化的数量是可变的并且可能很大？**

谢谢你的时间。

*注意：我可以添加列*

```
DataGridTextColumn itemColumn = new DataGridTextColumn();
itemColumn.Header = "Item Number";
itemColumn.Binding = new Binding("Item Number");
dataGrid.Columns.Add(itemColumn); 
```

*但这是为这种特殊情况添加行的最佳方式。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:45:46.563

```
public static void Display_Grid(DataGrid d, List<string> S1)
{
    ds = new DataSet();
    DataTable dt = new DataTable();
    ds.Tables.Add(dt);

    DataColumn cl = new DataColumn("Item Number", typeof(string));
    cl.MaxLength = 200;
    dt.Columns.Add(cl);

    int i = 0;
    foreach (string s in S1)
    {
        DataRow rw = dt.NewRow();
        rw["Item Number"] = S1[i];
        i++;
    }
    d.ItemsSource = ds.Tables[0].AsDataView();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T07:08:37.413

使用 observablecollection ItemCollection 在数据网格中添加新行

```
 itemmodel model=new itemmodel ();
model.name='Rahul';
ItemCollection.add(model); 
```

# python-2.7 - Matplotlib 无法使用 Python 2.7.3 在 Mac OS 10.8.2 上安装

> ID：15642581
> 
> 赞同：3
> 
> 时间：2013-03-26T16:38:58.557
> 
> 标签：python-2.7, matplotlib, installation, osx-lion

我已经安装了 numpy，当我去安装 Matplotlib 时它失败了。不管我用什么方法安装它。以下是我收到的错误。

```
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -    
DNDEBUG -g -O3 -DPY_ARRAY_UNIQUE_SYMBOL=MPL_ARRAY_API -DPYCXX_ISO_CPP_LIB=1 -  
I/usr/local/include -I/usr/include -I/usr/X11/include -I/opt/local/include -
I/usr/local/include -I/usr/include -I. -
I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -I. -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c src/_png.cpp -o build/temp.macosx-10.6-intel-2.7/src/_png.o

src/_png.cpp:23:20: error: png.h: No such file or directory

src/_png.cpp:66: error: variable or field ‘write_png_data’ declared void

src/_png.cpp:66: error: ‘png_structp’ was not declared in this scope

src/_png.cpp:66: error: ‘png_bytep’ was not declared in this scope

src/_png.cpp:66: error: ‘png_size_t’ was not declared in this scope

src/_png.cpp:23:20: error: png.h: No such file or directory

src/_png.cpp:66: error: variable or field ‘write_png_data’ declared void

src/_png.cpp:66: error: ‘png_structp’ was not declared in this scope

src/_png.cpp:66: error: ‘png_bytep’ was not declared in this scope

src/_png.cpp:66: error: ‘png_size_t’ was not declared in this scope

lipo: can't figure out the architecture type of:   
/var/folders/c9/xzv35t2n3ld9lgjrtl0vd0xr0000gn/T//ccwRj4ny.out

error: command 'gcc-4.2' failed with exit status 1

----------------------------------------

Command /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -
c "import setuptools;__file__='/var/folders/c9/xzv35t2n3ld9lgjrtl0vd0xr0000gn/T/pip-
build/matplotlib/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'),
__file__, 'exec'))" install --record /var/folders/c9/xzv35t2n3ld9lgjrtl0vd0xr0000gn/T/pip-
udXluz-record/install-record.txt --single-version-externally-managed failed with error
code 1 in /var/folders/c9/xzv35t2n3ld9lgjrtl0vd0xr0000gn/T/pip-build/matplotlib
Storing complete log 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:24:35.073

在 Mac 上安装 Python 的最佳方式是使用一键式安装程序`Enthought Python Distribution`并避免编译时依赖。它有一个可用于 Mac OS X [0] 的 32 位免费版本。`Matplotlib`和`libpng`（这似乎是您的依赖项）包含在免费版本 [1] 中。

[0] [http://www.enthought.com/products/epd_free.php](http://www.enthought.com/products/epd_free.php)

[1] [http://www.enthought.com/products/epdlibraries.php](http://www.enthought.com/products/epdlibraries.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:52:09.370

该文件`png.h`与[libpng](http://www.libpng.org/pub/png/libpng.html)一起安装，这是构建[matplotlib](http://matplotlib.org/users/installing.html#biuld-requirements)的要求。

请注意，libpng 的更高版本（1.5 和 1.6 完全不同，并且由于不兼容，1.2 或更高版本的要求规范可能不适合您。我已经成功地将 libpng 1.2 与 matplotlib 一起使用，但没有尝试过最新版本1.6系列。

# c# - 有没有办法更改从数据库 (.edmx) 更新模型的默认约定？

> ID：15642586
> 
> 赞同：0
> 
> 时间：2013-03-26T16:39:22.477
> 
> 标签：c#, entity-framework

我有一个 edmx 文件，我喜欢使用的约定与我的数据库模式不同。我想使用这样的名称：CompanyID，而表结构将其存储为 company_id。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:44:16.213

您可以尝试编辑 T4 模板，该模板生成相关的 POCO 类并添加更改命名约定的代码。

# vba - 在 Excel 中检查单元格是否有数据，然后将单元格添加到左侧的列中

> ID：15642587
> 
> 赞同：0
> 
> 时间：2013-03-26T16:39:24.427
> 
> 标签：vba, excel

如果我在 Excel 中有以下内容：

```
A  B  C   (columns)
a  b  c   (data)
d  e  f   (data)
g  h  i   (data)
-  -  -   (empty) 
```

以及以下验证下拉列表：

```
With rng.Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
        xlBetween, Formula1:="1,2"
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With 
```

首先，我需要使用 vba 检查单元格是否有数据，如果有，则在新列/单元格的左侧添加验证下拉列表，如下所示：

```
 A  B  C  D
1,2  a  b  c
1,2  d  e  f
1,2  g  h  i
 -   -  -  - 
```

在用户从下拉列表中选择一个值之后，我需要第二个宏来根据所选值在现有列的任一侧添加更多列：

```
 A  B  C  D  E  F  G
  1  a  1  b  1  c  1  (if 1 selected from dropdown)
  2  d  2  e  2  f  2  (if 2 selected from dropdown)
  2  g  2  h  2  i  2  (if 2 selected from dropdown) 
```

我是 vba 的真正初学者，因此非常感谢任何帮助。

======= 编辑 =================================

我已经解决了第一部分，其余部分仍然很痛苦：

```
Sub changeClass()

    Dim rng As Range
    Dim r As Range
    Set rng = Range(Cells(6, 2), Cells(6, 2).End(xlDown))

    Dim rCell As Range

    For Each rCell In rng.Cells
        rCell.Offset(0, -1).Value = "Data"
    Next rCell

    For Each rCell In rng.Cells
        With rng.Offset(0, -1).Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
        xlBetween, Formula1:="=$A$1:$A$3"
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With
    Next rCell

End Sub 
```

以及如何插入新列，但不能插入新数据：

```
Sub newColumn()

    Dim rng As Range
    Dim crng As Range
    Dim r As Range

    With ActiveSheet
        LastCol = .Cells(5, .Columns.Count).End(xlToLeft).Column
    End With

    Set rng = Range(Cells(6, 1), Cells(6, 1).End(xlDown))
    Set crng = Range(Cells(5, 1), Cells(5, LastCol))
    Set drng = Range(Cells(4, 1), Cells(4, LastCol))

    Dim rCell As Range
    Dim cCell As Range
    Dim dCell As Range

    For Each rCell In rng.Cells

            For Each cCell In crng.Cells
                cCell.Offset(-1, 0).Value = "columnMark"
            Next cCell

    Next rCell

    For Each dCell In drng.Cells

            If dCell.Value = "columnMark" Then
            dCell.EntireColumn.Offset(0, 1).Insert
            End If
            dCell.Value = ""

    Next dCell

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:09:22.037

这里举个例子。粘贴到数据所在的工作表类模块。工作表中的所有更改都会触发过程 Worksheet_Change，因此代码可能应该验证“目标”是否与验证范围相交，如果不相交则退出该过程。如果您多次更改验证组合中的选择，那么它不会删除以前的设置，所以......这只是一个例子:-)。

```
Private Sub Worksheet_Change(ByVal Target As Range)

    Dim targetSheet As Worksheet
    Dim i As Byte
    Dim lastColumn As Byte
    Dim firstColumn As Byte
    Dim actualColumn As Byte

    Application.EnableEvents = False
    Application.ScreenUpdating = False

    Set targetSheet = Target.Worksheet

    With targetSheet

        firstColumn = Target.Offset(columnoffset:=1).Column
        lastColumn = .Cells(Target.Row, .Columns.Count).End(xlToLeft).Column
        actualColumn = firstColumn

        For i = firstColumn To lastColumn
            If (.Cells(Target.Row, actualColumn).Value <> "") Then

                ' if next cell isn't empty insert new one
                If (.Cells(Target.Row, actualColumn + 1).Value <> "") Then
                    .Cells(Target.Row, actualColumn + 1).Insert Shift:=xlToRight
                End If

                .Cells(Target.Row, actualColumn + 1).Value = Target.Value
                actualColumn = actualColumn + 2

            Else
                actualColumn = actualColumn + 1
            End If
        Next i
    End With

    Application.EnableEvents = True
    Application.ScreenUpdating = True
End Sub 
```

# jquery - 在菜单选择中更改所选 div 的 z-index

> ID：15642595
> 
> 赞同：1
> 
> 时间：2013-03-26T16:40:06.157
> 
> 标签：jquery, gallery, z-index

我看到一些问题询问如何更改同一 div 上的 z-index，但没有询问如何将其应用于不同的 div。我没有足够的 javascript 知识来知道执行此操作的确切方法，但我认为这是可能的。

这就是我想要做的：

我正在进行以下页面：http: [//maevamaurel.com/book.html](http://maevamaurel.com/book.html)

这个页面有两个菜单，主菜单和一个允许用户浏览艺术家作品的子菜单。我要做的是让不同的画廊在选择相应的子菜单按钮（Web/Corporate/ 等）时更改 z-index。Thus, when the Web button is selected, the corresponding gallerie is brought up on front. 我知道这可能不是最好的编码方式，但欢迎提出任何建议。

顺便说一句，这行得通吗？我想知道它可能不会一旦所有画廊都具有相同的 z-index （我很困惑，我一直在这个特定页面上工作，我会做一个 php/sql 组合，但用户没有线索如何访问管理页面，所以我只有 ftp 访问）。

任何帮助表示赞赏。

附录：

这是我的代码（顺便说一句，我只有 HTML 代码）

```
<div id="menu_book">
            <a href="" id="web">Web</a>
            <a href="" id="corporate">Corporate</a>
            <a href="" id="print">Print</a>
            <a href="" id="perso">Perso</a>
            <a href="" id="projetpro">Projet Pro.</a>
    </div> 
```

那是菜单代码

```
<div id="tab_web">
            <img src="img/Page_Book/images_book/image_web/site_1_preview.png" alt="Test description" data-description="Test description for image 1">
            <img src="img/Page_Book/images_book/image_web/site_2_preview.png">
            <img src="img/Page_Book/images_book/image_web/site_3_preview.png">
            <img src="img/Page_Book/images_book/image_web/site_4_preview.png">
            <img src="img/Page_Book/images_book/image_web/site_5_preview.png">
            <img src="img/Page_Book/images_book/image_web/site_6_preview.png">
            <img src="img/Page_Book/images_book/image_web/site_7_preview.png">
            <img src="img/Page_Book/images_book/image_web/site_8_preview.png">
            <script>
                Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
                Galleria.run('#tab_web');
            </script>
        </div> 
```

那是 div 代码（我使用的是 Galleria 插件）

哦，画廊选项卡的相应代码是这样的：

```
#tab_web {
position:absolute;
display:block;
height:62%;
width:48%;
left:17%;
top:18%;
z-index:400; 
```

}

我只放了其中一个的代码，因为它们都是一样的。如果我省略了画廊选项卡的 z-index 会有帮助吗？它们在另一个 div 中，因此不会对它们产生太大影响。

**更新**：我让它工作了，唯一的问题是其他画廊保持他们的 z-index 值。现在我一直在思考算法方面的问题，这就是我认为可行的方法：

1.  我给每个 id 一个类，比如“.Galleria”
2.  我修改了 javascript 以将其变成一个函数，其中 function(id,value).
3.  调用该函数时，它将调用所有具有类 '.Galleria' 的元素，并通过所选值修改给定 id 的 z-index。属于同一类但不是同一 id 的所有其他值随后将其 z-index 值减小到较低的值。

我对如何做到这一点有一个大致的想法，所以我会在我吃早餐后尝试编写一个函数（尝试空腹思考没有用），但如果你能给我一些指示，我会很感激。

我想我必须使用类似于 $(this).elementbyId 或类似的东西？

我需要查看 javascript api 文档。

**代码更新**

当我的早餐炖煮时，我写这个函数相当仓促。我不确定它是否会起作用，我还没有测试它，但我想我会在男性更正之前和之后得到你的意见（在学习时总是有用的）

功能 ：

```
function changeIndex(gallerie,id) {
    var elements = document.getElementsByClassName(gallerie),i;
    for (i in elements) {
        if (elements = id) {
            $(elements).css('zIndex',400);
        }
        else {
            $(elements).css('zIndex',200);
        }
    }
} 
```

有什么可能在那里行不通的吗？

# postgresql - 基于多个条件的 PostgreSQL 更新列

> ID：15642597
> 
> 赞同：0
> 
> 时间：2013-03-26T16:40:15.450
> 
> 标签：postgresql, sql-update, case, postgresql-9.1, coalesce

**环境：**

我使用 PostgreSQL 9.1.2 并有一个如下的基本表，其中我有 4 个二进制列，可以采用值 Y 或 N。这些列还主要包含 Null 值，我在下表中将其表示为“-” ：

```
 Binary Col 1   Binary Col 2   Binary Col 3   Binary Col 4   Summary Col
    ------------   ------------   ------------   ------------   -----------
1\.       Y             N               -             N               1
2\.       -             Y               N             Y               2
3\.       N             N               -             N               0
4\.       -             -               -             -               -
5\.       Y             Y               Y             Y               4 
```

**问题：**

我想在我的表中包含一个*摘要列*，该列是根据这 4 个二进制列中出现的“Y”的数量填充的。我在上表中给出了 5 个示例条目来展示所需的输出。需要注意的一件重要事情是，我希望能够区分条目 3（未观察到“Y”）和条目 4（所有二进制列均为空）等情况。这是一次性的工作，对于这个重复列将如何影响我的表的事务速度，我没有性能问题。

我查看了很多 PostgreSQL“更新表”示例，还查看了[此处](http://www.postgresql.org/docs/8.3/static/sql-update.html)的手册。但是，我还没有找到具有多个条件的更新过程的示例，我相信这是这里需要的。

或者我可能完全错了，解决方案需要 SQL 函数或触发器，有什么提示或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:09:54.857

[SQL小提琴](http://www.sqlfiddle.com/#!1/e9886/1)

```
select
    c1, c2, c3, c4,
        (coalesce(c1, '') = 'Y')::integer
        + (coalesce(c2, '') = 'Y')::integer
        + (coalesce(c3, '') = 'Y')::integer
        + (coalesce(c4, '') = 'Y')::integer
    total_Y,
        (c1 is null)::integer
        + (c2 is null)::integer
        + (c3 is null)::integer
        + (c4 is null)::integer
    total_null
from t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:12:07.933

巧合的是，sum 函数具有您正在寻找的行为。您只需要将值转换为行：

```
UPDATE some_table SET summary = (SELECT SUM(v::int) FROM (VALUES (col1),(col2),(col3),(col4)) as x(v)); 
```

# android - 在 Android 中开发智能卡读卡器

> ID：15642615
> 
> 赞同：11
> 
> 时间：2013-03-26T16:41:18.660
> 
> 标签：android, usb, smartcard, apdu

我们开发了一个带有微控制器的原型板，它可以与智能卡通信（它可以读取 ATR、发出和读取对 APDU 命令的响应等）。现在我想将此硬件与 Android 手机或平板电脑一起使用。我们的开发板有一个 USB 连接，通过它我们可以通过 Android 读取和写入 MCU。

最终目标是在支持 PKCS #11 的 Android 平台上拥有一个功能正常的智能卡读卡器，并为智能卡读卡器的最终用户提供一个库，以便他们可以与他们的卡进行通信。

我已经阅读了几个关于这个主题的讨论，其中一些说我必须构建一个定制的 Android 来做到这一点。我对 Android 架构不是很熟悉，无法理解为什么当我可以通过 USB 与外围设备（读卡器）通信时，我必须重新构建 Android。在我看来，如果我提供了一个实现类似 CCID 接口的库，那么用户可以通过将我的库集成到他们的目标 .apk 文件来使用 Android USB 堆栈与我的阅读器进行通信。

上述计划是否存在我们不知道的问题？我担心我们缺少一些关于 Android 或智能卡读卡器的基本知识（例如：安全性），这会在我们开始实现上述库时给我们带来问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:26:05.067

我已将 USB 外围设备集成到我的自定义平台的自定义 Gingerbread 发行版中。您自定义 Android 平台的唯一原因是添加或修改一些驱动程序，使您可以访问您的 USB 设备。如果您的 USB 设备已经使用标准 Android 设备支持的协议，那么祝您好运！你几乎都准备好了。但在庆祝你的胜利之前，我会在各种设备上试一试。在 Android 和内核级别，Google 提供了一个非常准系统的发行版，其中包含大量驱动程序源代码。由手机/平板电脑制造商根据设备使用的硬件决定他们将包含哪些低级驱动程序和协议。由于手机/平板电脑的内存量是有限的，所以一般规则是只包含所需的内容。

希望这个简单的答案会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-21T15:59:54.093

在对该领域进行了更多研究之后，您可以使用几种解决方案：

1.  制作您的自定义驱动程序（简单的通信，一些简单的命令来重置卡并为其供电）。在这种情况下，您只需要执行重置/电源命令和 T=1 通信协议，但是这种方法的最大缺点是它只能与您的读卡器一起使用，这是一个很大的限制。
2.  在控制器上实现 CCID 接口并将其包装在 APDU 命令周围。这种方法是可扩展的，只要你遵守规范（很多制造商不这样做，这就是为什么 pcsc-lite 有支持的阅读器列表的原因）。如果您想卖给很多读者，这种方法是最具成本效益的。[你可以在这里](https://www.usb.org/sites/default/files/DWG_Smart-Card_USB-ICC_ICCD_rev10.pdf)找到规范
3.  将 CCID 芯片添加到已经实现 CCID 通信的组件中。此类芯片由多家供应商制造，STMelectronics 有很多，但是在这种情况下，您的最终阅读器将花费更多，并且您将无法完全控制协议。

至于Android端，[seek](https://github.com/seek-for-android/pool/wiki/PCSCLite)提供了pcsc-lite驱动的移植，没试过，但从源码看，他们只是修改了原驱动的usb api，使用JNI接口与c 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-11T16:57:56.000

我不确定读者的 CCID 实现，但对于 android 有一些 C/C++ 端口，但不确定它们是否有效。在android部分很容易实现CCID协议看看[这个](https://stackoverflow.com/a/40996141/8103819)。最难的部分是为读者制作固件，有很多小细节需要注意。

# google-apps-script - IE9的UIApp显示默认为标准模式而不是怪癖模式？

> ID：15642618
> 
> 赞同：1
> 
> 时间：2013-03-26T16:41:27.813
> 
> 标签：google-apps-script

我的用户告诉我，我的应用程序不再在 IE9 上运行，经过调查，我认为罪魁祸首是**UiApp 显示**模式，默认情况下应该设置为**quirks**。

当我的 UiApp 表单在 IE9 中打开时，它们会以**标准**模式呈现，即使我通过 setStandardsMode(false) 方法**强制****模式**进行**怪异**。在所有其他浏览器上，一切都按预期呈现（Chrome、Firefox、Safari...）。

 **```
// My default call to create my UiApp Application
var app = UiApp.createApplication().setWidth(400).setHeight(350); 
```

由于我使用的是 OSX Chrome，我没有注意到这个问题，只是当一个使用 IE9 的 Windows 用户向我报告时。所以我没有这个错误开始的确切日期。但我 100% 知道这是最近的，在 IE9 正确呈现之前。

您是否知道最近对 UiApp 所做的任何更改会默认 UiApp 显示模式为 Standart 而不是 Quirks？

似乎还有一个错误，即**setStandardsMode(false)**强制进入**怪癖**模式不适用于 IE9。

任何提示将不胜感激。

![IE9](../Images/fdafd732e88d5d23a20aff9e6b1cc03a.png)

![例子](../Images/567587a416e208f873a85dcf4ad714cd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:25:20.303

这可能是 UI 渲染中的实际错误。[您能否在问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)上打开一个错误，其中包含所有详细信息和一小组复制代码。**

# mercurial - hg-to-hg 和 ConvertExtension 在新仓库下创建默认分支

> ID：15642623
> 
> 赞同：1
> 
> 时间：2013-03-26T16:41:32.507
> 
> 标签：mercurial, branch

环境：Mac 上的 Mercurial 分布式 SCM（版本 2.5.2+20130312）

我有一个结构如下的 Mercurial 存储库：

```
repoOriginal
|__ file1
|__ foodir
|______file2
|______file3 
```

我使用这个命令。

```
hg convert -s hg -d hg repoOriginal 
```

转换后我得到了这个存储库：

```
repoOriginal-hg
|__ default
|____ file1
|____ foodir
|________file2
|________file3 
```

我期待这个存储库：

```
repoOriginal-hg
|__ file1
|__ foodir
|______file2
|______file3 
```

我一定做错了什么。是否可以防止转换将分支转换为存储库中的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:53:18.993

默认分支存在于所有 Hg 存储库中。它是 Hg 架构的基本组成部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:20:12.953

在 Ubuntu 上测试了相同的设置，我没有看到这个问题。我已经得出结论，这是我的 Mac 环境的问题。

# c++ - QAbstractListModel + SectionScroller = 分段错误

> ID：15642624
> 
> 赞同：0
> 
> 时间：2013-03-26T16:41:34.967
> 
> 标签：c++, qt, list, segmentation-fault, qml

我正在使用 QML SectionScroller 滚动 QML ListView。当我经常使用 SectionScroller 时，我遇到了分段错误

```
_ZN18QAbstractItemModel4sortEiNQt9SortOrder: ldrex r1, [r3] 
```

一些重要的代码

```
IrregularListWrapper::IrregularListWrapper()
{
    QHash<int, QByteArray> roles;
    roles[Form0Role] = "form0";
    roles[Form1Role] = "form1";
    roles[Form2Role] = "form2";

    setRoleNames(roles);
    setLang(German);
}

QVariant IrregularListWrapper::data(const QModelIndex &index, int role) const
{
    if (!index.isValid()) return QVariant();
    const IrregularVerb* verb = db->at(index.row());
    switch (role)
    {
    case Form0Role:
        return verb->getForm0();
        break;
    case Form1Role:
        return verb->getForm1();
        break;
    case Form2Role:
        return verb->getForm2();
        break;
    }
    return QVariant();
}

void IrregularListWrapper::setLang(Language l)
{
    QPluginLoader loader(plugins[l]);
    db = qobject_cast<AbstractIrregularList*>(loader.instance());

    switch (l)
    {
    case English:
        langName = "English";
        break;
    case German:
        langName = "German";
        break;
    }
    emit langChanged();

} 
```

为什么这会导致分段错误？提前致谢。

/edit：正常滚动时也会出现分段错误，回溯是：

```
#0  QBasicAtomicInt::ref (this=0x18)
#1 QString (this=0xbe88d2a0, other=...)
#2 IrregularVerb::getForm2 (this=0x9e6de8)
#3 IrregularVerbWrapper::data(this=0x9e31b8, index=..., role=35) // the model
// some calls to libQtDeclarative 
```

问题是什么？IrregularVerb 类看起来像这样

```
class IrregularVerb : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString form0 READ getForm0 NOTIFY formChanged)
    Q_PROPERTY(QString form1 READ getForm1 NOTIFY formChanged)
    Q_PROPERTY(QString form2 READ getForm2 NOTIFY formChanged)
public:
    QString forms[3];
    QString getForm0() const { return forms[0]; }
    QString getForm1() const { return forms[1]; }
    QString getForm2() const { return forms[2]; }
    IrregularVerb(QString a, QString b, QString c) { forms[0] = a; forms[1] = b; forms[2] = c; }
signals:
    void formChanged();
}; 
```

谢谢

# iphone - 在应用程序中存储信用卡

> ID：15642626
> 
> 赞同：2
> 
> 时间：2013-03-26T16:41:52.473
> 
> 标签：iphone, xcode, in-app-purchase, credit-card, stripe-payments

在应用程序中存储信用卡的最佳方式是什么？我将使用 Stripe API 处理付款。

原因： 1\. 消除客户每次都必须输入号码 2\. 轻松一键支付

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:44:14.777

我不认为您可以在不符合 PCI/DSS 的情况下存储该信息：[Storing Credit Card details in the iPhone App](https://stackoverflow.com/questions/5473337/storing-credit-card-details-in-the-iphone-app)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T18:10:30.663

如前所述，如果不付出大量努力和费用来遵守 PCI 要求，您就无法合法地将这些数据存储在您的应用程序中。

这是 Stripe 等服务的主要卖点之一：它们为您存储所有数据，从而免除您的法律负担。

您可以通过创建客户并将他们的卡数据存储在 Stripe 中来完成您想做的所有事情。请参阅：[https ://stripe.com/docs/tutorials/charges#saving-credit-card-details-for-later](https://stripe.com/docs/tutorials/charges#saving-credit-card-details-for-later)

# c# - 正确清理 System.ServiceModel.ServiceHost

> ID：15642628
> 
> 赞同：4
> 
> 时间：2013-03-26T16:42:00.880
> 
> 标签：c#, wcf, idisposable, servicehost

我对清理 ServiceHost 的最佳方法有点困惑。由于来自 Visual Studio 代码分析器的 CA1001 警告建议我为我的类实现 IDisposable 接口，我意识到了我的代码中的问题。

我已经阅读了关于 IDisposable 的讨论并且熟悉典型的用例，但是在这种情况下发现自己很困惑。确保正在处置 ServiceHost 并可能满足 CA1001 的正确方法是什么。谢谢。

我的代码如下所示：

 `````
public class MyClass
{
    private ServiceHost host = null;

    public void StartListening(...)
    {
        // make sure we are not already listening for connections
        if (host != null && host.State != CommunicationState.Closed)
            StopListening();

        // create service host instance
        host = new ServiceHostWithData(typeof(ServiceHandler), address);

        // do a bunch of configuration stuff on the host

        host.Open();
    }

    public void StopListening()
    {
        // if we are not closed
        if ((host != null) && (host.State != CommunicationState.Closed))
        {
            host.Close();
            host = null;
        }
        else // we are null or closed
        {
            host = null; // if it isn't null, and it is already closed, then we set it to null
        }
    }
} 
````  `* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:39:17.027

你的班级应该实现[IDisposable](http://msdn.microsoft.com/en-ca/library/system.idisposable.aspx)。基于该 MSDN 页面中的示例：

```
public class MyClass : IDisposable
{
    private bool disposed = false;
    private ServiceHost host = null;

    public void StartListening(...)
    {
        // ....
    }

    public void StopListening()
    {
        // ...
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    { 
        if(!this.disposed)
        {
            if(disposing)
            {
                this.StopListening();
            }

            disposed = true;
        }
    }

    ~MyClass()
    {
        Dispose(false);
    }
} 
`````

# jquery - ASP.NET MVC - 从 IIS 接收 Json 响应时出现问题

> ID：15642647
> 
> 赞同：2
> 
> 时间：2013-03-26T16:43:05.653
> 
> 标签：jquery, asp.net-mvc, json, iis, asp.net-mvc-4

请看下面的截图。我正在从控制器返回 Json 结果以填充级联下拉列表。当从 Visual Studio 运行时，该应用程序运行良好，但从 iis 服务器运行时，下拉菜单根本不会被过滤（抛出 404）。我真的很困惑。任何帮助，将不胜感激。谢谢。

图中，上图是从VS运行时，下图是从iis通过内网运行时。

我已按要求附上了下面的代码，但就像我上面提到的，从 Visual Studio 运行时它工作得非常好。

**控制器**

```
[HttpPost]
       public JsonResult FilterByDivision(string divisionId)
        {
            try
            {
                using (ctx)
                {
                    var SubDivResults = (from q in ctx.Test
                                           where q.divId== divisionId
                                           select new Models.SubDivisionDTO
                                           {
                                               SubDivID = q.subdivId,
                        SubDiv = q.SubDiv

                                           }).Distinct().ToList();
                    ajaxLookup.SubDiv = SubDivResults;           

                }
                JsonResult result = new JsonResult();
                    result.Data = ajaxLookup;
                      return result;
                }

            catch (Exception)
            {
                throw;
            }
        } 
```

**jQuery**

//按部门过滤

```
$(function () {
$("select#DivisionId").change(function (evt) {
if ($("select#DivisionId").val() != "-1") {
$.ajax({
url: "/AjaxDropDown/FilterByDivision",
type: 'Post',
data: { divisionId: $("select#DivisionId").val() },
success: function (data) {
var subDivItems = "<option value='" + "-1" + "'>" + "Please Select" + "</option>";
$.each(data.subDivisions, function (i, val) {
subDivItems += "<option value='" + val.subDivId + "'>" + val.subDivName + "</option>";
});
$("select#subDivId").empty().html(subDivItems);
}
});
}
});
}); 
```

![在此处输入图像描述](../Images/42734400c85835cfe1ea4c3649e8bc19.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:51:23.167

例如，如果您从 jQuery 进行调用，请检查路径，因为您得到的是 404。您可能正在虚拟目录中运行您的应用程序，并且您正在从您的 javascript 调用绝对路径。

对于 404 结果，这可能是您的问题。

从您的代码片段中，问题可能出在此处：

```
$.ajax({
    url: "/AjaxDropDown/FilterByDivision",
    ...
}); 
```

你应该在这个表格上有一些东西：

```
$(function () {
    $("select#DivisionId").change(function (evt) {
        var resourceAddress = '@Url.Content("~/AjaxDropDown/FilterByDivision")';

        if ($("select#DivisionId").val() != "-1") {
            $.ajax({
                url: resourceAddress,
                type: 'Post',
                data: {
                    divisionId: $("select#DivisionId").val()
                },
                success: function (data) {
                    var subDivItems = "<option value='" + "-1" + "'>" + "Please Select" + "</option>";
                    $.each(data.subDivisions, function (i, val) {
                        subDivItems += "<option value='" + val.subDivId + "'>" + val.subDivName + "</option>";
                    });
                    $("select#subDivId").empty().html(subDivItems);
                }
            });
        }
    });
}); 
```

这每次都会给你一个相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:18:57.700

查看 IIS 日志文件并检查 HTTP 子状态代码。它将提供一些有关导致 404 错误的原因的附加信息。请参阅[IIS 7.0、IIS 7.5 和 IIS 8.0 中的 HTTP 状态代码](http://support.microsoft.com/kb/943891)。如果您的子状态代码为 0 或 1，则您可能没有正确的 URL，或者您的文件实际上可能从服务器中丢失。如果还有其他问题，您还有其他问题，发布子状态代码会有所帮助。

如果您确实有 0 或 1 的子状态代码，Anderson Fortaleza 的回答可能是正确的。

# openlayers - 同一个地方的两个矢量特征：透明度问题 - openlayers

> ID：15642652
> 
> 赞同：1
> 
> 时间：2013-03-26T16:43:22.780
> 
> 标签：openlayers, gwt-openlayers

我的目标是在地图上有一个图标，并能够以编程方式更改它的背景。

我有： - 一个带有 externalImages 作为标记的矢量图层（图像是部分透明的） - 一个带有与“标记”相同大小的彩色方块的矢量图层。正方形是真向量。

每个标记图标都有一个彩色方形背景，经度和纬度相同。

问题是：在标记图标的透明部分下看不到彩色方块。

我注意到这个问题只有在坐标绝对相等时才会出现。如果不是 - 目标已实现，但图标和背景不匹配。

我的图标： ![我的图标：](../Images/7c09a9a4614875edb946e7ffb0e42b22.png)

我有的：
![我有的：](../Images/9afd768db554b54a0c32ffbea493802f.png)

我想要达到的目标：
![我想要达到的目标：](../Images/d1354d08e810e37a43a9770bb7b7e67d.png)

我正在使用 gwt-openlayers。任何帮助将不胜感激。谢谢！

# javascript - 提交带有 json 数据的 post 请求，rest 服务将生成 excel 文件并通过流返回

> ID：15642658
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:43:34.740
> 
> 标签：javascript, html

只是作为一个初学者，我已经阅读了关于下载表单提交以及如何使用 html + 表单进行文件下载的大部分问题/答案，但由于某些特定要求，我仍然不清楚如何去做。

**首先** ，我需要通过 POST 将 json 数据连同要由服务动态生成的 excel 文件名发送到休息服务。当rest服务接收到请求时，它会根据请求的json数据在内存中生成一个excel文件，并通过io流返回给客户端浏览器。该服务不会在服务器中创建物理 excel 文件，但会立即将其返回给客户端浏览器。 **其次** ，我们只需要纯 HTML 和 javascript 代码，不需要 jquery 的东西。

我的**第一个**问题：
是否可以在不创建物理 excel 文件并将 excel 二进制数据发送到客户端浏览器的情况下做到这一点；

**第二**：
如何确定服务器何时完成将文件发送到浏览器？

**第三**：
如何打开文件对话框以将excel文件物理保存在客户端机器上？

**第四**：
如何正确配置服务器响应HTTP头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:56:16.313

如果您`content-disposition`正确设置了标头，您会将生成的流转换为文件下载。Google 将不得不成为您在这方面的朋友，因为您似乎在要求其他人为您执行合同……

# ruby-on-rails - 如何通过更改 f.select 创建/销毁nested_form

> ID：15642661
> 
> 赞同：0
> 
> 时间：2013-03-26T16:43:39.047
> 
> 标签：ruby-on-rails, ruby, onchange

在我的 Rails 应用程序中，我在 views/patients/_form.html.erb 中有以下代码

```
 <div class="field">
    <%= f.label :sex %><br />
    <%= f.select :sex, [['Male','Female'],['Θ','1']] %>
  </div>

  <div>
   <%= f.fields_for :female_patient do |fp| %>
    <%=render   "female_patient_fields", :f => fp %>
  <% end %>
  </div>
   <p><%=link_to_add_fields "Add Female Info", f, :female_patient %></p> 
```

部分代码是这个
在views/patients/_female_patient_fields.html.erb

```
 =====FEMALE INFO=====
      <div class="field">
    <%= f.label :childbirths %><br />
    <%= f.number_field :childbirths %>
  </div>
  <div class="field">
    <%= f.label :last_period %><br />
    <%= f.datetime_select :last_period %>
  </div>

  <p>
  <%= link_to_remove_fields "remove", f %>
  </p>
    ====================================
  </div> 
```

这

<%=link_to_add_fields "添加女性信息", f, :female_patient %>

和
<%= link_to_remove_fields "remove", f %> 是指向应用程序助手的链接，它们为附加字段创建和销毁嵌套表单。

在 helpers/application_helper.rp

```
module ApplicationHelper
 def link_to_remove_fields(name, f)
    f.hidden_field(:_destroy) + link_to_function(name, "remove_fields(this)")
  end
def link_to_add_fields(name, f, association)
    new_object = f.object.class.reflect_on_association(association).klass.new
    fields = f.fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
      render(association.to_s.singularize + "_fields", :f => builder)
    end
    link_to_function(name, "add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")")
  end

end 
```

链接工作正常，嵌套表单被创建/销毁，female_patient 对象被正确创建（或不）。（患者模型与女性患者具有**has_one**关系）。

我想不通的是，当性别的 f.select 字段（第一种形式）发生更改时，一种调用助手动作的方法。我希望嵌套表单在所选值为女性时出现，并在所选值为男性时消失。

编辑：使用的 jquery 函数是：

```
function remove_fields(link) {
  $(link).prev("input[type=hidden]").val("1");
  $(link).closest(".female").hide();
}

function add_fields(link, association, content) {
  var new_id = new Date().getTime();
  var regexp = new RegExp("new_" + association, "g")
  $(link).parent().before(content.replace(regexp, new_id));
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:52:12.897

您将使用 javascript（很可能是 jquery）来显示/隐藏字段。您可以在女性患者字段周围的 div 上放置一个 id。然后，在您的 javascript 中，您甚至可以在性别选择框上附加一个更改。然后更改事件的处理程序将确定是否显示/隐藏女性患者 div。

```
$(function() {
  if($('#patient_sex').length) {
    $('#patient_sex').on('change', function() {
      if($(this).val() == '1') {
        $('#female_patient_fields').show(); // or w/e you want to call the div
      } else {
        $('#female_patient_fields').hide();
      }
    });
  }
}); 
```

在视图中：

```
<div id="female_patient_fields">
  ... your form fields for 
</div> 
```

# ios - IOS：由于可能使用过多内存而导致项目崩溃（使用 ARC，但可能是由于图像大小）

> ID：15642662
> 
> 赞同：0
> 
> 时间：2013-03-26T16:43:39.590
> 
> 标签：ios, objective-c, memory

嘿，我的应用程序有一些问题。这是我的第一个 IOS 大项目，到目前为止，我一直做得很好，有些部分在这里和那里遇到了麻烦。但是现在开发基本上结束了，我遇到了最大的问题，它一直困扰着我一段时间，我已经碰壁了。我还不确定该怎么做（我有一个想法，但不确定这是否可行）。在我的电脑上，它大部分时间都可以工作。有时它
崩溃，我得到一个错误（见下文）。当我收到错误时，我所做的通常是游戏正在运行，然后突然停止。实际上，我已经有一段时间没有收到该错误了，而且我大多是在开发时得到它。当应用程序在我老板的机器或实际设备上运行时（旁注，我们将应用程序从她的机器上传到设备而不是从我的机器上），它崩溃了。它总是在同一点崩溃。出现第一个视图，即标题屏幕。然后他们单击开始按钮并启动一个新视图。但是，他们单击开始按钮，应用程序最终崩溃。发生的情况是应用程序关闭并且调试器转到这部分代码。

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([MyAppDelegate class]));
    }
} 
```

此外，该应用程序是一个游戏。所有视图都使用 OpengelE。我在想正在发生的事情是使用了太多内存。游戏正在运行；系统需要更多内存，系统杀死进程释放内存；该过程是应用程序。这是基于我对 IOS 和应用程序生命周期的了解。我正在使用 ARC，但我已经使用他们的工具专门测试了游戏，我没有发现任何可能导致问题的内存泄漏或类似的事情。我认为该图像可能是明智的大文件大小。图像范围从 100kb 到 5 MB。我们正在缩小它们的尺寸，但我不确定这是否是问题所在。现在我唯一知道它为什么会崩溃的原因是它内存不足，而我发现的唯一原因是文件大小。我不是 100% 确定这是原因，因为它没有解释为什么它在我的机器上没有崩溃（至少最近没有），但它在她身上发生了（它解释了为什么它对她的机器和设备如此，它解释了为什么它有时会发生在我的身上，而不是它们发生在不同的条件下）。此外，我一直听说在这种情况下应该会出现某种类型的低内存警告。有人可以确认否认吗（我对此进行了研究，但没有发现很多

所以我要问的是，是否有人可能对这个问题的原因有更多建议，或者至少引导我进入我应该更多研究的主题。你认为降低图像的文件大小会起作用吗？往往有 1 个大约 1-3 的背景，然后是 8 到 40 个 100kb 的图像。

**编辑** 我使用了配置文件模式仪器。该应用程序开始使用 100mb，然后在播放时增加到 500mb（这是在真实内存中）。我注意到只有当我切换到新级别时它才会增加内存。我想这是因为每个级别都有更多的图像显示，但后来我做了一个测试。在测试中，当一个级别完成时，而不是进入下一个级别，再次播放级别一个。每个级别都是 Class Level 的一个对象。我的 ViewControler（它是 GLKViewController 的子类）有一个名为 currentLevel 的属性。游戏使用以下代码切换到下一个级别：

```
-(void) nextLevel: (Level) newLevel
{
    //play sound
    MyAppDelage *del=[[UIApplication sharedApplication] delegate];
    UIWindow *main=[delegate window];
    MyViewControler *view=(MyViewControler*) main.rootViewController;
    view.currentLevel=newLevel;
 } 
```

所以我认为正在发生的是旧关卡由于某种原因永远不会被垃圾收集；如果这有什么不同，currentLevel 就很强大。我也有@synthesize currentLevel =_currentLevel; 这是我第一次学习Objective C时编写的非常古老的代码。当时我只是在学习示例。可能更改强类型或删除 @synthesize 部分会帮助解决这个问题吗？我习惯了更多的 C++/C#/Java 语法，所以我真的不习惯一些客观的 C 风格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T22:53:14.157

在没有看到您的任何代码的情况下，我建议检查以下内容：

1.  检查您使用的图像是否具有小像素尺寸，因为 Apple 建议宽度/高度大于 1024 像素的图像应该更好地分割成图块。以 Apple 的 PhotoScroller.app 代码为例。请注意，虽然图像可能很小（例如 100 kb），但为了显示它，iOS 需要使用每个像素 4 个字节对其进行解码！因此，3000x3000 像素的图像使用 3000x3000*4=36,000,000 字节，相当于大约 34 MB 内存。
2.  尽管您使用的是 ARC，但请查看代码中可能处理图像的 for/while 循环，并使用 @autoreleasepool { .. } 围绕（如果适用）图像处理代码。例如：

    ```
    for (NSString *imageName in imageNames) {
        @autoreleasepool {
            //... code here to get your images for display ...
        }
    } 
    ```

3.  仔细研究如何处理检索大量图像，即 iOS 缓存使用 'imageNamed' 与 'imageWithContentsOfFile' 获取的图像。这种技术特别适用于使用 CATiledLayers 处理大图像。以下代码片段显示了获取图像的两种方式：

    ```
    // The fetched image is cached by iOS when using:
    UIImage *image1 = [UIImage imageNamed:@"myimagename.png"];
    // You can control memory usage and freeing of the image when using:
    UIImage *image2 = [UIImage imageWithContentsOfFile:@"myPath/myimagename.png 
    ```

4.  您还可以查看 Apple 的 LargeImageDownsizing 示例中使用的代码，但请注意，在处理 PNG 文件时，这对我不起作用。我向 Apple 提交了一份错误报告（去年 11 月），但还没有听到任何消息。

5.  最后，在真实设备上进行测试时不要等待太久，因为您的开发 Mac 至少比目标 iDevice 快 10 倍，并且在您开始注意到与内存相关的问题之前还有更多的可用内存。顺便说一句，使用 Instruments.app 分析您的应用程序始终是一个好习惯。

希望以上建议对您有所帮助！只是我的 2（欧元）美分，它的价值是多少。

# c++-cli - 单击事件处理程序没有被调用

> ID：15642664
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:43:43.027
> 
> 标签：c++-cli, windows-forms-designer

我正在使用或“学习”C++/CLI，因为我喜欢 GUI 的外观，并且我试图在鼠标悬停在图片上和不在图片上时触发一些事件，但它不起作用，唯一有效的事件是鼠标点击图片时。

我的代码在下面

```
void pictureBox1_MouseEnter(Object^ sender, System::Windows::Forms::MouseEventArgs^ ) {
    label1->Text = String::Concat( sender->GetType(), ": Enter" );
}

void pictureBox1_MouseHover(Object^ sender,  System::Windows::Forms::MouseEventArgs^ ) {
    label1->Text = String::Concat( sender->GetType(), ": MouseHover" );
}

void pictureBox1_MouseLeave(Object^ sender,  System::Windows::Forms::MouseEventArgs^ ) {
    label1->Text = String::Concat( sender->GetType(), ": MouseLeave" );
}

private: System::Void pictureBox1_Click(System::Object^  sender, System::EventArgs^  e) {
    label1->Text = String::Concat( sender->GetType(), ": Click" );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:54:17.133

如果这是您的全部代码，那么您所做的就是定义一些方法。UI 不知道当这些事件发生时它应该调用它们。

您需要做的是在各种对象上添加事件处理程序。从您的本地方法创建一个委托，并将其（使用`+=`运算符）添加到事件中。

[MouseEnter](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)、[MouseHover](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousehover.aspx)和[MouseLeave](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseleave.aspx)都被定义为[EventHandler](http://msdn.microsoft.com/en-us/library/system.eventhandler.aspx)，而不是[MouseEventHandler](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventhandler.aspx)。这意味着该方法应该采用[EventArgs](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)，而不是[MouseEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.aspx)，因此请切换您的方法声明。

```
// Do this in the constructor.
this->pictureBox1->MouseEnter += gcnew EventHandler(this, &Form1::pictureBox1_MouseEnter);
this->pictureBox1->MouseHover += gcnew EventHandler(this, &Form1::pictureBox1_MouseHover);
this->pictureBox1->MouseLeave += gcnew EventHandler(this, &Form1::pictureBox1_MouseLeave);

this->pictureBox1->Click += gcnew EventHandler(this, &Form1::pictureBox1_Click); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:45:54.837

也许您忘记将这些方法添加为回调

# java - 如何访问不同访问者之间共享的文件？

> ID：15642665
> 
> 赞同：1
> 
> 时间：2013-03-26T16:43:44.313
> 
> 标签：java, python, concurrency

我有用 Java 编写的代码，它将所有数据写入文件，然后我有处理这些数据的 python 脚本。

它们完全独立运行，python 脚本可以按计划运行，但它也会从文件中删除已处理的记录。问题是在第一个进程中的 java 代码将尝试编写某些内容而第二个进程中的 python 代码将尝试删除已处理的记录时访问文件的实现？

第一个想法是在其中一个进程更新文件时物理创建 .lock 文件，但也许还有其他一些解决方案需要考虑？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:53:28.600

您最好的选择可能是放弃使用文件并使用套接字。Java 程序生成并缓存输出，直到 Python 脚本正在侦听。然后 Python 脚本接受数据并处理它。

或者，您可以在两个进程之间使用 IPC 信号，尽管这似乎比套接字更混乱，恕我直言。

否则，.lock 文件似乎是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:47:54.663

确保 Java 和 Python 方法都在完成后关闭文件。

一种可能性是将您的 Python 脚本转换为 Jython。如果两个进程都在 JVM 中运行，那么您应该能够使用标准 Java 并发技术来确保您没有两个线程同时修改文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:47:38.127

一种机制是让生产者`HHMMSS`每隔一段时间将文件滚动到一个新名称（可能带有后缀），并且让消费者仅在文件滚动到新名称后才处理该文件。也许每5分钟一次？

另一种机制是让消费者自己滚动文件并让生产者注意到文件已经滚动并重新打开原始文件名。所以消费者总是在消费，`output.consume`而生产者总是在写`output`东西。

*   每次将一行写入文件时，生产者都会确保它`output`存在。
*   当消费者准备好读取文件时，他会重命名`output`为`output.consume`或其他东西。
*   生产者注意到该文件`output`不再存在，因此他重新打开它以进行输出。
*   一旦`output`文件被重新创建，消费者就可以处理该`output.comsume`文件。

# php - 预加载会话变量和数据库交互代码点火器

> ID：15642667
> 
> 赞同：0
> 
> 时间：2013-03-26T16:43:48.610
> 
> 标签：php, codeigniter, session, cookies

我正在代码点火器中预加载会话库，因为我的网站在大多数页面上都需要一些会话变量。我需要执行以下操作，但不知道最好的方法是什么（即：将代码放在哪里）：

1.  检查是否设置了 cookie
2.  如果设置了 cookie，则调用数据库以获取用户的会话数据（即：用户帐户设置）

我是否需要在 Ci_Session 的 __ 构造上添加这种东西，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:48:47.993

我建议你使用钩子：检查[Codeigniter Hooks](http://ellislab.com/codeigniter/user-guide/general/hooks.html)

我用来使会话控制远离控制器，并且钩子是向前迈出的一步，您可以在系统和控制器运行时之前或之后运行钩子

# javascript - Javascript 函数类型错误

> ID：15642671
> 
> 赞同：2
> 
> 时间：2013-03-26T16:44:00.173
> 
> 标签：javascript, html, preload

因此，在加载 fileList 数组中的第一个文件时正确调用的函数 fileLoaded 中，它尝试调用 this.loadAnother() 但 Firefox 坚持：

```
TypeError: this.loadAnother is not a function 
```

为什么它坚持它不是一个功能？它从 loadProjectSource() 中被正确调用，但试图加载下一个文件，它不是一个函数。此外，调试“this”会产生奇怪的结果，这让我相信这是罪魁祸首。我不是 Javascript 专家，但我从未见过这种行为。它与类创建有关吗？如果是这样，为什么 loadProjectSource() 的第一次调用有效？

```
var ScriptLoader = Class.extend({ // Want to add functionality to this to allow PHP or inline loading...perhaps later
    init: function () {
        this.totalEngineToLoad = 0;
        this.totalEntitiesToLoad = 0;
        this.totalScenesToLoad = 0;
        this.totalLoaded = 0;
        this.entitiesToLoad = [0, 0, 0];
        this.fileList = ['./js/engine/Entity.js', './js/engine/Scene.js'];
        this.preload;
    },
    loadProjectSource: function (directory) {
        if(this.preload != null) {
            this.preload.close();
        }
        this.preload = new createjs.LoadQueue();
        this.preload.addEventListener("fileload", this.fileLoaded);
        this.preload.addEventListener("error", this.fileError);
        this.preload.setMaxConnections(5);
        this.loadAnother();
    },
    loadAnother: function () {
        var myItem = this.fileList.shift();
        if(this.fileList.length != 0) {
            this.preload.loadFile(myItem);
        }
    },
    fileLoaded: function (e) {
        debug('Loaded ' + e.item.src);
        debug(this.fileList);
    },
    fileError: function (e) {
        debug('Error ' + e.item.src);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:50:02.767

这是因为上下文绑定。

在这一行：

`this.preload.addEventListener("fileload", this.fileLoaded);`

回调函数中的上下文`this`将是`window`对象，而不是您的类实例。在现代浏览器中，您可以这样修复它：

`this.preload.addEventListener("fileload", this.fileLoaded.bind(this));`

在较旧的浏览器中，您需要这样的东西：

```
var self = this;
this.preload.addEventListener("fileload", function(){
    self.fileLoaded();
}); 
```

与下一行相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:50:57.783

JavaScript 中的类很奇怪，至少在我的经验中，那里很麻烦。在您的 ScriptLoader 类中，尝试执行以下操作（您可能必须更改它以适应您的类的工作方式 - 我不使用它们，反正就是这样）

```
SL = this; 
```

然后在你的 loadProjectSource 函数中，改变

```
this.loadAnother(); 
```

至

```
SL.loadAnother(); 
```

只是一个想法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:51:08.330

[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的值取决于函数的调用方式——事件处理程序不知道您希望它成为您的 ScriptLoader 实例。

要获得正确的上下文，您要么需要[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)它

```
this.preload.addEventListener("fileload", this.fileLoaded.bind(this)); 
```

或使用匿名函数作为在实例上显式调用实际方法的处理程序：

```
var that = this;
this.preload.addEventListener("fileload", function(){
    // while "this" points to something indetermined, "that" is the instance
    that.fileLoaded();
}); 
```

由于 TypeError 是“ *this.loadAnother is not a function* ”，并且您尝试调用的唯一地方是，因此在传递给未在正确上下文中调用它的东西时`loadProjectSource`，您似乎遇到了类似的问题。`loadProjectSource`

# java - 将类（脚本？）添加到构建的 java 程序并在运行时执行它们的方法

> ID：15642679
> 
> 赞同：2
> 
> 时间：2013-03-26T16:44:21.923
> 
> 标签：java, class, user-interface, interface

我是一名来自德国的学生，正在做我自己的第一个 java 项目。我正在构建一个小型 GUI 应用程序，用户应该在其中对历史财务数据进行统计测试。用户应该能够通过实现特定的接口来定义自己的测试方法（在 java 中）。我的想法是让**用户将他的类（作为 .class/.jar ...？）保存在规定的文件夹中，他可以在运行时从中检索它们**。但我不得不承认我不知道如何实现......

我的问题是，这是否可能，如果是的话：我在哪里可以找到有关该主题的信息？如果不是，那么**我怎么能创建这样一个“接口”**，用户可以在程序构建后添加他的测试方法/脚本？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:07:05.630

看看[Janino](http://docs.codehaus.org/display/JANINO/Home)，虽然它有其局限性（比如不支持泛型），但它可以支持非常有趣的场景，比如[从 Java 源代码加载类](http://docs.codehaus.org/display/JANINO/Advanced)。它还允许您将“扩展”定义为完整的类或代码块或单个语句。

如果您想要静态插件（在 1 次托管应用程序运行期间不需要更改的插件），您可以使用[jspf](http://code.google.com/p/jspf/)或其他基于 Java 的基于插件的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:46:19.203

定义自定义接口并让用户类实现该接口。这将允许您在运行时加载这些类并使用反射执行方法。

请检查这个[http://docs.oracle.com/javase/tutorial/reflect/](http://docs.oracle.com/javase/tutorial/reflect/)

# android - 如何使用触摸在 Android 应用程序中拖动图像视图

> ID：15642682
> 
> 赞同：1
> 
> 时间：2013-03-26T16:44:30.637
> 
> 标签：android, imageview, drag

我想创建一个应用程序，我将一瓶水拖到屏幕上一个角色的嘴里，类似于 android 应用程序 Pou。我有兴趣知道什么是最好的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:50:30.020

这篇文章看起来很相似。看看。 [如何通过触摸在android中拖动图像？](https://stackoverflow.com/questions/3669239/how-to-drag-an-image-by-touching-in-android) 继续编码！:)

# sql - SQL Case 语句子选择内的子选择分组

> ID：15642683
> 
> 赞同：0
> 
> 时间：2013-03-26T16:44:35.840
> 
> 标签：sql, db2, case, sql-subselect

我不知道如何修改我的查询以使用 information.infoDate 和 otherDates.auxDate 之间的最新日期。

```
SELECT state, COUNT(type) as EQUIPMENT, 
       (SELECT COUNT(type) 
        FROM information a 
        WHERE a.state = b.state 
              AND storedprocedures.to_date(infoDate) < (SELECT current date - 5 days 
                                                        FROM sysibm.sysdummy1) 
        GROUP BY state) as IDLE,
        ROUND((SELECT COUNT(type) 
               FROM information a 
               WHERE a.state = b.state 
                     AND storedprocedures.to_date(infoDate) < (SELECT current date - 5 days 
                                                               FROM sysibm.sysdummy1)
               GROUP BY state) / CAST(COUNT(type) as float) * 100, 1) as percent
FROM information b
JOIN validStates 
  ON state = vstate
LEFT JOIN otherDates 
  ON typeid = auxtypeid
WHERE state <> '***'
GROUP BY state
ORDER BY state 
```

我已经尝试过使用以下语句而不是 infoDate 的各种方式，但我无法运行查询。有没有更好的方法来使用两个日期中的最新日期？

```
SELECT CASE WHEN auxDate > infoDate 
            THEN auxDate 
            ELSE infoDate END AS activityDate 
FROM information 
LEFT JOIN otherDates 
       ON typeid = auxtypeid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:23:13.137

您可能有更好的时间做以下事情（直到我对您的表结构/数据了解更多）：

```
WITH Raw as (SELECT a.state, 
                    MAX(a.infoDate, COALESCE(c.auxDate, '0001-01-01')) as activityDate
             FROM information a
             JOIN validStates b
               ON b.vstate = a.state
             LEFT JOIN otherDates c
                    ON typeId = auxtypeid
             WHERE a.state <> '***'),
     Total as (SELECT state, COUNT(*) as count
               FROM Raw
               GROUP BY state),
     Idle as (SELECT state, COUNT(*) as count
              FROM Raw
              WHERE storedprocedures.to_date(activityDate) < (CURRENT_DATE - 5 DAYS)
              GROUP BY state)
SELECT a.state, a.count as EQUIPMENT, b.count as IDLE, 
       ROUND((100.0 * b.count) / a.count, 1) as percent
FROM Total a
LEFT JOIN Idle b
       ON b.state = a.state
ORDER BY a.state 
```

......这也可能会跑得更快。

请注意，由于使用了`LEFT JOIN`s，`IDLE`并且如果给定没有“空闲”类型，`percent`则可能为 null 。`state`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:47:56.377

```
SELECT state,
COUNT (type) as EQUIPMENT, 
(SELECT COUNT(type) FROM information a LEFT JOIN otherDates on typeid=auxtypeid WHERE a.state=b.state AND (CASE WHEN otherDate > infoDate THEN storedprocedures.dec_to_date(otherDate) ELSE storedprocedures.dec_to_date(infoDate) END) <= (select current date - 5 days from sysibm.sysdummy1) GROUP BY state) as IDLE,
ROUND((SELECT COUNT(type) FROM information a WHERE a.state=b.state AND (CASE WHEN otherDate > infoDate THEN storedprocedures.dec_to_date(otherDate) ELSE storedprocedures.dec_to_date(infoDate) END) < (select current date - 5 days from sysibm.sysdummy1) GROUP BY state)/ CAST(COUNT(type) as float)*100,1) as percent
FROM information b
JOIN validStates ON state=vstate
LEFT JOIN otherDates ON typeid=auxtypeid
WHERE state<>'***'
GROUP BY state
ORDER BY state; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:51:23.823

您的 CASE 语句是选择 2 个字段的最新值的最佳方式。为什么查询没有运行？

一旦你添加了 CASE 语句......确保你也将 CASE 语句添加到查询的 GROUP BY 部分。

哦，...在您头疼之前-您可能要考虑*不要*使用保留关键字（例如状态，类型等）创建字段。

编辑：哎呀我没有看到 DB2 的标签

# iphone - 从每个结果中获取 To-Many NSSet 并计算总和

> ID：15642686
> 
> 赞同：0
> 
> 时间：2013-03-26T16:44:51.780
> 
> 标签：iphone, ios, core-data, one-to-many

我有以下核心数据模型：

![数据模型](../Images/811474af73d249d19f99ab7328a6f8c4.png)

我根据用户选择获取 PbsRow 的实体（用户可以选择保存在 jahr（年）和 monat（月）中的时间范围）。获取请求后，我有一个带有几个 PbsRow 实例的 NSArray。我想做的是计算属于每个 PbsRow 实体的所有 WarengruppeVK 实体（例如 netto）的总和。我曾尝试通过 valueForKeyPath 执行此操作，但这似乎对我不起作用:-(。

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:54:08.940

因此，如果我理解正确，您想要所有现有的 WarengruppeVK-s？在这种情况下，只需创建一个`NSFetchRequest`，将实体设置为`WarengruppeVK`并保留谓词`nil`。

希望这可以帮助！

**编辑：**

在这种情况下，您可以使用 for 浏览您获取的数据，并且每个实体都应该有一个`NSSet`名为的属性，`warengruppeVK`其中包含它的所有 WarengruppeVK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:25:12.397

您应该随意将托管对象子类视为您控制的子类。教他们新的技巧，比如回答年份。

```
// PbsRow.h
- (NSInteger)year;

// PbsRow.m
- (NSInteger)year {
   // return some function of self.jahr that you can write
} 
```

然后 ...

```
NSInteger warrenGroupeCount = 0;
for (PbsRow *pbsRow in fetchResults) {
    if ([pbsRow year] == 2012)
        warrenGroupeCount += pbsRow.warengruppeVK.count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T21:53:13.610

第一步：使用包含此谓词的获取请求获取您的 WarengruppeVK。

```
[NSPredicate predicateWithFormat:@"pbsrow IN %@", pbsRowArray]; 
```

第二步：使用键路径机制的值。

```
[warengruppeVKArray valueForKeyPath:@"@sum.netto"]; 
```

# hadoop - 名称节点失败时会发生什么，哪个进程将监视名称节点心跳状态？

> ID：15642688
> 
> 赞同：1
> 
> 时间：2013-03-26T16:44:54.210
> 
> 标签：hadoop

名称节点将拥有所有数据节点的信息，名称节点与其活动状态的所有数据节点交互，如果任何数据节点宕机，名称节点将开始与其他数据节点使用相同的任务。我的问题是，如果名称节点自身失败怎么办？谁将观看名称节点的活动状态（心跳）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:41:26.457

在 Hadoop 2.0.0 之前，NameNode 是 HDFS 集群中的单点故障 (SPOF)。每个集群都有一个 NameNode，如果该机器或进程不可用，则整个集群将不可用，直到 NameNode 重新启动或在单独的机器上启动。

没有自动恢复或没有系统来监控名称节点故障。

但是，在 hadoop 2.0 中，我们有一个称为 HDFS 高可用性的新功能。我们可以在其中配置活动名称节点和备用名称节点。

看看下面的图表。

![在此处输入图像描述](../Images/586d5d4530d3a120bcb7c4c1266f37da.png)

# jquery - 隐藏空

> ID：15642690
> 
> 赞同：7
> 
> 时间：2013-03-26T16:45:01.323
> 
> 标签：jquery, html, html-lists, hide, trim

我想隐藏所有`<li>`它们是否为空或`<li>`.

我这样做是这样的：

```
$("li:empty").filter(function(i,v){return $.trim($(v).text()).length == 0;}).css('display', 'none'); 
```

这是错误的语法吗？

如果我创建一个类以使空`<li>`不可见，它可以正常工作。像这样：

```
$("li[class='hideLi']").filter(function(i,v){return $.trim($(v).text()).length == 0;}).css('display', 'none'); 
```

但我不知道哪个`<li>`会是空的。

任何人都可以帮助我吗？`display=none`如果`<li>`为空，我想做。

这是我的代码：-

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
  $(document).ready(function(){
    $("td:empty").css('display', 'none');
     $("div:empty").css('display', 'none');
     $(!$.trim('li:empty')).hide();
     $("li[class='hideLi']").filter(function(i,v){return $.trim($(v).text()).length == 0;}).css('display', 'none');
  });
  </script>

<ul>
  <li style="border:red solid 1px ">HI</li>
  <li style="border:green solid 1px ">  </li>
    <li style="border:blue solid 1px " class="hideLi">  </li>
  </ul> 
```

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T16:47:30.180

您可以使用[.hide()](http://api.jquery.com/hide/)

如果你有空格，要让它工作，你可以使用[jQuery.trim()](http://api.jquery.com/jQuery.trim/)

```
$("li").each(function() {

    if(!$.trim($(this).html())) {
        $(this).hide();
    }
}); 
```

工作示例：[小提琴示例](http://jsfiddle.net/8B22K/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:56:33.633

```
$('li').filter(function(){
    return $.trim($(this).html()) == '';
}).hide() 
```

# postgresql - Postgres RIGHT JOIN 与自定义数组

> ID：15642692
> 
> 赞同：3
> 
> 时间：2013-03-26T16:45:16.117
> 
> 标签：postgresql

我正在使用 Postgres 9.1，并希望在没有数据的情况下得到一些空白的结果。我的查询如下所示：

```
SELECT institution_id FROM ... WHERE institution_id IN (1, 3, 4, 5, 7, 9) 
```

... 对这个问题并不重要，重要的是它返回一个带有数组 (1, 3, 4, 5, 7, 9) 中的机构 ID 的结果，并且它包括那些没有数据的机构。这是当前输出的示例

```
days    treatments    institution_id
266    6996    4
265    5310    1
267    3361    5
260    2809    3
264    5249    7 
```

我想要的输出的一个例子是

```
days    treatments    institution_id
266    6996    4
265    5310    1
267    3361    5
260    2809    3
264    5249    7
               9 
```

我知道我可以通过使用以下查询来实现这一点

```
SELECT * FROM (SELECT institution_id FROM ... WHERE institution_id IN (1, 3, 4, 5, 7, 9)) RIGHT JOIN generate_series(1,9) ON generate_series = institution_id WHERE generate_series IN (1, 3, 4, 5, 7, 9) 
```

但是，这是额外的工作，因为 generate_series(1,9) 创建了我不感兴趣的机构 ID，它要求我先验地知道最大机构 ID，并且它引入了一个不必要的 WHERE 子句。理想情况下，我想要如下查询

```
SELECT * FROM (SELECT institution_id FROM ... WHERE institution_id IN (1, 3, 4, 5, 7, 9)) RIGHT JOIN (1, 3, 4, 5, 7, 9) ON generate_series = institution_id 
```

其中 (1, 3, 4, 5, 7, 9) 只是 Postgres 将用于 JOIN 命令的数组。我也已经尝试过 [1, 3, 4, 5, 7, 9] 和 {1, 3, 4, 5, 7, 9} 都无济于事。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:24:38.620

```
select i.days, i.treatments, s.id institution_id
from
    institution i
    right join (
        values (1), (3), (4), (5), (7), (9)
    ) s (id) on i.institution_id = s.id 
```

或者

```
select i.days, i.treatments, s.id institution_id
from
    institution i
    right join
    unnest(array[1, 3, 4, 5, 7, 9]) s (id) on i.institution_id = s.id 
```

# c# - 一般的奇怪行为

> ID：15642694
> 
> 赞同：6
> 
> 时间：2013-03-26T16:45:21.637
> 
> 标签：c#

我遇到了泛型的奇怪行为。下面是我用于测试的代码。

```
public static class Program
{
    public static void Main()
    {
        Type listClassType = typeof(List<int>).GetGenericTypeDefinition();
        Type listInterfaceType = listClassType.GetInterfaces()[0];

        Console.WriteLine(listClassType.GetGenericArguments()[0].DeclaringType);
        Console.WriteLine(listInterfaceType.GetGenericArguments()[0].DeclaringType);
    }
} 
```

输出：

```
System.Collections.Generic.List`1[T]
System.Collections.Generic.List`1[T] 
```

我发现第二个 Console.WriteLine 调用显示一个类而不是接口很奇怪，因为我使用了泛型类型定义。这是正确的行为吗？

我正在尝试在我的编译器中实现泛型类型推断。假设我有下面的代码。

```
public static class GenericClass
{
    public static void GenericMethod<TMethodParam>(IList<TMethodParam> list) { }
} 
```

我想按如下方式调用此方法：

```
GenericClass.GenericMethod(new List<int>()); 
```

为了检查推理的可能性，我必须比较方法签名中的类型和传递的参数类型。但是下面的代码返回 false。

```
typeof(GenericClass).GetMethods()[0].GetParameters()[0].ParameterType == listInterfaceType; 
```

我是否应该始终使用 Type.GetGenericTypeDefinition 进行此类比较？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T16:50:50.130

您混淆了两种都命名为 T 的不同类型。这样想：

```
interface IFoo<TIFOO> { }
class Foo<TFOO> : IFoo<TFOO> {} 
```

好的，什么是*泛型类型*定义`Foo<int>`？那就是`Foo<TFOO>`。

实现的*接口是`Foo<TFOO>`*什么？那就是`IFoo<TFOO>`。

的*类型参数*是`Foo<TFOO>`什么？显然`TFOO`。

*声明* 什么类型`TFOO`？ `Foo<TFOO>`宣布它。

的*类型参数*是`IFoo<TFOO>`什么？显然`TFOO`，*不是* `TIFOO`。

*声明* 什么类型`TFOO`？ `Foo<TFOO>`宣布它。 *不是* `IFoo<TFOO>`。 `TFOO`来自`Foo`.

说得通？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:22:41.147

添加第二个答案，因为您添加了第二个问题：

> 我正在尝试在我的编译器中实现泛型类型推断......

因此，我假设您正在使用反射来构建编译器。这可能不是一个好主意。反射现在比早期的性能要好得多，但与直接使用令牌相比，它仍然是重量级的。并且反射发射不能发射所有可能的拓扑类型；在某些涉及嵌套结构类型的场景中，它会变得混乱。

我会考虑改用 CCI。我们为 Roslyn 使用了 CCI 的修改版本。

> 下面的代码返回 false。

```
typeof(GenericClass).GetMethods()[0].GetParameters()[0].ParameterType == listInterfaceType 
```

这是正确的。参数类型 is`IList<TMethodParam>`和`listInterfaceType`is`IList<T>`其中`T`是 声明的泛型参数类型`List<T>`，而不是 声明的泛型参数类型`IList<T>`。这些都是不同的类型。

> 我是否应该始终使用 Type.GetGenericTypeDefinition 进行此类比较？

如果您想查看两个泛型类型是否都是相同泛型类型的构造，是的。如果这不是您要检查的内容，那么不。

这种类型的系统很复杂，所以要非常小心。

这是使用基于令牌的方法而不是基于反射类型对象的方法的另一个原因。当您手头有标记时，区分 a`TypeDef`和 a会容易得多`TypeRef`。

# mysql - MySQL 更改列 ENUM 值

> ID：15642695
> 
> 赞同：65
> 
> 时间：2013-03-26T16:45:28.663
> 
> 标签：mysql, enums

我有一个 MySQL 表“ `content`”，其中有一列`page_type`类型`ENUM`。`ENUM`值为`NEWS`& `PRESS_RELEASE`。_ 我需要替换`NEWS`为`FEATURED_COVERAGE`：

```
ALTER TABLE `content` CHANGE `pagetype` `pagetype` ENUM('FEATURED_COVERAGE','PRESS_RELEASE') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL; 
```

但是现在表中之前有 page_type 的记录`NEWS`现在是空的，我无法识别哪些记录是`NEWS`，因此我可以将它们重命名为`FEATURED_COVERAGE`。

如何解决此类问题？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-26T16:56:05.773

如果我理解您的问题，您想将现有的枚举值重命名`NEWS`为`FEATURED_COVERAGE`. 如果是这样，您需要按照以下步骤操作，

1.  更改表并将新的枚举值添加到列中，这样您将拥有 3 个枚举

    ```
    ALTER TABLE `content` CHANGE `pagetype` `pagetype`
    ENUM('FEATURED_COVERAGE','PRESS_RELEASE', 'NEWS') CHARACTER SET utf8
    COLLATE utf8_general_ci NOT NULL; 
    ```

2.  将所有记录的旧枚举值设置为新值。

    ```
    UPDATE `content` set `pagetype` = 'FEATURED_COVERAGE' where
    `pagetype` = 'NEWS'; 
    ```

3.  更改表并删除旧的枚举值。

    ```
    ALTER TABLE `content` CHANGE `pagetype` `pagetype`
    ENUM('FEATURED_COVERAGE','PRESS_RELEASE') CHARACTER SET utf8 COLLATE
    utf8_general_ci NOT NULL; 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T16:55:18.070

MySQL 的 enum 总是有一个隐藏选项，它是 0 作为整数和 '' 作为字符串。当您尝试分配无效值时，它会使用隐藏的值。

假设您所有的空值在更新之前都是“新闻”，您可以使用

```
UPDATE content SET pagetype = 'FEATURED_COVERAGE' WHERE pagetype = 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T16:57:39.903

我认为默认值可能有所帮助。

```
ALTER TABLE `content`
CHANGE `pagetype` `pagetype` ENUM('FEATURED_COVERAGE','PRESS_RELEASE') 
   CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULt 'FEATURED_COVERAGE'; 
```

现在你必须盲目地更新

如果您的值集发生变化，切勿使用枚举列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T16:57:58.233

由于您只更改了一个枚举，因此对您来说并不困难

尝试使用这个

```
UPDATE content SET pagetype = 'FEATURED_COVERAGE' WHERE pagetype = 0 
```

# uart - stm32f4 uart波特率设置？

> ID：15642696
> 
> 赞同：0
> 
> 时间：2013-03-26T16:45:28.727
> 
> 标签：uart, baud-rate, stm32f4discovery

现在我有一个 stm32f4-discovery。我为uart制作了一个max232来连接stm32f4。我使用usb-rs232连接max232。我希望我可以通过uart通信stm32f4和PC。我在 Linux 中打开 putty。但是我有一个关于设置 uart 波特率的大问题。如果我设置相同的波特率，它就无法接收到正确的消息。我用示波器观察。最后，我设置了 7680(stm32f4) 和 3200(putty)。然后我可以得到正确的信息。但我不知道为什么它以不同的波特率工作。谁能告诉我为什么？这是我的代码，谢谢[https://gitcafe.com/ctc8631/stm32f4-test-uart](https://gitcafe.com/ctc8631/stm32f4-test-uart)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-31T16:34:17.347

您可能需要检查您的时钟设置。发现板有一个 8MHz 晶振，而标准外设库中的相关配置文件 (Libraries/CMSIS/Device/ST/STM32F4xx/Source/Templates/system_stm32f4xx.c) 似乎是为 25MHz 晶振设置的。它有这些定义

```
#define PLL_M      25
#define PLL_N      336
#define PLL_P      2
#define PLL_Q      7 
```

从 25MHz 生成 168Mhz，而发现板的工作以太网示例在网络外使用

```
#define PLL_M      8
#define PLL_N      288
#define PLL_P      2
#define PLL_Q      6 
```

从 8MHz 获得 144Mhz。

编辑：事实证明这样做还不够，因为 stm32f4xx.h 将“HSE_VALUE”定义为 25000000 (25MHz)，除非在包含文件时已经定义了它。因此，我查看的正常工作示例未定义并将其重新定义为 stm32f4xx_conf.h 中的 8000000 (8MHz)。但我想正确的做法是在编译器命令行上定义它（即，如果您使用 IDE，则在某些属性框中）。至少这在 IAR EWARM 中运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T09:22:46.320

在文件 stm32f4xx.h 你需要修复

```
HSE_VALUE from 25000000 to 8000000 
```

然后在文件 system_stm32f4xx.c 中设置如下：

```
/* PLL_VCO = (HSE_VALUE or HSI_VALUE / PLL_M) * PLL_N */
#define PLL_M      8
#define PLL_N      336

/* SYSCLK = PLL_VCO / PLL_P */
#define PLL_P      2

/* USB OTG FS, SDIO and RNG Clock =  PLL_VCO / PLLQ */
#define PLL_Q      7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T19:04:25.103

我有完全相同的问题。我在我的项目中使用了各种库并包含文件。它们中的大多数都比 ST 提供的原始版本更新。那是我“升级”它们的动机，但我犯了一个大错误。

我的解决方案/解决方法是：

使用真工作室。制作一个新的 Embedded C 应用程序。正确设置向导（这是明确的，但这里有一个关于它的视频：[http](http://www.youtube.com/watch?v=mT5bAgpW3jU) ://www.youtube.com/watch?v=mT5bAgpW3jU ）。它将生成所有必要的文件并设置好一切（项目结构、调试界面等）。添加您自己的源并修改必要的源，然后 USARTx 将运行所需的波特率。

我猜问题是外围时钟速度设置错误，这就是为什么运行速度不匹配。这只是我的意见，我找不到问题的根源，但如果您使用不同的 IDE，我建议将特定于板的库更改回原始库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-03T16:38:30.327

可能你在腻子上使用自动波特率。停用自动波特率，然后重试。如果仍然有效，apb1/apb2-bus 频率可能是错误的。您可以通过 stm32f4xx_rcc.c 编辑总线频率

# web-services - Symfony2 自定义身份验证：用户登录但未通过身份验证

> ID：15642699
> 
> 赞同：3
> 
> 时间：2013-03-26T16:45:37.900
> 
> 标签：web-services, security, authentication, symfony, symfony-2.1

我一直在使用 Symfony 2.1 开发自定义身份验证系统。经过与 Symfony 的大量战斗后，我得到了一些可以工作但不完全的东西......

**问题**：登录后（通过表单），用户已登录但未通过身份验证。

**上下文**：由于用户必须通过 HTML 表单提交他们的凭据，我必须创建一个扩展的侦听器`AbstractAuthenticationListener`。

**问题**：侦听器不应该自动将令牌添加到`SecurityContext`？如果不是这种情况，我应该手动执行吗？

**过程**：

> 用户通过 HTML 表单提交他的凭据
> 
> > 侦听器拦截请求并运行**尝试身份验证**
> > 
> > > Listener 调用 AuthenticationManager 的（实现 AuthenticationProviderInterface）**认证**方法
> > > 
> > > > AuthenticationManager 调用 UserProvider（实现 UserProviderInterface）从我的 web 服务中检索用户数据。
> > > > 
> > > > UserProvider 返回一个实现 UserInterface的**User类**
> > > 
> > > AuthenticationManager 创建一个实现 TokenInterface的**Token 。**
> > > 
> > > AuthenticationManager 将令牌返回给侦听器。
> > 
> > 侦听器的尝试身份验证从 AuthenticationManager 的方法返回令牌：身份验证
> 
> 用户已登录但未通过身份验证。

我没有显示代码示例以避免帖子超载。如果需要，我会编辑帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:39:55.627

我发现我的错误...

登录后，`AuthenticationSuccessHandler`将用户重定向到我想要的 url。此操作从 UserProvider 触发 refreshUser。

这个函数是用一个不同于我登录的用户的测试用户硬编码的。一旦该函数返回一个与存储在令牌中的用户相同的用户，问题就解决了。

# regex - 来自函数的sed参数？

> ID：15642701
> 
> 赞同：0
> 
> 时间：2013-03-26T16:45:42.243
> 
> 标签：regex, bash, sed

我尝试使用以下函数中的 sed 参数。如果找到“a”，则在“a”之前插入#，然后将“a”附加到下一行。parama 的内容与 paramb 相同，但我不明白为什么带有 paramb 的 sed 命令会失败。从函数返回的换行符似乎被修剪了？错误消息是“sed: -e expression #1, char 6: unterminated `s' command”

请帮忙，谢谢。

```
parama="-e s/a/#&\n&/g"
echo "a" | sed $parama

test (){
    echo "-e s/a/#&\n&/g"
}

paramb=$(test)

echo "a" | sed $paramb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:57:10.633

这似乎是 shell 的问题，我的脚本在 bash 上运行良好，但不是 /bin/sh，它实际上是 /bin/dash。我的问题现在已经解决了。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:59:21.190

我无法重现差异。可能是您`echo`碰巧解释了`\n`. 尝试：

```
printf "%s\n" "-e s/a/#&\n&/g" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:12:51.710

我认为，你应该这样做：

```
parama="-e s/a/#&\n&/g"
echo "a" | sed $parama

function test(){
    echo "-e s/a/#&\n&/g";
}

paramb=$(test);

echo "a" | sed $paramb 
```

你没有命名你的函数，我把它命名为 test.Output 我得到：

```
$ ./testso2.sh 
#a
a
#a
a 
```

# c++ - `does not name a type` 帮助，10.6.8，使用 10.4u SDK

> ID：15642702
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:45:44.853
> 
> 标签：c++, macos, types, compiler-errors, adobe

我有一个可以自行运行的 XCode 项目。我正在尝试将它的功能整合到一个包含我们其他产品的新项目中。我收到如下错误：

```
'uint8' does not name a type

'uint16' does not name a type

'uint32' does not name a type 
```

但我不知道为什么。它被用作：

```
typedef uint8 SPUInt8;
typedef uint16 SPUInt16;
typedef uint32 SPUInt32; 
```

我找不到问题所在。我使用与原始项目相同的标题和源。我已经完成了构建设置以确保它们匹配。

我认为它可能是 SDL.h 但在 OSX 上不存在。我也试过包括

```
#include <stdlib.h>
#include <sys/types.h> 
```

在新项目中，但旧项目不包括它们

这是一个使用 Adob​​e SDK 的 CS5 64 位 Photoshop 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:55:29.483

这些类型在 OpenCL 框架（特别是在 /System/Library/Frameworks/OpenCL.framework/Versions/A/Resources/cl_kernel.h）和安全框架（特别是在 /System/Library/Frameworks/Security.framework/版本/A/Headers/cssmconfig.h)。我不知道他们为什么在这些特定的框架中。

将此行添加到源文件将定义类型：

```
#include <Security/Security.h> 
```

您的源代码是否使用了安全框架中的 API？还是 OpenCL？

# java - 停止/取消 ScheduledFuture

> ID：15642706
> 
> 赞同：1
> 
> 时间：2013-03-26T16:45:47.050
> 
> 标签：java, spring, scheduling

我可以调用该`start()`函数来运行这个实现 Runnable 的 Quarterly Metric Report Scheduling Service 来调度某个任务，但我还需要能够在以后停止/取消已调度的任务，以防我需要更改调度时间。

我已经阅读了很多帖子并尝试了几种方法来使该`stop()`功能正常工作，但没有运气。我想我的问题也可能是我如何找到/检索计划任务并取消它们？

有人可以帮忙吗？非常感谢。

```
 @Configuration
    @EnableScheduling
    public class QuarterlyMetricReportScheduling{

        @Autowired
        QuarterlyMetricReportService qmrService;

        ScheduledFuture sf;

        CronTrigger trigger;

        int shutdownTimeout = 1 * 60 * 1000;//10 sec

        @Autowired
        QuarterlyMetricReportSchedulingService task;

        public ThreadPoolTaskScheduler threadPoolTaskScheduler() {
            ThreadPoolTaskScheduler tps = new ThreadPoolTaskScheduler();
        tps.setThreadNamePrefix("job");
        return tps;
        }

        public void changeTrigger(String cronExpression){
        System.out.println("change trigger to: " + cronExpression);
        trigger = new CronTrigger(cronExpression);
        start();
        }

        public void start(){

        ThreadPoolTaskScheduler  tps = new ThreadPoolTaskScheduler();
        tps.initialize();
        task = new QuarterlyMetricReportSchedulingService();
        tps.schedule(task, trigger);
        }

        public void stop() {

        ThreadPoolTaskScheduler tps = threadPoolTaskScheduler();
        //tps = new ThreadPoolTaskScheduler();
        //tps.setThreadNamePrefix("job");
        tps.initialize();
            task = new QuarterlyMetricReportSchedulingService();
        trigger = new CronTrigger("0 59 11 26 3 ?");
        tps.schedule(task, trigger);
        ScheduledExecutorService scheduledExecutorService = tps.getScheduledExecutor();
            try {
            //ScheduledServiceExecutor service = 
                //Executors.newSingleThreadScheduledExecutor();
            task = new QuarterlyMetricReportSchedulingService();
            ScheduledFuture future = scheduledExecutorService.scheduleWithFixedDelay(
            task, 1, 1, TimeUnit.MILLISECONDS);

            future.cancel(true);
            scheduledExecutorService.shutdown();
            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T22:21:39.383

您只在 stop 方法中安排任务似乎有点奇怪。

您需要在开始时安排任务，将未来作为句柄，然后在停止方法中对未来调用取消。

您应该创建一次线程池并将其用于所有报告，否则没有池。

# visual-c++ - 带参数的格式化日志不起作用

> ID：15642709
> 
> 赞同：0
> 
> 时间：2013-03-26T16:46:05.760
> 
> 标签：visual-c++, logging, variadic-functions

我正在使用 VS2012 pro 用 VC++ 编写并试图让我的记录器输出类似这样的内容

```
03/26/2013    Registry()+
03/26/2013    Registry::LoadDWORD("VersionNumber")+;
03/26/2013    Registry(3)- 
```

使用以下代码行

```
RegistryHelper::RegistryHelper()
{
    LogWriter::WriteStart("Registry");
}
bool RegistryHelper::LoadDWORDValue(char* entry, UINT defaultValue, UINT& returnValue)
{
    LogWriter::WriteStart("Registry::LoadDWORD", entry);
    //Code to get DWORD

    LogWriter::WriteEnd("Registry::LoadDWORD", returnValue);
    return true;
} 
```

我到目前为止的代码是这个

```
void LogWriter::WriteStart(const char* log, ...)
{
    tcout << log << "(";

    va_list argptr;
    va_start(argptr, log);
    vfprintf(stderr, log, argptr);
    va_end(argptr);

    std::wcout << ")+" << EOL;
} 
```

作为测试，我写了这个。

```
LogWriter::WriteStart("Registry", "Something", "else", "Start", "STop");
char* entry = "VersionNumber";
LogWriter::WriteStart("Registry", entry);
LogWriter::WriteStart("Registry"); 
```

但我只是回来

```
2013-03-26.11:41:15 Registry()+
2013-03-26.11:41:15 Registry()+
2013-03-26.11:41:15 Registry()+ 
```

但我期待回来

```
2013-03-26.11:41:15 Registry(Something, else, Start, STop)+
2013-03-26.11:41:15 Registry(VersionNumber)+
2013-03-26.11:41:15 Registry()+ 
```

通过一些玩弄它（主要是从网上获取代码并尝试一些不同的东西），我已经能够让它说出来`Registry(Registry)+`，但我已经接近了。（我正在使用 while 循环并检查 NULL）我对 VC++ 有点陌生，对使用参数也很陌生（对不起，我是 C# 人）。这是我在玩了大约 1 个小时后得到的结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T05:30:17.207

您正在尝试在函数之上使用可变数量的参数功能，`*printf`但在调用.`%d``%s``WriteStart`

一个电话应该是这样的：

```
LogWriter::WriteStart("Registry %s", entry); 
```

此外，您无需将函数名称硬编码为从生成日志的位置开始。该声明：

```
LogWriter::WriteStart("Registry::LoadDWORD", entry); 
```

可以很容易地替换为：

```
LogWriter::WriteStart(__FUNCTION__, entry); // I am ignoring the format-specifier here 
```

`__FUNCTION__`将被预处理器替换为完全限定的函数名。

此外，您还可以制作一个宏来处理所有这些：

```
#define WRITE_LOG(_smsg) \
   LogWriter::WriteStart(__FUNCTION__ , _smsg); 
```

并使用它：

```
WRITE_LOG("Your log message"); // Again, I ignore format-specifier here and in macro. 
```

如果您正在使用宏，并使用带有格式说明符的变量参数函数，则可以`__VA_ARGS__`与宏本身一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T23:05:57.383

更好 - 只需传递您希望用作参数的任何输出流：

```
void LogWriter::WriteStart(FILE *fp, const char* log, ...)
{
    fprintf (fp, "(");
    va_list argptr;
    va_start(argptr, log);
    vfprintf(fp, log, argptr);
    va_end(argptr);
    fprintf (fp, ")\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:11:27.760

尝试

```
std::cout << log << "(";

va_list argptr;
va_start(argptr, log);
vfprintf(stdout, log, argptr); // use same stream here!
va_end(argptr);

std::cout << ")+" << EOL; 
```

# jquery-mobile - 单击链接时如何刷新页面

> ID：15642718
> 
> 赞同：0
> 
> 时间：2013-03-26T16:46:31.247
> 
> 标签：jquery-mobile, tabs, refresh

我在页面上有一些标签（使用 jquery mobile）。但是，当我更改标签时，我想刷新页面。

这是我的页面中的内容：

```
<li><a href="#" data-icon="arrow-r" data-tab-class="tab-info">Info</a></li>
<li><a href="#" data-icon="arrow-r" data-tab-class="tab-insights">Insights</a></li> 
```

我尝试将 js 重新加载到我的 href 中，如下所示：

```
<li><a href="#" data-icon="arrow-r" data-tab-class="tab-info">Info</a></li>
<li><a href="javascript:history.go(0)" data-icon="arrow-r" data-tab-class="tab-insights">Insights</a></li> 
```

但是，这会重新加载页面并将您放回到第一个选项卡上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:08:42.607

要刷新当前页面，请使用以下代码。

```
$('.selector').on('click', function () {

 // get ID of the current page
 var refreshpage = '#' + $.mobile.activePage[0].id;

 // this will refresh the same page
 $.mobile.changePage(refreshpage, {
  allowSamePageTransition: true
 });
}); 
```

# wpf - 单击一次 WPF 应用程序（可离线使用）– 在“应用程序文件”文件夹中挂载以前的版本– Team City

> ID：15642720
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:46:36.160
> 
> 标签：wpf, deployment, clickonce, teamcity

我们目前正在构建一个 WPF 应用程序，该应用程序将通过 Click Once 进行部署，该构建当前由 Team City 服务器处理。我们注意到每次有人签入一些代码并且 CI 服务器构建部署包时，“应用程序文件”目录包含应用程序的附加版本。

**由于 Click Once 部署的安装大小，这变得不可扩展，有人知道如何限制放置在 Application Files 目录中的先前版本的数量吗？**

应用程序文件目录：

![应用程序文件截图](../Images/c0ee8699578b4a5dd067da17ce17b690.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:06:41.827

单击一次不提供任何机制来处理已发布的部署。微软很难做到这一点，因为每个人的要求都不一样。我确定这就是 Team City 也没有添加该能力的原因（假设他们没有，我不使用 Team City）。

# r - 为什么 plyr 包不使用我的并行后端？

> ID：15642722
> 
> 赞同：8
> 
> 时间：2013-03-26T16:46:40.427
> 
> 标签：r, parallel-processing, plyr

我正在尝试将`parallel`R 中的包用于并行操作，而不是`doSNOW`因为它是内置的，并且表面上是 R 项目想要的方式。我做错了，但我无法确定。举个例子：

```
a <- rnorm(50)
b <- rnorm(50)

arr <- matrix(cbind(a,b),nrow=50)

aaply(arr,.margin=1,function(x){x[1]+x[2]},.parallel=F) 
```

这工作得很好，产生了我的两列的总和。但是，如果我尝试引入并行包：

```
library(parallel)
nodes <- detectCores()
cl <- makeCluster(nodes)
setDefaultCluster(cl)

aaply(arr,.margin=1,function(x){x[1]+x[2]},.parallel=T) 
```

它抛出错误

```
2: In setup_parallel() : No parallel backend registered
3: executing %dopar% sequentially: no parallel backend registered 
```

我初始化后端错误吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-26T17:11:41.987

试试这个设置：

```
library(doParallel)
library(plyr)

nodes <- detectCores()
cl <- makeCluster(nodes)
registerDoParallel(cl)

aaply(ozone, 1, mean,.parallel=TRUE)

stopCluster(cl) 
```

由于我从未使用`plyr`过并行计算，我不知道为什么会发出警告。结果无论如何都是正确的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-26T17:04:24.560

`aaply`各州的文件

> .parallel：如果为“真”，则使用 foreach 提供的并行后端并行应用函数

所以大概你需要使用`foreach`包而不是`parallel`包。

# javascript - 有什么理由将函数作为变量？

> ID：15642724
> 
> 赞同：1
> 
> 时间：2013-03-26T16:46:48.337
> 
> 标签：javascript, design-patterns

在编辑别人的代码时，我遇到了一个我以前没有见过的模式：

`var functionName = function functionName(){};`

稍后，使用这个 jQuery 调用函数

`$(functionName);`

现在，在我将其更改为`function functionName(){}`名为 with的标准之前`functionName();`，是否有任何理由这样做？

**编辑：**更新以反映函数调用中 jQuery 的使用。我过度简化了这个例子。（哎呀，对不起！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:05:08.710

```
var workerFn = function someDefaultFn() {};

if ( lots of logic) {
  workerFn = function specialFn() {};
}

//// later on

workerFn(); 
```

所以现在我们可以灵活地确定究竟调用了什么。有点像穷人的多态性。在您的示例中，我们会将 workerfn 传递给要调用的 JQuery，因此具有相同的灵活性可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:57:53.070

使用函数表达式的唯一技术原因是避免提升函数和/或能够使用另一个内部名称来引用函数本身。

这些是函数表达式和函数声明之间的唯一区别，它们是否相关取决于上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T16:53:10.370

函数名；

不会调用该函数。这只是对函数的引用。调用函数需要`()`. 所以如果我们有

```
var functionName = function test(){ alert("0");}; 
```

这个

```
functionName; 
```

不叫它。实际上这根本没有做任何事情（无操作）。这与

```
var x;
x; 
```

只有这个

```
functionName() 
```

调用它。

也许`functionName;`用于其他用途。我们只有在有上下文的情况下才能判断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:52:16.227

我会说这是一个错误，因为`functionName;`不会做任何事情。还是您的问题中的错字？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T16:49:57.853

[编辑]
您可以通过这种方式找到`var functionName = function(){};`并创建尽可能多的实例`var second = functionName;`
只有当您希望使用少量变量来调用相同的函数但使用不同的参数时才有帮助...

但是在您的情况下， functionName 将仅包含`function functionName() {};`将返回的内容。

您可能在函数内容中有这样的内容：

```
var functionName = function test(param) {
    [...]
    return function(otherParam) { 
        //do something
    };
} 
```

# c++ - 使物体随机移动

> ID：15642731
> 
> 赞同：0
> 
> 时间：2013-03-26T16:47:08.107
> 
> 标签：c++, random

我正在制作一个可以随机移动的机器人，但我有一个问题。

[http://img199.imageshack.us/img199/2599/randommovement.jpg](http://img199.imageshack.us/img199/2599/randommovement.jpg)

为什么这段代码没有运行？有什么问题吗？

```
# include <iostream.h>
# include <stdlib.h>
# include <time.h>
# include <windows.h>
# include <conio.h>

void gotoxy(int x, int y){
    COORD coord;
    coord.X = x;
    coord.Y = y;
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);
}

void gerakA(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakB(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakC(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakD(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakE(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakF(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakG(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
void gerakH(int pointX_par, int pointY_par, int stepX_par, int stepY_par);

int main()
{
    int stepX, stepY;
    int z;
    int pointX, pointY;
    int n;
    int random; 

    cout <<"Enter your starting point:"<<'\n';
    cout <<"x:";
    cin >> pointX;
    cout <<"y:";
    cin >> pointY;

    cout << "number of step:";
    cin >> n;

    cout <<"enter the size of step :"<<'\n';
    cout <<"x:";
    cin >> stepX;
    cout <<"y:";
    cin >> stepY;

    for (z=1; z<=n+1; z++)
    {  
     srand (time(NULL));  
     random = rand() % 8 + 1;
     switch ( random ) {
       case 1:
         gerakA(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 2:
         gerakB(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 3:
         gerakC(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 4:
         gerakD(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 5:
         gerakE(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 6:
         gerakF(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 7:
         gerakG(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       case 8:
         gerakH(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
     }

   }

   getch();
}

void gerakA(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par + stepX_par;
     pointY_par = pointY_par;
     cout << "0";
}

void gerakB(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par + stepX_par;
     pointY_par = pointY_par - stepY_par;
     cout << "0";
}

void gerakC(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par;
     pointY_par = pointY_par - stepY_par;
     cout << "0";
}

void gerakD(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par - stepX_par;
     pointY_par = pointY_par - stepY_par;
     cout << "0";
}

void gerakE(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par - stepX_par;
     pointY_par = pointY_par;
     cout << "0";
}

void gerakF(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par - stepX_par;
     pointY_par = pointY_par + stepY_par;
     cout << "0";
}

void gerakG(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par;
     pointY_par = pointY_par + stepY_par;
     cout << "0";
}

void gerakH(int pointX_par, int pointY_par, int stepX_par, int stepY_par){
     gotoxy (pointX_par,pointY_par);
     pointX_par = pointX_par + stepX_par;
     pointY_par = pointY_par + stepY_par;
     cout << "0";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:19:16.867

因此，与`expected primary-expression before "int"`错误相关的问题是因为您错误地调用了函数：

```
gerakA(int pointX_par, int pointY_par, int stepX_par, int stepY_par);
       ^^^       ^^^^  ^^^       ^^^^  ^^^      ^^^^  ^^^      ^^^^ 
```

您不必重新声明类型，并且您没有使用正确的变量名称，对于上面的示例，它应该是，或者至少从我可以告诉：

```
gerakA(pointX, pointY, stepX, stepY); 
```

# javascript - 在表单中引入元素

> ID：15642733
> 
> 赞同：0
> 
> 时间：2013-03-26T16:47:10.253
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 在表单中插入一个元素。

为此，我克隆了元素，更改了属性并插入，然后使用 .html() 将 jquery 对象转换为 HTML 对象，但它不起作用。

```
function addInput(divName){
    var selector= $('#tipoProducto').clone();
    selector.attr('name', counter );

    var newdiv = document.createElement('div');
    newdiv.innerHTML = "<li>porcentaje "
       + (counter + 1) 
       + "</li><li>\
         <input type='text' name='myInputs[]'></li>\
         <li>Ingediente Activo" 
       + (counter + 1)
       + "</li><li>"
       + selector.html()
       + "</li>";
    document.getElementById(divName).appendChild(newdiv);
    counter++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:52:40.970

> 为此，我克隆元素更改属性并插入，然后使用 .html() 将 jquery 对象转换为 html 对象，但不起作用。

你不必那样做。你可以做这样的事情，更一般地说：

```
var div = $('<div><ul><li>X</li><li>Y</li></ul></div>');
$(div).appendTo($('#' + divName)); 
```

不需要像那样使用`html()`, DOM 代码等。事实上，您应该这样做，因为 jQuery 的 DOM 操作快捷方式是 99.99% 跨浏览器（制造商和版本），而标准 DOM 调用在旧版本的 IE 中可能不同。

# php - PDO::getAttribute(PDO::ATTR_CONNECTION_STATUS) 的可能结果是什么

> ID：15642734
> 
> 赞同：8
> 
> 时间：2013-03-26T16:47:13.833
> 
> 标签：php, pdo, connection

我几乎整天都在研究这个..似乎无法在任何地方找到返回的值。有人可以告诉我：

1.  返回什么值`PDO::getAttribute(PDO::ATTR_CONNECTION_STATUS);`？
2.  是否可以依靠其结果来确定连接是否仍然存在？（最终，我可以用什么来检查连接是否仍然存在？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:44:51.653

最后！事实证明，该`mysqli::ping()`功能可以在 PDO 中实现，如下所示：

```
class PDOExtended extends PDO {
    public function __construct($dsn, $user, $pass, $options = array())
    {
        $this->link = parent::__construct($dsn, $user, $pass, $options);
        $this->link->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION)
    }

    // some methods

    public function isConnected()
    {
        try {
            return (bool) $this->link->query('SELECT 1+1');
        } catch (PDOException $e) {
            return false;
        }
    }

    //some other methods
} 
```

**原因：**
`PDO::query();`返回包含结果的数组或 false，在当前情况下它不会返回任何内容，因为连接已死，PDO 应该向我们抛出异常。这就是我们所期待的。catch 块将返回 false 并且不会停止我们的脚本的执行。使用的查询

> 选择 1+1;

将始终返回 2 并且由于它是在 DB 端计算的，因此值得信赖。没有联系，没有结果！这不是矫枉过正，因为它是非常简单的查询，并且大多数数据库（在普通共享主机上）都在本地主机上，它不会占用更多的时间`0.0000s`，这并不是一个性能问题。尚未使用事务对其进行测试，但仍然可以解决问题。

# c# - 在 C# 中复制文件时检查重复的文件名

> ID：15642748
> 
> 赞同：0
> 
> 时间：2013-03-26T16:47:43.990
> 
> 标签：c#, duplicates, filenames, copying, renaming

我想将文件复制到目录并重命名为特定格式。但如果文件名已存在，则应在文件扩展名前附加 {1}、{2} 或 {3}。

我的代码重命名并复制了文件，并将其命名为我想要的格式，比如 filename.pdf，当它检查重复时，它将它重命名为 filename1.pdf。但是当它再次尝试复制时，它给出了一个错误“文件已经存在”，但我希望它把它命名为 filename02.pdf。

请有人帮助我。

这是我到目前为止编写的代码。

```
 {
        string fileSource, filesToCopy, target, nextTarget;

        string sourceDir = @"C:\HCP_PDFs";            

        string destinationDir = @"C:\RenamedHcpPdfs";

        DirectoryInfo di = new DirectoryInfo(destinationDir);

        // create the directory if it dosnt exist

        if (!Directory.Exists(destinationDir))
        {
            Directory.CreateDirectory(destinationDir);
        }

        foreach (string myFiles in lstBoxFilenames.Items)
        {

            filesToCopy = myFiles;
            fileSource = Path.Combine(sourceDir, filesToCopy);         

            //Extract only HCP Name by splitting , removing file Extension and removing HCP ID 
            string hcp = filesToCopy.Split('_')[0];
            string hcpCd = filesToCopy.Split('_')[1];
            string hcpID = filesToCopy.Split('_')[2];
            string hcpName = String.Format((filesToCopy.Split('_')[3]).Replace(".pdf", ""));           

            //combine the HCP ID, HCP name and date                                                
            target = Path.Combine(destinationDir, hcp + "{" + hcpCd + "~" + hcpID + "}" + hcpName + "{2013_03_14}" + ".pdf");

            // if file exists in directory then rename and increment filename by 1
            int i = +1 ;

            nextTarget = Path.Combine(destinationDir, hcp + "{" + hcpCd + "~" + hcpID + "}" + hcpName + "{2013_03_14}" + i + ".pdf");

            if (File.Exists(target))
            {
                File.Copy(fileSource, nextTarget);
                break;
            }

            //if file does not exist, rename              
            else
            {
                File.Copy(fileSource, target);
            }          
        }            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:55:47.877

做这个

while(File.Exists(target)) {i++;}

现在声明你的目标路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:06:52.130

尝试这个 ：

```
string target = Path.Combine(destinationDir, hcp + "{" + hcpCd + "~" + hcpID + "}" + hcpName + "{2013_03_14}.pdf");
while(File.Exists(target))
        {
            i++;
            target = Path.Combine(destinationDir, hcp + "{" + hcpCd + "~" + hcpID + "}" + hcpName + "{2013_03_14}" + i + ".pdf");

        }

File.Copy(fileSource, target);
break; 
```

# bash - 用于计算文件中特定单词出现次数的命令行（例如 json 中的键数）

> ID：15642754
> 
> 赞同：0
> 
> 时间：2013-03-26T16:47:54.057
> 
> 标签：bash, shell, awk, grep, uniq

命令行的东西有点新，但正在寻找一些指针。

我使用以下快速脚本来计算密钥在 json 文件中出现的次数：

```
grep -wo "\"keyname\"" "filename.json" | uniq -c
1200 keyname 
```

它工作得很好，但是当我想测试一堆键的计数时会重复......

```
grep -wo "\"key1\"" "filename.json" | uniq -c
1200 key1
grep -wo "\"key2\"" "filename.json" | uniq -c
1201 key2
grep -wo "\"key3\"" "filename.json" | uniq -c
1199 key3 
```

所以，我想升级它以获取存储在文本文件中的键名数组，而不是在键名参数中单独指定它们。如果它保持单线，并且保持[`cat`-free](https://en.wikipedia.org/wiki/Cat_%28Unix%29#Useless_use_of_cat)，那就更好了。

我不太擅长单行，所以我尝试了以下方法：

(1) 制作一个名为 testkeys.sh 的脚本：

```
#!/bin/bash
while read line
do
grep -wo $line "filename.json" | uniq -c
done 
```

(2) 制作一个名为keys.txt的密钥文件

```
key1
key2
key3 
```

(3) 那么

```
$ ./testkeys.sh keys.txt 
```

但是，这没有完成。

想法？

我试图找到某种方法将 keys.txt 的行变成变量以进入 grep 中的循环语句，但没有成功。所需的输出将是...

```
$ magic? | grep -wo $vars "filename.json" | uniq -c
1200 key1
1202 key2
1199 key3 
```

**更新**

我知道 grep 可以使用 -f 标志将模式文件作为参数，但这似乎仍然需要以我不理解的方式对脚本进行重大更改。所以，例如...

正在尝试转换...

```
grep -wo "\"keyname\"" "filename.json" | uniq -c 
```

进入...

```
grep -wo -F -f keys.txt "filename.json" | uniq -c 
```

生产

```
1 key1
1 key2
1 key1
1 key2
1 key1
1 key2 
```

……好几次。它还比每个单独执行 n 次的速度花费 /much/ 更长的时间。

我也试过这个，我认为这很酷：

```
$ cat keys.txt | xargs -0 -I keyname grep -wo keyname "filename.json" | uniq -c 
```

但这也运行了很长时间，并且没有聚合超过 count = 1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:17:40.517

`uniq -c`计算*连续*出现的次数。所以，你快到了，你只需要一个`sort`：

```
grep -wo -F -f keys.txt "filename.json" | sort | uniq -c 
```

# asp.net - ASP.NET 站点无意中共享登录 cookie

> ID：15642761
> 
> 赞同：0
> 
> 时间：2013-03-26T16:48:16.820
> 
> 标签：asp.net, session-cookies

我有几个 ASP.NET 站点在一台 IIS 服务器上运行，当然使用不同的端口。这些站点允许通过表单身份验证登录。会话状态存储在本地状态服务器上。我的问题是，当用户登录一个站点然后导航到另一个站点时，他们会从第二个站点获得异常，并且必须关闭/重新打开其 Web 浏览器才能访问它。我的猜测是来自第一个站点的 cookie 使他们看起来也登录了第二个站点（尽管我可能完全错了）。

我尝试了一些方法来解决它（这可能很愚蠢，与问题无关，但我远非 ASP.NET 专家），包括：1）在 Web.config 中为站点提供不同的 cookie 名称sessionState 标签，以及 2) 将站点移动到不同的应用程序池，但问题仍然存在。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:59:41.850

我建议为每个站点设置不同的域。如果这是本地的，请使用主机文件将 local.site1.com 和 local.site2.com 路由到正确的位置。显然，您必须保留端口。然后，您应该为每个站点设置具有不同域的 cookie，而不会引起混淆。

# jquery - jQuery幻灯片重新开始或最后

> ID：15642762
> 
> 赞同：0
> 
> 时间：2013-03-26T16:48:22.427
> 
> 标签：jquery

[jsFiddle](http://jsfiddle.net/WTvsM/)

使用下面的代码，我有一个 jQuery 内容幻灯片工作，但是当我在开始或最后一张幻灯片时，下一个和上一个箭头消失，我希望幻灯片继续回到开头或最后一张，具体取决于当前幻灯片你明白我的意思。

**jQuery**

```
var currentPosition = 0;
var slideWidth = 560;
var slides = $('.slide');
var numberOfSlides = slides.length;
// Remove scrollbar in JS
$('#slidesContainer').css('overflow', 'hidden');

// Wrap all .slides with #slideInner div
slides.wrapAll('<div id="slideInner"></div>')
// Float left to display horizontally, readjust .slides width
.css({
    'float' : 'left',
    'width' : slideWidth
});

// Set #slideInner width equal to total width of all slides
$('#slideInner').css('width', slideWidth * numberOfSlides);

// Insert controls in the DOM
$('#slideshow')
    .prepend('<span class="control" id="leftControl">Clicking moves left</span>')
    .append('<span class="control" id="rightControl">Clicking moves right</span>');

// Hide left arrow control on first load
manageControls(currentPosition);

    // Create event listeners for .controls clicks
$('.control')
        .bind('click', function(){
    // Determine new position
    currentPosition = ($(this).attr('id')=='rightControl') ? currentPosition+1 : currentPosition-1;

    // Hide / show controls
    manageControls(currentPosition);
    // Move slideInner using margin-left
    $('#slideInner').animate({
        'marginLeft' : slideWidth*(-currentPosition)
    });
});

// manageControls: Hides and Shows controls depending on currentPosition
function manageControls(position){
    // Hide left arrow if position is first slide
    if(position==0){ $('#leftControl').hide() } else{ $('#leftControl').show() }
    // Hide right arrow if position is last slide
        if(position==numberOfSlides-1){ $('#rightControl').hide() } else{ $('#rightControl').show() }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:00:50.370

您必须删除对您的函数的调用，`manageControls`而不是该行

```
currentPosition = ($(this).attr('id')=='rightControl') ? currentPosition+1 : currentPosition-1; 
```

使用代码

```
if(($(this).attr('id')=='rightControl')) {
    if(currentPosition == numberOfSlides-1)
        currentPosition = 0;
    else
        currentPosition++;
} else if($(this).attr('id')=='leftControl'){
    if(currentPosition == 0)
        currentPosition = numberOfSlides-1;
    else
        currentPosition--;
} 
```

请参阅[http://jsfiddle.net/WTvsM/1/](http://jsfiddle.net/WTvsM/1/)以获取小提琴的更新版本。

# ruby-on-rails - 防止某些用户在 Rails Admin 中删除记录

> ID：15642767
> 
> 赞同：3
> 
> 时间：2013-03-26T16:48:31.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, filter, rails-admin

我安装了 Rails Admin，效果很好。但是我有一个问题。只有管​​理员可以登录 Rails Admin，管理员有两种类型。第一种类型的管理员可以访问所有内容，删除他们想要的任何内容等。第二种类型应该只能访问某些表。

我没有看到 Rails Admin 的任何配置来获得我想要的东西，所以我正在考虑在我的模型中使用回调。但是我必须以某种方式通过用户的凭据来验证他们是什么类型的管理员，即使这样也必须进行大量的黑客攻击。我的问题是，这可以做到吗？如果可以，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:52:41.227

我过去曾使用 CanCan 来完成您正在寻找的内容。它与 Rails Admin 配合得很好。

[https://github.com/sferik/rails_admin/wiki/CanCan](https://github.com/sferik/rails_admin/wiki/CanCan)

顺便说一句：我建议每个用户使用一个角色，因为这似乎使事情变得更容易。

# c++ - 使用静态库链接时出现链接错误

> ID：15642777
> 
> 赞同：0
> 
> 时间：2013-03-26T16:48:46.930
> 
> 标签：c++, visual-studio, static-libraries, linkage

之前可能已经问过这个问题，但是，我只在类的上下文中发现它，而事实并非如此。

**实用程序.h**

```
#ifndef _UTILS_H_
#define _UTILS_H_

#include <cmath>

//is 'x' prime?
bool isPrime(long long int x);

//find the number of divisors of 'x' (including 1 and x)
int numOfDivisors(long long int x);

#endif //_UTILS_H_ 
```

**实用程序.cpp**

```
#include "Utils.h"

bool isPrime(long long int x){
if (x < 2){
    return false;
}
long double rootOfX = sqrt( x );
long long int flooredRoot = (long long int)floor ( rootOfX );

for (long long int i = 2; i <= flooredRoot; i++){
    if (x % i == 0){
        return false;
    }
}

return true;
}

int numOfDivisors(long long int x){
if (x == 1){
    return 1;
}

long long int maxDivisor = (x / 2) + 1;
int divisorsCount = 0;
for (long long int i = 2; i<=maxDivisor; i++){
    if (x % i == 0){
        divisorsCount++;
    }
}

divisorsCount += 2; //for 1 & x itself
return divisorsCount;
} 
```

这两个文件已在调试模式下使用 Visual Studio 2012 编译为静态库。现在我尝试在一个单独的项目中使用它们，我们称之为 MainProject：
1\. 将“Utils.vcproj”添加到 MainProject 解决方案中。
2\. 使 MainProject 依赖于 Utils
3\. 在“Properties”->“Linker”->“Input”->“Additional Dependencies”中输入 Utils.lib 的路径

这是使用 Utils 的主要内容：

```
#include <iostream>
#include "..\Utils\Utils.h"

using namespace std;

int main(){

cout << "num of divisors of " << 28 << ": " << numOfDivisors(28) << endl;

//this part is merely to stop visual studio and look at the output
char x;
cin >> x;
return 0;
} 
```

这是我得到的错误：

```
Error   1   error LNK2019: unresolved external symbol "int __cdecl numOfDivisors(__int64)" (?numOfDivisors@@YAH_J@Z) referenced in function _main   G:\ProjectEuler\Problem12\Source.obj    Problem12 
```

为什么找不到实现“numOfDivisors”的代码？我已经给了它包含它的 .lib，此外 - 依赖于 Utils 项目本身......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:57:14.953

看起来方法 numOfDivisors() 没有在 Utils.cpp 中定义，你可以检查一次吗？

为什么您的编译器会抱怨“G:\ProjectEuler\Problem12\Source.obj”？Source.obj 来自哪里？

您必须在一个字段中指定库路径并在另一字段中指定库名称，您是否在适当的设置下指定了两者？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T02:49:14.510

假设该库已正确构建和链接，则错误的下一个最可能原因是该函数在库中的名称与链接到它的代码中的名称不同。

这可能是由影响名称修饰或类型名称的任意数量的项目设置引起的。从远处猜测哪个特定设置是您的情况的罪魁祸首没有任何意义。您可以比较两个项目的属性（手动或使用差异工具）并尝试找出可能导致不同修饰函数名称的差异。

# asp.net - 多个应用程序和一个 aspnetdb，Profile 问题

> ID：15642779
> 
> 赞同：0
> 
> 时间：2013-03-26T16:48:49.250
> 
> 标签：asp.net, webforms, profile, aspnetdb

我们在同一个 aspnetdb 上运行多个应用程序。他们都使用相同的 MembershipProvider。有时我们会得到 Profile 属性的“奇怪值”。该应用程序似乎正在使用来自不同应用程序的数据。

我们已经使用了不同的 ApplicationName 参数。

有没有办法在不为配置文件使用不同数据库的情况下清楚地分离应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:03:17.890

这篇文章对你需要的很有用

[http://weblogs.asp.net/scottgu/archive/2006/04/22/Always-set-the-_2200_applicationName_2200_-property-when-configuring-ASP.NET-2.0-Membership-and-other-Providers.aspx](http://weblogs.asp.net/scottgu/archive/2006/04/22/Always-set-the-_2200_applicationName_2200_-property-when-configuring-ASP.NET-2.0-Membership-and-other-Providers.aspx)

```
<membership>
            <providers>
                <clear/>
                <add name="AspNetSqlMembershipProvider"
                    type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
                    connectionStringName="LocalSqlServer"
                    enablePasswordRetrieval="false"
                    enablePasswordReset="true"
                    requiresQuestionAndAnswer="true"
  requiresUniqueEmail="false"
                    passwordFormat="Hashed"
                    maxInvalidPasswordAttempts="5"
                    minRequiredPasswordLength="7"
                    minRequiredNonalphanumericCharacters="1"
                    passwordAttemptWindow="10"
                    passwordStrengthRegularExpression=""
                    applicationName="/"
                />
            </providers>
      </membership> 
```

为每个应用添加相同的连接字符串，并在`applicationName`属性中设置不同的名称

# java - 从 Java Spring MVC 3 应用程序访问 Glassfish 文件夹

> ID：15642783
> 
> 赞同：1
> 
> 时间：2013-03-26T16:49:03.190
> 
> 标签：java, spring, spring-mvc, web, glassfish-3

`.../domains/domain1/images`我的 Glassfish 服务器上有文件夹。在我的 Java Spring 控制器中，我有将上传的图像保存在服务器上的方法：

```
@RequestMapping(value = "/form", method = RequestMethod.POST)
public String sendData(@RequestParam("north") Double north, @RequestParam("east") Double east, @RequestParam("phone") String phone, @RequestParam("image") MultipartFile file, HttpServletRequest request, ModelMap model) {

    if (!"image/jpg".equals(file.getContentType()) && !"image/jpeg".equals(file.getContentType())) {
        return "redirect:/form";
    }

    Date date = new Date();
    Timestamp ts = new Timestamp(date.getTime());
    String filename = ts.toString();
    filename = filename.replaceAll("\\s", "_");
    String path = imagePath + filename;

    File imageFile = new File(path);
    try {
        BufferedImage image = ImageIO.read(file.getInputStream());
        image = ImageTransformer.scaleByWidth(image, imageWidth);
        imageFile.createNewFile();
        ImageIO.write(image, "jpg", imageFile);

    } catch (IOException e) {
        e.printStackTrace();
        return "redirect:/form";
    }

    Marker m = new Marker();
    m.setNorth(north);
    m.setEast(east);
    m.setPhone(phone);
    m.setUrl(filename);

    markerService.add(m);

    return "redirect:/start";
} 
```

我应该如何设置我的`imagePath`变量来实现它？我应该更改服务器配置中的一些默认路径吗？

提前致谢。

**UPD**：如果可能，不想在 Java 应用程序中处理绝对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:51:11.357

在 WEB-INF/glassfish-web.xml 中，尝试为您的资源添加备用文档根：

```
<glassfish-web-app error-url="">
  <context-root>/yourapp</context-root>
  ...
  <property name="alternatedocroot_1" value="from=/images/*  dir=/path/to/your/images"/>
  <property name="alternatedocroot_2" value="from=/sounds/*  dir=/path/to/your/sounds"/>
</glassfish-web-app> 
```

然后，在您的应用程序代码中，您可以使用相对于您的应用程序根目录的路径。

# multithreading - 在 AbstractJavaSamplerClient 自定义代码中使用 socket.io-java-client 库时，Thread.Sleep 在 JMeter 中导致异常

> ID：15642784
> 
> 赞同：1
> 
> 时间：2013-03-26T16:49:03.633
> 
> 标签：multithreading, concurrency, jmeter

我为 JMeter 实现了一个自定义 AbstractJavaSamplerClient，核心 runTest 是这样的：

```
SampleResult results = new SampleResult();
results.sampleStart();
client.request("connector.ninjaHandler.savemove", opMsg, this);

while(optcode == null){
    try {
        Thread.sleep(10);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
}

results.sampleEnd();
results.setSuccessful(optcode); 
```

但是，我发现`Thread.sleep()`会导致这样的异常：

> 未捕获的异常 java.lang.IllegalStateException：计时器已取消。有关详细信息，请参阅日志文件。

我四处搜索，人们说 thread.sleep 会导致计时器失败。但是，我无法避免它，因为我正在测试一个 web-socket 服务器，这意味着我需要等待服务器响应......（如果我在示例开始/结束之间删除 thread.sleep，它运行正常）

但是，示例测试`org.apache.jmeter.protocol.java.test.SleepTest`运行良好，它使用了 thread.sleep。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:33:38.067

这很荒谬，因为我发现问题来自我使用的库......
从[这里](https://github.com/Gottox/socket.io-java-client/issues/44)修复补丁后，它可以工作！

# vba - 将 unicode 字符插入 VBA 字符串

> ID：15642786
> 
> 赞同：6
> 
> 时间：2013-03-26T16:49:07.137
> 
> 标签：vba, unicode

在 Windows 7 上使用 MS Access 2003，我发现以下函数会从 ANSI 字符串中去除所有重音符号，将（例如）señor 更改为 senor：

```
Public Function RemoveAccents(ByVal inputString As String) As String
Const accentString As String = "ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÏÑÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðñòóóôõöùúûüýÿ"
Const nonAccentStr As String = "AAAAAACEEEEIIIIINOOOOOUUUUYaaaaaaceeeeiiiionoooooouuuuyy"
Dim i As Integer

For i = 1 To Len(accentString)
inputString = Replace(inputString, Mid(accentString, i, 1), Mid(nonAccentStr, i, 1), , , vbBinaryCompare)
Next i
RemoveAccents = inputString
End Function 
```

但是当我尝试将带有 Caron (U-010D)(č)(HTML č) 的拉丁文小写字母 C 添加到函数 Const 重音字符串中时，像这样，

```
Const accentString As String = "ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÏÑÒÓÔÕÖÙÚÛÜÝàáâãäåç" & ChrW$(&H10D) & "èéêëìíîïðñòóóôõöùúûüýÿ"
Const nonAccentStr As String = "AAAAAACEEEEIIIIINOOOOOUUUUYaaaaaacceeeeiiiionoooooouuuuyy" 
```

我无法运行该功能。是否有一种语法可以让我调整此函数以从包含不在 ANSI 字符集中的字符的字符串中去除变音符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T17:01:16.023

您不能拥有像`ChrW()`常量声明中那样的函数。

**修改**

如果您可以制作这些公共变量而不是常量，那么这应该会为您处理：

```
Const cWithCaron As String = &H10D
Public accentString As String
Public nonAccentStr As String

Sub TestStrings()
Dim clnString As String

    accentString = "ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÏÑÒÓÔÕÖÙÚÛÜÝàáâãäåç" & ChrW(cWithCaron) & "èéêëìíîïðñòóóôõöùúûüýÿ"

    nonAccentStr = "AAAAAACEEEEIIIIINOOOOOUUUUYaaaaaacceeeeiiiionoooooouuuuyy"
    'I added this variable to test the function:
    clnString = RemoveAccents(accentString)
    'And a message box to display the results:
    MsgBox clnString = nonAccentStr

End Sub

Public Function RemoveAccents(ByVal inputString As String) As String

Dim i As Integer

    For i = 1 To Len(accentString)

        inputString = Replace(inputString, Mid(accentString, i, 1), Mid(nonAccentStr, i, 1), , , vbBinaryCompare)
    Next i

    RemoveAccents = inputString

End Function 
```

# html - Watin 下载由 javascript 加载的网页

> ID：15642787
> 
> 赞同：1
> 
> 时间：2013-03-26T16:49:08.507
> 
> 标签：html, web-scraping, watin

我正在尝试使用 Watin 下载网页（打印机门户网站），但我得到的只是

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<HTML lang="en">
<HEAD>
<TITLE></TITLE>
<meta http-equiv="Expires" content="0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta content="text/javascript" http-equiv="Content-Script-Type">
<link rel="stylesheet" type="text/css" href="default.css">
<script type="text/javascript" src="init.js"></script>
<noscript>
<meta http-equiv="refresh" content="0; URL=js_error.xml">
</noscript>
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#000000" ALINK="#ff0000" VLINK="#000000" onload="init();location.replace('./system.xml');">
</BODY>
</HTML> 
```

即使我在 Firefox 或 IE 中转到“查看页面源代码”，我也没有得到“完整”的 HTML。但是，Firebug 显示完整的 HTML。

之后似乎 HTML 是由 javascript 加载的，但是我如何获取这些数据呢？

# firefox-addon - 如何在Firefox的上下文菜单中为菜单项添加菜单分隔符

> ID：15642789
> 
> 赞同：0
> 
> 时间：2013-03-26T16:49:18.433
> 
> 标签：firefox-addon, xul

我正在尝试在 Firefox 的 contextmenu 中的 menuitem 之前和之后添加一个菜单分隔符。
这是我的预期输出...

```
| |
 | |
 |全选 |
 |----------------------|
 |显示含义 |
 |----------------------|
 | |

```

我的代码...

```
<popup id="contentAreaContextMenu">
        <menuseparator />
        <menuitem id="diction-show-meaning" label="Show meaning" oncommand="" insertafter="context-selectall"/>
        <menuseparator />
    </popup> 
```

但是菜单分隔符出现在上下文菜单的末尾！

如何为 contentAreaContextMenu 附上一个菜单项？我不喜欢通过java脚本动态地做。但让我知道这是否是唯一可能的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:05:26.257

尝试

```
<popup id="contentAreaContextMenu">
    <menuitem id="diction-show-meaning" label="Show meaning" oncommand="" insertafter="context-sep-selectall"/>
    <menuseparator />
</popup> 
```

# vb.net - Log4net 在指定记录器名称时工作但不是通过反射？这是一个问题吗？

> ID：15642792
> 
> 赞同：1
> 
> 时间：2013-03-26T16:49:29.123
> 
> 标签：vb.net, logging, log4net, console-application

我正在尝试使用 log4net 彻底检查一个应用程序（用 VB.NET 编写的控制台应用程序）日志记录系统。
我根据这个[CodeProject 教程](http://www.codeproject.com/Articles/140911/log4net-Tutorial)配置了 log4net 。配置后，我发现以下日志初始化会创建空日志（生成的文件夹结构是正确的，它会创建正确的、有日期的文本文件，但文件是空的）：

```
Private ReadOnly log As log4net.ILog = log4net.LogManager.GetLogger(Reflection.MethodBase.GetCurrentMethod().DeclaringType) 
```

但是，如果我使用以下行，它会正确记录。

```
Private ReadOnly log As log4net.ILog = log4net.LogManager.GetLogger("VSED") 
```

在我的主模块中，我正在记录如下错误：

```
log.Error("Test error!") 
```

我正在像这样加载程序集：

```
<Assembly: log4net.Config.XmlConfigurator(Watch:=True)> 
```

下面是我的`app.config`文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
  </configSections>
  <log4net>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
      <file value="logs\" />
      <datePattern value="dd.MM.yyyy'.log'" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="100KB" />
      <staticLogFileName value="false" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] – %message%newline" />
      </layout>
    </appender>
    <logger name="VSED">
      <level value="DEBUG"/>
      <appender-ref ref="RollingFileAppender"/>
    </logger>
    <filter type="log4net.Filter.LevelRangeFilter">
      <levelMin value="INFO"/>
      <levelMax value="FATAL"/>  
    </filter>
  </log4net>
    <system.diagnostics>
        <sources>
            <!-- This section defines the logging configuration for My.Application.Log -->
            <source name="DefaultSource" switchName="DefaultSwitch">
                <listeners>
                    <add name="FileLog"/>
                    <!-- Uncomment the below section to write to the Application Event Log -->
                    <!--<add name="EventLog"/>-->
                </listeners>
            </source>
        </sources>
        <switches>
            <add name="DefaultSwitch" value="Information" />
        </switches>
        <sharedListeners>
            <add name="FileLog"
                 type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL" 
                 initializeData="FileLogWriter"/>
            <!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log -->
            <!--<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/> -->
        </sharedListeners>
    </system.diagnostics>
</configuration> 
```

这甚至是一个问题吗？如果我在多个类中使用此记录器（明确说明其名称）而不是反射，它会出现问题吗？

本质上，我只想知道为什么它不能通过首选方法工作。我的 app.config 不正确吗？我做错了什么吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:54:21.737

您只记录来自 VSED 的消息，您`Reflection.MethodBase.GetCurrentMethod().DeclaringType`可能不是 VSED，而是`something.VSED`. 这就是为什么您的记录器没有提供任何输出的原因。查看它`Reflection.MethodBase.GetCurrentMethod().DeclaringType`是什么并使用该名称制作一个记录器。

这将提供所有记录器的输出：

```
<root>
    <level value="DEBUG" />
    <appender-ref ref="RollingLogFileAppender" />
</root> 
```

# ruby - Ruby 内存配置在哪里，如何检查它是否已设置？

> ID：15642793
> 
> 赞同：5
> 
> 时间：2013-03-26T16:49:29.433
> 
> 标签：ruby, ruby-enterprise-edition

在 REE 和 MRI 1.9+ 中，可以调整 ruby​​ 的垃圾收集器：

*   [http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_performance_tuning](http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_performance_tuning)
*   [http://smartic.us/2010/10/27/tune-your-ruby-enterprise-edition-garbage-collection-settings-to-run-tests-faster/](http://smartic.us/2010/10/27/tune-your-ruby-enterprise-edition-garbage-collection-settings-to-run-tests-faster/)
*   [http://blog.evanweaver.com/articles/2009/04/09/ruby-gc-tuning/](http://blog.evanweaver.com/articles/2009/04/09/ruby-gc-tuning/)

但是这些文章都没有说明在哪里放置这个配置。我想如果它在环境中，红宝石会在它启动时捡起它——但是，据我所知，没有办法检查它。这些设置没有显示在我能找到的任何运行时常量中。

那么，我应该把这个配置放在哪里，我怎样才能仔细检查它是否正在被使用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:03:09.390

这些设置是[环境变量](http://en.wikipedia.org/wiki/Environment_variable)，因此您只需在`ruby`进程本身的父进程中设置它们。[许多](http://www.coffeepowered.net/2009/06/13/fine-tuning-your-garbage-collector/) [人](http://snaprails.tumblr.com/post/241746095/rubys-gc-configuration)建议为此目的创建一个简单的 shell 脚本，或许可以称之为`/usr/local/bin/ruby-custom`：

```
#!/bin/bash
export RUBY_HEAP_MIN_SLOTS=20000
export RUBY_HEAP_SLOTS_INCREMENT=20000
...etc...
exec "/path/to/ruby" "$@" 
```

前几行设置您想要的任何自定义变量，最后一行调用`ruby`自身，将脚本最初给出的任何参数传递给它。

接下来，您需要将此脚本标记为可执行`chmod a+x /usr/local/bin/ruby-custom`文件`ruby`（

```
PassengerRuby /usr/local/bin/ruby-custom 
```

# knockout.js - KoGrid如何在数据更改时刷新网格

> ID：15642798
> 
> 赞同：0
> 
> 时间：2013-03-26T16:49:41.107
> 
> 标签：knockout.js, kogrid

我正在尝试使用 KoGrid lib，但我遇到了无法解决的情况。如果我有新的数据显示，我不知道如何刷新网格。我需要在 ajax 调用后更新数据。

```
$.ajax({
                type: "GET",
                url: reqvesturl,
                cache: false,
                dataType: "jsonp",
                success: function (data) {
                     resultData = data;
                     if (!model)
                     {
                        model =new mainViewModel();
                        ko.applyBindings(model);
                      }
                      else
                       {
                         model.myData(data);
                         //mo.applyBindings();
                       };
                     //model.myData(data);           
                },
                error: function (jqXHR, textStatus, errorThrown) {

                }
            });

var resultData = new Array();
var model ;

function mainViewModel() {
    var self = this;
    var checkmarkFilter = function (input) {
        return input ? '\u2714' : '\u2718';
    };
    var dateFilter = function (input) {
        return new Date(input);
    };
    self.mySelections = ko.observableArray([]);
    self.myData = ko.observableArray([]);
    self.myVisibleData = ko.observableArray([]);
    self.filterOptions = {
        filterText: ko.observable(""),
        useExternalFilter: false
    };
    self.pagingOptions = {
        pageSizes: ko.observable([10, 20, 50]), //page Sizes
        pageSize: ko.observable(10), //Size of Paging data
        totalServerItems: ko.observable(0), //how many items are on the server (for paging)
        currentPage: ko.observable(1) //what page they are currently on
    };
    self.getPagedDataAsync = function (pageSize, page, searchText) {    
         var pagedData = resultData.slice((page - 1) * pageSize, page * pageSize);  
         self.myVisibleData(pagedData);
         self.myData(resultData);
         self.pagingOptions.totalServerItems(resultData.length);

        // setTimeout(function () {
            // var data;
            // if (searchText) {
                // var ft = searchText.toLowerCase();
                // data = largeLoad().filter(function (item) {
                    // return JSON.stringify(item).toLowerCase().indexOf(ft) != -1;
                // });
            // } else {
                // data = largeLoad();
            // }
            // //var pagedData = data.slice((page - 1) * pageSize, page * pageSize);
            // self.myData(data);
            // self.pagingOptions.totalServerItems(data.length);
        // }, 100);
    };
    self.pagingOptions.pageSize.subscribe(function (a) {
        self.getPagedDataAsync(a, self.pagingOptions.currentPage(), self.filterOptions.filterText());
    });
    self.pagingOptions.currentPage.subscribe(function (a) {
        self.getPagedDataAsync(self.pagingOptions.pageSize(), a, self.filterOptions.filterText());
    });
    self.filterOptions.filterText.subscribe(function (a) {
        self.getPagedDataAsync(self.pagingOptions.pageSize(), self.pagingOptions.currentPage(), a);
    });
    self.getPagedDataAsync(self.pagingOptions.pageSize(), self.pagingOptions.currentPage());
    self.columnsChanged = function(newCols) {
        return true;
    };
    self.gridOptions = {
        data: self.myVisibleData,
        selectedItems: self.mySelections,
        displaySelectionCheckbox: true,
        multiSelect: true,
        showGroupPanel: false,
        showColumnMenu: false,
        showFilter: false,
        columnsChanged: self.columnsChanged,
        maintainColumnRatios: true,
        enablePaging: true,
        pagingOptions: self.pagingOptions,
        columnDefs: ko.observableArray( [{ field: 'name', displayName: 'Adr', width: 'auto' },
                     { field: 'type', displayName: 'type', width: 'auto' },
                     { field: 'id', displayName: 'id', width: 'auto' }   ])
    };

}

//ko.applyBindings(new mainViewModel()); 
```

如何刷新网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:44:29.673

如果您的 ajax 方法返回成功，请在 mainViewModel 中有一个名为 refresh 的方法，如下所示：

self.refresh = function(myAjaxData){ self.myData(myAjaxData) }

# javascript - jqgrid 转换文本

> ID：15642801
> 
> 赞同：1
> 
> 时间：2013-03-26T16:49:48.857
> 
> 标签：javascript, jquery, jqgrid

我不知道怎么称呼它，所以欢迎任何更改标题的建议。

我正在尝试将一个相当大的文本转换为“只显示一些字符......”之类的东西。显然，大文本以相同的字符串开头，但要长得多。

我的网格是只读的，当用户单击每一行时，我会将整个数据显示到对话框中。输入字段（在另一个页面中）是一个文本区域，因此用户可以写下大量数据以显示在网格中。我想保持每一行的高度相同。我也知道我必须清理文本以避免特殊字符和新行

我想这应该是一个 colModel 选项，但我找不到它。像这样的东西：

```
colModel :[
        {name:'notes', index:'notes', maxcharlength: 20}, 
```

**非常感谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:55:04.720

`classes`您可以创建一个 CSS 类，该类将剪切文本并显示省略号，并使用属性将其分配给列。CSS 类看起来像这样：

```
.ellipsis {
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
} 
```

然后将其分配给这样的列：

```
colModel :[
    {name:'notes', index:'notes', maxcharlength: 20, classes: 'ellipsis'}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:18:53.680

最后，感谢 Oleg 的链接，我可以填充网格剥离 html 并以这种方式显示省略号：

首先是一个CSS：

```
.ui-jqgrid tr.jqgrow td.textInDiv div {
    max-height: 50px;
    overflow: hidden;
    text-overflow: ellipsis;
    -o-text-overflow: ellipsis;
} 
```

第二个列上的自定义格式化程序：

```
colModel :[
    {name: 'notes', classes: "textInDiv", 
          formatter: function (v) {
               return '<div>' + jQuery.jgrid.stripHtml(v) + '</div>';
          }
     }
 ] 
```

注释以 html 形式来自服务器，因此请注意 jqgrid 功能以去除 html 标签。在 Oleg 的链接中，他使用 jqgrid.htmlEncode 来转义标签。

希望这对其他人有帮助。

# c# - 如何检查 Gtk.CheckButton 是否被选中？

> ID：15642802
> 
> 赞同：7
> 
> 时间：2013-03-26T16:49:50.797
> 
> 标签：c#, gtk, gtk#

我正在使用 GTK，并且`CheckButton`在窗口中插入了一个（GTK 版本的复选框）。现在我需要得到它是否被检查。我怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T21:47:29.127

尽管我看不到回答以下问题的 QA 网站的优势：谷歌是你的朋友，但我会为正在（谷歌搜索）寻找相同内容的人回答这个问题......

的属性`Active`是复选框中`Gtk.CheckButton`的替代品`Checked`

所以

```
if (checkbox.Active)
{
     // the checkbox was checked
} else
{
    // it wasn't checked
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T21:54:47.390

谷歌上的项目`gtk checkbox sharp`（至少对我来说）的第一个答案产生[http://www.mono-project.com/GtkSharp:_Buttons](http://www.mono-project.com/GtkSharp:_Buttons)，转到部分`Toggle buttons`& `Check buttons`。

这是`Active`您需要检查的成员

# visual-studio-2010 - 无论我做什么，都无法让 SpecFlow 在 Visual Studio 2010 中工作！！！11

> ID：15642803
> 
> 赞同：5
> 
> 时间：2013-03-26T16:49:54.403
> 
> 标签：visual-studio-2010, specflow

当我通过 NuGet for Specflow 1.9 在 Visual Studio 2010 项目中添加引用时，无论我做什么都无法添加任何功能。我重新启动了 VS，重新启动了我的 PC，创建了新项目等。我所做的一切都无法让我真正使用 SpecFlow。即，当我转到 Project > Add New Item 时，我在 Add New Item 对话框中看不到任何 SpecFlow 文件。

值得注意的是，我没有应该存在于“C:\Program Files (x86)\TechTalk\SpecFlow\”目录中的“ItemTemplates”目录。

还值得注意的是，我安装了 Visual Studio 2012 Web Express，但我不确定为什么这会阻止功能文件显示在 VS 2010 项目中的“添加”>“新项目”下！

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T16:58:48.017

您还需要通过 Visual Studio Extension Manager 安装 SpecFlow。

> 工具 > 扩展管理器

通过 Nuget 安装只会为您提供对 SpecFlow dll 的引用 - 它不会将功能模板等文件安装到 Visual Studio 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T16:27:16.907

After using the package manager to install the .dlls, you need to use tools->"Add-in Manager" to add in the Specflow templates.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:58:47.573

只是为了添加到ngm的答案。

NuGet 包为您提供了运行 SpecFlow 所需的一切，例如在构建服务器上。

VSIX 为您提供了编辑方案所需的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T19:08:06.103

对于 VS 2013，在我通过 nuget 添加 SpecFlow 后，我也无法看到模板。我通过以下方式解决了这个问题：

*   [从SpecFlow for Visual Studio 2013](http://visualstudiogallery.msdn.microsoft.com/90ac3587-7466-4155-b591-2cd4cc4401bc)下载文件 。
*   单击下载。
*   下载文件（例如 TechTalk.SpecFlow.Vs2013Integration.vsix）后，双击它，它将开始安装过程。
*   关闭 VS 2013。再次启动它后，您将能够看到模板。

希望这也可以帮助其他人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-04T01:36:59.907

如果我没记错的话，在通过 NuGet 和“工具 > 扩展管理器”菜单安装 SpecFlow 和 NUnit 包之后，我可以创建 SpecFlow 场景并运行基于 NUnit 的测试。在我通过“工具 > 扩展管理器”安装 NUnit 之前，我无法看到任何测试/场景的执行和报告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T16:57:42.027

尝试使用包管理器控制台安装 SpecFlow，例如

> PM> Install-Package SpecFlow

更多关于[包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)

# eclipse - 使用 Eclipse 使 VM 上的文件与本地文件保持同步

> ID：15642805
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:49:54.670
> 
> 标签：eclipse, version-control

我正在使用虚拟机进行大量工作，并寻找一种有效的方法来轻松操作 VM 上的文件，同时仍使它们与我将它们提交到 VCS 的本地文件系统保持同步。

我尝试了 Eclipse 的远程远程系统资源管理器。这使我可以轻松访问远程系统上的文件，但没有同步选项。所以我可以直接处理远程文件，但我需要将它同步回我的本地目录以提交它们。

基本上我需要某种`rsync`（尽管是 Windows 机器），这样我只需要操作我的本地文件并同步 VM 文件，反之亦然。

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:20:41.447

看看你的声誉，我猜你可能可以创建一些脚本来在 Eclipse 之外的命令行上同步本地文件。如果是这样，那么您可以从 Eclipse 中自动调用此脚本，作为您正常（自动）项目构建的一部分。为此，您只需向项目中添加一个新的构建器，它会调用该脚本。

![在此处输入图像描述](../Images/3bab25922393869ca74b5edf10fe7df5.png)

[本教程](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-92_project_builders.htm)展示了如何在每次构建期间调用 ant 脚本。如果您不想在*每次*文件更改时触发该脚本，您可以将调用的构建器限制为特定文件和工作集的更改。

# .net - 如何使用 APDU 将 PIN 验证码发送到智能卡 - 使用 .NET

> ID：15642811
> 
> 赞同：4
> 
> 时间：2013-03-26T16:50:16.830
> 
> 标签：.net, smartcard, asp.net-4.5, apdu

我可以连接到卡，现在我需要验证 PIN，但我不知道应该使用哪个代码来执行验证

```
// Verify PIN
//HERE IS WHAT I´M NOT SURE WHAT TO USE - Just an Example
byte[] pin = new byte[] { 0x31, 0x32, 0x33, 0x34, 0xFF, 0xFF, 0xFF, 0xFF };
APDUParam apduParam = new APDUParam();
apduParam.Data = pin;
apduVerifyCHV.Update(apduParam);
apduResp = iCard.Transmit(apduVerifyCHV); 
```

这是一张使用 7 位 PIN 码的智能卡。它始终是 7 位数字。

```
**Example:**
{CLA, INS, P1, P2, Lc, b1, b2, b3, b4, b5, b6, b7} 
```

这里我有基本的`CLA`, `INS`, `P1`, `P2`,`LC`字节。我应该为 7 位数字的 PIN 设置 + 3 字节还是 6 字节并且应该是实际的 PIN 或只是一个 0xFF 值

```
Ex. {CLA, INS, P1, P2, Lc, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF} +7 Bytes 
```

在规范中，我找到了最小和最大 8 位以及最小 4 和最大 12 字节的示例......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:18:10.437

这比我说的简单...

**当 PIN 使用带填充的 ASCII 格式转换时**

输入的 PIN 为 1357（最小大小 =4，最大大小=8 位）

*   • 左对齐
*   • CCID 的默认显示行为
*   • CCID 向 ICC 发送命令

    CLA INS P1 P2 Lc 31 33 35 37 FF FF FF FF

**当 PIN 使用 BCD 右对齐和控制字段时**

输入的 PIN 为 13579（最小大小 =4，最大大小=8 位）

*   • 正确的理由。个人密码少于8位；因此，八位代码的最高有效位必须用零填充。
*   • 帧在PIN 转换之前集成了一个特定的控制字段“01”。
*   • 没有消息
*   • CCID 向 ICC 发送命令

    CLA INS P1 P2 Lc 01 00 01 35 79

所以，我所要做的就是设置正确的值。在我的情况下，使用左对齐的 ASCII 方法：

```
0x00 0x20 0x00 0x01 0x08 0x30 0x31 0x34 0x37 0x34 0x31 0x30 0xFF 
```

3 - 指填充

3x - x 指给定位置的实际引脚号（左对齐），因为我有一个 7 位数字的 PIN，未使用的字节应默认为 0xFF

希望对某人有所帮助

# c++ - 在动态增长范围内找到中位数的最快方法

> ID：15642813
> 
> 赞同：1
> 
> 时间：2013-03-26T16:50:21.030
> 
> 标签：c++, performance, median

任何人都可以建议任何方法或链接到 C++ 中动态范围的快速中值查找的实现吗？例如，假设对于我的程序中的迭代，范围会增加，并且我想在每次运行时找到中位数。

```
Range
4
3,4
8,3,4
2,8,3,4
7,2,8,3,4 
```

所以上面的代码最终会为每一行产生 5 个中值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:04:01.813

在不跟踪数组的排序副本的情况下，您可以获得的最好的方法是重新使用旧的中值并通过线性时间搜索下一个最大值来更新它。这听起来很简单，但是，我们必须解决一个问题。

考虑下面的列表（为了更容易理解而排序，但您将它们保持在任意顺序）：

```
 1, 2, 3, 3, 3, 4, 5
//           * 
```

所以在这里，中位数是`3`（列表排序后的中间元素）。现在，如果您添加一个大于中位数的数字，这可能会将中位数向右“移动”一半索引。我看到了两个问题：我们怎样才能将指数提高一半？（根据定义，中位数是接下来两个值的平均值。）`3`当我们只知道中位数是 时，我们如何知道中位数是`3`多少？

这可以通过不仅存储当前中位数而且还存储中位数在相同值的数字中的*位置*来解决，这里它的*“索引偏移量”*为`1`，因为它是第二个`3`。向列表添加一个大于或等于的数字`3`会将索引偏移量更改为`1.5`。添加小于 3 的数字会将其更改为`0.5`。

当这个数字小于零时，中位数会发生变化。如果超出相等数的计数（减号`1`），它也必须更改，在这种情况下`2`，这意味着新的中位数大于最后一个相等数。在这两种情况下，您都必须搜索下一个较小/下一个较大的数字并更新中值。要始终知道索引偏移的上限是多少（在这种情况下`2`），您还必须跟踪相等数字的计数。

这应该让您大致了解如何在线性时间内实现中值更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-19T09:31:38.983

我认为您可以使用 min-max-median 堆。每次更新数组时，您只需要 log(n) 时间即可找到新的中值。对于最小-最大-中值堆，根是中值，左侧树是最小-最大堆，而右侧是最大-最小堆。有关详细信息，请参阅论文“Min-Max Heaps and Generailized Priority Queues”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T17:16:40.670

在下面找到一些代码，我已经重新设计了这个[堆栈](https://stackoverflow.com/questions/5275115/add-a-median-method-to-a-list)以提供您必要的输出

```
 private void button1_Click(object sender, EventArgs e)
    {
        string range = "7,2,8,3,4";
        decimal median = FindMedian(range);
        MessageBox.Show(median.ToString());

    }

    public decimal FindMedian(string source)
    {
        // Create a copy of the input, and sort the copy

        int[] temp = source.Split(',').Select(m=> Convert.ToInt32(m)).ToArray();
        Array.Sort(temp);

        int count = temp.Length;
        if (count == 0) {
            throw new InvalidOperationException("Empty collection");
        }
        else if (count % 2 == 0) {
            // count is even, average two middle elements
            int a = temp[count / 2 - 1];
            int b = temp[count / 2];
            return (a + b) / 2m;
        }
        else {
            // count is odd, return the middle element
            return temp[count / 2];
        }
    } 
```

# python - 选择仅具有字符串名称的字段

> ID：15642817
> 
> 赞同：1
> 
> 时间：2013-03-26T16:50:36.080
> 
> 标签：python, django

我有一个看起来像这样的模型：

```
class WeekOne(models.Model):
    # Required benchmarks for given exercises
    squatBenchmark = 1000
    lungeBenchmark = 250
    stairDaysCountBenchmark = 3

    totalGoals = 4

    squats = models.PositiveIntegerField(default=0)
    lunges = models.PositiveIntegerField(default=0)
    skipStairs = models.BooleanField(default=False)
    stairDaysCount = models.PositiveSmallIntegerField(default=0)
    # Running count of benchmarks met.
    completeCount = models.PositiveSmallIntegerField(default=0)
    # Set to true if benchmarks reached. 
    weekOneComplete = models.BooleanField(default=False) 
```

我想访问“squats”字段，即在变量 assignment`amount = user.week_one.squats`中，但由于视图和模板的工作方式，我无法访问对 squats 字段的引用，我只有一个 string `squats`。有没有办法使用这个字符串来访问那个字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:53:50.180

这就是[getattr](http://docs.python.org/2/library/functions.html#getattr)的用途：

```
amount = getattr(user.week_one, 'squats') 
```

# python - 带有 OpenMPI 的 mpi4py：message_simple 中的“ValueError：消息：无法猜测计数，数据类型范围 0 (lb:0, ub:0)”

> ID：15642818
> 
> 赞同：0
> 
> 时间：2013-03-26T16:50:39.263
> 
> 标签：python, error-handling, openmpi

我安装了 mpi4py 1.3 和 openMPI 1.6。像 helloworld.py 这样的简单 mpi4py 演示正在运行。在我的代码`MPI.Comm.Allreduce(MPI.IN_PLACE, obj)`中，我调用 obj 是一个 numpy 数组。这会导致错误消息：

> ValueError：消息：无法猜测计数，数据类型范围 0 (lb:0, ub:0)”在 message_simple

关于我做错了什么的任何线索？

完整追溯：

```
Traceback (most recent call last):
  File "ptycho_508.py", line 124, in <module>
   p = ptycho.ptycho_DM(p, numit=numit_DM, subpix=False)
  File "/afs/psi.ch/project/cxs/users/braun_p/epd/lib/python2.7/site-packages/ptycho/core_object_modes.py", line 1357, in ptycho_DM comm.Allreduce(MPI.IN_PLACE, obj)
  File "Comm.pyx", line 544, in mpi4py.MPI.Comm.Allreduce (src/mpi4py.MPI.c:63736)
  File "message.pxi", line 579, in mpi4py.MPI._p_msg_cco.for_allreduce (src/mpi4py.MPI.c:23465)
  File "message.pxi", line 532, in mpi4py.MPI._p_msg_cco.for_cro_recv (src/mpi4py.MPI.c:23068)
  File "message.pxi", line 144, in mpi4py.MPI.message_simple (src/mpi4py.MPI.c:19614)
ValueError: message: cannot guess count, datatype extent 0 (lb:0, ub:0)
message_simple in <http://mpi4py.googlecode.com/svn/trunk/src/MPI/message.pxi> is failing 
```

# c++ - 为什么这行得通？使用 cin 读取小于给定输入的字符数组

> ID：15642820
> 
> 赞同：5
> 
> 时间：2013-03-26T16:50:39.917
> 
> 标签：c++, arrays, char, cin

我正在阅读 C++ Primer Plus（第 6 版），并且在第 4 章中遇到了一些示例代码，我对此有疑问：

清单 4.2 **strings.cpp**

```
// strings.cpp -- storing strings in an array
#include <iostream>
#include <cstring> // for the strlen() function
int main()
{
    using namespace std;
    const int Size = 15;
    char name1[Size]; // empty array
    char name2[Size] = "C++owboy"; // initialized array
    // NOTE: some implementations may require the static keyword
    // to initialize the array name2
    cout << "Howdy! I'm " << name2;
    cout << "! What's your name?\n";
    cin >> name1;
    cout << "Well, " << name1 << ", your name has ";
    cout << strlen(name1) << " letters and is stored\n";
    cout << "in an array of " << sizeof(name1) << " bytes.\n";
    cout << "Your initial is " << name1[0] << ".\n";
    name2[3] = '\0'; // set to null character
    cout << "Here are the first 3 characters of my name: ";
    cout << name2 << endl;
    return 0;
} 
```

代码本身不会引起任何混淆，但是我一直在运行它，并且对某个场景感到困惑。

name1 被初始化为长度为 15 个元素的字符数组 - 我认为这应该包含一个长度为 14 个字符的字符串吗？结束字符应该保留给字符串终止符，对吧？

如果我输入我的名字为**HowCanIPossiblyFitThisEntireStringIn?** ，我得到以下输出：

> 你好！我是 C++owboy！你叫什么名字？
> 
> HowCanIPossiblyFitThisEntireStringIn？
> 
> 嗯，HowCanIPossiblyFitThisEntireStringIn?，你的名字有 37 个字母并且被存储
> 
> 在 15 个字节的数组中。
> 
> 您的姓名首字母是 H。
> 
> 这是我名字的前 3 个字符：C++

我输入的全名是如何存储的？如果我单步执行代码，在 cin 读入 name1 后，Visual Studio 告诉我它包含元素 0 - 14，最后一个是 char 'y'（“HowCanIPossibly...）。我会假设任何额外的输入的数据已被截断并丢失，但显然情况并非如此，因为以下 cout 成功地将整个名称写入控制台。

出于好奇，有人能告诉我这里发生了什么吗？作为记录，我使用的是 Visual Studio 2012 Express。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T16:52:53.323

您正在写超出数组的范围。C++ 标准并没有说这应该是一个错误。它说这是未定义的行为。这意味着任何事情都可能发生，包括看似正常工作。简而言之，您的代码没有明确定义的行为，因此您不应该相信它可以工作。

我们可以想象为什么它可能会起作用。前 15 个字符将很好地放入数组中：

```
|H|o|w|C|a|n|I|P|o|s|s|i|b|l|y|F|i|t|T|h|i|s|E|n|t|i|r|e|S|t|r|i|n|g|I|n|?|...
^                             ^
|    These characters fit     |
         in the array 
```

其余字符被写入以下内存位置。现在，请记住，用于终止 C 样式字符串的空字符被定义为具有全 0 位的表示形式。现在，如果包含 的位置后面的位置`?`全为 0，则该字符串将显示为以空值结尾。

但事实是，这是未定义的。它只是碰巧起作用。不幸的是，这是最可怕的错误类型，因为它似乎可以工作很长时间，直到有一天你开始接到你非常非常愤怒的客户的电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:45:35.473

您可以使用[`istream::get`](http://en.cppreference.com/w/cpp/io/basic_istream/get)缓冲区和缓冲区的大小：

```
cin.get(name1, Size); 
```

正如其他人所指出的，它更容易使用[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)：

```
std::string name1;
cin >> name; 
```

# macos - CSS3 @font-face 在 Mac OS X Firefox 上不可选

> ID：15642829
> 
> 赞同：0
> 
> 时间：2013-03-26T16:51:13.877
> 
> 标签：macos, css, firefox, text, font-face

在这篇文章的后面（[CSS3 @font-face 没有在 Mac OS X Safari 5.x 或 Chrome 上显示](https://stackoverflow.com/questions/15269872/css3-font-face-not-displaying-on-mac-os-x-safari-5-x-or-chrome)）我遇到了一个新的绊脚石。起初似乎一切都已解决，但后来我遇到了一个新问题，我无法选择任何文本。

在 Mac OS X 的 Firefox 上，我无法突出显示任何文本，甚至无法单击任何使用 font-face 字体的超链接。它可以在所有其他操作系统（包括 Windows、iOS 等）和其他 Mac OS X 浏览器（如 Chrome 和 Safari）上选择。

[在http://gradtouch.com/test](http://gradtouch.com/test)上试试

这是当前的 CSS 代码。

```
@font-face {
font-family: 'Avenir LT 55 Roman';
src: url('fonts/avenir-55.eot?#iefix') format('embedded-opentype'), 
url('fonts/avenir-55.woff') format('woff'), 
url('fonts/avenir-55.ttf')  format('truetype'),
url('fonts/avenir-55.svg#AvenirLT-Roman') format('svg');
font-weight: normal;
font-style: normal;
} 
```

有什么想法或解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:07:31.873

At first glance, I would guess something is wrong with the metrics in that font. If I create a `<span>` containing some of your text and give it a border to see how tall it is, that `<span>` ends up 0px tall.

Once that happens, selection will be invisible, since it's drawn to the height of the text...

# ruby-on-rails - Ruby on Rails 3.2.13 - 如何引用 fields_for 中的字段？

> ID：15642831
> 
> 赞同：1
> 
> 时间：2013-03-26T16:51:17.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, form-for, fields-for

我有一个带有相关模型 ModalityItem 的 Modality 模型。Modality 有很多 :modality_items 和 ModalityItem 属于 :modality。我要显示的字段之一是 MediaLibrary 中的名称字段，其中 id 与 ModalityItem 中的 media_library_id 匹配。

我计划为每个 Modality 最多允许 15 ModalityItem 行。当需要添加新记录时，Rails 应用程序将为 ModalityItem 显示空白行，或者在存在记录时显示 ModalityItem 行数据。

这是我在modalities_controller 的编辑方法中的代码，我还可以在其中重命名Modality。我创建了数组 @items (Array.new(15)) 并使用 ModalityItem 或 ModalityItem.new 中的一行加载每个数组元素。如果所选 Modality 不存在 ModalityItem 行，则整个数组将包含 ModalityItem.new 的 15 个元素。如果 ModalityItem 行存在，我想将该行连接到相应的 MediaLibrary 行并在编辑视图上显示其名称。

```
@modality = Modality.find(params[:id])
@modality_items = ModalityItem.joins('JOIN media_libraries ON media_libraries.id = modality_items.media_library_id').where("modality_id = ?", @modality.id).all
@items = Array.new(15)

count = 0
while count < @items.size
  if @modality_items && count < @modality_items.size
    @items[count] = @modality_items[count]
  else
    @items[count] = ModalityItem.new
  end
  count    += 1
end 
```

这是我在编辑视图中的代码。

```
<%= form_for(@modality) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <p style="font-weight: bold; font-size: 114%;"><%= link_to "Return to Manage Modalities", modalities_path %></p><br>
  <%= f.label :name, "Modality Name:" %>&nbsp;<%= f.text_field :name %><br><br>
  <%= f.fields_for :modality_items, @items do |item| %>
    <div class="modality-class">
      <%= item.label :media_library_id, "Media Library" %><%= item.text_field :media_library_id %> 
      <div class="short-label"><%= item.label :rank, "Rank" %></div><%= item.text_field :rank %> 
    </div><br><br>
    <div class="modality-instruct">
      <%= item.label :instructions, "Instructions" %><%= item.text_field :instructions %>
    </div><br><br>
  <% end %>
  <%= f.submit "Save changes to Modality", class: "btn btn-medium btn-custom" %><br><br>
  <p style="font-size: 114%; font-weight: bold;"><%= link_to "Delete this modality?", @modality, method: :delete, data: { confirm: "You sure you want to Delete this modality?" } %></p>
<% end %> 
```

我仅将 fields_for 与 collection_select 语句一起使用，在该语句中，我在数组的下拉列表中捕获了多个项目的 ID 号。我使用这些 id 创建了另一个与我正在更新的主表相关的表。

在这种情况下，我想收集在屏幕上输入的信息，遍历它并创建我的记录。我计划删除 Modality 的所有现有 ModalityItem 行并每次重新创建它们。当我将 fields_for 与 collection_select 一起使用时，我设置了一个实例变量 @whatevername 等于 params[:whatevername] 然后循环遍历这些 ID。使用我包含的代码，我会设置 @modality_items = params[:modality_items] 然后我猜想用它做点什么。关于当有人输入数据并单击按钮进行更新时会发生什么，我有以下问题：

params[:modality_items] 包含什么？它是一个包含视图中所有文本字段的数组吗？

@items 是否会使用表单中的数据进行更新，还是我必须保存 params[:modality_items]？

我确定这是基本信息，但这是我第一次这样做，并且在对 fields_for off and on 进行了几个月的在线搜索后，一直未能找到答案。

注意：我目前没有在我的视图中引用 MediaLibrary 中的名称，因为在继续之前我需要有关如何访问 fields_for 中的字段的更多信息。我也有 :name 在 Modality 和 MediaLibrary 模型中的问题。Modality 中的名称是可更新的，但 MediaLibrary 的名称将仅显示在 fields_for 语句中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:26:03.350

> params[:modality_items] 包含什么？它是一个包含视图中所有文本字段的数组吗？

没有什么。您真的应该查看您的日志文件以查看 params 哈希中的内容。

:modality_items 是嵌套在 params[:modality] 内的数组，所以你得到

```
params[:modality][:modality_items] 
```

所以`form_for(@modality)`让你 params[:modality] 然后 f.fields_for （注意从 form_for 输入的 f ）安排 fields_for 参数作为数组嵌套在模态散列中

> @items 是否会使用表单中的数据进行更新，还是我必须保存 params[:modality_items]？

如果您在 Modality 模型中使用 Accept_nested_attributes_for :modality_items 用于 modality_items_attributes 并且这些属性是可访问的（不受大规模分配保护，那么您的行将根据需要自动更新或插入。基本上，accepts_nested_attributes_for 接受嵌套在 params 哈希内的属性，这些属性对应于一样的名字。

官方文档中的这个链接清楚地解释了 params 哈希是如何组织的 [http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

并在此处阅读有关 fields_for 的更多详细信息[http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)

# c# - 循环 - 数月数年

> ID：15642835
> 
> 赞同：-6
> 
> 时间：2013-03-26T16:51:23.503
> 
> 标签：c#, loops, int

我有一个 int 月（例如 84 年），我需要计算出等于多少年，因此使用 84 = 7 年

我需要遍历初始数字并查看其中有多少整年并打印结果

例子：

```
int count = 84;
for (int i = 12; i <= count; i++)
{
years = i;
} 
```

这当然行不通，它会产生“84 年”，而我应该产生 7 年。我还需要在年份计算后获取剩余的月份，因此如果初始数字为 85，例如，它将导致 7 年 1 个月。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:53:48.870

使用标准数学运算而不是循环：

```
int count = 84;
int years = count / 12;
int months = count % 12; 
```

第一个是**[除法](http://msdn.microsoft.com/en-us/library/3b1ff23f%28v=vs.71%29.aspx)**，第二个是**[模数](http://msdn.microsoft.com/en-us/library/0w4e0fzs%28v=vs.71%29.aspx)**。

因为两者`count`和`12`都是整数也`count/12`返回一个整数。所以对于`85`它会返回`7`，不是`7.1`。

***更新***

循环版本可能如下所示：

```
count = 84;
years = 0;
for (int i = 12; i <= count; i += 12)
{
    years++;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:54:50.230

使用循环执行此操作如下所示：

```
int years = 0;
while (count >= 12) {
  count -= 12;
  years++;
} 
```

但是，您可以在不循环的情况下执行相同的操作：

```
int years = count / 12;
count %= 12; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T16:54:08.023

尝试这个：

```
DateTime t = new DateTime();
t = t.AddMonths(84);

int year = t.Year;    // year = 8
int month = t.Month;  // month = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T16:53:51.583

当然，您只需要基本的数学运算：

```
int count = 84;
int years = (int)(count / 12);
int months = count % 12; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T16:54:22.830

```
int years = count / 12;
int remainingMonths = count % 12; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T14:06:31.577

感谢所有给出答案的人：D 非常感谢

我最终让它像这样工作

```
 int employmentInMonthsAmount = this.MaxEmploymentHistoryInMonths;

                var intcounter = 0;
                int years = 0;
                for (var i = 0; i < employmentInMonthsAmount; i++)
                {
                    if (intcounter >= 12)
                    {
                        years++;
                        intcounter = 0;
                    }
                    intcounter++;
                }
                var monthsleft = intcounter; 
```

# python - 在Python中查找矩阵中元素的所有出现

> ID：15642837
> 
> 赞同：1
> 
> 时间：2013-03-26T16:51:25.480
> 
> 标签：python, matrix

我有一个列表列表，我想找到所有出现的坐标。我设法做到了，但我想知道是否有更好的方法来使用 numpy where 例如。

这就是我所做的：

```
my_list = [[1,2,3,1, 3], [1,3,2]]

target_value = 3
locations = []
for k in range(len(my_list)):
    indices = [i for i, x in enumerate(my_list[k]) if x == target_value]
    locations.append((k, indices))
locations2 = []
for row in locations:
    for i in row[1]:
        locations2.append((row[0], i))
print locations2 # prints [(0, 2), (0, 4), (1, 1)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:57:52.997

虽然你可以让它在 numpy 中工作，但 numpy 对参差不齐的数组并不满意。我认为纯python理解版本看起来不错：

```
>>> my_list = [[1,2,3,1, 3], [1,3,2]]
>>> [(i,j) for i,x in enumerate(my_list) for j,y in enumerate(x) if y == 3]
[(0, 2), (0, 4), (1, 1)] 
```

# javascript - three.js - 帮助向 css3d_youtube 演示添加捏缩放 - 轨迹球控件弄乱了相机位置

> ID：15642843
> 
> 赞同：3
> 
> 时间：2013-03-26T16:51:43.450
> 
> 标签：javascript, html, youtube-api, three.js

我正试图向我的老板推销使用three.js 创建与视频提供商（如YouTube）集成的CSS3D 界面。其中一个要求是在移动设备上显示它——我选择了 iPad，因为 Android 平板电脑很古怪。

由于我的演示计划在本周四进行，我认为最快的办法就是向他展示精彩的 css3d_youtube 演示。

问题是它没有配置为使用手势（触摸捏缩放），我很难做到这一点。

我还需要添加一些东西，比如背景图片和让 YouTube 播放器全屏显示的功能，所以我不得不获取原始代码并对其进行修改。我看到了元素周期表，所以我决定在我的代码中使用 TrackBall 控制器。[你可以在这里](https://bitbucket.org/attlabs/att_html5_uverse_poc/raw/2d6938912839bbcfabdb2c78dfcd204edf05d966/public/javascripts/libs/you_tube_grid.js)看到我修改过的代码

轨迹球控制器似乎改变了相机的 y 位置。[如果您在平板电脑中查看，](http://morning-thicket-1335.herokuapp.com/#/search)您可以看到我在此处创建的实际页面。我使用 Modernizr 库来识别设备是否为触摸屏，因此您仅使用桌面浏览器就不会看到它。

如果它更有帮助，我可以删除该条件，以便可以在桌面浏览器中看到它。

如果我删除了扰乱相机位置的代码（您可以看到我在代码中搜索 Modernizr.touch 的位置），单击按钮时相机不再以视频海报图像为中心。

我还通过添加此函数尝试了常规的 JavaScript 手势事件：

```
function onPinch(e) {
  move(e.scale)
} 
```

并在事件处理程序中调用它：

```
`document.body.addEventListener('gestureend', onPinch, false)` 
```

但那是一场灾难。CSS3D 对象渲染非常缓慢。

有人可以帮我在 css3d youtube 演示中添加捏缩放功能吗？或者至少提供一些关于如何进行的建议？我无法通过 Google -ing 找到任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T16:12:35.717

看起来 TrackballControls.js[已更新为支持触摸缩放手势](https://github.com/mrdoob/three.js/issues/1822)。

如果其他人遇到此问题，[请获取最新版本](https://raw.github.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js)。

CSS3D[周期表](http://threejs.org/examples/css3d_periodictable.html)和[youtube](http://threejs.org/examples/css3d_youtube.html#cats)示例似乎也已更新。

# symfony - 在 symfony2 表单构建器中允许多种日期格式

> ID：15642846
> 
> 赞同：1
> 
> 时间：2013-03-26T16:51:54.077
> 
> 标签：symfony

一位客户要求这样做。他希望为生日字段允许多种日期格式。该文档没有给我任何线索如何实现它，谷歌也没有。

任何曾经经历过这样的请求并有领导如何实现这一目标的人？

目前它看起来像这样：

```
$builder->add('xxx', 'birthday', array('widget' => 'single_text', 'invalid_message' => 'some message (dd-MM-yyyy)', 'format' => 'dd-MM-yyyy')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T14:46:46.657

在这种情况下不应使用**数据**转换器。

数据转换器的要点是在数据之间**来回**`view <=> norm <=> model`转换数据。

这不是你的情况，你不想要双向转换。

您想要的是过滤数据，为此，您可以使用**表单事件**：

```
$builder->add(
    $builder
        ->create('xxx', 'birthday', [...])
        ->addEventListener(
            FormEvents::PRE_SUBMIT,
            function(FormEvent $event) {
                $value = $event->getData();
                // Do the filtering you want (for example replacement of special chars with a dash)
                // $value = preg_replace('[^\d]', '-', $value)
                $event->setData($value);
            }
        )
); 
```

大功告成，`PRE_SUBMIT`在验证之前对事件进行数据过滤。

我从内存中编写了这个示例并没有对其进行测试，也许您应该对其进行调整（并添加您的字段选项而不是`[...]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:02:42.067

如果您想在表单中处理不同的日期格式，您应该查看 [DataTransformer](http://symfony.com/doc/master/cookbook/form/data_transformers.html) 它可以帮助您将数据从一种格式转换为另一种格式，例如：

```
2013-03-26 ==transform==> 2013/03/26
2013.03.26 ==transform==> 2013/03/26
26.03.2013 ==transform==> 2013/03/26 
```

# wpf - 在 Value = Maximum 之后停止 ProgressBar 动画

> ID：15642847
> 
> 赞同：3
> 
> 时间：2013-03-26T16:51:56.990
> 
> 标签：wpf, animation, triggers

我为进度条添加了动画。

我试图在最大填充后停止动画（每次都更改）。我正在根据我需要处理的文件数从后面的代码中生成进度条最大值。

以下是我的代码片段

```
<Trigger Property="Value" Value="10">
    <Setter Property="Visibility" TargetName="Animation" Value="Collapsed"/>

</Trigger> 
```

当进度条的最大值为 10 时，上述触发器有效，但我的问题是如何将此值更新为动态生成的最大值。

有人可以帮我吗？

我真的很感激你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:18:40.043

一种更复杂的方法（但也更可重用）是将 a`DataTrigger`与 a`MultiBinding`和 a一起使用`IMultiValueConverter`：

```
public class EqualsConverver : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, 
        object parameter, CultureInfo culture)
    {
        if (values.Length < 1)
            return Binding.DoNothing;

        var obj = values[0];
        for (int i = 1; i < values.Length; ++i)
        {
            if (!obj.Equals(values[i]))
                return false;
        }

        return true;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, 
        object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

然后你的触发器看起来像：

```
<DataTrigger Value="True">
    <DataTrigger.Binding>
        <MultiBinding Converter="{StaticResource equalsConverter}">
            <Binding Path="Value" RelativeSource="{RelativeSource Self}" />
            <Binding Path="Maximum" RelativeSource="{RelativeSource Self}" />
        </MultiBinding>
    </DataTrigger.Binding>
    <Setter Property="Visibility" TargetName="Animation" Value="Collapsed"/>
</DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:12:02.550

而不是触发器，并且由于您已经有代码，您可以注册动画的[完成事件](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.completed%28v=vs.100%29.aspx)。

# c++ - 从一个类到另一个类的成员变量

> ID：15642848
> 
> 赞同：0
> 
> 时间：2013-03-26T16:51:57.147
> 
> 标签：c++, visual-c++, mfc, visual-studio-2005

我无法解决此错误。

Source1.h//它有CSystem类

```
 static PvGenInteger *lIPAddressParam; 
```

Source2.cpp //它有类MGUI

```
 CSystem :: lIPAddressParam ;
             PvInt64 lIPAddress = 0;
         lIPAddressParam->GetValue( lIPAddress ); 
```

这给出了错误：

> 未声明的 lIPAddressParam。

如果我使用此代码行：

```
lIPAddressParam->GetValue( lIPAddress ); 
```

在单个源文件中，它可以工作，但在这种情况下不行。请指导。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:58:12.853

// 包含在 .cpp 中，静态变量应该在编译时初始化

```
PvGenInteger* CSystem ::lIPAddressParam; 
```

**问题是由于您**在 .cpp 文件中省略了静态变量的类型；指定它，一切都应该没问题

# jquery - jQuery Datatables 添加一个新行然后在该行上设置属性

> ID：15642851
> 
> 赞同：0
> 
> 时间：2013-03-26T16:51:58.073
> 
> 标签：jquery, datatables

我写了一个似乎可以正常工作的逻辑，然后最近出现了一个错误。我正在做的是允许用户向数据集添加一行或多行。他们添加的数据被传递给 AJAX post 方法，其中发布的数据返回一组数据，我将其附加到刚刚以隐藏“数据”属性的形式创建的行，这再次起作用. 但是我意识到我的问题是，这些属性被添加到表的第一行而不是新创建的行，我不知道如何获取最后一个新行并以方式附加属性我想要它，它似乎对`tbody`.

所以快速回顾一下，新行正确地添加到表中，并且在视觉上是正确的，并且我想以属性的形式设置的`data`属性有效。但是，它们附加到的行之间存在混合匹配。我当前的代码是：

```
taskmanagerExcludeTable.fnAddData([$('#source_filter_type option:selected').text(), jqVal, '<img src="/images/icons/png/light/recycle_bin.png" alt="Delete Exclude" class="datasource_exclude_delete" data-idr="reference">']);
var theNode = taskmanagerExcludeTable.fnSettings().aoData[0].nTr;
theNode.setAttribute('data-filter_id',obj.data.filter_id);
theNode.setAttribute('data-filter_type',params.filter_type);
theNode.setAttribute('data-task_id',params.task_id);
theNode.setAttribute('data-task_type',$('#source_filter_type option:selected').text()); 
```

我想说这一行：

```
var theNode = taskmanagerExcludeTable.fnSettings().aoData[0].nTr; 
```

更具体地说`aoData[0]`是我的问题。由于`0`被硬编码到方法中，这意味着它假设第一行。我的问题是我怎样才能动态地使用它`0`而不是硬编码，我可以使用某种形式的变量来获取正在创建的行的正确索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:06:06.473

无法长时间无所事事，我开始思考我的问题并不断地重新阅读它。为了最终让我明白，我应该计算 tbody 表中的所有行，`.length`并从中减去`1`以匹配索引数据表为自己的目的管理数据而保留的数据，所以我最终做的是将行数作为变量

IE：

```
var whichRow = $('#mytable tbody tr').length - 1;
var theNode = taskmanagerExcludeTable.fnSettings().aoData[whichRow].nTr; 
```

这解决了我的问题。感谢那些看过，考虑过帮助的人。我已经解决了这个问题。

# javascript - 登录表单的 Javascript 验证 - 字段不能为空且包含“\”

> ID：15642856
> 
> 赞同：0
> 
> 时间：2013-03-26T16:52:11.303
> 
> 标签：javascript, validation

这是我现在拥有的代码。

```
function ns_check()
{
    var login = document.forms['vpnForm'].login.value;
    var passwd = document.forms['vpnForm'].passwd.value;
    var domainname = login.indexOf("\\")

               if (domainname = - 1){

                              window.alert(_("You need to enter a domain name")); return false;  

               }
         if (login == ""){

                              window.alert(_("You need to enter login name")); return false; 

               }

               if (passwd == ""){

                              window.alert(_("You need to enter passwd")); return false; 

               }

               return true;

    } 
```

当您不在登录框中使用反斜杠时，它会弹出一个警告窗口，但它是空的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:53:58.753

```
if (domainname = - 1) 
```

应该

```
if (domainname === - 1) 
```

# java - 使用 URI 复制时不支持文件名中的特殊字符

> ID：15642862
> 
> 赞同：0
> 
> 时间：2013-03-26T16:52:19.060
> 
> 标签：java, copy, uri, special-characters, illegal-characters

我需要使用 URI 将文件（文件名包含特殊字符）从一个路径复制到另一个路径。但它会引发错误。如果它成功复制，如果文件名不包含特殊字符。您能否告诉我如何使用 URI 将带有特殊字符的文件名从一条路径复制到另一条路径。我已经复制了下面的代码和错误。

**代码：-**

```
import java.io.*;
import java.net.URI;
import java.nio.ByteBuffer;
import java.nio.channels.Channels;
import java.nio.channels.ReadableByteChannel;
import java.nio.channels.WritableByteChannel;

public class test {
    private static File file = null;
    public static void main(String[] args) throws InterruptedException, Exception {
        String from = "file:///home/guest/input/3.-^%&.txt";
        String to = "file:///home/guest/output/3.-^%&.txt";
        InputStream in = null;
        OutputStream out = null;
        final ReadableByteChannel inputChannel;
        final WritableByteChannel outputChannel;
        if (from.startsWith("file://")) {
            file = new File(new URI(from));
            in = new FileInputStream(file);
        }

        if (from.startsWith("file://")) {
            file = new File(new URI(to));
            out = new FileOutputStream(file);
        }

        inputChannel = Channels.newChannel(in);
        outputChannel = Channels.newChannel(out);

        test.copy(inputChannel, outputChannel);
        inputChannel.close();
        outputChannel.close();
    }

    public static void copy(ReadableByteChannel in, WritableByteChannel out) throws IOException {
        ByteBuffer buffer = ByteBuffer.allocateDirect(32 * 1024);
        while (in.read(buffer) != -1 || buffer.position() > 0) {
        buffer.flip();
        out.write(buffer);
        buffer.compact();
        }
  }
} 
```

**错误： -**

```
Exception in thread "main" java.net.URISyntaxException: Illegal character in path at index 30: file:///home/maria/input/3.-^%&.txt
    at java.net.URI$Parser.fail(URI.java:2829)
    at java.net.URI$Parser.checkChars(URI.java:3002)
    at java.net.URI$Parser.parseHierarchical(URI.java:3086)
    at java.net.URI$Parser.parse(URI.java:3034)
    at java.net.URI.<init>(URI.java:595)
    at com.tnq.fms.test3.main(test3.java:29)
Java Result: 1 
```

感谢您查看这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:04:04.663

您可以尝试使用[java.net.uri](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:57:29.417

文件名应该是[%-escaped](http://en.wikipedia.org/wiki/Percent-encoding)。例如，实际文件名中的空格在 URI 中变为 %20。`java.net.URI`如果您使用带有多个参数的构造函数之一，则该类可以为您完成：

```
new URI("file", null, "/home/guest/input/3.-^%&.txt", null); 
```

请参阅[Java 中的 HTTP URL 地址编码](https://stackoverflow.com/questions/724043/http-url-address-encoding-in-java)。

# php - PHP - 在不加载图像的情况下获取有关图像（高度和宽度）的信息

> ID：15642863
> 
> 赞同：3
> 
> 时间：2013-03-26T16:52:20.030
> 
> 标签：php, image, height, width

是否可以在不使用 PHP 加载实际图像的情况下获取图像信息？就我而言，我想要高度和宽度。

我有这段代码可以从目录中获取图像。我回显出图像的 url 并用 JS 获取它。

```
<?php

    $directory = "./images/photos/";
    $sub_dirs = glob($directory . "*");
    $i = 0;
    $len = count($sub_dirs);
    foreach($sub_dirs as $sub_dir)
    {
        $images = glob($sub_dir . '/*.jpg');
        $j = 0;
        $len_b = count($images);
        foreach ($images as $image) 
        {

            if ($j == $len_b - 1) {
                echo $image;
            } else {
                echo $image . "|";
            }

            $j++;

        }

        if ($i == $len - 1) {
        } else {
            echo "|";
        }
        $i++;
    }

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:09:43.580

`getImageSize()`是在 PHP 中获取此信息的正确方法

它根据图像的类型做最少的工作。例如，GIF 图像的高度/宽度存储在标题中。非常容易访问和阅读。所以这就是函数最有可能从文件中获取信息的方式。对于 JPEG，它必须做更多的工作，使用 SOFn 标记。

访问此信息的最快方法是在每次上传新文件时维护一个文件尺寸数据库。

鉴于你现在的情况。我建议编写一个 PHP 脚本，该脚本获取所有当前图像文件，使用此函数获取大小，然后将信息插入数据库以供将来使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T16:53:38.530

这取决于您所说的“不加载它”是什么意思。

内置的[getimagesize()](http://php.net/manual/en/function.getimagesize.php)可以做到这一点。

```
list($w, $h) = getimagesize($filename); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-11T06:40:54.837

```
list($width, $height, $type, $attr) = getimagesize($_FILES["Artwork"]['tmp_name']); 
```

Use this.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T19:38:17.297

您可以将 width'n'height 信息存储在文本文件中，稍后再加载。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T16:57:01.397

您可以使用 Javascript 以编程方式获取图像并检查尺寸...

```
var img = new Image();
img.onload = function() {
  alert(this.width + 'x' + this.height);
}
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif'; 
```

如果图像不是标记的一部分，这可能很有用；）

# forms-authentication - 通用处理程序 ashx 中的 FormsAuthentication.SetAuthCookie

> ID：15642866
> 
> 赞同：0
> 
> 时间：2013-03-26T16:52:28.040
> 
> 标签：forms-authentication, ashx, formsauthentication, generic-handler

我有一个通用处理程序，我想根据一些查询字符串自动登录。

但是后来我设置了 FormsAuthentication.SetAuthCookie(user.Name, false)，但是 HttpContext.Current.User.Identity.IsAuthenticated 返回 false，由于 web.config 中设置的限制，我无法重定向。

那么如何在 .ashx 文件中设置 FormsAuthentications 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:43:02.333

要使用 FormsAuthentication 模块执行登录，您可能只想使用[RedirectFromLoginPage](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.redirectfromloginpage%28v=vs.80%29.aspx)静态方法，它在幕后：

1.  准备认证令牌；
2.  加密它；
3.  将其添加到响应的 cookie 集合中；
4.  执行重定向到所需页面（或默认页面，根据您的 web.config）。

这是您的处理程序的简短原型：

```
public void ProcessRequest(HttpContext context)
{
    // TODO: Determine the user identity

    var username = context.Request.QueryString["username"];

    FormsAuthentication.RedirectFromLoginPage(username, true);
} 
```

如果您对该方法执行其工作的方式感到不舒服，您可以手动执行每个活动：

1.  准备一个带有用户名的[FormsAuthenticationTicket ；](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket%28v=vs.80%29.aspx)
2.  通过[Encrypt](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt%28v=vs.80%29.aspx)方法对其进行加密；
3.  将其添加到[响应 Cookies](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cookies%28v=vs.80%29.aspx)中；
4.  发出[重定向](http://msdn.microsoft.com/en-US/library/system.web.httpresponse.redirect%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:26:56.380

您是否尝试将其添加为 web.config 中的位置路径？

```
<configuration>
   <location path="foo.ashx">
      <system.web>
         <authorization>
            <allow users="*"/>
         </authorization>
      </system.web>
   </location>
   <location >
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

# merge - 合并/聚合disqus

> ID：15642867
> 
> 赞同：0
> 
> 时间：2013-03-26T16:52:31.650
> 
> 标签：merge, comments, aggregate, disqus

奇怪的问题 - 是否可以合并两个 disqus 小部件，以便它们聚合来自两个来源之间的评论？

因此，假设您在两个都有 disqus 的独立网站上有两篇相同的文章 A 和 B。无论如何，当人 X 评论文章 A 和人 Y 评论文章 B 时，A 和 B 的 disqus 线程将包括来自 X 和 Y 的评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:32:39.570

当然，这是此处记录的“disqus_identifier”的基本用法：http: [//help.disqus.com/customer/portal/articles/472099](http://help.disqus.com/customer/portal/articles/472099)

这里需要注意的是，Disqus 上的唯一线程只能有一个链接到 URL（这是我们用于发现、通知警报等的），因此您必须为此选择首选网站。

如果我们假设您在[http://mycoolwebsite.com/](http://mycoolwebsite.com/)和[http://example.com/](http://example.com/)有两个网站，并且“mycoolwebsite.com”是首选链接站点，您将使用相同的确切嵌入代码两个站点。这是一个例子：

```
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: THIS CODE IS ONLY AN EXAMPLE * * */
    var disqus_shortname = 'example'; // Make sure you use the same shortname on both sites
    var disqus_identifier = 'some_unique_identifier_for_your_discussion';
    var disqus_title = 'The Title of the article';
    var disqus_url = 'http://mycoolwebsite.com/2013/a-cool-article/'; // Make sure this is the same, even on example.com

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script> 
```

另一个需要注意的是，如果您在 Disqus 站点设置中设置了受信任的（列入白名单的）域，请确保两个域都包含在内。

# javascript - 即使javascript在控制台中返回值，getEval也会在Selenium上返回null

> ID：15642873
> 
> 赞同：1
> 
> 时间：2013-03-26T16:52:42.747
> 
> 标签：javascript, selenium, getelementbyid

我正在使用以下 javascript 在 Selenium 中运行 getEval：

```
document.getElementById("j_id0:j_id3:mainBlock:j_id40").children[0].children[0].children[0].children[0].children[0].children[0] .children[2].children[0].children[0].children[0] .children[0].children[1]; 
```

当我在控制台中运行代码时，它会返回正确的结果。

当我导航到我需要定位的元素所在的页面并单击 Selenium 中的“查找”按钮时，它会找到并突出显示正确的元素。但是，当我实际在 Selenium 中运行该行时 - 即使我导航到正确的页面并只运行该行 - 我收到一条消息说

```
[error]Threw an exception: document.getElementById(...)is null 
```

我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:42:46.190

只需在您的实际 JS 语句开始之前包含*this.browserbot.getUserWindow()*并尝试。

```
selenium.getEval("this.browserbot.getUserWindow().document.getElementById("j_id0:j_id3:mainBlock:j_id40").children[0].children[0].children[0].children[0].children[0].children[0] .children[2].children[0].children[0].children[0] .children[0].children[1]") 
```

# mysql - Mongodb和Mysql数据类型比较

> ID：15642875
> 
> 赞同：4
> 
> 时间：2013-03-26T16:52:46.370
> 
> 标签：mysql, mongodb

我看到MySQL中的一些数据类型在MongoDB中是没有的，是这样吗？

请给我比较一下 MySQL 和 MongoDB 中的数据类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:17:30.180

MySQL 的数据类型比 MongoDB 多很多，主要是因为它支持的数据类型更多。

首先要理解的是，所有不是标准字符串或整数的“数据类型”通常都需要包装器，或者更确切地说是对象封装。

一个很好的例子是日期，在 MySQL 中你有`DATETIME`, `DATE`, `YEAR`,`TIMESTAMP`等等，而 MongoDB 只有`ISODate()`.

实际上不存在直接的翻译表，但是我会尝试为您挖掘出基本的翻译表。

**注意**：由于某些未知原因，MongoDB 文档实际上已经删除了您可用的数据类型的完整列表，所以我不得不搜索一下隐藏在词汇表中的这个列表：http: [//docs.mongodb.org/manual/reference /glossary/#term-bson-types](http://docs.mongodb.org/manual/reference/glossary/#term-bson-types)

在查看该列表时，您会注意到的第一件事是，有很多数据类型在 MySQL 本机中不存在，例如“对象”或“数组”：

*   `Binary`有时`BLOB`在 MySQL 中调用，通常通过以下方式访问`{d: new BinData($b)}`
*   `ObjectId`是 MongoDB 用于主键类型的特殊 MongoDB 数据类型
*   `String`is `VARCHAR`, `TEXT`,`LONGTEXT`和所有其他字符串类型在 MySQL 中组合在一起，通常用作`{d: 'lalalaalala'}`.
*   `Boolean`在 MySQL中通常被称为`BOOL`or `TINYINT(1)`，它的基本用法如下：`{d:true}`.
*   `Date`在 MySQL中被称为`TIMESTAMP`, `DATE`, `DATETIME`,`YEAR`和所有其他日期类型，使用如下`{d: new ISODate()}`
*   32 位整数在 MYSQL 和其他小整数数据类型中有时称为`TINYINT(11)`、`INTEGER`、等，其用法`INT`如下`SMALLINT``{d:5}`
*   64 位整数有时在 MySQL 中称为`MEDIUMINT`and`BIGINT``{d:new NumberLong("4")}`
*   `NULL``NULL`在 MySQL中运行良好，使用起来像`{d:null}`
*   `Timestamp`不是你会公开使用的，所以我不会谈论它，它不是听起来的样子。
*   `Double`与MySQL 相关`DECIMAL`并且`FLOAT`可以使用，`{d:0.5}`但是由于精度，我建议您将浮点数和双精度数存储为整数。

我相信这涵盖了您需要了解的主要内容。

有很多，所以希望它有所帮助。

# php - 如何在嵌套集 sql 查询中为菜单结构添加父 where 子句

> ID：15642877
> 
> 赞同：0
> 
> 时间：2013-03-26T16:52:48.017
> 
> 标签：php, sql, nested-sets

我在 PHP 中使用功能齐全的嵌套集系统
我正在使用它来构建一个最大深度 = 2 的简单菜单结构

现在我在表格中添加了一个额外的字段来控制每个菜单项的可见性状态，换句话说，它是否处于活动状态。我的需要是，如果我停用父母，我希望查询不会返回任何孩子，即使他们处于活动状态。

这是检索整个菜单树的实际代码

```
SELECT    `nesty`.*,
          (COUNT(`parent`.`id`) - (`sub_tree`.`depth` + 1)) AS `depth`

FROM      `menus` AS `nesty`,
          `menus` AS `parent`,
          `menus` AS `sub_parent`,
          (
             SELECT `nesty`.`id`,
                    (COUNT(`parent`.`id`) - 1) AS `depth`

             FROM   `menus` AS `nesty`,
                    `menus` AS `parent`

             WHERE  `nesty`.`lft`  BETWEEN `parent`.`lft` AND `parent`.`rgt`
             AND    `nesty`.`id`     = 1
             AND    `nesty`.`tree_id`  = 1
             AND    `parent`.`tree_id` = 1

             GROUP BY `nesty`.`id`

             ORDER BY `nesty`.`lft`
          ) AS `sub_tree`

WHERE    `nesty`.`lft`   BETWEEN `parent`.`lft`     AND `parent`.`rgt`
AND      `nesty`.`lft`   BETWEEN `sub_parent`.`lft` AND `sub_parent`.`rgt`
AND      `sub_parent`.`id` = `sub_tree`.`id`
AND      `nesty`.`tree_id`   = 1
AND      `parent`.`tree_id`  = 1
GROUP BY `nesty`.`id`

HAVING   `depth` > 0

ORDER BY `nesty`.`lft` 
```

所以基本上我想在where子句中添加

```
AND      `nesty`.`visible`   = 1 
```

如果我补充说，只要停用项目不是某人的父项，它就可以正常工作所以我需要如果可见字段等于 0 和/或其父项的可见字段等于 0，则不返回菜单项

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:29:57.380

我很抱歉这么说，但是嵌套库确实是糟糕的技术。这是一个不太理想的嵌套集实现。永远不应该计算深度，深度场应该是数据模型的一部分，如维基百科[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)中所示。此外，永远不应该使用上面的查询来返回完整的树。只有子树需要所有这些复杂性。

请尝试这个新补丁：

```
= AND      `parent`.`tree_id`  = 1
+ and      nesty.lft not in (
         select menus.lft
         from   menus,
                (select     lft, rgt
                 from       menus
                 where      menus.visible = 0
                 and        menus.tree_id = 1
                ) as hidden
         where  menus.lft between hidden.lft and hidden.rgt
         and    menus.tree_id = 1
                          ) 
```

而且，如果表菜单包含深度字段，则完整树的完整查询是：

```
select     nesty.*, 0 as depth0
from       menus as nesty,
           (select lft, rgt from menus where menus.id = 1) as root
where      nesty.lft between root.lft and root.rgt
and        nesty.tree_id  = 1
and        not nesty.lft in (
                select    menus.lft
                from      menus,
                          (select lft, rgt
                           from   menus
                           where  visible = 0
                           and    menus.tree_id = 1
                          ) as hidden
                where     menus.lft between hidden.lft and hidden.rgt
                and       menus.tree_id = 1
                            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:55:43.817

我写了你所指的包和那个查询。它基于[Mike Hillyer 的这篇博文](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)。

三个隐式连接都用于获得每个结果中相对于父级的“深度”属性，使用修改的预序树遍历算法。

我通常所做的是从您的数据库中获取节点树，就像您正在做的那样。渲染它们时，请查看每个节点的“可见性”属性。我假设您使用的是库存标准，带有 CRUD 模型。所以：

// 循环遍历你的节点 if ( !$node->visibility) continue;

当您从查询中输出结果时，您可以执行类似的操作。

Nested-Sets 2，对 Nesty 的重写使用查询生成`illuminate/database`器编写了该查询，而不仅仅是（实际上）普通的 SQL。我们可以注入闭包之类的东西来修改查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:04:32.790

首先，让我祝贺您发布的非常易读的 SQL 语句。否则我不会花时间在它上面。

不幸的是，我仍然觉得这个陈述很难理解，我不能避免认为这个陈述不应该那么复杂。嵌套集应该通过避免为树的每个级别引用表来使递归查询变得简单，这似乎是您正在做的事情。

检索菜单的任何子树的查询应该很简单：

```
select menus.*
from menus
where menus.id between [plft] and [prgt] 
```

其中 plft 和 prgt 是由子树根节点的左右值定义的参数。如果您的主树根的 id=1，那么您可以编写：

```
select menus.*
from menus
where menus.id between (select lft from menus where id=1) and 
                       (select rgt from menus where id=1) 
```

我将根据这个典型的嵌套集合查询提供未经测试的答案。

第一步是识别显式隐藏的节点，隐藏子查询：

```
select menus.id, lft, rgt
from   menus
where  menus.visible = 0 
```

第二步，获取所有被隐式隐藏的子树，子查询 hidden_​​all：

```
select menus.id
from
    (select id, lft, rgt
     from   menus
     where  menus.visible = 0) as hidden
inner join menus 
on (menus.lft between hidden.lft and hidden.rgt) 
```

最后一步，检索除子查询 hidden_​​all 中的所有菜单选项。这可以通过外部连接或使用运算符 IN 来完成。使用最后一个选项：

```
select menus.*
from   menus
where  menus.lft between plft and prgt
       and not menus.id in (
    select    menus.id
    from      (select m.id, m.lft, m.rgt
               from   menus m
               where  m.visible = 0) as hidden
    inner join menus m
    on         (m.lft between hidden.lft and hidden.rgt)
    ) 
```

正如我之前提到的，它未经测试，您需要将 plft 和 prgt 替换为正确的值或将它们设为参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T18:18:23.577

好吧，您是否尝试过添加：

```
and (nesty.visible <> 0 and parent.visible <> 0) 
```

# c# - System.UnauthorizedAccessException'发生在 Microsoft.Xna.Framework.ni.dll 引发屏幕截图 windows phone 8

> ID：15642880
> 
> 赞同：0
> 
> 时间：2013-03-26T16:52:53.140
> 
> 标签：c#, windows-phone-8, screenshot, media

我正在尝试捕获屏幕截图并将其保存为 jpeg 到`MediaLibrary`但收到

> System.UnauthorizedAccessException 类型的第一次机会异常发生在 Microsoft.Xna.Framework.ni.dll 的 lib.SavePicture(filePath, ms);

我的代码：

```
public static void SaveToMediaLibrary(FrameworkElement element, string title)
{
    using (MemoryStream ms = new MemoryStream())
    {
        bmp.SaveJpeg(ms, (int)element.ActualWidth, (int)element.ActualHeight, 0, 100);
        var lib = new MediaLibrary();
        var filePath = string.Format(title + ".jpg");
        ms.Seek(0, SeekOrigin.Begin); 
        lib.SavePicture(filePath, ms);
    }
} 
```

我正在使用 Windows Phone 8 模拟器进行测试。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:57:59.653

好的，我想我明白了。我必须为`ID_CAP_MEDIALIB_PHOTO`您的应用清单添加一项功能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T10:19:26.970

In the your application goto Manifest file and select capability tab then select all the checkbox. Then Save and run your apps. It should work

# visual-studio-2010 - 使用 MFC RFX（记录字段交换）读取 NULL 值

> ID：15642887
> 
> 赞同：1
> 
> 时间：2013-03-26T16:53:02.700
> 
> 标签：visual-studio-2010, mfc, null, odbc, recordset

我正在使用 RFX（[记录字段交换](http://msdn.microsoft.com/en-us/library/a8staww2%28v=vs.100%29.aspx)）将数据从 ODBC 数据源移动到我的 Recordset 对象。数字与[RFX_Int](http://msdn.microsoft.com/en-us/library/s14b12eb%28v=vs.100%29.aspx) (within `DoFieldExchange`) 一起移动，显然数据库 NULL (not a value) 被映射到一个伪 null value `AFX_RFX_INT_PSEUDO_NULL`。不幸的是，这个标记值被定义为`0x7ee4`十进制的 32484。该值位于可能的`int`数字范围的中间，并且是我的应用程序的有效数字！

以下代码部分给出了错误的结果，其中包含（有效）值 32484 in 的记录`mainarticle`。

```
std::vector<Article> getArticles() {
    std::vector<Article> res;
    CArticleRecordset tmp(&con.GetConnectedDB());
    tmp.Open();
    while (!tmp.IsEOF()) {
        if (tmp.m_article.mainarticle == AFX_RFX_INT_PSEUDO_NULL)
            tmp.m_article.mainarticle = 0;
        res.push_back(tmp.m_article);
        tmp.MoveNext();
    }
    return res;
} 
```

我怎么能解决这个问题？

伪空值在`afxdb_.h`(Visual Studio 2010) 中定义：

```
#define AFX_RFX_SHORT_PSEUDO_NULL (0x7EE4)
#define AFX_RFX_INT_PSEUDO_NULL (0x7EE4)
#define AFX_RFX_LONG_PSEUDO_NULL (0x4a4d4120L)
#define AFX_RFX_BIGINT_PSEUDO_NULL (0x4a4d4120L)
#define AFX_RFX_BYTE_PSEUDO_NULL 255 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:38:01.177

`RFX_Int`名字不好，它是用来和短整数一起使用的。改为使用`RFX_Long`。

# wpf - WPF 启动画面添加失败

> ID：15642892
> 
> 赞同：10
> 
> 时间：2013-03-26T16:53:20.653
> 
> 标签：wpf, splash-screen

我需要为我的 WPF 放置一个 png 图像作为启动画面。

我将文件导入项目并将构建操作更改为“启动画面”

这应该已经完成​​了这项工作，但我收到了以下错误消息：

```
Unknown build error, 'An item with the same key has already been added.' 
```

谷歌搜索错误没有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-28T19:34:20.233

我可以确认将构建操作更改为应用程序定义然后构建（会有错误），然后将其切换回初始屏幕并运行程序会清除此错误。

# sql - 将逗号分隔的值列表转换为单个逗号分隔的字符串？

> ID：15642896
> 
> 赞同：0
> 
> 时间：2013-03-26T16:53:27.740
> 
> 标签：sql, sql-server-2008, converter

如何转换这个：

```
('xxx','yyy','zzz') 
```

进入这个：

```
('xxx,yyy,zzz') 
```

使用 T-SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:56:36.800

```
DECLARE @x VARCHAR(32) = '''xxx'',''yyy'',''zzz''';
SELECT REPLACE(@x, ''',''', ','); 
```

如果您只想连接，那么您可以执行以下操作：

```
SELECT @param1 + ',' + @param2 + ',' ... + @param30; 
```

然而，这只是愚蠢的恕我直言。这就像单独清洗每只袜子一样。

我不得不质疑您现在将如何处理该值...如果这些是单独的实体，为什么它们首先要以逗号分隔？也许您应该研究[表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.100%29.aspx)而不是这种逗号分隔值的废话，然后您可以从一开始就以基于集合的方式使用这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:54:39.643

通过连接值（*这意味着单个列*）？

```
SELECT (col1 + ',' + col2+ ',' + col3) 
FROM   tableName 
```

# android - 从包中发布的错误通知无法展开 RemoteViews

> ID：15642900
> 
> 赞同：35
> 
> 时间：2013-03-26T16:53:34.990
> 
> 标签：android, android-notifications

我有个问题。有时我的服务会被这个 logcat 强行关闭：

```
03-26 20:44:44.849: E/AndroidRuntime(12080): FATAL EXCEPTION: main
03-26 20:44:44.849: E/AndroidRuntime(12080): android.app.RemoteServiceException: Bad notification posted from package by.flipdev.vkspy: Couldn't expand RemoteViews for: StatusBarNotification(pkg=by.flipdev.vkspy id=1 tag=null score=0 notn=Notification(pri=0 contentView=by.flipdev.vkspy/0x1090071 vibrate=null sound=null defaults=0x0 flags=0x2 kind=[null]))
03-26 20:44:44.849: E/AndroidRuntime(12080):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1374)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at android.os.Looper.loop(Looper.java:137)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at android.app.ActivityThread.main(ActivityThread.java:4931)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at java.lang.reflect.Method.invokeNative(Native Method)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at java.lang.reflect.Method.invoke(Method.java:511)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
03-26 20:44:44.849: E/AndroidRuntime(12080):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我添加添加通知的代码：

```
protected void addNotification(final Bitmap Avatar,
        final int small_Image_ID, final int notify_id, final String text,
        final String title, final Boolean ongoing, final Boolean ticker,
        final String tickerText, final Boolean autoCancel,
        final String notificationCategory, final int notificationValue) {

    try {

        final Intent notificationIntent = new Intent(
                getApplicationContext(), CheckerActivity.class);

        notificationIntent
                .putExtra(notificationCategory, notificationValue);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP);

        final PendingIntent contentIntent = PendingIntent.getActivity(
                getApplicationContext(), notify_id, notificationIntent,
                PendingIntent.FLAG_UPDATE_CURRENT);

        final NotificationManager nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

        final NotificationCompat.Builder builder = new NotificationCompat.Builder(
                context);
        if (Ticker) {
            builder.setContentIntent(contentIntent)
                    .setSmallIcon(small_Image_ID)
                    .setOngoing(ongoing)                    
                    .setLargeIcon(Avatar).setTicker(tickerText)                     
                    .setWhen(System.currentTimeMillis())
                    .setAutoCancel(AutoCancel).setContentTitle(title)
                    .setContentText(text); // Текст уведомления
        } else {
            builder.setContentIntent(contentIntent)
                    .setSmallIcon(small_Image_ID)
                    .setLargeIcon(avatar)                       
                    .setOngoing(ongoing)
                    .setWhen(System.currentTimeMillis())
                    .setAutoCancel(AutoCancel).setContentTitle(title) 
                    .setContentText(text); // Текст уведомления
        }

        final Notification n = builder.getNotification();

        nm.notify(notify_id, n);

    } catch (final Exception e) {
                    // TODO: add exception handling code
    }
} 
```

为什么我的服务被杀死了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-04T15:11:11.820

当我设置大图标时， 我注意到在**3.0模拟器上发生了这种情况。**

因此，由于大图标仅由**4.0+**设备使用，我通过检查构建版本是否 > 13 来解决此问题。如果是（且仅当如此），我设置大图标。

问题已经过去了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-25T14:36:44.390

此问题是缺少资源或资源为空的结果。查看您的代码，我推断，可能的错误似乎在 Ticker *(always false)*和`setLargeIcon(avatar)`*(avatar always is null)*上。

你能发布你所有的服务实现吗？

PS请尽量尊重java的命名约定；Ticker、Avatar、AutoCancel 和其他对象应以小写开头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-06T00:04:48.770

好吧，就我而言，我遇到了完全相同的错误，因为我在自定义通知布局中引用了 TextView 的样式定义，其中包含 onClick 目标方法的条目。具体来说：

```
<item name="android:onClick">onClick</item> 
```

一旦我删除了那条线，问题就消失了。我的疏忽，但很好地提醒不要盲目重用样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-05T12:16:58.333

除了谷歌推荐的布局和小部件 [https://developer.android.com/reference/android/widget/RemoteViews](https://developer.android.com/reference/android/widget/RemoteViews)

检查您`layout.xml`的文件，如果您使用`android:tint`属性将其删除。因为`RemoteViews`不接受 layout.xml 与`android:tint`

# django - 访问 django 模板中的模型字段

> ID：15642901
> 
> 赞同：1
> 
> 时间：2013-03-26T16:53:37.917
> 
> 标签：django, templates, model

我正在尝试访问模板内的模型字段。我在 if 语句中使用此字段：

```
{% for event in events %}
{% if event.homepage == 'False' %}
  <tr class='teamRow'>
    <td id='day' class="rowCell">
      {{ event.date }} {{ event.homepage }}
    </td>
  </tr>
{% else %}
  <p>Else</p>
{% endif %}
{% endfor %} 
```

if 语句不正确。我知道这是真的，因为 {{ event.homepage }} 返回“False”。

事件模型：

```
class Event(models.Model):
    homepage = models.BooleanField() 
```

我在我的观点中将模型传递给它：

```
def renderHomeNew(request):
events = Event.objects.all()
t = get_template('base_home_new.html')
context = {
    'events': events
    }
c = template.Context(context)
r = t.render(c)
return HttpResponse(r) 
```

这里没有遵循正确的语法吗？我没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:14:52.177

您正在尝试将布尔值与字符串进行比较。你的`Event`-model`homepage`是一个`BooleanField`. 尝试：

```
{% if not event.homepage %} 
```

也可以看看：

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#boolean-operators](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#boolean-operators) [https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models .BooleanField](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.BooleanField)

# javascript - JSHint 选项的默认值的完整列表？

> ID：15642903
> 
> 赞同：38
> 
> 时间：2013-03-26T16:53:38.757
> 
> 标签：javascript, coding-style, jshint

我在哪里可以获得 JSHint 默认选项的完整列表。我尝试在网上搜索，但找不到任何东西。

编辑：我的意思是所有选项的默认值列表，*以防***不清楚**:)

 ** * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-26T17:05:23.860

您可以直接在 jshint 源中查看`boolOptions`,`valOptions`和对象：`invertedOptions`

[https://github.com/jshint/jshint/blob/master/examples/.jshintrc](https://github.com/jshint/jshint/blob/master/examples/.jshintrc)

如果您对注释感到困惑，可以参考 jshint 帮助中的选项部分：

[http://jshint.com/docs/options/](http://jshint.com/docs/options/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-18T13:56:59.113

实际上，该页面包含默认选项列表，[@netme 的答案](https://stackoverflow.com/a/15643184/1924128)中提到的该文件对 JSHint 的行为没有影响。[引用](https://github.com/jshint/jshint.github.io/pull/18#issuecomment-87332181)JSHint 项目维护者的话：

> 实际上，该文件只是一个示例——它对 JSHint 的行为没有影响。虽然它可能与当前的默认行为匹配，但不能保证它会继续这样做。
> 
> 这就是[“选项”文档](http://jshint.com/docs/options/)按“强制”和“放松”类别对选项进行分段的原因。注意所有“放松”选项是如何抑制警告的——这些是 JSHint 默认施加的约束。

虽然一旦你理解了它是有道理的，但它会让很多人（包括我自己）感到困惑，并且[将来可能会改变](https://github.com/jshint/jshint/issues/1223#issuecomment-106612513)。*

# objective-c - NSlog 显示奇数 输出

> ID：15642904
> 
> 赞同：1
> 
> 时间：2013-03-26T16:53:41.037
> 
> 标签：objective-c, arrays, nslog

我有一个 NSlog 在调试器中给出奇怪的输出。我如何让它显示正确的价值？

```
 NSError *error = nil;
NSArray *data;

[self setStatus:@"Syncing data..."];
self.userInfo = [self.cloud Authenticate:[self serialNumber]];

if ( self.deviceInfo )
{
    data = [self.device GetData:&error];
    if ( !data )
    {
        [self displayErrorMessage:error];
        data = [NSMutableArray array];
    }

    //data received from device: Log point
    NSLog(@"data received from device: %@",data); 
```

调试器输出

```
 "<DataPoint: 0x1001f81b0>",
"<DataPoint: 0x10012f5f0>",
"<DataPoint: 0x1001f7780>",
"<DataPoint: 0x1001f8780>", 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:01:15.290

这是 NSObject 的描述方法返回的默认字符串，它只是打印指针值。如果您想查看打印的正确数据，请覆盖 DataPoint 类中的描述：

```
- (NSString*) description
{
    // Example:
    return [NSString stringWithFormat: @"ivar1=%@ , ivar2=%@",ivar1, ivar2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:59:31.813

当您在数组中存储一个对象时`DataPoint`，会显示正确的输出。

如果你想看到它们每个的全部价值，那么你需要使用

```
for(DataPoint *dp in data){
   NSLog(@"%@",dp.property);//property should be your property name of DataPoint class.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:14:47.003

+1 @Ramy 的好建议 override `description`，我建议扩展而不是替换，如下所示：

```
- (NSString *)description {

    return [NSString stringWithFormat: @"%@: ivar1=%@, ivar2=%@",
        [super description], self.ivar1, self.ivar2];
} 
```

响应类和 %p 指针的继承行为也非常有用。

# ruby - 为什么在使用 Ruby 执行 Google Fusion Tables API 命令时会收到 401 错误？

> ID：15642905
> 
> 赞同：2
> 
> 时间：2013-03-26T16:53:47.017
> 
> 标签：ruby, google-api, oauth-2.0, google-api-client, google-api-ruby-client

我正在使用 Ruby gem 'google-api-client'，并确保添加了我的所有凭据，但由于某种原因，我不断收到来自 Google 的 401 错误。

这是我的代码：

```
['google/api_client','json'].each{|g| require g}

client_secrets = File.open('client_secrets.json','r').read # My client secrets are stored in this .JSON file
client_secrets_hsh = JSON.parse(client_secrets)

client = Google::APIClient.new
client.authorization.client_id = client_secrets_hsh['installed']['client_id']
client.authorization.client_secret = client_secrets_hsh['installed']['client_secret']
client.authorization.redirect_uri = client_secrets_hsh['installed']['redirect_uris'][0]
client.authorization.access_token = 'MY_ACCESS_TOKEN'
client.authorization.username = 'MY_USER_NAME@gmail.com'
client.authorization.password = 'MY_GOOGLE_ACCOUNT_PASSWORD'
client.authorization.scope = 'https://www.googleapis.com/auth/fusiontables'

request_body = ''
headers = []
headers << ['Content-Type','application/json']

api = client.discovered_api('fusiontables','v1')

result = client.execute(
    :api_method => api.to_h['fusiontables.table.list'],
    :parameters => {'maxResults' => 1000},
    :merged_body => request_body,
    :headers => headers
)

puts result.response.body 
```

这是我从电话中得到的回复`puts results.response.body`：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Invalid Credentials",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Invalid Credentials"
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:31:55.450

不应提供用户名和密码。尝试放下那些开始。您只需要访问令牌即可进行 API 调用。顺便说一句，我不确定你从哪里得到的。通常你需要打电话到`fetch_access_token!`某个地方。它通常不是您通过访问器设置的东西。在某些高级案例中，您可能会这样做——但您可能不是其中之一。

# javascript - 无法调用未定义 app.js:1 sencha 嵌套的方法“子字符串”

> ID：15642909
> 
> 赞同：1
> 
> 时间：2013-03-26T16:53:54.817
> 
> 标签：javascript, extjs, sencha-touch-2, jsonp

无法调用未定义 app.js:1 的方法“子字符串”

[我在基于在 sencha doc 上构建您的第一个应用程序](http://docs.sencha.com/touch/2-1/#!/guide/first_app)教程的 sencha touch 应用程序的构建包版本上收到此错误。普通版运行得很好，但是在构建时我只是蓝屏。当我评论嵌套列表的代理相关行时，构建的版本运行良好。

```
proxy: {
    type: 'jsonp',
    url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://feeds.feedburner.com/SenchaBlog',
    reader: {
        type: 'json',
        rootProperty: 'responseData.feed.entries'
    }
} 
```

解决了

大多数网站声称这是因为 xtype 写得不好（[示例](http://www.levihackwith.com/extjs-4-uncaught-typeerror-cannot-call-method-substring-of-undefined-ext-all-debug-line-4384/)），但在这种情况下，这是由于缺少对 JsonP、NestedList 等内容的明确要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:46:00.800

SOLVED

Most sites claim it is because an xtype is badly written ([example](http://www.levihackwith.com/extjs-4-uncaught-typeerror-cannot-call-method-substring-of-undefined-ext-all-debug-line-4384/)), but, in this case it was due to missing explicit requires of things such as the JsonP, NestedList, etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:01:01.277

尝试在 urls encodeURI 或 encodeURIComponent 中对 Urls 进行编码。

这应该可以解决它 - 如果没有，请发布此文件的整个代码。

您是否只是忘记添加“叶子”和“字段”信息？

# php - mysqli_query 通过变量输入

> ID：15642910
> 
> 赞同：0
> 
> 时间：2013-03-26T16:53:56.387
> 
> 标签：php, mysql, phpmyadmin, mysqli

我正在尝试使用以下 PHP 代码将信息添加到 MySQL 表中。（从 HTML5 基本 Web 表单输入名称和文本。）可能是语法问题？

```
<?php
include "dbinfo.php"; //contains mysqli_connect information (the $mysqli variable)
//inputs
$name = $_GET["name"];
$text = $_GET["text"];

$sqlqr = 'INSERT INTO `ncool`.`coolbits_table` (`name`, `text`, `date`) VALUES ("$name", "$text", CURRENT_TIMESTAMP);'; //the query. I'm pretty sure that the problem is a syntax one, and is here somewhere.

mysqli_query($mysqli,$sqlqr); //function where the magic happens.
?> 
```

没有错误被抛出。结果是一个空白屏幕，并且将带有“$name”和“$text”的行添加到 MySQL 表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:57:32.230

首先：你应该使用mysqli准备好的语句来防止SQL注入攻击。在没有适当转义的情况下在查询中使用用户输入**是不安全的。**准备好的语句有助于防止这种情况。

第二：你应该学习字符串引用在PHP中是如何工作的，**单引号字符串和双引号字符串是不同的**

我建议阅读有关字符串引用的[PHP 文档。](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:10:18.243

**这就是您的代码的外观（添加了 SQL 注入保护）：**

```
<?php
include "dbinfo.php"; //contains mysqli_connect information (the $mysqli variable)
//inputs
$name = mysqli_real_escape_string($_GET['name']);
$text = mysqli_real_escape_string($_GET['text']);

$sqlqr = "INSERT INTO `ncool`.`coolbits_table` (`name`, `text`, `date`) VALUES ('" . $name . "', '" . $text . "', CURRENT_TIMESTAMP);";

mysqli_query($mysqli,$sqlqr); //function where the magic happens.
?> 
```

看看我做了什么。首先，我已经将您要检索的用户输入转义到`$name`and`$text`变量中（出于安全原因，这几乎是必须的），并且正如其他人建议的那样，您最好使用准备好的语句。

问题是您没有用单引号 (') 包围字符串值，这是 SQL 语法的要求。

我希望这有助于回答你的问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-26T16:56:09.240

```
 $sqlqr = 'INSERT INTO `ncool`.`coolbits_table` (`name`, `text`, `date`) VALUES ("'.$name.'", "'.$text.'", CURRENT_TIMESTAMP)'; 
```

将您的变量放在引号之外。

# android - SQLite CASE、SUM 和 COUNT

> ID：15642911
> 
> 赞同：2
> 
> 时间：2013-03-26T16:53:56.797
> 
> 标签：android, sqlite, expandablelistview, android-sqlite

我正在制作一个清单应用程序作为学习练习。基础工作良好，现在我正在尝试添加一些花里胡哨。

当我按类别（在 中`expandablelistview`）对列表进行排序时，如果检查了类别的所有内容，则应检查类别组视图。

我保留了是否在包含特定列表项的表中检查单个列表项的标志。我使用一个简单的 1/0 标志来表示选中或未选中。我实现我的功能的想法是在我的查询中使用类似的东西来确定是否检查了所有项目：

```
CASE WHEN sum(list_items.checked) = count(list_items.checked) THEN 1 ELSE 0 END AS 'groupchecked' 
```

认为如果它们都被选中（1）那么它们的总和应该等于它们的总数......但是，当我将该代码插入到我的查询中时，每个类别超过一个项目的任何内容都不会显示向上。我确定这个问题是由于我对 SQLite 不熟悉，但我似乎无法找出正确的方法来完成这项工作。

我当前尝试使用选中的标志获取我的组游标：

```
public Cursor fetchGroup(String group, long list) {
    String query = "SELECT DISTINCT "
            + group
            + " AS _id, CASE WHEN sum(list_items.checked) = count(list_items.checked) THEN 1 ELSE 0 END AS groupchecked FROM "
            + LISTITEM_TABLE
            + " JOIN "
            + ITEM_TABLE
            + " ON list_items.item_id=items._id WHERE list_items.list_id = "
            + list;
    return mDb.rawQuery(query, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:13:54.140

```
create table FOO(grp text, subgroup text, checked int)

insert into FOO(grp, subgroup, checked)
select 'feline','lion',1
union
select 'feline','tiger',0
union
select 'canine','dog',1
union
select 'canine','wolf',1

select grp, sum(checked) as checkedSum, count(checked) as checkedCount
from foo
group by grp 
```

现在制作一个内联视图：

```
select X.grp
from
(
select grp, sum(checked) as checkedSum, count(checked) as checkedCount
from foo
group by grp

) X

where checkedSum=checkedCount 
```

# mongodb - 使用 mongodb 搜索多个参数

> ID：15642913
> 
> 赞同：0
> 
> 时间：2013-03-26T16:53:58.657
> 
> 标签：mongodb, search, indexing

在不使用外部引擎的情况下，如何使用 mongodb 实现细粒度搜索？以这个对象为例 { 类型：'comedy'，页数：380，年份：2013，畅销书：true，作者：'John Doe' }

正在通过以下方式搜索：

```
db.books.find({
  pages:      { '&gt': 100 },
  year:       { '&gt': 2000 },
  bestseller: true,
  author:     "John Doe"
}); 
```

到目前为止非常简单。现在假设文档中有更多的值，并且我正在进行更精确的搜索**并且**我有一个相当**大**的集合。

我要做的第一件事是创建索引。但是，它是如何工作的？我已经读过这里定义的索引交集[https://jira.mongodb.org/browse/SERVER-3071](https://jira.mongodb.org/browse/SERVER-3071)是不可行的。这意味着如果我将索引设置为“年份”和“页面”，我将不会真正优化搜索中的 AND 操作。

那么如何针对具有许多参数的搜索进行优化呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:39:35.130

It seems like you are asking about [compound indexes in mongodb](http://docs.mongodb.org/manual/core/indexes/#compound-indexes). Compound indexes allow you to create a single index on multiple fields in a document. By creating compound indexes you can make these large/complex queries while still using an index.

On a more general note, if you create a basic index on a field that is highly selective, your search can end up being very quick. Using your example, if you had an index on author, the query engine would use that index to find all the entries where author == "John Doe". Presumably there are not that many books with that specific author relative to the number of books in the entire collection. So, even if the rest of your query is fairly complex, it is only evaluated over those few documents with the matching author. Thus, by structuring your indexes properly you can get a significant performance gain without having to have any complex indexes.

# google-apps-script - 如何每周为新创建的组/DL 生成报告？

> ID：15642929
> 
> 赞同：0
> 
> 时间：2013-03-26T16:54:41.437
> 
> 标签：google-apps-script, google-apps

我是 Google Apps for Business 域的管理员，我们希望能够运行报告来告诉我们上周创建了哪些组。组没有这样的“创建日期”列。到目前为止，我能做的最好的事情是每周运行一个组列表，但我希望能够自动将其与前一周的列表进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:22:01.167

您不妨将获得的列表存储在“永久存储”中 - 电子表格、ScriptDB 或脚本属性 - 并每周进行比较以查看是否已添加（或删除）某些内容......这可能更少简单而优雅，但可能更容易开始工作。

每周触发的功能可以这样做：

*   获取名称列表
*   解决
*   将排序列表写入电子表格
*   通过读取电子表格中的前一行来检索上周的排序列表
*   在数组级别比较两个排序列表
*   并给自己发送一封带有差异的邮件。（最终将日志写入电子表格）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:09:44.160

这当然是可能的，但需要一些编码。

为此，您必须使用[Audit API](https://developers.google.com/google-apps/admin-audit/using)。有关如何对 API 进行基本调用的一些入门代码，请参阅[此响应。](https://stackoverflow.com/questions/15097599/accessing-the-administrator-audit-log-via-google-script/15124712#15124712)一个棘手的部分是设置 OAuth 2，但之后很有可能。

`startTime`设置工作后，您可以添加其他`endTime`参数来定义您的周间隔以及 URL 中的[CREATE_GROUP](https://developers.google.com/google-apps/admin-audit/event_names#create-group)事件过滤器。

# asp.net - 如何将字符附加到母版页中的当前 URL？

> ID：15642933
> 
> 赞同：-1
> 
> 时间：2013-03-26T16:55:02.643
> 
> 标签：asp.net, vb.net, uri

我想显示用户所在的当前 URL，并将字符附加到它的末尾。因此，如果他们所在的网站是 google.com，它将显示 google.com/plus。问题是我想从母版页做，所以我不知道他们在哪个 URL 上。非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:05:04.183

您可以使用[Uri.GetLeftPart 方法](http://msdn.microsoft.com/en-us/library/system.uri.getleftpart.aspx)

例如，

```
string authority = Request.Url.GetLeftPart(UriPartial.Scheme)
string newUrl = authority + "/plus"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:57:26.993

使用 Request.Url 你可以知道用户请求的当前 url。

# php - PHP将Big Endian转换为十六进制

> ID：15642935
> 
> 赞同：0
> 
> 时间：2013-03-26T16:55:08.300
> 
> 标签：php, endianness

我正在尝试编写一个 PHP 脚本，我可以在其中获取一个大端数据包并将其转换为十六进制。我知道如果有人可以解释我非常感谢的步骤，您可以使用 unpack。有人告诉我我需要翻转这些位并添加一个，但我不知道 unpack 是否已经这样做或如何做到这一点。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:51:35.243

根据数据长度（和类型），您应该使用带有相关参数的[解包](http://php.net/unpack)n - 16 位 N - 32 位

然后你 pack() 它以 H 或 h 作为参数的十六进制

# java - 用 LuaJ 解释器编译 Lua 代码的 Java 方法

> ID：15642939
> 
> 赞同：1
> 
> 时间：2013-03-26T16:55:10.990
> 
> 标签：java, lua, luaj

[http://luaj.org/luaj/README.html](http://luaj.org/luaj/README.html)

我正在使用 Luaj 在 Java 应用程序中运行 Lua 代码。我得到了一些非常慢的结果，所以我想在运行代码之前尝试编译代码来计算 Lua 脚本的实际处理时间。

问题是 - Luaj 确实展示了如何通过命令提示符将 Lua 源代码编译为 Lua 或 Java 字节码的示例，但它没有向我展示使用 Java 应用程序编译 Lua 脚本的行。

它只显示了如何编译和运行 Lua 脚本：

```
import org.luaj.vm2.*;
import org.luaj.vm2.lib.jse.*;

String script = "examples/lua/hello.lua";
LuaValue _G = JsePlatform.standardGlobals();
_G.get("dofile").call( LuaValue.valueOf(script) ); 
```

我想找到只会将 Lua 编译为 Lua 或 Java 字节码并输出字节码文件的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:12:10.223

LuaJ 包含一个 Lua 到字节码的编译器。所以你可以只看源代码。我在这里提取了最相关的部分。

```
private void processScript( InputStream script, String chunkname, OutputStream out ) throws IOException {
    try {
        // create the chunk
        Prototype chunk = LuaC.instance.compile(script, chunkname);

        // list the chunk
        if (list)
            Print.printCode(chunk);

        // write out the chunk
        if (!parseonly) {
            DumpState.dump(chunk, out, stripdebug, numberformat, littleendian);
        }

    } catch ( Exception e ) {
        e.printStackTrace( System.err );
    } finally {
        script.close();
    }
} 
```

请记住，您只能真正依赖与生成它的 Lua 实现兼容的字节码。

# ember.js - Ember Data 目前存在哪些问题？

> ID：15642940
> 
> 赞同：1
> 
> 时间：2013-03-26T16:55:11.223
> 
> 标签：ember.js, ember-data

我最近在 ember.js 上做了一些阅读，并且不断出现的一个项目是 ember-data 存在“问题”，并且它“尚未准备好生产”。

虽然我一直看到这一点，但我从未真正遇到过任何实际问题的列表或描述！

我想知道是否有人可以提供当前主要问题的 2 秒版本？

# hadoop - 在 Hbase 中使用 WAL 进行恢复

> ID：15642941
> 
> 赞同：0
> 
> 时间：2013-03-26T16:55:11.410
> 
> 标签：hadoop, hbase

谁能告诉我在 Hbase 中恢复是如何工作的？

我发现了 WAL 文件，其中 HBASE 的每个操作都需要登录（/hbase/.logs/）。但不幸的是，该文件是空的。我执行的任何操作都没有记录到 WAL 文件中。可能是什么原因？我需要设置任何配置变量吗？如何启用它，以便定期登录 HBase 上的所有操作？

默认情况下，对 WAL 的写入是启用的（put.getWriteAheadLog() 返回一个真值）。我正在为 HBASE 设置使用“独立模式”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:42:01.503

我终于能够在伪分布式模式下解决问题。一旦数据写入 HBase 表，它就会立即登录。但是，在单机模式下看不到此行为。我无法弄清楚控制时间的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:30:43.633

您需要启用 WAL，然后只有日志信息将写入 WAL。在您的情况下，它未启用。请启用它并重试。

问候， Sudhakar Reddy

# java - Java 数组引用另一个数组

> ID：15642945
> 
> 赞同：1
> 
> 时间：2013-03-26T16:55:19.403
> 
> 标签：java, arrays

那么是否可以从不同的数组中引用另一个数组元素？

像这样

```
String[] array1 = new String[] {"World"};
String[] array2 = new String[] {"Hello", array1[0]};

array1[0] = "David";

for(String element : array2)
   System.out.print(element); 
```

当我尝试打印数组时，它只打印 HelloWorld 而不是 HelloDavid

这可能吗？如果没有，这可能使用变量吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T16:57:37.903

你所拥有的是有效的，但输出将是`HelloWorld`，而不是`HelloDavid`

虽然`array1[0]`会有一个新值，`array1`但不会受到影响，因为它存储的是字符串值引用，而不是数组引用，所以当数组引用更新时，数组中引用的字符串不会改变

**编辑**

从您的问题开始，您正在寻找的是指针功能（由 C++ 提供）。以下多维解决方案并不完全相同，而且非常笨拙，但它会满足您的需求：

```
 String[] array1 = new String[]{"World"};
    String[][] array2 = new String[][]{new String[] {"Hello" }, array1};

    array1[0] = "David";

    for (String[] element : array2)
        System.out.print(element[0]);

    ==> output: HelloDavid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:07:38.933

```
String[] array2 = new String[] {"Hello", array1[0]}; 
```

在上面的代码中，您正在创建一个名为的数组`array2`，其`0th`索引包含`String literal`"Hello" 的引用，并且`1st`索引包含存在于array1[0] 中的`String`literal("World") 的引用。`StringPool`根据由编译器更改如下：[`JLS3.10.5-1`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5) `array2[1]`

```
String[] array2 = new String[] {"Hello", "World"}; 
```

现在排队：

```
array1[0] = "David"; 
```

您`array[0]`要包含新创建的字符串“David”的引用`StringPool`。但它不会改变索引`1`处存在的元素`array2`。因为`array2[1]`已经指的是`StringPool`.
如果您在代码中进行以下更改，您将获得“HelloDavid”输出：

```
array1[0] = "David";
array2[1] = array1[0]; 
```

# c# - 在 C#（控制台）中验证电话号码

> ID：15642946
> 
> 赞同：0
> 
> 时间：2013-03-26T16:55:20.513
> 
> 标签：c#, console

我可以在没有正则表达式的情况下限制控制台应用程序中的电话号码吗？我有这个代码，但它不适用于以 00 开头的国际号码。

```
 static public bool CheckPhoneNumb (string phoneNumber)
    {
        long lphoneNumber;
        return ((phoneNumber.Length >= 9) && phoneNumber.Length <= 15) &&
                (long.TryParse (phoneNumber, out lphoneNumber))) ? true : false;
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T16:58:09.890

如果您需要支持全球呼叫，那么使用正则表达式将很难做到这一点。

我建议使用 Google 电话号码验证库。

> 解析/格式化/验证世界所有国家/地区的电话号码。

[https://code.google.com/p/libphonenumber/](https://code.google.com/p/libphonenumber/)

页面底部有一个 C# 端口链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:00:37.213

国际电话号码不以 00 开头。00 部分是您在您所在地区用于开始拨打实际国际号码（在 00 之后）的代码。该号码会从您拨打的位置更改。例如，在美国，它是 011。在欧洲，它是 00。日本有不同的代码，还有一些其他代码。

是的，您可以在不使用正则表达式的情况下对其进行限制，但您可能会发现它更容易，我强烈建议您不要将您的（或任何）国际访问代码与它一起存储，因为它会根据您向谁显示它而有所不同.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T17:09:11.327

您寻求的答案比您想象的要复杂得多。

通常，数字本身会随着添加/删除前缀的来源和目的地区域设置而有所不同。

什么样的电话号码？NANP（北美编号计划）或其他地方？

涵盖美国、加拿大、墨西哥和加勒比地区的 NANP 详见[http://www.nanpa.com/](http://www.nanpa.com/)。对于世界各地的编号计划，一个很好的起点是[http://www.wtng.info/上的世界电话号码指南](http://www.wtng.info/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-26T16:58:14.403

```
return ((phoneNumber.Length >= 9) && phoneNumber.Length <= 15) && phoneNumber.All(char.IsNumber); 
```

# c# - EPPlus 中的自动列宽

> ID：15642950
> 
> 赞同：148
> 
> 时间：2013-03-26T16:55:29.310
> 
> 标签：c#, .net, vb.net, epplus

当列中的文本很长时，如何使列自动宽度？

我使用此代码

```
 Worksheet.Column(colIndex).AutoFitColumn() 'on all columns'
 Worksheet.cells.AutoFitColumns()
 Worksheet.Column(colIndex).BestFit = True  'on all columns' 
```

这些方法都不起作用

有什么方法可以让它工作吗？

注意：我的一些文本使用 Unicode。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2013-03-26T17:00:10.393

使用`AutoFitColumns`，但您必须指定单元格，我假设整个工作表：

VB.NET

```
Worksheet.Cells(Worksheet.Dimension.Address).AutoFitColumns() 
```

C＃

```
Worksheet.Cells[Worksheet.Dimension.Address].AutoFitColumns(); 
```

**请注意，您需要在填写工作表后调用此方法。**

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-05-28T15:52:08.910

我已将此代码与 EPPlus 的 3.1.3.0 版本一起使用，并且它正在工作：

```
worksheet.Column(1).AutoFit(); 
```

其中工作表是引用我在代码中创建的工作表的变量（不是具有静态方法的类！）。

显然，您必须**在填写完列后调用此方法**。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-10-25T16:36:00.093

只是想指出您可以在不指定范围的情况下适应单元格，只需确保在格式化所有列等后调用它：

```
worksheet.Cells.AutoFitColumns() 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-06-30T14:20:55.597

我知道这是一个老问题，但我使用下面的代码，它似乎直接解决了你试图做的事情。

```
using (var xls = new ExcelPackage())
{
    var ws = xls.Workbook.Worksheets.Add("Some Name");

    //**Add Column Names to worksheet!**
    //**Add data to worksheet!**

    const double minWidth = 0.00;
    const double maxWidth = 50.00;

    ws.Cells.AutoFitColumns(minWidth, maxWidth);

    return pkg.GetAsByteArray();
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-09-18T10:18:45.167

我知道有点晚了，但我今天遇到了同样的问题。如果你有一个`worksheet.DefaultColWidth`定义，它不会工作。我已经删除了该行并添加了`Worksheet.cells.AutoFitColumns();`它，它现在可以工作了。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-07-02T09:13:43.387

它对我来说很好。

尝试：

```
ExcelWorksheet wsSheet1 = ExcelPkg.Workbook.Worksheets.Add("Sheet1");
wsSheet1.Cells[wsSheet1.Dimension.Address].AutoFitColumns();
ExcelPkg.SaveAs(); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-07-23T07:09:24.497

不得不使用`worksheet.Column(1).AutoFit(0);`AutoFit() 并没有成功。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-26T17:03:03.137

您将需要计算宽度。库中没有自动调整大小的功能可以按您的意愿工作。

Autofitcolumn 不适用于换行的文本和带有公式的单元格。

查看[http://epplus.codeplex.com/discussions/218294?ProjectName=epplus](http://epplus.codeplex.com/discussions/218294?ProjectName=epplus)了解如何解决问题的示例。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-11-15T13:39:14.737

作为 .NET 的继承者的 .NET Core 不再支持带有 EPPplus 库的函数自动调整单元格。

```
worksheet.Cells.AutoFitColumns(); 
```

或者

```
worksheet.Column(1).AutoFit(); 
```

导致异常：

```
"System.Drawing is not supported on this platform." 
```

System.Drawing 程序集依赖于 GDI 和 Windows 特定库，这些库必须由另一个解决方案替换。这个问题的解决方案对我来说是未知的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-12-05T20:21:11.060

我使用它并且运行良好。

```
Dim objExcel As New ExcelPackage
Dim Sheet As ExcelWorksheet = objExcel.Workbook.Worksheets.Add("SheetName")
Sheet.Cells("B1:BN").AutoFitColumns() 
```

# javascript - JavaScript 中的对象和属性

> ID：15642952
> 
> 赞同：-7
> 
> 时间：2013-03-26T16:55:31.207
> 
> 标签：javascript

我已将我的问题与以下代码一起放在评论中：

```
 var box = {};

    box.content = box; // box{ 'content': {} }  right?

   show('content' in box); // true because content exist inside of the box object

   show('content' in box.content); // false because box.content contains an empty object! Right? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:58:19.463

~~是的，你的断言都是正确的。~~实际上第二个也应该返回 true：

```
console.log('content' in box); // true
console.log('content' in box.content); // true 
```

第二个返回 true ，因为您正在此行上设置递归：

```
box.content = box; 
```

这是控制台中的结果：

![在此处输入图像描述](../Images/8f54a2368720c40884c817d989457628.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:03:59.663

这应该完全递归地返回 true，因为您在其“内容”属性中引用了该对象。

```
console.log(blah.content.content.content.content === blah) //shows 'true' 
```

# sql - 构造 SQL 查询的最佳方法

> ID：15642953
> 
> 赞同：0
> 
> 时间：2013-03-26T16:55:34.013
> 
> 标签：sql, sql-server, database, relational-database

我有几个数据库表：

*   `Client`（基本信息、名字、姓氏等）

*   `Employer`（基本信息、雇主名称、传真、地址等）

然后，如果需要，我有一个连接两个表的联结表：

*   `Client_Employer`（客户 ID、雇主 ID）

所有这些表格都使用经过确认的、准确的、干净的数据进行维护。

我有第四个表，仅用于提供信息，数据既不干净也不可靠，因为它是由最终用户提供的，无法确认。

*   `ClientEmployer`（客户提供的有关其当前雇主的数据）

我想编写一个查询，如果`Client_Employer`表中存在记录，则返回客户/雇主数据，但如果不存在其他记录，也会回退到`ClientEmployer`表以获取雇主信息。

中的列与 中的列`Employer`完全相同`ClientEmployer`。

我已经使用`ISNULL()`, `CASE`,`IF/ELSE`等查看了几个选项，但只是想看看其他人认为最好、最干净的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:37:28.997

好吧，对 ClientEmployer 表的架构做一些假设，我会像这样组合 UNION 和 EXISTS：

```
SELECT 
    cl.ClientID as ClientID, 
    em.EmployerID as employerID,
    cl.firstname, 
    cl.lastname, 
    em.employername, 
    em.fax, 
    em. address 
FROM 
    Client cl, 
    Employer em, 
    Client_Employer ce 
WHERE 
    cl.ClientID = ce.ClientID 
    and em.EmployerID = ce.EmployerID
UNION
SELECT 
    Clem.ClientID as clientID,
    -1 as EmployerID,
    clem.firstname, clem.lastname, 
    clem.employername, 
    clem.fax,
    clem.address 
FROM 
    ClientEmployer clem 

WHERE 
    NOT EXISTS (
                  SELECT * FROM Client cl, Employer em, Client_Employer ce 
                  WHERE cl.ClientID = ce.ClientID 
                        and em.EmployerID = ce.EmployerID 
                        and clem.ClientID = cl.ClientID
                        and clem.EmployerName = ce.EmployerName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:21:57.860

我认为你应该使用`ISNULL()`to `LEFT JOIN Employer`，像这样：

```
SELECT 
  Client.*, 
  Employer.* 
FROM Client 
LEFT JOIN Client_Employer 
 ON Client_Employer.client_id = Client.id 
LEFT JOIN ClientEmployer 
 ON ClientEmployer.client_id = Client.id 
LEFT JOIN Employer 
 ON Employer.id = ISNULL(Client_Employer.employer_id, ClientEmployer.employer_id) 
WHERE Employer.id IS NOT NULL; 
```

如果有些`Employer.id`是`NULL`（`WHERE`子句），那么在两个客户/雇主表中都没有给定的关系`Client.id`，这意味着您将只有一些客户/雇主表中的数据。

希望它按您的预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:22:13.723

IF EXISTS 的用法呢？似乎您可以很容易地检索存在的数据，否则在您的示例中从 ClientEmployer 中选择不存在的数据。

# c# - ListPicker如何添加第一个静态项目

> ID：15642956
> 
> 赞同：0
> 
> 时间：2013-03-26T16:55:39.633
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我有带有数据绑定的 ListPicker，我需要将第一项“无”添加到绑定项。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:01:09.720

您可以连接到数据绑定集合（ObservableCollection??）上的集合更改事件。当它发生变化时，您可以根据需要操纵列表。

# jquery - 是否可以将 jQuery 模板实例化并缓存为 javascript 对象？

> ID：15642958
> 
> 赞同：1
> 
> 时间：2013-03-26T16:55:44.060
> 
> 标签：jquery, jquery-templates

感谢您的关注！

# 背景

我意识到已经为其他一些闪亮的对象预留了 jQuery 模板，但无论如何我有义务在我当前的项目中使用该框架。

我正在编写一个动态表单构建器，它接受 JSON，然后呈现正确的表单字段，并绑定到一次性控件的模板。例如，表示基本文本字段的 JSON 对象将对应于这样的模板：

```
 <!-- BEGIN TEXTBOX TEMPLATE -->
    <script type="text/html" id="Template_TextBox">
        <div class="formField">
            <label>
                ${LabelText}
                <span class="small">${HelpText}</span>
            </label>
            <input type="text" id="${FieldId}" placeholder="${Placeholder}" />
            <div class="clear10"></div>
        </div>
    </script>
    <!-- END TEXTBOX TEMPLATE --> 
```

FormBuilder 类存在于它自己的 JavaScript 文件中，并将在整个项目中使用。

# 问题

由于此类将用于在整个项目中呈现表单字段，并且由于这些字段看起来总是相同的（即文本输入、选择列表等），我想标准化 jQuery 模板并将它们全部放在一个地方而不必将这些模板粘贴到具有表单的每个页面上。我更愿意在我的`FormBuilder.js`文件中以某种方式初始化这些模板，其中包含表单构建逻辑的其余部分，或者至少在某个地方有一个包含所有模板的 HTML 页面，并且可以由 .js 文件引用以在整个站点中使用。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T16:42:59.147

这比我想象的要容易：

# 第 1 步：将模板作为 html 字符串放入变量中：

```
var myTemplate = "<h1>${someItem}</h1>"; 
```

# 第 2 步：缓存模板

```
$.template("myTemplate", myTemplate); 
```

# 第 3 步：使用它！

```
$.tmpl("myTemplate", myJsonData).appendTo("#SomeHtmlElement"); 
```

# google-maps - snap to road google api v3的限制

> ID：15642959
> 
> 赞同：2
> 
> 时间：2013-03-26T16:55:44.603
> 
> 标签：google-maps, google-maps-api-3

**更新：** 我有一些 GPS 定位点，我想绘制路径。我使用不跟随道路的折线绘制方式。我想做“捕捉到道路”，这样我就可以改善路径。

我将此[代码](https://stackoverflow.com/questions/10513360/polyline-snap-to-road-using-google-maps-api-v3)用于捕捉保存在数组“snap_path_points”中的位置的道路

我只获得前 8 个调用的路径（限制），下面是代码

```
var service = new google.maps.DirectionsService(), poly,snap_path=[];
              poly = new google.maps.Polyline({ map: map });
        for(j=0;j<snap_path_points.length-1;j++){
        service.route({
            origin: snap_path_points[j],
            destination: snap_path_points[j+1],
            travelMode: google.maps.DirectionsTravelMode.DRIVING
          }, function(result, status) {                
            if (status == google.maps.DirectionsStatus.OK) {
              snap_path = snap_path.concat(result.routes[0].overview_path);
              poly.setPath(snap_path);
            }        
          });
        } 
```

我将我的位置分成 8 个批次并尝试相同（即如果 24 个点使用 3 个 for 循环），但我得到了`OVER_QUERY_LIMIT`。

[我想知道它是如何在这里](http://people.missouristate.edu/chadkillingsworth/mapsexamples/snaptoroad.htm)与事件监听器一起工作的。

> OVER_QUERY_LIMIT 表示网页在允许的时间段内发送了过多的请求。

无论如何，是否有超过 8 个点的完整捕捉到道路路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-23T13:31:52.187

问题不在于您发送了太多积分，而在于您在给定时间段内提出了太多请求。snap to road api 指出：

> 标准 API 的用户：
> 
> 每天 2,500 个免费请求，每秒 10 个请求

因此，如果您发送的请求超出上述限制，这就是您收到该错误的原因。

# jquery - JQuery：迭代相同的类名

> ID：15642961
> 
> 赞同：-2
> 
> 时间：2013-03-26T16:55:49.703
> 
> 标签：jquery

我有几个具有相同类名的 div。但有不同的内容。它们如下所示

```
 <div class="schoolLib">
         <div class="message">
            <span class="msgTextLib">This is a sample text.</span>
         </div>
  </div>

  <div class="schoolCanteen">
         <div class="message">
            <span class="msgTextcanteen">This is another sample text.</span>
         </div>
  </div>

  <div class="schoolBus">
         <div class="message">
            <span class="msgTextBus">This is a sample text for Bus.</span>
         </div>
  </div> 
```

如何使用 .html() 获取消息类 div 中的所有文本。我的内容是动态的。我有不同的跨度课程。我还需要使用 .html() 为所有 div 设置不同的文本。所以我需要一种方法来迭代地获取类名消息下的所有内容。我知道 .each() 方法，但不知道该怎么做。作为一个初学者，我需要你的帮助。我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:01:18.143

您可以使用`each`来迭代集合：

```
$('.message').each(function(){
    var msg = $(this);
    msg.html('<div> new content </div>'); //for adding html
    //or to set the text use
    msg.text('change text');
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:02:06.463

正如评论指出的那样，使用 .each() 来获取内容。仅供参考发布片段。

```
 var html = '';
    $('.message').each(function(){
      html += $(this).html(); //get the html
      $(this).html('<span>something else</span>') //set a different html
    });
    console.log(html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T17:09:38.970

如果每条消息总是只有一个跨度，请试试这个：

$('.message').each(function(){

alert($(this).children().first().text());

});

我不知道你想对消息内容做什么，但是你可以得到所有这些。如果你愿意，你可以将它们存储在一个数组中并在其他上下文中使用......

# shell - 使用符号链接，为什么“ls ..”和“cd ..”的结果不同？

> ID：15642965
> 
> 赞同：2
> 
> 时间：2013-03-26T16:55:54.963
> 
> 标签：shell, symlink

假设我执行以下命令：

```
$ mkdir -pa/b
$ ln -sa/bc
$ cd c

```

那么，在目录**c**中，为什么`ls ..`显示目录**a**的内容，却`cd ..`返回到原来的目录呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:53:10.037

shell 区分了两种类型的路径：物理路径，它反映了磁盘上文件夹的实际布局，以及逻辑路径，它考虑了符号链接。当您将工作目录更改为`c`（而不是`a/b`）时，shell 知道当前目录的逻辑路径是`~/c`（假设`a`在您的主目录中），并且物理路径是`~/a/b`.

在您的示例中，`ls`显示的内容是`a`因为`..`是 的物理父目录的实际文件系统条目`c`。另一方面，工作目录是一个 shell 概念，`cd`是一个 shell 内置命令。shell 知道，虽然`c`只是 的另一个名称`a/b`，但具体来说，工作目录`c`不是`a/b`. 因此，它是`..`逻辑解析而不是物理解析。

POSIX 标准指定命令的选项`-L`和`-P`选项，`cd`让您明确说明要遵循的路径。在您的示例中，`cd c; cd -P ..`应该将您放入`~/b`而不是`~`.

# python - 在 Python 中从文件中读取

> ID：15642966
> 
> 赞同：0
> 
> 时间：2013-03-26T16:55:58.697
> 
> 标签：python, file, io

我想知道是否有人可以帮助我使用以下 Python 3 代码。由于某种原因，它没有做我认为应该做的事情，我不明白为什么。

```
with open("ModuleShow.txt", "w+", encoding='utf-8') as ModuleShowFile:
            if ModulesLeft == 0:
                ModuleLoaded = CommandLine[2]
                print(ModuleLoaded)
            else:
                ModuleLoaded = ModuleToLoad[0]
                ModuleToLoad.pop(0)
                ModulesLeft = ModulesLeft - 1
                #            ModuleFile.write("\n" + ModuleLoaded)                                                    
                #            CommandsFile.write("module show" + ModuleLoaded)                                         
            output = subprocess.Popen(["bash", "-ci", "module show " + ModuleLoaded], stderr=ModuleShowFile)

#            with open("ModuleShow.txt", "r", encoding='utf-8') as ModuleShowFile:                                        

            print(ModuleShowFile.read())
            for ModuleFileLine in ModuleShowFile:
                FileLine = ModuleFileLine.split(" ")

                print(FileLine[0])
                if FileLine[0] == "prepend-path":
                    print(FileLine[0])
                    if FileLine[1] == "PATH":
                        ModulePathFile.write(FileLine[2] + " " + ModuleLoaded + "\n")
                    elif FileLine[0] == "module":
                        ModuleToLoad.append(FileLine[2])
                        ModulesLeft = ModulesLeft + 1 
```

所以我在上面的代码中所做的是将信息写入一个名为 ModuleShow.txt 的文件，然后解析该信息并将解析后的信息写入一个名为 ModulePath.txt 的文件，我之前打开了 ModulePath.txt，但我没有包含那部分代码，因为我相信它与我遇到的问题无关。

所以基本上，当我运行我的脚本时，内容被写入文件，但是当我阅读内容时我什么也没得到。例如，我尝试使用“print(ModuleShowFile.read())”，但没有打印任何内容，但文件是使用里面的内容创建的。我尝试了两条“with open()”行，一条用于写作，另一条用于阅读，但仍然没有解决问题。希望这很简单，我为这篇长文道歉。我将不胜感激任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:05:23.570

您甚至需要编写文件 ModuleShow.txt 吗？或者您可以将条目保存在列表中吗？

如果您确实需要再次读回它们，请先关闭文件，如下所示：

```
with open("ModuleShow.txt", "w+", encoding='utf-8') as ModuleShowFile:
    # ... whatever (I'm assuming you're writing to the file here)

# now the file is closed
with open("ModuleShow.txt", "r", encoding='utf-8') as ModuleShowFile:
    for ModuleFileLine in ModuleShowFile:
        # ... now you can read each line 
```

# git - 如何复制裸存储库，保留共享存储库及其效果？

> ID：15642967
> 
> 赞同：1
> 
> 时间：2013-03-26T16:56:01.083
> 
> 标签：git, permissions

我需要能够复制这样设置的存储库：

```
$ git init --bare --shared=0666 first.git 
```

产生这个配置：

```
$ git --git-dir=first.git config core.sharedrepository
0666 
```

到具有相同配置的第二个存储库。

* * *

在磁盘上它看起来像这样：

```
[drwxrwsrwx] first.git/ 
```

但是在克隆这个存储库时：

```
git clone --bare first.git second.git 
```

第二个存储库具有权限：

```
[drwxrwxrwx] first.git/ 
```

注意：`s`-> `x`，还有：

```
$ git --git-dir=second.git config core.sharedrepository
[exit code: 1] 
```

* * *

有没有办法做到这一点`git-clone`？我已经查看了`--mirror`其他选项，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:59:47.033

好的，我找到了解决方案。它需要使用`git-init`来“重新初始化”存储库：

```
git clone --bare first.git second.git
git init --bare --shared=0666 second.git 
```

由于它是由一个用户克隆的，因此该用户有权对存储库执行事后修复，本质上是对必要的部分进行 chmod。如果将其合并到克隆中会很好。

# soundcloud - SoundCloud 波形 JSON API

> ID：15642968
> 
> 赞同：1
> 
> 时间：2013-03-26T16:56:04.150
> 
> 标签：soundcloud

您可以从以下 URL 获取 SoundCloud 波形的数据表示：

```
https://wis.sndcdn.com/OVXGhROsaZkq_m.png 
```

此功能未记录在案，但该站点将其用作优化带宽的巧妙方法。我向 API 团队提出的问题是，在生产环境中依赖它是否安全？

我想在移动应用程序中使用它，所以跨域问题对我来说不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:43:03.650

未记录的功能应被视为易失性，抱歉。虽然目前没有改变这种格式的计划，但我不能对此做出任何承诺。

有趣的是，如果带宽是您唯一关心的问题，那么作为 PNG 文件的波形实际上更小。

# android - Android：使用 ContentProvider 和 Loader 刷新 ListFragement

> ID：15642975
> 
> 赞同：1
> 
> 时间：2013-03-26T16:56:32.730
> 
> 标签：android, android-fragments, android-contentprovider, android-listfragment

我正在使用 SQLite 数据库和 ContentProvider 来填充 ListFragment。问题是我添加项目后 ListFragment 没有刷新。ListFragment 为空。我必须关闭并重新打开应用程序才能在列表中显示添加的项目。

我尝试像这样更新它：

```
 public class RoomListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

            //adapter using SQLite and ContentProvider to fill ListFragment
            private SimpleCursorAdapter dataAdapter;

            //needed for create room dialog
            private EditText enter_room;
            private static View textEntryView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            //display ActionBar items
            setHasOptionsMenu(true);

            // TODO: replace with a real list adapter.
            displayListView();
        }
    @Override
        public void onResume() {
          super.onResume();
          //Starts a new or restarts an existing Loader in this manager
          getLoaderManager().restartLoader(0, null, this);
         }

        @Override
        public void onDestroy() {
          super.onDestroy();
         }

         private void displayListView() {

          // The desired columns to be bound
          String[] columns = new String[] {
            Database.KEY_GROUPADDRESS,
            Database.KEY_NAME,
            Database.KEY_DPT
          };

          // the XML defined views which the data will be bound to
          int[] to = new int[] {
            R.id.groupaddress,
            R.id.name,
            R.id.dpt,
          };

          // create an adapter from the SimpleCursorAdapter
          dataAdapter = new SimpleCursorAdapter(
            getActivity(),
            R.layout.device_info,
            null,
            columns,
            to,
            0);

          //set SimpleCursorAdapter to ListFragmentAdapter
          setListAdapter(dataAdapter);

          //Ensures a loader is initialized and active.
          getLoaderManager().initLoader(0, null, this);   
         }

         // This is called when a new Loader needs to be created.
         @Override
         public Loader<Cursor> onCreateLoader(int id, Bundle args) {
             String[] projection = {
                  Database.KEY_ROWID,
                  Database.KEY_GROUPADDRESS,
                  Database.KEY_NAME,
                  Database.KEY_DPT};
             CursorLoader cursorLoader = new CursorLoader(getActivity(),
                     MyContentProvider.CONTENT_URI, projection, null,       null,      null);
             return cursorLoader;
         }

         @Override
         public void onLoadFinished(Loader<Cursor> loader, Cursor data) {    
             // Swap the new cursor in.  (The framework will take care of closing the
             // old cursor once we return.)
             dataAdapter.swapCursor(data);
             dataAdapter.notifyDataSetChanged();

                if (isResumed()) {
                    setListShown(true);
                } else {
                    setListShownNoAnimation(true);
             }
         }

         @Override
         public void onLoaderReset(Loader<Cursor> loader) {
             // This is called when the last Cursor provided to onLoadFinished()
             // above is about to be closed.  We need to make sure we are no
             // longer using it.
             dataAdapter.swapCursor(null);
         } 
```

我用这个代码添加了一个项目：

```
//Handle OnClick events on ActionBar items
            @Override
            public boolean onOptionsItemSelected(MenuItem item) {
               // handle item selection
               switch (item.getItemId()) {
                  case R.id.menu_add:
                     //Toast.makeText(getActivity(), "Click", Toast.LENGTH_SHORT).show();

                     LayoutInflater factory = LayoutInflater.from(getActivity());

                     //textEntryView is an Layout XML file containing text field to display in alert dialog
                     textEntryView = factory.inflate(R.layout.dialog_add_room, null);       

                     //get the control from the layout      
                     enter_room = (EditText) textEntryView.findViewById(R.id.enter_room);

                     //create Dialog
                     final AlertDialog.Builder alert1 = new AlertDialog.Builder(getActivity());
                     //configure dialog
                     alert1.setTitle("Raum hinzufügen:").setView(textEntryView)
                     .setPositiveButton("Hinzufügen",
                            new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                            String roomname = enter_room.getText().toString();

                            Log.d("Insert: ", "Inserting ..");

                            ContentValues values = new ContentValues();
                            //TODO Richtige Spalte für Raumname verwenden
                            values.put(Database.KEY_NAME, roomname);

                            getActivity().getContentResolver().insert(MyContentProvider.CONTENT_URI, values);

                            dataAdapter.notifyDataSetChanged();

                        }
                     }).setNegativeButton("Abbrechen",
                            new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                            //cancel dialog
                        }
                     });
                     alert1.show();          
                     return true;
                  default:
                     return super.onOptionsItemSelected(item);
               }
            } 
```

我的内容提供者：

```
import android.content.ContentProvider;
import android.content.ContentValues;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;
import android.net.Uri;
import android.text.TextUtils;

public class MyContentProvider extends ContentProvider{
     private MyDatabaseHelper dbHelper;

     private static final int ALL_COUNTRIES = 1;
     private static final int SINGLE_COUNTRY = 2;

     // authority is the symbolic name of your provider
     // To avoid conflicts with other providers, you should use
     // Internet domain ownership (in reverse) as the basis of your provider authority.
     private static final String AUTHORITY = "de.mokkapps.fixknxdemo.contentprovider";

     // create content URIs from the authority by appending path to database table
     public static final Uri CONTENT_URI =
      Uri.parse("content://" + AUTHORITY + "/countries");

     // a content URI pattern matches content URIs using wildcard characters:
     // *: Matches a string of any valid characters of any length.
        // #: Matches a string of numeric characters of any length.
     private static final UriMatcher uriMatcher;
     static {
      uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
      uriMatcher.addURI(AUTHORITY, "countries", ALL_COUNTRIES);
      uriMatcher.addURI(AUTHORITY, "countries/#", SINGLE_COUNTRY);
     }

     // system calls onCreate() when it starts up the provider.
     @Override
     public boolean onCreate() {
      // get access to the database helper
      dbHelper = new MyDatabaseHelper(getContext());
      return false;
     }

     //Return the MIME type corresponding to a content URI
     @Override
     public String getType(Uri uri) {

      switch (uriMatcher.match(uri)) {
      case ALL_COUNTRIES:
       return "vnd.android.cursor.dir/vnd.com.as400samplecode.contentprovider.countries";
      case SINGLE_COUNTRY:
       return "vnd.android.cursor.item/vnd.com.as400samplecode.contentprovider.countries";
      default:
       throw new IllegalArgumentException("Unsupported URI: " + uri);
      }
     }

     // The insert() method adds a new row to the appropriate table, using the values
     // in the ContentValues argument. If a column name is not in the ContentValues argument,
     // you may want to provide a default value for it either in your provider code or in
     // your database schema.
     @Override
     public Uri insert(Uri uri, ContentValues values) {

      SQLiteDatabase db = dbHelper.getWritableDatabase();
      switch (uriMatcher.match(uri)) {
      case ALL_COUNTRIES:
       //do nothing
       break;
      default:
       throw new IllegalArgumentException("Unsupported URI: " + uri);
      }
      long id = db.insert(Database.SQLITE_TABLE, null, values);
      getContext().getContentResolver().notifyChange(uri, null);
      return Uri.parse(CONTENT_URI + "/" + id);
     }

     // The query() method must return a Cursor object, or if it fails,
     // throw an Exception. If you are using an SQLite database as your data storage,
     // you can simply return the Cursor returned by one of the query() methods of the
     // SQLiteDatabase class. If the query does not match any rows, you should return a
     // Cursor instance whose getCount() method returns 0\. You should return null only
     // if an internal error occurred during the query process.
     @Override
     public Cursor query(Uri uri, String[] projection, String selection,
       String[] selectionArgs, String sortOrder) {

      SQLiteDatabase db = dbHelper.getWritableDatabase();
      SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
      queryBuilder.setTables(Database.SQLITE_TABLE);

      switch (uriMatcher.match(uri)) {
      case ALL_COUNTRIES:
       //do nothing
       break;
      case SINGLE_COUNTRY:
       String id = uri.getPathSegments().get(1);
       queryBuilder.appendWhere(Database.KEY_ROWID + "=" + id);
       break;
      default:
       throw new IllegalArgumentException("Unsupported URI: " + uri);
      }

      Cursor cursor = queryBuilder.query(db, projection, selection,
        selectionArgs, null, null, sortOrder);
      return cursor;

     }

     // The delete() method deletes rows based on the selection or if an id is
     // provided then it deleted a single row. The methods returns the numbers
     // of records delete from the database. If you choose not to delete the data
     // physically then just update a flag here.
     @Override
     public int delete(Uri uri, String selection, String[] selectionArgs) {

      SQLiteDatabase db = dbHelper.getWritableDatabase();
      switch (uriMatcher.match(uri)) {
      case ALL_COUNTRIES:
       //do nothing
       break;
      case SINGLE_COUNTRY:
       String id = uri.getPathSegments().get(1);
       selection = Database.KEY_ROWID + "=" + id
       + (!TextUtils.isEmpty(selection) ?
         " AND (" + selection + ')' : "");
       break;
      default:
       throw new IllegalArgumentException("Unsupported URI: " + uri);
      }
      int deleteCount = db.delete(Database.SQLITE_TABLE, selection, selectionArgs);
      getContext().getContentResolver().notifyChange(uri, null);
      return deleteCount;
     }

     // The update method() is same as delete() which updates multiple rows
     // based on the selection or a single row if the row id is provided. The
     // update method returns the number of updated rows.
     @Override
     public int update(Uri uri, ContentValues values, String selection,
       String[] selectionArgs) {
      SQLiteDatabase db = dbHelper.getWritableDatabase();
      switch (uriMatcher.match(uri)) {
      case ALL_COUNTRIES:
       //do nothing
       break;
      case SINGLE_COUNTRY:
       String id = uri.getPathSegments().get(1);
       selection = Database.KEY_ROWID + "=" + id
       + (!TextUtils.isEmpty(selection) ?
         " AND (" + selection + ')' : "");
       break;
      default:
       throw new IllegalArgumentException("Unsupported URI: " + uri);
      }
      int updateCount = db.update(Database.SQLITE_TABLE, values, selection, selectionArgs);
      getContext().getContentResolver().notifyChange(uri, null);
      return updateCount;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T17:15:17.807

您应该`notifyDataSetChanged();`从内容提供者的插入方法中调用并提供 URI 作为参数。

在您当前正在调用 notifyDataSetChanged() 的时间点；方法插入可能实际上没有发生，因为内容提供程序对插入的调用将被异步处理。

一个例子可能看起来像这样

```
@Override
public Uri insert(Uri uri, ContentValues values) {
    SQLiteDatabase sqlDB = mDB.getWritableDatabase();
    int uriType = sURIMatcher.match(uri);
    long id;
    switch (uriType) {
        case TEAMS:
            id = sqlDB.replace(TeamModel.TEAM_TABLE_NAME, null, values);
            break;
        case CARS:
            id = sqlDB.replace(CarModel.CAR_TABLE_NAME, null, values);
            break;
        case TEAM_ERRORS:
            id = sqlDB.replace(TeamErrorModel.TEAMS_ERRORS_TABLE_NAME, null, values);
            String teamId = values.get(TeamErrorModel.COL_TEAM_ID).toString();
            String selection = TeamModel.COL_ID + " = ?";
            String[] selectionArgs = {teamId};
            setErrorFlagTeamModel(sqlDB, true, selection, selectionArgs);
            break;
        default:
            throw new IllegalArgumentException("Unknown URI: " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null, false);
    return Uri.parse(uri + "/" + id);
} 
```

第一个参数是传递给 insert 方法的 URI，它将告诉所有侦听该特定 uri 的适配器更新其数据。

最后一个参数 (false) 告诉同步适配器忽略此更改。我假设您没有使用同步适配器

ContentProvider 中的所有方法都应该以类似的方式调用 notifyChange 方法。

您可能会发现插入实际上失败了。所以检查记录是否真的被插入。

**更新** 根据@zapi下面的评论

> 并且您需要在查询方法中添加 cursor.setNotificationUri(contentresolver, uri) 或 Cursor 不知道它必须侦听哪个 uri 通知

自从回答您的问题以来，您已经发布了您的内容提供商，我现在可以看到，实际上根据上面的引用，这实际上是您缺少的链接

# file - 如何在同一时间shell中读取两个文件

> ID：15642981
> 
> 赞同：1
> 
> 时间：2013-03-26T16:56:43.570
> 
> 标签：file, shell, unix, printing

我有两个文件，

```
A

john 1 2 3 4 5 6 7
Ely 10 9 9 9 9 9 9
Maria 3 5 7 9 2 1 4
Rox 10 10 10 10 10 10 10

B 
john 7.5
Ely 4.5
Maria 3,7
Rox 8.5 
```

我想要做的是创建另一个文件，其中只有在文件 A 中他们的平均值大于或等于 8.5 并且在 B 中他们的标记也大于或等于 8.5 的人，所以在我的示例中，C 文件将只包含 Rox，因为只有她符合标准。

我有这个

```
#shell program
echo "Fiserul are numele $1"
filename=$1
filename2=$2
echo "">temp.txt
touch results
compara="8.5"
cat $filename | while read -r line
do
    nota=0
    media=0
    echo " $line"
    rem=$( echo "$line"| cut -f 2- -d ' ')
    for word in $rem 
    do
        echo "$word"
        nota=$(($nota+$word))
        echo "Nota=$nota"
    done
    media=$(($nota / 7))
    if [ "$(echo $media '>=' $compara | bc -l)" -eq 1 ];
    then 
        nume=$( echo "$line"| cut -f 1 -d ' ')
        echo "$nume $media" >> temp.txt
    fi
    echo "Media : $media"
done
cat $filename2 | while read -r line
do 
```

所以我在 temp.txt 文件中有满足文件 A 标准的人，但我的问题是如何将他们与来自 filename2 的人进行比较并从中创建“结果”？我尝试了两个while循环，但出现错误，有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:24:41.900

如果您*真的*想同时读取两个文件（这似乎不是您的实际问题——`join`确实是您正在做的事情的正确工具），您可以在不同的 FD 上打开它们：

```
while IFS= read -r -u 4 line1 && IFS= read -r -u 5 line2; do
  echo "Line from first file: $line1"
  echo "Line from second file: $line2"
done 4<file1 5<file2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:22:10.793

使用`join`命令将 A 和 B 合并到一个文件 C 中：

```
$ join A.txt B.txt
john 1 2 3 4 5 6 7 7.5
Ely 10 9 9 9 9 9 9 4.5
Maria 3 5 7 9 2 1 4 3,7
Rox 10 10 10 10 10 10 10 8.5 
```

修改当前脚本以处理此表单中的数据应该很简单。

# java - java中的双大括号初始化

> ID：15642982
> 
> 赞同：1
> 
> 时间：2013-03-26T16:56:45.097
> 
> 标签：java, performance, refactoring

我在这个网站[http://howtodoinjava.com/2012/11/20/double-brace-initialization-in-java/](http://howtodoinjava.com/2012/11/20/double-brace-initialization-in-java/)找到 了一种开始收藏的新方法

我一直对java有疑问

我可以有一个像`with do`Delphi 那样的结构，让我的代码像这样

```
 Set<String> params = new HashSet<String>() {
        {
            add("param one");
            add("param two");
            add("param three");
            add("param four");
        }
    }; 
```

我在哪里可以找到网站上展示的其他有趣的做法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:00:40.667

人们一直在想出很好的新方法来解决 Java 中的问题。但是只有少数地方可以真正找到这些技巧的汇编。

一个好的起点是使用像[Spring](http://www.springsource.org/get-started)和[Guava](https://code.google.com/p/guava-libraries/)这样的框架，因为它们包含最先进的技巧，可以让你的生活更轻松（一段时间后你的代码更小更安全）。

# c# - Nhibernate 映射具有通用列表属性的类

> ID：15642987
> 
> 赞同：1
> 
> 时间：2013-03-26T16:57:14.147
> 
> 标签：c#, nhibernate, nhibernate-mapping, generic-list

我是 Nhibernate 的新手，我正在尝试使用 Nhibernate 映射一个具有通用列表属性的类（发票），但我不断收到错误消息：“来自表 InvoiceDetails 的关联引用了一个未映射的类：System.Int32”。因为每张发票都有更多详细信息，所以我对 Invoices 和 InvoiceDetails 表之间的一对多关系进行了讨论。

详细信息： a) 发票类：

```
public class Invoice
{
    private IList<InvoiceDetail> _invoiceDetails = new List<InvoiceDetail>();

    public virtual int InvoiceID { get; set; }
    public virtual string SerialNumber { get; set; }
    public virtual string Number { get; set; }
    public virtual DateTime InvoiceDate { get; set; }
    public virtual decimal Amount { get; set; }
    public virtual IList<InvoiceDetail> InvoiceDetails
    {
        get { return _invoiceDetails; }
        set { _invoiceDetails = value; }
    }
    public virtual Customer customer { get; set; }
    public virtual Institution Institution { get; set; }
    public virtual Receipt receipt { get; set; }
    public virtual bool IsDeleted { get; set; }
} 
```

b) InvoiceDetail 类：

```
public class InvoiceDetail
{
    public virtual int InvoiceDetailID { get; set; }
    public virtual int InvoiceID { get; set; }
    public virtual string ServiceDescription { get; set; }
    public virtual string Unit { get; set; }
    public virtual int Quantity { get; set; }
    public virtual double Value { get; set; }
    public virtual bool IsDeleted { get; set; }
} 
```

c) 发票映射文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="MyProject" namespace="MyProject.Model">
    <class name="Invoice" table="Invoices">
        <id name="InvoiceID" column="InvoiceID" type="int">
            <generator class="native"></generator>
        </id>
        <property name="SerialNumber" column ="InvoiceSerialNumber"/>
        <property name="Number" column ="InvoiceNumber"/>
        <property name="InvoiceDate"/>
        <property name="Amount"/>
        <property name="IsDeleted" />
        <many-to-one name="Institution" column="InstitutionID" />
        <bag name="InvoiceDetails" access="nosetter.camelcase"
            inverse ="true" lazy ="false" cascade="all-delete-orphan">
            <key column="InvoiceID"/>
            <many-to-one class="MyProject.Model.InvoiceDetail, MyProject"/>
        </bag>
    </class>
</hibernate-mapping> 
```

d) InvoiceDetail 映射文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    assembly="MyProject" namespace="MyProject.Model">
    <class name="InvoiceDetail" table="InvoiceDetails">
        <id name="InvoiceDetailID" column="InvoiceDetailID" type="int">
            <generator class="native"></generator>
         </id>
         <many-to-one name="InvoiceID" column="InvoiceID" />
         <property name="ServiceDescription"/>
         <property name="Unit"/>
         <property name="Quantity"/>
         <property name="Value"/>
         <property name="IsDeleted" />    
     </class>
 </hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:54:33.343

Looks pretty good!

## Fix InvoiceID

You need to fix the `InvoiceDetail.InvoiceID` property. With many-to-one properties, you should model them as references to the parent entity instead of just as simple value properties containing an ID. You got it right with `Invoice.Institution`.

In `InvoiceDetail`, replace this...

```
public virtual int InvoiceID { get; set; } 
```

... with this:

```
public virtual Invoice Invoice { get; set; } 
```

Likewise, in your mappings, replace this...

```
<many-to-one name="InvoiceID" column="InvoiceID" /> 
```

... with this:

```
<many-to-one name="Invoice" column="InvoiceID" /> 
```

## Fix Bag

Also, a bag cannot be many-to-one - it should be one-to-many. See the [Documentation](http://nhibernate.info/doc/nh/en/index.html#collections-onetomany). Replace this...

```
<bag name="InvoiceDetails" access="nosetter.camelcase" inverse ="true" lazy ="false" cascade="all-delete-orphan">
  <key column="InvoiceID"/>
  <many-to-one class="MyProject.Model.InvoiceDetail, MyProject"/>
</bag> 
```

... with this:

```
<bag name="InvoiceDetails" access="nosetter.camelcase" inverse ="true" lazy ="false" cascade="all-delete-orphan">
  <key column="InvoiceID"/>
  <one-to-many class="MyProject.Model.InvoiceDetail, MyProject"/>
</bag> 
```

## Caution about Lazy=False

One final note: be careful with lazy="false". If you are intending to improve performance be having NHibernate eagerly fetch those related records, this is not the way to do it. See [http://ayende.com/blog/4573/nhibernate-is-lazy-just-live-with-it](http://ayende.com/blog/4573/nhibernate-is-lazy-just-live-with-it) for an explanation of why this is a problem. Refer to [http://nhibernate.info/doc/nh/en/index.html#performance-fetching](http://nhibernate.info/doc/nh/en/index.html#performance-fetching) for the various way to implement this correctly.

# sql-server-2008 - DELETE / INSERT 调用对与事先“如果存在”检查的相对成本？

> ID：15642989
> 
> 赞同：0
> 
> 时间：2013-03-26T16:57:15.150
> 
> 标签：sql-server-2008

我们试图弄清楚几种方法之间的相对成本是多少。

我们有一个网页，人们可以在其中选择添加/保留/删除表格中的行，方法是用复选框标记它们。（人们可以向页面添加新条目，也可以查看现有条目。）

当发布到 Web 服务器时，页面会遍历条目并调用存储过程，将复选框的状态作为参数之一传递。

存储过程当前为每个条目调用一个`delete`语句，后跟一个`insert`if 复选框被标记。这具有简单的优点。

我们正在考虑而不是在其中放置一些`if exists`逻辑来测试该行是否已经在表中。

如果是这样并且复选框被标记，我们将不理会它。否则我们会插入它。相反，如果该行不在表中并且未标记复选框，我们将跳过`delete`and`insert`语句。这最大限度地减少了诸如此类的数量，`deletes`但以更多的逻辑为代价。

就数据库负载而言，一种方法通常优于另一种方法吗？

调用`delete`实际上不影响任何行的语句是否会产生成本，就像添加新记录时那样？这比`if exists`支票更糟糕吗？

该表在所有相关列上都有索引。我假设要发布 600,000 个条目，事先检查会有很大的优势，但有问题的页面最多有 100 个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:07:10.080

您在这里遇到的最大性能问题是您正在为每个条目调用一个存储过程 - 无论您在该存储过程中使用`DELETE/INSERT`还是首先检查，您仍然会有开销600K 过程调用，600K 记录事务中的一些潜在的大部分，等等。

我强烈建议您查看[表值参数](http://msdn.microsoft.com/en-us/library/bb510489%28v=sql.100%29.aspx)。您的 C# 或任何可以将一*组*600K 条目传递给*单个*存储过程的东西，一次，然后您可以执行两个基于集合的操作（伪代码）：

```
 UPDATE src SET val = t.val
   FROM dbo.tvp INNER JOIN dbo.source AS src
   ON t.key = src.key;

 INSERT src SELECT x FROM dbo.tvp AS t
   WHERE NOT EXISTS (SELECT 1 FROM src WHERE key = t.key); 
```